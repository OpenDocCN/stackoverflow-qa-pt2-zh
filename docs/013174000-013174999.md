# StackOverflow 问答 13174000-13174999

# informatica-powercenter - 当会话配置为连续运行时，我们如何才能知道会话何时完成

> ID：13174000
> 
> 赞同：0
> 
> 时间：2012-11-01T09:16:38.890
> 
> 标签：informatica-powercenter, informatica

我已经安排我的工作流程连续运行，它是启用分区的。我的工作流程中有 5 个会话，我想在会话完成后执行一些操作。

由于我将其配置为 Run Continuosly，因此它不会进入成功状态，它将始终处于运行状态。但是我想在每个会话成功完成其过程后做一些会话后成功任务。

在此先感谢 Velva

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:50:37.763

1.  会话没有标记为连续运行，工作流是。
2.  即使工作流连续运行，会话仍然可以具有会话前和会话后任务。那应该是您的解决方案。

# asp.net-mvc-3 - 这个 jquery ajax 方法调用有什么问题？

> ID：13174005
> 
> 赞同：0
> 
> 时间：2012-11-01T09:16:53.817
> 
> 标签：asp.net-mvc-3, jquery, callback

我正在尝试通过 jquery ajax 方法将文本框的值传递给操作方法。action 方法将返回一个 bool 值，基于该值我需要在我的视图中显示一条消息。我正在尝试这个：

```
<script type="text/javascript">
        $(document).ready(function () {
            $('#UserName').blur(function () {
                var name = this.value;
                $.get(@Url.Action("CheckUserName"),{UserName:name},function(data,status){
                if(data==true)
                {
                }
                else
                {
                }
                }););
            })
        });
    </script> 
```

现在的问题是，只有 if 语句正在执行！我已经检查了我的操作方法，它相应地返回 true & false。我需要知道回调函数的参数“data”应该做什么？它会保存从 action 方法返回的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:19:18.867

您缺少 url 周围的引号。

```
$.get('@Url.Action("CheckUserName")',{UserName:name},function(data,status){ 
```

请记住，您需要呈现正确的 javascript，并且 js 中的字符串需要用引号括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:45:24.930

在 JS 代码中，需要在 if 语句中放置 3 个等号。就是这样！

# php - 我需要将字符串转换为数组

> ID：13174006
> 
> 赞同：0
> 
> 时间：2012-11-01T09:16:57.500
> 
> 标签：php

我有字符串变量。可以是：
$string = '["image11.jpg"]';
或者：
$string = '["image11.jpg","image54.png"]';
或者：
$string = '["image11.jpg","image54.png"]';
或者：
$string = '["image11.jpg","image54.png","dfgr.rar"]';
等等。
我需要这个变量作为数组，例如：
$arr[0] = 'image11.jpg';
或者：
$arr[0] = "image11.jpg";
$arr[1] = "image54.png";
或者：
$arr[0] = "image11.jpg";
$arr[1] = "image54.png";
$arr[2] = "dfgr.rar";
等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:22:41.910

```
<?php

$string = '["image11.jpg","image54.png"]';
$arr=json_decode($string);
echo $arr[0];
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:25:07.433

用于`json_decode`将此字符串转换为数组

```
$arr = json_decode($string,true) 
```

谢谢

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-01T09:22:29.163

```
preg_match_all('@"(.*?)"@',$string,$arr); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-01T09:23:09.327

您可以使用explode() 函数。

例如

```
$string = ' "image11.jpg","image54.png","dfgr.rar" ';
$arr = explode(',',$string);  //separating string using coma ',' character 
```

在上面的例子中，$arr 表将包含 3 个值；

```
$arr[0] ="image11.jpg";
$arr[1] ="image54.png";
$arr[2] ="dfgr.rar"; 
```

# android - 如何在 AsyncClass 的 OnPostMethod 中设置 ImageView 和 TextView

> ID：13174007
> 
> 赞同：0
> 
> 时间：2012-11-01T09:17:05.880
> 
> 标签：android, android-layout, android-asynctask, android-ui

我想在 AsyncClass 的 OnPostMethod 中的 imageview 和 textview 中设置图像和文本，就像我在“后台执行”方法中做一些网络操作一样，并且在特定的响应中，我只想用特定的图像和文本填充 imageviews 和 textviews .

谁能告诉我如何在 OnPostMethod 中设置图像。我想知道是否有人可以告诉我我在以下代码中犯的错误

```
 public class testing_async extends Activity {

    private ProgressDialog progressDialog;
    String s;
    ImageView im;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.testing_async);
        new GetCategoryList().execute(s);
        im = (ImageView) findViewById(R.id.im1);

    }

    //
    // THE AsyncTask Class for GetCategoryList....
    //
    class GetCategoryList extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            // showDialog(progress_bar_type);
            progressDialog = ProgressDialog.show(testing_async.this, "",
                    "Loading...");
        }

        @Override
        protected String doInBackground(String... f_url) {

            /*
             * LinearLayout layout = new LinearLayout(testing_async.this);
             * layout = new LinearLayout(testing_async.this);
             * layout.setLayoutParams(new ViewGroup.LayoutParams(
             * ViewGroup.LayoutParams.FILL_PARENT,
             * ViewGroup.LayoutParams.FILL_PARENT));
             * 
             * RelativeLayout inner_layout = new
             * RelativeLayout(testing_async.this); inner_layout = new
             * RelativeLayout(testing_async.this); layout.setLayoutParams(new
             * ViewGroup.LayoutParams( ViewGroup.LayoutParams.FILL_PARENT,
             * ViewGroup.LayoutParams.FILL_PARENT));
             * 
             * ImageView im = new ImageView(testing_async.this);
             * im.setImageResource(R.drawable.logo_background);
             * RelativeLayout.LayoutParams layoutParams90 = new
             * RelativeLayout.LayoutParams( 225, 250); layoutParams90.leftMargin
             * = 45; layoutParams90.topMargin = 45;
             * im.setLayoutParams(layoutParams90); inner_layout.addView(im);
             * layout.addView(inner_layout);
             */
            return null;

        }

        protected void onProgressUpdate(String... progress) {

        }

        @Override
        protected void onPostExecute(String file_url) {

            im.setBackgroundResource(R.drawable.back);
            progressDialog.dismiss();

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T12:51:35.393

```
Context mContext;
ImageView im;

public GetCategoryList(Context context, ImageView myIm) {

 this.mContext = context;
 this.im = myIml;

} 
```

将上面的自定义构造函数添加到您的异步任务中。这样你就有了一个上下文和对你的 imageView 的引用。将需要它来获取资源。

其次，所有注释的代码都应该放在“onCreate”中。

最后，您可以使用以下方法将可绘制对象分配给您的 imageView

```
im.setBackgroundResource(mContext.getResources().getDrawable(R.drawable.bBack)); 
```

希望这可以帮助。

PS 永远不要更改“doInBackground”中的布局。您的应用程序将崩溃。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-01T09:23:42.280

如果您正在设置图像

那么你必须给`im.setBackgroundResource(R.drawable.bBack);`

您在代码中设置 id 而不是图像。

# ruby-on-rails - postgresql的rails时间比较

> ID：13174016
> 
> 赞同：3
> 
> 时间：2012-11-01T09:17:58.837
> 
> 标签：ruby-on-rails, postgresql

我有一个`late`datatype的列名`time without time zone`。我的要求是阅读所有迟到 1 小时以上的行。我必须通过我的 rails 应用程序进行查询。在表中的列值是 like`00:31:00`但在 rails 它是 like `2000-01-01 00:31:00 UTC`。如何直接查询或使用 ActiveRecords 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:58:12.023

当您可以直接以“2000-01-01 00:31:00 UTC”访问 Rails 中的时间时，请使用代码

```
require 'time'
standard_time_for_comparison = '2000-01-01 00:31:00 UTC'
(Time.now - Time.parse(standard_time_for_comparison))/3600 > 1 
```

根据您的需要更改standard_time_for_comparison。

# c# - 将 PDF 文件保存到隔离存储然后启动 - Windows 手机

> ID：13174017
> 
> 赞同：0
> 
> 时间：2012-11-01T09:18:00.040
> 
> 标签：c#, windows-phone-7, xaml, pdf, windows-phone-7.1

我已经到了我的应用程序的阶段，我需要从某个 URL 下载 pdf 文件，将其保存到磁盘（在手机上），然后在保存后立即尝试在任何应用程序中打开文档安装在手机上以处理 PDF (Adobe reader)。

我对如何保存到磁盘并使用另一个应用程序启动某个文件的理解相当有限。

有人可以指出我正确的方向或给我一些关于如何实现这一目标的提示吗？我对windows phone的理解比较有限，需要快速在app上添加这个功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:07:50.743

在 Windows Phone 7 中，无法以编程方式启动 PDF 查看器（但在 Windows Phone 8 中可以）。所以我能建议的最好方法是使用`WebBrowserTask`直接在 PDF 的 URL 上打开网络浏览器，然后让用户打开文件。

这绝对不是一个很好的用户体验，但我一直无法找到任何其他方式（即使`WebBrowser`直接在应用程序中使用控件似乎也不起作用）。

```
var task = new WebBrowserTask();
task.Uri = new Uri("http://www.education.gov.yk.ca/pdf/pdf-test.pdf");
task.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T08:24:46.747

您将 PDF 保存在隔离存储中的什么位置？您直接在 WebBrowser 中打开了在线 PDF 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T14:07:43.683

跟着这些步骤：

1) 从 URI 下载 2) 保存到隔离存储 3) 使用启动器启动它。

注意：1) 如果您下载的是 pdf 文件，请在存储在隔离存储中时使用 .pdf 扩展名。2）确保您的手机中安装了相关软件，例如 Adob​​e for PDF 等。

# ios - 是否有可能知道我的应用程序是否第一次在 xcode 中运行？

> ID：13174020
> 
> 赞同：2
> 
> 时间：2012-11-01T09:18:06.720
> 
> 标签：ios, iphone, cocoa-touch, ios5, xcode4.3

我创建了一个应用程序，我想为用户提示一条消息。也许使用 UIAlertview。之后，如果用户第二次运行应用程序，警报将不再提示。

那可能吗？老实说，我不知道如何做到这一点。任何的想法？我在STO上搜索，实际上[这个链接](https://stackoverflow.com/questions/7090541/how-to-show-popup-alert-view-when-apps-run-first-time)，仍然很困惑。

什么是 NSUserDefaults？NSUserDefaults 如何存储这些信息？我的意思是这是我的第一次或第二次。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T09:27:14.197

要知道什么是 NSUserDefaults，我建议看一下[官方文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。

当然，您可以使用它来实现您的目标。您使用用户默认值来存储有关应用程序中当前运行量的信息。

或多或少像：

```
BOOL isRunMoreThanOnce = [[NSUserDefaults standardUserDefaults] boolForKey:@"isRunMoreThanOnce"];
if(!isRunMoreThanOnce){
    // Show the alert view
    // Then set the first run flag
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"isRunMoreThanOnce"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T09:26:52.587

是的，你可以在你的应用程序中第一次在 NSUserDefault 中保存一个值，并在你打开应用程序后将其设置为其他值。

像

```
if(![[NSUserDefault standardUserDefault] objectforKey:@"AppOpenFirstTime"])
{
// App Open First time 
// Show Alert
[[NSUserDefault standardUserDefault] setObject:@"1" forKey:@"AppOpenFirstTime"]
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T09:29:49.847

您可以检查您是否在 NSUserDefaults 中存储了一些值

```
NSString *flag = [[NSUserDefaults standardUserDefaults] stringForKey:@"not_first_run"];
if (!flag) {
    //first run, do somethig
} 
```

然后将其设置为某个值

```
[[NSUserDefaults standardUserDefaults] setObject:@"just any string" forKey:@"not_first_run"]; 
```

[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)是在应用程序启动之间保存的键值对存储。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T09:27:53.697

您可以完全按照 cortez 在您的链接中所说的那样做。NSUserDefaults 被写入磁盘，并且会从您的应用程序中创建和访问。

看到这个[链接](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T09:28:03.973

您的应用程序在那时启动的第一次`boolForKey:@"AlreadyRan"`是`FALSE`. 之后设置它`TRUE`。

```
if(![[NSUserDefaults standardUserDefaults] boolForKey:@"AlreadyRan"] ) 
 {
    [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"AlreadyRan"];       
 } 
```

> 使用 NSUserDefaults 类，您可以保存与应用程序或用户数据相关的设置和属性。
> 
> ```
> The objects will be saved in what is known as the iOS “defaults system”. 
> The iOS defaults system is available throughout all of the code in your app, and any data saved to the defaults system will persist through application sessions.This means that even if the user closes your application or reboots their phone, the saved data will still be available the next time they open the app! 
> ```

# linux - 统计shell脚本中的进程

> ID：13174022
> 
> 赞同：2
> 
> 时间：2012-11-01T09:18:17.047
> 
> 标签：linux, bash

> **可能重复：**
> [确保一次只运行一个 shell 脚本实例的快捷方式](https://stackoverflow.com/questions/185451/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at)

我是 shell 脚本的新手。

我想做的是避免运行脚本的多个实例。

我有这个 shell 脚本 cntps.sh

```
#!/bin/bash
cnt=`ps -e|grep "cntps"|grep -v "grep"`
echo $cnt >> ~/cntps.log
if [ $cnt < 1 ];
then 
    #do something.
else
    exit 0
fi 
```

如果我以这种方式运行它`$./cntps.sh`，它会回显 2

如果我以这种方式运行它`$. ./cntps.sh`，它会回显 0

如果我用 运行它`crontab`，它会回显 3

有人可以向我解释为什么会这样吗？避免运行多个脚本实例的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:31:53.697

我稍微更改了您的命令以输出`ps`到日志文件，这样我们就可以看到发生了什么。

```
cnt=`ps -ef| tee log | grep "cntps"|grep -v "grep" | wc -l` 
```

这是我看到的：

```
32427 -bash
  20430 /bin/bash ./cntps.sh
    20431 /bin/bash ./cntps.sh
      20432 ps -ef
      20433 tee log
      20434 grep cntps
      20435 grep -v grep
      20436 wc -l 
```

如您所见，我的终端的 shell (32427) 生成了一个新的 shell (20430) 来运行脚本。然后该脚本生成另一个子 shell (20431) 用于命令替换 ( ``ps -ef | ...``)。

所以，两个的计数是由于：

```
 20430 /bin/bash ./cntps.sh
    20431 /bin/bash ./cntps.sh 
```

在任何情况下，这都不是确保只有一个进程在运行的好方法。请参阅此[SO 问题](https://stackoverflow.com/questions/185451/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:18:59.187

首先，我建议使用`pgrep`而不是这种方法。其次，我认为您缺少 a`wc -l`来计算脚本中的实例数

回答您的计数问题：

> 如果我以这种方式运行它`$./cntps.sh`，它会回响`2`

这是因为反引号调用：`ps -e ...`正在触发一个子shell，该子shell也被调用`cntps.sh`，这会触发两个项目

> 如果我以这种方式运行它`$. ./cntps.sh`，它会回响`0`

这是因为您没有运行，而是实际上将其采购到当前运行的 shell 中。这会导致没有以该名称运行的脚本副本`cntps`

> 如果我运行它`crontab`，它会回显`3`

两个来自调用，一个来自产生的 crontab 调用本身`sh -c 'path/to/cntps.sh'`

请参阅[此问题](https://stackoverflow.com/questions/185451/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at)以了解如何执行单实例 shell 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:39:26.610

使用“锁定”文件作为互斥锁。

```
if(exists("lock") == false)
{
    touch lock file // create a file named "lock" in the current dir
    execute_script_body // execute script commands
    remove lock file // delete the file
}
else
{
    echo "another instance is running!"
}

exit 
```

# twitter-bootstrap - 脚本不会检查是否在 php 中单击了提交按钮

> ID：13174023
> 
> 赞同：0
> 
> 时间：2012-11-01T09:18:18.877
> 
> 标签：twitter-bootstrap, post, submit

我想检查是否单击了提交按钮。我以为我做对了，但它不起作用。我正在使用 twitterBootstrap 进行所有样式设置。

形式

```
<form class="form-horizontal" action="control/checkCall.php">
  <div class="control-group">
    <label class="control-label" for="inputUser" name="username">Gebruikersnaam</label>
    <div class="controls">
      <input type="text" id="inputUser" placeholder="Gebruikersnaam">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="inputPassword" name="userpass">Wachtwoord</label>
    <div class="controls">
      <input type="password" id="inputPassword" placeholder="Wachtwoord">
    </div>
  </div>
  <div class="control-group">
    <div class="controls">
      <label class="checkbox">
        <input type="checkbox"> Onthouden
      </label>
      <button type="submit" name="submitLogin" class="btn">Inloggen</button>
    </div>
  </div>
</form> 
```

checkCall.php

```
if (isset($_POST['submitLogin'])){
        echo 'hoi';
        $username = $_POST['username'];
        $userpass = md5($_POST['userpass']);
        checkLogin($username,$userpass);            
    } 
```

点击提交按钮产生的网址 [http://inspired.xeption.nl/bootstrap/control/checkCall.php?submitLogin=](http://inspired.xeption.nl/bootstrap/control/checkCall.php?submitLogin=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:45:02.337

您可以在表单中使用静态值创建一个隐藏的输入字段。然后检查该输入字段。但是话又说回来，为什么不检查是否有另一个输入字段呢？

```
if (isset($_POST['username'])) {...} 
```

现在，您检查一个甚至不在表单中的字段，您知道。

# ruby-on-rails-3 - Rails：Card.id 没有价值

> ID：13174026
> 
> 赞同：2
> 
> 时间：2012-11-01T09:18:20.197
> 
> 标签：ruby-on-rails-3

我是 RoR 的新手，正在尝试做“Pragmatic Agile Web Development”depot 应用程序。应用程序需要跟踪买家添加到购物车的所有商品。

这是 Cart 模型的创建：

```
rails generate scaffold cart 
```

这是应用程序控制器代码：

```
class ApplicationController < ActionController::Base

protect_from_forgery

private
  def current_cart
    Cart.find(session[:cart_id])
  rescue ActiveRecord::RecordNotFound
    cart = Cart.create
    session[:cart_id] = cart.id
    cart
  end
end 
```

我的问题：

1.  在“脚手架”命令中，我没有为此表指定任何列名，但购物车似乎仍然有一个名为“id”的列。脚手架命令是否自动生成“id”列？
2.  在此救援块中，创建了一个新的 Cart 对象，而没有将任何值设置为“Card.id”。在下一行，我们将这个“id”值分配给“session[:cart_id] = cart.id”。将存储的值是多少？

您的回答将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:28:47.780

**1 的答案：**是`id`的，是脚手架生成器自动生成的自动递增的 id 列。每次创建一个新条目时，都会生成一个新的 id。

**2 的答案：**`cart_id`是的，除非它可以通过已存储在会话中的对象找到一个新对象，否则会创建 Cart 的一个新对象。因此，在创建新购物车后，它会将新的购物车保存`cart_id`在会话中以供将来使用。就像控制器再次调用`current_cart`函数时的下一个请求一样，它也会`cart_id`从`session`相应的`Cart`对象中获取一个有效的对象。

如果您并不真正了解`session`ROR 中的会话是如何处理的，那么您可以点击这些链接。

*   会话的概念
    *   [http://en.wikipedia.org/wiki/Session_(computer_science](http://en.wikipedia.org/wiki/Session_(computer_science) )
    *   [http://php.about.com/od/learnphp/qt/session_cookie.htm](http://php.about.com/od/learnphp/qt/session_cookie.htm)
*   ROR 中的会话
    *   [http://guides.rubyonrails.org/security.html](http://guides.rubyonrails.org/security.html)

让我知道任何令人困惑的事情。

# android - 如何从来自android服务的视频网址中获取缩略图？

> ID：13174027
> 
> 赞同：1
> 
> 时间：2012-11-01T09:18:27.947
> 
> 标签：android, android-layout, thumbnails

嗨，在我的应用程序中，我从服务中获取图像 url 和视频 url。从服务中获得这些后，我在 gridview 中显示图像，但对于视频 url，我无法获得缩略图。

如何获取此网址的缩略图.. 示例： ***http ://www.pocketjourney.com/downloads/pj/video/着名.3gp***

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:55:37.450

```
 JSONObject jsonResponse = null;
    try {
         url="http://api.embed.ly/1/oembed?url="www.youtube.com/watch?v=XwGHJJYBs0Q"&maxwidth=500";
        DefaultHttpClient httpClient = new DefaultHttpClient();
        Log.v("URL request", "--->" + url);
        URI uri = new URI(url);
        HttpGet httpget = new HttpGet(uri);
        httpget.setHeader("Accept", "application/json");
        httpget.setHeader("Content-type", "application/json; charset=utf-8");
        HttpResponse response = httpClient.execute(httpget);
        HttpEntity responseEntity = response.getEntity();
        String changeTIDRec = EntityUtils.toString(responseEntity);
        System.out.println(changeTIDRec);
        jsonResponse = new JSONObject(changeTIDRec);
        Log.v("WebService", "Response : " + jsonResponse);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return jsonResponse;

    JSONObject json = new WebService().RequestUrl(url);
            String thumbnail_url;
    if (json == null) {
        return null;
    } else {
        String provider_url = json.getString("provider_url");
        System.out.println("provider_url"+provider_url);
        String description = json.getString("description");
        System.out.println("description"+description);
        String title = json.getString("title");
        System.out.println("title"+title);
        String urls = json.getString("url");
        System.out.println("url"+urls);
        String thumbnail_width = json.getString("thumbnail_width");
        System.out.println("thumbnail_width"+thumbnail_width);
         thumbnail_url = json.getString("thumbnail_url");
        System.out.println("thumbnail_url"+thumbnail_url);
        String version = json.getString("version");
        System.out.println("version"+version);
        String provider_name = json.getString("provider_name");
        System.out.println("provider_name"+provider_name);
        String type = json.getString("type");
        System.out.println("type"+type);
        String thumbnail_height = json.getString("thumbnail_height");
        System.out.println("thumbnail_height"+thumbnail_height);
}
    return thumbnail_url; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-01T09:30:35.580

使用包

```
 import android.media.ThumbnailUtils; 
```

比试试这段代码

```
 Bitmap bm = ThumbnailUtils.createVideoThumbnail(path,Thumbnails.MICRO_KIND), 
```

# mstest - 有什么方法可以在 MsTest 中启用堆栈跟踪？

> ID：13174029
> 
> 赞同：2
> 
> 时间：2012-11-01T09:18:33.267
> 
> 标签：mstest

有时我在 MsTest 运行中遇到错误，并且几乎没有上下文来追踪问题，例如：

```
<ErrorInfo>
    <Message>Unit Test Adapter threw exception: Type is not resolved for member 'Castle.MicroKernel.SubSystems.Conversion.ConverterException,Castle.Windsor, Version=3.1.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc'..</Message>
</ErrorInfo> 
```

注意点“..”是否有一些标志或任何可以使它包含其余错误的东西？我正在从命令行运行 Mstest。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-29T22:37:07.300

您可以从命令行添加 errorstacktrace 参数：

```
mstest /testcontainer:MyTests.dll /detail:errorstacktrace 
```

# android - 字符串值在android中不起作用

> ID：13174030
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:18:35.157
> 
> 标签：android

> **可能重复：**
> [为什么我的字符串比较失败？](https://stackoverflow.com/questions/3576413/why-is-my-string-to-string-comparison-failing)

我无法存储为字符串变量赋值，我在下面给出了我的程序

```
 public class MahindraActivity extends Activity {
    EditText userid,pwd1;
    Button loginbut;
    Statement st;
    ResultSet rs;
    Connection con;
    String userrole1;
    //String userid1,pass1;
    String url="jdbc:microsoft:sqlserver://10.0.2.2:1433;DatabaseName=swingmail";
    String user="sa";
    String pwd="sa";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mahindra);
        userid=(EditText) findViewById(R.id.uname);
       //String userid1=userid.getText().toString();
        pwd1=(EditText) findViewById(R.id.password);
        //String pass1=pwd1.getText().toString();
        loginbut=(Button) findViewById(R.id.login);
        loginbut.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(MahindraActivity.this, "Please Wait"+userid.getText().toString(), 10).show();
                login(userid.getText().toString(),pwd1.getText().toString());
            }

            private void login(String userid1, String pass1) {
                // TODO Auto-generated method stub
                try{
                    Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver");
                    con=DriverManager.getConnection(url, user, pwd);
                    st=con.createStatement();
                    String str="select userrole from usermaster where m_loginid='"+userid1+"'and m_password='"+pass1+"'" ;
                    rs= st.executeQuery(str);
                    while(rs.next()){
                    userrole1=rs.getString("userrole");
                    if(userrole1=="admin"){
                        Intent intent=new Intent(MahindraActivity.this,MainActivity.class);
                        startActivity(intent);
                    }

                }
                }
                catch(Exception e){
                    e.printStackTrace();
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_mahindra, menu);
        return true;
    }
} 
```

当调试用户角色的项目值时，从表中给出“admin”，但是当将它分配给字符串变量`String userrole1`时，它在该行给出 null

```
while(rs.next()){
                    userrole1=rs.getString("userrole");
                    if(userrole1=="admin"){
                        Intent intent=new Intent(MahindraActivity.this,MainActivity.class);
                        startActivity(intent);
                    } 
```

如果loop被跳过并进入catch部分，请有人解释原因或找出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:20:05.347

利用：

```
userrole1.equals("admin"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:17:16.137

其他答案是正确的，您不应该使用`==`操作员，但它们不会解决您的问题。如果结果`rs.getString("userrole")`是`null`，则将其分配给变量并执行

```
if(userrole1.equals("admin")){ 
```

这将按`NullPointerException`原样抛出`userrole1`。`null`相反，反转比较：

```
if("admin".equals(userrole1)){ 
```

这将返回`false`if `userrole1`is `null`，而不是跌倒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:20:36.290

您不能将字符串与`== operator`. 您必须使用String 类的`equals`or`equalsIgnoreCase`方法。

尝试这个。

```
if(userrole1.equalsIgnoreCase("admin"))
{
    Intent intent=new Intent(MahindraActivity.this,MainActivity.class);
    startActivity(intent);
} 
```

> `equalsIgnoreCase`如果两个 String 对象包含完全相同的数据或者它们只是大小写不同，则返回 true；否则为假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:24:27.043

写下面的代码

```
if(userrole1.equals("admin")){
    Intent intent=new Intent(MahindraActivity.this,MainActivity.class);
    startActivity(intent);
} 
```

代替

```
if(userrole1=="admin"){
    Intent intent=new Intent(MahindraActivity.this,MainActivity.class);
    startActivity(intent);
} 
```

并将 String userrole1 声明为 login() 方法，它将解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:16:08.457

```
private void login(String userid1, String pass1) {
                // TODO Auto-generated method stub
                String userrole1 = "";
                try{

                    Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver");
                    Connection con=DriverManager.getConnection(url, user, pwd);
                    Statement st=con.createStatement();
                    String str="select userrole from usermaster where m_loginid='"+userid1+"'and m_password='"+pass1+"'" ;
                    ResultSet rs= st.executeQuery(str);
                    while(rs.next()){
                    userrole1=rs.getString(1);
                    }

                    if(userrole1.equals("admin")){
                        Intent intent=new Intent(MahindraActivity.this,MainActivity.class);
                        startActivity(intent);

                }
                }
                catch(Exception e){
                    e.printStackTrace();
                }
            }
        });
    } 
```

我只是在方法中添加了 String Userrole1，因此可以完美运行

# java - 如何从另一个 .class 文件运行 Java .class 文件？（Java 新手）

> ID：13174031
> 
> 赞同：9
> 
> 时间：2012-11-01T09:18:41.583
> 
> 标签：java, file, netbeans, package, packages

我一直在 Netbeans IDE 中运行不同的单个 Java .java 文件，方法是在 Netbeans 的项目资源管理器中右键单击 .java 文件本身（通常位于 Netbeans 左上部分的部分）。

但是，我一直在谷歌上搜索如何使用代码使一个类文件运行另一个类文件，但无济于事。

我有一个名为“loadanotherfile”的项目，其中包含 2 个文件，即：Loadanotherfile.java 和 otherfile.java

我试图让 Loadanotherfile.java 运行 otherfile.java，但我不确定如何。我阅读了有关 Classloaders 和 URLClassloaders 的信息，但是这些方法似乎不适合我运行另一个 .java 文件的目的。

下面是我提到的 2 个文件的代码。

**加载另一个文件.java**

```
package loadanotherfile;

public class Loadanotherfile {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        System.out.println("Hello World!");
        // TODO code application logic here
    }
} 
```

**其他文件.java**

```
package loadanotherfile;

public class otherfile {

    public static void main(String args[])
    {
        System.out.println("This is the other file.");
    }
} 
```

我觉得该任务与使用“import”语法有关（即类似**import loadanotherfile.*** 但即使我的猜测是正确的，我仍然不确定如何让我的 Loadanotherfile.java 运行 otherfile .java 使用代码。

如何使用 Loadanothefile.java 加载 otherfile.java？

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T09:22:53.913

在 Loadanotherfile.java 中

```
otherfile.main(args); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T09:19:54.453

将两者编译在一起，然后从`Loadanotherfile`,

```
otherfile.main(args); 
```

会成功的。您不需要导入，因为您在同一个[包](http://docs.oracle.com/javase/tutorial/java/package/index.html)中。请注意链接的教程。

我会调查（但是）类实例化，并创建一个新类的实例来调用。从静态方法调用静态方法不是很OO。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-18T17:09:16.423

尝试这个：

```
className.main(Args){
} 
```

这行得通！我自己测试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-26T13:32:30.083

检查`public void main`线路。如果有*IOException*而没有，则插入*Loadanotherfile.java*

用这个

```
otherfile.main(args);{
} 
```

# hadoop - 使用容量调度程序在 Hadoop 集群中设置队列

> ID：13174032
> 
> 赞同：1
> 
> 时间：2012-11-01T09:18:45.560
> 
> 标签：hadoop, mapreduce, job-scheduling

我尝试设置 3 个队列。为此，我配置了 CapacityScheduler.xml，如下所示。但在此之后，jobtracker 将关闭。我也将这些队列的名称添加到了 mapred-site.xml。任何人都知道原因。

```
enter code here

*<!-- queue: BatchJobs-Queue -->
<property>
  <name>mapred.capacity-scheduler.queue.BatchJobsQueue.capacity</name>
  <value>70</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.BatchJobsQueue.supports-priority</name>
  <value>false</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.BatchJobsQueue.minimum-user-limit-percent</name>
  <value>20</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.BatchJobsQueue.user-limit-factor</name>
  <value>1</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.BatchJobsQueue.maximum-initialized-active-tasks</name>
  <value>200000</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.BatchJobsQueue.maximum-initialized-active-tasks-per-user</name>
  <value>100000</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.BatchJobsQueue.init-accept-jobs-factor</name>
  <value>10</value>
</property>

    enter code here

<!-- queue: AdHocJobs-Queue -->
<property>
  <name>mapred.capacity-scheduler.queue.AdHocJobsQueue.capacity</name>
  <value>20<value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.AdHocJobsQueue.supports-priority</name>
  <value>false</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.AdHocJobsQueue.minimum-user-limit-percent</name>
  <value>20</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.AdHocJobsQueue.user-limit-factor</name>
  <value>1</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.AdHocJobsQueue.maximum-initialized-active-tasks</name>
  <value>200000</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.AdHocJobsQueue.maximum-initialized-active-tasks-per-user</name>
  <value>100000</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.AdHocJobsQueue.init-accept-jobs-factor</name>
  <value>10</value>
</property>

    enter code here

<!-- queue: MyQueue  -->
<property>
  <name>mapred.capacity-scheduler.queue.MyQueue.capacity</name>
  <value>10<value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.MyQueue.supports-priority</name>
  <value>false</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.MyQueue.minimum-user-limit-percent</name>
  <value>20</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.MyQueue.user-limit-factor</name>
  <value>1</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.MyQueue.maximum-initialized-active-tasks</name>
  <value>200000</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.MyQueue.maximum-initialized-active-tasks-per-user</name>
  <value>100000</value>
</property>
<property>
  <name>mapred.capacity-scheduler.queue.MyQueue.init-accept-jobs-factor</name>
  <value>10</value>
</property>*

enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T22:31:52.033

您的工作跟踪日志的输出是什么？

假设您正在运行 linux，请尝试运行以下命令：

```
ls -lrt /var/log/hadoop/mapred/ | grep jobtracker | tail -n1 | awk '{print $9}' | xargs -I{} tail -n40 /var/log/hadoop/mapred/{} 
```

# c++ - 私有和公共运算符重载

> ID：13174035
> 
> 赞同：3
> 
> 时间：2012-11-01T09:19:11.847
> 
> 标签：c++, operator-overloading

我尝试实现Horner的方法，遇到了一个问题：

```
root@host:~# cat | g++ -x c++ -std=gnu++11 - && ./a.out
#include <iostream>
#include <iomanip>
#include <iterator>
#include <vector>
#include <numeric>
#include <algorithm>
#include <random>
#include <chrono>

#include <cstdlib>

template< typename F >
class horner
{
public :

    typedef std::vector< F > V;

    horner(F const & x_, V const & c_)
        : x(x_)
        , c(c_)
        , y(0.0L)
    { ; }

    operator F const () const
    {
        return std::accumulate(c.rbegin(), c.rend(), *this).y;
    }

private :

    friend horner std::accumulate< typename V::const_reverse_iterator, horner >(typename V::const_reverse_iterator, typename V::const_reverse_iterator, horner);

    void operator = (F const & rhs)
    {
        y = rhs;
    }

    operator F ()
    {
        y *= x;
        return y;
    }

    F const & x;
    V const & c;
    F y;

};

#define N_COEFF_PARABOLA 3

int main()
{
    typedef double F;
    typedef typename horner< F >::V V;

    V c;
    unsigned seed(std::chrono::system_clock::now().time_since_epoch().count());
    std::cout << "seed = 0x"
              << std::uppercase << std::hex << std::setfill('0') << std::setw(sizeof(seed) * 2)
              << seed << std::endl;
    std::mt19937 generator(seed);
    std::generate_n(std::back_inserter(c), N_COEFF_PARABOLA, generator);

    std::cout << "coefficients: ";
    std::copy(c.begin(), c.end(), std::ostream_iterator< F >(std::cout, " "));
    std::cout << ';' << std::endl;

    F const x(generator());
    F const y(horner< F >(x, c));
    std::cout << "y(" << x << ") = " << y << std::endl;

    // naive
    F xx(1.0L);
    F yy(0.0L);
    for (typename V::size_type i(0); i < c.size(); ++i) {
        yy += c[i] * xx;
        xx *= x;
    }
    std::cout << "y'(" << x << ") = " << yy << std::endl;

    return EXIT_SUCCESS;
}
// press ^D

<stdin>: In function ‘int main()’:
<stdin>:39:5: error: ‘horner<F>::operator F() [with F = double]’ is private
<stdin>:71:32: error: within this context
root@host:~# 
```

在我看来，问题不应该出现，因为`main()`只看到`operator F const & () const`类型转换运算符的版本。但它是。

错误的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:07:44.810

The concepts of visibility and accessibility are completely orthogonal in C++. If a method is visible, but not accessible, the compiler may select it in overload resolution and produce a hard error because it can't use it. This is done on purpose so code does not change semantics silently when it gains or looses access.

# uiscrollview - ios6纵向滚动视图锁定

> ID：13174038
> 
> 赞同：1
> 
> 时间：2012-11-01T09:19:20.023
> 
> 标签：uiscrollview, ios6, orientation, uiinterfaceorientation, device-orientation

我必须将滚动视图锁定为纵向而不是横向。

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        scrollview.scrollEnabled=YES;
        NSLog(@"inside the landscape rotation");
    }
    else
    {
        scrollview.scrollEnabled=NO;
        NSLog(@"inside the portrait rotation");
    }
} 
```

上述方法工作正常，但我必须旋转设备一次 - 有没有办法在不改变方向的情况下将滚动视图锁定在 potrait 中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:56:18.683

您可以像这样输入您的锁定代码`viewDidLayoutSubviews`：

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    if(UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation))
    {
        scrollview.scrollEnabled = YES;
        NSLog(@"inside the landscape roatation");
    }
    else
    {
        scrollview.scrollEnabled = NO;
        NSLog(@"inside the portrait roatation");
    }
} 
```

# android - 安卓 InMobi + adMob？

> ID：13174041
> 
> 赞同：1
> 
> 时间：2012-11-01T09:19:35.373
> 
> 标签：android, admob, ads, inmobi

我想在我的应用中展示 InMobi 广告。当 InMobi 广告未显示（InMobi 未成功）时，我想显示 adMob 广告。如何检查 InMobi 是否成功。也在展示广告。

我知道 Madvertise 有一个 Callbacklistener。

```
 madView = (MadvertiseView) findViewById(R.id.layoutMadView);
 madView.setMadvertiseViewCallbackListener(new MadvertiseViewCallbackListener() {
 @Override 
 public void onLoaded(boolean success, MadvertiseView arg1) {
    if (success) {
       // Madvertise ad
    } else {
       // adMob ad
    }
 }} 
```

我试图将其更改为 InMobi，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:02:03.377

MAdvertise 是什么意思？我也没有看到任何有关此类的官方文档。

如果您想展示来自多个提供商的广告，您可以使用[Ad Network Mediation](https://developers.google.com/mobile-ads-sdk/docs/admob/mediation)。它还允许您设置广告商的偏好顺序。

# .htaccess - Htaccess==> domain.com/folder/index.php?ref=001 到 domain.com/?ref=001

> ID：13174046
> 
> 赞同：0
> 
> 时间：2012-11-01T09:19:43.593
> 
> 标签：.htaccess

我正在尝试在 htaccess 中执行此操作：

> domain.com/folder/index.php?ref=001 到 domain.com/?ref=001

任何帮助将不胜感激.....

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:05:22.820

> Just want to redirect the browser.

Can use either mod_alias:

```
Redirect /folder/index.php / 
```

or mod_rewrite:

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ref=
RewriteRule ^/?folder/index.php$ / [L,R] 
```

# label - 符号轴上的 JFreechart 多行标签或其他对齐图表的方式

> ID：13174048
> 
> 赞同：1
> 
> 时间：2012-11-01T09:19:54.390
> 
> 标签：label, jfreechart, axis, multiline

我有很多图表，每个图表都在不同的 JInternalFrame 中：

![在此处输入图像描述](../Images/f0571ebec1309b1a47c266362f24a858.png)

但是水平轴应该对齐到同一点（可能是红线）。问题是，标签的空间是由 jFreechart 自动设置的。

所以我试图找到多行刻度标签的解决方案。我找到了这个：

```
 int optionsCount = state.getStatusOptions().toArray().length;
  String[] grade = new String[optionsCount + 1];
  grade[0] = "";
  for (int x = 1; x < optionsCount + 1; x++) {

         //grade[x] ="blaa"+x;//state.getStatusOptions().get(x - 1);
         //grade[x]="1.line\n2.line\n3.line";
           grade[x] = newLineString(state.getStatusOptions().get(x - 1), 5);
  }
  // grade[1]="1.line\n2.line";

  SymbolAxis rangeAxis;

  rangeAxis = new SymbolAxis("", grade){

                        @Override
                        protected Rectangle2D getLabelEnclosure(Graphics2D g2, RectangleEdge edge) {
                             Rectangle2D l = super.getLabelEnclosure(g2, edge);
                            l.setRect(l.getX(),l.getY(),l.getWidth()*0.5,l.getHeight());
                            return l;
                        }

             @Override
             protected AxisState drawTickMarksAndLabels(Graphics2D g2, double cursor, Rectangle2D plotArea, Rectangle2D dataArea, RectangleEdge edge) {
                 AxisState state = new AxisState(cursor);

                 if (isAxisLineVisible()) {
                     drawAxisLine(g2, cursor, dataArea, edge);
                 }

                 double ol = getTickMarkOutsideLength();
                 double il = getTickMarkInsideLength();

                 List ticks = refreshTicks(g2, state, dataArea, edge);
                 state.setTicks(ticks);
                 g2.setFont(getTickLabelFont());
                 Iterator iterator = ticks.iterator();

                 // remember the max number of lines used in any label
                 int maxLinesUsed = 0;

                 while (iterator.hasNext()) {
                     ValueTick tick = (ValueTick) iterator.next();
                     if (isTickLabelsVisible()) {
                         g2.setPaint(getTickLabelPaint());
                         float[] anchorPoint = calculateAnchorPoint(tick, cursor, dataArea, edge);

                         g2.draw(plotArea);
                         g2.setPaint(Color.green);
                         g2.draw(dataArea);
                         g2.setPaint(getTickLabelPaint());
                         // split by "\n" and draw text in a new line for each result
                         String tickText = tick.getText();
                         int line = 1;
                         for (String tickTextLine : tickText.split("\n")) {
                             float x = anchorPoint[0];
                             // one row down...
                             float y = anchorPoint[1] + line * g2.getFont().getSize();
                             TextUtilities.drawRotatedString(tickTextLine, g2, x, y, tick.getTextAnchor(), tick.getAngle(), tick
                                     .getRotationAnchor());
                             line++;
                         }
                         // if we used more lines than any time before remember it
                         if (line > maxLinesUsed) {
                             maxLinesUsed = line;
                         }
                     }

                     if (isTickMarksVisible() && tick.getTickType().equals(TickType.MAJOR)) {
                         float xx = (float) valueToJava2D(tick.getValue(), dataArea, edge);
                         Line2D mark = null;
                         g2.setStroke(getTickMarkStroke());
                         g2.setPaint(getTickMarkPaint());
                         if (edge == RectangleEdge.LEFT) {
                             mark = new Line2D.Double(cursor - ol, xx, cursor + il, xx);
                         } else if (edge == RectangleEdge.RIGHT) {
                             mark = new Line2D.Double(cursor + ol, xx, cursor - il, xx);
                         } else if (edge == RectangleEdge.TOP) {
                             mark = new Line2D.Double(xx, cursor - ol, xx, cursor + il);
                         } else if (edge == RectangleEdge.BOTTOM) {
                             mark = new Line2D.Double(xx, cursor + ol, xx, cursor - il);
                         }
                         g2.draw(mark);
                     }
                 }

                 // need to work out the space used by the tick labels...
                 // so we can update the cursor...
                 // patched using maxLinesUsed => we need more space because of multiple lines
                 double used = 0.0;
                 if (isTickLabelsVisible()) {
                     if (edge == RectangleEdge.LEFT) {
                         used += findMaximumTickLabelWidth(ticks, g2, plotArea, isVerticalTickLabels()) * maxLinesUsed;
                         state.cursorLeft(used);
                     } else if (edge == RectangleEdge.RIGHT) {
                         used = findMaximumTickLabelWidth(ticks, g2, plotArea, isVerticalTickLabels()) * maxLinesUsed;
                         state.cursorRight(used);
                     } else if (edge == RectangleEdge.TOP) {
                         used = findMaximumTickLabelHeight(ticks, g2, plotArea, isVerticalTickLabels()) * maxLinesUsed;
                         state.cursorUp(used);
                     } else if (edge == RectangleEdge.BOTTOM) {
                         used = findMaximumTickLabelHeight(ticks, g2, plotArea, isVerticalTickLabels()) * maxLinesUsed;
                         state.cursorDown(used);
                     }
                 }

                 return state;

             }

         }; 
```

如上图所示，新行功能有效，但标签间距无效。我试图覆盖 getLabelEnclosure 方法，但它给定的字符串只是“”。

有谁知道我的问题的解决方案。多线或其他方式来对齐图表？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T12:03:50.380

覆盖reserveSpace函数，并在计算高度的地方用你需要的行数修改它：

```
Rectangle2D labelEnclosure = getLabelEnclosure(g2, edge);
if (RectangleEdge.isTopOrBottom(edge)) {
    double labelHeight = labelEnclosure.getHeight();
    space.add(labelHeight + **YOUR_NUMBER_OF_ROWS** * tickLabelHeight, edge);
} else if (RectangleEdge.isLeftOrRight(edge)) {
    double labelWidth = labelEnclosure.getWidth();
    space.add(labelWidth + tickLabelWidth, edge);
}

return space; 
```

# javascript - 将不同的事件绑定到多个 HTML 元素，但执行一个功能

> ID：13174052
> 
> 赞同：1
> 
> 时间：2012-11-01T09:20:00.020
> 
> 标签：javascript, bind, jquery

我有一个`button`，一个`div`和一个`select combo-box`

**我想在单击按钮**时执行特定功能，**在 div**中的 mouseenter以及**组合框的 onchange 和 blur 上执行**

我现在就这样做

```
$("#divID").bind('mouseenter',function(){

   // do my stuff
}) 

$("#comboID").bind('blur change',function(){

   // do my stuff
})  

$("#buttonID").bind('click',function(){

   // do my stuff
}) 
```

我每次都做同样的事情。我想将所有事件组合在一起以避免重复有没有办法在一个语句中将每个元素与特定事件绑定

我知道我可以单独编写代码`function`并每次调用它（解决重复问题）。

但我想知道这是否可以在没有单独`function`且唯一的情况下完成`jQuery`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:26:41.043

您有单独的事件和单独的选择器，因此一个选择器或事件是不够的，您可以映射 id 和事件。我认为 jquery 无法使其成为单一语句。

**[现场演示](http://jsfiddle.net/ReRBe/1/)**

```
arrIDs = ['divID','comboID','buttonID'];
arrEvents = ['mouseenter','blur change','click'];

for(idx=0; idx < arrIDs.length; idx++) 
    $("#" + arrIDs[idx] ).bind(arrEvents[idx], yourFunction);

function yourFunction(event)
{
    alert("yourFunction call by " + event.target.id);  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:22:02.097

不是在一个声明中，因为您想将不同的事件附加到不同的元素。但是您可以声明一个为所有事件调用的回调函数。

```
var callback = function () {
  // do my stuff
};

$("#divID").bind('mouseenter', callback);
$("#comboID").bind('blur change', callback);
$("#buttonID").bind('click', callback); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:23:58.543

如果您不使用 jquery，您始终可以将其他事件设置为等于第一个事件。但好的做法是创建一个单独的函数

# arrays - Linux清空堆内存需要多长时间

> ID：13174054
> 
> 赞同：0
> 
> 时间：2012-11-01T09:20:00.413
> 
> 标签：arrays, c, malloc, heap-memory, calloc

我想知道......假设我已经动态分配了一个数组

```
array = calloc(n, sizeof(float)); 
```

或类似的东西。此外，如果 n 是一个非常大的数字（~ 100 万，为了争论），如果我最后没有清除堆内存，Linux 需要多长时间`free()`？我知道任何操作系统都会四处走动并清除未释放和未使用的堆内存区域。但我认为这需要多长时间取决于操作系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:24:22.333

如果一个进程被终止（自愿或强制），它的所有堆内存将*立即*被包括 Windows、Linux 和 OS X 在内的操作系统回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:23:59.477

当您的进程终止时，它将释放内存。当一个进程终止时，所有内存、打开的文件句柄和它打开的任何资源都被系统关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:29:28.100

malloc/calloc 不太可能满足如此大量的内存请求。它们很可能返回 NULL。

`I know any OS would go around and clear un-freed and unused heap memory areas.`

不，操作系统不会寻找未使用的堆区域。假设您已经成功地动态分配了一些内存（无论它是小还是大），只要进程正在运行，操作系统就不会取消分配内存，如果您自己不`free`这样做的话。

当一个进程不断请求内存时，它可能会被 Linux 上的 Out Of Memory 杀手杀死。

# .net - 性能差异：在 SSMS 中执行存储过程与使用 .NET Windows 应用程序调用存储过程

> ID：13174057
> 
> 赞同：1
> 
> 时间：2012-11-01T09:20:14.030
> 
> 标签：.net, stored-procedures

我实际上有一个存储过程，我用它来归档数据库中的事务数据并将它们传输到同一服务器中的 DW 数据库。

当我在 SSMS 中运行存储过程时，大约需要 2-2.5 分钟才能完成。但是，当我尝试使用 Windows 应用程序（它是一个批处理作业）调用存储过程时，大约需要 30 分钟才能完成（相同的参数）。

我想知道这是否正常，因为我对时差感到惊讶。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:11:24.717

这是因为您的 sql server 在其缓存中存储了 2 个执行计划。当您查询某些内容时，SQL Server 会执行此操作

*   当前设置的缓存中是否有任何执行计划？
*   如果没有创建一个使用提供的参数来猜测最佳查询计划

您的 ado.net 客户端将查询设置 ARITHABORT 设置为 Off，SSMS 设置为 On，因此 SQL Server 将有 2 个执行计划。

如果您想在 SSMS 和您的代码中处于相同的状态，请执行此工具 -> 选项 -> 查询执行 -> SQL Server -> 高级 -> 取消选中 SET ARTHABORT（此参数无用）。

来源： http: [//www.sommarskog.se/query-plan-mysteries.html](http://www.sommarskog.se/query-plan-mysteries.html)（我读过的最好的文章）

# objective-c - 在调试 iOS 应用程序时，如何在 Xcode 控制台中打印无符号字符？

> ID：13174058
> 
> 赞同：1
> 
> 时间：2012-11-01T09:20:17.230
> 
> 标签：objective-c, ios

如何在调试 iOS 应用程序时在 Xcode 控制台中打印无符号字符？

我试过 print charVar，但它只给了我地址：

```
(const xmlChar *) $11 = 0x15a03878 
```

其中 xmlChar 定义为`typedef unsigned char xmlChar;`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:32:14.133

您可以使用 %s 修饰符来查看它。所以它会是`NSLog(@"%s", foo)`

可以在此处找到有关此内容的出色参考指南[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

# android - 以编程方式为我的应用程序中的图像启动墙纸选择器

> ID：13174060
> 
> 赞同：1
> 
> 时间：2012-11-01T09:20:21.130
> 
> 标签：android

这就是我要找的...

我正在 Android 2.3.3 中开发应用程序

我的应用程序有 3 个 .JPG 文件，当用户安装它时，这些文件将作为应用程序的一部分下载。作为我的应用程序配置的一部分，用户应该能够选择三个 .JPG 之一作为壁纸。由于我不能直接设置墙纸（通过编程），我希望为我的应用程序中的图像启动墙纸选择器，并且用户可以从中选择墙纸。可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:22:24.203

只需在您的代码中使用此功能...

```
int ACTION_REQUEST_GALLERY = 1 // YOU CAN PUT ANY INTEGER VALUE AS A REQUEST_CODE

private void pickFromGallery() {
    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
    intent.setType("image/*");

    Intent chooser = Intent.createChooser(intent, "Choose a Picture");
    startActivityForResult(chooser, ACTION_REQUEST_GALLERY);
} 
```

希望这会帮助你。

**已编辑**

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {
        switch (requestCode) {
            case ACTION_REQUEST_GALLERY:
                // user chose an image from the gallery
                Uri uri = data.getData();
                YOUR_IMAGE_VIEW.setImageURI(uri);
            break;
        }
    }
} 
```

# perl - Perl中如何将十六进制转换为字符串

> ID：13174068
> 
> 赞同：2
> 
> 时间：2012-11-01T09:20:43.050
> 
> 标签：perl, unicode, hex

我正在使用 Perl，我得到了一个字符串：

> agn\u00e8s b

我怎样才能将其转换为

> agnès b

?

我试图使用下面的代码。

```
my $hex = "agn\u00e8s b";
$hex =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C",hex($1))/eg;
print "$hex\n"; 
```

但它失败了，并显示了一些奇怪的字符。更重要的是，我还需要显示中文单词。例如，

> \u9eb5\u5305

我如何将其转换为以下内容？

> 面包

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:18:53.283

```
my $s = "agn\\u00e8s b";
$s =~ s/\\u(....)/chr(hex($1))/eg;
print "$s\n"; 
```

不要忘记对输出进行编码

```
use open ':std', ':encoding(UTF-8)'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:47:28.703

用这个：

> $hex =~ s/(\u[a-fA-F0-9][a-fA-F0-9][a-fA-F0-9][a-fA-F0-9])/encode(' utf-8', chr(hex($1)))/例如；

# iphone - PhoneGap/Cordova 设备未准备好

> ID：13174071
> 
> 赞同：1
> 
> 时间：2012-11-01T09:20:51.833
> 
> 标签：iphone, ios, cordova

只需使用 Xcode 中的 PhoneGap iOS 库构建我的第一个 PhoneGap/Cordova 应用程序。一切正常，基本的“HelloWorld”应用程序在 iOS 模拟器中运行（“设备准备就绪”）。

当我将创建的 WWW 目录（包括 cordova-2.1.0.js）上传到我的网络服务器并尝试在我的 iPhone 上的 Safari 中打开应用程序时，它一直说“正在连接到设备”。知道如何让它工作/为什么这个基本构建不起作用？

链接：[http ://robinhq.nl/projects/cordova](http://robinhq.nl/projects/cordova)

希望能帮到你，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:34:27.307

PhoneGap 是一种应用程序容器技术，允许您使用 HTML、CSS 和 JavaScript 为移动设备创建本机安装的应用程序。

Phonegap cordova-2.1.0.js 仅适用于 iPhone 应用程序。它不支持 Safari 浏览器（iPhone）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T11:48:14.927

要在浏览器中测试 PhoneGap / Cordova，请使用 Ripple (Chrome)。更多信息：[http ://emulate.phonegap.com/](http://emulate.phonegap.com/)

# php - 请查看我的代码。需要输入

> ID：13174076
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:21:02.747
> 
> 标签：php, jquery, ajax

我将以下代码用于插入数据库字段的记录。我想更正以下 if 和 else 条件，因为当记录插入数据库时​​，它应该回显 0，但它给出 1。我无法找出问题。请我需要在我的代码中更正。

```
<?php    /****************dbfile.php****/
$data = $_REQUEST['columns_one'];
$store_data = explode(",",$data);
//print_r($store_data);
$con = mysql_connect("localhost","root","");
mysql_select_db("formbuilder",$con);

$query = "INSERT INTO record(form_id,form_structure) VALUES('1','value')";
$result = mysql_query($query);

if(mysql_num_rows($result)>0)
{
    echo 0;
}
else
{
    echo 1;

}

?>

<script>   <!--- ajax call----->
$.post("dbfile.php", {columns_one:columns_one },  
            function(result){  
                //if the result is 1  
                if(result == 1){
                alert('success');  

                    return true;
                }else{ 
                alert('fail'); 

                    return false;

                }  
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:22:40.647

您使用了错误的功能。`mysql_num_rows`不会返回受 INSERT 语句影响的行，请参见此处：

[http://www.php.net/manual/en/function.mysql-affected-rows.php](http://www.php.net/manual/en/function.mysql-affected-rows.php)

使用`mysql_affected_rows`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:25:58.750

您必须在逗号后插入空格！更改这行代码：

```
$query = "INSERT INTO record(form_id,form_structure) VALUES('1','value')"; 
```

使用此代码：

```
$query = "INSERT INTO record (`form_id`, `form_structure`) VALUES ('1', 'value')"; 
```

希望它可以工作 祝你好运...

# c - 仅公开 C 中所需的函数

> ID：13174078
> 
> 赞同：5
> 
> 时间：2012-11-01T09:21:05.297
> 
> 标签：c, api, shared-libraries, static-libraries

我正在用 C 编写一个小型 API 库类型的模块。我将编译这个模块并将其提供给我的开发人员，我将在我的模块的头文件中公开一些必需的函数，以便使用我的模块的开发人员知道要调用哪个函数所需的功能。现在我想问一件事：我可以在 C 中只公开所需的函数吗？例如

我有 test.c 有：

```
#include "test.h"
void A()
{
  if( some condition is true )
    B();
  else
   return;
}

void B()
{
  //some code here
} 
```

在 test.h 中，我只暴露了一个函数，即

```
void A(); 
```

现在 B() 显然依赖于 A() 中的条件，否则它无法运行，因为只有 A() 在 test.h 中公开，所以用户不会知道他/她也可以直接调用 B()。现在我担心的是，如果用户知道（或通过猜测）我的模块中有一些名为 B() 的函数可以通过绕过 A() 直接调用，那么它可能会危及我的实现。

我知道在这种情况下 C++ 会更好，因为公共和私有方法，我也有一个想法，我可以通过在 B() 中使用 A() 的一些标志检查来防止 B() 被直接调用，但我想知道如果有任何其他方法使用户无法调用未在头文件中公开的我的函数（如 B()）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T09:22:19.790

制作功能`B`：

```
static void B(void)
{
  //some code here
} 
```

它的可见性将仅限于定义它的翻译单元。`B`将有内部联系；`A`会有外部联系。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T10:25:04.393

在某些 *NIX 上仅由 gcc/clang 支持的另一种链接是“隐藏”链接。

您可以像这样定义一个函数：

```
__attribute__((visibility, ("hidden"))) void foo(void) {
      return;
} 
```

*这将允许从共享对象*中的另一个点调用该函数，但不能在该点之外调用该函数。也就是说，它可以从不同的翻译单元调用，但不能从使用您的库的应用程序调用。

有关详细信息，请参阅[http://gcc.gnu.org/onlinedocs/gcc-4.4.1/gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc-4.4.1/gcc/Function-Attributes.html)。

# javascript - 在页面提交上使用 settimeout 方法

> ID：13174079
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:21:05.810
> 
> 标签：javascript, firefox, dom-events, settimeout, page-refresh

我需要获取网站中可用的列表项，该列表项以分页样式列出项目。我将提取每个页面上项目的信息。我使用 编写了一个 Javascript 代码`settimeout(function(){...code...}, 5000)`，并在 Firefox Web 控制台中运行此代码。脚本获取页面中的所有项目，一旦完成，脚本通过执行`click()`超链接“next”的方法提交页面。这将一直持续到页面中有“下一页”超链接（在最后一页中只有“后退”超链接，如果存在）。在提交的每个页面上，我都会将其超时为 5 秒。

我在 Firefox Web 控制台中执行了这段代码，成功运行并获取了第一页的结果，然后提交了页面，下一页也加载了。但是，问题是，一旦提交页面，脚本就会停止。即使在下一页加载后如何连续运行此脚本？有没有其他方法可以实现这个功能？

```
var inc=0;
var ids;
var main=function(){
console.log("attempiting..............."+inc);
var i=0;
{
    ids[inc]=b();//function, fetch the items from the page
    console.log(ids);
    var more=document.getElementById("m_more_item");
    if(more){
        //next link is there
        var cli=more.getElementsByTagName("a");
        console.log("navigating to next page "+cli[0]);
        inc++;
        setTimeout(main,5000); //I tried placing this after click, but didnt work!
        cli[0].click(); //submitting...
    } else {
        //last page reached, exiting...
        console.log("exit1-> total items fetched are: "+ids);
        return ids;
    }
}
};
main(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:25:15.420

setTimeout 调用使您的函数递归并保持循环，这应该可以工作。

```
setTimeout(cli[0].click, 5000); 
```

干杯。

编辑：评论很长，所以我将其添加为答案。

您可以在单独的页面中使用 AJAX 调用，首先使用 start=1 调用带有 AJAX 的页面，并在此请求成功后解析数据并根据需要收集信息，不要忘记为您的下一个请求保留 lastItemIndex 并发布您需要的信息与另一个 AJAX 调用成功的第二个 AJAX 调用第一个与 start=lastItemIndex+1。

这些调用应该做你想做的事。

我建议为此使用 jQuery，因为它可以很容易地调用 AJAX 并解析响应。

# qt - QHeaderView::section:selected

> ID：13174084
> 
> 赞同：1
> 
> 时间：2012-11-01T09:21:32.023
> 
> 标签：qt, qtstylesheets, qheaderview

我将以下样式段应用于 QHeaderView

```
QHeaderView::section:selected
    {
        padding-left: 16px;
        background-color: #1c1c1c;
    } 
```

由于某种原因，QHeaderView 的“选定”伪状态不起作用，但在文档中它说它应该起作用。我试过以下并且它有效：

```
QHeaderView::section:first
{
    padding-left: 16px;
    background-color: #1c1c1c;
} 
```

我的问题是，如何为选定的 Header TIA 应用不同的样式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:56:39.577

这是 Qt4.7 上的一个错误。它也影响到`QHeaderView::section:checked`。你可以看到：

*   [Qt 中心上的这个线程](http://www.qtcentre.org/threads/46841-Can-t-style-QHeaderView-section-selected-in-QSS-stylesheet)
*   [这个错误报告](https://bugreports.qt-project.org/browse/QTBUG-23689)

如果您使用的是 Qt4.7，您可以尝试升级到较新的版本。也许该错误已在最近的版本中得到修复。

# php - Codeigniter 模板和包含视图有问题

> ID：13174101
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:22:50.403
> 
> 标签：php, codeigniter

也许你不能帮助我，但也许你有一些想法可以尝试在哪里找到问题。我的模板页面如下所示：

dve_kolone.php

```
<?php $this->load->view('frontend/inc/header'); ?>
<?php $this->load->view('frontend/inc/logo'); ?>

<?php if(empty($pretraga_prikaz)) {
    $this->load->view('frontend/inc/pretraga');
}
?>
    <div id="main_content"> 
        <div class="sprite" id="main_content_header"> 
            <div class="kolacici belit"> <?php if(!empty($kolacici)) { echo $kolacici;}?> </div>
            <div id="main_brojac_gore" class="f20 bold belit ml200"   style="position:relative;"><h1><?php if(!empty($naslov)) { echo $naslov;}?>

            </h1><?php if(!empty($oglas_izmene)) { echo $oglas_izmene;} ?></div>    

        </div>
        <div id="mainov" class="dve_kolone">        
        <div id="main_levo">
            <?php 
            if(!empty($levo)) {
                $this->load->view($levo);
            } else {
                $this->load->view('frontend/inc/levo_standard');
            } ?>
        </div>
        <div id="main_sredina_full" class="<?if(!empty($klasa)){ echo $klasa;}?>">

<?php 
if(!empty($partial)) {
    $this->load->view($partial);
} else {
    redirect(base_url());
} ?>
<br class="cl"/>
</div>
<br class="cl"/>
</div>
</div>

<?php $this->load->view('frontend/inc/footer'); ?> 
```

在控制器中，我发送两个视图和标题。在视图中是一个简单的词：

```
function nesto()
{
    $data['naslov'] = 'Kursna lista';
    $data['partial'] = 'proba';
    $this->load->view('frontend/dve_kolone', $data);
} 
```

[在现场它看起来像这样： http](http://www.svastara.rs/anketa/nesto) ://www.svastara.rs/anketa/nesto

现在我将在现场向您展示另一个看起来很完美的页面：[http ://www.svastara.rs/kursna_lista/eur](http://www.svastara.rs/kursna_lista/eur)

所以我的问题是你会看到在第一个链接页脚中缺少一个带有红线的菜单。我不明白为什么，因为在使用此模板的其他页面上，很多时候没有使用 css，只包含简单的东西。现在我放了一个简单的东西，但是页面不适合页面或文本的高度，太大了。而且我没有对任何 CSS:S 进行更改

我希望你有一些想法

FOOTER 非工作部分：

```
<div id="footer" class="sprite">
    <div class="footer_nav fl">
        <ul class="navig">

            <li><a href="<?=base_url()?>info/predaja_oglasa">PREDAJA OGLASA</a></li>
            <li><a href="<?=base_url()?>info/reklamiranje">REKLAMIRANJE</a></li>
            <li><a href="<?=base_url()?>horoskop">HOROSKOP</a></li>
            <li class="nbr"><a href="info/kontakt">KONTAKT</a></li>
            <ul>
    </div>
    <div id="footer_social">

        <a href="http://www.youtube.com/"><img src="<?=slika()?>" class="sprite youtube fl hop"/></a>
        <a href="http://www.twitter.com/v_svastara"><img src="<?=slika()?>" class="sprite twitter fl hop"/></a>
        <a href="http://facebook.com/Vojvodjanska.Svastara"><img src="<?=slika()?>" class="sprite facebook fl hop"/></a>
    </div>

    <br class="cl"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:31:07.390

代替 `<li class="nbr"><a href="info/kontakt">KONTAKT</a></li>`

和`<li class="nbr"><a href="<?=base_url()?>info/kontakt">KONTAKT</a></li>`

在您的页脚代码中。

# ruby-on-rails - 拆分字符串并使用 has_and_belongs_to_many 关联保存

> ID：13174104
> 
> 赞同：2
> 
> 时间：2012-11-01T09:23:02.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-and-belongs-to-many

我有一个文本字段，用户可以输入标签（就像 stackoverflow 上的标签一样）。他们可以用逗号分隔标签。现在，我知道如何拆分标签了。但是我的 n00b 我被困在下一个阶段。我有一个 Tag 表、一个 Trip 表和一个 tags_trips （一个行程可以有多个关键字，但我希望这些关键字在我的数据库中是唯一的，因此当它们存在时，它们可以在其他行程中再次使用）。

真正的问题是；拆分字符串后，如何检查关键字是否存在并将现有 ID 放置在我的 tags_trips 表中，如果它不存在如何获取我刚刚在我的 tags_trips 中拆分的数组一口气上桌？

这是我的表格的概述：

```
Trip
:id => :integer,
:title => :string,
:description => :text,
:user_id => :integer,
:created_at => :datetime,
:updated_at => :datetime

Tag
:id => :integer,
:title => :string,
:created_at => :datetime,
:updated_at => :datetime

tags_trip
:tag_id => :integer,
:trip_id => :string 
```

我`has_and_belongs_to_many`在我的模型中使用 Tag 和 Trip 之间的关联，并`fields_for :tags`在我的 Trip 表单中获取 text_field。（注意：表单有效，并且我设法将键入的关键字字符串输入到我的标记表中！只是没有分开;-)）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:50:19.470

如果您希望标签的标题在整个应用程序中是唯一的，则需要在表上设置唯一性索引。除此之外， has_and_belongs_to_many 有一个 :uniq 字段，当设置为 true 时，将忽略重复。如果仍然不能解决问题，请在创建标签时尝试使用 find_or_create_by_title 助手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:12:39.990

我已经想通了。我不确定这是否是最好的方法，但它有效！这就是我所做的：如果存在，我会遍历 params[:trip][:tag_attributes]。并再次循环遍历它，同时用逗号分隔它。比在循环中我`find_or_create_by`对trip.tags 和瞧！他们得救了。之后，我从 params[:trip] 中删除 tags_attributes，因此它不会保存在 update_Attributes 中。ChuckE，你帮了大忙，谢谢一百万！

代码：

```
def update
    @trip = Trip.find(params[:id])

    if params[:trip][:tags_attributes].present?
      params[:trip][:tags_attributes].each do |tag| 
       @a = tag[1]['title']
       @a.split(',').each do |single|
          @trip.tags.create(:title => single)  
       end
      end
    end

    #Delete the tags attributes from the trip array so it will not be saved.
    params[:trip].delete('tags_attributes')
    respond_to do |format|
      if @trip.update_attributes(params[:trip])
      format.html { redirect_to @trip, notice: 'Trip was successfully updated.' }
      format.json { head :no_content }
      else
       format.html { render action: "edit" }
        format.json { render json: @trip.errors, status: :unprocessable_entity }
      end
    end
  end 
```

# ios - UIVIEW 从 上到下变换

> ID：13174105
> 
> 赞同：0
> 
> 时间：2012-11-01T09:23:01.427
> 
> 标签：ios, uiview, uianimation

我想`UIView`从上到下创建动画方向，但是尝试了两天后，我投降了

这是我的代码

```
- (IBAction)goAction:(id)sender 
{
    primaryView.userInteractionEnabled = NO;

    [UIView animateWithDuration:0.3 animations:^{
        secondaryView.frame = CGRectMake(0, 100, secondaryView.frame.size.width, secondaryView.frame.size.height);

        CALayer *layer = primaryView.layer;
        layer.zPosition = -4000;
        CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
        rotationAndPerspectiveTransform.m21 = 1.0 / -300;
        layer.transform = CATransform3DRotate(rotationAndPerspectiveTransform, 10.0f * M_PI / 180.0f, 1.0f, 0.0f, 0.0f);            
        primaryShadeView.alpha = 0.35;
    } completion:^(BOOL finished) {
        [UIView animateWithDuration:0.3 animations:^{
            primaryView.transform = CGAffineTransformMakeScale(0.9,0.9);
            primaryShadeView.alpha = 0.5;
        }];
    }];
} 
```

这个方向......从下到上......希望大家能帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:32:13.640

最初将视图分配在导航栏上方的位置。

```
CGRectMake(0, 100, secondaryView.frame.size.width, secondaryView.frame.size.height); 
```

这里将值 100 更改为足以隐藏您分配的视图的负值。在显示动画期间，使用相同的 CGRectMake 参数，仅更改“y”，给出在屏幕上显示的位置。在 nNext 单击以相同方式隐藏它。

那有意义吗？

这是示例：

在您的按钮操作中：

```
{
    if(!youNewView)
    {
        youNewView = [[UIView alloc] initWithFrame:CGRectMake(self.view.frame.size.width, -220(depends on your view height), 320, 300) ];
      //add additional properties you need to add here
        [self.View addSubview:youNewView];
    }

     [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:newView cache:YES];
     [UIView commitAnimations];

else
{
    [UIView animateWithDuration:.5 animations:^{
        newView.frame = CGRectMake(newView.frame.origin.x, -210, myPicker.frame.size.width, newView.frame.size.height);
    } completion:^(BOOL finished) {
        [newView removeFromSuperview];
    }];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-07T09:19:32.727

```
 [UIView animateWithDuration:0.5 animations:^{
    self.view.frame = CGRectMake(self.view.frame.origin.x,
                                              self.view.frame.size.height,
                                              self.view.frame.size.width,
                                              self.view.frame.size.height);
    [self.view layoutIfNeeded];
}]; 
```

请试试这个，它对我有用。

# java - 递归方法的大 O 复杂度

> ID：13174107
> 
> 赞同：1
> 
> 时间：2012-11-01T09:23:09.067
> 
> 标签：java, recursion, complexity-theory

这是递归完成的一堆数字的java排列，我需要找出它的大O复杂度是什么。由于嵌套循环，假设它是 O(N^2)，但一位朋友评论说递归方法的工作方式不同。任何帮助表示赞赏

```
public void permuteRec(ArrayList<Integer> list1, ArrayList<Integer> list2)
{
    if (list1.isEmpty())
    {
        if (computeDistance(list2) < distance)
        {
            path = list2;
            recomputeDistance();
        }
    }
}
else
{
    for (int i = 0; i < list1.size(); i++)
    {
       ArrayList<Integer> tmp2 = new ArrayList<Integer>();
       for(int k = 0; k < list2.size(); k++)
       tmp2.add(list2.get(k));
       tmp2.add(list1.get(i));
       ArrayList<Integer> tmp1 = new ArrayList<Integer>();
       for(int k = 0; k < list1.size(); k++)
       {
           tmp1.add(list1.get(k));
           tmp1.remove(i);
           permuteRec(tmp1, tmp2);
       }
    }
} 
```

# django-orm - Dotcloud：运行manage.py后台服务

> ID：13174111
> 
> 赞同：2
> 
> 时间：2012-11-01T09:23:21.787
> 
> 标签：django-orm, dotcloud

我有一个 Django 应用程序，它需要访问受 API 密钥速率限制的 Web API。为了管理对 API 的请求，我创建了一个简单的后台服务器，它轮询我的 Django ORM 以获取排队的任务请求，并相对于我的应用服务器异步执行它们（应用服务器不需要阻塞结果）。工作服务器使用自定义的 manage.py 命令启动。这些外部查找的处理要求非常低，所以我想直接从我的主 Web 服务运行它们。我已经用一个临时的互斥锁来操纵它，这样当我的应用程序扩展时，这些工作服务器中只有一个会运行。

我试图找出在部署应用程序时自动启动此工作服务器的最佳方法。我尝试将它作为命令添加到我的 supervisord.conf 文件中，但失败并出现错误`ImportError: No module named django.core.management`。我认为这是因为 supervisord 没有在安装 Django 的虚拟环境中运行。因此，我尝试从`postinstall`钩子中运行一个单独的 supervisord 副本。这导致我的部署失败，因为`postinstall`在终止之前等待所有命令完成，并且它正在超时。

有没有办法修复这些方法中的任何一种，或者另一种可能有效的方法？在我看来，即使我确实创建了一个单独的`python-worker`服务，我也会遇到类似的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:30:09.150

将其放入`supervisord.conf`. 您为什么会收到关于找不到 Django 的错误也是正确的。幸运的是，这是一个简单的修复。

您只需要确保`manage.py`使用正确的 python 二进制文件（virtualenv 内部的那个）调用您的 django，它应该适合您。

这是一个使用完全限定路径的示例，以确保我们使用的是正确的文件。除非您的应用程序也被调用`myapp`，否则您的 manage.py 路径很可能会有所不同，并且您需要将 更改为`my_awesome_command`自定义命令的名称。

```
[program:custom_command]
directory = /home/dotcloud/current/
command = /home/dotcloud/env/bin/python /home/dotcloud/current/myapp/manage.py my_awesome_command
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log 
```

# python - 正则表达式匹配开始子句与结束

> ID：13174127
> 
> 赞同：1
> 
> 时间：2012-11-01T09:24:22.130
> 
> 标签：python, regex

我希望能够使用 python 正则表达式捕获 HTML 属性的值。目前我使用

```
re.compile( r'=(["\'].*?["\'])', re.IGNORECASE | re.DOTALL ) 
```

我的问题是我希望正则表达式“记住”属性是以单引号还是双引号开头。

我在当前方法中发现了具有以下属性的错误

```
href="javascript:foo('bar')" 
```

我的正则表达式捕获

```
"javascript:foo(' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:25:27.947

您可以捕获第一个报价，然后使用反向引用：

```
r'=((["\']).*?\2)' 
```

但是，正则表达式[不是解析 HTML 的正确方法](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。您应该考虑改用 DOM 解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:59:55.900

以下在理论上会更有效：

```
regex = r'"[^"]*"|\'[^']*\'' 
```

作为参考，这里是 Jeffrey Friedl 的html 标签[表达式](http://regex.info/dlisting.cgi?ed=3&id=36481)（来自 owl book）：

```
<              # Opening "<"
  (            #    Any amount of . . . 
     "[^"]*"   #      double-quoted string,
     |         #      or . . . 
     '[^']*'   #      single-quoted string,
     |         #      or . . . 
     [^'">]    #      "other stuff"
  )*           #
>              # Closing ">" 
```

# sql - 使用子查询求和函数

> ID：13174129
> 
> 赞同：0
> 
> 时间：2012-11-01T09:24:24.010
> 
> 标签：sql, sql-server, tsql

我有三张桌子：

**顾客**

```
customer_id   first_name
1              kapil
2              rajesh 
```

**帐户**

```
Customer_id     Account_id
1                   S1
2                   s2 
```

**收据**

```
Recipt_id   customer_id   Account_id   Transaction_type   Amount
R1            1              s1         Deposit           40000
R2            2              s2         Deposit             300
R3            1              s1         withdrawal         2000 
```

现在我将查询如下

```
select   
    c.customer_id,c.first_name,s.current_balance,s.account_id,
    (select sum(amount) 
    from receipt as r ,
        saving_account as s 
    where r.transaction_type='deposit'
        and r.account_no = s.account_id
    ) as debit,
    (select sum(amount) 
    from receipt as r ,
        saving_account as s
    where r.transaction_type='withdrawl'
        and r.account_no = s.account_id  
    )as credit 
from customer as c 
left outer join saving_account as s 
inner join receipt as r on r.customer_id = s.customer_id 
on s.customer_id = c.customer_id 
group by c.customer_id 
```

但它给了我整行和信用的单一值，我不明白为什么它会这样显示....

我想要的结果是：

```
customer_id customer_name account_id debit credit balance
1           kapil         s1         40000   2000  200
2           rajesh        s2         300     null  500 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:49:15.397

```
SELECT  customer_ID, first_name, Account_ID,
        Deposit, Withdrawal, 
        (Deposit - Withdrawal) balance
FROM 
(
    SELECT  a.customer_ID, 
            a.first_name,
            b.Account_ID,
            SUM (CASE WHEN c.transaction_type = 'Deposit' THEN c.Amount ELSE 0 END) Deposit,
            SUM (CASE WHEN c.transaction_type = 'withdrawal' THEN c.Amount ELSE 0 END) Withdrawal
    FROM    customer a
            INNER JOIN Account b
                ON a.customer_ID = b.customer_ID
            LEFT JOIN Receipt c
                ON b.customer_ID = c.customer_ID AND
                    b.account_ID = c.Account_ID
    GROUP BY a.customer_ID, a.first_name, b.Account_ID
) bb 
```

*   [**SQLFiddle 演示**](http://www.sqlfiddle.com/#!3/e476f/10)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T09:47:58.720

试试这个：

```
select
  c.customer_id, 
  c.first_name,
  a.account_id,
  sum(case 
        when r.transaction_type='deposit' then r.Amount 
        else 0 
      end) as Debit,
  sum(case 
        when r.transaction_type='withdrawal' then r.Amount 
        else 0 
      end) as Credit,

  sum(case 
        when r.transaction_type='deposit' then r.Amount 
        else 0 
      end)-
  sum(case 
        when r.transaction_type='withdrawal' then r.Amount 
        else 0 
      end) as balance
from customer c
join account a
  on c.customer_id = a.customer_id
join Receipt r
  on a.account_id = r.account_id
group by 
  c.customer_id, 
  c.first_name,
  a.account_id 
```

**您也可以[在线测试它](http://www.sqlfiddle.com/#!3/e476f/9)。**

**注意：**我不知道如何确定`Balace`，所以我只是通过 计算它`Debit - Credit`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:48:34.573

推断 save_account 表上的 current_balance 列：

```
Select
  c.customer_id,
  c.customer_name,
  s.account_id,
  sum(case when r.transaction_type = 'Deposit' Then r.Amount Else 0 End) As debit,
  sum(case when r.transaction_type = 'Withdrawal' Then r.Amount Else 0 End) as credit,
  s.current_balance
From
  customer c
    left outer join
  saving_account s
    on c.customer_id = s.customer_id
    left outer join
  receipt r
    on s.customer_id = r.customer_id and s.account_id = r.account_id
Group By
  c.customer_id,
  c.customer_name,
  s.account_id,
  s.current_balance 
```

# java - 如何使用 termVectorComponent 在 solr 中创建标签云

> ID：13174136
> 
> 赞同：0
> 
> 时间：2012-11-01T09:24:32.253
> 
> 标签：java, solr, solrj

我正在尝试使用 solr v2.2 创建标签云。我已经阅读了足够多的内容，但我在网上找不到任何新手示例。我想做的是；

我有一个领域；

```
<field name="content" stored="true" indexed="true" multiValued="true" termVectors="true"/> 
```

我正在尝试获取单词的 tf 和 idf 值。

我到目前为止所做的是；

当我输入以下查询时

localhost/solr/tvrh/?q=queryString&version=2.2&indent=on&tv.tf_idf=true

我根据以下文件获得结果；

```
<lst name="doc-40797">
<str name="uniqueKey">test20508</str>
<lst name="content">
<lst name="98">
<double name="tf-idf">0.002304147465437788</double>
</lst>
<lst name="apaan">
<double name="tf-idf">0.16666666666666666</double>
</lst>
<lst name="aryadea">
<    double name="tf-idf">1.0</double>
</lst>
<lst name="chelsea">
<double name="tf-idf">0.005208333333333333</double>
</lst>
<lst name="gua">
<double name="tf-idf">0.05555555555555555</double>
</lst>
<lst name="osa">
<double name="tf-idf">0.004662004662004662</double>
</lst>
<lst name="pegangı">
<double name="tf-idf">0.5</double>
</lst>
<lst name="rt">
<double name="tf-idf">1.4009526478005044E-4</double>
</lst>
<lst name="vs">
<double name="tf-idf">0.0030581039755351682</double>
</lst>
</lst>
</lst>
<str name="uniqueKeyFieldName">id</str>
<lst name="doc-40746">
<str name="uniqueKey">test20457</str>
<lst name="content">
<lst name="075">
<double name="tf-idf">0.027777777777777776</double>
</lst>
<lst name="9">
<double name="tf-idf">9.76657876745776E-5</double>
</lst>
<lst name="atlético">
<double name="tf-idf">0.045454545454545456</double>
</lst>
<lst name="co">
<double name="tf-idf">1.1130899376669635E-4</double>
</lst>
<lst name="http">
<double name="tf-idf">1.034233116144379E-4</double>
</lst>
<lst name="jorna">
<double name="tf-idf">0.25</double>
</lst>
<lst name="lh">
<double name="tf-idf">0.07142857142857142</double>
</lst>
<lst name="ngn">
<double name="tf-idf">0.5</double>
</lst>
<lst name="osa">
<double name="tf-idf">0.004662004662004662</double>
</lst>
<lst name="puntuaciones">
<double name="tf-idf">1.0</double>
</lst>
<lst name="t">
<double name="tf-idf">7.038783698176955E-5</double>
</lst>
<lst name="vavelco">
<double name="tf-idf">0.2</double>
</lst>
<lst name="vía">
<double name="tf-idf">0.03125</double>
</lst>
</lst>
</lst>
<str name="uniqueKeyFieldName">id</str> 
```

我怎样才能得到总的结果，而不是基于文件？或者有没有更好的方法通过 termVectorComponent 查询在 solr 中分别获取 tf 和 idf 值？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:19:07.700

为了获得所有文件；

```
NamedList<Object> solrResponse = server.request(new QueryRequest(queryString));
NamedList<Object> namedList = (NamedList<Object>) solrResponse.get("termVectors");
for (int i = 0; i < namedList.size(); i +=2) {
                    Object val = namedList.getVal(i);
                    System.out.println(val.toString());//I chose to print them.
} 
```

# python - Django TemplateDoesNotExist 在 /home/

> ID：13174137
> 
> 赞同：1
> 
> 时间：2012-11-01T09:24:38.837
> 
> 标签：python, django

虚拟项目的目录结构

```
/dummy

   /dummy

            urls.py
            views.py
            setting.py
            _init_
            wsgi.py
    /template
            home.html 
```

**设置.py**

```
TEMPLATE_DIRS = (
    "D:/Data/Codes/Django_Code/dummy/template"
    ) 
```

**视图.py**

```
from  django.shortcuts import render_to_response

from  django.template import RequestContext

def home_view(request):
    render_to_response(request, 'home.html') 
```

**网址.py**

```
from django.conf.urls import patterns, include, url

from dummy.views import home_view

urlpatterns = patterns('',
    url(r'^home/$', home_view),
    ) 
```

对 TemplateDoesNotExist 摸不着头脑虽然在 TEMPLATE_DIRS 下的 setting.py 中指定了模板目录

错误跟踪模板加载程序事后

```
Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
D:\Data\Codes\Django_Code\dummy\template\<WSGIRequest
path:\home\,
GET:<QueryDict: {}>,
POST:<QueryDict: {}>,
COOKIES:{'csrftoken': 'CNnHomGRMMJmik75Pi2rclMVdPjO36t9'},
META:{'ALLUSERSPROFILE': 'C:\ProgramData',
 'APPDATA': 'C:\Users\nitin\AppData\Roaming',
 'CLASSPATH': '.;D:\data\Codes;C:\Users\nitin\Downloads\javapostmark\apache-mime4j-0.6.jar;C:\Users\nitin\Downloads\javapostmark\commons-codec-1.3.jar;C:\Users\nitin\Downloads\javapostmark\commons-logging-1.1.1.jar;C:\Users\nitin\Downloads\javapostmark\gson-1.4.jar;C:\Users\nitin\Downloads\javapostmark\httpclient-4.0.1.jar;C:\Users\nitin\Downloads\javapostmark\httpcore-4.0.1.jar;C:\Users\nitin\Downloads\javapostmark\httpmime-4.0.1.jar;C:\Users\nitin\Downloads\javapostmark\joda-time-1.6.jar;',
 'COMMONPROGRAMFILES': 'C:\Program Files\Common Files',
 'COMMONPROGRAMFILES(X86)': 'C:\Program Files (x86)\Common Files',
 'COMMONPROGRAMW6432': 'C:\Program Files\Common Files',
 'COMPUTERNAME': 'NITIN-PC',
 'COMSPEC': 'C:\Windows\system32\cmd.exe',
 'CONTENT_LENGTH': '',
 'CONTENT_TYPE': 'text\plain',
 'CSRF_COOKIE': 'CNnHomGRMMJmik75Pi2rclMVdPjO36t9',
 'DJANGO_SETTINGS_MODULE': 'dummy.settings',
 'FP_NO_HOST_CHECK': 'NO',
 'GATEWAY_INTERFACE': 'CGI\1.1',
 'HOMEDRIVE': 'C:',
 'HOMEPATH': '\Users\nitin',
 'HTTP_ACCEPT': 'text\html,application\xhtml+xml,application\xml;q=0.9,*\*;q=0.8',
 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
 'HTTP_ACCEPT_ENCODING': 'gzip,deflate,sdch',
 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',
 'HTTP_CACHE_CONTROL': 'max-age=0',
 'HTTP_CONNECTION': 'keep-alive',
 'HTTP_COOKIE': 'csrftoken=CNnHomGRMMJmik75Pi2rclMVdPjO36t9',
 'HTTP_HOST': '127.0.0.1:8000',
 'HTTP_USER_AGENT': 'Mozilla\5.0 (Windows NT 6.1; WOW64) AppleWebKit\537.4 (KHTML, like Gecko) Chrome\22.0.1229.94 Safari\537.4',
 'JAVA_HOME': 'C:\Program Files (x86)\Java\jdk1.7.0_05;',
 'LOCALAPPDATA': 'C:\Users\nitin\AppData\Local',
 'LOGONSERVER': '\NITIN-PC',
 'NUMBER_OF_PROCESSORS': '2',
 'OS': 'Windows_NT',
 'PATH': 'C:\Program Files (x86)\Java\jdk1.7.0_05\bin;C:\Python27;C:\Python27\;C:\Python27\Scripts',
 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC',
 'PATH_INFO': u'\home\',
 'PROCESSOR_ARCHITECTURE': 'AMD64',
 'PROCESSOR_IDENTIFIER': 'Intel64 Family 6 Model 23 Stepping 10, GenuineIntel',
 'PROCESSOR_LEVEL': '6',
 'PROCESSOR_REVISION': '170a',
 'PROGRAMDATA': 'C:\ProgramData',
 'PROGRAMFILES': 'C:\Program Files',
 'PROGRAMFILES(X86)': 'C:\Program Files (x86)',
 'PROGRAMW6432': 'C:\Program Files',
 'PROMPT': '$P$G',
 'PSMODULEPATH': 'C:\Windows\system32\WindowsPowerShell\v1.0\Modules\',
 'PUBLIC': 'C:\Users\Public',
 'QUERY_STRING': '',
 'REMOTE_ADDR': '127.0.0.1',
 'REMOTE_HOST': '',
 'REQUEST_METHOD': 'GET',
 'RUN_MAIN': 'true',
 'SCRIPT_NAME': u'',
 'SERVER_NAME': 'nitin-PC',
 'SERVER_PORT': '8000',
 'SERVER_PROTOCOL': 'HTTP\1.1',
 'SERVER_SOFTWARE': 'WSGIServer\0.1 Python\2.7.3',
 'SESSIONNAME': 'Console',
 'SYSTEMDRIVE': 'C:',
 'SYSTEMROOT': 'C:\Windows',
 'TEMP': 'C:\Users\nitin\AppData\Local\Temp',
 'TMP': 'C:\Users\nitin\AppData\Local\Temp',
 'USERDOMAIN': 'nitin-PC',
 'USERNAME': 'nitin',
 'USERPROFILE': 'C:\Users\nitin',
 'WINDIR': 'C:\Windows',
 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x0000000001D761E0>,
 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x0000000002E5D5E8>,
 'wsgi.input': <socket._fileobject object at 0x000000000327F138>,
 'wsgi.multiprocess': False,
 'wsgi.multithread': True,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)}> (File does not exist)
Using loader django.template.loaders.app_directories.Loader:
C:\Python27\lib\site-packages\django\contrib\auth\templates\<WSGIRequest
path:\home\,
GET:<QueryDict: {}>,
POST:<QueryDict: {}>,
COOKIES:{'csrftoken': 'CNnHomGRMMJmik75Pi2rclMVdPjO36t9'},
META:{'ALLUSERSPROFILE': 'C:\ProgramData',
 'APPDATA': 'C:\Users\nitin\AppData\Roaming',
 'CLASSPATH': '.;D:\data\Codes;C:\Users\nitin\Downloads\javapostmark\apache-mime4j-0.6.jar;C:\Users\nitin\Downloads\javapostmark\commons-codec-1.3.jar;C:\Users\nitin\Downloads\javapostmark\commons-logging-1.1.1.jar;C:\Users\nitin\Downloads\javapostmark\gson-1.4.jar;C:\Users\nitin\Downloads\javapostmark\httpclient-4.0.1.jar;C:\Users\nitin\Downloads\javapostmark\httpcore-4.0.1.jar;C:\Users\nitin\Downloads\javapostmark\httpmime-4.0.1.jar;C:\Users\nitin\Downloads\javapostmark\joda-time-1.6.jar;',
 'COMMONPROGRAMFILES': 'C:\Program Files\Common Files',
 'COMMONPROGRAMFILES(X86)': 'C:\Program Files (x86)\Common Files',
 'COMMONPROGRAMW6432': 'C:\Program Files\Common Files',
 'COMPUTERNAME': 'NITIN-PC',
 'COMSPEC': 'C:\Windows\system32\cmd.exe',
 'CONTENT_LENGTH': '',
 'CONTENT_TYPE': 'text\plain',
 'CSRF_COOKIE': 'CNnHomGRMMJmik75Pi2rclMVdPjO36t9',
 'DJANGO_SETTINGS_MODULE': 'dummy.settings',
 'FP_NO_HOST_CHECK': 'NO',
 'GATEWAY_INTERFACE': 'CGI\1.1',
 'HOMEDRIVE': 'C:',
 'HOMEPATH': '\Users\nitin',
 'HTTP_ACCEPT': 'text\html,application\xhtml+xml,application\xml;q=0.9,*\*;q=0.8',
 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
 'HTTP_ACCEPT_ENCODING': 'gzip,deflate,sdch',
 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',
 'HTTP_CACHE_CONTROL': 'max-age=0',
 'HTTP_CONNECTION': 'keep-alive',
 'HTTP_COOKIE': 'csrftoken=CNnHomGRMMJmik75Pi2rclMVdPjO36t9',
 'HTTP_HOST': '127.0.0.1:8000',
 'HTTP_USER_AGENT': 'Mozilla\5.0 (Windows NT 6.1; WOW64) AppleWebKit\537.4 (KHTML, like Gecko) Chrome\22.0.1229.94 Safari\537.4',
 'JAVA_HOME': 'C:\Program Files (x86)\Java\jdk1.7.0_05;',
 'LOCALAPPDATA': 'C:\Users\nitin\AppData\Local',
 'LOGONSERVER': '\NITIN-PC',
 'NUMBER_OF_PROCESSORS': '2',
 'OS': 'Windows_NT',
 'PATH': 'C:\Program Files (x86)\Java\jdk1.7.0_05\bin;C:\Python27;C:\Python27\;C:\Python27\Scripts',
 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC',
 'PATH_INFO': u'\home\',
 'PROCESSOR_ARCHITECTURE': 'AMD64',
 'PROCESSOR_IDENTIFIER': 'Intel64 Family 6 Model 23 Stepping 10, GenuineIntel',
 'PROCESSOR_LEVEL': '6',
 'PROCESSOR_REVISION': '170a',
 'PROGRAMDATA': 'C:\ProgramData',
 'PROGRAMFILES': 'C:\Program Files',
 'PROGRAMFILES(X86)': 'C:\Program Files (x86)',
 'PROGRAMW6432': 'C:\Program Files',
 'PROMPT': '$P$G',
 'PSMODULEPATH': 'C:\Windows\system32\WindowsPowerShell\v1.0\Modules\',
 'PUBLIC': 'C:\Users\Public',
 'QUERY_STRING': '',
 'REMOTE_ADDR': '127.0.0.1',
 'REMOTE_HOST': '',
 'REQUEST_METHOD': 'GET',
 'RUN_MAIN': 'true',
 'SCRIPT_NAME': u'',
 'SERVER_NAME': 'nitin-PC',
 'SERVER_PORT': '8000',
 'SERVER_PROTOCOL': 'HTTP\1.1',
 'SERVER_SOFTWARE': 'WSGIServer\0.1 Python\2.7.3',
 'SESSIONNAME': 'Console',
 'SYSTEMDRIVE': 'C:',
 'SYSTEMROOT': 'C:\Windows',
 'TEMP': 'C:\Users\nitin\AppData\Local\Temp',
 'TMP': 'C:\Users\nitin\AppData\Local\Temp',
 'USERDOMAIN': 'nitin-PC',
 'USERNAME': 'nitin',
 'USERPROFILE': 'C:\Users\nitin',
 'WINDIR': 'C:\Windows',
 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x0000000001D761E0>,
 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x0000000002E5D5E8>,
 'wsgi.input': <socket._fileobject object at 0x000000000327F138>,
 'wsgi.multiprocess': False,
 'wsgi.multithread': True,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)}> (File does not exist) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:41:53.337

1.  **[永远不要硬编码绝对路径](http://blog.yourlabs.org/post/27477234167/never-hardcode-absolute-paths)**。
2.  你`TEMPLATE_DIRS`不是可迭代的，目录应该在`[]`
3.  如果出现问题，只需运行`manage.py shell`and `from django.conf import settings; print settings.TEMPLATE_DIRS[0]`，这将显示 django 使用的路径。
4.  查看 django 是否应该在其中找到您的模板的另一种方法`manage.py shell`是`from django.template import loader; print loader.get_template('home.html')`. Django 应该告诉你它在失败时尝试了哪​​些模板目录。这很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-31T13:11:44.057

只需将模板路径复制并粘贴到`setting.py`. 它将解决这个问题。

```
'DIRS': ['/Users/abc/dort/dort/templates'], 
```

请享用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-22T10:32:29.283

在出现错误的浏览器上，搜索“django.template.loaders.filesystem.Loader”

那里提到了 django 查找模板的路径。

例子：

`django.template.loaders.filesystem.Loader: /code/templates/home.html (Source does not exist)`

尝试在上面的相同路径中添加您的模板。

为避免混淆，请将您的模板文件夹添加到与 project_name 相同的目录中，并`os.path.join(BASE_DIR, 'templates')`在 settings.py 的 DIRS 前面添加 [方括号]

如果您的 django 站点托管在 docker 上，您需要查看模板文件夹的确切路径并需要在 settings.py 中提及

# django - 扩展 django 管理模型

> ID：13174140
> 
> 赞同：0
> 
> 时间：2012-11-01T09:24:54.043
> 
> 标签：django, django-admin

django 管理页面上模型的默认视图显示该视图中的项目列表，但仅提供一个字段。如何在列表中显示多个字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:39:57.193

我找到了完全完成这项工作的函数 list_display()：

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)

# python - 刷新 matplotlib 中的所有当前图形

> ID：13174149
> 
> 赞同：7
> 
> 时间：2012-11-01T09:25:43.877
> 
> 标签：python, matplotlib

说我做了

```
figure(1)
plot(...)
figure(2)
plot(...) 
```

我想创建第三个图形并只显示那个。以便：

```
figure(1)
plot(...)
figure(2)
plot(...)
somemagicFuncToFlushFigures()
figure(3)
plot(...)
show() 
```

只会显示第三个数字。我怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T10:02:15.363

你想关闭数字吗？我想知道以下是否有帮助？

```
import matplotlib.pyplot as plt
plt.close() 
```

**更新**：正如@jorgeca 所说，要关闭所有数字，请尝试使用`plt.close('all')`

# macos - 如何在 mac os 中设置 NMBCLUSTERS 的值？

> ID：13174153
> 
> 赞同：0
> 
> 时间：2012-11-01T09:26:00.683
> 
> 标签：macos, kernel

我正在为 MAC OS 开发一个服务器应用程序，它应该能够同时处理数千个请求。

我看到最初只有大约 2.3 MB 的空间分配给网络，随着服务器接收到更多请求，分配的内存不断增加，直到达到大约 65 MB。

在 65 MB 时，它显示 100% 的使用率。
数千个“内存延迟”请求，
并且客户端连接开始失败。

我检查了**kern.ipc.NMBCLUSTERS=32768**的值，它大约有 72 MB 的内存。
因此，我想使用 sysctl 命令为此设置新值，但它显示*“sysctl：oid 'kern.ipc.nmbclusters' 是只读的”*

Google 建议在 freebsd 系统的 /boot/loader.conf 中添加 kern.ipc.NMBCLUSTERS=65536 但在 mac os 上没有这样的目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:54:06.517

[我在http://osdir.com/ml/general/2012-04/msg52432.html](http://osdir.com/ml/general/2012-04/msg52432.html)找到了答案 解决方案是运行命令

```
sudo nvram boot-args="ncl=131072" 
```

并重新启动机器。重新启动后，sysctl kern.ipc.nmbclusters 将设置为新值 131072。

现在回到测试我的应用程序性能:-)

（不知道如何清除此引导参数以重置值）

# javascript - 我可以在 MVC3 中创建在 bodyrender 之前和 bodyrender 之后运行的 javascript 函数吗？

> ID：13174154
> 
> 赞同：0
> 
> 时间：2012-11-01T09:26:03.643
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有 @RenderBody() 方法来渲染布局页面，我想知道它何时开始以及何时通过 javascript 完成下载。我该怎么做，因为我希望我的网页在下载内容时有一个覆盖。我可以在 ajax 中做，但我不知道如何在 MVC @RenderBody() 中做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:06:32.347

Ususally some screen is necessary when you show page and download some specific data by ajax request.

When you render content in layout with `RenderBody()` it renders full page (layout and content) on server return it to `Response.OutputStream` as whole unit.

So you don't need to screen anything.

# android - 为 android Google 地图地点提供自动建议

> ID：13174159
> 
> 赞同：0
> 
> 时间：2012-11-01T09:26:13.690
> 
> 标签：android, google-maps, search, google-places

我对 android Google 地图非常陌生一个地方请帮助我如何实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:38:01.550

此代码在我的应用程序中运行：

主要活动 ：-

```
mAtv_DestinationLocaiton = (AutoCompleteTextView) findViewById(R.id.et_govia_destination_location);

mAtv_DestinationLocaiton.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                Log.i("Count", "" + count);
                if (!mAtv_DestinationLocaiton.isPerformingCompletion()) {
                    autocompletePlaceList.clear();
                    DestiClick2 = false;
                    new loadDestinationDropList().execute(s.toString());
                }
            }
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub
            }
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
            }
        });
    }

    private class loadDestinationDropList extends
            AsyncTask<String, Void, ArrayList<String>> {
        @Override
        protected void onPreExecute() {
            // Showing progress dialog before sending http request
            destinationProgBar.setVisibility(View.VISIBLE);
        }

        protected ArrayList<String> doInBackground(String... unused) {

            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            autocompletePlaceList = httpHelper
                    .getAutocompletePlaces(mAtv_DestinationLocaiton.getText()
                            .toString());

            return autocompletePlaceList;
        } 
```

HttpHelper 类：-

```
public class HttpHelper {
    HttpManager httpCall;
    private static final String TAG = "GooglePlacesApi";
    private Context mContext;

    public HttpHelper(Context context) {

        mContext = context;
        httpCall = new HttpManager();
    }

        public ArrayList<String> getAutocompletePlaces(String placeName) {
        String response2 = "";
        ArrayList<String> autocompletPlaceList = new ArrayList<String>();
        String url = Constants.GOOGLE_PLACE_AUTOCOMPLETE_URL + "input="
                + placeName + "&sensor=false&key="
                + Constants.GOOGLE_PLACE_API_KEY;
        Log.e("MyAutocompleteURL", "" + url);

        try {
            response2 = httpCall.connectToGoogleServer(url);
            JSONObject jsonObj = (JSONObject) new JSONTokener(response2.trim()
                    .toString()).nextValue();
            JSONArray results = (JSONArray) jsonObj.getJSONArray("predictions");

            for (int i = 0; i < results.length(); i++) {
                Log.e("RESULTS",
                        "" + results.getJSONObject(i).getString("description"));
                autocompletPlaceList.add(results.getJSONObject(i).getString(
                        "description"));
            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return autocompletPlaceList;
    }
    } 
```

# windows-8 - 如何在 WinRT C# 中实现“AES/CFB/NoPadding”加密/解密？

> ID：13174165
> 
> 赞同：0
> 
> 时间：2012-11-01T09:26:53.403
> 
> 标签：windows-8, encryption-symmetric

我们现在正在将现有代码移植到Windows 8，从服务器下载的数据文件在“AES/CFB/NoPadding”中加密，我们无法更改数据加密模式，因为该数据文件被很多现有客户端使用。

在 WinRT 中，[SymmetricAlgorithmNames][1] 不包含与“AES/CFB/NoPadding”匹配的名称。从 [SymmetricKeyAlgorithmProvider][2] 文档中，NoPadding 算法不包含“CFB”

*   无填充：
*   DES_CBC
*   DES_ECB
*   3DES_CBC
*   3DES_ECB
*   RC2_CBC
*   RC2_ECB
*   AES_CBC
*   AES_ECB

那么我们怎样才能得到一个 [SymmetricKeyAlgorithmProvider][2] 来支持 AES/CFB/NoPadding 呢？Metro App 是否有第三方加密包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:30:44.743

一种选择是使用 BouncyCastle 库，它们确实支持 Aes/Ofb/NoPadding。

另一种选择是使用 c# 框架中的 System.Security.Cryptography.Aes 并使用 PaddingMode.Zeros 进行加密，然后将加密数据截断为与输入数据相同的长度（丢弃加密文本末尾的填充数据）。解密时，将填充（任何垃圾或零）附加到密文以对齐块长度，设置 PaddingMode.None，解密，最后丢弃填充字节（它们将是伪造的）。像这样的东西：

```
 var aes2 = Aes.Create();
        aes2.KeySize = 128;
        aes2.BlockSize = 128;
        aes2.Mode = CipherMode.CFB;
        aes2.Padding = PaddingMode.Zeros;
        var aes2Data = new byte[buff.Length];
        // strip padded data
        Buffer.BlockCopy(aes2.CreateEncryptor().TransformFinalBlock(buff, 0, buff.Length), 0,
            aes2Data, 0, buff.Length);
        Console.WriteLine("Aes2 size: {0}", aes2Data.Length);

        // validate aes2
        var size = aes2Data.Length;
        var pad = aes2Data.Length % 16;
        if (pad != 0)
        {
            var tmp = new byte[aes2Data.Length + 16 - pad];
            Buffer.BlockCopy(aes2Data, 0, tmp, 0, aes2Data.Length);
            aes2Data = tmp;
        }

        var aes2Decr = Aes.Create();
        aes2Decr.Padding = PaddingMode.None;
        aes2Decr.Key = aes2.Key;
        aes2Decr.Mode = aes2.Mode;
        aes2Decr.IV = aes2.IV;
        var data2 = aes2Decr.CreateDecryptor().TransformFinalBlock(aes2Data, 0, aes2Data.Length);
        valid = data2.Take(size).SequenceEqual(buff);
        if (!valid)
            throw new ApplicationException("Invalid data"); 
```

# sql - 对多列使用 select distinct 但所有列都不能不同

> ID：13174168
> 
> 赞同：3
> 
> 时间：2012-11-01T09:26:57.830
> 
> 标签：sql, oracle

我需要表中的所有列，但两列必须不同。我使用了这段代码，但它检查了所有列，但我只需要其中两个是不同的。我怎样才能满足这一点？

```
select distinct a.personalId, a.fileId, a.name, a.surname, a.address from my_table a 
```

如果我使用以下代码，则无法获取其他列：

```
select distinct a.personalId, a.fileId from my_table a 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T09:35:21.253

Postgresql 支持 DISTINCT ON 语法：[http ://www.postgresql.org/docs/current/interactive/sql-select.html](http://www.postgresql.org/docs/current/interactive/sql-select.html)

```
select distinct on (a.personalId, a.fileId) a.personalId, a.fileId, a.name, a.surname, a.address
from my_table a 
```

看到[Oracle 等效于 Postgres 的 DISTINCT ON？](https://stackoverflow.com/questions/10515391/oracle-equivalent-of-postgres-distinct-on)了解如何在 Oracle 中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:31:33.097

如果其他列不同，会发生什么？数据库应该如何选择要显示的值？答案是“它不能”，因为它不能，所以没有语法可以做到这一点（这是一个逻辑错误）。

MySQL 确实有一个扩展，它会随机选择值。

```
select a.personalId, a.fileId, a.name, a.surname, a.address
from my_table a
group by a.personalId, a.fileId 
```

但我不建议依赖这个。你需要重新考虑你正在使用的逻辑。

# php - 用php更新数据库

> ID：13174169
> 
> 赞同：0
> 
> 时间：2012-11-01T09:26:59.047
> 
> 标签：php, mysql

这是我为更新数据而编写的查询。

```
 $sql=makeSQL($myVals,$fieldsu,
        "update users set", 
        "where id='".mysql_real_escape_string($_POST["PID"])."'"); 
```

但我收到一个错误

```
update users set'Amol','Kulkarni','amol@e10.in','amol','9870004268')Error Save [You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''Amol','Kulkarni','amol@e10.in','amol','9870004268')' at line 1] 
```

建议我这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:28:28.043

您必须指定要像这样设置的列

```
update your_table set col1 = 'a', col2 = 'b' where id = 3 
```

您的代码容易受到 SQL 注入的攻击。请先解决这个问题。查看[在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:50:36.280

尝试这个：

```
$sql=makeSQL("update users set colname1=$myVals, cloname2=$fields
        where id='".mysql_real_escape_string($_POST["PID"])."'"); 
```

注意`SET`语句中的子句以及需要设置的值。

# ios - iOS手机差距——推送通知不显示通知服务提示框

> ID：13174172
> 
> 赞同：0
> 
> 时间：2012-11-01T09:27:07.063
> 
> 标签：ios, xcode, cordova

我已尝试通过此处的教程应用 iOS 推送通知 -
[http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/](http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/)

如教程说明所示，我将推送通知文件夹实现到 xcode 插件文件夹，然后将以下代码添加到 AppDelegate.m 类

```
#import "PushNotification.h"
    /* START BLOCK */
#pragma PushNotification delegation

- (void)application:(UIApplication*)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
   [pushHandler didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];
}

- (void)application:(UIApplication*)appdidFailToRegisterForRemoteNotificationsWithError:  
   (NSError*)error{
      PushNotification* pushHandler = [self.viewController getCommandInstance:@"PushNotification"];
      [pushHandler didFailToRegisterForRemoteNotificationsWithError:error];
}

- (void)application:(UIApplication*)application didReceiveRemoteNotification: (NSDictionary*)userInfo
 {
    PushNotification* pushHandler = [self.viewController   getCommandInstance:@"PushNotification"];
NSMutableDictionary* mutableUserInfo = [userInfo mutableCopy];

// Get application state for iOS4.x+ devices, otherwise assume active
UIApplicationState appState = UIApplicationStateActive;
if ([application respondsToSelector:@selector(applicationState)]) {
    appState = application.applicationState;
}

[mutableUserInfo setValue:@"0" forKey:@"applicationLaunchNotification"];
if (appState == UIApplicationStateActive) {
    [mutableUserInfo setValue:@"1" forKey:@"applicationStateActive"];
    [pushHandler didReceiveRemoteNotification:mutableUserInfo];
} else {
    [mutableUserInfo setValue:@"0" forKey:@"applicationStateActive"];
    [mutableUserInfo setValue:[NSNumber numberWithDouble: [[NSDate date] timeIntervalSince1970]] forKey:@"timestamp"];
    [pushHandler.pendingNotifications addObject:mutableUserInfo];
}
}
/* STOP BLOCK */ 
```

并在 javascript 代码下方添加到 index.js

```
// license to apache software .....
var app = {
    myLog: document.getElementById("log"),
    initialize: function() {
    this.bindEvents();
},
// Bind Event Listeners
bindEvents: function() {
document.addEventListener('deviceready', this.onDeviceReady, false);
document.addEventListener('resume', this.onResume, false);
},
onResume: function() {
    app.myLog.value="";
// Clear the badge number - if a new notification is received it will have a number set on it for the badge
app.setBadge(0);
app.getPending(); // Get pending since we were reopened and may have been launched from a push notification
},
onDeviceReady: function() {
    app.register(); // Call to register device immediately every time since unique token can change (per Apple)

// This will cause to fire when app is active already
document.addEventListener('push-notification', function(event) {
                          console.log('RECEIVED NOTIFICATION! Push-notification! ' + event);
                          app.myLog.value+=JSON.stringify(['\nPush notification received!', event]);
                          // Could pop an alert here if app is open and you still wanted to see your alert
                          //navigator.notification.alert("Received notification - fired Push Event " + JSON.stringify(['push-//notification!', event]));
                          });
document.removeEventListener('deviceready', this.deviceready, false);
},
setBadge: function(num) {
var pushNotification = window.plugins.pushNotification;
app.myLog.value+="Clear badge... \n";
pushNotification.setApplicationIconBadgeNumber(num);
},
receiveStatus: function() {
var pushNotification = window.plugins.pushNotification;
pushNotification.getRemoteNotificationStatus(function(status) {
                                             app.myLog.value+=JSON.stringify(['Registration check - getRemoteNotificationStatus', status])+"\n";
                                             }); 
},
getPending: function() {
var pushNotification = window.plugins.pushNotification;
pushNotification.getPendingNotifications(function(notifications) {
                                         app.myLog.value+=JSON.stringify(['getPendingNotifications', notifications])+"\n";
                                         console.log(JSON.stringify(['getPendingNotifications', notifications]));
                                         });
},
register: function() {
var pushNotification = window.plugins.pushNotification;
pushNotification.registerDevice({alert:true, badge:true, sound:true}, function(status) {
                                app.myLog.value+=JSON.stringify(['registerDevice status: ', status])+"\n";
                                app.storeToken(status.deviceToken);
                                });
},
storeToken: function(token) {
console.log("Token is " + token);
var xmlhttp=new XMLHttpRequest();
xmlhttp.open("POST","http://127.0.0.1:8888",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("token="+token+"&message=pushnotificationtester");
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4) {
        //a response now exists in the responseTest property.
        console.log("Registration response: " + xmlhttp.responseText);
        app.myLog.value+="Registration server returned: " + xmlhttp.responseText;
    }
}
}    
}; 
```

似乎 pushNotification.registerDevice 函数返回空状态。而且我仍然不确定为什么通知真实警报（“应用程序”想向您发送推送通知）未显示在 iOS 设备上。我错过了什么吗？是什么让 registerDeivce 函数返回空值？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T09:47:52.990

如果注册失败意味着检查应用程序 ID 是否已启用并配置生产或开发推送通知。如果没有启用它并检查或重新配置它并检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:44:08.800

您确定不是 app.myLog 为空吗？也许是因为您没有复制 index.html 并且 html 中没有“日志”元素？

# android - 当我从我的网络服务中捕获它时，在可绘制文件夹中的 Android 商店图像中。

> ID：13174173
> 
> 赞同：1
> 
> 时间：2012-11-01T09:27:07.927
> 
> 标签：android, image, web-services

我从我的网络服务中捕获了一张图片，并在我的所有活动中显示了这张图片。但是以这种方式我在所有活动中调用该服务，但现在我想调用一次网络服务并捕获图像并希望将此图像存储在可绘制中，并在所有其他布局中使用此图像。我该怎么办..谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:29:55.457

当您想在 Android 中“保存”某些内容时，您希望将数据保存在客户端。

Android 有不同的保存机制：

*   共享偏好
*   内部/外部文件 I/O
*   数据库

由于您要保存无法使用 sharedPreferences 的图像，因此文件 I/O 可能是可能的，但我会考虑使用 SQLLite 数据库和 BLOB 数据类型，可以在[此处找到示例](https://stackoverflow.com/questions/7331310/how-to-store-image-as-blob-in-sqlite-how-to-retrieve-it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:52:20.097

你应该关注这个链接。

[如何在按钮的单击事件中将图像存储在 sqlite 数据库中？](https://stackoverflow.com/questions/6041202/how-to-store-images-in-sqlite-database-on-click-event-of-button)

因为你必须改变 DownloadFile() 。您必须在该函数中编写图像下载代码并使用更多。

# java - 组合 XML 模式

> ID：13174176
> 
> 赞同：1
> 
> 时间：2012-11-01T09:27:13.293
> 
> 标签：java, xsd, xsd-validation

是否有任何 Java 库允许在可能的情况下组合模式？

我正在创建一个应用程序，用户可以将多个“生成器”链接到用户定义的（可能是 XML）数据集，每个“生成器”都有一个模式（可能是 XSD），然后用户可以输入有效的数据模式，如果 XSD 可以很容易地组合成一个，那就太好了 - 这样整个数据集就会匹配组合的 XSD，匹配每个生成器的模式。

我知道 XSD 可能会发生冲突，但这不是问题，但如果这完全不可能，那么其​​他解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:49:08.123

您确实可以将单独的 XSD “导入”到其他模式。这很简单，在“复合”模式中，您只需要使用“import:schemaLocation”。请参阅我在项目中使用的代码中的以下示例：

```
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://test/interactions/AddToContext"
    xmlns:tns="http://test/interactions/AddToContext" xmlns:basictypes="http://test/interactions/BasicTypes" elementFormDefault="qualified">

    <import schemaLocation="BasicTypes.xsd"
        namespace="http://test/interactions/BasicTypes">
    </import>

    <!-- Request Message -->
    <element name="AddToContextRequest">
        <complexType>
            <sequence>
                <choice>
                    <element name="ServiceIdToAdd" type="string" maxOccurs="unbounded" />
                    <element name="ValueToAdd" type="basictypes:ContextValue" maxOccurs="unbounded" />
                </choice>
            </sequence>
        </complexType>
    </element>

    <!-- Response message -->
    <element name="AddToContextResponse">
        <complexType>
            <sequence>
                <element name="Result" type="string" />
            </sequence>
        </complexType>
    </element>
</schema> 
```

您可以看到我已将“BasicTypes”架构导入此架构......

如果你想使用这个模式作为参考来生成Java代码（类）来操作这些对象，你可以使用“ [xjc](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/jaxb/xjc.html) ”（XML Binding Compiler）...非常有用！

我希望这有帮助！干杯!

* * *

在新的 XSD 中组合基本类型：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://test/interactions/AddToContext"
    xmlns:tns="http://test/interactions/AddToContext" elementFormDefault="qualified">

    <complexType name="ContextValue">
        <sequence>
            <element name="ValueID" type="string" />
            <choice>
                <sequence>
                    <element name="Value" type="string" />
                    <element name="ID" type="string" />
                </sequence>
                <element name="InfoValue" type="string" />
            </choice>
        </sequence> 
    </complexType>

    <!-- Request Message -->
    <element name="AddToContextRequest">
        <complexType>
            <sequence>
                <choice>
                    <element name="ServiceIdToAdd" type="string" maxOccurs="unbounded" />
                    <element name="ValueToAdd" type="tns:ContextValue" maxOccurs="unbounded" />
                </choice>
            </sequence>
        </complexType>
    </element>

    <!-- Response message -->
    <element name="AddToContextResponse">
        <complexType>
            <sequence>
                <element name="Result" type="string" />
            </sequence>
        </complexType>
    </element>
</schema> 
```

# cakephp - CakePHP 多语言网站的 seo。相同的网址，相同的内容，但不同的界面

> ID：13174178
> 
> 赞同：1
> 
> 时间：2012-11-01T09:27:14.160
> 
> 标签：cakephp, seo, multilingual

假设我有一个亚美尼亚语网站（内容（没有与界面相关的词）只有亚美尼亚语），但我希望该界面也可以使用俄语和英语。碰巧对于这些不同的语言，在 Cakephp 中我将具有相同的 url 和相同的（亚美尼亚语）内容，但界面不同。喜欢

example.com/some-url [英文版]

```
 menu -> Home
  content -> some armenian text 
```

example.com/some-url [俄语]

```
 menu -> [Home in russian]
  content - some armenian text 
```

example.com/some-url [亚美尼亚语]

```
 menu -> [Home in armenian]
  content -> some armenian text 
```

所以，我想问一下这对于 seo 是否可以，因为搜索引擎会看到这些相同的 url-s 与界面部分的单词略有不同。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:36:32.137

据我了解，“界面”主要是后台（管理），因此您不必担心搜索引擎。

对我来说，拥有具有多种“界面”语言的仅亚美尼亚语网站没有多大意义，因为用户必须了解亚美尼亚语才能使用它。无论如何，对于真正的多语言网站（即页面的语言取决于某些 HTTP 请求参数），我的建议是违反该约定并为不同的语言使用不同的 URL：不是因为从 SEO 的角度来看这提供了一些已证明的优势，而是因为它极大地加快了可测试性，从而加快了开发时间。

# asp.net-mvc - 存储库模式是否对仅调用远程服务的 ASP.Net WebAPI 项目有效

> ID：13174184
> 
> 赞同：0
> 
> 时间：2012-11-01T09:27:49.207
> 
> 标签：asp.net-mvc, unit-testing, asp.net-web-api, repository-pattern

我正在使用 ASP.Net WebAPI 开发类似于服务外观的东西。目标是在后端系统和移动应用程序之间创建一个 RESTful 中间层。

这些服务操作中的代码不包含任何从数据库访问数据的逻辑。即 EF 框架、Linq to SQL 等。而是通过调用后端系统提供的另一组远程服务来选择和更新数据。

我需要为每个服务操作实施某种单元测试。我在线访问的几乎所有 WebAPI 单元测试教程都包含通过实体框架进行的数据访问，并且存储库类只包装了一个 EF 实体。

因此在我的情况下

1.  如上所述，当服务操作内部没有数据访问逻辑时，进行单元测试是否有意义？
2.  如果是这样，存储库模式是要走的路吗？如果可能，请链接一个示例，该示例针对通过远程服务调用访问数据的 MVC 项目进行测试。

3.  我是否将集成测试与单元测试混淆了？

4.  如果是这样，我应该只进行集成测试而忘记单元测试。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:49:04.377

1.  是的，您仍然需要测试您的层，这就是存储库模式可以帮助您的地方。事实上，您的服务层本身似乎就像一个存储库。但是您的服务将使用它自己的存储库，该存储库将抽象远程服务器。

2.  我不会链接到示例，您可以搜索它，但事情非常简单。不管它是 mvc、mobile 还是其他什么的。存储库充当任何与存储相关的外观，在您的情况下是远程后端。它将包含调用远程服务的代码，但应用程序的其余部分将使用抽象，即存储库接口。

3,4。IMO不管你怎么称呼它们，只要你有相关的测试

您只需定义一个或多个存储库接口，并在您的 API 中使用这些接口。使用 Mocks 或假存储库测试 API。这些是单元测试。

之后，编写将处理远程服务的实际存储库实现。

# javascript - 如何动态使用旧 id 设置 div 的新 id

> ID：13174189
> 
> 赞同：0
> 
> 时间：2012-11-01T09:28:05.473
> 
> 标签：javascript, jquery

我想使用旧 ID 将新 ID 设置为 div？

```
$("#oldId").attr("id","newId"); 
```

它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:31:10.133

简单的JS

```
document.getElementById("PreviousName").id="CurrentName"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:40:21.157

您的代码可以正常工作，尽管从 jQuery 1.6 开始鼓励您使用`prop`over `attr`（请参阅[此处](https://stackoverflow.com/questions/5874652/prop-vs-attr)进行讨论）。

```
$(function() {
    $('#test').prop('id', 'test2');
    $('#test2').fadeOut(3000);
}); 
```

[在这里](http://jsfiddle.net/GNTZa/)提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:45:34.290

看看这个问题。[我可以使用 Javascript 更改 HTML 元素的 ID 吗？](https://stackoverflow.com/questions/3787369/can-i-change-the-id-of-an-html-element-using-javascript)确保在更改后重新执行 jquery 函数。也许您正在处理“缓存”的 javascript 对象，而不是 DOM 对象。

# three.js - 如何使对象忽略 THREE.JS 中的灯光

> ID：13174190
> 
> 赞同：3
> 
> 时间：2012-11-01T09:28:07.777
> 
> 标签：three.js

如果您考虑我的场景的快照：

![场景截图](../Images/db4d26286ef6518590449fcc1cc41ebd.png)

如您所见，我有一个平面作为表面，由`THREE.SpotLight`Y 轴上方的 a 照亮。

我想要实现的是，在黑暗区域有一个更远的平面，它会有一个纹理映射到它，就像一个星空或星系或其他任何东西。

我可以只为那个平面添加另一个灯，但我想知道我是否可以添加一个平面并设置一些属性，使其始终完全点亮，就好像灯光没有影响一样，这甚至可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T10:17:56.910

您可以使用`MeshBasicMaterial`不受灯光影响的。

# jquery - Jquery UI Slider滑动时隐藏

> ID：13174194
> 
> 赞同：2
> 
> 时间：2012-11-01T09:28:28.107
> 
> 标签：jquery, user-interface, slider

在这样给出的 HTML 代码中

```
<div id="slider1" class="slide1" style="overflow: visible !important; position: absolute !important; margin-top: 0px !important;"></div> 
```

滑块.js

```
$("#slider1").slider({
    min: 0,
    max: 100,
    step: 10,
    value: 50,
    slide: function (event, ui) {
        $('#high').html(ui.value);
    },
    change: function (event, ui) {
        $('#high').attr('value', ui.value);
    }
}); 
```

幻灯片.css

```
.slide1 {
    float: left;
    left: 600px;
    height: 10px;
    width: 150px;
    top: 167px;
    z-index: 2;
} 
```

但我什至没有得到这个滑块，只是在 Slider init 调用之前得到。当我们使用 jquery 调用 silder 时，由于自动创建 div 标签并将其样式设置为`overflow: hidden`. 我怎样才能避免这种情况？

提前致谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:17:21.127

“第一次”是什么意思。

我已将您的 HTML/CSS/JS 放入小提琴中，它似乎可以正常工作：http: [//jsfiddle.net/2pcFh/](http://jsfiddle.net/2pcFh/)

下面的清单放入一个文件中，在 Firefox 13.0.1 中对我来说是本地工作

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

      <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css">

      <script type='text/javascript' src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>

  <style type='text/css'>
    .slide1 {
    float: left;
    left: 600px;
    height: 10px;
    width: 150px;
    top: 167px;
    z - index: 2;
}
  </style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$("#slider1").slider({
    min: 0,
    max: 100,
    step: 10,
    value: 50,
    slide: function(event, ui) {
        $('#high').html(ui.value);
    },
    change: function(event, ui) {
        $('#high').attr('value', ui.value);
    }
});

});//]]>  

</script>

</head>
<body>
      <div id="slider1" class="slide1" style="overflow: visible !important; position: absolute !important; margin-top: 0px !important;"></div>

</body>

</html> 
```

# c++ - 在 C++ builder 5 中设置默认浏览器

> ID：13174195
> 
> 赞同：0
> 
> 时间：2012-11-01T09:28:29.030
> 
> 标签：c++, c++builder, c++builder-5

我使用 C++ builder 5 并在我的程序中获得了一些链接。如果没有默认选项，我希望这些链接在默认系统浏览器或 firefox 中打开。

我用了：

```
ShellExecute(NULL, "open", "http://maps.google.nl/maps?f=q&hl=nl&q=", NULL, NULL, SW_SHOWNORMAL); 
```

但是对于某些链接，它不适用于已经存在的代码。

```
// this is not working
     case 4: if(Qry_shipment->RecordCount == 0){return;}
                         webaddress =    "http://maps.google.nl/maps?f=q&hl=nl&q=";

                    //we need the info from clicked shipment-not from overflow
                    if(Qry_shipment->FieldByName("tstohn")->AsString == pAuthorization[7])
                    {
                            webaddress =    webaddress
                                            + Qry_shipment->FieldByName("tslpla")->AsString  + ","
                                            + Qry_shipment->FieldByName("tslzcd")->AsString  + ","
                                            + Qry_shipment->FieldByName("lalaad")->AsString;
                    }
                    else
                    {
                            webaddress =    webaddress
                                            + Qry_shipment->FieldByName("tsupla")->AsString  + ","
                                            + Qry_shipment->FieldByName("tsuzcd")->AsString  + ","
                                            + Qry_shipment->FieldByName("lalos")->AsString;

                    }
                    break; 
```

是否有一段代码，所以我可以为它自己的程序定义默认浏览器，这样我就不必编辑所有链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:19:40.643

由于您使用的是 C++ Builder 5，我假设主机操作系统是 Windows。因此，无需关心多平台问题。

Windows 有一个“开始”命令。根据参数，它将启动关联的可执行文件。所以你可以试试：

```
system( "start http://maps.google.nl/" ); 
```

只要参数以 开头`http://`，我认为您不会有任何问题。您可能可以将其移至 trick `ShellExecute()`，但不幸的是，我没有 C++ Builder 来检查它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:58:01.627

调用时`ShellExecute()`，将`lpOperation`参数设置为，`NULL`而不是`"open"`。这将执行`http://`协议的**真正**默认操作，因为`"open"`并不总是默认注册动词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:40:26.037

如果我正确理解了您的问题（和附加评论），您当前会遇到问题`ShellExecute`，它会启动 IE 而不是默认浏览器。如果是这样，您可以尝试以下方法。

1.  默认系统浏览器是在系统注册表中注册的路径`HKEY_CLASSES_ROOT\http\shell\open\command`。可能还有其他位置，但您可以从这个位置开始，看看它是否适用于大多数系统。你应该从你的代码中阅读这个条目，你会得到一个确切的命令行来启动默认浏览器。

2.  Windows 支持一种特殊类型的文件 -`*.url`文件（它们只是文本文件）。它们可用于通过默认浏览器打开特定的 url。您可以生成`*.url`具有以下内容的临时文件：

> [互联网快捷方式]
> 
> URL=http://www.domain.com/path?query

拥有这样一个文件，您可以`ShellExecute`像往常一样执行它。

# c# - Dropdownlists selectedIndexchanged 事件不会被触发

> ID：13174196
> 
> 赞同：1
> 
> 时间：2012-11-01T09:28:31.383
> 
> 标签：c#, asp.net, postback

我的页面在 updatepanel 和一个按钮的页面上包含四个下拉列表。我将数据绑定到 Page_Load 事件的所有下拉列表，当我从任何一个下拉列表中选择项目时，它们各自的 selectedindexchanged 事件根本不会被触发。我已经设置所有下拉列表的 Autopostback 属性为 true。这使得 page_load 事件可以调用，但不会触发 selectedindexchanged 事件。下面是我的标记；

```
<asp:UpdatePanel ID="UpdatePanelDialysisMachine" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
              <table id="tableDialysisMachine" runat="server" clientidmode="Static" style="width: 98%;
                display: table; margin-left: 10px; margin-right: 5px" border="0" cellpadding="2"
                cellspacing="2" class="table">
                <tr>
                    <th style="height: 10px; width: 100%">
                    </th>
                </tr>
                <tr>
                    <td style="height: 10px; width: 100%;" align="center">
                         <asp:Label ID="LabelDialysisSession" runat="server" Text="Dialysis Session" CssClass="sectionHeader"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <th style="height: 10px; width: 100%">
                    </th>
                </tr>
                <tr>
                    <td style="width: 100%" align="center"><asp:Label ID="LabelMachineMessage" runat="server" Visible="false" ClientIDMode="Static"></asp:Label>
                    </td>
                </tr>                    
                <tr>
                    <td>
                    <fieldset>
                        <legend>
                           <asp:Label ID="LabelSelectMachines" runat="server" Text="Dialysis Machine"></asp:Label>
                        </legend>

                   <%-- </td>
                </tr>
                <tr>
                    <th style="height: 10px">
                    </th>
                </tr>

                <tr>
                    <td>--%>
                        <table style="width: 100%;"  border="0" cellpadding="2" cellspacing="2">
                           <tr>
                                <th colspan="2" style="height: 10px">
                                </th>
                            </tr>
                            <tr>
                                <td class="textRightAlign" style="width: 50%">
                                    <asp:Label ID="LabelMachine" runat="server" Text="Select Machine"></asp:Label>
                                </td>
                                <td class="textLeftAlign" style="width: 50%">
                                    &nbsp;&nbsp;<asp:DropDownList ID="DropdownMachinesList" runat="server" 
                                        CssClass="dropDown" EnableViewState="true" 
                                        onselectedindexchanged="DropdownMachinesList_SelectedIndexChanged" 
                                        AutoPostBack="True" >
                                    </asp:DropDownList>
                                </td>
                            </tr>
                             <tr>
                                <th style="height: 10px" colspan="2">
                                </th>
                            </tr>
                        </table>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                <td>
                <fieldset>
                <legend>
                <asp:Label ID="LabelAssignStaff" runat="server" Text="Assign Staff"></asp:Label>
                </legend>
                <table style="width: 100%;"  border="0" cellpadding="2" cellspacing="2">
                           <tr>
                                <th colspan="2" style="height: 10px">
                                </th>
                            </tr>
                              <tr>
                <td class="textRightAlign">
                    <asp:Label ID="LabelPrimaryDoctor" runat="server" Text="Primary Doctor" EnableViewState="true" ></asp:Label>
                </td>
                <td class="textLeftAlign">
                    <asp:DropDownList ID="DropDownListPrimaryDoctor" runat="server" 
                        ClientIDMode="Static" CssClass="dropDown" EnableViewState="true" 
                        AutoPostBack="True">

                    </asp:DropDownList>
                </td>
                <td class="textRightAlign">
                    <asp:Label ID="LabelSecondaryDoctor" runat="server" Text="Secondary Doctor"></asp:Label>
                </td>
                <td class="textLeftAlign">
                    <asp:DropDownList ID="DropDownListSecondaryDoctor" runat="server" ClientIDMode="Static" CssClass="dropDown" EnableViewState="true">

                    </asp:DropDownList>
                </td>
           </tr>
            <tr>
                <td class="textRightAlign">
                    <asp:Label ID="LabelPrimaryNurse" runat="server" Text="Primary Nurse"  ></asp:Label>
                </td>
                <td class="textLeftAlign" width="20px">
                    <asp:DropDownList ID="DropDownListPrimaryNurse" runat="server" ClientIDMode="Static" CssClass="dropDown" EnableViewState="true">

                    </asp:DropDownList>
                </td>
                <td class="textRightAlign">
                    <asp:Label ID="LabelSecondaryNurse" runat="server" Text="Secondary Nurse" meta:resourcekey="LabelSecondaryNurseResource1"></asp:Label>
                </td>
                <td class="textLeftAlign" width="20px">
                    <asp:DropDownList ID="DropDownListSecondaryNurse" runat="server" ClientIDMode="Static" CssClass="dropDown" EnableViewState="true">

                    </asp:DropDownList>
                </td>
            </tr>
                             <tr>
                                <th style="height: 10px" colspan="2">
                                </th>
                            </tr>

                        </table>
                </fieldset>
                </td>
                </tr>
                <tr>
                            <td style="width:100%" align="center">
                                <asp:Button ID="buttonCreateSession" runat="server" CssClass="buttonExpanded" 
                                    Text="Create Session" ClientIDMode="Static" CausesValidation="false" 
                                    onclick="buttonCreateSession_Click" /></td>
                            </tr>
                             <tr>
                                <th style="height: 10px">
                                </th>
                            </tr>
            </table>
        </ContentTemplate>

    </asp:UpdatePanel> 
```

这是后面的代码；

```
 protected void Page_Load(object sender, EventArgs e)
{

    if (Page.IsPostBack == false)
    {          
        GetDoctors();
        GetNurse();
        GetMachines();
    }        

} 

 private void GetMachines()
{
    DataTable machines = null;
    try
    {
        machines = m_DialysisSessionManager.GetInactiveMachines();
        if (machines != null)
        {
            //ListItem l8 = new ListItem();
            //l8.Text = "-Select-";
            //l8.Value = "-1";
            //l8.Selected = true;
            //DropDownListmachine.Items.Add(l8);
            DropdownMachinesList.DataSource = machines;
            DropdownMachinesList.DataTextField = "SerialNumber";
            DropdownMachinesList.DataValueField = "id";
            DropdownMachinesList.DataBind();
            DropdownMachinesList.Items.Insert(0, new ListItem("-Select-"));

        }
    }
    catch (Exception ex)
    {
        LoggingHelper.WriteError(ex);
    }
}

/// <summary>
/// Gets doctors list
/// </summary>
private void GetDoctors()
{
    DataTable doctors = null;
    try
    {
        doctors = m_DialysisSessionManager.GetDoctorsList();
        if (doctors != null)
        {

            DropDownListPrimaryDoctor.DataSource = doctors;
            DropDownListPrimaryDoctor.DataTextField = "Name";
            DropDownListPrimaryDoctor.DataValueField = "UserId";
            DropDownListPrimaryDoctor.DataBind();
            DropDownListPrimaryDoctor.Items.Insert(0, new ListItem("-Select-"));

            DropDownListSecondaryDoctor.DataSource = doctors;
            DropDownListSecondaryDoctor.DataTextField = "Name";
            DropDownListSecondaryDoctor.DataValueField = "UserId";
            DropDownListSecondaryDoctor.DataBind();
            DropDownListSecondaryDoctor.Items.Insert(0, new ListItem("-Select-"));
        }
    }
    catch (Exception ex)
    {
        LoggingHelper.WriteError(ex);
    }
}

/// <summary>
/// Gets Nurse list
/// </summary>
private void GetNurse()
{
    DataTable nurse = null;
    try
    {
        nurse = m_DialysisSessionManager.GetNurseList();
        if (nurse != null)
        {

            DropDownListPrimaryNurse.DataSource = nurse;
            DropDownListPrimaryNurse.DataTextField = "Name";
            DropDownListPrimaryNurse.DataValueField = "UserId";
            DropDownListPrimaryNurse.DataBind();
            DropDownListPrimaryNurse.Items.Insert(0, new ListItem("-Select-"));

            DropDownListSecondaryNurse.DataSource = nurse;
            DropDownListSecondaryNurse.DataTextField = "Name";
            DropDownListSecondaryNurse.DataValueField = "UserId";
            DropDownListSecondaryNurse.DataBind();
            DropDownListSecondaryNurse.Items.Insert(0, new ListItem("-Select-"));
        }
    }
    catch (Exception ex)
    {

    }
}
 protected void DropdownMachinesList_SelectedIndexChanged(Object sender, EventArgs e)
{
    Session["machineId"] = DropdownMachinesList.SelectedItem.Text;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:55:35.240

您始终可以在标记中设置事件处理程序和 AutoPostBack 属性。您已经为 完成了此操作`DropdownMachinesList`，因此您可以为其他人遵循相同的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:39:41.733

尝试在页面 OnInit 事件上添加**事件处理程序：**

```
DropdownMachinesList.SelectedIndexChanged += 
                   new EventHandler(DropdownMachinesList_SelectedIndexChanged); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:47:26.897

尝试将 UpdateMode 更改为 Always。

如果 UpdateMode 属性设置为 Conditional，则需要显式调用 UpdatePanel 控件的 Update 方法。

回发是由使用 UpdatePanel 控件的 Triggers 属性定义为触发器的控件引起的。

# asp.net-mvc - 在 Azure 上找不到“Microsoft.SqlServer.Types”版本 10 或更高版本

> ID：13174197
> 
> 赞同：106
> 
> 时间：2012-11-01T09:28:37.390
> 
> 标签：asp.net-mvc, entity-framework, azure

我正在尝试在 ASP.NET MVC 4 中创建一个 webapi。webapi 使用了 Entity Framework 5 Spatial 类型，我编写了一个非常简单的代码。

```
 public List<Area> GetAllAreas()
    {
        List<Area> aList = db.Areas.ToList();
        return aList;
    } 
```

区域包含 DbGeometry。

当我在本地运行它时它可以工作，但是当我将它发布到天蓝色时它给了我这个错误：

> 空间类型和函数不适用于此提供程序，因为找不到程序集“Microsoft.SqlServer.Types”版本 10 或更高版本。

有谁知道如何解决这个问题？:)

谢谢！

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-11-01T10:23:05.950

我找到了解决方案！只需安装 nuget 包 Microsoft.SqlServer.Types

> PM> Install-Package Microsoft.SqlServer.Types

[链接了解更多信息](http://blogs.msdn.com/b/adonet/archive/2013/12/09/microsoft-sqlserver-types-nuget-package-spatial-on-azure.aspx)

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2016-10-20T23:40:04.670

当可以使用程序集的版本 11 (SQL Server 2012) 时，上面的[答案可以正常工作。](https://stackoverflow.com/a/13175057/1473567)

我对此有疑问，因为我的解决方案对同一程序集的版本 13 (SQL Server 2016) 有其他依赖项。在这种情况下，请注意实体框架（至少 v6.1.3）在其**SqlTypesAssemblyLoader**（此异常的来源）中进行了硬编码，以仅查找程序集的版本 10 和 11。

为了解决这个问题，我发现你可以告诉 Entity Framework 你想使用哪个程序集，如下所示：

```
SqlProviderServices.SqlServerTypesAssemblyName = typeof(SqlGeography).Assembly.FullName; 
```

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2017-06-29T08:27:04.310

出于某种原因，我错过了一个绑定重定向，它为我解决了这个问题。

添加以下内容解决了我的问题

```
 <dependentAssembly>
      <assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" culture="neutral" />
      <bindingRedirect oldVersion="10.0.0.0-11.0.0.0" newVersion="14.0.0.0" />
    </dependentAssembly> 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2017-01-31T13:43:41.437

有两种方法可以解决这个问题：

1.  如果您有服务器访问权限，只需安装“Microsoft System CLR Types for SQL Server 2012”，它来自[https://www.microsoft.com/en-us/download/details.aspx?id=29065](https://www.microsoft.com/en-us/download/details.aspx?id=29065) 或使用直接链接下方的直接链接到 X86： http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkID=239643&clcid=0x409) ?LinkID=239643&clcid=0x409，或直接链接到 X64： http: [//go.microsoft.com/fwlink/ ?LinkID=239644&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=239644&clcid=0x409)
2.  第二种方法是使用 NuGet 包管理器并安装

    安装包 Microsoft.SqlServer.Types

然后按照插件说明如下

> 要将使用空间数据类型的应用程序部署到未安装“SQL Server 的系统 CLR 类型”的计算机，您还需要部署本机程序集 SqlServerSpatial110.dll。此程序集的 x86（32 位）和 x64（64 位）版本都已添加到项目的 SqlServerTypes\x86 和 SqlServerTypes\x64 子目录下。如果未安装 C++ 运行时，还包括本机程序集 msvcr100.dll。
> 
> 您需要添加代码以在运行时加载正确的这些程序集之一（取决于当前架构）。
> 
> ASP.NET 应用程序 对于 ASP.NET 应用程序，将以下代码行添加到 Global.asax.cs 中的 Application_Start 方法：
> 
> ```
> SqlServerTypes.Utilities.LoadNativeAssemblies(Server.MapPath("~/bin")); 
> ```
> 
> 桌面应用程序 对于桌面应用程序，添加以下代码行以在执行任何空间操作之前运行：
> 
> ```
> SqlServerTypes.Utilities.LoadNativeAssemblies(AppDomain.CurrentDomain.BaseDirectory); 
> ```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2018-08-16T14:09:29.410

请在 Web.config 文件中添加“dependentAssembly”

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" culture="neutral" />
            <bindingRedirect oldVersion="0.0.0.0-14.0.0.0" newVersion="14.0.0.0" />
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

这对我有用

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-01-08T19:25:50.360

我也遇到了这个问题，但是已经安装了Microsoft.SqlServer.Types nuget包。

为我解决问题的是解决方案 > 参考 > System.Data.Entity > 属性 > 复制本地，并将其设置为 True。

**注意：** Microsoft.SqlServer.Types 的 Copy Local 已设置为 true，即使问题出在 System.Data.Entity 上，错误消息仍然与 Microsoft.SqlServer.Types 有关。

该解决方案来自[Windows Azure 论坛](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/6f68a726-bddb-4312-ae75-043b775da271)。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-08-26T12:15:46.477

我的解决方案只是将这行代码添加到 Global.asax.cs 中`Application_Start()`：

```
SqlServerTypes.Utilities.LoadNativeAssemblies(Server.MapPath("~/bin")); 
```

祝我的兄弟们好运。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-31T16:25:06.313

在当前帖子的答案中[发表评论](https://stackoverflow.com/questions/13174197/microsoft-sqlserver-types-version-10-or-higher-could-not-be-found-on-azure/53087999#comment80521929_40166192)后，添加这两行（最好是 main 函数）解决了我对控制台应用程序的问题：

```
SqlProviderServices.SqlServerTypesAssemblyName = typeof(SqlGeography).Assembly.FullName;
SqlServerTypes.Utilities.LoadNativeAssemblies(AppDomain.CurrentDomain.BaseDirectory); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-09-12T17:36:17.030

在我的情况下（一个 WebForms 应用程序），我解决了`Application_Start`在`Global.asax`文件中添加以下行的问题。

```
SqlServerTypes.Utilities.LoadNativeAssemblies(Server.MapPath("~/bin"));
System.Data.Entity.SqlServer.SqlProviderServices.SqlServerTypesAssemblyName = "Microsoft.SqlServer.Types, Version=14.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"; 
```

我希望它可以帮助某人。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-20T11:14:01.090

以上解决方案都没有对我有用。

*   安装了 SQL Server 功能包？是的
*   安装了 NuGet 包？是的
*   DLL 存在于 GAC 和项目 bin 中吗？是的

你知道吗，这个错误也可能是由于**服务器上的资源不足**。我重新启动了 SQL Server，它自动得到了解决。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-18T07:11:54.703

在我的情况下，一个糟糕的连接字符串导致了这种情况。验证您的连接字符串是否正确组合。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-08T15:29:30.653

只是有同样的问题。我正在使用`EF6`和调用`SQL`它，它有一个使用空间命令的 SQL 函数。我通过单元测试对此进行了测试，并且效果很好。当我去连接我的`Asp.Net`解决方案时，我收到了错误

> 空间类型和函数不适用于此提供程序，因为找不到程序集“Microsoft.SqlServer.Types”版本 10 或更高版本。

通过添加`NUGET`包“Microsoft.SqlServer.Types”并添加`SqlServerTypes.Utilities.LoadNativeAssemblies(Server.MapPath("~/bin"));`到一切正常`Application_Start method`。`Global.asax.cs`

# javascript - 通过单击单选按钮禁用-启用超链接

> ID：13174201
> 
> 赞同：0
> 
> 时间：2012-11-01T09:28:47.057
> 
> 标签：javascript

**我有一个超链接代码，例如：** 单击此处 **，我​​想根据我的单选按钮单击自定义此链接，例如：**单选按钮值上的是否：' 是 **'，我想启用超链接。在单选按钮值：'否'时，我想禁用超链接。因此，为了在单击单选按钮“否”后禁用超链接，我在 disable-link() 方法中编写了以下内容：** function disable-link() { //document.getElementById('disable-link').disabled =真；document.getElementById('disable-link').href = '#'; 现在，我必须在 enable-link() 方法中编写，以便在单击单选按钮“是”后重新启用超链接

```
function enable-link()
{
    //document.getElementById('disable-link').disabled=false;
        // SOME LINE OF CODE TO RE-ENABLE THE LINK
} 
```

*document.getElementById('disable-link').disabled=true* */* *false;* -：它使禁用，但用户可以点击超链接。所以，我使用了“ *document.getElementById('disable-link').href = '#';* ” -：它使链接也无法点击请建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T10:14:07.633

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>StackoverFlow answer for question</title>
<script type="text/javascript">

    var link,color;

 function disable_link() { 

  document.getElementById('testlink').disabled=true;

  link = document.getElementById('testlink').href;

  document.getElementById('testlink').removeAttribute('href');
  //document.getElementById('testlink').style.color = "grey";

   } 

 function enable_link() { 

  document.getElementById('testlink').setAttribute("href",link);

   } 

</script>
</head>

<body>
<form id="form1" name="form1" method="post" action="">
  <p>
    <label>
      <input type="radio" name="RadioGroup1" value="radio" id="RadioGroup1_0" onchange="disable_link();" />
      Radio</label>
    <br />
    <label>
      <input type="radio" name="RadioGroup1" value="radio" id="RadioGroup1_1" onchange="enable_link();" />
      Radio</label>
    <br />
  </p>
  <a id="testlink" href="http://www.yahoo.com"> test </a>
</form>
</body>
</html> 
```

# netbeans - SoapUI/Netbeans 在执行 SOAP 请求时崩溃

> ID：13174202
> 
> 赞同：0
> 
> 时间：2012-11-01T09:28:49.527
> 
> 标签：netbeans, soapui

这就是发生的事情：

1.  打开网豆
2.  打开 SoapUi 项目的 SOAP 请求
3.  执行操作

...然后 Netbeans 再次失败并崩溃。

Netbeans 过去不会崩溃，所以我不确定出了什么问题。是否有日志或任何可以帮助我追踪问题或至少缩小范围的内容？

附言

我在 Windows 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:50:25.550

重新启动 Windows 并再次工作。

# common-lisp - 无法使用键盘的小键盘输入数字

> ID：13174207
> 
> 赞同：1
> 
> 时间：2012-11-01T09:29:19.097
> 
> 标签：common-lisp, xlib

使用 stumpwm，我无法使用小键盘在评估窗口中输入数字（NumLock 已打开）。通过破解 input.lisp，我发现了以下结果：

#'read-key-and-selection 将为主键盘和小键盘返回不同的值。

```
 1         2         3         4         5         6         7         8          9
primary pad  (10 . 16) (11 . 16) (12 . 16) (13 . 16) (14 . 16) (15 . 16) (16 . 16) (17 . 16) (18 . 16)
numpad       (87 . 16) (88 . 16) (89 . 16) (83 . 16) (84 . 16) (85 . 16) (79 . 16) (80 . 16) (81 . 16) 
```

它会导致 #'process-input 将小键盘输入视为 :error 。

```
(defun read-key-or-selection ()
    (loop for ev = (xlib:process-event *display* :handler #'read-key-or-selection-handle-event :timeout nil) do
        (cond ((stringp ev)
            (return ev))
         ((and (consp ev)
               (eq (first ev) :key-press))
           (return (cdr ev))))))

(defun read-key-or-selection-handle-event (&rest event-slots &key display event-key &allow-other-keys)
    (declare (ignore display))
    (case event-key
        ((or :key-release :key-press)
         (apply 'input-handle-key-press-event event-slots))
        (:selection-notify
         (apply 'input-handle-selection-event event-slots))
        (t nil)))

(defun input-handle-key-press-event (&rest event-slots &key event-key root code state &allow-other-keys)
    (declare (ignore event-slots root))
    (list* event-key code state)) 
```

从上面的代码来看，#'xlib:process-event 似乎存在问题。但我不知道如何解决它？

请大神指点一下，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:13:37.300

找到一种不规范的方式，但它有效。 [https://github.com/sw2wolf/stumpwm/blob/master/input.lisp](https://github.com/sw2wolf/stumpwm/blob/master/input.lisp)。

# sql - SQL反向列值查询

> ID：13174208
> 
> 赞同：2
> 
> 时间：2012-11-01T09:29:25.350
> 
> 标签：sql, tsql

需要一些 Sql 帮助？我的 Sql 还没有完全做到这一点。我有一张桌子

```
ColA    ColB    ColC
A       B       101
B       B       102
C       B       102
B       A       108 
```

我需要能够识别 ColC 中的值，其中在 Col A 和 Col B 中具有相同条目的行（但相反），即 Col B = Col A。但不像第三行，其中 Col B 对应值不匹配或第二行，其中 Col A = Col B。

结果集将是

```
Col A      Col B     Col C
A          B         101
B          A         108 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T09:32:47.930

您可以进行自连接 - 即：将表连接到自身...

```
select t1.* , t1.ColC-t2.ColC
from yourtable t1
    inner join yourtable t2
       on t1.colA = t2.colB
       and t1.colB = t2.colA
where t1.colA <> t1.colB 
```

# android - ListView 不更新

> ID：13174212
> 
> 赞同：0
> 
> 时间：2012-11-01T09:29:43.323
> 
> 标签：android, android-asynctask

我是安卓新手。谁能告诉我我做错了什么。我的 listView 不会更新！我想要一个包含图像的列表视图。我将在这里解释流程，我有一个`ImageList.java`作为我的主类，`LazyLoader.java`它扩展了 BaseAdapter。这里的图像是从存储在我的本地主机上的 xml 文件中检索的。这是什么工作，我使用 10.0.2.2 的本地主机没有问题，我在 LogCat 中获取了我的 xml。在 logcat 中一切正常，但视图没有更新。我想我对 inflate 的思考方式及其工作方式存在一些问题。所以一个很好的起点是看看`LazyLoader.java` 如果代码中的事情不清楚，请告诉我我会添加更多解释。

[我已按照本教程对http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)进行了更改`asynctask`

**ImageList.java** 这是我的 onCreate

```
@Override
protected void onCreate(Bundle savedInstanceState) {
 try{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
new loadSite().execute();
}
catch(Exception exp){
    Log.e("error", "ERROR RAISED HERE "+exp);
    exp.printStackTrace();
     }
} 
```

异步就在这里

```
class loadSite extends AsyncTask<String, String, String>{

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        pDialog = new ProgressDialog(ImageList.this);
            pDialog.setMessage("Loading websites ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... args) {
            try{
                ArrayList<HashMap<String,String>> articlesList = new ArrayList<HashMap<String,String>>();
                XMLParser parser = new XMLParser();

                String xml = parser.getXmlFromUrl(URL);

                Document doc = parser.getDomElement(xml);

                NodeList nl = doc.getElementsByTagName(KEY_SONG);

                for(int i=0;i<nl.getLength();i++){
                     HashMap<String,String> map = new HashMap<String, String>();
                     Element elm = (Element) nl.item(i);
                     map.put(KEY_TITLE, parser.getValue(elm, KEY_TITLE));
                     map.put(KEY_THUMB_URL, parser.getValue(elm, KEY_THUMB_URL));
                     Log.e("URL",parser.getValue(elm, KEY_THUMB_URL));
                     articlesList.add(map);

                }
                list = (ListView)findViewById(R.id.list);
                //ListAdapter adapter = new SimpleAdapter(ImageList.this,articlesList, R.layout.list_row, new String[] {"list_image"},new int[]{R.id.list_image});
                adapter = new LazyAdapter(ImageList.this,articlesList);
                list.setAdapter(adapter);
                }
            catch(Exception exp){
                Log.e("Error", "EXCEPTION RAISED IN ASYNC "+exp);
                exp.printStackTrace();
            }

    return null;
        }
    @Override
    protected void onPostExecute(String result) {
         pDialog.dismiss();
         adapter.notifyDataSetChanged();
         Log.e("Notify","Dataset change notified");
    }
} 
```

LazyAdapter 类在这里是在这里。它扩展了 BaseAdapter **LazyAdapter.java**

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if(convertView==null){
        vi=inflater.inflate(R.layout.list_row,null);

    }
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image);
    TextView title = (TextView)vi.findViewById(R.id.title);
    HashMap<String,String> article = new HashMap<String, String>();
    article = data.get(position);
    title.setText(article.get(ImageList.KEY_TITLE));
    imageLoader.DisplayImage(article.get(ImageList.KEY_THUMB_URL), thumb_image);
    return vi;

} 
```

XML，如果有人需要查看。

**主.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
 <include layout="@layout/header"/>
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="#b5b5b5"
    android:dividerHeight="1dp"
    />
</LinearLayout> 
```

**list_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dip" >
    <LinearLayout android:id="@+id/thumbnail"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:padding="3dip"
       android:layout_alignParentLeft="true"
       android:layout_marginRight="5dip">

    <ImageView
        android:id="@+id/list_image"
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:scaleType="centerCrop"  
        android:src="@drawable/nature"/>

</LinearLayout>
 <TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Rihanna Love the way lie"
    android:textColor="#040404"
    android:typeface="sans"
    android:textSize="15dip"
    android:textStyle="bold"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:34:59.523

您不应该初始化 a`LazyAdapter`并将其设置为您的`ListView`内部**doInBackground**方法，因为操作视图必须在 UI 线程上完成，并且**doInBackground**在单独的线程上运行。

相反，我建议您将`articlesList`（适配器的数据集）从**doInBackground 返回**到**onPostExecute**方法并初始化适配器并将其设置到同一方法内的列表中，因为**onPostExecute**始终在 UI 线程上运行 - 因此允许您操作视图。

# javascript - 如何使用javascript删除浮点数小数点后的零

> ID：13174213
> 
> 赞同：3
> 
> 时间：2012-11-01T09:29:41.520
> 
> 标签：javascript

> **可能重复：**
> [jQuery：逗号后将数字四舍五入为 2 位](https://stackoverflow.com/questions/4098685/jquery-rounding-numbers-to-2-digits-after-comma)

在 JavaScript 中打印一个数字时，我只想保留小数点后三位。我使用的代码显示小数点后超过 8 位。谁能指导我如何使用 JavaScript 删除剩余的数字。

这是我的 JavaScript 代码：

```
function  doMath() { 

   var nvalue; var amount;
   var price= 0.27;
   nvalue = document.getElementById("message").value;

   amount=(nvalue*price);

   document.getElementById("total").value=amount ;

} 
```

输出：

> 4.050000000000001

我想：

> 4.050

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:35:28.203

请试试这个
`amount=amount.toFixed(3);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:35:39.820

使用 javascript 的 toFixed() 方法

> toFixed() 方法将数字转换为字符串，保留指定的小数位数。

```
var amount= amount.toFixed(3);  //3 digits after decimal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:34:45.200

使用`toFixed()`：

```
amount = amount.toFixed(3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:38:33.140

我*不*建议使用`.toFixed()`四舍五入的数字，因为它返回一个**字符串**。在您的情况下，这可能还不错，因为它看起来像是用于显示，但总的来说，请做一些数学运算：

```
function betterToFixed(num, decPlaces) {
  var factor = Math.pow(10, decPlaces);
  return Math.round(num * factor) / factor;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T09:40:06.480

```
amount= amount.toFixed(3); 
```

这将为您提供所需的解决方案

# git - 如何确保其他人无法编辑我的 git 笔记？

> ID：13174215
> 
> 赞同：4
> 
> 时间：2012-11-01T09:29:46.517
> 
> 标签：git, readonly

我想使用 git notes 来做发行说明，但我不确定其他人是否使用相同的 ref 更改了我的 git 说明。

顺便说一句，`chmod 444 .git/refs/notes/abc_test`&`.git/logs/refs/notes/abc_test`不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:36:49.883

我不认为你真的可以保护已发布的 git 笔记。

您可以做的是将它们放在显式[命名空间中，如此](https://stackoverflow.com/a/5213110/6309)[处](http://lists-archives.com/git/714256-git-notes-usage.html)所述：

> 我认为对于“典型用法”，无论如何都要将其他人的笔记存储在不同的地方，例如，我将 Thomas 的列表笔记存储在 refs/remotes/trast/notes/ 中，这样它们就不会干扰我自己的笔记。

如果在同一个命名空间中，那么[它们可以被合并](http://vmiklos.hu/blog/git-notes-merge.html)：

```
git checkout refs/notes/commits
git fetch origin refs/notes/commits
git merge FETCH_HEAD
git update-ref refs/notes/commits HEAD
git checkout master 
```

但这会改变他们的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:43:45.713

此[Git 手册页](https://help.github.com/articles/remove-sensitive-data)详细说明了如何删除敏感数据，并指出您可以

> 将 [文件] 添加到 .gitignore 以确保它不会意外重新提交

由于 Git 使用的分布式模型，我认为不可能对文件进行版本化，但对其他人不可见。将文件复制到另一个用户的存储库后，将文件设置为只读将不会产生预期的效果。

这是否回答你的问题？

# javascript - IE9 Javascript 生成表

> ID：13174219
> 
> 赞同：0
> 
> 时间：2012-11-01T09:30:03.657
> 
> 标签：javascript, internet-explorer-9

嗨，我只有在 IE9 中才有问题

我有一个 Javascript 循环首先生成一个表

```
 var TABLE = widget.body.getElementsByClassName('classroom')[0];
   var TBODY = widget.createElement('tbody');

        //generate rows & Cells, 10 x 10
        var cID = 0;
        for (var r=0; r<10; r++) {
            var TR = widget.createElement('tr'); 
              for (var c=0; c<10; c++) {  
                    var TD = widget.createElement('td');
                    //TD.id="c"+cID;
                    TD.setAttribute("class",'c'+cID);
                    TD.setAttribute("id",'c'+cID);
                    TD.setAttribute("style","width:90px;");
                    TD.setAttribute("style","height:90px;");
                    cID++;
                    TR.appendChild(TD);
                }
                TBODY.appendChild(TR);
         }
         TABLE.appendChild(TBODY); 
```

哪个工作正常

然后它调用这个另一个函数来填充表格。

这只是一个功能巨大的片段！

```
var cell_class = cell.toString();   // it gets the cell from another loop say 'c1'
var TCell = widget.body.getElementsByClassName(cell_class)[0]; 
TCell.innerHTML="<a href='#'>image</a>"; // it fails at this point 'null or undefined' 
```

在我拥有的 HTML 中

```
<table id="table1" class="classroom">
                    <colgroup>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                        <col width="90" height="70"/>
                    </colgroup>
                </table> 
```

如果我将静态表添加到 HTML，它会起作用，但我希望它是动态的。

这适用于除 IE9 之外的所有当前浏览器

谁能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:37:43.763

是否有任何特殊原因为什么您不使用 jQuery 模板或把手（或任何其他模板库）来帮助您进行动态生成？

我认为 IE 的问题是，它不会默认创建 TBODY 元素，除非你在标记中有它。我认为如果该元素不存在，其他浏览器会隐式创建该元素。

尝试在标记中手动添加 tbody 元素。

# javascript - 如何将 Ajax 调用数组（json）放入全局数组？

> ID：13174220
> 
> 赞同：1
> 
> 时间：2012-11-01T09:30:17.950
> 
> 标签：javascript, jquery, ajax, arrays, json

我很困惑，知道吗！:)

我正在使用 Ajax 通过 php 从 mysql 中获取一些日期。

JS：

```
function toDb2(datastr,callback){
    $.ajax({    
        type: "POST",
        url: "config.php",
        data: datastr,
        cache: false,
        success: function(datax){
            if (callback && typeof(callback) === "function") { 
                }
                alert(datax);
                callback();
            };
        }
    });
}; 
```

的PHP：

```
function hamtakl($valdaverktyg){
     $con = mysql_connect("localhost","r00t","");
     if (!$con)
     {
     die('Could not connect: ' . mysql_error());
     }
     mysql_select_db("toolpool", $con);
    $visahamtat = mysql_query("SELECT * FROM level WHERE Verktyg='$valdaverktyg' OR Stang='ja' ORDER BY Datum");
    $p = array(); 
    while($row = mysql_fetch_assoc($visahamtat))
      {
        $p[] = $row['Datum']; 
      }
      echo json_encode($p);
      mysql_close($con);
} 
```

到目前为止，一切都很好！ajax 调用的输出如下所示：

```
 ["2012/11/26","2012/11/27","2012/11/05"] 
```

我虽然一切都很好，但我需要将“datax”放入一个全局数组中。我测试过

```
myglobalarray = datax ; 
```

没用！然后我在我的 js 的第一行中定义了数组，如下所示：

```
var myglobalarray = new Array;
//allso tested  var myglobalarray = []; 
```

但我现在不知道如何将“datax”推入数组。我认为问题在于“datax”不是数组。

基本上我需要获取日期，然后在 jquery datepicker 中使用它们来禁用日期。当我使用 datax = anotherGlobalVariable; 并提醒它的输出

```
 ["2012/11/26","2012/11/27","2012/11/05"] 
```

现在我迷路了！不知道我要做什么：D！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:34:20.303

试用

```
$.ajax({    
    type: "POST",
    url: "config.php",
    dataType:'json', // **please mention
    data: datastr,
    cache: false,
    success: function(datax){
        if (callback && typeof(callback) === "function") { 
            }
            alert(datax);
            callback();
        };
    }
}); 
```

如果您不写`dataType:'json'`，那么它会将响应视为字符串而不是 json 对象。：） 希望你能理解。！

# scala - 如何在播放框架 2.0 的模板中有条件地分配变量值？

> ID：13174221
> 
> 赞同：0
> 
> 时间：2012-11-01T09:30:33.547
> 
> 标签：scala, playframework-2.0

我想创建一个名为 style 的变量，并根据输入参数 @filter 的值分配其值

我阅读了该剧的文档，但我可以得到它的当前解决方案类似于：列表模板部分是重复的......

```
@(filter: String = "error")(body: (String) => Html)

@filter match {

  case "HOT" => {
    <ul class="list">
      <li class="icon-hot">this is a list item..</li>
      <li class="icon-hot">this is a list item..</li>
    </ul>   
  }

  case "NEW" => {
    <ul class="list">
      <li class="icon-new">this is a list item..</li>
      <li class="icon-new">this is a list item..</li>
    </ul>   
  }

} 
```

如何将“icon-new”和“icon-hot”分配给变量@style，然后在编写这样的列表模板时使用它？

```
 <ul class="list">
      <li class="@style">this is a list item..</li>
      <li class="@style">this is a list item..</li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:50:02.873

这似乎工作......

在 style.scala.html

```
@(filter: String = "error")(body: (String) => Html)

@filter match {    
  case "OPEN" => {
      @body("icon-plus")
  }
  case "FOLLOWING" => {
      @body("icon-comments")
  }
  case "HOT" => {
      @body("icon-fire")
  } 
} 
```

并在列表模板中

```
@(filter: String = "HOT")

@style(filter) { style =>
  <ul class="list">
    <li class="@style">this is a list item..</li>
    <li class="@style">this is a list item..</li>
  </ul>   
} 
```

但我仍然不太清楚这是如何工作的......尤其是以下部分：

```
(body: (String) => Html)

@body("icon-plus") 
```

# android - 警报广播类不再重复警报

> ID：13174222
> 
> 赞同：1
> 
> 时间：2012-11-01T09:30:34.540
> 
> 标签：android, alarmmanager

请指导我，以便警报（邮件发送）在事件发生前 1 天和事件发生 30 分钟之前再次编译并提供邮件给我。

提前致谢。

```
public class MailAlarm extends BroadcastReceiver{

    NotificationManager nm;

    public void onReceive(Context context, Intent intent) {

        nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);

        //int iUniqueId = (int) (System.currentTimeMillis() & 0xfffffff);

        String event = Mail_Fill_Details.Discripton;
        String name = Mail_Fill_Details.Person_Name;
        String mail =Mail_Fill_Details.mailString;
        try {   
            GMailSender sender = new GMailSender("taskschedulerfable@gmail.com", "xyz");
            sender.sendMail("Reminder of "+event+" ("+name+")" ,   
                    "REMINDER!! REMINDER!! REMINDER!! \n\n\nYou got a reminder about "+event+"("+name+") after 5 minutes\n\n\n",   
                    "taskschedulerfable@gmail.com",   
                    mail);   
        } catch (Exception e) {   
            Log.e("SendMail", e.getMessage(), e);   
        } 
```

休息代码在这里...

```
Intent intent = new Intent(Mail_Fill_Details.this,
                                MailAlarm.class);
                        Bundle b12 = new Bundle();

                        b12.putString("serverresponse", Discripton);
                        b12.putString("serverresponse1", Person_Name);
                        b12.putString("serverresponce2", mailString);

                        intent.setAction("" + Math.random());
                        intent.putExtras(b12);
                        PendingIntent displayIntent = PendingIntent
                                .getBroadcast(Mail_Fill_Details.this,
                                        iUniqueId, intent,
                                        PendingIntent.FLAG_UPDATE_CURRENT);
                        alarmManager.set(AlarmManager.RTC_WAKEUP,
                                calendar.getTimeInMillis() - 300000,
                                displayIntent);
                        // alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
                        // calendar.getTimeInMillis(), 20, displayIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:21:00.770

我认为你应该使用`setRepeating`方法`AlarmManager`而不是`set`方法。

```
am.setRepeating(type, triggerAtMillis, intervalMillis, operation); 
```

# zend-framework - 在插入数据库 Zend 框架时静默忽略重复条目

> ID：13174227
> 
> 赞同：1
> 
> 时间：2012-11-01T09:30:54.657
> 
> 标签：zend-framework, insert, duplicates

我正在使用 zend 框架并想在 mysql 数据库中插入数据。程序遇到数据库中已存在的行时抛出错误。如何简单地忽略重复数据并继续下一行。Zend框架中是否有诸如插入忽略之类的方法？我在网上找不到这个问题的确切答案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:51:41.810

我建议将插入包装到 Try/Catch 块中，如下所示：

```
try {
   $db->insert(array());
} catch (Zend_Db_Exception $e) {
  // ignored 
} 
```

最好检查是否抛出异常，因为唯一的违规，如果没有抛出新的异常以获取“其他”错误。

其他解决方案“昂贵，因为您必须先查询数据库”

```
$validator = new Zend_Validate_Db_NoRecordExists(
    array(
        'table' => 'database_table',
        'field' => 'your_field_to_check_for_unique'
    )
);

if ($validator->isValid('your_field_to_check_for_unique) {
         // DO Insert
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T09:57:35.437

可以使用“原始”查询。
这是一个如何跳过已创建的记录并更新特定值的示例：

```
$query = 'INSERT IGNORE INTO table_name (col1, col2, col3)  VALUES (1, 2, 3), (4, 5, 6) ON DUPLICATE KEY UPDATE col3 = VALUES(col3)';
$dbAdapter->query($query); 
```

# mediainfo - 无法从 mediainfo CLI 获取 BitRate_Mode

> ID：13174230
> 
> 赞同：2
> 
> 时间：2012-11-01T09:31:14.767
> 
> 标签：mediainfo

以下是我的bat文件：

```
@echo off
mediainfo --Inform=file://template.txt "in.mp4" >info.txt 
```

以下是我的template.txt

```
General;File is: %FileName%\r\n 
Video;\r\nFormat: %Format%\r\nCodecID: %CodecID%\r\nResolution: %Width%x%Height%\r\nDAR: %DisplayAspectRatio/String% or %DisplayAspectRatio%\r\nPAR: %PixelAspectRatio%\r\nFrameMode: %FrameRate_Mode%\r\nVideoBitrateMode: %BitRate_Mode%\r\nScanType: %ScanType%

Audio;\r\nAudioCodec: %Format%\r\nAudioBitrateMode: %BitRate_Mode% 
```

以下是输出（在 info.txt 中）

```
File is: in

Format: AVC
CodecID: avc1
Resolution: 1280x720
DAR: 16:9 or 1.778
PAR: 1.000
FrameMode: VFR
VideoBitrateMode: 
ScanType: Progressive
AudioCodec: AAC
AudioBitrateMode: VBR 
```

无论我做什么，我都无法让 MediaInfo 为任何给定文件提供 BitRate_Mode？以下是 mediainfo 的 CLI 帮助文档： [Help doc](https://docs.google.com/viewer?a=v&q=cache%3aAHOIFbYmwAwJ%3amy-coder-gui.googlecode.com/svn-history/r2/trunk/MyCoderGui/MyCoderGui/bin/Debug/tools/MediaInfo/Contrib/CLI_Help.doc%20video%20bitratemode%20mediainfo&hl=en&gl=pk&pid=bl&srcid=ADGEESiBhbyqX9Gkt9qw8TyFe7fjoCwfdbxtpgcfU70R9ROU4gH8-DyfGqr4Lw20I-b0RMncV_OGHByfbUkahPBLPrdgYPmgYojw8EpbIaa-G5xwW73V_HUqBaLsPBcAhyDmI7qAKTr0&sig=AHIEtbSI9JhD4TeRNVPD6zHFUusCSBYJmg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-26T12:55:54.177

我做了详尽的测试，我发现大多数时候 mediainfo 不会返回视频轨道上的 %BitRate_Mode%，但它确实返回 %BitRate_Maximum% 如果你将它与 %BitRate% 进行比较并且它是不同的，它是 VBR 视频，这是我的模板：

```
General;Name.........: %FileName%.%FileExtension%\r\nSize.........: %FileSize/String%\r\nDuration.....: %Duration/String3%\r\n
Video;Resolution...: %Width%x%Height%\r\nCodec........: %Codec/String% %Format_Profile%\r\nBitrate......: %BitRate/String%\r\nMax Bitrate..: %BitRate_Maximum/String%\r\nFramerate....: %FrameRate% fps\r\nAspect Ratio.: %DisplayAspectRatio/String%\r\n
Audio;Audio........: %Language/String% %BitRate/String% %BitRate_Mode% %Channel(s)% chnls %Codec/String%\r\n
Text;%Language/String%
Text_Begin;Subs.........: 
Text_Middle;, 
Text_End;.\r\n 
```

它会像这样退休：

```
Name.........: My Video.m4v
Size.........: 8.23 GiB
Duration.....: 02:20:02.880
Resolution...: 1920x800
Codec........: AVC High@L3.0
Bitrate......: 7 504 Kbps
Max Bitrate..: 27.1 Mbps
Framerate....: 23.976 fps
Aspect Ratio.: 2.40:1
Audio........: English 448 Kbps CBR 6 chnls AC3
Audio........: Spanish 448 Kbps CBR 6 chnls AC3
Subs.........: English, Spanish. 
```

# android - 我可以在中国使用 Google Maps API

> ID：13174231
> 
> 赞同：2
> 
> 时间：2012-11-01T09:31:17.517
> 
> 标签：android, google-maps

在我的公司，我们开发了一个使用谷歌地图的安卓应用程序。具体来说，我们使用

```
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView; 
```

在很短的时间内，这个应用程序将在中国演示给一家中国公司，我需要知道我们是否需要更换地图 API。

如果地图有效与否，我已经在家中搜索了一个简单的“是”或“否”答案，但我不清楚。我在 2011 年夏天去了中国并使用了地图，但在它接缝后不久，地图就被封锁了。然后我看到新闻说谷歌申请了在中国提供地图服务的许可证，不管他们是否得到了，都一言不发。

如果我将搜索范围缩小到今年的结果，有些人声称它有效，但实际上无效。

那么在中国有没有堆栈溢出者可以给我一个确凿的答案？如果不需要，我真的没有时间更换地图 API

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:42:23.173

我住在北京，我可以向您保证，谷歌地图（以及它的所有其他服务都可用）。

但是你需要考虑的是，从中国国内到国外的流量很不稳定：比如上周，gmail很不稳定，但几天后就恢复正常了。

将中国视为一个巨大的企业网络：有时 DNS 服务器出现故障或强大的防火墙出错......

还有一些时期网络更容易出现问题：国庆节（10 月）、中国新年（2 月左右），最后但同样重要的是：共产党选举（今年 11 月）。在此期间，他们可能会决定暂时屏蔽某些网站。

此外，不同的城市可能有不同的防火墙规则：在北京可能有效，在上海可能无效（但这种情况非常罕见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:44:03.497

谷歌在中国仍然没有地图出版许可证（至少我的最新消息是这样）。很可能在不久的将来谷歌的地图服务将被封锁。

很多中国网站，包括我们的，都使用谷歌的JS以及他们的Service API，其中有谷歌的地理编码API。在中国，百度（纳斯达克股票代码：BIDU）和搜狗[小型搜索引擎，搜狐（纳斯达克股票代码：SOHU）的一部分]都提供在线地图和API，

百度的地图api首页是[http://dev.baidu.com/wiki/map/in](http://dev.baidu.com/wiki/map/in) ...

搜狗的地图api主页是[http://map.sogou.com/api/](http://map.sogou.com/api/)

实际上，在中国，截至目前，谷歌地图 api 仍然可用。从最近的chinatech.us新闻来看，谷歌中国通过了年检，获得了更多的在线地图营业执照的机会，所以，这3个API已经可用。

# .net - 为什么 onclientclick 会被自定义验证器覆盖？

> ID：13174238
> 
> 赞同：0
> 
> 时间：2012-11-01T09:31:46.407
> 
> 标签：.net, events, onclick, buttonclick, onclientclick

我有一个带有自定义验证器和按钮的典型 .net 表单场景。

自定义验证器具有属性 ClientValidationFunction 集。

当我在按钮上使用 onclick 事件时，一切正常，但是当我使用内置的 OnClientClick 事件时，自定义验证器不会触发。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:41:46.207

如果您将任何内容附加到按钮的客户端单击事件，请确保它没有返回 false，否则您的表单将不会提交并且不会调用验证。

有关如何触发客户端验证的信息，请参阅此页面：

[http://fczaja.blogspot.co.uk/2009/07/aspnet-how-to-trigger-client-side.html](http://fczaja.blogspot.co.uk/2009/07/aspnet-how-to-trigger-client-side.html)

# winhttp - 使用 WinHttpQueryHeader() 从代理读取响应

> ID：13174239
> 
> 赞同：1
> 
> 时间：2012-11-01T09:31:52.033
> 
> 标签：winhttp

如何使用函数判断响应是从代理还是终端服务器发送的`WinHttpQueryHeader()`？我尝试将`WINHTTP_QUERY_PROXY_AUTHENTICATE`其用作`dwInfoLevel`函数的参数，`winHttpQueryHeader()`但我得到的缓冲区为 NULL。

```
int bufferSize = 0;
char lpOutBuffer[500];

ReturnVal = WinHttpQueryHeader(Handle, WINHTTP_QUERY_PROXY_AUTHENTICATE, NULL, &bufferSize);

ReturnVal= WinHttpQueryHeader(Handle, WINHTTP_QUERY_PROXY_AUTHENTICATE, lpOutBuffer, &bufferSize); 
```

`lpOutBuffer`一片空白。

实际上我认为这里的问题是我`bufferSize`在第一个中得到了 0，`WinHttpQueryHeader`所以第二个`WinHttpQueryHeader`没有填充`lpOutBuffer`（因为`bufferSize`是 0）。为什么`bufferSize`返回为0？

与此相反，如果我使用`InfoLevel`as `WINHTTP_QUERY_RAW_HEADERS_CRLF`，我会得到正确的输出并且`bufferSize`不是 0，它会在第一次`WinHttpQueryHeader()`调用后被填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:54:19.833

如果 HTTP 服务器需要身份验证，则 HTTP 响应代码为 401，相应的响应标头为`WWW-Authenticate`. 如果代理服务器需要身份验证，则 HTTP 响应代码为 407，相应的响应标头为`Proxy-Authenticate`. 我建议检查正确的 HTTP 代码的响应，然后检索相应的标头。

至于`WINHTTP_QUERY_PROXY_AUTHENTICATE`查询标志，[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384070%28v=vs.85%29.aspx)指出：

> 检索用于向需要身份验证的代理标识用户的标头。只能在请求发送到服务器之前检索此标头。

因此，该特定标志与服务器的响应无关。它是一个请求标头，用于向代理标识用户。

# iphone - 如何在按钮单击时加载 uisplit viewcontroller

> ID：13174241
> 
> 赞同：0
> 
> 时间：2012-11-01T09:32:01.300
> 
> 标签：iphone, ios

我是 iPhone 开发的新手。

如何在按钮单击时加载具有 uisplitview 控制器的页面

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:25:45.810

几点：

1.  UISplitView 控制器只能在 iPad 设备上使用。“拆分视图控制器专用于 iPad 设备。尝试在其他设备上创建一个会导致异常。” 在[苹果开发者](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISplitViewController_class/Reference/Reference.html#//apple_ref/occ/cl/UISplitViewController)
2.  UISplitView 控制器必须是根控制器。您可以使用 UINavigationController 并使用情节提要创建从一个 UIViewController 到另一个 UIViewController 的转场（按下控制键并鼠标单击 UIViewController 以启动转场并在目标 UIViewController 顶部释放鼠标按钮）。在按钮单击事件上使用该方法`[self performSegueWithIdentifier:@"NameOfSegue" sender:self];`（UIViewController 方法）。您可以在按下 segue 时更改情节提要中的 segue 名称（您将在右侧的属性部分看到标识符字段）

希望这可以帮助。

# php - 一些复杂的 JSON 树结构示例

> ID：13174244
> 
> 赞同：1
> 
> 时间：2012-11-01T09:32:21.847
> 
> 标签：php, arrays, json, api, data-structures

我希望编译一个在 Internet 上公开可用的 JSON 提要列表，这些提要很复杂并且有很多级别。我正在研究 3+ 级和不同的数据结构。

本合集的目的是为学习遍历数组的同学提供范例。（JSON 将被转换为关联数组。）

不知何故，这些示例应该在现实生活中使用，例如：
- 天气提要
- dbpedia 开放提要
- 甚至 facebook 相册（虽然需要 api 密钥，但很容易获得）。

有些网站列出了 JSON 示例：[http](http://www.jquery4u.com/json/10-example-json-files/) ://www.jquery4u.com/json/10-example-json-files/但我认为它们太简单了。

我正在寻找至少 10 个其他示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:58:17.403

我不能说出 10 个名字，但这里有一些指向我使用过的资源的链接，这可能是一个很好的起点。

BBC 拥有大量公开可用的资源，其中的一些详细信息可在[此处](http://www.bbc.co.uk/programmes/developers)和[此处](http://www.bbc.co.uk/radio1/developers/api/)找到。例如：

[http://www.bbc.co.uk/tv/programmes/genres.json](http://www.bbc.co.uk/tv/programmes/genres.json)

[http://www.bbc.co.uk/tv/programmes/genres/drama/scifiandfantasy/schedules/upcoming.json](http://www.bbc.co.uk/tv/programmes/genres/drama/scifiandfantasy/schedules/upcoming.json)

Musicbrainz 还有一个结构丰富的 JSON API - [http://wiki.musicbrainz.org/Development/JSON_Web_Service](http://wiki.musicbrainz.org/Development/JSON_Web_Service)

还有[Google Feed API](https://developers.google.com/feed/v1/jsondevguide)和[Google Maps API](https://developers.google.com/maps/documentation/geocoding/)，但它们可能没有您想要的那么多级别。

如果您有 Twitter 帐户，则[REST API](https://dev.twitter.com/docs/api/1.1)的某些部分是 3+ 嵌套级别。

# forms - 如何在 node.js 中处理 multipart/form-data

> ID：13174245
> 
> 赞同：12
> 
> 时间：2012-11-01T09:32:29.770
> 
> 标签：forms, node.js, multipartform-data

我正在使用多部分表单数据从客户端上传图像文件。我想使用 node.js 在服务器端接收并将其作为文件写入。

```
<html>
    <body>
        <form action="url" method="post" enctype="multipart/form-data">
            <input type="text" name="imageName">
            <input type="file" name="sam">
        </form>
    </body>
</html> 
```

这是我的客户端代码。如何在服务器端处理这个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:41:38.833

这是链接下面的重复问题。

[使用 Node.js、Express 和 Mongoose 上传图片](https://stackoverflow.com/questions/5149545/uploading-images-using-nodejs-express-and-mongo)

这是示例：

```
// Expose modules in ./support for demo purposes
require.paths.unshift(__dirname + '/../../support');

/**
 * Module dependencies.
 */

var express = require('../../lib/express')
  , form = require('connect-form');

var app = express.createServer(
  // connect-form (http://github.com/visionmedia/connect-form)
  // middleware uses the formidable middleware to parse urlencoded
  // and multipart form data
  form({ keepExtensions: true })
);

app.get('/', function(req, res){
  res.send('<form method="post" enctype="multipart/form-data">'
    + '<p>Image: <input type="file" name="image" /></p>'
    + '<p><input type="submit" value="Upload" /></p>'
    + '</form>');
});

app.post('/', function(req, res, next){

  // connect-form adds the req.form object
  // we can (optionally) define onComplete, passing
  // the exception (if any) fields parsed, and files parsed
  req.form.complete(function(err, fields, files){
    if (err) {
      next(err);
    } else {
      console.log('\nuploaded %s to %s'
        ,  files.image.filename
        , files.image.path);
      res.redirect('back');
    }
  });

  // We can add listeners for several form
  // events such as "progress"
  req.form.on('progress', function(bytesReceived, bytesExpected){
    var percent = (bytesReceived / bytesExpected * 100) | 0;
    process.stdout.write('Uploading: %' + percent + '\r');
  });
});

app.listen(3000);
console.log('Express app started on port 3000'); 
```

如果您的问题没有解决，请访问[此链接](http://www.componentix.com/blog/9/file-uploads-using-nodejs-now-for-real)。这是一篇关于文件上传的好文章。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2017-07-24T06:44:30.167

您可以使用请求模块发送多部分请求。这是示例代码：

```
var jsonUpload = {  };
var formData = {
    'file': fs.createReadStream(fileName),
    'jsonUpload': JSON.stringify(jsonUpload)
};
var uploadOptions = {
    "url": "https://upload/url",
    "method": "POST",
    "headers": {
        "Authorization": "Bearer " + accessToken
    },
    "formData": formData
}
var req = request(uploadOptions, function(err, resp, body) {
    if (err) {
        console.log('Error ', err);
    } else {
        console.log('upload successful', body)
    }
}); 
```

# c# - 如何将 WCF RESTful 功能的访问限制在特定 IP 范围内？

> ID：13174246
> 
> 赞同：0
> 
> 时间：2012-11-01T09:32:32.783
> 
> 标签：c#, wcf, rest, iis-7

我用几个简单的功能构建了一个 Restful WCF 服务。提出了新的要求。

其中一项功能应该只能由特定的 IP 范围访问。

实现这一点的最佳方法是什么？我认为一个简单的方法是简单地配置 IIS 与将根据请求模式阻止 ip 范围的规则 - 找不到这样的选项..

谢谢！提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:21:53.330

您是否尝试过实施`IParameterInspector`？您的代码可能如下所示：

```
public class IPFilterAttribute : Attribute, IOperationBehavior, IParameterInspector
{
    private string _rangeFrom;
    private string _rangeTo;

    public IPFilterAttribute(string rangeFrom, string rangeTo)
    {
        _rangeFrom = rangeFrom;
        _rangeTo = rangeTo;
    }

    public void ApplyDispatchBehavior(
        OperationDescription operationDescription,
        DispatchOperation dispatchOperation)
    {
        dispatchOperation.ParameterInspectors.Add(this);
    }

    public void AfterCall(string operationName, object[] outputs,
                          object returnValue, object correlationState)
    {
    }

    public object BeforeCall(string operationName, object[] inputs)
    {
        RemoteEndpointMessageProperty clientEndpoint =
            OperationContext.Current.IncomingMessageProperties[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;
        if (!IsClientInInRange(clientEndpoint.Address))
        {
            throw new SecurityException(string.Format("Calling method '{0}' is not allowed from address '{1}'.", operationName, clientEndpoint.Address));
        }

        return null;
    }

    private bool IsClientInRange(string clientAddress)
    {
        // do the magic to check if client address is in the givn range
    }

    public void AddBindingParameters(OperationDescription operationDescription, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)
    {
    }

    public void Validate(OperationDescription operationDescription)
    {
    }
} 
```

然后你所要做的就是用这个属性装饰 web 方法：

```
 [OperationContract]
    [WebInvoke(...)]
    [IPFilter("64.18.0.0", "64.18.15.255")]
    string GetData(string value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:37:36.747

几个选项：-您可以使用防火墙为您完成这项工作

*   IIS 具有可以阻止 ip 的功能，但您必须在 IIS 中托管您的服务。

*   您可以使用 WCF 获取客户端地址，然后接受/拒绝呼叫。

参考： [http ://www.danrigsby.com/blog/index.php/2008/05/21/get-the-clients-address-in-wcf/](http://www.danrigsby.com/blog/index.php/2008/05/21/get-the-clients-address-in-wcf/)

# c# - EF 代码优先 IDbSet .Attach() 已检测到对关系_的角色_的冲突更改

> ID：13174247
> 
> 赞同：0
> 
> 时间：2012-11-01T09:32:36.763
> 
> 标签：c#, entity-framework, .net-4.0, ef-code-first, entity-framework-4.3

我有以下代码：

```
using (var db = new SourceLogContext())
{
    db.LogEntries.Attach(this);
    db.Entry(this).Collection(c => c.ChangedFiles).Load();
} 
```

我得到以下异常：

```
System.InvalidOperationException occurred
  Message=Conflicting changes to the role 'LogEntry_LogSubscription_Target' of the relationship 'SourceLog.Model.LogEntry_LogSubscription' have been detected.
  Source=System.Data.Entity
  StackTrace:
       at System.Data.Objects.DataClasses.RelatedEnd.IncludeEntity(IEntityWrapper wrappedEntity, Boolean addRelationshipAsUnchanged, Boolean doAttach)
       at System.Data.Objects.DataClasses.EntityCollection`1.Include(Boolean addRelationshipAsUnchanged, Boolean doAttach)
       at System.Data.Objects.DataClasses.RelatedEnd.WalkObjectGraphToIncludeAllRelatedEntities(IEntityWrapper wrappedEntity, Boolean addRelationshipAsUnchanged, Boolean doAttach)
       at System.Data.Objects.DataClasses.RelatedEnd.AddGraphToObjectStateManager(IEntityWrapper wrappedEntity, Boolean relationshipAlreadyExists, Boolean addRelationshipAsUnchanged, Boolean doAttach)
       at System.Data.Objects.DataClasses.RelatedEnd.IncludeEntity(IEntityWrapper wrappedEntity, Boolean addRelationshipAsUnchanged, Boolean doAttach)
       at System.Data.Objects.DataClasses.EntityReference`1.Include(Boolean addRelationshipAsUnchanged, Boolean doAttach)
       at System.Data.Objects.DataClasses.RelationshipManager.AddRelatedEntitiesToObjectStateManager(Boolean doAttach)
       at System.Data.Objects.ObjectContext.AttachTo(String entitySetName, Object entity)
       at System.Data.Entity.Internal.Linq.InternalSet`1.<>c__DisplayClass2.<Attach>b__1()
       at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Attach(Object entity)
       at System.Data.Entity.DbSet`1.Attach(TEntity entity)
       at SourceLog.Model.LogEntry.LoadChangedFiles() in C:\github.com\tomhunter-gh\SourceLog\SourceLog.Model\LogEntry.cs:line 62
  InnerException: (empty) 
```

违规行在这里：[https ://github.com/tomhunter-gh/SourceLog/blob/443fb74a37db89522f85b4dfc941c52922785e7a/SourceLog.Model/LogEntry.cs#L62](https://github.com/tomhunter-gh/SourceLog/blob/443fb74a37db89522f85b4dfc941c52922785e7a/SourceLog.Model/LogEntry.cs#L62)

LogEntry 在此处分配了 LogSubscription：[https ://github.com/tomhunter-gh/SourceLog/blob/443fb74a37db89522f85b4dfc941c52922785e7a/SourceLog.Model/LogSubscription.cs#L88](https://github.com/tomhunter-gh/SourceLog/blob/443fb74a37db89522f85b4dfc941c52922785e7a/SourceLog.Model/LogSubscription.cs#L88)

看起来该分配创建了一个新的 LogSubscription 实例并对其进行分配，然后 Attach 引用了一个不同的实例（但具有相同的 Id）。为什么这会导致错误，我将如何避免它？

在 LogSubscription L88 中，我基本上是在尝试将 LogEntry 添加到 LogSubscription 的集合属性中，但没有加载整个 LogEntry 集合。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:16:53.543

通过不附加 LogEntry 实体来避免错误，而只是在数据库中查询 ChangedFiles 集合：

```
using (var db = new SourceLogContext())
{
    ChangedFiles = db.LogEntries.Where(x => x.LogEntryId == LogEntryId).Include(x => x.ChangedFiles).Single().ChangedFiles;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T23:01:54.377

在另一种情况下，我实际上通过覆盖`Equals()`and解决了这个问题`GetHashCode()`：

```
public override bool Equals(object obj)
{
    var logEntry = obj as LogEntry;
    if (logEntry == null)
        return false;
    return LogEntryId.Equals(logEntry.LogEntryId);
}

public override int GetHashCode()
{
    return LogEntryId.GetHashCode();
} 
```

# events - 是否可以注释要在阶段调用的支持 bean 方法？

> ID：13174248
> 
> 赞同：0
> 
> 时间：2012-11-01T09:32:45.077
> 
> 标签：events, jsf, binding, jsf-2, phaselistener

我需要在组件绑定后调用支持 bean 中的初始化方法。@PostConstruct 在组件绑定之前调用。对于在组件绑定后导致方法调用的方法，是否有任何 JSF 注释？

目前可以在页面端和bean端使用类似`<f:view afterPhase="#{bean.initialize}">`或`<f:event type="preRenderView" listener="#{bean.initialize}" />`需要代码的东西。是否有任何仅限 bean-side 的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:49:19.383

在标准的 JSF API 中没有这样的东西。

您可以获得的最接近的是 getter 中的延迟加载。

```
public UIComponent getSomeComponent() {
    if (!initialized(someComponent)) {
        initialize(someComponent);
    }
    return someComponent;
} 
```

或在 setter 中延迟执行。

```
public void setSomeComponent(UIComponent someComponent) {
    if (!initialized(someComponent)) {
        initialize(someComponent);
    }
    this.someComponent = someComponent;
} 
```

# javascript - 使用 HTML5 获取 iPad 的所有者名称/设备名称

> ID：13174249
> 
> 赞同：0
> 
> 时间：2012-11-01T09:32:45.637
> 
> 标签：javascript, html, ipad, cordova, appmobi

我想用它来显示欢迎消息“Hi [owner name]”。

**是否可以使用 html5/javascript 获取 iPad 的所有者名称/设备名称？**

或者使用 html5 和其他框架，例如 phoneGap、appmobi 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:47:52.563

你不能做这个。唯一可能的是检测到有人在使用 iPad。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:01:03.640

您可以使用 PhoneGap/Cordova API，特别是允许您获取以下详细信息的[设备 API ：](http://docs.phonegap.com/en/2.1.0/cordova_device_device.md.html#Device)

*   设备名称
*   设备.cordova
*   设备.平台
*   设备.uuid
*   设备版本

# google-apps-script - 使用谷歌日历的 Recurrence-OnlyOnWeeks 示例？

> ID：13174251
> 
> 赞同：1
> 
> 时间：2012-11-01T09:32:49.047
> 
> 标签：google-apps-script, rfc2445, rfc5545

我很陌生`Google-Apps-Script`。你能举个例子如何使用

> 日历 > 重复 > [onlyOnWeeks](https://developers.google.com/apps-script/class_recurrence#onlyOnWeeks)

我想创建一个每日活动，但只在*三个特定的周内*。我的解决方案无法正常工作。每日事件正在创建，但每周。

```
var myrecurrence = CalendarApp.newRecurrence()
                          .addDailyRule().onlyOnWeeks([44,45,51]);
cal.createEventSeries(mytitle, startTime, endTime, myrecurrence); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:45:59.473

幕后的 CalendarApp API 使用 iCal 规范。根据规范，“onlyOnWeeks”规则只能与年度规则一起应用。

更多在这里 - [http://www.ietf.org/rfc/rfc2445.txt](http://www.ietf.org/rfc/rfc2445.txt)

搜索“BYWEEKNO”并在那里找到特定规则的第二个实例。

所以试试下面的这条线，我想你会更接近。注意“addYearlyRule”而不是“addDailyRule”

```
var myrecurrence = CalendarApp.newRecurrence().addYearlyRule().onlyOnWeeks([44,45,51]); 
```

# php - 如何在 Xdebug 上使用本地 IDE 进行远程调用

> ID：13174253
> 
> 赞同：1
> 
> 时间：2012-11-01T09:32:55.997
> 
> 标签：php, xdebug

我的场景：

我的本地机器正在运行带有 Xdebug 的 PHP，以及我的 IDE。它可以从 Internet 的 80 和 443 端口访问。

一个远程 API 正在调用我给它的 URL。

我想给远程 API 的地址`http://myaddr/callback.php?XDEBUG_SESSION=foo`并让我的本地 IDE 调试这个请求。

似乎不需要让调用者和调试服务器都相同，但是如何在 Xdebug 中配置它呢？

**当前的设置**

```
[xdebug]
xdebug.remote_enable=On
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.remote_handler=dbgp
xdebug.idekey=foo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:50:41.557

我发现了我的错误：

我需要开始会话，`XDEBUG_SESSION_START`所以我必须提供 API`http://myaddr/callback.php?XDEBUG_SESSION_START=foo`

`XDEBUG_SESSION`用于会话已经开始的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:40:31.550

不确定这是否可行，但您可以尝试删除`xdebug.remote_host=localhost`并设置`xdebug.remote_connect_back=1`.

（不过，这有安全隐患，因为对 XDebug 的访问不再局限于 localhost。）

# php - 动态保存所见即所得内容的概念

> ID：13174254
> 
> 赞同：0
> 
> 时间：2012-11-01T09:32:57.823
> 
> 标签：php, javascript, html

我有一个关于自己实现 CMS 的概念性问题。我正在尝试为一个简单的后端编辑器创建一个概念，用户可以在该编辑器上输入文本，但也可以添加一些必须可用的输入字段。我试图找出为文本、图像、表格以及表单元素创建所见即所得编辑器的最佳方法。

这种实现的一部分是所见即所得的编辑器，另一部分是编辑后如何保存整个页面的问题（将整个站点保存为 HTML？或保存为数据库中的部分或什么？感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:01:33.133

tinyMCE + jquery 将在客户端完成这项工作。tinyMCE 将其内容表示为 HTML + base64 编码的图像，因此您应该将其在数据库中保存为 LONGTEXT 列类型（很长，因为当有图像呈现时，简单 TEXT 的容量将不够用）

好的做法是当服务器端的控制器启用 REST 时，您可以通过 jquery 的 ajax 处理程序轻松 POST/PUT/DELETE tiny 的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:04:30.077

### 使用 TinyMCE 和[`AutoSave`](http://tinymce.moxiecode.com/js/tinymce/docs/api/index.html#class_tinymce.plugins.AutoSave.html).

该插件为 TinyMCE 文本编辑器添加了自动保存功能，以挽救意外丢失的内容。通过使用本地存储。

您可以从描述页面查看更多信息。

# iphone - 我的 iPhone 应用程序中有 SQLITE_IOERR

> ID：13174259
> 
> 赞同：1
> 
> 时间：2012-11-01T09:33:31.710
> 
> 标签：iphone, objective-c, xcode, sqlite

我开发了一个应用程序，其中我使用 sqlite3 作为数据库。

有时我得到 SQLITE_IOERR 即 10，因为这个 db 不能返回任何值。

但是，如果我在从后台终止后再次启动应用程序，它就可以正常工作。

如何解决这个错误，有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:54:38.540

> SQLITE_IOERR

如果操作系统通知 SQLite 它无法执行某些磁盘 I/O 操作，则返回此值。这可能意味着磁盘上没有剩余空间。

可能您应该为您在类中分配的每个对象检查 dealloc。

正如您所说，当您从后台退出应用程序后运行应用程序时，它工作正常。这是因为退出应用程序会释放应用程序占用的所有内存。

# jasper-reports - 如何在 JRxml 文件中创建动态列以生成碧玉报告？

> ID：13174265
> 
> 赞同：7
> 
> 时间：2012-11-01T09:33:52.810
> 
> 标签：jasper-reports

我有一组数据要使用 jasper 报告以表格格式显示，目前正在编写 .jrxml 文件。

在我的数据集中，我有数据可以帮助我们了解表格的列数，从而使其成为表格的动态列。

因此，问题是从数据库中获取的数据是特定于行的；那么如何才能将其转换为表格的列数？

我有一个从中提取数据的 dB 表：

```
TEST_ID   LEVEL   LOT_NUM  MEAN          UNITS       PERCENT            
--------- ------  -------- ------------- ----------- -------------
GLU       1       1212     2.1             10           22                     
GLU       2       1314     3.2             10           22                     
GLU       3       1414     3.3             10           22 
```

我必须同样创建报告：

```
TEST_ID   LEVEL:1  LEVEL:2   LEVEL:3  UNITS PERCENT
-------   -------  -------   -------  ----- -------
GLU       2.1      3.2       3.3      10    22 
```

-：LEVEL 的数量成为特定测试的列数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:21:46.470

您的用例看起来只能在运行时识别您的列。对于此类用例，您可以查看两个库中的任何一个 -[动态 jasper](http://dynamicjasper.com/2010/10/06/how-to-crosstabs/)和[动态报告](http://www.dynamicreports.org/examples/examples.html)。不过，我已经看到更多使用动态碧玉而不是动态报告。

# iphone - 在 iphone 的 XML 响应中查找元素标记的计数？

> ID：13174266
> 
> 赞同：0
> 
> 时间：2012-11-01T09:34:04.587
> 
> 标签：iphone, xcode

1\. 我从 url.IN XML 响应中进行 XML 解析，我怎样才能获得元素标签的长度.. 例如：

```
<Company>
   <Id>1</Id>
   <name>A</name>
</Company>
<Company>
   <Id>2</Id>
   <name>B</name>
</Company> 
```

在此我如何获得“公司”标签的编号，即 2

---> 在解析 XML 时，我在数组中得到了一些 GUID 值，我将它放在一个字符串变量中。但是当我将一个特定的值与字符串变量进行比较时，它没有得到比较..无法知道我哪里出错了？我的数组是

```
(
{
Id="84a6c6f6-b018-4f0e-8da4-c64bf76be764"
}
) 
```

现在我把它放在这样的字符串变量中：

```
nam=[[arr objectAtIndex:0]objectForKey:@"Id"]; 
```

但是如果 arr 的结果是（ { Id="00000000-0000-0000-0000-000000000000" } ）

如果我比较

```
if(nam=@"00000000-0000-0000-0000-000000000000")
{
   //do something

} 
```

但是，如果 stmnt 如果 Id 是 00000000-0000-0000-0000-000000000000 ..我该如何比较它，那么我的光标不会出现在这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:53:29.580

仅用于`[nam isEqualToString:@"00000000-0000-0000-0000-000000000000"]`比较字符串。

PS。即使您*可以*将字符串与等号进行比较，您的代码仍然无法工作，因为`=`表示分配，其中`==`检查是否相等。（因此在您的示例中，您只需将字符串分配给`nam`变量）

* * *

编辑：（刚刚注意到有2个问题）

对于元素计数，您可以在`didStartElement`委托方法中增加一个整数（正如其他人所说），或者在其中`NSMutableArray`添加一个对象（例如，从解析的 XML 中获取类实例是有意义的`Company`。之后`myCompanies.count`应该给你公司的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:18:50.920

这是你第一个问题的答案。您可以简单地取一个整数变量并将其初始化为零。如果您使用的是 NSXMLParser 然后在

```
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

使用函数 isEqualToString: 检查名为“Company”的标签的相等性：如果满足条件，则增加计数。

在解析结束时，计数器将计算“公司”标签的出现次数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:20:50.763

如果您在解析时在函数“didStartElement”中使用标记的名称很容易，您可以这样做

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"Company"])
        companyCount++;
} 
```

请让我知道这是否适合您

# delphi - Delphi - W1048“字符串”到“TFormatSettings”的不安全类型转换

> ID：13174268
> 
> 赞同：5
> 
> 时间：2012-11-01T09:34:16.920
> 
> 标签：delphi, delphi-xe

我正在将一个旧项目移植到 Delphi XE，并在下面的代码中收到此警告。

```
function RemoveThousandSeperator(Text: String) : String;
Var P : Integer;
begin
  if length(Text) > 3 then begin
    p := Pos(FormatSettings.ThousandSeparator,Text);
   while p >0 do begin
      Delete(Text,p,1);
      p := Pos(FormatSettings.ThousandSeparator,Text);
    end;
  end;
  result := Text;
end; 
```

甚至 FormatSettings.ThousandSeparator 也是 char 类型。

LE：我在问是否有人可以告诉我为什么会出现这个警告。代码是旧的，它将被重新制作。

LE2：为了得到这个警告，需要在 Delphi Compiler-Hints & Warnings 中将所有警告设置为 true

LE3：如果有人需要它 - {$WARN UNSAFE_CAST OFF} 使警告消失。

LE4：对于那些认为警告难以相信的人的警告截图

![在此处输入图像描述](../Images/1adcc4fa6631adc119879a500621f607.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T10:53:51.120

警告的起源是`FormatSettings`变量的声明`SysUtils.pas`：

```
var
  // Note: Using the global FormatSettings variable corresponds to using the
  // individual global formatting variables and is not thread-safe.
  FormatSettings: TFormatSettings absolute CurrencyString; 
```

它将字符串 ( `CurrencyString`) 转换为记录 ( `TFormatSettings`)。

因此，生成警告的问题在于`SysUtils.pas`，而不是在您发布的代码中，尽管警告是在您的代码中生成的。

* * *

这是一个测试用例（Delphi XE）：

```
program Project1;

{$APPTYPE CONSOLE}
{$WARN UNSAFE_CAST ON}

type
  TTest = record
    FS: string;
  end;

var
  Str: string;
  Test: TTest absolute Str;

begin
  Str:= 'abc';
  Writeln(Test.FS);   //  W1048 Unsafe typecast of 'string' to 'TTest'
end. 
```

# android - 如何覆盖 AppWidget-Layout 中 ImageView 的 onDraw() 方法？

> ID：13174277
> 
> 赞同：2
> 
> 时间：2012-11-01T09:34:42.423
> 
> 标签：android, android-widget, android-appwidget, ondraw

在活动上下文中，通过创建扩展为 View 或在本例中为 ImageView 的自定义类，很容易覆盖 onDraw() 方法。使用 LayoutInflater 或其实例也可以轻松访问该视图。

现在我正在开发一个 AppWidget，但使用的是 RemoteViews。

任何想法如何做到这一点？

* * *

好的。看来我在stackoverflow中找到了一个解决方案：

“只需创建一个位图，用它创建一个画布，然后使用您的 onDraw 代码在其上绘制。然后创建一个 ImageView（在小部件中允许）并将其显示的图像设置为您的位图。” （[动态地将视图添加到 android 小部件](https://stackoverflow.com/questions/6319833/dynamically-adding-a-view-to-an-android-widget)）

通过位图创建画布：（[在android中创建一个空位图并通过画布绘制](https://stackoverflow.com/questions/5663671/creating-an-empty-bitmap-and-drawing-though-canvas-in-android)）

```
Bitmap.Config conf = Bitmap.Config.ARGB_8888; // see other conf types
Bitmap bmp = Bitmap.createBitmap( 150, 150, conf ); // this creates a MUTABLE bitmap
Canvas cv = new Canvas( bmp );
//cv.draw... 
```

绘制后，我只需将该位图推送到 remoteViews。

希望对你也有帮助！

=)

# javascript - 特殊字符在 onchange 上分解

> ID：13174280
> 
> 赞同：0
> 
> 时间：2012-11-01T09:34:49.303
> 
> 标签：javascript

我又遇到了一个问题，因为你总是帮我解决它，所以我又来了。

在 Joomla 中，我们创建了一个网站，用于通过门户 Jomres 租用/预订别墅。

现在在后端，我们当然可以更改别墅的位置，这可以使用带有 onchange 功能的下拉框。

现在问题出在这里，例如，如果我们单击： Cala d'Hort 然后在输入字段（不可写）中，它以 Cala d 出现。它打破了撇号后的一切。

我尝试了一些编码或转义字符，但是没有用。

这背后的小Javascript是：

```
 function stext(selectid, textid) {
     var select = document.getElementById(selectid);
     var selectvalue = select.value;
     var text = document.getElementById(textid);
     text.value = selectvalue;  
  } 
```

和 HTML：

```
 <select onchange="stext('select', 'town')" id="select" class="sbox"> 
```

有没有办法让它不中断并提供全名而不是分解它？先感谢您！

杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:43:14.483

尝试查看选择框的选项是如何填充的（如果它们是用双引号插入的）。如果是这种情况，这应该有效。尝试使用控制台或警报来查看正在获取哪个值作为您的“selectValue”。如果该值已经错误，则意味着选择框中的选项已经被错误地填充。也许您可以提供示例的 jsfiddle，我们可以进一步研究它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:58:13.210

[这个 jsfiddle](http://jsfiddle.net/mj7ny/1/)使用您提供的 JavaScript 描述了一个工作和一个非工作示例。HTML如下：

```
<select id="test1" onchange="stext('test1', 'test2')">
    <option value="Cala d'Hort">Cala d'Hort</option>
    <option value='Cala d'Hort'>Cala d'Hort</option>
</select>
<input id="test2" type="text" disabled /> 
```

我的猜测是您的`option`标签中嵌套了错误的引号。

# jquery-ui - jquery.ie6hover.js 与 jQueryUI 冲突并导致 IE6 崩溃

> ID：13174281
> 
> 赞同：1
> 
> 时间：2012-11-01T09:34:53.750
> 
> 标签：jquery-ui, internet-explorer-6

我有一个使用**jquery.ie6hover.js**的网站（https://github.com/gilmoreorless/jquery-ie6hover）而且我刚刚更新到最新版本的**jQueryUI**（1.9.1）打开时这种组合会使浏览器崩溃IE6 中的页面。

调用时崩溃：

```
$.ie6hover(); 
```

这是一个jsfiddle：http: [//jsfiddle.net/umhxQ/](http://jsfiddle.net/umhxQ/)

我正在使用 Virtual Box 和 Windows XP SP3 测试 IE6。

任何想法如何防止 IE6 崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:36:56.867

我偶然发现了[**"ie7.js"**](http://code.google.com/p/ie7-js/)，这似乎可以解决问题。

它包含对 ie6 中悬停错误的修复（没有 jQueryUI 冲突）并且不再需要 jquery.ie6hover.js！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:51:50.697

ie7.js - 您已经找到的那个 - 是一个很棒的脚本。如果您只想修复悬停，这有点矫枉过正，因为 ie7.js 修复了很多东西。这很好，但是如果您不需要所有功能，那么您可能会不必要地减慢浏览器的速度。

如果您只想修复悬停，我首选的脚本是[What:hover](http://peterned.home.xs4all.nl/csshover.html)，这是我曾经为此推荐的脚本。

（当我说“曾经推荐”时，它并没有错；这是因为这些天我根本不建议支持 IE6。但如果您确实需要支持它，那么无论什么：悬停是我会使用的)

# sql-server - Hibernate hbm2ddl 不在 SQLServer 2008 上创建外键

> ID：13174286
> 
> 赞同：0
> 
> 时间：2012-11-01T09:35:26.747
> 
> 标签：sql-server, hibernate, hbm2ddl

我正在尝试通过 hibernate hbm2ddl 生成外键：

```
 hibernate.hbm2ddl.auto=update 
```

并使用以下映射：

```
 @OneToOne
   @ForeignKey(name="FK_address_nationality_id")
   private Nationality country; 
```

它创建了带有国家列但没有创建外键的表。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:56:26.463

确保在使用字段定义注释而不是属性时使用字段访问类型。

```
@Entity
@Table
@AccessType("field") 
```

特别是如果您对使用属性访问器的类进行子类化。

# nginx - Nginx 和使用 gzip 压缩组件

> ID：13174289
> 
> 赞同：1
> 
> 时间：2012-11-01T09:35:32.933
> 
> 标签：nginx, compression, components, gzip

我正在尝试提高网站的页面速度并使用“Yslow”和“Page Speed”来监控速度。两者都告诉我“使用 gzip 压缩组件”，并给出了一些 CSS 和 JavaScript 文件的列表，例如

*   /css/styles.css?v=6.5.5
*   /jquery.flexslider.js
*   /4878.js
*   /6610.js
*   /homepage.css?v=6.5.5

我们的主机通知我们，nginx 正在对所有资产进行 gzip 压缩，即使它反向代理回 Apache，并且在虚拟主机级别启用的 nginx 站点启用文件中的以下值证实了这一点：

```
gzip on;
gzip_disable msie6;
gzip_static on;
gzip_comp_level 9;
gzip_proxied any;
gzip_types text/plain text/css application/x-javascript text/xml application/xml   application/xml+rss text/javascript; 
```

这些工具没有被压缩起来是有原因的，还是事实上它们根本没有被压缩，我们需要让我们的主机添加一些额外的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:57:20.813

您的托管服务提供商声称请求将 nginx 压缩为潜在问题原因：

1.  在 nginx 服务器和您的客户端之间的网络路径上的某处有一个代理/缓存/病毒扫描器，可以去除压缩。
2.  您的浏览器会保存资产的未压缩版本，并且 yslow/pagespeed 最终会使用它（如果是这样，请确保您尝试使用空的浏览器缓存来修复它）
3.  您托管服务提供商的说法是错误的（但发布的配置位对我来说似乎没问题）

问题可能是 nginx 服务器和浏览器之间的代理或缓存去除了压缩。

一些事情要尝试：

*   尝试使用 gzip 的在线检查器检查 url，例如[http://www.whatsmyip.org/http-compression-test/](http://www.whatsmyip.org/http-compression-test/)或[http://www.dnsqueries.com/en/check_http_gzip.php](http://www.dnsqueries.com/en/check_http_gzip.php)
*   在本地检查结果是什么 （如果收到的响应被压缩，`curl --compressed --head <your-asset-url>`您应该看到 a ）`Content-Type: gzip`

# c# - 在中继器内绑定下拉菜单

> ID：13174290
> 
> 赞同：1
> 
> 时间：2012-11-01T09:35:34.203
> 
> 标签：c#, asp.net

我在`DropDownList`中继器内绑定了一个，下面是我的标记

```
 <asp:Repeater ID="Repeater2" runat="server" 
    onitemdatabound="Repeater2_ItemDataBound">
      <HeaderTemplate>
     <asp:DropDownList ID="DropDownList8" runat="server">
    <asp:ListItem>Select</asp:ListItem>
    <asp:ListItem>Left</asp:ListItem>
    <asp:ListItem>Right</asp:ListItem>
    <asp:ListItem>SubString</asp:ListItem>
   </asp:DropDownList>
   <asp:DropDownList ID="DropDownList7" runat="server">
 <asp:ListItem>1</asp:ListItem>
   <asp:ListItem>2</asp:ListItem>
   <asp:ListItem>3</asp:ListItem>
   </asp:DropDownList>
   <asp:DropDownList ID="DropDownList1" runat="server">
   </asp:DropDownList>
   <asp:DropDownList ID="DropDownList2" runat="server">
   </asp:DropDownList>
   <asp:Button ID="Button1" runat="server" Text="Button" />

   </HeaderTemplate>

  <FooterTemplate>
  <br />
   <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
 </FooterTemplate>
  </asp:Repeater> 
```

```
protected void Repeater2_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
  try
  {

      if (e.Item.ItemType == ListItemType.Header)
      {

          DataTable dt = new DataTable();
          dt = Common.LoadExample();

          DropDownList ddl = (DropDownList)e.Item.FindControl("DropDownList2");
          ddl.DataSource = dt;
          ddl.DataTextField = "Name";
          ddl.DataValueField = "Name";

      }
  }
  catch (Exception ex)
  {
      throw;

  }
} 
```

但我无法填写下拉列表，因为断点`e.Item.ItemType == ListItemType.Header`在这里跳过。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:55:43.427

对于标题行绑定，将您的代码`ItemDataBound`从`ItemCreated`

-- 更新答案 --

这仅在您添加`ItemTemplate`没有项目模板的情况下才有效，设置空白数据源将不会以预期的方式绑定网格。

请添加项目模板并绑定一些虚拟数据

# c# - 由于 asp.net-C# 中的保护级别错误而无法访问

> ID：13174293
> 
> 赞同：4
> 
> 时间：2012-11-01T09:35:53.340
> 
> 标签：c#, asp.net, c#-4.0

我有两个类'passwordsettings'和'helper'。给出了这些类。

密码设置.cs

```
public class PasswordSetting
{
    public PasswordSetting()
    {

    }

    //password age , 80, 180, 360 days
    public int Duration { get; set; }

    //password minimum length
    public int MinLength { get; set; }

    //password maximum length
    public int MaxLength { get; set; }

    //password Numbers length
    public int NumsLength { get; set; }

    //password Upper letter length
    public int UpperLength { get; set; }

    //password Special character length
    public int SpecialLength { get; set; }

    //password valid special characters
    public string SpecialChars { get; set; }
} 
```

助手.cs

```
public  class Helper
{
    public Helper()
    {        
         //TODO: Add constructor logic here        
    }

    public static PasswordSetting GetPasswordSetting()
    {
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(HttpContext.Current.Server.MapPath("~/PasswordPolicy.xml"));

        PasswordSetting passwordSetting = new PasswordSetting();

        foreach (XmlNode node in xmlDoc.ChildNodes)
        {
            foreach (XmlNode node2 in node.ChildNodes)
            {
                passwordSetting.Duration = int.Parse(node2["duration"].InnerText);
                passwordSetting.MinLength = int.Parse(node2["minLength"].InnerText);
                passwordSetting.MaxLength = int.Parse(node2["maxLength"].InnerText);
                passwordSetting.NumsLength = int.Parse(node2["numsLength"].InnerText);
                passwordSetting.SpecialLength = int.Parse(node2["specialLength"].InnerText);
                passwordSetting.UpperLength = int.Parse(node2["upperLength"].InnerText);
                passwordSetting.SpecialChars = node2["specialChars"].InnerText;
            }
        }
        return passwordSetting;
    }
} 
```

但是当我在按钮单击事件中使用它们时，会出现以下问题.. 为什么会发生这种情况？![在此处输入图像描述](../Images/30b36a6e8ab2a9a2daa8ebdb7a371ea8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:38:51.327

由于某种原因，它看起来`Helper`实际上*是*（原文如此）内的嵌套类。`PasswordStreangth`虽然`Helper`（如发布）是一个公共课程，但我的猜测`PasswordStreangth`是`internal`. 为什么是`Helper`嵌套类呢？

当然，这可能`PasswordStreangth`是您的命名空间 - 我手头没有 VS 来检查它是否会在 Intellisense 中以这种方式显示。如果是这种情况，那么大概在您正在构建的版本中实际上`Helper` *并未将其声明为公共 - 可能是代码中其他地方的更改，或者过时的构建？*

# jquery - ASP.Net 中的 curCSS 方法错误

> ID：13174296
> 
> 赞同：5
> 
> 时间：2012-11-01T09:36:02.433
> 
> 标签：jquery, jquery-ui

使用 jQuery 创建自动完成扩展程序时出现错误。错误发生在第二行。

```
function reduce(elem, size, border, margin) {
    $.each(side, function () { // error on this line
        size -= parseFloat($.curCSS(elem, "padding" + this, true))
        0;

        if (border) {
            size -= parseFloat($.curCSS(elem, "border" + this + "Width", true))
            0;
        } 
        if (margin) {
            size -= parseFloat($.curCSS(elem, "margin" + this, true))
            0;
        }
    }); 
    return size;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T10:34:42.553

来自 jQuery 1.8.0[发行说明](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)：

> $.curCSS：这个方法只是从 jQuery 1.3 开始的 jQuery.css() 的别名。尽管它从未成为文档化 API 的一部分，但已知一些外部代码使用它，也许认为它“更有效”。现在它“更多了”。

由于您使用的是 jQuery v1.8.2，因此该`$.curCSS()`功能不存在。你可以[`.css()`](http://api.jquery.com/css/)改用。

# php - 如何在codeigniter中关闭浏览器来销毁会话

> ID：13174297
> 
> 赞同：10
> 
> 时间：2012-11-01T09:36:03.280
> 
> 标签：php, codeigniter, session

最近我用 codeigniter 开发了一个 web 应用程序。我在那里严重面临与会话相关的问题。

**问题场景：**

如果用户 A 登录到应用程序，则用户 ID 在会话中设置。完成任务后，用户 A 关闭了浏览器并离开了计算机。过了一会儿，用户 B 过来打开浏览器，看到应用程序处于登录状态。或者当用户 B 写下 url 并按 enter 时，它直接重定向到应用程序，而无需使用上一个会话进行任何身份验证。

我为会话使用了以下配置：

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 1800;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = FALSE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

现在我的问题是如何通过在 codeigniter 中关闭浏览器或浏览器选项卡来销毁所有会话？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-28T07:55:31.950

编辑`config.php`文件并设置`sess_expire_on_close`为`true`.

例如

```
$config['sess_expire_on_close'] = TRUE; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T10:20:38.793

您可以使用 javascript 和异步请求。当您关闭窗口时，会调用 window.onunload 的处理程序

```
var unloadHandler = function(e){
        //here ajax request to close session
  };
window.unload = unloadHandler; 
```

解决重定向问题，php端可以使用计数器

```
 class someController  extends Controller {

   public function methodWithRedirection(){

        $this->session->set_userdata('isRedirection', 1);
        //here you can redirect  
   }
}
class homeController extends Controller{
   public function closeConnection(){
        $this->load->library('session');
        if($this->session->userdata('isRedirection')!== 1){
            //destroy session
         }
      }
   } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-16T19:55:37.360

添加注销按钮。

让该按钮使用 CI 的[内置销毁功能](https://www.codeigniter.com/user_guide/libraries/sessions.html?highlight=session%20destroy#CI_Session::sess_destroy)销毁会话。

```
$this->session->sess_destroy(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-06T20:13:13.327

好吧，我不知道你是否已经有了解决方案，但我发现自己在 CodeIgniter 3.0 版中处于相同的场景中。在`config.php`中，转到`Session Variables`部分，您可以设置：

```
$config['sess_expiration'] = 0; 
```

> [**sess_expiration**](https://www.codeigniter.com/user_guide/libraries/sessions.html#session-preferences)：您希望会话持续的秒数。如果您想要一个未过期的会话（直到浏览器关闭），请将值设置为零：0

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-02T15:10:48.077

看看这个，看看这是否有帮助。

[https://github.com/EllisLab/CodeIgniter/wiki/PK-Session](https://github.com/EllisLab/CodeIgniter/wiki/PK-Session)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-18T06:05:05.230

在**$config.php**文件 中

```
change  $config['sess_expiration'] = 7200; 
```

**至**

```
$config['sess_expiration'] = 0; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-28T07:19:34.763

只需按照 Codeigniter[文档](http://localhost/yogapanel/user_guide/libraries/sessions.html#session-preferences)`sess_expiration =0`中的说明在文件中设置`application/config/config.php`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-26T22:15:32.400

打开通用配置文件**application/config/config.php**，搜索 $config['<strong>sess_expiration']

改变

```
$config['sess_expiration'] = 7200; 
```

至

```
$config['sess_expiration'] = -1; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-07T08:54:31.370

对于 CI-3.0.4，在“config.php”中找到以下项目并进行相应设置

```
$config['sess_expiration'] = -1;
$config['sess_time_to_update'] = -1; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-10T18:07:40.793

我用这种方式。这可以帮助你吗？

改变

```
$config['sess_expiration'] = 7200; 
```

上面代码的结果是：

[![在此处输入图像描述](../Images/012bd5b22100e58a1a894d7770541682.png)](https://i.stack.imgur.com/Nt4VR.png)

至

```
$config['sess_expiration'] = time() + 7200; 
```

换行的结果是：

[![在此处输入图像描述](../Images/186d0ad515460d5428806714eb189a2b.png)](https://i.stack.imgur.com/it0Wt.png)

现在，如果您关闭浏览器窗口，会话将被自动删除。

# mysql - oracle select语句重用？

> ID：13174298
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:36:09.370
> 
> 标签：mysql, database, oracle, select

这是获取天数的提取 sql

```
AND S.Date          IN

  (
    SELECT Date
    FROM
      (
      SELECT Date,
        ROW_NUMBER() OVER (ORDER BY Date DESC )-1 Day
      FROM CALENDAR_DIM
      WHERE TYPE               = 'ABC'
      )
    WHERE BUS_DAY BETWEEN 0 AND 2
  ) 
```

我想在我的 sql 的两个部分中运行此代码两次。如果不粘贴相同的代码，我怎么能做到这一点。另外..我怎么能重写上面的代码？我在性能方面遇到了一些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:45:43.310

**解决方案 1**：使用 WITH 语句

```
WITH dateQuery  AS (
    SELECT Date
    FROM
      (
      SELECT Date,
        ROW_NUMBER() OVER (ORDER BY Date DESC )-1 BUS_DAY
      FROM CALENDAR_DIM
      WHERE TYPE = 'ABC'
      )
    WHERE BUS_DAY BETWEEN 0 AND 2)

SELECT xxx
FROM yyy
WHERE zzz
AND s.Date IN (SELECT Date FROM dateQuery) 
```

唯一要重复的部分将是

```
SELECT Date FROM dateQuery 
```

**解决方案2**：创建一个视图

```
CREATE OR REPLACE VIEW V_DATE_QUERY AS
(   SELECT Date
    FROM
      (
      SELECT Date,
        ROW_NUMBER() OVER (ORDER BY Date DESC )-1 BUS_DAY
      FROM CALENDAR_DIM
      WHERE TYPE = 'ABC'
      )
    WHERE BUS_DAY BETWEEN 0 AND 2) 
```

并以同样的方式使用它

```
AND s.Date IN (Select Date FROM V_DATE_QUERY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:40:20.937

您可以像这样在数据库中创建一个[视图：](https://stackoverflow.com/questions/256700/what-is-a-view-in-oracle)

```
CREATE VIEW view_date
AS
SELECT Date,
  ROW_NUMBER() OVER (ORDER BY Date DESC )-1 Day
FROM CALENDAR_DIM
WHERE TYPE               = 'ABC' 
```

现在您可以使用：

```
AND S.Date          IN

  (
    SELECT Date
    FROM view_date
    WHERE BUS_DAY BETWEEN 0 AND 2
  ) 
```

# c - 反汇编对象和可执行文件的区别

> ID：13174304
> 
> 赞同：2
> 
> 时间：2012-11-01T09:36:56.163
> 
> 标签：c, linker, gnu, disassembly, object-files

基本上，我曾经`objdump -D`反汇编一个目标文件和一个 ELF 文件。我看到两者之间的主要区别是。

我看到（各个段的）目标文件中的指令有一个以**0**开头的地址。因此， 的连续地址**偏移**某个值，可能取决于对应于该特定指令**的操作码的长度。**

```
Disassembly of section .text:
00000000 <main>:
0:   8d 4c 24 04             lea    0x4(%esp),%ecx
4:   83 e4 f0                and    $0xfffffff0,%esp
7:   ff 71 fc                pushl  -0x4(%ecx)      
a:   55                      push   %ebp 
```

另一方面，对于 ELF 罚款，我看到指令的**32 位地址空间**`main`。另外，如果我在我的程序中打印地址。相当于我反汇编的ELF中的地址。

```
08048394 <main>:
8048394:       8d 4c 24 04             lea    0x4(%esp),%ecx
8048398:       83 e4 f0                and    $0xfffffff0,%esp
804839b:       ff 71 fc                pushl  -0x4(%ecx)
804839e:       55                      push   %ebp 
```

这里的问题是。

*   ELF 文件中的地址实际上指的是什么？
*   链接器如何计算它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:45:36.100

ELF 文件包含根据可执行文件的首选加载地址链接在一起的代码（您可以通过链接器选项更改首选项）。您看到的地址是 objdump 针对该地址计算的，这是 ELF 格式的一部分。

目标代码（还）没有加载地址，因为它没有链接到可加载的图像中。一旦它与链接器（以及其余的目标代码和共享对象引用）缝合在一起，最终输出会将所有代码移动到相对于首选加载地址的位置（有点......加载器实际上是在加载 ELF 图像以供执行）。[建议进一步阅读](http://gcc.gnu.org/ml/gcc/2003-06/msg01781.html)（那里有大量链接）

# iphone - 我想使所有 [self performSelector:@selector(showLyrics) withObject:nil afterDelay:2];

> ID：13174306
> 
> 赞同：0
> 
> 时间：2012-11-01T09:37:05.017
> 
> 标签：iphone, objective-c, ios

我正在添加

```
[self performSelector:@selector(showLyrics) withObject:nil afterDelay:20]; 
```

但如果用户重新启动歌曲，则不应执行此选择器。所以我只想知道如何取消它。因为 20 秒后它会被调用，但我不希望这样，然后重新安排

```
 [self performSelector:@selector(showLyrics) withObject:nil afterDelay:20]; 
```

我有这么多

```
[self performSelector:@selector(showLyrics) withObject:nil afterDelay:2]; 
```

我想取消我之前安排的所有这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:44:47.800

```
[[NSRunLoop currentRunLoop] cancelPerformSelector:@selector(showLyrics) 
                                           target:self
                                         argument:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:41:00.097

您可以使用`NSTimer`而不是`performSelector:withObject:afterDelay:`

`NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:20 target:self selector:@selector(showLyrics) userInfo:nil repeats:NO];`

取消：

`[timer invalidate];`

但是您可能希望在每次开始之前使计时器无效，或者将计时器保留在数组中并遍历它们以取消所有计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:43:02.217

使用 an`NSTimer`并保存对它的引用而不是`performSelector`. ~~Afaik`performSelector`无法取消。~~ **编辑：**显然*可以*取消，请参阅 omz 的回答...

```
self.showLyricsTimer = [NSTimer scheduledTimerWithTimeInterval:20.0
                                                        target:self
                                                      selector:@selector(showLyrics)
                                                      userInfo:nil
                                                       repeats:NO]; 
```

要取消您使用的计时器：

```
[self.showLyricsTimer invalidate]; 
```

`viewWillDisappear`但是，当您的视图在回调中消失 fe 时，也要小心使计时器无效，因为`NSTimer`它保留了它的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T10:14:54.180

> 取消之前使用 performSelector:withObject:afterDelay 注册的执行请求：

`+ (void)cancelPreviousPerformRequestsWithTarget:(id)aTarget selector:(SEL)aSelector object:(id)anArgument`

看来这就是你要找的或者你要找的~~

# mysql - MySQL Workbench：为什么是默认的 VARCHAR (45)？

> ID：13174307
> 
> 赞同：20
> 
> 时间：2012-11-01T09:37:17.543
> 
> 标签：mysql, mysql-workbench

当我开始在纸上设计我的数据库时，我通常将 varchar 长度设置为 32、64、128、256 等。

但是当我开始在 MySQL Workbench 5.2ce 上工作时，我注意到每次将字段的类型设置为 varchar 时，表单都会默认将其大小设置为 45。

*这是推荐值吗？*

也许从历史上看，45 是该`varchar`类型最常用的尺寸。如果是这样，那为什么是 45？为什么不是 48 或 47（也许它需要一个额外的词来保存我猜的东西）？

我不明白。也许我应该将字段类型设置`varchar(29)`为存储长度为 20 个字符的字符串？

我进行了搜索，发现许多人将它们的长度设置为 255（不是 256）。这会是一个严重的问题吗？

# audio-streaming - 音频转码

> ID：13174312
> 
> 赞同：0
> 
> 时间：2012-11-01T09:37:40.737
> 
> 标签：audio-streaming, transcoding, audio-player

我们正在设计一个需要支持从客户端上传短音频文件的应用程序（wav，aiff，ogg，flac，mp3，...）

它还应该支持从服务器下载歌曲后在客户端应用程序中播放这些歌曲（目前不需要流式传输）并将它们导出到用户的本地计算机。

我们应该以什么格式将这些文件存储在服务器中？

例如，如果一个用户上传了一个 wav 文件，我们应该将它作为 mp3 文件存储在服务器中吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:45:25.800

通常，如果您有空间，您会希望保留原始质量资产。从一种有损格式转换为另一种会降低质量。

话虽如此，如果您获得 WAV 文件，您可以将其无损压缩为 FLAC 并减少 30-50% 的文件大小。（不要将有损压缩文件（例如 MP3）转换为 FLAC，因为您实际上会使文件变大。）

对于转码部分，我建议查看 FFMPEG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:42:51.277

没有最好的格式。取决于用例。让我们分析你的

*   用户将从客户端上传各种格式的文件
*   您希望用户客户端在下载文件后播放文件

优化参数将是 - 音频质量 - 下载文件所需的时间（文件大小） - 未来的努力和设备支持

音频质量：如果您以合理的比特率正确转码，则不会有太多的质量损失。无论如何，这就是 mp3/aac 压缩的重点。除非您首先拥有出色的音频设备和良好的耳朵，否则您无法分辨 128Kbps AAC 44.1 KHz 和原始样本之间的区别。因此，除非这是内容制作应用程序，否则不要太担心。确保您提供合理的质量。

文件大小：与压缩内容相比，Wav 文件会很大。

面向未来和设备支持：

最常支持的音频格式是 mp3 和 aac。AAC 比 MP3 好。但是你应该得到一个好的编码器（比如nero）。如果您的客户是 PC 的 HE-AAC 是一个不错的选择。如果是移动设备，请坚持使用 AAC-LC。（其中许多不支持 HE-aac）将来如果您添加流式传输（我猜您会，这是下一个合乎逻辑的步骤），选择变得更加重要。并非所有设备都支持 mp3 流媒体。AAC 流媒体更为常见。

给出以上所有我会说去AAC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T09:48:33.610

如果您使用转码和存储方法会更好，1）这将使您能够确保您已将所需的元数据和其他技术细节与用户上传的音频相关联，然后再将它们存储到数据库中

2) 拥有一种通用的音频格式还可以让您轻松管理数据

# pascal - 在 writeln 函数中写撇号 - Pascal

> ID：13174313
> 
> 赞同：7
> 
> 时间：2012-11-01T09:37:42.817
> 
> 标签：pascal

如何使用该`writeln`函数在 Pascal 中打印撇号？

例子：

```
writeln('My brother's book'); 
```

不会工作，因为没有`s book`“写”功能，所以编译器返回一个错误：

```
Fatal: Syntax error, ")" expected but "identifier S" found
Fatal: Compilation aborted 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T09:56:10.930

根据[Free Pascal Reference](http://www.freepascal.org/docs-html/ref/refse8.html)：单引号字符可以通过键入两次嵌入到字符串中：

```
writeln('By brother''s book'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T15:42:41.267

在 Dev-Pascal 1.9.2 中，您将需要三个`'''`，例如：

```
writeln ('My brother'''s book'); 
```

# bash - bash - 导出不起作用

> ID：13174314
> 
> 赞同：0
> 
> 时间：2012-11-01T09:37:42.873
> 
> 标签：bash

我错过了一些非常基本的东西。在 Mac OS X 下。我试过 chmod 0777 setdir.bsh。一定是我的设置有问题。

```
#!/bin/bash                                                                                       
export proj=/Users/RParadox/projects/testproject/
echo $proj 
```

结果：

```
$ bash setdir.bsh
/Users/RParadox/projects/testproject/
echo $proj
nothing?? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:39:16.103

`export`使变量可用于*子*进程，而不是父进程。

你能[代替](http://ss64.com/bash/period.html)这个文件吗？例如

```
$ . setdir.bsh 
```

这将在当前进程中执行文件，即 shell 本身。

# facebook - sencha 中的子浏览器

> ID：13174316
> 
> 赞同：0
> 
> 时间：2012-11-01T09:37:48.893
> 
> 标签：facebook, twitter, sencha-touch, extjs, sencha-touch-2

在我的 Jquery 移动应用程序中，我使用子浏览器进行 Facebook 和 twitter 身份验证，我要求用户在 facebook（在 childbrowser 中）登录，并且在 childbrowser onlocation 更改中我正在执行一个函数，我正在获取 facebook 用户名以在我的数据库中注册。

现在我正在尝试在没有子浏览器的 sencha 中执行此操作。

[我之前（在这里](https://stackoverflow.com/questions/13081277/alternative-for-child-browser-in-sencha-mobile-application)）问过这个问题，但我没有得到任何答案，甚至没有回复。

**有什么办法可以在没有子浏览器的情况下做到这一点，或者我必须使用子浏览器？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:14:50.527

我使用 window.open() 进行身份验证...我使用 php(yii) 后端并让 yii oAuth 服务负责身份验证

# android - 将位图保存到 SD 卡

> ID：13174318
> 
> 赞同：4
> 
> 时间：2012-11-01T09:37:52.000
> 
> 标签：android, bitmap, outputstream, fileoutputstream

我有一个位图图像，我必须将其存储在 SD 卡的文件夹中，我的代码如下所示。它按预期创建文件夹和文件，但图像没有存储到文件中，它仍然是一个空文件......谁能告诉我出了什么问题？

```
Bitmap merged = Bitmap.createBitmap(mDragLayer.getChildAt(0).getWidth(), mDragLayer.getChildAt(0).getHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(merged);

// save to folder in sd card
try {
    File imagesFolder = new File(Environment.getExternalStorageDirectory(), "folder");
    if(!imagesFolder.exists())
        imagesFolder.mkdirs();
    int imageNum;
    if(imagesFolder.list()==null)
        imageNum = 1;
    else
        imageNum = imagesFolder.list().length + 1;

    String fileName = "file_" + String.valueOf(imageNum) + ".jpg";
    File output = new File(imagesFolder, fileName);
    while(output.exists()){
        imageNum++;
        fileName = "file_" + String.valueOf(imageNum) + ".jpg";
        output = new File(imagesFolder, fileName);
    }

    OutputStream fOut = new FileOutputStream(output);
    merged.compress(Bitmap.CompressFormat.JPEG, 100, fOut);
    fOut.flush();
    fOut.close();

    Toast.makeText(getApplicationContext(), "Saved", Toast.LENGTH_SHORT).show();

   } catch (FileNotFoundException e) {
    e.printStackTrace();
   } catch (IOException e) {
    e.printStackTrace();
   }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T09:41:54.900

首先给AndroidManifest.xml添加权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

然后在Java文件中写下如下。

```
 String extr = Environment.getExternalStorageDirectory().toString();
            File mFolder = new File(extr + "/MyApp");

            if (!mFolder.exists()) {
                mFolder.mkdir();
            }

            String strF = mFolder.getAbsolutePath();
            File mSubFolder = new File(strF + "/MyApp-SubFolder");

            if (!mSubFolder.exists()) {
                mSubFolder.mkdir();
            }

            String s = "myfile.png";

            f = new File(mSubFolder.getAbsolutePath(),s); 
```

**更新**

```
 String strMyImagePath = f.getAbsolutePath();
             FileOutputStream fos = null;
             try {
                 fos = new FileOutputStream(f);
                 bitmap.compress(Bitmap.CompressFormat.PNG,70, fos);

                 fos.flush();
                 fos.close();
              //   MediaStore.Images.Media.insertImage(getContentResolver(), b, "Screen", "screen");
             }catch (FileNotFoundException e) {

                 e.printStackTrace();
             } catch (Exception e) {

                 e.printStackTrace();
             } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T10:38:50.080

不要让复杂的代码变得困难，它真的很简单，请尝试下面的代码。

在您的 SD 卡中创建第一个目录：

```
public static String strpath =  android.os.Environment.getExternalStorageDirectory().toString();
public static String dirName = "DIR_NAME";

File makeDirectory = new File(strpath+"/"+dirName);
makeDirectory.mkdir(); 
```

然后你应该制作两个 String Var，如下所示：

```
String filename =  "yourImageName".jpg";
String dirpath =strpath + "/"+dirName + "/"; 
```

使文件变量：

```
File storagePath =  new File(dirpath);
File myImage = new File(storagePath, filename);
outStream = new FileOutputStream(myImage);  
outStream.write(data);
outStream.close(); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-01T09:44:54.603

你只需要一个位图

你必须传递一个路径来存储图像

```
Bitmap b = pagesView.getDrawingCache();
b.compress(CompressFormat.JPEG, 100, new FileOutputStream(Environment.getExternalStorageDirectory() + "/NameOfFile.jpg")); 
```

并且您必须在清单文件中添加权限..

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

# javascript - 在 javascript 中使用数组

> ID：13174320
> 
> 赞同：3
> 
> 时间：2012-11-01T09:37:58.457
> 
> 标签：javascript, arrays, string

我有一个数组

```
var arr = ["one","two","three","four"]; 
```

是否可以通过一些正则表达式来转换它

```
"one","two","three","four" 
```

结果不应该是整个字符串，而是逗号分隔的字符串。

有什么建议么 ？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:49:10.200

> `function func(){`
>    `var arr = ["one","two","three","four"];`
>    `var result = "";`
>    `for (var i = 0; i <= arr.length - 1; i++) {`
>        `result += '"' + arr[i] + '",';`
>    `}`
>    `result = result.substring(0, result.length - 1);`
>    `alert(result);`
> `}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:44:14.930

您不能将其转换为逗号分隔的字符串，只能转换为整个字符串。

用于`join()`：

```
var result = "\"" + array.join("\",\"") + "\""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:58:54.923

做这个：

```
var arr = ["one","two","three","four"];
var str = '"' + arr.join('","') + '"';
console.log(str); 
```

[演示](http://jsfiddle.net/ZYG7c/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:40:36.263

```
<!DOCTYPE html>
<html>
<body>

<p id="demo">Click the button to convert the array into a String.</p>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.toString();
var x=document.getElementById("demo");
x.innerHTML=fruits;
}
</script>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-01T09:40:45.117

在 for 循环中，您可以分别对值执行任何操作。

```
var arr = ["one","two","three","four"];
for (var i = 0; i <= arr.length; i++) {
    alert(arr[i]);
} 
```

# ios - .DS_Store 文件跳过

> ID：13174322
> 
> 赞同：3
> 
> 时间：2012-11-01T09:38:16.913
> 
> 标签：ios, nsfilemanager

在我的应用程序中，我使用 NSFileManager 使用以下代码获取文件夹中的文件数

```
 NSFileManager *manager=[NSFileManager defaultManager];
 NSString *path;
 int numberofFiles=[[manager contentsOfDirectoryAtPath:path error:nil] count];
 numberofFiles=numberofFiles-1; //number of files except .DS_Store 
```

但我的问题是文件 .DS_Store 并不总是默认创建，那时我得到的计数少于该目录中实际存在的文件的计数。

那么 NSFileManager 中是否有一种方法可以返回不包括 .DS_Store 的文件数组，或者我必须使用 -IsEqualToString 方法手动排除，否则是否有任何选项可以创建没有 .DS_Store 文件的新目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:41:34.463

显式查找`.DS_Store`文件并在找到时调整计数：

```
NSFileManager *manager=[NSFileManager defaultManager];
NSString *path = ...;       // Presumably this is a valid path?
NSArray *contents = [manager contentsOfDirectoryAtPath:path error:nil];
NSUInteger numberOfFiles = [contents count];
if ([contents indexOfObject:@".DS_Store"] != NSNotFound)
    numberOfFiles--; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T04:03:29.903

试试这个..它对我有用..

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSFileManager *manager = [NSFileManager defaultManager];
NSArray *imageFilenames = [manager contentsOfDirectoryAtPath:documentsDirectory error:nil];

for (int i = 0; i < [imageFilenames count]; i++)
    {

    NSString *imageName = [NSString stringWithFormat:@"%@/%@",documentsDirectory,[imageFilenames objectAtIndex:i] ];

        if (![[imageFilenames objectAtIndex:i]isEqualToString:@".DS_Store"])
        {
          UIImage *myimage = [UIImage imageWithContentsOfFile:imageName];
          UIImageView *imageView = [[UIImageView alloc] initWithImage:_myimage];
        }
    } 
```

# vb.net - vb2005中图像的对比度

> ID：13174323
> 
> 赞同：0
> 
> 时间：2012-11-01T09:38:22.670
> 
> 标签：vb.net, image, visual-studio-2005, contrast

[在 C# 中有效地调整图像的对比度](https://stackoverflow.com/questions/3115076/adjust-the-contrast-of-an-image-in-c-sharp-efficiently)

上述问题的解决方案在 vb 2005 中不起作用

我需要vb2005中的解决方案

这是下面的c#代码

公共静态位图调整对比度（位图图像​​，浮点值）

{

```
Value = (100.0f + Value) / 100.0f;
Value *= Value;
Bitmap NewBitmap = (Bitmap)Image.Clone();
BitmapData data = NewBitmap.LockBits(
    new Rectangle(0, 0, NewBitmap.Width, NewBitmap.Height), 
    ImageLockMode.ReadWrite,
    NewBitmap.PixelFormat);

unsafe
{
    for (int y = 0; y < NewBitmap.Height; ++y)
    {
        byte* row = (byte*)data.Scan0 + (y * data.Stride);
        int columnOffset = 0;
        for (int x = 0; x < NewBitmap.Width; ++x)
        {
            byte B = row[columnOffset];
            byte G = row[columnOffset + 1];
            byte R = row[columnOffset + 2];

            float Red = R / 255.0f;
            float Green = G / 255.0f;
            float Blue = B / 255.0f;
            Red = (((Red - 0.5f) * Value) + 0.5f) * 255.0f;
            Green = (((Green - 0.5f) * Value) + 0.5f) * 255.0f;
            Blue = (((Blue - 0.5f) * Value) + 0.5f) * 255.0f;

            int iR = (int)Red;
            iR = iR > 255 ? 255 : iR;
            iR = iR < 0 ? 0 : iR;
            int iG = (int)Green;
            iG = iG > 255 ? 255 : iG;
            iG = iG < 0 ? 0 : iG;
            int iB = (int)Blue;
            iB = iB > 255 ? 255 : iB;
            iB = iB < 0 ? 0 : iB;

            row[columnOffset] = (byte)iB;
            row[columnOffset + 1] = (byte)iG;
            row[columnOffset + 2] = (byte)iR;

            columnOffset += 4;
        }
    }
}

NewBitmap.UnlockBits(data);

return NewBitmap; 
```

}

&这里是vb2005代码

公共共享函数 AdjustContrast(Image As Bitmap, Value As Single) As Bitmap

```
Value = (100F + Value) / 100F
Value *= Value
Dim NewBitmap As Bitmap = DirectCast(Image.Clone(), Bitmap)

Dim data As BitmapData = NewBitmap.LockBits(New Rectangle(0, 0, NewBitmap.Width, NewBitmap.Height), ImageLockMode.ReadWrite, NewBitmap.PixelFormat)

For y As Integer = 0 To NewBitmap.Height - 1
    Dim row As Pointer(Of Byte) = CType(data.Scan0, Pointer(Of Byte)) + (y * data.Stride)
    Dim columnOffset As Integer = 0
    For x As Integer = 0 To NewBitmap.Width - 1
        Dim B As Byte = row(columnOffset)
        Dim G As Byte = row(columnOffset + 1)
        Dim R As Byte = row(columnOffset + 2)

        Dim Red As Single = R / 255F
        Dim Green As Single = G / 255F
        Dim Blue As Single = B / 255F
        Red = (((Red - 0.5F) * Value) + 0.5F) * 255F
        Green = (((Green - 0.5F) * Value) + 0.5F) * 255F
        Blue = (((Blue - 0.5F) * Value) + 0.5F) * 255F

        Dim iR As Integer = CInt(Red)
        iR = If(iR > 255, 255, iR)
        iR = If(iR < 0, 0, iR)
        Dim iG As Integer = CInt(Green)
        iG = If(iG > 255, 255, iG)
        iG = If(iG < 0, 0, iG)
        Dim iB As Integer = CInt(Blue)
        iB = If(iB > 255, 255, iB)
        iB = If(iB < 0, 0, iB)

        row(columnOffset) = CByte(iB)
        row(columnOffset + 1) = CByte(iG)
        row(columnOffset + 2) = CByte(iR)

        columnOffset += 4
    Next
Next

NewBitmap.UnlockBits(data)

Return NewBitmap 
```

结束功能

暗行作为指针（字节）= CType（数据.Scan0，指针（字节））+（y * data.Stride）

上面的行给出了错误，因为 vb 不支持

暗淡的行作为指针（字节）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T23:26:37.190

这是我的转换尝试。我正在使用[`IntPtr`](http://msdn.microsoft.com/en-us/library/5he14kz8.aspx)数据结构来处理持有未管理的指针并进行指针添加以获得`IntPtr`每一行的指针。然后当它通过行时，我使用[Marshal.ReadByte](http://msdn.microsoft.com/en-us/library/fzhkh8kh.aspx)和[Marshal.WriteByte](http://msdn.microsoft.com/en-us/library/ms146670.aspx)方法来处理读取和写入非托管数据。我测试过，它似乎工作。

```
value = (100.0F + value) / 100.0F
    value *= value
    Dim NewBitmap As Bitmap = DirectCast(Image.Clone(), Bitmap)

    Dim data As BitmapData = NewBitmap.LockBits(New Rectangle(0, 0, NewBitmap.Width, NewBitmap.Height), ImageLockMode.ReadWrite, NewBitmap.PixelFormat)

    For y As Integer = 0 To NewBitmap.Height - 1

        Dim RowPtr = IntPtr.Add(data.Scan0, y * data.Stride)

        Dim columnOffset As Integer = 0
        For x As Integer = 0 To NewBitmap.Width - 1
            Dim B As Byte = System.Runtime.InteropServices.Marshal.ReadByte(RowPtr, columnOffset)
            Dim G As Byte = System.Runtime.InteropServices.Marshal.ReadByte(RowPtr, columnOffset + 1)
            Dim R As Byte = System.Runtime.InteropServices.Marshal.ReadByte(RowPtr, columnOffset + 2)

            Dim Red As Single = R / 255.0F
            Dim Green As Single = G / 255.0F
            Dim Blue As Single = B / 255.0F
            Red = (((Red - 0.5F) * value) + 0.5F) * 255.0F
            Green = (((Green - 0.5F) * value) + 0.5F) * 255.0F
            Blue = (((Blue - 0.5F) * value) + 0.5F) * 255.0F

            Dim iR As Integer = CInt(Red)
            iR = If(iR > 255, 255, iR)
            iR = If(iR < 0, 0, iR)
            Dim iG As Integer = CInt(Green)
            iG = If(iG > 255, 255, iG)
            iG = If(iG < 0, 0, iG)
            Dim iB As Integer = CInt(Blue)
            iB = If(iB > 255, 255, iB)
            iB = If(iB < 0, 0, iB)

            System.Runtime.InteropServices.Marshal.WriteByte(RowPtr, columnOffset, CByte(iB))
            System.Runtime.InteropServices.Marshal.WriteByte(RowPtr, columnOffset + 1, CByte(iG))
            System.Runtime.InteropServices.Marshal.WriteByte(RowPtr, columnOffset + 2, CByte(iR))

            columnOffset += 4
        Next

    Next

    NewBitmap.UnlockBits(data) 
```

# facebook - Facebook Graph API 可以编辑 Facebook 事件吗？

> ID：13174328
> 
> 赞同：0
> 
> 时间：2012-11-01T09:38:57.477
> 
> 标签：facebook

我试图通过图形 api 创建 facebook 事件：

```
FB.api('/123/events', 'POST', {
      name: 'Moon',
      start_time: '2012-11-05T00:00:00+0700',
      end_time: '2012-11-16T00:00:00+0700',
      location: 'My country',
      description: 'Mooncake',
      privacy_type: 'OPEN'
}, function (res) {
    console.info('create event: ', res);
}); 
```

“123”是我的脸书账号。

事件已成功创建，响应事件 id = "456"

我试图更新它：

```
FB.api('/456', 'POST', {
    name: 'HoneyMoon'

}, function (res) {
    console.info('edit event: ', res);
}); 
```

但是，我无法更新它，这是 facebook 的回复：

```
Object { message="(#200) Permissions error", type="OAuthException", code=200} 
```

我确定我是该事件的管理员。

你能帮我回答这个问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:03:31.383

哦，是的，我发现了问题。

请在应用程序 > 设置 > 高级中启用“事件时区”迁移。

# jquery - jquery ul 列表过滤器仅在搜索关键字连续/连续时有效

> ID：13174329
> 
> 赞同：1
> 
> 时间：2012-11-01T09:38:57.163
> 
> 标签：jquery, search, filter

我对从 Internet 获取并为我的目的修改它的 jquery 过滤器功能没有什么问题。

[jsFiddle 示例](http://jsfiddle.net/TKL9Y/)

这是代码：

```
 (function ($) {
// custom css expression for a case-insensitive contains()
jQuery.expr[':'].Contains = function(a,i,m){
return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
};

function listFilter(header, list) { // header is any element, list is an unordered list
// create and add the filter form to the header
var form = $("<form>").attr({"class":"filterform","action":"#"}),
input = $("<input>").attr({"class":"filterinput","type":"text", "value":"Live-Filterfunktion"});
$(form).append(input).appendTo(header);
$(input)
.change( function () {

var filter = $(this).val().replace(/\s+/g, '').toLowerCase();

$('.serien a').each(function(i, el){
    text = $(el).text().replace(/\s+/g, '').toLowerCase();
    index = text.indexOf(filter);
    if(index != -1){
        // The substring is contained -> show parent
        //console.log($(this).attr('id')+' contains '+filter);
        //$(this).find("a:Contains(" + filter + ")").parent().fadeIn();
        $(this).parent().show();

    }else{
        // The substring is not contained -> hide parent
        //console.log($(this).attr('id')+' does not contain '+filter);
        //$(this).find("a:not(:Contains(" + filter + "))").parent().fadeOut();
        $(this).parent().hide();
    }
});

return false;
})
.keyup( function () {
// fire the above change event after every letter
$(this).change();
});
}
//ondomready
$(function () {
listFilter($(".filter"), $(".list"));
});

$(function() {
    $(".filterinput").focus(function() {
      $(this).val('')
      $(this).change();

      });
 });

}(jQuery)); 
```

过滤器效果很好，我什至让它忽略了空格。但是我有一个问题我无法解决。仅当搜索关键字在一行中时，过滤器的匹配才有效。

[jsFiddle 链接](http://jsfiddle.net/TKL9Y/)的示例

输入输入字段“John Wayne”甚至“johnwayne”，它工作正常！但是现在键入“John Tayler”，它不起作用，因为搜索关键字不是连续/连续，但列表包含两个关键字。我试了又试，但我无法让它工作。

所以我希望我能在这里得到一些帮助，那就太好了。对不起，我来自波兰的英语不好。

问候！

# solr - Solr：在 facet.missing 的上下文中，“空值”是否与“无值”相同？

> ID：13174332
> 
> 赞同：0
> 
> 时间：2012-11-01T09:39:15.943
> 
> 标签：solr, faceted-search

我正在努力在网站上实现搜索功能，为此我正在使用 Solr。一切正常，但我对字段的**facet.missing**参数有点麻烦。

该字段可能具有值**A**，**C**或只是`null`。也就是说，该字段存在于所有文档中，但是当没有值时，该值为`null`。

关于**facet.missing**参数，文档说“[...] 对字段 [...] 没有值的所有匹配结果的计数。”。但是，“没有价值”是什么意思？这是否意味着该字段根本不存在于文档中？它是否认为`null`空字符串和/或其他东西是“没有价值”？

就像现在一样，`null`这似乎不是“无价值”，因为**facet.missing**不排除字段值为 的文档的计数`null`。但是，我想听听是否有人对此有更深入的了解？

# xml - metasploit 的 xmlrpc 的 xml 格式

> ID：13174335
> 
> 赞同：0
> 
> 时间：2012-11-01T09:39:28.167
> 
> 标签：xml, xml-rpc, metasploit

我正在尝试以表单（XML）的形式输出 scapy，我可以将它发送到 metasploit 发现数据库的 XMLRPC 接口（已经完成）。问题不在于信息的转换，而是我正在努力寻找有关 xml 文件外观的信息。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:48:35.563

似乎没有关于 xml 外观的文档，因此 metasploit 接受它。

一个小的解决方法是采用公认的 xml 格式，例如 nikto 的格式，并将您的信息伪装成 nikto 扫描。Metasploit 会很乐意接受这些信息。

# groovy - 使用带有 void 方法的参数化测试

> ID：13174338
> 
> 赞同：2
> 
> 时间：2012-11-01T09:39:43.293
> 
> 标签：groovy, spock

我不明白如何使用 spock 为 void 方法设置参数化测试。这是我对链表的简单测试用例：

```
@Unroll
def "should delete the element #key and set the list size to #listSize"(key, listSize) {
    given:
    list.insert(6)
    list.insert(12)
    list.insert(33)

    expect:
    def deletedKey = list.delete(key)
    list.size() == listSize

    where:
    key || listSize
    6   || 2
    12  || 2
    33  || 2
    99  || 3
} 
```

该方法`delete()`是一个 void 方法，但如果我没有明确获得返回值，则测试失败。

这实际上是有效的：

```
expect:
def deletedKey = list.delete(key)
list.size() == listSize 
```

虽然这不是：

```
expect:
list.delete(key)
list.size() == listSize 
```

测试报告抱怨null

```
Condition not satisfied:

list.delete(key)
|    |      |
|    null   12
com.github.carlomicieli.dst.LinkedList@5c533a2 
```

我该如何处理这种情况？我想在调用删除方法后测试删除检查列表状态的结果。

谢谢，卡罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:47:49.703

如果你使用`when`and`then`而不是它会起作用`expect`吗？

```
@Unroll
def "should delete the element #key and set the list size to #listSize"(key, listSize) {
    given:
    list.insert(6)
    list.insert(12)
    list.insert(33)

    when:
    list.delete(key)

    then:
    list.size() == listSize

    where:
    key || listSize
    6   || 2
    12  || 2
    33  || 2
    99  || 3
} 
```

# c++ - 根据 Stroustrup 的向量与列表

> ID：13174339
> 
> 赞同：14
> 
> 时间：2012-11-01T09:39:49.783
> 
> 标签：c++, list, stl, vector

> **可能重复：**
> [您何时更喜欢使用 std::list<T> 而不是 std::vector<T>？](https://stackoverflow.com/questions/5056973/when-do-you-prefer-using-stdlistt-instead-of-stdvectort)

我刚刚看了 Bjarne Stroustrup 的 GoingNative'12 演讲录音。我有点困惑。

在本次演讲中，他特别讨论了`vector`vs`list`问题，并建议在许多情况下`vector`，即使您从中间密集地插入和删除，它也会更快，因为编译器可以优化很多东西，比如紧凑的结构。结论（据我了解）是：先使用`vector`，然后再考虑是否需要其他东西。这听起来很合理，但考虑到第一个观察结果，我应该考虑哪些标准？我一直认为，如果您密集地插入/删除 - 使用列表。在此处的某些主题中提出了类似的建议。看

[std::vector 与 std::list 与 std::slist 的相对性能？](https://stackoverflow.com/questions/238008/relative-performance-of-stdvector-vs-stdlist-vs-stdslist)

和

[STL 中的向量与列表](https://stackoverflow.com/questions/2209224/vector-vs-list-in-stl)

现在根据 Stroustrup 的说法，我错了。

当然，我可以编写几个测试并尝试找出在每种特定情况下使用什么，但是有理论上的方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T10:09:50.290

优先选择的最重要动机是`std::list`迭代`std::vector`器的有效性，*而不是*性能。如果在插入或擦除时，容器中有其他迭代器，那么您可能需要`std::list`，因为它的插入不会使任何迭代器失效，而擦除只会使被擦除元素的迭代器失效。大约只有`std::list`在复制和赋值非常昂贵时才会在性能上获胜，在这种情况下，修改包含的类以降低复制和赋值的成本通常是更好的选择，而不是切换到`std::list`.

# magento - Magento 新购物车属性

> ID：13174341
> 
> 赞同：4
> 
> 时间：2012-11-01T09:39:54.450
> 
> 标签：magento, module, attributes, shopping-cart

嗨，我面临的问题起初似乎很简单，但现在变成了一场真正的噩梦。

我被要求为所有产品添加一个属性（即点）（使用管理面板非常简单地完成）并将其总数作为可以设置规则的购物车属性！？

我非常肯定购物车属性定义在：

```
class Mage_SalesRule_Model_Rule_Condition_Address extends Mage_Rule_Model_Condition_Abstract
{
public function loadAttributeOptions()
{
    $attributes = array(
        'base_subtotal' => Mage::helper('salesrule')->__('Subtotal'),
        'total_qty' => Mage::helper('salesrule')->__('Total Items Quantity'),
        'weight' => Mage::helper('salesrule')->__('Total Weight'),
        'payment_method' => Mage::helper('salesrule')->__('Payment Method'),
        'shipping_method' => Mage::helper('salesrule')->__('Shipping Method'),
        'postcode' => Mage::helper('salesrule')->__('Shipping Postcode'),
        'region' => Mage::helper('salesrule')->__('Shipping Region'),
        'region_id' => Mage::helper('salesrule')->__('Shipping State/Province'),
        'country_id' => Mage::helper('salesrule')->__('Shipping Country'),
    );

    $this->setAttributeOption($attributes);

    return $this;
}
<...> 
```

因此，如果我覆盖此模型并向该数组添加一个项目，我将获得规则定义管理面板中显示的属性。似乎所有这些属性在 sales_flat_quote_address 表中都有一个匹配列，除了 total_qty 和 payment_method！

现在的问题是我应该怎么做才能在规则处理中计算和评估我的新属性？我应该在此表中添加一列并在购物车更改时更新其值吗？

任何有关如何做到这一点的见解都将非常有价值，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:26:25.623

我终于设法完成了任务，为了将来参考，我在这里解释了这个过程。

问题中提到的类（即：Mage_SalesRule_Model_Rule_Condition_Address）是问题的关键。我不得不重写它，由于某些奇怪的原因，我无法通过扩展它来获得我需要的东西，所以我的类扩展了它的父类（即：Mage_Rule_Model_Condition_Abstract）。

正如我所说，我将我的属性添加到 $attributes 中，如下所示：

```
'net_score' => Mage::helper('mymodule')->__('Net Score') 
```

我还修改了 getInputType() 方法并将我的属性声明为数字

现在诀窍是 validate() 方法：

```
public function validate(Varien_Object $object)
{
    $address = $object;
    if (!$address instanceof Mage_Sales_Model_Quote_Address) {
        if ($object->getQuote()->isVirtual()) {
            $address = $object->getQuote()->getBillingAddress();
        }
        else {
            $address = $object->getQuote()->getShippingAddress();
        }
    }

    if ('payment_method' == $this->getAttribute() && ! $address->hasPaymentMethod()) {
        $address->setPaymentMethod($object->getQuote()->getPayment()->getMethod());
    }

    return parent::validate($address);
} 
```

如您所见，它准备了一个 Mage_Sales_Model_Quote_Address 实例并将其发送到其父 validate 方法。你可以看到这个对象（$address）默认没有payment_method，所以这个方法创建一个并将它分配给它。所以我也做了同样的事情，只是我在返回之前添加了以下代码：

```
if ('net_score' == $this->getAttribute() && ! $address->hasNetScore()) {
    $address->setNetScore( /*the logic for retrieving the value*/);
} 
```

现在我可以在这个属性上设置规则了。

希望这些信息将来可以节省某人的时间。

# php - 覆盖 PHP 中的静态方法

> ID：13174343
> 
> 赞同：6
> 
> 时间：2012-11-01T09:40:03.653
> 
> 标签：php, static, overriding

我有一个如下所示的抽象页面类：

```
abstract class Page {
    public static function display() {
        self::displayHeader();
        self::displayContent();
        self::displayFooter();
    }

    public static function displayContent() {
        print "<p>some content</p>";
    }

    public static function displayHeader() {
        include_once(kContent . "HeaderContent.class.php");
        HeaderContent::display();
    }

    public static function displayFooter() {
        include_once(kContent . "FooterContent.class.php");
        FooterContent::display();
    }
}; 
```

我想从中继承子类，并且只覆盖 displayContent 方法，因此页眉和页脚会自动显示，但仍然可以选择覆盖 display 方法，例如 .js 文件。

现在我有另一个类，看起来像这样：

```
class FooPage extends Page {
    public static function displayContent() {
        print "<p>Foo page</p>";    
}; 
```

现在，它不再调用 FooPage 的`displayContent`方法，而是调用超类中的方法。

为什么？我能做些什么？

**编辑**

我正在运行 PHP 5.2.17

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T12:03:41.000

Ilija，PHP < 5.3 没有“[后期静态绑定](http://php.net/manual/en/language.oop5.late-static-bindings.php)”，这就是为什么您可能会遇到`FooPage::displayContent`不被调用的情况。如果您运行的是 PHP 5.2，那么就没有什么可做的了（除了[一些使用 debug_backtrace() 的 hack](http://www.php.net/manual/en/language.oop5.late-static-bindings.php#101077)，老实说我不推荐这种情况）。

现在，真正引起我注意的是您的方法都是静态的；是否有一个原因？为什么它们不是实例方法？我希望是这样的：

```
include_once(kContent . "HeaderContent.class.php");
include_once(kContent . "HeaderContent.class.php");

abstract class Page 
{
    protected $header;
    protected $footer;

    public function __construct()
    {
        $this->header = new HeaderContent();
        $this->footer = new FooterContent();
    }

    public function display() 
    {
        $this->displayHeader();
        $this->displayContent();
        $this->displayFooter();
    }

    public function displayContent() 
    {
        print "<p>some content</p>";
    }

    public function displayHeader() 
    {
        $this->header->display();
    }

    public function displayFooter() 
    {
        $this->footer->display();
    }
};

class FooPage extends Page 
{
    public function displayContent() 
    {
        print "<p>Foo page</p>";
    }
} 
```

稍后在您看来，您将编写如下内容：

```
$page = new FooPage();
$page->display(); 
```

需要考虑的一些事项：

*   在生成视图内容时，通常最好不要使用 print/echo。而是尝试创建字符串并将打印/回显作为最后一步。这使得以后编写测试更容易。

例子：

```
public function display() 
{
    return 
           $this->displayHeader() . 
           $this->displayContent() . 
           $this->displayFooter();
}

public function displayContent() 
{
    return "<p>some content</p>";
}

public function displayHeader() 
{
    return $this->header->display();
}
....
$page = new FooPage();
echo $page->display(); 
```

*   如果随着应用程序的增长需要这样做，可以将页眉和页脚作为 Page 构造函数参数传递。只要它们是理解 display() 消息（即[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)）的对象，事情就应该没问题。

高温高压

# wordpress - 从网站检索数据并在 android App 中显示

> ID：13174352
> 
> 赞同：2
> 
> 时间：2012-11-01T09:40:29.440
> 
> 标签：wordpress

我对开发 Android 应用程序比较陌生。我有疑问。

1.  如何检索网站特定内容并将其显示在 android App 中？我不知道从哪里开始。

2.  在包含`username`,`password`和`Login`按钮的登录页面活动中，只有来自网站的注册用户才能登录。如何仅对来自网站的已注册用户进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:33:48.797

[XML-RPC WordPress API](http://codex.wordpress.org/XML-RPC_WordPress_API)是最好的起点。

如果您通过 API，您可以轻松地发现您拥有所有可用的操作，并且您需要做的就是使用用于 java 的 xmlrpc 客户端库来调用这些过程。而且，[这个](http://code.google.com/p/android-xmlrpc/)库看起来不错。

# c++ - 异常处理和成员变量

> ID：13174357
> 
> 赞同：1
> 
> 时间：2012-11-01T09:40:35.070
> 
> 标签：c++, exception-handling, c++11

我有一个简单的Q。

如果我们有一个具有动态分配成员（或使用动态分配的成员）的类，并且我们经常使用该成员，那么处理该成员上的某些操作失败的最佳方法是什么。
Ofc 有 try catch 但我不是在谈论那个。

1）我在谈论这样一个事实，即现在成员处于不应该的状态（这里我不是在谈论泄漏资源，我在谈论一个事实，例如我们想将 100 个元素推回 std::vector 但我们只添加 47).

现在，例如，当我们调用另一个方法 sendToDB 时，我们将向 DB 发送 47 个而不是 100 个项目。我对解决的猜测是在所有公共方法上都有 bool 返回值（尝试全有或全无（又名 push_back all 100 或 push 0），如果我们确实设法推动 100，则返回 false，如果我们推动 0，则返回 false。

2）但这仍然存在动态分配成员的问题（例如shared_ptr）。这是否意味着使用它的每个方法都必须执行以下操作：

```
bool MyClass::sendDataToDB()
{
    if (! m_DBConnection ) //m_DBConnection is std::shared_ptr
    return false;
   //...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:56:04.193

我不完全理解你的问题，但我明白了：

在您的班级中，您有一个存储（类似的东西`vector`），然后您想在其中插入一些东西，并且操作可能会在其中失败。所以你想知道是插入失败还是操作完成！我对吗？如果答案是肯定的，我认为最好的解决方案是在失败的情况下`iostream`设置一个`fail`状态，你可以稍后检查它或者可以`throw exception`但无论如何，设置`fail`位可以向每个人发出我的对象处于失败状态的信号

# algorithm - UTF-8 使用的前导位数编码技术的名称是什么？

> ID：13174363
> 
> 赞同：3
> 
> 时间：2012-11-01T09:41:02.920
> 
> 标签：algorithm, encoding, utf-8

UTF-8 使用一种编码，其中第一个字节的前导一位数是符号使用的字节数的计数（单字节字符除外）：

```
0xxxxxxx - 1 byte sequence
110xxxxx - 2 byte sequence
1110xxxx - 3 byte sequence
11110xxx - 4 byte sequence
... 
```

忽略单字节情况，这种编码技术是否有类似/先前的用途？它有名字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:45:27.303

根据[Wikipedia](http://en.wikipedia.org/wiki/UTF-8)，使用的名称似乎是“连续字节”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:48:41.200

使用连续位的替代方法用于[可变长度整数](http://en.wikipedia.org/wiki/Variable_length_unsigned_integer)。

[本专利申请](http://www.freshpatents.com/-dt20100408ptan20100085223.php)讨论了许多方法，包括这两种方法（大概在提供更好的替代方案之前）。

# windows-phone-8 - Windows phone 8 支持后台进程（无 UI）？

> ID：13174367
> 
> 赞同：0
> 
> 时间：2012-11-01T09:41:33.187
> 
> 标签：windows-phone-8

正如标题所说，现在Windows phone 8 支持后台进程（没有UI）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:50:33.530

是的，对于某些应用程序类型（例如 VoIP），有两个进程模型可用。

现在请阅读[常见问题解答：我该如何提问](https://stackoverflow.com/faq#howtoask)，并学习如何提出正确的问题。

# android - 安卓滑块拼图

> ID：13174371
> 
> 赞同：3
> 
> 时间：2012-11-01T09:41:42.597
> 
> 标签：android, puzzle, sliding

我正在 android 中开发一个滑块拼图，它的图像分成小图像，我们需要订购这些碎片以形成正确的图像。我使用了一个 3x3 的网格视图，其中包含 8 个图像和一个黑点。因此，基本上，当您触摸 8 个棋子中的任何一个时，谜题取决于它是否有效移动，棋子是否会移动到空白点。这一切都很好，但我想给它滑动效果。因此，当您触摸该作品时，它应该滑入空白点。我想我必须使用 onFling 方法，但我不太确定如何使用。

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:25:27.230

此代码在时间延迟和幻灯片图像上运行：-

```
public class SliderActivity extends Activity {

    public int currentimageindex=0;
    Timer timer;
    TimerTask task;
    ImageView slidingimage;

    private int[] IMAGE_IDS = {
            R.drawable.splash0, R.drawable.splash1, R.drawable.splash2,
            R.drawable.splash3
        };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mygame);
        final Handler mHandler = new Handler();

        // Create runnable for posting
        final Runnable mUpdateResults = new Runnable() {
            public void run() {

                AnimateandSlideShow();

            }
        };

        int delay = 1000; // delay for 1 sec.

        int period = 8000; // repeat every 4 sec.

        Timer timer = new Timer();

        timer.scheduleAtFixedRate(new TimerTask() {

        public void run() {

             mHandler.post(mUpdateResults);

        }

        }, delay, period);

    }

    public void onClick(View v) {

        finish();
        android.os.Process.killProcess(android.os.Process.myPid());
      }

    /**
     * Helper method to start the animation on the splash screen
     */
    private void AnimateandSlideShow() {

        slidingimage = (ImageView)findViewById(R.id.ImageView3_Left);
        slidingimage.setImageResource(IMAGE_IDS[currentimageindex%IMAGE_IDS.length]);

        currentimageindex++;

        Animation rotateimage = AnimationUtils.loadAnimation(this, R.anim.custom_anim);

          slidingimage.startAnimation(rotateimage);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T20:47:29.973

您可能需要考虑为此使用游戏引擎。价值在于它为您处理动画并为图块设置动画就像一行代码一样简单..

tile.MoveTo(newPosition)。

我推荐适用于 android 的 cocos2d，您可以在此处找到有关构建滑块拼图的详细教程 ..

[http://denvycom.com/blog/step-by-step-guide-on-how-to-build-your-first-slider-puzzle-game-in-cocos2d-for-android-part-1/](http://denvycom.com/blog/step-by-step-guide-on-how-to-build-your-first-slider-puzzle-game-in-cocos2d-for-android-part-1/)

本教程还包括在这里构建一个图像滑块拼图.. [http://denvycom.com/blog/step-by-step-guide-on-how-to-build-your-first-slider-puzzle-game-in- cocos2d-for-android-part-3-2/#comment-1313951361](http://denvycom.com/blog/step-by-step-guide-on-how-to-build-your-first-slider-puzzle-game-in-cocos2d-for-android-part-3-2/#comment-1313951361)

# c# - ConfigurationSection 多个枚举值

> ID：13174375
> 
> 赞同：4
> 
> 时间：2012-11-01T09:41:53.163
> 
> 标签：c#, .net, configuration, configurationsection, configurationelement

有没有办法在配置部分设置多个枚举值？

就像你在 .net 中所做的那样`object.Filter = Filter.Update | Filter.Create;`

```
<wacther filter="update, created"/> 
```

支持这样的东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T11:56:14.760

它开箱即用：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var section = (MySection)ConfigurationManager.GetSection("mySection");
            Console.WriteLine(section.Enum);
        }
    }

    public class MySection : ConfigurationSection
    {
        [ConfigurationProperty("enum")]
        public MyEnum Enum
        {
            get { return (MyEnum)this["enum"]; }
            set { this["enum"] = value; }
        }
    }

    [Flags]
    public enum MyEnum
    {
        None = 0,
        Foo = 1,
        Bar = 2,
        Baz = 4
    }
}

<configSections>
  <section name="mySection" type="ConsoleApplication1.MySection, ConsoleApplication1"/>
</configSections>

<mySection enum="Foo, Bar"/> 
```

印刷品：Foo, Bar

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T10:05:59.320

定义一个标志枚举：

```
[Flags]
enum Filter
{
    None = 0,
    Update = 1,
    Create = 2
} 
```

假设您的配置文件中有一个枚举字符串：

```
var enumString = "update, create"; 
```

所以你可以得到结果：

```
var result = (Filter) Enum.Parse(typeof (Filter), enumString, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-08T08:44:59.430

最简单的方法是使用[FlagsAttribute](https://docs.microsoft.com/en-us/dotnet/api/system.flagsattribute?view=netframework-4.7.2)。但是，如果您已经拥有包含一组值的枚举，那么您可以使用以下代码：

```
public static IEnumerable<T> GetEnumValues<T>(string enumValues)
{
    return string.IsNullOrEmpty(enumValues)
        ? Enumerable.Empty<T>()
        : enumValues.Split(',').Select(e => System.Enum.Parse(typeof(T), e.Trim(), true)).Cast<T>();
}

[ConfigurationProperty("filter")]
public string Filter => GetEnumValues<FilterEnum>((string) this["filter"]); 
```

# symfony - Symfony 2 不提供资产在 prod 中生成的资产（在反向代理之后，但它确实在调试模式下使用控制器）

> ID：13174376
> 
> 赞同：3
> 
> 时间：2012-11-01T09:41:52.873
> 
> 标签：symfony, reverse-proxy, assetic

我有一个 Symfony 2 安装，位于反向代理后面。

什么时候

*   `use_controller`标志设置为（`true`在 app/config/config.yml 中）
*   内核在调试模式下实例化：`$kernel = new AppKernel('prod', true);`

资产服务没有问题，但是在关闭调试模式并禁用资产控制器后，我无法获得资产服务。

注意：

*   资产通过以下方式正确生成（我检查过）：`app/console assetic:dump --no-debug --env=prod`
*   模板被正确呈现和提供（即我得到了我的 html 页面，但没有加载任何资产）
*   资产的 URL 似乎是正确的。
*   我必须使用反向代理，因为我无法将 Symfony 移动到主服务器，它需要保持在不同的服务器上，原因有很多
*   我也已经尝试设置

    > ```
    > framework:
    >     trust_proxy_headers: true</li> 
    > ```

结果相同。

特别是，Symfony 的路由为如下路由渲染模板：

`http://<mycompany>.com/app/<routing>/...`

where`/app`是告诉 Apache 反向代理请求的关键字，后面是 Symfony 的常用路由。

我页面中的资产链接如下： `http://<mycompany>.com/app/css/a8d432.css`<-- 文件存在于`web`目录中，由assetic:dump 生成，但未提供。

[我按照这个howto](http://blog.viison.com/post/21026843634/running-symfony2-behind-a-reverse-proxy-using-a-custom)在反向代理后面配置了Symfony

# c# - 将图像放置在 Excel 文件中

> ID：13174380
> 
> 赞同：1
> 
> 时间：2012-11-01T09:42:07.693
> 
> 标签：c#, asp.net-mvc-3

我正在使用 MVC3。我正在视图中显示一些内容和图表（使用 jqplot 的图表）。现在我想将内容和图表导出到excel。我已经将内容导出到 Excel。现在我想将图像添加到excel。我已经将图表转换为图像并作为源分配给视图中的一个图像。现在是否可以通过获取该图像源和类似的东西将该图像添加到控制器中的 excel 内容中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:45:23.467

您可以尝试使用 EPPlus 库[http://epplus.codeplex.com/](http://epplus.codeplex.com/)。

您无需将图表转换为图像并将其插入 Excel，您可以使用与您的应用程序中的库相同的库创建图表。

使用 EPPlus 将图像添加到 Excel 的示例（这只是示例，不是完整代码）：

```
using (System.Drawing.Image img = /*...Load image here...*/)
{
if (img != null)
{
    //set row height to accommodate the picture
    ws.Row(currentRow).Height = ExcelHelper.Pixel2RowHeight(pictureHeight + 1);

    //add picture to cell
    ExcelPicture pic = ws.Drawings.AddPicture("PictureUniqueName", img);
    //position picture on desired column
    pic.From.Column = pictureCol - 1;
    pic.From.Row = currentRow - 1;
    pic.From.ColumnOff = ExcelHelper.Pixel2MTU(1);
    pic.From.RowOff = ExcelHelper.Pixel2MTU(1);
    //set picture size to fit inside the cell
    pic.SetSize(pictureWidth, pictureHeight);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:10:45.793

这就是我在 excel 表中放置图像的方式：

```
Excel.Range picPosition = xlSShhh.Cells[2, 15];
Excel.Pictures p = xlSShhh.Pictures(System.Type.Missing) as Excel.Pictures;
Excel.Picture pic = null;
try
{
pic = p.Insert(path + pic_name + ".png", System.Type.Missing);
pic.ShapeRange.LockAspectRatio = Microsoft.Office.Core.MsoTriState.msoCTrue;
pic.ShapeRange.Width = 180;
pic.ShapeRange.Height = 180;
}
catch (Exception ex)
{
MessageBox.Show(ex.Message);
} 
```

希望能帮助到你

# android - 验证来自网站数据库的登录页面，用于 android 应用程序

> ID：13174382
> 
> 赞同：2
> 
> 时间：2012-11-01T09:42:15.317
> 
> 标签：android

我是android新手，请任何人都可以在这里帮助我，如何从只有注册用户才能登录的网站数据库中验证用户名和密码。如何从我的网站获取特定内容并将其显示在 android 应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:53:28.470

在应用程序中查看有两种类型的验证

`1\. Client side validation and 2\. Server side validation`

在这里，您询问Android App的服务器端登录身份验证。请参考此[链接](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)，这是您找到的很好的解决方案。在本教程中准确描述了您搜索的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:49:47.000

您在下面使用了 DbAdpter Class.my 代码：

```
public class DBAdpter {
    public static String url = YourServerlink;

    public static String loginInUser(String username, String password) {
        String result = "";
        String msg = "";
        InputStream is = null;

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("username", username));
        nameValuePairs.add(new BasicNameValuePair("password", password));

        try {
            DefaultHttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(url + "login.php?");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString().trim();

        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        try {
            JSONObject jObj = new JSONObject(result);
            msg = jObj.getString("Message");
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return msg;
    } 
```

您使用登录页面将我的代码放在下面的创建方法上：

```
 uname = (EditText) findViewById(R.id.user_edt_lg);
        pass = (EditText) findViewById(R.id.pass_edt_lg);
        login = (Button) findViewById(R.id.login);
        reg_txt = (TextView) findViewById(R.id.reg_txt);
        login.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                strUname = uname.getText().toString().trim();
                strPass = pass.getText().toString().trim();
                DBAdpter.loginInUser(strUname, strPass);
                Toast.makeText(QuizActivity.this, "Successfully login", 1)
                        .show();

                Intent i = new Intent(QuizActivity.this, All_Quiz_list.class);
                startActivity(i);

            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:50:33.467

这是用户从 Web 服务器登录的好例子。

[1.安卓登录应用](http://wowjava.wordpress.com/2011/01/16/login-application-for-android/)

# php - 如果用户输入类似于某个值，则连续显示所有数据

> ID：13174384
> 
> 赞同：0
> 
> 时间：2012-11-01T09:42:23.453
> 
> 标签：php, database, loops, mysqli, output

我在这里做错了什么！我想显示与特定客户端 ID 关联的所有数据

EX用户输入“2”

将显示所有具有 client_id "2" 的行

```
<?php

if($_POST['submit'] == "submit"){
   $username="xxx_admin";
   $password="xxx";
   $database="xxx_database";

//connect to mysql server
                $mysqli = new mysqli("localhost", $username, $password, $database);

                                        //check if any connection error was encountered
                                        if(mysqli_connect_errno()) {
                                            printf("Connect failed: %s\n", mysqli_connect_error());
                                            exit;
                                        }   
   $client_id = $_POST['client_id'];
   echo $client_id;
  $query = "select * from messages where client_id='$client_id'";
  $result = mysqli_query($query);
  $class_p = "timeling";
  $clid_p = "oldupdate";
  echo "<ol id=".$clid_p." class=".$class_p.">";echo $row->message;
                                        while ($row = $result->fetch_object())
                                        {
                                                // set up a row for each record
                                                echo "<li>";
                                                echo $row->message;
                                                echo "<br>" . $row->date_post;
                                                echo "</li>";
                                        }

    echo "</ol>";

     $mysqli->close();
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title></title>
<style type="text/css">
body
{
font-family:Arial, Helvetica, sans-serif;
font-size:14px;
}
.update_box
{
background-color:#D3E7F5; border-bottom:#ffffff solid 1px; padding-top:3px
}
a
    {
    text-decoration:none;
    color:#d02b55;
    }
    a:hover
    {
    text-decoration:underline;
    color:#d02b55;
    }
    *{margin:0;padding:0;}

    ol.timeline
    {list-style:none;font-size:1.2em;}ol.timeline li{ display:none;position:relative; }ol.timeline li:first-child{border-top:1px dashed #006699;}
    .delete_button
    {
    float:right; margin-right:10px; width:20px; height:20px
    }

    .cdelete_button
    {
    float:right; margin-right:10px; width:20px; height:20px
    }

    .feed_link
    {
    font-style:inherit; font-family:Georgia; font-size:13px;padding:10px; float:left; width:350px
    }
    .comment
    {
    color:#0000CC; text-decoration:underline
    }
    .delete_update
    {
    font-weight:bold;

    }
    .cdelete_update
    {
    font-weight:bold;

    }
    .post_box
    {
    border-bottom:1px dashed #006699;background-color:#F3F3F3;  width:499px;padding:.7em 0 2em 0;line-height:1.1em;

    }
    #fullbox
    {
    margin-top:6px;margin-bottom:6px; display:none;
    }
    .comment_box
    {
        display:none;margin-left:90px; padding:10px; background-color:#d3e7f5; width:300px;  height:50px;

    }
    .comment_load
    {
      margin-left:90px; padding:10px; background-color:#d3e7f5; width:300px; height:30px; font-size:15px; border-bottom:solid 1px #FFFFFF;

    }
    .text_area
    {
    width:290px;
    font-size:12px;
    height:30px;

    }
</style>
</head>
<body>
<div align="center">
<form method="post" action="">

Search:</br>
<p>client id: <input type="text" name="client_id"/> </p></br>

<input type="submit" name="submit" value="submit"/>

</form>

</div>
</body>
</html> 
```

当我输入一个值并单击提交时，这就是我所得到的

```
<html>
<head>
</head>
<body>

2
<ol id="oldupdate" class="timeling">
</ol>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:57:22.167

以下应该工作

```
while ($row = mysqli_fetch_object($result))
{
    // set up a row for each record
    echo "<li>";
    echo $row->message;
    echo "<br>" . $row->date_post;
    echo "</li>";
} 
```

PHP 手册参考链接： http: [//php.net/manual/en/mysqli-result.fetch-object.php](http://php.net/manual/en/mysqli-result.fetch-object.php)

# regex - TCL：正则表达式在字符串中查找是否为

> ID：13174385
> 
> 赞同：0
> 
> 时间：2012-11-01T09:42:24.560
> 
> 标签：regex, tcl

我正在尝试编写一个正则表达式来搜索从 C++ 源代码文件中读取的字符串中的 for/if/while 关键字，但排除包含它们的任何单词，例如：

```
WhatifYes()
Whatfor()
Waitforwhile() 
```

我写了我的正则表达式，如下所示：

```
if { [ regexp {(for|while|if)(\s+)(\()} $lineValue ] } { 
```

但它没有处理以下情况：

```
while(( int x = 0 ) > 0 );
while(( int x = 0 ) > 0 )
for(int y =0 ; ; )
for(int y =0 ; ; );
if( (int x = 9) > 0 )
if( (int x = 9) > 0 ); 
```

最初我认为因为我的正则表达式的框架如下：

```
if/for/while \s+ ( #space or multiple spaces 
```

但我尝试在上面的示例中包含空格：

```
while (( int x = 0 ) > 0 );
while (( int x = 0 ) > 0 )
if ( (int x = 9) > 0 )
if ( (int x = 9) > 0 ); 
```

正则表达式仍然不起作用 - 请让我知道我应该使用什么正则表达式来捕获它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:00:50.887

你的问题有一部分很容易解决，另一部分很难解决。

最简单的部分是确保你有一个完整的单词：`\m`约束转义只匹配单词的开头，而`\M`约束转义匹配结尾，所以我们可以使用：

```
# Nothing capturing; you can add that as necessary
# Ellipsis for the bits I've not talked about yet
regexp {\m(?:while|if|for)\M\s*...} ... 
```

The very hard part is matching the part in parentheses. The problem is that that's really a “language” (in a theoretical sense) that requires a different kind of parser than a regular expression to match (i.e., a recursive descent parser, which has a more complex state model than the finite automatons used in RE matching). What's more, using `()` characters in those expressions is common. The easiest approach is instead match against a close parenthesis that's at the end of the line, possibly followed by a semicolon, but that's definitely not properly correct. Alternatively, supporting a limited number of levels of nested parens is also possible.

```
# Match a few levels...
regexp {\m(?:while|if|for)\M\s*\((?:[^()]|\((?:[^()]|\([^()]*\))*\))*\)} ... 
```

So, let's break that RE down:

```
\m                                Word start
(?:while|if|for)                  One of the keywords 
\M                                Word end
\s*                               Optional spaces
\(                                Open paren
  (?:                             Either...
    [^()]                           Non-paren...
  |                               Or...
    \(                              Open paren
      (?:                           Either...
        [^()]                         Non-paren...
      |                             Or...
        \(                            Open paren
          [^()]*                      Non-parens
        \)                            Close paren
      )*                            ... as many of the above as needed
    \)                              Close paren
  )*                              ... as many of the above as needed
\)                                Close paren

```

If you look at the above, you'll notice a pattern. Yes, you can keep on nesting to do as deep as you want. What you *can't* do is make the RE engine do that nesting for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:10:14.687

In your regex you are using \s+. That means there must be at least one space/tab/line-break. Use \s* (0 or more whitespace) and add logic for what comes before:

```
if { [ regexp {(^|[ \t])(for|while|if)(\s*)(\()} $lineValue ] } { 
```

# c# - 使用 LINQ 查询字符串

> ID：13174387
> 
> 赞同：0
> 
> 时间：2012-11-01T09:42:32.213
> 
> 标签：c#, string, linq

为了从 RTSP 解析 SDP 信息，目前我使用默认的 c# 字符串函数（如逐行循环字符串）和 foreach/switch 方法。默认 SDP 信息来自以下形式的设备：

```
v=0
o=mhandley 2890844526 2890842807 IN IP4 126.16.64.4
s=SDP Seminar
i=A Seminar on the session description protocol
u=http://www.cs.ucl.ac.uk/staff/M.Handley/sdp.03.ps
e=mjh@isi.edu (Mark Handley)
c=IN IP4 224.2.17.12/127
t=2873397496 2873404696
a=recvonly
m=audio 3456 RTP/AVP 0
m=video 2232 RTP/AVP 31
m=whiteboard 32416 UDP WB
a=orient:portrait 
```

我想知道这个字符串是否可以使用 LINQ 或其他东西来查询，而不是遍历每一行，切换第一个字符，然后将其余字符存储为一个值，因为这种方法对故障和错误非常敏感（比如当 2 个属性/参数是在 1 行或第一个字符不是意外正确的字符（例如，前面有空格））。在我开始介绍所有可能发生的该死异常之前，我想知道是否有一种技术可以使用 LINQ 查询字符串中的值/键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:53:54.223

```
var query = text.Split(new[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries)
                .Select(line => line.Split('='))
                .GroupBy(x => x[0], x => x[1])
                .Select(g => new { Key = g.Key, Values = g.ToList() }); 
```

这将返回按键分组的条目，其值为列表。

或者这样（如果 Linq Lookup 适合您）：

```
var lookup = text.Split(new[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries)
                 .Select(line => line.Split('='))
                 .ToLookup(x => x[0], x => x[1]); 
```

用法：

```
foreach (var value in lookup["m"])
    // use value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:48:45.410

毫无疑问，您*可以*使用 linq 来执行此操作，但是一个简单的循环（可能`StringReader`用于获取行）检查`line.Length != 0`然后查找并且`line[0]`可能`line.Substring(1)`更合适：

```
static void Process(string input)
{
    using (var reader = new StringReader(input))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            if(line.Length == 0) continue;

            char first = line[0];
            string rest = line.Substring(1);
            // ... process this line
        }
    }
} 
```

# php - 在解析文本时跳过某些句子

> ID：13174388
> 
> 赞同：0
> 
> 时间：2012-11-01T09:42:33.387
> 
> 标签：php

我想解析文本。有一个奇怪的句子，就像`B R I E F I N G S I N B I O I N F O R M A T I C S`我想跳过那个句子一样。这是代码

```
<?php
$text = 'B R I E F I N G S I N B I O I N F O R M A T I C S. Because many biomedical entities have multiple names and abbreviations, it would be advantageous to have an automated means to collect these synonyms and abbreviations to aid users doing literature searches.';

$reg = '/(?<=[.!?]|[.!?][\'"])\s+/';
foreach(preg_split($reg, $text, -1, PREG_SPLIT_NO_EMPTY) as $sentence){
    foreach(preg_split('/\s+/', $sentence) as $words){
       if (count(strlen($words)>1)){
        //I don't know what to do
    }
    }
}
?> 
```

但是，它仍然是错误的，如何识别模式句`B R I E F I N G S I N B I O I N F O R M A T I C S`？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:51:10.787

那这个呢？如果句子中所有单词的长度等于 1，则此方法有效。

```
 <?php
    $text = 'B R I E F I N G S I N B I O I N F O R M A T I C S. Because many biomedical entities have multiple names and abbreviations, it would be advantageous to have an automated means to collect these synonyms and abbreviations to aid users doing literature searches.';

$reg = '/(?<=[.!?]|[.!?][\'"])\s+/';
foreach(preg_split($reg, $text, -1, PREG_SPLIT_NO_EMPTY) as $sentence){
    foreach(preg_split('/\s+/', $sentence) as $words){
       $isStrange = true;
       if (strlen($words)>1){
        $isStrange = false;
    }
    if ($isStrange) echo $sentence.' is very strange!';
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:51:43.297

只要字符串每次都相同，这将起作用

```
<?php
$text = 'B R I E F I N G S I N B I O I N F O R M A T I C S. Because many biomedical entities have multiple names and abbreviations, it would be advantageous to have an automated means to collect these synonyms and abbreviations to aid users doing literature searches.';

$text = str_replace("B R I E F I N G S I N B I O I N F O R M A T I C S. ","",$text); // <--- added this

$reg = '/(?<=[.!?]|[.!?][\'"])\s+/';
foreach(preg_split($reg, $text, -1, PREG_SPLIT_NO_EMPTY) as $sentence){
    foreach(preg_split('/\s+/', $sentence) as $words){
       if (count(strlen($words)>1)){
        //I don't know what to do
    }
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:00:21.450

从您显示的句子中，我将在您的文本开头删除仅包含空格注入的大写字母的句子：

```
echo preg_replace('/^[A-Z](?:\s[A-Z])+\./', '', $text); 
```

# asp.net - System.IO.FileNotFoundException：无法加载文件或程序集 'file:///C:\Windows\Microsoft.NET\Framework\v4.0.30319\-i

> ID：13174389
> 
> 赞同：3
> 
> 时间：2012-11-01T09:42:52.107
> 
> 标签：asp.net, vb.net, web-services

我正在尝试安装一个基本上是文件监视服务的 Web 服务。但是当我尝试运行这个命令时`Installutil –i "C:\\xxx\zzzz\ServiceTest.exe"`

我收到这个错误`System.IO.FileNotFoundException: Could not load file or assembly 'file:///C:\Windows\Microsoft.NET\Framework\v4.0.30319\-i`

我以前运行过这个命令，从来没有出现过这个错误，不知道这次有什么不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T13:50:34.933

尝试运行

c:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe -i "C:\xxx\zzzz\ServiceTest.exe"

除非重新定义了“installutil”，否则您收到的响应没有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-09-24T19:22:00.627

如果我从 Internet 下载 windows10manager.exe（exe 服务示例），我会遇到同样的错误。下载文件后，我转到文件属性，然后单击取消阻止按钮。完成此操作后，服务安装成功。要自动执行此过程，请遵循以下线程：[Unblock File from within .net 4 c#](https://stackoverflow.com/questions/6374673/unblock-file-from-within-net-4-c-sharp)

[![在此处输入图像描述](../Images/5861547d6348807d405e42dfbbc2a89c.png)](https://i.stack.imgur.com/ky26I.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-02T22:34:08.103

检查服务路径的拼写，特别是（“）引号字符写它，不要复制粘贴。

这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:59:14.607

将 Visual Studio 中的编译器设置从**X86**更改为**Any CPU**或使用“C:\Windows\Microsoft.NET\Framework64\v4.0.30319”内的 64 位 InstalUtil

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-11T07:16:24.713

也许您引用的一些 DLL 仍然是 32 位的？您可以使用 Microsoft 的免费工具 depends.exe 进行检查

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-22T19:20:55.780

就我而言，发生此错误是因为我的项目路径中有一些**空白区域，****例如：** C:\user\Visual Studio 2019 ....

当我通过删除空间重命名路径时，它工作正常

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-03-06T12:54:40.903

我有同样的问题，因为服务名称只有“Service.exe”，所以我改为 C:\MyServices\NewService\Service.exe”

**错误**：C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\installutil /u Service.exe

**正确**：C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\installutil /u "C:\MyServices\NewService\Service.exe"

为我工作！

# jquery - 如何在 id/标签对的标签列表上初始化选择（）？

> ID：13174390
> 
> 赞同：1
> 
> 时间：2012-11-01T09:42:59.310
> 
> 标签：jquery, jquery-select2

我正在初始化一个[Select2](http://ivaynberg.github.com/select2/)标记列表，如下所示：

```
<input type="text" name="users" value="" id="users" class="span3"  />

$("#users").select2({
    tags            : [
        {'id':1, 'text':'Ben'},  
        {'id':22, 'text':'Andrea'},  
        {'id':23, 'text':'Tim'},
        {'id':7, 'text':'Matt'}
    ]
    ,tokenSeparators    : [",", " "]
}).on('change', function(event){
    console.log(event.val.toString());
}); 
```

...当输入框开始为空时，这是一种享受。按姓名选择人员会返回一个简单的 ID 数组，我可以将其发送回数据库。

但是，我对如何使用现有选择初始化此列表感到困惑。假设我加载了已选择 Ben 和 Andrea 的页面：

```
<input type="text" name="users" value="Ben, Andrea" id="users" class="span3"  /> 
```

我可以看到 Select2 有一个 initSelection() 方法，但我不确定如何使用它。显然上面的例子是错误的，因为我没有将 ID 和人名一起传递——但是我*应该*如何传递这些数据呢？为了正确初始化 Select2，我的 initSelection 回调函数的实现应该是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:38:24.727

问题解决了：

[https://groups.google.com/forum/#!topic/select2/3UN3DSiv4lo](https://groups.google.com/forum/#!topic/select2/3UN3DSiv4lo)

您可以在输入值中或通过 val() 调用传递 ID 列表。

# iphone - 在 iPhone 上的 Friends Facebook Wall 上发布消息

> ID：13174395
> 
> 赞同：2
> 
> 时间：2012-11-01T09:43:34.150
> 
> 标签：iphone, objective-c

我正在开发一个应用程序，在该应用程序中，我必须通过我的帐户向朋友的墙发布问候。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:04:39.663

```
NSMutableDictionary *parmaDic = [NSMutableDictionary dictionaryWithCapacity:4];
[parmaDic setObject:[NSString stringWithFormat:@"hello world"] forKey:@"message"]; // if you want send message  
[parmaDic setObject:@"http://icon.png" forKey:@"picture"];  // if you want send picture    
[parmaDic setObject:@"Create post" forKey:@"name"];         // if you want send name    
[parmaDic setObject:@"Write description." forKey:@"description"]; // if you want  description

[_facebook requestWithGraphPath:[NSString stringWithFormat:@"/%@/feed",facebook_user_id] 
                      andParams:parmaDic 
                  andHttpMethod:@"POST"
                    andDelegate:self]; 
```

我使用 key like.message,picture ..etc 请参阅[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

# jquery - 悬停（）没有按预期工作

> ID：13174396
> 
> 赞同：0
> 
> 时间：2012-11-01T09:43:34.763
> 
> 标签：jquery, html

我有一个如下所示的列表元素，我正在尝试使用 jQuery 来定位图像元素。发生的事情是它将`span`元素和`img`向上移动了 15 个像素，而不仅仅是图像。

但是，如果我在 HTML 中移动`span`元素之前，`img`它将正确定位图像元素。为什么会这样？

```
<ul class="mainnav">
    <li>
        <a href="#">
            <div class="circles"><img src="/bootstrap_a/img/web_icon/blog_i.png"></div>
            <span>Blog</span>
        </a>                        
    </li>
<ul> 
```

```
$(".mainnav li a").hover(
    function () {
        $(this).find('img').stop().animate({  marginTop: "-15px" }, 250); 
    }, 
    function () {
        $(this).find('img').stop().animate({ marginTop: "0px" }, 250); 
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:50:26.967

在不改变任何东西的情况下，这是一个相对肮脏的解决方案。

[http://jsfiddle.net/rDQkS/](http://jsfiddle.net/rDQkS/)

底部边距的动画量相同，以将跨度推开，使其看起来只有图像在移动。

```
$(".mainnav li a").hover(
  function () {
    $(this).find('img').stop().animate({  marginTop: "-15px", marginBottom: "15px" }, 250); 
  }, 
  function () {
    $(this).find('img').stop().animate({ marginTop: "0px", marginBottom: "0px" }, 250); 
  }
);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:46:20.690

首先你还没有关闭`<img>`标签。所以确保你关闭它。

```
$(".mainnav li a").hover(
  function () {
    $(this).find('div img').stop().animate({  marginTop: "-15px" }, 250); 
  }, 
  function () {
    $(this).find('div img').stop().animate({ marginTop: "0px" }, 250); 
  }
 ); 
```

# sql - 合并与案例

> ID：13174399
> 
> 赞同：12
> 
> 时间：2012-11-01T09:43:47.997
> 
> 标签：sql, sql-server-2008, tsql

我有 5 个字段返回值和 NULLS 的混合。出于报告目的，我需要用一个值替换任何潜在的 NULLS。我正在查询的数据库每晚通过 SSIS 包更新。

显然，我需要更改 .dtsx 文件，以通过添加一些 SQL 来阻止每天引入 NULLS。

我的问题是：

就性能而言，处理这些 NULL 的最有效方法是什么。到目前为止，我已经确定`COALESCE`并`CASE`处理它们并且我倾向于`COALESCE`因为我的替代方案`NULL`不会改变，但我很想知道这是否以及为什么这将是最有效的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T14:44:07.200

`COALESCE()`字面上是`CASE`语句的简写，它们的执行方式相同。

但是，正如 podiluska 所提到的，`ISNULL()`有时可能比`CASE`语句更快，但它可能是微不足道的增加，因为这些功能不太可能成为您的程序的瓶颈。

[在此处](http://dataeducation.com/performance-isnull-vs-coalesce/)阅读有关性能差异的更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T09:55:24.177

在某些情况下，`ISNULL`比`CASE`或更快`COALESCE`。但是，如果跨平台兼容性是个问题，那`COALESCE`就是 ANSI 标准。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-01T09:45:27.613

我更喜欢使用`COALESCE`over `CASE`。最有趣的是代码比使用短得多`CASE`。

# android - 下载项目列表视图的图像

> ID：13174400
> 
> 赞同：0
> 
> 时间：2012-11-01T09:43:50.983
> 
> 标签：android, list, android-asynctask

我正在尝试填写我的列表视图。我的列表视图中的每个项目都包含一个文本（标题）和一个图像（缩略图）。我的图像是从服务器下载的。所以每次我在我的列表视图中添加一个项目时，我都会检查我的图像是否已经存在，如果不存在，我会在异步任务中下载它。当异步任务完成执行时，我将下载的图像放在我的项目列表视图中。

```
private class Thumbnails extends AsyncTask<Void, Integer, Void>
    {
        private Bitmap bitmap;

        private File fileTest;

        private String extStorageDirectory;

        @Override

        protected void onPreExecute() {

            super.onPreExecute();
        }

        @Override

        protected void onProgressUpdate(Integer... values){

            super.onProgressUpdate(values);
        }

        @Override

        protected Void doInBackground(Void... arg0) {

            Log.i("DocumentListItem","start downloading thumbnail = "+thumbnailURL);

            try{

                extStorageDirectory = Environment.getExternalStorageDirectory().toString();

                fileTest = new File(extStorageDirectory+"/AAAA/"+mDocument.getTitle()); 

                if(fileTest.exists()){

                    BitmapFactory.Options options = new BitmapFactory.Options();

                    options.inPreferredConfig = Bitmap.Config.ARGB_8888;

                    bitmap = BitmapFactory.decodeFile(fileTest.getAbsolutePath(), options);

                }
                else{

                    bitmap = BitmapFactory.decodeStream(new URL(thumbnailURL).openConnection().getInputStream());

                }

            } catch (MalformedURLException e) {

                e.printStackTrace();

            } catch (IOException e) {

                e.printStackTrace();
            }

            return null;
        }

        @Override

        protected void onPostExecute(Void result) {

                if (bitmap != null){

                    bitmapThumbnail = bitmap;

                    mImage.setImageBitmap(bitmap);
                }

                if(fileTest.exists()){

                }else{

                    try {

                        File folder = new File(extStorageDirectory, "AppoxySavedFiles");

                        folder.mkdir();

                        File file = new File(folder, mDocument.getTitle());

                        FileOutputStream out = new FileOutputStream(file);

                        bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);

                    } catch (Exception e) {

                        e.printStackTrace();
                    }
                }

        }
    } 
```

问题是封面图像缩略图随机加载，并且没有与正确的文档项目正确关联。上下滚动时缩略图会重新排列。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:02:09.383

cacois有一个[博客](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)。他发了关于异步延迟加载图像并将它们缓存到 SD 卡的帖子，并在[github](https://github.com/cacois/TweetView)上放了一个示例项目。

它帮助我解决了我的问题。它还可以帮助您解决问题。

# c# - 更改 .NET 4.5 WPF 功能区的主题

> ID：13174403
> 
> 赞同：14
> 
> 时间：2012-11-01T09:44:04.400
> 
> 标签：c#, wpf, ribbon-control, wpf-4.5

我正在尝试从 .NET Framework 4.5 更改新[WPF 功能区控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbon.aspx)的主题，但我被卡住了。

我只设法更改**了一些画笔**（背景、前景、边框......），但我似乎无法更改明亮的叠加层和阴影。

我很高兴使用资源字典，但我不知道需要设置哪些属性。

我希望你能指出我正确的方向，非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-31T11:12:09.980

如果您想要更改的不仅仅是 Ribbon 控件（或任何其他控件）的公开属性，例如 Background、Foreground 等，则必须编辑控件的**Template**。

在控件的模板中，您几乎可以更改属于控件视觉外观的任何内容。

有关自定义控件模板的更多信息，请查看此链接：[MSDN 样式和模板](https://msdn.microsoft.com/library/ms745683(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-01T10:46:44.483

对于遇到此问题的任何人，您可以查看第三方控件，例如：[Syncfusion 的功能区](https://www.syncfusion.com/products/wpf/ribbon)（看起来像办公室主题）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-08-27T09:01:59.687

这很简单，在您的 App.xaml 中，您可以定义一个主题并将此主题分配给您想要的任何控件。例如，我已将 Office_Blue 定义为我的主题，并将此主题仅分配给我的 Button，如下所示：

```
 <Application.Resources>

    <telerik:Theme x:Key="TelerikGlobalTheme">Office_Blue</telerik:Theme>
      <Style BasedOn="{x:Null}" TargetType="{x:Type Button}">
        <Setter Property="telerik:StyleManager.Theme" Value="{DynamicResource TelerikGlobalTheme}" />
      </Style> 
```

您可以为上述定义的主题分配任意数量的控件。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-11-01T09:57:04.130

据我所知，有两个主题，一个是“Windows 7（默认）”，另一个是“Office 2007 Blue”。您可以通过将资源字典添加到窗口的资源来更改主题，该资源的来源是 office 2007 Blue 的 xaml 文件，如下所示：

```
<Window.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary 
          Source="/RibbonControlsLibrary;component/Themes/Office2007Blue.xaml"/>
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </Window.Resources> 
```

您可以将 Office2007Blue.xaml 复制到一个新的 xaml 文件并对其进行修改以创建自定义主题，然后按照与上述相同的方式引用它。

你可以从这里获得更多关于 Ribbon[的信息。](http://windowsclient.net/wpf/wpf35/wpf-35sp1-ribbon-walkthrough.aspx)

如果你想要快速简单的解决方案，那么试试这个现成[的 WPF 主题。](http://wpf.codeplex.com/wikipage?title=WPF%20Themes&ProjectName=wpf)

# android - 查看不动态更新

> ID：13174406
> 
> 赞同：0
> 
> 时间：2012-11-01T09:44:20.347
> 
> 标签：android

我想更新项目中存在的文本视图，以便在固定时间后更新，并希望在屏幕/ui 上显示更改。根据调试，文本视图的值正在更改，但更改在屏幕上不可见/ui.这些是 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/wrapper"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/comment"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_margin="5dip"
            android:background="@drawable/bubble_yellow"
            android:paddingLeft="10dip"
            android:text="Hello bubbles!"
            android:textColor="@android:color/primary_text_light" />
    </LinearLayout>

</LinearLayout> 
```

这是另一个xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

 <include
        layout="@layout/listitem_discuss" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" >
    </ListView>

</RelativeLayout> 
```

这是主要课程：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_discuss);
        random = new Random();
        ipsum = new LoremIpsum();

        lv = (ListView) findViewById(R.id.listView1);

        adapter = new DiscussArrayAdapter(getApplicationContext(), R.layout.listitem_discuss);

        lv.setAdapter(adapter);

        tv = (TextView)this.findViewById(R.id.comment);
        ll = (LinearLayout)findViewById(R.id.wrapper);

        addItems();
        ReduceTimeIteration();
    }

    public void ReduceTimeIteration() // checks after 2 minutes for any message to delete
    {

        try
        {
            final Handler m_handler = new Handler();
            m_handlerTask = new Runnable()
            {
                @Override 
                public void run() 
                {
                    String a = tv.getText().toString();
                    if(tv.getText() == "Hello bubbles!")
                    {
                                                   tv.setText("hi");                            
                    }
                    else{
                        tv.setText("hello");  // postInvalidate()
                        adapter.notifyDataSetChanged(); 
                    }
                    m_handler.postDelayed(m_handlerTask, 2000); 
                }
            };
            m_handlerTask.run();
        }
        catch(Exception e)
        {

        }
    }
    private String addItems() {
        String a = "Hello bubbles";
        adapter.add(new OneComment(true,a));
        return a;
    } 
```

}

这是数组适配器类：

```
public class DiscussArrayAdapter extends ArrayAdapter<OneComment> {

    private TextView countryName;
    private List<OneComment> countries = new ArrayList<OneComment>();
    private LinearLayout wrapper;

    @Override
    public void add(OneComment object) {
        countries.add(object);
        super.add(object);
    }

    public DiscussArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public int getCount() {
        return this.countries.size();
    }

    public OneComment getItem(int index) {
        return this.countries.get(index);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        if (row == null) {
            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.listitem_discuss, parent, false);
        }

        wrapper = (LinearLayout) row.findViewById(R.id.wrapper);

        OneComment coment = getItem(position);

        countryName = (TextView) row.findViewById(R.id.comment);

        countryName.setText(coment.comment);

        countryName.setBackgroundResource(coment.left ? R.drawable.bubble_yellow : R.drawable.bubble_green);
        wrapper.setGravity(coment.left ? Gravity.LEFT : Gravity.RIGHT);

        return row;
    }

    public Bitmap decodeToBitmap(byte[] decodedByte) {
        return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length);
    }

} 
```

这是我将数据传递给适配器的类：

```
public class OneComment {
    public boolean left;
    public String comment;

    public OneComment(boolean left, String comment) {
        super();
        this.left = left;
        this.comment = comment;
    }
} 
```

在这个项目中，我想更新主类中 textview tv 的值。该值实际上正在改变，但在屏幕/ui上看不到。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:11:48.130

尝试更改此方法

```
private String addItems() {
        String a = "Hello bubbles";
        adapter.add(new OneComment(true,a));
        return a;
    } 
```

到

```
private String addItems() {
        String a = "Hello bubbles";

        adapter.notifyDataSetChanged();

        adapter.add(new OneComment(true,a));

        adapter.notifyDataSetInvalidated();

        return a;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:48:01.153

您没有提到 LinearLayout 的方向。对于`LinearLayout`默认方向是`Horizontal`.，所以指定`android:orientation="vertical"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:48:53.637

我不确定您到底期待什么变化，但快速浏览一下，您`Runnable`对我来说似乎有点可疑。我认为`notifyDataSetChanged`应该在*if/else*条件之外调用，以便在任何一种情况下都更新适配器。

而且你不应该比较两个`Strings`使用`==`. **必须使用它们进行比较`equals()`**

```
 @Override 
        public void run() 
        {
            String a = tv.getText().toString();
            if(tv.getText().equals("Hello bubbles!"))
                tv.setText("hi");
            else
                tv.setText("hello");  // postInvalidate()

            adapter.notifyDataSetChanged();
            m_handler.postDelayed(m_handlerTask, 2000); 
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:00:30.807

您在 ReduceTimeIteration() 中声明您的处理程序。此方法发布一条消息以运行 runnable 然后退出。然后您的处理程序将被销毁，因为它不再在范围内。在类级别声明处理程序。

# xslt - XSLT 仅选择行集中的最后一个版本元素

> ID：13174409
> 
> 赞同：1
> 
> 时间：2012-11-01T09:44:30.360
> 
> 标签：xslt, foreach, unique, distinct, xslt-1.0

我的xml是：

```
<RowSet>
  <Row>
     <msg_id>1</msg_id>
     <doc_id>1</doc_id>
     <doc_version>1</doc_version>
  </Row>
  <Row>
     <msg_id>2</msg_id>
     <doc_id>1</doc_id>
     <doc_version>2</doc_version>
  </Row>
    <Row>
     <msg_id>3</msg_id>
     <doc_id>1</doc_id>
     <doc_version>3</doc_version>
  </Row>
      <Row>
     <msg_id>4</msg_id>
     <doc_id>2</doc_id>
     <doc_version>1</doc_version>
  </Row>
  <RowSet> 
```

我需要做什么：

如果有相同的行`doc_id`，我只需要选择`doc_version`数字较大的节点。

预期输出：

```
 <RowSet>
    <Row>
     <msg_id>3</msg_id>
     <doc_id>1</doc_id>
     <doc_version>3</doc_version>
   </Row>
      <Row>
     <msg_id>4</msg_id>
     <doc_id>2</doc_id>
     <doc_version>1</doc_version>
  </Row>
  <RowSet> 
```

也许它可能会有所帮助：`msg_id`是独一无二的，所以 Row 具有更大`msg_id`的相同`doc_id`保留最后一个`doc_version`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:23:52.120

**与其他一些答案不同，这种转换有效**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kRowByDocId" match="Row" use="doc_id"/>

 <xsl:template match="/*">
    <xsl:apply-templates select=
      "Row[generate-id()=generate-id(key('kRowByDocId', doc_id)[1])]"/>
 </xsl:template>

 <xsl:template match="Row">
     <xsl:for-each select="key('kRowByDocId',doc_id)">
      <xsl:sort select="doc_version" data-type="number" order="descending"/>

      <xsl:if test="position() = 1"><xsl:copy-of select="."/></xsl:if>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<RowSet>
    <Row>
        <msg_id>1</msg_id>
        <doc_id>1</doc_id>
        <doc_version>1</doc_version>
    </Row>
    <Row>
        <msg_id>2</msg_id>
        <doc_id>1</doc_id>
        <doc_version>2</doc_version>
    </Row>
    <Row>
        <msg_id>3</msg_id>
        <doc_id>1</doc_id>
        <doc_version>3</doc_version>
    </Row>
    <Row>
        <msg_id>4</msg_id>
        <doc_id>2</doc_id>
        <doc_version>1</doc_version>
    </Row>
</RowSet> 
```

**产生了想要的正确结果：**

```
<Row>
   <msg_id>3</msg_id>
   <doc_id>1</doc_id>
   <doc_version>3</doc_version>
</Row>
<Row>
   <msg_id>4</msg_id>
   <doc_id>2</doc_id>
   <doc_version>1</doc_version>
</Row> 
```

**说明**：

1.  正确使用**[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)**方法来查找属于每个不同组的一项。

2.  正确使用**[排序](http://www.w3.org/TR/1999/REC-xslt-19991116#element-sort)**来查找组中的最大项目。

3.  正确使用该**[`key()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-key)**功能 - 用于选择给定组中的所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:28:15.657

XSLT 1.0 解决方案

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:key name="doc_id" match="RowSet/Row" use="doc_id"/>
    <xsl:template match="/">
        <xsl:for-each select="RowSet/Row[generate-id() = generate-id(key('doc_id',doc_id))]">
            <xsl:sort select="doc_id" data-type="number" order="ascending"/>

            <xsl:for-each select="../Row[doc_id = current()/doc_id]">
                <xsl:sort select="doc_version" data-type="number" order="descending"/>
                <xsl:if test="position() = 1">
                    // stuff
                </xsl:if>
            </xsl:for-each>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

逻辑是：

*   获取每个唯一的文档 ID
*   然后跳上一个级别并使用该 doc_id 遍历每个 doc_version
*   取最高的doc_version

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T09:55:07.890

尝试这个

```
 <xsl:for-each-group select="RowSet/RowSet" group-by="doc_id">
       <xsl:for-each select="current-group()">
       <xsl:sort select="doc_version" order="desending"/>
          <xsl:if test="position()=1">
                   // do it your stuff here
            </xsl:if>
        </xsl:for-each>
    </xsl:for-each-group> 
```

# python - Python - 在将引发异常时启动交互式调试器

> ID：13174412
> 
> 赞同：22
> 
> 时间：2012-11-01T09:44:38.477
> 
> 标签：python, debugging, pdb

有什么方法可以让 python 程序启动一个交互式调试器，`import pdb; pdb.set_trace()`而不是实际抛出异常？

我知道完成这项工作的难度，但它比巨大的堆栈跟踪更有价值，之后我必须使用它来确定在哪里插入断点，然后重新启动程序来调试它。我知道简单地启动调试器而不是抛出异常是没有意义的，因为任何异常都可以在一个级别或另一个级别上被捕获，所以*如果我可以选择一个异常列表，一个交互式调试会话将启动**而不是**它们被抛出*（因为我知道这个列表中的异常确实是“错误”，之后不会出现有意义的程序行为）......

我听说 Common Lisp 有这样的东西，但我不知道它是如何工作的，只是“真正的 lispers” 对它赞不绝口......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T10:01:01.023

最简单的方法是将整个代码包装在这样的`try`块中：

```
if __name__ == '__main__':

    try:
        raise Exception()
    except:
        import pdb
        pdb.set_trace() 
```

有一个更复杂的解决方案用于`sys.excepthook`覆盖未捕获异常的处理，如 [本节](https://code.activestate.com/recipes/65287-automatically-start-the-debugger-on-an-exception/)所述：

```
## {{{ http://code.activestate.com/recipes/65287/ (r5)
# code snippet, to be included in 'sitecustomize.py'
import sys

def info(type, value, tb):
   if hasattr(sys, 'ps1') or not sys.stderr.isatty():
      # we are in interactive mode or we don't have a tty-like
      # device, so we call the default hook
      sys.__excepthook__(type, value, tb)
   else:
      import traceback, pdb
      # we are NOT in interactive mode, print the exception...
      traceback.print_exception(type, value, tb)
      print
      # ...then start the debugger in post-mortem mode.
      pdb.pm()

sys.excepthook = info
## end of http://code.activestate.com/recipes/65287/ }}} 
```

上面的代码应该包含在一个名为[`sitecustomize.py`](https://docs.python.org/3/library/site.html)inside `site-packages`directory 的文件中，该文件由 python 自动导入。调试器仅在 python 以非交互模式运行时启动。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-26T17:47:05.763

*这个问题很老了，所以这主要是为了未来的我*

```
try:
    ...
except:
    import traceback, pdb, sys
    traceback.print_exc()
    print ''
    pdb.post_mortem()
    sys.exit(1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-17T04:54:17.930

我写[了一个包](https://pypi.org/project/mort/)来在异常时启动 pdb。它接受@boreis-gorelik 的回答，并在运行时修改解释器状态，因此无需更改代码：

# 安装

```
 pip install mort 
```

# 用法

```
mort <file.py or module to execute> 
```

发生异常时，pdb repl 应在给定终端中启动

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-01T15:13:57.990

如果你在 REPL 里面，你可以做

```
import sys
import pdb
pdb.post_mortem(sys.last_traceback) 
```

请参阅[https://docs.python.org/2/library/pdb.html](https://docs.python.org/2/library/pdb.html)和[https://docs.python.org/3/library/traceback.html](https://docs.python.org/3/library/traceback.html)

# alloy - 合金初学者的概念

> ID：13174418
> 
> 赞同：0
> 
> 时间：2012-11-01T09:44:54.997
> 
> 标签：alloy

我对合金很陌生，目前正在阅读 mit 的教程。我有点卡在事情的逻辑上。我正在尝试做的一件非常基本的事情如下。

*   一个人最多只能完成一项任务
*   一项任务最多可由 1 人完成
*   一个人只能做他/她能够做的事

当我运行以下命令时，每个人都具有相同的技能（所有技能），并且每项任务都需要相同的技能（再次全部）。每个人至少被分配一项任务，但有时他们会获得相同的任务。

提前致谢

```
some sig Skills{ }

some sig Person  {
 has:  some Skills, 
 assigned: lone Task
 }

some sig Task
 {  
 requires: some Skills
 }
 {
// everyone must have the required task skills for assignment
 all p:Person | p.has= requires
 }

pred Valid ()
 {  
//everyone must be assigned to single task
  all p:Person | lone t:Task| p.assigned in t
// no one can have the same task
  no p1:Person , p2:Person | p1.assigned not in p2.assigned
 }

run Valid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:51:47.233

您的模型中有许多不正确的地方。

> *   *一个人最多只能完成一项任务*

要实现这一点，签名中字段的`lone`多重性修饰符就足够了。如果您希望每个人都只分配一个任务，您可以更改为.`assigned``Person``lone``one`

> *   *一项任务最多可由 1 人完成*

`Valid`您在谓词中的约束是错误的，因为`p1.assigned not in p2.assigned`您应该写而不是`p1.assigned = p2.assigned`说没有两个人分配了相同的任务。此外，您应该添加一个约束来确保`p1 != p2`. 或者，您可以编写`all p1, p2: Person | p1 != p2 implies p1.assigned != p2.assigned`. 最后，为了避免写`p1 != p2`在量词体中，您可以使用`disj`关键字来表示，例如`no disj p1, p2: Person | p1.assigned = p2.assigned`，或`all disj p1, p2: Person | p1.assigned != p2.assigned`。

> *   *一个人只能做他/她能够做的事*

您在签名的附加事实部分中的约束`Task`是错误的，因为它根本没有提到该`assigned`字段，这是您必须做的，以便说明对于每个人和分配给他们的任务，该人具有所有技能任务要求的。您所写的内容意味着对于每项任务，每个人都具有该任务所需的所有技能。满足这一点的唯一方法是，如果所有任务都具有相同的技能集，这正是您在为模型获得的所有实例中所注意到的。

这是我将如何建模（注意字段和签名名称的细微变化，这使模型更具可读性和可理解性）：

```
some sig Skill {}

some sig Person  {
    hasSkill:  some Skill, 
    assignedTask: lone Task
}

some sig Task {  
    requiredSkills: some Skill
}

// everyone must have the required skills for the assigned task
fact requiredTaskSkills {
    all p:Person | p.hasSkill in p.assignedTask.requiredSkills
}

// everyone has at least one assigned task
pred atLeastOneTask {
    all p: Person | one p.assignedTask
}

// no two persons can have the same task assigned 
pred uniqueTaskAssignments {
    no disj p1, p2: Person | p1.assignedTask = p2.assignedTask
}    

run { 
    atLeastOneTask and uniqueTaskAssignments
} 
```

# hadoop - Cassandras Map Reduce 支持

> ID：13174422
> 
> 赞同：6
> 
> 时间：2012-11-01T09:45:15.807
> 
> 标签：hadoop, mapreduce, cassandra, apache-pig

我最近遇到了一个案例，Cassandra 非常适合存储基于时间的事件，每个事件类型都有自定义 ttls（另一种解决方案是将它保存在 hadoop 中并手动进行簿记（ttls 和东西，恕我直言，这是一个非常复杂的想法）或切换到 hbase）。问题是 cassandra MapReduce 支持在没有 Datastax 企业版的情况下开箱即用的效果如何。

似乎他们在 CassandraFS 上投入了很多，但我问自己，普通的 Pig CassandraLoader 是否得到积极维护并且实际上可以扩展（因为它似乎只是在切片中迭代行）。这适用于数以百万计的行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:27:46.257

您可以使用随机分区器进行映射/减少，但当然您获得的密钥是随机顺序的。您可能想在 cassandra 中使用 CL = 1 ，因此您不必每次在执行 map/reduce 时都从 2 个节点读取数据，它应该读取本地数据。不过我没用过猪。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-01T12:40:58.907

为什么不用hbase？Hbase 更适合时间序列数据。您可以轻松地将数十亿行放在非常小的集群上，并在启用 WAL 的小型 3 节点集群（高达 50MB/s）上每秒获得高达 500k 行。Cassandra 有几个缺陷：

1.  在 cassandra 中，您实际上受到键数量的限制（想象一下，如果有数十亿行，您的修复将永远有效）。因此，您将设计架构，它将您的时间“分片”，例如 1 小时，实际时间戳将作为列放置。但是由于“巨大列”的高风险，这种方案不能很好地扩展。
2.  其他问题 - 您不能在 cassandra 中映射减少数据范围，除非您使用有序分区器，这根本不是一个选项，因为它无法很好地平衡。

# javascript - JS 到 jQuery 的简写

> ID：13174423
> 
> 赞同：2
> 
> 时间：2012-11-01T09:45:24.090
> 
> 标签：javascript, jquery

**编辑**

在我的代码中，我有一些速记 JS，工作中的一位同事帮助了我。我并不完全理解它，如果将它改回简单的 jQuery，我会更高兴。我曾尝试过自己，但它一直在破裂。

这是速记

```
if (target.length) {
    target.addClass("occupied");
    $(".occupied").parent(".flip-wrapper").addClass("flipped");
    b.clone().addClass(
    b.data("letter") == target.parents('td').data("letter") ? "right-letter" : "wrong-letter").appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target); 
```

我试图像这样改变它

```
 if (target.length) {
    target.addClass("occupied");
    $(".occupied").parent(".flip-wrapper").addClass("flipped");
    b.clone().addClass(
    if $(b.data("letter") == target.parents('td').data("letter")) {
      $(this).addClass("right-letter");
     } else { 
      $(this).addClass("wrong-letter")
      }.appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target); 
```

我哪里错了？

小提琴：http: [//jsfiddle.net/smilburn/Dxxmh/82/](http://jsfiddle.net/smilburn/Dxxmh/82/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:57:41.130

您缺少左括号：

```
if $(b.data("ocupied") == ... 
```

将其更改为：

```
if ($(b).data("ocupied") == ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:03:22.863

主要问题在于，`addClass`方法。请看api

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

改变

```
b.clone().addClass( 
```

只是`b.clone()`

由于 addClass 不能像这样直接接收 if 条件，因此您需要将它们包装起来`function(){}`或者只是删除 addClass 那里

**工作代码在这里**

[http://jsfiddle.net/Dxxmh/86/](http://jsfiddle.net/Dxxmh/86/)

# c# - 在运行时更改嵌入的资源文件

> ID：13174425
> 
> 赞同：4
> 
> 时间：2012-11-01T09:45:23.773
> 
> 标签：c#, resources, embedded-resource

我编写了一个程序，该程序使用资源（嵌入式 TEXT 文件）作为程序默认配置。我希望能够允许用户更改此默认行为。我想知道如何修改嵌入的资源文件，以便在使用以下程序时它会使用修改后的版本。

感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T09:47:44.927

我认为您正在寻找的是一个[`settings`](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)文件。嵌入的资源被编译到您的 exe/dll 中，并不意味着被修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T09:50:16.970

这是更新嵌入在项目中的文件的一种方法，这里是 xml 文件的示例。您可以根据需要将其更改为txt文件

```
string path = Path.Combine(
Environment.GetFolderPath(
Environment.SpecialFolder.ApplicationData), 
Application.CompanyName);

path = Path.Combine(path, Application.ProductName);
path = Path.Combine(path, subFolder);
path = Path.Combine(path, "fileName.xml");

if(!File.Exists(path)){
    Assembly thisAssembly = Assembly.GetExecutingAssembly();
    Stream rgbxml = thisAssembly.GetManifestResourceStream(
"YourNamespace.fileName.xml");          
    XmlDocument doc = new XmlDocument();
    doc.Load(rgbxml);

    doc.PreserveWhitespace = true;
    doc.Save(path); 
```

查看完整文章：[**在 C# 运行时保存一个嵌入式资源 XML 文件**](http://weblogs.asp.net/cfrazier/archive/2005/07/18/419812.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T14:37:07.837

您最好尝试使用 Properties 来保存设置，例如：Properties.Settings.Default

要添加属性，请在解决方案资源管理器中右键单击 -> 属性 -> 设置（选项卡）

然后添加您需要的任何内容，然后从 .Default 进行代码访问

要在运行时保存更新设置，请使用以下命令：Properties.Settings.Default.Save()

希望这可以帮助

# perl - 不使用地图重写地图代码

> ID：13174427
> 
> 赞同：0
> 
> 时间：2012-11-01T09:45:24.390
> 
> 标签：perl

我正在编写一个调用 VMware vSphere perl API 的 perl 脚本。我遇到了一些问题，在谷歌搜索时，我找到了一个似乎对我有用的解决方案。但是，代码的重要部分之一是用`map`. 归功于编写它的 VMware 社区成员。这是代码：

```
$datastore_map = map { $_->{'mo_ref'}->{'value'} => $_  } @{$datastore_views || [ ]}; 
```

我无法理解上面的行在做什么。

所以，你能帮我把上面的行转换成 foreach 循环或类似的东西吗？相信 TMTOWTDI，必须有另一种方法来编写相同的逻辑。

我试图学习这个`map`功能很多次，但它总是在我脑海中浮现。因此，我想在不使用该`map`功能的情况下实现上述逻辑。

**编辑：**

阅读答案后，我认为应该是`%datastore_map`而不是`$datastore_map`。因为代码的下一行是`$datastore = $datastore_map->{$moref->{'value'}};`

它必须是一个错字。

当 stacoverflow 允许时，我会接受答案。感谢您的快速回复。我花了将近一个小时试图理解它并失败了。

谢谢。

**编辑：**

感谢@nickisfat、@choroba 和@ikegami 的回复。所有答案都是正确的，但我只能接受一个。所以我会选择按时间顺序最先发布的那个。再次感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T09:56:27.267

```
map BLOCK LIST 
```

非常相似

```
do {
   my @list;
   for (LIST) {
      push @list, do BLOCK;
   }
   @list
}; 
```

您发布的代码毫无意义。作业的 LHS 实际上是一个散列，或者缺少一组花饰。假设您的代码实际上是

```
my $datastore_map = {
    map { $_->{'mo_ref'}->{'value'} => $_ }
     @{ $datastore_views || [ ] }
}; 
```

在开始之前，让我们将其重写为以下内容以使事情变得更简单。

```
my %datastore_map =
    map { $_->{'mo_ref'}->{'value'} => $_ }
     @{ $datastore_views || [ ] };

my $datastore_map = \%datastore_map; 
```

所以这意味着你所拥有的相当于

```
my %datastore_map = do {
   my @list;
   for (@{ $datastore_views || [ ] }) {
      push @list, do { $_->{'mo_ref'}->{'value'} => $_ };
   }
   @list
};      

my $datastore_map = \%datastore_map; 
```

我们可以将其简化为

```
my %datastore_map;
for (@{ $datastore_views || [ ] }) {
   $datastore_map{ $_->{'mo_ref'}->{'value'} } = $_;
}      

my $datastore_map = \%datastore_map; 
```

或者

```
my %datastore_map;
if ($datastore_views) {
   for (@$datastore_views) {
      $datastore_map{ $_->{'mo_ref'}->{'value'} } = $_;
   }
}      

my $datastore_map = \%datastore_map; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:50:58.037

您确定要将结果赋值给标量吗？

如果没有，只需使用以下内容：

```
my %datastore_map;
for my $view (@$datastore_views) {
    $datastore_map{$view->{mo_ref}{value}} = $view;
} 
```

如果是，您想获得查看次数乘以 2。所以，只需使用

```
$datastore_map = 2 * @$datastore_views; 
```

但是，在这种情况下，变量的名称选择不当。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:52:39.957

$datastore_views 是一个包含散列的数组，代码创建这些散列 ($datastore_map) 的散列，以 {'mo_ref'}->{'value'} 的内容为键。

在 foreach 中：

```
foreach my $item( @$datastore_views ){
    $datastore_map->{ $item->{'mo_ref'}->{'value'} } = $item;
} 
```

编辑：

或者至少如果原始代码是：

```
%$datastore_map = map { $_->{'mo_ref'}->{'value'} => $_  } @{$datastore_views || [ ]}; 
```

# git - 使用 cloudbees 和 bitbucket 从 git 触发 jenkins 构建

> ID：13174433
> 
> 赞同：5
> 
> 时间：2012-11-01T09:45:45.650
> 
> 标签：git, continuous-integration, jenkins, bitbucket, cloudbees

当我提交到我的 git repo 时，我试图自动触发 jenkins 构建。我正在使用 cloudbees jenkins 实例，我的仓库位于 butbucket。

我在我的 bitbucket 存储库上配置了 jenkins 服务，但它似乎没有在 jenkins 上启动构建。要配置它，我使用了以下内容：

```
Endpoint: https://<my-email>:<my-api-token>@myaccount.ci.cloudbees.com
Project name: <my-build-job-name>
Token: <my-token-name> 
```

我已经正确设置了 cloudbees SSH 公钥到 bitbucket，并验证了 jenkins 在手动触发时确实成功构建了我的项目。但是，当我将更改推送到我的存储库时，它似乎不起作用。

我遵循了以下教程：[http ://wiki.cloudbees.com/bin/view/DEV/Bitbucket](http://wiki.cloudbees.com/bin/view/DEV/Bitbucket)

有没有人设法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T05:27:23.917

我也遵循了[CloudBees BitBucket 教程](http://wiki.cloudbees.com/bin/view/DEV/Bitbucket) ，但我发现我跳过了一步，因为它是法语的。

步骤是检查（在 Jenkins 配置中）**远程构建触发器（例如，从脚本）**复选框，并确保给定的**身份验证令牌**与提供给 BitBucket 服务的**令牌相同。**正如教程所说，这就是“魔法发生”的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:09:40.063

我写了[这篇](https://wiki.cloudbees.com/bin/view/DEV/Bitbucket)关于在 Cloudbees 上将 bitbucket 与 jenkins 集成的文档，但 bitbucket 并未正式支持服务挂钩上的凭据，这似乎不适用于所有帐户，即使我不知道为什么它有时会失败。Cloudbees 实例永远不会收到设置了凭据的通知 http 请求。

也许一个 bitbucket 插件会有所帮助，就像我们让 github 和 gitlab 管理提交挂钩一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T20:37:07.477

我在[这里](https://stackoverflow.com/questions/17116495/bitbucket-does-not-trigger-jenkins-builds-on-cloudbees/17116496#17116496)为碰巧登陆此页面的其他人发布了一个相关的解决方案。

# ruby-on-rails - Rails 嵌套 with_option :if 用于验证

> ID：13174435
> 
> 赞同：16
> 
> 时间：2012-11-01T09:46:00.450
> 
> 标签：ruby-on-rails, ruby, validation, nested

```
validate :updatable?  # First validation there is
with_options :if => Proc.new { |object| object.errors.empty? } do |updatable|
    updatable.with_options :if => "self.current_step == basic" do |step|
        validates .... bla-bla bla 
```

因此，在进行任何验证之前，将调用*可更新*子例程并使用适当的错误填充`errors[:base]`数组，这意味着该对象不可更新。如果在此子例程中发现任何错误，我希望它跳过其余的验证，但上述示例**不起作用**- 它执行所有验证。

但是，如果我改成`:if => "self.current_step == basic"`is`:if => "self.errors.empty? && self.current_step == basic"`就像一个魅力。

我做错了什么？示例表明，嵌套`with_option`应该可以工作。

有人能帮我吗 ？提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-13T14:28:52.547

你是对的，当嵌套两个 :if 条件时，内部的将替换外部的并且总是被检查。处理两级嵌套的解决方法是：

```
with_options :unless => !(outer condition) do
  with_options :if => (inner condition) do 
```

if 和 unless 条件不会相互覆盖。我不确定我是否会将此称为错误，但如果您可以嵌套多个 :if 条件会很好。

# java - 我有办法自动锁定 2 个或更多锁或监视器吗？

> ID：13174439
> 
> 赞同：4
> 
> 时间：2012-11-01T09:46:26.553
> 
> 标签：java, concurrency, locking, critical-section

我有办法自动锁定 2 个或更多锁或监视器吗？我的意思是，假设我的线程希望锁定 2 个锁并等待它们都空闲，即永远不要锁定一个然后等待另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:52:17.613

我认为这相当于哲学家就餐问题 - 访问[Wikipedia 条目](http://en.wikipedia.org/wiki/Dining_philosophers_problem)可以为您提供几种可能的解决方案。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T03:16:08.830

没有办法以原子方式获取多个监视器。

锁系统可以设计为做类似的事情，尽管效率低下。

如果没有关于您的用例的更多信息，很难规定任何潜在的解决方案，但有一种模式可以*安全地*获取多个锁，而不会出现死锁的可能性。

我知道这不是你所要求的，我很乐意用更多细节为你指出一个更好的方向，但如果你唯一的愿望是避免僵局，请这样做：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class LockSort{

  private int ptr = 0;
  private final Object[] locks;
  private final Runnable toRun;

  private LockSort(Runnable r, Object[] l){
    locks = l;
    Arrays.sort(locks, identCompare);
    toRun = r;
  }

  private static final Comparator<Object> identCompare = new Comparator<Object>(){
    @Override
    public int compare(Object a, Object b){
      return System.identityHashCode(a) - System.identityHashCode(b);
    }
  };

  private void lockSingle(){
    synchronized(locks[ptr++]){
      dispatch();
    }
  }

  private static final Map<Integer, MutableInteger> breakers = new HashMap<>();

  private static MutableInteger getTieBreaker(Integer hash){
    synchronized(breakers){
      MutableInteger b = breakers.get(hash);
      if(null != b){
        b.val++;
        return b;
      }
      breakers.put(hash, b = new MutableInteger(1));
      return b;
    }
  }

  private static void releaseTieBreaker(Integer hash){
    synchronized(breakers){
      MutableInteger b = breakers.get(hash);
      if(0 == --b.val)
        breakers.remove(hash);
    }
  }

  private void breakTie(){
    final Integer hash = System.identityHashCode(locks[ptr]);
    try{
      synchronized(getTieBreaker(hash)){
        synchronized(locks[ptr++]){
          dispatch();
        }
      }
    }finally{
      releaseTieBreaker(hash);
    }
  }

  private void dispatch(){
    if(ptr == locks.length)
      toRun.run();
    else if(ptr + 1 == locks.length || System.identityHashCode(locks[ptr]) != System.identityHashCode(locks[ptr + 1]))
      lockSingle();
    else
      breakTie();
  }    import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class LockSort{

  private int ptr = 0;
  private final Object[] locks;
  private final Runnable toRun;

  private LockSort(Runnable r, Object[] l){
    locks = l;
    Arrays.sort(locks, identCompare);
    toRun = r;
  }

  private static final Comparator<Object> identCompare = new Comparator<Object>(){
    @Override    import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class LockSort{

  private int ptr = 0;
  private final Object[] locks;
  private final Runnable toRun;

  private LockSort(Runnable r, Object[] l){
    locks = l;
    Arrays.sort(locks, identCompare);
    toRun = r;
  }

  private static final Comparator<Object> identCompare = new Comparator<Object>(){
    @Override
    public int compare(Object a, Object b){
      return System.identityHashCode(a) - System.identityHashCode(b);
    }
  };

  private void lockSingle(){
    synchronized(locks[ptr++]){
      dispatch();
    }
  }

  private static final Map<Integer, MutableInteger> breakers = new HashMap<>();

  private static MutableInteger getTieBreaker(Integer hash){
    synchronized(breakers){
      MutableInteger b = breakers.get(hash);
      if(null != b){
        b.val++;
        return b;
      }
      breakers.put(hash, b = new MutableInteger(1));
      return b;
    }
  }

  private static void releaseTieBreaker(Integer hash){
    synchronized(breakers){
      MutableInteger b = breakers.get(hash);
      if(0 == --b.val)
        breakers.remove(hash);
    }
  }

  private void breakTie(){
    final Integer hash = System.identityHashCode(locks[ptr]);
    try{
      synchronized(getTieBreaker(hash)){
        synchronized(locks[ptr++]){
          dispatch();
        }
      }
    }finally{
      releaseTieBreaker(hash);
    }
  }

  private void dispatch(){
    if(ptr == locks.length)
      toRun.run();
    else if(ptr + 1 == locks.length || System.identityHashCode(locks[ptr]) != System.identityHashCode(locks[ptr + 1]))
      lockSingle();
    else
      breakTie();
  }

  public static void lockMultipleAndRun(Runnable toRun, Object... toLock){
    new LockSort(toRun, toLock).dispatch();
  }

  public static void lockMultipleAndRun(Runnable toRun, Collection<Object> toLock){
    new LockSort(toRun, toLock.toArray()).dispatch();
  }

  private static class MutableInteger{
    int val;

    MutableInteger(int i){
      val = i;
    }
  }

  public static void main(String args[]){
    final int THREADS = 0 == args.length ? Runtime.getRuntime().availableProcessors() : Integer.valueOf(args[0]);

    for(int j = 0; j < 1000; j++){
      final int RUNID = j;
      final Object locks[] = new Object[300];
      for(int i = 0; i < 300; i++){
        locks[i] = new Object(){
        };
      }

      List<Thread> threads = new ArrayList<>(50);
      for(int i = 0; i < THREADS; i++){

        final int ID = i;
        Thread t = new Thread(new Runnable(){
          @Override
          public void run(){
            for(int i = 0; i < 1000; i++){
              int a = (int) Math.floor(Math.random() * 300.0);
              int b = (int) Math.floor(Math.random() * 300.0);
              final int l = Math.min(a, b);
              final int h = Math.max(a, b);

              final int CT = i;

              lockMultipleAndRun(new Runnable(){
                @Override
                public void run(){
                  System.out.println(RUNID + ":" + ID + " @ " + CT + " w/ " + l + "-" + h);
                }
              }, Arrays.copyOfRange(locks, l, h));

            }
          }
        });
        t.start();
        threads.add(t);
      }

      for(Thread t : threads){
        try{
          t.join();
        }catch(InterruptedException e){
          throw new RuntimeException(e);
        }
      }

    }
  }

}

    public int compare(Object a, Object b){
      return System.identityHashCode(a) - System.identityHashCode(b);
    }
  };

  private void lockSingle(){
    synchronized(locks[ptr++]){
      dispatch();
    }
  }

  private static final Map<Integer, MutableInteger> breakers = new HashMap<>();

  private static MutableInteger getTieBreaker(Integer hash){
    synchronized(breakers){
      MutableInteger b = breakers.get(hash);
      if(null != b){
        b.val++;
        return b;
      }
      breakers.put(hash, b = new MutableInteger(1));
      return b;
    }
  }

  private static void releaseTieBreaker(Integer hash){
    synchronized(breakers){
      MutableInteger b = breakers.get(hash);
      if(0 == --b.val)
        breakers.remove(hash);
    }
  }

  private void breakTie(){
    final Integer hash = System.identityHashCode(locks[ptr]);
    try{
      synchronized(getTieBreaker(hash)){
        synchronized(locks[ptr++]){
          dispatch();
        }
      }
    }finally{
      releaseTieBreaker(hash);
    }
  }

  private void dispatch(){
    if(ptr == locks.length)
      toRun.run();
    else if(ptr + 1 == locks.length || System.identityHashCode(locks[ptr]) != System.identityHashCode(locks[ptr + 1]))
      lockSingle();
    else
      breakTie();
  }

  public static void lockMultipleAndRun(Runnable toRun, Object... toLock){
    new LockSort(toRun, toLock).dispatch();
  }

  public static void lockMultipleAndRun(Runnable toRun, Collection<Object> toLock){
    new LockSort(toRun, toLock.toArray()).dispatch();
  }

  private static class MutableInteger{
    int val;

    MutableInteger(int i){
      val = i;
    }
  }

  public static void main(String args[]){
    final int THREADS = 0 == args.length ? Runtime.getRuntime().availableProcessors() : Integer.valueOf(args[0]);

    for(int j = 0; j < 1000; j++){
      final int RUNID = j;
      final Object locks[] = new Object[300];
      for(int i = 0; i < 300; i++){
        locks[i] = new Object(){
        };
      }

      List<Thread> threads = new ArrayList<>(50);
      for(int i = 0; i < THREADS; i++){

        final int ID = i;
        Thread t = new Thread(new Runnable(){
          @Override
          public void run(){
            for(int i = 0; i < 1000; i++){
              int a = (int) Math.floor(Math.random() * 300.0);
              int b = (int) Math.floor(Math.random() * 300.0);
              final int l = Math.min(a, b);
              final int h = Math.max(a, b);

              final int CT = i;

              lockMultipleAndRun(new Runnable(){
                @Override
                public void run(){
                  System.out.println(RUNID + ":" + ID + " @ " + CT + " w/ " + l + "-" + h);
                }
              }, Arrays.copyOfRange(locks, l, h));

            }
          }
        });
        t.start();
        threads.add(t);
      }

      for(Thread t : threads){
        try{
          t.join();
        }catch(InterruptedException e){
          throw new RuntimeException(e);
        }
      }

    }
  }

}

  public static void lockMultipleAndRun(Runnable toRun, Object... toLock){
    new LockSort(toRun, toLock).dispatch();
  }

  public static void lockMultipleAndRun(Runnable toRun, Collection<Object> toLock){
    new LockSort(toRun, toLock.toArray()).dispatch();
  }

  private static class MutableInteger{
    int val;

    MutableInteger(int i){
      val = i;
    }
  }

  public static void main(String args[]){
    final int THREADS = 0 == args.length ? Runtime.getRuntime().availableProcessors() : Integer.valueOf(args[0]);

    for(int j = 0; j < 1000; j++){
      final int RUNID = j;
      final Object locks[] = new Object[300];
      for(int i = 0; i < 300; i++){
        locks[i] = new Object(){
        };
      }

      List<Thread> threads = new ArrayList<>(50);
      for(int i = 0; i < THREADS; i++){

        // Shuffle the locks per-thread to see more highly chaotic and difficult to deal with locking behavior
        final Object[] myLocks = new Object[300];
        System.arraycopy(locks, 0, myLocks, 0, 300);
        for(int k = 0; k < 300; k++){
          int a = (int) Math.floor(Math.random() * 300.0);
          int b = (int) Math.floor(Math.random() * 300.0);
          Object o = myLocks[a];
          myLocks[a] = myLocks[b];
          myLocks[b] = o;
        }

        final int ID = i;
        Thread t = new Thread(new Runnable(){
          @Override
          public void run(){
            for(int i = 0; i < 1000; i++){
              int a = (int) Math.floor(Math.random() * 300.0);
              int b = (int) Math.floor(Math.random() * 300.0);
              final int l = Math.min(a, b);
              final int h = Math.max(a, b);

              final int CT = i;

              lockMultipleAndRun(new Runnable(){
                @Override
                public void run(){
                  System.out.println(RUNID + ":" + ID + " @ " + CT + " w/ " + l + "-" + h);
                }
              }, Arrays.copyOfRange(locks, l, h));

            }
          }
        });
        t.start();
        threads.add(t);
      }

      for(Thread t : threads){
        try{
          t.join();
        }catch(InterruptedException e){
          throw new RuntimeException(e);
        }
      }

    }
  }

} 
```

它看起来像很多递归调用，但让 JIT 担心这一点。只要您需要获取多个锁的所有代码都这样做，那么您将永远不会死锁。我包含了 test main 方法，因此您可以自己测试它。

锁总是以相同的顺序获取，除非锁链中的两个或多个身份哈希相同（非常罕见的事件），在这种情况下，首先获取该哈希唯一的决胜局以确保只有一个线程试图锁定具有该特定哈希码的多个对象可以继续。

应该很明显，这可以如何扩展到任何其他锁类型，但要小心重复的不可重入锁，因为这**会**导致死锁。同步块是可重入的，因此这里没有风险。它也可以很容易地与 Callable 类型一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T18:59:59.613

您可以使用额外的锁。

假设您想要获取锁`l_0`, `l_1`, ..., `l_n`。要以原子方式获取所有锁，请引入一个附加锁`l_extra`：

```
synchronized (l_extra) {
   synchronized (l_0) {
      synchronized (l_1) {
         // ...
      }
   }
} 
```

# django - django admin - 如何显示缩略图而不是文件路径

> ID：13174440
> 
> 赞同：2
> 
> 时间：2012-11-01T09:46:41.297
> 
> 标签：django, django-admin

我正在尝试在管理界面中显示模型的缩略图。当我使用 list_display() 添加图像字段时，它显示文件的路径而不是图像本身。如何显示图像并控制其大小？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T09:52:09.880

我通过添加解决了这个问题：

```
def image_thumb(self):
    return '<img src="/media/%s" width="100" height="100" />' % (self.photo)
image_thumb.allow_tags = True 
```

到models.py中的模型

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T09:51:29.560

过去对这个问题有一些相当详细的答案，试试这个链接。

[Django 管理员并显示缩略图](https://stackoverflow.com/questions/1385094/django-admin-and-showing-thumbnail-images)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-03T23:42:24.500

顺便说一句，对于像我这样的所有菜鸟：它也适用于 StackedInline 和 TabularInline，但如果你使用这个解决方案，你应该在 admin.py 中添加：

```
fields = (..., 'image_thumb', ...) # as you have expected
readonly_fields = ['image_thumb'] # without this there will be traceback 
```

# c# - 转换旧代码帮助。VB6（我认为）到 C#

> ID：13174442
> 
> 赞同：0
> 
> 时间：2012-11-01T09:46:44.257
> 
> 标签：c#, vb.net, legacy

我已经尝试过遵循这一点，但我正在努力将它融入 C#。

```
Private Function TransmitHex(nChar As Byte, nOption As Boolean) As Boolean
    Dim sHex As String
    Dim nHi As Byte
    Dim nLo As Byte

    sHex = Right("00" + Hex(nChar), 2)

    nHi = AscW(Left$(sHex, 1))
    nLo = AscW(Right$(sHex, 1))

    Comm.Output = ChrW$(nHi)

    Comm.Output = ChrW$(nLo)

End Function 
```

我有 2 个字节，我认为它们被传递到这里。4 和 176。我也无法运行代码。

谁能告诉我等效的 C# 是什么？或者只是解释一下 nChar 在通过的过程中会发生什么。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:05:48.840

```
public bool TransmitHex(byte char, bool opt)
{
    //convert to chat to a hex string and that to an array of chars
    var hex = char.ToString("X2").ToCharArray();
    //open a connection to a serialport
    var sp = new SerialPort("COM1");
    //write the hex vals
    sp.Write(hex,0,1);
    sp.Write(hex,1,1);
    return true;
} 
```

# java - 在 java 类中使用命名参数

> ID：13174444
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:46:54.683
> 
> 标签：java

我有一个使用命名参数和可选参数的用例。我尝试在教程中使用命名参数，但它不起作用

我的代码是

```
public static void Main(String[] args)
  {
     System.out.println((CalculateBMI(weight= 123, height: 64));
  }
  public static int CalculateBMI(int weight, int height)
  {
      return (weight * 703) / (height * height);
  } 
```

得到错误“重量无法解析为变量”请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:48:03.653

您可能读错了教程，Java 既不支持命名参数也不支持可选参数。

# 也可以看看：

*   [Java中的命名参数习语](https://stackoverflow.com/questions/1988016)
*   [Java 可选参数](https://stackoverflow.com/questions/965690)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:48:19.047

这是你能做的最好的：

```
int weight = 123; 
int height = 64;    
System.out.println((CalculateBMI(weight, height)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:54:21.473

Java 不支持命名参数。编译为 Java 字节码的 Groovy**确实**具有命名参数。您还可以使用 Groovy 编译 Java 源文件（不推荐，因为您不会从 Groovy 的功能中受益）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:50:37.190

代码是：

```
public static void Main(String[] args) {
    System.out.println(CalculateBMI(123,64));
}

public static int CalculateBMI(int weight, int height) {
    return (weight * 703) / (height * height);
} 
```

# c# - 如何获取复选框列表数据绑定事件中每个项目的 ID？

> ID：13174454
> 
> 赞同：0
> 
> 时间：2012-11-01T09:47:35.850
> 
> 标签：c#, asp.net, checkboxlist, databound

我有一个`CheckBoxList`，我需要`id`在其`DataBound`活动中获取其中的每个项目，但我不知道如何获取它，请帮助我。

这是我的代码：

HTML：

```
<asp:CheckBoxList ID="chklstArea"
                  RepeatColumns="6" 
                  RepeatDirection="Vertical" 
                  runat="server"
                  ondatabound="chklstArea_DataBound">
</asp:CheckBoxList> 
```

这是代码背后的代码：

```
 protected void drpLocation_SelectedIndexChanged(object sender, EventArgs e)
 {
    if (drpLocation.SelectedItem.Value != "")
    {
        lbtnSelectArea.Visible = true;
        objAreaNew = new ClsAreaNew();
        ClsAreaNewProp objAreaNewProp = new ClsAreaNewProp();
        objAreaNewProp.LocationId = Convert.ToInt64(drpLocation.SelectedItem.Value);
        DataTable dtAreaByLocId = objAreaNew.GetAllAreaListByLocID(objAreaNewProp);
        if (dtAreaByLocId.Rows.Count > 0)
        {
            divAreaListingHeader.Visible = true;
            chklstArea.DataSource = dtAreaByLocId;
            chklstArea.DataTextField = "AreaName";
            chklstArea.DataValueField = "areaid";
            chklstArea.DataBind();
            lblStatusMessage.Text = "";
        }
        else
        {
            divAreaListingHeader.Visible = false;
            dtAreaByLocId = null;
            chklstArea.DataSource = dtAreaByLocId;
            chklstArea.DataTextField = "AreaName";
            chklstArea.DataValueField = "areaid";
            chklstArea.DataBind();
            lblStatusMessage.Text = "This Location does not have any area.";
        }
    }
    else
    {
        lbtnSelectArea.Visible = false;
        divAreaListingHeader.Visible = false;

        chklstArea.DataSource = null;
        chklstArea.DataTextField = "AreaName";
        chklstArea.DataValueField = "areaid";
        chklstArea.DataBind();
        lblStatusMessage.Text = "Please select location.";
    }
} 
```

实际上我需要做的是：我需要在此复选框列表中绑定的项目 id 的基础上绑定另一个复选框列表。像这里我是绑定区域。现在我想绑定另一个房间的复选框列表，我想使用区域 id 的 id 来获取该特定区域的房间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:01:56.437

chklstArea.ClientID 将为您提供“CheckBoxList”控件的客户端 ID。对于获取单个复选框的 clientId，您可以使用以下代码。

```
int index = 0;
string checkBoxIDs = ""; //Comma Seperated IDs
foreach (ListItem listItem in chklstArea.Items)
{
  checkBoxIDs = chklstArea.ClientID + "_" + index + ",";
  index++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:59:56.190

根据您的要求和我的理解，您需要使用中继器或任何其他包含复选框列表的数据绑定控件。如下：

**HTML代码是：**

```
<div class="outerlin" id="divAreaListingHeader" runat="server" style="margin-top: 15px;
                            width: 99%;">
                            <div class="maintitle">
                                Areas</div>
                            <br />
                            <span style="float: left; padding-left: 7px;">
                                <input type="checkbox" id="chkAll" />Select All<br />
                            </span>
                            <div id="divAreaListingByLocation">
                                <asp:CheckBoxList ID="chklstArea" RepeatColumns="6" RepeatDirection="Vertical" runat="server">
                                </asp:CheckBoxList>
                            </div>
                        </div>
<div class="outerlin" id="divRoomListingHeader" style="margin-top: 15px; width: 99%;">
                            <asp:Repeater ID="repRooms" runat="server" OnItemDataBound="repRooms_ItemDataBound">
                                <ItemTemplate>
                                    <div class="maintitle">
                                        Rooms</div>
                                    <br />
                                    <asp:Label ID="lblAreaName" ForeColor="Green" BackColor="Red" runat="server"></asp:Label>
                                    <br />
                                    <br />
                                    <span style="float: left; padding-left: 7px;">
                                        <asp:CheckBox runat="server" ID="Checkbox1" Text="Select All" />
                                        <%--<input type="checkbox" runat="server" id="Checkbox1" />Select All--%><br />
                                    </span>
                                    <br />
                                    <br />
                                    <div id="divRoomListingByLocation">
                                        <asp:CheckBoxList ID="chkRoomList" RepeatColumns="6" RepeatDirection="Vertical" runat="server">
                                        </asp:CheckBoxList>
                                    </div>
                                </ItemTemplate>
                            </asp:Repeater>
                        </div> 
```

**后面的代码是：**

```
protected void repRooms_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    ClsRoomNew objRoom = new ClsRoomNew();
    CheckBoxList chkRoomList = (CheckBoxList)e.Item.FindControl("chkRoomList");
    CheckBox Checkbox1 = (CheckBox)e.Item.FindControl("Checkbox1");
    Label lblAreaName = (Label)e.Item.FindControl("lblAreaName");

    if (chkRoomList != null)
    {
        DataTable dt = objRoom.RoomListingByAreaId(Convert.ToInt64(DataBinder.Eval(e.Item.DataItem, "Areaid")));
        if (dt.Rows.Count > 0)
        {
            lblAreaName.Text = DataBinder.Eval(e.Item.DataItem, "Areaname").ToString();
            chkRoomList.DataSource = dt;
            chkRoomList.DataTextField = "RoomName";
            chkRoomList.DataValueField = "RoomId";
            chkRoomList.DataBind();
        }
        else
        {
            Checkbox1.Visible = false;
            chkRoomList.Visible = false;
        }
    }
} 
```

试试这个希望这能解决你的问题。

# javascript - 如何创建这样的 javascript 对象？

> ID：13174455
> 
> 赞同：1
> 
> 时间：2012-11-01T09:47:39.130
> 
> 标签：javascript

大家好，我正在尝试创建一个这样的 javascript 对象：

```
data = { values:[
        { X: "Apples", Y: 120 },
        { X: "Oranges", Y: 280 },
        { X: "Chocolates", Y: 180 },
        { X: "Bananas", Y: 340 },
        { X: "Tomatoes", Y: 400 },
]}; 
```

我试过这个，但它不起作用？

```
var data = {};

for (i = 0; i < json.Answers.length; i++){
    data.values[i].X = json.Answers[i].AnswerText
    data.values[i].Y = json.Answers[i].Responses.length
    } 
```

json部分很好，关于构建对象的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T09:49:17.710

首先，您正在尝试使用您从未定义过的`values`属性。`data`改变

```
var data = {}; 
```

到

```
var data = {values: []}; 
```

这将创建`values`数组。

此外，在您的循环中，您试图分配给不存在的对象。将循环的内容更改为：

```
data.values[i] = {
    X: json.Answers[i].AnswerText,
    Y: json.Answers[i].Responses.length
}; 
```

这会在`values`构建时创建数组中的每个对象。

所以：

```
var data = {values: []};

for (i = 0; i < json.Answers.length; i++){
    data.values[i] = {
        X: json.Answers[i].AnswerText,
        Y: json.Answers[i].Responses.length
    };
} 
```

* * *

（旁注：不要忘记声明`i`，如果尚未声明，以免[*成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)牺牲品。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:50:19.150

### 请初始化`data`使用：

```
data = {values: []}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:50:57.050

```
data.values = [];

for (i = 0; i < json.Answers.length; i++) {
    data.values.push({X: json.Answers[i].AnswerText, Y: json.Answers[i].Responses.length});
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T09:51:18.973

尝试：

```
var data = {values:[]};

for (i = 0; i < json.Answers.length; i++){
    data.values[i]= {X: json.Answers[i].AnswerText, Y:json.Answers[i].Responses.length}
} 
```

# java - 使用 Glassfish 3.1.2 服务器时，属性文件的更改不会反映在页面中

> ID：13174456
> 
> 赞同：0
> 
> 时间：2012-11-01T09:47:43.227
> 
> 标签：java, jsf, web-applications, glassfish-3

我正在使用 NetBeans IDE，但我在外部使用 Glassfish（不是 NetBeans 附带的。我在 ubantu 中通过终端使用 GlassFish）。在我的项目中，我使用几个属性文件在页面上加载标签。但问题是在运行时对属性文件进行修改时，这些更改不会反映在页面上。我需要重新启动 Glassfish 服务器。ResourceBundle 条目是在 faces-config 文件中创建的。

```
//faces-config.xml
<locale-config>
        <default-locale>en</default-locale>
</locale-config>
<resource-bundle>
    <base-name>ValidationMessages</base-name>
    <var>msg</var>
</resource-bundle>
<message-bundle>ValidationMessages</message-bundle> 
```

我知道，当在属性文件中进行更改时，我需要清除 ResourceBundle（使用 ResourceBundle.clearCache(); ）的缓存。我已经尝试过了。该解决方案在码头完美运行。但是当我使用 glassfish 服务器时它是无效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:53:07.157

一个快速的谷歌搜索显示了这个[Glassfish 错误报告](http://java.net/jira/browse/GLASSFISH-15657)。简而言之，`clearCache()`无效，目前似乎没有解决方法。

我也遇到了这个 SO 问题 -[如何在 Web 应用程序中重新加载资源包？](https://stackoverflow.com/questions/4325164/how-to-reload-resource-bundle-in-web-application)- 但我不知道主要答案是否适用于您的情况；即，如果它适用于 Glassfish。

# javascript - 如何使用 3D 变换获得元素的未变换位置/大小？

> ID：13174465
> 
> 赞同：0
> 
> 时间：2012-11-01T09:48:13.073
> 
> 标签：javascript, jquery, html, css, css-transforms

我正在创建类似于 3D 地图的东西，我需要能够在使用 CSS3 3D 变换的同时放大某些元素。我已经发现，如果您在任何旋转之前应用平移，您可以非常简单地使用未转换的 2D 坐标来执行此操作。

我现在的问题是获取元素的未转换的 2D 属性，以便我可以移动“相机”以聚焦并缩放到所述元素。

在应用 3D 转换之前，我曾尝试存储原始属性，但这是不可靠且不可靠的，因为它不考虑视口更改，有时会给出奇数，好像父容器要小得多：

```
var contentChildren = $("#content3d").children().each(function(index, element){
    $(this).attr("flatleft", $(this).position().left);
    $(this).attr("flattop", $(this).position().top);
    $(this).attr("flatwidth", $(this).width());
    $(this).attr("flatheight", $(this).height());
}); 
```

那么，如何获得被 3D 转换的元素的未转换属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:09:40.227

您可以尝试在 jquery 中使用 .data 函数，据我所知，它非常简单且非常可靠。

```
$(this).data("flatleft", $(this).position().left); 
```

参考：[http ://api.jquery.com/data/](http://api.jquery.com/data/)

# cocoa-touch - 总是！在 iOS 6.0 和 3G 网络上，NSURLConnection 因 didFailWithError 而失败？

> ID：13174466
> 
> 赞同：1
> 
> 时间：2012-11-01T09:48:14.320
> 
> 标签：cocoa-touch, ios5, ios4, ios6, nsurlconnectiondelegate

我检查了 stackOverFlow 和其他，在`didReceiveData:, didReceiveResponse:`NSURLConnectionDataDelegate 版本 4.3 上可用。从 2.3 版到 4.3 版，它们在 NSURLConnectionDelegate 中可用。

看看这些：

[http://stackoverflow.com:(10937215)connection-didreceivedata-is-not-call](https://stackoverflow.com/questions/10937215/connection-didreceivedata-is-not-called)

[http://stackoverflow.com:(7862316) ios5 nsurlconnection 方法已弃用](https://stackoverflow.com/questions/7862316/ios5-nsurlconnection-methods-deprecated)

通过检查 SDK 版本，我猜我们可以继承一个特定的类，我还没有测试过。但是我猜是可以实现的。

但问题是我在 iOS 6.0 和 3G 网络上运行，然后它一直因超时错误而失败。在 WIFI 上，`didReceiveData:`即使我使用 NSURLConnectionDelegate 也会被调用。感觉有点奇怪。

在我扩展 NSURLConnectionDelegate 的类中，这些是要查看的方法。

```
-(void)connection:(NSURLConnection *)theConnection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"Private didReceiveResponse - %d", [response statusCode]);

    if([response statusCode] == 200)
        connectionstatus = YES;
}

- (void)connection:(NSURLConnection *)theConnection didReceiveData:(NSData *)data
{
    self.connectionstatus = YES;

}

- (void)connectionDidFinishLoading:(NSURLConnection*)theConnection 
{
    NSLog(@"Private connectionDidFinishLoading");

    self.connectionstatus = NO;
    [self reinitConnection];
}

-(void)connection:(NSURLConnection *)theConnection didFailWithError:(NSError *)error
{
    self.connectionstatus = NO;
    self.connection= nil;
}

- (void) reinitConnection
{
    self.connectionstatus = YES;
    connectionCount++;
    NSString* urlS = @“VALID url”; //Such as http://google.com
    NSURL *url = [NSURL URLWithString:urlS];
    self.req = [[NSMutableURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:20.0];
    NSString *appstring =[httpreq appendMyParamsPost:req];
    [req setURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@?%@",[url absoluteString],appstring]]];

    NSString* authValue = @“SomeValue”,
    [req addValue:@"application/vnd.gupshup.privatechat-v1+json" forHTTPHeaderField:@"Accept"];
    [req setValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [req addValue:authValue forHTTPHeaderField:@"Authorization"];
    [req setHTTPMethod:@"GET"];

    [self.connection cancel];
    self.connection = nil;
    self.connection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];
} 
```

有什么问题吗？为什么它专门在 3G 上，虽然在 SDK 级别存在方法 shuffle 的问题，在哪里，它也必须在 WIFI 上发生？

提前致谢。文卡塔劳

# python - 你如何加入列表中的所有项目？

> ID：13174468
> 
> 赞同：20
> 
> 时间：2012-11-01T09:48:16.957
> 
> 标签：python, list, join

我有一个列表，它将一个单词的每个字母一个一个地添加到这个列表中，在程序运行之前我不知道列表中会出现什么。如何将列表中的每个字母组合成一个单词？例如`['p', 'y', 't', 'h', 'o', 'n']`变成`['python']`.

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-01T09:51:34.100

```
a = ['a', 'b', 'c']
res = "".join(a) 
```

您可以再次使用以下方法转换回字母列表：

```
list(res) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T10:54:00.887

```
''.join(str(v) for v in my_list) 
```

因为你不知道列表中会出现什么

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T09:49:55.270

`''.join(['p','y','t','h','o','n'])`

有关更多信息，请参阅[str.join](http://docs.python.org/2/library/stdtypes.html#str.join)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-01T14:37:47.047

```
 s=""
  for v in [['p', 'y', 't', 'h', 'o', 'n']:
         s+=v
  res=[s] 
```

# vba - 使用模式或弹出窗口打开表单

> ID：13174473
> 
> 赞同：3
> 
> 时间：2012-11-01T09:48:42.167
> 
> 标签：vba, ms-access

对此有点挣扎，我有一个数据表表格，其中列出了每条记录的 ID 和其他信息。到目前为止，我已经找到了一些 VBA 代码，它们会将每个 ID 作为超链接打开并将其传递到另一个表单中。

我遇到的问题是我希望表单在弹出窗口或模式窗口中打开，到目前为止我的代码是：

```
Private Sub ID_Click()
    Dim varWhereClause As String
    varWhereClause = "ID = " & Me!ID
    DoCmd.OpenForm "Copy Of test", , , varWhereClause
End Sub 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T10:12:31.047

```
DoCmd.OpenForm "Copy Of test", , , varWhereClause, ,acDialog 
```

虽然这将是弹出式和模态的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-15T18:31:15.770

`acDialog`and的一个小缺点`.PopUp`是表单作为访问主窗口之外的窗口打开。这就是为什么我更喜欢尽可能使用`.Modal`。

如果您只想阻止其他打开的表单，您可以`Me.Modal = True`在表单的打开事件中临时做一个。

缺点`.Modal`是不会等待。`DoCmd.OpenForm , , , , , acDialog`在表单关闭之前不会返回。这种同步调用有时会非常有用。

要在访问主窗口中进行**类似**`acDialog/PopUp`调用，您可以在表单中使用一个小技巧：

 **```
Private bFormOpen As Boolean

Public Sub ShowModal()
    SetFocus ' Make the form visible

    On Error GoTo ForcedClose
    bFormOpen = True
    Do While bFormOpen ' Wait until the form is closed
        Sleep 50
        DoEvents
    Loop

ForcedClose:
    Exit Sub
End Sub

Private Sub Form_Unload(Cancel As Integer)

    bFormOpen = False

End Sub 
```

您可以像这样实例化您的表单：

```
Dim f As New Form_Name

f.Modal = True
Call f.ShowModal

Set f = Nothing 
```**

# jquery - 我可以编辑 Jquery.validate.js 的正则表达式以获得更高的精度吗？

> ID：13174475
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:48:50.253
> 
> 标签：jquery, regex

我使用 jQuery validate 来验证电子邮件地址，但在测试时它接受电子邮件地址，例如`ak@cmmmm.c`或`ak@gh.com.com`不应该接受的电子邮件地址。所以我可以编辑 jquery.validate.js 并插入我自己的正则表达式。如果有更好的解决方案，请帮助我。

谢谢，您的任何帮助对我都很有价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:52:43.000

编辑插件的源代码从来都不是一个好主意——当你想升级到新版本时会发生什么？

[但是，您可以编写自己的 jQuery vlaidate 插件，此处](http://randomactsofcoding.blogspot.co.uk/2008/10/starting-with-jquery-how-to-write.html)提供了有关如何执行此操作的概述。

话虽如此，内置的电子邮件正则表达式与您将获得的一样强大。在不破坏其他案例的电子邮件验证的情况下，您无法采取很多措施来防止您指出的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:00:50.010

当然，您可以：

据我了解，这是您的 jquery.validate.js 插件。 [http://code.google.com/p/jqueryjs/source/browse/trunk/plugins/validate/jquery.validate.js?r=6243](http://code.google.com/p/jqueryjs/source/browse/trunk/plugins/validate/jquery.validate.js?r=6243)

在第 964 行中，您有验证电子邮件的功能：

```
email: function(value, element) {
                        // contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
                        return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);
                }, 
```

只需用您想要的表达式替换那条大线，就可以了。这是电子邮件正则表达式的示例： [Validate email address in JavaScript?](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

我不想把我的验证人告诉你，因为我不知道你到底需要什么作为正确的验证人。

但请记住，您无法确定此人输入的电子邮件是正确的。justforfun@gmail.com 将通过所有验证器，但您如何确定它是有效用户的电子邮件。

如果一个人真的对提供正确的电子邮件感兴趣 - 他会检查十几次（从未在任何大使馆网站上见过好的验证器）

# python - 带有 Python、Flask 和 Sublime Text 2 的调试选项

> ID：13174476
> 
> 赞同：10
> 
> 时间：2012-11-01T09:48:52.447
> 
> 标签：python, flask, sublimetext2

我刚刚切换到 Sublime Text 2 进行 Python 开发。我通常使用 Flask 微框架进行 Web 编程。

这种组合有哪些调试选项，如何设置？我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T09:56:11.663

使用[pdb](http://docs.python.org/library/pdb.html)：

```
import pdb; pdb.set_trace() 
```

（或者更好的[pdb++](http://pypi.python.org/pypi/pdbpp/)）

此外，Flask 已经包含[Werkzeug](http://werkzeug.pocoo.org/docs/)，它包含一个基于交互式 JavaScript 的浏览器内调试器，我强烈建议您使用它。

（如果您的 Flask 使用`uWSGI`，您可以查看本指南以使 Werkzeug 调试器工作：[在 uWSGI 下调试烧瓶应用程序](http://codeseekah.com/2012/10/28/dubugging-flask-applications-under-uwsgi/)）

# django - Django - 对运行 wsgi 的应用程序使用 pdb 交互式调试

> ID：13174479
> 
> 赞同：9
> 
> 时间：2012-11-01T09:49:01.633
> 
> 标签：django, debugging, remote-debugging, pdb, django-dev-server

如果我开发一个 Django 应用程序并使用包含的测试服务器，我可以`import pdb; pdb.set_trace()`在代码中的任何位置添加一个，并有一个断点让我进入交互式调试器。为了清楚起见，我并不是说使用任何 IDE，只是简单地设置 ssh-ing 到 VM 或远程开发服务器。

如何为 WSGI Django 应用程序获得类似的行为？（再次，假设的设置是我与服务器的 ssh 会话 - 虚拟机或远程）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T10:03:02.663

据我所知，如果您想将 pdb 与任意 wsgi 应用程序一起使用，最好的选择是使用[rpdb2](http://winpdb.org/docs/embedded-debugging/)。

（对于`mod_wsgi`使用 apache 的 Django，您可以参考本指南：[http](http://code.google.com/p/modwsgi/wiki/DebuggingTechniques) ://code.google.com/p/modwsgi/wiki/DebuggingTechniques ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T12:02:56.680

问题是 WSGI 服务器将使用多个进程并分离或重定向标准流 - 输入、输出和~~动摇它~~呃。

对于 Apache httpd 和 mod_wsgi：

*   `apachectl -X`以, not `apachectl start`(nor`service apache2 start`等)开头
*   不要使用`WSGIDaemonProcess`,`WSGIProcessGroup`等。
    您可能需要添加`WSGIPythonHome`,`WSGIPythonPath`等来替换守护程序属性。

同样，对于 gunicorn，您需要设置`debug=True`和`daemon=False`.

* * *

[mod_wsgi 指南](http://code.google.com/p/modwsgi/wiki/DebuggingTechniques)建议使用类进行包装`wsgi.application`，在每个请求开始时调用 pdb，但任何其他陷阱都应该有效。

```
class Debugger:
    def __init__(self, object):
        self.__object = object

    def __call__(self, *args, **kwargs):
        import pdb, sys
        debugger = pdb.Pdb()
        debugger.use_rawinput = 0
        debugger.reset()
        sys.settrace(debugger.trace_dispatch)
        try:
            return self.__object(*args, **kwargs)
        finally:
            debugger.quitting = 1
           sys.settrace(None)

application = Debugger(application) 
```

# android - 如何将 RTP 视频数据包从 Android 发送到服务器？有图书馆吗？请建议

> ID：13174484
> 
> 赞同：2
> 
> 时间：2012-11-01T09:49:09.450
> 
> 标签：android, video, rtsp, rtp

我想将来自 android 设备的视频放入 RTP 数据包中，然后通过 UDP 将它们发送到 RTSP/RTP 服务器。Android 中是否已经有一些库可以用来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:25:53.737

那么你得到了`RTPStream`根据官方文档的位置`RtpStream represents the base class of streams which send and receive network packets with media payloads over Real-time Transport Protocol (RTP).`

[http://developer.android.com/reference/android/net/rtp/RtpStream.html](http://developer.android.com/reference/android/net/rtp/RtpStream.html)

那么您想查看此处所述的 API 演示：[使用 RTSP 的视频流：Android](https://stackoverflow.com/questions/3186950/video-streaming-using-rtsp-android)并在此处查看 rtp/rtsp 数据包的制作方式：[从 Android 相机创建 RTP 数据包以发送](https://stackoverflow.com/questions/7332532/creating-rtp-packets-from-android-camera-to-send)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:26:03.070

我发现[spydroid](http://code.google.com/p/spydroid-ipcamera/)是一个很好的起点。它使用从 MediaRecorder 捕获编码视频并通过 RTSP 将其发送出去。

# wix - 使 WiX Bootstrapper 用于使用 .NET 4.0 进行引导

> ID：13174507
> 
> 赞同：3
> 
> 时间：2012-11-01T09:50:22.377
> 
> 标签：wix, installation, bootstrapper

我一直在寻找让我的引导程序与安装 .NET 4.0 和我自己的应用程序一起工作。我查看了几个博客和教程，但我无法让它工作。

我在 Stack Overflow 问题*[Initiate / call bootstrapper in WiX](https://stackoverflow.com/questions/9517144/initiate-call-bootstrapper-in-wix)*中读到，您需要在引导程序中同时调用这两个问题。我的引导程序只调用 .NET 4.0 安装程序。这是应该调用两个部分的部分：

```
<Chain>
    <PackageGroupRef Id="NetFx40Redist" />
    <MsiPackage SourceFile="C:\my app.msi" Cache="yes" Visible="no" After="NetFx40Redist"></MsiPackage>
</Chain> 
```

它只调用 packagegroupref。安装 .NET 4.0 包时，出现错误。它可能是简单而小的东西，但我找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:21:49.467

以下对我有用：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Bundle Name="Bootstrapper1" Version="1.0.0.0" Manufacturer="Test" UpgradeCode="5e5f0f1e-58e0-42e5-8306-37533d677535">
    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" />
    <Variable Name="InstallFolder" Type="string" Value="[ProgramFilesFolder]Test\App"/>

    <Chain>
      <PackageGroupRef Id="NetFx40Web" />
      <MsiPackage
        Id="Setup"
        Compressed="yes"
        SourceFile="$(var.SetupProject1.TargetPath)"
        Vital="yes">
        <MsiProperty Name="INSTALLLOCATION" Value="[InstallFolder]" />
      </MsiPackage>
    </Chain>
  </Bundle>
</Wix> 
```

确保添加您的项目并`WixNetFxExtension`作为对引导程序项目的引用。我发现[这个博客](http://neilsleightholm.blogspot.ca/2012/05/wix-burn-tipstricks.html)很有帮助。

# c# - 如何同时获取两个变量中新对象的引用？

> ID：13174511
> 
> 赞同：0
> 
> 时间：2012-11-01T09:50:30.230
> 
> 标签：c#

我需要同时在两个变量中获取新对象的引用。类似的东西

```
Object o1,o2 = new Object(); 
```

这是可能的吗？

提前致谢..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T09:51:23.400

试试这个：

```
Object o1 ,o2;
o1 = o2 = new Object(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:52:16.533

为什么不只是：

```
object o1 = new object(), o2 = o1; 
```

?

# c++ - 如何为我的 Visual Studio 2010 C++ 应用程序制作自动更新程序？

> ID：13174519
> 
> 赞同：0
> 
> 时间：2012-11-01T09:50:51.407
> 
> 标签：c++, c, visual-studio-2010, visual-c++, auto-update

如何为我的 Visual Studio 2010 C++ 应用程序制作自动更新程序？我不想要任何高级功能。任何可以提供“新版本 1.2.2 可用”通知的免费应用程序？

实际上现在我只想通知用户不要下载软件或类似的东西。

当用户运行应用程序时，只需检查新版本，如果可用，则会出现消息框或通知。

我的想法是应用程序简单地检查一个“http://www.site.com/update.txt”文件，如果将来数字增加，则该文件有一个数字，然后消息框出现“有新版本可用，访问网站” ..它很简单，但我怎样才能签入VS2010 C++？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:54:06.153

^(我不知道Windows，但是....)

您可以使用一些 HTTP 客户端库（可能是[libcurl](http://curl.haxx.se/libcurl/) ）向您的URL发出`GET`HTTP 请求。`http://www.site.com/update.txt`

但不要神奇地覆盖二进制可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:39:20.010

使用 ClickOnce 部署怎么样？我在 C# 中很容易使用，在 C++ 中更复杂，但 MSDN 告诉它是可能的：

[http://msdn.microsoft.com/en-us/library/ms235287%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms235287%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:48:32.343

Sparkle 是我找到的最佳选择。太奇妙了。给你[http://winsparkle.org/](http://winsparkle.org/)

# unix - 如何修改jks文件

> ID：13174526
> 
> 赞同：0
> 
> 时间：2012-11-01T09:51:11.513
> 
> 标签：unix, certificate, keytool

我们需要修复我们的 trust.jks。有人告诉我 CN 包含空格（有人告诉我它是在 Windows 盒子上创建的和/或 Windows 可以使用包含空格的 CN。） unix 系统需要（我们相信）句点而不是空格。

是否可以修改 trust.jks 中的 CN 而无需返回我们的证书请求者以获取新的 trust.jks？（从物流的角度来看，这会有些问题）。

这里没有人是“cert-guy”，所以我正在联系 - 找不到任何特定于我的问题的内容 - 所有搜索都被视为创建 trust.jks - 而不是修改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:41:34.637

如果您已经拥有新的密钥对，并且只想更改密钥库 - 可以使用 openssl 并重新导入密钥，但如果您还没有经验，这会有点复杂。

如果要更改签名证书的 CN，这是不可能的。CN 是签名过程的一部分，因此只能通过创建新签名来更改。

# android - 应用程序无法在 Android 4.1 上运行

> ID：13174537
> 
> 赞同：1
> 
> 时间：2012-11-01T09:51:37.987
> 
> 标签：android, android-layout, android-emulator

大家好，我有可以在其他平台上运行的示例应用程序（从 1.6+ 开始）但是相同的应用程序在我的新 Android 4.1 模拟器上不起作用。问题是关于 HttpConnection 的。意味着假设我想登录然后我不能这样做。代码没有问题，因为它在所有其他 AVD(1.6,2.1,2.2) 上都可以正常工作。

我也尝试使用简单的 httpconnection 代码，但仍然无法正常工作。

在 4.1 的模拟器上运行互联网需要任何特殊设置。但是在我以前的平台上，我没有做任何设置。

我的 HttpConnection 代码如下：

```
public String httpGetResponse(String url) {
    connectionUrl = url;
    query_string="";
    String response = null;
    try {
        int loc = url.indexOf('?');
        if(loc>-1){
            try {
                query_string=url.substring(loc);
            } catch (Exception e) {
                query_string="";
            }
        }
        processGetRequest();
        HttpResponse httpresponse = httpclient.execute(host, get);
        response = EntityUtils.toString(httpresponse.getEntity());
    } catch (Exception e) {
        response = null;
    }
    return response;
} 
```

我将此方法称为：

```
response = connectionUtil.httpGetResponse("My URL"); 
```

在所有其他平台上，我得到的响应为 String ，但在 4.1 中，我得到的响应为：

```
response:<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org          /TR/html4/loose.dtd"><HTML><HEAD><META HTTP-EQUIV="Content-Type"    CONTENT="text/html; charset=iso-    8859-1"><TITLE>ERROR: The requested URL could not be retrieved</TITLE> 
```

…………

任何建议将不胜感激提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:31:51.303

这个问题有两个解决方案。

1）不要在主 UI 线程中编写网络调用，为此使用异步任务。

2) 在 setContentView(R.layout.activity_main); 之后将以下代码写入 MainActivity 文件；

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并将下面的 import 语句放入您的 java 文件中。

```
import android.os.StrictMode; 
```

# unit-testing - TestNG 自动禁用测试

> ID：13174538
> 
> 赞同：1
> 
> 时间：2012-11-01T09:51:41.733
> 
> 标签：unit-testing, testng

我目前正在使用新的 Adob​​e Flex 4.8 构建 Flexmojos 项目。问题是，在 4.8 中，一项功能不再可用。如果我针对这个 sdk 运行单元测试，构建将失败。我可以一起禁用失败的测试，但我想保留它们，因为它们测试旧 Flex SDK 的重要特性。

如果不满足前提条件，有没有办法自动跳过测试？我正在考虑调用一些方法来决定是否应该执行测试。或者，我可以设置一个环境变量。如果有任何其他选择，我会很高兴听到。

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:19:13.540

One way i can think of doing this in testNg is by using IAnnotationTransformer listener. Basically you can manipulate the annotation in runtime. here is an example:

Listener:

```
public class SampleAnnotationTransformer implements IAnnotationTransformer {

@Override
public void transform(ITestAnnotation iTestAnnotation, Class aClass, Constructor constructor, Method method) {

    if(method != null){
        if(!isThisTestCompatible(method)){
            //diable the test case.
            iTestAnnotation.setEnabled(false);
        }
    }

}

private boolean isThisTestCompatible(Method method){
    //your logic goes here...
    return false;
}
} 
```

configure above listener in testNG as shown below:

```
<suite name="Suit" verbose="1">
<listeners>
    <listener class-name="SampleAnnotationTransformer" />
</listeners>

//test cases... 
```

Worth checking other listeners as well at [http://testng.org/doc/documentation-main.html#testng-listeners](http://testng.org/doc/documentation-main.html#testng-listeners)

# webdriver - 如何使用 Selenium Webdriver 2.25.0 启动谷歌？

> ID：13174540
> 
> 赞同：0
> 
> 时间：2012-11-01T09:51:43.657
> 
> 标签：webdriver

我遇到了一件奇怪的事情......如果我使用我的驱动程序脚本启动我的 Firefox v3.6.2，那么我将无法打开该页面。

一旦我的 Firefox 页面打开并设置了 url，就会弹出未找到服务器。

```
public class Test {
    public static void main(String[] args) {
    WebDriver driver = new FirefoxDriver();
    driver.get("http://www.google.co.in");
    }
} 
```

请帮忙。

问候， 桑比特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:18:33.107

我确信您在 Webdriver 中设置代理时遇到问题。看看这个问题：[Selenium Webdriver - How to set proxy to "auto-detect" for Firefox](https://stackoverflow.com/questions/9952217/selenium-webdriver-how-to-set-proxy-to-auto-detect-for-firefox)并尝试遵循他们使用的方法。让我知道它是否有帮助

# actionscript-3 - Starling AS3 触控事件长按

> ID：13174541
> 
> 赞同：5
> 
> 时间：2012-11-01T09:51:51.010
> 
> 标签：actionscript-3, starling-framework

我一直在寻找一个清晰的例子来说明如何编写一个允许用户按住的按钮。发生这种情况时，我想执行一些代码。

我已经实现了 TouchEvent.Touch 和 touchPhase.Began 但它只触发一次。

我找不到关于如何实现这一点的明确解释。任何帮助表示赞赏。

```
btnPress.addEventListener(TouchEvent.TOUCH, isPressed);

private function isPressed(event:TouchEvent){
    var touch:touch = event.getTouch(btnPress, TouchPhase.BEGAN);
    if(touch)
    {
        trace("pressed");
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T16:27:24.223

Starling `TouchEvent`，`TouchPhase`一开始可能会有点混乱。`TouchPhase.BEGAN`唯一触发**一次**，当用户开始触摸屏幕时。如果您想**在手指放在按钮上时**执行一些代码，请在阶段开始执行并在`TouchPhase.BEGAN`阶段停止执行`TouchPhase.ENDED`（当用户停止触摸屏幕时，它也只会触发一次）。

例如，在您的情况下，您可以执行以下操作：

```
btnPress.addEventListener(TouchEvent.TOUCH, isPressed);

private function isPressed(event:TouchEvent):void
{
    var touch:Touch = event.getTouch(btnPress);

    if(touch.phase == TouchPhase.BEGAN)//on finger down
    {
        trace("pressed just now");

        //do your stuff
        addEventListener(Event.ENTER_FRAME, onButtonHold);
    }

    if(touch.phase == TouchPhase.ENDED) //on finger up
    {
        trace("release");

        //stop doing stuff
        removeEventListener(Event.ENTER_FRAME, onButtonHold);
    }
}

private function onButtonHold(e:Event):void
{
    trace("doing stuff while button pressed!");
} 
```

希望这有助于澄清一些事情！

# javascript - 在 jquery 中传递“this”上下文

> ID：13174544
> 
> 赞同：2
> 
> 时间：2012-11-01T09:52:03.070
> 
> 标签：javascript, jquery

这是不是正确的做事方式。同样在这里我通过**_this**`this`传递上下文是否有更好的方法

 **```
var messages = {
    getLoadMore : function(_this){
        ...............
    },

    getSwappingData : function(_this){
        .................
    },
}

jQuery('.js-message-swap').live('click', function(){
    _this = jQuery(this);
    messages.getSwappingData(_this);
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:58:51.533

你所拥有的一切都会很好。更短的版本是将函数的引用传递给`click`处理程序，然后将其应用于`this`外部函数。试试这个：

```
var messages = {
    getLoadMore : function() {
        var $el = $(this);
        return false;
    },

    getSwappingData : function() {
        var $el = $(this);
        return false;
    }
}

jQuery('.js-message-swap').live('click', messages.getSwappingData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:57:45.987

唯一的另一种方法是将其作为参数而不是变量传递给函数。

```
var messages = {
    getLoadMore : function(_this){
        ...............
    },

    getSwappingData : function(_this){
        .................
    },
}

jQuery('.js-message-swap').live('click', function(){
    // Remove this _this = jQuery(this);
    messages.getSwappingData(jQuery(this));
    return false;
}); 
```**

# android - 如何在android中滚动时listview的主要位置

> ID：13174547
> 
> 赞同：0
> 
> 时间：2012-11-01T09:52:14.553
> 
> 标签：android, listview, adapter, baseadapter

我为列表视图使用了基础适配器，并且在滚动时，位置发生了变化。，如何克服这个，这是我的基础适配器类。

```
Hello, 
```

我将 Base 适配器用于列表视图，并且在滚动时，位置

变化。，如何克服这个，这是我的基础适配器类。

```
 public class MyCustomBaseAdapter extends BaseAdapter {
        MyCustomBaseAdapter custom;
        private OnClickListener onCheckClick;
        private OnCheckedChangeListener OnTextClick;
        Context context;
        ViewHolder holder;

        public void setOnClickListeners(OnClickListener 

onCheckClick) {
            // TODO Auto-generated method stub
            this.onCheckClick = onCheckClick;
        }

        public void setOnCheckedChangeListener

(OnCheckedChangeListener OnTextClick) {
            // TODO Auto-generated method stub
            this.OnTextClick = OnTextClick;
        }
         private static ArrayList<SearchResults> searchArrayList;

         private LayoutInflater mInflater;

         public MyCustomBaseAdapter(Context context, 

ArrayList<SearchResults> results) {
            this.context = context;
             searchArrayList = results;
             mInflater = LayoutInflater.from(context);
         }

         public int getCount() {
          return searchArrayList.size();
         }

         public Object getItem(int position) {
          return searchArrayList.get(position);
         }

         public long getItemId(int position) {
          return position;
         }

         public View getView(final int position, View convertView, 

ViewGroup parent) {

          SearchResults planet = (SearchResults) this.getItem( 

position ); 

          if (convertView == null) {

           convertView = mInflater.inflate

(R.layout.custom_row_view, null);

           holder = new ViewHolder();

           holder.txtName = (TextView) 

convertView.findViewById(R.id.mobileNumber);
           holder.txtCityState = (TextView) 

convertView.findViewById(R.id.messageContent);
           holder.id_txtView = (TextView) 

convertView.findViewById(R.id.id_textView);
           holder.checkBox = (CheckBox) 

convertView.findViewById(R.id.checkBox1);
           holder.datetime = (TextView) 

convertView.findViewById(R.id.date_time);
           holder.type = (TextView) convertView.findViewById

(R.id.type);
           holder.custom_layout = (LinearLayout) 

convertView.findViewById(R.id.custom_layout);     

           holder.checkBox.setOnClickListener(new 

OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method 

stub
                ((SMS)context).function(position);  
            }
        });
           holder.checkBox .setTag(Integer.valueOf(position));
           convertView.setTag(holder);

          }
          else
          {
           holder = (ViewHolder) convertView.getTag();
          }

          holder.txtName.setText(searchArrayList.get

(position).getName());
          holder.txtCityState.setText(searchArrayList.get

(position).getCityState());
          holder.id_txtView.setText(searchArrayList.get

(position).getPhone());
          holder.datetime.setText(searchArrayList.get

(position).getDatetime());

          //holder.type.setText(searchArrayList.get

(position).getType());

          holder.checkBox .setTag(Integer.valueOf(position));   

          //(2).This line is for avoiding checkbox selection for 

other checkboxess
          /*holder.checkBox.setChecked(planet.isChecked() );*/

          holder.checkBox.setOnCheckedChangeListener

(OnTextClick);  

          holder.checkBox.setChecked(searchArrayList.get

(position).isSelected());     

          return convertView;
         }

         static class ViewHolder {
          TextView txtName;
          TextView txtCityState;
          TextView id_txtView;
          CheckBox checkBox;
          TextView datetime;
          TextView type;
          LinearLayout custom_layout;
          LinearLayout main_layout;
          TextView empty_txt_msg;

         }

         Integer[] imgid = { 
                    R.drawable.ic_launcher, 
                    R.drawable.ic_launcher, 
                };
    } 
```

请帮助我克服这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:22:51.333

你可以使用 listview 方法**setOnScrollListener**

您每次滚动时都可以获得第一个可见位置、最后一个可见位置和位置总数。现在您可以在代码中使用它。

```
 listview.setOnScrollListener(new OnScrollListener() {
        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
            //get the showed item num, and if its equal to total, you can hide the view
            //get a reference to your viewid
            //viewid.setVisibility(View.GONE);
        }
        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
        }
    }); 
```

**已编辑：** 在 getview 方法中的适配器内部，您可以指定以下代码：

```
holder.chkselect = (CheckBox) convertView
                .findViewById(R.id.txtselect);
    holder.chkselect.setTag(position);
    holder.chkselect.setOnCheckedChangeListener(new OnCheckedChangeListener() {@Override
public void onCheckedChanged(CompoundButton buttonView,
        boolean isChecked) {
    if (isChecked) {

        int position = Integer.parseInt(buttonView.getTag()
                .toString());
        OrderDetail.acceptposition.add(String
                .valueOf(position));
    } else {
        int position = Integer.parseInt(buttonView.getTag()
                .toString());

        if (OrderDetail.acceptposition.contains(String
                .valueOf(position))) {
            OrderDetail.acceptposition.remove(String
                    .valueOf(position));
        }
    }

} 
```

});

在 ArralyList 的**接受**位置中，您拥有所有选中的位置。试试看。

# powershell - 调用命令和机器不可访问异常

> ID：13174552
> 
> 赞同：0
> 
> 时间：2012-11-01T09:52:31.463
> 
> 标签：powershell, remoting, invoke-command

在玩了几天之后，我仍在尝试适应 powershell。

我有以下关于调用命令的问题。我的场景是这样的：当我们将计算机列表传递给它时，我正在尝试利用调用命令及其一次“线程”到多台计算机的能力：

```
$ipList=@()
invoke-command $ListOfComputers -ScriptBlock {
    #do something, following is an imaginary cmdlet
$ipList+=get-ip-of-machine
} 
```

我想跟踪它无法连接到哪些计算机。有没有办法捕捉这些异常？或者我是否必须一次连接到一台计算机，并且测试连接并且可能将调用命令作为一项工作运行以使其更快？

`try {} catch {}`似乎没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:34:42.930

下面的命令怎么样，测试连接可以接收一组计算机作为参数

$res = 测试连接 server1,server2 -Count 1 -ThrottleLimit 10 -AsJob | 等待工作 | 接工作| ? {-not ($_.ResponseTime -eq $null)} | 选择地址

# php - Joomla 2.5 检查用户登录

> ID：13174556
> 
> 赞同：5
> 
> 时间：2012-11-01T09:52:45.970
> 
> 标签：php, javascript, html, css, joomla

我如何检查用户是否在 Joomla 2.5 中登录？我似乎只能找到旧版本 joomla 的代码片段。是一样的吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T10:01:31.630

```
if(JFactory::getUser()->id)
{
//user has logged in
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T09:58:25.097

是的，和以前一样，试试这个-

```
$user =& JFactory::getUser();
if($user->id!=0){
//user is logged in
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T19:43:40.630

```
$user = JFactory::getUser()->guest; 
```

如果您使用的是**PHP 5.3**。

# ios - 使用 AirPrint 打印 Pdf 会导致内容被截断

> ID：13174557
> 
> 赞同：1
> 
> 时间：2012-11-01T09:52:45.317
> 
> 标签：ios, iphone, objective-c, uiprintpagerenderer, uiprintinteractioncntrler

在这里，我正在打印大小为“pageSize = CGSizeMake(640, 832);”的 pdf。这个尺寸比 A4 尺寸的页面大。所以我会截掉一些文本（意味着它不会打印整个页面）。

在使用 MAC 打印相同的 pdf 时，它将在选项的帮助下打印整个页面（缩放以适应）。所以任何人都可以帮助我摆脱这个问题.. IOS sdk中是否有任何选项可以适应规模。

这是我的代码..

```
-(void)printItem
{

NSArray *aArrPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) ;
NSString *aStr = [[aArrPaths objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"PropertyReport_%d.pdf",self.propertyId]];

  // NSString *aStr = [[NSBundle mainBundle] pathForResource:@"TRADUZIONE HELP SECTIONS REV2" ofType:@"pdf"];
NSURL *url=[[NSURL alloc] initFileURLWithPath:aStr];
NSData *data=[[NSData alloc] initWithContentsOfURL:url];
printController = [UIPrintInteractionController sharedPrintController];
if(printController && [UIPrintInteractionController canPrintData:data])
{
    printController.delegate = self;
    UIPrintInfo *printInfo = [UIPrintInfo printInfo];
    printInfo.outputType = UIPrintInfoOutputGeneral;
    //printInfo.jobName = [NSString stringWithFormat:@"New Image"];
    printInfo.duplex = UIPrintInfoDuplexLongEdge;

    printController.printInfo = printInfo;
    printController.showsPageRange = YES;

    printController.printingItem = data;

    void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) = ^(UIPrintInteractionController *printController, BOOL completed, NSError *error)
    {
        if (!completed && error)
        {
            //NSLog(@"FAILED! due to error in domain %@ with error code %u", error.domain, error.code);
        }
    };

  //  aWebViewPDF.hidden=FALSE;
    [printController presentAnimated:YES completionHandler:completionHandler];
}

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:19:42.933

听起来很奇怪，试试：

```
printController.showsPageRange = NO; 
```

这似乎启用了自动缩放，但有时会在作业结束时打印一个额外的空白页。AirPrint 基本上是巫术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:59:35.270

您只有一个选择是从 PDF 的`scale down`所有页面中选择然后打印。我已经完成了所有页面并将其缩小到要求：`ratio``printed format``pdf into images`

```
NSString *strFilePath = [[NSBundle mainBundle] pathForResource:@"pdftouch" ofType:@"pdf"];
pic.printingItems = [[self allPagesImageFromPDF:strFilePath] copy]; 
```

添加所有三种方法：

`Convert all PDF pages into UIImages`

```
-(NSMutableArray *)allPagesImageFromPDF:(NSString *)strPath
{
  NSMutableArray *arrImages = [NSMutableArray array];
  CGPDFDocumentRef pdf  = CGPDFDocumentCreateWithURL((__bridge CFURLRef)[NSURL fileURLWithPath:strPath]);
  NSInteger numberOfPages = CGPDFDocumentGetNumberOfPages(pdf);
  for (NSInteger pageIndex = 1; pageIndex <= numberOfPages;
     pageIndex++)
  {
    UIImage *img = [self getThumbForPage:pdf pageIndex:pageIndex];
    [arrImages addObject:[self resizedImage:img]];
  }
  return arrImages;
} 
```

`Resize images`

```
-(UIImage *)resizedImage:(UIImage *)image
{
  UIGraphicsBeginImageContext(CGSizeMake(612, 792)); //A4 size
  [image drawInRect:CGRectMake(0,0,612, 792)]; //A4 size
  UIImage *resizedImg = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return resizedImg;
} 
```

`Get UIImage from CGPDFPageRef`

```
-(UIImage *)getThumbForPage:(CGPDFDocumentRef)pdfRef pageIndex:(int)page_number{

  // Get the page
  CGPDFPageRef myPageRef = CGPDFDocumentGetPage(pdfRef, page_number);
  // Changed this line for the line above which is a generic line

  CGRect pageRect = CGPDFPageGetBoxRect(myPageRef, kCGPDFMediaBox);
  //CGFloat pdfScale = width/pageRect.size.width;
  //pageRect.size = CGSizeMake(pageRect.size.width*pdfScale, pageRect.size.height*pdfScale);
  pageRect.origin = CGPointZero;

  UIGraphicsBeginImageContext(pageRect.size);

  CGContextRef context = UIGraphicsGetCurrentContext();

  // White BG
  CGContextSetRGBFillColor(context, 1.0,1.0,1.0,1.0);
  CGContextFillRect(context,pageRect);

  CGContextSaveGState(context);

  // Next 3 lines makes the rotations so that the page look in the right direction

  CGContextTranslateCTM(context, 0.0, pageRect.size.height);
  CGContextScaleCTM(context, 1.0, -1.0);
  CGContextConcatCTM(context, CGPDFPageGetDrawingTransform(myPageRef, kCGPDFMediaBox, pageRect, 0, true));

  CGContextDrawPDFPage(context, myPageRef);
  CGContextRestoreGState(context);

  UIImage *thm = UIGraphicsGetImageFromCurrentImageContext();

  UIGraphicsEndImageContext();
  return thm;  
} 
```

**编辑**：参考[打印-uiimage-using-airprint-causes-cut-off-content](https://stackoverflow.com/questions/7652082/printing-uiimage-using-airprint-causes-cut-off-content)

# selenium - Xpathing 我的前进之路

> ID：13174558
> 
> 赞同：1
> 
> 时间：2012-11-01T09:53:00.063
> 
> 标签：selenium, xpath

我正在使用 selenium`webdriver.find_element_by_link_text('searchterm')`来获取 webElement。然后我可以`href`通过使用'href'找到值，`webElement.get_attribute('href')`我可以通过xpath定位元素本身：

```
.//*[@href=webElement.get_attribute('href')] 
```

问题是这不是我要单击的链接，我要单击的链接具有文本“谷歌阅读器”，并且是三列：

```
<tr id="AB2Xq4gXoer9sCEEr-rRcZjVz1p021-gdypaX-U" class="ACTIVE">
  <td class="checkbox">
    <td class="alert-type" colspan="2">
      <a href="RETRIEVABLE ATTRIBUTE">FOUND TEXT</a>
    </td>
    <td class="alert-volume">Only the best results</td>
    <td class="alert-frequency">As-it-happens</td>
    <td class="alert-delivery">
      <a href="THE ELEMENT I WANT TO CLICK">Google Reader</a>
      <a href="another link">
    </td> 
```

这里的问题是有一系列“google reader”链接，所以这个词不能用

有没有机会通过路径导航到我想要的元素/链接？

我一直在尝试去父母那里，然后去寻找合适的孩子，但我只是没有到达那里。

感谢任何时间和帮助！

真挚地

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:00:44.130

将`a`'s`text()`与字符串进行比较：

```
 .//a[text()="Google Reader"] 
```

要从 FOUND TEXT 获取相应的`Google Reader`，请使用`..`(parent) 和`following-sibling`：

```
.//a[text()="FOUND TEXT"]/../following-sibling::td/a[text()="Google Reader"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:25:18.077

好吧，我会尝试以下方法：

```
String xPathLink="//a[contains(text(),'Google Reader')]"
    List<WebElement> a=driver.findElements(By.xpath(xPathLink));

      a.get(0).click();
//or         a.get(1).click();
//or         a.get(2).click(); 
```

它取决于包含“Google Reader”的元素列表中的顺序

好吧，萤火虫会给你一个关于你需要点击的元素的提示。 ![在此处输入图像描述](../Images/066d9a05c562d50e9b27c8a9c51aa710.png)

# python - 检测按键在 tkinter 中不起作用

> ID：13174561
> 
> 赞同：1
> 
> 时间：2012-11-01T09:53:08.267
> 
> 标签：python, user-interface, tkinter

我正在尝试制作我的前半部分 GUI 程序，并且我正在使用`tkinter`，但我无法弄清楚它为什么不起作用。

```
import Tkinter
import tkMessageBox
import os 
from Tkinter import *
import Tkinter
import tkMessageBox

root = Tkinter.Tk()

#text

text = Text(root)
text.insert(INSERT, "EASY hacktool for Linux\n\n1.john\n2.Crack wep\n3.Crack wpa/wpa2\n q to quit\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\n", )
text.tag_add("here", "1.0", "25.50")
text.tag_config("here", background="black", foreground="green")
text.pack()

def key(event):
    if event.keysym == 'q':
        root.destroy()
    elif event.keysym == '\x31':
        os.system("python Gui/john.py")
    elif event.keysym == '\x32':
        os.system("python Gui/aircrack.py")

root.bind_all('<Key>', key)

root.mainloop() 
```

当我按下 1 (\x31) 时，它可以正常工作，但是当我按下 '2'(\x32) 时，什么也没有发生，我尝试了 my `aircrack.py`，它可以正常工作，但这没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:07:31.147

the code works fine for me if i replace

```
os.system("python Gui/aircrack.py") 
```

with just some print statement...does it work for you? what is your aircrack.py?Make sure it is in the same path.

# vim - 如何在vi中从中间开始缩进多行？

> ID：13174568
> 
> 赞同：0
> 
> 时间：2012-11-01T09:53:29.657
> 
> 标签：vim, vi

例如，要转换这个

```
$example = array(
    'First' => 'This,
    'Second' => 'is',
    'Third' => 'an',
    'Fourth'=> 'example',
    'Fifth' => '.',
); 
```

进入这个

```
$example = array(
    'First'     => 'This',
    'Second'    => 'is',
    'Third'     => 'an',
    'Fourth'    => 'example',
    'Fifth'     => '.',
); 
```

无需每次都缩进`=> 'whatever',`。

这可以在[vi](http://en.wikipedia.org/wiki/Vi)中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:16:17.373

有两个 Vim 插件，[Align](http://www.vim.org/scripts/script.php?script_id=294)和[Tabular](https://github.com/godlygeek/tabular)。使用对齐，选择行并执行

```
:'<,'>Align => 
```

Tabular 是久负盛名的 Align 的更新替代方案，但两者都提供类似的功能。根据您的喜好选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:42:16.623

作为对 Ingo 答案的补充，以下是使用 Tabular 的方法：

```
:'<,'>Tabularize /=> 
```

# asp.net-mvc-3 - NHibernate.ObjectNotFoundException：不存在具有给定标识符的行

> ID：13174570
> 
> 赞同：4
> 
> 时间：2012-11-01T09:53:34.490
> 
> 标签：asp.net-mvc-3, nhibernate, fluent-nhibernate

这是我的错误：

```
NHibernate.ObjectNotFoundException: No row with the given identifier exists[Project.Core.Entities.User#(GUID)]
at Hibernate.Impl.SessionFactoryImpl.DefaultEntityNotFoundDelegate.HandleEntityNotFound(String entityName, Object id) 
at NHibernate.Event.Default.DefaultLoadEventListener.Load(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options) 
```

系统的一位用户偶然遇到了这个错误，这对我来说完全没有意义。我所知道的：

1.  教师表引用用户表。
2.  不知何故，教师表有一行引用了用户表中的一行，但该行在用户表中不存在。

知道为什么会这样吗？请指教！

改写我的 Qn：

我知道错误是什么意思，但是我似乎不知道是什么导致了丢失的用户行？我已将其全部放在 Cascade.ALL 上。我认为这与删除无关。以上可能发生的情况有哪些？

编辑2：

请参考 FNH 的映射：这有什么问题吗？

```
public void Override(AutoMapping<Teacher> mapping)
    {
        mapping.References(x => x.User).Cascade.All().Not.LazyLoad();
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T01:46:53.250

我将“未找到”属性设置为“忽略”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-27T10:28:45.150

在 Fluent NHibernate for C# 中，我使用过

```
HasManyToMany(x => x.Bars).Table("foobars")
                        .ParentKeyColumn("FooId")
                        .ChildKeyColumn("Id")
                        .NotFound.Ignore(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T13:45:01.973

我猜您在数据库中缺少 FK 约束，否则您不会在 FK 关系上丢失任何记录。在您的数据库中添加 FK 和 Cascade 规则，那么您就不能有任何“缺失行异常”。当您尝试执行与您的数据库模型不符的操作时，将引发错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-05T17:35:39.397

试试那个...

```
public void Override(ModelMapper modelMapper) {
    modelMapper.Class<T>(c => { 
        c.ManyToOne(m => m.FKObj, r => {
            r.Column("FKColumn");
            r.NotFound(NotFoundMode.Ignore); // THIS IS IMPORTANT!!!
        });
    });
} 
```

或者这个......如果你有一个“约定”文件......

首先处理 BeforeMapManyToOne 事件：

```
mapper.BeforeMapManyToOne += Mapper_OnBeforeMapManyToOne; 
```

然后默认将 NotFound 设置为 Ignore ...

```
private static void Mapper_OnBeforeMapManyToOne(IModelInspector modelInspector, PropertyPath propertyPath, IManyToOneMapper manyToOneMapper) {
    manyToOneMapper.NotFound(NotFoundMode.Ignore);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-01T10:40:56.263

如果您使用的是`.hbm.xml`映射文件，则可以将“未找到”设置应用于映射，例如

`<many-to-one name="User" column="User" not-found="ignore" />`

# git - PHPStorm / IntelliJ 自动保存覆盖新提取的代码

> ID：13174571
> 
> 赞同：0
> 
> 时间：2012-11-01T09:53:37.220
> 
> 标签：git, intellij-idea, phpstorm

我喜欢 JetBrains IDE——我已经使用 IntelliJ 和最近几年的 PHPStorm 非常愉快。不幸的是，自从我们的团队迁移到 Git 后，我​​遇到了自动保存功能的问题，这意味着我不得不改用比较垃圾的 Eclipse。

基本上发生的情况是，如果我在执行 Git 拉取操作时在 PHPStorm 中打开了任何文件，IDE 无法使用我刚刚拉取的新版本更新当前打开的文件，不会警告我存在差异，而且很漂亮很快就会用旧版本保存新提取的文件。

这导致同事有几次失去工作。

在执行拉取或签出之前，很容易忘记在 IDE 中关闭文件，并且覆盖很容易发生，因为 PHPStorm 会在您离开编辑窗口时保存。您无法关闭自动保存。

我讨厌 Eclipse，并希望有某种方法可以安全地返回 PHPStorm 的奇妙功能集。有没有其他人遇到过这个问题？您是否正在愉快地使用 JetBrains IDE 和 Git？我可以使用一些设置吗？

我认为这可能与此处[http://youtrack.jetbrains.com/issue/IDEA-89247](http://youtrack.jetbrains.com/issue/IDEA-89247) JetBrains 跟踪器上讨论的错误有关。可惜如此出色的 IDE 被这种行为破坏了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:02:54.947

我发现您可以在 IDE 设置 > 常规中关闭 PHPStorm 的自动保存功能 - 您取消选择“在框架激活时保存文件”和“如果应用程序空闲则自动保存文件”。经过几个月这样的工作，我从来没有覆盖过另一个文件。我确实错过了方便的自动保存，并且偶尔会收到烦人的内存/文件系统差异警告，但我很高兴我可以继续使用我最喜欢的 IDE。

我做的另一件新事情是每当我拉入目录时手动同步目录。当我刚开始的时候，我找不到任何关于“同步”的解释——为了其他傻瓜的利益，它基本上将 PHPStorm 文件视图中的文件与文件系统上可能发生的任何更改同步。

![在此处输入图像描述](../Images/f2890661c3500416dc12059716384aa2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:46:05.373

它可能是由符号链接或其他破坏本机文件系统通知的配置引起的（由`fsnotifier`与基于 IntelliJ IDEA 的产品捆绑的二进制文件提供）。

您可以尝试新的[EAP 版本](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)，看看它是否在那里工作。如果没有，[请提交错误](http://youtrack.jetbrains.net/issues/IDEA)。

作为一种解决方法，可以删除`fsnotifier`，IDEA 将使用 Java 轮询方法来检测外部更改（更可靠，但速度较慢）。

# amazon-web-services - Amazon SES 邮件作为垃圾邮件

> ID：13174584
> 
> 赞同：29
> 
> 时间：2012-11-01T09:54:36.100
> 
> 标签：amazon-web-services, amazon-ses

我正在使用亚马逊 SES 发送通知邮件。邮件正在送达，但有时邮件被移至垃圾邮件文件夹。怎么会这样？如果我发送邮件的方法相同，那么为什么有些邮件被视为垃圾邮件而其他邮件则不是？

请解释。提前致谢

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-06T21:34:15.163

好问题。电子邮件的可传递性（邮件被传递到收件箱的可能性）取决于许多不同的因素。这是您使用的平台（在这种情况下，您提到 Amazon SES）和您的特定发送程序的共同责任。根据您要发送给谁以及采用哪种入站邮件保护措施，如果您发送的邮件会引起收件人投诉（又名“这是垃圾邮件”按钮单击）、无效退回地址，具有垃圾指纹的内容，并发送到不活动但实际上可能是垃圾邮件陷阱的现有地址。ISP 的使命是保护其收件人免受垃圾邮件的侵害，尽管您对垃圾邮件的定义可能会有所不同。归根结底，由你来确保你

Amazon SES 具有专门为基于 ISP（例如 Gmail、Yahoo 等）要求的出站电子邮件量身定制的 IP 空间设置。我们还推出了几项功能，使以下操作变得非常简单：验证您的电子邮件 Easy DKIM，测试您的电子邮件以确保您有适当的退回和投诉处理（邮箱模拟器），并且可以通过 Amazon Simple 快速轻松地获得 ISP 反馈通知服务（退回和投诉通知）。

此外，我们还整理了一份关于发送我们推荐的最佳实践的白皮书。我们的博客经常更新，并且经常讨论会影响可交付性的主题。最后，我们有一个资源部分，提供第三方提供商，如果您仍然想知道要采取哪些步骤，可以为您提供更详细的帮助。

我们希望每一位客户都能取得成功，并拥有尽可能高的可交付性。如果您发现我们缺乏任何资源，或者需要您目前无法获得的其他功能或数据，我很想听听我们的意见，以便我们可以更好地改进 Amazon SES。

对于您的特定用例，我建议您前往 Amazon SES，以便我们一起进行故障排除。请提供有关您的情况的具体细节，以便我们深入研究。这些问题的答案将帮助我们调查：

1.  您在发送到哪个 ISP 时遇到问题？
2.  您要发送什么类型的电子邮件？
3.  您的收件人选择加入了吗？
4.  您多久向相同的收件人发送电子邮件？
5.  您如何获得新的收件人？
6.  您有我们可以查看的消息样本吗？
7.  您如何处理退回邮件和投诉？
8.  您是否尊重退订请求？
9.  您如何知道您被发送到垃圾邮件文件夹以及它发生的频率？
10.  您是否根据诸如 mail-tester.com 等广泛可用的免费服务检查您的内容？

要查看 Amazon SES 博客、技术文档、最佳实践白皮书、客户论坛和其他以服务为中心的内容，请访问： [http ://aws.amazon.com/ses/](http://aws.amazon.com/ses/)

要查看我们的资源页面（也包含在 Amazon SES 页面中，但在下方），请访问： [http ://aws.amazon.com/ses/resources/](http://aws.amazon.com/ses/resources/)

谢谢，克里斯

PS我最初有这个答案塞满了链接，以便于导航，但由于垃圾邮件控制措施，stackoverlfow 将它们剥离。具有讽刺意味的！

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-03T05:54:45.967

SES 真的不适合发送重要的通知邮件甚至营销邮件。SES 使用的 IP 范围已被大多数垃圾邮件服务标记，因为垃圾邮件发送者使用 SES 发送垃圾邮件非常容易。

我所在的团队在一两天内定期发送数千万封营销和通知电子邮件。由于可交付性问题，我们不得不离开 SES。我可能会建议您使用 SendGrid 或提供更好交付能力率的类似服务。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-11-05T23:46:22.457

问题是垃圾邮件发送者使用 Amazon SES，而 Amazon 将他们踢出服务的速度非常慢，因此他们的 IP 往往会经常出现在黑名单中。

您会在他们的滥用投诉博客页面上看到，他们使用 0.1% 的阈值来确定用户是否在发送垃圾邮件，而不是零容忍政策。我一直在报告一个垃圾邮件发送者几个月来一直在向他们抓取电子邮件地址，但他们没有做任何事情。我猜大多数人只是懒得举报垃圾邮件发送者。我之前也发生过同样的事情——你在几个月内多次报告垃圾邮件发送者，而亚马逊完全没有做任何事情（除了将你的投诉添加到堆中，看看它是否超过 0.1% 的阈值）。

如果您正在运行批量电子邮件服务，您确实需要对垃圾邮件采取零容忍态度，就像 Marketo 和 Sendgrid 一样。具有讽刺意味的是，如果您从 ec2 服务器报告垃圾邮件，他们会立即调查并关闭垃圾邮件发送者。Amazon SES 似乎是垃圾邮件发送者的避风港。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-12T11:46:18.253

根据 Sergey 的评论，您可以做很多事情。您当然应该设置 SPF 记录和 DKIM 签名。

亚马逊网站上有一些很好的内容：http: [//docs.aws.amazon.com/ses/latest/DeveloperGuide/authentication.html](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/authentication.html)

在 SES 上设置 DKIM 实际上非常简单，尤其是如果您使用 Route53，它会自动为您创建 DNS 条目。

您还可以在此处查看 Gmail 的批量发件人文档：https: [//support.google.com/mail/answer/81126?hl=en](https://support.google.com/mail/answer/81126?hl=en)

我还建议阅读良好的背景知识，阿特伍德先生对此事有很多话要说：http: [//www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some- email-through-code.html](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)

希望这会有所帮助，我目前正忙于处理同样的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-12-22T04:29:24.250

我使用 Amazon SES 已经有一段时间了，现在不到 2 年，我看到与垃圾邮件食人者完全相同的问题，但我必须同意 SES 团队在这个问题上的看法，只有一小部分电子邮件受到影响，当你权衡 Amazon SES 与 Mailchimp 等的成本。这是一项很棒的服务。

我将[Sendy](http://sendy.co/?ref=QAHfl)与 Amazon SES 结合使用，它可以透明地查看您的电子邮件列表的确切情况，并且是实际创建和发送营销电子邮件/新闻通讯的绝佳工具。

另一个很棒的工具是[Mail-Tester](http://www.mail-tester.com/)使用它，您可以看到影响您的电子邮件 DNS 设置、电子邮件内容、主题，当然还有阻止您的垃圾邮件列表（是的，您肯定会在 spamcannibal 上）传递的所有内容，但它是可能获得 8.5/10 的可交付性，这与我使用 mailchimp 获得的一样高。

# sql-server - 通过 Web 服务将数据从 sql server 读取到 excel 表中

> ID：13174587
> 
> 赞同：1
> 
> 时间：2012-11-01T09:54:40.073
> 
> 标签：sql-server, web-services, excel

考虑您有一个现有的 excel 工作表，它需要从 sqlserver 加载数据。数据已标准化，因此不能从表中读取数据。顺便说一句，它是 Excel 2010。

我尝试通过**存储过程**提供数据，但由于我必须进行一些**数据转换**，所以 SP 不是一个选项。

下一个想法是通过**网络服务**提供数据。我读了这篇[文章](http://msdn.microsoft.com/en-us/library/office/dd819156%28v=office.12%29.aspx)，但我不喜欢结果，因为工作表的内容是用 .Net 代码编写的。我更喜欢的解决方案是某种**数据提供者**，它可以直接在 excel 表中使用，类似于直接从表中读取数据。

有没有办法做到这一点？

**编辑**
因为第一个评论和答案。将其视为数据转换，例如从刻度 ( `long`) 到的转换`DateTime`。我必须在 .net 中进行，因为结果取决于目标时区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:10:45.277

如果我正确阅读了您的问题，有几种方法可以做到这一点：

创建一个新的 Excel 工作表文档，使用新 Excel 工作表中“数据”选项卡下的“来自其他来源”选项，提供您的 SQL 详细信息并连接到您需要在 Excel 工作表中显示的数据。

您还可以使用随 SQL Server 一起安装的“导入和导出数据”工具。这是一个相当简单的过程，该工具将引导您完成将数据导出到 Excel 工作表的必要步骤。

如果您需要在应用程序代码中执行此操作，您可以使用返回已处理数据和自定义列的自定义数据库视图，从代码中调用此数据库视图，检索数据行并写入 Excel 工作表文件。以下链接显示了如何在 C# 中执行此操作：http: [//csharp.net-informations.com/excel/csharp-excel-export.htm](http://csharp.net-informations.com/excel/csharp-excel-export.htm)

# ruby-on-rails - Capybara、RSpec 和 Devise：有什么方法可以通过绕过慢速登录和直接设置会话来加快集成测试？

> ID：13174592
> 
> 赞同：6
> 
> 时间：2012-11-01T09:54:54.040
> 
> 标签：ruby-on-rails, rspec, devise, capybara

对于几乎每个集成测试，用户都必须登录到 Devise。这需要很多时间，所以我想知道是否有一种方法可以设置用户会话，而无需访问登录页面、输入详细信息并按下登录按钮。

也许 Devise 中内置了一个帮助方法，可以立即登录给定的用户？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T10:25:46.607

在您的规范文件的标题中，插入`include Warden::Test::Helpers`和`Warden.test_mode!`，如下所示：

```
require 'spec_helper'

include Warden::Test::Helpers
Warden.test_mode!

describe "AuthenticationPages" do

let(:user) { FactoryGirl.create(:user) }

before { login_as(user, scope: :user }
... 
```

在上面的代码中，我使用 FactoryGirl 创建一个用户。您可以使用其他您喜欢的方式来创建用户。`user`然后我使用方法登录`login_as`。然后你可以运行任何测试，你可以肯定`user`已经登录了。我想这就是你想要的，希望对你有帮助。您可以在此处查看更多详细信息[Test with capybara](https://github.com/plataformatec/devise/wiki/How-To%3a-Test-with-Capybara)。

**编辑**

为了确保它正常工作，您需要在每次测试后重置守望者，您可以通过调用来执行此操作

```
Warden.test_reset! 
```

如果出于某种原因您需要注销已登录的测试用户，您可以使用 Warden 的注销助手。

```
logout(:user) 
```

# c# - Entity Framework 5 代码先添加图片

> ID：13174593
> 
> 赞同：8
> 
> 时间：2012-11-01T09:55:00.317
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在用 mvc4 和实体框架 5 编写一个非常小的应用程序。

我想为该产品添加产品以及商店和图像。

我有一个模型

```
 [Table("CatalogItem")]
public class CatalogItemModel
{
    [Key]
    public int CatalogItemId { get; set; }

    public string Description { get; set; }

    public double Price { get; set; }

    public int ProductCount { get; set; }

    public string Size { get; set; }

    public string Sku { get; set; }

    [Column(TypeName = "image")]

    public byte[] Image { get; set; }

    [Display(Name = "Display Catalog Item")]
    public bool DisplayItem { get; set; }
} 
```

我的控制器。这永远不会受到打击。

```
 [HttpPost]
    public ActionResult Create(CatalogItemModel catalogitemmodel)
    {
        if (ModelState.IsValid)
        {
            db.CatalogItemModels.Add(catalogitemmodel);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(catalogitemmodel);
    } 
```

我的意见表格

```
 <fieldset>
    <legend>CatalogItemModel</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Description)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Description)
        @Html.ValidationMessageFor(model => model.Description)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Price)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Price)
        @Html.ValidationMessageFor(model => model.Price)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ProductCount)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ProductCount)
        @Html.ValidationMessageFor(model => model.ProductCount)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Size)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Size)
        @Html.ValidationMessageFor(model => model.Size)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Sku)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Sku)
        @Html.ValidationMessageFor(model => model.Sku)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.DisplayItem)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DisplayItem)
        @Html.ValidationMessageFor(model => model.DisplayItem)
    </div>
    <div class="editor-label">
        @Html.LabelFor(m=>m.Image)
    </div>

    <input name="Image" type="file"/>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

当我尝试在我的文件输入中发布带有图像的新目录时，它会引发错误

> 输入不是有效的 Base-64 字符串，因为它包含非 base-64 字符、两个以上的填充字符或填充字符中的非法字符。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T11:38:45.923

尝试像这样修复：

1\. 代替

`<input name="Image" type="file"/>` 和`<input name="ImageFile" type="file"/>`

2\. 在控制器中：

```
 [HttpPost]
        public ActionResult Create(CatalogItemModel catalogitemmodel, HttpPostedFileBase ImageFile)
        {
            using (var ms = new MemoryStream())
            {
                ImageFile.InputStream.CopyTo(ms);
                catalogitemmodel.Image =  ms.ToArray();
            }

            if (ModelState.IsValid)
            {
                db.CatalogItemModels.Add(catalogitemmodel);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(catalogitemmodel);
        } 
```

# uiview - 如何使用动画缩放 uiview 及其内部的所有内容（其他自定义绘制的 uiview）？

> ID：13174597
> 
> 赞同：3
> 
> 时间：2012-11-01T09:55:15.143
> 
> 标签：uiview, xcode4.2, uiviewanimationtransition

我有一个 uiview，其中包含其他自定义绘制的 uiview。现在我想要这样，当用户单击此父视图时，它将扩展为带有动画的新定义帧。我使用动画块取得了一些成功。问题是扩展视图只是未扩展 uiview 的缩放版本，因此它有点像素化。现在通过在动画块之后调用子视图`setneedsdisplay()`，扩展视图的最终结果是清晰的（即没有像素化）。但在过渡中它仍然像素化。

有人可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-28T07:10:27.967

这是一个老问题，但无论如何我都会试一试......

> 通过在动画块之后调用子视图 setneedsdisplay() 现在扩展视图的最终结果是清晰的（即没有像素化）......有人可以提出更好的方法吗？

您可以在 Xcode 4.2 中完成此操作的一种方法是插入包含较大版本视图的图片的图像视图。您可以通过[在图像上下文中渲染视图](https://stackoverflow.com/q/6079273/643383)来创建该图片。当然，如果动画通过简单的缩放来扩展视图，这种方法效果最好；如果您在动画期间移动子视图，则静态图像显然没有帮助。

现在 Xcode 4.2 在很大程度上是一个遥远的内存并且设备有更多的马力，在扩展期间使用自动布局约束来管理子视图的大小和位置应该会产生相当好的结果。

# scala - 仅基于类型的详尽模式匹配

> ID：13174601
> 
> 赞同：1
> 
> 时间：2012-11-01T09:55:33.377
> 
> 标签：scala, pattern-matching

我有三个密封的案例类。Scala 会告诉我这场比赛是否详尽（我猜不是）？

```
value match {
  case a: A => methodThatNeedsA(a)
  case b: B => methodThatNeedsB(b)
  case c: C => methodThatNeedsC(c)
} 
```

我可以执行以下操作，我知道这将是详尽无遗的 - 但由于我不需要分解表达式，它看起来非常混乱：

```
value match {
  case a @ A(_) => methodThatNeedsA(a)
  case b @ B(_, _) => methodThatNeedsB(b)
  case c @ C(_, _, _) => methodThatNeedsC(c)
} 
```

有没有更好的方法来像这样纯粹基于类型进行调度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:03:29.147

我刚刚测试了你的代码：

```
sealed trait Base
case class A(x: Int) extends Base
case class B(x: Int, y: Int) extends Base
case class C(x: Int, y: Int, z: Int) extends Base 
```

如果我删除`case`模式匹配中的三个 s 中的任何一个：

```
value match {
    case a: A => methodThatNeedsA(a)
    case b: B => methodThatNeedsB(b)
    //case c: C => methodThatNeedsC(c)

} 
```

编译器发出警告：

```
warning: match is not exhaustive!
missing combination              C 
```

# python - 如何在 REDIS 中的密钥过期时获取回调

> ID：13174615
> 
> 赞同：27
> 
> 时间：2012-11-01T09:56:19.463
> 
> 标签：python, redis, bottle

我正在使用 Bottle 开发应用程序。在我的注册表单中，我使用唯一密钥通过邮件确认电子邮件。我将此密钥存储在 REDIS 中，有效期为 4 天。如果用户在 4 天内未确认电子邮件，则密钥将过期。为此，我想从我的数据库（mongoDB）中永久删除用户条目。

当然，我不需要持续轮询我的 redis 服务器来检查密钥是否存在。

有没有办法从 Redis 获得回调？

或者有没有其他有效的方法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-01-20T05:29:06.057

此功能在 Redis 2.8 中实现，请在此处阅读[http://redis.io/topics/notifications](http://redis.io/topics/notifications)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-01T10:01:05.210

redis 中没有这样的回调（我不知道）。

我会这样做：

*   当用户注册时，[将他的 ID 放入一个排序集中](http://redis.io/commands/zadd)，其中分数是时间戳（现在 + 4 天），成员是用户 ID。
*   有一个定期作业，从时间戳在过去的排序集中获取所有记录。
*   遍历这些用户 ID 并采取行动（如果他没有确认 - 删除所有用户的数据）。

# c# - 从 excelsheet 读取时，索引超出了数组的范围

> ID：13174617
> 
> 赞同：0
> 
> 时间：2012-11-01T09:56:24.223
> 
> 标签：c#, asp.net, sql

我正在将 excelsheet 导入 sqlserver 数据库，但 excel 中有三列：

```
id|data|passport 
```

我想确保所有护照都以我遇到错误的字母开头：

```
if (a[0]>= 'A' && a[0] <= 'Z' && a[0] !='0' ) 
```

错误：

> 指数数组的边界之外。

```
 for (int i1 = 0; i1 < dt7.Rows.Count; i1++)
            {

                if (dt7.Rows[i1]["passport"]==null)
                {
                    dt7.Rows[i1]["passport"] = 0;

                }

                string a = Convert.ToString(dt7.Rows[i1]["passport"]);

                //char a1 = a[0];

                if (a[0]>= 'A' && a[0] <= 'Z' && a[0] !='0' )
                {
                    Label12.Text = "CAPITAL";
                    break;
                }
                else
                {
                    Label12.Text = "notgood";

                    flag = flag + 1;

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:58:09.740

听起来像是`a`引用了一个**空**数组，因此在 index 处没有元素`0`。在尝试访问第一个元素之前，您需要检查数组是否为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:02:32.427

过去，word 和 excel 范围内的对象肯定是基于 1 的数组，并且在访问索引 0 时会抛出超出范围的异常。我相信情况仍然如此。

正如@anthony-grist 所说，也有可能数组为空，因此第一项将超出数组边界。

我建议您测试数组的长度，并从索引 1 开始访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:20:05.253

为什么不像这样修改你的条件

```
If(!String.IsNullOrEmpty(a)){
    If(Char.IsLetter(a[0])){
          Label12.Text = "CAPITAL";
          break;
    }
} 
```

# c++ - 错误：未在此范围内声明“随机”

> ID：13174619
> 
> 赞同：1
> 
> 时间：2012-11-01T09:56:29.043
> 
> 标签：c++, compiler-errors, mingw, zxing

我正在使用 MinGW 构建 zxing，但它失败并出现以下错误：

```
build\core\tests\src\common\BitArrayTest.cpp: In static member function 'static void zxing::BitArrayTest::fillRandom(zxing::BitArray&, zxing::BitArray&)':
build\core\tests\src\common\BitArrayTest.cpp:99:39: error: 'srandom' was not declared in this scope
build\core\tests\src\common\BitArrayTest.cpp:101:15: error: 'random' was not declared in this scope
scons: *** [build\core\tests\src\common\BitArrayTest.o] Error 1 
```

我尝试添加`-DANN_NO_RANDOM`到编译器标志，但没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T10:02:04.863

`srandom`是一个`linux`函数，而是使用[srand](http://www.cplusplus.com/reference/clibrary/cstdlib/srand/)，如果您不想更改外部库中的代码，只需添加`-Dsrandom=srand -Drandom=rand`到编译器标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:02:27.873

您需要包含`<stdlib.h>`头文件。

# linux - 带有前缀主机名的 lighttpd access.log appeng，例如 hostname-access.log

> ID：13174622
> 
> 赞同：0
> 
> 时间：2012-11-01T09:56:51.433
> 
> 标签：linux, lighttpd

我们在 loadbalncer 后面有多个服务器，我们希望每台机器的访问日志以它访问前缀作为 hosname 和在 lighttpd 中的 accesslog 的方式访问。

例如 ：

`192.168.1.1-access.log` `192.168.1.2-access.log`

我尝试使用`include_shell`参数并有一个脚本`hostname.sh`，但它不符合我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:26:19.237

我认为你可能试图过度复杂化这个问题，你不能只做以下事情吗？

```
$SERVER["socket"] == “192.168.1.1:80″ {
    accesslog.filename = "/var/log/lighttpd/192.168.1.1-access.log"
} 
```

您还提到您在使用 include_shell 时遇到问题，请尝试以下操作

*lighttpd.conf*

```
include_shell "/etc/lighttpd/scripts/servername.sh"
accesslog.filename = "/var/log/lighttpd/" + var.servername  + "-access.log" 
```

*scripts/servername.sh* - 用于主机名

```
#!/bin/bash
echo 'var.servername="'$(uname -n)'"' 
```

*或者*

*scripts/servername.sh* - 用于 IP 地址

```
#!/bin/bash
echo 'var.servername="'$(/sbin/ifconfig | sed -n '2 p' | awk '{print $2}' | sed s/addr://g)'"' 
```

（更改 sed 和 awk 参数以在多个接口上为您获取正确的 IP）

这将为您提供您正在寻找的东西。

或者，只需将 cat `accesslog.filename = "/var/log/lighttpd/" +`uname -n`+ "-access.log"`放在配置文件的末尾即可获得便宜且肮脏的解决方案。

# java - Java，提取$符号之间的单词

> ID：13174624
> 
> 赞同：3
> 
> 时间：2012-11-01T09:56:58.563
> 
> 标签：java, regex, parsing

使用 Java，我想提取 $ 符号之间的单词`$`。

例如：

```
String = " this is first attribute $color$. this is the second attribute $size$" 
```

我想拉出字符串：`color`并将`size`它们放入列表中。

我试过了：

```
Pattern pattern = Pattern.compile("(\\$) .* (\\$)");
Matcher matcher = pattern.matcher(sentence); 
```

但我得到了输出：

```
"$color$.this is the second attribute $size$" 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:01:50.170

`.*`匹配**任何**符号的问题。因此，您的模式结果在开头是正确的，结尾是美元符号。

如果美元之间的变量只是字母数字使用`\$\w+\$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:02:10.117

确保单词不包含美元：`(\$)[^$]*(\$)`

或者，不要贪婪，而是使用不情愿的全匹配`(\$) .*? (\$)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:02:51.537

试试这个正则表达式。它应该给出预期的结果。

```
Pattern pattern = Pattern.compile("\$(.*?)\$"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T10:03:04.190

问题是您正在使用的正则表达式是贪婪的，并且从字符串中的第一个`$`开始到最后一个都消耗了所有内容。`$`您必须在 之后添加 a`?`以`*`使正则表达式不贪婪：

```
Pattern pattern = Pattern.compile("\\$(.*?)\\$");
Matcher matcher = pattern.matcher(sentence);
List<String> result = new ArrayList<String>();
for(int i=1; i <= matcher.groupCount(); i++)
    result.add(matcher.group(i); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T10:03:40.070

您应该在模式中使用非贪婪限定符：

```
Pattern pattern = Pattern.compile("\\$(.*?)\\$"); 
```

注意星号后面的问号。此外，您可以考虑使用`+`而不是`*`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T10:04:41.730

使用非贪婪匹配找到最小匹配，您可以使用组仅提取没有“$”的单词：

```
"\\$(.*?)\\$" 
```

然后在第一组中找到该词：

```
matcher.group(1) 
```

# c# - OneToMany 关系在 NHibernate 和 NET Persistence API 中不起作用

> ID：13174625
> 
> 赞同：0
> 
> 时间：2012-11-01T09:56:59.360
> 
> 标签：c#, nhibernate, c#-4.0, persistence

我正在使用 Hibernate & NET Persistence API 与 C# 的组合。我在两个实体之间有以下关系：

```
public class Question
{
    [OneToMany(Cascade = new CascadeType[] { CascadeType.ALL }, Fetch = FetchType.LAZY, MappedBy = "Question")]
    public virtual List<QueueLog> QueueLogs { get; set; }    
} 
```

和

```
public class QueueLog
{
    [ManyToOne (Fetch = FetchType.EAGER, TargetEntity = typeof(Question))]
    [Column(Name = "question_id", Nullable = false)]
    public virtual List<Question> Question { get; set; }
} 
```

但是在通过其主键 ID 获取问题时，我收到以下错误：

```
Missing column: Question_0 in Kmasters.dbo.queue_log
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: NHibernate.HibernateException: Missing column: Question_0 in Kmasters.dbo.queue_log 
```

另外，我尝试通过以下方式建立两个实体之间的关系：

```
public class Question
{
    [OneToMany(Cascade = new CascadeType[] { CascadeType.ALL }, Fetch = FetchType.LAZY)]
    [JoinColumn(Name = "question_id", ReferencedColumnName = "id")]
    public virtual List<QueueLog> QueueLogs { get; set; }    
} 
```

和

```
public class QueueLog
{
    [ManyToOne (Fetch = FetchType.EAGER, TargetEntity = typeof(Question))]
    [Column(Name = "question_id", Nullable = false)]
    public virtual List<Question> Question { get; set; }
} 
```

但我仍然遇到同样的错误。谁能建议我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:44:58.357

我通过进行以下更改修复了代码：

```
public class Question
{
   [OneToMany(TargetEntity = typeof(QueueLog), MappedBy = "question", Fetch = FetchType.EAGER, Cascade = new CascadeType[] { CascadeType.ALL })]
   public virtual NHibernate.Collection.PersistentBag QueueLogs { get; set; }
} 
```

和

```
public class QueueLog
{
     [ManyToOne (Fetch = FetchType.EAGER, TargetEntity = typeof(Question))]
     [JoinColumn(Name = "question_id")]
     public virtual Question question { get; set; }
} 
```

# sql-server - 如何在 SQL Server 的数据库中搜索字符串

> ID：13174627
> 
> 赞同：1
> 
> 时间：2012-11-01T09:57:05.077
> 
> 标签：sql-server, database, sql-server-2005

此查询可以从任何 SQL Server 数据库的所有表/视图中搜索任何字符串值（表名、表数据等），当您将任何字符串放在“**您的文本此处**”时，它将从所有表中搜索您的给定字符串/视图存在于该数据库中，

```
DECLARE @SearchStr nvarchar(100) 
    SET @SearchStr = 'your text here'

DECLARE @Results TABLE(ColumnName nvarchar(370), ColumnValue nvarchar(3630))

SET NOCOUNT ON

DECLARE @TableName nvarchar(256), @ColumnName nvarchar(128), @SearchStr2 nvarchar(110)
SET  @TableName = ''
SET @SearchStr2 = QUOTENAME('%' + @SearchStr + '%','''')

WHILE @TableName IS NOT NULL
BEGIN
    SET @ColumnName = ''
    SET @TableName = 
    (
        SELECT MIN(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME))
        FROM    INFORMATION_SCHEMA.TABLES
        WHERE       TABLE_TYPE = 'BASE TABLE'
            AND QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME) > @TableName
            AND OBJECTPROPERTY(
                    OBJECT_ID(
                        QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME)
                         ), 'IsMSShipped'
                           ) = 0
    )

    WHILE (@TableName IS NOT NULL) AND (@ColumnName IS NOT NULL)
    BEGIN
        SET @ColumnName =
        (
            SELECT MIN(QUOTENAME(COLUMN_NAME))
            FROM    INFORMATION_SCHEMA.COLUMNS
            WHERE       TABLE_SCHEMA    = PARSENAME(@TableName, 2)
                AND TABLE_NAME  = PARSENAME(@TableName, 1)
                AND DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar')
                AND QUOTENAME(COLUMN_NAME) > @ColumnName
        )

        IF @ColumnName IS NOT NULL
        BEGIN
            INSERT INTO @Results
            EXEC
            (
                'SELECT ''' + @TableName + '.' + @ColumnName + ''', LEFT(' + @ColumnName + ', 3630) 
                FROM ' + @TableName + ' (NOLOCK) ' +
                ' WHERE ' + @ColumnName + ' LIKE ' + @SearchStr2
            )
        END
    END 
END

SELECT ColumnName, ColumnValue FROM @Results 
```

**但我也喜欢搜索**给定的字符串，`procedures/functions/triggers`SQL Server 2005 中是否存在任何查询。因为此查询不在这些区域中搜索。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:04:22.100

> 在程序/函数/触发器中搜索给定的字符串

这实际上要容易得多。

```
SELECT OBJECT_NAME(object_id), definition
  FROM sys.sql_modules
 WHERE definition LIKE '%'+@SearchStr+'%' 
```

使用它的一种方法是将其添加到 TSQL 代码的末尾，即修改最后一个 SELECT：

```
SELECT ColumnName, ColumnValue
  FROM @Results
 UNION ALL
SELECT OBJECT_NAME(object_id), definition
  FROM sys.sql_modules
 WHERE definition LIKE '%'+@SearchStr+'%' 
```

就个人而言，我只是将它们作为单独的语句一个接一个地单独运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T11:03:17.093

查看视图[sys.sql_modules](http://msdn.microsoft.com/en-us/library/ms175081.aspx)。

或者，在 SQL Server 2005 之前的版本中，[syscomments](http://msdn.microsoft.com/en-us/library/aa260393%28v=sql.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T05:21:46.460

这也是从 msDB 中查找 proc 等内容的有用查询，这意味着这将在 SQL Server 代理的作业中找到 table/function/proc ref。

```
USE [msdb] 
GO 
SELECT j.job_id, s.srvname, j.name, js.step_id, js.command, j.enabled 
FROM dbo.sysjobs j 
JOIN dbo.sysjobsteps js ON js.job_id = j.job_id  
JOIN master.dbo.sysservers s     ON s.srvid = j.originating_server_id 
WHERE js.command LIKE N'%YOUR TEXT HERE%' 
```

在接受答案中的上述查询

```
SELECT OBJECT_NAME(object_id), definition
FROM sys.sql_modules
WHERE definition LIKE '%'+@SearchStr+'%' 
```

只能在选定数据库的过程/函数/触发器中找到给定的文本。

下面的查询用于检查 SQL Server 代理作业的作业状态：

```
SELECT sj.name
   , sja.*
FROM msdb.dbo.sysjobactivity AS sja
INNER JOIN msdb.dbo.sysjobs AS sj ON sja.job_id = sj.job_id

SELECT TOP 10 * FROM msdb.dbo.sysjobhistory 
```

查询以查找 DB 中表的约束详细信息。

```
SELECT
    FK_Table = FK.TABLE_NAME,
    FK_Column = CU.COLUMN_NAME,
    PK_Table = PK.TABLE_NAME,
    PK_Column = PT.COLUMN_NAME,
    Constraint_Name = C.CONSTRAINT_NAME
FROM
    INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK
    ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK
    ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU
    ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (
            SELECT
                i1.TABLE_NAME,
                i2.COLUMN_NAME
            FROM
                INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
            INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2
                ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
            WHERE
                i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
           ) PT
    ON PT.TABLE_NAME = PK.TABLE_NAME
    WHERE PT.table_name = 'Table Name' 
```

检查 SQL 作业代理运行作业状态：

```
use msdb                          
go                         
SELECT  j.name JobName            
, STUFF(STUFF(h.run_date,5,0,'-'),8,0,'-') as Date
, CAST(STR(h.run_date, 8, 0) AS DATETIME) + CAST(STUFF(STUFF(RIGHT('000000' + CAST (h.run_time AS VARCHAR(6)), 6),5, 0, ':'), 3, 0, ':') AS DATETIME) AS StartDate
, STUFF(STUFF(RIGHT(REPLICATE('0', 6) + CAST(h.run_duration as varchar(6)), 6), 3, 0, ':'), 6, 0, ':') AS DURATION
, CASE h.run_status               
          WHEN 0 THEN 'failed'           
          WHEN 1 THEN 'Succeded'         
          WHEN 2 THEN 'Retry'            
          WHEN 3 THEN 'Cancelled'        
          WHEN 4 THEN 'In Progress'      
        END AS ExecutionStatus           

FROM    sysjobhistory h           
        INNER JOIN sysjobs j             
            ON j.job_id = h.job_id       
                     WHERE STEP_ID = 0
                     AND CAST(STR(h.run_date, 8, 0) AS DATETIME) + CAST(STUFF(STUFF(RIGHT('000000' + CAST (h.run_time AS VARCHAR(6)), 6),5, 0, ':'), 3, 0, ':') AS DATETIME)>=getdate()-90
                     AND (j.name Like 'DW%' 
                     )
ORDER BY j.name, STUFF(STUFF(h.run_date,5,0,'-'),8,0,'-') 
```

因此，这对于在 DB 中搜索某些文本的人会有所帮助。

这是在 sql server 中查找 SP/view/trigger 等定义的查询。

```
SELECT definition   
FROM sys.sql_modules  
WHERE object_id = OBJECT_ID(N'Object Name Here'); 
```

要查看表模式，我们可以使用 F1 并获取完整的详细信息，我们也可以使用以下查询

```
SELECT DISTINCT C.COLUMN_NAME, C.IS_NULLABLE, C.DATA_TYPE, TC.CONSTRAINT_TYPE, C.COLUMN_DEFAULT
FROM INFORMATION_SCHEMA.COLUMNS AS C
FULL JOIN INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE AS CC ON C.COLUMN_NAME = CC.COLUMN_NAME 
FULL JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS AS TC ON CC.CONSTRAINT_NAME = TC.CONSTRAINT_NAME WHERE C.TABLE_NAME = 'Table Name Here'; 
```

# citrix - 使用 Citrix ICO 如何确定当前程序启动了哪个 wfica32 进程？

> ID：13174629
> 
> 赞同：2
> 
> 时间：2012-11-01T09:57:14.223
> 
> 标签：citrix

现在我们使用 Citrix XenApp5.0 发布应用程序并使用 ICA 客户端对象 (ICO) 从客户端访问它，以实现一些我们需要知道 wfica.exe 的确切进程 ID（或窗口句柄）的功能当前程序（由于可能有多个相同的程序在运行，我们无法通过应用名称、窗口标题等来识别它们）。在 ICA Client Object 提供的所有接口中，我找不到有用的东西。谁能给我一些线索？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:15:42.223

我希望该流程是您流程的子流程。[您可以使用Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)进行验证。

# sql - 带有子分区的分区语法

> ID：13174634
> 
> 赞同：0
> 
> 时间：2012-11-01T09:57:26.487
> 
> 标签：sql, oracle

```
col1 ....
col2 ....
col3 ....
col4 ....
PARTITION BY RANGE(DATE_KEY)
SUBPARTITION BY LIST(REGION_KEY)
SUBPARTITION TEMPLATE
  (SUBPARTITION A VALUES (1) TABLESPACE X,
   SUBPARTITION B VALUES(3) TABLESPACE X,
   SUBPARTITION C VALUES (8) TABLESPACE X)
(PARTITION MON_JAN_2012 VALUES LESS THAN (1000)
    TABLESPACE X
    PCTFREE 10
    INITRANS 1
    MAXTRANS 255
    NOLOGGING
  (SUBPARTITION A VALUES (1) TABLESPACE X,
   SUBPARTITION B VALUES(3) TABLESPACE X,
   SUBPARTITION C VALUES (8) TABLESPACE X),
 PARTITION MON_FEB_2012 VALUES LESS THAN (2000)
    TABLESPACE X        PCTFREE 10
    INITRANS 1
    MAXTRANS 255
    NOLOGGING
  (SUBPARTITION A VALUES (1) TABLESPACE X,
   SUBPARTITION B VALUES(3) TABLESPACE X,
   SUBPARTITION C VALUES (8) TABLESPACE X) 
```

我的表结构是这样的，我是分区新手，需要为 March_2021 的表添加新分区几个月，需要正确的语法，我尝试谷歌但无法找到添加带有子分区的分区的示例。数据库 10g

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:20:11.227

因为您有一个模板，所以添加分区对子分区是透明的：

```
alter table your_table add partition mon_mar_2012 values less than (3000); 
```

（这将自动为新分区创建子分区）。

**编辑**：如果你没有模板，你应该手动创建子分区：

```
ALTER TABLE your_table MODIFY PARTITION partition
      ADD SUBPARTITION subpartition_name ... 
```

# javascript - Jasmine 没有添加我们的 .js 文件

> ID：13174635
> 
> 赞同：2
> 
> 时间：2012-11-01T09:57:36.123
> 
> 标签：javascript, jquery

`gem "jasmine"`最初我在 gem 文件中添加了这一行并执行了这两个 cmd

*   `bundle`
*   `rails generate jasmine:install`

它的工作正常。我的问题是，我的`testing.js`文件没有添加到 jasmine 文件中。

```
describe("Hello world", function() {
  it("says hello", function() {
    expect(helloWorld()).toEqual("Hello world!");
  });
}); 
```

它是我的代码，我的 .js 文件位于 public/javascript/testing.js

```
function helloWorld() {
  return "Hello world!";
} 
```

错误信息是

> ReferenceError: helloWorld 未在`http://localhost:8888/__spec__/tesfing_spec.js`（第 4 行）中定义

我将 jasmine.yml 文件中的路径添加为

```
src_files:
  - "public/javascript/testing.js" 
```

即使它不起作用。谢谢您的回答。

# rtc - 在 Rational Team Concert 中更改项目树的属性

> ID：13174636
> 
> 赞同：1
> 
> 时间：2012-11-01T09:57:39.400
> 
> 标签：rtc

我们使用 RTC 进行规划。我们创建 Epics、Stories 作为它们的子项、Tasks 作为 Story 子项等。通常，我们需要为整个故事及其子任务更改某些内容，例如计划的迭代。有没有办法改变整个树的属性（跟随“子”类型的链接），所以我们不需要去一个一个地改变？

我在文档和网上都没有找到任何东西......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:12:37.573

您可以通过显示查询结果的“工作项”视图执行多个工作项 (WI) 更改：选择多行，右键单击右侧列（具有您要更改的值的列），然后您将具有该属性的其他值供您选择。

因此，如果您可以设法进行*查询*以选择正确的工作项，您就可以做您需要的事情。
" ["`Parent>ID is`标准](https://jazz.net/forum/questions/80411/rtc-query-based-on-parent-id-not-finding-any-matches)是一种方式，但可能仅限于一个级别。

# json - GET 返回 500 Internal Server Error 的响应状态

> ID：13174642
> 
> 赞同：0
> 
> 时间：2012-11-01T09:57:50.790
> 
> 标签：json, jakarta-ee, jersey

尝试调用 JSON Web 服务时出现异常。我是新手，我想知道我在哪里搞砸了。

例外

> GET com.sun.jersey.api.client.UniformInterfaceException: GET [http://www.mcruiseon.com:8081/mCruiseOnCarPool4All/carpool4all/AcceptedSubscriptionList/Request/143683759/-1087322127](http://www.mcruiseon.com:8081/mCruiseOnCarPool4All/carpool4all/AcceptedSubscriptionList/Request/143683759/-1087322127)在 com 返回响应状态 500 Internal Server Error。 sun.jersey.api.client.WebResource.handle(WebResource.java:686) at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) at com.sun.jersey.api.client .WebResource$Builder.get(WebResource.java:507) 在 test.carpool4all.SingleProviderTest.testPost(SingleProviderTest.java:70)

Junit 客户端 (SingleProviderTest)

```
// AcceptedSubscriptionList
    service = client.resource(UriBuilder.fromUri(
                "http://localhost:8081/mCruiseOnCarPool4All/carpool4all/AcceptedSubscriptionList/Request/" + identityHash
                + "/" + journeyList[i].getProviderHash()).build());
            //Line # 70 Below
            SubscribeJourneyConcrete[] acceptdList = service.type(MediaType.APPLICATION_JSON).get(
            SubscribeJourneyConcrete[].class);
    assertNotNull(acceptdList);
    assertTrue(acceptdList.length > 0); 
```

泽西岛网络服务

```
@Path("/AcceptedSubscriptionList")
public class AcceptedSubscriptionListService {
    private ClientSession clientSession ;
    private static final SessionManager sessionManager = SessionManager.getInstance() ;
    @Context
    UriInfo uriInfo;
    @Context
    Request request;

    @GET
    @Path ("Request/{identityHash}/{providerHash}")
    @Consumes({ MediaType.APPLICATION_JSON })
    @Produces({ MediaType.APPLICATION_JSON })
    public Response getJourneyList(@PathParam("identityHash") String identityHash,
        @PathParam("providerHash") String providerHash) {
    AcceptedSubscriptionListRequest request = new AcceptedSubscriptionListRequest(providerHash) ;
    AcceptedSubscriptionListResponse response ;
    clientSession = sessionManager.getClientSession(identityHash) ;
    clientSession.getSendQueue().sendRequest(request) ;
    try {
        response = (AcceptedSubscriptionListResponse)clientSession.waitAndGetResponse(request) ;
    } catch (WaitedLongEnoughException e) {
        return Response.serverError().build() ;
    } catch (UnableToResolveResponseException e) {
        return Response.serverError().build() ;
    }
    return Response.ok(response.getAcceptedSubscriberList()).build();
} 
```

网络服务加载正常

> 信息：找到根资源类：com.mcruiseon.carpool4all.VehicleListService 类 com.mcruiseon.carpool4all.SubscriberListService 类 com.mcruiseon.carpool4all.JourneyListService 类 com.mcruiseon.carpool4all.RegistrationService 类 com.mcruiseon.carpool4all.SearchService 类 com。 mcruiseon.carpool4all.AddJourneyDetailsS​​ervice 类 com.mcruiseon.carpool4all.AcceptedSubscriptionListService 类 com.mcruiseon.carpool4all.AcceptSubscriptionService 类 com.mcruiseon.carpool4all.AddVehicleDetailsS​​ervice 类 com.mcruiseon.carpool4all.SubscribeToThisJourneyService 类 com.mcruiseon.carpool4all.AddUserDetailsS​​ervice

# bash - 用于简单文本文件修改的 Unix 脚本

> ID：13174645
> 
> 赞同：0
> 
> 时间：2012-11-01T09:58:05.883
> 
> 标签：bash, unix

我有一个看起来像这样的文件，格式应该是文件名，后跟 4 个条目开头！.......

```
76669667-LD_TTFI9255.gz
!0c0901$
!02342e$
!0c0901$
!030c2a$
76669707-UN_TTFI5494.gz
!0c0901$
!030509$
76669731-IN_TTFI7570.gz
!0c0901$
!023633$
!0c0901$
!030e33$ 
```

我需要一个命令来查找文件名后少于 4 个条目并添加一些空格的情况。

使用上面的例子，新的输出需要变成

```
76669667-LD_TTFI9255.gz
!0c0901$
!02342e$
!0c0901$
!030c2a$
76669707-UN_TTFI5494.gz
!0c0901$
!030509$
!?
!?
76669731-IN_TTFI7570.gz
!0c0901$
!023633$
!0c0901$
!030e33$ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:15:03.610

假设您乐于使用的不仅仅是 sed、awk 或 bash……

下面的 Perl 脚本可以解决问题：

```
cat input.txt | perl -pe '
    if (/^!/) {
        --$n
    } else {
        print "!?\n" x $n if $n > 0
        $n = 4
    }
    END {
        print "!?\n" x $n if $n > 0
    }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:15:13.030

```
awk 'BEGIN {counter = 4}
     /^!/ {counter++; print}
     /^[^!]/ { for(i = counter; i<4; i++) print "!?"; print; counter=0; }
     END { for(i = counter; i<4; i++) print "!?"; }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:11:29.247

纯 bash 解决方案。没有其他答案中的代码重复:)

```
#!/bin/bash
count=0
while read line
do
  if [[ ! "$line" =~ ^! ]]
  then
      for((;count>0;count--))
      do
        echo "!?"
      done
      count=4
  else
      ((count--))
  fi
  echo "$line"
done < file 
```

# zend-form - 禁用 notInArray 验证器 Zend Framework 2

> ID：13174648
> 
> 赞同：10
> 
> 时间：2012-11-01T09:58:11.760
> 
> 标签：zend-form, zend-framework2, validation

有没有办法在 Zend Framework 2 中禁用 notInArray 验证器。互联网上的所有信息都显示了如何在 Zend Framework 1 中禁用 notInArray 验证器，例如以这种方式

**如果您根本不需要 InArray 验证器，则可以通过在元素上调用 setRegisterInArrayValidator(false) 或在创建元素时将 false 传递给 registerInArrayValidator 配置键来禁用此行为。**

可以在[此处找到 stackoverflow 中的帖子之一](https://stackoverflow.com/questions/991001/zend-validate-between-strange-error-message)

不幸的是，这在 Zend Framework 2 中是不可能的。所以如果有人有提示如何禁用它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-13T13:29:03.523

从 2.2 版开始，Zend Framework 提供了**禁用 inArray 验证器**调用的功能：

```
$element->setDisableInArrayValidator(false); 
```

或将**选项**传递给元素：

```
'disable_inarray_validator' => false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T17:09:46.600

我遇到了同样的问题，我所做的是在验证之前填充元素，例如：

```
$clientForm->get('city')->setValueOptions($options);
$clientForm->setData($post);

if ($clientForm->isValid()) {
  //
} else {
  //
} 
```

这不会禁用 notInArray 验证器，但您可以欺骗它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T14:25:38.943

如果您根本不需要验证，请添加`required => false`InputFilter

```
 $this->add(array(
        'name' => 'your-elements-name',
        'required' => false,
    )); 
```

为我工作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T13:04:57.480

我遇到了同样的情况：当我通过 ajax 填充我的 html 选择元素时，经过大量搜索发现无法做到这一点，以创建我自己的选择表单元素结束，我将为您提供我的更改：

```
 /**
     * Provide default input rules for this element
     *
     * Attaches the captcha as a validator.
     *
     * @return array
     */
    public function getInputSpecification()
    {
        $spec = array(
            'name' => $this->getName(),
            'required' => true,
            //// make sure to delete the validators array in the next line  
            'validators' => array( 
                $this->getValidator()
            )
        );

        return $spec;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T03:05:59.977

我在这个链接上找到了这个，并认为我会发布它，因为我发现它是一个很好的解决方案.... [http://samsonasik.wordpress.com/2012/10/01/zend-framework-2-extending-zendform-to -add-select-multicheckbox-emaildate-textarea-and-radio-element/](http://samsonasik.wordpress.com/2012/10/01/zend-framework-2-extending-zendform-to-add-select-multicheckbox-emaildate-textarea-and-radio-element/)

不要尝试停用默认验证器。在 setData 之前重新评估选择选项值。

```
$form->get('state_id')
     ->setOptions(
           array('value_options'=> $Newstatecollection)) ; 
```

如果您在其他地方需要它，可以节省停用该功能的麻烦

# ios - iOS VoIP 应用程序检测连接断开

> ID：13174654
> 
> 赞同：0
> 
> 时间：2012-11-01T09:58:29.260
> 
> 标签：ios, voip

我正在构建一个类似于 VoIP 的连接到一个不太稳定的服务器（请不要告诉我修复服务器，它不是我的）。我希望编写一个连接到此服务器的 iOS 应用程序，如果连接中断，请通知用户。我可以很容易地在前台模式下做到这一点。

如何在后台模式下执行此操作。setKeepAliveTimeout 每 10 分钟调用一次。我需要立即提醒用户连接断开。是否有一些我可以注册的通知告诉我与服务器的连接是否在后台模式下断开？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:34:08.347

据我所知，也许你可以解决这样的问题。

当您进入后台模式时。iOS 将停止执行您的代码。因此您无法通过自己的代码执行此操作。

但是，如果您将套接字设置为 voip，则 iOS 会在套接字接收到套接字中的数据时唤醒您的代码一段时间。因此，您可以让服务器向您发送一些数据以唤醒您的应用程序，例如每 10 秒。

它可能有效。但我没有尝试过。

# emacs - 有没有办法在 Elisp 中编写函数来组合函数？

> ID：13174659
> 
> 赞同：7
> 
> 时间：2012-11-01T09:58:50.180
> 
> 标签：emacs, elisp

我想创建一个函数，它返回几个其他函数的组合，这样

```
(funcall (compose 'f 'g) x) == (f (g x)) 
```

我觉得我在这方面失败得很惨。到目前为止我最好的尝试：

```
(defun compose (funcs)
  "composes several funcitons into one"
  (lambda (arg)
    (if funcs
        (funcall (car funcs) (funcall (compose (cdr funcs)) arg))
        arg))) 
```

但由于某种原因，以下仍然返回 0：

```
(funcall (compose '(
           (lambda (a) (* a 3))
           (lambda (a) (+ a 2))
)) 0) 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:07:08.840

您的代码需要词法范围的 lambda，而 Emacs Lisp 默认不支持。如果您使用 Emacs 24，请设置`lexical-binding`为`t`，您的示例将按照编写的方式运行。

如果您使用的是较旧的 Emacs，则可以使用显式`lexical-let`形式创建词法范围的 lambda：

```
(require 'cl)

(defun compose (funcs)
  "composes several funcitons into one"
  (lexical-let ((funcs funcs))
    (lambda (arg)
      (if funcs
          (funcall (car funcs) (funcall (compose (cdr funcs)) arg))
        arg)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-23T19:40:18.723

如果您想要一个库，请参阅[dash functional](https://melpa.org/#/dash-functional)，它`-compose`需要`(&rest fns)`.

# c# - NamedPipeClientStream 在 session 0 下无法访问 NamedPipeServerStream

> ID：13174660
> 
> 赞同：17
> 
> 时间：2012-11-01T09:58:49.420
> 
> 标签：c#, windows-7, named-pipes

我有连接到 NamedPipeServerStream 的 NamedPipeClientStream。他们交换了几条消息，然后 NamedPipeClientStream 关​​闭，而 NamedPipeServerStream 重新创建并继续侦听客户端管道。（我无法制作一个有效的异步服务器管道，所以这是某种狗钉）

在我的客户端从普通用户会话启动的流期间，客户端-服务器交互工作正常。

但是有一种情况是客户端管道从 Win7 和 win2008 服务器上的会话 0 启动。发生这种情况时，我在客户端流中出现错误：

> “访问路径被拒绝”

问题是什么？如何避免？

抱歉，我无法告诉您有关异常的更多信息。只有我有这个消息在日志中。而且我不能从零会话调试我的程序，可以吗？

服务器流代码：

```
PipeSecurity ps = new PipeSecurity();
System.Security.Principal.SecurityIdentifier sid = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.BuiltinUsersSid, null);
PipeAccessRule par = new PipeAccessRule(sid, PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow);
ps.AddAccessRule(par);
pipeClientConnection = new NamedPipeServerStream(General.PIPENAME, PipeDirection.InOut, 1, PipeTransmissionMode.Byte, PipeOptions.Asynchronous, General.BUFFERSIZE, General.BUFFERSIZE, ps);
Console.Write("Waiting for client connection...");
IAsyncResult result = pipeClientConnection.BeginWaitForConnection(OnPipeConnected, pipeClientConnection); 
```

也许安全设置有问题？

和客户端代码：

```
using (NamedPipeClientStream pipeStream = new NamedPipeClientStream(".", General.PIPENAME, PipeDirection.InOut))
{
    try
    {
        Console.WriteLine("Connecting with pipe...");
        pipeStream.Connect(General.CONNECTIONTIMEOUT);
        Console.WriteLine("Pipe connection established");
        //..do something..
    }
    //...
} 
```

服务器在 LocalSystem 下作为 windows 服务启动。客户端 - 是一个简单的控制台应用程序。它是由从 LocalSystem 服务启动的另一个应用程序启动的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T13:22:01.383

看起来问题出在此处的安全设置中：

```
System.Security.Principal.SecurityIdentifier sid = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.BuiltinUsersSid, null); 
```

应该 ：

```
System.Security.Principal.SecurityIdentifier sid = new System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.WorldSid, null); 
```

感谢[微软社区](http://msdn.microsoft.com/en-us/library/community/history/system.io.pipes.namedpipeclientstream%28v=vs.90%29.aspx?id=4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-29T15:47:23.160

我知道这个问题有点老了，我刚刚遇到了这个问题，并想补充一下。

此错误还可能表明命名管道已在使用中。我有一个生产服务运行我试图调试的相同可执行文件，并且在初始化该管道服务器时它失败了，因为它已经被另一个进程使用。似乎该错误应该对这种情况提供更多信息，但事实就是如此。

# mysql - 获取 QA 表中线程的最新行

> ID：13174663
> 
> 赞同：0
> 
> 时间：2012-11-01T09:58:55.013
> 
> 标签：mysql, sql

这是我的问答 SQL 表的简化版本，post_id 是主键。

```
 post_id | ref_post_id | title  | date (unix timestamp)
   1     |     0       | Title1 |  10 
   2     |     1       |        |  20 
   3     |     0       | Title2 |  30 
```

当 ref_post_id 为 0 时，这意味着这是一个问题。当它不是 0 时，它是一个数字对应于问题的 post_id 的答案。这意味着第二行是我上面示例中第一行的答案。

我想做的是只得到每个问题的最后一行。如果问题没有任何答案，我想要问题行，但如果它有答案，我想要最后一个答案，但我想加入属于问题行的标题。

我已经用谷歌搜索并尝试了一段时间。希望你能理解我的问题！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:03:59.193

我建议将您的表格一分为二，一张用于提问，一张用于回答。

这看起来如何的粗略草图：

```
questions
post_id  |  title  |  date

answers
answer_id  |  post_id  |  answer  |  date 
```

这样，您可以通过以下方式请求所请求问题的最后一个答案：

```
SELECT * FROM answers WHERE post_id = THE_REQUESTED_POST_ID ORDER BY date DESC LIMIT 1 
```

编辑：

废话对不起，我说错了表格，要从中选择的表格应该是答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:04:17.870

```
SELECT  a.*, b.replyID
FROM    tableName a
        LEFT JOIN tableName c
            ON a.ref_post_ID = c.post_id
        LEFT JOIN
        (
            SELECT ref_post_ID replyID, MAX(DATE) as maxDATE
            FROM tableName
            GROUP BY replyID
        ) latestAnswer
            ON  c.ref_post_ID = latestAnswer.replyID AND
                c.date = latestAnswer.maxDATE 
```

我强烈建议您为此创建一个单独的表，一个用于`Question`，第二个用于`Answers`，表中的列是`Answers`表中的外来`Question`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:45:35.103

我建议将您的表格分成两张不同的表格，一张用于提问，一张用于回答。

但是，您需要的查询可以这样写：

```
SELECT posts.*
FROM
  posts INNER JOIN
    (SELECT IF(ref_post_id=0,post_id,ref_post_id) as id, Max(Date) as maxdate
     FROM posts
     GROUP BY id) p
  ON
    (p.maxdate = posts.date) AND
    (p.id =IF(posts.ref_post_id=0,posts.post_id,posts.ref_post_id)) 
```

要为每个问题/答案选择最大日期，您必须分组`ref_post_id`，除了`ref_post_id = 0`必须分组的情况`post_id`，因此是 IF。

当您使用子查询将帖子表与自身连接时，您必须使用相同的技巧。

**编辑：**如果您需要将问题标记为已删除，则必须从上面的选择中删除所有已删除的问题和答案，并且您必须再使用一个子查询来仅选择未删除的问题：

```
SELECT posts.*
FROM
  posts INNER JOIN
    (SELECT IF(ref_post_id=0,post_id,ref_post_id) as id, Max(Date) as maxdate
     FROM posts
     WHERE EXISTS (SELECT null 
                   FROM posts posts_sub
                   WHERE
                     posts_sub.post_id =
                     IF(posts.ref_post_id=0,posts.post_id,posts.ref_post_id)
                   AND posts_sub.deleted =0)
     GROUP BY id) p
  ON
    (p.maxdate = posts.date) AND
    (p.id =IF(posts.ref_post_id=0,posts.post_id,posts.ref_post_id)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:48:25.563

这个怎么样：

```
SELECT t.*, lastAnswer.title  FROM tableName t LEFT JION 
(SELECT t1.*
    FROM tableName t1 LEFT JOIN tableName t2
     ON (t1.ref_post_id = t2.ref_post_id AND t1.date < t2.date)
    WHERE t2.ref_post_id IS NULL AND t1.ref_post_id > 0
) lastAnswer
ON t.post_id = lastAnswer.ref_post_id
WHERE t.ref_post_id = 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T11:16:05.633

我已经发布了一个解决方案，但假设`post_id`总是有序的，我更喜欢这个，因为它更简单：

```
select
  posts.*, posts_1.title
from
  posts left join posts posts_1
  on posts.ref_post_id = posts_1.post_id
where posts.post_id IN (select max(post_id) from posts
group by IF(posts.ref_post_id=0,posts.post_id,posts.ref_post_id)) 
```

（我正在使用相同的按`ref_post_id`或 按分组技巧`post_id`）。

**编辑：**如果您只需要选择未删除的帖子，这就是您需要的：

```
select
  posts.*,
  posts_1.title
from
  posts left join posts posts_1
  on posts.ref_post_id = posts_1.post_id
where
  posts.post_id IN (select max(post_id) from posts
                    where exists (select * 
                      from posts posts_sub
                      where
                        posts_sub.post_id =
                        if(posts.ref_post_id=0,posts.post_id,posts.ref_post_id)
                        and posts_sub.deleted =0)
group by
  IF(posts.ref_post_id=0,posts.post_id,posts.ref_post_id)) 
```

# android - 从服务中使用 facebook android sdk

> ID：13174666
> 
> 赞同：5
> 
> 时间：2012-11-01T09:59:06.330
> 
> 标签：android, facebook, service, facebook-android-sdk

我的应用程序具有在服务器上发送一些内容并（需要）将其发布到 facebook 上的功能。它使用服务进行发送（对于存储数据，我使用 sqlite）。是否可以通过服务处理 facebook 会话等？我需要它，因为内容存储在数据库中的时间和发送时间可能不同（可能连接会在很长一段时间内丢失，并且在连接可用后开始发送，但只有我的应用程序的发送服务将在此激活时间）。对于这种情况，我找不到任何解决方案（好的解决方案会很棒）。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T03:55:20.723

用户必须显式授予应用程序权限，Android 服务不支持 Activity.startActivityForResult()，因此无法通过服务重新授权打开 Session 或添加新权限。

但是，如果您在应用程序的某个活动中打开/重新授权 Session，则默认情况下，Session 的状态将保存到 SharedPreferences。如果一个服务在这种情况发生后创建一个会话，它将以 SessionState.CREATED_TOKEN_LOADED 结束。如果 Session.getState() 为 CREATED_TOKEN_LOADED，则保证 Session 可以在没有 UI 的情况下进行 openForRead()，传递 null Activity 是合法的。会话将拥有您的活动保存的所有权限。

为了简化这一切，您的服务可以调用：

```
Session session = Session.openActiveSession(this); 
```

如果 SharedPreferences 中没有有效令牌，则此调用返回 null。

如果您的应用程序 UI 有一个设置区域，那么首先获取存储令牌的一种简单方法是包含一个 LoginFragment 作为设置面板之一。这将让您的用户登录/注销，并应保存会话状态，以便您的服务可以在同一个应用程序中获取它。

# php - AJAX 调用跨域问题

> ID：13174677
> 
> 赞同：1
> 
> 时间：2012-11-01T09:59:45.097
> 
> 标签：php, ajax, wordpress

我正在尝试使用我在[上一个问题](https://stackoverflow.com/questions/13134882/login-to-wordpress-site-from-my-site)中提出的 ajax 调用登录到我的 wordpress 网站。它不应该做出任何回应。但是每当我调用这个 ajax 函数时，Firefox(firebug) 都会以红色显示 200 OK。这一定是跨域问题。尝试了太多东西，但到目前为止没有运气。这是代码：

```
$.ajax({
         type: "POST",
         url: "http://path-to-wordpress/wp-login.php",
         data:myData
         success: function(data){

         },
        error: function (xhr, ajaxOptions, thrownError) {

        }   
}); 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:12:20.037

我假设您的 JS 代码已打开`abc.com`，并且您的 wordpress 网站是`dev.abc.com`.

要解决跨域问题，只需将以下代码添加`.htaccess`到您的 wordpress 站点 ( `dev.abc.com`)

```
SetEnvIf Origin "^http(s)?://(.+\.)?(abc\.com)$" origin_is=$0 
Header always set Access-Control-Allow-Origin %{origin_is}e env=origin_is 
```

只需替换`(abc\.com)`为正确的站点名称即可。例如：`(google\.com)`或`(yahoo\.com)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:05:20.693

在您的 ajax 调用中将 dataType 设置为`JSONP`, 它将跨域工作

有关 ajax 调用的参考，请访问[jQuery Ajax](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:21:08.933

$.ajax 有一个名为 crossDomain 的属性。请设置为真。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:02:15.483

您需要在页面中添加[CORS 标头](https://developer.mozilla.org/en-US/docs/HTTP_access_control)`wp-login.php`。

[这是怎么做的](http://enable-cors.org/)

但考虑到页面的性质，要格外小心：**不要允许所有来源 (*)，而只允许您的网站**。如果您全部允许，您的用户的登录信息可能会被盗。

# jquery - 如何确定网站用于特定 UI 效果的内容？

> ID：13174688
> 
> 赞同：1
> 
> 时间：2012-11-01T10:00:25.143
> 
> 标签：jquery, css, hover, css-transitions, jquery-hover

我正在根据我们公司网站的另一个设计/用户界面重新设计一个网站

负责我应该为我的重新设计建模的网站的 Web 开发人员下周正在休假，但我想使用他的一种 UI 效果。

我似乎无法弄清楚他在使用什么来实现悬停淡入淡出效果，这让我觉得他不是在使用 CSS3，而是在使用一些 jQuery 库。

编辑：我用萤火虫试图弄清楚他们在做什么但没有成功。

[这](http://www.iaea.org/)就是我正在看的。它在右侧边栏中的几个元素上使用了淡入淡出效果。班级是`fadehover`。

感谢您帮助诊断此特定问题，但我真的很想知道我自己将来如何解决类似问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:06:27.870

在 main.js （第 223 行）中，我发现它负责悬停：

```
$("img.img-a").hover(
function() {
    $(this).stop().animate({"opacity": "0"}, 400);
},
function() {
    $(this).stop().animate({"opacity": "1"}, 800);
}); 
```

在`fadehover`div 中，有带有类`img-a`和`img-b`. 当光标悬停在 上时`img-a`，它会淡出该图像。所以我假设使用CSS`img-b`落后了。`img-a`

**我是这样做的：**

我使用谷歌浏览器，转到选项卡`resources`并简单地搜索 (ctrl + F / cmd + F) 的`fadehover`课程。不幸的是，除了一点 CSS 和 HTML，我什么都找不到，所以我选择了该 div 中的一类图像，结果是宾果游戏！

还有其他方法可以找出答案。如果您检查该元素并用鼠标悬停，您可能会看到您的 DOM 发生变化。如果您的 DOM 发生变化，您就知道它是由 javascript 完成的。无论是 jQuery、原型还是其他框架，都是另一回事。

如果 DOM 没有改变，您可以确定使用了 CSS 过渡。除非使用 Flash、SVG 或 HTML5 画布元素；）

# c# - 使用 IEnumerable.Where() 遍历一组“XElements”时会产生意外的输出

> ID：13174696
> 
> 赞同：0
> 
> 时间：2012-11-01T10:00:46.930
> 
> 标签：c#, console, console-application, ienumerable, xelement

我在循环一组`XElements`. 这种行为不是我所期望的。

我的代码的简短重写版本，因此您可以轻松解决我的问题（C# 中的控制台应用程序）

```
IEnumerable<XElement> q = from c in xml.Descendants(aw + "wd") 
                          where (....) 
                          select c;    
...

//--------------------------------------------------------------------    
IEnumerable<XElement> currRow = q.OrderBy(yyy => (int)yyy.Attribute("t"));

int xValue = 10;

currRow = currRow.Where(yyy => (int)yyy.Attribute("t") < xValue);
xValue = 20; 
//Here, the currRow gets a new value automatically. I don't want this!

//--------------------------------------------------------------------
//This is want i want to acheive: 

IEnumerable<XElement> currRow = q.OrderBy(yyy => (int)yyy.Attribute("t")); 

int xValue = 10;

currRow = currRow.Where(yyy => (int)yyy.Attribute("t") < xValue);
//do somthing with currRow

xValue = 20; 
currRow = currRow.Where(yyy => (int)yyy.Attribute("t") < xValue);
//do somthing else with currRow

xValue = 30; 
currRow = currRow.Where(yyy => (int)yyy.Attribute("t") < xValue);
// etc.... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:26:11.383

每次您调用`.where`并将结果分配给 currRow 时，您都在限制集合。

所以第一行

```
 currRow = currRow.Where(yyy => (int)yyy.Attribute("t") < xValue); 
```

将限制为 t < 10 的所有元素。然后调用

```
 xValue = 20;
 currRow = currRow.Where(yyy => (int)yyy.Attribute("t") < xValue); 
```

你会得到完全相同的结果，因为我 currRow 的**所有**元素的 t 值都小于**10**，因为第一次调用 Where 并随后分配给 currRow

你可以这样做

```
 const int stepSize = 10;
   var iterations = 3
    for(var i = 0;i<iterations;++i){
         var curr = currRow.Where(yyy => (int)YYY.Attribute("t") >= i * stepSize 
                                       && (int)YYY.Attribute("t") < (i+1) * stepSize);
         //do sometihng with curr
    } 
```

**评论后编辑**

使用枚举器时评估 where

```
xValue = 10;
currRow = currRow.Where(yyy => (int)YYY.Attribute("t") > xValue);

foreach(var elem in currRow){
    //this iterates all elements with t < 10;
}

xValue = 20; 
foreach(var elem in currRow){ //notice that currRow hasn't been reassigned
    //this iterates all elements with t < 20;
} 
```

您必须选择避免这种行为，这是设计使然

您可以避免重新分配 xValue，也可以像这样执行查询

```
var list = currRow.Where(yyy => (int)YYY.Attribute("t") > xValue).ToList(); 
```

注意`.ToList()`到底。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:06:18.060

```
IEnumerable<XElement> currRow = q.OrderBy(yyy => (int)yyy.Attribute("t")); 

int xValue = 10;    

var abc = currRow.Where(yyy => (int)yyy.Attribute("t") < xValue);
//Do something with abc , abc is IEnumerable<XElement> list; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:06:39.230

```
currRow.Where(...) 
```

将创建一个在使用时将执行的查询。
如果您希望直接获得结果（并省略任何要搞砸的引用/查询）将其转换为列表。

```
currRow.Where(...).ToList() 
```

您应该这样做的原因是您在 where 语句中使用的值在查询中不被视为常量，而是对您使用的变量的引用。如果您更改变量，您可能会更改查询的结果。
如果您调用`.ToList()`查询，则使用该时刻的变量值执行查询。结果被收集并且是“永久的”，这样当查询中使用的变量的值发生变化时，为创建结果而进行的查询将不再影响结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:10:26.650

看起来你`xValue`被捕获到 where 语句的 lambda 表达式中。为什么不简单地提供恒定值？

```
currRow = currRow.Where(yyy => (int)yyy.Attribute("t") < 20);
//do somthing with currRow
currRow = currRow.Where(yyy => (int)yyy.Attribute("t") < 10);
//do somthing with currRow 
```

也不要从最小过滤值开始`< 10`。当您将结果分配给`currRow`变量时，其他过滤器将不起作用，因为结果已经小于`20`和小于`30`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T11:44:22.587

我的机器上目前没有 VS 进行测试，但这可能是由于延迟加载。

当您`xValue`在 LINQ 表达式中使用它时，它是通过引用而不是按值传递的。这意味着，在您枚举 LINQ 表达式之前，无论何时更改，`xValue`您都会在不知不觉中更改 LINQ 表达式。

这篇文章（[LINQ 表达式中的值是否通过引用传递？](https://stackoverflow.com/questions/3767787/are-values-in-linq-expressions-passed-by-reference)）似乎支持我的理论。尝试将您的选择语句更改为以下内容，它可能会给您带来您期望的行为：

```
currRow = currRow.Where( yyy => ( int ) yyy.Attribute( "t" ) < xValue ).Select( x => x ); 
```

# javascript - 使用自定义标签值 jquery 获取元素 id

> ID：13174705
> 
> 赞同：1
> 
> 时间：2012-11-01T10:01:16.403
> 
> 标签：javascript, jquery, html

如何使用自定义标签值 jquery 获取元素 ID？

```
<div id="1" tab_id="4" class="div_focus" tabindex="1">This is label A</div> 
```

如何使用 jquery 获取 tab_id = 4 的 id 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T10:03:40.883

```
var id = $('[tab_id="4"]').attr('id'); 
```

如果有多个元素`tab_id="4"`，并且您需要获取所有ID，则使用：

```
var ids = $('[tab_id="4"]').map(function() {
  return this.id;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:03:25.467

## [**JsFiddle 上的演示**](http://jsfiddle.net/3BchV/3/)

试试这个选择器

```
$('div[tab_id = "4"]').attr("id") 
```

检查：[属性等于选择器 [name="value"]](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:07:10.910

```
 jQuery('[tab_id="4"]').attr('id') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:03:56.373

使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)

```
$('div[tab_id="4"]').prop('id') 
```

或者

```
$('div[tab_id="4"]')[0].id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T10:04:09.340

```
var id = $('div[tab_id="4"]').prop("id"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T10:04:35.797

采用`attr()`

```
$('div[tab_id="4"]').attr('id'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-27T01:23:43.987

对于 Wordpress 用户，我很难弄清楚！我所要做的就是替换`$`为`jQuery`

**工作示例：**

```
var ytid = jQuery('div[class="vi-responsive yt-light"]').attr("data-mid"); 
```

**错误示例：**

```
var ytid = $('div[class="vi-responsive yt-light"]').attr("data-mid"); 
```

# sharepoint-2010 - 使用 CAML 获取 SPList 中所有文件夹和文档集的递归列表

> ID：13174706
> 
> 赞同：0
> 
> 时间：2012-11-01T10:01:27.610
> 
> 标签：sharepoint-2010, caml

我需要知道是否有办法在递归对象中返回所有文件和文档集。

我编写了这段代码，它返回所有文件夹和文档集，但仅作为平面列表。

```
SPQuery query = new SPQuery();
query.Query = @"<Where>
                    <Eq>
                        <FieldRef Name='FSObjType' />
                        <Value Type='Lookup'>1</Value>
                    </Eq>
                </Where>";
query.ViewAttributes = "Scope=\"RecursiveAll\""; // get both files and document sets
//query.ViewAttributes = "Scope=\"Recursive\""; // only fetches document sets

var result = list.GetItems(query); 
```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:30:06.343

您所说的“递归对象”是指您希望按层次组织结果吗？如果是这样，那不是 SPListItemCollection 的工作方式。所有生成的项目都作为集合中的兄弟姐妹返回。如果你想要一个层次结构，我认为你需要使用平面结果自己构建它，也许还有像[FileDirRef](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spbuiltinfieldid.filedirref.aspx)这样的字段。

# java - 如何使用 Iterator 打印列表（员工类型）？

> ID：13174707
> 
> 赞同：10
> 
> 时间：2012-11-01T10:01:27.907
> 
> 标签：java, iterator

**员工等级：**

```
public class Employee {

    int empid;
    String name;
    int age;

    public Employee(int empid,String name,int age)
    {
        this.empid=empid;
        this.name=name;
        this.age=age;
    }
    public int getEmpid() {
        return empid;
    }
    public void setEmpid(int empid) {
        this.empid = empid;
    }
    public String getname() {
        return name;
    }
    public void setname(String name) {
        this.name = name;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    } 
} 
```

**比较器类：**

```
public class Employee_comparator implements Comparator<Employee> {

    @Override
    public int compare(Employee object1, Employee object2) {
        return object1.getname().compareTo(object2.getname());
    }
} 
```

**主类：**

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;

public class Employee_Main {

    /**
     * @param args
     */
    public static void main(String[] args) {

        List<Employee> list=new ArrayList<Employee>();

        list.add(new Employee(33186,"varun",23));
        list.add(new Employee(33187,"deepak",23));
        list.add(new Employee(33188,"apple",23));
        list.add(new Employee(33189,"rohan",23));

        Collections.sort(list,new Employee_comparator());

        for(int i=0;i<list.size();i++) {

            System.out.print("age:"+list.get(i).getAge());
            System.out.print("empid:"+list.get(i).getEmpid());
            System.out.println("name:"+list.get(i).getname());
        }

        Iterator<Employee> itr=list.iterator();

        while(itr.hasNext())
        {
            System.out.println(itr.next());
        }
    }
} 
```

当我尝试使用 get 方法打印时，它工作正常。但是，当我尝试使用 打印列表的元素时`Iterator`，它会给出以下输出：

```
new_.Employee@28122812new_.Employee@280d280dnew_.Employee@28172817new_.Employee@28082808 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T10:06:44.853

You can implement a method `toString()` in the class `Employee`:

```
public String toString(){
    return "Name: "+ this.name
       + ". Age:"+ this.age
       + ". Id:"+ this.empId; 
} //example 
```

This way, when you do:

`System.out.println(itr.next());`

it will print the `name`, the `age` and the `id` of the employee

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T10:07:43.820

Because `itr.next()` has return Object of the class `Employee` that you have sotre in it. try

```
 Iterator<Employee> itr=list.iterator();

    while(itr.hasNext())
    {
        Employee employee = itr.next();

        System.out.print("age:"+employee.getAge());
        System.out.print("empid:"+employee.getEmpid());
        System.out.println("name:"+employee.getname());
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T10:04:46.323

您正在打印 Employee 类对象而不是它的值，

尝试 ：

```
Iterator<Employee> itr=list.iterator();

while(itr.hasNext())
{
    //System.out.println(itr.next());
    System.out.println(itr.next().getEmpid());
} 
```

~~之间，使用增强的for循环，比迭代器快。~~

**编辑：**

增强的 for 循环比 Iterator 更具可读性。而 Iterator 为您提供了使用 iterator.remove() 方法删除值的选项。如果您尝试在循环期间更新列表，for 循环将引发 ConcurrentModificationException。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T10:07:31.370

Override the `toString` method so that you can get the `Employee` details even if its `toString` method is called.

```
public void toString(){
 return "Employee Id: "+empid+" Name: "+name+" Age: "+age;
} 
```

Now when you call `itr.next()` your `Employee` class `toString` method is called and now it will return the `String` that you have created in the overriden `toString` method.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-22T06:48:08.277

您可以使用以下代码在 Java 8 中执行相同操作

`Iterator<Employee> employees = list.iterator(); employees.forEachRemaining(System.out::println);`

或者简单地说，

`list.iterator.forEachRemaining(System.out::println);`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T10:08:37.273

your itr.next() contains employee object and it will print toString() method. Since you have not override to String method you get this. You could override to String method as you want and

```
System.out.println(itr.next()); 
```

will print what is it in toString() method.

This will be in your Employee class

```
 @Override
public String toString() {
    return "Employee [empid=" + empid + ", name=" + name + ", age=" + age + "]";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-12T01:29:25.667

你应该在你的类中添加一个 Employee 方法：

```
public void printEmploee()
{
  System.out.printf("ID:%s \nName: %s \nAge: %s \n",
  this.id, this.name, this.age);
} 
```

然后使用迭代器：

```
Iterator<Employee> itr = list.iterator();
while (itr.hasNext()) {
itr.next().printEmploee();
} 
```

# css - 在颜色之上的透明图像

> ID：13174710
> 
> 赞同：1
> 
> 时间：2012-11-01T10:01:36.813
> 
> 标签：css, png, overlay, transparent

我有一个半透明的图像，我想覆盖在彩色背景上。似乎无法让它工作，任何帮助将不胜感激。

代码：

}`#pre-content{ margin-top:60px; background-color: #00ADEE; background: url(../images/bg_content_big.png) no-repeat 21px -8px;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:02:52.317

尝试

```
background: #00ADEE url(../images/bg_content_big.png); 
```

# android - android活动生命周期问题

> ID：13174721
> 
> 赞同：0
> 
> 时间：2012-11-01T10:02:21.927
> 
> 标签：android, android-activity, android-lifecycle

我有一个正在 HTC one X 上测试的应用程序。

简要描述;简介：

我的主要活动是一个选项卡式应用程序（使用片段）。在其中一个选项卡中，我有一个按钮，可以通过

```
Intent myIntent = new Intent(view.getContext(), NoteActivity.class);
startActivity(myIntent); 
```

这一切都很好。但是在 NoteActivity 中，我有一个文本字段，如果屏幕锁定打开，NoteActivity 会立即被破坏，当用户解锁时，我的“主要”活动会立即启动。

此外，当我从 mainactivity -> noteactivity 移动时，我的 mainactivity 永远不会被破坏，但是当我返回时（当用户完成笔记并单击“保存”时），noteactivity 总是会立即被破坏。

显然，我需要将文本字段内容存储在 ondestroy 中并将其重新插入到 oncreate 中，但我不明白为什么当屏幕锁定激活时我的第二个活动总是被破坏？我的主要活动永远不会被破坏。

我有点不确定为什么 Android 会做出这些生命周期决策。如果有人有任何意见，我很想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:20:40.103

在许多平台/语言中，开发人员负责管理内存。这会导致许多错误和性能不佳的问题。Android 的设计者大体上已将这一责任从开发者手中转移到了操作系统中。Android 可以随时销毁您不在前台的任何活动，因此提供了在您的活动进入后台之前调用的 onPause()。

为什么 Android 会破坏您的活动是非决定性的，并且取决于其他因素；设备有多少内存；有多少内存可用；正在运行哪些其他应用程序和服务；正在使用什么内核调控器和节能策略等等，要使这个决定因素成为一项庞大而复杂的任务，所以设计只是说一旦你的活动进入后台，Android 可能会破坏它，有时没有进一步的回调给你，所以你应该根据需要使用生命周期来保存和恢复状态。

一旦你习惯了它，它实际上很有意义并且很容易使用。我来自 Windows 背景并习惯它需要一些时间，但现在我知道了，这很好。我不会说更好或更坏，但对于移动设备来说是一个很好的解决方案。

最初是桌面操作系统的习惯性思维导致我寻找任务管理器并在应用程序中执行诸如 system.exit() 之类的操作，但是让 Android 自行管理并且它的性能要好得多。

生活在生命周期中。

# javascript - javascript鼠标事件

> ID：13174726
> 
> 赞同：0
> 
> 时间：2012-11-01T10:02:35.860
> 
> 标签：javascript, html, mouseevent

javascript中有没有一种方法可以使“onclick”适用于特定类的所有成员？因此，如果我有两个都是 X 类型的对象 A 和 B，单击它们中的任何一个都会调用相同的函数？但是该函数应该只适用于调用 A 或 B 中的任何一个，而不是同时调用两者。

因为基本上我想要做的是当我点击 A 或 B 时，它们会移动到不同的位置，但我希望这能够适用于同一类中任意数量的 n 个元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:06:08.710

演示：http: [//jsfiddle.net/2BRS9/](http://jsfiddle.net/2BRS9/)

为所有这些 html 元素添加相同的类。您可以获取事件所在的元素 fi

如果类名是“myclass”

```
 $(".myclass").live({
      click: function(e){
      // You can get id by many ways, some shown here :
      id= this.id;
      console.log(id);
      id = $(this).attr("id");
      console.log(id);
      id = e.target.id;  
      console.log(id);

   } 
```

});​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:06:17.930

```
 <input type="button" class="abc" value="A" />
   <input type="button" class="abc" value="B" />
   <input type="button" class="abc" value="C" />
   <input type="button" class="abc" value="D" />

 $(".abc").click(function() {
  alert("any of the above is clicked");
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:06:30.407

试试这个：

```
$('.classname_of_member').bind('click',function(){
//your code here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:12:06.230

为此，您可以使用“this”关键字。

例如

```
<input type="button" class="abc" value="A" />
<input type="button" class="abc" value="B" />
<input type="button" class="abc" value="C" />
<input type="button" class="abc" value="D" />

$(".abc").click(function() {
 $(this).hide(); // for hiding the only the clicked element.
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-28T17:48:13.830

我编写了一些简单的代码来处理鼠标操作，包括单击、双击、右键单击和拖放。[www.derbyshiresoftware.co.uk/how-to-handle-mouse-operations/][1]

# windows-8 - 在后台任务中访问 Javascript Metro 应用程序的 IndexedDB

> ID：13174728
> 
> 赞同：4
> 
> 时间：2012-11-01T10:02:45.333
> 
> 标签：windows-8, windows-runtime, indexeddb

我正在尝试在 javascript 后台任务中从我的应用程序访问 indexeddb（因此我可以更新动态磁贴）。

我正在设置这样的任务：

```
 var builder = new Windows.ApplicationModel.Background.BackgroundTaskBuilder();
        builder.name = taskName;
        builder.taskEntryPoint = "js\\task\\backgroundTask.js";

        //Run every 8 hours if the device is on AC power
        var trigger = new Windows.ApplicationModel.Background.MaintenanceTrigger(480, false);
        builder.setTrigger(trigger);

        var task = builder.register(); 
```

任务如下所示：

```
(function () {
    "use strict";

    var backgroundTaskInstance = Windows.UI.WebUI.WebUIBackgroundTaskInstance.current;
    var cancel = false;

    function doWork() {
        var key = null, settings = Windows.Storage.ApplicationData.current.localSettings;

        //todo access db and update tile

        close();
    }

    if (!cancel) {
        doWork();
    } else {
        close();
    }

    function onCanceled(cancelSender, cancelReason) {
        cancel = true;
    }

    backgroundTaskInstance.addEventListener("canceled", onCanceled);

})(); 
```

该任务似乎工作正常，但我无法确定是否可以访问数据库（或任何应用程序资源）。这种事情甚至可能吗，如果是的话，我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:16:23.357

根据[http://msdn.microsoft.com/en-us/library/windows/apps/hh453270.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh453270.aspx)，商店应用程序中的 WorkerGlobalScope（在您处于后台任务时有效）使 indexedDB 可用。IndexedDB 在本地 appdata 中工作，因此应该可以用作任何其他 appdata 操作。

一般来说，后台任务可以修改应用数据并发布磁贴/吐司/徽章更新。正如 Slace 指出的那样，您无法访问其他应用程序资源，因此 appdata 是您与主应用程序共享数据的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:01:05.093

我认为后台任务在不同的线程上运行（因此它们没有相同的墓碑限制）并且无法访问应用程序资源。这就是即使在应用程序挂起时后台任务仍保持活动状态的方式，这意味着您无法访问应用程序资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:33:31.217

您可以在工作人员中使用 IndexedDB API，但是您需要使用[同步 API](http://www.w3.org/TR/IndexedDB/#sync-database)。

我在 Windows 8 开发中的工作人员的经验是，您不能在其中使用异步 API。进行异步调用时，不会调用提供的回调。同样正如 Kraig 所提到的，只能使用工作范围可访问的 API。（你不能从 window 对象中调用任何东西。）

# r - 在R中使用rbga“下标越界”

> ID：13174729
> 
> 赞同：1
> 
> 时间：2012-11-01T10:02:47.000
> 
> 标签：r, genetic-algorithm, rbga

我在 R 中使用 rbga，在似乎是应用精英主义的函数部分期间发生了以下错误。这是导致错误的会话：

```
Testing the sanity of parameters...
The start conditions:
GA Settings
  Type                  = 
  Population size       = 10
  Number of Generations = 10
  Elitism               = 2
  Mutation Chance       = 0.00237529691211401

Search Domain
  Var 1 = [-0.1,0.1]
  Var 2 = [-0.1,0.1]
  Var 3 = [-0.1,0.1]

Starting with random values in the given domains...
Starting iteration 1 
Calucating evaluation values... .......... done.
Creating next generation...
  sorting results...
  applying elitism...
Error: subscript out of bounds 
```

不幸的是，我无法提供可重现的示例，因为我的代码包含大约 300 行，而且我似乎无法创建简化版本。有没有人在使用 rbga 时遇到过类似的问题，谁能给我任何关于为什么会发生这种情况的指示？

**更新**

我在 rbga 函数中找到了导致错误的代码行：

```
newPopulation[1:elitism, ] = sortedPopulation[1:elitism, ] 
```

此时 sortedPopulation 的长度为 0，而 elitism 为 2 ...有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:18:42.930

出现此问题是因为评估函数返回 NA，这在 rbga 函数中搞砸了。确保评估函数返回一个真实值以避免此错误。

# asp.net-mvc-3 - MVC3 将图像传递给控制器

> ID：13174732
> 
> 赞同：0
> 
> 时间：2012-11-01T10:02:51.787
> 
> 标签：asp.net-mvc-3

我在 javascript 中创建图像并将其分配给 javascript 中的 img 元素。如何在 MVC3 中单击 ActionButton 时将该图像传递给控制器​​？

Javascript

```
var picture = jqplotToImg($('#ChartContent')); //method to change chart as picture, no needed here
var img = document.getElementById("img1");
img.src = picture; 
```

看法

```
@using (Html.BeginForm())
{
  <img id="img1" name="img1" />
 @Html.ActionButton("Export","ExportData","Report")
} 
```

控制器

```
public void ExportReport(FormCollection fc)
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:47:35.793

您可以使用[`HTML5 File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)它允许您将图像异步上传到服务器。

这是另一个[`example`](https://stackoverflow.com/a/9273250/29407)如何将图像转换为 Base64 字符串的方法，然后可以使用 AJAX 等任何方式将其发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:02:54.947

我提示了base64字符串，然后复制并使用它来测试，所以它失败了。我为此使用了ajax方法并且它有效

```
 function ExportData() {
    var picture = jqplotToImg($('#ChartContent'));
    //prompt("", picture);

    $.ajax({ type: 'POST',
        url: '../Report/Base64ToImage',
        async: false,
        data: { source: picture },
        success: function (data) {
            //alert(data);
        }
    });
    window.location.href = "../Report/ExportChart";
}

[HttpPost]
    public void Base64ToImage(string source)
    {
        string base64 = source.Substring(source.IndexOf(',') + 1);
        base64 = base64.Trim('\0');
        byte[] data = Convert.FromBase64String(base64);
        string path = System.Configuration.ConfigurationManager.AppSettings["UploadFolder"].ToString();

        var file = Server.MapPath(path + "Chart.jpg");
        System.IO.File.WriteAllBytes(file, data);
    } 
```

# vim - 移动到 VIM 中的下一个左括号或右括号

> ID：13174735
> 
> 赞同：9
> 
> 时间：2012-11-01T10:03:15.517
> 
> 标签：vim, editor

我正在寻找一种方法来移动到某种类型的下一个左括号或右括号，例如`{`or `}`。例子：

```
if(true)
{
   for(int i = 0; i < 10; i++)
   {
       SomeFunction();
       SomeOtherFuntion();
   }
} 
```

假设我的光标在 'S' 上`SomeFunction()`，我想跳到下一个`}`，即 for 循环的结束括号。

什么是有效的方法来做到这一点？我能想到的唯一方法是使用`/}[ENTER]`，但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T10:27:36.737

看一下`:help motion.txt`，它包含所有各种替代方案。

因为`{`在第一列中，有`]]`. 对于无与伦比的，`]}`. 在许多语言中，`{`表示方法的开始，然后`]m`可以使用。但总的来说，我认为您的建议没有问题`/}<CR>`。如果你经常使用它，你总是可以为它定义一个自定义映射：

```
:noremap ]] /}<CR> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-07T18:50:39.163

稍微扩展 Ingo Karat 的信息性答案，这是一个自定义映射，它重新映射`]]`以开始搜索下一个`{`or`}`并`[[`执行相同但相反的操作：

```
:noremap ]] /[{}]<CR>  " Find next { or }
:noremap [[ ?[{}]<CR>  " Find prev { or } 
```

# c# - 时间：2019-01-02 标签：c#copytoarrays in params

> ID：13174742
> 
> 赞同：0
> 
> 时间：2012-11-01T10:03:29.477
> 
> 标签：c#, arrays, params

我已经创建了一个可以扩展数组值的函数，`1`但是
我在尝试创建以下函数时遇到了问题：

```
//This is error free and compiles properly
public string[] addindex(string[] Input)
{
    string[] ar2 = new string[Input.Length + 1];
    Input.CopyTo(ar2, 0);
    ar2.SetValue("", Input.Length);
    Input = ar2;
    return Input;
} 
```

支持1个以上的参数。

所以，我做了这个：

```
public string[] addindexes(params string[] lists)
{
    string[] ar2;
    for (int x = 0; x < lists.Length; x++)
    {
        ar2 = new string[lists[x].Length + 1];
        lists[x].CopyTo(ar2, 0); //Error here
        ar2.SetValue("", lists[x].Length);
        lists[x] = ar2; //Error here
    }
    return lists;
} 
```

好像我使用了错误的语法或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:09:56.480

您需要更改`params string[] lists`为，`params string[][] lists`因为您现在正在传递一个数组数组。（至少，该*方法*会看到一个数组数组，即使您传入多个单独的数组也是如此。）

同样，您需要将返回类型更改为`string[][]`.

有关更多信息，请参阅[此](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:12:19.143

您可以使用[`Resize`](http://msdn.microsoft.com/en-us/library/bb348051.aspx)更简单的方法：

> 此方法分配一个指定大小的新数组，将元素从旧数组复制到新数组，然后用新数组替换旧数组。

再扩展一项：

```
 Array.Resize(ref list, list.Length + 1);
 list[list.Length - 1] = string.Empty; 
```

扩展多个 1：

```
 int size = 5;
 Array.Resize(ref list, list.Length + size);

 for (int i = list.Length - size; i < list.Length; i++)
     list[i] = string.Empty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:11:37.303

您首先使用通用[列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)怎么样？

```
List<string> Input = new List<string>();
Input.Add("new item"); 
```

# javascript - 美元。mobile.showPageLoadingMsg("b", "这只是一个测试", true); 不工作

> ID：13174743
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:03:32.487
> 
> 标签：javascript, jquery, html

我想使用`$. mobile.showPageLoadingMsg ("b", "This is only a test", true)`，但它不起作用：

```
<script src="js/jqeury/jquery.js"></script> 
<script src="js/jqeury/jquery.mobile-1.1.1.js"></script> 
```

我的代码如下：

```
<script type="text/javascript" charset="utf-8">
   $.mobile.showPageLoadingMsg("b", "This is only a test", true);  
   //show the loading message. alert("OK"); </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:13:12.067

你有一个错字。修改`js/jqeury`为`js/jquery`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:13:02.483

正如 RoManiac 指出的那样，你有一个错字：`js/jqeury`to `js/jquery`（当然，我们不确定这是否真的是你的 dir 结构，但假设......） - 你可以测试是否已经加载了 jQuery 和 jQM

```
console.log("Is jQuery loaded: "+ (jQuery != undefined));
console.log("Is jQuery Mobile loaded: "+ (jQuery.mobile != undefined)); 
```

此外，尝试将您的代码包装在 Page Init 事件中（更改 id 以匹配您的页面 id）

```
$("#page1").live("pageinit",function(){
    $.mobile.showPageLoadingMsg("b", "This is only a test", true); 
}); 
```

# jquery - Jquery UI Datepicker beforeShowDay 阻止日期数组的错误

> ID：13174751
> 
> 赞同：0
> 
> 时间：2012-11-01T10:04:24.077
> 
> 标签：jquery, jquery-ui, datepicker

我正在使用[Davidwalsh 的方法](http://davidwalsh.name/jquery-datepicker-disable-days)来阻止 datepicker 日历上的特定日期，但是在我的生产服务器上，数组中的某些日期没有被阻止，所以我尝试对代码进行干净的复制，并发现了类似的差异在结果中。

[这是 JS 小提琴](http://jsfiddle.net/winterain/6E6KS/1/)

有人可以指出我在这里缺少的东西吗？

出于某种原因，11 月 1 日被封锁，而 11 月 4 日没有被封锁。

在我的生产服务器的情况下，我们试图阻止 12 月的 2 个日期，但它们未能被禁用。当前月份的日期会被很好地阻止。

任何帮助将不胜感激！

```
$(document).ready(function(){

        var cdates = new Array();
        cdates = ['2012-11-04','2012-11-12','2012-12-03','2012-12-12','2012-12-18','2012-12-20'];

        $('.datepicker').datepicker({
            beforeShowDay: check_closed
        }); 

        function check_closed(date)
        {               var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();

            for (i = 0; i < cdates.length; i++) {
                if($.inArray(y + '-' + (m+1) + '-' + d,cdates) != -1 || new Date() > date) {
                    console.log('bad:  ' + (m+1) + '-' + d + '-' + y + ' / ' + cdates[i]);
                  return [false,''];
                }
                    console.log('good:  ' + (m+1) + '-' + d + '-' + y);
                return [true,''];    
            }                
        }
    });​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:20:13.397

您没有用 0 填充日期。例如，对于本月的 1 日：

```
d = date.getDate(); // => 1 and for adequate comparison needs to be 01 
```

解决方案：

```
d = date.getDate();
if( d < 10 ) { d = "0" + d; } 
```

这就是为什么没有禁用 11 月 4 日，因为 var m = "2012-11-4" 并且数组中唯一存在的值是 "2012-11-04.

这是一个工作示例[http://jsfiddle.net/bruno/KYzaR/8/](http://jsfiddle.net/bruno/KYzaR/8/)

# android - android 服务在 2.2 版本中工作，但在更高版本中失败

> ID：13174753
> 
> 赞同：0
> 
> 时间：2012-11-01T10:04:29.073
> 
> 标签：android

问候伙计们，如果我似乎在这里绊倒了，我提前道歉，但我对 android 开发很陌生

场景是我构建了一个简单的 gps 跟踪应用程序。本质上，用户可以单击紧急按钮或检查按钮或短信来激活服务。在 2.2 版中一切正常，这是我在构建中的目标，但是在运行 2.3.4 的 htc 上进行测试时，只要任何函数调用该服务，应用程序就会崩溃。

简而言之，该服务会检查数据库中的用户在数据库中的 pin 这里是 Pinbox_db，然后它会获取 gps 位置，一旦收到对 Web 服务的 http 调用，以发布设备的经纬度

再次抱歉，如果这对您更有经验的开发人员来说似乎微不足道，但我处于非常新的领域并感谢您的反馈

这是我的服务代码

```
 package com.artgraven.misafety;

  import java.io.IOException;
  import java.util.ArrayList;
  import java.util.List;

  import org.apache.http.HttpResponse;
  import org.apache.http.NameValuePair;
  import org.apache.http.client.ClientProtocolException;
  import org.apache.http.client.HttpClient;   
  import org.apache.http.client.entity.UrlEncodedFormEntity;
  import org.apache.http.client.methods.HttpPost;
  import org.apache.http.impl.client.DefaultHttpClient;
  import org.apache.http.message.BasicNameValuePair;

  import android.app.Service;
  import android.content.Context;
  import android.content.Intent;
  import android.location.Location;
  import android.location.LocationManager;
  import android.net.ConnectivityManager;
  import android.os.Bundle;
  import android.os.IBinder;
  import android.telephony.TelephonyManager;
  import android.util.Log;
  import android.widget.Toast;

  public class Bg_process extends Service {
private static final String TAG = "BOOMBOOMTESTGPS";
private LocationManager mLocationManager = null;
private static final int LOCATION_INTERVAL = 1500;
private static final float LOCATION_DISTANCE = 20f;
public static String b_c_long;
public static String b_c_lat;
public static String alert_pin = "", alert_type ="undefined", alert_device ="android", alert_imei="32154",alert_sim_serial="0796768445";
private Pinbox_db entry = new Pinbox_db(Bg_process.this);
public static String recordSet = "PIN";

private class LocationListener implements android.location.LocationListener{
    Location mLastLocation;
    public LocationListener(String provider)
    {
        Log.e(TAG, "LocationListener " + provider);
        mLastLocation = new Location(provider);

    }
    public void onLocationChanged(Location location)
    {
        Log.e(TAG, "onLocationChanged: " + location);
        mLastLocation.set(location);
        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude());

        Toast.makeText(Bg_process.this, message, Toast.LENGTH_LONG).show();

        b_c_long = Double.toString(location.getLongitude());
        b_c_lat = Double.toString(location.getLatitude());

        postData();

    }
    public void onProviderDisabled(String provider)
    {
        Log.e(TAG, "onProviderDisabled: " + provider);            
    }

    public void onProviderEnabled(String provider)
    {
        Log.e(TAG, "onProviderEnabled: " + provider);
    }

    public void onStatusChanged(String provider, int status, Bundle extras)
    {
        Log.e(TAG, "onStatusChanged: " + provider);
    }
} 
LocationListener[] mLocationListeners = new LocationListener[] {
        new LocationListener(LocationManager.GPS_PROVIDER),
        new LocationListener(LocationManager.NETWORK_PROVIDER)

};

@Override
public IBinder onBind(Intent arg0)
{
    return null;
}
@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    Log.e(TAG, "onStartCommand");
     super.onStartCommand(intent, flags, startId);       
    Bundle extras = intent.getExtras();
   // alert_type = intent.getStringExtra("code");
    alert_type = extras.getString("code");

    return START_STICKY;

}
@Override
public void onCreate()
{   
    // get pin
    entry.open();
    recordSet = entry.getPin();
    entry.close();
    alert_pin = recordSet;

    TelephonyManager tm = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);

     ConnectivityManager cm = (ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);
        if(cm.getActiveNetworkInfo().getTypeName().equals("MOBILE"))
            alert_device = "android:  cellnetwork/3G";
        else if(cm.getActiveNetworkInfo().getTypeName().equals("WIFI"))
            alert_device = "android: wifi";
        else 
            alert_device ="android: na"; 

        alert_sim_serial = tm.getLine1Number();
        alert_imei = tm.getDeviceId();

    Log.e(TAG, "onCreate");
    initializeLocationManager();
    try {
        mLocationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                mLocationListeners[0]);

    } catch (java.lang.SecurityException ex) {
        Log.i(TAG, "fail to request location update, ignore", ex);
    } catch (IllegalArgumentException ex) {
        Log.d(TAG, "network provider does not exist, " + ex.getMessage());
    }
    try {
        mLocationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                mLocationListeners[1]);
    } catch (java.lang.SecurityException ex) {
        Log.i(TAG, "fail to request location update, ignore", ex);
    } catch (IllegalArgumentException ex) {
        Log.d(TAG, "gps provider does not exist " + ex.getMessage());
    }
}

@Override
public void onDestroy()
{
    Log.e(TAG, "onDestroy");
    super.onDestroy();
    if (mLocationManager != null) {
        for (int i = 0; i < mLocationListeners.length; i++) {
            try {
                mLocationManager.removeUpdates(mLocationListeners[i]);
            } catch (Exception ex) {
                Log.i(TAG, "fail to remove location listners, ignore", ex);
            }
        }
    }
} 
public static void postData() {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.website.co.za/api/activity_log.php");
    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("alert_long", b_c_long));
        nameValuePairs.add(new BasicNameValuePair("alert_lat", b_c_lat));
        nameValuePairs.add(new BasicNameValuePair("alert_pin", alert_pin));
        nameValuePairs.add(new BasicNameValuePair("alert_type", alert_type));
        nameValuePairs.add(new BasicNameValuePair("alert_device", alert_device));
        nameValuePairs.add(new BasicNameValuePair("alert_imei", alert_imei));
        nameValuePairs.add(new BasicNameValuePair("alert_sim_serial", alert_sim_serial));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
}
private void initializeLocationManager() {
    Log.e(TAG, "initializeLocationManager");
    if (mLocationManager == null) {
        mLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
        Location location = mLocationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {
            String message = String.format(
                    "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude());
            Toast.makeText(Bg_process.this, " " + message, Toast.LENGTH_LONG).show();

            b_c_long = Double.toString(location.getLongitude());
            b_c_lat = Double.toString(location.getLatitude());

            postData();

        } else {
            Toast.makeText(Bg_process.this, "current location unavailable",
                    Toast.LENGTH_LONG).show();

        }
    }
}

} 
```

非常感谢您提前提供任何反馈

这是会话 logCat

```
 11-19 21:15:56.030: E/BOOMBOOMTESTGPS(639): LocationListener gps
 11-19 21:15:56.070: E/BOOMBOOMTESTGPS(639): LocationListener network
 11-19 21:15:56.330: E/BOOMBOOMTESTGPS(639): onCreate
 11-19 21:15:56.330: E/BOOMBOOMTESTGPS(639): initializeLocationManager
 11-19 21:15:56.430: E/BOOMBOOMTESTGPS(639): onStartCommand
 11-19 21:15:56.520: E/BOOMBOOMTESTGPS(639): onLocationChanged: Location[mProvider=gps,mTime=1353268800000,mLatitude=37.422005,mLongitude=-122.084095,mHasAltitude=true,mAltitude=0.0,mHasSpeed=false,mSpeed=0.0,mHasBearing=false,mBearing=0.0,mHasAccuracy=false,mAccuracy=0.0,mExtras=Bundle[mParcelledData.dataSize=4]]
 11-19 21:15:56.810: E/AndroidRuntime(639): FATAL EXCEPTION: main
 11-19 21:15:56.810: E/AndroidRuntime(639): android.os.NetworkOnMainThreadException
 11-19 21:15:56.810: E/AndroidRuntime(639):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at com.artgraven.misafety.Bg_process.postData(Bg_process.java:188)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at com.artgraven.misafety.Bg_process$LocationListener.onLocationChanged(Bg_process.java:62)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:234)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:167)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:183)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at android.os.Handler.dispatchMessage(Handler.java:99)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at android.os.Looper.loop(Looper.java:137)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at android.app.ActivityThread.main(ActivityThread.java:4424)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at java.lang.reflect.Method.invokeNative(Native Method)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at java.lang.reflect.Method.invoke(Method.java:511)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 11-19 21:15:56.810: E/AndroidRuntime(639):     at dalvik.system.NativeStart.main(Native Method)
 11-19 21:16:05.839: E/BOOMBOOMTESTGPS(653): LocationListener network
 11-19 21:16:05.909: E/BOOMBOOMTESTGPS(653): onCreate
 11-19 21:16:05.909: E/BOOMBOOMTESTGPS(653): initializeLocationManager
 11-19 21:16:06.019: E/AndroidRuntime(653): FATAL EXCEPTION: main
 11-19 21:16:06.019: E/AndroidRuntime(653): java.lang.RuntimeException: Unable to create service com.artgraven.misafety.Bg_process: android.os.NetworkOnMainThreadException
 11-19 21:16:06.019: E/AndroidRuntime(653):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2263)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at android.app.ActivityThread.access$1600(ActivityThread.java:123)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at android.os.Handler.dispatchMessage(Handler.java:99)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at android.os.Looper.loop(Looper.java:137)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at android.app.ActivityThread.main(ActivityThread.java:4424)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at java.lang.reflect.Method.invokeNative(Native Method)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at java.lang.reflect.Method.invoke(Method.java:511)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at dalvik.system.NativeStart.main(Native Method)
 11-19 21:16:06.019: E/AndroidRuntime(653): Caused by: android.os.NetworkOnMainThreadException
 11-19 21:16:06.019: E/AndroidRuntime(653):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at com.artgraven.misafety.Bg_process.postData(Bg_process.java:188)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at com.artgraven.misafety.Bg_process.initializeLocationManager(Bg_process.java:211)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at com.artgraven.misafety.Bg_process.onCreate(Bg_process.java:134)
 11-19 21:16:06.019: E/AndroidRuntime(653):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2253)
 11-19 21:16:06.019: E/AndroidRuntime(653):     ... 10 more 
```

在实施建议的答案后，此更新的 logcat 来自更高的 api 版本 (15)，问题已在模拟器上解决，但在设备上测试时出现以下错误

```
12-08 18:12:47.360: W/dalvikvm(21432): threadid=1: thread exiting with uncaught exception (group=0x401b1760)
12-08 18:12:47.360: E/AndroidRuntime(21432): FATAL EXCEPTION: main
12-08 18:12:47.360: E/AndroidRuntime(21432): java.lang.RuntimeException: Unable to create service com.artgraven.specialopstech.Bg_process: android.os.NetworkOnMainThreadException
12-08 18:12:47.360: E/AndroidRuntime(21432):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2049)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at android.app.ActivityThread.access$2500(ActivityThread.java:122)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1059)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at android.os.Looper.loop(Looper.java:132)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at android.app.ActivityThread.main(ActivityThread.java:4028)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at java.lang.reflect.Method.invokeNative(Native Method)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at java.lang.reflect.Method.invoke(Method.java:491)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at dalvik.system.NativeStart.main(Native Method)
12-08 18:12:47.360: E/AndroidRuntime(21432): Caused by: android.os.NetworkOnMainThreadException
12-08 18:12:47.360: E/AndroidRuntime(21432):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at java.net.InetAddress.getAllByName(InetAddress.java:249)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at com.artgraven.specialopstech.Bg_process.postData(Bg_process.java:192)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at com.artgraven.specialopstech.Bg_process.initializeLocationManager(Bg_process.java:215)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at com.artgraven.specialopstech.Bg_process.onCreate(Bg_process.java:138)
12-08 18:12:47.360: E/AndroidRuntime(21432):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2039)
12-08 18:12:47.360: E/AndroidRuntime(21432):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:42:49.097

更新的操作系统版本在检测到您犯了糟糕的“用户体验”错误时会抛出错误。在 UI 线程上进行网络流量就是其中之一，这就是您的 logcat 所显示的内容。您可以通过将该流量放在单独的线程中来避免这种情况：

```
Thread thread = new Thread(new Runnable() {
    public void run() {
        // Net traffic here
    }
});
thread.start(); 
```

`postData()`你可以像这样在那个线程上调用你的整个：

```
public void onLocationChanged(Location location)
{
    Log.e(TAG, "onLocationChanged: " + location);
    mLastLocation.set(location);
    String message = String.format(
            "New Location \n Longitude: %1$s \n Latitude: %2$s",
            location.getLongitude(), location.getLatitude());

    Toast.makeText(Bg_process.this, message, Toast.LENGTH_LONG).show();

    b_c_long = Double.toString(location.getLongitude());
    b_c_lat = Double.toString(location.getLatitude());

    Thread thread = new Thread(new Runnable() {
      public void run() {
        postData();
      }
    });
    thread.start();
} 
```

希望这可以帮助！

# php - Php replace exact word

> ID：13174754
> 
> 赞同：0
> 
> 时间：2012-11-01T10:04:32.720
> 
> 标签：php, regex, preg-replace

Here is my problem:

Using `preg_replace('@\b(word)\b@','****',$text);`

Where in text I have `word\word and word`, the `preg_replace` above replaces both `word\word` and `word` so my resulting string is `***\word and ***`.

I want my string to look like : `word\word and ***`.

Is this possible? What am I doing wrong???

**LATER EDIT**

I have an array with urls, I foreach that array and preg_replace the text where url is found, but it's not working.

For instance, I have [http://www.link.com](http://www.link.com) and [http://www.link.com/something](http://www.link.com/something)

If I have [http://www.link.com](http://www.link.com) it also replaces [http://www.link.com/something](http://www.link.com/something).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:11:38.943

You are effectively specifying that you don't want certain characters to count as word boundary. Therefore you need to specify the "boundaries" yourself, something like this:

```
preg_replace('@(^|[^\w\\])(word)([^\w\\]|$)@','**',$text); 
```

What this does is searches for the *word* surrounded by line boundaries or non-word characters except the back slash `\`. Therefore it will match *.word,* but not *.word\* and not `*\word.* If you need to exclude other characters from matching, just add them inside the brackets.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:07:38.927

You could just use `str_replace("word\word", "word\word and")`, I dont really see why you would need to use a preg_replace in your case given above.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:25:01.313

Here is a simple solution that doesn't use a regex. It will ONLY replace single occurances of 'word' where it is a lone word.

```
<?php
$text = "word\word word cat dog";
$new_text = "";
$words = explode(" ",$text); // split the string into seperate 'words'

$inc = 0; // loop counter
foreach($words as $word){

    if($word == "word"){ // if the current word in the array of words matches the criteria, replace it
        $words[$inc] = "***";
    }
    $new_text.= $words[$inc]." ";
    $inc ++;
}

echo $new_text; // gives 'word\word *** cat dog'
?> 
```

# java - 如何在java中将文本添加到文本文件中？

> ID：13174756
> 
> 赞同：1
> 
> 时间：2012-11-01T10:04:35.987
> 
> 标签：java

> **可能重复：**
> [如何将文本附加到 Java 中的现有文件](https://stackoverflow.com/questions/1625234/how-to-append-text-to-an-existing-file-in-java)

我想将数据添加到文本文件中。所以它一个接一个......所以就像：

```
1
2
3
<add more here> 
```

但我根本不希望文件中的文本被删除。这是我正在使用 atm 的代码，但它替换了文件中的内容。有人可以告诉我如何按照我的要求做。谢谢。

```
 FileWriter fstream = new FileWriter("thefile.txt");
    BufferedWriter out = new BufferedWriter(fstream);
    out.write("blabla");
    out.close();
      }catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T10:06:01.483

用这个

```
FileWriter fstream = new FileWriter("thefile.txt",true); 
```

说明

```
public FileWriter(String fileName, boolean append) throws IOException 
```

在给定文件名的情况下构造一个 FileWriter 对象，该对象带有一个布尔值，指示是否附加写入的数据。

# iphone - 在 sdk 早于 6.0 的应用程序中支持 iPhone 5 屏幕尺寸

> ID：13174760
> 
> 赞同：0
> 
> 时间：2012-11-01T10:04:44.997
> 
> 标签：iphone, upgrade, ios5, iphone-5

我有一个使用旧 SDK 即 5.0 开发的应用程序。我想修改我的应用程序，使其不会在 iphone 5 上以信箱模式运行。但同时我不会切换到自动布局功能并使用 sdk 6.0。因为我的应用程序有许多硬编码的矩形和运行时对齐的 UI 元素我将修改我的应用程序以检查屏幕大小并为 iPhone 5 进行特殊编码。如果我通过这种方式不升级到 SDK 6.0 并且不使用自动布局功能，是否有可能以及是否有应用程序被拒绝的机会?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:27:03.077

您不会因为不使用 AutoLayout 而被拒绝。如果您愿意，这是一个可供您使用的功能。对于 iPhone 5，这不是强制性的。

关于 iOS 6 SDK，我强烈建议针对它进行构建。不保证 Apple 以后会继续接受带有 iOS 5 或更低版本的 Base SDK 的应用程序，所以您现在应该做好准备。

至于 iPhone 5，您仍然可以针对 iOS 6 SDK 构建，并且**不**支持 iPhone 5 的“高模式”。要支持 tall 模式，您需要包含`Default-568h@2x.png`，这将表明您提供了 iPhone 5 的启动图像，表明该应用程序也支持它。如果您**不**包含此图像，则应用程序将以信箱模式运行，模拟 iPhone 4S 或以下设备的显示。

如果您确实希望支持 iPhone 5，并且想要一种方法来确定您是否在其上运行（对于您的特殊情况），您可以使用 a`#define`来检查（放置在随处导入的头文件中，可能是您的 .pch 中包含的标头）。

```
#define IsRunningTallPhone() ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568) 
```

然后在整个应用程序中，如果您需要检查您是否在 iPhone 5 上运行，请调用`IsRunningTallPhone()`（或调用任何您认为最好的名称）

# android - 在 Android Jelly Bean 中播放 flash 文件

> ID：13174762
> 
> 赞同：3
> 
> 时间：2012-11-01T10:04:51.053
> 
> 标签：android, flash

我们正在使用 WebView 在我们的 Android 应用程序中播放本地 SWF 文件。

```
WebView webview=(WebView)findViewById(R.id.web_play);
File decfile = new File("/mnt/sdcard/flashplay/temp/test.swf");
Uri uri = Uri.fromFile(decfile);

if(decfile.exists()){
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setPluginsEnabled(true);
    webview.getSettings().setAllowFileAccess(true);
    webview.loadUrl(uri.toString());
} 
```

该代码在 Jelly Bean 中不起作用，我们安装了 flash 插件并能够在浏览器中播放 flash 视频。但是在 Jelly bean 的 WebView 中在我们的应用程序中播放它没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:15:38.920

第一：自 Android 4 以来不再支持 Flash
第二：Chrome 不支持 Flash 播放器
第三：您可以在 Android 4 上手动安装（但不保证）较旧的 Flash 版本，并在标准浏览器中使用它。

从 adobe 获取旧版本的 flash：http: [//helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html)

只需下载apk并打开它。确保您信任来自其他来源的 apk。

编辑：在我的设备上（三星 Galaxy Nexus 与 android 4.1.2）它工作得很好。

或者，市场上还有十几个其他本地 Flash 播放器。你可以尝试整合它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:13:51.717

jelly bean和ics不支持adobe flash，低版本只支持2.3、2.2、2.1等flash！

Adobe Systems 还删除了 google play shop 中的 adobe flash 应用程序！

**“如果设备从 Android 4.0 升级到 Android 4.1，当前版本的 Flash Player 可能会表现出不可预测的行为，因为它没有经过认证可与 Android 4.1 一起使用，”Adobe 说。**

**Flash ICS 一些设备工作但不能正常工作所有设备！**

# networking - 使用 netty 设置 UDP 服务器和客户端

> ID：13174766
> 
> 赞同：1
> 
> 时间：2012-11-01T10:05:14.467
> 
> 标签：networking, udp, netty

Netty 在 TCP 方面确实有很好的文档记录，但我想尝试一个简单的 UDP 服务器-客户端示例，但没有找到任何好的代码。（主要是邮件列表和用户据称有错误代码）

有人愿意提供一些简单的例子吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:42:08.480

也许这会帮助你

[https://github.com/normanmaurer/javamagazin-netty-ws/tree/master/src/main/java/me/normanmaurer/javamagazin/netty/examples/ws](https://github.com/normanmaurer/javamagazin-netty-ws/tree/master/src/main/java/me/normanmaurer/javamagazin/netty/examples/ws)

它还引导一个简单的 udp 服务器

# iphone - 从头开始创建社交 iOS 应用

> ID：13174769
> 
> 赞同：1
> 
> 时间：2012-11-01T10:05:33.537
> 
> 标签：iphone, objective-c, ios, xcode, social

我对创建适用于 iOS 的社交网络应用程序（例如 Instagram）非常感兴趣。这将是一个应用程序，需要用户创建一个帐户，并允许他们仅使用应用程序作为服务来评论、共享信息和更新他们的个人资料（目前还没有网站）。

不幸的是，我对 iOS 开发的这一部分完全陌生。任何人都可以为新手推荐关于如何设置此类应用程序的后端组件（服务器、协议等）以及如何将其绑定到应用程序的好的教程吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:10:30.040

您可能会发现[Ray Wenderlich](http://www.raywenderlich.com/tutorials)网站上的教程很有用。有很多初学者教程和至少一个涵盖后端集成的教程。

对于后端解决方案，我发现[parse.com](http://www.parse.com)和[kinvey](http://www.kinvey.com)的服务很有用。这两个网站还提供有关 iOS 的教程和示例。特别是，Kinvey 提供了一些用于创建社交应用的 iOS 示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:25:44.063

highoncoding.com 上有一个教程。链接在这里：[http](http://highoncoding.com/Categories/37_Mobile_Development.aspx) ://highoncoding.com/Categories/37_Mobile_Development.aspx 。该应用程序分为三个部分..看看它....

# java - maven openjpa sql生成问题

> ID：13174778
> 
> 赞同：2
> 
> 时间：2012-11-01T10:06:08.990
> 
> 标签：java, maven, openjpa

我正在尝试将 sql 生成器目标添加到我的 openjpa 插件中。我使用 OpenJPA 2.2.0。我让 jpa 增强器使用 pom.sql 文件的以下相关部分：

```
<build>

    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.openjpa</groupId>
                <artifactId>openjpa-maven-plugin</artifactId>
                <version>${org.apache.openjpa.version}</version>
                <configuration>
                    <includes>org/someorg/models/local/*.class</includes>

                    <addDefaultConstructor>true</addDefaultConstructor>
                    <connectionDriverName>org.postgresql.Driver</connectionDriverName>
                    <enforcePropertyRestrictions>true</enforcePropertyRestrictions>
                    <sqlFile>src/main/resources/sql/create.sql</sqlFile>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>

    <plugins>

        <plugin>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-maven-plugin</artifactId>
            <version>${org.apache.openjpa.version}</version>

            <executions>
                <execution>
                    <id>enhancer</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>                    
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.apache.openjpa</groupId>
                    <artifactId>openjpa</artifactId>
                    <!-- set the version to be the same as the level in your runtime -->
                    <version>${org.apache.openjpa.version}</version>
                </dependency>
            </dependencies>
        </plugin>
</plugins> 
```

然后我尝试将以下内容添加到 openjpa 插件的执行部分：

```
<execution>
    <id>sql</id>
    <phase>generate-resources</phase>
    <goals>
        <goal>sql</goal>
    </goals>
</execution> 
```

执行 mvn -e install 命令时出现以下错误：http: [//pastebin.com/TENgXezJ](http://pastebin.com/TENgXezJ)

在没有 -e 开关的情况下运行的较短版本：

```
[ERROR] 
Failed to execute goal org.apache.openjpa:openjpa-maven-plugin:2.2.0:sql(sql) on project batchpoc: 
Execution sql of goal org.apache.openjpa:openjpa-maven-plugin:2.2.0:sql failed: MetaDataFactory could not be configured 
(conf.newMetaDataFactoryInstance() returned null). 
This might mean that no configuration properties were found. 
Ensure that you have a META-INF/persistence.xml file, that it is available in your classpath, 
or that the properties file you are using for configuration is available. 
If you are using Ant, please see the <properties> or <propertiesFile> attributes of the task's nested <config> element. This can also occur if your OpenJPA distribution jars are corrupt, 
or if your security policy is overly strict. -> [Help 1]
[ERROR] 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:36:37.310

好的，所以我自己解决了。显然，诀窍不在 pom.xml 中，而是在 persistence.xml 中的持久性单元定义中

这真的很容易。我刚刚添加

```
<property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema"/> 
```

我已经完成了。

显然对于 OpenJPA，您还需要根据此处的信息列出您希望生成的实体类： [http ://planet.jboss.org/post/generate_a_database_schema_with_openjpa_and_hibernate_on_jboss_as_7](http://planet.jboss.org/post/generate_a_database_schema_with_openjpa_and_hibernate_on_jboss_as_7)

因为我之前已经列出了我的课程，所以我不认为这是一个必要的步骤。

# c# - WebSupergoo.ABCpdf Test application does not work

> ID：13174785
> 
> 赞同：0
> 
> 时间：2012-11-01T10:06:36.343
> 
> 标签：c#, .net, html, pdf, abcpdf

I recently cleaned up my Windows 7 64-bit PC, and after it ABCpdf8 started giving me an error, when I try to export HTML to PDF. The error is "Failed to initiate IE compatibility mode: Failed to load all required assemblies." at WebSupergoo.ABCpdf8.Internal.IECompatibility.Activate() at line

```
theID = theDoc.AddImageUrl(input.Text); 
```

of the test application, and I have no idea why, because I did not remove any assemblies from my machine. If I run the compiled application on another workstation with the same config (Windows 7 64-bit), it works fine. Dependency Walker images showed no difference in DLLs sets from my machine and from another. How else can I identify the source of the problem? It is definitely neither a missing DLL, nor the user access to the system folders, because, I checked user rights as well, they're identical on both machines. I assume that it might be a corrupted registry entry. Is there any way to quickly check the assumption?

It has to be said that, ABCpdf comes as third-party tool within another software, so I cannot contact support directly, but through the main vendor.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T21:07:43.983

我在 w7 和 ws2008 上遇到了[类似的问题](http://devio.wordpress.com/2012/04/02/windows-update-killed-my-abcpdf/)，其行为不同，使用 Gecko 引擎解决了这个问题

```
doc.HtmlOptions.Engine = EngineType.Gecko; 
```

请注意，[websupergoo 建议使用 Gecko](http://www.websupergoo.com/support.htm)而不是 IE9，因为它使用的 IE API 的一部分已被弃用。（项目 6.29）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:37:01.107

当您“清理”您的系统时，您可能已经从注册表中删除了许可证密钥。尝试重新安装您的“其他软件”。

# ruby-on-rails - 需要将 f.select 字段中的默认值添加到现有值 - rails 3.2

> ID：13174787
> 
> 赞同：0
> 
> 时间：2012-11-01T10:06:39.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

使用我在选择字段中的以下代码，我拥有所有`public_campaigns`：

```
<%= f.select :campaign_id, @public_campaigns.map{|x| [x.name,x.id]} %> 
```

`public_campaigns`在控制器中定义：

```
@public_campaigns = @logged_in_user.campaigns.order('created_at desc') 
```

在表单中，我选择`campaign`并填写表单的其余部分，并在提交操作中创建邀请，`campaign_id`并从`campaign`我在表单中选择的内容中获取，它可以是从`1`到`n`

我现在需要的是有一个`default item`in select 字段，它的值`0`和命名为`"No campaign"`，这意味着我邀请某人参加我尚未创建的活动，并且在邀请中该字段`campaign_id`将为`0`

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:14:04.587

好吧，你可以做到这一点的最快方法是这样的：

```
@public_campaigns = @logged_in_user.campaigns.order('created_at desc')
no_campaign = Campaign.new(:id => '0', :name => 'No Campaign')
@public_campaigns.unshift(no_campaign) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:56:07.230

你真的需要0吗？我认为使用 {:include_blank => "No campaign"} 就足够了？

试试这个：

```
<%= f.select :campaign_id, (@public_campaigns.map{|x| [x.name,x.id]} << ["No campaign",0]), {:selected => 0} %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:01:55.187

我不确定为什么你不能这样做：

```
<%= f.collection_select :campaign_id, @public_campaigns, :id, :name, prompt: 'No campaign' %> 
```

只需检查是否`campaign_id.nil?`而不是分配任何值`campaign_id`

# css - 水平主菜单和子菜单不居中，为什么？

> ID：13174788
> 
> 赞同：0
> 
> 时间：2012-11-01T10:06:40.230
> 
> 标签：css, menu, center, submenu

我正在从 Drupal 构建简单的站点，但主菜单和子菜单未按应有的中心对齐。我已经尝试了许多 CSS3 属性，但它们都不起作用。

这就是它的结构

```
<div class="nav">
     <ul>
       <li>Primary Menu 1</li>
       <li>Primary Menu 2</li>
          <ul>
            <li>Submenu 2.1</li>
            <li>Submenu 2.2</li>
          </ul>
       <li>Primary Menu 3</li>
       <li>Primary Menu 4</li>
     </ul>
    </div> 
```

我想将主菜单和子菜单都显示为水平并与 CSS3 对齐，我该怎么做，请为我提供全新的 CSS 代码。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:37:11.660

我希望你看起来像这样：-

**HTML**

```
<div class="nav">
     <ul>
       <li>Primary Menu 1</li>
       <li>Primary Menu 2
          <ul>
            <li>Submenu 2.1</li>
            <li>Submenu 2.2</li>
            <li>Submenu 2.3</li>
            <li>Submenu 2.4</li>
          </ul>
       </li>
       <li>Primary Menu 3</li>
       <li>Primary Menu 4</li>
     </ul>
    </div> 
```

**CSS**

```
.nav ul {
background:lightgrey;
}
.nav ul li {
  display:inline-block;
  margin:0 5px;
  position:relative;
}
.nav ul li ul {
display:none;
padding:0 10px;
}
.nav ul li:hover ul {
  display:block;
  position:absolute;
  left:0;
  top:19px;
  right:0;
}
.nav ul li ul li {
  display:block;
  margin:5px 0;
  padding:0;
} 
```

[演示](http://tinkerbin.com/GkWGySTM)

# php - Why the mysql code is not submitting values in database

> ID：13174789
> 
> 赞同：2
> 
> 时间：2012-11-01T10:06:40.863
> 
> 标签：php, html, mysql

This is the code for the form:

```
 <div id="regform">
   <div id="regform-top">
   <h2>User Registration</h2>
   <p>Please complete this form</p>
   </div>

   <form id="register-form" name="register-form" action="submit.php"  method="post"    
   class="validation">
   <fieldset>

   <table>

  <tr>
  <td>
  <div class="fieldgroup">
  <label for="user-name">User name*: </label>
  <input type="text" id="name" name="name" value="" size="12" class="inpt" /><br    
  class="clear" />
  </div>
  <div class="fieldgroup">
  <label for="password">Password*: </label>

  <input type="password" id="password" name="password" value="" size="12" class="inpt"     
   /><br class="clear" />

  </div>
  </td>
  <td id="form-note">
  <br />

  <p><strong>Form  Instructions</strong></p>

  <p>*Required Field</p>
  </td>
  </tr>

  </table>

  <table id="bottom-reg">

  <tr>
  <td><br />
  <div class="fieldgroup">
  <label for="firstname">First name*</label>
  <input type="text" id="firstname" name="firstname" value="" size="12" class="inpt" />  
  <br class="clear" />

  </div>

   <div class="fieldgroup">
  <label for="email">Email Address* </label>
  <input type="text" id="email" name="email" value="" size="12" class="inpt" /><br 
  class="clear" />
  </div>

  <div class="fieldgroup">
  <label for="address1">Address 1* </label>
  <input type="text" id="address1" name="address1" value="" size="12" class="inpt" />   
  <br class="clear" />
  </div>
  <label for="address2">Address 2</label>
  <input type="text" id="address2" name="address2" value="" size="12" class="inpt" />   
  <br class="clear" />
  <label for="address2">Address 3</label>
  <input type="text" id="address3" name="address3" value="" size="12" class="inpt" />   
  <br class="clear" />

  <div class="fieldgroup">
  <label for="country">Country*</label>
  <input type="text" id="country" name="country" value="" size="12" class="inpt" /><br    
  class="clear" />
  </div>
  </td>
  <td><br />
  <div class="fieldgroup">
  <label for="lastname">Last name*</label>
  <input type="text" id="lastname" name="lastname" value="" size="12" class="inpt" />   
  <br class="clear" />
  </div>

  <div class="fieldgroup">
  <label for="group">Group* </label>
  <input type="text" id="name" name="group" value="" size="12" class="inpt" />

  <br class="clear" />
  </div>

  <div class="fieldgroup">
   <label for="city">City* </label>
  <input type="text" id="city" name="city" value="" size="12" class="inpt" /><br  
   class="clear" />
   </div>

   <div class="fieldgroup">
   <label for="city">State* </label>
  <input type="text" id="state" name="state" value="" size="12" class="inpt" /><br    
  class="clear" />
  </div>

  <div class="fieldgroup">
  <label for="zip">Zip*</label>
  <input type="text" id="zip" name="zip" value="" size="12" class="inpt" /><br    
  class="clear" />
  </div>

  </td>

  </tr>

  </table>

  <input type="submit" value="Register" class="submit-btn" />
  </fieldset>
  </form> 
```

This is the code for submit.php:

```
 <?php

     $con = mysql_connect("localhost","viatechp_invacar","storefront72");
  if (!$con)
  {
    die('Could not connect: ' . mysql_error());
  }

  mysql_select_db("viatechp_invacare", $con);

    $sql="INSERT INTO registration(username,password,fname,lname,group,
    address1,address2,address3, email,city,state,zip,country )
    VALUES
    ('$_POST[name]','$_POST[password]', '$_POST[firstname]','$_POST[lastname]','  
    $_POST[group]','$_POST[address1]','$_POST[address2]','$_POST[address3]',                                                           
   '$_POST[email]','$_POST[city]','$_POST[state]','$_POST[zip]','$_POST[country]'

    )" ;

  $query = mysql_query($sql) or die(mysql_error());

  $results = mysql_fetch_assoc($query);

   if ($results) { 
  echo 'The query returned ' . $results[ 'registration' ];
  } else {
  echo 'The query did not return any results';
  } ?>

  echo $sql;

  ?> 
```

It is showing an error:

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'group,address1,address2,address3,email,city,state,zip,country ) VALUES ( 'sdfdsf' at line 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:09:05.357

group 是一个 SQL 关键字。如果这是您的某个字段的名称，则必须用 ` 将其括起来，如下所示：

```
`group`,`address1`,... 
```

这告诉 mySQL 它是一个字段名而不是关键字。最好将所有字段包含在 ` 中，以防止出现任何您可能没有注意到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:11:58.113

由 pburgess 发现。GROUP、ORDER 是我们在编程时使用的一些常见字段名称。确保使用反引号将它们括起来`group`，这始终是一个好习惯。

```
$sql="INSERT INTO registration(username,password,fname,lname,`group`,
    address1,address2,address3, email,city,state,zip,country )
    VALUES
    ('$_POST[name]','$_POST[password]', '$_POST[firstname]','$_POST[lastname]','  
    $_POST[group]','$_POST[address1]','$_POST[address2]','$_POST[address3]',                                                           
   '$_POST[email]','$_POST[city]','$_POST[state]','$_POST[zip]','$_POST[country]'

    )" ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:12:24.590

尝试这个

```
$sql="INSERT INTO registration(`username`,`password`,`fname`,`lname`,`group`,
       `address1`,`address2`,`address3`, `email`,`city`,`state`,`zip`,`country` )
       VALUES
      ('$_POST[name]','$_POST[password]', '$_POST[firstname]','$_POST[lastname]',
      '$_POST[group]','$_POST[address1]','$_POST[address2]','$_POST[address3]',                                                           
      '$_POST[email]','$_POST[city]','$_POST[state]','$_POST[zip]','$_POST[country]')" ; 
```

因为你有一些字段名称是保留关键字，例如你有`group`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:13:31.343

您的`$_POST`值缺少引号，请尝试更新它们

```
 $sql="INSERT INTO registration
     (`username`,`password`,`fname`,`lname`,`group`,`address1`,`address2`,`address3`, `email`,`city`,`state`,`zip`,`country`)
     VALUES
     ('$_POST[\"name\"]','$_POST[\"password\"]',$_POST[\"firstname\"]','$_POST[\"lastname\"]','  
            $_POST[\"group\"]','$_POST[\"address1\"]','$_POST[\"address2\"]','$_POST[\"address3\"]',                                                           
           '$_POST[\"email\"]','$_POST[\"city\"]','$_POST[\"state\"]','$_POST[\"zip\"]','$_POST[\"country\"]'

            )" ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-22T21:38:40.520

好吧，为时已晚，但这可能会对某人有所帮助。每当您想检查为什么您的查询不起作用时.. 始终尝试回显您的查询并将其粘贴到 phpmyadmin，它会抛出 mySQL 错误，这更容易理解查询中的问题

# java - foreach 循环中的每个循环？

> ID：13174795
> 
> 赞同：1
> 
> 时间：2012-11-01T10:07:18.880
> 
> 标签：java, arrays, foreach

这给出了错误。还有其他方法可以从多维数组中一一提取元素吗？

我认为对于 foreach 循环（变量持有相应的值：array/Iterable），可以首先从 multiD 中获取一维数组。数组，然后创建另一个从该数组中提取元素的 foreach 循环。但它在 foreach 循环中给出了各种错误。

第一个错误：Array2D.java:14：错误：不是 for(a : arr[] ) 的语句

代码背后：

```
class Array2D {
    public static void main(String[] args) {
        int[][] array = new int[][]
        {
                { 1, 2, 3 },
                { 4, 5, 6 },
                { 7, 8, 9 }
        };

        int a[] = new int[3];

        for(a : array) {
            for(int n : a) {
                System.out.print(n + " ");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:08:12.837

您需要更改第一个`for`语句。此外，您必须移动`int[] a`声明：

```
for(int[] a : arr) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T14:44:33.573

C# 支持以下数组：

1.  一维数组
2.  多维数组（也称为矩形数组）
3.  数组数组（也称为锯齿数组）。

例子：

```
int[] numbers; // Single-dimensional arrays // 1

string[,] names; // Multidimensional arrays // 2

int[][] detail;  // jagged arrays // 3 
```

值得注意的是，在 C# 中，数组是对象，必须实例化。

因此，上述示例的实例化可能如下所示：

```
int[] numbers = new int[5];  // 1

string[,] names = new string[5,4]; // 2

int[][] detail = new int[7][];    // 3
for (int d = 0; d < detail.Length; d++)
{
  detail[d] = new int[10];
} 
```

至于您的示例，它可能会被重写为以下方式：

```
static void Main(string[] args)
{
    int[][] arr = new int [][]
    {
        new int[] {1,2,3},
        new int[] {4,5,6},
        new int[] {7,8,9}
    };

    for (int i = 0; i < arr.Length; i++)
    {
        for (int j = 0; j < arr[i].Length; j++)
        {
            System.Console.Write(arr[i][j] + " ");
        }
        System.Console.WriteLine();
    }
} 
```

使用Java，我认为它看起来像

```
for(int[] arr : array)
{
    for(int n : arr)
    {
        System.out.print(n + " ");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:09:12.437

我会尝试：

```
for (int r = 0; r < arr.length; r++) {
   for (int c = 0; c < arr[r].length; c++) {
      // c and r are the indexes into the array
   }
} 
```

它通过遍历每个数组/数组行的长度为您提供数组元素的索引。

或者，如果您只需要没有索引的元素

```
 for (int[] a : arr) {
      for (int b : a) {
         // gives you the element in b
      }
   } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-01T10:08:22.790

在第一个 for put 中：

```
for(a : arr) {
//
} 
```

# android - Define once an event listener for multiple widgets

> ID：13174796
> 
> 赞同：0
> 
> 时间：2012-11-01T10:07:27.790
> 
> 标签：android

Given *N* widgets of the same 'kind' (intentionally avoiding the *class* or *type* terms here for avoiding confusion), I'd like to assign the same event listener to all of them in an idiomatic way.

For clarity, it'd be something akin to `$(".foo").click(...);` in jQuery. Notice the class selector.

Right now I can code it in a fairly concise way, but I was wondering whether there is an specific mechanism in Android for achieving this.

**Update** - example:

```
 button1 = (Button) findViewById(R.id.button1);
    button2 = (Button) findViewById(R.id.button2);
    ...
    buttonN = (Button) findViewById(R.id.buttonN);

    buttons = new Button[]{button1, button2, ..., buttonN};

    // Pretty imperative.
    // Would't it be better to specify that all buttons belong to the same 'kind',
    // and set a listener to that 'kind'?
    for (int i = 0; i < buttons.length; i++)
        buttons[i].setOnClickListener(...); 
```

# sql-server-2008 - 如何从存储过程中选择

> ID：13174809
> 
> 赞同：0
> 
> 时间：2012-11-01T10:07:56.043
> 
> 标签：sql-server-2008, entity-framework, stored-procedures

我第一次尝试与 EF 合作。我不确定我是否完全理解 EF。

我已经有一个包含数据的数据库，所以我从 DB 生成了我的模型。我们当前的设置通过存储过程运行一切，甚至选择。但是，除非我弄错了，否则当我生成模型时，模型会直接选择到表中。

我可以改变这种行为，所以它会调用选择过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:11:20.923

不 - 至少使用 EF4。我不能代表 EF5

您可以使用存储过程来插入和更新，但这些存储过程必须具有 EF 期望的所有参数，因此您可能必须将现有过程包装在新过程中。

对于选择，您可以使用`FunctionImport`and`ExecuteFunction`来填充实体。

# php - 在验证器中更新 Zend 表单元素值

> ID：13174811
> 
> 赞同：0
> 
> 时间：2012-11-01T10:08:13.903
> 
> 标签：php, zend-framework, zend-form-element, zend-validate

我有一个自定义 Zend Validate 类扩展`Zend_Validate_Abstract`
验证器是一个文件验证器，它运行一个外部命令行工具来验证和处理文件。

如果文件无效，则没有问题。但是如果文件是有效的，我可以`Zend_Form_Element_File`用命令行工具返回的一些信息以某种方式编辑验证器操作的值吗？

如果没有，考虑到我只想运行外部工具一次，什么是一个好的解决方法？

*解决这个想法*
，我可以创建一个运行命令行工具的 Zend 过滤器，使用解析信息更新值，包括错误。然后我让验证器简单地检查值数组是否包含过滤器留下的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:33:42.300

为什么不将元素传递给验证器：

```
class CustomFileValidator extends Zend_Validate_Abstract {
  public $element = null;

  public function isValid($value) {
        //run external tool
        //check response, validity checks
        //...
        //modify the element if valid. e.g.:
        $this->element->setValue('');
  }

  public setElement(Zend_Form_Element $element) {
      $this->element = $element;
  }
} 
```

# javascript - Opening javascript popup window without address bar and title with height and width set in percentage according to screen resolution

> ID：13174812
> 
> 赞同：2
> 
> 时间：2012-11-01T10:08:13.680
> 
> 标签：javascript, jquery, asp.net, popup

I want to open popup window using javascript with no title and address bar and also want to set its height and width in percentage according to screen resolution.How can i achieve this. I did this code;

```
 function popitup(url) {

        LeftPosition = (screen.width) ? (screen.width - 800) / 2 : 0;
        TopPosition = (screen.height) ? (screen.height - 700) / 2 : 0;
        var sheight = (screen.height) * 0.9;
        var swidth = (screen.width) * 0.8;          

        settings = 'height='+ sheight + ',width='+ swidth + ',top=' + TopPosition + ',left=' + LeftPosition + ',scrollbars=yes,resizable=yes,toolbar=no,status=no,menu=no, directories=no,titlebar=no,location=no,addressbar=no'

        newwindow = window.open(url, '', settings);
        if (window.focus) { newwindow.focus() }
        return false;
    } 
```

but still i can see address and title bar.Is this is relative versions and type of browser?.If so how can i achieve these settings in latest versions of browser like IE9,Chrome,Firefox and safari?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:21:14.567

出于安全原因，这是不可能的。

查看 [http://www.codeproject.com/Questions/79625/How-to-hide-title-bar-in-Javascript-popup](http://www.codeproject.com/Questions/79625/How-to-hide-title-bar-in-Javascript-popup)

您可以使用更吸引人的模式对话框之类的替代方法。大多数 JS 库提供开箱即用的模式对话框或使用插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:10:47.730

应该是`menu = no`还是`menubar = no`？？

`settings = 'width='+w+',height='+h+',top='+top+', left='+left+',menubar=no,resizable=no,scrollbars=yes,location=no,toolbar=no'`对我来说很好。

# c# - wpf sharepoint 2010 文件选择器

> ID：13174819
> 
> 赞同：1
> 
> 时间：2012-11-01T10:08:31.167
> 
> 标签：c#, wpf, sharepoint-2010

是否有任何可用的免费控件，例如 winforms 中的 openfiledialog，可让您从 sharepoint 2010 中选择文件？我在 Windows 2008 R2 服务器中安装了 sharepoint 2010 基础。我想允许用户从 Wpf 应用程序中浏览和选择文件。可以使用客户端对象模型编写类似的内容。只是想知道是否有人已经创建了这样的控件，这样我就不会重新发明轮子。

如果没有任何人，请给我一些关于如何在左侧创建具有树视图结构的指示，如 openfile 对话框？

编辑：添加了 C# 标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:59:45.410

有什么理由不能只使用标准的 Windows 打开文件对话框吗？

vb.net 中的示例

```
Dim dialog As New Microsoft.Win32.OpenFileDialog
Dim result = dialog.ShowDialog 
```

[这个问题](https://stackoverflow.com/questions/1505257/open-a-web-folder-sharepoint-2007through-openfiledialog)可能会有所帮助

# c# - 如何使用 OpenWebkitSharp(C#) 显示警报框(Javascript)？

> ID：13174821
> 
> 赞同：0
> 
> 时间：2012-11-01T10:08:34.407
> 
> 标签：c#, javascript, html, open-webkit-sharp

根据标题，任何允许来自 HTML 的警报消息显示在 OpenWebkitSharp (C#) 中的方法？

设想

1.  使用 OpenWebkitSharp 网络浏览器程序 (C#) 浏览 HTML。
2.  单击 HTML 中的按钮。
3.  按钮点击：警报（“显示消息”）；。

PS：我使用的是 OpenWebkitSharp 2.9 版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:19:04.783

你试过这个吗？

```
WebKitBrowser webKitSharpBrowser = new WebKitBrowser();
webKitSharpBrowser.UseJavaScript = true; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-12-24T07:55:00.287

你需要实现这些方法。

```
 webKitBrowser.ShowJavaScriptAlertPanel += new ShowJavaScriptAlertPanelEventHandler(delegate(object o, ShowJavaScriptAlertPanelEventArgs e) {
            MessageBox.Show(e.Message);
        });
        webKitBrowser.ShowJavaScriptConfirmPanel += new ShowJavaScriptConfirmPanelEventHandler(delegate(object o, ShowJavaScriptConfirmPanelEventArgs e) {
            e.ReturnValue = MessageBox.Show(e.Message, "", MessageBoxButtons.OKCancel) == DialogResult.OK;
        }); 
```

# c# - 将 power shell 脚本转换为 C#

> ID：13174824
> 
> 赞同：0
> 
> 时间：2012-11-01T10:09:03.717
> 
> 标签：c#, powershell

我在 Power Shell 中有一个脚本，它运行 Microsoft 的进程，想将其转换为 C#，但没有找到如何去做。
该行如下：

```
start-process -FilePath "telnet" -ArgumentList "-t ANSI 127.0.0.1 %Port" -Wait 
```

这应该运行 Windows Telnet。
如何将其转换为 C#？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:19:49.827

一个快速而肮脏的解决方案是这样的：

```
var process = Process.Start("telnet", "-t ANSI 127.0.0.1 %Port");
process.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:36:11.600

```
var p = Process.Start(@"C:\windows\sysnative\telnet.exe", "-t ANSI 127.0.0.1 %Port");
p.WaitForExit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:19:23.430

看[`System.Diagnostics.Process.Start`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)方法。对于更高级的场景（例如，引导标准输入），您需要传递一个[`System.Diagnostics.ProcessStartInfo`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)实例。

要等待进程退出，请使用[`WaitForExit`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.waitforexit.aspx)方法（将阻塞）或[`Exited`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)事件。

# c# - 转换 IEnumerable 到 IEnumerable

> ID：13174827
> 
> 赞同：0
> 
> 时间：2012-11-01T10:09:15.170
> 
> 标签：c#, dynamic, asp.net-mvc-4, ienumerable

我的代码：

我使用 IEnumerable 将数据表转换为动态行`<dynamic>`

```
var dynamicRows = DataTableX.AsDynamicEnumerable(dt);
var rows = dynamicRows.AsQueryable().ToGridModel(1, 0, orderBy, string.Empty, filter).Data; 
```

现在我需要创建这些行的 Excel。所以我使用了以下 IEnumerable 类型的代码`<DataRow>`

```
var output = CreateXlsStream(rows); 
```

现在我无法分配行，因为它是 IEnumerable 类型`<DataRow>`，而 source 是 IEnumerable 类型`<dynamic>`。我不知道如何从 IEnumerable 转换`<dynamic>`为 IEnumerable`<DataRow>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:20:40.230

其中一种方法是将属性从一个实例显式分配给另一个实例。这可以通过`foreach`在初始集合上循环来完成。

优点是完全控制分配的字段及其值。

# ajax - JQuery datePicker 不适用于动态创建的输入元素

> ID：13174828
> 
> 赞同：2
> 
> 时间：2012-11-01T10:09:23.000
> 
> 标签：ajax, jquery, jquery-ui-datepicker

我正在尝试将 jquery datepicker 集成到我使用脚本动态创建的输入字段中。

我的脚本就像...

```
function getDate(id)
{
       $('.pop-up-link').show();
        $.ajax({
        url :   'gettartDate.jav',
        data    :   'Id='+id,
        success :   function(dateStr)
                        {
                             var htmlStr = 'Start Date : <input type="text" class="datepicker" id="startDateId" value="'+dateStr.StartDate+'"/>';
                             $(".pop-info").html(htmlString);
                             $('.datepicker').datepicker({ dateFormat: 'yy-mm-dd', changeMonth: true, changeYear: true});
                        }
} 
```

当我需要编辑数据库中的日期并向数据库添加新条目时，我正在调用此脚本。当我需要添加新条目时，我将 id 设置为 0 并返回一个空白字符串..

现在我的问题。datepicker 非常适合编辑功能。但是当我添加一个新条目时，datepicker ui 来了。但是日期没有更新到该输入字段。同样，当我发出警报以显示选定的日期时，我注意到只有日期在改变.. 年份和月份没有改变，即使我改变它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:18:16.010

这可能是因为您正在动态添加具有相同 ID 的日期选择器，我在使用动态创建的日期选择器时遇到了同样的问题。如果无论如何你可以取出 Id attr 并使用 Name attr 它应该可以工作。

所以你应该有以下

```
var htmlStr = 'Start Date : <input type="text" class="datepicker" name="startDateId" value="'+dateStr.StartDate+'"/>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:12:24.743

尝试在 .datepicker 上使用 refresh 方法，如下所示：

```
$( ".datepicker" ).datepicker( "refresh" ); 
```

# httpcontext.cache - 使用 HttpContext.Response.Cache 存储的项目的实际位置在哪里？

> ID：13174829
> 
> 赞同：1
> 
> 时间：2012-11-01T10:09:23.127
> 
> 标签：httpcontext.cache

我正在使用 HttpContext.Response.Cache 来缓存我的一些 HttpHandlers 的响应。我的问题应该很简单，但到目前为止在谷歌上我还没有找到明确的答案。

我想知道使用 HttpContext.Response.Cache 时缓存项存储在哪里？请注意，我不是在寻找有关如何使用它的信息，Google 和 MSDN 上有很多信息。

我认为 HttpContext.Response.Cache 将项目存储在内存中，但它是否也可以将内容存储在实际文件中，例如在 C: 驱动器上？

# .net - 对每个循环中的 if 子句进行过滤的性能明显高于循环中的 if 子句

> ID：13174834
> 
> 赞同：1
> 
> 时间：2012-11-01T10:09:40.133
> 
> 标签：.net, vb.net, linq

我正在开发一个包含大量`ForEach... If's`. 我计划将它们转换为每个过滤器，但我想知道速度提升是否值得花时间。我知道所有这些事情都是相对的，但是如果每个过滤器的过滤速度通常更快，那么改变它是有意义的。

```
 For Each egg In chicken.Where(Function(x) x.Tasty = True)
      ' Do Stuff
 Next

 For Each egg In chicken
      If x.Tasty = True Then
           ' Do Stuff
      End If
 Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:11:40.487

您可以尝试的一件事是使用[StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类来测量每个`For`循环需要多长时间，例如

```
Dim sw As New Stopwatch()
sw.Start()

' Do some work..
sw.Stop()

Console.WriteLine("Elapsed time to do some work: {0}", sw.Elapsed.ToString()) 
```

# javascript - JavaScript ajax 帖子

> ID：13174844
> 
> 赞同：0
> 
> 时间：2012-11-01T10:10:26.387
> 
> 标签：javascript, jquery

当ajax post.can任何帮助我如下

未声明纯文本文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。文件的字符编码需要在传输协议中声明或文件需要使用字节顺序标记作为编码签名。

谢谢，拉克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:19:38.470

尝试以这种方式使用 ajax：

```
 data = {}
  data['a'] = "aaaa";
  data['b'] = "bbbbbbbb"; 

  $.ajax({
      url: "url",
      data: data,
      type: 'post',
      success: function(result){
          //result is the output data sent from server
      },error: function(err){
          // This function will be called if error
      }  

  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:12:14.073

我认为您需要在 ajax 发布配置中设置您要求的 contentType。

# java - 文本字段验证期间选项卡之间的 jsf 导航

> ID：13174848
> 
> 赞同：1
> 
> 时间：2012-11-01T10:10:36.867
> 
> 标签：java, jsp, jsf

我对 JSF 很陌生，遇到了一个奇怪的问题，不知道如何解决。

我在一个屏幕中有多个选项卡，在一个选项卡中我有文本字段、下拉列表等。所有文本字段和下拉列表都设置了**required="true"**。

由于此验证，当我尝试导航到另一个选项卡而不输入或选择值时，我无法导航并显示验证消息（**需要值**）。

但是我在选项卡中有一个保存按钮，验证应该仅在我单击保存按钮时触发，而不是在选项卡切换/导航期间触发。在我单击保存按钮时的验证工作之间，我想要的只是当我切换到不同的选项卡时不应该触发验证。

此验证不允许我切换到不同的选项卡，并且不确定为什么在切换选项卡时会触发此验证。

任何人都可以为我的问题提出一个解决方案。

* * *

**更新**：这是我根据 CycDemo 的回答所做的更改：

```
<h:tab name="First Tab" accessKey="s">
    <h:panelGroup >
    <h:dataTable id="firstTable" styleClass="dataTableEx" headerClass="headerClass"
                footerClass="footerClass" rowClasses="rowClass1,rowClass2"
                columnClasses="columnClass1" value="#{clientProductCRUDBean.model}"
                var="item" border="1"  cellpadding="2" cellspacing="0" >

                <!-- this for the incoming originator type dropdown field -->

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="firstDropDown" />
                    </f:facet>
                     <h:selectOneMenu id="firstDropDown"  
                                required="true" requiredMessage="required field" immediate="true" >
                            <f:selectItem itemLabel="--Select--" itemValue="#{null}" />
                            <h:message for="firstDropDown" errorClass="generalErrorText"/>
                    </h:selectOneMenu>  
                </h:column>                                 

                <!-- this for the outgoing originator text field -->

                <h:column >
                    <f:facet name="header">
                        <h:outputText value="firstTextField"/>
                    </f:facet>
                    <h:inputText id="firstTextField"
                    required="true" validatorMessage="Max Length 20" requiredMessage="required field" immediate="true" >
                    <f:validateLength maximum="20"/>
                    <h:message for="firstTextField" errorClass="generalErrorText"/>
                    </h:inputText>
                </h:column>

            <!-- this for the replace or randomise radio buttons text field -->

                    <!-- this for the operators selection drop down-->

                </h:dataTable>
    </h:panelGroup>

    <h:panelGroup style="padding: 1px;  margin-top: 5px;" >
                <h:commandButton id="firstSaveButton" styleClass="commandButton"  value="Save" />
                <h:commandButton id="firstSaveCancel" styleClass="commandButton" value="Cancel" immediate="true"/>
    </h:panelGroup>
    <br />
</h:tab> 
```

它仍然调用验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:55:04.207

如果您想`switch/navigation`不进行验证过程，则必须`immediate="true"`在您的操作组件中使用。

比方说，你有如下。

```
<h:commandButton value="Save" />
<h:commandButton value="NextPage" immediate="true"/> 
```

当您单击`Save`按钮时，验证过程将起作用。但是，`NextPage`点击验证过程将被克服。

**注意** 如果有`immediate="true"`输入组件，即使单击`NextPage`按钮，也会对该组件执行验证过程。

例子

```
<h:inputText id="name" value="#{...}" immediate="true" required="true">
<h:commandButton value="Save" />
<h:commandButton value="NextPage" immediate="true"/> 
```

如果单击`NextPage`按钮，`<h:inputText id="name"...>`将执行验证过程。你可能有一个问题。为什么他们这样做？答案是你必须学习[`JSF Life Cycle`](http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:45:06.310

使用 a`<rich:tabPanel`并将其更改`switchType`为客户端。然后`<rich:tab>`在里面使用 s 。

> `<rich:tabPanel switchType="client">`
>       `<rich:tab>`
>             ......
>       `</rich:tab>`
> `</rich:tabPanel>`

# java - 变量 A 和 B 之间的差异大于 2

> ID：13174849
> 
> 赞同：2
> 
> 时间：2012-11-01T10:10:41.083
> 
> 标签：java, integer

```
 int redsize = entry.getValue().getRed();
        int bluesize = entry.getValue().getBlue();

        if(redsize > bluesize) // difference at least 2. 
```

当 redsize 和 bluesize 的差值大于 2 时，

但我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T10:12:21.297

您可以使用

```
if (Math.abs(redsize-bluesize) >= 2) 
```

文档[在这里](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#abs%28int%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:13:46.580

如果你还想要至少 2 个

```
if(redsize >= bluesize + 2) 
```

如果您希望它大于 2

```
if(redsize > bluesize + 2) 
```

> 至少相差2。

```
if(Math.abs(redsize - bluesize) >= 2) 
```

> redsize 和 bluesize 之间的差异大于 2，

```
if(Math.abs(redsize - bluesize) > 2) 
```

# powershell - 用户资料搞砸了

> ID：13174851
> 
> 赞同：1
> 
> 时间：2012-11-01T10:10:44.950
> 
> 标签：powershell

我的用户配置文件路径在这里与 powershell 一起使用有一点问题。我已将 profile.ps1 设置为此：

```
$Shell = Host.UI.RawUI
$Shell.WindowTitle="PowerShell obeys me!"
$Shell.BackgroundColor="White"
$Shell.ForegroundColor="Blue"
$size = $Shell.WindowSize
$size.width=120
$size.height=50
$Shell.WindowSize = $size
$size = $Shell.BufferSize
$size.width=120
$size.height=5000
$Shell.BufferSize = $size 
```

但是每次我执行 run poweshell 时，它都会显示一些像这样的错误：

```
Property 'WindowTitle' cannot be found on this object; make sure it exists and is settable.
At D:\data\d7bighs\Documents\WindowsPowerShell\profile.ps1:5 char:8
+ $Shell. <<<< WindowTitle="PowerShell obeys me!"
    + CategoryInfo          : InvalidOperation: (WindowTitle:String) [], RuntimeException
    + FullyQualifiedErrorId : PropertyNotFound 
```

现在是我检查我的个人资料它告诉我这个：

```
$profile
d:\data\myusername\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1 
```

但如果我通过 Windows 资源管理器检查它，它会告诉我：

```
d:\User\myusername\Documents\WindowsPowerShell\profile.ps1 
```

我在这里感到困惑，因为在资源管理器中告诉我 d:\Useres 但 PS 将其显示为 d:\data...

我该如何更改或强制 PS 照顾 d:\users 而不是 d:\data？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:01:35.487

一个小错误：`$Shell = $Host.UI.RawUI`，您可能需要先创建配置文件

```
 New-Item -Path $PROFILE -Type file 
```

然后编辑它

```
 notepad  $PROFILE 
```

# algorithm - B-Tree，难于理解

> ID：13174854
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:10:50.413
> 
> 标签：algorithm, b-tree

如果我以递增的顺序在其中插入值，我需要找出最终级别的数据承载节点中包含的键是什么。我的 BTree 是 3 级的，如果插入 0 到 15 的值，我想知道如何绘制它。
提前感谢您的帮助，
eo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:41:06.983

最大密钥大小为 3 的 B-Tree。顺序取决于定义，“Bayer & McCreight 1972”或“Knuth 1998”。

```
└── 3, 7, 11
    ├── 0, 1, 2
    ├── 4, 5, 6
    ├── 8, 9, 10
    └── 12, 13, 14 
```

[B-Tree Java 源码](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/BTree.java)

# ruby-on-rails - 为什么内容显示代码html没有render呢？

> ID：13174858
> 
> 赞同：0
> 
> 时间：2012-11-01T10:11:12.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3, markitup

我使用[MarkiItUp](http://markitup.jaysalvat.com/)构建了一个 jquery 编辑器。现在，当用户使用 html 代码在 textarea 中键入内容时，如下所示：

`A new <strong>true</strong> question`

保存记录时，它会保存`A new <strong>true</strong> question`. 并且当它显示在页面上时，它也会像保存内容一样显示，是`A new <strong>true</strong> question`。但我希望像这样在网络上显示内容：

一个新的**真实**问题

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:19:13.760

要显示它，请使用`html_safe`. 这样，您的字符串将呈现为 HTML。
有关更多信息，请参阅此问题。
[Ruby on Rails：如何将字符串呈现为 HTML？](https://stackoverflow.com/questions/4576932/ruby-on-rails-how-to-render-a-string-as-html)

# java - jax-rs Apache CXF，在拦截器之间传输数据

> ID：13174859
> 
> 赞同：2
> 
> 时间：2012-11-01T10:11:13.700
> 
> 标签：java, rest, cxf, interceptor

让我们有两个拦截器。输入拦截器 at`Phase.RECEIVE`和输出拦截器 at`Phase.SETUP_ENDING`

```
public class BeforeInterceptor extends AbstractPhaseInterceptor<Message> 
{
   public BeforeInterceptor()
   {
      super(Phase.RECEIVE);
   } 
```

和

```
public class AfterInterceptor extends AbstractPhaseInterceptor<Message> 
{
   public AfterInterceptor()
   {
      super(Phase.SETUP_ENDING);
   } 
```

现在我想知道：这两个阶段之间有多少时间？
我必须调用`System.currentTimeMillis();`BeforeInterceptor，将此值转换为`AfterInterceptor`，然后
`System.currentTimeMillis() - valueFromBeforeInterceptor`在拦截器之后调用。

但是我怎样才能将数据从一个拦截器传输到另一个拦截器呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:22:21.820

要在同一链中的两个拦截器（即两个“in”拦截器或两个“out”拦截器）之间传递数据，您可以在`Message`

```
// BeforeInterceptor
message.put("com.example.MyApp.startTime", System.currentTimeMillis());

// AfterInterceptor
long totalTime = System.currentTimeMillis() -
   (Long)message.get("com.example.MyApp.startTime"); 
```

如果一个拦截器在“in”链中，另一个在“out”链中，那么您可以将`Exchange`用于相同目的：

```
// BeforeInterceptor
inMessage.getExchange().put("com.example.MyApp.startTime", System.currentTimeMillis());

// AfterInterceptor
long totalTime = System.currentTimeMillis() -
   (Long)outMessage.getExchange().get("com.example.MyApp.startTime"); 
```

无论您使用哪个，最好选择您确定不会与任何其他拦截器发生冲突的键，例如使用 Java 包样式的分层名称。

# iphone - 错误：命令 /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang 失败，退出代码为 1

> ID：13174860
> 
> 赞同：2
> 
> 时间：2012-11-01T10:11:13.370
> 
> 标签：iphone, objective-c, sharekit

我是 iPhone 开发的新手，我正在实施一个新的 facebook 分享。添加sharekit文件夹后，运行时出现以下错误：

`ld: duplicate symbol _OBJC_CLASS_$_SBJSON in /Users/anil/Desktop/untitled folder 2/SMSCollection_15-10-mng/DerivedData/elsner_frmwrk/Build/Intermediates/elsner_frmwrk.build/Debug-iphonesimulator/elsner_frmwrk.build/Objects-normal/i386/SBJSON-48FA8505A9CE4B54.o and /Users/anil/Desktop/untitled folder 2/SMSCollection_15-10-mng/DerivedData/elsner_frmwrk/Build/Intermediates/elsner_frmwrk.build/Debug-iphonesimulator/elsner_frmwrk.build/Objects-normal/i386/SBJSON-D2068CA62086265C.o for architecture i386`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:55:04.950

您似乎正在使用两个不同版本的 SBJSON 框架。

# iphone - 在 iPad 中使用 Glow 效果平滑绘制线条

> ID：13174862
> 
> 赞同：1
> 
> 时间：2012-11-01T10:11:19.317
> 
> 标签：iphone, objective-c, ipad

我已经在我的应用程序中集成了画线。我没有使用过 OpenGL 或任何其他类似的框架。现在我想给这些线条一个发光效果。知道怎么做吗？提前致谢..

# api - 如何通过多个项目 id 在 REST API 中获取项目

> ID：13174865
> 
> 赞同：1
> 
> 时间：2012-11-01T10:11:22.540
> 
> 标签：api, rest

我有 product_id 和 onec_id 列来从数据库中获取项目。我应该使用哪些 API 路由按 product_id 或 onec_id 获取项目？

它适用于 REST 路由吗？

```
GET /products/{product_id}
GET /products/get_by_onec_id/{onec_id} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:14:24.743

要获得单个产品或 Onec(?)，`GET`

```
/products/{id}
/onecs/{id} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:17:13.483

大多数 REST 解决方案是为每个 id 触发一个 HTTP 请求。例如

```
GET /product/736 
```

REST 旨在表示资源的状态。它可以返回一组项目，但前提是这些项目以某种方式相互关联。例如

```
GET /onec/492/products 
```

将返回与指定 onec 关联的产品集。

如果您想在单个请求中返回由一组 ID 标识的一组产品，您可以使用您的快捷语法，例如

```
GET /products/12,768,56,086 
```

但这并不常见，因为它与 REST 目标有很大的不同

# objective-c - iPad 中的 UIScrollView setContentSize 错误？

> ID：13174866
> 
> 赞同：0
> 
> 时间：2012-11-01T10:11:33.670
> 
> 标签：objective-c, uiscrollview, cocos2d-iphone

我正在将 UIScrollView 集成到我的游戏中，当我从 iPhone 转到 iPad 时，我注意到 setContentSize 似乎有一些问题。

基本上我根据 UIScrollView 中有多少内容来缩放 contentSize

```
CGSize newContentSize = CGSizeMake(0.0f, totalContent * contentHeight);
[scrollView setContentSize: newContentSize]; 
```

此代码适用于 iPhone 视网膜，但当它进入 iPad 时，contentSize 变大了。我检查了这个值，它是正确的（因为在 iPad 中分辨率已经翻了一番） 问题是当我尝试滚动到底部时，它会在最后一个内容之后显示很多空格。

有谁知道这是怎么回事？

编辑：完整代码如下，它不是一个普通的应用程序，它使用 cocos2d 游戏引擎

```
CCSprite* image = [mImageArray objectAtIndex: 0];
CGSize newContentSize = mScrollView.contentSize;
newContentSize.height = mImageArray.count * image.contentSize.height;
[mScrollView setContentSize: newContentSize]; 
```

# c# - LINQ to SQL - 队列

> ID：13174867
> 
> 赞同：1
> 
> 时间：2012-11-01T10:11:35.010
> 
> 标签：c#, .net, linq-to-sql, queue

我想创建一个 LINQ to SQL 支持的队列。但是我不确定最好的方法是什么。

现在我做了这样的事情：

```
public static void Queue(Item item)
{
    var db = new MyDataContext();

    item.Time = DateTime.Now;

    db.Items.InsertOnSubmit(item);

    db.SubmitChanges();
}

public static Item TryDequeue()
{
    try
    {
        var db = new MyDataContext();

        var item = db.Items
            .Where(x => x.Status == 0)
            .OrderBy(x => x.Time)
            .FirstOrDefault();

        if (item == null)
            return null;

        item.Status += 1;

        db.SubmitChanges();

        return item;
    }
    catch (ChangeConflictException)
    {
        return null;
    }
} 
```

但是，我确实得到了一些`ChangeConflictException`s。

我希望得到的查询是一个原子事务，它选择元素并设置它的状态，然后返回，没有任何冲突，我认为情况似乎并非如此。我试过使用`TransactionScope`，但它抱怨死锁。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:36:00.527

您可以通过这样做继续处理并发问题

```
db.SubmitChanges(ConflictMode.ContinueOnConflict); 
```

但请理解它的[陷阱](http://msdn.microsoft.com/en-us/library/bb399373%28v=vs.90%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:14:39.543

这听起来像您`TryDequeue`同时在多个线程上运行。

您是否考虑过将队列管理留给单个主线程，然后当它们可用时将工作交给其他人？您总是会遇到多个线程更新相同数据库记录的问题。

即使您强制事务中的所有内容，线程也会开始阻塞，等待其他线程检查工作队列（并且数据库操作在多线程方面很*慢*）。这将很快导致瓶颈。

另一种方法是在线程安全集合中使用内存缓存。队列项目将被加载到集合中，线程可以从那里出列。每隔一段时间（或当队列为空时），通过该方法的第一个线程可能会阻塞，将缓存中的更改刷新回数据库，加载新队列，然后正常出列并停止阻塞。这大大减少了您的数据库访问次数，并且应该避免冲突问题，因为在任何给定时间只有一个线程将执行更新。当然，不利的一面是，现在在更新作业的状态和存储在数据库中的更改之间存在延迟——这取决于这会有多大的问题？

The quick 'n dirty fix which will resolve the current error but *not* the underlying problem would be to `lock` and so limit threads moving through your Dequeue method...

```
private Object dequeueLock = new Object();
public static Item TryDequeue()
{
    lock (dequeueLock)
    {
        try
        {
            var db = new MyDataContext();

            var item = db.Items
                .Where(x => x.Status == 0)
                .OrderBy(x => x.Time)
                .FirstOrDefault();

            if (item == null)
                return null;

            item.Status += 1;

            db.SubmitChanges();

            return item;
        }
        catch (ChangeConflictException)
        {
            return null;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T10:25:31.233

试试这个...

```
private static readonly object _lock = new object

public static void Queue(Item item)
{
    try
    {
        Monitor.Enter(_lock);
        var db = new MyDataContext();

        item.Time = DateTime.Now;

        db.Items.InsertOnSubmit(item);

        db.SubmitChanges();
    }
    finally
    {
        Monitor.Exit(_lock);
    }
}

public static Item TryDequeue()
{
    try
    {
        Monitor.Enter(_lock);
        var db = new MyDataContext();

        var item = db.Items
            .Where(x => x.Status == 0)
            .OrderBy(x => x.Time)
            .FirstOrDefault();

        if (item == null)
            return null;

        item.Status += 1;

        db.SubmitChanges();

        return item;
    }
    catch (ChangeConflictException)
    {
        return null;
    }
    finally
    {
        Monitor.Exit(_lock);
    }
} 
```

# jsf - 如何将背景颜色更改为 ah:inputTextarea 中的特定单词

> ID：13174875
> 
> 赞同：1
> 
> 时间：2012-11-01T10:12:08.290
> 
> 标签：jsf

我用输入文本区域做了一个，值将来自数据库。值类似于：mycompany 已从 2012 年 12 月 12 日起申请了 2 年通知。我想用一些不同的背景颜色突出**2012 年 12 月 12 日。**

注意：值将来自数据库。

```
<h:inputTextarea cols="60" rows="5" id="messageId" style="margin-top:3px;"
    value="#{messageBean.textMessage}" /> 
```

我怎样才能做到这一点？谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:36:20.200

由于`<h:inputTextarea`生成`<textarea`

不可能

看看这个类似的问题：

[使用 Jquery 更改 Textarea 中某些单词的颜色？](https://stackoverflow.com/a/2990170/617373)

和

[使用jquery在textarea中的颜色代码](https://stackoverflow.com/a/3063251/617373)

您可以使用一些*所见即所得的文本编辑器*

就像[Primefaes Editor中使用的这个一样](http://www.primefaces.org/showcase/ui/editor.jsf)

或者只是集成一些第三方 js 所见即所得的文本编辑器，如[CKEditor](http://ckeditor.com/)或[TinyMCE](http://www.tinymce.com/)

* * *

您还可以从编辑器中删除所有工具栏/按钮，因此它最终看起来几乎像`textarea`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:34:43.827

不，这是不可能的。但你可以做一个小把戏。
您可以`<h:inputTextarea`使用 css 属性使您的组件透明`background:transparent;`。然后使用另一个彩色 div 并将其放在要突出显示的单词后面。`display:inline-block;` 有时，如果 JSF 没有按照您提供的宽度呈现 div，您可能需要添加到荧光笔 div。`z-index`可能还需要负片。

# c# - 密码数据不出现在编辑模式

> ID：13174877
> 
> 赞同：0
> 
> 时间：2012-11-01T10:12:13.310
> 
> 标签：c#, asp.net

我有个问题

在编辑模式下，我带来了用户数据，所有数据都正常出现

然后我将该数据添加到页面上的文本字段中，并且效果也很好

我敢肯定，正如我在调试模式下看到的那样

但是当页面进入浏览器时，密码字段为空，尽管我将数据放在上面

谁能告诉我问题出在哪里？？？

那是代码

方法从数据库中获取数据

```
public AdminsContianer getContainer(int adminId)
{
    using (Naqqab context = new Naqqab())
    {
        IQueryable<user> admin = getContainer_compiledQuery2.Invoke(context, adminId);
        if (admin.Count() > 0)
        {
            var add = admin.FirstOrDefault();
            if (add != null)
            {
                var rc = new AdminsContianer();
                rc.FirstName = add.user_firstname;
                rc.adminCreationdate = (DateTime)add.user_creationdate;
                rc.LastName = add.user_lastname;
                rc.Username = add.user_username;
                rc.Password = add.user_password;
                rc.adminLuState = add.user_lu_status.ToString();
                rc.adminLuType = add.user_lu_type.ToString();
                rc.adminLevel = add.admin_level.ToString();
                rc.adminId = add.user_id;
                return rc;
            }
            else
            {
                return null;
            }
        }
        else
        {
            return null;
        }
    }
} 
```

方法将数据放入文本字​​段

```
public void FillFormFields(AdminsContianer ad)
{
    HiddenAdminID.Value = AdminIdToEdit;
    registerAdminUsername.Text = ad.Username;
    registerAdminLastname.Text = ad.LastName;
    registerAdminFirstname.Text = ad.FirstName;
    registerAdminPassword.Text = ad.Password;
    registerAdminCPassword.Text = ad.Password;
    adminLevelDropDownList.SelectedValue = ad.adminLevel.ToString();
    //userTypeDropDownList.SelectedValue = ad.adminLuType.ToString();
    registerAdminState.SelectedValue = ad.adminLuState.ToString();
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:53:54.850

使用以下代码在密码文本框中设置值`registerAdminPasswod.Attributes.Add("value", ad.Password);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:54:35.067

为什么要显示密码，因为用户无法理解。
这是一个解决方案，它是一个包含解决方案的代码项目[链接](http://www.codeproject.com/Articles/18087/ASP-NET-Password-TextBox)

或者

```
txt1.Text = "sample_password";
if (txt1.TextMode == TextBoxMode.Password)
{
    txt1.Attributes.Add("value", txt1.Text);
} 
```

# xaml - XAML，将列表绑定到列表框

> ID：13174886
> 
> 赞同：0
> 
> 时间：2012-11-01T10:12:31.470
> 
> 标签：xaml, data-binding, windows-runtime

我正在制作一个 windows8app 商店应用程序。我花了很多时间来解决这个问题：

我有一个包含视频 uri 和缩略图 uri 的项目对象：

公共类视频 { 公共字符串 VideoUrl { 获取；放; } 公共 Uri ThumbnailUrl { 获取；放; } }

```
public class Project
{
    public List<Video> ProjectVideos { get; set; }

    public Project()
    {

        string projectVideosUrl = "http://ProjectStatus1-11-07.ism/manifest";
        string thumbnail = "https://ProjectStatus1.jpg?st=2013-07-11%3A34%3A37Z";
        Uri thumbnailUrl = new Uri(thumbnail);

       var video = new Video
        {
            VideoUrl = projectVideosUrl ,
            ThumbnailUrl = thumbnailUrl 
        };

        ProjectVideos = new List<Video>();
        ProjectVideos .Add(video);
        ProjectVideos .Add(video);

    } 
```

我想以这样的方式将项目视频绑定到一个列表框，即对于项目视频列表中的每个项目，缩略图的图像都带有一个按钮。并通过单击按钮播放相关视频。

这是列表框：

```
<ListBox Name="list" Height="140" Margin="-2,-2,-5,-8" Background="#CC2B1717" ItemsSource="{Binding Project.ProjectVideos }">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel Orientation="Horizontal"  />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>

                    <ListBox.ItemTemplate >
                            <DataTemplate>
                                <Border Name="stBorder" Width="120" Height="110" Background="#FFDC2D2D" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Center" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled" >
                                    <Canvas  >
                                       <Image Name="test" >
                                             <Image.Source>
                                                <BitmapImage UriSource="{Binding  Path = Project.ProjectVideos .ThumbnailUrl}" />
                                             </Image.Source>
                                         </Image>

                                        <Button   Click="PlayVideo_Button_Click"   Height="30" Width="30" HorizontalAlignment="Center" Canvas.Top="44" Canvas.Left="44" >
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Image Source="ms-appx:///Assets/playbutton.png"/>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </Canvas>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
</listbox> 
```

当我运行代码时，我看到为每个项目制作了一个带有按钮的图像。但我没有看到图像缩略图。似乎图像元素与 ThumbnailUrl 的绑定不正确。

有谁知道我如何将图像绑定到“ThumbnailUrl”？

这是后面的代码：

```
public Project ViewModel  { get; set; }     
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        ViewModel = navigationParameter as Project;

        DataContext = ViewModel;
ViewModel.Page = this;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:20:24.397

我只是看看出了什么问题：这是解决方案：

```
 <Image Name="test"  Width="120" Height="90" Canvas.Top="10" >
                                             <Image.Source>
                                                <BitmapImage UriSource="{Binding  ThumbnailUrl}" />
                                             </Image.Source>
                                         </Image> 
```

# scala - 如何设计具有相互依赖的测试的 Specs2 数据库测试？

> ID：13174893
> 
> 赞同：5
> 
> 时间：2012-11-01T10:12:56.913
> 
> 标签：scala, integration-testing, specs2

是否有一些首选方法来设计[Specs2](http://etorreborre.github.com/specs2/)测试，其中有很多测试取决于先前测试的结果？

下面，您将找到我当前的测试套件。我不喜欢`var`测试片段之间的 s。不过，它们是“需要的”，因为某些测试会生成 ID 号，后续测试会重复使用这些 ID 号。

1.  我应该将 ID 号存储在 Specs2 上下文中，还是创建一个单独的对象来保存所有可变状态？并且只在规范对象中放置测试片段？还是有更好的方法？

2.  如果测试失败，我想取消相同深度的剩余测试。我可以让测试片段相互依赖吗？（我知道我可以在单个测试片段中取消剩余的匹配器（通过使用可变测试或通过*orSkip*），但是取消整个片段呢？）

.

```
object DatabaseSpec extends Specification {
  sequential

  "The Data Access Object" should {

    var someId = "" // These var:s feels error prone, is there a better way?

    "save an object" >> {
      someId = database.save(something)
      someId must_!= ""

      // I'd like to cancel the remaining tests, below, at this "depth",
      // if this test fragmen fails. Can I do that?
      // (That is, cancel "load one object", "list all objects", etc, below.)
    }

    "load one object" >> {
      anObject = database.load(someId)
      anObject.id must_== someId
    }

    "list all objects" >> {
      objs = database.listAll()
      objs.find(_.id == someId) must beSome
    }

    var anotherId = ""
    ...more tests that create another object, and
    ...use both `someId` and `anotherId`...

    var aThirdId = ""
    ...tests that use `someId`, `anotherId` and `aThirdId...
  }

  "The Data Access Object can also" >> {
    ...more tests...
  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:19:48.013

您的问题有两个部分：使用 vars 存储中间状态，并在失败时停止示例。

1 - 使用变量

在使用可变规范时，有一些使用 vars 的替代方法。

您可以使用`lazy vals`表示您的流程的步骤：

```
object DatabaseSpec extends mutable.Specification { 
  sequential

  "The Data Access Object" should {

    lazy val id1    = database.save(Entity(1))
    lazy val loaded = database.load(id1)
    lazy val list   = database.list

    "save an object"   >> { id1 === 1 }
    "load one object"  >> { loaded.id === id1 }
    "list all objects" >> { list === Seq(Entity(id1)) }
  }

  object database {
    def save(e: Entity) = e.id
    def load(id: Int) = Entity(id)
    def list = Seq(Entity(1))
  }
  case class Entity(id: Int)
} 
```

由于这些值是惰性的，它们只会在示例执行时被调用。

如果您准备好更改当前规范的结构，您还可以使用最新的 1.12.3-SNAPSHOT 并将所有这些小期望归为一个示例：

```
"The Data Access Object provides a save/load/list api to the database" >> {

  lazy val id1    = database.save(Entity(1))
  lazy val loaded = database.load(id1)
  lazy val list   = database.list

  "an object can be saved"  ==> { id1 === 1 }
  "an object can be loaded" ==> { loaded.id === id1 }
  "the list of all objects can be retrieved" ==> {
    list === Seq(Entity(id1))
  }
} 
```

如果这些期望中的任何一个失败，那么其余的将不会执行，您将收到如下失败消息：

```
x The Data Access Object provides a save/load/list api to the database
  an object can not be saved because '1' is not equal to '2' (DatabaseSpec.scala:16) 
```

另一种可能需要 2 个小的改进，是使用[Given/When/Then](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#G/W/T)`Given`编写规范的方式，但在内部和`When`步骤中使用“抛出”的期望。正如您在用户指南中看到的，这些`Given/When/Then`步骤从字符串中提取数据并将输入的信息传递给下一个`Given/When/Then`：

```
import org.specs2._
import specification._
import matcher.ThrownExpectations

class DatabaseSpec extends Specification with ThrownExpectations { def is = 
  "The Data Access Object should"^
    "save an object"             ^ save^
    "load one object"            ^ load^
    "list all objects"           ^ list^
  end

  val save: Given[Int] = groupAs(".*") and { (s: String) =>
    database.save(Entity(1)) === 1
    1
  }

  val load: When[Int, Int] =  groupAs(".*") and { (id: Int) => (s: String) =>
    val e = database.load(id)
    e.id === 1
    e.id
  }

  val list: Then[Int] =  groupAs(".*") then { (id: Int) => (s: String) =>
    val es = database.list
    es must have size(1)
    es.head.id === id
  }
} 
```

我要做的改进是：

*   捕获失败异常以将它们报告为失败而不是错误
*   `groupAs(".*") and`当没有从字符串描述中提取的内容时，删除使用的必要性。

在这种情况下，编写以下内容就足够了：

```
val save: Given[Int] = groupAs(".*") and { (s: String) =>
  database.save(Entity(1)) === 1
  1
} 
```

另一种可能性是允许直接写：

```
val save: Given[Int] = groupAs(".*") and { (s: String) =>
  database.save(Entity(1)) === 1
} 
```

`Given[T]`可以从 a 创建对象，因为`String => MatchResult[T]`该`MatchResult[T]`对象已经包含 type 的值`T`，这将成为“给定”。

2 - 示例失败后停止执行

使用隐式`WhenFail` `Around`上下文当然是做你想做的事的最好方法（除非你使用上面 G/W/T 示例所示的期望描述）。

*注意事项`step(stepOnFail = true)`*

*如果上一个并发示例块中的一个示例*失败，`step(stepOnFail = true)`则通过中断以下示例来工作。但是，当您使用时，前一个块仅限于一个示例。因此，您所看到的。实际上，我认为这是一个错误，并且无论您是否使用顺序，都不应该执行所有剩余的示例。因此，请继续关注本周末即将推出的修复。*`sequential`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:03:06.953

（关于问题 1：我不知道示例中是否有更好的替代`var`s 的方法。也许我的示例太长了，也许我应该将我的 Spec:s 拆分为许多较小的规范。）

关于问题 2，我[在 etorreborre 的这封电子邮件中](https://groups.google.com/d/msg/specs2-users/fcB73TxayA0/bf-dPTQVYlUJ)发现停止后续测试可以这样完成：

```
"ex1" >> ok
"ex2" >> ok
"ex3" >> ko
 step(stopOnFail=true)

"ex4" >> ok 
```

（如果 ex1、ex2 或 ex3 失败，将跳过 Ex4。（但是，如果您使用的是顺序规范，这在 Specs2 < 1.12.3 中将无法正常工作。））

* * *

这是另一种方式：根据[这个 Specs2 Googl groups 由 etorreborre 发送的电子邮件，](https://groups.google.com/d/msg/specs2-users/ED2W_W2BM9A/EOYVxoGbDtcJ)可以让后续测试在失败时停止，如下所示：（“example2”将被跳过，但“example3”和“4”将运行）

```
class TestSpec extends SuperSpecification {

    sequential

    "system1" >> {
      implicit val stop = WhenFail()
      "example1" >> ko
      "example2" >> ok
    }
    "system2" >> {
      implicit val stop = WhenFail()
      "example3" >> ok
      "example4" >> ok
    }
}

case class WhenFail() extends Around {
  private var mustStop = false

  def around[R <% Result](r: =>R) = {
    if (mustStop)          Skipped("one example failed")
    else if (!r.isSuccess) { mustStop = true; r }
    else                   r
  }
} 
```

* * *

在[etorreborre 的这封电子邮件中，](https://groups.google.com/d/msg/specs2-users/lyD7xc7GVA8/dAaFyFhy37UJ)如果示例失败，如果您包含规范列表，则可以取消后续*规范：*

```
sequential ^ stopOnFail ^
"These are the selenium specifications"         ^
  include(childSpec1, childSpec2, childSpec3) 
```

并且您需要在其中编辑测试选项，`build.sbt`以便在包含子规范后不会再次独立执行。从电子邮件：

```
 testOptions := Seq(Tests.Filter(s =>
  Seq("Spec", "Selenium").exists(s.endsWith(_)) &&
    ! s.endsWith("ChildSpec"))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:40:51.537

[Specs 文档](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Structure)指出，如果*发生故障，您可以使用 .orSkip 跳过示例的其余部分*

```
"The second example will be skipped" >> {
    1 === 2
   (1 === 3).orSkip
} 
```

但我没有亲自尝试过*

# php - 舍入时 PHP 的奇怪行为（数字变得非常大）

> ID：13174898
> 
> 赞同：1
> 
> 时间：2012-11-01T10:13:26.103
> 
> 标签：php, rounding

当我运行这个：

```
<?php echo round(8.553577896, 2); ?> 
```

它返回`8.550000000000000710542735760100185871124267578125`而不是`8.55`. 为什么？有什么方法可以使它使用该`round`功能正常工作吗？

我在 Windows NT 6.1 build 7601（Windows 7 Ultimate Edition Service Pack 1）中使用 PHP 5.4.4

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-11-01T10:16:49.057

`round()`PHP中有函数吗？

```
<?php
    print round(8.553577896, 2);
?> 
```

试试看，我不完全确定。

# dos - 批处理编程。在第一次找到另一个字符串的最后一次出现后查找字符串

> ID：13174899
> 
> 赞同：2
> 
> 时间：2012-11-01T10:13:29.487
> 
> 标签：dos, batch-processing, batch-file

我在编写一个脚本时遇到了一些麻烦，该脚本将找到一个字符串，**如果**该字符串出现在比先前找到的字符串更高的行号上。

```
FIND /N "BEGIN" "TEST_LOG.txt" && FIND "[ERROR" TEST_LOG.txt && EXIT /B 255 
```

如果日志已被写入（“BEGIN”将始终出现）并且找到第二个字符串“[ERROR”，则此字符串将首先返回退出代码 255。

因为希望附加到日志文件，所以我只想在行号上查找“[ERROR”> 在 FIND /N“BEGIN”语句中发现的最大行号。

例如，使用这样的日志文件：

```
BEGINNING 12:03:45.17
BEGINNING 12:03:45.17
BEGINNING 12:03:45.17
BEGINNING 12:03:45.17
[ERROR 
```

我希望代码以错误代码 255 退出。但是，对于这样的日志文件，我不会：

```
BEGINNING 12:03:45.17
BEGINNING 12:03:45.17
[ERROR
BEGINNING 12:03:45.17
BEGINNING 12:03:45.17
ALL IS WELL! 
```

我期待您的回复，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:56:36.850

您只需要确定每个字符串出现的最高行号，如果 [ERROR 字符串行号大于 BEGIN. 使用 FOR /F 循环处理 FINDSTR /N 中的每个匹配行并将变量设置为行号。最后处理的比赛获胜，并且将是最高的比赛。您需要两个循环 - 每个搜索字符串一个。

我使用 FINDSTR /B 选项仅在字符串出现在行首时才匹配。显然，如果这不是您的要求，您可以删除该选项。

```
@echo off
setlocal
set begin=0
set error=0
for /f "delims=:" %%N in ('findstr /nlb BEGIN TEST_LOG.txt') do set /a begin=%%N
for /f "delims=:" %%N in ('findstr /nlb [ERROR TEST_LOG.txt') do set /a error=%%N
if %error% gtr %begin% exit /b 255 
```

# java - 有没有一种干净的方法可以给 Java 对象范围提供破坏？

> ID：13174905
> 
> 赞同：2
> 
> 时间：2012-11-01T10:13:47.440
> 
> 标签：java, exception, file-io, raii, resource-cleanup

想象一下 MyOpenedFile 是用打开的流包装文件的东西。然后假设这段代码：

```
// method in an Util class
static void safeClose(MyOpenedFile f) {
  if (f != null) {
    try {
      f.close();
    } catch(IOException ex) { /* add logging or console output */ }
  }
} 
```

问题的实际方法：

```
void doSomeFileOperation(...) throws IOException, ... {
    MyOpenedFile f1 = null;
    MyOpenedFile f2 = null;
    try {

      /* method's "business logic" code beings */
      f1 = new MyOpenedFile(...);
      //do stuff
      f2 = new MyOpenedFile(...);
      // do stuff
      f1.close(); f1 = null;
      // do stuff with f1 closed
      f2.close(); f2 = null;
      // do stuff with f2 closed
      /* method's "business logic" code ends */

    } finally {
      Util.safeClose(f1); f1 = null;
      Util.safeClose(f2); f2 = null; 
    }
} 
```

现在这很混乱，特别容易出错（例如，finally 块中的某些代码可能很难在单元测试中调用）。例如，在 C++ 中，析构函数会负责清理（由作用域指针析构函数调用或直接调用），代码会更干净。

那么，是否有更好/更好/更清洁的方法来包装上面的业务逻辑代码，以便传播任何异常但两个文件都`f1`被`f2`关闭（或者至少在两者上都尝试关闭，即使它失败了）？

还可以提供指向任何开源库（例如 Apache Commons）的答案，欢迎提供漂亮的包装器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:28:02.277

文件是字符串的包装器，其中包含可能存在或不存在的文件名。它是无状态的，因此您无需关闭它。

您需要关闭的资源是 FileInputStream 或 BufferedReader，您可以在 Java 7 中使用 ARM 隐式关闭这些资源

```
try(BufferedReader br = new BufferedReader(new FileReader(file))) {

} 
```

`br`当他阻止退出时，这将关闭。

[http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html](http://www.oracle.com/technetwork/articles/java/trywithresources-401775.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:27:48.877

看一下[try-with-resources 语句](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)，它将在 try-block 结束后关闭资源。

您使用的`File`类似乎没有，`java.io.File`因为它没有任何`close()`方法。在这种情况下，请确保您自己的`File`类实现`Closeable`以使其与 ARM 一起使用。

```
try (FileInputStream f1 = new FileInputStream("test1.txt");
     FileInputStream f2 = new FileInputStream("test2.txt")) {
    // Some code
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:28:02.323

您不需要关闭文件（这是文件系统上文件的表示形式），如此处所述：

[我是否需要关闭执行 File.getName() 的文件？](https://stackoverflow.com/questions/8211760/do-i-need-to-close-files-i-perform-file-getname-on)

我假设您正在询问有关文件流/阅读器的更多信息？

在这种情况下，java 7 有一个不错的新功能： http: [//www.vineetmanohar.com/2011/03/java-7-try-with-auto-closable-resources/](http://www.vineetmanohar.com/2011/03/java-7-try-with-auto-closable-resources/)

如果您正在使用旧版本的 java，我会保持简单：

```
void doSomeFileOperation(...) throws IOException, ... {
  FileInputStream f1 = null;
  FileInputStream f2 = null;
  try {

    // do stuff

  } finally {
    Util.safeClose(f1); 
    Util.safeClose(f2); 
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:25:57.270

我脑海中自动出现的一个选项是：将处理文件的代码与进行任何处理的代码分开。通过这种方式，您可以封装处理打开、关闭和异常处理的讨厌代码。

另一点是你的样本做了很多额外的、不需要的步骤

```
void doSomeFileOperation(...) throws IOException, ... {
    File f1 = null;
    File f2 = null;
    try {
      f1 = new File(...);
      f2 = new File(...);
      // callback to another class / method that does the real work
    } finally {
      Util.safeClose(f1);
      Util.safeClose(f2);
    }
} 
```

您不需要将 File 实例设置为 null。如果你尝试使用它们，你会得到一个例外。

我不知道`File`您使用的是什么对象。java中的标准`File`类没有`close()`方法。

# c# - 使用 C# 获取 IP 地址和适配器描述

> ID：13174909
> 
> 赞同：6
> 
> 时间：2012-11-01T10:14:01.377
> 
> 标签：c#, networking, ip-address

我在同步“IP 地址和描述”时遇到问题。

目标是这样的：

获取 IP 地址和描述是什么？

例子：

```
| Atheros Azx1234 Wireless Adapter |

|192.168.1.55                      | 
```

但是结果不是我想象的那样……

这是我的代码随意尝试...

```
private void button1_Click(object sender, EventArgs e)
{
    NetworkInterface[] interfaces = NetworkInterface.GetAllNetworkInterfaces();
    IPHostEntry host;
    host = Dns.GetHostEntry(Dns.GetHostName());

    foreach (NetworkInterface adapter in interfaces)
    {
        foreach (IPAddress ip in host.AddressList)
        {
            if ((adapter.OperationalStatus.ToString() == "Up") && // I have a problem with this condition
                (ip.AddressFamily == AddressFamily.InterNetwork))
            {
                MessageBox.Show(ip.ToString(), adapter.Description.ToString());
            }
        }
    }
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T10:56:01.790

您的代码中的问题是您没有为给定的适配器使用关联的 IP 地址。仅使用与当前适配器关联的 IP 地址，而不是将所有 IP 地址与每个适配器匹配：

```
NetworkInterface[] interfaces = NetworkInterface.GetAllNetworkInterfaces();
foreach (var adapter in interfaces)
{
    var ipProps = adapter.GetIPProperties();

    foreach (var ip in ipProps.UnicastAddresses)
    {
        if ((adapter.OperationalStatus == OperationalStatus.Up)
        && (ip.Address.AddressFamily == AddressFamily.InterNetwork))
        {
            Console.Out.WriteLine(ip.Address.ToString() + "|" + adapter.Description.ToString());
        }
    }
} 
```

# jquery - 使用 jquery 创建变量列表

> ID：13174912
> 
> 赞同：0
> 
> 时间：2012-11-01T10:14:21.873
> 
> 标签：jquery

我有一个按钮，当单击该按钮时，我希望将变量“名称”添加到我的表中

```
$('#myTable').click(function(id){
    $('#Selection table').each(function (i) {
        i = i+1;
        $(this).prepend('<tr><td><a><p><b>1st name:</b>' + name + '" </a></tr></td>')
    });
}); 
```

此代码有效！但是，当第二次单击该按钮时，我希望将变量“名称”附加到表中（父函数中的“名称”正在更改）。这段代码几乎可以工作，但是它将 name 变量添加到表中两次。

我还想找到一种方法将第二次点击标记为“2nd”，然后是“3rd”等。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:20:21.840

要跟踪单击#myTable 的时间，您可以执行以下操作（我还修复了无效标记：

```
var timesClicked = 0;   
$('#myTable').click(function(id)
{
    $('#Selection table').each(function (i)
    {
        $(this).prepend('<tr><td><p><a href="#"><b>1st name:</b>' + name + '" </a></p></td></tr>');
        i++;
    });
    timesClicked++;
}); 
```

# iphone - 目标 c 中的多日活动

> ID：13174914
> 
> 赞同：0
> 
> 时间：2012-11-01T10:14:25.073
> 
> 标签：iphone, objective-c, ios, ipad, ios6

我想从目标 c 创建一个跨越多天的 EKevent，在 iOS 5 和 iOS 6 中，创建过程都按预期工作，并且事件创建成功，但是当我从事件存储中获取事件时，事件消失了从最后一天 - 事件结束的那一天开始 - 这个问题存在于 iOS 6 中。

你们觉得怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:47:24.837

我在多日活动中也看到了这个问题。我认为这是一个错误，所以我向 Apple 提交了一份错误报告。我通过调整最后一天的事件存储谓词以包括倒数第二天的晚上 11:59 来解决此问题。之后，我手动过滤掉倒数第 2 天的事件（如果有的话）。

# java - implements blocked interfaces

> ID：13174915
> 
> 赞同：2
> 
> 时间：2012-11-01T10:14:26.627
> 
> 标签：java, oop, inheritance, interface, multiple-inheritance

I would like to implement another interface in this interface (Ifirst). Problem is very big because they are blocked and is not possible to write "implements Isecond" Maybe you know what I have to do to implement this in another way? Because this problem is very hard of course look easy but is really difficult.

```
public interface Ifirst {

}

public interface Isecond {

} 
```

They are blocked and I can use them but I`am not able to edit.

I get answ - > Create a third that extends first and second and don't add anything to it

I get correct answer, maybe is not the best way but is working. I gave you points for help Topic [closed] "Create a third that extends first and second and don't add anything to it."

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:16:32.020

Are you asking how to **extend** an interface?

```
 public interface Iseond extends Ifirst {

 } 
```

Interfaces extend other interfaces.

类扩展其他类并实现接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:41:22.337

接口不能使用`implements`，规则是：

*   一个接口`extends`其他接口。
*   一个类`implements`其他接口。
*   一个类`extends`另一个非`final`类。

如果你不能修改`Ifirst`and `Isecond`，那就是这样。

```
public interface Ithird extends Ifirst, Isecond {

} 
```

# vba - 在 VBA 中转置范围

> ID：13174916
> 
> 赞同：9
> 
> 时间：2012-11-01T10:14:29.540
> 
> 标签：vba, excel

我正在尝试通过 VBA 宏转置 Excel 中的一系列单元格，但我遇到了一些错误，主要是错误 91。

我对 VBA 很陌生，对函数也不太了解。

```
Range(InRng).Select
Set Range1 = Selection
Dim DestRange As Range
Set DestRange = Application.WorksheetFunction.Transpose(Range1) 
```

在经历了几个论坛之后，这就是我想出的。需要注意的一件事是我不必将它们复制到任何其他单元格中。

我想要实现的是创建一个协方差方法，并且在选项窗口中，用户可以选择选择范围，然后按列或行进行选择，这将影响生成的协方差矩阵。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T11:45:46.590

这使您可以将 X 和 X' 作为变量数组传递给另一个函数。

```
Dim X() As Variant
Dim XT() As Variant
X = ActiveSheet.Range("InRng").Value2
XT = Application.Transpose(X) 
```

要将转置后的值作为一个范围，您必须通过工作表传递它，如[本答案所示](https://stackoverflow.com/a/13175468/1706564)。如果不了解协方差函数的工作原理，就很难看出您需要什么。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T10:49:57.193

首先复制源范围，然后使用 Transpose:=True 在目标范围上进行特殊粘贴，简短示例：

```
Option Explicit

Sub test()
  Dim sourceRange As Range
  Dim targetRange As Range

  Set sourceRange = ActiveSheet.Range(Cells(1, 1), Cells(5, 1))
  Set targetRange = ActiveSheet.Cells(6, 1)

  sourceRange.Copy
  targetRange.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=True
End Sub 
```

Transpose 函数采用 Variant 类型的参数并返回 Variant。

```
 Sub transposeTest()
    Dim transposedVariant As Variant
    Dim sourceRowRange As Range
    Dim sourceRowRangeVariant As Variant

    Set sourceRowRange = Range("A1:H1") ' one row, eight columns
    sourceRowRangeVariant = sourceRowRange.Value
    transposedVariant = Application.Transpose(sourceRowRangeVariant)

    Dim rangeFilledWithTransposedData As Range
    Set rangeFilledWithTransposedData = Range("I1:I8") ' eight rows, one column
    rangeFilledWithTransposedData.Value = transposedVariant
  End Sub 
```

我将尝试解释'**调用转置两次**'的目的。如果您在 Excel 中有**行数据，例如****“a1:h1”**，那么**Range("a1:h1").Value**是一个**二维变量数组**，维度**为 1 到 1、1 到 8**。当您调用**Transpose(Range("a1:h1").Value)**时，您会得到转置的**二维变体数组**，尺寸**为 1 到 8、1 到 1**。如果你调用**Transpose(Transpose(Range("a1:h1").Value))**你会得到维度**为 1 到 8的****一维变体数组。**

 **第一个转置将行更改为列，第二个转置将列更改回行，但**只有一个维度**。

如果源范围会有更多的行（列），例如**“a1:h3”**，那么转置函数只会像这样改变尺寸：**1 到 3、1 到 8 转置到 1 到 8、1 到 3，反之亦然。**

希望我没有让你感到困惑，我的英语很糟糕，对不起:-)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:27:05.050

您不需要这样做。以下是如何创建协方差方法：

[http://www.youtube.com/watch?v=RqAfC4JXd4A](http://www.youtube.com/watch?v=RqAfC4JXd4A)

或者，您可以使用 Excel 具有的统计分析包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T17:26:16.517

严格按照书中的“转置”开头，任何一个都可以；即，application.transpose() 或 worksheetfunction.transpose()，根据经验，如果你真的喜欢打字，application.WorksheetFunction.Transpose() 也可以工作——

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-14T10:08:00.290

如果您只想复制和转置剪贴板中的值，可以使用以下 makro：

```
Sub PasteVal()
    Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=True
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-15T15:33:42.630

像这样的东西应该为你做。

```
Sub CombineColumns1()
    Dim xRng As Range
    Dim i As Long, j As Integer
    Dim xNextRow As Long
    Dim xTxt As String
    On Error Resume Next
    With ActiveSheet
        xTxt = .RangeSelection.Address
        Set xRng = Application.InputBox("please select the data range", "Kutools for Excel", xTxt, , , , , 8)
        If xRng Is Nothing Then Exit Sub
        j = xRng.Columns(1).Column
        For i = 4 To xRng.Columns.Count Step 3
            'Need to recalculate the last row, as some of the final columns may not have data in all rows
            xNextRow = .Cells(.Rows.Count, j).End(xlUp).Row + 1

            .Range(xRng.Cells(1, i), xRng.Cells(xRng.Rows.Count, i + 2)).Copy .Cells(xNextRow, j)
            .Range(xRng.Cells(1, i), xRng.Cells(xRng.Rows.Count, i + 2)).Clear
        Next
    End With
End Sub 
```

你也可以这样做。

```
Sub TransposeFormulas()
    Dim vFormulas As Variant
    Dim oSel As Range
    If TypeName(Selection) <> "Range" Then
        MsgBox "Please select a range of cells first.", _
                vbOKOnly + vbInformation, "Transpose formulas"
        Exit Sub
    End If
    Set oSel = Selection
    vFormulas = oSel.Formula
    vFormulas = Application.WorksheetFunction.Transpose(vFormulas)
    oSel.Offset(oSel.Rows.Count + 2).Resize(oSel.Columns.Count, oSel.Rows.Count).Formula = vFormulas
End Sub 
```

有关更多信息，请参阅此内容。

[http://bettersolutions.com/vba/arrays/transposing.htm](http://bettersolutions.com/vba/arrays/transposing.htm)**

# apache - 由于 DirectorySlash 重定向，Nginx 背后的 Apache 暴露了自己

> ID：13174922
> 
> 赞同：2
> 
> 时间：2012-11-01T10:15:04.337
> 
> 标签：apache, nginx

我在端口 8097 上运行 Apache，并且 Nginx 代理请求它：

```
location / {
    proxy_pass         http://127.0.0.1:8097;

    proxy_redirect          off;
    proxy_set_header        Host            $host;
    proxy_set_header        X-Real-IP       $remote_addr;
    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
    client_max_body_size    10m;
    client_body_buffer_size 128k;
    proxy_connect_timeout   90;
    proxy_send_timeout      90;
    proxy_read_timeout      90;
    proxy_buffers           32 4k;
} 
```

Apache 配置（有意义的部分）：

```
 <Directory /home/some/htdocs>
            Options FollowSymLinks
            Options -Indexes
            AllowOverride All
            Order allow,deny
            allow from all
    </Directory> 
```

那么会发生什么：当我转到`www.mysite.com/photos`并且存在一个目录时， `photos`Apache 将我重定向到该目录并添加了斜杠。但由于某种原因，它实际上将我重定向到`www.mysite.com:8097/photos/`我在浏览器中看到这个地址，我实际上不应该这样做：

```
HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.4
Date: Thu, 01 Nov 2012 10:28:13 GMT
Content-Type: text/html; charset=iso-8859-1
Connection: keep-alive
Location: http://www.mysite.com:8097/photos/ 
```

我知道我可以通过`UseCanonicalName On`（不是最好的解决方案 - 如果我没有规范名称怎么办？）但我仍然想知道，实际的 apache 端口是如何通过这种重定向暴露的（但所有其他重写和重定向工作正常）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T18:29:29.760

我找到了一种在 nginx 配置中修复它的方法。需要将端口添加到主机标头

```
proxy_set_header        Host            $host:$server_port; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:47:38.097

听起来很傻，但您的浏览器可能已经缓存了 301。我通过在另一个浏览器中打开解决了类似的问题。

乍一看你的配置看起来不错

# .net - .Net 应用程序中极端私有字节使用情况分析，本机内存泄漏？

> ID：13174923
> 
> 赞同：3
> 
> 时间：2012-11-01T10:15:05.213
> 
> 标签：.net, memory-management, memory-leaks, windbg, unmanaged-memory

我们有一个 .Net 网站正在运行，它使用了大量的私有字节：4,45 GB 及以上。这发生在多个网络服务器上，但似乎没有模式。

借助其他一些答案，当然还有[Tess Ferrandez 的博客](http://blogs.msdn.com/b/tess/)，我们已经使用[DebugDiag](http://www.microsoft.com/en-us/download/details.aspx?id=26798)和 WinDbg（[Win8 SDK](http://msdn.microsoft.com/en-US/windows/hardware/hh852363)的一部分）获得了很多信息：

*   我们知道只有一个分配消耗超过 3 GB： ![在此处输入图像描述](../Images/13f4bcb94b3372c0b15dc7757678b909.png)

*   我们知道它是本机内存： ![在此处输入图像描述](../Images/c4b5e84a555d16cfdff5328caacea8f5.png)

*   我们知道它分配在堆 1 上： ![在此处输入图像描述](../Images/4a5846436aaab413af78c833a94155d3.png)

从这里开始，我们被困住了。建议的命令（!heap -stat -h、!heap -flt s 和 !heap -p -a）也可以在[此处](http://windbg.info/doc/1-common-cmds.html)找到，但并未向我们提供有关此行为原因的信息。

有没有人见过这个？是否有其他方法或命令可以查看导致 nativerd（IIS 的本机代码配置阅读器）发狂的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:21:35.050

由于它是一个巨大的分配，您可以使用 Windbg 设置中断并检查调用堆栈。请参阅我的回答[**，**](https://stackoverflow.com/questions/10030349/investigating-memory-leak/10086789#10086789) 了解如何设置这样的休息时间。注意这是 32 位，您可能必须将其调整为 64 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:48:32.733

在 windbg 中加载 sos dll。

在 windbg 中尝试 !dumpheap -stat。这将返回堆中的所有对象。

遍历堆并查看创建的对象数量更多，并分析该对象是否仍需要在内存中或是否应该在很长一段时间内进行垃圾回收。

收集这些对象并执行 !gcroot ，您将能够看到哪个父对象正在持有您的对象以防止垃圾收集。这将帮助您缩小内存泄漏的范围。

最常见的内存泄漏是由于在 .net 中使用事件而发生的。A 类将订阅 B 类的事件。除非 B 类被垃圾回收，否则对象 A 仍将驻留在内存中。

**更新：**

对于本机内存泄漏，请在代码库中使用[_CrtDumpMemoryLeaks](http://msdn.microsoft.com/en-us/library/d41t22sb%28v=vs.80%29.aspx) 。如果您使用的是 Visual Studio，则泄漏内存的块将显示在输出窗口中

[Glowcode](http://www.glowcode.com/)还允许您检测本机内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T12:00:12.943

我是 DebugDiag 菜鸟，但我认为下一步应该查看 DebugDiag 模块报告中提供的调用堆栈示例，以了解导致这些分配的原因。从您的屏幕截图中，您似乎已经点击了有问题的功能。DebugDiag 报告的该部分显示了什么？另外，你怎么知道它是一个单一的分配？

# c# - 如何在 Windows 8 MetroStyleApp 中调用方法？

> ID：13174924
> 
> 赞同：1
> 
> 时间：2012-11-01T10:15:09.703
> 
> 标签：c#, windows-8, winrt-xaml

我正在将我的 windows 应用程序移动到 windows8 metro 样式应用程序，我不知道如何在 windows8 metrostyle 应用程序中调用方法，我的 windows 应用程序代码是，

```
 private void appendLog(string msg)
    {
        if (this.InvokeRequired)
            this.Invoke(new MethodInvoker(delegate { this.appendLog(msg); }));
    } 
```

谁能说我！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:42:56.137

我不确切知道您要完成什么，但如果是这样[，](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker.aspx)您应该尝试

**如果在 UI 线程中调用，则直接调用代码，否则将其发送到 UI 线程：**

```
public void AppendLog(string msg)
{
    if (!Dispatcher.HasThreadAccess)
        Dispatcher.RunAsync(CoreDispatcherPriority.Normal, delegate { AppendLog(msg); });
    else
    {
        // DO YOUR UI STUFF
    }
} 
```

如果方法在 UI 线程中调用，则直接调用代码，否则将其推送到调度程序，稍后在 UI 线程中调用...

注意：该方法`AppendLog`必须在控件中声明。只有这样，该`Dispatcher`物业才可用...

# ios - Iphone秒表 - 开始，停止和开始，但不会从停止的地方开始

> ID：13174925
> 
> 赞同：3
> 
> 时间：2012-11-01T10:15:12.097
> 
> 标签：ios, xcode, ios6, nstimer, stopwatch

我正在尝试制作秒表应用程序并面临使其正常工作的问题。当我启动秒表并停止并再次启动时，它不会从停止的地方继续。它继续运行，就好像它没有停止一样。需要一些指导以使其正常工作。我从早上开始就一直在尝试，我所做的其他功能类似于苹果的秒表，只是这让我很烦恼..感谢任何帮助...

代码如下所示：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>{
    UILabel *lbl;
    NSTimer *stopTimer;
    NSDate *startDate,*currentDate;
    BOOL running;
    UIButton *bttn;
    NSMutableArray *tableItems;
    NSString *timeString,*currentString;
    UITableView *tableview;
    int counter;
}

@property (strong,nonatomic) IBOutlet UILabel *lbl;
@property (strong,nonatomic) IBOutlet UIButton *bttn;
@property (strong,nonatomic) NSMutableArray *tableItems;
@property (strong,nonatomic) NSString *timeString;
@property (strong,nonatomic) IBOutlet UITableView *tableview;

-(IBAction)startPressed:(id)sender;
-(IBAction)resetPressed:(id)sender;

-(void)updateTimer;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize lbl,bttn,tableItems,timeString,tableview;

- (void)viewDidLoad
{
    [super viewDidLoad];
    lbl.text = @"00.00.00.0";
    running = FALSE;
    //difference = @"0";
    startDate = [NSDate date];
    tableItems = [[NSMutableArray alloc] init];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)startPressed:(id)sender{
    if(!running){
        running = TRUE;
        [sender setTitle:@"Stop" forState:UIControlStateNormal];
        [bttn setTitle:@"Lap" forState:UIControlStateNormal];
        if (stopTimer == nil) {
            stopTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                         target:self
                                                       selector:@selector(updateTimer)
                                                       userInfo:nil
                                                        repeats:YES];
        }
    }else{
        running = FALSE;
        //startDate = currentDate;
        //difference = currentString;
        [sender setTitle:@"Start" forState:UIControlStateNormal];
        [bttn setTitle:@"Restart" forState:UIControlStateNormal];
        [stopTimer invalidate];
        stopTimer = nil;
    }

}
-(void)updateTimer{
    currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.S"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    timeString=[dateFormatter stringFromDate:timerDate];
    lbl.text = timeString;
}

-(IBAction)resetPressed:(id)sender{
    if (!running) {
        [stopTimer invalidate];
        stopTimer = nil;
        tableItems = [[NSMutableArray alloc] init];
        startDate = [NSDate date];
        lbl.text = @"00.00.00.0";
        running = FALSE;
    }
    else{
        [tableItems insertObject:timeString atIndex:0];
        [tableview reloadData];
    }

}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tableItems.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    //Step 1:Check whether if we can reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    //Step2: If there are no new cells to reuse,create a new one
    if(cell ==  nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"cell"];        
    }

    //Step 3: Set the cell text content
    cell.textLabel.text = [tableItems objectAtIndex:indexPath.row];

    //Step 4: Return the row
    return cell;

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:24:29.870

在您的`updateTimer`方法中，您计算`startDate`​​与当前日期之间的时间差。您没有考虑到您必须减去秒表停止时经过的时间。

**编辑：**

我建议总结并保存在开始和停止之间传递的所有时间间隔

向您的类添加一个属性`NSTimeInterval timePassed`并修改您的代码，如下所示：

```
- (void)viewDidLoad
{
    //...
    timePassed = 0;
}

-(IBAction)startPressed:(id)sender{
    if(!running){
        //...   
        startDate = [NSDate date];
        //...
    }else{
        NSDate *currentDate = [NSDate date];
        NSTimeInterval intervalToAdd = [currentDate timeIntervalSinceDate:startDate];
        timePassed += intervalToAdd;
    //...
}

-(void)updateTimer{
    currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];

    timeInterval += timePassed; // <<<<<

    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.S"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    timeString=[dateFormatter stringFromDate:timerDate];
    lbl.text = timeString;
}

-(IBAction)resetPressed:(id)sender{
    if (!running) {
        //...
        timePassed = 0;
        //...
    }
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T14:27:12.740

在我的活动项目中引用一些代码。

```
NSDate *timeStart = [NSDate dateWithTimeIntervalSince1970:0];
NSDate *timeEnd = [timeStart dateByAddingTimeInterval:_timePassed];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"00:00:00"];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
NSString *strDate = [dateFormatter stringFromDate:timeEnd];

_timeLabel.text = strDate; 
```

这就是我的做法。如果你想使用 UILabel 作为秒表，[MZTimerLabel](https://github.com/mineschan/MZTimerLabel/)是一个很棒的两行解决方案。看一看。

干杯。

# extjs - 只读 PropertyGrid

> ID：13174929
> 
> 赞同：3
> 
> 时间：2012-11-01T10:15:26.960
> 
> 标签：extjs, extjs4

有没有办法使 ExtJS4 PropertyGrid (Ext.grid.property.Grid) 不可编辑？

没有“可编辑”或“只读”配置选项 AFAICS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T13:19:26.270

另一种解决方案是添加一个侦听器，以防止启动编辑组件：

```
 listeners: {
        'beforeedit': {
            fn: function () {
                return false;
            }
        }
    } 
```

此解决方案的问题是，无法标记要复制 (Ctrl+C) 内容的单元格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T22:35:42.773

使用 将`sourceConfig`编辑器设置为`Ext.form.DisplayField`：

```
Ext.create('Ext.grid.PropertyGrid', {
    sourceConfig: {
        field1: {
            displayName: 'Editable Field'
        },
        field2: {
            displayName: 'Readonly Field',
            editor: Ext.create('Ext.form.DisplayField')
        }
    },
    source: {
        field1: "Some property",
        field2: "Some other property",
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-15T14:02:09.157

还有一个决定，但此后不允许选择文本：`myGrid.findPlugin('cellediting').disable();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:56:45.363

一种解决方案是防止选择任何单元格：

```
var myPropertyGrid = Ext.create('Ext.grid.property.Grid', { ... });
myPropertyGrid.getSelectionModel().setLocked(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-14T03:08:42.913

```
Ext.define('MyPropertyGrid', {
    extend: 'Ext.grid.property.Grid',
    xtype: 'mypropertygrid',
    source: {
        field1: 'value of field1',
        field2: 'value of field2'
    },
    sourceConfig: {
        field1: {
            editor: {disabled: true}
        },
        field2: {
            editor: {disabled: true}
        }
    }
}); 
```

我在 Extjs 6.0 上测试它。

# javascript - 将javascript验证传递给mvc3中的动态文本框

> ID：13174930
> 
> 赞同：2
> 
> 时间：2012-11-01T10:15:29.600
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

大家好，我正在做一个类似于购物车的项目。我正在使用下面的代码在我的视图中生成文本框（用于选择数量）：

```
 @foreach (var item in Model)
     {
      <tr>
      <td align="left" class="Text_nocolor">
       @Html.DisplayFor(modelItem=>item.ProductName)                                
       /td>
       <td align="right" class="Text_nocolor" valign="top">
      @using (Html.BeginForm("Update", "Cart", new { UserID = Request.QueryString["UserID"] }, FormMethod.Post, new { id = "myForm" }))
       {               
    <input id="Quantity" type="text" class="Text_nocolor" name="Quantity" value="@item.Quantity"  @*onblur="return NumberOnlyTextBox(event)"*@  onchange="return allownumbers()" maxlength="3"/>  
@Html.Hidden("unitrate", item.Rate)               
                                                    <input type="submit" value="Edit" class="Text_nocolor" onkeypress="return validateNumbersOnly(e);" onclick="return RegainFocus();" />
       } 
```

在上面的代码中，“id=Quantity”代表文本框。我已经为这些文本框编写了一个**仅用于数字验证的 javascript。**这些是我的 javascript 函数：

```
 <script type="text/javascript">
        function RegainFocus() {
            if ((document.getElementById("Quantity").value).length == 0) {
                document.getElementById("Quantity").focus();
                alert("Quantity cannot be empty");
                document.getElementById("Quantity").value = document.getElementById("Quantity").defaultValue;
                return false;
            }
            else if ((document.getElementById("Quantity").value) > 100) {
                alert("There is no enough inventory for this product to fulfill your order");
                document.getElementById("Quantity").value = document.getElementById("Quantity").defaultValue;
                return false;
            }
        }
    </script>
    <script type="text/javascript">
        function allownumbers() {
            //      var elements = document.getElementsByName('Quantity');
//           for()
            var val = parseInt(document.getElementsByName("Quantity").item(1).value);
            alert(val);
            if (!val || val < 1) {
                alert('Please enter a valid value');
                document.getElementById("Quantity").value = document.getElementById("Quantity").defaultValue;
                return false;
            }
            document.getElementById("Quantity").value = val;
            return true;
        }
     </script> 
```

我的问题是验证**仅适用于第一个文本框**而不适用于其他文本框。任何人都可以提供解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T16:03:51.940

尝试使用以下代码片段：

```
onkeypress="return validateNumbersOnly(this);" onclick="return RegainFocus(this);"
...
function RegainFocus(obj)
{
  if ((document.getElementById(obj).value).length == 0) {
    ..
}
.. 
```

希望能帮助到你。

# ruby-on-rails - 为什么我不能发布名称中带有“状态”的表单字段？

> ID：13174933
> 
> 赞同：6
> 
> 时间：2012-11-01T10:15:43.697
> 
> 标签：ruby-on-rails, forms, browser, parameters

编辑 - 显然没有人知道这里让我烦恼的是什么。我认为这只是我在页面其他地方所做的某件事阻止了正在发送的状态属性的问题。问题是我什么都看不到。我希望有人看到过类似的东西，并可以建议我需要看的地方。

* * *

我的页面上有一个虚拟表单，可以将数据发布到我的网络应用程序。它是在 Rails 中创建的（使用 HAML），就像这样；

```
=form_tag bulk_invoice_path(''), method: 'put', class: 'mark-sent-form' do
  =hidden_field_tag 'invoice[status]', 'Sent' 
```

这会生成以下html；

```
<form accept-charset="UTF-8" action="/bulk_invoices/" class="mark-sent-form" method="post">
  <div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="&#x2713;" />
    <input name="_method" type="hidden" value="put" />
    <input name="authenticity_token" type="hidden" value="OU8GtbHycR/EJ+H3GG9MN59xI59v47LSaFc2wYZloAs=" />
  </div>
  <input id="invoice_status" name="invoice[status]" type="hidden" value="Sent" />
</form> 
```

在 DOM 中，如下所示

```
<form accept-charset="UTF-8" action="/bulk_invoices/" class="mark-sent-form" method="post">
  <div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="✓">
    <input name="_method" type="hidden" value="put">
    <input name="authenticity_token" type="hidden" value="OU8GtbHycR/EJ+H3GG9MN59xI59v47LSaFc2wYZloAs=">
  </div>
  <input id="invoice_status" name="invoice[status]" type="hidden" value="Sent">
</form> 
```

这个表格是用jquery（使用coffeescript）发布的；

```
jQuery ->
  $('a.mark-sent').click -> updateBulkInvoices('.mark-sent-form')

updateBulkInvoices = (form) ->
  $(form).attr('action', "/bulk_invoices/#{checkedInvoices().get().join()}").submit() 
```

这种模式在其他操作中对我很有帮助，但“发票[状态]”似乎引起了问题。当使用 jQuery 提交表单时，隐藏字段不会被传递。我在 Rails 控制台中看到以下内容；

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"+qW9kIih5l2j69w1LK2YfQ9mYQ7nKPDm5XgLZuKB4ic=", "id"=>"16"} 
```

即 invoice[status] 字段没有与表单参数一起传递。如果我将此字段的名称更改为其他任何名称，它就可以正常工作，例如

```
=form_tag bulk_invoice_path(''), method: 'put', class: 'mark-sent-form' do
  =hidden_field_tag 'invoice[flatus]', 'sent' 
```

在我的控制台中给我以下参数；

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"+qW9kIih5l2j69w1LK2YfQ9mYQ7nKPDm5XgLZuKB4ic=", "invoice"=>{"flatus"=>"sent"}, "id"=>"16"} 
```

如果我在 Chrome 的开发人员工具上监控“网络”选项卡，我会看到同样的事情发生，所以我认为这不是 Rails 的问题，这似乎是浏览器的问题。不过，我对 Safari 和 Firefox 也有同样的看法。

状态是浏览器表单中某种神奇的保留字吗？这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T10:56:47.963

我无法重现该问题，但我怀疑它是由提交表单时的 Javascript 引起的。要对此进行调试，您可以执行以下操作：

1.  在 Chrome 中打开页面
2.  右键单击提交按钮，选择“检查元素”
3.  选择“来源”选项卡。
4.  在源选项卡中，找到单击提交时调用的 Javascript 的源。您可能必须单击“元素”选项卡下方框中的微小向右箭头。此外，如果代码已被删除并删除了所有换行符，您可以单击页面底部的“漂亮打印”花括号图标。
5.  找到方法后，单击左侧旁边的行号。在右窗格中，您应该会看到它出现在“断点”部分下。
6.  重新加载页面
7.  单击提交按钮。

这应该会带您进入在提交操作上暂停的 Javascript 调试器，然后您可以单步执行代码并准确查看它在做什么。

我希望这有帮助！

# android - 在 Android 服务中替代使用 Window

> ID：13174934
> 
> 赞同：0
> 
> 时间：2012-11-01T10:15:47.240
> 
> 标签：android

我想使用以下代码关闭我从[https://stackoverflow.com/a/4937448/1218762获得的 Button back](https://stackoverflow.com/a/4937448/1218762)

```
final Window win = getWindow();
final WindowManager.LayoutParams winParams = win.getAttributes();
winParams.flags |= WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON;

//set screen brightness to the lowest possible
winParams.screenBrightness = 0.01f;

if (Build.VERSION.SDK_INT < 8) {
  // hack for pre-froyo to set buttonBrightness off
  try {
      Field buttonBrightness = winParams.getClass().getField(
            "buttonBrightness");
      buttonBrightness.set(winParams, 0);
     }   catch (Exception e) {
       e.printStackTrace();
     }
} else {
 winParams.buttonBrightness = 0;
 }
win.setAttributes(winParams); 
```

**参考：**访问[夜间模式](https://play.google.com/store/apps/details?id=pt.bbarao.nightmode&feature=search_result#?t=W251bGwsMSwxLDEsInB0LmJiYXJhby5uaWdodG1vZGUiXQ)，您可以在服务中关闭按钮灯，我知道服务没有窗口，但怎么可能？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:20:47.110

我建议您的一种简单方法是向您广播某种*关闭*消息，并在**onReceive**方法中执行所需的操作。`Service``Activity`**`BroadcastReceiver`**

# android - 通过应用内计费购买我的物品作为测试？（错误：RPC：AEC：0）

> ID：13174935
> 
> 赞同：1
> 
> 时间：2012-11-01T10:15:56.693
> 
> 标签：android, in-app-purchase, in-app-billing

当我在我的 android 应用程序中购买 Google 指定的“产品”时，当我尝试购买自己的产品时，它会成功运行，它要求我输入付款信息，然后在输入谷歌提供的假信用卡详细信息时给我错误：

> “由于错误而无法下载错误更新（从服务器 RPC:AEC:0 检索信息时出错”

而有时：

> 处理购买时出错。[DF-BPA-13]

应用程序内项目处于已发布状态，所以我认为这不是导致它的原因，应用程序本身未发布。

我只是想在发布之前确保我的应用内项目能够按预期工作！

# perl - Perl — 创建文件的编号备份副本

> ID：13174939
> 
> 赞同：0
> 
> 时间：2012-11-01T10:16:15.563
> 
> 标签：perl, file-exists, file-copying

我正在将数据提取到某个文本文件中，但首先我希望我的脚本检查文件是否存在，然后在某个文件夹中创建副本。如果它仍然存在于同一个文件夹中，请保存它，但附加值 _1 或 _2 ...取决于最后一个文件的值。

这是我目前的脚本，

```
if (-e "/tmp/POP_Airtime_Week1.txt"){

    copy("/tmp/POP_Airtime_Week1.txt","/tmp/POP") || die "cannot copy file";
    # If the file exists create a copy in /tmp/POP

    #################################
    # IF FILE EXISTS IN /tmp/POP copy the file but rename it to 
    # POP_Airtime_Week1_1.txt then increase the numbers each time
    # the script is run and a new copy needs to be created.
    ##################################

    unlink ("/tmp/POP_Airtime_Week1.txt");

} 
```

如果`/tmp/POP/POP_Airtime_Week1.txt`存在，则将其复制但另存为`/tmp/POP/POP_Airtime_Week1_1.txt`. 下次我运行脚本并`/tmp/POP/POP_Airtime_Week1.txt`存在时，将其复制并另存为`/tmp/POP/POP_Airtime_Week1_2.txt` 等...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:23:55.623

您可以在目标文件存在时增加变量：

```
my $name = "POP_Airtime_Week1";
if (-e "/tmp/POP/$name.txt") {
    my $num = 1;
    $num ++ while (-e "/tmp/POP/$name\_$num.txt");
    copy("/tmp/$name.txt","/tmp/POP/$name\_$num.txt") or die "cannot copy file";
} else {
    copy("/tmp/$name.txt","/tmp/POP/$name.txt") or die "cannot copy file";
} 
```

不过请注意。如果您（或您和其他人）运行多个脚本实例，则可能会出现竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:26:28.907

```
 my $i = 0;
 my $fname = $file;
 for (;;) {
     last unless -f $fname;
     $i++;
     $fname = "${file}_$i";
 }
 # $fname is new unused file name, copy to it 
```

# liferay - 在liferay中存储html页面

> ID：13174942
> 
> 赞同：0
> 
> 时间：2012-11-01T10:16:25.517
> 
> 标签：liferay

如何在 liferay 中存储 html 页面并获取指向 html 页面的 href 链接。我有一些旧的 html 页面，我不想重新创建，因为主题 css 不同。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:38:24.780

我建议您在`$LIFERAY_HOME/webapps/html`（例如）中创建一个文件夹并将您的 html 页面放在那里。因此，您可以链接域中的任何页面，例如：

```
www.yourdomain.com/html/page-you-want-to-display.html
```

# linux - Bash：向现有命令添加选项

> ID：13174943
> 
> 赞同：2
> 
> 时间：2012-11-01T10:16:27.340
> 
> 标签：linux, bash

是否可以向现有的 Bash 命令添加选项？

例如，当我将 -foo 传递给特定命令（cp、mkdir、rm ...）时，我想运行一个 shell 脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T10:20:26.740

您可以为例如`cp`调用一个检查您的特殊参数的特殊脚本创建一个别名，然后调用该特殊脚本：

```
$ alias cp="my-command-script cp $*" 
```

脚本看起来像

```
#!/bin/sh

# Get the actual command to be called
command="$1"
shift

# To save the real arguments
arguments=""

# Check for "-foo"
for arg in $*
do
    case $arg in
    -foo)
        # TODO: Call your "foo" script"
        ;;
    *)
        arguments="$arguments $arg"
        ;;
esac
done

# Now call the actual command
$command $arguments 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-15T22:10:37.017

一些程序员花花公子的代码可能看起来很酷而且很有吸引力......但是对于大多数命令，您应该非常小心地使用它：[https ://unix.stackexchange.com/questions/41571/what-is-the-difference-between-and](https://unix.stackexchange.com/questions/41571/what-is-the-difference-between-and)

关于 $* 和 $@ 的使用：

> 您不应该使用其中任何一个，因为一旦您有包含空格或通配符的参数，它们就会意外中断。

我自己使用它至少几个月，直到我意识到这是我的 bash 代码有时不起作用的原因。

考虑更可靠，但不太容易且不太便携的选项。正如评论中指出的那样，重新编译原始命令并进行更改，即：

从一些受人尊敬的开发人员存储库下载 c/c++ 源代码：

*   [https://github.com/torvalds/linux](https://github.com/torvalds/linux)
*   [http://git.savannah.gnu.org/cgit/coreutils.git/tree/src](http://git.savannah.gnu.org/cgit/coreutils.git/tree/src)
*   [https://github.com/coreutils/coreutils/tree/master/src](https://github.com/coreutils/coreutils/tree/master/src)
*   [https://github.com/bluerise/openbsd-src/tree/master/bin](https://github.com/bluerise/openbsd-src/tree/master/bin)
*   [https://git.busybox.net/busybox/tree/coreutils](https://git.busybox.net/busybox/tree/coreutils)

在 c/c++ 中添加一些代码，用 gcc/g++ 编译。

另外，我想，您可以编辑***bash***本身以将其设置为检查作为命令传递给 bash 的字符串是否与某些模式匹配，不要执行此操作并执行某些不同的命令或 bash 脚本

*   [https://tiswww.case.edu/php/chet/bash/bashtop.html#Availability](https://tiswww.case.edu/php/chet/bash/bashtop.html#Availability)

如果你真的很喜欢为你的 shell 定制和添加功能的想法，也许可以看看其他一些很酷的时尚 shell，比如***zsh***、***fish***，也许他们有一些东西，我不知道。

# asp.net-mvc - 从数据库中显示剃刀

> ID：13174952
> 
> 赞同：5
> 
> 时间：2012-11-01T10:17:14.060
> 
> 标签：asp.net-mvc, database, razor, syntax

我正在尝试显示内容，例如

```
<p>Text and link - @Html.ActionLink("Link", "Action")</p> 
```

来自数据库，但如果我使用`@Html.Raw`它，它不会呈现链接。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:38:38.200

您将需要使用 Razor 解析器来实现这一点。[`RazorEngine`](http://razorengine.codeplex.com/)可用于将 Razor 标记呈现为 HTML 的Checkout 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T18:49:04.617

使用这个在后端打印它：

```
string template = "Hello @Model.Name! Welcome to Razor!";
string result = Razor.Parse(template, new { Name = "World" }); 
```

使用包含字符串属性结果的模型将结果传递到前端。

您将需要安装以下内容：

> 安装包 RazorEngine

# java - 在java中包含css（用于href标签）

> ID：13174955
> 
> 赞同：0
> 
> 时间：2012-11-01T10:17:25.867
> 
> 标签：java, css, tags, href

我必须将样式应用于我的邮件内容（对于 href 标签）。我的代码如下。

```
public void sendMailWithHsHeader(SentEmailDTO sendEmailDto)throws Exception {
        String css="";
        String mailHeader="";
        String mailfooter="";
        String mailContent=sendEmailDto.getContent();

        css="<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>";
        css+="<html xmlns='http://www.w3.org/1999/xhtml'>";
        css+="<head><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>";
        css+="<style type='text/css'>";
        css+="a {color:#CCC; text-decoration:none; padding:0px 5px; font-size:.9em;}";
        css+="a:hover {color:#9F0;}";
        css+="</style></head><body>";

        mailHeader="<table cellspacing='0' cellpadding='0' border='0' align='center' width='625'>"; 
        mailHeader+="<tr><td align='left' valign='top' style='border-top:1px solid #CCC;'><img src='http://hiringsteps.com/email/images/border-ul.jpg'/></td>"; 
        mailHeader+="<td style='border-top:1px solid #CCC;'><table cellspacing='0' cellpadding='0' border='0' width='100%'>";
        mailHeader+="<tr><td height='40' align='left'><a href='http://hiringsteps.com'><img border='0'"; 
        mailHeader+="src='http://hiringsteps.com/email/images/hiring-steps.jpg'/></a></td></tr><tr><td align='center' style='background-color:#1E314E;'><img src='http://hiringsteps.com/email/images/line.jpg'/></td>";        
        mailHeader+="</tr></table></td><td align='right' valign='top' style='border-top:1px solid #CCC;'><img src='http://hiringsteps.com/email/images/border-ur.jpg'/></td>";
        mailHeader+="</tr><tr><td width='20'></td><td height='300' align='left' valign='top' style='background-color:#F0F0F0; font:14px normal Arial, Helvetica, sans-serif; padding:10px 20px; line-height:1.3em;'>";        

        mailfooter+="</td><td width='20'></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td align='left' valign='bottom' style='border-bottom:1px solid #CCC;'><img src='http://hiringsteps.com/email/images/border-ll.jpg'></td>";
        mailfooter+="<td valign='bottom' style='border-bottom:1px solid #CCC;'><table cellspacing='0' cellpadding='0' border='0' width='100%'>";
        mailfooter+="<tr><td align='center' style='background-color:#1E314E; font:14px normal Arial, Helvetica, sans-serif; padding:10px 20px; line-height:1.3em;'>";        
        mailfooter+="<p><a href='http://hiringsteps.com'>HOME</a><a href='http://hiringsteps.com/Features.html'>FEATURES</a><a href='http://hiringsteps.com/Pricing.html'>PRICING</a><a href='http://hiringsteps.com/About-Us.html'>ABOUT US</a><a href='http://hiringsteps.com/Contact-Us.html'>CONTACT US</a></p>";
        mailfooter+="<p><span style='font-size:.9em; color:#CCC;'>follow us</span> <a href='https://www.facebook.com/pages/Hiring-Steps/155650987881886'><img border='0' align='absmiddle' src='http://hiringsteps.com/email/images/fb.jpg'/></a> <a href='https://twitter.com/#!/Hiringsteps'><img border='0' align='absmiddle' src='http://hiringsteps.com/email/images/tw.jpg'/></a> <a href='http://www.linkedin.com/company/2630770'><img border='0' align='absmiddle' src='http://hiringsteps.com/email/images/in.jpg'/></a> <a href='http://hiringsteps.com/Signin.html'>";
        mailfooter+="<img border='0' align='absmiddle' src='http://hiringsteps.com/email/images/login.jpg'/></a></p></td></tr><tr>";               
        mailfooter+="<td>&nbsp;</td></tr></table></td><td align='right' valign='bottom' style='border-bottom:1px solid #CCC;'><img src='http://hiringsteps.com/email/images/border-lr.jpg'/></td>";       
        mailfooter+="</tr><tr><td>&nbsp;</td><td align='center'><p style='color:#777; font:11px normal Arial, Helvetica, sans-serif;'>&copy; Copyright 2012 HiringSteps. All rights reserved.<br>2321 Rosecrans Avenue, Suite 4270, El Segundo, CA 90245</p></td>";
        mailfooter+="<td>&nbsp;</td></tr></table></body></html>"; 

        sendEmailDto.setContent(css+mailHeader+mailContent+mailfooter);

        Properties props = new Properties();
        setProperties(props);
        Session session = Session.getInstance(props,null);

        session.setDebug(true);
        // create a message
        Message msg = new MimeMessage(session);

        // set the from and to address
        InternetAddress addressFrom = new InternetAddress(sendEmailDto.getFromAddress());
        msg.setFrom(addressFrom);

        String to = sendEmailDto.getToAddress();
        String[] toAddress = to.split(",(?=([^\"]*\"[^\"]*\")*[^\"]*$)");

        InternetAddress[] addressTo = new InternetAddress[toAddress.length];
        for (int i = 0; i < toAddress.length; i++) {
            addressTo[i] = new InternetAddress(toAddress[i]);
        }
        msg.setRecipients(Message.RecipientType.TO, addressTo);

        if(sendEmailDto.getCcAddress()!= null) {
            if(!sendEmailDto.getCcAddress().equals("")) {
                String cc = sendEmailDto.getCcAddress(); 
                String[] ccAddress = cc.split(",(?=([^\"]*\"[^\"]*\")*[^\"]*$)");

                InternetAddress[] addressCC = new InternetAddress[ccAddress.length];

                for (int i = 0; i < ccAddress.length; i++)
                {
                    addressCC[i] = new InternetAddress(ccAddress[i]);
                }           
                msg.setRecipients(Message.RecipientType.CC, addressCC);
            }
        }           

        InternetAddress[] replyTo = new InternetAddress[1];
        replyTo[0]=new InternetAddress("noreply@hiringsteps.com");      
        msg.setReplyTo(replyTo);
        msg.setSubject(sendEmailDto.getSubject());
        // Now the message body.
        Multipart mp = new MimeMultipart();

        BodyPart pixPart = new MimeBodyPart();
        setBodyParts(sendEmailDto, msg, mp, pixPart);

        Transport.send(msg);
}

public void setBodyParts(SentEmailDTO sendEmailDto, Message msg,Multipart mp, BodyPart pixPart) throws MessagingException {     
        String content=sendEmailDto.getContent();       
        content=content.replace("\n", "<br />\n");
        pixPart.setContent(content, "text/html");
        pixPart.addHeader("Content-type", "text/html; charset=UTF-8");
        mp.addBodyPart(pixPart);
        msg.setContent(mp);     
} 
```

在从 mailFooter 开始的第 4 行中，我必须将样式应用于 hreg 标记，该标记位于 css 字符串中。但是这种风格没有得到应用。请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:20:43.333

您希望这些坏男孩出现在您的标题中，否则它不知道它将是 HTML 格式的。

`Content-type: text/html; charset=iso-8859-1`

# javascript - 如何从插件访问功能

> ID：13174956
> 
> 赞同：0
> 
> 时间：2012-11-01T10:17:25.803
> 
> 标签：javascript, jquery

我正在为我的选择输入使用选择的 jquery 插件。我想在点击标签时重置选择选项，所以我想访问 jquery 插件功能。[演示](http://jsfiddle.net/vCE4Y/9/)

HTML

```
<select id="second" class="chzn-select" style="width:100px">
<option value="0"> select</option>
<option value="1"> mr</option>
<option value="2"> mrs</option>
</select>
<a href="#">reset</a>​ 
```

jQuery

```
$(".chzn-select").chosen()
$('a').click(function(){
    $.chosen({results_reset})
}) 
```

​ 来自插件的功能

```
Chosen.prototype.results_reset = function () {
    this.form_field.options[0].selected = true;
    this.selected_item.find("span").text(this.default_text);

    if (!this.is_multiple) this.selected_item.addClass("chzn-default");

    this.show_search_field_default();
    this.results_reset_cleanup();
    this.form_field_jq.trigger("change");

    if (this.active_field) return this.results_hide();
}; 
```

这是完整插件的链接 [http://harvesthq.github.com/chosen/chosen/chosen.jquery.js](http://harvesthq.github.com/chosen/chosen/chosen.jquery.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:21:43.547

**编辑**

要调用插件函数，您可以执行以下操作：

```
$('your-select').data('chosen').results_reset(); 
```

**演示：http:** [//jsfiddle.net/vCE4Y/12/](http://jsfiddle.net/vCE4Y/12/)

* * *

您无需访问插件代码即可重置选择。您可以按如下方式重置它：

```
$('your-select').val(0).trigger("liszt:updated"); 
```

**演示：http:** [//jsfiddle.net/vCE4Y/11/](http://jsfiddle.net/vCE4Y/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:48:42.573

你也可以试试这个来重置

```
$('a').click(function(){

     $('#second').trigger("liszt:updated");

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T04:53:02.593

在选择的 Jquery

```
$('select-element').val('').trigger("chosen:updated"); 
```

注意：在 1.0 版本之前使用以下内容：

```
$('select-element').trigger("liszt:updated"); 
```

# javascript - jQuery 事件键码标准化

> ID：13174965
> 
> 赞同：0
> 
> 时间：2012-11-01T10:18:04.507
> 
> 标签：javascript, jquery

我读到`which`所有 jQuery 事件中的参数都是标准化的（[在此处指定](http://api.jquery.com/event.which/)）。但是，我试图弄清楚（jQuery 的）源代码中的哪个位置实现了这种规范化。我有兴趣弄清楚它是如何完成的。有人有想法吗？您能否指出我正确的方向或在这里发表解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:21:23.300

检查和的[代码](http://code.jquery.com/jquery-1.8.2.js)：`keyHooks``mouseHooks`

```
keyHooks: {
    props: "char charCode key keyCode".split(" "),
    filter: function( event, original ) {

        // Add which for key events
        if ( event.which == null ) {
            event.which = original.charCode != null ? original.charCode : original.keyCode;
        }

        return event;
    }
},

mouseHooks: {
    props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
    filter: function( event, original ) {
        var eventDoc, doc, body,
            button = original.button,
            fromElement = original.fromElement;

        // Calculate pageX/Y if missing and clientX/Y available
        if ( event.pageX == null && original.clientX != null ) {
            eventDoc = event.target.ownerDocument || document;
            doc = eventDoc.documentElement;
            body = eventDoc.body;

            event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
            event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
        }

        // Add relatedTarget, if necessary
        if ( !event.relatedTarget && fromElement ) {
            event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
        }

        // Add which for click: 1 === left; 2 === middle; 3 === right
        // Note: button is not normalized, so don't use it
        if ( !event.which && button !== undefined ) {
            event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
        }

        return event;
    }
}, 
```

# c# - ref 参数的引用

> ID：13174966
> 
> 赞同：2
> 
> 时间：2012-11-01T10:18:05.500
> 
> 标签：c#, reference

我想在函数中使用 ref 参数的堆地址（引用）值。该值需要是引用的值，而不是某个时间点的指针值，以克服 GC 压缩地址移动。

这个装置的来源是能够在一个函数中缓存表达式的值，该函数将表达式与 ref 值一起获取，这对于我的需要来说是独一无二的。

具体来说 - 以下代码是用于实现 INotifyPropertyChanged 属性的通用设置器。

```
protected void SetIfUpdated<T>(ref T backingField, T newValue, Expression<Func<T>> expression)
{
    if (/*old and new value comparison*/)
    {
        return;
    }
    backingField = newValue;
    NotifyPropertyChanged(this, ReflectionAssist.GetName(expression));
} 
```

缺点是频繁更新属性（表达式操作）的成本太高，因此此代码的用户将需要（静态）自己缓存属性的名称。一个更有用的解决方案是缓存表达式的值，键是 ref 参数的地址。

```
protected void SetIfUpdated<T>(ref T backingField, T newValue, Expression<Func<T>> expression)
{
    if (/*old and new value comparison*/)
    {
        return;
    }
    backingField = newValue;
    NotifyPropertyChanged(this, _Dictionary[AddressOf(ref backingField)]);
} 
```

那么，有没有一种足够好的方法来做到这一点，而无需深入研究 GC 的非托管 API 并且不使用 Debugger/Profiler API？

# uitableview - 使用 iOS 6 UITableView dequeueReusableCellWithIdentifier:forIndexPath 时设置 UITableViewCell 的样式：

> ID：13174972
> 
> 赞同：82
> 
> 时间：2012-11-01T10:18:22.480
> 
> 标签：uitableview, ios6

我正在尝试解决如何`UITableViewCellStyle`在使用 iOS 6 中的新方法时设置`UITableView`.

以前，在创建 a 时，`UITableViewCell`我会更改`UITableViewCellStyle`枚举以在调用时创建不同类型的默认单元格，`initWithStyle:`但据我所知，情况不再如此。

`UITableView`用于状态的 Apple 文档：

> **返回值**：具有关联重用标识符的 UITableViewCell 对象。此方法始终返回有效单元格。
> 
> **讨论**：出于性能原因，表格视图的数据源在将单元格分配给其 tableView:cellForRowAtIndexPath: 方法中的行时，通常应该重用 UITableViewCell 对象。表视图维护数据源已标记为可重用的 UITableViewCell 对象的队列或列表。当被要求为表格视图提供新单元格时，从您的数据源对象调用此方法。如果一个可用的单元格可用，此方法会使现有单元格出列，或者根据您之前注册的类或 nib 文件创建一个新单元格。
> 
> **重要提示**：在调用此方法之前，您必须使用 registerNib:forCellReuseIdentifier: 或 registerClass:forCellReuseIdentifier: 方法注册类或 nib 文件。
> 
> 如果您为指定的标识符注册了一个类并且必须创建一个新单元格，则此方法通过调用其 initWithStyle:reuseIdentifier: 方法来初始化该单元格。对于基于 nib 的单元格，此方法从提供的 nib 文件加载单元格对象。如果现有单元格可供重用，则此方法将改为调用该单元格的 prepareForReuse 方法。

这是实现新方法后我的新`cellForRowAtIndexPath`外观：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"cell_identifier";

    [tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:cellIdentifier];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    return cell;
} 
```

到目前为止我的代码工作正常，但总是返回默认样式。如何更改此设置，以便创建具有其他样式的单元格，例如`UITableViewCellStyleDefault`、和？`UITableViewCellStyleValue1``UITableViewCellStyleValue2``UITableViewCellStyleSubtitle`

我不想子类`UITableViewCell`化，我只想像在 iOS 6 之前所做的那样更改默认类型。Apple 会提供增强的方法但用最少的文档来支持它们的实现似乎很奇怪。

有没有人掌握了这个，或者遇到了类似的问题？我正在努力寻找任何合理的信息。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-11-02T11:27:36.577

我知道您说过您不想创建子类，但这看起来是不可避免的。在 iOS 6.0 模拟器中测试时基于汇编代码，通过执行`UITableView`创建新的实例`UITableViewCell`（或其子类）

```
[[<RegisteredClass> alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:<ReuseIdentifier>] 
```

换句话说，发送的样式 ( `UITableViewCellStyleDefault`) 似乎是硬编码的。为了解决这个问题，您需要创建一个覆盖默认初始化程序`initWithStyle:reuseIdentifier:`并传递您希望使用的样式的子类：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    // ignore the style argument, use our own to override
    self = [super initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:reuseIdentifier];
    if (self) {
        // If you need any further customization
    }
    return self;
} 
```

此外，最好发送`registerClass:forCellReuseIdentifier:`in `viewDidLoad`，而不是每次请求单元格时都发送：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.tableView registerClass:<RegisteredClass> forCellReuseIdentifier:<ReuseIdentifier>];
} 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-11-22T17:21:18.117

`dequeueReusableCellWithIdentifier`不推荐使用，因此您不需要使用新的`dequeueReusableCellWithIdentifier:forIndexPath:`.

如果您使用自定义单元格类，请使用新方法和适当的注册方法（在 viewDidLoad 中），但如果您想使用 UITableViewCellStyle 枚举之一，请使用旧方法。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-11T02:16:07.720

您可以使用故事板界面构建器来避免无关的子类：

1.  在 Storyboard 视图中，选择 table view cell 原型单元格（在 table view 上）
2.  在 Utilities 视图的 Attributes 检查器中，修改 Style 值
3.  （可选）修改其他值，例如 Selection 和 Accessory

新的 iOS 6.0`dequeueReusableCellWithIdentifier:forIndexPath:`在分配新单元格并返回它们时确实使用了这些值。（使用 Xcode 4.5.2 在 iOS 6.0 编译上测试）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-18T17:58:55.400

保存一个文件的另一种方法是创建一个 Nib 并`registerNib:forCellReuseIdentifier:`改为使用。

制作 Nib 很简单：在 Interface Builder 中创建一个新的 .xib 文件。删除默认视图。添加一个表格视图单元格对象。使用属性检查器，更改单元格的样式。（在这里您还可以通过调整其他属性来进一步自定义单元格。）

然后在您的表视图控制器的`viewDidLoad`方法中调用类似：

```
[self.tableView registerNib:[UINib nibWithNibName:@"StyleSubtitleTableCell" bundle:[NSBundle mainBundle]] forCellReuseIdentifier:@"Cell"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-15T14:40:26.020

博洛特的回答是正确的。简单，您不需要创建任何 XIB 文件。

我只是想为使用 Swift 而不是 Objective-C 的人更新他的答案：

```
override init(style: UITableViewCellStyle, reuseIdentifier: String?) {
    super.init(style: .value1, reuseIdentifier: reuseIdentifier)
}

required init?(coder aDecoder: NSCoder) {
    fatalError("init(coder:) has not been implemented")
} 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2015-06-11T08:17:40.940

我对此的解决方案是`initWithStyle: reuseIdentifier:`在我使用`[self.tableView dequeueReusableCellWithIdentifier:@"cellId" forIndexPath:indexPath]`. 毕竟，`init`它只是另一个选择器，编译器对在已经初始化的对象上调用它没有任何限制。然而，它会抱怨不使用调用 init 的结果，所以我这样做：

```
UITableViewCell* cell = [self.tableView dequeueReusableCellWithIdentifier:@"cellId" forIndexPath:indexPath];
cell = [cell initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"cellId"]; 
```

我想这在 Swift 中行不通……

# c++ - 编译器何时应该生成移动构造函数？

> ID：13174973
> 
> 赞同：15
> 
> 时间：2012-11-01T10:18:24.697
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, move-semantics

我使用 VS11 并使用以下内容：

```
class ContextWrapper
{
public:

    ContextWrapper()
    {
    } //it should be defaulted I *guess* in order to have automatic move constructor ?
      // no support in VS11 for that now  

    Context* GetContext()
    {
        return this->context.get();
    }

    void SetContext(std::unique_ptr<Context> context)
    {
        this->context = std::move(context);
    }

    //ContextWrapper(ContextWrapper&& other):  context(std::move(other.context))
    //{
    //} // I would like this to be generated by the compiler

private:
    ContextWrapper(const ContextWrapper&);
    ContextWrapper& operator= (const ContextWrapper&);

    std::unique_ptr<Context> context;
}; 
```

我希望这个类生成移动构造函数/赋值。我没有一个微不足道的构造函数的事实是我没有得到移动的原因吗？还是有其他因素影响这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-01T15:26:16.177

不幸的是，C++11 的这一部分在不断变化。而且无论标准要说什么，VC11 都不可能实现它。所以今天，我不相信你能指望生成的移动成员。

然而，这是一个很好的问题，我想得到一个很好的答案。

通常，如果您没有用户声明的复制成员或析构函数，编译器应该生成移动成员。 `= default`并`= delete`算作用户声明。如果您声明一个移动成员（例如移动构造函数），则不会隐式生成另一个。

不幸的是，C++11 继续说，有时移动成员在声明时会被隐式删除`=default`，有时它们的生成取决于基础和成员是否具有移动成员或可简单复制。这太复杂了，有时会产生令人惊讶的行为。这是跟踪此错误的 CWG 问题：

[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1402](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1402)

在我写这篇文章时，这个问题没有正确的建议解决方案。我预计这会在大约一周内改变。在俄勒冈州波特兰举行的 2012 年秋季 C++ 标准会议上，达成了一项协议，该协议基本上说：

1.  编译器永远不会隐式删除移动成员。
2.  move 成员的隐式生成将始终与`= default`.
3.  隐式生成将不依赖于基础或成员的琐碎性，也不依赖于它们在移动时是否会抛出。

简而言之，我希望 CWG 1402 的更正措辞简单地说：

> 通常，如果您没有用户声明的复制成员或析构函数，编译器应该生成移动成员。 `= default`并`= delete` 算作用户声明。如果您声明一个移动成员（例如移动构造函数），则不会隐式生成另一个。如果你`=default`是移动成员，你会得到移动每个基地和成员的东西。

（适当标准化）。我还没有看到会这样说的措辞。Jason Merrill 正在为我们编写它。

这意味着有时编译器会隐式生成投掷移动成员。但我们追求的是简单的规则，但大多数时候都做了正确的事情（很少有惊喜）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T16:01:53.503

为了更直接地回答这个问题，Visual Studio 不支持任何版本的隐式移动构造函数/赋值生成。因此，您必须始终手动将它们写出来。

# python - argparse 不检查位置参数

> ID：13174975
> 
> 赞同：3
> 
> 时间：2012-11-01T10:18:41.330
> 
> 标签：python, argparse, optional-arguments

我正在创建一个脚本，它使用 argparse 接受位置参数和可选参数。我已经阅读了 Doug 的教程和 python 文档，但找不到答案。

```
parser = argparse.ArgumentParser(description='script to run')
parser.add_argument('inputFile', nargs='?', type=argparse.FileType('rt'),
parser.add_argument('inputString', action='store', nargs='?') 
parser.add_argument('-option1', metavar='percent', type=float, action='store')
parser.add_argument('-option2', metavar='outFile1', type=argparse.FileType('w'),
parser.add_argument('-option3', action='store', default='<10',
args = parser.parse_args()
# rest of script.... blah blah 
```

如您所见，我想要 2 个位置参数和 3 个可选参数。但是，当我尝试在终端中运行它时，它不会检查位置！如果我尝试：python script.py inputfile 它将正常运行并在脚本中途找不到 inputString 的值时输出错误。如果我尝试： python script.py xxx ；输出是：

```
usage script.py [-h] [-option1] [-option2] [-option3] 
```

谁能解释为什么它不检查位置参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T10:42:38.963

您的问题是您正在指定`nargs='?'`. 从[文档中：](http://docs.python.org/dev/library/argparse.html#nargs)

> `'?'`. 如果可能，将从命令行使用一个参数，并将其作为单个项目生成。如果不存在命令行参数，则将生成默认值。

如果你省略了`nargs='?'`then 参数将是必需的，`argparse`如果没有提供它会显示一个错误。`action='store'`if （默认）使用单个参数。

您还可以指定`nargs=1`; 不同之处在于这会生成一个包含一个项目的列表，而不是项目本身。有关您可以使用的更多方法，请参阅文档`nargs`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:25:47.697

为我工作。

代码：

```
#!/usr/bin/python

import argparse

parser=argparse.ArgumentParser(description='script to run')

parser.add_argument('inputFile', nargs='?', type=argparse.FileType('rt'))
parser.add_argument('inputString', action='store', nargs='?') 
parser.add_argument('-option1', metavar='percent', type=float, action='store')
parser.add_argument('-option2', metavar='outFile1', type=argparse.FileType('w'))
parser.add_argument('-option3', action='store', default='<10')
args = parser.parse_args() 
```

执行：

```
# ./blah.py -h
usage: blah.py [-h] [-option1 percent] [-option2 outFile1] [-option3 OPTION3]
               [inputFile] [inputString]

script to run

positional arguments:
  inputFile
  inputString

optional arguments:
  -h, --help         show this help message and exit
  -option1 percent
  -option2 outFile1
  -option3 OPTION3 
```

您是否忽略了参数列表中的第二行？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:43:47.463

[它按预期工作](http://ideone.com/UjH67L)。`inputString`如果您运行它，则没有`script.py inputfile`（仅给出一个参数，但是`inputString`第二个参数）。

`narg='?'``[]`表示该参数是可选的（它们在帮助消息中被包围）。

# php - 将使用循环创建的数组附加到另 一个数组

> ID：13174976
> 
> 赞同：3
> 
> 时间：2012-11-01T10:18:40.327
> 
> 标签：php, arrays, multidimensional-array

我有一个数组

```
$variables_a = array(
   'a' => $a,
   'b' => $b,
   'c' => $c
); 
```

然后是另一个`$variables_b = array('x','y','z')`，我想像这样循环遍历 B 数组：

```
foreach($variables_b as $var) {
    $variables_c[] = array($var => $$var);
} 
```

然后将 A & C 与`$variables_combined = array_merge($variables_A, $variables_C)`

我希望得到的输出是当`print_r`我

```
Array
(
     [a] => a
     [b] => b
     [c] => c
     [x] => x
     [y] => y
     [z] => z
) 
```

但我得到的是

```
Array
(
     [a] => a
     [b] => b
     [c] => c
     [0] => Array
         (
            [x] => x
         )    
     [1] => Array
         (
            [y] => y
         )    
     [2] => Array
         (
            [z] => z
         )    
) 
```

如果我`$feature_variables[] = array($feature => $$feature)`改为`$feature_variables = array($feature => $$feature)`我得到

```
Array
(
     [a] => a
     [b] => b
     [c] => c
     [z] => z
) 
```

即最后一个项目，`$variables_b`但没有其他项目。那么我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:27:44.083

只需这样做：

```
$newvar = $variables_a;

foreach($variables_b as $var)
{
$newvar[$var] = $var;
} 
```

$newvar 将包含您想要的数组

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:21:42.627

请循环遍历数组 c，如：

```
foreach($variables_b as $var) {
    $variables_c[$var] = $$var;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T10:27:11.940

```
<?php

$variables_a = array(
   'a' ,
   'b' ,
   'c'
);

$variables_b = array('x','y','z');
 $variables_c=array();

foreach($variables_a as $var) {
    $variables_c[$var] =$var;

}

foreach($variables_b as $var) {
    $variables_c[$var] =$var;

}
print_r($variables_c);

?>
============
and test in : "http://codepad.org/1ICZxPIG" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T10:22:55.383

尝试这个，

```
foreach($variables_b as $var) {
   $variables_c[$var] = $$var;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T10:27:23.000

```
$variables_a = array(
    'a' => $a,
    'b' => $b,
    'c' => $c
);
$variables_b = array('x','y','z');

foreach($variables_b as $var) {
$variables_c[$var] = $$var;
}

$variables_combined = array_merge($variables_a, $variables_c);

echo "<pre>";print_r($variables_combined); 
```

# java - java中静态私有类的问题

> ID：13174986
> 
> 赞同：1
> 
> 时间：2012-11-01T10:19:20.387
> 
> 标签：java, oop, encapsulation

如果我有一个java`class SpecificDialog`并且在那个类里面我有一个`public static class Builder`用来构建a的对象那么里面`SpecificDialog`的原因是因为它在逻辑上属于那里，因为它只能用于构建SpecifcDialogs。这是主要原因吗？`Builder``SpecificDialog`

但是如果`Builder`在里面，那么`SpecificDialog`我`SpecificDialog`可以访问`private`. `Builder`这可能是不可取的，因为我可能无意中`Builder's`从外部修改了一些这样的私有字段`SpecificDialog`。

是否对此无能为力，如果没有，我是否应该理解这不是一个大问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:31:55.533

声明内部类的[主要原因](http://www.javaworld.com/javaqa/2000-03/02-qa-innerclass.html)是在结构上分离和重组复杂代码，并提供方法来处理 Java 回调的缺点（例如，作为闭包的等价物，最终将在 Java 8 中可用）。

由于本质上，内部类是外部类的结构部分，对所有成员的完全访问不仅可以，而且是可取的——这实际上使它成为一个有用的工具！如果没有这个特性，内部类的行为将与任何类的行为完全相同——因此没有任何优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:32:06.240

无论您选择何种设计，您总能在不经意间做一些不应该做的事情。使构建器成为它构建的类的静态内部类是一个常见的习惯用法，正是因为外部类可以访问构建器的私有字段。将构建器视为外部类的一个组成部分，就像私有字段或方法一样，并确保类及其构建器按应有的方式运行。

# javascript - 检测链接和未使用的文件以及未使用的 JavaScript

> ID：13174988
> 
> 赞同：24
> 
> 时间：2012-11-01T10:19:26.363
> 
> 标签：javascript, jquery

我刚刚完成了我在 2 年前开始的网站。我一直在尝试新事物，有时包括添加不同的框架或其他外部 JS 文件。

现在我不知道 JS 的哪些链接文件/行没有使用。是否有可以检测这些文件和代码行的工具？这会节省我很多时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-02T01:10:47.503

[这个](https://stackoverflow.com/a/6730450/1267663)答案提供了[谷歌的闭包编译器](https://developers.google.com/closure/compiler)，它在缩小和连接你的 JavaScript 代码的过程中，可以删除“死代码”。

引用编译级别[的文档：](https://developers.google.com/closure/compiler/docs/compilation_levels)

> 使用 ADVANCED_OPTIMIZATIONS 进行编译会删除可证明无法访问的代码。这在与大型库结合使用时特别有用。如果您只使用大型库文件中的几个函数，编译器可以从其输出中删除除这些函数之外的所有内容。

另请参阅[此答案](https://stackoverflow.com/a/3295682/1267663)，其中包含有关 Google 闭包编译器的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-16T08:27:33.173

我有这个需求，所以我创建了一个工具，可以在浏览器端检测未使用的 JS，而不仅仅是从源代码中检测，因此它还可以测试第三方脚本。

它通过在您的计算机上创建一个本地代理来拦截 JavaScript 请求并即时检测这些文件。该工具能够检测出已检测文件的哪些部分已被页面使用，哪些没有。

我把它开源了，你可以在这里找到它：[https](https://github.com/gmetais/unusedjs) ://github.com/gmetais/unusedjs 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:24:37.773

对于这个答案，我不确定它是否有帮助。试试声纳怎么样。Sonar 有一个 javascript 插件，可以检查您的 js 代码质量并列出未使用的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T00:31:02.867

在过去的几周里，我自己一直在研究类似的任务，最终得到了以下[powershell](http://www.powershellpro.com/)查询：

```
PS> Get-ChildItem -Path C:\PathToProject\ -Filter *.as?x -Recurse 
| select-string -pattern "src=""([^""]*.js)""" 
| Select -Expand Matches | Foreach { $_.Groups[1].Value } | select -unique 
```

首先它递归地选择我们项目目录中的所有 .aspx 和 .ascx 文件，然后找到`src`引用 .js 文件的属性值（可能是脚本元素的那些）并跟踪不同的值 - 瞧，你有一个引用的 .js 文件列表在你的项目中！

调整查询以使其适合您的特定项目及其结构是相当简单的。确保不要遍历可能包含过时引用的过时文件。考虑标记差异 - 您过去是否可以对属性值使用单引号，或者在“等于”符号周围留下不必要的空格，或两者兼而有之？您可以从另一个 js 文件中以编程方式或异步方式包含这些文件吗？等等等等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-15T06:27:03.847

虽然这是一个很老的问题，但这可能有助于解决这类问题 - [https://github.com/skpaul/LocateMe](https://github.com/skpaul/LocateMe)

我写这个是为了在我的项目中使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-14T01:57:38.333

在 Google Chrome 开发者工具中，您现在可以在 Sources 选项卡上查看“Coverage”，以按每个文件的百分比，甚至逐行显示未使用的 Javascript 和 CSS。

这是2017 年[该功能的公告。](https://developers.google.com/web/updates/2017/04/devtools-release-notes#coverage)

[![在此处输入图像描述](../Images/d85ceab0f633236a1f33cb34be4998b6.png)](https://i.stack.imgur.com/LKzNa.png)

# java - 使用另一个类的方法，java.language.String

> ID：13174993
> 
> 赞同：0
> 
> 时间：2012-11-01T10:19:46.507
> 
> 标签：java, ms-access, methods

我有两个课程：

**MAIN**和**DBCONNECT**

**DBCONNECT**具有所有编码，包括连接、插入和更新数据库/表的方法。

**MAIN**是创建我的 GUI 并使用 DBCONNECT 类的地方。

在我的 DBCONNECT 类中，我创建了一个将输入信息写入表的方法。

```
String sqlInsert1 = "INSERT INTO Drivers (IDNumber, FirstName, LastName) VALUES " + Id +"," + FirstName+"," + Surname;
String sqlInsert2 = "INSERT INTO Offences(IDNumber, SpeedLimit, DriverSpeed, SeatBelt, DrunkenDriving, DriversLicense) VALUES" + Id + SpeedLimit + DriversSpeed + Seatbelt + DrunkenDriving + License;
String sqlInsert3 = "INSERT INTO DriverPoints(IDNumber, Points) VALUES" + Id + Points;

 public void writeToDB(String sqlInsert1, String sqlInsert2, String sqlInsert3)
    {
        try
        {
            Statement st = conn.createStatement();
            st.executeUpdate(sqlInsert1);
            st.executeUpdate(sqlInsert2);
            st.executeUpdate(sqlInsert3);
        }
        catch(Exception e)
        {
            JOptionPane.showMessageDialog(null, "Error: Could not read from database");
        }
    } 
```

在我的 MAIN 类中，我想在单击***Save***按钮时使用此方法

```
public void actionPerformed(ActionEvent ae)
{
    if (ae.equals(save))
    {
        database.writeToDB();
    }
} 
```

它一直给我一个错误

```
required:java.language.String,java.language.String,java.language.String 
```

请让我知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:23:09.707

你需要这样写：

```
public void actionPerformed(ActionEvent ae)
{
    if (ae.equals(save))
    {
        String sqlInsert1 = "INSERT INTO Drivers (IDNumber, FirstName, LastName) VALUES " + Id +"," + FirstName+"," + Surname;
        String sqlInsert2 = "INSERT INTO Offences(IDNumber, SpeedLimit, DriverSpeed, SeatBelt, DrunkenDriving, DriversLicense) VALUES" + Id + SpeedLimit + DriversSpeed + Seatbelt + DrunkenDriving + License;
        String sqlInsert3 = "INSERT INTO DriverPoints(IDNumber, Points) VALUES" + Id + Points;

        database.writeToDB(sqlInsert1,sqlInsert2,sqlInsert3);
    } 
```

这是因为您的方法`writeToDB`接受三个`String`参数，并且在代码中调用它时没有提供任何参数。

并且您在`writeToDb`方法之前创建的字符串变量与在方法中声明为参数的变量不同`writeToDB`。

看这个问题就知道[参数和参数的区别](https://stackoverflow.com/questions/3176310/difference-between-parameter-and-argument)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:25:39.423

据我了解

没有确切的函数调用 writeToDB(); 因为`writeToDB()`是用参数定义的，但在函数调用中使用了空参数。

而不是这个

```
 database.writeToDB(); 
```

应该使用类似这样的东西，使用这些变量并在 actionPerformed() 中初始化

```
 database..writeToDB(sqlInsert1,sqlInsert2,sqlInsert3); 
```

您还错过了值后插入语句中的括号

例子：

```
 sqlINsert1="INSERT INTO Tablename(ID, StreetName, City)Values(,))"; 
```

# r - 在 ggplot2 中以超过 x 作为参数绘制函数

> ID：13174998
> 
> 赞同：5
> 
> 时间：2012-11-01T10:20:04.470
> 
> 标签：r, function, ggplot2

我想画一个幂律函数，它取决于三个参数：`x`、`a`和`gamma`。该函数如下所示：

```
powerlaw <- function(x, a, gamma){
   a*(x**(-gamma))
} 
```

现在我想绘制它，但我无法弄清楚如何指定`a`并`gamma`告诉 R 使用选择的范围`x`。我试过这个：

```
require(ggplot2)
qplot(c(1,10), stat="function", fun=powerlaw(x, a=1, gamma=1), geom="line") 
```

但它说

```
Error in (x^(-gamma)): x is missing 
```

当然，以下代码通过修复`a`and来工作`gamma`：

```
powerlaw1 <- function(x){
   1*(x**(-1))
}
qplot(c(1,10), stat="function", fun=powerlaw1, geom="line") 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:32:48.750

您需要单独指定参数：

```
qplot(x=c(1,10), stat="function", 
      fun=powerlaw, geom="line", 
      arg=list(a=1, gamma=1)) 
```

有关`?stat_function`更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:37:44.333

我只想创建一个返回`data.frame`适当的函数`ggplot2`：

```
power_data = function(x, a, gamma) {
   return(data.frame(x = x, y = a * (x**(-gamma))))
}

> power_data(1:10, 1, 1)                                           
    x         y                                                    
1   1 1.0000000                                                    
2   2 0.5000000                                                    
3   3 0.3333333                                                    
4   4 0.2500000                                                    
5   5 0.2000000                                                    
6   6 0.1666667                                                    
7   7 0.1428571                                                    
8   8 0.1250000                                                    
9   9 0.1111111
10 10 0.1000000 
```

并制作一个情节（请注意，我使用更紧密的`x`系列来获得更平滑的线条）：

```
dat = power_data(seq(1,10,0.01), 1, 1)
qplot(dat$x, dat$y, geom = "line") 
```

![在此处输入图像描述](../Images/23b95cc687d3e74b091df56d256ed2f5.png)

# c++ - C ++中的一种反射

> ID：13174999
> 
> 赞同：4
> 
> 时间：2012-11-01T10:20:05.257
> 
> 标签：c++, oop, reflection

我正在尝试`reflection`在 C++ 中实现限制，以便我能够调用`getter`和`setter`存储的对象。这是我到目前为止所做的

## 主要代码

```
#ifndef REFLECTION_MANAGER_HPP_
#define REFLECTION_MANAGER_HPP_

#include <iostream>
#include <string>

template <class Owner, class IOType> 
class SingleProperty {
public:
  typedef IOType    (Owner::*get_func_t)(); 
  typedef void    (Owner::*set_func_t)( IOType Value );

  inline SingleProperty(get_func_t Getter, set_func_t Setter ): m_Getter(Getter), m_Setter(Setter) {
  }
  get_func_t        m_Getter;
  set_func_t        m_Setter;
};

class ReflectionManager {
public:
  static ReflectionManager& Instance() {
    static ReflectionManager instance;
    return instance;
  }

  template <class Owner, class IOType> 
  void RegisterProperty(  std::string class_name, 
                          std::string property_name, 
                          typename SingleProperty<Owner, IOType>::get_func_t GetFn, 
                          typename SingleProperty<Owner, IOType>::set_func_t SetFn)  {
    SingleProperty<Owner, IOType>* pProperty = new SingleProperty<Owner, IOType>(GetFn, SetFn );
    m_class_memeber_map[class_name][property_name] = pProperty;
  }

  template <class Owner> void put(std::string key, void *value, std::string class_name = NULL ) {
    Owner *ptr = reinterpret_cast<Owner*>(value);
    std::map<std::string, std::map< std::string, void*> >::iterator pos = m_class_memeber_map.find(class_name);
    if ( pos == m_class_memeber_map.end()) {
      return; // handle the error
    }
    for ( std::map< std::string, void*>::iterator itr = pos->second.begin(); itr != pos->second.end(); ++itr ) {
      SingleProperty<Owner,std::string> *ptr = (SingleProperty<Owner,std::string> *)itr->second;
      (ptr->*m_Getter)();
    }
  }
private:
  ReflectionManager() {
  }
  ReflectionManager(ReflectionManager const&); 
  void operator=(ReflectionManager const&);

  std::map<std::string, std::map< std::string, void*> > m_class_memeber_map;

};

#endif 
```

## 调用代码

这将被调用如下

```
ReflectionManager::Instance().RegisterProperty<Person, std::string>("Person", "m_name", &Person::GetName, &Person::SetName);
  ReflectionManager::Instance().RegisterProperty<Person, std::string>("Person", "m_dept", &Person::GetDept, &Person::SetDept);
  ReflectionManager::Instance().RegisterProperty<Person, int>("Person", "m_age", &Person::GetAge, &Person::SetAge);

  Person p1;
  p1.SetName("Avinash");
  p1.SetDept("Gemfire Native Client");
  p1.SetAge(34);

  ReflectionManager::Instance().put<Person>( "key1", &p1, "Person"); 
```

我已将`getter`and存储`setter`在 中`map`，但在`put`函数中我无法调用它，因为我不知道类型。

## 问题

基本上我现在如何实现 for 循环`for ( std::map< std::string, void*>::iterator itr = pos->second.begin(); itr != pos->second.end(); ++itr )`，我想在其中迭代每个元素并调用相应的`getter`和`setter`方法。

我试过这个但不起作用。

```
(ptr->*((itr->second).m_Getter))(); 
```

**我发现的另一种方法将不胜感激**

```
 template <class Owner, class IOType> 
  void RegisterProperty(  std::string class_name, 
    std::string property_name, 
    typename SingleProperty<Owner, IOType>::get_func_t GetFn, 
    typename SingleProperty<Owner, IOType>::set_func_t SetFn)  {

      SingleProperty<Owner, IOType>* pProperty = new SingleProperty<Owner, IOType>(GetFn, SetFn );
      m_class_memeber_map[class_name][property_name] = pProperty;
      m_property_type_map[class_name].push_back(std::make_pair(property_name, TypeName<IOType>::get()));

  }

  template <class Owner> void put(std::string key, void *value, std::string class_name = NULL ) {
    Owner *pOwner  = reinterpret_cast<Owner*>(value);
    std::map<std::string, std::map< std::string, void*> >::iterator pos = m_class_memeber_map.find(class_name);

    std::vector<std::pair<std::string, std::string> > vector_property_map = m_property_type_map.find(class_name)->second;
    for ( std::vector<std::pair<std::string, std::string> >::iterator itr = vector_property_map.begin();itr != vector_property_map.end(); ++itr ) {
        std::map< std::string, void*>::iterator pos_getter_setter_fn = pos->second.find(itr->first);
        if ( itr->second == "int" ) {
          SingleProperty<Owner,int> *ptr = (SingleProperty<Owner, int> *)pos_getter_setter_fn->second;
          (pOwner->*(ptr->m_Getter))();
        } else if ( itr->second == "string" ) {
          SingleProperty<Owner,std::string> *ptr = (SingleProperty<Owner, std::string> *)pos_getter_setter_fn->second;
          (pOwner->*(ptr->m_Getter))();
        } 
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:09:51.620

这些指针是**指向函数成员**类型的指针`Owner`：

```
get_func_t m_Getter;
set_func_t m_Setter; 
```

为什么你试图称他们为`SingleProperty<>`指针作为对象？

```
Owner *ptr = reinterpret_cast<Owner*>(value);
for ( std::map< std::string, void*>::iterator itr = pos->second.begin();
   itr != pos->second.end(); ++itr )
{
  SingleProperty<Owner,std::string> *ptr = 
      (SingleProperty<Owner,std::string> *)itr->second;
  // Here is the flaw, you are trying to call m_Getter from SingleProperty object
  // pointer, but it must be Owner pointer!
  (ptr->*m_Getter)();
} 
```

此外，您必须正确地将属性类型作为模板参数传递`IOType`。我不确定你想用这个函数做什么，以及用丢弃的返回类型调用 getter 的效果是什么，但从抽象语法的角度来看，它应该是这样的：

```
template <class Owner, class IOType> void put(const std::string& key, Owner* value,
    const std::string& class_name = "")
{
    std::map<std::string, std::map<std::string, void*> >::iterator pos =
        m_class_memeber_map.find(class_name);

    if(pos == m_class_memeber_map.end())
    {
       return; // handle the error
    }

    for(std::map<std::string, void*>::iterator itr = pos->second.begin();
       itr != pos->second.end(); ++itr)
    {

        SingleProperty<Owner,IOType> *ptr = 
          static_cast<SingleProperty<Owner, IOType>*>(itr->second);
        (value->*(ptr->m_Getter))(); // return IOType discarded?!?!
    }
} 
```