# StackOverflow 问答 15344000-15344999

# python - 从 python __exit__ 块中重新分配异常

> ID：15344002
> 
> 赞同：17
> 
> 时间：2013-03-11T16:46:59.927
> 
> 标签：python, exception-handling, with-statement

从`__exit__`自定义游标类的块中，我想捕获一个异常，这样我就可以反过来抛出一个更具体的异常。这样做的正确方法是什么？

```
class Cursor:
    def __enter__(self):
        ...

    def __exit__(self, ex_type, ex_val, tb):
        if ex_type == VagueThirdPartyError:
            # get new more specific error based on error code in ex_val and
            # return that one in its place.
            return False # ?
        else:
            return False 
```

在块内提出特定异常`__exit__`似乎是一种黑客行为，但也许我想多了。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-11T16:50:47.053

正确的过程是在处理程序内部引发新的异常`__exit__`。

但是，您不应该*引发*传入的异常；为了允许上下文管理器链接，在这种情况下，您应该只从处理程序返回一个错误的值。然而，提出你自己的例外是非常好的。

注意，最好使用身份测试`is`来验证传入异常的类型：

```
def __exit__(self, ex_type, ex_val, tb):
    if ex_type is VagueThirdPartyError:
        if ex_val.args[0] == 'foobar':
            raise SpecificException('Foobarred!')

        # Not raising a new exception, but surpressing the current one:
        if ex_val.args[0] == 'eggs-and-ham':
            # ignore this exception
            return True

        if ex_val.args[0] == 'baz':
            # re-raise this exception
            return False

    # No else required, the function exits and `None` is  returned 
```

您还可以使用`issubclass(ex_type, VagueThirdPartyError)`来允许特定异常的子类。

# scope - 从函数中定义全局

> ID：15344009
> 
> 赞同：1
> 
> 时间：2013-03-11T16:47:42.323
> 
> 标签：scope, macros, scheme, racket

我需要一些函数，其中包括定义一个新的全局符号。这样我就可以像这样使用它：

```
(define (func-prototype symbol value comment)
  (define symbol value) ; this should somehow be reformulated
  (format "~a=~a   !~a\n" symbol value comment))

(define string-list (map func-prototype
                         '((s1 1 "first value")
                           (s2 20 "second value")
                           (s3 300 "third value)))) 
```

并能够得到以下结果：

```
> string-list
'("s1=1  !first value\n"
  "s2=20  !second value\n"
  "s3=300  !third value\n")
> s1
1
> s2
20
> s3
300 
```

这可以作为一个函数实现，还是只能在宏的帮助下实现？您能否建议任何可能的实现或至少提供一些可能有用的提示/参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:54:07.750

我会重新考虑一般方法，使其更简单。我的建议：定义一个全局哈希表并在函数内部添加绑定，例如：

```
(define value-map (make-hash))

(define (func-prototype symbol value comment)
  (hash-set! value-map symbol value)
  (format "~a=~a   !~a\n" symbol value comment)) 
```

像这样使用它：

```
(define string-list
  (map (lambda (lst)
         (apply func-prototype lst))
       '((s1 1   "first  value")
         (s2 20  "second value")
         (s3 300 "third  value"))))

string-list
=> '("s1=1   !first  value\n"
     "s2=20   !second value\n"
     "s3=300   !third  value\n") 
```

在需要引用哈希表中的符号之一的地方，请执行以下操作：

```
(define (get key)
  (hash-ref value-map key))

(get 's1)
=> 1
(get 's2)
=> 20
(get 's3)
=> 300 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:41:51.007

首先，考虑您是否真的想要这样做，或者不同的解决方案（如哈希表）是否也可以工作。

您可以使用该过程通过[反射和动态评估](http://docs.racket-lang.org/guide/reflection.html)`eval`来做到这一点。

```
;; define-variable-with-value! : symbol any -> void
(define (define-variable-with-value! name value)
  (eval `(define ,name (quote ,value)))) 
```

`quote`很重要；否则，您可能会将*值*重新解释为要评估的*表达式。*要查看差异，请考虑示例

```
(define-variable-with-value! 'x (list 'error "kaboom")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T18:48:56.343

一般来说，不可能以您描述的方式完成您想要完成的事情。您唯一的希望是将内容写入文件，然后`load`将该文件写入交互式会话。但即便如此。

在方案中，您不能引入顶级名称，例如您想要`s1`的`s2`、 和`s3`，除非在顶级。为此，您可以将宏定义为：

```
>(define-syntax define-foo
  (syntax-rules ()
    ((_ name value)
     (define name value))))

>(define-foo s1 1)
<undefined>
> s1
1 
```

如果您尝试在函数中使用该宏，这不是骰子，因为函数的主体*必须*以表达式结尾，并且任何定义形式（如上述宏将扩展成的形式）都将成为局部变量。那是：

```
(define (func-prototype name value comment)
   (define-foo name value)
   name)

>(func-prototype 's1 1 "com")
1
> s1
<error> 
```

如果您的字符串列表是常量，您可以采用的一种方法是这样的：

```
> (define-syntax declare-variables
    (syntax-rules ()
      ((_ (name value comment) ...)
       (begin
         (define name value)
         ...))))

> (declare-variables (s1 1 "com") (s2 20 "com") (s3 300 "com"))
> s1
1 
```

这样就完成了（我已经忽略了使用'comment'）但是，正如我所说，需要一个编译时字符串列表。

您可能认为可行但行不通的一种可能性是`eval`用作：

```
 (eval '(define s1 1) (environment ...)) 
```

但 'eval' 仅适用于表达式，不适用于声明。这让我有可能回到“加载”。

# php - 使用 Auth 登录，但除了登录名和密码之外还有额外的字段，使用 Cakephp 1.3

> ID：15344011
> 
> 赞同：0
> 
> 时间：2013-03-11T16:47:48.570
> 
> 标签：php, cakephp, authentication, cakephp-1.3

我正在尝试使用 Cakephp 1.3 中的 Auth 组件进行这种登录，但正如您所知，该组件只使用两个字段（用户和密码）。那么有谁知道如何获得这个登录屏幕的解决方案，就像图片中的那个一样，这是一个登录字段，另一个是密码，第三个字段是选择公司的哪个子公司（子公司 1，子公司 2，... ) 用户将被记录。先谢谢了。

![我想做什么样的登录](../Images/d405952e67200c89d24b134a0a0b5d39.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:54:00.620

例如，您正在使用用户控制器，而子公司与用户没有关系，只需告诉我们，以便

我们创建`login.ctp`为

```
<?php echo $this->Form->create('User', array('action' => 'login'));
echo $this->Form->input('username');
echo $this->Form->input('password');
echo $this->Form->input('subsidiary', array('options' => array('subsidiary 1' => 'subsidiary1', 'subsidiary2' => 'subsidiary2'),'label'=>__('subsidiaries')
    ));
echo $this->Form->end(__('Submit')); 
```

然后在您的用户控制器中

```
public function login() {
    if ($this->request->is('post')) {
    if ($this->Auth->login()) {
    $subsidiary=$this->request->data;
    $_SESSION['Auth']['User']['subsidiary']=$subsidiary['User']['subsidiary'];
    $this->redirect($this->Auth->redirect());
    } else {
    $this->Session->setFlash(__('Invalid username or password, try again'));
    }
    }
} 
```

现在，子公司是记录的用户数据的一部分，它存储为会话身份验证用户，这是一种解决方案，也许可以使用其他甚至更好的解决方案。

# java - JCommander：是否可以在@Parameter 中使用多个验证器？

> ID：15344012
> 
> 赞同：2
> 
> 时间：2013-03-11T16:47:52.890
> 
> 标签：java, command-line-arguments

我正在使用[JCommander](http://jcommander.org/ "指挥官")

Fe 我有一个 Dir 路径参数和 File 路径参数。我想将它们存储在`File outDir`和`File inFile`相应的变量中。我想创建 3 个验证器。`PathExists`,`FileReadable`和`IsDirectory`. 第一个我将使用`PathExists`&&`IsDirectory`和第二个`PathExists`&& `FileReadable`。
不幸的是，文档没有描述这种情况。

# c# - C# 单元测试：遍历预期结果列表

> ID：15344015
> 
> 赞同：2
> 
> 时间：2013-03-11T16:47:53.953
> 
> 标签：c#, unit-testing, data-structures

如何参数化 C# 单元测试，以便测试不是一系列类似的断言语句，而是遍历参数列表（包括预期值）并将结果与​​预期值进行比较？

用例：

*   这个特定的单元测试需要检查一个 XML 文档并检查一个 XML 元素名称列表，验证文档是否包含这些元素并且它们的值是否符合预期

测试方法的断言部分由一系列断言组成，如下所示：

```
var width = output.Element(namespace + "width");
Assert.IsNotNull(width);
Assert.AreEqual(width.Value, "600"); 
```

我想避免冗余代码，而是用不同的值迭代相同的代码。如何在断言检查中定义要迭代的数据结构？

所需的数据结构是元组列表（在这种情况下包含类型（XName，字符串）的元素）。如何在 C# 中表达它？是否有一些标准的单元测试工具可以在这里提供帮助？

更多信息：

*   使用 Visual Studio 单元测试框架 (Microsoft.VisualStudio.TestTools.UnitTesting) 和 .Net 3.5
*   我**不需要**使用各种参数值运行用例本身，只需要它的断言部分（上面引用的代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:50:05.600

Nunit 有一个叫做 TestCases 的东西，你可以通过一个属性访问它。这听起来像你要求的东西：

[http://nunit.org/?p=testCase&r=2.5](http://nunit.org/?p=testCase&r=2.5)

**更新：**

此答案是在指定正在使用的框架的问题更新之前提供的

**更新**

这个问题看起来也有相关性：MS Test Equivalent (or lack of)

[MSTest 是否与 NUnit 的 TestCase 等效？](https://stackoverflow.com/questions/1010685/does-mstest-have-an-equivalent-to-nunits-testcase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:05:05.133

似乎您只需要提取一种方法即可满足您的文字要求：

```
public void AssertElementExistsWithValue(XmlElement parent, string nameSpace, string childName, string value)
{
    var child = parent.Element(namespace + childName);
    Assert.IsNotNull(child);
    Assert.AreEqual(child.Value, "600");    
} 
```

我通常使用 Linq Xml 类，所以如果我有编译错误，我深表歉意。你会明白要点的，我敢肯定。

当我测试xml格式时，我通常会写两个测试。第一个是往返测试：将实体写入 xml，读回，断言它们是相同的。这是一个很好的面向值的测试，如果您更改元素的名称，它不会中断。

我编写的第二个测试是准确地固定 XML 格式的测试。我从格式正确的对象中获取 xml，并将其用作测试中的常量，并断言创建了正确的对象。由于实现细节原因，该测试失败，但没关系。如果我破坏了与数据格式的向后兼容性，它会迫使我注意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:57:41.720

既然您说您正在使用 mstest，这里有一些来自[MSDN](http://msdn.microsoft.com/en-us/library/ms182527.aspx)和[独立博客](http://toddmeinershagen.blogspot.in/2011/02/creating-data-driven-tests-in-ms-test.html)的资源，这些资源说明了使用 Microsoft 的单元测试框架进行数据驱动测试。

总之，您需要`DataSource`在您的中指定一个属性`TestMethod`并将其指向数据源。它可以是 CSV 或 SQL Server CE。

# crystal-reports - 时间乘以成本的水晶公式

> ID：15344016
> 
> 赞同：0
> 
> 时间：2013-03-11T16:47:57.350
> 
> 标签：crystal-reports

我需要一个将 {table.time} * {table.cost} 相乘的公式。这是我尝试过的：tonumber ({@timeformat}) * {Table.cost}

```
Formula for {@timeformat}
whileprintingrecords;

numberVar hrs;
numberVar min;
stringVar hhmm;

hrs := Remainder(Truncate({table.time}/60),60);
min := Remainder({table.time},60);

hhmm := totext(hrs,"00") + ":" + totext(min,"00"); 

hhmm 
```

当我简单地这样做时，我在运行报告时从 Crystal 收到一个字符串错误。字符串是非数字的。任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:51:39.127

您的函数`{@timeformat}`正在生成看起来像`02:30`. 它们对可读性很有用，但它们不是数字，也不能相乘。

相反，请尝试：

```
{table.time} * {table.cost} 
```

# java - 将命名空间添加到根节点会导致它添加命名空间以添加子节点

> ID：15344019
> 
> 赞同：1
> 
> 时间：2013-03-11T16:48:10.417
> 
> 标签：java, dom4j

```
String retVal = null;
Document document = DocumentHelper.createDocument();
Element documentRoot = document.addElement(LOAD_EVENT);
Element header = documentRoot.addElement(HEADER);
Element body = documentRoot.addElement(DOCUMENTS);
Namespace namespace =
new Namespace("", "http://www.acme.com/LoadEvent");
documentRoot.add(namespace); 
```

这导致 xmlns 也被添加到 header 和 body 节点。如何只将 xmlns 添加到 loadEvent 的根节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:57:33.777

是的，这可能会令人困惑。当文档表示为元素树和其他节点类型时，每个元素都属于一个特定的命名空间，独立于任何其他元素节点，甚至与其祖先。这适用于所有“主要的”面向 XML 节点的 API：s（DOM、JDOM、DOM4J 和 XOM）。

由于您将 LOAD_EVENT 元素创建为没有命名空间，但后来向节点添加了默认命名空间声明，DOM4J 没有选择，只能更改 LOAD_EVENT 的命名空间（这是 DOM4J 允许非常混乱的操作的地方，恕我直言）。但是，子节点仍然没有命名空间（或空命名空间）。

当您稍后将树序列化为 XML 时，在根节点声明的默认命名空间必须为每个子节点“未声明”。

我的猜测是你想要这样的东西：

```
 String NS = "http://www.acme.com/LoadEvent";
    Document document = DocumentHelper.createDocument();
    Element documentRoot = document.addElement("load", NS);
    Element header = documentRoot.addElement("header", NS);
    Element body = documentRoot.addElement("documents", NS); 
```

也就是说，每个元素都属于 NS 命名空间。

换句话说：在面向树的 API:s 中，元素节点不继承其父节点的命名空间。每个元素都必须使用正确的命名空间（如果有的话）创建。

# c# - 如何获取已按下的文本框的位置？

> ID：15344022
> 
> 赞同：0
> 
> 时间：2013-03-11T16:48:13.863
> 
> 标签：c#, .net, wpf

我正在 WPF 中编写数独游戏，并在运行时在画布上制作 81 个文本框：

```
public partial class Test : Window
    {
        private TextBox[,] texts = new TextBox[9, 9];
        GameBoard board = new GameBoard();

    public Test(string path)
    {
        InitializeComponent();
        Initialization_text();
    }

    void Initialization_text()
    {
        for (int i = 0; i < texts.GetLength(0); i++)
        {
            for (int j = 0; j < texts.GetLength(1); j++)
            {
                texts[i, j] = new TextBox();
                texts[i, j].Name = "txt" + i + j;
                texts[i, j].Width = 40;
                texts[i, j].Height = 40;
                texts[i, j].MaxLength = 1;
                texts[i, j].FontSize = 22;
                texts[i, j].FontWeight = FontWeights.Bold;
                texts[i, j].Foreground = new SolidColorBrush(Colors.DimGray);
                texts[i,j].TextAlignment = TextAlignment.Center;
                Canvas.SetLeft(texts[i, j], (i+1)*40);
                Canvas.SetTop(texts[i, j], (j+1)*40);
                canvas1.Children.Add(texts[i, j]);
            }
        }
    } 
```

我需要获取用户输入数字以检查值的文本框的位置，但我无法编写调用 TextBoxKeyDown 的方法，因为它是在运行时生成的

但如果我写这个方法：

```
private void canvas1_KeyDown(object sender, KeyEventArgs e)
        {
            if (sender.GetType().Name == "TextBox")//the sender is canvas
            {

            }
        } 
```

如何获取用户输入数字的文本框？请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:14:39.060

行。删除所有代码并重新开始。

这就是你在 WPF 中做数独板的方式：

XAML：

```
<Window x:Class="WpfApplication4.Window17"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window17" Height="300" Width="300">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Rows="9" Columns="9"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemContainerStyle>
            <Style>
                <Setter Property="Grid.Row" Value="{Binding Row}"/>
                <Setter Property="Grid.Column" Value="{Binding Column}"/>
            </Style>
        </ItemsControl.ItemContainerStyle>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBox Text="{Binding Value}" VerticalAlignment="Stretch" FontSize="20" TextAlignment="Center"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

代码背后：

```
using System.Collections.Generic;
using System.Windows;
using System.ComponentModel;

namespace WpfApplication4
{
    public partial class Window17 : Window
    {
        public Window17()
        {
           InitializeComponent();

           var random = new Random();

           var board = new List<SudokuViewModel>();

           for (int i = 0; i < 9; i++)
           {
               for (int j = 0; j < 9; j++)
               {
                   board.Add(new SudokuViewModel() {Row = i, Column = j,Value = random.Next(1,20)});
               }
           }

           DataContext = board;            
       }
   }
} 
```

视图模型：

```
 public class SudokuViewModel:INotifyPropertyChanged
    {
        public int Row { get; set; }

        public int Column { get; set; }

        private int _value;
        public int Value
        {
            get { return _value; }
            set
            {
                _value = value;
                NotifyPropertyChange("Value");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void NotifyPropertyChange(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));        
        }

    } 
```

如您所见，我绝不会在代码中创建或操作 UI 元素。这在 WPF 中是完全错误的。您必须学习 MVVM，并了解[UI 不是数据。数据就是数据。界面就是界面](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)

现在，每当您需要对 TextBoxes 中的 Value 进行操作时，只需对`public int Value`ViewModel 中的属性进行操作即可。您的应用程序逻辑和 UI 必须完全解耦。

只需将我的代码复制并粘贴到 a 中`File -> New Project -> WPF Application`，然后自己查看结果。这是它在我的电脑中的样子：

![在此处输入图像描述](../Images/af46df018bdd5eeb489b6456956eb661.png)

**编辑：**

我已修改示例以在更改值时调用方法。

请理解，您不应针对 WPF 中的 UI 进行操作，而应针对 DATA。你真正关心的是数据（ViewModel），而不是 UI 本身。

```
using System.Collections.Generic;
using System.Windows;
using System.ComponentModel;
using System;

namespace WpfApplication4
{
    public partial class Window17 : Window
    {
        public List<SudokuViewModel> Board { get; set; } 

        public Window17()
        {
            InitializeComponent();

            var random = new Random();

            Board = new List<SudokuViewModel>();

            for (int i = 0; i < 9; i++)
            {
                for (int j = 0; j < 9; j++)
                {
                    Board.Add(new SudokuViewModel()
                                  {
                                      Row = i, Column = j,
                                      Value = random.Next(1,20),
                                      OnValueChanged = OnItemValueChanged
                                  });
                }
            }

            DataContext = Board;
        }

        private void OnItemValueChanged(SudokuViewModel vm)
        {
            MessageBox.Show("Value Changed!\n" + "Row: " + vm.Row + "\nColumn: " + vm.Column + "\nValue: " + vm.Value);
        }
    }

    public class SudokuViewModel:INotifyPropertyChanged
    {
        public int Row { get; set; }

        public int Column { get; set; }

        private int _value;
        public int Value
        {
            get { return _value; }
            set
            {
                _value = value;
                NotifyPropertyChange("Value");

                if (OnValueChanged != null)
                    OnValueChanged(this);
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void NotifyPropertyChange(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));        
        }

        public Action<SudokuViewModel> OnValueChanged { get; set; }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:56:48.643

使用附加的事件处理程序

```
AddHandler(TextBox.KeyDownEvent, new RoutedEventHandler(MyFieldClick)); 
```

这将为调用元素内的每个文本框调用。因此，如果您将它放在窗口中，每个文本框 KeyDownEvent 都会被修补到 MyFieldClick 事件处理程序方法。在这种情况下，发送者是最初发送事件的文本框。

但我同意 HighCore，你应该更多地使用 WPF。在您的情况下，我看到 ItemControls 和一个网格或更好的是 UniformGridPanel。

顺便说一句[TextChanged](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.textchanged.aspx)可能更适合您的情况。

# php - 使用 AJAX 将外部 PHP 加载到 Wordpress div 的简单方法

> ID：15344025
> 
> 赞同：1
> 
> 时间：2013-03-11T16:48:26.277
> 
> 标签：php, jquery, ajax, wordpress, jplayer

我正在尝试将包含它自己的样式表和脚本（html/php、html5 视频播放器 = jplayer）的完整 PHP 文件加载到我放置在 Wordpress 模板中的 div 中。

我已经看到了一些如何将元素从 Wordpress 页面加载到 div 标签中的示例，但由于某种原因，它们对我不起作用。

到目前为止，我已经尝试过： [需要一些关于 jQuery AJAX 请求将 PHP 文档加载到 DIV 容器中的帮助](https://stackoverflow.com/questions/4006344/need-some-help-with-jquery-ajax-request-loading-a-php-document-into-a-div-contai?rq=1) 以及 [如何使用 AJAX 加载 PHP 脚本？](https://stackoverflow.com/questions/5599385/how-to-load-a-php-script-using-ajax?rq=1)

但是，当在浏览器中加载 Wordpress 模板时，两者都没有导致外部 php 文件实际显示在 div 中。

我要加载的页面位于 Wordpress 根目录中，在它自己的目录中，其中包含所需的 css 和 js 文件（例如[http://mylocaltest.com/localWordpressRoot/vizPlayer/fileToBeLoaded.php](http://mylocaltest.com/localWordpressRoot/vizPlayer/fileToBeLoaded.php)）

这是我在 Wordpress 模板页面的 div 中加载的脚本：

```
 <?php
 /*
  * template name: Global Headlines
  */
 global $isBlog;
 $isBlog = true;
 get_template_part('page', 'config');
 get_header(); ?>

 <div id="vizPlayer" style="left:0;top:75px;width:50%; height:90%; margin:0; padding:0; background:#000; position:fixed; z-index:51">
    <script type="text/javascript">
 function loadContent(id) {

     $.ajax({
        type: "GET",
        url: "/vizPlayer/fileToBeLoaded.php",
        dataType: 'html',
        data: {param: id},

        success: function(html){
                  $("#vizPlayer").html(html);
        },

        error: function(){
            },

        complete: function(){
        }
     });

 }                      
        </script>

 </div> 
```

任何提示将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:06:46.243

我已经决定使用 Object 标签（下例），但我仍然对使用上面的 AJAX 方法感兴趣！

```
 <div id="movieContainer" style="left:0;top:75px;width:50%; height:90%; margin:0; padding:0; background:#000; position:fixed; z-index:51">
 <object width="100%" height="100%" id="videoTut" name="videoTut" type="text/html" data="http://localtestserver.com/localTesting/vizicast/index.php">
 </object>
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:53:06.637

如果您在 javascript 中使用绝对 url，则该 url 是相对于网络服务器的根目录的，因此：

```
url: "/vizPlayer/fileToBeLoaded.php" 
```

将加载：

```
http://mylocaltest.com/vizPlayer/fileToBeLoaded.php 
```

代替：

```
http://mylocaltest.com/localWordpressRoot/vizPlayer/fileToBeLoaded.php 
```

您应该将本地 WordPress 根目录添加到路径中。

# opencv - 有没有办法对 OpenCV 的传感器尺寸做出一个好的估计？

> ID：15344034
> 
> 赞同：5
> 
> 时间：2013-03-11T16:48:34.917
> 
> 标签：opencv

我已经使用 OpenCV 提取了一个相机校准矩阵，需要将焦距转换为 mm。似乎最简单的方法是通过[calibrationMatrixValues()](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#calibrationmatrixvalues)。为此，我需要提供apertureWidth 和apertureHeight，它们实际上是物理传感器的宽度和高度。[我使用2011 年中期 27" iMac](http://support.apple.com/kb/sp623)的内置“FaceTime HD”相机拍摄了所有照片。我无法找到相机的任何技术规格。虽然我已经向[Apple Stackexchange](https://apple.stackexchange.com/questions/84974/whats-the-aperture-or-sensor-size-for-a-facetime-hd-camera)询问了确切的传感器大小，有没有办法进行任何良好的估计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:36:59.457

如果您的相机可以保存 jpg 图像，请尝试查看 EXIF 标头是否包含您搜索的内容，并验证它是否提供了准确的值。

# php - PHP/MYSQL 延迟更新查询

> ID：15344039
> 
> 赞同：2
> 
> 时间：2013-03-11T16:49:00.563
> 
> 标签：php, mysql, codeigniter

我正在使用 codeigniter 开发新闻门户，它在我的第一个托管服务提供商上运行良好，但是在我搬到新的托管服务提供商之后，我开始遇到这个更新查询问题。

我正在使用类似于以下功能的文章阅读计数器，在我的新主机中，它延迟了 10 秒以上，因此如果在关闭时间内有多个阅读器，计数器就会出现问题。

这不是 mysql 问题，因为我已经使用直接查询 mysql 对其进行了测试，一切似乎都很好。

有人知道我为什么会有这个吗？

```
$a=mysql_query("update tbarticle set a_views=a_views+1 where a_id='25405'");
$result = mysql_query("SELECT a_views FROM tbarticle where a_id='25405'") or die(mysql_error());  

$row = mysql_fetch_array( $result );
echo $row['a_views']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:59:32.940

如果您加载原始帖子评论中引用的页面：

[http://tanyamath.com/apus.php](http://tanyamath.com/apus.php)

你看到一个计数。如果您刷新浏览器（反复按 F5），则计数器在 10 到 20 秒内不会更改或刷新。

当您连接到 MySQL 时，如果您使用`mysql_connect()`而不是`mysql_pconnect()`，您可能会遇到试图打开连接的繁忙服务器。您之前可能没有看到此问题，因为该服务器不像您的新主机服务器那么繁忙。

尝试使用`mysql_pconnect()`，看看是否有帮助。

# php - APC 让 PHP 5.3 变慢？

> ID：15344046
> 
> 赞同：2
> 
> 时间：2013-03-11T16:49:26.163
> 
> 标签：php, apache, apc

我最近了解了 APC（我知道，我来晚了）并决定在我的开发服务器上尝试一下。我使用 ApacheBench 进行了一些基准测试，令我惊讶的是，我发现运行*速度*比以前慢。

我没有进行任何代码优化使用`apc_fetch`或任何东西，但我的印象是操作码缓存应该对其自身产生积极影响？

```
C:\Apache24\bin>ab -n 1000 http://localhost/
This is ApacheBench, Version 2.3 <$Revision: 1178079 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
Finished 1000 requests

Server Software:        Apache/2.4.2
Server Hostname:        localhost
Server Port:            80

Document Path:          /
Document Length:        22820 bytes

Concurrency Level:      1
Time taken for tests:   120.910 seconds
Complete requests:      1000
Failed requests:        95
   (Connect: 0, Receive: 0, Length: 95, Exceptions: 0)
Write errors:           0
Total transferred:      23181893 bytes
HTML transferred:       22819893 bytes
Requests per second:    8.27 [#/sec] (mean)
Time per request:       120.910 [ms] (mean)
Time per request:       120.910 [ms] (mean, across all concurrent requests)
Transfer rate:          187.23 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.4      0       1
Processing:   110  120   7.2    121     156
Waiting:       61   71   7.1     72     103
Total:        110  121   7.2    121     156

Percentage of the requests served within a certain time (ms)
  50%    121
  66%    122
  75%    123
  80%    130
  90%    131
  95%    132
  98%    132
  99%    137
 100%    156 (longest request) 
```

这是我的 php.ini 的 APC 部分。除了将默认大小扩展到 128MB 而不是 32 之外，我将大多数内容保留为默认值。

```
[APC]
apc.enabled = 1
apc.enable_cli = 1
apc.ttl=3600
apc.user_ttl=3600
apc.shm_size = 128M
apc.slam_defense = 0 
```

我做错了什么，还是我只需要使用 apc_fetch/store 才能真正从 APC 中受益？

感谢你们提供的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:47:10.487

使用默认设置启用 APC 将使您的 PHP 脚本的响应时间显着（至少可以说）差异。您不必使用其任何特定的存储/获取功能即可从 APC 中获益。事实上，通常你甚至不需要基准来区分。只需浏览您的网站，差异就应该很明显。

如果您没有发现任何差异并且您的基准测试没有出现某种错误，那么我建议您开始调试问题（启用错误报告、检查日志等）。

# django-forms - Django Forms：为什么布尔字段不能像我预期的那样工作？

> ID：15344047
> 
> 赞同：5
> 
> 时间：2013-03-11T16:49:26.350
> 
> 标签：django-forms

我有一个表格：

```
class myForm(forms.Form):        
     myBoolField = forms.BooleanField(
        label='myLabel', 
        required=True,
    ) 
```

下面是对应的模板：

```
<form action="." method="post" enctype="application/x-www-form-urlencoded"> 
    {% csrf_token %}
    {{ form.as_p }}

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Submit</button>
        <a class="btn" href="{{ secondary_action_url }}">{{ secondary_action_text }}</a>
    </div>
</form> 
```

当 Django 呈现此模板时，myField 显示为一个空复选框。如果我选中该框，点击提交按钮会为 myField 的清理值生成“True”。但是，如果我将框留空并点击提交按钮，而不是得到“假”，我得到无。这根本不是我想要的。我希望此复选框返回 True 或 False。

我该怎么做才能让它像我想要（和期望）一样工作？我期望必填布尔字段返回 True 或 False 是否放错了位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T17:02:03.703

```
class myForm(forms.Form):        
     myBoolField = forms.BooleanField(
        label='myLabel', 
        required=False,
        initial=False
     ) 
```

如果您不想更深入地研究这个主题，这可以防止任何进一步的错误

*edit after edit after edit*: by marking required=True, you explicitly request an input from the user. by default, an unchecked checkbox doesn't get submitted (that's where the None value comes from) and your validation would fail everytime, because of the required.

# c - 通过多个进程访问文件

> ID：15344049
> 
> 赞同：0
> 
> 时间：2013-03-11T16:49:36.267
> 
> 标签：c, linux, process, semaphore

这是一个设计问题，而不是编码问题。我有一个会分叉许多孩子的父进程。每个孩子都应该在同一个文本文件上读写。

我们如何才能安全地实现这一目标？

我的想法：

在父级中创建文件指针，然后在其上创建一个二进制信号量。进程将竞争获取文件指针并写入文件。在读取的情况下，我不需要信号量。

如果我弄错了，请告诉我。

我在linux下使用C。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:06:43.517

POSIX systems have kernel level file locks using `fcntl` and/or `flock`. Their history is a bit complicated and their use and semantics not always obvious but they do work, especially in simple cases. For locking an entire file, `flock` is easier to use IMO. If you need to lock only parts of a file, `fcntl` provides that ability.

As an aside, file locking over NFS is not safe on all (most?) platforms.

`man 2 flock`

`man 2 fcntl`

[http://en.wikipedia.org/wiki/File_locking#In_Unix-like_systems](http://en.wikipedia.org/wiki/File_locking#In_Unix-like_systems)

Also, keep in mind that file locks are "advisory" only. They don't actually prevent you from writing/reading/etc to a file if you bypass acquiring the lock.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:46:02.917

如果编写器将数据附加到文件中，那么您的方法似乎很好（至少在文件变得对于文件系统来说太大之前）。

如果作者正在进行文件替换，那么我会这样处理：

*   `fstat()`读取 API 将根据缓存值检查上次修改的时间（使用）。如果时间已更改，则在执行读取之前重新打开文件并更新缓存的修改时间。

*   写入 API 将获取锁，并写入临时文件。然后，调用 替换实际的数据文件`rename()`，然后释放锁。

如果作者可以在文件中的任何位置写入内容，那么您可能想要的是比纯文本更结构化的文件，类似于数据库。在这种情况下，应该使用某种读写锁来管理数据一致性和数据完整性。

# java - 抽象类或接口中的公共静态最终字段

> ID：15344059
> 
> 赞同：6
> 
> 时间：2013-03-11T16:49:54.290
> 
> 标签：java, inheritance, static, abstract-class

我有很多抽象类的子类，每个子类都声明了一个同名的公共静态最终字段。我正在考虑在抽象超类中拥有这个字段而不初始化它，并希望每个子类都被迫初始化它。

我正在考虑这个问题，因为我的抽象类的所有子类都声明了一个名为 UNIQUE_ID 的公共静态最终字符串字段，并且每个子类都必须使用该名称声明这样一个字段。

我希望我的问题足够清楚，如果没有，请告诉我。

可以做一些或多或少等效的事情吗？

**编辑：添加代码：**

我的抽象类看起来像：

```
public abstract class ExperimentPanelModel extends Panelizable {
protected String nextButtonText;
protected String backButtonText;
protected String skipButtonText;
protected Properties currentFile;
protected List<Properties> pastFiles = new ArrayList<Properties>();

public ExperimentPanelModel(Properties argcurrentfile, List<Properties> argpastfiles) {
    currentFile = argcurrentfile;
    pastFiles = argpastfiles;
    nextButtonText = "Next";
    backButtonText = "Back";
    skipButtonText = "Skip";
}
...
} 
```

该抽象类的一些非抽象子类看起来像（注意它们都声明`public static final String UNIQUE_ID`）：

```
public class ConfigurationGUI extends ExperimentPanelModel {

public static final String UNIQUE_ID = "ConfigurationGUI";
public static final String DATA_MODIFIED = "DataModified";

Date dateOfLastSession;
int ExperimentalSession;
int ExperimentOrder;

boolean nextButtonEnabled = false;

public ConfigurationGUI(Properties argcurrentfile, List<Properties> argpastfiles) {
    super(argcurrentfile, argpastfiles);
    nextButtonText = "Confirm";
    backButtonText = "Abort";
}

...
} 
```

再举一个例子：

```
public class Introduction extends ExperimentPanelModel {

public static final String UNIQUE_ID = "Introduction";
public static final String INSTRUCTIONS_XML_FILE = "instructions.xml";
public static final String THIS_INSTRUCTION_PROPERTY = UNIQUE_ID;

private String thisInstructionText = UNIQUE_ID;

Properties readInstructionsProperties = new Properties();

public Introduction(Properties argcurrentfile, List<Properties> argpastfiles) {
 ... 
```

最后一个：

```
public class Instruction1 extends ExperimentPanelModel {

public static final String UNIQUE_ID = "Instruction1";
public static final String INSTRUCTIONS_XML_FILE = "instructions.xml";
public static final String THIS_INSTRUCTION_PROPERTY = UNIQUE_ID;
...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T16:55:41.010

字段的想法是行不通的，因为静态字段不能在子类中被覆盖。您可以做的是您可以在抽象类上声明一个抽象方法，以便您的子类必须实现它。

另请注意，您不能将其设为静态方法，因为它们也不会被覆盖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:09:42.653

在您的情况下，我将在祖先中定义变量。在每个扩展类中都有一个变量是没有意义的，除非你有一个特别好的理由，你听起来不像。

+1 for Nathan's reply though. In quite a few cases, that's a better thing to do.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T16:56:43.593

将公共最终字段 UNIQUE-ID 放在抽象类中，并声明一个受保护的构造函数，该构造函数采用 UNIQUE-ID 的值。您将无法将其设为静态，因为不同实例的值需要不同。

# c# - 浏览器历史 -> 数据库

> ID：15344061
> 
> 赞同：0
> 
> 时间：2013-03-11T16:50:04.447
> 
> 标签：c#, asp.net

我想在浏览器中加载网站后立即从浏览器中获取历史记录。它应该获取客户的浏览器信息并将其保存在数据库中，以便管理员可以查看经常打开的网站并可以对数据进行调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:01:53.430

```
System.Web.HttpBrowserCapabilities browser = Request.Browser;
string s = "Browser Capabilities\n"
    + "Type = "                    + browser.Type + "\n"
    + "Name = "                    + browser.Browser + "\n"
    + "Version = "                 + browser.Version + "\n"
    + "Major Version = "           + browser.MajorVersion + "\n"
    + "Minor Version = "           + browser.MinorVersion + "\n"
    + "Platform = "                + browser.Platform + "\n"
    + "Is Beta = "                 + browser.Beta + "\n"
    + "Is Crawler = "              + browser.Crawler + "\n"
    + "Is AOL = "                  + browser.AOL + "\n"
    + "Is Win16 = "                + browser.Win16 + "\n"
    + "Is Win32 = "                + browser.Win32 + "\n"
    + "Supports Frames = "         + browser.Frames + "\n"
    + "Supports Tables = "         + browser.Tables + "\n"
    + "Supports Cookies = "        + browser.Cookies + "\n"
    + "Supports VBScript = "       + browser.VBScript + "\n"
    + "Supports JavaScript = "     + 
        browser.EcmaScriptVersion.ToString() + "\n"
    + "Supports Java Applets = "   + browser.JavaApplets + "\n"
    + "Supports ActiveX Controls = " + browser.ActiveXControls 
          + "\n"; 
```

`Request.Browser`用于识别浏览器信息。使用它您可以获得浏览器的所有信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:55:29.430

IIS 已经为您存储了这些信息。请参阅：http: [//msdn.microsoft.com/en-us/library/ms525410%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms525410%28v=vs.90%29.aspx)

为了使这些数据有用，您将需要使用日志分析器工具。

谷歌这个词的一些使用选项：iis 日志分析器

# google-apps-script - 如何强制刷新用户的输入？

> ID：15344067
> 
> 赞同：2
> 
> 时间：2013-03-11T16:50:17.437
> 
> 标签：google-apps-script, google-sheets

我想知道是否可以从脚本强制刷新用户输入。

上下文如下：我有一张人们应该在其中输入数据的工作表，以及一个他们在完成后单击的按钮，它将处理数据。

有时人们会双击一个单元格，写下他们想要的内容，然后他们在点击返回之前点击了按钮。因此，脚本将单元格视为仍为空。

是否有一种方法可以强制刷新他们当前键入的内容，或者检测到当前正在编辑单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:44:32.673

在他们按下回车键或选择另一个单元格之前，该单元格永远不会“编辑”。因此，您可以指示他们单击另一个单元格，或者在单击按钮之前按 enter。我知道这不是最好的解决方案。但是没有办法检测到用户将要在单元格中输入什么。

您可以将其设置为他们单击的菜单选项。单击菜单项（请参阅[addMenu](https://developers.google.com/apps-script/class_spreadsheet#addMenu)）会将文本写入电子表格，以便您在他们使用菜单功能时能够阅读它。同样，这可能不是最好的解决方案，但它仍然是一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-09T17:22:28.830

正如您所发现的，在用户将值输入单元格后，使用图像充当应单击的按钮不会强制实际输入值。

强制单元格将其状态从“进入模式”更改为“显示模式”的方法是

*   紧迫`Enter`
*   紧迫`Tab`
*   按键盘快捷键（我还没有测试过）
*   单击另一个单元格或菜单（包括自定义菜单）

一种解决方法可能是将您的“按钮”替换为

*   自定义菜单项
*   侧边栏中的按钮或无模式对话框
*   编辑触发器，简单或可安装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T12:48:46.637

如果您强制应用程序激活此单元格，您可以将新值存储到内存中，例如：

```
var mycell = sheet.getActiveSelection();  
var cellcol = mycell.getColumn() ;
var cellrow = mycell.getRow();

sheet.setActiveCell(sheet.getDataRange().offset(0, 0,cellcol, cellrow)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-21T10:25:43.893

我遇到过同样的问题。对我有用的解决方案：在按钮触发的脚本中，我**预先添加**了一些代码来激活电子表格中的另一个工作表：

```
 function buttonScript() {
  var spreadsheet = SpreadsheetApp.getActive();
  spreadsheet.setActiveSheet(spreadsheet.getSheetByName('A_DIFFERENT_SHEET'), true);
  // REST OF THE CODE in your script
  } 
```

显然，这会强制用户输入在单元格中“输入”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-22T15:20:05.793

在被问到这个问题 6 年后，但幸运的是，我遇到了同样的问题并尝试了每个人的选择。就像评论一样，它有时有效，有时无效。

所以我只是做了一个 if else 语句来确保所有条目都不为空，然后才运行代码。

```
function move() {

  var source = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('PROCESS');
  var source_range = source.getRange(3, 15, 1, 6).getValues();

  var target = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('SUBMISSIONS');
  var target_range = target.getRange(target.getLastRow() + 1, 2, 1, 6);

  var check = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('INPUT');
  var check_order = check.getRange(7, 15, 1, 1);
  var check_firstname = check.getRange(9, 15, 1, 1);
  var check_lastname = check.getRange(11, 15, 1, 1);
  var check_email = check.getRange(13, 15, 1, 1);

   if (check_order.getValue() === '' ) {
    Browser.msgBox('Error','Please make sure all fields are filled.', Browser.Buttons.OK);
    } else if ( check_firstname.getValue() === '' ) {
    Browser.msgBox('Error','Please make sure all fields are filled.', Browser.Buttons.OK);
    } else if ( check_lastname.getValue() === '' ) {
    Browser.msgBox('Error','Please make sure all fields are filled.', Browser.Buttons.OK);
    } else if ( check_email.getValue() === '' ) {
    Browser.msgBox('Error','Please make sure all fields are filled.', Browser.Buttons.OK);
    } else {

    target_range.setValues(source_range);

    var datecell = target_range.offset(0, -1, 1, 1);

    datecell.setValue(new Date()).setNumberFormat('YY-MM-DD HH:mm:ss');

    var clearsheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('INPUT');
    clearsheet.getRange("J3:K4").clearContent();
    clearsheet.getRange("B8:B25").clearContent();
    clearsheet.getRange("H8:H9").clearContent();
    clearsheet.getRange("H11").clearContent();
    clearsheet.getRange("O7:P16").clearContent();
  }
} 
```

完美运行。更好的是，您可能可以自定义`.msgBox`以引用错误，如果一切顺利，您还可以自定义 —— 说明提交的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-19T11:05:28.790

# 编辑：2021 年 12 月

要解决此问题，请将按钮替换为自定义菜单。例如

```
function onOpen() {
  SpreadsheetApp.getUi().createMenu(' Menu ')
    .addItem(' valid', 'valider')
    .addToUi();
}
function valider(){
  var sheet=SpreadsheetApp.getActiveSheet()    
  Browser.msgBox(sheet.getRange('D9').getValue())
} 
```

[![在此处输入图像描述](../Images/a2602e802f0e38bd9187c328799e9817.png)](https://i.stack.imgur.com/4y2eg.gif)

# functional-programming - OCaml 中二叉搜索树的删除

> ID：15344069
> 
> 赞同：1
> 
> 时间：2013-03-11T16:50:23.597
> 
> 标签：functional-programming, ocaml

我正在`binary search tree`OCaml 中构建操作。

```
type ('a, 'b) bst = 
  | Node of 'a * 'b * ('a, 'b) bst * ('a, 'b) bst
  | Leaf;;

let rec insert k v = function
  | Leaf -> Node (k, v, Leaf, Leaf)
  | Node (k', v', left, right) ->
    if k < k' then Node (k', v', insert k v left, right)
    else if k = k' then Node (k, v, left, right)
    else Node (k', v', left, insert k v right);;

let rec delete k = function
  | Leaf -> Leaf
  | Node (k', v, l, r) as p ->
    if k < k' then Node (k', v, (delete k l),r)
    else if k > k' then Node (k', v, l, (delete k r))
    else 
    match (l, r) with
      | (Leaf, Leaf) -> Leaf
      | (l, Leaf) -> l
      | (Leaf, r) -> r
      | (_, _) ->
        let Node (km, vm, _, _) = max l in
        Node (km, vm, delete km l, Leaf) 
```

**谁能告诉我我的`deletion`代码是否足够好或有任何改进？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:22:00.370

一种改进是当我们插入树中的东西或删除树中没有的东西时。这些操作中的每一个都将复制到该特定节点的搜索路径。插入可能不是问题，因为您将要更新该键的值，但删除将是您可以进行改进的情况。这可以通过用异常包装函数以返回原始树来解决。

这是对不在树中的内容进行删除的样子。当您递归时，您创建一个新`Node`的，并在正确的子树中删除了键。在这种特殊情况下，delete 函数将递归到 a`Leaf`然后返回 a`Leaf`并且在堆栈的每一步备份中返回一个新构造的`Node`。这条新路径表示为下面的蓝色路径。由于没有将新路径展开到旧路径的结构，我们在结果树中重新创建搜索路径。

```
let at = delete x bt 
```

![不存在的删除](../Images/b3866bfc99506c7ef11f1274436b6af7.png)

要解决此问题，如前所述，将函数包装在异常中。

```
let delete k t =
    let rec delete k = function
        | Leaf -> raise Not_found
        ...
    in
    try delete k t with Not_found -> t 
```

# ruby-on-rails - 如何使用包含部分视图的参数运行 SQL 查询？

> ID：15344074
> 
> 赞同：0
> 
> 时间：2013-03-11T16:50:35.770
> 
> 标签：ruby-on-rails

我有一个机柜视图，并希望显示与机柜具有相同数据中心和位置的 RFID 标签列表。我无法弄清楚该命令的语法来查找符合条件的所有 FRID 记录。RFID 显示屏设计为橱柜视图文件夹的一部分。该命令应获取 rfid.data_center = cabinet.data_center AND rfid.position = cabinet.cabinet_name 的记录。如果我对其中的字符串进行硬编码，它就可以工作。这是代码：

```
<% @cabinet.devices.order(:name).each do |device| %>
    <% @rfid = Rfid.where("(@rfid.data_center_name = '%#{params[:data_center]}%') AND (@rfid.position = '%#{params[:cabinet_name]}%')").uniq %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:05:20.033

您上面的内容容易受到 SQL 注入的影响，您需要使用参数绑定而不是自己使用字符串进行绑定。这是一种方法：

```
Rfid.where(:data_center_name => params[:data_center], :position => params[:cabinet_name]).uniq 
```

鉴于上述内容，您可能想要这样的东西：

```
<% @cabinet.devices.order(:name).each do |device| %>
  <% @rfids = Rfid.where(:data_center_name => device.cabinet.datacenter, :position => device.cabinet.cabinet_name).uniq %> 
```

有更好的方法来写这个，但我们需要看看你的关系，更好地了解你想要做什么。

# foreach - 是否可以在 PigLatin 中制作没有 COGROUP 的嵌套 FOREACH？

> ID：15344075
> 
> 赞同：0
> 
> 时间：2013-03-11T16:50:35.927
> 
> 标签：foreach, nested, apache-pig

我想像这样使用 FOREACH：

```
a:{a_attr:chararray}
b:{b_attr:int}

FOREACH a {
  res = CROSS a, b;
  -- some processing
  GENERATE res;
} 
```

我的意思是`a`用 的所有元素为叉积的每个元素制作`b`，然后执行一些自定义过滤并返回元组。

==编辑==

自定义过滤 = res_filtered = FILTER res BY ...; 生成 res_filtered。

==EDIT-2== 在没有事先 GROUP 或 COGROUP 的情况下，如何在 FOR 循环中使用嵌套的 CROSS 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:02:16.323

根据过滤的具体情况，您可以在 和 中设计一组有限的不相交的元素类`a`，`b`然后`JOIN`在这些元素上。例如：

如果您的过滤规则是

*   如果`a_attr`以“Foo”开头并且`b`为 4，则接受
*   如果`a_attr`以“Bar”开头并且`b`大于 17，则接受
*   如果`a_attr`以 [mz] 中的字母开头并且`b`小于 0，则接受
*   否则，拒绝

然后您可以编写一个 UDF，它将为满足第一个规则的项目返回 1，为第二个规则返回 2，为第三个规则返回 3，`NULL`否则返回。你的`CROSS`/`FILTER`然后变成

`res = JOIN a BY myUDF(a), b BY myUDF(b);`

Pig 在`JOIN`s 中删除空值，因此只有满足您的过滤条件的对才会通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:06:56.877

`CROSS`生成每个关系中所有元组的叉积。所以没有必要嵌套`FOREACH`. 只需执行`CROSS`然后`FILTER`：

```
a: {a_attr: chararray}
b: {b_attr: int}

crossed = CROSS a, b;
crossed: {a::a_attr: chararray,b::b_attr: int}

res = FILTER crossed BY ... -- your custom filtering 
```

如果你有，你不应该有（不必要的）过多的 IO 麻烦，因为在过滤`FILTER`之前将整个交叉产品写入磁盘。被过滤的记录永远不会被写入。`CROSS``CROSS`

# java - 在 Eclipse 中管理 Lite 和 Pro 版本的应用程序

> ID：15344077
> 
> 赞同：0
> 
> 时间：2013-03-11T16:50:44.180
> 
> 标签：java, android, eclipse, google-play, multiple-apk

我刚刚在我的应用程序上完成了完整版。我现在正在环顾四周，试图弄清楚如何制作我的 Lite 版本的应用程序。没有很多不同，但存在差异，尤其是在您玩琐事游戏时。如何在 Eclipse 中管理这两个版本？我看了这个指南：

[http://blog.donnfelker.com/2010/08/05/howto-android-full-and-lite-versions/](http://blog.donnfelker.com/2010/08/05/howto-android-full-and-lite-versions/)

`Proguard`但根据教程下方关于添加代码的评论，链接教程似乎已过时。必须有一个简单的方法来做到这一点。像上面链接的教程所说的那样制作 3 个项目的最好方法仍然是，但只是想办法解决这个`Proguard`问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:03:55.640

不确定这是否算作一个答案，但我在创建免费/专业版、精简版/付费或任何您选择称呼它们的双版本应用程序时使用库项目有积极的经验。

您可以使用简单的 if 语句来区分逻辑上的差异，例如`if(AppType.isFree(context))`在帮助方法中检查上下文包是免费版还是付费版的。

或者通过使用继承和接口来利用多态性和动态绑定。例如，您的 lib 中的菜单活动可能会调用 getGameActivity，这取决于子类（免费或付费）返回游戏的适当版本，并且大部分逻辑都在抽象 lib GameActivity 类中。

而关于 ProGuard，如果你不是很害怕逆向工程，其实也没有必要去费心去费心。

# vsto - 如何调试在 Citrix 环境中运行的 Office 插件？

> ID：15344082
> 
> 赞同：0
> 
> 时间：2013-03-11T16:51:08.223
> 
> 标签：vsto, add-in, citrix, office-2010

我有一个基于 VSTO 的 PowerPoint 加载项，可以在 Office 2007 和 Office 2010 上正常运行。我让用户每天都在运行这个加载项，日复一日。

我现在正在使用一个将 Citrix 用于其桌面的新客户端。我从来没有真正了解思杰的工作原理，但似乎没有人在本地安装软件——他们只是在思杰盒子上运行所有东西。这是一个非常封闭的环境。他们使用 Office 2010 和似乎是 Vista 的版本。

无论如何，我的加载项在这种环境中表现出奇怪的行为。只需单击功能区上的一个按钮有时会出现错误（如果“显示插件用户界面错误”设置为 ON）。错误显示“调用回调“ButtonClick”时发生错误。

其他时候，单击按钮似乎根本没有任何效果（尽管我怀疑它实际上开始做某事，然后在显示任何消息之前就崩溃了）。

我很困惑，因为（a）它在其他地方工作，并且（b）我在所有按钮单击处理程序中捕获并报告异常，所以我希望看到报告的错误。

因为环境被如此锁定，并且实际上需要数周才能推出我的加载项的新版本，所以我不知道如何诊断这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:20:10.250

您是否曾经使用 RDP 远程访问另一台 Windows 机器？对于所有意图，您可以将 Citrix 视为 RDP 的更高级版本。所以你有一堆服务器，用户在其中运行他们的应用程序和桌面，他们使用 HDX 而不是 RDP 远程连接到它们。

您的客户可能正在使用 XenApp 或 XenDesktop。在 XenApp 中，用户在 Windows 2008 R2 服务器上运行他们的会话，多个用户共享每个服务器。XenDesktop 与此类似，只是用户连接到他们自己的专用工作站映像，而不是连接到服务器操作系统。猜测您的客户可能正在使用 XenDesktop，因为您说他们在“Vista”上运行。

如果不访问 Citrix 环境，诊断您的问题将会很棘手。对于我的调试，我通常会在 Citrix 机器上安装远程调试代理并从我的工作站进行远程调试。有时我会使用直接安装在 Citrix 机器上的 Windbg 或 Visual Studio。如果您的客户愿意让您访问他们的环境，您可以试试这个。

其他选项包括：

*   为您的产品添加诊断跟踪。
*   Citrix 提供了一些兼容性测试服务，参见：[http ://citrix.com/partner-programs/citrix-ready/test.html](http://citrix.com/partner-programs/citrix-ready/test.html)

至于实际可能出了什么问题，Citrix 做了一系列可能导致意外行为的挂钩。特别是对于 XenApp，多显示器挂钩是出现问题的主要原因（我不确定这是否也适用于 XenDesktop）。如果您在“citrix disable hooks”上进行 Google 搜索，您将找到一系列链接，这些链接描述了如何使用注册表禁用 hooks。以这种方式禁用挂钩肯定适用于 XenApp。我对 XenDesktop 不太熟悉，所以我不知道是否适用相同的技术。我当然建议您尝试禁用 PowerPoint 挂钩，看看您的问题是否会消失。

# android - Android：从 onReceive 方法设置新的警报

> ID：15344083
> 
> 赞同：2
> 
> 时间：2013-03-11T16:51:08.833
> 
> 标签：android, service, android-activity, alarmmanager, alarm

我的数据库中有一组提醒（按时间排序）。当我的应用程序启动时，我调用`setAlarm`. 我需要在`onReceive`方法中添加代码才能完成这些任务：

1.  从我的数据库中获取第一个提醒
2.  获取与提醒相关的延迟
3.  安排一个新的警报以获得下一个提醒。

我创建了一个简单的 BroadcastReceiver 类：

```
public class AlarmReceiver extends BroadcastReceiver{
    private static final String DEBUG_TAG= "AlarmReceiver";

    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
        Log.d(DEBUG_TAG,"ALARM!!!");
            // --mycode--
    }
} 
```

和活动类：

```
public class AlarmActivity extends Activity {

    private Context context;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);
        context = getApplicationContext();
    }

    public void setAlarm(View v){
        Intent intent = new Intent(this,AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+ Delay,pendingIntent);
        Log.i("SETTER","Alarm started");

    }

    public void stopAlarm(View v){
        Intent intent = new Intent(this,AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        pendingIntent.cancel();
    }
} 
```

现在，我希望在`--mycode--`部分中从数据库中获取新的延迟（如果存在），并使用这个新的延迟设置新的警报。如何从 onReceive 方法设置新的 AlarmManager？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:11:02.553

您可以`AlarmManager`通过从上下文访问它来进入广播接收器

```
AlarmManager alarmManager = (AlarmManager)arg0.getSystemService(Context.ALARM_SERVICE); 
```

`arg0`你的上下文变量在哪里

# c++ - 从向量中删除指针

> ID：15344086
> 
> 赞同：2
> 
> 时间：2013-03-11T16:51:12.070
> 
> 标签：c++, c++11, std

我使用一个共享指针向量来包含一些称为客户的游戏角色。

```
typedef std::shared_ptr<Customer> customer;
std::vector<customer> customers;

customers.push_back(customer(new Customer()));

for(int i = 0; i < customers.size(); i++)
{
    if(customers[i]->hasLeftScreen())
    {
        if(!customers[i]->itemRecieved())
            outOfStocks++;
        // Kill Character Here
    }       
} 
```

我以前使用向量来保存对象，所以习惯于在向量上调用擦除并传入迭代器。我的问题是有没有办法从上述代码片段中的向量中删除指针？我希望不要在这里使用迭代器来简化代码。我还需要删除指针，因为我是离开屏幕后要从游戏中删除的客户。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:56:00.853

考虑使用迭代器，坦率地说，这将更容易处理。我不确定您是否厌恶它们，但请参见下文：

```
std::vector<customer>::iterator it = customers.begin();
while (it != customers.end())
{
    if(it->hasLeftScreen())
    {
        if(!it->itemRecieved())
            outOfStocks++;
        it = customers.erase(it);
        continue;
    }
    ++it;
} 
```

这将从向量中删除共享指针实例。如果实例是对共享指针的*最后*引用，它还将释放所述客户的关联内存，触发其析构函数等......（首先使用智能共享指针的意义，以及使用智能指针的道具， 顺便一提）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:57:41.517

您应该始终使用迭代器；这是一个 C++ 习语。这会将代码更改为...

```
for(auto i = customers.begin(); i != customers.end(); ++i)
{
    if((*i)->hasLeftScreen())
    {
        if(!(*i)->itemRecieved())
            outOfStocks++;
        // Kill Character Here
    }       
} 
```

现在，很明显，我们改用了[erase-remove 习惯用法](http://en.wikipedia.org/wiki/Erase-remove_idiom)。

```
int outOfStocks = 0;
auto it = std::remove_if(customer.begin(), customers.end(), [&](Customer const& i) {
    if(i->hasLeftScreen()) {
        if(!i->itemRecieved()) {
            outOfStocks++;
        }
        return true;
    }
    return false;
}
std::erase(it, customers.end()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:00:21.953

您还可以利用“迭代器算术”：

```
 // Kill Character Here
        customers.erase(customers.begin() + i); 
```

...但这有一个问题，`customers.size()`当前索引将随着容器缩小而失效。

此外，您不需要明确指出`delete`要删除的客户，因为智能指针会处理这些问题。

# css - CSS3 线性渐变在 Firefox 上无法正常工作

> ID：15344087
> 
> 赞同：2
> 
> 时间：2013-03-11T16:51:16.287
> 
> 标签：css, firefox, gradient

我使用 Adob​​e FireWorks CS6 创建了 CSS 线性渐变代码。我的 Grandient 应该顶部是浅蓝色，底部是深蓝色，在 Chrome 和 safari 上都很好，但在 Firefox 上，左边是深蓝色，右边是浅蓝色。我是 html 和 CSS 的新手，所以我不知道可能出了什么问题......我试图将 -90deg 更改为 90deg、0deg 等。但没有任何反应......帮助！！！！

```
color: #FFF;
/* Firefox v3.6+ */
background-image: -moz-linear-gradient(50% 0% -90deg,rgb(101,165,227) 1%,rgb(0,78,157) 99%);
/* safari v4.0+ and by Chrome v3.0+ */
background-image: -webkit-gradient(linear,50% 0%,50% 100%,color-stop(0.01, rgb(101,165,227)),color-stop(0.99, rgb(0,78,157)));
/* Chrome v10.0+ and by safari nightly build*/
background-image: -webkit-linear-gradient(-90deg,rgb(101,165,227) 1%,rgb(0,78,157) 99%);
/* Opera v11.10+ */
background-image: -o-linear-gradient(-90deg,rgb(101,165,227) 1%,rgb(0,78,157) 99%);
/* IE v10+ */
background-image: -ms-linear-gradient(-90deg,rgb(101,165,227) 1%,rgb(0,78,157) 99%);
background-image: linear-gradient(-90deg,rgb(101,165,227) 1%,rgb(0,78,157) 99%);
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff65a5e3,endColorstr=#ff004e9d,GradientType=0)";
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff65a5e3,endColorstr=#ff004e9d,GradientType=0);
line-height: 60px;
height: 60px; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-25T17:19:42.070

许多 web 示例将给出一个使用标准化`linear-gradient`函数的示例，如下所示：

```
linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%); 
```

但是请注意，使用底部、顶部或类似关键字实际上并不是标准的一部分，您必须使用诸如 , 等的度数值`0deg`或`-90deg`应用`to` 前缀如`to bottom`,`to top`或`to left top`：

```
linear-gradient(to bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
----------------^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:20:25.800

尝试以这种方式使用它，它很简单，希望对您有所帮助。祝一切顺利 ！

```
 <div style="background-image: -webkit-linear-gradient(bottom, #FE1C4A 22%, #AB244A 61%);
         background-image: -moz-linear-gradient(bottom, #FE1C4A 22%, #AB244A 61%);
         width: 200px; height: 100px; text-align: center;">
    </div> 
```

# javascript - 如何删除第三个之后的每个 {element}？

> ID：15344088
> 
> 赞同：2
> 
> 时间：2013-03-11T16:51:18.753
> 
> 标签：javascript, jquery

我有一个需要在特殊场合使用 jQuery 修剪的对象列表。出于意图和目的，假设它看起来像这样：

```
<div id="container">
    <div class="child one">stuff</div>
    <div class="child two">stuff</div>
    <div class="child three">stuff</div>
    <div class="child four">stuff</div>
    <div class="child five">stuff</div>
</div> 
```

有没有一种简单的方法（如果需要的话，使用 jQuery，纯 JS）`.child`在第三个之后删除“每个”？

注意：`.one, .two .three`不一定按数字顺序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:52:41.947

是的，使用[`:gt`选择器](http://api.jquery.com/gt-selector/)：

```
$("#container > .child:gt(2)").remove(); 
```

...这意味着“选择所有`.child`直接子元素`#container`并且索引为 2 或更高（索引从 0 开始）的元素。

或者如果你不喜欢使用 jQuery 的扩展选择器（因为它们不能被传递给浏览器自己的选择器引擎），你可以使用[`.filter`](http://api.jquery.com/filter/)来过滤孩子：

```
$("#container > .child").filter(function(index) {
    return index > 2;
}).remove(); 
```

如果他们是*唯一*的孩子，您可以使用`.children`而不是`> .child`该选择器的一部分：

```
$("#container").children().filter(function(index) {
    return index > 2;
}).remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:55:18.670

使用 :gt() 选择器和 .remove()

```
$(document).ready(function(){
$('#container .child:gt(2)').remove();
}); 
```

[演示视图](http://jsfiddle.net/teShe/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:52:49.530

```
$('.child').gt(2).remove(); 
```

这里 gt 表示大于

# javascript - Highcharts 水平条形图类别的大小不正确

> ID：15344091
> 
> 赞同：0
> 
> 时间：2013-03-11T16:51:25.927
> 
> 标签：javascript, html, highcharts

我在使用 Highcharts 时遇到问题，其中每个条形图类别在水平排列中都太高了。

这是一个例子：

![大小不正确的类别示例](../Images/bdcd16f2f7f8ca4f9f1c5eab505efe28.png)

用于生成图表的代码如下：

```
chart2 = new Highcharts.Chart({
        chart: {
          renderTo: 'wordchart1',
          defaultSeriesType: 'bar'
        },
        title: {
          text: 'Word Frequency Distribution'
        },
        xAxis: {
          categories: ['LIL POP SHOP','SWEET BOX','LITTLE BABY\'S ICE CREAM','SUGAR PHILLY','Please pick one:'              ],
          title: {
            text: ''
          }
        },
        yAxis: {
          min: 0,
          title: {
            text: 'Word Frequency Analysis',
            align: 'high'
          }
        },
        plotOptions: {
          bar: {
            dataLabels: {
              enabled: true
            }
          }
        },
        series: [{
          name: 'Word Frequency Analysis',
          data: [89,43,32,24,3              ]              }]
        });
      }); 
```

知道可能是什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:07:13.293

您还可以定义pointWidth：[http ://api.highcharts.com/highcharts#plotOptions.bar.pointWidth](http://api.highcharts.com/highcharts#plotOptions.bar.pointWidth)

# r - 创建具有缺失值的新变量

> ID：15344092
> 
> 赞同：0
> 
> 时间：2013-03-11T16:51:33.277
> 
> 标签：r, if-statement

这是一些示例数据。

```
vv  var1    var2
1   a   1/1/2010
1   c   1/3/2010
2   d   1/6/2010
3   a   1/8/2010
3   c   1/9/2010
4   a   1/10/2010
4   b   1/11/2010
5   d   1/13/2010
6   a   1/16/2010
6   b   1/17/2010
7   a   1/19/2010
7   b   1/20/2010
8   d   1/22/2010
9   a   1/25/2010
9   c   1/27/2010 
```

我正在尝试创建由其他变量的响应填充的新变量。我认为这很容易。例如，我尝试了类似下面的方法。

```
data$new1[data$var1=="a"]<-data$var2
#or
data$new1[data$var1=="b" | data$var1=="c"]<-data$var2 
```

我得到错误`number of items to replace is not of replacement length`。在我的数据中，并不是每个`var1=="a"`都有一个`var2`值，所以我不确定为什么 r 不只是为缺失值分配 NA，这是我可以接受的（实际上更喜欢它）。基本上，我希望 r 给`new1`任何 NA 值`var1!="a"`。

我也试过

```
if (data$var1=="a") {data$new1<-data$var2} else {data$new1<-"NA"} 
```

但我得到了错误`the condition has length > 1 and only the first element will be used`。

现在，我想我可以将我的数据子集化为只有 的数据`var1=="a"`，然后分配我的值，然后只需合并回主数据集，并`all=T`选择获得 NA 的估算值，但我真的想避免这样做。

我不确定问题是什么。非常感谢任何建议。干杯。

以下方法的输出用于运行代码：

```
data$new1 <- ifelse(data$var1 %in% c("b","c"),data$var2,NA)

       vv var1      var2 new1
    1   1    a  1/1/2010   NA
    2   1    c  1/3/2010   12
    3   2    d  1/6/2010   NA
    4   3    a  1/8/2010   NA
    5   3    c  1/9/2010   15
    6   4    a 1/10/2010   NA
    7   4    b 1/11/2010    3
    8   5    d 1/13/2010   NA
    9   6    a 1/16/2010   NA
    10  6    b 1/17/2010    6
    11  7    a 1/19/2010   NA
    12  7    b 1/20/2010    8
    13  8    d 1/22/2010   NA
    14  9    a 1/25/2010   NA
    15  9    c 1/27/2010   11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:55:51.007

由于您没有提供示例数据，因此此代码未经测试

```
data$new1 <- rep(NA, nrow(data))
data$new1[data$var1=="A"] <- data$var2[data$var1=="A"] 
```

此处的关键是和具有相同的子集参数 ( `data$var1=="A"`) 。`data$new1``data$var2`

这种方法的优点是，子集不必只是相等，而是任何逻辑表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:56:03.037

如果我理解正确，我认为您想使用`ifelse`并`%in%`执行此任务：

```
data$new1 <- ifelse(data$var1 %in% c("A","B"),data$var2,NA) 
```

您执行的是子集化，这通常会返回较小的值，因此您会收到警告。

# jquery - .show () div 之间的跳转问题

> ID：15344094
> 
> 赞同：1
> 
> 时间：2013-03-11T16:51:39.640
> 
> 标签：jquery

我试图为一个网站制作我自己的超级菜单。

```
<script>
$(document).ready(function() {
    $('#homeDropdown').hide();
    $('#aboutDropdown').hide();

    $("#homeBtn").hover(function () {

    $(".btnDropdown").hide();
    $("#homeDropdown").show("slow");

});

    $("#aboutBtn").hover(function () {
    $(".btnDropdown").hide();
    $("#aboutDropdown").show("slow");
});

$('#homeDropdown').hover(function () {
$("#homeDropdown").show();

}); 

$('#aboutDropdown').hover(function () {
$("#aboutDropdown").show();

}); 
});

</script> 
```

我正在使用以下内容，但是当您浏览“.dropdowns”时它似乎关闭了我是否以正确的方式进行此操作？

[http://jsfiddle.net/ma9ic/9Lksq/](http://jsfiddle.net/ma9ic/9Lksq/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:22:46.937

为了使它更顺畅，我只是添加了一些检查，以不关闭我们想要打开的窗口。

此外，我添加了隐藏动画，当项目不只是消失时，它更容易让人眼前一亮。

这将使它更平滑：

```
$(document).ready(function() {

    $('#homeDropdown').hide();
    $('#aboutDropdown').hide();

    $("#homeBtn").hover(function () {
        $(".btnDropdown").not("#homeDropdown").hide("fast");
        $("#homeDropdown").show("slow");
    });

    $("#aboutBtn").hover(function () {
        $(".btnDropdown").not("#aboutDropdown").hide("fast");
        $("#aboutDropdown").show("slow");
    });

    $('#homeDropdown').hover(function () {    
        $("#homeDropdown").show();
    }); 

    $('#aboutDropdown').hover(function () {
        $("#aboutDropdown").show();
    }); 
}); 
```

你可以在这里测试它：http: [//jsfiddle.net/9Lksq/2/](http://jsfiddle.net/9Lksq/2/)

# arrays - 将一个数组存储到另一个数组中

> ID：15344098
> 
> 赞同：2
> 
> 时间：2013-03-11T16:51:54.587
> 
> 标签：arrays, assembly, 68000

我正在尝试将数组复制`A`到数组`N`中，然后打印数组（以测试它是否有效），但它输出的只是`-1`

这是我的代码：

```
 ORG    $1000
START:                  ; first instruction of program

    clr.w d1

    movea.w #A,a0
    movea.w #N,a2
    move.w #6,d2
for move.w (a0)+,(a2)+
    DBRA d2,for
    move.w #6,d2
loop
    move.l  (a2,D2),D1  ; get number from array at index D2
    move.b  #3,D0       ; display number in D1.L
    trap    #15

    dbra d2,loop

SIMHALT             ; halt simulator

A dc.w 2,2,3,4,5,6
N dc.l 6

END    START        ; last line of source 
```

为什么只`-1`在输出中？如果对此有更好的解决方案，那将非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:45:26.337

由于我无法访问您正在使用的任何汇编器/模拟器，因此我无法对其进行实际测试，但这里有一些事情（其中一些已经在评论中注明）：

*   `dc.l`声明一个 long，您希望`ds.l`（或类似的）为 6 个 long 分配存储空间
*   `dbra`分支直到操作数等于`-1`，所以你可能想要转

    ```
    movw #loop_times, d0
    loop
       ....
       dbra d0, loop 
    ```

    进入

    ```
    movw #loop_times-1, d0
    loop
       ....
       dbra d0, loop 
    ```

（只要`loop_times`大于 0 就可以工作，否则你必须在进入循环之前检查条件）

*   您的显示循环有几个问题： 1\. 在数组`a2`末尾之后的入口点上。`N`2\. 即使修复它，索引它的方式也会导致问题。在第一个条目中，您尝试从 address 获取 4 字节长`a2 + 6`，然后从`a2 + 5`...

您想要的是从 address 中获取 longs `a2 + 0`，`a2 + 4`.... 一种方法：

```
 move.w  #6-1, d2    ; note the -1
    movea.l #N, a2
loop
    move.l  (a2)+,D1    ; get next number from array
    ; use d1 here
    dbra    d2,loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:03:18.183

正如已经指出的那样，您的新数组大小只有 4 个字节，您应该更改

dc.l 6 到 ds.w 6

并且您还处理 7 个元素，因为 DBRA 倒计时到 -1。

其次，这就是为什么你到处都得到 -1 的原因，你使用 A2 作为指向新数组的指针，但你没有将它重置为指向新数组中的第一个单词。由于在复制过程中每个元素增加了一个单词，因此在 for 循环完成后，A2 指向数组*后面的第一个单词。*

您的模拟器在显示循环中输出多个数字表明您的模拟器没有模拟 MC68000，只要 A2+D2 的总和，*真正的*MC68000 就会在“MOVE.L (A2,D2),D1”处陷入陷阱是奇数 - 68000 不允许 W/L 大小的访问奇数地址（MC68020 和更高版本允许）。

清理后的 MC68000 兼容代码可能如下所示：

```
 lea A,a0
     lea N,a2
     moveq #5,d2
 for move.w (a0)+,(a2)+
     dbra d2,for

     lea N,a2
     moveq #5,d2
 loop
     move.w  (a2)+,D1   ; get number (16 bits only)
     ext.l d1           ; make the number 32 bits
     moveq  #3,D0       ; display number in D1.L
     trap    #15
     dbra d2,loop 
```

它可能包含一些您尚未遇到的说明。

# javascript - 将值从 Python 传递到 JavaScript

> ID：15344100
> 
> 赞同：0
> 
> 时间：2013-03-11T16:51:56.693
> 
> 标签：javascript, python, html

对于一个研究项目，我们正在用 python 开发一个系统，该系统从实时传感器获取原始数据并对其应用不同的 DSP 过滤器。到目前为止，一切都很好。系统的另一部分应该是绘制数据和访问一些控制器以修改采样率和其他参数。最近几天我一直在尝试使用 HTML5 + javascript 作为数据绘图的技术；我将 d3.js 用于图形，并使用mimic.js 来实现 xmlrpc 协议以将 python 端与 HTML 文件进行通信。经过大量调整后，我几乎设法与系统的两个部分进行通信。但是，我遇到了“跨源请求”错误（我使用的是 chrome）。

之后，我一直在考虑其他一些策略，以便将 python 与 GUI 进行通信：

1.  使用 SimpleHTTPServer。但是，我需要运行一个 SimpleXMLRPCServer，这样我才能注册函数 (register_function) 来传递值。有没有办法在 SimpleHTTPServer 中实现 xmlrpc？

2.  我一直在考虑使用 json，但我不确定这是否是最好的方法，因为数据流将非常大而且非常快（4 个通道不断更新）。

所以在所有这些测试之后，我真的很感激一条建议：

1.  拥有这样的 HTML5 GUI 是否可行？绘制如此大量的数据是否有效？

2.  如果是这样，在 Python 和 HTML/js 之间实现通信的现实策略是什么？

3.  xmlrpc 是最好的协议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T13:45:19.573

1.  是的。您也可以使用一些 JavaScript 图表库。比如[amCharts](http://amcharts.com)、[highcharts](http://www.highcharts.com/)、[plot](http://code.google.com/p/flot/)。
2.  真的，JSON 更好。
3.  XMLRPC 不是很轻量级。见第 2 页 :)

# mysql - Mysql Query - 最有效的方法是什么？

> ID：15344103
> 
> 赞同：0
> 
> 时间：2013-03-11T16:51:58.643
> 
> 标签：mysql

在我的应用程序中，我需要获取所有用户的 Facebook 好友列表并将其与我的应用程序用户列表进行比较。

此过程应向用户返回已在我的应用程序中注册的他的 Facebook 好友列表。

我的应用程序的服务器是一个 Http 服务器，应用程序查询信息并返回结果。

我的问题如下：

**做我想做的最好的方法是什么？**

我可以想到 2 种方法，但都不能正确填写：

1.  由于我试图不使我的服务器超载 - 我将在我的服务器中编写一个函数，该函数将返回在应用程序中注册的所有 Facebook 用户 ID 列表。在客户端 - 客户端将检查其中哪些与他相关。这里的优点是我不会用需要很长时间来处理的查询使我的 MySql 服务器超载。缺点是我发现这种方式没有“逻辑上的优雅”。
2.  纠正某种程序或函数（或只是使用 IN 元素的简单查询），它将在服务器端处理并仅返回用户相关的 Facebook 用户 ID。优点是它更优雅，缺点是我认为从资源使用的角度来看它不是一个更好的选择，它可能会使我的服务器过载。

很高兴获得建议或一些新想法

# javascript - 使用键盘控制在画布游戏中平滑角色移动

> ID：15344104
> 
> 赞同：15
> 
> 时间：2013-03-11T16:51:59.920
> 
> 标签：javascript, canvas, game-physics, easing

我正在使用画布和 JavaScript 创建一个横向滚动的无尽空间主题游戏。我只是通过使用向上和向下箭头来控制宇宙飞船，我想实现某种运动缓和，这样当我松开按键时飞船不会停止。我环顾四周，没有发现任何东西，而且我自己的尝试也不起作用。这是我尝试过的。

```
Jet.prototype.checkDirection = function () {
if (this.isUpKey) {
    this.drawY -= this.speed;
    if (this.speed < 5) {
        this.speed += 0.1;
    }
}
if (this.isDownKey) {
    this.drawY += this.speed;
    if (this.speed < 5) {
        this.speed += 0.1;
    }
}
if (!this.isUpKey) {
    if (!this.isDownKey) {
        if (this.speed >= 0) {
            this.drawY -= this.speed;
            this.speed -= 1;
        }
    }
}
if (!this.isDownKey) {
    if (!this.isUpKey) {
        if (this.speed >= 0) {
            this.drawY += this.speed;
            this.speed -= 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-11T19:43:12.970

你只是想施加一些摩擦。它很容易。您可以执行以下操作。

```
this.speed*=0.98; 
```

值越低（0.8、0.5 等），您减速的速度就越快。

我提供了一个演示，您可以在其中移动并逐渐放慢速度。继续玩价值，看看它如何影响它。

**[现场演示](http://jsfiddle.net/loktar/dMYvG/)**

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d");

canvas.width = canvas.height = 300;

var x = 150,  //initial x
    y = 150,  // initial y
    velY = 0,
    velX = 0,
    speed = 2, // max speed
    friction = 0.98, // friction
    keys = [];

function update() {
    requestAnimationFrame(update);

    // check the keys and do the movement.
    if (keys[38]) {
        if (velY > -speed) {
            velY--;
        }
    }

    if (keys[40]) {
        if (velY < speed) {
            velY++;
        }
    }
    if (keys[39]) {
        if (velX < speed) {
            velX++;
        }
    }
    if (keys[37]) {
        if (velX > -speed) {
            velX--;
        }
    }

    // apply some friction to y velocity.
    velY *= friction;
    y += velY;

    // apply some friction to x velocity.
    velX *= friction;
    x += velX;

    // bounds checking
    if (x >= 295) {
        x = 295;
    } else if (x <= 5) {
        x = 5;
    }

    if (y > 295) {
        y = 295;
    } else if (y <= 5) {
        y = 5;
    }

    // do the drawing
    ctx.clearRect(0, 0, 300, 300);
    ctx.beginPath();
    ctx.arc(x, y, 5, 0, Math.PI * 2);
    ctx.fill();
}

update();

// key events
document.body.addEventListener("keydown", function (e) {
    keys[e.keyCode] = true;
});
document.body.addEventListener("keyup", function (e) {
    keys[e.keyCode] = false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:29:38.813

我想我要做的是在 keyup 上不要停止船，只是有一个让它减慢一点的函数然后在 setInterval 中调用这个函数，在任何时间间隔给你想要的效果，然后一旦船的速度为零调用 clearInterval

所以在 keyup 上你基本上设置了 setInterval(slowShip, 500)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-10T02:28:35.490

您可以尝试在每一帧上不断降低速度

```
if(!playerUp && !playerDown && moveSpeed > 0){
    moveSpeed--;
} 
```

# c++ - 安全销毁包含 shared_ptr 的地图

> ID：15344108
> 
> 赞同：1
> 
> 时间：2013-03-11T16:52:07.573
> 
> 标签：c++, multithreading, c++11

我正在阅读[Mir 项目](https://launchpad.net/mir)源代码，偶然发现了这段代码：

```
void mir::frontend::ResourceCache::free_resource(google::protobuf::Message* key)
{
    std::shared_ptr<void> value;
    {
        std::lock_guard<std::mutex> lock(guard);

        auto const& p = resources.find(key);

        if (p != resources.end())
        {
            value = p->second;
        }

        resources.erase(key);
    }
} 
```

我以前在其他项目中也看到过这一点。它在擦除之前保存对映射中值的引用，即使该块受到 lock_guard 保护。我不确定他们为什么使用**std::shared_ptr value**来引用该值。

如果我们删除**value = p->second**会有什么影响？

有人请赐教吗？

这是代码[http://bazaar.launchpad.net/~mir-team/mir/trunk/view/head:/src/frontend/resource_cache.cpp](http://bazaar.launchpad.net/~mir-team/mir/trunk/view/head:/src/frontend/resource_cache.cpp)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:59:59.403

我猜这是为了避免`value`在锁定代码中运行析构函数。这个锁是为了保护对映射的修改，并且运行一些任意代码，例如锁定另一个对象的析构函数，是不需要也不需要的。

试想一下，`value`无论出于何种原因，间接访问映射的析构函数，或另一个线程共享结构。您有可能最终陷入僵局。

底线是：从锁定的代码中运行尽可能少的代码，但不能更少。并且永远不要从锁定的代码中调用外部的、未知的函数（例如`shared_ptr`删除器或回调）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:00:20.413

目标是将删除器的实际执行移动`shared_ptr`到释放锁之后。这样，如果删除器（或使用默认删除器的析构函数）需要很长时间，则不会为该操作持有锁。

如果您要删除`value = p->second`，则在持有锁时该值将被销毁。由于锁保护地图，但不保护实际值，因此它持有锁的时间会超过严格必要的时间。

# javascript - 使用 CSS3 rotateY 的卡片翻转效果，但有多个面取决于按钮按下？

> ID：15344109
> 
> 赞同：3
> 
> 时间：2013-03-11T16:52:08.657
> 
> 标签：javascript, css, css-transitions

所以我需要创建一个几乎完全一样的翻转[图像](http://desandro.github.com/3dtransforms/examples/card-01.html)。

但不同之处在于，如果我想要几个按钮并且每个按钮都翻转到特定的面。假设我想要 4 个标记为 1、2、3 和 4 的按钮，并且我想要 4 个不同的卡面，每个卡面都有不同的颜色和对应的数字。因此页面将加载显示面 1，单击按钮 1 不会执行任何操作，但单击按钮 3 将翻转到显示数字 3 的面，依此类推。有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T00:52:58.060

**简单的解决方案**

[从与问题中提到的在线示例](http://desandro.github.com/3dtransforms/examples/card-01.html)相同的方法开始，但在开始旋转之前，将“背面”的内容替换为要旋转到视图中的元素的内容。

每个元素的内容应该单独存储在 HTML 中，并在需要时检索。

```
<div class="container">
    <div class="card">
        <div class="face face1"></div>
        <div class="face face2"></div>
    </div>

    <ul class="store">
        <li>
            <div class="content content1">1</div>
        </li>
        <li>
            <div class="content content2">2</div>
        </li>
        <li>
            <div class="content content3">3</div>
        </li>
        <li>
            <div class="content content4">4</div>
        </li>
    </ul>
</div> 
```

[jQuery 演示](http://jsfiddle.net/Matt_Coughlin/MXv4f/7/)

该演示应该在所有最新版本的 Firefox、Safari 和 Chrome 中都能正常工作。

看起来 IE10 不完全支持该`backface-visibility`属性（带或不带`-ms-`前缀）。这会阻止演示和[在线示例](http://desandro.github.com/3dtransforms/examples/card-01.html)在 IE10 中正常工作。

# xcode - 如何在 Xcode 中获取 PDF 文档的属性，例如版本、总页码

> ID：15344112
> 
> 赞同：0
> 
> 时间：2013-03-11T16:52:12.120
> 
> 标签：xcode, macos, pdf

我尝试通过 Xcode 为我自己的 OSX 制作 PDF 文档管理器。现在我可以获取文档的 URL。使用以下代码：

```
NSOpenPanel *documentOpenPannel = [NSOpenPanel openPanel];
NSInteger situationInt = [documentOpenPannel runModal];

if (situationInt == NSOKButton) {
    NSURL *documentPath = [[documentOpenPannel URLs] lastObject];
} 
```

从 documentPath 中，我已经可以获取一些属性，例如文件大小：

```
NSString *fileSize;
[documentPath getResourceValue:&fileSize forKey:NSURLFileSizeKey error:nil]; 
```

现在我想获取文档的更多属性，例如版本号、总页数。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:03:20.773

你需要使用[`CGPDFDocument`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGPDFDocument/Reference/reference.html). `CGPDFDocumentGetVersion()`，`CGPDFDocumentGetNumberOfPages()`解决您的具体问题。

# regex - 正则表达式对数据进行分组

> ID：15344115
> 
> 赞同：0
> 
> 时间：2013-03-11T16:52:17.470
> 
> 标签：regex

我正在寻找使用正则表达式提取数据 - 示例::

[http://www.test.com/?name=A_B_C_D_E_F&gclid=something](http://www.test.com/?name=A_B_C_D_E_F&gclid=something)

或者

[http://www.test.com/?name=A_B_C_D_E_F](http://www.test.com/?name=A_B_C_D_E_F)

我想提取接下来的 4 个单词`name=A_`

所以所需的输出是 -

```
B
C
D
E 
```

我希望使用反向引用来提取这些值，即

`$1`会回来`B` `$2`会回来`C` `$3`会回来`D`会`$4`回来`E`

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:02:37.513

这应该会给你预期的结果：

`(?<=name=A_)([^\_]+)_([^\_]+)_([^\_]+)_([^\_]+)`

[http://regex101.com/r/xO1oE8](http://regex101.com/r/xO1oE8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:04:26.323

```
(?:\?|&)name=A(_[^_&]+)(_[^_&]+)(_[^_&]+)(_[^_&]+) 
```

# android - Android 应用内购买自由黑客 - 它是如何工作的？

> ID：15344117
> 
> 赞同：12
> 
> 时间：2013-03-11T16:52:20.343
> 
> 标签：android, in-app-purchase

观看此视频：[http ://www.youtube.com/watch?v=Z8sBSQh2kaE](http://www.youtube.com/watch?v=Z8sBSQh2kaE)

有谁知道这个黑客是如何实现的？

据我所见，该应用程序正在使用`PackageManager`查询设备上需要`android.vending.BILLING`权限的所有应用程序，以列出所有支持应用程序内购买的应用程序，然后在启动以某种方式显示 FAKE 信用的应用程序之前继续执行某些操作尝试在 Play 上进行应用内购买时的卡片。

由于这个 hack 需要设备植根，我猜它在运行时以某种方式修补 Play 客户端（？）来做它的事情。

这似乎不再适用于我尝试过的大多数应用程序 - 包括我刚刚使用应用内计费 v3.0 实现的应用程序（消费购买失败，这是一件好事）。

我仍然有兴趣了解这纯粹是为了学术兴趣是如何工作的（或者它是否完全有效）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:34:32.393

应用内的 Google 引擎是如此原始……甚至不值得花时间。API 1/2 和 API 3 的原始示例是许多实际实现的基础。但是那些样本很糟糕。特别糟糕。实际上，潜在的黑客需要破解一些在 Java 中很容易完成的功能。

良好的实施涉及验证实际购买与 Google 应用内服务器的第 3 方（您的）服务器。

# mysql - 使用每个单独行的多个“where”子句更新多行

> ID：15344120
> 
> 赞同：23
> 
> 时间：2013-03-11T16:52:32.987
> 
> 标签：mysql, sql, sql-update

我正在尝试像这样更新我的表：

```
Update MyTable 
SET value     = 1 
WHERE game_id = 1,
      x       =-4,
      y       = 8

SET value     = 2 
WHERE game_id = 1,
      x       =-3,
      y       = 7

SET value     = 3 
WHERE game_id = 2,
      x       = 5,
      y       = 2 
```

我可以这样做，`foreach()`但这会发送超过 50 个单独的查询，这非常慢。这就是为什么我希望将它组合成 1 个大查询。

（我确实为每一行使用了一个**id ，但****game_id**、**x**和**y**的组合是我用来识别我需要的行的方法。）

此处描述的 codeIgniter 的 update_batch() 函数： [使用 CodeIgniter 更新批处理](https://stackoverflow.com/questions/6264955/update-batch-with-codeigniter) 很有帮助并且几乎完美，但它只允许 1 个单个 where 子句，您不能（据我理解和尝试）输入具有多个 where 子句的数组。

我还检查了这个问题： [MYSQL UPDATE SET on the Same Column but with multiple WHERE Clauses](https://stackoverflow.com/questions/9368505/mysql-update-set-on-the-same-column-but-with-multiple-where-clauses) 但它只允许只包含一个不同的 WHERE 子句的多行更新，我需要多个 WHERE 子句！:)

Anwsers 可以使用简单的 SQL，也可以使用 php（和 CodeIgniter）或其他方式。我希望以任何可能的方式解决这个问题；）

我真的可以使用建议/帮助！=D

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-11T16:58:27.323

通过使用尝试一下`CASE`

```
Update  MyTable 
SET     value = CASE 
                     WHEN  game_id = 1 AND x = -4 AND y = 8 THEN 1
                     WHEN  game_id = 1 AND x = -3 AND y = 7 THEN 2
                     WHEN  game_id = 2 AND x =  5 AND y = 2 THEN 3
                     ELSE  value 
                END
WHERE   game_ID IN (1,2,3) AND  -- the purpose of this WHERE clause
        x IN (-4, -3, 5) AND    -- is to optimize the query by preventing from
        y IN (8,7,2)            -- performing full table scan. 
```

# mysql - MySQL 数学函数 - 完成百分比 - （添加 2 列，除法和乘法）

> ID：15344122
> 
> 赞同：1
> 
> 时间：2013-03-11T16:52:36.420
> 
> 标签：mysql, math

我试图计算 MySQL 查询中的百分比。

我有一张桌子：

```
Table: Domains
id   url_count   checked   tablekey_id
1    2           1         10
2    1           2         10
3    1           1         15
4    2           1         22
5    2           2         10 
```

所以数学是：

```
((SUM of the `url_count` column where `checked` >= 2 and `tablekey_id` = 10) / (SUM of the `url_count` column where `tablekey_id` = 10)) *100) 
```

上述等式的数字如下： (3 / 5) * 100 = 60%

谢谢一群人！我没有意识到您可以在 SUM 中放置 if 语句。我的原始问题措辞非常糟糕，所以我想发布我的解决方案，以防有人遇到同样的问题。

```
SELECT (
(SUM(IF(`checked` >= 1, `url_count`, 0)) / SUM(`url_count`))*100
) AS percent
FROM `google_sort_backlink_domains`
WHERE `tablekey_id` = 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:58:28.153

尝试使用 IF() 函数，例如 -

```
SELECT (
    SUM(IF(checked >= 2, url_count, 0)) / COUNT(IF(checked <= 2, 0, NULL))
  ) * 100
FROM table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:09:45.333

@Devart 的答案是 100% 正确的，但您也可以使用`CASE`如下所示的语法来做到这一点。

```
SELECT (
    SUM(CASE WHEN checked >= 2 THEN url_count ELSE 0 END) / COUNT(CASE WHEN checked <= 2 THEN 0 END)
  ) * 100
FROM table 
```

# java - 在 Java 中加载 RSA 私钥（algid 解析错误，不是序列）

> ID：15344125
> 
> 赞同：39
> 
> 时间：2013-03-11T16:52:45.610
> 
> 标签：java, encryption, openssl, rsa

我正在尝试将使用 ssl 生成的私有 RSA 密钥加载到 java 中，我的代码是：

**生成密钥**：

```
openssl genrsa -out mykey.pem 1024 
```

**结果：**

```
-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQCUibP4fY2PA/sGMKMbU6usuIGcOAqgQjD6c2ylVo05Oz7pgjnE
+O0l2MFRUYUGT5KKk/W+0cAXkxaQHE3n8A8X1mHT8eMDmWnzz0PeYjDE8LQmAw8R
Y2FnVKFAB36BIjdb5FsZmCk5QYKU5+nWLMqH/j/IR5AyX5wR2SMoslUg2QIDAQAB
AoGAeJ1s7638IhLIZtldyRXjRKi6ToFPV50IKodJxOSIXt3WE0V05ZaA84eUSxUY
IOzCgRbuqVmnUz1USAdD18AecC8qc7tXTRALLy7q8fxklPwmGPUOvTFmI7gRMUnv
cWrq1gySk3SKpj0YmWnuY9Xmd2+xoWLzUeFD1CROY5OTjIECQQDDlp1+Al7+duR0
XyMlkWLIk0nIbkQ5zlTAEipzmaeTSOJi6YG3EMMz3AGuZb7tw6HFxWqeg1hyKJ+T
cTM3WTdJAkEAwmrCDKE29n3wFOBKsZZFQbDgVOUXCBs2ubEI+ALe1DJU5BlfnrhJ
OINRCNgnwSFNbwxDTkDpR6J6Av2ElAvNEQJAV0dVvk5Wj50Ecz2lFHWdLD41taAn
B9igDxnMIcvWcK4cf+ENhmCPiwvJIEa8/aLIBNYErvmTtVWVaBkirrc8KQJABr+z
+sJB6S6X/fGHRkDkKJKeRvQo54QiUzHdENbwq0cQAVcMJbNZ/1c3oen2/1JLoNY5
I+dG8dCnEaGBT65VMQJBAIDqH1Kqs5tb51cpt6h9ot31SUVud5pSML/babwp3pRs
1s6poreym4PkAyRug0Dgcj1zVLt25TlOHvrL9r3Swq8=
-----END RSA PRIVATE KEY----- 
```

**加载：**

```
String privKeyPEM=readFile("mykey.pem");
privKeyPEM= privKeyPEM.replace("-----BEGIN RSA PRIVATE KEY-----", "").replace("\n", "");
// Remove the first and last lines
privKeyPEM = privKeyPEM.replace("-----END RSA PRIVATE KEY-----", "");
System.out.println(privKeyPEM);

// Base64 decode the data
byte [] encoded = Base64.decode(privKeyPEM);

// PKCS8 decode the encoded RSA private key
PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(encoded);
KeyFactory kf = KeyFactory.getInstance("RSA");
PrivateKey privKey = kf.generatePrivate(keySpec);

// Display the results
System.out.println(privKey); 
```

它抛出一个`IOException : algid parse error, not a sequence`. 错误在哪里？

```
Exception in thread "main" java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException : algid parse error, not a sequence
at sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(Unknown Source)
at java.security.KeyFactory.generatePrivate(Unknown Source)
at base54.encrypt.RSAToy.main(RSAToy.java:36)
Caused by: java.security.InvalidKeyException: IOException : algid parse error, not a sequence
at sun.security.pkcs.PKCS8Key.decode(Unknown Source)
at sun.security.pkcs.PKCS8Key.decode(Unknown Source)
at sun.security.rsa.RSAPrivateCrtKeyImpl.<init>(Unknown Source)
at sun.security.rsa.RSAPrivateCrtKeyImpl.newKey(Unknown Source)
at sun.security.rsa.RSAKeyFactory.generatePrivate(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-03-04T15:56:52.733

根据 Julien Kronegg 的回答，如果您因为文件具有 PKCS#1 格式而收到此错误，则可以使用以下步骤将其转换为 PKCS#8 文件。

首先，将您的 PKCS#1 密钥文件保存到一个名为`priv1.pem`：

```
-----BEGIN RSA PRIVATE KEY-----
[...]
-----END RSA PRIVATE KEY----- 
```

然后，执行以下命令：

```
openssl pkcs8 -topk8 -inform PEM -outform PEM -in priv1.pem -out priv8.pem -nocrypt 
```

这会生成一个名为 的文件`priv8.pem`，它是您的 PKCS#8 格式的密钥文件：

```
-----BEGIN PRIVATE KEY-----
[...]
-----END PRIVATE KEY----- 
```

我从 Java 中使用它，如下所示：

```
String PRIVATE_RSA_KEY_PKCS8 = 
    "-----BEGIN PRIVATE KEY-----\n" +
    "MDSTofml23d....\n" +
    [...] +
    "-----END PRIVATE KEY-----\n";
String key = PRIVATE_RSA_KEY_PKCS8
    .replace("-----BEGIN PRIVATE KEY-----\n", "")
    .replace("\n-----END PRIVATE KEY-----\n", "");
PKCS8EncodedKeySpec keySpec =
    new PKCS8EncodedKeySpec(DatatypeConverter.parseBase64Binary(key));
try {
    KeyFactory keyFactory = KeyFactory.getInstance("RSA");
    PrivateKey privateKey = keyFactory.generatePrivate(keySpec);
    Cipher cipher = Cipher.getInstance("RSA/ECB/OAEPWithSHA1AndMGF1Padding");
    cipher.init(Cipher.DECRYPT_MODE, privateKey);
    byte[] bytes = parseBase64Binary(encryptedNodeIdentifier);
    byte[] decryptedData = cipher.doFinal(bytes);
    return new String(decryptedData);
} catch (GeneralSecurityException e) {
    return "";
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-23T15:28:23.530

这是修改后的 org.apache.jmeter.protocol.oauth.sampler.PrivateKeyReader 代码，仅使用 Java 运行时。它对我有用，它可以加载 PKCS#1 或 PKCS#8 私钥文件并返回 PrivateKey 类。（如果我在复制/粘贴时搞砸了，请告诉我）。

像这样使用它： PrivateKey pk = (new PrivateKeyReader("/path/to/myfile.der")).getPrivateKey();

```
/**
 * 
 */
package default;

/****************************************************************************
 * Copyright (c) 1998-2010 AOL Inc. 
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Modified 23-4-2015 misterti
 *  
 ****************************************************************************/

import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.math.BigInteger;
import java.security.GeneralSecurityException;
import java.security.KeyFactory;
import java.security.PrivateKey;
import java.security.spec.KeySpec;
import java.security.spec.PKCS8EncodedKeySpec;
import java.security.spec.RSAPrivateCrtKeySpec;
import java.util.Collections;
import java.util.HashMap;
import java.util.Map;

import javax.xml.bind.DatatypeConverter;

/**
 * Class for reading RSA private key from PEM file. It uses
 * the JMeter FileServer to find the file. So the file should 
 * be located in the same directory as the test plan if the 
 * path is relative.
 * 
 * <p/>There is a cache so each file is only read once. If file
 * is changed, it will not take effect until the program 
 * restarts.
 * 
 * <p/>It can read PEM files with PKCS#8 or PKCS#1 encodings.
 * It doesn't support encrypted PEM files.
 * 
 */
public class PrivateKeyReader {

  // Private key file using PKCS #1 encoding
  public static final String P1_BEGIN_MARKER 
    = "-----BEGIN RSA PRIVATE KEY"; //$NON-NLS-1$
  public static final String P1_END_MARKER
      = "-----END RSA PRIVATE KEY"; //$NON-NLS-1$

  // Private key file using PKCS #8 encoding
  public static final String P8_BEGIN_MARKER 
    = "-----BEGIN PRIVATE KEY"; //$NON-NLS-1$
  public static final String P8_END_MARKER
      = "-----END PRIVATE KEY"; //$NON-NLS-1$

  private static Map<String, PrivateKey> keyCache =
    Collections.synchronizedMap(new HashMap<String, PrivateKey>());

  protected final String fileName;

  /**
   * Create a PEM private key file reader.
   * 
   * @param fileName The name of the PEM file
   */
  public PrivateKeyReader(String fileName) {
    this.fileName = fileName;
  }

  /**
   * Get a Private Key for the file.
   * 
   * @return Private key
   * @throws IOException
   */

  public PrivateKey getPrivateKey() throws IOException, GeneralSecurityException 
  {
    PrivateKey key = null;
    FileInputStream fis = null;
    boolean isRSAKey = false;
    try {
        File f = new File(fileName);
        fis = new FileInputStream(f);

        BufferedReader br = new BufferedReader(new InputStreamReader(fis));
        StringBuilder builder = new StringBuilder();
        boolean inKey = false;
        for (String line = br.readLine(); line != null; line = br.readLine()) {
            if (!inKey) {
                if (line.startsWith("-----BEGIN ") && 
                        line.endsWith(" PRIVATE KEY-----")) {
                    inKey = true;
                    isRSAKey = line.contains("RSA");
                }
                continue;
            }
            else {
                if (line.startsWith("-----END ") && 
                        line.endsWith(" PRIVATE KEY-----")) {
                    inKey = false;
                    isRSAKey = line.contains("RSA");
                    break;
                }
                builder.append(line);
            }
        }
        KeySpec keySpec = null;
        byte[] encoded = DatatypeConverter.parseBase64Binary(builder.toString());          
        if (isRSAKey)
        {
          keySpec = getRSAKeySpec(encoded);
        }
        else
        {
          keySpec = new PKCS8EncodedKeySpec(encoded);
        }
        KeyFactory kf = KeyFactory.getInstance("RSA");
        key = kf.generatePrivate(keySpec);
    } finally {
      if (fis != null)
        try { fis.close(); } catch (Exception ign) {}  }
    return key;
  }

    /**
     * Convert PKCS#1 encoded private key into RSAPrivateCrtKeySpec.
     * 
     * <p/>The ASN.1 syntax for the private key with CRT is
     * 
     * <pre>
     * -- 
     * -- Representation of RSA private key with information for the CRT algorithm.
     * --
   * RSAPrivateKey ::= SEQUENCE {
     *   version           Version, 
     *   modulus           INTEGER,  -- n
     *   publicExponent    INTEGER,  -- e
     *   privateExponent   INTEGER,  -- d
     *   prime1            INTEGER,  -- p
     *   prime2            INTEGER,  -- q
     *   exponent1         INTEGER,  -- d mod (p-1)
     *   exponent2         INTEGER,  -- d mod (q-1) 
     *   coefficient       INTEGER,  -- (inverse of q) mod p
     *   otherPrimeInfos   OtherPrimeInfos OPTIONAL 
     * }
     * </pre>
     * 
     * @param keyBytes PKCS#1 encoded key
     * @return KeySpec
     * @throws IOException
     */

    private RSAPrivateCrtKeySpec getRSAKeySpec(byte[] keyBytes) throws IOException  {

      DerParser parser = new DerParser(keyBytes);

      Asn1Object sequence = parser.read();
        if (sequence.getType() != DerParser.SEQUENCE)
          throw new IOException("Invalid DER: not a sequence"); //$NON-NLS-1$

        // Parse inside the sequence
        parser = sequence.getParser();

        parser.read(); // Skip version
        BigInteger modulus = parser.read().getInteger();
        BigInteger publicExp = parser.read().getInteger();
        BigInteger privateExp = parser.read().getInteger();
        BigInteger prime1 = parser.read().getInteger();
        BigInteger prime2 = parser.read().getInteger();
        BigInteger exp1 = parser.read().getInteger();
        BigInteger exp2 = parser.read().getInteger();
        BigInteger crtCoef = parser.read().getInteger();

        RSAPrivateCrtKeySpec keySpec = new RSAPrivateCrtKeySpec(
            modulus, publicExp, privateExp, prime1, prime2,
            exp1, exp2, crtCoef);

        return keySpec;
    }    
}

/**
 * A bare-minimum ASN.1 DER decoder, just having enough functions to 
 * decode PKCS#1 private keys. Especially, it doesn't handle explicitly
 * tagged types with an outer tag.
 * 
 * <p/>This parser can only handle one layer. To parse nested constructs,
 * get a new parser for each layer using <code>Asn1Object.getParser()</code>.
 * 
 * <p/>There are many DER decoders in JRE but using them will tie this
 * program to a specific JCE/JVM.
 * 
 * @author zhang
 *
 */
class DerParser {

  // Classes
  public final static int UNIVERSAL = 0x00;
  public final static int APPLICATION = 0x40;
  public final static int CONTEXT = 0x80;
  public final static int PRIVATE = 0xC0;

  // Constructed Flag
  public final static int CONSTRUCTED = 0x20;

  // Tag and data types
  public final static int ANY = 0x00;
  public final static int BOOLEAN = 0x01;
  public final static int INTEGER = 0x02;
  public final static int BIT_STRING = 0x03;
  public final static int OCTET_STRING = 0x04;
  public final static int NULL = 0x05;
  public final static int OBJECT_IDENTIFIER = 0x06;
  public final static int REAL = 0x09;
  public final static int ENUMERATED = 0x0a;
  public final static int RELATIVE_OID = 0x0d;

  public final static int SEQUENCE = 0x10;
  public final static int SET = 0x11;

  public final static int NUMERIC_STRING = 0x12;
  public final static int PRINTABLE_STRING = 0x13;
  public final static int T61_STRING = 0x14;
  public final static int VIDEOTEX_STRING = 0x15;
  public final static int IA5_STRING = 0x16;
  public final static int GRAPHIC_STRING = 0x19;
  public final static int ISO646_STRING = 0x1A;
  public final static int GENERAL_STRING = 0x1B;

  public final static int UTF8_STRING = 0x0C;
  public final static int UNIVERSAL_STRING = 0x1C;
  public final static int BMP_STRING = 0x1E;

  public final static int UTC_TIME = 0x17;
  public final static int GENERALIZED_TIME = 0x18;

  protected InputStream in;

  /**
   * Create a new DER decoder from an input stream.
   * 
   * @param in
   *            The DER encoded stream
   */
  public DerParser(InputStream in) throws IOException {
    this.in = in;
  }

  /**
   * Create a new DER decoder from a byte array.
   * 
   * @param The
   *            encoded bytes
   * @throws IOException 
   */
  public DerParser(byte[] bytes) throws IOException {
    this(new ByteArrayInputStream(bytes));
  }

  /**
   * Read next object. If it's constructed, the value holds
   * encoded content and it should be parsed by a new
   * parser from <code>Asn1Object.getParser</code>.
   * 
   * @return A object
   * @throws IOException
   */
  public Asn1Object read() throws IOException {
    int tag = in.read();

    if (tag == -1)
      throw new IOException("Invalid DER: stream too short, missing tag"); //$NON-NLS-1$

    int length = getLength();

    byte[] value = new byte[length];
    int n = in.read(value);
    if (n < length)
      throw new IOException("Invalid DER: stream too short, missing value"); //$NON-NLS-1$

    Asn1Object o = new Asn1Object(tag, length, value);

    return o;
  }

  /**
   * Decode the length of the field. Can only support length
   * encoding up to 4 octets.
   * 
   * <p/>In BER/DER encoding, length can be encoded in 2 forms,
   * <ul>
   * <li>Short form. One octet. Bit 8 has value "0" and bits 7-1
   * give the length.
     * <li>Long form. Two to 127 octets (only 4 is supported here). 
     * Bit 8 of first octet has value "1" and bits 7-1 give the 
     * number of additional length octets. Second and following 
     * octets give the length, base 256, most significant digit first.
   * </ul>
   * @return The length as integer
   * @throws IOException
   */
  private int getLength() throws IOException {

    int i = in.read();
    if (i == -1)
      throw new IOException("Invalid DER: length missing"); //$NON-NLS-1$

    // A single byte short length
    if ((i & ~0x7F) == 0)
      return i;

    int num = i & 0x7F;

    // We can't handle length longer than 4 bytes
    if ( i >= 0xFF || num > 4) 
      throw new IOException("Invalid DER: length field too big (" //$NON-NLS-1$
          + i + ")"); //$NON-NLS-1$

    byte[] bytes = new byte[num];     
    int n = in.read(bytes);
    if (n < num)
      throw new IOException("Invalid DER: length too short"); //$NON-NLS-1$

    return new BigInteger(1, bytes).intValue();
  }

}

/**
 * An ASN.1 TLV. The object is not parsed. It can
 * only handle integers and strings.
 * 
 * @author zhang
 *
 */
class Asn1Object {

  protected final int type;
  protected final int length;
  protected final byte[] value;
  protected final int tag;

  /**
   * Construct a ASN.1 TLV. The TLV could be either a
   * constructed or primitive entity.
   * 
   * <p/>The first byte in DER encoding is made of following fields,
   * <pre>
   *-------------------------------------------------
     *|Bit 8|Bit 7|Bit 6|Bit 5|Bit 4|Bit 3|Bit 2|Bit 1|
     *-------------------------------------------------
     *|  Class    | CF  |     +      Type             |
     *-------------------------------------------------
   * </pre>
   * <ul>
   * <li>Class: Universal, Application, Context or Private
   * <li>CF: Constructed flag. If 1, the field is constructed.
   * <li>Type: This is actually called tag in ASN.1\. It
   * indicates data type (Integer, String) or a construct
   * (sequence, choice, set).
   * </ul>
   * 
   * @param tag Tag or Identifier
   * @param length Length of the field
   * @param value Encoded octet string for the field.
   */
  public Asn1Object(int tag, int length, byte[] value) {
    this.tag = tag;
    this.type = tag & 0x1F;
    this.length = length;
    this.value = value;
  }

  public int getType() {
    return type;
  }

  public int getLength() {
    return length;
  }

  public byte[] getValue() {
    return value;
  }

  public boolean isConstructed() {
    return  (tag & DerParser.CONSTRUCTED) == DerParser.CONSTRUCTED;
  }

  /**
   * For constructed field, return a parser for its content.
   * 
   * @return A parser for the construct.
   * @throws IOException
   */
  public DerParser getParser() throws IOException {
    if (!isConstructed()) 
      throw new IOException("Invalid DER: can't parse primitive entity"); //$NON-NLS-1$

    return new DerParser(value);
  }

  /**
   * Get the value as integer
   * 
   * @return BigInteger
   * @throws IOException
   */
  public BigInteger getInteger() throws IOException {
      if (type != DerParser.INTEGER)
        throw new IOException("Invalid DER: object is not integer"); //$NON-NLS-1$

      return new BigInteger(value);
  }

  /**
   * Get value as string. Most strings are treated
   * as Latin-1.
   * 
   * @return Java string
   * @throws IOException
   */
  public String getString() throws IOException {

    String encoding;

    switch (type) {

    // Not all are Latin-1 but it's the closest thing
    case DerParser.NUMERIC_STRING:
    case DerParser.PRINTABLE_STRING:
    case DerParser.VIDEOTEX_STRING:
    case DerParser.IA5_STRING:
    case DerParser.GRAPHIC_STRING:
    case DerParser.ISO646_STRING:
    case DerParser.GENERAL_STRING:
      encoding = "ISO-8859-1"; //$NON-NLS-1$
      break;

    case DerParser.BMP_STRING:
      encoding = "UTF-16BE"; //$NON-NLS-1$
      break;

    case DerParser.UTF8_STRING:
      encoding = "UTF-8"; //$NON-NLS-1$
      break;

    case DerParser.UNIVERSAL_STRING:
      throw new IOException("Invalid DER: can't handle UCS-4 string"); //$NON-NLS-1$

    default:
      throw new IOException("Invalid DER: object is not a string"); //$NON-NLS-1$
    }

    return new String(value, encoding);
  }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-05-06T08:41:31.983

试试这个 ：

```
java.security.Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-30T14:04:57.553

您收到此错误是因为您正在读取 PKCS#8 密钥文件，但您的文件具有 PKCS#1 格式（PKCS#1 具有`BEGIN RSA PRIVATE KEY`标题，而 PKCS#8 具有`BEGIN PRIVATE KEY`标题）。

为了读取 PKCS#1 和 PKCS#8 PEM 文件，我使用了 Apache JMeter 的源代码[`org.apache.jmeter.protocol.oauth.sampler.PrivateKeyReader`](http://oauth.googlecode.com/svn-history/r1178/code/branches/jmeter/jmeter/src/main/java/org/apache/jmeter/protocol/oauth/sampler/PrivateKeyReader.java)：

PrivateKey pk = (new PrivateKeyReader("/path/to/myfile.der")).getPrivateKey();

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-06-24T20:34:04.647

或者，您可以将 mykey.pem 转换为 DER 格式并使用现有代码。以下是执行此操作的 openssl 命令

```
 openssl pkcs8 -topk8 -inform PEM -outform DER -in mykey.pem -out mykey.der -nocrypt 
```

新的格式化文件看起来像

```
 3082 0276 0201 0030 0d06 092a 8648 86f7
0d01 0101 0500 0482 0260 3082 025c 0201
0002 8181 00a9 0689 7676 2a63 5779 e4e8
4bb5 8e53 bc44 a975 8254 cb64 5cf2 1499
ad1c 6c35 6027 e357 ac09 0421 2b4b ddb4
1be3 a688 a848 5618 bce8 25d0 2cf2 972b
3801 a023 d6ee d824 4cfb 078f dad8 4317
fc9d 9468 27cc 2f08 f755 3293 76cb 3c60
4302 1c59 a8e8 5ac9 0576 8bb0 6bbb 8f1a
092d 7884 a405 c775 a8ca 7a2c 8037 435c
557a c9f0 a702 0301 0001 0281 8100 8462
6c53 ee25 30fd 98a9 230f f939 6a78 30c7
1114 6d59 8858 0bfa fa8a 4d92 ab13 8eea
4f06 9d61 30a1 7aa0 40aa ff58 b5fc 27fb
d710 4e3b 1f9b b4bd 95ca 1deb d165 063a
da5c 383d e428 cbf6 1f62 4549 5b96 ee2d
b811 4cff c849 9637 67e4 a5d5 1c75 f13b
8ddd b212 ba2f 7118 885e bc98 cab6 5434
d1e8 2a33 c408 1186 be05 6074 7431 0241
00d8 a1e2 d382 d52a 372e 0a62 807f 8283
e615 c7a7 180b e21c b6ce cd55 940f 542b
903f 86a0 e488 74b2 d69d d5d1 27d9 4079
72a2 80f8 c105 3e19 309b dd78 4dbe 440d
0d02 4100 c7bd e5fd ccee 60b2 cbc0 7520
53c1 6442 9f11 e0d0 969f 6315 41cd 7b3c
c279 cebe 4025 a4f4 97c9 6d1b c48f 6f01
cd3b e849 33e6 5f13 7fb6 2780 22d1 f2da 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-13T16:49:05.907

如有必要，您仍然可以加载密钥，

```
public static PublicKey bigIntegerToPublicKey(BigInteger e, BigInteger m)  {
    RSAPublicKeySpec keySpec = new RSAPublicKeySpec(m, e);
    KeyFactory fact = KeyFactory.getInstance("RSA");
    PublicKey pubKey = fact.generatePublic(keySpec);
    return pubKey;
}

public static PrivateKey bigIntegerToPrivateKey(BigInteger e, BigInteger m) {
    RSAPrivateKeySpec keySpec = new RSAPrivateKeySpec(m, e);
    KeyFactory fact = KeyFactory.getInstance("RSA");
    PrivateKey privKey = fact.generatePrivate(keySpec);
    return privKey;
} 
```

你所需要的只是模数和指数。

# android - 字符串编码，移动编码

> ID：15344132
> 
> 赞同：0
> 
> 时间：2013-03-11T16:52:56.653
> 
> 标签：android

我有一个包含我所有应用程序字符串的 strings.xml 文件，我有一些类似 € 的符号，但我遇到了问题。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
     <string name="currency"> € </string>
</resources></resources> 
```

它们通常显示良好，但并非在所有设备中：

![在此处输入图像描述](../Images/ca67697125a5e47a8cc601db8b76159c.png)

如何自动检测设备中的配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:58:52.007

我在我的java类中发现了问题：

```
 webCost.loadData(cost, "text/html", null); 
```

它应该是：

```
 webAbout.loadDataWithBaseURL(null, aboutStr, "text/html","utf-8", null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:26:32.880

您应该使用 Unicode 字符作为货币符号。

所以而不是

```
<string name="currency"> € </string> 
```

用这个

```
 <string name="pound">\u00a3</string>
 <string name="euro">\u20ac</string> 
```

这将在所有设备中看起来都一样。这肯定会解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:13:35.330

您可以为不同的语言创建字符串文件。请阅读“[支持不同语言](http://developer.android.com/training/basics/supporting-devices/languages.html)”。

# html - 仅当没有 div 跟随时，最后一个子选择器才有效

> ID：15344133
> 
> 赞同：0
> 
> 时间：2013-03-11T16:53:00.467
> 
> 标签：html, css, css-selectors

我正在开发一个项目，该项目涉及出现在顶部的消息。但是，尝试选择显示的最后一条错误消息时，last-child 似乎不起作用。你可以在这里看到这个：http: [//jsfiddle.net/XNVCz/](http://jsfiddle.net/XNVCz/)

但是，当我删除 HTML 末尾的一小段代码时；

```
<div class="container"></div> 
```

然后 last-child 再次工作，即使该 div 不属于同一类。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:59:57.653

`:last-child`顾名思义，*选择*其父级的*最后一个子级（如果它也匹配选择器的前一个元素名称）。*

但是，它不承认类名；因此，您的选择器正在寻找*仅*`.messager:last-child`匹配父级的。*`:last-child`*

 *而且，很明显，当您插入另一个元素作为共同父元素的最后一个子元素时，另一个元素不再是该父元素的最后一个子元素。`:last-of-class`而且，遗憾的是，到目前为止，还没有选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:59:46.460

选择`:last-child`器不知道类。

如果它是*“其父元素的最后一个子元素”*（[reference](http://reference.sitepoint.com/css/pseudoclass-lastchild)），它会选择该元素，而不管类、id-s 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:59:59.040

你需要把你的`<div class="message">`放在一个父分隔符中，以便使用'：last-child'来限定它们。

[jsfiddle.net/XNVCz/1/](http://jsfiddle.net/XNVCz/1/)

```
<div>
    <div class="messager err">
        <div> <strong>Error:</strong> You did not enter the verification code properly.
            <a class="closemessage"><span aria-hidden="true" class="icon-x"></span></a>
        </div>
    </div>
    <div class="messager err">
        <div> <strong>Error:</strong> You did not enter the verification code properly.
            <a class="closemessage"><span aria-hidden="true" class="icon-x"></span></a>
        </div>
    </div>
</div> 
```*

# php - 如何在php中将div值传递给mysql查询

> ID：15344135
> 
> 赞同：-8
> 
> 时间：2013-03-11T16:53:06.720
> 
> 标签：php, javascript, ajax

如何在php mysql中将div值传递给数据库

例如说

我有

```
<div id='item'>50</div> 
```

是否有可能将 div 值 50 传递给 select 查询 where 条件

例如说

```
<php
    $sql =  "SELECT * FROM TABLE_NAME WHERE id = 50"
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:00:37.277

[笑话] 只需在您的用户名前加上**A**和 tada！你得到答案！[/玩笑]

Javascript -

```
var reqText = document.getElementById('source_div').innerHTML;
var xhr = new XMLHttpRequest();
xhr.open('GET', 'test.php?req='+reqText, true);
xhr.onload = function() {
    //do stuff
};
xhr.send(null); 
```

测试.php -

```
<?php
    $req = $_GET['req'];
    //use $req in your sql query.
?> 
```

# silverlight - windows phone 上的音频路由？

> ID：15344140
> 
> 赞同：1
> 
> 时间：2013-03-11T16:53:12.637
> 
> 标签：silverlight, windows-phone-7, audio, routing, call

我正在制作一个应用程序，它应该让我打电话给某人并让他听我录制的声音。当我自己播放声音时，它会从内置扬声器中消失，而当我在手机上使用它时，根本不会播放声音！

或者我希望能够使我的声音遵循与我的声音在与某人交谈时相同的路径。我能做什么？预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:41:32.703

当前版本的 Windows Phone SDK 无法做到这一点。除非您计划为 Windows Phone 8[创建自己的 VoIP 应用程序（](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206983%28v=vs.105%29.aspx)[此处](http://code.msdn.microsoft.com/wpapps/ChatterBox-VoIP-sample-app-b1e63b8b)提供示例）。

# sql-server - SQL SMO 使用行构造函数编写 INSERT 脚本

> ID：15344143
> 
> 赞同：0
> 
> 时间：2013-03-11T16:53:19.327
> 
> 标签：sql-server, smo

我编写了以下 PowerShell 代码以将表中的数据导出为 INSERT 语句：

```
[Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.SMO") | Out-Null

$srv = new-object Microsoft.SqlServer.Management.SMO.Server
$db = $srv.Databases["MYTESTDB"]

$scripter = new-object Microsoft.SqlServer.Management.SMO.Scripter $srv
$scripter.Options.FileName = "C:\tmp\data.sql"
$scripter.Options.ToFileOnly = $TRUE
$scripter.Options.ScriptSchema  = $FALSE
$scripter.Options.ScriptData  = $TRUE
$scripter.EnumScript($db.tables['MYTABLE']) 
```

这将以以下形式导出：

```
INSERT [dbo].[MYTABLE] ([MYCOLUMN1], [MYCOLUMN2], [MYCOLUMN3]) VALUES ('something1', 'something1', 'something1')
INSERT [dbo].[MYTABLE] ([MYCOLUMN1], [MYCOLUMN2], [MYCOLUMN3]) VALUES ('something2', 'something2', 'something2')
INSERT [dbo].[MYTABLE] ([MYCOLUMN1], [MYCOLUMN2], [MYCOLUMN3]) VALUES ('something3', 'something3', 'something3') 
```

但我正在寻找的是以下形式，我相信它被称为“行构造函数”：

```
INSERT [dbo].[MYTABLE] ([MYCOLUMN1], [MYCOLUMN2], [MYCOLUMN3]) VALUES
('something1', 'something1', 'something1'),
('something2', 'something2', 'something2'),
('something3', 'something3', 'something3') 
```

是否可以让 SMO 生成此表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:50:10.033

我不这么认为。SMO 支持可追溯到支持该语法之前的 SQL 版本。除了制作更小的 DML 脚本之外，通过向 SMO 添加该功能，他们几乎没有什么收获，而且这会降低他们在代码库中的可维护性。

# mysql - MySql 通过分组查询最小值和最大值

> ID：15344145
> 
> 赞同：0
> 
> 时间：2013-03-11T16:53:21.167
> 
> 标签：mysql, sql, database, select

输入表：

![桌子](../Images/f66ca093b6881794fc15afa04ba465d0.png)

通过考虑上表，我想列出给定**输入状态 "b"****按订单 ID 分组的开始和结束日期**。现在我正在使用许多 sql 查询并在 java 中将它们合并在一起。但我想把它写在 mysql 的单个 sql 查询中。谁能帮我在单个 sql 查询中写这个。

 **输出 ：

![在此处输入图像描述](../Images/92461b30f874cb2f411bb8052906c37c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:54:44.833

用这个：

```
SELECT OrderId, MIN(createdDate) as MinDate, MAX(createdDate) as MaxDate
FROM tbl1
WHERE fromStatus = 'b' or inputStatus = 'b'
GROUP BY OrderId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:55:30.913

我怀疑您的查询中缺少该`WHERE`子句。

```
SELECT  orderID, 
        MIN(createdDate) min_date,
        MAX(createdDate) max_date
FROM    tableName
WHERE   'b' IN (fromStatus, toStatus)
GROUP   BY OrderID 
```**

# java - Android 地图视图未加载内容

> ID：15344146
> 
> 赞同：2
> 
> 时间：2013-03-11T16:53:24.570
> 
> 标签：java, android, google-maps, android-mapview

首先，我知道这里有很多关于这个问题的线索，但我都阅读了它们，并尝试了几乎所有的东西。那么我的问题是什么。我正在开发一个带有谷歌地图的应用程序，我也遇到了一个众所周知的问题，即 mapView 加载良好，但它不包含任何内容（只有灰色的空白矩形）。

这是我尝试过的：

*   我三重检查我的 API 代码
*   我重新生成了我的 API 代码
*   我检查了所有的权限
*   还有很多其他的东西

主布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:enabled="true"
    android:apiKey="my key"/>

</RelativeLayout> 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.gps.gpsclientsoftware"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application

        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps"/> 
        <activity
            android:name="com.gps.gpsclientsoftware.GPSClientActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

活动代码：

```
package com.gps.gpsclientsoftware;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class GPSClientActivity extends MapActivity {

    private MapView mapView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

我在启动应用程序时发现的一个警告是：

```
03-11 17:51:03.751: E/MapActivity(8581): Couldn't get connection factory client 
```

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-20T04:00:37.353

检查这个...

[http://ucla.jamesyxu.com/?p=287](http://ucla.jamesyxu.com/?p=287)

您需要覆盖所有方法。不要错过任何一个。

我做到了，我得到了一个工作的 MapView。

（onLowMemory 似乎可以跳过。）

（MapView 比 MapFragment 效果更好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:46:08.063

自 2012 年 12 月起，Google 发布了 Google 地图第 2 版。这意味着新应用程序应使用此版本，并且仅为 v2 地图提供 api 密钥。
您的实施似乎适用于谷歌地图 v1。[在这里](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)
查看详细指南，但快速浏览一下，我发现您的 android 清单中缺少以下内容：

```
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="your_api_key"/>
<permission
        android:name="your.project.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>

<uses-permission android:name="your.project.permission.MAPS_RECEIVE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="your key" /> 
```

此外，要在手机上运行谷歌地图，您需要安装谷歌播放服务。为了检查它是否已经安装并且谷歌地图 v2 在您的设备上工作，我建议使用使用 v2 地图的应用程序，如[trulia](https://play.google.com/store/apps/details?id=com.trulia.android&hl=el)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-18T13:27:22.410

正如[hsu.tw 所](https://stackoverflow.com/users/2817732/hsu-tw)指出的，我们需要**`MapView`**从片段生命周期方法中调用生命周期方法。

但是拥有布局文件的**MapView**部分会导致问题，因为在膨胀片段布局之前调用**onCreate**`MapView's onCreate()` [所以永远不会被调用]。

下面的方法对我有用。[**如果您将此 Fragment 添加到 BackStack** **，可能需要注意删除`MapView`**]

```
class MapFragment : BaseFragment() {

    var mapView: MapView? = null

    override fun getFragmentLayout() = R.layout.fragment_map

    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        (view as? LinearLayout)?.addView(mapView, LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.MATCH_PARENT))
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        // create map view
        mapView = MapView(context /*, GoogleMapOption for configuration*/)
        mapView?.onCreate(savedInstanceState)
    }

    override fun onStart() {
        super.onStart()
        mapView?.onStart()
    }

    override fun onPause() {
        super.onPause()
        mapView?.onPause()
    }

    override fun onResume() {
        super.onResume()
        mapView?.onResume()
    }

    override fun onSaveInstanceState(outState: Bundle?) {
        super.onSaveInstanceState(outState)
        mapView?.onSaveInstanceState(outState)
    }

    override fun onStop() {
        super.onStop()
        mapView?.onStop()
    }

    override fun onLowMemory() {
        super.onLowMemory()
        mapView?.onLowMemory()
    }

    override fun onDestroy() {
        super.onDestroy()
        mapView?.onDestroy()
    }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-11T17:16:32.080

将清单中的“我的密钥”替换为您的实际 API 密钥。

```
android:apiKey="my key"/> 
```

可以在此处获取 API 密钥： [https ://developers.google.com/maps/documentation/android/start#obtaining_an_api_key](https://developers.google.com/maps/documentation/android/start#obtaining_an_api_key)

# forms - 如何在模态 jquery 对话框中呈现 Orchard CMS 自定义表单

> ID：15344155
> 
> 赞同：1
> 
> 时间：2013-03-11T16:53:58.547
> 
> 标签：forms, modal-dialog, orchardcms

我已经看过并没有找到关于这个主题的任何内容。不过，这必须是一个普遍的要求。我假设如果我可以推断出我的表单的路线，那么我可以通过类上的 jquery 点击操作将其调用为模态。

我可以以这种方式呈现整个页面（即带有页眉、页脚和导航） - 但我只想在对话框中加载实际的表单部分而不是整个页面。

我是果园的新手——尽管除了这个绊脚石之外我印象深刻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:54:26.943

因为 Orchard 是一个 MVC，所以页面上的所有内容（小部件，或常规页面等）都有其视图。您可以通过创建[Alternate](http://docs.orchardproject.net/Documentation/Customizing-Orchard-using-Designer-Helper-Tools)来覆盖任何此类视图。[使用Designer Tools](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Orchard.DesignerTools)真的很简单。希望能帮助到你。

# objective-c - 将 UIImageView 添加到单元格边界之外的 UITableViewCell

> ID：15344159
> 
> 赞同：0
> 
> 时间：2013-03-11T16:54:12.070
> 
> 标签：objective-c, cocoa-touch, uitableview, uiimageview, uitapgesturerecognizer

我正在向`UIImageView`我的 custom添加一个`UITableViewCell`。然后，此图像将显示在单元格边界之外。我还在`UITapGestureRecognizer`图像中添加了一个，这样当我点击图像时，它就会从视图中删除。

但是，当我点击图像时，它下方的另一个单元格会在点击时做出反应。因此，向图像添加轻击手势识别器似乎没有任何效果。是的，我已经为图像设置`userInteractionEnabled`了`YES`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:56:34.773

“然后，此图像将显示在单元格边界之外。” 您的视图将不会收到超出其边界的触摸，因此如果它的父视图没有，子视图将不会收到触摸

# c++ - Qt 中的锥形渐变（没有 QConicalGradient）

> ID：15344163
> 
> 赞同：2
> 
> 时间：2013-03-11T16:54:23.477
> 
> 标签：c++, qt, graph-algorithm

我必须在 Qt C++ 中绘制一个锥形渐变，但我不能使用 QConicalGradient。我确实有一个线性渐变，但我不知道如何制作一个锥形渐变。我不想要完成的代码，但我要求一个简单的算法。

* * *

```
for(int y = 0; y < image.height(); y++){
    QRgb *line = (QRgb *)image.scanLine(y);

    for(int x = 0; x < image.width(); x++){
        QPoint currentPoint(x, y);
        QPoint relativeToCenter = currentPoint - centerPoint;
        float angle = atan2(relativeToCenter.y(), relativeToCenter.x);
        // I have a problem in this line because I don't know how to set a color:
        float hue = map(-M_PI, angle, M_PI, 0, 255);
        line[x] = (red << 16) + (grn << 8) + blue;
    }
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:50:56.620

这是一些伪代码：

给定一些要绘制的区域，以及为渐变定义的中心...

对于您在该区域中绘制的每个点，计算与渐变中心的角度。

```
// QPoint currentPoint;  // created/populated with a x, y value by two for loops
QPoint relativeToCenter = currentPoint - centerPoint;
angle = atan2(relativeToCenter.y(), relativeToCenter.x()); 
```

然后使用线性渐变或某种映射函数将该角度映射到颜色。

```
float hue = map(-PI, angle, PI, 0, 255); // convert angle in radians to value
// between 0 and 255 
```

绘制该像素，并为您所在区域的每个像素重复。

编辑：根据渐变的图案，您将需要创建不同的`QColor`像素。例如，如果你有一个“彩虹”渐变，只是从一种色调到另一种色调，你可以使用这样的线性映射函数：

```
float map(float x1, float x, float x2, float y1, float y2)
{
     if(true){
          if(x<x1)
                x = x1;
          if(x>x2)
                x = x2;
     }

     return y1 + (y2-y1)/(x2-x1)*(x-x1);
} 
```

然后使用输出的值创建一个`QColor`对象：

```
float hue = map(-PI, angle, PI, 0, 255); // convert angle in radians to value
// between 0 and 255
QColor c;
c.setHsl( (int) hue, 255, 255); 
```

然后将此`QColor`对象与您的`QPainter`or`QBrush`或`QPen`您正在使用的对象一起使用。或者，如果您将 qRgb 值放回：

```
line[x] = c.rgb(); 
```

[http://qt-project.org/doc/qt-4.8/qcolor.html](http://qt-project.org/doc/qt-4.8/qcolor.html)

希望有帮助。

# java - 为什么我的 java -version 与我在 mvn --version 中看到的不同

> ID：15344165
> 
> 赞同：0
> 
> 时间：2013-03-11T16:54:32.390
> 
> 标签：java, maven, version

当我输入

C:\ 中的 java -version 我看到 java 版本“1.7.0_05”

当我输入

mvn --version 我看到：

Java版本：1.6.0_37

那么为什么会有这种差异呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:56:17.553

JAVA_HOME 和 PATH 环境变量指向不同的 java 目录/安装？

# mysql - 如何在 Mac 的 MAMP 中允许远程连接到 mysql 数据库

> ID：15344168
> 
> 赞同：0
> 
> 时间：2013-03-11T16:54:40.140
> 
> 标签：mysql, database, connection

我的 Mac 中有一个使用 MAMP 的 MySQL 数据库。我需要使用来自 IP 的远程服务器的 PHP 脚本连接到该数据库，例如 184.173.9 ...。我已经尝试了 2 天，但没有运气。

我尝试了一些论坛，他们要求在 MAMP 的 my.cnf 文件中注释掉 skip-networking 并使用 bind-address 和远程服务器的 IP。首先，我没有在 MAMP 中找到 my.cnf 文件，但最终从 Library/support-files/my-medium.cnf 中找到了一个。我复制了它并放在了tmp/mysql/my.cnf。但没有任何效果。

我还在系统偏好设置/安全和隐私中关闭了防火墙。

我用来连接的 php 代码如下所示：

mysql_connect('176.249.200....:3306', 'test', 'test') 或 die(mysql_error());

你能告诉我我还缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-17T07:48:34.067

1.  `GRANT ALL PRIVILEGES ON database.* TO 'user'@'%' IDENTIFIED BY 'newpassword';`

% 是一个通配符，我们可以从任何 IP 地址连接我们的 MySQL 服务器。您也可以执行 '%.domain.com' 或 '%.10.10.10' （针对特定的 Ip 或域地址）。

2.  `flush privileges`使更改生效。

3.  MySql 3306 端口可以自由远程访问；所以我们需要在 MySQL 配置文件中绑定 IP 地址。

    `vi /etc/mysql/my.cnf` 在文件中，搜索 [mysqld] 部分块并添加新的绑定地址`bind-address = 127.0.0.1` 注释并添加您的 IP 地址。如果您的本地 IP 地址随机更改，则使用`bind-address = 0.0.0.0`

然后最后一步是重启MySql服务器。

4.  在您的终端中登录 mysql 服务器 `mysql -u usename -p -A -h youripaddress`

`-A` `读取表信息以完成表和列名称您可以关闭此功能以获得更快的启动 -A

注意：首先ping你的IP地址。并查看是否有任何丢包和延迟问题。

我使用下面这段代码在 php 中连接 MySQL 服务器。

```
$conn = ''; 
```

`try { $conn = new PDO("mysql:host=ipaddress;dbname=databasename", 'userName', 'password'); } catch(PDOException $e) { echo "Connection failed: " . $e->getMessage(); }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:48:50.897

首先确保它连接（你应该得到一个连接被拒绝而不是超时/连接错误）。您可以通过执行以下命令进行测试：

```
mysql -h ip.addr.goes.here -p -u test 
```

如果无法连接，则可能是防火墙问题或配置问题。

如果它连接并且权限被拒绝，那么它可能是一个授权问题。创建一个用户然后授予对表的访问权限

```
 CREATE USER 'dbusername'@'%' IDENTIFIED BY 'some_pass';
  GRANT ALL PRIVILEGES ON *.* TO 'dbusername'@'%' 
```

请注意，如果您将 % 替换为 localhost，则您的用户将在本地访问，如果您指定 ip，则从特定 ip 获得访问权限；如果您指定 %，则仅远程访问。mysql页面上的更多详细信息[http://dev.mysql.com/doc/refman/5.1/en/adding-users.html](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)

之后，刷新权限以确保它们生效：

```
 flush privileges 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:26:19.077

这是输出：

授予所有特权。TO 'test'@'%' 识别...

GRANT ALL PRIVILEGES ON test.* TO 'test'@'%'

在 easytask 上授予所有权限。* TO 'test'@'%'...

IP 地址 184.173.9.... 是我拥有 PHP 脚本的专用远程服务器。而 176.249.200.... 是我的本地 IP，3306 是 MySQL 端口。

# unit-testing - Symfony2：如何选择运行单元测试时使用的环境？

> ID：15344171
> 
> 赞同：4
> 
> 时间：2013-03-11T16:54:44.693
> 
> 标签：unit-testing, symfony, phpunit

我需要针对两种不同的数据库配置运行 Symfony2 应用程序的单元测试，一种使用 MySQL 数据库，另一种使用 SQLite 数据库。

我目前通过编辑来选择运行单元测试时要使用的数据库配置`app/config/config_test.yml`。我要么取消注释 MySQL 相关的数据库设置并注释掉 SQLite 相关的数据库设置，反之亦然。

我不想这样做，而是有两个配置文件 - 也许`app/config/config-test-mysql.yml`和`app/config/config-test-sqlite.yml`- 并在运行测试时从命令行选择测试环境。

在查看了默认的 Symfony2 phpunit 配置`app/phpunit.xml.dist`并查看了配置使用的引导文件 ( `app/bootstrap.php.cache`) 之后，我无法确定`test`运行单元测试时环境的默认设置。

**运行单元测试时如何选择要使用的环境？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:38:18.523

我还没有尝试过这个解决方案，但我相信这是一个很好的线索。

我的单元测试类扩展`Symfony\Bundle\FrameworkBundle\Test\WebTestCase`它使您能够创建一个`Client`本身创建一个`Kernel`.

在您的单元测试中，您可以这样做：

```
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class DatabaseRelatedTest extends WebTestCase
{
    private static $client;

    public function setUp()
    {
        // this is the part that should make things work
        $options = array(
            'environment' => 'test_mysql'
        );
        self::$client = static::createClient($options);
        self::$client->request('GET', '/foo/bar'); // must be a valid url
    }
} 
```

您将能够使用客户端的容器访问`EntityManager`和扩展。`Connection`

```
self::$client->getContainer()->get('doctrine') 
```

理想的情况是将环境的名称传递给`setUp`使用`phpunit.xml.dist`文件的方法。这可能是一个半答案，但我相信这是一个很好的线索。

# javascript - touchevent在手机浏览器中的相对位置

> ID：15344173
> 
> 赞同：2
> 
> 时间：2013-03-11T16:54:51.053
> 
> 标签：javascript, events, enyo

我在获取触摸事件与其发生的 html 元素的相对位置时遇到问题。我知道，这可能被问了一百万次。但是我为此苦苦挣扎了好几天，并查看了许多解决方案。

奇怪的是，在我测试的所有桌面浏览器上，它都可以工作，但在任何移动浏览器上都没有。

我在桌面上测试过

*   歌剧
*   铬合金
*   火狐

在手机上

*   HTC One X (4.1) 铬
*   三星 Note 10.1 (4.1) 股票浏览器
*   三星 Note 10.1 (4.1) 铬
*   Nexus 7 (4.2) 铬

这是我的代码的[jsfiddle](http://jsfiddle.net/Qx74F/3/)。

问题似乎是，如果我捕获事件的画布位于滚动区域内，则元素的`scrollTop`属性在移动浏览器上设置为，它在桌面浏览器上具有适当的值。`offsetParent``0`

那么这是一个已知的错误吗？还是我在这里监督了什么？更重要的是，是否有解决方法或其他方法来实现我的目标？

这是我的一些代码，我如何计算相对位置：

```
getRelativePosition: function (element, event ) {
var position = { x : event.pageX, y : event.pageY };

do {

  this.log(element.offsetTop);
  this.log(element.offsetHeight);

  position.x -= element.offsetLeft;
  position.y -= element.offsetTop;

  position.x += element.scrollLeft;
  position.y += element.scrollTop;

} while(element = element.offsetParent);

return position;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:12:53.617

该问题可能是因为 Enyo 使用 CSS 3D 变换来改进某些平台上的滚动。有一个新的实用函数叫做`getAbsoluteBounds`put into core 来计算相对位置。

您可能会检查它是否可以处理您的情况。简单看一下，我不确定它与您的有多大不同。如果没有，您可能需要在其上提交 Jira。

# hudson - 使用构建后操作作为构建步骤

> ID：15344174
> 
> 赞同：1
> 
> 时间：2013-03-11T16:54:51.900
> 
> 标签：hudson, jira, hudson-plugins

是否可以将构建后操作用作构建步骤？我遇到的问题是 JIRA Hudson 集成插件不允许我使用某些步骤作为构建步骤，但就像构建后操作一样。我使用以下操作：“将 JIRA 版本标记为已发布”、“将与 JQL 匹配的问题移动到指定版本”。当我将它们用作发布操作并且作业失败时，这些步骤会在最后执行，这真的很烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:20:23.950

是的。该插件将满足您的要求： [https ://wiki.jenkins-ci.org/display/JENKINS/Any+Build+Step+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Any+Build+Step+Plugin)

# javascript - 从 javascript 应用程序发送和接收加密数据

> ID：15344175
> 
> 赞同：1
> 
> 时间：2013-03-11T16:54:54.690
> 
> 标签：javascript, encryption

我有一个交互式 html5 应用程序，可以让人们在客户端自定义产品。当用户进行定制时，价格会根据单个组件的价格进行更新。

完成此操作后，该人点击结帐，我将定制发送到服务器，然后服务器接管结帐过程。

显然向服务器发送价格数据是没有意义的，因为任何人都可以欺骗 POST 数据。因此，我尝试编写一个服务器端脚本，该脚本将根据所选组件重新生成价格（与自定义数据一起发送到服务器），并在结帐时显示。然而，由于提供了复杂的定制，服务器端的计算被证明是非常困难的；而且似乎我必须在服务器端重写整个客户端自定义逻辑（这是很多工作）。

在我继续编写服务器端脚本之前，我想知道是否有可能以一种无法欺骗的方式（也许是非对称密钥身份验证）将价格数据发送到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:09:05.680

你永远不应该永远相信客户端代码。如果您不想为重写客户端代码而头疼，您*可以*将相关的 JavaScript 放在服务器上并从您的服务器代码中调用它（并不是我建议您应该这样做）。我建议做的另一件事是在用户完成自定义后根据完整回发的内容重新计算价格，然后向用户显示重新计算的价格，以便他们确认。这样，如果发生任何客户端恶作剧，无论如何用户都会得到真实价格，而且我敢肯定，即使它与之前的价格略有不同，您的支持人员也会听到所有有关它的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:09:43.817

## 永远不要相信客户发给你的信息。

要回答您的问题，可以使用加密将数据从客户端发送到服务器。然而，这里的问题是被加密的数据甚至可以在加密之前被修改。因此，加密并不是真正的解决方案。客户端可能会在加密之前修改数据，如果没有服务器端检查，服务器将不知道这一点。

即使使用公私钥加密，这仍然是不安全的。只能保证您的数据不会被从用户篡改到服务器。它不能被*第三方*欺骗，但您的用户可以欺骗它，从而使加密毫无意义。因此，**不要相信用户**会向您发送有效的合法信息。

您真的应该仔细检查服务器中的所有内容。除非隐私是一个问题（这可能基于您的描述），否则您不需要加密。这可以通过使用 https 轻松解决。

您创建的客户端 javascript 可以作为对用户的即时反馈，他们在更改表单时会看到价格。这**很好**，因为他们不需要等待服务器处理信息，服务器应该在提交表单时处理这些信息。

# android - OnReceive 中使用的共享首选项不会更新

> ID：15344177
> 
> 赞同：0
> 
> 时间：2013-03-11T16:55:02.750
> 
> 标签：android, broadcastreceiver

我有一项服务可以跟踪电池信息并将其存储在共享首选项中。然后从我的主要活动中`BroadcastReceiver`（`OnReceive`用于聆听`ACTION_BATTERY_CHANGED`）

每次 OnReceive 发生电池电量和温度变化时，但我的共享首选项保持不变，直到我改变我的屏幕方向（我认为是因为活动的娱乐）。请帮助我以某种方式使 onReceive 方法也更新共享首选项。

我的主要活动：

```
public class MainActivity extends Activity {
    protected void onCreate(Bundle savedInstanceState) {
        appPrefs = new AppPreferences(getApplicationContext());
    }
    ......

    /* Broadcast Receiver for battery stats  */
    BroadcastReceiver batteryReceiver = new BroadcastReceiver() {
        .....
        private TextView text;
        int level = -1;

        @Override   
        public void onReceive(Context context, Intent intent) {

            level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            text=(TextView) findViewById(R.id.TV_text);
            text.setText("level"+level+"something from Shared Pref"+appPrefs.getAnything());
        }
    }
} 
```

我的共享偏好：

```
public class AppPreferences extends PreferenceActivity {

    private static final String APP_SHARED_PREFS = "com.aydabtu.BroadcastSMS_preferences"; //  Name of the file -.xml
         private SharedPreferences appSharedPrefs;
         private Editor prefsEditor;

         public AppPreferences(Context context)
         {
             this.appSharedPrefs = context.getSharedPreferences(APP_SHARED_PREFS, Activity.MODE_PRIVATE);
             this.prefsEditor = appSharedPrefs.edit();
         }

         public long getAnything() {
             return appSharedPrefs.getLong("Anything", 9);

         }

         public void setAnything(long a) {
             prefsEditor.putLong("Anything", a);
             prefsEditor.commit();
         } 
```

我的服务：

```
BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        ......
        appPrefs.setAnything(a); 
```

那么，为什么共享首选项在 OnReceive 方法中没有更新为级别或温度？怎么办？任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:40:15.277

最后，经过这么多研究，我可以让它工作：只需添加：

```
private Intent starterIntent; 
```

在班级名称上方的班级成员区域中，在我的主要班级下面的示例中：

```
public class MainActivity extends Activity {
private Intent starterIntent; 
```

然后在您想要放置代码以刷新活动而不向用户显示的任何地方：

```
 finish();
                            starterIntent.setFlags(intent.FLAG_ACTIVITY_NO_ANIMATION);
                            startActivity(starterIntent);
                            overridePendingTransition(0,0); 
```

# latex - 从 Maxima 输入生成 LaTeX

> ID：15344178
> 
> 赞同：18
> 
> 时间：2013-03-11T16:55:05.983
> 
> 标签：latex, maxima

我想使用 Maxima 来评估文档。将 Maxima 输出转换为 TeX 很容易：

```
(%i1) tex(5*x^2+sin(x)+c)$
$$\sin x+5\,x^2+c$$ 
```

但是，它不适用于先前输入的行：

```
(%i2) 5*x^2+sin(x)+c;
                                           2
(%o2)                          sin(x) + 5 x  + c
(%i3) tex(%i2);

\begin{verbatim}
(%i2)sin(x)+5*x^2+c;
\end{verbatim}

(%o3)                                (%i2) 
```

经过大量研究（包括[这里](http://www.ma.utexas.edu/pipermail/maxima/2008/012549.html)很接近但没有雪茄）我已经空了。有什么见解吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T17:59:48.793

试试这个。

```
tex (''%i2); 
```

或者

```
apply (tex, [%i2]); 
```

# python - 在 Tkinter 画布中单击其表示后返回对象信息

> ID：15344185
> 
> 赞同：0
> 
> 时间：2013-03-11T16:55:17.463
> 
> 标签：python, tkinter

我有一堆相互交互的对象。他们都在 Tkinter 画布上绘制构成自己表示的椭圆，并将表示的 Tkinter id 存储为属性。

我怎样才能做到这一点，当我单击其中一个椭圆时，我的程序将打印该椭圆所代表的对象的其他属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:28:13.237

当您单击一个项目时，您可以获得被单击的项目的画布项目 ID。然后，您将使用此信息来查找实际对象。您可以遍历所有对象以查找具有给定 id 的对象，也可以保留将 id 映射到对象的字典。拥有实际对象后，您可以根据需要打印其他属性。

# iframe - MDN 怎么能检测到来自服务器端 iframe 的请求并且不发送任何内容？

> ID：15344187
> 
> 赞同：1
> 
> 时间：2013-03-11T16:55:21.027
> 
> 标签：iframe, copy-protection

*请注意：这个问题与*[服务器端检测页面显示在 IFrame 内](https://stackoverflow.com/questions/725871/server-side-detection-that-a-page-is-shown-inside-an-iframe)没有直接关系，因为我向您展示了一个实例，*看起来*MDN（Mozilla 开发人员网络）的人*已经在*检测该内容正在传递到 iframe，但是，如果您通读此内容，我将讨论这根本与服务器端无关的可能性；这可能是某种“权利”问题，以某种我不知道的方式或方式宣布。关键是要了解已经存在的东西是如何*工作*的。

首先，我不想把 MDN（Mozilla 开发者网络）的内容当作我自己的。我问这个是因为我真的对此感到困惑。MDN 的人似乎已经掌握了一个很好的技巧，我很想知道它，但它可能比我意识到的要简单。

代码只有：

```
<iframe src="https://developer.mozilla.org/en-US/docs/HTML/HTML5"></iframe> 
```

举个例子，这个小提琴：

[http://jsfiddle.net/jfcox/D3UNZ/](http://jsfiddle.net/jfcox/D3UNZ/)

您是否注意到 iframe 中没有内容？Chrome 网络选项卡上似乎没有任何与请求相关的内容。

我向你保证，这适用于“普通”网站，例如 example.org。见[http://jsfiddle.net/jfcox/nPwcu/](http://jsfiddle.net/jfcox/nPwcu/)

所以，我问，他们正在做什么来检测来自 的请求`iframe`？是否有一些我不知道的浏览器福？奇怪的是，情况可能就是这样。来自 IE9。

> 为帮助保护您输入本网站的信息的安全性，此内容的发布者不允许将其显示在框架中。

哇！好的，所以也许它不是服务器端的，也许都是 Browser-Fu。即便如此，IE9 和这些其他浏览器怎么知道我不知道的？我需要查找什么来了解这个？

*我有自己的怀疑，即网站根目录中有一些文件（例如`crossdomain.xml`用于 Flash 的文件）定义了有关内容使用或其他内容的权限，但如果是这种情况，我什至不知道从哪里开始。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T23:51:22.877

事实证明，这是一个非常简单的复制保护。您需要做的就是设置一个响应标头。

*   [https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)
*   [https://datatracker.ietf.org/doc/html/draft-ietf-websec-x-frame-options-00](https://datatracker.ietf.org/doc/html/draft-ietf-websec-x-frame-options-00)

是的，“框架”，而不是“iframe”。

:eyeroll:

我想这个名字是有道理的，考虑到有人仍然可以尝试将旧的 HTML 4`frame`标签用于任何目的，我希望大多数浏览器/DOM 引擎都支持`frame`给定 HTML 历史的标签。Netscape[早在 2.0 版就](http://www.blooberry.com/indexdot/history/netscape.htm)创建/支持框架，并且`iframe`是后来被广泛采用的纯 Microsoft 发明 IIRC。

# asciidoc - 将 markdown 反引号转换为 asciidoc

> ID：15344192
> 
> 赞同：0
> 
> 时间：2013-03-11T16:55:35.910
> 
> 标签：asciidoc

我正在从 markdown 切换到 asciidoc 并有一个问题。在我的 markdown 文件中，我使用反引号来表示代码字体 ( `foo.bar()`)。当它被转换为 html 时，文本被放置在代码块 ( `foo.bar()`) 中。

如果我希望在文档转换为 html 时出现在代码块中，我应该如何格式化 asciidoc 中的文本片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T06:56:06.813

迟到的简短回答：

您可以像在 Markdown 中一样使用反引号。

来自[AsciiDoc 用户手册](http://www.methods.co.nz/asciidoc/userguide.html)：

> **等宽文本**
> 
> 单词短语+包含在加号字符中+以等宽字体呈现。单词短语“包含在反引号字符中”（重音符号）也以等宽字体呈现，但在这种情况下，包含的文本按字面意思呈现，不会进一步扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T19:51:08.877

正如您[在此处](http://powerman.name/doc/asciidoc)看到的，您可以在 asciidoc 中以相同的方式使用 `foo.bar()`。

[这是一个例子](https://raw.githubusercontent.com/edusantana/linguagem-de-programacao-i-livro/master/livro/capitulos/cap5-arquivos.adoc)：

```
 * Utilizar as funções `fgetc` ou `getc` para ler carácteres (...); 
```

# php - 如何检测是否存在 icecast/shoutcast 流？

> ID：15344196
> 
> 赞同：3
> 
> 时间：2013-03-11T16:55:52.213
> 
> 标签：php, audio, audio-streaming, shoutcast, icecast

一个网站上有 5 个流。我需要检测这些流是否存在。如果没有，则可以播放一些音频文件。

我正在使用 html5 播放流，流 url 看起来像这样：

[http://locus.creacast.com:9001/StBaume_grotte.ogg](http://locus.creacast.com:9001/StBaume_grotte.ogg)

我尝试了不同的东西，但它似乎不起作用。永远不会检测到流。

解决方案 1：在这里，我只是尝试检查文件是否存在。

```
if (file_exists($stream_1)) {
             $debug_output_stream_1 = "Le fichier $stream_1 existe.";
             $erreur_404_Stream_1 = true;  
        } else {
             $debug_output_stream_1 =  "Le fichier $stream_1 n'existe pas.";
             $erreur_404_Stream_1 = false;  
        } 
```

解决方案 2：我尝试检测 404 错误

```
 $file_headers_1 = @get_headers($stream_1);
        if($file_headers_1[0] == 'HTTP/1.1 404 Not Found') {
            $debug_output_stream_1 = "StBaume_sommet.ogg : L'URL n'existe pas.";
            $erreur_404_Stream_1 = true;  
        }
        else {
            $debug_output_stream_1 = "StBaume_sommet.ogg : L'URL existe.";
            $erreur_404_Stream_1 = false;
        } 
```

你知道如何检查流是否存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:11:21.167

您正在检查整个状态行，包括 HTTP 版本`HTTP/1.1`。大多数服务器返回`HTTP/1.0`。您只需要检查状态码。

```
if (strpos($file_headers_1[0], '200 OK') === false) {
    // error occurred
} 
```

# android - 适用于 Windows 的简单蓝牙诊断应用程序接受来自 Android 的连接？

> ID：15344212
> 
> 赞同：-2
> 
> 时间：2013-03-11T16:56:41.600
> 
> 标签：android, bluetooth

我正在我的 Android 上尝试蓝牙连接，我需要另一端可以响应的东西。我只有一台 Android，但我可以使用我的 Windows 笔记本电脑上的蓝牙收音机。

是否有一个简单的 Windows 应用程序可以接受蓝牙连接并让我来回发送文本？或者有没有更好的方法来做我的测试？

* * *

**编辑：**特雷弗解决了我的问题，但我会详细说明以供将来参考。我为传入连接添加了一个 COM 端口，如下所示：

![](../Images/d8b092516fe1cd85d003ef0eebea8799.png)

我在 COM9 上打开了 PuTTY，并使用 Android 上的 BlueTerm 应用程序连接到我的计算机。我现在可以看到正在发送的字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:34:01.487

您可以在 Windows 机器上设置蓝牙虚拟串行端口，然后使用终端程序（例如 Hyperterminal、Termite 或其他）通过该虚拟串行端口进行明文通信。

对于 Android 端，您最初可以使用 BluetoothChat 示例。

# mysql - 在mysql中按标签和标题搜索

> ID：15344214
> 
> 赞同：0
> 
> 时间：2013-03-11T16:56:46.623
> 
> 标签：mysql, search

我想按标题或标签在我的数据库程序和新闻中搜索我在 mysql 中有这段代码：

```
 Select * 
   from promociones,promocion_tag,programa_tag,tags,programas 
  WHERE tags.nombre='STH' 
    AND tags.id=programa_tag.id_tag 
    AND programa_tag.id_programa=programas.id
     OR tags.nombre='STH' 
    AND tags.id=promocion_tag.id_tag 
    AND promocion_tag.id_promocion=promociones.id  
     OR promociones.titulo LIKE "%STH%" 
     OR programas.titulo LIKE "%STH%" 
```

你看到任何错误吗？因为它返回错误，同一行多次..

* * *

表格（重要列）：Programas -ID -Titulo

Promociones -ID -Titulo

-标签 -ID -Nombre

Programa_tag -id_tag -programa_tag

Promocion_tag -id_tag -promocion_tag

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:04:52.840

由于`AND`then的优先级，您需要使用括号`OR`。使用显式`JOIN`语法也会有所帮助。

```
...
AND tags.id=programa_tag.id_tag 
AND (programa_tag.id_programa=programas.id
 OR tags.nombre='STH')
AND tags.id=promocion_tag.id_tag 
AND (promocion_tag.id_promocion=promociones.id  
 OR promociones.titulo LIKE "%STH%" 
 OR programas.titulo LIKE "%STH%") 
```

[请参阅文档](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:06:06.963

为了更好的可读性（和更容易调试），我将您的 SELECT 改写为使用 JOINS（另外我在 OR 表达式周围添加了括号：

```
SELECT * FROM tags
JOIN programa_tag ON tags.id=programa_tag.id_tag 
JOIN programas ON programa_tag.id_programa=programas.id 
JOIN promocion_tag ON promocion_tag.id_tag = tags.id
JOIN promociones ON promociones.id = promocion_tag.id_promocion
WHERE tags.nombre='STH' AND 
(promociones.titulo LIKE "%STH%" OR programas.titulo LIKE "%STH%") 
```

如果没有进一步了解您的数据库，我只能猜测 JOIN 是否实际上应该是 LEFT JOINS。此外，此 SELECT 实际上可能需要一个 UNION，但您需要提供更多详细信息才能进行该调用。

# r - R中的计数因子建立在BAZ上

> ID：15344216
> 
> 赞同：0
> 
> 时间：2013-03-11T16:56:49.350
> 
> 标签：r, count, r-factor

我有一个类似的问题来[计算 r 中的独特因素](https://stackoverflow.com/questions/5891927/counting-unique-factors-in-r)，但是提供的解决方案不适用于我的数据。

我的数据是按药物组织的，df 中包含的专利信息作为变量，而不是患者是行单位。

```
 Sex        ID
drug x          F        Jane
drug x          F        Mary
drug x          M        Philip
drug x          F        Jane
drug x          F        Jane
drug x          M        Philip
drug x          M        John
drug x          M        Philip
drug x          F        Jane
drug x          M        Philip 
```

我有 4 个唯一 ID，我想知道这 4 个 ID 的性别划分，应该是

```
F M
2 2 
```

但是我尝试的所有代码都让我返回了每种性别的药物数量，例如，

```
F M
5 5 
```

有人可以帮我解决这个问题吗？当我使用以前的帮助时，我得到一个唯一 ID 列表，其中性别列为 50。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:01:20.677

```
> df
   sex     id
1    F   Jane
2    F   Mary
3    M Philip
4    F   Jane
5    F   Jane
6    M Philip
7    M   John
8    M Philip
9    F   Jane
10   M Philip

> summary(unique(df[,c('sex','id')])$sex)
F M 
2 2 
```

# iphone - 带有旋转 UI 元素的自动布局

> ID：15344217
> 
> 赞同：9
> 
> 时间：2013-03-11T16:56:55.227
> 
> 标签：iphone, ios, objective-c, autolayout

我一直在自学`Auto Layout`使用代码（即避免使用 Interface Builder）。

我有一个我想设置的视图`Auto Layout`。

它有 3 个`UILabels`水平的和一个垂直的。

```
Sort of like this.
---------------------------------------------
| ---  -----------------------------------  |
| | |  |                                 |  |
| | |  -----------------------------------  |
| | |  -----------------------------------  |
| | |  |                                 |  |
| | |  -----------------------------------  |
| | |  -----------------------------------  |
| | |  |                                 |  |
| ---  -----------------------------------  |
--------------------------------------------- 
```

左侧的标签向左旋转 90 度。

我只是不确定如何在旋转标签和非旋转标签之间应用自动布局？

这可以做到吗？

变成`height`了`width`，`top`变成了`left`，等等……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:50:18.280

可能有一个“正确”的答案，但一个简单的解决方法是将旋转标签添加为非旋转视图的子视图，并使用这些视图进行布局。

**更新：**我只记得当视图应用了变换时，框架成为可能的最小边界框架*。除非我弄错了，否则这意味着框架正是您想要的，并且假设布局计算基于框架，它应该按预期工作。

* 当我上次使用转换视图时，旋转视图的框架是未定义的，但实验表明它是旋转视图的边界矩形。不确定它现在是否已定义或明确允许/禁止。

**更新 2：**我检查了[docs](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/frame)，他们仍然对这样做有强烈的警告：

> **警告：**如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

# r - 如何从记录集中创建统计样本？

> ID：15344221
> 
> 赞同：0
> 
> 时间：2013-03-11T16:56:58.997
> 
> 标签：r

我在 Windows 7 上使用 SQL Server 2008 和 RGui（64 位）。我能够使用 RODBC 从 R 连接到 SQL Server，并在变量中获取数据集。理想情况下，我想直接从结果集中抽取一定百分比的记录集（比如 10%）或固定数字（比如 25）。

作为权宜之计，我将记录集转储到一个文件中并从那里采样。

有人可以告诉我如何直接从结果集中采样。

到目前为止的代码：

```
> library (RODBC)
> conn <- odbcConnect ("TestR", "<username>")
> rs <- sqlQuery ("select Col1 from MyTable")
> sampleDocs <- sample (rs, size = 25, replace = TRUE, prob = NULL)

> set.seed(100)

> write.table(rs, file="C:\\FromTable.txt", row.names=FALSE, col.names=FALSE)
> docs <- read.table ("C:\\FromTable.txt")

> sampleDocs <- sample(docs$V1, size=101, replace=FALSE, prob=NULL)
> write.table(sampleDocs, file=\"C:\\\\SampleDocs.txt\", row.names=FALSE,
               col.names=FALSE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:10:38.323

```
sampleDocs2 <- sample(rs$ColName, size=10, replace=FALSE, prob=NULL) 
```

这样就可以了！

# sparql - SPARQL 数据集定义

> ID：15344224
> 
> 赞同：1
> 
> 时间：2013-03-11T16:57:11.807
> 
> 标签：sparql

谁能向我解释一下“Dataset(QuadPattern,μ,GS,GS)”这句话是什么意思？特别是，我想弄清楚 DELETE DATA 操作 (DELETE DATA QuadData) 的模型，但我不明白 Dataset(QuadPattern ,{},GS,GS) 表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:51:41.443

您似乎指的是[SPARQL 1.1 更新规范](http://www.w3.org/TR/sparql11-update/#def_datasetQuadPattern)：

> **Dataset(QuadPattern,μ,DS,GS)** ...[an] 辅助函数从 QuadPattern 构造 RDF 数据集，给定解决方案映射和 RDF 数据集。

简而言之，它的函数在可能包含变量的图中采用一堆 RDF，例如：

```
GRAPH ?g { ?person a Person ; ex:tel ?tel }
{ ?g ex:source ?source } 
```

和一组解 μ：

```
{ ?g => <http://example.com/graph1> , ?person => <http://example.com/alice> , ?tel => "0898 505050" , ?source => <http://192.com/> }
{ ?g => <http://example.com/graph2> , ?person => <http://example.com/bob> , ?tel => "117 117" , ?source => <http://192.com/> } 
```

并绑定这些值，生成一个数据集：

```
{ 
  <http://example.com/graph1> ex:source <http://192.com/> .
  <http://example.com/graph2> ex:source <http://192.com/> .
}
GRAPH <http://example.com/graph1> { <http://example.com/alice> a Person ; ex:tel "0898 505050" }
GRAPH <http://example.com/graph2> { <http://example.com/bob> a Person ; ex:tel "117 117" } 
```

# doctrine-orm - 找不到类“EventManager”

> ID：15344228
> 
> 赞同：0
> 
> 时间：2013-03-11T16:57:26.863
> 
> 标签：doctrine-orm

我正在尝试了解 Doctrine 中的事件，但是当我阅读[文档](http://docs.doctrine-project.org/en/latest/reference/events.html "文档")时，我卡在了第一行：

```
$evm = new EventManager(); 
```

在这里我得到一个

> PHP 致命错误：找不到类“EventManager”

我该如何解决这个问题？

这是完整的代码：

```
use Doctrine\ORM\Tools\Setup;

require_once("Doctrine/ORM/Tools/Setup.php");
Setup::registerAutoloadPEAR();

$classLoader = new Doctrine\Common\ClassLoader('Entities', __DIR__);
$classLoader->register();

$paths = array();
$isDevMode = true;
$config = Setup::createAnnotationMetadataConfiguration($paths, $isDevMode);
$dbParams = array("driver" => "pdo_mysql",
    "host" => variable_get("dbManip_host"),
    "user" => variable_get("dbManip_user"),
    "password" => variable_get("dbManip_password"),
    "dbname" => variable_get("dbManip_dbName"),
    "charset" => "utf8");
global $entityManager_globalObject;
$entityManager_globalObject = \Doctrine\ORM\EntityManager::create($dbParams, $config);
$entityManager_globalObject->getConnection()->exec("SET NAMES UTF8");

$evm = new EventManager(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:59:31.753

你正在寻找类[`Doctrine\Common\EventManager`](https://github.com/doctrine/common/blob/2.3/lib/Doctrine/Common/EventManager.php)。

```
$evm = new \Doctrine\Common\EventManager(); 
```

或者

```
use Doctrine\Common\EventManager; // at the top of your file

$evm = new EventManager(); 
```

# wix - 无法使用 WIX 安装程序注册 dll

> ID：15344232
> 
> 赞同：1
> 
> 时间：2013-03-11T16:57:41.053
> 
> 标签：wix, windows-installer, exe, wix3.6, regasm

我有我的上下文菜单外壳扩展 dll。我已经使用 Heat.exe 为我的 dll 创建组件，并且在安装时它工作得很好。但我无法使用 wix 安装程序注册我的 dll。我尝试了各种选择，但没有任何效果。

如果我尝试使用 regasm.exe /codebase Myfile.dll 进行手动注册，它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:14:32.303

Regasm /regfile（因此 heat 或 InstallShield ）具有不写出用户注册数据的已知行为。在这种情况下，您需要在 VM 上安装软件并使用工具在运行 regasm 之前和之后捕获注册表。然后执行差异报告以查看更改的内容。将其写入您的 WXS。

最后重置虚拟机并运行您的新安装并验证它是否正常工作。

# jquery - 通过单击另一个 div 滑出 div

> ID：15344235
> 
> 赞同：0
> 
> 时间：2013-03-11T16:57:46.757
> 
> 标签：jquery, css

我在单击箭头形 div 时创建了两个 div，它会滑出隐藏的 div。类似于论坛上发布的小提琴之一。由于某种原因，它不起作用。

这就是我到目前为止所做的： 非常感谢[Fiddel 的任何帮助。](http://jsfiddle.net/dajin007/b399m/)

html

```
<div id="slideout">
<div id="containclickme">
    <div class="metro three-d" id="click-me"></div>
</div>
</div> 
```

css

```
 body {
direction:rtl;
}
#slideout {
background: #666;
position: relative;
width: 300px;
height: 80px;
right:-300px;
margin-top:50px;
top:100%;
bottom:100%;
}
.metro {
display: inline-block;
padding: 5px;
margin: 50px;
width:1px;
height:19.5px;
background: #117ebb;
color: white;
font-weight: bold;
text-decoration: none;
}
.metro.three-d {
position: relative;
box-shadow: 1px 1px #003355, 2px 2px #003355, 3px 3px #003355;
transition: all 0.1s ease-in;
}
.metro.three-d:active {
box-shadow: none;
top: 3px;
left: 3px;
}
.metro.three-d:after {
 transition: all 0.1s ease-in;
position:absolute;
top:0px;
left:-13px;
content:" ";
width: 0;
height: 2px;
border-top: 13px solid transparent;
border-bottom: 15px solid transparent;
border-right:13px solid #117ebb;
border-radius:0px 0px 0px 20px;
}
#containclickme {
background: transparent;
float:left;
height:100%;
bottom:100%;
width:20px;
margin-top:-25px;
}
#click-me {
position:right;
left:30px;
} 
```

jQuery

```
 $(function () {
 $("#clickme").toggle(function () {
    $(this).parent().parent().animate({
        right: '0px'
    }, {
        queue: false,
        duration: 500
    });
 }, function () {
    $(this).parent().parent().animate({
        right: '-300px'
    }, {
        queue: false,
        duration: 500
    });
  });
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:03:23.857

你非常接近;)！

[http://jsfiddle.net/zxu7w/](http://jsfiddle.net/zxu7w/)

```
$(function () {
    // cache the sliding object in a var
    var slideout = $('#slideout');
    // "click-me" is what is in your html not "clickme"
    $("#click-me").toggle(function () {
        // use cached object instead of searching
        slideout.animate({
            right: '0px'
        }, {
            queue: false,
            duration: 500
        });
    }, function () {
        // use cached object instead of searching        
        slideout.animate({
            right: '-300px'
        }, {
            queue: false,
            duration: 500
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:09:24.830

由于您使用的 id 错误，它无法正常工作

你用过`$("#clickme")`

它应该是`$("#click-me")`

通过该更改再次检查您的代码，它会像魅力一样工作

# c# - Jquery无法在cshtml上弹出对话框

> ID：15344237
> 
> 赞同：1
> 
> 时间：2013-03-11T16:57:53.370
> 
> 标签：c#, jquery, html

这是 startdate 的编辑器，`@Html.EditorFor(model => model.startDate)` 我有 jquery 打击，查询的代码在页面上，当我运行程序时，日历弹出没有出现，两个代码都在 dame cshtml 页面上

```
<meta charset="utf-8" />

  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <script>
  $(function() {
    $( "#startDate" ).datepicker();
  });
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:06:31.587

代替

`@Html.EditorFor(model => model.startDate)`

和

`@Html.EditorFor(model => model.startDate, new { @class="startDate" })`

因为您还没有为该字段提供类并将您的 jQuery 更改为

```
$(function() {
    $( ".startDate" ).datepicker();
  }); 
```

当我们使用一个类`#`时就变成这样了。`.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:28:45.887

您需要验证所有外部脚本是否正确加载。我建议你安装 Fiddler，然后观察你的请求，看看它们是否都加载了。如果一切正常，那么您需要在调用 datepicker 函数之前检查脚本是否实际加载。如果您使用的是 MVC 4 和部分功能，这意味着您的所有 JavaScript 代码都需要进入 SCRIPTS 部分，该部分在调用加载 jquery 和 jquery-ui 库之后放置在您的视图中。使用 Goggle Chrome 的控制台验证没有 javascript 错误。

查看您在此处发布的代码，一切都应该正常工作。我已经这样做了数百万次，每次遇到问题都是因为我缺少 JQuery 库引用或者我没有按正确的顺序加载它们。

# jquery - 是否可以为 Kendo DatePicker（日历）设置方向？

> ID：15344241
> 
> 赞同：2
> 
> 时间：2013-03-11T16:58:12.817
> 
> 标签：jquery, calendar, webforms, datepicker, kendo-ui

我在表单底部有一个日历输入。

当用户点击它时，日历会在输入下方弹出创建滚动条。

有什么方法可以设置 DatePicker 打开的方向吗？

例如……左、右、上？

这是我的代码：

```
$("#dpBirthDate").kendoDatePicker(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:43:09.780

是和不是。您可以像这样编辑弹出窗口的原点和位置：

```
$("#date").kendoDatePicker({
    origin: "top left",
    position: "bottom left",
    animation: {
        open: {
            effects: "slideIn:up"
        }
    }
}); 
```

这*应该*使它向上打开，但我似乎无法让它在 jsFiddle 中工作。设置`position`为`bottom`+ 任何内容总是会导致它返回到输入框下方，就像`top`指定的一样。我可以让它显示在下方或侧面，但不能显示在上方。不知道是bug还是什么...

# node.js - MongoDB随机崩溃

> ID：15344242
> 
> 赞同：0
> 
> 时间：2013-03-11T16:58:13.887
> 
> 标签：node.js, mongodb, crash-dumps

MongoDB 每隔几天就会随机崩溃。这很烦人。

知道是什么原因导致“得到信号 15（终止：15），将在当前 cmd 结束后终止”？

这是我的日志：

```
Fri Jan 25 17:48:40 [initandlisten] connection accepted from 127.0.0.1:60264 #156 (13 connections now open)
Sat Jan 26 11:29:31 [conn156] end connection 127.0.0.1:60264 (12 connections now open)
Sat Jan 26 11:31:37 got signal 15 (Terminated: 15), will terminate after current cmd ends
Sat Jan 26 11:31:37 [interruptThread] now exiting
Sat Jan 26 11:31:37 dbexit: 
Sat Jan 26 11:31:37 [interruptThread] shutdown: going to close listening sockets...
Sat Jan 26 11:31:37 [interruptThread] closing listening socket: 7
Sat Jan 26 11:31:37 [interruptThread] closing listening socket: 8
Sat Jan 26 11:31:37 [interruptThread] closing listening socket: 9
Sat Jan 26 11:31:37 [interruptThread] removing socket file: /tmp/mongodb-27017.sock
Sat Jan 26 11:31:37 [interruptThread] shutdown: going to flush diaglog...
Sat Jan 26 11:31:37 [interruptThread] shutdown: going to close sockets...
Sat Jan 26 11:31:37 [interruptThread] shutdown: waiting for fs preallocator...
Sat Jan 26 11:31:37 [interruptThread] shutdown: lock for final commit...
Sat Jan 26 11:31:37 [interruptThread] shutdown: final commit...
Sat Jan 26 11:31:37 [conn153] end connection 127.0.0.1:59578 (11 connections now open)
Sat Jan 26 11:31:37 [conn150] end connection 127.0.0.1:59575 (11 connections now open)
Sat Jan 26 11:31:37 [conn152] end connection 127.0.0.1:59577 (11 connections now open)
Sat Jan 26 11:31:37 [interruptThread] shutdown: closing all files...
Sat Jan 26 11:31:37 [conn151] end connection 127.0.0.1:59576 (11 connections now open)
Sat Jan 26 11:31:37 [conn76] end connection 127.0.0.1:51566 (7 connections now open)
Sat Jan 26 11:31:37 [conn77] end connection 127.0.0.1:51567 (6 connections now open)
Sat Jan 26 11:31:37 [conn155] end connection 127.0.0.1:59580 (5 connections now open)
Sat Jan 26 11:31:37 [conn79] end connection 127.0.0.1:51569 (4 connections now open)
Sat Jan 26 11:31:37 [conn78] end connection 127.0.0.1:51568 (3 connections now open)
Sat Jan 26 11:31:37 [conn154] end connection 127.0.0.1:59579 (2 connections now open)
Sat Jan 26 11:31:37 [interruptThread] closeAllFiles() finished
Sat Jan 26 11:31:37 [conn74] end connection 127.0.0.1:51564 (1 connection now open)
Sat Jan 26 11:31:37 [interruptThread] journalCleanup...
Sat Jan 26 11:31:37 [conn75] end connection 127.0.0.1:51565 (0 connections now open)
Sat Jan 26 11:31:37 [interruptThread] removeJournalFiles
Sat Jan 26 11:31:37 [interruptThread] shutdown: removing fs lock...
Sat Jan 26 11:31:37 dbexit: really exiting now 
```

# html - 用于封面的页面背景图像无法正常工作

> ID：15344243
> 
> 赞同：0
> 
> 时间：2013-03-11T16:58:14.410
> 
> 标签：html, css

我有这张图片：

![在此处输入图像描述](../Images/1af19fe304c99070706cc697cc9b97e3.png)

我试图拉伸页面的高度，然后水平重复。水平重复工作正常，但它没有垂直覆盖页面。

我已经尝试了 SO 中的几个示例，但没有得到我想要的结果。

这是我从另一篇文章结束的地方，但现在根本没有显示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    <style type="text/css">
    body {
        background-image: url(bg-4a-24516.png);
        background-repeat: repeat-x;
        background-size: cover;
    }
    </style>

    </head>

    <body>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    </body>

</html> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:30:57.993

实际上，您的示例在编码时可以正常工作。

背景图像正在被拉伸，并且可能难以辨别，具体取决于您的浏览器颜色渲染。

看下面的小提琴：

[http://jsfiddle.net/audetwebdesign/yS4Uz](http://jsfiddle.net/audetwebdesign/yS4Uz)

我已经拍摄了原始图像并在顶部和底部添加了彩色边框。

您可以在以下位置查看图片： http: [//postimage.org/image/fsv80qegn/](http://postimage.org/image/fsv80qegn/)

当您使用 CSS3 属性`background-size: cover`时，背景图像会被拉伸，这会导致渲染失真，尤其是对于渐变。

```
body {
    background-image: url(http://s15.postimage.org/kriqf9i9n/sx_U5g.png);
    background-size: cover;
    background-repeat: repeat-x;
} 
```

如果更改`cover`为`contain`您将获得另一种可能更适合其他应用程序的效果。

# python - Robotparser 似乎无法正确解析

> ID：15344253
> 
> 赞同：6
> 
> 时间：2013-03-11T16:58:42.903
> 
> 标签：python, python-2.7, web-crawler, robots.txt

我正在编写一个爬虫，为此我正在实现 robots.txt 解析器，我正在使用标准的 lib *[robotparser](http://docs.python.org/2/library/robotparser.html)*。

似乎*robotsparser*解析不正确，**我正在使用 Google 的**[robots.txt](https://www.google.com/robots.txt)调试我的爬虫。

（以下示例来自 IPython）

```
In [1]: import robotparser

In [2]: x = robotparser.RobotFileParser()

In [3]: x.set_url("http://www.google.com/robots.txt")

In [4]: x.read()

In [5]: x.can_fetch("My_Crawler", "/catalogs") # This should return False, since it's on Disallow
Out[5]: False

In [6]: x.can_fetch("My_Crawler", "/catalogs/p?") # This should return True, since it's Allowed
Out[6]: False

In [7]: x.can_fetch("My_Crawler", "http://www.google.com/catalogs/p?")
Out[7]: False 
```

这很有趣，因为有时它似乎“工作”，有时它似乎失败了，我也尝试了来自 Facebook 和 Stackoverflow 的 robots.txt。这是`robotpaser`模块的错误吗？还是我在这里做错了什么？如果是这样，是什么？

我想知道[这个](http://bugs.python.org/issue15851)错误是否有任何相关

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:44:32.800

这不是错误，而是解释上的差异。根据[robots.txt 规范草案](http://www.robotstxt.org/norobots-rfc.txt)（从未获得批准，也不太可能获得批准）：

> 要评估是否允许访问 URL，机器人必须尝试将 Allow 和 Disallow 行中的路径与 URL 进行匹配，按照它们在记录中出现的顺序。使用找到的第一个匹配项。如果未找到匹配项，则默认假设是允许该 URL。

（第 3.2.2 节，允许和禁止行）

使用这种解释，然后是“/catalogs/p?” 应该被拒绝，因为之前有一个“Disallow: /catalogs”指令。

在某个时候，Google 开始以不同于该规范的方式解释 robots.txt。他们的方法似乎是：

```
Check for Allow. If it matches, crawl the page.
Check for Disallow. If it matches, don't crawl.
Otherwise, crawl. 
```

问题是robots.txt的解释没有正式的约定。我见过使用 Google 方法的爬虫和其他使用 1996 年草案标准的爬虫。当我操作爬虫时，当我使用 Google 解释时，我从网站管理员那里得到了 nastygram，因为我爬取了他们认为不应该被爬取的页面，如果我使用其他解释，我会从其他人那里得到讨厌的图，因为他们认为应该索引的东西，不是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T18:34:11.877

经过几次谷歌搜索后，我没有找到任何关于*机器人解析器*问题的信息。我最终得到了其他东西，我发现了一个名为*[reppy](https://github.com/seomoz/reppy)*的模块，我做了一些测试，它看起来非常强大。您可以通过*pip*安装它；

```
pip install reppy 
```

下面是一些使用*reppy*的示例（在 IPython 上） ，再次使用 Google 的[robots.txt](http://google.com/robots.txt)

```
In [1]: import reppy

In [2]: x = reppy.fetch("http://google.com/robots.txt")

In [3]: x.atts
Out[3]: 
{'agents': {'*': <reppy.agent at 0x1fd9610>},
 'sitemaps': ['http://www.gstatic.com/culturalinstitute/sitemaps/www_google_com_culturalinstitute/sitemap-index.xml',
  'http://www.google.com/hostednews/sitemap_index.xml',
  'http://www.google.com/sitemaps_webmasters.xml',
  'http://www.google.com/ventures/sitemap_ventures.xml',
  'http://www.gstatic.com/dictionary/static/sitemaps/sitemap_index.xml',
  'http://www.gstatic.com/earth/gallery/sitemaps/sitemap.xml',
  'http://www.gstatic.com/s2/sitemaps/profiles-sitemap.xml',
  'http://www.gstatic.com/trends/websites/sitemaps/sitemapindex.xml']}

In [4]: x.allowed("/catalogs/about", "My_crawler") # Should return True, since it's allowed.
Out[4]: True

In [5]: x.allowed("/catalogs", "My_crawler") # Should return False, since it's not allowed.
Out[5]: False

In [7]: x.allowed("/catalogs/p?", "My_crawler") # Should return True, since it's allowed.
Out[7]: True

In [8]: x.refresh() # Refresh robots.txt, perhaps a magic change?

In [9]: x.ttl
Out[9]: 3721.3556718826294

In [10]: # It also has a x.disallowed function. The contrary of x.allowed 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T22:40:04.793

有趣的问题。我查看了源代码（我只有 python 2.4 源代码可用，但我敢打赌它没有改变）并且代码通过执行来规范化正在测试的 url：

```
urllib.quote(urlparse.urlparse(urllib.unquote(url))[2]) 
```

这是您的问题的根源：

```
>>> urllib.quote(urlparse.urlparse(urllib.unquote("/foo"))[2]) 
'/foo'
>>> urllib.quote(urlparse.urlparse(urllib.unquote("/foo?"))[2]) 
'/foo' 
```

所以它要么是python库中的一个错误，要么是谷歌通过包含“？”来破坏robot.txt规范。规则中的字符（这有点不寻常）。

[以防万一不清楚，我会以不同的方式再说一遍。上面的代码被 robotsparser 库用作检查 url 的一部分。所以当网址以“？”结尾时 该字符被删除。因此，当您检查`/catalogs/p?`执行的实际测试时，是针对`/catalogs/p`. 因此你的结果令人惊讶。]

我建议向 python 人员[提交一个错误](http://bugs.python.org/)（您可以在此处发布链接作为解释的一部分）[编辑：谢谢]。然后使用您找到的其他库...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T20:23:04.067

大约一周前，我们合并了一个提交，其中包含导致此问题的错误。我们刚刚将版本 0.2.2 推送到 repo 中的 pip 和 master，包括针对这个问题的回归测试。

版本 0.2 包含轻微的接口更改——现在您必须创建一个包含`reppy`最初具有的确切接口的 RobotsCache 对象。这主要是为了使缓存显式化，并使同一进程中可以有不同的缓存。但是看哪，它现在又可以工作了！

```
from reppy.cache import RobotsCache
cache = RobotsCache()
cache.allowed('http://www.google.com/catalogs', 'foo')
cache.allowed('http://www.google.com/catalogs/p', 'foo')
cache.allowed('http://www.google.com/catalogs/p?', 'foo') 
```

# c# - 使用 Linq 从 Northwind DB 生成报告

> ID：15344257
> 
> 赞同：0
> 
> 时间：2013-03-11T16:58:53.450
> 
> 标签：c#, .net, linq, linq-to-sql, northwind

我正在尝试`NorthWind`使用 Linq 从流行的数据库生成以下报告。它应该由`Customer`,分组`OrderYear`。

```
CustomerName    OrderYear    Amount 
```

我必须使用下表`Customer`和. 到目前为止，这就是我所做的。`Order``Order Details`

```
NorthwindDataContext north = new NorthwindDataContext();

        var query = from o in north.Orders
                    group o by o.Customer.CompanyName  into cg
                    select new
                    {
                        Company = cg.Key,
                        YearGroup = (   from y in cg
                                              group y by y.OrderDate.Value.Year into yg
                                              select new 
                                              {
                                                  Year = yg.Key,
                                                  YearOrdes = yg
                                              }                                             
                                         )
                    };

        foreach (var q in query)
        {
            Console.WriteLine("Customer Name : " + q.Company);
            foreach (var o in q.YearGroup)
            {
                Console.WriteLine("Year " + o.Year);
                Console.WriteLine("Sum " + o.YearOrdes.Sum(yo => yo.Order_Details.Sum( yd=> Convert.ToDecimal(yd.UnitPrice* yd.Quantity))));           
            }

            Console.WriteLine();
        } 
```

它给了我预期的结果。我通过`t-sql`在后端运行进行比较。但是，我有 2 个问题。

1.  在 Inner`foreach`中，第二条语句生成总和。这是正确的方法吗？还是有更好的可用？
2.  如何在 Linq 查询本身中获取 Sum。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:25:13.723

在单个 LINQ to SQL 查询中得到它：

```
var query = from o in north.Orders
            from c in north.Customers.Where(c => c.CustomerID == o.CustomerID).DefaultIfEmpty()
            from d in north.Order_Details.Where(d => d.OrderID == o.OrderID).DefaultIfEmpty()
            group new { o, c, d } by new { o.OrderDate.Value.Year, c.CompanyName } into g
            select new
            {
                Company = g.Key.CompanyName,
                OrderYear = g.Key.Year,
                Amount = g.Sum(e => e.d.UnitPrice * e.d.Quantity)
            }; 
```

然后你可以简单地得到结果：

```
var results = query.ToList(); 
```

或者在获取之前对其进行排序：

```
var results = query.OrderBy(g => g.Company).ThenByDescending(g => g.OrderYear).ToList(); 
```

我很好奇由 LINQ to SQL 查询生成的 SQL，所以设置自定义`Log`，这里是：

```
SELECT [t5].[value22] AS [Company], [t5].[value2] AS [OrderYear], [t5].[value] AS [Amount]
FROM (
    SELECT SUM([t4].[value]) AS [value], [t4].[value2], [t4].[value22]
    FROM (
        SELECT [t3].[UnitPrice] * (CONVERT(Decimal(29,4),[t3].[Quantity])) AS [value], [t3].[value] AS [value2], [t3].[value2] AS [value22]
        FROM (
            SELECT DATEPART(Year, [t0].[OrderDate]) AS [value], [t1].[CompanyName] AS [value2], [t2].[UnitPrice], [t2].[Quantity]
            FROM [dbo].[Orders] AS [t0]
            LEFT OUTER JOIN [dbo].[Customers] AS [t1] ON [t1].[CustomerID] = [t0].[CustomerID]
            LEFT OUTER JOIN [dbo].[Order Details] AS [t2] ON [t2].[OrderID] = [t0].[OrderID]
            ) AS [t3]
        ) AS [t4]
    GROUP BY [t4].[value2], [t4].[value22]
    ) AS [t5]
ORDER BY [t5].[value22], [t5].[value2] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 3.5.30729.6387 
```

有点可怕，不是吗？但如果你仔细看，有一个标准`LEFT JOIN`用于将所有三个表组合在一起！其余的只是分组、排序和求和。

# jquery - 如何在 jQuery 流中进行条件切换，例如 .if().else().end();

> ID：15344258
> 
> 赞同：-2
> 
> 时间：2013-03-11T16:59:00.447
> 
> 标签：jquery

```
$(...)
  .find(...)
  .if()
  .something
  .else()
  .otherthing
  .end(); 
```

如果我们可以在 jQuery 中做到这一点，我们就不需要在原生 javascript 中做到这一点。它更具表现力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:02:20.270

你可以写一个 if else 语句。使用以下格式

```
var sampleBoolean; //Assign this to something
//Ex: sampleBoolean = $("sampleDiv").is(":visible");

//Begin logic
if (!sampleBoolean) {
    //Do this
}
else {
    //Do this
}
//End logic 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:08:06.380

检查a是否有一个类“class”，否则如果有id“#uniqueid”，最后是默认值：

```
if( $('a').is('.class') ) {

} else if ($('a').is('#uniqueid')) {

} else {

} 
```

.is() 的文档：

[http://api.jquery.com/is/](http://api.jquery.com/is/)

# android - GSON 相对于普通 JSON 解析的优势

> ID：15344263
> 
> 赞同：7
> 
> 时间：2013-03-11T16:59:14.983
> 
> 标签：android, json, memory, gson

我正在开发的应用程序主要基于处理从服务器获取的 JSON 数据。传统的 JSON 解析器提取值、设置所需的 POJO 并传递给 UI 处理程序进行渲染。这部分目前运行良好。

我听说过 GSON 库并运行了它的实现步骤。据我了解，它（GSON 用法）需要以下内容。

1.  语法正确的 JSON 数据。
2.  模型类对象匹配 JSON 响应。
3.  GSON 注入器或代码片段，用于从服务器获取 JSON 并提供给 GSON。

上述方法听起来很像对象映射。但是，与老式的 JSON 解析相比，我不知道 GSON 的效率如何。特别是对于复杂的 JSON。以及它对内存使用的影响？

你怎么看？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T17:23:49.777

GSON 已成功用于当今 Google Play 中的多个 android 应用程序。使用 GSON 获得的好处是对象映射可以节省编写代码所花费的时间。至于对内存使用的影响，您可以使用 fromJson() 方法调用，该方法调用采用流式 JSONReader 来最小化保存在内存中的 String 数据，如果失败，您可以尝试自己使用 JSONReader 解析 json 数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:21:13.007

GSON的目标在官方页面上有很好的描述：

格森目标：

*   提供简单的 toJson() 和 fromJson() 方法将 Java 对象转换为 JSON，反之亦然
*   允许将预先存在的不可修改对象与 JSON 相互转换
*   广泛支持 Java 泛型
*   允许对象的自定义表示
*   支持任意复杂的对象（具有深度继承层次和泛型类型的广泛使用）

[https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/)

# jquery - jQuery：单击不透明度更改的图像推子

> ID：15344265
> 
> 赞同：0
> 
> 时间：2013-03-11T16:59:22.630
> 
> 标签：jquery, css, click, jquery-animate, opacity

我正在寻找一个横幅来旋转图像（有效）但是如果单击下面的链接，我无法弄清楚如何让它转到某个图像......一旦图像显示我想要它继续进行轮换。我正在使用 Opacity 使图像褪色并且效果很好，所以我只需要弄清楚如何让`.click`功能以我认为的方式工作。也许使用索引号？

这是我的代码：

```
<style type="text/css">

#images{
    position:relative;
    display:block;
    height: 450px;
}
#images img{
    position:absolute;
}
img.current{
    z-index:100;

}
img.next{
    z-index:99;
}
</style>

<script language="javascript" type="text/javascript" src="js/jquery-1.4.2.js" ></script>
<script language="javascript" type="text/javascript">

$("document").ready( // Start JQ
    function(){
    var timing=3000 ;
    var currentImg ;
    var nextImg ;
    setInterval(rotateImages,timing);

    function rotateImages(){

        currentImg=$(".current"); 
        nextImg=currentImg.next() ;

        if(nextImg.length==0){ 
            nextImg=$("#images img:first") ; 
        } 

        currentImg.removeClass("current").addClass("next") ; 

        nextImg.addClass("current").css({opacity:0})
            .animate({opacity:1},timing/2,function(){
                currentImg.removeClass("next") ;
            }); 
        } 

}); // End JQ
</script>

</head>

<body >
    <div id="images">
        <img src="images/jpg/image1.jpg" alt="image1" class="current"/>
        <img src="images/jpg/image2.jpg" alt="image2"  />
        <img src="images/jpg/image3.jpg" alt="image3" />
        <img src="images/jpg/image4.jpg" alt="image4" />
    </div>
    <div class="click">
        <a id="1">Image 1</a>
        <a id="2">Image 2</a>
        <a id="3">Image 3</a>
        <a id="4">Image 4</a>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:06:53.263

```
$('.click a').click(new function(){

    currentImg=$(".current"); 
    nextImgid=this.id ;

        nextImg=$("#images img:("+nextImgid+")") ; 

currentImg.removeClass("current").addClass("next") ; 

nextImg.addClass("current").css({opacity:0}).animate({opacity:1},timing/2,function(         ){currentImg.removeClass("next") ;
    }); 
  }); 
```

阅读[http://api.jquery.com/click/](http://api.jquery.com/click/) 并为上面的通用代码创建一个通用函数并旋转。

# c++ - 编译器如何选择正确的函数？

> ID：15344270
> 
> 赞同：0
> 
> 时间：2013-03-11T16:59:33.790
> 
> 标签：c++, compiler-construction, overloading

我写了一个小的 3d 矢量类。特别是我写了两个函数，一个用于旋转向量，一个用于返回向量本身的旋转副本。所以我有以下内容：

```
Vector Vector::Rotate(const double angle, Vector& axis) const {
Vector b=*this;
b.Rotate(angle,axis);
return (b);
}

void Vector::Rotate(const double angle, Vector & axis) {

/* let's promote this vector to a quaternion */
Quaternion V (0,*this);

/* quaternion describing the rotation */
Quaternion q (cos(angle/2),axis*sin(angle/2));

/* actual rotation  */
*this = (q*V*q.conjugate()).Vec();
} 
```

现在，当我写这样的东西时：

```
 vector2 = vector1.Rotate(rbo::M_PUCKER,i); 
```

我得到错误：没有运算符“=”匹配这些操作数，操作数类型是：Vector = void

我希望编译器能够理解我想要什么：为什么他选择 void 版本而不是另一个返回向量的版本？此外，以我的方式编写更多版本的相同功能是一种好习惯吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T17:05:12.363

编译器仅根据调用成员函数的对象来选择重载或非重载`const`。`const`如果对象（或引用）是`const`它将选择`const`重载。

这是好习惯吗？不，从你对编译器应该做什么感到困惑这一事实看来很明显。编写易于阅读和解释而不会混淆的代码通常是一种好习惯:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:01:25.927

返回类型不参与重载决议。换句话说，您不能拥有仅在返回类型上有所不同的函数。

我认为您的代码只能编译，因为其中一个函数是“const”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:03:12.180

如果 vector1 不是 const ，它将选择

```
void Vector::Rotate(const double angle, Vector & axis) 
```

对于成员函数，有一个隐藏参数 this，

```
Vector Vector::Rotate(const double angle, Vector& axis) const 
//actually is 
Vector Rotate(const Vector const * this,const double angle, Vector& axis) const 

void Vector::Rotate(const double angle, Vector & axis) 
//actually is 
void Rotate(Vector const * this,const double angle, Vector& axis) 
```

你的对象 vector1 的指针是`vector *`

我猜编译会选择最匹配的

# java - ViewPager / Sherlock / 尝试添加页面指示器

> ID：15344271
> 
> 赞同：0
> 
> 时间：2013-03-11T16:59:35.090
> 
> 标签：java, android, actionbarsherlock, android-viewpager, viewpagerindicator

我试图实现一个 Viewpager 指示器，以便我的用户知道他们在哪个页面上，这个活动有 3 个 webviews，我需要显示一个横幅，而不是通过 3 个单独的布局文件，但实际上是在代码中，就像普通的 viewPager 指示器一样。

## 代码

```
public class AwesomePagerActivity extends Activity {

private ViewPager awesomePager;
private static int NUM_AWESOME_VIEWS = 3;
private Context context;
private AwesomePagerAdapter awesomeAdapter;
LayoutInflater inflater ;

/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    context = this;

    inflater = (LayoutInflater)
            context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    awesomeAdapter = new AwesomePagerAdapter();
    awesomePager = (ViewPager) findViewById(R.id.pager);
    awesomePager.setOffscreenPageLimit(3);
    awesomePager.setAdapter(awesomeAdapter);
}

private class AwesomePagerAdapter extends PagerAdapter{

    public int getCount() {
        return NUM_AWESOME_VIEWS;
    }

    public Object instantiateItem(View collection, int position) {

        View layout = null; 
        switch (position) {
        case 0: {
            LayoutInflater mInflater =  (LayoutInflater)
                    context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layout  = mInflater.inflate(R.layout.activity_main, null);

        WebView web = (WebView)layout.findViewById(R.id.webView);
        WebSettings websettings = web.getSettings();
        websettings.setBuiltInZoomControls(false);
        websettings.setUseWideViewPort(true);
        websettings.setJavaScriptEnabled(true);
        websettings.setAllowFileAccess(true);
        websettings.setDomStorageEnabled(true);
        websettings.setLoadWithOverviewMode(true);
        websettings.setSavePassword(true);
        web.requestFocusFromTouch();
        web.setWebViewClient(new WebViewClient());
        web.setWebChromeClient(new WebChromeClient());
        web.loadUrl("http://developer.android.com");
        }
        break;

        case 1: {        LayoutInflater mInflater =  (LayoutInflater)
                context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layout  = mInflater.inflate(R.layout.activity_community, null);

        WebView web = (WebView)layout.findViewById(R.id.webView2);
        WebSettings websettings = web.getSettings();
        websettings.setBuiltInZoomControls(true);
        websettings.setUseWideViewPort(false);
        websettings.setJavaScriptEnabled(true);
        websettings.setAllowFileAccess(true);
        websettings.setDomStorageEnabled(true);
        websettings.setLoadWithOverviewMode(true);
        websettings.setSavePassword(true);
        web.requestFocusFromTouch();
        web.setWebViewClient(new WebViewClient());
        web.setWebChromeClient(new WebChromeClient());
        web.loadUrl("http://www.xda-developers.com");
        }
        break;

        case 2: {        LayoutInflater mInflater =  (LayoutInflater)
                context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layout  = mInflater.inflate(R.layout.activity_support, null);

        WebView web = (WebView)layout.findViewById(R.id.webView3);
        WebSettings websettings = web.getSettings();
        websettings.setBuiltInZoomControls(true);
        websettings.setUseWideViewPort(false);
        websettings.setJavaScriptEnabled(true);
        websettings.setAllowFileAccess(true);
        websettings.setDomStorageEnabled(true);
        websettings.setLoadWithOverviewMode(true);
        websettings.setSavePassword(true);
        web.requestFocusFromTouch();
        web.setWebViewClient(new WebViewClient());
        web.setWebChromeClient(new WebChromeClient());
        web.loadUrl("http://www.samsung.com");
        }
        break;

        }
((ViewPager) collection).addView((View)layout,0);

return layout;

}

public void destroyItem(View collection, int position, Object view) {
((ViewPager) collection).removeView((View) view);

}

public boolean isViewFromObject(View view, Object object) {
return view==((View)object);

}

public void finishUpdate(View arg0) {}

public void restoreState(Parcelable arg0, ClassLoader arg1) {}

public Parcelable saveState() {
return null;

}

public void startUpdate(View arg0) {}

}
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:app1="http://schemas.android.com/apk/res/com.example.test">

<com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/indicator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#18000000"
    android:padding="10dip"
    android:textColor="#FF5E6973"
    app:footerColor="#FFAA2222"
    app:footerIndicatorHeight="3dp"
    app:footerIndicatorStyle="underline"
    app:footerLineHeight="1dp"
    app:selectedBold="true"
    app:selectedColor="#FF000000"
    app1:textColor="#000000" />

<android.support.v4.view.ViewPager
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent">
</android.support.v4.view.ViewPager>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:34:47.847

您需要将您的附加`ViewPager`到`TitlePageIndicator`

```
// Get a reference to the TitlePageIndicator
awesomeIndicator = (TitlePageIndicator) findViewById(R.id.indicator);

// Attach adapter to ViewPager
awesomePager.setAdapter(awesomeAdapter;

// Attach ViewPager to the indicator
awesomeIndicator.setViewPager(awesomePager); 
```

您还需要`getPageTitle()`在`PagerAdapter`.

```
private class AwesomePagerAdapter extends PagerAdapter {
    private String[] titles = new String[]{"Page 1 title", "Page 2 title"};

    .
    .

    @Override
    public CharSequence getPageTitle(int position) {
        return titles[position % titles.length];
    }
} 
```

# amazon-s3 - Amazon S3 存储桶命名约定导致与证书冲突

> ID：15344272
> 
> 赞同：3
> 
> 时间：2013-03-11T16:59:35.210
> 
> 标签：amazon-s3

我将 Amazon S3 存储桶重命名为：“multi-word-name”

亚马逊建议的最佳命名约定：“multi.word.name”

问题是这会导致 SSL 证书出现问题：“您尝试访问 multi.word.name.s3.amazonaws.com，但实际上您访问的服务器将自己标识为 *.s3.amazonaws.com ... "

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:24:37.383

[Amazon S3](http://aws.amazon.com/s3/)中的存储桶命名涉及两个潜在问题。

## 符合 DNS 标准的存储桶命名和 SSL 验证

首先，关于建议的符合 DNS 的存储桶名称约定，仍有一个巨大且严重未记录的警告，请参阅存储桶[的虚拟托管](http://docs.aws.amazon.com/AmazonS3/latest/dev/VirtualHosting.html)：

> 当使用带有 SSL 的虚拟托管式存储桶时，**SSL 通配符证书仅匹配不包含句**点的存储桶。要解决此问题，请使用 HTTP 或编写您自己的证书验证逻辑。*[强调我的]*

*   因此，从这个角度来看，您想要的方法根本行不通 - 在 Kerry 对[Amazon S3 的回答中更详细地探讨了这个问题 - HTTPS/SSL - 有可能吗？](https://stackoverflow.com/a/3057349/45773)[，其中还提供了来自AWS Support](http://aws.amazon.com/premiumsupport/)的有关此问题的专门答案。

## AWS 开发工具包中的 DNS 兼容存储桶命名和 SSL 验证

[如果您从AWS SDK for Java](http://aws.amazon.com/sdkforjava/)的上下文/范围内询问，您可能想再次尝试使用新的[AWS SDK for Java 1.4.0](http://aws.amazon.com/releasenotes/Java/2425068307485737)，它具有*对 S3 主机名 SSL 验证的相关更改*：

> 在使用 DNS 样式存储桶寻址（默认）时，验证主机名时，Amazon S3 客户端现在不那么严格了。**现在任何以 s3.amazonaws.com 结尾的域都将绕过严格的 SSL 检查要求**。此更改修复了非美国区域的客户在使用名称中带有句点的存储桶时遇到的问题。*[强调我的]*

请注意，此更改已于昨天发布，我尚未探讨其背景或与上述通用限制的关系，但它可能会对您有所帮助。

祝你好运！

# jquery - jqGrid 日期过滤和排序

> ID：15344276
> 
> 赞同：0
> 
> 时间：2013-03-11T16:59:48.210
> 
> 标签：jquery, jqgrid

我有一个呈现客户端数据的 jqGrid。数组中的一个字段是日期字段，它在客户端数组中的表示是“LONG”值。我创建了一个客户单元格格式化程序，将其转换为 mm/dd/yyyy 字符串。不幸的是，我似乎无法通过“搜索”和“过滤工具栏”来了解如何搜索/过滤。

我四处寻找这个问题的其他答案，但无济于事。我确实尝试了“sorttype”功能，例如：

```
 stype: 'text',
            sorttype: function (cell) {
                var date = new Date (cell);
                return date.getMonth().toString() + '/' + date.getDate().toString() + '/' +  date.getFullYear().toString();
            } 
```

但这也不起作用。如果有人有任何提示或要点，我将不胜感激。提前致谢。

**编辑：**

该列的确切定义是：

```
 ,{
    name: "Original_Delivery_Date",
    align: 'center',
    formatter: cellDateFormatter,
    editable: true,
    sorttype: 'int'
  } 
```

这是我使用的格式化程序：

```
 /**
   * Converts from a LONG date (1318636800000) to YYYY-MM-DD format.
   */
  function cellDateFormatter (cellValue, options, rowObject) {
    if (cellValue == null || cellValue == '') {
        return '';
    }
    var dt = new Date (cellValue);
    return (dt.getUTCMonth () + 1) + '/' + dt.getUTCDate () + '/' + dt.getUTCFullYear ();
  } 
```

# opengl - 通过计算着色器在 OpenGL 中进行光线追踪

> ID：15344282
> 
> 赞同：10
> 
> 时间：2013-03-11T16:59:59.543
> 
> 标签：opengl, gpgpu, raytracing, compute-shader

我正在尝试通过计算着色器在 OpenGL 中进行一些光线跟踪，但遇到了一个奇怪的问题。目前我只想显示一个没有任何阴影的球体。我的计算着色器为每个像素发射一条射线，如下所示：

```
#version 430
struct Sphere{
    vec4    position;
    float   radius;
};

struct Ray{
    vec3    origin;
    vec3    dir;
};

uniform image2D outputTexture;
uniform uint        width;
uniform uint        height;

float hitSphere(Ray r, Sphere s){

    float s_vv = dot(r.dir, r.dir);
    float s_ov = dot(r.origin, r.dir);
    float s_mv = dot(s.position.xyz, r.dir);
    float s_mm = dot(s.position.xyz, s.position.xyz);
    float s_mo = dot(s.position.xyz, r.origin);
    float s_oo = dot(r.origin, r.origin);

    float d = s_ov*s_ov-2*s_ov*s_mv+s_mv*s_mv-s_vv*(s_mm-2*s_mo*s_oo-s.radius*s.radius);

    if(d < 0){
        return -1.0f;
    } else if(d == 0){
        return (s_mv-s_ov)/s_vv;
    } else {
        float t1 = 0, t2 = 0;
        t1 = s_mv-s_ov;

        t2 = (t1-sqrt(d))/s_vv;
        t1 = (t1+sqrt(d))/s_vv;

        return t1>t2? t2 : t1 ; 
    }
}

layout (local_size_x = 16, local_size_y = 16, local_size_z = 1) in;
void main(){
    uint x = gl_GlobalInvocationID.x;
    uint y = gl_GlobalInvocationID.y;

    if(x < 1024 && y < 768){
        float t = 0.0f;
        Ray r = {vec3(0,0,0), vec3(width/2-x, height/2-y, 1000)};
        Sphere sp ={vec4(0, 0, 35, 1), 5.0f};

        t = hitSphere(r, sp);

        if(t <= -0.001f){
            imageStore(outputTexture, ivec2(x, y), vec4(0.0, 0.0, 0.0, 1.0));
        } else {
            imageStore(outputTexture, ivec2(x, y), vec4(0.0, 1.0, 0.0, 1.0));
        }

        if(x == 550 && y == 390){
            imageStore(outputTexture, ivec2(x, y), vec4(1.0, 0.0, 0.0, 1.0));
        }
    } 
} 
```

当我运行应用程序时，我得到以下图像： ![在此处输入图像描述](../Images/a9eb64b59de0e82760d997d674b9848c.png)

但是当我在 CPU 上运行相同的算法时，我得到了以下更有说服力的图像： ![在此处输入图像描述](../Images/1b85fb077e8f61534ff328d18389c5fb.png)

首先，我认为我没有分派足够多的工作组，因此不是每个像素都有自己的计算着色器调用，但事实并非如此。正如您在 GPU 渲染图像中看到的那样，中间有一个红色像素，这是由计算着色器中的最后一行引起的。这可以为每个其他像素再现。

我目前使用 1024x768 的分辨率，这就是我调度计算着色器的方式：

```
#define WORK_GROUP_SIZE 16
void OpenGLRaytracer::renderScene(int width, int height){
    glUseProgram(_progID);

    glDispatchCompute(width/WORK_GROUP_SIZE, height/WORK_GROUP_SIZE,1);

    glMemoryBarrier(GL_TEXTURE_FETCH_BARRIER_BIT);
} 
```

错误在哪里？浮点计算的准确性会不会有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:01:53.087

错误在这一行：

```
Ray r = {vec3(0,0,0), vec3(width/2-x, height/2-y, 1000)}; 
```

由于 width、height、x 和 y 是无符号变量，当术语 width/2-x 变为负数时，您会遇到问题。

这解决了问题：

```
Ray r = {vec3(0,0,0), vec3(float(width)/2.0f-float(x), float(height)/2.0f-float(y), 1000)}; 
```

# php - 如何从 AJAX 表单中正确转义 PHP $_POST 变量？

> ID：15344284
> 
> 赞同：0
> 
> 时间：2013-03-11T17:00:04.247
> 
> 标签：php, jquery, ajax

我使用 jQuery 创建了一个 AJAX 提交表单并使用 PHP 处理表单邮件程序（如下所示。）根据下面的代码，从 AJAX/jQuery 表单接收的内容中转义超全局 $_POST 变量的最佳方法是什么? 可以将 trim() 函数包装在 htmlspecialchars() 函数中吗？在发送 php 邮件程序时，我必须关注哪种类型的安全性，因为电子邮件的内容没有被插入到数据库中。

```
<?php

    $content_link = trim($_POST['content_link']);
    $email = trim($_POST['email']);
    $viewport_size = trim($_POST['viewportsize']);
    $browser = trim($_POST['browser']);
    $os = trim($_POST['os']);
    $current_page = trim($_POST['current_page']);

    $to = '<example@example.com>';      
    $from = '<' . $email . '>';
    $subject = 'Form Submission';   
    $message = '
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head></head>
    <body>
    <table>
        <tr><td>Content Link:</td><td>' . nl2br($content_link) . '</td></tr>
        <tr><td>Email:</td><td>' . $email . '</td></tr>
        <tr><td>Viewport Size:</td><td>' . $viewport_size . '</td></tr>
        <tr><td>Browser/OS:</td><td>' . $browser . '/' . $os . '</td></tr>
        <tr><td>Current Page:</td><td>' . $current_page . '</td></tr>
    </table>
    </body>
    </html>';

    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $headers .= 'From: ' . $from . "\r\n";

    mail($to,$subject,$message,$headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:14:42.393

如果要去除 HTML 实体的所有输入，还可以使用 strip_tags() 函数。

[strip_tags() 示例](http://www.php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:16:42.187

在字段上使用正则表达式这是一种方法，另一种方法是使用 `filter_var('bob@example.com', FILTER_VALIDATE_EMAIL)`你可以将很多标志传递给 filter_var($_POST['content'], FILTER_SANITIZE_STRING) 有很多过滤器所以看看文档，请特别注意电子邮件，因为有人可能会注入 CC BCC。htmlentities，htmlcharacters，我的意思是有很多方法可以完成这项工作，我可能会使用 regex 或 filter_var。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:10:53.557

您可以简单地将 htmlentities 函数包装在变量周围，因为您没有进行任何数据库调用。您还可以通过仅使用提取函数来简化为帖子分配变量的过程

```
<?php

    extract($_POST);

    $to = '<example@example.com>';      
    $from = '<' . $email . '>';
    $subject = 'Form Submission';   
    $message = '
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head></head>
    <body>
    <table>
        <tr><td>Content Link:</td><td>' . nl2br(htmlentities(trim($content_link))) . '</td></tr>
        <tr><td>Email:</td><td>' . htmlentities(trim($email)) . '</td></tr>
        <tr><td>Viewport Size:</td><td>' . htmlentities(trim($viewportsize)) . '</td></tr>
        <tr><td>Browser/OS:</td><td>' . htmlentities(trim($browser)) . '/' . htmlentities(trim($os)) . '</td></tr>
        <tr><td>Current Page:</td><td>' . htmlentities(trim($current_page)) . '</td></tr>
    </table>
    </body>
    </html>';

    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $headers .= 'From: ' . $from . "\r\n";

    mail($to,$subject,$message,$headers); 
```

# android - 将 android TTS 作为库包含在内

> ID：15344286
> 
> 赞同：1
> 
> 时间：2013-03-11T17:00:08.680
> 
> 标签：android, android-install-apk, google-text-to-speech

是否可以在我的应用程序中包含 android TTS 引擎作为库？或者在没有用户干预的情况下下载它？

现在，如果你想使用它，在某些设备上你必须先下载它。这意味着用户被发送到 TTS 应用程序的 Google Play 页面并且必须手动下载它。

我正在寻找替代方案，因此用户无需干预该过程。

# emacs - emacs：如何从发送到 comint 缓冲区的命令返回输出（又名劣质进程）

> ID：15344288
> 
> 赞同：2
> 
> 时间：2013-03-11T17:00:12.477
> 
> 标签：emacs, elisp

我要解决的具体问题是

1.  `telnet`向正在运行的会话发送命令
2.  回显命令的结果`message`

但是一般的问题是向下级（comint）进程发送命令并等待输出返回并出现新的提示，然后返回输出。

我有：

```
(defun dired-vlc-test ()
  (interactive)
  (let* ((buf (process-buffer dired-vlc-telnet-proc))
         (old-max (with-current-buffer buf
                    (point-max))))
    (telnet-simple-send dired-vlc-telnet-proc "get_time")
    (accept-process-output dired-vlc-telnet-proc 5)
    (message (buffer-substring-no-properties old-max (with-current-buffer buf
                                                       (point-max)))))) 
```

然而，我总是得到的输出是“get_time”，即 Emacs 不等待新的输出。

我从这个[问题](https://stackoverflow.com/questions/11824976/waiting-for-comint-mode-buffer)`accept-process-output`中得到了想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:27:48.423

`accept-process-output`在您的情况下返回太早，因为它在接受某些输出后立即返回，但在您的情况下，您希望继续接受输出，直到收到新的提示。请注意，远程进程不会告诉 Emacs“这是一个提示”，因此您必须调整您的进程过滤器以识别“哦，我们收到了一些看起来像提示的内容”，并且您必须`accept-process-output`循环调用，直到进程filter 告诉它（可能通过一些全局变量）它已经看到了提示。

# c# - 如何使用 Razor MVC-4 将 JSON 数据加载到 SlickGrid

> ID：15344293
> 
> 赞同：1
> 
> 时间：2013-03-11T17:00:32.330
> 
> 标签：c#, json, razor, asp.net-mvc-4, slickgrid

我是 jquery、slick grid 和 razor 的新手。我已经浏览了 SlickGrid 示例，并且能够将静态数据加载到 SlickGrid 中。现在我正在尝试将 JSON 数据从 MSSQL 加载到我的 SlickGrid 中。我在网上看过一些例子，但我相信我遗漏了这些例子中没有提到的东西。

这是我的代码。

SlickGridProducts.js 变量网格；

```
var columns = [
    { id: "ProductID", name: "ProductID", field: "ProductID", width: 50 },
    { id: "ItemDesc", name: "ItemDesc", field: "ItemDesc", width: 200 },
    { id: "DivName", name: "DivName", field: "DivName", width: 50 },
    { id: "DeptDesc", name: "DeptDesc", field: "DeptDesc", width: 75 },
    { id: "ClassDesc", name: "ClassDesc", field: "ClassDesc", width: 100 },
    { id: "SubClassDesc", name: "SubClassDesc", field: "SubClassDesc", width: 100 }
];
var options = {
    editable: true,
    enableAddRow: true,
    enableCellNavigation: true,
    asyncEditorLoading: false,
    autoEdit: false
};

$(function () {

    var slickdata = [];
    $.getJSON("/Products/GetSlickGridData", function (items) {
        for (var i = 0; i < items.length; i++) {
            slickdata[i] = {
                ProductID: items[i].ProductID,
                ItemDesc: items[i].ItemDesc,
                DivName: items[i].DivName,
                DeptDesc: items[i].DeptDesc,
                ClassDesc: items[i].ClassDesc,
                SubClassDesc: items[i].SubClassDesc
            };
        }
    });

    grid = new Slick.Grid("#myGrid", slickdata, columns, options);
    grid.setSelectionModel(new Slick.RowSelectionModel());

    grid.setActiveCell(0, 0);
}) 
```

产品/Index.cshtml

```
@model IEnumerable<JQGrid.Models.Product>

@{
    ViewBag.Title = "Index";
}

<link href="@Url.Content("~/Content/slick.grid.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.event.drag.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/SlickGrid/slick.core.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/SlickGrid/slick.grid.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/SlickGridProducts.js")" type="text/javascript"></script>

<h2>Index</h2>

<div id="myGrid" style="width:800px;height:300px;"></div> 
```

ProductsController.cs

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using JQGrid.Models;

namespace JQGrid.Controllers
{
    public class ProductsController : Controller
    {
        private ProductPickerEntities db = new ProductPickerEntities();

        //
        // GET: /Products/

        public ActionResult Index()
        {
            return View(db.Products.ToList());
        }

...

        public JsonResult GetSlickGridData()
        {
            var slickGridData = db.Products.ToList();
            return Json(slickGridData, JsonRequestBehavior.AllowGet);
        }
    }
} 
```

如果我在 JsonResult GetSlickGridData() 中添加一个断点并观察 slickGridData，我会看到它填充了我想要在我的 slickgrid 中的所有项目。

有了这个，我得到的只是一个空白的白色盒子，用于我的光滑网格。我认为问题出在我正在填充 slickdata 的 js 中，但不确定要修复什么。

****** *** ***修订***** ********

 **我发现了我的一个问题，但 slickgrid 仍然是空白的。我的问题是返回的 json 结果太大。所以我现在修改了我的 ProductsController.cs 代码

```
public JsonResult GetSlickGridData()
{
    var slickGridData = db.Products.ToList();
    var jsonResult = Json(slickGridData, JsonRequestBehavior.AllowGet);
    jsonResult.MaxJsonLength = int.MaxValue;
    return jsonResult;
} 
```

这解决了 maxlength 错误，尽管我认为这已在 MVC-4 中解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:03:16.000

您正在初始化`grid.setSelectionModel(new Slick.RowSelectionModel());`，但没有包含对它的引用。

它现在`slick.rowselectionmodel.js`并且通常位于 Plugins 文件夹下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:59:49.533

您检查浏览器控制台是否有错误？**

# c# - 我可以扩展一个基类并将基类转换为扩展吗

> ID：15344295
> 
> 赞同：0
> 
> 时间：2013-03-11T17:00:36.653
> 
> 标签：c#

我写了这段代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Text;
using System.Net.Mail;
using System.Net;

public partial class Test : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Foo m_oFoo = new Foo() { 
            S1 = "N"
        };

        List<Foo> m_List = new List<Foo>();
        m_List.Add(m_oFoo);

        IFoo m_oIFoo = (IFoo)m_List[0];
        m_oIFoo.S2 = "C";

        Response.Write(m_oIFoo.S1);
        Response.Write(m_oIFoo.S2);
    }
}

public class Foo
{
    public string S1 { get; set; }
    public Foo()
    {

    }
}

public class IFoo: Foo
{
    public string S2 { get; set; }
    public IFoo(){}
} 
```

但是编译器说“无法在 'IFoo' 类型上投射 'Foo' 类型的对象。” 我如何将 Foo 转换为 Foo1 而无需声明具有所有 Foo 方法的施法者，因为这是一个示例，Foo 有 100 多个方法。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:04:38.663

> 我如何将 Foo 转换为 Foo1

你不能。曾经。该对象确实是一个`Foo`对象，而不是一个`IFoo`，所以没有演员会成功。您需要“转换”对象，这是完全不同的事情。您需要根据实例`IFoo`中提供的数据创建一个新对象。`Foo`这样做的一种方法是通过一个`IFoo`接受`Foo`对象的构造函数：

```
public class IFoo: Foo
{
    public string S2 { get; set; }
    public IFoo(){}
    public IFoo(Foo other)
    {
        S1 = other.S1;
    }
} 
```

然后你可以这样做：

```
IFoo m_oIFoo = new IFoo(m_List[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:02:26.527

您不能将基类转换为它的派生（扩展）类之一。如果您考虑扩展类的一般过程，这是非常直观的。扩展类时，扩展类可能会添加基类中不存在的成员，因此如果编译器允许强制转换，那么可能会发生灾难性的事情！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:02:51.103

抱歉，没有内置的方法。最好的办法是使用反射来检索两个类中存在的所有属性并以这种方式设置值，或者可能序列化对象，然后将其反序列化为另一种类型。

两种方式都不是完美的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:03:03.483

您不能将基类强制转换为子类，但您可以使用 [转换运算符](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)执行类似的操作。

```
public class IFoo: Foo
{
    ...

    public static explicit operator IFoo(Foo foo)  // explicit byte to digit conversion operator
    {
        ...
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T17:05:39.380

您不能从基类转换为派生类。相反，尝试编写一个`explicit`转换器并使用[AutoMapper](http://automapper.org/)来映射所有属性。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-11T17:04:54.480

首先，请避免在您的类中使用大写字母 I，这通常用于接口。其次，您不能“向上”投射，因为 IFoo 继承了 Foo，而不是相反。

这样想：IFoo 是一个 Foo，但反过来不是。

但是，您可以将其重写为：

```
IFoo m_oIFoo = m_List[0] as IFoo; // this might be null now
if (m_oIFoo != null)
{
    m_oIFoo.S2 = "C";

    Response.Write(m_oIFoo.S1);
    Response.Write(m_oIFoo.S2);
} 
```

使用[as](http://msdn.microsoft.com/en-us/library/vstudio/cscsdfbt.aspx)运算符进行强制转换，但请注意它可以返回 null。

# angularjs-directive - Angularjs Directive Delegate 未通过中间处理程序触发

> ID：15344297
> 
> 赞同：0
> 
> 时间：2013-03-11T17:00:51.500
> 
> 标签：angularjs-directive

我刚刚花了 4 个小时尝试与代表一起执行指令，但没有运气。

用例：

我有一个名为“过滤器”的指令。

当用户激活/停用过滤器时，父作用域可能想要更新屏幕上的数据。

在让父级运行之前，我想对内部数据结构进行一些内部更改，并将新的过滤器状态传递给父级。

我创建了一个 jsfiddel 来显示我正在尝试做的简化版本。

[http://jsfiddle.net/concept/zADNy/](http://jsfiddle.net/concept/zADNy/) 这是我在指令中的范围

```
scope : {
    onFilterChanged : '&'
}, 
```

这是中间处理程序

```
function notifyParent() {
    scope.onFilterChanged({filters:scope.filters});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:00:51.500

**指令代表必须小写**（如果该陈述错误，请有人纠正我，如果是，那么为什么骆驼大小写版本不起作用）

好的，经过数小时的游戏、阅读和查看其他人的代码后，我发现由于某种原因，委托函数需要小写。

这是结果修复

[http://jsfiddle.net/concept/zADNy/4/](http://jsfiddle.net/concept/zADNy/4/)

这是我在指令中的范围

```
scope : {
    onfilterchanged : '&'
}, 
```

这是中间处理程序

```
function notifyParent() {
    scope.onfilterchanged({filters:scope.filters});
} 
```

# android - 在布局中 EditView 的位置单击自定义对话框中的 EditView 时出错

> ID：15344300
> 
> 赞同：1
> 
> 时间：2013-03-11T17:00:54.950
> 
> 标签：android, textview, dialog

当您单击 EditView (textStandardSMS) 时会出现带有 EditView 的自定义对话框，您可以在其中输入文本。但是当我在对话框中单击 EditView 时，键盘显示，然后开始出现一些错误。当我将“textStandardSMS”拉到“主”布局窗口时，一切都很好。

这里的布局导致错误：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/startLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/tlo_m"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/startLayout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right" >

    <ImageView
        android:id="@+id/imageONOFF"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="15dp"
        android:src="@drawable/power_1" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:onClick="fHelp"
        android:src="@drawable/ic_menu_info_details" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:onClick="fHistory"
        android:src="@drawable/ic_menu_send" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:onClick="fTempleteSMS"
        android:src="@drawable/ic_menu_compose" />

</LinearLayout>

<LinearLayout
    android:id="@+id/startLayout3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" >

    <LinearLayout
        android:id="@+id/startLayout4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <CheckBox
            android:id="@+id/cbStandardSMS"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:background="@drawable/bucik_cb_1"
            android:button="@android:color/transparent" />

        <ImageView
            android:id="@+id/bEditStandardSMS"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="8dp"
            android:clickable="true"
            android:onClick="fGetTemplateStandard"
            android:src="@drawable/add_template" />

    </LinearLayout>

    <TextView
        android:id="@+id/textStandardSMS"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="@drawable/ramka5"
        android:clickable="true"
        android:onClick="fEditStandardSMS"
        android:text="@string/empty"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout>

<LinearLayout
    android:id="@+id/startLayout5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/startLayout6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <CheckBox
            android:id="@+id/cBOutSMS"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:background="@drawable/bucik_cb_1"
            android:button="@android:color/transparent" />

        <ImageView
            android:id="@+id/bEditOut"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="8dp"
            android:clickable="true"
            android:onClick="fGetTemplateOut"
            android:src="@drawable/add_template" />

    </LinearLayout>

    <TextView
        android:id="@+id/TextOut"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="@drawable/ramka5"
        android:clickable="true"
        android:onClick="fEditOutSMS"
        android:text="@string/empty"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout>

<LinearLayout
    android:id="@+id/startLayout7"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="13dp"
        android:text="@string/MessagesList"
        android:textSize="25sp"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="fAddProfil"
        android:src="@drawable/ic_menu_add" />

</LinearLayout>

<ListView
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="10dp"
    android:layout_marginTop="15dp"
    android:cacheColorHint="@android:color/transparent"
    android:clickable="true" >
</ListView>

</LinearLayout> 
```

这是没有导致错误的一个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/startLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/tlo_m"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/startLayout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right" >

    <ImageView
        android:id="@+id/imageONOFF"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="15dp"
        android:src="@drawable/power_1" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:onClick="fHelp"
        android:src="@drawable/ic_menu_info_details" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:onClick="fHistory"
        android:src="@drawable/ic_menu_send" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:onClick="fTempleteSMS"
        android:src="@drawable/ic_menu_compose" />

</LinearLayout>

<LinearLayout
    android:id="@+id/startLayout3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp" >

    <LinearLayout
        android:id="@+id/startLayout4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <CheckBox
            android:id="@+id/cbStandardSMS"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:background="@drawable/bucik_cb_1"
            android:button="@android:color/transparent" />

        <ImageView
            android:id="@+id/bEditStandardSMS"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="8dp"
            android:clickable="true"
            android:onClick="fGetTemplateStandard"
            android:src="@drawable/add_template" />

    </LinearLayout>

</LinearLayout>

<TextView
    android:id="@+id/textStandardSMS"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:background="@drawable/ramka5"
    android:clickable="true"
    android:onClick="fEditStandardSMS"
    android:text="@string/empty"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<LinearLayout
    android:id="@+id/startLayout5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/startLayout6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <CheckBox
            android:id="@+id/cBOutSMS"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:background="@drawable/bucik_cb_1"
            android:button="@android:color/transparent" />

        <ImageView
            android:id="@+id/bEditOut"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="8dp"
            android:clickable="true"
            android:onClick="fGetTemplateOut"
            android:src="@drawable/add_template" />

    </LinearLayout>

    <TextView
        android:id="@+id/TextOut"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="@drawable/ramka5"
        android:clickable="true"
        android:onClick="fEditOutSMS"
        android:text="@string/empty"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout>

<LinearLayout
    android:id="@+id/startLayout7"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="13dp"
        android:text="@string/MessagesList"
        android:textSize="25sp"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="fAddProfil"
        android:src="@drawable/ic_menu_add" />

</LinearLayout>

<ListView
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="10dp"
    android:layout_marginTop="15dp"
    android:cacheColorHint="@android:color/transparent"
    android:clickable="true" >
</ListView>

</LinearLayout> 
```

谁能告诉我，为什么会这样？

# rest - ALM REST 中有什么方法可以访问测试参数吗？

> ID：15344302
> 
> 赞同：2
> 
> 时间：2013-03-11T17:01:08.850
> 
> 标签：rest, testing, configuration, parameters, alm

我正在开发一个应用程序，它应该从 ALM 中的测试实例中检索测试参数，在测试中提交它们，然后在 ALM 中更新状态。问题是我不知道如何从 REST API 访问这些参数。与我一样接近的是 /qcbin/rest/domains/{domain}/projects/{project}/test-configs/ 中的测试配置，但这不包含我需要的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-09T13:35:59.033

稍后再回答，但希望有一天它会有所帮助。

http://{{SERVERNAME}}/qcbin/rest/domains/{{DOMAIN}}/projects/{{PROJECT}}/test-parameters?fields=*&query=%7Bparent-id%5B{{test_id}} %5D%7D

这将返回带有参数数据的 XML 或 JSON（取决于 Accept: 标头）

# angularjs - ng-repeat 结合自定义指令

> ID：15344306
> 
> 赞同：18
> 
> 时间：2013-03-11T17:01:20.240
> 
> 标签：angularjs, angularjs-ng-repeat

我在将 ng-repeat 指令与我自己的自定义指令结合使用时遇到问题。

HTML：

```
<div ng-app="myApp">
  <x-template-field x-ng-repeat="field in ['title', 'body']" />
</div> 
```

JS：

```
angular.module('myApp', [])
    .directive('templateField', function () {
        return {
            restrict: 'E',
            compile: function(element, attrs, transcludeFn) {
                element.replaceWith('<input type="text" />');
            }
        };
    }); 
```

见[jSFiddle](http://jsfiddle.net/GDfxd/)

这里的问题是没有任何东西被替换。我想要完成的是 2x 输入字段的输出，在 DOM 中完全替换了“x-template-field”标签。我的怀疑是，由于 ng-repeat 正在同时修改 DOM，所以这是行不通的。

根据[this](https://stackoverflow.com/questions/10629238/angularjs-customizing-the-template-within-a-directive%20this) Stack Overflow question，接受的答案似乎表明这实际上在早期版本的AngularJS（？）中有效。

### 不会 element.html('...') 工作吗？

虽然 element.html('...') 实际上将生成的 HTML 注入到目标元素中，但我不希望 HTML 作为模板标签的子元素，而是在 DOM 中完全替换它。

### 为什么不用另一个具有 ng-repeat 指令的标签来包装我的模板标签？

基本上，出于与上述相同的原因，我不希望我生成的 HTML 作为重复标记的子元素。虽然它可能在我的应用程序中工作得很好，但我仍然觉得我已经调整了我的标记以适应 Angular，而不是相反。

### 为什么我不使用“模板”属性？

我还没有找到任何方法来更改从“模板”/“模板Url”属性中检索到的 HTML。我要注入的 HTML 不是静态的，它是从外部数据动态生成的。

### 我对我的标记太挑剔了吗？

大概。:-)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T03:46:59.897

`ng-repeat`您的指令需要使用更高的优先级在之前运行，因此在`ng-repeat`克隆元素时它能够选择您的修改。

[指令用户指南](http://docs.angularjs.org/guide/directive)中的“*编译/链接分离背后的原因*”部分解释了 ng-repeat 的工作原理。

当前的[优先`ng-repeat`级](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngRepeat.js#L149)是 1000，所以任何高于此的都应该这样做。

所以你的代码是：

```
angular.module('myApp', [])
    .directive('templateField', function () {
        return {
            restrict: 'E',
            priority: 1001, <-- PRIORITY
            compile: function(element, attrs, transcludeFn) {
                element.replaceWith('<input type="text" />');
            }
        };
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:21:32.023

把你`ng-repeat`的模板。您可以修改元素的属性，并相应地在指令中确定是否需要 ng-repeat，或者在指令编译中使用哪些数据

HTML（属性）：

```
<div ng-app="myApp" template-field></div> 
```

JS：

```
angular.module('myApp', [])
    .directive('templateField', function () {
        return {          
            restrict: 'A',
            template:'<input type="text" value="{{field}" ng-repeat="field in [\'title\',\'body\']" />'            
        };
    }); 
```

演示：http: [//jsfiddle.net/GDfxd/3/](http://jsfiddle.net/GDfxd/3/)

也可用作元素：

HTML（元素）：

```
<div ng-app="myApp" >
    <template-field/>
</div> 
```

JS

```
angular.module('myApp', [])
    .directive('templateField', function () {
        return {          
            restrict: 'E',
            replace:true,
            template:'<input type="text" value="{{field}}" ng-repeat="field in [\'title\',\'body\']" />'

        };
    }); 
```

演示：http: [//jsfiddle.net/GDfxd/3/](http://jsfiddle.net/GDfxd/3/)

# android - 覆盖android默认相机/活动

> ID：15344309
> 
> 赞同：1
> 
> 时间：2013-03-11T17:01:23.360
> 
> 标签：android, android-intent, android-camera

我有一个要求，我必须在相机上覆盖页眉和页脚。有一组三个按钮可以处理相机的偶数（点击/重拍）。

截至目前，我创建了一个表面用作预览并添加 jpegcallback 和图片回调来拍照并存储它。我手动处理android相机硬件和参数配置。众所周知，相机和图片方向存在问题。我通过设置相机方向以及旋转我捕获的图像来解决这个问题。虽然这种方法看起来很难看，但我能够实现最终目标。

如果我们有一种方法可以覆盖 android 默认相机活动，那就太好了，因为不需要上述任何步骤。我来自 Java/Java EE 背景，根据我的理解，我们应该能够创建自定义 Activity 并覆盖行为和属性。

**我的问题：**

1.  `android.provider.MediaStore.ACTION_IMAGE_CAPTURE`我们可以覆盖and的活动吗`com.android.camera.action.CROP`？

2.  如果是这样，哪个 android 包具有此活动的 java 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:15:41.827

希望我没有误解您的问题，但听起来您想在应用程序中使用相机。您希望在相机预览上方和下方有页眉和页脚时查看相机所看到的内容。然后你想让这些按钮做一些事情，比如拍照等。

如果我错了，我道歉。

只需查看文档中的相机实现即可。

[http://developer.android.com/guide/topics/media/camera.html#custom-camera](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

您可以使用用于显示相机源的预览视图上方、下方或顶部的任何按钮/文本创建自己的活动布局。然后只需使用按钮的点击事件或任何你想做的事情。其中大部分在链接中的文档中。

# jquery - jQuery动态添加的元素不能被移除

> ID：15344311
> 
> 赞同：0
> 
> 时间：2013-03-11T17:01:40.140
> 
> 标签：jquery, insertafter

我一直在尝试解决这个问题，并且在网上遇到了许多类似的帖子，但没有一个解决方案适用于我的特定实例。

我在一组元素中使用 jQuery 'inserAfter'。我可以轻松地添加组，.. 但是，当单击删除链接时，我也调用了一个 remove() 函数，.. 但是新添加的元素没有任何反应，即使我可以毫无问题地删除其他组。

我正在使用 jQuery 的 on() 作为 click 函数。但是，这仍然不适用于动态添加的元素。

要重现此问题，请转到下面的 jsfiddle 链接，单击 ADD GROUP 按钮并查看添加到 DOM 的黄色组。现在，将鼠标悬停在黄色组上以显示删除按钮。单击删除按钮，然后，tada... 没什么

这是一个例子：

[http://jsfiddle.net/revive/5MFRm/](http://jsfiddle.net/revive/5MFRm/)

```
jQuery(function($) { 

    $( "#tabs" ).tabs();
    $("#group0").hide();
    $('.group-content').hide(); // Hide all group-content elements

    function clonePanel() {          
        var panel=$("#tabs #group0").clone(false),
            lastpanel = $("#tabs .group").last().index(),
            newid = 'group'+(lastpanel+1);

        panel.attr('id',newid).addClass('newpanel'); 
        panel.insertAfter($("#tabs .group").last()).show();
    }                 

    $(".add-group").on('click',function(){  
        clonePanel();    
    });

    $(".delete-group").on('click',function(){  
        $(this).closest('.group').fadeOut('slow', function(){$(this).closest('.group').remove(); }); 
    //          alert('done');
    });  

    $('#tabs').on('click', '.group-title-toggle',function(){ // Add class "hover" on dt when hover
        $(this).closest('.group-title').toggleClass('active').next().slideToggle(); // Toggle dd when the respective dt is clicked
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:09:00.037

这就是您要寻找的内容：[在 jQuery 中，如何将事件附加到动态 html 元素？](https://stackoverflow.com/questions/1359018/in-jquery-how-to-attach-events-to-dynamic-html-elements).

这是您的代码正常工作。 [http://jsfiddle.net/5MFRm/2/](http://jsfiddle.net/5MFRm/2/)

代替`$('.add-group').on('click', function() {})`

使用这个符号

`$('body').on('click', '.add-group', function() {})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:05:28.913

请使用[jQuery 直播](http://api.jquery.com/live/)。它将侦听将来创建的所有对象。

# javascript - 如何让幻灯片自己滑动？

> ID：15344312
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:01:41.550
> 
> 标签：javascript, jquery

所以我有这个问题。我有一个页面，其中包含不会自行滑动的幻灯片，我希望它们会滑动。这是代码[http://jsfiddle.net/tUUPN/3/](http://jsfiddle.net/tUUPN/3/)

```
$(document).ready(function () {
$("#slideshow").css("overflow", "hidden");
$("#slideshow-nav").css("visibility", "visible");
$("#slideshow-nav a[href=#farm1]").addClass("active");

$("#slideshow-nav").localScroll({
    target: '#slideshow',
    axis: 'x'
});

$("#slideshow-nav a").click(function () {
    $("#slideshow-nav a").removeClass("active");
    $(this).addClass("active");
});

}); 
```

编辑

我更新了 jsfidde [http://jsfiddle.net/tUUPN/10/](http://jsfiddle.net/tUUPN/10/) （在左侧的外部资源选项卡中包含 jquery 文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:17:58.563

我建议使用[jQuery 的 Animate() 方法](http://api.jquery.com/animate/)来产生滑动效果。您可以在同一页面上阅读 API 和示例。

您仍然可以应用您的点击功能等，但您确实需要动画作为移动/滑动对象时的首选武器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:18:17.557

创建一个方法以转到下一张幻灯片，然后在 setInterval 中调用该方法。毫秒数决定了它触发的频率。如果您希望它停止，请使用 clearInterval。

# c# - Entity Framework 与 Interop.SHDocVw 有什么关系？

> ID：15344315
> 
> 赞同：1
> 
> 时间：2013-03-11T17:01:55.793
> 
> 标签：c#, entity-framework, edmx

我有一个我们最近修改过的项目。该项目是用 .NET 编写的，并为 x64 机器编译。我有一个我们为与数据库交互而构建的 DataEntities 模型。但是，当我们尝试连接到实体框架模型时，会出现错误。

实体框架 edmx 文件称为 DataCentral.edmx。使用此文件，我们尝试运行以连接到我们的实例的代码非常简单。

```
 string cs = CSManager.GetConnectionString();
        DataCentralEntities ctx = new DataCentralEntities(cs); 
```

当我们运行这两行时，它在第二行崩溃，内部异常：

```
Could not load file or assembly 'Interop.SHDocVw, Version=1.1.0.0, 
Culture=neutral, PublicKeyToken=null' or one of its dependencies. 
An attempt was made to load a program with an incorrect format. 
```

当我们将它作为 x86 运行时（由于其他原因，从长远来看这是不可能的）它运行得很好。我确实检查了连接字符串，它的格式正确。

这是我的问题：我没有在我的任何新更改中使用 ShDocVw。事实上，在我遇到这个错误之前，我什至从未听说过它。到底是什么导致这吐在这里？我错过了什么？

**更新**

我们发现了一个可能是在 .NET 2.0 前后构建的表单。（可能更早。）它通过 ShDocVw 库创建了对 Web 浏览器控件（不是官方 WebBrowser 控件）的引用。显然，这是在官方控制出现之前将 Web 浏览器嵌入到您的应用程序中的一种相当常见的方式。

我们将此表单升级为使用官方 WebBrowser 控件，并删除了我们项目中对 ShDocVw.dll 的所有引用，现在一切都按预期工作，即使在 x64 中也是如此。

我仍然不明白的是，当您的项目中有对 ShDocVw.dll 的引用时，为什么实体框架会在该行崩溃。那部分对我来说毫无意义。然而，我们现在又重新站起来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:22:49.703

在某些情况下，EntityFramework 会尝试加载主程序集引用的程序集（最值得注意的是，它发生在 EF 正在寻找预编译视图时）。在您的情况下，这会导致异常，这将导致将 32 位程序集加载到 64 位进程中。请注意，如果有其他任何尝试加载此程序集，也会发生同样的情况。您需要使用 64 位程序集或将项目构建为 32 位。另一种选择是使用 Corflags 将您的起始程序集设置为 32 位，这将导致在 64 位计算机上创建 32 位进程，因此您将能够加载以前导致问题的程序集。

# android - ActionBarSherlock 上的activatedBackgroundIndicator 的自定义背景不起作用

> ID：15344320
> 
> 赞同：12
> 
> 时间：2013-03-11T17:02:07.983
> 
> 标签：android, android-layout, background, actionbarsherlock, android-theme

我正在使用**ActionBarSherlock**，并且正在尝试为行背景自定义*activateBackgroundIndicator属性。*

如果我使用最新的 android sdk，没有**ActionBarSherlock**，我可以自定义背景，在*res/values/style.xml*上创建以下样式，并在*AndroidManifest.xml*上将其定义为*android:theme="@style/Theme.自定义”*：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.Custom" parent="android:Theme.Holo.Light.DarkActionBar">
     <item name="android:activatedBackgroundIndicator">@drawable/activated_background</item>
  </style>
</resources> 
```

然后，我的*res/drawable/activated_background.xml*包含以下代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">  
   <item android:state_activated="true" android:drawable="@color/row_activated" />
   <item android:drawable="@android:color/transparent" />  
</selector> 
```

最后，用于定义 ListView 中每一行的代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:background="?android:attr/activatedBackgroundIndicator">
    <TextView
            android:id="@+id/test_row"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/sample_string"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:padding="15dp"/>
</LinearLayout> 
```

结果显示在屏幕截图上。是一个简单的应用程序，在单击列表项时只有一个 ListView 和**ListView.CHOICE_MODE_SINGLE**和**getListView().setItemChecked(position, true) 。**

标准选定行的蓝色现在是黄色并且可以完美运行。

![没有 ABS 的清单](../Images/3d7092ee28b99b9d1807b95c5ba0ed06.png)

当我想使用 ActionBarSherlock 应用相同的自定义时，就会出现问题。现在样式文件是下一个，背景显示为蓝色而不是自定义黄色。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.Custom" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="activatedBackgroundIndicator">@drawable/activated_background</item>
        <item name="android:activatedBackgroundIndicator">@drawable/activated_background</item>
    </style>

    <style name="activatedBackgroundIndicator">
        <item name="android:background">?android:attr/activatedBackgroundIndicator</item>
    </style>
</resources> 
```

![带有 ABS 的列表](../Images/0ac6c487a08b27fdd0d88bf6c1b69ccc.png)

我不知道**ActionBarSherlock**是否支持*android:activatedBackgroundIndicator*功能，或者我是否忘记实现需要能够更改默认颜色的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T15:04:40.467

最后我找到了解决问题的方法。
这是行适配器中使用的**上下文。**使用的构造函数如以下代码所示：

```
public RowAdapter(Activity activity, ArrayList<String> list) {
    this.mContext = activity.getApplicationContext();
    this.elements = list;
    this.theActivity = activity;

    this.inflater = (LayoutInflater) this.mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
} 
```

只需将**上下文**从：
`this.mContext = activity.getApplicationContext()`(Application-Context)
更改为
`this.mContext = activity.getBaseContext()`(Activity-Context)即可
解决问题，现在背景是自定义背景。

> 每当您需要操作视图时，请使用**Activity-Context**，否则**Application-Context**就足够了。

这个[答案](https://stackoverflow.com/a/10347346/1211664)帮助我理解为什么在我的情况下使用*getBaseContext()*而不是*getApplicationContext()*。

![自定义行背景](../Images/1e211690d51bd95f6a429327851e0490.png)

# objective-c - 如何使用选择器参数创建方法

> ID：15344321
> 
> 赞同：3
> 
> 时间：2013-03-11T17:02:09.460
> 
> 标签：objective-c, parameter-passing, selector

嗨，我正在尝试制作一个以选择器为参数的 Objective-C 方法。但我不断收到“发送到实例的无法识别的选择器”错误消息。我正在执行以下操作：

这是带有选择器参数的方法：

```
-(void)createURL: (SEL) selector{ 
dispatch_sync(kBgQueue,^{
NSData* data = [NSData dataWithContentsOfURL: wcfURL];
    [self performSelectorOnMainThread:@selector(selector)
                           withObject:data waitUntilDone:YES];

});
} 
```

这是我想成为选择器的方法：

```
-(void)fetchedUserType:(NSData *)responseData{

NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                     options:kNilOptions
                                                       error:&error];

userType = [json objectForKey:@"getUserTypeResult"];
} 
```

这就是我调用我的方法的地方：

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSString *url = [NSString stringWithFormat:@"http://10.211.55.3:1234/Service1.svc/getUserType/%@", userEmail];
wcfURL = [[NSURL alloc]initWithString:url];
SEL sel = NSSelectorFromString(@"fetchedUserType:");
[self createURL:sel]; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:11:54.703

编辑1：

**你的错误在这里：**

```
 [self performSelectorOnMainThread:@selector(selector)
 ----------------------------------^^^^^^^^^^^^^^^^^^^ 
```

`selector`已经是一个选择器，而您又将其放入`@selector(`) 中。

它应该是

```
 [self performSelectorOnMainThread:selector withObject:data waitUntilDone:YES]; 
```

* * *

编辑0：

你的代码是正确的。**只有当您的 SEL 方法在当前类中找不到时，您**才会收到错误消息。

如下面的代码所示，如​​果我将方法名称`sum`更改`add`为此将引发相同的错误。

```
-(void)sum{
    NSLog(@"sum");
}

-(void) createURL: (SEL) selector{
    [self performSelector:selector];
}

- (IBAction)total:(id)sender {
    SEL sel = NSSelectorFromString(@"sum");
    [self createURL:sel];
} 
```

* * *

此外，您还需要满足**方法签名**。如果您的方法采用一个参数，则您需要发送一个。

```
-(void)sum:(id)integer{
    NSLog(@"sum:%ld",[integer integerValue]);
}

-(void) createURL: (SEL) selector{
    //NSData* data = [NSData dataWithContentsOfURL: nil];
    //[self performSelectorOnMainThread:@selector(selector) withObject:data waitUntilDone:YES];

    [self performSelector:selector withObject:@(12)];
}

- (IBAction)total:(id)sender {
    NSInteger total=0;

    for (id element in self.arrayController.arrangedObjects) {
        total += [element firstNumber]*[element secondNumber];
    }
    [self.label setStringValue:[NSString stringWithFormat:@"%ld",total]];

    SEL sel = NSSelectorFromString(@"sum:");
    [self createURL:sel];

} 
```

# .htaccess - Htaccess 在最后一个斜杠后获取最后一个单词

> ID：15344324
> 
> 赞同：0
> 
> 时间：2013-03-11T17:02:20.970
> 
> 标签：.htaccess, url, mod-rewrite

我怎样才能得到

```
http://www.example.com/aaa/bbb/ccc 
```

到

```
http://www.example.com/index.php?cat=ccc 
```

还希望它应该在以下情况下工作

```
http://www.example.com/aaa
http://www.example.com/aaa/ 
```

这将是

```
http://www.example.com/index.php?cat=aaa 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:08:43.693

你可以试试这个：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI}  .*/([^/]+)/?     [NC]
RewriteCond %{REQUEST_URI}  !index\.php      [NC]
RewriteRule  .*      /index.php?cat=%1 [L,NC,QSA] 
```

静默地图：

`http://www.example.com/any/number/of/folders/LastFolder`

到：

`http://www.example.com/index.php?cat=LastFolder`

对于永久和可见的重定向，替换`[L,NC,QSA]`为`[R=301,L,NC,QSA]`

# javascript - 在 JavaScript 模板引擎中重用元素

> ID：15344329
> 
> 赞同：2
> 
> 时间：2013-03-11T17:02:35.950
> 
> 标签：javascript, html, performance, template-engine

我的问题是关于 JS 模板引擎是如何工作的。

例如，我有一个看起来像这样的模板：

```
<div class="my-block"> 
   <h1>{{title}}</h1>
   <p>{{description}}</p>
</div> 
```

...和数据：

```
{
   title: 'Hello',
   description: 'World'
} 
```

...它呈现为 DOM 元素，该元素被保存到某个变量中（只需通过替换`{{title}}`and `{{description}}`with `String replace()`（类似[这样](http://ejohn.org/blog/javascript-micro-templating/)的东西）：

```
<div class="my-block"> 
   <h1>Hello</h1>
   <p>World</p>
</div> 
```

这种类型的元素一次只存在一个，但其中的值（标题和描述）经常更改。

如何避免每次（）创建 DOM 元素，并自动`.my-block`替换现有元素？`{{title}}``{{description}}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:53:19.030

为您的代码添加一些标记

```
<div class="my-block"> 
   <h1 class="slot-a">Hello</h1>
   <p class="slot-b">World</p>
</div> 
```

然后用（为简单起见使用jQuery，使用任何你想要的）更新它

```
$('.my-block .slot-a').text(data.title);
$('.my-block .slot-b').text(data.description); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:20:23.097

这已经有一个公认的答案，但这建议使用 jQuery 并编写代码来注入您的动态数据。我喜欢 jQuery，有时编写代码也不错，但这是一个关于模板使用的好问题。考虑到这一点，我将回答您的问题并使用 Transparency.js 和 Mustache.js 来展示您的选择。

在维护 DOM 中的元素和应用模板引擎时，您有两种选择。它们可以从那里开始（与您的 HTML 一起发送）并使用基于 DOM 的模板引擎，或者您可以将标记包含在标记中`script`并使用基于字符串的模板引擎动态添加它们。

关于第一个选项，您仍然可以使用基于 DOM 的引擎（例如 Transparency 或 PURE）应用模板。Transparency 实际上期望您的 HTML 已经存在于 DOM 中，并将就地操作其内容。对于简单的模板，这很好用。是否可以向标记中的元素添加类、id 或其他标识属性取决于您，这是缺点。这是一个示例来演示：

HTML（用作模板*并存*在于 DOM 中）：

```
<div class="my-block" id="myTemplate"> 
    <h1 class="title"></h1>
    <p class="description"></p>
</div> 
```

JavaScript（期望包含 jQuery 或类似 jQuery 的库）：

```
$(function() {
    var data = {
        title: 'Hello',
        description: 'World'
    };

    $('#myTemplate').render(data);
}); 
```

这是一个 jsFiddle：[Transparency.js 示例](http://jsfiddle.net/willslab/Q5B45/1/)

我建议为你的 DOM 元素添加一个 id，这样你的 DOM 访问速度会更快一些。不过，这完全取决于您。

您还可以将 HTML 动态添加到 DOM。在这种情况下，您需要以其他方式包含模板。一种简单的方法是使用`script`带有`type="text/template"`. 浏览器不会将此文本放入 DOM，但可以使用 jQuery 之类的库来提取其内容以进行模板访问。这是一个使用 Mustache.js 演示该方法的示例。

HTML（包括`script`标签内的模板）：

```
<div class="my-block" id="myBlock"></div>

<script type="text/template" id="myTemplate">
    <h1>{{ title }}</h1>
    <p>{{ description }}</p>
</script> 
```

JavaScript：

```
$(function() {
    var data = {
        title: 'Hello',
        description: 'World'
    };

    var template = $('#myTemplate').html();

    var html = Mustache.render(template, data);

    $('#myBlock').html(html);
}); 
```

这是一个 jsFiddle：[Mustache.js 示例](http://jsfiddle.net/willslab/2KmyG/1/)

在第二个示例中，您需要 DOM 中的占位符 div 来输出模板化字符串，但您不需要包含`h1`or`p`元素，因为它们将被动态添加。

每种方法都有一些明显的优势。我个人喜欢 Transparency.js 及其兄弟，但它只适用于更简单的无逻辑模板。您还需要小心为元素添加属性。你可以在你的 CSS 中重复使用这些相同的属性，但是你开始将一些东西结合起来，这很危险。

Mustache.js 也是无逻辑的，但您不需要向生成的标记添加任何额外的属性，您只需要使用带有双花括号的 Mustache 语法。但是，您需要将模板包含在`script`标签中，或者您也可以尝试使用 Hogan.js 之类的东西来预编译 Mustache。

我在最近发布的一个 Github Pages 站点中演示了一些其他示例以及 Jade。您可以直接在页面上查看模板，并查看源代码以了解它们在 JavaScript 中的呈现方式。

链接：[模板沙箱](http://willklein.github.com/templating-sandbox)

有关 Transparency.js 的更多信息：[尝试透明度](http://leonidas.github.com/transparency/)

..和 Mustache.js：[Github 上的 Mustache.js](https://github.com/janl/mustache.js/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:22:08.100

调用`.text`每个元素以将其设置为您的模型值。

# aem - 我们如何在 CQ5 中创建页面缩略图？

> ID：15344330
> 
> 赞同：2
> 
> 时间：2013-03-11T17:02:37.080
> 
> 标签：aem

CQ5 允许我们创建不同的图像再现，以便我们可以将它们用于多种用途，主要用途是缩略图。

基于相同的用例，我们能否在 CQ5 中为页面动态创建缩略图？

因此，如果用户在我的网站中搜索页面，我希望将页面的快照显示为结果的一部分，并且当点击时用户会查看主页。

请注意，我不想使用模板的缩略图属性，因为它显示相同的图像，我也不想检索存储在页面属性中的图像。

那么有没有办法我们可以做到这一点？

谢谢，拉维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:07:58.733

这是一个很难完全回答的问题。我最初的反应是告诉您为缩略图的每个页面创建一个新的页面属性并使用它。这可以通过修改页面模板的对话节点轻松完成。您必须对要列出的每个页面进行屏幕截图并将其上传到该页面的属性，但这肯定会完成工作。

但是，听起来您希望动态生成屏幕截图，这超出了 CQ 的范围。你需要一个图形软件库来做到这一点。幸运的是，有几个开源选项。我最熟悉的是开罗（[http://en.wikipedia.org/wiki/Cairo_%28graphics%29](http://en.wikipedia.org/wiki/Cairo_%28graphics%29)）

Firefox 使用 Cairo 作为其渲染引擎 (Gecko) 的一部分。本质上，您需要做的是让渲染引擎的输出转到一个文件（如 png），而不是显示在您的浏览器中。当您可以在页面的右窗格中预览搜索结果时，这类似于 Google 所做的。基本上，他们的爬虫获取屏幕抓取（我假设使用这种方法），然后当您搜索时，他们已经捕获了页面。

我还看到了这篇关于使用[Firefox](http://jerel.co/blog/2010/10/using-firefox-on-a-headless-server-to-make-screenshots-of-websites)采取网站截图。

无论你选择哪条路，我都祝你一切顺利。听起来像是一个雄心勃勃的项目。

# html - 用方括号形成变量名

> ID：15344341
> 
> 赞同：0
> 
> 时间：2013-03-11T17:03:28.927
> 
> 标签：html, arrays, forms, variables, square-bracket

上传文件时，我会进行“预览”之类的操作。它将表单变量存储为

```
for(i=0;i<count($UpFile);i++){ //loop
<input name="Files[',htmlspecialchars($UpFile_name[$i]),'][FileName]" type="text" value="',htmlspecialchars($UpFile_name[$i]),'">
<input name="Files[',htmlspecialchars($UpFile_name[$i]),'][FileSize]" type="text" value="',htmlspecialchars($UpFile_size[$i]),'"> 
```

然后在提交之后，`$Files`我何时使用保存的文件，使用它们的名称作为变量名称。

问题是，当我上传名称为 的文件时`file[123].jpg`，php 不会将其视为`$Files['file[123].jpg']`，而是视为`$Files[$file[123].jpg']`. 换句话说，找不到表单记录。

如果文件名中有方括号，如何存储表单输入的名称以保留方括号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:53:42.597

```
$SpecReplace=Array('['=>'&#91;',']'=>'&#93;');
<input name="Files[',htmlspecialchars(strtr($UpFile_name[$i],$SpecReplace)),'][FileName]" type="text" 
```

将括号替换为 html 特殊字符有帮助 =)

# javascript - 下面的两个代码块是否返回相同的结果？（脚本元素与 div 元素）

> ID：15344343
> 
> 赞同：0
> 
> 时间：2013-03-11T17:03:30.493
> 
> 标签：javascript, html

下面的两个代码块是否返回相同的结果？如果是这样，是否有任何理由在特定情况下使用一个与另一个？谢谢！

代码 A：

```
if (document.createElement && document.body) 
{ 
var myscript = document.createElement('SCRIPT'); 
myscript.src = document.location.protocol + '//myURLhere'; 
document.body.appendChild(myscript); 
} 
```

代码 B：

```
var div=document.createElement('div');
div.id='dcad';
div.innerHTML=http://myURL;
document.body.appendChild(div); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:08:56.087

就像我在你的另一篇文章中回答的那样，没有。

如果需要，该`<script>`标记使用 src 属性指向外部 javascript 文件。

该`<div>`标签没有 src 属性，无法通过这种方式加载数据。

为了完成这项工作，您需要使用 AJAX。然后使用 ajax 响应，您可以执行以下操作：

```
div.innerHTML = ajaxResponse; 
```

# snmp - CISCO ASR1004 总活跃翻译

> ID：15344346
> 
> 赞同：1
> 
> 时间：2013-03-11T17:03:43.967
> 
> 标签：snmp, cisco, nat, oid

我正在尝试获取 CISCO ASR1004 设备上活动 NAT 会话的总数。

目前，我只知道通过登录控制台并运行“show ip nat statistices”来获取此信息。

为了将它添加到监控系统（cacti 和 icinga）中，我创建了一个执行相同操作的脚本，但它是一个令人讨厌的 hack，有时（8 或 10 次中的一次）停滞不前，什么也没有等待。

如果有人可以将我引导至此统计信息的 SNMP 项目（我似乎无法在我拥有的所有 MIBS 中找到一个）或一种使我的脚本更稳定的方法，我将非常感激：D

* * *

### active_nats.sh

```
#!/bin/sh
output=$(/opt/mon/all_nat_stats.sh $1 | grep "Total active translations:" | awk '{print $4}')
echo -n "$output" 
```

* * *

### all_nat_stats.sh

```
#!/bin/bash
set ipaddr [lrange $argv 0 0]
set timeout -1

spawn ssh monitor@$ipaddr show ip nat statistics
match_max 100000
expect -timeout 2 "yes/no" {send "yes\r"; exp_continue}
expect "*?assword:*"
send -- "<password>\r"
send -- "\r"
expect eof 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:26:44.590

[http://www.cisco.com/en/US/docs/routers/asr1000/mib/guide/asr1mib.pdf](http://www.cisco.com/en/US/docs/routers/asr1000/mib/guide/asr1mib.pdf)

“CISCO-IETF-NAT-MIB 的 MODULE-IDENTITY 是 ciscoIetfNatMIB，其顶级 OID 是 1.3.6.1.4.1.9.10.77 (iso.org.dod.internet.private.enterprises.cisco.ciscoExperiment. ciscoIetfNatMIB)。”

也许你可以在那里闲逛，但我没有看到任何说“总活跃 nat 会话数”的东西。

# php - 如何使用 PHP 从 BLOB URL 获取 blob 以保存在数据库中？

> ID：15344351
> 
> 赞同：0
> 
> 时间：2013-03-11T17:04:06.453
> 
> 标签：php, mysql, url, blob

我有一个像这样的 Blob Url：blob:http%3A//localhost/539c9a90-5356-4e04-8571-d0b420567271 如何在 PHP 中创建一个 Blob？我必须在 MySql 数据库上保存一个 blob 文件。

# java - 在 Java 的正则表达式中匹配空格

> ID：15344353
> 
> 赞同：2
> 
> 时间：2013-03-11T17:04:08.903
> 
> 标签：java, regex, validation

我正在用 Java 创建一个电话应用程序，并且需要能够验证电话号码是否符合以下格式之一：

*   `444 444 4444`
*   `444-444-4444`
*   `4444444444`

为了完成这个任务，我写了这个：

```
public static void main(String[] args){
    Scanner sc = new Scanner(System.in);
    String str = sc.next();
    System.out.print(str.matches("\\d{3}([-. ])?\\d{3}([-. ])?\\d{4}"));
} 
```

出于某种原因，String 方法`matches()`非常适用于`444-444-4444`and `4444444444`，但是当我输入 时返回不正确的答案`444 444 4444`。我已经查看了几个关于堆栈溢出的类似问题，但我仍然没有找到适合我的问题的修复程序。有人可以告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:07:12.903

模式很好：http: [//ideone.com/Y4Hlph](http://ideone.com/Y4Hlph)

问题是默认情况下[`Scanner#next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)返回[以空格分隔的标记，](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)因为您没有另外指定分隔符。

> A`Scanner`使用分隔符模式将其输入分解为标记，默认情况下匹配空格。

[`Scanner#nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)如果您想逐行获取输入， 请使用。[http://ideone.com/O3Hu0Z](http://ideone.com/O3Hu0Z)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:07:00.847

问题不在于您的正则表达式模式，而在于实际`String`传入的内容。

[Scanner#next](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)使用空格作为分隔符，因此仅在您用作输入值`4444`时传入第一个标记。`444 444 4444`你可以使用

```
String str = sc.nextLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:07:06.583

我认为问题不在于您的正则表达式，而在于您如何阅读字符串。`Scanner#next()`返回它找到的下一个标记并在分隔符上拆分标记，*默认情况下空格是分隔符*。

尝试`Scanner#nextLine()`改用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:11:23.680

用于`Scanner.nextLine()`用换行符分隔，而不仅仅是任何空白字符。对于`next()`第三种情况，您会得到“444”。

小心点“。” 匹配任何字符。

因此，正确的正则表达式如下所示：

`\\d{3}([- ])?\\d{3}([- ])?\\d{4}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T17:12:23.553

```
 String str ="444 444 4444";
System.out.print(str.matches("\\d{3}([-. ])?\\d{3}([-. ])?\\d{4}")); 
```

您的代码没有问题。只需添加

```
String str=sc.nextLine(); 
```

# git - Git 使用来自 GitHub 客户端的同步来分离 HEAD

> ID：15344354
> 
> 赞同：3
> 
> 时间：2013-03-11T17:04:09.870
> 
> 标签：git, github, git-merge, github-for-windows

我在使用 Git 时遇到以下问题：

1.  我在 GitHub 上创建了一个仓库
2.  我使用 GitHub 客户端将存储库克隆到本地
3.  其他开发人员在分支 master 中提交到 GitHub
4.  我在本地提交到本地 git repo（所以我不同步，提交是未同步的提交）

当**我使用命令行**来解决这个问题时：

```
 git pull -> merge detected
 git mergetool -> resolve conflicts
 git commit -m "Reolved conflicts"
 git push -> All changes were uploaded to GitHub 
```

一切顺利。但是**，当我使用 GitHub 客户端**时，会发生以下情况：

> 1.  按同步解决冲突。
> 2.  GitHub说有一个合并待解决
> 3.  Inmediatly 我的本地仓库在分离的**HEAD**

拜托，有人可以解释为什么 GitHub 客户端将我的回购留在分离的头上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:26:14.893

我相信 Github for Windows 会做一个 rebase。如果存在冲突并且您看到您处于分离的头部状态，请尝试解决冲突，`git add`如果需要解决的文件，然后执行

```
git rebase --continue. 
```

要了解更多，请查看`git pull --rebase`刚刚结束的内容`git pull`

# r - 如何将插件加载到 Revolution R v6.1？

> ID：15344355
> 
> 赞同：0
> 
> 时间：2013-03-11T17:04:18.600
> 
> 标签：r, svn, plugins, revolution-r

我想在 Revolution R v6.1 中安装一个 SVN 客户端，例如 AnkhSVN。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:04:18.600

Revolution R 是在 Microsoft Visual Studio 2008 上构建的，因此可以加载一些为 Visual Studio 2008 设计的插件。`Tools..Options..Environment..Add-in/Macros Security`不支持正常选项，因此这些说明（也出现在用户手册中的早期版本的 Revolution R） .

您可以通过执行以下操作让 AnkhSVN 在 Revolution R Enterprise 中工作：

1.  安装最新版本的 AnkhSVN。
2.  将目录中的所有文件复制`C:\Program Files (x86)\AnkhSN 2`到文件夹中：

    ```
    C:\Revolution\R-Enterprise-6.0\IDE64\PackagesToLoad 
    ```

    和

    ```
    C:\Revolution\R-Enterprise-6.0\IDE32\PackagesToLoad 
    ```

3.  退出革命 R 企业。

4.  以管理员身份打开 DOS 命令窗口并在目录中运行以下命令：

    ```
    'C:\Revolution\R-Enteprise-6.0\IDE64' 
    ```

    命令：

    ```
    start /wait RevoIDE.exe /remove
    start /wait RevoIDE.exe /setup 
    ```

    （最后一条命令大约需要 30 秒才能完成）

5.  启动革命 R 企业。该插件现在应该被激活。

# javascript - 如何将对象放入字符串？

> ID：15344359
> 
> 赞同：0
> 
> 时间：2013-03-11T17:04:26.120
> 
> 标签：javascript, jquery, string, object

当一个用过的点击图像时，我想把这个点击的图像放入灯箱。那行得通。我想添加另一个功能，在灯箱中显示的图像旁边，我想放一个表格。

```
var aaa = $(this).addClass("some_class");
aaa.modal(); 
```

这运作良好。图像正确显示在灯箱中。

更远，

```
var aaa = $(this).addClass("instagram_modal_active");
var modal_data = $('#show').html('<div class="modal"><div class="left">xx</div><div class="right">sfaf sf</div></div>');

modal_data.modal(); 
```

这也正常工作 - 在灯箱窗口中显示 2 列和一些文本。

现在，我想将单击的图像放入左列：

```
var aaa = $(this).addClass("instagram_modal_active");
var modal_data = $('#show').html('<div class="modal"><div class="left">'+aaa.html()+'</div><div class="right">sfaf sf</div></div>');

modal_data.modal(); 
```

或者

```
var modal_data = $('#show').html('<div class="modal"><div class="left">'+aaa+'</div><div class="right">sfaf sf</div></div>'); 
```

但在这两种情况下，点击的图像都不会显示在灯箱的迷你布局内。

关于“错误”消息 - 我收到类似`[object Object]`或在灯箱外显示图像的错误。

我可以请教你们如何将图像与其他文本一起放置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:18:25.310

好的，所以我这样修复了它：

```
var aaa = $(this).addClass("some_class");
var modal_data = $('#show').html('<div class="modal"><div class="left"></div><div class="right">sfaf sf</div></div>');
$('.left').html(aaa);    

modal_data.modal(); 
```

一切似乎都在工作。

# c++ - c ++包括libs和为directX11添加目录

> ID：15344361
> 
> 赞同：0
> 
> 时间：2013-03-11T17:04:27.310
> 
> 标签：c++, directx-11, libs

因此，我正在尝试学习 DirectX 教程，但我不断收到以下错误：

```
 1>main.obj : error LNK2019: unresolved external symbol _D3D11CreateDeviceAndSwapChain@48
   referenced in function "void __cdecl InitD3D(struct HWND__ *)" (?InitD3D@@YAXPAUHWND__@@@Z)
   1>main.obj : error LNK2019: unresolved external symbol _D3DX11CompileFromFileW@44 referenced in
   function "void __cdecl InitPipeline(void)" (?InitPipeline@@YAXXZ) 
```

现在我很确定这与包含正确的目录和库等有关。我添加了包含并设置了链接器选项

```
 #include <d3d11.h>
 #include <d3dx11.h>
 #include <d3dx10.h>
 #pragma comment (lib, "d3d11.lib")
 #pragma comment (lib, "d3dx11.lib")
 #pragma comment (lib, "d3dx10.lib") 
```

我还在配置属性-> VSC++ 目录-> 包含目录和 Lib 中设置了目录。目录

还有什么我想念的吗？

编辑：我使用 Visual Studio c++ 2010 express

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:22:15.570

1）检查你的链接器设置，你需要在那里添加你的库

2）您是在构建 x86 还是 x64，具体取决于库位于不同的文件夹中

3）vs2010及之前需要安装directx sdk，自带vs2012 sdk

# c# - JS警报窗口后未刷新DropDownList

> ID：15344364
> 
> 赞同：0
> 
> 时间：2013-03-11T17:04:38.167
> 
> 标签：c#, asp.net

有一个 asp.net 页面，其中我有一个下拉列表服务器控件。此控件负责根据绑定到它的类别过滤产品。我没有使用 DropDownList 的 SelectedIndexChanged 事件，而是在它旁边留下了一个按钮。

控件的第一项只是一个文本（不是任何产品类别），“Select One”！如果某些用户在没有选择任何选项的情况下按下“搜索”按钮会怎样。我将使用“if”语句在代码中处理它。这是我的代码：

```
if(ddlCategories.SelectedIndex==0)
{
string msgbox = "alert('" + GiftShop.Properties.Resources.MustSelectAnItem+ "');";
            ScriptManager.RegisterStartupScript(Page, this.GetType(), "msgbox", msgbox, true);
} 
```

但即使我选择了一个真正的类别（而不是文本“选择一个”），它也能正常工作。顺便说一句，有一个 UpdatePanel 包含上面的控件。

我不知道可能是什么原因。

如果有人给我一些想法，我将不胜感激！提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:15:53.170

如果“选择一个”不是产品类别，为什么您`SelectedIndex`在编码中使用...？

您可以通过`DropDown Text`Property 尝试...

```
if (ddlCategories.Text.ToUpper() == "SELECT ONE") 
```

# embedded - 通常是否可以唯一标识单个 MCU（出于许可目的）（没有可用的 MAC 地址）

> ID：15344369
> 
> 赞同：1
> 
> 时间：2013-03-11T17:05:09.553
> 
> 标签：embedded, 68hc12

我被要求增强 MCU 的固件安装程序（特别是飞思卡尔 MC9S12E64 - 虽然我不知道这是否重要）。

增强安装的目的是限制固件可以安装的次数。似乎最好的方法是在固件安装期间唯一标识正在使用的特定 MCU，以便在中央数据库中进行跟踪。

如果 MCU 有 MAC 地址，这似乎是可行的。不幸的是，这些 MCU 没有网络接口，因此没有 MAC 地址。翻阅上述 MCU 的手册，我找不到 MCU 唯一标识符的指示。

我的问题是：MCU 通常是否具有与它们相关联的唯一标识符 - 类似于 MAC 地址 - 当固件被烧入这些设备时，可以通过软件获得？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:35:20.507

有些会，有些不会，并非所有制造商的所有设备都可以这样做。

一种解决方案是将您自己的唯一标识符编程到制造时可用的任何非易失性存储中。另一种方法是包含一个设备，例如[Ramtron 的 F-RAM 串行存储器](http://www.ramtron.com/products/nonvolatile-memory/serial.aspx)，它提供唯一的序列号以及非易失性存储器。许多（可能更便宜）串行 EEPROM 设备也包括唯一 ID 或 MAC（[示例](http://www.atmel.com/products/memories/serial/mac-eui-serial-number.aspx)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:35:12.787

没有多少人这样做，因为制造商这样做很痛苦——尽管正如评论中所指出的，它在基于 Cortex 的较新部件中变得越来越流行——这种痛苦一定是值得的！

您可以添加一个外部设备，例如 Dallas/Maxim Onewire 序列号芯片。当然，没有什么可以阻止您的用户修改板子以使他们都报告相同的 ID，以便他们可以多次安装它......

或者在制造设备时将您自己的 ID 编程到闪存中，并锁定设备，使其无法（轻松）通过调试界面进行更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T15:53:25.253

HCS12 没有内置这样的功能。但是请注意，它有一个寄存器 PARTID，用于“我是哪个 S12 衍生物，哪个硅掩模？”

您需要做的是编写您自己的闪存编程算法来跟踪内部写入次数，但在这种情况下您必须修改程序。不幸的是，您使用的是 E64，它不仅缺少合适的片上 EEPROM，而且只有 1 个闪存库。这意味着写下这个“内部序列号”的代码必须从 RAM 中执行。飞思卡尔网站上有一个应用说明。

# jquery - 尝试使用 CSS3 动画、过滤器和关键帧来获得平滑的动画循环

> ID：15344370
> 
> 赞同：0
> 
> 时间：2013-03-11T17:05:10.403
> 
> 标签：jquery, html, css, css-transitions, css-animations

我希望模仿此处显示的这种效果：[http ://www.yabuushelberg.com/](http://www.yabupushelberg.com/)

仅使用 CSS3 和/或 HTML5 效果。如果可能，宁愿不使用 javascript。

到目前为止，我已经得到了这个： http: [//www.bigideaadv.com/kevin/](http://www.bigideaadv.com/kevin/)

任何人都有任何建议。

**这是当前的 HTML 标记：**

```
<div id="logo_fadein">
    <span>K</span>
    <span>e</span>
    <span>v</span>
    <span>i</span>
    <span>n</span>
    &nbsp;
    <span>O</span>
    <span>'</span>
    <span>S</span>
    <span>u</span>
    <span>l</span>
    <span>l</span>
    <span>i</span>
    <span>v</span>
    <span>a</span>
    <span>n</span>
</div> 
```

**和CSS：**

```
#logo_fadein {
    margin: 25% auto 0 auto;
    padding: 0;
    width: 320px;
    color: #000000;
    background: transparent;
    font-family: "helvetica neue ultra light", "helvetica neue";
    font-size: 1.65em;
    font-weight: 100;
    text-align: center;
    text-transform: uppercase;
}

@-moz-keyframes blackblur {
  from { text-shadow: 0px 0px 15em white; color: transparent; }
  to   { text-shadow: 0px 0px 15em white; color: white; }
}

@-ms-keyframes blackblur {
  from { text-shadow: 0px 0px 15em white; color: transparent; }
  to   { text-shadow: 0px 0px 15em white; color: white; }
}

@-moz-keyframes blackblur {
  from { text-shadow: 0px 0px 15em white; color: transparent; }
  to   { text-shadow: 0px 0px 15em white; color: white; }
}

@-o-keyframes blackblur {
  from { text-shadow: 0px 0px 15em white; color: transparent; }
  to   { text-shadow: 0px 0px 15em white; color: white; }
}

@-webkit-keyframes blackblur {
  from { text-shadow: 0px 0px 15em white; -webkit-filter: blur(2px); color: transparent; }
  to   { text-shadow: 0px 0px 15em white; -webkit-filter: blur(0px); color: white; }
}

@keyframes blackblur {
  from { text-shadow: 0px 0px 15em white; -webkit-filter: blur(2px); color: transparent; }
  to   { text-shadow: 0px 0px 15em white; -webkit-filter: blur(0px); color: white; }
}

#logo_fadein span:nth-of-type(1)  { 
    -moz-animation: blackblur 2s ease-in 1.5s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.5s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.5s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.5s 2 alternate;
    animation: blackblur 2s ease-in 1.5s 2 alternate;
}

#logo_fadein span:nth-of-type(2)  { 

    -moz-animation: blackblur 2s ease-in 1.9s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.9s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.9s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.9s 2 alternate;
    animation: blackblur 2s ease-in 1.9s 2 alternate;
}

#logo_fadein span:nth-of-type(3)  {

    -moz-animation: blackblur 2s ease-in 1.75s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.75s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.75s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.75s 2 alternate;
    animation: blackblur 2s ease-in 1.75s 2 alternate;
}

#logo_fadein span:nth-of-type(4)  {

    -moz-animation: blackblur 2s ease-in 1.5s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.5s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.5s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.5s 2 alternate;
    animation: blackblur 2s ease-in 1.5s 2 alternate;
}

#logo_fadein span:nth-of-type(5)  {

    -moz-animation: blackblur 2s ease-in 2s 2 alternate;
    -ms-animation: blackblur 2s ease-in 2s 2 alternate;
    -o-animation: blackblur 2s ease-in 2s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 2s 2 alternate;
    animation: blackblur 2s ease-in 2s 2 alternate;
}

#logo_fadein span:nth-of-type(6)  {

    -moz-animation: blackblur 2s ease-in 1.45s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.45s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.45s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.45s 2 alternate;
    animation: blackblur 2s ease-in 1.45s 2 alternate;
}

#logo_fadein span:nth-of-type(7)  { 

    -moz-animation: blackblur 2s ease-in 1.65s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.65s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.65s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.65s 2 alternate;
    animation: blackblur 2s ease-in 1.65s 2 alternate;
}

#logo_fadein span:nth-of-type(8)  {

    -webkit-animation: blackblur 2s ease-in 1.8s 2 alternate;
}

#logo_fadein span:nth-of-type(9)  {

    -moz-animation: blackblur 2s ease-in 1.45s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.45s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.45s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.45s 2 alternate;
    animation: blackblur 2s ease-in 1.45s 2 alternate;
}

#logo_fadein span:nth-of-type(10) {

    -moz-animation: blackblur 2s ease-in 1.9s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.9s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.9s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.9s 2 alternate;
    animation: blackblur 2s ease-in 1.9s 2 alternate;
}

#logo_fadein span:nth-of-type(11) {

    -moz-animation: blackblur 2s ease-in 2s 2 alternate;
    -ms-animation: blackblur 2s ease-in 2s 2 alternate;
    -o-animation: blackblur 2s ease-in 2s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 2s 2 alternate;
    animation: blackblur 2s ease-in 2s 2 alternate;
}

#logo_fadein span:nth-of-type(12) {

    -moz-animation: blackblur 2s ease-in 1.6s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.6s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.6s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.6s 2 alternate;
    animation: blackblur 2s ease-in 1.6s 2 alternate;
}

#logo_fadein span:nth-of-type(13) { 

    -moz-animation: blackblur 2s ease-in 1.7s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.7s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.7s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.7s 2 alternate;
    animation: blackblur 2s ease-in 1.7s 2 alternate;
}

#logo_fadein span:nth-of-type(14) { 

    -moz-animation: blackblur 2s ease-in 1.8s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.8s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.8s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.8s 2 alternate;
    animation: blackblur 2s ease-in 1.8s 2 alternate;
}

#logo_fadein span:nth-of-type(15) {

    -moz-animation: blackblur 2s ease-in 1.75s 2 alternate;
    -ms-animation: blackblur 2s ease-in 1.75s 2 alternate;
    -o-animation: blackblur 2s ease-in 1.75s 2 alternate;
    -webkit-animation: blackblur 2s ease-in 1.75s 2 alternate;
    animation: blackblur 2s ease-in 1.75s 2 alternate;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:22:01.143

尝试改变

```
 text-shadow: 0px 0px 15em white; 
```

至

```
 text-shadow: 0px 0px 5px #000; 
```

以获得更好的模糊效果

# mysql - MySql 转储自定义路径

> ID：15344372
> 
> 赞同：0
> 
> 时间：2013-03-11T17:05:17.330
> 
> 标签：mysql, path, mysqldump

我正在尝试导入一个数据库（基因本体数据库）以获得我自己的本地副本。我用来导入它的指令是：

```
echo "create database mygo" | mysql
cat *.sql | mysql mygo
mysqlimport -L mygo *.txt 
```

数据集很大（超过 30 GB），我想指定存储它的路径，而不是使用默认的 mysql 位置。可能吗？如果是，我应该使用哪些命令？

# iphone - -JSONValue 失败。错误是：令牌的非法开始 [E]

> ID：15344374
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:05:21.547
> 
> 标签：iphone, ios, json, runtime-error

我需要使用 JSON 提取数据，然后将它们放入 UITableView，但是当我尝试提取它们时出现此错误。

```
 -JSONValue failed. Error is: Illegal start of token [E] 
```

网站里的数据很多，10万多条，也许太多了？我的代码：

```
 #import <UIKit/UIKit.h>
 #import "SBJson.h"

 @interface ProductsViewController : UIViewController <UITableViewDataSource,   UITableViewDelegate, NSURLConnectionDataDelegate> {

     NSURLConnection *conn;
     NSMutableData *webData;

} 
```

在 ProductsViewController.m

```
 - (void)viewDidLoad
{
      [super viewDidLoad];
    NSURL *url=[NSURL URLWithString:@"http://www.e-xxxxxxx.it/virtualShop/pageflow/address/xxxxxxxxxxxx.do?json=true&vsIdxxxxxxxxxxxxxxxxxxxxxxxxxx=Ext.data.JsonP.callback1"];

   NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
   conn =[[NSURLConnection alloc]initWithRequest:req delegate:self];
   if(conn){
    webData =[[NSMutableData alloc]init];
   }
}

 -(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
       [webData setLength:0];
   }

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
       [webData appendData:data];
  }

 -(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
       NSLog(@"Connection failed: %@", [error description]);
 }

 -(void)connectionDidFinishLoading:(NSURLConnection *)connection{
       NSLog(@" the number of data is %d", [webData length]);
       //the number of data is 104557

       NSString *strResult =[[NSString alloc]initWithData:webData encoding:NSUTF8StringEncoding];
      NSDictionary *result =[strResult JSONValue];//the error is here
     for (id obj in result){
            NSLog(@"%@", result);
      }

   } 
```

他的字符串**strResult**很长，这是一段

```
 Ext.data.JsonP.callback1(

      { "urlId": "spesa-che-non-pesa-root",  
     "children" :
        [{ "urlId": "9950000123511", 
         "label" : "I dolci della Pasqua" , 
         "hasWideIcon" : false ,  
          "hasArticles" :false,
          "children" : [{ "urlId": "9950000123512", 
                          "label" : "Colombe" ,  
                           "hasWideIcon" : false ,  
                            "hasArticles" :false,
                            "children" : [{ "urlId": "9950000123513", 
                                            "label" : "Tradizionali" ,  
                                             "hasWideIcon" : false ,  
                                           "hasArticles" :true},
                                          { "urlId": "9950000123514",
                                            "label" : "Farcite e ricoperte" ,
                                              "hasWideIcon" : false ,  
                                                "hasArticles" :true},
                                          { "urlId": "9950000123515", 
                                            "label" : "Piccole" , 
                                            "hasWideIcon" : false , 
                                             "hasArticles" :true}]},
        { "urlId": "9950000123516", 
          "label" : "Torte " , 
          "hasWideIcon" : false ,  
           "hasArticles" :true},
        { "urlId": "9950000123517", 
          "label" : "Uova al latte" ,  
          "hasWideIcon" : false ,  
           "hasArticles" :true},
        { "urlId": "9950000123522", 
          "label" : "Cioccolatini e Dolciumi" ,  
           "hasWideIcon" : false ,  
           "hasArticles" :true}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:48:24.733

如果您甚至**看到**响应...您没有看到它**不是 JSON 吗？**

它被封装在一个 JavaScript 回调函数中。基本上，网络服务会向您返回错误的响应。

# c - 新节点坏了。想不通怎么了？

> ID：15344375
> 
> 赞同：0
> 
> 时间：2013-03-11T17:05:24.400
> 
> 标签：c

我更改了代码，将 memcpy 移到了 if 语句中，但我仍然得到同样的错误。

** * 返回一个用给定顺序填充的新链表节点，函数 * 分配一个新顺序并复制存储在数据中的值，然后分配一个 * 链表节点。如果您正在实现此功能，请确保您 * 复制，因为原始数据可能会被调用函数修改。*/

```
struct order 
{
        int id;
        char side;
        int quantity;
        double price;
};

struct onode 
{
        struct order* data;
        struct onode* next;
        struct onode* prev;
};

    struct onode* newNode (struct order* data)
    {
        struct order* dataValue  = (struct order*) malloc(sizeof(struct order));
        struct onode* linkedlist = (struct onode*) malloc(sizeof(struct onode));

        if(data != NULL)
        {
            linkedlist ->data = dataValue;
            memcpy(dataValue, data, sizeof(*dataValue));
        }

        else
        {
            return NULL;
        }

        linkedlist->prev = NULL;
        linkedlist->next = NULL;

        return linkedlist;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:23:08.387

问题不在您显示的代码中。当这样称呼它时：

```
struct onode * mylist;
struct order * data = malloc(sizeof(struct order));
data->id = 4;
data->price = 20.11;
data->quantity = 3;
data->side = 'a';
mylist = newNode(data); 
```

该列表`mylist`是使用包含在 中设置的值的节点正确生成的`data`。我怀疑您用来生成列表的代码与我上面显示的不同。

* * *

编辑：对你的“错误”

> 测试失败：-------------------------------- ------------------------
> 您的 newNode 似乎已经崩溃了！有了这个问题，我们就无法测试您的其余代码。
> 你必须先解决它！

这不是这里任何人都可以调试的错误。无论您的学校使用什么工具来验证您的代码，都期望得到与您提供的不同的东西。如果您没有任何其他文件，我会询问 TA。

* * *

EDIT2：您不必担心一次处理一个值，因为您的`memcpy()`：

```
memcpy(dataValue, data, sizeof(*dataValue)); 
```

这将获取您设置的所有内容`data`并将这些值放在正确的位置`dataValue`。在我的示例（上图）中，我将 4 设置为 4，将`id`3 设置为`quantity`etc。在`memcpy()`调用之后，现在两者`dataValue`和`data`都将设置所有相同的值。它将值复制`data`到`dataValue`. 得到它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:30:45.820

几点建议：

*   如果数据为 NULL，您应该在例程开始时返回以避免分配内存，如果数据为 NULL，您将忽略。

*   memcpy 行是正确的，但更改 sizeof 的语法可能更清晰，因此很清楚正在复制多少内存：

    memcpy(dataValue, data, sizeof(struct order));

*   您实际上并没有将设置数据放在 onode 中，我怀疑您需要以下行：

    链接列表->数据=数据值；

正如您在评论中询问的那样，您还可以填写新的结构顺序：

```
dataValue->id = data->id // etc. 
```

然后您可以进行比较：

```
if (data->id == linkedList->data->id) {
    /* It matches */
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T17:21:28.817

您以数据为源调用 memcpy，但在下一条语句中，您测试数据是否不为空。这告诉我空数据指针是可以接受的，在这种情况下 memcpy 会崩溃。您可能需要在此处重新排列语句的顺序。

顺便说一句，你有没有通过你的调试器运行这个？

# assembly - 接收用户整数，存储，然后打印 MIPS 程序集

> ID：15344376
> 
> 赞同：2
> 
> 时间：2013-03-11T17:05:26.153
> 
> 标签：assembly, mips

我可以接受用户输入：

```
addi $v0, $zero, 4
la $a0, str.num2
syscall
addi $v0, $zero, 5
syscall
add $s1, $zero, $v0 
```

它在 $s1 中，我只是不知道如何打印出来。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T17:33:10.133

[在这里](http://courses.missouristate.edu/kenvollmar/mars/help/syscallhelp.html)，您可以参考 MARS 中的系统调用。在此之后，代码应该去：

```
# Print message (syscall 4)
addi $v0, $zero, 4
la $a0, str.num2
syscall

# Read number (syscall 5)
addi $v0, $zero, 5
syscall

# Print number (syscall 0)
add $a0, $zero, $v0  # Get number read from previous syscall and put it in $a0, argument for next syscall
addi $v0, $zero, 1   # Prepare syscall 0
syscall              # System call 
```

总是注释你的代码，特别是如果它是汇编代码。

# arrays - Postgresql：具有逗号分隔值的行列中的 levenshtein 距离

> ID：15344377
> 
> 赞同：2
> 
> 时间：2013-03-11T17:05:26.480
> 
> 标签：arrays, postgresql, levenshtein-distance

我有一个包含以下内容的表格：

`ID | Name | Alias`

`1 | William | Will,Willo,Wolli`

如果用户提供的字符串的 levenshtein 距离（或变音位，没关系）低于为用户名或任何已知别名定义的阈值，我想返回行 ID。

我知道一个可能的解决方案是使用一个额外的表来链接用户 ID 和用户别名，但如果可能的话我想避免它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:37:27.667

您需要的是字符串拆分/爆炸。可以这样做：

```
SELECT DISTINCT u.id FROM users AS u LEFT JOIN
(SELECT u.id,unnest(string_to_array(u.alias, ',')) AS ALIAS FROM users AS u) AS q
ON u.id=q.id
WHERE levenshtein(u.name,'Jill')<3
OR levenshtein(q.ALIAS,'Jill')<3; 
```

[http://sqlfiddle.com/#!12/494e6/5](http://sqlfiddle.com/#!12/494e6/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T22:10:35.373

像往常一样，有不止一种解决方案：

```
select  u.id
from    users u
where   3 >
any
(
    select  levenshtein ( 'Willey'::text, a )
    from    regexp_split_to_table
        (
            concat_ws ( ',' , u.name::text , u.alias::text )
        ,   ','
        ) as a
) 
```

# mongodb - mongo shell 无法使用，但在 OSX 上卸载/新安装后，可以从我的程序访问

> ID：15344378
> 
> 赞同：1
> 
> 时间：2013-03-11T17:05:28.800
> 
> 标签：mongodb

全部！

卸载当前稳定版（使用 brew）并安装 2.4 rc2（不是 brew，因为 brew --devel 没有它，但主要如下所述：http: [//shiftcommathree.com/articles/how-to-install- mongodb-on-os-x](http://shiftcommathree.com/articles/how-to-install-mongodb-on-os-x)），甚至几次，也许是太急于在下次安装之前删除所有与 mongodb 相关的内容，我最终遇到了这种情况：

我拥有的节点程序使用数据库并且工作正常（查找、插入等）。但问题是 mongo shell 无法正常工作，我无法插入或查找文档。例如（现在我有 2.4 的 rc2，但情况与当前稳定的情况相同）：

```
$蒙戈
MongoDB外壳版本：2.4.0-rc2
连接到：测试
> 显示数据库
本地 0.078125GB
> 使用我的数据库
切换到 db mydb
> db.mydb.mycollection.insert = ({title: "哦，奇怪的问题"})
{ "title" : "哦-哦，奇怪的问题" }
> 显示收藏
> 显示数据库
本地 0.078125GB
我的数据库（空）

```

然后我通过我的节点程序进行插入并执行以下操作：

```
> 显示数据库
本地 0.078125GB
数据库 0.203125GB
> 使用我的数据库
切换到 db mydb
> 显示收藏
我的收藏
系统索引
> db.mydb.mycollection.find()
>

```

同样，在我的节点程序中，'find' 会找到它应该...

知道为什么 mongo shell 不起作用吗？

弗罗德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:50:55.687

你有一个`mydb.mycollection`在`mydb`数据库中调用的集合。这不太可能是您真正想要的。当您`use`从 shell 中创建数据库时，您可以通过`db`对象引用数据库，而无需重复数据库名称。

```
use mydb
# db is now implicitly the mydb database
# you no longer refer to it by name
db.mycollection.insert({"name" : "stacks overflowing"}) 
```

Also note that you were not calling the `insert` function, your code was attempting to set the function to the value of the new object.

# drools - 从外部应用程序将消息插入 gwt-console-server 中运行的进程？

> ID：15344384
> 
> 赞同：0
> 
> 时间：2013-03-11T17:05:49.283
> 
> 标签：drools, jbpm, drools-flow

我是在 AS7 中运行 jBPM5.4 的 jBPM 菜鸟。我已经尝试在 jBPM 讨论板上发布这个问题，但没有运气，所以我想我会在这里尝试堆栈。

我的目标：在 guvnor 中创建进程，在 gwt-console-server 中运行它，将我的 java 应用程序提要信息提供给进程，并在 jbpm 控制台中遵循当前状态。

到目前为止，我已经在 jBOSS AS7 上安装了 jbpm 控制台和控制台服务器以及 Guvnor 和设计器。我能够在 Guvnor 中创建一个进程并从 jbpm 控制台运行和监视该进程。缺少的部分是我不明白如何从*外部*将消息插入到正在运行的进程中。

使用 eclipse 和 jBPM 示例，我可以运行进程并插入消息，但我的目标是使用 jbpm 控制台来监视进程。

我假设我需要访问在 gwt-console-server 中运行的知识会话，但我不知道该怎么做。访问/修改持久化到数据库的会话是否安全（即 gwt-console-server 和我的自定义应用程序都可以修改它）然后 jbpm 控制台会从中读取？

我在 BPM 控制台参考 ( [https://community.jboss.org/wiki/BPMConsoleReference](https://community.jboss.org/wiki/BPMConsoleReference) ) 中看到有一个集成层，但没有关于如何利用它的信息 - 文档中的类似内容已损坏:(

有人可以指出一个外部应用程序向 jbpm-console 监控的 jbpm 进程提供消息的示例，或者提出实现此目的的方法吗？

非常感谢您的任何见解。-J

PS。我有新的 jBPM 开发人员指南，但在其中找不到任何帮助我解决此问题的内容（因此，如果我遗漏了某些内容，我可以处理对该指南的引用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:40:05.297

jBPM 控制台有一个 REST api，它公开了部分功能。例如，如果您将此信息馈送建模为流程的开始或信号的发送，您可以使用信号 REST 方法将此信息发送到控制台进行处理。

使用外部 ksession 来更新流程实例也很好。只要他们使用相同的数据库来存储信息，一切都应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T21:36:13.903

事实证明，控制台只是在使用日志，所以只要您登录到控制台正在使用的同一个数据库（使用 JPAWorkingMemoryDbLogger），一切都会自动运行。您可以使用 JBPMHelper.newStatefulKnowledgeSession(kbase) 或 JBPMHelper.loadStatefulKnowledgeSession(kbase, sessionId)，具体取决于您是否要使用从控制台启动的知识会话。另外，如果你借用了控制台的会话，当然不要丢弃它。

我在某处读到，您可以为会话提供一个业务 ID（很快就可以从您自己的代码中执行相同操作，以便它们自动使用相同的会话），但是目前当我想借用控制台的会话时，我使用了一个假设最高会话是我想要的会话（只要控制台已经在运行）。

# asp.net-mvc-3 - MVC 3 异常：参数字典包含方法“System.Web.Mvc”的不可空类型“System.Int32”的参数“id”的空条目

> ID：15344385
> 
> 赞同：2
> 
> 时间：2013-03-11T17:05:51.207
> 
> 标签：asp.net-mvc-3, exception, nullpointerexception, asp.net-mvc-routing

我的应用程序似乎运行良好，但我在 log4net 日志中不断收到这些异常：

```
The parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult Agency(Int32)' in 'COPSGMIS.Controllers.QuestionController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. 
```

不知道出了什么问题？

我的控制器：

```
 public ActionResult Agency(int id)
        {
                QuestionDAL qd = new QuestionDAL();
                var agency = qd.GetAgencyDetails(id);
                agency.Reviews = qd.GetAgencyReviews(id);

                return View(agency);
        } 
```

我的路线：

```
 public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T17:06:50.583

如果您尝试调用此控制器操作并且未`id`在路径部分或查询字符串参数中指定，则会引发此错误。由于您的控制器操作将 id 作为参数，因此您应确保始终指定此参数。

确保当您请求此操作时，您`id`在 url 中指定了一个有效的：

```
http://example.com/somecontroller/agency/123 
```

如果您正在生成锚点，请确保有一个 id：

```
@Html.ActionLink("click me", "agency", new { id = "123" }) 
```

如果您要发送 AJAX 请求，还要确保 id 存在于 url 中。

另一方面，如果参数是可选的，则可以将其设为可为空的整数：

```
public ActionResult Agency(int? id) 
```

但在这种情况下，您将不得不处理未指定参数值的情况。

# ruby - ruby 中的小马 gem 不接受用户名和密码

> ID：15344386
> 
> 赞同：0
> 
> 时间：2013-03-11T17:06:03.157
> 
> 标签：ruby, pony

我正在尝试使用 pony 为我的 ruby​​ 网站实现一个简单的表单，但我不断收到错误消息“535-5.7.1 用户名和密码不被接受”。我在正确的字段中输入了我自己的 gmail 用户名和密码。

pony.rb 中的代码

```
Pony.options = {
:to => 'myusername',
:via => :smtp,: 
:via_options => {
:address              => 'smtp.gmail.com',
:port                 => '587',
:enable_starttls_auto => true,
:user_name            => 'myusername',
:password             => 'mypassword',
:authentication       => :plain, # :plain, :login, :cram_md5, no auth by default
:domain               => "localhost.localdomain" # the HELO domain provided by the    client to the server
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:02:41.693

请参阅下面的工作代码。刚刚用我的gmail测试了这个。

```
Pony.mail(:to => 'someone@acme.com', :via => :smtp, :via_options => 
{
    :address => 'smtp.gmail.com',                     
    :port => '587',
    :enable_starttls_auto => true,
    :user_name => 'yourgmail@gmail.com',
    :password => 'yourpass',
    :authentication => :plain,
    :domain => "HELO",
 },
:subject => 'Your Subject goes here', :body => "bla bla bla or #{$body}",       
:attachments => {"yourfile.txt" => File.binread("c:/ruby193/bin/yourfile.txt")    
}
) 
```

祝您好运，如果您需要进一步的帮助，请告诉我！

# servicestack - servicestack 是否支持使用 MTOM 的 SOAP Web 服务？

> ID：15344388
> 
> 赞同：1
> 
> 时间：2013-03-11T17:06:10.620
> 
> 标签：servicestack

我想弄清楚如何设置 servicestack 来接收 mtom 编码的肥皂消息，有人知道实现吗？

# javascript - 打开表格为不同的实体创建新记录

> ID：15344389
> 
> 赞同：2
> 
> 时间：2013-03-11T17:06:16.620
> 
> 标签：javascript, dynamics-crm-2011

我有一个自定义功能区按钮，已添加到我的一个实体中。从那个按钮，我想让用户点击它，然后 CRM 将他们带到表单中，为不同的自定义实体类型创建新记录。

我尝试通过传入实体名称代替代码来打开记录的 url（因为这可以在不同组织之间更改），但是在我测试它时它抛出了一个错误。我的猜测是我需要通过某种参数来说明表单是“创建”类型的表单。

谁能帮我这个？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:31:38.217

试试[openEntityForm](http://msdn.microsoft.com/en-us/library/jj602956.aspx#BKMK_OpenEntityForm)，看这个例子：

```
Xrm.Utility.openEntityForm("account", null, parameters); 
```

# wordpress - WordPress：wp_query 和 gd 星级插件的问题

> ID：15344390
> 
> 赞同：3
> 
> 时间：2013-03-11T17:06:16.973
> 
> 标签：wordpress

我在我的 Wordpress 安装中使用了 GD Star Rating 插件，用于创建 2 组不同的评级（帖子和视频）。*（我找不到任何其他支持此功能的插件）。*

我在一个 wp_query 中使用了以下参数来显示评分最高的视频列表，并且工作正常。

```
$args=array(
    'post_type' => 'youtube_videos',
    'post_status' => 'publish',
    'posts_per_page' => 10,
    'gdsr_sort' => 'rating',
    'gdsr_multi' => 3
); 
```

在同一页面上，我试图显示评价最高的帖子列表，在 wp_query 中有以下参数，但它不起作用。

```
$args=array(
    'posts_per_page' => 4,
    'post_type' => 'post',
    'gdsr_sort' => 'rating',
    'gdsr_multi' => 0
); 
```

我发现问题在于“gdsr_multi”变量中的值传递，如果我从评分最高的视频中删除此变量，则代码的第二部分工作正常。

我不能同时运行两者，请问有什么建议吗？

* * *

对于`gdsr_multi`GD Star 评级插件的可变文档说：

*   对于标准评级数据，请勿使用此变量，或将其设置为零。
*   要获得多评分数据，必须将此变量设置为多集 id 才能使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:32:04.447

您应该在开始新的查询之前重置您的查询。`wp_reset_query();`将破坏在自定义循环上使用的先前查询。此函数应在循环之后调用，以确保条件标签按预期工作。例如：

```
<?php
    query_posts( 'post_parent=5' );
    if ( have_posts() ) :
       while ( have_posts() ) : the_post();
       ?><a href="<?php the_permalink() ?>"><?php the_title() ?></a><br /><?php
       endwhile;
    endif;
    wp_reset_query();
   //your second query will be here.
?> 
```

更多详情可以查看[Wordpress官方codex：wp reset query](http://codex.wordpress.org/Function_Reference/wp_reset_query)

# itext - 是否可以通过 iText 将密码传递给 SafeNet USB 令牌，或者总是提示用户

> ID：15344392
> 
> 赞同：0
> 
> 时间：2013-03-11T17:06:28.690
> 
> 标签：itext, token

我正在尝试使用 iText 为 Pdf 文档指定一个认证签名，该签名将在 Adob​​e Reader 中自动验证（蓝丝带）。为此，用于签名的证书必须被 Adob​​e 识别为绑定到 AATL 成员的根证书。所有 AATL 证书颁发机构似乎都在 SafeNet USB 令牌上提供他们的证书。Bruno 在他关于 USB 令牌的“数字签名”白皮书中给出的示例显示用户被提示输入密码。在我的情况下，让用户指定密码是行不通的。无论如何都可以通过调用 SafeNet USB 令牌来传递密码 (PIN)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:42:24.270

请再读一遍我的白皮书。在本文中，我将展示使用 USB 令牌签署文档的不同方法。当您使用 MSCAPI 时，很明显会提示用户输入密码，因为这就是它在 Windows 操作系统中的实现方式。但是，我还编写[了一个使用 PKCS#11 的示例](http://sourceforge.net/p/itext/code/HEAD/tree/tutorial/signatures/src/main/java/signatures/chapter4/C4_02_SignWithPKCS11USB.java)。在本例中，密码是从属性文件中获取的；不会提示用户。

# database - 在 SSIS 中如何访问运行 OLE DB 命令的结果？

> ID：15344393
> 
> 赞同：2
> 
> 时间：2013-03-11T17:06:30.547
> 
> 标签：database, ssis, command, etl, ole

我在 Visual Studio 2010 中使用 SSIS。我的包看起来像：OLE DB Source -> Multicast -> 7 OLE DB Command's

上述七个 OLE DB 命令中的第六个包含：

```
SELECT r.DeviceID 
FROM   hub.ResolveDeviceInstanceToDevice r 
WHERE  r.DeviceInstanceID = ?
       AND r.DatasetID = ? 
```

我希望在第七个 OLE DB 命令中使用返回的 DeviceID。我可以这样做吗？如何？如果不是，我该怎么做？

我已将所有 7 个 OLE DB 命令放在一个多播之下，因为其中有几个使用来自 OLE DB 源的相同输出。

我选择不为此使用存储过程，因为有偏好通过 ETL 执行此操作。但如果这太复杂，我会考虑转移到存储过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-23T17:20:53.267

我知道这是一个老问题，但我在搜索类似问题时遇到了它。对于您像 Kyle 回答的那样给出的语句，查找可能是一个更好的解决方案，但是您可以通过向 SQL 语句添加参数来完成您的要求。

```
SELECT ?=r.DeviceID 
FROM   hub.ResolveDeviceInstanceToDevice r 
WHERE  r.DeviceInstanceID = ?
   AND r.DatasetID = ? 
```

所以第一个问号将是 param0 并且将是查询的结果列/字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:27:45.893

您不应该使用 OLE DB 命令来执行此操作。相反，您应该使用查找任务来实现此目的。

1.  将 Lookup 与运行命令的数据库的连接设置为。
2.  将其查询设置为

    选择 r.DeviceID, r.DeviceInstanceID, r.DataSetID FROM hub.ResolveDeviceInstanceToDevice r

3.  在列中，将源的 DeviceInstanceID 和 DataSetID 输入连接到相应的查找列。

4.  将 DeviceID 添加为输出列。

现在您可以在另一个 OLE DB 命令中使用此值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:31:54.943

我不认为这是可能的`select`。有一个存储过程，你可以做

`exec ? = GetDeviceId ?, ?`

# git - 重写 Git repo 历史后，旧的提交历史仍然可见

> ID：15344395
> 
> 赞同：0
> 
> 时间：2013-03-11T17:06:36.703
> 
> 标签：git, git-rebase, git-filter-branch, git-rewrite-history

我已经使用[git 有效地重写（rebase -i）很多历史](https://stackoverflow.com/questions/10917835/efficiently-rewriting-rebase-i-a-lot-of-history-with-git)来替换Git 存储库的整个提交历史的文件文本（`Copyright <author>`to ）。`Copyright <company>`它可以工作，但*旧*的提交历史**仍然可见**。

在下面的屏幕截图中，蓝色分支中的“新”历史位于紫色分支中不需要的“旧”历史之后。如何摆脱“旧”历史？（为什么它不“合并”成一个连续的历史让我感到震惊！

![在 <code>git filter-branch</code> 命令之后](../Images/1f269a2a5b2c9ac9a01e8cd160b36300.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:33:11.700

所以那个 GUI 是来自 Atlassian 的 SourceTree。这是正确的。问题是我有其他分支和标签引用“旧历史”。所以很自然地，它会一直存在！

从回到未来的角度思考:)

所以，“你不能改写历史”是部分正确的，这取决于你的观点。

**布朗博士：**显然时间连续体被打乱了，创造了一个新的时间事件序列，导致了这个交替的现实。

**马蒂：**英语，医生！

**布朗医生：**这里。在这里，让我演示一下。假设这条线代表时间。[画直线并指向地点]这里是现在的 1985 年，未来和过去。显然，在过去的某个地方，时间线向下倾斜到这个切线（分支）[画新线并写 1985A] 创建另一个 1985（主）。替代你、我和爱因斯坦，但其他所有人都是现实。认识这个？[显示 Blast from the Past bag (tag)] 这是体育书籍进来的那个包；我知道是因为收据（标签）还在里面。我在时间机器里找到了它们……还有这个！（更多标签）

耶！Git 是 BTTF！

道德：删除引用，它将不复存在！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:20:39.860

我建议使用[BFG Repo-Cleaner](http://rtyley.github.com/bfg-repo-cleaner/)，这是一种更简单、更快的替代方案，`git-filter-branch`专门用于从 Git 历史中重写文件。它使您的生活更轻松的一种方法是它实际上默认处理*所有*引用（所有标签、分支等），但它的速度也快了[10 到 50 倍](https://docs.google.com/spreadsheet/ccc?key=0AsR1d5Zpes8HdER3VGU1a3dOcmVHMmtzT2dsS2xNenc)。

您应该在这里仔细按照以下步骤操作：[http](http://rtyley.github.com/bfg-repo-cleaner/#usage) ://rtyley.github.com/bfg-repo-cleaner/#usage - 但核心位是这样的：下载[BFG 的 jar](http://rtyley.github.com/bfg-repo-cleaner/#download)（需要 Java 6 或更高版本）并运行此命令：

```
$ java -jar bfg.jar  --replace-text replacements.txt  my-repo.git 
```

该`replacements.txt`文件应包含您想要执行的所有替换，格式如下（每行一个条目 - 请注意不应包含注释）：

```
pa$$word   # Replace literal string 'pa$$word' - with '***REMOVED***' by default
Copyright Volte==>Copyright MegaCorp     # Replace, specifiying replacement text
regex:Copyright \w+==>Copyright MegaCorp                # Replace, using a regex
regex:Copyright (\d{4}) \w+==>Copyright $1 MegaCorp     # Replace with reference 
```

将扫描您的整个存储库历史记录，并且任何非二进制文件（大小小于 1MB）都将执行替换：任何匹配的字符串（不在您*最近*的提交中）都将被替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:27:00.497

你不能重写 git 历史。这不是权威的事情，没有人拒绝执行它，这是根本无法做到的事情。提交 ID 是该特定提交的唯一名称。任何不同的提交，由于其内容或历史或描述中的任何更改，都具有不同的 id。您的“主”标签（分支只是 git 用作隐式父级并在您`git checkout`提交新内容时更新的标签）现在指的是您使用 rebase 创建的新历史（编辑：错误，更可能使用 filter-branch这里）。您的“svn/trunk”标签仍然指的是原始历史记录。如果你想在你的 repo 中忘记 svn/trunk `git branch -d svn/trunk`，.

# mysql - 开发分类网站的数据库设计说明

> ID：15344397
> 
> 赞同：1
> 
> 时间：2013-03-11T17:06:42.280
> 
> 标签：mysql, database, web-applications, database-design

我即将开始开发一个分类的 Web 应用程序。但我在构建数据库设计时面临一些困难：

用户可以在不同类型的预先存在的类别（如车辆、房地产、计算机、教育等）下发布他们的广告。但是每个类别都有其特定的字段/属性以及一些常见的字段/属性。

我的困难就像在填写了一个帖子广告后，比如自行车，我将常见的 i/p 值保存到我的 ads_t 表中（如下所示）。但是我将在哪里存储特定于 Bike 的其他字段值，例如：Bike Manufacture、Bike Model、Bike Year 等？

同样，如果用户想发布 House(rent) 的广告，我可以将常见的 i/p 值保存到我的 ads_t 表中。但是我将在哪里存储特定于房屋出租的其他字段值，例如：总面积（平方米）、房间数量等，以及我将如何映射。

我的表格如下：

```
category_id
------------
(catId, parentCatId, cat_title, cat_desc)

advertisement_t
----------------
(adId, catId, userId, ad_title, ad_desc, photoId, postDate, statusId, price, ad_address, adValidFrom, adValidTo, adIsDeleted) 

Photo_t
--------
(photoId, primary_photo, sec_photo1, sec_photo_2, sec_photo_3)

user_t
-------
(userId, username, password, email, activationkey, isvalidated, joinedDate, activatedDate, statusId) 
```

我不知道其他分类网站（如 olx、freeadds）过去是如何在其数据库中维护（持久和显示）其发布的广告数据的。

如果有人有任何想法，请帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:01:58.957

我做了一些接近这一次的事情。

我可以看到 2 个选项： 你不应该做的事情 - 为所需的商品（房屋、汽车、自行车等）实施大量表格，这不是一个好主意，因为工作永远不会结束，也不会结束可扩展的。

我的建议：

再添加 3 个表：

## CustomField（设置类别使用的可能字段列表）

（CFid，标题）

## CategoryCField（关联关系，知道用户输入新广告时要显示哪些字段）

(catId, CFid)

## StoredCFData（实际存储数据）

（id、adId、CFid、值）

但是，您可以通过这种方式发现 2 个问题。做一个“关系圈”不是很好，但如果仔细做会做的工作。并且必须将服装字段的 DataType 减少为文本/数字以使其简单。您将无法将其应用于单选按钮或组合框。

祝你好运，劳尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:36:20.747

我通常喜欢将这些数据分为 2 组（1）可搜索数据，这些数据将保存在某些列/映射到列中；（2）垃圾数据（我称之为附加信息）以 json_encoded 格式保存在文本列中。

对于可搜索的列，您可以添加另一个表 category_values 表，其中有 (category_id, category_value, ad_id)

同样，如果您的数据库预计会随着类别类型经常重复而变得巨大，您可以将 category_values 表分成两个，分别为 (value_id, Category_id, category_value) 和 (value_id, ad_id)。这会导致更多的连接，我相信在你的情况下不需要引入。

# drupal-7 - 如何知道用户单击的链接以使用 drupal 7 中的视图设置面包屑？

> ID：15344399
> 
> 赞同：1
> 
> 时间：2013-03-11T17:06:44.917
> 
> 标签：drupal-7, drupal-views, breadcrumbs, drupal-taxonomy

我将尝试先给出一些背景信息来解释我的问题。

我正在建立一个产品目录并对它们进行分类，我使用了一个具有 4 个子级别的分类树。每个产品都可以与一个或多个子类别相关。

我使用视图来导航分类树以访问与每个子类别相关的产品。为了在此处管理面包屑，我在我的 template.php 上重新定义了 hook_breadcrumb() 函数，并且运行良好。

问题从这里开始：当我到达子类别的最后一级时，我有相应的产品，当我单击其中一个产品时，它将进入该产品的节点页面。此时我丢失了面包屑，因为我进入了节点。我可以获得该产品的分类树来构建面包屑，但问题是该产品可能与多个子类别术语相关。

所以，为了解决这个问题，我认为我需要知道访问者是从哪条路径到达产品的。换句话说，我需要知道用户访问的最后一个分类子类别以输入特定产品，以便我可以使用该信息正确构建面包屑。

那么，有人可以帮助我了解用户在进入节点之前的路径吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:31:18.747

您可以查看[http://drupal.org/project/cookiecrumbs](http://drupal.org/project/cookiecrumbs)一个最近的项目，该项目使用浏览器历史记录显示面包屑

# ios - NSInputStream stops running, sometimes throws EXC_BAD_ACCESS

> ID：15344400
> 
> 赞同：12
> 
> 时间：2013-03-11T17:06:46.243
> 
> 标签：ios, objective-c, grand-central-dispatch, nsinputstream

**(UPDATED)** this is the problem in a nutshell: in iOS I want to read a large file, do some processing on it (in this particular case encode as Base64 string() and save to a temp file on the device. I set up an NSInputStream to read from a file, then in

```
(void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode 
```

I'm doing most of the work. For some reason, sometimes I can see the NSInputStream just stops working. I know because I have a line

```
NSLog(@"stream %@ got event %x", stream, (unsigned)eventCode); 
```

in the beginning of `(void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode` and sometimes I would just see the output

```
stream <__NSCFInputStream: 0x1f020b00> got event 2 
```

(which corresponds to the event NSStreamEventHasBytesAvailable) and then nothing afterwards. Not event 10, which corresponds to NSStreamEventEndEncountered, not an error event, nothing! And also sometimes I even get a EXC_BAD_ACCESS exception which I have no idea at the moment how to debug. Any help would be appreciated.

Here is the implementation. Everything starts when I hit a "submit" button, which triggers:

```
- (IBAction)submit:(id)sender {     
    [p_spinner startAnimating];    
    [self performSelector: @selector(sendData)
           withObject: nil
           afterDelay: 0];   
} 
```

Here is sendData:

```
-(void)sendData{
    ...
    _tempFilePath = ... ;
    [[NSFileManager defaultManager] createFileAtPath:_tempFilePath contents:nil attributes:nil];
    [self setUpStreamsForInputFile: [self.p_mediaURL path] outputFile:_tempFilePath];
    [p_spinner stopAnimating];
    //Pop back to previous VC
    [self.navigationController popViewControllerAnimated:NO] ;
} 
```

Here is setUpStreamsForInputFile called above:

```
- (void)setUpStreamsForInputFile:(NSString *)inpath outputFile:(NSString *)outpath  {
    self.p_iStream = [[NSInputStream alloc] initWithFileAtPath:inpath];
    [p_iStream setDelegate:self];
    [p_iStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                           forMode:NSDefaultRunLoopMode];
    [p_iStream open];   
} 
```

Finally, this is where most logic occurs:

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {

    NSLog(@"stream %@ got event %x", stream, (unsigned)eventCode);

    switch(eventCode) {
        case NSStreamEventHasBytesAvailable:
        {
            if (stream == self.p_iStream){
                if(!_tempMutableData) {
                    _tempMutableData = [NSMutableData data];
                }
                if ([_streamdata length]==0){ //we want to write to the buffer only when it has been emptied by the output stream
                    unsigned int buffer_len = 24000;//read in chunks of 24000
                    uint8_t buf[buffer_len];
                    unsigned int len = 0;
                    len = [p_iStream read:buf maxLength:buffer_len];
                    if(len) {
                        [_tempMutableData appendBytes:(const void *)buf length:len];
                        NSString* base64encData = [Base64 encodeBase64WithData:_tempMutableData];
                        _streamdata = [base64encData dataUsingEncoding:NSUTF8StringEncoding];  //encode the data as Base64 string
                        [_tempFileHandle writeData:_streamdata];//write the data
                        [_tempFileHandle seekToEndOfFile];// and move to the end
                        _tempMutableData = [NSMutableData data]; //reset mutable data buffer 
                        _streamdata = [[NSData alloc] init]; //release the data buffer
                    } 
                }
            }
            break;
        case NSStreamEventEndEncountered:
        {
            [stream close];
            [stream removeFromRunLoop:[NSRunLoop currentRunLoop]
                              forMode:NSDefaultRunLoopMode];
            stream = nil;
            //do some more stuff here...
            ...
            break;
        }
        case NSStreamEventHasSpaceAvailable:
        case NSStreamEventOpenCompleted:
        case NSStreamEventNone:
        {
           ...
        }
        }
        case NSStreamEventErrorOccurred:{
            ...
        }
    }
} 
```

*Note: when I posted this first, I was under a wrong impression the issue had something to do with using GCD. As per Rob's answer below I removed the GCD code and the issue persists.*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T18:52:36.740

First: in your original code, you were not using a background thread, but the main thread (dispatch_async but on the main queue).

When you schedule NSInputStream to run on the default runloop (so, the runloop of the main thread), the events are received when the main thread is in the default mode (NSDefaultRunLoopMode).

But: if you check, the default runloop changes mode in some situations (for example, during an UIScrollView scroll and some other UI updates). When the main runloop is in a mode different than the NSDefaultRunLoopMode, your events are not received.

Your old code, with the dispatch_async, was almost good (but move the UI Updates on the main thread). You have to add only few changes:

*   dispatch in the background, with something like this:

:

```
 dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);
 dispatch_async(queue, ^{ 
     // your background code

     //end of your code

     [[NSRunLoop currentRunLoop] run]; // start a run loop, look at the next point
}); 
```

*   start a run loop on that thread. This must be done at the end (last line) of the dispatch async call, with this code

:

```
 [[NSRunLoop currentRunLoop] run]; // note: this method never returns, so it must be THE LAST LINE of your dispatch 
```

Try and let me know

EDIT - added example code:

To be more clear, I copy-paste your original code updated:

```
- (void)setUpStreamsForInputFile:(NSString *)inpath outputFile:(NSString *)outpath  {
    self.p_iStream = [[NSInputStream alloc] initWithFileAtPath:inpath];
    [p_iStream setDelegate:self];

    // here: change the queue type and use a background queue (you can change priority)
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);
    dispatch_async(queue, ^ {
        [p_iStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                       forMode:NSDefaultRunLoopMode];
        [p_iStream open];

        // here: start the loop
        [[NSRunLoop currentRunLoop] run];
        // note: all code below this line won't be executed, because the above method NEVER returns.
    });    
} 
```

After making this modification, your:

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {} 
```

method, will be called on the same thread where you started the run loop, a background thread: if you need to update the UI, it's important that you dispatch again to the main thread.

**Extra informations:**

In my code I use dispatch_async on a random background queue (which dispatch your code on one of the available background threads, or start a new one if needed, all "automagically"). If you prefer, you can start your own thread instead of using a dispatch async.

Moreover, I don't check if a runloop is already running before sending the "run" message (but you can check it using the currentMode method, look NSRunLoop reference for more informations). It shouldn't be necessary because each thread has only one associated NSRunLoop instance, so sending another run (if already running) does nothing bad :-)

You can even avoid the direct use of runLoops and switch to a complete GCD approach, using dispatch_source, but I've never used it directly so I can't give you a "good example code" now

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T17:13:26.567

`NSStream` requires a run loop. GCD doesn't provide one. But you don't need GCD here. `NSStream` is already asynchronous. Just use it on the main thread; that's what it's designed for.

You're also doing several UI interactions while on a background thread. You can't do that. All UI interactions have to occur on the main thread (which is easy if you remove the GCD code).

Where GCD can be useful is if reading and processing the data is time consuming, you can hand that operation to GCD during `NSStreamEventHasBytesAvailable`.

# c++ - 如何使用 libc++ istream_iterator 读取文件中的 0xFF？

> ID：15344402
> 
> 赞同：5
> 
> 时间：2013-03-11T17:06:50.877
> 
> 标签：c++, libstdc++, libc++, istream-iterator

考虑以下示例代码：

```
#include <iostream>

using namespace std;

int main()
{
  istreambuf_iterator<char> eos;
  istreambuf_iterator<char> iit(cin.rdbuf());
  int i;
  for (i = 0; iit != eos; ++i, ++iit) {
    cout << *iit;
  }
  cout << endl << i << endl;
} 
```

以及一个包含以下内容的输入文件：“foo\xffbar”：

```
$ hexdump testin
0000000 66 6f 6f ff 62 61 72
0000007 
```

现在使用 clang libc++ 与 gnu libstdc++ 进行测试：

```
$ make test
clang++ -std=c++11 -stdlib=libc++ -Wall -stdlib=libc++ -o bug-libcc bug.cpp
clang++ -std=c++11 -stdlib=libc++ -Wall -stdlib=libstdc++ -o bug-libstd bug.cpp
./bug-libcc < testin
foo
3
./bug-libstd < testin
foo�bar
7 
```

如您所见，libc++ 版本认为 0xff 是流的结尾并停止读取。所以这导致了几个问题。

1) 这是我应该报告的 libc++ 中的错误吗？我对现有错误的谷歌搜索一无所获。

2）有没有解决这个问题的好方法？

**编辑**

以下代码有效：

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
  ifstream ifs ("testin", ios::binary);
  istreambuf_iterator<char> eos;
  istreambuf_iterator<char> iit(ifs.rdbuf());
  int i;
  for (i = 0; iit != eos; ++i, ++iit) {
    cout << *iit;
  }
  cout << endl << i << endl;
} 
```

让我相信这是一个二进制转换问题，但这并不能解释为什么 libstdc++ 可以正常工作。

**编辑2**

使用没有二进制文件的文件也可以正常工作：

```
ifstream ifs ("testin"); 
```

所以肯定有一些可疑的事情发生。看起来这可能是 cin 实现中的问题，而不是迭代器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:45:46.943

不幸的是，libc++ 中仍然存在一个错误（除了 ecatmur 指出的那个）。这是修复：

```
Index: include/__std_stream
===================================================================
--- include/__std_stream    (revision 176092)
+++ include/__std_stream    (working copy)
@@ -150,7 +150,7 @@
     {
         for (int __i = __nread; __i > 0;)
         {
-            if (ungetc(__extbuf[--__i], __file_) == EOF)
+            if (ungetc(traits_type::to_int_type(__extbuf[--__i]), __file_) == EOF)
                 return traits_type::eof();
         }
     } 
```

我会尽快检查。对不起这个错误。感谢您引起我的注意。

修复已提交的修订版 176822 到 libcxx 公共 svn 主干。即使修复在标头中，修复也需要重新编译的 dylib。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:12:21.217

我想你可能发现了一个已经修复的错误。 [此提交](http://llvm.org/viewvc/llvm-project/libcxx/trunk/include/__std_stream?r1=145407&r2=145624&diff_format=h)（由[@Howard Hinnant 提供](https://stackoverflow.com/users/576911/howard-hinnant)）包含以下更改：

```
@@ -104,7 +104,7 @@
     int __nread = _VSTD::max(1, __encoding_);
     for (int __i = 0; __i < __nread; ++__i)
     {
-        char __c = getc(__file_);
+        int __c = getc(__file_);
         if (__c == EOF)
             return traits_type::eof();
         __extbuf[__i] = static_cast<char>(__c);
@@ -131,7 +131,7 @@
                 if (__nread == sizeof(__extbuf))
                     return traits_type::eof();
                 {
-                    char __c = getc(__file_);
+                    int __c = getc(__file_);
                     if (__c == EOF)
                         return traits_type::eof();
                     __extbuf[__nread] = static_cast<char>(__c); 
```

您会注意到旧版本存储了`getc`into的返回值`char`，这是一个禁忌，因为它会将`char`值`0xff`与`int`值混淆`EOF`（即`-1`）。

该错误仅适用于，`cin`因为受影响的方法是 on `__stdinbuf`，这是 libc++ 仅用于实现的类型`cin`；`ifstream`例如使用`basic_filebuf<char>`.

检查`libcxx/include/__std_stream`系统上的文件，看看它是否有这个错误；如果是这样，应用补丁，它应该修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:31:20.373

迭代器正在从流中提取。
需要使用`binary`模式打开流以防止对原始数据进行任何转换。

接下来，不要使用`char`. 类型可以是有`char`符号、无符号或无符号，具体取决于编译器。我建议`uint8_t`在读取二进制八位字节时使用。

尝试这样的事情：

```
#include <cstdint>
using std::uint8_t;
istreambuf_iterator<uint8_t> eos; 
```

# r - 提取面板数据中的特定国家

> ID：15344406
> 
> 赞同：1
> 
> 时间：2013-03-11T17:07:02.280
> 
> 标签：r, panel, extract

我在 .csv 文件中有一个由 180 个国家/地区组成的面板数据，我想创建 180 个国家/地区的一个子集，以基于该子集运行回归。

这是我的数据集的屏幕截图：![http://i.imgur.com/e3s3XVn.png](../Images/0d2b208076e59347d10dc9d3f0e6486c.png)

我一直在玩弄子集函数，但我似乎无法让它正常工作。

最终，我应该如何创建一个仅包含例如“Albania”、“United States”的子集，同时保持其他列相同。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T17:09:13.527

这是非常基本的子集，您可以在 SO 和任何介绍性手册中找到几个答案。

假设您已将 csv 文件作为名为“df”的对象读取，则应该执行以下操作：

```
df[df$country %in% c("United States", "Albania"), ] 
```

* * *

在将来：

1.  您的数据的屏幕截图几乎没有用。请改用类似的东西`dput(head(yourdata))`。
2.  展示你尝试过的东西。不要简单地写“我一直在玩弄子集函数”。如果您特别想使用该`subset`功能但没有成功，展示您为帮助他人排除故障所做的工作会很有帮助。

* * *

### 一个最小的例子

样本数据：

```
set.seed(1)
df <- data.frame(country = sample(letters[1:5], 15, replace = TRUE),
                 somerandomvalue = rnorm(15),
                 anotherrandomvalue = rnorm(15)) 
```

关于“国家”列的一些汇总数据。向我们展示了五个独特的国家，总共有 15 个案例（行）。

```
> summary(df$country)
a b c d e 
2 5 1 4 3 
```

只取一个子集：

```
> df[df$country %in% c("a", "b"), ]
   country somerandomvalue anotherrandomvalue
1        b    -0.005767173         0.80418951
2        b     2.404653389        -0.05710677
5        b    -1.147657009        -0.69095384
10       a    -0.891921127        -0.43331032
11       b     0.435683299        -0.64947165
12       a    -1.237538422         0.72675075
14       b     0.377395646         0.99216037 
```

或者，使用子集函数：

```
subset(df, country %in% c("a", "b")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:10:13.150

尝试使用`subset`函数

```
 subset(YourData, country=c('Albania', 'United States')) 
```

有关详细信息，请参阅`?subset`。

一个例子：（编辑感谢@Roman Luštrik 和 Ananda 的评论）

```
> Data <- data.frame(Country=rep(letters[1:6], each=3), random=rnorm(18))
    > subset(Data, Country %in% c('a','b'))
  Country      random
1       a -1.02159357
2       a -0.88256998
3       a -0.24138579
4       b  0.35844584
5       b  0.05288194
6       b -1.09724481
> subset(Data, Country == "a" | Country == "b")
  Country      random
1       a -1.02159357
2       a -0.88256998
3       a -0.24138579
4       b  0.35844584
5       b  0.05288194
6       b -1.09724481 
```

[在这里](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)，您将学习如何制作一个很好的可重现示例来说明您的问题。

# ruby-on-rails - Ruby on Rails - 如何解决此“rake db:create”错误？

> ID：15344409
> 
> 赞同：0
> 
> 时间：2013-03-11T17:07:08.240
> 
> 标签：ruby-on-rails, ruby, sqlite

我正在尝试使用 Rails 启动并运行一个简单的教程应用程序，但几乎马上就遇到了这个问题。我在目录中创建新的 ruby​​ 应用程序`cd`并运行`rake db:create`. 我得到以下

`Please install the sqlite3 adapter: 'gem install activerecord-sqlite3-adapter' (sqlite3 is not part of the bundle. Add it to the Gemfile.)`

但我确实将 gem 添加到 Gemfile 中，如下所示：

`gem 'sqlite3'`

此外，当我尝试 gem install 适配器时，我得到一个输出，说它在任何存储库中都不存在。这是我第一次使用rails，关于如何解决这个问题的任何想法？

*编辑 `gem install activerecord-sqlite3-adapter`产生以下内容：

`Error: Could not find a valid gem 'activerecord-sqlite3-adapter' in any repository.`

它提供了一些替代方案，其中只有一个是 sqlite3。它被称为`activerecord-jdbcsqlite3-adapter`。这可能是我需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:59:35.337

谢谢大家的意见。我一直无法解决这个问题，最后只使用[Rails 安装程序](http://railsinstaller.org/)。这么简单，只需确保删除所有以前版本的 Rails、Ruby、Gems 以及所有内容。然后使用安装程序。

# javascript - 如何检查数组中的一个字符串是否在 URL/window.location.pathname 中

> ID：15344413
> 
> 赞同：5
> 
> 时间：2013-03-11T17:07:24.197
> 
> 标签：javascript, jquery

我有一个数组：

```
var checkURL = ['abc123', 'abc124', 'abc125']; 
```

如何检查数组中的字符串之一是否存在于 window.location.pathname 中？

我知道我可以单独使用：

```
<script type="text/javascript">
    $(document).ready(function () {
        if(window.location.href.indexOf("abc123") > -1) {
           alert("your url contains the string abc123");
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T17:09:48.220

使用 for 循环进行线性搜索。

```
$(document).ready(function () {
    var checkURL = ['abc123', 'abc124', 'abc125'];

    for (var i = 0; i < checkURL.length; i++) {
        if(window.location.href.indexOf(checkURL[i]) > -1) {
            alert("your url contains the string "+checkURL[i]);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:09:54.597

使用 for 循环：

```
$(document).ready(function () {
    for (var i = 0; i < checkURL.length; i++) {
        if(window.location.href.indexOf(checkURL[i]) > -1) {
           alert("your url contains the string " + checkURL[i]);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T09:30:05.360

这是一个使用`join`和正则表达式的选项。

```
var checkURL = ['abc123', 'abc124', 'abc125'];
var url = window.location.href;

var Matches = RegExp(checkURL.join('|')).exec(url);

if (Matches) {
    alert('your url contains the string ' + Matches[0]);
} 
```

示例[jsFiddle](http://jsfiddle.net/ArEZV/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:15:08.557

循环可以做到这一点：

```
for(var p in checkURL){
   if(window.location.pathname.indexOf(checkURL[p]) > -1){
      alert("your url contains the string");
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T17:13:17.327

您可以将测试数据转换为地图

```
var checkURL = {'abc123':'', 'abc124':'', 'abc125':''};
var url = window.location.pathname.split('/');

for(var i=0;i<url.length;i++){
var targetUrl=url[i];
if(typeof checkURL[targetUrl]!=='undefined'){
alert(targetUrl);
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T17:13:28.433

作为参考，这个优雅的解决方案：

```
var checkURL = ['abc123', 'abc124', 'abc125'];

var inArray = checkURL.some(function(el) {
    return ~location.href.indexOf(el);
}); // true/false 
```

*注意：该[`some`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)方法需要垫片！*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T17:16:43.657

当您在问题中标记 jquery 时，请使用 each() 函数

```
jQuery.each(checkURL, function(i,v) {
if(window.location.href.indexOf(checkURL[i]) > -1) {
           alert("your url contains the string " + checkURL[i]);
        }
}); 
```

无需使用 i 和 v 变量作为描述键值对

# wordpress - IE中的Wordpress bootstrap css3样式错误

> ID：15344418
> 
> 赞同：0
> 
> 时间：2013-03-11T17:07:52.327
> 
> 标签：wordpress, internet-explorer, css, twitter-bootstrap

我在 wordpress 上使用引导程序，到目前为止唯一的问题是 IE 7,8 和 9 上的样式看起来很奇怪。我假设它是因为 IE 处于怪癖模式。

我可以为 IE 获得所有样式吗？到目前为止，我已经尝试过`respond.js`并且`cssmediaqueries.js`. 旋转木马在除 IE 之外的其他浏览器上也能正常工作。

网站：www.kbbcredit.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:24:01.477

有时，只需在 html 顶部放置一个标签，例如：

```
<!DOCTYPE HTML> 
```

作品！

这意味着，您想使用 html5。

# build - tfs 构建计划

> ID：15344419
> 
> 赞同：0
> 
> 时间：2013-03-11T17:08:00.440
> 
> 标签：build, tfs

在每次构建之前，我都会“获取特定版本”并获取所有有效变更集的代码。现在，如果我安排每晚构建，如何在构建之前执行“获取特定版本”以获取正确的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T21:11:02.897

首先，我假设您已经配置/编辑了您的构建定义：`Trigger->Schedule`然后`Process->Advanced->Get Version`将您想要的变更集放入以下格式：

*   **C** [your_changeset_number] 示例：C123

您甚至可以在其中使用标签：**L** [label_name] 示例：LMYLABEL20140213

![在此处输入图像描述](../Images/ea4053f9a11f72dbee4dbfd4bb0ae6f6.png)

# symfony - Symfony2中的多个JoinColumns使用Doctrine注释？

> ID：15344426
> 
> 赞同：2
> 
> 时间：2013-03-11T17:08:16.150
> 
> 标签：symfony, join, doctrine-orm, annotations

这是问题所在：

`Routing`具有属性`objectId`和的类`objectType`。`objectId`是一个 int，并且`objectType`是一个字符串。这样做的原因是允许同一个表保存不同类型路由的数据。例如对于`Products`,`Department`和的路由`Brand`。所以，the`objectType`和 the的组合`objectId`就是我的 JoinColumn。

如何与 Doctrine2 建立这种双向关系？我查看了继承关系，但似乎没有一个概念是我正在寻找的。

我可以在数据库中创建一些视图并且只有几个不同的路由实体，但这似乎不是最好的路由。

这是我的实体`Department`，`Product`和`Brand`。

`../Entity/Department.php`

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity()
 * @ORM\Table(name="departments")
 */
class Department implements DescribableInterface
{
    /**
     * @ORM\Id
     * @ORM\Column(name="id", type="integer", length=11)
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(name="status", type="string", length=1)
     */
    private $status;

    /**
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;
... 
```

`../Entity/Product.php`

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="products")
 */
class Product implements DescribableInterface
{
    /**
     * @ORM\Id
     * @ORM\Column(name="id", type="integer", length=11)
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(name="status", type="string", length=1)
     */
    private $status;

    /**
     * @ORM\Column(name="product_code", type="string", length=100, nullable=true)
     */
    private $productCode = '';

    /**
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;
... 
```

`../Entity/Brand.php`

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="brands")
 */
class Brand
{
    /**
     * @ORM\Id
     * @ORM\Column(name="id", type="integer", length=11)
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(name="status", type="string", length=1)
     */
    private $status = 'a';

    /**
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;
... 
```

每个产品、品牌和部门都有自己的 URL，该 URL 保存在由 设置的路由表中`object_type`，`object_id`其中`object_type`是`department`，`product`或者`brand`是`object_id`相应产品、品牌或部门的唯一 id。

`../Entity/Routing.php`

```
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="routing")
 */
class Routing
{
    /**
     * @ORM\Id
     * @ORM\Column(name="id", type="integer", length=11)
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;    

    /**
     * @ORM\Column(name="object_id", type="integer", length=11)
     */
    private $objectId;

    /**
     * @ORM\Column(name="object_type", type="string", length=100)
     */
    private $objectType;

    /**
     * @ORM\Column(name="url", type="text")
     */
    private $url;
... 
```

我真正苦苦挣扎的是如何设置关系，以便部门、产品和品牌可以从单个路由实体访问他们的 URL。

我尝试将关系添加到`$objectId`，但似乎不喜欢那样。可以这样设置吗？

我基本上想要实现的是获取数据对象并能够获取对象的 URL，例如：

```
$departments = $em->getRepository("AdamStaceySiteBundle:Department")->findAll();
foreach ($departments as $department)
{
   echo '<a href="'.$department->getUrl().'">'.$department->getMenuTitle().'</a>;
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:50:01.493

在进一步研究之后，我发现了一位知情人士（Dirk Olbertz），他也遇到了同样的问题。

可以在以下位置找到信息：[Google Groups: Multiple JoinColumns?](https://groups.google.com/forum/#!msg/doctrine-user/HU_5h_Adq_g/I9ln4NZfsM8J)

我现在已经实现了这一点，我将解释我是如何做到的，以防它可能对其他人有所帮助。

我的问题的答案是使用单表继承。

我需要做的第一件事是更新`routing`实体以使用单表继承：

`../Entity/Routing.php`

```
/**
 * @ORM\Entity
 * @ORM\InheritanceType("SINGLE_TABLE")
 * @ORM\DiscriminatorColumn(name="object_type", type="string")
 * @ORM\DiscriminatorMap({"product" = "ProductRouting", "department" = "DepartmentRouting", "brand" = "BrandRouting"})
 * @ORM\Table(name="routing")
 */
class Routing
{
    /**
     * @ORM\Id
     * @ORM\Column(name="id", type="integer", length=11)
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;
... 
```

`DiscriminatorColumn`允许我指定将用于链接的列，在这种情况下是字段`object_type`。

`DiscriminatorMap`允许我指定将`object_type`与哪些实体链接的内容。

然后必须创建这些实体来扩展`Routing`实体。

`../Entity/ProductRouting.php`

```
/**
 * @ORM\Entity
 */
class ProductRouting extends Routing
{
    /**
     * @ORM\ManyToOne(targetEntity="Product")
     * @ORM\JoinColumn(name="object_id", referencedColumnName="id")
     */
    protected $product;
... 
```

`../Entity/DepartmentRouting.php`

```
/**
 * @ORM\Entity
 */
class DepartmentRouting extends Routing
{
    /**
     * @ORM\ManyToOne(targetEntity="Department")
     * @ORM\JoinColumn(name="object_id", referencedColumnName="id")
     */
    protected $department;
... 
```

`../Entity/BrandRouting.php`

```
/**
 * @ORM\Entity
 */
class BrandRouting extends Routing
{
    /**
     * @ORM\ManyToOne(targetEntity="Brand")
     * @ORM\JoinColumn(name="object_id", referencedColumnName="id")
     */
    protected $brand;
... 
```

然后在每个`Product`,`Department`和`Brand`实体中我需要添加新的`$routings`.

`../Entity/Product.php`

```
...
class Product
{
    ...
    /**
     * @ORM\OneToMany(targetEntity="ProductRouting", mappedBy="product", cascade={"all"})
     */
    private $routings;
... 
```

`../Entity/Department.php`

```
...
class Department
{
    ...
    /**
     * @ORM\OneToMany(targetEntity="DepartmentRouting", mappedBy="department", cascade={"all"})
     */
    private $routings;
... 
```

`../Entity/Brand.php`

```
...
class Brand
{
    ...
    /**
     * @ORM\OneToMany(targetEntity="BrandRouting", mappedBy="brand", cascade={"all"})
     */
    private $routings;
... 
```

希望有帮助...

# c# - 编译器如何使用'yield return'来构建一个类

> ID：15344427
> 
> 赞同：6
> 
> 时间：2013-03-11T17:08:17.770
> 
> 标签：c#

具体来说，如果我说：

```
 public static IEnumerable<String> Data()
    {
        String connectionString = "...";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();

            IDataReader reader = new SqlCommand("", connection).ExecuteReader();

            while (reader.Read())
                yield return String.Format("Have a beer {0} {1}!", reader["First_Name"], reader["Last_Name"]);

            connection.Close();
        }
    } 
```

编译器如何从中生成一个具体的可枚举类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T17:12:04.007

它构建了一个状态机，基本上：

*   它创建一个私有嵌套类，实例变量对应于方法中的局部变量，以及一个`state`变量来跟踪它的位置
*   状态机实现`IEnumerable<T>`和`IEnumerator<T>`-`MoveNext()`方法到达逻辑的正确位（基于`state`）并设置实例变量以跟踪最后产生的值（`Current`属性）
*   编译器创建一个与原始签名具有相同签名的“骨架”方法，该方法创建状态机的一个实例

有关更多详细信息，请参阅[我关于该主题的文章。](http://csharpindepth.com/Articles/Chapter6/IteratorBlockImplementation.aspx)另请注意，C# 5 中的 async/await 是用许多相同的想法构建的（尽管存在各种实现差异）。

# ios - opengles在iphone中显示人脸

> ID：15344430
> 
> 赞同：4
> 
> 时间：2013-03-11T17:08:37.147
> 
> 标签：ios, objective-c, opengl-es, 3d, glkit

我需要将人的 2D 脸对 3D 脸。我使用[此链接](https://github.com/ricardo-rendoncepeda/mtl2opengl)加载“.obj”文件并映射纹理。此示例仅适用于立方体和金字塔。我加载了一个人脸“.obj”文件。

这将加载 .obj 文件并可以正确获取人脸，如下所示。 ![在此处输入图像描述](../Images/7264fbb6004c9cb7f2007509e228c2ef.png)

但我的问题是我需要在不更改“.obj”文件的情况下显示不同的人脸。只是通过纹理映射。

但是纹理没有正确映射，因为 obj 文件的模型不同。我刚刚尝试更改用作纹理的“.png”文件，下面是结果，其中纹理被映射但不完全符合我的预期，如下所示。

![在此处输入图像描述](../Images/5532344b1166b4e2e17fdb6a73911aa1.png)

以下是我的几个问题：

1）我需要在具有不同图像的同一模型（具有相同的 .obj 文件）上加载纹理。在opengles中可以吗？

2）如果上述问题的解决方案是“形状匹配”，我该如何使用opengles呢？

3）最后一个基本问题，我需要大面积显示图像，如何使显示面积更大？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T19:13:12.330

[mtl2opengl](https://github.com/ricardo-rendoncepeda/mtl2opengl)实际上是我的项目，所以感谢使用它！

1) 实现完美纹理交换而不失真的唯一方法是，如果两个纹理都以完全相同的方式映射到 UV 顶点上。看看下面的图片：

![使用未对齐的顶点进行纹理交换](../Images/cedf823b5c832487d849b23695641f83.png)

*   A型：[金发女郎](http://www.turbosquid.com/FullPreview/Index.cfm/ID/699654)
*   B型：[Ashley Head](http://www.turbosquid.com/FullPreview/Index.cfm/ID/602043)

如您所见，制作纹理以适合模型。因此，任何与不同几何目标的交换都会导致失真。简化后的人头/面部有两个组成部分：内部（骨骼/几何）和外部（皮肤/纹理）。内部方面显然定义了外部，因此在同一个 .obj 文件上进行完美的纹理交换将不起作用，除非您通过交换更改模型的几何形状。

2) 这可以通过一种称为[置换映射](http://wiki.blender.org/index.php/Doc:2.4/Manual/Textures/Influence/Material/Displacement)的技术来实现，该技术可以在 OpenGL ES 中实现，尽管对于多个头/面来说有预期的困难。这将要求您的目标 .obj 几何体从一个非常通用的模型开始，例如人体模型，然后使用每个纹理来移动模型顶点的位置。我认为您需要对建模、图形、着色器和数学非常熟悉才能实现这一目标！

![在此处输入图像描述](../Images/37eaa02d1dac989f3e0da4cfa9be60b9.png)

*   通过[维基百科](http://en.wikipedia.org/wiki/Displacement_mapping)

3）我将在下一次更新中添加更多的转换选项（缩放和翻译）。Xcode 项目实际上是为了展示 PERL 脚本，而不是作为 iOS 上 OpenGL ES 的入门。现在，找到`modelViewMatrix`并摆弄这一点：

```
GLKMatrix4Scale(_modelViewMatrix, 0.30, 0.33, 0.30); 
```

希望能回答你所有的问题！

# c++ - 多进程 C++ fifo

> ID：15344431
> 
> 赞同：0
> 
> 时间：2013-03-11T17:08:37.597
> 
> 标签：c++, ipc, pipe, fifo

在 C 中，您可以使用创建多进程应用程序`fork()`，然后可以使用 FIFO 管道进行通信。我了解到 C++ 只支持多线程应用程序，如果你想要一个多进程应用程序，你必须依赖`fork()`.

但是在 C++ 中，类型检查是至关重要的，所以我不能只是通过管道传递对象而没有任何风险。您可以转换`void*`并询问`sizeof`并通过管道发送所有内容以将其转换回原始对象。

那么为什么感觉如此不对呢？多进程架构是否未在 C++ 中使用，或者是否有库或更好的做事方式。我用谷歌搜索了一下，你唯一找到的是多线程 C++ 或多进程 C。

想要更多进程的原因是我希望我的应用程序尽可能健壮。如果我的 Web 服务崩溃，我希望我的主进程重新启动它。没有办法执行此多线程，因为您永远不知道 1 个线程是否没有损坏另一个线程中的内存，因此如果您在一个线程中遇到错误，您必须出于安全原因重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:46:04.680

我假设多进程程序是指同时运行程序的两个独立实例，它们之间有一些共享数据。进程之间的通信可能很棘手。我一直使用您描述的管道类型转换方法，或者使用本地套接字系统来回发送数据，但是确实存在用于进程之间更高级别通信的库，请参阅[boost.interprocess](http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess.html)我会给出一个看看，看看它是否能满足你的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:00:36.417

据我了解您的问题，您的主要问题是通过某种串行连接将数据从一个进程传递到另一个进程。

如果是这种情况，并且您只是向上和向下传递平面数据结构，那么使用您已经描述的方法应该没有问题。只需将整串位向下发射并投射到线路另一端的相应类型。只要您仅与运行在同一台机器上的进程进行通信，这些进程使用由同一编译器生成的可执行文件和相同的编译器开关，字节顺序、成员对齐或其他任何问题都不会出现任何问题。

另一方面，如果您的数据更复杂，包含对动态长度等其他对象列表的某种引用，那么您很快就会遇到大麻烦，使用简单的强制转换为 void* 并逐位抽取数据策略。因此，您肯定需要一种更复杂的方法来对对象进行“序列化”和“反序列化”。

这些（**“序列化”**和**“反序列化”**）是您可能想要进一步研究以找到最适合您的问题的方法的两个术语。

您很快就会发现这些问题是“解决方案”一次又一次地发明出来的，像 sun RPC 和 ASN.1 使用的 XDR 这样的标准动物园仅举几例，很难说是哪一个最适合您的用例。

如果您使用 C++，您可能想看看 boost 必须提供的解决方案（请参阅： http: [//www.boost.org/doc/libs/1_39_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_39_0/libs/serialization/doc/index.html) )

再一次 - 如果它只是平面数据结构，你来回传递不要打扰任何那种开销，只需一点一点地将数据向下传输。

# sql-server - 带有截止时间的 DATEDIFF

> ID：15344432
> 
> 赞同：0
> 
> 时间：2013-03-11T17:08:39.867
> 
> 标签：sql-server, tsql, datediff

我正在开发一个房间调度应用程序。我们有这个我们需要遵循的房间退房规则。所有房间退房时间应为下午 12:00。如果退房日期在 12:00 PM 之后，则将被视为额外 1 天。

下面是我返回 5 天的 T-SQL 代码。

```
 SELECT DATEDIFF(day, '3/12/2013 12:00:00 PM', '3/17/2013 3:00:00 PM'); 
```

如果您看到结束日期上方的代码是下午 3:00:00。如何调整此代码以返回 6 天而不是 5 天？

如果我有这个代码怎么办？

```
 SELECT CEILING(DATEDIFF(SECOND, '3/12/2013 02:00:00 PM' , '3/17/2013 12:50:36 PM') / (24.0 * 60 * 60)) 
```

上面的代码仍然返回 5 天而不是 6 天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:12:03.680

```
SELECT CEILING(DATEDIFF(SECOND, '3/12/2013 12:00:00 PM', '3/17/2013 12:00:01 PM') / (24.0 * 60 * 60)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:42:18.117

正确的方法是从 StartDate 和 EndDate 中减去 12 小时，然后取 day-diff + 1：

```
declare @dateStart as datetime, @dateEnd as datetime
set @dateStart = cast('20130301 11:59:59 AM' as datetime)
set @dateEnd   = cast('20130301 12:01:01 PM' as datetime)

select 
  @dateStart, 
  @dateEnd

select days = 1 + datediff(d,@dateStart,@dateEnd)

select 
  days = 1 + datediff(d, dateadd(hh, -12, @dateStart), dateadd(hh, -12, @dateEnd)) 
```

返回这个：

```
----------------------- -----------------------
2013-03-01 11:59:59.000 2013-03-01 12:01:01.000

days
-----------
1

days
-----------
2 
```

显然第二个公式是正确的，而不是第一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:14:12.163

也许您可以计算小时数：

```
SELECT DATEDIFF(hour, '3/12/2013 12:00:00 PM', '3/17/2013 3:00:00 PM'); 
```

因此，`123 > 120`（或除以 24 - `5.125 > 5`）占 6 天。

# erlang - 在erlang中调用未定义的函数

> ID：15344434
> 
> 赞同：-5
> 
> 时间：2013-03-11T17:08:42.797
> 
> 标签：erlang, mnesia

我想将数据表 mnesia 导出到 txt 文件

我尝试使用此代码：

```
exporttxt()->
     F = fun(T) -> mensia:foldl(fun(X,Acc) -> [X|Acc] end, [],T) end,
{atomic,L} = mnesia:transaction(F(user)),
file:write_file("test.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                 #user{id = F1,adress = F2,birthday = F3} <- L]). 
```

但是当我测试这个功能时，我有这个错误：

```
Erlang R13B03 (erts-5.7.4) [source] [rq:1] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.7.4  (abort with ^G)
1> model:exporttxt().
** exception error: undefined function mensia:foldl/3
     in function  model:exporttxt/0
2> 
```

如您所见，我使用 erlang 版本 13

**我现在尝试使用此代码：**

```
exporttxt()->
     F = fun(T) -> mnesia:foldl(fun(X,Acc) -> [X|Acc] end, [],T) end,
{atomic,L} = mnesia:transaction(F(user)),
file:write_file("test.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                 #user{id = F1,adress = F2,birthday = F3} <- L]). 
```

但我有这个错误：

```
** exception exit: {aborted,no_transaction}
     in function  mnesia:abort/1
     in call from model:exporttxt/0 
```

我也尝试：

```
 exporttxt()->
         F = fun(T) -> mnesia:foldl(fun(X,Acc) -> [X|Acc] end, [],T) end,
    {atomic,L} = mnesia:transaction(F),
    file:write_file("test.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                     #user{id = F1,adress = F2,birthday = F3} <- L]). 
```

但我有这个错误：

```
** exception error: no match of right hand side value 
                    {aborted,{{badarity,{#Fun<model.208.16694406>,[]}},
                              [{mnesia_tm,apply_fun,3},
                               {mnesia_tm,execute_transaction,5},
                               {model,exporttxt,0},
                               {erl_eval,do_apply,5},
                               {shell,exprs,6},
                               {shell,eval_exprs,6},
                               {shell,eval_loop,3}]}}
     in function  model:exporttxt/0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:51:48.983

```
mnesia:transaction(F(user)) 
```

这是错误的，请花点时间看看。mnesia:transaction/1 期望一个函数，你没有传递一个函数，你传递 F(user) 的任何*结果*.. （记住 erlang 使用严格的评估，所以它在mnesia:transaction/*之前*评估 F(user) 1）。

在您的情况下，对 F(user) 的调用失败，因为它应该在事务中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:14:15.560

这不是 Erlang 版本的问题。这是语句 `mensia:foldl`拼写错误的问题。它应该是 `mnesia:foldl`

# bugzilla - 使用 Bugzilla 自定义表格报告

> ID：15344436
> 
> 赞同：3
> 
> 时间：2013-03-11T17:08:48.177
> 
> 标签：bugzilla

我想在表格报告中添加更多列。我正在使用 bugzilla 版本 4.2.5。你能帮忙解决我必须修改的文件吗？

谢谢，拉米亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T03:31:52.363

如果列列表中没有所需的字段（“更改列”），我们必须通过编辑以下文件来添加新字段。

```
1)colchange.cgi
2)list/change-columns.html.tmpl
3)field-descs.none.tmpl 
```

错误列表的所有列都直接取自数据库字段。例如：buglist 页面的 ID 直接取自 table bugs 的 bug_id 字段。

*   可以添加新字段并按照它们在 colchange.cgi 文件中的显示顺序进行排列。
*   colchange.cgi 对应的模板文件是list/change-columns.html.tmpl。
*   如果我们需要在更改列页面中进行任何修改，我们必须修改模板文件 list/change-columns.html.tmpl。
*   添加的新字段应在文件 field-descs.none.tmpl 中定义。

修改以下文件：

```
1)buglist.cgi
2)colchange.cgi
3)field-descs.none.tmpl 
```

*   在 colchange.cgi 文件中添加了要显示的相应列，并将变量传递给模板文件 list/list.html.tmpl。

*   在文件 field-descs.none.tmpl 中定义了应该在前端显示的名称。

*   修改文件 buglist.cgi 以获取应该
    为相应字段提供值的查询

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:08:32.093

有两种方法可以做到这一点。

1.  当您显示报告时，您会在底部找到一个链接，上面写着“更改列”。那是最浪费的方式。

2.  如果您想更改默认列，请在 /usr/local/bugzilla-4.2.5/Bugzilla/Constants.pm 中编辑以下语句并添加或删除默认列。

    使用常量 DEFAULT_COLUMN_LIST => ( "product", "component", "assigned_to", "bug_status", "resolution", "short_desc", "changeddate" );

**编辑：**刚刚意识到这个问题已经存在两年了。我希望它可以帮助其他偶然发现它的人。

# php - 在php数据库查询中插入变量

> ID：15344442
> 
> 赞同：0
> 
> 时间：2013-03-11T17:09:03.667
> 
> 标签：php, mysql

这很简单，但我似乎无法找到我正在寻找的答案。

这完美地工作：

```
mysql_query("INSERT INTO Courses (CourseName) values ('MyValue')"); 
```

但这不起作用：

```
mysql_query("INSERT INTO Courses (CourseName) values ('" + $_POST['course'] + "')"); 
```

我测试过，我知道`$_POST['course']`包含`MyValue`.
我什至可以在 php 中使用这种语法吗？

就我而言，Sql Injection 不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:15:06.657

```
mysql_query("INSERT INTO Courses (CourseName) values ('" + $_POST['course'] + "')"); 
```

PHP 不支持您使用的字符串连接方法。它支持其他语言。构建字符串有多种选择。

选项1：替换`+`为`.`

```
mysql_query("INSERT INTO Courses (CourseName) values ('".$_POST['course']."')"); 
```

选项2：不休息

```
mysql_query("INSERT INTO Courses (CourseName) values ('{$_POST['course']}')"); 
```

在语言之间切换时，您应该阅读基础知识，尤其是在这种情况下，搜索“PHP 字符串连接”将为您提供所需的内容。

另外：不要使用 MySQL_*，因为它在 PHP 5.5 中已被弃用。使用 MySQLi_* 或 PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:10:34.360

使用`.`代替`+`

```
mysql_query("INSERT INTO Courses (CourseName) values ('" . mysql_real_escape_string($_POST['course']) . "')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:11:07.160

PHP 使用 . 连接字符串

```
mysql_query("INSERT INTO Courses (CourseName) values ('".mysql_real_escape_string($_POST['course'])."')"); 
```

还可以使用 mysql_real_escape_string 来防止任何错误，例如 o'neil 中有一个单引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:11:43.647

1) 使用 mysqli，而不是 mysql ，因为它已被弃用。

2) 如果您仍然使用 mysql，请始终使用 mysql_real_escape 字符串转义来自您网站的变量...

3）调试你的代码。您的示例中最快的只需使用：

```
 mysql_query("... your sql string ") or die(mysql_error()) 
```

比你看到的错误。（但是当您的脚本上线时，请注释掉所有“或死（mysql_error（））+代码，这样其他人就看不到错误，然后破解您的网站（很容易））

4) 。是php中字符串的串联，不是+

# apache-poi - 无法让 Apache POI 在 SSJS 中工作

> ID：15344446
> 
> 赞同：0
> 
> 时间：2013-03-11T17:09:14.913
> 
> 标签：apache-poi, xpages, xpages-ssjs

我正在尝试通过 Xpage 将任何类型的 Excel 工作表（xls/xslx）导入我的数据库，以下代码返回错误：

```
importPackage(org.apache.poi.ss.usermodel);

var tempFile:java.io.File = fileData.getServerFile();

var wb:WorkBook = WorkbookFactory.create(tempFile);
var sheet:Sheet = wb.getSheetAt(0);
var rows = sheet.getPhysicalNumberOfRows(); 
```

*“找不到工作簿工厂”*

我已将 API 放在 buld 路径中：/tradesec(9).nsf/WebContent/WEB-INF/lib/poi-3.9-20121203.jar

我在没有 importPackage 的情况下尝试过，但没有运气。 *未找到“组织”*

请指教！

/米

**更新：** 我现在已经将所有 jar 从 POI 复制到 jvm/lib/ext，为 java.policy 中的所有内容添加了授权，创建了一个 java 类作为 bean。仍然出现异常：

```
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:56)
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39)
java.lang.reflect.Constructor.newInstance(Constructor.java:527)
com.ibm.jscript.types.JavaAccessObject.construct(JavaAccessObject.java:260)
com.ibm.jscript.types.JavaWrapperObject.construct(JavaWrapperObject.java:1)
com.ibm.jscript.ASTTree.ASTNew.interpret(ASTNew.java:109)
com.ibm.jscript.ASTTree.ASTMember.interpret(ASTMember.java:106)
com.ibm.jscript.ASTTree.ASTCall.interpret(ASTCall.java:88)
com.ibm.jscript.ASTTree.ASTVariableDecl.interpret(ASTVariableDecl.java:82)
com.ibm.jscript.ASTTree.ASTBlock.interpret(ASTBlock.java:100)
com.ibm.jscript.ASTTree.ASTTry.interpret(ASTTry.java:109)
com.ibm.jscript.ASTTree.ASTBlock.interpret(ASTBlock.java:100)
com.ibm.jscript.ASTTree.ASTTry.interpret(ASTTry.java:109)
com.ibm.jscript.ASTTree.ASTIf.interpret(ASTIf.java:85)
com.ibm.jscript.ASTTree.ASTBlock.interpret(ASTBlock.java:100)
com.ibm.jscript.ASTTree.ASTTry.interpret(ASTTry.java:109)
com.ibm.jscript.ASTTree.ASTProgram.interpret(ASTProgram.java:119)
com.ibm.jscript.ASTTree.ASTProgram.interpretEx(ASTProgram.java:139)
com.ibm.jscript.JSExpression._interpretExpression(JSExpression.java:435)
com.ibm.jscript.JSExpression.access$1(JSExpression.java:424)
com.ibm.jscript.JSExpression$2.run(JSExpression.java:414)
java.security.AccessController.doPrivileged(AccessController.java:310)
com.ibm.jscript.JSExpression.interpretExpression(JSExpression.java:410)
com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:251)
com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:234)
com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:221)
com.ibm.xsp.binding.javascript.JavaScriptMethodBinding.invoke(JavaScriptMethodBinding.java:111)
com.ibm.xsp.actions.ActionGroup.invoke(ActionGroup.java:135)
com.ibm.xsp.component.UIViewRootEx.invokePhaseMethodBinding(UIViewRootEx.java:1735)
com.ibm.xsp.controller.FacesControllerImpl.invokePhaseMethodBinding(FacesControllerImpl.java:444)
com.ibm.xsp.controller.FacesControllerImpl.access$0(FacesControllerImpl.java:438)
com.ibm.xsp.controller.FacesControllerImpl$ViewPhaseListener.beforePhase(FacesControllerImpl.java:527)
com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:197)
com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:120)
com.ibm.xsp.controller.FacesControllerImpl.render(FacesControllerImpl.java:264)
com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:248)
com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:204)
com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:138)
com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:583)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281)
com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:860)
com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:803)
com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:572)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1265)
com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:658)
com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:481)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272) 
```

我必须说，我在这部分的知识非常有限。

目前我正在考虑摆脱这个并开始实现一个普通的旧文本文件。恐怕我紧张的项目时间表需要处理太多的开销和依赖项。如果有人在那里找到解决方案，我很乐意探索它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:16:07.403

确保您也将 poi-ooxml-3.9-20121203.jar 添加到构建路径。poi-3.9-20121203.jar jar 不包含 WorkbookFactory 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:15:06.747

从 Domino 数据库加载时，dom4j（由 POI XLSX 解析器使用）存在与类加载器相关的问题。尝试将所需的 jars 添加到 jvm/lib/ext 目录（包括 Domino 和 Notes）中的文件系统并稍微打开 java.security（请参阅[http://www.wissel.net/blog/d6plinks/SHWL-8JYAT5](http://www.wissel.net/blog/d6plinks/SHWL-8JYAT5)）。

我在 unrestricted 方面取得了成功`grant { permission java.security.AllPermission; };`。限制更多一些会更好，但我还没有时间进一步调查这个问题。

您还可以尝试通过加载 POI 4 XPages OSGi 库来加载 jar：[http ://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=POI%204%20XPages](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=POI%204%20XPages)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:38:26.623

尝试添加 WorkbookFactory 的完整路径，这是我之前在 jar 中引用类时所做的。

# c# - 将 DotNetOpenAuth 与 Jira 5.1.2 一起使用

> ID：15344448
> 
> 赞同：3
> 
> 时间：2013-03-11T17:09:22.020
> 
> 标签：c#, jira, dotnetopenauth

我在使用 DotNetOpenAuth 与 Jira 通信时遇到了问题。

```
var payload =   
    new {
        fields = new
        {
            project = new { id = 10000 },
            summary = summary,
            description = description,
            issuetype = new { id = (int)issueTypeId }
        }
    };

webRequest = OAuthConsumer.PrepareAuthorizedRequest(
    new MessageReceivingEndpoint(url, HttpDeliveryMethods.PostRequest),
    accessToken
);

byte[] payloadContent = System.Text.Encoding.UTF8.GetBytes(Newtonsoft.Json.JsonConvert.SerializeObject(payload));
webRequest.ContentLength = payloadContent.Length;
using (var stream = webRequest.GetRequestStream())
{
    stream.Write(payloadContent, 0, payloadContent.Length);
} 
```

然而， webRequest.GetRequestStream() 只是抛出一个异常`This property cannot be set after writing has started.`

我正在尝试使用[http://docs.atlassian.com/jira/REST/latest/#id120664](http://docs.atlassian.com/jira/REST/latest/#id120664)创建一个新问题。如果我使用基本身份验证而不是 OAuth，并且我使用 GET 的所有其他 OAuth 调用都可以正常工作，那么代码可以正常工作。

有人对使用 DotNetOpenAuth 和 Jira 有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:45:40.120

终于找到问题了。需要使用以下代码：

```
var payload =   
    new {
        fields = new
        {
            project = new { id = 10000 },
            summary = summary,
            description = description,
            issuetype = new { id = (int)issueTypeId }
        }
    };

webRequest = OAuthConsumer.PrepareAuthorizedRequest(
    new MessageReceivingEndpoint(url, HttpDeliveryMethods.AuthorizationHeaderRequest | HttpDeliveryMethods.PostRequest),
    accessToken
);

webRequest.ContentType = "application/json";

byte[] payloadContent = System.Text.Encoding.UTF8.GetBytes(Newtonsoft.Json.JsonConvert.SerializeObject(payload));
webRequest.ContentLength = payloadContent.Length;
using (var stream = webRequest.GetRequestStream())
{
    stream.Write(payloadContent, 0, payloadContent.Length);
} 
```

基本上，我需要`HttpDeliveryMethods.AuthorizationHeaderRequest`在调用时添加`PrepareAuthorizedRequest`，然后我需要`ContentType`在向流中添加任何内容之前设置属性。

# c# - 必须实现接口 A 或接口 B（正好一个）

> ID：15344451
> 
> 赞同：2
> 
> 时间：2013-03-11T17:09:38.123
> 
> 标签：c#, oop, interface

我有一个看起来像这样的界面：

```
public interface IOpportunity
{
    string Name { get; }
    string Description { get; }
    ILocation Location { get; }
}

public interface ILocation : IHierarchicalEntity 
{ 
    int OpptyCount { get; }
}

public interface IHierarchicalEntity 
{ 
    string SID { get; }
    string Name { get; }
} 
```

但是，我希望 ILocation 对象也实现以下接口之一：

```
public interface IHierarchicalEntityWithParentNames : IHierarchicalEntity
{
    /// <summary>
    /// Returns the lowest level that this heirarchy goes (0 for a flat hierarchy, 1 for a two-level etc.)
    /// </summary>
    int LeafLevel { get; }

    /// <summary>
    /// Returns the name of the Segment for the given level (0 for a root node, n for leaf node, where n = LeafLevel)
    /// </summary>
    /// <param name="level"></param>
    /// <returns></returns>
    string GetNameForLevel(int level);
}

public interface IHierarchicalEntityWithParentIds : IHierarchicalEntity
{
    IHierarchicalEntityWithParentIds ParentEntity { get; }
    string ParentSID { get; }
} 
```

由于我正在编写的代码的性质，我无法将这些接口组合成一个具有某种`GetParent`方法的接口

在使用这些接口的代码中，我有两个类——一个使用 ILocation 对象，如果它是一个`IHierarchicalEntityWithParentNames`，另一个如果它是一个`IHierarchicalEntityWithParentIds`

我将如何布置接口（也许我必须有一些抽象类）以支持这种“一种或另一种”设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:29:03.463

我相信你过度限制了真正的问题。这与我在游戏引擎中遇到的问题非常相似，其中六角网格上的坐标可以位于规范参考框架（120 度的轴，方便大多数内部游戏功能）或矩形（用户）参考框架轴成 90 度（方便大多数用户可见的游戏功能）。

我通过构建一个单独的类 Coords 来解决这个问题，该类显式地实现了接口 ICoordsCanon 和 ICoordsUser。实际坐标被延迟存储并通过如下自动转换进行评估：

```
protected static IntMatrix2D MatrixUserToCanon;
protected IntVector2D VectorCanon {
  get { return ! isCanonNull ? _vectorCanon 
                             : VectorUser * MatrixUserToCanon; }
  set { _vectorCanon = value;  isUserNull = true; }
} IntVector2D _vectorCanon;
bool isCanonNull;

protected static IntMatrix2D MatrixCanonToUser;
protected IntVector2D VectorUser {
  get { return ! isUserNull  ? _vectorUser 
                             : VectorCanon * MatrixCanonToUser; }
  set { _vectorUser  = value;  isCanonNull = true; }
} IntVector2D _vectorUser;
bool isUserNull; 
```

Coords 的构造函数是私有的，定义了公共静态函数 NewUserCoords(...) 和 NewCanonCoords(...)。

虽然实现不是真正的......或......，但它似乎是这样实现的应用程序。大多数应用程序的使用要么与 ICoordsCanon 对象一起使用，要么与 ICoordsUser 对象一起使用；存在两种方法 ICoordsCanon.User() 和 ICoordsUser.Canon() 用于根据需要在两者之间进行转换。

根据大众的需求，这里是接口定义和实现。

```
 public interface ICoordsUser {
    int             X         { get; }
    int             Y         { get; }
    IntVector2D     Vector    { get; set; }
    ICoordsCanon    Canon     { get; }
    //ICoordsUser     Clone();
    string          ToString();
    int             Range(ICoordsUser coords);
    IEnumerable<NeighbourCoords> GetNeighbours(Hexside hexsides);
  }

  public partial class Coords {
    int           ICoordsUser.X          { get { return VectorUser.X; } }
    int           ICoordsUser.Y          { get { return VectorUser.Y; } }
    IntVector2D   ICoordsUser.Vector     { get { return VectorUser;   }
                                           set { VectorUser=value;    } }
    ICoordsCanon  ICoordsUser.Canon      { get { return this;         } } 
    //ICoordsUser   ICoordsUser.Clone()    { return NewUserCoords(VectorUser); }
    string        ICoordsUser.ToString() { return VectorUser.ToString(); }

    IEnumerable<NeighbourCoords> ICoordsUser.GetNeighbours(Hexside hexsides) { 
      return GetNeighbours(hexsides); 
    }
    int ICoordsUser.Range(ICoordsUser coords) { return Range(coords.Canon); }
  }
} 
```

和

```
 public interface ICoordsCanon {
    int             X         { get; }
    int             Y         { get; }
    IntVector2D     Vector    { get; set; }
    ICoordsCustom   Custom    { get; }
    ICoordsUser     User      { get; }
    //ICoordsCanon    Clone();
    string          ToString();
    int             Range(ICoordsCanon coords);
    IEnumerable<NeighbourCoords> GetNeighbours(Hexside hexsides);
  }
  public partial class Coords {
    int             ICoordsCanon.X          { get { return VectorCanon.X; } }
    int             ICoordsCanon.Y          { get { return VectorCanon.Y; } }
    IntVector2D     ICoordsCanon.Vector     { get { return VectorCanon;   }
                                              set { VectorCanon=value;    } }
    ICoordsUser     ICoordsCanon.User       { get { return this; } }
    ICoordsCustom   ICoordsCanon.Custom     { get { return this; } }
    //ICoordsCanon    ICoordsCanon.Clone()    { return NewCanonCoords(this.VectorCanon); }
    string          ICoordsCanon.ToString() { return VectorCanon.ToString(); }

    IEnumerable<NeighbourCoords> ICoordsCanon.GetNeighbours(Hexside hexsides) { 
      return GetNeighbours(hexsides); 
    }
    int ICoordsCanon.Range(ICoordsCanon coords) { return Range(coords); }
  } 
```

请注意，我没有包含类 Coords 的完整定义，因为这将是一个太大的帖子。整个实现在 CodePlex 上可用：[HexGrid Utilities](http://hexgridutilities.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:13:35.360

你不能。您要么显式实现接口，要么不实现。您所描述的实际上是“方法 A*或*方法 B 将存在”，但这不是 C#（或我知道的任何其他语言！）中存在的概念。

如果该类不实现其他两个接口之一，您将能够得到的最接近的方法是在使用您的接口的代码中引发异常。

或者，我想你可以有一个基类，如果它没有实现一个或其他接口，它的构造函数将抛出异常。这会给你一个更早的检查，但它仍然是一个运行时检查，我个人认为这是一个可怕的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:13:08.607

我不知道在编译时有任何方法可以强制执行此操作。我认为您必须使用一个基类来进行运行时检查，如果两个接口都实现了，则该基类会引发异常。

但是，这不会阻止某人绕过您的基类并自己实现接口，而且我不知道有什么办法可以阻止这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:58:37.283

您可以尝试代码合同。后置条件。像这样

```
[ContractClassFor(typeof(IOpportunity))]
public abstract class OpportunityContract : IOpportunity
{

    public ILocation Location
    {
        get { Contract.Ensures(Contract.Result<ILocation>() is IHierarchicalEntityWithParentNames || Contract.Result<ILocation>() is IHierarchicalEntityWithParentIds); }
    }
} 
```

# asp.net - 如何在 GridView Column ItemTemplate 中将数值数据格式化为数千？

> ID：15344456
> 
> 赞同：1
> 
> 时间：2013-03-11T17:09:48.270
> 
> 标签：asp.net, vb.net

我有一个带有如下列的gridview：

```
<asp:TemplateField HeaderStyle-Width="75px">
     <HeaderTemplate>
         <asp:Label ID="lblHM1" Text="Hm1" runat="server"></asp:Label>
     </HeaderTemplate>
     <ItemTemplate>
         <asp:Label ID="lblM1" Text='<%# Eval("m1","{0:#0}")%>' runat="server">
          </asp:Label>
     </ItemTemplate>
</asp:TemplateField> 
```

此列中的数字通常大于 1000，因此我想将它们格式化。例如，如果此列中的数据为`11359`，我希望将数字格式化为`11,359`。

我尝试了以下方法：

```
<asp:TemplateField HeaderStyle-Width="75px">
     <HeaderTemplate>
         <asp:Label ID="lblHM1" Text="Hm1" runat="server"></asp:Label>
     </HeaderTemplate>
     <ItemTemplate>
         <asp:Label ID="lblM1" Text='<%# Eval("m1","{0:N0}")%>' runat="server">
          </asp:Label>
     </ItemTemplate>
</asp:TemplateField> 
```

但是上面会产生一个异常： `Input string was not in a correct format`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:25:03.940

你可以这样做：

```
 <asp:Label ID="lblM1" Text='<%# Eval("m1","{0:0,0}")%>' runat="server"></asp:Label> 
```

那应该将 11239 格式化为“11.239”。组分隔符会因您的文化而异。

看看文档：

[, 自定义说明符](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SpecifierTh)

和

[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

编辑：顺便说一句，这可能是一个完全不同的原因。可能是您正在以一种文化发送数据，但 .Net 它试图用不兼容的不同文化进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T06:01:57.513

我试过你的格式，它对我有用，谢谢:)

只需按以下方式更改并尝试它是否适合您。

'>

而不是 Eval 使用 DataBinder.EVal。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-28T09:44:28.140

只需使用这个-

```
Text='<%# Eval("m1","{0:0,0}") %>' 
```

# php - 为什么编辑mamps php.ini 没有效果

> ID：15344460
> 
> 赞同：1
> 
> 时间：2013-03-11T17:10:07.543
> 
> 标签：php, macos, mamp, php-ini

我试图提高`upload_max_filesize`php.ini 中的值（mamp 2.1.2 和 PHP 版本 5.4.10）。服务器在端口 80 上运行。我在这里找到了几个 anwsers，但没有一个真正适用。

当我使用该`phpinfo ()`函数获取“加载的配置文件”时，我得到了路径：`/Applications/MAMP/bin/php/php5.4.10/conf/php.ini`，但显示的配置形式`phpinfo ()`与我的 php.ini 中的配置不匹配。

在我的 php.ini`upload_max_filesize = 100M`中，phpinfo() 告诉我 2M。

编辑完ini后，我重新启动了服务器和我的机器。

那么为什么我不能更改upload_max_filesize？

**编辑：** 将端口设置为 8888 后，配置文件已正确加载。也许与操作系统的 Apache-Server 有冲突？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-27T17:01:56.303

这是因为每次启动服务时，MAMP 和 MAMP PRO 都会使用模板文件覆盖 php.ini。因此，要进行所需的 php.ini 更改，您需要更改模板。

在我在 OS X 上使用 MAMP PRO 的实例中，该模板位于：

```
/Applications/MAMP PRO/MAMP PRO.app/Contents/Resources/ 
```

在此文件夹中，您会发现每个可用的 PHP 版本都有几个 php.ini 版本。您将需要编辑正在运行的 PHP 版本的 .ini 文件。就我而言，那是**php5.5.10.ini**。编辑后，重新启动您的 MAMP，您的新设置应该会生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:20:35.380

您还必须编辑：`post_max_size`和`memory_limit`

> **post_max_size** integer 设置允许的 post 数据的最大大小。此设置也会影响文件上传。要上传大文件，此值必须大于 **upload_max_filesize**。如果您的配置脚本启用了内存限制，那么**memory_limit**也会影响文件上传。一般来说，memory_limit 应该大于 post_max_size。使用整数时，该值以字节为单位。也可以使用本常见问题解答中描述的速记符号。如果 post 数据的大小大于**post_max_size**，则 $_POST 和 $_FILES 超全局变量为空。这可以通过多种方式进行跟踪，例如通过将$_GET 变量传递给处理数据的脚本，即，然后检查是否设置了$_GET['processed']。

php ini核心[手册](http://php.net/manual/en/ini.core.php)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-11T17:14:15.703

尝试编辑`/Applications/MAMP/bin/php/php5.4.10/conf/php.ini` 并重新启动服务器。

或者尝试以编程方式设置它

```
ini_set('upload_max_filesize', '100M'); 
```

# android - Android apache客户端登录

> ID：15344461
> 
> 赞同：0
> 
> 时间：2013-03-11T17:10:07.467
> 
> 标签：android, rest, apache-httpclient-4.x

我正在开发一个应用程序。在第一个屏幕上，用户必须登录（POST 调用），然后在其他屏幕上它可以执行操作（GET 调用）。

我在异步任务中执行此操作，但问题是，我必须在每个屏幕上登录后台，因为异步任务（因此客户端实例）在执行调用后被破坏。是否可以在活动之间发送 HttpCLient 实例？

我尝试过的第二种方法是 IntentService，但是在我进行 GET 调用后，intentservise 向我发送了响应并自行关闭。回忆后我需要再次登录。

我想知道。

是否可以在某个背景线程中登录一次，该线程在应用程序处于活动状态之前一直处于活动状态，然后仅从 UI 线程发送 GET 调用并接收响应？

还是最好登录每个活动，但不要用后台线程打扰设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:12:27.547

登录后，将会话值存储起来，`sharedPreference`直到用户注销。它是更好的方法，而不是将请求发送到 Web 服务器再次进行身份验证。

# c# - 当我关闭它时，Visio 提示我保存文档，尽管我刚刚保存了它

> ID：15344463
> 
> 赞同：2
> 
> 时间：2013-03-11T17:10:11.607
> 
> 标签：c#, multithreading, add-in, office-interop, visio

我编写了一个 Visio 2010 加载项（在 C# 中），它处理许多 Visio 文档。在 Ribbon1.button1_Click 方法中，我调用了一个新线程（processVisioFiles），该线程在一个大循环中处理所有 vsd 文件（需要 40 多分钟）。

```
public partial class Ribbon1
{    
    private ThisAddIn exportAddIn;
    ...
    ...
    public Thread StartTheThread(DirectoryInfo startFolder, bool someVal)
    {
        var t = new Thread(() => exportAddIn.processVisioFiles(startFolder, false));
        t.SetApartmentState(ApartmentState.STA);
        t.Name = "processVisioFiles";
        t.IsBackground = true;
        t.Start();

        return t;
    }

    private void button1_Click(object sender, RibbonControlEventArgs e)
    {                             
        //exportAddIn.processVisioFiles(startFolder, false);                   
        StartTheThread(startFolder, false);         
    }
} 
```

每次在我以编程方式关闭 Visio vsd 文档之前，我都会这样做`document.Save()`，然后`document.Close()`. 然而，它们是许多文档（并非全部但总是相同），这促使我手动保存它们。

我需要说，当我使用 UI 在一个线程中启动大循环时，手动保存文档没有问题

```
private void button1_Click(object sender, RibbonControlEventArgs e)
{                             
    exportAddIn.processVisioFiles(startFolder, false);
    StartTheThread(startFolder, false);
} 
```

但随后 Visio UI 冻结（“应用程序未响应”消息），一段时间后，Visio 中止循环遍历所有文件。

我测试了保存`document.SaveAs(...)`和 document.SaveAsEx(...) 和

```
if(document.Saved == false) 
{
    document.Save(); 
} 
document.Close(); 
```

但结果是一样的。每次相同的 Visio 文件未保存并保持未保存时，UI 都会提示用户手动保存或放弃更改。如何以编程方式保存和关闭而不提示用户手动执行此操作？

ps 此外（当我处于调试模式时）我在 document.Save() 之后等待了一段时间，然后进入 document.Close() 行，但结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:32:54.490

尝试在 .Save() 之前添加 DoEvents

```
 System.Windows.Forms.Application.DoEvents();
    document.Save() 
```

# excel - Delphi XE 中带有 XLSX 文件的 ADO

> ID：15344467
> 
> 赞同：1
> 
> 时间：2013-03-11T17:10:18.563
> 
> 标签：excel, delphi, oledb, ado, ms-jet-ace

这里的问题是 ADO 与 Excel 的连接——这仍然是在 Dephi XE 环境中读/写 excel 文件的标准方法吗？我们在使用 ACEOLEDB 驱动程序 (ACE 12) 读取/写入时遇到了多个问题，其中包括

*   读取带有主题标签的单元格不会返回结果
*   导出网格时出现“无效浮点”。

我们还注意到，在 Microsoft 的网站上有许多版本的 ACE 12 驱动程序（通过 Access Database 驱动程序可执行文件），并且每个版本似乎都与 Delphi 存在不同的问题。

考虑到这些，

1.  此时将 ADO 与 Excel 一起使用是否不好？
2.  还有其他人有这些问题吗？你做了什么来解决这些问题（除了使用 XLS 文件而不是 XLSX）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:15:32.553

Delphi 中的 ADO 倾向于 TDataSet 模型，这意味着严格的表格数据...... Excel 不是。每个 excel 表都有一个随机填充的单元格，其中一些可能构成准表格范围，也可能不构成。

根据安装的软件，您可以

1) 使用 Excel 应用程序打开 XLSX，读取单元格并将它们传递给您的程序。这是最简单和兼容的方法，但由于 COM IPC 编组和切换而明显缓慢。有一些技巧可以固定它，比如隐藏 Excel 窗口、复制数据数组而不是逐个单元格的方法等。
开始探索`TExcelApplication`组件 - [http://docwiki.embarcadero.com/RADStudio/XE3/en/Using_Component_Wrappers](http://docwiki.embarcadero.com/RADStudio/XE3/en/Using_Component_Wrappers)

2) 如果您不想依赖安装商业 Excel，您可以尝试使用 OpenOffice 读取 XLSX 文件。*Vanilla OpenOffice 只能读取它们，但其他一些发行版也可以编写它们。*OpenOffice 还公开了基于 COM 和基于 HTTP 的外部 API。我知道有 Delphi 的 Delphi 项目 - OOo 交互但个人没有使用它们，除了注意到这种方法我不能说它没有详细的评估。

3) Microsoft 也曾经销售 Office for Developers 或类似产品，它为您提供 Access 和 Excel 内核作为可再发行组件，您可以将其与您的应用程序一起传递并安装并使用它们。不知道它是否仍然可行。

4）有一组商业组件直接读写这些文件，不需要外部EXE来完成这项工作。虽然这将是最快的工作方式，但它仅支持某些功能子集（对于您的特定目标可能适用也可能不适用），并且可能在“未来兼容性”方面遇到问题，因为微软将推出 XLS 的更新版本和 XLSX 格式（您可能再次关心或不关心）。就像`TXLSFile`Biff8 格式一样，例如[`OExport`library](http://www.kluug.net/xlsx-ods-delphi.php)。还有一个来自著名的 TMS Studio 的组件[，也许还有更多](http://www.torry.net/quicksearchd.php?String=xlsx&Title=No)。

5）您可以加入一些开源项目并尝试根据您的需要对其进行增强，然后再次取决于您需要多少子集。

我知道，很多人成功地使用 OLE DB 来访问 Excel 数据，但对我来说，这听起来总是有些 perversino，因为 Excel 文件根本没有任何内部规则数据排列，不像严格的表格 RDBMS 那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T16:02:01.387

我真的只发​​现可以通过 COM 操作 Excel。我已经尝试过替代方案，比如 ADO，但它们似乎总是充满了神秘的错误——或者这可能只是我的无知。

COM 在某些领域肯定很慢。我使用了 COM 和（在 Excel 文件中）VBA 的组合来实现我需要做的事情。

鉴于 Excel 不会消失，但不能指望微软不会背叛其用户，例如，取消 VBA 和 COM 支持，如果有人在某个地方（我希望我有技能）那就太好了可以为 Delphi 的 Excel 创建一些适当的支持。

# gridview - ASP.Net Gridview 设置分隔符行的背景色

> ID：15344468
> 
> 赞同：1
> 
> 时间：2013-03-11T17:10:21.027
> 
> 标签：gridview, styling

我正在构建一个`Gridview`看起来像纸质表格的表格，以使测试结果能够输入到系统中。

在表格中，第 8 行和第 9 行、第 16 行和第 17 行、第 24 行和第 25 行之间有分隔行。

我已经使用下面复制的代码块来插入行，并且在将行插入到正确的位置方面工作正常。

我的问题是该行显示为白色，我希望它具有独特的颜色（在这个阶段，确切的颜色是什么并不重要）。设置`BackColo`r 的语句不起作用，但有趣的是 Height 语句起作用。

谁能建议为什么没有设置背景颜色？

谢谢

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    var rownumber = Convert.ToInt32((DataBinder.Eval(e.Row.DataItem, "RowNumber")));

    if (rownumber < 32 && rownumber % 8 == 0)
    {
        var tbl = (Table)e.Row.Cells[0].Parent.Parent;
        var tr = new GridViewRow(e.Row.RowIndex + 1, 0, DataControlRowType.Separator, DataControlRowState.Normal)
                 {
                     Height = Unit.Parse("16px"),
                     ID = "MyExtraTr" + e.Row.RowIndex.ToString(),
                     BackColor = System.Drawing.Color.DarkSalmon
                 };
        tbl.Controls.Add(tr);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:16:55.880

我在下面添加了以下内容`tbl.Controls.Add(tr);`：-

```
 var c = new TableCell {BackColor = System.Drawing.Color.SlateGray, ColumnSpan = gv_ReviewTestResults.Columns.Count};
        tr.Cells.Add(c); 
```

现在它可以完美运行了。我不知道这是否是最好的方法，但它有效！

# ios - CoreData：多个开发者、版本化模型并保持最新

> ID：15344476
> 
> 赞同：3
> 
> 时间：2013-03-11T17:10:50.123
> 
> 标签：ios, macos, core-data

情况：

我们是多个开发同一产品的开发人员。

我们的核心数据模型 1.0 版目前在应用商店中。

我正在开发 1.1 的功能，并且需要创建我命名为“1.1”的数据模型的新“版本”

我的另一位开发人员正在开发该应用程序 2.0 的功能，而这距离该应用程序还有一年的时间。他还需要对核心数据进行更改，因此他创建了一个**基于 1.0**的新“版本” ，他将其命名为“2.0”

我修改了**1.1**中的一些实体（假设我向我的“Cats”实体添加了两个属性）并将应用程序发送到应用程序商店。

现在他想确保在 1.1 中所做的任何更改都“合并”到他的 2.0 模型中。（即他的 2.0 模型现在应该有更新的“猫”实体）我们如何才能实现这一点，而不必注意我们所做的每一个更改，并在 2.0 版本中手动添加/修改它们？

据我了解，在核心数据中创建一个新的“版本”会对版本文件进行“深拷贝”（而不是引用它并进行更改）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:12:41.873

事实上，我认为没有绝对自动的方法可以实现这一点，但您可以做的是使用 Core Data 迁移工具。

例如，创建从 2.0 到 1.1 的映射模型将使您的开发人员看到发生了什么变化以及如何变化，因此他将能够轻松添加所需的变化。

事实上，您将来肯定会使用映射模型，以使您的新版本可以使用前一个版本的数据，因此朝这个方向看会很有用。

[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmMappingOverview.html#//apple_ref/doc/uid/TP40004399-CH5-SW1)阅读有关核心数据映射的更多信息。

![iDeveloperTV 的核心数据迁移示例](../Images/ae21dce2a24f9fdee68f36a5b727f616.png)

# cuda - Windows 和 Linux 上的 CUDA

> ID：15344483
> 
> 赞同：1
> 
> 时间：2013-03-11T17:11:06.173
> 
> 标签：cuda

我正在尝试在windows下搭建一个cuda开发环境，潜伏了很多cuda标签的帖子，但还是有几件事不清楚：

*   我可以在 windows 下使用 nsight 和 VS2010 express 在不需要第二块显卡的情况下调试 cuda 应用程序吗？
*   我可以在 linux 下调试 cuda 应用程序而不需要第二块显卡，*并且*不关闭图形界面吗？
*   回答了数千次，但也许有些东西已经改变了，所以我再次询问以确保：我可以在不安装启用cuda的视频卡的情况下在windows下开发吗？有某种模拟器吗？（Windows 版的 Ocelot 几乎不存在）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:35:03.937

> 我可以在 windows 下使用 nsight 和 VS2010 express 在不需要第二块显卡的情况下调试 cuda 应用程序吗？

您显然可以使用单个视频卡进行调试，但 nsight 需要 vs2010 专业版（不是快速版） [https://developer.nvidia.com/nsight-visual-studio-edition-requirements](https://developer.nvidia.com/nsight-visual-studio-edition-requirements)

> 我可以在 linux 下调试 cuda 应用程序而不需要第二块显卡，并且不关闭图形界面吗？

我不这么认为，来自 eclipse nsight 文档（[http://docs.nvidia.com/cuda/nsight-eclipse-edition-getting-started-guide/index.html#linux-requirements](http://docs.nvidia.com/cuda/nsight-eclipse-edition-getting-started-guide/index.html#linux-requirements)）：“一个 GPU正在运行 X11（在 Linux 上）或 Aqua（在 Mac 上）不能用于调试 CUDA 应用程序，并且将对在调试器中运行的应用程序隐藏。此类 GPU 仍可用于分析 GPU 应用程序。

> 回答了数千次，但也许有些东西已经改变了，所以我再次询问以确保：我可以在不安装启用cuda的视频卡的情况下在windows下开发吗？有某种模拟器吗？（Windows 版的 Ocelot 几乎不存在）。

不，如果你想使用 cuda，你最好买一个便宜的支持 cuda 的卡（例如 GTX 650 大约 100 美元，并且是最新的（开普勒）架构）

# doctrine-orm - 学说 .orm 文件中的最后一个关系正在工作

> ID：15344487
> 
> 赞同：0
> 
> 时间：2013-03-11T17:11:14.647
> 
> 标签：doctrine-orm, doctrine

我正在尝试在 Doctrine 中建立一些关系

LancamentoConf.orm.yml：

```
Amz\FinanceiroBundle\Entity\LancamentoConf:
  type: entity
  table: amz_financeiro_lancamento_conf
  id:
    id:
      type: integer
      generator: { strategy: AUTO }
  fields:
    active:
      type: string
      length: 1
  ...
  manyToOne:
    conta:
      targetEntity: ContaConf
      inversedBy: contajoinlancamentoconf
      joinColumn:
        name: amz_financeiro_conta_conf_id
        referencedColumnName: id
  manyToOne:
    centrodecusto:
      targetEntity: Amz\AmzBundle\Entity\CentroDeCustoConf
      inversedBy: lancamentoconf
      joinColumn:
        name: amz_centro_de_custo_conf_id
        referencedColumnName: id 
```

ContaConf.orm.yml：

```
Amz\FinanceiroBundle\Entity\ContaConf:
  type: entity
  table: amz_financeiro_conta_conf
  id:
    id:
      type: integer
      generator: { strategy: AUTO }
  fields:
    active:
      type: string
      length: 1
  ...
  oneToMany:
    contajoinlancamentoconf:
      targetEntity: LancamentoConf
      mappedBy: lancamentoconf 
```

但只是“centrodecusto”关系正在发挥作用......

我注意到 LancamentoConf.orm.yml 中只有最后一个关系有效。如果我更改顺序（首先是“centrodecusto”，其次是“conta”），“centrodecusto”会正常工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:41:07.483

你的问题是重复的 manyToOne 部分，应该只有一个定义，在里面你可以定义几个元素：

LancamentoConf.orm.yml：

```
Amz\FinanceiroBundle\Entity\LancamentoConf:
  type: entity
  table: amz_financeiro_lancamento_conf
  id:
    id:
      type: integer
      generator: { strategy: AUTO }
  fields:
    active:
      type: string
      length: 1
  ...
  manyToOne:
    conta:
      targetEntity: ContaConf
      inversedBy: contajoinlancamentoconf
      joinColumn:
        name: amz_financeiro_conta_conf_id
        referencedColumnName: id
    centrodecusto:
      targetEntity: Amz\AmzBundle\Entity\CentroDeCustoConf
      inversedBy: lancamentoconf
      joinColumn:
        name: amz_centro_de_custo_conf_id
        referencedColumnName: id 
```

# c# - 从当前文本区域获取文本

> ID：15344489
> 
> 赞同：0
> 
> 时间：2013-03-11T17:11:22.477
> 
> 标签：c#, .net, winapi

我正在开发一个涉及文本分析的 .NET 应用程序。

我想从当前聚焦窗口活动文本框中检索文本。最好是从 Windows 光标的位置

这应该独立于过程，这意味着如果用户在 Word 中写作，我想检索在光标位置“附近”键入的单词，也在 Chrome 或 IE url 等中。

有谁知道.NET 中有一个很好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:16:46.007

一个好的起点是获得鼠标悬停的控制权，可以这样完成：

```
[DllImport("user32.dll")]
static extern IntPtr ChildWindowFromPoint(IntPtr hWndParent, Point Point);

[DllImport("user32.dll")]
static extern IntPtr WindowFromPoint(Point Point);

[DllImport("user32.dll")]
static extern bool ScreenToClient(IntPtr hWnd, ref Point lpPoint);

//...

Point p = Cursor.Position;
IntPtr phwnd = WindowFromPoint(Cursor.Position);
ScreenToClient(phwnd, ref p);
IntPtr hwnd = ChildWindowFromPoint(phwnd, p); 
```

从那里您可以通过类似于此处回答的方法从控件中获取文本：

[https://stackoverflow.com/a/7740920/1794305](https://stackoverflow.com/a/7740920/1794305)

# types - 在 C# 中的多个 wsdl 引用之间共享类型

> ID：15344493
> 
> 赞同：4
> 
> 时间：2013-03-11T17:11:38.843
> 
> 标签：types, namespaces, xsd, wsdl, share

我正在尝试使用这个 wsdl：[http](http://www.ans.gov.br/padroes/tiss/schemas/) ://www.ans.gov.br/padroes/tiss/schemas/ 问题是当对 wsdl 的引用添加到 C# 项目中时，会为相同的 xsd 类型创建不同的命名空间，例如cabecalhoTransacao，所以使用的时候应该是这样的：

*   tissCancelaGuia.cabecalhoTransacao
*   tissVerificaElegabilidade.cabecalhoTransacao

我怎样才能解决这个问题而无需转换？这是可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:29:34.170

有可能的。这就是我会做的，基于我对你所指的东西的了解程度。

首先，我将从您描述的页面中抓取并下载所有 WSDL/XSD 引用，以找出公共集（哪些服务/版本共享哪些 XSD）。加载它们之后，这是我可以看到的群体（鲑鱼颜色是 WSDL，灰色是 XSD）。

![在此处输入图像描述](../Images/95fe7dade797abb2349e1b3b92869595.png)

因此，您有 5 个主要群体。显然，绑定到同一组 XSD 的所有 WSDL 都应该在打包方面表现出您正在寻找的类型的共享。

下一步是定义一个 WSDL，如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- WSDL 1.1 generated by QTAssistant (http://www.paschidev.com) -->
<definitions name="aggregate" targetNamespace="urn:tempuri-org"  xmlns="http://schemas.xmlsoap.org/wsdl/">
    <import namespace="http://www.ans.gov.br/tiss/ws/tipos/tissLoteGuias/v20202" location="tissLoteGuiasV2_02_02.wsdl"/>
    <import namespace="http://www.ans.gov.br/tiss/ws/tipos/tissSolicitacaoStatusProtocolo/v20202" location="tissSolicitacaoStatusProtocoloV2_02_02.wsdl"/>
</definitions> 
```

注意：如果用于位置的相对 URI 对您不起作用，请尝试使用绝对 URI（如果您希望在自己的机器上创建此 WSDL，并像它们在远程服务器上一样指向 WSDL 位置，则更是如此）。继续添加您需要的任何 WSDL，我只添加了两个用于说明。

无论如何，一旦完成，启动您的 Visual Studio，并在您的项目中添加对您刚刚创建的这个**新**WSDL 的服务引用（正如@JohnSaunders 在他的评论中所说的那样）。确保您首先验证您的 WSDL，以确保您清除了一些东西。

![在此处输入图像描述](../Images/f2d7f8f0adf90f8cb26ce856db8d3dbe.png)

生成的代码现在为您提供常用类型，以便您可以轻松地编排这些服务的调用，通过将内容从一个传递到另一个等。

# vbscript - 如果找到匹配项，则在注册表中搜索值删除父键

> ID：15344498
> 
> 赞同：0
> 
> 时间：2013-03-11T17:11:58.410
> 
> 标签：vbscript

我需要一个脚本的帮助，该脚本将遍历注册表以获取特定值，一旦找到匹配项，就删除父键。我找到了一个代码，但它不起作用。我怀疑这是没有遍历注册表项进行匹配。

```
Option Explicit

Const HKEY_LOCAL_MACHINE   = &H80000002 
Const cRegKeyStartingPath  = "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall"
Const cRegValueToFind      = "Ossec HIDS"
Const cRegDataToMatch      = "DisplayName" 

Dim oReg, subkey, arrSubKeys, sCurrentKey, sCurrentValuePath, iDeletedCount
iDeletedCount = 0

Set oReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\default:StdRegProv")
oReg.EnumKey HKEY_LOCAL_MACHINE, cRegKeyStartingPath, arrSubKeys

On Error Resume Next
For Each subkey In arrSubKeys
    If Err.Number = 0 Then 'in case the collection is empty
        sCurrentKey = "HKLM\" & cRegKeyStartingPath & subkey
        sCurrentValuePath = sCurrentKey & "\" & cRegValueToFind
        If customRegRead(sCurrentValuePath) = cRegDataToMatch Then
            WScript.Echo "Going to delete "&sCurrentKey
            DeleteRegKey sCurrentKey&"\"
            iDeletedCount = iDeletedCount + 1
        End If
    Else
        iDeletedCount = -1
    End If
Next

Select Case iDeletedCount
    Case 0
        WScript.Echo "No matching keys found"
    Case -1
        WScript.Echo "No subkeys found below HKLM\"&cRegKeyStartingPath
    Case Else
        WScript.Echo "Deleted " & iDeletedCount & " keys"
End Select

Function customRegRead(sRegValue)

    Dim oShell
    Dim sRegReturn

    Set oShell = CreateObject("WScript.Shell")

    On Error Resume Next
    Err.Clear
    sRegReturn = oShell.RegRead(sRegValue)
    If Err.Number<>0 Then
        customRegRead = "Failed To Read Value"
    Else
        customRegRead = sRegReturn
    End If  

End Function

Sub DeleteRegKey(sKey)

    Dim oShell
    Set oShell = CreateObject("Wscript.Shell")
    oShell.RegDelete sKey

End Sub 
```

如果有更清洁/更好的东西，请告知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:23:15.787

我建议删除所有出现的`On Error Resume Next`WMI 方法并坚持使用。此外，您当前的代码不使用递归，因此您只能在`cRegKeyStartingPath`. 您需要递归来遍历任意深度的树。

用于[`EnumValues`](http://msdn.microsoft.com/en-us/library/aa390388)枚举给定键的值：

```
rc = reg.EnumValues(HKLM, key, names, types) 
```

该方法在成功时返回 0，因此您可以通过评估返回码来检查错误。调用完成后，变量`names`包含一个数组，其中包含值的名称`key`，或者`Null`如果键不包含任何值（即缺少默认值）。因此，用于检查给定键中是否存在特定值的代码可能如下所示：

```
reg.EnumValues HKLM, key, names, types
If Not IsNull(names) Then
  For Each name In names
    If name = "foo" Then
      reg.GetStringValue HKLM, key, name, data
      If data = "bar" Then
        'delete key here
        Exit For
      End If
    End If
  Next
End If 
```

您可以通过枚举给定键的子键[`EnumKey`](http://msdn.microsoft.com/en-us/library/aa390387)并递归到这些子键中来遍历注册表：

```
Sub TraverseRegistry(root, key)
  reg.EnumKey root, key, subkeys
  If Not IsNull(subkeys) Then
    For Each sk In subkeys
      TraverseRegistry root, key & "\" & sk
    Next
  End If
End Sub 
```

要删除密钥，请使用该[`DeleteKey`](http://msdn.microsoft.com/en-us/library/aa389869)方法。必须删除哪个键的信息是您已经拥有的信息：它是`key`值枚举例程中的变量值，当`found`它为真时。但是，您不能删除具有子键的键，因此您必须先删除*这些*子键。您可以从上面重复使用遍历例程的东西：

```
Sub DelKey(root, key)
  reg.EnumKey root, key, subkeys
  If Not IsNull(subkeys) Then
    For Each sk In subkeys
      DelKey root, key & "\" & sk  'delete subkeys first
    Next
  End If
  'at this point all subkeys have already been deleted, so we can
  'now delete the parent key
  reg.DeleteKey root, key
End Sub 
```

把所有东西放在一起，你会得到这样的东西：

```
Const HKLM = &h80000002

Const StartKey    = "SOFTWARE\Wow...ion\Uninstall"
Const SearchValue = "DisplayName"
Const MatchData   = "Ossec HIDS"

Set reg = GetObject("winmgmts://./root/default:StdRegProv")

FindAndDeleteKey HKLM, StartKey, SearchValue, MatchData

Sub FindAndDeleteKey(root, key, value, data)
  reg.EnumValues HKLM, key, names, types
  If Not IsNull(names) Then
    For Each name In names
      If name = value Then
        reg.GetStringValue HKLM, key, name, regdata
        If regdata = data Then
          DelKey root, key
          Exit Sub
        End If
      End If
    Next
  End If

  'value not found in current key => continue search in subkeys
  reg.EnumKey root, key, subkeys
  If Not IsNull(subkeys) Then
    For Each sk In subkeys
      FindAndDeleteKey root, key & "\" & sk, value, data
    Next
  End If
End Sub

Sub DelKey(root, key)
  reg.EnumKey root, key, subkeys
  If Not IsNull(subkeys) Then
    For Each sk In subkeys
      DelKey root, key & "\" & sk  'delete subkeys first
    Next
  End If
  'at this point all subkeys have already been deleted, so we can
  'now delete the parent key
  reg.DeleteKey root, key
End Sub 
```

由于您正在寻找具有特定数据的特定值，您甚至可以简化`FindAndDeleteKey()`为：

```
Sub FindAndDeleteKey(key)
  'Try to read the value directly. If the value doesn't exist this will
  'simply return a non-zero return code and set data to Null.
  reg.GetStringValue HKLM, key, SearchValue, data
  If Not IsNull(data) Then
    'value does exist
    If data = MatchData Then
      DelKey HKLM, key
      Exit Sub
    End If
  End If

  'value not found in current key => continue search in subkeys
  reg.EnumKey HKLM, key, subkeys
  If Not IsNull(subkeys) Then
    For Each sk In subkeys
      FindAndDeleteKey key & "\" & sk
    Next
  End If
End Sub 
```

* * *

**编辑：**下面是生成一些调试输出的版本。通过在命令提示符下运行它`cscript debug_sample.vbs`。请注意，由于您要删除 HKLM 中的内容，**因此必须**在启用 UAC 时“以管理员身份”运行脚本。

```
Const HKLM = &h80000002

Const StartKey    = "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall"
Const SearchValue = "DisplayName"
Const MatchData   = "Ossec HIDS"

Set reg = GetObject("winmgmts://./root/default:StdRegProv")

FindAndDeleteKey StartKey

Sub FindAndDeleteKey(key)
  WScript.Echo "[HKLM\" & key & "]"
  rc = reg.GetStringValue(HKLM, key, SearchValue, data)
  If Not IsNull(data) Then
    WScript.Echo """" & SearchValue & """=""" & data & """"
    If data = MatchData Then
      DelKey HKLM, key
      Exit Sub
    End If
  Else
    WScript.Echo "'" & SearchValue & "' not found in [HKLM\" & key & "], rc=" & rc
  End If

  reg.EnumKey HKLM, key, subkeys
  If Not IsNull(subkeys) Then
    For Each sk In subkeys
      FindAndDeleteKey key & "\" & sk
    Next
  End If
End Sub

Sub DelKey(root, key)
  reg.EnumKey root, key, subkeys
  If Not IsNull(subkeys) Then
    For Each sk In subkeys
      DelKey root, key & "\" & sk
    Next
  End If
  rc = reg.DeleteKey(root, key)
  WScript.Echo "Deleting [HKLM\" & key & "], rc=" & rc
End Sub 
```

我能够使用无效`hDefKey`值重现返回代码 6（句柄无效），例如`&h8000002`（只有 7 位数字）或`h80000002`（缺少 & 号）。

# pointers - 相对于 RAM、架构的指针大小

> ID：15344505
> 
> 赞同：0
> 
> 时间：2013-03-11T17:12:20.840
> 
> 标签：pointers, architecture, size, ram

有很多问题决定了指针的大小。基本上，根据经验，您可以说这是处理器架构，

> x86 -> 4 字节指针
> 
> x64 -> 8 字节指针

我也看到这里有些人说是系统总线负责它，但其他人否认。假设架构告诉我指针的大小是多少。

要寻址 4GB 的 RAM，您需要 4,294,967,296 个映射，大小为 4 字节的指针可以寻址 4,294,967,296 个内存位置。

要寻址 8GB 的​​ RAM，您需要 8,589,934,592 个映射，并且大小为 4 字节的指针无法寻址所有可能的值。所以这就是为什么我不能在 x86 架构上拥有超过 4GB 的 RAM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:57:20.983

RAM 的数量不受架构（32 位或 64 位）的限制。架构仅决定操作系统和在其上运行的程序**一次**可以寻址多少内存。在 32 位机器上，即具有 32 位宽内存总线的机器上，操作系统和程序只能“看到”4 GB 的内存。但这并不意味着只有 4 GB 的 RAM。如果制造商提供了它，您可以拥有 16 GB 或 4x4 GB 的 RAM。在这种情况下，将有 2 条“隐藏”地址线，并且还会有硬编码逻辑来决定这两条线的级别，从而选择任何可用的 4 GB RAM -`00 01 10 11`. 这些“隐藏”的地址位不被软件层使用，因此对于这些层，它们只能使用一个 4 字节的指针。这些“隐藏”地址行的数量决定了您可以扩展多少 RAM。

这只是一个例子。这取决于供应商，他们决定如何提供额外的 RAM。

# javascript - IE10 延迟渲染，用于快速定位变化

> ID：15344506
> 
> 赞同：1
> 
> 时间：2013-03-11T17:12:23.260
> 
> 标签：javascript, css, box2d, box2dweb

我正在为 box2djs 创建一个渲染引擎，它使用页面上的元素来渲染而不是画布，因为与在 Canvas 上实现相同的效果相比，设置样式和操作元素要容易得多。

无论如何，*Chrome*（一如既往地最好）始终以 60fps 的速度完美呈现它，而*IE10*在处理许多元素（在我的机器上大约 20+）时开始滞后。

事情是 IE10 在 WebKit Sunspider 中击败了 V8（Chrome 的 JS 引擎），所以我不明白为什么在 IE10 上它会比 Chrome 更滞后。

# 为什么 IE10 开始滞后而 Chrome 没有如果更快？

我唯一的猜测是 IE10 的页面渲染速度较慢，并且无法处理那么多重绘（每秒 60 次）。

这是我的渲染代码：

### JS

```
function drawShape(shape) {
    if (shape.m_type === b2Shape.e_circleShape) {
        var circle = shape,
            pos = circle.m_position,
            r = circle.m_radius,
            ax = circle.m_R.col1,
            pos2 = new b2Vec2(pos.x + r * ax.x, pos.y + r * ax.y);
        var div = document.getElementById(shape.GetUserData());
        if (div != undefined) {
            var x = shape.m_position.x - shape.m_radius,
                y = shape.m_position.y - shape.m_radius,
                r = circle.m_radius;
            div.style.left = x + "px";
            div.style.top = y + "px";
        }
    } else {
        var poly = shape;
        var div = document.getElementById(shape.GetUserData());
        if (div != undefined) {
            var x = poly.m_position.x - (poly.m_vertices[0].x),
                y = poly.m_position.y - (poly.m_vertices[0].y);
            div.style.left = x + "px";
            div.style.top = y + "px";
        }
    }
} 
```

如果你不熟悉 box2d，这个函数会为每个形状调用，`drawWorld()`并`drawWorld()`在每个刻度中调用。我将刻度设置为 1000/60 毫秒，或每秒 60 帧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:53:01.943

我的预感是 IE10 在你的页面`repaint`中挣扎。`reflow`因此，当您在页面上渲染元素并移动它们时（以及它们的样式），它会导致大量的重绘。至于为什么它的性能比 Chrome 差，可能是因为底层的布局/渲染引擎。

*   IE 使用真正由您开发的**[Trident 引擎](http://en.wikipedia.org/wiki/Trident_%28layout_engine%29)**，Mircosoft，并且自 IE4 以来一直存在。

*   另一方面，Chrome 使用**[Webkit](http://en.wikipedia.org/wiki/WebKit)**以及 Safari 和最近的 Opera。

Nicole Sullivan 有一篇很好的文章解释了重绘/回流过程： http: [//www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)

如果您想提高页面在 IE10 上的性能，也许使用`canvas`是您的答案。

# jquery - 如何使用 pivot.js 设置多个过滤器

> ID：15344511
> 
> 赞同：0
> 
> 时间：2013-03-11T17:12:47.390
> 
> 标签：jquery, filter, datatables, pivot

我想将多个过滤器与 pivot.js 一起使用它很容易使用不同的列，如下所示：

filters{'Animal':'Elephant','Colour':'Pink','Eyes':'2'} 给所有 2 只眼睛的粉红色大象

但是如果我需要创建一组过滤器，例如：--

过滤器{'Animal':'Elephant','Animal':'Giraffe','Animal':'Armadillo'} 给大象，长颈鹿和犰狳，但这只是让我回到'Armadillos'的最后一个

我尝试了各种做“或”语句的方法，但都没有奏效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:40:05.770

好吧，我终于明白了

首先需要将过滤器类型设置为正则表达式，以便我们可以使用正则表达式进行过滤

{name:'Animal', type:'string', filterable:true, **filterType:'regexp'** }

然后过滤器需要我们一个像这样的正则表达式

过滤器{'动物'：**/大象|长颈鹿|犰狳/** }

# complexity-theory - 比 O(n^2) 算法更好地在包含前 1000 个整数中的 999 个的数组中查找缺失的整数

> ID：15344512
> 
> 赞同：2
> 
> 时间：2013-03-11T17:12:50.777
> 
> 标签：complexity-theory

假设我有一个包含 999 个单元格的数组，其中包含 1-1000 之间的所有数字，但一个数字除外。找到这个号码的最有效方法是什么？我找不到比 O(n squared) 更好的方法。面试官告诉我有更好的方法。我该怎么做？

未排序的数组。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T17:14:02.100

从 1 到 1000 的所有数字的总和是一个已知值。计算数组中数字的总和，然后将两者相减，得出差值。

[我们知道 1..n 的总和是](http://en.wikipedia.org/wiki/1_+_2_+_3_+_4_+_%E2%8B%AF) `n(n+1)/2`。这是数学中相当常见的结果，但是如果您不熟悉它，可以使用各种技术自己推导出它。

因此，您只需要将数组中的数字相加，然后从上面的值中减去该值，您就会知道缺少什么。

在代码中，这将类似于：

```
int findMissing(int [] inputArray) {
    //In the above scenario, inputArray.size() would be 999
    int range = inputArray.size() + 1;   //so, range is 1000
    int expected = range * (range + 1) * 0.5;  //we expect the sum to be 500,500
    int sum = 0;
    for (int x: inputArray) {
       sum += x;
    }
    //the missing number is the difference between what we expected, and what we found
    return expected - sum; 
```

这将是一个 O(n) 结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:15:43.567

像那样：

```
 int sum = (1000 * 1001) / 2; // sum of the n first integers is: n*(n+1)/2
 for(int i : array) {
    sum -= i;
 }
 return sum; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T17:18:42.497

您可以使用求和， [http://betterexplained.com/articles/techniques-for-adding-the-numbers-1-to-100/](http://betterexplained.com/articles/techniques-for-adding-the-numbers-1-to-100/) ，然后从求和中减去所有单元格的总和。

```
missingDigit = (Summation - totalFromCells); 
```

# c++ - 在 C++ 中连接一个 char 2D 数组元素和 int

> ID：15344521
> 
> 赞同：-4
> 
> 时间：2013-03-11T17:13:27.703
> 
> 标签：c++, char, int, concat

我有一个二维字符数组，

```
static char a[25][25]; 
```

考虑用数字填充的矩阵。
主要代码：

```
for(i=0;i<25;i++){
if(a[pos][pos]!='0'){
            strcpy(result,(char)i);
            strcat(a[pos][pos],result);
        }} 
```

'pos' 是我生成的数字。我想将其中的一个元素连接起来，比如 a[i][j] 和整数“i”。我尝试了该站点上的一些帖子，但它们仍然给我不同的错误

```
error: invalid conversion from ‘char’ to ‘const char*’ [-fpermissive]
/usr/include/c++/4.6/bits/basic_string.tcc:214:5: error:   initializing argument 1 of ‘std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ [-fpermissive]
matrix.cpp:42:58: error: invalid conversion from ‘char’ to ‘const char*’ [-fpermissive]
/usr/include/c++/4.6/bits/basic_string.tcc:214:5: error:   initializing argument 1 of ‘std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ [-fpermissive] 
```

我是新手。谁能解释一下我哪里出了问题以及解决它的最佳方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:21:01.837

如果没有更多细节，这有点难以回答，但它就在这里..

数组中的每个元素（如 a[i][j]）都是类型`char`

这意味着它基本上是**一个**字符

你不能真正连接一个整数并将它放在一个单一的`char`，对于初学者来说，整数本身比你的整数大（按字节），`char`所以显然它不适合在那里

也许您真的想使数组中的每个元素都成为**字符串**（多个字符）而不是单个字符。如果是这种情况，每个元素可能都需要是 type `char*`，所以你会得到：

```
static char* a[25][25]; 
```

如果这样做，您将需要分配字符串（使用`new`or `malloc`）并使用标准库的各种字符串处理函数（接受`char*`作为参数）处理它们。如果我根据你得到的错误猜对了，那就是你想要做的......

# ruby-on-rails - rails中未定义的方法`@'

> ID：15344524
> 
> 赞同：0
> 
> 时间：2013-03-11T17:13:34.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

有人知道为什么

```
hash['City'] = {}
hash['City']['answer0'] = 'foo' 
```

得到以下错误：

```
undefined method `+@' for {"answer0"=>"foo"}:Hash 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:01:08.720

如果您想拥有“多维”哈希，您需要正确定义哈希，如下所示：

```
a = Hash.new { |hash, key| hash[key] = Hash.new(&hash.default_proc) } 
```

然后你可以这样做：

```
a['city']['answer0'] = 'foo' 
```

# r - if/else 建议包描述

> ID：15344530
> 
> 赞同：7
> 
> 时间：2013-03-11T17:13:41.113
> 
> 标签：r, package

有没有办法在依赖于操作系统类型的包的建议字段中执行 ifelse 语句。例如，该`installr`软件包对 Windows 用户来说会很好，并且与软件包密切相关，但它仅适用于 Windows 用户。这意味着将在 Mac 或 Linux 用户的 CRAN 检查中提出注释。

目前我有一个看起来像这样的包：

```
Package: awesomeR
Type: Package
Title: A collection of awesomeness
Version: 0.1.2
Date: 2013-02-18
Author: Guy Smiley
Maintainer: Guy <guy@gmail.com>
Description: it's pretty nifty
License: GPL-2
URL: http://crazyville
LazyData: TRUE
Depends:
    R (>= 2.15)
Suggests:
    pander,
    installr, 
```

也许答案是建议（并接受注释）或不建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:57:19.820

我认为您不需要根据操作系统对 Suggests 进行特殊开关来进行 cran 检查。

如果它在特定平台上/对于特定平台不存在，它将不会被安装。我认为这样的软件包甚至不会出现在 CRAN 依赖项中。

就我而言 - 建议的软件包提示附加选项并扩展示例和功能，但对您的软件包并不重要，很多用户不会错过它们......但即使一个是 Linux 或 MAC 用户，我认为很高兴知道有可用的建议包......如果他们愿意，他们可以在不同的平台上使用它。

所以我的回答是——建议。

另外我认为我们无论如何都应该努力实现跨平台包=）

# .net - Visual Studio 2012 和 Resharper 的 goto 实现

> ID：15344532
> 
> 赞同：12
> 
> 时间：2013-03-11T17:13:57.467
> 
> 标签：.net, visual-studio-2012, resharper

在我的情况下，我可以在 ASP MVC 项目的控制器类中编写代码并使用“转到实现”功能 (Ctrl+f12)，然后它不会转到我的实现，而是显示一个弹出窗口，要求我在实现之间进行选择在我的源代码或 DLL 中的实现中。

我几乎不想深入研究 DLL，所以我的问题是：在搜索要导航到的实现时，有没有办法配置 resharper、Visual Studio 或其他忽略我的 DLL 的方法。我试过寻找，但无法在选项或互联网上找到任何相关的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-18T04:02:46.863

Resharper 8 在 Visual Studio 2012 中有菜单：

```
Resharper -> Options -> Tools -> External Sources 
```

通过外部代码进行导航的选项很少，也许您可​​以在那里找到一些有用的选项。抱歉回答类型 - 仍然无法发表评论。

# sqlalchemy - 具有未知鉴别器列的 Sqlalchemy 声明性 STI 多态加载程序

> ID：15344533
> 
> 赞同：1
> 
> 时间：2013-03-11T17:13:57.933
> 
> 标签：sqlalchemy, polymorphism

```
class Base(DBO):
    __tablename__ = 't'
    __mapper_args__ = {'polymorphic_on': 'typ'}
    id = Column(Integer, primary_key=True)
    typ = Column(String)

class ChildA(Base):
    __mapper_args__ = {'polymorphic_identity':'a'}

class ChildB(Base):
    __mapper_args__ = {'polymorphic_identity':'b'}

S.query(Base).all() 
```

这对表中的所有 typ='a' 和 typ='b' 都很有效，但是假设多态加载程序遇到 'c'？

我想要的是为任何未知的 PMI 取回 Base() 的实例，我目前收到错误消息：`No such polymorphic identity 'c' is defined`

编辑：使用 SA 0.8.0b2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:12:04.963

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Root(Base):
    __tablename__ = 't'
    id = Column(Integer, primary_key=True)
    typ = Column(String)

    def __repr__(self):
        return "%s(typ=%r)" % (self.__class__.__name__, self.typ)

    __mapper_args__ = {
                'polymorphic_on': case([(typ.in_(['a', 'b']), typ)], else_='t'),
                'polymorphic_identity': 't'
                }

class ChildA(Root):
    __mapper_args__ = {'polymorphic_identity': 'a'}

class ChildB(Root):
    __mapper_args__ = {'polymorphic_identity': 'b'}

e = create_engine("sqlite://", echo=True)
Base.metadata.create_all(e)

e.execute(
        Root.__table__.insert(), [
            {'typ': 'a'},
            {'typ': 'a'},
            {'typ': 'b'},
            {'typ': 'a'},
            {'typ': 'c'},
            {'typ': 't'},
        ]
    )

print Session(e).query(Root).all() 
```

输出，数据插入后：

```
SELECT t.id AS t_id, t.typ AS t_typ, 
    CASE WHEN (t.typ IN (?, ?)) THEN t.typ ELSE ? END AS _sa_polymorphic_on 
FROM t
('a', 'b', 't')
[ChildA(typ=u'a'), ChildA(typ=u'a'), ChildB(typ=u'b'), ChildA(typ=u'a'), Root(typ=u'c'), Root(typ=u't')] 
```

# java - 以编程方式调用 actionListener

> ID：15344543
> 
> 赞同：0
> 
> 时间：2013-03-11T17:14:23.523
> 
> 标签：java, jsp, download, actionlistener, oracle-adf

我有一个用例，我想以编程方式调用绑定到 commandButton 的 fileDownloadActionListener。我不想在 jspx 级别调用它。基本上我想有条件地调用fileDownloadActionListener。如果一个方法返回 true，那么我调用它，否则我不调用它。如果我在 jspx 级别有 fileDownloadActionListener，那么在单击调用它的 commandButton 时，它会立即触发弹出窗口，但我想在触发它之前执行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:27:10.340

这并不像看起来那么简单。这`fileDownloadActionListener`是一个客户端行为标签，因此您不能只对按钮的操作进行排队。您必须调用为您执行此操作的 JavaScript 方法。

我在这里写了这个解决方案[。](https://tompeez.wordpress.com/2011/07/14/validate-data-before-export-via-afexportcollectionactionlistener-or-affiledownloadactionlistener/)

# linux - 如何在 linux 中查看 stderr 输出

> ID：15344547
> 
> 赞同：8
> 
> 时间：2013-03-11T17:14:39.743
> 
> 标签：linux, perl

在 perl 的脚本中，我有以下内容：

```
print STDERR "Access error" 
```

我想知道这条消息的打印位置，但我不知道如何在 LInux 中看到标准错误输出。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T17:16:38.647

标准 ( `STDOUT`) 和错误输出 ( `STDERR`) 都显示在您的（伪）终端上。

如果要跟踪输出：

错误日志：

```
./script.pl 2> err.log 
```

标准输出日志：

```
./script.pl > out.log 
```

两者都`STDERR`在`STDOUT`同一个文件中：

```
./script.pl > out.log 2>&1 
```

或使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")：

```
./script.pl &> out.log 
```

一个很好的[教程](http://mywiki.wooledge.org/Redirection)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-11T17:18:09.133

它会打印到为您的环境设置标准错误的任何位置。

如果你从控制台运行它，那么它将与标准输出混合并显示在控制台上（如果你重定向 STDOUT，它不会被重定向，你必须单独重定向它）。

如果您在 Apache 下从 CGI 运行它，那么它将被放入您的 error.log 文件中（无论 Apache 配置为保存该文件的位置）。

如果您从其他地方运行它……那么详尽的列表超出了 Stackoverflow 的范围，因此您应该尝试提出更具体的问题；）

它可能在控制台上被定向到的示例：

```
david@raston err $ cat err.pl
#!/usr/bin/env perl

use strict;
use warnings;
use v5.16;

say "out";
say STDERR "error";
~/tmp/err :
david@raston err $ ./err.pl
out
error
~/tmp/err :
david@raston err $ ./err.pl > stdout
error
~/tmp/err :
david@raston err $ ./err.pl 2> stderr
out 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T17:48:56.097

通常，STDOUT 和 STDERR 都输出到您的终端。

```
$ perl -e'print "foo\n"; print STDERR "bar\n";'
foo
bar 
```

但是可以重定向其中一个和两个。

```
$ perl -e'print "foo\n"; print STDERR "bar\n";' 2>stderr.log
foo

$ cat stderr.log
bar 
```

例如，由 CGI 脚本发送到 STDERR 的数据通常以 Web 服务器配置中指定的日志文件结束。

程序可以在 linux 系统上获取有关 STDERR 的信息。

```
$ perl -e'system "ls -l /proc/$$/fd"' 2>stderr.log |cat
total 0
lrwx------ ... 0 -> /dev/pts/1
l-wx------ ... 1 -> pipe:[210178663]            <-- STDOUT is a pipe
l-wx------ ... 2 -> /home/ikegami/stderr.log    <-- STDERR is a file
lr-x------ ... 3 -> pipe:[210178668] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T17:16:45.270

您需要在终端中运行 Perl 脚本。根据您的系统上是否有 X，您可以使用`xterm`或使用虚拟控制台 ( `tty1-7`) 来运行您的脚本。两者`stderr`都`stdout`连接到这些设备。

# c# - 以编程方式创建的 DataTable 列 MaxLength 错误

> ID：15344552
> 
> 赞同：0
> 
> 时间：2013-03-11T17:14:52.207
> 
> 标签：c#, asp.net

我有一种情况需要修改现有的`DataTable`. @Shai Cohen 提供了代码，但由于实时数据不同，我正在修改的列上出现异常 MaxLimit 违规。

我试图更改代码中的 with 但它不断抛出错误。这是代码（请参阅我的评论）：

```
public DataTable PrepareDataTable(DataTable dtResults)
{
   string[] subCategories = new string[3] {"Critical Down Time", "Critical Outage", "Total Repair Time"};

    DataTable dtOutput = dtResults.Clone();
    DataRow drOutput = null;
    DataRow[] drResults = null;
    var categories = dtResults.AsEnumerable().Select(r => r["Category"]).Distinct().ToList();

    foreach (string category in categories)
    {
        for (int i = 0; i < subCategories.Length    ; i++)
        {
            drOutput = dtOutput.NewRow();
            drOutput["Category"] = category;
            drOutput["SubCategory"] = subCategories[i];
            drResults = dtResults.Select(String.Format("Category = '{0}' AND SubCategory = '{1}'", category, subCategories[i]));
            if(drResults.Length > 0)
            {
                foreach(DataColumn column in dtResults.Columns)
                {

                     drOutput[column.ColumnName] = drResults[0][column.ColumnName];
    **I've tried**   drOutput[column.MaxLength] = Unit.Pixel(500);
    **or just a number but no use**       

                }
            }
     **Error >>>** dtOutput.Rows.Add(drOutput);
        }

        drOutput = dtOutput.NewRow();
        dtOutput.Rows.Add(drOutput);
    }
    return dtOutput;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:23:01.867

您的线路：

```
drOutput[column.MaxLength] 
```

正在尝试从行中获取特定列...在这种情况下，不是第一列或第二列，而是 column.MaxLength 列。

尝试：

```
drOutput.Table.Columns[column.ColumnName].MaxLength = some_length; 
```

# ruby-on-rails - 在生产轨道应用程序中，即使指示捆绑器跳过开发组，也会出现 Bundler::GemNotFound 错误

> ID：15344553
> 
> 赞同：0
> 
> 时间：2013-03-11T17:14:53.100
> 
> 标签：ruby-on-rails, bundler

在我的生产服务器上，我不想包含 gem rspec rails。但是，当尝试使用 rails 启动我的服务器时，出现错误：

```
/home/deployer/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.2/lib/bundler/spec_set.rb:92:in `block in materialize': Could not find rspec-rails-2.12.0 in any of the sources (Bundler::GemNotFound)
    from /home/deployer/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.2/lib/bundler/spec_set.rb:85:in `map!'
    from /home/deployer/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.2/lib/bundler/spec_set.rb:85:in `materialize'
    from /home/deployer/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.2/lib/bundler/definition.rb:114:in `specs'
    from /home/deployer/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.2/lib/bundler/definition.rb:159:in `specs_for'
    from /home/deployer/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.2/lib/bundler/runtime.rb:13:in `setup'
    from /home/deployer/.rvm/gems/ruby-1.9.3-p392/gems/bundler-1.3.2/lib/bundler.rb:127:in `setup'
    from /var/www/myapp/releases/20130311164742/config/boot.rb:8:in `<top (required)>'
    from /home/deployer/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/deployer/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from script/rails:5:in `<main>' 
```

我的 gemfile 看起来像：

```
source 'http://rubygems.org'
ruby "1.9.3"

gem 'rails', '3.2.11'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
end

gem 'haml', '3.1.7'
gem 'devise', '2.2.0'
gem 'koala', '1.6.0'
gem "mongoid", "~> 3.0.0"
gem "braintree", "~>2.22.0"

group :development, :test do
  gem 'rspec-rails', '2.12.0'
end 
```

在我的 config/boot.rb 文件中，我告诉 bundler 只查找默认包含的 gem 或相关环境：

```
require 'rubygems'

# Set up gems listed in the Gemfile.
ENV['BUNDLE_GEMFILE'] ||= File.expand_path('../../Gemfile', __FILE__)

if File.exists?(ENV['BUNDLE_GEMFILE'])
  require 'bundler'
  Bundler.setup(:default, ENV["RAILS_ENV"])
end 
```

我已经验证 RAILS_ENV 环境变量设置为生产，通过运行：

```
$ echo $RAILS_ENV 
```

并恢复“生产”。

为什么即使我告诉它不要设置它，它仍然在寻找那个宝石？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:19:06.990

那是错字吗？`echo $RAILS_ENV`. 您缺少 Rails 中的“s”。

# jquery - 复选框已禁用和启用

> ID：15344554
> 
> 赞同：0
> 
> 时间：2013-03-11T17:14:53.893
> 
> 标签：jquery, checkbox

我希望仅在选中另一个复选框时启用（默认情况下）禁用复选框。这允许我检查新启用的复选框。问题在于表单提交，如果选中另一个复选框，则该复选框应保持启用状态。

```
<input type="checkbox" class="checkbox1" id="checkbox1" name="vehicle" value="Bike">I am enabled and must be clicked<br>
<input type="checkbox" class="checkbox2" id="checkbox2" name="vehicle" value="Car" disabled>I am waiting to be enabled 
```

我正在寻找 jquery，我没有任何 jquery 代码可以显示，因为我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:18:08.510

您可以使用更改功能查看复选框何时被选中，以及从那里启用和禁用的逻辑。

```
$("#checkbox1").change(function() {
    if (this.checked) {
        $("#checkbox2").prop("disabled", false);
    }
    else {
        $("#checkbox2").prop("disabled", true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:21:15.627

如果您需要在取消选中第一个复选框后禁用第二个复选框，请使用以下命令：

```
$('#checkbox1').click(function () {
    $('#checkbox2').prop('disabled', !$(this).is(':checked'));
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ANZ7x/)**

否则就用这个：

```
$('#checkbox1').click(function () {
    $('#checkbox2').prop('disabled', false);
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ANZ7x/1/)**

# c# - 带有数字签名和嵌入图像的电子邮件

> ID：15344555
> 
> 赞同：4
> 
> 时间：2013-03-11T17:14:59.417
> 
> 标签：c#, email, embedded-resource, digital-signature

我有以下用于发送数字签名电子邮件的工作代码。我必须插入一个带有 gif 徽标的基于 html 的签名，该签名应该从程序集资源中提取。我四处搜索并找到`Convert.ToBase64String()`了可能的解决方案，但 Outlook 不显示图像。第二种方法是`LinkedResource`嵌入`AlternateView`我的图像，但实际上我无法让它与下面的代码一起工作。我已经有了`AlternateView`要发送带有数字签名的电子邮件。是否也可以以某种方式添加图像？

所以`mailer(to, from, from_name, relay, subject, body, cc1, cc2);`。

```
private void mailer(string toaddress, string fromaddress, string fromaddress_disp, string relays, string mailsubject, string bodytext, string ccman, string cccct)
{
    string certname = "";

    MailAddress from = new MailAddress(fromaddress, fromaddress_disp);
    MailAddress to = new MailAddress(toaddress);
    MailAddress cc_man = new MailAddress(ccman);
    MailAddress cc_cct = new MailAddress(cccct);
    MailMessage message = new MailMessage(from, to);
    message.CC.Add(cc_man);
    message.CC.Add(cc_cct);
    message.Subject = mailsubject;
    message.IsBodyHtml = true;
    string body = "Content-Type: text/html; charset=iso-8859-1 \r\nContent-Transfer-Encoding: 8bit\r\n\r\n" + bodytext;
    byte[] messageData = Encoding.ASCII.GetBytes(body);
    ContentInfo content = new ContentInfo(messageData);

    SignedCms Cms = new SignedCms(new ContentInfo(messageData));
    X509Store store = new X509Store(StoreLocation.CurrentUser);
    store.Open(OpenFlags.ReadOnly);

    RSACryptoServiceProvider csp = null;
    X509Certificate2Collection certCollection = store.Certificates;
    X509Certificate2 cert = null;
    foreach (X509Certificate2 c in certCollection)
    {
        if ((c.Subject.Contains("myEmailAddress")) && (c.FriendlyName.Contains("CompanyEmailDigSig")))
        {
            cert = c;
            break;
        }
    }

    if (cert != null)
    {
            csp = (RSACryptoServiceProvider)cert.PrivateKey;
    }
    else
    {
        throw new Exception("Valid certificate was not found");
    }

    CmsSigner Signer = new CmsSigner(SubjectIdentifierType.IssuerAndSerialNumber, cert);
    Cms.ComputeSignature(Signer);
    byte[] SignedBytes = Cms.Encode();
    MemoryStream signedStream = new MemoryStream(SignedBytes);
    AlternateView signedView = new AlternateView(signedStream, "application/pkcs7-mime; smime-type=signed-data; name=sig.p7m");
    message.AlternateViews.Add(signedView);
    SmtpClient client = new SmtpClient(relays);
    store.Close();

    try
    {
        client.Send(message);
    }
    catch (Exception ex)
    {
    //exception
    }
} 
```

编辑：我不得不重新打开这个线程，因为之前接受的答案不够好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T14:15:11.800

我确实认为不可能使用`System.Net.Mail`. 但这也可能对您有所帮助：-**[在 C# 教程中发送电子邮件 - SSL、HTML、嵌入式图像、S/MIME](http://www.emailarchitect.net/easendmail/dev/csharp.asp)**

还要检查这个：-（**[发送带有嵌入图像的电子邮件 - ImportHtml - 示例](http://www.emailarchitect.net/easendmail/kb/csharp.aspx?cat=8)**）：-

```
using System;
using System.Collections.Generic;
using System.Text;
using EASendMail; //add EASendMail namespace

namespace mysendemail
{
    class Program
    {
        static void Main(string[] args)
        {
            SmtpMail oMail = new SmtpMail("TryIt");
            SmtpClient oSmtp = new SmtpClient();

            // Set sender email address, please change it to yours
            oMail.From = "test@emailarchitect.net";

            // Set recipient email address, please change it to yours
            oMail.To = "support@emailarchitect.net";

            // Set email subject
            oMail.Subject = "test html email with attachment";

            // Your SMTP server address
            SmtpServer oServer = new SmtpServer("smtp.emailarchitect.net");

            // User and password for ESMTP authentication, if your server doesn't require
            // User authentication, please remove the following codes.            
            oServer.User = "test@emailarchitect.net";
            oServer.Password = "testpassword";

            // If your SMTP server requires SSL connection, please add this line
            // oServer.ConnectType = SmtpConnectType.ConnectSSLAuto;

            try
            {
               // Import html body and also import linked image as embedded images.
               oMail.ImportHtml( "<html><body>test <img src=\"test.gif\"> importhtml</body></html>",
                    "c:\\my picture", //test.gif is in c:\\my picture
                    ImportHtmlBodyOptions.ImportLocalPictures | ImportHtmlBodyOptions.ImportCss );

                Console.WriteLine("start to send email with embedded image...");
                oSmtp.SendMail(oServer, oMail);
                Console.WriteLine("email was sent successfully!");
            }
            catch (Exception ep)
            {
                Console.WriteLine("failed to send email with the following error:");
                Console.WriteLine(ep.Message);
            }
        }
    }
} 
```

# java - 带有 GUI 的 Java Swing 独立内核

> ID：15344560
> 
> 赞同：1
> 
> 时间：2013-03-11T17:15:13.540
> 
> 标签：java, swing, edt

我不明白如何将程序的核心与程序的 GUI 部分分开。实际上，网络上的所有示例都表明任何 GUI 操作都必须使用 SwingUtilities.invokeLater() 方法执行。

问题是我不明白如何使用此方法仅处理我的 GUI 部分以及核心和 GUI 如何进行通信。

例如，我有一个类具有一些计算的 GUI 显示的责任：

```
public class GUI {
  private JFrame window;

  public GUI() {
    window = null;
  }

  public void createWindow(int width, int height) {
    window = new JFrame();
    ...
    window.setVisible(true);
  }

  public void displayResults(Calcul results) {
    /* Some Swing actions. */
  }
} 
```

我有我的程序的核心：

```
public class Core {
  public static void main(String[] args) {
    GUI gui = new GUI();
    Calcul calculs = new Calcul();

    while (true) {
      /* Make some calculations. */
      /* Put results into calcul. */
      displayResults(calculs);
    }
  }
} 
```

我知道这种架构并不理想，但我不得不使用它。我的问题是，我是否使用 EDT 将 GUI 部分和核心部分分开？而且，如果答案是肯定的，我该怎么做？

如果可能的话，我需要 EDT 调用对使用 GUI 类的用户是透明的。

**编辑：**

GUI 类的以下转换是否具有预期的行为？

```
public class GUI {
  private JFrame window;

  public GUI() {
    window = null;
  }

  public void createWindowEDT(final int width, final int height) {
    javax.swing.SwingUtilities.invokeLater(
      new Runnable() {
        public void run() {
          createWindow(width, height);
        }
      }
    );
  }

  private void createWindow(final int width, final int height) {
    window = new JFrame();
    ...
    window.setVisible(true);
  }

  public void displayResultsEDT(final Calcul results) {
    javax.swing.SwingUtilities.invokeLater(
      new Runnable() {
        public void run() {
          displayResultsEDT(results);
        }
      }
    );
  }

  private void displayResults(final Calcul results) {
    /* Some Swing actions. */
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:22:28.153

要将您的 GUI 代码放入 EDT，请使用[SwingUtilities](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html)类。您必须将 Runnable 实例传递给`invokeLater()`方法。

您也应该在 EDT 中创建您的 GUI（调用 GUI 构造函数）。

```
public static void main(String[] args) {

    GUI gui = null;
    Calcul calculs = new Calcul();

    SwingUtilities.invokeLater(
        new Runnable() {
             public void run() {
               gui = new GUI();
             }});

    while (true) {
    /* Make some calculations. */
    /* Put results into calcul. */
    javax.swing.SwingUtilities.invokeLater(
        new Runnable() {
             public void run() {
                 gui.displayResults(calculs);
             }});
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:26:54.400

问题是你不能在同一个线程中运行你的计算和你的 GUI。如果您这样做，您的 GUI 将在您的代码进行数字运算时冻结。一种方法是在单独的线程中运行您的计算，然后使用 SwingUtilities.invokeLater() 从该线程向您的 GUI 发出信号，告知它应该自行更新。例如：

```
public static void main(String[] args) {
    final GUI myGUI = new GUI();

    Thread workThread = new Thread(new Runnable() {
        public void run() {
            // do calculations

            SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    // update GUI
                    myGUI.updateMyResults();
                }
            });
        }
    });

    workThread.start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:03:26.770

您可以在`GUI`课堂上隐藏事件调度线程 (EDT) 的使用。只有与 Swing 组件的交互需要在 EDT 上，因为 Swing 组件通常不是线程安全的。

GUI 类中不需要任何同步，因为只有主应用程序线程会调用`GUI.displayResults(Calcul)`，但如果发生这种变化，您可能希望同步此方法或采取其他步骤来避免线程错误。

```
public class GUI
{
  ...

  public void displayResults(Calcul results) 
  {
    SwingUtils.invokeLater(
      new Runnable()
      {
        public void run()
        {
          /* Some Swing actions. */
        }
      }
    );
  }
} 
```

# php - 在ajax中返回foreach响应

> ID：15344562
> 
> 赞同：0
> 
> 时间：2013-03-11T17:15:14.750
> 
> 标签：php, mysql, ajax

```
$res = mysql_query("SELECT * FROM `basket` WHERE `account_id` = '$_SESSION[ID]'");
while($row = mysql_fetch_assoc($res)) {
        $search = $row['number'];
        echo $search;
} 
```

我正在尝试做的是对这个 PHP 文件使用 Ajax 调用，然后是我想要解析并放置在 div 中的“回显”数据，这是 Ajax 调用

```
$(document).ready(function() {
    var data = "func=basket";             
    $.ajax({
        url: "functions/ajax.php",
        data: data,
        type: "GET",
        success: function(data, textStatus, jqXHR){
            $("#response").html(data);
        },
        error: function (jqXHR, textStatus, errorThrown){
            console.log('Error ' + jqXHR);
        }
    });
}); 
```

但是我遇到的问题是它在处理每个数据之前`while($row etc..`都不会解析数据，我想逐个返回回显行 1，我将如何去做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:24:06.390

您在此处查找的函数称为[flush](http://php.net/flush)，这将允许您刷新 Web 服务器（Apache、Nginx 等）的写入缓冲区。

```
$pdo = new PDO('mysql:dbname=yourdb;host=127.0.0.1', 'root', '');
$sth = $pdo->prepare('SELECT * FROM `basket` WHERE `account_id`=?');
$sth->bindParam(1, $_SESSION['id'], PDO::PARAM_INT);
$sth->execute();

while($row = $sth->fetch(PDO::FETCH_ASSOC))
{
    echo $row['number'];
    flush();
} 
```

您还使用了已弃用的函数 ( `mysql_*`)，您应该考虑用 PDO 或 MySQLi 替换它们（我在帖子中已为您完成了此操作）。

注意：某些浏览器需要一定数量的数据才能显示内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:28:02.570

采取不同的方法怎么样...

```
while($row = mysql_fetch_assoc($res)) {
    $search[] = $row['number']; 
```

}

```
echo json_encode($search); 
```

在您的成功回调函数中，您只需使用 jQuery each() 遍历篮子元素的 json_encoded 数组

[循环通过json数组jquery](https://stackoverflow.com/questions/7771616/loop-through-json-array-jquery)

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

# php - 如何匹配第一组括号之间的所有内容？

> ID：15344573
> 
> 赞同：-2
> 
> 时间：2013-03-11T17:15:55.600
> 
> 标签：php, regex

如何通过 PHP 字符串解析第一组 { } 括号之间的所有内容。我该怎么做呢？该字符串包含多个括号集，但我只想抓住第一组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:17:10.917

尝试使用以下正则表达式：

```
^[^{]*{([^}]*) 
```

解释：

```
^       - string beginning
[^{]*   - any character except {
{       - desired {
([^}]*) - match every char except closing } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:18:40.750

试试正则表达式

```
$sample = "hello heooolloo {wooow} hiii hello ";
preg_match('/{(.*?)}/', $sample, $match);
echo $match[1]; //prints wooow 
```

# c# - Techart，Monodroid Java.Lang.IllegalArgumentException：pointerIndex 超出范围

> ID：15344576
> 
> 赞同：0
> 
> 时间：2013-03-11T17:16:06.937
> 
> 标签：c#, xamarin.android, xamarin, teechart

每次我尝试按下图表时，我都会得到以下堆栈跟踪（同样的错误：[http](http://www.teechart.net/support/viewtopic.php?f=4&t=13740) ://www.teechart.net/support/viewtopic.php?f=4&t=13740 ）：

```
Java.Lang.IllegalArgumentException: pointerIndex out of range
  at Android.Runtime.JNIEnv.CallFloatMethod (intptr,intptr,Android.Runtime.JValue[]) [0x00024] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:319

  at Android.Views.MotionEvent.GetX (int) [0x0002d] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.Views.MotionEvent.cs:383

  at Steema.TeeChart.Chart.spacing (Android.Views.MotionEvent) <IL 0x00009, 0x00077>

  at Steema.TeeChart.Chart.CheckZoomPanning (Android.Views.MotionEvent) <IL 0x0003b, 0x00177>

  at Steema.TeeChart.Chart.DoMouseDown (bool,Android.Views.MotionEvent) <IL 0x00266, 0x00de7>

  at Steema.TeeChart.TChart.OnMouseDown (Android.Views.MotionEvent) <IL 0x00014, 0x00093>

  at Steema.TeeChart.TChart.OnTouchEvent (Android.Views.MotionEvent) <IL 0x00002, 0x0004f>

  at Steema.TeeChart.ChartImageView.Android.Views.View.IOnTouchListener.OnTouch (Android.Views.View,Android.Views.MotionEvent) <IL 0x0052f, 0x0169f>

  at Android.Views.View/IOnTouchListenerInvoker.n_OnTouch_Landroid_view_View_Landroid_view_MotionEvent_ (intptr,intptr,intptr,intptr) [0x00018] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.Views.View.cs:1201

  at (wrapper dynamic-method) object.e537c44c-b66f-45e0-8d7d-2fc23299124c (intptr,intptr,intptr,intptr) <IL 0x0001d, 0x00053> 
```

--- 托管异常堆栈跟踪结束 ---

java.lang.IllegalArgumentException：pointerIndex 超出范围

```
at android.view.MotionEvent.nativeGetAxisValue(Native Method)

at android.view.MotionEvent.getX(MotionEvent.java:1981)

at steema.teechart.ChartImageView.n_onTouch(Native Method)

at steema.teechart.ChartImageView.onTouch(ChartImageView.java:69)

at android.view.View.dispatchTouchEvent(View.java:7122)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)

at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)

at android.app.Activity.dispatchTouchEvent(Activity.java:2396)

at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)

at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)

at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)

at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)

at android.app.Activity.dispatchTouchEvent(Activity.java:2396)

at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)

at android.view.View.dispatchPointerEvent(View.java:7307)

at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3174)

at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3119)

at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4155)

at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4134)

at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4226)

at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)

at android.os.MessageQueue.nativePollOnce(Native Method)

at android.os.MessageQueue.next(MessageQueue.java:125)

at android.os.Looper.loop(Looper.java:124)

at android.app.ActivityThread.main(ActivityThread.java:4745)

at java.lang.reflect.Method.invokeNative(Native Method)

at java.lang.reflect.Method.invoke(Method.java:511)

at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)

at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)

at dalvik.system.NativeStart.main(Native Method) 
```

我正在使用 teechart 的评估版进行单声道。顶部的链接提供了解决方案，但仅适用于付费客户。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:52:42.783

是的，[上周发布](http://www.steema.com/entry/145/TeeChart_for_Xamarin.Android_4.13.03.04_maintenance_release_available)了修复此问题的新注册和评估版安装程序 (TM63016457) 。请到[下载区](http://www.steema.com/clientaccess)下载新的评估版安装程序（build 4.13.03.04）。

# less - Grunt 0.4 少任务：如何不连接目标文件

> ID：15344584
> 
> 赞同：4
> 
> 时间：2013-03-11T17:16:44.797
> 
> 标签：less, gruntjs

我想从相应的 .less 文件生成 .css 部分文件

我使用 npm 提供的最新版本，grunt@0.4.0，grunt-contrib-less@0.5.0

在 Grunt 0.4 版之前，我可以简单地指定模式：

`htdocs/less/*.less`作为源

`htdocs/css/*.css`作为目的地

并且该文件夹中的所有文件`htdocs/less`都将生成到该文件夹​​中`htdocs/css`

由于 v0.4 目标模式不再起作用，文件夹中的所有文件`htdocs/less`都连接到一个名为`*.css`

如何配置它生成所有文件而不是将它们连接到一个文件中的任务。

我不想单独列出文件。

[在 Grunt 文档http://gruntjs.com/configuring-tasks#files](http://gruntjs.com/configuring-tasks#files)中找不到答案

谢谢你。

我的 Gruntfile.js（摘录）：

```
module.exports = function (grunt) {
    grunt.initConfig({
        less: {
            development: {
                files: {
                    "htdocs/css/*.css": "htdocs/less/*.less"
                }
            }
        },
    });
}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T20:27:15.583

您需要阅读文档中的[动态构建文件对象](http://gruntjs.com/configuring-tasks#building-the-files-object-dynamically)部分。

这将是您当前配置的直接翻译：

```
module.exports = function (grunt) {
    grunt.initConfig({
        less: {
            development: {
                files: [{
                    expand: true,        // Enable dynamic expansion.
                    cwd: 'htdocs/less',  // Src matches are relative to this path.
                    src: ['*.less'],     // Actual pattern(s) to match.
                    dest: 'htdocs/css',  // Destination path prefix.
                    ext: '.css',         // Dest filepaths will have this extension.
                }]
            }
        },
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:59:17.060

也可以看看[assemble-less](https://github.com/assemble/assemble-less)。它基于 grunt-contrib-less，但专门针对您想要做的事情。（完全披露，我也是该项目的维护者）。

对于这个特定的用例，[assemble-less](https://github.com/assemble/assemble-less)相对于 grunt-contrib-less 的优势在于它有一个`concat: false`选项，可以让您使用 Grunt 中的任何 src-dest 模式单独编译 LESS 文件。assemble-less 还有一个`require`选项可以自动将“全局”less 文件（例如 variables.less 或 mixins.less）添加到所有其他指定的 less 文件中，从而无需`@import`在每个 less 文件中实际添加语句。

因此，例如，使用[assemble-less](https://github.com/assemble/assemble-less)您可以：

```
 less: {
    development: {
      options: {
        concat: false
      }
      files: {
        "htdocs/css/": "htdocs/less/*.less"
      }
    }
  } 
```

# cordova - Phonegap：显示手机相册中的多张图片

> ID：15344592
> 
> 赞同：0
> 
> 时间：2013-03-11T17:17:01.900
> 
> 标签：cordova, jquery-mobile

我正在尝试使用 phonegap(cordova) 功能在一个非常简单的应用程序中显示用户相册中的照片。

到目前为止，它的工作方式是用户可以从相册中挑选一张照片，然后将其显示出来。

我想要实现的是有另一个按钮，这样用户就可以在第一个下面添加他相册中的另一个图像（而不是替换第一个）。有没有办法做到这一点？[在

任何帮助，将不胜感激 ：）

这是没有任何设计等的代码。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="phonegap.js"></script>
<script type="text/javascript" charset="utf-8">
 var pictureSource; // picture source
 var destinationType; // sets the format of returned value 

 // Wait for Cordova to connect with the device
 document.addEventListener("deviceready",onDeviceReady,false);

 // Cordova is ready to be used!
 function onDeviceReady() {
   pictureSource=navigator.camera.PictureSourceType;
   destinationType=navigator.camera.DestinationType;
 }

 // Take picture using device camera and retrieve image as base64-encoded string
 function capturePhoto() {
   navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50, allowEdit : true,
   destinationType: destinationType.DATA_URL });
 }

 // Called if something bad happens. 
 function onFail(message) {
   alert('Failed because: ' + message);
 }

 function onPhotoDataSuccess(imageData) {
   // Uncomment to view the base64 encoded image data
   // console.log(imageData);

   // Get image handle
   var largeImage = document.getElementById('largeImage');

   // Unhide image elements
   largeImage.style.display = 'block';

   // Show the captured photo
   // The inline CSS rules are used to resize the image
   largeImage.src = "data:image/jpeg;base64," + imageData;
 }

 // Called when a photo is successfully retrieved
 function onPhotoURISuccess(imageURI) {
   // Uncomment to view the image file URI 
   // console.log(imageURI);

   // Get image handle
   var largeImage = document.getElementById('largeImage');

   // Unhide image elements
   largeImage.style.display = 'block';

   // Show the captured photo
   // The inline CSS rules are used to resize the image
   largeImage.src = imageURI;
 }
 // A button will call this function to retrieve photos from the album
 function getPhoto(source) {

   // Retrieve image file location from specified source
   navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
     destinationType: destinationType.FILE_URI,
     sourceType: source });
 }
</script>

<link href="css/jquery.mobile-1.3.0.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div data-role="content"> 
  <button data-theme="d" onclick="getPhoto(pictureSource.PHOTOLIBRARY);">Browse     Photos</button> 
  <img style="display:none;width:100%;" id="largeImage" src="" /> <br>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:50:28.113

您似乎只包含了 JQuery Mobile CSS，因此您需要包含 JQuery 和 JQuery Mobile JS 文件。

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script> 
```

然后我要做的是更改 onPhotoURISuccess(imageURI) 函数。您可以在每次检索新图像并将其添加到新 div 时动态创建它，而不是更改现有 img 元素的 src。

为此，我们首先将您的 html 更改为。

```
<div data-role="content"> 
<button data-theme="d" onclick="getPhoto(pictureSource.PHOTOLIBRARY);">Browse          Photos</button> 
<div id="photos"></div>
</div> 
```

然后我们可以改变你的功能如下。

```
function onPhotoURISuccess(imageURI) {
// Uncomment to view the image file URI 
// console.log(imageURI);

// Create new Image element
var img = $('<img />');
img.attr('src', imageURI);

// Append new img to our photos div
img.appendTo('#photos');

} 
```

# azure - Azure 连接问题

> ID：15344594
> 
> 赞同：2
> 
> 时间：2013-03-11T17:17:06.390
> 
> 标签：azure, virtual-machine

我是 Azure 的新手。我正在将 EC2 VM 从 Amazon 切换到 Azure。这是一个使用 Ria Services 的 Silverlight 项目。azure 上的相同代码有更多丢弃的查询 (DomainServiceError)。与 azure 有什么特别的关系可以防止连接断开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:34:27.527

您是否尝试过[在 Windows Azure 中处理瞬态连接](http://msdn.microsoft.com/en-us/library/windowsazure/hh689724.aspx)？

> 底线是您的应用程序必须能够随时处理可能的连接终止，并从中恢复。连接终止可能发生在网络错误条件下，也可能发生在数据中心的正常运行中。应用程序必须为此做好计划，并期望遇到它。

另外，如果您使用的是实体框架，请检查一下[。](http://windowsazurecat.com/2010/12/sql-azure-and-entity-framework-connection-fault-handling/)

# php - 如何将（子）域添加到 apache/ISPConfig2？

> ID：15344600
> 
> 赞同：0
> 
> 时间：2013-03-11T17:17:19.570
> 
> 标签：php, apache

我正在开发一个 PHP 脚本来方便地克隆现有的 CMS 安装。基本上一切正常，但接下来我想做的是在 apache/ispconfig 2 中为新站点自动配置（子）域。我知道 ispconfig 3 的远程处理功能会更好，但不幸的是目前不是一个选项，因为 „<em>ISPConfig 3 是下一代 ISPConfig 控制面板，从头开始重写以支持虚拟用户和多个服务器。ISPConfig 3**不能用于更新**ISPConfig 2 安装。“</p>

有机会用 v2 做到这一点吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:57:05.543

我终于发现 ispconfig 3 提供的“远程处理”也可作为插件使用 2。在此处下载和更多信息：[http ://www.ispconfig.org/ispconfig-2/remoting-framework/](http://www.ispconfig.org/ispconfig-2/remoting-framework/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:33:27.627

只需将 Apache 信息附加到您的 httpd.conf 中，如下所示：

```
$data = 
<VirtualHost 10.1.2.3:80>
ServerAdmin webmaster@host.example.com
DocumentRoot /www/docs/host.example.com
ServerName host.example.com
ErrorLog logs/host.example.com-error_log
TransferLog logs/host.example.com-access_log
</VirtualHost>
;

file_put_contents('/path/to/filename', $data, FILE_APPEND); 
```

当然，您仍然需要找到一种方法来使用新的子域更新您的 DNS。

# android - 在android中发生切换按钮单击错误

> ID：15344601
> 
> 赞同：0
> 
> 时间：2013-03-11T17:17:19.877
> 
> 标签：android

我添加了列表视图顶部切换按钮

**例如，**如果我选择了蔬菜意味着蔬菜项目在列表视图中显示

非蔬菜项目选择意味着非蔬菜项目显示它。

但是我第一次得到它非蔬菜项目但是当我被点击时`Toggle button`我打电话给我发生的时间是错误类型的 URL。请给我解决方案。低于那个错误

错误 ：

```
03-11 22:30:43.059: WARN/dalvikvm(385): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-11 22:30:43.129: WARN/ActivityManager(70):   Force finishing activity com.doodleblue.dinein/.ui.vegnonveg
03-11 22:30:43.730: WARN/ActivityManager(70): Activity pause timeout for HistoryRecord{4504b9a0 com.doodleblue.dinein/.ui.vegnonveg}
03-11 22:30:53.172: WARN/ActivityManager(70): Launch timeout has expired, giving up wake lock!
03-11 22:30:53.810: WARN/ActivityManager(70): Activity idle timeout for HistoryRecord{450beb20 com.doodleblue.dinein/.ui.listviewitem}
03-11 22:30:58.957: WARN/ActivityManager(70): Activity destroy timeout for HistoryRecord{4504b9a0 com.doodleblue.dinein/.ui.vegnonveg} 
```

# java - 如何以编程方式从 jar 文件中导入插件和片段

> ID：15344603
> 
> 赞同：5
> 
> 时间：2013-03-11T17:17:28.877
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我在一些jar文件中导出了一些插件和片段。我需要以编程方式导入这些插件和片段，因为它通常是通过 GUI 完成的，`File --> Import --> Plug-in Development --> Plug-ins and Fragments`所以我在当前的工作区中有这些。我已经阅读了一些与导入项目相关的帖子（即通过利用`.project`），但在这种情况下，我只有 jar 文件。

片段和/或提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:32:58.483

查看 Eclipse 的源代码是如何完成的。- 打开实现所请求功能的向导打开 Plugin-Spy ( `Shift`++ `Alt`)`F1`并跳转到源代码（在您的情况下，一个好的起点是`org.eclipse.pde.internal.ui.wizards.imports.PluginImportWizardDetailedPage`）

# php - jqgrid 没有加载数据

> ID：15344604
> 
> 赞同：0
> 
> 时间：2013-03-11T17:17:31.890
> 
> 标签：php, jquery, json, jqgrid

**我有以下文件。此文件仅包含 html 代码：-**

***jqgrid.php***

```
<!DOCTYPE html>
<html>
    <head>

        <link rel="stylesheet" type="text/css" media="screen" href="jq_grid/css/base/jquery-ui.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="jq_grid/css/ui.jqgrid.css" />

        <script src="js/jquery 1.8.0.js" type="text/javascript"></script>
        <script src="jq_grid/js/i18n/grid.locale-en.js" type="text/javascript"></script>
        <script type="text/javascript" src="jq_grid/js/jquery.jqGrid.min.js"></script>
        <script type="text/javascript" src="js/accounts.js"> </script>

    </head>
    <body>
        <table id="list2"></table>
        <div id="pager2"></div>

    </body>
</html> 
```

***accounts.js*** *这个文件包含 jquery 代码*

```
$(document).ready(function(){

    jQuery("#list2").jqGrid({
    url:'http://localhost/property%20guruji/handler/admin/hadler.accounts.php?q=2',
    dataType: "json",
    mtype:"GET",
    colNames:['Id','Username', 'Email', 'Created On'],
    colModel:[
        {name:'id',index:'id', width:55},
        {name:'username',index:'username', width:90},
        {name:'email',index:'email', width:100},
        {name:'createdon',index:'createdon', width:80, align:"right"},

    ],
    rowNum:10,
    rowList:[10,20,30],
    pager: '#pager2',
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    caption:"JSON Example"
});
jQuery("#list2").jqGrid('navGrid','#pager2',{edit:false,add:false,del:false});

}); 
```

我有提供 json 数据的文件

```
{"page":"1","total":1,"records":5,"rows":[{"id":10,"cell":[10,"vikas","vil@gmail.com","24\/02\/2013"]},{"id":9,"cell":[9,"kaml","kamal@yahoo.in","02\/02\/2013"]},{"id":6,"cell":[6,"jkdfjdkjfkdjf","djfk@yahoo.com","02\/02\/2013"]},{"id":5,"cell":[5,"avdd","email","02\/02\/2013"]},{"id":1,"cell":[1,"admin","admin",""]}]} 
```

它正在加载文件，但没有显示数据。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:38:45.357

你为什么要调用 jqGrid 两次？您在 is 控制台中看到错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:40:17.400

我想知道你的 JSON。为什么id不在单元格内？虽然它是合法的 JSON 结构，但它与我的一个网格中的 JSON 结构不同。

示例 jqGrid JSON

```
{"total":11,"page":1,"records":109,"rows":[{"cell":["243","3/10/2013 9:28 PM","243","username","0.00" ... 
```

# slickgrid - Slickgrid 复制粘贴问题

> ID：15344609
> 
> 赞同：2
> 
> 时间：2013-03-11T17:18:00.960
> 
> 标签：slickgrid

我们正在考虑`SlickGrid`在我们的应用程序中使用。我在复制粘贴功能方面遇到了一些问题。我们正在使用 ExternalCopyManager 插件。

*   在可编辑网格上复制和粘贴不会粘贴多个单元格。看起来它只粘贴当前选定的单元格。
*   当您拥有`leaveSpaceForNewRows =true`并且`enableAddRow`您在网格末尾粘贴多行时，它只会创建 1 行。

有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:26:07.290

SlickGrid 没有复制粘贴功能。它有一个插件 Slick.CellCopyManager，但它不会为您复制单元格。它触发复制/粘贴事件并告诉您需要从何处复制哪些范围。您仍然必须实现复制的实际逻辑。这样做是因为实际复制的规则是非常特定于应用程序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T11:16:02.877

[查看此示例](http://mleibman.github.io/SlickGrid/examples/example-spreadsheet.html)：您可以复制/粘贴多个单元格。

[![在此处输入图像描述](../Images/e4ff2fa528351523a85a24fbef3b2def.png)](https://i.stack.imgur.com/LSssI.gif)

首先，双击一个单元格以编辑其内容。对多个单元格执行此操作。

然后，右键单击一个单元格并不释放（鼠标左下不动），拖动鼠标以覆盖一系列单元格（它们的背景将变成黄色）。释放左键。

CTRL+C 将复制此范围。这些细胞现在是蓝色的。

选择要粘贴到的范围，然后按 CTRL+V。如果您的粘贴范围小于您的复制范围，则只有选定的粘贴范围会收到新的单元格计算。

# angularjs - json对象上的AngularJS $scope.$watch在指令内不起作用

> ID：15344610
> 
> 赞同：12
> 
> 时间：2013-03-11T17:18:07.103
> 
> 标签：angularjs

我在这里遗漏了一些明显的东西。在我的指令中，我有一个有效的双向数据绑定，但是我似乎无法使用 $scope.$watch() 来监视指令的父范围 js 对象上可能发生的更改。

[http://jsfiddle.net/Kzwu7/6/](http://jsfiddle.net/Kzwu7/6/)

如您所见，当我尝试在 attrs.dirModel 上使用 $watch 时，结果值是未定义的，并且没有进一步观察，即使我在短暂延迟后修改了对象。我也尝试过在 $watch 语句中使用（而不是使用）true 标志。

HTML：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>

<div ng-app="test" ng-controller="MainCtrl">
    <dir dir-model="model"></dir>
    <p>{{model.tbdTwoWayPropA}}</p>
</div>

<script type="text/ng-template" id="template">
    <div class="test-el">{{dirModel.tbdTwoWayPropB}}</div>
</script> 
```

JS：

```
var app = angular.module('test', []);

app.controller("MainCtrl", [
    "$scope", "$timeout",
    function($scope, $timeout){
        $scope.model = {
            tbdTwoWayPropA: undefined,
            tbdTwoWayPropB: undefined,
            tbdTwoWayPropC: undefined
        }

        // TBD Ajax call
        $timeout(function(){

            // alert("Model updated, but $scope.$watch isn't seeing it.");

            $scope.model.tbdTwoWayPropA = 1;
            $scope.model.tbdTwoWayPropB = 30;
            $scope.model.tbdTwoWayPropC = [{ a: 1 },{ a: 2 },{ a: 3 }];

        }, 2000)
    }
]);

app.directive('dir', [
  "$timeout",
  function($timeout) {
      return {
          restrict: "E",
          controller: function($scope){
              $scope.modifyTwoWayBindings = function(){

                  // Two-way bind works
                  $scope.dirModel.tbdTwoWayPropA = 2;
              }

              $timeout(function(){
                  $scope.modifyTwoWayBindings();
              }, 4000);
          },
          scope: {
              dirModel: '='
          },
          template: $("#template").html(),
          replace: true,
          link: function($scope, element, attrs) { 

            $scope.$watch( attrs.dirModel, handleModelUpdate, true);

              // alert(attrs.dirModel);

              function handleModelUpdate(newModel, oldModel, $scope) {
                  alert('Trying to watch mutations on the parent js object: ' + newModel);
              }
          }
      }
}]); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T17:45:07.637

由于您使用的是“=”，因此您有一个本地指令范围属性`dirModel`。只是 $watch ：

```
$scope.$watch('dirModel', handleModelUpdate, true); 
```

# asp.net-mvc - 使用表内的列表检索 linq 中的正确行

> ID：15344613
> 
> 赞同：0
> 
> 时间：2013-03-11T17:18:09.533
> 
> 标签：asp.net-mvc, linq, c#-4.0

我有一张桌子，在这张桌子里面我有一个列表。

我试图从表中只检索列表中没有“Hello”的行，

例子，

我有 3 行，对于每一行，我在 List 中有三行具有不同的值，所以我怎样才能只检索没有“你好”这个词的那一行，这就是我想要做的

```
IQueryable<table> _table = tab.AsQueryable();
var retrieve=_table.Where(x=>(x.list.Where(y=>!y.Name.Equal("Hello"))).Any()); 
```

但这会由列表的每一行返回，我想在列表的所有行中搜索，然后仅在没有“Hello”的情况下返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:21:27.363

```
var retrieve=_table.Where(x => !x.list.Any(y => y.Name.Equal("Hello"))); 
```

# c# - LINQ 左连接抛出 System.NullReferenceException 或 System.InvalidCastException

> ID：15344617
> 
> 赞同：0
> 
> 时间：2013-03-11T17:18:20.367
> 
> 标签：c#, linq

我一直在尝试创建一个 LINQ 语句，它将使用左外连接连接两个表。

下面的代码获取`DataTable`为登录用户工作的人员（包含 Active Directory 用户名），获取另一个`DataTable`是 AD 用户名和应用程序登录名之间的交叉引用，然后加入他们以创建一个`List<string>`包含应用程序登录名的名称（如果存在）其他为登录用户工作的每个人的 AD 用户名。

当登录列表不包含下属列表中的任何人时，`NullReferenceException`会发生错误（在线）。`select new`

当登录列表确实包含下属列表中的某个人时，`InvalidCastException`会发生错误（在线上）。`return result...`这里的完整错误是：

> System.InvalidCastException：无法将“<>f__AnonymousType1`1[System.String]”类型的对象转换为“System.String”类型

```
TMReportsDataSet.EmployeeDataTable subordinates = SessionTyped.Subordinates;
TMReportsDataSet.EmployeeLoginDataTable logins = CacheTyped.Logins;

var result = from t1 in subordinates.AsEnumerable()
             join t2 in logins.AsEnumerable()
             on t1.ADAccountName equals t2.ADAccountName
             into joinedDT
             from t2 in joinedDT.DefaultIfEmpty()
             select new
             {
                 userName = (string)(t2.LoginName ?? t1.ADAccountName)
             };

return result.Cast<string>().ToList<string>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:20:12.870

您正在尝试将匿名类型转换为字符串。删除匿名类型的使用如下：

```
var result = from t1 in subordinates.AsEnumerable()
                 join t2 in logins.AsEnumerable()
                 on t1.ADAccountName equals t2.ADAccountName
                 into joinedDT
                 from t2 in joinedDT.DefaultIfEmpty()
                 select (string)(t2.LoginName ?? t1.ADAccountName);

return result.ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:50:26.017

由于我对 Magnus 答案的编辑被拒绝 [我不明白为什么？] 这是我的问题的完整答案，这基本上是 Magnus 给出的答案，但需要额外检查以查看是否`t2 == null`避免`NullReferenceException`出错。

```
var result = from t1 in subordinates.AsEnumerable()
                 join t2 in logins.AsEnumerable()
                 on t1.ADAccountName equals t2.ADAccountName
                 into joinedDT
                 from t2 in joinedDT.DefaultIfEmpty()
                 select (string)(t2 == null ? "" : (t2.LoginName ?? t1.ADAccountName));

return result.ToList(); 
```

# matlab - 在matlab中留下一个交叉验证

> ID：15344620
> 
> 赞同：0
> 
> 时间：2013-03-11T17:18:26.367
> 
> 标签：matlab, svm

你能帮我如何在 Matlab 中使用留一交叉验证吗？因为我使用的数据很小。我对真阳性使用 10 个数据训练，对假阳性使用 10 个数据训练。我尝试了在这里找到的代码。这是我的训练功能：

```
Function [ C,F ] = classification_test_samesize()

    dn='D:\thesis\mthesis\code program\FalsePositive\'
    db=dir(strcat(dn,'*.dcm'));
    F=[];
    C=[];

    for(i=1:1:length(db))
        name=db(i).name;
        name=strcat(dn,name);
        im1=dicomread(name);
        [out] = func_feature(im1);
        f = [out];
        F = [F;f];
        C=[C;-1];

    end

    % false positive is -1 th class

    dn='D:\thesis\mthesis\code program\TruePositive\'
    db=dir(strcat(dn,'*.dcm'));

    for(i=1:1:length(db))
        name=db(i).name;
        name=strcat(dn,name);
        im1=dicomread(name);
        [out] = func_feature(im1);
        f = [out];
        F = [F;f];
        C=[C;1];
        % true positive is 1 th class
    end
end 
```

这是我的主要功能。

```
clc

direktori= uigetdir;
slash = '\';
direktori=strcat(direktori,slash);
dn=direktori;
db=dir(strcat(dn,'*.dcm'));
ftest=[];

for(i=1:1:length(db))
    name=db(i).name;
    name=strcat(dn,name);

    im1=dicomread(name);
    [out] = func_feature(im1);
    f = [out];
    ftest = [ftest;f];
end

[C,F] = classification_test_samesize();
svmStruct = svmtrain(F,C,'showplot',true,'Kernel_Function','rbf');
result_class = svmclassify(svmStruct,ftest,'showplot',true); 
```

在我的主要功能中，我调用了测试文件夹来测试数据。但在这种情况下，我想使用留一交叉验证来测试数据，所以我不再调用该目录。你能帮我解决这个问题吗？因此，我可以使用其中一种训练数据进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:46:05.790

由于我的第一个示例让您感到困惑，因此我再次查看了您的完整代码，我认为我有一个更简单的方法来实现您想要的。首先，这里是分类函数：它看起来很像原来的，但我并没有试图取出任何数据——相反，我们将在计算之后选择一些数据点：

```
Function [ C,F ] = classification_test_samesize(fpDir, tpDir)
% compute the C and F for files in the two directories given
db=dir(fullfile(fpDir,'*.dcm')); % preferred to strcat
F=[];
C=zeros(numel(db), 1);
%
% don't use 'i' as variable name - it is built in, and means "sqrt(-1)"
for ii= 1:numel(db)
    name=fullfile(fpDir, db(ii).name); % the correct way to concatenate directory and file name
    im1=dicomread(name);
    % I would like to think you could pre-allocate size for F
    % and use F(ii)=func_feature(im1); directly?
    F = [F; func_feature(im1)];
    C(ii) = -1;   
    fprintf(1, 'file name: %s; class -1\n', db(ii).name); 
end

% false positive is -1 th class

db=dir(fullpath(tpDir,'*.dcm'));
%
for ii = 1:numel(db)
    im1=dicomread(fullfile(tpDir, db(ii).name);
    F = [F; func_feature(im1)];
    C = [C;1];
    fprintf(1, 'file name: %s; class 1\n', db(ii).name);
% true positive is 1 th class
end
end 
```

您使用对应于真阴性和真阳性目录的两个参数调用此函数 - 此时您已完成所有计算。现在，您可以选择将这些数据中的哪些用于训练，哪些用于测试。

```
clc    
% pick the number of the file we are using for test instead of training:

[C,F] = classification_test_samesize('D:\thesis\mthesis\code program\FalsePositive\', ...
    'D:\thesis\mthesis\code program\TruePositive\');

% now we are going to pick some of these for training, and others for verification
numTest = 5; % whatever number you want to set aside for verification
% >>>> changed the next three lines <<<<
randomIndx = randperm(1:numel(C));
testVal = randomIndx(1:numTest);
trainingSet = randomIndex(numTest+1:end);

% do the training: this uses those elements from F and C which are chosen for training:
Ctrain = C(trainingSet);
Ftrain = F(trainingSet);

disp('The following values now exist in "C":')
display(unique(Ctrain)); % this is to confirm there are exactly two classes...

svmStruct = svmtrain(Ftrain,Ctrain,'showplot',true,'Kernel_Function','rbf');

% finally, classify the other values:
result_class = svmclassify(svmStruct,F(testVal),'showplot',true); 
```

我希望你能从这里拿走它...

# php - php查询输出另存为文本文件

> ID：15344624
> 
> 赞同：1
> 
> 时间：2013-03-11T17:18:52.147
> 
> 标签：php, html, save

我的网站上有一个页面，可以从表格中提取信息并使用 css 进行格式化。

我找不到将页面按原样保存为文本或 pdf 文件的方法。我找到了一个 pdf 网站，它可以做到这一点[http://pdfmyurl.com/](http://pdfmyurl.com/)但我希望在我自己的网站上做同样的事情，而不需要外部网站。

该网页`session`确保用户已登录，并且取决于`user_id`从数据库中提取的数据。澄清一下，我希望用户能够查看此页面。在页面上，我希望有一个`"SAVE TO COMPUTER"`按钮可以按原样保存该页面。

我发现

```
<?php

 //Link to download file...
 $url = "savechoice.php";

 //Code to get the file...
 $data = file_get_contents($url);

 //save as?
 $filename = "test.txt";

 //save the file...
 $fh = fopen($filename,"w");
 fwrite($fh,$data);
 fclose($fh);

 //display link to the file you just saved...
 echo "<a href='".$filename."'>Click Here</a> to download the file...";
?> 
```

但这只是将页面保存为文本，包括未执行的 php。我还将 url 更改为完整的 url，尽管由于无法识别会话，运行 PHP 会返回空白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:20:29.980

请考虑使用[file_put_contents()](http://php.net/file_put_contents)。还要验证您在服务器中是否具有写入权限。您可以使用[is_writable()](http://php.net/is_writable)来做到这一点。

*但这只是将页面保存为包含 php.ini 的文本。*-> 你想让服务器处理`savechoice.php`吗？这是完全不同的。当您使用[file_get_contents()](http://php.net/file_get_contents)打开文件时，它会完全按照您在打开文件时看到的方式获取文件。它**不会**执行该文件。

你需要改变`savechoice.php`工作方式。如果它是一个有一些输出的脚本，你可以把输出放在一个变量中，你将把它放在你的`$data`. 例如：

`savechoice.php`

```
<?php
echo 'Hello World!';
?> 
```

将其更改为以下内容：

```
<?php
$echo = 'Hello World!';
?> 
```

在您的其他文件中，您可以在使用[require()](http://php.net/require)`file_put_contents($echo);`调用后简单地使用。`savechoice.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:22:31.743

你可能想要更像这样的东西：

```
ob_start();
include('savechoice.php');
$text = ob_get_clean(); 
```

但实际上，最好的方法是将 savechoice.php 中的代码修改为可作为函数调用，这样您就可以拥有更多类似的内容：

```
$text = get_choice(...); 
```

相反，适当的逻辑只输出您想要的数据，而不需要 html 包装纸。在几乎所有使用情况下，向您自己的服务器调用 HTTP 请求都是毫无意义的资源浪费，尤其是当您使用会话（尤其是标准的基于文件的会话）时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:23:52.353

如果要获取文件的输出而不是原始内容，则需要确保文件以 php.ini 执行。

您可以包含它（我看到已经有另一个答案......）或者您可以使用：

```
$url = "http://localhost/path/to/file/savechoice.php"; 
```

使用您的原始代码以确保该文件被网络服务器处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:23:13.087

那是因为您正在加载文件，而不是文件的 url。

假设您站点的域是[http://www.example.com](http://www.example.com)，并且文件“savechoice.php”位于 Web 根目录中。如果您将 $url 更改为

```
$url = "http://www.example.com/savechoice.php"; 
```

然后将解释文件中的 php，您将看到网页而不是 php.ini。

# java - 哪个 util 包可用于在 java 中存储父子关系数据

> ID：15344626
> 
> 赞同：2
> 
> 时间：2013-03-11T17:18:58.337
> 
> 标签：java

我有一个像数据库中的数据一样的树结构，会有单亲及其多个级别的孩子，

我能够根据该结构创建 db 表并存储，现在我需要将数据显示到 jsp 页面上。

我的问题是，哪种数据结构更有效地将数据从 DB 遍历到 JSP 页面。

我为此使用 DB2 数据库，我没有为这个应用程序使用 Hibernate，它只是核心 java、jsp 页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:22:08.583

您可以通过以下方式为此目的使用 HashMap：

```
Map<String,<ArrayList<String>> map = new HashMap<String,<ArrayList<String>>(); 
```

该`key`部分将存储父名称。该`value`部分包含属于该父级的子级列表。

# json - 使用 Express.js (node.js) 进行动态路由的最佳方式

> ID：15344628
> 
> 赞同：15
> 
> 时间：2013-03-11T17:18:59.377
> 
> 标签：json, node.js, content-management-system, express, router

我正在尝试使用 express.js 创建一个简单的 CMS，它可以动态创建路由。它从如下所示的数据库中获取 JSON：

```
pagesfromdb = {
    home = {
        paths = ['/','/home','/koti'],
        render = 'home.ejs',
        fi_FI = {html='<h1>Hei maailma!</h1>'},
        en_US = {html='<h1>Hello World!</h1>'}
    },
    about = {
        paths = ['/about','/tietoja'],
        render = 'general.ejs',
        fi_FI = {html='Tietoja'},
        en_US = {html='About Us'}
    }
} 
```

并迭代创建路由的对象，如下所示：

```
Object.keys(pagesfromdb).forEach(function(key) {
    var page = pagesfromdb[key];
    app.get(page.global.paths,function(req, res){
         res.render(page.render, page[language]);
    });
}); 
```

现在一切正常。但问题是，每次用户修改内容和路径时，都需要重新启动整个节点应用程序。我没有找到任何 API 调用来删除路由。

有什么方法可以安全地删除用 app.get 设置的旧路线？我应该这样做吗？

有没有更好的方法来做这种路由？我确实喜欢这种方法，因为它允许我使用内置函数，速度快并且支持正则表达式。

我尝试使用 app.routes = nul 删除整个 app.routes 但它没有做任何事情，旧路线仍然存在。

确实删除它们的一件事是

```
delete app._router.map.get;
app._router.map.get = []; 
```

但这真的会删除它们吗？使用起来是否安全，所以如果路由器不断重新填充，我最终不会劫持大量内存？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T20:07:36.587

正如@supermova 在评论中所说，可以即时更新 Express。要考虑的另一种架构是类似于经典 CMS（例如 Wordpress）的架构。在其他 CMS 中，所有请求都转到相同的“回调”，并且在*每个请求*中，您都在数据库中查找为该 URL 服务的页面。

```
app.get('/*', function (req, res) {
   db.findPage({ slug: req.url}, function (err, pageData) {
       res.render('page-template', {
           pageContent: pageData.content,
           pageTitle: pageData.title
       });
   });
}); 
```

这种方法导致速度显着降低，但最后我认为它更理智。如果速度是一个大问题，您可以设置一个缓存系统（如 Varnish），但是动态修改 Express 路线的方法会让人头疼。例如，如果您必须扩展到两个 Web 服务器怎么办？如果服务器 A 收到“创建页面”请求并且知道要更新其路由，那么如何使它们保持同步，但是服务器 B 呢？随着每个请求进入数据库，您将能够更好地水平扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:22:02.810

我会非常小心地尝试在运行时创建或销毁路由。尽管您可以自己更改数据结构，但我不认为这些被记录为 API，因此如果/当您升级 Express 时，您可能会面临破坏的风险。

如果您为每个数据库对象创建一个新路由，这也可以作为内存约束，因为页面集可能会增长到不知道有多大。

像这样看……你不想要新路线；您想将 URL 添加到现有路由。如果要添加路由，则意味着您希望某个 URL 映射到某个不同的功能。但是您将每个 URL 映射到相同的函数。本质上，您只是通过副作用添加路线。你关心的是一些动态的 URL 映射到一个特定的函数。

您能否改为使用通配符将 URL 模式映射到特定函数，例如

```
app.get('/pages/*', function(req, res) {
    var page = pagesfromdb[key];
    if (page != null) {
        res.render(page.render, page.language)
    }
    else {
        res.send(404);
    }
}); 
```

并在 express 层之外管理 pagesfromdb 映射。您可以使用直接数据库访问、缓存 + 数据库访问或基于计时器的刷新，无论哪种方式最适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T10:06:52.587

如前所述，可以即时添加路线。鉴于此功能，删除也可以：

```
function deleteRoute(url) {
  for (var i = app.routes.get.length - 1; i >= 0; i--) {
    if (app.routes.get[i].path === "/" + url) {
      app.routes.get.splice(i, 1);
    }
  }
} 
```

（从[在运行时删除 Node.js 中的特定映射路由删除静态映射？](https://stackoverflow.com/questions/15487084/removing-a-specfic-mapped-route-in-node-js-at-runtime-removes-static-mapping)）

像这样更新路由确实会使您的应用程序“有状态”，如果您需要负载平衡，可能会导致问题。

# firefox-addon - 使用 firefox-addon-sdk 在后台加载网页

> ID：15344629
> 
> 赞同：0
> 
> 时间：2013-03-11T17:19:00.843
> 
> 标签：firefox-addon, firefox-addon-sdk

我是在 Firefox 上创建附加组件的新手。对于采取哪种方法也有点困惑。我找到了2个教程：

1.  [https://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Introduction?redirectlocale=en-US&redirectslug=XUL_School%2FIntroduction](https://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Introduction?redirectlocale=en-US&redirectslug=XUL_School%2FIntroduction)

2.  [https://addons.mozilla.org/en-US/developers/docs/sdk/1.13/dev-guide/index.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.13/dev-guide/index.html)

我想加载一个网页而不在另一个选项卡中显示它并对其进行一些解析。我发现第二个链接的教程更易于使用和学习，但我无法找到适合我的任务的 api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:42:42.053

SDK 的 page-worker 模块完全符合您的要求：

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.13/modules/sdk/page-worker.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.13/modules/sdk/page-worker.html)

# spring - 整数列表的休眠或 JPA 约束

> ID：15344639
> 
> 赞同：1
> 
> 时间：2013-03-11T17:19:44.783
> 
> 标签：spring, hibernate, jpa

是否有这样的约束可用于验证，`List<Integer>`因此没有一个值可能包含 null ？

**更新**

我根据此处提供的答案更改了我的代码：[Hibernate Validation of Collections of Primitives](https://stackoverflow.com/questions/4308224/hibernate-validation-of-collections-of-primitives)

这是我尝试过的：

```
@ValidCollection(elementType=Integer.class, constraints={NotNull.class})
private List<Integer> quantities; 
```

我的测试用例在以下测试代码中没有发现任何违规行为：

```
@Test
public void beanNotConstrained() {
    PurchaseForm pForm = new PurchaseForm();
    pForm.setQuantities(new ArrayList<Integer>());
    pForm.getQuantities().add(1);
    pForm.getQuantities().add(null);

    Validator validator = getValidator();

    Set<ConstraintViolation<PurchaseForm>> violations = validator.validate(pForm);
    for(ConstraintViolation<PurchaseForm> violation : violations) {
      logger.info(violation.getMessage());
    }
    Assert.assertEquals(1, violations.size());
} 
```

我在这里错过了什么吗？

# c# - MVC3 编辑模型忽略设置器逻辑

> ID：15344641
> 
> 赞同：1
> 
> 时间：2013-03-11T17:19:55.037
> 
> 标签：c#, asp.net-mvc-3, entity-framework, validation

我正在使用 ASP.NET MVC 3 和实体框架来构建一个小应用程序。

我有一个代表社交活动的模型，它具有“最大参加者人数”和“当前注册参加者”。编辑事件时，用户可以更改事件的容量，但我想防止他们将容量更改为低于当前注册人数的值。

我天真地假设我可以将这个逻辑添加到我的事件模型中的容量属性的设置器中，但似乎这个逻辑被忽略了并且值无论如何都会更新......

这是完整的更新模型：

```
public class SocialEvent : IValidatableObject
{
    public SocialEvent()
    {
        this.Users = new HashSet<Person>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public DateTime Date { get; set; }

    public int Capacity { get; set; }

    public int SlotsRemaining { get { return Capacity - Attending; } }
    public int Attending { get { return Users.Count; } }

    public virtual ICollection<Person> Users { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (Capacity < Attending)
        {
            var campo = new[] { "Capacity" };
            yield return new ValidationResult("Capacity cannot be less than number of confirmed attendees.", campo);
        }
    }
} 
```

这是来自我的控制器的代码，这主要是自动生成的东西，我猜这就是问题所在：

```
 //
    // GET: /Event/Edit/5
    public ActionResult Edit(int id)
    {
        SocialEvent socialevent = db.SocialEvents.Find(id);
        return View(socialevent);
    }

    //
    // POST: /Event/Edit/5
    [HttpPost]
    public ActionResult Edit(SocialEvent socialevent)
    {
        if (ModelState.IsValid)
        {
            db.Entry(socialevent).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(socialevent);
    } 
```

这是我的视图，其中包含用于编辑模型的字段：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>NadEvent</legend>

    @Html.HiddenFor(model => model.Id)

    <div class="editor-label">
        @Html.LabelFor(model => model.Capacity)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Capacity)
        @Html.ValidationMessageFor(model => model.Capacity)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
} 
```

这里最好的解决方案是什么，如何在设置容量时添加自己的逻辑以防止用户选择无效号码？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:24:42.393

`ModelState`不，当您使用与模型中定义的特定相关的规则时，您不能做出此假设`DataAnnotations`，在您的验证类型的情况下，您需要实现接口`IValidatableObject`并覆盖该方法`Validate`，以便可以定义您的自定义服务器端验证需要执行

例如

```
public class SocialEvent : IValidatableObject
{
    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if(Capacity < Attending)
        {
           var campo = new[] { "Capacity" }; 
           yield return new ValidationResult("Capacity cannot be less than number of confirmed attendees.", campo);  
        }
    }

} 
```

例如，当您在 mvc 中工作时，您可以`"automatic"`使用此注释定义一些验证

```
[Required] <--- this forces in the view to be a required field
public string email {get ; set;} 
```

[在此链接中，您可以找到可以在模型中使用的所有 DataAnnotations](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx) [在此链接](http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html)中您还可以看到此数据注释的一些示例

最后更新

默认情况下，您不会填充`Attending`字段值，因为用户的 ICollection 它是空的，其次，即使这有效，并且开始时您应该考虑将字段添加为隐藏值，当您单击窗口时，您应该序列化该字段，您可以有价值

修改了您的编辑视图，添加了出席字段

```
@Html.HiddenFor(model => model.Attending) 
```

填写，`ICollection<Uers>`因为您无法获取主值中的值，请检查 linq 生成的查询和您的数据库，看看是否相关。

# regex - perl 正则表达式无效范围

> ID：15344642
> 
> 赞同：0
> 
> 时间：2013-03-11T17:19:55.473
> 
> 标签：regex, perl

我有以下正则表达式来检查 XML 元素名称。

```
my $NameStartChar = ':A-Z_a-z\x{C0}-\x{D6}\x{D8}-\x{F6}\x{F8}-\x{2FF}\x{0370}-\x{037D}\x{37F}-\x{1FFF}\x{200C}-\x{200D}\x{2070}-\x{218F}\x{2C00}-\x{2FEF}\x{3001}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFFD}\x{10000}-\x{EFFFF}';
my $NameChar = ':A-Z_a-z\x{C0}-\x{D6}\x{D8}-\x{F6}\x{F8}-\x{2FF}\x{370}-\x{37D}\x{37F}-\x{1FFF}\x{200C}-\x{200D}\x{2070}-\x{218F}\x{2C00}-\x{2FEF}\x{3001}-\x{D7FF}\x{F900}-\x{FDCF}\x{FDF0}-\x{FFFD}\x{10000}-\x{EFFFF}\-\.0-9\x{B7}\x{0300}-\x{036F}\x{203F}-\x{2040}';

sub checkXmlName ($)
# Check if input is valid XML name
# $arg - Input string
# $ret - Boolean of validity
{
    if ($_[0] =~ m/^[$NameStartChar]([$NameChar])*$/)
    {    return 1;    }
    else
    {    return "";    }
}

if (checkXmlName("foo"))
{
    print STDOUT "OK";
} 
```

这给出了方便的错误

```
Invalid [] range "\x{F8}-\x{2FF}" in regex; marked by <-- HERE in m/^[:A-Z_a-z\x{C0}-\x{D6}\x{D8}-\x{F6}\x{F8}-\x{2FF} <-- HERE 
```

在 Perl 5.16.2 上，我使用`\N{U+2FF}`的是字符形式。但我必须使用 5.8.8。

编辑：将 qw 更改为未更改错误的 qr。并添加`Unicode character 0xeffff is illegal at ...`

编辑：来自 ikegami 评论删除了 qr/ 从而消除了非法字符错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:39:35.510

`[\x{F8}-\x{2FF}]`应该可以工作，所以这是 Perl 中的一个错误。

`[\x{F8}-\x{2FF}]`确实在较新版本的 Perl 中工作，所以这个错误已被修复。

看起来正则表达式引擎在从单字节字符到更大字符的范围方面存在问题，所以你为什么不尝试将范围分成两个。

```
[\x{F8}-\x{FF}\x{100}-\x{2FF}] 
```

# jquery - IE8 触发意外操作（javascript）（更改时文本框操作不起作用）

> ID：15344647
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:20:10.503
> 
> 标签：jquery, internet-explorer-8, textbox, action, onchange

我慢慢地绝望，我最后的神经迷失了。我在表格中有一个元素。如果我点击这个元素，我会得到一个文本框，如果我按下回车，文本框中的值将由 php 脚本处理。到目前为止它工作得很好，但是......现在我需要，如果我在框外点击，最好在另一个元素上说，应该出现相同的弹出窗口（你需要更改blabla），就像我按下时的动作一样输入按钮。我尝试使用 focusout、blur、onchange 等，但 IE 会立即触发弹出窗口，所以我没有机会在文本框中输入任何内容！这里我的代码只适用于输入操作（输入按钮）：

```
function modify(value, item_ID, attr_NAME, obj_name){
    $('.ajax').html($('.ajax_input').val());
    $('.ajax').removeClass('ajax');
    $(value).addClass('ajax');
    $(value).html(
             '<input id="editbox" size="' + $(value).text().length
                     + '" type="text" value="' + $(value).text()
                     + '" onkeydown="confirmAction(this.value, ' + item_id
                     + ", '" + attr_name + "'" + ", '" + obj_name + "'" + ')">');
    $('#editbox').focus();
} 
```

**让它工作：**

```
$('.ajax').html($('.ajax input').val());
    $('.ajax').removeClass('ajax');
    $(value).addClass('ajax');
    $(value).html(
            '<input id="editbox"' + ' type="text" value="' + $(value).text() + '"/>');
    $('#editbox').focus();

    $('#editbox').keydown(function(event) {
        if (event.which == 13) {
            $(document).attr('helpAttr', false);
            confirmAction(this.value, item_id, attr_name, obj_name);
        }
    });
    $('#editbox').blur(
            function() {
                if ($(document).attr('helpAttr')
                        || ($(document).attr('helpAttr') == undefined)) {
                    confirmAction(this.value, item_id, attr_name, obj_name);
                } else {
                    $(document).attr('helpAttr', true);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:06:31.307

这处理回车键：

```
$('#editbox').keydown(function(event) {
  if (event.which == 13) {
    confirmAction(...);
 }
} 
```

这处理外部的点击：

```
$('#editbox').blur(function() {
    confirmAction(...);
} 
```

# css - 当主 div 包裹内的 3 个 div 框时清除浮动

> ID：15344654
> 
> 赞同：0
> 
> 时间：2013-03-11T17:20:26.307
> 
> 标签：css, html, css-float

我有我的主要 div id `#main`，其中包含 3 个 div 类`.left` `.right`和`.left-top`. left 和 left-top div box 向左浮动，而 right box 向右浮动。下面给出了 Css 和 Html。这里我不知道为什么我的右框向下浮动等于`left-top`框的高度，并且放置得像有一些上边距一样。我`right`只希望这个 div 位于最顶部。

JSFIDDLE：http: [//jsfiddle.net/9zTXt/2/](http://jsfiddle.net/9zTXt/2/)

```
HTML:

<div id = "main">
<div class= "left-top"></div>
<div class = "left"></div>
<div class = "right"></div>    
</div>

CSS:

#main
{position:relative;
width:350px;height:800px;
background:grey; 
margin-top:20px;     
}
#main .left
{float:left;
position:relative;width:200px;height:800px;
background:red;
margin-top:10px;
}
#main .left-top 
{width:200px;height:30px;
background:blue;
}

#main .right
{float:right;position:relative;
width:130px;height:800px;background:green;
margin:10px 0px 0px 20px;   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:42:18.380

试试这个[http://jsfiddle.net/9zTXt/4/](http://jsfiddle.net/9zTXt/4/)

html

```
<div id = "main">
    <div>
        <div class= "left-top"></div>
        <div class = "left"></div>
    </div>
    <div class = "right"></div>    
</div> 
```

CSS：

```
#main .right
{
    float:right;position:relative;
    width:130px;height:800px;background:green;
    margin:0px 0px 0px 20px;   
}

#main > div {
  float: left;
} 
```

**解释：**基本上将您的左浮动元素包装在自己的 div 上，这样它们就不会与右浮动元素混淆，并从您的`.right`div中取出 margin-top

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:24:55.900

尝试重新排序您的 div，以便`div.right`首先出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:35:45.967

我的新序列是

```
<div id="main">

<div id="left"></div>
<div id="right"></div>
<div id="top-left"></div>

</div> 
```

上边距：左 div 为 30px，右 div 为 0px。

# python - Django syncdb - 它如何知道它之前是否创建了表或我是否创建了表？

> ID：15344657
> 
> 赞同：0
> 
> 时间：2013-03-11T17:20:32.883
> 
> 标签：python, django, django-orm, django-postgresql

我在 Postgre 中为 Django 项目手动创建了一些表。我也手动创建了模型。当我尝试时`syncdb`，它会引发数据库错误并说该表已经存在。

如果 syncdb 之前创建了表，则不会发生这种情况。syncdb 如何知道它是创建表还是我创建了表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T06:02:15.207

似乎 django 维护着应用程序及其模型的内部缓存。它从这里知道它是否已经为模型创建了一个表。我想这就是为什么支持[introspection](https://docs.djangoproject.com/en/dev/howto/legacy-databases/#auto-generate-the-models)，以便从现有模式创建模型并正确填充缓存。

从[syncdb 源](https://github.com/django/django/blob/master/django/core/management/commands/syncdb.py#L58)中可以清楚地看出该过程是什么，以便确定需要在 syncdb 上做什么：

```
 # Get a list of already installed *models* so that references work right.
    tables = connection.introspection.table_names()
    seen_models = connection.introspection.installed_models(tables)
    created_models = set()
    pending_references = {}

    # Build the manifest of apps and models that are to be synchronized
    all_models = [
        (app.__name__.split('.')[-2],
            [m for m in models.get_models(app, include_auto_created=True)
            if router.allow_syncdb(db, m)])
        for app in models.get_apps()
    ]

    def model_installed(model):
        opts = model._meta
        converter = connection.introspection.table_name_converter
        return not ((converter(opts.db_table) in tables) or
            (opts.auto_created and converter(opts.auto_created._meta.db_table) in tables))

    manifest = SortedDict(
        (app_name, list(filter(model_installed, model_list)))
        for app_name, model_list in all_models
    ) 
```

在每个数据库驱动程序中，都有获取表名的代码。这适用于 postgresql：

```
def get_table_list(self, cursor):
        "Returns a list of table names in the current database."
        cursor.execute("""
            SELECT c.relname
            FROM pg_catalog.pg_class c
            LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
            WHERE c.relkind IN ('r', 'v', '')
                AND n.nspname NOT IN ('pg_catalog', 'pg_toast')
                AND pg_catalog.pg_table_is_visible(c.oid)""")
        return [row[0] for row in cursor.fetchall()] 
```

# arrays - 我是 VB 的新手，我的作业被困住了

> ID：15344660
> 
> 赞同：1
> 
> 时间：2013-03-11T17:20:41.400
> 
> 标签：arrays, vb.net

我必须读入学生姓名和成绩的文件，并将每个类别放入一个单独的数组中，例如一个数组中的所有 homework1 成绩，另一个数组中的 homework2 成绩等，但我什至不知道该怎么做。到目前为止，这是我的代码，我确信其中大部分是错误的，并且我有错误消息。

```
Public Class frmGrades

    Dim FirstName As Array
    Dim LastName As Array
    Dim HW1 As Array
    Dim HW2 As Array
    Dim Project As Array
    Dim Midterm As Array
    Dim Final As Array
    Dim Average As Array
    Dim record, fields(7) As String
    Dim inFile As StreamReader
    Dim outFile As StreamWriter

    Private Sub cmdReport_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdReport.Click
        MsgBox("Summary report has been created", MsgBoxStyle.OkOnly, "Grades")
    End Sub

    Private Sub cmdExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdExit.Click
        Me.Close()
    End Sub

    Private Sub frmGrades_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        inFile = File.OpenText("Grades.csv")
        outFile = File.CreateText("Report.csv")

        Do While (inFile.Peek <> -1)
            record = inFile.ReadLine
            fields = Split(record, ",")
            FirstName = CInt(fields(0))
            LastName = fields(1)
            HW1 = fields(2)
            HW2 = fields(3)
            Project = fields(4)
            Midterm = fields(5)
            Final = fields(6)
            'Average = (HW1 * 0.0833) + (HW2 * 0.0833) + (Project * 0.1666) + (Midterm * 0.3332) + (Final * 0.3332)
            outFile.Write(FirstName)
            outFile.Write(LastName)
            outFile.Write(HW1)
            outFile.Write(HW2)
            outFile.Write(Project)
            outFile.Write(Midterm)
            outFile.Write(Final)
            outFile.WriteLine(Average)
        Loop

    End Sub

    Private Function Split(ByVal record As String, ByVal p2 As String) As String()
        Throw New NotImplementedException
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:26:39.353

由于数组是将多个值收集到单个变量中的一种方式，因此您希望将值添加到适当的数组中。您的 while 循环中的代码（如果有的话）是用字段中的值替换每个整个数组 - 实际上，这是错误消息的来源：您正在尝试将字符串放入声明为大批。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:38:36.973

我想你的教授可能会告诉你这样做，

```
 Dim cnt as integer=0

 Do While (inFile.Peek <> -1)

            record = inFile.ReadLine
            fields = Split(record, ",")
            FirstName(cnt) = CInt(fields(0))
            LastName(cnt) = fields(1)
            HW1(cnt) = fields(2)
            HW2(cnt) = fields(3)
            Project(cnt) = fields(4)
            Midterm(cnt) = fields(5)
            Final(cnt) = fields(6)

            cnt += 1
           ..............
           ..............
 Loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:29:40.180

FirstName、LastName 等是字符串数组，我认为这是混淆的重点。小心不理解就提交这个作业，并考虑对你不理解的东西做一些改变。

```
Dim FirstName() As String
Dim LastName() As String
Dim HW1() As Single
Dim HW2() As Single
Dim Project() As Single
Dim Midterm() As Single
Dim Final() As Single
Dim Average() As Single

Dim fields() As String
Dim inFile As StreamReader
Dim outFile As StreamWriter

Private Sub frmGrades_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    inFile = File.OpenText("Grades.csv")
    outFile = File.CreateText("Report.csv")
    Dim n As Integer = 0
    Dim seperator As String = ", "
    Do While (inFile.Peek <> -1)
        ' read the fields from the current line in the file
        fields = inFile.ReadLine.Split(",")
        ' redim all the arrays to the appropriate size
        ReDim Preserve FirstName(n)
        ReDim Preserve LastName(n)
        ReDim Preserve HW1(n)
        ReDim Preserve HW2(n)
        ReDim Preserve Project(n)
        ReDim Preserve Midterm(n)
        ReDim Preserve Final(n)
        ReDim Preserve Average(n)
        ' set the values from the fields
        FirstName(n) = fields(0)
        LastName(n) = fields(1)
        HW1(n) = Single.Parse(fields(2))
        HW2(n) = Single.Parse(fields(3))
        Project(n) = Single.Parse(fields(4))
        Midterm(n) = Single.Parse(fields(5))
        Final(n) = Single.Parse(fields(6))
        ' calculate the average
        'Average = (HW1 * 0.0833) + (HW2 * 0.0833) + (Project * 0.1666) + (Midterm * 0.3332) + (Final * 0.3332)
        Average(n) = Single.Parse(
            (HW1(n) * 1 / 12) +
            (HW2(n) * 1 / 12) +
            (Project(n) * 1 / 6) +
            (Midterm(n) * 2 / 6) +
            (Final(n) * 2 / 6))
        ' write a line to the output file
        outFile.WriteLine(FirstName(n) & seperator & LastName(n) & seperator &
                      HW1(n).ToString() & seperator & HW2(n).ToString() & seperator &
                      Project(n).ToString & seperator & Midterm(n).ToString() & seperator &
                      Final(n).ToString() & seperator & Average(n).ToString())
        n += 1
    Loop
    inFile.Close()
    outFile.Close()
End Sub 
```

# sql - 在 Microsoft SQL Server 中比较日期的最佳方法是什么？

> ID：15344661
> 
> 赞同：32
> 
> 时间：2013-03-11T17:20:42.050
> 
> 标签：sql, sql-server, tsql, datetime, query-optimization

我`datetime`在一个非常大的表中有一个 SQL 字段。它已编入索引，需要查询。

问题是 SQL 总是存储时间组件（即使它总是午夜），但搜索的是当天，而不是时间。

```
declare @dateVar datetime = '2013-03-11;

select t.[DateColumn]
from MyTable t
where t.[DateColumn] = dateVar; 
```

不会返回任何东西，因为它`t.[DateColumn]`总是包含一个时间组件。

我的问题是最好的解决方法是什么？

似乎有两组主要的选项：

1.  `dateadd`使用并使用 a创建第二个变量`between ... and`or `>= ... and ... <=`。

2.  将其转换`t.[DateColumn]`为仅日期组件 - 我认为这将导致任何索引被忽略。

这两个看起来都非常混乱 - 我真的不想进行范围比较或扫描表格。

有没有更好的办法？

如果这些选项之一是始终如一的最佳方式，那么如何以及为什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-11T22:43:37.390

在任何情况下转换为`DATE`或使用开放式日期范围都会产生最佳性能。仅供参考，使用索引转换为日期是表现最好的。更多测试文章中的不同技术：[从日期时间修剪时间的最有效方法是什么？](http://www.sqlperformance.com/2012/09/t-sql-queries/what-is-the-most-efficient-way-to-trim-time-from-datetime)亚伦·伯特兰 (Aaron Bertrand) 发表

从那篇文章：

```
DECLARE @dateVar datetime = '19700204';

-- Quickest when there is an index on t.[DateColumn], 
-- because CONVERT can still use the index.
SELECT t.[DateColumn]
FROM MyTable t
WHERE = CONVERT(DATE, t.[DateColumn]) = CONVERT(DATE, @dateVar);

-- Quicker when there is no index on t.[DateColumn]
DECLARE @dateEnd datetime = DATEADD(DAY, 1, @dateVar);
SELECT t.[DateColumn] 
FROM MyTable t
WHERE t.[DateColumn] >= @dateVar AND 
      t.[DateColumn] < @dateEnd; 
```

也来自那篇文章： using `BETWEEN`, `DATEDIFF`or`CONVERT(CHAR(8)...`都比较慢。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-11T17:25:44.223

这是一个例子：

我有一个 Order 表，其中包含一个名为 OrderDate 的 DateTime 字段。我想检索订单日期等于 01/01/2006 的所有订单。有以下方法可以做到这一点：

```
1) WHERE DateDiff(dd, OrderDate, '01/01/2006') = 0
2) WHERE Convert(varchar(20), OrderDate, 101) = '01/01/2006'
3) WHERE Year(OrderDate) = 2006 AND Month(OrderDate) = 1 and Day(OrderDate)=1
4) WHERE OrderDate LIKE '01/01/2006%'
5) WHERE OrderDate >= '01/01/2006'  AND OrderDate < '01/02/2006' 
```

在[这里找到](http://www.demiliani.com/blog/archive/2006/01/19/3384.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:52:31.957

您可以添加一个仅包含日期而不包含时间的计算列。在这两个选项之间，我会选择`BETWEEN`运营商，因为它对我来说“更干净”并且应该更好地利用索引。比较执行计划似乎表明这`BETWEEN`会更快；但是，在实际测试中，它们的表现相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-26T06:50:43.553

当日期介于 fromdate 和 toDate 之间时获取项目。

其中 convert(date, fromdate, 103) <= '2016-07-26' 和 convert(date, toDate, 103) >= '2016-07-26'

# javascript - 如何在webview（android）中使用javascript（或不是javascript）模拟键盘事件以输入textarea

> ID：15344662
> 
> 赞同：4
> 
> 时间：2013-03-11T17:20:49.580
> 
> 标签：javascript, android, html, textarea, android-webview

我尝试模拟位于（android）`textarea`中的输入，但我尝试过的所有解决方案都不起作用。像这样的解决方案不要传给我。有人可以建议吗？它应该与没有 webview 和 android 的 html-page 相同。`html``webview``textarea.value = "value`

我花了很多时间，所以非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:26:18.373

我不是很确定，但是您是否尝试引用 textArea 然后对其进行操作，例如：

```
var ref= document.getElementById("txtArea"); 
ref.InnerHTML="hello"; 
```

如果您觉得有帮助，请选择此作为最佳答案。

# sql - 使用 2 个日期列在 sql server 中查找某个月份打开的项目数量

> ID：15344664
> 
> 赞同：1
> 
> 时间：2013-03-11T17:20:54.820
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一些日期的示例视图。您如何找到每月打开的项目数量。在他们打开和关闭的时间之间说 OpenDate 和 CloseDate 我想知道每个月有多少是开放的，一月，二月等？

十月 已打开 4 个项目。

这是一个包含数据的示例表

```
CREATE TABLE [dbo].[TestDate](
    [ItemTitle] [nvarchar](50) NULL,
    [ItemAttachAssignDate] [date] NULL,
    [ItemDetachConcludeDate] [date] NULL,
    [Status] [nvarchar](50) NULL,
    [FullName] [nvarchar](100) NULL,
    [OpenDate] [date] NULL,
    [CloseDate] [date] NULL
) ON [PRIMARY]

GO

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2013-02-18 00:00:00', '2013-02-19 00:00:00', 'Done', 'Jeff Hunter      ', '2013-02-18 00:00:00', '2013-02-19 00:00:00');

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2012-10-15 00:00:00', '2013-02-05 00:00:00', 'Done', 'Tommy Johnson', '2013-01-22 00:00:00', '2013-01-28 00:00:00');

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2012-10-15 00:00:00', '2013-02-05 00:00:00', 'Done', 'Jeff Haynes', '2012-10-17 00:00:00', '2013-02-01 00:00:00');

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2012-10-15 00:00:00', '2013-02-05 00:00:00', 'Done', 'Nancy Belkin', '2012-10-28 00:00:00', '2012-12-14 00:00:00');

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2012-10-15 00:00:00', '2013-02-05 00:00:00', 'Done', 'Rudolph Porche', '2013-01-16 00:00:00', '2013-02-02 00:00:00');

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2012-10-20 00:00:00', '2013-02-07 00:00:00', 'Done', 'Pat Franks', '2013-01-20 00:00:00', '2013-01-25 00:00:00');

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2012-10-20 00:00:00', '2013-02-07 00:00:00', 'Done', 'Leslie Jordan', '2012-11-25 00:00:00', '2012-12-04 00:00:00');

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2012-10-20 00:00:00', '2013-02-07 00:00:00', 'Done', 'Fred Haney', '2012-10-20 00:00:00', '2013-02-04 00:00:00');

INSERT INTO [TestDate]([ItemAttachAssignDate], [ItemDetachConcludeDate], [Status], [FullName], [OpenDate], [CloseDate]) 
    VALUES('2012-10-20 00:00:00', '2013-02-07 00:00:00', 'Done', 'Henry Hanks', '2012-10-31 00:00:00', '2012-11-15 00:00:00'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:56:25.043

我不明白你问题的这一部分：

> 在 OpenDate 和 CloseDate 之间说

这是否意味着您需要进行某种日期计算或比较？

但是，如果您只是在寻找每月汇总，有几种方法可以处理这个问题。您可以有一个要加入的日期引用或维度表，其中包含天到月的映射。或者你可以简单地去掉日期的相关部分，即

```
SELECT DATEPART(YEAR, OpenDate) AS OpenYear
    , DATEPART(MONTH, OpenDate) AS OpenMonth
    , COUNT(*) AS OpenCount
FROM dbo.TestDate
GROUP BY DATEPART(YEAR, OpenDate)
    , DATEPART(MONTH, OpenDate); 
```

您还可以将计数汇总到该月的第一天，即

```
SELECT CONVERT(VARCHAR(10),DATEADD(MONTH, DATEDIFF(MONTH,0,OpenDate),0),120) AS OpenMonth
    , COUNT(*) AS OpenCount
FROM dbo.TestDate
GROUP BY CONVERT(VARCHAR(10),DATEADD(MONTH, DATEDIFF(MONTH,0,OpenDate),0),120); 
```

这仅取决于您对数据的处理方式以及您需要它的呈现方式。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:17:29.960

带有 master..spt_values 系统表和[APPLY()](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符的选项。仅供参考，计算所有年份的月份 COUNT()

```
SELECT DATENAME(mm, DATEADD(mm, number-1, '20010101')) AS month, o.cnt
FROM master..spt_values v CROSS APPLY (
                                       SELECT COUNT(*) AS cnt
                                       FROM [dbo].[TestDate]
                                       WHERE v.number = MONTH(OpenDate)
                                       ) o                                       
WHERE v.type = 'P' AND v.number BETWEEN 1 AND 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:25:46.360

我假设您真正想知道的是“每个月，处于打开状态的项目数量”。例如，一个项目的 opendate 是 2012 年 11 月 15 日，closeate 是 2013 年 1 月 2 日，您考虑这个项目开放 3 个月，并且每个月的开放项目计数应该是 +1，因为这个项目。

如果是这样，以下脚本将为您提供帮助。这是一个简单的逻辑，它必须有更好的整洁代码来替换这个

```
select YearMonth, SUM(OpenItemCount)
from (
select cast(DATEPART(YYYY,CloseDate) as varchar(4)) + CAST(DATEPART(mm,CloseDate) as varchar(2)) as YearMonth, 
       COUNT(*) as OpenItemCount 
from  [dbo].[TestDate]
group by cast(DATEPART(YYYY,CloseDate) as varchar(4)) + CAST(DATEPART(mm,CloseDate) as varchar(2))    
union all    
select cast(DATEPART(YYYY,OpenDate) as varchar(4)) + CAST(DATEPART(mm,OpenDate) as varchar(2)) as YearMonth, 
       COUNT(*) as OpenItemCount 
from  [dbo].[TestDate]
where (cast(DATEPART(YYYY,OpenDate) as varchar(4)) + CAST(DATEPART(mm,OpenDate) as varchar(2))) <> (cast(DATEPART(YYYY,CloseDate) as varchar(4)) + CAST(DATEPART(mm,CloseDate) as varchar(2)))
group by cast(DATEPART(YYYY,OpenDate) as varchar(4)) + CAST(DATEPART(mm,OpenDate) as varchar(2))    
) as A
group by A.YearMonth 
```

# php - 将所有内容替换为小写字母

> ID：15344665
> 
> 赞同：0
> 
> 时间：2013-03-11T17:20:55.477
> 
> 标签：php, regex, preg-replace, preg-match

我的标题由空格、[ { } & () 大写字母和其他几个我只想替换为小写字符的未知字符组成。我正在使用它，但由于我无法预测用户将提供什么输入，因此我正在考虑某种正则表达式或 preg 替换或 preg 匹配，以便只接受带有下划线的小写字母（用于空格）或将标题转换为带有下划线的全小写.我不想要任何其他字符，例如 ,{[]}() 等。

我已经尝试过了，但更喜欢一行 preg replace 或 regex

```
 $name = str_replace(' ', '_', $cityu);
     $name1 = str_replace('(', '_', $name);
     $name2 = str_replace(')', '_', $name1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:24:20.387

我认为你可以使用这样的东西：

```
$string = preg_replace('/[^\w]/','_', $string);
$string = strtolower($string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:28:03.263

因为`preg_replace()`您想使用括在方括号中的字符类`[]`，例如：

```
$output = preg_replace('/[() ]/', '_', $input); 
```

但是，如果要替换所有非字母字符，则可以使用：

```
$output = preg_replace('/[^a-z0-9]/', '_', $input); 
```

字符`^`类内部的意思是“不是”，因此它替换不是从 a 到 z 或 0 到 9 的字符。

最后，您可以简单地使用 转换为小写`strtolower()`，因此您的代码如下所示：

```
$output = preg_replace('/[^a-z0-9]/', '_', strtolower($input)); 
```

您可能还想将多个压缩`____`为一个`_`，这可以通过以下方式完成：

```
$output = preg_replace('/_{2,}/', '_', $input); 
```

where`{2,}`表示匹配两个或多个出现的`_`字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-21T07:14:34.460

您的问题要求存在一定程度的歧义，因此我将介绍一些场景。如果您需要容纳 unicode 字符，您应该通过编辑在您的问题中阐明该细节。

代码：（[演示](https://3v4l.org/qifuC)）

```
$string = "(Here {is [a] Special} Title)! & it's fine, right?";

// all non-letters become underscores
echo preg_replace('~[^a-z]~', '_', strtolower($string));

echo "\n\n";
// notice the consecutive underscores
echo str_replace(' ', '_', preg_replace('~[^a-z ]+~', '', strtolower($string)));

echo "\n\n";
// notice no consecutive underscores
echo preg_replace(['~[^a-z ]+~', '~ +~'], ['', '_'], strtolower($string)); 
```

输出：

```
_here__is__a__special__title_____it_s_fine__right_

here_is_a_special_title__its_fine_right

here_is_a_special_title_its_fine_right 
```

第一种技术将每个非字母字符分别替换为下划线。

第二种技术删除连续的非字母和非空格字符序列，然后用下划线单独替换每个空格。

第三种技术删除连续的非字母和非空格字符序列，然后用下划线替换连续的空格序列。

# sql-server - 如何使永久自动选择智能感知结果 sql server 2012

> ID：15344672
> 
> 赞同：2
> 
> 时间：2013-03-11T17:21:18.793
> 
> 标签：sql-server, autocomplete, intellisense, sql-server-2012, ssms

现在它在您键入时通过智能感知填充结果但它不是自动选择

当您`ctrl + alt + space`同时点击时，它会在您仅为该查询键入时开始自动选择

我希望这个功能是永久的

这是两种情况的图像

没有自动选择

![在此处输入图像描述](../Images/4368d6308ab6678f26e2fe0a2c61bc59.png)

启用自动选择（我想要这个永久）

![在此处输入图像描述](../Images/b85a6a830e9aca383a8db8531fbbb000.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:30:34.193

不确定这在 SSMS 2012 中是否可行。

您可能想尝试一些 3rd 方工具，例如[SQL Prompt](http://www.red-gate.com/products/sql-development/sql-prompt/)或[ApexSQL Complete](http://www.apexsql.com/sql_tools_complete.aspx)

# sql - 在 SQL 中存储直方图的最有效（存储空间）方式

> ID：15344680
> 
> 赞同：2
> 
> 时间：2013-03-11T17:21:47.010
> 
> 标签：sql, sql-server, database-design

我需要在 SQL 中存储十亿个直方图。这些直方图具有相同的桶，但它们的计数可能有很大的变化，但是，大多数桶很多时候都是 0。

我最初的尝试是为每个直方图设置一行，其中每列代表一个桶。

我对我的数据类型非常小心，但表看起来仍然超出了为其分配的存储空间。

我想知道在我必须请求更多硬件之前，是否有人遇到过在 MS SQL 中存储值范围（其中 0 是最常见的情况）的有效解决方案。

提前致谢。

总。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T17:45:03.470

```
CREATE TABLE Histogram (
    HistogramID BIGINT /* INT only goes to 2bn */ IDENTITY NOT NULL CONSTRAINT PK_Histogram PRIMARY KEY
    -- Other metadata like the date and time or whatever
)

CREATE TABLE Bucket (
    BucketID INT /* or smaller */ IDENTITY NOT NULL CONSTRAINT PK_Bucket PRIMARY KEY
    -- Other metadata like the range it applies to
)

CREATE TABLE HistogramValue (
    HistogramID BIGINT NOT NULL
    ,BucketID INT NOT NULL
    ,Counter BIGINT /* or smaller datatype */ NOT NULL
    ,CONSTRAINT PK_HistogramValue PRIMARY KEY (HistogramID, BucketID)
    ,CONSTRAINT FK_Histogram FOREIGN KEY REFERENCES Histogram(HistogramID)
    ,CONSTRAINT FK_Bucket FOREIGN KEY REFERENCES Bucket(BucketID)
) 
```

该`HistogramValue`表将是稀疏的。`Bucket`您可以将表格从表格左连接到`HistogramValue`特定直方图的表格以获得“整个”直方图：

```
SELECT b.Range
       ,COALESCE(hv.Counter, 0) AS Counter
FROM Bucket b
LEFT JOIN HistogramValue hv
    ON hv.HistogramID = @HistogramID
    AND hv.BucketID = b.BucketID 
```

这是一个典型的标准化模型，相对容易维护、加载和导出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:22:40.563

从数据管理的角度来看，直方图是**原子的吗？**我的意思是：您是否总是将整个直方图作为数据库中的一个不可分割的单元来读取或写入？

如果**是**，只需将其序列化为 BLOB。您甚至可以在写入 BLOB 之前通过一些压缩库将其扫过，这是一个很好的衡量标准。

如果**没有**，请考虑使用以下内容：

```
CREATE TABLE HISTOGRAM (
    HISTOGRAM_ID int PRIMARY KEY
    -- Other fields...
);

CREATE TABLE HISTOGRAM_VALUE (
    HISTOGRAM_ID int REFERENCES HISTOGRAM (HISTOGRAM_ID),
    BUCKET_NO smallint,
    VALUE decimal NOT NULL, -- Or whatever type is appropriate.
    PRIMARY KEY (HISTOGRAM_ID, BUCKET_NO)
); 
```

*（注意：如果你绝对肯定你永远不需要超过 256 个桶，你甚至可以使用`tinyint`for `BUCKET_NO`，以挤出更多的空间效率。）*

请记住，[InnoDB 表始终是集群](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)的，所以`HISTOGRAM_VALUE`上面的表只是一个 B-tree，没有表堆或其他 B-tree（因为没有二级索引 - FOREIGN KEY 可以直接从主索引满足）。这与使用 InnoDB 表获得的存储效率差不多。

为了节省空间，只需省略值为 0 的桶，除非直方图以这样的桶开始或结束。例如...

```
0   0   14.7    -12.9   0   0   55.1    0   0   0 
```

...可以表示为：

```
HISTOGRAM_ID    BUCKET_NO    VALUE
1               1            0
1               3            14.7
1               4            -12.9
1               7            55.1
1               10           0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:55:25.017

在任何其他情况下，我都不会想到建议这样做，但由于空间是这里最重要的问题，你可能想尝试一下......

将每个直方图存储在单个 varchar 字段中可能是有效的，每个桶中的数量由一些分隔符分隔，例如

“1,,23,,,789789789” 表示第一个存储桶中的 1，第二个存储桶中的 0，依此类推。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-08T07:07:33.893

Actually, we can solve this question by creating only one table. If create more than one tables, we must use `join` operator. It is ineffective to get the `histogram` we want when we need to use it.

```
CREATE TABLE HISTOGRAM_VALUE
{
  HISTOGRAM_ID INT,
  BUCKET_ID INT,
  BUCKET_MIN_VALUE INT,  //or whatever value type you want
  BUCKET_HEIGHT INT,
  // other metadata
  PRIMARY KEY(HISTOGRAM_ID,BUCKET_ID,BUCKET_MIN_VALUE)
}; 
```

the `BUCKET_MIN_VALUE` is the `min_value` (or we can understand the left boundary of a bucket range) of each bucket.

# android - 如何将文件放入准备使用apk的res文件夹中？

> ID：15344682
> 
> 赞同：2
> 
> 时间：2013-03-11T17:21:55.007
> 
> 标签：android, batch-file, zip, 7zip

我有这样一个问题：我有一些 test.apk 文件。有包含所有图形资源的 res 文件夹。我需要为艺术家编写 .bat 文件以供下一步操作： 1\. 从外部文件夹中获取资源并用新的和重新打包的 apk 文件替换当前资源。

apk中有这样的文件：

```
assets META-INF res AndroidManifest.xml classes.dex resources.arsc 
```

**因此，据我了解我需要的任务：**

1.  将 1.apk 复制到 1.zip
2.  解压 1.zip 到 1 个文件夹
3.  删除“res”文件夹并将我自己的文件夹放在那里
4.  创建新的 1.apk 文件并用我的证书对其进行签名。完毕。

**我有两个问题：**

1.  如何使用批处理命令压缩/解压缩文件？
2.  如何用新证书签署我的新文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:37:56.420

我解决了这个问题！这是解决方案，也许有人会发现它有用。bat 文件的命令。

**您需要有：7zip 归档程序、Android SDK、JDK 1.7。**

用于制作此内容的资源链接：http: [//developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html) [http://developer.android.com/tools/building/index.html](http://developer.android.com/tools/building/index.html)

```
SET app_input_file_name=%1
SET tmp_app_name="tmp_app_name.zip"
SET zip_tool_path="C:\Program Files\7-Zip\7z.exe" 
```

rem 1\. 创建 AndroidSampleApp.apk 的副本并将其重命名为 AndroidSampleApp.zip

```
copy %app_input_file_name% %tmp_app_name% 
```

rem 2\. 从 AndroidSapleApp.zip 文件中提取文件夹 res/ 到根文件夹。

```
%zip_tool_path% x %tmp_app_name% res/ 
```

rem 3\. 删除 META-INF 和 res 文件夹。

```
%zip_tool_path% d %tmp_app_name% res
%zip_tool_path% d %tmp_app_name% META-INF 
```

**在对资源进行更改后：**

```
SET app_output_file_name=%1
SET tmp_app_name="tmp_app_name.zip"
SET dev_certificate="mycert.keystore"
SET dev_certificate_alias="mycert"
SET zip_tool_path="C:\Program Files\7-Zip\7z.exe"
SET jarsigner_tool_path="C:\Program Files\Java\jdk1.7.0_17\bin\jarsigner.exe"
SET zipalign_tool_path="D:\SDKs\android-sdk_r18-windows\android-sdk-windows\tools\zipalign.exe" 
```

rem 4\. 对解压的 res 文件夹进行修改，不能删除或添加任何新文件！！只改变图像。rem 5\. 使用压缩方法 Store 将修改后的 res/ 文件夹添加到 AndroidSapleApp.zip。

```
%zip_tool_path% a %tmp_app_name% res -mx0 
```

rem 6\. 删除 res/ 文件夹

```
rmdir res /s /q 
```

rem 7\. 将 AndroidSapmleApp.zip 重命名为 AndroidSapmleApp.apk

```
copy %tmp_app_name% %app_output_file_name% 
```

rem 8\. 使用您的证书 mycert.keystore 签署应用程序

```
%jarsigner_tool_path% -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore %dev_certificate% %app_output_file_name% %dev_certificate_alias% 
```

rem 9\. 确认一切正常

```
%jarsigner_tool_path% -verify %app_output_file_name% 
```

rem 10\. *.apk 上的 zipalign：

```
%zipalign_tool_path% -v -f 4 %app_output_file_name% 
```

rem 11\. 删除旧应用： adb uninstall com.partypoker.poker

```
rem adb uninstall com.packagename 
```

rem 12\. 将应用程序安装到模拟器/设备。

```
rem adb install AndroidSapmleApp.apk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:23:33.643

OP 并没有试图“窃取”别人的应用程序。他试图将编写Java代码的过程与创建图形的过程分开，让图形的创建过程发生在Java代码编译之后。这是一件完全合理的事情——但如果不是不可能的话，可能会非常困难。

问题是 apk 中的资源已被 aapt 编译为内部格式。替换也必须采用这种内部格式。但是，在编译过程中，aapt 会生成定义资源 ID 的 R 类。Java 编译器必须可以使用这个 R 类，以便编译后的 dex 文件将使用正确的资源 ID。

此处的绘图：http: [//developer.android.com/tools/building/index.html](http://developer.android.com/tools/building/index.html)以图形格式显示了这一点。

修改后的工作流程可能有效：

Java 开发人员使用占位符图形构建应用程序，但不包括 apkbuilder 步骤。

*   图形开发人员创建漂亮的图片 - 将自己限制在预先存在的占位图形中（即编辑它们但不要添加新的或删除旧的。）
*   批处理文件运行 aapt——它必须有权访问整个原始 res 目录以确保生成的 ID 匹配。
*   批处理文件运行 apkbuilder 以生成未签名的 apk。
*   然后根据需要对 apk 进行 zipaligned、proguarded 和签名。

最好的设置方法可能是从现有的 Ant 构建脚本开始，然后创建一个新的 Ant 构建脚本来支持所需的工作流。

……嗯……祝你好运……

# api - 如何使用 Instagram API 将 Instagram“赞”按钮添加到标签拉入的图像中

> ID：15344691
> 
> 赞同：0
> 
> 时间：2013-03-11T17:22:17.800
> 
> 标签：api, tags, instagram

首先，我只想让你知道我对此很陌生。我很惊讶我什至能走到这一步，但现在我被困住了。目前，此脚本将成功提取带有特定标签的照片。

我正在尝试在这里做两件事。我需要弄清楚如何将 Instagram LIKE 按钮放在图像上，并且我需要对数据进行分页，以便我可以提取更多照片（可能大约 100 张左右，我不介意是否必须添加“下一个”页”按钮）。我已经在这个网站和其他网站上阅读了尽可能多的内容，但由于我缺乏知识而一无所获（这是我的第一个 API 脚本，也是第一次使用 PHP，所以高级术语让我感到厌烦）。

谁能像我5岁一样向我解释这个？或者建议使用该项目的替代路线或指向我可以学习如何执行此操作的某个地方的链接（不是 Instagram 开发者网站，我已经浏览过它并且有点理解他们在说什么，但我缺乏HTML 和 CSS 之外的编码知识非常有限）

```
<?php
// Supply a user id and an access token
$userid = "XXX";
$accessToken = "XXX";

// Gets our data
function fetchData($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 20);
    $result = curl_exec($ch);
    curl_close($ch); 
    return $result;
    }

// Pulls and parses data.
$result = fetchData("https://api.instagram.com/v1/tags/exampletag/media/recent?access_token=XXX");
$result = json_decode($result);
?>

<?php foreach ($result->data as $post): ?>
    <!-- Renders images. @Options (thumbnail,low_resoulution, high_resolution) -->
    <a class="group" rel="group1" href="<?= $post->images->standard_resolution->url ?>"><img src="<?= $post->images->thumbnail->url ?>"></a>
<?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:51:40.447

关于您的分页，请查看本教程。它帮助了我，我想一旦你完成了这个，你就会明白如何添加你的“喜欢”按钮。

[http://eduvoyage.com/search-instagram-pagination.html](http://eduvoyage.com/search-instagram-pagination.html)

您将需要使用以下 POST 向图像添加点赞。 [https://api.instagram.com/v1/media/](https://api.instagram.com/v1/media/) {media-id}/likes

参考 Instagram API：http: [//instagram.com/developer/endpoints/likes/](http://instagram.com/developer/endpoints/likes/)

# gdb - 线程核心转储的 GDB 核心分析

> ID：15344692
> 
> 赞同：1
> 
> 时间：2013-03-11T17:22:21.633
> 
> 标签：gdb

由于某种原因，生成的核心文件只是来自作为主应用程序一部分的线程的核心。

当我用实际崩溃的二进制文件加载它时，我得到

```
BFD: Warning: core is truncated: expected core file size >= 40919040, found: 61440. 
```

我如何告诉 gdb 这是来自该二进制文件的线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T07:14:19.960

> 由于某种原因，生成的核心文件只是来自作为主应用程序一部分的线程的核心。

是什么让你得出这样的结论？这个结论很可能是错误的。

> BFD：警告：核心被截断：预期核心文件大小> = 40919040，找到：61440。

这条消息的意思正是它所说的：你的`core`文件应该是`40919040`字节大小，但不是。

最可能的原因：

*   您已`ulimit -c`设置为 15（太低）
*   你的磁盘空间用完了
*   您只复制了实际核心的一部分（例如，通过按 Control-C，或在传输过程中断开网络）

# actionscript-3 - 简易人工智能寻路库

> ID：15344695
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:22:35.813
> 
> 标签：actionscript-3, actionscript

我用 Game Maker 编写了游戏，但希望使用 ActionScript 3 编写 Flash 游戏。

在 Game Maker 中，让角色实例寻找最近的敌人、转身并朝它移动很简单——游戏引擎负责处理困难的事情。

我在业余时间做游戏开发只是为了好玩，并不想成为 A* 寻路算法方面的专家。我只想要类似的东西：

```
mob.MoveToClosestEnemy(); 
```

我要求太多还是有图书馆提供这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:29:23.663

没有内置的 AS3 库可以处理寻路的各个方面，因此您的选择是通过 google 查找第 3 方库并使用它或编写您自己的 A* 算法。

如果你想自己写，这是一个很好的关于寻路的介绍，带有一个很棒的动画示例： [http ://www.emanueleferonato.com/2012/11/26/the-basics-of-pathfinding-animated-example/](http://www.emanueleferonato.com/2012/11/26/the-basics-of-pathfinding-animated-example/)

注意：这不是一个简单的技术，您需要使用 AS3 的相关经验才能完全理解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T03:13:02.157

我编写了 Daedalus Lib，这是一个基于 delaunay 三角剖分的完整开源 AS3 寻路库。您拥有轻松构建环境（甚至使用位图）、在其上请求寻路、示例路径的一切……它是完全动态的、准确的和快速的。

你可以在这里看到演示：http: [//totologic.blogspot.fr/2013/12/introducing-daedalus-lib_19.html](http://totologic.blogspot.fr/2013/12/introducing-daedalus-lib_19.html)

下载源和维基： [https ://code.google.com/p/daedalus-lib/](https://code.google.com/p/daedalus-lib/)

享受！

编辑后：

第一件事。虽然 Game Maker 是一款专用于一项任务（制作游戏）的工具，但 Flash 是一种更通用的平台；您可以开发游戏，也可以开发应用程序。

这意味着比在 Flash 中，您有 2 个选择：

1 - 你选择一个完整的游戏引擎库来实现显示、物理、控制……（也许还有寻路）。存在这样的库（Flixel、Flashpunk...），您只需检查它们的功能并选择更适合您需要的库。

2：你建立自己的游戏引擎。这并不意味着您必须从头开始编写所有代码。您可以与许多专用于单个任务的库进行组合，例如用于 2D 显示的 Starling、用于 3D 显示的 Away3D、用于物理的 Box2D……这更困难，因为您确实必须了解库中的底层概念并具有游戏架构的经验，但这种方法更强大、更灵活。

因此，Daedalus Lib 专门用于使用第二种方法的人。它被设计成您自己的游戏引擎的一个组件；例如，您可以将它与 Box2D 和 Starling 结合使用。

从那开始，我将 Daedalus 设计为易于使用，同时保持灵活性。

例如，您可以通过使用位图将关卡设计注入 Daedalus Lib，如下所示：

```
var myLevel:DDLSMesh;
myLevel = DDLSBitmapMeshFactory.buildFromBmpData(myBitmap.bitmapData); 
```

然后定义一个实体，它将扮演你的暴民的角色：

```
var myMob:DDLSEntityAI = new DDLSEntityAI();
myMob.radius = 5;
myMob.x = 132; // current x
myMob.y = 224; // current y 
```

最后在你的关卡中询问你的暴徒的路径：

```
var path:Vector.<Number> = new Vector.<Number>();
var myPathfinder:DDLSPathFinder = new DDLSPathFinder();
myPathfinder.entity = myMob;
myPathfinder.mesh = myLevel;
myPathfinder.findPath(yourGoalX, yourGoalY, path); 
```

之后，您的变量*路径*将包含生成路径的坐标，让您的生物到达您的目标，避免与您在位图中定义的级别发生冲突。您可以通过 enterFrame 直接在 MovieClip 上使用这些坐标来使您的生物在屏幕上移动，或者使用它来改变物理模拟中身体的速度。

# html - 尽管 UTF-8 元标记应用于 html 文件，但 Html 特殊字符未在浏览器中显示

> ID：15344698
> 
> 赞同：0
> 
> 时间：2013-03-11T17:22:43.597
> 
> 标签：html, meta-tags, htmlspecialchars

我正在使用 jquery 方法在 div 内容中加载 html 文件，如下所示

```
<script type="text/javascript" language="javascript" >
$(function () {
    $("#divWelcomePage").load("welcome.html");
}); 
```

现在，问题是我在那里得到了 html 文件内容，但没有得到 div 中特殊字符的值，如 (撇号(')、双引号(""))。

然后我放了一个标签

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

现在，它适用于一些 html 页面，但对于其他一些页面，我仍然没有任何价值。相反，我得到�字符:(

请为我建议一些非常可靠的方法。我还研究过使用 html 编辑器将这些 html 文件转换为支持 UTF 字符可以使这个 html 文件工作但它仍然无法正常工作，因为我尝试使用一些 html 编辑器，如**Sublime Text 2**。如果您仍然相信使用这些编辑器会对我的情况有所帮助，请向我推荐一些好的 html 编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:34:22.863

您需要包含[有效的 doctype](http://www.w3schools.com/tags/tag_doctype.asp)才能正确显示 html 实体。

尝试将此添加到您的welcome.html 页面

```
<!DOCTYPE html> 
```

# json - 在什么情况下我使用 Json 或 Hibernate？

> ID：15344699
> 
> 赞同：1
> 
> 时间：2013-03-11T17:22:46.033
> 
> 标签：json, spring, hibernate, postgresql

我有一个访问 postgreSQL 数据库的应用程序。
我很困惑为我的 DAO 层选择 Json 格式或 Hibernate，实际上我使用 Spring 作为我的业务层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:42:52.777

JSON 格式和休眠是两个不同的东西。JSON 是一种数据格式，您的数据在这种数据格式中传入和传出 UI 和服务器端代码。而hibernate是我们用来处理数据库的ORM。数据库操作由hibernate执行。如果您的需求是 spring 控制器返回的此类数据应该是 JSON 格式，请使用 JSON。并使用hibernate进行数据库操作。DAO 层返回的对象将被转换为 JSON，并由 Spring 控制器以 JSON 格式发送回 UI。

# php - 具有 IP 历史记录的投票系统

> ID：15344701
> 
> 赞同：0
> 
> 时间：2013-03-11T17:22:47.250
> 
> 标签：php, mysql

我正在构建具有投票能力的应用程序（+1/-1），并试图为此拥有简单快速的 mysql 表结构。到目前为止，我的想法很简单，并且是这样的：

**tbl_votes**存储特定对象的投票值：

```
CREATE TABLE IF NOT EXISTS `tbl_votes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `vote` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

**tbl_votes_ips**存储 IP<=>投票历史，因此某些 IP 只能投票一次：

```
CREATE TABLE IF NOT EXISTS `tbl_votes_ips` (
  `vote` int(11) NOT NULL,
  `ip` int(11) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

目的是在插入新值时减少 SQL 调用。目的是在高负载的网站上使用。此类功能的最佳实践是什么？

请分享你的经验。

**PS**我有为vote-ip对制作唯一密钥的想法，所以我不选择而只是处理mysql“非唯一值”错误：

```
ALTER TABLE `tbl_votes_ips` ADD UNIQUE (
`vote` ,
`ip`
); 
```

但这不适用于用户更改它的选择的情况。所以无论如何我需要打额外的电话来搜索 IP 和投票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:44:01.750

**备选方案 A**

需要用户注册和登录。

**备选方案 B**

*   设置一个独特的cookie。如果它在以后的访问中出现，请使用它。
*   连接浏览器用户代理 + IP 地址并创建一个哈希值。如果 cookie 不存在，则在以后的访问中使用该哈希值作为该用户是否投票的代理。它将有大约 85% 的可靠性。
*   如果您愿意，您可以包含除用户代理 + IP 之外的更多因素，但这涉及更多。有关更多详细信息，请参阅[Panopticlick](https://panopticlick.eff.org/)。

**备选方案 C**

使用[Evercookie](http://samy.pl/evercookie/)。如果您走这条路，请在您的隐私政策中非常清楚地表明您正在这样做。公司因使用但未披露这些技术的使用而被起诉（有些成功，有些不成功，但无论哪种方式都花费了他们的时间和金钱）。

**限制**

请记住，这些技术中的任何一种对某人来说都不*是那么*难解决。多个用户注册只是一个免费的电子邮件帐户。如果您回收有线电视盒，许多家庭互联网连接都会获得新的 IP。智能手机通过在街上行驶一英里左右来获得新的 IP。如果用户的系统上有多个浏览器，即使 Panopticlick 也会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:25:39.433

使用唯一的密钥，例如

```
PRIMARY KEY (vote, ip) 
```

然后一个简单的

```
INSERT INTO tbl_votes_ips (vote, ip) VALUES ($vote, $ip) 
ON DUPLICATE KEY UPDATE SET vote=VALUES(vote) 
```

这可以作为单个查询完成，mysql 将决定它应该是插入还是更新。

而且，正如 Eric J 上面提到的，对于任何共享一个公共代理/nat 网关的用户组，您的系统将会崩溃。并且也不会处理 IPv6 上的用户。虽然它还不是特别普遍，但它已经到了不能再忽视 IPv6 支持的地步了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:33:52.840

每个用户投票怎么样？让用户能够使用电子邮件进行注册，并确保您将确认电子邮件发送到他们的电子邮件，以便他们进行验证。然后你得到你的唯一标识符来禁止同一个用户对一个项目进行多次投票，无论他们从哪里登录。

如果您希望不允许一组用户对某个部分进行投票，那么您需要创建一个用户类并与 users 表相关联，以便 John 和 Smith 拥有相同的用户类并且只允许投票一次。

# jquery - 位置：固定 div 在 safari ios6 发布时向上滚动并向下跳

> ID：15344706
> 
> 赞同：0
> 
> 时间：2013-03-11T17:22:58.620
> 
> 标签：jquery, ios, css, webview, safari

我有两个`divs`。On 是没有设置高度或位置的内容。我有第二`div`个标签导航栏。这有一个高度`50px`并设置为`position: fixed; bottom: 0;`

当页面加载时，div 正确位于底部。但是当你触摸屏幕并滚动时，div 会随着页面移动，直到你释放。

我认为这与 safari 即使使用坚固的设备也如何处理滚动有关，但我不知道如何解决这个问题。

编辑：一旦你释放 div 就会回到它应该在的底部。

编辑：内容已加载查看 jquery ajax 调用。如果我等待几秒钟以确保页面完全加载，问题就会消失。解决方案是禁用滚动直到页面完全加载吗？

# python - 在 Python 中获取昨天的日期，DST 安全

> ID：15344710
> 
> 赞同：25
> 
> 时间：2013-03-11T17:23:09.650
> 
> 标签：python

我有一个 python 脚本，它使用此调用以 YYYY-MM-DD 格式获取昨天的日期：

```
str(date.today() - timedelta(days=1))) 
```

它大部分时间都可以工作，但是今天早上运行脚本时，`2013-03-11 0:35 CDT`它返回`"2013-03-09"`而不是`"2013-03-10"`.

据推测，夏令时（昨天开始）是罪魁祸首。我猜想`timedelta(days=1)`实现的方式是减去 24 小时，而 24 小时前`2013-03-11 0:35 CDT`是`2013-03-09 23:35 CST`，这导致了`"2013-03-09"`.

那么在 python 中获取昨天日期的 DST 安全的好方法是什么？

**更新：** 在 bukzor 指出我的代码应该可以正常工作后，我回到脚本并确定它没有被使用。它设置了默认值，但包装器外壳脚本明确设置了日期。所以这个错误在 shell 脚本中，而不是 python 脚本中。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-11T17:29:28.937

```
datetime.date.fromordinal(datetime.date.today().toordinal()-1) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-11T17:42:30.460

我无法在 python2.7 或 python3.2 中重现您的问题：

```
>>> import datetime
>>> today = datetime.date(2013, 3, 11)
>>> print today
2013-03-11
>>> day = datetime.timedelta(days=1)
>>> print today - day
2013-03-10 
```

在我看来，这已经是“夏令时安全”`yesterday()`功能的最简单实现了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-11T17:54:05.940

如果您使用对时区（尤其是 DST）一无所知的`2013-03-10`天真对象，您会得到：`datetime`

```
from datetime import datetime, timedelta

dt_naive = datetime(2013, 3, 11, 0, 35)
print((dt_naive - timedelta(days=1)).date()) # ignores DST
# -> 2013-03-10 
```

`2013-03-09`如果您对 24 小时前的日期感兴趣，这是正确的。

```
import pytz # $ pip install pytz

local_tz = pytz.timezone("America/Chicago") # specify your local timezone
dt = local_tz.localize(dt_naive, is_dst=None) # raise if dt_naive is ambiguous
yesterday = local_tz.normalize(dt - timedelta(days=1)).date()
print(yesterday)
# -> 2013-03-09 
```

注意：`.date()`剥离时区信息，以便您`2013-03-10`再次获得：

```
print(dt.date() - timedelta(days=1))
# -> 2013-03-10 
```

要在特定时区获得昨天：

```
from datetime import datetime, time, timedelta
import pytz # $ pip install pytz

tz = pytz.timezone("America/Chicago")
yesterday = datetime.now(tz).date() - timedelta(days=1)

# to add timezone info back (to get yesterday's midnight)
midnight = tz.localize(datetime.combine(yesterday, time(0, 0)), is_dst=None) 
```

如果时区在该时间前后缺失几天，则通过剥离时区信息获取昨天可能会失败。然后此方法将在给定时区产生不存在的日期（`tz.localize()`引发错误）。

# java - 在 Java 中创建按创建/更新时间排序的有序 HashMap

> ID：15344712
> 
> 赞同：1
> 
> 时间：2013-03-11T17:23:14.080
> 
> 标签：java

我正在处理以下格式的数据元组：[IP, number-of-bytes-served, time]。我在 IP 上创建了一个 HashMap 来计算为每个 IP 提供的字节数。然后，我意识到我需要删除一些最近最少使用的键值对来创建更多空间。我想创建一个时间限制，比如说 1 小时，然后删除在该期间没有任何操作的键值对。所以我需要为每对保存更新时间。事实上，为了获得良好的性能，让这些对按时间戳排序似乎是合理的。

因此，我想做的是根据键值对的创建或更新时间维护一个排序列表。我需要明确知道这些创建和更新时间。我提出了两种不同的想法，但现在完全确定使用哪一种以及如何使用。这是我的两个想法：

*   我需要一个 LinkedList，其 head 指向最近更新的键值对的时间戳，并让这个键值对指向列表节点。
*   我需要根据它们的创建/更新时间按排序顺序维护 HashMap。也许我需要使用整数值和长指示时间戳将值从整数更改为对象。

问题是如何在 Java 中实现这些以实现高效的添加/删除/获取性能？或者我可以使用哪些库来获取按创建/更新时间排序的 HashMap？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:39:33.833

提供我的两分钱......我最近做了类似的事情（当时我不知道`LinkedHashMap`），我需要跟踪一些会话信息。

我最终使用了一个`ConcurrentHashMap`，因为多个用户会话可以同时处于活动状态，并且每 30 分钟运行一次清理以清除陈旧的会话数据。我的想法是，因为应用程序需要更快的性能来处理会话数据，所以我将会话 ID 作为关键。当我需要清除最旧的数据时，只需获取一个值列表并进行排序（前提是该类实现了`Comparable`或者您可以为它编写一个`Comparator`），因为这不是“经常”完成的。

希望有帮助。

PS。我很好奇这与`LinkedHashMap`实现相比如何？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:18:20.023

这是[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)适合的情况，覆盖该`removeEldestEntry()`方法。该映射的键是 IP 地址，值是 的元组`(bytes, last_update)`。

首先，您需要使用“访问顺序”创建地图：这意味着对地图条目的任何访问都会将该条目移动到列表的末尾（MRU）。然后，在获得新记录时执行以下操作：

*   如果映射不包含 IP 条目，则创建一个具有字节数的新条目。
*   如果 map 确实包含一个条目，则从中获取字节数，并通过将新字节添加到旧字节来*创建新条目。*然后`put()`新的条目进入地图，替换旧的。

您的元组应自动将时间字段设置为当前时间。但是，要理解的是你并不真正关心时间，它只是一个用于从列表中删除项目的属性。

覆盖`removeEldestEntry()`，`true`如果时间超出您的范围，则返回。

虽然，老实说，我认为您最好使用基于大小的驱逐策略（将您的地图限制为固定数量的条目）。基于时间的策略会使您面临 DDOS 攻击，在这种情况下，您会同时收到大量条目，从而耗尽您的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:29:05.130

要按创建/更新时间排序，您需要有时间进行比较。这意味着您的对象必须知道它*何时*创建/更新。这可以通过`version`在创建对象时默认设置一个字段并在`new Date()`更新对象时设置一个字段来相对容易地完成。

您可以将自己建立在一些结构中（`TreeSet`尤其`TreeMap`是），它们实现了由对象本身（`Comparable`接口）或`Comparator`. 如果您存储的项目保存了创建日期和更新日期，您可以实现一个比较器来帮助排序过程。

如果您被限制为`LinkedList`and `HashMap`，则必须使用例如 对列表进行排序`Collections#Sort`。在 的情况下`HashMap`，您必须对其条目集进行排序，但由于您无法修改它，因此您必须以这种方式生成一个新的排序映射。

尽管如此，a`HashMap`是一个与排序无关的结构，因此在迭代它时仍然会遇到一些问题。A`LinkedHashMap`可以解决这个问题，但同样，这完全取决于您的数据类型限制。

# c++ - 将命令行参数转换为字符串

> ID：15344714
> 
> 赞同：38
> 
> 时间：2013-03-11T17:23:36.267
> 
> 标签：c++

我有一个读取硬编码文件路径的程序，我想让它从命令行读取文件路径。为此，我更改了这样的代码：

```
#include <iostream>

int main(char *argv[])
{
...
} 
```

但是，`argv[1]`以这种方式暴露的变量似乎是指针类型，我需要它作为字符串。我应该怎么做才能将此命令行参数转换为字符串？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-11T17:25:26.887

它已经是一个 C 风格的字符串数组：

```
#include <iostream>
#include <string>
#include <vector>

int main(int argc, char *argv[]) // Don't forget first integral argument 'argc'
{
  std::string current_exec_name = argv[0]; // Name of the current exec program
  std::vector<std::string> all_args;

  if (argc > 1) {
    all_args.assign(argv + 1, argv + argc);
  }
} 
```

参数`argc`是参数的计数加上当前的 exec 文件。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-11T17:24:54.177

您可以创建一个`std::string`

```
#include <string>
#include <vector>
int main(int argc, char *argv[])
{
  // check if there is more than one argument and use the second one
  //  (the first argument is the executable)
  if (argc > 1)
  {
    std::string arg1(argv[1]);
    // do stuff with arg1
  }

  // Or, copy all arguments into a container of strings
  std::vector<std::string> allArgs(argv, argv + argc);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-05-25T01:03:55.503

无需对此表示赞同。如果[Benjamin Lindley](https://stackoverflow.com/users/440119/benjamin-lindley)将他的单行评论作为答案，那就太酷了，但既然他没有，那就这样吧：

`std::vector<std::string> argList(argv, argv + argc);`

如果您不想包含`argv[0]`因此不需要处理可执行文件的位置，只需将指针加一：

`std::vector<std::string> argList(argv + 1, argv + argc);`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-12T03:07:33.860

我不确定这是否是 100% 可移植的，但操作系统**应该**解析 args 的方式是扫描控制台命令字符串并在每个令牌的末尾插入一个 nil-term 字符，并且`int main(int,char**)`不使用`const char**`所以我们可以只需从第三个参数开始遍历 args（**@note**第一个 arg 是工作目录）并向后扫描到 nil-term char 并将其转换为空格，而不是从第二个参数的开头开始并向前扫描到零项字符。这是带有测试脚本的函数，如果您确实需要对多个 nil-term char 进行 un-nil-ify，请发表评论，以便我修复它；谢谢。

```
#include <cstdio>
#include <iostream>

using namespace std;

namespace _ {
/* Converts int main(int,char**) arguments back into a string.
@return false if there are no args to convert.
@param arg_count The number of arguments.
@param args      The arguments. */
bool ArgsToString(int args_count, char** args) {
  if (args_count <= 1) return false;
  if (args_count == 2) return true;
  for (int i = 2; i < args_count; ++i) {
    char* cursor = args[i];
    while (*cursor) --cursor;
    *cursor = ' ';
  }
  return true;
}
}  // namespace _

int main(int args_count, char** args) {
  cout << "\n\nTesting ArgsToString...\n";

  if (args_count <= 1) return 1;
  cout << "\nArguments:\n";
  for (int i = 0; i < args_count; ++i) {
    char* arg = args[i];
    printf("\ni:%i\"%s\" 0x%p", i, arg, arg);
  }
  cout << "\n\nContiguous Args:\n";
  char* end = args[args_count - 1];
  while (*end) ++end;
  cout << "\n\nContiguous Args:\n";
  char* cursor = args[0];
  while (cursor != end) {
    char c = *cursor++;
    if (c == 0)
      cout << '`';
    else if (c < ' ')
      cout << '~';
    else
      cout << c;
  }
  cout << "\n\nPrinting argument string...\n";
  _::ArgsToString(args_count, args);
  cout << "\n" << args[1];
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T17:26:58.683

这很简单。只需这样做：

```
#include <iostream>
#include <vector>
#include <string.h>

int main(int argc, char *argv[])
{
    std::vector<std::string> argList;
    for(int i=0;i<argc;i++)
        argList.push_back(argv[i]);
    //now you can access argList[n]
} 
```

@Benjamin Lindley 你是对的。这不是一个好的解决方案。请阅读 juanchopanza 的回答。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-27T15:22:41.570

```
#include <iostream>

std::string commandLineStr= "";
for (int i=1;i<argc;i++) commandLineStr.append(std::string(argv[i]).append(" ")); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-22T20:39:54.500

因为打印我放置在变量中的参数的所有尝试都失败了，所以这里我的 2 个字节用于这个问题：

```
std::string dump_name;

(stuff..)

if(argc>2)
{
    dump_name.assign(argv[2]);
    fprintf(stdout, "ARGUMENT %s", dump_name.c_str());
} 
```

注意 assign 的使用，以及 c_str() 函数调用的需要。

# javascript - 使用 Jquery 选择导航列表项（带有 URL 加载）

> ID：15344715
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:23:37.087
> 
> 标签：javascript, jquery

我有这个导航菜单：

```
 <ul>
      <li class="click-li" id="tray-active"><a href="/">Home</a></li> <!-- Active page -->
      <li class="click-li"><a href="/news">News</a></li>
      <li class="click-li"><a href="/products">Products</a></li>
      <li class="click-li"><a href="/sales">General Sales T and C</a></li>
      <li class="click-li"><a href="/jobs">Job Opportunities</a></li>
      <li class="click-li"><a href="/inquire">Inquiry</a></li>
    </ul> 
```

单击锚点时，它将重新加载页面（因为我的网站基于 CMS）。所以我猜这就是这段代码不起作用的原因：

```
 $(document).ready(function(){
        console.log("document ready");
        $("#tray li").removeAttr("id"); 

        $('.click-li').live('vclick', function() {
          var subMenuItem = $(this).text();
          alert('Sub Menu Item: '+subMenuItem);
        });
  }); 
```

我的主要目标是将 clicked`tray li` `id`属性设置为`"tray-active"`以便应用活动的 CSS `nav`。

更新：

好的，这行得通：

```
 $('.click-li').on('click', function() {
          var subMenuItem = $(this).text();
          alert('Sub Menu Item: '+subMenuItem);
        }); 
```

仍然有问题，因为当页面重新加载时，在单击导航菜单后，选定的会获得其“活动”css 样式，除了指向的`li`那个之外，我如何迭代另一个，以便我可以删除他们的 id？`.click-li``$(this)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:35:31.823

我想这就是你所关心的

```
$(document).ready(function(){
    console.log("document ready");
    $('.click-li').click(function(event) {
        event.preventDefault();
        $(".click-li").removeAttr("id"); 
        var subMenuItem = $(this).text();
        alert('Sub Menu Item: '+subMenuItem);
        $(this).attr("id", "tray-active");
    });
}); 
```

[http://jsfiddle.net/XYJaf/6/](http://jsfiddle.net/XYJaf/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:25:46.403

使用 event.preventDefault：[http](http://api.jquery.com/event.preventDefault/) ://api.jquery.com/event.preventDefault/ 这将防止页面在您单击锚标记时重新加载。另外，考虑使用 .on ，因为 .live 已被弃用。

```
$('ul').on('click', '.click-li', function(e) {
    e.preventDefault();
    var subMenuItem = $(this).text();
    alert('Sub Menu Item: '+subMenuItem);
}); 
```

# android - 为什么 Eclipse 无法识别我的 Nexus 7？

> ID：15344724
> 
> 赞同：2
> 
> 时间：2013-03-11T17:24:05.483
> 
> 标签：android, eclipse

我刚刚获得 4.2.2 更新，但现在 Eclipse 无法识别我的 Nexus 7（用作我的应用程序开发平台）。自更新以来，我无法测试一次运行。

Android 设备选择器框现在将目标显示为*未知和离线*！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:26:34.337

您可能需要重新安装手机的 USB 驱动程序，并确保您在手机的开发人员选项中启用了调试模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:47:54.233

有同样的问题（设备显示但只离线）并尝试了几个小时的很多东西，例如......

*   安装华硕驱动程序（[http://support.asus.com/Download.aspx?SLanguage=en&m=Nexus%207&p=28&s=2](http://support.asus.com/Download.aspx?SLanguage=en&m=Nexus%207&p=28&s=2)）
*   使用最新的 Google ADB 驱动程序（和 SDK）
*   删除其他 ABD 驱动程序（三星，...）
*   按照步骤[Nexus 7 ADB 与 Win7 上的 Google 驱动程序 MTP 问题？](https://stackoverflow.com/questions/13892940/nexus-7-adb-with-google-driver-mtp-issue-on-win7)
*   尝试根据[为什么 adb 在设备字符串后返回脱机？](https://stackoverflow.com/questions/8162581/why-does-adb-return-offline-after-the-device-string)
*   尝试 MTP 和 PTP 模式[Nexus 7 通过 Windows 7 x64 的“adb 设备”在 USB 上不可见](https://stackoverflow.com/questions/11974700/nexus-7-not-visible-over-usb-via-adb-devices-from-windows-7-x64)
*   根据[Nexus 7 使用 PdaNet 进行驱动程序安装，通过 Windows 7 x64 的“adb 设备”在 USB 上不](https://stackoverflow.com/questions/11974700/nexus-7-not-visible-over-usb-via-adb-devices-from-windows-7-x64)可见

...以及所有组合;）有时它有效，有时它没有（这在工作站重新启动后经常改变）。这让我很头疼。

*确实有效*的是**在 Linux 环境**中设置SDK 。我创建了一个虚拟机，安装了 Ubuntu 和 SDK，转发了 USB 端口 - 等等 - 没问题。

我知道，这可能不是你的选择 - 所以这只是以防万一...... ;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T11:04:14.513

有两个可能的原因。一是安装正确的驱动程序并正确设置开发选项。有很多答案。第二个原因（也是一直让我印象深刻的一个）是当您第一次获得新的 Nexus 7 平板电脑时，它被设置为“媒体模式”。为了使用 adb，需要将其设置为“相机模式”。要将其设置为相机模式，请进入设置/存储。然后触摸右上角的那个小菜单。轻触“USB 计算机连接”，您将可以选择媒体模式或相机模式。如果它不是“相机模式”，那么所有驱动程序和开发人员的设置都会大惊小怪，没有任何区别。将其设置为相机模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T03:08:50.643

确保您还拥有制造商提供的特定手机的 OEM 驱动程序。这通常会被错过。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T19:25:03.057

*您需要从Android SDK Manager*将您的 Android SDK 更新到最新版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T08:58:30.963

驱动程序已成功安装，但 DDMS 仍然无法识别设备？这对我有用：

1.  转到设备的通知栏
2.  点击“作为媒体设备连接”
3.  选择相机 (PTP) 选项。

设备驱动程序将自动更新相机选项，设备将在 DDMS 中列出。

# twitter-bootstrap - 游戏框架中的引导字形图标

> ID：15344727
> 
> 赞同：10
> 
> 时间：2013-03-11T17:24:11.320
> 
> 标签：twitter-bootstrap, playframework, playframework-2.0

我想在游戏框架中使用[Bootstraps 字形图标](http://twitter.github.com/bootstrap/base-css.html#icons)

所以当我使用时`<i class="icon-search" />`，引导程序正在“assets/img/...”中寻找图标。此行为与[播放应用程序](http://www.playframework.com/documentation/2.1.0/Anatomy)的结构相冲突，因为图像位于“assets/images/...”中。

所以我试图通过为“assets/img”的 GET 请求定义一个额外的路由来重新映射它：

```
# Map static resources from the /public folder to the /assets URL path
GET     /assets/img/*file           controllers.Assets.at(path="/public/images", file)
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

但是这样做，我得到一个编译错误“没有足够的方法参数：（路径：字符串，文件：字符串）play.api.mvc.Call。未指定的值参数文件。”在我调用的所有其他公共资产上。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T17:41:22.607

实际上描述我的问题帮助我在这里搜索它;) ...stackoverflow 已经有了答案。希望我的问题至少与我自己回答的这个问题有更多的相关性。

根据[How to use Twitter Bootstrap 2 with play framework 2.x](https://stackoverflow.com/questions/10436815/how-to-use-twitter-bootstrap-2-with-play-framework-2-0/10437737#10437737)我必须为每个单独的 glyphicons 文件定义静态路由，然后对其他资产的请求不会被“错误路由”。

我只是添加了

```
# Map Bootstrap images
GET     /assets/img/glyphicons-halflings.png            controllers.Assets.at(path="/public", file="/images/glyphicons-halflings.png")
GET       /assets/img/glyphicons-halflings-white.png      controllers.Assets.at(path="/public", file="/images/glyphicons-halflings-white.png")

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

到我的路线，所以我不需要以特殊方式修改任何框架。

无论如何感谢您的建议

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T20:29:41.123

实际上...人们经常将某些***初始结构***与它***必须完全相同***。如果是`app`文件夹，那是正确的。Play 使用了一些隐含的导入，`controllers`并且`models`无缘无故地改变它会带来更多的麻烦而不是它的价值。无论如何`public`，文件夹不会在任何默认操作/控制器/视图中呈现，因此可以完全自定义其布局。

（注意：好的，我必须承认，我没有读过这个文档，他们写道***你应该像这样组织你的静态资产以保持所有 Play 应用程序的一致性。***但这**不是真的**！:)）

一般规则是：不要破坏放在`public`dir 中的即用型框架、插件等。例如，虽然您可以通过一些额外的路线很容易地修改引导程序，但如果您尝试使用 Aloha 编辑器进行相同操作，您可能会永久损坏它。如果你想保持一个干净的结构 - 创建一个示例`public/frameworks/bootstrap-current`文件夹并从原始作者那里提取包。

只需简单的解压缩包，它就可以让您更新到较新的版本，也可以避免您的头痛。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T17:30:47.947

如果您使用的是 Bootstrap LESS，请更改 variables.less 中的路径：

```
// Sprite icons path
// -------------------------
@iconSpritePath:          "assets/images/techcore/glyphicons-halflings.png"; 
```

# android - Android - 使用 SoundManager 从 OnTouch 播放随机声音

> ID：15344730
> 
> 赞同：0
> 
> 时间：2013-03-11T17:24:23.567
> 
> 标签：android, random, ontouchlistener

每当用户触摸屏幕时，我都希望播放随机声音。我已经找到并使用了这些其他帖子来帮助设置我的项目并让我朝着正确的方向前进。

[按下按钮时播放随机声音文件 - Android](https://stackoverflow.com/questions/13885420/play-random-sound-file-on-button-press-android)

[声音管理器播放随机文件的问题](https://stackoverflow.com/questions/10168826/issue-with-sound-manager-playing-random-files)

[声音管理器播放随机文件的问题](https://stackoverflow.com/questions/10168826/issue-with-sound-manager-playing-random-files)

[播放随机声音 onTouch](https://stackoverflow.com/questions/10115238/play-a-random-sound-ontouch)

问题是，使用我当前的代码，我得到了 NullPointerException。LogCat 显示它来自两个位置：

在主要课程中

```
int x = r.nextInt(1); 
```

在 SoundManager 类中

```
mSoundPool.play(mSoundPoolMap.get(index), streamVolume, streamVolume, 1, 0, 1f); 
```

我知道这只是我忽略的东西，但似乎无法弄清楚。对 Android 和 Java 开发来说相当新，所以这就是原因。我已经包含了 Main 和 SoundManager 类。任何帮助，将不胜感激！

主要课程

```
import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;

public class Main extends Activity implements OnTouchListener
{
    Random r = new Random();
    int x = r.nextInt(1);

    private SoundManager mSoundManager;

    @Override public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ImageView image = (ImageView) findViewById(R.id.mIll);
        image.setOnTouchListener(this);

        mSoundManager = new SoundManager();
        mSoundManager.initSounds(getBaseContext());
        mSoundManager.addSound(1, R.raw.m1);
        mSoundManager.addSound(2, R.raw.m2);
        mSoundManager.addSound(3, R.raw.m3);
        mSoundManager.addSound(4, R.raw.m4);
        mSoundManager.addSound(5, R.raw.m5);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {

    switch (event.getAction()) 
    {
        case MotionEvent.ACTION_DOWN:
        {
            mSoundManager.playSound(x);
        }

        break;

    }

    return true;

    }

} 
```

声音管理器

```
import java.util.HashMap;
import android.content.Context;
import android.media.AudioManager;
import android.media.SoundPool;

public class SoundManager {

    private SoundPool mSoundPool;
    private HashMap<Integer, Integer> mSoundPoolMap;
    private AudioManager mAudioManager;
    private Context mContext;
    public static final int maxSounds = 1;

    public SoundManager() {

    }

    public void initSounds(Context theContext) {
        mContext = theContext;
        mSoundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
        mSoundPoolMap = new HashMap<Integer, Integer>();
        mAudioManager = (AudioManager) mContext
                .getSystemService(Context.AUDIO_SERVICE);
    }

    public void addSound(int Index, int SoundID) {
        mSoundPoolMap.put(Index, mSoundPool.load(mContext, SoundID, 1));

    }

    public void playSound(int index) {

        int streamVolume = mAudioManager
                .getStreamVolume(AudioManager.STREAM_MUSIC);
        mSoundPool.play(mSoundPoolMap.get(index), streamVolume, streamVolume,
                1, 0, 1f);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:35:51.987

问题是

```
int x = r.nextInt(1);  //<<<< 
```

此行始终生成 0 作为随机数，并且在.check null`0`中不存在密钥，然后从as 获取值：`HashMap``HashMap`

```
if(mSoundPoolMap.containsKey(index)){
 mSoundPool.play(mSoundPoolMap.get(index), streamVolume, streamVolume,
                1, 0, 1f);
}
else{
 // Generate  next number

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:30:50.497

将初始化移动到 onCreate() 部分

```
 Random r ;
  int x ;

  @Override public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    r= new Random();
    x= r.nextInt(1);
    ...
} 
```

# android - 如何登录+仅询问权限*一次* [Facebook] [Android]

> ID：15344735
> 
> 赞同：3
> 
> 时间：2013-03-11T17:24:50.180
> 
> 标签：android, facebook, permissions, facebook-login

Facebook API (3.0) 有点问题。在来这里问我自己之前，我阅读*了很多*关于这个问题的问题。大多数人满足于“只是单独询问读/写权限”，但我根本不想要这样。

我想 - 不使用 facebookLoginButton - 登录并*同时*请求许可 (*publish_stream*)。我知道这是可能的，因为有几个应用程序可以做到这一点，例如 Instagram。

谁能告诉我怎么做？我一直在尝试查找此信息一段时间，但似乎没有任何效果。

# php - 无法通过 cURL 连接到 PayPal API

> ID：15344742
> 
> 赞同：14
> 
> 时间：2013-03-11T17:25:10.507
> 
> 标签：php, curl, paypal

我正在尝试通过“经典”NVP API 设置 PayPal Express Payment。

尝试使用 cURL 从我的服务器连接到 PayPal-Sandbox，连接停止并在大约 2 分钟后超时。

我正在使用文档中的[示例调用](https://www.x.com/developers/paypal/documentation-tools/express-checkout/gs_expresscheckout)：

```
curl -v --insecure  https://api-3t.sandbox.paypal.com/nvp  -d  "USER=platfo_1255077030_biz_api1.gmail.com&PWD=1255077037&SIGNATURE=Abg0gYcQyxQvnf2HDJkKtA-p6pqhA1k-KTYE0Gcy1diujFio4io5Vqjf&METHOD=SetExpressCheckout&VERSION=78&PAYMENTREQUEST_0_PAYMENTACTION=SALE&PAYMENTREQUEST_0_AMT=19&PAYMENTREQUEST_0_CURRENCYCODE=USD&cancelUrl=http://www.yourdomain.com/cancel.html&returnUrl=http://www.yourdomain.com/success.html" 
```

外壳输出是：

```
* About to connect() to api-3t.sandbox.paypal.com port 443 (#0)
* Trying 173.0.82.83... Connection timed out
* couldn't connect to host
* Closing connection #0
curl: (7) couldn't connect to host 
```

当我尝试通过 PHP 执行此操作时，`curl`我没有收到任何错误，只是一个空的资源句柄。

我可以轻松地从我的本地机器和我可以访问的其他服务器发出请求（并取回正确的数据），所以我猜这是服务器端的一些错误配置。不是服务员，我有点不知所措。

cURL 已启用并记录以下内容`phpinfo`：

```
libcurl/7.21.0 OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.15 libssh2/1.2.6 
```

openSSL 也已启用。此外，我在尝试连接到 API 的实时版本时遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-11T12:33:25.973

尝试

```
$ch = curl_init();
# Merchant Account Credentials
$ppUserID = "User Id Email"; //Take it from sandbox dashboard for test mode or take it from paypal.com account in production mode, help: https://developer.paypal.com/docs/classic/api/apiCredentials/
$ppPass = "User Pass"; //Take it from sandbox dashboard for test mode or take it from paypal.com account in production mode, help: https://developer.paypal.com/docs/classic/api/apiCredentials/
$ppSign = "Paypal Sign"; //Take it from sandbox dashboard for test mode or take it from paypal.com account in production mode, help: https://developer.paypal.com/docs/classic/api/apiCredentials/

$ppAppID = "APP-80W284485P519543T"; //if it is sandbox then app id is always: APP-80W284485P519543T

$paypal_header_options = array();
    $paypal_header_options[] = "X-PAYPAL-SECURITY-USERID: $ppUserID";
    $paypal_header_options[] = "X-PAYPAL-SECURITY-PASSWORD: $ppPass";
    $paypal_header_options[] = "X-PAYPAL-SECURITY-SIGNATURE: $ppSign";
    $paypal_header_options[] = "X-PAYPAL-REQUEST-DATA-FORMAT: NV";
    $paypal_header_options[] = "X-PAYPAL-RESPONSE-DATA-FORMAT: NV";
    $paypal_header_options[] = "X-PAYPAL-APPLICATION-ID: $ppAppID";

$URL = 'https://api-3t.sandbox.paypal.com/nvp'
    .'?USER='.$ppUserID
    .'&PWD='.$ppPass
.'&SIGNATURE='.$ppSign
    .'&METHOD=SetExpressCheckout' 
    .'&VERSION=93'
    .'&RETURNURL=https://localhost/express-checkout-single-product/success.php?success=true'
    .'&CANCELURL=https://localhost/express-checkout-single-product/index.php'
.'&PAYMENTREQUEST_0_CURRENCYCODE=USD'
.'&PAYMENTREQUEST_0_AMT=250.00'    #The payment amount for the first receiver   # Merchant(Primary AC) Account Amount
.'&PAYMENTREQUEST_0_ITEMAMT=225.00'                         # Merchant(Primary AC) Account Email
.'&PAYMENTREQUEST_0_TAXAMT=25.00'    #Receiver designation (there can be only 1 primary receiver)
.'&PAYMENTREQUEST_0_PAYMENTACTION=Order' 
.'&PAYMENTREQUEST_0_SELLERPAYPALACCOUNTID=email' 
.'&PAYMENTREQUEST_0_PAYMENTREQUESTID=CART110-PAYMENT0'    #The payment amount for the second receiver   # Seller(Secondry AC) Account Amount
.'&PAYMENTREQUEST_1_CURRENCYCODE=USD'
.'&PAYMENTREQUEST_1_AMT=75.00'    #The payment amount for the first receiver    # Merchant(Primary AC) Account Amount
.'&PAYMENTREQUEST_1_ITEMAMT=65.00'                          # Merchant(Primary AC) Account Email
.'&PAYMENTREQUEST_1_TAXAMT=10.00'    #Receiver designation (there can be only 1 primary receiver)
.'&PAYMENTREQUEST_1_PAYMENTACTION=Order' 
.'&PAYMENTREQUEST_1_SELLERPAYPALACCOUNTID=email' 
.'&PAYMENTREQUEST_1_PAYMENTREQUESTID=CART110-PAYMENT1' 
    .'&L_PAYMENTREQUEST_0_NAME0=Departs2'
    .'&L_PAYMENTREQUEST_0_NAME0=Sunset'
.'&L_PAYMENTREQUEST_0_QTY0=1'
    .'&L_PAYMENTREQUEST_0_AMT0=125'
    .'&L_PAYMENTREQUEST_0_TAXAMT0=15'
    .'&L_PAYMENTREQUEST_0_NAME1=Departs'
.'&L_PAYMENTREQUEST_0_QTY1=1'
    .'&L_PAYMENTREQUEST_0_AMT1=100.00'
    .'&L_PAYMENTREQUEST_0_TAXAMT1=10.00';
    curl_setopt($ch, CURLOPT_URL, $URL);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  //  curl_setopt($ch, CURLOPT_HTTPHEADER, $paypal_header_options);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    $paypal_response = curl_exec($ch);

$responseAr = explode('&', $paypal_response);
$parsedResponseAr = array();
foreach($responseAr as $i => $value) {
    $tmpAr = explode('=', $value);
    if(!empty($tmpAr))
        $parsedResponseAr[strtoupper($tmpAr[0])] = urldecode($tmpAr[1]);
}
print_r(json_encode($parsedResponseAr));
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T22:20:37.030

A) 首先尝试`wget https://api-3t.sandbox.paypal.com/nvp`看看您是否可以通过“Bad Request”回复获得简单的连接，如果没有，您已被 Paypal 服务器阻止或您的防火墙阻止您在端口 443 上访问 paypal

B）尝试添加自定义标题：`-H "Host: api-3t.sandbox.paypal.com"`

`curl -v --insecure https://api-3t.sandbox.paypal.com/nvp -d "USER=platfo_1255077030_biz_api1.gmail.com&PWD=1255077037&SIGNATURE=Abg0gYcQyxQvnf2HDJkKtA-p6pqhA1k-KTYE0Gcy1diujFio4io5Vqjf&METHOD=SetExpressCheckout&VERSION=78&PAYMENTREQUEST_0_PAYMENTACTION=SALE&PAYMENTREQUEST_0_AMT=19&PAYMENTREQUEST_0_CURRENCYCODE=USD&cancelUrl=http://www.yourdomain.com/cancel.html&returnUrl=http://www.yourdomain.com/success.html" -H "Host: api-3t.sandbox.paypal.com"`

C) 你使用的是什么版本的 CURL 和在什么平台上？我有：

```
curl 7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.21 Basic ECC zlib/1.2.3 libidn/1.18 libssh2/1.4.2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-22T15:45:29.907

您的错误是由于您的服务器版本的 nss 包和 api-3t.sandbox.paypal.com 使用 SNI 证书。您可以通过执行来验证它

`openssl s_client -servername api-3t.sandbox.paypal.com -tlsextdebug -connect api-3t.sandbox.paypal.com:443 2>/dev/null | grep "server name"`

在 bash 上。输出`TLS server extension "server name" (id=0), len=0`表明此服务器具有 SNI 证书。

解决方案其实很简单。

**对于 RedHat 变体：**

```
sudo yum -y update nss* 
```

**对于 Debian 变体：**

```
sudo apt-get update nss* 
```

您实际上不必更改代码（对于连接方面的问题）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-24T05:04:28.350

**很可能由于身份验证错误**或**颁发的 ssl 证书无效**，PayPal Express Payment 服务**停止/切断**您的连接。在这种情况下，请尝试向服务提供商询问此问题。

 ****希望能解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-21T13:35:04.673

就我而言，我现在已经在我的服务器中启用了 ICMP 流量，并且可以正常工作。

```
iptables -P INPUT ACCEPT; iptables -P OUTPUT ACCEPT
iptables -F INPUT; iptables -F OUTPUT 
```****

# javascript - 了解“console.log(typeof null);”的调用 在 javascript 控制台中

> ID：15344744
> 
> 赞同：0
> 
> 时间：2013-03-11T17:25:14.440
> 
> 标签：javascript, console, chromium

我刚刚在 Chromium **javascript 控制台**中执行了以下代码：

```
console.log(typeof null); 
```

结果显示在以下屏幕截图中：

![在此处输入图像描述](../Images/765cf604e6529a0aba4d3e0d8552f559.png)

我只是想知道灰`<- undefined`线是什么意思。有人可以请教吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:26:01.187

`undefined`这是最后一条语句的返回值。

```
> 5
5
> "Hello World"
"Hello World"
> (function(){ return 6})();
6 
```

每当 JavaScript 中的函数没有显式返回任何内容时，它都会`undefined`默认返回。

总结过程，`object`就是你`console.log(typeof null)`调用的结果。您的代码运行，登录`object`到控制台，然后打印函数调用的返回值，即`undefined`.

这可能是`eval`工作方式的结果。chrome 中的开发人员工具中的控制台可能`eval`在您的代码上运行。`eval`返回您放入其中的最后一条语句/表达式的值

```
> eval(5);
5 
```

（注意：我知道这很明显，但是在示例中使用 eval 时，我觉得有必要提及，虽然[REPL](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)是一个很好的用例，`eval`但我们必须记住[eval 是邪恶的](http://blogs.msdn.com/b/ericlippert/archive/2003/11/01/53329.aspx)）

# sql - SQL 跨多个表选择每个连接表中的最大日期

> ID：15344745
> 
> 赞同：2
> 
> 时间：2013-03-11T17:25:15.720
> 
> 标签：sql, oracle, join, max

我有一个 Oracle 11 SQL 查询，我从 4 个表中提取数据，这些表都由一个 ID 连接。连接到第一个表的 3 个表都有一个 ACTIVE_IND 值，该值需要为“Y”和一个生效日期 (EFF_DATE)，我需要每个表的最大生效日期记录。

我有一个可以在这里工作的查询，但想知道是否有更优化/有效/高效的编写方式，因为它看起来有点慢。我目前使用的看起来像这样：

```
SELECT DISTINCT A.TABLE1_ID,
                A.TABLE1_COL1,
                B.TABLE2_COL2,
                C.TABLE3_COL3,
                D.TABLE4_COL4
FROM TABLE1 A,
     TABLE2 B,
     TABLE3 C,
     TABLE4 D
WHERE B.TABLE2_ID = A.TABLE1_ID
  AND B.TABLE2_ACTIVE_IND = 'Y'
  AND B.TABLE2_EFF_DATE =
    (SELECT MAX (B2.TABLE2_EFF_DATE)
     FROM TABLE2 B2
     WHERE B2.TABLE2_ID = B.TABLE2_ID
       AND B2.TABLE2_ACTIVE_IND = 'Y')
  AND C.TABLE3_ID = A.TABLE1_ID
  AND C.TABLE3_ACTIVE_IND = 'Y'
  AND C.TABLE3_EFF_DATE =
    (SELECT MAX (C2.TABLE3_EFF_DATE)
     FROM TABLE3 C2
     WHERE C2.TABLE3_ID = C.TABLE3_ID
       AND C2.TABLE3_ACTIVE_IND = 'Y')
  AND D.TABLE4_ID = A.TABLE1_ID
  AND D.TABLE4_ACTIVE_IND = 'Y'
  AND D.TABLE4_EFF_DATE =
    (SELECT MAX (D2.TABLE4_EFF_DATE)
     FROM TABLE4 D2
     WHERE D2.TABLE4_ID = D.TABLE4_ID
       AND D2.TABLE4_ACTIVE_IND = 'Y')
ORDER BY A.TABLE1_ID; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:36:21.590

尝试：

```
SELECT DISTINCT A.TABLE1_ID,
                A.TABLE1_COL1,
                B.TABLE2_COL2,
                C.TABLE3_COL3,
                D.TABLE4_COL4
FROM TABLE1 A
JOIN (SELECT T2.*, 
             RANK() OVER (PARTITION BY TABLE2_ID ORDER BY TABLE2_EFF_DATE DESC) RN
      FROM TABLE2 T2
      WHERE TABLE2_ACTIVE_IND = 'Y') B ON B.TABLE2_ID = A.TABLE1_ID AND B.RN=1
JOIN (SELECT T3.*, 
             RANK() OVER (PARTITION BY TABLE3_ID ORDER BY TABLE3_EFF_DATE DESC) RN
      FROM TABLE3 T3
      WHERE TABLE3_ACTIVE_IND = 'Y') C ON C.TABLE3_ID = A.TABLE1_ID AND C.RN=1
JOIN (SELECT T4.*, 
             RANK() OVER (PARTITION BY TABLE4_ID ORDER BY TABLE4_EFF_DATE DESC) RN
      FROM TABLE4 T4
      WHERE TABLE4_ACTIVE_IND = 'Y') D ON D.TABLE4_ID = A.TABLE1_ID AND D.RN=1
ORDER BY A.TABLE1_ID; 
```

# php - 关系处理程序的方法命名

> ID：15344768
> 
> 赞同：0
> 
> 时间：2013-03-11T17:26:25.540
> 
> 标签：php, orm, methods, naming

我正在为 PHP 5.4 中的 SQL 数据库开发实体和查询管理器。有一种方法可以将两个查询连接到一个组合结果集。它使访问两个表之间的关系/关联成为可能。实际上它的工作原理如下所示

```
$companies = EQM::query('Company')->result();
$projects = EQM::query('Project')->result();
$companies->relate('projects', $projects, ['companyId']);

foreach ($companies as $company) {
    foreach($company->projects as $project) {
        //do something ...
    }
} 
```

你会如何命名该方法`relate()`？`hydrate()`, `merge()`, `join()`...

有什么建议么？

# javascript - 捕获单个字符串中的所有表单元素值

> ID：15344776
> 
> 赞同：0
> 
> 时间：2013-03-11T17:26:45.540
> 
> 标签：javascript

我使用以下 javascript 函数来捕获为表单中每个元素输入的值。一旦用户单击提交按钮，必须显示用户为每个控件输入的值。该代码适用于除单选按钮之外的所有控件。谁能建议我怎么做？

```
function DisplayFormValues(){
            var str = '';
            var elem = document.getElementById('form1').elements;
            for(var i = 0; i < elem.length; i++)
            {

                str += "<b>Name:</b>" + elem[i].name + "\n";
                str += "<b>Value:</b><i>" + elem[i].value + "\n";
                str += "<BR>";
            } 
            document.getElementById('lblValues').innerHTML = str;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:41:53.027

单选按钮和复选框的值不容易获取，因为它们在 DOM 中共享相同的名称。您必须遍历这些元素中的每一个并检查其子元素中的哪些被检查。

所以，你需要扩展你的循环。一种方法是：

```
function DisplayFormValues(){
    var theform = document.form1;
    var a = ['input', 'textarea', 'select'];
    var echo = '';
    for (var i = 0; i < a.length; i++) {
        var tag = a[i];
        var els = theform.getElementsByTagName(tag);
        for (var j = 0; j<els.length; j++) {
            el = els[j]; // the element
            if ((tag == 'input' && (el.type == 'text' || el.type == 'password')) || tag == 'select') {
                echo += '<strong>' + el.name + '</strong>: ' + el.value + '<br />';
            } else if ((tag == 'checkbox' || tag == 'radio') && el.checked) { // the element is checked!
                echo += '<strong>' + el.name + '</strong>: ' + el.value + '<br />';
            }
        }
    }
    document.getElementById('lblValues').innerHTML = echo;
} 
```

# ruby-on-rails - 如何将此 XML 解析为哈希

> ID：15344780
> 
> 赞同：0
> 
> 时间：2013-03-11T17:26:58.230
> 
> 标签：ruby-on-rails, ruby

我正在尝试将此 xml 解析为哈希。我正在使用 Hash.from_xml，但是当元素具有值和其他元素作为子元素时，它似乎无法处理情况。它只会取值，不会取任何孩子。

```
<?xml version="1.0" encoding="UTF-8"?>
<StatusResponse>
    <AccountID>123</AccountID>
    <ErrorMsg />
    <Test>Y</Test>
    <StatusList>
        <PICNumber>
            9477707123456123456781
            <Status>Youritemwasdeliveredat10:09AMon08/06/2007inPALOALTOCA94301.</Status>
            <StatusBreakdown>
                <Status_1>ArrivalatPostOfficeJune02201110:11amNORTHHOLLYWOODCA91605</Status_1>
                <Status_2>ForwardExpiredJune0220116:59amNORTHHOLLYWOODCA</Status_2>
                <Status_3>ProcessedthroughSortFacilityJune0120114:53pmBELLGARDENSCA90201</Status_3>
                <Status_4>ElectronicShippingInfoReceivedMay312011</Status_4>
                <Status_5>ShipmentAcceptedMay3120114:25pmPALOALTOCA94303</Status_5>
            </StatusBreakdown>
            <StatusCode>D</StatusCode>
       </PICNumber>
    </StatusList>
</StatusResponse> 
```

值 9477707123456123456781 将正确解析为 PicNumber 键，但它下面的所有其他内容都将被跳过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:58:11.560

先走，再跑。获取您需要的值，然后构建哈希：

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
<?xml version="1.0" encoding="UTF-8"?>
<StatusResponse>
    <AccountID>123</AccountID>
    <ErrorMsg />
    <Test>Y</Test>
    <StatusList>
        <PICNumber>
            9477707123456123456781
            <Status>Youritemwasdeliveredat10:09AMon08/06/2007inPALOALTOCA94301.</Status>
            <StatusBreakdown>
                <Status_1>ArrivalatPostOfficeJune02201110:11amNORTHHOLLYWOODCA91605</Status_1>
                <Status_2>ForwardExpiredJune0220116:59amNORTHHOLLYWOODCA</Status_2>
                <Status_3>ProcessedthroughSortFacilityJune0120114:53pmBELLGARDENSCA90201</Status_3>
                <Status_4>ElectronicShippingInfoReceivedMay312011</Status_4>
                <Status_5>ShipmentAcceptedMay3120114:25pmPALOALTOCA94303</Status_5>
            </StatusBreakdown>
            <StatusCode>D</StatusCode>
      </PICNumber>
    </StatusList>
</StatusResponse>
EOT

account_id = doc.at('AccountID').text

pic = doc.at('StatusList PICNumber')
pic_number = pic.child.text.strip
status_msg = pic.at('Status').text

status_breakdown_statuses = pic.search('StatusBreakdown *').map { |n|
  n.text
}

status_code = pic.at('StatusCode').text

hash = {
  :account_id  => account_id,
  :pic_num     => pic_number,
  :status_msg  => status_msg,
  :statuses    => status_breakdown_statuses,
  :status_code => status_code
} 
```

在 IRB 中看起来像：

```
{
     :account_id => "123",
        :pic_num => "9477707123456123456781",
       :status_m => "Youritemwasdeliveredat10:09AMon08/06/2007inPALOALTOCA94301.",
       :statuses => [
        [0] "ArrivalatPostOfficeJune02201110:11amNORTHHOLLYWOODCA91605",
        [1] "ForwardExpiredJune0220116:59amNORTHHOLLYWOODCA",
        [2] "ProcessedthroughSortFacilityJune0120114:53pmBELLGARDENSCA90201",
        [3] "ElectronicShippingInfoReceivedMay312011",
        [4] "ShipmentAcceptedMay3120114:25pmPALOALTOCA94303"
    ],
    :status_code => "D"
} 
```

你想要什么并不完全清楚，所以这是获取 XML 部分的更多示例代码。根据收到的 XML 和我的需要，我可能会采取不同的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:32:59.957

使用 nokogiri 宝石。读我的很简单。

# jquery-mobile - 将多项选择与 $.mobile.urlHistory 一起使用

> ID：15344783
> 
> 赞同：1
> 
> 时间：2013-03-11T17:27:01.943
> 
> 标签：jquery-mobile

在我使用的表格中

```
<select name="vchoice" id="vchoice" multiple data-native-menu="false" data-icon="grid" data-iconpos="left"> 
```

由于选项列表很长，它会在新窗口中打开。

但是现在使用关闭图标不起作用。我发现这是因为我也有这个在使用：

```
$(document).on( 'pagebeforecreate', 'body', function () { 
  $.mobile.urlHistory.stack = []; 
  $.mobile.urlstack = []; 
  $( '.ui-page' ).not( '.ui-page-active' ).remove(); 
}); 
```

有没有一种方法可以毫无问题地使用两者？

谢谢费边

# python - python 扭曲的 HTTP 代理

> ID：15344787
> 
> 赞同：1
> 
> 时间：2013-03-11T17:27:08.787
> 
> 标签：python, proxy, twisted

我对python很陌生。我从扭曲开始。正如我在 Twisted 文档中看到的那样，这可以制作代理服务器。

```
class MyProxy(proxy.Proxy):
    pass

class ProxyFactory(http.HTTPFactory):
    protocol = MyProxy

reactor.listenTCP(8080, ProxyFactory())
reactor.run() 
```

`ProxyFactory::protocol`看起来像一个成员变量？但`MyProxy`它是一个类型名，我不知道它是一种模板吗？否则如何将类型分配给变量？

我真正想要实现的只是拒绝对某些端点的请求。我正在考虑覆盖`buildProtocol`但提供的参数`addr`始终是 127.0.0.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:23:27.747

`ProxyFactory.protocol`是 Python 类属性。因为 Python 是一种动态类型语言，它比 Java 等变量和类的定义方式具有更大的灵活性。

MyProxy 是 Proxy 子类的一个空类，它没有定义任何与 proxy.Proxy 中默认提供的行为有关的行为。您可能需要做的（我不是 Twisted 内部专家）是查看 proxy.Proxy 类的文档并通过在 MyProxy 中重新定义它们来覆盖一些方法函数，以便这些方法执行您正在寻找的逻辑。

如果您查看 Twisted API 文档中的源代码，那么 ProxyRequest.procese() 似乎是添加自定义逻辑的好地方，它在解析传入的 HTTP 请求后开始连接远程主机。

*   [http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.2.0/twisted/web/proxy.py#L143](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.2.0/twisted/web/proxy.py#L143)

所以你（也许）需要继承 ProxyRequest 类，通过`requestFactory`类属性将它提供给你的 MyProxy。

# java - 春季 3.2 + 泽西岛。上下文初始化失败。适用于 Spring 3.1

> ID：15344790
> 
> 赞同：1
> 
> 时间：2013-03-11T17:27:14.877
> 
> 标签：java, spring, jersey

我一直在关注[这里](http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/)的教程。我可以让它完全按原样工作。但是，如果我尝试升级到 Spring 3.2.1

```
[#|2013-03-11T13:07:35.780-0400|SEVERE|glassfish3.1.2|org.springframework.web.context.ContextLoader|_ThreadID=46;_ThreadName=Thread-2;|Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\Users\MFrancis\Dropbox\Code\ProductionQueue\target\ProductionQueue-1.0-SNAPSHOT\WEB-INF\classes\com\fettergroup\production\queue\rest\PaymentService.class]; nested exception is java.lang.IncompatibleClassChangeError: class org.springframework.core.type.classreading.ClassMetadataReadingVisitor has interface org.springframework.asm.ClassVisitor as super 
```

我还得到了使用 spring 3.1.4 的示例。因此，必须在 3.1 和 3.2 之间进行一些更改，从而导致此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:42:28.580

只需检查您是否已将所有 Spring 组件更新到新版本。这是类不兼容的版本错误，可能是由于编译的类的版本不同。

# java - Ant foreach: 原因：名称未定义。但一切似乎都还好

> ID：15344792
> 
> 赞同：4
> 
> 时间：2013-03-11T17:27:20.357
> 
> 标签：java, ant, foreach

我对蚂蚁有一个奇怪的问题。它的版本是 1.7.1。

我正在尝试做下一件事并得到错误。

```
<target name="execute-all-buildfiles">
    <foreach param="buildfile-path" target="execute-buildfile">
        <path>
            <dirset dir="${path.to.server}/share/source"/>
        </path>
    </foreach>
</target>

<target name="execute-buildfile">
    <echo message="" />
    <echo message="" />
    <echo message="" />
    <echo message="__________ Building cartridge ${buildfile-path} ___________" />
    <echo message="" />
    <echo message="" />
    <echo message="" />
    <java
            jvm="${path.to.server}/engine/jdk/bin/java"
            classname="org.apache.tools.ant.launch.Launcher"
            fork="true"
            failonerror="true">
        <classpath>
            <pathelement location="${ant.home}/lib/ant-launcher.jar"/>
        </classpath>
        <arg value="-f" />
        <arg value="${buildfile-path}/build/build.xml" />
        <arg value="-Dis.home=${path.to.server}" />
    </java>
</target> 
```

我尝试过不太复杂的 foreach 版本，但效果不佳。请帮我。

```
<target name="run">     
   <foreach target="loop" param="loop.param">  
      <path>
          <dirset dir="${path.to.server}/share/source"/>
      </path>
   </foreach>  
</target>  
<target name="loop">     
   <echo message="${loop.param}"/>  
   <basename property="dir.name" file="${loop.param}"/>  
   <echo message="${dir.name}"/>  
</target> 
```

PS抱歉有错误。看一个简单的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T21:52:33.263

“原因：名称未定义”表示该任务未安装在您的 ant 环境中。
`<foreach>`不是 vanilla ant 的任务，但需要 ant 插件[antcontrib](http://ant-contrib.sourceforge.net/)可用于 ant。
安装 antcontrib 后，您应该使用它`<taskdef resource="net/sf/antcontrib/antlib.xml"/>`来激活所有 antcontrib 任务。
**GOTCHA** => 不要像[http://ant-contrib.sourceforge.net/](http://ant-contrib.sourceforge.net/)`<taskdef resource="net/sf/antcontrib/antcontrib.properties"/>`中提到的那样使用，因为 net/sf/antcontrib/antcontrib.properties 仅包含 Ant 1.6.x 之前的 ant 版本的任务

# c# - 如何使用 LINQ .ToUpper() 数组的每个元素？

> ID：15344793
> 
> 赞同：5
> 
> 时间：2013-03-11T17:27:21.720
> 
> 标签：c#, linq, .net-4.0

我有这个 LINQ 表达式：

```
string[] x = originalString.Split(',').ToList().ForEach(y => y.Substring(0,1).ToUpper()); 
```

我收到此错误消息：

```
Cannot convert source type 'void' to target type 'string[]' 
```

我想我得到了错误；ForEach 返回无效。我不知道如何修复它并仍然保持这个 LINQ 表达式。

如何拆分`originalString`然后循环遍历数组中的元素，应用于`.ToUpper()`每个元素并在 LINQ 表达式中完成所有操作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T17:28:52.270

```
string[] x = originalString.Split(',')
                           .Select(y => y.Substring(0,1).ToUpper())
                           .ToArray(); 
```

应该做的事情 - 获取每个单词的第一个字母，大写。

但我认为你真正想要的是：

```
string[] x = originalString.Split(',')
                           .Select(y => y.Substring(0, 1).ToUpper() + y.Substring(1))
                           .ToArray(); 
```

这应该利用从输入中分离出来的元素（听起来更有用）。

第二个查询的用法示例：

```
 string originalString = "TestWord,another,Test,word,World,Any"; 
```

输出：

```
TestWord
Another
Test
Word
World
Any 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:29:33.487

使用投影：

```
string[] x = originalString.Split(',')
    .Select(y => y.Substring(0,1).ToUpper()).ToArray(); 
```

# sql - 优化 Hibernate 序列 ID 生成

> ID：15344795
> 
> 赞同：5
> 
> 时间：2013-03-11T17:27:30.250
> 
> 标签：sql, hibernate, sequence, auto-increment, dialect

我在尝试将 Hibernate 与 SAP HANA In-Memory 数据库连接时遇到了一些性能问题，该数据库不支持 AUTO_INCREMENT ( [http://scn.sap.com/thread/3238906](http://scn.sap.com/thread/3238906) )。

所以我将 Hibernate 设置为使用序列来生成 ID。

```
 @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="myseq") 
  @SequenceGenerator(name="myseq",sequenceName="MY_SEQ",allocationSize=1) 
```

但是当我插入大量记录（例如，40000）时，Hibernate 首先生成 ID。看起来像：

```
DEBUG Thread-1 org.hibernate.SQL - select MY_SEQ.nextval from DUMMY
DEBUG Thread-1 org.hibernate.id.SequenceGenerator - Sequence identifier generated: BasicHolder[java.lang.Long[92080]]
DEBUG Thread-1 org.hibernate.event.internal.AbstractSaveEventListener - Generated identifier: 92080, using strategy: org.hibernate.id.SequenceHiLoGenerator
DEBUG Thread-1 org.hibernate.SQL - select MY_SEQ.nextval from DUMMY
DEBUG Thread-1 org.hibernate.id.SequenceGenerator - Sequence identifier generated: BasicHolder[java.lang.Long[92081]]
DEBUG Thread-1 org.hibernate.event.internal.AbstractSaveEventListener - Generated identifier: 92081, using strategy: org.hibernate.id.SequenceHiLoGenerator 
```

并且只有在生成所有 ID 之后，它才会开始实际插入。

总共插入 40000 条记录（通过网络到远程数据库）大约需要 5 分钟，这对于内存数据库来说非常慢。我假设它发生是因为 Hibernate 为 ID 一个一个选择下一个值：

```
send a request to database
get id
send next request
... 
```

我想加快 ID 生成，但不幸的是，我对它如何改进它的理解不够。我搜索了可能的解决方案，发现了以下想法：

1)**在插入语句中调用 sequence.nextval**。但是，Hibernate 团队说这是不可能的：[https ://forum.hibernate.org/viewtopic.php?f=1&t=932506](https://forum.hibernate.org/viewtopic.php?f=1&t=932506)

2）**使用 SequenceHiLoGenerator**。这可能是一个解决方案，但我不明白如何设置它......如果我写

```
 @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="myseq") 
  @SequenceHiLoGenerator(name="myseq",sequenceName="MY_SEQ",allocationSize=1), 
```

我在 Eclipse 中收到“无法从 SequenceHiLoGenerator 转换为注释”错误

3)**在 inserts 上写一个数据库触发器**。但是，对我来说，这看起来是一个糟糕的解决方案，因为我希望有一个通用的 Hibernate 方言与任何数据库实例一起工作。而且我不知道如何将这样的触发器包含在 Hibernate Dialect 中。

**您会建议哪种解决方案？你还有其他建议吗？**

我将真诚地感谢您对这个问题的任何帮助。如果有人可以提供一些解决方案或文档，甚至提供更详细的解决方案路径，那就太好了。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:39:13.297

序列中的值是一个一个获取的，因为[allocationSize](http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html#allocationSize%28%29)设置为 1。默认值为`allocationSize`50，这已经好得多了。在这种特殊情况下，如果插入 40000 条记录是典型用例，则使用高于该值的值可能是有意义的。

如果创建序列的脚本是自写的（而不是由 Hibernate 编写的），则 的值`INCREMENT BY`应与 的值相同`allocationSize`。

# javascript - 页面加载时需要隐藏的东西

> ID：15344798
> 
> 赞同：0
> 
> 时间：2013-03-11T17:27:43.743
> 
> 标签：javascript

我一直在慢慢学习 javascript，终于让我的 hide/show onClick 工作了。当页面加载您从点击中看到的内容时需要隐藏。我该怎么做呢？这就是我现在所拥有的。

```
<!DOCTYPE html> 
<head> 
</head> 
<body> 
<a href="javascript:hideshow(document.getElementById('adiv'))">click here</a> 
<script type="text/javascript"> 
function hideshow(which){ if (!document.getElementById) 
return if (which.style.display=="block") which.style.display="none" else which.style.display="block" } 
</script> 
<div id="adiv" style="display: block">This is what wil appear onClick</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:30:41.317

将 adiv 样式更改为`display: none`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:30:35.757

```
<div id="adiv" style="display: none">This is what wil appear onClick</div> 
```

只需用 css 隐藏元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:31:00.453

你得到的错误是：

`Uncaught SyntaxError: Unexpected token if`

**请记住始终以分号**结束您的陈述；

 **要更正您的代码：

```
<!DOCTYPE html> 
<head> 
</head> 
<body> 
<a href="javascript:hideshow(document.getElementById('adiv'))">click here</a> 
<script type="text/javascript"> 
function hideshow(which){ if (!document.getElementById) 
return; if (which.style.display=="block") which.style.display="none"; else which.style.display="block" } 
</script> 
<div id="adiv" style="display: block">This is what wil appear onClick</div>
</body> 
```

[使用JQuery](http://jquery.com/)之类的框架也是一件好事，因此您无需从头开始。

如果您想`"adiv"`从头开始隐藏，则应更改`"display: block"`为`"display: none"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:34:06.970

尝试

```
function hideshow(which){ 
 return (which.style.display=="block")?
           which.style.display="none" : which.style.display="block" 
} 
```**

# asp.net-mvc-3 - 使用 AsyncRendering 在远程处理模式下设置 ReportViewer

> ID：15344804
> 
> 赞同：1
> 
> 时间：2013-03-11T17:28:10.233
> 
> 标签：asp.net-mvc-3, reportviewer

我正在尝试在配置如下的 MVC3 环境中设置 ReportViewer，

```
<form id="Form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" />
    <rsweb:ReportViewer ID="ReportViewer" runat="server" Width="652px" AsyncRendering="true" PageCountMode="Actual" ProcessingMode="Remote" SizeToReportContent="true">
        <ServerReport ReportServerUrl="http://NMBSC-INTERN02/reportserver" ReportPath="/ReportProject/TestReport3" />
    </rsweb:ReportViewer>
</form> 
```

问题是我在页面上收到错误（来自 chrome 调试工具）

```
Uncaught Sys.WebForms.PageRequestManagerParserErrorException: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed. ScriptResource.axd:237
Error$create ScriptResource.axd:237
Sys$WebForms$PageRequestManager$_createPageRequestManagerParserError ScriptResource.axd:649
Sys$WebForms$PageRequestManager$_parseDelta ScriptResource.axd:1410
Sys$WebForms$PageRequestManager$_onFormSubmitCompleted ScriptResource.axd:1289
(anonymous function) ScriptResource.axd:47
(anonymous function) ScriptResource.axd:3484
Sys$Net$WebRequest$completed ScriptResource.axd:6364
Sys$Net$XMLHttpExecutor._onReadyStateChange ScriptResource.axd:5984 
```

关于错误，我已经环顾四周，但它总是指删除 UpdatePanel，但我没有。我确实在 iFrame 中有整个部分视图（上图），但无论它是否在 IFrame 中，我都会收到错误消息。其他解决方案谈论 Server.Transfer 和 Response.Write 调用，但是这不是我的代码（它由 ReportViewer 控件生成）我猜我只是在配置中做错了。

让远程处理模式工作我缺少什么吗？我可以在本地执行此操作，但如果我可以让远程处理模式工作，它似乎最适合我目前正在从事的项目。

**笔记**

我想值得注意的是，如果我关闭异步模式，报告将正确加载。问题是工具栏上的导航按钮（下一个、第一个、最后一个、上一个）不起作用，并且很尴尬地抛出与打开 AsyncRendering 时相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:04:56.777

ReportViewer 默认情况下不适用于 MVC，因为它是服务器端控件，因此我必须调整该过程。

它包含 2 个视图，一个包含输入的父视图，以便用户可以更改报表参数，另一个是在父视图中呈现的部分视图，这是实际的报表。每当用户提交他们当前的参数时，我们使用 ajax 调用从控制器中检索部分并将结果视图放置在页面上，刷新报告。

首先，针对父母的行动：

```
public ActionResult MyReport()
{
    return View();
} 
```

接下来，父视图：

```
<div>
    <div>

      <!-- input elements go here -->
      <input type="button" value='Update'/>
    </div>
    <div id="ReportPartial"></div>
</div>

<script type="text\javascript">
    $(document).ready(function(){
        $("input[type=button]").click(function(e){
            $.get("/Report/MyReportPartial", "put data from the input elements here", function(serverData){
                $("#ReportPartial").html(serverData);
            });
        });
    });

</script> 
```

现在，我们设置一个返回部分视图的控制器操作。控制器操作与报告具有相同的参数：

```
public ActionResult MyReportPartial(report parameters go here)
{

    //set ViewBag properties here to the report parameters.
    //Normally, I do not advise using the ViewBag, but I used it in this instance to
    //get it working in the aspx page.

    return PartialView("ReportViewPartial", null);
} 
```

最后，部分是一个aspx页面：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>
<%@ Register TagPrefix="rsweb" Namespace="Microsoft.Reporting.WebForms" Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" %>

<form Id="Form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<rsweb:ReportViewer ID="ReportViewer1" runat="server" 
ProcessingMode="Remote" SizeToReportContent="True" ShowBackButton="False" 
ShowFindControls="False" ShowPageNavigationControls="False" 
ShowZoomControl="False" AsyncRendering="False" ShowRefreshButton="False" ShowExportControls="False" Height="500" Width="500">
</rsweb:ReportViewer>
</form>

<script runat="server">
void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack) return;
    ReportViewer1.ProcessingMode = ProcessingMode.Remote;
    ReportViewer1.ServerReport.ReportServerUrl = new Uri(ConfigurationManager.AppSettings["ReportServerUrl"]);
    ReportViewer1.ServerReport.ReportPath = ConfigurationManager.AppSettings["ReportPath"];
    var rptParameters = new List<ReportParameter>
                            {
                                //Add report parameters here from the ViewBag
                            };

    ReportViewer1.ServerReport.SetParameters(rptParameters);
    ReportViewer1.ServerReport.Refresh();
}
</script>
<script type="text/javascript">
    //the report is hidden when loaded. Using the following jQuery to show it.
    $(document).ready(function () {
        var div = $("#ReportPartial").find("div[id*='_ReportControl']");
        div.show();
        div.find("div:first").show();
    });
</script> 
```

现在设置好了，每当用户提交时，我们用 ajax 加载一个带有报告的 aspx 页面，本质上是刷新它。您失去了报告控件的一些功能，但它可以满足客户的需求。

# jira - Jira 中的计算字段依赖于另一个字段

> ID：15344812
> 
> 赞同：0
> 
> 时间：2013-03-11T17:28:27.607
> 
> 标签：jira

我在 Jira 中有问题，这些问题有受让人。我可以根据这些受让人的姓名计算自定义字段的值吗？即如果assignee=name1、name2或name3，将自定义字段值设置为Entity1，如果assignee=name4、name5或name6，则将该字段设置为Entity2。我希望每次分配相应实体的受让人时自动更改此设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:03:21.767

如果您希望在进行工作流转换时进行更改，请使用[Jira Script Runner 插件](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner)添加一个后期脚本功能：

```
import com.atlassian.jira.ComponentManager
cf = customFieldManager.getCustomFieldObjectByName("Custome field name")
# get the current assignee
assignee = issue.getAssignee().getDisplayName()

if (assignee == 'John Doe'):
    # set vustome field 
    issue.setCustomFieldValue(cf, "content")
else:
    ..... 
```

如果您希望自定义字段在用户更改受让人的同时更改，您可以将[AJS](http://orangoo.com/labs/AJS/)脚本添加到受让人字段描述中，如果您想要代码，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:33:40.130

您可以使用 Script Runner 插件来做到这一点。

# php - 在 FreeBSD 8.3 上安装 php5-gd 时出错（共享库“png.6”不存在）

> ID：15344815
> 
> 赞同：1
> 
> 时间：2013-03-11T17:28:30.673
> 
> 标签：php, linux, freebsd, php-extension, php-gd

我将 php 更新到 5.3。但我无法安装 gd 扩展（在 freebsd 8.3 上）
错误行：

```
# cd /usr/ports/graphics/php5-gd/
# make install clean
===>   php5-gd-5.3.11 depends on file: /usr/local/bin/phpize - found
===>   php5-gd-5.3.11 depends on file: /usr/local/bin/autoconf-2.69 - found
===>   php5-gd-5.3.11 depends on shared library: freetype.9 - found
===>   php5-gd-5.3.11 depends on shared library: png.6 - not found
===>    Verifying install for png.6 in /usr/ports/graphics/png
===>   Returning to build of php5-gd-5.3.11
Error: shared library "png.6" does not exist
*** Error code 1

Stop in /usr/ports/graphics/php5-gd.
*** Error code 1
Stop in /usr/ports/graphics/php5-gd. 
```

我尝试更新并安装 png lib

```
# cd /usr/ports/graphics/png/
# make deinstall
# cd make install clean 
```

然后我看到：

```
100% tests passed, 0 tests failed out of 2

Total Test time (real) =  25.96 sec
===>  Installing for png-1.5.10
===>   Generating temporary packing list
===>  Checking if graphics/png already installed
===>   png-1.5.10 is already installed
  You may wish to ``make deinstall'' and install this port again
  by ``make reinstall'' to upgrade it properly.
  If you really wish to overwrite the old port of graphics/png
  without deleting it first, set the variable "FORCE_PKG_REGISTER"
  in your environment or the "make install" command line.
*** Error code 1

Stop in /usr/ports/graphics/png.
*** Error code 1
Stop in /usr/ports/graphics/png.
*** Error code 1
Stop in /usr/ports/graphics/php5-gd.
*** Error code 1
Stop in /usr/ports/graphics/php5-gd. 
```

如果我从指令 FORCE_PKG_REGISTER 开始 - '"png.6" 不存在' 再次出现。我做到了`portupgrade`- 但它也没有帮助。任何想法如何正确避免此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T08:50:56.557

重建 ldconfig 提示文件。注意： /etc/ld.so.conf 和 /etc/ld-elf.so.conf 在 FreeBSD 上似乎没有做任何事情。

过时提示文件错误如下所示（当正确的共享库实际存在时）：

```
Shared object "libintl.so.8" not found, required by "vim" 
```

所以，你必须运行这个丑陋的命令：

```
 ldconfig /lib /usr/lib /usr/lib/compat /usr/local/lib /usr/local/lib/compat /usr/local/lib/compat/pkg /usr/local/lib/graphviz /usr/local/lib/mysql /usr/local/lib/nss /usr/local/lib/pth /usr/local/share 
```

也许还有另一种配置 ld/ldconfig 的方法，以便它可以正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T07:20:40.340

libpng 的共享库的名称是`/usr/local/lib/libpng15.so.15`，至少在 FreeBSD 9 上是这样。

出于某种原因 php-gd 没有选择它。也许它认为你在 Linux 上？

确保您的端口树是最新的。libpng 的当前版本是 1.5.14。

# javascript - js 正则表达式从包含星号的字符串中提取字符串

> ID：15344817
> 
> 赞同：1
> 
> 时间：2013-03-11T17:28:35.393
> 
> 标签：javascript, regex

我有一个看起来像这样的字符串：

```
**********3600 - $20.00 
```

我需要从中提取`3600`。我不能专门搜索 3600，因为字符串是动态的，而且我不能根据位置进行提取，因为字符串开头可能有不同数量的星号。所以我需要一个正则表达式，它会在最后一个星号之后立即提取四个字符，但我对正则表达式真的不是很好，而且由于星号是正则表达式中的保留字符，我不知道如何转义它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:29:59.927

你可以这样做：

```
str.match(/^\**(\d+)/) 
```

结果（如果有）将位于返回数组的索引 1 中。`null`在继续获取数字之前，您可能需要检查返回的结果是否是。

### 假设

请注意，此解决方案假定字符串*以*任意数字`*`开头（我允许数字从开头开始的情况），后跟要提取的数字序列（至少一个数字）。

### 解释

```
/^\**(\d+)/ 
```

*   `/`开头和结尾是 JavaScript 文字的分隔符`RegExp`。
*   `^`匹配字符串的开头
*   `\*`匹配 literal `*`，因为`*`在正则表达式中有特殊含义。`*`紧随其后的 make it 匹配 0 个或多个 asterisk实例`*`。
*   `(\d+)`:`\d`匹配一个数字（从 0 到 9），`+`表示重复一次或多次。`()`生成一个捕获*组*，以便我们可以提取与此正则表达式匹配的内容（如上所示，当您引用返回数组的索引 1 作为数字时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:36:46.237

如果所有匹配项都是第一个数字，您实际上可以这样做：

```
string.match(/\d+/); 
```

它将匹配第一个数字。由于您不添加全局标志，因此它只会获得第一个匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:30:30.677

任何四个字符，还是总是数字？

```
/^\**(\d{4})/   if it's just digits
/^\**(.{4})/    for any 4 random characters.
  ^---escape char 
```

注意反斜杠作为转义字符。

# jsf-2 - 附加到 Primefaces 的命令链接时不调用属性操作侦听器

> ID：15344819
> 
> 赞同：2
> 
> 时间：2013-03-11T17:28:48.423
> 
> 标签：jsf-2, primefaces, managed-bean, view-scope

我正在使用 Primefaces，但我遇到了一个问题，即 setPropertyActionListener 没有被触发，因此没有设置视图范围托管 bean 的属性。

我的观点：

```
<p:column>
    <p:commandLink value="Supprimer" oncomplete="confirmation.show()"  >
        <f:setPropertyActionListener value="#{car}" target="#{typeMB.selectedType}" />  
    </p:commandLink>
</p:column> 
```

托管 bean 具有 selectedType 属性，其中有一个 getter 和一个 setter。

我的托管bean：

```
@ManagedBean(name="typeMB")
@ViewScoped
public class TypeManagedBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private Type newtype;  
    private Type selectedType;

    @ManagedProperty(value="#{TypeDao}")
    GenericDao<Type> typeDAO;

    public TypeManagedBean(){
        newtype = new Type();
    }

    public List<Type> getList_types() {     
        return typeDAO.readAll();
    }

    public void setTypeDAO(GenericDao<Type> typeDAO) {
        this.typeDAO = typeDAO;
    }

    public GenericDao<Type> getTypeDAO() {
        return typeDAO;
    }

    public Type getNewtype() {
        return newtype;
    }

    public void setNewtype(Type newtype) {
        this.newtype = newtype;
    }       

    public Type getSelectedType() {
        if(selectedType != null)
        System.out.println("get : le selected type : "+selectedType.getLibelle());
        return selectedType;
    }

    public void setSelectedType(Type selectedType) {        
        this.selectedType = selectedType;
        System.out.println("set le selected type : "+selectedType.getLibelle());
    }

} 
```

我能做些什么来实现我想要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:36:58.747

根据[Primefaces (3.5) 用户指南](http://primefaces.googlecode.com/files/primefaces_users_guide_3_5.pdf)，章节`<p:commandLink>`，以及[Primefaces 负责人在本论坛](http://forum.primefaces.org/viewtopic.php?f=3&t=22797)`process`的声明，属性的默认值为`@all`，表示将提交整个页面。因此，此提交可能会出现一些验证错误，从而阻止调用侦听器方法。否则，它应该与您发布的代码按预期工作。

对上述假设的一个很好的测试是放置`process="@this"`属性。因为'与要执行的链接关联的动作，必须部分提交链接本身'，正如BalusC在[What is the function of this究竟是什么中](https://stackoverflow.com/questions/5699088/what-is-the-function-of-this-exactly/5704558#5704558)完美解释的那样，我们需要添加属性来进行测试。

要检查的另一件事是您的命令组件属于一个表单，并且您的视图不包含任何地方的嵌套表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:03:38.760

以下代码正在工作：

托管 bean：

```
package app.so.dev.web.controller;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

import app.so.dev.web.model.Student;

@ManagedBean(name = "so15344819")
@ViewScoped
public class SO15344819 implements Serializable {

    private static final long serialVersionUID = 6686378446131077581L;
    private List<Student> students;
    private Student selectedStudent;

    @PostConstruct
    public void init() {
        students = new ArrayList<Student>();
        students.add(new Student("Student 1"));
        students.add(new Student("Student 2"));
    }

    public List<Student> getStudents() {
        return students;
    }

    public void setStudents(List<Student> students) {
        this.students = students;
    }

    public Student getSelectedStudent() {
        return selectedStudent;
    }

    public void setSelectedStudent(Student selectedStudent) {
        this.selectedStudent = selectedStudent;
    }
} 
```

和 xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/globalTemplate.xhtml">

    <ui:define name="title">15344819</ui:define>
    <ui:define name="content">
        <p:growl id="growl" showDetail="true" />

        <h:form id="form">
            <p:dataTable id="students" value="#{so15344819.students}" var="student">
                <p:column>
                        <p:commandButton id="selectButton" update=":form:display" oncomplete="studentDialog.show()" icon="ui-icon-search" title="View">
                           <f:setPropertyActionListener value="#{student}" target="#{so15344819.selectedStudent}" />
                       </p:commandButton>
                   </p:column>
            </p:dataTable>

            <p:dialog header="Student Detail" widgetVar="studentDialog" resizable="false" id="studentDlg"
                            showEffect="fade" hideEffect="explode" modal="true">

                    <h:panelGrid id="display" columns="2" cellpadding="4" style="margin:0 auto;">

                        <h:outputText value="Name:" />
                        <h:outputText value="#{so15344819.selectedStudent.name}" style="font-weight:bold"/>                                               

                    </h:panelGrid>

                </p:dialog>
        </h:form>
    </ui:define>

</ui:composition> 
```

环境：

*   JSF 莫哈拉 2.1.7
*   Primefaces 3.4.2
*   JBoss AS 7.1

**[Primefaces展示](http://www.primefaces.org/showcase/ui/datatableRowSelectionByColumn.jsf)**。

# php - mod重写后获取原始URL

> ID：15344822
> 
> 赞同：0
> 
> 时间：2013-03-11T17:29:02.367
> 
> 标签：php, .htaccess, url, mod-rewrite, uri

mod重写后如何获取原始和更改URL？

地址：

```
http://www.example.com/abcd 
```

用 [L] rewrite 改写成这个

```
http://www.example.com/index.php?cat=abcd 
```

试过：

```
echo $_SERVER["REQUEST_URI"];
echo $_SERVER["REDIRECT_URL"]; 
```

两者结果相同

```
/abcd 
```

不仅想知道 /abcd 还想知道[http://www.example.com/index.php?cat=abcd](http://www.example.com/index.php?cat=abcd)

重写正在工作，因为我可以在 PHP 中找到用 abcd 填充的名为 cat 的变量

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T17:35:56.160

```
echo $_SERVER['HTTP_REFERER']; 
```

# c++ - C++ 中的显式运算符 +

> ID：15344827
> 
> 赞同：-2
> 
> 时间：2013-03-11T17:29:15.223
> 
> 标签：c++, operator-overloading

我只是在玩 + 运算符，我无法弄清楚如何声明它并“明确”使用它，请帮助代码如下：

```
class compex{

    int real;
    int img;

public:
    compex();
    compex(int,int);
    compex& explicit operator + (const compex& P1)
    friend ostream& operator <<(ostream& out,const compex& R);
}; 
```

运算符的实现是：

```
 compex& compex :: operator + (const compex& P1)
 {
    this->real += P1.real;
   this->img += P1.img;
   return *this;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:38:11.110

您不能制作（这些）运算符`explicit`（只有转换运算符可以在 C++11 中显式）。你不需要。只需通过以下方式避免显式转换为您的类型：

*   没有为其他类型定义转换运算符，并且..
*   标记可以用一个参数调用的所有复杂构造函数`explicit`。

这样，您可以有效地只调用`operator+`已经是`complex`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:34:46.590

显式关键字仅对具有一个参数的构造函数有用。它将阻止编译器使用该构造函数进行转换。我不知道您要通过明确 + 运算符来完成什么。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:43:26.850

如果您想要一个`explicit`转换函数，您将不得不为此目的编写一个（请参阅[此处](https://stackoverflow.com/questions/121162/what-does-the-explicit-keyword-in-c-mean)）（但它只适用于一个参数）。

至于你的`operator+(...)`，只需删除`explicit`它就可以了。

```
Compex c1(1,2);
Compex c2(3,12);
Compex c3 = c1 + c2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:53:18.353

如果要防止类型`compex`在使用时隐式转换为`operator +`，可以利用模板参数。

模板参数不直接受类型转换规则的约束。

```
class compex{
    template<class C, 
             typename std::enable_if<std::is_same<C,complex>::value>::type >  
    compex& operator + (const C& P1)
    {
       // Your code
    }
}; 
```

# cplex - 在 CPLEX java API 的填充方法中最大化二进制变量的多样性，并限制最优性

> ID：15344829
> 
> 赞同：0
> 
> 时间：2013-03-11T17:29:22.760
> 
> 标签：cplex

我正在尝试为 CPLEX 中的混合整数问题生成许多解决方案，其中所有整数变量都是二进制的。该问题有大约 1000 个连续变量和 1000 个二元变量，作为指标，大约有 2500 个线性约束。

我的目标函数是指标变量的最小化，我想产生许多接近最优的解决方案，它们在为二元变量选择的值方面彼此不同。我当前的代码可以总结为-

```
IloCplex cplexModel = new IloCplex(); 
---build the problem, set objective---
cplexModel.setParam(IloCplex.IntParam.SolnPoolCapacity, N);
cplexModel.setParam(IloCplex.IntParam.PopulateLim, K*N);
cplexModel.setParam(IloCplex.IntParam.SolnPoolReplace, 2);
cplexModel.setParam(IloCplex.DoubleParam.SolnPoolGap, D);
cplexModel.setParam(IloCplex.IntParam.MIPEmphasis, 0);
cplexModel.populate(); 
```

其中 N、K 和 D 是所需解决方案数量的缩写名称，分别是我愿意在求解时缩放生成的解决方案数量的因素，以及我愿意从最优最小化中接受的相对差距。我还使用了其他几个似乎与问题无关的 CPLEX 参数。

我的问题是解决方案的多样性是在所有变量中测量的，包括连续变量，而我只对二进制变量值不同的解决方案感兴趣。这意味着我得到的大多数结果共享二进制变量的相同值，并且对我来说无法区分（因为我只对二进制值感兴趣）。我目前的解决方法是通过设置 -

```
cplexModel.setParam(IloCplex.IntParam.SolnPoolCapacity, T*N);
cplexModel.setParam(IloCplex.IntParam.PopulateLim, T*K*N); 
```

T 通常为 50，然后（希望）从解决方案池中选择 N 个结果，这些结果在二进制变量的值上彼此不同。

我已经检查了[多样性过滤器](http://pic.dhe.ibm.com/infocenter/cplexzos/v12r4/index.jsp?topic=%2Fcom.ibm.cplex.zos.help%2FUsrMan%2Ftopics%2Fdiscr_optim%2Fsoln_pool%2F38_diversity_filters.html)作为将多样性计算限制为二进制变量的一种方式，但我看不出它如何用于在解决方案之间强制执行多样性**，**而不是在每个解决方案和参考解决方案之间。除此之外，我不知道还能做什么。

帮助表示赞赏。另外，这是我的第一个问题，如果格式错误，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:42:52.037

抱歉，但我的背景是老方法，我通常使用 C# 或 C++ 工作。我从来没有尝试过使用这种新奇的“填充”东西......但我可能应该！但也许我过去所做的一些事情可能会有所帮助。

我“手动”完成此操作的方式是在循环中重复解决问题，每次添加约束以强制某些二进制变量不同。这可以像添加约束以强制单个变量不同一样简单（如果它在解决方案中为 1，请尝试添加约束以将其强制为零（反之亦然））。或者更聪明一点，并添加一个约束，即 m 个变量中至少有 n 个变量必须不同。这种方法的好处是它可以让您直接控制解决方案必须不同的内容和数量。

现在，通过 cplex 回调之一添加约束，可以在“填充”方法中实现类似的东西。我手头没有最近的文档，所以我只是凭记忆猜测......

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:17:41.170

我在 IBM 的论坛 -[链接](https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000014956966)上得到了所需的答案。

解决方案池多样性替换策略，SolnPoolReplace=2，只计算关于解决方案多样性的二进制变量。

因此，由于不同的原因，就二元变量而言，我的解决方案似乎并不多样化，但这种策略仍然是正确的方法。

# c# - Canvas 上的 ScaleTransform 以比儿童更高的速度缩小 Canvas

> ID：15344834
> 
> 赞同：1
> 
> 时间：2013-03-11T17:29:34.077
> 
> 标签：c#, wpf, winforms, wpf-controls

我有一个 WPF 控件停靠在 WinForms 应用程序中的 WPF 主机控件中。WPF 控件设置为水平和垂直拉伸，并且宿主控件停靠在锚定的组框中。

我的 WPF 控件有一个 Canvas，它填充了我用来放置子项的空间，这些子项是从 Canvas 派生的自定义类。

我订阅了主 Canvas 的 SizeChanged 事件并应用了缩放变换，以便在调整控件大小时，画布及其子项会像缩放一样缩小和增长，这正在工作，但由于某种原因，父画布正在缩小比孩子们高得多的比率，使孩子们因为缩放率而在某个点从画布上掉下来。

这是我的代码：

```
 private void EditorCanvas_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        if (e.PreviousSize.Width == 0)
            return;
        double YDiff = e.PreviousSize.Height / e.NewSize.Height;
        double XDiff = e.PreviousSize.Width / e.NewSize.Width;

        Scale.ScaleY /= YDiff;
        Scale.ScaleX /= XDiff;
    } 
```

画布的子项似乎以正确的速率缩放，并且画布似乎以更高的速率缩放。

有没有人看到任何原因/知道可能发生这种情况的任何原因？

行为图片...注意较小面板后面的空白区域

前 ![IMG](../Images/4f07764a253b5a4a0d6bf33002b911ea.png)

缩放 ![IMG](../Images/269420e0912454d61fa6d38400333407.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:48:26.363

这：

> 我订阅了主 Canvas 的 SizeChanged 事件并应用了缩放变换，以便在调整控件大小时，画布及其子项会像缩放一样缩小和增长，这正在工作，但由于某种原因，父画布正在缩小比孩子们高得多的比率，使孩子们因为缩放率而在某个点从画布上掉下来。

是 a 的`Viewbox`作用。将 a`Viewbox`作为 WPF 可视化树中的根元素。并将其`Stretch`属性设置为适合您需要的任何内容。并删除所有大小计算。WPF 不需要大小计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:33:35.983

看起来您缺少一些中间步骤（即一些大小更改）。如果您的应用程序无法足够快地处理大小更改事件，Windows 可能会在中间跳过一些以*赶上*。

例如，假设您的应用程序以 1000 的高度开始。然后快速更改为 100，但在此过程中它经历了许多中间尺寸（500、250、125）。如果你错过了其中的一两个，你最终会在 ScaleY 计算中得到类似的结果：

```
0\. Height = 1000; ScaleY = 1
1\. Height: 1000 > 500; ScaleY = 1/(1000/500) = 0.5
2\. [misses 250]; no scaleY adjustment
3\. Height: 250 > 125; ScaleY = 0.5 / (250/125) = 0.25  // when it should actually be .125
4\. Height: 125 > 100; ScaleY = 0.25 / (125/100) = 0.2  // when it should actually be 0.1 
```

您应该改为存储和使用原始大小并计算绝对值，而不是连续*微分*..

# java - 偶尔出现 NullPointerException

> ID：15344835
> 
> 赞同：0
> 
> 时间：2013-03-11T17:29:37.207
> 
> 标签：java, swing

我有一个 java 应用程序，我偶尔会得到一个`java.lang.NullPointerException`. 我有这个应用程序在信息亭工作，当这个错误发生时，它会卡住并导致很多问题。

错误是：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:204)
    at GUI.newCardPanel.backButton1MousePressed(newCardPanel.java:1470)
    at GUI.newCardPanel.access$11000(newCardPanel.java:36)
    at GUI.newCardPanel$64.mousePressed(newCardPanel.java:1091)
    at java.awt.AWTEventMulticaster.mousePressed(AWTEventMulticaster.java:280)
    at java.awt.Component.processMouseEvent(Component.java:6386)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3268)
    at java.awt.Component.processEvent(Component.java:6154)
    at java.awt.Container.processEvent(Container.java:2045)
    at java.awt.Component.dispatchEventImpl(Component.java:4750)
    at java.awt.Container.dispatchEventImpl(Container.java:2103)
    at java.awt.Component.dispatchEvent(Component.java:4576)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4633)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4294)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4227)
    at java.awt.Container.dispatchEventImpl(Container.java:2089)
    at java.awt.Window.dispatchEventImpl(Window.java:2518)
    at java.awt.Component.dispatchEvent(Component.java:4576)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:672)
    at java.awt.EventQueue.access$400(EventQueue.java:96)
    at java.awt.EventQueue$2.run(EventQueue.java:631)
    at java.awt.EventQueue$2.run(EventQueue.java:629)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:116)
    at java.awt.EventQueue$3.run(EventQueue.java:645)
    at java.awt.EventQueue$3.run(EventQueue.java:643)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:642)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

第 1470 行：

```
backButton1.setIcon(new ImageIcon(new ImageIcon(getClass().getResource("/imagenes/sing-in-pres.png")).getImage())); 
```

```
public class newCardPanel extends javax.swing.JPanel  { //This one is the 36 
```

1091：（Netbeans 自动生成的代码）

```
public void mousePressed(java.awt.event.MouseEvent evt) {
            backButton1MousePressed(evt);   //This one is the 1091
        } 
```

图片在`src`文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:43:42.387

如果您查看 ImageIcon 的源代码，您将看到：

```
public ImageIcon (URL location) {
    this(location, location.toExternalForm());
} 
```

这意味着您正在为 URL 传递一个空值。这意味着您的代码在

```
getClass().getResource("/imagenes/sing-in-pres.png") 
```

正在返回 null。

从那里调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:35:19.140

> 它只是*偶尔*发生。

*有时*可能是同步错误的结果。Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。*必须*同步对共享数据的访问。[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)是一种在后台加载图像时保持 GUI 响应的方法，[例如](https://stackoverflow.com/a/4530659/230513).

# php - Preg_Replace with function 不起作用

> ID：15344839
> 
> 赞同：2
> 
> 时间：2013-03-11T17:29:53.027
> 
> 标签：php, preg-replace

有人可以向我解释为什么这个函数不返回用户标记的 id 吗？

```
function userid($name){ 
    $a_sql = mysql_query("SELECT * FROM utenti WHERE tag='$name' ") or die( mysql_error()); 
    $a_id= mysql_result($a_sql ,0,"id"); 
    return $a_id;  
    } 

$text= $_POST["text"]; 
$text = preg_replace('/@([a-zA-Z0-9]+)/e', htmlspecialchars(userid('$1')), $text); 
```

为什么这种方法不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:38:38.437

您需要引用整个第二个参数以将结果评估为 php：

```
$text = preg_replace('/@([a-zA-Z0-9]+)/e', 'htmlspecialchars(userid($1))', $text); 
```

您正在做的是调用函数`htmlspecialchars`并将`userid`其结果提供给`preg_replace`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:33:12.947

而不是使用`preg_replace()`使用`preg_replace_callback()`

[http://php.net/manual/en/function.preg-replace-callback.php](http://php.net/manual/en/function.preg-replace-callback.php)

这允许您传递*替换*参数通常所在的函数。

* * *

作为旁注，请不要使用已弃用的`mysql_*`功能。改为使用[MySQLi 或 PDO](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)和准备好的语句。

# r - 如何将多个矩阵的输出写入 R 中的数据框？

> ID：15344841
> 
> 赞同：-2
> 
> 时间：2013-03-11T17:30:00.077
> 
> 标签：r

我有 5 个具有相同尺寸的二进制文件（栅格）：前四个文件代表参数 1，第五个文件代表具有 10 个类别的土地覆盖图。我想根据土地覆盖类别计算所有四个文件的平均值。所以最后我们会得到每个类对应的4个值。

我对所有文件都试过这个：

```
 dir1<- list.files("C:\filesh", "*.img", full.names = TRUE)
  fre <- file("C:\\landover_from Suj1440a.bin","rb")
  sdf<- readBin(fre, integer(), size=1,  n=1440*720, signed=F)
  results<- list()
 for (.files in seq_along(dir1)){
   list1 <- readBin(dir1[.files], numeric(), size = 4, n = 1440*720, signed = TRUE)   
   list1=tapply(list1, sdf, mean, na.rm=TRUE)
   results[[length(results) + 1L]]<- list1} 
```

似乎它没有错误地工作。：写结果：

```
 for (i in seq_along(results)){
  write.table(results[[i]], paste("C:\\Users\\filesh\\data", ".txt", sep=""),append=TRUE)} 
```

我将得到一个包含所有结果的文本文件，例如......

```
 x
  1     0.2
  2     0.5
  3     0.2
 x
 1      0.1 
 2      0.5
 3      0.6 
```

4-我希望输出是一个包含所有结果的文本文件，例如：

```
 1    2    3    4   5   6  7 ...
 x            0.2 0.5   0.2  .   .   .  . ...
 x            0.1  0.5  0.6
 x            .    .    .   .   .    .  . ...
 x            . 
```

从我的搜索中，我发现我需要将它们写为数据框才能得到我正在寻找的东西。任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:35:37.807

所以结果似乎是一个列表......为什么不做一些格式化/清理和 make one write.table 调用？

这是一个示例，但是由于您没有提供可重现的示例，因此它很可能会失败。

```
# create data
df <- read.table(header = TRUE, text = "'x'
'0' 0.16
'2' 0.15
'3' 0.16
'4' 0.10
'5' 0.18
'6' 0.02
'7' 0.11
'8' 0.06
'9' 0.07
'10' 0.17
'11' 0.06
'12' 0.07")

# make list
df_list <- list(df, df)

# merge columns
out <- do.call(cbind, df_list)
names(out) <- paste0('x', 1:ncol(out))

# transpose
out_t <- t(out)
write.table(out_t, 'data.txt') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:35:04.877

从您因某种原因删除的上一个问题中，您可以使用`rbind`：

```
> r= c(5,4,5,4,2,5)
> s= c(5,4,5,4,2,5)
> rbind(r, s)
  [,1] [,2] [,3] [,4] [,5] [,6]
r    5    4    5    4    2    5
s    5    4    5    4    2    5
> write.table(rbind(r, s), file = "myfile.txt") 
```

假设`r`and`s`在名为“results”的列表中，在这个问题中似乎就是这种情况，请参阅：

```
> results <- list(r = r, s = s)
> results
$r
[1] 5 4 5 4 2 5

$s
[1] 5 4 5 4 2 5

> write.table(do.call(rbind, results), file = "myfile.txt") 
```

# c++ - 如何按字段从 istringstream 读取和验证

> ID：15344842
> 
> 赞同：3
> 
> 时间：2013-03-11T17:30:05.233
> 
> 标签：c++, parsing, istream

我正在尝试检查输入有效性。我得到一个文件，其中有两列，第一列是字符串，第二列是整数。分隔符是任意数量的空格。问题是，我无法弄清楚如何正确检查第二项是否真的是 int。考虑这段代码：

```
string line; // parameter with a string to be parsed
string name;
int num;
istringstream lineStream(line);
lineStream >> name;
lineStream >> num; 
```

通过调用，`lineStream.good()`我可以检测到诸如“abcd g”之类的输入，但是当我放入诸如“abcd 12a”之类的内容时，它会被解析为“abcd”和12。与“abcd 12.2”等相同。

在 Java 中，我可以使用`String.split()`一个数组，然后解析每个整个元素，而不是忽略任何字符，但我不知道这里的正确方法是什么。

感谢提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:43:17.137

在`std::stringstream`提取`int`. 如果`int`提取失败，则根本没有整数。如果成功但流中仍有内容，则说明行中内容过多。我会这样处理这个问题：

```
std::string line, name;
int num;
while (std::getline(file, line)) {
  std::stringstream line_stream(line);
  if (line_stream >> name >> num &&
      line_stream.eof()) {
    // Line was of the correct format
  }
} 
```

基本上，有两个检查：

1.  `line_stream >> name >> num`如果无法提取 或 将`string`失败`int`。
2.  在这些提取之后，`eof`如果它们到达流的末尾，则将设置该位。`line_stream.eof()`如果流中仍有内容，则将失败。

显然，这是一种非常脆弱的方法，仅适用于特定情况，并且需要适应行格式的几乎任何变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:51:14.817

您可以读取两个字符串，然后检查第二个字符串是否真的是一个数字。像这样的东西：

```
std::string line; // parameter with a string to be parsed
std::string name;
std::string strNum;
int num;
std::istringstream lineStream(line);
lineStream >> name;
lineStream >> strNum;

if (isNumber(strNum))
{
   num = atoi(strNum.c_str());
}

//

bool isNumber(const std::string& strNum)
{
   bool lIsNumber = true;
   std::string::const_iterator it = strNum.begin();
   while (it != strNum.end())
   {
      if (!std::isdigit(*it))
      {
         lIsNumber = false;
         break;
      }
      ++it;
  }
   return lIsNumber;
} 
```

# ruby - 使用 Twitter API 时未定义的方法 encode_www_form

> ID：15344844
> 
> 赞同：1
> 
> 时间：2013-03-11T17:30:05.490
> 
> 标签：ruby, json, api, twitter

我正在尝试使用 API 从 API 中获取 Twitter 收藏夹的基本列表`Ruby`，但我一直在纠结这个错误。

```
baseurl = "https://api.twitter.com"
path    = "/1.1/favorites/list.json"
query   = URI.encode_www_form(
            "screen_name" => "twitterapi",
            "count" => 10)
address = URI("#{baseurl}#{path}#{query}") 
```

`undefined method encode_www_form for URI:Module (NoMethodError)`每当我运行它时，我总是会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:42:23.707

采用：

```
URI.encode_www_form_component(yourStringToEncodeHere) 
```

# ios - 将目标的源代码从 Xcode 项目导出为单独的项目

> ID：15344845
> 
> 赞同：2
> 
> 时间：2013-03-11T17:30:12.863
> 
> 标签：ios, xcode, projects

我可以将目标的源代码导出为单独的项目吗？

假设我的应用程序的“精简”版本有一个目标。我想将其导出为一个单独的项目，以便我可以分发代码和资产，而不包括应用程序完整版中的任何代码和资产。

这可能吗？我可能可以编写一个脚本来手动执行此操作，但我觉得它应该可以在 Xcode 中实现。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:47:15.797

我不知道内置的导出工具（当然并不意味着它不存在！），但另一种想法是创建一个项目并将您的文件作为“文件夹引用”添加到其中。也就是说，将“通用”文件放入磁盘上的一个文件夹中（在您的主项目下或在单独的外部目录中）。然后创建第二个 XCode 项目，并将文件夹添加到该项目，但在添加时选择“文件夹引用”选项。这实际上创建了一个从您的项目到该源文件夹的“符号链接”，而不是将文件复制到项目的目录结构中。

不是您正在寻找的东西，但可能是跨项目共享一组文件的可行替代方案。

# javascript - 在 Firefox 中调试小书签

> ID：15344847
> 
> 赞同：7
> 
> 时间：2013-03-11T17:30:27.237
> 
> 标签：javascript, debugging, firefox, bookmarklet

我想调试书签。我怎样才能做到这一点？最好在 Firefox 中。

Bookmarklets 只有一行代码，因此直接调试它们是不切实际的。

如果我使用从书签发送的代码创建“脚本”标签，则此“脚本”标签中的代码不会在 Firebug 脚本中列出...（此代码运行正常，只是无法调试）

或者，如果可以调试在控制台中键入的代码，也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:46:09.893

制作一个这样的书签：

`javascript:document.body.appendChild(document.createElement('script')).setAttribute('src','http://localhost/test.js');void(0);`

它会自动出现在 Firebug 中，就这么简单。（假设您有最新版本的 Firefox 和 Firebug）

在文件中使用您开发版本的代码`test.js`并手动使用`debugger;`或插入断点。

额外说明：如果您遇到问题，例如您的代码在开发模式下工作（通过包含上述文件）但在转换为单行书签时不起作用，那么您所做的转换/编码一定有问题使它成为单行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-18T04:42:17.503

将您的小书签粘贴到开发人员控制台中，但在执行之前，请`debugger;`在第一行添加一条语句。小书签将出现在调试器中名为“SOURCE”的选项卡下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-24T10:47:08.673

将您的书签代码复制并粘贴到调试器控制台中，按“输入”

我的意思是“代码”

```
function(){ ... }(); 
```

任何加载的 javascript 文件都将出现在调试器选项卡中，当您粘贴（或控制台中的向上箭头）并再次按“输入”时，您可以在其中设置断点、单步执行等。

# django - 如何将 modeladmin 额外的表单字段添加到 readonly_fields？

> ID：15344849
> 
> 赞同：0
> 
> 时间：2013-03-11T17:30:32.570
> 
> 标签：django, admin

在打开模型实例的管理页面时，向 a 添加额外的表单字段时`readonly_fields`出现错误`ModelAdmin`：`ImproperlyConfigured`

```
TaskClosedAdmin.readonly_fields[0], 'extra_admin_field' is not a callable or an attribute of 'TaskClosedAdmin' or found in the model 'TaskClosed'. 
```

如何将额外字段添加到 readonly_fields？

**编辑**

我也尝试过`get_form()`，`TaskClosedAdmin`认为这些字段可能会在之后更新`super(TaskClosedAdmin, self).get_form(request, obj, **kwargs)`：

```
def get_form(self, request, obj=None, **kwargs):
    form = super(TaskClosedAdmin, self).get_form(request, obj, **kwargs)
    self.readonly_fields = obj._meta.get_all_field_names()
    self.readonly_fields.append('extra_admin_field')
    return form 
```

我仍然收到关于`extra_admin_field`不存在的相同错误...我在哪里可以添加它？

**模型.py**

```
class Task(models.Model):

    # some fields

class TaskToConfirm(Task):
    class Meta:
        proxy = True 
```

**管理员.py**

```
class TaskForm(forms.ModelForm):

    extra_admin_field = forms.CharField(max_length=10)

    class Meta:
        model = Task

    def __init__(self, *args, **kwargs):

        super(TaskForm, self).__init__(*args, **kwargs)

        # set extra_admin_field value

class TaskAdmin(admin.ModelAdmin):

    form = TaskForm

class TaskClosedAdmin(TaskAdmin):

     readonly_fields = ('extra_admin_field',) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:43:49.207

您需要做的是编写一个只读小部件并直接在您的表单上指定它，如下所示：

```
from ... import ReadOnlyWidget

class TaskForm(forms.ModelForm):
    extra_admin_field = forms.CharField(max_length=10)

    class Meta:
        model = Task
        widgets = {
            'extra_admin_field': ReadOnlyWidget,
        }

    def __init__(self, *args, **kwargs):
        super(TaskForm, self).__init__(*args, **kwargs)
        # set extra_admin_field value 
```

这里有一个只读的小部件应该可以工作（我没试过）：http: [//djangosnippets.org/snippets/1682/](http://djangosnippets.org/snippets/1682/)

# sql-server - 如何从 SQL Server 2008 中的多个表中获取不同的行？

> ID：15344850
> 
> 赞同：0
> 
> 时间：2013-03-11T17:30:34.753
> 
> 标签：sql-server, sql-server-2008

我有两张桌子让我们说`tableA`和`tableB`：

`TableA`：

```
AID  Another_A_ID 
1        A               
2        A
3        A
4        B
5        B
6        C 
```

`TableB`：

```
AID    Name
1       a_a_name
1       a_b_name
1       a_c_name
1       a_d_name
2       a_a_name
2       a_b_name
2       a_c_name
2       a_d_name
3       a_a_name
3       a_a_name
3       a_a_name
3       a_a_name
4       b_a_name
4       b_b_name
5       b_a_name
5       b_b_name 
```

我怎样才能得到`tableB.name`每个`Another_A_Id`in `tableA`？

这是我尝试过的：

```
Select distinct tA.Another_A_ID, tB.name 
from tableA tA
Inner Join tB on tA.AID = tB.AID 
```

这会产生多个重复的行`Another_A_ID`

我在这里看的是

```
Another_A_ID    Name
A                a_a_name
A                a_b_name
A                a_c_name
A                a_d_name
B                b_a_name
B                b_b_name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:36:06.927

我不确定为什么这不会产生您期望的答案：

```
SELECT a.Another_A_ID, b.Name
  FROM dbo.tableA AS a
  INNER JOIN dbo.TableB AS b
  ON a.AID = b.AID
  GROUP BY a.Another_A_ID, b.Name; 
```

事实上，[这个 SQLfiddle](http://sqlfiddle.com/#!3/4ced6/2)证明了您的查询有效（我的也是如此）。如果您遗漏了任何细节问题，请添加它们。

# java - Java/Swing 的基于模板的编辑器组件？

> ID：15344854
> 
> 赞同：0
> 
> 时间：2013-03-11T17:30:37.027
> 
> 标签：java, swing, visual-programming

我正在为我的 Swing 应用程序寻找基于模板的文本编辑器。（SWT 组件也可以）

如果您不知道什么是“基于模板”的编辑器，请查看 Alice 中的基于模板的编辑器： ![在此处输入图像描述](../Images/ce83ddbf73dcd80c04baed0899b38271.png)

因此，您只需删除要添加到代码中的块的模板，例如 if 或循环，并且只能在模板的“孔”中添加兼容的表达式。

（我需要它作为最终用户编程工具，因此自动完成不足以让用户快速入门。）

旧版 Alice 的源代码在[github](https://github.com/vorburger/Alice)上在线，但该代码没有文档并且非常庞大，所以这将是我最后的手段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:52:38.397

Swing 的 StyledDocument 只有两个级别的样式：段落和字符级别，但它们是基于集合的，因此您有一种嵌套。我将使用 HTMLEditorKit（嵌套 HTML）、只读 JTextPane 和基于插入符号位置的上下文插入。具有可能的文档结构的 XML 模式并使用它来插入`<div class='myX'>`等。所以在插入符号位置有一堆嵌套元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T05:58:30.070

最近我偶然发现了一些使用和创建此类编辑器的项目：

*   [刮](http://scratch.mit.edu/)
*   [块状](https://code.google.com/p/blockly/)
*   [ArduBlock](http://ardublock.com/)
*   [应用发明家](http://appinventor.mit.edu/)

对于 C/C++ 程序员来说，Scratch 是一个很好的起点，但对于 Java 开发人员来说，有[openblocks](http://education.mit.edu/openblocks)。似乎还没有一个真正的名称约定，但你肯定会通过术语“可视化编程”和“块编辑器”找到比“基于模板的编辑器”更多的项目。

# php - 如何使用 XMPPHP 获取和设置优先级

> ID：15344861
> 
> 赞同：1
> 
> 时间：2013-03-11T17:30:51.340
> 
> 标签：php, xmpp

我希望我的 XMPPHP 客户端始终获得特定用户收到的消息的副本。这需要： - 能够检测所有现有客户端及其优先级 - 能够将 XMPPHP 的优先级设置为与另一个客户端中设置的最高优先级相同的级别。

有谁知道如何用 XMPPHP 做到这一点？我尝试在 XMPPHP 中更改第 190 行，但一旦我的两个 GMail 帐户来回聊天，它根本无法收到消息。

```
public function presence($status = null, $show = 'available', $to = null, $type='available', $priority=120) {
    if($type == 'available') $type = '';
        $to  = htmlspecialchars($to);
    $status = htmlspecialchars($status);
    if($show == 'unavailable') $type = 'unavailable';
            $out = "<presence";
    if($to) $out .= " to=\"$to\"";
    if($type) $out .= " type='$type'";
        if($show == 'available' and !$status) {
        $out .= "/>";
    } else {
        $out .= ">";
        if($show != 'available') $out .= "<show>$show</show>";
        if($status) $out .= "<status>$status</status>";
    if($priority) $out .= "<priority>$priority</priority>";
    $out .= "</presence>";
    }

$this->send($out); 
```

}

使用以下代码调用此方法：

```
$conn = new XMPPHP_XMPP('talk.google.com', 5222, 'aaaaa@gmail.com', 'bbbb', 'xmpphp', 'gmail.com', $printlog=true, $loglevel=XMPPHP_Log::LEVEL_INFO);
$conn->autoSubscribe(true);
$conn->connect();
$conn->getRoster();
$conn->presence($status="Active"); 
```

# java - 如何防止数组越界

> ID：15344862
> 
> 赞同：1
> 
> 时间：2013-03-11T17:30:52.127
> 
> 标签：java, arrays

我正在尝试编写一个程序来最大化买卖股票的利润。我正在尝试检查下一个索引中的值是否大于当前索引位置中的值，但是我的循环导致数组超出范围。它发生在这一行 **if((shares[i]) < (shares[i+1]).)**防止这种情况的最佳方法是什么。

编辑：我得到了一份股价清单。每天我可以买或卖买或卖。我的方法是找到股价的平均值。如果价格低于平均水平，则“买入”，如果接下来的几天价格仍然较低，则持有“买入”。反之亦然。如果数量大于平均值，则卖出，如果之后的一天仍然更大，则持有卖出。理想情况下，在股票 [9] 我将以 4 欧元买入，在股票 [11] 我将以 19 欧元卖出。但是，在检查是否出售时，数组越界，因为它尝试检查 share[11] 之后的下一个索引。

```
public static void main(String[] args)
{
    int [] shares ={3,7,4,2,10,11,8,5,4,8,19};
    int average= 0;
    int  buyOrSell = 0;
    int profit = 0;

    for(int i = 0; i< shares.length; i++)
    {
        average += shares[i];
    }

    average  /= shares.length;
    System.out.println(average);

    for(int i = 0; i < shares.length; i++)
    {
            if((shares[i] <= average) && (buyOrSell == 0))
            {
                if((shares[i]) < (shares[i+1]))
                {
                System.out.println("Buy" + shares[i]);
                buyOrSell++;
                System.out.println("Profit: " + (profit -= shares[i]));
                }
                else System.out.println("Hold Buy" + shares[i]);

            }

            if(shares[i] >= average && buyOrSell == 1)
            {
                if((shares[i]) > (shares[i+1]))
                {
                System.out.println("Sell" + shares[i]);
                buyOrSell--;
                System.out.println("Profit: " + (profit += shares[i]));
                }

                else System.out.println("Hold Sell" + shares[i]);
            }

    }

    System.out.println("Profit: "+ profit);

} 
```

感谢 Gambs 解决方案，我添加了这个 if 语句来解决我的问题。

```
if((i == shares.length -1)  && buyOrSell == 1 && (shares[i] >= average)) 
        {
            System.out.println("Sell" + shares[i]);
            buyOrSell--;
            System.out.println("Profit: " + (profit += shares[i]));
            break;

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T17:31:57.703

当到达数组的末尾时，`shares[i+1]`将抛出异常。您应该将循环中的限制减少一：`for(int i = 0; i < shares.length - 1; i++)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:49:31.993

除了像每个人都正确建议的那样实施范围限制之外，您还必须考虑数组最后一项的*边界情况*。如果您迭代 until `length - 2`，那么 position 中的元素会发生什么情况`length - 1`？

您可以采取两种方法。一种是迭代直到`length - 2`然后处理循环外的最后一个元素。

```
for(int i = 0; i < shares.length - 1; i++)
//Your code
int finalShare = shares[length - 1];
//Manage the final item here 
```

另一种方法是保持迭代不变，同时添加一个特定的检查来确定迭代是否已经结束，处理最终元素，然后中断迭代。

```
for(int i = 0; i < shares.length; i++) {
    if(i == length - 1) {
        //handle final element here...
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T17:34:48.510

数组从 0 开始，所以`shares[i+1]`当`i == shares.length`

根据您的逻辑，您可以做很多事情，例如

改变

```
if((shares[i]) < (shares[i+1])) 
```

到

```
if((i+1 < shares.length) && (shares[i]) < (shares[i+1])) 
```

或者

```
if((shares[i-1]) < (shares[i])) 
```

或者您可以将循环中的条件更改为

```
for(int i = 0; i < shares.length - 1; i++) 
```

这完全取决于你的逻辑是如何工作的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T17:33:13.957

您的第二个`for`循环查看 index `[i+1]`，该索引超出了循环的最后一次迭代 when 的范围`i == length - 1`。为了解决这个问题，你的循环应该`length - 1`这样迭代：

```
for(int i = 0; i < shares.length - 1; i++) 
{...} 
```

这样，您始终可以访问`[i+1]`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T17:38:05.773

循环从`i=0`到`i=shares.length-1`。这意味着 取的最大值`i`是`shares.length-1`。因此，doing`shares[i+1]`等价于doing `shares[shares.length]`。这就是你得到的原因，`ArrayIndexOutOfBoundsException`因为数组索引从`0`not开始`1`。您可以通过将循环条件更改为 来避免它`i < shares.length-1`。

# java - 从 byte[] 到 String 的转换令人惊讶的时机

> ID：15344867
> 
> 赞同：2
> 
> 时间：2013-03-11T17:31:04.497
> 
> 标签：java, performance, scala

我正在使用 a`DataInputStream`从文件中读取字节数组并转换为字符串。这是原始代码。请注意， dis 是 a `DataInputStream`on `BufferedInputStream`a `GZipInputStream`on a `FileInputStream`。

```
// class definition
var byteBuffer = Array[Byte](0)

...

// Get the payload
if (contentLength > byteBuffer.length) {
  println("resize")
  byteBuffer = new Array[Byte](contentLength, "UTF-8")
}
dis.read(byteBuffer, 0, contentLength)

new String(byteBuffer) 
```

这段代码和周围的处理速度很*慢*。我每秒只处理 80 个文档。一个小的变化会显着提高速度。

```
// Get the payload
val byteBuffer = new Array[Byte](contentLength, "UTF-8")
dis.read(byteBuffer, 0, contentLength)

new String(byteBuffer) 
```

现在我每秒处理近 300 个文档。对我来说，为什么每次分配数组都应该提供显着的速度优势对我来说毫无意义，即使在深入研究解码代码之后也是如此。有任何想法吗？

val/var 变化无关紧要。如果我只是删除条件，它会获得相同的速度提升。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T17:38:51.663

在第二种情况下，您制作了一个大小合适的字符串。在第一种情况下，您的字符串都与您之前创建的最大字符串一样大。

您可能有后来的处理代码让您没有注意到这种差异？

# python - 拥有属性python的访问对象

> ID：15344873
> 
> 赞同：0
> 
> 时间：2013-03-11T17:31:35.987
> 
> 标签：python

我试图找出一种方法来获取拥有属性本身的属性的对象。这个例子基本上就是我想要做的。有任何想法吗？

```
import random

class Data(object):
  def __init__(self, index):
     self.index = index
     self.val = random.random()

class Log(object):
  def __init__(self):
     self.timestamp = '09:50'
     self.data = []
     for i in range(0, 20, 5):
        self.data.append(Data(i))

def get_timestamp_from_data(data):
  pass

log = Log()
cur_data = log.data[2]

data_timestamp = get_timestamp_from_data(cur_data) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:37:37.863

这是不可能的。

在 python 中，对象并不真正拥有其他对象。所以你`data`不属于日志。该对象仅存储对列表的引用。多个对象可以引用该列表。该列表本身不会跟踪谁引用了它。所以没有办法`Log`从列表中返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:41:03.070

没有内置的方法可以做到这一点，因为对象可以被任意数量的引用引用。然而，给你的子对象一个对它们的父对象的引用仍然很容易。

```
class Data(object):
    def __init__(self, index, parent_obj=None):
        self.index = index
        self.parent_obj = parent_obj # Refer back to the log (or whatever!)
        self.val = random.random()

class Log(object):
    def __init__(self):
        self.timestamp = '09:50'
        self.data = [Data(i, self) for i in range(0, 20, 5)]

def get_timestamp_from_data(data):
    try:
        return data.parent_obj.timestamp
    except AttributeError:
        print 'data is not associated with a log'
        return None # Obviously error handling is up to you.

log = Log()
cur_data = log.data[2]
data_ts = get_timestamp_from_data(cur_data)
print data_ts # Prints 09:50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:43:08.307

您将需要对 Data 对象本身中的时间戳进行一些引用。对象之间没有隐含的“所有权”。它们只是链接在一起，因为您明确地这样做（通常是通过给一个对象一个对另一个对象的引用）。这里有两种方法：

首先，通过添加对 Log 对象的引用...

```
class Data(object):
    def __init__(self, log, index):
        self.log = log
        self.index = index
        self.val = random.random()

    @property
    def timestamp(self):
        return self.log.timestamp

class Log(object):
  def __init__(self):
     self.timestamp = '09:50'
     self.data = []
     for i in range(0, 20, 5):
        self.data.append(Data(self, i))

def get_timestamp_from_data(data):
    return data.timestamp 
```

...还有另一个，它将时间戳复制到 Data 对象...

```
class Data(object):
    def __init__(self, index, timestamp):
        self.index = index
        self.timestamp = timestamp
        self.val = random.random()

class Log(object):
  def __init__(self):
     self.timestamp = '09:50'
     self.data = []
     for i in range(0, 20, 5):
        self.data.append(Data(self.timestamp, i))

def get_timestamp_from_data(data):
    return data.timestamp 
```

您使用哪种（我相信还有其他方法）取决于您。请注意，如果 Log 中的时间戳因任何原因发生更改，第一个示例将显示数据中的时间戳更改，但在第二个示例中，它不会...

```
log = Log()
cur_data = log.data[2]
print(log.timestamp) # Prints '09:50'
log.timestamp = '10:00'
print(log.timestamp) # Prints '10:00'
print(cur_data.timestamp) 
```

如果您使用我提供的第一个示例，最后一行将打印“10:00”，因为数据是从日志中的引用中检索的。如果您使用第二种方式实现，您将打印“9:50”，因为时间戳是在创建时从日志对象“复制”的。在这种情况下，Data 对象将包含其自己的时间戳的副本。

# jquery - jsp包括vs jquery ajax

> ID：15344874
> 
> 赞同：1
> 
> 时间：2013-03-11T17:31:37.780
> 
> 标签：jquery, ajax, jsp

我有一个 jsp 页面，上面有单独的模块或小部件。为了提高页面的整体加载时间，我正在考虑并行获取那些独立的模块。我有 2 个策略：

**1：JQUERY AJAX**

```
function getSimilars(){
    $('#similars').load('getSimilars.jsp');
}
function getActivity(){
    $('#activity').load('getActivity.jsp');
}

$(document).ready(function(){
    var funcList = ['getSimilars','getActivity'];
        $.each(funcList, function(i,v){
            window[v]();
    })
}); 
```

**2：静态包含**

```
<div id="similars">
    <%@include file="getSimilars.jsp" %>
</div>
<div id="activity">
    <%@include file="getActivity.jsp" %>
</div> 
```

我知道**1**从浏览器运行，而**2**在编译时运行。但是其中哪些会使我的页面加载速度更快？

**编辑：** 虽然 jquery 方法**并行**运行这两个函数，但我认为第二种方法使那些 2 `include`s**串行**运行。我对吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:48:51.620

**选项 1>** 通过 ajax 加载页面将使部分页面加载速度更快，但其余 2 个页面的加载时间在页面调用期间每次都会有所不同，这取决于网络带宽。

**选项 2>** 我们从 Java EE 规范中知道，所有 jsp 页面第一次编译为 servlet，然后不需要进一步编译，生成的 .class 文件直接在以后对页面的所有调用中执行。

所以这里不会有任何进一步的时间依赖性来加载页面。

现在，如果应用程序同时需要整页，则应选择**选项 2 。**

然而

如果可以使用延迟加载体验的应用程序页面加载来获得更好的用户体验，则应选择**选项 1 。**

# asp.net - asp上的动态ID：Literal Cntrl

> ID：15344876
> 
> 赞同：1
> 
> 时间：2013-03-11T17:31:49.857
> 
> 标签：asp.net, html, vb.net

我想将 Id 添加到如下的一些 ctrls 中，具体取决于我想更改这些控件的服务器端值的 id。但我收到编译时错误 - 不是有效的标识符。我知道这可以在后面的代码中完成，但只是想知道是否可以在 apsx 页面上完成。

感谢您的关注

```
 <asp:Literal ID="ltrlTotalAmount_<%= trPlanYear.toString()%>" runat="server"></asp:Literal> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:09:45.617

您不能分配这样的 ID；ID 必须是静态定义的。您可以改用客户端元素。甚至可以在回发时使用 Request.Form 集合来读取客户端输入元素。尽管您必须在每个页面回发时手动重新渲染它们。

# javascript - 给第一个砖石/同位素随机项目一个类别

> ID：15344879
> 
> 赞同：0
> 
> 时间：2013-03-11T17:32:00.247
> 
> 标签：javascript, jquery, jquery-masonry, jquery-isotope

这是一个相当复杂的修改。我有一个使用同位素设置的网格系统。客户希望每次用户访问该页面时此网格都是随机的。这很容易通过添加 sortBy: 'random' 来使用同位素进行设置。

但是，同位素中的第一项具有“特征”类。这个特色类激活了更宽的网格元素和一些信息供用户单击，因此这将始终是我网格中的第一项。

现在，我需要做的是每次将随机序列中的第一个元素设置为“特色”。所以每次用户访问页面时，特色网格项都会有所不同。目前，因为我已经对特色类进行了硬编码，所以它只是随机放置在网格中。

反正有没有给随机序列中的第一个元素一个类？这是我的代码：

```
<script>
           var $container = $('#home-grid');

            $container.isotope({
              // options...
              resizable: true, // disable normal resizing
              sortBy : 'random',
              // set columnWidth to a percentage of container width
              masonry: { columnWidth: $container.width() / 2 }
            });

            $(window).smartresize(function(){
              $container.isotope({
                // update columnWidth to a percentage of container width
                masonry: { columnWidth: $container.width() / 2 }
              });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:39:14.777

有一种方法可以给随机序列中的第一个同位素元素一个类别！

使用回调函数并在该回调函数中，通过查找每个 Isotope 元素的某些值来找出哪个元素被定位为第一个元素：

1.  `transform`每个元素的矩阵值：`tx`和`ty`
2.  `$container`填充值：`padding-top`和`padding-left`

获得这 4 个值后，检查 的值是否`tx`与 匹配，`padding-left`以及 的值是否`ty`与 匹配`padding-top`。

如果两个条件都为真/匹配，请分配您的自定义类，例如。`.featured`到那个元素。

# jboss - JBoss 7.1 无法部署与 Spring 集成的 .aar 文件 (Axis2)

> ID：15344880
> 
> 赞同：0
> 
> 时间：2013-03-11T17:32:01.457
> 
> 标签：jboss, axis2

我已使用 eclipse 创建打包为 .aar 文件的 Axis2 Web 服务，如下所述：

Axis2 与 Spring 框架的集成 [http://axis.apache.org/axis2/java/core/docs/spring.html#a26](http://axis.apache.org/axis2/java/core/docs/spring.html#a26)

* WS 的项目是使用 Maven 创建的。

然后，我使用 Axis2 Web Admin Module 上传服务。

但是，我得到

**错误：java.lang.NoClassDefFoundError：org/apache/axis2/extensions/spring/receivers/ApplicationContextHolder**

如果我将我的 Web 服务打包为 .war，它会从 Eclipse 正确部署。

**可以做些什么？**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:51:41.187

这是我找到的最好的例子：

[http://fazlansabar.blogspot.com.es/2012/04/apache-axis2-tutorial-integrating-with.html](http://fazlansabar.blogspot.com.es/2012/04/apache-axis2-tutorial-integrating-with.html)

现在我从 Axis2 Web Admin 控制台部署了它。

诀窍是复制axis2.war的WEB-INF/lib中的spring jars。然后，您必须正确订购文件并从控制台上传 .aar 文件。Web 服务将出现在“可用服务”列表中。

要永久保留该服务，请将 .aar 复制到axis2.war 内的**WEB-INF\services\**，如下所述：

[http://axis.apache.org/axis2/java/core/docs/adv-userguide.html](http://axis.apache.org/axis2/java/core/docs/adv-userguide.html)

# ios - 如何使用 Settings.bundle

> ID：15344884
> 
> 赞同：0
> 
> 时间：2013-03-11T17:32:26.390
> 
> 标签：ios, settings

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我已经创建了`Settings.bundle`一个`Root.plist`和另外四个`.plist`，并且这些文件上的每个设置都有每个默认值。

这是我第一次和我一起工作，`Settings.bundle`我迷路了。我发现了这个[问题](https://stackoverflow.com/questions/510216/can-you-make-the-settings-in-settings-bundle-default-even-if-you-dont-open-the)，他们说我`Settings.bundle`每次运行应用程序时都必须读取默认值，但我不明白为什么。

我想我必须继续使用`NSUserDefaults`这里来读取设置值。

我有这些问题：

1.  如何使用设置应用程序读取在这些设置上设置的值？
2.  我如何知道用户是否更改了这些值中的一个或多个？用户使应用程序进入后台，打开设置应用程序并更改某些内容。我怎么能以编程方式知道这一点？
3.  如何保存任何修改（设置值的更改）并在“设置”应用上查看该更改？

顺便说一句，现在我有这个代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    // Set the application defaults
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if (![defaults boolForKey:@"firstRun"])
    {
        NSDictionary *appDefaults = [PreferenceDefaultValues dictionary];
        [defaults registerDefaults:appDefaults];

        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"firstRun"];

        [defaults synchronize];
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:17:10.020

1.  `identifier`Settings.bundle plist 中任何首选项的 都可以使用访问`NSUserDefaults`。例如，如果您有一个带有名为 标识符的首选项，那么您可以使用（假设它是一个项目）`allowDiagnostics`访问该项目的值。`[NSUserDefaults standardUserDefaults] boolForKey:@"allowDiagnostics"]``BOOL`

2.  您可以使用`NSUserDefaultsDidChangeNotification`获取有关您的偏好的任何更改的通知。

3.  与您阅读它们的方式相同。继续 1 的例子，`[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"allowDiagnostics"]`。但请注意，允许用户从多个位置（Settings.bundle 和应用程序中的某处）更改选项可能会让用户感到困惑。

# bash - BSD sed 无法替换所有“,0”

> ID：15344885
> 
> 赞同：4
> 
> 时间：2013-03-11T17:32:37.137
> 
> 标签：bash, csv, sed

我对 GNU sed 和 BSD sed 之间的区别有所了解。不幸的是我没有linux机器，只有mac可用。

我有一个 csv 格式的大数据文件，用逗号分隔。即使文件的前两行太大，无法在此处发布，您可以在此处找到前两[行](http://pastebin.com/wyj9Begu)。

我需要用“NA”替换 0,8,9,-999,-999.0 的值，因为这些值是缺失值的代码。

我在 bash 提示符下使用了以下 sed 命令

```
sed -e 's/\-999\.?\0?/NA/g' \
    -e 's/\-999/NA/g' \
    -e 's/,9,/,NA,/g' \
    -e 's/,8,/,NA,/g' \
    -e 's/,0,/,NA,/g' \
    firsttwolines.csv 
```

结果看起来不错，只是仍然存在一个`0`. 如何解决？以及如何将其放入 bash 脚本中？有没有更好的方法来完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:27:08.747

根据我的经验，在处理 CSV 文件格式时，sed、awk 等文本扫描工具无法处理所有极端情况。我知道您在 sed 中专门要求解决方案，但它并没有很好地完成这项工作。我推荐一种提供强大的 CSV 文件处理的语言，例如 Python 或 Tcl（还有更多，但这些都是我所知道的）。这是Python中的一个解决方案：

```
# csvreplace.py

import sys
import csv

if __name__ == '__main__':
    infilename = sys.argv[1]
    outfilename = sys.argv[2]

    with open(infilename) as infile, open(outfilename, 'w') as outfile:
        csvreader = csv.reader(infile)
        csvwriter = csv.writer(outfile)
        na_list = ['0', '8', '9', '-999', '-999.0']
        for row in csvreader:
            row = [col in na_list and 'NA' or col for col in row]
            csvwriter.writerow(row) 
```

您可以在 bash 脚本中将其用作：

```
python csvreplace.py data.csv out.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:33:37.090

我认为 awk 将是这项任务的更好选择（用 gawk 和 nawk 测试）：

```
awk '{ for(i=1; i<=NF; i++) if($i == 0 || $i == 8 || $i == 9 || $i == -999) $i = "NA" } 1' FS=, OFS=, firsttwolines.csv 
```

for 循环遍历每个字段并测试它与 NA 列表是否相等，如果发现为 true，则该字段被替换为`NA`，请注意 awk 在测试之前将该字段转换为数字。最后`1`调用默认块`{ print $0 }`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:30:24.137

使用 sed，尝试：

```
sed -e 's/\-999\(\.0\)*/NA/g' -e :a -e 's/,[089],/,NA,/; ta' file 
```

# ios - 如何为 ios facebook sdk 3.2 设置用户权限

> ID：15344887
> 
> 赞同：0
> 
> 时间：2013-03-11T17:32:41.290
> 
> 标签：ios, facebook, facebook-fql

我正在将 facebook SDK 3.0 升级到 3.2。我已经通过 facebook SDK 3.2 完成了 facebook 登录，并且工作正常。我想执行 fql 来获取用户的相册。由于用户权限，以下代码适用于获取 facebook 照片，但不适用于相册。我对如何为 facebook sdk 3.2 设置“user_photos”权限感到震惊。有什么建议么？提前致谢。

```
NSString *query =
@"SELECT pid, src_small, src_big, src FROM photo WHERE aid IN "
@"SELECT aid FROM album WHERE owner = me() ORDER BY created DESC LIMIT 50";

NSDictionary *queryParam =
[NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];

[FBRequestConnection startWithGraphPath:@"/fql"
                             parameters:queryParam
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) {
                          if (error) {
                              NSLog(@"Error: %@", [error localizedDescription]);
                          } else {
                              NSLog(@"Result: %@", result);
                          }
                      }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:12:45.767

您是说上面的代码适用于获取照片，这意味着您已经拥有获取用户相册所需的“user_photos”权限（两者的权限相同，请参阅[Graph API 文档](https://developers.facebook.com/docs/reference/api/user/)）。

**如果确实如此**，您可以使用以下查询轻松获取专辑：

```
SELECT aid, name, link, cover_pid 
FROM album 
WHERE owner = me() 
```

**否则，如果您确实缺少权限**，则意味着您也无法获取用户的照片。在这种情况下，您必须要求用户重新授权相关权限。您可以`FBSession`使用新权限调用常规授权方法，它会提示用户。

无论如何，我建议您使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)来测试您的 FQL 查询，它将帮助您轻松识别问题所在。

# r - 通过嵌套函数传递同名参数

> ID：15344889
> 
> 赞同：5
> 
> 时间：2013-03-11T17:32:47.973
> 
> 标签：r, graphics, plot, arguments, base

我正在创建一个使用绘图函数的简单绘图，该函数调用另一个绘图函数来通过它添加一条平滑线。第二个函数`lines()`接受一些标准的基本图形参数。第一个函数也使用相同的命名参数。现在我想改变第二个情节的一些元素而不改变第一个情节。我至少有几个我能想到的选择：

*   分别绘制每个
*   重写函数以将唯一命名的参数包含到第二个绘图函数中
*   为此可能使用 ggplot2 制作一个新的绘图功能

我开始思考是否可以在不重写任何内容的情况下将参数值传递给嵌套函数。请注意，在这个问题中，我不是要求一个函数来进行绘图 - 我可以根据需要编写自己的函数，我问我是否可以在参数列表中指定`traceplot`一个参数，如果它只传递给`lines`它也是 traceplot 的命名参数。例子：

```
require(coda)
require(geoRglm)

# Some example data
mcmc <- c(0, 0, 0, 0, 0.5, 0.5, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0.5, 
0.5, 1, 0.5, 0, 0.5, 0.5, 0.5, 0.5, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
0, 0.5, 0.5, 0, 0.5, 1, 0, 0.5, 1, 0.5, 0.5, 0.5, 0, 0.5, 0.5, 
0, 0, 0, 0, 0, 0, 0, 0.5, 0, 0, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.5, 0, 0, 0.5, 0, 0, 0, 
0.5, 0.5, 0, 0, 0, 0, 0, 0, 0, 0, 0.5, 0, 0.5, 1, 1, 0, 1, 0, 
0, 0.5, 0, 0.5, 0.5, 0, 0, 0, 0, 0, 0, 0.5, 0.5, 0.5, 0, 1, 0.5, 
1, 1, 1, 1, 1, 1, 1, 1, 1, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 
1.5, 1, 1.5, 1, 1, 1, 1, 0.5, 0.5, 1, 1, 1.5, 1.5, 1.5, 1, 1.5, 
1.5, 1.5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1.5, 1, 1.5, 1.5, 
1, 1.5, 1.5, 1, 1, 1, 1, 1)

# Input parameters for mcmc object
input <- structure(list(S.scale = 3.75e-05, Htrunc = "default", S.start = "default", 
    burn.in = 0, thin = 100, n.iter = 20000, phi.start = 0, phi.scale = 1), .Names = c("S.scale", 
"Htrunc", "S.start", "burn.in", "thin", "n.iter", "phi.start", 
"phi.scale"), class = "mcmc.geoRglm")

# create mcmc object
mcmc_obj <- create.mcmc.coda( mcmc , mcmc.input = input )

#Plot - smooth = TRUE draws the smooth line through the data
traceplot( mcmc_obj , smooth = TRUE , main = "Default")

# Changing the colour argument passes the same argument through to the lines function called to plot the smooth line
traceplot( mcmc_obj , smooth = TRUE , col = 2 , main = "Change colour to red") 
```

![在此处输入图像描述](../Images/dcd143e54ed18d20e518bb612023cf2b.png)

```
# In the source code of traceplot 'lines()' is called to plot the smooth line.
# Can I specify a colour argument to be passed only to lines without altering
# the function?
# Excerpt from the source code of traceplot:

function (x, smooth = FALSE, col = 1:6, type = "l", ylab = "", 
    ...) 
{
... some code here then...
if (smooth) {
            for (k in 1:nchain(x)) lines(lowess(xp, yp[, k]) 
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:12:03.983

您可以使用两个列表传递不同的参数：

```
myfun <- function(x,y,par1=NULL,par2=NULL){
  if(is.null(par1)){
    plot(x,y)
  }else{
    do.call(plot,c(list(x=x,y=y),par1))
  }
  if(is.null(par2)){
    lines(x,y)
  }else{
    do.call(lines,c(list(x=x,y=y),par2))
  }
} 
```

`par1`参数为`plot`和`par2`参数为`lines`。`do.call`如果您有这样的参数，请使用：

```
myfun(1:10,1:10) # no params
myfun(1:10,1:10,par1=list(pch=20)) # params only to plot
myfun(1:10,1:10,par1=list(pch=20),par2=list(col="red",lwd=2)) # params to plot and lines 
```

# php - My SQL 中的日期始终为 0000-00-00

> ID：15344892
> 
> 赞同：0
> 
> 时间：2013-03-11T17:33:08.550
> 
> 标签：php, mysql, json

我一直在扯头发，向众神献祭——做我能做的功课，但我和这里的其他两个帖子有同样的问题，这两个帖子似乎都没有解决

[正确格式化的 MySQL 日期插入语句返回全 0](https://stackoverflow.com/questions/2185392/properly-formatted-mysql-date-insert-statement-returns-all-0s)

和

[MYSQL 日期字段总是输出 0000-00-00](https://stackoverflow.com/questions/10974066/mysql-date-field-always-outputs-0000-00-00)

当我回显时，我得到了正确格式化的值我使用的是日期而不是日期时间 MySQL 在日期之前正确输入了一个名称，但随后也输入了一个空白的 longblob（图片） - 似乎它只是输入一个字段，或者不知何故我没有正确设置了MySQL还是其他？

我的代码是

```
catch(PDOException $e)
    {
    echo "Im sorry dave I cant do that";
    echo $e->getMessage();
    }

        //*next bit is to insure that if connection is lost database is not  
   partially updated-I think-
        //* $DBHandle->beginTransaction();

        $firstnameOBS= $_POST['touristfirstname'];
        $todaysdateOBS= $_POST['touristdatetoday'];
        $picturenow= $_POST['picturesubmitted'];

        $JSONfirstname = json_encode($firstnameOBS);
        $JSONtodaysdate = json_encode($todaysdateOBS);
        $JSONpicturenow = json_encode($picturenow);
        echo $JSONtodaysdate ;

        //* Below is the send from PHP page to My Sql Server -
                //*  JSON encode here 

    try {    
        $senditin = $DBHandle->prepare("INSERT INTO 
    `Observations`.`fkarnd`(`firstname`,`datetoday`,`picturesubmitted`) VALUES   
 (:firstname 
    , :datetoday ,:picturesubmitted)", array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));

        //* $senditin->bindValue(':firstname', $JSONfirstname, PDO::PARAM_STR);
        //* $senditin->bindValue(':datetoday', $JSONtodaysdate, PDO::PARAM_STR);
        //* $senditin->bindValue(':picturesubmitted', $JSONpicturenow,
     PDO::PARAM_LOB);

        //* $myinputarray = array('firstname'=> $JSONfirstname, 'datetoday' => 
    $JSONtodaysdate, 'picturesubmitted' => $JSONpicturenow );

        $DBHandle->beginTransaction();
        $senditin->execute(array('firstname'=> $JSONfirstname, 'datetoday' => 
    $JSONtodaysdate, 'picturesubmitted' => $JSONpicturenow ));
        //* commit allows transaction begun to complete
        $DBHandle->commit();

     }  

    catch ( PDOException $e ) {
      echo "I'm sorry, I can't do that Dave......";
      file_put_contents( 'dbErrors.txt', $e->getMessage(), FILE_APPEND );   
        //* rollback function call here? a nasty exception has appeared,      
     }
        echo "<br>"."successful submission";
        $DBHandle = null;

     ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:41:38.927

您的意思是改为调用 json_decode($todaysdateOBS) 吗？看起来这可能是问题的根源，因为 json_encode 将尝试以 json 格式编码您发送给它的任何内容，这不是 sql 中的有效日期字段（[http://php.net/manual/en/function .json-encode.php](http://php.net/manual/en/function.json-encode.php)）。

# javascript - 如何动态删除逗号并添加单词并使用jQuery

> ID：15344893
> 
> 赞同：2
> 
> 时间：2013-03-11T17:33:08.640
> 
> 标签：javascript, jquery, jquery-ui, text

我正在使用 jQuery UI 的拖放功能，并在“放置”时将项目附加到`<ul>`每个项目后带有“，”的元素。对于最后附加的`<li>`，如何动态删除逗号并`and`在项目前添加单词？

我试过了：

`$(#pot ul li:last-child).text().replace(/,/g, '');`

但这没有给我运气。

```
$(function() {
    $( ".flavours li" ).draggable({
        revert:true
    });

    $( "#pot ul" ).droppable({
        activeClass: "ui-state-default",
        hoverClass: "ui-state-hover",
        drop: function( event, ui, flavours ) {
            $( "<li></li>" ).text(ui.draggable.text() + ',').appendTo(this);
        }
    })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:35:06.853

将选择器包含在`quotes`其中，您必须将更改的文本分配回元素

```
$('#pot ul li:last-child').text($('#pot ul li:last-child').text().replace(/,/g, '')); 
```

或者

```
el = $('#pot ul li:last-child');
el.text(el.text().replace(/,/g, 'and')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:41:27.263

为了分离内容和表示，如果您不需要与 IE8 兼容，您可以在纯 CSS 中完成：

```
#pot ul li:not(:last-child):after {
  content:",";
} 
```

[示范](http://jsbin.com/atazeh/1/edit)

为了更加兼容，您也可以在之后使用 jQuery 和相同的选择器来执行此操作：

```
$('ul li:not(:last-child)').append(','); 
```

或者您可以使用 jQuery 定义一个类：

```
$('ul li').each(function(){ // this can be called each time you change the list
  if ($(this).is(':last-child')) {
     $(this).removeClass('notLast'); 
  } else {
     $(this).addClass('notLast'); 
  }
}); 
```

[示范](http://jsbin.com/atazeh/4/edit)

# jquery - jquery ajax幻灯片功能

> ID：15344894
> 
> 赞同：1
> 
> 时间：2013-03-11T17:33:09.283
> 
> 标签：jquery, ajax

我有一段代码可以按照预期的方式工作。

```
function showContent(pos,direction){
$("#area").hide("slide", { direction: direction=="left"?"right":"left"}, 2000);
$("#area").load("flow_forms.jsp #area" + pos);
$("#area").show("slide", { direction: direction }, 500);
}

$('#next').click(function(){
    if(question_pos==0){
        question_pos+=1;
        showContent(question_pos,"right");
        return true; 
```

该区域应该向左滑动，在屏幕外加载，然后从右侧滑入加载的区域内容。

基本上我遇到的问题是 .load 发生在 .hide 之前。所以我所拥有的是一个在向左滑动时加载的区域，然后从右侧引入已经加载的区域。我的老板建议了一个回调函数，但我什至不知道那是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:37:09.460

您可以`.load`通过使用完成回调或在元素的动画队列上接受“承诺”来等待第一个动画完成：

```
$("#area").hide(...).promise().done(function() {
    $("#area").load(..., function() {
        $(this).show(...);
    });
}); 
```

不过，实际上有一个更好的选择，它可以让您在动画正在进行时*开始*`.load`- 这将更具响应性：

```
var $tmp = $('div');

var loaded = $.Deferred(function() {
    $tmp.load(...);  // load into an off-screen div
    this.resolve();
});

var hidden = $('#area').hide(...).promise();

$.when(loaded, hidden).done(function() {
    // move #tmp contents to #area and show it
    $('#area').empty().append($tmp).show();
}); 
```

这`$.when()`要求 AJAX 加载和动画都已完成，同时允许它们同时进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:37:17.430

您应该使用**回调函数**- 一旦当前函数完成执行，这些函数就会运行，如下所示：

```
function showContent(pos,direction){
    $("#area").hide("slide", { direction: direction=="left"?"right":"left"}, 2000,      
        function(){
            $("#area").load("flow_forms.jsp #area" + pos, function(){
                $("#area").show("slide", { direction: direction }, 500);
            }); // Load callback 
        } // Hide callback            
    );
} 
```

# hibernate - Hibernate QueryBuilder如何模仿“喜欢”查询

> ID：15344896
> 
> 赞同：0
> 
> 时间：2013-03-11T17:33:12.497
> 
> 标签：hibernate, hibernate-search, query-builder, sql-like

我现在正在学习这个 API。我有一些代码如下，但它完全匹配而不是“喜欢”。因此，当我有一个 String`JMeter`并且我使用`Meter`它时，它不会将它带回搜索结果中，但它应该。非常感谢任何帮助

```
SearchManager searchManager = Search.getSearchManager(listingIndex);

 QueryBuilder qb = searchManager.buildQueryBuilderForClass(ListingIndexEntry.class).get();

Query q = qb.keyword().onField("title").matching(title).createQuery(); 
```

谢谢

卡尔提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:53:08.290

如果您使用的是休眠搜索，那么我认为您正在寻找通配符查询。

检查有关它的文档[第](http://docs.jboss.org/hibernate/search/3.3/reference/en-US/html/search-query.html#search-query-querydsl)5.1.2.3 节

所以你的代码将变成：

```
Query q = qb.keyword().wildcard().onField("title").matching("*"+title).createQuery(); 
```

注意文档中指定的性能，以通配符开头不是很好。

# json - 将 ko.mapping.toJSON 数据传递给 WCF 会导致 null 变量

> ID：15344899
> 
> 赞同：0
> 
> 时间：2013-03-11T17:33:18.010
> 
> 标签：json, wcf, knockout.js

是否可以将这样的字符串传递给 WCF 服务：

```
self.savePreferences = function(callback) {
        $.ajax({
            url: "services/Foo.svc/SavePreferences",
            type: 'POST',
            timeout: 3000,
            data: ko.mapping.toJSON(self.user().preferences),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                if (result) {
                    alert("data saved " + result);
                } else {
                    //todo, send server email alert
                    alert("Something went wrong. We will look into it.");
                }
            }
        });
    } 
```

在这种情况下，我的服务中的 jsonPreferences 总是为 null

```
 [OperationContract]
    [WebInvoke(
      Method = "POST", 
      RequestFormat = WebMessageFormat.Json)]
    string SavePreferences(string jsonPreferences); 
```

还是我需要这样做：

数据：JSON.stringify(ko.mapping.toJSON(self.user().preferences))

# c# - 使用绑定源的文本框上的文本更改事件

> ID：15344900
> 
> 赞同：0
> 
> 时间：2013-03-11T17:33:18.840
> 
> 标签：c#, winforms, bindingsource

我有一个`Textbox`Windows 表单，我想在用户输入值时进行一些计算。但问题是，当我的表单加载`Textbox_TextChange`事件时，因为绑定源在文本框中填充了 0。那么我该怎么做呢。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:45:21.207

一种方法是添加一个布尔字段并将其设置为 true：

```
class Form1{
    bool firstTime = true;
    .
    .
    .
} 
```

然后在您的`Textbox_TextChange`方法中，仅在以下情况下进行`firstTime`计算`false`：

```
void Textbox_TextChange(object sender, EventArgs e)
{
    if(!firstTime)
    {
        //do calculations
    }
    firstTime = false;
} 
```

因此，当您进行绑定时，即文本第一次更改时，将不会执行计算。

# ios - 启用 UIScrollView 的缩放重置缩放视图转换

> ID：15344902
> 
> 赞同：0
> 
> 时间：2013-03-11T17:33:25.267
> 
> 标签：ios, objective-c, uiscrollview, rotation, zooming

首先，我想明确一点，关于这个主题似乎有很多问题没有回应。得到这个答案的人应该很少见。

我将一个设置`UIImageView`为子类中的缩放视图`UIScrollView`。

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.imageView;
} 
```

就在`self.imageView`创建之后，我在它上面应用了一个 CGAffineTransform，它的矩阵从：

```
(CGAffineTransform) $0 = {
  (CGFloat) a = 1
  (CGFloat) b = 0
  (CGFloat) c = 0
  (CGFloat) d = 1
  (CGFloat) tx = 0
  (CGFloat) ty = 0
} 
```

至

```
(CGAffineTransform) $2 = {
  (CGFloat) a = 0
  (CGFloat) b = 1
  (CGFloat) c = -1
  (CGFloat) d = 0
  (CGFloat) tx = 0
  (CGFloat) ty = 0
} 
```

在多次调用`- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView` 委托方法后，转换矩阵`self.imageView`从：

```
(CGAffineTransform) $6 = {
  (CGFloat) a = 0
  (CGFloat) b = 1
  (CGFloat) c = -1
  (CGFloat) d = 0
  (CGFloat) tx = 0
  (CGFloat) ty = 0
} 
```

至

```
(CGAffineTransform) $7 = {
  (CGFloat) a = 0.130719
  (CGFloat) b = 0
  (CGFloat) c = 0
  (CGFloat) d = 0.130719
  (CGFloat) tx = 0
  (CGFloat) ty = 0
} 
```

如您所见，0.130 是我的缩放比例，但我的旋转变换消失了。
我正在寻找一种方法来保持 self.imageView 上的旋转。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:55:11.283

这可能听起来有点 Hack'ish 但我会尝试将 imageView 嵌入 UIView 中，该 UIView 将由 viewForZoomingInScrollView 调用返回。

这样，imageView 将保留它的旋转变换，而它的 superview 将被放大或缩小。

我倾向于避免对 UIKit 内部的功能做出假设

# android - 活动在 requestCode 中返回“0”

> ID：15344903
> 
> 赞同：1
> 
> 时间：2013-03-11T17:33:25.833
> 
> 标签：android, android-intent

我不知道我哪里错了。这可能是一个微不足道的错误，但我无法弄清楚。

形成我的第一个活动我开始另一个活动的结果：

```
Intent ccard_intent= new Intent(this, create_ccard.class);
startActivityForResult(ccard_intent,start_activity_for_ccard); 
```

在新的活动中，我使用以下方法返回：

```
Intent i = new Intent();
i.putExtra("card_name", Card_name);
setResult(create_ccard.RESULT_OK);
finish(); 
```

在我的第一个活动的 onActivityResult 中：

```
 protected void onActvityResult(int requestCode, int resultCode, Intent data){

   super.onActivityResult(requestCode, resultCode, data);

    this.requestCode=requestCode;

    Toast.makeText(getBaseContext(), "resume working switch case error" + requestcode, Toast.LENGTH_LONG).show();

   if(resultCode==RESULT_CANCELED){

    flag=0;
   }
} 
```

我在 requestCode 的地方收到 error0？为什么？？我哪里出错了？？它应该是 788，因为我在进行活动时使用它。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:58:33.810

你的线

```
startActivityForResult(ccard_intent,start_activity_for_ccard); 
```

是真正决定你获得什么价值的人

```
this.requestCode=requestCode; 
```

[请参阅此处](http://developer.android.com/training/basics/intents/result.html)的文档。

查看您的 Toast 代码

```
Toast.makeText(getBaseContext(), "resume working switch case error" + requestcode, Toast.LENGTH_LONG).show(); 
```

我最好的猜测是，由于您要更改大小写（使用`requestcode`而不是`requestCode`），因此您会得到错误的值`Toast`

另外（经过长时间的讨论）：您的方法签名是错误的。它读到

```
protected void onActvityResult(int requestCode, int resultCode, Intent data) 
```

并且应该是

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
```

这很好地解释了为什么您的 requestCode 从未将其值从 0 更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:38:28.910

改变

```
setResult(create_ccard.RESULT_OK); 
```

至

```
setResult(RESULT_OK); 
```

# c# - 字段相等需要什么标准？

> ID：15344916
> 
> 赞同：1
> 
> 时间：2013-03-11T17:34:00.357
> 
> 标签：c#, java, sql, sql-server, database

我正在用 C# 和 Java 构建一个查询构建器模块，用户可以在其中根据指定的连接表达式连接表，例如`[Table1].[ID] = [Table2].[ID]`.

`Table1`用户可以修改连接表达式，并且可以选择将任何字段与 中的任何字段等同起来`Table2`。

我想检查列数据类型和长度是否相同，但是例如`varchar(10)`可以将列与`nchar(10)`列连接。只要长度相同，就可以选择这些不同的数据类型。

因此，我应该在我的检查中指定什么条件来查看用户选择的连接表达式是否有效？我不能单独依赖 PK/FK 约束。

这些标准可以应用于 C# 或 Java - 没关系，因为一旦我有了一个通用的答案，我就可以将我的解决方案转换为适合两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:13:52.447

Books Online 将为您提供数据类型，哪些可以隐式转换，哪些必须显式转换，哪些不能转换。搜索 CAST and CONVERT (Transact-SQL) 并向下滚动。

既然您知道规则，您应该能够构建某种规则引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:53:47.753

我认为你最好的选择是简单地硬编码集合，然后检查两个字段是否在同一个集合中，然后才*比较*长度。

```
var TypeSets = new Dictionary<string, List<string>> {
                   { "string", new[] { "varchar", "nchar", "text" } },
                   { "integer", new[] { "int", "smallint" } },
               }; 
```

然后：

```
if (TypeSets.Any(x => x.Value.Contains(fieldType1) && x.Value.Contains(fieldType2)))
{
   // Check length of each field
}
else 
{
    return false;
} 
```

# jquery - colorbox：如何在标题中包含链接？

> ID：15344924
> 
> 赞同：0
> 
> 时间：2013-03-11T17:34:29.443
> 
> 标签：jquery, html, hyperlink, colorbox

您好所有质量编码员和其他人！

我有一个使用颜色框的简单画廊...

```
 $(document).ready(function()
        {
        $(".gallery").colorbox({rel:'gallery', transition:"none", width:"95%", height:"95%"});
        })

    <a class="gallery" href="image.jpg" title="Click here to download hi-res version"><img src="imageThumbnail.jpg"></a> 
```

我希望每张照片的标题中都包含一个链接，以便用户可以下载高分辨率版本（作为 zip 文件）。我尝试将 href 设置为 zip 文件，但它所做的只是前进到下一张照片。我通过颜色框参数看到有很多选项，但我对此知之甚少，无法确定哪一个是最好的方法。

任何帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:48:41.637

[查看彩盒主页](http://www.jacklmoore.com/colorbox)顶部的“使用”部分，有一个使用函数作为标题的示例：

```
// ColorBox can accept a function in place of a static value:
$("a.gallery").colorbox({rel: 'gal', title: function(){
    var url = $(this).attr('href');
    return '<a href="' + url + '" target="_blank">Open In New Window</a>';
}}); 
```

我想这就是你要找的。在函数中，您可以引用 zip 文件而不是 _blank 窗口中的相同图像。但是，这应该让你继续前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:05:38.337

我得到了它的工作，感谢您的帮助克劳德和艾舍伍德......谢谢！

这是颜色框jquery：

```
$(document).ready(function(){
    $(".gallery").colorbox({rel:'gallery', transition:"none", width:"95%", height:"95%"});
});

$(document).ready(function(){
    $("a.gallery").colorbox({
        rel: 'a.gallery',
        title: function(){
            var url = $(this).attr('name');
            var txt = $(this).attr('title');
            return txt+'<br /><a href="'+url+'" target="_blank">download hi-res (.tif.zip)</a>';
        }
    });
}); 
```

和 HTML：

```
<a href="Image.jpg" class="gallery" name="Image.zip" title="Image">
    <img src="thumbnail/Image.jpg">
</a> 
```

耶！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:50:36.563

它在 ColorBox 文档中：使标题成为链接

[http://www.jacklmoore.com/colorbox/faq#faq-titlelink](http://www.jacklmoore.com/colorbox/faq#faq-titlelink)

```
$('a.gallery').colorbox({title:function () {
    return "To view full size, click here!".link(this.href);
}}); 
```

显然，您需要修改链接参数，但您没有为我们提供足够的示例信息。

# api - 根据纬度经度，识别住宅或商业

> ID：15344926
> 
> 赞同：1
> 
> 时间：2013-03-11T17:34:33.877
> 
> 标签：api, google-maps, c#-4.0, maps, latitude-longitude

有没有办法根据纬度和经度，任何 API 来识别地址是商业地址还是住宅地址。

请注意，我不想看那张地图，我有 1000 个纬度/经度组合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:59:48.530

简单地说：没有。

至少，假设每座建筑物的中心都有与之相关的纬度/经度，则需要有人存储所有这些数据。我猜谷歌已经开始到达那里，但考虑到谷歌地图中实际列出的企业有多少（地图 API 是否有地图上显示的企业信息？）。那么，您会假设**未**列出的所有内容都是住宅吗？或者您是否希望所有这些也被离散列出？既不是（道路/乡村/国有建筑）的纬度/经度又如何呢？那些混合用途的建筑物（在城市中很常见），您可能会在同一栋建筑物中找到企业和公寓。但即便如此，您仍需要知道**每个**建筑物的大小，以便每个纬度/经度都传递给映射到正确建筑物的 API。

我很确定你会等待很**长时间**才能得到接近你所追求的东西

# 2010 年 3 月 31 日更新

[https://www.geomni.co.uk/ukbuildings](https://www.geomni.co.uk/ukbuildings)现在似乎有这个信息。它并不便宜，但如果您是学术用户，您可能有（一些）免费访问权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:31:59.507

我怀疑是否有标准服务。

此外，您的问题不是是/否问题。它更像是一个介于 0 - 100% 之间的值。（或更好的 0 - 1）因此您最好计算坐标的业务因子。
这可以做到，问题是您是否有权访问数据：

您可以查询半径范围内的所有公司，比如说 500m 的坐标。然后你计算返回的公司数量。
在纽约市、一些欧洲城市等做一些有代表性的查询，然后你就会得到一个典型的商业因素。有了它，您可以（按部门）进行比较。

所以最后你需要一个查询来获取所有在一个坐标周围有一个半径（或正方形）的公司。如果有地理编码器/反向编码器查询的公司属性，请查看 Google API。

# jsp - JSF 标记如何影响 JSP 生命周期方法？JSP 和 facelets 呢？

> ID：15344927
> 
> 赞同：2
> 
> 时间：2013-03-11T17:34:36.063
> 
> 标签：jsp, jsf, jakarta-ee, facelets

在 JSP 页面中使用 JSF 标记时是否运行 JSP 生命周期方法？如果有，顺序是什么？

使用 facelets 时 JSP 生命周期方法是否运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:56:47.303

[IBM 的 DeveloperWorks 中](http://www.ibm.com/developerworks/library/j-facelets/)有一篇关于该主题的非常明确的文章。关于在 JSF 应用程序中使用 JSP 的主题，它说如下：

> JSP 的主体相当于 servlet 的 doGet() 和 doPost() 方法（即，它成为 jspService() 方法）。JSF 自定义标记（例如 f:view 和 h:form）只是调用 JSF 组件以将其自身呈现在其当前状态。JSF 组件模型的生命周期独立于 JSP 生成的 servlet 的生命周期。

所以，你的第一个问题的答案是肯定的；JSP 页面遵循自己的生命周期，而 JSF 组件遵循自己的生命周期。在 Facelets 上，您还可以找到：

> 与 JSP 不同，Facelets 是一种从头开始构建的模板语言，考虑到了 JSF 组件的生命周期。使用 Facelets，您可以生成构建组件树的模板，而不是 servlet。

这样，如果您已经在使用 Facelets，就不需要将 JSP 与 JSF 一起使用。所以第二个问题的答案是否定的，因为根本没有 JSP 页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:44:28.997

JSP 生命周期方法（无论是什么）在将 JSF 与 Facelets 一起使用时不会运行，原因很简单，Facelets 与 JSP 100% 分离。

顺便说一句，您应该永远不要将 JSF 与 JSP 一起使用。它是 JSF 的已弃用 VDL，不支持最新的 JSF 功能，而且是错误的。

# javascript - "onmouseover" 向所有帧显示相同的消息

> ID：15344938
> 
> 赞同：0
> 
> 时间：2013-03-11T17:35:01.013
> 
> 标签：javascript

我想知道每个框架如何显示不同的消息。所有框架都显示*MSG 1*。我希望当您将鼠标悬停在显示不同消息的单词上时，每个框架都打开。

感谢和抱歉英语不好。

编码：

```
<html>
        <head>
                <title>Float Frames</title>
                <script>
                        function showLayer(obj){
                                var div = document.getElementById(obj).style;
                                div.display = "block";
                        }

                        function hideLayer(obj){
                                var div = document.getElementById(obj).style;
                                div.display = "none";
                        }
                </script>
                <style>
                        #divLayer{*css script*;}
                </style>
        </head>

        <body name="nm_body">
                <div>
                        <a href="LINK" onmouseover="showLayer('divLayer');" onmouseout="hideLayer('divLayer');">TEXT1</a>
                <div>
                <div id="divLayer" name="nm_divLayer">
                        MSG 1
                </div>

                <div>
                        <a href="LINK" onmouseover="showLayer('divLayer');" onmouseout="hideLayer('divLayer');">TEXT2</a>
                <div>
                <div id="divLayer" name="nm_divLayer">
                        MSG 2
                </div>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:35:44.433

不要创建多个具有给定 ID 的元素。这是无效的，这会导致错误。

例如，您可以使用它：

```
<div>
        <a href="LINK" onmouseover="showLayer('divLayer1');" onmouseout="hideLayer('divLayer1');">TEXT1</a>
<div>
<div id="divLayer1" name="nm_divLayer">
        MSG 1
</div>

<div>
        <a href="LINK" onmouseover="showLayer('divLayer2');" onmouseout="hideLayer('divLayer2');">TEXT2</a>
<div>
<div id="divLayer2" name="nm_divLayer">
        MSG 2
</div> 
```

# sql - Oracle 中的 SQL：停止重新制定嵌套查询

> ID：15344947
> 
> 赞同：1
> 
> 时间：2013-03-11T17:35:28.097
> 
> 标签：sql, oracle, oracle10g, database-performance

大家好 :) 我需要 Oracle 了解嵌套查询需要保持嵌套，以解决性能问题。

这是查询：

```
SELECT * FROM (
  SELECT 
    UTL_MATCH.JARO_WINKLER_SIMILARITY(clients_me.address, clients_them.address) jw,
    clients_them.*,
    clients_me.* 
  FROM clients_them JOIN clients_me ON clients_me.email = clients_them.email
) WHERE jw > 80 
```

没有最后一个性能很好`WHERE jw > 80`。我的理解是 Oracle 尝试在嵌套查询内的联接中添加 JARO_WINKLER_SIMILARITY。我只是想过滤一些不好的匹配。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:35:07.670

您可以尝试输入一些提示，例如`NO_QUERY_TRANSFORMATION`, 或可能`NO_PUSH_SUBQ`或`NO_MERGE`。（我不是提示专家，而且我认为大多数时候最好避免提示）。

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements006.htm#BABCGJDI](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements006.htm#BABCGJDI)

但是恕我直言，最好的办法是让您执行不良查询的执行计划，这样您就会知道没有按预期发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:52:23.083

push_pred / no_push_pred：如果你的查询中有一个不可合并的视图（可能是因为no_merge提示），你应该如何操作来自其他表的join；您应该创建一个大视图结果并将其连接一次 (no_push_pred) 还是应该将连接谓词下推到视图定义中并为另一个表中的每个驱动行重新创建视图结果集 (push_pred)。

这意味着 push_pred 仅对 no_merge 有效。
请尝试添加如下提示：

```
/*+ no_merge(y) no_push_pred(y) */ 
```

# octave - 八度箱线图分组变量

> ID：15344953
> 
> 赞同：0
> 
> 时间：2013-03-11T17:35:42.120
> 
> 标签：octave, boxplot

预先感谢您的帮助 ！

在 Matlab 中，[boxplot 命令](http://www.mathworks.co.uk/help/stats/boxplot.html)可以接受分组变量 G，即：

> boxplot(X,G) 指定一个或多个分组变量 G，为共享相同 G 值的每组 X 值生成一个单独的框。分组变量必须为 X 的每个元素一行，或 X 的每列一行。使用向量、字符数组、字符串元胞数组或向量分类数组指定 G 中的单个分组变量；使用这些变量类型的元胞数组（例如 {G1 G2 G3}）或使用矩阵来指定 G 中的多个分组变量。如果使用多个分组变量，它们的长度必须相同。分组变量中包含 NaN 值或空字符串的组将被忽略，并且不计入其他参数考虑的组数。

但是，箱线图的 Octave 实现似乎缺少此参数。例如，假设我有以下向量，

X = [1.34, 2.89, 1.28, 2.98, 8.84, 8.38, 3.26, 4.06, 42.48, 3.19, 3.63, 3.23]；% 更长的时间

G = [1、3、3、3、23、15、15、23、23、20、23、23]；% 更长的时间

在 matlab 中运行 boxplot(X, G) 将创建一个图，其中 X 中的值（在同一组中）被放在同一个框中。

有没有办法在 Octave 中解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T08:56:28.600

Octave boxplot 允许使用单元向量作为输入。您可以按如下方式预先创建单元向量。

```
uniG = unique(G);
l = length(uniG);
for i = 1:l
  XG{i} = X(G == uniG(i));
end
boxplot(XG); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-16T17:32:34.790

您必须将它们分组在圣地亚哥提到的单元格中，但可以通过以下方式更轻松地完成

`boxplot({X, G})`

[请参阅http://octave.sourceforge.net/statistics/function/boxplot.html](http://octave.sourceforge.net/statistics/function/boxplot.html)中的示例，注意*{*和*}*。

# git - Hudson/Jenkins Git 构建所有分支

> ID：15344955
> 
> 赞同：38
> 
> 时间：2013-03-11T17:35:44.530
> 
> 标签：git, jenkins, hudson

我们有很多开发人员创建了我想要构建的功能分支。每晚我们运行一个需要在每个分支上运行的代码质量工具。我也不喜欢静态配置，因为分支的数量每隔几周就会发生变化。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-12T07:23:21.417

在 Git 配置中有一个字段 'Branch Specifier (blank for default): ' 如果你放在那里 ** 它会从所有远程构建所有分支。

有了它，您可以使用环境变量 ${GIT_BRANCH} 例如使用[https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin)为构建设置标题或用于其他目的

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-03T13:13:40.630

我有同样的问题要解决。具体来说，制作一个包含所有分支的 zip 文件，并将其作为工件提供以用于不同的测试作业。

在“要建立的分支”中，输入“**”

然后，执行外壳：

```
while read -ra ITEM; do
  for i in "${ITEM[@]}"; do
    git checkout $i
    <do your stuff>
  done
done <<< $(git branch -r | grep -v "HEAD ->" | xargs -L 1 | cut -d'/' -f2) 
```

这会读取分支列表，分别检出每个分支并允许在每个分支中执行操作。<<< 命令转换此输出：

```
 origin/HEAD -> origin/master
  origin/branch1
  origin/master
  origin/secondbranch 
```

进入结帐可用列表：

```
branch1
master
secondbranch 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-04T17:59:42.257

老问题，但更合适的答案。下面的多分支插件允许您创建一个构建项目类型，将子项目与分支分开，自动将配置从顶层同步到子项目

[https://wiki.jenkins-ci.org/display/JENKINS/Multi-Branch+Project+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Multi-Branch+Project+Plugin)

2021 年更新此插件被标记为已弃用

> 此插件已弃用。请移至多[分支管道作业类型。](https://plugins.jenkins.io/workflow-multibranch/)

对于更复杂的方法，Seed 插件为您提供了很大的灵活性来定义子作业

[https://github.com/jenkinsci/seed-plugin/wiki](https://github.com/jenkinsci/seed-plugin/wiki)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-18T15:14:30.550

** for 分支说明符将针对所有分支和所有标签运行。如果您只想要分支，请使用 refs/heads/* 的分支说明符

# c - ARM 代码中的读-修改-写操作应该使用什么抽象

> ID：15344957
> 
> 赞同：3
> 
> 时间：2013-03-11T17:35:50.957
> 
> 标签：c, arm, portability, atomic

许多 ARM 处理器包含允许在 I/O 和/或 RAM 上进行各种形式的读-修改-写操作的特殊功能。然而，似乎没有一种方法可以在 Cortex-M3 和 Cortex-M0 设备的范围内始终如一地工作。

当我针对 Cortex-M3 设备时，我编写了一些方法`MaskedSet32(uint32_t *target, uint32_t mask, uint32_t newval)`，例如使用 load-linked/compare-exclusive 以中断安全的方式原子地修改 32 位数字的一部分。然而，Cortex M0 不提供这些指令。我也许可以让代码保存中断状态、禁用中断、执行读取-修改-写入并重新启用中断，但这似乎有点笨拙。一些 Cortex 处理器提供位带或其他功能，因此可以使用单个原子内存操作来执行诸如以原子方式设置单个位之类的操作，但不同的处理器似乎做事不同。此外，我不确定哪种抽​​象可以实现最佳程度的可移植性。

对于 RAM 中的东西，我的猜测是，当速度不重要时，最好的方法是为诸如`MaskedSet32`, `Increment`, `BottomPegI32`（的原子版本`*dest = (*dest < limit) ? limit : *dest;`）之类的东西设置子例程。这种方法也可以与 I/O 一起使用，但不利用某些处理器提供的一些专用硬件来提高此类效率似乎是一种耻辱。例如，飞思卡尔 KL-25 可以执行如下操作：

```
MaskedSet32(&IOWhatever, 0x0F00, 0x0500); // Update bits 8-11 with a value of 0101 
```

通过将值 5 写入某个 I/O 地址。`5`加载一个 I/O 地址和两个其他参数，然后调用一个子程序来完成可以通过加载一个 I/O 地址和一个常量并执行单个内存存储来完成的工作，这似乎很浪费。

虽然我看到的很多处理器演示代码只使用普通的布尔运算符，但我觉得这样做的想法令人反感

```
IoWhatever = (IoWhatever & ~0x0F00) | 0x0500; 
```

在任何情况下，中断可能想要写入 I/O 地址的一部分，而主线代码正在写入另一部分。使用原子操作作为一种常见的做法似乎是一种更安全的方法，但我想以尽可能少的方式使代码陷入困境。

我是否应该定义一个 SetIoBitField 宏，它需要一个地址（将被转换为`uint32_t*`）、字段偏移量、字段宽度和新数据，要求字段偏移量和宽度是恒定的，然后使用原子读取-修改-写入方法（使用基于常量预先计算的掩码），内联加载链接/存储独占循环（同样），或写入特定于处理器的特殊 I/O 空间，或者我应该定义和使用这样的宏仅在具有此类原语并在其他处理器上使用 MaskedSet32 的处理器上[认为没有位域支持的处理器上的 I/O 位分配无论如何都会有所不同]，或者哪种方法看起来最清晰和最便携？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:51:23.757

标准且明显的方法是编写代码，以便根据 ARM 代号有条件地编译：

```
#if ARM_GEN >= 3
   (use advanced ARM primitives)
#else
   (use clunkier ways to accomplish the same things)
#endif 
```

where`ARM_GEN`由构建定义。如果代码库将由未密切沟通的人处理，那么在未定义符号的情况下提供编译时警告或错误并不是一个坏主意：

```
#ifndef ARM_GEN
 #error Define ARM_GEN as 1, 2, 3, ... 9 of the ARM architecture (ARM3, ARM9, etc.)
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:01:55.710

使用预处理器选择实现是解决问题的好方法。尽管如此，在这种情况下，禁用/启用中断可能不是处理并发问题的最佳设计模式。

正如您所意识到的，并非每个 MCU 都会支持您以原子方式执行屏蔽写入，而且，使用这种特定支持会使代码变得不可移植。作为固件设计人员，我喜欢使用标准化模式，因此，如果确实无法消除系统同一内存地址上的并发性，则应该使用互斥锁和/或 FIFO。

我相信您可以更改系统的布局以避免并发。内存并发是完全没有必要的，因为现代芯片以低成本拥有大量字节。IO 端口并发是一个非常常见的问题，大多数 MCU 制造商都实现了硬件支持来设置（或清除）单个端口位，而无需读取 IO 状态，从而无需软件并发处理。

# android - 如何将对象添加到 ArrayList？

> ID：15344961
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:35:59.660
> 
> 标签：android, object, arraylist, containers

我正在尝试从 SQLite-db 读取，将结果放入自定义类型容器的对象中，将容器的内容放入 ArrayList 中，我可以构建一个由 arraylist 填充的列表视图。我被困在尝试将填充的容器对象传递给 ArrayList 的点：

```
ArrayList<Container> myListContent = new ArrayList<Container>();
{ 
Container conSelected = db.readContainer(i);

int s1 = conSelected.getId();
Log.i("LISTE", "id = " + s1);

String s2 = conSelected.getVorname();
Log.i("LISTE", "vorname = " + s2);

String s3 = conSelected.getName();
Log.i("LISTE", "name = " + s3);

// Container to the ArrayList  
//THIS NEXT COMMAND IS TROUBLING ME. ALL THREE GIVE THE SAME LOG
//myListContent.add(conSelected);
//myListContent.add(new Container(conSelected.getId(), conSelected.getVorname(), conSelected.getName()));
//myListContent.add(new Container(conSelected));

Log.i("LISTE", "line = " + myListContent); 
}

//this.myAdapter = new ListActivity(this, R.layout.row, myListContent); 
```

我的 Logcat 说：

```
03-11 18:17:43.336: I/LISTE(7477): id = 1
03-11 18:17:43.336: I/LISTE(7477): vorname = Fred
03-11 18:17:43.336: I/LISTE(7477): name = Einsner
03-11 18:17:43.336: I/LISTE(7477): line = [null]
...
03-11 18:17:43.375: I/LISTE(7477): id = 6
03-11 18:17:43.375: I/LISTE(7477): vorname = Wolf
03-11 18:17:43.375: I/LISTE(7477): name = Sechsland
03-11 18:17:43.375: I/LISTE(7477): line = [null, null, null, null, null, null] 
```

谁能帮我这个？我还是个菜鸟:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:43:08.643

```
 ArrayList<Container> myListContent = new ArrayList<Container>();

   { 
    Container conSelected = db.readContainer(i);
    // Container to the ArrayList  
    myListContent.add(conSelected);

    Log.i("LISTE", "line = " + myListContent); 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:26:28.513

尽管已经选择了答案，但我还是弄清楚了错误是什么，并想把它放在这里。

如果您看一下[Log.i](http://developer.android.com/reference/android/util/Log.html#i%28java.lang.String,%20java.lang.String%29/ "日志.i")，该方法将作为参数（字符串，字符串），因为他正在传递这一行`Log.i("LISTE", "line = " + myListContent);`

myListContent 遭受字符串强制转换，这导致空值。与`System.out.println(myListContent)"`将传递值的a 不同`Content.ToString()`

# wicket - 标题跨越多列的检票口表

> ID：15344962
> 
> 赞同：1
> 
> 时间：2013-03-11T17:36:01.460
> 
> 标签：wicket

如何创建具有多个具有相同标题的列的表。

例如：一个包含 5 列 c1、c2、c3、c4、c5 的表格，其中 c1、c2 和 c3 具有相同的标题；c4 和 c5 具有相同的标题。并且所有列都是可排序的。

我不确定，但 headerstoolbar 可能是一种方法。我搜索了，但找不到一个很好的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:36:22.220

您必须滚动执行此操作的自己的 HeadersToolbar 变体。有多种方法可以实现这一点，最简单的可能是：

1.  将 HeadersToolbar 中的代码复制到一个新类中

2.  修改 RefreshingView 的 getItemModels 方法，使其仅返回填充了您想要的列的列表（您可以通过列对象上的额外标记接口或通过将配置从外部添加到这个新的工具栏类来完成此操作）

3.  在 populateItem 中，确保使用 AttributeModifier 将适当的 colspan 属性添加到需要跨越多个列的列。

# json - iisnode 中的 JSON 格式

> ID：15344965
> 
> 赞同：0
> 
> 时间：2013-03-11T17:36:08.260
> 
> 标签：json, node.js, formatting, line-breaks, iisnode

在本地运行我的 node.js 应用程序时，我会得到格式良好的带有换行符和空格的 JSON 输出，如下所示：

```
{
  "foo": "bar",
  "asdf": "qwerty"
} 
```

但是当我在 Azure 上的 iisnode 中运行相同的代码时，我得到了这个：

```
{"foo":"bar","asdf":"qwerty"} 
```

并不是说它有任何功能差异，后者甚至节省了一些额外的字节，但很高兴知道差异来自哪里。

这是代码：

```
exports.test = function(req, res){
    var result = { foo : 'bar', asdf : 'qwerty'};
    res.send(result);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:08:31.963

差异可能与`NODE_ENV`环境变量和`express`'[默认配置](https://github.com/visionmedia/express/blob/3.1.0/lib/application.js#L85-L87)有关：

```
app.defaultConfiguration = function(){
  // ...

  this.configure('development', function(){
    this.set('json spaces', 2);
  });

  // ...
}; 
```

Azure 必须具有不同的值`NODE_ENV`(probably `'production'`)，以便[`configure()`](http://expressjs.com/api.html#app.configure)跳过回调。

# regex - 正则表达式 Regex Pig

> ID：15344966
> 
> 赞同：0
> 
> 时间：2013-03-11T17:36:08.493
> 
> 标签：regex, apache-pig

我正在使用 Pig 来处理数据。

我的数据看起来像：

```
<?xml version="1.0" encoding="UTF-8"?><MC><SC><S uid="1" gen="" art="Samsung" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung" ttl="Vacation"/><S uid="2" gen="" art="Samsung" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung" ttl="Mother earth"/><S uid="3" gen="" art="Samsung" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung" ttl="Over the horizon"/><S uid="4" gen="" art="Samsung" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung" ttl="Vocalise"/><S uid="5" gen="" art="Kitschi cupid" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung BeatDJ" ttl="Hard beat floor"/><S uid="6" gen="" yr="2011" art="David Kater" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung" ttl="Nothing left to say"/><S uid="7" gen="" art="Samsung" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung" ttl="Morning Dew"/><S uid="12" gen="" art="&lt;unknown&gt;" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/download" alb="download" ttl="mirzaghalib6_www.songs.pk_"/><S uid="13" gen="" art="&lt;unknown&gt;" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/download" alb="download" ttl="mirzaghalib7_www.songs.pk_"/><S uid="4555" gen="" yr="2012" art="Javed Ali &amp; Shakthisree Gopalan" cmp="Music: A.R. Rahman | Lyrics: Gulzar" fld="/mnt/sdcard/WhatsApp/Media/WhatsApp Audio" alb="Jab Tak Hai Jaan" ttl="Jab Tak Hai Jaan - www.Songs.PK"/></SC><PC/></MC>) 
```

我的目标是解析它并将 art=" " 中的条目相互依赖地保存在 HDFS 中。

我使用了以下 PIG 命令：

```
A= load 'smalltestdata' USING TextLoader() AS (line:chararray);
data_split=FILTER C BY (line matches '.*art=.*'); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:49:08.250

要仅在使用以下正则表达式之后`art="`和之前获取信息：`"`

```
(?<=art\=")(.*?)(?=") 
```

这是正在发生的事情：

```
1\. (?<=art\=") - This is a lookbehind.  It will look for matches after `art="`
2\. (.*?)       - This is the search string that is returned.  The `?` makes it non-greedy, so it only grabs the least number of finds
3\. (?=")       - This is a lookahead.  It will search for things before `"` 
```

不返回 Lookbehinds 和 lookaheads，因此结果将是 和 之间的所有`art="`文本`"`。

# iphone - 在 xCode 中创建一个 iPhone 项目

> ID：15344967
> 
> 赞同：-1
> 
> 时间：2013-03-11T17:36:10.263
> 
> 标签：iphone, xcode

我刚刚在我的 MacBook 上下载并安装了 xCode 3.2.6。我正在使用 Mac OS X 10.6.8 Snow Leopard。打开 xCode 时，我没有看到允许我打开/创建新 iPhone 项目的“基于视图的应用程序”图标。

我真正想做的就是让自己能够在创建网站时为 iPhone 进行移动测试。

我需要将我的 OS X 更新到最新版本还是缺少其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:05:42.447

如果你只是想在 iPhone 风格的界面上测试移动网站，你只需要启动一次 Xcode，你不需要做一个项目。

Xcode 4.x 的说明：

1.  打开 Xcode
2.  进入菜单`Xcode`> `Open Developer Tool`>`iOS Simulator`
3.  右键单击扩展坞中的模拟器，选择`Options`>`Keep In Dock`

探索模拟器。它带有Mobile Safari，可以模拟retina 和标准的iPhone 和iPad 界面。您可以旋转和捏合以及将 Web 应用程序添加到主屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:39:54.023

在 OSX 10.6.8 中，您可以安装 XCode4.2。

如果您需要 XCode4.3+，则需要切换到 10.7+。

是的，你会在 XCode4.2 中错过 iOS6.1

# build-automation - 如何使用带有 WordPress 主题的 HTML5 Boilerplat 构建脚本

> ID：15344971
> 
> 赞同：0
> 
> 时间：2013-03-11T17:36:30.320
> 
> 标签：build-automation, html5boilerplate

我在我的第一个项目中使用 HTML5 样板，这是一个 WordPress 主题，并且想要使用构建脚本来压缩我的所有文件。

我发现这篇关于如何让脚本解析文件的帖子......

[HTML5 Boilerplate - 修改 WordPress 的 build.xml](https://stackoverflow.com/questions/5397197/html5-boilerplate-modifying-the-build-xml-for-wordpress)

...因此在我的 default.properties 文件中添加了页眉和页脚，并且它们正在被解析，但是我的页脚文件脚本，我`<!-- //-beg- concat_js -->...<!-- //-end- concat_js -->`在自述文件中详细介绍了它，但是我在输出文件中看到的只是.. .

```
<script src="js/${scripts.sha}.js"></script> 
```

知道我做错了什么吗？这是footer.php文件的原始部分......

```
<!-- //-beg- concat_js -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>

<script src="js/vendor/bootstrap.min.js"></script>

<script src="js/plugins.js"></script>
<script src="js/main.js"></script>

<script>
    var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
<!-- //-end- concat_js --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:36:30.320

写完这篇文章后，我`file.root.page`在 default.properties 文件中找到了设置。这被设置为`index.php`文件，它不存在。

一旦我将其更改为 footer.php 文件，它就可以正常工作。

# c# - 在 .net Web 应用程序中导出 csv 文件

> ID：15344975
> 
> 赞同：0
> 
> 时间：2013-03-11T17:36:47.117
> 
> 标签：c#, .net, export-to-csv

我已经将 csv 文件保存为 /Exports/test.csv。我想允许用户点击按钮下载文件。我为该代码创建了一个处理程序，如下所示：

```
<%@ WebHandler Language="C#" Class="Downloadfile" %>

using System;
using System.Web;
using System.Net;

public class Downloadfile : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        HttpContext.Current.Response.ClearHeaders();
        HttpContext.Current.Response.Clear();

        context.Response.ContentType = "text/csv";
        context.Response.AddHeader("Content-Disposition", 
            "attachment; filename=" + context.Request.QueryString["file"]);

        context.Response.End();
    }

    public bool IsReusable
    {
        get
        {
            return true;
        }
    }
} 
```

上面的代码下载文件但它是空的。我只想下载 csv 文件及其内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:44:07.223

实际上，前几天我不得不做同样的事情，这取决于用户在“接受”标题中传递的内容。我使用了[MSDN 文章 Media Formatters](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)中的示例，它运行良好。

因为我使用的是 MVC 的 WebApi，所以我的和你的有点不同，但基本概念是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:41:57.683

您需要传输文件。您可以使用[TransmitFile](http://msdn.microsoft.com/en-us/library/12s31dhy.aspx)方法来做到这一点，也可以直接写入`context.Response.OutputStream`.

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ClearHeaders();
    context.Response.Clear();
    context.Response.ContentType = "text/csv";
    context.Response.AddHeader("Content-Disposition", "attachment; filename=" +  context.Request.QueryString["file"]);
    context.Response.TransmitFile("/Exports/test.csv");
    context.Response.End();
} 
```

# javascript - 如何在 iFrame 中包装 HTML？

> ID：15344979
> 
> 赞同：0
> 
> 时间：2013-03-11T17:37:03.717
> 
> 标签：javascript, html, iframe

我对 iFrames 很陌生。

我有一个简单的 HTML，我想将它包装在 iFrames 中。HTML 如下所示。

```
<!DOCTYPE html>
<html>
<head>
<script>
function copyText()
{
alert('It is clicked');
}
</script>
</head>
<body>

Field1: <input type="text" id="field1" value="Hello World!"><br>
Field2: <input type="text" id="field2">
<br><br>
<button onclick="copyText()">Copy Text</button>

</body>
</html> 
```

请帮助如何使用 iFrames 包装它。

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:43:33.633

我永远不会在我自己的代码中执行以下操作，但是作为`<iframe>`可以使用*数据 URI*的，以下可能是一个解决方案。

[`window.encodeURIComponent`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)你的代码来创建一个字符串。

```
%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%3Cscript%3E%0Afunction%20copyText()%0A%7B%0Aalert('It%20is%20clicked')%3B%0A%7D%0A%3C%2Fscript%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%0AField1%3A%20%3Cinput%20type%3D%22text%22%20id%3D%22field1%22%20value%3D%22Hello%20World!%22%3E%3Cbr%3E%0AField2%3A%20%3Cinput%20type%3D%22text%22%20id%3D%22field2%22%3E%0A%3Cbr%3E%3Cbr%3E%0A%3Cbutton%20onclick%3D%22copyText()%22%3ECopy%20Text%3C%2Fbutton%3E%0A%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E 
```

然后将其转换为[*数据 URI*](https://developer.mozilla.org/en-US/docs/data_URIs)并在您的 src 上设置为*src*`<iframe>`，然后附加到文档。当我使用字符串文字时，我在下面
转义引号。`'`

```
var ifrm = document.createElement('iframe'); // create
ifrm.src = 'data:text/html,' // convert to data URI, set src
    + '%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%3Cscript%3E%0Afunction%20copyText()%0A%7B%0Aalert(\'It%20is%20clicked\')%3B%0A%7D%0A%3C%2Fscript%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%0AField1%3A%20%3Cinput%20type%3D%22text%22%20id%3D%22field1%22%20value%3D%22Hello%20World!%22%3E%3Cbr%3E%0AField2%3A%20%3Cinput%20type%3D%22text%22%20id%3D%22field2%22%3E%0A%3Cbr%3E%3Cbr%3E%0A%3Cbutton%20onclick%3D%22copyText()%22%3ECopy%20Text%3C%2Fbutton%3E%0A%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E';
document.body.appendChild(ifrm); // append 
```

[**示例小提琴**](http://jsfiddle.net/qsRtM/)

# amazon-ec2 - AWS EC2 用户数据无法使用 Java API

> ID：15344982
> 
> 赞同：1
> 
> 时间：2013-03-11T17:37:12.357
> 
> 标签：amazon-ec2

我有以下代码用用户数据创建`EC2`实例......

`EC2`但它不会在创建实例后创建日志文件。

如果我做错了什么，请帮助我..

代码如下：-

```
class EC2Demo{
<br>public static void main(String str[]){

{  //AWS Credencial lines......

        RunInstancesRequest request = new RunInstancesRequest();
        request.setInstanceType(InstanceType.T1Micro);
        request.setMinCount(1); 
        request.setMaxCount(1);
        request.setImageId("ami-ab844dc2");
        request.setKeyName("VIIT1");
        ArrayList<String> securityGroups = new ArrayList<String>();
        securityGroups.add("VIITgroup");
        request.setSecurityGroups(securityGroups);
        Placement placement=new Placement();
        placement.setAvailabilityZone("us-east-1d");
        request.setPlacement(placement);

        request.setUserData(getUserDataScript());
        System.out.println("Shell Script");
        System.out.println("-------->>>>"+ec2.runInstances(request));
        //}
        System.out.println("End");

    }
    private static String getUserDataScript(){
        ArrayList<String> lines = new ArrayList<String>();
        lines.add("#! /bin/bash");
        lines.add("cd /home");
        lines.add("echo `ls` >> /home/test.log");
        //lines.add("shutdown -h 0");
        String str = new String(Base64.encodeBase64(join(lines, "\n").getBytes()));

        return str;
    }

    static String join(Collection<String> s, String delimiter) {
        StringBuilder builder = new StringBuilder();
        Iterator<String> iter = s.iterator();
        while (iter.hasNext()) {
            builder.append(iter.next());
            if (!iter.hasNext()) {
                break;
            }
            builder.append(delimiter);
        }
        return builder.toString();
    }

} 
```

# mysql - 递归查询并根据结果更改目标表

> ID：15344983
> 
> 赞同：1
> 
> 时间：2013-03-11T17:37:13.893
> 
> 标签：mysql, sql, select, join

假设我有这样的查询：

```
SELECT type_person FROM tbl_event WHERE id_animal = 1; 
```

这给了我要加入的人员类型和目标表（在这种情况下，这将返回'worker'）以从其他表中获取事件的全部数据，现在进行加入我知道我必须对'进行加入工人表'喜欢：

```
SELECT  a.*,b.*,z.*
FROM    tbl_event a
        left JOIN tbl_worker b
            ON a.type_person = b.type_person
        left JOIN tbl_animal z
            ON   z.id_animal = a.id_animal 
        WHERE z.id_animal = 1; 
```

有没有办法通过以下方式更改左 JOIN tbl_worker b 的部分：

```
SELECT  a.*,b.*,z.*
FROM    tbl_event a
        left JOIN (SELECT type_person FROM tbl_event WHERE id_animal = 1)
            ON a.type_person = b.type_person
        left JOIN tbl_animal z
            ON   z.id_animal = a.id_animal 
        WHERE z.id_animal = 1; 
```

[这是一个小提琴](http://sqlfiddle.com/#!2/13bd1/9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:39:33.613

当然，您需要执行以下操作：

```
SELECT  a.*,b.*,z.*
FROM    tbl_event a
        left JOIN (SELECT type_person FROM tbl_event WHERE id_animal = 1) as b
            ON a.type_person = b.type_person
        left JOIN tbl_animal z
            ON   z.id_animal = a.id_animal 
        WHERE z.id_animal = 1; 
```

基本上你错过了别名（`b`在这种情况下）

[这是一个更新的小提琴](http://sqlfiddle.com/#!2/13bd1/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:40:52.740

当然可以 。你的意思是这样

```
 SELECT  a.*,b.*,z.*
 FROM    tbl_event a
    left JOIN (SELECT type_person FROM tbl_event WHERE id_animal = 1) b
        ON a.type_person = b.type_person
    left JOIN tbl_animal z
        ON   z.id_animal = a.id_animal 
  where z.id_animal = 1; 
```

[**演示**](http://sqlfiddle.com/#!2/13bd1/14)

在您的查询中，您只是忘记了`AS b`

# iis - 有没有办法设置 iframe 黑名单？

> ID：15344990
> 
> 赞同：1
> 
> 时间：2013-03-11T17:37:46.267
> 
> 标签：iis, iframe, clickjacking

我注意到至少有一个网站将我的网站包含在 iframe 中，我很好奇禁止这种行为的最佳方法。

我已经包含了一些 Javascript，如果一个网站正在构建我的框架，它们应该能够获取，这样我就可以生成一个我想要阻止的网站列表。但是，有些网站我不想禁止 iframe。

是否有可能通过 IIS (7) 查看站点列表，如果请求来自该列表中的站点，则以某种方式失败或阻止请求？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:40:02.100

使用[`X-Frame-Options: deny`](http://en.wikipedia.org/wiki/X-FRAME-OPTIONS#Frame-Options)HTTP 标头来防止任何人`<iframe>`访问您的站点。如果您希望能够访问`<iframe>`自己的站点但阻止其他人这样做，只需使用
`X-Frame-Options: sameorigin`.

[`X-Frame-Options`在 MDN上阅读更多内容。](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)

旁注：黑名单通常不适用于安全性。*白名单*是正确的方法。

* * *

> Allow-From 将只允许单个 URI，这意味着如果我使用 Facebook URI，它将杀死我的图像上传器，如果我使用 Sameorigin，图像上传器（以及我自己的任何 iframe）将起作用，但它会杀死Facebook。你知道是否有任何类型的 Allow-From 和 Sameorigin 组合，以便它们都被强制执行？

[鉴于当前的规范，这是不可能的。](https://datatracker.ietf.org/doc/html/draft-ietf-websec-x-frame-options-01#page-4)但是，您可以使用 2 个不同的 URL 来提供相同的内容：一个用于 Facebook`allow-from`中的 iframe（发送），一个用于您自己的 iframe（发送`sameorigin`）。不是很好，但总比没有好。

# java - 将 lwjgl 纹理组合成纹理图集

> ID：15344993
> 
> 赞同：0
> 
> 时间：2013-03-11T17:37:50.873
> 
> 标签：java, lwjgl

我正在导入的模型几乎没有纹理图像。我想将它们全部加载并制作一个纹理图集。我正在尝试使用 javas BufferedImage，但我不知道如何将 lwjgl Texture 类转换为 BufferedImage ... 那么如何从 Texture 类制作纹理图集？结果也应该在 Texture 类中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T03:36:40.767

尽管这个问题已经有四个多月了，但我还是想回答这个问题，只是为了像我一样在同样的问题上需要帮助的任何人。您应该能够从 Slick 纹理中获取 ARGB 字节并将其转换为 BufferedImage，然后您可以从那里将 BufferedImage 组合成一个（[像这样](https://stackoverflow.com/questions/2318020/merging-two-images)）并将其转换回纹理。

# drupal - 自定义 drupal 访问被拒绝页面

> ID：15344994
> 
> 赞同：1
> 
> 时间：2013-03-11T17:37:52.110
> 
> 标签：drupal, drupal-7

我有许多基本页面，我需要用户登录才能看到它。所以我想自定义这个拒绝访问页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:33:57.113

转到配置 -> 系统 -> 站点信息。

从那里您可以将拒绝访问页面 (403) 设置为您想要的任何路径。

您可以创建一个页面节点，然后将此路径设置为您的新节点。

# java - Mockito & Junit 空指针异常：名称不能为空

> ID：15344997
> 
> 赞同：0
> 
> 时间：2013-03-11T17:38:00.720
> 
> 标签：java, unit-testing, junit, tdd, mockito

我一直在尝试使用 mockito 和 junit 运行以下测试，但我不断收到“java.lang.NullPointerException：name must not be null” 谁能告诉我为什么会这样？

在调试时，我发现当测试在 isStopValid(String) 方法中执行以下语句时会抛出此异常：

**FacilityValidationUtil facUtil = new FacilityValidationUtil();**

```
@RunWith(MockitoJUnitRunner.class)
public class MyFormTest{
    @InjectMocks MyForm form = new MyForm();
    @Mock FacilityValidationUtil facUtil;
    @Test
    public void testIsStopValid() throws FinderException{
        when(facUtil.isFacilityValid("")).thenReturn(false);
        form.setOrigin("");
        assertEquals(false, form.isStopValid(form.getOrigin()));        
    }
} 
```

**带有要测试的方法的类：**

```
public class MyForm{
    FacilityValidationUtil facUtil = new FacilityValidationUtil();
    public boolean isStopValid(String stop){

        try {
            return facUtil.isFacilityValid(stop);
        } catch (FinderException e) {
            log.error("Error finding the stop. "+e.getCause());
            return false;
        }
    }
} 
```

* * *

```
public class FacilityValidationUtil{
    private FacilityDAO facilityDao = new HibernateFacilityDAO();
    public boolean isFacilityValid(String facility) throws FinderException{
        boolean test;
        FacilityImpl facilityImpl = facilityDao.findFacilityByNassCode(facility);
        test = (facilityImpl==null)?false : true;
        return test;
    }
} 
```

* * *

```
public class HibernateFacilityDAO extends HibernateAbstractDeltaDAO implements FacilityDAO {
    public HibernateFacilityDAO() {
        super(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:59:29.587

简短回答：您正在尝试模拟 isStopValid 方法的本地变量（facUtil），因此您的测试中该对象的模拟版本永远不会被调用，因为您每次都在“更新它”。

长答案：看起来您正在尝试模拟对 FacilityValidationUtil 类的调用，如果是这种情况，那么您需要将该类设为字段，以便 Mockito 可以通过反射注入对象（如果此对象是线程安全，看起来很安全）或探索像 PowerMockito 这样的模拟框架，它允许你模拟构造函数（谷歌为新的 PowerMockito）。

```
PowerMockito.whenNew(FacilityValidationUtil.class).withNoArguments().thenReturn(facUtil); 
```

默认情况下，Mockito 不支持任何对构造函数参数的模拟。

**编辑** 如果您仍然遇到问题，那么我建议您从一个较小的示例开始。我已经为您整理了一个可以工作并使用您尝试测试的代码的代码（虽然它使用的是内部类，但 Mockito 有一些古怪的规则，但我只是为了压缩示例）。

```
@RunWith(MockitoJUnitRunner.class)
public class MyFormTest {

    @InjectMocks
    private MyForm form = new MyForm();
    @Mock
    private FacilityValidationUtil facUtil;

    @Test
    public void testIsStopValid_false() {
        when(facUtil.isFacilityValid("")).thenReturn(false);
        assertEquals(false, form.isStopValid(""));
    }

    @Test
    public void testIsStopValid_true() {
        when(facUtil.isFacilityValid("")).thenReturn(true);
        assertEquals(true, form.isStopValid(""));
    }

    public class MyForm {
        private FacilityValidationUtil facUtil = new FacilityValidationUtil();

        public boolean isStopValid(String stop) {
            try {
                return facUtil.isFacilityValid(stop);
            } catch (FinderException e) {
                return false;
            }
        }
    }

    public class FacilityValidationUtil {
        public boolean isFacilityValid(String facility) throws FinderException {
            throw new RuntimeException(facility);
        }
    }

    public class FinderException extends RuntimeException {
        public FinderException(String message) {
            super(message);
        }
    }

} 
```

真正重要的是您的模拟没有正确注入。在解决该问题之前，您将不断收到相同的错误。在您调用 facUtil.isFaciltyValid 的位置在您的 MyForm 中设置一个断点并查看该对象。它应该是一个模拟对象，而不是你的类。

祝你好运。