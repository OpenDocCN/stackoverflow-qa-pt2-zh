# StackOverflow 问答 13305000-13305999

# sencha-touch-2 - Sencha Touch 2 会话存储

> ID：13305002
> 
> 赞同：1
> 
> 时间：2012-11-09T09:08:16.007
> 
> 标签：sencha-touch-2

我在 sencha touch 2 中创建了一个 ajax 请求，当我收到一条成功消息时，如何将我的返回值设置为会话，还请告诉我一种可以从会话中获取值的方法。

```
 submitLoginForm: function() {
    var form = this.getLoginForm().getValues();

    Ext.Ajax.request({
        url: '../../authenticate.php',
        method: 'POST',

        params: {
            email: form.email,
            password: form.password
        },

        success: function(response) {
            var json = Ext.decode(response.responseText);
            if(json.message == 'success') {
                Ext.Msg.alert('Login Success.....');
                //Here i want to store return data in session
            } else {
                Ext.Msg.alert('Invalid Login Or Password.....');
            }
        },

        failure: function(response) {
            Ext.Msg.alert('The request failed.....');
        }
    });
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:35:35.267

在成功响应时，使用 HTML5 本地存储来设置和获取会话变量：

```
var sessionObject = { 'var1': 1, 'var2': 2, 'var3': 3 };

// Put the session object into storage
localStorage.setItem('sessionObject ', JSON.stringify(sessionObject ));

// Retrieve the session  object from storage
var sessionObject = localStorage.getItem('sessionObject ');

console.log('sessionObject : ', JSON.parse(sessionObject )); 
```

# java - 在 Windows 和 Mac 上用 Java 读写文件以打包到项目中

> ID：13305006
> 
> 赞同：0
> 
> 时间：2012-11-09T09:08:41.420
> 
> 标签：java, windows, macos, file, persistence

如果之前已经发布过，我很抱歉。

我要做的是向位于我项目中的一个包中的文件写入和读取一个简单的字符串。在源代码包中，我有一个名为“资源”的包。`myfile.txt`在这里，我想读取一个名为`newmyfile.txt`. 只是简单地读取和存储 CSV 数据。

我创建了一个阅读器，如下所示：

```
public BufferedReader getFileReader(String fileNameWithExtension, String sourcePackage) {
        try {
            String file = "/" + sourcePackage + "/" + fileNameWithExtension;
            BufferedReader br = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(file)));
            return br;
        } catch (Exception e) {
            System.err.println("Error: " + e.getMessage());
            return null;
        }
    } 
```

这在我的 Mac 上运行良好。阅读这个我发现我必须使用 File.separator 才能让它在所有操作系统上工作。所以我改变了这个，但它仍然不起作用。`/`有人说，在使用相对路径和其他地方时，无论操作系统如何，相对路径总是以开头`../`。作为Java文件存储的新手，我很困惑。

读写文件的方法也很多，不知道该选择什么方法，为什么。

对我来说，读取和创建文件的最佳方式是保存一个长字符串或一组字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:44:43.110

我忙于其他事情，但现在在您的帮助下，找到了适用于 mac 和 windows 的解决方案。

出于某种奇怪的原因，`String file = "/" + sourcePackage + "/" + fileNameWithExtension;`这是唯一可以在我的 Mac 上阅读的东西。突然（没有进行代码更改）它也开始在 Windows 上工作。我不知道为什么。所以现在获得读者的工作代码是：

```
public BufferedReader getFileReader(String fileNameWithExtension, String sourcePackage) {
        try {
            String file = "/" + sourcePackage + "/" + fileNameWithExtension;
            BufferedReader br = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(file)));
            return br;
        } catch (Exception e) {
            System.err.println("Error: " + e.getMessage());
            return null;
        }
    } 
```

为了写入资源文件夹中的文件，我使用了：

```
public BufferedWriter getFileWriter(String fileNameWithExtension, String sourcePackage) {
        Writer output = null;
        File file = new File("src" + File.separator + sourcePackage + File.separator + fileNameWithExtension);
        try {
            output = new BufferedWriter(new FileWriter(file));            
            return (BufferedWriter) output;
        } catch (IOException ex) {
            Logger.getLogger(FileHelper.class.getName()).log(Level.SEVERE, null, ex);
            return null;
        }
    } 
```

可悲的是，获得的方式`Reader`与不同`Writer`，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:28:40.237

关键是*绝对*路径总是以“/”开头。相对路径*不得*以“/”开头。这至少是给你造成问题的部分原因。

对于其余的，你说“它不起作用”。但是什么不起作用？

# facebook - Facebook Open Graph 聚合器排序

> ID：13305014
> 
> 赞同：1
> 
> 时间：2012-11-09T09:09:36.050
> 
> 标签：facebook, sorting, facebook-opengraph, aggregation

我设置对象、动作和聚合器。

1) 例如，我为 ID = 1 的对象发布了 10 个操作。它们显示在时间轴中。
2) 接下来，我为 ID = 2 的不同对象发布了另外 5 个操作。它们也显示在时间轴中。
3) 接下来，我为 ID = 3 的第三个对象发布了另一个 1 操作。我看到在时间轴聚合中，objectID 1 的计数只有 9 个。

**问题**：为什么 ID = 1 的对象的数量减少了？为什么数据没有正确汇总。

此聚合中的排序类型是“最喜欢的”。我也不能用“count”参数设置“自定义”排序——它没有被保存。

# javascript - 有任何方法可以将图像/pdf 内容保存到适用于所有浏览器的本地文件系统中

> ID：13305019
> 
> 赞同：0
> 
> 时间：2012-11-09T09:09:52.333
> 
> 标签：javascript, jquery

我通过数组缓冲区中的 ajax 响应获得图像内容。将该数组缓冲区附加到 blob builder。现在我想将这些内容写入文件。有什么办法可以做到这一点..？我使用 windows.requestFileSystem 它在 chrome 上运行良好，但在 mozilla 中无法正常工作.. 这是我的一段代码，

函数retrieveImage（studyUID，seriesUID，instanceUID，sopClassUID，nodeRef）{

```
 window.requestFileSystem = window.requestFileSystem||window.webkitRequestFileSystem;
var xhr = new XMLHttpRequest();
var url="/alfresco/createthumbnail?ticket="+ticket+"&node="+nodeRef;
xhr.open('GET', url, true);
xhr.responseType = 'arraybuffer';

xhr.onload = function(e) {
    if(this.status == 200) {
        window.requestFileSystem(window.TEMPORARY, 1024*1024, function(fs) {
            var fn = '';
            if(sopClassUID == '1.2.840.10008.5.1.4.1.1.104.1') {
                fn = instanceUID+'.pdf';
            } else {
                fn = instanceUID+'.jpg';
            }

                    fs.root.getFile(fn, {create:true}, function(fileEntry) {
                     fileEntry.createWriter(function(writer) {
                     writer.onwriteend = function(e) {
                        console.log(fileEntry.fullPath + " created");

                    }
                    writer.onerror = function(e) {
                        console.log(e.toString());
                    }

                    var bb;
                    if(window.BlobBuilder) {
                        bb = new BlobBuilder();
                    } else if(window.WebKitBlobBuilder) {
                        bb = new WebKitBlobBuilder();
                    }
                    bb.append(xhr.response);

                    if(sopClassUID == '1.2.840.10008.5.1.4.1.1.104.1') {
                        writer.write(bb.getBlob('application/pdf'));
                    } else {
                        writer.write(bb.getBlob('image/jpeg'));
                    }
                }, fileErrorHandler);
            }, fileErrorHandler);
        }, fileErrorHandler);
    }
};
xhr.send(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:30:25.993

网页脚本不允许将任意文件[如pdf]写入客户端存储。你应该心存感激，因为这意味着网页很难在你的机器上植入恶意软件。

相反，您应该将用户（或打开新窗口/选项卡）重定向到浏览器可以找到下载所需内容的 URL，并让它处理它。使用标头告诉客户端下载它或按照[此处](https://stackoverflow.com/a/8590579/402022)的说明显示。

如果您需要动态创建下载的内容，则在服务器上对其进行管理，使其成为活动页面（.php、.jsp、.aspx 等）。重要的是在响应的标头中有正确的 MIME 类型。

注意：是的，我告诉你不要使用 ajax，只是`window.open`. **编辑：**我猜你可能想在 img 中呈现图像，在这种情况下，它是相同的，只需将 url 放在 src 属性中并且没有 ajax。如果合适的话，只有一些 javascript 来更新属性。

* * *

鉴于您的评论，我了解您想要：

1.  将图像缓存在客户端，以避免每次都必须从服务器取回图像。
2.  允许用户自定义他的体验，允许使用来自本地存储的图像。

现在，再次出于安全原因，不允许任意访问客户的文件。在这种情况下，它可以双向工作：首先它可以防止网页监视您，其次它可以防止您在页面上注入恶意内容。

因此，对于第一部分，据我所知，默认设置是缓存图像[这是由您的浏览器处理的，是的，您应该不时清理它，因为它往往会增长]。如果这对您不起作用，我想您可以尝试使用[缓存清单](http://www.html5rocks.com/en/tutorials/appcache/beginner/)。

关于第二种，通常的方法是使用[本地存储](http://quepagina.es/html5/html5-local-storage.html)[再次由您的浏览器处理，但不是对客户端文件的任意访问]来存储/检索图像的 url 并使用它来呈现图像。

图像仍然可以保存在服务器上，是的，它可以被缓存。要将它发送到服务器 - 当然 - 您可以随时上传它，`<input type="file" ... />`您可能需要将[enctype](http://www.htmlcodetutorial.com/forms/_FORM_ENCTYPE.html)设置为您的表单。- 你已经知道了，对吧？- 在服务器上，将图像存储在数据库（或专用文件夹）中。现在负责检索图像的页面应该：

*   检查请求方法
*   检查用户的权限（通过会话/cookie识别它）
*   检查请求的参数（如果有）
*   设置标题
*   输出文件得到数据库（或专用文件夹）

* * *

现在，假设您希望允许它作为 xcopy 可部署应用程序工作（恰好在浏览器中运行）。在这种情况下，您始终可以告诉用户将他想要的图像存储在特定位置并使用相对路径访问它们。

* * *

或者 - 仅仅因为 - 您在一个没有服务器端脚本机会的地方托管。所以你必须只接受 javascript 给你的东西。好吧，你不能在这里使用相对路径，因为它不是本地的……如果你尝试使用本地的绝对路径，浏览器只会*diss*你（我的意思是，它只是忽略它）。

因此，您无法从客户端的文件中获取图像，也无法将其存储在服务器上...

好吧，你知道有一个[工作草案](http://www.w3.org/TR/FileAPI/)，我注意到这是你正在尝试的。问题是它是一个工作草案。引用[Jonas Sicking](https://hacks.mozilla.org/2012/07/why-no-filesystem-api-in-firefox/)的话，最初的实现会因安全问题而[交错](http://caniuse.com/#feat=fileapi)：

> 将此功能暴露给 Web 的主要问题是安全性。您不希望任何网站都可以读取或修改您的图像。我们可以像使用 GeoLocation API 一样提供提示，鉴于此 API 可能会删除您过去 10 年的所有图片，我们可能想要更多内容。这是我们正在积极努力的事情。但是这里的情况肯定是安全是这里的难点，而不是实现低级文件操作。

所以，我猜答案是“还没有”？事实上，考虑到微软只提供标准中达到推荐状态的部分的方法，以及它在每个新版本的 Windows 中启动一个新版本的 IE 的方法......那么你将不得不等待一段时间才能获得支持所有的浏览器。首先等到 FileAPI 达到推荐状态。然后等到微软更新 IE 来支持它。而且，如果有任何机会（似乎会发生）它仅适用于 IE10（或未来的 IE11）并且那些在 Windows 8 之前的 Windows 上无法运行，那么您将等待很多人升级。

如果这是您的情况，我建议为某些图像托管网站获取一个 API，并使用它来代替 [这可能不是免费的（或不是私有的），因此您可以更改您的网络托管已经]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:26:09.050

你不能有一种通用的方法来将响应存储在与所有浏览器兼容的文件中，有一种方法，你可以在 javascript 中使用 FileReader，但这又不能在 IE 上工作。

几周前我遇到了类似的问题，我所做的是向传递内容的服务器发出 ajax 请求，服务器为我将内容存储在文件中，然后返回对存储文件的引用。

我将我的文件存储在一个临时数据库表中，服务器操作返回了文件的 id，我们可以通过它随时从数据库访问文件。

您还可以将文件以缩略图的形式存储在服务器上，但我更喜欢数据库。

如果您需要更多规格，请告诉我

# ios - 在 ALAssetRepresentation 中解释 XMP 元数据

> ID：13305020
> 
> 赞同：95
> 
> 时间：2012-11-09T09:09:56.777
> 
> 标签：ios, ios6, alassetslibrary, cifilter, ciimage

当用户对 iOS 内置**Photos.app**中的照片进行一些更改（裁剪、去除红眼等）时，这些更改不会应用到`fullResolutionImage`相应的`ALAssetRepresentation`.

但是，更改将应用​​于`thumbnail`和`fullScreenImage`返回的`ALAssetRepresentation`。`ALAssetRepresentation`此外，可以通过键在 的元数据字典中找到有关已应用更改的信息`@"AdjustmentXMP"`。

我想将这些更改应用于`fullResolutionImage`我自己以保持一致性。我发现在**iOS6+** `CIFilter`上`filterArrayFromSerializedXMP: inputImageExtent:error:`可以将此 XMP 元数据转换为 s 的数组`CIFilter`：

```
ALAssetRepresentation *rep; 
NSString *xmpString = rep.metadata[@"AdjustmentXMP"];
NSData *xmpData = [xmpString dataUsingEncoding:NSUTF8StringEncoding];

CIImage *image = [CIImage imageWithCGImage:rep.fullResolutionImage];

NSError *error = nil;
NSArray *filterArray = [CIFilter filterArrayFromSerializedXMP:xmpData 
                                             inputImageExtent:image.extent 
                                                        error:&error];
if (error) {
     NSLog(@"Error during CIFilter creation: %@", [error localizedDescription]);
}

CIContext *context = [CIContext contextWithOptions:nil];

for (CIFilter *filter in filterArray) {
     [filter setValue:image forKey:kCIInputImageKey];
     image = [filter outputImage];
} 
```

但是，这仅适用于某些过滤器（裁剪、自动增强），但不适用于除红眼等其他过滤器。在这些情况下，`CIFilter`s 没有明显的效果。因此，我的问题：

*   有人知道消除红眼的方法`CIFilter`吗？（在某种程度上与Photos.app一致。带有key的过滤器`kCIImageAutoAdjustRedEye`是不够的。例如，它不带眼睛位置的参数。）
*   是否有可能在 iOS 5 下生成和应用这些过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T14:38:52.630

```
ALAssetRepresentation* representation = [[self assetAtIndex:index] defaultRepresentation];

// Create a buffer to hold the data for the asset's image
uint8_t *buffer = (Byte*)malloc(representation.size); // Copy the data from the asset into the buffer
NSUInteger length = [representation getBytes:buffer fromOffset: 0.0  length:representation.size error:nil];

if (length==0)
    return nil;

// Convert the buffer into a NSData object, and free the buffer after.

NSData *adata = [[NSData alloc] initWithBytesNoCopy:buffer length:representation.size freeWhenDone:YES];

// Set up a dictionary with a UTI hint. The UTI hint identifies the type
// of image we are dealing with (that is, a jpeg, png, or a possible
// RAW file).

// Specify the source hint.

NSDictionary* sourceOptionsDict = [NSDictionary dictionaryWithObjectsAndKeys:

(id)[representation UTI], kCGImageSourceTypeIdentifierHint, nil];

// Create a CGImageSource with the NSData. A image source can
// contain x number of thumbnails and full images.

CGImageSourceRef sourceRef = CGImageSourceCreateWithData((CFDataRef) adata,  (CFDictionaryRef) sourceOptionsDict);

[adata release];

CFDictionaryRef imagePropertiesDictionary;

// Get a copy of the image properties from the CGImageSourceRef.

imagePropertiesDictionary = CGImageSourceCopyPropertiesAtIndex(sourceRef,0, NULL);

CFNumberRef imageWidth = (CFNumberRef)CFDictionaryGetValue(imagePropertiesDictionary, kCGImagePropertyPixelWidth);

CFNumberRef imageHeight = (CFNumberRef)CFDictionaryGetValue(imagePropertiesDictionary, kCGImagePropertyPixelHeight);

int w = 0;

int h = 0;

CFNumberGetValue(imageWidth, kCFNumberIntType, &w);

CFNumberGetValue(imageHeight, kCFNumberIntType, &h);

// Clean up memory

CFRelease(imagePropertiesDictionary); 
```

# scala - 从客户端发送的数据创建枚举器

> ID：13305024
> 
> 赞同：2
> 
> 时间：2012-11-09T09:10:15.877
> 
> 标签：scala, playframework-2.0

我有一个通过 POST 请求接收消息的 REST 服务（Play Framework 2.0 w/Scala）。

我想让用户查看网页中收到的消息队列。我想在浏览器和服务器之间创建一个 SSE 通道，以便服务器将新消息推送到浏览器。

为了创建该 SSE 流，根据文档，我使用了 Enumerator/Enumeratee/Iteratee 链。

我的问题是：如何将从 POST 请求收到的消息注入枚举器。所以给出如下代码：

```
def receive(msg: String) = Action {
  sendToEnumerator() 
  Ok
}

val enumerator =  Enumerator.fromCallback( ??? )

def sseStream() = Action {

  Ok.stream(enumerator &> anotherEnumeratee ><> EventStrem()).as("text/evetn-stream")

} 
```

我应该在`sendToEnumerator`和`enumerator`（？？？在哪里）。或者我应该只使用 WebSockets 和 Actors 吗？（由于更广泛的兼容性，我更喜欢 SEE，所以如果可能的话，我想使用 SSE）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T19:33:28.633

好的，找到方法了：

```
 // The enum for pushing data to spread to all connected users
  val hubEnum = Enumerator.imperative[String]()

  // The hub used to get multiple output of a common input (the hubEnum)
  val hub = Concurrent.hub[String](hubEnum)

  // Converts message to Json for the web version
  private val asJson: Enumeratee[String, JsValue] = Enumeratee.map[String] {
    text => JsObject(
      List(
        "eventName" -> JsString("eventName"),
        "text" -> JsString(text)
      )
    )
  }

  // loads data into hubEnum
  def receiveData(msg: String) = Action { implicit request =>
    hubEnum push msg
  } 

  // read the Hub iterator and pushes back to clients
  def stream = Action { implicit request =>
     Ok.stream(hub.getPatchCord &> asJson ><> EventSource()).as("text/event-stream")
  } 
```

诀窍是创建一个命令式枚举器。此枚举器允许您在数据可用时将数据推送到其中。有了这个，您可以按照标准程序：基于枚举器创建一个集线器，使用一些枚举器对其进行转换，然后通过 SSE 将其发送回浏览器。

感谢[这个网站](http://blog.greweb.fr/2012/03/play-painter-how-ive-improved-the-30-minutes-prototyped-version/)给我解决方案:)

# bitmap - MonoMac：将位图转换为 NSImage 的最佳方法

> ID：13305028
> 
> 赞同：3
> 
> 时间：2012-11-09T09:10:32.407
> 
> 标签：bitmap, nsimage, monomac

由于 MonoMac 没有自己的类位图，我需要将图像从位图转换为 NSImage 的最佳方法。目前我的方式是：

```
byte[] bytes = SomeFuncReturnsBytesofBitmap();
NSData imageData = NSData.FromArray(bytes);
NSImage image = new NSImage(imageData);
imageView.Image = image; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T04:49:42.663

来自： http: [//lists.ximian.com/pipermail/mono-osx/2011-July/004436.html](http://lists.ximian.com/pipermail/mono-osx/2011-July/004436.html)

```
public static NSImage ToNSImage(this Image img) {
        System.IO.MemoryStream s = new System.IO.MemoryStream();
        img.Save(s, System.Drawing.Imaging.ImageFormat.Png);
        byte[] b = s.ToArray();
        CGDataProvider dp = new CGDataProvider(b,0,(int)s.Length);
        s.Flush();
        s.Close();
        CGImage img2 = CGImage.FromPNG(dp,null,false,CGColorRenderingIntent.Default);
        return new NSImage(img2, new SizeF(img2.Width,img2.Height));
    } 
```

**编辑：**

并从 NSImage 转换为 Image

```
 public static Image ToImage(this NSImage img) {
        using (var imageData = img.AsTiff()) { 
            var imgRep = NSBitmapImageRep.ImageRepFromData(imageData) as NSBitmapImageRep;
            var imageProps = new NSDictionary();
            var data = imgRep.RepresentationUsingTypeProperties(NSBitmapImageFileType.Png, imageProps);
            return Image.FromStream(data.AsStream());
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T11:30:12.877

使用`NSImage.FromStream`Herman 的解决方案可以简化。我认为发布问题时它不可用。

```
public static NSImage ToNSImage(this Image img) {
    using (var s = new System.IO.MemoryStream()) {
        img.Save(s, System.Drawing.Imaging.ImageFormat.Png);
        s.Seek(0, System.IO.SeekOrigin.Begin);
        return NSImage.FromStream(s);
    }
} 
```

# ruby-on-rails-3 - 在 Model Rails 3 中搜索多个列

> ID：13305040
> 
> 赞同：1
> 
> 时间：2012-11-09T09:11:19.603
> 
> 标签：ruby-on-rails-3, search

我现在有一个简单的搜索表单，它将在我的模型中搜索一列并按预期返回结果，但是我希望通过能够使用 4 个 text_field/Select_tags 搜索同一模型中的 4 列来建立此基础。

例如，我查看了提供类似 solr 的 Gems，但我的想法是，对于我想要实现的目标来说，这似乎有点矫枉过正，尤其是在这么小的应用程序上

该应用程序很简单，您可以上传食谱，将食谱添加到收藏夹和搜索食谱。

到目前为止，它看起来像这样

控制器

```
 def search
 @countrysearch = Recipe.where(:country_of_origin => params[:search]).all
 end 
```

搜索表格

```
 <%= form_tag({:controller => 'search', :action => 'search'}, {:method => 'get'})  do |s| %>
 <%= text_field_tag :search, params[:search] %>
 <%= submit_tag "Search" %>
 <% end %> 
```

输出（查看）

```
 <% @countrysearch.each do |r| %>
  <tr>
   <td><%= r.dish_name %></td>
   <td><%= r.country_of_origin %></td>
   <td><%= r.difficulty %></td>
   <td><%= r.preperation_time %></td>
   <td><%= ingredient_names(r.ingredients) %></td>
   <td><%= preperation_steps(r.preperations) %></td>
 </tr> 
```

我希望我的搜索表单能够使用选择标签反映我的“创建新食谱表单”

```
 <%= f.label :dish_name, "Dish Name" %>
  <%= f.text_field :dish_name, :placeholder => "Enter Dish Name" %>

  <%= f.label :country_of_origin, "Country Of Origin" %>
  <%= f.select :country_of_origin,  [['Wales'],['Scotland'],['England']], {:include_blank => 'Please Select'} %>

  <%= f.label :difficulty, "Difficulty Level" %>
  <%= f.select :difficulty, [['Beginner'],['Intermediate'],['Expert']], {:include_blank => 'Please Select'} %>

  <%= f.select :preperation_time, [['15..30'],['30..60'],['60..120']], {:include_blank => 'Please Select'} %>

 <% end %> 
```

只是一些正确方向的指针将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:02:43.503

您可以使用已传递给控制器​​的所有参数来执行此操作：

```
def search
 @countrysearch = Recipe.where({:dish_name => params[:search][:dish_name], :country_of_origin => params[:search][:country_of_origin], :difficulty => params[:search][:difficulty], :preperation_time => params[:search][:preperation_time]}).all
end 
```

这应该适合你。还有其他选择，但如果你想要一个简单的，这可能适合你。

**编辑：**

如果您在搜索中没有其他内容，则可以执行以下操作：

```
<%= form_tag({:controller => 'search', :action => 'search'}, {:method => 'get'})  do |s| %>
 <%= text_field_tag :dish_name, params[:dish_name] %>
 <%= select_tag "country_of_origin", options_from_collection_for_select(@recipes, "country_of_origin", "country_of_origin_name")
 <%= select_tag "difficulty ", options_from_collection_for_select(@recipe, "difficulty ", "difficulty ")
 <%= select_tag "preperation_time", options_from_collection_for_select(@recipe, "preperation_time", "preperation_time")
 <%= submit_tag "Search" %>
 <% end %> 
```

然后在controlelr中直接传参数

```
def search
 @countrysearch = Recipe.where(params).all
end 
```

# arrays - 使用 gfortran 读取数据

> ID：13305043
> 
> 赞同：0
> 
> 时间：2012-11-09T09:11:22.610
> 
> 标签：arrays, gfortran

我想用这一行读取fortran代码中的数据数组：`read(irdcld, 9101,end=9000) ctest, lay, frac, (datbinsa(ibin), & ibin= 1, nbins), (datbinsb(ibin), ibin= 1, nbins)`

我正在用 gfortran 编译。不幸的是，出现此错误消息：`read(irdcld, 9101,end=9000) ctest, lay, frac, (datbinsa(ibin), & 1 Error: Expected variable in READ statement at (1)`

如果我只输入以下内容，我可以阅读这些行：`read(irdcld, 9101,end=9000) ctest, lay, frac, datbinsa(ibin)`但我想阅读整个数组！使用 ggfortran 作为编译器时如何读取数组？谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:17:19.363

`&`是自由源格式 Fortran 文件中的语句继续符号。它应该是该行的最后一个非空白符号，并且该语句在下一行继续：

```
 read(irdcld, 9101,end=9000) ctest, lay, frac, (datbinsa(ibin), &
      ibin= 1, nbins), (datbinsb(ibin), ibin= 1, nbins) 
```

如果将两条线连接在一起，则应删除`&`. 但是您还必须遵守最大行长度，即免费源格式中的 132 个字符。

# javascript - 我需要转换 h:outputtext

> ID：13305044
> 
> 赞同：1
> 
> 时间：2012-11-09T09:11:33.017
> 
> 标签：javascript, jsf, richfaces

我有一个丰富的：数据表来显示数据库上的记录，其中有一些列。这是一个例子：

```
<rich:dataTable id="myTable" var="myItem" value="#{myList}">
    <rich:column width="25%">
         <h:outputText value="#{myItem.myValue}" />
    </rich:column>
... 
```

表显示记录很好。我想将`h:outputText`值显示为不同的值（我的意思是转换它）。例如，反转字符串或它的“查找和替换”结果。有 numberConvertors、dateConvertors 但找不到字符串。客户端解决方案（如 javascript、jquery）也可能是合理的。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:42:18.067

String 值没有 defaultConverters。

您可以在这里做的最简单的事情是编写一个替代的 getMyValue() 方法。

```
<h:outputText value="#{myItem.myModifiedValue}" /> 
```

在你的豆子里

```
public String getMyModifiedValue() { 
   return doSomethingwith( this.myValue );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:56:31.417

> *有 numberConvertors、dateConvertors 但找不到字符串*

只需自己创建一个。

```
@FacesConverter("myStringConverter")
public class MyStringConverter implements Converter {

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        // Write code here which converts the model value before displaying.
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        // Write code here which converts the submitted value before updating model.
        // Note that this method isn't ever used in output text.
    }

} 
```

按如下方式使用它：

```
<h:outputText value="#{myItem.myValue}" converter="myStringConverter" /> 
```

# ios - OpenCV 2 框架是否可用于 armv6？

> ID：13305046
> 
> 赞同：1
> 
> 时间：2012-11-09T09:11:49.603
> 
> 标签：ios, opencv, armv6

我正在将 OpenCV 用于我无法放弃`armv6`设备的项目之一。出于某种原因，为 iOS 构建的官方框架似乎只支持`armv7`和`x86`. 是否有可能建立这个库`armv6 + armv7`？

在此先感谢您的任何提示或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:35:23.603

官方发行版不支持 armv6。但是应该可以在 armv6 支持的情况下破解和重建框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T14:11:31.183

正如 Andrey 提到的，没有官方的 ARMv6 支持。

但是看看这篇博文（它很老[了）：iOS 的计算机视觉第 1 部分：构建 OpenCV 框架](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)，这将为您提供一个很好的起点。还可以查看旧版本的[buildscript](https://github.com/aptogo/OpenCVForiPhone/commit/4a3b25d49526ba426f3beec039e30e00104d2920)以了解自从放弃 ARMv6 支持后发生了什么变化。

您应该考虑的另一件事是您的部署目标，因为 iOS 4.3+ 需要 ARMv7。如果是这种情况，请使用官方版本。

```
ARMv7s = iPhone 5  
ARMv7  = iPhone 3GS, iPhone 4, iPhone 4S, iPod 3G/4G/5G, iPad, iPad 2, iPad 3  
ARMv6  = iPhone 2G/3G, iPod 1G/2G 
```

# ruby-on-rails - 为什么从数据库而不是缓存加载结果？

> ID：13305048
> 
> 赞同：1
> 
> 时间：2012-11-09T09:11:56.353
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, memcached

当我运行时：

```
IpPermission.blacklist.pluck(:ip) 
```

我得到结果：

```
=> ["127.0.0.11012q", "50.36.46.48"] 
```

如果我手动更改 ip_permissions 表中的任何行，然后`IpPermission.blacklist.pluck(:ip)`再次运行。它显示更新的结果。它不应该从缓存而不是直接从数据库加载结果吗？

我的模型看起来像：

```
class IpPermission < ActiveRecord::Base
  validates_presence_of :ip, :note, :category
  validates_uniqueness_of :ip, :scope => [:category]
  validates :category, :inclusion => { :in => ['whitelist', 'blacklist'] }

  def self.whitelist
    Rails.cache.fetch('whitelist', :expires_in => 1.month) { self.where(:category => 'whitelist') }
  end

  def self.blacklist
    Rails.cache.fetch('blacklist', :expires_in => 1.month) { self.where(:category => 'blacklist') }
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:58:23.440

我认为这应该可以解决我们的问题：

改变这个

```
 def self.whitelist
    Rails.cache.fetch('whitelist', :expires_in => 1.month) { self.where(:category => 'whitelist') }
  end

  def self.blacklist
    Rails.cache.fetch('blacklist', :expires_in => 1.month) { self.where(:category => 'blacklist') }
  end 
```

对此

```
 def self.whitelist
    Rails.cache.fetch('whitelist', :expires_in => 1.month) { self.where(:category => 'whitelist').all }
  end

  def self.blacklist
    Rails.cache.fetch('blacklist', :expires_in => 1.month) { self.where(:category => 'blacklist').all }
  end 
```

where 不会进行实际查询，如果您放置`.all`则进行查询，因此您不存储数据，而只是存储查询

# java - 在 GAE 中服务请求之前没有预热

> ID：13305049
> 
> 赞同：0
> 
> 时间：2012-11-09T09:12:02.560
> 
> 标签：java, spring, google-app-engine, warm-up, cold-start

为什么 AppEngine 使用冷动态实例来处理我的请求，而没有事先预热？

我有一个使用 Spring Security 和 Spring MVC 的 Web 应用程序，因此初始化上下文需要很多时间，两者都大约 70 秒。因此，我将初始化分为两个阶段，其中预热请求仅初始化我的应用程序上下文（安全性），而 Spring Dispatcher Servlet 在下一个请求时被初始化。这使时间保持在最大 60 秒以下。

现在，在我的生产环境中，由于某种原因，两个常驻（空闲）实例中的任何一个都没有为客户端请求提供服务，而是由一个新的冷实例提供服务。然后这个实例需要初始化security，dispatcher servlet*并*服务于请求，这在60s后被中断。

最小挂起延迟设置为 500 毫秒，最大设置为 15 秒，以尽可能避免使用冷实例提供服务，但这种情况在没有显着负载的情况下发生。

# sql-server - 区分 Sybase ASE 和 Microsoft SQL Server

> ID：13305050
> 
> 赞同：2
> 
> 时间：2012-11-09T09:12:08.210
> 
> 标签：sql-server, sap-ase

我有一些在 Sybase ASE 15.0.3 或 Microsoft SQL Server 2008r2 上运行的应用程序。两台服务器具有相同的内容。通常一切正常，但在某些情况下，我想知道正在使用哪个服务器。是否有一个查询会在 Sybase 和 Microsoft 上给出不同的结果，以便我可以在我的应用程序中知道我连接到哪个服务器？我不认为这很重要，但我用 PHP/Apache/Linux/FreeTDS 编程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:18:43.900

`Select @@Version`会告诉你你正在运行什么。

# r - gWidgetsWWW LocalServerStart() 通过 JRI

> ID：13305054
> 
> 赞同：2
> 
> 时间：2012-11-09T09:12:36.260
> 
> 标签：r, jri

我正在尝试使用`gWidgetsWWW`. 当使用我的标准 R 命令行时，这一切都很完美。我使用的代码例如：

```
> library(gWidgetsWWW) 
> localServerOpen('Examples/ex-simple-gui.R', package='gWidgetsWWW') 
```

但是，我想从 Java 中调用此代码。为此，我设置了 JRI，这似乎工作正常。我可以运行到目前为止我尝试过的任何 R 代码，除了这个。

我使用的代码是：

```
public static void main(String[] args) {
    // just making sure we have the right version of everything
    if (!Rengine.versionCheck()) {
        System.err.println("** Version mismatch - Java files don't match library version.");
        System.exit(1);
    }
    System.out.println("Creating Rengine (with arguments)");

    Rengine re=new Rengine(args, false, new TextConsole());
    Rengine.DEBUG = 1000;
    System.out.println("Rengine created, waiting for R");

    if (!re.waitForR()) {
        System.out.println("Cannot load R");
        return;
    }

    re.eval("library(gWidgetsWWW)");
    re.eval("localServerOpen('Examples/ex-simple-gui.R', package='gWidgetsWWW')");

    re.startMainLoop();     
} 
```

此代码将在我的默认浏览器中打开一个新选项卡，正如我所期望的那样。但是，此选项卡会保持连接，并且不会显示我想要的网页。当我终止 Java 脚本时，浏览器页面将更新无法建立连接。

我的 Java 控制台中提供的输出是：

```
Rengine created, waiting for R
Rengine.eval(library(gWidgetsWWW)): BEGIN Thread[main,5,main]
Loading required package: proto
Loading required package: filehash
filehash: Simple key-value database (2.2-1 2012-03-12)
Loading required package: digest
Loading required package: rjson
Rengine.eval(library(gWidgetsWWW)): END (OK)Thread[main,5,main]
Rengine.eval(localServerOpen('Examples/ex-simple-gui.R', package='gWidgetsWWW')):         BEGIN Thread[main,5,main]
starting httpd help server ... done
Rengine.eval(localServerOpen('Examples/ex-simple-gui.R', package='gWidgetsWWW')): END (OK)Thread[main,5,main] 
```

# android - 方向更改关闭了我的浮动上下文菜单

> ID：13305058
> 
> 赞同：0
> 
> 时间：2012-11-09T09:12:54.217
> 
> 标签：android, android-layout, android-intent

在我的应用程序中，我有一个`ListView`with`List`项目，长按将显示`ContextMenu`. 在这里，我需要做出`Orientation`改变。因此，我没有`onConfigChanges`手动在清单文件中添加属性，我已经`Orientation`使用方法处理了该更改`onRetainNonConfigurationChanges()`。

我的问题是在项目长按后`ContextMenu`，如果更改方向，它会在那个时间显示它正在关闭。

请参考除添加`android:onConfigChnage="orienation"`清单之外的任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:26:51.583

实际上，这个问题是由于重新启动而发生的`Activity`。当画面`Orientation`变化时，android系统重启当前的`Activity`.

请参阅[此处](https://stackoverflow.com/questions/8222525/android-activity-restartdue-to-screen-orientation-changes-issue-solutions-prov)和[此处](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)相同的问题。可能你有一些想法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T09:32:08.240

这是正常的行为。ContextMenus 就像警报对话框一样是活动生命周期的一部分，因此它们会被活动杀死。

解决方案是覆盖`protected void onSaveInstanceState(Bundle outState)`并保存活动的当前状态，并在活动期间取回 savedInstanceState`onCreate`

# php - 需要隐藏的输入值以保持表单 php

> ID：13305061
> 
> 赞同：0
> 
> 时间：2012-11-09T09:13:10.283
> 
> 标签：php

我在弹出窗口中有下拉菜单，用户可以在其中选择他们的国家。我正在使用隐藏字段通过 php 提交选择，当我点击“提交”按钮时，我得到了选择的国家/地区。有关国家/地区的信息显示在标题中，因此它应该出现在每个页面上，但是当我开始在页面之间浏览时，国家/地区的价值消失了。我怎样才能把它放在每一页上？

```
<div class="field">
            <div class="input-box">
                <?php $_countries = Mage::getResourceModel('directory/country_collection')->loadData()->toOptionArray(false); ?>
                <?php if (count($_countries) > 0): ?>
                    <select name="country" id="country" onchange="print(this.value)">
                        <option value=""> </option>
                        <?php foreach($_countries as $_country): ?>
                            <?php if(!in_array($_country['value'], $arrNO)):?>
                                <option value="<?php echo $_country['value'] ?>" >
                                    <?php echo $_country['label'] ?>
                                </option>
                            <?php endif;?>
                        <?php endforeach; ?>
                    </select>
                <?php endif; ?>
            </div>
            <form action="" method="post">
            <input id="choice" type="hidden" name="fname" value=""/>
            <input type="submit" value="OK"/>
            </form>
            <div id="usWarning"><p><span class="red">NOTE</span>: If you live in <span class="red">Arizona</span>, <span class="red">Iowa</span>, <span class="red">Maryland</span>, <span class="red">Oklahoma</span>, <span class="red">South Dakota</span>, <span class="red">Vermont</span>, <span class="red">Washington</span> or <span class="red">Wisconsin</span>, we are unfortunately not allowed to sell tobacco to you. Its forbidden with online sales of tobacco in these states.</p></div>
        </div> 
```

借助 JS 分配的隐藏输入字段的“值”：

```
function print(value) {
    document.getElementById("choice").value=value;
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:16:40.767

您可以创建一个**会话**变量，以使该值在页面之间保持不变。

```
$_SESSION['countryname'] = "countryname"; 
```

**[会话](http://php.net/manual/en/reserved.variables.session.php)**

**编辑：**

当您将 Sessions 用于不同目的时，请单独设置一个 cookie，但要以**它自己的 expiry**为准。使用[**`setcookie`**](http://php.net/manual/en/function.setcookie.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:22:32.280

在行动页面

```
$_SESSION['country']    =   $_POST['country'] 
```

通知

```
<option value="<?php echo $_country['value'] ?>" <?php if(isset($_SESSION['country']) && $_SESSION['country']===$_country['value']) echo "selected"; ?>> 
```

`echo`会话值（如果设置）也到隐藏字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:19:48.657

将请求中的表单值保留为隐藏字段仅意味着在呈现表单时将其回显到表单中。

```
<input id="choice" type="hidden" name="fname" value="<?php echo htmlspecialchars ($_POST ['fname']); ?>" /> 
```

或者，您可以使用[会话](http://www.php.net/manual/en/book.session.php)或[cookie](http://php.net/manual/en/features.cookies.php)将值传播到其他页面。

# c++ - 在 C++ OS X 中分配大空间

> ID：13305063
> 
> 赞同：3
> 
> 时间：2012-11-09T09:13:19.600
> 
> 标签：c++, macos, exception

我正在学习 C++ 中的异常，我正在尝试这个：

```
int main(int argc, char* argv[]) {
    double *p_x;
    try {
        p_x = new double[100000000000000];
        delete p_x;
    } catch (bad_alloc& ex) {
        cout << "Memory not allocated !!\n";
    }
    return 0;
} 
```

异常被捕获，但在执行此代码时还打印了其他内容。输出如下所示：

```
Memory not allocated !!
Test9(13814) malloc: *** mmap(size=800000000000000) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

我不知道它是否与 g++ 的版本有关，或者可能与 OS X 有关。我的意思是，程序正在捕获异常，但其他的东西是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:22:14.317

它与 glibc 相关。`mallopt(3)`您可以使用以下命令禁用这些消息：

```
mallopt(M_CHECK_ACTION, 0); 
```

# javascript - PHP将二进制转换为文本并返回

> ID：13305065
> 
> 赞同：1
> 
> 时间：2012-11-09T09:13:23.590
> 
> 标签：javascript, binary

我想将二进制翻译成文本并以表格形式返回，我在谷歌或其他东西上找不到任何示例。

我想做这样的东西 [http://www.roubaixinteractive.com/PlayGround/Binary_Conversion/Binary_To_Text.asp](http://www.roubaixinteractive.com/PlayGround/Binary_Conversion/Binary_To_Text.asp)

我在搜索时找到了这段代码，但我无法让它工作：#

```
 <script type="text/javascript">
    //<![CDATA[
    function txt2bin()
    {
        url = 'http://services.webestools.com/txt2bin/txt2bin.js?str='+encodeURIComponent($('ftxt').value);
        var js_effets=document.createElement("script");
        js_effets.setAttribute("type", "text/javascript");
        js_effets.setAttribute("src", url);
        document.getElementsByTagName("script")[0].parentNode.insertBefore(js_effets,document.getElementsByTagName("script")[0]);
        $('frm').style.display='block';
    }
    function bin2txt()
    {
        url = 'http://services.webestools.com/txt2bin/bin2txt.js?str='+encodeURIComponent($('fbin').value);
        var js_effets=document.createElement("script");
        js_effets.setAttribute("type", "text/javascript");
        js_effets.setAttribute("src", url);
        document.getElementsByTagName("script")[0].parentNode.insertBefore(js_effets,document.getElementsByTagName("script")[0]);
        $('frm').style.display='block';
    }
    //]]>
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:05:13.393

您确定要在 PHP 中使用它吗？

PHP 意味着您需要一个能够解释您的代码的网络服务器。您粘贴的代码段是在 javascript 中，由浏览器运行，因此您不需要服务器来测试它。

无论如何，如果您想创建一个与您链接的工具类似的工具，那么在 javascript 中执行此操作实际上会更有效。

javascript中的2个函数来进行转换：

```
function txt2bin(txt) {
    var pad = '00000000',
        bin = '',
        c = '';
    for(var i = 0, l = txt.length; i < l; i++) {
        c = txt.charCodeAt(i).toString(2);
        bin += (pad + c).substr(c.length);
    }
    return bin;
}

function bin2txt(bin) {
    var split = bin.match(/.{8}/g),
        txt = '';
    for(var i = 0, l = split.length; i < l; i++) {
        txt += String.fromCharCode(parseInt(split[i], 2));
    }
    return txt;
} 
```

在这里测试它们：http: [//jsfiddle.net/S3nB7/](http://jsfiddle.net/S3nB7/)

`txt2bin`接受一个 ASCII 编码的字符串并返回它的二进制表示。

`bin2txt`接受 0 和 1 的字符串，表示 ASCII 编码字符串的二进制代码，并返回 ASCII 字符串。

在**PHP**中，这将转化为：

```
<?php

function txt2bin($txt) {
    $bin = '';
    for($i = 0, $l = strlen($txt); $i < $l; $i++) {
        $bin .= sprintf('%08b', ord(substr($txt, $i, 1)));
    }
    return $bin;
}

function bin2txt($bin) {
    $split = str_split($bin, 8);
    $txt = '';
    for($i = 0, $l = count($split); $i < $l; $i++) {
        $txt .= chr(bindec($split[$i]));
    }
    return $txt;
} 
```

在这里测试：http: [//codepad.org/Y3sFJrR7](http://codepad.org/Y3sFJrR7)

# objective-c - 在 Objective C 中格式化 NSString

> ID：13305066
> 
> 赞同：0
> 
> 时间：2012-11-09T09:13:50.303
> 
> 标签：objective-c, nsstring

我有一个像 748973525 这样的字符串，现在我需要像 Objective C 中的 748-973-525 一样格式化它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:24:41.327

将原始字符串 using 拆分`-[NSString substringWithRange:]`为三部分，例如`a`,`b`和`c`，然后使用`+[NSString stringWithFormat:]`.

例如：

```
NSString *s = @"748973525";
NSString 
  *a = [s substringWithRange: NSMakeRange(0, 3)],
  *b = [s substringWithRange: NSMakeRange(3, 3)],
  *c = [s substringWithRange: NSMakeRange(6, 3)];
NSString *result = [NSString stringWithFormat: @"%@-%@-%@", a, b, c]; 
```

当然，这只适用于包含 9 个或更多字符的字符串；如果`s`长度小于九，`substringWithRange`将引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:40:49.037

解决这个问题的几种方法。我们没有输入字符串的规范；但您可以采用以下方法：

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    NSString *original = @"748973525";
    NSRegularExpression *exp = [NSRegularExpression regularExpressionWithPattern:@"(\\d{3})(\\d{3})(\\d{3})" 
            options:0 error:nil];
    NSString *new = [exp stringByReplacingMatchesInString:original 
            options:0 range:NSMakeRange(0,original.length) 
            withTemplate:@"$1-$2-$3"];
    printf("%s",[new UTF8String]);

    [p release];
} 
```

打印`748-973-525`到控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:44:21.227

使用自定义“数字格式化程序”并将“分组分隔符”设置为“-”

# sql - 国际象棋数据库

> ID：13305067
> 
> 赞同：0
> 
> 时间：2012-11-09T09:13:56.227
> 
> 标签：sql, database, nosql, chess

上一个[问题](https://stackoverflow.com/questions/3611473/database-to-choose-for-game)想在国际象棋比赛进行时将每一步都保存到数据库中。并询问使用什么数据库来执行此操作。给出了各种可能性：

MongoDb、CouchDb、MySql、SQLite

一个答案特别提到了传统的一对多映射：

> 我可以看到 mongodb 或 couchdb 的唯一优势是您可以想象将整个匹配项存储在一条记录中，从而使您的数据更简单一些。您不必在移动表和游戏表之间进行传统的一对多映射。

这到底是什么意思，这在 PostgreSql 中会是什么样子，所以我对这意味着什么有一个具体的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:12:03.627

下面的示例实体关系图基于 SQL 2005，但对数据类型进行了一些调整，可以将其转移到 MySql 或 PostgreSql。

![在此处输入图像描述](../Images/4be6861ada1336f1b9c970ce27c24250.png)

# javascript - jQuery左动画

> ID：13305069
> 
> 赞同：-2
> 
> 时间：2012-11-09T09:14:00.937
> 
> 标签：javascript, jquery, jquery-animate

我有这个结构：

HTML：

```
<div id="side-menu">
  <ul>
    <li><img src="img/once_sonra.png" alt="img1"></li>
    <li><img src="img/online_destek.png"alt="img2"></li>
    <li><img src="img/sizi_arayalim.png"alt="img3"></li>
  </ul>
</div>​ 
```

CSS：

```
#side-menu {
    display:block;
    z-index:20;
    position:fixed;
    right:0;
    top:76px;
}​ 
```

JS：

```
$(document).ready(function() {
    $("#side-menu").hide();
    //$(document).click(function() {
        $("#side-menu").slideDown().delay(500).slideUp();
    //});
}); 
```

一切正常。但我不想要幻灯片效果，想要动画到左边。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:19:24.023

您可以使用**.animate()**。例如：

```
$('#myElement').animate({left:'+=30px'}); 
```

欲了解更多信息：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:19:32.617

使用`.animate`

**[演示](http://jsfiddle.net/dhVzq/2/)**

**[向左切换的演示](http://jsfiddle.net/pintu31/dhVzq/4/)**

```
$("#side-menu").animate({"left": "-=50px"}, "slow")

or

var $lefty = $('#side-menu');
$lefty.animate({
  left: parseInt($lefty.css('left'),10) == 0 ?
    -$lefty.outerWidth() :
    0
}); 
```

# css - Twitter BootStrap - 更改 CSS 属性

> ID：13305070
> 
> 赞同：1
> 
> 时间：2012-11-09T09:14:03.890
> 
> 标签：css, twitter-bootstrap, less

我正在使用 twitter bootstrap，我需要更改框架的基本视觉效果，例如表单元素等。在 style.css 中再次覆盖所有样式或修改 bootstrap.css 并直接更改样式是否是一个好习惯。

是否有任何教程教如何为 Bootstrap 设置 LESS 并使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T15:29:20.867

请参阅[Twitter Bootstrap 自定义最佳实践](https://stackoverflow.com/questions/10451317/twitter-bootstrap-customization-best-practices)，了解使用 Twitter Bootstrap 进行自定义和 LESS。

一般来说，我不建议直接修改您的 bootstrap.css 文件，因为如果/当引导人员更新核心 css 时，将来会难以编辑。相反，只需在引导 css 之后引用第二个样式表。在那里添加您的覆盖/修改，如下所示：

```
<link rel="stylesheet" href="css/bootstrap.min.css" media="screen"/>
<link rel="stylesheet" href="css/my_styles.css" media="screen"/> 
```

当然，为了提高性能，可以考虑将它们组合起来，并将它们作为一个来提供，以减少您的 http 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:54:23.567

您可以在 Boostrap 自定义页面的第 3 步中执行此操作...

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T09:21:41.010

你可以做取决于你的要求。如果要更改网站中的所有表单值，可以修改引导文件。否则，您可以再创建一个名为 style.css 的文件并使用特定的某些类编写 css 代码。

这个教程可能对你有帮助
[Link1](http://www.w3resource.com/twitter-bootstrap/tutorial.php) ,
[Link2](http://www.quora.com/Bootstrap-front-end-framework/Are-there-any-good-tutorials-on-using-Twitter-Bootstrap#)

# windows - 错误：在 Windows 命令行文件中解析命令的输出

> ID：13305080
> 
> 赞同：1
> 
> 时间：2012-11-09T09:14:50.520
> 
> 标签：windows, parsing, command-line, batch-file

**我正在尝试在命令行脚本中解析命令的输出**。作为开始，我必须首先在变量中捕获命令的输出（我猜）。所以这是我到目前为止所写的：

```
FOR /F "tokens=2* delims=    " %%A IN ('wmic process where(name="javaw.exe") get commandline') DO SET VAR=%%B
echo %VAR% 
```

`wmic process where(name="javaw.exe") get commandline`我要执行并保存输出的命令在哪里。但是执行此操作时出现以下错误。

```
get was unexpected at this time 
```

任何想法为什么会出错。以及将输出存储在变量中后如何继续。我在输出中寻找一个特定的词说**“XYZ”**，如果那个词在那里我想显示一个窗口弹出窗口。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:26:38.227

它给你一个错误的原因是因为循环中的第一个`)`有效`for`地结束了循环，然后该`get`命令被单独处理，这是无法识别的。

您需要使用插入符号`^`来转义括号和`=`.

```
FOR /F "tokens=2* delims=    " %%A IN ('wmic process where^(name^="javaw.exe"^) get commandline') DO SET VAR=%%B 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:35:00.010

您需要更改语法，但即便如此，您也不会得到想要的结果，因为 wmic 通常响应不止一行。

```
setlocal EnableDelayedExpansion
FOR /F "tokens=* delims=" %%A IN (
    '"wmic process where(name="javaw.exe") get commandline"') DO (
     set "line=%%A"
     if "!line:XYZ=!" NEQ "!line!" (
        echo The line contains XYZ
     )
) 
```

并且将 delims 设置为空格将在第一个空格处分割行，即使这是在 javaw.exe 的路径中。

# facebook - Facebook“重新”验证

> ID：13305083
> 
> 赞同：0
> 
> 时间：2012-11-09T09:14:57.750
> 
> 标签：facebook

我有一个用户可以使用 facebook 登录的网站。

当用户登录时，他可以执行多项操作。在其中一项操作中，我希望用户重新进行身份验证（再次提供他的凭据）。

那么当用户已经使用 facebook 登录时，是否有可能打开 facebook 登录对话框（或类似的东西），以便用户可以再次提供他的凭据（或只是密码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:00:14.067

> 那么当用户已经使用 facebook 登录时，是否有可能打开 facebook 登录对话框（或类似的东西），以便用户可以再次提供他的凭据（或只是密码）？

客户端：[https ://developers.facebook.com/docs/howtos/login/client-side-re-auth/](https://developers.facebook.com/docs/howtos/login/client-side-re-auth/)

服务器端：[https ://developers.facebook.com/docs/howtos/login/server-side-re-auth/](https://developers.facebook.com/docs/howtos/login/server-side-re-auth/)

# jquery - 使用 jquery-ui 可排序的有限排序

> ID：13305086
> 
> 赞同：1
> 
> 时间：2012-11-09T09:15:05.400
> 
> 标签：jquery, jquery-ui

我不想对主 div 中的所有 div 进行排序，但无法处理这种情况。我的html：

```
<div class="demo">
    <div id="sortable" class="ui-state-default">
        <div id = "draggable1" class="">Home</div>
        <div id = "draggable2" class="">Contact Us</div>
        <div id = "draggable3" class="">FAQs</div>
        <div id = "draggable4" class="Test">Test</div>
    </div>
</div>​ 
```

在jQuery中：

```
$("#sortable").not('#draggable4').sortable({
    //revert: true
}); ​ 
```

示例：http: [//jsfiddle.net/shree/sP3UZ/2193/](http://jsfiddle.net/shree/sP3UZ/2193/)

但我无法停止对第 4 个 div 进行排序。这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:21:46.983

使用`items`属性`draggable`排除第四个 div。试试这个：

```
$("#sortable").sortable({
    items: ":not(#draggable4)"
}); 
```

[**示例小提琴**](http://jsfiddle.net/sP3UZ/2195/)

更好的是按类排除，例如`.notdraggable`，然后您可以在整个站点中重用此系统。

# python - Python 中的 if/else 循环问题

> ID：13305089
> 
> 赞同：1
> 
> 时间：2012-11-09T09:15:18.723
> 
> 标签：python, if-statement

我正在尝试用 Python 制作这个 Pig Latin 翻译器，它运行良好，直到我试图缩小它的大小。

有人可以看看这段代码并告诉我为什么，当我在开头输入一个没有元音的单词时，它仍然会在这个 if 语句中打印“元音”代码？

代码：

```
pyg = 'ay'

original = raw_input('Enter a word: ')
low_original = original.lower()

if len(low_original) > 0 and low_original.isalpha():
        print low_original
        if low_original[0] == 'a' or 'e' or 'i' or 'o' or 'u':
                print "vowel"
                pyg_vowel = low_original + pyg
                print pyg_vowel
        else:
                print "consonant"
                pyg_cons = low_original[1: ] + low_original[0] + pyg
                print pyg_cons
else:
        print 'empty' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T09:18:16.703

您需要分别检查所有元音。

目前，您的 if 条件被评估为：-

```
if (low_original[0] == 'a') or 'e' or 'i' or 'o' or 'u': 
```

`or`返回其条件中的第一个真值，`True`这`e`取决于您的第一个条件是否为真。现在，因为`'e'`被评估为`True`，所以两个值都是`true`，因此您的条件将始终为`true`。

你应该这样做： -

```
if low_original[0] in 'aeiou': 
```

或者： -

```
if low_original[0] in ('a', 'e', 'i', 'o', 'u'): 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T09:17:44.917

您应该替换字符串：

```
if low_original[0] == 'a' or 'e' or 'i' or 'o' or 'u': 
```

和：

```
if low_original[0] in ('a', 'e', 'i', 'o', 'u'): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:21:46.843

这里的条件`if`将始终评估为`True`。

```
 if low_original[0] == 'a' or 'e' or 'i' or 'o' or 'u':
            print "vowel"
            pyg_vowel = low_original + pyg
            print pyg_vowel 
```

这是一样的`if (low_original[0] == 'a') or 'e' or 'i' or 'o' or 'u'`

你应该使用类似的东西`if low_original[0] in 'aeiou'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:18:08.663

if 总是返回 True！

```
pyg = 'ay'

original = raw_input('Enter a word: ')
low_original = original.lower()

if len(low_original) > 0 and low_original.isalpha():
    print low_original
    if low_original[0] in ['a' , 'e' , 'i' , 'o' , 'u']:
            print "vowel"
            pyg_vowel = low_original + pyg
            print pyg_vowel
    else:
            print "consonant"
            pyg_cons = low_original[1: ] + low_original[0] + pyg
            print pyg_cons
else:
    print 'empty' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T09:18:23.387

问题出在 'if low_original[0] == 'a' or 'e' or 'i' or 'o' or 'u':' - first is not pythonic second is not give you not what you want.

尝试将您的代码更新为：

```
pyg = 'ay'

original = raw_input('Enter a word: ')
low_original = original.lower()

if len(low_original) > 0 and low_original.isalpha():
    print low_original
    if low_original[0] in ('a', 'e', 'i', 'o', 'u'):
            print "vowel"
            pyg_vowel = low_original + pyg
            print pyg_vowel
    else:
            print "consonant"
            pyg_cons = low_original[1: ] + low_original[0] + pyg
            print pyg_cons
else:
    print 'empty' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T09:19:10.170

将 if 语句替换为

```
if low_original[0] in ['a', 'e', 'i', 'o', 'u'] 
```

# c# - 如何在 linq 查询中添加十进制值

> ID：13305090
> 
> 赞同：0
> 
> 时间：2012-11-09T09:15:18.797
> 
> 标签：c#, linq

我的表中有七个十进制字段。我想要所有值的总和。

如果我像 `val = (i.val1 + i.val2 + ... i.val7)`只有在所有字段都不为空时才获取值一样正常添加，如果这些字段中的任何一个是，则值显示为空。

你能告诉我怎么做吗？

```
var query = dbContext.weekly_details
    .Select(i => new
    {
        total_Prj_project_time_entry_day = i.time_entry_day_1 +
            i.time_entry_day_2 +
            i.time_entry_day_3 +
            i.time_entry_day_4 +
            i.time_entry_day_5 +
            i.time_entry_day_6 +
            i.time_entry_day_7
    })
    .ToArray(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:25:13.140

```
using System.Linq;

var i = new List<int?>
{
    1,
    null,
    3
}

var total = i.Sum(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:35:02.983

尝试

```
val = (new decimal?[]{i.val1, i.val2, i.val3, i.val4, i.val5, i.val6, i.val7}).Sum() 
```

完整代码

```
 var query = dbContext.weekly_details.Select
                  (i => (new decimal?[]{
    i.time_entry_day_1,                                                                  
    i.time_entry_day_2,                                                                               
    i.time_entry_day_3,
    i.time_entry_day_4,                                                                               
    i.time_entry_day_5,                                                                               
    i.time_entry_day_6,
    i.time_entry_day_7}).Sum()).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:07:14.957

我想你可能会做

```
var query = dbContext.weekly_details
    .Select(i => new
    {
        total_Prj_project_time_entry_day = 
            i.time_entry_day_1 ?? 0 +
            i.time_entry_day_2 ?? 0 +
            i.time_entry_day_3 ?? 0 +
            i.time_entry_day_4 ?? 0 +
            i.time_entry_day_5 ?? 0 +
            i.time_entry_day_6 ?? 0 +
            i.time_entry_day_7 ?? 0
    })
    .ToArray(); 
```

`time_entry_day_n`因此，如果任何are的值，它将在总数中添加 0 `null`。

# c# - Linq连接表，按日期分组，值总和？

> ID：13305094
> 
> 赞同：1
> 
> 时间：2012-11-09T09:15:29.270
> 
> 标签：c#, linq, join, group-by, sum

我有两张桌子（一对多）。`MeterReadings(0..1) and MeterReadingDetails(*)`

我想加入这些表格并按日期分组。日期字段在 MeterReadings 中，其他字段在 MeterReadingDetails 中。

我使用了这段代码：

**林克**

```
public static IEnumerable<MeterReadingsForChart> GetCustomerTotal(int CustomerId, int MeterTypeId, DateTime StartDate, DateTime EndDate, MeterReadingsTimeIntervals DateRangeType)
{
    var customerReadings = from m in entity.MeterReadings
        join n in entity.MeterReadingDetails on m.sno equals n.ReadingId
        where m.Meters.CustomerId == CustomerId && m.ReadDate >= StartDate && m.ReadDate <= EndDate && m.Meters.TypeId == MeterTypeId
        group n by new { date = new DateTime(m.ReadDate.Value.Year, m.ReadDate.Value.Month, 1) } into g
        select new MeterReadingsForChart
        {
             ReadDate = g.Key.date,
             Value = g.Sum(x => x.Value),
             Name = g.FirstOrDefault().MeterReadingTypes.TypeName
         };

    return customerReadings;
} 
```

**MeterReadinsForChart.cs**

```
public class MeterReadingsForChart
{
    public DateTime ReadDate { get; set; }
    public string Name { get; set; }
    public double Value { get; set; }
} 
```

但我得到了这个错误：

> LINQ to Entities 仅支持无参数构造函数和初始化程序

如何加入、分组和求和？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:10:35.787

尝试以下操作：

```
var customerReadings = (from m in entity.MeterReadings
    join n in entity.MeterReadingDetails on m.sno equals n.ReadingId
    where m.Meters.CustomerId == CustomerId && m.ReadDate >= StartDate && m.ReadDate <= EndDate && m.Meters.TypeId == MeterTypeId
    group n by new { Year = m.ReadDate.Value.Year, Month = m.ReadDate.Value.Month} into g
    select new
    {
         Key = g.Key,
         Value = g.Sum(x => x.Value),
         Name = g.FirstOrDefault().MeterReadingTypes.TypeName
     }).AsEnumerable()
       .Select(anon => new MeterReadingsForChart
       {
         ReadDate = new DateTime(anon.Key.Year, anon.Key.Month, 1),
         Value = anon.Value,
         Name = anon.Name
       }); 
```

无。它丑陋，但实体框架不允许您创建 DateTime （作为一个没有无参数构造函数的结构）。所以在这种情况下，我们想要大部分来自 db 的结果，然后作为这个流，我们在内存中构造日期。

# html - 用无序列表将所有内容放在一行

> ID：13305099
> 
> 赞同：0
> 
> 时间：2012-11-09T09:15:43.453
> 
> 标签：html, css, css-float, html-lists

这似乎是一个简单的问题，但无论我做什么，我都无法解决它。我发布了一个关于我在说什么的链接。[http://www.olmasigereken.com/demo/?view=listen&artist=ibrahim+ferrer&track=dos+gardenias](http://www.olmasigereken.com/demo/?view=listen&artist=ibrahim+ferrer&track=dos+gardenias)
如果您查看页面代码，您会看到项目的顺序是***红色箭头 Artistname 破折号（-） trackname twitter 和 facebook 链接***. 但是输出不是那样的。我想以正确的顺序将所有内容放在一条线上，即***红色图像艺术家名称破折号轨道名称 twitter 和 facebook 链接***。

注意：当您单击它时，如果您没有看到任何内容，请刷新页面。

```
 <li>
                            <img src="img/track_arrow.gif" alt="" />
                            <div class="singer">
                                <a href="#"><?php echo $a[artistname]?></a> 
                            </div>                                                             
                            -
                            <div class="song">
                                <a href="#"><?php echo $a[trackname]?></a> 
                            </div>

                            <div class="fav">
                                <a target="_blank" href="#" /><img src="img/twit.gif" alt="share on twitter" /></a>
                                <a target="_blank" href="#"> <img src="img/face.gif" alt="share on facebook" /> </a> 
                            </div>
                            <br />
                        </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:31:46.430

您需要设置一些 CSS 属性，例如

```
.ikinciSol ul li {
widht: 375px;
}

.fav{
float: right;
} 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:19:25.377

内部链接的浮动左侧导致冲突。如果您删除`float: left`以下屏幕截图中看到的，我想您会得到您想要的...

![不正确的浮动](../Images/99661830692ce9c4ced5e033785f8b13.png)

![结果](../Images/0b4c8bbf882b0a6a1642d8f77074706d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:27:24.487

尝试将每个元素放在 li balises 之间，并使用带有 ul 元素的 css 属性：list-style-type:none;

# android - Android 将 ActivityGroup 替换为 Fragments / FragmentsManager

> ID：13305100
> 
> 赞同：1
> 
> 时间：2012-11-09T09:15:46.400
> 
> 标签：android, android-fragments, activitygroup

我需要一些解释/建议，也许还有一些如何`ActivityGroup`用 Fragments 替换我的课程的例子。我在一年前使用不推荐使用的`TabActivity`组合编写了该应用程序，`ActivityGroup`因此在输入不同的活动时我仍然可以保留选项卡。所以现在我想重写我的应用程序并使用新的 API，我真的很好奇如何使用带有片段的活动重写方法和整个想法，并在与应用程序的整个交互过程中保留标签栏。我不需要`TabActivity`用新标签和`ActionBar`. 这是我的 TabGroupActivity 的示例，我使用它来将标签栏保持在应用程序的底部：

```
 public class TabGroupActivity extends ActivityGroup {

    private ArrayList<String> mIdList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);       
        if (mIdList == null) mIdList = new ArrayList<String>();
    }

    /*
     * This is called when a child activity of this one calls its finish method. 
     * This implementation calls {@link LocalActivityManager#destroyActivity} on the child activity
     * and starts the previous activity.
     * If the last child activity just called finish(),this activity (the parent),
     * calls finish to finish the entire group.
     */
  @Override
  public void finishFromChild(Activity child) {
      LocalActivityManager manager = getLocalActivityManager();
      int index = mIdList.size()-1;

      if(index < 1) {
              finish();
              return;
      } 

      try {
            manager.destroyActivity(mIdList.get(index), true);
            mIdList.remove(index);
            index--;
            String lastId = mIdList.get(index);
            if(manager.getActivity(lastId).getIntent() == null){
                finish();
            } else if(manager.getActivity(lastId).getIntent() != null){
                Intent lastIntent = manager.getActivity(lastId).getIntent();
                Window newWindow = manager.startActivity(lastId, lastIntent);
                setContentView(newWindow.getDecorView());
            }
      }catch (NullPointerException e){
          finish();
      }

  }

  /*
   * Starts an Activity as a child Activity to this.
   * @param Id Unique identifier of the activity to be started.
   * @param intent The Intent describing the activity to be started.
   * @throws android.content.ActivityNotFoundException.
   */
  public void startChildActivity(String Id, Intent intent) {     
      Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
      if (window != null) {
          mIdList.add(Id);
          setContentView(window.getDecorView()); 
      }    
  }

  /*
   * The primary purpose is to prevent systems before android.os.Build.VERSION_CODES.ECLAIR
   * from calling their default KeyEvent.KEYCODE_BACK during onKeyDown.
   */
  @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
          //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
          return true;
      }
      return super.onKeyDown(keyCode, event);
  }

  /*
   * Overrides the default implementation for KeyEvent.KEYCODE_BACK 
   * so that all systems call onBackPressed().
   */
  @Override
  public boolean onKeyUp(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
          onBackPressed();
          return true;
      }
      return super.onKeyUp(keyCode, event);
  }

  /*
   * If a Child Activity handles KeyEvent.KEYCODE_BACK.
   * Simply override and add this method.
   */
  @Override
  public void  onBackPressed () {
      int length = mIdList.size();
      if ( length >=1) {
          Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
          try{
              current.finish();
          }catch(Exception e){
              finish();
          }

      }
  }
} 
```

所以基本上我需要一点帮助来了解如何实现与 Instagram 应用程序相同的交互。

每一种帮助都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T08:38:39.897

在我的情况下，我使用了来自 android 支持库的 FragmentManager V4 和带有 Fragments 的 tabhost，并做了一些工作。如果有人需要示例，您可以在 Android 开发者博客中找到它，或者在 Google 上搜索 Android Fragments Example，您会发现一些有用的东西。:)

# python - 痛饮构建问题 - python

> ID：13305101
> 
> 赞同：1
> 
> 时间：2012-11-09T09:15:52.807
> 
> 标签：python, swig

我有 c++ 类，需要在 python 代码中使用它。为此，使用 swig 生成包装器类。根据配置example.i的文档

```
/* File: example.i */
%module example

%{
#define SWIG_FILE_WITH_INIT
#include "item.h"
#include "GradedComplex.h"
#include "GradedDouble.h"
%}

%include "item.h"
%include "GradedComplex.h"
%include "GradedDouble.h" 
```

我正在尝试在 Windows 中使用 swig 构建一个包装类

```
c:>swig -c++ -python example.i

c:>python setup.py build_ext --inplace 
```

执行第二个命令后，我收到以下错误。

```
example_wrap.cxx
C:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE\xlocale(342) : warning C
4530: C++ exception handler used, but unwind semantics are not enabled. Specify
/EHsc
c:\documents and settings\swig\item.h(73) : warning C45
21: 'Item<std::complex<double>>' : multiple copy constructors specified
c:\documents and settings\swig\item.h(57) : error C2106
: '+=' : left operand must be l-value
c:\documents and settings\swig\item.h(58) : error C2106
: '+=' : left operand must be l-value
c:\documents and settings\swig\item.h(63) : error C2106
: '-=' : left operand must be l-value
c:\documents and settings\swig\item.h(64) : error C2106
: '-=' : left operand must be l-value
c:\documents and settings\swig\item.h(69) : error C2106
: '=' : left operand must be l-value
c:\documents and settings\swig\item.h(70) : error C2106
: '=' : left operand must be l-value
example_wrap.cxx(3275) : error C2512: 'Item<std::complex<double>>' : no appropriate default constructor available

c:\documents and settings\swig\Item.h(38) : warning C45
21: 'Item<T>' : multiple copy constructors specified
        with
        [
            T=double
        ]
        example_wrap.cxx(3425) : see reference to class template instantiation '
Item<T>' being compiled
        with
        [
            T=double
        ]
error: command '"C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\cl.exe"' fa
iled with exit status 2 
```

item.h 如下

```
#ifndef __ITEM_H__
#define __ITEM_H__

#include <complex>
#include <functional>
#include <string>

template<typename T>
class Item
{
  std::string name_;
  T val_;

public:
  Item(std::string name, T val) : name_(name), val_(val) {}
  Item(Item<T> &rhs) : name_(rhs.name_), val_(rhs.val_) {}
  Item(const Item<T> &rhs) : name_(rhs.name_), val_(rhs.val_) {}
  ~Item() {}

  std::string name() const { return name_; }
  T operator()() const { return val_; }
  double norm() const { return sqrt(val_ * val_); }
  Item<T> &operator+=(Item<T> &rhs)
  {
    val_ += rhs();
    return *this;
  }
  Item<T> &operator-=(Item<T> &rhs)
  {
    val_ -= rhs();
    return *this;
  }
  Item<T> &operator*=(Item<T> &rhs)
  {
    val_ *= rhs();
    return *this;
  }
};

template<>
class Item<std::complex<double> >
{
  std::string name_;
  std::complex<double> val_;

public:
  Item(std::string name, std::complex<double> val) : name_(name), val_(val) {}
  Item(Item<std::complex<double> > &rhs) : name_(rhs.name_), val_(rhs.val_) {}
  Item(const Item<std::complex<double> > &rhs) : name_(rhs.name_), val_(rhs.val_) {}
  ~Item() {}

  std::string name() const { return name_; }
  std::complex<double> operator()() const { return val_; }
  double norm() const { return sqrt(val_.real() * val_.real() + val_.imag() * val_.imag()); }
  Item<std::complex<double> > &operator+=(Item<std::complex<double> > &rhs)
  {
    val_.real() += rhs().real();
    val_.imag() += rhs().imag();
    return *this;
  }
  Item<std::complex<double> > &operator-=(Item<std::complex<double> > &rhs)
  {
    val_.real() -= rhs().real();
    val_.imag() -= rhs().imag();
    return *this;
  }
  Item<std::complex<double> > &operator*=(Item<std::complex<double> > &rhs)
  {
    val_.real() = val_.real() * rhs().real() - val_.imag() * rhs().imag();
    val_.imag() = val_.real() * rhs().imag() + val_.imag() * rhs().real();
    return *this;
  }
};

template<typename T>
struct ItemComparator : public std::binary_function<Item<T>, Item<T>, bool>
{
  inline bool operator()(Item<T> lhs, Item<T> rhs)
  {
    return lhs.norm() < rhs.norm();
  }
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:21:15.847

您在 C++ 代码中有错误。`std::complex::real()`不返回左值，因此无法编译：

```
 Item<std::complex<double> > &operator+=(Item<std::complex<double> > &rhs)
  {
    val_.real() += rhs().real();
    val_.imag() += rhs().imag();
    return *this;
  } 
```

你可以用这个：

```
val_ += rhs(); 
```

# java - 以编程方式突出显示 smartgwt 表单中的文本

> ID：13305103
> 
> 赞同：1
> 
> 时间：2012-11-09T09:15:54.527
> 
> 标签：java, eclipse, gwt, smartgwt

我有一个方法：

```
public void generateLink() {
        String url = com.google.gwt.user.client.Window.Location.getHref();
        String[] url2 = url.split("&xmx");
        url = url2[0];
        float xmax = extent.getXMax();
        float xmin = extent.getXMin();
        float ymax = extent.getYMax();
        float ymin = extent.getYMin();
        int wkid2 = this.wkid;
        url = url + "&xmx="+xmax+"&xmn="+xmin+"&ymx="+ ymax+"&ymn="+ymin+"&wkid=" + wkid2;      
        textItem_link_do_mapy.setValue(url);
        textItem_link_do_mapy.setSelectOnFocus(true);
        textItem_link_do_mapy.focusInItem();

    } 
```

我想在输入文本后突出显示 textitem 组件。我怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:23:05.223

更改 TextItem 的样式，并在您的 css 表中设置 css 属性

```
textItem_link_do_mapy.setTextBoxStyle("highlight");

.highlight {
  background-color: rgb(255,255,0)
} 
```

# java - 动态绑定和静态绑定

> ID：13305105
> 
> 赞同：0
> 
> 时间：2012-11-09T09:16:20.423
> 
> 标签：java

这个问题对某些人来说可能听起来很愚蠢，但我需要在脑海中弄清楚。

```
 class J_SuperClass { 

void mb_method() { 
     System.out.println("J_SuperClass::mb_method"); 
   } 
   static void mb_methodStatic() { 
      System.out.println("J_SuperClass::mb_methodStatic"); 
   } 
} 
public class J_Test extends J_SuperClass { 
   void mb_method() { 
     System.out.println("J_Test::mb_method"); 
   } 
   static void mb_methodStatic() { 
     System.out.println("J_Test::mb_methodStatic"); 
   } 
   public static void main(String[] args) { 
     J_SuperClass a = new J_Test(); 
     a.mb_method(); 
     a.mb_methodStatic(); 
     J_Test b = new J_Test(); 
     b.mb_method();
     b.mb_methodStatic(); 
   } 
} 
```

输出是：

```
J_Test::mb_method 
J_SuperClass::mb_methodStatic 
J_Test::mb_method 
J_Test::mb_methodStatic 
```

我知道动态绑定发生在运行时，静态绑定发生在编译时。此外，对于动态绑定，对象的实际类型决定了调用哪个方法。所以我的问题是，在上面的代码中，“静态”这个词会导致静态绑定，因此对象的 DECLARED 类型决定了调用哪个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:31:13.307

是的，静态这个词决定了静态绑定，因为在静态方法的情况下没有多态性（因此需要动态绑定）。该方法绑定到名称，而不是类型，因为它是该类中唯一具有该名称的方法；它与任何对象无关，因为它是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:38:12.983

您可以尝试反编译 J_Test 类。在那里你会看到：

```
public static void main(String args[])
    {
        J_SuperClass a = new J_Test();
        a.mb_method();
        J_SuperClass.mb_methodStatic();
        J_Test b = new J_Test();
        b.mb_method();
        mb_methodStatic();
    } 
```

所以，超类的静态方法是绑定的。

# dom - twitter boostrap 可折叠 div 搜索

> ID：13305106
> 
> 赞同：1
> 
> 时间：2012-11-09T09:16:21.980
> 
> 标签：dom, twitter-bootstrap

我和这个[http://www.w3resource.com/twitter-bootstrap/collapse.php](http://www.w3resource.com/twitter-bootstrap/collapse.php)一样，我需要创建一个搜索功能，以便在每个手风琴组中找到搜索的单词：在标题和在正文中，并突出显示匹配的单词。

有没有办法做到这一点？任何想法？谢谢

# jsf - “发现意外的令牌错误”错误显示在 netbeans 为百分比 (%) 字符处理 jsf 项目时

> ID：13305108
> 
> 赞同：2
> 
> 时间：2012-11-09T09:16:24.713
> 
> 标签：jsf, netbeans, xml-encoding

我在 netbeans 和 jsf 中遇到了一个奇怪的问题，这不是致命的，但很烦人。

出于某种原因，我从 netbeans 收到以下代码块的错误“发现意外字符 % 发现意外令牌错误”。

它在抱怨百分号，你知道如何解决这个问题吗？我试图用“%”的百分比的 xml 编码来逃避它，但后来它开始抱怨 & 字符..

```
<div class="bar" style="width: #{cc.value.relevance}%;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:01:01.010

恕我直言，您应该添加如下演员：

```
object.toString().append("%"); 
```

在它被前端调用之前。

# android - 使用EMMA测试android单元测试覆盖率，出现一些错误

> ID：13305109
> 
> 赞同：2
> 
> 时间：2012-11-09T09:16:25.617
> 
> 标签：android, unit-testing, emma

当我使用 EMMA 按设备测试 android 单元测试覆盖率时，会出现一些错误：

...... [exec] 无法将 '/data/data/com.gnet.meetme/coverage.ec' 复制到 'coverage .ec'：权限被拒绝............</p>

注意：我的设备已经root了。我发现，使用“ **mount -o rw,remount -t yaffs2 /dev/block/mtdblock3 /system** ”命令可以更改系统权限，谁能告诉我哪个命令可以更改与系统相同的数据/数据权限？

多谢。

# iphone - 更改核心图中的 y 轴标签间隔

> ID：13305116
> 
> 赞同：0
> 
> 时间：2012-11-09T09:16:51.367
> 
> 标签：iphone, objective-c, ios, xcode, core-plot

我在我的应用程序中实现了散点图的核心绘图库。但我想显示 Y 轴标签，如 1.0,2.0,3.0,4.0,5.0,.. 并相应地绘制图表。

当我通过乘以 25 如下所示更改 y 标签的间隔时

```
NSInteger majorIncrement = 2;

NSInteger minorIncrement = 1;   

CGFloat yMax = 10.0f;// should determine dynamically based on max price    
NSMutableSet *yLabels = [NSMutableSet set];
NSMutableSet *yMajorLocations = [NSMutableSet set];
NSMutableSet *yMinorLocations = [NSMutableSet set];
for (NSInteger j = minorIncrement; j <= yMax; j += minorIncrement) {
    NSUInteger mod = j % majorIncrement;

    if (mod == 0) {
        CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%i", j] textStyle:y.labelTextStyle];
        NSDecimal location = CPTDecimalFromInteger(j*25);  **//multiply with 25**`

       label.tickLocation = location;
        label.offset = -y.majorTickLength - y.labelOffset;

        if (label) {

            [yLabels addObject:label];
        }
        [yMajorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:location]];

    } else {
        [yMinorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:CPTDecimalFromInteger(j)]];

    }
}
y.axisLabels = yLabels;    
y.majorTickLocations = yMajorLocations;
y.minorTickLocations = yMinorLocations; 
```

但是当绘制图表时，它显示我错了。

**例如**，如果我的分数是 150，那么它开始绘制为 150/25=6th 点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:37:00.233

您可以设置正交坐标小数点，以确定图表开始的点

```
 CPTXYAxis *y = axisSet.yAxis;
   y.orthogonalCoordinateDecimal = CPTDecimalFromFloat(150/25); 
```

更进一步，设置情节范围，

```
 CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;   
   plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:(150/25) length:25]; 
```

# sql - Visual Studio 数据库项目远程部署失败。无法读取本地文件？

> ID：13305117
> 
> 赞同：0
> 
> 时间：2012-11-09T09:16:54.087
> 
> 标签：sql, visual-studio-2010, sql-server-2008, tsql

我有一个 VS 2010 数据库项目，我很乐意每天将其部署到我的本地开发服务器上，没有任何问题。我们现在接近发布期，我想开始部署到远程 UAT 服务器，但现在失败并显示“错误 SQL01268：无法批量加载，因为无法打开文件”。我认为这取决于包含如下行的部署后脚本之一：

```
declare @xml xml
set @xml = (select * from OPENROWSET(BULK '$(OutputPath)\XML_1.xml', SINGLE_BLOB) as x); 
```

（这个 xml 被插入到一个表中）

我猜这是失败的，因为该文件实际上不在远程服务器上，并且它直到现在才起作用，因为服务器与部署脚本位于同一台机器上。

首先，是这样吗？其次，有谁知道我可以更改我的部署脚本以将这些 xml 文件作为部署的一部分插入而无需先将它们复制到远程服务器（我可能没有这种访问权限）的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:49:15.870

我有一个可能的解决方案，但它不是特别漂亮 - sqlcmd 模式。

我没有尝试将文件包含在 SQL 中，而是尝试在运行之前将所有 XML 包含在文件中。

例如

```
set @xml = '<?xml version="1.0" encoding="utf-8" ?>
:r .\xml\XML_1.xml'
'; 
```

这种方法的主要问题是我必须在集合中包含 xml 声明，因为 sql cmd 代码必须存在于它自己的行上，但在 xml 文件的开头和声明之间不能有回车.

# cakephp - CakePhp 插件：路由问题

> ID：13305118
> 
> 赞同：0
> 
> 时间：2012-11-09T09:16:55.307
> 
> 标签：cakephp

好吧，我挣扎了 2 个小时，试图找出这不起作用。问题：我在插件文件夹中有一个插件 PaypalIpn。该插件有一个控制器 InstantPaymentNotificationsController 和里面的一些动作。

如果我尝试使用 /paypal_ipn/instant_payment_notifications 直接访问插件的控制器，Cake 会说没有 Paypal 控制器。好吧，我添加了一条路线：

```
Router::connect('/paypal_ipn/:action/*', array( 'plugin' => 'paypal_ipn', 'controller' => 'instant_payment_notifications', 'action' => 'index')); 
```

并惊讶于网络服务器冻结并在 httpd.log 中触发此错误

```
PHP Fatal error:  Allowed memory size of -2147483648 bytes exhausted (tried to allocate 320596 bytes) in libCake2.3/Cake/Error/ErrorHandler.php on line 114 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:37:30.117

根据[插件的安装说明](https://github.com/webtechnick/CakePHP-Paypal-IPN-Plugin)，路线应该是：

```
Router::connect('/paypal_ipn/process',
    array('plugin'     => 'paypal_ipn',
          'controller' => 'instant_payment_notifications',
          'action'     => 'process'
    )
); 
```

这不是你所拥有的。

另外，请确保您拥有最新版本。面包店的文章是 2009 年的，是一个非常旧的版本。

# c# - 处理 HTTP POST 的通用处理程序

> ID：13305126
> 
> 赞同：1
> 
> 时间：2012-11-09T09:17:25.607
> 
> 标签：c#, asp.net, generic-handler

我有一个通用处理程序，我打算用它来接受来自 Sage Pay 的 HTTP POST。我给他们 POST 的 url 但是它给出了一个错误 500（内部服务器错误），我猜这对我来说是错误的。如果我希望通用处理程序接受此 POST 并回复响应，我需要做些什么特别的事情吗？

我注意到在标签下的 web.config 中只有一个 .asmx 文件的引用。我需要在这里添加什么吗？

我的 web.config 部分如下所示：

```
<httpHandlers>
    <remove verb="*" path="*.asmx"/>
    <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
</httpHandlers>
<httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
</httpModules> 
```

我的通用处理程序代码如下所示。那里还有其他子句来确保无论 Sage 发送什么内容都会返回某些内容，只是为了测试处理程序是否正常工作。似乎没有：

```
public class SagePayHandler : IHttpHandler, IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
        string status = context.Request.Params["Status"];
        string statusDetail = context.Request.Params["StatusDetail"];

        switch (status.ToUpper())
        {
            case "OK":
                {
                    StringBuilder content = new StringBuilder();

                    content.Append("Status=" + HttpUtility.UrlEncode("OK"));
                    content.Append("&RedirectURL=" + HttpUtility.UrlEncode("http://fooIp:80/Success.aspx?Code=SUCCESS"));
                    content.Append("&StatusDetail=" + HttpUtility.UrlEncode("OK"));

                    //SAGE TEST
                    context.Response.ContentType = "application/x-www-form-urlencoded"; ;
                    context.Response.ContentEncoding = System.Text.Encoding.Default;
                    context.Response.Write(content.ToString());
                    break;
                }
        }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:58:40.547

您需要在`web.config`.

这是 IIS 7.0 之前的配置

```
<configuration>
    ...
    <system.web>
        ...
        <httpHandlers>
            <remove verb="*" path="*.asmx"/>
            <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
            <add verb="POST" path="SagePay.ashx" type="<Your Handler Namespace>.SagePayHandler, <Your Handler Assembly>" validate="false"/>
        </httpHandlers>
        <httpModules>
           <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </httpModules>
    </system.web>
    ...
</configuration> 
```

这是 IIS 7.0 的配置：

```
<configuration>
    ...
    <system.webServer>
        ...
        <handlers>
            <remove name="WebServiceHandlerFactory-Integrated"/>
            <remove name="ScriptHandlerFactory"/>
            <remove name="ScriptHandlerFactoryAppServices"/>
            <remove name="ScriptResource"/>
            <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" preCondition="integratedMode" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="SagePayHandler" verb="POST" path="SagePay.ashx" type="<Your Handler Namespace>.SagePayHandler, <Your Handler Assembly>"/>
        </handlers>
        <modules>
            <remove name="ScriptModule"/>
            <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </modules>
    </system.webServer>
    ...
</configuration> 
```

当然，重要的部分是引用您的 Http 处理程序的行。

注册后，您的处理程序将在以下 URL 下可用：

```
http:\\your.website.com\SagePay.ashx 
```

您可以在以下文章中阅读有关注册 HTTP 处理程序的更多信息：[如何：注册 HTTP 处理程序](http://msdn.microsoft.com/en-us/library/46c5ddfy%28v=vs.100%29.aspx)

# javascript - IE9不支持localStorage？

> ID：13305131
> 
> 赞同：5
> 
> 时间：2012-11-09T09:17:52.477
> 
> 标签：javascript, html, internet-explorer, local-storage

大家都说`window.localStorage`IE支持（直到IE8）

我在 IE9 上对其进行了测试，但是：

```
console.log(typeof window.localStorage)

undefined 
```

这是什么意思？

为所有浏览器存储本地数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T09:21:58.397

本地存储是[相对于原点](http://www.w3.org/TR/webstorage/)存储的。

这意味着您必须使用`http://someorigin/pathtoyourpage.html`. 如果您在其中打开页面，它不能在 IE 上工作`file://pathtoyourpage.html`（并且不应该在其他浏览器上工作）。

因此，您需要使用 Web 服务器访问您的页面（它可以在 localhost 上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:14:06.317

Storage.js 呢？

[https://sites.google.com/site/daveschindler/jquery-html5-storage-plugin](https://sites.google.com/site/daveschindler/jquery-html5-storage-plugin)

“提供了一个简单的界面来存储用户偏好等数据。存储插件可用于保存和检索用户浏览器中的数据。对于较新的浏览器，使用 HTML 5 的 localStorage。如果不支持 localStorage，则使用 cookie . 可检索的数据仅限于同一域。”

# javascript - Internet Explorer 在第一次提交表单后停止在用户操作上调用 JavaScript 事件处理程序

> ID：13305132
> 
> 赞同：1
> 
> 时间：2012-11-09T09:17:55.683
> 
> 标签：javascript, html, internet-explorer, events, iframe

事件处理程序在 HTML 源代码中内联分配`('onclick="..."')`。该 HTML 源代码在 iframe 中接收并移动到显示的页面`(document.getElementById("...").appendChild(iframenodesnewhtmlsource)).`

事件处理程序执行`form submit (document.getElementById("form1").submit())`. 表单被提交到从上面接收到新的 HTML 源的 iframe。`"action="`表单的页面通过发送一个`parent.func()`在其 JavaScript 中执行的 HTML 页面来响应。这些`parent.func()`是显示页面中与事件处理程序相同范围内的函数并被执行： 表单提交后仍会执行隐式 JavaScript。

再次对应该调用事件处理程序的事件处理程序元素执行操作不会调用事件处理程序：在表单提交后不调用显式 JavaScript 事件处理程序。

IE 中的命名冲突导致了与类似代码相同的问题：IE 不喜欢“form”之类的表单名称或与函数具有相同名称的 id 或类似的名称。如果您对原始问题没有解决方案，请写下 IE 的 HTML 元素命名和 JavaScript 命名（如果您知道的话）。

HTML5，Internet Explorer 8 标准模式。

代码如下。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title></title>
    <style type="text/css">
    </style>
    <script type="text/javascript">
        function callback(data,type)
        {
            if(type == 0)
            {
                if(document.getElementById("tablediv").firstChild != null)
                {
                    document.getElementById("tablediv").removeChild(document.getElementById("tablediv").firstChild);
                }
                document.getElementById("tablediv").appendChild(data.firstChild);
            }
        }

        function load(tablesrc)
        {
            document.getElementById("changedfield").value = "table";

            document.getElementById("showntable").value = tablesrc + "";
            document.getElementById("form1").submit();
        }

        function savevalue(src,node)
        {
            document.getElementById("changedfield").value = src.id;
            document.getElementById("changedvalue").value = src.value;

            document.getElementById("form1").submit();
        }
        function init()
        {
            document.getElementById("form1").setAttribute("action","/cgi-bin"+window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/"))+"/../../gettable.cgi");
            load(1);
        }
    </script>
</head>
<body onload="javascript:init()">
    <div id="tables">
        <form id="form0" name="form0">
            <div id="tableselect">
                <input type="button" value="" onclick="javascript:load(1)" />
                <input type="button" value="" onclick="javascript:load(2)" />
                <input type="button" value="" onclick="javascript:load(3)" />
                <input type="button" value="" onclick="javascript:load(4)" />
                <input type="button" value="" onclick="javascript:load(5)" />
                <input type="button" value="" onclick="javascript:load(6)" />
            </div>
            <div id="tablediv"></div>
        </form>
        <form id="form1" name="form1" target="iframe1" method="post" action="">
            <input type="hidden" id="showntable" name="showntable" value="" />
            <input type="hidden" id="changedfield" name="changedfield" value="" />
            <input type="hidden" id="changedvalue" name="changedvalue" value="" />
        </form>
        <iframe id="iframe1" name="iframe1"></iframe>
    </div>
</body>
</html> 
```

# php - Can't configure ZEND to work

> ID：13305137
> 
> 赞同：0
> 
> 时间：2012-11-09T09:18:21.637
> 
> 标签：php, zend-framework

I tried both ZF 1.12.0 and 2.0.3, then ran this [code](http://framework.zend.com/svn/framework/standard/trunk/demos/Zend/Gdata/InstallationChecker.php):

On my computer it didn't work and seemed to stuck in this line:

```
$videoEntry = $yt->newVideoEntry(); 
```

I know that because when I put two echos around that line, only the first got displayed.

The weird thing is that there is no such method called `newVideoEntry()` anywhere, at all. And the most annoying thing is that it works completely fine on [phpcloud](http://rene.my.phpcloud.com/email.php), which turn out to be using ZF 1.11.11, an old version that I can't find anywhere on the internet.

I'm really lost. Any idea? Which version I should use, since they are so much different and incompatible. Any solution for that code ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:27:10.127

if you want to use the same library as phpcloud all you have to do is to pull the content of the zf library that is hosted on the php cloud server. dont remember where it is exactly but should be in a zend folder on the phpcloud server. As for the error you get , without the exact error message it is hard to tell what's wrong.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:48:28.850

Method newVideoEntry() does not exist because it is a magical method. Zend_Gdata_App::__call takes care of that. It creates Zend_Gdata_YouTube_VideoEntry and things go on.

# c# - C#替换匹配开始结束的表达式

> ID：13305139
> 
> 赞同：0
> 
> 时间：2012-11-09T09:18:24.527
> 
> 标签：c#, regex, replace

任何人都可以帮我在 C# 中的字符串中替换任何以“startingChars”开头并以“endingChars”结尾的字符串......类似这样：

```
Regex.Replace(strToReplaceIn, "startingChars[anyNumberOfChars]endingChars", myFunction(anyNumberofChars)); 
```

其中 strStartingChars 和 strEndingChars 是两个字符串，并且定义了 myFunction

例如，如果开始`"Hello, I need to replace startingCharsWITH_SOMETHINGendingChars, ...."`的结果是：`"Hello, I need to replace myFunctionResult("WITH_SOMETHING"), ..."`

请让我知道有帮助的 Regex.Replace 表达式，问题不是找到匹配的表达式，而是替换......我该如何参考

```
anyNumberOfChars 
```

在表达式的替换参数中？

我希望它足够清楚......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:25:30.773

你应该使用这样的正则表达式：

```
abc.*xyz 
```

它会匹配这样的字符串：

```
abcblablablaxyz 
```

考虑使用最小匹配：

```
abc.*?xyz 
```

这只会匹配到第一个 xyz，而不是搜索到最后一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:38:54.573

您可以使用命名组轻松获取要替换的内容，并使用匹配评估器来构造替换字符串：

```
using System.Text.RegularExpressions;

static class Program {
    static void Main(string[] args) {
        string strToReplaceIn = "Hello, I need to replace startingCharsWITH_SOMETHINGendingChars, ....";
        string replaced = Regex.Replace(strToReplaceIn, "startingChars(?<contents>.*?)endingChars", (match) => {
            return "myFunctionResult(" + match.Groups["contents"].Value + ")";
        });
    }
} 
```

[命名组](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#named_matched_subexpression)（表达式中的位`(?<contents>.*?)`）可以让您引用表达式的子部分，我认为这就是您所要求的。
或者，您可以使用一个简单的 group ，即括号之间的表达式，没有`?<name>`部分：`(.*)`。然后，您应该使用整数索引来引用它：

```
match.Groups[1].Value 
```

（注：Groups[0] 代表整场比赛）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:29:03.943

^你的字符串&

^ - 表示字符串的开头
& - 字符串的结尾

# excel - 对我的情况采取不同的方法

> ID：13305140
> 
> 赞同：1
> 
> 时间：2012-11-09T09:18:30.893
> 
> 标签：excel, vba, excel-formula, excel-2003

在我有列的 excel 表上，每列代表一个星期数。我想为每行和每周计算所谓的 4 周平均值，这是我使用的公式： **((value*Tvalue)+(value*Tvalue)+(value*Tvalue)+(value*Tvalue) )/(Tvalue)**（这不是实际的公式，而是简化的，这并不重要）。

正是这些检查使事情变得更加复杂。如果 weeknr 的值为零，则跳过它，但如果下一个值也为零，则完全跳过公式并将其设为零（或类似“false”的文本）。所以必须考虑的另一件事是，如果值为零，则取而代之的是下周的值。

示例（参见包含的文件）：我想计算第 12 周第三个值的公式 (mov 4wk avg)，这将使公式**(0.2*6)+(0.3*6)**现在第 14 周为零所以我跳过它，那么公式将是： **(0.2*6)+(0.3*6)+(0.6*6)+(0.9*6)/(6)**。希望这有点道理。

现在我在 VBA 中使用大量变量和大量 if 语句来执行此操作。有没有更简单更有效的方法来解决这个问题？

示例表 [https://dl.dropbox.com/u/3121767/Book1.xlsx](https://dl.dropbox.com/u/3121767/Book1.xlsx)

**PS 我知道示例表是 2007/2010 版本，但我需要在 2003 年完成此操作**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:47:52.490

可以使用数组公式（在公式窗口中按 Ctrl-Shift-Enter，大括号将由 Excel 本身插入，而不是由用户插入）：

A3：第 3 行的 T 值
B3：E3：第 3 行中单周的值

```
={IF(OR(SUM(IF((B3:C3)=0;1;0))>1;SUM(IF((C3:D3)=0;1;0))>1;SUM(IF((D3:E3)=0;1;0))>1);"Fail";(B3*$A3+C3*$A3+D3*$A3+E3*$A3)/$A3)} 
```

该公式需要对数周，如果对数之和为 0，则整个公式将失败。如果只有一个零，一切都将保持不变，因为 0*value 等于跳过。公式可以向右和向下复制。

更新的示例可在[http://www.bumpclub.ee/~jyri_r/Excel/4_week_average.xls](http://www.bumpclub.ee/~jyri_r/Excel/4_week_average.xls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:37:59.717

我尝试了两步法

1）根据以下规则变换每个单元格：

```
if myweek = 0 and mynextweek = 0 then
    myweek = 0
elseif myweek = 0 and mynextweek <> 0 then
    myweek = mynextweek
else
    myweek = myweek
endif 
```

在 Sheet2!B2 中，我输入 `=IF(AND(Sheet1!B2=0,Sheet1!C2=0),0,IF(Sheet1!B2=0,Sheet1!C2,Sheet1!B2))`并复制到 Sheet1 中存在数据的所有单元格，以及 A 列中基值的副本

2）然后我为每组 4 列创建一个 4 周内的标准移动平均线，从 M 列中的 W15 开始...如果您在 Sheet1 或 Sheet2 中显示此内容，请注意品味

# c - 从输入字符串解析数据

> ID：13305146
> 
> 赞同：0
> 
> 时间：2012-11-09T09:18:42.570
> 
> 标签：c, parsing

我有这种输入数据。

`<html>...... <!-- OK -->`

我只想提取注释符号之前的数据`<!--`。这是我的代码：

```
char *parse_data(char *input) {
    char *parsed_data = malloc(strlen(input) * sizeof(char));
    sscanf(input, "%s<!--%*s", parsed_data);
    return parsed_data;
} 
```

但是，它似乎没有返回预期的结果。我不明白为什么会这样。

谁能向我解释提取此类数据的正确方法以及“sscanf()”的行为。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:22:20.037

`"%s"`格式说明符不会将其`"<!--"`视为单个分隔符，也不会将任何单个字符视为分隔符（无论如何这都不是正确的行为）。只有空格被视为分隔符。扫描集可用，`sscanf()`但它们采用单个字符的集合，而不是表示单个分隔符的字符序列。这意味着`input`第一个空白字符之前的所有内容都将分配给`parsed_data`.

您可以`strstr()`改用：

```
const char* comment_start = strstr(input, "<!--");
char* result = 0;
if (comment_start)
{
    result = malloc(comment_start - input + 1);
    memcpy(result, input, comment_start - input);
    result[comment_start - input] = 0;
} 
```

请注意，`sizeof(char)`保证`1`可以作为`malloc()`参数计算的一部分省略。

# c# - 是否可以加密 iframe 的来源

> ID：13305149
> 
> 赞同：0
> 
> 时间：2012-11-09T09:18:45.743
> 
> 标签：c#, asp.net, iframe

我有一个网页，它有一个 iframe、文本框和按钮，但没有别的...用户键入文本框的 URL，然后单击按钮。之后，将 URL 关联为 iframe 的来源。

之后发生的是一个java小程序截取网页等的屏幕截图等。

我今天发现，在谷歌浏览器中，右键菜单中有一个名为“检查元素”的选项。借助此功能，用户可能会更改 iframe 内部的内容并操作原始数据。有谁知道如何加密 iframe 的来源。

iframe 的 PS 来源是经过身份验证的数据。

这是[改造前的样子](https://dl.dropbox.com/u/38860715/before.png)

这是[修改后的](https://dl.dropbox.com/u/38860715/after.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:23:07.463

您的问题的简短回答是“不”。Html 是一种客户端 SCRIPT 语言；尽管您可能会找到使事情变得越来越难以“操纵”的方法，但您最终无法完全阻止用户看到您尝试使用 1 个重大异常执行的操作的每一个细节，那就是使用小程序或插件（即：flash、java、activex）。

为了解决您的问题，如果您已经在使用小程序，为什么不使用 iframe 来利用它呢？您还可以考虑使用小程序生成用于交付的 jpeg 而不是 HTML。

# windows - 如何从 perl 启动程序？

> ID：13305150
> 
> 赞同：5
> 
> 时间：2012-11-09T09:18:45.130
> 
> 标签：windows, perl, firefox

如何从 perl 启动 firefox？我只需要启动浏览器，这样 WWW::Mechanize::Firefox 就可以操作它。在 stackoverflow 周围搜索，我看到了一些解决方案`system('start cmd.exe /k $cmd)`，例如 $cmd 是在 cmd 启动后作为输入抛出的参数。

但是，这些根本没有帮助我解决我的问题。

我尝试过的解决方案

```
system("start cmd.exe /k start firefox");
system("firefox");
system("cmd","start","firefox");
system("cmd start firefox"); 
```

基本上我找到了很多替代品，但我根本无法启动 Firefox 浏览器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T09:24:38.053

你在正确的轨道上。你的第二行几乎是正确的。如果`firefox`不在您的`PATH`环境变量中，则需要提供完整路径。

单击桌面上的 Firefox 图标，打开属性并检查 Firefox 可执行文件的位置。`system`然后在您的通话中使用它。

对我来说，它看起来像这样（`'`用于 Perl 的字符串，`"`用于 Windows shell，因为路径中有空格）：

```
system('"C:\Programme\Mozilla Firefox\firefox.exe"'); 
```

您可以通过打开一个新的命令行 ( `win`+ `r`, `cmd`)来测试它`cd`，然后进入运行 Perl 程序的目录，然后输入以下命令：

```
C:\Dokumente und Einstellungen\simbabque>"C:\Programme\Mozilla Firefox\firefox.exe" 
```

它不会打印任何东西，但会在几秒钟后打开一个新的 Firefox 窗口。因此，您可能需要在浏览器启动时在 Perl 中保持程序执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:16:18.880

[WWW::Mechanize::Firefox 将为您启动 firefox，](http://search.cpan.org/perldoc/WWW%3a%3aMechanize%3a%3aFirefox%3a%3aExamples)但您可以使用

```
system 1, qq{$ENV{PROGRAMFILES}\\Mozilla Firefox\\firefox.exe} 
```

# c++ - 检查 TCP 端口是否可用（未侦听或连接）

> ID：13305151
> 
> 赞同：3
> 
> 时间：2012-11-09T09:18:49.003
> 
> 标签：c++, network-programming, port, netstat

我使用以下代码检查端口是否可用：

```
bool ClassA::CheckPortTCP(short int dwPort , char *ipAddressStr)  
{  
    struct sockaddr_in client;         
    int sock;   

    client.sin_family = AF_INET;  
    client.sin_port = htons(dwPort);  
    client.sin_addr.S_un.S_addr = inet_addr(ipAddressStr);      

    sock = (int) socket(AF_INET, SOCK_STREAM, 0);  

    int result = connect(sock, (struct sockaddr *) &client,sizeof(client)); 

    // change to result == 0 -> failure in writing code too quick ;-)
    if (result = 0) return true; // port is active and used
    else return false; 
} 
```

问题是如果端口打开但未连接检查失败！如何轻松检查端口是否可用（未侦听，未连接）？

例如端口 21111（netstat 的输出）-> 我的函数无法识别该端口不是空闲的

```
TCP    0.0.0.0:21111          xxxxDUMMYxxxx:0       LISTENING 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:25:27.613

您有两个错误：第一个是在`if`语句中您*将*零分配给`result`. 另一个是连接失败时`connect`返回`-1`，如果连接成功则返回非负值。

还有一个问题是，如果您设法连接，则不会关闭该连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-22T05:11:26.533

这条线`client.sin_addr.S_un.S_addr = inet_addr(ipAddressStr);`对我不起作用。将其更改为：

```
bool CheckPortTCP(short int dwPort, char *ipAddressStr)
{
    WSADATA wsaData;
    int iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
    if (iResult != NO_ERROR) {
        wprintf(L"WSAStartup function failed with error: %d\n", iResult);
        return false;
    }

    struct sockaddr_in client;
    int sock;
    client.sin_family = AF_INET;
    client.sin_port = htons(dwPort);
    client.sin_addr.s_addr = inet_addr(ipAddressStr);
    sock = (int)socket(AF_INET, SOCK_STREAM, 0);
    if (sock == INVALID_SOCKET) {
        wprintf(L"ERROR: Socket function failed with error: %ld\n", WSAGetLastError());
        WSACleanup();
        return false;
    }

    printf("INFO: Checking Port : %s:%d\n", ipAddressStr, dwPort);
    int result = connect(sock, (struct sockaddr *) &client, sizeof(client));
    if (result == SOCKET_ERROR) {
        printf("ERROR: %s", WSAGetLastError());
        WSACleanup();
        return false;
    }
    else 
    {
        WSACleanup();
        closesocket(sock);
        return true;
    }
} 
```

# macos - 是否可以在我的机器上运行发送给苹果进行本地审查的 OSX 二进制文件？

> ID：13305152
> 
> 赞同：1
> 
> 时间：2012-11-09T09:18:50.293
> 
> 标签：macos, debugging, mac-app-store

我有一个 OSX 二进制文件发送给 Apple 以供 App Store 审查。由于一个错误，它被拒绝了。不幸的是，我无法在本地机器上重现该问题。现在我假设我的二进制文件的加密发布版本的行为与我在本地机器上运行的开发人员版本不同。

是否可以在我的机器上本地运行为应用商店审阅者生成的二进制文件？像往常一样执行生成的二进制文件不起作用，因为应用程序立即终止。审阅者可以测试我的二进制文件，所以我假设必须有任何证书或帮助工具也可以在我的机器上启动这个二进制文件。我是开发人员并且所有证书都安装在我的机器上这一事实让我想到了为什么我不能运行二进制文件的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T23:30:32.737

[如何重现针对 Mac App Store 提交的错误报告](https://developer.apple.com/library/mac/qa/qa1778/)的文章 应该会引导您完成此操作。

# android - imageloader 类显示尺寸小于通常尺寸的图像

> ID：13305159
> 
> 赞同：1
> 
> 时间：2012-11-09T09:19:16.583
> 
> 标签：android, facebook

我从 facebook api 获得了张贴的图片，并尝试在我的应用程序中显示它们。但是在使用 imageloader 类时，即使我将 wrap_content 保留在我的 imageview 中，图像的尺寸也非常小。我真的不明白发生了什么。我需要改变什么吗在我的图像加载器类中。

```
 package com.beerbro.utils;

     import java.io.File;
     import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Collections;
import java.util.Map;
import java.util.Stack;
import java.util.WeakHashMap;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.drawable.BitmapDrawable;
import android.util.Log;
import android.widget.ImageView;

public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());

    public ImageLoader(Context context){
        //Make the background thead low priority. This way it will not affect the UI performance
        photoLoaderThread.setPriority(Thread.NORM_PRIORITY-1);

        fileCache=new FileCache(context);
    }

//    final int stub_id=R.drawable.stub;
    public void DisplayImage(String url,ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
        {
            imageView.setBackgroundDrawable(new BitmapDrawable(bitmap));
//            imageView.setImageBitmap(getRoundedCornerBitmap( bitmap, 10,70,70));
//            imageView.setImageBitmap(bitmap);
//            Log.v("first", "first");
        }
        else
        {
            queuePhoto(url, imageView);
//            Log.v("second", "second");

        }    
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        //This ImageView may be used for other images before. So there may be some old tasks in the queue. We need to discard them. 
        photosQueue.Clean(imageView);
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        synchronized(photosQueue.photosToLoad){
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        //start thread if it's not started yet
        if(photoLoaderThread.getState()==Thread.State.NEW)
            photoLoaderThread.start();
    }

   public Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }//Lalit

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    PhotosQueue photosQueue=new PhotosQueue();

    public void stopThread()
    {
        photoLoaderThread.interrupt();
    }

    //stores list of photos to download
    class PhotosQueue
    {
        private Stack<PhotoToLoad> photosToLoad=new Stack<PhotoToLoad>();

        //removes all instances of this ImageView
        public void Clean(ImageView image)
        {
            for(int j=0 ;j<photosToLoad.size();){
                if(photosToLoad.get(j).imageView==image)
                    photosToLoad.remove(j);
                else
                    ++j;
            }
        }
    }

    class PhotosLoader extends Thread {
        public void run() {
            try {
                while(true)
                {
                    //thread waits until there are any images to load in the queue
                    if(photosQueue.photosToLoad.size()==0)
                        synchronized(photosQueue.photosToLoad){
                            photosQueue.photosToLoad.wait();
                        }
                    if(photosQueue.photosToLoad.size()!=0)
                    {
                        PhotoToLoad photoToLoad;
                        synchronized(photosQueue.photosToLoad){
                            photoToLoad=photosQueue.photosToLoad.pop();
                        }
                        Bitmap bmp=getBitmap(photoToLoad.url);
                        memoryCache.put(photoToLoad.url, bmp);
                        String tag=imageViews.get(photoToLoad.imageView);
                        if(tag!=null && tag.equals(photoToLoad.url)){
                            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad.imageView);
                            Activity a=(Activity)photoToLoad.imageView.getContext();
                            a.runOnUiThread(bd);
                        }
                    }
                    if(Thread.interrupted())
                        break;
                }
            } catch (InterruptedException e) {
                //allow thread to exit
            }
        }
    }

    PhotosLoader photoLoaderThread=new PhotosLoader();

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        ImageView imageView;
        public BitmapDisplayer(Bitmap b, ImageView i){bitmap=b;imageView=i;}
        public void run()
        {
            if(bitmap!=null)
                imageView.setBackgroundDrawable(new BitmapDrawable(bitmap));

        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }
    public static Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels,int width,int height) {

        Bitmap output = Bitmap.createBitmap(width,height, Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = pixels;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return output;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:22:34.657

以这种方式更改您的 decodefile 功能...

```
package com.beerbro.utils;

 import java.io.File;
    import java.io.FileInputStream;
    import java.io.FileNotFoundException;
    import java.io.FileOutputStream;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.net.HttpURLConnection;
    import java.net.URL;
    import java.util.Collections;
    import java.util.Map;
    import java.util.Stack;
    import java.util.WeakHashMap;

    import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.drawable.BitmapDrawable;
import android.util.Log;
import android.widget.ImageView;

public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new          WeakHashMap<ImageView, String>());

    public ImageLoader (Context context){
        //Make the background thead low priority. This way it will not affect the UI performance
        photoLoaderThread.setPriority(Thread.NORM_PRIORITY-1);

        fileCache=new FileCache(context);
    }

//    final int stub_id=R.drawable.stub;
    public void DisplayImage(String url,ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
        {
            imageView.setBackgroundDrawable(new BitmapDrawable(bitmap));
//            imageView.setImageBitmap(getRoundedCornerBitmap( bitmap, 10,70,70));
//            imageView.setImageBitmap(bitmap);
//            Log.v("first", "first");
        }
        else
        {
            queuePhoto(url, imageView);
//            Log.v("second", "second");

        }    
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        //This ImageView may be used for other images before. So there may be some old tasks in the queue. We need to discard them. 
        photosQueue.Clean(imageView);
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        synchronized(photosQueue.photosToLoad){
            photosQueue.photosToLoad.push(p);
            photosQueue.photosToLoad.notifyAll();
        }

        //start thread if it's not started yet
        if(photoLoaderThread.getState()==Thread.State.NEW)
            photoLoaderThread.start();
    }

   public Bitmap getBitmap(String url,int size) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f,size);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f,size);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }//Lalit

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f,int size){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=size;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    PhotosQueue photosQueue=new PhotosQueue();

    public void stopThread()
    {
        photoLoaderThread.interrupt();
    }

    //stores list of photos to download
    class PhotosQueue
    {
        private Stack<PhotoToLoad> photosToLoad=new Stack<PhotoToLoad>();

        //removes all instances of this ImageView
        public void Clean(ImageView image)
        {
            for(int j=0 ;j<photosToLoad.size();){
                if(photosToLoad.get(j).imageView==image)
                    photosToLoad.remove(j);
                else
                    ++j;
            }
        }
    }

    class PhotosLoader extends Thread {
        public void run() {
            try {
                while(true)
                {
                    //thread waits until there are any images to load in the queue
                    if(photosQueue.photosToLoad.size()==0)
                        synchronized(photosQueue.photosToLoad){
                            photosQueue.photosToLoad.wait();
                        }
                    if(photosQueue.photosToLoad.size()!=0)
                    {
                        PhotoToLoad photoToLoad;
                        synchronized(photosQueue.photosToLoad){
                            photoToLoad=photosQueue.photosToLoad.pop();
                        }
                        Bitmap bmp=getBitmap(photoToLoad.url,700);
                        memoryCache.put(photoToLoad.url, bmp);
                        String tag=imageViews.get(photoToLoad.imageView);
                        if(tag!=null && tag.equals(photoToLoad.url)){
                            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad.imageView);
                            Activity a=(Activity)photoToLoad.imageView.getContext();
                            a.runOnUiThread(bd);
                        }
                    }
                    if(Thread.interrupted())
                        break;
                }
            } catch (InterruptedException e) {
                //allow thread to exit
            }
        }
    }

    PhotosLoader photoLoaderThread=new PhotosLoader();

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        ImageView imageView;
        public BitmapDisplayer(Bitmap b, ImageView i){bitmap=b;imageView=i;}
        public void run()
        {
            if(bitmap!=null)
                imageView.setBackgroundDrawable(new BitmapDrawable(bitmap));

        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }
    public static Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels,int width,int height) {

        Bitmap output = Bitmap.createBitmap(width,height, Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = pixels;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return output;
    }
} 
```

# c++ - 当一长串字符传递给第一个 cin 时，为什么不暂停第二个 cin 的输入？

> ID：13305163
> 
> 赞同：0
> 
> 时间：2012-11-09T09:19:36.317
> 
> 标签：c++, cin

下面是一些简单 XOR 加密的代码。它提示用户输入消息，后跟密钥，然后使用 128 位块中的密钥对消息进行加密。

当输入一个短的输入（例如 `test`：）作为消息（第一次`cin`调用）时，程序会暂停并按预期等待来自键的输入。

如果我输入一个更长的、文化更丰富的消息（例如：）`Now is the winter of our discontent`，程序会立即从`cin`调用中返回，无法接受输入。知道为什么会这样吗？

```
#include <iostream>
#include <iomanip>
#include "string.h"
#include "assert.h"

using std::cout;
using std::cin;
using std::endl;
using std::string;

string getMessage();
string getPassphrase();
string setKey(string key);
string xorECB(string msg, string key);
char knownPlaintext(char ciphertext, char plaintext);

struct cipherblock
{
    char block[16];
};

int main(void)
{
    string plaintext = getMessage();
    string key = getPassphrase();

    string ciphertext = xorECB(plaintext, key);

    cout << plaintext.size() << endl;
    cout << key.size() << endl;
    cout << ciphertext.size() << endl;

    return 0;
}

string getMessage()
{
    cout << "Message: ";

    string msg;
    cin >> msg;
    cin.ignore();

    return msg;
}

string getPassphrase()
{
    cout << "Key: ";

    string key;
    cin >> key;
    cin.ignore();

    return setKey(key);
}

string setKey(string key)
/// Create 128-bit key from arbitrary-length ASCII passphrase.
{
    if (key.size() == 16)
        return key;

    if (key.size() < 16)
        key += key.substr(0, 16 - key.size());
    else
    {
        string keyxor = key.substr(16, key.size());
        key.erase(16, key.size() - 16);

        for (int i; i < keyxor.size(); i++)
            key[i] ^= keyxor[i];
    }

    return setKey(key); // keys shorter than 8 bytes need to be built recursively
}

string xorECB(string msg, string key)
/// XOR cipher operating in ECB mode, 128-bit block size
{
    assert(key.size() == 16);  // 16 bytes = 128 bits
    //for(int i = 0; i < msg.size(); i++)
        //msg[i] ^= key;

    for (int i = 0; i < msg.size() / sizeof(cipherblock); i++)
    {
        cipherblock *block = (cipherblock*)msg[0];

        for (int idx = 0; idx < key.size(); idx++)
            block->block[idx] ^= (char)key[idx];

        block++;
    }

    return msg;
}

char knownPlaintext(char ciphertext, char plaintext)
{
    return ciphertext ^ plaintext;
} 
```

任何其他评论和批评也很感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:22:31.803

输入运算符在空格处`>>` *停止（即单词之间的空格）。*如果你想得到一整行，你应该使用 eg [`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T10:04:58.337

cin 会在遇到第一个空格后停止处理您的输入。因此，您只会得到一个单词作为输入。

# php - CakePHP 和 XenForo

> ID：13305166
> 
> 赞同：1
> 
> 时间：2012-11-09T09:19:51.700
> 
> 标签：php, cakephp, path, forum

对于我的应用程序，我正在尝试将**XenForo**论坛软件实现到我的**CakePHP**站点中。我已经安装并且系统本身按预期工作`XenForo`。`AppName/app/webroot/community`但是，当去的`http://localhost/AppName/community`时候，它会将我重定向到`http://localhost/AppName/app/webroot/community/`

转到`http://localhost/AppName/community/`（注意尾部斜杠）给了我一个未标记的论坛页面，并显示找不到该页面的错误。

我想防止这种情况发生，并让 XenForo 使用我提供的 URL。我试过设置`<base>`to `<base href="http://localhost/AppName/community/" />`，但没有成功。

XenForo Admin CP 中的 Board URL 也设置为`http://localhost/AppName/community`（没有尾部斜杠）

如果您知道如何解决此问题，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:15:52.383

没有找到我的问题的确切解决方案，但通过将我的社区文件夹从`/app/webroot/`到 root 来解决这个问题`/`。此外，我必须将此行添加到**.HTACCESS**文件中： `RewriteCond %{REQUEST_URI} !^/community(.*)`

**编辑 11-23-2012：**我似乎找到了我正在寻找的解决方案。我将安装移回 /app/webroot 并相应地在我的 vhost 文件中设置 DocumentRoot：

`DocumentRoot C:/wamp/www/sitename/app/webroot`

# php - 如何将日期时间类型显示为这种格式：date("F j, Y, g:i a");？

> ID：13305169
> 
> 赞同：0
> 
> 时间：2012-11-09T09:20:02.087
> 
> 标签：php, mysql, datetime, non-well-formed

我`datetime`在表格中使用了类型，但我不知道如何使用这种格式显示：

```
date("F j, Y, g:i a"); 
```

让它看起来像：2012 年 11 月 9 日，上午 9:17

我试过了

```
echo date("F j, Y, g:i a", $row["date"]); 
```

但我收到此错误：

> 注意：在第 69 行的 C:\wamp\www\crud_exer\content.php 中遇到了格式不正确的数值

我应该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T09:27:52.690

你应该这样做：

```
echo date("F j, Y, g:i a", strtotime($row["date"])); 
```

[PHP：日期 - 手册](http://php.net/manual/es/function.date.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:23:08.830

[date 函数](http://hu.php.net/manual/en/function.date.php)只接受时间戳作为参数。在传递给日期函数之前使用[strtotime](http://hu1.php.net/strtotime)转换您的日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T09:24:33.280

```
$date = new DateTime($row["date"]);

echo $date->format('F j, Y, g:i a'); 
```

这应该可以解决问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T09:24:04.493

你错过了`strtotime()`

```
echo date("F j, Y, g:i a", strtotime($row["date"])); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T09:25:50.187

假设您使用的是 mysql 时间戳.. 尝试

```
$row['date'] = "2009-12-12 11:10:28"; // this is for example only - comment out when tested
echo date("F j, Y, g:i a", strtotime($row['date'])); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T09:25:25.300

在 php 中是格式化日期的函数，该函数也是 DateTime::format() 的别名

```
echo date_format($date, 'g:ia \o\n l jS F Y');
#output: 5:45pm on Saturday 24th March 2012 
```

# scala - Haskell 中的列表理解与 Scala 中的等价物有关吗？

> ID：13305175
> 
> 赞同：5
> 
> 时间：2012-11-09T09:20:22.730
> 
> 标签：scala, haskell, list-comprehension

我正在阅读 Haskell 书籍“Learn You a Haskell for Great Good！”。第 2 章用这个小例子解释了列表推导：

```
boomBangs xs = [ if x < 10 then "BOOM!" else "BANG!" | x <- xs, odd x] 
```

有人可以用 Scala 重写这个列表理解吗？Scala没有偶数或奇数函数？所以我必须使用

```
x%2!=0 
```

检查数字是否奇数？

在此先感谢您提供优雅的解决方案！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T09:26:43.437

即使 Scala 在其标准库中没有`even`或没有`odd`功能（我不确定），实现任何一个都是微不足道的。假设这一点（使其最接近原始 Haskell 版本），Scala 代码可能看起来像

```
val boomBangs = for {
  x <- xs
  if odd x
} yield if (x < 10) "BOOM!" else "BANG!" 
```

免责声明：我暂时无法编译或测试它，所以不能保证它按原样工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T09:33:17.297

作为理解的替代方案，这里有一个基于`filter`and的解决方案`map`：

```
def odd(x: Int) = x % 2 == 1

def boomBangs(xs: Seq[Int]) =
  xs filter odd map {i => if (i < 10) "BOOM!" else "BANG!"}

boomBangs(3 :: 4 :: 5 :: 10 :: 11 :: 12 :: 13 :: Nil)
  // List(BOOM!, BOOM!, BANG!, BANG!) 
```

For-comprehensions 实际上被编译器翻译成`withFilter`,`map`和`flatMap`表达式。

# mockito - 调用when方法时powermock中的NullPointerException

> ID：13305177
> 
> 赞同：2
> 
> 时间：2012-11-09T09:20:33.227
> 
> 标签：mockito, powermock

我似乎无法使用 powermock 模拟公共函数调用的返回。

有人可以帮帮我吗？

失败的路线是

`PowerMockito.doReturn(aa).when(B.class, B.class.getDeclaredMethod("getA"));`

特别是在 " `when`" 方法中

**代码：**

```
import static org.junit.Assert.fail;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
public class PowermockTest {

    private static class A {

        private int number;

        public A(int number) {
            this.number = number;
        }

        public int getNumber() {
            return number;
        }
    }

    private static class B {

        private int number;
        private A a;

        public B(int number) {
            this.number = number;
        }

        public A getA() {
            if (a == null) {
                a = new A(number);
            }
            return a;
        }
    }

    @Test
    public void testOdrService() {
        A aa = PowerMockito.mock(A.class);
        try {
            B bb = new B(3);
            PowerMockito.doReturn(aa).when(B.class, B.class.getDeclaredMethod("getA"));
        } catch (Exception e) {
            fail("Exception in test. " + e.getMessage());
        }
    }

} 
```

**PS：**

将代码更改为以下有效，但它强制创建一个我不想要的虚拟对象

```
B bb = new B(3);
B bb1 = PowerMockito.spy(bb);
PowerMockito.doReturn(aa).when(bb1).getA();
A mockedA = bb1.getA(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T01:13:46.397

```
PowerMockito.doReturn(aa).when(B.class, B.class.getDeclaredMethod("getA")); 
```

此语法专门用于[模拟静态方法](http://powermock.googlecode.com/svn/docs/powermock-1.3.7/apidocs/org/powermock/api/mockito/expectation/PowerMockitoStubber.html#when%28java.lang.Class,%20java.lang.reflect.Method%29)，而不是[模拟实例方法](http://powermock.googlecode.com/svn/docs/powermock-1.3.7/apidocs/org/powermock/api/mockito/expectation/PowerMockitoStubber.html#when%28T,%20java.lang.reflect.Method%29)（如`getA()`.

在大多数情况下，您不需要保留原始（间谍）对象。直接与间谍互动：

```
B bb = PowerMockito.spy(new B(3));
// work with bb as normal
PowerMockito.doReturn(aa).when(bb).getA();
A mockedA = bb.getA(); // mockedA == aa 
```

# javascript - 从 javascript 动态生成的复选框数组未显示选中了哪个复选框

> ID：13305183
> 
> 赞同：1
> 
> 时间：2012-11-09T09:21:17.433
> 
> 标签：javascript, onclick, checkbox, checked

我有以下代码，假设显示那些选中的复选框的值。但是，它似乎并没有按原样工作。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript">

    function myFunction() {
        var checkedvalue = "";
        var arrChecks = document.getElementById("blah");

        for (i = 0; i < arrChecks.length; i++) {
            var attribute = arrChecks[i].getAttribute("blah")
            if (attribute == elementName) {
                // if the current state is checked, unchecked and vice-versa
                if (arrChecks[i].checked) {
                    arrChecks[i].checked = false;
                } else {
                    arrChecks[i].checked = true;
                    checkedvalue = checkedvalue + " " + arrChecks[i].toString();
                }

            } else {
                arrChecks[i].checked = false;
            }
        }

        document.getElementById("demo").innerHTML = checkedvalue;
    }

    function makeCheckboxes(str) {
        var a = document.getElementById("blah");
        var arr = str;
        var returnStr = "";
        for (i = 0; i < arr.length; i++) {
            returnStr += '<input type="checkbox" name="theCheckbox" value="' + arr[i] + '" />' + arr[i];
        }
        a.innerHTML = returnStr;
    }

    window.onload = function () {
        var arrt = ["test1", "test2", "apple", "samsung", "nokia"];

        makeCheckboxes(arrt);
    };

</script>
<style type="text/css"></style>
</head>
<body>
   <table border="1">
      <tr>
         <td id="blah"></td>
         <td>checkboxes should appear left of here</td>
         <button onclick="myFunction()">Click me</button>
         <p id="demo"></p>
      </tr>
   </table>
</body> 
```

如果有善良的灵魂可以启发我，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:52:22.590

getElementByID 总是返回一个元素。你不应该`<p>`在里面包含元素`<td>`。

请使用下面的代码块。这将为您提供所需的输出。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
<script type="text/javascript">

    function myFunction() {
        debugger;
        var checkedvalue = "";
        var arrChecks = document.getElementsByName("theCheckbox");

        for (i = 0; i < arrChecks.length; i++) 
        {
            // if the current state is checked, unchecked and vice-versa
            if (arrChecks[i].checked) {
                arrChecks[i].checked = false;
            } else {
                arrChecks[i].checked = true;
                checkedvalue = checkedvalue + " " + arrChecks[i].getAttribute('value');
            }

        }

        document.getElementById("demo").innerHTML = checkedvalue;
    }

    function makeCheckboxes(str) {
        var a = document.getElementById("blah");
        var arr = str;
        var returnStr = "";
        for (i = 0; i < arr.length; i++) {
            returnStr += '<input type="checkbox" name="theCheckbox" value="' + arr[i] + '" />' + arr[i];
        }
        a.innerHTML = returnStr;
    }

    window.onload = function () {
        var arrt = ["test1", "test2", "apple", "samsung", "nokia"];

        makeCheckboxes(arrt);
    };

</script>
<style type="text/css"></style>
</head>
<body>
   <table border="1">
      <tr>
         <td id="blah"></td>
         <td>checkboxes should appear left of here</td>
         <button onclick="myFunction()">Click me</button>
      </tr>
   </table>

         <p id="demo"></p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:03:50.713

[工作 jsfiddle](http://jsfiddle.net/HnfKa/)。

修复：

*   通过添加调用更改`arrChecks`为复选框数组：`getElementsByTagName`

    `document.getElementById("blah").getElementsByTagName('input');`

*   删除了`getAttribute`行 - 现在您有了实际的复选框，无需过滤

*   将行更改`checkedvalue`为使用`.value`属性，因为我们有一个复选框对象。

结果`myFunction`函数：

```
function myFunction() {
    var checkedvalue = "";
    var arrChecks = document.getElementById("blah").getElementsByTagName('input');

    for (i = 0; i < arrChecks.length; i++) {
        if (arrChecks[i].checked) {
            arrChecks[i].checked = false;
        } else {
            arrChecks[i].checked = true;
            checkedvalue = checkedvalue + " " + arrChecks[i].value;
        }
    }

    document.getElementById("demo").innerHTML = checkedvalue;
} 
```

我担心这里的预期功能；它将所有选中的框更改为未选中，反之亦然。因此，选中一个选项并按下按钮后，选择会被反转，新选中（以前未选中）的选项会列在 div 中。

如果您可以有其他`input`元素（不是复选框），那么您将需要一个警卫：

```
function myFunction() {
    var checkedvalue = "";
    var arrInputs = document.getElementById("blah").getElementsByTagName('input');

    for (i = 0; i < arrChecks.length; i++) {
        if(arrInputs.type != 'checkbox')
            continue;

        var box = arrInputs[i];

        if (box.checked) {
            box.checked = false;
        } else {
            box.checked = true;
            checkedvalue = checkedvalue + " " + box.value;
        }
    }

    document.getElementById("demo").innerHTML = checkedvalue;
} 
```

# ajax - Bootstrap Typeahead 元素 dom 清理

> ID：13305184
> 
> 赞同：1
> 
> 时间：2012-11-09T09:21:19.133
> 
> 标签：ajax, twitter-bootstrap, datepicker, typeahead

我正在使用 Twitter Bootstrap 为我的网站设置样式和脚本。

我的网站由 Ajax 提供支持，因此导航只需将不同的视图加载到 content-element 中。

这些视图有时包含 Typeahead 和 Datepicker，但问题是 Typeahead 和 Datepicker 将自身附加到我网站的正文中。因此，当导航到另一个视图（清空内容元素）时，这些 Typeahead 和 Datepicker 元素仍保留在我的 DOM 中，随着时间的推移而堆积起来。

我目前唯一的解决方案是清理每个新的 ajax 请求，如下所示：

```
$('.typeahead, .datepicker').remove(); 
```

# java - [JPA][JBoss7.1] - Java 使用 JPA 注释扩展了两个表的类 2 Id

> ID：13305186
> 
> 赞同：1
> 
> 时间：2012-11-09T09:21:30.290
> 
> 标签：java, jpa, persistence, jboss7.x

我有一个关于设计问题的问题如下：

1.  模板类包含基本信息

2.  扩展模板类的订阅类

是否可以同时拥有两个 ID - 模板的 1 个 id 字段 - 订阅的 1 个 id 字段

有两个类，数据库中应该有两个表存储并持久化。我的设计是：模板是可重用和持久化的，系统可以创建订阅对象复制表单模板类和订阅类使用生成的不同于模板的Id。

所以“模板”需要一个 ID，“订阅”需要另一个 ID 用于我的应用程序。

非常感谢您的帮助。

和编码如下：

模板类

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
@Table(name="template")
public class Template implements Serializable{

private static final long serialVersionUID = 12345234567867890L;

@Id @GeneratedValue(generator="hibernate-uuid.hex")
@GenericGenerator(name="hibernate-uuid.hex",strategy = "uuid.hex")
@Column(name="id",length = 40)
protected String id;

@NotNull
@Column(name = "template_attribute",length = 32)
protected String template_atrribute;
  ... 
 getter and setter and constructor 
```

并使用我的订阅类代码：

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
@javax.persistence.TableGenerator(name="SID",.................)
@Table(name="user_subscription")
public class UserSubscription extends Template implements Serializable{

@GeneratedValue(strategy=GenerationType.TABLE, generator="SID")
@Column(name="subscriptionId",length = 11)
protected Integer subscriptionId;

@NotNull
@Column(name = "start_date")
protected Date startDate;

//getter and setting and constructor 
```

}

# c++ - Windows 和 Linux 中的可移植代码 C++

> ID：13305187
> 
> 赞同：0
> 
> 时间：2012-11-09T09:21:33.193
> 
> 标签：c++, portability

我想用 C++ 编写必须与 linux 和 windows 兼容的应用程序。要求是我需要在 Linux G++ 编译器中开发并在 Windows 平台上运行它。如果您能为我提供有关如何开始开发的指导，我将不胜感激？要使用哪个 IDE 以及我需要使用哪些库来使代码兼容。此外，我还想在同一个应用程序中开发 UI，所以我应该创建哪种类型的项目（就像我做的 Java 中的 Web 项目）谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:33:11.477

我的建议是使用[Qt](http://qt-project.org/)。它是跨平台的，具有良好的 IDE（Qt Creator），并允许创建 GUI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:59:17.973

最好的 IDE 是 Unix 开发环境本身：您并不真正想要所有限制您选择的 GUI 东西。如果您刚刚开始，最好避免处理 makefile 等，但如果您担心可移植性，那么无论如何您都必须处理它们。

其余的，可移植性取决于您的应用程序必须做什么。您可以使用可移植的标准 C++ 做很多事情。您仍然必须处理不同编译器实现标准的不同版本的事实，或多或少都很好，但是如果您坚持使用 C++03，您应该不会遇到太多问题。

然而，有很多标准 C++ 没有涵盖的内容。两个系统之间的套接字接口（用于网络）非常相似，将其包装在隐藏差异的 C++ 类中应该不会太难。诸如读取目录或线程之类的事情可以使用 Boost 来完成，它隐藏了差异。如果您需要事务完整性，则需要包装文件访问，因为两个系统之间的函数名称和参数非常不同。（我什至不确定在 Windows 下是否可以实现事务完整性。） GUI 界面完全不同。你最好的选择是使用像 wxWidgets 这样的便携式 GUI 界面。

最后，无论您采取了多少预防措施，都希望在移植时有些事情不会立即起作用。（或者正如曾经表达过的那样：“唯一可移植的代码是已经移植的代码。”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T09:25:59.600

eclipse 或 QtCreator 可能是您的选择，您也可以使用 MINGW 并配置环境并使用 emacs 来完成您的任务

# android - android adobe air 删除 MovieClip

> ID：13305190
> 
> 赞同：1
> 
> 时间：2012-11-09T09:21:41.100
> 
> 标签：android, air, adobe, movieclip

我在 Flash 中制作了一个 TowerDefens，并想在我的 Android 手机上使用它，所以我将它发布为 adobe air 3.4 for Android。它工作了，我可以在手机上玩我的游戏，而且 MouseEvents 在手机上工作得很好，但是当它没有像在 Flash 10.3 上那样删除所有镜头时

镜头是一个 MoveClip，我尝试使用函数 removeChild() 从 _root 中删除它们，之后我将 Bullet 设置为 null，但您仍然可以在屏幕上看到它。

这是错误部分的图片

![在此处输入图像描述](../Images/7fbb194c8562949577e72d8138093bc3.png)

道路上的白点应该被删除

如果应该将其删除，这就是我的子弹类。

```
public function removeMe():void{
   this.removeEventListener(Event.ENTER_FRAME, eFrame);;
   _root.removeChild(this);
   _root.killMe(this);
   System.gc();
} 
```

杀死这个班级

```
function killMe(obj:Object):void{
    obj = null;
} 
```

如果您需要教育部信息，可以给您，谢谢。

// 编辑：路上的点在闪烁。

# android - 使用 Cygwin-terminal 用 tess-2 构建 NDK 继续失败并停止

> ID：13305194
> 
> 赞同：2
> 
> 时间：2012-11-09T09:21:54.860
> 
> 标签：android, android-ndk, cygwin

好吧，我正在开发一个移动应用程序项目（Android），并且（不幸的是）我需要使用 Tesseract OCR，所以我需要安装 NDK。

无论如何，我正在使用 Windows Vista x64、Android SDK 4.1.2 API16。我已经下载了 NDK r8 并解压到 D:/Android_NDK

我得到了 tess-two，在路径中提取了它的文件：C:/Tess-two/tess-two-master

我还获得了 Cygwin setup.exe，运行它，将文件安装到 C:/Cygwin，并获得了 gdb、gcc-core、gcc-g++、make、swig 库，在我尝试构建 ndk 之前一切都很好使用 cygwin 我得到以下信息：

1-构建它的第一个试验开始在 cygwin 屏幕上显示记录，最后它给出了这个：

```
SharedLibrary  : liblept.so
d:/android_ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld.
exe: cannot find ./obj/local/armeabi/libgnustl_static.a: Permission denied
collect2: ld returned 1 exit status
/cygdrive/d/Android_NDK/build/core/build-binary.mk:378: recipe for target `obj/local/armeabi/liblept.so' failed
make: ***[obj/local/armeabi/liblept.so] Error 1 
```

2-秒试试给我看这个：

```
cygwin warning:
  MS-DOS style path detected: c:/android-ndk-r8b/ndk-build
  Preferred POSIX equivalent is: /cygdrive/c/android-ndk-r8b/ndk-build
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
obj/local/armeabi/objs/lept/pix.o.d:1: multiple target patterns.  Stop. 
```

3-之后它继续向我展示：

```
obj/local/armeabi/objs/lept/pix.o.d:1:  ***multiple target patterns.  Stop. 
```

怎么了？问题是什么 ？？

非常感谢您的帮助。

# struts - 我的动作是用 Struts2 jQuery Plugin 执行

> ID：13305202
> 
> 赞同：0
> 
> 时间：2012-11-09T09:22:19.713
> 
> 标签：struts, struts2-jquery, struts2-json-plugin

我正在为 ajax 和小部件使用 Struts2 jQuery Plugin 3.2.1。当我使用 sj 动作时，我的动作需要时间来执行。没有 Struts2 jQuery tags ，它工作正常。我在网上搜索，但找不到合适的答案。请分享您的观点。提前致谢。

*   在本地服务器中它工作正常。

*   sj 动作意味着，当我单击 struts 2 jquery 按钮标签时，它会调用一个动作。

*   花费时间意味着，目标jsp需要花费时间来加载。

    ```
     <s:url id="increasedaycount" action="AddDayAction"/> <!--when i click on this button one action call but in target result jsp taking time to be appear -->
                <sj:submit
                    href="%{increasedaycount}"
                    button="true"
                    value="Add Day"
                    indicator="indicator"
                    targets="idRightMainDiv"
                    ></sj:submit>
       <img id="indicator" src="images/indicatorS.gif" alt="Loading..." style="display:none"/> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:52:41.677

如果它在您的本地服务器上运行良好，则可能是某种网络问题，而不是代码问题（代码在一台机器上运行良好，而在另一台机器上运行良好......）。

尝试查看从非本地服务器到 Internet 的网络设置，并确保您没有通过 CDN（库的远程托管）读取 jQuery 库，您应该将它们物理地放入您的 Web 应用程序中......

# javascript - 我如何添加根路径Javascript

> ID：13305204
> 
> 赞同：0
> 
> 时间：2012-11-09T09:22:28.167
> 
> 标签：javascript, asp.net, jquery-blockui

如何在 Javascript 中引用根路径，例如：

```
$.blockUI.defaults.growlCSS['background'] = 'url(~/Styles/images/check48.gif) no-repeat 10px 10px #000; '; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:47:55.423

Biju想知道如何在javascript中解决这个问题，一种方法是：

```
var path = window.location.protocol + '//' + window.location.host + '/'; // or whatever you want to set it to
$.blockUI.defaults.growlCSS['background'] = 'url(' + path + 'Styles/images/check48.gif) no-repeat 10px 10px #000; '; 
```

# nullpointerexception - 无法访问除表单以外的任何对象，NullPointerException 错误

> ID：13305211
> 
> 赞同：3
> 
> 时间：2012-11-09T09:22:56.357
> 
> 标签：nullpointerexception, lwuit

我正在使用最新版本的 LWUIT (1.5)。我在资源编辑器中设计了我的表单，然后将代码生成到 netbeans。问题是如果我想访问除我收到此错误的表单之外的任何对象：

> com.sun.lwuit.util.UIBuilder$FormListener.actionPerformed(UIBuilder.java:第2231章(Button.java:364) 在 com.sun.lwuit.Button.released(Button.java:395) 在 com.sun.lwuit.Button.released(Button.java:384) 在 com.sun.lwuit.Button。 keyReleased(Button.java:413) at com.sun.lwuit.Form.keyReleased(+64) at com.sun.lwuit.Display.handleEvent(Display.java:1533) at com.sun.lwuit.Display.edtLoopImpl( Display.java:826) 在 com.sun.lwuit.Display。mainEDTLoop(Display.java:776) 在 com.sun.lwuit.RunnableWrapper.run(RunnableWrapper.java:119)

这是我的代码：

```
protected void onCtnCalculation_BtnAddAction(Component c, ActionEvent event) {
        // If the resource file changes the names of components this call will break notifying you that you should fix the code
        super.onCtnCalculation_BtnAddAction(c, event);
        Form root = Display.getInstance().getCurrent();
        TextField txtAmount = findTxtAmount(root);
        fltAmount += Float.parseFloat(txtAmount.getText());
    } 
```

我也试过这个：

```
fltAmount += Float.parseFloat(findTxtAmount(root).getText()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:41:04.090

文本金额字段是当前表单还是其他表单中的组件。如果它是不同的形式，那么这将不起作用。

# asp.net - ASPNET WebForms 服务器控件在 Page_Load 中为 NULL

> ID：13305213
> 
> 赞同：18
> 
> 时间：2012-11-09T09:22:59.293
> 
> 标签：asp.net, webforms, nullreferenceexception

我有一个非常奇怪的情况，我的标签控件在 Page_Load 中为 NULL。它甚至应该是可能的吗？

我有一个网络表单：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="MyNamespace.Templates.Pages.WebForm1" %>
<%@ Register TagPrefix="cw" Namespace="MyNamespace.Templates.Units" Assembly="MyNamespace" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div style="background-color:yellowgreen;">
        FIRST
    </div>
    <div style="background-color: wheat;">
        SECOND
        <cw:ArticleColumn runat="server" ID="ac" ArticleID="1899"/>
    </div>
    </form>
</body>
</html> 
```

在 web 表单的 Page_Load 中，我简单地做了一个

```
if(!IsPostBack) DataBind(); 
```

用户控件 ArticleColumn 如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ArticleColumn.ascx.cs"  Inherits="MyNamespace.Templates.Units.ArticleColumn" %>
<h2><asp:Label runat="server" ID="myArticleHeading" Text="TOM" /></h2>
<p><asp:Label runat="server" ID="myArticleIntro" Text="TOM" /></p>
<asp:Label runat="server" ID="myArticleBody" Text="TOM" /> 
```

后面的代码是这样的：

```
public partial class ArticleColumn : UserControlBase<PageTypes.ArticleBase>
{
    public int ArticleID { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        var page = DataFactory.Instance.GetPage(new PageReference(ArticleID));

        myArticleHeading.Text = page.PageName;
        myArticleIntro.Text = page.Property["IntroText"] != null
                            ? page.Property["IntroText"].ToWebString()
                            : string.Empty;
        myArticleBody.Text = page.Property["MainBody"] != null
                            ? page.Property["MainBody"].ToWebString()
                            : string.Empty;

        DataBind();
    }
} 
```

当我尝试设置 myArticleHeading.Text 时失败，因为控件为空。这怎么可能？控件的 ASP.NET 自动绑定一定以某种方式失败了......

我尝试过： - 重新启动 VS 2010 - 切换构建配置 - 清理/重建 - 更改控件的名称以便更新设计器文件。

不用说，以上都不起作用。

编辑：添加堆栈跟踪：

```
[NullReferenceException: Object reference not set to an instance of an object.]
   MyNamespace.Templates.Units.ArticleColumn.Page_Load(Object sender, EventArgs e) in C:\DevProjects\CustomerWeb\Main\Source\MyNamespace\Templates\Units\ArticleColumn.ascx.cs:21
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Control.LoadRecursive() +146
   System.Web.UI.Control.LoadRecursive() +146
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

解决方案：我自己找到了答案。对页面上的用户控件使用此声明解决了问题：

```
<%@ Register TagPrefix="cw" TagName="ArticleColumn" Src="~/Templates/Units/ArticleColumn.ascx" %> 
```

这个错误的声明是使用 ReSharper 右键菜单从 html 视图添加的：

```
<%@ Register TagPrefix="cw" Namespace="MyNamespace.Templates.Units" Assembly="MyNamespace" %> 
```

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-27T14:56:21.597

我在上面回答了我自己的问题。

解决方案：我自己找到了答案。对页面上的用户控件使用此声明解决了问题：

```
<%@ Register TagPrefix="cw" TagName="ArticleColumn" Src="~/Templates/Units/ArticleColumn.ascx" %> 
```

这个错误的声明是使用 ReSharper 右键菜单从 html 视图添加的：

```
<%@ Register TagPrefix="cw" Namespace="MyNamespace.Templates.Units" Assembly="MyNamespace" %> 
```

谢谢您的帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T09:06:38.867

DataBind 是用于将用aspx 部分编写的控件与服务器端脚本（即<% %>）绑定的东西。

但是您的方案不需要调用 databind()。只需将值分配给控件就可以正常工作。

尝试从代码中删除数据绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T02:03:14.690

从页面更新用户控件的内容。

在用户控件中声明属性以更新标签内容并将页面中的这些属性与用户控件实例一起使用。

# matlab - 如何将浮点数与共同编写的字符串分开 - matlab

> ID：13305220
> 
> 赞同：2
> 
> 时间：2012-11-09T09:23:16.913
> 
> 标签：matlab, scanf, textscan

我有一个关于在 matlab 中读取 txt 文件的问题，格式未知，但 txt 文件中的每一行总是这样开始：

```
2012-11-01 00:00:00.00 XX YY  00.000s 
```

然后记录一些不同的东西，txt 文件可能看起来不同，例如

```
Ex1:    2012-11-01 00:00:00.00 XX YY  00.000s  000.00deg  0.00rpm  0.00rpm
Ex2:    2012-11-01 00:00:00.00 XX YY  00.000s  000.00deg  0.00rpm   
Ex3:    2012-11-01 00:00:00.00 XX YY  00.000s  0.00deg 0.00rpm 0.00rpm 0.0deg      
Ex4:    2012-11-01 00:00:00.00 XX YY  00.000s  0.00rpm 
```

我处理`textscan`并使用：

```
Fid = fopen('text.txt');
initfrm = {'%s%s%s%s %.3f %s'};
frm = repmat('%.2f %s',1,NCol);
frm = strcat(initfrm, frm);
Tmp = textscan(fid,frm{1});
Fclose(fid); 
```

`NCol`在文件中，它计算了我们记录 了多少 col ( )，但这里没有显示

但有时文本文件包括`0.0%`，例如：

```
Ex1:    2012-11-01 00:00:00.00 XX YY  00.000s 000.00deg   0.00rpm  0.00rpm  0.0% 
```

现在`'%.2f'`行不通了。我不知道日志什么时候是这样的。有没有更好的方法将浮动和字符串打印在一起时分开；我只想收集数据（浮点数），以便绘制。

当它随 %.2f 和 %.1f 变化时，如何获得所有浮点值；你不知道模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:25:07.220

像这样导入文本可能会很痛苦；通常，这是对您的字符串操作知识的一个很好的测试 :)

我相信以下命令会做得很好：

```
% Read in entire file as string
fid = fopen('yourFile.txt');
    C = textscan(fid, '%s', 'delimiter', '');
fclose(fid);
C = C{1};

% Remove first part (from column 39 onwards in your example; 
% adjust to match your actual data)
C = cellfun(@(x)x(39:end), C, 'UniformOutput',false);

% Remove unwanted junk
% NOTE: this removes all occurrences of 'rpm', 'deg', 
% 's', and the trailing '0.0%'
C = regexprep(C, {'deg' 'rpm' 's' '([0-9]+\.[0-9]+%)$'}, '');

% Tokenize string and convert to double
C = cellfun(@(x)textscan(x, '%f'), C); 
```

我对此进行了测试`yourFile.txt`：

```
Ex1:    2012-11-01 00:00:00.00 XX YY  00.000s  000.00deg  0.00rpm  0.00rpm
Ex2:    2012-11-01 00:00:00.00 XX YY  00.000s  000.00deg  0.00rpm   
Ex3:    2012-11-01 00:00:00.00 XX YY  00.000s  0.00deg    0.00rpm  0.00rpm 0.0deg      
Ex3:    2012-11-01 00:00:00.00 XX YY  00.000s  0.00deg    0.00rpm  0.00rpm 0.0deg    0.0%
Ex4:    2012-11-01 00:00:00.00 XX YY  00.000s  0.00rpm
Ex4:    2012-11-01 00:00:00.00 XX YY  00.000s  0.00rpm 
```

上面命令的最终内容`C`是

```
>> C{:}
ans =
     0
     0
     0
     0
ans =
     0
     0
     0
ans =
     0
     0
     0
     0
     0
ans =
     0
     0
     0
     0
     0
ans =
     0
     0
ans =
     0
     0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:49:17.843

我不确定我是否正确解释了您的问题。在我看来，每行文本中都有可变数量的标记，N 或 N+1（也许是 N+m？）。

如果是这样，我会建议一种基于从每一行中提取标记的方法。

考虑一下：

1.  您用来[`fgets`](http://www.mathworks.it/it/help/matlab/ref/fgets.html) 从文件中提取每一行；
2.  您用于[`strtok`](http://www.mathworks.it/it/help/matlab/ref/strtok.html)迭代*地*分离标记（即，*标记*您的字符串。您`' '`用作标记分隔符）；
3.  因为你有一个固定的初始模式，你可能想要重新合并前 N 个标记并像你已经做的那样解析它们。然后，您可能想要检查位置 N+1 中的标记是否存在并最终解析它。

# android - Numeric keyboard is not working in android 4.0.3 and above versions

> ID：13305221
> 
> 赞同：0
> 
> 时间：2012-11-09T09:23:19.150
> 
> 标签：android, jquery, html, cordova

I am working on android phonegap application. My phonegap version is 2.2.0\. I am using `<input type="number">` to open numeric keyboard..It is working fine on versions below 4.0.3 but when I test my application on an android 4.0.3 device, the numeric keyboard is not working.

I also tried to replace `<input type="number">` to ** and also added `<meta name = "format-detection" content = "telephone=no">` line on head but it's still not working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:37:59.083

Support with Android is qualified as buggy :-(

See [quirksmode](http://www.quirksmode.org/html5/inputs_mobile.html#t04).

# javascript - 从位置名称数组一次加载和播放多个文件

> ID：13305223
> 
> 赞同：3
> 
> 时间：2012-11-09T09:23:26.407
> 
> 标签：javascript, web-audio-api

```
window.onload = init;

var list = new Array(); //array containing list of music sources
var playListBuffer = new Array(); //array to put in all decoded audio
var playList = new Array();
var context = new webkitAudioContext();

function init(){
    list = ["../media/cello_suit.mp3","../media/morning.mp3"]; //list of files to play at once
    load(list);
}

function load(url){
    for (var i=0; i<list.length; i++){ //load in every url
        var request = new XMLHttpRequest();
        request.open('GET', list[i], true);
        request.responseType = 'arraybuffer';

        request.onload = function () { //Async method
                console.log(request.response);
                context.decodeAudioData(request.response, function(buffer) {    //Async method
                    if (!buffer) {
                        alert('error decoding file data: ');
                        return;
                    }

                    playListBuffer.push(buffer);                                //Decode audio and put inside playListBuffer
                    if (list.length==playListBuffer.length){
                        console.log(playListBuffer);                            //When All files have been decoded show an Array in console
                        prepare();
                    }
                                                                        },  function(e) { console.log('Error decoding audio file', e)});

        };

        request.onerror = function() {
            alert('BufferLoader: XHR error');
        }

        request.send();
    }

}

function prepare(){
    for (var i=0; i<playListBuffer.length; i++){ 
        var source = context.createBufferSource();              // creates a sound source
        console.log(playListBuffer[i]);
        source.buffer = playListBuffer[i];                      // tell the source which sound to play
        source.connect(context.destination);                    // connect the source to the context's destination (the speakers)
        playList.push(source);
    }
    playAll();
}

function playAll(){
    for (var i=0; i<playList.length; i++){ 
        playList[i].noteOn(0); 
    }
} 
```

你好; 我对这个使用新的 webaudio api 的基本脚本有一些奇怪的行为。此脚本在 chrome 中引发错误：未捕获错误：SYNTAX_ERR：DOM Exception 12 audio.js:27 request.onload；但是，如果我删除列表中的第二个元素，它会起作用。为什么？

背景信息：此脚本读取一系列歌曲位置并同时播放它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:02:52.380

您需要使用“this”，因为变量“request”将在 for 循环的第二次迭代中被覆盖。

```
context.decodeAudioData(request.response,
  // ---->
context.decodeAudioData(this.response, 
```

# c# - 将数据表中的特定行添加到datagridview？

> ID：13305227
> 
> 赞同：0
> 
> 时间：2012-11-09T09:23:45.180
> 
> 标签：c#, .net, datagridview

我有一个包含 1000 行的数据表，现在我想将此数据表中的第一个索引和最后一个索引之间的行范围添加到我的数据网格视图中。我该如何做到这一点？

数据表还包含有关我始终希望在 datagridview 中维护的列的信息。

PS：First Index 和 Last Index 是一些整数变量。这是在使用 .net 平台的 c# 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:30:04.970

假设您想使用第 100 到 200 行作为数据源，您可以使用`Enumerable.Skip/Take`：

```
datagridView1.DataSource = table.AsEnumerable()
                                .Skip(100)
                                .Take(100)
                                .CopyToDatatable(); 
```

从 startIndex 到 endIndex `Enumerable.Where`：

```
datagridView1.DataSource =  table.AsEnumerable()
                                 .Where((r, i) => i >= startIndex && i <= endIndex)
                                 .CopyToDatatable(); 
```

记得添加`using System.Linq;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:33:57.983

您可以对数据使用过滤器来限制`DataGridView`. 做一些像

```
DataTable tmpDt = GetDataTable();
BindingSource source2 = new BindingSource();
source2.DataSource = tmpDt;
source2.Filter = "columnValue < 100 AND columnValue > 200";
dataGridView2.DataSource = source2; 
```

这种方法的优点是过滤器不会破坏您的基础数据。您`Filter`可以更新显示在`DataGridView`.

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:30:42.997

谷歌搜索给了我以下准备使用的文章，

如何：将数据绑定到 Windows 窗体 DataGridView 控件 - [http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx](http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx)

[http://www.switchonthecode.com/tutorials/csharp-tutorial-binding-a-datagridview-to-a-database](http://www.switchonthecode.com/tutorials/csharp-tutorial-binding-a-datagridview-to-a-database)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:34:11.463

像这样试试

```
DataRow[] rw = myDataTable.Select("#" + firstindex+ "# >= FirstIndexCol 
                                     AND SecondIndexCol <= #" + SecondIndex+ "#"); 
```

# android - 如何在android中以编程方式禁用数据连接？

> ID：13305234
> 
> 赞同：1
> 
> 时间：2012-11-09T09:24:21.457
> 
> 标签：android

> **可能重复：**
> [以编程方式启用/禁用android中的数据连接](https://stackoverflow.com/questions/11555366/enable-disable-data-connection-in-android-programmatically)

需要一种解决方案，以在 android 中以编程方式禁用移动数据连接以停止互联网连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:29:27.040

`Intent`实际上这不是一个好主意，相反，您应该要求您的用户通过从操作[设置](http://developer.android.com/reference/android/provider/Settings.html)列表中触发通讯员来手动禁用此选项。希望这可以帮助。

# php - sqlsrv_connect：未找到数据源名称且未指定默认驱动程序

> ID：13305242
> 
> 赞同：1
> 
> 时间：2012-11-09T09:25:09.637
> 
> 标签：php, sql-server, sql-server-2008, wamp

我在将 PHP 与在远程计算机上运行的 SQL SERVER 2008 连接时遇到了困难。我有 php 版本 5.4.3 和 apache 2.2.22。我的计算机上已经运行了 SQL SERVER 2008。我的 wamp\bin\php\php5.4.3\ext 文件夹中包含以下文件：

*   php_sqlsrv_54_ts.dll
*   php_pdo_sqlsrv_54_ts.dll

在运行简单的代码时

```
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if( $conn )
{
 echo "Connection established.\n";
}
else
{
 echo "Connection could not be established.\n";
 die( print_r( sqlsrv_errors(), true));
} 
```

我收到以下错误：

```
Connection could not be established. Array (
    [0] => Array (
        [0] => IMSSP [SQLSTATE] => IMSSP
        [1] => -49 [code] => -49
        [2] => This extension requires the Microsoft SQL Server 2012 Native Client. Access the following URL to download the Microsoft SQL Server 2012 Native Client ODBC driver for x86: http://go.microsoft.com/fwlink/?LinkId=163712 [message] => This extension requires the Microsoft SQL Server 2012 Native Client. Access the following URL to download the Microsoft SQL Server 2012 Native Client ODBC driver for x86: http://go.microsoft.com/fwlink/?LinkId=163712
    )
    [1] => Array (
        [0] => IM002 [SQLSTATE] => IM002 
        [1] => 0 [code] => 0
        [2] => [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified [message] => [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified
    )
) 
```

但我不知道为什么我被要求安装**Microsoft SQL Server 2012 Native Client**。

php我试过[这个链接](https://stackoverflow.com/a/9921725/1465910)但没有成功。

提前致谢。

***更新 1：***

我下载了 php 5.3.1 并按照[本教程操作](http://forum.ragezone.com/f723/setup-wampserver-mssql-841598/)，脚本就像一个魅力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:27:44.670

根据[要求](http://php.net/manual/en/sqlsrv.requirements.php)：SQLSRV 扩展要求 Microsoft SQL Server 2012 Native Client 安装在运行 PHP 的同一台计算机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T11:00:19.567

安装 ODBC 驱动程序（[https://www.microsoft.com/en-us/download/details.aspx?id=36434](https://www.microsoft.com/en-us/download/details.aspx?id=36434)）。现在我可以 **访问远程 MSSQL Server，而无需**在我的计算机中安装 MSSQL Server

# android - JSoup html解析 - 在解析之前只下载html页面的一部分（不是整个）？

> ID：13305245
> 
> 赞同：1
> 
> 时间：2012-11-09T09:25:14.673
> 
> 标签：android, html, html-parsing, jsoup

我有一个应用程序，它正在解析一些 html 页面。现在我这样做：

1.  我加载整个html（当然没有资源，只是纯html）

2.  我只解析我需要的元素（这是页面的一小部分）

3.  做一些工作

我需要的是**不要下载完整的 html**，因为它很大，我只需要它的一小部分 - 我只想**下载网页的一部分**，这可能吗？这是因为事实上，移动设备上的互联网连接速度通常要慢得多，而且数据限制也小得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:33:53.590

您可以解析所需的元素，然后使用“Jsoup.parseBodyFragment()”方法。

可以参考[http://jsoup.org/cookbook/input/parse-body-fragment](http://jsoup.org/cookbook/input/parse-body-fragment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:51:10.053

如果你想，比如说，只下载页面的中间，那是不可能的。如果您知道您需要的数据在前 n 个字节内，您可能会使用 URLConnection 和提供的输入流来传输前 n 个字节的数据。然后将该流的内容转换为可以输入 JSoup 的字符串，并希望它可以解析该片段。

# hadoop - namenode支持多少并发读写？

> ID：13305251
> 
> 赞同：0
> 
> 时间：2012-11-09T09:25:34.567
> 
> 标签：hadoop, hdfs

有谁知道hdfs并发读写？如何计算并发读写数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:44:12.083

这取决于很多变量（硬件、节点数量、工作流程）。

我建议安装[Ganglia](http://ganglia.info/)来监控你的集群并观察它的行为。

# visual-studio-2010 - 解释 nuget 服务器和 nuget 包背后的基本原理

> ID：13305252
> 
> 赞同：0
> 
> 时间：2012-11-09T09:25:35.670
> 
> 标签：visual-studio-2010, deployment, nuget

有人可以解释 nuget 服务器和 nuget 包背后的基本原理吗？我只在 Visual Studio 中使用 nuget 来下载 nunit 和其他附加组件，以增强我的 Visual Studio 体验。但是，它似乎比这更强大。例如与其他系统的集成，例如 TeamCity、Octopus 的一键部署等。亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:49:38.847

NuGet 确实能够不仅仅是“只是”一个包管理器。我只是想为您提供一些可能对您有帮助的资源的更多指示：

*   我写了很多[关于 NuGet 的博](http://www.xavierdecoster.com)文，其中一篇涵盖[了整个 NuGet 生态系统](http://www.xavierdecoster.com/post/2011/09/30/an-overview-of-the-nuget-ecosystem)
*   有一本书是关于 NuGet ( [Apress Pro NuGet](http://bit.ly/ProNuGet) )：它还涵盖了 Chocolatey、OctopusDeploy 和使用 NuGet 作为协议的 Web 架构。
*   还有[MyGet.org](http://www.myget.org)（NuGet 即服务）

希望这些可以帮助您充分利用 NuGet。

# iphone - iphone内容管理系统

> ID：13305253
> 
> 赞同：0
> 
> 时间：2012-11-09T09:25:38.207
> 
> 标签：iphone, objective-c, xcode, ipad

目前已经为我的门户网站开发了一个 .NET CMS。可以在 XMLParsing 的帮助下将相同的 CMS 用于 iphone 应用程序，还是应该在 xcode 中开发新的 CMS。我是 iphone 开发的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:30:22.940

CMS应该在服务器端开发。建议使用 iPhone App 作为移动接口，从服务器端获取数据并将命令发送到服务器端。

中间的通信可以使用 XML 或 JSON 甚至 SOAP 。

# android - ActionBarSherlock - 从另一个选项卡更新时刷新选项卡

> ID：13305255
> 
> 赞同：1
> 
> 时间：2012-11-09T09:25:50.983
> 
> 标签：android, tabs, refresh, actionbarsherlock, swipe

在我的应用程序中，我使用库**ActionBarSherlock**，并且我有 3 个选项卡并使用滑动手势（在示例中捕获）。

例子 ：

*   我去标签 n°2，并更改一些参数。
*   如果我立即转到选项卡 n°3，则不会重新加载此选项卡的视图。
*   我需要转到 n°1，然后导航到 n°3 以刷新它们。

如果我在 n°2 上更新某些内容，我需要找到如何刷新我的标签 n°3。

# javascript - 请动态禁用区域地图

> ID：13305262
> 
> 赞同：0
> 
> 时间：2012-11-09T09:26:02.653
> 
> 标签：javascript, jquery, html, map, area

如何**动态**禁用区域？举个简单的例子，假设我将单击一个特定的象限区域，并且该区域（不是整个地图）保持禁用状态，直到我单击一个单独的按钮输入。如果地图区域有一个“禁用”属性会很好......但我知道没有。任何人都可以帮助我解决问题吗？

```
 <img id="square_img" src="images/square.png" usemap="#square" class="chart_class">
    <map id="square_map" name="square">
        <area id="quadrant1" shape="poly"  class="area_class" coords="206,10, 300,10, 388,10, 388,100, 388,196, 300,196, 206,196, 206,100" href="#" title="Quadrant1"></area>
        <area id="quadrant2" shape="poly"  class="area_class" coords="13,10, 100,10, 194,10, 194,100, 194,196, 100,196, 13,196, 13,100" href="#" title="Quadrant 2"></area>
        <area id="quadrant3" shape="poly"  class="area_class" coords="13,208, 100,208, 194,208, 194,300, 194,387, 100,387, 13,387, 13,200" href="#" title="Quadrant 3"></area>          
        <area id="quadrant4" shape="poly"  class="area_class" coords="206,208, 300,208, 388,208, 388,300, 388,387, 300,387, 206,387, 206,300" href="#" title="Quadrant 4"></area>   
    </map>
<input type="button" value="restore"/> 
```

我尝试使用`$(this).attr('onclick','return false;');`- 那没有用。

不过我有一些想法：有一个`coords_temp`与`coords`. 与`$('area').click()`我将设置`coords`为`0,0,0,0`. 如果我想再次启用它，我将使用其中的值`coords_temp`并将其设置`coords`为。它可以工作，但是如果假设我有很多地图区域，它不会造成这么多的开销吗？而且`0,0,0,0`还是不能点击？非常困难，但它仍然可以点击，对吧？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:15:29.127

我建议您单击它后添加它首先删除您不想拥有的那个

```
function addCoord(){
    var elem = '<area id="quadrant1" shape="poly"  class="area_class" coords="206,10, 300,10, 388,10, 388,100, 388,196, 300,196, 206,196, 206,100" href="#" title="Quadrant1"></area>';
    var addElementTo = document.getElementById("square_map");
    addElementTo.innerHTML=elem;
} 
```

只需将该功能添加到您的 onlclick 事件中。

请注意，我选择了第一个，因为我不知道您以后要添加哪个。

# php - PHP SOAP 调用中止连接

> ID：13305265
> 
> 赞同：1
> 
> 时间：2012-11-09T09:26:12.357
> 
> 标签：php, soap, wsdl

以下 php 肥皂调用：

```
$retVal = parent::__soapCall($function_name, $arguments, $options, $input_headers, $output_headers); 
```

变量如下：

```
 1\. $function_name = "query"
 2\. $arguments = Array ( [0] => Array ( [store] => Array ( [scheme] => workspace [address] => SpacesStore ) [query] => Array ( [language] => lucene [statement] => PATH:"app:company_home" ) [includeMetaData] => ) )
 3\. $options = Array ( )
 4\. $input_headers = Array ( [0] => SoapHeader Object ( [namespace] => http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd [name] => Security [data] => [mustUnderstand] => 1 ) ) 
 5\. $output_headers = Array ( ) 
```

不工作，并导致连接中止。当然，我无法获得`$retVal`内容，因为脚本执行在`__soapCall`. 我不是`SOAP`. 我什至不知道它是否缺少一些库（到目前为止它根本没有工作，新服务器安装）：open-ssl、curl 和soap 扩展都已安装并启用。

有没有人可以就为什么脚本应该崩溃而不是提供一些视频错误提供一些建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:39:12.717

大概这是[SoapClient::__soapCall](http://php.net/manual/en/soapclient.soapcall.php)

任何错误日志中是否出现任何内容？

尝试使用以下函数寻找线索：

1.  [__getLastRequest](http://www.php.net/manual/en/soapclient.getlastrequest.php)（使用它来检查 XML 看起来是否正确）
2.  [__getLastRequestHeaders](http://www.php.net/manual/en/soapclient.getlastrequestheaders.php)（如上）
3.  [__getLastResponse](http://www.php.net/manual/en/soapclient.getlastresponse.php)（听起来可能是空的，但值得一试）
4.  [__getLastResponseHeaders](http://www.php.net/manual/en/soapclient.getlastresponseheaders.php)（如上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:35:34.227

解决方案是我错过了导致调用终止的 php 扩展。

缺少的类是 DOMdocument 并且安装它非常容易（而不是检测它）：

```
yum -y install lib-xml
service httpd restart 
```

缺少获得的lib，一切正常。

# c++ - 用什么代替异常？

> ID：13305267
> 
> 赞同：-2
> 
> 时间：2012-11-09T09:26:25.103
> 
> 标签：c++, exception

我正在使用 c++ 并且我处于一组非常嵌套的函数中，并且发生了一种特殊情况，我想退出到顶层。

现在我听说 c++ 异常现在已被弃用，那么在这种情况下我应该使用什么来代替？

所以我真正要问的是，`setjmp()`在`longjmp()`C++ 代码中是否正常？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T09:28:04.287

C++ 异常**不**被弃用，只有异常规范被弃用。
两者是有区别的。您应该使用 RAII 和异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T09:50:50.677

如果可能的话，我会避免`setjmp/longjmp`在 C++ 代码中像大多数 C 语言一样使用 。据我所知，对于 C++ 异常，它们并*没有*被弃用。事实上，我认为在不严重阻碍向后兼容性的情况下，要弃用这样一个普遍的特性是非常困难的。您可能听说过（某种形式的）异常*规范*，~~这是最新的 C++11 标准的一个特性，该特性在该语言的先前版本中不存在，~~在批准过程中已被弃用（参见，例如，[this发表](http://herbsutter.com/2010/03/13/trip-report-march-2010-iso-c-standards-meeting/)在 Herb Sutter 的博客上）。

这就是说，C++ 中的异常不好用。C++ 有很多特性，有时它们以非常复杂的方式相互作用。一些必要（但不充分）的建议是：

*   `std::exception`从;派生你的例外
*   通过 RAII 管理您的资源；
*   通过引用而不是通过值或指针捕获。

但最好的建议是：准确了解异常是如何工作的——预先确定的建议效果不佳。为此，您可能会阅读[this](http://www.codeproject.com/Articles/38449/C-Exceptions-Pros-and-Cons#3_2)、[this](http://www.parashift.com/c++-faq/exceptions.html)、[this](https://rads.stackoverflow.com/amzn/click/com/020163371X)和[this](https://rads.stackoverflow.com/amzn/click/com/0321334876)以了解如何使用异常和 RAII。特别是“更有效的 C++”有一整章专门讨论异常，揭示了看似简单的代码片段的一些复杂后果。它提高了你对语言的整体意识。

# java - 散列 64 位整数

> ID：13305272
> 
> 赞同：4
> 
> 时间：2012-11-09T09:26:52.917
> 
> 标签：java, hash

我有 64 位正整数（范围从 0 到 2 ^(63) - 1），我想将它们散列成 32 位正整数（0 到 2 ^(31) - 1 范围）。

我的数据具有**高斯**分布。任何人都可以建议一个散列函数来为这个分布提供少量的冲突吗？

（*原始问题在[这里](https://stackoverflow.com/questions/13304764/unsigned-64-bit-to-unsigned-32-bit-hash-functions)，我已经改进了。*）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:01:17.747

**您可以首先通过（预期的）累积**分布函数映射您的输入数据，然后输出（预期）均匀分布的结果。然后，您可以将该数据放入常规的 64 到 32 位散列函数中。

![在此处输入图像描述](../Images/34b6cba8c0ed8c50b41e166a5cfd4fa7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:44:36.147

基于 Long 的哈希值，它是一个 64 位整数。

```
int hash = (int) ((l >>> 32) ^ l); 
```

顺便说一句：[高斯分布](https://www.google.co.uk/search?q=gaussian%20distribution)是有符号的，我认为它不适合无符号值。

如果你有一些遵循高斯分布的东西已经被缩放和移动，那么低 32 位可能仍然是完全随机的。（取决于比例）如果低 32 位是随机的，那么高位是什么（它们都可以是 0）并不重要，并且散列仍然是伪随机的。

顺便说一句：即使您的哈希在转换为 32 位值时是唯一的，您也必须进一步减少它以节省内存（除非您有自己的 2^32 大小的哈希表）这意味着在进一步减少值之后对于一些合理的东西，例如样本数量的两倍，你会遇到一些冲突（除非你的 64 位值比你需要的多得多）

# zend-framework - Zend Framework 1 中的下拉菜单

> ID：13305273
> 
> 赞同：0
> 
> 时间：2012-11-09T09:26:57.977
> 
> 标签：zend-framework, drop-down-menu, navigation

我想在使用 ZF 1.X 的网站构建中实现下拉菜单

在我的 application/layouts/layout.phtml 我有电话

```
$this->navigation()->menu()->renderMenu(   
    $this->navigation()->findByLabel('My Account'),
    array('maxDepth' => 0)
); 
```

在 myapp/Controller/Plugin/Navigation.php 我看到标有“我的帐户”的菜单：

```
$account_container = new Zend_Navigation_Page_Mvc(
            array(
                  'route' => 'account_index',
                  'label' => 'My Account',
                  'pages' => array(
                        new Zend_Navigation_Page_Mvc(
                            array(
                            'route' => 'productions_list',
                            'label' => 'My Productions',
                            )
                        ),
                        new Zend_Navigation_Page_Mvc(
                            array(
                                'route' => 'productions_create',
                                'label' => 'Create a Production',
                            )
                        ),
                        new Zend_Navigation_Page_Mvc(
                            array(
                                'route' => 'account_inbox',
                                'label' => sprintf('My Inbox (%s)', $ident->getAllUnreadMessagesCount()),
                                'id' => 'inbox-count'
                            )
                        ),
                        new Zend_Navigation_Page_Mvc(
                            array(
                                 'route' => 'search_search_productions',
                                 'label' => 'Search Productions'
                            )
                        ),
                        new Zend_Navigation_Page_Mvc(
                            array(
                                 'route' => 'search_search_users',
                                 'label' => 'Search Users'
                            )
                        ),
                  )
            )
        ); 
```

这会产生

```
<ul class="navigation"> 
    <li class="active"><a href="/news">Blog</a></li>
    ...
    ...
</ul> 
```

我需要像这样使用 UL 添加嵌套级别：

```
<ul class="navigation"> 
    <li class="active">
        <a href="/news">Blog</a>
        <ul>
            <li><a href="/somethingelse">link</a></li>
            ...
            ...
        </ul>
    </li>
    ...
    ...
</ul> 
```

这样做的方法是什么？我需要这个在javascript中生成一个下拉菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:30:04.607

我找到了解决方案，'maxDepth' => 1 还不够，

需要它在子数组中实现新页面：

```
$account_container = new Zend_Navigation_Page_Mvc(
        array(
              'route' => 'account_index',
              'label' => 'My Account',
              'pages' => array(
                    new Zend_Navigation_Page_Mvc(
                        array(
                        'route' => 'productions_list',
                        'label' => 'My Productions',
                        'pages' => array(
                            new Zend_Navigation_Page_Mvc(
                            array(
                                'route' => 'mychildurl',
                                'label' => 'My Child Label',
                            )
                        ),
                        )
                    ), 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T10:22:33.357

我想你只需要设置：

`'maxDepth' => 1`

而不是0。

# c++ - 带有模板参数的 C++ 函数用 basetype 实例化

> ID：13305274
> 
> 赞同：2
> 
> 时间：2012-11-09T09:27:05.980
> 
> 标签：c++, templates

我有以下类结构和一个模板化的包装类。

```
class A {};
class B : public A {};

template<class T>
class Foo {
  T val;
public:
  Foo(T t) {val = t};
  T get() {return val};
} 
```

现在，我需要一个函数来处理存储在模板中的值，但我不能修改模板本身。我想要的是一个签名类似于

```
void process(Foo<A>*) {/* do something */} 
```

我想像这样使用它

```
B b; Foo<B> foo(b);
process(&foo); 
```

但是，这不起作用，因为编译器不知道如何转换`Foo<B>*`为`Foo<A>*`. 是否有任何解决方法来修复流程功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:30:48.283

制作`process`函数模板：

```
template <typename T> void process(Foo<T>*) 
```

在函数模板中，您可以使用 typename `T`，就好像它是 class 一样`A`。然后，函数模板也适用于所有调用`Foo<B>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:40:58.540

虽然`B`是 a-kind-of `A`，`Foo<B>`但不是 a-kind-of `Foo<A>`。

苹果是一种水果。一袋苹果也是一袋水果吗？不，因为你可以把一个梨放在一袋水果里。

在您的情况下，您不能在创建后将任何内容放入包装器中，因此此参数不起作用。但是 C++ 编译器不够聪明，无法解决这个问题。在 Scala 等其他语言中，您实际上可以完成这项工作。

您可以制作`process`模板，但有时您不能，因为例如它是某个类中的虚函数。

通过一些简单易行的手工工作和模板元编程，实际上可以使`Foo<Derived>`工作像`Foo<Base>`. 手动工作将涉及拆分`Foo`为接口和实现部分。

```
// Instead of class B : public A, use class B : public DiscoverableBase<A>
// Doesn't cost you anything. Won't work with multiple inheritance, where 
// scattered-inheritance or similar technique must be adopted.

#include <cstdlib> 
template <typename B>
struct DiscoverableBase : public B
{
    typedef B Base;
};

struct Void {};

// This fetches Base member type out of T, or Void if there's none.
// Probably could be simplified a bit.
template <typename T>
class BaseOf
{
    typedef char yes;
    typedef struct { char a[2]; } no;

    template <typename Q, size_t> struct GetBase;

    template <typename Q>
    struct GetBase<Q, sizeof(no)>
    {
        typedef Void Base;
    };

    template <typename Q>
    struct GetBase<Q, sizeof(yes)>
    {
        typedef typename T::Base Base;
    };

    template <typename C> static yes check(typename C::Base*) ;
    template <typename C> static no  check(...);
  public:
    typedef typename GetBase<T, sizeof(check<T>(0))>::Base Base;
};

// This is how you use DiscoverableBase.
class A {};
class B : public DiscoverableBase<A> {};

// Foo is a bit more complicated now. 
template<typename T> class Foo;

// The base case, inherited by Foo<X> where X has no discoverable base
template<> class Foo<Void> {};

// This is the Foo interface. Note how it retuns a reference to T now.
template<typename T>
class Foo : public Foo<typename BaseOf<T>::Base>
{
  public:
    virtual T& get() = 0;
};

// This is the Foo implementation.
template<typename T>
class FooImpl : public Foo<T>
{
    T val;
  public:
    FooImpl(T t) {val = t;}
    T& get() {return val;}
};

// the rest is mostly unchanged
void process(Foo<A>*) {/* do something */}

int main()
{
    B b; FooImpl<B> foo(b);
    process(&foo);
} 
```

# android - Android AsyncTask 进度百分比的问题

> ID：13305280
> 
> 赞同：1
> 
> 时间：2012-11-09T09:27:39.083
> 
> 标签：android, json, android-asynctask, percentage, android-sqlite

我想不出一种计算进度百分比的方法。我正在使用 JSON 来检索数据，然后所有数据都将插入到 sqlite 中。我想在运行 asynctask 时计算所有过程并显示百分比。

```
@Override
    protected Void doInBackground(Void... params) {
    //int progress = 0;  //progress testing
    //while(progress < 100) {
    //progress += 10;
    //SystemClock.sleep(1000);
    //publishProgress(progress);
    //}
        getAllChannels(); //function get json data and insert db.
        return null;
    }
...
public void getAllChannels(){
    try {
            headline = jsheadline.getJSONArray(TAG_NEWLIST);
            headline2 = jsheadline2.getJSONArray(TAG_NEWLIST2); 
            headline3 = jsheadline3.getJSONArray(TAG_NEWLIST3); 
            insertDatabase(headline,TABLE_HEADLINE);
            insertDatabase(headline2,TABLE_HEADLINE2);
            insertDatabase(headline3,TABLE_HEADLINE3);
            }catch (Exception e) {
            }
}

public void insertDatabase(JSONArray total, String tablename) throws JSONException{
    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
         for(int i = 0; i < total.length(); i++){
            JSONObject c = total.getJSONObject(i);
            // Storing each json item in tablecolumn
            String subject = c.getString(KEY_NEWS_SUBJECT);
                     db.addNews(tablename, subject);
} 
```

这是我如何将数据存储到 sqlite 的示例。请指导我。编辑：如果涉及多个插入？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:43:18.790

`onProgressUpdate`支持多个参数：

```
 protected void onProgressUpdate(Integer... progress) {
     int current = progress[0];
     int total = progress[1];

     float percentage = 100 * (float)current / (float)total;

     // Display your progress here
 } 
```

你可以有这样的处理方法：

```
protected Void doInBackground(Void... params) {
    JSONArray headlines = jsheadline.getJSONArray(TAG_NEWLIST);
    int count = headlines.length();
    for (int i=0; i<count; ++i) {
        // Insert a single item in the DB
        JSONObject headlineItem = headlines.getJSONObject(i);
        insertDatabase(headlineItem);

        // We have processed item 'i' out of 'count'
        publishProgress(i, count);

        // Escape early if cancel() is called
        if (isCancelled()) break;
    }
    return null;
} 
```

您还有一个关于[SDK 文档的示例](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:35:53.490

进度报告有点主观，并且根据您的任务正在做什么变化很大，但对于您的情况，您可以使用`for`来计算。

```
private int progress;
private int max;

max = total.length()
for(int i = 0; i < total.length(); i++){
   progress = i;
   publishProgress(progress);
} 
```

# scrapy - scrapy 在 PyPy 上抛出 send_catch_log_deferred 异常

> ID：13305283
> 
> 赞同：0
> 
> 时间：2012-11-09T09:27:52.963
> 
> 标签：scrapy, pypy

当我在 PyPy 上使用 scrapy shell 时，它会抛出一些 Execption ，那么这个错误是什么？这是错误信息

```
 % /usr/local/share/pypy/scrapy shell http://www.baidu.com             
    zsh: correct 'shell' to 'shells' [nyae]? n
    2012-11-09 16:40:06+0800 [scrapy] INFO: Scrapy 0.16.1 started (bot: scrapybot)
    2012-11-09 16:40:06+0800 [scrapy] DEBUG: Enabled extensions: TelnetConsole, WebService, CloseSpider, CoreStats, SpiderState
    2012-11-09 16:40:06+0800 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
    2012-11-09 16:40:06+0800 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
    2012-11-09 16:40:06+0800 [scrapy] DEBUG: Enabled item pipelines: 
    2012-11-09 16:40:06+0800 [scrapy] ERROR: Error caught on signal handler: <bound method instance.start_listening of <scrapy.telnet.TelnetConsole instance at 0x00000001063f0bc0>>
        Traceback (most recent call last):
          File "/usr/local/Cellar/pypy/1.9/site-packages/twisted/internet/defer.py", line 1045, in _inlineCallbacks
            result = g.send(result)
          File "/usr/local/Cellar/pypy/1.9/site-packages/scrapy/core/engine.py", line 75, in start
            yield self.signals.send_catch_log_deferred(signal=signals.engine_started)
          File "/usr/local/Cellar/pypy/1.9/site-packages/scrapy/signalmanager.py", line 23, in send_catch_log_deferred
            return signal.send_catch_log_deferred(*a, **kw)
          File "/usr/local/Cellar/pypy/1.9/site-packages/scrapy/utils/signal.py", line 53, in send_catch_log_deferred
            *arguments, **named)
        --- <exception caught here> ---
          File "/usr/local/Cellar/pypy/1.9/site-packages/twisted/internet/defer.py", line 134, in maybeDeferred
            result = f(*args, **kw)
          File "/usr/local/Cellar/pypy/1.9/site-packages/scrapy/xlib/pydispatch/robustapply.py", line 47, in robustApply
            return receiver(*arguments, **named)
        exceptions.TypeError: start_listening() got 2 unexpected keyword arguments 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:27:00.180

据我所知，scrapy 使用 lxml。只有非常新的 lxml 有效（还有 PyPy 主干，而不是 PyPy 1.9），我建议尝试一下。

# visual-studio-2012 - 添加键盘快捷键以在 Visual Studio 2012 中打开构建视图

> ID：13305284
> 
> 赞同：2
> 
> 时间：2012-11-09T09:27:53.063
> 
> 标签：visual-studio-2012, keyboard-shortcuts

我想知道是否有用于在 Team Explorer 中显示 Builds 视图的 Visual Studio 命令，以便我可以将键盘快捷键绑定到它。
例如，我能够创建绑定到 View.TfsPendingChanges 命令的`CTRL`+ `W`、`CTRL`+快捷方式，该命令直接在团队资源管理器中显示 Pending Changes 视图。`G`

编辑：由于答案并不明显，因此命令 TeamFoundationContextMenus.Commands.GoToBuilds 是我正在寻找的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:41:06.580

有一个命令。工具 > 选项 > 环境 > 键盘 > Build.ViewControllerQueue 是你想要的，但是如果你设置一个快捷方式并尝试执行它，你会得到：

> 组合键（组合）绑定到当前不可用的命令（视图控制器队列）。

我不知道如何解决这个问题。到目前为止，我发现进入 Build Explorer 的最简单方法是`Ctrl`+ `0`，`Ctrl`+`B`会调出 Team Explorer 的 Builds 页面，然后您可以点击 Actions > Manage Queue。

有趣的是，如果您如上所述设置快捷方式，它实际上会作为快捷方式显示在 Actions 上下文菜单中，但它不起作用。

# android - ORMLite id 生成

> ID：13305289
> 
> 赞同：5
> 
> 时间：2012-11-09T09:28:04.920
> 
> 标签：android, ormlite

我有这个对象：

```
public class Set {
    @DatabaseField(columnName = "setID", generatedId = true)
    private int setID;
    @DatabaseField(columnName = "setName")
    private String setName;
} 
```

如果我制作这样的对象：

```
Set newSet = new Set("name");
setDao.create(newSet); 
```

然后，如果我这样做：

```
int id = newSet.getID(); 
```

我会得到集合 id 还是应该从数据库中获取整个对象

```
setDao.queryForEq("setName", "name"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T17:14:07.653

所以 ORMLite 文档非常广泛。如果您在文档中查找[generated-id，](http://ormlite.com/docs/generated-id)您会看到以下语句：

> 布尔字段是否为自动生成的 id 字段。默认为假。一个类中只有一个字段可以有此设置。这告诉数据库为插入的每一行自动生成一个相应的 id。**当使用Dao.create() 方法创建具有生成ID 的对象时，数据库将为该行生成一个ID，该ID 将由create 方法返回并设置在对象中。**

因此，在您调用 之后`setDao.create(newSet)`，`newSet`对象的`setID`字段将使用数据库中的 id 进行更改。

此外，调用字段`setID`是一种非常糟糕的模式。我建议只使用`id`.

# python - MurmurHash 有纯 python 实现吗？

> ID：13305290
> 
> 赞同：24
> 
> 时间：2012-11-09T09:28:06.357
> 
> 标签：python, hash, murmurhash

我需要（并且找不到）[MurmurHash](https://sites.google.com/site/murmurhash/)的纯python（无c ++）实现，而且我自己写得太新手了。速度或内存使用对我的项目无关紧要。

[我在这里](http://code.google.com/p/tropo/source/browse/trunk/Python/tr_minhash/my_murmur.py)找到了一个尝试，但它仅限于 31 位散列，我真的需要 64 位散列。

注意：对于那些需要快速实现的人，这里有一个 MurmurHash2 库[和](http://pypi.python.org/pypi/mmh3/2.0)[一个](http://pypi.python.org/pypi/Murmur/0.1.3)MurmurHash3 库

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T01:50:11.860

这是未经测试的（对不起！），但这是我想出的一个版本。Python 允许使用任意大的整数，因此我为前 8 个字节（或 64 位）创建了一个掩码，然后我将其（通过按位与）应用于所有可能产生大于 64 位整数的算术结果。也许其他人可以评论一般方法和字节序等可能存在的问题。

```
def bytes_to_long(bytes):
    assert len(bytes) == 8
    return sum((b << (k * 8) for k, b in enumerate(bytes)))

def murmur(data, seed):

    m = 0xc6a4a7935bd1e995
    r = 47

    MASK = 2 ** 64 - 1

    data_as_bytes = bytearray(data)

    h = seed ^ ((m * len(data_as_bytes)) & MASK)

    for ll in range(0, len(data_as_bytes), 8):
        k = bytes_to_long(data_as_bytes[ll:ll + 8])
        k = (k * m) & MASK
        k = k ^ ((k >> r) & MASK)
        k = (k * m) & MASK
        h = (h ^ k)
        h = (h * m) & MASK

    l = len(data_as_bytes) & 7

    if l >= 7:
        h = (h ^ (data_as_bytes[6] << 48))

    if l >= 6:
        h = (h ^ (data_as_bytes[5] << 40))

    if l >= 5:
        h = (h ^ (data_as_bytes[4] << 32))

    if l >= 4:
        h = (h ^ (data_as_bytes[3] << 24))

    if l >= 3:
        h = (h ^ (data_as_bytes[4] << 16))

    if l >= 2:
        h = (h ^ (data_as_bytes[4] << 8))

    if l >= 1:
        h = (h ^ data_as_bytes[4])
        h = (h * m) & MASK

    h = h ^ ((h >> r) & MASK)
    h = (h * m) & MASK
    h = h ^ ((h >> r) & MASK)

    return h 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-29T05:51:29.007

修复 Nikolas 版本中的错误

```
def bytes_to_long(bytes):
    assert len(bytes) == 8
    return sum((b << (k * 8) for k, b in enumerate(bytes)))

def murmur64(data, seed = 19820125):

    m = 0xc6a4a7935bd1e995
    r = 47

    MASK = 2 ** 64 - 1

    data_as_bytes = bytearray(data)

    h = seed ^ ((m * len(data_as_bytes)) & MASK)

    off = len(data_as_bytes)/8*8
    for ll in range(0, off, 8):
        k = bytes_to_long(data_as_bytes[ll:ll + 8])
        k = (k * m) & MASK
        k = k ^ ((k >> r) & MASK)
        k = (k * m) & MASK
        h = (h ^ k)
        h = (h * m) & MASK

    l = len(data_as_bytes) & 7

    if l >= 7:
        h = (h ^ (data_as_bytes[off+6] << 48))

    if l >= 6:
        h = (h ^ (data_as_bytes[off+5] << 40))

    if l >= 5:
        h = (h ^ (data_as_bytes[off+4] << 32))

    if l >= 4:
        h = (h ^ (data_as_bytes[off+3] << 24))

    if l >= 3:
        h = (h ^ (data_as_bytes[off+2] << 16))

    if l >= 2:
        h = (h ^ (data_as_bytes[off+1] << 8))

    if l >= 1:
        h = (h ^ data_as_bytes[off])
        h = (h * m) & MASK

    h = h ^ ((h >> r) & MASK)
    h = (h * m) & MASK
    h = h ^ ((h >> r) & MASK)

    return h 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-30T14:53:22.367

这是 MurmurHash3 32 的纯 Python 实现，它只对字符串进行哈希处理，但可以很容易地改用字节数组。这是该算法的[Java 版本](https://svn.apache.org/repos/asf/mahout/trunk/math/src/main/java/org/apache/mahout/math/MurmurHash3.java)的一个端口。

```
def murmur3_x86_32(data, seed = 0):
    c1 = 0xcc9e2d51
    c2 = 0x1b873593

    length = len(data)
    h1 = seed
    roundedEnd = (length & 0xfffffffc)  # round down to 4 byte block
    for i in range(0, roundedEnd, 4):
      # little endian load order
      k1 = (ord(data[i]) & 0xff) | ((ord(data[i + 1]) & 0xff) << 8) | \
           ((ord(data[i + 2]) & 0xff) << 16) | (ord(data[i + 3]) << 24)
      k1 *= c1
      k1 = (k1 << 15) | ((k1 & 0xffffffff) >> 17) # ROTL32(k1,15)
      k1 *= c2

      h1 ^= k1
      h1 = (h1 << 13) | ((h1 & 0xffffffff) >> 19)  # ROTL32(h1,13)
      h1 = h1 * 5 + 0xe6546b64

    # tail
    k1 = 0

    val = length & 0x03
    if val == 3:
        k1 = (ord(data[roundedEnd + 2]) & 0xff) << 16
    # fallthrough
    if val in [2, 3]:
        k1 |= (ord(data[roundedEnd + 1]) & 0xff) << 8
    # fallthrough
    if val in [1, 2, 3]:
        k1 |= ord(data[roundedEnd]) & 0xff
        k1 *= c1
        k1 = (k1 << 15) | ((k1 & 0xffffffff) >> 17)  # ROTL32(k1,15)
        k1 *= c2
        h1 ^= k1

    # finalization
    h1 ^= length

    # fmix(h1)
    h1 ^= ((h1 & 0xffffffff) >> 16)
    h1 *= 0x85ebca6b
    h1 ^= ((h1 & 0xffffffff) >> 13)
    h1 *= 0xc2b2ae35
    h1 ^= ((h1 & 0xffffffff) >> 16)

    return h1 & 0xffffffff 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-27T14:27:59.300

MurmurHash3 的另一个纯 python 实现，完全兼容并可以被 mmh3 包装器替换，但仍仅限于 32 位 Murmur3： [https ://github.com/wc-duck/pymmh3](https://github.com/wc-duck/pymmh3)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-22T10:03:34.130

我建议更改`bytes_to_long`函数，以便可以使用少于 8 个字节的值：

```
def bytes_to_long(bytes):
    length = len(bytes)
    if length < 8:
        extra = 8 - length
        bytes = b'\000' * extra + bytes
    assert len(bytes) == 8
   return sum((b << (k * 8) for k, b in enumerate(bytes))) 
```

这将填充`bytearray`Null 字节，以便断言仍然可以按预期工作（您现在可以将其删除），但允许转换较小的值。

# c# - 如何在接口中获取 C# Enum 就像 C 一样？

> ID：13305291
> 
> 赞同：4
> 
> 时间：2012-11-09T09:28:19.367
> 
> 标签：c#, interface, enums

我习惯了 C 中的枚举，仍然对 C# 中如何处理它们感到有些困惑。我想在 C# 中实现一个看起来像的接口

```
enum foo {
  one,
  two 
}

interface Ibar {
  enum foo {get;}
} 
```

当获取属性 foo 时，实现接口 Ibar 的类将返回 foo.one 或 foo.two。所以，例如

```
class bar : Ibar {
  enum foo {
    get { return foo.one; }
  }
} 
```

我能做到

```
bar b = new bar;
if (b.foo == foo.one) {... } 
```

上面的接口代码希望我在接口内定义枚举（它说';'应该是'，'）。

我能找到的最接近的帖子是[http://bytes.com/topic/c-sharp/answers/524824-enum-property-interface](http://bytes.com/topic/c-sharp/answers/524824-enum-property-interface)但枚举是在类中定义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:30:43.157

我认为你想要的语法是这样的：

```
enum Foo
{
    One,
    Two 
}

interface IBar
{
    Foo Foo { get; }
} 
```

结果是一个具有名为`Foo`type的属性的接口`Foo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:31:43.640

你想要的语法是：

```
enum foo { one, two }

interface Ibar { foo foo { get; } }

class bar : Ibar { foo foo { get { return foo.one; } } } 
```

你只`enum`用来*定义*一个新的枚举；创建成员变量时，您使用已创建的枚举的*名称*。

但是，最好不要将成员变量命名为与枚举类型相同的名称：

```
enum FooEnum { One, Two }

interface IBar { FooEnum FooValue { get; } }

class Bar : IBar { FooEnum FooValue { get { return FooEnum.one; } } } 
```

（请注意，我只使用`Enum`并`Value`澄清了哪个是枚举类型，哪个是值，不要这样做。）

（另外，我认为这更像是通常的 C# 大小写约定。）

# jquery - 在 jquery 中的第 5 个 td 之后插入另一行

> ID：13305295
> 
> 赞同：0
> 
> 时间：2012-11-09T09:28:42.280
> 
> 标签：jquery, jquery-selectors

在 OpenCart 中，当我在更多数量的产品中显示折扣时，它以默认方式显示在一行中。但我试图改变外观并使它像这样

```
<div class="discount">
  <table>
    <tr>
      <?php foreach ($discounts as $discount) { ?>
        <td class="test">
          <?php echo sprintf($text_discount, $discount['quantity'], $discount['price']); ?>
        </td>
      <?php } ?>
    </tr>
  </table>
</div> 
```

当连续 5 次折扣时，这里显示正常。但现在我想在第 5 个 td 之后插入另一行。我想在另一个 tr 中显示另外 5 个 tds。那么有人可以帮助我如何在 jQuery 中做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:00:14.057

如果您只想在最后一个 tr 之后添加另一个 tr ，那么这将完成......

```
$("<tr />").insertAfter(".discount table tr:last")​​​​​​​​​​​​​​​​​​​​​​​​​; 
```

它里面没有细胞，所以你也需要添加它们，你可以这样做......

```
$("<tr><td/><td/><td/><td/><td/></tr>").insertAfter(".discount table tr:last")​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:31:43.460

```
$(".discount table tr td:eq(4)").after("<tr><td>.....</td></tr>"); 
```

尝试这样的事情

如果您想`tr` `td`在第 5 次之后插入，请`tr`使用此

```
$(".discount table tr:eq(4)").after("<tr><td>.....</td></tr>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:35:09.397

```
$(".discount table tr td:nth-child(5)").append("</tr><tr>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:50:59.367

更容易在 php 上连续 5 个得出结论

```
<div class="discount">
    <table>
         <?php for ($i = 0; $i < count($discounts); ) { ?>
              <tr>
                   <?php for ($j = 0; $j < 5 && $i < count($discounts); $j++, $i++) { ?>
                        <td class="test">
                            information
                        </td>
                   <?php } ?>
              </tr>
         <?php } ?>
    </table>
</div> 
```

# ios - NSManagedObject [GHUnit] 的单元测试

> ID：13305298
> 
> 赞同：2
> 
> 时间：2012-11-09T09:28:46.993
> 
> 标签：ios, unit-testing, nsmanagedobject, gh-unit

我是 Java 开发人员，我曾经将我的 Java 实体测试为 POJO。现在，使用 Obj-C，我想对继承自 NSManagedObject 的实体执行相同的操作（我使用 CoreData 进行持久化）。

例如，我想测试我的客户实体：

```
-(void)myTest {
Customer *customer = [Customer alloc] init];
customer.name = @"toto";
GHAssertEqualStrings(customer.name, @"toto", @"");
} 
```

但我遇到的错误是：

**NSInvalidArgumentException 原因：-[Customers setName:]: unrecognized selector sent to instance ...**

因此，我已经使用适当的数据库架构 url 在 setUp 中加载了所有 NSManagedObjectContext 。现在我将我的客户实例化为它并且它可以工作：

```
Customers *customer = [NSEntityDescription
insertNewObjectForEntityForName:kDataBaseCustomerKey inManagedObjectContext:ctx]; 
```

但这是测试*“POJO”*的合适方法吗？我想在不加载任何模型的情况下测试我的 Customer 类，因为在这种情况下我不关心数据模型。

谢谢你的建议。

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:56:02.287

这取决于您要测试的内容。从概念上将核心数据模型与现实生活中的实现分开有些困难。所以我通常在单元测试代码中构建自己的堆栈。另一方面，如果您真的在测试仅依赖于`NSManagedObject`子类实现的代码，那么我认为您概述的方法没有任何问题。

作为参考，如果您对如何为单元测试重新创建堆栈感兴趣，这就是我的做法。（我刚刚注意到您使用的是`GHUnit`而不是`OCUnit`- 它应该是相同的，但您可能需要确保该模型包含在`GHUnit`应用程序的捆绑资源中。

创建一个继承自`SenTestCase`并在那里构建您的核心数据堆栈的类`NSInMemoryStoreType`：

```
@implementation CCFCoreDataTestCase {
    NSManagedObjectModel *_mom;
    NSPersistentStoreCoordinator *_psc;
    NSManagedObjectContext *_moc;
    NSPersistentStore *_store;
}

@synthesize managedObjectContext = _moc;

- (void)setUp {
    [super setUp];

    NSArray *bundles = [NSArray arrayWithObject:[NSBundle bundleForClass:[self class]]];
    _mom = [NSManagedObjectModel mergedModelFromBundles:bundles];
    _psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:_mom];

    _store = [_psc addPersistentStoreWithType:NSInMemoryStoreType configuration:nil URL:nil options:nil error:NULL];
    STAssertNotNil(_store,@"Unable to create in-memory store");

    _moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    [_moc setPersistentStoreCoordinator:_psc];
}

- (void)tearDown {
    [super tearDown];
    _mom = nil; _psc = nil; _moc = nil; _store = nil;
} 
```

所有涉及核心数据的测试用例都应该继承自这个子类。假设您使用的是内存存储类型，并且每次测试都构建和拆除模型，您可以最小化任何依赖关系并从每个测试的未填充模型开始。当然，没有关于性能的承诺。

**编辑：**

我发现这篇文章在处理核心数据对象的单元测试时很有帮助 -[单元测试核心数据驱动的应用程序](http://iamleeg.blogspot.com/2009/09/unit-testing-core-data-driven-apps.html)

**编辑2：**

Graham Lee（上述帖子的作者）有另一篇关于单元测试不依赖于模拟的核心数据对象的帖子。看到[这个](http://iamleeg.blogspot.com/2010/01/unit-testing-core-data-driven-apps-fit.html) 我上面描述的模式和他在第二个链接中所做的比较一致。

# php - CodeIgniter 的 Twitter 登录

> ID：13305299
> 
> 赞同：0
> 
> 时间：2012-11-09T09:28:53.077
> 
> 标签：php, codeigniter, twitter

我正在使用以下库来实现 twitter codeigniter。 [https://github.com/vixnet/codeigniter-twitter](https://github.com/vixnet/codeigniter-twitter)

我可以转到 twitter 授权 url，在那里我提供了 twitter 的登录凭据，在接受它时，我将根据带有参数 access_token 和 access_verifier 的 GET 请求的程序被重定向到我的回调 url。

但我无法在作为回调 url 的控制器中获取这些参数。

可以请任何人提供任何意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:00:05.640

Codeigniter 弄乱了你的`$_GET`

我正在重新创建它：`$_GET = get_get();`

```
function get_get()
{
    $parts = explode("?", $_SERVER['REQUEST_URI']);
    if(!isset($parts[1])) 
    {
        return array();
    }
    $params = explode("&", $parts[1]);
    foreach($params as $par)
    {
        $par = explode("=", $par);
        if(!isset($par[1]))
        {
            $par[1] = '';
        }
        $__GET[$par[0]] = $par[1];
    }
    return $__GET;
} 
```

# c# - 当 Assembly 在 CurrentDomain 中时，为什么会调用 AssemblyResolve？

> ID：13305301
> 
> 赞同：2
> 
> 时间：2012-11-09T09:29:07.413
> 
> 标签：c#, .net, appdomain, .net-assembly

我有一种情况，`AppDomain.CurrentDomain.AssemblyResolve`需要使用已加载到当前域的程序集调用`Assembly.Load(myAssemblyMemStream.ToArray())`.

这是为什么？

我需要执行以下操作才能使其正常工作。这与 .NET 自动执行的操作有何不同？

```
Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
{
    return AppDomain.CurrentDomain
                    .GetAssemblies()
                    .First(x => x.FullName == args.Name);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:37:39.470

加载上下文[http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57143.aspx)。加载 byte[] 不会导致其他加载上下文中的程序集能够看到它。这是一项安全功能。

# python - 使用搜索 API Python - Google App Engine 大表

> ID：13305302
> 
> 赞同：5
> 
> 时间：2012-11-09T09:29:06.907
> 
> 标签：python, google-app-engine, search, bigtable, gae-search

我想将 Search API 与已使用定义模型 ( `db.Model`) 的应用程序一起使用。

例如，假设我的模型如下所示：

> ```
> class Greeting(db.Model):
>     author = db.StringProperty()
>     content = db.StringProperty()
>     date = db.DateTimeProperty() 
> ```

现在如何使用 Search API 来查询`Greeting`实体？

我已经阅读[了文档](https://developers.google.com/appengine/docs/python/search)，但老实说我不明白。

请给我一个非常简单的例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T10:13:36.873

你没有。

搜索 API 需要搜索您创建的“文档”，而不是数据存储中的模型。

1.  构建具有字段结构的文档以描述您希望搜索的数据
2.  创建要搜索的文档索引
3.  构造查询以搜索索引
4.  构建搜索请求以针对应用程序中的文档运行查询 评分结果并自定义其向用户的呈现

您必须编写一个转换器，从您的模型中加载数据并创建可搜索的文档，然后将其放入索引中。

EG 从文档中创建一个文档：

```
from google.appengine.api import search

search.Document(
    doc_id='document id',
    fields=[search.TextField(name='subject', value='going for dinner'),
            search.HtmlField(name='body', value='<html>I found a place.</html>'),
            search.TextField(name='signature', value='brzydka pogoda', language='pl')],
    language='en') 
```

因此该文档有 3 个单独的字段，可以单独搜索。

[文档类](https://developers.google.com/appengine/docs/python/search/documentclass)

# javascript - jQuery end() 方法

> ID：13305307
> 
> 赞同：0
> 
> 时间：2012-11-09T09:29:32.280
> 
> 标签：javascript, jquery, jquery-end

我有一个这样的html文件：

```
<!DOCTYPE HTML">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>

<ul id="a">
    <li>list</li>
</ul>
<ul id="b"></ul>

<script type="text/JavaScript" src="js/1.3.2/jquery.min.js"></script>

</body>
</html> 
```

当我加载这个脚本时：

```
alert(
    jQuery('ul#a li')
    .parent()
    .clone(true)
    .find('li')
    .appendTo('#b')
    .end()
    .end()
    .text();
) 
```

它给了我 1 个空行。但是，如果我这样做：

```
alert(
    jQuery('ul#a li')
    .parent()
    .clone(true)
    .text();
) 
```

它在警报框中显示“列表”。我希望上面的两个代码是相同的，所以它们应该显示相同的结果。你能解释一下为什么会发生这种差异吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:39:28.413

我稍微改变了你的代码

基本上，你有 1 .end() 到很多，这将太多元素从堆栈中推出

```
 alert(
        jQuery('#a li')
        .parent()
        .clone(true)
        .find('li')
        .appendTo('#b')
        .end() // If you remove this it will give you the text of the newly added element
        .text() //else it will give you the text of the element you cloned
    ) 
```

这样做，会给你和上面一样的东西，没有结尾（显然没有在任何地方附加它 - 但相同的文本）

```
 alert(
        jQuery('#a li')
        .parent()
        .clone(true)
        .text()
    ) 
```

# c++ - C++ 用 double 测试可分性

> ID：13305310
> 
> 赞同：4
> 
> 时间：2012-11-09T09:29:35.633
> 
> 标签：c++, double, factorial, arithmetic-expressions

`((num / i) % 1 == 0)`当 num 是双精度时，为什么在 C++ 中不起作用？以及我将如何编写此代码，通过检查它是否留下余数（等 0.3333）来检查阶乘。

```
int getFactorials (double num)
{
    int total = 0;      // if (total / 2) is equal too 'num' it is a perfect number.

    for (int i = 1; i < num; i++)
    {
        if ((num / i) % 1 == 0)
        {
            cout << i << endl;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T09:34:14.317

该`%`运算符仅允许用于整数类型（以及重载它的用户定义类型）。对于浮点，您需要函数 `fmod`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T09:32:42.897

实际上你想要做的是检查是否`n`可以被整除，`i`所以你需要改变的是

```
if ((num / i) % 1 == 0) 
```

进入

```
if (num % i == 0) 
```

您应该知道这很容易出错，因为您将`double`其用作`num`. 您应该改用 an `int`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T09:37:04.683

运算符由`%`C++11 §5.6/4 定义：

> 如果商 a/b 在结果类型中是可表示的，则 (a/b)*b + a%b 等于 a。

这对浮点类型毫无意义。模数的定义取决于除法四舍五入到整数。

正如 James Kanze 所说，请[`std::fmod`](http://en.cppreference.com/w/cpp/numeric/math/fmod)改用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:36:58.167

此代码为您返回一个双重对象

```
(num / i) 
```

模运算仅适用于 int 类型。您可以将其转换为 int 类型

```
( ((int) (num / i) ) % i) 
```

# android - 通知错误进入线程

> ID：13305311
> 
> 赞同：1
> 
> 时间：2012-11-09T09:29:39.170
> 
> 标签：android, android-notifications

我使用线程创建了一个应用程序。在线程中，我有一个发送通知的程序，但它不起作用。我哪里错了？

代码：

```
 NotificationManager notificationManager;   
    Notification myNotification;   
    private final String myBlog = "http://www.example.com/";  
    private static final int MY_NOTIFICATION_ID=1;  

   @Override  
    public void onCreate(Bundle savedInstanceState) {   
        super.onCreate(savedInstanceState);   
        setContentView(R.layout.dashboard);   

 userFunctions = new UserFunctions();   

  inputUsername = (TextView) findViewById(R.id.loginUsername);   
        btnLogout = (Button) findViewById(R.id.btnLogout);   
       inputThread = (TextView) findViewById(R.id.thread_modified_text);   
       SharedPreferences userDetails = getSharedPreferences("userdetails", MODE_PRIVATE);  
        username = userDetails.getString("username", "");   
        inputUsername.setText(username);    

 currentThread = new Thread(this);   
            currentThread.start();

}

    @Override  
    public void run() {    
        try {   
                   while(username != null)  
                    {  
            Thread.sleep(5000);  
            threadHandler.sendEmptyMessage(0);         
                    }                                     
        } catch (InterruptedException e) {  
            //    
        }  
    }

private Handler threadHandler = new Handler() 
{

public void handleMessage(android.os.Message msg) {

   myNotification = new Notification(R.drawable.stat_notify_chat,   
                    "A new notificatin!",   
                    System.currentTimeMillis());    
     Context context = getApplicationContext();    
     String notificationTitle = "Notification";    
     String notificationText = "XXXX";    
     Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(myBlog));    
     PendingIntent pendingIntent = PendingIntent.getActivity(getBaseContext(),     
                                   0, myIntent,    
                                    Intent.FLAG_ACTIVITY_NEW_TASK);    
      myNotification.defaults |= Notification.DEFAULT_SOUND;    
      myNotification.flags |= Notification.FLAG_AUTO_CANCEL;   
      myNotification.setLatestEventInfo(context,    
                                  notificationTitle,    
                                  notificationText,    
                                  pendingIntent);    
      notificationManager.notify(MY_NOTIFICATION_ID, myNotification);    

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:33:42.567

我认为您应该在线程的 run() 方法中编写 Looper.prepare()。这对我有用。希望这会有所帮助。

# javascript - jQuery 移动滑块栏根据其值触发不同的事件

> ID：13305314
> 
> 赞同：2
> 
> 时间：2012-11-09T09:29:50.600
> 
> 标签：javascript, android, jquery, iphone, jquery-mobile

快速提问。我使用带有垂直滑块插件的 jqmobile ver.1.2.0（[http://www.elmundio.net/blog/jquery-mobile-vertical-slider/](http://www.elmundio.net/blog/jquery-mobile-vertical-slider/)）。

如何根据其值启动某些功能。前任。值为 50 时，更改其他地方的类名，值为 100 时将页面重定向到新 URL。

之后我会制作一些示例页面。这是示例。

jsfiddle.net/nori2tae/zT2ZH/

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:25:51.370

我想这就是你需要的

```
function anotherfunction() {
    alert('another function is fired');
}
$(document).ready(function() {
    //do something
    $('.container').change(function() {
        if ($(this).children('input').val()==50) {
            $('.changeThis').addClass('changed');
            $('.changed').removeClass('changeThis');
            alert("at 50 and changeThis now have [" + $('.changed').attr("class") + "] classes");
        } else if($(this).children('input').val()==100) {
            // another function here
            anotherfunction();
        }
    });
}); 
```

jsfiddle：http: [//jsfiddle.net/BerkerYuceer/5ZHue/](http://jsfiddle.net/BerkerYuceer/5ZHue/)

您也可以尝试在移动调试模式下..

# c# - 如何在gridview中转到特定记录

> ID：13305316
> 
> 赞同：0
> 
> 时间：2012-11-09T09:29:56.400
> 
> 标签：c#, asp.net, gridview

我在 a.aspx 中有带有多页记录的 gridview。当我单击 b.aspx 中的按钮时，我需要转到包含 gridview 中记录的特定页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T11:17:26.160

我假设您实际上想要转到特定记录。然后我将通过 url 参数（或会话）传递它的 ID，然后使用此记录转到网格中的页面。这更好，因为页面可能会改变（fe 排序）。

假设您的网格列出了产品，并且您希望确保显示特定产品，因为您刚刚在另一个页面上编辑了产品详细信息。还假设你`DataSource`是一个`DataTable`（但这并不重要）：

```
/// <summary>
/// Binds the products-GridView.
/// </summary>
/// <param name="ProductID">the ProductID to be displayed, changes also the PageIndex if necessary</param>
private void BindProductGrid(int ProductID = -1)
{
    DataTable tblProducts = getAllProducts();
    GridProducts.DataSource = tblProducts;
    bool needsPaging = (tblProducts.Rows.Count / GridProducts.PageSize) > 1;

    if (ProductID == -1)
    {
        this.GridProducts.PageIndex = 0;
        this.GridProducts.SelectedIndex = -1;
    }
    else
    {
        int selectedIndex = tblProducts.AsEnumerable()
            .Select((Row, Index) => new { Row, Index })
            .Single(x => x.Row.Field<int>("ProductID") == ProductID).Index;
        int pageIndexofSelectedRow = (int)(Math.Floor(1.0 * selectedIndex / GridProducts.PageSize));
        GridProducts.PageIndex = pageIndexofSelectedRow;
        GridProducts.SelectedIndex = (int)(GridProducts.PageIndex == pageIndexofSelectedRow ? selectedIndex % GridProducts.PageSize : -1);
    }
    GridProducts.DataBind();
} 
```

# postgresql - 如何在 PostgreSQL 中对数据进行分组？

> ID：13305319
> 
> 赞同：0
> 
> 时间：2012-11-09T09:30:21.303
> 
> 标签：postgresql

这个 PostgreSQL 查询基本上显示了 12 小时之前的数据列表。

```
SELECT * FROM listing_websites 
WHERE ( ( NOW() - last_visited ) > INTERVAL '12 hour'  OR last_visited IS NULL )
GROUP BY url,pkey ORDER by pkey ASC 
```

显示的数据将如下所示。pkey 是“主键”

```
pkey |  url   | last_visited
12   | link1  | 2012-11-08 17:06:49.553515  
13   | link2  | 2012-11-07 05:36:55.270243
14   | link1  | 2012-11-09 08:54:33.51958
15   | link3  | 2012-11-03 16:29:17.20889
17   | link1  | 2012-11-08 05:54:33.51958 
```

我想要实现的是对 url 列进行分组，例如：

```
pkey |  url   | last_visited
12   | link1  | 2012-11-08 17:06:49.553515  
13   | link2  | 2012-11-07 05:36:55.270243
15   | link3  | 2012-11-03 16:29:17.20889 
```

提前感谢谁能解决这个问题。无论如何，我仍在学习 postgresql，尤其是在 GROUP BY 函数中。TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:56:32.807

按主键分组没有意义。因为它 - 根据定义 - 是唯一的，所以每个主键总是会得到一个组。

显然您只想查看每个网址一次。在这种情况下，您必须决定要查看哪个 pkey 和 last_visited 值。

下面为每个唯一的 url 值选择第一个 last_visited 和最低的 pkey 值：

```
select min(pkey), url, min(last_visited)
from listing_websites
where ( ( NOW() - last_visited ) > INTERVAL '12 hour'  OR last_visited IS NULL )
group by url; 
```

它给出了示例输出，但我不确定这是否是你想要的。

在此处查看 SQLFiddle 演示：[http ://sqlfiddle.com/#!12/2cbf7/1](http://sqlfiddle.com/#!12/2cbf7/1)

如果您需要更多列，则需要一种不同的方法（您应该从一开始就提到这一点）：

```
select * 
from (
    select pkey, url, last_visited, url2, url3,
           row_number() over (partition by url order by pkey) as rn
    from listing_websites
    where ( ( NOW() - last_visited ) > INTERVAL '12 hour'  OR last_visited IS NULL )
) t
where rn = 1; 
```

请参阅我更新的 SQLFiddle 示例：[http ://sqlfiddle.com/#!12/6236f/1](http://sqlfiddle.com/#!12/6236f/1)

下次请在您最初的问题中包含***所有***要求，不要将它们一点一点地提供给我们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:48:46.743

您可以使用 DISTINCT ON：

> SELECT DISTINCT ON (url) pkey,url,last_visited FROM listing_websites WHERE ( (NOW() - last_visited ) > INTERVAL '12 hour' OR last_visited IS NULL ) ORDER BY url ASC;

# mysql - 在 WAMP 上运行的 PHPMyAdmin 仅将 db 导出到 1MB

> ID：13305322
> 
> 赞同：1
> 
> 时间：2012-11-09T09:30:26.477
> 
> 标签：mysql, phpmyadmin, export, wamp

我手动导出一个数据库，因为我没有对服务器的 crontab 访问权限。因此，我远程连接到数据库并在特定数据库名称上使用导出功能。当我导出（大约 6MB）时，它只导出 1MB。

我唯一可以假设的是数据库最近才通过 6MB 标记，这会在某处触发限制吗？

PHPMyAdmin 版本 2.10.1 MySQL 版本：5.0.37 服务器：1.1.1.1 通过 TCP/IP（非真实 IP） 使用的 PHP 扩展：mysql Windows 7（本地机器）

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:17:46.250

导出时不使用“另存为文件”选项导出，而是将 phpMyAdmin 中显示的“转储”数据复制并粘贴到 .sql 文件中。

*或者，您可以使用mysqldump*从命令行导出数据库：

```
mysqldump -u username -p --opt dbname > dump.sql 
```

# android - 如何获得申请的onResume？

> ID：13305327
> 
> 赞同：0
> 
> 时间：2012-11-09T09:31:01.170
> 
> 标签：android

我的应用程序有 3 个活动 - 主菜单、子菜单、详细信息。每次**应用**程序恢复时，我都想得到一些提示，以便我可以开始下载一些文件。

现在我正在做的是 - 在每个活动`onResume`中，我检查下载是否已经在进行。如果不是，那么我开始下载。这样，每当我开始下一个/上一个活动时，如果下载没有继续，它就会开始下载。意思是，一旦下载完成，用户导航到下一页，重新开始下载。

我想防止这种行为，否则会有不必要的互联网使用。

如果我维护一个跟踪下载状态的全局（应用程序级别）变量，即使在我恢复应用程序之后，该值也不会重新设置。

关于如何获得`onResume`应用程序的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:39:27.280

那么在开始下载过程之前检查下载的内容怎么样？有多种方法可以做到这一点，您没有提供有关要下载的内容性质的太多详细信息。

例如：检查 FS 中下载的文件，在某处设置一个持久标志（使用 SharedPreferences、SQLite db 等）来标记内容是否已下载，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:38:23.280

你不能。应用程序不会恢复。该应用程序仅创建和销毁。这些活动具有复杂的生命周期。

对我来说最好的方法似乎是每个 Activity 绑定到 onResume 的服务，并且该服务负责下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T09:40:04.843

您可以使用 SharedPreferences 来存储数据，例如：

下载完成后：

```
 SharedPreferences settings = getSharedPreferences(MY_PREF, 0);
  SharedPreferences.Editor editor = settings.edit();
  editor.putBoolean("download_done", true); 
```

如果您想检查下载是否从另一个活动完成：

```
 SharedPreferences settings = getSharedPreferences(MY_PREF, 0);
   boolean downloadDone = settings.getBoolean("download_done", false);
   if (!downloadDone) {
   // Code to start/resume download.
   } 
```

您可以从任何活动、服务等中使用它。有关更多详细信息，请访问[此处](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

# html - 如何将完整图像完美地放入滑块中？

> ID：13305328
> 
> 赞同：2
> 
> 时间：2012-11-09T09:31:01.733
> 
> 标签：html, css

我是这个 CSS 的新手。我的第一个滑块中有 2 个图像。实际目标是考虑将其完整图像显示到该滑块中，但不幸的是，由于图像宽度比滑块宽度更小，因此无法使图像完全适合滑块。

**这是该滑块的CSS代码：**

```
.ei-slider{
    position: relative;
    width: 100%;
    max-width: 960px;
    height: 338px;
    margin: 0 auto;
    background: #fdfdfd url('../images/bg/elastic-slider-bg.png') repeat-x top left;
}
.ei-slider-loading{
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    z-index:999;
    background: #161616;
    color: #fff;
    text-align: center;
    line-height: 400px;
}
.ei-slider-large{
    height: 100%;
    width: 100%;
    position:relative;
    overflow: hidden;
    list-style:none;
    margin:0;
}
.ei-slider-large li{
    position: absolute;
    top: 0px;
    left: 0px;
    overflow: hidden;
    height: 100%;
    width: 100%;
}
.ei-slider-large li img{
    width: 100%;
} 
```

您能否请有人告诉如何将完整图像完美地放入该滑块中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:36:16.063

您使用的图像一开始就没有正确的比例。如果您有 2 张具有相同比例的图像，效果会更好。尝试创建具有正确比例的新图像，然后从那里开始！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:39:31.177

在实际中，您的滑块图像大小是`600px*148px`现在它根据滑块宽度进行拉伸，因此质量很差......

您正在使用非常小的图像....

请根据`1100px*400px`您是否将根据此尺寸制作图像而不是滑块完美地制作图像....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:40:54.523

我需要设置`width`和`positon`属性，这里是代码

```
.ei-slider-large {
height: 100%;
left: -70px;
list-style: none outside none;
margin: 0;
overflow: hidden;
position: relative;
width: 1100px;
} 
```

并且图像内联样式应该是

```
height: 400px;
margin-top: 0;
width: 1100px; 
```

希望对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:33:54.843

你可以使用这个：

```
<img src="yourimg" height="338px" width="960px"> 
```

或者用 css 实现这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-22T06:39:25.600

```
.slider
{
   height:450px;
   width:100%;
   overflow:scroll;//if you want fully display the imgaes
   overflow:hidden;//if your want omit the rest of images

}
.item img
{
width:100%;
height:auto;
display:block;
} 
```

* * *

ps:slider指主类，item指子类，img指图片标签

# php - Symfony 1.4 合并 2 个相同对象并更新旧记录

> ID：13305329
> 
> 赞同：0
> 
> 时间：2012-11-09T09:31:02.120
> 
> 标签：php, mysql, symfony-1.4, doctrine-1.2

我有以下问题。我有一个从表单中检索到的对象，并将结果与​​数据库进行比较，该数据库将旧版本的表单保存为 InspectionReport 对象。

当有旧版本的表单时，使用以下方法将新信息与旧信息合并：

```
// $found_inspection_report is the report found in the database, 
// $inspection_report is the one from the form
$found_inspection_report->merge($inspection_report); 
```

然后我想将具有新值的合并对象作为数据库中找到的旧对象保存到数据库中。因为合并覆盖了 $found_inspection_report 的 ID，所以我首先将旧 ID 设置回来：

```
$found_inspection_report->setId($old_id); 
```

然后我保存它：

```
$found_inspection_report->save(); 
```

但后来我收到以下错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '1' for key 'PRIMARY' 
```

所以我的问题是，有没有办法成功合并，甚至可能没有设置旧 ID，并更新/保存数据库中的旧对象/记录，比如 ID 1 而不是新记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:42:20.013

使用 synchronizeWithArray 方法而不是合并。请参阅此处的[文档](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/working-with-models.html#synchronize-with-array)

```
$old->synchronizeWithArray($arrayNew);
$old->save(); 
```

# asp.net - 如何在服务器上执行 .aspx 文件

> ID：13305330
> 
> 赞同：-1
> 
> 时间：2012-11-09T09:31:03.167
> 
> 标签：asp.net, apache, web, web-site-project, website-hosting

先生，我已经使用 asp.net 使用 Visual Studio 设计了一个网站，它在本地主机上成功执行我想让网站在我自己的服务器上运行。在服务器上上传项目文件然后检查链接 www.abc.com/project 后，它会给出以下错误：禁止

您无权访问此服务器上的 /project/。

此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

abc.com 上的 Apache 服务器端口 80

注意：主机是基于linux的服务器，网站项目没有数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:34:22.160

编辑：

您在问题中添加了主机是运行 Apache 的 Linux 服务器。您不能在 Linux/Apache 上运行 ASP.NET 应用程序。

Prev: 我将以下信息留给其他可能在运行 IIS 时搜索此问题的人。

在硬盘驱动器上找到文件夹的物理位置，然后调出安全设置。根据您使用的操作系统，确保以下内容具有读取/执行权限（根据站点的功能也可以写入）：

*   IIS_IUSRS
*   IUSR_MACHNAME
*   网络
*   网络服务

如果仍有问题，请打开 Web.config（或 machine.config）并添加

```
<identity impersonate="true" /> 
```

在 System.Web 节点中。

# powershell - 使用 PowerShell 过滤事件日志并导出为 CSV

> ID：13305331
> 
> 赞同：4
> 
> 时间：2012-11-09T09:31:09.710
> 
> 标签：powershell, csv, filter, event-log

我有以下命令，它提供了我需要的信息，但我需要进一步过滤它：

```
Get-EventLog -LogName Security -ErrorAction SilentlyContinue | Select TimeWritten, ReplacementStrings | Export-Csv output.csv 
```

这给出了许多条目，例如：

```
09/11/2012 08:09:27                {S-1-5-18, SYSTEM, NT AUTHORITY, 0x3e7...} 
```

我想删除 ReplacementStrings 中以 '{S-1-5' 开头的任何条目，但我尝试使用但`Where-Object`未能`-notlike`产生任何影响！

我遇到的另一个问题是，没有`Export-Csv output.csv`添加它可以很好地显示在屏幕上，但是它会像这样写入文件：

```
"09/11/2012 09:22:05","System.String[]" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T11:06:11.953

```
Get-EventLog -LogName Security -ErrorAction SilentlyContinue | 
    Select TimeWritten, @{name='ReplacementStrings';Expression={ $_.ReplacementStrings -join ';'}} | 
    where {$_.ReplacementStrings -notmatch '^S-1-5'} | Export-Csv output.csv 
```

# hibernate - Hibernate 多对多 HQL 和 Criteria

> ID：13305334
> 
> 赞同：4
> 
> 时间：2012-11-09T09:31:22.590
> 
> 标签：hibernate

我有以下场景：

```
USERS   1.1   ROLE   \*.\*   MODULE   \*.\*   INTERFACE 
```

单个用户“JOHN”具有一个角色，并且该角色具有多个模块，并且单个模块具有多个接口。我在hibernate中使用了运行良好的注释。当我得到用户对象时，我得到了角色，通过使用角色对象，我得到了模块列表，在模块对象中，我得到了接口。

简单来说，当我获得用户时，我获得了包含用户的界面，但是我如何通过 HQL 和标准获得与用户不相关的界面。例如

我通过 SQL 获取接口数据 IN 和 NOT IN 但我想使用 HQL & Criteria 获取数据。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:51:11.447

HQL 也支持 IN 和 NOT IN。在 HQL...

要找出与用户相关的所有接口，给定用户 ID：

```
select ui from USERS u join u.role.module.interface ui where u.id =:userId; 
```

要找出与用户**无关**的所有接口，给定用户 ID：

```
select i from INTERFACE i where i NOT IN (select ui from USERS u join u.role.module.interface ui where u.id =:userId); 
```

# datatable - 数据表是老式的？

> ID：13305339
> 
> 赞同：2
> 
> 时间：2012-11-09T09:31:56.120
> 
> 标签：datatable, dataadapter, sqldataadapter

我是一名年轻的开发人员，并不真正了解访问数据库和从中获取数据的许多不同方法。我知道的一种方法是使用 DataAdaptor 和 SQLcommand 和数据库团队提供的存储过程来连接数据库并将数据填充到 DataTable 中。然后我使用数据表进行处理，或者将其绑定到gridview等以进行显示。

但是当审阅者审阅我的代码时，他说数据表是非常老式的方式。他说他宁愿使用物体或其他东西，但我不知道。

那么有没有更好（或现代）的方式来连接数据库并从中获取数据？这是一个通用问题，与我的程序真正做的事情无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:38:15.637

在 Java 世界已经使用 ORM 多年的 .NET 1.0 时代，它们是一个愚蠢的想法。当 ADO（不是 ADO.NET）发布并且 ORM 已经在 J​​ava 世界中使用并且我在 Visual Basic（不是 .NET）中使用了一个时，它们是一个愚蠢的想法。

学习正确的面向对象编程。几乎所有使用 Datasets 的人都表明他只看过 MS“如何快速制作 UI”的示例，而从未学习过 troper 面向对象的编程实践。

我不会将 15 年的成熟技术称为“现代”。

例如，您应该了解 LINQ。实体框架 - 两者都是 .NET 框架的一部分，而且现在有一段时间了（从 4.0 开始）。

这不是关于“年龄”，而是关于知道你在做什么。并阅读文档一次。当一个“年轻厨师”只知道辣椒时，他不是厨师，他是一招制小马。不知道从数据库中获取数据的所有方法的“年轻”（不是实习生）.NET 开发人员不是 .net 开发人员 - 因为他错过了一次阅读文档。询问详细信息是可以的 - 但没有听说过实体框架是......好吧，从未阅读过文档的somoene。

然后再次。ORM 并不新鲜。它们存在于 .NET 1.0 时代，它们存在于旧的 Visual Basic 时代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:52:09.607

您的同事可能精通诸如 nHibernate 和实体框架之类的 ORM，它们为您的数据库提供了面向对象的抽象。

对象关系映射器安全且自动地执行许多“粘合”任务。足够体面的例子是数据库关系等。

在 MVC 空间中，呈现给服务器的对象通常没有关于底层数据访问结构的信息。

在一些非常有限的情况下，我仍然使用 DataTable。我想我的主要担忧是：-

*   非常通用的解决方案。不是特定领域的。

将此与旨在执行特定工作的专用课程进行对比。

*   很多耦合，很多错误检查，或两者兼而有之。

通常，您会希望使用 DataTable 来填充其他内容。要正确执行此操作，您需要检查 NULLS 等，通常使用以下内容：-

```
string thing = (row["Thing"] == DBNull.Value ) ? string.Empty : (string)thing; 
```

这是繁重、耗时且容易出错的。

不过，大多数情况下，它是人们直接从数据库中提取并在网页上发布的时代的产物。今天，在 n 层产品之间有几个抽象层，而 DataTable 是您从 ORM 获得的花里胡哨的相当差的替代品。

# iphone - 如何在iphone的sqlite数据库中存储图像路径

> ID：13305340
> 
> 赞同：0
> 
> 时间：2012-11-09T09:31:58.263
> 
> 标签：iphone

我是 iphone 编程新手。任何人都可以告诉我如何在 sqlite 数据库中存储图像路径，我现在如何在数据库中存储图像但我不想存储图像。我只想在照片库中存储图像的路径。

请任何人告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:39:20.017

如果您使用[fmdb](https://github.com/ccgus/fmdb)作为 SQLite 包装器，那么它只是一个简单的插入，例如：`[db executeUpdate:@"INSERT INTO myTable (name) VALUES (?)", YOUR_IMAGE_PATH]`。否则，如果是普通 SQLite，你可以参考这个[问题](https://stackoverflow.com/questions/7871816/sqlite-insert-data-in-objective-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:34:05.553

实现**UIImagePicker**委托

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {    

    NSURL *imageURL = [info valueForKey:UIImagePickerControllerReferenceURL];

     //save the URL to database
} 
```

# c++ - 将 2 字节十六进制转换并分隔为两个字符，高两个十六进制转到一个字符，低两个十六进制转到 C++ 中的第二个字符

> ID：13305343
> 
> 赞同：3
> 
> 时间：2012-11-09T09:32:03.007
> 
> 标签：c++, visual-c++, console-application, hex

我有一个无符号整数值

```
u_int_variable = 43981; // This is equal to ABCD in HEX 
```

我可以使用 ABCD 将其打印到十六进制控制台

```
printf("Value in Hex is %X", u_int_variable);

// Output : Value in Hex is ABCD 
```

我怎样才能转换和分离这个

```
unsigned char uhex, lhex;

uhex = 0xAB; and lhex = 0xCD; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:36:10.790

```
uhex = static_cast<unsigned char>(u_int_variable >> 8);
lhex = static_cast<unsigned char>(u_int_variable & 0xFF); 
```

或者，对于 >32 位无符号整数绝对安全：

```
uhex = static_cast<unsigned char>((u_int_variable >> 8) & 0xFF); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:36:19.380

作为变体：

```
unsigned char uhex, lhex;
lhex = static_cast<unsigned char>( u_int_variable & 0xFF );
uhex = static_cast<unsigned char>( (u_int_variable >> 8) & 0xFF ); 
```

关于按位运算的好的第一深度文章在[这里](http://www.cprogramming.com/tutorial/bitwise_operators.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T09:49:13.427

我让你使用**位域**和**联合**，解决方案看起来像这样：

```
struct hex
    {
        unsigned int lhex : 8; // upper and lower part alignement are system dependent
        unsigned int uhex : 8;
    };

    union number
    {
        number(int val): m_val(val){};
        void lhex(void) {printf("lhex %X", this->num.lhex);};
        void uhex(void) {printf("uhex %X", this->num.uhex);};
        int m_val;
        hex num;
    };

    number n(43981);
    n.lhex();
    n.uhex(); 
```

# sharepoint - 时间作业无法通过代理服务器

> ID：13305344
> 
> 赞同：0
> 
> 时间：2012-11-09T09:32:06.847
> 
> 标签：sharepoint, sharepoint-2010, web-config

我只是想知道 SharePoint 计时器作业如何与外部服务一起使用。我们有一个 Web 部件和计时器作业，它们都调用外部服务。Web 部件也没有通过我们的代理，但是在我们更改了该 Web 应用程序的 web.config 中的代理设置后，它现在可以工作了。

我们如何设置我们的 Timer Job 以通过代理？这似乎与我们安装 Web 部件的 Web 应用程序没有直接关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:43:04.320

使用以下代码读取相同的 web.config：

```
SPWebApplication webApp = this.Parent as SPWebApplication;  
Configuration config = WebConfigurationManager.OpenWebConfiguration("/", webApp.Name);  
String appValue = config.AppSettings.Settings["appSettingKey"].Value; 
```

# objective-c - 使用 Searchbar 自定义 UITableView

> ID：13305348
> 
> 赞同：1
> 
> 时间：2012-11-09T09:32:17.313
> 
> 标签：objective-c, ios, uitableview, uistoryboard

我有一个带搜索栏的 TableView。但我想在 TableView 中添加另一个视图（让我们说一个标签）（所以它会随着 tableview 滚动）。例如，如果您打开 iPhone 的电话联系人应用程序，在所有号码下，您会看到一个名为“我的号码：”的标签。必须与搜索栏处于同一层级。我试图在搜索栏上方添加一个新标签，但情节提要不允许我这样做。

![ViewController 的文档大纲屏幕截图](../Images/f0b15f328d3586e4b0ef81ea1788b318.png)

在这里，如果我将 UILabel 拖放到此层次结构中，它要么替换顶部的搜索栏，要么将标签放在原型单元格内。没有其他方法可以同时显示搜索栏和标签。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:02:33.547

在视图控制器的视图之外创建一个单独的视图（或者在内部，没关系。您甚至可以通过编程方式创建它）并将其链接到 IBOutlet myCustomView。创建一个 IBOutlet searchBar 并链接您的 UISearchBar

在 viewDidLoad 中；你可以使用 [searchBar addSubView:myCustomView]; 并在搜索栏上方添加您的自定义视图。

您可以在需要时显示/隐藏（myCustomView.hidden = YES / NO）自定义视图或从超级视图中添加和删除它。

前任。

```
- (IBAction)didTapShowCustomHeaderButton {
    myCustomView.hidden = NO;
}

- (IBAction)didTapHideCustomHeaderButton {
    myCustomView.hidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:58:59.283

在代码中添加以下两个委托

```
 - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
    {

     UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(10, 10, 100, 30)] autorelease];
      label.text = @"My Label";
    label.backgroundColor = [UIColor clearColor];

      return label;   

     }   

-(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section{
        return 30 // this height should be equivalent to the myLabel height u declared in headerView above
        } 
```

# android - 哪个是 OnClick 实施的更好方法？

> ID：13305349
> 
> 赞同：0
> 
> 时间：2012-11-09T09:32:19.717
> 
> 标签：android, onclick, touch-event, ontouchlistener, onclicklistener

对于 onClick 功能的实现，哪种方法更好？

1.  保存触摸开始/触摸坐标并处理此值以获得接近度？就像，如果起点和上点彼此靠近，让点击动作开始。
2.  保存触摸开始/触摸时间差并处理此值？比如，如果touch开始时间和up时间差小于一个值，就让点击动作开始。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:42:37.683

如果您绝对必须实现自己的，我会使用选项 2。

```
 if(motionEvent==MotionEvent.ACTION_UP){
    long duration = motionEvent.getDownTime() - .getEventTime();
    if(duration < THRESHOULD)
         click();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:18:30.430

取决于您要支持多少种触摸事件：

1.  上 : 点击

2.  on Up : 不移动太多 -> 点击, 移动 -> 滑动

3.  on Up：短时->点击，长时->长按已触发，忽略。

4.  向上和长按触发：不移动太多->忽略，移动->拖放

当您确实需要更多种类的触摸事件时，您会详细了解持续时间和位移。最佳方法取决于场景。因此，如果您的触摸屏没有滑动或长按或拖放的概念，您可能只需点击每个向上事件，最简单的情况。

# c - 如何将 ctime() 调用转换为 strftime()？

> ID：13305352
> 
> 赞同：1
> 
> 时间：2012-11-09T09:32:39.017
> 
> 标签：c

手册页`ctime`说 POSIX.1-2008 将此功能（以及其他一些功能）标记为已过时，并建议`strftime`应改用该功能。我想知道格式字符串的`strftime`外观如何才能获得与`ctime`.

到目前为止，我唯一得到的是`%a %b %_2d %T %Y%n`, but`%_2d`是一个 Glibc 扩展，我希望它也能在 Windows 上工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:42:11.543

从[这个参考](http://en.cppreference.com/w/c/chrono/strftime)：

> `c`- 写入**标准日期和时间字符串**，例如 Sun Oct 17 04:41:13 2010（取决于区域设置）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:50:56.700

尝试`%e`不带前导的月份中的某一天`0`。

# prolog - 反映人们坐在圆桌旁的序言程序

> ID：13305356
> 
> 赞同：1
> 
> 时间：2012-11-09T09:33:04.350
> 
> 标签：prolog

我有一个序幕作业要做：有 5 个人坐在一张来自不同国籍（法语、英语、波兰语、意大利语、土耳其语）的圆桌旁。除了自己的语言，他们每个人都只知道另一种语言。他们坐在圆桌旁，每个人都可以与他们的 2 个邻居交谈（一个邻居用他们的母语交谈，另一个用他们知道的单一外语交谈）。英国人会意大利语，波兰人会法语，土耳其人不会英语。问题是土耳其人懂什么外语？

我只使用子句和谓词做了一些事情，但我走到了死胡同，老师建议最简单的方法是使用列表。

关于该列表将包含什么或任何代码想法的任何想法？

更新（弱逻辑代码）：

```
 predicates
knowTheLanguage(symbol,symbol)  
knowNotTheLanguage(symbol,symbol)
isNeighbor(symbol,symbol,symbol,symbol)

aTheory(symbol,symbol,symbol,symbol) 
anotherTheory(symbol,symbol,symbol,symbol)

    clauses
knowTheLanguage(englishman,italian).
knowTheLanguage(polishman,franch).

%native tongues
knowTheLanguage(englishman,english).
knowTheLanguage(frenchman,franch).
knowTheLanguage(polishman,polish).
knowTheLanguage(italianman,italian).
knowTheLanguage(turk,turkish).

knowNotTheLanguage(turk,english).

aTheory(centralPerson, languageCntrlPers, personOnOneSide,languagePrsnOnOneSide) if knowTheLanguage(personOnOneSide,languageCntrlPers)
                                                                            and not( knowTheLanguage(centralPerson,languagePrsnOnOneSide))
                                                                            and not(knowNotTheLanguage(centralPerson,languagePrsnOnOneSide)).
anotherTheory(centralPerson, languageCntrlPers, personOnOneSide,languagePrsnOnOneSide) if knowTheLanguage(centralPerson,languagePrsnOnOneSide) 
                                                                            and  not( knowTheLanguage(personOnOneSide,languageCntrlPers))
                                                                            and not(knowNotTheLanguage(centralPerson,languagePrsnOnOneSide)).

isNeighbor(centralPerson, languageCntrlPers, personOnOneSide,languagePrsnOnOneSide) if aTheory(centralPerson, languageCntrlPers, personOnOneSide,languagePrsnOnOneSide)
                                                                        or
                                                                        anotherTheory(centralPerson, languageCntrlPers, personOnOneSide,languagePrsnOnOneSide). 
```

更新 - 编程环境：Borland 的 turbo prolog 2.0 '86,'88，我也是 prolog 的完整初学者，所以......我至少要了解代码体之外的程序和解释的完整草图。我处理事情很慢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:10:36.883

你可以使用循环列表，试试这个代码来理解。

```
t :-
    L = [1,2,3 | L],
    my_write(5, L).

my_write(0, _).
my_write(N, [H | T]) :-
    write(H), nl,
    N1 is N - 1,
    my_write(N1, T). 
```

循环列表可能对您非常有用。

描述列表的元素是什么，然后语言的约束是什么

编辑：这是我的解决方案，适用于 SWI-Prolog：

```
% @arg1 : list of nationalities around the table
% @arg2 : list of persons
dinner(Languages, Table) :-
    length(Languages, Len),
    length(Table, Len),

    % set Natianalities and languages
    init_1(Table, Languages, Languages),

    % create cyclic list
    % works with SWI-Prolog
    append(Table, L, L),

    % set languages constraint
    init_2(Len, L).

init_1([], [], []).

init_1([person(N, L) | T], Nations, Languages):-
    select(N, Nations, New_Nations),

    % problem specific
    (   N = english
    ->  L = italian
    ;   N = polish
    ->  L = french
    ;   true),

    select(L, Languages, New_Languages),

    % problem specific
    (   N = turkish
    ->  L \=  english
    ;   true),

    init_1(T, New_Nations, New_Languages).

% persons speaks with theirs two neighbors
init_2(Tr, [person(_N1, L1), person(N2, L2), person(N3, L3) | T]) :-
    Tr > 0,
    member(N2, [L1, L3]),
    Tr1 is Tr - 1,
    init_2(Tr1, [person(N2, L2), person(N3, L3) | T]).

init_2(0, _). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:13:56.017

通常，在对问题建模时，重要的是要确定一个紧凑的表示，消除不相关的细节。例如，这里有，`polishman`并且`polish`是无用的。我们可以同意，它`polish`代表人*和*语言。

我草拟解决方案，请填写省略号，添加约束：

```
puzzle(L) :-
    L = [P1,P2,P3,P4,P5],
    cadj(P5,P1,P2),
    ...
    member(p(english, italian), L),
    member(p(french,  _ ),      L),
    ...
    \+ member(p(turk, english), L).

% constrain adjacents
cadj(p(Pl, Ll), p(P, K), p(Pr, Lr)) :-
    P = Ll, K = Pr ; P = Lr, K = Pl. 
```

p/2 代表他知道的人和语言。cadj/3 说如果左边的人知道我的语言，我必须知道右边的人的语言，反之亦然。

要获得所需的语言，请尝试

```
puzzle :-
    puzzle(L),
    memberchk(p(turk, T), L),
    writeln(T:L). 
```

有更多的解决方案，但语言`T`始终被限制在一个单一的价值......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T15:02:33.557

通常，我会使用约束来解决这样的难题，但这对于您的作业来说可能太高级了。因此，我们必须使用测试来检查解决方案是否可行，而不是使用约束来限制搜索空间。

您将需要使用两个列表，例如`People`和`Languages`。列表中的每个元素对应于餐桌上的一个座位。两个列表可以具有相同的域，`[f,e,p,i,t]`. 域的语义应该是清晰的。

要生成解决方案，首先设置列表，然后实例化列表并检查实例化是否满足您的约束：

```
puzzle(People, Languages) :-
    Domain = [f,e,p,i,t],
    length(People, 5),
    length(Languages, 5),
    % symmetry break:
    People = [f|_],
    % instantiate People
    people(People, Domain),
    % instantiate languages and check constraints
    languages(Languages, People, Domain). 
```

请注意，列表的第一个元素`People`设置为`f`。这是为了排除对称解决方案，否则将返回，因为桌子是圆形的。如果没有这个限制，每个解决方案将有四个额外的对称解决方案。

在继续阅读之前尝试提出自己的解决方案...... :-)

该列表`People`首先被实例化。我们需要注意每个元素只出现一次：

```
people([], []) :- !.
people([P|RestP], Domain) :-
    delete(P, Domain, RestD),
    people(RestP, RestD). 
```

你的 Prolog 方言可能有`select/3`而不是`delete/3`.

实例化 list`Languages`时，我们还检查是否违反了拼图约束：

```
languages(Languages, People, Domain) :-
    Term =.. [[]|People],
    languages0(Languages, People, Term, 1, Domain).
languages0([], _, _, _, _) :- !.
languages0([L|RestL], [P|RestP], Term, I, Domain) :-
    delete(L, Domain, RestD),
    L \= P, % language needs to be foreign
    check_l(P, L),
    check_n(L, I, Term),
    I1 is I+1,
    languages0(RestL, RestP, Term, I1, RestD). 
```

同样，每个元素只能出现一次。

`check_l`检查有关外语的限制：

```
check_l(e, i).
check_l(p, f).
check_l(t, L) :- L \= e.
check_l(f, _).
check_l(i, _). 
```

`check_n`确保左邻或右邻的语言和国籍匹配：

```
check_n(L, I, Term) :-
    ( I == 1 -> NL = 5 ; NL is I-1 ),
    ( I == 5 -> NR = 1 ; NR is I+1 ),
    ( arg(NL, Term, L) ; arg(NR, Term, L) ). 
```

有两种解决方案：

```
?- puzzle(P, L).
P = [f, e, i, t, p]
L = [e, i, t, p, f]
Yes (0.00s cpu, solution 1, maybe more)
P = [f, p, t, i, e]
L = [e, f, p, t, i]
Yes (0.01s cpu, solution 2, maybe more)
No (0.01s cpu) 
```

# jquery - getjson 和 utf-8 问题

> ID：13305357
> 
> 赞同：1
> 
> 时间：2012-11-09T09:33:07.780
> 
> 标签：jquery, encoding, utf-8, getjson

对于移动应用程序，我从 odata json 休息服务获取数据。服务编写正确，如果我直接进入服务的链接，我可以正确看到所有字符。

但是，我使用 .getJSON 获取数据，然后通过循环将其放置在我的屏幕上。带有特殊字符的名称显示不好，我看到一个带问号的正方形。

我尝试将我的 html 的编码设置为 utf-8。

在我的代码中，我也试过这个：

```
var uri_encode = encodeURIComponent(name);
var testname = decodeURIComponent( escape (uri_encode));
console.log(testname); 
```

控制台给出：M%EF%BF%BDller

我该如何解决这个问题？

# html - iOS 的 HTML 编辑器视图

> ID：13305358
> 
> 赞同：0
> 
> 时间：2012-11-09T09:33:10.350
> 
> 标签：html, ios

[这个问题与iOS](https://stackoverflow.com/questions/10105931/html-editor-for-ios)的 HTML 编辑器非常相似，但我找不到答案。我需要的是应用程序中的 HTML 编辑器窗口，我可以在其中创建格式化的 Web 文档。不是一个复杂的，只是 HTML 样式的格式化文本。因此，我需要从窗口窗体中获取带有标签的文本。有没有允许这样的框架或东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:04:30.410

[TinyMCE](http://www.tinymce.com/tryit/full.php)和[wysihtml5](http://xing.github.com/wysihtml5/)在 iOS 上工作，[DTCoreText](https://github.com/Cocoanetics/DTCoreText)也支持基本的所见即所得 HTML。

# c#-4.0 - 是否在一个模型中检查鼠标？

> ID：13305360
> 
> 赞同：0
> 
> 时间：2012-11-09T09:33:15.583
> 
> 标签：c#-4.0, xna-4.0

在 XNA 4.0 3D 中。我想拖放一个模型 3D。所以，我必须在模型中检查鼠标。我的问题是我不知道将这个模型从 3D 更改为 2D 的位置和评分。它与相机的矩阵视图和矩阵投影有关吗？这是我的代码： [http ://www.mediafire.com/?3835txmw3amj7pe](http://www.mediafire.com/?3835txmw3amj7pe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:40:06.907

查看 msdn 上的这篇文章：[使用鼠标选择对象](http://msdn.microsoft.com/en-us/library/bb203905.aspx)。

从那篇文章：

```
MouseState mouseState = Mouse.GetState();
int mouseX = mouseState.X;
int mouseY = mouseState.Y;

Vector3 nearsource = new Vector3((float)mouseX, (float)mouseY, 0f);
Vector3 farsource = new Vector3((float)mouseX, (float)mouseY, 1f);

Matrix world = Matrix.CreateTranslation(0, 0, 0);

Vector3 nearPoint = GraphicsDevice.Viewport.Unproject(nearsource,
    proj, view, world);

Vector3 farPoint = GraphicsDevice.Viewport.Unproject(farsource,
    proj, view, world);

// Create a ray from the near clip plane to the far clip plane.
Vector3 direction = farPoint - nearPoint;
direction.Normalize();
Ray pickRay = new Ray(nearPoint, direction); 
```

`proj`并相应地使用您`view`自己的投影和视图矩阵。

现在，当你有你的 时`Ray`，你需要有一个`BoundingBox`或一个`BoundingSphere`（或多个）大致包含你的模型。

一个**简单的解决**`BoundingSphere`方案`ModelMesh`是使用`Model.Meshes`.

```
foreach(ModelMesh mesh in model.Meshes)
{
    if(Ray.Intersects(mesh.BoundingSphere))
    {
        //the mouse is over the model!
        break;
    }
} 
```

由于`BoundingSphere`每个`ModelMesh`都将包含该网格中的所有顶点，因此如果网格不是大致*圆形*（即如果它很长） ，它**可能不是网格的最精确表示。**这意味着上面的代码可能会说鼠标与对象相交，而在视觉上它是远离的。

 *另一种方法是**手动创建包围体**。`BoundingBox`您可以根据需要创建对象或对象的实例`BoundingSphere`，并根据运行时要求手动更改它们的尺寸和位置。这需要更多的工作，但**并不难**。*

# html - 如何在 UIWebView 中通过文本选择单选按钮

> ID：13305365
> 
> 赞同：0
> 
> 时间：2012-11-09T09:33:42.260
> 
> 标签：html, ios, uiwebview, safari, radio

我有一个带有单选按钮的网页（旁边有文字）。
单选按钮可以通过 PC/Mac 浏览器（IE、Chrome、Safari）中的文本进行选择。
但它不能在 iPad 的 safari 中通过文本选择。只能通过单选点来选择。

我想将它嵌入到 iOS UIWebView 中，我认为它的核心是 safari。

如何解决它可以通过 iPad 中的收音机文本选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:09:08.647

是的，它不支持“for”属性。也许你可以用js处理

```
<label for="radio" onclick="document.getElementById('radio').setAttribute('checked', '');">TestTest</label> 
```

或全局 jQuery

```
$('label[for]').click(function(){
  $('#'+$(this).attr('for')).attr('checked','checked');
}); 
```

# javascript - 有新更新可用时弹出 div

> ID：13305366
> 
> 赞同：0
> 
> 时间：2012-11-09T09:33:43.457
> 
> 标签：javascript, jquery, notifications

我已经为我的应用程序实现了 RSS Feed。但是，我希望在您登录时应该有一个新的更新，例如 Facebook 新通知到达，我的意思是这取决于他/她是否希望看到该通知的用户。

所以，我只想要那种 div 的外观。在 javascript/jquery 中是否有任何插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:38:28.757

您正在寻找的是所谓*的长轮询*。基本上，您的客户端 javascript 从服务器请求更新，但服务器保持连接打开并且在更新数据可用之前不回答。这是最温和的方法，但实现取决于您的服务器端框架/语言。请参阅此链接以获得良好的介绍：http: [//techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

您拥有的另一个选项是在 javascript 中设置一个计时器，并每隔一段时间轮询一次服务器以获取更新。

# android - Android - Google Play（以前的 Android Market）中不显示图标

> ID：13305368
> 
> 赞同：1
> 
> 时间：2012-11-09T09:33:46.130
> 
> 标签：android, icons

我开发了一个安卓应用程序。我在不同的手机上启动了它，图标就是我的图标。但是当我将[APK](http://en.wikipedia.org/wiki/APK_%28file_format%29)文件上传到[Google Play](http://en.wikipedia.org/wiki/Google_Play)时，它显示为[Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29)默认图标。在我的资源文件中有一些名为“ic_launcher”的 Android 默认图标，但我没有链接它们。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:37:33.390

即使您没有链接它们，如果您没有提供任何其他内容，Play 商店也会使用这些图标。

在您的项目中搜索 ic_launcher 并将其替换为您要显示的图标。请记住**，要在 Google Play 上显示的启动器图标必须为 512x512 像素。**

有关设计图标，请参阅[本指南](http://developer.android.com/design/style/iconography.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:50:35.047

检查并修改文件`AndroidManifest.xml`：

```
<application
    android:icon="@drawable/ico_launcher"
    android:label="@string/app_name" 
```

# python - Django：更多pythonic __unicode__

> ID：13305379
> 
> 赞同：9
> 
> 时间：2012-11-09T09:34:19.993
> 
> 标签：python, django, foreign-keys, string-formatting

我所有的 django-models 都有**unicode**函数，目前这些函数往往是这样写的：

```
def __unicode__(self):
    return u'Unit: %s  -- %s * %f' % (self.name, self.base.name, self.mul) 
```

但是，像 Pythonista 一样的代码，在[http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#string-formatting](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#string-formatting)指出这`self.__dict__`是一个字典，因此上面可以简化为：

```
def __unicode__(self):
    return u'Unit: %(name)s -- %(base.name)s * %(mul)f' % self.__dict__ 
```

这有效，除了“base.name”，因为 python 尝试查找`self.__dict__['base.name']`失败，而 self.base.name 有效。

即使您需要遵循外键关系，是否有一种优雅的方式来完成这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T09:47:56.753

`%`字符串格式不支持属性访问，但[`format`](http://docs.python.org/2/library/string.html#format-string-syntax)（从 2.6 开始）支持：

```
def __unicode__(self):
    return u'Unit: {name:s} -- {base.name:s} * {mul:f}'.format(**self.__dict__) 
```

# c++ - 使用 R 创建图形/绘图/图表并使用 GTK 显示并与它们交互

> ID：13305381
> 
> 赞同：1
> 
> 时间：2012-11-09T09:34:30.617
> 
> 标签：c++, python, r, gtk

我想使用 R 生成一些图形/绘图/图表，然后使用 GTK 显示它们。一个特点是绘图必须能够自动更新并具有一些交互功能，例如设置最大值/最小值标签、重新缩放、允许标准化等......数据集可能是数千个数据的数量级点，可能高达一万。

*是否有任何库/模块已经这样做了*？我的 Google-fu 很弱。我不介意 c++ 或 python 。

如果没有这样的库，*我怎么能做到这一点*？

**注意：**该系统是嵌入式的——它当然没有 Internet 连接，但有一个内部网络。使用网络会大大增加系统的成本，因此它不是解决我的问题的好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:47:56.467

由于您也将 python 放入了标签中，也许[matplotlib](http://matplotlib.org/)会引起一些兴趣？以防万一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:21:57.177

首先，R 的核心不具备交互式绘图功能——这与使用编程语言本身控制几乎所有东西的想法背道而驰。

有一些库允许您创建或多或少的交互式绘图，从`locator`需要包装到 R 程序中的简单函数开始，包括[`manipulate`](http://www.rstudio.com/ide/docs/advanced/manipulate)来自 RStudio 的包以及[`iplot`](http://www.rosuda.org/iPlots/)包。甚至还有一个基于 GTK+ 的 R 包，称为[`playwith`](https://code.google.com/p/playwith/).

根据您实际想要实现的目标，也许使用 gnuplot 会是一个更好的主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T19:11:19.953

我想知道这些图形设备是否会出现 10,000 点的问题，并且在`gWidgets`运行此脚本的情况下`RGtk2`，`Qt`它的速度快到可以接受的程度（当然在我的老机器上 100,000 点太多了）：

```
library(gWidgets)
options(guiToolkit="RGtk2")
w <- gwindow("test")
pg <- gpanedgroup(cont=w)
fl <- glayout(cont=pg)
gg <- ggraphics(cont=pg)
size(gg) <- c(600, 600)

fl[1,1] <- "No. points"
fl[1,2] <- no_pts <- gedit("10", cont=fl, coerce.with=as.numeric)
fl[2,2] <- gbutton("click me", cont=fl, label="", handler=function(h,...) {
  n <- svalue(no_pts)
  plot(rnorm(n), rnorm(n))
}) 
```

如果这个速度是可以接受的，那么可以相对容易地根据您的特定需求制作一个符合游戏规则的 GUI。可能是该`cranvas`软件包可以使 Qt 更快。

否则，我不知道[`rgl`](http://cran.r-project.org/web/packages/rgl/index.html)邓肯·默多克的包裹是否有用，但它可能有用。Simon Urbanek 在上次用户会议上做了一个非常好的演示，其中一些浏览器中的 openGl 图形引擎允许超过 1,000,000 点的非常快速的绘图，这是通过 websocket 完成的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T14:35:39.503

对于允许来自服务器的这种功能的基于 Web 的解决方案（Web 是未来 :)），我会看看 Rstudio 的人们刚刚发布的闪亮包。它看起来像您需要的，无需您进行任何编程。您还可以获得任何拥有浏览器的人都可以从任何地方打开它的好处。看到这个链接：

[http://blog.rstudio.org/2012/11/08/introducing-shiny/](http://blog.rstudio.org/2012/11/08/introducing-shiny/)

# mysql - 如何在mysql存储过程中循环日期时间

> ID：13305383
> 
> 赞同：3
> 
> 时间：2012-11-09T09:34:31.037
> 
> 标签：mysql, sql, for-loop

我使用 mysql 存储过程，我怎样才能创建一个循环，每 1 小时变量 strhour 将有 1 小时间隔，然后返回查询的总输出。虽然 starthour 小于 11 月的日期，但它将间隔 1 小时并执行查询。

这是我的代码：

```
DELIMITER $$

CREATE DEFINER=`root`@`%` PROCEDURE `sp_asessiontime`(
out `total` int
)
BEGIN

declare `starthour`, `endhour` datetime;
set `starthour` = '2012-09-20 01:59:00';
set `endhour` = '2012-09-20 02:00:00';

select count(terminalcount.terminalids) into total from (
select distinct ts.TerminalID `terminalids` from
tmptransactiondetails td
inner join transactionsummary ts
on td.TransactionSummaryID = ts.TransactionsSummaryID
where
td.ServiceID = 4
and
td.TransactionType in ('D','W')
and
(ts.DateStarted >= starthour and ts.DateStarted < endhour)
or
(ts.DateEnded >= starthour and ts.DateEnded < endhour)
or
(ts.DateStarted < starthour and starthour <= ts.DateEnded)
)as terminalcount; 
```

-- 每1小时循环一次

```
while 

starthour < '2012-11-01 01:59:00' do
select starthour + interval 1 hour;
select total as totalnumber;

end while;

END 
```

十分感谢大家。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T09:46:58.063

我不确定我是否正确地回答了您的问题，但这就是您在日期之间循环的方式

```
set currHour = '2012-09-20 01:59:00';
set endhour = '2012-09-21 02:00:00';

REPEAT

-- execute your queries for every hour

Set currHour = DATE_ADD(currHour,INTERVAL 1 HOUR);
UNTIL currHour > endhour END REPEAT; 
```

如果必须使用 while 循环：

```
WHILE currHour < endhour DO
  -- execute your queries for every hour
  Set currHour = DATE_ADD(currHour,INTERVAL 1 HOUR);
END WHILE; 
```

# java - Apache FTPClient for Java 显示已运行的 FTP 命令

> ID：13305387
> 
> 赞同：0
> 
> 时间：2012-11-09T09:34:50.933
> 
> 标签：java, apache, ftp, client

您好，我正在使用 Apache Commons FTP 客户端，我想显示 FTP 客户端使用的 FTP 命令，就像我使用 changeWorkingDirectory 时一样，它应该显示它使用的 FTP 命令，例如：CODEOFCOMMAND CHD .....

或者当我上传文件时，它应该显示：CODEOFCOMMAND PUT ....

有没有可能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:51:45.263

您可以在[Apache Commons Net FAQ](http://wiki.apache.org/commons/Net/FrequentlyAskedQuestions)中找到它：

问：如何调试 FTP 应用程序？

A：可以添加协议命令监听；例如：

```
ftp.addProtocolCommandListener(new PrintCommandListener(new PrintWriter(System.out), true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:40:17.950

**-**它是向实施者（在本例中为程序员）**隐藏实施****的最重要方面**之一。`Object Oriented Programming`

 ****-**当您使用`Apache's commons library`时`ftp`，您可以使用该功能，因为实现是隐藏的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:52:06.723

在这里为也需要它的人：

首先做：

```
redirectSystemStreams();
ftp.addProtocolCommandListener(new PrintCommandListener(new PrintWriter(System.out), true)); 
```

但是因为我在 GUI 中使用了 JTextArea，并且我需要在那里的输出，所以我可以通过创建这些方法来重定向输出（将 txtLog 替换为您的 TextArea）：

```
private void updateTextArea(final String text) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                txtLog.append(text);
            }
        });
    }

    private void redirectSystemStreams() {
        OutputStream out = new OutputStream() {
            @Override
            public void write(int b) throws IOException {
                updateTextArea(String.valueOf((char) b));
            }

            @Override
            public void write(byte[] b, int off, int len) throws IOException {
                updateTextArea(new String(b, off, len));
            }

            @Override
            public void write(byte[] b) throws IOException {
                write(b, 0, b.length);
            }
        };

        System.setOut(new PrintStream(out, true));
        System.setErr(new PrintStream(out, true));
    } 
```**

# php - 错误：调用未定义的方法 addAttributeToFilter()

> ID：13305389
> 
> 赞同：8
> 
> 时间：2012-11-09T09:35:01.817
> 
> 标签：php, magento, collections, model

我制作了我的 Magento 模型：

```
<?php

class Kiwi_SliderBoard_Model_Resource_Slider_Collection extends Mage_Core_Model_Resource_Db_Collection_Abstract
{

    protected function _construct()
    {
         $this->_init("sliderboard/slider");

    }

} 
```

当我尝试在我的街区使用它时：

```
class Kiwi_SliderBoard_Block_Slider extends Mage_Catalog_Block_Product_Abstract {

    public  function getSlider ()
    {
        $slider= Mage::getModel('sliderboard/slider')
                 ->getCollection()
                 ->addAttributeToFilter('status', array('eq' => 1));
        return  $slider;
  }

} 
```

我得到了这个错误！

> 致命错误：在第 8 行调用 C:\wamp\www\ce_1.6.2.0\app\code\local\Kiwi\SliderBoard\Block\Slider.php 中未定义的方法 Kiwi_SliderBoard_Model_Resource_Slider_Collection::addAttributeToFilter()

你能帮我吗 ！
谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-09T09:58:28.230

```
addAttributeToFilter(); 
```

仅用于产品、客户等 EAV 集合。

对于所有其他集合，只需使用：

```
addFieldToFilter(); 
```

# c# - 使用 AutoMapper 映射分组集合

> ID：13305391
> 
> 赞同：7
> 
> 时间：2012-11-09T09:35:02.553
> 
> 标签：c#, collections, ienumerable, automapper, igrouping

我有以下代码不起作用：

```
var groupedZones = this._zoneDataManager.GetZonesGroupedByCountry();
            IEnumerable<IGrouping<String, ZoneDTO>> zonesToReturn = Mapper.Map<IEnumerable<IGrouping<String, Zone>>, IEnumerable<IGrouping<String, ZoneDTO>>>(groupedZones); 
```

我不断收到以下异常：

> 值 \"System.Collections.Generic.List `1[SCGRE.Business.Model.ZoneDTO]\" is not of type \"System.Linq.IGrouping`2[System.String,SCGRE.Business.Model.ZoneDTO]\" 不能在此通用集合中使用。\r\n参数名称: 值

我不明白为什么它试图将 a 映射`List<T>`到 an`IGrouping<String, T>`或者我没有正确理解异常......但我基本上有一个`IEnumerable<IGrouping<String, Zone>>`并且我想将它映射到`IEnumerable<IGrouping<String, ZoneDTO>>`

请注意，我创建了一个从`Zone`to的地图，`ZoneDTO`如下所示：

```
Mapper.CreateMap<Zone, ZoneDTO>(); 
```

那是因为这两个类具有几乎完全相同的属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:19:05.453

经过一些工作后，我想你不能做一些事情

```
 Mapper.CreateMap<IEnumerable<IGrouping<String, Zone>>, IEnumerable<IGrouping<String, ZoneDTO>>>() 
```

具体来说，AutoMapper 支持的源集合类型包括：（仅`Generic`类型）

```
IEnumerable, IEnumerable<T>, ICollection, ICollection<T>, IList, IList<T>, List<T>, Arrays 
```

AutoMapper 将不支持`IGrouping`，因为它是非泛型可枚举类型。

相反，您可以执行以下简单方法，

```
var zones = this._zoneDataManager.GetZones();   // Write new method in your ZoneDataManager
var zoneDTOs = Mapper.Map<List<Zone>, List<ZoneDTO>>(zones);
IEnumerable<IGrouping<String, ZoneDTO>> zonesToReturn = zoneDTOs.GroupBy(z => z.Country); 
```

请阅读[此](http://automapper.codeplex.com/wikipage?title=Lists%20and%20Arrays)。希望这可以帮助。

# iphone - 如何使用 PageControl 将图像置于视图中心

> ID：13305394
> 
> 赞同：0
> 
> 时间：2012-11-09T09:35:12.770
> 
> 标签：iphone, objective-c, ios5, uipagecontrol

我在 pagecontrol 中有 15 个图像，我的应用程序中有 15 个按钮

现在，如果我当时按下按钮 5，页面控件中的图像 5 应该位于屏幕中央。

如果我当时按下按钮 10，页面控件中的图像 10 应该位于屏幕中央。

如何在我的应用程序中开发这种结构？

分享你的想法。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:39:46.910

> 为您的按钮和相应的图像分配相同的标签。
> 
> 获取按钮操作的按钮标签。
> 
> 使用按钮标签从视图中获取相应的图像（两个标签将相同）
> 
> 获取主视图中的图像位置
> 
> 滚动/可见页面控件的同一框架到主视图的中心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:43:16.787

试试这个（假设您使用启用分页的滚动视图）：

```
-(IBAction)goToPage5:(id)sender{
    CGRect frame = self.scrollView.frame;
    frame.origin.x = frame.size.width * 5;
    //OR if you have set the tags to your buttons:
    //UIButton *b=(UIButton*)sender;
    //frame.origin.x = frame.size.width * b.tag;
    self.pageControl.currentPage=5;
    frame.origin.y = 0;
    [self.scrollView scrollRectToVisible:frame animated:YES];
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:50:36.660

为每个按钮分配标签并初始化一个图像视图

```
-(IBAction)YourButtonName:(UIButton *)sender
{
  imageview.image=[UIImage imageNamed:UIImage imageNamed:[NSString   stringWithFormat:@"image%d",sender.tag];
  imageview.center=self.view.center;
} 
```

# django - 如何在 Django 中执行 Linux 命令？

> ID：13305396
> 
> 赞同：4
> 
> 时间：2012-11-09T09:35:21.510
> 
> 标签：django

要在 Python 中执行 Linux 命令，我们有很棒的模块：os 和 subprocess。我已经使用 os 和 subprocess 模块在基于控制台的 python 程序中集成了 Linux 命令，但是在 Django 中不会发生同样的事情。以这个视图为例：

```
def hello(request):
    res = os.system('ls')
    return render_to_response('thanks.html', {'res':res}, context_instance=RequestContext(request)) 
```

此视图返回的唯一值是 0。我也尝试过使用子进程。我得到的输出是0。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T09:52:52.087

这不是 Django 问题。就是`os.system`这样——它给出了系统调用的返回值，在这种情况下`0`是为了成功执行。

如果您需要获取外部程序的输出，您应该使用[`subprocess.check_output`](http://docs.python.org/2/library/subprocess.html#subprocess.check_output)（仅限 2.7）。但是，如果您只对目录列表感兴趣，那么有一个更好的方法可以做到这一点，那就是使用[`os.listdir`](http://docs.python.org/2/library/os.html#os.listdir).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:53:15.070

`0`这种情况是退出状态的返回码，在这种情况下意味着“没有错”。

根据[`os.system`文档](http://docs.python.org/2/library/os.html#os.system)：

> 在 Unix 上，返回值是以 wait() 指定的格式编码的进程的退出状态。注意，POSIX 没有指定 C 函数 system() 函数的返回值的含义，所以 Python 函数的返回值是系统相关的。
> 
> 在 Windows 上，返回值是系统 shell 在运行命令后返回的值，由 Windows 环境变量 COMSPEC 给出：在 command.com 系统（Windows 95、98 和 ME）上，它始终为 0；在 cmd.exe 系统（Windows NT、2000 和 XP）上，这是命令运行的退出状态；在使用非本地 shell 的系统上，请查阅您的 shell 文档。

# android - 使用android加速度计检测力峰值

> ID：13305397
> 
> 赞同：0
> 
> 时间：2012-11-09T09:35:29.950
> 
> 标签：android, sensors

我试图找出用板载加速度计按下按钮的力。我想我必须做一系列读数，然后比较这些值。我的尝试是这样的：

```
 velButton.setOnTouchListener(new OnTouchListener()
  {
        public boolean onTouch(View view, MotionEvent event)
        {
        int velocity = 0;

        switch (event.getAction())
        {
            case MotionEvent.ACTION_DOWN:

                velocity = getVelocity();
                velocityView.setText("This is the velocity: " +  velocity);
                break;

        }

        return false;
        });
    }

protected int getVelocity()
{
    float accent = 0;

    int velocity;

    try
    {
    accent = getHighestValue();
} catch (InterruptedException e)
{
    // TODO Auto-generated catch block
    e.printStackTrace();
}

velocity = (int) accent;

return velocity;
}

protected float getHighestValue()  throws InterruptedException
{
float highest;
float[] value = new float[20];
String txt = "";

for(int i = 0; i < value.length; i++)
{
    Thread.sleep(1);
    value[i] = accelerometer_z;
    txt += "Reading at: " + i + " ms returns: " + value[i] + "\n";
}

Arrays.sort(value);
highest = value[19];

textView2.setText(txt);

return highest;
} 
```

float accelerometer_z 在我的主要活动中初始化，并通过 onSensorChanged 不断更新。

我的问题是我没有得到一系列值，我只从 getHighestValue 方法中的 for 循环中得到一个值。

干杯/M

添加了 onSensorChanged：

```
@Override
  public void onSensorChanged(SensorEvent event) 
  {
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) 
{
        getAccelerometer(event);
}

  }

  private void getAccelerometer(SensorEvent event) 
  {

float[] value = event.values;

// Movement
 accelerometer_x = value[0];
accelerometer_y = value[1];
accelerometer_z = value[2];

 accelationSquareRoot = (accelerometer_x * accelerometer_x + accelerometer_y * 
                            accelerometer_y + accelerometer_z * accelerometer_z)
    / (SensorManager.GRAVITY_EARTH * SensorManager.GRAVITY_EARTH);

long actualTime = System.currentTimeMillis();
if (accelationSquareRoot >= 2) 
{
  if (actualTime - lastUpdate < 200) 
  {
    return;
  }
  lastUpdate = actualTime;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:58:19.580

在您的 for 循环中，您被迫`Thread`与

```
...
    Thread.sleep(1);
... 
```

其中预期的参数（在您的情况下为 1）以毫秒为单位。

我想，你的意图不是强迫`Thread`睡眠 1 毫秒，因为你想要传感器的实际值。所以应该是这样的：

```
...
    Thread.sleep(x * 1000);
... 
```

其中`x`是关于灵敏度定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:42:29.890

似乎只能同时运行一个事件处理程序，这就是为什么我只能从 gethighestValue 获得一个值的原因。只要 onTouch 中的 motionEvent 正在等待新的输入，就永远不会允许 onSensorChanged 进行新的读取。

我通过让 onSensorChanged 实现这样的方法解决了这个问题：

```
private void getAccelerometer(SensorEvent event)
    {
        float[] value = event.values;

        float accelerometer_x = value[0];
        float accelerometer_y = value[1];
        float accelerometer_z = value[2];

        accReadingZ.add(accelerometer_z);

        while(accReadingZ.size() > LIST_SIZE)
            accReadingZ.removeFirst();
    } 
```

accReadingZ 在这里是一个大小为 10 个元素的类成员。

我现在可以使用 Collections.max(accReadingZ) 来获得一系列读数中的最高值。

# java - JPA 2 持久化上下文规范

> ID：13305400
> 
> 赞同：2
> 
> 时间：2012-11-09T09:35:45.653
> 
> 标签：java, jpa-2.0, specifications

我目前正在研究官方的 JPA 2 最终规范。规范中是否包含以下[声明？](http://weblogs.java.net/blog/caroljmcdonald/archive/2009/08/21/jpa-caching)

> 实体管理器保证在单个持久性上下文中，对于任何特定的数据库行，将只有一个对象实例。

要么我没有清楚地理解规范，要么我只是找不到证明引用的陈述是规范的一部分的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T21:20:38.387

不，规格不提供这样的保证。但在我看来，这是隐含的假设。

在实践中，有时同一个表映射到两个不同的实体。其中一个被视为只读实体。例如，只读实体可用于报告目的，并且作为优化仅包含其他实体中的字段子集。例如，这可以如下完成：

```
@Entity
public class EntityA {    
    @Id private Integer id;
    @Lob
    byte[] tooHeavyToLoadAlways;
}

@Entity
@Table(name="EntityA")
public class EntityALightWeight {
    @Id private Integer id;
} 
```

对于 JPA，这两个实体之间没有联系，因此请注意只有第一个被修改，第二个被刷新是应用程序的责任。因此只能谨慎使用，因为 EntityALightWeight 可以从数据库中刷新，但永远不会包含在同一事务中对 EntityA 所做的更改。

# android - 在手机重启时取消广播接收器。

> ID：13305405
> 
> 赞同：0
> 
> 时间：2012-11-09T09:36:14.690
> 
> 标签：android, networking, broadcastreceiver

我有 BroadcastReceiver (NetworkListener)。

```
public class NetworkReceiver extends BroadcastReceiver {
Context context;
public static NetworkReceiver instance = new NetworkReceiver();
public static InnerObservable observable = instance. new InnerObservable();
... 
```

此接收器发送通知：

```
@Override
public void onReceive(Context ctx, Intent intent) {

    Log.d("tag", "onReceive");

    NotificationManager notif = (NotificationManager) ctx.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(android.R.drawable.ic_dialog_alert,"bla-bla-bla",System.currentTimeMillis()); 
```

清单文件：

```
 <receiver 
        android:name="com.mypckg.network.NetworkReceiver" >
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        </intent-filter>
    </receiver> 
```

它工作正常。但手机重启后，它继续工作。如何避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:42:31.453

如果您希望广播接收器在应用程序启动时开始工作，那么您应该以编程方式从您的主要活动中注册/取消注册它：

```
private BroadcastReceiver networkReceiver;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    networkReceiver = new NetworkReceiver();
    registerReceiver(networkReceiver, ConnectivityManager.CONNECTIVITY_ACTION);
}

@Override
protected void onDestroy() {
    super.onDestroy();
    unregisterReceiver(networkReceiver)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:44:43.367

您可以使用 PackageManager 来禁用在您的清单中注册的 BroadcastReceiver，检查[此线程以获取代码。](https://stackoverflow.com/questions/5624470/enable-and-disable-a-broadcast-receiver)

另一种解决方案是动态注册此接收器，可能在服务中。只要服务处于活动状态，接收器就会处于活动状态并已注册，因此您可以通过启动/停止服务轻松切换接收器。这可能不适合您的用例，但是您没有提供太多详细信息。

# c# - 应用程序中的反序列化失败，提取的方法工作

> ID：13305408
> 
> 赞同：0
> 
> 时间：2012-11-09T09:36:19.037
> 
> 标签：c#, xml, xsd, linqpad, xml-deserialization

这是一个奇怪的问题。

我正在通过 TCP 连接接收 XML 消息并且接收 XML 消息工作正常，我已经测试过，我收到的 XML 消息是

```
<command><printreq><![CDATA[Printed text \r\n Second line with {012} code and <LF> code]]></printreq></command> 
```

当我尝试在我的应用程序中解析它时，我得到了异常`"<command xmlns=''> was not expected."`

但是，我已经提取了涉及到 LINQPad 的方法来测试它们，并且它在那里工作。那么有没有我没有看到的隐藏设置？

这是通过 XSD.exe 为我的架构生成的代码：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class command {

    private object itemField;

    private ItemChoiceType1 itemElementNameField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("printreq", typeof(string))]
    [System.Xml.Serialization.XmlChoiceIdentifierAttribute("ItemElementName")]
    public object Item {
        get {
            return this.itemField;
        }
        set {
            this.itemField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlIgnoreAttribute()]
    public ItemChoiceType1 ItemElementName {
        get {
            return this.itemElementNameField;
        }
        set {
            this.itemElementNameField = value;
        }
    }

    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
    [System.SerializableAttribute()]
    [System.Xml.Serialization.XmlTypeAttribute(IncludeInSchema=false)]
    public enum ItemChoiceType1 {

        /// <remarks/>
        printreq,
    }
} 
```

这是我用于反序列化字节数组的方法（字节来自 UTF8 解码字符串）：

```
public static object DeserializeFromXmlBytes(byte[] objectBytes, Type targetType)
{
    var readerSettings = new XmlReaderSettings
    {
        ConformanceLevel = ConformanceLevel.Fragment        
    };

    var serializer = new XmlSerializer(targetType);
    using (var memStream = new MemoryStream(objectBytes))
    {
        var xmlReader = XmlReader.Create(memStream, readerSettings);
        return serializer.Deserialize(xmlReader);
    }
} 
```

当我简单地在 LINQPad 中执行此操作时，它可以工作：

```
string xml = "<command><printreq><![CDATA[Printed text \r\n Second line with {012} code and <LF> code]]></printreq></command>";
var b = System.Text.Encoding.UTF8.GetBytes(xml);
var o = DeserializeFromXmlBytes(b, typeof(command));
Console.WriteLine(o); // Outputs what I expect 
```

但是，在我的应用程序中反序列化失败，但我提到的例外。有什么我在这里看不到的吗？

当我对根元素进行硬编码时，例如：

```
var xRoot = new XmlRootAttribute
{
    ElementName = "command",
    IsNullable = true
}; 
```

它解析没有错误，但命令是错误的。生成的命令具有子元素`breakend`（也已指定，但未在我的代码中列出）而不是`printreq`. 这越来越奇怪了。

好的，`breakend`第一种类型是否被列为`ItemChoiceType1`所以它可能试图做“尽力而为”的事情？

**编辑：**我终于修复了它，这是一个奇怪的情况，一些编译文件保留在内存中或其他东西中，刚刚删除并重新创建了一些文件，现在它可以工作了。结案。

# c# - 一个方法应该有多少条返回语句？

> ID：13305412
> 
> 赞同：3
> 
> 时间：2012-11-09T09:36:34.123
> 
> 标签：c#, java, coding-style

> **可能重复：**
> [为什么一个函数应该只有一个出口点？](https://stackoverflow.com/questions/4838828/why-should-a-function-have-only-one-exit-point)

我听说该方法理想情况下必须有一个（不再有）`return`声明。是真的？

例如，哪种方法更好？

```
//1
public Object getResult() {
   Object result; 

   if (someValue != null) {  **// NOT null checking**

       // initializing result
   }
   return result;
}

// 2
public Object getResult() {
   Object result; 

   if (someValue == null) {  // **null checking**
       return null;
   }
   // initializing result
   return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:49:20.603

结构化编程的准则之一是不要在函数（方法）中使用多个退出点。原因主要是可读性（试着画一个有多个出口点的算法，它看起来不会很好）。然而，今天很少有人在编写一些代码之前绘制算法，现代 IDE 可以检测到无法访问的代码等。多出口点方法允许更大的灵活性，因此您可以创建一个在代码之前返回的方法，如果它继续会产生一些副作用与执行。此外，这在大多数情况下可以防止使用复杂的条件测试，因此可以更优化（即更快）。当然，编译器如何更改您的代码是一个难题，但我认为它们中的大多数都将您的单退出方法变成了多退出方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:42:29.970

如果您在 Eclipse 中使用 checkstyle 那么它肯定是*一个*. 但是在某些情况下，如果您在这些情况下只能有一个`return`语句，那么它会使编写代码变得更加困难（例如，在某些递归方法中，您正在测试基本情况）我认为您应该使用上下文中最好的语句。

所以这***取决于上下文***。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T09:45:04.813

> 理想情况下，多少个 return 语句必须有一个函数？

我只会说一个，但不以可读性为代价。

如果有多个 on`return`语句可以提高代码的可读性，则应该选择一个函数的多个退出点。

最后，这取决于个人选择和项目编码指南。

如果我要在您提供的两个版本的代码之间进行选择，我会选择第二个版本。对我来说，它更具可读性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T09:47:39.353

我说你绝对可以有不止一个退货声明。如果您有“只有一个退货声明”的规则，您可能会得到这样的结果：

```
if (value != null) {
  if (value.fieldA != null) {
     if (value.fieldB != null) {
        // initialize
     }
 } 
 return result; 
```

而不是这个：

```
if (value == null) {
   return null;    
}
if (value.fieldA == null) {
   return null;
}
if (value.fieldB == null) {
   return null;
}
// initialize
return result; 
```

我发现第二个更易读，更容易调试，在某些情况下可能更有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T09:44:16.547

如果您只有一个退货声明；然后代码看起来更干净。但是对 return 语句的数量没有硬性限制。所以你可以有多个返回语句。但这也不意味着要有 10 个返回语句。

我觉得如果你有 2-3 个返回语句；方法看起来更干净，更容易理解。如果返回语句的数量增加，则表明您应该执行代码重构并将一种方法转换为多种方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T09:47:24.250

这是一个可能每个人都有自己看法的问题。但我认为没有一个明确的正确或错误答案。我通常不关心返回语句的数量。如果有理由坚持某种方法，那么我会退出它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T09:40:53.237

在第二个示例中，将返回 null 并阅读下一条规则。当我检查函数接受的值时，我添加了 return 语句，因为如果我的值不好，我不想处理所有函数，所以我返回 null 或抛出异常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-09T09:42:10.950

**> 两者都是正确的。它取决于您的项目的场景。**

例如：

在您的代码的第二种情况下，如果我在此下面有很多行代码

```
**if (someValue == null) 
  {  
    // **null checking**
   return null;
  }** 
```

那么从“ **if** ”语句返回是正确的

如果您在第一个示例（代码）中的代码非常少，那么在每个 if 条件中设置返回值并返回它@end 就可以了

**>也参考[这个](https://stackoverflow.com/questions/36707/should-a-function-have-only-one-return-statement)**

# postgresql - PostGIS Raster 中其他栅格记录的平均栅格记录

> ID：13305414
> 
> 赞同：4
> 
> 时间：2012-11-09T09:36:37.403
> 
> 标签：postgresql, postgis, raster, gdal

我在 postgresql 中有栅格表，我使用 PostGIS 栅格创建它。如果考虑到 Null 像素值不应该参与平均操作，我想获得 3 个栅格记录的平均栅格。我的意思是生成的栅格记录的像素值应该是 3 个现有栅格记录的相应像素值的平均值。栅格记录包含一些具有 Null 值的像素，并且 Null 值不应参与计算。是否可以？[sample_data_link](https://www.dropbox.com/sh/wnkc6uk6ua02w0q/2B0e2cnnhb)是图像样本数据的链接。如果您的系统中安装了 Postgis 2.0，则 windows 命令行中的以下命令以及您复制示例数据的文件夹将创建结果：
`raster2pgsql -r *_cropped.tif -F -I myschema.mytable > cropped_1.sql` 和
`raster2pgsql -r *_cropped.tif -F -I myschema.mytable > cropped_1.sql`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:29:19.867

您可以将其转换为数组并对其进行计算，然后将数组转换为栅格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T14:13:54.863

ST_Union 上的[文档](http://postgis.refractions.net/docs/RT_ST_Union.html)引用了 postgis 源代码中的[一些代码](http://trac.osgeo.org/postgis/browser/trunk/raster/scripts/plpgsql/st_union.sql?rev=9324)，这些代码在 plpgsql 中实现了各种功能。

您可以将其中之一作为基础并对其进行修改以忽略空像素。第 253 行看起来很有希望。（注意：生成的代码将获得 GPL 许可）。

# matlab - 卡在 Matlab 的子图机制上，用于匹配图像的 vlfeat 点

> ID：13305416
> 
> 赞同：5
> 
> 时间：2012-11-09T09:36:45.260
> 
> 标签：matlab, computer-vision, sift, image-comparison, vlfeat

我在 Matlab 中做 vlfeat，我在[这里](https://stackoverflow.com/questions/1500498/how-to-use-sift-algorithm-to-compute-how-similiar-two-images-are)关注这个问题。

以下是我的简单测试图像：

左图：

![大号](../Images/53113d37719afdc6f7bc058109584e94.png)

右图：

![R](../Images/0afb5fc6e0d7d0a4cbf3dab38f0351e9.png)

我在这里用两张简单的图像做了一个简单的测试（右图只是左图的旋转版本），我得到了相应的结果：

![测试](../Images/f657f2d144865c21503ef18d9e43c710.png)

它有效，但我还有一个要求，即匹配两个图像的 SIFT 点并显示它们，如下所示：

![像这样](../Images/d94e3123d4ff2673d16d150be9c6ba96.png)

我知道 vl_ubcmatch 返回 2 个匹配索引数组，并且将它们映射到两个图像上的哪个点到哪个点不是问题。但是，我目前被困在 matlab 的程序中。我找到[了这个](https://stackoverflow.com/questions/3635411/draw-line-between-two-subplots)。但这只有在子情节保持这种状态时才有效。当您将图像添加到子图中时，大小会发生变化并且标准化失败。

这是我的代码：（im 和 im2 是图像。f、d 和 f2、d2 分别是来自 2 个图像的 vl_sift 函数的帧和描述符）

```
 [matches score] = vl_ubcmatch(d,d2,threshold);%threshold originally is 1.5

if (mode >= 2)%verbose 2

    subplot(211);
    imshow(uint8(im));
    hold on;
    plot(f(1,matches(1,:)),f(2,matches(1,:)),'b*');

    subplot(212);
    imshow(uint8(im2));
    hold on;
    plot(f2(1,matches(2,:)),f2(2,matches(2,:)),'g*');

end

if (mode >= 3)%verbose 3

     [xa1 ya1] = ds2nfu(  f(1,matches(1,:)),  f(2,matches(1,:)));
     [xa2 ya2] = ds2nfu( f2(1,matches(2,:)), f2(2,matches(2,:)));

    for k=1:numel(matches(1,:))

        xxa1 = xa1(1, k);
        yya1 = ya1(1, k);
        xxa2 = xa2(1, k);
        yya2 = ya2(1, k);

        annotation('line',[xxa1 xxa2],[yya1 yya2],'color','r');
    end
end 
```

上面的代码产生了这个：

![一个](../Images/b035987a27b07c84b51651ff46d054a6.png)

我认为 subplot 不是解决此类问题的好方法。Matlab中是否有更好的方法？如果可能的话，我想要一个空面板之类的东西，我可以绘制我的图像、自由绘制线条和自由缩放，就像以 OpenGL 风格绘制 2D 游戏一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T13:25:51.247

从 zplesivcak 的建议来看，是的，这是可能的，毕竟不是那么成问题。这是代码：

```
%  After we have applied vl_sift with 2 images, we will get frames f,f2, 
%  and descriptor d,d2 of the images. After that, we can apply it into 
%  vl_ubcmatch to perform feature matching:

[matches score] = vl_ubcmatch(d,d2,threshold); %threshold originally is 1.5

% check for sizes and take longest width and longest height into
% account
if (size(im,1) > size(im2,1))
    longestWidth = size(im,1);       
else
    longestWidth = size(im2,1);
end

if (size(im,2) > size(im2,2))
    longestHeight = size(im,2);
else
    longestHeight = size(im2,2);
end

% create new matrices with longest width and longest height
newim = uint8(zeros(longestWidth, longestHeight, 3)); %3 cuz image is RGB
newim2 = uint8(zeros(longestWidth, longestHeight, 3));

% transfer both images to the new matrices respectively.
newim(1:size(im,1), 1:size(im,2), 1:3) = im;
newim2(1:size(im2,1), 1:size(im2,2), 1:3) = im2;

% with the same proportion and dimension, we can now show both
% images. Parts that are not used in the matrices will be black.
imshow([newim newim2]);

hold on;

    X = zeros(2,1);
    Y = zeros(2,1);

    % draw line from the matched point in one image to the respective matched point in another image.
    for k=1:numel(matches(1,:))

        X(1) = f(1, matches(1, k));
        Y(1) = f(2, matches(1, k));
        X(2) = f2(1, matches(2, k)) + longestHeight; % for placing matched point of 2nd image correctly.
        Y(2) = f2(2, matches(2, k));

        line(X,Y);

    end 
```

这是测试用例：

![tc](../Images/a509595f963cbff8efced408c0294afb.png)

通过修改问题中一张图像的画布宽度和高度，我们看到上面的算法会处理这个问题并相应地显示图像。未使用的区域将是黑色的。此外，我们看到该算法可以分别匹配两个图像的特征。

**编辑：**

或者，由 Maurits 建议，为了更清洁和更好的实施，请查看[Lowe SIFT matlab wrappers](http://www.cs.ubc.ca/~lowe/keypoints/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-10T20:48:53.397

如果您的光盘上已经安装了 Matlab 计算机视觉库，您可以简单地使用

```
M1 = [f(1, match(1, :)); f(2, match(1, :)); ones(1, length(match))];
M2 = [f2(1, match(2, :)); f2(2, match(2, :)); ones(1, length(match))];

showMatchedFeatures(im,im2,[M1(1:2, :)]',[M2(1:2, :)]','montage','PlotOptions',{'ro','g+','b-'} ); 
```

# javascript - 多维表单数组到 JavaScript 对象

> ID：13305417
> 
> 赞同：1
> 
> 时间：2012-11-09T09:36:49.323
> 
> 标签：javascript, jquery, json, forms, underscore.js

我正在开发一个需要输入数据行的 Backbone 应用程序（读取：对象数组）。

我有这样的表格：

```
<tr>
    <td><input type="text" name="items[][qty]"></td>
    <td><input type="text" name="items[][job_number]"></td>
    <td><input type="text" name="items[][description]"></td>
    <td><input type="text" name="items[][purchase_order]"></td>
</tr>
[...] 
```

具有动态行数。

我希望能够以以下形式检索数据：

```
{
    items: [
        {
            qty: [val],
            job_number: [val],
            description: [val],
            purchase_order: [val]
        },
        [...]
    ]
} 
```

我找到的最接近的解决方案是[Aaron Shafovaloff](http://aaronshaf.wordpress.com/code/jquery-plugin-serialize-multi-dimensional-form-data-into-json/)，但它不支持输出中的数组（仅限对象）。我可以修改他的代码来做我需要的事情，但我想我会先在这里问，因为重新发明轮子没有意义。

我在我的项目中使用 jQuery 和 Underscore，因此可以访问它们的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-23T19:36:47.843

检查[https://github.com/serbanghita/formToObject](https://github.com/serbanghita/formToObject)

```
var myFormObj = new formToObject('myFormId');
// console.log(myFormObj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:49:46.697

我有这种方式来获取多行文本框：

```
 aItems = new Array();
    $("table tbody tr").each(function(){
        var $this = $(this);

        aItems.push({
            qty:$this.find('input[name="qty"]').val(),
            job_number: $this.find('input[name="job_number"]').val(),
            description:$this.find('input[name="description"]').val(),
            purchase_order:$this.find('input[name="purchase_order"]').val()
        });

    }); 
```

这个怎么样：

```
 aItems = new Array();
    $("table tbody tr").each(function(){
        var items = {};

        $(this).find('input').each(function(){
            items[$(this).attr('name')] = $(this).val();
        }
        aItems.push(items);

    }); 
```

# c# - ASP.Net 应用程序池使用太多内存

> ID：13305420
> 
> 赞同：0
> 
> 时间：2012-11-09T09:36:59.527
> 
> 标签：c#, asp.net

我为在线游戏创建了 asp.net asmx 服务。当它在生产服务器 asp.net 应用程序上运行时，使用 1.5 - 3 GB 内存。

当我使用 ANTS 内存分析器时，我看到 70% 的应用程序内存是空闲的，而 C# 对象使用 100 - 200Mb。

我如何让 asp.net 将空闲内存返回给操作系统？如果我将在一台服务器上运行几个类似的应用程序，我会出现内存溢出异常。

使用的技术：ASP.Net v4 Windows 2008 C# Small 使用 asp.net cashe 处理硬数据库请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:56:10.520

不幸的是，这是可能的。您可能知道 CLR 在堆中使用 2 种引用对象，标准对象堆和大型对象堆。标准对象堆在垃圾收集器之后进行碎片整理，但大型对象堆没有，因为 CLR 团队认为这会导致性能问题。这就是为什么 LOH 在使用过程中会消耗大量内存的原因。

大于 85000 字节的对象在 LOH 中分配，因此我的建议是分析您的代码以找到可以在 LOH 中分配的对象，并尝试使它们更小。

希望这会有所帮助。顺便说一句，目前还没有 100% 的解决方案，我们都深受其害。

# c - 如何用C杀死管理线程？

> ID：13305422
> 
> 赞同：3
> 
> 时间：2012-11-09T09:37:01.910
> 
> 标签：c, pthreads, kill, sigkill

我有以下代码。构建应用程序是 myprogram。

如果我启动 myprogram 然后 killall myprogram 然后我再次启动 myprogram 然后 myprogram 崩溃。

崩溃的原因是由于第一次启动创建的管理线程在第二次启动之前没有正确清除。

因此，在第二次启动时，myprogram 尝试使用 pthread 创建线程，并且尚未删除旧的线程管理，因此会导致崩溃。

有没有办法在我第一次启动结束时或在我第二次启动**C**开始时终止管理线程？

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

pthread_t test_thread;

void *thread_test_run (void *v)
{
    int i=1;
    while(1)
    {
       printf("into thread %d\r\n",i);
       i++; 
       sleep(1);
    }
    return NULL
}

int main()
{
    // ps aux | grep myprogram  ---> show 1 myprogram (1 for the main application)

    pthread_create(&test_thread, NULL, &thread_test_run, NULL);

    // ps aux | grep myprogram  ---> show 3 myprogram
    // (1st for the main application)
    // (2nd for the management thread. thread which manage all created thread)
    // (3rd for the created thread)

    sleep (20);  

    pthread_cancel(test_thread);

    // ps aux | grep myprogram  ---> show 2 myprogram and
    // (1st for the main application)
    // (2nd for the management thread. thread which manage all created thread)

    sleep(100);
    // in this period (before the finish of myprogram)
    // I execute killall to kill myprogram 
    // and then immediately I re-launch myprogram and then the program crash
    // because the management thread is not immediately killed

} 
```

**顺便提一句：**

linux使用`libuClibc-0.9.30.1.so`并根据这个问题[How to kill all subprocess created with pthread_create after canceling a thread?](https://stackoverflow.com/questions/13290306/how-to-kill-all-subprocess-created-with-pthread-create-after-cancelling-a-thread) 此 libc 使用 linux 线程实现，`pthread`并且不使用带有 NPTL（“Native posix thread library”）实现的 libc，因此仅针对这种 libc 情况创建管理线程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:45:13.287

我认为您遇到了这个问题，因为您根据Redhat[的 The Native POSIX Thread Library for Linux](http://www.cs.utexas.edu/~witchel/372/.../POSIX_Linux_Threading.pdf) 论文使用杀死了*线程管理器：*`killall`

> 如果管理器线程被杀死，则进程的其余部分处于必须手动清理的状态。

并且还[比较了 Linux 线程模型](http://comet.lehman.cuny.edu/jung/cmp426697/NPTL.pdf)：

> 致命信号能够杀死所有线程。这方面的 LinuxThreads 设计一直是一致的。**一旦一个进程接收到一个致命信号，线程管理器就会用相同的信号杀死所有其他线程（进程）**。

这意味着如果你杀死线程管理器，它就没有机会杀死其他线程，所以你应该只使用`kill -p pid`not杀死主进程`killall`

我认为如果主进程正常存在，或者收到信号，线程管理器在完成杀死并等待其他线程时最终也会被杀死，但是，它还提到如果你调用`pthread_exit`所有其他进程将在返回之前被杀死主要的：

> 如果主进程调用 pthread_exit()，**则进程不会终止。主线程进入睡眠状态，当所有其他线程都被杀死时，管理线程的工作是唤醒主线程。**

# django - 如何从数据库显示到 Django 数据字段？

> ID：13305425
> 
> 赞同：0
> 
> 时间：2012-11-09T09:37:06.807
> 
> 标签：django, widget, datafield

我使用 DateField 选择日期并使用它插入日期值。

```
 form = DateField(widget=SelectDateWidget(years=BIRTH_YEAR_CHOICES)) 
```

然后，我想使用来自数据库的 HTML 中的 DateField(form) 显示选定的值

```
 (when create profileForm())
 Birth: selectbox(------), selectbox(------), selectbox(------) 
 : solved

 (if edit profile page using profileForm())
  Birth: selectbox(1987) selectbox(10) selectbox(25)
 -> I want it 
```

如何将值插入 DataField，并显示 selectDateWidget？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:37:29.467

你的问题不是太清楚。

您应该发布更多来自您`forms.py`和您的`views.py`. 你是用`forms.Form`还是`forms.ModelForm`？

无论哪种方式，我认为您的问题是关于`initial`在您的表单中使用数据。

请注意，此字段特别接受 python`datetime`对象（请参阅：[http](http://docs.python.org/2/library/datetime.html) ://docs.python.org/2/library/datetime.html ）。

[https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values) 使用是这样的：

```
f = ContactForm(initial={'my_date_field': datetime.datetime.now()}) 
```

如果你使用`ModelForm`的是这样的：

```
f = ContactForm(instance=Contact.objects.get(pk=1)) 
```

这将初始化模型（以及数据库）中的所有值。

# asp.net - 如何在客户端获取当前登录的 Windows 用户 ID

> ID：13305426
> 
> 赞同：1
> 
> 时间：2012-11-09T09:37:11.630
> 
> 标签：asp.net, windows, permissions, login-name

我有一个 Web 应用程序，如果用户的 Windows 登录名在 Web 配置的应用程序设置中，则允许用户访问这些页面。

例如：登录用户名：SampleDomain\SampleUser

在 Web.config 上：

```
<appSettings>
    <add key=AuthorizedUsers value="SampleUser,SampleBooger" />
</appSettings>
<authentication mode="Windows"/> 
```

**成功场景：SampleUser 应该可以浏览网站。*

我能够在开发过程中成功地做到这一点（在我的机器上本地），但是当我将它部署到服务器然后我尝试从我的本地机器上浏览它时，它获得的 Windows 登录名是 NT AUTHORITY\NETWORK SERVICE 所以它重定向到我的自定义错误页面。我，SampleUser，在 AuthorizedUsers 中。我应该可以浏览它。

请帮我。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:46:37.410

您需要使用 ASP.NET 模拟功能。使用模拟时，ASP.NET 应用程序可以使用发出请求的用户的 Windows 身份（用户帐户）执行。模拟通常用于依赖 Microsoft Internet 信息服务 (IIS) 对用户进行身份验证的应用程序中。

可以使用以下代码在 web config 中配置此类行为：

```
<configuration>
  <system.web>
    <identity impersonate="true"/>
  </system.web>
</configuration> 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/xh507fc5%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/xh507fc5%28v=vs.100%29.aspx)

# html - 在 CSS 中的背景颜色之上使用背景图像

> ID：13305427
> 
> 赞同：8
> 
> 时间：2012-11-09T09:37:19.890
> 
> 标签：html, css, background, psd

![在此处输入图像描述](../Images/c4cb51777ea0800bcd9e4464755f5aeb.png)我在 PSD 中设计了一个网页，并且正在对其进行转换。在我的主要内容中，我有一个纯色的背景颜色，但我在一个单独的图层上有一个发光效果，它出现在背景颜色的顶部。

我有一个包含所有代码的容器，我有一个页眉、主页和页脚。在主体中，我添加了纯色背景颜色，还添加了我从 PSD 切片的发光的背景图像。但是，纯色背景颜色似乎没有显示，它只是显示发光效果。下面的图片显示了它的外观和外观：

* * *

![在此处输入图像描述](../Images/c59207014d65475d7726469d57d2c99b.png)

![在此处输入图像描述](../Images/0d66826d88a62432c39f49ad4129d6f0.png)

CSS：

```
Html {
background: white;
}

#container {
width: 955px;
height: 900px;
margin: 0px auto 0px auto;
}

#main{
background: url(../images/slogan.png) top left no-repeat;
background-color: #282d37;
height: 900px;
width: 955px;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-09T10:26:01.040

您可以使用多背景：

```
#main {
  width: 900px;
  height: 955px;
  background: url(../images/slogan.png) no-repeat, #282d37;
}​ 
```

说明：使用`background`css 选项，先添加图片，而不是背景颜色。

**[现场演示](http://jsfiddle.net/4wALR/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:20:41.260

问题是您的样式相互覆盖。您需要放置第`background-color`一个，并使用`background-image`而不是`background`. 在它们自己的属性中声明所有值，这样该`background`属性就不会覆盖那个值`background-color`。

```
#main{
  background-color: #282d37;
  background-image: url(../images/slogan.png);
  background-position: left top;
  background-repeat: no-repeat;
  height: 900px;
  width: 955px;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:42:21.813

一种方法是使用包装器包装#main 元素，您可以在其中设置背景颜色，然后设置匹配它的不透明度（如果需要）

```
#mainwrapper{
  background-color: red;
  height:100px;
  width:100px;
}

#main{
  background: url(http://www.w3schools.com/css/klematis.jpg) repeat;
  opacity: 0.6;
  filter:alpha(opacity=60); 
  height:100px;
  width:100px;
}

<div id="mainwrapper">
  <div id="main">
  </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:39:55.220

尝试更换

```
background: url(../images/slogan.png) top left no-repeat;
background-color: #282d37; 
```

和

```
background: #282d37 url(../images/slogan.png) no-repeat top left; 
```

# jquery-mobile - 我可以在 Mobiscroll 上交换取消/设置按钮的位置吗？

> ID：13305428
> 
> 赞同：2
> 
> 时间：2012-11-09T09:37:20.350
> 
> 标签：jquery-mobile, jquery-plugins, mobiscroll

我正在使用 Mobiscroll 2.0.3。日期选择器视图在左侧提供确定按钮，在右侧提供取消按钮。我可以交换位置吗，比如左边的取消按钮和右边的设置按钮？因为我在网站上以与 Moviscroll 相反的方式放置了确定/取消按钮。如果每个按钮的位置不同，用户会感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:14:33.363

您应该能够仅使用 CSS 并覆盖样式来做到这一点。我是为滚轮视图做的，但想法是一样的（还要注意，这是针对 mobiscroll 1.5.3 的，所以标记和类可能已经改变）

```
/* overide stlyes for mobi date/time picker */
.dwb-c 
{
    float:left;
     margin-bottom:12px;
}

.dwb-s 
{
    float:right;
    margin-bottom:12px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-16T15:11:11.857

我知道已经很晚了，但如果有人试图用谷歌搜索它，试试这个[https://docs.mobiscroll.com/jquery/datetime#opt-buttons](https://docs.mobiscroll.com/jquery/datetime#opt-buttons)

您可以设置要显示的按钮数组，如果您想显示默认按钮，可以使用字符串名称。因此，如果您想改变方向，只需设置如下按钮：

```
buttons: ["cancel", "set"] 
```

# watin - WatIn 是否支持 IE10 浏览器？

> ID：13305430
> 
> 赞同：2
> 
> 时间：2012-11-09T09:37:24.347
> 
> 标签：watin

我们有适用于 IE7、8 和 9 的测试用例，需要对 IE10 的支持。

WatIN 支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:17:53.033

我不这么认为。Watin 的 IE 对象不支持 IE 10。当你调试时，你会发现 IE 对象的所有属性都会引发 Exception

# tomcat - Tomcat 7.0.x 中是否已经包含 struts 2 框架？

> ID：13305435
> 
> 赞同：0
> 
> 时间：2012-11-09T09:37:50.580
> 
> 标签：tomcat, struts2, tomcat7

实际上，我的客户要求我给他以下支持：

*   雄猫 7.0.x
*   支持所有 jar 的 Struts 2 框架

现在我运行一个 Apache 服务器，我还读到 struts 2 框架默认包含在 Tomcat 4.0+ 中

这是真的吗？我的意思是，如果我在我的服务器中安装 Tomcat 7.0.x，我是否必须做其他任何事情才能使其能够使用 struts 2 框架？

我对这件事没有太多的了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:07:05.573

如果你想在Tomcat中部署一个Struts2应用程序，你必须和项目建立一个war，然后把它放到Tomcat的webapps目录下。在战争中你必须包含必要的 Struts2 库，因为它们默认不包含在 Tomcat 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:37:08.130

不，Struts 2 肯定不包含在 Tomcat 中。理清风景。. .

Tomcat 是 Java Servlet 规范的实现。本规范描述了一个 API，用于对服务器的请求进行通用处理，通常是 http ( web ) 请求。因此，servlet API 具有封装服务器将请求 URL 映射到服务器端资源（即用 java 代码编写的 servlet）的低级类，将请求的参数传送到该服务器端资源，然后编写响应将由客户端返回。servlet api 几乎没有添加更高级别的功能。Tomcat 是 servlet 规范的实现。

Struts 2 是众多 Java“Web 应用程序框架”之一。这些框架是在 Servlet API 之上编写的，并为想要编写“Web 应用程序”的开发人员提供了许多可重用的花里胡哨。这些花里胡哨的功能包括验证您的传入数据、提供视图层和 java 代码（jsp 或速度模板）之间的关注点的清晰分离等等！

您可能不想看到包含 Struts 2 的 Tomcat，因为您可能不想使用 Struts 2。您可能决定使用 Spring 的 Web 框架、Grails 或众多选择之一。

# .net - RavenDB - MapReduce 复杂聚合

> ID：13305443
> 
> 赞同：3
> 
> 时间：2012-11-09T09:38:14.170
> 
> 标签：.net, linq, mapreduce, ravendb, reduce

我有这样的文件：

```
 order : 1
     event : { timestamp: 1/1/2012, employeeName: "mick" },
     event : { timestamp: 1/1/2012, employeeName: "mick" },
     event : { timestamp: 1/2/2012, employeeName: "rick" },
     event : { timestamp: 1/3/2012, employeeName: "mick" }

  order : 2
     event : { timestamp: 1/2/2012, employeeName: "mick" },
     event : { timestamp: 1/2/2012, employeeName: "rick" } 
```

我想运行 map-reduce 查询以返回按日期分组的结果列表，其中包含每个订单的员工事件计数。

在这种情况下，Mick 在 1/1 的一个订单中有 2 个事件。在 11 月 2 日和 3 日，其他所有日子里，员工在每个订单上都有一个单一的事件。所以我需要一个 MAP 函数，其结果如下所示：

```
{ orderId: 1, date: 1/1/2012, employee: "mick", orderEventsCount: 2 },
{ orderId: 1, date: 1/2/2012, employee: "rick", orderEventsCount: 1 },
{ orderId: 2, date: 1/2/2012, employee: "mick", orderEventsCount: 1 },
{ orderId: 2, date: 1/2/2012, employee: "rick", orderEventsCount: 1 },
{ orderId: 1, date: 1/3/2012, employee: "mick", orderEventsCount: 1 } 
```

然后我需要一个 REDUCE 函数，它将获取这些结果并仅按日期分组，并在单个订单上返回每天有多个事件的员工计数：

```
{ date: 1/1/2012, multipleEventsPerOrdercount: 1 },
{ date: 1/2/2012, multipleEventsPerOrdercount: 0 },
{ date: 1/3/2012, multipleEventsPerOrdercount: 0 } 
```

由于 Mick 是唯一一位在单个订单上在单个日期发生多个事件的员工，因此结果仅返回了一个员工在某个日期的一个订单上有多个事件的计数。

在 .NET 中使用 LINQ 编写这个 map-reduce Raven 查询的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:22:21.030

假设您的课程如下所示：

```
public class Order
{
  public string Id  { get; set; }
  public List<Event> Events { get; set; }
}

public class Event
{
  public DateTime Timestamp { get; set; }
  public string EmployeeName { get; set; }
} 
```

然后您要求的索引将如下所示：

```
public class Orders_EventCountsByDate : 
    AbstractIndexCreationTask<Order, Orders_EventCountsByDate.Result>
{
  public class Result
  {
    public DateTime Date { get; set; }
    public double Count { get; set; }
  }

  public Orders_EventCountsByDate()
  {
    Map = orders => from order in orders
                    from evt in order.Events
                    let subtotal = order.Events.Count(x => x.EmployeeName == evt.EmployeeName && x.Timestamp == evt.Timestamp)
                    select new
                    {
                      evt.Timestamp.Date,
                      Count = subtotal > 1 ? (1.0 / subtotal) : 0
                    };

    Reduce = results => from result in results
                        group result by result.Date
                        into g
                        select new
                        {
                          Date = g.Key,
                          Count = g.Sum(x => x.Count)
                        };
  }
} 
```

你会像这样使用它：

```
var counts = session.Query<Orders_EventCountsByDate.Result,
                           Orders_EventCountsByDate>(); 
```

这里的诀窍是，您要在地图中确定您希望每个事件对计数做出多少贡献。如果只有一个事件，您贡献零。当有多个事件时，每个事件占总数的一小部分。这些分数稍后会在 reduce 中汇总，使您返回接近整数。双浮点数学应该让你回到整数，但为了安全起见，你仍然可能希望在客户端代码中四舍五入到最接近的整数。

这还假设所有事件都在同一个时区，并且您不关心夏令时的变化，或者时间是 UTC。如果两者都不是，那么您应该使用 DateTimeOffset 并且在决定每个员工的 Day 概念时需要考虑更多。

# java - 即使具有指定键的项目已经存在，在访问排序的 LinkedHashMap 上的 put() 是否是结构修改？

> ID：13305448
> 
> 赞同：1
> 
> 时间：2012-11-09T09:38:30.467
> 
> 标签：java, linkedhashmap

标题说明一切：

据我了解，文档中有一点含糊不清。首先，文档谈到了按插入顺序排列的 LinkedHashMap，并指出迭代顺序在插入已映射的项目时不会受到影响。

然后，引入了access-ordered LinkedHashMap，并坚持“仅仅一个get就是一种结构修改”，即影响迭代顺序。

但是，尚不清楚现有项目的“put()”是否是结构修改。

我希望答案是肯定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:54:04.487

这段简单的代码应该可以回答您的问题：

```
final Map<String, String> x = new LinkedHashMap<>(10, 0.75f, true);
x.put("a", "a");
x.put("b", "b");
System.out.println(x);
x.put("a", "a");
System.out.println(x); 
```

印刷

```
{a=a, b=b}
{b=b, a=a} 
```

解释：`put`在现有的key下，即使是相同的值，也是结构修改。

# php - 表单未在 onchange 事件中提交

> ID：13305453
> 
> 赞同：2
> 
> 时间：2012-11-09T09:38:59.280
> 
> 标签：php, forms, select, drop-down-menu, submit

当我从下拉列表中选择任何选项时抛出错误，即**this.form.submit() 未定义** - 我的代码是这样的：

```
<form action="entity_report.php" method="GET" onsubmit="return makeSelection();">
    <div align="center"">
      <select name="state" onchange="this.form.submit();">
        <option>Choose One To Submit This Form</option>
        <option value="CA">CA</option>
        <option value="VA">VA</option>
     </select>
   </div>
   <input type="submit" value="Click here">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:45:04.500

您可以编写 jquery 函数来选择更改 javascript

```
$("state").change(function() {
   $(this).closest("form").submit();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:47:43.057

可能与`<form ... onsubmit="return makeSelection();">`？！尝试为您的表单设置一个 id 并通过 id 访问它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T09:50:42.690

你也可以给你的表单一个 name="myform" 并使用： onchange="myform.submit();"

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T09:50:53.547

`this.form.submit()`无法定义。在这种情况下，“this”指的是您的选择标签。您的选择标签没有名为“表单”的子项。

要做到这一点，您需要使用`name`属性为表单命名，即

```
<form name="myform" action="entity_report.php" method="GET" onsubmit="return makeSelection();"> 
... 
</form> 
```

并通过文档访问它：

```
<select name="state" onchange="document.myform.submit();"> 
```

**编辑**
在测试时我发现，手动提交表单时不会调用 onsubmit 事件。我发现的解决方法是`document.myform.onsubmit();`在调用之前添加`submit()`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-09T10:44:02.010

您可以使用javascript函数提交您的表单..

```
<select name="state" onchange="submit_my_form(this);">

<script>
function submit_my_form(myfield)
{
   myfield.form.submit();
}
</script> 
```

# amazon-ec2 - 适用于 Amazon IaaS 的云管理

> ID：13305454
> 
> 赞同：1
> 
> 时间：2012-11-09T09:39:02.927
> 
> 标签：amazon-ec2, amazon-s3, cloud, paas, eucalyptus

我计划在 Cloud 上迁移一些产品，这些产品将用作开发人员社区的平台。简而言之，我正在尝试为我的产品托管 PaaS 供应商，开发人员可以在构建和开发过程中使用这些供应商。

计划如下：

1.  我正在尝试使用 Amazon IaaS（S3、EC2）作为硬件。
2.  我需要一个云管理软件，它可以安装在我的一个本地系统的某个地方，并且可以管理亚马逊云。
3.  在云管理软件的帮助下，我将在亚马逊云上部署我的所有产品。
4.  我将开发并向我的最终用户（开发者社区）提供 API，以将我的服务用作 PaaS。

我想要实现的目标如下：

1.  IaaS 方面的供应商独立性。假设明天我搬到另一个 IaaS 提供商。
2.  云管理软件的客户支持。
3.  易于设置和使用云管理软件。

目前评价：

1.  我尝试查看 Eucalyptus，这听起来很有希望，但我仍然无法确定这是否会按照我的要求支持公共云设置。我相信这更像是一个私有云设置。

2.  如果有人可以帮助我比较其他可用选项，那将帮助我解决我的问题。例如 RightScale、OpenStack、CloudStack、Nimbula 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:46:08.380

那里有几个 PaaS 提供商。这里有一个比较：[寻找 PaaS 提供商的建议](https://stackoverflow.com/questions/9542784/looking-for-paas-providers-recommendations)

免责声明：我在 GigaSpaces 工作，开发[Cloudify](http://www.cloudifysource.org)开源 PaaS 堆栈。Cloudify 满足您的大部分要求，尤其是供应商独立性 - 它支持大量 IaaS 提供商，包括：EC2、HP、Rackspace、Azure 等。

Cloudify 确实要求其管理服务器与其运行的应用程序在同一云中运行，以便它可以使用私人通信而不是通过互联网收集监控信息。为什么要在本地运行管理服务器？

# css - 如何使用 ExtJS 将 css 规则应用于 html 元素？

> ID：13305456
> 
> 赞同：0
> 
> 时间：2012-11-09T09:39:06.913
> 
> 标签：css, extjs4, opacity

我正在使用**ExtJS 4**在面板和滑块字段内绘制图像。每当滑块字段的值发生变化时，我都想更改图像的不透明度。

我知道CSS`opacity`的`filter:alpha(opacity=);`规则可以应用于会改变其不透明度的图像。

但是我不知道如何将此 css 规则应用于图像。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:00:15.803

您可以使用[Ext.dom.Element.setOpacity](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-setOpacity)方法：

```
Ext.fly('image-id').setOpacity(0.5); // this will make img with id 'image-id' become half-transparent 
```

这是[现场演示](http://jsfiddle.net/molecule/Af3Rt/)

## 更新

如果您使用的是[Ext.Img 组件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Img)，则必须执行以下操作：

```
imgCmp.getEl().setOpacity(0.5); 
```

# c# - 如何使标签页的宽度适合 TabControl 的宽度

> ID：13305457
> 
> 赞同：6
> 
> 时间：2012-11-09T09:39:09.393
> 
> 标签：c#, width, tabcontrol, tabpage

我有一个带有两个标签页的 TabControl。

![在此处输入图像描述](../Images/ed55034a06d826f79c4ddc55dda5761e.png)

如何使标签页适合 TabControl 的宽度，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/5a8e90ad1ce87d5dadb7d20b76f6d905.png)

我尝试使用以下代码行，但它也不起作用。

```
tabControl1.SizeMode = TabSizeMode.FillToRight; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-17T16:40:02.830

首先，设置您的 tabControl1 大小模式：

```
tabControl1.SizeMode = TabSizeMode.Fixed; 
```

然后你必须重新计算标签页标题的宽度：

```
tabControl1.ItemSize = new Size(tabControl1.Width / tabControl1.TabCount, 0); 
```

注意： 1\. 值为 0 表示默认高度。2\. 将标签页添加到标签控件后重新计算项目大小。考虑调整控件大小时会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:43:28.217

在 TabControl 上使用 SizeMode：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.sizemode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.sizemode.aspx)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-02-19T15:40:16.010

这是解决此类问题的非法方法

增加填充 (X,Y) X 100 // 代表一些允许的数字 Y 3 // 代表一些允许的数字。

# c# - 从代码中的长数字中提取三个数字

> ID：13305458
> 
> 赞同：0
> 
> 时间：2012-11-09T09:39:10.257
> 
> 标签：c#, asp.net, algorithm, math

我正在使用 ASP.NET C# 和 MySQL 构建自己的分片解决方案。对于每一行的 Id，我使用以下内容：

*   分片 ID - 整数 (1-65535)
*   表类型 ID - Small Int (1-65535)
*   递增编号 (1 - 4294967295)

例如，一个 ID 应该在 url 中，如下所示：

```
http://mywebsite.com/folders/65535655354294967297 
```

我想知道的是如何将这些数字组合成一个大数字，以便稍后提取数据。例如，我不会使用 1 作为分片 ID，我可能需要你 00001 因为稍后通过对整数进行除法来提取该数字会更容易。

那么我该怎么做呢，用三个单独的数值构建一个长数字然后能够在代码中提取它们的最佳方法是什么？

我在 C# 中寻找最**有效的方法**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:43:32.397

你几乎描述了你的问题的答案。为每个数字定义一个固定宽度。

```
int iShardId = 12; // Fixed width of 5
int iTableTypeId = 840; // Fixed width of 5
long lIncremental = 967295; // Fixed width of 10

string sMyId = String.Concat(iShardId.ToString("00000"), iTableTypeId.ToString("00000"), lIncremental.ToString("0000000000")); 
```

然后，您可以稍后（通过 iHttpModule 或其他）使用 RegEx 解析字符串：

```
RegEx rMyText = new RegEx(@"/(?<shard>[0-9]{5})(?<table>[0-9]{5})(?<inc>[0-9]{10})/?$");
Match mMyValues = rMyText.Match(Request.Url.AbsolutePath);

if (mMyValues.Success) {
    int iShardId = Convert.ToInt32(mMyValues["shard"].Value);
    int iTableTypeId = Convert.ToInt32(mMyValues["table"].Value);
    long lIncremental = Convert.ToInt64(mMyValues["inc"].Value);
}
else {
    //The input didn't match
} 
```

RegEx 旨在作为解析数字的示例，但显然取决于您计划如何实施，您应该调整它以确保输入限制为您期望的值，方法是使用开始/终止斜杠或字符串结尾($)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:31:24.370

您可以使用数字的十六进制表示

```
ushort ShardId=1;
ushort TableTypeId = 100;
uint IncrementalNumber = 1000;

string url = ShardId.ToString("X4") + TableTypeId.ToString("X4")
                                    + IncrementalNumber.ToString("X8");

var i1 = Convert.ToUInt16(url.Substring(0, 4), 16);
var i2 = Convert.ToUInt16(url.Substring(4, 4), 16);
var i3 = Convert.ToUInt32(url.Substring(8, 8), 16); 
```

**或者**

```
string url = (((ulong)ShardId << 48) | ((ulong)TableTypeId << 32) | IncrementalNumber)
             .ToString("X16");

var u  = Convert.ToUInt64(url,16);
var i1 = (ushort)(u >> 48);
var i2 = (ushort)((u >> 32) & 0xffff);
var i3 = (uint)(u & 0xffffffff); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:01:53.837

一种解决方案可能是使用二进制数并将它们附加在一起以形成一个数字。

> *   分片 ID - 整数 (1-65535)
> *   表类型 ID - Small Int (1-65535)
> *   递增编号 (1 - 4294967295)

Shard Id 和 Table Id 都需要 16 bit，Incremental number 需要 16 bit。这意味着您可以用 64 位表示数据。

例子：

**分片 ID**

十二月：7

斌：0000 0000 0000 0111

**表类型 ID**

十二月：2435

斌：0000 1001 1000 0011

**增量数**

十二月：23456457

斌：0001 0110 0101 1110 1010 1100 1001

**最终编号**

连接二进制值，如

分片id + 表类型id + 增量数

仓：0000 0000 0000 0111 0000 1001 1000 0011 0000 0001 0110 0101 1110 1010 1100 1001

12月：1980783105796809

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:45:15.433

几个选项，大致从最长（最可读？）到最短（最不可读）

*   用零填充每个数字，直到它可能是最长的 ( `00001000010000000001`)
*   用连字符或斜杠（`1-1-1`或`1/1/1`）分隔数字
*   将你的两个`ushort`s 和组合`uint`成 a`ulong`并将*其*放在URL 中
*   *将这八个字节组合成一个数组，Base64编码*并放入URL

我会选择第二个——它可能在大多数情况下都是最短的，并且是最易读的。

# mysql - MySQL 按查询分组，附加行

> ID：13305459
> 
> 赞同：1
> 
> 时间：2012-11-09T09:39:10.970
> 
> 标签：mysql, sql

我有一张像下面这样的表格`trades`

```
traders   qty

abc      50000
xyz      35000
pqr      25000
xxx      10000
yyy      20000
uuu      15000
abc      2000
xyz      3000
pqr      1500 
```

我需要将前 3 名明智的交易者和所有其他人放在单独的一行中。

```
SELECT trader,SUM(qty)
FROM traders
GROUP BY trader DESC
LIMIT 3 
```

从上面的查询中，我可以得到如下答案

```
tr        qty

abc      52000
xyz      38000
pqr      26500 
```

但我的要求如下

```
tr        qty

abc      52000
xyz      38000
pqr      26500
other    45000   ----- with this column for all other traders except the largest 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:52:35.170

Try this query -

```
SELECT
  IF(t2.trader IS NULL, 'other', t1.trader) trader,
  SUM(qty) qty
FROM traders t1
  LEFT JOIN (
  SELECT trader, SUM(qty) FROM traders
    GROUP BY trader
    ORDER BY SUM(qty) DESC
    LIMIT 3) t2
  ON t1.trader = t2.trader
GROUP BY trader
ORDER BY IF(t2.trader IS NULL, 1, 0), qty DESC

+--------+-------+
| trader | qty   |
+--------+-------+
| abc    | 52000 |
| xyz    | 38000 |
| pqr    | 26500 |
| other  | 45000 |
+--------+-------+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:32:51.313

这是另一个：

```
(select trader, sum(qty)
 from trades
 group by trader
 order by sum(qty) desc
 limit 3)
union
(select 'other', sum(qty)
 from (select trader, sum(qty) qty
       from trades
       group by trader
       order by sum(qty) desc
       limit 3, 4000000000) t); 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!8/ba2f2/2/0)用于玩耍。

# ssi - SSI：与 CGI 环境变量的字符串比较失败

> ID：13305461
> 
> 赞同：0
> 
> 时间：2012-11-09T05:44:31.753
> 
> 标签：ssi

我目前正在开发个人网站。这不是我第一次这样做，但这是我第一次尝试实施 SSI。然而，我用 if-else 指令让自己陷入了困境，该指令使用 CGI 环境变量之一作为比较的一部分。

即使经过一些有限的调试尝试，我拥有的所有输出和文档都意味着正在进行的比较*应该*彻底失败。情况并非如此，并且 if-else 指令进行了错误的评估。

这是文件中的代码`index.shtml`：

```
<head>
    <!--#set var="page" value="Home" -->
    <!--#include file="headlinks.shtml" -->
    <style>
        img#ref { float: right; margin-left: 8px; border-width: 0px;  }
    </style>
</head> 
```

这是文件中的代码`headlinks.shtml`：

```
<title><!--#echo var="page" --> &ndash; <!--#echo var="HTTP_HOST" --></title>
<!--#set var="docroot" value="${DOCUMENT_ROOT}" -->
<!--#echo var="docroot" -->
<!--#if expr="( $docroot != '/Applications/MAMP/htdocs' ) || ( $docroot != '/home/dragarch/public_html' )" -->
    <link rel="stylesheet" type="text/css" href="../style.css">
    <link rel="shortcut icon" type="image/svg+xml" href="../favicon.svg" />
<!--#else -->
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="shortcut icon" type="image/svg+xml" href="favicon.svg" />
<!--#endif --> 
```

这是文件的输出`index.shtml`：

```
 <title>Home &ndash; dragarch</title>

/Applications/MAMP/htdocs

    <link rel="stylesheet" type="text/css" href="../style.css">
    <link rel="shortcut icon" type="image/svg+xml" href="../favicon.svg" /> 
```

两者`style.css`和`favicon.svg`都在文档根目录中`index.shtml`，因此 if 指令应该失败并默认为 else 指令的输出。如您所见，虽然根据 echo 指令的输出，文档根目录（当前是我自己笔记本上的 MAMP htdocs 文件夹）是正确的，但 if-else 指令中的比较无法正确比较字符串。

我将此页面用于我的文档：[http ://httpd.apache.org/docs/2.2/mod/mod_include.html](http://httpd.apache.org/docs/2.2/mod/mod_include.html)

我完全不知道为什么会这样，在这里需要一些帮助。

**编辑：**我应该注意这`dragarch`是我配置`/etc/hosts`为指向 127.0.0.1 的主机名，因此我可以测试站点而无需使用`localhost`. 它对任何东西的功能都没有真正的影响，只是充当一个更漂亮的主机名来使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:16:17.420

简单检查：尝试在 else 之前将 if 语句分成两个条件。看看哪个被错误地评估为真。如果两个条件都是，那么您需要仔细检查条件是如何被评估的。也许由于 expr = 语句，它们都返回 true？我对 ssi 不太了解，但我知道在某些语言中，说 var_name = 总是正确的，而 == 是一个比较。

# joomla - 是否可以直接从同一组件的另一个模型的模型方法调用

> ID：13305463
> 
> 赞同：0
> 
> 时间：2012-11-09T09:39:13.330
> 
> 标签：joomla, joomla2.5, joomla1.7, joomla1.6

是否可以直接从同一组件的另一个模型的模型方法调用？

是否有任何默认的 Joomla 选项可以以这种方式调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:46:28.127

据我所知**没有**。否则会破坏 MVC 架构。

你能做的是

*   复制您要使用的功能。
*   从控制器调用这两种方法。

我对你的建议是，即使你想出了办法，也不要这样做。它会弄乱你的整个架构。

如果您有任何问题，请询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:41:28.863

是的你可以

它不会破坏 MVC 架构，

你可以像这样检查

```
if(!class_exists('VirtueMartModelUser')) require(JPATH_VM_ADMINISTRATOR.DS.'models'.DS.'user.php');

            $usermodel = VmModel::getModel('user');

            $currentVMuser = $usermodel->getUser(); 
```

首先，您应该在所需模型中包含模型文件，然后创建对象。然后像上面一样调用。这个例子是 Virtue-mart 的使用方法

# php - 从图像 URL 中截断其他标签

> ID：13305467
> 
> 赞同：2
> 
> 时间：2012-11-09T09:39:32.163
> 
> 标签：php

我希望在 wordpress 主题的帖子/评论字段中发布时自动嵌入图像网址。

我已经让这段代码在functions.php中工作：

```
function content_magic($content)
{
    $content = get_the_content();
    $m = preg_match_all('!http://[a-z0-9\-\.\/]+\.(?:jpe?g|png|gif)!Ui', $content, $matches);
    if ($m) {
        $links = $matches[0];
        for ($j = 0; $j < $m; $j++) {
            $content = str_replace($links[$j], '<img src="' . $links[$j] . '">', $content);
        }
    }
    return $content;
}

add_filter('the_content', 'content_magic'); 
```

但是：一旦您通过 wordpress iphone 应用程序发布它就不再起作用了，因为来自 iphone 应用程序的图像帖子会自动在末尾添加标签alt **="20121108-172156.jpg" class="alignnone size-full" />**后”

如何使用上面的代码截断从 ?:jpe?g|png|gif" 到 "/> 的 url 结束后的 "alt" 和 "class" 标签？

# python - 尽管使用了 Eclipse/PyDev 中的未使用导入警告

> ID：13305468
> 
> 赞同：3
> 
> 时间：2012-11-09T09:39:33.577
> 
> 标签：python, eclipse, scipy, pydev

我在我的文件中导入一个绘图包，如下所示：

```
import matplotlib.pyplot as plt 
```

并且稍后在我的代码中成功使用此导入（！）

```
fig = plt.figure(figsize=(16,10)) 
```

但是，Eclipse 告诉我：“未使用的导入：plt 发现于：matplotlib.pyplot”

可能有一个非常简单的解决方案，但我在互联网上找不到。我是 Eclipse 和 PyDev 的新手，但是应该有一些方法可以让 Eclipse 将 pyplot 识别为 plt？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:05:34.950

我觉得很尴尬。Ignacio 和 Bakurio 的评论已经指出了正确的方向。其实旁边

```
import matplotlib.pyplot as plt 
```

我也在进口

```
from pylab import * 
```

这些导入相互干扰，因为 pylab 也在导入 pyplot。删除后一个导入会导致 Eclipse 中不再出现警告消息。下次我将粘贴完整的源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:51:41.073

I solve this problem going to Project -> Properties -> PyDev - PYTHONPATH and click on "Force restore internat info".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T08:39:07.617

我有同样的问题。我安装了 matplotlib 1.3.1（Win 32 位；Python 2.7.6）。在我的 lib/site-packages/ 文件夹中，实际上有两个不同的 matplotlib 文件夹，一个包含实际代码和二进制文件，另一个名为 matplotlib-1.3.1-py2.7.egg-info。我只是删除了以 ...egg-info 结尾的那个，它起作用了。有关解释，请参阅此线程： http: [//matplotlib.1069221.n5.nabble.com/ANN-matplotlib-1-3-0rc1-td41151.html](http://matplotlib.1069221.n5.nabble.com/ANN-matplotlib-1-3-0rc1-td41151.html)。

# paypal - 您用于进入 PayPal 系统的链接包含格式不正确的项目金额。我该如何解决这个问题？

> ID：13305474
> 
> 赞同：2
> 
> 时间：2012-11-09T09:39:57.883
> 
> 标签：paypal

当我提交此表单时，Paypal 向我显示以下错误：您用于进入 PayPal 系统的链接包含格式不正确的项目金额。

我尝试了所有可能的方法，但无法解决。请帮助我的人。

我该如何解决这个问题？

```
<form action="
https://www.sandbox.paypal.com/cgi-bin/webscr
" method="post" name="psubmit" id="psubmit">
<input type="hidden" name="charset" value="utf-8" />
<input type="hidden" name="page_style" value="" />
<input type="hidden" name="custom" value="_25_259_0_58__" />
<input type="hidden" name="business" value="neo@ibacs.co.uk" />
<input type="hidden" name="return" value="http://etakeout.co.uk/orders/wait" />
<input type="hidden" name="cancel_return" value="http://etakeout.co.uk/" />
<input type="hidden" name="shopping_url" value="http://etakeout.co.uk/" />
<input type="hidden" name="notify_url" value="http://etakeout.co.uk/orders/ipn_handler" />
<input type="hidden" name="redirect_cmd" value="_xclick" />
<input type="hidden" name="rm" value="2" />
<input type="hidden" name="bn" value="inetfoods" />
<input type="hidden" name="mrb" value="R-6C7952342H795591R" />
<input type="hidden" name="pal" value="9E82WJBKKGPLQ" />
<input type="hidden" name="first_name" value="asf" />
<input type="hidden" name="last_name" value="asfas" />
<input type="hidden" name="address1" value="asdfasf" />
<input type="hidden" name="city" value="Alcester" />
<input type="hidden" name="state" value="" />
<input type="hidden" name="zip" value="CF 245" />
<input type="hidden" name="country" value="GB" />
<input type="hidden" name="email" value="neo@ibacs.co.uk" />
<input type="hidden" name="no_shipping" value="1" />
<input type="hidden" name="upload" value="1" />
<input type="hidden" name="currency_code" value="GBP" />
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="handling_cart" value="0" />
<input type="hidden" name="discount_amount_cart" value="0.00" />

<input type="hidden" name="item_name_1" value="Starter - New Base Item español -  Chicken==1.5 pizza" />

<input type="hidden" name="quantity_1" value="2" />

<input type="hidden" name="amount_1" value="5.985" />

<input type="hidden" name="item_name_2" value="Delivery Cost" />

<input type="hidden" name="quantity_2" value="1" />

<input type="hidden" name="amount_2" value="4.00" />

<input type="hidden" name="item_name_3" value="CC Fee" />

<input type="hidden" name="quantity_3" value="1" />

<input type="hidden" name="amount_3" value="7.00" />

</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T06:50:32.453

你正拥有的 `<input type="hidden" name="amount_1" value="5.985" />`

应该是`<input type="hidden" name="amount_1" value="5.98" />`因为 PayPal 最多接受小数点后 2 位。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:57:27.497

您正在发送“5.985”英镑。这不是一个正确的数量。
将此更改为“5.98”，然后重试。

# html - 为什么图像在 chrome 中缩放时移动位置，但在 firefox 或 safari 中却没有

> ID：13305478
> 
> 赞同：0
> 
> 时间：2012-11-09T09:40:17.300
> 
> 标签：html, css, firefox, google-chrome, safari

我将图像放置在左侧，两个在右侧。当我调整浏览器窗口的大小时，图像会缩放。

我遇到的问题是，在 Safari 和 Firefox 中，图像会正确缩放并保持位置，但在 Chrome 中，当我调整浏览器大小时，图像位置会发生变化。

**这是一个显示问题的 jsfiddle 示例：**

[http://jsfiddle.net/sSZFA/6/](http://jsfiddle.net/sSZFA/6/)

以及代码的副本：

```
 #col1{
           width:50%;
           float:left; 
        }

        #col2{
           width:50%;
           float:left; 
        }

        #img1{
           width:50%;
           float:right;
           clear:both;
        }

        #img2{
           width:50%;
           float:right;
           clear:both;
        }

        #img3{
           width:50%;
        }
    ​

            <div id="col1">
        <img id="img1" src="http://fueledbyramen.com/fun/site/mpufun.jpg">
        <img id="img2" src="http://fueledbyramen.com/fun/site/mpufun.jpg">
        <img id="img3" src="http://upload.wikimedia.org/wikipedia/commons/e/e9/Official_portrait_of_Barack_Obama.jpg"/>
    </div>
    <div id="col2">
        <img id="img1" src="http://fueledbyramen.com/fun/site/mpufun.jpg">
        <img id="img2" src="http://fueledbyramen.com/fun/site/mpufun.jpg">
        <img id="img3" src="http://upload.wikimedia.org/wikipedia/commons/e/e9/Official_portrait_of_Barack_Obama.jpg"/>
</div> 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:00:57.687

只需将图像 3 的宽度**从 50% 更改为 49%** ....

```
#img3 {
width:49%;
} 
```

[这里的](http://jsfiddle.net/sSZFA/7/)工作示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:47:22.070

将图像宽度更改为 49% 会产生一些难看的差距，但我终于找到了解决方案。

似乎是“clear:both”css 让 chrome 发疯了，所以我重新排序了元素并删除了对 clear 属性的需求，现在它可以工作了。

如果有人可以提供我的原始代码在 chrome 中不起作用的原因，我很想知道。

[http://jsfiddle.net/AC5BJ/1/](http://jsfiddle.net/AC5BJ/1/)

```
#col1{
   width:50%;
    float:left; 
}

#col2{
   width:50%;
    float:left; 
}

#img1{
    width:50%;
    float:right;
    /*clear:both;*/
}

#img2{
    width:50%;
    float:right;
    /*clear:both;*/
}

#img3{
    width:50%;
    float:left;
}

    <div id="col1">
        <img id="img3" src="http://upload.wikimedia.org/wikipedia/commons/e/e9/Official_portrait_of_Barack_Obama.jpg"/>
        <img id="img1" src="http://fueledbyramen.com/fun/site/mpufun.jpg">
        <img id="img2" src="http://fueledbyramen.com/fun/site/mpufun.jpg">  
    </div>
    <div id="col2">
        <img id="img3" src="http://upload.wikimedia.org/wikipedia/commons/e/e9/Official_portrait_of_Barack_Obama.jpg"/>
        <img id="img1" src="http://fueledbyramen.com/fun/site/mpufun.jpg">
        <img id="img2" src="http://fueledbyramen.com/fun/site/mpufun.jpg">
</div> 
```

# mysql - 如何处理 MySQL 错误号 1040：连接过多？

> ID：13305487
> 
> 赞同：1
> 
> 时间：2012-11-09T09:40:31.783
> 
> 标签：mysql, jsp

我正在使用两个数据库连接来完成特定任务。一切正常，但我正在使用分页显示数据，并且在转到下一页时，有时 MySQL 会崩溃。

之后，当我使用 localhost/xampp/url 打开 MySQL 数据库时，出现以下错误：

`#1040 Too many connections`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:20:23.027

有许多打开的连接。使用后应在应用程序中关闭它们。

另一种变体是设置[wait_timeout](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_wait_timeout)服务器变量 -*服务器在关闭非交互式连接之前等待其活动的秒数*。未使用的连接将自动关闭。

# javascript - 如何在主干关系中创建嵌套表单？

> ID：13305491
> 
> 赞同：1
> 
> 时间：2012-11-09T09:40:43.220
> 
> 标签：javascript, backbone.js, backbone-relational

我希望能够在主干中同时创建嵌套模型。我知道如何使用骨干关系来创建父模型。然后一旦保存，我可以通过骨干关系创建子模型。但是，我希望能够同时创建父模型和子模型，这可能是不可能的，因为我只能在创建父模型后才能创建子模型。

例如，假设我正在创建一个论坛，就像很棒的骨干关系教程中的论坛 - [http://antoviaque.org/docs/tutorials/backbone-relational-tutorial/](http://antoviaque.org/docs/tutorials/backbone-relational-tutorial/)。我想同时创建一个线程和一条消息（通过单击一个按钮），而不是创建一个线程然后创建一条消息。这可能吗？有没有更好的方法可以做到这一点，我没有想到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:57:33.557

找到[https://github.com/powmedia/backbone-forms](https://github.com/powmedia/backbone-forms)。

它对我来说非常有效。

# jquery - 决定 Jquery 插件结构

> ID：13305494
> 
> 赞同：1
> 
> 时间：2012-11-09T09:40:52.293
> 
> 标签：jquery, jquery-plugins

我是制作 jquery 插件的新手，这是我在许多链接上遇到的插件结构。我从未真正了解如何在此页面上使用插件方法[Jquery Authoring Plugins](http://docs.jquery.com/Plugins/Authoring) ... 谁能向我解释我应该在以下结构中的当前结构中编写私有函数和公共函数的位置？以及“i”和“el”由什么组成？

```
(function ( $ ) {

    $.fn.myPlugin = function (options) {
    options = $.extend( {}, $.fn.myPlugin.defaults, options );
        return this.each(function (i, el) {

        });
    };

    $.fn.myPlugin.defaults = {
    ///options here for overiding
};
}(jQuery)); 
```

# jquery - Jquery mobile 1.2 和 PhoneGap 2.2.0 页面过渡闪烁

> ID：13305498
> 
> 赞同：3
> 
> 时间：2012-11-09T09:41:02.213
> 
> 标签：jquery, iphone, cordova, jquery-mobile, ios6

在使用 JqueryMobile 1.2 和 PhoneGap/Cordova 2.2.0 进行项目时，我遇到了页面转换问题，当我在元素上使用 data-transition= 滑动时，它的工作速度非常慢'，如果我使用 data-transition= none 我得到屏幕之间出现黑色闪烁，我在使用 IOS 6.1 的 iphone 4 上工作我已经尝试了所有我发现听到的答案，但没有任何效果，当我使用 data-transition="none" 导航时仍然会出现黑色闪烁

我希望有人可以帮助我'听到的是代码：

```
<!doctype html>
<html>
<head>
    <title> jQuery Mobile Boilerplate - Collapsibles Content</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- jQuery Mobile CSS bits -->
    <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />

    <!-- if you have a custom theme, add it here -->
    <link rel="stylesheet"  href="themes/jQuery-Mobile-Boilerplate.css" />

    <!-- Custom css -->
    <link rel="stylesheet" href="css/custom.css" />

    <!-- Javascript includes -->
    <script src="js/jquery-1.8.2-min.js"></script>
    <script src="js/mobileinit.js"></script>
    <script src="js/jquery.mobile-1.2.0.min.js"></script>
    <script src="js/application.js"></script>
</head> 
<body> 
    <div data-role="page">

        <div data-role="header">
            <a href="../index.html" data-icon="home">Home</a>
            <h1>Collapsible Content</h1>
        </div>

        <div data-role="content">

<h2>Collapsible Content Blocks</h2>

<div data-role="collapsible">
    <h3>Content header</h3>
    <p>I'm the content that shows/hides when you click the header just above me.</p>
</div>

<h2>Default to open</h2>

<div data-role="collapsible" data-collapsed="false">
    <h3>Content header</h3>
    <p>I'm the content that shows/hides when you click the header just above me.</p>
</div>

<h2>Themed</h2>

<div data-role="collapsible" data-content-theme="c">
    <h3>Content header</h3>
    <p>I'm the content that shows/hides when you click the header just above me.</p>
</div>

<h2>Themed - content only</h2>

<div data-role="collapsible" data-theme="b" data-content-theme="e" >
    <h3>Content header</h3>
    <p>I'm the content that shows/hides when you click the header just above me.</p>
</div>

<h2>Nested Collapsibles</h2>

<div data-role="collapsible" data-collapsed="false" data-theme="e" data-content-theme="c">
    <h3>Outer header</h3>
    <p>I'm the content inside the main collapsible.</p>

    <div data-role="collapsible" data-theme="c" data-content-theme="c">
        <h3>I'm a nested collapsible with a child collapsible</h3>
        <p>I'm a child collapsible.</p>
        <div data-role="collapsible" data-theme="d" data-content-theme="d">
            <h3>Nested inside again.</h3>
            <p>Three levels deep now.</p>
        </div>
    </div>

    <div data-role="collapsible" data-content-theme="c">
        <h3>Collapsed list</h3>
        <ul data-role="listview" data-inset="true" data-theme="d">
            <li><a href="index.html">red</a></li>
            <li><a href="index.html">blue</a></li>
            <li><a href="index.html">yellow</a></li>
        </ul>
    </div><!-- /section 3 -->
</div>

        </div>

        <div data-role="footer" data-theme="c">
            <p>&copy; 2012 - jQuery Mobile Boilerplate</p>
        </div>  

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:45:57.773

试着把它放在你的 JS 中：

```
 $(document).bind("mobileinit", function(){
    $.mobile.defaultPageTransition = 'none'; 
    $.mobile.pushStateEnabled = false;  
  }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T15:55:09.803

*这是我的第一篇文章，所以我没有足够的声誉来发表评论，但我会尽力提供某种答案。*

我正在努力解决同样的问题。在我看来，这是一个 iOS 6 的问题，例如 iOS 5 和我的 Android 2.2+ 中没有闪烁。我用`$.mobile.defaultPageTransition = 'none';`.

**尝试回答：**
检查您的页面样式中是否有overflow-x:hidden。当我在我想要导航的页面的样式中删除“overflow-x:hidden”时，闪烁消失了。

**额外信息：**
不幸的是，在我的情况下，因为我需要页面是本机可滚动的，所以“overflow-x:hidden”对于固定位置的页眉和页脚保持固定是必要的，而没有页面以获得 iOS Webkit 浏览器橡皮筋效果.

如果您将页面的背景颜色更改为例如红色，您可能会看到红色而不是黑色闪烁。至少对我来说是这样。这应该意味着这是一个页面背景 z-index 问题。JQuery Mobile 在早期版本中存在 z-index 和闪烁问题。

我尝试做的另一件事是`$("#myPage").css('overflow-x', "");`在调用之前从当前页面中删除 overflow-x:hidden with`$.mobile.changePage([...]);`以及我正在导航到的页面。然后在 pageshow 事件中，我用`$("page).css('overflow-x', "hidden");`. 但这并没有解决问题。我没有橡皮筋效果，但背景仍然弹出。

我希望这个答案和额外信息可以帮助任何人使用例如 Phonegap/Cordova 在 iOS 6 上使用 JQuery Mobile 1.2.0 研究这个新问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T17:58:52.733

目前没有解决这个问题的方法。

我什至读到一些IOS也有这个问题。

我知道在android上它更糟。但是我不是“MAC”用户，所以我不能 100% 测试这个。尽管我知道 Iphone 用户应该不会有这个问题。

*Android + Jquery Mobile 就是有这个问题。*

Page Transitions 按预期在 android 上工作，有页面闪烁、双闪等。即使您关闭转换，您仍然会得到网站从旧时代开始制作的旧“闪烁”。

有一些“他们报告说他们已经修复了 50%”，但是这些解决方案是非常个性化的，并且根本不适用。

我觉得我不想给你一半的答案，我宁愿告诉你 Jquery Mobile 正在开发中，如果我在你那里，我会等它:)

我希望我的回答能给你你需要的想法:)

# xcode - XCode 4.3 部分禁止使用情节提要在表格视图中导航

> ID：13305499
> 
> 赞同：2
> 
> 时间：2012-11-09T09:41:05.083
> 
> 标签：xcode, storyboard, tableview

我正在使用情节提要创建一个 iPhone 应用程序。我有一个表格视图和 4 个部分。现在我尝试禁止在第 3 节和第 4 节中导航到详细信息，因为本节中的值是来自第 1 节和第 2 节中的值的计算值。

我能做些什么？我尝试使用 didSelectRowAtIndexPath: 来执行此操作，但不幸的是，在每种情况下都会调用详细视图。非常感谢大家的每一个提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:30:17.417

如果您将 segue 的源更改为包含表格的视图控制器而不是表格视图单元格，那么您可以将`didSelectRowAtIndexPath:`其用作决定是否前进到细节控制器的地方。在您**确实**需要详细信息的部分中，您将使用调用`performSegueWithIdentifier:`来触发它。

# javascript - 使用 jQuery 管理 HTML 列表项

> ID：13305501
> 
> 赞同：2
> 
> 时间：2012-11-09T09:41:06.677
> 
> 标签：javascript, jquery, html, list

我拥有的 HTML 列表的一部分：

```
<ul id="listMenu" style="list-style-type:none; margin-left:-50">
    <li> __Menu1
        <ul class="menuitems">
            <li>Item A1</li>
            <li>Item A2</li>
        </ul>
    </li>

    <li> __Menu2
        <ul class="menuitems">
            <li>Item B1</li>
            <li>Item B2</li>
        </ul>
    </li>

    <li> __Menu3
        <ul class="menuitems">
            <li>Item C1</li>
            <li>Item C2</li>
        </ul>
    </li>

    <li> __Menu4
        <ul class="menuitems">
            <li>Item D1</li>
            <li>Item D2</li>
        </ul>
    </li>
</ul> 
```

我的目标是在单独的 js 文件中使用 jQuery 来管理列表。

*   最初，我只需要显示顶级菜单（__Menu1、__Menu2..）。
*   单击顶级菜单时，我想展开并显示子项目（项目 A1 和 A2）
*   当再次单击顶层时，子项需要消失（可能使用 toggle() ？）
*   当一个子项目被点击时，它需要用它的名字来提醒

我设法让子列表最初不显示：

```
$('ul:gt(1)').hide(); // Hide all submenus initially 
```

但除此之外，我真的不知道如何访问每个列表中的单个项目。我知道这可能很简单，但我只是不知道如何开始，而且我读过的所有其他信息都比我知道的更先进。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:47:44.420

试试这个：

```
$(document).ready(function() {
    $(".menuitems").hide();
    $(".menuitems").find("li").click(function(e) {
        $(this).parent().show();
        alert($(this).text());
        e.stopPropagation();
    });
    $(".menuitems").parent().click(function() {
        $(this).find(".menuitems").toggle();
    });
}); 
```

符合你所有的规格，我想。

见[http://jsfiddle.net/BfqhV/2/](http://jsfiddle.net/BfqhV/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:51:27.150

给你，再加上你的方法，这会很有魅力:)

```
 $(".menuitems").parent().click(function () {
        $(this).find("li").toggle();
    });
    $(".menuitems li").click(function () {
        var li_text_trimmed = $.trim($(this).text())
        alert(li_text_trimmed)
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:57:24.960

如果我没记错你需要这个，

```
$(document).ready(function () { 
   $(".menuitems").hide(); // hide all sub lists
   $(".menuitems").first().show(); show first one

   //handle click event    
   $(".menuitems").parent().click(function () {
      $(this).find(".menuitems").toggle(); // toogle sub menu every click
   });

}); 
```

# python - Flask 登录和 LDAP

> ID：13305503
> 
> 赞同：8
> 
> 时间：2012-11-09T09:41:23.647
> 
> 标签：python, flask, flask-login

我正在开发一个以flask框架为后端的webapp，我需要提供身份验证。

由于这是在我们的本地域上使用的内部应用程序，因此我选择使用他们已经存在的域凭据对用户进行身份验证。

我使用的方法是`win32security.LogonUser`从中`pywin32`返回成功登录的句柄。

我试图了解烧瓶登录的工作原理，但`@login_manager.user_loader`回调让我感到困惑。

它说我应该提供一个可用于重新加载用户的 id，但是我没有数据库或持久存储来提供此映射，因为我只对检查用户是否通过身份验证感兴趣。

我的用户类如下所示：

```
class User(flask_login.UserMixin):
    def __init__(self,username):
        self.username = username
        self.id = ??? 
```

使用什么`id`，以及这个 id 如何映射回这个实例？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T16:35:51.393

您可以使用 LDAP 模块在 python 中执行此操作：

```
LDAP_SERVER = "yourldapserver"
LDAP_PORT = 390033 # your port
import ldap
def login(email, password):
    ld = ldap.open(LDAP_SERVER, port=LDAP_PORT)
    try:
        ld.simple_bind_s(email, password)
    except ldap.INVALID_CREDENTIALS:
        return False
    return True 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T16:30:03.083

Flask-login 不依赖或不需要任何特定的用户后端。您必须表示用户对象并返回一个 id。例如看这篇文章

[烧瓶登录：无法理解它是如何工作的](https://stackoverflow.com/questions/12075535/flask-login-cant-understand-how-it-works/12082280#12082280)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-01T22:02:18.367

使用 ldap3 进行烧瓶登录的简单示例。

```
from flask_ldap3_login.forms import LDAPLoginForm
from flask_ldap3_login import LDAP3LoginManager, AuthenticationResponse
from flask_login import LoginManager, login_user, UserMixin, current_user
app = Flask(__name__)
app.config['SECRET_KEY'] = 'secret'
app.config['DEBUG'] = 'True'
# Setup LDAP Configuration Variables. Change these to your own settings.

# Hostname of your LDAP Server
app.config['LDAP_PORT'] = 636
# Hostname of your LDAP Server
app.config['LDAP_HOST'] = 'ldap-name.com'
app.config['LDAP_USE_SSL'] = True
# Base DN of your directory
app.config['LDAP_BASE_DN'] = 'dc=Hostname,dc=com'

# Users DN to be prepended to the Base DN
app.config['LDAP_USER_DN'] = 'ou=people'

# Groups DN to be prepended to the Base DN
app.config['LDAP_GROUP_DN'] = 'cn=ldap-groupname,ou=groups'

# The RDN attribute for your user schema on LDAP
app.config['LDAP_USER_RDN_ATTR'] = 'uid'

# The Attribute you want users to authenticate to LDAP with.
app.config['LDAP_USER_LOGIN_ATTR'] = 'uid'
# The Username to bind to LDAP with
app.config['LDAP_BIND_USER_DN'] = 'uid'
# The Password to bind to LDAP with
app.config['LDAP_BIND_USER_PASSWORD'] = 'pwd'
login_manager = LoginManager(app)  # Setup a Flask-Login Manager
ldap_manager = LDAP3LoginManager(app)  # Setup a LDAP3 Login Manager.
# Create a dictionary to store the users in when they authenticate
# This example stores users in memory.
users = {}
# Declare an Object Model for the user, and make it comply with the
# flask-login UserMixin mixin.
class User(UserMixin):
 def __init__(self, dn, username, data):
    self.dn = dn
    self.username = username
    self.data = data

def __repr__(self):
    return self.dn

def get_id(self):
    return self.dn

# Declare a User Loader for Flask-Login.
# Simply returns the User if it exists in our 'database', otherwise
# returns None.
@login_manager.user_loader
def load_user(id):
    if id in users:
       return users[id]
    return None
# Declare The User Saver for Flask-Ldap3-Login
# This method is called whenever a LDAPLoginForm() successfully validates.
# Here you have to save the user, and return it so it can be used in the
# login controller.

@ldap_manager.save_user
def save_user(dn, username, data, memberships):
  user = User(dn, username, data)
  users[dn] = user
  return user,username
@app.route('/', methods=['GET', 'POST'])
def login():
 # exists in LDAP.
 form = LDAPLoginForm()
 if form.validate_on_submit():
        # Successfully logged in, We can now access the saved user object
        # via form.user.
        a = login
        return redirect(url_for('mainpage'))
    return render_template('login.html',form=form)
else:
    return render_template('error.html') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-03T16:47:10.047

self.id 应该是一个唯一的字符串。它可以是以下之一：

*   cn（LDAP 中唯一）
*   sAMAccountName（域中唯一，就像一个unix登录）
*   邮件（多值，其中一个应该/可能是唯一的）
*   ...

明智地选择一个。对于我自己的工作，我更喜欢 sAMAcountName。它要求您在 ldap_bind 之后执行 LDAPSearch。

第一次没有身份验证的绑定（查找 DN）应由应用用户进行，以避免信息泄露（以防您被黑客入侵）。

Ldap 连接是资源 => 使用上下文管理器

```
with ldap.open(LDAP_SERVER, port=LDAP_PORT) as ld:
    # do the search/bind/search here 
```

# http - 如何将日期值作为 POST 参数发送？

> ID：13305506
> 
> 赞同：1
> 
> 时间：2012-11-09T09:41:25.973
> 
> 标签：http, date, post, parameters

`10/08/12`将日期值（例如）作为 HTTP`POST`参数发送的最佳方式是什么？

可以使用正斜杠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:44:07.167

最好没有斜线。我建议使用这种格式发送值：

```
20120810 
```

固定长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:43:32.673

客户端软件中应使用 URL 编码功能。

例如。在 .NET 中是`HttpUtility.UrlEncode`

# linux - 文件大小如何限制在特定文件系统上？

> ID：13305508
> 
> 赞同：4
> 
> 时间：2012-11-09T09:41:37.130
> 
> 标签：linux, filesystems

*   文件大小如何在特定文件系统上受到限制？
*   有哪些因素影响它？

任何人都可以提供详细信息..我在网上找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:35:56.957

文件系统的文件大小限制通常由包含其文件大小的变量的大小决定。在大小定义为 32 位无符号整数的文件系统中，您将无法存储大于 2^32-1 (=4294967295) 字节大小的文件。在许多现代文件系统上，文件大小通常存储为 64 位，最大文件大小为 2^64 (16 EiB)，这是一个非常大的数字。

文件系统本身的最大大小通常受文件系统块地址大小乘以文件系统块大小的限制。在旧的 FAT16 文件系统上，地址被限制为 16 位（=65536 个唯一地址），块（或集群）大小被限制为最大 64kB，这导致最大文件系统大小限制为 4GB，这就是更大变体的原因，开发了FAT32。在现代文件系统（例如 NTFS、ext4、btrfs 和许多其他文件系统）上，最大文件系统大小非常大，并且不太可能在很长一段时间内被击中。但是，由于实现中的限制，在某些情况下存在一些低于实际格式限制的人为限制，例如 NTFS 的文件系统大小限制为 256TB（根据 Wikipedia）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:12:38.637

我真的不明白你在做什么，但我还是试着回答。

由于以下几个原因，文件系统会限制其最大文件大小：

*   inode 中文件大小条目的字段具有最大大小
*   每个文件的最大块数受到限制

例如，在 32 位字段中，您只能输入最大值 4*1024^3 - 所以这是最大尺寸。

# hbase - Hbase Sorted Map 是物理视图还是逻辑视图？

> ID：13305510
> 
> 赞同：0
> 
> 时间：2012-11-09T09:41:40.203
> 
> 标签：hbase

据我所知，Hbase 是排序图。这是否意味着数据根据其密钥按排序顺序保存在 HDD 中？或者排序的地图只是逻辑视图？

如果是物理视图，这意味着 Hbase 可以快速读取和写入存储，因为它可以减少 HDD 手臂摆动以进行良好的查询。

但我不确定它是否真的在物理存储中分类。

有人确认吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:40:24.463

HBase 中的几乎所有内容都保持排序。memstore 已排序。每个 HFile 都在磁盘上排序了该文件中的所有 KeyValue。

# c++ - 导入库 <-> 动态链接库兼容性

> ID：13305511
> 
> 赞同：3
> 
> 时间：2012-11-09T09:41:52.897
> 
> 标签：c++, dll, compatibility, executable

考虑以下模型情况：

1.  DLL 接口没有改变，但实现会改变。是否需要将可执行文件与新的导入库链接？应用程序和 DLL 都使用相同的编译器和链接器在相同的 IDE 中进行编译和链接。

2.  DLL 接口没有改变，但实现会改变。新版本的应用程序和 DLL 在 IDE 版本 2.0 中编译和链接（象征意义，例如替换为 C++ Builder XE2）。是否可以将应用程序二进制文件与在 IDE 1.0 版本中编译的旧版本导入库（例如 C++ Builder 6）链接？程序是否可以正常运行而不会出现一些运行时错误（例如访问冲突）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:49:48.120

使用相同的编译器制造商和版本，即使名称不正确，也将是相同的，因此您应该对 #1 没问题。

#2 可以，这意味着它可能会引入可能会咬你的名称修改兼容性。如果您的导出都是“C”样式（简单名称）和/或通过 .def 文件硬映射到未损坏的 ID（或者您按序号加载，这些天似乎再也没有人这样做了），#2还是有可能的。

# php - Css 和 php 布局问题

> ID：13305512
> 
> 赞同：0
> 
> 时间：2012-11-09T09:41:59.397
> 
> 标签：php, css

我正在使用通过 php 编码的表来形成带有 xml 提要的两列结果，列形式正常，问题是第二列被截断。

这里的例子： [http ://www.qrrw.net/b](http://www.qrrw.net/b)

我的 CSS

```
td.manu {
    background: url("../images/manu_button.fw.png") no-repeat; 
    height: 87px; 
    width:478;  
    font-family:Arial,Helvetica, sans-serif; 
    color:#309;
    font-size:12px;
} 
```

当我使用 chrome web developer 插件时，它显示第二列的宽度不同，但它使用的是同一个类。

下面是我的**PHP 代码**：

```
$count = 0;
$max = 2;
foreach($xml->name as $name){               
    $count++;
    echo '<td class="manu">'. $name['name'];'</td>';

    if($count >= $max){
        //reset counter
        $count = 0;
        //end and restart
        echo '</tr><tr>';
    }
}
?> 
```

最终的 HTML

```
 <table border=0 width="800px">
  <tr>
  <td class="manu">3000 ME</td><td class="manu">Ace</td></tr><tr><td class="manu">Cobra MK IV</td>    </tr></table> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:05:54.567

你在你的css中犯了错误。
检查下面css中的*注释行*..

*改变**宽度：478；**到**宽度：478px；***

```
td.manu {
  background: url("../images/manu_button.fw.png") no-repeat; 
  height: 87px; 
  width:478;  /*------------------- add "px" after the value here--------------*/  
  /*----- 478px instead of only 478 ------*/
  font-family:Arial,Helvetica, sans-serif; 
  color:#309;
  font-size:12px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:58:14.683

```
td.manu 
{
background: url("../images/manu_button.fw.png") no-repeat; 
height: 87px; 
width:478;  
font-family:Arial,Helvetica, sans-serif; 
color:#309;
font-size:12px;
padding-left:23px;
}

.manu a
    { 
       padding-left: 0;
    } 
```

和

更改表格宽度

```
<table width="907px" border="0">
      <!-- put Code here -->
</table> 
```

# jquery - jQuery：find（）子元素，直到遇到某个阈值元素

> ID：13305514
> 
> 赞同：12
> 
> 时间：2012-11-09T09:41:59.983
> 
> 标签：jquery

我有一个嵌套表结构，例如

```
 <table>

       <td id="first">

           <div class="wrapper">
               <input name=1>
           </div>

           <input name=2>

           <table>

               <td id="second">

                   <input name=3> 
```

我有 jQuery 选择`$("#first")`。我想遍历这个上下文中的`find()`所有孩子，但不想下降到嵌套的 s 中。`<input>s``<td>``<table>`

所以我需要一个 jQuery 技巧

*   将`find()`某个元素的所有子元素

*   将在 DOM 树中下降 n 级

*   但是如果遇到某个元素 ( `<table>`) 将停止下降，因此选择器不会选择嵌套表的输入（将单独处理）

*   可以有任意数量的嵌套级别，因此无论在 $("#first")或任何其他范围内遇到`<table>`多少父级`<table>`或子级，该解决方案都应该有效`<table>``<td>``<td>`

我检查了其他 jQuery 查找直到问题。他们有答案，但似乎没有满足最后一个标准

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-16T19:00:25.973

[我在另一个问题](https://stackoverflow.com/questions/24159478/skip-recursion-in-jquery-find-for-a-selector/24215566?noredirect=1#comment37410122_24215566)中遇到了类似的问题。在与一些试图寻找查找选择器的人来来回回之后，我最终自己找出了一个插件。

**用法 ：** `ExclusiveInputs = $('#first').findExclude('input','table');`

```
// Find-like method which masks any descendant
// branches matching the Mask argument.
$.fn.findExclude = function( Selector, Mask, result){

    // Default result to an empty jQuery object if not provided
    var result = typeof result !== 'undefined' ?
                result :
                new jQuery();

    // Iterate through all children, except those match Mask
    this.children().each(function(){

        var thisObject = jQuery( this );
        if( thisObject.is( Selector ) ) 
            result.push( this );

        // Recursively seek children without Mask
        if( !thisObject.is( Mask ) )
            thisObject.findExclude( Selector, Mask, result );
    });

    return result;
} 
```

*（精简版）*：

```
$.fn.findExclude = function( selector, mask, result )
{
    var result = typeof result !== 'undefined' ? result : new jQuery();
    this.children().each( function(){
        var thisObject = jQuery( this );
        if( thisObject.is( selector ) ) 
            result.push( this );
        if( !thisObject.is( mask ) )
            thisObject.findExclude( selector, mask, result );
    });
    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T10:01:42.803

> *更新：*让我们来看看这个。

基本上，您希望匹配所有`<input>`嵌套在.`#first``<td>``#first`

（我不确定最后`under #first`一部分，但实现它允许我们支持祖先链中的`<td>`元素`#first`。）

从技术上讲，仅以下选择器就可以满足您的要求：

```
var inputs = $("#first td:not(#first td td) > input"); 
```

如果这在您的浏览器中不起作用（我认为 Sizzle 应该可以完成任务，但复杂的选择器`:not()`总是很棘手），您可以将处理委托给 jQuery 方法：

```
var inputs = $("#first td").not("#first td td").children("input"); 
```

* * *

> 原答案如下：

您可以使用[not()](http://api.jquery.com/not/)排除`<input>`具有多个`<td>`祖先的元素：

```
var firstLevelCells = $("#first").find("input").not("td td input"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T09:45:28.227

嗯，我有个更好的主意..

```
var badTable = "table.bad"; //the one you want to avoid
var $goodInputs = $("#first").find('input').filter(function() {
    return $(this).closest(badTable).length == 0;
}); 
```

这对您来说可能不够快，也可能不够快。这取决于您不想谈论的 DOM ;)

如果它很慢，只需手动为您的算法编写代码。没有选择器快捷方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-05T09:30:27.780

我有一个类似的问题，并且仍然面临着在没有扩展循环或具有 DOM 的确切结构的情况下做某事的挑战。在我的例子中，我已经引用了元素“#first”，如果你不这样做，我们可以通过 each 来获取它（即使它只是一个对象）。诀窍是与 parentsuntil 一起回到树上并停在顶部元素处，看看是否有任何中间元素满足条件。

使用函数的简写 lambda 表示法（如您可以在 typescript 中编写的那样），这将导致：

```
$('#first').each((idx, f) => $(f).find('input').filter((idx2, inp) => $(inp).parentsUntil(f, 'table').length == 0) 
```

它可能不是最有效的方法（因为您首先选择所有内容，然后通过再次安装 DOM 树来丢弃元素，但它是紧凑且相当通用的。

# objective-c - 自动确定 Apple 推送通知的区域

> ID：13305515
> 
> 赞同：0
> 
> 时间：2012-11-09T09:42:03.073
> 
> 标签：objective-c, ios, xcode, apple-push-notifications

我使用 Apple 推送通知。如您所知，有 2 个区域：开发和生产。

所以我决定创建自动确定区域，我们必须使用哪个区域来创建订阅和发送推送。

Embedded.mobileprovision 对我有帮助。我决定开发条款包含以下几行：

```
<key>aps-environment</key>
<string>development</string> 
```

和临时和分发 - 这些：

```
<key>aps-environment</key>
<string>production</string> 
```

所以我写了这段代码：

```
+(BOOL)isDevelopmentProvision{

    BOOL isDev;

    NSString *profilePath = [[NSBundle mainBundle] pathForResource:@"embedded.mobileprovision" ofType:nil];
    NSString *profileAsString = [NSString stringWithContentsOfFile:profilePath encoding:NSISOLatin1StringEncoding error:NULL];
    NSRange apsenvironmentRange = [profileAsString rangeOfString:@"<key>aps-environment</key>"];

    if(apsenvironmentRange.location != NSNotFound){
        NSRange apstypeRange = [profileAsString rangeOfString:@"</" options:NSCaseInsensitiveSearch
                                                        range:NSMakeRange(apsenvironmentRange.location+apsenvironmentRange.length, 100)];

        isDev = [profileAsString rangeOfString:@"development" options:NSCaseInsensitiveSearch range:NSMakeRange(apsenvironmentRange.location+apsenvironmentRange.length, apstypeRange.location - (apsenvironmentRange.location+apsenvironmentRange.length))].location != NSNotFound;

    }

    return  isDev;
} 
```

所以，它运作良好。但是在我的应用程序提交到商店后 - 我看到**isDev**总是 TRUE 并且我的应用程序使用开发区进行推送。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:00:00.520

可能是永远找不到该位置（出于某种原因）？您没有初始化`isDev`. 作为局部变量，它可能具有不可预测的内容。`isDev`仅表示`FALSE/NO`其值恰好为零时。在所有其他情况下，它将代表`TRUE/YES`. 你应该把它改成

```
BOOL isDev = NO; 
```

# unit-testing - 使用 ActiveSupport::TestCase 进行主动管理控制器测试

> ID：13305516
> 
> 赞同：1
> 
> 时间：2012-11-09T09:42:05.003
> 
> 标签：unit-testing, testing, activeadmin, testcase

我已经为 Active Admin 中的一些资源定义了我自己的控制器和 member_actions，现在我不知道如何使用 ActiveSupport::TestCase 测试它们。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:45:27.697

像这样的东西：

（我使用[mocha](http://gofreerange.com/mocha/docs/#Rails)作为存根。如果不是，则需要找到另一种方法来存根身份验证，或者以管理员用户身份实际登录）

```
require 'test_helper'

class AdminUserControllerTest < ActionController::TestCase
  setup do
    # Creates a reference to the admin controller
    @controller = ::Admin::UsersController.new 

    # Prevents checking for a valid user session (pretends we're logged in)
    @controller.stubs(:authenticate_active_admin_user)
  end

  test "should ..." do 
    # ... the test ...
  end
end 
```

# c# - 使用 ClickOnce 应用程序创建启动文件夹快捷方式？

> ID：13305517
> 
> 赞同：3
> 
> 时间：2012-11-09T09:42:08.013
> 
> 标签：c#, visual-studio-2010, clickonce

我创建了一个 ClickOnce 应用程序，可以离线使用，并且可以通过开始菜单访问。

但是，是否可以通过代码或设置将此应用程序设置为在启动时启动/在启动文件夹中设置快捷方式，而不是创建某种批处理文件来为我执行此操作？ClickOnce 选项似乎真的很有限！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:47:01.813

您可以在这里找到问题的答案，[在启动时运行 ClickOnce 应用程序](http://brokenwire.net/bw/Programming/116/run-clickonce-app-on-startup)

您还可以使用启动注册表项来启动您的应用程序。

设置启动 ClickOnce 应用程序的键非常简单，不需要设置其他快捷方式。您只需使用安装时创建的快捷方式：

```
// The path to the key where Windows looks for startup applications
RegistryKey rk = Registry.CurrentUser.OpenSubKey(
                    @"SOFTWARE\Microsoft\Windows\CurrentVersion\Run", true);

//Path to launch shortcut
string startPath = Environment.GetFolderPath(Environment.SpecialFolder.Programs) 
                   + @"\YourPublisher\YourSuite\YourProduct";

rk.SetValue("YourProduct", startPath); 
```

# yii - 如何使用 get 方法在 yii 框架上插入记录？

> ID：13305519
> 
> 赞同：0
> 
> 时间：2012-11-09T09:42:09.700
> 
> 标签：yii

嗨，我是 yii 框架的新手。我想知道如何在 yii 框架上使用 Get 方法插入数据？因为我创建了一个脚本，但记录没有添加到我的数据库中。

这是我的网址

```
http://testdomain.com/?name=test&number=1234567&email=test@test.com 
```

这是我的脚本：

```
public function actionIndex()
{
        $model=new Userinfo;

        if(isset($_GET['name'])){

            $model->name=$_GET['name'];
            $model->number=$_GET['number'];
            $model->email=$_GET['email'];

            if($model->save()){         
              echo "Success";                   
            }
       }
} 
```

例如（[http://testdomain.com/?name=test&number=1234567&email=test@test.com](http://testdomain.com/?name=test&number=1234567&email=test@test.com)）

我想在我的数据库表中插入数据表名 = userinfo

领域：

姓名 号码 电子邮件

谢谢你。您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:12:58.103

这是基本思想：

```
$model = new Userinfo;
$model->name = $_GET['name'];
$model->number = $_GET['number'];
$model->email = $_GET['email'];
if ($model->validate()){
    $model->save();
} else {
    print_r($model->errors);
} 
```

这是没有验证的。您很可能会将其放入 Controller/Action

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:21:16.633

尝试

```
$model->insert(); 
```

当我在我的工作应用程序上检查它时，你的代码似乎工作正常，检查你的模型和数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:03:52.973

我猜你永远不会看到“Success”，这意味着[save()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#save-detail)方法返回 false。请注意，`save()`验证失败时不会抛出异常，它只是返回 false。

由于您没有看到“成功”，这意味着您的模型中的验证失败，因此请检查模型规则。

# php - 没有得到输入字段 OOP 类

> ID：13305521
> 
> 赞同：1
> 
> 时间：2012-11-09T09:42:11.003
> 
> 标签：php, input-field

我希望有人可以帮助我，我是 oop starter，下面的脚本给出了输出`<`，但我想要这个`<input type="text">`。

现在我创建了一个 Build 类，但它不起作用。我做错了什么，我该如何解决？
有人可以帮助我吗？谢谢！

```
//set get Element
class Element {
    private $_element; 

    function addElement($element) {
        $this->_element = $element;
    }

    function getElement(){
        return $this->_element;
    }
} 
```

```
//add and set Atrr
class attrType extends Element {
    //set var 
    public $_attrType;

    function __construct(){     
        $this->_attrType = array(); 
    }

    function addAttr($attrType, $attrValue){
        $this->_attrType[$attrType] = $attrValue;
    }

    function getAttr(){
        return $this->_attrType;
    }
} 
```

```
//build input text field
class Build extends attrType {
    function Builder() {
        $html .= "<";
        $html .= ''.$this->getElement();

        foreach( $this->getAttr() as $key => $value){       
            $html .= " $key=";
            $html .= "\"$value\">";
        }

        return $html;
    }    
}

$element = new Element();
$attr = new attrType();
$build = new Build();

$attr->addElement('input');
$attr->addAttr('type','text');
echo $build->Builder(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:50:20.780

您正在创建单独的对象并期望它们共享属性，这就是问题所在。如果您将最后 3 行更改为此，您的代码将起作用：

```
$build->addElement('input');
$build->addAttr('type','text');
echo $build->Builder(); 
```

[键盘演示在这里](http://codepad.org/H9RbQXx7)

尽管代码有效，但 IMO 并不是最好的方法。继承时，一个好的经验法则是问自己：派生类可以被认为是它派生的类吗？换句话说，是`Builder`一个`Element`，我不认为它是。对我来说，a`Builder`会获取一个元素并构建 HTML，所以我不会`Builder`从`Element`.

在这种情况下，一个很好的继承示例是拥有您的基`Element`类，然后从中派生特定元素，例如`TextInput`, `TextArea`, `RadioButton`。其中每一个都可以被认为是一个`Element`，因此将是继承的不错选择。

注意不要让事情过于复杂，OOP 并不意味着让它变得困难。Builder 类有什么好处？如果你不能命名，那么只需在父类上使用`build()`or方法。`toHTML()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:51:36.253

更改您的代码，如下所示

```
$build->addElement('input');
$build->addAttr('type','text'); 
```

代替

```
$attr->addElement('input');
$attr->addAttr('type','text'); 
```

谢谢

# powershell - 如何创建抽象类类型对象的集合

> ID：13305522
> 
> 赞同：1
> 
> 时间：2012-11-09T09:42:12.260
> 
> 标签：powershell, generic-list, custom-object

我正在 Microsoft WHCK 2.0 API 上编写一个 powershell 脚本。我来自 perl 背景，所以对 powershell 或 c# 了解不多。

好吧，我的代码是：

```
$ObjectModel  = [Reflection.Assembly]::LoadFrom($env:WTTSTDIO + "microsoft.windows.Kits.Hardware.objectmodel.dll")
$DbConnection = [Reflection.Assembly]::LoadFrom($env:WTTSTDIO + "microsoft.windows.Kits.Hardware.objectmodel.dbconnection.dll")
$Submission   = [Reflection.Assembly]::LoadFrom($env:WTTSTDIO + "microsoft.windows.Kits.Hardware.objectmodel.submission.dll") 
```

# 稍晚一点。

```
 $List = New-Object "System.Collections.Generic.List``1[Microsoft.Windows.Kits.Hardware.ObjectModel.Target]" 
```

当我运行此代码时，它会产生此错误：

“新对象：找不到类型：[System.Collections.Generic.List`1[Microsoft.Windows.Kits.Hardware.ObjectModel.Target]]：确保已加载包含此类型的组件。”

我已经使用 CurrentDomain.getAssemblies() 方法验证了组件是否正确加载。我还验证了“Microsoft.Windows.Kits.Hardware.ObjectModel.dll”程序集中存在“Microsoft.Windows.Kits.Hardware.ObjectModel.Target”类型，如下所示：

```
$ObjectModel.GetTypes() | % { 
      if($_.FullName -eq "Microsoft.Windows.Kits.Hardware.ObjectModel.Target")
      { 
          $found=1
      }
} 
```

还有一件事我想提一下，“Microsoft.Windows.Kits.Hardware.ObjectModel.Target”这个类型/类是一个抽象类。

我进行了很多搜索，但无法找到摆脱此错误的正确方法。请提出建议并帮助克服此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:48:35.487

尝试这个：

```
$List = New-Object 'System.Collections.Generic.List[Microsoft.Windows.Kits.Hardware.ObjectModel.Target]' 
```

# javascript - 在 HTML 中组合音频文件

> ID：13305530
> 
> 赞同：2
> 
> 时间：2012-11-09T09:42:30.960
> 
> 标签：javascript, html

我有一个**HTML 页面**，其中有两个 30 秒的音频文件 ABC.mp3 和 15 秒的 XYZ.mp3。我需要以这样的方式组合这两个文件，以便获得一个 30 秒（而不是 45 秒）的新文件 PQR.mp3，其中**一个文件与另一个文件重叠/合并**。任何类型的插件、javascript 等都会有所帮助，同时考虑 HTML 和 HTML5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:48:34.093

简单的回答：不。Javascript 和 HTML5 都没有能力做到这一点。您将需要服务器端工具来执行此操作。例如 ffmpeg 和 LAME 在 MP3 的情况下。

如果您确实需要在 HTML 基础上进行此类操作，唯一的方法是将这些程序绑定到 php 脚本或 NodeJS 服务器，然后启动作业来执行您想做的事情。不过，您必须编写 bash 脚本或 cronjobs 才能这样做。

**编辑**

对于[nodeJS](http://nodejs.org/)，您需要编写自己的节点服务器应用程序。然后，应用程序应该使用[socketIO](http://socket.io/)和[node-fluent-ffmpg](https://github.com/schaermu/node-fluent-ffmpeg)，它们也有蹩脚的。该应用程序可能看起来像这样

*服务器：*

```
var io = require('socket.io').listen(80);
var exec = require('child_process').exec;
io.sockets.on('connection', function (socket) {
  socket.on('mergeFiles', function (data) {
    var firstFile = data.firstFile;
    var secondFile = data.secondFile;

    //do ffmpg stuff by executing a shell script
    execString = "./yourscript.sh " + firstFile + " " + secondFile

    function puts(error, stdout, stderr) { sys.puts(stdout) }
    exec(execString , puts);
}); 
```

*客户：*

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var firstFile = ABC.mp3;
  var secondFile = XYZ.mp3;

  var socket = io.connect('http://localhost');
  socket.emit('mergeFiles', { firstFile: firstFile, secondFile: secondFile });
</script> 
```

# php - 有没有办法让 PHP 的 SplHeap 重新计算？（又名：将堆添加到 SplHeap？）

> ID：13305532
> 
> 赞同：9
> 
> 时间：2012-11-09T09:42:40.623
> 
> 标签：php, graph, heap, spl

我正在使用一个[`SplHeap`](http://php.net/SplHeap)来保存具有从叶子到根的有向边的树的图形节点。为此，我预先计算了节点的“扇入”并将它们放入堆中，以便我始终可以从中检索具有最小扇入 (0) 的节点。

访问一个节点后，我将其后继节点的扇入减少 1。那么显然，堆需要重新计算，因为后继节点现在位于错误的位置。我试过`recoverFromCorruption()`了，但它什么也没做，并且使堆保持错误的顺序（较大的节点`fanIn`停留在较小的前面`fanIn`）。

作为一种解决方法，我现在在每次访问后创建一个新堆，每次进行一次完整的 O(N*log(N)) 排序。

但是，应该可以对更改的堆条目进行堆堆操作，直到它位于 O(log(N)) 中的正确位置。

的 API`SplHeap`没有提到上堆（或删除任意元素 - 然后可以重新添加）。我可以以某种方式派生一个类`SplHeap`来执行此操作，还是必须从头开始创建一个纯 PHP 堆？

**编辑**：代码示例：

```
class VoteGraph {
    private $nodes = array();

    private function calculateFanIn() { /* ... */ }

    // ...

    private function calculateWeights() {
        $this->calculateFanIn();
        $fnodes = new GraphNodeHeap(); // heap by fan-in ascending (leaves are first)

        foreach($this->nodes as $n) {
            // omitted: filter loops
            $fnodes->insert($n);
        }

        // traversal from leaves to root
        while($fnodes->valid()) {
            $node = $fnodes->extract(); // fetch a leaf from the heap
            $successor = $this->nodes[$node->successor];
            // omitted: actual job of traversal
            $successor->fanIn--; // will need to fix heap (sift up successor) because of this

            //$fnodes->recoverFromCorruption(); // doesn't work for what I want
            // workaround: rebuild $fnodes from scratch
            $fixedHeap = new GraphNodeHeap();
            foreach($fnodes as $e)
                $fixedHeap->insert($e);
            $fnodes = $fixedHeap;
        }
    }
}

class GraphNodeHeap extends SplHeap {
    public function compare($a, $b) {
        if($a->fanIn === $b->fanIn)
            return 0;
        else
            return $a->fanIn < $b->fanIn ? 1 : -1;
    }
} 
```

完整代码也可用：[https ://github.com/md2k7/civicracy/blob/master/civi-php/protected/components/VoteGraph.php#L73](https://github.com/md2k7/civicracy/blob/master/civi-php/protected/components/VoteGraph.php#L73)

**编辑 2**：

```
$this->putNode(new GraphNode(4));
$this->putNode(new GraphNode(1, 2));
$this->putNode(new GraphNode(3, 2));
$this->putNode(new GraphNode(2, 4)); 
```

这意味着**用户 1**和**用户 3**正在为**用户 2**投票，**用户 2**正在为**用户 4**投票，通过了 3 票（2 票收到 + 他/她自己的票）。这被称为委托投票：我的算法是“从底部”（叶子）传递投票，我已经知道每个用户有多少权重（责任/代表/你喜欢......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:56:24.173

更改值后不能重新插入更新的节点吗？

```
$successor->fanIn--;
$fnodes->insert($updatedNode); 
```

插入不会强制对堆进行重新排序吗？这将是一个较低的订单，然后创建一个新订单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T22:18:26.783

我最近正在解决非常类似的问题，似乎 SPL 不支持更新。所以

我不得不写我自己的堆。

它效率不高，但它可以满足我的需要，并且比重复排序数组要快得多……尽管 SPL 堆仍然快得多……

这里是...

```
class heap
{
    public $members=array();

    // these two are just for statistics
    private $swaps=0; 
    private $recurs=array('lups'=>0, 'ldowns'=>0);

    public function insert($val){

        if(is_array($val) && empty($this->members)){ // because heapify is (in theory) more efficient
            foreach($val as $v){
                $this->members[]=$v;
            }
            $this->heapify();
        }else{
            $emptyPosition=count($this->members);  // count(members) gets index of first empty position, not last key
            $this->members[]=$val; // puts $val in
            $this->ladderup($emptyPosition);
        }
    }

    public function heapify(){
    /* in case all the heap is broken, we can always use this to repair it.
     It should be more efficient to fill $members randomly and "repair" it with heapify after,
     than inserting things one by one*/

        $start=max(0, floor( (count($this->members)-1)/2)); // find last parent
        for($i=$start;$i>=0;$i--){
            $this->ladderdown($i);
        }
    }

    private function ladderdown($index){
    // recursively sifts down $index
        $this->recurs['ldowns']++;

        /*
        indexes of children
        they are stored at  parent_position*2 and parent_position*2+1
        but becouse php uses null-based array indexing, we have to modify it a little
        */  
        $iA=$index*2+1; 
        $iB=$index*2+2;

        if($iA<count($this->members)){ // check if children exist
            if($iB<count($this->members)){
                if($this->compare($iA, $iB)>=0) $bigger=$iA; // if both exist, compare them, cause we want to swap with the bigger one ; I'm using ">=" here, that means if they're equal, left child is used
                else $bigger=$iB;
            }else{
                $bigger=$iA; // if only one children exists, use it
            }

            if($this->compare($bigger, $index)>0){ // not using ">=" here, there's no reason to swap them if they're same
                $this->swap($bigger, $index);
                $this->ladderdown($bigger); // continue with $bigger because that's the position, where the bigger member was before we swap()ped it 
            }
        }
    }

    private function ladderup($index){
    // sift-up, 
        $this->recurs['lups']++;

        $parent=max(0, floor( ($index-1)/2)); // find parent index; this way it actualy swaps one too many times: at the end of sift-up-ing swaps the root with itself
        if($this->compare($index, $parent)>0){
            $this->swap($index, $parent);
            $this->ladderup($parent);
        }
    }

    public function root(){
        if(count($this->members)){
            return $this->members[0];
        }
        return false;   
    }

    public function extract(){
    // removes and returns root member
        if(!count($this->members)) return false;

        $this->swap(0,count($this->members)-1); // swaps root with last member
        $result=array_pop($this->members); // removes last member (now root)
        $this->ladderdown(0); // root is on wrong position, sifts it down
        return $result;
    }

    public function update($index, $value){
        if($index<count($this->members)){
            $this->members[$index]=$value;
            $this->ladderup($index);
            $this->ladderdown($index);
        }
    }

    public function delete($index){
    // removes index from heap the same way as root is extracted
        $this->swap(count($this->members)-1, $index); // swaps index with last one
        array_pop($this->members);
        $this->ladderup($index);
        $this->ladderdown($index);
    }

    private function swap($iA, $iB){
    // swaps two members
        $this->swaps++;

        $swap=$this->members[$iA];
        $this->members[$iA]=$this->members[$iB];
        $this->members[$iB]=$swap;
    }

    private function compare($iA, $iB){
        $result=$this->members[$iA] - $this->members[$iB];
        return $result;
    }

    public function stats($text=""){
     // prints and resets statistics
        echo "STATS: $text... Sift-ups: ".$this->recurs['lups']." Sift-downs: ".$this->recurs['ldowns']." Swaps: ".$this->swaps." <br>";
        $this->recurs=array('lups'=>0, 'ldowns'=>0);
        $this->swaps=0;
    }
}

//here's how to use it...

$h=new heap;

for($i=0; $i<10000; $i++){
    $h->insert(rand(1,1000));
}
$h->stats("after inserting one-by-one");

while($biggest=$h->extract()); // note that $h->extract might return FALSE, but might return zero as well, if there was zero in the heap

$h->stats("after extracting all roots (like in heapsort)");

echo "Now, heap is empty. Let's try whole array at once <br>";

for($i=0; $i<10000; $i++){
    $a[]=rand(1,1000);
}
$h->insert($a); // inserting whole array here, so heap will use more efficient heapify()
$h->stats("after heapify");

echo "let's update two indexes<br>";

$h->update(1234,44444);// sure on top
$h->stats("after update");
$h->update(8888,40000);// second place
$h->stats("after update");

echo "extract biggest three indexes<br>";

echo $h->extract()." - this should be 44444<br>";
echo $h->extract()." - this should be 40000<br>";
echo $h->extract()." - this should be biggest number given by rand(1,1000)<br>";

$h->stats("after three extracts");

while($h->extract());
$h->stats("after extracting the rest"); 
```

结果是：

> STATS：一一插入后... Sift-ups：22651 Sift-downs：0 Swaps：12651
> STATS：提取所有根后（如在堆排序中）... Sift-ups：0 Sift-downs：116737 Swaps : 116737
> 现在，堆是空的。让我们一次尝试整个数组
> STATS：heapify 后... Sift-ups：0 Sift-downs：12396 Swaps：7396
> 让我们更新两个索引
> STATS：更新后... Sift-ups：11 Sift-downs：1 Swaps：10
> 统计：更新后... 筛选：13 筛选：1 交换：12
> 提取最大的三个索引
> 44444 - 这应该是 44444
> 40000 - 这应该是 40000
> 1000 - 这应该是 rand(1,1000) 给出的最大数字)
> 统计数据：经过三次提取...筛选：0 筛选：42 交换：42
> 统计：提取其余部分后...筛选：0 筛选：116652 交换：116652

您将不得不对其进行一些修改，但无论如何，希望它有所帮助..

# ruby-on-rails - 如果用户忘记了设计中的密码，则通过邮件发送密码

> ID：13305533
> 
> 赞同：0
> 
> 时间：2012-11-09T09:42:40.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我为我使用设计`web app`，现在我更改我的网络应用程序也响应`mobile app`并且到目前为止`forgot password`重置指令将发送到用户的电子邮件但现在我希望将密码发送到邮件以便用户可以检查他的邮件并使用密码。但我认为我做不到，因为密码正在`encrypted`设计中，所以有人请告诉我如何通过邮件或其他方式获取密码，我可以将其用于我的移动应用程序。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:53:34.300

"Forgot password" links usually send the user to a url with a single_access_token hash at the end. There, you identify the user and let them update their password to their liking. This way you do not irritate users who don't want you to have access to their passwords which they might also use for their bank accounts and social connection pages.

Another way is to set the password to a hash such as

```
user.password= @new_pass #MD5.digest(Time.now)[0..7]
# set password_confirmation and reset password token for "change password on login", too, if neccessary
user.save 
```

In User model `after_update :email_password_if_password_changed` if password field has changed, you can email their password using activemailer.

# iphone - 如何获取 NSdocument 目录保存的视频

> ID：13305534
> 
> 赞同：2
> 
> 时间：2012-11-09T09:42:49.230
> 
> 标签：iphone, xcode, ios6

目前，我正在开发一个应用程序，其中我已将录制的视频保存到文档目录和我的

代码在这里：

```
 NSURL * movieURL = [info valueForKey:UIImagePickerControllerMediaURL] ;

     NSData * movieData = [NSData dataWithContentsOfURL:movieURL];

     NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

     NSString *documentsDirectory = [documentPaths objectAtIndex:0];

     NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[[self video]text]];

     fullPath = [fullPath stringByAppendingFormat:@".MOV"];

      [movieData writeToFile:fullPath atomically:YES]; 
```

现在如何检查视频是否保存在文档目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:46:37.033

您可以使用此代码获取所有保存的视频：-

```
-(IBAction)getallVideo
{
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *library = [path objectAtIndex:0];

    NSArray *fileArray = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:library error:nil];

    videolist  = [[NSMutableArray alloc]init];

        for(int i = 0;i<fileArray.count;i++){
    NSLog(@"table%d",fileArray.count);
    id myArrayElement = [fileArray  objectAtIndex:i];
    if([myArrayElement rangeOfString:@".mp4" ].location !=NSNotFound)
    {
        [videolist addObject:myArrayElement];

    }
    else if([myArrayElement rangeOfString:@".mov"].location !=NSNotFound)
    {

    [videolist addObject:myArrayElement];
    }
 NSLog(@"Mu %@",videolist);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:46:32.247

```
BOOL _isSaved = [movieData writeToFile:fullPath atomically:YES];

if(_isSaved == YES)}

   NSLog(@"Saved Succesfully")
}
else{

     NSLog(@"Error occured");
} 
```

或者

```
 NSError* error;
[movieData writeToFile:storePath options:NSDataWritingAtomic error:&error];

if(error == nil){

  NSLog(@"Saved Succesfully")

}
 else{

         NSLog(@"write error %@", error);
 } 
```

# java - 使用 jooq 创建数据库的语句

> ID：13305535
> 
> 赞同：2
> 
> 时间：2012-11-09T09:42:53.573
> 
> 标签：java, sql, jooq

在我们的 Java 项目中，我们已经开始使用 jooq 来构建查询，而不是使用普通的 SQL 字符串。该库很棒，但我有一个问题（因为我是 jooq-newbie）：是否可以使用 jooq 创建数据库，但不包括项目 jooq 映射/生成器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:25:58.450

您可以使用 jOOQ 做很多事情，而无需依赖其代码生成器。手册中的入门指南提到了一些示例：

[http://www.jooq.org/doc/2.6/manual/getting-started/use-cases/jooq-as-a-standalone-sql-builder/](http://www.jooq.org/doc/2.6/manual/getting-started/use-cases/jooq-as-a-standalone-sql-builder/)

例如：

```
String sql = create.select(
                      fieldByName("BOOK","TITLE"), 
                      fieldByName("AUTHOR","FIRST_NAME"), 
                      fieldByName("AUTHOR","LAST_NAME"))
                   .from(tableByName("BOOK"))
                   .join(tableByName("AUTHOR"))
                   .on(fieldByName("BOOK", "AUTHOR_ID").equal("AUTHOR", "ID"))
                   .where(fieldByName("BOOK", "PUBLISHED_IN").equal(1948))
                   .getSQL(); 
```

它还参考了手册中有关将 jOOQ 用于“普通 SQL”的部分：

[http://www.jooq.org/doc/2.6/manual/sql-building/plain-sql/](http://www.jooq.org/doc/2.6/manual/sql-building/plain-sql/)

当然，您仍然可以使用代码生成器为您的模式生成元信息。这并不意味着您必须在生成器上添加运行时依赖项，因为生成器仅在编译时使用

# java - Java While 循环输入验证

> ID：13305536
> 
> 赞同：1
> 
> 时间：2012-11-09T09:43:10.423
> 
> 标签：java, validation, input

嗨，我想知道如何在 if 语句的 while 上进行验证，这样程序只有在用户输入命令“move”“line”“circle”及其参数时才会执行。例如，如果用户输入“move 200”，程序将显示 Invalid，因为只有一个或 NO 参数。谢谢！

```
import java.util.Scanner;

public class DrawingProgram1 {

public static void main(String[] args) {

    GraphicsScreen g = new GraphicsScreen();

    String store;
    String command;

    int move1;
    int move2;
    int line1;
    int line2;
    int circle;

    while (true) {
        Scanner scan = new Scanner(System.in);
        System.out.println("Type 'help' for list of commands. Type 'end' to finish.");
        System.out.println("Please enter a command:");
        store = scan.nextLine();
        String [] splitUpText = store.split(" ");
        command = splitUpText[0];

        if (command.equalsIgnoreCase("move")) {
            move1 = Integer.parseInt(splitUpText[1]);
            move2 = Integer.parseInt(splitUpText[2]);
            g.moveTo(move1, move2);

        }
        else if (command.equalsIgnoreCase("line")) {
            line1 = Integer.parseInt(splitUpText[1]);
            line2 = Integer.parseInt(splitUpText[2]);
            g.lineTo(line1, line2);
        }
        else if (command.equalsIgnoreCase("circle")) {
            circle = Integer.parseInt(splitUpText[1]);
            g.circle(circle);
        }
        else if (command.equalsIgnoreCase("help")) {
            System.out.println("Enter a command for move.");
            System.out.println("Enter a command for line.");
            System.out.println("Enter a command for circle.");
        }
        else if (command.equalsIgnoreCase("end")) {
            System.exit(0);
        }
        else {
            System.out.println("Error");
        }
    }   

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:51:30.827

In the case , add extra condition for if statement, for eg, you can say

```
if(command.equalsIgnoreCase("move") && splitUpText.length == 3){

 //do necessary actions
} 
```

for move command, the array size should not be less than or greater than 3\.

Add conditions for other if statements according to the parameters for each command.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:53:05.683

You could have either the wrong number of arguments or invalid arguments. Use this to catch 'em all:

```
if (command.equalsIgnoreCase("move")) {
    try {
       move1 = Integer.parseInt(splitUpText[1]);
       move2 = Integer.parseInt(splitUpText[2]);
       g.moveTo(move1, move2);
    } catch (ArrayIndexOutOfBoundsException e1) {
       Sytem.out.println("Please specify 2 parameters!")
       continue;
    } catch (NumberFormatException e2) {
       Sytem.out.println("Invalid parameters!")
       continue;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:00:42.913

如果将所有这些请求包装在 Command 对象中会怎样？我认为 Command 设计模式非常适合您的情况。[命令模式说明](http://www.javacodegeeks.com/2012/11/by-your-command-command-design-pattern.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:47:42.553

替换这个

```
if (command.equalsIgnoreCase("move")) {
    move1 = Integer.parseInt(splitUpText[1]);
    move2 = Integer.parseInt(splitUpText[2]);
    g.moveTo(move1, move2);
} 
```

哪里

```
if (command.equalsIgnoreCase("move")) {
    try {
       move1 = Integer.parseInt(splitUpText[1]);
       move2 = Integer.parseInt(splitUpText[2]);
       g.moveTo(move1, move2);
    } catch (ArrayIndexOutOfBoundsException e) {
       Sytem.out.println("move needs 2 parameters!")
       continue;
    }
} 
```

并将其应用于您的其他命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T09:49:36.673

您可以使用：

```
if (splitUpText.lenght() != 3)
    System.err.println("Invalid..."); 
```

# filepicker.io - FilpickerIO Web API 安全策略和可公开访问的文件

> ID：13305545
> 
> 赞同：0
> 
> 时间：2012-11-09T09:43:48.400
> 
> 标签：filepicker.io

在意识到可以使用*API 密钥*和请求轻松删除文件后，我刚刚开始阅读您[关于安全性和策略生成的文档。](https://developers.filepicker.io/docs/security/)您的安全实施似乎是保护我们的用户文件（在这种情况下为图像）并使 API 密钥对文件写入无用的答案。但是，在我实施安全之前，我有一些问题：*`DELETE`*

 *我希望所有图像都可以公开访问，即策略 ?call=read。有没有办法设置默认的只读策略，以便文件可以公开访问，而不必为每个 url 生成策略？（还是我误解了）

理想情况下，我希望`https://www.filepicker.io/api/file/[handle]`通过为经过身份验证的用户（以及后端的 API 调用）生成策略来提供带有 url 的图像并写入/删除图像。

*编辑：不幸的是，Liyan 的答案对我来说不是最佳的，因为我可能有 100 张图像，每张图像都需要在从数据库加载后附加硬编码的查询字符串。从我的角度来看，解决方案是在开发人员门户中设置一个复选框（现在和以后的默认策略编辑器），它允许您为“默认”网址设置只读访问权限。filepicker.io guy/gals 会考虑添加（或类似的东西）吗？否则，在我的数据库和视图之间进行 url 处理的额外维护和复杂性有点像噩梦。*

*编辑：好吧，Filepicker.io 再次展示了他们提供的优质服务！非常感谢 Liyan 和团队的其他成员所做的这些更改。我会把你们推荐给任何我能做到的人:)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:27:21.690

指定到期和调用。然后不要指定句柄。

```
{'call': ['read', 'convert'], 'expiry': expiryForNextHundredYears} 
```

该策略将允许读取、转换您的所有文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:47:45.867

您现在可以在开发人员门户中将您的网址设置为“只读”。*

# matlab - Maple 或 Matlab 的 Mupad 符号方程代换和简化

> ID：13305547
> 
> 赞同：1
> 
> 时间：2012-11-09T09:43:54.460
> 
> 标签：matlab, math, equation, maple

我没有使用 Maple 或 Matlab 的 mupad 的经验，我想做下一个：

```
parametric:={x=a3*t^3+a2*t^2+a1*t+a0, y=b3*t^3+b2*t^2+b1*t+b0}

inplicit:= 0=uxxx*x^3+uxxy*x^2*y+uxyy*x*y^2+uyyy*y^3+uxx*x^2+uxy*x*y+uyy*y^2+ux*x+uy*y+u0; 
```

有了这两个方程，我想找到写成的解析表达式：

```
v9*t^9+v8*t^8+...+v1*t+v0=0; 
```

我尝试了该命令`simplify(subs(implicit,parametric))` ，但它给我的结果只是下一个。

```
0 = u0 + uxx*(a3*t^3 + a2*t^2 + a1*t + a0)^2 + uxxx*(a3*t^3 + a2*t^2 + a1*t + a0)^3 + uyy*(b3*t^3 + b2*t^2 + b1*t + b0)^2 + uyyy*(b3*t^3 + b2*t^2 + b1*t + b0)^3 + ux*(a3*t^3 + a2*t^2 + a1*t + a0) + uy*(b3*t^3 + b2*t^2 + b1*t + b0) + uxy*(a3*t^3 + a2*t^2 + a1*t + a0)*(b3*t^3 + b2*t^2 + b1*t + b0) + uxxy*(a3*t^3 + a2*t^2 + a1*t + a0)^2*(b3*t^3 + b2*t^2 + b1*t + b0) + uxyy*(a3*t^3 + a2*t^2 + a1*t + a0)*(b3*t^3 + b2*t^2 + b1*t + b0)^2 
```

不要读它，它只是代替 x 写的 x 方程，但没有任何更多的方程发展。我只是找不到以我想要的方式编写方程式的方法。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:01:54.433

看来您需要使用“收集”命令而不是“简化”。

尝试以下命令：

```
collect(subs(implicit,parametric),t) 
```

有关命令的 MATLAB 文档参考：http: [//www.mathworks.com/help/symbolic/collect.html](http://www.mathworks.com/help/symbolic/collect.html)

# google-maps - 谷歌地图在点击时获取标记图标网址

> ID：13305554
> 
> 赞同：0
> 
> 时间：2012-11-09T09:44:16.130
> 
> 标签：google-maps, google-maps-api-3, kml

我需要在点击时获取标记图标 url，我在谷歌地图文档上看到有函数 getIcon() 但不知道在哪里调用它。

```
 google.maps.event.addListener(layer, 'click', function (kmlEvent) {
                    alert(kmlEvent.getIcon());//Object #<Object> has no method 'getIcon'
                    showInContentWindow(map, kmlEvent);
                }); 
```

**更新：**

```
 var myOptions = {
        zoom: 8,
        center: null,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("kmlMapCanvas"), myOptions);

    var layer = new google.maps.KmlLayer(
    'https://maps.google.co.uk/maps/ms?msid=207817312541605896974.0004cdbf70e9c541de0ac&msa=0&ll=51.499019,-0.58382&spn=0.070103,0.209255&output=kml',
    {                       
      suppressInfoWindows: true,
      map: map
    });

    google.maps.event.addListener(layer, 'click', function (kmlEvent) {
             alert(kmlEvent.getIcon());//Object #<Object> has no method
        showInContentWindow(map, kmlEvent);
    }); 
```

我正在失去与原生标记的联系......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:39:13.650

如果您使用 KmlLayer 呈现 KML，则无法访问该图标。如果您使用第三方解析器，例如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)，它使用原生 Google Maps API v3 标记呈现 KML，您可以使用标记上的 getIcon() 方法访问图标。

[您的 KML 与 geoxml3 一起显示](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?https%3A%2F%2Fmaps.google.co.uk%2Fmaps%2Fms%3Fmsid%3D207817312541605896974.0004cdbf70e9c541de0ac%26msa%3D0%26ll%3D51.499019%2C-0.58382%26spn%3D0.070103%2C0.209255%26output%3Dkml)

图标的网址是：

```
geoXmlDoc.placemarks[0].marker.getIcon().url
geoXmlDoc.placemarks[1].marker.getIcon().url
geoXmlDoc.placemarks[2].marker.getIcon().url 
```

这适用于该页面（在地址栏中，至少在 IE 中）：

```
javascript:alert(geoXmlDoc.placemarks[0].marker.getIcon().url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:40:51.093

`getIcon()`是一种方法`google.maps.Marker`。地标（我猜这就是您单击的内容）被呈现为标记，但不是本机标记，因此您无法在此处使用 getIcon() 方法。

Maps-API 中没有选项可以检索有关渲染标记（地标）的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:41:16.023

确保`kmlEvent`是你的标记，因为`getIcon()`是 google.maps.Marker 方法

根据您的评论

> 如何加载/获取本机标记

这就是向地图添加标记的方式

```
var marker = new google.maps.Marker({
    position: userLatLngvariable,
    title: 'Your title here',
    draggable: true,
    map: map
}); 
```

在这里查看一个工作示例：http: [//jsfiddle.net/RASG/vA4eQ/](http://jsfiddle.net/RASG/vA4eQ/)
（单击“添加标记”按钮）

# c# - 工具提示适用于第二个悬停而不是第一个

> ID：13305557
> 
> 赞同：1
> 
> 时间：2012-11-09T09:44:28.643
> 
> 标签：c#, javascript, jquery, asp.net, tooltip

我在嵌套数据列表中保留了一个链接按钮（ *Asp.net,c# ）。*

```
Data list1

    --> Data list2

        --> Link Button 
```

页面加载后，工具提示脚本适用于第二次悬停，而不是第一次悬停。

**这是我的脚本：**

```
$("[id*=LinkButton2]").live("mouseover", function () {
        $("[id*=LinkButton2]").aToolTip({
                fixed: true,
                tipContent: document.getElementById("<%=tax_dl.ClientID%>").innerHTML
            });
        }); 
```

工具提示限制并显示一些值。

*如果您需要更多信息，请告诉我*

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:50:26.217

问题是因为`aToolTip()`在第一次悬停时在元素上实例化，然后在后续悬停时运行。

相反，您需要`aToolTip()`在创建`LinkButton2`元素时附加，而不是打扰`live()`.

# yii - 如何使用 MySQL 配置和安装 Phundament 3？

> ID：13305559
> 
> 赞同：0
> 
> 时间：2012-11-09T09:44:31.387
> 
> 标签：yii, content-management-system, yii-extensions, phundament

已下载并将[**phundament3**](http://phundament.com/)放置在本地机器上，它可以工作，但在尝试使用 Mysql 数据库配置/安装它时不起作用，就像[安装文档](https://github.com/schmunk42/phundament/wiki/Installation)一样，
我在哪里可以找到它的**Mysql**转储？
如果**安装**全部为我完成，那么如何在本地进行？任何人都可以解释步骤，使用 Ubuntu 11.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:40:27.550

如果您不小心混淆了您的安装，例如。您已经使用 SQLite 数据库（这是默认数据库）安装了 Phundament，但您想使用 MySQL 安装它，请执行以下步骤：

*   更新 Yii 的`db`组件`config/main.php`以运行你的 MySQL 数据库；*注意：默认情况下，Phundament`console.php`使用与 web 应用程序相同的组件。*
*   转到您的网络应用程序文件夹并运行`./yiic migrate`
*   您应该看到要应用的迁移列表，回答`yes`开始迁移

所有迁移现在应该再次运行，只需使用您的 MySQL 数据库。

# iphone - NSURLCache 在尝试从磁盘访问缓存请求时返回 nil

> ID：13305564
> 
> 赞同：6
> 
> 时间：2012-11-09T09:44:58.253
> 
> 标签：iphone, xcode, ios5, caching, afnetworking

我正在尝试使用内置于 iOS 5 的基于磁盘的 url cacing。我有一个 json 提要，我想加载然后缓存它，因此下次用户使用该应用程序时它会立即加载。cache.db 文件已成功创建，如果我在 sqlite-editor 中打开它，我可以获取数据。

我正在使用 AFNetworking

```
NSURL *url = [NSURL URLWithString:@"http://myurl.com/json"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

NSLog(@"%d before call",[[NSURLCache sharedURLCache] currentDiskUsage]);  // logs 0 bytes
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
// is successfully loading JSON and reading it to a table view in a view
}failure:nil];

NSCachedURLResponse *cachedResponse = [[NSURLCache sharedURLCache] cachedResponseForRequest:request] 
// this returns nil, and can't load the request from disk. 
```

在缓存响应块中，奇怪的是缓存现在正在工作，并成功地从内存中获取了 cacheurl 请求。

```
[operation setCacheResponseBlock:^NSCachedURLResponse *(NSURLConnection *connection, NSCachedURLResponse *cachedResponse) {
        NSCachedURLResponse *cachedResponse_ = [[NSURLCache sharedURLCache] cachedResponseForRequest:request];
        NSLog(@"%d AFTER CACHE",[[NSURLCache sharedURLCache] currentDiskUsage]);
        // this writes out 61440
        return cachedResponse;
    }]; 
```

下次启动应用程序时，如何从磁盘加载缓存的 URL 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:54:30.570

当您尝试在第一个代码部分（第 9 行）中获取缓存的响应时，请求尚未完成。

`-[AFJSONRequestOperation JSONRequestOperationWithRequest:success:failure:]`是异步的，因此在请求完成之前不会将任何内容存储在缓存中。如果您尝试在成功块内（或在缓存响应块中，如您在第二个代码部分中所做的那样）获取缓存的响应，它应该可以正常工作。

至于您的第二个问题，您不能保证数据将被 NSURLCache 缓存，即使您的 Cache-Control 标头声明您的内容在很长一段时间内都不会过期。缓存文件始终存储在应用程序的 Caches 目录中，如果 iOS 认为需要释放磁盘空间，[可以随时清除该目录。](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html)

如果您需要确保您的 JSON 数据始终可用，请将其保存在您的应用程序的`Library/Application Support`目录中，最好[使用`NSURLIsExcludedFromBackupKey`指定](http://developer.apple.com/library/ios/#qa/qa1719/_index.html#//apple_ref/doc/uid/DTS40011342)的目录（除非您的应用程序确实无法在没有数据的情况下运行）。

# database - 如何规范化我的表？

> ID：13305568
> 
> 赞同：0
> 
> 时间：2012-11-09T09:45:06.510
> 
> 标签：database, normalization

我有一个由 MySQL 数据库中的 1440 列组成的表。列名是： `id`, `name`, `email`, `phonenumber`, 以及`datewithtime`像 1'st january_2012_00:00, 1'st january_2012_00:30, 1'st january_2012_01:00, 1'st january_2012_01:00, 1'st january_2012_02:00,.. ., 1 月 1 日_2012_24:00。

我可以在一个表中维护所有这些列，还是可以将单个表分成多个表并在它们之间建立关联？对我来说最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:59:02.060

您应该创建一个包含 (UserId, SomeDateColumnName, SomeValueColumnName) 的表

然后，表中每一列的值将进入这个新表中的一行。前任：

代替

```
Id  Name  Email  Phone  1stjanuary_2012_00:00  1stjanuary_2012_00:30 ...
1   A     A@A.A  123    Value 1                Value 2 
```

你将会有

```
Id  Name  Email  Phone
1   A     A@A.A  123 
```

加

```
UserId  DateColumn           ValueColumn
1       2012-01-01 00:00:00  Value 1
1       2012-01-01 00:30:00  Value 2
1       2012-01-01 01:00:00  Value 3
1       2012-01-01 01:30:00  Value 4
...
2       2012-01-01 00:00:00  Value 123
2       2012-01-01 00:30:00  Value 234
2       2012-01-01 01:00:00  Value 345
2       2012-01-01 01:30:00  Value 456
... 
```

# openoffice-calc - 如何识别 Openoffice Calc 中两列中的重复值

> ID：13305569
> 
> 赞同：5
> 
> 时间：2012-11-09T09:45:08.797
> 
> 标签：openoffice-calc

我有两列有数字。当另一个有重复时，另一个只有一次数字。这些列中的数字不匹配。我需要在 B 列中找到与 A 列匹配的所有数字。

这可能更好地解释它：
AB
1 2
2 2
4 5
6 5
7 6
8 6

我想得到这样的结果：
ABC
1 2 1
2 2 1
4 5 0
6 5 0
7 6 1
8 6 1

或任何其他方式让我识别 B 列中与 A 列不匹配的单元格

我花了几个小时在谷歌上搜索并尝试不同的解决方案，但没有成功，因此我们将不胜感激推动正确的方向

谢谢

-M

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T11:00:34.513

在单元格 C1 中：

```
=COUNTIF(A$1:A$6;B1) 
```

并抄下来。

# windows - 从另一个进程/程序中创建一个新进程

> ID：13305578
> 
> 赞同：2
> 
> 时间：2012-11-09T09:45:27.200
> 
> 标签：windows, process, malware

假设我必须编写一个 Windows 程序，该程序有时会使用相应的可执行映像创建一个或多个新进程。我知道一些可能的方法来做到这一点：

*   简单的方法是将此图像提取到磁盘并从那里创建一个新进程。
*   正如[这个](https://stackoverflow.com/questions/10523681/execute-a-process-from-memory-within-another-process)问题及其回答者所建议的那样（将图像加载到像 tmpfs 这样的 RAM 驱动器 - Windows 等价物是[UPX](http://upx.sourceforge.net/)）

我的问题是：还有其他方法吗？我正在考虑以某种方式将 exec 转换为 DLL 并加载它，甚至对某些正在运行的进程进行木马化？

# java - JXDatePicker 返回错误的日期

> ID：13305579
> 
> 赞同：1
> 
> 时间：2012-11-09T09:45:37.173
> 
> 标签：java, swing, datepicker, simpledateformat

我在我的 Swing 应用程序中使用 JXDatePicker，并使用以下代码将日期值设置为 SQL Server 表

```
 Date date = jDatePicker1.getDate();          
 String expectedPattern = "yyyy-MM-dd hh:mm:ss.SSS";
 String currentFormat = "dd-MM-yyyy hh:mm:ss.SSS";
 SimpleDateFormat dateFormatReq = new SimpleDateFormat(expectedPattern);
 SimpleDateFormat dateFormatCurr = new SimpleDateFormat(currentFormat);
 String strDate = dateFormatReq.format(dateFormatCurr.parse(dateFormatCurr.format(date))); 
```

问题是 strDate 值是**'2011-04-01 12:00:00.000'**

我的要求是**'2011-04-01 00:00:00.000'**

在这件事上的任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:46:58.133

使用`HH`而不是`hh`几个小时。因为`HH`是“一天中的小时（0-23）”并且`hh`是“上午/下午的小时（1-12）”。请参阅[http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

# c# - 在数据表中动态存储多个值

> ID：13305583
> 
> 赞同：0
> 
> 时间：2012-11-09T09:46:03.753
> 
> 标签：c#, asp.net, webforms, web-controls

我有一个文本框和按钮。单击按钮时，在文本框中输入的数据存储在数据表中，并且此数据表绑定到网格视图。每当我输入新数据并单击按钮时，先前输入的数据都不会显示在 gridview 中。

如何在每次单击按钮时将数据保留在数据表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:51:41.170

Call the method to get data in gridview again.

```
protected void Button1Click(object sender, EventArgs e)
        {
            GridView1.DataSource = data;
            GridView1.DataBind();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:50:40.070

只需调用`gridView.DataBind()`即可刷新数据。如果您的添加导致回发，那么您需要确保在页面加载后执行此操作。

# javascript - 如何在 iOS Titanium 中创建复选框？

> ID：13305584
> 
> 赞同：0
> 
> 时间：2012-11-09T09:46:03.730
> 
> 标签：javascript, titanium, titanium-mobile

如何使用 Titanium for iOS 创建一个复选框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:10:17.877

这是一个非常简化的示例，说明如何执行类似操作

```
var win = Ti.UI.createWindow()

function createCheckbox (specs) {
    if(typeof specs != "object")
        specs = {};
    specs.width = specs.width || 25
    specs.backgroundColor = specs.unCheckedColor || "white"
    specs.height = specs.height || 25
    specs.border = specs.border || 1
    specs.borderColor = specs.borderColor || "silver"
    var viw = Ti.UI.createView(specs)

    function togglecheck () {
        if(!viw.checked) {
            viw.checked = true;
            viw.backgroundColor = specs.checkedColor || "green"
        }
        else {
            viw.checked = false;
            viw.backgroundColor = specs.unCheckedColor || "white"
        }           
    }
    viw.addEventListener("click",togglecheck)

    return viw
}

var checkbox = createCheckbox({})

win.add(checkbox) 
```

您还可以使用背景图像在视图上显示复选标记或在稍大的视图上添加较小的视图，并且只为内部视图提供边框颜色并在外部视图上显示复选标记图像

希望这会为您指明正确的方向

* * *

编辑：这是一个带有图像的示例，虽然我真的会创建一个新的（显然是透明的），因为这个看起来真的很糟糕^^无论如何，这样一个带有图像的 checkboxc 可以工作

```
var win = Ti.UI.createWindow()
Ti.UI.setBackgroundColor("#FFF")
function createCheckbox (specs,checkboxspecs,image) {

    if(typeof checkboxspecs != "object")
        checkboxspecs = {};
    checkboxspecs.width = checkboxspecs.width || 25
    checkboxspecs.backgroundColor = checkboxspecs.unCheckedColor || "white"
    checkboxspecs.height = checkboxspecs.height || 25
    checkboxspecs.border = checkboxspecs.border || 1
    checkboxspecs.borderColor = checkboxspecs.borderColor || "silver"
    var imageView = Ti.UI.createImageView({
        image:image || "acheckbox.gif",
        height:checkboxspecs.height * 1.5,
        bottom:3 + checkboxspecs.height * 0.5,
        left:3 + checkboxspecs.width * 0.5,
        opacity:0
    })  

    var viw = Ti.UI.createView(checkboxspecs)
    specs.width =  checkboxspecs.width * 1.5;
    specs.height = checkboxspecs.height * 1.5;

    var outerview = Ti.UI.createView({
        width: specs.width * 1.5,
        height: specs.height * 1.5,
    })
    var clickview = Ti.UI.createView({
        width:checkboxspecs.width,
        height:checkboxspecs.height
    })
    outerview.add(viw)
    outerview.add(imageView)
    outerview.add(clickview)

    function togglecheck () {
        if(!viw.checked) {
            viw.checked = true;
            imageView.opacity = 1;

        }
        else {
            viw.checked = false;
            imageView.opacity = 0;
        }           
    }
    clickview.addEventListener("click",togglecheck)
    return outerview
}

var checkbox = createCheckbox({},{
    width:20,
    height:20,
    borderRadius:3,
    border:2
},"checkbox.gif")

win.add(checkbox) 
```

win.open()

把图片另存为“checkbox.gif”，放到Resources文件夹下（真的，新建一个） ![在此处输入图像描述](../Images/f726d6f3729e790a40adf9f46744d4e8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:59:31.630

根据[这个问题](https://stackoverflow.com/questions/5368196/how-create-simple-checkbox)，iOS 中没有复选框。您可能想要使用[UI 开关](http://developer.appcelerator.com/apidoc/mobile/1.7.1/Titanium.UI.Switch-object)。

# java - 如何处理 java.lang.nullpointerexception

> ID：13305590
> 
> 赞同：0
> 
> 时间：2012-11-09T09:46:29.683
> 
> 标签：java, exception, nullpointerexception

大家好，我真的被困住了，我不断得到`java.lang.NullPointerException`. 我试图在每一个可能的地方处理它，但我没有成功。这是家庭作业。如果您可以查看并提供一些反馈，`java.lang.NullPointerException`那就太好了。异常发生在`Captain.handleProblem()` 和`MalfucntionHandler.proccessMalfunction()`

```
 public abstract class MalfunctionHandler 
    {

        MalfunctionHandler next;
        /**
         * severity is a type of Severity 
         */
        Severity severity;

        /**
         * @param description describes the severity of the problem
         */
        String description;

        /**
         * @param f file object  that refers to the log-silver.txt
         */
        File f = new File("log-silver.txt");

        MalfunctionHandler(Severity severity)
        {
                this.severity = severity;
        }
         public String getDescription()
        {
            if(description == null)
            {
                description = "No description available. Probably serious.";
            }
            return description;
        }

        final protected void processMalfunction(Malfunction malfunction)
        {
            if (this.severity == malfunction.getSeverity())
            {
               handleProblem();
            }
            else
            {
    //            if(malfunction == null)
                next.processMalfunction(malfunction);
            }
        }
        final protected void addHandler(MalfunctionHandler next)
        {
            this.next = next;
        }
        abstract void handleProblem();

        public Severity getSeverity() 
        {
            return severity;
        }
    }

public class Malfunction 
{
    /**
     * severity is a type of Severity 
     */
    Severity severity;

    /**
     * @param description describes the severity of the problem
     */
    String description;

    Malfunction(Severity severity, String description)
    {
        this.description = description;
        this.severity = severity;
    }

    public Severity getSeverity() 
    {
        return severity;
    }

     public String getDescription()
    {
        if(description == null)
        {
            description = "No description available. Probably serious.";
        }

        return description;
    }
}

public enum Severity 
{
     TRIVIAL, LOW, MEDIUM, HIGH
}

public class SpaceMonkey extends MalfunctionHandler {

    MalfunctionHandler malfunction;

    SpaceMonkey(Severity severity)
    {
       super(severity);
    }
    @Override
    void handleProblem() 
    {
        if(malfunction.getDescription() == null)
        {
            description = "No description available. Probably serious.";
        }
           FileUtility.writeFile(f, malfunction.getDescription()); 
           FileUtility.writeFile(f, "---> Space monkey assigned to problem.");
    }
}

public class ServiceRobot extends MalfunctionHandler {

     MalfunctionHandler malfunction;

    ServiceRobot(Severity severity)
    {
        super(severity);
    }
    void handleProblem() 

    {
       if(malfunction.getDescription() == null)
        {
            description = "No description available. Probably serious.";
        }
           FileUtility.writeFile(f, malfunction.getDescription());
           FileUtility.writeFile(f, "---> Service Robot assigned to problem.");
    }

}

public class Engineer extends MalfunctionHandler
{

     MalfunctionHandler malfunction;

    Engineer(Severity severity)
    {
        super(severity);

    }

    void handleProblem() 
    {
         if(malfunction.getDescription() == null)
        {
            description = "No description available. Probably serious.";
        }
          FileUtility.writeFile(f, malfunction.getDescription());
           FileUtility.writeFile(f, "---> Engineer assigned to problem.");
    }

}

public class Captain extends MalfunctionHandler
{
     MalfunctionHandler malfunction ;

    Captain(Severity severity)
    {
        super(severity);
    }

    @Override
   void handleProblem( ) 
    {
        if(malfunction.getDescription() == null)
        {
            description = "No description available. Probably serious.";
        }
           FileUtility.writeFile(f, malfunction.getDescription());
           FileUtility.writeFile(f, "---> Captain assigned to problem.");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:55:51.983

```
 if(malfunction.getDescription() == null) 
```

您从未在类**SpaceMonkey中初始化****MalfunctionHandler**对象并尝试在**handleProblem方法中调用其****getDescription()**方法。在 java 对象中，您的 MalfunctionHandler 故障将默认值为 null；此处为 null 并且您正尝试在 null 上访问其方法。

 ******由于您的 MalfunctionHandler 是一个抽象类，请使用其子类（SpaceMonkey）对其进行初始化

```
 MalfunctionHandler malfunction; = new SpaceMonkey(Severity); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:56:27.107

故障对象***未初始化，它只是在 Captain 类中声明。***

也不建议捕获 NullPointerExceptions。相反，您应该在代码中进行验证和检查，以免产生此类异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T09:56:42.987

默认情况下，实例变量的对象类型为 null

```
 MalfunctionHandler malfunction; 
```

和

```
 MalfunctionHandler malfunction = null; 
```

是一样的。你的班级有这个问题

在这里`if(malfunction.getDescription() == null)` ，故障为空，所以你在这里得到 NPE。******

# android - 地图应用程序中的 nullPointerException 错误

> ID：13305596
> 
> 赞同：-2
> 
> 时间：2012-11-09T09:46:57.673
> 
> 标签：android, exception, map

我编写了在地图上显示 a 的程序`balloonView`，当我运行该程序时，该程序已停止。我阅读了 LogCat 并得到了一个`NullPointerException`，但我不知道问题出在哪里以及在哪一行。

位置.java

```
 public class Location extends MapActivity {
private FrameLayout linear;
private MapView map;
private MapController controller;
private EditText text_location;
GeoPoint searchLocation;
GeoPoint mylocation;
double myLatitude=0;
double myLongitude=0;
List<Overlay> mapOverlays;
Drawable drawable;
SimpleItemizedOverlay itemizedOverlay;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);
    initMapView();
    //initZoomControls();
    initMyLocation();
    //Not complete this method
    text_location.setOnKeyListener(new OnKeyListener(){
        public boolean onKey(View view, int keyCode,KeyEvent event){
            if(keyCode==KeyEvent.KEYCODE_ENTER){
                // The map should shows a location that user writes in edittex.
                Geocoder geo=new Geocoder(getApplicationContext(),Locale.getDefault());

                List<Address> address;
                try {
                    address = geo.getFromLocationName(text_location.getText().toString(),3);
                    if(address.size()>0){
                        searchLocation=new GeoPoint((int)(address.get(0).getLatitude()*1e6),(int)(address.get(0).getLongitude()*1e6));
                        controller.animateTo(searchLocation);
                        controller.setZoom(12);
                        //

                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                return true;
            }
            return false;
        }
    });
    mapOverlays=map.getOverlays();
    drawable=getResources().getDrawable(R.drawable.marker);
    itemizedOverlay=new SimpleItemizedOverlay(drawable,map);
    OverlayItem overlayItem=new OverlayItem(searchLocation,text_location.getText().toString(),"for test");
    itemizedOverlay.addOverlay(overlayItem);
    mapOverlays.add(itemizedOverlay);

}
@Override
protected boolean isRouteDisplayed() {
    return false;
}
private void initMapView() {
    linear = (FrameLayout) findViewById(R.id.frame);
    text_location=(EditText)findViewById(R.id.edit_text);
    map = (MapView) findViewById(R.id.map);
    controller = map.getController();
    map.setSatellite(true);
}
/*private void initZoomControls() {
    //WHY???
    View zoomControls = map.getZoomControls();
    FrameLayout.LayoutParams p = new FrameLayout.LayoutParams(
       LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,Gravity.CENTER_VERTICAL + Gravity.CENTER_HORIZONTAL);
    linear.addView(zoomControls, p);
}*/
private void initMyLocation() {
    final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
    overlay.enableMyLocation();
    overlay.enableCompass(); 
    //
    mylocation=overlay.getMyLocation();
    overlay.runOnFirstFix(new Runnable() {
        public void run() {
            controller.setZoom(13);
            controller.animateTo(overlay.getMyLocation());
        }
    });
    map.getOverlays().add(overlay);

    //myLatitude=(overlay.getMyLocation().getLatitudeE6())/1e6;
    //myLongitude=(overlay.getMyLocation().getLongitudeE6())/1e6;

}

} 
```

日志猫：

```
11-09 13:02:37.480: D/libEGL(26632): loaded /system/lib/egl/libGLES_android.so
11-09 13:02:37.488: D/libEGL(26632): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
11-09 13:02:37.488: D/libEGL(26632): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
11-09 13:02:37.496: D/libEGL(26632): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
11-09 13:02:37.637: D/OpenGLRenderer(26632): Enabling debug mode 0
11-09 13:02:40.582: D/dalvikvm(26632): GC_CONCURRENT freed 189K, 2% free 14334K/14599K, paused 3ms+2ms
11-09 13:02:40.582: W/CursorWrapperInner(26632): Cursor finalized without prior close()
11-09 13:02:40.691: I/Maps.MyLocationOverlay(26632): Request updates from network
11-09 13:02:40.707: D/dalvikvm(26632): GC_CONCURRENT freed 121K, 2% free 14613K/14855K, paused 2ms+2ms
11-09 13:02:40.855: D/AndroidRuntime(26632): Shutting down VM
11-09 13:02:40.855: W/dalvikvm(26632): threadid=1: thread exiting with uncaught exception (group=0x40a3f1f8)
11-09 13:02:40.855: E/AndroidRuntime(26632): FATAL EXCEPTION: main
11-09 13:02:40.855: E/AndroidRuntime(26632): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.example.loyaltier/org.example.loyaltier.Location}: java.lang.NullPointerException
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.os.Looper.loop(Looper.java:137)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.main(ActivityThread.java:4340)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at java.lang.reflect.Method.invokeNative(Native Method)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at java.lang.reflect.Method.invoke(Method.java:511)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at dalvik.system.NativeStart.main(Native Method)
11-09 13:02:40.855: E/AndroidRuntime(26632): Caused by: java.lang.NullPointerException
11-09 13:02:40.855: E/AndroidRuntime(26632):    at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java:312)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at org.example.loyaltier.SimpleItemizedOverlay.addOverlay(SimpleItemizedOverlay.java:27)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at org.example.loyaltier.Location.onCreate(Location.java:85)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.Activity.performCreate (Activity.java:4465)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
11-09 13:02:40.855: E/AndroidRuntime(26632):    ... 11 more
11-09 13:02:42.887: I/Process(26632): Sending signal. PID: 26632 SIG: 9
11-09 13:02:37.480: D/libEGL(26632): loaded /system/lib/egl/libGLES_android.so
11-09 13:02:37.488: D/libEGL(26632): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
11-09 13:02:37.488: D/libEGL(26632): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
11-09 13:02:37.496: D/libEGL(26632): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
11-09 13:02:37.637: D/OpenGLRenderer(26632): Enabling debug mode 0
11-09 13:02:40.582: D/dalvikvm(26632): GC_CONCURRENT freed 189K, 2% free 14334K/14599K, paused 3ms+2ms
11-09 13:02:40.582: W/CursorWrapperInner(26632): Cursor finalized without prior close()
11-09 13:02:40.691: I/Maps.MyLocationOverlay(26632): Request updates from network
11-09 13:02:40.707: D/dalvikvm(26632): GC_CONCURRENT freed 121K, 2% free 14613K/14855K, paused  2ms+2ms
11-09 13:02:40.855: D/AndroidRuntime(26632): Shutting down VM
11-09 13:02:40.855: W/dalvikvm(26632): threadid=1: thread exiting with uncaught exception (group=0x40a3f1f8)
11-09 13:02:40.855: E/AndroidRuntime(26632): FATAL EXCEPTION: main
11-09 13:02:40.855: E/AndroidRuntime(26632): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.example.loyaltier/org.example.loyaltier.Location}: java.lang.NullPointerException
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.os.Looper.loop(Looper.java:137)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.ActivityThread.main(ActivityThread.java:4340)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at java.lang.reflect.Method.invokeNative(Native Method)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at java.lang.reflect.Method.invoke(Method.java:511)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at dalvik.system.NativeStart.main(Native Method)
11-09 13:02:40.855: E/AndroidRuntime(26632): Caused by: java.lang.NullPointerException
11-09 13:02:40.855: E/AndroidRuntime(26632):    at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java:312)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at org.example.loyaltier.SimpleItemizedOverlay.addOverlay(SimpleItemizedOverlay.java:27)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at org.example.loyaltier.Location.onCreate(Location.java:85)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.Activity.performCreate(Activity.java:4465)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-09 13:02:40.855: E/AndroidRuntime(26632):    at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
11-09 13:02:40.855: E/AndroidRuntime(26632):    ... 11 more
11-09 13:02:42.887: I/Process(26632): Sending signal. PID: 26632 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:54:31.237

首先，如果您只是向我们显示错误报告，我们将无法为您提供帮助，您需要显示实际代码。

其次，有很多资源可以教你什么是空指针异常，这样你就可以调试程序，这里有一个：[什么是 NullPointerException，我该如何修复它？](https://stackoverflow.com/questions/218384/what-is-a-null-pointer-exception)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:03:32.710

```
OverlayItem overlayItem=new OverlayItem(searchLocation,text_location.getText().toString(),"for test"); 
```

`text_location.getText()`一开始会为空，因为您已将其放在 keyListener 之外。

试试把这段代码

```
mapOverlays=map.getOverlays();
    drawable=getResources().getDrawable(R.drawable.marker);
    itemizedOverlay=new SimpleItemizedOverlay(drawable,map);
    OverlayItem overlayItem=new OverlayItem(searchLocation,text_location.getText().toString(),"for test");
    itemizedOverlay.addOverlay(overlayItem);
    mapOverlays.add(itemizedOverlay); 
```

进入您的`if(keyCode==KeyEvent.KEYCODE_ENTER){`区域。

# dynamics-ax-2009 - 带有大页眉和页脚的报告 - 备用空白页

> ID：13305598
> 
> 赞同：1
> 
> 时间：2012-11-09T09:47:05.150
> 
> 标签：dynamics-ax-2009, x++, axapta, ax

我有一个定制的销售确认报告，它在页眉中包含很多客户信息，在页脚中包含很多 T&C 文本。

当此报告溢出到第二页时，我看到的只是打印的空白页（带有标准页眉部分），然后报告继续到第三页，从自定义页眉开始。像这样；

```
-----page 1------
header 1
header 2 (large)

lines

footer 1 (large)
footer 2 (page number etc)

-----page 2-----
header 1

footer 2 (page number etc)

-----page 3-----
header 2 (large)

lines

footer 1 (large)
footer 2 (page number etc) 
```

在尝试了许多不同的修复后，我可以添加的唯一额外信息是，如果我减小页脚 1 的大小，第二页会正确打印，但我需要文书工作中的这些 T&C。还值得注意的是，我尝试`newpage()`在正文的每一行上调用一次，尽管这意味着我每页打印一行时有足够的空间，但我仍然得到了备用空白页。

另一个社区站点上的一个建议是将 T&C 部分创建为可编程部分，但我不确定这将如何工作。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:18:25.490

此问题是由字段（或实际上是多个字段）的 DynamicHeight 属性问题引起的。

尽管“标题 2”中的 3 个地址字段不超过 4 行高，但 AX 报告生成器的计算存在问题，这导致第二个标题溢出到新页面（第 3 页），即使第 2 页有足够的空间。

The fix in this case was to ensure the dynamic height property of any filed in "header 2" was set to no.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:49:54.437

检查您没有为未禁用但未在 Execute 部分中调用 super() 的部分分配空间。这些可能存在空白页。如果是这样明确禁用这些部分

# eclipse - Eclipse 文件另存为垃圾

> ID：13305599
> 
> 赞同：3
> 
> 时间：2012-11-09T09:47:13.110
> 
> 标签：eclipse, ubuntu

我最近在 Ubuntu 12.04 上发生了 eclipse 崩溃。重新启动后，我一直在编辑的文件现在充满了随机的 Unicode 字符。有没有办法取回原始文件内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:36:55.260

从上下文菜单中选择文件，然后选择“替换为 -> 本地历史记录”。您将看到一个视图，其中填充了 Eclipse 保存的文件的任何先前版本。最新版本应该处于良好状态，但它可能没有您在 Eclipse 崩溃时所做的更改。

# ios - 如何使用 UTF8 对 JSONObjectWithData 进行编码？

> ID：13305601
> 
> 赞同：0
> 
> 时间：2012-11-09T09:47:24.213
> 
> 标签：ios, ios5, xcode4.5

我有这段代码，我想使用编码来阅读阿拉伯语和表情符号。

使用 JSON

在 .h 我使用两个数组

```
NSArray *news;

NSMutableData *data; 
```

在.m

在 viewDidLoad

```
NSURL *url = [NSURL URLWithString:@"http://myServer.com/getmessages.php"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

我已经使用了这些方法

```
-(void)connection: (NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{    
    data = [[NSMutableData alloc]init];    
}

-(void)connection: (NSURLConnection *)connection didReceiveData:(NSData *)theData
{   
    [data appendData:theData];  
}

-(void)connectionDidFinishLoading: (NSURLConnection *)connection
{

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    news = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];

    if (news == nil || [news count] == 0) {

        UIAlertView *errorView = [[UIAlertView alloc]initWithTitle:@"Sorry!!" message:@" No News !!" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
        [errorView show];
    }

    [self.tableView reloadData];
}

-(void)connection: (NSURLConnection *)connection didFailWithError:(NSError *)error
{

    UIAlertView *errorView = [[UIAlertView alloc]initWithTitle:@"Error" message:@"The download could not complete - Plaese make sure                                            you're connected to either 3G or Wi-Fi" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
    [errorView show];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

} 
```

我使用 UITableView

```
cell.newsLabel.text = [[news objectAtIndex:indexPath.row]objectForKey:@"Content"]; 
```

阿拉伯语和表情符号的编码是什么？以及如何在此代码中使用编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:34:51.187

Emoji 可用于 Unicode6.0 或更高版本（UTF8），iOS5 或更高版本。

# c# - RichTextBox 中的 HTML 格式

> ID：13305602
> 
> 赞同：3
> 
> 时间：2012-11-09T09:47:37.793
> 
> 标签：c#, html, xml, formatting, richtextbox

我一直在处理从 XML 文件中获取的 HTML 字符串。我正在尝试找出一种在带有格式的富文本框中显示这些字符串的方法。所以例如

```
 <p>This is a <strong>HTML</strong> string from the <em>XML</em> file</p> 
```

或者

```
 <p>This is our <span style="text-decoration: underline;">response</span></p> 
```

应该像这样显示在richtextbox中：

这是来自*XML*文件的**HTML**字符串

 *这是我们的回应 <<-- 这应该加下划线

我不太确定该怎么做。而且我不太确定 WebBrowser 类将如何在这里工作，因为 HTML 字符串是单独的，并且不会形成完整的 HTML 文件。

此外，一旦在richtextbox 中进行任何更改，我需要一种方法来反转格式（HTML 编码），因为它们将被写回XML 文件。

我有办法做到这一点吗？我真的可以使用帮助。我难住了。

**编辑：**

如果有帮助，这是我从中获取字符串的 XML 部分（类似于此）。

```
<Field id="13598" type="1">&lt;p&gt;&lt;strong&gt;This &lt;/strong&gt;is our &lt;em&gt;response&lt;/em&gt;&lt;/p&gt;</Field> 
```

我基本上是在尝试允许用户编辑和保存字段中的字符串。

**编辑2：**

我已经设法使用 WebBrowser 控件来满足我的要求，但我面临一个新问题。看看这里： [使用 WYSIWYG 编辑器编辑 HTML](https://stackoverflow.com/questions/13410067/editing-html-with-a-wysiwyg-editor) 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:00:19.887

我已经使用[WYSIWYG HTML editor](http://www.dreamincode.net/forums/topic/48398-creating-a-wysiwyg-html-editor-in-c%23/)解决了它。但是，我面临一个新问题，如果有人可以提供帮助，那就太好了！

这是我的新问题： [Editing HTML with a WYSIWYG Editor](https://stackoverflow.com/questions/13410067/editing-html-with-a-wysiwyg-editor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:00:25.327

您是否使用扩展 RTB 来显示 html，因为据我从 CodeProject 站点了解，.NET RichTextBox 控件仅允许您使用 RTF 代码或纯文本文件保存和加载文件。因此，您需要扩展 RTB 以获取该功能。

这是链接 - [RTB 以保存 Html](http://www.codeproject.com/Articles/12172/An-extended-RichTextBox-to-save-and-load-quot-HTML)。

但是，如果您可以避免它并将 xml 直接加载到 RTB，它会更好，因为工作代码在[这里](http://www.codeproject.com/Questions/392387/Opening-XML-file-in-Csharp-and-RichTextBox)。

有关 html 格式化代码到 RTB 的更多信息，[请查看此处](http://www.daniweb.com/software-development/csharp/threads/295798/load-parse-html-tags-into-richtextbox)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:28:33.717

Winz，我对你的要求有点迷茫。

**根据您的评论...**

`"I'm trying to display them in a RTB as how they'd appear in on a Web Page"`

1.  您希望将 HTML 标记呈现为实际页面，例如， `<img />`标签呈现为实际图像。

2.  您希望将 HTML 标记呈现为文本，就像您要使用各种语法颜色“查看页面源代码”一样

**问题...**

HTML 标记和[RTF 规范](http://msdn.microsoft.com/en-us/library/office/aa140277%28v=office.10%29.aspx)有很大不同，因此您需要将标记转换为 RTF 以使 RichTextBox 显示 HTML，因为页面会出现！

**为了解决您的问题...**

1.  要将 .NET 中的 HTML 标记呈现为网页，您可以使用内置的 WebBrowser 控件。此控件在后台使用微软的 IE 引擎，但请注意，它对 HTML5 和 CSS3 等某些标准不是很友好。*您可以使用 ( IIRC* )[浏览器功能控件](http://msdn.microsoft.com/en-us/library/ee330720%28v=vs.85%29.aspx)改进它呈现页面的方式

2.  要将 HTML 标记呈现为文本，就像您要“查看页面源代码”时出现的那样，使用语法着色，您可以*在一定程度上*使用 RichTextBox 。[这](http://code.msdn.microsoft.com/windowsdesktop/VBRichTextBoxSyntaxHighligh-d73c7c4c)是一个使用 XML 的示例，但是由于 XML 和 HTML 非常相似，您可能可以修改 HTML 语法呈现的解决方案。

注意：语法高亮基本上只是渲染文本以​​对某些事物使用某些颜色，例如标签可能是红色的，而属性可能是蓝色的，而注释可能是绿色的。

这是另一个语法荧光笔示例：

[http://dotnet-csharp-programming.blogspot.co.uk/2010/04/xml-highlighting-in-rich-textbox.html](http://dotnet-csharp-programming.blogspot.co.uk/2010/04/xml-highlighting-in-rich-textbox.html)

**其他解决方案...**

要将 HTML 内容呈现为页面，您可能会考虑为 .NET 找到第 3 方浏览器控件。我知道有一个用于 FireFox 渲染引擎，也可能有一个用于 Chrome。[这](https://stackoverflow.com/questions/790542/replacing-net-webbrowser-control-with-a-better-browser-like-chrome)是一篇关于替换内置 WebBrowser 控件的 stackoverflow 文章。

对于呈现 HTML 语法，您还可以考虑使用[Scintilla.NET](http://scintillanet.codeplex.com/)或者您可以购买商业产品，例如[ActiPro 的语法编辑器](http://www.actiprosoftware.com/products/controls/windowsforms/syntaxeditor)*

# c++ - 将成员函数指针传递给模板函数

> ID：13305603
> 
> 赞同：1
> 
> 时间：2012-11-09T09:47:38.720
> 
> 标签：c++, templates

我正在尝试传递一个类成员函数指针

```
template < typename CLASS, typename TYPE1, typename TYPE2 > 
  void WriteFunctionHelper(CLASS* pOwner, PropInfoType::iterator& it, WriterPtr pw, WriterPtr (Writer::*func)(TYPE1, TYPE2) ) {
     MemberProperty<CLASS,TYPE2> *ptr = (MemberProperty<CLASS, TYPE2> *)it->second;
     const char *propertName = ptr->m_propertyName.c_str(); 
      if ( !ptr->m_getterFn ) { 
        throw; 
      } 
      pw->*func(propertName,(pOwner->*(ptr->m_getterFn))()); 
  } 
```

我收到编译器错误`error C2064: term does not evaluate to a function taking 2 arguments`我在做什么错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:54:16.317

在周围添加护腕`pw->*func`

```
(pw->*func)(propertName,(pOwner->*(ptr->m_getterFn))()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:54:22.490

您的`func`指针可用于触发需要 2 个参数的函数 - 第一个参数`TYPE1`和第二个参数`TYPE2`。您正在尝试发送`propertName`给它，它的类型是`const char *`. 第二个参数也具有不同的类型，因为它实际上是`(pOwner->*(ptr->m_getterFn))()`从而不是返回的类型`TYPE2`。

编辑：加上看到@DenisErmolin的答案

# php - 重定向后的会话（其他站点）似乎消失了

> ID：13305610
> 
> 赞同：1
> 
> 时间：2012-11-09T09:48:01.380
> 
> 标签：php, session, sessionid

我正在我的网站上实施贝宝付款。现在，当用户登录时，点击 paypal 支付链接，进行支付，Paypal 再次将他重定向到用户区。问题是会话数据似乎消失了。

在用户不在的情况下，如何保持会话数据处于活动状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:13:34.537

确保您重定向到具有 100% 正确域的 URL。

请记住，与后者`domain.com`不同，`www.domain.com`并且在后者上启动的会话不会出现在另一个上。

这同样适用于协议：在`http://`URL 上启动的会话不会结转到`https://`.

# magento - Magento：以指定语言获取国家/地区名称

> ID：13305612
> 
> 赞同：3
> 
> 时间：2012-11-09T09:48:18.930
> 
> 标签：magento

我使用此代码获取国家/地区名称，

```
Mage::getModel('directory/country')->loadByCode('DE')->getName(); 
```

在这个示例中，我得到“德国”。如何获得国家名称的翻译以显示例如德语的“Deutschland”？

注意：我不使用前端模块中的代码（它必须独立于客户的前端语言）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T11:20:21.080

当然 Magento 翻译引擎可以在你的外部脚本中使用：

```
Mage::getSingleton('core/translate')->init('de_DE', true);
$country_name = Mage::getModel('directory/country')->loadByCode('DE')->getName();
echo Mage::helper('core')->__($country_name); 
```

或者您可以使用`Zend_Locale`class ar 替代方案：

```
$locale = new Zend_Locale('de_DE');
$countries = $locale->getTranslationList('Territory', $locale->getLanguage(), 2);
echo $countries['DE']; 
```

# c - int a 的意义：2 语法

> ID：13305622
> 
> 赞同：2
> 
> 时间：2012-11-09T09:48:55.213
> 
> 标签：c

> **可能重复：**
> ['unsigned temp:3' 是什么意思？](https://stackoverflow.com/questions/2950029/what-does-unsigned-temp3-mean)

我遇到了一种像 int这样的`variable:4;` 语法，谁能告诉我这个语法是什么意思？

```
struct abc
{
int a;
int b:2;
int c:1;
};`enter code here` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:51:44.530

It defines a width of a bitfield in a struct. A bitfield holds an integer value, but its length is restricted to a certain number of bits, and hence it can only hold a restricted range of values.

In the code you posted, in the structure `a` is a 32-bit integer, `b` is a 2-bit bitfield and `c` is a 1-bit bitfield.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:55:14.207

它是一个位域。而不是为 b 存储一个完整的整数，它只存储 2 位，因此 b 可以具有 -2、-1、0 和 1 的值。类似地，c 只能具有 -1 和 0 的值。

根据您拥有的编译器版本，符号扩展名有点不可预测，某些系统可能会将这些值显示为 0、1、2 和 3 或 0 和 1。

这也会将字段打包成小于一个整数，但同样，这是以实现定义的方式，您最好不要对实际使用多少内存或内存中数据的顺序做出假设。

# couchdb - 列出 CouchDB 中的所有 CouchApp？

> ID：13305623
> 
> 赞同：4
> 
> 时间：2012-11-09T09:48:56.167
> 
> 标签：couchdb, couchapp, couchrest

有没有办法在一个 CouchDB 中列出所有 CouchApp？

我想做类似的事情：

```
couchapp list http://domain.tld:5984/content 
```

并取回所有 couchapp 名称的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:35:01.070

诀窍是使用 _all_docs，然后使用 startkey 和 endkey 从该列表中选择您感兴趣的那些。

由于所有设计文档 _id 都以 _design/ 开头，我们可以选择 _design/ 和后面的字符 0 之间的所有文档，给出 _design0。

```
http://www.couch.db:5984/database/_all_docs?startkey="_design/"&endkey="_design0" 
```

祝你好运！

# ios - 无法在 iOS 6 上使用 Facebook SDK 3.1 构建应用程序

> ID：13305624
> 
> 赞同：2
> 
> 时间：2012-11-09T09:49:02.370
> 
> 标签：ios, facebook-ios-sdk

我已经为 ios 6 集成了最新的 facebook sdk，并将其配置为对以前的 ios 版本完成，但它给了我下面列出的错误：

```
Undefined symbols for architecture i386:
  "_ACAccountTypeIdentifierFacebook", referenced from:
      +[FBSession renewSystemAuthorization] in FacebookSDK(FBSession.o)
  "_ACFacebookAppIdKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceEveryone", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceFriends", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceOnlyMe", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookPermissionsKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_OBJC_CLASS_$_ACAccountStore", referenced from:
      objc-class-ref in FacebookSDK(FBSession.o)
  "_OBJC_CLASS_$_ASIdentifierManager", referenced from:
      objc-class-ref in FacebookSDK(FBSettings.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

你能告诉我这意味着什么吗？我该如何解决这个问题......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T21:53:02.487

您应该将 Accounts.framework、Social.framework 和 AdSupport.framework 二进制文件链接到您的项目。（目标设置 -> 构建阶段 -> 将二进制文件与库链接）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:52:28.600

You have to link against the Accounts framework, among others. It’s described in [Getting Started with the Facebook SDK for iOS](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/), RTFM.

# android - 我的应用程序在模拟器上运行良好，但在 android 设备上运行良好

> ID：13305626
> 
> 赞同：1
> 
> 时间：2012-11-09T09:49:12.033
> 
> 标签：android, xml-parsing

我创建了一个滑块，在其中我从 xml 解析数据图像 url，它也在服务器上。我的应用程序在模拟器上运行良好，我还在清单文件中放置了互联网权限。但这在 android 设备中不起作用并且无法获取数据。请帮我！

```
public class SliderActivity extends Activity{
    int j=0;
    String imageList[];
    ImageView imageview;
    Button next_button, prev_button;
    int no_of_slides;

     /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        imageview = (ImageView) findViewById(R.id.imageView1);
        next_button= (Button) findViewById(R.id.next_button);
        prev_button= (Button) findViewById(R.id.prev_button);

            try{
                /** This section is for xml parsing */
                URL url = new URL("my url");
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                Document doc = db.parse(new InputSource(url.openStream()));
                doc.getDocumentElement().normalize();
                NodeList nodeList = doc.getElementsByTagName("image");
                imageList= new String[nodeList.getLength()];
                no_of_slides=nodeList.getLength()-1;
                for (int i = 0; i < nodeList.getLength(); i++) {
                    Node node = nodeList.item(i);

                    Element fstElmnt = (Element) node;
                    NodeList nameList = fstElmnt.getElementsByTagName("image");
                    Element nameElement = (Element) nameList.item(0);
                    nameList = nameElement.getChildNodes();

                    imageList[i]= ((Node) nameList.item(0)).getNodeValue();

                }
                next_button.setOnClickListener(new clicker());     
                prev_button.setOnClickListener(new clicker());
            }catch(Exception e){
                System.out.println("Exception appears = " + e);
            }
    }

    class clicker implements Button.OnClickListener{              
        public void onClick(View v){
            /** This section is for next button */
            if(v==next_button){
                if(j==no_of_slides)
                    j=0;
                else
                    j=j+1;
                try{
                    imageview.setImageDrawable(grabImageFromUrl(imageList[j]));
                }catch(Exception e){
                    System.out.println("Exception appears = " + e);  
                }
            }
            else
                /** This section is for prev button */
                if(v==prev_button){
                    if(j==0)
                        j=no_of_slides;
                    else
                        j=j-1;
                    try{
                        imageview.setImageDrawable(grabImageFromUrl(imageList[j]));
                    }catch(Exception e){
                        System.out.println("Exception appears = " + e);  
                    }       
                }
            }
    }

    /** This function is to fetch image from URL */
    private Drawable grabImageFromUrl(String url) throws Exception {
        return Drawable.createFromStream((InputStream)new URL(url).getContent(), "src");
    }
} 
```

## XML 结构

```
<images>
    <image>http://www.xyz.com/1.jpeg</image>
    <image>http://www.xyz.com/1.jpeg</image>
    <image>http://www.xyz.com/1.jpeg</image>
</images> 
```

## 错误的主要原因

```
11-09 10:08:56.103: E/System(61): Failure starting core service

11-09 10:08:56.103: E/System(61): java.lang.SecurityException

11-09 10:08:56.103: E/System(61):   at android.os.BinderProxy.transact(Native Method)

11-09 10:08:56.103: E/System(61):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)

11-09 10:08:56.103: E/System(61):   at android.os.ServiceManager.addService(ServiceManager.java:72)

11-09 10:08:56.103: E/System(61):   at com.android.server.ServerThread.run(SystemServer.java:176) 
```

我在 logcat 中收到这些消息.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:55:39.737

我认为您必须将图像缓存到本地，请参阅[Android：图像下载和缓存](http://theandroidcoder.com/utilities/android-image-download-and-caching/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:39:28.887

数据是否在手机上激活？

# c# - Windows 8 桌面边界更改事件

> ID：13305636
> 
> 赞同：1
> 
> 时间：2012-11-09T09:49:31.563
> 
> 标签：c#, winforms, windows-8

`WorkingArea`我有一个 WinForms 桌面应用程序，当由于 Metro 应用程序被捕捉到屏幕的左侧或右侧而导致桌面边界更改（或）时，该应用程序需要做出反应。

没有被`SystemEvents.DisplaySettingsChanged`解雇，也找不到好的替代方案

# ios - 在 macOS 中将 .sql 数据库导入 sqlite3

> ID：13305643
> 
> 赞同：0
> 
> 时间：2012-11-09T09:50:18.490
> 
> 标签：ios, sql, database, ipad, sqlite

我尝试使用 xxx.sql 脚本文件在我的 MAC OS X 机器上创建 sqlite3 数据库。但我收到一个错误。sql 文件是在 Windows 系统上创建的。

我使用的命令：

```
sqlite3 bizApp1.sqlite < DBCreationScript_8thNov2012_New.sql 
```

结果：

```
Error: incomplete SQL: ??/ 
```

该错误似乎是语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:37:17.137

如果您是初学者，您可以使用[SQLite 数据浏览器之类的简单软件](http://sourceforge.net/projects/sqlitebrowser/)

# sql - SQL MIN() 返回多个值？

> ID：13305648
> 
> 赞同：0
> 
> 时间：2012-11-09T09:50:31.733
> 
> 标签：sql, sql-server, min

我正在使用 SQL Server 2005，使用 Web Developer 2010 进行查询，并且 min 函数似乎返回了多个值（对于返回的每个 ID，请参见下文）。理想情况下，我希望它只为每个 ID 返回一个。

```
SELECT     Production.WorksOrderOperations.WorksOrderNumber,
           MIN(Production.WorksOrderOperations.OperationNumber) AS Expr1, 
           Production.Resources.ResourceCode,
           Production.Resources.ResourceDescription,
           Production.WorksOrderExcel_ExcelExport_View.PartNumber,
           Production.WorksOrderOperations.PlannedQuantity,
           Production.WorksOrderOperations.PlannedSetTime, 
           Production.WorksOrderOperations.PlannedRunTime
FROM       Production.WorksOrderOperations
INNER JOIN Production.Resources
           ON Production.WorksOrderOperations.ResourceID = Production.Resources.ResourceID
INNER JOIN Production.WorksOrderExcel_ExcelExport_View
           ON Production.WorksOrderOperations.WorksOrderNumber = Production.WorksOrderExcel_ExcelExport_View.WorksOrderNumber
WHERE      Production.WorksOrderOperations.WorksOrderNumber IN
             ( SELECT   WorksOrderNumber
               FROM     Production.WorksOrderExcel_ExcelExport_View AS WorksOrderExcel_ExcelExport_View_1
               WHERE    (WorksOrderSuffixStatus = 'Proposed'))
           AND Production.Resources.ResourceCode IN ('1303', '1604')
GROUP BY   Production.WorksOrderOperations.WorksOrderNumber,
           Production.Resources.ResourceCode,
           Production.Resources.ResourceDescription,
           Production.WorksOrderExcel_ExcelExport_View.PartNumber,
           Production.WorksOrderOperations.PlannedQuantity,
           Production.WorksOrderOperations.PlannedSetTime,
           Production.WorksOrderOperations.PlannedRunTime 
```

如果您能理解它，我将从多个表中选择某些列，其中 WorksOrderNumber 也包含在子查询中，以及许多其他条件。

结果集看起来有点像这样，已经模糊了不相关的数据。

[http://i.stack.imgur.com/5UFIp.png](http://i.stack.imgur.com/5UFIp.png)（不会让我嵌入图像）。

突出显示的行不应该在那里，我不能明确地将它们过滤掉，因为这个结果集将每天更新，并且很可能发生在不同的记录中。

我尝试将 OperationNumber 转换并转换为许多其他数据类型，varchar 类型返回“100”而不是“30”。也试过搜索搜索引擎，似乎没有人有同样的问题。

我没有构造表格（它们被可怕地标准化），并且不可能重新构造它们。

任何想法表示赞赏，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:00:40.213

该`MIN`函数返回组内的最小值。如果您想要每个 ID 的最小值，您需要仅在 ID 上获取组。我假设您所说的“ID”指的是 Production.WorksOrderOperations.WorksOrderNumber。

您可以将其添加为 SQL 中的“表”：

```
(SELECT Production.WorksOrderOperations.WorksOrderNumber,
       MIN(Production.WorksOrderOperations.OperationNumber) 
  FROM Production.WorksOrderOperations
 GROUP BY  Production.WorksOrderOperations.WorksOrderNumber) 
```

# ios - 没有要编译的架构 (ARCHS=, VALID_ARCHS=armv7 armv7s)

> ID：13305650
> 
> 赞同：3
> 
> 时间：2012-11-09T09:50:36.357
> 
> 标签：ios, xcode

我正在使用 Xcode 4.5.2 并且有一个无法为运行 iOS 6.0.1 的 iPhone 编译的项目，尽管其他项目可以使用相同的设置进行编译，如下图所示。

关于如何解决这个问题的任何想法？

[![Xcode 中的架构](../Images/306b3fed68ab3013bd740b42543436fa.png)](https://i.stack.imgur.com/gNWQ3.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T10:17:01.167

您可能正在使用一些尚不支持 armv7s 架构的第三方库。您可以从您的设置中删除 armv7s。您的应用程序仍然能够在 iPhone 5 上运行，尽管它可能没有充分利用新架构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-13T10:02:47.387

如果在 XCODE 12 上，只需转到构建设置搜索 VALID_ARCHS。在 User-Defined 部分下，选择 Valid Architectures 并单击 Delete。

[![在此处输入图像描述](../Images/79acbeb683dccc4b39ecc972fe31e277.png)](https://i.stack.imgur.com/9JBOw.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-26T11:50:10.573

将 iOs 模拟器的有效架构设置为 armv7 和 armv7s。（模拟器为 32 位）。对于设置为 arm64 的设备（64 位全新 ios 设备）。

# android - Flex 移动应用程序无法在 android 2.2 上运行

> ID：13305652
> 
> 赞同：2
> 
> 时间：2012-11-09T09:50:39.093
> 
> 标签：android, apache-flex, mobile, air, flash-builder

我使用 FB 4.6、AIR 3.2 开发了一个 android 应用程序。我们想快速开发这个应用程序，并且能够支持广泛的设备，包括 android、ios、bb。所以我选择了FB。在我在 google play 中上传了该应用程序后，该应用程序说它适用于病房的 android 版本 2.2。但是，当使用 android 2.2 设备的用户尝试安装时，它说它不兼容。

我很困惑，很想知道这种行为背后的原因。非常感谢这方面的任何帮助/指示。谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T04:26:59.323

Adobe Air 3 只能在满足特定硬件要求的 Android 手机上运行：

*   ARMv7 处理器，带矢量 FPU，最低 550MHz，OpenGL ES 2.0、H.264 和 AAC 硬件解码器

*   256MB 内存

不符合这些规格的 Android 手机将无法与 Adob​​e Air 3 兼容，即使它在 Android 2.2 或更高版本上运行也是如此。

[Adobe 空气技术规格](http://www.adobe.com/products/air/tech-specs.html#mobile)

[Adobe社区讨论](http://forums.adobe.com/thread/885831)

# c# - 遍历一个节点的所有后代并一一检查它们

> ID：13305665
> 
> 赞同：0
> 
> 时间：2012-11-09T09:51:27.650
> 
> 标签：c#, linq, xpath, html-agility-pack

我需要列出特定网页中的记录。我在文本文件中获得了页面源。我需要逐个元素地遍历这个节点：

```
HtmlNodeCollection resultContainer = doc.DocumentNode.SelectNodes("//div[@class='result-list divider-y-5']"); 
```

对于每个元素，我需要检查类型（div、span 等），它是“id”和“class”属性，以便能够制作我的记录列表。我不想要所有 s 或 s 的集合。这无济于事，因为我不知道在循环遍历它们时将面临哪种类型的元素。我必须全部检查。因为我需要的所有数据都是上面提到的节点集合的子节点。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:18:10.867

```
foreach(HtmlNode node in resultContainer)
{
    //check node type
    switch(node.Name)
    {
        case "div":
        {
            break;
        }   
        case "p":
        {
        }
        ///....etc
    }

    //get id
    String id = node.Attributes["id"].Value;

    //get class
    String class = node.Attributes["class"].Value;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:20:40.493

我认为让 HtmlAgilityPack 将 html 文档转换为 xml 更容易，例如：

```
doc.Load(htmlStream, true);
doc.OptionOutputAsXml = true;
doc.OptionFixNestedTags = true;
doc.OptionAutoCloseOnEnd = true;
doc.Save(/* your Xml stream or filename */); 
```

然后使用常规的 .NET xml api（例如使用 XmlDocument 或 XDocument）来处理内容。

# javascript - How to pause the image sliding onmouseover the image in JQuery

> ID：13305667
> 
> 赞同：0
> 
> 时间：2012-11-09T09:51:29.523
> 
> 标签：javascript, jquery, html, css, onmouseover

To pause the image sliding `onmouseover` the image and also have to display the navigation buttons.

This is my code:

```
<script>

    $("#slideshow > div:gt(0)").hide();

    setInterval(function() {
      $('#slideshow > div:first')
        .fadeOut(1000)
        .next()
        .fadeIn(1000)
        .end()
        .appendTo('#slideshow');
    },   3000);

</script>

<style type="text/css">
    #slideshow {
    margin: 50px auto;
    position: relative;
    width: 240px;
    height: 240px;
    padding: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

#slideshow > div {
    position: absolute;
    top: 10px;
    left: 10px;
    right: 10px;
    bottom: 10px;
}
</style>
<div id="slideshow">
   <div>
  <a class="product_rowimage" id="den" href="javascript::void('0');" title="">
     <img src="http://farm6.static.flickr.com/5224/5658667829_2bb7d42a9c_m.jpg">
    </a>
   </div>
   <div>
    <a class="product_rowimage" id="den" href="javascript::void('0');" title="">
     <img src="http://farm6.static.flickr.com/5230/5638093881_a791e4f819_m.jpg">
     </a>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:01:08.263

编辑了你的脚本

```
 $("#slideshow > div:gt(0)").hide();
    var intervalID = null;
    function StartSlide() {
        intervalID = setInterval(function () {
            $('#slideshow > div:first')
        .fadeOut(200)
        .next()
        .fadeIn(200)
        .end()
        .appendTo('#slideshow');
        }, 500);
    }
    StartSlide();
    $("#slideshow").hover(function () {
        if (intervalID != null) {
            clearInterval(intervalID);
            intervalID = null;
        }
        // Add the showing of Nav Buttons here
        // Had no example of your nav buttons
    }, function () {
        if (intervalID == null) {
            StartSlide()
        }
    }) 
```

# c++ - 函数调用后输出不正确

> ID：13305672
> 
> 赞同：0
> 
> 时间：2012-11-09T09:51:41.467
> 
> 标签：c++, pointers, output, function-call

我希望结果是未定义的，但输出是“10”，为什么？

我想在函数被调用后内存被破坏了。

```
#include <iostream>
void f(int *p)
{
    int l = 20;
    int *k = &l;
    p = k;
}
int main()
{
    int i = 10;
    int *j = &i;
    f(j);
    std::cout << *j;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T09:54:26.987

结果不是未定义的。`j` **您通过value**传递指针，因此您在函数内修改它的副本。原件`j`保持不变，所以结果仍然是`10`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:54:44.100

该程序结构良好，因为在外部没有访问局部变量`l`，*因为*指针`f()`在`j`（`main()`指针的副本`j`被传递到`f()`）中没有改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T09:55:01.133

让我们分解你的代码。

您首先将 10 分配给`i`. 然后`j`指出 的地址`i`。

在 f 中，您将 的值`p`而**不是它指向的值**设置为`k`。作为 的参数传递`f()`，p 值被复制（地址值）。

因此，您永远不会修改 所指向的值，只是in`j`的局部值，这就是它保持等于 的原因。`j``f()``10`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T09:55:49.173

There is absolutely nothing wrong with the code. The parameter of `f` is not passed by reference, so `f` has no way to modify `j`, therefore `j` still points to `i` after `f` exits.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T09:55:02.083

您对按引用传递/按值传递感到困惑。当你传递一个指针时，指针本身是一个数字，你传递给`f()`指向一块内存的函数；修改 *p 变量`f()`（而不是`*p`指向的内存块）对`main()`函数没有影响。

A pointer is just a variable that holds an address of memory. In itself, it is passed by value; only the variable *to which the pointer points* is passed by reference.

# php - How to write system output to a file without >filename in command line in php

> ID：13305682
> 
> 赞同：0
> 
> 时间：2012-11-09T09:52:15.987
> 
> 标签：php, command-line

I want to write my `system` output to a file with out using `>filename` in command line. Using the same format of the output.

```
system("ping -n 4 $host",$result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:57:55.217

改用[exec](http://www.php.net/manual/en/function.exec.php)。[您可以指定要存储的输出的数组。然后您可以使用fopen](http://uk1.php.net/manual/en/function.fopen.php)等将该数组写入文件。

# .net - Failed on consuming a SSL Https 443 non IIS/.NET Webservice via a C# .NET client.

> ID：13305690
> 
> 赞同：2
> 
> 时间：2012-11-09T09:52:47.460
> 
> 标签：.net, wcf, web-services, ssl

If you ever thought you can consume a webservice running on a server that only runs HTTPS using .NET...give it up:

Is not possible, the proxy files created by the VS, spread all over the XML config files HTTP URIes, althought you added the reference using HTTPS prefix.

Programatically adding the server's certificate to the client, also fails.

Resulting all cases to "80 port calling to the server", instead of the expected 433 (ssl)

```
X509Certificate2 certConfiableServidor = new X509Certificate2(@"C:\WebSite1\certs\ServerERES_pre.cer");
 Client.ClientCredentials.ServiceCertificate.DefaultCertificate=certConfiableServidor; 
```

Client is a proxy class created by the UI using Add webservice reference. Calling method to the server It always ends up with exception message telling about "Timeout, port 80 unreachable."

If I can only make the proxy properly call the server methods using port 443 instead of unsecure 80...

# axapta - X++ reports not generating over batch

> ID：13305691
> 
> 赞同：0
> 
> 时间：2012-11-09T09:52:49.550
> 
> 标签：axapta, microsoft-dynamics, dynamics-ax-2012

When trying to generate X++ reports over batch, these fail to generate, and say that the report is empty.

I was told that in AX2012, it is impossible to create X++ reports over batch, is this true? If not, how can I make sure my reports will generate over batch?

# html - html/css 1 个选项中的 2 种颜色选择列表

> ID：13305698
> 
> 赞同：1
> 
> 时间：2012-11-09T09:52:53.220
> 
> 标签：html, css, colors, html-select

在我的 PHP 系统中，人们可以选择颜色组合。我正在使用这样的选项选择列表来执行此操作：

```
<style>
     OPTION.purple{ width: 100px; background-color: #1d5280; color:white}
     OPTION.green{ width: 100px; background-color: #30843b; color:white}
</style>
<select>
     <option>Choose color</option>
     <option class="purple">Purle/Blue</option>
     <option class="green">Brown/Green</option>
</select> 
```

现在每个选项都有 1 种颜色，是否可以给 1 个选项 2 种颜色。所以选项的前半部分有一种颜色，而后半部分的选项有另一种颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:03:53.407

您可以使用[**SCSS**](http://sass-lang.com/)做到这一点。这里的网站教你所有的东西。
--否则
，如果您对差异类使用不同的颜色意味着

```
 OPTION.purple{ width: 100px; background-color: #1d5280; color: white;}
 OPTION.green{ width: 100px; background-color: #30843b; color: red;} 
```

或者你使用相同的颜色手段

```
 OPTION.purple{ width: 100px; background-color: #1d5280;}
 OPTION.green{ width: 100px; background-color: #30843b;}
 option.green, option.purple {color: white;} 
```

或者

```
<style>
     OPTION.purple{ width: 100px; background-color: #1d5280; }
     OPTION.green{ width: 100px; background-color: #30843b;}
     option.add {color: white}
</style>
<select>
     <option>Choose color</option>
     <option class="purple add">Purle/Blue</option>
     <option class="green add">Brown/Green</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:19:54.353

使用没有图像的纯 CSS，我认为你做不到。我建议您使用图像。

**[现场演示](http://jsfiddle.net/QcB94/)**

我在这个演示中使用了线性渐变（*注意*：如果你`-webkit-linear-gradient`使用`-moz-linear-gradient`的是 FF，或者`-o-linear-gradient`如果你使用的是 Opera，则更改为）。它适用于`div`元素，但不能应用于选项背景（参见演示）。

# php - Table does not show row and column borders in email sent using PHP mail

> ID：13305699
> 
> 赞同：0
> 
> 时间：2012-11-09T09:52:58.453
> 
> 标签：php, css, html-table, border, html-email

I am using PHP to send mail of a webpage content. I have a table in the page. My table does not show row and column borders in email sent using PHP mail. It does not read the CSS in email. This is my code:

```
<div id="table_email" style="width:800px;margin-left:50px; text-align: left;">
    <table class="table1">
        <tr>
            <th>Description</th>
            <th colspan="2">Amount</th>
        </tr>
        <tr>
            <td>(A)Package Cost</td>
            <td>';$formatedMessag .= $inv[0].'</td>
        </tr>
        <tr>
            <td>(B) Insurance </td>
            <td>';$formatedMessag .= $inv[1].'</td>
        </tr>
        <tr>
            <td>(C)Flight / Train</td>
            <td>';$formatedMessag .= $inv[2].'</td>
        </tr>
        <tr>
            <td>Add : &emsp;Service Tax 3% on Rs.(a+b)</td>
            <td>';$formatedMessag .=$inv[5].'</td>
        </tr>
        <tr>
            <td>Add : &emsp;Educational Cess 2% On 3% </td>
            <td>';$formatedMessag .= $inv[6].'</td>
        </tr>
        <tr>
            <td>Add : &emsp;Secondary& Higher Education Cess 1% on 3% </td>
            <td>';$formatedMessag .= $inv[7].'</td>
        </tr>
        <tr style=" font-weight: bold;font-size: 12px;background-color:seashell;">
            <td>Total Payable Amount</td>
            <td>';$formatedMessag .='INR ' . $inv[9].'</td>
        </tr>
        ';$formatedMessag .='
    </table>
</div> 
```

This is my CSS:

```
.table1{
    width: 990px;
    margin-left: 5px;
    border: 1px solid #CDCDCD;
}
.table1 th{
    background: none repeat scroll 0 0 #EEEEEE;
    padding: 10px;
    font-size: 11px;
    color: #777777;
    border: 1px solid #CDCDCD;
}
.table1 tr{
    padding: 10px;
    font-size: 11px;
    height: 30px;
    border: 1px solid #CDCDCD;
}
.table1 tr td:first-child{
    font-weight: bold;
    text-align: left;
    border: 1px solid #CDCDCD;
}
.table1 td{
    padding-left: 3px;
    border: 1px solid #CDCDCD;
    color: #333333;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:33:56.780

这是因为当您发送邮件时，它无法访问样式类，而不是`<table class="table1">`使用内联 css，例如：

```
<table style='width: 990px; etc;'>. 
```

# arrays - PTX arrays as operands not working

> ID：13305702
> 
> 赞同：0
> 
> 时间：2012-11-09T09:53:07.540
> 
> 标签：arrays, cuda, ptx

The PTX manual (version 2.3) ([http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/ptx_isa_2.3.pdf](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/ptx_isa_2.3.pdf)) 6.4.2 states:

> Array elements can be accessed using an explicitly calculated byte address, or by indexing into the array using square-bracket notation. The expression within square brackets is either a constant integer, a register variable, or a simple “register with constant offset” expression, where the offset is a constant expression that is either added or subtracted from a register variable. If more complicated indexing is desired, it must be written as an address calculation prior to use.

```
 ld.global.u32  s, a[0]; 
 ld.global.u32  s, a[N-1]; 
 mov.u32  s, a[1];  // move address of a[1] into s 
```

When I try this I can only get the version pointer plus byte offset to work, i.e. `[a+0]`.

This code fails to load:

```
.reg    .f32 f<1>;
.global .f32 a[10];
ld.global.f32 f0,a[0]; 
```

Whereas this loads fine:

```
.reg    .f32 f<1>;
.global .f32 a[10];
ld.global.f32 f0,[a+0]; 
```

The problem with the byte offset version is that it really is a byte offset. So, one has to take the underlying size of the type into account, i.e. the second element is `[a+4]`. Whereas `a[1]` is supposed to work this out for you.

Ideas what's going wrong?

**EDIT**

And there is an even more severe issue here involved: The above text states that a register variable can be used to index the array, like:

```
ld.global.f32 f0,a[u0]; 
```

where `u0` is probably a `.reg.u32` or some other compatible integer.

However, with the pointer plus byte offset method this is not possible. It is illegal to do something like:

```
mul.u32 u1,u0,4;
ld.global.f32 f0,[a+u1]; // here a reg variable is not allowed. 
```

Now this is a severe limitation. however, one can do another address calculation prior to the load statement. But this complicates things.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:06:59.067

This does not seem to fit with the PTX documentation you quoted, but you can add in a multiplier corresponding with the size of the items in your array. For instance, to get the 10th 32-bit word:

```
ld.const.u32 my_u32, [my_ptr + 10 * 4]; 
```

# amazon-mws - 使用免费帐户开发亚马逊 MWS 应用程序？

> ID：13305704
> 
> 赞同：3
> 
> 时间：2012-11-09T09:53:14.943
> 
> 标签：amazon-mws

我要为客户开发 MWS 应用程序，问题是我需要的帐户似乎已付款。

我只需要创建卖家账户和我的客户来为我添加权限。但是，到目前为止，我找不到使用免费帐户的方法。MWS 登录显示我的帐户是个人帐户，无法使用，我需要升级。

我发现这真的很愚蠢，我希望我错过了一些东西。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:39:21.353

似乎没有办法拥有免费帐户和 MWS 登录。但是，亚马逊支持向我们解释了客户如何获取他自己的密钥/秘密，我可以将其用于他们的 MWS API。

我想在这里提出的另一个提示是 Products API 不是用于获取您的个人产品，它仅用于搜索整个站点。然后 Reports API 可以完成这项工作。祝你好运。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:49:09.057

联系亚马逊卖家中心支持并申请沙盒 MWS 账户。该请求需要 24-48 小时才能完成，但它是免费的，并且可以让您访问所有未封闭的 Amazon BrowseNode 的发布产品。

[卖家支持页面](https://sellercentral.amazon.com/gp/mws/contactus.html)

您需要注册一个可以访问卖家中心支持的账户。（我注册了亚马逊支付）。

创建沙盒帐户后。您可以将我们的密钥提供给您的客户，以允许您的应用程序访问他们的帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:22:51.240

您可以联系亚马逊支持团队，他们会为您提供一个暂存账户，您可以通过该账户使用 MWS 服务在未绑定的类别中发布产品。您在开发应用程序时无需注册卖家账户。

# windows-8 - Windows 8 中的 Metro 控制台应用程序

> ID：13305705
> 
> 赞同：0
> 
> 时间：2012-11-09T09:53:21.140
> 
> 标签：windows-8, microsoft-metro, console-application

有没有办法构建在控制台中运行的 Metro 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:04:05.837

“Metro*”界面中没有控制台。桌面上仍然有一个命令提示符，与 Windows 7 相比没有改变。但是，这不会允许您运行“Metro*”应用程序 - 它是一个命令提示符。

我认为您可能需要对“Metro*”UI 是什么以及不是什么进行一些研究。

* 此 UI 不再称为“Metro”，但为了避免混淆问题，我已将其称为“Metro”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T22:27:13.767

如果需要，您可以在 Windows 8 中使用控制台，您的控制台应用程序将继续工作。但这不是地铁。

# android - Android drawing objects on screen and obtaining geometry data

> ID：13305706
> 
> 赞同：1
> 
> 时间：2012-11-09T09:53:21.700
> 
> 标签：android, geometry, draw, calculator

Has anybody experience on drawing objects, by vertices e.g. Polygons and obtaining their surface and perimeter.

The geometry will be drawn by hand using vertices or coordinates similar to [https://play.google.com/store/apps/details?id=de.hms.xconstruction](https://play.google.com/store/apps/details?id=de.hms.xconstruction) and then shapes formed. I need to obtain the surface of these closed shapes.

Is there any available example on the net?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:23:11.963

我认为以下代码可能是一个好的开始。它基本上在所有用户触摸之间画线：

```
public class TestActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new DrawingView(this));
}

class DrawingView extends SurfaceView {

    private final SurfaceHolder surfaceHolder;
    private final Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

    private List<Point> pointsList = new ArrayList<Point>();

    public DrawingView(Context context) {
        super(context);
        surfaceHolder = getHolder();
        paint.setColor(Color.WHITE);
        paint.setStyle(Style.FILL);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            if (surfaceHolder.getSurface().isValid()) {

                // Add current touch position to the list of points
                pointsList.add(new Point((int)event.getX(), (int)event.getY()));

                // Get canvas from surface
                Canvas canvas = surfaceHolder.lockCanvas();

                // Clear screen
                canvas.drawColor(Color.BLACK);

                // Iterate on the list
                for(int i=0; i<pointsList.size(); i++) {
                    Point current = pointsList.get(i);

                    // Draw points
                    canvas.drawCircle(current.x, current.y, 10, paint);

                    // Draw line with next point (if it exists)
                    if(i + 1 < pointsList.size()) {
                        Point next = pointsList.get(i+1);
                        canvas.drawLine(current.x, current.y, next.x, next.y, paint);
                    }
                }

                // Release canvas
                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }
        return false;
    }

} 
```

# javascript - 如何在模态窗口中显示 pdf？

> ID：13305707
> 
> 赞同：19
> 
> 时间：2012-11-09T09:53:28.677
> 
> 标签：javascript, jquery, pdf, modal-window

我有一个模式窗口，其中包含一个锚文本。当我单击此链接时，它必须调用位于其他地方的 pdf 并将其显示在弹出窗口中。我怎样才能做到这一点 ？

请帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-09T10:23:31.030

您可以使用 jQuery UI 对话框执行此操作，您可以从此处下载 JQuery ui[下载 JQueryUI](http://jqueryui.com/download/)

`<head>`首先在标签内包含这些脚本

```
<link href="css/smoothness/jquery-ui-1.9.0.custom.css" rel="stylesheet">
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script src="js/jquery-ui-1.9.0.custom.js"></script> 
```

jQuery代码

```
<script language="javascript" type="text/javascript">
  $(document).ready(function() {
    $('#trigger').click(function(){
      $("#dialog").dialog();
    }); 
  });                  
</script> 
```

标签内的 HTML 代码`<body>`。使用 iframe 在里面加载 pdf 文件

```
<a href="#" id="trigger">this link</a>
<div id="dialog" style="display:none">
    <div>
    <iframe src="yourpdffile.pdf"></iframe>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T10:33:37.937

你可以看看这个库：[https](https://github.com/mozilla/pdf.js) ://github.com/mozilla/pdf.js它在 Web/HTML 页面中呈现 PDF 文档

您也可以使用 Flash 将文档嵌入到任何 HTML 页面中，如下所示：

```
<object data="your_file.pdf#view=Fit" type="application/pdf" width="100%" height="850">
    <p>
        It appears your Web browser is not configured to display PDF files. No worries, just <a href="your_file.pdf">click here to download the PDF file.</a>
    </p>
</object> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T10:01:45.677

您可以在模态标记内有一个 iframe，并将其 src 属性作为指向您的 pdf 的链接。单击链接后，您可以显示此模式标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:34:55.487

您可以在模态表单中使用 iframe，因此当您打开 iframe 窗口时，它会在您的模态表单中打开。我希望你用一些 url 渲染到一些 pdf 打开器，如果你有 pdf 内容，只需以模态形式将内容添加到 div 中。

# django - 不刷新的Django表单类

> ID：13305708
> 
> 赞同：2
> 
> 时间：2012-11-09T09:53:30.817
> 
> 标签：django, forms, class, refresh

我注意到我的一个 Django 应用程序中有一个奇怪的行为，它使用 apache/mod_wsgi 运行。有一个屏幕显示一个表格，基本上是一个下拉列表，其中包含安排给定站点的可用性列表，根据给定的每周容量（3 个站点/周）与已安排在给定站点的总数之间的差异计算星期。

此表单 (ScheduleForm) 是从以下视图 (followup/views.py) 呈现的：

```
def schedule(request, site_id):
    site = Site.objects.get(pk=site_id)
    if request.method == 'POST':
        form = ScheduleForm(request.POST)
        if form.is_valid():
            (year, week) = request.POST['available_slots'].split('/')
            site.scheduled = week2date(int(year), int(week[1:]))
            site.save()
            return HttpResponseRedirect('/stats/')
    else:
        form = ScheduleForm()

    return render_to_response('followup/schedule_form.html',{
            'form': form,
            'site': site
        }, context_instance=RequestContext(request)) 
```

这是表单类（followup/forms.py）：

```
class ScheduleForm(forms.Form):
    """
    Temporary lists
    """
    schedules = Site.objects.filter(
            scheduled__isnull=False
        ).values('scheduled').annotate(Count('id')).order_by('scheduled')
    integration = {}
    available_integration = []

    # This aggregates all schedules by distinct weeks
    for schedule in schedules:
        if schedule['scheduled'].strftime('%Y/W%W') in integration.keys():
            integration[schedule['scheduled'].strftime('%Y/W%W')] += schedule['id__count']
        else:
            integration[schedule['scheduled'].strftime('%Y/W%W')] = schedule['id__count']

    for w in range(12): # Calculates availability for the next 3 months (3months*4 weeks)
        dt = (date.today() + timedelta(weeks=w)).strftime('%Y/W%W')
        if dt in integration.keys():
            capacity = 3-integration[dt]
        else:
            capacity = 3

        if capacity>0:
            available_integration.append([dt, capacity])

    """
    Form
    """
    available_slots = forms.ChoiceField(
        [[slot[0], '%s (%s slots available)' % (slot[0], slot[1])] for slot in available_integration]
    )

class IntegrateForm(forms.Form):
    integrated_on = forms.DateField(widget=AdminDateWidget()) 
```

这实际上工作正常，但唯一的问题是在安排站点时不会刷新可用性列表，除非我每次安排站点时都重新启动 apache 进程。

就像可用性列表将被表单类*缓存一样......*

任何想法都会受到热烈欢迎。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:56:43.607

这与 python 的工作方式有关，而不是 django。

下面这段代码

```
class ScheduleForm(forms.Form):
    """
    Temporary lists
    """
    schedules = Site.objects.filter(
            scheduled__isnull=False
        ).values('scheduled').annotate(Count('id')).order_by('scheduled')
    integration = {}
    available_integration = [] 
```

将只评估一次 - 当服务器启动时。

`class`你不应该在水平上做这些事情，而应该在`instance`水平上。很可能在`__init__`表单的方法中。

请参阅以下示例：

*   [Django - 以 __init__ 形式更改 min_length？](https://stackoverflow.com/questions/8818261/django-change-min-length-in-form-init)

*   [django 模型形式，根据 ForeignKey 模型中的值限制选择](https://stackoverflow.com/questions/13075619/django-model-form-restrict-choices-based-on-value-in-foreignkey-model)

*   [Django“动态”验证表（更新）](https://stackoverflow.com/questions/12281803/django-dynamic-verification-form-updated)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:51:49.293

我已经修改了我的代码，现在它就像一个魅力:) 我在这里提供它，以防它帮助任何有类似问题的人。

```
class ScheduleForm(forms.Form):
    available_slots = forms.ChoiceField()

    def __init__(self, *args, **kwargs):
        super(ScheduleForm, self).__init__(*args, **kwargs)

        schedules = Site.objects.filter(
                scheduled__isnull=False
            ).values('scheduled').annotate(Count('id')).order_by('scheduled')
        integration = {}
        available_integration = []

        # This aggregates all schedules by distinct weeks
        for schedule in schedules:
            if schedule['scheduled'].strftime('%Y/W%W') in integration.keys():
                integration[schedule['scheduled'].strftime('%Y/W%W')] += schedule['id__count']
            else:
                integration[schedule['scheduled'].strftime('%Y/W%W')] = schedule['id__count']

        for w in range(12): # Calculates availability for the next 3 months (3months*4 weeks)
            dt = (date.today() + timedelta(weeks=w)).strftime('%Y/W%W')
            if dt in integration.keys():
                capacity = 3-integration[dt]
            else:
                capacity = 3

            if capacity>0:
                available_integration.append([dt, capacity])

        self.fields['available_slots'].choices = [[slot[0], '%s (%s slots available)' % (slot[0], slot[1])] for slot in available_integration] 
```

# android - 如何更改已编译的 ipa 文件图标和应用程序名称

> ID：13305709
> 
> 赞同：1
> 
> 时间：2012-11-09T09:53:29.610
> 
> 标签：android, ios, cordova, icons

我们可以使用 apk 文件管理器为 android 执行此操作，或者只是将其重命名为 zip 文件并更改 zip 文件。

但是如何为IOS文件做呢？我听说苹果商店允许我们更改它，但我们同样也针对临时性。怎么做...？

实际上，我们已经为许多客户创建了 100 个 iOS ipa 和 android apk 文件，我们希望他们自己更改应用程序的图标和名称。每个 apk 和 ipa 都分配有一个 ID，该 ID 在安装时从 Internet 检索数据并相应地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:57:30.563

你不能用iOS。

您必须再次更改项目中的名称和图标，并且必须创建新的 IPA 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:39:44.437

[根据 iTunes Connect 的 Apple 文档，](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html#//apple_ref/doc/uid/TP40011225-CH14-SW1)我们只能更改应用程序的**大图标**，即 ratina 图标，大小为 1024*1024 像素。我想我们在提交到 iTunes 商店时**不能更改应用程序和图标的名称**

# javascript - Calling a method on a object

> ID：13305712
> 
> 赞同：1
> 
> 时间：2012-11-09T09:53:41.123
> 
> 标签：javascript

I would like to log the result of calling a method on a object.

The current script log the result of the function in the property `token` literally I mean the result is the defined function.

What am I doing wrong here? Many thanks!

```
 $(document).ready(function () {

        // General Settings
        var 
        ApiSettings = {
            clientId: 'aaa',
            clientSecret: 'bbb',
            token: function () {
                var token;
                $.getJSON(ApiSettings.uriGetToken, processData);
                function processData(data) {
                    token = data.access_token;
                }
                return token;
            }
        }
        ApiSettings.uriGetToken = 'https://ccc.com/oauth/token?grant_type=client_credentials&client_id=' + encodeURIComponent(ApiSettings.clientId) + '&client_secret=' + encodeURIComponent(ApiSettings.clientSecret);

        console.log(ApiSettings);
        console.log(ApiSettings.uriGetToken);
        var test = ApiSettings.token;

        console.log(test);

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:55:18.807

我认为你有两个问题。

**1）使用前**需要定义processData函数。

```
// $.getJSON(ApiSettings.uriGetToken, processData);
// function processData(data) {
//     token = data.access_token;
// }
// Becomes:
function processData(data) {
    token = data.access_token;
}
$.getJSON(ApiSettings.uriGetToken, processData); 
```

2）您需要**调用**令牌方法。

```
// var test = ApiSettings.token;
// Becomes:
var test = ApiSettings.token(); // Note the new brackets. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:56:57.937

尝试更换

```
 token: function () {
            var token;
            $.getJSON(ApiSettings.uriGetToken, processData);
            function processData(data) {
                token = data.access_token;
            }
            return token;
        } 
```

和

```
 token: (function () {
            var token;
            $.getJSON(ApiSettings.uriGetToken, processData);
            function processData(data) {
                token = data.access_token;
            }
            return token;
        })() 
```

那应该内联执行你的函数。

或者，您可以将 URI 作为参数传递给令牌函数，

```
 token: function (tokenURI) {
            var token;
            $.getJSON(tokenURI, processData);
            function processData(data) {
                token = data.access_token;
            }
            return token;
        } 
```

然后打电话

```
 ApiSettings.token('https://ccc.com/oauth/token?.......'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:05:06.210

从准备好的部分中取出您的代码，它将起作用。我在我的 chrome 浏览器的控制台中对其进行了测试，它可以工作。可能是范围的一些问题。

# android - 从phonegap android应用程序调用本地.asmx webservice来获取数据？

> ID：13305715
> 
> 赞同：1
> 
> 时间：2012-11-09T09:53:53.197
> 
> 标签：android, web-services, cordova

我正在创建一个 phonegap 测试应用程序，为此我希望通过 web 服务（.asmx）从数据库中获取数据。我只是对这项技术较新。我花了 2 天的时间来接听这个电话，这可能是 bt 不能的。

```
    功能测试（）
    {
    jQuery.support.cors = true;
         $.mobile.allowCrossDomainPages = true;
          $.ajax({
          数据： ”{}”，
             类型：“获取”，
            数据类型：“json”，
             contentType: "应用程序/json; charset=utf-8",

             url: "http://localhost:xxxxx/yyyy/testservice.asmx?op=testfunction",
             成功：功能（味精）{
                $('#divToBeWorkedOn').html(msg.text);
             },
             错误：函数（e）{
                 $('#divToBeWorkedOn').html("不可用");
             }
         });
    }

```

它的本地服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:30:26.820

我将替换`http://localhost:xxxxx/`为服务器的实际内部 IP 地址（可能类似于`http://192.168.x.x:xxxxx/`） - 只需确保您的服务器和移动设备通过 wi-fi 而不是 gsm 网络连接到同一网络。还要确保您更新了域白名单。更多信息如何做到这一点可以在这里找到[http://docs.phonegap.com/en/2.2.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.2.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

希望这会有所帮助，祝你好运！

# java - 在类和方法之间传递字符串

> ID：13305716
> 
> 赞同：0
> 
> 时间：2012-11-09T09:53:59.390
> 
> 标签：java

我一直在尝试将字符串从一个类中的方法传递给另一个类中的方法，但似乎无法做到。

我一直在尝试一些事情，比如

```
String location = Latitude + "," + Longitude;
AccelOrientExample GPSstring = new AccelOrientExample();
GPSstring.onSensorChanged(location); 
```

其中 location 是我要传递给类 AccelOrientExample 的字符串，其中我有一个方法与位置争论。

请帮忙，谢谢

无法实例化类型 AccelOrientExample 是我得到的第一个错误，它是新的。并且 SensorEventListener 类型中的 onSensorChanged(SensorEvent) 方法不适用于第二行的参数（字符串）。

```
public void onSensorChanged(SensorEvent sensorEvent, String location) 
```

是AccelOrientExample中的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:12:40.603

> 无法实例化类型 AccelOrientExample 是我得到的第一个错误，它是新的。

我认为您的**AccelOrientExample**是一个抽象类。你不能用 new 操作符实例化你的 Abstract 类。你将不得不让你的子类（具体类）来初始化它。

就像让我们假设 AccelOrientedExampleImpl 是 AccelOrientedExample 类的子类。

然后 ，

```
 AccelOrientExample GPSstring  = new AccelOrientedExampleImpl(); 
```

> SensorEventListener 类型中的 onSensorChanged(SensorEvent) 方法不适用于第二行的参数（字符串）。

您的方法签名有两个参数，SensorEvent 实例和一个字符串。

```
public void onSensorChanged(SensorEvent sensorEvent, String location) 
```

您正在尝试仅传递 String 实例。您必须同时传递两者，因为您的方法需要两个参数。做类似下面的事情，我假设**SensorEvent**是一个具体的类。

```
String location = Latitude + "," + Longitude;
AccelOrientExample GPSstring = new AccelOrientExample();
GPSstring.onSensorChanged(new SensorEvent(), location); 
```

# linux - Bash 脚本 - 遍历关联数组列表的“变量”变量名

> ID：13305717
> 
> 赞同：6
> 
> 时间：2012-11-09T09:54:00.293
> 
> 标签：linux, bash, unix, associative-array

我有一个关联数组的变量列表，我想遍历并检索它们的键/值对。

我通过列出其所有键并获取值来遍历单个关联数组，即。

```
for key in "${!queue1[@]}" do
    echo "key : $key"
    echo "value : ${queue1[$key]}"
done 
```

棘手的部分是关联数组的名称是可变变量，例如给定count = 5，关联数组将命名为queue1、queue2、queue3、queue4、queue5。

我正在尝试根据计数替换上面的序列，但到目前为止，括号和 eval 的每个组合都没有产生比错误替换错误更多的结果。例如下面：

```
for count in {1,2,3,4,5} do
    for key in "${!queue${count}[@]}" do
        echo "key : $key"
        echo "value : ${queue${count}[$key]}"
    done
done 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:59:03.547

这里的困难源于间接扩展的语法 ( `${!nameref}`) 与从关联数组中提取键的语法 () 冲突`${!array[@]}`。我们只能有一个或另一个，而不是两者兼而有之。

谨慎使用`eval`，我看不到使用它来提取间接引用的关联数组的键的方法：

```
keyref="queue${count}[@]"
for key in $(eval echo '${!'$keyref'}'); do ... ; done 
```

`eval`但是，当从给定键的数组中提取值时，您可以避免并使用间接扩展。请注意，`[key]`后缀必须是扩展的一部分：

```
valref="queue${count}[$key]"
echo ${!valref} 
```

把它放在上下文中：

```
for count in {1..5} ; do
    keyref="queue${count}[@]"
    for key in $(eval echo '${!'$keyref'}'); do
        valref="queue${count}[$key]"
        echo "key = $key"
        echo "value = ${!valref}"
    done
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:10:57.673

我能够使用以下脚本使其工作：

```
for count in {1..5} ; do
    for key in $(eval echo '${!q'$count'[@]}') ; do
        eval echo '${q'$count"[$key]}"
    done
done 
```

请注意，如果任何键包含空格，它会中断。如果要处理复杂的数据结构，请使用更强大的语言，例如 Perl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:42:20.327

我认为这可能有效（但未经测试）。关键是将索引视为变量的全名。（也就是说，该数组`queue5`可以被视为一个名为`queue5[this]`、`queue5[that]`等的变量序列。）

```
for count in {1,2,3,4,5} do
    assoc="queue$count[@]"
    for key in "${!assoc}" do
        echo "key : $key"
        val="queue$count[$key]"
        echo "value : ${!val}"
    done
done 
```

# ejabberd - Ejabberd 不向其他名册成员发送存在节

> ID：13305720
> 
> 赞同：2
> 
> 时间：2012-11-09T09:54:09.917
> 
> 标签：ejabberd

我有一个在 python/django 中实现并使用 ejabberd 2.1.3 和 Strophe.js 的内部网络聊天应用程序。当您使用特殊访问链接打开网站时，会执行命令行调用以将您添加到共享名册组：

```
ejabberdctl srg_user_add 00024-540-1mCYpYTTCRcjJK5OWI7cWs xmpp.mydomain.com
1mCYpYTTCRcjJK5OWI7cWs xmpp.mydomain.com 
```

执行成功，如果我手动执行此 cmd，则成员显示正常：

```
ejabberdctl srg_get_members 1mCYpYTTCRcjJK5OWI7cWs xmpp.mydomain.com
00024-540-1mcypyttcrcjjk5owi7cws@xmpp.mydomain.com
01114-540-1mcypyttcrcjjk5owi7cws@xmpp.mydomain.com 
```

但是，在 Strophe.js 存在处理程序中，我只收到我自己的存在节，这意味着如果我在两个不同的浏览器中为两个不同的成员打开两个不同的链接，我不会收到另一个成员的存在节。如果将 ejabberd 日志级别设置为调试，则会在此处反映。

```
<presence xmlns='jabber:client' from='0031-666-vjuuogji8mxvo5edtsvre@xmpp.mydomain.com/3189433061352390311794558' to='0031-666-vjuuogji8mxvo5edtsvre@xmpp.mydomain.com/3189433061352390311794558'/> 

<presence xmlns=' jabber:client' from='0030-666-vjuuogji8mxvo5edtsvre@xmpp.mydomain.com/3319710041135238652858307' to='0030-666-vjuuogji8mxvo5edtsvre@xmpp.mydomain.com/331971004113570'/>'/>
```

它缺少其他成员的节：

```
<presence xmlns='jabber:client' from='0031-666-vjuuogji8mxvo5edtsvre@xmpp.mydomain.com/3189433061352390311794558' to='0030-666-vjuuogji8mxvo5edtsvre@xmpp.mydomain.com/3319387285811752'/>

```

我在第二台服务器上进行了相同的设置，它可以正常工作，并且我看到的节完全符合预期。之前，它也可以在问题服务器上运行，但上周我们的数据中心完全断电，服务器宕机了。从那以后，我似乎无法让它再次工作。是不是有些文件可能因为断电而损坏了？有什么我应该清理的吗？不幸的是，以前的负责人已经不在我们公司了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:48:18.600

我发现了问题 - 由于一些愚蠢的内部原因，

`ejabberdctl srg_create ...`

失踪，所以成员被添加到一个不存在的组。我只是不明白为什么 srg_user_add 和 srg_get_members 命令可以正常工作。如果他们给出了一些关于该组不存在的提示，我会更快发现问题

# java - 按“层”还是按“类型”来构建 Java 包？

> ID：13305725
> 
> 赞同：0
> 
> 时间：2012-11-09T09:54:18.763
> 
> 标签：java

考虑以下示例。

有一个具有三层的服务器应用程序。向客户端公开的**服务**层、用于持久性的**数据库层和计算某些东西的****业务**层。

该应用程序提供三种不同类型的数据。**用户**、**付款**和**工作时间**。

*我应该如何打包我的应用程序？**逐层* 打包：

```
foo.bar.service
  UserService.class
  PaymentsService.class
  WorktimeService.class
foo.bar.persistence
  UserPersistenceService.class
  PaymentPersistenceService.class
  WorktimePersistenceService.class
foo.bar.business
  PaymentCalculator.class 
```

*或按类型*打包：

```
foo.bar.user
  UserService.class
  UserPersistenceService.class
foo.bar.payment
  PaymentService.class
  PaymentsPersistenceService.class
  PaymentCalculator.class
foo.bar.worktime
  WorktimeService.class
  WorktimePersistenceService.class 
```

我想如果应用程序增长并且实现越来越多的逻辑，第一个示例可能会变得混乱。但是，当任务是“扩展持久服务层以做一些花哨的事情”时，似乎更容易找到合适的位置。第二个示例可以更容易地扩展，而无需用数百万个类淹没包。

是否有任何最佳实践可供选择？或者你们对包结构有任何其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:00:59.667

什么对您的应用程序更重要？

您是否将层/类型部署到不同的机器（或者将来可能想要这样做）？

不同的人在不同的层/类型上工作吗？

如果是这样，请使用层/类型来分隔包。

如果您的应用程序稍微大一点，您可能希望同时使用两者，从而生成类似的包

```
foo.bar.<layer>.<type> 
```

或者

```
foo.bar.<type>.<layer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:02:43.967

就我而言，我会按*层*和*类型*打包：

*   foo.bar.service.user.UserService
*   foo.bar.persistence.user.UserPersistence
*   等等

对于我的大多数项目，我使用 maven 和一些多模块：

1.  领域模型（模型对象）
2.  持久性
3.  服务
4.  应用

通过这种方式，您可以获得不同的 jars（或者如果您只有一个简单的项目，则不会），并且更容易检索扩展/修改现有源的好地方。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T13:21:39.690

通常有一个模型包，您可以在其中放置类型（在您的示例中为用户、付款和工作时间）。

在模型包旁边有层包，如表示和服务（我通常在服务包中嵌套数据访问层，以鼓励这些层仅在服务实现中使用，但这取决于您）。

如果项目有点大，我将服务层拆分为一个单独的模块。如果它仍然更大（或者域模型又大又复杂），我也会将模型包移动到一个单独的模块中，从而产生一个三模块项目：模型、服务和演示。

如果还有多个演示通道（例如 Web 应用程序、REST 服务和 dekstop 客户端应用程序），这些也可以拆分为单独的模块。

# cloudbees - 您的 DEV@Cloud 磁盘使用总量超过了您订阅的配额

> ID：13305728
> 
> 赞同：0
> 
> 时间：2012-11-09T09:54:25.250
> 
> 标签：cloudbees

我有一份詹金斯的工作。

我的第一个配置存储了最后 60 个构建。

在 32 次构建后，我收到以下消息：

由于以下原因，构建执行被暂停：

您的总 DEV@Cloud 磁盘使用量超过了您订阅的配额。您的免费订阅允许 2 GB，但您在所有服务（Forge 和 Jenkins）中使用 2052 MB。要解决此问题，您可以升级订阅或删除 Forge 存储库、Jenkins 工作区或构建工件中的一些数据。好的，构建工件太大了。现在我将 jenkins 作业配置为存储 60 个构建和仅 3 个人工制品。

我在哪里可以找到（旧的）构建工件？我在哪里可以删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:40:39.630

您可以通过删除构建来手动删除构建工件。这可以通过从构建历史记录中选择一个构建然后使用“删除此构建”链接将其删除来实现。这很麻烦，因此更好的解决方案是去构建配置并执行以下操作：选中“丢弃旧构建”复选框，单击“高级”按钮，为“保留工件的天数”或“设置一个合适的值”与工件保持一致的最大构建数”。

您还可以安装磁盘使用插件，它为您提供有关您的作业占用多少空间的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T17:45:08.983

这是[一篇关于在 DEV@cloud 上管理磁盘使用的 wiki 文章](http://developer.cloudbees.com/bin/view/DEV/DiskUsage)。

# haskell - GHC - (Monad Ptr) 没有实例

> ID：13305732
> 
> 赞同：1
> 
> 时间：2012-11-09T09:54:29.513
> 
> 标签：haskell

我是haskell 的新手，我正在尝试编写我的第一个haskell C 库。这是我第一次使用 Foreign.C 模块。我在示例中迷失了方向并且陷入了困境。到目前为止，这是我想出的：

```
{-# LANGUAGE ForeignFunctionInterface #-}

module Grep where

import GHC.Ptr
import Foreign.C.String
import Data.List (isInfixOf)

grep :: CString -> CString -> CString
grep i s = do
    ii <- peekCString i
    ss <- peekCString s
    g <- newCString (isInfixOf ii ss)
    g 

foreign export ccall grep :: CString -> CString -> CString 
```

我收到以下错误：

```
PS C:\Users\GGuy\Source\haskell> ghc -c -O grep.hs

grep.hs:11:9:
  No instance for (Monad Ptr)
    arising from a do statement
  Possible fix: add an instance declaration for (Monad Ptr)
  In a stmt of a 'do' block: ii <- (peekCString i)
  In the expression:
    do { ii <- (peekCString i);
      ss <- peekCString s;
      g <- newCString (isInfixOf ii ss);
      g }
  In an equation for `grep':
    grep i s
      = do { ii <- (peekCString i);
             ss <- peekCString s;
             g <- newCString (isInfixOf ii ss);
             .... }

grep.hs:11:16:
  Couldn't match expected type `Ptr t0' with actual type `IO String'
  In the return type of a call of `peekCString'
  In a stmt of a 'do' block: ii <- (peekCString i)
  In the expression:
    do { ii <- (peekCString i);
       ss <- peekCString s;
       g <- newCString (isInfixOf ii ss);
       g } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T13:55:20.950

现在修复

```
grep :: CString -> CString -> IO Bool
grep i s = do
    ii <- peekCString i
    ss <- peekCString s
    return (isInfixOf ii ss)

foreign export ccall grep :: CString -> CString -> IO Bool 
```

澄清了，让我们找出错误消息是如何产生的：

```
grep :: CString -> CString -> CString
grep i s = do
    ii <- peekCString i
    ss <- peekCString s
    g <- newCString (isInfixOf ii ss)
    g 
```

声明的结果类型`grep`是`CString`，它是 的类型同义词`Ptr CChar`。定义的右侧是一个 do-block（包含多个语句），因此结果类型必须具有`m a`some`Monad m`和 some type的形式`a`。

声明的结果类型与`Ptr CChar`表单匹配，因此剩下的就是查找/验证类型构造函数的实例。范围内没有，因此`m a``m = Ptr, a = CChar``Monad``Ptr`

```
grep.hs:11:9:
  No instance for (Monad Ptr)              -- quite
    arising from a do statement            -- right
  Possible fix: add an instance declaration for (Monad Ptr)    -- Umm, no, not really 
```

第一个报告的错误。

第二个错误来自分析 do-block 的内容。编译器本可以在遇到第一个错误时停止类型检查，但没有。现在进一步的类型检查在假设`Ptr`是 a的情况下继续进行`Monad`。所以在那个 do 块中， a 右边的每个表达式`<-`（在脱糖后成为 a 的第一个参数`(>>=) :: Monad m => m a -> (a -> mb) -> m b`）必须具有 type `Ptr sometype`。但是`peekCString :: CString -> IO String`，因此

```
grep.hs:11:16:
  Couldn't match expected type `Ptr t0' with actual type `IO String'
  In the return type of a call of `peekCString'
  In a stmt of a 'do' block: ii <- (peekCString i)
  In the expression:
    do { ii <- (peekCString i);
       ss <- peekCString s;
       g <- newCString (isInfixOf ii ss);
       g } 
```

如果编译器继续，它会在第二`peekCString`行给出相同的类型错误，最后是

```
Couldn't match type `Bool' with `[Char]'
Expected type: String
  Actual type: Bool
In the first argument of `newCString', namely ... 
```

对于`newCString`（加上另一个`IO`-`Ptr`不匹配）的错误类型的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:15:57.417

在执行 IO 操作时，您必须使用 monadic 函数：

```
grep :: CString -> CString -> IO CString
grep i s = do
    ii <- peekCString i
    ss <- peekCString s
    newCString (isInfixOf ii ss) 
```

还要调整您的出口条款：

```
foreign export ccall grep :: CString -> CString -> IO CString 
```

# c++ - OpenSceneGraph 第一人称步行相机

> ID：13305737
> 
> 赞同：1
> 
> 时间：2012-11-09T09:54:36.317
> 
> 标签：c++, openscenegraph

我是 OpenSceneGraph 的新手，希望能帮助我找出哪些现有的 CameraManipulator 类，甚至任何其他类，我需要将其用于步行/跑步/慢跑模拟。到目前为止，我已经检查了大约 10 个机械手，但它们似乎都没有做我需要的，即轻松模拟步行/慢跑/跑步。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:40:45.833

FirstPersonManipulator（以前的 DoomLikeManipulator）怎么样 [https://github.com/openscenegraph/OpenSceneGraph/blob/master/src/osgGA/FirstPersonManipulator.cpp](https://github.com/openscenegraph/OpenSceneGraph/blob/master/src/osgGA/FirstPersonManipulator.cpp)

# hibernate - 子树的意外结束

> ID：13305741
> 
> 赞同：2
> 
> 时间：2012-11-09T09:54:42.320
> 
> 标签：hibernate, jpa, spring-data-jpa

我将 JPA 与休眠一起使用。我想检查具有指定名称和用户名的行是否存在。以下查询引发错误：

```
@Query("select exists (select 1 from Strategy s where s.name=:name and s.username=:username)")
Boolean exists2(@Param("name") String name,@Param("username") String username); 
```

错误：

```
Caused by: org.hibernate.hql.ast.QuerySyntaxException: unexpected end of subtree [select exists (select s from com.soft.domain.strategy.Strategy s where s.name=:name and s.username=:username)] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T10:28:02.417

我通过切换以下查询解决了这个问题：

```
@Query("select count(s) from Strategy s where s.name=:name and s.username=:username")
long exists2(@Param("name") String name, @Param("username") String username); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:47:08.237

您是否将“：name”和“：username”放回自己的位置以代替示例值，还是您收到的确切错误消息？如果那是确切的消息，那么您的命名参数似乎没有被替换。我对hibernate的这种特殊用法没有太多经验，但是从某个地方开始研究命名参数与@Query注释的结合使用。（不幸的是，这个例外从一开始就没有说明这一点）

# python - 概率曲面图 matplotlib

> ID：13305743
> 
> 赞同：1
> 
> 时间：2012-11-09T09:54:45.057
> 
> 标签：python, matplotlib

我有 x 和 y 的 2d 值，它们跨越 x - [ 1 , 5 ] 和 y - [0.1 - 0.5]

如何在 matplotlib 中绘制轴为 x 、 y 和 P(y) 的 3d 表面？

我在网上的matlab中找到了这样做的代码，但我无法理解它，因此将其转换为matplotlib ...（对于下面的书面代码，我需要的值的范围完全不同）

```
 mu = [1 -1]; Sigma = [.9 .4; .4 .3];
  [X1,X2] = meshgrid(linspace(-1,3,25)', linspace(-3,1,25)');
  X = [X1(:) X2(:)];
  p = mvnpdf(X, mu, Sigma);
  surf(X1,X2,reshape(p,25,25)); 
```

有人可以帮我为 matplotlib 做同样的事情（也许是 plot_surface 吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:21:20.963

```
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.mlab as mlab
import numpy as np

def P(X, Y):
    return mlab.bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)      

fig = plt.figure()
ax = fig.gca(projection = '3d')
jet = plt.get_cmap('jet')

x = np.linspace(-2, 2, 60)
y = np.linspace(-2, 2, 60)
X, Y = np.meshgrid(x, y)
Z = P(X, Y)
surf = ax.plot_surface(X, Y, Z, rstride = 1, cstride = 1, cmap = jet, linewidth = 0)
ax.set_zlim3d(0, Z.max())

plt.show() 
```

产量

![在此处输入图像描述](../Images/f35f917bf096750fb830cfb367263c1d.png)

# php - postmeta 行表（在数组中） - Wordpress

> ID：13305744
> 
> 赞同：1
> 
> 时间：2012-11-09T09:54:52.883
> 
> 标签：php, html, wordpress

我需要帮助来解决我在 Wordpress 中的自定义元框的一个小问题。

我有一个表，每行包含一组 3 个值。行数未定义，因为用户可以添加或删除其中之一。

我需要将每一行（所以 3 个输入中的 3 个值）保存在一个特定的数组中。

对于这个源代码，我自愿删除了所有添加一行、删除一行等的系统......我还删除了所有查询/变量测试。

我认为这个问题并不难解决，但我没有看到任何解决方案..

谢谢！

```
function my_meta($post){ 
   $get_values = get_post_meta($post->ID,'_MY_META_ROW',false);

echo '<table>';
  foreach($get_values as $v => $MY_META_ROW){

        echo '<tr>
                <td><input type="text" name="MY_INPUT_1" value="'.$MY_META_ROW['INPUT_1'].'" /></td>
                <td><input type="text" name="MY_INPUT_2" value="'.$MY_META_ROW['INPUT_2']'" /></td>
                <td><input type="text" name="MY_INPUT_3" value="'.$MY_META_ROW['INPUT_3'].'" /></td>
            </tr>';
  }
echo '</table>';
}

add_action('save_post','save_my_inputs');
function save_my_inputs($post_id){

foreach($_POST['??????????'] as $value){

    $array_row = array (
        "MY_INPUT_1" => $POST['MY_INPUT_1'];
        "MY_INPUT_2" => $POST['MY_INPUT_2'];
        "MY_INPUT_3" => $POST['MY_INPUT_3'];
    )
  add_post_meta($post_id, '_MY_META_ROW', $value);
}
} 
```

# html - iPad总是假设纵向宽度为最大宽度

> ID：13305745
> 
> 赞同：2
> 
> 时间：2012-11-09T09:54:58.327
> 
> 标签：html, ipad, css, media-queries

我正在建立一个响应式网站，有 3 种尺寸。最大 480 像素、最大 768 像素和最大 1024 像素+；但是，我在使用 iPad 时遇到了问题。在 Galaxy Tab 10.1 上它就像一个魅力，在我的浏览器中它也很好用。但似乎每当我使用 iPad 时，它似乎总是认为最大宽度是 768 像素。

这就是我的意思： ![解释](../Images/292c3cc80a3509a9f5f7da33d6729947.png)

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<meta name="viewport" content="width=device-width, user-scalable=no" />
</head>
<style type="text/css">

body {
    background-color: red;
}

@media screen and (max-width: 480px) {
    body {
        background-color: green;
    }
}

@media screen and (min-width: 481px) and (max-width: 1023px) {
    body {
        background-color: brown;
    }
}

@media screen and (min-width: 1023px) {
    body {
        background-color: blue;
    }
}

</style>
<body>
<div class="color">
    Some color
</div>
</body>
</html> 
```

虽然我的要求不包括 iPad 支持，但我确实想支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:15:53.117

这可能与 max-scale、min-scale 和 initial-scale 有关 - 尝试将所有这些设置为 1 并查看是否有任何变化。

缺点是 iOS 用户将无法通过捏合来放大您的页面。

当您旋转 iPad 时，它不会改变视口，而是缩放内容。[艾伦派克](http://www.allenpike.com/2010/choosing-a-viewport-for-ipad-sites/)有一个很好的解释。

# javascript - Ajax 与 C++ http 服务器断开连接

> ID：13305749
> 
> 赞同：3
> 
> 时间：2012-11-09T09:55:03.467
> 
> 标签：javascript, c++, linux, xmlhttprequest

我为自己制作了一个简单的 C++ 应用程序，通过 HTTP 流式传输数据。当我在浏览器中打开服务器 IP 和端口时，我可以在浏览器窗口中看到流。但是从浏览器向 C++ 服务器发出的任何 XHR 请求都会在收到标头后立即从客户端自动关闭。使用 TELNET 或 PHP 甚至没有任何脚本的浏览器可以毫无问题地为我提供流数据。将 Ajax 连接到生成虚拟流的 PHP 脚本也可以。

什么可能导致这个问题？可能是因为发送的第一个字节是“\0”吗？或者它可能是由于使用的端口不是80引起的？

C++ 服务器和 PHP 脚本都在同一台 Debian Linux 机器上运行。JS 脚本已经在多种浏览器中进行了测试，包括 Opera、Mozzila Firefox 和 Chrome。

服务器发送这些标头：

```
write(*con, "HTTP/1.1 200 OK\n",16);
write(*con, "X-Powered-By: Darker\n",21);
write(*con, "Pragma: no-cache\n",17);
write(*con, "Content-Type: text/plain; charset=\"utf-8\"\n",42);
write(*con, "Connection: keep-alive\n",23); 
```

好的，所以在 Wireshark 和 Opera DragonFly 的帮助下，我分离了几个发生的问题：

*   HTTPRequest 中的“responseText”始终是“”（一个空字符串），尽管在 Wireshark 中我可以很容易地看到数据被正确接收。
*   接收响应时，“readyState”始终为 4，即使流尚未从服务器端结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:34:23.023

您应该指明内容长度标头，指示流的确切大小（以字节为单位）。另外，出于好奇，您是否正在流式传输纯文本（如您的内容类型中所示）？如果是，则没有内容长度可能是问题，因为它`\r\n\r\n`在 HTTP 中有意义

# http - 浏览器使用 HTTP/1.0 代理服务器

> ID：13305750
> 
> 赞同：1
> 
> 时间：2012-11-09T09:55:08.137
> 
> 标签：http, proxy-server

我正在编写支持 http/1.0 的 http 代理服务器。我在浏览器（谷歌浏览器）中使用我的代理服务器。代理获取类似请求`GET www.site.com HTTP/1.1`并发送响应`HTTP/1.0 505 HTTP Version Not Supported`。在那个浏览器告诉我那个错误之后。但是我希望浏览器会重新请求 http/1.0 版本（例如`GET www.site.com HTTP/1.0`）。我是否应该发送另一个响应以从浏览器获得所需的行为？还是不可能？如何使浏览器与 http/1.0 代理服务器一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:40:13.277

我想，这取决于您的浏览器。如果您使用 Microsoft Internet Explorer，这可能会有所帮助：http: [//support.microsoft.com/kb/811262/EN-US](http://support.microsoft.com/kb/811262/EN-US)

我还没有找到任何关于 http 协议协商的信息。客户端*可以*发出“HTTP OPTIONS”请求以检测服务器的能力，但[RFC 2616 第 19.6 节](https://www.rfc-editor.org/rfc/rfc2616#section-19.6)没有这样的要求。客户只*希望*了解较低的协议版本。

# java - 如何在 IE 8 中启动 Applet 以使其始终有效 - 标记 Object vs Applet？

> ID：13305754
> 
> 赞同：0
> 
> 时间：2012-11-09T09:55:23.007
> 
> 标签：java, applet

在 IE8 中启动 Java Applet 的最佳方式是什么？

问题是在一些IE浏览器（IE8+XP+Java 1.6.0_35）下面的OBJECT标签不启动小程序；

```
> <object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" codebase=
> .. 
```

但是 APPLET 标签在测试页面[http://javatester.org/version.html有效](http://javatester.org/version.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:20:14.807

> 在 IE8 中启动 Java Applet 的最佳方式是什么？

`deployJava.js`- 如[小程序标签 wiki](https://stackoverflow.com/tags/applet/info)中所述。它由 Sun 开发，现在由 Oracle 维护。它旨在使用浏览器所需的任何元素嵌入小程序。

# c++ - 在 c++ 或 c 或 Objective-C 中解压缩 split Zip 或/和 multi zip

> ID：13305759
> 
> 赞同：1
> 
> 时间：2012-11-09T09:55:43.663
> 
> 标签：c++, objective-c, ios, c, unzip

我想直接在 iPad 的应用程序中解压缩多个 zip 文件或拆分文件。为此，我使用 C 语言 minizip 了一个框架（这适用于简单的 .zip 文件）。

所以我的问题是如何用 C、C++ 或/和 Objective-C 中的一种语言解压缩像 .z01、.z02 或/和文件 .zip.001、.zip.002 这样的文件（如果可能的话，请举例说明如何制作这个）？我尝试（在Objective-C中）也获取所有文件的数据并将其组装在一个不起作用的文件中，所以另一个可能的响应是解释如何分割zip（只是数据切割或其他东西）？

提前感谢您的考虑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:51:53.080

最后，

当您将 zip 文件拆分为 zip.001 zip.002 等多个文件时......您只需剪切源文件的数据。

因此，对于解压缩这种类型的文件，只需将所有文件的数据合并到一个文件中，然后使用框架 minizip 解压缩这个新文件，并在 Objective-C 中使用谷歌源代码中的代码项目 ZipArchive（使用 minizip）。

PS：感谢大卫 H 的帮助。

# javascript - 验证器给出错误消息，但仍然让表单提交

> ID：13305760
> 
> 赞同：0
> 
> 时间：2012-11-09T09:55:44.130
> 
> 标签：javascript, jquery, forms, validation

我在我的网站上做了一个小测验，如果选择了正确的答案，我需要检查表单提交。如果某些必填字段未填写，则不会提交表单，并在测验部分给出错误答案的错误，这是我的脚本；

```
<script type="text/javascript">// <![CDATA[

$.extend($.validator.messages, {
  required: "this is required",
  email: "enter valid email"
});

$.validator.addMethod("equalValue", function(value, element, param) { 
    var elem_name = $(element).attr('name');
    value = $('input:radio[name="'+elem_name+'"]:checked').val();
    return(value == param);
}, 'Incorrect answear');

$(document).ready(function() {
$("#form").validate({
ignoreTitle: true,
 rules: {
    gender: "required ",
    quiz1: {required: true, equalValue: "A"},
    quiz2: {required: true, equalValue: "A"},
    quiz3: {required: true, equalValue: "C"},
    quiz4: {required: true, equalValue: "B"},
    quiz5: {required: true, equalValue: "C"},
    quiz6: {required: true, equalValue: "B"},
  }
 });

});
// ]]></script> 
```

如果它返回false，我该怎么做，它不会让表单提交？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:28:59.053

you have a bad script that will validate the form immediately after loading the webpage. it must be executed upon submitting the form:

```
<form id="quiz">
</form>

<script>

$('#quiz').submit(function(e)
{
    e.preventDefault();
    // validate form
    // if success,
    $(this).submit();
});
</script> 
```

# r - 如何比较 R 中的布尔向量

> ID：13305763
> 
> 赞同：5
> 
> 时间：2012-11-09T09:55:49.710
> 
> 标签：r, vector, comparison, boolean, boolean-operations

我有一个向量`v`，我想找到所有值在 4 到 7 之间的元素。 v = c(1:9)

```
# indices of elements with values larger than 4
which(v > 4)
# indices of elements with values smaller than 7
which(v < 7) 
```

`v>4`并`v<7`给出我想组合的布尔向量。我尝试了以下方法，但对我不起作用，...

```
# combination?
matching = which(v>4 && v<7)  # does not work 
```

如何在两个布尔向量上应用布尔运算，得到一个结果向量？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-09T09:57:35.810

用`&`而不用`&&`。R 与其他语言的不同之处`&`在于 不是按位`and`，而是逻辑运算符。

`&&`只计算每个向量的第一个元素：

> '&' 和 '&&' 表示逻辑 AND 和 '|' 和'||' 表示逻辑或。较短的形式执行元素比较的方式与算术运算符大致相同。较长的形式从左到右评估，仅检查每个向量的第一个元素。仅在确定结果之前进行评估。较长的形式适用于编程控制流，通常在“if”子句中首选。

有关`?"&&"`更多详细信息，请参阅。

# excel - 在一行中选择最大值左侧的列

> ID：13305766
> 
> 赞同：0
> 
> 时间：2012-11-09T09:55:57.573
> 
> 标签：excel

我希望能够选择列左侧的列，该列是一行中的最大值。基本上，我在那里有文字，所以它会是这样的：

```
0  A           B
1  Tomatoes:   10
2  Apples:     5
3  Bananas:    8 
```

“选择 b1 到 b3 的最大值左侧的列” 我知道获得最大值是 max(b1:b3)，但是如何选择最大值？顺便说一句，这就是我要设置它的方式：

有最多的：“西红柿”

应该是答案，而不是 10，如果我只使用最大公式，它通常会返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:11:23.923

这将是我对这个问题的建议：

```
=INDEX(A1:A3,MATCH(MAX(B1:B3),B1:B3,0)) 
```

您获得 MAX 值，然后使用 MATCH 获得它的行，然后使用 INDEX 从 A 列中选择正确的值。

好的，这也可以，但前提是您的 B 列按升序或降序排序。

```
=LOOKUP(MAX(B1:B3),B1:B3,A1:A3) 
```

您也可以执行 VLOOKUP，但是您必须将 col A 与 B 切换，因为您将在第一列中搜索并在更高的列中查找。

你有没有想过，如果有两个最大值怎么办？！

# python - 在 Django 中计算用户排名的最佳方法是什么

> ID：13305767
> 
> 赞同：3
> 
> 时间：2012-11-09T09:55:58.077
> 
> 标签：python, django, sorting

我有一个用 django 编写的网站。网站有根据他们的积分获得积分和排名的用户。

```
class Profile(UserenaBaseProfile):
    points = models.IntegerField(default=100)
    rank = models.PositiveIntegerField(...) 
```

当用户获得积分时，他/她的排名将会改变，其他用户也会改变。问题是计算用户排名的最佳方法是什么，我应该何时计算或多久计算一次？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:46:48.437

每次单个用户的积分增加时，可能不是更新每个用户的排名的最佳方法。如果你有很多用户，这对后端来说会很苛刻。

如果您想在个人资料页面上显示用户排名，也许您可​​以有一个查询来获取按点排序的所有用户的列表，将其单独存储为字典或其他任何内容并大量缓存它。这将对性能更好。

所以假设您的用户列表看起来像这样（1111 等是用户 ID）：

`USERS = { 1111: {'username': 'iskorum', 'points':99999 }, 2222: {'username': 'sidarcy', 'points':9444 }, 3333: {'username': 'joeblogs', 'points':37 } }`

在实际获得用户排名时，您可以简单地在这个存储的字典中找到用户的位置。

假设用户 ID 是 1111

userrank = [i+1 for i,x in enumerate(sorted(USERS)) if x == 1111]

返回 1

不需要额外的数据库查询

如果它只是一个小站点，每次都获取用户列表并在该列表中查找当前用户位置没有害处。

但是，如果您期望有成千上万的用户，则上述方法可能是更好的方法。

编辑：您还应该缓存排序列表，如下面的评论中所述，每次对列表进行排序可能会占用大量内存

# ios - ios 5 NSURLConnection 并在待机模式下阻止下载

> ID：13305780
> 
> 赞同：0
> 
> 时间：2012-11-09T09:57:02.253
> 
> 标签：ios, download, nsurlconnection, standby, dispatch-async

我正在使用`NSURLConnection`从服务器下载内容（并且我正在开发 iOS 5.0 中的 iPad 应用程序）。我希望`NSURLConnection`即使 iPad 处于待机状态也能继续下载。是否可以？

这是我的代码：

```
-(void)startDownload {

    UIDevice* device = [UIDevice currentDevice];
    BOOL backgroundSupported = NO;
    if ([device respondsToSelector:@selector(isMultitaskingSupported)])
        backgroundSupported = device.multitaskingSupported;    

    NSLog(@"\n\nbackgroundSupported= %d\n\n",backgroundSupported);

    dispatch_async(dispatch_get_main_queue(), ^ {

        NSURLRequest *req = [[NSURLRequest alloc] initWithURL:imageURL];
        NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:NO];
        [conn scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
        [conn start];

        if (conn) {
            NSMutableData *data = [[NSMutableData alloc] init];
            self.receivedData = data;

        }
        else {  ... }
    }) ;

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:08:48.777

每个应用程序都可以在后台继续执行大约 10 分钟，然后才会终止。只有某些应用程序可以在后台继续执行，例如音频/gps/蓝牙等相关应用程序。您可以在[后台执行和多任务处理](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)（在左侧的应用程序状态和多任务处理部分下）找到更多信息。

以下代码示例来自应用程序文档，可以帮助您入门，因此您的连接最多可以持续约 10 分钟 -

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        // Clean up any unfinished task business by marking where you.
        // stopped or ending the task outright.
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task and return immediately.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Do the work associated with the task, preferably in chunks.

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
} 
```

# sitecore - 在 Sitecore 中为一个项目存储多个图像

> ID：13305784
> 
> 赞同：1
> 
> 时间：2012-11-09T09:57:26.900
> 
> 标签：sitecore, sitecore-media-library

我想为一个项目存储多个图像（例如建筑物的图像），并且我还需要在 ASP.NET 网站中创建一个图像查看器控件。从 Sitecore 保存和检索图像有哪些好的选择？如果有一个图像列表类型的控件在我的场景中是理想的。

使用“附件”字段类型是一个不错的选择吗？如果有人有代码示例，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:27:27.863

Sitecore Field Suite 开源模块包含一个“图像字段”控件，允许您将多个图像附加到一个内容项。与普通的多列表不同，图像列表允许作者直接在内容编辑器中查看他们附加的图像，这对于选择和安排轮播项目非常有帮助。

链接：

*   介绍 Field Suite 的博客文章：http: [//blog.velir.com/index.php/2012/10/24/sitecore-field-suite/](http://blog.velir.com/index.php/2012/10/24/sitecore-field-suite/)
*   Sitecore Marketplace 上的 FIeld Suite：[http ://marketplace.sitecore.net/en/Modules/Field_Suite.aspx](http://marketplace.sitecore.net/en/Modules/Field_Suite.aspx)

# python - 使用 Eclipse 和 Pydev 调试器上的 ImportError

> ID：13305785
> 
> 赞同：3
> 
> 时间：2012-11-09T09:57:27.730
> 
> 标签：python, eclipse, debugging, pydev, importerror

我在 Eclipse 中有一个带有 pydev 插件的 python 项目。虽然我可以通过“运行方式”对话框或“运行配置”配置文件很好地运行脚本，但在使用调试器时导入失败（通过“调试配置”启动，配置与“运行”中使用的配置相同配置”）。

pythonpath 应该没问题，因为 run 命令工作得很好。只有调试运行面临导入错误。

到目前为止，我通过以下类似主题的建议尝试过的事情：

*   删除项目并重新创建（甚至重新启动整个系统）
*   删除解释器并再次添加它，以便
    重新计算 pythonpath
*   确保项目文件夹已导入 pythonpath
*   从
    Windows 命令行运行时，脚本也可以正常工作

当调试器已经通过常规运行解决导入问题时，如何使调试器与这些脚本一起工作？

版本：

*   视窗 XP 专业版 SP3
*   Eclipse SDK 4.2.1
*   Pydev 2.7.1

谢谢！

# jquery - Drupal 和 ParallaxJS（滑动页面）

> ID：13305787
> 
> 赞同：0
> 
> 时间：2012-11-09T09:57:30.477
> 
> 标签：jquery, drupal, parallax

我正在尝试使用 ParallaxJS 来实现与[ParallaxJS Demo](http://stolksdorf.github.com/Parallaxjs/)类似的效果，尽管我使用的是 Drupal 7 并且想知道它是如何影响它的。

一般来说，这类设计对每个页面都有硬编码的容器，而 Drupal 显然将它们创建为单独的页面。在 Drupal 站点上创建这种效果的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:33:03.543

我将使用的方法是从 Views (http://drupal.org/project/views) 开始。

如果您想要一个带有显示不同节点类型或实体类型的块的页面，您可以在视图中轻松执行此操作。解释 Views 的工作原理有点费力，但使用它是使用 Drupal 的真正优势。

从文档看来，ParallaxJS 允许您使用基本上任何元素，因此您应该获得足够的标记以使其在 Drupal 中工作。

视图可以为您提供包含所需内容的页面。确保其上的 ParallaxJS 触发器取决于您的 JS 代码或 Drupal 挂钩的实现。在我的脑海中，您可以在 hook_init 中使用 drupal_add_js （可以使用 arg 函数或其他方法来检查路径）在自定义模块中实现它。

# jquery - 图像裁剪插件中的多项选择

> ID：13305793
> 
> 赞同：3
> 
> 时间：2012-11-09T09:58:10.767
> 
> 标签：jquery, image, jcrop

有没有可以同时选择区域的图像裁剪插件。我用过 JCrop 插件 [http://deepliquid.com/content/Jcrop.html](http://deepliquid.com/content/Jcrop.html)

但是，在这种情况下，我们一次只能使用 1 个区域。任何帮助都将是可观的。

# asp.net-mvc - 动态 DBSet 查找和查询

> ID：13305796
> 
> 赞同：1
> 
> 时间：2012-11-09T09:58:15.317
> 
> 标签：asp.net-mvc, entity-framework

我有一个部分结果视图，其中包含表的名称和要查询的特定列的值。我阅读了 DBContext API，发现 Set(Type) 应该返回一个 DBSet，您可以对它进行 CRUD 操作。我不知道如何在没有 PK 的情况下准确查询 DBSet，因为用户不知道要查找的 PK。

可能使用 Classic ADO 会更容易吗？

编辑：我知道如何使用 DbSet.SQLQuery 函数，但不知道如何存储结果。我在调试器中检查了该元素，并且 SQLQuery 确实有效，因为它找到了表中的所有行。

```
public class SF1DB : DbContext
{
    //List of table names that feeds a DropDownList
    public DbSet<tablelist> tables { get; set; }

    //Data table
    public DbSet<dataTable1> dataTable1 { get; set; }
    public DbSet<dataTable2> dataTable2 { get; set; }
    //...list of other tables
}

public PartialViewResult GetFeatures(String tablelist, String[] countyfp)
{
    String type = "MvcApplication1.Models." + tablelist;
    Type dbType = Type.GetType(type);
    DbSet set = _db.Set(dbType);
    String sql = "select * from " + tablelist;

    //How do I store the result in a variable?
    set.SqlQuery(sql);
    return PartialView();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T09:31:26.180

我通过创建一个与用户选择的 DbSet 具有相同类型的列表来解决这个问题。然后我使用 SQLQuery 的 GetEnumerator 方法并遍历结果并添加到新列表中。最后，将列表传递给局部视图。

```
public PartialViewResult GetFeatures(String tablelist, String[] countyfp)
{
    String type = "MvcApplication1.Models." + tablelist;
    Type dbType = Type.GetType(type);
    DbSet set = _db.Set(dbType);
    String sql = "select * from " + tablelist + " where ";
    Type listType = typeof(List<>).MakeGenericType(dbType);
    IList list = (IList)Activator.CreateInstance(listType);

    for (int i = 0; i < countyfp.Length; i++)
    {
        sql += "cntyidfp like '%" + countyfp[i] + "'";
        if (i < (countyfp.Length - 1))
        {
            sql += " or ";
        }
    }

    IEnumerator result = set.SqlQuery(sql).GetEnumerator();
    while (result.MoveNext())
    {
        list.Add(result.Current);                
    }

    return PartialView(list);
} 
```

# delphi - TGroupBox 中的透明背景颜色 - DELPHI

> ID：13305797
> 
> 赞同：3
> 
> 时间：2012-11-09T09:58:16.370
> 
> 标签：delphi, groupbox

如何在 TGroupBox 中设置透明背景颜色？

在我的 Delphi 表格中，我有一个 GroupBox 和一个面板（图形叠加）。
我编写了一个使用 Rect 在面板上绘制渐变填充的程序。有用！
现在我有另一个问题：GroupBox 背景颜色来自 Form 但我希望它与 Panel 相同。我不能将 GroupBox 放入 Panel，因为绘制过程会填充整个 Panel 区域（也是 GroupBox）。
有没有办法（通过代码）设置 GroupBox 的透明背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:00:44.753

将 groupbox 的 parentcolor 设置为 true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:14:58.443

我解决了在运行时设置 GroupBox 的 Parent 属性。

# c# - 如何使用 xsd 文件在 Visual Studio 2010 中验证 xml 文件

> ID：13305798
> 
> 赞同：4
> 
> 时间：2012-11-09T09:58:16.680
> 
> 标签：c#, xml, visual-studio-2010, xsd

我刚刚开始学习 xml，所以我是这个领域的初学者。我想根据 xsd 文件验证 xml 文件（只是为了弄清楚 xsd 是如何工作的）。

在 VS 2010 中，我创建了 XML 文件和 XSD 文件，并将一些代码复制并粘贴到其中。

但是当我在 XML 文件中进行更改时，没有预期的警告。我认为原因是我需要将 XSD 文件绑定到我的 XML 文件。

我对吗？如果是这样，我如何将 XSD 绑定到 XML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:12:00.223

在 Visual Studio 中 xml 文件的属性窗口中，您可以选择要验证的 xsd。单击“架构”属性中的**“...”**按钮并从列表中选择您的架构（如果未列出，请单击添加按钮并选择您的文件）。然后，当您的 xml 无效时，您会收到警告，并且在您编辑 xml 时也会收到智能感知。 ![图式](../Images/12797c634551ecb9392fa5be511d8c4b.png)

此外（但它不仅仅用于在 Visual Studio 中进行验证）您还可以指定 xml 的命名空间，它应该与您在 XSD 中定义的命名空间匹配，并且可以是任意字符串（通常是某种 url）。

```
<?xml version="1.0" encoding="utf-8" ?>
<myrootelelemt xmlns="http://somearbitarystring.com/somemorestring.xsd">
...
</myrootelement> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:13:49.257

您必须将架构定义放在您的 xml 文件中，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<project xmlns="http://ProjectBase/Config.xsd" >
... 
```

打开 xml 文件时，VS 2010 会显示新的 Menu Item `XML`。打开它并选择最后一个 MenuItem `Schemas...`。

确保您的架构文件 (xsd) 在列表中。如果没有，请添加它（添加按钮）。还要确保没有更多对同一架构的引用。

最后，使用第一列检查应该使用哪个模式进行验证/智能感知

# javascript - Javascript：在 JavaScript 函数中验证时的日期问题

> ID：13305801
> 
> 赞同：0
> 
> 时间：2012-11-09T09:58:19.503
> 
> 标签：javascript, validation

在 Javascript 函数中：

```
if (Tim2Val > Tim3Val && Tim2Val < Tim4Val)
    return true;
else
    return false; 
```

如果我有像这样的变量

```
Tim1Val=  8:00;
Tim2Val= 23:00;
Tim3Val= 01:00;
Tim4Val= 05:00 
```

它正在返回真实。（它应该返回 false。你能告诉我我们如何解决这个问题吗？）

如果我有像这样的变量

```
Tim1Val=  8:00;
Tim2Val= 23:00;
Tim3Val= 02:00;
Tim4Val= 05:00; 
```

它返回错误。

函数 fn_ConvTo24Format(MsTimeVal) { if(MsTimeVal=='') { return -1; } var A = MsTimeVal.split(/\D+/); var locAMPos = MsTimeVal.indexOf('AM'); var locPMPos = MsTimeVal.indexOf('PM');

```
 if(locAMPos ==-1 && locPMPos ==-1)
 {
  return MsTimeVal;
 }
 if(locAMPos!= -1 && A[0] + '.' + A[1]=='12.00' )
 {
  return 0;

 }
 if(locPMPos!= -1 && A[0] + '.' + A[1]=='12.00' )
 {
  return 12;

 }

 if(locAMPos!= -1 && A[0] + '.' + A[1]=='12.00' )
 {
  return 0;

 }

 if(locAMPos!= -1)
 {
  return A[0] + '.' + A[1];
 }
 if(locPMPos!= -1)
 {
  return (parseFloat(A[0]) + 12) + '.' + A[1];
 }

 return MsTimeVal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:45:28.150

您的函数返回多种类型的数据：字符串和数字。使用一种类型

```
...
if(locAMPos!= -1)
{
   return parseFloat(A[0] + '.' + A[1]);
}
.... 
```

我认为这不是进行时间比较的好方法。将更好地获取 Date 类示例并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:01:54.940

也许从来没有使用过 Tim1Val 是问题的一部分？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:09:26.287

我想这些值以字符串的形式出现。如果将两者进行比较，Javascript 会将它们转换为数字，从而有效地改变它们的值。

“8:00”变为 8 并且分钟被忽略。

也许将您的小时和分钟转换为几分钟：

```
function toMinutes (value) {
    var parts = value.split(":");
    return Number(value[0]) * 60 + Number(value[1]);
}

var Tim1Val = "8:00";
var Tim2Val = "23:00";
var Tim3Val = "2:00";
var Tim4Val = "5:00";

if (toMinutes(Tim1Val) > toMinutes(Tim3Val) && toMinutes(Tim2Val) < toMinutes(Tim4Val)) 
```

哦，正如彼得威尔金森所说，你永远不会使用 Tim1Val。

# java - JVisualVM/JConsole 中的 System.gc() 与 GC 按钮

> ID：13305813
> 
> 赞同：6
> 
> 时间：2012-11-09T09:59:00.880
> 
> 标签：java, memory, garbage-collection, heap-memory, jconsole

我目前正在测试我的概念证明原型处理 XML 模式，并围绕一个非常消耗内存的树自动机外部库（我有源​​）构建，我想绘制“真正的峰值”（堆) 随着模式大小的增加，不同运行的内存消耗（使用的指标符合我的目的并且不影响问题），或者至少是它的合理近似值。

为了给出一个数量级，对于实际峰值为 100MB 的运行（我测试了它多次运行完全相同的输入/参数配置，强制使用 -Xmx 和 -Xms 的 jvm 内存减小值，我得到**Exception in thread "main" java.lang.OutOfMemoryError: GC overhead limit exceeded** < 100MB, 结果稳定且可重复）它占用了大约 1.1GB，这就是为什么获取实数对我来说非常重要，因为它们相差很大！

在过去的 10 天里，我一直在网上和 stackoverflow 上阅读问题，我真正知道的是：

1.  System.gc() “建议” GC 运行，不会以任何方式强制它，因此不可能依赖它来检测内存使用峰值

2.  通常建议的是计算对象占用（我为此看到了[SizeOf](http://sizeof.sourceforge.net/)项目，我尝试过并且工作正常，即使它不符合我的需要），这对我来说是不可行的，因为由于创建了一个许多集合（集合、列表和映射）迭代器以不同的方法调用，调用次数非常多（据我记忆，每次运行 10 分钟的次数为数百万次），因此检测所有涉及的对象将非常困难并执行总和（我在几天内用内存消耗图调试了很多次运行，但无法识别出只有一个瓶颈）

3.  没有办法轻松获取方法的内存占用（表示为对象内存分配的峰值）

事实是我自己亲身经历过 System.gc() 调用是不可靠的（例如，相同配置的不同运行，由于 GC 是否真正被调用而在 System.gc() 之后读取的不同内存），但是当我按下 JVisualVM 或 Jconsole 中的“GC 按钮”，它**永远不会**运行 GC 或拒绝这样做。

**所以我的问题是：调用他们对该按钮的实现（我还没有尝试过，但是到目前为止我已经阅读过，使用带有[附加 api](http://docs.oracle.com/javase/6/docs/technotes/guides/attach/index.html)的 jconsole.jar 似乎是可行的）将不同于直接调用 System.gc()从我的代码，从而解决我的问题？如果不是，您如何解释该按钮的“确定性行为”？**

到目前为止，我对实际内存峰值进行了一些手动测试，给出了 10 个不断增加的模式大小（对于这种测量，模式是从单个“复杂性参数”自动生成的），如果我不能，我绘制了预期的曲线获得更好的解决方案我想将我的代码作为外部 jar 运行，其中 -Xmx/-Xms 略小于我对预期内存峰值的预测，在外部进程 ErrorStream 中捕获 OutMemoryException 并使用增加的内存重新启动，直到完全运行已完成。（如果朴素的记忆预测不够稳健，我将应用适当的机器学习技术）。我知道这不是一个优雅的解决方案，但在我的场景（学术界）中，我可以花一些额外的时间进行这些测量。

系统信息（机器是 Fedora 17、64 位）：

> java 版本 "1.7.0_04" Java(TM) SE Runtime Environment (build 1.7.0_04-b20) Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, 混合模式)

提前致谢， 亚历山德罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:17:14.910

据我所知，Jconsole 或任何其他工具仅使用 System.gc()。没有其他选择。众所周知，java告诉大家不要依赖System.gc()，但这并不意味着它根本不起作用。

因此，在进行查询时，您似乎担心按下该按钮如何直接调用 GC 并且仍然 java 说 System.gc 仅“建议”调用 GC。我说，那个按钮也调用 System.gc() 并且它只是“建议”java 尝试 GC，并且它以某种方式发生，java 决定在那时自己执行 GC（它不能保证，但 java 以某种方式做到了。）

所以为了证明这个事实，我刚刚创建了一个简单的程序，它只创建了大量的对象。它用“System.gc()”注释了行。现在尝试先用注释的 System.gc() 运行相同的程序，然后取消注释 System.gc()。确保提供 VM 参数为 -verbose:gc -XX:+PrintGCTimeStamps -XX:+PrintGCDetails。

```
package ravi.tutorial.java.gc;

/**
 * Just to test GC. RUn with below VM arguments.
 * 
 * -verbose:gc -XX:+PrintGCTimeStamps -XX:+PrintGCDetails
 * 
 * 
 * @author ravi.k
 * 
 */
public class TestGC {

    public static A a;

    /**
     * @param args
     * @throws InterruptedException
     */
    public static void main(String[] args) throws InterruptedException {

        for (int i = 0; i < 100; i++) {
            populateObjects();
            System.out.println("population done for batch: " + i);
        }

    }

    public static void populateObjects() {
        for (int i = 0; i < 100000; i++) {
            a = new A("A");
        }
        //System.gc();
    }

}

class A {
    String s;

    public A(String s) {
        this.s = s;
    }
} 
```

这里部分输出来自我的机器。

commened System.gc()：这里gc是jre随意调用的。

```
population done for batch: 0
population done for batch: 1
population done for batch: 2
population done for batch: 3
population done for batch: 4
population done for batch: 5
population done for batch: 6
population done for batch: 7
population done for batch: 8
population done for batch: 9
0.332: [GC 0.332: [ParNew: 17024K->410K(19136K), 0.0024479 secs] 17024K->410K(83008K), 0.0025219 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
population done for batch: 10
population done for batch: 11
population done for batch: 12
population done for batch: 13
population done for batch: 14
population done for batch: 15
population done for batch: 16
population done for batch: 17
population done for batch: 18
population done for batch: 19
0.344: [GC 0.344: [ParNew: 17434K->592K(19136K), 0.0011238 secs] 17434K->592K(83008K), 0.0011645 secs] [Times: user=0.00 sys=0.01, real=0.00 secs] 
population done for batch: 20
population done for batch: 21
population done for batch: 22
population done for batch: 23
population done for batch: 24
population done for batch: 25
population done for batch: 26
population done for batch: 27
population done for batch: 28
population done for batch: 29
population done for batch: 30
0.353: [GC 0.353: [ParNew: 17616K->543K(19136K), 0.0011398 secs] 17616K->543K(83008K), 0.0011770 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
population done for batch: 31
population done for batch: 32
population done for batch: 33 
```

未注释的 System.gc()：这里为每个批次调用 GC。现在 System.gc() 只是建议 GC，但 java 选择在那个时候自己运行 GC。这与其他工具中那个神奇的 GC 按钮的情况完全相同:)

```
0.337: [Full GC (System) 0.337: [CMS: 0K->400K(63872K), 0.0219250 secs] 3296K->400K(83008K), [CMS Perm : 4423K->4422K(21248K)], 0.0220152 secs] [Times: user=0.04 sys=0.00, real=0.02 secs] 
population done for batch: 0
0.364: [Full GC (System) 0.364: [CMS: 400K->394K(63872K), 0.0161792 secs] 2492K->394K(83008K), [CMS Perm : 4425K->4425K(21248K)], 0.0162336 secs] [Times: user=0.01 sys=0.00, real=0.02 secs] 
population done for batch: 1
0.382: [Full GC (System) 0.382: [CMS: 394K->394K(63872K), 0.0160193 secs] 2096K->394K(83008K), [CMS Perm : 4425K->4425K(21248K)], 0.0160834 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
population done for batch: 2
0.399: [Full GC (System) 0.399: [CMS: 394K->394K(63872K), 0.0160866 secs] 2096K->394K(83008K), [CMS Perm : 4425K->4425K(21248K)], 0.0161489 secs] [Times: user=0.02 sys=0.00, real=0.02 secs] 
population done for batch: 3
0.417: [Full GC (System) 0.417: [CMS: 394K->394K(63872K), 0.0156326 secs] 2096K->394K(83008K), [CMS Perm : 4425K->4425K(21248K)], 0.0156924 secs] [Times: user=0.02 sys=0.00, real=0.02 secs] 
population done for batch: 4
0.434: [Full GC (System) 0.434: [CMS: 394K->394K(63872K), 0.0157274 secs] 2096K->394K(83008K), [CMS Perm : 4425K->4425K(21248K)], 0.0157897 secs] [Times: user=0.02 sys=0.00, real=0.01 secs] 
population done for batch: 5 
```

要添加更多，它就像线程。无法保证线程何时运行，但每当我们编写任何示例线程程序时，线程本身都会运行该时间。所以我们不应该责怪java它是如何在线程启动时运行的:)。Java 只是说不要依赖这些东西，但它们确实有效。此外，尽管它们在某些情况下工作并不意味着它们每次都会工作。即使是那些 jconsole 工具也可能无法执行 GC，只是我们从未见过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T13:42:13.543

我对这种微不足道的方法有很多积极的经验：

```
System.gc();
Thread.sleep(500);
System.gc(); 
```

由于对象终结问题，一次 GC 运行通常是不够的，其中对象可能在终结中复活。因此，在第二次 GC 运行时会释放额外的内存。

请注意，这以及任何其他看似“更智能”的方法都是启发式的，并且非常依赖于 JVM 的确切版本，包括其 GC 配置。但在许多情况下，您不会对一般性如此感兴趣：如果它现在可以工作并允许您进行测量，那么它就是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:12:03.273

> 1) System.gc() “建议” GC 运行，不会以任何方式强制它，因此不可能依赖它来检测内存使用峰值

规范就是这么说的，但是如果您使用 OpenJDK 或 HotSpot，除非您将其关闭，否则它将始终执行 Full GC。

> 通常建议的是计算对象占用

我建议使用商业内存分析器。我会让 JVM 以最大 8 GB 启动，然后看看它尝试使用多少。之后，我会根据您对它是否想要更多或似乎不使用它的判断来增加或减少它。

> 没有办法轻松获取方法的内存占用（表示为对象内存分配的峰值）

方法使用的唯一内存是在堆栈上。您可以跟踪在方法中创建了多少对象（计数、类、大小），但这些对象不属于该方法并且可以在任何地方使用，即使在方法返回之后也是如此。

> 如果不是，您如何解释该按钮的“确定性行为”？

我会把它归结为主观分析。;)

理想情况下，您应该以 2-3 倍的最小内存运行 JVM，以使其有效运行。试图节省成本低于 1 美元的 100 MB 并不总是有用的。;)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-09T10:50:56.720

你可以像这样强制GC....

```
private static void force_gc()
{
    Object obj = new Object();
    WeakReference<Object> ref = new WeakReference<Object>(obj);
    obj = null;
    while (ref.get() != null)
    {
        Log.d(LOGTAG, "Forcing gc() ...");
        System.gc();
    }
} 
```

除此之外......我很想知道这个问题的去向。

# synchronization - 什么时候需要使用 MPI_Barrier()？

> ID：13305814
> 
> 赞同：30
> 
> 时间：2012-11-09T09:59:11.950
> 
> 标签：synchronization, mpi, openmpi

我想知道什么时候需要使用屏障？例如，在分散/聚集之前/之后我是否需要它？或者 OMPI 是否应该在分散/聚集之前确保所有流程都已达到该点？同样，在广播之后，我可以期望所有进程都已经收到消息吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-09T10:25:11.250

MPI-3.0 之前 MPI 中的所有集合操作都是阻塞的，这意味着在它们返回后使用传递给它们的所有缓冲区是安全的。特别是，这意味着当这些函数之一返回时，所有数据都已收到。（但是，这并不意味着所有数据都已发送！）因此，如果所有缓冲区都已经有效，则 MPI_Barrier 在集体操作之前/之后不是必需的（或非常有用）。

另请注意，MPI_Barrier 不会神奇地等待非阻塞调用。如果您使用非阻塞发送/接收，并且两个进程在发送/接收对之后在 MPI_Barrier 处等待，则不能保证进程在 MPI_Barrier 之后发送/接收所有数据。请改用 MPI_Wait（和朋友）。因此，以下代码包含错误：

```
/* ERRORNOUS CODE */

Code for Process 0:
Process 0 sends something using MPI_Isend
MPI_Barrier(MPI_COMM_WORLD);
Process 0 uses buffer passed to MPI_Isend // (!)

Code for Process 1:
Process 1 recvs something using MPI_Irecv
MPI_Barrier(MPI_COMM_WORLD);
Process 1 uses buffer passed to MPI_Irecv // (!) 
```

标有 的两条线`(!)`都是不安全的！

MPI_Barrier 仅在少数情况下有用。大多数时候，您并不关心您的进程是否同步。更好地阅读阻塞和非阻塞调用！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-09T13:13:27.890

例如，一种用途`MPI_Barrier`是控制对外部资源（如文件系统）的访问，而文件系统不能使用 MPI 访问。例如，如果您希望每个进程按顺序将内容写入文件，您可以这样做：

```
int rank, size;
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);
for ( int ii = 0; ii < size; ++ii ) {
    if ( rank == ii ) {
        // my turn to write to the file
        writeStuffToTheFile();
    }
    MPI_Barrier(MPI_COMM_WORLD);
} 
```

这样，您可以确定没有两个进程同时调用`writeStuffToTheFile`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T11:17:21.787

可能 MPI_Barrier() 不常使用，但很有用。事实上，即使您使用同步通信，MPI_Send/Recv() 也只能确保两个进程同步。在我的项目中，一个 cuda+MPI 项目，我使用的只是异步通信。我发现在某些情况下，如果我不使用 MPI_Barrier() 后跟 Wait() 函数，很可能会出现两个进程 (gpu) 想要同时相互传输数据的情况，这可能会很糟糕降低程序效率。上面的虫子让我发疯，我花了几天时间才找到它。因此，当您在程序中使用 MPI_Isend/Irecv 时，您可能会仔细考虑是否使用 MPI_Barrier()。有时同步进程不仅是必要的，而且是必须的，尤其是你的程序正在处理设备。

# iphone - 如何在 Uiscrollview 中添加文本视图？

> ID：13305817
> 
> 赞同：1
> 
> 时间：2012-11-09T09:59:14.617
> 
> 标签：iphone, xcode, uiscrollview

使用故事板我想添加并`UITextview`在`UIScrollview`屏幕中滚动 TextView。请帮我...

```
scroller.contentSize=CGSizeMake(320,846); 
[scroller setScrollEnabled:YES]; 
int GetIndex = [GetSelectedIndex intValue]; 
label = [firstheading objectAtIndex:GetIndex]; 
labelheading.text=label; 
textviews = [firstdesc objectAtIndex:GetIndex];
textview.text=textviews; 
[scroller addSubview:textview]; 
NSLog(@"textview:%@",textview);
 NSLog(@"image:%@",getimage); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:08:56.633

只是一个建议，您可以先尝试在 ViewController 上添加 UIView。然后将 UIScrollView 拖到您的 UIView 中。然后将 UITextView 拖入其中。

我在故事板中有这种安排 - 因为我在顶级 UIView 以及 UIScrollView 中有一个图像

# ruby - 如何在 IronWorker 中捆绑本地 gem 依赖项

> ID：13305823
> 
> 赞同：1
> 
> 时间：2012-11-09T09:59:33.907
> 
> 标签：ruby, ironworker, iron.io

我有一个 Ruby IronWorker，它依赖于一个未发布到 RubyGems 的私有 gem。

有没有办法将此本地合并到文件`mygemname-0.0.1.gem`中的 IronWorker 中`.worker`？

我希望能够在 myruby.worker 中指定以下内容：

```
gem 'mygemname', '>=0.0.1', :path=> 'vendor/bundle' 
```

目前这给出以下错误

```
.rvm/gems/ruby-1.9.3-p0/gems/iron_worker_ng-0.12.2/lib/iron_worker_ng/code/base.rb:79 :in `eval':
   wrong number of arguments (3 for 2) (ArgumentError) 
```

希望默认值给出：

```
 gem 'mygemname', '>=0.0.1' 
```

给出以下错误

```
Could not find gem 'mygemname (>= 0.0.1) ruby' in the gems available on this machine. 
```

我是否在正确的轨道上试图通过 .worker 文件让它工作？还是我应该考虑指定自定义构建步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T07:44:45.537

如果您未发布的 gem 本身具有依赖关系，则需要进行一些按摩以使事情顺利进行。这是一种对我有用的技术：

`mygem.worker`

```
runtime "ruby"

#Merge in an unpublished local gem
dir '../opensource-cli-tools/facebook_exporter', '__gems__/gems'
file '../opensource-cli-tools/facebook_exporter/mygem.gemspec', '__gems__/specifications'

#Merge in a custom build script to fetch the unpublished gem's dependancies
file "Gemfile"
file "install_dependancies.sh"

remote_build_command 'chmod +x install_dependancies.sh && ./install_dependancies.sh'

#Run the puppy!
exec "run.rb" 
```

`install_dependancies.sh`

```
echo "Installing dependancies to __gems__/"
gem install bundler --install-dir ./__gems__ --no-ri --no-rdoc
bundle install --standalone --path ./__gems__
cp -R ./__gems__/ruby/*/* ./__gems__
rm -rf ./__gems__/ruby
echo "Fixing install location of mygem"
mv ./__gems__/gems/mygem ./__gems__/gems/mygem-0.0.1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T15:51:06.377

据我所知，目前不支持 git 和本地路径。这是手动包含本地 gem 的方法：将这些行添加到 .worker 文件中：

```
dir '../vendor/bundle/mygemname', '__gems__/gems'
file '../vendor/bundle/mygemname/mygemname.gemspec', '__gems__/specifications' 
```

# windows-phone-7 - 在 Windows Phone 平台上为 WP 7、WP 7.5、WP 8 设备开发新应用程序的 SDK/工具

> ID：13305824
> 
> 赞同：0
> 
> 时间：2012-11-09T09:59:38.673
> 
> 标签：windows-phone-7, windows-phone-8

我是 Windows Phone 开发环境的新手，在 SO 上环顾四周，但找不到我所遇到问题的明确答案。

随着 Windows Phone SDK 8 的公开发布，以及新的 Windows Phone 获得好评，我们的一位客户也希望在 Windows Phone 平台上启动他​​们的应用程序（他们已经在 iPhone 上安装了该应用程序）。该应用程序非常简单。显然，客户希望他们的应用程序兼容并可供尽可能多的用户/设备使用——WP7、WP7.5 和 WP8。

问题是 - 我应该使用什么 SDK 版本来开发这个应用程序？目前我已经**安装了 64 位的 Windows 8、VS 2012 Express 和 Windows Phone SDK 8.0**并准备好进行开发。那么如果使用上述工具开发应用程序，它会在所有装有**WP 7、WP 7.5 和 WP 8**的设备上运行吗？

开发可在 WP 7、WP 7.5 和 WP 8 设备上运行的全新 Windows Phone 应用程序的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:10:50.710

创建新项目时，系统会要求您在 Windows Phone 7 和 8 之间进行选择。WP7 应用程序在旧手机和新手机中运行，但 WP8 应用程序仅在 WP8 中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:46:17.590

完整的答案在这个 MSDN 页面上：
[Windows Phone 版本](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202996%28v=vs.105%29.aspx)
基本上你可以创建针对 WP7.5 平台的应用程序，它将在所有当前的 Windows Phone 设备上运行，或者你可以只针对 Windows Phone 8，然后它将只在新的WP8 设备，但在针对这个较新的平台时，您可以使用更广泛的 API 和功能集。

# objective-c - 从 TabBarController 访问 viewController 的属性

> ID：13305826
> 
> 赞同：0
> 
> 时间：2012-11-09T09:59:39.197
> 
> 标签：objective-c, ios, properties, uiviewcontroller, uitabbarcontroller

我有一个`UITabBarController`（嵌入在 a 中`UINavigationController`）有一些“孩子” `UIViewControllers`。

当用户到达 TabBarController 时，会显示第一个 ViewController。我在 TabBarController 中处理数据，然后在不同的 viewControllers 中使用它。所以从子 ViewController 访问 TabBarController 的属性不是问题。

现在，我要做的是在我的 TabBarController 中访问子 ViewControllers 的属性。

我知道这样的事情可以循环通过控制器：

```
for (UIViewController *v in self.viewControllers)
{
    if ([v isKindOfClass:[MyViewController class]])
    {
        // Do something here
    }
} 
```

这段代码有效，我正确地找到`MyViewController`了，但现在我不知道如何访问它的属性。有人可以给我一个关于如何做到这一点的提示吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:03:39.163

```
for (UIViewController *v in self.viewControllers)
{
    if ([v isKindOfClass:[MyViewController class]])
    {
       MyViewController *myViewControllerObj = (MyViewController *)v;

        // you can access all the properies here
        // example: myViewControllerObj.yourPropery;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:05:55.450

将 tye 投射到您的特定 ViewController 并访问属性。不要忘记将头文件包含在 .m 文件中。

标题：

```
#import "MyViewController.h" 
```

类型转换：

```
MyViewController *vc = (MyViewController*) v;
v.myProperty = myValue; 
```

# visual-studio-2010 - TFS 和 Visual Studio 缓慢签入

> ID：13305828
> 
> 赞同：7
> 
> 时间：2012-11-09T09:59:50.553
> 
> 标签：visual-studio-2010, tfs, checkin, performance

我对 Visual Studio 或 Team Foundation Server 不太熟悉，但我有一个开发团队抱怨在 Visual Studio 2010 中签入速度非常慢（几分钟）。

检查服务器和数据库没有发现任何问题 该问题仅发生在一种特定的解决方案中。即使是非常小的文本文件也可能出现此问题。该问题影响团队中的所有用户。

我应该从哪里开始故障排除？

**编辑**额外信息

该项目的大小约为 11.5GB，由 284,455 个文件和 52,186 个文件夹组成。这些由大约 10 个用户访问。我认为，就规模而言，这是我们拥有的最大项目。

我不确定问题何时首次出现。

我已经厌倦了在我的机器上重现这个问题而没有成功。所以它看起来与本地设置有关。我已经安装了开发团队正在使用的插件和扩展。

相同的开发人员对其他项目没有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-14T16:53:46.083

对于在执行任何需要 TFS 交互的操作（签出、签入、添加新、重命名、移动等）时遇到较大滞后时间的人，TFS 中可能有许多区域可能会导致问题。就我而言，即使是 Visual Studio 中最简单的 TFS 交互也需要等待 5-10 秒。我决定使用 Process Monitor 对其进行调查，并发现每次 TFS 执行*任何*操作时，它都会遍历我的 TFS 工作区中的每个文件，而不管打开了哪些项目，或者是否打开了源代码管理资源管理器或团队资源管理器。当时，就像@reticentKoala 一样，我的工作区中有 100,000 多个文件，总计超过 17GB。

这绝对是 TFS 客户端代码中的一个错误（我正在运行 VS2013，我们的 IT 人员升级到任何相关的 TFS 版本），但幸运的是它揭示了一些解决方法。

就我而言，我确实从事过许多项目，但通常一次只做一两个。通过在我的正常工作文件夹中创建一个“存档”文件夹，并将我没有积极从事的任何项目移入其中，我能够再次以合理的速度进行 TFS 交互。

如果您积极参与一个更大的项目，而您不能像那样随意移动碎片，我只能推测可能的解决方案，但基本想法是减少您活动中的文件数量工作区，或它们在本地计算机上的存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:04:38.170

您是否查看过以下帖子，尤其是 Joel Rondeau 的评论： [TFS 慢速服务器故障排除建议](https://stackoverflow.com/questions/7428052/suggestions-for-troubleshooting-slow-tfs-server) 或： [https ://web.archive.org/web/20161104172214/http://www.lostapalooza.com/?p=150](https://web.archive.org/web/20161104172214/http://www.lostapalooza.com/?p=150)

我会确保没有大型 BLOB 文件实际上也存储在 TFS 系统中。而是存储指向它们的链接，并使用 Web 访问和团队网站来执行此操作。

# timezone - 将时区 ID 存储在数据库中是否安全或可以更改？

> ID：13305839
> 
> 赞同：6
> 
> 时间：2012-11-09T10:00:14.973
> 
> 标签：timezone, nodatime

我刚刚开始使用 NodaTime。在我的应用程序中，用户创建一个事件并选择一个时区。无论我使用 BCL (Windows) 时区列表还是 TZDB (Olson) 列表（不要混合使用它们！），我都需要将时区的 id 持久化到我的数据库中，以便以后可以重新创建时区- 意识到时间。

鉴于时区 id 似乎有些随意，并且不是 ISO 标准，我是否可以依靠将来调用 GetZoneOrNull 时始终找到该 id？

我假设 GetZoneOrNull 方法是针对这种情况的防御；也就是说，当它被传递一个不存在于它自己的 Ids 集合中的 id 时。我的问题是：如果从 Ids 集合中检索到一个 id，我可以相信 GetZoneOrNull 将来永远不会返回 null 吗？

但是，如果一个身份可以从历史中消失，那么最好的应对策略是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:56:21.913

显然，如果您在 Windows 的时区和 TZDB 之间切换，则时区 ID 会有所不同。Olson 时区 ID 应该是稳定的，不应更改。尽管我这么说，过去发生了变化，但旧的 Id 仍然存在，并且是新 Id 的别名。所有“地区/城市”ID 都是新样式，并且选择了该方案，以便它们永远不必再次更改。旧的 id 有时会根据时区的合法名称命名，这些名称可能会发生变化。

我们将时区的 Olson Id 存储在我当前项目的表中。

我不能说 Windows 时区 ID。

# java - 可以代理某些类但不能代理其他类

> ID：13305843
> 
> 赞同：5
> 
> 时间：2012-11-09T10:00:24.040
> 
> 标签：java, reflection

***更新***解决方案是[Java.lang.reflect.Proxy 从调用返回另一个代理导致 ClassCastException 分配](https://stackoverflow.com/questions/2642700/java-lang-reflect-proxy-returning-another-proxy-from-invocation-results-in-class/2643243#2643243)

我的测试代码代理`java.sql.Connection`。

我像这样创建我的代理：

```
log.info("connection is "+connection.getClass().getName()+", "+
    (connection instanceof Connection));
Object proxy = java.lang.reflect.Proxy.newProxyInstance(
    connection.getClass().getClassLoader(),
    connection.getClass().getInterfaces(),
    new MockFailureWrapper(connection));
log.info("proxy is "+proxy.getClass().getName()+", "+
    (proxy instanceof Connection));
return (Connection)proxy; 
```

当我包装 H2 DB 连接时，这非常有效。

当我尝试包装 MySQL 连接时，`Connection`返回中的代理转换失败，即使`connection`I'm wrapping 的类型是`Connection`. 例外是：

```
java.lang.ClassCastException: $Proxy11 cannot be cast to java.sql.Connection 
```

H2 连接的日志行是：

```
connection is org.h2.jdbc.JdbcConnection, true
proxy is $Proxy9, true 
```

对于 MySQL 连接：

```
connection is com.mysql.jdbc.JDBC4Connection, true
proxy is $Proxy11, false 
```

**发生了什么事，为什么我不能包装 MySQL 数据库连接**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:27:03.610

问题是这一行：

```
connection.getClass().getInterfaces() 
```

它只是为您提供由您想要代理的类直接实现的接口。如果实现了连接接口 f.eg. 通过 MySql-Connection 类的超类（比如说 AbstractConnection），您的代理将不会实现 Connection 接口。

要解决此问题，请将 Connection-Interface 添加到您的代理应实现的接口数组中。

# html - 在 Internet Explorer 中将列分成两行

> ID：13305845
> 
> 赞同：-1
> 
> 时间：2012-11-09T10:00:24.947
> 
> 标签：html, css, xml, internet-explorer, xslt

我在 IE 中使用 tablr

```
<table style="width=74%;table-layout:auto" border="0">
<xsl:for-each select="webpage/param">    
<tr>
 <xsl:if test="@type !='i'">  
    <td class="rowYellow">
    <xsl:if test="@indent !=''">  

        <!-- Generate the appropriate number of indentation -->
        <xsl:variable name="count" select="@indent"/>
        <xsl:for-each select="(//*)[position()&lt;=$count]">
            <xsl:text>&#xA0;</xsl:text>
        </xsl:for-each> 
```

这段代码在 Mozilla 中运行良好，但在 IE 中，我的专栏分为两行，而不是自动布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:17:05.957

您要做的是为表格单元格设置一些样式。您已经这样做了，但是代码中有一些基本错误。

首先，请尝试了解一些基本的 HTML 和 CSS。你会在谷歌上找到很好的资源，比如这个：[http ://www.w3.org/Style/Examples/011/firstcss.en.html](http://www.w3.org/Style/Examples/011/firstcss.en.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:04:50.483

有价值的评论扩展：

你的专栏，我假设是一个或多个表格列。您不希望其中的文本位于 2 行上吗？

添加css规则：

```
td {
  white-space:nowrap;
} 
```

# c# - 将 XML 结构解析（并保留）到 SQL Server

> ID：13305847
> 
> 赞同：2
> 
> 时间：2012-11-09T10:00:34.207
> 
> 标签：c#, .net, linq-to-sql, linq-to-xml

我希望通过 C# 解析一个相对复杂的 XML 文件，并将选择的数据存储到 SQL Server '08 数据库中。这是我希望从 XML 文件中提取的内容：

```
<educationSystem>
    <school>
        <name>Primary School</name>
        <students>
            <student id="123456789">
                <name>Steve Jobs</name>
                <other elements>More Data</other elements>
            </student>
            <student id="987654">
                <name>Jony Ive</name>
                <otherElements>More Data</otherElements>
            </student>
        </students>
    </school>
    <school>
        <name>High School</name>
        <students>
            <student id="123456">
                <name>Bill Gates</name>
                <other elements>More Data</other elements>
            </student>
            <student id="987654">
                <name>Steve Ballmer</name>
                <otherElements>More Data</otherElements>
            </student>
        </students>
    </school>
</educationSystem> 
```

[在你问之前，不，这不是学校作业——我以学校/学生为例，因为原件要敏感得多。]

我能够（使用 XDocument/XElement）解析 XML 文件并获取所有学校名称、学生姓名和学生 ID 的列表，但是当它被添加到数据库中时，我最终得到的`Bill Gates`学生条目不到一秒学校。这一切都只是一行一行。

我正在寻找一种方法来实现这一目标：

```
Foreach school
    put it's name into an XElement
    foreach student
        grab the name and id put into XElements
Grab next school and repeat 
```

我相信 Linq 将是实现这一目标的最佳方式，但我在如何开始这个过程时遇到了麻烦。有人能指出我正确的方向吗？

**编辑：**这是我目前用来将数据保存到数据库的代码。它一次处理一个列表（因此事情不应该是相关的）。我还将整理 SQL。

```
 private void saveToDatabase (List<XElement> currentSet, String dataName)
    {
        SqlConnection connection = null;

        try
        {
            string connectionString = ConfigurationManager.ConnectionStrings["connString"].ConnectionString + "; Asynchronous Processing=true";
            connection = new SqlConnection(connectionString);
            connection.Open();

            foreach (XElement node in currentSet)
            {
                SqlCommand sqlCmd = new SqlCommand("INSERT INTO dbo.DatabaseName (" + dataName + ") VALUES ('" + node.Value + "')", connection);

                sqlCmd.ExecuteNonQuery();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:02:21.427

此 LINQ 将生成一个具有两个属性的对象集合

1.  学校名称

2.  学生名单（又是一个集合）

    ```
     var result = XElement.Load("data.xml")
                   .Descendants("school")
                   .Select( x => new { 
                             name = XElement.Parse(x.FirstNode.ToString()).Value,
                             students =x.Descendants("student")
                                        .Select(stud => new { 
                   id = stud.Attribute("id"),
                   name = XElement.Parse(stud.FirstNode.ToString()).Value})
               .ToList()}); 
    ```

    注意：LINQ 假定为和标记`<name>`下的第一个节点`<school>``<student>`

3.  然后你可以使用你想要的 foreach ，它会像魅力一样工作

    ```
     foreach (var school in result)
     {
        var schoolName = school.name;
        foreach (var student in school.students)
        {
                //Access student.id and student.name here                    
        }
     } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:26:41.430

对于这种使用 XML 数据的特殊类型，您可以使用 XML 序列化/反序列化。

这将允许您将 XML 数据反序列化为 IEnumerable 类对象，在该类上执行 LINQ 查询，然后保存到 SQL。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:56:20.417

**更新：**原始代码示例没有提到命名空间。在通过 XName 搜索元素时需要考虑命名空间，或者需要使用 XName.LocalName 属性进行搜索。更新了示例以显示在这种情况下如何处理选择元素。

```
namespace Stackover
{
    using System;
    using System.Xml.Linq;

    class Program
    {
        private const string Xml = @"<?xml version=""1.0"" encoding=""UTF-8""?>
<namespaceDocument xmlns=""http://www.namedspace/schemas"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://www.namedspace/schemas.xsd"">
<educationSystem>
    <school>
        <name>Primary School</name>
        <students>
            <student id=""123456789"">
                <name>Steve Jobs</name>
                <otherElements>
                    <dataA>data</dataA>
                </otherElements>
            </student>
            <student id=""987654"">
                <name>Jony Ive</name>
                <otherElements>
                    <dataB>data</dataB>
                </otherElements>
            </student>
        </students>
    </school>
    <school>
        <name>High School</name>
        <students>
            <student id=""123456"">
                <name>Bill Gates</name>
                <otherElements>
                    <dataC>data</dataC>
                </otherElements>
            </student>
            <student id=""987654"">
                <name>Steve Ballmer</name>
                <otherElements>
                    <dataD>data</dataD>
                </otherElements>
            </student>
        </students>
    </school>
</educationSystem>
</namespaceDocument>";

        static void Main(string[] args)
        {
            var root = XElement.Parse(Xml);
            XNamespace ns = "http://www.namedspace/schemas";
            foreach(var school in root.Descendants(ns + "school")) // or root.Descendants().Where(e => e.Name.LocalName.Equals("school"));
            {
                Console.WriteLine(school.Element(ns + "name").Value);

                foreach (var students in school.Elements(ns+ "students"))
                {

                    foreach (var student in students.Elements())
                    {
                        Console.WriteLine(student.Attribute("id"));
                        Console.WriteLine(student.Name); // Name = namespace + XName
                        Console.WriteLine(student.Name.LocalName); // no namespace
                    }
                }
            }
        }

    }

} 
```

# pdf - 仅通过没有颜色的 Ghostscript 将 PDF 转换为 PCL？

> ID：13305857
> 
> 赞同：1
> 
> 时间：2012-11-09T10:01:04.400
> 
> 标签：pdf, colors, ghostscript, printer-control-language

我们正在尝试使用 Ghostscript 将一些 PDF 文件转换为 PCL 文件。我们使用的命令行：

```
gswin32c -dBATCH -dNOPAUSE -sDEVICE=pxlcolor \
 -f ..\examples\pu.pdf -sOutputFile=..\examples\pu.pcl 
```

这将生成一个黑白 PCL 文件。

请帮忙，有什么问题吗？

# android - 在方向更改时处理 Fragment 的万无一失的方法

> ID：13305861
> 
> 赞同：88
> 
> 时间：2012-11-09T10:01:12.603
> 
> 标签：android, android-fragments, android-orientation

```
public class MainActivity extends Activity implements MainMenuFragment.OnMainMenuItemSelectedListener {

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager
            .beginTransaction();

    // add menu fragment
    MainMenuFragment myFragment = new MainMenuFragment();
    fragmentTransaction.add(R.id.menu_fragment, myFragment);

    //add content
    DetailPart1 content1= new DetailPart1 ();
    fragmentTransaction.add(R.id.content_fragment, content1);
    fragmentTransaction.commit();

}
public void onMainMenuSelected(String tag) {
  //next menu is selected replace existing fragment
} 
```

我需要并排显示两个列表视图，左侧是菜单，右侧是其内容。默认情况下，第一个菜单被选中，其内容显示在右侧。显示内容的 Fragment 如下：

```
public class DetailPart1 extends Fragment {
  ArrayList<HashMap<String, String>> myList = new ArrayList<HashMap<String, String>>();
  ListAdapter adap;
  ListView listview;

  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
      super.onActivityCreated(savedInstanceState);

       if(savedInstanceState!=null){
        myList = (ArrayList)savedInstanceState.getSerializable("MYLIST_obj");
        adap = new LoadImageFromArrayListAdapter(getActivity(),myList );
        listview.setAdapter(adap);
       }else{
        //get list and load in list view
        getlistTask = new GetALLListTasks().execute();
    }

     @Override
   public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.skyview_fragment, container,false);
           return v;
        }

     @Override
      public void onSaveInstanceState(Bundle outState) {
         super.onSaveInstanceState(outState);
          outState.putSerializable("MYLIST_obj", myList );
        }
    } 
```

onActivityCreated 和 onCreateView 被调用**两次**。有很多使用片段的例子。由于我是该主题的初学者，因此无法将示例与我的问题联系起来。我需要一种万无一失的方法来处理方向变化。我没有`android:configChanges`在清单文件中声明。我需要销毁并重新创建活动，以便我可以在横向模式下使用不同的布局。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-11-09T10:48:59.423

每次在活动中转动屏幕时，您都在创建一个新片段，`onCreate();`但您也使用`super.onCreate(savedInstanceState);`. 所以也许设置标签并找到片段（如果存在），或者将空包传递给超级。

这花了我一段时间来学习，当你使用像 viewpager 这样的东西时，这真的很痛苦。

我建议您多花点时间阅读有关[Fragments](http://developer.android.com/guide/components/fragments.html)的内容，因为这个主题已经涵盖了。

以下是如何处理常规方向变化的片段的示例：

**活动**：

```
public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (savedInstanceState == null) {
            TestFragment test = new TestFragment();
            test.setArguments(getIntent().getExtras());
            getSupportFragmentManager().beginTransaction().replace(android.R.id.content, test, "your_fragment_tag").commit();
        } else {
            TestFragment test = (TestFragment) getSupportFragmentManager().findFragmentByTag("your_fragment_tag");
        }
    }
} 
```

**片段**：

```
public class TestFragment extends Fragment {

    public static final String KEY_ITEM = "unique_key";
    public static final String KEY_INDEX = "index_key";
    private String mTime;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_layout, container, false);

        if (savedInstanceState != null) {
            // Restore last state
            mTime = savedInstanceState.getString("time_key");
        } else {
            mTime = "" + Calendar.getInstance().getTimeInMillis();
        }

        TextView title = (TextView) view.findViewById(R.id.fragment_test);
        title.setText(mTime);

        return view;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("time_key", mTime);
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-10-01T13:33:31.260

可以[在 android 指南中找到有关如何在方向更改和活动重新创建之间保留数据的良好指南](http://developer.android.com/guide/topics/resources/runtime-changes.html)。

概括：

1.  使您的片段可保留：

    ```
    setRetainInstance(true); 
    ```

2.  仅在必要时创建新片段（或至少从中获取数据）

    ```
    dataFragment = (DataFragment) fm.findFragmentByTag("data");

    // create the fragment and data the first time
    if (dataFragment == null) { 
    ```

# php - 如何使用backbone.js从服务器渲染数据

> ID：13305865
> 
> 赞同：1
> 
> 时间：2012-11-09T10:01:22.460
> 
> 标签：php, javascript, backbone.js

首先获取信息，这是我来自服务器的响应

```
$response = array();
            $i = 0;
            while($result = mysql_fetch_assoc($query)){
                $response[$i]["id"]             = $result["ID"];
                $response[$i]["post_date"]      = $result["post_date"];
                $response[$i]["post_content"]   = $result["post_content"];
                $response[$i]["nickname"]       = $result["nickname"];
                $i++;
            }
            echo json_encode($response); 
```

似乎@k33g_org 方式确实有效，但现在控制台说我`Uncaught ReferenceError: nickname is not defined`

我的模板是

```
<script type="text/template" id="tplhome_post_list">
            <div class="post">
                <div class="view">
                    <p class="header_post">
                        <%= nickname %> - Le <%= post_date %>
                    </p>
                    <div class="statut">
                        <div class="like">
                            8
                        </div>
                        <div class="reply">
                            25
                        </div>                          
                    </div>
                    <p class="clear">
                        <%= post_content %>
                    </p>
                </div>
            </div>
        </script> 
```

怎么解决？定义模板值？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:10:59.087

你必须这样写 fetch ：

```
Posts.fetch({
    success:function(data) {
       /* when you get data from server request data variable is populated */
       /* then you can call render() method of the view */
    }, 
    error : function(err) { 
      throw "Houston we've got a problem...";
    }
}); 
```

您可以将数据传递给渲染方法（类似这样）

```
 render : function(data) {
        var renderedContent = this.template(this.data.toJSON());
        $(this.el).html(renderedContent);
        return this;
    } 
```

或者，更好的是，您可以将集合的重置事件绑定到视图，在视图的`initialize`方法中，输入：

```
_.bindAll(this, 'render');
this.collection.bind('change', this.render);
this.collection.bind('add', this.render);
this.collection.bind('remove', this.render); 
```

然后当集合内容改变时（即获取时），`render()`被调用

# ruby - 使用 iron_worker_ruby gem 时在铁工中的继承

> ID：13305866
> 
> 赞同：2
> 
> 时间：2012-11-09T10:01:25.117
> 
> 标签：ruby, ironworker, iron.io, iron

我正在考虑使用 IronWorker 一个项目，以便我可以轻松扩展它（预计流量很大，有很多后台作业）。

为了保持干燥，我正在尝试使用继承定义工作人员，但我不断收到以下错误：

```
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- base_worker.rb (LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /task/child_worker.rb:3:in `<top (required)>'
    from /task/runner.rb:344:in `require_relative'
    from /task/runner.rb:344:in `<main>' 
```

这是基本工人类：

```
#  app/workers/base_worker.rb
require 'net/http'
require 'uri'
require 'json'

class BaseWorker < IronWorker::Base
  attr_accessor :params

  # The run method is what IronWorker calls to run your worker
  def run
    data = custom_run(params)
    common_post_process(data)
  end

   def custom_run(params)
     #to be overwritten in the child class 
   end    

   def common_post_process(data)
      # some common post processing => DRY
      ....
   end       
end 
```

这是一个子类：

```
# app/workers/child_worker.rb 
require 'net/http'
require 'uri'
require 'base_worker.rb'

class ChildWorker  <  BaseWorker
  merge "base_worker.rb"

  def custom_run(params)
     #custom work
  end

end 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:58:24.307

我建议使用我们的下一代 gem，iron_worker_ng：[https](https://github.com/iron-io/iron_worker_ruby_ng) ://github.com/iron-io/iron_worker_ruby_ng 。不推荐使用 iron_worker gem。如果你想保持与你所拥有的风格相似，你的 child_worker.rb 可能看起来像这样：

```
require 'net/http'
require 'uri'
require_relative 'base_worker.rb'

class ChildWorker  <  BaseWorker

  def custom_run(params)
     #custom work
  end

end

# NG gem doesn't run anything in particular, so to run your method:
cw = ChildWorker.new
cw.custom_run(params) 
```

在一个`child_worker.worker`文件中：

```
runtime 'ruby'

file 'base_worker.rb'
exec 'child_worker.rb' 
```

然后将其上传到 IronWorker：

```
iron_worker upload child_worker 
```

然后你可以开始为它排队工作：

```
worker = IronWorkerNG::Client.new
worker.tasks.create("child_worker", params) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T11:47:13.120

如果使用`iron_worker_ng`，也可以定义一个`run`方法。IronWorker 运行时将调用此方法。您必须在`.worker`文件中指定类。

```
# child_worker.rb
class ChildWorker
  def run
    puts "doing the hard work"
  end
end 
```

和`child_worker.worker`文件：

```
# child_worker.worker
runtime 'ruby'
name 'ChildWorker'
exec 'child_worker.rb', 'ChildWorker' 
```

# sql - 如果更新值为空，则不更新列

> ID：13305878
> 
> 赞同：54
> 
> 时间：2012-11-09T10:02:00.590
> 
> 标签：sql, postgresql, null, sql-update

我有这样的查询（在函数中）：

```
UPDATE some_table SET
  column_1 = param_1,
  column_2 = param_2,
  column_3 = param_3,
  column_4 = param_4,
  column_5 = param_5
WHERE id = some_id; 
```

`param_x`我的函数的参数在哪里。有没有办法不更新参数为的那些列`NULL`？例如，如果`param_4`和`param_5`是`NULL`，则只更新前三列并为和保留旧`column_4`值`column_5`。

我现在的做法是：

```
SELECT * INTO temp_row FROM some_table WHERE id = some_id;

UPDATE some_table SET
  column_1 = COALESCE(param_1, temp_row.column_1),
  column_2 = COALESCE(param_2, temp_row.column_2),
  column_3 = COALESCE(param_3, temp_row.column_3),
  column_4 = COALESCE(param_4, temp_row.column_4),
  column_5 = COALESCE(param_5, temp_row.column_5)
WHERE id = some_id; 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-11-09T11:29:10.317

去掉 SELECT 语句，不需要，直接使用当前值即可：

```
UPDATE some_table SET
  column_1 = COALESCE(param_1, column_1),
  column_2 = COALESCE(param_2, column_2),
  column_3 = COALESCE(param_3, column_3),
  column_4 = COALESCE(param_4, column_4),
  column_5 = COALESCE(param_5, column_5)
WHERE id = some_id; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-19T00:38:39.920

巧妙的技巧，感谢 Przemek、Frank 和 Erwin！

我建议对 Erwin 的回答稍作修改，以避免空更新。如果任何参数为空（意思是：“使用旧值”），则每次都会更新该行，即使行值没有改变（在第一次更新之后）。

通过添加“param_x IS NOT NULL”，我们避免了空更新：

```
UPDATE some_table SET
    column_1 = COALESCE(param_1, column_1),
    column_2 = COALESCE(param_2, column_2),
    ...
WHERE id = some_id
AND  (param_1 IS NOT NULL AND param_1 IS DISTINCT FROM column_1 OR
      param_2 IS NOT NULL AND param_2 IS DISTINCT FROM column_2 OR
     ...
 ); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-09T20:11:05.140

此外，为避免*空*更新：

```
UPDATE some_table SET
  column_1 = COALESCE(param_1, column_1),
  column_2 = COALESCE(param_2, column_2)
  ...
WHERE id = some_id;
AND  (param_1 IS DISTINCT FROM column_1 OR
      param_2 IS DISTINCT FROM column_2 OR
      ...
     ); 
```

这假定要定义目标列`NOT NULL`。否则，请参阅[Geir 的扩展版本](https://stackoverflow.com/a/13943827/939860)。

# c# - 并行访问多个mysql数据库

> ID：13305885
> 
> 赞同：0
> 
> 时间：2012-11-09T10:02:33.907
> 
> 标签：c#, mysql, threadpool

我的问题是关于。是否可以一次连接到不同的mysql数据库并并行访问数据库？我使用 C# 对其进行编码。如果是这样，请引导我完成我可以学习的地方。我整天都在寻找它，但我找不到任何真正的解决方案。

# jquery - 将 AJAX 响应带到新页面

> ID：13305888
> 
> 赞同：2
> 
> 时间：2012-11-09T10:02:54.673
> 
> 标签：jquery, ajax, json

我正在使用 AJAX 来获取 JSON 数据。用户填写带有一些地址的表单，这些地址使用 AJAX 发布。根据状态，响应将是`"status": "fail"`，`"status": "unknown"`或`"status": "success"`+ 很多其他内容。每个状态都应该导致一个新页面加载响应的其余部分。

我的问题是将数据获取到新页面。

```
$.ajax({
  url:"https://domain.local/",
  type:"POST",
  crossDomain: true,
  dataType: "json",
  data : data,
  headers: {
    'Content-Type': "application/json; charset=utf-8"
  },
  success: function(data) {
    if (data.result.Status == " fail ") {
      // head to fail.php and show response
    }

    else if (data.result.Status == " unknown ") {
      // head to unknown.php and show response
    }

    else if (data.result.Status == " success ") {
      // head to succes.php and show response
    }
   }
}); 
```

有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:11:08.493

*   在 java 脚本中动态创建一个表单。带有隐藏字段。
*   将响应的数据放在隐藏字段中。
*   发布到可以简单读取隐藏字段值并显示它的页面。
*   强制将表单数据发布到新选项卡中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:14:43.107

**使用 Cookie**：

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

**将自己的属性附加到 Window 对象中**：

[http://www.w3schools.com/jsref/obj_window.asp](http://www.w3schools.com/jsref/obj_window.asp)

```
if (data.result.Status == " fail ") {
  window.myOwnData = data;
  window.location.href = "fail.php";
} 
```

**将您的数据作为重定向 url 的 GET 参数传递**

```
if (data.result.Status == " fail ") {
  window.location.href = "fail.php?someData=" + data + "&someOtherData=" + otherData ;
} 
```

**编辑**

或者使用**JSSession**，在这里讨论：[Persist javascript variables across pages？](https://stackoverflow.com/questions/1981673/persist-javascript-variables-across-pages)

我想还有更多选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:14:45.587

您可以使用`window.location.href`指定要重定向的页面

```
if (data.result.Status == " fail ") {
      window.location.href = "http://xyz.com/fail.php";
    }

    else if (data.result.Status == " unknown ") {
      window.location.href = "http://xyz.com/unknown.php";
    }

    else if (data.result.Status == " success ") {
      window.location.href = "http://xyz.com/success.php";
    } 
```

# jquery - jQuery DDoS 预防

> ID：13305889
> 
> 赞同：-1
> 
> 时间：2012-11-09T10:02:59.107
> 
> 标签：jquery, codeigniter, ddos

我在我的 Codeigniter 项目中使用这个例子，想知道如何防止人们使用下面的代码进行 DDoS 风格的攻击？我应该更改下面的代码还是应该在我的 Codeigniter 控制器中做些什么？

还有一件事，哪种方法更好？

**版本 1：**

```
var form_data = $(this).serialize();
$.post('ci_class/ci_method', form_data, function(response) 
```

**版本 2：**

```
$(document).ready(function()
{
    $("#img_search").click(function(event)
    {
        event.preventDefault();

        var p    = $('#text_postcode').attr('value');
        var hash = $('#hidden_hash').attr('value');

        $.ajax({
            type        : 'POST',
            url     : 'ci_class/ci_method',
            data        : 'pc=' + pc + '&hash=' + hash,
            dataType    : 'json',
            success     : function(response)
            { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:10:24.540

您不能在客户端代码中做任何事情来防止 DDoS 攻击，因为这样的攻击无论如何都不会使用客户端代码。

关于哪种方法更好，这取决于您认为哪种方法更好。

第一种方法更简单，并且可以动态地适应您在表单中输入的任何字段。

第二种方法更精确，只将需要的数据准确发送到服务器，但缺点是当您添加另一个要发送到服务器的字段时，您必须更新代码。

* * *

提示：您可以使用该`val`方法代替`attr('value')`：

```
var p = $('#text_postcode').val();
var hash = $('#hidden_hash').val(); 
```

您可以将值放在对象文字中，而不是连接字符串来形成数据：

```
data: { pc: pc, hash: hash }, 
```

# c# - 使用 Ajax 进行 Javascript 数据库验证

> ID：13305893
> 
> 赞同：0
> 
> 时间：2012-11-09T10:03:10.160
> 
> 标签：c#, javascript, asp.net, validation

感谢[我之前提出的问题](https://stackoverflow.com/questions/13303614/show-confirmation-textbox-after-entry-with-javascript)，在用户在以前的文本框中输入文本后，我已经成功地显示了一个新的文本框。

现在，我只想在原始 TextBox 中的文本经过验证后才显示新的 TextBox。
验证将确保原始 TextBox 中的数据不在数据库中。

文本框位于`Ajax Update Panel`. 不幸的是，我不能使用`AutoPostBack`事件，因为它有效地重置了 JavaScript，即使使用`function pageLoad()` .

我想使用 JavaScript 来验证数据库，并且到目前为止使用了以下代码：

**Text.aspx 上的 JavaScript**

```
<script type="text/javascript">
        function pageLoad() {
            $('#<%: txtRegisterEmail.ClientID %>').on('blur', function () {
                $.ajax({
                    type: "POST",
                    url: "Test.aspx/CheckEmail",
                    data: "{Email: '" + ('#<%: txtRegisterEmail.ClientID %>').value + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: OnSuccess,
                    failure: function(response) {
                        alert(response);
                    }
                });
            });
        }

        function OnSuccess(response) {
            $('#<%: txtRegisterEmailConfirm.ClientID %>').slideDown();
        }
        //'input[name$="txtRegisterEmailConfirm"]'
    </script> 
```

**测试.aspx.cs**

```
[System.Web.Services.WebMethod]
public static bool CheckEmail(string Email)
{
    int counter = 0;
    const string strSql = "SELECT memberEmail FROM vwGetMemberDetails";

    using (SqlCommand sqlComm = new SqlCommand(strSql, DataConn.Connect()) { CommandType = CommandType.Text })
    {
        using (SqlDataReader rdr = sqlComm.ExecuteReader())
        {
            while (rdr.Read())
            {
                counter = counter + 1;
            }
        }
    }

    return counter > 0;
} 
```

这段代码唯一做的就是显示文本框（似乎没有验证）。我怎样才能使这项工作？

# java - 通过相似的列值为网格着色

> ID：13305896
> 
> 赞同：3
> 
> 时间：2012-11-09T10:03:31.937
> 
> 标签：java, gwt, gxt

使用 Ext GWT 2，如何通过相似的列值为 Grid 着色？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T03:55:49.873

您的意思是要根据单元格值指定网格内单元格的背景颜色吗？您可以使用 GridCellRenderers 为每个单独的单元格修改 CSS 样式。

在这里，我通过基于 rowIndex 的样式属性定义背景颜色，以执行粗略的（和可怕的彩色）行带配色方案。

```
 final ColumnConfig colConfig = new ColumnConfig("myProperty", "My Property", 250 );
  colConfig.setRenderer( new GridCellRenderer<MyModelModel >() {

    @Override
    public Object render(
      final MyModelModel model,
      final String property,
      final ColumnData config,
      final int rowIndex,
      final int colIndex,
      final ListStore<MyModelModel> store,
      final Grid<MyModelModel> grid) {

    final String valueToDisplay = "Some Value";

    if( rowIndex % 2 == 0 ) {
      config.style = "background-color: pink;";
    }
    else {
      config.style = "background-color: blue;";
    }

    return valueToDisplay;
    }
  }); 
```

您还可以使用 config.css 来指定 CSS 类名。

# ruby - 同事更改后，TextMate 不再与 .rvmrc 一起使用

> ID：13305904
> 
> 赞同：-1
> 
> 时间：2012-11-09T10:03:49.510
> 
> 标签：ruby, rvm, textmate, rvmrc

前段时间，我们的`.rvmrc`文件看起来像这样（非常默认）：

```
#!/usr/bin/env bash

# This is an RVM Project .rvmrc file, used to automatically load the ruby
# development environment upon cd'ing into the directory

# First we specify our desired <ruby>[@<gemset>], the @gemset name is optional,
# Only full ruby name is supported here, for short names use:
#     echo "rvm use 1.9.3" > .rvmrc

#environment_id="ruby-1.9.3-p0@iq"
environment_id="ruby-1.9.3-p0"

# Uncomment the following lines if you want to verify rvm version per project
# rvmrc_rvm_version="1.14.1 (master)" # 1.10.1 seams as a safe start
# eval "$(echo ${rvm_version}.${rvmrc_rvm_version} | awk -F. '{print "[[ "$1*65536+$2*256+$3" -ge "$4*65536+$5*256+$6" ]]"}' )" || {
#   echo "This .rvmrc file requires at least RVM ${rvmrc_rvm_version}, aborting loading."
#   return 1
# }

# First we attempt to load the desired environment directly from the environment
# file. This is very fast and efficient compared to running through the entire
# CLI and selector. If you want feedback on which environment was used then
# insert the word 'use' after --create as this triggers verbose mode.
if [[ -d "${rvm_path:-$HOME/.rvm}/environments"
  && -s "${rvm_path:-$HOME/.rvm}/environments/$environment_id" ]]
then
  \. "${rvm_path:-$HOME/.rvm}/environments/$environment_id"
  [[ -s "${rvm_path:-$HOME/.rvm}/hooks/after_use" ]] &&
    \. "${rvm_path:-$HOME/.rvm}/hooks/after_use" || true
else
  # If the environment file has not yet been created, use the RVM CLI to select.
  rvm --create  "$environment_id" || {
    echo "Failed to create RVM environment '${environment_id}'."
    return 1
  }
fi

# If you use bundler, this might be useful to you:
# if [[ -s Gemfile ]] && {
#   ! builtin command -v bundle >/dev/null ||
#   builtin command -v bundle | GREP_OPTIONS= \grep $rvm_path/bin/bundle >/dev/null
# }
# then
#   printf "%b" "The rubygem 'bundler' is not installed. Installing it now.\n"
#   gem install bundler
# fi
# if [[ -s Gemfile ]] && builtin command -v bundle >/dev/null
# then
#   bundle install | GREP_OPTIONS= \grep -vE '^Using|Your bundle is complete'
# fi 
```

为了和 RubyMine 一起使用，一位同事将其更改为以下

```
rvm ruby-1.9.3-p0 --create 
```

不好的是，当从文件夹中执行文件时，我的 TextMate 现在会自动切换到 Ruby 1.8.7，因此它不再适用于此（但之前，它通过将`TM_RUBY`变量设置为 来实现`/Users/josh/.rvm/bin/rvm-auto-ruby`）。由于我是唯一的 TextMate 用户，我现在只能自己找出问题所在。有人有想法吗？

当我删除`.rvmrc`文件时，它会加载默认的 RVM ruby​​ 版本 - 如果它在那里，它会加载系统 ruby​​ (1.8.7)。

我还尝试了[rvm page 上](https://rvm.io/integration/textmate/)描述的包装方法，但这也加载了系统 ruby​​ (1.8.7)。

谢谢你的帮助！乔什

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-09T23:53:15.523

查看[RVM 站点 Texmate 集成中的文档](https://rvm.io/integration/textmate/)

# c++ - 如何在保持文档打开的同时关闭 MFC CVIEW

> ID：13305907
> 
> 赞同：0
> 
> 时间：2012-11-09T10:03:52.513
> 
> 标签：c++, visual-studio-2010, mfc, document-view

我在 MDI 应用程序中打开了 MFC CDocument 和关联的 CView。我想分离并关闭视图（和关联的框架），同时保持文档打开。查看 MFC 代码以了解它是如何执行的，在 CDocument::OnCloseDocument(); 中显示以下内容

```
// destroy all frames viewing this document
// the last destroy may destroy us
BOOL bAutoDelete = m_bAutoDelete;
m_bAutoDelete = FALSE;  // don't destroy document while closing views
while (!m_viewList.IsEmpty())
{
    // get frame attached to the view
    CView* pView = (CView*)m_viewList.GetHead();
    ASSERT_VALID(pView);
    CFrameWnd* pFrame = pView->EnsureParentFrame();

    // and close it
    PreCloseFrame(pFrame);
    pFrame->DestroyWindow();
        // will destroy the view as well
}
m_bAutoDelete = bAutoDelete; 
```

我想我可以将它与 CDocument::RemoveView 结合使用。有没有比仅仅提升 MFC 源更好的方法来解决这个问题，这种方法会不会给我带来其他问题或副作用？该项目是VS2010 C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:23:41.973

如果您将 CDocument::m_bAutoDelete 设置为 FALSE（在创建文档之后），它不应该在最后一个视图关闭时删除文档。

我不确定您具体要做什么，但您可能需要考虑创建一个单独的“数据”对象，该对象可以附加到文档中，而不是试图保留文档本身。

# java - 保存 EventQueue 事件并恢复

> ID：13305908
> 
> 赞同：1
> 
> 时间：2012-11-09T10:03:54.730
> 
> 标签：java, swing, mouseevent, eventqueue

是否可以从事件队列中保存待处理的事件然后恢复它们？

有以下工作流程：用户单击 JTable 行并检查行是否更改，这取决于打开的检查模式确认窗口。当用户双击行详细视图时打开。因此，当打开模式窗口时，它会吞下所有鼠标事件，因此双击不会到达 JTable。

我想在打开模式窗口之前以某种方式保存事件队列中的所有待处理事件，并在模式窗口关闭后恢复它们。

以下我试过

```
EventQueue eventQueue = Toolkit.getDefaultToolkit().getSystemEventQueue();
Stack<AWTEvent> events = new Stack<AWTEvent>();
PaintEvent pe = new PaintEvent(DetailPanel.this, PaintEvent.PAINT, new Rectangle(10, 10));
eventQueue.postEvent(pe);
while (eventQueue.peekEvent() != null) {
    AWTEvent event = eventQueue.getNextEvent();
    events.push(event);
}
..... // modal window code
while(!events.isEmpty()) {
    eventQueue.postEvent(events.pop());
} 
```

这没有帮助，双击不会到达 JTable。

我也尝试推动整个队列：

```
EventQueue stackQueue = new EventQueue();
EventQueue eventQueue = Toolkit.getDefaultToolkit().getSystemEventQueue();
stackQueue.push(eventQueue);
... //modal window code
eventQueue.push(stackQueue); 
```

在这种情况下，程序似乎陷入僵局。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:25:29.800

似乎我发现了问题。不应该有`Stack`，只是普通的先进先出收集。

因此，遵循架构正确保存和恢复事件

```
EventQueue eventQueue = Toolkit.getDefaultToolkit().getSystemEventQueue();
List<AWTEvent> events = new ArrayList<AWTEvent>();
eventQueue.postEvent(new PaintEvent(DetailPanel.this, PaintEvent.PAINT, new Rectangle(10, 10));
while (eventQueue.peekEvent() != null) {
    events.add(eventQueue.getNextEvent());
}
..... // modal window code
For (AWTEvent event : events) {
    eventQueue.postEvent(event);
} 
```

# ruby-on-rails - 如何将当前日期添加到我在 Ruby 中的每个页面

> ID：13305909
> 
> 赞同：2
> 
> 时间：2012-11-09T10:03:57.390
> 
> 标签：ruby-on-rails

我对红宝石相当陌生，我希望能够以格式（1 月 1 日星期一）在我的每个页面上显示当前日期。另外，我必须编辑哪些文件？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:08:21.607

只需使用以下代码向您的布局文件 (/app/views/layouts/application.html.erb) 添加一个元素：

```
<%= Date.today.strftime("%A %-d %B") %> 
```

# jquery - jquery ajax 加载每个帖子

> ID：13305915
> 
> 赞同：1
> 
> 时间：2012-11-09T10:04:34.977
> 
> 标签：jquery, ajax, wordpress, load

我正在开发一个 wordpress 主题，其中包含来自精选帖子的一些内容的 ajax 加载，这些内容将在点击或其他触发帖子图像后显示在主页上。

基本上是这样的：

```
<ul id="posts">
<li class="post">
    <a href="post_url" class="image_link"><img src="images/featured_image.jpg" /><a href="#">
    <a href="#">title</a>
    <div class="ajax_loaded_info"></div>
</li>
<li class="post">
    <a href="post_url" class="image_link"><img src="images/featured_image.jpg" /><a href="#">
    <a href="#">title</a>
    <div class="ajax_loaded_info"></div>
</li>
<li class="post">
    <a href="post_url" class="image_link"><img src="images/featured_image.jpg" /><a href="#">
    <a href="#">title</a>
    <div class="ajax_loaded_info"></div>
</li>
</ul> 
```

jquery代码是这样的：

```
$(".image_link").click(function () {
    $(".ajax_loaded_info").load($(this).attr("href") + " .title");
}); 
```

它确实成功加载了内容，但它为所有帖子显示了相同的内容（最后一篇帖子）。

我试图寻找解决方案并尝试一些没有成功的东西。希望你们能在这里帮助我。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:07:25.213

给你，一个带有“this”的简单子查询，看起来没有太大变化，但试试看：）

```
$(".image_link").each(function(){
    $(this).click(function () {
        $(".ajax_loaded_info",this).load($(this).attr("href") + " .title");
    });
}) 
```

# javascript - 最短的js重定向？

> ID：13305917
> 
> 赞同：1
> 
> 时间：2012-11-09T10:04:50.327
> 
> 标签：javascript

如果我只有 32 个字符的空间，包括 URL 和`<script></script>`标签，是否可以使用 Javascript 编写重定向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:08:06.773

是的，如果您的网址不超过 21 个字符：

```
location='up to 21 chars in URL' 
```

例如：

```
location='http://google.com' 
```

这是有效的，因为`location`是 的一个属性`window`，并且 的所有属性`window`都是全局变量。分配一个 URL 字符串`location`将浏览器带到那里。

[实例](http://jsbin.com/abumit/1)| [来源](http://jsbin.com/abumit/1/edit)

您可以使用多种 URL 缩短服务（[bit.ly](http://bit.ly)、[goo.gl](http://goo.gl)等）中的任何一种来保持您的 URL 足够短。

如果您知道要重定向的页面的协议对于重定向是可接受的，则可以保存五个字符：

```
location='//google.com' 
```

[实例](http://jsbin.com/abumit/2)| [来源](http://jsbin.com/abumit/2/edit)

如果您所在的页面以 开头`http:`，那将带您到`http://google.com`; 如果它以 开头`https:`，那将带您到`https://google.com`. 等[详细信息](http://blog.niftysnippets.org/2011/01/skipping-protocol.html)

# unix - wget不会下载实际文件

> ID：13305921
> 
> 赞同：2
> 
> 时间：2012-11-09T10:05:01.103
> 
> 标签：unix, download, wget

我已经环顾了很长一段时间，还没有弄清楚如何解决这个问题。

我正在尝试从网站下载文件，但只会返回“index.html”。这对我来说没用，因为我需要实际的文件。我一直在使用类似的命令

```
wget --no-check-certificate -nc -nH -r -k -p -np  --cut-dirs=3 \https://websitename/directory/folder_of_interest/ 
```

（我在`.wgetrc`文件中设置了我的用户名和密码）。上面的代码将返回递归目录，最后一个就是 index.html 文件。

我真的可以在这里用一只手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:26:59.790

在你的问题中，你有

```
wget \https://websitename/directory/folder_of_interest 
```

这原本可能是

```
wget \
  https://websitename/directory/folder_of_interest 
```

这是正确的，因为反斜杠正在转义换行符，但在您的示例中，它是否错误地转义了`h`. 删除反斜杠或将 URL 移动到下一行。

# iphone - UIImage 碰撞后不需要的移动

> ID：13305932
> 
> 赞同：4
> 
> 时间：2012-11-09T10:05:42.637
> 
> 标签：iphone, xcode, timer, uiimage, collision

好的，这是我的第一篇文章，我对 Xcode 和 Objective C 还是很陌生。过去几周我一直在自学。无论如何，我通过制作一个小游戏来练习，您可以在其中控制直升机并收集掉落的硬币。不过，我在使用对象碰撞方法时遇到了一些麻烦。最大的问题是，成功碰撞后，直升机会自动移回其起始位置，这是我不想要的。我希望 Helicopter UIImage 留在它的新位置。我已经检查了我的代码的每一行，我没有在哪里调用以在其原始位置重新创建 Helicopter.frame。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *UserMoveTouch = [touches anyObject];
    CGPoint pos = [UserMoveTouch locationInView: self.view];
    if(pos.x<356)
    {
        [UIView beginAnimations:@"CopterMoveTo" context:NULL];
        [UIView setAnimationDuration: .5];
        [UIView setAnimationBeginsFromCurrentState:YES];

        CopterPlayer.center = [UserMoveTouch locationInView:self.view];

        [UIView setAnimationDelegate:self];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
        [UIView commitAnimations];
    }
}

-(void)CopterCollisionCheck
{
    if(CGRectIntersectsRect(Coin1.frame, CopterPlayer.frame))
    {
        SystemSoundID soundID;
        NSString *CoinSound=[[NSBundle mainBundle]
                             pathForResource:@"GetCoin" ofType:@"wav"];
        AudioServicesCreateSystemSoundID((__bridge CFURLRef)
                                         [NSURL fileURLWithPath:CoinSound], & soundID);
        AudioServicesPlaySystemSound(soundID);
        Coin1.frame=CGRectMake(Coin1.center.x+150,15,20,23);
        if (MultiplierX==1)
        {
            ScoreValue=ScoreValue+1;
        }
        else if(MultiplierX==2)
        {
            ScoreValue=ScoreValue+2;
        }
        else if(MultiplierX==3)
        {
            ScoreValue=ScoreValue+3;
        {
    }
    ScoreValueLabel.text = [NSString stringWithFormat:@"%d",ScoreValue];

}

-(void)CopterCollisionTimer
{
    [NSTimer scheduledTimerWithTimeInterval:0.35 target:self            
    selector:@selector(CopterCollisionCheck) userInfo:nil repeats:YES];
} 
```

如果我在粘贴代码时忘记了括号或其他东西，我很抱歉，而不是用于格式化本网站上的帖子。记住第一个 noobie 帖子！非常感谢帮助！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:28:11.913

pshhh 这表明我是多么的笨拙......没有意识到在游戏过程中不断更改标签文本值会使 UIImages 吓坏了。将其更改为文本字段，一切都很好:)

# twitter - 在 twitter api 1.1 中进行的更改

> ID：13305937
> 
> 赞同：0
> 
> 时间：2012-11-09T10:05:54.450
> 
> 标签：twitter

谁能解释一下 API v1.1 中要进行的基本重要更改

我想开发一个使用 Twitter API.v1.1 的 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:19:22.957

你看过1.1版的概述吗？[https://dev.twitter.com/docs/api/1.1/overview](https://dev.twitter.com/docs/api/1.1/overview)

*   仅支持 JSON（不再支持 XML、Atom 或 RSS）

*   所有端点都需要身份验证（要求应用程序使用 OAuth 1.0a 对所有请求进行身份验证）

*   默认实体和转发（如果适用，现在将默认返回实体和转发）

# java - Java中的抽象对象比较

> ID：13305940
> 
> 赞同：0
> 
> 时间：2012-11-09T10:06:26.427
> 
> 标签：java, object, abstract-class, comparable

我正在为抽象对象实现一个堆。现在我能够实现一个堆栈，因为堆栈不需要比较。但是堆需要比较。所以我有`Object A`和`Object B`。我可以确保它们`Object`属于`heap`同一个类，并且可以对它们进行排序（即该类有一个`compareTo`要知道的函数`if A<B, A=B, or A>B)`。但是如果我使用`A.compareTo(B)`，我会收到一个语法错误，说它`compareTo`不是为对象定义的。我做了一些研究，发现Object没有实现Comparable。我该如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:10:08.237

如果您的所有对象都是实现的共同祖先的后代怎么办`Comparable`？因此，在这种情况下，您可以在代码中使用该类型 not `Object`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:10:28.877

对象没有实现可比性。`Comparable`您应该创建实现接口的MyObject 。

```
class MyObject implements Comparable<Object>{
    ...
    @Override
    public int compareTo(Object arg0) {
        //  custom logic
        return 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:12:56.280

**-**你可以让那个类实现`java.lang.Comparable`接口`Object`作为**类型参数**

```
public class Test implements Comparable<Object>{

    public int compareTo(Object o){

       // 

    }

} 
```

# xaml - 如何在 WinRT GridView 中获取 ItemContainer 的实际大小

> ID：13305941
> 
> 赞同：0
> 
> 时间：2012-11-09T10:06:29.203
> 
> 标签：xaml, gridview, windows-8, windows-runtime

似乎每个项目容器之间都有间距，容器中还有边距和填充。我的问题是如何计算 GridView 中 ItemContainer 的实际大小，以便我可以计算网格可以容纳多少行。我能得到的是每个 ItemTemplate 的高度和网格的高度。给定这些值，如何计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:18:35.773

如果您创建模板 Grid App，请添加对 winrtxamltoolkit 调试组件的 NuGet 引用，并通过设置在 Standard250x250ItemTemplate 中添加断点

```
Debugging:VisualTreeDebugger.BreakOnLoaded="True" 
```

在哪里

```
xmlns:Debugging="using:WinRTXamlToolkit.Debugging" 
```

您将在 VS 的输出窗口中看到像这样的可视化树跟踪：

```
path[8] is Control: Windows.UI.Xaml.Controls.GridViewItem():
    ActualWidth=258
    ActualHeight=258
    Position – X=376, Y=176, Right=634, Bottom=434
    DataContext: Item Title: 3 HashCode: 9648315
    HorizontalAlignment=Stretch
    VerticalAlignment=Stretch
    HorizontalContentAlignment=Center
    VerticalContentAlignment=Center
    Content=Item Title: 3
    Margins=0,0,2,2
    Padding=0,0,0,0
    Background=SolidColorBrush: #00FFFFFF
    Foreground=SolidColorBrush: #FFFFFFFF
    FontFamily: Segoe UI
path[7] is Control: Windows.UI.Xaml.Controls.Border(OuterContainer):
    ActualWidth=258
    ActualHeight=258
    Position – X=376, Y=176, Right=634, Bottom=434
    DataContext: Item Title: 3 HashCode: 9648315
    HorizontalAlignment=Stretch
    VerticalAlignment=Stretch
    Margins=0,0,0,0
path[6] is Control: Windows.UI.Xaml.Controls.Grid(ReorderHintContent):
    ActualWidth=258
    ActualHeight=258
    Position – X=376, Y=176, Right=634, Bottom=434
    DataContext: Item Title: 3 HashCode: 9648315
    HorizontalAlignment=Stretch
    VerticalAlignment=Stretch
    Margins=0,0,0,0
    Background=SolidColorBrush: #00FFFFFF
path[5] is Control: Windows.UI.Xaml.Controls.Border(ContentContainer):
    ActualWidth=258
    ActualHeight=258
    Position – X=376, Y=176, Right=634, Bottom=434
    DataContext: Item Title: 3 HashCode: 9648315
    HorizontalAlignment=Stretch
    VerticalAlignment=Stretch
    Margins=0,0,0,0
path[4] is Control: Windows.UI.Xaml.Controls.Grid(InnerDragContent):
    ActualWidth=258
    ActualHeight=258
    Position – X=376, Y=176, Right=634, Bottom=434
    DataContext: Item Title: 3 HashCode: 9648315
    HorizontalAlignment=Stretch
    VerticalAlignment=Stretch
    Margins=0,0,0,0
    Background=
path[3] is Control: Windows.UI.Xaml.Controls.Border(ContentBorder):
    ActualWidth=250
    ActualHeight=250
    Position – X=380, Y=180, Right=630, Bottom=430
    DataContext: Item Title: 3 HashCode: 9648315
    HorizontalAlignment=Stretch
    VerticalAlignment=Stretch
    Margins=4,4,4,4
path[2] is Control: Windows.UI.Xaml.Controls.Grid():
    ActualWidth=250
    ActualHeight=250
    Position – X=380, Y=180, Right=630, Bottom=430
    DataContext: Item Title: 3 HashCode: 9648315
    HorizontalAlignment=Stretch
    VerticalAlignment=Stretch
    Margins=0,0,0,0
    Background=
path[1] is Control: Windows.UI.Xaml.Controls.ContentPresenter(contentPresenter):
    ActualWidth=250
    ActualHeight=250
    Position – X=380, Y=180, Right=630, Bottom=430
    DataContext: Item Title: 3 HashCode: 9648315
    HorizontalAlignment=Center
    VerticalAlignment=Center
    Margins=0,0,0,0
path[0] is Control: Windows.UI.Xaml.Controls.Grid():
    ActualWidth=250
    ActualHeight=250
    Position – X=380, Y=180, Right=630, Bottom=430
    DataContext: Item Title: 3 HashCode: 9648315
    Width=250
    Height=250
    HorizontalAlignment=Left
    VerticalAlignment=Stretch
    Margins=0,0,0,0
    Background= 
```

现在，由于该项目模板使用 250x250 Grid 作为其根，并且 GridView 使用具有默认 ItemContainerStyle 的默认样式 - 似乎默认 GridViewItem 样式有一个名为 ContentBorder 的边框，它定义了“4”的边距。根据您的网格项目的配置方式，您可以使用该知识以不同的方式计算您正在寻找的大小。

如果您定义一个恒定大小的 ItemTemplate - 就像 Grid App 项目模板中的 250x250 一样 - 您最终会得到占据 258x258 方格空间的项目。如果您更改 ItemContainerStyle 以更改每个 ContentBorder 周围的边距 - 您将不得不调整您的计算。如果您没有为 ItemTemplate 指定恒定大小 - 您的项目大小将基于添加到 GridView 的第一个项目。

您可以使用 Blend 更详细地分析控件模板，或使用 VisualTreeDebugger、XAML Spy 或您自己的代码，使用 VisualTreeHelper 遍历可视化树来了解有关布局的更多信息。

# iphone - AppStore 和以下应用的替代品

> ID：13305942
> 
> 赞同：1
> 
> 时间：2012-11-09T10:06:38.290
> 
> 标签：iphone, app-store

我得到了开发一个简单的 iPhone 应用程序的提议，该应用程序将使用用户的凭据调用 Web 服务。用户将获得可以下载的文件列表 (.pdfs)，然后可以下载想要的文件。够简单...

现在，我在 AppStore 上发布的经历很糟糕。基本上，他们拒绝了一个应用程序，因为根据他们的说法，我们用于在线报纸的 RSS 阅读器不符合他们的指导方针。他们说该应用程序是一个简单的网络聚合器，我现在不会争论。现在不要 ：）

所以，回到新应用程序问题 :) **我想知道分发新应用程序的选项是什么**。客户有一个网页，并希望给它的访问者这个应用程序来从他们的手机中获取数据。从技术上讲，该应用程序不必是本机应用程序。它也可以是 phoneGap 解决方案，因为它的功能非常简单。真诚的，恐怕苹果不会允许这个应用程序以原生方式上传到他们的商店，phoneGap ......

PS我还想知道有没有办法分发“内部”（不公开）iPhone应用程序？例如，一家公司需要为其 500 名员工提供内部工具，但无法承担连接每台设备并为每台设备单独编译应用程序的过程......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:17:28.887

对于内部：

100 个测试设备。

在 100 台设备之后具有分布配置文件的许多 iphone

与企业：

[https://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:24:18.270

如果您想向公司销售定制应用程序，您应该考虑**B2B 计划**。

如果您所在的企业想要在公司内部部署应用程序，**企业开发人员计划**是一个不错的选择。

# python - 在 Python 中通过 abstractmethod 声明所需的 mixin？

> ID：13305946
> 
> 赞同：0
> 
> 时间：2012-11-09T10:06:49.397
> 
> 标签：python, mixins

我有一个“部分”类，它的功能需要一些 mixin（出于性能和简单性的原因，我想通过继承来实现）。我可以声明我的班级需要新方法吗？

显然以下猜测不起作用（“无法实例化抽象类”）：

```
from abc import abstractmethod, ABCMeta

class A(metaclass=ABCMeta):
    @abstractmethod
    def a(self):
        pass

class B:
    def a(self):
        return 12

class C(A, B):
    pass

c = C() 
```

这里`A`试图声明它的其他方法需要`a()`工作。(Python 3)

对声明有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:19:02.753

您需要在继承顺序中放在`B`前面`A`才能使其工作：

```
>>> from abc import abstractmethod, ABCMeta

>>> class A:
...     __metaclass__=ABCMeta
...     @abstractmethod
...     def a(self):
...         pass

>>> class B:
...     def a(self):
...         return 12

>>> class C(B,A):
...     pass

>>> c = C()
>>> c
<__main__.C object at 0x10e9c40d0>

>>> class D:
...     pass

>>> class E(D, A):
...     pass

>>> e = E()
Traceback (most recent call last):
  File "<input>", line 1, in <module>
TypeError: Can't instantiate abstract class E with abstract methods a 
```

# wpf - 为什么 WPF Margins 会裁剪控件？

> ID：13305948
> 
> 赞同：0
> 
> 时间：2012-11-09T10:06:52.627
> 
> 标签：wpf, wpf-controls, visual-studio-2012

**请看更新**

我有以下 WPF 控件。

```
<Grid>
    <Label Content="Report Generator" Margin="0,0,0,294"/>
    <TextBox Name="FilePath" Width="300" Height="25" Margin="10,30,207,264"/>
    <Button Width="75" Click="Browse" Margin="335,30,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Height="25" Content="Browse" />
    <Button Width="75" Height="25" Click="Extract" Margin="432,30,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Content="Extract" />
    <ProgressBar x:Name="ExtractBar" Margin="10,70,107,204"/>
    <Label x:Name="FirstEntityCount" Content="Number of Type1 Entities: " Margin="0,191,0,98" />
    <Label x:Name="SecondEntityCount" Content="Number of Type2 Entities: " Margin="0,226,0,65" />
</Grid> 
```

我在 Visual Studio 2012 设计器中快速将其组合在一起。目标框架是 .Net 4.5，这是一个 WPF 窗口。它是对现有解决方案的补充。

问题是，如果我不删除第 3 和第 4 个边距（例如 Margin="a,b,c,d"，将 c 和 d 设置为 0），然后指定`VerticalAlignment="Top"`并`HorizontalAlignment="Left"`裁剪控件。

请参阅下面的附图。![缺少控件的部分](../Images/519de5ca364eeddbc91dca28907be523.png)

我可以通过将边距设置为 0 并设置对齐来纠正此问题，但我想知道为什么默认情况下会发生这种情况？我真的只是拖放。这些控件在 Visual Studio 2012 中显示正常。

运行 Windows 8 RTM。

**更新**

我的问题不是为什么现在边距有效，为什么以前没有（我知道它们似乎已设置，因此它们裁剪了实际控制本身）；我只是在问为什么这个复杂的 IDE 把它弄得一团糟……它发生在 2 次重建中……据我记得，它也发生在 Expression Blend 中。我会仔细检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:04:54.717

当您从设计器拖放时，无论是在 Visual Studio 还是 Expression blend 中，设计器都会尝试将元素放置在控件在设计器图面上放置的*确切位置。*当设计者放置元素时，边距用于相对于包含元素定位控件。

将控件拖到设计图面上时通常会重置边距。在 Blend 和 VS 中，您可以通过单击属性中的小方块并选择重置来将任何属性重置为其默认设置。

同意设计师设置的边距有点烦人；但是，不确定在使用视觉设计器进行拖放时如何处理。

就个人而言，我倾向于在手写 XAML 和设计器之间切换；最近，我更多地使用 Blend，因为它可以通过使用对象和时间线面板来控制 XAML 中几乎任何元素的位置。

顺便说一句，要清理 Blend XAML 的疯狂，请为 Visual Studio 安装[XAML Styler](http://xamlstyler.codeplex.com/)扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:22:07.343

通过设置顶部和底部的边距，您可以强制标签具有特定的高度。碰巧这个高度不足以显示您在标签中放置的文本的高度。我认为如果你稍微减少下边距，你会发现它很合适。

在不相关的说明中，使用 Grid.Row 和 Grid.Column 将控件放置在此 Grid 上而不是在技术上将它们全部放在 (0,0) 位置然后使用边距来定位它们不是更好吗？

# ios - 自定义注释的属性在委托方法中不可见

> ID：13305949
> 
> 赞同：0
> 
> 时间：2012-11-09T10:06:55.427
> 
> 标签：ios, nsstring, mkmapview, mkannotationview, mkpinannotationview

我有许多自定义注释，我向其提供了属性（NameTable 和 ID）。我在 AddAnnotation 创建的那一刻之前设置了这个属性，但是这些属性在委托方法中不再可见。我有多个注释与从数据库中获取的表元素相关联。如何使它们在委托方法中可见？

```
 - (void)viewDidLoad
{

     //......

   for(int i=0; i<6; i++){ //loop for create multiple annotations

   AnnotationCustom *annotationIcone =[[AnnotationCustom alloc]initWithCoordinates:coord 
               title:self.myTable.title subTitle:self.myTable.address];

        annotationIcone.nameTable = [NSString stringWithFormat:@"%@", self.myTableName];
        annotationIcone.ID = i+1;

    [self.mapView addAnnotation: annotationIcone;

     //.....
   } 
```

但是在委托方法中：

```
 (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id 
   <MKAnnotation>)annotation
    {

     NSLog(@"The name of table is:@"%@", annotation.nameTable);
     //property 'nameTable' not found on object of type '_strong id <MKAnnotation>

     NSLog (@The name of table is:@%@", annotation.ID);
     //property 'ID' not found on object of type '_strong id <MKAnnotation>

         //......
     } 
```

在另一种方法中：

```
 - (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{

       NSLog(@"The name of table is %@", self.myTableName);
       // here I get the name of last table open and not the name of table selected

      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:23:33.347

在 viewForAnnotation 中，您需要告诉编译器该注解实际上是一个 AnnotationCustom 对象。

所以你首先需要这样做：

```
AnnotationCustom *annotationCustom = (AnnotationCustom *)annotation; 
```

然后尝试访问 nameTable 属性..

在 didSelectAnnotationView 方法中，如果您想要获取所选注解的 nameTable 值，您需要执行以下操作：

```
AnnotationCustom *annotationCustomSelected = (AnnotationCustom *)view.annotation;
NSLog(@"table name of annotation selected: %@", annotationCustomSelected.nameTable); 
```

# android - 无法在 Android 应用中使用 jwplayer

> ID：13305952
> 
> 赞同：5
> 
> 时间：2012-11-09T10:07:05.337
> 
> 标签：android, jwplayer

我正在开发一个 Android 应用程序，我想从 URL 动态播放一些视频。所以我在布局中放置了一个 web 视图并查看了一个包含 jwplayer 代码但 jwplayer 不存在的 html 文件，并且 web 视图只显示“正在加载播放器....”。我不明白问题出在哪里。

我的[VideoView 代码](http://pastebin.com/874jHFLG)在这里

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class VideoActivity extends Activity {
/** Called when the activity is first created. */
WebView sampleWeb;
String htmlText;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.web);

    sampleWeb=(WebView)findViewById(R.id.webView);
    WebSettings webSettings=sampleWeb.getSettings();

    sampleWeb.getSettings().setJavaScriptEnabled(true);
    sampleWeb.getSettings().setBuiltInZoomControls(false);

    sampleWeb.getSettings().setLoadsImagesAutomatically(true);

    sampleWeb.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    sampleWeb.getSettings().setAllowFileAccess(true);
    sampleWeb.getSettings().setPluginsEnabled(true);
    sampleWeb.setWebViewClient(new WebViewClient());

  //  sampleWeb.loadUrl("m.google.com");
    htmlText="<!DOCTYPE html> ";
    htmlText+="<html lang='en'>";
    htmlText+="<head><meta charset='utf-8'>";

    htmlText+="</head>";
    htmlText+="<body style='margin:0; pading:0;background-color: #ffffff;'>";
    htmlText+="<div style='color:black'>Loading the player ...</div>";
    htmlText+="<script type='text/javascript' src='http://shourav.com/android/jwplayer.min.js'></script>";

    htmlText+="<div id='mediaspace'>This text will be replaced</div>";

    htmlText+="<script type='text/javascript'>";
    htmlText+="jwplayer('mediaspace').setup({";
    htmlText+="'flashplayer': 'http://developer.longtailvideo.com/svn/trunk/fl5/player.swf',";
    htmlText+="'file': 'http://shourav.com/android/android.MP4',";
   // htmlText+="'streamer': 'rtmp://b27i9s9t3.rtmphost.com/AndroidMedia',";
    htmlText+="'controlbar': 'bottom',";
    htmlText+="'width': '200',";
    htmlText+="'height': '150'";
    htmlText+="});";
    htmlText+="</script>";

    htmlText+="</body>";
    sampleWeb.loadData(htmlText, "text/html", "utf-8");

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T07:04:03.550

你可以参考下面的代码并做到这一点..我希望这个例子能帮助你摆脱这个..

```
 private void createVideoHtml(File flvDirectory, File htmlFile, String videofilename)
{
    String htmlPre = "<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></head><body style='margin:0; padding:0;'>";  
    String htmlCode =
            "<script type='text/javascript' src='"+ flvDirectory.getAbsolutePath() + "/jwplayer.js'></script>" +
            "<div id='mediaspace'>EZ Stream TV FLV Player</div>" +
            "<script type='text/javascript'>" +
            "jwplayer('mediaspace').setup({" +
            "'flashplayer': '"+ flvDirectory.getAbsolutePath() + "/player.swf', 'file': '" + videofilename + "', 'backcolor': 'FFFFFF', 'frontcolor': '000000', 'lightcolor': '000000'," +
            "'screencolor': '000000', 'volume': '100', 'autostart': 'true', 'mute': 'false', 'quality': 'false', 'controlbar': 'bottom', 'width': '100%', 'height': '100%'," +
            "events: { " +
            "onComplete: function() { alert('COMPLETED');}" +
            "}});" +
            "</script>";
    String htmlPost = "</body></html>";
    String finalHTML = htmlPre + htmlCode + htmlPost;

    try {
        FileWriter f = new FileWriter(htmlFile);
        PrintWriter p = new PrintWriter(f);
        p.print(finalHTML);
        p.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

webView = (WebView)findViewById(R.id.web_player);
    webView.getSettings().setBuiltInZoomControls(false);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setLoadsImagesAutomatically(true);
    webView.getSettings().setPluginsEnabled(true);
    webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    webView.getSettings().setAllowFileAccess(true);
    webView.setInitialScale(60);
    webView.setBackgroundColor(Color.BLACK);
    getWindow().addFlags(128);
    webView.getSettings().setUserAgentString("Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)");
    webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

    webView.setWebChromeClient(new WebChromeClient() {  
        @Override  
        public boolean onJsAlert(WebView view, String url, String message, final android.webkit.JsResult result)  
        {  
            Log.d(TAG, message);
            new AlertDialog.Builder(view.getContext()).setMessage(message).setCancelable(true).show();
            result.confirm();
            return true;
        }
    }); 
```

# python - 是否有任何资源可以让 Python 2.7 开发人员跟上 Python 3.3 的速度？

> ID：13305956
> 
> 赞同：1
> 
> 时间：2012-11-09T10:07:31.830
> 
> 标签：python, python-3.x, python-2.7, python-3.3

过去几年我一直在使用 python 2.7。我使用了很多与 Python 3 不兼容的库，我的总体感觉是它对我来说还不够稳定。

最近我听到很多人谈论 Python 3.3 有多好，我意识到也许我落后太久了。

那么，对于像我这样一直停留在 2.7 直到现在的人来说，要了解语法差异、新标准库功能和惯用代码的一般问题，主要资源是什么？

编辑：

正如@PhilH 所建议的那样，最好对使用 python 3.3 优于 2.7 的主要优点发表一些评论，以及关于可以在可读性、性能等方面产生差异的 python 3.3 功能的提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T10:20:43.110

每个 3.x 版本的“最新消息”文档是最好的地方。例如，版本 3.3 刚刚发布，[新功能](http://docs.python.org/3.3/whatsnew/3.3.html)页面有很好的描述......新功能。总体上还有另一个描述 3.x。谷歌会为你找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:39:48.637

[Dive Into Python 3](http://getpython3.com/diveintopython3/)是一个起点，它也是免费的。此外，Mark Lutz 的经典之作[Learning Python，第 4 版](https://rads.stackoverflow.com/amzn/click/com/0596158068)明确涵盖了 2 和 3 之间的差异，无论它们出现在哪里。

# python - 使用 nosetests --processes 生成 xml 输出

> ID：13305959
> 
> 赞同：2
> 
> 时间：2012-11-09T10:07:50.497
> 
> 标签：python, unit-testing, nose

我正在努力`nosetests`输出`xml`。

我已经安装了`nosexml`，然后按`PYTHONPATH`输入`ln -s /usr/lib/python2.7/xml/etree/ elementtree`。

现在我可以输入`nosetests -plugins`并获取插件列表，包括`xunit`.

如果我跑

```
nosetests  --with-xunit test.py 
```

然后我得到一个带有测试结果的文件'nosetests.xml'。所以我试着按如下方式流鼻涕，

```
nosetests  --with-xunit --processes=1 --process-timeout=8000 test.py 
```

并得到一个文件'nosetests.xml'，上面写着没有测试运行。

```
<?xml version="1.0" encoding="UTF-8"?><testsuite name="nosetests" tests="0" errors="0" failures="0" skip="0"></testsuite> 
```

我可以`--with-xunit`与其他选项一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T12:34:15.817

最近出现了解决方案 - [xunitmp](https://github.com/Ignas/nose_xunitmp)。检查 - 对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:40:04.060

这是xunit 插件中的一个[错误。](https://github.com/nose-devs/nose/issues/2)据我所知，它并没有固定，所以目前没有办法同时使用`--processes`和`--with-xunit`选项。

# c++ - directx 无法构建 Windows 8

> ID：13305962
> 
> 赞同：0
> 
> 时间：2012-11-09T10:07:55.993
> 
> 标签：c++, windows-8, visual-studio-2012

按照这个例子：

[http://www.directxtutorial.com/Lesson.aspx?lessonid=111-1-2](http://www.directxtutorial.com/Lesson.aspx?lessonid=111-1-2)

我输入了要运行的第一组大代码以获得一个基本窗口（代码在链接中）。尝试构建后，我收到以下错误：

*   错误 1 ​​错误 LNK2019：未解析的外部符号**imp** _CrtDbgReportW 在函数“void __cdecl Microsoft::WRL::Details::CheckForDuplicateEntries >(struct Microsoft::WRL::Details::CreatorMap const * *,struct Microsoft::WRL::详细信息::CreatorMap const * *,class )" (??$CheckForDuplicateEntries@V@@@Details@WRL@Microsoft@@YAXPAPBUCreatorMap@012@0V@@@Z) c:\Users\Paul Lewis 2\Documents\Visual工作室 2012\Projects\DxGame\DxGame\vccorlibd.lib(init.obj)

*   错误 2 error LNK1120: 1 unresolved externals c:\Users\Foobar 2\Documents\Visual Studio 2012\Projects\DxGame\Debug\DxGame\DxGame.exe 1

有谁知道发生了什么？

**更新**

[http://msdn.microsoft.com/en-us/library/windows/apps/br229582.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229582.aspx)产生相同的错误。

**我正在使用 Windows 8 Pro (64) 和 VS2012 Ultimate**

# php - CSS 和 JS 不使用 mod_rewrite 加载

> ID：13305963
> 
> 赞同：1
> 
> 时间：2012-11-09T10:07:56.013
> 
> 标签：php, mod-rewrite

我正在使用 apache 的 mod_rewrite 模块将我的 URL 结构（例如`www.mydomainname.com/user.php?u=somename`- ）改进为一些花哨的 URL，例如`www.mydomainname.com/user/somename`. 我已经成功地实现了它，直到我遇到 CSS 和 JS 相对路径问题的这种非常糟糕的情况。每当我打开时`www.mydomainname.com/user/somename`，它在没有 CSS 和 JS 的情况下成功加载，只有文本和基本 HTML。我使用了 chrome 的“检查元素”功能，它可以帮助我了解发生的以下错误。

```
GET http://www.mydomainname.com/user/css/style.css 404 (Not Found) somename:5
GET http://www.mydomainname.com/user/css/developer.css 404 (Not Found) somename:6
GET http://www.mydomainname.com/user/js/jquery-1.5.2.js 404 (Not Found) somename:7
GET http://www.mydomainname.com/user/js/jquery.form.js 404 (Not Found) somename:5 
```

.htaccess 文件具有以下内容-

```
DirectoryIndex index.html.php
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule    ^user/([^/.]+)/?$    user.php?u=$1    [L] 
```

user.php 位于父文件夹以及 CSS 和 JS 文件夹中。我知道了原因，但不知道如何消除错误。

**编辑**：user.php 文件中给出的 CSS 和 JS 的路径是 -

```
<link type = "text/css" rel = "stylesheet" href = "css/style.css">
<link type = "text/css" rel = "stylesheet" href = "css/developer.css">
<script type="text/javascript" src="js/jquery-1.5.2.js"></script>
<script type="text/javascript" src="js/jquery.form.js"></script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T10:30:22.277

尝试添加绝对路径（只需`/`在 URL 的开头添加）：

```
<link type = "text/css" rel = "stylesheet" href = "/css/style.css">
<link type = "text/css" rel = "stylesheet" href = "/css/developer.css">
<script type="text/javascript" src="/js/jquery-1.5.2.js"></script>
<script type="text/javascript" src="/js/jquery.form.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T10:11:30.713

尝试

```
 DirectoryIndex index.html.php
 RewriteEngine on
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule    ^user/([^/.]+)/?$    user.php?u=$1    [L] 
```

我相信您允许对文件的请求，但不允许对目录的请求。JS/CSS 文件位于子目录中。

// 更新您正在使用的相对路径是问题所在。

您为路径粘贴的代码实质上是在**当前文件夹**的子文件夹中查找此 css 文件。子文件夹不存在，因此出现错误。

将您的代码更改为以下内容。

```
<link type = "text/css" rel = "stylesheet" href = "/css/style.css">
<link type = "text/css" rel = "stylesheet" href = "/css/developer.css">
<script type="text/javascript" src="/js/jquery-1.5.2.js"></script>
<script type="text/javascript" src="/js/jquery.form.js"></script> 
```

这将转换为从根文件夹中查找文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-09T10:18:09.050

你不必担心它。您可以从 apache 打开“httpd.conf”文件。并从下一行删除哈希。

例子：

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

改变它：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

# php - 使用 Wordpress 发送电子邮件

> ID：13305964
> 
> 赞同：5
> 
> 时间：2012-11-09T10:07:55.420
> 
> 标签：php, wordpress, sendmail

我尝试了很多不同的方法，但无法使用该`mail()`函数通过 PHP 中的 SMTP 成功发送电子邮件。

```
 <?php
require_once ABSPATH . WPINC . '/class-phpmailer.php';
require_once ABSPATH . WPINC . '/class-smtp.php';
$phpmailer = new PHPMailer();
$phpmailer->SMTPAuth = true;
$phpmailer->Username = 'skchourasia@asselslutions.com';
$phpmailer->Password = 'password01';

$phpmailer->IsSMTP(); // telling the class to use SMTP
$phpmailer->Host       = "mail.asselsolutions.com"; // SMTP server
$phpmailer->FromName   = $_POST[your_email];
$phpmailer->Subject    = $_POST[your_subject];
$phpmailer->Body       = $_POST[your_message];                      //HTML Body
$phpmailer->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
$phpmailer->WordWrap   = 50; // set word wrap
$phpmailer->MsgHTML($_POST[your_message]);
$phpmailer->AddAddress('support@wordpressapi.com/files/', 'Wordpress support');
//$phpmailer->AddAttachment("images/phpmailer.gif");             // attachment
if(!$phpmailer->Send()) {
 echo "Mailer Error: " . $phpmailer->ErrorInfo;
} else {
 echo "Message sent!"; 
}
$to = $_REQUEST['to'];
$subject = $_REQUEST['subject'];
$message =  $_REQUEST['message'];
$from = $_REQUEST['from'];
$headers = "From:" . $from;

$mail = mail($to,$subject,$message,$headers);

echo "Mail Sent.";
 ?> 
```

我究竟做错了什么？我收到以下错误：

> 解析错误：语法错误，第 8 行 C:\xampp\htdocs\wp-vtr\wp-content\themes\twentyeleven\content.php 中的意外 T_VARIABLE

```
 $phpmailer->IsSMTP(); // telling the class to use SMTP" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:35:12.987

这个：

```
$phpmailer->FromName   = $_POST[your_email];
$phpmailer->Subject    = $_POST[your_subject];
$phpmailer->Body       = $_POST[your_message]; 

$phpmailer->MsgHTML($_POST[your_message]); 
```

应该是这样的：

```
$phpmailer->FromName   = $_POST['your_email'];
$phpmailer->Subject    = $_POST['your_subject'];
$phpmailer->Body       = $_POST['your_message']; 

$phpmailer->MsgHTML($_POST['your_message']); 
```

无论如何，您似乎正在尝试通过 PHPMailer 类和 mail() 本机 PHP 函数发送电子邮件。您可能只是在测试，但我不确定您要做什么。

# java - 从照片裁剪自定义形状

> ID：13305966
> 
> 赞同：0
> 
> 时间：2012-11-09T10:08:15.617
> 
> 标签：java, android, path, imageview, android-canvas

我需要在屏幕上有一个 Android 应用程序，`ImageView`并且用户应该能够绘制由曲线组成的自定义（闭合）形状（类似于圆形/椭圆形）来选择图像上的对象。然后必须将形状保存到`String`（如 M123,21L23,30C100,29...）。有谁知道如何做到这一点？或者只是指出我正确的方向。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:52:35.677

如果您只想在您的上绘制另一个位图`ImageView`并且它不应该是动态的，那么使用`AbsoluteLayout`并将它们放置在彼此之上。

如果它应该更加动态，我建议使用**SurfaceView**。可以在此处找到教程：[从照片中自定义形状](http://www.droidnova.com/playing-with-graphics-in-android-part-i,147.html)

# assembly - 8位汇编有符号乘法

> ID：13305967
> 
> 赞同：0
> 
> 时间：2012-11-09T10:08:16.890
> 
> 标签：assembly, inline-assembly

我不知道如何完成这个问题：

编写一个汇编程序来执行所有 8X8 位的有符号组合。请记住，我们已经签署了 16X16 位操作，但我们没有 8X8 位。此外，您必须在程序中使用 MUL。

这就是我所做的：

```
ORG $2000
MULTIA LDDA #$60
   BMI CMPA
MULTIB LDDB #$A5
   BMI CMPB

MORE ........

CMP NEGA
    BRA MULTIB
CMPB NEGB
    BRA MORE 
```

我的问题是，如果我将数字相乘，我不知道如何让程序获取答案的第二个补码，因为并非所有情况都需要这样做。

我正在使用 HC12/9S12 组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:14:46.113

如果您有 16x16 有符号乘法，那么您所要做的就是将输入符号扩展为 16 位并将输出截断为 8 位（可能检测溢出）。您在任何地方都不需要 2 的补码转换。如果您只有无符号乘法，您将需要它。尽管如此，也要回答这个问题：您只需翻转所有位并添加一个。

# gwt - adfs 和 gwt webapp 集成

> ID：13305971
> 
> 赞同：0
> 
> 时间：2012-11-09T10:08:29.410
> 
> 标签：gwt, callback, single-sign-on, adfs2.0

我想使用 adfs 登录。场景是这样的： 1\. 用户访问我的网络应用程序链接，点击它会有一个登录按钮，调用将进入 adfs。2\. 如果 adfs 会话已经建立，那么它应该使用类似于 facebook 中的图形将我重定向回我的应用程序，我可以从中验证用户并使用我的应用程序。3\. 如果 adfs 会话不存在，它将提供 adfs 登录屏幕，然后登录后它将重定向回应用程序，并带有一些类似对象的图形。

我想在不使用 openam 或 opensso 或 Shibboleth 的情况下实现上述场景。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:10:28.437

您的网络应用程序是 ASP.NET？如果是这样，您需要添加 WIF。

当用户访问受保护的页面时，WIF 会拦截呼叫并将您重定向到 ADFS 登录屏幕。

您的应用程序中通常没有登录按钮（尽管有一些方法可以伪造它）。

关于“类似图形的东西” - 不确定您指的是什么，但 ADFS 可以返回驻留在 AD 或 SQL DB 中的任何属性，例如名称、电子邮件等。

**更新**

你可以走两种方式：

*   安装诸如 OpenAM 或 PingFederate 之类的东西，它们将处理您的 Java 应用程序并与 ADFS 联合
*   使用[About the Oracle OpenSSO Fedlet](http://docs.oracle.com/cd/E17842_01/doc.1111/e17847/about.htm)或 OpenAM 之一，

# d - D 语言是否完全依赖于 D 运行时？

> ID：13305972
> 
> 赞同：8
> 
> 时间：2012-11-09T10:08:34.933
> 
> 标签：d, druntime

最近一直在学习D语言。我一直对运行时感到困惑。

从我能收集到的关于它的信息中，（这不是很多）我知道它是一种有助于 D 的某些功能的运行时。像垃圾收集一样，它与您自己的程序一起运行。但是既然 D 被编译成机器码，如果我们的程序不需要的话，它真的需要垃圾回收等功能吗？

真正让我感到困惑的是以下陈述：

> “你可以用 D 编写操作系统。”

我知道你不能真正做到这一点，因为操作系统比任何编译语言在不使用汇编的情况下所能提供的更多。但是如果你有一个调用 D 代码的内核，D 运行时会阻止 D 在这样的准系统环境中运行吗？还是 D 运行时比这更简单？是否可以将其简单地视为源文件/库的“自动”包含，当与您的应用程序一起编译时，与您自己编写该代码没有什么不同？

也许我只是看错了。但我确信有关该主题的一些信息可以使很多人受益。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T10:14:36.820

是的，确实，您可以在您的主模块（或任何地方）中实现编译器期望的 DRuntime 功能，无需运行时编译，它就可以正常工作（tm）。

如果您只是在没有运行时的情况下构建代码，编译器会在缺少它期望由运行时实现的符号时发出错误。然后你可以去看看 DRuntime 是如何实现它的，看看它做了什么，然后以你喜欢的任何方式实现它。这就是 XOmB，用 D 语言编写的内核（虽然是语言版本 1，但同样的交易）所做的：http://xomb.net/index.php?title= [Main_Page](http://xomb.net/index.php?title=Main_Page)

很多 DRuntime 实际上并没有被许多应用程序使用，但它是将 D 的运行时组件包含到应用程序中的最方便的方式，所以这就是为什么它作为静态库（希望将来成为共享库）完成的原因。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T10:15:26.570

它与我期望的 C 和 C++ 几乎相同。该语言本身编译为本机代码并运行。但是有一些代码总是需要设置所有东西来运行你的程序，例如处理命令行参数。

通过调用一些标准代码而不是在使用它的任何地方生成代码，可以更好地实现一些更复杂的语言设施。例如抛出异常需要找到相关的处理函数。毫无疑问，编译器可以在任何使用它的地方插入代码，但在库中编写代码并调用它更明智。此外，标准库中有许多预先编写的库函数。

所有这些加在一起就是运行时。

如果您编写 C，您可以使用它来编写操作系统，因为您可以自己编写启动代码，您可以自己编写所有用于处理内存分配的代码，您可以自己编写标准函数（如 strcat）的所有代码，而不是使用在运行时提供的。但是你不想对任何应用程序这样做。

# jaxb - 在列表的编组中排除外部节点

> ID：13305973
> 
> 赞同：1
> 
> 时间：2012-11-09T10:08:39.643
> 
> 标签：jaxb

```
public class Group {
    //many other fields
    public List<Person> persons;
}

public class Person {
    public String name; ...
} 
```

当我编组时，我想获得一堆 Person 节点：

> ```
> <person>
>     <name>..</name>
> </person>
> <person>
>     <name>..</name>
> </person> 
> ```

而不是这个：（一个以人节点为子节点的人节点）

> ```
> <persons>
>     <person>
>       <name>..</name>
>     </person>
>     <person>
>       <name>..</name>
>     </person>
> <persons> 
> ```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:02:10.243

**更新**

如果您指的`persons`是分组元素而不是根元素，则默认情况下[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不会添加一个。

**组（无分组元素）**

```
package forum13305973;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Group {
    //many other fields
    @XmlElement(name="person")
    public List<Person> persons = new ArrayList<Person>();
} 
```

**人**

```
package forum13305973;

public class Person {
    public String name;
} 
```

**演示**

```
package forum13305973;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Group.class);

        Group group = new Group();

        Person person1 = new Person();
        person1.name = "Jane";
        group.persons.add(person1);

        Person person2 = new Person();
        person2.name = "John";
        group.persons.add(person2);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(group, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<group>
    <person>
        <name>Jane</name>
    </person>
    <person>
        <name>John</name>
    </person>
</group> 
```

* * *

**组（带分组元素）**

您需要添加`@XmlElementWrapper`注释以获取分组元素

```
package forum13305973;

import java.util.*;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class Group {
    //many other fields
    @XmlElementWrapper
    @XmlElement(name="person")
    public List<Person> persons = new ArrayList<Person>();
} 
```

**输出（带分组元素）**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<group>
    <persons>
        <person>
            <name>Jane</name>
        </person>
        <person>
            <name>John</name>
        </person>
    </persons>
</group> 
```

* * *

**原始答案**

您可以执行以下操作：

```
 JAXBContext jc = JAXBContext.newInstance(Person.class);
    Marshaller marshaller = jc.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true); // format output
    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true); // remove header

    for(Person person : group.persons) {
        marshaller.marshal(person, System.out);
    } 
```

# c++ - 在表达式树中添加一元运算符

> ID：13305981
> 
> 赞同：1
> 
> 时间：2012-11-09T10:09:43.043
> 
> 标签：c++, tree, expression

我正在做我的任务，我必须修改我以前的任务（这是前缀表达式树，它接受表达式并给出结果）

```
+ OR
* AND
- NOT 
```

现在我必须使它成为逻辑表达式树，它将执行 AND OR 和 NOT 操作

```
char input;
    cin.get(input);

    if((input == '+')||(input == '-')||(input == '*'))
        {
        p = new ExprTreeNode(input,NULL,NULL);
         buildSub(p->left);
         buildSub(p->right);
      }
      else if(isdigit(input))
        {     //create a new node
            p = new ExprTreeNode(input,NULL,NULL);
        }
        else
      {
        cout <<" invalid expression exiting..." <<endl;
         exit (1);
       } 
```

上面的代码读取表达式并使用递归生成树...

我很困惑如何添加不是的一元运算符......之后我必须评估表达式

```
int answer;
    switch (p->dataItem){

        case '*':
            // AND
        case'+':
            // OR

        case '-':
            // Reverse

        default:
            answer = (p->dataItem-'0');
            break;
    }
    return answer; 
```

p 是 ExprTreeNode

```
// Data members
        char dataItem;          // Expression tree data item
        ExprTreeNode *left,     // Pointer to the left child
                     *right;    // Pointer to the right child 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:37:44.927

我会说你想做以下事情：

```
if ((input == '+') || (input == '*'))
{
  p = new ExprTreeNode(input,NULL,NULL);
  buildSub(p->left);
  buildSub(p->right);
}
else if (input == '-')
{
  p = new ExprTreeNode(input, NULL, NULL);
  buildSub(p->left);
}
else if(isdigit(input))
{     //create a new node
  p = new ExprTreeNode(input,NULL,NULL);
}
else
{
  cout <<" invalid expression exiting..." <<endl;
  exit (1);
} 
```

**编辑：** 然后，评估程序可以像这样工作：

```
bool ExprTreeNode::evaluate() {
  switch (dataItem) {
    case '+':
      return left->evaluate() || right->evaluate();
    case '*':
      return left->evaluate() && right->evaluate();
    case '-':
      return !left->evaluate();
    case '0':
      return false;
    default:
      return true;
  }
} 
```

# android - Notification.BigPictureStyle 与三星 Galaxy S III 上未正确呈现的操作

> ID：13305982
> 
> 赞同：2
> 
> 时间：2012-11-09T10:09:43.740
> 
> 标签：android, notifications

我在 SGS III 上遇到了这个问题。我的应用在 Galaxy Nexus 和 Nexus 7 上运行良好，但在 SGS III 上存在未正确呈现的操作。见附图。

有人知道如何解决吗？

请注意，位图是 450 * displayDensity 宽和 450/2 * displayDensity 高。

![Notification.BigPictureStyle 在三星 Galaxy SIII 上的操作显示不正确](../Images/5d4ff2f5072b0d01bc9abc9e6418ed12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:10:13.263

我最终得到了模拟标准外观的自定义 RemoteViews。不是很好的解决方案，但也给了我如何添加三个以上动作的方法。

# sharepoint-2010 - 回发后重新加载/刷新页面。SharePoint，可视化 Web 部件（沙盒）

> ID：13305984
> 
> 赞同：0
> 
> 时间：2012-11-09T10:09:51.187
> 
> 标签：sharepoint-2010, postback, web-parts, sandbox

我有一个可视化的 Web 部件（沙盒），可以可视化用于添加子站点的表单。当添加子站点时，它会添加到导航和 DropDownlist 中（用于删除目的......）。

我的问题是回发后一切正常，除了我必须手动重新加载页面以查看新更改（导航和下拉列表）。请注意，**Response.Redirect**或**UpdatePanel**都不能在沙盒解决方案中工作。

有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:40:02.890

当您执行回发时，您的浏览器会将所有 Web 控件的内容提交给服务器。从这个意义上说，服务器是*无状态*的；控件的状态实际上存储在您的浏览器中。我会说您的问题发生是因为 Web 控件不是从 SharePoint 对象模型填充的。相反，服务器使用接收到的数据作为回发。或者，人口甚至可能发生，但回发数据将覆盖控件的内容。

解决方案是在从回发数据填充控件*之后*刷新控件数据。例如，您可以在*OnPreRender*方法中执行此操作。调用 OnPreRender 时，所有回发数据都已处理完毕。

尝试在您的 webpart 类中添加以下代码。

```
protected override void OnPreRender(EventArgs args)
{
    if (this.Page.IsPostBack)
    {
        // Repopulate controls here
    }
} 
```

当然，这个问题是重新填充将杀死控件的先前（回发）状态。因此，如果要保留控件的当前值（例如下拉选择），则必须在重新填充之前将其保存并手动恢复。

要了解有关 ASP.NET 中页面生命周期的更多信息，请参阅[ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)。

# android - 单行有 2 个文本视图的列表视图

> ID：13305985
> 
> 赞同：1
> 
> 时间：2012-11-09T10:10:01.420
> 
> 标签：android, list

在我的应用程序中，我正在解析 XML 中的数据。并将它们映射到哈希映射中，最后设置为“ArrayList”。

下面是我的代码：

```
ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
      TaplistingParser parser = new TaplistingParser();
      String xml= parser.getXmlFromUrl(URL);
      Document doc=parser.getDomElement(xml);        
//      System.out.println("sssss="+doc);
      NodeList nl=doc.getElementsByTagName("article");
      final String[] url= new String[nl.getLength()];
      for(int i=0; i < nl.getLength(); i++ )
      {
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        map.put("Title", parser.getValue(e, "title"));       -------->
        map.put("Date", parser.getValue(e, "create_date"));  -------->Here is the array

        url[i]=parser.getValue(e, "url");
//          map.put("URL", parser.getValue(e, "url"));
        menuItems.add(map);
//          System.out.println("items="+menuItems);
      }  
//      System.out.println("items="+menuItems);
      ListView l1= (ListView)findViewById(R.id.list);
      ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.homelistrow,
            new String[] {"Title"}, new int[] 
                    {
                    R.id.name_label});              
            l1.setAdapter(adapter); 
```

现在在上面的代码中我有日期和标题。

我必须像这样显示列表：

```
2012-11-09
qqqqqqqqqqqqqqqq
------------------
2012-11-09
ddddddddddddddd
----------------- 
```

如何在列表中的 2 个文本视图中显示 2 个数组。我是新手，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:43:35.943

您应该实现自己的适配器，它将扩展 ArrayAdapter。

然后在其中，您的 getView() 方法应如下所示

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;

    if (row == null)
    {
        // ROW INFLATION
        LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.buddy_list_item, parent, false);
    }

    // Get item
    Buddy buddy = getItem(position);
    buddy.refresh();

    buddyName = (TextView) row.findViewById(R.id.buddy_name);
    buddyName.setText(buddy.toString()); //set the first line somehow

    buddyStatus = (TextView) row.findViewById(R.id.buddy_mood);
    buddyStatus.setText(buddy.getMood());  //set the second line

    return row;
} 
```

然后您需要一个 buddy_list_item.XML 文件，该文件将包含两个 TextView - buddy_name 和 buddy_mood。我认为您可以使用 simple_list_2，但我是这样做的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <CheckedTextView
        android:id="@+id/buddy_name"
        android:layout_width="fill_parent"
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:checkMark="?android:attr/textCheckMark"
        android:gravity="center_vertical"
        android:paddingLeft="6dip"
        android:paddingRight="6dip"
        android:text="@string/buddy_name"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/buddy_mood"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/empty_string"
        android:layout_marginLeft="-350dp"
        android:layout_marginTop="16dp"
        android:gravity="center_vertical|bottom"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

现在只需弄清楚如何充分利用它:)

编辑：

PS你知道你可以给适配器任何它需要的东西吗？所以你甚至可以这样做

```
public YourArrayAdapter(Context context, int textViewResourceId, HashMap yourMap)
{
    super(context, textViewResourceId, objects);
    this.context = context;
    this.buddies = objects;
    //do something with the map or delegate demapping to the adapter
} 
```

然后稍后在 getView() 中，您实际上执行了从地图中获取数据所需的操作，而不是从地图中获取数据并从中制作 ArrayAdapter。

# session - session_register - 已弃用

> ID：13305986
> 
> 赞同：-2
> 
> 时间：2012-11-09T10:10:06.147
> 
> 标签：session, php

> **可能重复：**
> [如何修复 session_register() DEPRECATED 问题？](https://stackoverflow.com/questions/3682615/how-to-fix-the-session-register-deprecated-problem)

我已经更改了托管服务提供商，但我没有 php 5.4 - 因此 session_register 已被弃用。我坚持我将如何更改下面的代码。有人可以帮忙吗？

```
 $id = $row["id"];   
    session_register('id'); 
    $_SESSION['id'] = $id;
    // Get member username into a session variable
        $firstname = $row["firstname"];   
    session_register('firstname'); 
    $_SESSION['firstname'] = $firstname; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:11:22.680

只需删除`session_register`线条。只要你打过电话`session_start()`就没有问题。

```
session_start();
...
...
$id = $row["id"];   
$_SESSION['id'] = $id;

// Get member username into a session variable
$firstname = $row["firstname"];   
$_SESSION['firstname'] = $firstname; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:13:41.877

试试这个：

```
session_start();
$id = $row["id"];   
//session_register('id');     
$_SESSION['id'] = $id;
// Get member username into a session variable
$firstname = $row["firstname"];   
//session_register('firstname'); 
$_SESSION['firstname'] = $firstname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:17:44.993

从您的代码中删除`session_register();`，而不是使用`$_SESSION`数组。 `$_SESSION`条目会自动注册因此您修改的代码将如下所示

```
session_start(); // if you have not started already
$_SESSION['id'] = $row["id"]; 
$_SESSION['firstname'] = $row["firstname"]; 
```

# javascript - jQuery/JavaScript 程序在完成号更改后中断

> ID：13305992
> 
> 赞同：7
> 
> 时间：2012-11-09T10:10:18.183
> 
> 标签：javascript, jquery

在我创建的拼写游戏中，有一个填充了单词的网格。游戏的目的是通过单击侧面的字母来拼写单词，这些字母会动画到网格中的空白处。如果要拼写，单词会突出显示，因此用户可以看到下一步要去哪里。游戏的目的是在网格中拼出所需数量的单词以完成游戏。我通常将其设置为 2，但刚刚将其更改为 3，并且在我拼出第二个单词后程序不断中断。

```
 if (score.right == 3) {
    ................
    ................
} 
```

通常，当您正确拼写单词时，我会使用“click.trigger”功能移动到网格中下一个突出显示的单词。在 2 个正确的那一刻之后，程序要么只是不进入下一个，要么返回到最后一个并且不允许您单击字母。

```
setTimeout(function() {
                    jQuery('.next-question').trigger('click');
                }, 1500); 
```

我试图通过断点，但似乎找不到问题。有人可以帮我让它再次工作并告诉我哪里出错了吗？

目前在我的游戏中没有提示图片或提示声音，因此要找到突出显示的单词，您必须使用控制台。尝试正确回答两个然后它会崩溃。

这是损坏的小提琴：http: [//jsfiddle.net/smilburn/Dxxmh/101/](http://jsfiddle.net/smilburn/Dxxmh/101/)

这是对以前工作正常的一个小提琴：http: [//jsfiddle.net/smilburn/Dxxmh/100/](http://jsfiddle.net/smilburn/Dxxmh/100/)（某些类名可能已更改）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T13:51:39.267

第一件事。这些图像不会显示在新版本中，因为对于它们的链接，您使用的是相对路径，就 jsfiddle 而言，该路径并不存在。前一种使用绝对链接。音频文件也是如此。

接下来的事情，一开始你有 var 定义，比如

```
var hintPic = $("#hintPic")[0]; 
```

此语句将集合中的第一个元素作为普通 DOM 元素返回。所以稍后当你试图展示它时

```
hintPic.show(); 
```

它不会工作，因为“show”是一个 jquery 函数。从变量定义中删除 [0]，它应该可以正常工作。

# drag-and-drop - 在 TreeGrid 中放置标签

> ID：13305994
> 
> 赞同：1
> 
> 时间：2012-11-09T10:10:22.177
> 
> 标签：drag-and-drop, smartgwt, treegrid

我使用 SmartGWT 3.0，我需要在 a 中检测到外部的一滴`Label`，`TreeGrid`我尝试了很多方法来做到这一点，但都没有奏效。在一个`Canvas`我可以做下降，但`TreeGrid`没有检测到下降。有没有办法做到这一点？

```
TreeGrid tileGrid = new TreeGrid();
tileGrid.setAlign(Alignment.CENTER);
tileGrid.setWidth(300);
tileGrid.setHeight(300);

tileGrid.setCanAcceptDrop(true);

tileGrid.addDropHandler(new DropHandler() {

    @Override
    public void onDrop(DropEvent event) {
         Window.alert("drop");
    }
});

Canvas cv = new Canvas();
cv.setBorder("1px solid #CCCCCC");
cv.setWidth(300);
cv.setHeight(300);
cv.setCanAcceptDrop(Boolean.TRUE);

cv.addDropHandler(new DropHandler() {

     @Override
     public void onDrop(DropEvent event) {
         Window.alert("drop event"+event.toString());
     }
});

Label lb = new Label("Drag me");
lb.setCanDrag(true);
lb.setCanDrop(true);
lb.setDragAppearance(DragAppearance.TARGET);

// added the components to a HLayout
panel.addMember(tileGrid);
panel.addMember(cv);
panel.addMember(lb);

panel.draw(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:42:35.970

我认为在画布的情况下，它可以接受所有数据丢弃。在 TreeGrid 的情况下，它期望与记录相关的东西......我用覆盖进行了测试

```
TreeGrid tileGrid2 = new TreeGrid(){
            @Override
            public Boolean willAcceptDrop(){
                return new Boolean(true);
            }
        }; 
```

这与[这个线程](http://forums.smartclient.com/showthread.php?t=3432)有关 ，在这种情况下，该事件被触发，但我们得到一个 javascript 错误，因此一种解决方案是从标签中提取拖动事件并动态创建 TreeNode 或类似的东西，可以接受为丢弃网格侧的数据。希望它可以帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T09:42:35.370

尝试

```
TreeGrid.addFolderDropHandler(); 
```

# javascript - 在 jquery/mootools/prototype 中使用 ES5 shim

> ID：13305995
> 
> 赞同：10
> 
> 时间：2012-11-09T10:10:23.213
> 
> 标签：javascript, jquery, ecmascript-5, shim

我偶然发现了这个项目：[https](https://github.com/termi/ES5-DOM-SHIM) ://github.com/termi/ES5-DOM-SHIM ，它在包括旧 IE 在内的所有浏览器中提供了几乎完整的 ES5 支持。

我一直在纯 JS 项目中使用它，但现在我*必须*在项目中包含 jquery/mootools/prototype（使用 High Charts）。

即使只是包含 jquery 脚本，也会导致在 IE8 中与此 shim 一起引发错误。我怎样才能保持两全其美？

我的文档头如下所示：

```
<!--[if lte IE 8]>
<script src="/js/a.ie8.js"></script>
<![endif]-->
<script src="/js/a.js"></script>
<script src="/js/jquery.1.8.2.js"></script>
<script src="/js/main.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T13:30:49.100

这是一个较晚的答案，可能无法解决您的主要问题。所以冒着被否决的风险......

据我所知，从 Github 项目 ES5-DOM-SHIM 不仅为 ES5 功能提供 shim，而且还尝试填充 IE 上不可用的 DOM 功能。如果您希望直接使用 DOM API 进行编程，这将非常有用。

jQuery 还提供了一个兼容性层，它会进行功能检查以填补实现空白（因此，如果您的代码仅使用 jQuery，则不需要 DOM polyfill）。

将两者混合似乎不是一个好主意，因为：

*   您在 JS 中复制了很多 polyfill 逻辑。
*   Polyfill 有局限性，所以如果 jQuery 认为您的浏览器完全支持某个功能，而实际上它不支持，您可能会遇到一些意外错误。

如果您只想要 JavaScript polyfills，请尝试使用[https://github.com/kriskowal/es5-shim](https://github.com/kriskowal/es5-shim)（注意 ES5-DOM-SHIM 是基于它的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T09:07:48.207

确保您使用正确的 html 结构，例如：

```
<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <!--[if lte IE 8]>
    <script src="a.ie8.js"></script>
    <![endif]-->
    <script src="a.js"></script>
    <script src="jquery.1.8.2.js"></script>
    <script src="main.js"></script>
</head>
<body>

</body> 
```

当我测试你的结构（没有文档类型）时，我在 IE 中也遇​​到了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T03:56:08.773

首先，一定要在你的 HTML 文档中添加一个 doctype：

```
<!DOCTYPE html> 
```

它必须位于 HTML 文件的第一行。这使得旧的 IE 可以在标准兼容模式下工作并避免一些怪癖。

另一方面，[ES5-DOM-SHIM](https://github.com/termi/ES5-DOM-SHIM)似乎尝试做太多事情，而您目前想使用[jQuery](http://jquery.com/)，它已经提供了处理跨浏览器的 DOM 不一致性的方法。

我建议您只使用 jQuery，如果您需要支持新的 HTML5 元素和/或自定义元素，请使用[HTML5shiv](https://github.com/aFarkas/html5shiv)（在 IE 上添加 HTML5 元素支持的事实方法）。如果你真的需要 ES5/6 shim，那么请使用社区更广泛支持的库，比如[es5-shim](https://github.com/es-shims/es5-shim/)和[es6-shim](https://github.com/paulmillr/es6-shim/)。

# xcode - iOS 开发人员配置文件中的公钥未转移到另一台机器。错误或它们不再需要？

> ID：13305998
> 
> 赞同：2
> 
> 时间：2012-11-09T10:10:29.057
> 
> 标签：xcode, certificate, keychain

我有两台我想用于 iOS 开发的开发机器。

我已经在我的主机上成功设置了我的 iOS 开发配置文件。我可以在 Keychain Access 应用程序中看到我有两对密钥：iOS Developer 公钥和私钥以及 iOS Distribution 公钥和私钥。

[我使用http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/080-Manage_Your_Devices/manage_devices.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/080-Manage_Your_Devices/manage_devices.html)中描述的过程将我的 iOS 开发人员配置文件转移到辅助计算机（“转移您的开发人员”部分配置文件到另一台计算机”）。一切顺利，我可以部署到我的设备上。

我在 Keychain Access 应用程序中注意到**辅助机器不包含我的公钥**，只有私钥和证书存在。公钥没有被转移。

如果我要成为团队成员，并且我想向团队管理员索取证书，它不涉及我的公钥吗？如果确实如此，那么仅遵循 Apple 指示的人将不会拥有这些公钥。

我已经设法手动移动公钥，这不是问题，但我想了解为什么公钥不包含在开发配置文件传输过程中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:49:39.647

公钥用于生成证书。然后，私钥用于验证证书和包含它的配置文件。当您请求新证书时，将创建另一对密钥。可能在传输过程中不会传输公钥，因为它没有更多用处。在这里： http: [//developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/10-Configuring_Development_and_Distribution_Assets/identities_and_devices.html#//apple_ref/doc/uid/TP40007959-CH4-SW3](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/10-Configuring_Development_and_Distribution_Assets/identities_and_devices.html#//apple_ref/doc/uid/TP40007959-CH4-SW3)你可以找到一些更多详情。

# solr - HTML 的字段映射

> ID：13305999
> 
> 赞同：0
> 
> 时间：2012-11-09T10:10:33.227
> 
> 标签：solr, nutch

我现在是 Solr 和 Nutch。我对 solr / nutch schema.xml 中的字段映射有疑问。我希望 solr/nutch 从我的一个网站中获取一些关键字。我知道 schema.xml 有一个字段映射部分允许我这样做。我想知道的是我应该如何将关键字字段放在 HTML 中？我是否应该只使用 HTML 隐藏字段：

```
<input type="hidden" name="keyword" .... /> 
```

或者我应该使用

```
<meta/> 
```

标签 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:05:25.463

已经完成了[通过 XPATH 从 HTML 中提取元素的](https://issues.apache.org/jira/browse/NUTCH-978)工作，因此您可以对其进行检查。

但是，使用元标记可能是更好的选择，因为 html 页面通常对于 xpath 表达式格式不正确。您可以使用带有 Nutch 的[Index Metatags](http://wiki.apache.org/nutch/IndexMetatags)来提取元标记并填充 Solr 中的字段。