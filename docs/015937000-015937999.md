# StackOverflow 问答 15937000-15937999

# bash - 使用 shell 变量调用 sed

> ID：15937000
> 
> 赞同：2
> 
> 时间：2013-04-10T21:44:09.283
> 
> 标签：bash, shell, variables, sed, expansion

为什么这不起作用？

```
$ s="-e 's/^ *//' -e 's/ *$//'"

$ ls | sed $s
sed: 1: "'s/^
": invalid command code '

$ ls | gsed $s
gsed: -e expression #1, char 1: unknown command: `'' 
```

但这确实：

```
$ ls | eval sed $s
... prints staff ...

$ ls | eval gsed $s
... prints staff ... 
```

尝试从 $s 中删除单引号，但它仅适用于没有空格的模式：

```
$ s="-e s/a/b/"
$ ls |  sed $s
... prints staff ...

$ s="-e s/^ *//"
$ ls |  sed $s
sed: 1: "s/^
": unterminated substitute pattern 
```

或者

```
$ s="-e s/^\ *//"
$ ls |  sed $s
sed: 1: "s/^\
": unterminated substitute pattern 
```

Mac OS 10.8、bash 4.2、默认 sed 和 gsed 4.2.2，来自 Mac 端口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:51:36.230

看似简单的问题，却有着复杂的答案。大多数问题出在外壳上。这只是部分问题`sed`。（换句话说，您可以使用许多不同的命令来代替`sed`并且会遇到类似的问题。）

请注意，当参数字符串附加到选项时，大多数带有选项字母和单独参数字符串的命令也将起作用。例如：

```
sort -t :
sort -t: 
```

这两者都赋予了`:`期权价值`-t`。`sed`与和`-e`选项类似。也就是说，您可以编写以下任何一种：

```
sed -n -e /match/p
sed -n -e/match/p 
```

让我们看一下您编写的工作`sed`命令之一：

```
$ s="-e s/a/b/"
$ ls |  sed $s 
```

这里传递的`sed`命令是两个参数（在命令名之后）：

```
-e
s/a/b/ 
```

这是一组非常好的参数`sed`。那么第一个有什么问题呢？

```
$ s="-e 's/^ *//' -e 's/ *$//'"
$ ls | sed $s 
```

好吧，这一次，`sed`命令传递了 6 个参数：

```
-e
's/^
*//'
-e
's/
*$//' 
```

您可以使用`al`命令（参数列表 - 在单独的行上打印每个参数；在此答案的底部对其进行了描述和实现）来查看参数如何呈现给`sed`. 只需在示例中键入`al`代替。`sed`

现在，`-e`选项后面应该跟一个有效的`sed`命令，但`'s/^`不是一个有效的命令；引号`'`不是有效的`sed`命令。当您在 shell 提示符下键入命令时，shell 会处理单引号并将其删除，因此`sed`通常不会看到它，但这会在 shell 变量展开之前发生。

那么，为什么会`eval`起作用：

```
$ s="-e 's/^ *//' -e 's/ *$//'"
$ ls | eval sed $s 
```

`eval`重新评估命令行。它看到：

```
eval sed -e 's/$ *//' -e 's/ *$//' 
```

并经过完整的评估过程。它在对字符进行分组后删除单引号，因此`sed`可以看到：

```
-e
s/$ *//
-e
s/ *$// 
```

这都是完全有效的`sed`脚本。

您的一项测试是：

```
$ s="-e s/^ *//"
$ ls |  sed $s 
```

这失败了，因为`sed`给出了论点：

```
-e
s/^
*// 
```

第一个不是有效的替代命令，第二个不太可能是有效的文件名。有趣的是，您可以通过在 周围加上双引号来解决这个`$s`问题，例如：

```
$ s="-e s/^ *//"
$ ls |  sed "$s" 
```

现在`sed`得到一个参数：

```
-e s/^ *// 
```

但是`-e`可以附加命令，并且命令上的前导空格被忽略，所以这都是有效的。但是，您不能在第一次尝试时做到这一点：

```
$ s="-e 's/^ *//' -e 's/ *$//'"
$ ls | sed "$s" 
```

现在你被告知`'`没有被识别。但是，您可以使用：

```
$ s="-e s/^ *//; s/ *$//"
$ ls | sed "$s" 
```

同样，`sed`看到一个参数，并且选项`sed`的参数中有两个以分号分隔的命令`-e`。

你可以从这里敲响变奏曲。我发现该`al`命令非常有用；它经常帮助我了解哪里出了问题。

* * *

### 来源`al`——参数列表

```
#include <stdio.h>

int main(int argc, char **argv)
{
    while (*++argv)
        puts(*argv);
    return 0;
} 
```

这是您可以编写的最小的有用 C 程序之一（“hello world”短了一行，但除了演示如何编译和运行程序之外，它并没有多大用处）。它在一行上单独列出了它的每个参数。您还可以使用以下命令在`bash`其他相关 shell中模拟它：`printf`

```
printf "%s\n" "$@" 
```

将其包装为一个函数：

```
al()
{
    printf "%s\n" "$@"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:17:52.997

sed 适用于您的正常替换模式，因为它没有任何元字符。你只有a和b。当涉及元字符时，您需要单引号。

我认为 sed 对您的变量赋值情况正常工作的唯一方法是仅使用 eval。

# facebook-graph-api - 从流表中查找时间戳时出错

> ID：15937001
> 
> 赞同：0
> 
> 时间：2013-04-10T21:44:12.113
> 
> 标签：facebook-graph-api, facebook-fql

参考 fql 流表（[https://developers.facebook.com/docs/reference/fql/stream/](https://developers.facebook.com/docs/reference/fql/stream/)）我试图从图形 api 资源管理器中获取 created_time 时间戳，当我使用'类型'表。

```
SELECT created_time FROM stream WHERE source_id={MY_GROUP_ID} AND type=11 
```

这是一个 facebook 错误还是我错过了什么？因为当我使用 type=308 时，它成功返回了 created_time。

谢谢

# caching - 直接映射缓存如何工作？

> ID：15937002
> 
> 赞同：52
> 
> 时间：2013-04-10T21:44:12.460
> 
> 标签：caching, system, cpu-architecture

我正在学习系统架构课程，但我无法理解直接映射缓存的工作原理。

我看过几个地方，他们以不同的方式解释它，这让我更加困惑。

我无法理解的是什么是标签和索引，它们是如何选择的？

我讲座的解释是：“地址分为两部分索引（例如15位），用于直接寻址（32k）RAM的其余地址，存储标签并与传入标签进行比较。”

那个标签是从哪里来的？它不能是 RAM 中内存位置的完整地址，因为它使直接映射缓存无用（与完全关联缓存相比）。

非常感谢。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2015-12-01T18:33:48.787

好的。所以我们先来了解一下CPU是如何与缓存交互的。

内存有三层（广义上​​）—— `cache`（一般由`SRAM`芯片制成）、`main memory`（一般由`DRAM`芯片制成）和`storage`（一般是磁性的，像硬盘一样）。每当 CPU 需要来自某个特定位置的任何数据时，它首先会搜索缓存以查看它是否存在。缓存在内存层次结构上最接近 CPU，因此它的访问时间最短（成本最高），因此如果 CPU 正在寻找的数据可以在那里找到，则构成“命中”，并且数据从那里获得供 CPU 使用。如果不存在，则必须将数据从主内存移动到缓存，然后才能被 CPU 访问（CPU 通常只与缓存交互），这会导致时间损失。

因此，为了找出缓存中是否存在数据，应用了各种算法。一种是这种直接映射缓存方法。为简单起见，我们假设一个内存系统有 10 个可用的高速缓存内存位置（编号为 0 到 9）和 40 个可用的主内存位置（编号为 0 到 39）。这张图总结了一下：

[![在此处输入图像描述](https://i.stack.imgur.com/koS91.png)](https://i.stack.imgur.com/koS91.png)

有 40 个可用的主内存位置，但缓存中最多只能容纳 10 个。所以现在，通过某种方式，来自 CPU 的传入请求需要重定向到缓存位置。这有两个问题：

1.  如何重定向？具体来说，如何以一种不会随着时间而改变的可预测方式来做到这一点？

2.  如果缓存位置已经被一些数据填满，来自 CPU 的传入请求必须识别它需要数据的地址是否与数据存储在该位置的地址相同。

在我们的简单示例中，我们可以通过简单的逻辑进行重定向。假设我们必须将 40 个从 0 到 39 顺序编号的主内存位置映射到 10 个编号为 0 到 9 的缓存位置，一个内存位置的缓存位置`n`可以是`n%10`. 所以 21 对应于 1， 37 对应于 7，依此类推。这就变成了**index**。

但是 37, 17, 7 都对应 7。所以为了区分它们，就来了**tag**。所以就像 index 是`n%10`， tag 是`int(n/10)`。所以现在 37、17、7 将有相同的索引 7，但不同的标签如 3、1、0 等。也就是说，映射可以完全由标签和索引这两个数据指定。

所以现在如果请求地址位置 29，那将转换为标签 2 和索引 9。索引对应于缓存位置编号，因此缓存位置编号。将查询 9 以查看它是否包含任何数据，如果是，则关联的标签是否为 2。如果是，则 CPU 命中，将立即从该位置获取数据。如果它是空的，或者标签不是2，这意味着它包含与其他一些内存地址对应的数据，而不是29（虽然它会有相同的索引，这意味着它包含来自9、19这样的地址的数据， 39 等）。所以这是一个 CPU 未命中，并且来自位置号的数据。主存中的 29 必须加载到位置 9 的缓存中（并且标签更改为 2，并删除之前存在的所有数据），之后它将被 CPU 获取。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-11T16:30:44.287

让我们举个例子。一个 64 KB 的高速缓存，具有 16 字节的高速缓存行，有 4096 个不同的高速缓存行。

您需要将地址分解为三个不同的部分。

1.  最低位用于在您取回缓存行时告诉您缓存行中的字节，这部分不直接用于缓存查找。（本例中的位 0-3）
2.  下一位用于索引缓存。如果您将缓存视为一大列缓存行，则索引位会告诉您需要在哪一行中查找数据。（本例中的位 4-15）
3.  所有其他位都是 TAG 位。这些位存储在您存储在缓存中的数据的标签存储中，我们将缓存请求的相应位与我们存储的数据进行比较，以确定我们正在缓存的数据是否是正在请求的数据。

您用于索引的位数是 log_base_2(number_of_cache_lines) [确实是集合的数量，但在直接映射缓存中，行数和集合的数量相同]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T22:00:22.513

直接映射缓存就像一个表，它具有也称为缓存行的行和至少 2 列，一列用于数据，另一列用于标记。

它是这样工作的：对缓存的读取访问将地址的中间部分称为索引并将其用作行号。同时查找数据和标签。接下来，需要将该标记与地址的上半部分进行比较，以确定该行是否来自内存中的同一地址范围并且有效。同时，地址的低部分可以用来从缓存行中选择请求的数据（我假设一个缓存行可以保存几个字的数据）。

我强调了一点数据访问和标签访问+比较同时发生，因为这是减少延迟的关键（缓存的目的）。数据路径 ram 访问不需要是两个步骤。

优点是读取基本上是简单的表查找和比较。

但它是直接映射的，这意味着对于每个读取地址，缓存中只有一个位置可以缓存该数据。所以缺点是很多其他地址会被映射到同一个地方，可能会竞争这个缓存行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T02:15:15.057

我在图书馆找到了一本好书，它为我提供了我需要的清晰解释，现在我将在这里分享它，以防其他学生在搜索缓存时偶然发现这个线程。

*这本书是 Hennesy 和 Patterson 所著的“计算机体系结构 - 一种定量方法”第 3 版，第 390 页。*

首先，请记住，主内存被划分为缓存块。如果我们有一个 64 字节的缓存和 1 GB 的 RAM，那么 RAM 将被划分为 128 KB 的块（1 GB 的 RAM / 64B 的缓存 = 128 KB 块大小）。

从书中：

**块可以放在缓存中的什么位置？**

*   如果每个块在缓存中只能出现一个位置，则称缓存为*直接映射*的。使用以下公式计算目标块：`<RAM Block Address> MOD <Number of Blocks in the Cache>`

所以，假设我们有 32 块 RAM 和 8 块缓存。

如果我们要将 RAM 中的第 12 块存储到缓存中，RAM 块 12 将存储到缓存块 4 中。为什么？因为 12 / 8 = 1 余数 4。余数是目标块。

*   如果一个块可以放置在缓存中的任何位置，则称该缓存是*完全关联*的。

*   如果一个块可以放置在缓存中一组受限制的位置中的任何位置，则缓存*设置为关联*。

基本上，集合是缓存中的一组块。一个块首先映射到一个集合上，然后该块可以放置在集合内的任何位置。

公式为：`<RAM Block Address> MOD <Number of Sets in the Cache>`

因此，假设我们有 32 块 RAM 和一个缓存，分为 4 组（每组有两个块，意味着总共 8 个块）。这样设置 0 将具有块 0 和 1，设置 1 将具有块 2 和 3，依此类推...

如果我们要将 RAM 块 12 存储到缓存中，RAM 块将存储在缓存块 0 或 1 中。为什么？因为 12 / 4 = 3 余数为 0。因此选择了集合 0，并且可以将块放置在集合 0 内的任何位置（表示块 0 和 1）。

现在我将回到我原来的地址问题。

**如果块在缓存中，如何找到它？**

缓存中的每个块帧都​​有一个地址。为了清楚起见，一个块既有地址又有数据。

块地址分为多个部分：Tag、Index 和 Offset。

标签用于在缓存中查找块，索引仅显示块所在的集合（使其非常冗余），偏移量用于选择数据。

“选择数据”是指在一个缓存块中显然会有多个内存位置，偏移量用于在它们之间进行选择。

所以，如果你想想象一个表，这些将是列：

```
TAG | INDEX | OFFSET | DATA 1 | DATA 2 | ... | DATA N 
```

标记将用于查找块，索引将显示块在哪个集合中，偏移量将选择其右侧的字段之一。

我希望我对此的理解是正确的，如果不是，请告诉我。

# android - 文件类型的 AsynTask 错误

> ID：15937003
> 
> 赞同：1
> 
> 时间：2013-04-10T21:44:16.950
> 
> 标签：android, rest, android-asynctask, apache-httpclient-4.x

我正在尝试使用[Sending images using Http Post](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)将图像发送到 REST 服务。该帖子提供了丰富的信息，但我在`FileBody bin1 = new FileBody(file);`.

错误：`The constructor FileBody(File[]) is undefined`

这很奇怪，因为我定义了它，为什么会发生这种情况以及修复它的解决方案是什么？任何帮助是极大的赞赏。

代码来源：

```
private class ImageUpload extends AsyncTask<File, Void, String> {

        @Override
        protected void onPreExecute() {
            if (checkNullState() == false) {
                showMyDialog();
            }
        }

        protected String doInBackground(File... file) {

            String imageDescriptionTemp = "Photo Temp Description.";
            String PostRequestUri = "https://demo.relocationmw.com/ws_docmgmt/Service1.svc";
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(PostRequestUri);
            FileBody bin1 = new FileBody(file);
            MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
            entity.addPart("Image", bin1);
            post.setEntity(entity);
            HttpResponse response = client.execute(post);
            resEntity = response.getEntity();
            final String response_string = EntityUtils.toString(resEntity);
            if(resEntity != null){
            Log.i("RESPONSE", response_string); 
            }else{
            return null;}
        }

        @Override
        protected void onPostExecute(String result) {
            if (checkNullState() == true) {
                dismissMyDialog();
            }
            // add location once we have that figured out.
            Toast.makeText(HomeActivity.this, "Image can be viewed {Location}",
                    Toast.LENGTH_LONG).show();
        }

        protected void onProgressUpdate(Map... values) {
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:50:18.953

我认为你想要的是

```
FileBody bin1 = new FileBody(file[0]); 
```

因为`doInBackground`使用[varargs](http://docs.oracle.com/javase/6/docs/technotes/guides/language/varargs.html)。所以下面的代码行：

```
doInBackground(Params... params) 
```

相当于

```
doInBackground(Params[] params) 
```

当你这样做时

```
FileBody bin1 = new FileBody(file) 
```

`file`是一个数组（我想你已经定义了这样的构造函数`FileBody(File file)`）

# php - if 语句忽略 elseif

> ID：15937005
> 
> 赞同：1
> 
> 时间：2013-04-10T21:44:21.370
> 
> 标签：php

我有这个 if 语句。它是一个 php 脚本的一部分，当单击一个按钮以确定它被转发到的页面时运行该脚本。我有一个表格，当管理员更改页面时会更新，这一切都很好。然而，由于某种原因，这总是转发到 scriptone。即使例如 scriptthree 肯定被选中。请问有什么建议吗？

```
$sql = "SELECT scriptName FROM selectedscript WHERE scriptSelected = '1'";

if($sql = "ScriptOne") {
    header('Location: scriptone.php');
}
elseif ($sql = "ScriptTwo") {
    header('Location: scripttwo.php');
}
elseif ($sql = "ScriptThree") {
    header('Location: scriptthree.php');
}
else {
    echo "Error";
} 
```

谢谢

我尝试过双等号和三等号，但这会导致显示错误消息:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:46:10.920

`=`是[赋值](http://www.php.net/manual/en/language.operators.assignment.php)。`==`是[平等](http://php.net/manual/en/language.operators.comparison.php)。`===`是[严格平等](http://php.net/manual/en/language.operators.comparison.php)。您想要后者中的一个，因为第一个通常会产生*真*值。

```
if ($sql == "ScriptOne") {
    header('Location: scriptone.php');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:45:55.143

```
if($sql == "ScriptOne") {
         ^ 
```

不是

```
if($sql = "ScriptOne") { 
```

`=`是赋值，`==`是比较

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T21:45:57.543

您需要使用双等号或三等号

```
if($sql == "ScriptOne") { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T21:50:40.953

在 if 语句中使用它们之前，您需要执行 sql 查询并获取一些值。

像这样的东西：

```
$sql = "SELECT scriptName FROM selectedscript WHERE scriptSelected = '1'";
$q=mysql_query($sql) or die(mysql_error());
$row=mysql_fetch_assoc($q);

switch ($row['scriptName']) {
  case 'ScriptOne':
    header('Location: scriptone.php');
    break;
  case 'ScriptTwo':
    header('Location: scripttwo.php');
    break;
  case 'ScriptThree':
    header('Location: scriptthree.php');
    break;
  default:
    echo "Error";
} 
```

另外，考虑使用 PDO 而不是`mysql_*`语句，因为它们已[折旧](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)。

# asp.net-mvc - MVC 局部视图和复杂模型

> ID：15937006
> 
> 赞同：0
> 
> 时间：2013-04-10T21:44:26.480
> 
> 标签：asp.net-mvc, http-post

我正在尝试填充嵌套模型

模型看起来像这样

```
public Layout {
   public List<Record> Records {get;set;}
}

public Record {
   public List<PlaceHolder> PlaceHolders {get;set;}
}

public PlaceHolder {
   public string Label {get;set;}
} 
```

当我的表单使用提琴手发布时，我看到值与格式中的键一起下降

```
Records.Index = 0
Records.PlaceHolders.Index = 0
Records[0].PlaceHolders[0].Label = foo
Records.Index = 0
Records.PlaceHolders.Index = 1
Records[0].PlaceHolders[1].Label = bar
Records.Index = 1
Records.PlaceHolders.Index = 1
Records[1].PlaceHolders[1].Label = boo
... 
```

很多这些 KeyNames 我必须使用部分视图自己生成，用 HtmlFieldPrefix 集填充 TemplateInfo。

当我查看我的保存控制器时，布局仅部分填充。它在 Records 属性中包含所有记录。但没有任何记录包含 PlaceHolders。

我的帖子键有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:49:19.077

知道了，我需要这些台词

```
Records.PlaceHolders.Index = 0 
```

有记录的索引，像这样

```
Records[1].PlaceHolders.Index = 0 
```

# api - FB.login 失败并在 FB.login 上停止执行

> ID：15937007
> 
> 赞同：-1
> 
> 时间：2013-04-10T21:44:35.643
> 
> 标签：api, facebook-javascript-sdk

FB.login 失败并在 FB.login 上停止执行。我只能看到几秒钟的 Facebook 登录弹出窗口，上面写着“正在加载”，然后它消失了，什么也没有发生。

我有身体标签

```
<div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function() {
            // init the FB JS SDK
            FB.init({
            appId      : '129519787234412', // App ID from the App Dashboard
            channelUrl : '<?=URL?>facebookChannel.php', // Channel File for x-domain communication
            status     : true, // check the login status upon init?

            xfbml      : true  // parse XFBML tags on this page?
            });

            // Additional initialization code such as adding Event Listeners goes here

        };

        // Load the SDK asynchronously
          (function(d, s, id){
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement(s); js.id = id;
             js.src = "//connect.facebook.net/en_US/all.js";
             fjs.parentNode.insertBefore(js, fjs);
           }(document, 'script', 'facebook-jssdk'));

    </script> 
```

毕竟是 HTML，在脚本标签中：

```
$(".box_top_img").click(function(){ 

    FB.login(function(response) {

        if (response.authResponse) {
            FB.getAuthResponse()['accessToken'];
            FB.api('/me', function(response) {

                $.ajax({
                    url:"ajax/check_vote.php",
                    type:"POST",
                    data:response,
                    success:function(response){
                        var result = $.parseJSON(response);

                        if(result.code == 0){
                            $("#container_1").hide();
                            $("#container_2").hide();
                            $("#container_3").show();

                        }else if(result.code == 1){
                            $("#container_1").hide();
                            $("#container_2").show();
                            $("#container_3").hide();

                            $("#facebook_id").val(result.id);

                            if(result.first_name)
                                $("#name").val(result.first_name);
                            if(result.last_name)
                                $("#lastname").val(result.last_name);
                            if(result.email)
                                $("#email").val(result.email);

                        }else{
                            $("#container_1").show();
                            $("#container_2").hide();
                            $("#container_3").hide();

                        }
                    }
                });
            });
        } else {
            console.log('User cancelled login or did not fully authorize.');
        }
    }, {scope: 'email'});
}); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:11:56.427

检查应用设置页面上的沙盒模式是否被禁用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:20:27.347

您可以尝试替换`facebook-jssdk`为`fb-root`. 这应该有效。

# c# - 检测 Windows 8 应用程序中的主要磁贴大小

> ID：15937013
> 
> 赞同：1
> 
> 时间：2013-04-10T21:45:01.927
> 
> 标签：c#, windows-8, windows-runtime, live-tile

我想知道是否可以使用 c# 在代码中检测主要应用程序磁贴大小（小或宽）？我想实现动态磁贴功能，我需要知道应用磁贴的大小以选择合适的磁贴模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T05:00:24.377

[请查看磁贴和徽章（Windows 应用商店应用程序）指南和清单的](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx)MSDN 文档。你会看到两个重要的点。

*   如果您使用宽磁贴，用户可以随时将磁贴从宽调整为正方形或从正方形调整为宽。您不知道当前显示的是哪种尺寸。

所以你必须请求两种类型的平铺图像，即小和大

*   用户可以随时关闭和打开磁贴通知。

那就是您也无法知道动态磁贴是否以编程方式打开或关闭。

您可以将大小图块 XML 模式组合在一个 XML 中，检查此[堆栈溢出答案](https://stackoverflow.com/questions/12603719/updating-a-live-tile-in-its-proper-size/12605685#12605685)。

# ios - 没有状态栏的全屏 UIWebView 无法滚动到顶部

> ID：15937017
> 
> 赞同：0
> 
> 时间：2013-04-10T21:45:24.850
> 
> 标签：ios, objective-c, cocoa-touch

当我删除顶部状态栏时，我的 UIWebView 不会滚动到顶部，这是可以理解的。问题是我如何在没有状态栏的情况下点击顶部滚动到顶部？

我知道当 Safari 在景观期间处于全屏模式时，Apple 可以做到这一点。点击到不可见区域，内容滚动到顶部。

有人知道苹果是怎么做到的吗？

# ios - 使用 calloutAccessoryControlTapped: 方法加载特定的 Viewcontroller

> ID：15937025
> 
> 赞同：1
> 
> 时间：2013-04-10T21:46:02.923
> 
> 标签：ios, annotations, uipopovercontroller, viewcontroller

我有许多视图控制器，每个控制器都有自己的内容。我想将每个 viewController 的内容加载到他们自己的弹出框中，当有人点击注释时弹出框。由于每个注释都是不同的位置，我希望附加到特定注释的弹出框加载特定的 viewController 以显示有关该注释的详细信息。

我目前的弹出框代码位于我的 calloutAccessoryControlTapped: 方法中。我知道这种方法应该允许我的代码以某种方式获得关于哪个注释被窃听的知识。有了这些知识，我就可以设置一些逻辑，例如使用 IF 语句或其他任何东西，以便我可以加载我想要的弹出框和相应的视图控制器。

如何使用 calloutAccessoryControlTapped: 方法传递已进入我的代码的注释？

谢谢，

这是我加载 ONE viewController 的代码。

// 这是当 DetailDisclosureButton 被点击时识别的方法。-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control

{

```
 // create an instance of the DetailViewController class that holds the additional info and initialize it
            DetailViewController *ycvc = [[DetailViewController alloc] init];

            // create an instance of the IUPopoverController class and initialize it with the instance created above
            UIPopoverController *poc = [[UIPopoverController alloc] initWithContentViewController:ycvc];
            [ycvc release];

            // hold the reference to the popover in an ivar
            self.popover = poc;

            //size the popover as needed
            poc.popoverContentSize = CGSizeMake(320, 400);

            //show the popover next to the annotation view
            [poc presentPopoverFromRect:view.bounds inView:view
            permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

            [poc release];
} 
```

# ios - 在objective-c的另一个类中设置变量

> ID：15937029
> 
> 赞同：0
> 
> 时间：2013-04-10T21:46:13.780
> 
> 标签：ios, objective-c

我有一个地图控制器，用户可以在其中标记地图以添加新标记。然后的想法是将坐标存储在新的标记类中。我面临的问题是设置这些变量。

**新标记控制器.h**

```
@interface NewMarkerController : UIViewController
{
    NSNumber *posLat;
    NSNumber *posLng;
}

@property (nonatomic, retain) NSNumber *posLat;
@property (nonatomic, retain) NSNumber *posLng;

@end 
```

我也在 .m 文件中对此进行了综合，这有什么不同。

**地图控制器.m**

```
NewMarkerController *vc = [[NewMarkerController alloc] init];
[vc posLat:coordinate.latitude]; 
```

最后一行显示一个错误`No visible @interface for 'NewMarkerController' declears the selector 'postLat'`，但是...there is...？

谁能发现我在这里遇到的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:47:19.237

```
[vc setPosLat:coordinate.latitude]; 
```

或者

```
vc.posLat = coordinate.latitude; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:50:00.183

这个语法：

```
[vc posLat:coordinate.latitude] 
```

意味着 posLat 是 vc 类的函数。当你想设置一个变量时，如果你合成它，你可以这样做：

```
[vc setPosLat:coordinate.latitude] 
```

或者

```
vc.posLat = coordinate.latitude 
```

# objective-c - 确定哪个 UIPopover 控制器已被解除

> ID：15937033
> 
> 赞同：0
> 
> 时间：2013-04-10T21:46:23.230
> 
> 标签：objective-c, cocoa-touch, uipopovercontroller

我的应用程序中有几个`UIPopover`包含`UITableView`s 的 s。`popoverControllerDidDismissPopover:`当他们被解雇时，所有人都会发送消息。当一个特定的弹出框被关闭时，我想获取所有用户的选择并将它们移动到`UITextView`.

除非我知道哪个弹出框被解雇，否则我不能这样做。有什么想法可以做到这一点吗？

```
 UIViewController* popoverContent = [[UIViewController alloc] init];

    UIView *popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 416)];  //  was 216
    popoverView.backgroundColor = [UIColor redColor];
    popoverContent.contentSizeForViewInPopover = CGSizeMake(300.0, 416.0);

    //  define UITableView
    tvServices = [[UITableView alloc] init];
    tvServices.frame = CGRectMake(0, 0, 300, 416);
    tvServices.tag = 1201;

    tvServices.delegate = self;
    tvServices.dataSource = self;

    //  add it to the popover
    [popoverView addSubview:tvServices];
    popoverContent.view = popoverView;
    popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
    popoverController.delegate = (id)self;
    [popoverController setPopoverContentSize:CGSizeMake(300, 416) animated:NO];

    //  show it next to services textbox
    [popoverController presentPopoverFromRect:soServices.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionRight animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:50:47.770

`popoverControllerDidDismissPopover:`委托方法告诉您正在关闭哪个弹出框。从那里您可以根据需要查看弹出框`contentViewController`。

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
    UITableViewController *controller = (UITableViewController *)popoverController.contentViewController;

    UITableView *tableView = controller.tableView;
} 
```

这应该将您指向正确的目录。但是您不需要访问表格视图。您正在从视图控制器访问数据，而不是表视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:32:27.677

你应该反过来做：

您呈现的控制器应该使用委托来通知开始演示的控制器。

在弹出的控制器中，您向代理（呈现控制器）发送一条消息，以通知它有关选择/取消选择的信息。

* * *

```
#import "ViewController.h"
#import "QuestionGroupViewController.h"

@interface ViewController () <QuestionGroupViewControllerDelegate>
@end

@implementation ViewController

- (IBAction)presentQuestionnaire:(id)sender {

    NSArray *q = @[@{@"question" : @"what cities would you like to visit?" , @"answers": @[@"Paris", @"barcelona", @"Istanbul"]}];

        QuestionGroupViewController *qvc = [QuestionGroupViewController new];
        qvc.delegate = self;
        qvc.questions = q;
        [self presentViewController:qvc animated:YES completion:NULL];
    }
}

-(void)selectedAnswer:(NSString *)answer forQuestion:(NSString *)question
{
    NSLog(@"selectedt\t\t%@: %@", question, answer);
}
-(void)deSelectedAnswer:(NSString *)answer forQuestion:(NSString *)question
{
    NSLog(@"deselectedt\t\t%@: %@", question, answer);
}
@end 
```

* * *

```
#import <Foundation/Foundation.h>    
@protocol QuestionGroupViewControllerDelegate<NSObject>
-(void) selectedAnswer:(NSString *)answer forQuestion:(NSString *) question;
-(void) deSelectedAnswer:(NSString *)answer forQuestion:(NSString *) question;

@end

@interface QuestionGroupViewController : UITableViewController

@property (nonatomic, strong) NSArray *questions;
@property (nonatomic, weak) id<QuestionGroupViewControllerDelegate> delegate;
@end 
```

* * *

```
#import "QuestionGroupViewController.h"

@interface QuestionGroupViewController ()
@property (nonatomic, strong) NSMutableArray *selectedCells;

@end

@implementation QuestionGroupViewController {

}
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.selectedCells = [NSMutableArray array];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [self.questions count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [self.questions[section][@"answers"] count] +1 ;

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return self.questions[section][@"question"];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *identifier =@"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
    if(!cell){
        cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier:identifier];

    }
    if (indexPath.row == [self.questions[indexPath.section][@"answers"] count]) {
        cell.textLabel.text = @"done";
    } else {
        cell.textLabel.text = [[self.questions objectAtIndex:indexPath.section][@"answers"] objectAtIndex:indexPath.row];
    }

    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (indexPath.row == [self.questions[indexPath.section][@"answers"] count]) {
        [self dismissViewControllerAnimated:YES completion:NULL];
        return;
    }

    NSString *answer = self.questions[indexPath.section][@"answers"][indexPath.row];

    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    if([self isRowSelectedOnTableView:tableView atIndexPath:indexPath]){
        [self.selectedCells removeObject:indexPath];

        cell.accessoryType = UITableViewCellAccessoryNone;
        [self.delegate deSelectedAnswer: answer forQuestion:self.questions[indexPath.section][@"question"]];

    } else {
        [self.selectedCells addObject:indexPath];

        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        [self.delegate selectedAnswer: answer forQuestion:self.questions[indexPath.section][@"question"]];

    }

}

-(BOOL)isRowSelectedOnTableView:(UITableView *)tableView atIndexPath:(NSIndexPath *)indexPath
{
    return ([self.selectedCells containsObject:indexPath]) ? YES : NO;
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T22:59:01.590

你应该这样做`popoverControllerDidDismissPopover:`

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
    UITableView *tableView = (UITableView*)[popoverController.contentViewController.view viewWithTag:1201];
    if (tableView != nil) {
        // here you know that this UIPopover has tvServices as you set its tag to 1201
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T22:38:55.817

如果您从代码中呈现弹出框，那么您应该参考它们。当接收到 popover 委托调用时，您所要做的就是检查哪个实例正在被解除。对我来说听起来很简单，除非我错过了什么。

# vim - syntastic - 禁用 Java 的自动编译

> ID：15937042
> 
> 赞同：10
> 
> 时间：2013-04-10T21:47:02.293
> 
> 标签：vim

如何告诉 Syntastic 在保存时不要编译我的 Java 代码？我试过在我的`.vimrc`：

`let g:syntastic_disabled_filetypes = ['java']`

`let g:syntastic_java_checker='checkstyle'`

`let g:syntastic_java_checker=''`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T04:57:23.833

```
let g:syntastic_mode_map = { 'mode': 'active',
                           \ 'active_filetypes': ['foo', 'bar'],
                           \ 'passive_filetypes': ['java'] } 
```

这应该有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-30T21:16:30.923

这是一种 hack，但是您可以`javac`通过将其放置在您的`.vimrc`:

```
let g:loaded_syntastic_java_javac_checker = 1 
```

此选项优于此选项，`g:syntastic_mode_map`因为它不需要您明确列出要主动检查的所有文件类型。

# json - 将 JSON 解析为 Java bean - 列出剩余的 null

> ID：15937047
> 
> 赞同：2
> 
> 时间：2013-04-10T21:47:17.127
> 
> 标签：json, gson

我正在尝试使用 GSON 将一些 JSON 解析为 Java 对象。我的 json 在这里：[http ://ec2-50-112-212-186.us-west-2.compute.amazonaws.com/ske.json](http://ec2-50-112-212-186.us-west-2.compute.amazonaws.com/ske.json)

以下是我的 Java bean。[我在JsonGen](http://jsongen.byingtondesign.com/)的帮助下创建了它：

```
package ske.entities;

import java.util.List;

public class WordSketch{

    private List<Gramrels> gramrels;
    private String corp_full_name;

    public String getCorp_full_name() {
        return corp_full_name;
    }
    public void setCorp_full_name(String corp_full_name) {
        this.corp_full_name = corp_full_name;
    }
    public List<Gramrels> getGramrels(){
        return this.gramrels;
    }
    public void setGramrels(List<Gramrels> gramrels){
        this.gramrels = gramrels;
    }

    public static class Gramrels {

        private List<Words> words;
        private Number count;
        private String name;
        private Number score;
        private Number seek;

        public List<Words> getWords(){
            return this.words;
        }
        public void setWords(List<Words> words){
            this.words = words;
        }
        public Number getCount(){
            return this.count;
        }
        public void setCount(Number count){
            this.count = count;
        }
        public String getName(){
            return this.name;
        }
        public void setName(String name){
            this.name = name;
        }
        public Number getScore(){
            return this.score;
        }
        public void setScore(Number score){
            this.score = score;
        }
        public Number getSeek(){
            return this.seek;
        }
        public void setSeek(Number seek){
            this.seek = seek;
        }
    }

    public static class Words {
        private Number count;
        private Number id;
        private String lempos;
        private Number score;
        private Number seek;
        private String word;

        public Number getCount(){
            return this.count;
        }
        public void setCount(Number count){
            this.count = count;
        }
        public Number getId(){
            return this.id;
        }
        public void setId(Number id){
            this.id = id;
        }
        public String getLempos(){
            return this.lempos;
        }
        public void setLempos(String lempos){
            this.lempos = lempos;
        }
        public Number getScore(){
            return this.score;
        }
        public void setScore(Number score){
            this.score = score;
        }
        public Number getSeek(){
            return this.seek;
        }
        public void setSeek(Number seek){
            this.seek = seek;
        }
        public String getWord(){
            return this.word;
        }
        public void setWord(String word){
            this.word = word;
        }
    }
} 
```

但是，当我调用填充但`WordSketch gramrels = gson.fromJson(new InputStreamReader(response.getEntity().getContent()), WordSketch.class);`为空时。我究竟做错了什么？`corp_full_name``gramrels`

这是我第一次使用 Json，所以我还是新手。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:11:17.830

我认为您的问题只是该字段的名称。

在您的班级中，名称是“gramrels”，但在您的 JSON 响应中，它是“Gramrels”（大写）。您的程序和 JSON 中的变量名称必须相同，因为 GSON 允许您从 JSON 响应中仅获取您感兴趣的那些字段...因此，如果它在响应中找到不'不与您的任何类属性相对应，GSON 只是忽略该值。

我建议您以这种方式使用注释`@SerializedName`：

```
@SerializedName("Gramrels")
private List<Gramrels> gramrels; 
```

这样，您可以按照 Java 命名约定将属性名称保持为小写，但您告诉 GSON 您的 JSON 响应中此参数的名称将对应于“Gramrels”...

您也可以对其他变量执行相同操作，例如：

```
@SerializedName("corp_full_name")
private String corpFullName; 
```

因为`corp_full_name`不遵循 Java 命名约定...

# php - OpenTBS 多页重复模板包含表格

> ID：15937048
> 
> 赞同：1
> 
> 时间：2013-04-10T21:47:17.297
> 
> 标签：php, docx, opentbs

好吧，我是 XML 和 OpenTBS 的新手，所以块等的这个概念对我来说非常混乱，当我认为我掌握了它的要点时，我的客户要求我提供更多。我有一张客户及其物品的表格，客户需要一个 docx，它为每个客户重复一个模板，其中包含表格中的物品。

我认为它适用于整个 docx 模板位于“块”中并且表是“子块”，模板的其余部分使用块中的数据，表使用子块中的数据.
***这就是我感到困惑的地方。***
如何遍历数组（包含客户信息），当子块需要特定客户的信息时，从 items 数组中提取？对我来说，TinyButStrong 附带的“手册”还不够好，但我相信你们会知道指向我的地方。

简化数组：

```
$customer = array(
    array("id" => 1,
        "name" => "Foo Bar",
        "email" => "foo@bar.com",
        "itemsinfo" => array(
            "itemid" => array(
                "itemname" => "name"
            )
        )
    ),
    array("id" => 2,
        "name" => "Foo2 Bar2",
        "email" => "foo2@bar2.com",
        "itemsinfo" => array(
            "itemid" => array(
                "itemname" => "name"
            )
        )
    )
); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:40:37.280

感谢您添加数组结构。这应该适用于 OpenTBS。

所以假设你有类似的东西：

```
<w:body>[customers;block=w:body;]
    Customer Name: [customers.name;]
</w:body> 
```

为了从客户数组中获取嵌套信息，您将执行以下操作：

```
<w:body>[customers;block=w:body;sub1=itemsinfo]
    Customer Name: [customers.name;]
    Customer Items:
    <w:table>
        <w:tr>
            <w:td>[customers_sub1.itemname;block=w:td;]</w:td>
        </w:tr>
    </w:table>
</w:body> 
```

这将导致 w:td 对 itemsinfo 数组中的每个项目重复 - 可能不是您想要的行为，但希望足以让您再次开始。该手册很有帮助，但不幸的是，在您已经理解之后它会更有意义......

# android - 关闭android应用程序销毁广播接收器

> ID：15937049
> 
> 赞同：1
> 
> 时间：2013-04-10T21:47:17.037
> 
> 标签：android

在`onCreate`我注册的方法的主要活动中，`broadcastReciver`但是当我关闭应用程序时，我总是收到此错误：

```
@429d47e0 that was originally registered here. Are you missing a call to unregisterReceiver()?
04-10 23:40:48.161: E/ActivityThread(20989):    at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:793)
04-10 23:40:48.161: E/ActivityThread(20989):    at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:593)
04-10 23:40:48.161: E/ActivityThread(20989):    at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1274)
04-10 23:40:48.161: E/ActivityThread(20989):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1261)
04-10 23:40:48.161: E/ActivityThread(20989):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1255)
04-10 23:40:48.161: E/ActivityThread(20989):    at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:372) 
```

当我关闭应用程序时，我不想取消注册接收器。我能做些什么？我以编程方式注册接收器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T21:56:31.700

> 当我关闭应用程序时，我不想取消注册接收器

那么你不应该通过`registerReceiver()`. `<receiver>`而是通过一个元素在清单中注册它。然后，无论您的应用程序是否正在运行，它都是可用的。

# python - 使用带有数字的 writerow

> ID：15937052
> 
> 赞同：1
> 
> 时间：2013-04-10T21:47:21.687
> 
> 标签：python, csv

我正在处理的函数应该在每次调用时添加一行新的字符串和数字。
我将一个字符串和一个数字列表作为函数的参数传递。
目前，它仅在调用函数时将参数写入如下：

```
[1.0, 2.0, 3.0] 
```

但是，我希望函数编写如下分隔的代码：

```
1.0     2.0     3.0 
```

看起来，我不太了解 writerow 函数。所以我的问题是，如何分隔传递给 writerow 的数字列表？

```
 # writes the results to a csv file
    # each row contains a string and three numbers
    def write_to_file(file_name, n_t_argument):
        with open(file_name + '.txt', 'a', newline='') as outputfile:
            wrtr  = csv.writer(outputfile, dialect = 'excel-tab')
            text_input = [ n_t_argument ]
            wrtr.writerow(text_input)

    write_to_file('output', [1.0, 2.0, 3.0]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T21:49:31.907

你把你的数字放在一个*嵌套*列表中，一个列表中的列表。无需这样做：

```
def write_to_file(file_name, n_t_argument):
    with open(file_name + '.txt', 'a', newline='') as outputfile:
        wrtr  = csv.writer(outputfile, dialect = 'excel-tab')
        wrtr.writerow(n_t_argument) 
```

# c# - CellStyle 意外应用于工作表中的所有单元格 - NPOI？

> ID：15937053
> 
> 赞同：5
> 
> 时间：2013-04-10T21:47:28.487
> 
> 标签：c#, export-to-excel, npoi

我不明白为什么会发生这种情况，首先我尝试在第一行的列标题中应用粗体文本，然后我想将标题单元格的边框设置为 MEDIUM，但是这种 MEDIUM 边框样式适用于中的所有单元格工作表。下面的相同代码中还有更多问题：

1.  我的列标题（第一行）中的文本不是我想要的粗体。
2.  我的列标题中的文本颜色不是我想要的红色。

这是我的代码（使用 NPOI 库处理）：

```
private void CreateATest(string filename)
    {
        FileStream fs = new FileStream(filename, FileMode.Create, FileAccess.Write);
        HSSFWorkbook wb = new HSSFWorkbook();
        ISheet sheet = wb.CreateSheet("NPOI");
        IRow row = sheet.CreateRow(0);
        row.RowStyle = wb.CreateCellStyle();
        row.RowStyle.Alignment = NPOI.SS.UserModel.HorizontalAlignment.CENTER;

        row.RowStyle.VerticalAlignment = VerticalAlignment.CENTER;            
        row.RowStyle.WrapText = true;
        IFont font = wb.CreateFont();
        font.Boldweight = 3;
        font.Color = (short) ColorTranslator.ToWin32(Color.Red);
        font.FontHeight = 30;
        row.RowStyle.SetFont(font);
        int i = 0;
        foreach (string header in new string[] { "ID", "Name", "Age" })
        {
            row.CreateCell(i++).SetCellValue(header);
            row.Cells[i - 1].CellStyle.BorderLeft = NPOI.SS.UserModel.BorderStyle.MEDIUM;
            row.Cells[i - 1].CellStyle.BorderTop = NPOI.SS.UserModel.BorderStyle.MEDIUM;
            row.Cells[i - 1].CellStyle.BorderBottom = NPOI.SS.UserModel.BorderStyle.MEDIUM;
        }
        row.Cells[i - 1].CellStyle.BorderRight = NPOI.SS.UserModel.BorderStyle.MEDIUM;
        Random rand = new Random();
        for (i = 1; i < 1000; i++)
        {
            IRow row1 = sheet.CreateRow(i);
            for (int j = 0; j < 3; j++)
            {
                row1.CreateCell(j).SetCellValue(rand.Next(100));
            }
        }
        wb.Write(fs);
        fs.Close();
    } 
```

请为我修复它，我对 NPOI 很陌生，刚刚尝试使用它。您的帮助将不胜感激。谢谢。（<---我不知道为什么这个“谢谢”不能跳到下一行，即使我在输入之前输入了 Enter）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T21:59:42.137

格式问题是由于 Excel 格式化插入行的方式造成的。他们从上面的行中获取他们的样式信息。您可以通过将行格式化为粗体，然后在下方插入一行来测试这一点 - 新行也将加粗。您可以尝试先插入其余行，然后再对标题行进行格式化。不幸的是，我没有足够的声誉来发表评论而不是回答，因为我无法帮助您解决其他两个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-02T19:36:42.397

这是解决方案 - 我遇到了同样的问题。您需要创建一个离散的 ICellStyle 并将其分配给单元格的 CellStyle，而不是仅在单元格的当前 CellStyle 上调用“SetFont()”。

在将样式应用于所有单元格时，我遇到了同样的问题。我评论了导致它的行，下一行是有效的（和 ICellStyle 部分）：

```
 let workbook:HSSFWorkbook = new HSSFWorkbook()
        let worksheet:ISheet =  workbook.CreateSheet(sheetName)

        let fontbold = workbook.CreateFont()
        fontbold.Boldweight <- (int16 FontBoldWeight.Bold)
        fontbold.FontHeightInPoints <- 10s
        fontbold.FontName <- "Arial"

        let cellstylebold:ICellStyle = workbook.CreateCellStyle()
        cellstylebold.SetFont(fontbold)

        let row:IRow = worksheet.CreateRow(0)

        for h in 0..headers.Length-1 do
            let cell = row.CreateCell(h)
            cell.SetCellValue(headers.[h])
            //cell.CellStyle.SetFont(fontbold)
            cell.CellStyle <- cellstylebold 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-16T14:40:46.277

Rory 提出的一种可能的解决方案是在创建单元格时设置 CellStyle，然后才使用 GetCell(x) 设置值。

我遇到了同样的错误，因为我在创建 CellStyle 后尝试更改它，并以这种方式解决了更改顺序：

```
//CREATE STYLE
ICellStyle styleCenter1 = hssfworkbook.CreateCellStyle();
styleCenter1.Alignment = HorizontalAlignment.Center;
styleCenter1.VerticalAlignment = VerticalAlignment.Center;
styleCenter1.WrapText = true;
styleCenter1.SetFont(font1);

//CREATE ROW
IRow row = sheet1.CreateRow(z);

//SETTING CELLSTYLE WHILE CREATING CELL
row.CreateCell(0).CellStyle = styleCenter1;

//SETTING CELLVALUE AFTER
row.GetCell(0).SetCellValue(listaSocieta[x]); 
```

再见，

雷蒙多

# actionscript-3 - flex bitmapdata 在发布时为空，但在调试模式下不是

> ID：15937054
> 
> 赞同：0
> 
> 时间：2013-04-10T21:47:32.790
> 
> 标签：actionscript-3, flash, apache-flex

我有以下代码。（它很丑，因为我已经尝试了很多东西来让它工作。）所以我设置了img.source，并等待它加载，所以我可以使用它的位图数据。有趣的是，在调试模式下它运行完美，我们进入 else 部分一次，但在发布模式下，它进入无限循环，因为 img.bitmapData 永远保持为空。如何在发布模式下获取位图数据？谢谢！

```
 protected function completeHandler(event:Event):void
        {
            img.source = fileReference.data;
            encodeAndSendIfBitmapDataAvailable();
        }

        protected function encodeAndSendIfBitmapDataAvailable():void {
            if(img.bitmapData != null) {
                setTimeout(encodeAndSend, 1000);
                mylog("Starting encoding...");
            } else {
                setTimeout(encodeAndSendIfBitmapDataAvailable, 1000);
                mylog("loading image...");
            }
        }
....
<s:Image id="img" right="10" top="10" maxHeight="145" maxWidth="145"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:17:23.030

从安全方面来看，播放器和调试器在不同的沙箱中运行。处理所有其他事件并记录它们，看看是否发生了安全违规。

# php - cURL WRITEFUNCTION 未被调用

> ID：15937055
> 
> 赞同：0
> 
> 时间：2013-04-10T21:47:39.757
> 
> 标签：php, curl, callback

当我运行以下函数时，它会按预期检索 HTML，但 WRITEFUNCTION 回调没有显示任何生命迹象。没有回显，变量 $this->test_output 保持不变。

```
function get_headers($urls){
    $curly = array();
    $result = array();
    $mh = curl_multi_init();
    $obj = $this;
    $test = function ($ch, $str) use ($obj){
        echo '<p class="red">--Hello World--</p>';
        $obj->test_output = 'Hello World';
        return strlen($str);
    };
    foreach ($urls as $key => $url) {
        $curly[$key] = curl_init();
        curl_setopt($curly[$key], CURLOPT_URL,            $url);
        curl_setopt($curly[$key], CURLOPT_HEADER,         0);
        if (is_callable($test)){
            curl_setopt($curly[$key], CURLOPT_WRITEFUNCTION, $test);
        } else {
            echo '<p class="red">--FUNCTION NOT VALID--</p>';
        }
        curl_setopt($curly[$key], CURLOPT_RETURNTRANSFER, 1);
        curl_multi_add_handle($mh, $curly[$key]);
    }
    $running = null;
    do {
        curl_multi_exec($mh, $running);
    } while($running > 0);
    foreach($curly as $key => $cnt) {
        $content = curl_multi_getcontent($cnt);
        curl_multi_remove_handle($mh, $cnt);
        if (strlen($content) > 0){
            $result[$key] = $content;
        } else {
            curl_multi_close($mh);
            return FALSE;
        }
    }
    curl_multi_close($mh);
    echo "<pre class='red'>";
    print_r($this->test_output);
    echo "</pre>";
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:34:07.330

看起来 cURL 有点问题。我写了一个更简单的函数，发现 WRITEFUNCTION 只有在它是最后一个指定的选项时才会被调用。当我将该行放在任何其他选项之前时，它被简单地忽略了：

```
function get_html(){
    $url = 'http://www.example.com';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_WRITEFUNCTION, function($ch, $str){return -1;});
    $result = curl_exec($ch);
    curl_close($ch);
    return $result;
} 
```

# mongoengine - 如何使用 mongoengine 实现乐观锁定？

> ID：15937058
> 
> 赞同：1
> 
> 时间：2013-04-10T21:47:43.480
> 
> 标签：mongoengine, optimistic-locking

我使用[mongoengine](http://mongoengine.org/)访问 mongoDB，我正在寻找一种简单的方法来实现乐观锁定方案。理想情况下，我想在文档中有一个`version`整数字段，并在每次修改文档时递增它，就像在[mongodb 文档](http://docs.mongodb.org/manual/tutorial/isolate-sequence-of-operations/)中描述的那样。如果文档对象的当前版本与 mongodb 中的文档版本不匹配，则保存文档应该会失败。

我对 mongoengine 有点迷茫。到目前为止，我实现了这一点。它有效，但我总是需要重新加载对象，这似乎真的不是最理想的。有更好的主意吗？

```
class OptimisticLockException(Exception):
    pass

class TodoList(Document):
    name = StringField()
    tasks = ListField(StringField())
    version = IntField()

    def add_task(self, task):
        qs = self.__class__.objects(id = self.id, version= self.version)
        nb_updated = qs.update_one(push__tasks = task, inc__version = 1)
        if nb_updated == 0:
            raise OptimisticLockException("Object was changed.")
        self.reload()  # <= CAN'T I AVOID THIS?

todo_list_1 = TodoList.objects.create(name = "Get rich",
                  tasks = ["Buy bitcoins", "Buy some more"])
todo_list_2 = TodoList.objects.get(name = "Get rich") # get the same

todo_list_1.add_task("Sell everything")
try:
    todo_list_2.add_task("Watch it crash!")
except OptimisticLockException:
    print "It crashed..."

todo_list_1.reload()
print todo_list_1.tasks  # prints [u'Buy bitcoins',u'Buy some more',
                         # u'Sell everything'] 
```

# java - 使用 UnsatisfiedLinkError 解析 Java CDF 文件

> ID：15937061
> 
> 赞同：0
> 
> 时间：2013-04-10T21:47:53.237
> 
> 标签：java, exception, unsatisfiedlinkerror, cdf

我正在使用 Java 中的 CDF（文件万事达卡使用）文件解析器，我正在使用[此处](http://cdf.gsfc.nasa.gov/)找到的 API 。为了使用这个 API，你需要 jar 文件..

我不明白我是如何得到这个异常的，因为它应该在 getFile() 方法中处理..我用谷歌搜索了一下，我仍然不明白问题是什么..如果有人能指出我的正确那会很棒的方向。通过跟踪堆栈跟踪 .. 对我来说，这似乎是图书馆的问题。

在这里可以找到 api 的链接：http: [//cdf.gsfc.nasa.gov/cdfjava_doc/cdf34/](http://cdf.gsfc.nasa.gov/cdfjava_doc/cdf34/)

尝试打开 CDF 文件时，运行程序后出现此错误：

```
 Exception in thread "main" java.lang.UnsatisfiedLinkError: no cdfNativeLibrary in jav
a.library.path                                                                       
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860)                  
        at java.lang.Runtime.loadLibrary0(Runtime.java:845)                          
        at java.lang.System.loadLibrary(System.java:1084)                            
        at gsfc.nssdc.cdf.CDFNativeLibrary.<clinit>(CDFNativeLibrary.java:47)        
        at gsfc.nssdc.cdf.CDF.open(CDF.java:426)                                     
        at gsfc.nssdc.cdf.CDF.open(CDF.java:385)                                     
        at FileModel.getFile(FileModel.java:21)                                      
        at FileModel.main(FileModel.java:9) 
```

这是我的源代码：

```
import gsfc.nssdc.cdf.*;
import gsfc.nssdc.cdf.util.*;

public class FileModel
{

    public static void main(String[] args)
    {
        getFile();
    }

    public static void getFile()
    {

        try
        {
            CDF cdf = CDF.open("outbound_MidCycle_File.xml");
            //System.out.println(cdf.getID());
        }
        catch(CDFException e)
        {
            System.out.println("ERROR Cannot open CDF File");
        }
        catch(Exception e)
        {
            System.out.println("ERROR");
            System.out.println(e.getMessage());
            e.printStackTrace();
        }

    }

} 
```

我运行的命令如下：

```
javac -cp '.:cdfjava.jar' FileModel.java
java -cp '.:cdfjava.jar' FileModel 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T17:39:26.180

You still have to install the CDF Software Distribution on the system prior to using the API. Download the appropriate version from [http://cdf.gsfc.nasa.gov/html/sw_and_docs.html](http://cdf.gsfc.nasa.gov/html/sw_and_docs.html) and install it - that should clear up the "Native Library" issue (or at least did for me).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:53:13.857

这并不能解决您的全部问题，但应该解决一些谜团：

UnsatisfiedLinkError 是一个`Throwable`，而不是一个`Exception`。这就是为什么你的代码没有捕捉到它。替换`catch(Exception e)`为`catch(Throwable e)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-28T17:59:27.290

你得到的 CDF 库是我们在空间物理学中使用的，用于特定的文件格式，与

# android - Webview 仅在某些页面上显示原始 HTML 文本

> ID：15937063
> 
> 赞同：4
> 
> 时间：2013-04-10T21:48:05.737
> 
> 标签：android, android-webview, httprequest, webresponse

我正在做一个项目，我们有兴趣从 WebView 拦截一些 HTTP 流量，然后将一些额外的标头附加到请求中，然后返回并在 WebView 中显示它。

为此，我们使用 shouldInterceptRequest(WebView view, String URL) 方法，该方法返回 webview 应该显示的 WebResourceResponse。

这是我所做的：

```
private WebResourceResponse handleRequest(String url){
    Log.d(TAG, "Intercepting request at : " + url);
    HttpURLConnection connection = null;        
    URL serverAddress = null;           
    WebResourceResponse response = null;
    InputStream is = null;
    String type = null;
    String encoding = null;
    int statusCode;
    int length;

    try
    {
        //Set up the initial connection
        serverAddress = new URL(url);
        connection = (HttpURLConnection)serverAddress.openConnection();

        // Initiate a HEAD request to get meta data
        connection.setRequestMethod("HEAD");

        // Let the WebView handle requests with no headers in them.
        Map<String, List<String>> headers = connection.getHeaderFields();
        if(headers == null){
            Log.d(TAG, "Retrieved response with zero headers at: " + url);
            return null;
        }

        statusCode = connection.getResponseCode();

        if(statusCode == 200){
            // OK, delegate request if content length is large enough
            type = connection.getContentType();
            encoding = connection.getContentEncoding();
            length = connection.getContentLength();

            Log.d(TAG, "ContentType = " + type + " encoding = " + encoding + " " + url);

           connection.disconnect();

            if(length > SIZE_THRESHOLD){
                // send to other device

                Log.d(TAG, "Delegating request to other device NOT IMPLEMENTED");
                // TODO: Currently just handling them locally.
            }
            else{
                connection = (HttpURLConnection)serverAddress.openConnection();
                connection.setRequestMethod("GET");             
                is = connection.getInputStream();
                statusCode = connection.getResponseCode();
                type = connection.getContentType();
                encoding = connection.getContentEncoding();

                Log.d(TAG, "Done Loading " + url);

                return new WebResourceResponse(type, encoding, is);
            }

        }
    } 
    catch (MalformedURLException e) {
            e.printStackTrace();
    }
    catch (ProtocolException e) {
            e.printStackTrace();
    } 
    catch (IOException e) {
        Log.d(TAG, "IOException when connection to : " + url + " Stacktrace: " + Log.getStackTraceString(e));
    }
    return response;
} 
```

如果我尝试加载像“www.madopskrifter.nu”或“www.newz.dk”这样的页面，那么我会得到整个内容，并显示图片和所有内容。但是，如果我浏览像 stackoverflow 这样的页面，我只会在 stackoverflow.com 上获得 HTML 索引文件。youtube.com 也是如此。（我确实在 WebView 设置中启用了 JavaScript）

有什么我想念的吗？目前我什至没有添加我自己的标题或任何东西，我只是简单地返回相同的响应，除了我“手动”获取它们。（此外，我现在没有处理带有零标头的请求，但即使我注释掉该代码，问题仍然存在）。

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-05T17:51:28.293

我找到了解决我遇到的同样问题的方法，YMMV：

我的 HttpUrlConnection 正在返回：

*   编码：空
*   mimeType：“文本/html；字符集=utf-8”

这就是问题所在。

我现在检查 html 文件，并更改为：

*   编码：“UTF-8”
*   mimeType：“文本/html”

例子：

```
String responseEncoding = urlConnection.getContentEncoding();
String responseMimeType = urlConnection.getContentType();

String html = "";
if (resourceUrl.endsWith("html"))
{
    responseEncoding = "UTF-8";
    responseMimeType = "text/html";
}

if((responseCode == 200) && (!is.equals("")))
{
    return new WebResourceResponse(responseMimeType, responseEncoding, returnStream); 
} else
{
    return null;
} 
```

# android - Facebook android v2 已弃用

> ID：15937067
> 
> 赞同：0
> 
> 时间：2013-04-10T21:48:31.490
> 
> 标签：android, facebook, deprecated

我收到一条通知，称在 6 月，Android v2 版 Facebook 将被弃用且不再工作。我用最新的 v3 jar 替换了我的 facebook jar，我的 android 应用程序中的现有代码仍然可以正常工作。它们都标有@deprecated。这足以满足要求还是我必须在 6 月之前重新编码我的整个 Facebook 集成？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:53:48.613

您最好重写程序（使用新的 api），因为如果它被标记为已弃用，它可能会在某个时候从代码中删除，从而使您的程序无用。

# php - 试图从多个选择中保存一个 hasMany 数组

> ID：15937068
> 
> 赞同：0
> 
> 时间：2013-04-10T21:48:35.213
> 
> 标签：php, arrays, cakephp, cakephp-2.0

我正在尝试从多项选择中保存数据。该数据在“请求”有许多“请求c”的地方被重新定义。foriegnKey 是“request_id”

我的控制器：

```
if ($this->request->is('post')) {

    $solicitacao = $this->Request->save($this->request->data['Request']);

    //Verifica se a request foi salva e se sim, salva quais as certidões foram pedidas na tabela requests_certidoes
    if(!empty($solicitacao)) {
        $this->request->data['Requestc']['request_id'] = $this->Request->id;
    //  debug($this->request->data);

        $this->Request->Requestc->saveAll($this->request->data);
    }
} 
```

这是我的数据`$this->request->data`：

```
array(
'Request' => array(
    'motivo' => 'Licitação',
    'nome_licitacao' => '',
    'data_pregao' => '',
    'nome_cliente' => '',
    'outros' => ''
),
'Requestc' => array(
    'caminho' => array(
        (int) 0 => '1',
        (int) 1 => '3'
    ),
    'request_id' => '60'
) 
```

)

这就是错误：

错误：SQLSTATE [42S22]：未找到列：1054“字段列表”中的未知列“数组”

SQL 查询： INSERT INTO `societario`。`requests_certidoes`( `caminho`, `request_id`) 值（数组，62）

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:14:10.487

您需要修改发布的数据，使其看起来像这样：

```
array(
    'Request' => array(
        'motivo' => 'Licitação',
        'nome_licitacao' => '',
        'data_pregao' => '',
        'nome_cliente' => '',
        'outros' => ''
    ),
    'Requestc' => array(
        0 => array(
            'caminho' => '1',
            // --> optionally add your request_id here
            //     if you're manually saving Requestc
            //     AFTER saving Request
        ),
        1 => array(
            'caminho' => '3',
        )
    )
) 
```

如果您的关系设置正确，您可能不必添加 request_id；

```
$data = array(
    'Request' => $this->request->data['Request'],
    'Requestc' => array();
);

foreach($this->request->data['Requestc']['caminho'] as $val) {
    $data['Requestc'][] = array(
        'caminho' => $val,

        // Should NOT be nescessary when using the saveAssociated()
        // as below
        //'request_id' => $this->Request->id;
    );
}

// This should insert both the Request *and* the Requestc records
$this->Request->saveAssociated($data); 
```

请参阅文档：[保存相关模型数据（hasOne、hasMany、belongsTo）](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto)

但是，如果`Requestc.caminho`存储`id`of `Certificates`，这似乎是一个 HABTM 关系； `Request --> HABTM --> Certificate`，在这种情况下，应该调用连接表`certificates_requests`并包含列`request_id`和`certificate_id`。请参阅[模型和数据库约定](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)

# javascript - 如何使用 Adsafe 配置 JSHint？

> ID：15937069
> 
> 赞同：0
> 
> 时间：2013-04-10T21:48:37.587
> 
> 标签：javascript, jshint

有人知道如何使用*安全*和广告安全选项配置*JSHint吗？*我浏览了[http://www.jshint.com/docs/](http://www.jshint.com/docs/)但没有找到任何这样的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:54:34.537

开发人员已根据此链接删除了 Adsafe 依赖项：[https](https://github.com/jshint/jshint/issues/3) ://github.com/jshint/jshint/issues/3 。

# paypal - 我需要通过 php 中的 api 支付给 paypal 定期付款的总金额列表

> ID：15937071
> 
> 赞同：0
> 
> 时间：2013-04-10T21:48:47.510
> 
> 标签：paypal, payment-processing, paypal-subscriptions

任何人都可以告诉我如何通过 api 获得总付款清单以及他们的 paypal 定期付款金额

任何将不胜感激 NVP 或 SOAP 但它应该是 php 代码或任何参考

前 X 先生在我的网站上为我的杂志订阅了一项服务，然后他们将被要求每 6 个月定期支付 450 美元

2年后，我想列出该profileid上的总付款

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:03:33.720

您可以使用[TransactionSearch API](https://www.x.com/developers/paypal/documentation-tools/api/transactionsearch-api-operation-nvp)并使用电子邮件地址或配置文件 ID 搜索给定的时间范围。然后，这将为您提供与电子邮件地址或个人资料 ID 相关的所有交易，具体取决于您搜索的内容。

```
<?php

/** TransactionSearch NVP example; last modified 08MAY23.
 *
 *  Search your account history for transactions that meet the criteria you specify. 
*/

$environment = 'sandbox';   // or 'beta-sandbox' or 'live'

/**
 * Send HTTP POST Request
 *
 * @param   string  The API method name
 * @param   string  The POST Message fields in &name=value pair format
 * @return  array   Parsed HTTP Response body
 */
function PPHttpPost($methodName_, $nvpStr_) {
    global $environment;

    // Set up your API credentials, PayPal end point, and API version.
    $API_UserName = urlencode('my_api_username');
    $API_Password = urlencode('my_api_password');
    $API_Signature = urlencode('my_api_signature');
    $API_Endpoint = "https://api-3t.paypal.com/nvp";
    if("sandbox" === $environment || "beta-sandbox" === $environment) {
        $API_Endpoint = "https://api-3t.$environment.paypal.com/nvp";
    }
    $version = urlencode('51.0');

    // Set the curl parameters.
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $API_Endpoint);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);

    // Turn off the server and peer verification (TrustManager Concept).
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);

    // Set the API operation, version, and API signature in the request.
    $nvpreq = "METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature$nvpStr_";

    // Set the request as a POST FIELD for curl.
    curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

    // Get response from the server.
    $httpResponse = curl_exec($ch);

    if(!$httpResponse) {
        exit("$methodName_ failed: ".curl_error($ch).'('.curl_errno($ch).')');
    }

    // Extract the response details.
    $httpResponseAr = explode("&", $httpResponse);

    $httpParsedResponseAr = array();
    foreach ($httpResponseAr as $i => $value) {
        $tmpAr = explode("=", $value);
        if(sizeof($tmpAr) > 1) {
            $httpParsedResponseAr[$tmpAr[0]] = $tmpAr[1];
        }
    }

    if((0 == sizeof($httpParsedResponseAr)) || !array_key_exists('ACK', $httpParsedResponseAr)) {
        exit("Invalid HTTP Response for POST request($nvpreq) to $API_Endpoint.");
    }

    return $httpParsedResponseAr;
}

// Set request-specific fields.
$transactionID = urlencode('example_transaction_id');

// Add request-specific fields to the request string.
$nvpStr = "&TRANSACTIONID=$transactionID";

// Set additional request-specific fields and add them to the request string.
$startDateStr;          // in 'mm/dd/ccyy' format
$endDateStr;            // in 'mm/dd/ccyy' format
if(isset($startDateStr)) {
   $start_time = strtotime($startDateStr);
   $iso_start = date('Y-m-d\T00:00:00\Z',  $start_time);
   $nvpStr .= "&STARTDATE=$iso_start";
  }

if(isset($endDateStr)&&$endDateStr!='') {
   $end_time = strtotime($endDateStr);
   $iso_end = date('Y-m-d\T24:00:00\Z', $end_time);
   $nvpStr .= "&ENDDATE=$iso_end";
}

// Execute the API operation; see the PPHttpPost function above.
$httpParsedResponseAr = PPHttpPost('TransactionSearch', $nvpStr);

if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) {
    exit('TransactionSearch Completed Successfully: '.print_r($httpParsedResponseAr, true));
} else  {
    exit('TransactionSearch failed: ' . print_r($httpParsedResponseAr, true));
}

?> 
```

# c# - 如何在 C# 中进入可观察集合？

> ID：15937073
> 
> 赞同：0
> 
> 时间：2013-04-10T21:48:49.837
> 
> 标签：c#, observablecollection

假设我有一个主题并调用 OnNext()。我希望能够按 F11，然后转到在调用订阅时设置的回调。现在这似乎不可能，即使回调发生在同一个线程上。

这是否有原因不起作用（我确定有，我只是不知道它是什么）。

# javascript - jQuery 错误：SyntaxError：缺失：属性 id 之后

> ID：15937078
> 
> 赞同：2
> 
> 时间：2013-04-10T21:49:03.673
> 
> 标签：javascript, jquery

我的页面中有一些 jQuery 不断给出错误：

```
SyntaxError: missing : after property id 
```

在这段代码中。

```
 $(document).scroll(function(){
        var t1 = $("#main-page").offset().top;
        if($(this).scrollTop() >= t1) {   
        $('#menu-item-70').css({"background-color: #fff"});
        }
    }); 
```

Firebug 说它在这条线上：`$('#menu-item-70').css({"background-color: #fff"});`

我似乎无法找到为什么它会给出这个错误。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T21:50:11.593

改变：

```
$('#menu-item-70').css({"background-color: #fff"}); 
```

到：

```
$('#menu-item-70').css({"background-color": "#fff"}); 
```

另请注意，滚动事件被多次触发，我建议：

```
.white-bg { background-color: #fff } 
```

```
var timeout = '',
    offset = $("#main-page").offset().top,
    $elem = $('#menu-item-70');

$(window).scroll(function(){
    clearTimeout(timeout);
    var top = $(this).scrollTop();
    timeout = setTimout(function(){
       $elem.toggleClass('white-bg', top >= offset);
    }, 100);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:50:06.057

您错误地完成了 CSS 对象：

```
 $('#menu-item-70').css({"background-color": "#fff"}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T21:50:09.667

您使用 css() 错误。

尝试改变：

```
$('#menu-item-70').css({"background-color: #fff"}); 
```

到：

```
$('#menu-item-70').css({"background-color": "#fff"}); 
```

所以你的完整代码如下所示：

```
 $(document).scroll(function(){
     var t1 = $("#main-page").offset().top;
     if($(this).scrollTop() >= t1) {   
        $('#menu-item-70').css({"background-color": "#fff"});
     }
 }); 
```

# ios - 如何使用 NIB 文件推送 UIViewController

> ID：15937079
> 
> 赞同：4
> 
> 时间：2013-04-10T21:49:15.787
> 
> 标签：ios, uiviewcontroller, push, nib

我是 iOS 开发的新手，我很头疼，不理解一些可能很容易的东西。基本上我使用 UITableViewController 去另一个 UITableViewController，但是我需要从第二个 UITableViewController 去一个 UIViewController。我希望这个 UIViewController 有一个 .xib 文件让我制作一个快速的 UI，但我似乎找不到从第二个 UITableViewController 推送到这个 UIViewController 的方法。我设法以编程方式显示标签，但不是来自 .xib 的 UI。

这是与编程标签一起使用的代码：

```
- (void)tableView:(UITableView *)tableView
accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    self.detailController.title = @"Disclosure Button Pressed";
    NSString *selectedMovie = self.movies[indexPath.row];
    NSString *detailMessage = [[NSString alloc]
                                initWithFormat:@"This is details for %@.",
                                selectedMovie];
    self.detailController.message = detailMessage;
    self.detailController.title = selectedMovie;
    [self.navigationController pushViewController:self.detailController
                                        animated:YES];
} 
```

这是 UIViewController 的 .m 文件，用于以编程方式显示 UILabel。

```
@implementation BIDDisclosureDetailViewController
- (UILabel *)label;
{
    return (id)self.view;
}
- (void)loadView;
{
    UILabel *label = [[UILabel alloc] init];
    label.numberOfLines = 0;
    label.textAlignment = NSTextAlignmentCenter;
    self.view = label;
}
- (void)viewWillAppear:(BOOL)animated;
{
    [super viewWillAppear:animated];
    self.label.text = self.message;
}
@end 
```

基本上我不想以编程方式创建任何 UIObject，我需要一个 .xib 来创建 UI。

谢谢

（iOS 6，不使用情节提要）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T23:37:36.257

`UIViewController`从 xib加载 a很容易。当您的 tableview 委托发送`didSelectRowAtIndexPath:`消息时，您可以加载 xib 并显示视图控制器，如下所示：

```
BIDDisclosureDetailViewController *controller = [[BIDDisclosureDetailViewController alloc] initWithNibName:@"BIDDisclosureDetailView" bundle:nil];

[self.navigationController pushViewController:controller animated:YES]; 
```

需要注意的一些事项：

1.  您无需从 xib 加载视图控制器，而仅加载视图。这就是为什么在上面的代码中我使用创建视图控制器的新实例`initWithNibName:bundle:`
2.  为了让所有这些在 IB 中正确连接，您将 xib 中的“文件所有者”设置为正确的视图控制器类型 (BIDDisclosureDetailViewController)。
3.  确保也删除其中的`loadView`代码，尝试使用 xib 时会搞砸。

**边注！**你不应该在这样的方法签名的末尾有分号：

```
- (void)viewWillAppear:(BOOL)animated; 
```

它被认为是不好的形式。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:52:24.267

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    ViewControllerToBePushed *viewController = [[ViewControllerToBePushed alloc] initWithNibName:@"ViewControllerToBePushed" bundle:nil];

[self.navigationController pushViewController:viewController animated:YES];
} 
```

选择特定行时，使用上述方法推送到视图控制器

# ruby - 允许定制内容通讯的服务

> ID：15937080
> 
> 赞同：0
> 
> 时间：2013-04-10T21:49:16.533
> 
> 标签：ruby, email, sendmail, mailchimp, campaign-monitor

我目前正在考虑构建一个网络应用程序，该应用程序允许用户登录并在电子邮件中接收他们上周的推文列表，这些信息将被存储并从数据库中提取

现在起初我以为我可以使用邮戳之类的东西，但这显然仅适用于交易电子邮件，而不适用于批量通讯。我想我的会是一个时事通讯，因为它会每周在同一时间发送给很多人。但我的问题是我如何使用像 mailchimp 这样的服务，它允许为每个 recipent 提供完全定制的内容？这可以通过 mailchimp 或活动监视器等服务实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:06:16.120

如果您希望在一个电子邮件活动中为每个订阅者定制内容（动态内容），MailChimp 是您的最佳选择。Campaign Monitor 尚未实现该功能。

如果您是开发人员，另一种选择是使用[Sendgrid](http://sendgrid.com/)。

# sql - 带有 SELECT 的复杂过程

> ID：15937084
> 
> 赞同：0
> 
> 时间：2013-04-10T21:49:20.047
> 
> 标签：sql, oracle, plsql, oracle11g

我必须创建一个返回选择查询结果的过程（我知道简单的视图更好，但这是一个练习，所以......我必须^^“）

我做了这个程序，但这并不完美：

```
CREATE OR REPLACE PROCEDURE NbMoyenSession
IS
t1.nbSession t1.nbSession%TYPE;
t2.nbSessionCount t2.nbSession%TYPE;
BEGIN
--DECLARE nbSession Int;
SELECT t1.numsession, count(t2.numsession) INTO nbSession, nbSessionCount FROM table1 t1, table2 t2 WHERE t1.numsession = t2.numsession Group By t1.numsession;
dbms_output.put_line('test: ' ||t1.nbSession);
END;

EXECUTE PROCEDURE NbMoyenSession (); 
```

我真的迷失在这个练习中，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:06:01.753

您遇到了麻烦，因为您将多行选择到两个标量变量中。完成此操作的最快方法是使用`SYS_REFCURSOR`：

```
CREATE OR REPLACE PROCEDURE NbMoyenSession(NbSession OUT SYS_REFCURSOR)
IS
BEGIN
  OPEN NbSession FOR
    SELECT t1.numsession, count(t2.numsession)
       FROM table1 t1, table2 t2
       WHERE t1.numsession = t2.numsession
       GROUP BY t1.numsession;
END; 
```

要在 SQL*Plus 中对其进行测试，只需执行以下操作：

```
SQL> VARIABLE testCur REFCURSOR
SQL> EXEC NbMoyenSession :testCur
SQL> PRINT testCur 
```

在上面的第二行中，您需要冒号 ( `:`) `testCur`，但在第一行或第三行中不需要。

# excel - Excel VBA 宏：创建提取重复记录并粘贴到新工作表中的宏

> ID：15937086
> 
> 赞同：0
> 
> 时间：2013-04-10T21:49:30.117
> 
> 标签：excel, vba

我一直在尝试创建一个简单的宏，它从源工作表中获取所有重复记录并将它们粘贴到新工作表中。

我一直在搞乱，我得到的最接近的是创建一个列表，该列表提取除集群中的第一个重复值之外的所有重复值。例如，如果一个列表如下所示： 1 1 2 3 4 5 1

带有重复项的工作表将列出：1 1

它将认为'1'的第一个实例是唯一的，这完全不是我想要的。我希望它显示重复行的每个实例，所以我喜欢这个：1 1 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:56:23.527

这是我处理重复项的方法。它不是宏，但对我有用：

1.  对具有重复项的列进行排序。（对于这个例子，说 C 列）
2.  在新列中，编写一个 IF 函数。例如在单元格 D5 中： =if(c5=c4,1,"")
3.  将单元格 D5 复制到整个列表。
4.  将值列 D复制并*[粘贴到自身上。](http://office.microsoft.com/en-au/excel-help/copy-cell-values-not-formulas-HA010244903.aspx)*例如在步骤 2 中，公式被替换为“1”
5.  对 D 列进行排序
6.  任何带有 1 的行都是重复的。你爱怎么做就怎么做！

你也可以做一些事情，比如找到 D 列的总和（告诉我有多少重复项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:00:13.373

**在 OP 澄清后，将根据需要执行以下程序：**

```
Sub CopyDuplicates()
'***************************************************************
'** This proc expects you to select all the cells in a single **
'** column that you want to check for duplicates in. If dup-  **
'** licates are found, the entire row will be copied to the   **
'** predetermined sheet.                                      **
'***************************************************************

Dim ShO As Worksheet
Dim Rng1 As Range
Dim pRow As Integer
Dim c As Range, cTmp As Range
Dim found
Dim Addresses() As String
Dim a() As String
Dim p2 As Integer
Dim tfFlag As Boolean, sTmp As Variant

Set ShO = Worksheets("Sheet2") 'You can change this to whatever worksheet name you want the duplicates in
Set Rng1 = Application.Selection 'Rng1 is all the currently selected cells
pRow = 1 'This is the first row in our outpur sheet that will be used to record duplicates
ReDim a(0) 'Initialize our array that holds found values

For Each c In Rng1.Cells 'Cycle through each cell in our selected range
ReDim Addresses(0) 'This array holds the cell address for our duplicates.
                   'We will reset the array each time we move to the next cell

'Now check the array of already found duplicates.
'If the current value is already there skip to next value
tfFlag = False
For Each sTmp In a
    If CStr(c.Value) = sTmp Or CStr(c.Value) = "xXDeleteXx" Then 'We've already done this value, move on
        tfFlag = True
        Exit For
    End If
Next

    If Not tfFlag Then 'Remember the flag is true when we have already located the
                       'duplicates for this value, so skip to next value
        With Rng1
            Set found = .Find(c.Value, LookIn:=xlValues) 'Search entire selected range for value
            If Not found Is Nothing Then 'Found it
                Addresses(0) = found.Address 'Record the address we found it
                Do 'Now keep finding occurances of it
                    Set found = .FindNext(found)
                    If found.Address <> Addresses(0) Then
                        ReDim Preserve Addresses(UBound(Addresses) + 1)
                        Addresses(UBound(Addresses)) = found.Address
                    End If
                Loop While Not found Is Nothing And found.Address <> Addresses(0) 'Until we get back to the original address

                If UBound(Addresses) > 0 Then 'We Found Duplicates
                    a(UBound(a)) = c.Value 'Record the value we found a duplicate for in an array
                    ReDim Preserve a(UBound(a) + 1) 'add an empty spot to the array for next value

                    ShO.Range("A" & pRow).Value = "Duplicate Rows for Value " & c.Value & _
                              " in Column " & c.Column & " on original sheet" 'Add a label row
                    pRow = pRow + 1 'Increment to the next row
                    For p2 = UBound(Addresses) To 0 Step -1 'Cycle through the duplicate addresses
                        Set cTmp = Rng1.Worksheet.Range(Addresses(p2)) 'we just want to easily get the correct row to copy
                        Rng1.Worksheet.Rows(cTmp.Row).Copy ShO.Rows(pRow) 'Copy form orig to duplicates sheet
                            cTmp.Value = "xXDeleteXx" 'Mark for Delete the original row
                        pRow = pRow + 1 'Increment row counter
                    Next p2
                    pRow = pRow + 1 'This increment will give us a blank row between sets of dupicates
                End If
            End If
        End With
    End If
Next
'Now go delete all the marked rows

Do
tfFlag = False
For Each c In Rng1
    If c.Value = "xXDeleteXx" Then
        Rng1.Worksheet.Rows(c.Row).Delete (xlShiftUp)
        tfFlag = True
    End If
Next
Loop Until tfFlag = False

End
End Sub 
```

# css - 触发动画元素到达 div ID

> ID：15937093
> 
> 赞同：0
> 
> 时间：2013-04-10T21:49:59.170
> 
> 标签：css, animation, triggers, launch, animated

这是怎么回事？

我正在寻找使用 Jquery 触发 css3 动画的解决方案或教程。

我知道我可以向 div 添加一个类以使用 css3 对其进行动画处理。但我只想在达到 div ID 时添加类！不是当我从顶部达到 XX 像素时。

示例： http://themes.swiftpsd.com/index.php?theme [=flexform中的技能栏](http://themes.swiftpsd.com/index.php?theme=flexform)

有人可以帮助我或给我一个很棒的教程吗？

顺便说一句，你们摇滚！

干杯，

琼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:00:37.183

这是一个有趣的，[jsFiddle](http://jsfiddle.net/apaul34208/vfQrD/2/)

```
$(document).scroll(function () {
var y = $(this).scrollTop();
var x = $("#myDiv").position();

if (y > (x.top - 50)) { // -50 so things don't overlap
    $(".magic").addClass(
        "bounceInRight");
}
else {
    $(".magic").removeClass(
        "bounceInRight");
}
}); 
```

来自[Animate.CSS的动画](http://daneden.me/animate/)

# jquery - jQuery幻灯片切换改变图像onclick

> ID：15937095
> 
> 赞同：0
> 
> 时间：2013-04-10T21:50:03.657
> 
> 标签：jquery, xhtml, slidetoggle

我正在使用 .slideToggle 在单击图像时显示/隐藏内容，当内容显示时它会更改一次，但在再次单击以隐藏内容时不会变回原始图像，不太确定我在做什么在这里失踪。非常感谢任何帮助。

jQuery：

```
$(document).ready(function() {

    $('#toggle1').click(function() {
        $('.toggle1').slideToggle('1100');
        $("#bg").attr('src',"images/box-arrow-down.jpg");
        return false;

    }); 
```

的HTML：

```
<div class="box">
  <div style="width:1100px;height:100px;margin-left:40px;">
    <span style="float:left;"><a href="#" id="toggle1"><img src="images/box-arrow-up.jpg" height="16" width="17" alt="arrow" id="bg" style="margin-top:40px;" /></a></span>
  </div>
  <div class="toggle1" style="display:none;width:1100px;padding:0px;margin-left:8px;">
  <div class="boxTime">09:00</div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:58:11.507

你不参考原文`src`。你可以用数百种不同的方式来解决这个问题……但这里有几个例子。

你可以这样做：

```
$(document).ready(function() {
    $('#toggle1').click(function() {
        $('.toggle1').slideToggle('1100');
        var src = $("#bg").attr('src') == "images/box-arrow-down.jpg" ? "images/box-arrow-up.jpg" : "images/box-arrow-down.jpg";
        $("#bg").attr('src', src);
        return false;

    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/NCqRk/](http://jsfiddle.net/dirtyd77/NCqRk/)

或者是这样的：

```
$(document).ready(function() {
    var originalImage = $("#bg").attr('src');

    $('#toggle1').click(function() {
        $('.toggle1').slideToggle('1100');
        var src = $("#bg").attr('src') == originalImage ? "images/box-arrow-down.jpg" : originalImage;
        $("#bg").attr('src', src);
        return false;

    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/NCqRk/1/](http://jsfiddle.net/dirtyd77/NCqRk/1/)

# java - 使用 REST 服务 (Jersey/Jackson) 发送带有任意键值的 JSON

> ID：15937101
> 
> 赞同：4
> 
> 时间：2013-04-10T21:50:12.000
> 
> 标签：java, rest, jersey, jackson

我想从客户端发送这样的东西到休息服务

```
jsonObj =
{
   “信息”：{
       “field1”：“val1”..
......
       “字段N”：“valN”..
   }
}

```

而且我不确定如何使用休息服务来处理这个问题

```
Java 中的泽西岛和杰克逊
```

我不想使用带有 N 字段的 Jackson 属性来创建一个新的信息类，因为它们总是会改变。我只想获取 jsonObject 内部的 jsonObject 并将其作为 JsonObject 进行操作。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T22:04:54.937

假设您有一个正在读取结果的根对象，您可以`Map<String, Object>`在 jsonObj 中将 docInfo 定义为 a。这*可能会*奏效，但我目前无法尝试。

如果您没有根对象，您可以使用 a`Map<String, Object>`作为您的根对象并从那里开始使用它。该 Map 可以包含嵌套 json 对象的其他映射。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T22:29:04.520

是的，正如@digitialjoel 建议的那样，使用带有嵌入式地图的包装器对象。这是一个具体的例子：

```
class DocInfo {
    private Map<String, Object> docInfo;

    public DocInfo() {
        super();
    }

    public DocInfo(final Map<String, Object> docInfo) {
        super();
        this.docInfo = docInfo;
    }

    // Getters, setters
}

final Map<String, Object> data = new LinkedHashMap<String, Object>(4);
data.put("field1", "value1");
data.put("field2", "value2");
data.put("field3", "value3");
data.put("field4", "value4");
final DocInfo info = new DocInfo(data);
final ObjectMapper mapper = new ObjectMapper();
final String json = mapper.writeValueAsString(info);
System.out.println(json); 
```

输出：

> {"docInfo":{"field1":"value1","field2":"value2","field3":"value3","field4":"value4"}}

# .net - .net 反编译器的限制

> ID：15937105
> 
> 赞同：1
> 
> 时间：2013-04-10T21:50:24.970
> 
> 标签：.net, decompiler

所以我的雇主有这个旧的 .NET / C# 程序需要重写并且源代码已经丢失。它是由一位前雇员开发的，但他们已经好几年没来过这里了。也许这是他们的疏忽，也可能不是——在这一点上，这并不重要。

无论如何，所以我试图弄清楚它的作用，这让我开始思考 .NET 反编译器的局限性。

尝试反编译 .NET 就像尝试使缩小的 js 文件可读一样？使用缩小的 js，您可以将代码缩进到一些预先确定的编码标准，并且您可以重命名变量以匹配为它们分配值的函数的名称，但您仍然会丢失很多信息。您将丢失实际的变量名称和开发人员所做的任何评论。

这是一个公平的类比吗？

似乎这就是我的情况，或者开发人员真的没有留下任何评论，他确实根据变量的类型而不是它们的应用程序命名了一半的变量（我猜这与系统匈牙利语一致） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:03:29.997

注意：我所说的大部分内容都是基于 Java 的，但据我了解，CLR 的运行方式几乎相同。

基本上，它的工作方式是编译器将您的源代码转换为一种称为字节码的格式，然后可以由 VM 执行。通常，编译器不会费心优化它们生成的代码，因为无论如何它都会在运行时由 VM 进行优化。因此，如果代码是由标准编译器编译的并且没有经过混淆处理，那么字节码的翻译是非常直接且可预测的，这意味着您可以将其反编译成看起来合理的源代码。

但是，您仍然会丢失任何基本上是语法糖的东西。编译器将仅包含执行所需的内容。幸运的是，反射支持（如果启用了调试）意味着很多源代码级别的信息将保留在字节码中，可能是通过可选的元数据。但是即使使用反射也无法访问诸如空格和注释之类的内容，因此无法恢复它们。

与缩小 JS 的类比并不准确，但它仍然有用。对于 Javascript，源文件是 VM 的输入，因此没有可见的中间字节码阶段。缩小是优化器检查并重新格式化源代码的结果，但它仍然是源代码。另一方面，在这两种情况下，丢失的信息都是工具没有保存它的结果，因为它不需要执行。

如果文件被混淆了，那么所有这些都会消失。混淆器故意弄乱编译器引入的模式，并将删除所有可以选择的元数据。您通常仍然可以反编译混淆代码，但它会变得一团糟，并且不包含原始源的有用信息，例如格式和变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:11:18.327

反射不需要局部变量名称，因此它们被丢弃了。事实上，在字节码级别没有实际的局部变量，只有堆栈位置。评论也是如此——它们不会被保留。

您可以使用 MSIL 反汇编程序 (Ildasm.exe) 查看可执行文件中实际保留的内容。名称 strNN 等由反编译器生成，旨在帮助您恢复代码的逻辑。

# wpf - 在 XAML 中获取 ScrollViewer.ViewPortHeight

> ID：15937114
> 
> 赞同：0
> 
> 时间：2013-04-10T21:51:05.570
> 
> 标签：wpf, binding, scrollviewer

全部，

我确信这很容易做到，但我仍在努力做到这一点。我可以在代码隐藏中获取滚动查看器的 ViewPortHeight 并插入已加载和大小更改的事件以管理与 ViewPortHeight 相关的对象，但我想知道是否有更简单的方法来执行此操作而无需使用 CodeBehind。

即我想做的是以某种方式在 XAML 中获取 ViewPortHeight（和 ViewPortWidth）并将它们直接绑定到另一个元素的大小属性或我的 ViewModel（当然，使用我自己的 IValueconverter）。通过这种方式，我希望在调整窗口大小（或完成缩放转换）时更轻松地管理相关控件。

即在 PseudoCode 中，这是我希望完成的（没有 CodeBehind）

（假设 MyConverter 是资源中的 IValueConverter）

```
<ScrollViewer Name="MyScrollViewer">
    <loc:MyControl Width="{Binding Path=ViewPortWidth, ElementName=MyScrollViewer, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource MyConverter}, ConverterParameter=10}" />
</ScrollViewer> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:01:42.647

“管理与 ViewportWidth 相关的对象”——在我看来，您需要一个布局容器，例如允许您创建行和列的 Grid。在这些里面，你可以放置任何你想要的 UIElement。您还可以告诉单元格具有固定大小或使用基于可用空间的相对值。

如果你想弄清楚 ViewportWidth 你需要这样做：

```
<ScrollViewer Name="MyScrollViewer">
    <StackPanel>
     <Button Width="100"/>
     <Button Width="200"/>
     <Button Width="300"/>
     <Button Width="400"/>
    </StackPanel>
</ScrollViewer>
<TextBlock Text={Binding ElementName=MyScrollViewer, Path=ViewportWidth}"/> 
```

ScollViewer 具有称为 ViewportWidth 的属性。请参阅[http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:12:04.363

应该：

```
<ScrollViewer Name="MyScrollViewer">
    <loc:MyControl Width="{Binding Path=ViewportWidth, ElementName=MyScrollViewer, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource MyConverter}, ConverterParameter=10}" />
<!--Notice that it is ViewportWith, not ViewPortWidth-->
</ScrollViewer> 
```

# c# - 如何创建虚拟显示器？

> ID：15937115
> 
> 赞同：7
> 
> 时间：2013-04-10T21:51:11.070
> 
> 标签：c#, screen

问题很简单，但我想答案可能不是。

我想创建一个显示设备，GPU 将在其上渲染桌面或视频游戏。但是，此设备不会连接到视频卡端口上的任何物理屏幕。呈现的数据将通过网络检索并流式传输到其他地方。

有点类似于 OnLive 所做的，但我想通过 LAN 流式传输视频输出。显然，它必须是一个完整且真实的显示器，以便现有的应用程序或视频游戏可以在其上正常运行。

在 C# 中甚至可能吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-10T21:59:55.430

您肯定可以将其作为输出流与您处理的帧链接起来，通过管道传输到网络套接字等吗？

# c# - 使用 SqlStorage 时 Filehelpers 中的错误处理

> ID：15937123
> 
> 赞同：0
> 
> 时间：2013-04-10T21:51:55.163
> 
> 标签：c#, filehelpers

我提供了包含整数类型列的记录，而不是报告错误（如此处所述[）](http://filehelpers.sourceforge.net/example_errorhandling.html)在`InvalidCastException`下面的方法中得到（用于填充存储中的记录）：

```
protected void FillRecordOrder(object rec, object[] fields)
{
    OrdersVerticalBar record = (OrdersVerticalBar) rec;

    record.OrderDate = (DateTime) fields[0];
} 
```

如何使用 Filehelpers 库中的 SqlStorage 处理错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:38:37.077

字段[0]的内容是什么？你是说它包含一个整数？然后您需要以某种方式将其转换为 DateTime。就像是：

```
protected void FillRecordOrder(object rec, object[] fields)
{
    OrdersVerticalBar record = (OrdersVerticalBar) rec;

    if (fields[0] == null)
      record.OrderDate = DateTime.MinValue;
    else if (fields[0] is DateTime)
      record.OrderDate = (DateTime)fields[0];
    else if (fields[0] is int)
    {
      DateTime baseDate = new DateTime(1900, 1, 1);
      DateTime newDate = baseDate.AddDays((int)fields[0]);
      record.OrderDate = newDate;
    }
} 
```

# android - OpenCV中的Android按位异或错误

> ID：15937125
> 
> 赞同：3
> 
> 时间：2013-04-10T21:51:59.517
> 
> 标签：android, opencv, bit-manipulation, xor, bitwise-xor

我在 android 上尝试了按位异或，但出现以下错误：

```
04-11 00:25:47.404: E/cv::error()(7370): OpenCV Error: Sizes of input arguments do not match (The operation is neither 'array op array' (where arrays have the same size and type), nor 'array op scalar', nor 'scalar op array') in void cv::binary_op(cv::InputArray, cv::InputArray, cv::OutputArray, cv::InputArray, void (* const*)(const uchar*, size_t, const uchar*, size_t, uchar*, size_t, cv::Size, void*), bool), file /home/reports/ci/slave/50-SDK/opencv/modules/core/src/arithm.cpp, line 1021 
```

这是我的代码：

```
Mat temp1 = mRgba.submat(roi); 
Mat temp2 = Mat.zeros(temp1.size(), CvType.CV_8UC1);    
Core.bitwise_xor(temp1, temp2, temp1); 
```

我还尝试通过以下方式实例化 temp1 和 temp2：

```
Mat temp1 = new Mat(height, width, CvType.CV_8UC1); 
Mat temp2 = new Mat(height, width, CvType.CV_8UC1); 
```

但仍然是同样的错误..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:15:33.293

您的代码没有提及 的类型`mRgba`，但从名称我认为它是 RGBA 或`CV_8UC4`. 这意味着`temp1`将与 具有相同的类型`mRgba`。如错误所述，两个矩阵必须具有相同的大小和类型。这意味着要么`temp2`必须声明为类型，`CV_8UC4`要么您必须首先转换`mRgba`为`CV_8UC1`，也许通过转换为灰度。我不熟悉 Java 接口，但等效的 C++ 调用是：

```
cv::cvtColor(mRgba, mRgba, CV_RGBA2GRAY); 
```

# php - 为什么分配空值的PHP变量在if语句中为假？

> ID：15937126
> 
> 赞同：1
> 
> 时间：2013-04-10T21:51:59.867
> 
> 标签：php, null

我只是在调试一些代码，发现

```
$id = null;
$field = $id === null ? true : false;
$field = $id ? true : false; 
```

两者都应将 $field 设置为 TRUE 值。但是由于某种原因，它不能按预期工作。第一个返回真，另一个返回假。

Edit1：我在写问题时不小心弄错了东西。这应该是它不同的原因。

Edit2：我问我的问题，因为这种行为在 2 个不同的服务器上是不同的。预计第二个示例将返回 True，但不知何故，它在我的一台服务器上没有返回 true。

Edit3：这是真正的代码。Prestashop 1.5 中的类/ObjectModel.php

```
/* Copy the field, or the default language field if it's both required and empty */
        if ((!$this->id_lang AND isset($this->{$field}[$id_language]) AND !empty($this->{$field}[$id_language])) 
        OR ($this->id_lang AND isset($this->$field) AND !empty($this->$field)))
            $fields[$id_language][$field] = $this->id_lang === null ? pSQL($this->$field) : pSQL($this->{$field}[$id_language]);
        elseif (in_array($field, $this->fieldsRequiredLang))
            $fields[$id_language][$field] = $this->id_lang === null ? pSQL($this->$field) : pSQL($this->{$field}[Configuration::get('PS_LANG_DEFAULT')]);
        else
            $fields[$id_language][$field] = ''; 
```

预期的行为（在大多数服务器上都是如此）是如果 $this->id_lang 设置为 null，那么应该使用 $this->$field 而不是 $this->$field[$id_language]。但是，在我在 CentOS 机器上设置的服务器上，这种行为有所不同，当值设置为 null 时，它会将 $this->$field[$id_language] 作为值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T21:54:11.427

该声明（不幸的是您已编辑）与以下内容相同：

```
$id = null;
if($id === null) {
    $field = true;
} else {
    $field = false;
} 
```

你还在期待虚假吗？:)

您问题中的陈述是使用所谓的*三元运算符*。要了解您的示例，您应该阅读本[文档](http://www.php.net/manual/en/language.operators.comparison.php)（部分：*三元运算符*）

三元运算符是 if 语句的简写，它允许缩短代码，尤其是条件赋值。但是，您问这个问题的事实是它的缺点的一个很好的例子：它的可读性较差；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T21:58:18.583

关于编辑 3，如果您在具有相同代码和数据集的不同发行版上遇到不同的结果，那么我的猜测是您使用的 CentOS 二进制文件已被他们的开发人员修改并引入了一个错误，可能是在运算符优先级上。

作为一般规则，我个人更喜欢将每个子句或一组子句括在括号中，以减少发生这种情况的机会，因此我建议尝试以下方法：

```
if ((!$this->id_lang && isset($this->{$field}[$id_language]) && !empty($this->{$field}[$id_language])) || ($this->id_lang && isset($this->$field) && !empty($this->$field))) {
    $fields[$id_language][$field] = (($this->id_lang === null) ? pSQL($this->$field) : pSQL($this->{$field}[$id_language]));
} else if (in_array($field, $this->fieldsRequiredLang)) {
    $fields[$id_language][$field] = (($this->id_lang === null) ? pSQL($this->$field) : pSQL($this->{$field}[Configuration::get('PS_LANG_DEFAULT')]));
} else {
    $fields[$id_language][$field] = '';
} 
```

这样，您强制解析器按照您定义的顺序评估各种子句和运算符，而不是解析器认为它们应该被处理的顺序。

## 原始答案

$field 被设置为 true，因为 === 运算符比较两个值，如果它们包含相同的值和相同的类型，则返回 true。

通过将 $id 设置为 null，您实际上是在运行：

```
$field = (null === null); 
```

您可以扩展当前代码以阐明逻辑，如下所示：

```
if ($id === null) {
    $field = true;
} else {
    $field = false;
} 
```

或者，您可以简单地运行：

```
$field = ($id === null); 
```

# r - 使用 r 中的 grid.table 打印到 pdf 文件 - 行数太多，无法在一页上

> ID：15937131
> 
> 赞同：12
> 
> 时间：2013-04-10T21:52:16.613
> 
> 标签：r, pdf, gridextra

我正在尝试使用 R 的 gridExtra 包中的 grid.table 将大约 40 行和 5 列的数据框输出到 .pdf 文件。

但是，40 行对于一个页面来说太长了，所以 .pdf 文件只显示数据框的一部分。我想知道是否可以在一页上打印两列，以便所有行都显示在一页上。或者，我需要知道如何在多页上打印数据框。谢谢，约翰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-12T22:44:35.177

**尝试使用 gridExtra 包在跨越多个页面的 pdf 文件上绘制表格：**

1.  调整 pdf 设备纵横比

    ```
    pdf(file = myfile.pdf, height = 12, width = 26) 
    ```

2.  将大数据框拆分为块并在绘制表格之前调用 grid.newpage。

    ```
    require(gridExtra)
    pdf(file = myfile.pdf, height = 12, width = 26)
    grid.newpage()
    grid.table(sga_hits[1:38, ], show.rownames = FALSE)
    grid.newpage()
    grid.table(sga_hits[39:75, ], show.rownames = FALSE)
    dev.off() 
    ```

将上述内容自动化如下：

```
 require(gridExtra)
    pdf(file = myfile.pdf, height = 12, width = 26)
    total_rows_per_page = 38 
    start_row = 1 

    if(total_rows_per_page > nrow(sga_hits)){
         end_row = nrow(sga_hits)
    }else {
         end_row = total_rows_per_page 
    }    

    for(i in 1:ceiling(nrow(sga_hits)/total_rows_per_page)){

       grid.newpage()   

       grid.table(sga_hits[start_row:end_row, ], show.rownames = FALSE)

       start_row = end_row + 1

       if((total_rows_per_page + end_row) < nrow(sga_hits)){

            end_row = total_rows_per_page + end_row

       }else {

            end_row = nrow(sga_hits)
       }    
    }

    dev.off() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-02T01:00:56.223

我建议采用以下策略：创建 tableGrob，查询其高度，拆分行以适合每个页面，

```
library(gridExtra)
library(grid)
d <- iris[sample(nrow(iris), 187, TRUE),]
tg <- tableGrob(d, rows = seq_len(nrow(d))) 

fullheight <- convertHeight(sum(tg$heights), "cm", valueOnly = TRUE)
margin <- unit(0.51,"in")
margin_cm <- convertHeight(margin, "cm", valueOnly = TRUE)
a4height <- 29.7 - margin_cm
nrows <- nrow(tg)
npages <- ceiling(fullheight / a4height)

heights <- convertHeight(tg$heights, "cm", valueOnly = TRUE) 
rows <- cut(cumsum(heights), include.lowest = FALSE,
            breaks = c(0, cumsum(rep(a4height, npages))))

groups <- split(seq_len(nrows), rows)

gl <- lapply(groups, function(id) tg[id,])

pdf("multipage.pdf", paper = "a4", width = 0, height = 0)
for(page in seq_len(npages)){
  grid.newpage()
  grid.rect(width=unit(21,"cm") - margin,
            height=unit(29.7,"cm")- margin)
  grid.draw(gl[[page]])
}
## alternative to explicit loop:
## print(marrangeGrob(grobs=gl, ncol=1, nrow=1, top=NULL))
dev.off() 
```

[![在此处输入图像描述](https://i.stack.imgur.com/AVrJX.png)](https://i.stack.imgur.com/AVrJX.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-24T01:34:18.770

一种方法是缩小字体大小和水平/垂直填充。

`grid.table(mtcars, gpar.coretext = gpar(fontsize=6), gpar.coltext = gpar(fontsize=6), padding.h=unit(2, "mm"), padding.v=unit(2, "mm"), show.rownames = TRUE)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-30T00:36:06.820

实现视口`grid`是一种潜在的解决方案。

视口定义了图形设备中的一个区域。定义视口，然后将其推入并在其中绘制有时很有用。然后可以在其中推送和绘制不同的视口；这种方法相当于一种在页面上排列对象的简单方法。

首先，定义页面和边距大小。

```
# Assume total page size is 8.5in x 11in
vp.page <- viewport(x = 0.5, y = 0.5,
                   width = unit(x = 8.5, units = "inches"),
                   height = unit(x = 11, units = "inches"))

# Assume 0.5in margins (i.e., 0.5 left, right, bottom, top)
# This totals 1in for each dimension
vp.marg <- viewport(x = 0.5, y = 0.5,
                    width = (7.5 / 8.5), height = (10 / 11)) 
```

接下来，为每列定义视口。

要在视口内水平排列列，它们的 x 位置将在间隔 (0,1) 中等距分布。

在 2 列的情况下，x1 = 0.25 和 x2 = 0.75：

```
# Define the viewport for column 1
vp.col1 <- viewport(x = 0.25, y = 0.5, width = 0.5, height = 1)

# Define the viewport for column 2
vp.col2 <- viewport(x = 0.75, y = 0.5, width = 0.5, height = 1) 
```

现在，定义了实际数据。这些数据也需要“grob'd”才能绘制到视口中。

```
# Assume data is stored as `dat` and has 40 rows
# Grob the data for column 1
col1 <- tableGrob(dat[1:20,], rows = NULL)

# Grob the data for column 2
col2 <- tableGrob(dat[21:40,], rows = NULL) 
```

现在，绘制pdf：

```
# Initiate the pdf
pdf("results.pdf", height = 11, width = 8.5)
# Push the viewports for page and margin
pushViewport(vp.page); pushViewport(vp.marg)

# Push column 1
pushViewport(vp.col1)
# Draw column 1
grid.draw(col1)

# Return to the previous viewport
upViewport()

# Push the viewport for column 2
pushViewport(vp.col2)
# Draw column 2
grid.draw(col2)

# End the pdf and save it
dev.off() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T00:12:30.410

`pdf()`有一个`width`和一个`height`论点。

您最好的选择是扩大尺寸，然后如果您要打印到纸上，那么您使用的任何程序都可能更适合。

或者，如果您想在一页上打印两列，只需遍历这些列：

```
# assuming `myDF` is your data.frame

pdf("filename.pdf")
for (cl in seq(from=1, to=ncol(myDF)-1, by=2)) {
      plot.new()
      grid.table(myDF[, cl+(0:1)])
    }
dev.off() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-12T10:43:19.890

我只是用了一个黑客。我使用 R2HTML 将表格打印为 html，然后使用 wkhtmltopdf 将 html 转换为 pdf。

在 R 中：

```
library(R2HTML)
HTML(table, file="table.html") 
```

在壳里

```
wkhtmltopdf table.html table.pdf 
```

# django - django 模型多重继承的构造函数问题

> ID：15937132
> 
> 赞同：1
> 
> 时间：2013-04-10T21:52:21.900
> 
> 标签：django, django-models

在我的 django 应用程序的 models.py 中，我从两个类继承：models.Model 和一个名为 Isbn10 的类，它来自导入的 Python 模块 pyisbn。但是，如果我尝试创建该类的一个实例，我会得到一个 TypeError: __init__() 恰好需要 2 个参数（1 个给定）

我试过颠倒父类的顺序，但没有帮助。

模型：

```
from django.db import models
import pyisbn

class Book10(pyisbn.Isbn10, models.Model):
    pass 
```

Isbn 类定义（在 pyisbn 模块中定义）：

```
class Isbn(object):
     def __init__(self, isbn):
        super(Isbn, self).__init__()
        self._isbn = isbn
        if len(isbn) in (9, 12):
            self.isbn = _isbn_cleanse(isbn, False)
        else:
            self.isbn = _isbn_cleanse(isbn) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:03:38.480

您的**init** () 定义需要 self 和 Isbn。所以你必须通过两者。此外， self 应该始终是第一个参数。

# objective-c - 如何在 object-c 项目中完全刷新 sqlite 数据库？

> ID：15937134
> 
> 赞同：0
> 
> 时间：2013-04-10T21:52:28.517
> 
> 标签：objective-c, sqlite

我在我的项目中使用 FMDB，我在终端中构建了第一个 sqlite3 数据库，并将其加载到我的项目中。后来我对该数据库进行了一些更改，因此我将其从项目中删除（移动到垃圾箱），然后再次“添加文件”。但是运行结果似乎还是和以前的数据库一致，或者有时只是没有查询结果。我还尝试删除数据库并运行项目，它仍在运行且没有错误...此外，我导入了另一个名称的较新数据库，它也无法工作。那么我需要做些什么来完全删除objective-c中的数据库并重新加载一个吗？谢谢！

我的代码如下所示：

```
- (IBAction)submitButton:(id)sender {        
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"finalCarpool.db"];
    FMDatabase* db = [FMDatabase databaseWithPath:writableDBPath];

    NSLog(@"Is SQLite compiled with it's thread safe options turned on? %@!", [FMDatabase isSQLiteThreadSafe] ? @"Yes" : @"No");
    if (![db open]) {
        NSLog(@"Could not open db.");
    }
    FMResultSet *rs = [db executeQuery:@"select * from userinfo"];
    int count=0;
    while ([rs next]) {
        count++;
        NSLog(@"%i",count);

    }
    FMResultSet *rs2 = [db executeQuery:@"select id from userinfo where username = ? AND password= ?", usernameTextField.text,passwordTextField.text];
    if ([rs2 next]) {

        NSString *welcomeMessage=[[NSString alloc]initWithFormat:@"Welcome, %@",usernameTextField.text];
        UIAlertView *myAlert = [[UIAlertView alloc]
                                initWithTitle:@"Successfully Login!"
                                message:welcomeMessage
                                delegate:nil
                                cancelButtonTitle:@"Okay"
                                otherButtonTitles:nil];
        [myAlert show];

        [self.loginDelegate backToLaunch];
    }
    else {
        UIAlertView *myAlert = [[UIAlertView alloc]
                                initWithTitle:@"Something is wrong..."
                                message:@"Your username and/or password doesn't match!Please try again!"
                                delegate:nil
                                cancelButtonTitle:@"Okay"
                                otherButtonTitles:nil];
        [myAlert show];
        usernameTextField.text=Nil;
        passwordTextField.text=Nil;
    }
[usernameTextField resignFirstResponder];
[passwordTextField resignFirstResponder]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:56:54.967

如果您在模拟器上进行测试，则数据库路径为

```
~/Library/Application Support/iPhone Simulator/<SIMULATOR-VERSION>/Applications/<APP-NAME>/Documents/finalCarpool.db 
```

您可以从那里删除它。否则，您可以从模拟器中删除应用程序（与从 iPhone 中删除的方式相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T12:47:37.633

转到 Ios Simulator> ResetContent 和设置

# jquery - jQuery：如何销毁或重置插件

> ID：15937135
> 
> 赞同：1
> 
> 时间：2013-04-10T21:52:29.497
> 
> 标签：jquery, css

作为序言，我希望有可能获得关于如何完成此类事情的最佳实践的这个问题的一般答案，以及对我的具体问题的可能答案？

我一直在开发一个“证明你是人类”的插件，当一切加载时我让它工作。我使用 jQuery UI 作为它的主干，并使用 Draggable 和 Droppable。一般的问题是：如何销毁和重置事件的插件？更具体的问题是：当我将错误的对象拖到现场时，如何在一切都被破坏后重置拖放能力。

下面是伪代码：

```
(function($){  
    $.fn.robotProof = function(options){
        var defaults = {
            //Default variables
        }

        var options = $.extend(defaults, options);
        return this.each(function(defaults){
        /* Here I style the elements because they were not styled by a CSS
           Then I randomly assign the elements a spot and append them to the container
           Then I use Draggable and Droppable */

        $('.peg').draggable({
            drag: function() {
                /* Drag Function Here */
            },
            revert: 'invalid'
        });
        $('.hole').droppable ({
            accept: '.valid',
            drop: function(){
                var username = $('#username').val();
                var email = $('#email').val();
                var password = $('#password').val();
                if(!username || !email || !password){ //IF ONE OF THE INPUTS IS EMPTY
                    $('.hardError').html("You've forgotten something").slideDown(300);
                    //////* THIS IS WHERE I NEED TO DESTROY/RESET THIS PLUGIN *//////////       
                } else {                        
                    $('.valid').animate({left: "286px",top: "1px"});//success
                }
            }
        });
    };
})(jQuery);  
$(document).ready(function(){
    $('.robotProof').robotProof();
}); 
```

您可以在可删除的代码中看到错误（最终将出现所有错误）我需要能够重置插件。

我觉得（并且已经玩过这个想法）几乎整个代码都需要成为一个函数，以便我可以再次调用该函数。当我尝试这样做时，我不得不嵌套代码，因为它不允许元素再次可拖动，除非我也将这些元素放入函数中，然后它会调用它自己的函数，我们都知道没有不能那样工作。

我之前写过几个成功的插件，但这是我在每个插件中都遇到过的问题。如何销毁所有实例，然后在不刷新页面的情况下重置插件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T03:26:26.977

玩得开心。:) 看起来我有很多时间，但这就是你想要的。所以线索是用

**`$.fn.robotProof={}`**

您会看到它也可以使用完整的不同功能内容重新启动和重新启动

```
<script type="text/javascript">
var i=0;
(function($){
    $.fn.SelfDestroy=function(blabla){
        function init(){
            var brutal = 'mega conspirative content of your plugin :)';
            $('#report').text(brutal);
        };
        init();
        return this.each(function(){
           $('#counter').text('ding dong'+i).show().fadeOut(200);
           i++;
           $(this).text(blabla);
        });
    };
    $.fn.Destroy=function(){
        // lets overwrite the jQuery plugin function
        $.fn.SelfDestroy={};
    };
    $.fn.Rebuild=function(){
        // here we load other work in the same namespace as before
        $.fn.SelfDestroy=function(ZoroZonk){
           if (ZoroZonk=='push to test if stil running') 
           $('#report').text('my name is bond, james bond').show().fadeOut(100).fadeIn(100);
        };
    };
})(jQuery);
$(document).ready(function(){
   $('#bomb').on('click',function(){
       $().Destroy();
       $().Rebuild();
   });
   $('#report').SelfDestroy('huaaa! time to run! but stil original function work');
});
</script>

<button id="selfdestroytester" onclick="$(this).SelfDestroy('push to test if stil running')">check if valid running code</button>
<div id="report"> placeholder for output </div>
<button id="bomb" onclick="">push to start selfdestroy!</button>
<div id="counter" style="display:none"> hitcounter </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T03:36:45.110

销毁插件意味着恢复添加的行为，即从受影响的元素中删除可拖动和可放置的行为。

[droppable](http://api.jqueryui.com/droppable/#method-destroy)和[draggable](http://api.jqueryui.com/draggable/#method-destroy)插件都提供了一个 destroy 方法来恢复所做的更改。

```
(function($){  
    $.fn.robotProof = function(options){
        var defaults = {
            //Default variables
        }

        var options = $.extend(defaults, options);
        return this.each(function(defaults){
            var _this = this;
        /* Here I style the elements because they were not styled by a CSS
           Then I randomly assign the elements a spot and append them to the container
           Then I use Draggable and Droppable */

        $('.peg').draggable({
            drag: function() {
                /* Drag Function Here */
            },
            revert: 'invalid'
        });
        $('.hole').droppable ({
            accept: '.valid',
            drop: function(){
                var username = $('#username').val();
                var email = $('#email').val();
                var password = $('#password').val();
                if(!username || !email || !password){ //IF ONE OF THE INPUTS IS EMPTY
                    $('.hardError').html("You've forgotten something").slideDown(300);
                    //////* THIS IS WHERE I NEED TO DESTROY/RESET THIS PLUGIN *//////////       

                    //In this case destroy meanns reverting the added behaviour, that is removing both draggable and droppable behaviour from the affected elements
                    $('.peg').draggable('destroy');
                    $('.hole').droppable('destroy');
                } else {                        
                    $('.valid').animate({left: "286px",top: "1px"});//success
                }
            }
        });
    };
})(jQuery);  
$(document).ready(function(){
    $('.robotProof').robotProof();
}); 
```

# php - 抓取部分变量以在 HTML 中回显

> ID：15937141
> 
> 赞同：0
> 
> 时间：2013-04-10T21:53:01.913
> 
> 标签：php, mysql, variables

例如，我将如何获取变量的前几个单词，例如 $data。我正在尝试创建一个文章预览部分，该变量是一篇文章。我想当然只显示它的预览。

```
 <?php
$sql = "SELECT author, data, postdate, Title, previewimg FROM articlepreview ORDER BY RAND() LIMIT 1";
$query = mysqli_query($db_conx,$sql);
$prev = "";
while ($row = mysqli_fetch_array($query, MYSQLI_ASSOC)) {
    $a = $row["author"];
    $data = $row["data"];
    $postdate = $row["postdate"];
    $title = $row["Title"];
    $previewimg = $row["previewimg"];
    $prev .= '
<div class="wrapPreviewArticle">

    <div style="headerPreview"><h4>'.$title.'</h4></div>
    <div class="wrapPreviewRow">
    <div style="imagePreview"><img src="'.$previewimg.'" height="20%" width="20%" alt="'.$title.'" /></div>
    <div clas="wordPreview">'.$data.'</div>
    </div>
</div>
';
}
?> 
```

一旦我得到这个，我会吐出变量

```
<body>
<div><?php echo $prev; ?></div> <!--with only the desired portion.-->
</body> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:57:54.667

您可以显示前 X 个字符（这里的 X 是 20）：

```
 <div class="wordPreview">'.substr($data, 0, 20).'</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:56:43.873

例如，您可以抓取前 200 个字符并仅将其显示为预览

```
$pos=strpos($data, ' ', 200);
$preview=substr($data,0,$pos ); 
```

这也将确保您将其拆分在单词中间的空格处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T21:55:44.723

您可以在查询中使用 SUBSTRING_INDEX：

```
"SELECT author, SUBSTRING_INDEX(data, ' ', 5) data, ... FROM articlepreview ..." 
```

这将只从字段中提取前 5 个单词`data`。

# android - 错误创建表 sqllite (android)

> ID：15937142
> 
> 赞同：-1
> 
> 时间：2013-04-10T21:53:02.943
> 
> 标签：android, sql, sqlite

当我创建新表时：

```
private static final String SQL_CREATE_AREAS = "CREATE TABLE IF NOT EXISTS `cs_area` (" +
"  `area_id` mediumint(6) NOT NULL AUTO_INCREMENT,"+
"  `areaname` varchar(40) NOT NULL,"+
"  PRIMARY KEY (`area_id`),"+
"  KEY `areaname` (`areaname`)"+
") DEFAULT CHARSET=utf8 AUTO_INCREMENT=13 ;"; 
```

我得到了错误：

> 引起：android.database.sqlite.SQLiteException：靠近“AUTO_INCREMENT”：语法错误（代码1）：，编译时：CREATE TABLE IF NOT EXISTS `cs_area`（ `area_id`mediumint（6）NOT NULL AUTO_INCREMENT， `areaname`varchar（40）NOT NULL，PRIMARY KEY ( `area_id`), KEY `areaname`( `areaname`)) 默认字符集=utf8 AUTO_INCREMENT=13 ;

也许，有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:58:04.490

它`AUTOINCREMENT`不是`AUTO_INCREMENT`：[http ://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:56:48.343

更改`AUTO_INCREMENT`并`autoincrement`告诉我们您的结果。

# php - 哪个更好用：in_array 还是 array_unique？

> ID：15937148
> 
> 赞同：12
> 
> 时间：2013-04-10T21:53:21.907
> 
> 标签：php, arrays, array-unique

我怀疑使用什么：

```
foreach(){
    // .....

    if(!in_array($view, $this->_views[$condition]))
        array_push($this->_views[$condition], $view);

    // ....
} 
```

**或者**

```
foreach(){
    // .....

    array_push($this->_views[$condition], $view);

    // ....
}

$this->_views[$condition] = array_unique($this->_views[$condition]); 
```

**更新**

目标是获得唯一值的数组。这可以通过每次检查值是否已经存在`in_array`或每次添加所有值并最终使用来完成`array_unique`。那么这两种方式有什么重大区别吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T22:01:46.280

我认为第二种方法会更有效。实际上，array_unique 对数组进行排序然后扫描它。

排序在 N log N 步中完成，然后扫描需要 N 步。

第一种方法需要 N^2 步（foreach 元素扫描所有 N 个先前的元素）。在大阵列上，有很大的不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T22:13:36.107

老实说，如果您使用的是小型数据集，则使用哪一个都没有关系。如果您的数据集在 10000 左右，那么您肯定会希望对这类事情使用哈希映射。

这是假设视图是一个字符串或其他东西，它看起来就是这样。这通常是 O(n) 并且可能是处理跟踪唯一值的最快方法。

```
foreach($views as $view)
{
    if(!array_key_exists($view,$unique_views))
    {
        $unique_views[$condition][$view] = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-04T13:35:30.010

TL；DR：`foreach`结合`if (!in_array())`更好。

老实说，您不应该真正担心什么表现更好。在大多数情况下，差异非常小，可以忽略不计（除非你真的在做一些大数据的事情）。我建议使用任何看起来更易读的东西。

如果你有兴趣，看看我写的这个脚本。它循环每个案例 100.000 次，并且都需要 50 到 200 毫秒。

[https://3v4l.org/lkTCF](https://3v4l.org/lkTCF)

请注意，array_unique() 保留了原始键，因此我们还必须用 array_values() 包装结果。

万一链接失效：

```
<?php
$loops = 100000;

$start = microtime(true);
for ($l = 0; $l < $loops; $l++) {
    $x = [1,2,3,4,6,7,8,9];
    for ($i = 0; $i <= 10; $i++) {
        if (!in_array($i, $x)) {
            $x[] = $i;
        }
    }
}
$duration = microtime(true) - $start;
echo "in_array took $duration<br>".PHP_EOL;

$start = microtime(true);
for ($l = 0; $l < $loops; $l++) {
    $x = [1,2,3,4,6,7,8,9];
    $x = array_values(array_unique(array_merge($x, [0,1,2,3,4,5,6,7,8,9,10])));
}
$duration = microtime(true) - $start;
echo "array_unique took $duration<br>".PHP_EOL; 
```

[![在此处输入图像描述](https://i.stack.imgur.com/lKRAa.png)](https://i.stack.imgur.com/lKRAa.png) [![在此处输入图像描述](https://i.stack.imgur.com/FaR3S.png)](https://i.stack.imgur.com/FaR3S.png)

# c++ - 删除点 C++

> ID：15937150
> 
> 赞同：1
> 
> 时间：2013-04-10T21:53:27.877
> 
> 标签：c++, math, 3d, points, point-clouds

我在点云中有 N 个点（x_N，y_N，z_N）。点云形成球形物体的形状。我的问题是我的云中有一些点沿 z 轴明显突出（这是由于在扫描期间将针对象插入我的对象中）。我想删除这些点。

我采用的一种方法是找到我的云中一组点与下一组点相比的斜率变化。（例如，我取前 10 个点，计算斜率变化并将其与接下来 10 个点的斜率变化进行比较）。但这不是很好。有什么建议么？

任何帮助将不胜感激。对我的问题有任何困惑，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:01:28.613

如果确定它是一个类似球体的物体并且点分布均匀（没有一侧的点比另一侧多），则取所有点的平均 X、Y 和 Z。这将`center`在球体的旁边。如果该引脚不是很粗或很长（如果它与总数相比很少），您可以将其假设为`center`.

然后，测量每个点到 的距离`center`。脱掉那些距离高于平均距离的人。

* * *

如果您知道球体及其中心的半径，只需计算每个点到中心的距离并与半径进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T14:20:00.700

*   找到 z 中的最高点，它 100% 肯定是一个大头针或一个大头针的一部分。
*   将点设置为球心并删除所选半径内的所有点
*   为其他引脚再迭代两次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:18:45.207

我有一个观察和相应的建议：

首先，观察结果：您似乎正在为一次性案例构建自定义解决方案。当您扫描不同的对象（销再次伸出）时，这将不起作用。

现在，建议：使用类似 meshlab 的工具，您可以在其中加载点云、选择点并删除它们。

当然，如果您热衷于编写代码来解决此问题，那么这将无济于事。

# assembly - 汇编读取二进制数到十进制 8086 (NASM)

> ID：15937154
> 
> 赞同：0
> 
> 时间：2013-04-10T21:53:42.623
> 
> 标签：assembly, x86, nasm, x86-16

我不明白我做错了什么。我需要二进制计算器，其输入格式类似于“00000001b+00000010b ...输出也需要为二进制...运算符可以是+、-、*、/。

我想读取第一个数字并将其转换为十进制......我的代码是这样的

```
%include "asm_io.inc"

segment .text
    global _asm_main
_asm_main:
    enter 0,0
    pusha

    call read_int
    cmp al,'b'
    je vypis

vypis:
    call print_int

koniec:
    popa                 ; terminate program
    mov EAX, 0
    leave
    ret 
```

当输入以数字开头（例如（10101010b））时，程序运行良好，但当输入以零开始时，它不能正常工作......

**我的问题是我做错了什么或者我怎样才能做得更好？**

* * *

print_int 和 read_int 是已经提供给我们的函数，它们 100% 工作......我可以使用的其他函数是 read_char、print_char 和 print_string ...

```
read_int:
    enter   4,0
    pusha
    pushf

    lea eax, [ebp-4]
    push    eax
    push    dword int_format
    call    _scanf
    pop ecx
    pop ecx

    popf
    popa
    mov eax, [ebp-4]
    leave
    ret

print_int:
    enter   0,0
    pusha
    pushf

    push    eax
    push    dword int_format
    call    _printf
    pop ecx
    pop ecx

    popf
    popa
    leave
    ret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:49:05.750

在我看来，它`read_int`只是简单地返回一个`eax`已被`scanf`. 我不确定为什么您希望该整数的最低有效字节是`'b'`（？）。

尽管我不知道`scanf`您使用的是哪种实现，但我还没有看到任何可以直接读取二进制数的实现。不过，自己实现该功能相当容易。
以下是 C 中的一些示例代码，显示了原理：

```
char bin[32];
unsigned int i, value;

scanf("%[01b]", bin);  // Stop reading if anything but these characters
                       // are entered.

value = 0;
for (i = 0; i < strlen(bin); i++) {
    if (bin[i] == 'b')
        break;
    value = (value << 1) + bin[i] - '0';
}
// This last check is optional depending on the behavior you want. It sets
// the value to zero if no ending 'b' was found in the input string.
if (i == strlen(bin)) {
    value = 0;
} 
```

# javascript - TypeScript - 静态属性创建优化

> ID：15937163
> 
> 赞同：2
> 
> 时间：2013-04-10T21:54:13.267
> 
> 标签：javascript, typescript

我是 JavaScript 新手，因为我来自强类型语言，所以我选择了 TypeScript。

我想知道这段代码`red`中的变量会发生什么。`Red getter`它会在每次调用时重新创建（如 in `Green getter`）还是创建一次并每次都使用？哪个最好？

```
class Color {
    public R: number;
    public G: number;
    public B: number;
    public A: number;

    static get Red(): Color {
        var red = new Color(255, 0, 0);
        Color.Red = function() { return red; }
        return red;
    }

    static get Green(): Color {
        return new Color(0, 255, 0);
    }

    constructor(red: number, green: number, blue: number, alpha: number = 255) {
        this.R = red;
        this.G = green;
        this.B = blue;
        this.A = alpha;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T15:25:56.453

其他答案是完全正确的，但我认为他们没有提到一个微妙的问题。因为 Red 被定义为一个 getter，所以它也会自动获得一个什么都不做的空 setter。因此，当您调用时，您`Color.Red = function() { return red; }`将该函数传递给 Color.Red 的设置器，它什么也不做，因此该语句无效。您可以将 an`alert()`放入 getter 并调用几次以亲自查看。

如果您查看为这篇文章生成的 JavaScript，您会发现 getter 是通过[Object.defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)创建的，这是一个有趣的野兽。您可以自己调用 Object.defineProperty 来重新定义 getter 的操作，但是当`private static red : Color = new Color(255,0,0);`工作正常时，这似乎需要做很多工作。

至于哪个最好，这是一个取舍的问题，什么对你更重要。总是返回一个新的对象会消耗更多的内存，但避免了有人修改 Color.Green 并导致追踪一个有趣的错误的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T06:45:06.973

如果你想缓存它，你可以这样做：

```
class Color {
    public R: number;
    public G: number;
    public B: number;
    public A: number;

    private static _red : Color = new Color(255,0,0);   
    static get Red(): Color {
        return _red;
    } 

    static get Green(): Color {
        return new Color(0, 255, 0);
    }

    constructor(red: number, green: number, blue: number, alpha: number = 255) {
        this.R = red;
        this.G = green;
        this.B = blue;
        this.A = alpha;
    }
} 
```

这样每次使用时都不会调用构造函数`Red`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T22:54:00.447

每次使用 getter 时，都会调用实现它的函数。该`Red`实现不会完成任何类型的缓存。

# css - 是否可以使用 css3 内容技术制作“双箭头”？

> ID：15937166
> 
> 赞同：3
> 
> 时间：2013-04-10T21:54:29.143
> 
> 标签：css, css-shapes

我正在寻找一种仅使用 CSS重新创建[此按钮的方法。](https://i.imgur.com/WxL8pGH.png)

![在此处输入图像描述](https://i.stack.imgur.com/LfUJj.png)

我了解三角形技术，也知道如何为其添加边框，但不幸的是，我不知道如何重新创建此按钮（无需添加额外的包装器或使用图像）。

我需要这种样式的按钮是`<input["submit"]>`和普通`<a>`的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:25:37.797

使用一个元素，您可以使用渐变和倾斜的伪元素作为链接：

# [*演示*](http://codepen.io/thebabydino/pen/qGonl)

（您实际上可以只使用渐变来做到这一点，但是在悬停在箭头形状本身上时不会触发悬停动作，而是在悬停在包含它的矩形元素上时触发）

**HTML**：

```
<a class='boo' href='#'>click me</a> 
```

相关**CSS**：

```
.boo {
  display: inline-block;
  position: relative;
  padding: .5em 2em;
  background: 
    linear-gradient(60deg, dodgerblue 50%, transparent 50%) 100% 0, 
    linear-gradient(-60deg, transparent 50%, dodgerblue 50%) 100% 100%,
    linear-gradient(-90deg, transparent 1em, dodgerblue 1em);
  background-repeat: no-repeat;
  background-size: 1em 50%, 1em 50%, 100% 100%;
}
.boo:before, .boo:after {
  position: absolute;
  right: -.2em;
  width: .5em; height: 50%;
  background: dodgerblue;
  content: '';
}
.boo:before {
  top: 0;
  transform: skewX(30deg);
}
.boo:after {
  bottom: 0;
  transform: skewX(-30deg);
} 
```

## **编辑**：

如果你的背景是纯色，而不是图像或渐变，你可以用更简单的方法来做，不使用渐变（这意味着第二种方法也具有在 IE9 中工作的优势）。

# [演示#2](http://codepen.io/thebabydino/pen/LErmB)

```
.boo {
  display: inline-block;
  position: relative;
  padding: .5em 2em;
  background: lightblue;
}
.boo:before, .boo:after {
  position: absolute;
  right: -.3em;
  width: .5em; height: 50%;
  box-shadow: -.2em 0 0 white;
  background: inherit;
  content: '';
}
.boo:before {
  top: 0;
  transform: skewX(30deg);
}
.boo:after {
  bottom: 0;
  transform: skewX(-30deg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:11:44.593

您应该使用背景图像。创建一个包含箭头的透明 png。

您将需要两个元素，外部将包含背景图像，内部将包含文本，以及与箭头上的相同的背景颜色。或者，您可以使用第二个背景图像而不是背景颜色，例如，如果您的按钮不仅仅是纯色。

诀窍是将包含文本的框与背景图像对齐。

如果您的箭头是 20 像素高，您的内框可能是例如 16 像素加上每边 2 像素的填充（如果您想更好地理解这一点，请搜索*框模型）。*

外部元素可以将右边距设置为箭头图像的近似宽度。

我希望这是有道理的。通用技术称为[推拉门](http://alistapart.com/article/slidingdoors)。如果你有时间，我建议阅读整篇文章。

# c# - 在 Windows 远程服务器中运行命令并在 C# .NET 中取回控制台输出

> ID：15937167
> 
> 赞同：5
> 
> 时间：2013-04-10T21:54:29.127
> 
> 标签：c#, .net, windows, command-line, wmi

我有一个`remote server name`（Windows）`username`和`password`.

使用 C# .Net，我想`run a command`在远程服务器上取回**`console output`**

有没有办法在 C# 中做到这一点？

我能够使用`WMI`以下代码（部分）运行命令，但没有获得控制台输出的运气。我只能取回`Process ID`。

```
ObjectGetOptions objectGetOptions = new ObjectGetOptions();
ManagementPath managementPath = new ManagementPath("Win32_Process");
ManagementClass processClass = new ManagementClass(scope, managementPath,objectGetOptions);

ManagementBaseObject inParams = processClass.GetMethodParameters("Create");

inParams["CommandLine"] = "cmd.exe /c "+ mycommand;
ManagementBaseObject outParams = processClass.InvokeMethod("Create", inParams, null); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T22:39:53.197

这个功能是我经过一番研究后得出的。希望它可以帮助别人。

```
public string executeCommand(string serverName, string username, string password, string domain=null, string command)
{
    try
    {
        System.Diagnostics.Process process = new System.Diagnostics.Process();
        System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
        startInfo.RedirectStandardOutput = true;
        startInfo.UseShellExecute = false;
        startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        startInfo.FileName = "cmd.exe";
        if (null != username)
        {
            if (null != domain)
            {
                startInfo.Arguments = "/C \"psexec.exe \\\\" + serverName + " -u " + domain+"\\"+username + " -p " + password + " " + command + "\"";
            }
            else
            {
                startInfo.Arguments = "/C \"psexec.exe \\\\" + serverName + " -u " + username + " -p " + password + " " + command + "\"";
            }
        }
        else
        {
            startInfo.Arguments = "/C \"utils\\psexec.exe "+serverName+" "+ command + "\"";
        }
        process.StartInfo = startInfo;
        process.Start();
        process.WaitForExit();

        if (process.ExitCode == 0 && null != process && process.HasExited)
        {
           return process.StandardOutput.ReadToEnd();
        }
        else
        {
            return "Error running the command : "+command;
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:15:01.527

您可以尝试使用 PsTools 执行命令。他们提供的众多功能之一是[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553)。它允许您在远程服务器上运行命令。它还应该将结果返回到控制台（在运行它的本地 PC 上）。

# php - GROUP BY table1.column_name ORDER BY table2.column_name

> ID：15937168
> 
> 赞同：1
> 
> 时间：2013-04-10T21:54:31.850
> 
> 标签：php, mysql, group-by

我有一个帖子表和一个用户表，中间有一个表，其中包含两者之间的关系。一个用户可以有很多帖子等。

可以通过在帖子表的星号列中添加 0 或 1 来为帖子“加星号”。每个用户只会为一个帖子加星标，但有些用户将没有加星标的帖子。

我需要创建一个查询，每个用户拉一个帖子（所以我使用'group by'），并且在这些帖子中它应该得到加星标的帖子，并不是所有用户都会有一个加星标的帖子，所以我不能只使用

```
WHERE starred = 1 
```

本质上，我想按星号对组进行排序，这样如果有星号，它就会得到加星号的帖子，如果没有，它会得到一个正常的帖子。

这是我到目前为止所拥有的：

```
SELECT
   posts.post_title
FROM
   posts
INNER JOIN rel_company_post ON posts.post_id = rel_company_post.post_id
INNER JOIN companies ON rel_company_post.company_id = companies.company_id
GROUP BY companies.company_id
ORDER BY posts.starred DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:29:52.337

如果我正确理解您的数据库的组织方式，我认为您需要这样的东西：

```
SELECT
   COALESCE(
     MAX(CASE WHEN posts.starred=1 THEN posts.post_title END),
     MAX(posts.post_title)
   ) title
FROM
   posts INNER JOIN rel_company_post
   ON posts.post_id = rel_company_post.post_id
   INNER JOIN companies
   ON rel_company_post.company_id = companies.company_id
GROUP BY companies.company_id 
```

如果有一个帖子 stared=1，CASE WHEN 将返回该标题，MAX 将被评估为该标题。COALESCE 然后将返回此标题。

如果没有加星标的帖子，则第一个 MAX 将返回 NULL，并且 coalesce 将返回具有最大未星标标题的第二个 MAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:17:54.783

首先，如果没有更多信息，您的中间表似乎是不必要的。在帖子表中添加“company_id”列，以便您可以直接看到帖子的所有者，并消除中间表。

其次，您正在寻找“最大”，即

选择最大值（加星标），posts.post_title

如果你把 company_id 放在帖子表中，你甚至不需要加入

因此，您的整体查询看起来像

选择 max(starred), post_title from posts group by company_id

# jquery - 顶级链接在 superfish 中不可点击

> ID：15937169
> 
> 赞同：1
> 
> 时间：2013-04-10T21:54:32.720
> 
> 标签：jquery, wordpress, superfish

我在 WordPress 主题中使用 Superfish v1.6.2 作为下拉菜单。菜单工作正常，但包含子菜单的顶级菜单链接不工作/可点击。

在那里，您会注意到“投资组合”和“示例页面”链接不起作用。请帮助我，我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:37:55.257

对于 jquery 菜单栏的相同问题，我使用了类似以下的内容。也许这也可以帮助你。

```
 $("#menu li a").click(function () {
            window.location = $(this).attr('href');
            return false;
        }); 
```

本质上，这从顶级菜单项链接中获取位置并导航到它。“return false”取消了对顶层下弹出菜单的进一步处理。

祝你好运。

# java - Spring JDBC中的独立事务

> ID：15937172
> 
> 赞同：2
> 
> 时间：2013-04-10T21:54:48.523
> 
> 标签：java, spring, jdbc, transactions

我在我的 DAO 类中使用*Spring JDBC* ( `JdbcTemplate/NamedParameterJdbcTemplate`) 和 Spring `TransactionManager`( )。`DataSourceTransactionManager`

我至少有 2 个客户端同时使用 DAO 方法。是否可以使用 Spring JDBC/Tx 打开 2 个绝对独立的事务，并为每个客户端使用一个单独的事务？

目前，在创建第二个事务时使用**PROPAGATION_REQUIRED_NEW**参数 - 我只得到了嵌套事务，即它应该只在第一个事务之前提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:10:26.907

您的两个请求中的每一个都将有自己的事务上下文。

您可以通过设置连接的隔离级别来确定它们的可序列化程度。

# mips - MIPS 如何跳转到 32 位地址？

> ID：15937174
> 
> 赞同：2
> 
> 时间：2013-04-10T21:54:59.337
> 
> 标签：mips

我正在尝试分支到一个地址：

```
bne $t0, $0, 0x7813a21c 
```

但是，这是不正确的，因为 bne 仅将 16 位分配给立即数

如何分支到直接 32 位地址？有没有办法从寄存器中的值分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:02:04.817

您必须使用`JR`跳转到存储在寄存器中的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:04:34.053

要执行这种类型的操作，您需要一个跳转语句。您必须告诉代码将控制上下文跳转到您希望指定的确切行。这是示例语法：`j offset`地址中的偏移量在哪里。

这是一个链接，可以更好地审查您必须做的事情。查看跳跃部分。这些是可用的跳跃类型。其中之一是您需要的：`j offset`, `jal offset`, `jr $rs`,`jalr $rs`

这是链接： [http ://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/jump.html](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/jump.html)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-04T16:57:40.717

我们可以分两步将 32 位地址加载到寄存器（例如`$t1`）：

1.  `lui`通过(Load Upper Immediate) 加载高 16 位。
2.  `ori`通过（或立即数）加载低 16 位。

注意：这是有效`lui`的，因为用 0 填充低 16 位，因此按位或*加载*低 16 位（n | 0 = n）；

*在下面*的代码中，如果`$t0`等于0，我们*会*跳过指令。 或者如果不等于 0，我们*不**跳过*指令（或者我们*跳转*）。**`jr`
`$t0`**`jr`****

 ***```
 beq $t0, $0, SKIP

      # load 0x7813a21c to $t0

      lui  $t1, 0x7813 # load the upper 16 bits
      # Now $t1 = 0x78130000

      ori  $t1, $1, 0xa21c # load the lower 16 bits
      # Now $t1 = 0x7813A21C

      jr   $t1 # as @Matt Eckert said
SKIP: 
```***

# build - BB10 级联 c ，导出构建版本但 Bar 文件太大（100mb）！

> ID：15937176
> 
> 赞同：0
> 
> 时间：2013-04-10T21:55:04.560
> 
> 标签：build, release, blackberry-10

首先，我确信我没有为我的项目导出构建发布栏文件做错什么。几周前，我为我的项目构建了一个发布栏，只有 1mb。

我完全按照以下教程进行：http: [//bbcascadescode.tumblr.com/post/33340977264/exporting-bar-file-from-cascades-ide](http://bbcascadescode.tumblr.com/post/33340977264/exporting-bar-file-from-cascades-ide)

但是今天当我尝试导出发布版本时，bar 文件大约是 100mb ！！！没有问题，没有错误，但是条形大小异常！！！

这是我项目的专业文件：

```
APP_NAME = myProjectName

CONFIG += qt warn_on debug_and_release cascades mobility

LIBS   += -lbbdata -lbbplatform -lbbcascadesmaps -lbbsystem -lbbutilityi18n -lbbdevice -lz -lbbcascadesmultimedia -lbbpim -lbbmultimedia -lOpenAL -lalut -lasound

MOBILITY += sensors

include(config.pri)

lupdate_inclusion {
    SOURCES += \
        $$BASEDIR/../src/*.cpp \
        $$BASEDIR/../src/control/*.cpp \
        $$BASEDIR/../src/model/*.cpp \
        $$BASEDIR/../src/utils/*.cpp \
        $$BASEDIR/../src/view/*.cpp \
        $$BASEDIR/../assets/items/*.qml \
        $$BASEDIR/../assets/controls/*.qml \
        $$BASEDIR/../assets/*.qml
}

device {
    CONFIG(release, debug|release) {
        DESTDIR = o.le-v7
        #TEMPLATE = lib
        #QMAKE_CXXFLAGS_RELEASE += -fvisibility=hidden -mthumb
    }
    CONFIG(debug, debug|release) {
        DESTDIR = o.le-v7-g
    }
}

simulator {
    CONFIG(release, debug|release) {
        DESTDIR = o
    }
    CONFIG(debug, debug|release) {
        DESTDIR = o-g
    }
}

OBJECTS_DIR = $${DESTDIR}/.obj
MOC_DIR = $${DESTDIR}/.moc
RCC_DIR = $${DESTDIR}/.rcc
UI_DIR = $${DESTDIR}/.ui

suredelete.target = sureclean
suredelete.commands = $(DEL_FILE) $${MOC_DIR}/*; $(DEL_FILE) $${RCC_DIR}/*; $(DEL_FILE) $${UI_DIR}/*
suredelete.depends = distclean

QMAKE_EXTRA_TARGETS += suredelete 
```

也许我导入了太多的库？？直到现在我才知道，因为我没有错误，只是条形图的大小似乎不正确。它不能是 100MB。所有源代码和资源文件只有 3.3 MB。有人有同样的问题吗？谢谢你的建议！！

# algorithm - 高级序列比对

> ID：15937177
> 
> 赞同：3
> 
> 时间：2013-04-10T21:55:10.693
> 
> 标签：algorithm, pattern-matching, dynamic-programming, sequences

假设以下抄袭生成模型：

抄袭者： 1\. 删除部分文本 2\. 重新排列部分文本 3\. 添加新文本。

前任。如果 ABCD 是原始文本（A、B、C 和 D 可以是段落或一堆句子），则输出可以是 DEAFCG，其中 E、F 和 G 是添加的附加文本。

此外，抄袭者将添加小错误（插入、替换和删除的速率很小）。

我们如何去检测这种抄袭的例子？

到目前为止我所做的：尝试使用最长公共子序列方法。它检测一组线性匹配的文本。在上面的示例中，它将检测 D 或 AC（取决于它们的长度）

我需要什么：处理这个问题的原则方法。对现有文献的任何引用都会非常有帮助。任何想法的伪代码也很好。请不要代码。

这既不是作业，也不是面试问题。我已将我的实际问题简化为这个玩具问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:04:33.967

对于许多应用程序，有许多算法可以做到这一点。据我所知，他们主要做的（以及你想做的）是计算编辑距离： [http ://en.wikipedia.org/wiki/Edit_distance](http://en.wikipedia.org/wiki/Edit_distance)

[根据http://en.wikipedia.org/wiki/Levenshtein_distance#Relationship_with_other_edit_distance_metrics](http://en.wikipedia.org/wiki/Levenshtein_distance#Relationship_with_other_edit_distance_metrics)，有许多不同的算法略有不同 ：

例如最长公共子序列处理添加和删除但不处理替换；Damerau-Levenshtein 距离还考虑了替换以及相邻字符的换位。

# mongodb - MongoDB 中的关系（通过 Mongoose）

> ID：15937178
> 
> 赞同：0
> 
> 时间：2013-04-10T21:55:17.133
> 
> 标签：mongodb, database-design, mongoose, nosql

考虑一个典型的博客应用程序，其中一个博客可以有很多帖子，而一个帖子可以有很多评论。假设我们想提供一个 RESTfull API 来访问它。

如果我要使用关系数据库来存储这些数据，我会在帖子表中有一个博客的外键，在评论表中有一个帖子的外键。

通过 Mongoose 使用 MongoDB 时，我看到了三种不同的方法来设计集合：

1.  拥有三个集合：一个用于博客，一个用于帖子，一个用于评论。帖子的架构将有一个引用其博客的字段，而评论的架构将有一个引用其帖子的字段。（非常类似于关系解决方案。）

2.  同样，三个集合，但每个博客都有一个帖子引用数组，每个帖子都有一个评论引用数组。

3.  只有一个包含子文档和子子文档的集合，其中博客包含一组帖子，每个帖子包含一组评论。

哪一个是正确的，或者，每一个的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:06:06.347

3个收集方法怎么样，但是

1.  **使用$slice**运算符将最后 (N) 条评论复制到 Post 集合中，从而使“最新评论”列表保持简短

2.  **$inc**帖子中的评论数，从而允许快速检索每个帖子的评论数

3.  从博客复制或缓存博客信息，或将摘要嵌入到帖子中。

主要带回家：使帖子条目包含您想要一次性渲染的所有内容。

# php - 创建员工列表

> ID：15937181
> 
> 赞同：0
> 
> 时间：2013-04-10T21:55:31.573
> 
> 标签：php, mysql

我很确定我错过了一些非常简单的东西。我想使用 PHP/MySQL 创建我的员工表并显示在 HTML 表中。我已经编写了查询并尝试获取数组，但它一直返回一个 bool 变量。我哪里出错了？

```
<? $memberQuery = "SELECT * FROM members;";
$memberArray = mysql_fetch_array(mysql_query($memberQuery) or die("error retrieving members"));

var_dump($memberArray); ?> 
```

`var_dump()`回报`bool(false)`，所以我有点失落......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:04:58.507

您的代码中有错误：

```
var_dump($memberArray); 
```

代替

```
var_dump($member array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:58:45.467

尝试 ：

```
 $sqlArray = mysql_query($memberQuery) or die(mysql_error ()); 
```

它将提供有关您的问题的一些信息。如果没有错误，您将能够访问您的阵列

```
$memberArray = mysql_fetch_query ($sqlArray); 
```

# css - 如何创建漫画风格的对话泡泡？

> ID：15937183
> 
> 赞同：0
> 
> 时间：2013-04-10T21:55:38.930
> 
> 标签：css

如何`div`在 CSS 中将 a 设置为看起来像连环漫画的气泡？

这是一张展示我的意思的图片：

![在此处输入图像描述](https://i.stack.imgur.com/p4oqS.png)

有没有办法在纯 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:02:32.527

一个简单的例子，你可以调整它以满足你的需要..因为我不能在没有代码的情况下发布小提琴：

HTML：

```
<div class="balloon">
    O hai !
    <span class="tip"></span>
</div> 
```

CSS：

```
body { background: #000; }
.balloon {
    width: 250px;
    height: 75px;
    padding: 50px;
    background: #fff;
    border-radius: 50px;
    position: relative;
    font-size: 34px;
    text-align: center;
}
.balloon .tip {
    width: 0;
    height: 0;
    position: absolute;
    right: 70px;
    bottom: -20px;
    border: solid 10px;
    border-color: #fff transparent transparent transparent;
} 
```

[http://jsfiddle.net/6rzDK/](http://jsfiddle.net/6rzDK/)

# c# - C#高效树参数递归，高效子数组或子列表

> ID：15937188
> 
> 赞同：0
> 
> 时间：2013-04-10T21:55:59.283
> 
> 标签：c#, recursion, sublist, arrays

我有一个内存树结构，类似于目录树。即：每个节点都有一个命名子节点的字典。我想要一种从名称列表或数组中遍历树的有效方法。

如果我从根节点开始，有一个我想要遍历的子节点列表，{"organisms","primates","human","male","John Smith"} 然后我递归处理一个步骤并传递剩余的子列表到子节点，返回 this.subNodes[myList[0]].GetSubNode(myList.GetRange(1,myList.Count-1)) ... 即使 List.GetRange() 是浅拷贝，它仍然是将为每个级别的递归创建一个新列表。整个操作看起来非常的时间和空间效率低下。

或者，如果我尝试使用数组，那么我能找到的创建子数组的最佳方法是 Array.Copy，这也是浅拷贝。同样的问题。

我在考虑 C 语言，其中列表的头部只是一个指向一个对象的指针，该对象具有另一个指向另一个对象的指针，因此获取子列表就像跟随一个指针一样简单。或者数组只是指向某个内存的指针，因此获取子数组就像增加指针一样简单。非常节省时间和空间。有没有办法在 C# 中做到这一点？

目前，在 C# 中，我想我只需要忘记递归并从顶层进行某种迭代......

或者我可以递归地传递未修改的数组作为参数，以及一个 int 索引，我将在每个级别更深地递增。这很好，除了我需要将另一个参数传递给递归方法调用，其唯一目的是与第 n 个递归方法调用进行通信，“忽略数组中的前 n 个项目”......这很好，如果这是唯一可能的解决方案（或最好的解决方案），这似乎很愚蠢。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:03:29.260

.net 中有一个[LinkedList 实现](http://msdn.microsoft.com/en-US/library/ahf4c754.aspx)，它允许您将下一个 LinkedListNode 传递给方法。

除此之外，使用索引的方法也很好——至少它不会消耗额外的内存。

还有一种方法可以将指针传递给数组元素，就像在 C 中一样。但这会迫使您在不安全模式下编译程序，这通常是不可取的。

# ios - 适用于 iOS 的 Air SecureSocket

> ID：15937189
> 
> 赞同：2
> 
> 时间：2013-04-10T21:56:03.370
> 
> 标签：ios, apache-flex, ssl, air, adobe

我正在开发一个将在 iPad 上运行的 Adob​​e Air 应用程序，并且正在寻找一种通过套接字发送安全数据的方法。

Adobe API 显示 SecureSocket 类，但它不适用于移动平台。有谁知道允许此方法或任何其他方法通过移动平台上的套接字发送安全数据的本机扩展？

谢谢。

# javascript - gmap 监听器不工作

> ID：15937204
> 
> 赞同：0
> 
> 时间：2013-04-10T21:56:52.497
> 
> 标签：javascript, jquery, ajax, json, google-maps

我面临一个开始让我发疯的问题......
我相信你会比我更了解为什么第二个标记监听器不起作用。:-(

在这段代码中，我从 JSON 格式的 Ajax 查询中获取了一些项目。

这是javascript代码：

```
// Get all items in JSON format
function getItems()
{
    // Ajax call
    $.getJSON("/index/test", function(data) {
        createMenu(data);
        fillMap(data);
    });
}

function fillMap(data){
    // For each
    $.each(data, function(key, item) {
        // Create markers
        var latLon = new google.maps.LatLng(item.lat,item.lon);
        marker = new google.maps.Marker({
            position:     latLon,
            map:         map,
            title:        'Index: ' + item.id,
        });
        // Set marker on the map
        marker.setMap(map);

        // Listener 1
        google.maps.event.addListener(marker, "click", function() {
            map.setCenter(marker.getPosition());
        });

        // Listener 2 - 
        google.maps.event.addListener($('#resultList-'+item.id)[0], 'click', function() {
            map.setCenter(marker.getPosition());
        });

     });
}

//Create the HTML menu
function createMenu(data){
    var items = [];
    //For each items
    $.each(data, function(key, item) {
        var imgHtml = '<img class="shadow" src="../images/item.png" height="48" width="48" alt="photo">';
        // Create the HTML li tag
        var html = '<li id="resultList-' + item.id + '" class="resultList">' + imgHtml + item.nom + ' ' + item.prenom + '<br/>' + item.adresse + '<br/>' + item.ville + ', ' + item.pays + '</li>';
        items.push(html);
    });

    // Fill the div
    $('<ul/>', {
        'id': 'resultList',
        'class': 'resultList',
        html: items.join('')
    }).appendTo('#divList');
    //End...
} 
```

提前谢谢了！塞德里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:04:15.457

如果要在非 gmaps 对象中添加事件侦听器，则应使用[`google.maps.event.addDomListener`](https://developers.google.com/maps/documentation/javascript/events#DomEvents)

所以你可以试试这个：

```
google.maps.event.addDomListener(document.getElementById('resultList-' + item.id), 'click', function() {
    map.setCenter(marker.getPosition());
}); 
```

# regex - 使用正则表达式转换对话 IRC 日志？

> ID：15937206
> 
> 赞同：1
> 
> 时间：2013-04-10T21:57:02.027
> 
> 标签：regex, irc, reformat, reformatting

所以在这里我有来自 BNC 格式的 IRC 日志（其中 [AA:BB:CC] 不是实际时间，只是加载时间）：

```
[AA:BB:CC] <Person1> [re:al:ts] BLAH BLAH BLAH
[AA:BB:CC] <Person2> [an:ot:he] BLAH BLAH BLAH
[AA:BB:CC] <Person3> [rr:ea:lt] BLAH BLAH BLAH
[AA:BB:CC] <Person4> [im:es:tp] BLAH BLAH BLAH 
```

我想将其转换为：

```
[re:al:ts] <Person1> BLAH BLAH BLAH
[an:ot:he] <Person2> BLAH BLAH BLAH
[rr:ea:lt] <Person3> BLAH BLAH BLAH
[im:es:tp] <Person4> BLAH BLAH BLAH 
```

这在技术上可行吗？我看到 [AA:BB:CC] 可以很容易地被删除，但是我将如何保留真正的时间戳并将它们移动到行的 /beginning/ 而不删除“blah blah blah”或“”s？老实说，我不是很精通正则表达式...

谢谢 :) 枫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:05:53.940

要解决的一个例子：

```
perl -pe 's/^\[..:..:..](.*)(\[..:..:..]) (.*)/$2$1$3/' <<EOT
[AA:BB:CC] <Person1> [re:al:ts] BLAH BLAH BLAH
[AA:BB:CC] <Person2> [an:ot:he] BLAH BLAH BLAH
[AA:BB:CC] <Person3> [rr:ea:lt] BLAH BLAH BLAH
[AA:BB:CC] <Person4> [im:es:tp] BLAH BLAH BLAH
EOT 
```

输出：

```
[re:al:ts] <Person1> BLAH BLAH BLAH
[an:ot:he] <Person2> BLAH BLAH BLAH
[rr:ea:lt] <Person3> BLAH BLAH BLAH
[im:es:tp] <Person4> BLAH BLAH BLAH 
```

如果 AA, BB, CC, ... 是数字，则在 perl 正则表达式中使用`\d\d`而不是。`..`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:04:45.667

如果你不使用多行匹配，试试这个正则表达式：

```
/\[.*?]( <.*?> )\[(.*?)]/g 
```

您将替换为：

```
"[$2]$1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:13:55.343

让我们先做一些假设。

1.  [hh:mm:ss] 形式的时间戳，10 以下的秒/分钟表示为 01 等。
2.  人员字符串不包含“[”

然后以下正则表达式将起作用：

```
^\[\d{2}:\d{2}:\d{2}\]([^\[]++)(\[\d{2}:\d{2}:\d{2}\])(.*)$ 
```

这是一个用Java编写的测试用例：

```
public static void main(String[] args) {
    final String[] strings = {"[AA:BB:CC] <Person1> [re:al:ts] BLAH BLAH BLAH",
        "[12:12:11] <Person2> [14:10:25] BLAH BLAH BLAH",
        "[12:12:11] <Person3> [14:10:25] BLAH BLAH BLAH",
        "[12:12:11] <Person4> [14:10:25] BLAH BLAH BLAH"};
    final Pattern pattern = Pattern.compile("^\\[\\d{2}:\\d{2}:\\d{2}\\]([^\\[]++)(\\[\\d{2}:\\d{2}:\\d{2}\\])(.*)$");
    for(final String string : strings) {
        final Matcher matcher = pattern.matcher(string);
        if(matcher.matches()) {
            System.out.println(matcher.group(2) + matcher.group(1) + matcher.group(3));
        }
    }
} 
```

输出：

```
[14:10:25] <Person2>  BLAH BLAH BLAH
[14:10:25] <Person3>  BLAH BLAH BLAH
[14:10:25] <Person4>  BLAH BLAH BLAH 
```

# php - 如何在javascript中验证具有相同名称的多个相同类型的输入

> ID：15937208
> 
> 赞同：0
> 
> 时间：2013-04-10T21:57:18.393
> 
> 标签：php, javascript, html, forms, validation

我对 Javascript 有点陌生。我有一个具有多种输入类型的 html 表单，但相同的名称出现多种类型。在将表单中的数据插入数据库之前，我需要验证表单。我能够在没有 JS 验证的情况下更新并插入数据库，但由于处理同名输入的复杂性，我无法使用 javascript 执行验证部分。这是表格：

```
 <form name="confirmation" method="post" action="appointment.php" onsubmit="return check()">

        <label>Restaurant Name: </label>
        <input name="r_name[]" type="text" value="<?php echo $row[0]?>"><br>
        <label>Appointment Date: </label>
        <input name="app_date[]" type="date" value="<?php echo $row[1]?>"><br>
        Confirm:<select name="confirm[]"> 
            <option value=""></option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
        </select><br><br>

    </form> 
```

这是更新数据库的php代码：

```
<?php 
if(isset($_POST['submit'])){
    $names= $_POST['r_name'];
    $dates=$_POST['app_date'];
    $confirm=$_POST['confirm'];
    //echo $count;
    for($i=0;$i<$count;$i++){
    //echo "success";
        $value=$confirm[$i];
        if($value=="yes")
            $value="y";
        else 
            $value="n";
      //  echo $value;
        $result= mysql_query("update appointment set confirm='".$value."' where rname='".$names[$i]."';");
    }                       
}?> 
```

要将表单中具有相同名称的数据插入/更新到数据库中，我必须将 [] 与它们各自的名称相关联，因为这是一种简单的方法。但是我在验证部分的javascript中评估它时遇到问题。任何人都可以建议我如何使用一个小代码片段来完成它，该代码片段具有用于上述表单中使用的输入类型的任何名称。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:03:41.130

如果`name`多个输入元素的 s 相同，`id`则如果要定位特定元素，则可以在元素上使用唯一的 s，或者可以使用`class`es 定位一组相似的元素。

```
<form>
    <input name="myInput[]" id="myInput_0" class="myInput" type="text" value="">
    <input name="myInput[]" id="myInput_1" class="myInput" type="text" value="">
    <input name="myInput[]" id="myInput_2" class="myInput" type="text" value="">
</form> 
```

现在您可以将`myInput[0]`as`getElementById('myInput_0')`或 all定位`myInput[]`为`getElementByClassName('myInput')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:31:28.003

你可以使用这个 jquery 库[http://www.position-relative.net/creation/formValidator/demos/demoValidators.html](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)

您可以在执行提交帖子后使用此验证，并且库会进行所有验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:28:46.270

尝试 document.getElementsByName

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)

# windows - 导航到分组 GridView 中的特定组标题（win store 应用程序）

> ID：15937212
> 
> 赞同：3
> 
> 时间：2013-04-10T21:57:21.537
> 
> 标签：windows, xaml, gridview, windows-8, winrt-xaml

当我从 ComboBox 中选择某个项目时，我想做一些事情，这样我位于 ScrollViewer 中的分组 GridView 将导航/聚焦到具有 group-header 的组（或其标题）的字符串值在 ComboBox 中选择的项目。

有任何想法吗？可能有一些带有 TabIndex 属性的游戏或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:20:19.167

1.  为什么在 ScrollViewer 中托管 Grid View？GridView 有它自己的 ScrollViewer。
2.  当您开始在 GridView 中使用 ScrollViewer 时（只需将 Grid View 移出 ScrollViewer） - 您只需要使用[ScrollIntoView](http://msdn.microsoft.com/en-us/library/windows/apps/br242911.aspx)方法导航到该项目。

# java - 基于状态的 Java 游戏 - 如何判断鼠标按钮是否被释放？

> ID：15937214
> 
> 赞同：1
> 
> 时间：2013-04-10T21:57:25.093
> 
> 标签：java, button, mouse, lwjgl, slick2d

我正在使用 slick 2d 和 lwjgl 创建一个基于状态的游戏。我目前正在使用 if 语句来检查鼠标是否在按钮区域内，并使用另一个 if 语句来检查鼠标按钮是否按下（按钮只是一张图片 g.drawImage("buttonImage.png", x, y);)。所以我有一个按钮，它从播放状态将状态更改为主菜单，但是由于鼠标按钮按下，它在用户能够释放按钮之前单击主菜单状态上的按钮。所以我需要检查他们是否在触发主菜单上的 if 语句之前释放了按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:27:58.977

您需要的是在鼠标按下时触发的布尔标志，如下所示：（伪代码）

```
if(Mouse.isButtonDown()) {
   downFlag = true;
} 
```

然后在那之后：

```
if(!Mouse.isButtonDown() && downFlag)) {
   changeState();
} 
```

请让我知道这是否有帮助:)

# ios - setTableHeaderView 删除单元格

> ID：15937216
> 
> 赞同：0
> 
> 时间：2013-04-10T21:57:31.550
> 
> 标签：ios, objective-c, uitableview

我在 Storyboard 的 UITableView 中插入了一个 UIView。

我通过使用`[self.tableview setTableHeaderView nil] in`viewDidLoad 隐藏视图，该应用程序可以正确加载视图。

但是，当我想再次显示视图时，通过使用 `[self.tableview setTableHeaderView self.headerView]`它会删除所有 UITableView 单元格并仅用 HeaderView 替换它。

如何在不删除单元格的情况下恢复 headerview？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T12:24:44.893

我有一个类似的问题。原来，我将 xib 的视图绑定到控制器的视图与将其绑定到指向 headerview 的属性

# c++ - 使用 Qt 和向量在文件行中读取问题

> ID：15937223
> 
> 赞同：0
> 
> 时间：2013-04-10T21:58:07.523
> 
> 标签：c++, qt, vector, qtableview

我在 Qt 中有一个问题，我正在运行代码以生成类对象的向量并将它们输出到 TableView。每当我运行代码时，它只会读取文件的第一行。我输入了相同的代码并将 TableView 部分更改为标准 cout，一切正常。

```
showReservations::showReservations(QWidget *parent) :
QDialog(parent),
ui(new Ui::showReservations)
{
ui->setupUi(this);

std::vector<reservation> currReservations;

//Initalize the vector set
//Runs the ReadFlightSchedule with the vector set and returns a 1 if there is a
//failure and 0 if all is good
if (ReadReservations(currReservations) == 1)
{
    //This sets a label to red showing the user an error reading the file
    ui->label->setText("<font color = 'red'>Error Reading File! Oops</font>");
}
else {
    //hides the error label since the file read good.
    ui->label->hide();

    //Generates the column header names
    QStandardItemModel *model = new QStandardItemModel(currReservations.size(), 5, this);
    model->setHorizontalHeaderItem(0, new QStandardItem(QString("Flier Name")));
    model->setHorizontalHeaderItem(1, new QStandardItem(QString("Flight Date")));
    model->setHorizontalHeaderItem(2, new QStandardItem(QString("Flight Number")));
    model->setHorizontalHeaderItem(3, new QStandardItem(QString("Seat Designation")));
    model->setHorizontalHeaderItem(4, new QStandardItem(QString("Reservation ID")));

    //Sets the values from the vector sets to the appropriate column and row sets.
    for (int i = 0; i < currReservations.size(); i++)
    {
        model->setItem(i, 0, new QStandardItem(QString::fromStdString(currReservations[i].getName())));
        model->setItem(i, 1, new QStandardItem(QString::fromStdString(currReservations[i].getDate())));
        model->setItem(i, 2, new QStandardItem(QString::fromStdString(currReservations[i].getFlightNum())));
        model->setItem(i, 3, new QStandardItem(QString::fromStdString(currReservations[i].getSeatDesg())));
        model->setItem(i, 4, new QStandardItem(QString::fromStdString(currReservations[i].getReservationID())));
    }

    ui->tableView->setModel(model);
    ui->tableView->resizeColumnsToContents();
   }
}

showReservations::~showReservations()
{
delete ui;
}

//User Generated Functions
int showReservations::ReadReservations(std::vector<reservation>& Res)
{
std::ifstream flightFile;
std::string fName, lName, date, seatDes, flightNum;
int error = 0;

flightFile.open("reservations.txt");

if(!flightFile)
{
    //returns a error value if there is a problem reading the file
    error = 1;
    return error;
}
else
{
    //Start reading files and sticks them into a class object and sticks the object into the vector set        
    while (flightFile >> fName >> lName >> date >> flightNum >> seatDes)
    {
        reservation newRes(fName, lName, date, flightNum, seatDes);
        Res.push_back(newRes);
    }
}

flightFile.close();
return error;

} 
```

文件内容： Jane Doe 04202013 602 1A Nick Deal 05012013 604 2B John Smith 05012013 604 2A

工作的非 Qt 代码：

```
int ReadReservations(std::vector<reservation>& Res);

int main(int argc, char **argv)
{
std::ifstream flightFile;
std::string name, date, seatDes, flightNum, line;

std::vector<reservation> Res;

flightFile.open("reservations.txt");
ReadReservations(Res);

for (int i = 0; i < Res.size(); i++)
{
    std::cout << Res[i].getName() << std::endl << Res[i].getDate() << std::endl << Res[i].getFlightNum() << std::endl << Res[i].getSeatDesg() << std::endl;
}
return 0;

}

int ReadReservations(std::vector<reservation>& Res)
{
 std::ifstream flightFile;
std::string fName, lName, date, seatDes, flightNum;
int error = 0;

flightFile.open("reservations.txt");

if(!flightFile)
{
    //returns a error value if there is a problem reading the file
    error = 1;
    return error;
}
else
{
    //Start reading files and sticks them into a class object and sticks the object into the vector set        
    while (flightFile >> fName >> lName >> date >> flightNum >> seatDes)
    {
        //flightFile >> fName >> lName >> date >> flightNum >> seatDes;
        reservation newRes(fName, lName, date, flightNum, seatDes);
        Res.push_back(newRes);
    }
}

flightFile.close();
return error;

} 
```

我在不同的文件上有类似的工作。我只是无法弄清楚这个问题是什么。这是为了家庭作业。

感谢所有的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:09:32.620

你可以`appendRow`这样使用：

```
for (int i = 0; i < currReservations.size(); i++)
{
    QList<QStandardItem*> row;
    row << new QStandardItem(QString::fromStdString(currReservations[i].getName())));
    row << new QStandardItem(QString::fromStdString(currReservations[i].getDate())));
    row << new QStandardItem(QString::fromStdString(currReservations[i].getFlightNum())));
    row << new QStandardItem(QString::fromStdString(currReservations[i].getSeatDesg())));
    row << new QStandardItem(QString::fromStdString(currReservations[i].getReservationID())));

    model->appendRow(row);
} 
```

# facebook-graph-api - 通过 FQL 的 Facebook 广告 API

> ID：15937229
> 
> 赞同：0
> 
> 时间：2013-04-10T21:58:49.227
> 
> 标签：facebook-graph-api, facebook-fql, facebook-ads-api

Facebook 为广告提供 API：[https ://developers.facebook.com/docs/reference/ads-api/](https://developers.facebook.com/docs/reference/ads-api/)

在文档中，他们只描述了如何通过图形 API 进行请求。是否也有对应的 FQL 表？我想使用查询：[https ://developers.facebook.com/docs/technical-guides/fql/](https://developers.facebook.com/docs/technical-guides/fql/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:12:25.410

您通过[FQL 表列表](https://developers.facebook.com/docs/reference/fql/)看到的表是唯一提供的当前连接。目前有 3 个广告表。如果这些不是您需要的，那么 FQL 现在根本不可能。也许在未来，但不是现在。使用图形 API。也有大量可用于[Ads API](https://developers.facebook.com/docs/reference/ads-api/)的文档（这只是 Graph API 的一个子集）

# python - 在 python 中，导入类与导入类的模块的优缺点是什么？

> ID：15937233
> 
> 赞同：6
> 
> 时间：2013-04-10T21:59:04.747
> 
> 标签：python, import

我正在为大约 30 名开发人员的团队编写一组 Python 编码指南。作为我的文档的基础，到目前为止，我已经研究了[Google python style guide](http://google-styleguide.googlecode.com)和[PEP 8 style guide](http://www.python.org/dev/peps/pep-0008/)，并结合了两者的信息。

Google 风格指南比 PEP 8 更严格的地方之一是导入。Google 指南要求开发人员仅导入包和模块，然后通过更合格的名称引用其中的项目。例如：

```
from pkg import module
...
my_class = module.MyClass() 
```

理由是“每个标识符的来源都以一致的方式指示”。对于我们的项目，我们打算用两到三层深度的包来组织，所以要知道标识符的完整来源，读者可能无论如何都需要检查导入语句。我想提倡这种导入风格作为“首选风格”：

```
from pkg.module import MyClass
...
my_class = MyClass() 
```

恕我直言，当名称更简洁时，python 结构（如列表推导）的可读性会得到提高。

我不清楚的是 python 解释器可能在幕后做什么。例如，MyClass 现在是这个模块和这个模块的所有导入器的全局命名空间的一部分吗？（这会很糟糕，可能会导致一些奇怪的错误；如果这是真的，我会提倡 Google 风格）。

我的python开发经验被限制在6个月左右（而且我们项目上没有太多专家可以咨询），所以我想从社区获得更多信息。以下是我已经研究过的一些项目：

[effbot - 关于进口的讨论](http://effbot.org/zone/import-confusion.htm "关于进口的讨论")

[堆栈溢出 - 导入与从导入](https://stackoverflow.com/questions/9439480/from-import-vs-import)

[python 文档 - 模块](http://docs.python.org/2/tutorial/modules.html)

[python 文档 - 导入](http://docs.python.org/2/reference/simple_stmts.html#import)

谢谢您的反馈！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T22:22:09.653

在 Python 中，不存在跨多个模块的全局变量。如果您这样做`from pkg.module import MyClass`，则`MyClass`在您执行该操作的模块的全局命名空间中，但不在任何其他模块的全局命名空间中（包括导入导入 MyClass 的模块的模块）。

至于您更一般的问题，视情况而定，任何一种导入机制都可以接受。如果模块名称很长，您可以通过以不同的名称导入它来缩短：

```
# Awkward
from package import reallylongmodule
reallylongmodule.MyClass()

# Less awkward
from package import reallylongmodule as rlm
rlm.MyClass() 
```

如果类名足够独特，你可以知道它来自哪里以及它是什么，那么只导入类就可以了。但是，如果您有多个模块定义了具有相对难以描述的名称的类（例如，“处理器”、“单元”、“数据”、“管理器”），那么最好通过模块名称访问它们以澄清你在做什么。

风格指南最终是指南，而不是法律。我自己的偏好是选择一种能够最大限度地提高清晰度和可读性的机制。这涉及在避免冗长和繁琐的名称与避免简短、模糊或神秘的名称之间进行权衡。您如何进行权衡取决于您正在使用的特定库以及您如何使用它们（例如，您导入了多少模块，从它们导入了多少东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:29:00.897

我建议您使用自动代码检查器，例如 pylint、pep8、pyflakes，而不是编写代码指南。

我个人更喜欢使用`from pkg import module`，因为可能会发生名称冲突。

```
from package import module

def my_fun():
   module.function() 
```

Inpreter 必须执行 3 次哈希表查找本地函数命名空间、当前模块的全局命名空间和导入模块的命名空间。在

```
from package.module import function

def my_fun():
   function() 
```

它只会进行 2 次查找：最后一次是在导入时执行的。

# sql - 为什么我在 null 时为 Count([Field]) 得到 0

> ID：15937240
> 
> 赞同：0
> 
> 时间：2013-04-10T21:59:45.647
> 
> 标签：sql, sql-server-2008, tsql

我有以下查询：

```
Select [Field], count([Field]) as Counts
from [Table_Name]
group by [Field] 
```

结果如下所示：

```
[Field] [Counts]
Type1   100
Type2   100
Type3   100
Type4   100
Null    0 
```

但是，当我依靠键或任何其他字段而不是我分组的字段时，我会得到 [Field] Null 的实际行数。这是为什么？

```
Select [Field], count([Other]) as Counts
from [Table_Name]
group by [Field] 
```

结果：

```
[Field] [Counts]
Type1   100
Type2   100
Type3   100
Type4   100
Null    100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:27:23.240

就是这样`COUNT`工作的。当您指定列`NULL`值时，将从计算中消除。并且因为您`COUNT`设置在与 相同的列上`GROUP BY`，所以您收到`0`了`NULL`组 - 您计算的所有值都是`NULL`并且它们都被跳过。

您可以使用以下代码使其工作：

```
Select [Field], count(ISNULL([Field], 0)) as Counts
from [Table_Name]
group by [Field] 
```

或者更简单：

```
Select [Field], count(*) as Counts
from [Table_Name]
group by [Field] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:48:31.690

您可能想尝试我的[SQL Fiddle](http://sqlfiddle.com/#!3/d753e/1)。

按照当前配置（您可以进行任何您想要的更改）以下数据：

```
FIELD1  OTHER
AA      (null)
BB         O1
BB         O2
AA         A1
(null)     N3
(null)  (null) 
```

以下查询包含此特定表的所有三个 COUNT 选项：

```
SELECT [Field1], COUNT([Field1]) [Fields], 
                 COUNT([Other]) [Others], 
                 COUNT(*) [Records]
FROM [Table1]
GROUP BY [Field1] 
```

产生以下结果：

```
FIELD1  FIELDS  OTHERS  RECORDS
(null)     0        1      2
AA         2        1      2
BB         2        2      2 
```

# r - 为什么我的 download.file 无法完成？

> ID：15937241
> 
> 赞同：2
> 
> 时间：2013-04-10T21:59:50.070
> 
> 标签：r, download, lapply

我试图`urls`使用以下代码从网站（列出的地址）检索数十个文件

```
 L <- lapply(urls, read.xls, sheet=1,header=T,skip=1,perl="C:/perl/bin/perl.exe",row.names=NULL) 
```

但在几次成功下载后，我一直收到此错误：

```
 Trying URL 'http://www.xyz.com'
Error in download.file(xls, tf, mode = "wb") : 
  cannot open URL 'http://www.xyz.com'
In addition: Warning message:
In download.file(xls, tf, mode = "wb") :
  cannot open: HTTP status was '0 (nil)'
Error in file.exists(tfn) : invalid 'file' argument 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:59:50.070

该错误是由默认`timeout`选项引起的，该选项设置为默认的`60`秒数。

您可以通过调用来检索它：

```
getOption("timeout") 
```

要更改它，您只需运行`options(timeout = X)`，`X`您想要的超时时间在哪里（以秒为单位）。

# c# - DataContractAttribute 基础知识

> ID：15937252
> 
> 赞同：3
> 
> 时间：2013-04-10T22:00:33.190
> 
> 标签：c#, wcf, datacontractserializer, datacontract

我正在查看 Microsoft 的 How to: [Create a Basic Data Contract for a Class or Structure](http://msdn.microsoft.com/en-us/library/ms733811.aspx)，但它给我留下了很多问题。

他们提供了这个非常简单的例子：

```
using System;
using System.Runtime.Serialization;

[DataContract]
public class Person
{
  // This member is serialized.
  [DataMember]
  internal string FullName;

  // This is serialized even though it is private.
  [DataMember]
  private int Age;

  // This is not serialized because the DataMemberAttribute 
  // has not been applied.
  private string MailingAddress;

  // This is not serialized, but the property is.
  private string telephoneNumberValue;

  [DataMember]
  public string TelephoneNumber
  {
    get { return telephoneNumberValue; }
    set { telephoneNumberValue = value; }
  }
} 
```

就我而言，我需要它还包括另一个名为`ADUser`（Active Directory 用户）的自定义类对象。

我知道`ADUser`必须用 标记`DataContractAttribute`，但我不明白该怎么做。

这是 Microsoft 的课程，但这次`ADUser`添加了字段：

```
using System;
using System.Runtime.Serialization;

[DataContract]
public class Person
{
  // This member is serialized.
  [DataMember]
  internal string FullName;

  // This is serialized even though it is private.
  [DataMember]
  private int Age;

  // This is not serialized because the DataMemberAttribute 
  // has not been applied.
  private string MailingAddress;

  // This is not serialized, but the property is.
  private string telephoneNumberValue;

  [DataMember]
  public string TelephoneNumber
  {
    get { return telephoneNumberValue; }
    set { telephoneNumberValue = value; }
  }

  [DataMember]
  public ADUser UserInfo { get; set; }

} 
```

我真的不明白我的班级需要如何或做什么`ADUser`，但我确信这些`private`东西可以保持不变。

我需要如何**修复**这个`ADUser`类示例？

```
public class ADUser
{

  private string first, last, loginID;

  public ADUser() {
    first = null;
    last = null;
    loginID = null;
  }

  private void getInfo() {
    // code goes here
    // which sets loginID;
  }

  public void SetName(string first, string last) {
    this.first = first;
    this.last = last;
    getInfo();
  }

  public string LoginID { get { return loginID; } }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T04:40:44.450

正如[@outcoldman](https://stackoverflow.com/questions/15937252/basics-of-datacontractattribute#comment22706759_15937252)和[@EthanLi](https://stackoverflow.com/questions/15937252/basics-of-datacontractattribute#comment22709489_15937252)建议的那样：

1.  将`[DataContract]`属性添加到`ADUser`类。

2.  添加一个*不带参数的**公共*构造函数。

**   选择要通过 WCF 传递的字段。`[DataMember]`用属性标记所有这些。

    *   *只有 getter 的*属性在序列化期间会失败：所有公开的属性都应该有*一个 getter 和（公共！）setter*。因此，例如，`LoginID`如果您尝试将属性应用于属性，您的属性将会失败`[DataMember]`。在这种情况下，请考虑将其更改为方法。*

# mysql - 为什么 sql = FALSE 总是返回 true

> ID：15937253
> 
> 赞同：5
> 
> 时间：2013-04-10T22:00:34.427
> 
> 标签：mysql, sql

无论我在 MySQL 5.0 中做什么，例如

```
SELECT 'test' = FALSE

SELECT '' = FALSE 
```

我总是在 SQL 中得到 1。这是什么原因？我期待一个 0 或 FALSE

**编辑**为问题添加上下文。这就是问题出现的原因，碰巧 $name 无意中变成了 false 使得这个连接总是通过，然后我想知道为什么会这样。

```
SELECT a.id
FROM user a 
INNER JOIN inventory b ON b.user_id = a.id AND b.name = $name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:06:21.173

在 MySql中， [FALSE](http://dev.mysql.com/doc/refman/5.0/en/boolean-literals.html)是一个常量文字，它总是被评估为 0。

因此，您正在检查 if`'test' = 0`或 if `'' = 0`，并且由于您将字符串与整数进行比较，MySql 将尝试将字符串转换为整数。

如果您尝试此查询：

```
SELECT 'test' = FALSE 
```

它将返回 1 (TRUE)，因为 'test' 将被转换为 0，而如果你尝试这个：

```
SELECT '1test' = FALSE 
```

它将返回 0（FALSE），因为 '1test' 将被转换为 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T22:07:07.813

这与 MySQL在使用比较运算符时的[隐式转换](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal)`=`有关（即）

取自文档：

> 必要时，字符串会自动转换为数字，数字会自动转换为字符串。

所以，在你的情况下：

*   `'test'`转换为`0`
*   `FALSE`是`0`
*   `0 = 0`是`TRUE`。

# windows - 批量复制命令未到达子文件夹

> ID：15937255
> 
> 赞同：0
> 
> 时间：2013-04-10T22:00:36.953
> 
> 标签：windows, batch-file

我有一个批处理命令可以将具有新名称的文件复制并移动到另一个目录。当我再添加一层子文件夹时，它不会复制，但是当我删除添加的子文件夹并将文件移动到上一层时，它会复制。这是它：

```
cd /d dir "U:\Sourcing\Vendor Demand Planning\Customer CPFR\BBM\"

for /f "delims=" %%I in ('dir /b /o:-d "BBM Tool *.xlsx"') do (
    copy "%%I" "..\Pricing Project\BBM Tool.xlsx"
    exit /b
) 
```

如果我删除了 BBM 级别并将文件移动到客户 CPFR 级别，它就可以工作。我从另一个在 CPFR 文件夹中有目标文件的批次编辑了这批。我需要复制的文件在 BBM 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:11:44.250

将 COPY 更改为 XCOPY 并使用 /S

见 XCOPY /?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:04:25.470

我会说“定价项目”目录与“客户 CPFR”处于同一级别，因此目标`copy`应该是“..\..\定价项目...

* * *

（稍后编辑）

也应删除`dir`该行。`CD`

# jquery - Jquery从html中提取某些href值

> ID：15937256
> 
> 赞同：-1
> 
> 时间：2013-04-10T22:00:41.340
> 
> 标签：jquery, href

在我的页面的某个地方，我有：

```
<td align="center">
    <a href="javascript:goToDetails(8719)">8719</a>
</td>
<td>
<a href="javascript:goToDetails(8719)">Changes to Henderson Center Webpage</a>
</td> 
```

我想使用 jQuery 来获取`<a href="javascript:goToDetails(some int)">Value</a>`标签的所有值。所以对于上面的代码，我希望能够提取字符串“8719”和“更改亨德森中心网页”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:04:10.547

此选择器查找属性*以 结尾的*`a`所有元素：`href` *`goToDetails(8719)`*

 *```
var values = $("a[href$='goToDetails(8719)']").map(function () {
     return $(this).html();   
}).get(); 
```

锚点的内容被返回到一个数组中，您可以随意操作或使用该数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:06:40.723

如果您有`table`这些`a`元素，则可以使用[**.map()**](http://api.jquery.com/map/)和[**.get()**](http://api.jquery.com/get/)将它们填充到值数组中，类似于：

```
var myArray = $("table a").map(function() {
                 return $(this).text();
              }).get(); 
```

根据需要调整选择器。

* * *

[**演示**](http://jsfiddle.net/8vcB5/)- 使用`.map()`和`.get()`

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T22:14:22.627

使用 jQuery 的 each 函数并在整个 dom 中迭代所有 Anchor 标记的 Text。我附上了一个场景的样本小提琴，它们都被打印到屏幕上的文档准备给你一个想法。希望能帮助到你。

```
$(document).ready(function(){
    $('a').each(function(){
       $("#result").append($(this).text() + "<br/>");
    });
}); 
```

[http://jsfiddle.net/danieljordan13/mkQJt/](http://jsfiddle.net/danieljordan13/mkQJt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T22:04:14.153

```
$('a').each(function(){
   alert($(this).text());
}); 
```

[**小提琴**](http://jsfiddle.net/mohammadAdil/mSGVT/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T22:11:55.267

```
$(a[href*=goToDetails]).each(function() {

    var num = $(this).attr('href').match("[0-9]+"),
        text = $(this).text();

    alert(num + ": " + text);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T22:20:36.250

获取所有链接名称和 href 编号的数组

```
var all_values = [];
$('a').each(function (i) {
    all_values.push( $(this).text() );
    var href = $(this).attr("href");
    href = href.replace("javascript:goToDetails(", "");
    all_values.push( href.replace(")", "") );
});
alert(all_values); 
```

示例：http: [//jsfiddle.net/Qb9E3/](http://jsfiddle.net/Qb9E3/)*

# android - 尝试将文件保存到 SD 卡时权限被拒绝

> ID：15937258
> 
> 赞同：1
> 
> 时间：2013-04-10T22:01:04.487
> 
> 标签：android, android-sdcard

我试图将文本文件保存到 sd 卡，但我收到 Eacess（权限定义）错误。我的代码如下所示：

```
 try {
            File myFile = new File(Environment.getExternalStorageDirectory().getPath() + "/myfile");
            myFile.createNewFile();
            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter = 
                                    new OutputStreamWriter(fOut);
            myOutWriter.append(text.getText());
            myOutWriter.close();
            fOut.close();
            Toast.makeText(getBaseContext(),
                    "Done writing SD 'mysdfile.txt'",
                    Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();
        } 
```

我已经允许`

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />` 
```

在 android 清单中

我一直在查看与此问题相关的其他一些帖子，但没有解决它。

我错过了什么？

**更新我的清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.files"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.files.FilesActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:18:21.470

要将文件保存到外部存储，它有助于拥有外部存储。:-)

不幸的是，AVD 管理器默认没有外部存储（尽管我建议他们改变这个）。因此，如果您使用的是模拟器，请仔细检查以确保您已填写“SD 卡”大小的值。

我通常分配一些小的东西，比如 32MB——足够你可以使用外部存储，而不是太多以至于它会占用你的硬盘驱动器或减慢最初的 AVD 启动。当然，如果您计划测试需要更多外部存储的东西，请选择一个合适的值。

# php - 如何制作类似 Twitter 的关注系统

> ID：15937260
> 
> 赞同：0
> 
> 时间：2013-04-10T22:01:39.353
> 
> 标签：php, mysql

我如何制作一个类似 Twitter 的关注系统，如果您关注某人，您将收到他们的推文。我有一个名为“users”、“followings”和“posts”的数据库表。users 表包含我网站上的用户。以下显示人员关注者，此表设置如下：'id，user_one，user_two'。帖子表包含唯一用户拥有的所有推文或帖子。

我为每个用户设置了一个个人资料页面，并带有一个关注按钮。而且我还有一个用户的新闻提要，但在那个新闻提要中，我需要它来显示登录用户正在关注的用户的帖子。无论如何，我是否可以让用户关注某人并在他们的新闻提要上接收该用户的帖子。

现在我[做了一些研究](http://www.ibm.com/developerworks/opensource/library/os-php-twitter-interface/index.html?ca=dgr-lnxw9d&S_TACT=105AGX59&S_CMP=grsitelnxw9d)：他们的系统似乎无法正常工作。我不断收到此错误：

> 警告：implode() [function.implode]：第 12 行的 function.php 中传递的参数无效

```
SELECT 
  user_id, 
  body, 
  stamp 
FROM posts 
WHERE user_id in () 
ORDER BY stamp DESC 
```

> 警告：mysql_fetch_object()：提供的参数不是 function.php 中有效的 MySQL 结果资源。

这里的这条线是为了帮助你关注那个人时你会在那里收到推文和东西

```
function show_posts($userid,$limit=0){
$posts = array();

$user_string = implode(',', $userid);
$extra =  " and id in ($user_string)";

if ($limit > 0){
    $extra = "limit $limit";
}else{
    $extra = '';    
}

$sql = "select user_id,body, stamp from posts 
    where user_id in ($user_string) 
    order by stamp desc $extra";
echo $sql;
$result = mysql_query($sql);

while($data = mysql_fetch_object($result)){
    $posts[] = array(   'stamp' => $data->stamp, 
                        'userid' => $data->user_id, 
                        'body' => $data->body
                );
}
return $posts; 
```

}

我相信这段代码应该显示其他用户的帖子，导致了这个问题，但我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:59:00.613

使用连接。例如：

```
select user_id, text from posts
    inner join followings on posts.user_id = followings.followed_id
    where followings.follower_id = :user_id; 
```

如果我可以推荐，请停止使用这些`mysql_`功能；[它们已被弃用](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)，不应在较新的应用程序中使用。相反，我建议使用[PDO](http://www.php.net/pdo)。

# css - 使用 CSS 重新定位页面布局

> ID：15937263
> 
> 赞同：0
> 
> 时间：2013-04-10T22:01:48.847
> 
> 标签：css, html, mobile, media-queries, page-layout

我有一个问题，我希望使用 CSS 为移动视图更改网页的定位。当前的桌面设置是向左浮动的侧边栏和向右浮动的文本框。HTML如下：

```
<div id="container">
   <div id="sidebar">...</div>
   <div id="textbox">...</div>
</div> 
```

我的困境是，在移动设备上，我希望侧边栏内容出现在文本框下方，而我正在努力生成 CSS 来做到这一点。我正在使用媒体查询来定位智能手机，例如：

```
@media screen and (max-width:479px) {
  /* Target portrait smartphones */
} 
```

谁能给我提供CSS来做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:05:02.613

`#sidebar`在您的 html 中添加after是最简单`#textbox`的，这不会影响桌面查看，然后对于移动设备，您可以删除浮动：

```
@media screen and (max-width:479px) {
  #sidebar, #textbox {
    float: none;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:31:25.187

这很简单，为了做到这一点，你应该像这样使用它

```
<div id="container">
   <div id="textbox">...</div>
   <div id="sidebar">...</div>
</div> 
```

首先是文本框，因为您将删除移动设备的浮动。所以文本框首先出现，然后是侧边栏。

的CSS：

```
.textbox {
    width: ***px;
    float right;
}
.sidebar {
    width: ***px;
    float left;
}
@media screen and (max-width:479px) {
  /* Target portrait smartphones */
  .textbox, .sidebar {
     float: none;
  }
} 
```

希望这可以帮助 ！:)

# bash - BASH printf 函数打印包含星号符号的变量

> ID：15937265
> 
> 赞同：0
> 
> 时间：2013-04-10T22:01:53.190
> 
> 标签：bash, printf

我试图让 printf 函数打印出一行带有存储值的变量，其中一个变量可能包含一个星号。使用 printf 的原因是我可以遵循 limits.conf 文件中已有的格式样式，将每个变量固定在指定的空间量中。它适用于“*”以外的任何内容。

```
printf "#"'%-15s %-7s %-15s %-8s\n' $domain $type $item $value >> ~/etc/security/limits.conf 
```

比如说：domain=* type=hard item=core value=100

执行此操作时，我奇怪地在limits.conf 文件中列出了我的所有目录，即使domain 的值为“*” 完全不确定是否可以解决此问题。希望有人能帮忙！提前致谢！

条目外观示例：

```
#<domain>      <type>  <item>         <value>
#

#*               soft    core            0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:08:47.153

试试这种方式：

```
printf "#"'%-15s %-7s %-15s %-8s\n' "$domain" "$type" "$item" "$value" >> ~/etc/security/limits.conf 
```

这应该保护 * 免受文件名扩展 - 这就是您所看到的。它还可以防止其他问题。

# javascript - nodejs console.log在错误之前没有写入

> ID：15937266
> 
> 赞同：1
> 
> 时间：2013-04-10T22:01:54.223
> 
> 标签：javascript, node.js

我读到这个：[node.js 的 console.log 是异步的吗？](https://stackoverflow.com/questions/5127532/is-node-js-console-log-asynchronous)这表示标准输出*曾经*是异步的。但是，在某些特定情况下，我仍然会看到此问题，例如：

```
console.log("first");
console.log("second");
throw "bah"; 
```

我很难将我的应用程序简化为这个示例。这里的问题是“第一个”打印，但“第二个”没有。什么？有没有人见过这种类型的问题？

我使用的节点版本是：node-v0.10.3-x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:40:50.123

看起来这是 node.js 中特定于 windows 的错误。这是可能的错误：

[https://github.com/joyent/node/issues/3584](https://github.com/joyent/node/issues/3584)

# angularjs - 在 app.config 中注入服务

> ID：15937267
> 
> 赞同：169
> 
> 时间：2013-04-10T22:02:01.410
> 
> 标签：angularjs

我想将服务注入 app.config，以便在调用控制器之前检索数据。我试过这样：

服务：

```
app.service('dbService', function() {
    return {
        getData: function($q, $http) {
            var defer = $q.defer();
            $http.get('db.php/score/getData').success(function(data) {
                defer.resolve(data);            
            });
            return defer.promise;
        }
    };
}); 
```

配置：

```
app.config(function ($routeProvider, dbService) {
    $routeProvider
        .when('/',
        {
            templateUrl: "partials/editor.html",
            controller: "AppCtrl",
            resolve: {
                data: dbService.getData(),
            }
        })
}); 
```

但我得到这个错误：

> 错误：未知提供者：来自 EditorApp 的 dbService

如何更正设置并注入此服务？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2014-02-08T18:50:49.287

# 将您的服务设置为自定义 AngularJS 提供程序

尽管接受的答案说了什么，您实际上**可以**做您打算做的事情，但是您需要将其设置为可配置的提供程序，以便在配置阶段它可以作为服务使用。首先，将您更改`Service`为提供程序如下所示。这里的关键区别在于，在设置 的值之后`defer`，您将`defer.promise`属性设置为由返回的承诺对象`$http.get`：

*提供者服务：（*提供者：服务配方）

```
app.provider('dbService', function dbServiceProvider() {

  //the provider recipe for services require you specify a $get function
  this.$get= ['dbhost',function dbServiceFactory(dbhost){
     // return the factory as a provider
     // that is available during the configuration phase
     return new DbService(dbhost);  
  }]

});

function DbService(dbhost){
    var status;

    this.setUrl = function(url){
        dbhost = url;
    }

    this.getData = function($http) {
        return $http.get(dbhost+'db.php/score/getData')
            .success(function(data){
                 // handle any special stuff here, I would suggest the following:
                 status = 'ok';
                 status.data = data;
             })
             .error(function(message){
                 status = 'error';
                 status.message = message;
             })
             .then(function(){
                 // now we return an object with data or information about error 
                 // for special handling inside your application configuration
                 return status;
             })
    }    
} 
```

现在，你有了一个可配置的自定义 Provider，你只需要注入它。这里的主要区别是缺少“注射剂上的提供者”。

*配置：*

```
app.config(function ($routeProvider) { 
    $routeProvider
        .when('/', {
            templateUrl: "partials/editor.html",
            controller: "AppCtrl",
            resolve: {
                dbData: function(DbService, $http) {
                     /*
                     *dbServiceProvider returns a dbService instance to your app whenever
                     * needed, and this instance is setup internally with a promise, 
                     * so you don't need to worry about $q and all that
                     */
                    return DbService('http://dbhost.com').getData();
                }
            }
        })
}); 
```

*使用已解析的数据`appCtrl`*

```
app.controller('appCtrl',function(dbData, DbService){
     $scope.dbData = dbData;

     // You can also create and use another instance of the dbService here...
     // to do whatever you programmed it to do, by adding functions inside the 
     // constructor DbService(), the following assumes you added 
     // a rmUser(userObj) function in the factory
     $scope.removeDbUser = function(user){
         DbService.rmUser(user);
     }

}) 
```

### 可能的替代方案

以下替代方法是一种类似的方法，但允许在 中进行定义`.config`，将服务封装到应用程序上下文中的特定模块中。选择适合您的方法。另请参阅下面有关第三种替代方法的注释和有用的链接，以帮助您掌握所有这些事情

```
app.config(function($routeProvider, $provide) {
    $provide.service('dbService',function(){})
    //set up your service inside the module's config.

    $routeProvider
        .when('/', {
            templateUrl: "partials/editor.html",
            controller: "AppCtrl",
            resolve: {
                data: 
            }
        })
}); 
```

## 一些有用的资源

*   [John Lindquist 在egghead.io](https://egghead.io/lessons/angularjs-providers)上有一个非常棒的 5 分钟解释和演示，这是免费课程之一！我基本上修改了他的演示，使其`$http`在此请求的上下文中具体化
*   [查看关于Providers](http://docs.angularjs.org/guide/providers)的 AngularJS 开发者指南
*   [在clevertech.biz](http://blog.clevertech.biz/post/angularjs-factory-service-provider)上也有关于`factory`//的出色解释。`service``provider`

提供程序为您提供了比该`.service`方法更多的配置，这使其作为应用程序级提供程序更好，但您也可以通过注入`$provide`配置将其封装在配置对象本身中，如下所示：

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2013-04-10T23:12:10.630

亚历克斯提供了无法做你想做的事情的正确原因，所以+1。但是您遇到这个问题是因为您没有完全使用解决方案的设计方式。

`resolve`接受服务的字符串或返回要注入的值的函数。由于您正在执行后者，因此您需要传入一个实际函数：

```
resolve: {
  data: function (dbService) {
    return dbService.getData();
  }
} 
```

当框架去 resolve`data`时，它​​会将 注入`dbService`到函数中，这样你就可以自由地使用它了。您根本不需要注入`config`块来完成此操作。

胃口大开！

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-10T22:40:51.843

简短的回答：你不能。AngularJS 不允许您将服务注入到配置中，因为它无法确定它们是否已正确加载。

请参阅此问题和答案： [AngularJS 依赖注入 module.config 中的值](https://stackoverflow.com/questions/12903338/angularjs-dependency-injection-of-value-inside-of-module-config)

> 模块是在引导过程中应用于应用程序的配置和运行块的集合。该模块最简单的形式由两种块的集合组成：
> 
> **配置块**- 在提供者注册和配置阶段执行。只有提供者和常量可以注入到配置块中。这是为了防止在完全配置之前意外实例化服务。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-09T17:42:10.243

** 使用 angular.injector 从其他模块显式请求服务 **

只是为了详细说明[kim3er的答案](https://stackoverflow.com/questions/15937267/inject-service-in-app-config/18229482#18229482)，您可以提供服务，工厂等，而无需将它们更改为提供者，只要它们包含在其他模块中...

但是，我不确定`*Provider`（在处理服务或工厂后由 Angular 内部制作）是否始终可用（它可能取决于首先加载的其他内容），因为 Angular 会延迟加载模块。

请注意，如果要重新注入应将它们视为常量的值。

这是一个更明确，可能更可靠的方法+[一个工作的plunker](http://plnkr.co/edit/schSWAiQwP41S5eR2bqn?p=preview)

```
var base = angular.module('myAppBaseModule', [])
base.factory('Foo', function() { 
  console.log("Foo");
  var Foo = function(name) { this.name = name; };
  Foo.prototype.hello = function() {
    return "Hello from factory instance " + this.name;
  }
  return Foo;
})
base.service('serviceFoo', function() {
  this.hello = function() {
    return "Service says hello";
  }
  return this;
});

var app = angular.module('appModule', []);
app.config(function($provide) {
  var base = angular.injector(['myAppBaseModule']);
  $provide.constant('Foo', base.get('Foo'));
  $provide.constant('serviceFoo', base.get('serviceFoo'));
});
app.controller('appCtrl', function($scope, Foo, serviceFoo) {
  $scope.appHello = (new Foo("app")).hello();
  $scope.serviceHello = serviceFoo.hello();
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-14T10:37:38.733

我不认为你应该能够做到这一点，但我已经成功地将服务注入到一个`config`块中。(AngularJS v1.0.7)

```
angular.module('dogmaService', [])
    .factory('dogmaCacheBuster', [
        function() {
            return function(path) {
                return path + '?_=' + Date.now();
            };
        }
    ]);

angular.module('touch', [
        'dogmaForm',
        'dogmaValidate',
        'dogmaPresentation',
        'dogmaController',
        'dogmaService',
    ])
    .config([
        '$routeProvider',
        'dogmaCacheBusterProvider',
        function($routeProvider, cacheBuster) {
            var bust = cacheBuster.$get[0]();

            $routeProvider
                .when('/', {
                    templateUrl: bust('touch/customer'),
                    controller: 'CustomerCtrl'
                })
                .when('/screen2', {
                    templateUrl: bust('touch/screen2'),
                    controller: 'Screen2Ctrl'
                })
                .otherwise({
                    redirectTo: bust('/')
                });
        }
    ]);

angular.module('dogmaController', [])
    .controller('CustomerCtrl', [
        '$scope',
        '$http',
        '$location',
        'dogmaCacheBuster',
        function($scope, $http, $location, cacheBuster) {

            $scope.submit = function() {
                $.ajax({
                    url: cacheBuster('/customers'),  //server script to process data
                    type: 'POST',
                    //Ajax events
                    // Form data
                    data: formData,
                    //Options to tell JQuery not to process data or worry about content-type
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function() {
                        $location
                            .path('/screen2');

                        $scope.$$phase || $scope.$apply();
                    }
                });
            };
        }
    ]); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-05-26T14:49:21.077

您可以使用 $inject service 在配置中注入服务

```
app.config（功能（$提供）{

    $provide.decorator("$exceptionHandler", function($delegate, $injector){
        返回函数（异常，原因）{
            var $rootScope = $injector.get("$rootScope");
            $rootScope.addError({message:"Exception", reason:exception});
            $delegate（异常，原因）；
        };
    });

});

```

来源： http: [//odetocode.com/blogs/scott/archive/2014/04/21/better-error-handling-in-angularjs.aspx](http://odetocode.com/blogs/scott/archive/2014/04/21/better-error-handling-in-angularjs.aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-01-04T17:34:31.453

**使用 $injector 调用配置中的服务方法**

我遇到了类似的问题，并通过使用如上所示的 $injector 服务解决了它。我尝试直接注入服务，但最终导致对 $http 的循环依赖。该服务显示一个带有错误的模式，我正在使用 ui-bootstrap 模式，它也依赖于 $https。

```
 $httpProvider.interceptors.push(function($injector) {
    return {
        "responseError": function(response) {

            console.log("Error Response status: " + response.status);

            if (response.status === 0) {
                var myService= $injector.get("myService");
                myService.showError("An unexpected error occurred. Please refresh the page.")
            }
        }
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-07T10:15:39.423

**一个很容易做到的解决方案**

**注意**：它仅适用于异步调用，因为服务未在配置执行时初始化。

你可以使用`run()`方法。例子 ：

1.  您的服务称为“MyService”
2.  您想将其用于提供者“MyProvider”上的异步执行

你的代码：

```
(function () { //To isolate code TO NEVER HAVE A GLOBAL VARIABLE!

    //Store your service into an internal variable
    //It's an internal variable because you have wrapped this code with a (function () { --- })();
    var theServiceToInject = null;

    //Declare your application
    var myApp = angular.module("MyApplication", []);

    //Set configuration
    myApp.config(['MyProvider', function (MyProvider) {
        MyProvider.callMyMethod(function () {
            theServiceToInject.methodOnService();
        });
    }]);

    //When application is initialized inject your service
    myApp.run(['MyService', function (MyService) {
        theServiceToInject = MyService;
    }]);
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-21T21:05:09.283

好吧，我在这个方面有点挣扎，但我确实做到了。

我不知道答案是否因为角度的一些变化而过时，但你可以这样做：

这是您的服务：

```
.factory('beerRetrievalService', function ($http, $q, $log) {
  return {
    getRandomBeer: function() {
      var deferred = $q.defer();
      var beer = {};

      $http.post('beer-detail', {})
      .then(function(response) {
        beer.beerDetail = response.data;
      },
      function(err) {
        $log.error('Error getting random beer', err);
        deferred.reject({});
      });

      return deferred.promise;
    }
  };
 }); 
```

这是配置

```
.when('/beer-detail', {
  templateUrl : '/beer-detail',
  controller  : 'productDetailController',

  resolve: {
    beer: function(beerRetrievalService) {
      return beerRetrievalService.getRandomBeer();
    }
  }
}) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-04T19:00:29.487

最简单的方法： `$injector = angular.element(document.body).injector()`

然后使用它来运行`invoke()`或`get()`

# ruby-on-rails - 从下拉菜单中选择或添加另一个

> ID：15937271
> 
> 赞同：1
> 
> 时间：2013-04-10T22:02:08.193
> 
> 标签：ruby-on-rails, ruby, simple-form

我正在使用 simple_form。我怎样才能有一个选择菜单和一个文本输入，并有类似`Select or add another`.

该应用程序只会从选择菜单或文本输入中获取一个值。

验证具有其中一个或另一个但不是两者都有也很好，以避免用户混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:18:54.973

在您的 simple_form 中实施所谓的“组合框”

Jquery UI 有一个组合框：http: [//jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

更花哨的东西： [http ://demos.kendoui.c​​om/web/combobox/index.html](http://demos.kendoui.com/web/combobox/index.html)

这将使您尽可能地显示您的组合框。我认为没有用于验证的插件，因此您必须自己编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:39:42.887

您可以尝试结合使用 JavaScript 和 Ruby 来解决此问题。如果用户想要输入不同的值，那么下拉列表中的可用值，您应该让 JS 监听该输入中的 keydown 事件并清除下拉列表，即：

```
$(".input_field").bind('keydown', function() {
  $(".select_field").val('0') // this should be a default blank value
}); 
```

这将在用户键入时清除选择。同样，您想在用户从下拉列表中选择时清除输入，对吗？

```
$(".select_field").change(function() {
  // Let's only clear the input field if the value is not the default null value
  if ( $(this).val() != 0 ) {
    $(".input_field").val('');
  }
}); 
```

这将处理前端交互。在控制器中，您需要执行一些额外的逻辑：

```
def create
  object.new(...)
  if params[:select] and params[:input]
    # Overwrite the select with the input value
    object.attribute = params[:input]
  end
  object.save
end 
```

我假设您希望输入值取代选择，因此如果它们提交最多，我们可以用输入值覆盖选择值，然后继续保存对象。

这是你要找的吗？不确定输入的值是否假设创建具有关系的新对象。希望这可以帮助。

# variables - 如何获取存储在堆栈中的变量？

> ID：15937272
> 
> 赞同：1
> 
> 时间：2013-04-10T22:02:08.130
> 
> 标签：variables, memory, operating-system, stack

在编程时（例如，在 C 中），很多变量都保存在堆栈中。栈是一种先进先出的数据结构，我们只能弹出栈顶的值。

假设我有 100 个变量存储在堆栈中，我想获取其中一个的值，它不在堆栈的顶部。我如何得到它？操作系统是否会弹出堆栈中所有较新的变量，直到获得想要的变量，然后将它们全部推回内部？或者操作系统是否可以通过不同的方式处理堆栈内的变量？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:07:01.960

I. 操作系统不会直接对您的变量做任何事情。

二、不要将堆栈视为物理堆栈（原因过于简单：它不是一个）。堆栈的元素可以直接访问，编译器会生成这样做的代码。谷歌“堆栈指针相对寻址”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:23:07.760

*在 C 等语言中使用的*堆栈不是典型的 LIFO。它被称为堆栈，因为它的使用方式*类似于*LIFO：当调用一个过程时，一个新的帧被压入堆栈。框架通常包含局部变量和簿记信息，例如返回的位置。类似地，当一个过程返回时，它的帧从堆栈中弹出。

这没有什么神奇之处。编译器（不是操作系统）分配一个寄存器用作*[堆栈指针](http://en.wikipedia.org/wiki/Call_stack#The_stack_and_frame_pointers)*——我们称之为`SP`。按照约定，`SP`指向下一个空闲堆栈字的内存位置：

```
+----------------+ (high address)
|   argument 0   |
+----------------+
|   argument 1   |
+----------------+
| return address |
+----------------+
|    local 0     |
+----------------+
|    local 1     |
+----------------+                  +----+    
|    free slot   |  <-------------- | SP |
+----------------+ (low address)    +----+ 
```

要将值压入堆栈，我们执行以下操作（在伪汇编中）：

```
STORE [SP], 42 ; store the value 42 at the address where SP points
SUB SP, 1      ; move down (the stack grows down!) to the next stack location 
```

其中符号`[SP]`被读作“指向的存储单元的内容`SP`”。一些体系结构，尤其是 x86，提供了`push`同时执行存储和减法的指令。要弹出（并丢弃）堆栈上的*n 个*顶部值，我们只需将*n*添加到`SP`*.

现在，假设我们要访问`local 0`上面的字段。如果我们的 CPU 有一个[base+offset](http://en.wikipedia.org/wiki/Addressing_mode#Base_plus_offset.2C_and_variations)寻址模式就很容易了！如上图所示，假设`SP`指向空闲插槽。

```
 LOAD R0, [SP+2] ; load "local 0" into register R0 
```

注意我们*不需要*先从堆栈中弹出`local 0`，因为我们可以使用它与堆栈指针的偏移量来引用任何字段。

根据编译器和机器架构，可能有另一个寄存器指向本地变量和参数（或附近）之间的区域。这个寄存器，通常称为[帧指针](https://stackoverflow.com/questions/579262/what-is-the-purpose-of-the-frame-pointer)，在堆栈指针移动时保持固定。

我想强调一个事实，通常情况下，操作系统根本不参与堆栈操作。内核分配初始堆栈，并可能监视其增长，但将值的推送和弹出留给用户程序。

*为简单起见，我假设机器字长为 1 个字节，这就是我们从 SP 中减去 1 的原因。在 32 位机器上，将一个字压入堆栈意味着减去（至少）四个字节。

# web-applications - 在 2 个 Web 应用程序之间共享数据

> ID：15937279
> 
> 赞同：0
> 
> 时间：2013-04-10T22:02:48.180
> 
> 标签：web-applications, database-design, soa

我正在开发一个新的应用程序（应用程序 2），我已经有一个现有的应用程序（应用程序 1）具有不错的用户群。

应用程序 2 针对相同的用户群，用户可以使用任何一个应用程序或两者都使用，我如何跨应用程序共享用户数据（多实体）？

选项 1 - 共享数据库听起来是个坏主意，因为我最终会在 2 个不同的地方编写验证规则。

选项 2 - 中央服务和数据存储将意味着重新编写大部分运行良好且代码库非常庞大的应用程序 1。

选项 3 - 将 App 1 数据存储区视为中央数据存储区并将其公开为 API。App 2 可以使用它来读取和写入数据。对于这个解决方案，我仍然有几个问题 -

*   应用 2 现在依赖于应用 1，这意味着应用 1 问题会影响应用 2。我可以通过在应用 2 中缓存数据来解决这个问题。这会导致其他问题。
*   App 1 中更改的数据不会立即反映在 App 2 中，这是要求之一。我可以通过 App 1 和 App 2 之间的发布/订阅模型来解决这个问题。
*   应用程序 2 始终使用 API 将数据写入应用程序 1 数据存储区，我可以将数据推送回应用程序 2，但它并不一致，而是最终一致。
*   App 2 将数据写入自己的数据存储区，然后异步推送到 App 1。这会导致数据冲突问题。

我如何在不给我的两个应用程序引入巨大复杂性的情况下处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:24:03.043

这是我的两分钱。

最简单的方法是让您共享同一个数据库，并且由于您提到数据库可以共享，这意味着来自 App1 的域规则仍然适用于 App2，即使存在一些差异，最好编写这些更改而不是写整件事。

现在，您确实有一个大问题 IMO，因为如果我理解得很好，您没有适当的服务层，因为如果您这样做了，您实际上可以对 DAL 进行任何更改而不会影响现有的 1。

在我进一步讨论之前，我实际上需要更多地了解您当前的架构，否则我最终会做出错误的假设。

*   您使用什么样的 Web 应用程序框架，例如：ASP.Net MVC
*   你有服务/API 层吗？域和 DAL 层呢？

**更新**

因此，您现有的应用程序是用 PHP 构建的，如果您从应用程序 1 中提取 REST API 并将其放置在一个全新的 PHP 解决方案（站点）中，该解决方案可以在应用程序 1 和应用程序 2 之间作为服务 API 共享，该怎么办？我相信这对你来说是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:39:57.923

我不能说我掌握了有关您情况的所有详细信息，但我倾向于采用一种解决方案，在这种解决方案中，您将拥有一项处理用户的新服务，并且两个应用程序都会使用它。

也就是说，它不一定是一个大爆炸。您可以首先在 app1 中的用户数据之上添加适当的 API。并让 app2 使用它。然后，您可以在 app1 中添加一个抽象层，该层与新 API 对话，看起来像 App1 内部 API 到 APP1，然后才将数据移动到新数据库，这将是新服务

# cordova - Phonegap - 根据外部链接加载应用程序的特定部分

> ID：15937281
> 
> 赞同：0
> 
> 时间：2013-04-10T22:02:54.230
> 
> 标签：cordova

我已经看到本地应用程序这样做，并想知道是否可以使用 PhoneGap：

应用程序 A 向用户呈现一个操作，并在单击时将应用程序 B 加载到某个部分。

用例：Siri 向餐厅提供地址，点击后可打开指向该地址的地图，以便指示方向。

问题是，使用PhoneGap App A 是否可以打开App B 而不仅仅是打开它，而是将其打开到特定部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:20:11.687

You want to look at URL Schemes. Basically you make sure your application URL and custom Query-strings and when phonegap loads it listens to the incoming url and passes it on to Javascript to be used.

For example I can load up the native twitter app on my iphone by using

```
twitter:///user?screen_name=myusername 
```

So you can register `myFabApp://object1=blah&object2=blah`

Here is more information about using it in Phonegap Javascript [https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Custom%20URL%20Scheme%20Handling.md](https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Custom%20URL%20Scheme%20Handling.md)

Then once you have the values in your app you can do what ever actions you like .

If this helped please up-vote :-)

# asp.net - 为什么 html5 图像占位符充当重置按钮？

> ID：15937284
> 
> 赞同：0
> 
> 时间：2013-04-10T22:03:09.070
> 
> 标签：asp.net, html, google-chrome, forms

在测试各种 HTML5 输入类型（按钮、复选框、颜色、日期、日期时间、本地日期时间、电子邮件、文件、隐藏、图像、月份、数字、密码、收音机、范围、重置、搜索、提交、电话、文本、时间, url, week)，除了三件事之外，一切都和我预期的一样：

1.  如果我单击“图像”占位符（我没有为图像元素分配图像），它将充当重置按钮 - 我在先前元素中输入的所有内容都会丢失
2.  当我使用颜色元素从对话框中选择一种颜色时，颜色不会改变 - 它从黑色开始，然后保持黑色
3.  datetime 元素的作用类似于通用文本元素 - 不提供 datetime 帮助，因为它们位于 data 和 datetimelocal 元素中

我知道 HTML5 直到 2020 年或更晚才真正“到期”，但我想知道这些异常是否被其他人看到（使用 Chrome 测试）

有趣的是，我用于输入电子邮件地址的文本输入元素会提示我的电子邮件地址，就像电子邮件元素一样。电子邮件元素的增值部分是什么——它将验证正确的电子邮件格式？

如果我有一个实际的图像：

```
<input type="image" name="image1" id="Image1" width="210" height="140" src="FallFoliageAndWater.png" /> 
```

...它做同样的事情：单击图像会清除我在其他元素中输入的所有文本...？？？

## 更新

我认为 text 元素之所以像 email 元素是因为它足够聪明，可以看到它自己的名字是 Email：

```
<p>
    <label for="Email"> Email:</label>
    <input type="text" name="email" id="Email"/>
</p> 
```

如果我将名称和 ID 更改为“[g,G]eezlebop”：

```
<p>
    <label for="Geezlebop"> Email:</label>
    <input type="text" name="geezlebop" id="Geezlebop"/>
</p> 
```

...它恢复为只是一个愚蠢的旧文本元素，不知道它应该包含什么。

# c# - 如果我添加第二个文本框，Javascript 将不起作用

> ID：15937285
> 
> 赞同：1
> 
> 时间：2013-04-10T22:03:12.010
> 
> 标签：c#, javascript, asp.net, textbox

请帮助我，如果用户在文本框中按下 ENTER 键，我正在尝试单击隐藏按钮。它适用于一个文本框，但如果我添加另一个，java 脚本不起作用。

~~文本框~~。-------------------------------------------------- --------------------------------------

```
 <pre> 
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
    </head>
    <body>

        <form id="form1" runat="server">
            <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                    <asp:Button ID="Button1" runat="server" Text="Button" 
                onclick="Button1_Click1" style="visibility: hidden; display: none;" />

    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
    <script type="text/javascript">

        var myInput = document.getElementById("TextBox1");
        if (myInput.addEventListener) {
            myInput.addEventListener('keydown', this.keyHandler, false);
        } else if (myInput.attachEvent) {
            myInput.attachEvent('onkeydown', this.keyHandler); /* damn IE hack */
        }

        function keyHandler(e) {
            var EnterKEY = 13;
            if (e.keyCode == EnterKEY) {

                if (e.preventDefault) {

                    document.getElementByID("Button1").click();
                    e.preventDefault();
                }
                return false;
            }
        }
    </script>

        &nbsp;
            <br />
            <asp:Label ID="Label1" runat="server" Visible="False"></asp:Label>
        </form>
    </body>
</pre>
    ------------------------------------------------------------------------------

    CODE BEHIND
            protected void Page_Load(object sender, EventArgs e)
            {

            }

            protected void Button1_Click1(object sender, EventArgs e)
            {
                    TextBox2.Text = "It Works";

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:10:43.643

尝试将您的 javascript 代码包装在 document.onload 函数中

```
window.document.onload = function(e){
var myInput = document.getElementById("TextBox1");
        if (myInput.addEventListener) {
            myInput.addEventListener('keydown', this.keyHandler, false);
        } else if (myInput.attachEvent) {
            myInput.attachEvent('onkeydown', this.keyHandler); /* damn IE hack */
        }

//adding the second textbox
myInput = document.getElementById("TextBox2");
            if (myInput.addEventListener) {
                myInput.addEventListener('keydown', this.keyHandler, false);
            } else if (myInput.attachEvent) {
                myInput.attachEvent('onkeydown', this.keyHandler); /* damn IE hack */
            }

        function keyHandler(e) {
            var EnterKEY = 13;
            if (e.keyCode == EnterKEY) {

                if (e.preventDefault) {

                    document.getElementByID("Button1").click();
                    e.preventDefault();
                }
                return false;
            }
        }
} 
```

因此，一旦 DOM 树完全加载，您的脚本就会执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:25:00.470

查看您的代码，您仅将您的`keyhandler(e)`函数绑定到元素`TextBox1`，但没有绑定到`TextBox2`. 尝试为您的`TextBox2`.

```
var myInput2 = document.getElementById("TextBox2");
if (myInput2.addEventListener) {
    myInput2.addEventListener('keydown', this.keyHandler, false);
} else if (myInput.attachEvent) {
    myInput2.attachEvent('onkeydown', this.keyHandler); /* IE hack */
} 
```

# ruby-on-rails - 将 Facebook 身份验证添加到 Rails 自定义身份验证

> ID：15937286
> 
> 赞同：0
> 
> 时间：2013-04-10T22:03:12.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook, devise, omniauth

我目前正在创建一个需要身份验证的 Rails 应用程序。目前，我正在进行自定义身份验证，如以下 railscast 剧集中所示：

[http://railscasts.com/episodes/250-authentication-from-scratch-revised](http://railscasts.com/episodes/250-authentication-from-scratch-revised)

但是，我想添加通过 facebook 登录的选项。经过一番研究，我发现添加 Facebook 登录的最简单方法是使用 Devise/Omniauth 进行身份验证。尝试将我的身份验证系统切换到 Devise/Omniauth 是否值得，或者是否有更简单的方法来添加 Facebook 身份验证？我也看过 Facebooker 插件，但它似乎已经过时了。有什么建议么？我对 Rails 比较陌生，所以我很感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:16:50.200

使用 Devise/Omniauth 的 Facebook 身份验证是成熟的、广泛使用的并且有据可查。这样做是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:17:48.687

我已经将 Authlogic 和 Devise 与 Omniauth (+ facebook/google/twitter/etc) 结合使用。我发现 Devise 具有所有内置功能，对我来说是更好的解决方案。让它与 Omniauth 一起工作是一件轻而易举的事。这里有一个很棒的 Railscast：[http ://railscasts.com/episodes/235-devise-and-omniauth-revised](http://railscasts.com/episodes/235-devise-and-omniauth-revised)

我肯定会推荐走那条路。每个部分都经常更新，并且有很好的文档，所以对于仍在学习 Rails 的人来说应该很容易使用。

# ruby - 发送 _destroy 参数不删除关联

> ID：15937289
> 
> 赞同：0
> 
> 时间：2013-04-10T22:03:21.857
> 
> 标签：ruby, ruby-on-rails-3, activerecord, destroy

我有一张包含许多发票行的发票。在编辑时，当单击发票行的删除按钮时，我使用 javascript 将隐藏的 _destroy 字段设置为值 1。提交后，它应该删除项目。它正在工作，但今天它随机停止了。

以下是传入的参数：

```
Parameters: {
"recycler_invoice"=>{
  "number"=>"IT10059",
  "customer_id"=>"1",
  "date_entered"=>"10/04/2013",
  "gold_spot_price_paid"=>"1248.12",
  "silver_spot_price_paid"=>"22.46",
  "platinum_spot_price_paid"=>"1206.13",
  "refine_fee_percentage"=>"5.0", 
  "consulting_fee_percentage"=>"3.0",
  "verify_fee_percentage"=>"2.0",               
  "recycler_invoice_lines_attributes"=>{
   "0"=>{"denomination_id"=>"11", "quantity"=>"315.767", "_destroy"=>"false", "id"=>"1023"},
   "1"=>{"denomination_id"=>"7", "quantity"=>"78.466", "_destroy"=>"false", "id"=>"1024"}, 
   "2"=>{"denomination_id"=>"1", "quantity"=>"1.174", "_destroy"=>"false", "id"=>"1025"}, 
   "3"=>{"denomination_id"=>"2", "quantity"=>"7.46", "_destroy"=>"false", "id"=>"1026"}, 
   "4"=>{"denomination_id"=>"9", "quantity"=>"28.909", "_destroy"=>"false", "id"=>"1027"}, 
   "5"=>{"denomination_id"=>"10", "quantity"=>"9.629", "_destroy"=>"false", "id"=>"1028"}, 
   "6"=>{"denomination_id"=>"13", "quantity"=>"19.77", "_destroy"=>"false", "id"=>"1029"}, 
   "7"=>{"denomination_id"=>"14", "quantity"=>"5.83", "_destroy"=>"false", "id"=>"1030"}, 
   "8"=>{"denomination_id"=>"22", "quantity"=>"240.37", "_destroy"=>"1", "id"=>"1031"}}},
"commit"=>"Submit",
"id"=>"9"} 
```

如您所见，我要删除的一行的 _destroy 为 1。

这是我的更新代码......非常简单：

```
def update
    @recycler_invoice = RecyclerInvoice.find(params[:id])

    respond_to do |format|
      if @recycler_invoice.update_attributes(params[:recycler_invoice])
        format.html { redirect_to @recycler_invoice, notice: 'Recycler invoice was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @recycler_invoice.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:18:12.557

我猜在你的 RecyclerInvoice 中你已经添加了 accept_nested_attributes_for :recycler_invoice_lines，如果是这样，那么你可能忘记添加选项 allow_destroy: true 了。

# forms - AngularJS - 如何以嵌套形式触发提交

> ID：15937294
> 
> 赞同：19
> 
> 时间：2013-04-10T22:03:35.467
> 
> 标签：forms, angularjs

我正在构建一个在提交时生成邀请的表单。邀请有几个字段，其中一个是带有“添加”按钮的电子邮件地址输入，单击该按钮应将该地址添加到应接收邀请的电子邮件地址列表中。

`submit`这可以通过单个表单来完成，但是如果用户在输入电子邮件时按下回车键，那么它会在整个表单上触发。我希望输入键结果 - 当电子邮件输入字段聚焦时 - 与单击“添加”按钮具有相同的效果。我希望解决这个问题的正确方法是在邀请表单中嵌套一个电子邮件输入表单，如下所示：

```
 <ng-form ng-submit="sendInvite()">
        <input type="text" placeholder="Title" ng-model="invitation.title"/>

        <ng-form ng-submit="addInvitee()">
            <input type="email" placeholder="Title" ng-model="inviteeEmail"/>
            <button class="btn" type="submit">add</button>
        </ng-form>

        <button class="btn" type="submit">Send</button>
    </ng-form> 
```

在控制器中使用以下 javascript：

```
 $scope.addInvitee = function() {
        $scope.invitation.emails.push($scope.inviteeEmail);
        $scope.inviteeEmail = '';
    }

    $scope.sendInvite = function() {
        //code to send out the invitation
    } 
```

我的问题是嵌套表单（并且这样做从转换`<form>`为`<ng-form>`，提交任何一个都不再有效。

[戳这里](http://plnkr.co/edit/q1hfoVajxe0Zr0ChaYOk?p=preview)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-13T08:51:17.717

我有类似的要求 - 向导驱动的多步骤表单。当用户单击“下一步”按钮时，我必须验证当前的步骤表单。

我们可以通过在绑定到表单上触发 ' `$validate`' 事件来触发验证。`scope`

```
isFormValid = function($scope, ngForm) {
    $scope.$broadcast('$validate');
    if(! ngForm.$invalid) {
      return true;
    }
} 
```

当我想检查表单值是否正确时，我会调用`isFormValid`范围和表单实例。

工作代码：[Plunker 链接](http://plnkr.co/edit/oC9TcJySBpbjQQsplJ3c?p=preview "通过手动触发 $validate 来验证表单的代码")

`isFormValid` *在（包含在上面的 Plunker 中）包含*一些额外的逻辑也很有用，这使得表单和表单字段`$dirty`就像我们将根据它们的`$dirty`状态显示/隐藏验证消息一样。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T18:36:01.500

> 您可以使用以下两种方式之一来指定提交表单时应调用的 javascript 方法：
> * 表单元素上的
> ngSubmit 指令 * 第一个按钮或类型为 submit (input[type=submit] 的输入字段上的 ngClick 指令)
> --[表单文档](http://docs.angularjs.org/api/ng.directive:form)

```
<ng-form>
   <input type="text" placeholder="Title" ng-model="invitation.title"><br>
   <ng-form>
     <input type="email" placeholder="Title" ng-model="inviteeEmail">
     <button class="btn" ng-click="addInvitee()">add</button><br>
   </ng-form>
   <ul class="unstyled">
     <li ng-repeat="invitee in invitation.invitees">
        <span>{{invitee.email}}</span>
     </li>
   </ul>
   <button class="btn" ng-click="sendInvite()">Send</button>
</ng-form> 
```

[普朗克](http://plnkr.co/edit/SUNNQRevaKYPM4s8LGVe?p=preview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T15:48:07.040

提交表单后，您可以使用以下内容找到所有嵌套表单

```
forms = []
forms.push(form)
nestedForms = _.filter(_.values(form), (input) -> (input instanceof form.constructor) and (input not in forms)) 
```

这里，*form*是提交的外部表单控制器。您可以在您的 onsubmit 上挂钩此代码，并找到所有嵌套表单并执行您必须执行的任何操作。

注意：这是咖啡脚本

# java - Spring 3.0 SimpleUrlhand 错误

> ID：15937297
> 
> 赞同：1
> 
> 时间：2013-04-10T22:03:43.043
> 
> 标签：java, spring, spring-mvc, websphere, rad

一旦我安装了应用程序并尝试启动它没有启动的服务器，我就尝试部署我的 ear 文件，我收到以下错误： **错误**：

> SimpleUrlHand I org.springframework.web.servlet.handler.AbstractUrlHandlerMapping
> registerHandler 映射 URL 路径 [/resources/**] 到处理程序 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'

Web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.5"
 xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee          
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<display-name>excs</display-name>
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<servlet>
    <servlet-name>springmvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
      <servlet-name>springmvc</servlet-name>
      <url-pattern>/</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-security.xml
        /WEB-INF/springmvc-servlet.xml 
    </param-value>
</context-param>

  <!-- Spring Security -->
<filter>
<filter-name>springSecurityFilterChain</filter-name>
<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>   <!-- all actions will intercepted -->
</filter-mapping>

<welcome-file-list>
    <welcome-file>/WEB-INF/index.jsp</welcome-file>
</welcome-file-list>
    </web-app> 
```

Springmvc-servlet.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:jee="http://www.springframework.org/schema/jee"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation=
     "http://www.springframework.org/schema/mvc
      http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/tx
      http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<!-- all static thing should be listed under the resources folder. for example, 
 img, css, ... -->
<mvc:resources mapping="/resources/**" location="/resources/" />   <!-- sets up a 
  handler for serving static content -->

<!-- Configures the annotation-driven Spring MVC Controller programming model.
     Note that, with Spring 3.0, this tag works in Servlet MVC only!  -->
<mvc:annotation-driven/> <!-- turn on all of the annotation-driven features you’ll 
  need from Spring MVC -->

<!-- Activates various annotations to be detected in bean classes -->
<!-- tells Spring that you intend to use annotation-based wiring in Spring.    
                              Spring 3 supports a few different annotations for 
  autowiring:
                              Spring’s own @Autowired 
 annotation
                              @Inject annotation from 
 JSR-330
                              @Resource annotation from 
 JSR-250
                               -->
<context:annotation-config /> 

<!-- Scans the classpath for annotated components that will be auto-registered as 
 Spring beans.
 For example @Component,@Controller, @Repository, and @Service. Make sure to set the 
 correct base-package-->
<context:component-scan base-package="psup.excs" />    

<!-- To use Tiles views in Spring MVC, add the following two -->
<!-- TilesConfigurer loads one or more Tiles definition files and make them available    
 for
     TilesViewResolver to resolve views from. -->    
<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" 
id="tilesViewResolver">
    <property name="order" value="1"/>
    <property name="viewClass" 
  value="org.springframework.web.servlet.view.tiles2.TilesView"/>
</bean>
<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" 
  id="tilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles-config.xml</value>
        </list>
    </property>
</bean>

<!-- if not using tiles, uncomment out the folowing and comment out the above 
    tilesViewResolver and tileConfiguerer,
     then controlller will forward to jsp instead of tiles. 
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/"></property>
    <property name="suffix" value=".jsp" />
</bean>
!-->  

<!-- MyBatis Configuration -->   

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/excs" />     
    <property name="resourceRef" value="false" />
</bean>

<tx:annotation-driven transaction-manager="txManager" /> 
<bean id="txManager"  

  class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" /> 
</bean>

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean" 
scope="singleton">
    <property name="dataSource" ref="dataSource"/>
    <property name="typeAliasesPackage" value="excs.data.bean" />
</bean>

<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="excs.data.mapper" /> 
</bean>

    </beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:08:30.567

我解决了！基本上，我们的 WAS 技术团队在应用服务器上安装了 Hibernate，而这个应用程序使用 myBatis，因此存在冲突。一旦我们卸载了 Hibernate，它就可以正常工作并且服务器确实启动了。

# c# - 以编程方式反转 .mp3

> ID：15937298
> 
> 赞同：1
> 
> 时间：2013-04-10T22:03:44.907
> 
> 标签：c#, asp.net, .net, web, mp3

我想创建一个简单的 Web 服务供我公司使用，它允许某人上传 .mp3 文件，生成反向的 .mp3 供他们下载？

如何使用 C# 编写方法来完成此任务？是否有任何可用的 API 来执行此操作？

非常感谢。

# java - 单击 JTable 中的行时的 ActionListener。如何？

> ID：15937299
> 
> 赞同：0
> 
> 时间：2013-04-10T22:03:55.310
> 
> 标签：java, swing, linked-list, jtable, actionlistener

我目前正在为我的学校项目创建 GUI。这是一个剧院管理程序，可让您添加组。然后，您可以向这些组添加学生和排练日期。所有这些都存储在单独的 LinkedList 中。现在，我的程序中有一个选项卡，其中包含一个包含所有组的 JTable。我想要的是以下内容：当用户单击 JTable 中的一条记录时，会弹出一个新的 JDialog，其中显示两个 JTable，一个显示该组中的所有学生，一个显示分配给的所有排练那个组。如何才能做到这一点？

我不是要求完整的代码（虽然会很好），只是想知道如何使记录可点击，以便我可以在单击其中一条记录的事件中添加一个 ActionListener。

我希望这是有道理的 ：/

如果您需要我的程序中的任何代码，请告诉我。我只是不知道你可能需要什么。

# ruby-on-rails - 番茄酱 (gottaketchup.com) 如何发送 Facebook 消息？

> ID：15937305
> 
> 赞同：0
> 
> 时间：2013-04-10T22:04:18.663
> 
> 标签：ruby-on-rails, facebook, api, omniauth

我整天都在搜索，我能找到的一切都表明不可能通过 Graph API 向用户的 Facebook 朋友发送消息。我知道我可以将链接作为 facebook 消息发送，但这需要链接 url，并且不允许预先填充消息本身。但是，应用程序番茄酱可让您向朋友发送实际的 FB 消息，邀请他们与您一起做活动。这不是应用程序请求，并且具有不需要填写的自定义消息。他们是在使用发送对话框并以某种方式跳过弹出窗口，还是实际上有另一种方式向用户的朋友发送消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:40:31.860

他们最有可能使用聊天 API *，但*他们真的不应该，这可能会在他们的脸上爆炸。这不是一个聪明的规避，冒着你的应用被禁止的风险。

> 您的 Facebook 聊天集成应仅用于促进用户之间的实时对话或交互的应用程序。链接或广告不应通过聊天发送，除非发送用户在此消息中键入

![聊天权限](https://i.stack.imgur.com/Kfodf.png)

在任何情况下使用 require 'xmpp4r_facebook'

```
id = '-<sender user id>@chat.facebook.com'
to = '-<user id>@chat.facebook.com'
body = "hello, Im not spam!"
subject = 'message from ruby'
message = Jabber::Message.new to, body
message.subject = subject

client = Jabber::Client.new Jabber::JID.new(id)
client.connect
client.auth_sasl(Jabber::SASL::XFacebookPlatform.new(client, '<App ID/API Key>', '<Access Token>', '<App Secret>'), nil)
client.send message
client.close 
```

经`xmpp_login`许可

**这只是概念证明，将其合并到您的应用程序中以非实时格式向用户发送消息可能会对您的应用程序产生影响**

# opencart - OpenCart 错误显示免费送货低于符合免费送货条件的价格

> ID：15937306
> 
> 赞同：0
> 
> 时间：2013-04-10T22:04:23.873
> 
> 标签：opencart

我将 OpenCart 1.5.5.1 设置为对 50.00 美元以上的订单使用免费送货，但是当我有 49.99 美元或更低时，免费送货*仍然是一个错误的选项*。

我如何隐藏符合条件价格以下的价格的免费送货？

是的，我已经更改了顺序。

是的，平邮和免费送货都已启用。

是的，我检查了*catalog\model\shipping\free.php*文件以确保代码是正确的 AFAICT...

```
<?php
class ModelShippingFree extends Model {
    function getQuote($address) {
        $this->language->load('shipping/free');

        $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "zone_to_geo_zone WHERE geo_zone_id = '" . (int)$this->config->get('free_geo_zone_id') . "' AND country_id = '" . (int)$address['country_id'] . "' AND (zone_id = '" . (int)$address['zone_id'] . "' OR zone_id = '0')");

        if (!$this->config->get('free_geo_zone_id')) {
            $status = true;
        } elseif ($query->num_rows) {
            $status = true;
        } else {
            $status = false;
        }

        if ($this->cart->getSubTotal() < $this->config->get('free_total')) {
            $status = false;
        }

        $method_data = array();

        if ($status===true) {
            $quote_data = array();

            $quote_data['free'] = array(
                'code'         => 'free.free',
                'title'        => $this->language->get('text_description'),
                'cost'         => 0.00,
                'tax_class_id' => 0,
                'text'         => $this->currency->format(0.00)
            );

            $method_data = array(
                'code'       => 'free',
                'title'      => $this->language->get('text_title'),
                'quote'      => $quote_data,
                'sort_order' => $this->config->get('free_sort_order'),
                'error'      => false
            );
        }

        return $method_data;
    }
}
?> 
```

除了向 OpenCart 提交错误投诉外，我还能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:35:04.237

OpenCart 不验证字段是否为整数，因此从免费送货值中删除 $ 符号解决了该问题。

# ms-access - Access VBA 中 Excel 的 COUNTA 等效项，用于从电子表格返回非空行数

> ID：15937308
> 
> 赞同：0
> 
> 时间：2013-04-10T22:04:26.013
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我想在 Access 中运行一些 VBA 来计算包含 Excel 文档中指定单元格范围内的数据的行数。

在 Excel`COUNTA`中可以很好地做到这一点，但我如何从 Access VBA 中获得相同的结果？它只需要查看 1 列数据。

要参考的示例位置：

**完整路径**：

*   C:\Users\Matt\Desktop\ExcelFile.xls

**Excel 中的表格，其中包含我需要计算的行数**：

*   电子表格

**起始单元格引用**

即顶部和最左侧的单元格；因此，如果我`COUNTA`在 Excel 中使用，我会查看以下范围`COUNTA(A14:A5000)`：

*   A14

**编辑：**我尝试过的代码，但出现错误：

```
Option Compare Database

Sub ImportDataFromRange()

Dim xlFilePath As String
Dim rowVariable As String

xlFilePath = "C:\Users\Matt\Desktop\MattExcelFile.xls"

rowVariable = Excel.Application.WorksheetFunction.CountA(Workbooks(xlFilePath).Sheets("ExcelSheet").Range("A14:A5000"))

Debug.Print rowVariable

End Sub

Private Sub Command0_Click()

ImportDataFromRange

End Sub 
```

运行此代码时收到的错误消息，突出显示该`rowVariable = ...`行：

> 运行时错误“9”：
> 
> 下标超出范围

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:44:49.747

您可以在 VBA 中使用工作表函数；看[这里](http://msdn.microsoft.com/en-us/library/office/hh211481%28v=office.14%29.aspx)。只需添加对 Excel 对象模型的引用。

# c++ - 错误[P e513]：“void *”类型的值不能分配给“uint8_t *”类型的实体

> ID：15937309
> 
> 赞同：8
> 
> 时间：2013-04-10T22:04:29.233
> 
> 标签：c++, c, embedded, iar

我正在尝试将 C 项目转换为 C++。

在 C 项目中，我在编译成 c++ 时解决了这个错误：

> 错误[P​​e513]：“void *”类型的值不能分配给“uint8_t *”类型的实体

下面的代码给出了这个错误：

```
#define RAM32Boundary  0x20007D00
uint8_t *pNextRam;
pNextRam = (void*)RAM32Boundary;// load up the base ram 
```

谁能解释这在 C 中做了什么以及如何将其转换为 C++？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T22:05:56.127

C 允许隐式转换到/从`void*`，而 C++ 不允许。您需要转换为*正确*的类型。

采用：

```
uint8_t *pNextRam;
pNextRam = (uint8_t*)RAM32Boundary;// load up the base ram 
```

或者**更好***，使用 C++ 风格转换而不是 C 风格。：

```
uint8_t *pNextRam;
pNextRam = static_cast<uint8_t*>(RAM32Boundary);// load up the base ram 
```

*在实践中，强制转换是错误的一个简单来源。C++ 风格的强制转换使代码的读者可以轻松地看到强制转换，*并*允许编译器强制强制转换的正确性。

# windows-phone-8 - Windows Phone 8 静态资源样式

> ID：15937312
> 
> 赞同：3
> 
> 时间：2013-04-10T22:04:41.300
> 
> 标签：windows-phone-8

我试图找到在任何新的 WP8 应用程序中声明静态资源样式的位置。

```
<TextBlock Text="Delaware" Margin="1,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/> 
```

例如，我无法在项目中的任何位置找到资源“PhoneTextTitle1Style”。我也尝试过搜索 WP8 sdk 的 Design 文件夹，但无济于事。很高兴发现 MS 在某处清楚地记录了此信息。也许是这样，我忽略了，但我的搜索都没有发现任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T22:54:59.210

所有手机主题资源位于： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff769552 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769552(v=vs.105).aspx)

这些是可用于所有 Windows Phone 应用程序的预定义样式。您不需要包含任何特定的 ResourceDictionary，也不需要自己定义它们。

# c# - 在 .NET Web 应用程序中实现 XML 请求

> ID：15937318
> 
> 赞同：1
> 
> 时间：2013-04-10T22:05:01.097
> 
> 标签：c#, .net, xml, service, web

我一直在阅读和阅读，但我越走越困惑。我正在用 C# 构建一个 ASP.NET 4.0 Web 应用程序。我正在尝试实施信用卡处理。我使用的公司提供了一个示例 XML SOAP 请求和响应，但我不知道该怎么做。我是一名新手开发人员，对这一切都很陌生。我只是不知道从哪里开始。非常感谢任何帮助，我也必须通过 SSL 发送，但这可能是另一个问题。

这是 SOAP 请求

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <v1:SendTranRequest xmlns:v1="http://postilion/realtime/merchantframework/xsd/v1/">
      <v1:merc>
        <v1:id>9000</v1:id>
        <v1:regKey>RegistrationKey</v1:regKey>
        <v1:inType>1</v1:inType>
        <v1:prodType>5</v1:prodType>
      </v1:merc>
      <v1:tranCode>1</v1:tranCode>
      <v1:card>
        <v1:pan>411111******1111</v1:pan>
        <v1:xprDt>1312</v1:xprDt>
      </v1:card>
      <v1:contact>
        <v1:id>1234567</v1:id>
        <v1:fullName>John Doe</v1:fullName>
        <v1:coName>Ajax Intl.</v1:coName>
        <v1:title>CEO</v1:title>
        <v1:phone>
          <v1:type>3</v1:type>
          <v1:nr>5555555555</v1:nr>
        </v1:phone>
        <v1:addrLn1>123 1st St.</v1:addrLn1>
        <v1:city>Somewhere</v1:city>
        <v1:state>CO</v1:state>
        <v1:zipCode>80021</v1:zipCode>
        <v1:ctry>US</v1:ctry>
        <v1:email>email@email.com</v1:email>
        <v1:ship>
          <v1:fullName>John Doe</v1:fullName>
          <v1:addrLn1>123 1st St.</v1:addrLn1>
          <v1:city>Somewhere</v1:city>
          <v1:state>CO</v1:state>
          <v1:zipCode>80021</v1:zipCode>
          <v1:phone>5555555555</v1:phone>
          <v1:email>email@email.com</v1:email>
        </v1:ship>
      </v1:contact>
      <v1:reqAmt>099</v1:reqAmt>
      <v1:usrDef>
        <v1:name>firstname</v1:name>
        <v1:val>John</v1:val>
      </v1:usrDef>
      <v1:indCode>1</v1:indCode>
      <v1:tranFlags>
        <v1:dupChkTmPrd>6000</v1:dupChkTmPrd>
        <v1:convFeeAcptd>N</v1:convFeeAcptd>
      </v1:tranFlags>
      <v1:tax>
        <v1:idcr>0</v1:idcr>
      </v1:tax>
    </v1:SendTranRequest>
  </soapenv:Body>
</soapenv:Envelope> 
```

这是我的创建请求和读取响应

```
 WebRequest webRequest = WebRequest.Create("url");
 HttpWebRequest httpRequest = (HttpWebRequest)webRequest;
 httpRequest.Method = "POST";
 httpRequest.ContentType = "text/xml; charset=utf-8";
 httpRequest.Headers.Add("SOAPAction: http://tempuri.org/");
 httpRequest.ProtocolVersion = HttpVersion.Version11;
 httpRequest.Credentials = CredentialCache.DefaultCredentials;

 //build xml

 var xmlWriterSettings = new XmlWriterSettings
    {
        NewLineHandling = NewLineHandling.None,
        Encoding = Encoding.ASCII
    };

    using (var requestStream = httpRequest.GetRequestStream())
    using (var writer = XmlWriter.Create(requestStream, xmlWriterSettings))
    {
        xml.WriteTo(writer);
    }
    //Get the Response    
    HttpWebResponse wr = (HttpWebResponse)httpRequest.GetResponse();
    StreamReader srd = new StreamReader(wr.GetResponseStream());
    string resulXmlFromWebService = srd.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T22:28:03.897

我建议看一下[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest(v=vs.110).aspx)和[`HttpWebResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)类。该类`HttpWebRequest`将允许您设置请求的主体、标头、凭据和其他内容。并且`HttpWebResponse`应该允许您阅读所需的任何信息。

希望这对一些人有所帮助，但是您的问题不清楚您需要做什么。但是以下代码将从您已将请求 XML 发布到的提供的端点下载 XML 文档。

```
var requestXml = new XmlDocument();

// build XML request 

var httpRequest = HttpWebRequest.Create("https://www.website.com/");
httpRequest.Method = "POST";
httpRequest.ContentType = "text/xml";

// set appropriate headers

using (var requestStream = httpRequest.GetRequestStream())
{
    requestXml.Save(requestStream);
}

using (var response = (HttpWebResponse)httpRequest.GetResponse())
using (var responseStream = response.GetResponseStream())
{
    // may want to check response.StatusCode to
    // see if the request was successful

    var responseXml = new XmlDocument();
    responseXml.Load(responseStream);
} 
```

至于处理通过 SSL/TLS 做的事情，你很幸运，.NET 会为你处理好，你只需要在你`https`提供`http`的 URL 中指定`HttpWebRequest.Create`。

* * *

构造 XML 的方法有很多种，其中一种方法是使用命名空间中的[`XElement`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)、[`XAttribute`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xattribute.aspx)和[`XNamespace`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.aspx)对象[`System.Xml.Linq`](http://msdn.microsoft.com/en-us/library/system.xml.linq.aspx)。除非您至少不能使用 .NET 3.5，否则我建议您使用。由于您是在 APS.NET 4.0 中创建应用程序，因此这应该不是问题。

当你创建一个`XElement`并且你需要指定一个命名空间时，你需要首先创建一个`XNamespace`对象。

```
var ns = XNamespace.Get("http://tempuri.com");
var root = new XElement(ns + "Root", "Body"); 
```

这将产生以下 XML：

```
<Root xmlns="http://tempuri.com">Body</Root> 
```

但是，您需要能够指定命名空间前缀。为了做到这一点，您需要添加一个`XAttribute`对象到`XElement`您首先使用前缀并通过构造函数指定前缀。

```
var ns = XNamespace.Get("http://tempuri.com");
var root = new XElement(ns + "Root",
    new XAttribute(XNamespace.Xmlns + "prefix", ns)
    "Body"
); 
```

这将产生以下 XML：

```
<prefix:Root xmlns:prefix="http://tempuri.com">Body</prefix:Root> 
```

这是使用这些对象构造的 XML 的一部分。

```
var id = 9000;
var regKey = "RegistrationKey";
var inType = 1;
var prodType = 5;
var tranCode = 1;

var soapNs = XNamespace.Get("http://schemas.xmlsoap.org/soap/envelope/");
var v1Ns = XNamespace.Get("http://postilion/realtime/merchantframework/xsd/v1/");

var xml= new XElement(soapNs + "Envelope",
    new XAttribute(XNamespace.Xmlns + "soapenv", soapNs),
    new XElement(soapNs + "Body",
        new XElement(v1Ns + "SendTranRequest",
            new XAttribute(XNamespace.Xmlns + "v1", v1Ns),
            new XElement(v1Ns + "merc",
                new XElement(v1Ns + "id", id),
                new XElement(v1Ns + "regKey", regKey),
                new XElement(v1Ns + "inType", inType),
                new XElement(v1Ns + "prodType", prodType)
            ),
            new XElement(v1Ns + "tranCode", tranCode)
        )
    )
); 
```

这会产生以下 XML：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <v1:SendTranRequest xmlns:v1="http://postilion/realtime/merchantframework/xsd/v1/">
            <v1:merc>
                <v1:id>9000</v1:id>
                <v1:regKey>RegistrationKey</v1:regKey>
                <v1:inType>1</v1:inType>
                <v1:prodType>5</v1:prodType>
            </v1:merc>
            <v1:tranCode>1</v1:tranCode>
        </v1:SendTranRequest>
    </soapenv:Body>
</soapenv:Envelope> 
```

要将 XML 包含到您的`HttpWebRequest`执行主体中：

```
var xmlWriterSettings = new XmlWriterSettings
{
    NewLineHandling = NewLineHandling.None
};

using (var requestStream = httpRequest.GetRequestStream())
using (var writer = XmlWriter.Create(requestStream, xmlWriterSettings))
{
    xml.WriteTo(writer);
} 
```

这里要注意的一件事是使用 的创建[`XmlWriter`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)，[`XmlWriterSettings`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.aspx)这允许您在 XML 元素之间不包含任何空格。如果您需要空格，您可以`XmlWriter`通过调用来创建`XmlWriter.Create(stream)`

* * *

如果您不能使用 .NET 3.5 或更高版本，您可以使用命名空间中的[`XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)和[`XmlElement`](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.aspx)对象[`System.Xml`](http://msdn.microsoft.com/en-us/library/system.xml(v=vs.110).aspx)。

出于您的目的，使用 构建所需的 XML 将很容易，`XmlDocument`但`XmlElement`代码量会更多。要创建一个，`XmlElement`您将需要一个`XmlDocument`来创建对象。该[`XmlDocument.CreateElement`](http://msdn.microsoft.com/en-us/library/c22k3d47.aspx)函数有一个重载，允许您同时指定命名空间前缀和命名空间，这样会更直接一些。

使用`XmlDocument`and需要注意的一件事`XmlElement`是，您需要`XmlElement`在构建合适的对象后手动将其附加到它。另一件事是您也不能`XmlElement`在构造期间指定主体，因此也需要在创建后完成。

以这种方式构建 XML 的操作顺序无关紧要。它主要是确保您将 附加`XmlElement`到正确的父级，并`InnerText`在正确的`XmlElement`对象上设置。

```
var soapPrefix = "soapenv";
var soapNs = "http://schemas.xmlsoap.org/soap/envelope/";

var v1Prefix = "v1";
var v1Ns = "http://postilion/realtime/merchantframework/xsd/v1/";

var xmlDoc = new XmlDocument();

var envelope = xmlDoc.CreateElement(soapPrefix, "Envelope", soapNs);
xmlDoc.AppendChild(envelope);

var body = xmlDoc.CreateElement(soapPrefix, "Body", soapNs);
envelope.AppendChild(body);

var sendTranRequest = xmlDoc.CreateElement(v1Prefix, "SendTranRequest", v1Ns);
body.AppendChild(sendTranRequest);

var merc = xmlDoc.CreateElement(v1Prefix, "merc", v1Ns);
sendTranRequest.AppendChild(merc);

var idElement = xmlDoc.CreateElement(v1Prefix, "id", v1Ns);
idElement.InnerText = id.ToString();
merc.AppendChild(idElement);

var regKeyElement = xmlDoc.CreateElement(v1Prefix, "regKey", v1Ns);
regKeyElement.InnerText = regKey;
merc.AppendChild(regKeyElement);

var inTypeElement = xmlDoc.CreateElement(v1Prefix, "inType", v1Ns);
inTypeElement.InnerText = inType.ToString();
merc.AppendChild(inTypeElement);

var prodTypeElement = xmlDoc.CreateElement(v1Prefix, "prodType", v1Ns);
prodTypeElement.InnerText = prodType.ToString();
merc.AppendChild(prodTypeElement);

var tranCodeElement = xmlDoc.CreateElement(v1Prefix, "tranCode", v1Ns);
tranCodeElement.InnerText = tranCode.ToString();
sendTranRequest.AppendChild(tranCodeElement); 
```

这会产生与上面相同的 XML。

当使用 an`XmlDocument`来构造您的 XML 请求时，有两个[`XmlDocument.Save`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.save.aspx)函数可以用于您的目的。一个接受 a`Stream`另一个接受 a `XmlWriter`。如果您可以省略空格，请使用接受 a`XmlWriter`并将其添加到的重载`HttpWebRequest`将是：

```
using (var requestStream = httpRequest.GetRequestStream())
using (var writer = XmlWriter.Create(requestStream, xmlWriterSettings))
{
    xmlDoc.Save(writer);
} 
```

如果您需要包含空格，请使用：

```
using (var requestStream = httpRequest.GetRequestStream())
{
    xmlDoc.Save(requestStream);
} 
```

# css - 页脚未清除

> ID：15937320
> 
> 赞同：-3
> 
> 时间：2013-04-10T22:05:06.597
> 
> 标签：css

请有人帮忙，为什么我的页脚没有正确出现在底部。我申请清楚：两者；还注意到。

[http://www.vellosdesigns.com/newsite/build-2/](http://www.vellosdesigns.com/newsite/build-2/)

请问你能帮忙吗？

感谢您，所有问题现在都已解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:08:59.663

如果你想使用 clear:both; 页脚需要有一个浮动元素的父级。这不是你的情况。

最好的方法是使用 clearfix

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

将代码复制粘贴到您的 CSS 中。然后只需将类 cf 添加到您的 div

它看起来像

```
<div class="cf">
     <div id="smallpics" class="...">...</div>
     <div id="smallpics" class="...">...</div>
     <div id="smallpics" class="...">...</div>
</div> 
```

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T16:17:53.043

在帮助下，我用页脚做了这个

```
<!DOCTYPE html>
<html>
<head>
<base href="http://www.vellosdesigns.com/newsite/build-2/" />
<style>
    html, body {height: 100%;margin: 0;background:#000;}
    h1{color:#787979;}
    #wrapper {min-height:100%;margin: 0 auto -75px;}
    #header {min-width:100%;height:150px;float:left}
    #headerContent {width:1112px;margin:0 auto;}
    #separator, #footer {height:180px;}
    #content {margin:0 auto;width:1112px;padding:15px;}
    #footer {min-width:100%;float:left;color:#fff;background-color:#7f7f7f}
    #footerContent {margin: 0 auto;width:1112px;padding:10px 0px;}
    .address {color:#787979; text-align:right; font-size:12px; float:right; line-height:190%;}
    #gallery {background:#FFF; height:450px;}
    #navcontainer {float:right; margin-top:15px;}
    #navlist li { display: inline; list-style-type: none;  }
    #navlist li a:link {text-decoration:none; color:#787979; font-size:12px;  margin-left:25px;}
    .smallpics {width:545px; height:180px; float:left; margin-top:40px;}
    .s-pic-b,.s-pic-d {margin-left:20px;}
    .s-pic-c,.s-pic-d {padding-top:50px;}
    div.fadehover {position: relative;  }
    img.a {position: absolute;  left: 0;top: 0; z-index: 10; }
    img.b {position: absolute;  left: 0;top: 0; }
</style>
<script type='text/javascript' src='jquery-1.9.1.js'></script>
<script type='text/javascript'>
    $(document).ready(function(){
        $("img.a").hover(
            function() {
                $(this).stop().animate({"opacity": "0"}, "slow");
            },
        function() {
            $(this).stop().animate({"opacity": "1"}, "slow");
        });
    });
</script>
</head>
<body>
  <div id="wrapper">
     <div id="header">
         <div id="headerContent">
            <p><span class="address">Whetstone - 020-8888-8888 <br />Kensington - 020-8888-8888</span></p>
            <img src="logo.png" />
            <div id="navcontainer">
                <ul id="navlist">
                <li><a href="#">Bespoke</a></li>
                <li><a href="#">Contemporary</a></li>
                <li><a href="#">Achitecture &amp; Interiors</a></li>
                <li><a href="#">Management &amp; Build</a></li>
                <li><a href="#">Contact Us</a></li>
                </ul>
            </div>  
         </div>
     </div>
     <div style="clear:both;"></div>
     <div id="content">
            <div id="gallery"></div>
            <div class="smallpics s-pic-a">
                <h1>Bespoke</h1>
                <div class="fadehover">
                    <a href=""><img src="a-bw.png" alt="" class="a" /><img src="a-color.png" alt="" class="b" /></a>
                </div>
            </div>
            <div class="smallpics s-pic-b">
                <h1>Contemporary</h1>
                <div class="fadehover">
                    <a href=""><img src="b-bw.png" alt="" class="a" /><img src="b-color.png" alt="" class="b" /></a>
                </div>
            </div>
            <div class="smallpics s-pic-c">
                <h1>Achitecture &amp; Interiors</h1>
                <div class="fadehover">
                    <a href=""><img src="c-bw.png" alt="" class="a" /><img src="c-color.png" alt="" class="b" /></a>
                </div>
            </div>
            <div class="smallpics s-pic-d">
                <h1>Management &amp; Build </h1>
                <div class="fadehover">
                    <a href=""><img src="d-bw.png" alt="" class="a" /><img src="d-color.png" alt="" class="b" /></a>
                </div>
            </div>
            <div style="clear:both;"></div>   
     </div>
     <div id="separator"></div>
  </div>
  <div id="footer">
      <div id="footerContent">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</div>
  </div>
</body>
</html> 
```

# iphone - iOS 读取多个子目录

> ID：15937321
> 
> 赞同：0
> 
> 时间：2013-04-10T22:05:14.790
> 
> 标签：iphone, ios, objective-c, directory, nsfilemanager

我正在尝试读取目录，然后获取这些目录中文件的路径。问题是，我不知道一个文件夹里可能有多少个子目录，这段代码

```
NSString *path;
if ([[NSFileManager defaultManager] fileExistsAtPath:[[self downloadsDir] stringByAppendingPathComponent:[tableView cellForRowAtIndexPath:indexPath].textLabel.text]]) {
    path = [[self downloadsDir] stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", [tableView cellForRowAtIndexPath:indexPath].textLabel.text]];
}
else{
    for (NSString *subdirs in [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[self downloadsDir] error:nil]) {
        BOOL dir;
        [[NSFileManager defaultManager] fileExistsAtPath:[[self downloadsDir] stringByAppendingPathComponent:subdirs] isDirectory:&dir];
        if (dir) {
            for (NSString *f in [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[[self downloadsDir] stringByAppendingPathComponent:subdirs] error:nil]) {
                if ([f isEqualToString:[tableView cellForRowAtIndexPath:indexPath].textLabel.text]) {
                    path = [[self downloadsDir] stringByAppendingPathComponent:[NSString stringWithFormat:@"%@/%@", subdirs, f]];
                }
            }
        }
    }
} 
```

最多只能读取一个子目录，并为我提供我正在寻找的文件的路径。我找不到比这更好的方法来获取多个子目录以及这些目录中文件的路径。有人能帮忙吗？这是我想要做的事情

```
+Downloads Folder+
    +File1+ //I can get the path for this
    +Directory1+ 
         +Directory2+ 
             +File3+ // I want to get the path for this, but don't know how
         +File2+ // I can get the path for this 
```

我觉得如果我只是不断重复获取目录内容的 for 循环，我最终可能会遇到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:12:18.903

有一个叫做[递归](http://en.wikipedia.org/wiki/Recursion)的概念，它通常应用于像这样的问题。基本上，您为每个子目录调用该方法，然后依次为每个子子目录调用它，依此类推。

重要的是你定义了一个停止点，所以它不会永远持续下去。似乎一个好的停止点是一个文件或一个空目录。

在伪代码中：

```
method storePaths(directory)
    for each element in  directory
        if element is a file
            store path
        else if element not empty directory
             call storePaths(element) 
```

# jquery - loadInit() 和 onload() 有什么区别？

> ID：15937323
> 
> 赞同：-1
> 
> 时间：2013-04-10T22:05:34.570
> 
> 标签：jquery

我只是想知道使用 loadInit() 的目的是什么？loadInit 和 onload 有什么区别？他们是一样的吗？onload 和 onLoad 有区别吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T22:12:58.647

请阅读

init 和 onload 解释

[http://www.elated.com/articles/jquery-getting-started/](http://www.elated.com/articles/jquery-getting-started/)

# java - Android：获取生成的变量及其值？

> ID：15937324
> 
> 赞同：0
> 
> 时间：2013-04-10T22:05:45.890
> 
> 标签：java, android

我正在制作一个加密纯文本然后通过电子邮件发送的应用程序。我`cText`在“加密”方法中创建的变量（从用户输入的 passT 和 keyT 创建）在方法结束时返回。然而，我很好奇我将如何将它合并到我的 onCreate 方法中，以便将它的新加密内容包含到电子邮件中？以下是我所拥有的，但我只收到错误：

```
public class ScreenNext extends Activity {

int key = 0;
static char ch;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_screen_next)

    EditText emailT;//Import  EditTexts (Key and Email)  
    Button send = (Button) findViewById(R.id.bSend);//Import button1 (Send)
    final EditText passT = (EditText) findViewById(R.id.etTogg);//passT variable for Password Text for EditText field
    final EditText keyT = (EditText) findViewById(R.id.etKey);
    final EditText passT = (EditText) findViewById(R.id.etTogg);//passT variable for Password Text for EditText field

    send.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String keyText = keyT.getText().toString();
            String passText = passT.getText().toString();
            String EmailAdd = emailT.getText().toString();

            //This must be fixed
            //String cipherText = cText.getText().toString();

            Intent email = new Intent(Intent.ACTION_SEND);//The intent
            email.setType("plain/text");
            email.putExtra(Intent.EXTRA_EMAIL, new String[]{EmailAdd.toString()});
            email.putExtra(Intent.EXTRA_SUBJECT, "Your encrypted Password");//Subject is hard coded for convenience sake
            email.putExtra(Intent.EXTRA_TEXT, cText.toString());//Here we add encrypted Password that has just been generated
            startActivity(email);//Start the activity
        }

    });

}//End onCreate
...
} 
```

还有我的加密方法：

```
public static String message(String choice, String subKey, String message) {
int Option = Integer.parseInt(choice);//Must pareseInt
int key = Integer.parseInt(subKey);
message = message.toLowerCase();

ScreenNext subcipher_1 = null;
String CipherTxt = subcipher_1.encrypt(message, key);
return CipherTxt;
}

public static String encrypt(String Txt, int key) {

//local var cipherText of type string is init empty
String CipherTxt = "";//May be able to remove this'un 
String cText="";
//enhanced for loop 
// start at 0, go until "as long as input text" 
for (int i = 0; i < Txt.length(); i++) {
    //get a char from the string at index i (start at 0 work through to end of string)
    // and store in local var extractedChar for type char
    char extractedChar = Txt.charAt(i);
    /* enhanced for loop 
     * start at 0, go until end of user entered cipherKeyValue
     * either set to lowercase a or add one to the char
     * uses the checkifz method
     */
    for (int j = 0; j < key; j++) {
        ScreenNext subcipher_1 = null;
        if (subcipher_1.checkIfZ(extractedChar) == true) {
            extractedChar = 'a';
        } else {
            extractedChar++;
        }
        CipherTxt= new StringBuilder().append(extractedChar).toString();
    }
    //add extracted char to builder object
    //change object builder to string and assing to cipherText of type String
    //create new object builder from StringBuilder class
    cText = cText.concat(CipherTxt);
}
//Pass the cipherText value out of the method to whom ever called it

return cText;
} 
```

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:04:31.550

如果您想在您`cText`的多个部分中使用您的变量，`Activity`那么您需要通过将其放在方法之外使其成为成员变量，最好像这样

```
public class ScreenNext extends Activity {

int key = 0;
static char ch;
String cText; 
```

但是您可能希望`null`在使用它或对其应用任何方法之前对其进行初始化或检查。将变量放在这里为其提供了类范围，因此可以在 this 中的任何位置访问它`Activity`。您不能真正再次“使用”它，`onCreate()`因为一旦`onCreate()`方法完成，它就不会再次被调用。我假设您正在谈论您的`onClick()`which 设置`onCreate()`但将在`Button`单击时被调用。我对你的问题的措辞有点困惑，所以如果这不是你想要的，那就更清楚地解释一下

# java - 数据结构像地图一样工作，但允许随机更改键顺序

> ID：15937327
> 
> 赞同：0
> 
> 时间：2013-04-10T22:05:54.163
> 
> 标签：java, list, data-structures, map

我已经阅读了很多关于实现`Map`和`List`接口的数据结构的主题。在任何地方 LinkedHashMap 或 SortedMap 就足够了。
但我的情况略有不同，因为我不仅需要保持键的插入顺序或排序映射，还需要执行键顺序的随机更改。
`List`允许使用方法做到这一点`add(int index, E element)`，但没有实现`Map`不支持这样的方法。应该提到的是，我需要的数据结构将主要用作地图。例如地图如下所示：

1.  键 1 -> 值 1
2.  键 2 -> 值 2
3.  键 3 -> 值 3
4.  键 4 -> 值 4

我可能需要将第 i 个对移动到第 j 个位置，具体取决于用户操作：

1.  键 1 -> 值 1
2.  键 4 -> 值 4 [j]
3.  键 3 -> 值 3
4.  键 2 -> 值 2 [i]

我有一个想法来结合 LinkedList 和 HashMap 并在它们之间同步插入和删除。所以 Map 可以按任意顺序存储元素，同时 List 中的元素可以按我想要的顺序排列。
但我认为这不好。这种结构需要近一倍的内存，并且在 Collection Framework 中的集成很差，因为名称冲突会阻止单个类同时实现 List 和 Map。
所以我的问题是：用 Java 描述的特性实现数据结构的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:52:27.970

如果您需要 O(1) 查找键值映射，以及不支持像 SortedMap 这样的不变性的可自定义排序顺序，您可以创建一个使用 Map 和 List 的包装类，如下所示：

```
 class MapList {
        Map<K,V> map = new HashMap<K,V>();
        List<K> keysList = new ArrayList<K>();

        public void put(K key, V val) {
            if (!map.contains(key)) {
                keysList.add(key);
            }
            map.put(key, val);
        }

        public void swap(int key1pos, int key2pos) {
            keysList.set(key1pos, keysList.set(key2pos, keysList.get(key1po)));
        }

        // Getter methods, size, etc...
    } 
```

我认为您无法解决对具有这样一组要求的自定义类的需求。密钥通常应该在集合 API 中是不可变的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:52:35.357

如果 ordering 很重要，如何创建一个带有 order 字段的通用键对象类，例如：

```
public class MyKey<K> implements Comparable {
  private int order;
  private K key;
  /* getters & setters */
  /* compareTo() */
} 
```

该`compareTo()`方法按订单字段值排序。然后把它放在你的密钥类型周围。例如：如果您要存储 Integer -> Integer 映射：

```
Map<MyKey<Integer>,Integer> myMap = /*.. */; 
```

然后，只要您需要重新排序密钥，只需更改 order 字段值即可。然后，您可以使用 map `keySet()`plus`Collections.sort()`或`TreeSet`

这绝不是一个有效的解决方案 - 但也许它符合您的目的

# regex - 正则表达式可选引号

> ID：15937331
> 
> 赞同：-2
> 
> 时间：2013-04-10T22:06:08.767
> 
> 标签：regex

我需要一个正则表达式来检测字符'a'，后跟一个空格，后跟一个单词，或者用引号括起来的单词。我需要使用这个或多个单词，并在替换中使用它们，例如“b \1”

所以：

```
a "foo bar"
a 'foo bar'
a foo
a 
a foo bar 
```

应该变成：

```
b foo bar
b foo bar
b foo
a 
a foo 
```

我需要什么正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:29:35.447

如果引号中不允许使用引号，则可以使用以下方法：

```
perl -pe 's/^a (['\''"]?)(.+)\1$/b $2/' <<EOT
a "foo bar"
a 'foo bar'
a foo
a
EOT 
```

输出

```
b foo bar
b foo bar
b foo
a 
```

但也适用于`a foo bar`（a 替换为 b）。可以吗？它与 不匹配`a ""`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:28:05.843

尝试：

```
a ('(.+)'|"(.+)"|(\B+)) 
```

替换为：

```
b $2$3$4 
```

* * *

是的，奇怪的是 Python 似乎不喜欢空的捕获组。据我所知，大多数正则表达式实现都没有问题。不过，您始终可以分两步执行此操作：

```
temp = re.sub(r"a (['\"])(.*)\1",r"b \2", string)
return re.sub(r"a (\w*)",r"b \1", temp) 
```

或者三个：

```
temp = re.sub(r"a (\"(.*)\"",r"b \1", string)
temp = re.sub(r"a ('(.*)'",r"b \1", temp)
return re.sub(r"a (\w*)",r"b \1", temp) 
```

您也可以放弃使用`sub`，并自己构建组的输出，类似于：

```
regex = re.compile(r"^a (([\"'])(.*)\2.*|(\w*).*)$",re.MULTILINE)
matches = re.finditer(regex,string)
for match in matches:
    if match.group(3) is not None:
        print 'b {0}'.format(match.group(3))
    elif match.group(4) is not None:
        print 'b {0}'.format(match.group(4)) 
```

# android - Phonegap：ajax + jsonp 在 PC 上工作但在 Android 上不工作

> ID：15937341
> 
> 赞同：2
> 
> 时间：2013-04-10T22:06:47.200
> 
> 标签：android, json, cordova, jsonp

使用 Cordova 2.5.0 + jQuery 1.91，我正在尝试解析远程 JSON

```
$.support.cors = true;
$.mobile.allowCrossDomainPages = true;
$.ajax({
        url: 'http://sub.foo.com/json.php?callback=?',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
                alert("OK");
        },
        error: function(){
                alert("Error");
        }
}); 
```

它在我的桌面 Chrome 浏览器上运行正常，但在我的 Android 模拟器上运行良好（“错误”消息）。

我确实在“AndroidManifest.xml”上设置了权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

并在“config.xml”上

```
<access origin="http://sub.foo.com" /> 
```

我究竟做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T06:41:42.457

在 res/xml/cordova.xml 文件中添加以下行

```
<access origin="http://127.0.0.1*"/> <!-- allow local pages -->
    <access origin="http://192.168.1.211*" subdomains="true"/>
    <access origin="http://70.38.120.153:240*" subdomains="true"/>
    <!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
    <!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
    <access origin=".*"/>

    <log level="DEBUG"/>
    <preference name="useBrowserHistory" value="true" />
    <preference name="exit-on-suspend" value="false" /> 
```

# java - Java API 中可变参数的源代码？

> ID：15937345
> 
> 赞同：4
> 
> 时间：2013-04-10T22:07:01.880
> 
> 标签：java, variadic-functions

是否可以在 Java API 中找到 Varargs 的源代码（换句话说，解释该机制是如何工作的）？

编辑：我确实有 Java 源代码，但我无法找到 Varargs（我也在网上查了一下，似乎没有找到任何信息）。我开始怀疑它不是直接在源代码中，但我不确定，因此我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:17:03.913

也许这篇文章会有所帮助 [http://boyns.blogspot.fr/2007/12/java-15-explained-varargs.html](http://boyns.blogspot.fr/2007/12/java-15-explained-varargs.html)

最后的结论是编译器将可变参数转换为字节码中的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:32:51.137

你的问题体现了一个谬误。源代码不一定是用 Java 编写的，也不一定位于 API 中。在这种情况下，该功能由字节码和 JVM 实现。

# java - Java while 和 if 和 else

> ID：15937353
> 
> 赞同：0
> 
> 时间：2013-04-10T22:07:38.727
> 
> 标签：java, if-statement, while-loop

```
public class Head1 {
  public static void main(String[] args) {
    int beerNum = 99;
    String word = "bottles";
    while (beerNum > 0) {
      if (beerNum == 1) {
        word = "bottle";
      }
      System.out.println(beerNum + " " + word + " of beer on the wall");
      System.out.println(beerNum + " " + word + " of beer");
      System.out.println("Take one down.");
      System.out.println("Pass it around.");
      beerNum = beerNum - 1;
      if (beerNum > 0) {
        System.out.println(beerNum + " " + word + " of beer on the wall");
      }
      if (beerNum == 1) {
        System.out.println(beerNum + " " + word + " of beer on the wall");
      } else {
        System.out.println("No more bottles of beer on the wall!");
      }
    }
  }
} 
```

这个来自 Java 书籍的示例代码打印出从 99 瓶啤酒到墙上没有啤酒瓶的歌曲。问题是当它是 1 瓶啤酒在墙上时，它仍然说瓶子。我试图通过`if (beerNum == 1)`在最后添加部分来解决这个问题。但是，它仍然在墙上显示 1 瓶啤酒，我在墙上有一瓶啤酒。

我不知道要改变什么来解决这个问题。我要创建另一个 while 部分吗？

如果你能给他们一个提示，那么我可以自己解决它，那也很酷！因为我知道我的实际歌曲输出在第一个 if 部分，但我不知道我应该在哪里编辑“if”或者我是否应该创建另一个 if 部分。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:11:06.360

你更新 beerNum 然后打印出来。把部分

```
if (beerNum == 1) {
    word = "bottle";
} 
```

在更新 beerNum 值的行之后。对“瓶子”和“瓶子”使用单独的变量也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:20:46.123

您也可以在没有循环的情况下执行相同的操作并使用递归。

```
public class Bottles {
    public static void main(String[] args) {
        removeBottle(100);
    }

    private static void removeBottle(int numOfBottles) {
        // IF the number of bottles is LESS THAN OR EQUAL to 1 print singular version
        // ELSE print plural version
        if (numOfBottles <= 1) {
            System.out.println(numOfBottles + " bottle of beer on the wall.");
        } else {
            System.out.println(numOfBottles + " bottles of beer on the wall.");
        }

        // print of the rest of song
        System.out.println("Take one down.");
        System.out.println("Pass it around.\n"); // "\n" just puts new line

        numOfBottles--; // remove a bottle

        // IF the number of bottles is GREATER THAN OR EQUAL to 1 do it again!
        // ELSE no more bottles =(
        if (numOfBottles >= 1) {
            removeBottle(numOfBottles);
        } else {
            System.out.println("No more bottles of beer on the wall!");
        }
    }
} 
```

# fonts - MediaWiki：自动将字体颜色更改为 wiki 特定的颜色

> ID：15937356
> 
> 赞同：2
> 
> 时间：2013-04-10T22:07:50.240
> 
> 标签：fonts, colors, mediawiki

是否可以自动将字体颜色更改为特定于 wiki 的默认文本（或链接的默认颜色）？

例如，您想用字体标签定义字体颜色，并插入一个值，使字体颜色自动更改为 wiki 的文本（或链接）颜色。

像这样的东西：`<font color="the mysterious value">This text will appear in the default link color of this wiki.</font>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:58:50.490

链接颜色由如下所示的[CSS 规则](https://github.com/wikimedia/mediawiki-core/blob/master/skins/common/commonElements.css)设置：

```
a {
    text-decoration: none;
    color: #0645ad;
    background: none;
} 
```

由于此规则仅适用于`a`元素（即链接），因此使其*自动*应用于任何 wiki 上的给定文本的唯一方法（没有 JavaScript 技巧）就是将该文本实际包装在链接中。对不起。

也就是说，如果你只是想要一段文本在不同的 wiki 上具有不同的颜色，那很简单——只需将它包装在一个`span`元素中，给`span`自定义类名，然后在你的 wiki 的站点样式表中添加一个 CSS 规则[（Common. css)](http://www.mediawiki.org/wiki/Manual%3aCSS)定义文本应该具有的颜色，如下所示：

**HTML（在维基页面上）：**

```
<span class="mysterious">This text will appear in a color defined in this
wiki's site stylesheet.</span> 
```

**CSS（在 Common.css 中）：**

```
span.mysterious {
    color: #0645ad;  /* make it look like a link */
} 
```

这样，如果您将页面复制到具有不同 CSS 的不同 wiki，则文本看起来会有所不同。

# .htaccess - 用连字符重写规则

> ID：15937357
> 
> 赞同：1
> 
> 时间：2013-04-10T22:07:56.423
> 
> 标签：.htaccess, mod-rewrite

我有以下规则

```
RewriteRule ^/Recent-* /mydir/recent$1 [NC,I,R=301] 
```

现在我希望我的 URL（Recent-Name.xml）重定向但不（Recent.xml）

上述规则将两者都重定向。知道如何防止recent.xml 重定向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:13:09.807

正`*`则表达式修饰符意味着它前面的字符“没有或更多”。这意味着可能*没有*连字符，它会匹配。只需摆脱`*`或使其匹配字母：

```
RewriteRule ^/Recent-[A-Za-z]*\.xml$ /mydir/recent [NC,I,R=301] 
```

# java - Primefaces TreeTable：使用 p:ajax 删除节点不起作用

> ID：15937358
> 
> 赞同：2
> 
> 时间：2013-04-10T22:08:01.150
> 
> 标签：java, jsf, primefaces

我正在尝试创建一个 treeTable 组件（PrimeFaces 3.5），当它发生取消选择 ajax 事件（取消选中该框）时，我想使用 onNodeUnselect 侦听器方法删除这个未选中（未选中）treeNode：

**XHTML**

```
<p:treeTable id="treeTable" value="#{treeTableManager.treeNode}" var="data" 
             selection="#{treeTableManager.selectedTreeNode}"
             selectionMode="checkbox">
    <p:ajax event="unselect" update=":form:treeTable" listener="#{treeTableManager.onNodeUnselect}" />
    <p:column>
        <f:facet name="header">
            Title
        </f:facet>
        <h:outputText value="#{data}"/>
    </p:column>
</p:treeTable> 
```

这是我的经理豆：

```
@Named("treeTableManager")
@SessionScoped
public class TreeTableManager implements Serializable {

private TreeNode treeNode;

private TreeNode[] selectedTreeNode;

//gets and sets...

public TreeTableManager(){
    this.treeNode = new DefaultTreeNode("root", null);
    TreeNode t = new DefaultTreeNode("NodeFather", this.treeNode);
}

public void onNodeUnselect(NodeUnselectEvent event){
    this.treeNode.getChildren().remove(event.getTreeNode());
} 
```

但我得到了下面的堆栈跟踪：

```
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at org.primefaces.component.api.UITree.findTreeNode(UITree.java:121)
    at org.primefaces.component.api.UITree.setRowKey(UITree.java:80)
    at org.primefaces.component.api.UITree.visitTree(UITree.java:417)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIForm.visitTree(UIForm.java:344)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:376)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:297)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:391)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.mediaretrievers.controller.login.AuthenticationFilter.doFilter(AuthenticationFilter.java:36)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

在页面中没有发生任何事情。更新不适用于 treeNode。尽管存在堆栈跟踪和页面上的错误，但我意识到该节点已被删除。

我一直认为这个问题是由ajax中的某些东西引起的，然后我在下面做了这个测试。

```
 <p:commandButton id="hideBotton" widgetVar="buttonObject" 
                                                 update=":form:treeTable" process="@this" 
                                                 actionListener="#{treeTableManager.onNodeUnselect}"/>

                                <p:treeTable id="treeTable" value="#{treeTableManager.treeNode}" var="data" 
                                             selection="#{treeTableManager.selectedTreeNode}"
                                             selectionMode="checkbox">
<p:ajax event="unselect" oncomplete="buttonObject.jq.click()" listener="#{treeTableManager.setNodeEventTrigger}" />
                                    <p:column>
                                        <f:facet name="header">
                                            teste
                                        </f:facet>
                                        <h:outputText value="#{data}"/>
                                    </p:column>
                                </p:treeTable> 
```

并修改 onNodeUnselect 方法：

```
public void onNodeUnselect(){
    //I have done it just to simplify the exemple.
    this.treeNode.getChildren().remove(0);
} 
```

我改变了功能的方式只是为了模拟一个测试，让ajax的调用首先执行，并在ajax完成调用时调用hideBotton的click方法。因此，hideBotton 调用 onNodeUnselect 侦听器方法并更新 treeNode。

我不知道发生了什么，但据我所见，是 ajax 中的东西。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:07:54.623

也许我们遇到了同样的问题。它已在 Primefaces 3.4.4、3.5.2 和即将推出的 4.0 中修复。请参阅[http://code.google.com/p/primefaces/issues/detail?id=5255](http://code.google.com/p/primefaces/issues/detail?id=5255)。不幸的是，3.4.4 和 3.5.2 版本只有在您订阅为 PRO 或 ELITE 时才能获得。如果您没有它，您可以等待 4.0 或将此修复合并到 3.5 fork 的自己的分支中（[http:/ /blog.primefaces.org/?p=2498](http://blog.primefaces.org/?p=2498)）。

# php - 将表单的 GET 转换为 PHP 变量？

> ID：15937359
> 
> 赞同：1
> 
> 时间：2013-04-10T22:08:15.050
> 
> 标签：php, sql-injection

我正在尝试使以下表单的 GET 函数成为预定义变量的一部分。

有任何想法吗？提前致谢！

* * *

让我解释一下我真正想做的事情。我目前经营一个专注于美国股市的网站。我创建了一个带有 method=GET 的 HTML 表单。此表单用作查找股票代码符号的搜索框。使用 GET 方法，它会将股票代码放在 URL 的末尾，然后我创建了一个 quotes.php 页面，该页面捕获此信息并根据在框中键入的股票代码显示股票图表。对于公司名称，我创建了一个名为 company.php 的页面，该页面声明了公司名称的所有变量（恰好是一个 $ 后跟股票代码）。文件company.php 是quotes.php 中包含的唯一文件。

这就是它的来源：'。$$_GET["symbol"] 。'

上面的代码根据在表单中输入的内容将 GET 更改为变量。如果有人在框中键入的内容与 company.php 页面中的变量不匹配，我使用“die”来显示错误消息。

我还为每家公司添加了 company.php 页面变量，这些变量将显示每只股票在哪个证券交易所上市。这些变量以“$ex_”开头。所以，我试图做的是将符号键入附加到“$ex_”的框中，以便显示相应的证券交易所。

我的问题是：

1.  有没有办法将输入到表单中的内容添加到“$ex_”？
2.  这是编写此类代码的不安全方式（可以被黑客入侵）吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T22:16:00.167

不要给变量添加前缀并使用变量变量（尤其是在用户输入时可能不安全），试试这个：

```
$ex = array(
    "foo" => "bar",
    ...
);
if( !isset($ex[$_GET['symbol']])) die("Error: That symbol doesn't exist!");
$chosen = $ex[$_GET['symbol']]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:33:32.023

[PHP's extract()](http://php.net/extract) does what exactly what you want, and you should specify "ex_" as the prefix you want.

However, there are security issues and unintended consequences to using such a function blindly, so read up on the additional paragraphs following the function parameters.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:30:57.140

这是另一种方法：

```
extract($_GET, EXTR_PREFIX_ALL, "ex"); 
```

尽管最好像这样使用它以确保没有安全问题。

```
extract($_GET, EXTR_SKIP); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T22:15:14.110

下面会达到你所需要的吗？

```
$myGetVariable = $_GET['symbol'];
$ex_{$myGetVariable} = "Something"; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T22:18:35.143

```
$_GET['symbol'] = 'APPL';

if (!empty($_GET)) {
  foreach ($_GET as $k => $v) {
   $var = 'ex_'.$k ;
    $$var=$v;
  }
}

var_dump($ex_symbol); 
```

应用程序

# c# - 丢失的网络连接导致 Excel 崩溃

> ID：15937360
> 
> 赞同：-1
> 
> 时间：2013-04-10T22:08:16.553
> 
> 标签：c#, excel, connection, add-in

我的 Excel AddIn 是用 NetOffice、ExcelDNA、C# 编写的，它调用 Web 服务来获取数据。获取大量数据需要一段时间。在取数据的过程中，如果网络断开，Excel会挂起，显示“无响应”。现在，如果我尝试关闭 Excel，它会要求您关闭或调试。我只是关闭它。然后，当我重新启动 Excel 时，出现一个烦人的消息框，上面写着“Excel 在 '商品加载项' 加载项中遇到了严重问题。如果您多次看到此消息，您应该禁用此加载项并检查是否有可用更新。是否要禁用此加载项？"

我想知道当连接丢失时如何处理？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:17:35.953

如果可能，请异步调用 Web 服务。大多数 WS 将提供您可以进行的调用的异步版本和非异步版本。

如果这不可能，请考虑在单独的线程中执行 Web 服务数据获取。

在这两种情况下，您都应该放置一些管道代码以在一段时间后终止工作，并且可能有一些方法来通知用户并非一切都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:56:21.743

> “Excel 在使用 'XXX 加载项' 加载项时遇到了严重问题。如果您多次看到此消息，则应禁用此加载项并检查是否有可用更新。是否要禁用此加入？。”

当发生未处理的异常时，您会遇到此问题。Excel 将提示您在下次启动时禁用加载项。这可能会导致用户发布这样的帖子[来修复它](https://stackoverflow.com/questions/4668777/how-to-troubleshoot-a-vsto-addin-that-does-not-load/14698249#14698249)。

当您必须支持在非管理环境中使用 Citrix 的客户端时，痛苦会更加严重。要解决 Excel 想要禁用加载项的问题，您必须添加一个全局异常处理程序，以便异常不会被引用回 Excel，以避免提示用户禁用加载项。

```
public YouAddInCtrl()
{
    InitializeComponent();
    // Add the event handler for handling UI thread exceptions to the event.
    System.Windows.Forms.Application.ThreadException += ApplicationThreadException;
    // Add the event handler for handling non-UI thread exceptions to the event. 
    AppDomain.CurrentDomain.UnhandledException += ApplicationUnhandledException;   
}

private void ApplicationThreadException(object sender, ThreadExceptionEventArgs e)
{
    addInManager.TopLevelExceptionHandler(e.Exception);
}

private void ApplicationUnhandledException(object sender, UnhandledExceptionEventArgs e)
{
    addInManager.TopLevelExceptionHandler((Exception)e.ExceptionObject);
}

// Any exceptions returned to Excel will cause the Addin to be disabled
// So we must swallow them here.
internal void TopLevelExceptionHandler(Exception ex)
{
    var e = new NotificationEventArgs(NotificationEventArgs.NotificationEnum.TopLevelException);
    if (NotifyEventTopLevelException != null)
    {
        if (NotifyEventTopLevelException(ex,e))
        {
            System.Diagnostics.Process.Start("mailto:Support@XYZ.com%3e?subject=XYZ%202%20PROD%20Environment%20Problem&body=Hi,%0A%0AIssue:%0A%0ASteps%20to%20Reproduce:"); 
        }
    }

    LogExceptions(ex);
} 
```

我还建议您在不同的线程上运行 WebService 请求，例如：

```
BackgroundWorker1.WorkerReportsProgress = true;
BackgroundWorker1.WorkerSupportsCancellation = true;
BackgroundWorker1.DoWork += DoWorkExecuteQuery;
BackgroundWorker1.RunWorkerCompleted += RunWorkerCompletedExecuteQuery;

private bool QueryData()
{
    var thinkProgBar = new ThinkingProgressBar();
    thinkProgBar.ShowCancelLink(true);
    thinkProgBar.SetThinkingBar(true);
    BackgroundWorker1.RunWorkerAsync(thinkProgBar);
    thinkProgBar.ShowDialog();
    if (thinkProgBar.Tag != null && thinkProgBar.Tag.ToString() == "Cancelled")
    {
        CancelGetDataByFilters();
        thinkProgBar.SetThinkingBar(false);
        return false;
    }
    thinkProgBar.SetThinkingBar(false);
    return true;
}

private void DoWorkExecuteQuery(object sender, DoWorkEventArgs e)
{
    dtQueryData = null;
    e.Result = e.Argument;
    ((ThinkingProgressBar)e.Result).SetThinkingBar(true);
    dtQueryData = WEBSERVICE.GetData();  //CALL YOUR WEBSERVICE HERE
}

private void RunWorkerCompletedExecuteQuery(object sender, RunWorkerCompletedEventArgs e)
{
    var dlg = e.Result as ThinkingProgressBar;
    if (dlg != null) {
        ((ThinkingProgressBar)e.Result).SetThinkingBar(false);
        dlg.Close();
    }
} 
```

这是 ThinkingProgress 栏：

```
public partial class ThinkingProgressBar : Form
{
    private System.DateTime startTime = DateTime.Now;
    public ThinkingProgressBar()
    {
        InitializeComponent();
    }

    private void lblClose_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        this.Tag = "Cancelled";
        this.Hide();
    }
    public void ShowCancelLink(bool show)
    {
        lblClose.Visible = show;
    }

    public void SetThinkingBar(bool on)
    {
        if (on)
        {
            lblTime.Text = "0:00:00";
            startTime = DateTime.Now;
            timer1.Enabled = true;
            timer1.Start();
        }
        else
        {
            timer1.Enabled = false;
            timer1.Stop();
        }
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        var diff = new TimeSpan();
        diff = DateTime.Now.Subtract(startTime);
        lblTime.Text = diff.Hours + ":" + diff.Minutes.ToString("00") + ":" + diff.Seconds.ToString("00");
        lblTime.Invalidate();
    }
} 
```

# redirect - 从特定页面/二维码移动重定向

> ID：15937361
> 
> 赞同：0
> 
> 时间：2013-04-10T22:08:18.137
> 
> 标签：redirect, mobile

我的客户创建了一个二维码，该二维码可以转到她的非移动网站上的特定页面。她确实有一个移动网站 m.customersdomain.com

问题是，二维码已经提交打印以进行广告宣传，并且将转到常规 URL，例如： [http ://www.customerdomain.com/specificpage](http://www.customerdomain.com/specificpage)

有没有办法寻找点击这个非移动页面的移动设备并将它们重定向到具有相同内容的移动 URL/页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:16:22.723

您必须向客户的服务器添加一些代码，以检测点击是否来自移动设备并进行相应的重定向。

在这里，您可以获得有关如何在多种编程语言上进行检测的示例：

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

# operating-system - 支持具有负载平衡的服务器集群的 VPS 公司的软件/操作系统

> ID：15937363
> 
> 赞同：0
> 
> 时间：2013-04-10T22:08:24.833
> 
> 标签：operating-system, cluster-computing, load-balancing, vps

只是想知道是否有任何操作系统可以在我的服务器集群中自动负载平衡虚拟机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:12:05.740

不是操作系统，但您可以查看：[http ://haproxy.1wt.eu/](http://haproxy.1wt.eu/)

# facebook - 用于 Facebook 的 WordPress 插件可在页面上自动发布

> ID：15937369
> 
> 赞同：1
> 
> 时间：2013-04-10T22:08:43.087
> 
> 标签：facebook, wordpress, plugins, facebook-page

我需要配置 wordpress 插件“Facebook”来自动将我的博客文章发布到我的企业帐户下的 Facebook 官方页面上。据我所知，我们需要 App ID 和 App Secret 来配置它，但我们无法在企业帐户下创建应用程序。有什么解决方案可以做到这一点？

# android - EmPubLite 应用程序在教程 #13 上崩溃

> ID：15937371
> 
> 赞同：0
> 
> 时间：2013-04-10T22:08:48.723
> 
> 标签：android, commonsware

所以，我正在阅读教程 #12，一切正常。然后我尝试进入教程 #13 保存/恢复上次读取位置，应用程序崩溃：

```
04-10 15:59:26.510: E/Trace(704): error opening trace file: No such file or directory (2)
04-10 15:59:27.491: D/AndroidRuntime(704): Shutting down VM
04-10 15:59:27.491: W/dalvikvm(704): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
04-10 15:59:27.500: E/AndroidRuntime(704): FATAL EXCEPTION: main
04-10 15:59:27.500: E/AndroidRuntime(704): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.commonsware.empublite/com.commonsware.empublite.EmPubLiteActivity}: java.lang.NullPointerException
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.os.Looper.loop(Looper.java:137)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-10 15:59:27.500: E/AndroidRuntime(704):  at java.lang.reflect.Method.invokeNative(Native Method)
04-10 15:59:27.500: E/AndroidRuntime(704):  at java.lang.reflect.Method.invoke(Method.java:511)
04-10 15:59:27.500: E/AndroidRuntime(704):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-10 15:59:27.500: E/AndroidRuntime(704):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-10 15:59:27.500: E/AndroidRuntime(704):  at dalvik.system.NativeStart.main(Native Method)
04-10 15:59:27.500: E/AndroidRuntime(704): Caused by: java.lang.NullPointerException
04-10 15:59:27.500: E/AndroidRuntime(704):  at com.commonsware.empublite.ModelFragment.executeAsyncTask(ModelFragment.java:51)
04-10 15:59:27.500: E/AndroidRuntime(704):  at com.commonsware.empublite.ModelFragment.deliverModel(ModelFragment.java:38)
04-10 15:59:27.500: E/AndroidRuntime(704):  at com.commonsware.empublite.ModelFragment.onActivityCreated(ModelFragment.java:29)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.app.Activity.performStart(Activity.java:5018)
04-10 15:59:27.500: E/AndroidRuntime(704):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2032)
04-10 15:59:27.500: E/AndroidRuntime(704):  ... 11 more 
```

我试图注释掉我所做的代码，直到它工作的最后一点，但这似乎不起作用。我也不确定如何阅读此堆栈跟踪。我应该看什么来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:16:14.977

> 我也不确定如何阅读此堆栈跟踪。我应该看什么来解决这个问题？

ModelFragment.java 的第 51 行，在`executeAsyncTask()`方法中是您崩溃的地方（请参阅最后一个堆栈跟踪节，以 开头`Caused by: java.lang.NullPointerException`）。

您的行号和[答案](https://github.com/commonsguy/cw-omnibus/tree/master/EmPubLite/T13-Prefs)中的行号并没有完全对齐。但是，唯一的方法`executeAsyncTask()`可能`NullPointerException`是如果`AsyncTask`您传入的是 is `null`，那应该是不可能的，因为您在调用方法之前立即定义了这些`executeAsyncTask()`任务`deliverModel()`。也许您错过了`deliverModel()`.

# android - Activity 启动后，我的应用程序如何使用相机拍摄图像？

> ID：15937372
> 
> 赞同：2
> 
> 时间：2013-04-10T22:08:57.007
> 
> 标签：android, android-camera

一旦用户登录他们的设备，我就会尝试用前置摄像头拍照。我的目标是通过启动相机活动并尽快拍照，在用户不知情的情况下拍照。我已经遵循了[android 网站上](http://developer.android.com/guide/topics/media/camera.html#custom-camera)的代码，并且我的应用程序确实可以运行。

现在我正在尝试在活动开始后拍照，这目前在我的`onCreate`：

```
 // Create our Preview view and set it as the content of our activity.
    mPreview = new CameraPreview(this, mCamera);
    final FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mPreview);

    // Add a listener to the Capture button
    Button captureButton = (Button) findViewById(id.button_capture);
    captureButton.setOnClickListener(
        new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // get an image from the camera
                mCamera.takePicture(null, null, mPicture);
            }       
        }
    ); 
```

但是当我将其注释掉以替换它时：

```
mCamera.takePicture(null, null, mPicture); 
```

我收到一个错误

```
04-10 15:03:11.006: E/AndroidRuntime(25729): java.lang.RuntimeException: Unable to start activity 
 ComponentInfo{com.example.cameraactivity/com.example.cameraactivity.CameraActivity}:
 java.lang.RuntimeException: takePicture failed 
```

我不知道为什么它不起作用，是因为我的`surfaceview`还没有启动吗？我想拍照太快？我已经等待了 5 秒钟，但它没有完成这项工作。

# jquery - Jquery loader 仅适用于第一个请求

> ID：15937374
> 
> 赞同：0
> 
> 时间：2013-04-10T22:09:01.420
> 
> 标签：jquery, ajax, loader

我实际上是在尝试为我的应用程序提供“符合人体工程学的感觉”，所以我有 3 个链接可以获取 html 内容并将其加载到 div 中。除了仅在第一个请求期间出现的加载程序外，一切正常。

这是我的代码

```
$(document).ready(function() {

 $('#loader')
.hide()  // hide it initially
.ajaxStart(function() {
    $(this).show();
})
.ajaxStop(function() {
    $(this).hide();
});

var uri_segment = "<?=$this->uri->segment(3);?>";

$('#editTeam').click(function (e) {

    e.preventDefault();
    $(this).parent().siblings().removeClass('active');

    $(this).parent('li').addClass('active');

    $.ajax({
        type : "GET",
        async : true,
        url : "<?=base_url().'ajax/team/get_editTeam/';?>"+uri_segment,
        dataType : "html",
        success : function(data){
                $('#divPage').html(data);

        }
    });

    return false;
});

$('#editRights').click(function (e){
    e.preventDefault();

    $(this).parent().siblings().removeClass('active');

    $(this).parent('li').addClass('active');

    $.ajax({
        type : "GET",
        async : false,
        url : "<?=base_url().'ajax/team/get_editRights/';?>"+uri_segment,
        dataType : "html",
        success : function(data){
                $('#divPage').html(data);
        }
    });
    return false;
});

$('#addMember').click(function (e){

    e.preventDefault();

    $(this).parent().siblings().removeClass('active');

    $(this).parent('li').addClass('active');

        $.ajax({
            type : "GET",
            async : false,
            url : "<?=base_url().'ajax/team/get_addMember/'.$this->uri->segment(3);?>",
            dataType : "html",
            success : function(data){
                $('#divPage').html(data);

            }
        });
        return false;
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:01:51.553

尝试将`ajaxStart`/移动`ajaxStop`到文档上。[根据文档，从 1.8 开始，您应该只将其绑定到文档。](http://api.jquery.com/ajaxStart/)

```
$('#loader').hide();

$('document')
  .ajaxStart(function() {
    $('#loader').show();
  })
  .ajaxStop(function() {
    $('#loader').hide();
  }); 
```

# postgresql - 处理 PostgreSQL 表的并发进程

> ID：15937377
> 
> 赞同：0
> 
> 时间：2013-04-10T22:09:17.147
> 
> 标签：postgresql, concurrency, postgresql-9.1

我有一个简单的过程，我需要处理表的记录，并且理想情况下运行该过程的多个实例而不处理相同的记录。我使用 MySQL 完成此操作的方式相当普遍（尽管我认为 token 字段更像是一种 hack）：

向表中添加几个字段：

```
CREATE TABLE records (
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    ...actual fields...

    processed_at DATETIME DEFAULT NULL,
    process_token TEXT DEFAULT NULL
); 
```

然后是一个简单的处理脚本：

```
process_salt = md5(rand()) # or something like a process id

def get_record():
    token = md5(microtime + process_salt)
    db.exec("UPDATE records SET process_token = ?
             WHERE processed_at IS NULL LIMIT 1", token)
    return db.exec("SELECT * FROM records WHERE token = ?", token)

while (row = get_record()) is valid:
    # ...do processing on row...

    db.exec("UPDATE records SET processed_at = NOW(), token = NULL
             WHERE id = ?", row.id) 
```

我正在使用 PostgreSQL 数据库的系统中实现这样的过程。我知道 Pg 在锁定方面可能被认为比 MySQL 更成熟，这要归功于 MVCC——**我可以在 Pg 中使用行锁定或其他一些功能来代替令牌字段吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:48:03.427

这种方法适用于 PostgreSQL，但它往往效率很低，因为您要更新每一行两次——每次更新需要*两个*事务，两个提交。`commit_delay`使用 a并可能禁用可以在一定程度上减轻此成本`synchronous_commit`，但除非您的存储子系统上有非易失性回写缓存，否则它仍然不会很快。

更重要的是，因为您正在提交第一次更新，所以无法区分仍在工作的工人和已经崩溃的工人之间的区别。如果所有工作人员都在本地计算机上，您可能可以将令牌设置为工作人员的进程 ID，然后偶尔扫描丢失的 PID，但这很麻烦且容易出现竞争条件，更不用说 pid 重用的问题了。

我建议您采用*真正的*排队解决方案，旨在解决这些问题，如 ActiveMQ、RabbitMQ、ZeroMQ 等[。PGQ](http://wiki.postgresql.org/wiki/PGQ_Tutorial)也可能很重要。

在事务性关系数据库中进行队列处理*应该*很容易，但在实践中，要做好并正确处理是非常困难的。大多数一目了然的“解决方案”实际上是对所有工作进行序列化（因此在任何给定时间，只有许多队列工作人员中的一个在做任何事情）在详细检查时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:35:13.570

你可以使用`SELECT ... FOR UPDATE NOWAIT`which 将获得该行的排他锁，或者如果它已经被锁定则报告错误。

# mercurial - 管理服务器上的大量 mercurial 存储库

> ID：15937378
> 
> 赞同：0
> 
> 时间：2013-04-10T22:09:23.830
> 
> 标签：mercurial, multiple-repositories

我已经阅读了 Mercurial 中的单个中央存储库与多个存储库方法（例如[这些](https://stackoverflow.com/questions/7077439/mercurial-granular-repositories-vs-large-repositories-and-shared-third-party-t) [SO](https://stackoverflow.com/questions/2475520/one-repository-multiple-projects-without-getting-mixed-up) [questions](https://stackoverflow.com/questions/2748552/how-to-best-configure-a-central-repository-multiple-central-repositories-for-mer)），很明显小型存储库（每个独立项目一个）是正确的方法。

但这意味着大量的存储库，其中“大量”我的意思是很难跟踪其中包含什么。我在一个小团队（< 7 个开发人员）中，我们从事的项目数量、不同的分支/版本等，我可以看到我们有 50 或 60 个存储库。

是否有任何工具可以帮助编目/管理具有数十或数百个存储库的 Mercurial 服务器？

* * *

编辑：我同时使用[SCM-Manager](https://bitbucket.org/sdorra/scm-manager/wiki/Home)（在我们的防火墙内）和[bitbucket](https://bitbucket.org/)（在我们的防火墙外）。哦，当然，每个开发人员都会有他/她自己的一堆本地克隆。

问题不*在于如何*将大量的 mercurial 存储库放在服务器上，而在于如何跟踪它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:01:36.830

正如@Steve 所建议的，网络方法非常好。我以这种方式管理 50 多个存储库。

我有一个`hg serve`在批处理文件中运行的进程：

`hg serve --prefix mercurial --address my-hg-server --port 8000 --web-conf hg-web.conf --accesslog hg-access.log --errorlog hg-error.log`

**hg-web.conf**看起来像这样：

```
[web]
style = default
allow_push = *
push_ssl = false

[paths]
repos1 = \\hg-repos-server\repos1
repos2 = \\hg-repos-server\repos2
.... 
```

然后，通过访问：

> http : // my-hg-server:8000/mercurial

我得到一个包含指向我所有存储库的链接的页面。用户可以复制和克隆链接。

这是一个非常简单的设置，非常适合我们。

您可以包装 hg serve 批处理文件或 shell 脚本以作为服务运行，您可以将这一切都放在 Apache Web 服务器后面以管理更多安全性。

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:59:28.500

您如何为这些存储库提供服务？如果您使用，那么最简单的方法是向服务器上的文件`hgweb`添加描述。`hgrc`您可以在如下`[web]`部分执行此操作：

```
[web]
description=Description goes here 
```

这将描述添加到基于 Web 的界面中，这对我们来说很好（我们有大约 30 个存储库）

除此之外，我认为您拥有的大多数选项都涉及选择包含此功能的基于 Web 的发布方法，例如 Rhodecode。其他发布方法可[在此处](http://mercurial.selenic.com/wiki/PublishingRepositories#Choosing_a_publishing_method)获得。

# spring - JBoss AS 7 Infinispan 集群

> ID：15937379
> 
> 赞同：4
> 
> 时间：2013-04-10T22:09:24.000
> 
> 标签：spring, jboss7.x, infinispan

我通过以下方式设置了两个节点的 JBoss AS 7.1.1.FINAL 集群 -

1.  master - 在 Ubuntu Server 12.10 (VirtualBox VM) 上运行
2.  slave - 在 Windows 7 上运行（VirtaulBox 主机）

我已经在两个节点上部署了一个 Spring Web 应用程序，并且我正在尝试设置一个有效的复制缓存。我的问题是，即使集群显然有效，缓存似乎也没有被复制。

我的配置 -

在 domain.xml 中（在主从机上）

```
<subsystem xmlns="urn:jboss:domain:infinispan:1.2" default-cache-container="cluster">
    <cache-container name="cluster" aliases="ha-partition" default-cache="default" jndi-name="java:jboss/infinispan/cluster" start="EAGER">
        <transport lock-timeout="60000" />
        <replicated-cache name="default" mode="SYNC" batching="true">
            <locking isolation="REPEATABLE_READ"/>
        </replicated-cache>
    </cache-container>
</subsystem> 
```

这几乎是 domain.xml 中的默认配置，除了 jndi-name 和 EAGER start。

在弹簧配置中 -

```
<infinispan:container-cache-manager id="cacheManager" cache-container-ref="springCacheContainer" />
<jee:jndi-lookup id="springCacheContainer" jndi-name="java:jboss/infinispan/cluster" /> 
```

**通过此设置，缓存可以工作，但不会被复制。缓存似乎彼此独立运行。此外，EAGER 启动似乎没有任何效果。缓存似乎仅在首次使用时才被初始化。**

来自主日志（第一次使用缓存）-

```
[Server:server-one] 03:25:55,756 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (ajp-192.168.2.13-192.168.2.13-8009-3) ISPN000078: Starting JGroups Channel
[Server:server-one] 03:25:55,762 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (ajp-192.168.2.13-192.168.2.13-8009-3) ISPN000094: Received new cluster view: [master:server-one/cluster|1] [master:server-one/cluster, slave:server-one-slave/cluster]
[Server:server-one] 03:25:55,763 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (ajp-192.168.2.13-192.168.2.13-8009-3) ISPN000079: Cache local address is master:server-one/cluster, physical addresses are [192.168.2.13:55200]
[Server:server-one] 03:25:55,769 INFO  [org.infinispan.factories.GlobalComponentRegistry] (ajp-192.168.2.13-192.168.2.13-8009-3) ISPN000128: Infinispan version: Infinispan 'Brahma' 5.1.2.FINAL
[Server:server-one] 03:25:55,851 INFO  [org.jboss.as.clustering.infinispan] (ajp-192.168.2.13-192.168.2.13-8009-3) JBAS010281: Started cluster cache from cluster container 
```

从从属日志（第一次使用缓存）-

```
[Server:server-one-slave] 03:29:38,124 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (ajp--192.168.2.10-8009-2) ISPN000078: Starting JGroups Channel
[Server:server-one-slave] 03:29:38,129 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (ajp--192.168.2.10-8009-2) ISPN000094: Received new cluster view: [master:server-one/cluster|1] [master:server-one/cluster, slave:server-one-slave/cluster]
[Server:server-one-slave] 03:29:38,130 INFO  [org.infinispan.remoting.transport.jgroups.JGroupsTransport] (ajp--192.168.2.10-8009-2) ISPN000079: Cache local address is slave:server-one-slave/cluster, physical addresses are [192.168.2.10:55200]
[Server:server-one-slave] 03:29:38,133 INFO  [org.infinispan.factories.GlobalComponentRegistry] (ajp--192.168.2.10-8009-2) ISPN000128: Infinispan version: Infinispan 'Brahma' 5.1.2.FINAL
[Server:server-one-slave] 03:29:38,195 INFO  [org.jboss.as.clustering.infinispan] (ajp--192.168.2.10-8009-2) JBAS010281: Started cluster cache from cluster container 
```

我不认为这是一个 udp/多播问题，因为我在这个集群中设置了 mod_cluster、HornetQ 和 Quartz，它们都按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:11:03.737

放入`<distributable/>`web.xml 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T12:57:28.027

我有一个类似的问题，我的缓存在第一次使用应用程序之前不会复制。我能够通过将复制缓存的“start”属性设置为 EAGER 以及缓存容器属性 start="EAGER" 来解决此问题。

```
<replicated-cache name="default" mode="SYNC" batching="true" start="EAGER"> 
```

# ios - 为什么 iPad Retina 上的图形会像素化？

> ID：15937380
> 
> 赞同：0
> 
> 时间：2013-04-10T22:09:41.860
> 
> 标签：ios, actionscript-3, flash, air, retina-display

我目前正在使用 AIR 3.2 for iOS 开发 Flash。我已将舞台大小设置为 2048 x 1536 像素。发布设置中的分辨率也设置为“高”。图形、精灵、图像等怎么会被像素化？！在 iPod Touch（视网膜）或 iPhone 上测试时，它们看起来没有像素化。我对此完全感到困惑......没有理由让它被像素化！请帮忙！

我知道 iPod Touch/iPhone 有 326ppi 而 iPad 有 264ppi。我什至调整了图像和图形的大小以适应这种情况，但这不是问题。他们在 iPad 上看起来像素化了！

是我设置错了还是怎么的？或者我需要一些我缺少的代码......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:24:14.390

[本指南](http://www.richardlord.net/blog/using-the-ipad-retina-display-with-adobe-air)可能会对您有所帮助。这是关于 AIR 在 iPad 上的像素加倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:31:13.223

JustLogin 建议的 AIR 像素加倍是问题所在。使用 AIR SDK 3.2 和 BELOW 似乎会出现此问题。所以基本上我在 Retina 显示器上以非 Retina 的形式查看舞台上的所有图形和所有内容。3.2 不完全支持 Retina，因此即使设置为高分辨率，它也会将其发布为非 Retina。最好的解决方案是将 AIR SDK 更新到 3.3 或更高版本。我更新到 3.7 现在可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:30:43.503

以下是我会考虑的一些事情：

1.  当您使用图像查看器打开图像时，您的图像看起来还不错吗？
2.  您的图像是否以编程方式调整大小/缩放？如果是，那可能是原因之一。
3.  您是否将图像放置为固定的 int 位置？前任。非 int 值，例如

    img.x = 20.383; 和 img.y = 65.884 // 会造成麻烦

# visual-studio-2010 - 如何在 Shareponit 工作流上使用 While 活动和 Replicator 活动

> ID：15937386
> 
> 赞同：0
> 
> 时间：2013-04-10T22:10:20.457
> 
> 标签：visual-studio-2010, sharepoint-2010, workflow-foundation, sharepoint-workflow

我已经开发了一个文档审批工作流程，我需要使用复制器活动来解决许多可以详细说明、审查和审批文档的人的需求。

工作流在序列模型上执行，因为状态机不允许我使用 Replicator Activity。

对于工作流程的想法，我遵循[这个例子](http://msdn.microsoft.com/en-us/library/hh128696.aspx)。

问题是如果有人拒绝该文档，我将无法重新启动工作流程。

我正在做一些测试`While Activity`来解决问题，但任务是空的（Asigando 到：是空的，标题：是空的），因为某些问题会对 Replicator Activity 产生错误。

这个问题有已知的解决方案吗？否则可能会重新启动我的工作流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:47:14.630

谢谢派曼，

我感谢您的帮助。

我评论你说，为了解决我的问题，我使用状态机的工作流程并放弃使用 Replicator Activity 的最初想法。

对于在同一状态下分配多个任务的问题，即如果同一状态有多个用户，例如“文档的修订”。对于完成审查任务后的第一个用户，将流程发送到下一个状态将是“文档审批”，然后再创建审批任务想知道是否有多个用户进入“状态审查”，如果是真的，工作流返回到前一个状态这将是修订并创建新任务并将以下用户分配更改为审查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:11:06.853

您需要创建一个额外的自定义活动并将复制器的内容放入活动中并将活动添加到复制器。当您将任务直接放在复制器活动中时，它们将无法以某种方式工作，因为它们具有相同的令牌。

还要确保为不同的任务提供不同的 id 和令牌。

# entity-framework - Linq to Entities 嵌套子查询

> ID：15937388
> 
> 赞同：0
> 
> 时间：2013-04-10T22:10:24.450
> 
> 标签：entity-framework, linq-to-entities

我对 linq 相当陌生，并且在将以下 sql 转换为 linq 时遇到问题：

```
select 
    c3.COURSE, c3.DESCR
from 
    (select c.courseprefix, MAX(c.coursesuffix) [coursesuffix]
    from 
        (select distinct SUBSTRING(course,1,3)[courseprefix], RIGHT(course, LEN(course) - 3) [coursesuffix]
        from PsCourses where LEN(course) >= 3 ) c
    group by c.courseprefix 
    ) c2 inner join PsCourses c3 on (c2.courseprefix + c2.coursesuffix) = c3.COURSE
where
    c3.COURSE_STATUS = 'A'
order by
    c3.course 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:28:02.730

好吧，你可以使用[http://www.sqltolinq.com/downloads](http://www.sqltolinq.com/downloads) 或者你可以做一个 IQueryable，但在我个人的标准中，我更喜欢用原生 sql 编写复杂的查询

# quickbooks-online - 我如何获得在线快速手册的连接票以开发/测试一次性网络应用程序？

> ID：15937391
> 
> 赞同：5
> 
> 时间：2013-04-10T22:10:40.157
> 
> 标签：quickbooks-online

我正在尝试构建一个一次性的 web 应用程序，它将与我们的业务 QuickBooks Online 帐户进行通信。我发现的大多数研究都说对于开发和测试，使用“桌面”连接方式（以避免证书头痛）。所以我注册了一个应用程序并从这里获得了 id：

```
appreg.intuit.com/ 
```

问题是，我所见过的所有地方都告诉我然后去这里获取连接票

```
login.ptc.quickbooks.com/j/qbn/sdkapp/confirm?serviceid=2004&appid=YOUR-APPLICATION-ID-HERE 
```

但是，当我这样做时，它会将我重定向到这里

```
qbo.intuit.com/c1/v60.147/0/login?redirect=true 
```

我到处乱搞，终于找到了一些方法来访问“旧”快速书籍的东西，当我去建立一家测试公司时，它把我送到了这里

```
ptc.qbo.intuit.com/c1/v0/offline.shtml 
```

这告诉我

> “QBO PTC 环境不再可用，已被新的 E2E 环境取代。请继续访问[https://e2e.qbo.intuit.com/](https://e2e.qbo.intuit.com/)。对于给您带来的不便和困惑，我们深表歉意。如果您有问题，请联系 Eric Bullen”

我如何才能连接到测试帐户以进行一些开发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:41:20.867

> 我如何才能连接到测试帐户以进行一些开发？

除非您是 Intuit 员工，否则您**无法获得测试帐户**。

话虽如此，*你不需要*。

只需使用您的实时 QuickBooks Online 帐户。如果需要，您可以在他们的网站上注册以获得 30 天的免费试用期。

当您在~~[https://appreg.intuit.com](https://appreg.intuit.com)~~新链接 - [http://developer.intuit.com/Application/Create/QBOE](http://developer.intuit.com/Application/Create/QBOE)注册时，请确保您在 DESKTOP 模式下注册，以用于 PRODUCTION 环境。

然后使用生产 URL 获取您的连接票：

*   [https://login.quickbooks.com/j/qbn/sdkapp/confirm?appid=YOUR-APPLICATION-ID-HERE&serviceid=2004&appdata=1](https://login.quickbooks.com/j/qbn/sdkapp/confirm?appid=YOUR-APPLICATION-ID-HERE&serviceid=2004&appdata=1)

（替换为您从 appreg 获得的应用程序 ID）

[有关我们的QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition)的更多信息和示例。

# c - netlink_kernel_create 不适用于最新的 linux 内核

> ID：15937395
> 
> 赞同：11
> 
> 时间：2013-04-10T22:10:48.353
> 
> 标签：c, kernel, netlink

`kernel`编译使用 netlink 函数的旧模块时出现编译器错误。

```
int
init_module()
{
    /* Initialize the Netlink kernel interface */
    nl_sk = netlink_kernel_create(&init_net, 17, 0, recv_cmd, NULL, THIS_MODULE);
    if(!nl_sk)
    {
            printk(KERN_INFO "failed to initialize system (error: 1001)\n");
            return -ENOMEM;
    }
 .... 
```

以前它工作正常，但现在我收到此错误。

```
error: too many arguments to function 'netlink_kernel_create' 
```

操作系统信息

```
uname -a

Linux ibrar-ahmed 3.8.0-17-generic #27-Ubuntu SMP Sun Apr 7 19:39:35 UTC 2013 x86_64  x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-12T02:44:23.723

只需更换

```
nl_sk = netlink_kernel_create(&init_net, 17, 0, recv_cmd, NULL, THIS_MODULE); 
```

与以下

```
struct netlink_kernel_cfg cfg = {
    .input = recv_cmd,
};

nl_sk = netlink_kernel_create(&init_net, 17, &cfg); 
```

它应该可以工作。我遇到了同样的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T02:16:36.337

这是因为在 3.8 中 netlink_kernel_create 原型已更改：

netlink_kernel_create(struct net *net, int unit, struct netlink_kernel_cfg *cfg)

（和 qv [http://lxr.linux.no/linux+v3.8/include/linux/netlink.h#L48](http://lxr.linux.no/linux+v3.8/include/linux/netlink.h#L48)）

您别无选择，只能重写内核模块，删除额外的参数 (THIS_MODULE)，并实现 netlink_kernel_cfg 结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-22T15:15:37.983

```
 netlink_kernel_create(struct net *net, int unit, struct netlink_kernel_cfg *cfg)

    struct netlink_kernel_cfg cfg = {
        .groups = SELNLGRP_MAX,
        .flags  = NL_CFG_F_NONROOT_RECV,
    };

    selnl = netlink_kernel_create(&init_net, NETLINK_SELINUX, &cfg);
    if (selnl == NULL)
        panic("SELinux:  Cannot create netlink socket."); 
```

# php - 通过mail（）Apache + PHP5.3 + sendmail发送电子邮件时延迟20秒？

> ID：15937400
> 
> 赞同：2
> 
> 时间：2013-04-10T22:11:07.380
> 
> 标签：php, apache, email, centos, sendmail

今天我发现我的网站联系表大约需要 20 秒才能在我的 Godaddy Centos VPS 服务器中发送一封电子邮件。

我调查了这个问题，发现源是PHP`mail()`函数引起的。当我在网站的联系页面上输入消息并单击发送按钮时，页面加载完成大约需要 20 秒。

使用以下 PHP 代码创建一个 test.php 文件来测试邮件：

```
<?php

mail("myemail@mydomain.com", "Test", "Test");

?> 
```

我运行命令：`php test.php`在服务器上。

我检查了`/var/log/maillog`邮件，看起来电子邮件已立即发送，没有任何延迟。

只有当我通过我的网站执行我的代码时，才会出现 20 秒的延迟。我认为这与 Apache 用户有关，因为带有 root 用户的命令行可以毫不拖延地发送电子邮件。

这是我使用 root 用户通过控制台发送电子邮件时的邮件日志：

```
Apr 10 14:57:04 ip-103-1-173-250 sendmail[27681]: r3ALv4i3027681: from=root, size=174, class=0, nrcpts=1, msgid=<201304102157.r3ALv4i3027681@ip-103-1-173-250.ip.secureserver.net>, relay=root@localhost
Apr 10 14:57:05 ip-103-1-173-250 sendmail[27681]: r3ALv4i3027681: to=john23157@gmail.com, ctladdr=root (0/0), delay=00:00:01, xdelay=00:00:01, mailer=relay, pri=30174, relay=myserver, dsn=2.0.0, stat=Sent (Accepted message qp 20459 bytes 684) 
```

出于安全原因，我将这篇文章中的`relay=`值替换为。`myserver`

从上面的邮件日志中，很明显邮件是立即发送的，我确实收到了邮件。

这是我通过网站联系表发送时的邮件日志：

```
Apr 10 14:54:22 myhostname sendmail[27655]: r3ALsMjV027655: from=support@mydomain.com, size=940, class=0, nrcpts=1, msgid=<d946feca6d6640910e2db02d541aa704@mydomain.com>, relay=apache@localhost

Apr 10 14:57:56 myhostname sendmail[27655]: r3ALsMjV027655: to=john23157@gmail.com, ctladdr=support@mydomain.com (48/48), delay=00:03:34, xdelay=00:03:34, mailer=relay, pri=30940, relay=myserver, dsn=2.0.0, stat=Sent (Accepted message qp 21186 bytes 1297) 
```

上面的邮件日志显示延迟了 3 分半钟。

我不知道是什么导致了通过 Apache 发送时的延迟。

您的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:23:25.467

As @hek2mgl says, unfortunately most such things are caused by network issues–one of the mail servers that is in the chain may be overwhelmed or some part of the network might just be slow at that point. When I was developing my own PHP application, I experienced similar issues.

Since you have your own VPS, I would recommend installing your own SMTP server. I used [PostFix](http://www.postfix.org/), but there are others. You then configure it so that it replaces the built in unix `sendmail` command. You can find [instructions on how to install postfix at the CentOS Wiki](http://wiki.centos.org/HowTos/postfix)

If this is set up correctly, calling `mail()` from PHP will add the message to the send queue in Postfix, rather than trying to contact an external mail server. It will return immediately (meaning your app will feel much faster), while Postfix will keep trying to send the email in the background for as long as it needs to.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T20:34:16.740

I found this solution on experts exchange and it fixed this exact issue for me.

--- Pasted Below ---

My problem was that Sendmail looks for a fully qualified domain (FQDN) name, which I did not have in my hosts file. Once I changed it from this:

127.0.0.1 localhost

127.0.1.1 webserver

to this:

127.0.0.1 localhost localhost.localdomain webserver

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T22:56:10.623

I'll bet you a weeks salary it's not caused by PHP's mail() function.

The mail() function is a simple wrapper around an exec call which invokes the CLI interface to the MTA. Simply exec'ing a program is unlikely to have such a delay - every time I've come across this problem it's a result of the MTA trying to offload the message synchronously and running into problems along the way (badly configured DNS, missing smart hosts, ident lookups....).

Since it's a VPS you have control over how the MTA is (mis)configured. And that's a topic for ServerFault - not Stackoverflow.

(BTW did you check the configs were the same for the CLI and webserver SAPI? Did you try to exec the CLI *from* the webserver sapi?)

# cocoa-touch - 精灵动画 cocos2d

> ID：15937403
> 
> 赞同：0
> 
> 时间：2013-04-10T22:11:10.127
> 
> 标签：cocoa-touch, animation, cocos2d-iphone

我怎样才能为这个精灵设置动画？

```
if ((self = [super initWithSpriteFrameName:@"Boss_ship_5.png" world:world shapeName:@"Boss_ship" maxHp:50 healthBarType:HealthBarTypeRed])) { 
```

我正在尝试这个，但是 _layer 不起作用......

```
CCSpriteFrameCache * cache =
[CCSpriteFrameCache sharedSpriteFrameCache];

CCAnimation *animation = [CCAnimation animation];

[animation addSpriteFrame:
    [cache spriteFrameByName:@"Boss_ship_5.png"]];

[animation addSpriteFrame:
    [cache spriteFrameByName:@"Boss_ship_4.png"]];
animation.delayPerUnit = 0.05;

[_layer runAction:
    [CCRepeatForever actionWithAction:
        [CCAnimate actionWithAnimation:animation]]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:22:53.057

在将精灵添加到`animation`对象之前，您需要将纹理加载到`CCSpriteFrameCache`. 请看一下

[http://www.cocos2d-iphone.org/archives/633](http://www.cocos2d-iphone.org/archives/633)

此外，`CCAnimation`动作应该与`CCSprites`. 哪个类是`_layer`对象？

# git - Git：如何推送对某些文件所做的更改？

> ID：15937405
> 
> 赞同：1
> 
> 时间：2013-04-10T22:11:22.483
> 
> 标签：git, git-rebase, cherry-pick

我最近遇到了一个问题，我需要选择一些文件来使用 git 推送到远程分支。**我的具体用例是在每次提交中只创建/修改一个文件，我需要以编程方式推送选定的文件（处于最新状态）。**我做了一些研究，发现了两个接近我需要做的技巧：

1.  我可以使用cherry-pick 将某些提交挑选到一个新分支中并将该分支合并到远程主控中。
2.  我可以使用 rebase -i 重新排序提交，我假设我可以重新排序，以便与这些选定文件相关的提交都在前面，我可以推送该列表中的最后一个提交。

对于cherry-pick来说，这有点令人困惑。我可以创建一个没有所有脏提交的新分支，然后将文件提交选择到该分支中。但是，如果该文件已经存在于分支中，它总是会引发我必须手动修复的冲突，这并不理想。

对于 rebase -i，从我读过的内容来看，我需要转到一个交互式编辑器，我需要在其中手动重新排序提交，然后我可以执行 git push origin 以将所有内容应用到提交-SHA（重新排序） . 不理想，因为我必须做手工工作。

总的来说，我认为 rebase 更接近我的需要，但我找不到一种简单的方法来以编程方式完成它。谁能想出一些可以完成我任务的git类比操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:06:15.443

I think I have found the solution to this problem: `cherry-pick --strategy=recursive -Xtheirs <commit-SHA>`.

Specifying the 'theirs' option in recursive merge strategy forces conflicts to auto-resolve cleanly favoring the version that's being merged in. This will ignore all the conflict warning but grab whatever is in the commit.

I guess now I just want to know why cherry-pick would produce a conflict warning when picking a commit that modified an existing file in the current branch, even if just adding a line.

# c# - 从 AForge.Net videosourceplayer 获取部分图像

> ID：15937406
> 
> 赞同：1
> 
> 时间：2013-04-10T22:11:26.853
> 
> 标签：c#, image-resizing, aforge

有人可以帮我解决这个问题吗？

我将来自 AForge.Net 的 VideoSourcePlayer 控件、一个图片框和一个按钮放在我的表单上。单击时，我只想显示从当前帧到图片框的区域。我可以使用以下代码显示整个框架：

```
 Bitmap bitmap = (Bitmap)videoSourcePlayer1.GetCurrentVideoFrame().Clone();
 pictureBox1.Image = bitmap; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-14T13:59:14.013

```
Bitmap bitmap = this.VideoSourcePlayer.GetCurrentVideoFrame(); 
```

# php - 日期操作无法正常工作

> ID：15937407
> 
> 赞同：0
> 
> 时间：2013-04-10T22:11:30.630
> 
> 标签：php, date

我正在尝试将以这种格式“d/m/Y”显示的日期更改为这种格式“dmY”，我编写了以下代码：

```
//Add $license years to today
$today = date("j-m-Y");
$license = $row_customize['license'];
$startdate = $row_customize['startdate'];
list($d,$m,$Y) = explode('/',$startdate);
$newstartDate = $d."-".$m."-".$Y;
$enddate= date("j-m-Y", strtotime("$newstartDate +$license years"));
echo $today;
echo $enddate; 
```

$today 显示正确，但 $enddate 显示的是 1970 年的日期，例如 1-01-1970。

请问我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:31:29.053

默认日期为 0，相当于 01-01-1970。所以 $newstartDate 和 $license 年份都是 0，所以当加在一起时结果仍然是 0。所以问题是为什么 $newstartDate 和 $license 设置为 0。

我想像 p91paul 说的你可能无法使用 n 年。我认为 $newstartDate 的格式也可能不受支持。您可以在函数中使用 $startDate 然后执行格式更改吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:20:22.860

我会放

```
$newstartDate = $d."-".$m."-".(intval($Y)+intval($license));
$enddate= date("j-m-Y", strtotime($newstartDate)); 
```

我认为`"<date> + n years"`strtotime() 不允许使用该格式

# python - 使用 spg4，pyephem 的 Python 卫星跟踪 - 位置不匹配

> ID：15937413
> 
> 赞同：4
> 
> 时间：2013-04-10T22:11:59.080
> 
> 标签：python, coordinate-transformation, astronomy, pyephem, satellite

我正在尝试编写一个基本的 python 脚本，它将从给定位置跟踪用 tle 定义的给定卫星。我不是一个 asto/orbital 人，但我正在努力变得更聪明。

我遇到了一个问题，我使用的不同模型给了我非常不同的位置答案。我试过使用：pyEphem spg4 predict（exec system call from script）

我正在测试的卫星是 ISS 和 directv10（一颗固定的，一颗移动的 - 具有可用于验证的互联网跟踪）：

```
0 Direct10
1 31862U 07032A   13099.15996183 -.00000126  00000-0  10000-3 0  1194
2 31862 000.0489 046.9646 0000388 001.7833 103.5813 01.00271667 21104
0 ISS
1 25544U 98067A   13112.50724749  .00016717  00000-0  10270-3 0  9148
2 25544  51.6465  24.5919 0009906 171.1474 188.9854 15.52429950 26067 
```

我已经修改了预测源以给我 eci 位置，以便我可以使用它来了解真实位置。我还让它给出了用于验证观察的 az、el 范围。我正在使用 spg4 来获取真实位置。对于观察到的位置，我使用的是 PyEphem。

我从 spg4 获得 ECEF 职位：

```
def get_real(epoch, sv):
    satellite = twoline2rv(sv.tle1, sv.tle2, wgs84)

    #epoch = time.time()
    obsTime = datetime.datetime.utcfromtimestamp(epoch)
    position, velocity = satellite.propagate(obsTime.year,
                                             obsTime.month,
                                             obsTime.day,
                                             obsTime.hour,
                                             obsTime.minute,
                                             obsTime.second)

    x = position[0]
    y = position[1]
    z = position[2]

    x *= 1000
    y *= 1000
    z *= 1000 
```

我的基于 pyephem 的观察代码是：

```
def get_ob(epoch, sv, obsLoc):
    site = ephem.Observer()
    site.lon = str(obsLoc.lat)   # +E -104.77 here
    site.lat = str(obsLoc.lon)   # +N 38.95   here
    site.elevation = obsLoc.alt # meters    0 here
    #epoch = time.time()
    site.date = datetime.datetime.utcfromtimestamp(epoch)

    sat = ephem.readtle(sv.name,sv.tle1,sv.tle2)
    sat.compute(site)

    az       = degrees(sat.az)
    el       = degrees(sat.alt)
    #range in m
    range    = sat.range
    sat_lat  = degrees(sat.sublat)
    sat_long = degrees(sat.sublong)
    # elevation of sat in m
    sat_elev = sat.elevation

    #TODO: switch to using az,el,range for observed location calculation
    #x, y, z    = aer2ecef(az,el,range,38.95,-104.77,80 / 1000)
    x,y,z  = llh2ecef(sat_lat, sat_long, sat_elev) 
```

llh2ecef 转换：

```
def llh2ecef (flati,floni, altkmi ):
    #         lat,lon,height to xyz vector
    #
    # input:
    # flat      geodetic latitude in deg
    # flon      longitude in deg
    # altkm     altitude in km
    # output:
    # returns vector x 3 long ECEF in km

    dtr =  pi/180.0;

    flat  = float(flati);
    flon  = float(floni);
    altkm = float(altkmi);

    clat = cos(dtr*flat);
    slat = sin(dtr*flat);
    clon = cos(dtr*flon);
    slon = sin(dtr*flon);

    rrnrm  = radcur (flat);
    rn     = rrnrm[1];
    re     = rrnrm[0];

    ecc1    = ecc;
    esq1    = ecc1*ecc1

    x      =  (rn + altkm) * clat * clon;
    y      =  (rn + altkm) * clat * slon;
    z      =  ( (1-esq1)*rn + altkm ) * slat;

    return x,y,z 
```

aer2ecef：

```
def aer2ecef(azimuthDeg, elevationDeg, slantRange, obs_lat, obs_long, obs_alt):

    #site ecef in meters
    sitex, sitey, sitez = llh2ecef(obs_lat,obs_long,obs_alt)

    #some needed calculations
    slat = sin(radians(obs_lat))
    slon = sin(radians(obs_long))
    clat = cos(radians(obs_lat))
    clon = cos(radians(obs_long))

    azRad = radians(azimuthDeg)
    elRad = radians(elevationDeg)

    # az,el,range to sez convertion
    south  = -slantRange * cos(elRad) * cos(azRad)
    east   =  slantRange * cos(elRad) * sin(azRad)
    zenith =  slantRange * sin(elRad)

    x = ( slat * clon * south) + (-slon * east) + (clat * clon * zenith) + sitex
    y = ( slat * slon * south) + ( clon * east) + (clat * slon * zenith) + sitey
    z = (-clat *        south) + ( slat * zenith) + sitez

    return x, y, z 
```

当我比较和绘制 3D 地球仪上的位置时（使用 ecef 位置），我得到了所有地方的答案。预测 eci 位置（转换为 ecef）与我在 ISS 跟踪网站上看到的相匹配（[http://www.n2yo.com/?s=25544](http://www.n2yo.com/?s=25544)）

get_real() 的结果在规模和位置上都相差甚远。get_ob() 的结果在比例上是正确的，但在地球上的位置是错误的

示例结果：

基于预测：

```
sv: ISS predict observed response    @ epoch: 1365630559.000000 : [111.485527, -69.072949, 12351.471383]
sv: ISS predict aer2ecef position(m) @ epoch: 1365630559.000000 : [4731598.706291642, 1844098.7384999825, -4521102.9225004213]
sv: ISS predict ecef position(m) @ epoch: 1365630559.000000 : [-3207559.6840419229, -3937040.5048992992, -4521102.9110000003]
sv: ISS predict ecef2llh(m)      @ epoch: 1365630559.000000 : [-41.67839724680753, -129.170165912171, 6792829.6884068651]
sv: Direct10 predict observed response    @ epoch: 1365630559.000000 : [39.692138, -49.219935, 46791.914833]
sv: Direct10 predict aer2ecef position(m) @ epoch: 1365630559.000000 : [28401835.38849232, 31161334.784188181, 3419.5400331273049]
sv: Direct10 predict ecef position(m) @ epoch: 1365630559.000000 : [-9348629.6463202238, -41113211.570621684, 3419.8620000000005]
sv: Direct10 predict ecef2llh(m)      @ epoch: 1365630559.000000 : [0.0046473273713214715, -102.81051792373036, 42156319.281573996] 
```

基于python：

```
sv: ISS ephem observed response    @ epoch: 1365630559.000000 : [344.067992722211, -72.38297754053431, 12587123.0][degrees(sat.az), degrees(sat.alt), sat.range]
sv: ISS ephem llh location(m)      @ epoch: 1365630559.000000 : [-41.678271938092195, -129.16682754513502, 421062.90625][degrees(sat.sublat0, degrees(sat.sublong), sat.elevation]
sv: ISS ephem xyz location(m)      @ epoch: 1365630559.000000 :[-201637.5647039332, -247524.53652043006, -284203.56557438202][llh2ecef(lat,long,elev)]
sv: ISS spg84 ecef position(m) @ epoch: 1365630559.000000 : [4031874.0758277094, 3087193.8810081254, -4521293.538866323]
sv: ISS spg84 ecef2llh(m)      @ epoch: 1365630559.000000 : [-41.68067424524357, 37.4411722245808, 6792812.8704163525]
sv: Direct10 ephem observed response    @ epoch: 1365630559.000000 : [320.8276456938389, -19.703680198781303, 43887572.0][degrees(sat.az), degrees(sat.alt), sat.range]
sv: Direct10 ephem llh location(m)      @ epoch: 1365630559.000000 : [0.004647324660923812, -102.8070784813048, 35784688.0][degrees(sat.sublat0, degrees(sat.sublong), sat.elevation]
sv: Direct10 ephem xyz location(m)      @ epoch: 1365630559.000000 :[-7933768.6901137345, -34900655.02490133, 2903.0498773286708][llh2ecef(lat,long,elev)]
sv: Direct10 spg84 ecef position(m) @ epoch: 1365630559.000000 : [18612307.532456037, 37832170.97306267, -14060.29781505302]
sv: Direct10 spg84 ecef2llh(m)      @ epoch: 1365630559.000000 : [-0.019106864351793953, 63.80418030988552, 42156299.077687643] 
```

两个观测值之间的 az、el 和范围不匹配。这些位置与“真实”位置不匹配。（在 ecef2llh 转换后，lat 和 long 会，但 height 不会。

与基于网络的跟踪器相比，我注意到预测的“真实”llh 位置与网站匹配。对于 directv10，pyEphem 匹配方位角和仰角，但不匹配 ISS

当我在地球仪上绘制它们时，预测 eci“真实”位置在正确的位置 - 匹配跟踪器网站）。spg84 ecef 位置（我认为应该与 predict 相同，位于地球的另一侧。预测的“观察到”位置靠近 spg84 位置。pyEphem 的高度完全关闭并且不显示（方式太低，在地球内部）。

所以我的问题是我在哪里使用错误的 python 模型？我的理解是 spg84 传播（）调用应该以米为单位返回卫星的执行位置。我会认为应该匹配 eci2efec 转换后的预测位置。当使用 sat.sublat、sat.sublong、sat.elevation 时，我还期望匹配然后是 llh2ecef()。

正如我所说，我对所有轨道事物都是新手，所以我确信我会犯一个简单的数学错误或一些事情。我尝试用谷歌搜索并尽可能多地搜索答案、示例和教程，但到目前为止没有任何帮助（我尝试了多种 ecef2llh 和 llh2ecef 方法来尝试解决这些错误。

任何建议，意见，正确方向的指示将不胜感激。如果这对某人有帮助，我可以发布/发送我正在使用的完整代码。我试图确保我在这里发布了重要的部分，并且不想让这个（已经非常）长的帖子变得更长。

谢谢您的帮助。

亚伦

更新：

我发现了问题的至少一部分。spg84.propagate() 返回 ECI 中的位置，而不是 ECEF。通过 eci2ecef 快速运行，它与预测响应完美对齐。

在发帖寻求帮助后，我似乎总能找到解决方案；）

现在需要弄清楚观察者位置发生了什么。这归结为：如何从 pyEphem.compute() 获取结果并获取卫星的 ecef 位置？更喜欢使用 az、el、范围值，而不是纬度、经度、海拔。

我猜我的 aer2ecef 调用中的错误。

谢谢。

更新 2：

让观察结果与“真实”位置一致。看来我遇到了单位问题。工作代码：

```
az       = degrees(sat.az)
el       = degrees(sat.alt)
#range in km
range    = sat.range
sat_lat  = degrees(sat.sublat)
sat_long = degrees(sat.sublong)
# elevation of sat in km
sat_elev = sat.elevation

#x, y, z    = aer2ecef(az,el,range,obsLoc.lat,obsLoc.long,obsLoc.alt)
x,y,z  = llh2ecef(sat_lat, sat_long, sat_elev / 1000)

x *= 1000
y *= 1000
z *= 1000
return x,y,z 
```

现在只需要 aer2ecef() 方法来返回正确的位置......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:06:53.170

如果您可以提供指向您已打开的新问题的链接，并用绿色复选框标记此答案，那么此问题将不再显示为 Stack Overflow 上未回答的 PyEphem 问题，并挤满我们这些看起来的人的控制台寻找该领域未解答的问题。感谢您为那些可能会追随您脚步的人分享您的大量工作！

# api - Jquery .get 在 Firefox 和 IE 中不起作用

> ID：15937416
> 
> 赞同：0
> 
> 时间：2013-04-10T22:12:06.100
> 
> 标签：api, internet-explorer, jquery, firefox

我正在使用很棒的[GoSquared API](https://www.gosquared.com/developer/)来获取我网站上当前访问者的数量。

我已经构建了一个 Jquery 脚本，它使用 Jquery 每两秒自动更新一次数字`.get`，但这似乎在 IE 和 Firefox 中不起作用。

**[JSFiddle](http://jsfiddle.net/Asustaba/JU3Yy/2/)**

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:20:16.197

`data`由于某种原因，在 Firefox中是一个字符串。您可以明确指定响应的数据类型：

```
$.get('url', function(){}, "json"); 
```

否则你可以把它变成这样的对象：

```
if (typeof data === "string"){
    data = JSON.parse(data);
} 
```

# ios - 如何将内容从 iCloud 或其他服务器加载到 App 中的 viewController

> ID：15937417
> 
> 赞同：0
> 
> 时间：2013-04-10T22:12:13.830
> 
> 标签：ios, icloud

我正在开发一个应用程序，它显示带有弹出框的注释，当用户点击 detailDisclosureButton 时会出现这些弹出框。我认为详细信息应该来自服务器，以便如果必须添加新位置（即地图上的更多注释）并因此必须添加新的详细信息内容，这可以通过 iCloud 或其他一些服务器以某种方式完成为了更新应用程序。

如何将服务器上的信息（比如 html 和照片，以及位置数据）连接到应用程序？我的 viewController 类中是否存在用于连接到服务器的特定数据访问方法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:15:09.303

您可以使用 AFNetworking ( [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking) ) - 它非常适合服务器连接。有很多关于这个的教程。

# mysql - MySQL 错误 1064 在 DATE 的 INSERT

> ID：15937418
> 
> 赞同：-1
> 
> 时间：2013-04-10T22:12:14.503
> 
> 标签：mysql, date, insert

我有一个名为“日历”的表，它是在 PHP 程序中使用此 SQL 语句创建的。

```
$sql="CREATE TABLE calendar (
 mdate DATE,
 PRIMARY KEY(mdate),
 special CHAR(20),
 director CHAR(20),
 dealer CHAR(20), 
 meeting CHAR(20))"; 
```

当我尝试将数据插入此表时，我收到了来自 MySQL 的错误 1064。为了确定错误在哪里，我从我的 PHP 程序中复制了 INSERT 语句并使用常量而不是变量。这是 INSERT 语句：

```
INSERT INTO TABLE calendar (mdate, special, director, dealer, meeting) VALUES('2013-05-01','Special Game','Director','Dealer','Meeting'); 
```

这是我收到的错误消息：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TABLE calendar (mdate, special, director, dealer, meeting) VALUES('2013-05-01','' at line 1 
```

我假设错误涉及“mdate”列。我尝试了几种日期格式，但错误消息没有变化。我查看了 MySQL 手册 9.1.3。日期和时间文字，看起来 YYYY-MM-DD 是 DATE 列的有效格式。我还检查了9.3。保留字以确保我的列名都不是保留字。

我最初计划使用 LOAD DATA INLINE 来更新我的表，但事实证明该语句需要 FILE 权限，而我的网站的主机不愿意授予该权限。

这似乎太简单了，不会成为问题。我希望有人能看到我没有看到的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:15:44.473

您不能`TABLE`在`INSERT`句子中使用关键字。它应该是这样的：

```
INSERT INTO calendar (mdate, special, director, dealer, meeting) 
VALUES('2013-05-01','Special Game','Director','Dealer','Meeting'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:17:00.343

calendar 已经是 table 你不需要说 TABLE

```
 INSERT INTO calendar (mdate, special, director, dealer, meeting) 
    VALUES('2013-05-01','Special Game','Director','Dealer','Meeting'); 
```

# macros - Confluence 5 用户宏参数限制？

> ID：15937424
> 
> 赞同：2
> 
> 时间：2013-04-10T22:12:55.883
> 
> 标签：macros, confluence

我正在 Confluence 5 中编写用户宏，我发现第 10 个参数没有被解释。

这是我的宏标题：

```
## @param ArtifactVersion:title=Artifact Version|type=string|required=true
## @param Contacts:title=Contacts|type=string|required=true
## @param Date:title=Date|type=date|required=true
## @param RollbackVersion:title=Rollback Version|type=string|required=true
## @param QaEngineer:title=QA Engineer|type=string|required=false
## @param ArtifactId:title=Artifact Id|type=string|required=true
## @param SiteName:title=Site Name|type=string|required=true
## @param Servers:title=Servers|type=string|required=true
## @param Instance:title=Instance|type=enum|enumValues=0,1,2,3,4,5,6,7,8,9,10|required=true
## @param MyParam:title=My Param|type=string|required=true 
```

如果我添加另一个参数（MyParam），那么它不会被解释。它只是按字面意思打印 $paramMyParam。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T23:51:39.540

我相当确定 Confluence 用户宏中存在 9 个参数的潜在限制。这是否是一个深思熟虑的设计决定，底层架构的限制，或者仅仅是一个疏忽/错误，我不能说。

如果这对您的宏来说是一个交易破坏者，您可以考虑使用 Java 插件将其重写为一个成熟的[宏模块。](https://developer.atlassian.com/display/CONFDEV/Macro+Module)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T09:17:03.487

我不确定您是否可以使用第 10 个参数，但我相信您可以将 2 个参数合并为 1 个，以便为最后一个参数留出空间。

Artifact version 和 Artifact ID 听起来好像它们可以从同一个字符串中解析出来，类似于您为第 8 个参数拥有的服务器列表所做的那样。

# c++ - std::bind2nd 在已经 bind1st std::function 上

> ID：15937429
> 
> 赞同：1
> 
> 时间：2013-04-10T22:13:28.837
> 
> 标签：c++, c++11

我试图弄清楚活页夹是如何工作的。我正在研究[HERE](http://en.cppreference.com/w/cpp/utility/functional/function)的示例。所以我决定扩展一点，但我不知道出了什么问题

```
namespace mine {
   using std::bind1st;
   using std::bind2nd;
   using std::function;
};

struct Foo {
    Foo(int num) : num_(num) {}
    void print_add(int i) const { std::cout << num_+i << '\n'; }
    int num_;
};

int main()
{

using namespace mine;

    // store a call to a member function
    function<void(const Foo&, int)> f_add_display = &Foo::print_add;
    Foo foo(314159);
    f_add_display(foo, 1);

    function<void(int)> foo_f_add_display = bind1st(f_add_display, foo);
    foo_f_add_display(1);

    // The problem is here  <------------
    function<void(const Foo&)> f_1_add_display = bind2nd(f_add_display, 1);
    // f_1_add_display(foo);
} 
```

我收到的错误消息（来自 Intel CC，gdb 无法理解）

```
Compilation finished with errors:
c++/4.7/backward/binders.h(160): error: invalid redeclaration of member function "std::binder2nd<_Operation>::operator()(const _Operation::first_argument_type &) const [with _Operation=std::function<void (const Foo &, int)>]" (declared at line 154)
operator()(typename _Operation::first_argument_type& __x) const
^
detected during instantiation of class "std::binder2nd<_Operation> [with _Operation=std::function<void (const Foo &, int)>]" at line 41 of "source.cpp"

compilation aborted for source.cpp (code 2) 
```

这里到底有什么问题。为什么不能绑定第二个参数？还是只是一些语法错误或什么？

如果有人需要，代码就在[这里。](http://liveworkspace.org/code/Hywls%240)

# wordpress - WordPress分页显示每个页面的相同结果

> ID：15937436
> 
> 赞同：3
> 
> 时间：2013-04-10T22:14:08.783
> 
> 标签：wordpress

我的网站的分页似乎为每个页面显示相同的结果。我相信这与我使用多个循环有关。我似乎无法让它为已分页的任何其他页面显示不同的帖子，例如：/page/2/ 或 /page/3/ 等等。

**循环一：**

```
<?php 
global $do_not_duplicate;
$do_not_duplicate = array();

    $my_query = new WP_Query('category_name=top-story&posts_per_page=1');
    while ($my_query->have_posts()) : $my_query->the_post();
        $do_not_duplicate[] = $post->ID;?>
        <div class="yl_bg_post main_content videos">
            <div class="top_story"><p>Top Story</p></div>
            <h2 class="title"><?php the_title(); ?></h2>
            <?php the_content('<p class="more">More></p>'); ?>
        </div>
<?php endwhile; ?> 
```

**循环二：**

```
<?php 
$my_query = new WP_Query('category_name=small-story&posts_per_page=1');
    while ($my_query->have_posts()) : $my_query->the_post();
        $do_not_duplicate[] = $post->ID;?>
        <div class="more_break">
        <?php
        $perma = get_permalink();
        echo "<a href='".$perma ."'>";
        the_content("") . "</a>";
        echo '<a href="' . $perma . '"><p class="more">More></p></a>';
        $count++;
        ?>
    </div>
    <?php endwhile; ?> 
```

**最终循环：**

```
while (have_posts()==the_post()) {
if (in_array($post->ID, $do_not_duplicate)) {} ?>
        <div class="yl_bg_post main_content videos">
        <h2 class="title"><?php the_title(); ?></h2>
    <?php the_content('<p class="more">More></p>'); ?>
</div>
<?php } ?> 
```

**分页：**

```
<?php
    global $wp_query;
    $total_pages = $wp_query->max_num_pages;    

    if ($total_pages > 1){
        $current_page = max(1, get_query_var('paged'));
        echo paginate_links(array(
            'base' => get_pagenum_link(1) . '%_%',
            'format' => 'page%#%',
            'current' => $current_page,
            'total' => $total_pages,
            'prev_text' => '',
            'next_text' => 'Next'
            ));
    }
?> 
```

我的网站所做的只是为每个页面显示相同的内容......我似乎无法找到解决这个问题的方法。如果我遗漏了什么，我深表歉意，如果我有，我会尽快添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:18:36.460

您还需要将`paged`参数传递到您的查询中。

```
$paged = max(1, get_query_var('paged'));
$my_query = new WP_Query('category_name=top-story&posts_per_page=1&paged='.$paged); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:21:16.123

您可以使用功能进行分页。这可能会有所帮助！

[http://design.sparklette.net/teaches/how-to-add-wordpress-pagination-without-a-plugin/](http://design.sparklette.net/teaches/how-to-add-wordpress-pagination-without-a-plugin/)

# java - Java String.split（正则表达式）不起作用

> ID：15937438
> 
> 赞同：3
> 
> 时间：2013-04-10T22:14:10.420
> 
> 标签：java, string

我想在每次有 a 时拆分一个字符串`|`，但该`split`方法只接受一个正则表达式。正则表达式`|`在每个字母之后拆分字符串，这不是我想要的。使用`\u007C`也做同样的事情。

我尝试使用`\|`，但这只是给了我：`Invalid escape sequence (valid ones are \b \t \n \f \r \" \' \\ )`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T22:16:41.743

你需要做这样的事情：

```
\\| 
```

原因是在正则表达式中为了“|” 被视为“|” 而不是作为正则表达式运算符，您需要“\”。但是在java中你不能只在字符串中写“\”，因为那是字符串中的保存操作符。所以你必须这样做`\\`。希望能解释一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:27:53.757

另一种建议是使用`Pattern.quote("|")`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T22:17:24.980

转义反斜杠。您在一个 Java 字符串中，它应该包含一个文字反斜杠。

```
"\\|" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T22:17:50.550

为我工作：

```
import java.util.Arrays;

public class Testing {
    public static void main(String[] args){
        String word= "abc|def";
        String[] splitted = word.split("\\|");
        System.out.println(Arrays.toString(splitted)); /* prints: [abc, def] */
    }
} 
```

# c# - 生成具有指定位长的盐

> ID：15937442
> 
> 赞同：2
> 
> 时间：2013-04-10T22:14:24.333
> 
> 标签：c#, passwords, cryptography, salt

我有一个应该为我生成 64 字节（512 位）盐的方法：

```
public static string GenerateSalt()
{
    var rngCrypto = new RNGCryptoServiceProvider();
    byte[] saltBytes = new byte[64];
    rngCrypto.GetBytes(saltBytes);

    string result = Convert.ToBase64String(saltBytes);

    return result;
} 
```

这似乎运行良好，`saltBytes`字节数组的大小为 64 字节。但是，我无法在包含`char(64)`类型列的 MS SQL 数据库表中输入结果。

我的假设是，该`Convert.ToBase64String(saltBytes);`方法对我来说是错误的，但我想知道如何改进它。快速浏览`System.Text.ASCIIEncoding.Unicode.GetByteCount(secondSalt);`显示字符串大小为 176 字节而不是 64 字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:18:49.877

当您从 64 字节（512 位）开始，然后转换为基数 64 时，每个字节仅存储 6 位，因此您需要上限（512/6）= 86 字节来存储结果（不确定您的 176字节来自虽然）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T22:20:44.357

字节数组在逻辑上是以 256 为基数的数字。将其转换为以 64 为基数的数字会使其更长。就像从十六进制 F0 转换为二进制 1111111100000000 一样，它会变长。

如果您想以人类可读的 base-64 编码字符串将 salt 存储在数据库中，那么它必须比 64 个单字节字符长得多。

至于通过 ASCII 编码器运行它——我不知道你想在这里做什么。对于非文本数据，这听起来很奇怪。你可以解释吗？

# php - 从 ncbi 拉取 xml RSS 提要

> ID：15937443
> 
> 赞同：0
> 
> 时间：2013-04-10T22:14:33.030
> 
> 标签：php, rss, ncbi

所以我有这个搜索[http://www.ncbi.nlm.nih.gov/pubmed/?term=Streptococcus+dysgalactiae+subspecies+equisimilis](http://www.ncbi.nlm.nih.gov/pubmed/?term=Streptococcus+dysgalactiae+subspecies+equisimilis)我想获取 rss 提要（不是手动），就像带有 xml 的字符串，但我想用 php 来做。我试图在 ncbi 上搜索一种方法，但我想我不太擅长它..

我必须在html中搜索href吗？或类似的东西[在网站上获取 RSS 提要](https://stackoverflow.com/questions/2074795/getting-rss-feeds-on-website)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:03:19.043

页面上不包含搜索的供稿 URL。单击“创建 RSS”会调用服务器以存储搜索词并返回带有新的`rss_guid`. 如果没有要调用的 API，则需要检查 JavaScript 并模拟浏览器单击该按钮。

（作为实现细节，`guid`即使搜索相同，站点也会返回不同的 s，这意味着每个“创建 RSS”都在创建一个新资源。）

# ruby-on-rails - 将 nginx 与 apache 与 unicorn 用于 rails 会不会很高效，还是会很慢？

> ID：15937444
> 
> 赞同：0
> 
> 时间：2013-04-10T22:14:35.340
> 
> 标签：ruby-on-rails, performance, apache, nginx, unicorn

对于我正在帮助架构师的应用程序，我们想使用 nginx + unicorn 作为我们服务器堆栈的一部分。我们听说过关于 nginx 提供静态文件的速度的好消息。不幸的是，我们的身份验证过程的一部分需要 apache 服务器。仍然使用 nginx 是否可以接受，但是在 nginx 和 unicorn 之间有 apache 或者这变得荒谬了？我不知道这会如何影响性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:41:00.063

如果您的应用程序*需要*Apache 才能运行，请使用 Apache。Apache 提供静态文件就好了。

一旦您的代码库稳定，请担心性能优化。十分之九，您的*代码*是性能问题的原因，而不是您选择的 Web 服务器，当然也不是它提供静态文件的能力。如果您提供的静态文件太多以至于性能受到关注，请将它们托管在外部（Amazon S3？）或使用 CDN。

# regex - 带有负前瞻的 Perl 正则表达式的行为异常

> ID：15937448
> 
> 赞同：2
> 
> 时间：2013-04-10T22:14:50.563
> 
> 标签：regex, perl, negative-lookahead

我正在尝试将 /ezmlm-(除 'weed' 或 'return')\s+/ 与正则表达式匹配。下面演示了一个做正确事情的 foreach 循环，以及一个几乎可以做的尝试的正则表达式：

```
#!/usr/bin/perl
use strict;
use warnings;

my @tests = (
    {  msg => "want 'yes', string has ezmlm, but not weed or return",
       str => q[|/usr/local/bin/ezmlm-reject '<snip>'],
    },
    {  msg => "want 'yes', array  has ezmlm, but not weed or return",
       str => [ <DATA> ],
    },
    {  msg => "want 'no' , has ezmlm-weed",
       str => q[|/usr/local/bin/ezmlm-weed '<snip>'],
    },
    {  msg => "want 'no' , doesn't have ezmlm-anything",
       str => q[|/usr/local/bin/else '<snip>'],
    },
    {  msg => "want 'no' , ezmlm email pattern",
       str => q[crazy/but/legal/ezmlm-wacky@example.org],
    },
);

print "foreach regex\n";
foreach ( @tests ) {
    print doit_fe( ref $_->{str} ? @{$_->{str}} : $_->{str} ) ? "yes" : "no";
    print "\t";
    print doit_re( ref $_->{str} ? @{$_->{str}} : $_->{str} ) ? "yes" : "no";
    print "\t<--- $_->{msg}\n";
};

# for both of the following subs:
#   @_ will contain one or more lines of data
#   match the pattern /ezmlm-(any word except 'weed' or 'return')\s+/

sub doit_fe {
    my $has_ezmlm = 0;
    foreach ( @_ ) {
        next if $_ !~ m/ezmlm-(.*?)\s/;
        return 0 if $1 eq 'weed' or $1 eq 'return';
        $has_ezmlm++;
    };
    return $has_ezmlm;
};

sub doit_re { return grep /ezmlm-(?!weed|return)/, @_; };

__DATA__
|/usr/local/bin/ezmlm-reject '<snip>'
|/usr/local/bin/ezmlm-issubn '<snip>'
|/usr/local/bin/ezmlm-send '<snip>'
|/usr/local/bin/ezmlm-archive '<snip>'
|/usr/local/bin/ezmlm-warn '<snip>' 
```

示例程序的输出如下：

```
foreach regex
yes yes <--- want 'yes', string has ezmlm, but not weed or return
yes yes <--- want 'yes', array  has ezmlm, but not weed or return
no  no  <--- want 'no' , has ezmlm-weed
no  no  <--- want 'no' , doesn't have ezmlm-anything
no  yes <--- want 'no' , ezmlm email pattern 
```

在最后一个例子中，正则表达式失败，匹配一个愚蠢但合法的电子邮件地址。如果我修改正则表达式，在负前瞻模式之后放置一个 \s，如下所示：

```
grep /ezmlm-(?!weed|return)\s+/ 
```

正则表达式根本不匹配。我认为它与负面模式的工作方式有关。我试过让否定变得不贪婪，但似乎有一些隐藏在“perldoc perlre”中的教训正在逃避我。是否可以使用单个正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:38:17.457

负前瞻是*零宽度*，这意味着正则表达式

```
/ezmlm-(?!weed|return)\s+/ 
```

仅当紧跟一个或多个空格字符时才会匹配`"ezmlm-"`。

图案

```
/ezmlm-(?!weed|return)/ 
```

将匹配

```
"crazy/but/legal/ezmlm-wacky@example.org" 
```

因为它`"ezmlm-"`后面不包含`"weedy"`or `"return"`。

尝试

```
/ezmlm-(?!weed|return)\S+\s+/ 
```

where`\S+`是一个或多个非空格字符（或者`[^@\s]+`如果您想拒绝电子邮件地址，即使后跟空格也可以使用）。

# c# - 如何在 StructureMap 2.6 中为插件设置会话范围？

> ID：15937449
> 
> 赞同：4
> 
> 时间：2013-04-10T22:14:58.453
> 
> 标签：c#, session, structuremap, session-scope

如何在 StructureMap 2.6 中为插件设置会话范围？

在以前的版本中，它是这样完成的：

```
For<ISomeObject>().CacheBy(StructureMap.InstanceScope.HttpSession).Use<SomeObject>(); 
```

但是，Visual Studio 会显示一条警告，告知该`CacheBy`方法已弃用，`LifecycleIs`可以改用该方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T07:16:53.463

2.6 中的语法是：

```
c.For<ISomeObject>().LifecycleIs(new HttpSessionLifecycle()).Use<SomeObject>(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T22:48:26.080

我相信这会成功：

```
 For<ISomeObject>()
        .HttpContextScoped()
        .Use<SomeObject>(); 
```

# .htaccess - 想通过 HTACCESS 重写 URL

> ID：15937451
> 
> 赞同：-1
> 
> 时间：2013-04-10T22:15:06.153
> 
> 标签：.htaccess, clean-urls

我确信这已经以其他形式被问过，但我不能像我这样的人在谷歌搜索/尝试几个小时后让这个东西工作。

我有一堆这样的网址：

```
www.yoursite.com/pic_box.php?pic=$ 
```

我想要的是所有 URL 都只能使用干净的 URL。

```
www.yoursite.com/your-title-here 
```

任何 htaccess 大师都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:24:20.593

在您的 .htaccess 中：

```
RewriteEngine on
RewriteRule ^picbox/(.*)$ /pic_box.php?pic=$1 [NC,L] 
```

将使您能够像这样重命名您的网址：www.yoursite.com/picbox/your-pic-id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:26:00.543

尝试将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /pic_box.php?pic=$1 [L] 
```

# lex - lex 程序中的“未定义定义”错误

> ID：15937453
> 
> 赞同：0
> 
> 时间：2013-04-10T22:15:12.113
> 
> 标签：lex, flex-lexer

我正在编写一个 lex 程序。这个问题的目的是我输入一个字符串 Example Name@PhoneNumber 并且名称中的第一个字母应该是大写字母

```
letterMin ([a-z])
letterMaj ([A-Z])
Letter ({letterMaj}({letterMin})*)
Number ([0-9])
Chaine ({letter}@({Number})*)
%%
{Chaine} printf("enter your chaine");
.* printf("Lexical Error");
%%
int yywrap(){return 1;}
main ()
{
yylex ();
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/V01UB.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:44:59.847

当涉及到符号名称时，大小写很重要。你想要这样的东西：

```
letterMin ([a-z])
letterMaj ([A-Z])
letter ({letterMaj}({letterMin})*)
Number ([0-9])
Chaine ({letter}@({Number})*) 
```

# jsp - 如何避免 JSP 中的递归和多重包含指令？

> ID：15937464
> 
> 赞同：1
> 
> 时间：2013-04-10T22:16:18.023
> 
> 标签：jsp, include

我有 4 个 jsp 文件和 1 个 js 文件：`index.jsp`、`connect.jsp`、`load1.jsp`、`load2.jsp`和`function.js`. 请参阅下面的代码以了解它们之间的关系。

索引.jsp

```
<%@include file = "load1.jsp" %>
<%@include file = "load2.jsp" %> 
```

连接.jsp

```
<%!
    public String makeConnection(){
        String str = "connect to database";
        return str;
    }
%> 
```

加载1.jsp

```
<%@include file = "connect.jsp" %>
<%
    out.print(makeConnection());
%>
<button onclick = "doXHR()">load2</button> 
```

加载2.jsp

```
<%@include file = "connect.jsp" %>
<%
    out.print(makeConnection());
%> 
```

函数.js

```
function doXHR(){
    ...
    xmlhttp.open("GET", "load2.jsp", true);
    ...
} 
```

请注意，这些代码不是实际代码，因为我必须使它更简单，以便我可以将它们发布在这里。问题是当我去的时候`index.jsp`，会有类似的错误`makeConnection() is already defined`。

如果我`<%@include file = "connect.jsp" %>`从中删除这一行`load2.jsp`，它会起作用，但如果我点击按钮，它会给出 500 状态代码，它的错误就像`cannot find symbol: method makeConnection()`。

我该如何解决这个问题？谢谢！

# android - 在使用 Robolectric 测试活动时模拟 SQLite 数据库

> ID：15937468
> 
> 赞同：7
> 
> 时间：2013-04-10T22:16:29.883
> 
> 标签：android, mockito, robolectric, roboguice

在过去的几天里，我开始玩 roboguice、robolectric 和 mockito。我有一个带有登录屏幕的小型 Android 应用程序，其中包含 AutoCompleteTextView 以便更快地输入用户名。AutoCompleteTextView 的用户名存储在 sqlite 数据库中。

```
public class MainActivity extends RoboActivity implements View.OnClickListener {
@InjectView(R.id.startScreen_Login_Button) private Button loginButton;
@InjectView(R.id.startScreen_Cancel_Button) private Button cancelButton;
@InjectView(R.id.startScreen_forgotPwd_TextView) private TextView forgotPWTextView;
@InjectView(R.id.startScreen_Username_AutoCompleteTextView) private AutoCompleteTextView loginUsernameAutoCompleteTextView;
@InjectView(R.id.startScreen_Password_EditText) private EditText loginPasswordEditText;
@Inject private SharedPreferences sharedPreferences;
@Inject SQLiteDBAdapter dbAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    loginButton.setOnClickListener(this);
    cancelButton.setOnClickListener(this);
    forgotPWTextView.setOnClickListener(this);

    // Creating List for startScreen_Username_AutoCompleteTextView
    List<User> userList = dbAdapter.getUserList();
    ListIterator<User> it = userList.listIterator();
    List<String> userStringList = new ArrayList<String>();
    User user;
    while (it.hasNext()) {
        user = it.next();
        userStringList.add(user.getName());
    }

    loginUsernameAutoCompleteTextView.setAdapter(new ArrayAdapter<String>(this, R.layout.select_page_row, userStringList));
    }
...
} 
```

我想使用 robolectric 测试 MainActivity，尝试用 mockito 模拟数据库。这是我的测试课：

```
@RunWith(CustomRobolectricTestRunner.class)
public class MainActivityTest {

@Mock
SQLiteDBAdapter dbAdapter;

@Before
public void setUp() throws Exception {
    MockitoAnnotations.initMocks(this);
}

@Test
public void shouldHaveApplicationName() throws Exception {
    String appName = new MainActivity().getResources().getString(R.string.app_name);
    assertThat(appName, equalTo("OperationReport"));
}

@Test
public void testButtonsVisible()
{
    MainActivity mainActivity = new MainActivity();
    mainActivity.onCreate(null);
}
} 
```

调用 mainActivity.onCreate(null); 正在启动错误级联，以行结束 Cursor cursor = db.rawQuery(SQL_QUERY, null); 我的 SQLiteDBAdapter 中的 getUserList 方法：

```
public List<User> getUserList() {
    SQLiteDatabase db = getReadableDatabase();
    List<User> userList = new ArrayList<User>();

    String SQL_QUERY = "SELECT * FROM User;";
    Cursor cursor = db.rawQuery(SQL_QUERY, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        User user = new User();
        user.setUserUUID(cursor.getString(0));
        user.setName(cursor.getString(1));
        user.setPassword(cursor.getString(2));
        user.setDateOfBirth(cursor.getString(3));
        user.setStaffNumber(cursor.getString(4));
        user.setActive(cursor.getInt(5));
        user.setUserClass(cursor.getInt(6));
        userList.add(user);
        cursor.moveToNext();
    }
    cursor.close();
    db.close();
    return userList;
} 
```

我读到，一个 Mock 正在返回 void 方法的空存根，并在任何其他方法上返回 null。当我在模拟 SQLiteDBAdapter 类时，我期望在模拟的 SQLiteDBAdapter 上调用 getUserList 会返回 null。我不太清楚，为什么他要访问原始方法。我猜它仍然使用原始的 SQLiteDBAdapter 而不是 Mock。我该怎么做才能解决这个问题，它是如何工作的？我的想法用完了，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:18:29.363

模拟数据库来测试 DAO 对我来说毫无意义。你在测试什么？数据库。为什么要消除它？

一旦所有的 DAO 测试都通过了，那么模拟数据库就很有意义，并且是时候测试使用它来完成工作单元的服务了。您已经测试了 DAO 和数据库，并且您的服务单元测试不必是集成测试。在那种情况下一定要嘲笑。

我不太了解你在嘲笑什么，但是当我嘲笑它是为了我制作的界面。模拟为我的客户端/测试正在使用的接口类型引用提供了一个替代实现。

如果您尝试模拟一个具体的类，我建议将该适配器包装在基于接口的实现中。这将是一个更好的抽象，并且您可以更轻松地模拟您的界面。

# java - Swing UIManager 默认系统外观

> ID：15937472
> 
> 赞同：1
> 
> 时间：2013-04-10T22:16:44.553
> 
> 标签：java, swing, user-interface, look-and-feel

我正在编写一个 Java 应用程序，并使用`UIManager`Swing 给它一个自定义的外观和感觉。有一个名为的方法`UIManager.getSystemLookAndFeelClassName()`返回系统的默认外观。我想知道它默认返回什么外观，当没有检测到系统外观时，它是Java本身的Metal外观吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:22:25.553

请参阅该功能的文档 [`UIManager`](http://docs.oracle.com/javase/7/docs/api/javax/swing/UIManager.html)：：

> 如果有，则返回实现本机系统观感的 LookAndFeel 类的名称，否则返回默认的跨平台 LookAndFeel 类的名称。可以通过设置`swing.systemlaf`系统属性来覆盖此值。

另请参阅`getCrossPlatformLookAndFeelClassName()`同一文档页面。

# asp.net-mvc - 如何从控制器访问视图页面？

> ID：15937477
> 
> 赞同：0
> 
> 时间：2013-04-10T22:17:12.353
> 
> 标签：asp.net-mvc

我的任务是将旧的 ASPX 应用程序移植到 .NET MVC，然后对其进行一些工作。

这充满了危险。我最大的麻烦是 APSX 事件不会在这个框架中传播（对 aspx.cs 文件使用 ViewPage - MVC 4 需要它）

IE - 带有已定义点击事件的 asp:Button 将不再触发该点击事件。

引发这个特定问题的原因是 - 我有一个 asp:table，当控制器中发生某些操作时，我想重新加载它。在文件后面的代码中，我有一个处理它的方法，它是从 Page_Load 调用的，很好。

但是在控制器中，我需要找到一种方法来获取该页面本身的句柄并调用该方法。我可以获得页面的新实例，但该实例不会使表已经实例化。

如何在控制器中获取为该方法创建的 ViewPage？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:27:16.930

你不能那样想MVC。当您想到 ASP.NET 时，没有您想到的单击事件。

阅读这些

[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

[http://www.w3schools.com/aspnet/mvc_intro.asp](http://www.w3schools.com/aspnet/mvc_intro.asp)

你可能会和他们一起找到一些快乐

这些也会有帮助

[从 ASP.NET WebForms 迁移到 MVC](https://stackoverflow.com/questions/8522841/migrating-from-asp-net-webforms-to-mvc)

以及[将旧版 ASP.NET 迁移到 MVC 2 (RC)：HttpApplication 事件未触发，用户主体为空](https://stackoverflow.com/questions/1979066/migrating-legacy-asp-net-to-mvc-2-rc-httpapplication-events-not-firing-user)

# c++ - 视频捕获应用程序不适用于 DirectShow 兼容设备

> ID：15937479
> 
> 赞同：0
> 
> 时间：2013-04-10T22:17:20.433
> 
> 标签：c++, directshow, video-capture

我使用 videoInput 库（使用 DirectShow）在 Windows 7 上使用 Qt 在 C++ 中开发了一个视频捕获应用程序。我的应用程序适用于我之前尝试过的所有设备（一些内置捕捉设备、网络摄像头、Pinnacle Dazzle DVC 100、Pinnacle Studio 电影盒，甚至是有问题的 PixelView PlayTV USB Hybrid），但现在我购买了 AVerMedia DarkCrystal HD Capture Station（为了支持高清拍摄），它根本无法工作。

根据圆刚网站的说法，它完全兼容 DirectShow，我什至不需要使用它的 SDK。我按照制造商的安装说明进行操作，并且可以使用它自己的捆绑软件（TotalMedia Studio MV）来捕捉视频，所以我想它工作正常。

我尝试运行基于 videoInput 的应用程序以及 AmCap（来自 Microsoft 的 DirectShow 示例），它们的行为方式相同。他们能够找到该设备，检索其友好名称，但没有别的。AmCap 说`Error 80004002: Cannot find VCapture:IAMStreamConfig`。

我在调试 AmCap，发现`ICaptureGraphBuilder2::FindInterface`方法总是返回`E_NOINTERFACE`，即不支持这样的接口，如下所示：

```
hr = gcap.pBuilder->FindInterface(&PIN_CATEGORY_CAPTURE,
                                      &MEDIATYPE_Video, gcap.pVCap,
                                      IID_IAMStreamConfig, (void **)&gcap.pVSC); 
```

这里，`gcap.pBuilder`是指向 的指针`ICaptureGraphBuilder2`，`gcap.pVCap`是指向 的指针`IBaseFilter`，`gcap.pVSC`是指向`IAMStreamConfig`并且应该接收返回值的指针。

我想有一些解决方法可以帮助我从这个设备中捕获，因为我可以成功地检索设备名称（使用`ICreateDevEnum::CreateClassEnumerator`基于`CLSID_VideoInputDeviceCategory`类标识符的方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:29:26.447

没有实现的视频捕获设备`IAMStreamConfig`是一种可能的情况，尽管它不是预期的。实际上，它更像是视频设备或底层驱动程序上的错误，但是您可能希望更新您的应用程序以使用默认媒体类型以防丢失`IAMStreamConfig`（您仍然可以使用 GraphEdit 检查设备是否可操作）。

# javascript - 如何获取具有特定名称的所有输入？

> ID：15937481
> 
> 赞同：0
> 
> 时间：2013-04-10T22:17:24.600
> 
> 标签：javascript, jquery

我有一个带有一堆文本输入的表单，如下所示：

```
<input type="text" name="option[]" value="option 1" onBlur="outputOptions()">
<input type="text" name="option[]" value="option 2" onBlur="outputOptions()">
<input type="text" name="option[]" value="option 3" onBlur="outputOptions()"> 
```

我希望能够获得所有输入的值，所以我尝试这样做：

```
function outputOptions()
{
    console.log("inside outputOptions");

        $("input[name=option]").each(
            function() {
                console.log("option value: " + $(this).value);
            }
        );
} 
```

在我的站点上，结果是当我单击输入和输出文本输入时，我看到“在 outputOptions 内”，但没有打印出任何文本输入值。

我究竟做错了什么？

JSFiddle：http: [//jsfiddle.net/6zguZ/2/](http://jsfiddle.net/6zguZ/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T22:18:31.280

您以错误的方式获得价值：

```
 console.log("option value: "  + this.value); 
```

如果你*真的*想使用 jQuery，你会这样做：

```
 console.log("option value: " + $(this).val()); 
```

但没有理由这样做。

您还需要使用实际名称进行选择：

```
 $('input[name="option[]"]').each( 
```

jQuery 选择不匹配任何元素并不是错误，因此您不会收到类似的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:20:48.450

试试这个[香草 JS](http://vanilla-js.com/)：

```
var inputs = document.getElementsByName("option[]"), l = inputs.length, i;
for( i=0; i<l; i++) {
    console.log(inputs[i].value);
} 
```

编辑：这是一个[速度测试](http://jsperf.com/jquery-js-name)，说明为什么这比 jQuery 更好。

# python - 使用xlrd在Python中访问Excel电子表格的命名范围交集的值？

> ID：15937493
> 
> 赞同：1
> 
> 时间：2013-04-10T22:18:15.767
> 
> 标签：python, excel, xlrd

在 Excel VBA 中，您可以使用 Intersect 函数返回一个范围对象，该对象是参数的交集。然后，您可以像这样从中获得价值。

```
Intersection("Name1", "Name2").Value 
```

在标准单元格公式中，您可以执行相同的操作：

```
=Name1 Name2 
```

如何使用 xlrd 完成此操作？我已经尝试通读 Name 类，area2d 看起来就像我将要使用的那样，但我不知道如何将它们联系在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:31:03.230

据我所知，`xlrd`本身并不支持这种交集功能。对于您描述的各种矩形范围，您可以使用`Name`该类相当容易地计算交集，就像您已经建议自己一样。

`xlrd-0.9.0`我使用的发行版`Python 2.7.2`有一个目录`examples`，显示如何使用命名范围。它附带的文件`namesdemo.xls`是旧版本 Excel 的工作簿（它说 version `97-2004`）。

使用该文件来确定调用范围内的单元格的示例`Sales`如下：

```
>>> import xlrd
>>> book=xlrd.open_workbook('namesdemo.xls')
>>> nameObj = book.name_and_scope_map.get(('sales', -1))
>>> nameObj.area2d()[1:5]
(1, 2, 1, 14)
>>> nameObj.result.text
u'Sheet3!$B$2:$N$2' 
```

您可以解析最后一个结果以获取范围内单元格的矩形，或使用函数`[1:5]`返回的元组中的元素`area2d()`——它们表示矩形的`rowxlo`、`rowxhi`和。对另一个范围做同样的事情，然后你可以“手动”将它们相交。`colxlo``colxhi`

`'sales'`请注意对的调用中的小写名称`name_and_scope_map.get()`。这是必需的，因为 Excel 没有区分大小写的范围名称。该`-1`参数指示它应该在所有工作表上全局搜索名称。

如果以较新的 Excel`.xlsx`格式保存，该`Name`对象的行为似乎略有不同：

```
>>> book=xlrd.open_workbook('namesdemo.xlsx')
>>> nameObj = book.name_and_scope_map.get(('sales', -1))
>>> nameObj.formula_text
u'Sheet3!$B$2:$N$2' 
```

在这种情况下，我还没有找到任何方法可以通过以下方式访问任何实际坐标`area2d()`：

```
>>> nameObj.area2d()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/xlrd/book.py", line 291, in area2d
    self.dump(self.book.logfile,
AttributeError: 'NoneType' object has no attribute 'logfile' 
```

所以看起来您需要解析`formula_text`字符串或查看源代码`xlrd`以查看是否可以修复它:-)

示例脚本`xlrdnameAPIdemo.py`提供了更多解释，例如关于如何在特定范围/工作表中查找命名范围。

# default - 如何在 C 中重置值并重新启动程序

> ID：15937497
> 
> 赞同：0
> 
> 时间：2013-04-10T22:18:26.763
> 
> 标签：default, reset, restart

我想知道是否可以重置程序中的所有值，以便当我调用 main() 重新启动程序时，所有整数和数组都恢复为默认值。

谢谢大家！

PS 我在我的 main() 之上声明了我的所有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:21:46.493

不，您必须手动执行此操作，因为您使用的是全局变量。

# c# - 表单身份验证 - 访问用户数据

> ID：15937506
> 
> 赞同：1
> 
> 时间：2013-04-10T22:18:57.207
> 
> 标签：c#, asp.net, forms-authentication

在使用表单身份验证时，我很难理解如何访问特定的用户数据。

我已经为用户和管理员设置了表单身份验证。

当用户尝试登录时，运行代码如下：

```
 protected void buttonLogIn_Click(object sender, EventArgs e)
    {
        string email = TextBoxEmail.Text.Trim();
        string password = TextBoxPassword.Text.Trim();
        UserType userType = UserType.User; //temporary value
        string firstName = string.Empty;
        string lastName = string.Empty;
        bool success = DBAppLayer.AuthenticateLogIn(email, password, out userType, out firstName, out lastName);
        if (success == true)
        {
            Session.Add("email", email);
            Session.Add("firstname", firstName);
            Session.Add("lastname", lastName);

            switch (userType)
            {
                case DBDataLayer.UserType.User:
                    FormsAuthenticationUtil.SetAuthCookie(email, "User,", false);
                    Response.Redirect("~/User/UserDashboard.aspx", false);
                    break;
                case DBDataLayer.UserType.Admin:
                    FormsAuthenticationUtil.SetAuthCookie(email, "Admin", false);
                    Response.Redirect("~/AdminArea/AdminDashboard.aspx", false);
                    break;
            }
        }
        else
        {
             labelError.Text = "Bad username/password.";
        }
    } 
```

这成功地将用户重定向到他们的仪表板。现在当用户在 /User/UserDashboard.aspx 中时，我想显示存储在数据库中的用户个人资料信息，例如用户的工作和年龄。

问题是，我不确定如何在 UserDashboard.cs 中访问此特定用户的数据。我需要创建身份验证票吗？如果是这样，我会在登录页面中执行此操作吗？

任何链接或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:25:00.667

当您创建身份验证 cookie 时，您的调用似乎作为用户 ID`FormsAuthenticationUtil.SetAuthCookie`传入。`email`在您的用户仪表板页面中，该`User.Identity.Name`字段将为您返回相同的电子邮件地址。使用该值调用您的数据库并获取用户的个人资料。

您还将电子邮件地址存储在其中，`Session`以便您也可以从那里获取它。

# python - 将类方法绑定到外部函数

> ID：15937507
> 
> 赞同：3
> 
> 时间：2013-04-10T22:18:59.067
> 
> 标签：python, oop, methods

尝试将类方法绑定到函数时出现错误。为什么？

```
def foo():
    print "Hello world"

class something(object):
    bar = foo

test = something()
test.bar()

TypeError: foo() takes no arguments (1 given) 
```

另外，如果我无法修改`foo`，我可以从类定义中进行这种调整吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T22:31:58.560

一种简单的方法是将函数包装在`staticmethod`内部 A 中：

```
class A():
    bar = staticmethod(foo)

>>> test = A()
>>> test.bar()
Hello world 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T22:22:07.800

python 中的类方法总是至少需要一个参数，通常称为`self`. 此示例取自[官方 Python 教程](http://docs.python.org/3/tutorial/classes.html#random-remarks)：

```
# Function defined outside the class
def f1(self, x, y):
    return min(x, x+y)

class C:
    f = f1
    def g(self):
        return 'hello world'
    h = g 
```

请注意，这两种方法，无论它们是在类外部还是内部定义，都`self`作为参数。

**编辑：**如果你真的不能改变你的`foo`功能，那么你可以这样做：

```
>>> def foo():
...     print "Hello World"
...
>>> class something(object):
...     def bar(self): foo()
...
>>> test = something()
>>> test.bar()
Hello World 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T22:21:51.050

当您以这种方式调用类方法时，您将类实例作为第一个参数传递。当你打电话时`test.bar`，实际上发生的事情更像是`bar(test)`。您将参数传递给该方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T22:22:10.253

请记住，当 python 类调用其中一个方法时，它将传入一个`self`参数。您需要在代码中考虑到这一点：

```
def foo(self):
    print ("Hello world")

class something(object):
    bar = foo

test = something()
test.bar() 
```

[您可以在Python 文档](http://docs.python.org/2/tutorial/classes.html)中阅读所有关于类的信息

`self`我能想到的不传递 a 的最简单解决方法是：

```
def foo():
    print ("Hello world")

class something(object):
    bar = [foo] # contains pointer to static method

test = something()
test.bar[0]() # calls the static method 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T22:22:39.463

类方法都有类实例的第一个参数。所以在你的函数中添加一个参数，它就可以工作了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T22:31:48.227

初始 def 创建一个名为 的函数对象`foo`。由于它在任何类之外，它只是一个不带参数的函数。赋值`bar = foo`只是为`test.bar`同一个函数对象赋予了新名称。然而， call`test.bar()`假定 bar 是一个类方法，并将对象`test`作为第一个参数传递给方法（您通常会调用的那个`self`）。您可以将其作为静态方法调用，但`something.bar()`不会出现错误。

# python - 使用python的webbrowser模块点击链接

> ID：15937508
> 
> 赞同：2
> 
> 时间：2013-04-10T22:19:20.350
> 
> 标签：python, module, click, browser, hyperlink

我想让python根据我输入的url点击特定链接：

```
webbrowser.open('www.website.com.') 
```

为了做到这一点，我正在考虑使用 BeautifulSoup 来收集 html 中以“website.com”开头的 url，并将其放入：

```
webbroswer.open_new_tab('www.website.com/next_link') 
```

但是，理想情况下，我想模拟对这些链接的实际点击。

这可能吗？

编辑：根据我对 Selenium 的了解，我需要记录我希望在网站上执行的操作：单击链接并在这些页面上停留一段时间。正如我上面所说，我想要的功能是让我的浏览器根据我放入程序中的原始 url 单击链接。我还希望我的浏览器在标签上停留 30 秒到 1 分钟之间的随机时间。硒能够做这些事情吗？还是我必须为每个网站制作不同的录音？

# symfony - 给定类型为“Doctrine\Common\Collections\Collection”、“Proxies\__CG__\MyBundle\Entity\MyEntity”的预期参数

> ID：15937509
> 
> 赞同：2
> 
> 时间：2013-04-10T22:19:22.420
> 
> 标签：symfony

我正在尝试解决这个问题：

> 给定类型为“Doctrine\Common\Collections\Collection”、“Proxies__CG__\MyBundle\Entity\MyEntity”的预期参数

我尝试了很多没有解决方案的事情。当我尝试这个时我明白了：

```
$userCollection = $this->createForm(new UserCollectionType(), $userEvalClass); 
```

**用户集合类型**

```
class UserCollectionType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('users', 'entity', array(
                'label' => 'Evaluateurs',
                'empty_value' => '',
                'expanded' => false,
                'multiple' => true,
                'class' => 'EvalFour\UtilisateurBundle\Entity\Utilisateur',
                utilisateurs
            )
        );
    }

    public function getName()
    {
        return 'user_collection';
    }
} 
```

**用户集合**

```
class UserCollection    
{
    public $users;

    public function __construct($users){
        $this->users = $users;
    }
    public function getUsers(){
        return $this->users;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:36:12.107

在您的 buildForm 函数中，设置`'multiple' => false,`

当您将其设置为 true 时，它​​需要一个实体集合，而不仅仅是一个实体。

如果您确实想拥有多个用户，请替换`'entity'`为`'collection'`

# arrays - 使用变量名称将影片剪辑加载到使用 As3 的舞台

> ID：15937510
> 
> 赞同：0
> 
> 时间：2013-04-10T22:19:24.873
> 
> 标签：arrays, actionscript-3, class

我创建了一个拼写难题，它将文件`AS3`中的单词列表加载`XML`到`Array`.

当代码循环遍历数组时，它将每个单词分配给一个名为“current_word”的变量，然后打乱“current_word”的字母并将它们显示在舞台上。

我想添加一个动画`MovieClip`作为视觉辅助，其类名与当前单词的值匹配。

例如，如果当前单词是“bear”，则`MovieClip`类名为“bear”的 a 从库加载到阶段。

我试图创建一个名为“tempItemClip”的空影片剪辑，并用`var current_word`.

没有错误，但它不起作用。我是 ActionScript 的新手。有人可以建议我最好的解决方案吗？

```
 public function getWord() 
  {

     current_word=pWord[ques_num];
     setTiles(current_word.length);
     ques_num++;
     trace(current_word);

     var tempItemClip:MovieClip = new MyItem();
     Puzzle_screen.addChildAt(tempItemClip,4);
     tempItemClip.x=380;
     tempItemClip.y=130;

     //var myClip:Object = getDefinitionByName(current_word);

     var myClip:MovieClip = new MovieClip();
     tempItemClip[current_word] = myClip;
     tempItemClip.addChild(myClip);

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:36:49.003

目前尚不清楚您在问什么，但我相信这就是您想要的：

```
var clipClass:Class = getDefinitionByName(current_word) as Class;
var myClip:MovieClip = new clipClass(); 
```

# mysql - 在 MySQL INSERT 期间从其他数据集中检索值

> ID：15937511
> 
> 赞同：0
> 
> 时间：2013-04-10T22:19:25.927
> 
> 标签：mysql, sql

我有一个包含两个整数列的表。一个自增索引号和编号。

我想要做的是插入一个新行并使用具有最高索引号的行的数值。

我想象这样的事情：

```
INSERT INTO `table`( `number`) VALUES (select `number` from `table` ORDER BY `index` DESC LIMIT 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:24:06.923

我认为您发布的查询会起作用。这是另一种方法：

```
INSERT INTO `table`(`number`)
  SELECT MAX(`number`)
  FROM `table`
  WHERE `index` = (SELECT MAX(`index`) FROM `table`) 
```

我不确定它是否更快，但您可以验证这一点。

例如，如果最大值是 999 并且多于一行的值是 999 ，`SELECT MAX(number)`则可以防止返回多个值。`index``index`

# mysql - mysql从每个组中选择3个项目并在多列中输出结果集

> ID：15937514
> 
> 赞同：1
> 
> 时间：2013-04-10T22:20:04.323
> 
> 标签：mysql

我有一个像这样的表“产品”：

```
store_id    product
----------------------------------
1           A
1           B
1           C
1           D
1           E
2           AA
2           BB
2           CC
2           DD 
```

从每个商店随机选择 3 种产品的 mysql 查询是什么，并将产品放在每个商店自己的列上，所以我得到如下结果集：

```
store_id    product_1    product_2    product_3
------------------------------------------------
1           A            D            E
2           BB           CC           DD 
```

？？？

谢谢，

普通男孩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:48:58.307

这应该会给你你需要的结果：

```
SELECT
  store_id,
  MAX(CASE WHEN row=1 THEN product END) product_1,
  MAX(CASE WHEN row=2 THEN product END) product_2,
  MAX(CASE WHEN row=3 THEN product END) product_3
FROM (
  SELECT
    CASE WHEN @last=store_id THEN @row:=@row+1 ELSE @row:=1 END row,
    store_id,
    product,
    @last := store_id
  FROM (
    SELECT store_id, product
    FROM products
    ORDER BY store_id, rand()
    ) s
) r
WHERE
  row<=3
GROUP BY
  store_id 
```

请[在此处](http://sqlfiddle.com/#!2/e4f94/1)查看小提琴。

在 s 子查询中，我按 store_id 排序所有产品，然后按随机排序，在 r 子查询中，我正在计算行号，在外部查询中，我正在旋转结果（我按 store_id 分组，我'将第 1 行放入 product_1 列，将第 2 行放入 product_2 第 3 行放入 product_3）。

# linux - 无法打开流：打开的文件太多

> ID：15937515
> 
> 赞同：3
> 
> 时间：2013-04-10T22:20:07.110
> 
> 标签：linux, logging, php

我正在为在共享主机中运行的客户端编写 PHP CLI 脚本。它使用一个简单的函数记录到一个文件，例如：

```
function log_entry($msg) {
    global $log_file, $log_handle;
    $msg =  "[".date('Y-m-d H:i:s')."] ".$msg."\n";
    echo $msg;
    $log_handle = fopen($log_file, 'a');
    fwrite($log_handle, $msg);
} 
```

我得到这个错误：

```
PHP Warning:  fopen(./logs/sync.20130410.log) 
[<a href='function.fopen'>function.fopen</a>]: failed to open stream: 
Too many open files in ./functions.php on line 61 
```

我认为使用相同的句柄存在问题，所以我将其更改为：

```
function log_entry($msg) {
    global $log_file;
    $msg =  "[".date('Y-m-d H:i:s')."] ".$msg."\n";
    echo $msg;
    $log_handle = fopen($log_file, 'a');
    fwrite($log_handle, $msg);
    fclose($log_handle);
} 
```

但这没有用。我总是在同一日志行中收到错误。当我这样做时，`ulimit -n`我得到 1024，但这应该不是问题，因为我从不打开多个文件。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T22:53:24.203

发现了问题。我正在回答这个问题，以防万一有人出于同样的原因使用谷歌搜索，但我知道这个答案并未包含在问题中。

我正在使用 BigCommerce API 客户端，结果发现他们正在为每个请求打开一个句柄并使我的脚本崩溃。这是我修复它的方法：

BigCommerce/API/Connection.php:354-365:

```
public function put($url, $body)
{
    $this->addHeader('Content-Type', $this->getContentType());

    if (!is_string($body)) {
        $body = json_encode($body);
    }

    $this->initializeRequest();
    $handle = tmpfile();
    fwrite($handle, $body);
    fseek($handle, 0);
    curl_setopt($this->curl, CURLOPT_INFILE, $handle);
    curl_setopt($this->curl, CURLOPT_INFILESIZE, strlen($body));

    curl_setopt($this->curl, CURLOPT_URL, $url);
    curl_setopt($this->curl, CURLOPT_PUT, true);
    curl_exec($this->curl);
    fclose($handle); // Added this line

    return $this->handleResponse();
} 
```

（添加`fclose($handle);`）行。

# python - Python逐行读取或存储html源代码

> ID：15937519
> 
> 赞同：0
> 
> 时间：2013-04-10T22:20:18.373
> 
> 标签：python, html, python-3.x

我刚开始学习python 3。（我正在阅读python书，我有问题......）

我有问题要阅读并从 html 源代码中查找关键字。

我写了打开网址的代码。例如，

```
page =urllib.request.urlopen(some url)
text = page.read().decode("utf8") 
```

因此，我假设文本包含所有 html 代码并且文本是对象。

问题 1\. 我想用某种数组或数组列表来存储 html 源代码。但是，我不确定如何从“文本”对象中获取代码行并将其存储到某种数组中。

问题2.python是否有“包含”功能可以从数组中找到“堆栈溢出”等特殊关键字？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:29:25.290

如果您想解析整个 HTML 文档结构，请不要尝试自己编写所有程序 - 就像 Allendar 所说的那样，使用库来处理它。

如果您只想在文本中搜索和查找特定内容，请使用正则表达式（“re”模块）。

在传统意义上的行（CR/LF）中谈论 HTML 的“行”是没有意义的。整个页面可以在一行中。构成 HTML 的是标签，而不是行。

# c++ - constexpr 数组和 std::initializer_list

> ID：15937522
> 
> 赞同：7
> 
> 时间：2013-04-10T22:20:33.967
> 
> 标签：c++, c++11, compile-time, initializer-list, constexpr

我试图编写一个可以像这样使用的编译时 valarray：

```
constexpr array<double> a = { 1.0, 2.1, 3.2, 4.3, 5.4, 6.5 };

static_assert(a[0] == 1.0, "");
static_assert(a[3] == 4.3, "");

static_assert(a.size() == 6, ""); 
```

我设法通过以下实现来做到这一点，并且效果很好（使用 GCC 4.7）：

```
#include <initializer_list>

template<typename T>
struct array
{
    private:

        const std::size_t _size;
        const T* _data;

    public:

        constexpr array(std::initializer_list<T> values):
            _size(values.size()),
            _data(values.begin())
        {}

        constexpr auto operator[](std::size_t n)
            -> T
        {
            return _data[n]
        }

        constexpr auto size() const
            -> std::size_t;
        {
            return _size;
        }
}; 
```

即使它对我来说效果很好，但我不确定它的行为`std::initializer_list`并且可能会使用一些未定义的行为。

`constexpr`对于`std::initializer_list`构造函数，`begin`即使`size`它不是严格意义上的 C++11 也很好，因为 N3471 最近被采用并达到了标准。

关于未定义的行为，我不确定底层数组是否`std::initializer_list`会存活，是否有办法让它比`array's`构造函数存活得更久。你怎么看？

**编辑：**我可能不清楚，但我并不真正关心实际的数组。我真正感兴趣的是`std::initializer_list`编译时的行为及其底层数组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T23:17:56.543

您当前的代码*不应*根据当前的 C++11 规则进行编译。使用[clang 3.2 编译时，](http://liveworkspace.org/code/3TRNX4%247)出现以下错误：

```
source.cpp:33:28: error: constexpr variable 'a' must be initialized by a constant
expression 
constexpr array<double> a = { 1.0, 2.1, 3.2, 4.3, 5.4, 6.5 };
                        ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

这是因为`std::initializer_list`s ctors 和成员函数`begin`并`end`没有被标记`constexpr`。然而，[已经有一个改变这一点的提议](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3471.html)。顺便说一句，libstdc++ 已经将这些标记为`constexpr`.

现在下一个问题是底层数组的**生命周期**`std::initializer_list`。这在 8.5.4p6 中有解释：

> 该数组与任何其他临时对象 (12.2) 具有相同的生命周期，除了从数组初始化 initializer_list 对象会延长数组的生命周期，就像将引用绑定到临时对象一样。

这意味着底层数组与`values`对象具有相同的生命周期，并且在`array`构造函数结束时退出。因此，`_data`指向过期的内存并且`_data[n]`是未定义的行为。

# asp.net - 使用中继器在 HTML 表中生成列

> ID：15937529
> 
> 赞同：1
> 
> 时间：2013-04-10T22:20:48.817
> 
> 标签：asp.net, repeater, html-table

我需要将两个单独查询的结果显示为同一个 html 表中的并排列。这两个数据集中的每一个都来自通过 ASP.NET SqlDataSource 的存储过程，并且它们各自返回相同数量的行。我希望输出看起来像这样：

```
 <table>
   <tr>
    <td>Row 1 from Stored Procedure 1</td>
    <td>Row 1 from Stored Procedure 2</td>
   </tr>
   <tr>
    <td>Row 2 from Stored Procedure 1</td>
    <td>Row 2 from Stored Procedure 2</td>
   </tr>
   ...
   <tr>
    <td>Row n from Stored Procedure 1</td>
    <td>Row n from Stored Procedure 2</td>
   </tr>
 </table> 
```

是否可以使用“交替行”功能在单个 ASP 中继器控件中完成此操作？是否可以并排执行两个 ASP 中继器？是否有其他控件可以完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:34:32.700

我不认为这是可能的桌子。

你可以这样做：

```
<div style="width:500px;float:left;">
    <asp:Repeater ID="Repeater1">
        <div style="width:100%;height:25px;"><asp:Label ID="RowDataLabel"></asp:Label></div>
    </asp:Repeater>
</div>
<div style="width:500px;float:left;">
    <asp:Repeater ID="Repeater2">
        <div style="width:100%;height:25px;"><asp:Label ID="RowDataLabel"></asp:Label></div>
    </asp:Repeater>
</div> 
```

（我知道我缺少一些标记）

这实际上如何呈现将取决于每行中的数据有多少和有多相似。一个非常长的数据可能会影响整个布局。如果你对 css 有问题，你也可以使用`<ul>`'s 而不是's。`<div>`

另一种选择是在代码中获取两个数据集，使用 LINQ 组合它们，然后将单个组合数据集呈现到网格或中继器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:20:31.520

由于两个 DataTable 具有相同的行数，您可以将第一个表设置为数据源并使用`e.Item.ItemIndex`.

所以这将是你的`Repeater`标记：

```
<asp:Repeater ID="rptData" runat="server" OnItemDataBound="rptData_ItemDataBound">
    <HeaderTemplate>
        <table border="1" >
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td><asp:Label ID="lblFirst" runat="server" /></td>
            <td><asp:Label ID="lblSecond" runat="server" /></td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

你会这样处理`OnItemDataBound`：

```
protected void rptData_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        ((Label)e.Item.FindControl("lblFirst")).Text = ((DataRowView)e.Item.DataItem)["Value"].ToString();
        ((Label)e.Item.FindControl("lblSecond")).Text = this.dtSecond.Rows[e.Item.ItemIndex]["Value"].ToString();
    }
} 
```

这是其余的代码隐藏，所以你有一个完整的工作示例：

```
//PAGE-LEVEL VARIABLES
DataTable dtFirst = new DataTable();
DataTable dtSecond = new DataTable();

protected void Page_Load(object sender, EventArgs e)
{
    this.PopulateDatasources();
    this.rptData.DataSource = this.dtFirst;
    this.rptData.DataBind();
}

private void PopulateDatasources()
{
    DataRow row = null;
    dtFirst.Columns.Add(new DataColumn("Value"));
    dtSecond.Columns.Add(new DataColumn("Value"));
    row = dtFirst.NewRow();
    row["Value"] = "First - 01";
    dtFirst.Rows.Add(row);
    row = dtFirst.NewRow();
    row["Value"] = "First - 02";
    dtFirst.Rows.Add(row);
    row = dtSecond.NewRow();
    row["Value"] = "Second - 01";
    dtSecond.Rows.Add(row);
    row = dtSecond.NewRow();
    row["Value"] = "Second - 02";
    dtSecond.Rows.Add(row);
} 
```

让我知道这是否适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:24:30.583

你有任何专栏可以加入他们吗？如果是，您可以做的是使用 DataRelation 连接 DataSet 上的表，并且在页面中您可以使用此关系获取子级或父级，如下示例

后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
{
    DataSet ds1 = new DataSet();
    DataSet ds2 = new DataSet();

    DataTable dt1 = new DataTable("Table1");
    DataTable dt2 = new DataTable("Table2");

    DataSet ds = new DataSet("DataSet");

    dt1.Columns.Add("Eno", typeof(Int32));
    dt1.Columns.Add("Ename", typeof(String));
    dt1.Columns.Add("Salary", typeof(Double));
    dt1.Columns.Add("Deptno", typeof(Int32));
    dt1.PrimaryKey = new DataColumn[] { dt1.Columns["Eno"] };

    dt2.Columns.Add("Deptno", typeof(Int32));
    dt2.Columns.Add("Dname", typeof(String));
    dt2.PrimaryKey = new DataColumn[] { dt2.Columns["Deptno"] };

    ds1.Tables.Add(dt1);
    ds2.Tables.Add(dt2);

    // Loading data into dt1, dt2:

    object[] o1 = { 1, "dvs.kiran kumar", 50000.50, 10 };
    object[] o2 = { 2, "Raj", 4000.50, 20 };
    object[] o3 = { 3, "Gary", 10000.50, 30 };

    object[] c1 = { 10, "MFG" };
    object[] c2 = { 20, "EAS" };
    object[] c3 = { 30, "E&U" };
    object[] c4 = { 40, "PES" };

    dt2.Rows.Add(c1);
    dt2.Rows.Add(c2);
    dt2.Rows.Add(c3);
    dt2.Rows.Add(c4);

    dt1.Rows.Add(o1);
    dt1.Rows.Add(o2);
    dt1.Rows.Add(o3);

    DataSet dsJoined = new DataSet();
    dsJoined.Tables.Add(ds1.Tables[0].Copy());
    dsJoined.Tables.Add(ds2.Tables[0].Copy());
    DataRelation drel = new DataRelation("EquiJoin", dsJoined.Tables[1].Columns["Deptno"], dsJoined.Tables[0].Columns["Deptno"]);
    dsJoined.Relations.Add(drel);

    rptJoined.DataSource = dsJoined.Tables[1];
    rptJoined.DataBind();

} 
```

标记：

```
 <asp:Repeater runat="server" ID="rptJoined">
        <HeaderTemplate>
            <table>
        </HeaderTemplate>
        <ItemTemplate>

            <tr>
                <td>
            Depto: <%# ((System.Data.DataRowView) Container.DataItem)["Dname"] %>
                </td>
            <asp:Repeater runat="server" ID="rptChild" DataSource='<%# ((System.Data.DataRowView) Container.DataItem).Row.GetChildRows("EquiJoin") %>'>
                <ItemTemplate>
                    <td>
                Ename: <%# ((System.Data.DataRow) Container.DataItem)["Ename"] %>
                    </td>
                </ItemTemplate>
            </asp:Repeater>
            <tr>

        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

另一种选择是使用中继器中的 OnItemDataBound 事件并获取后面代码中的值。

后面的代码：

```
 protected void rptJoined_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {

        DataRowView drv = (DataRowView)e.Item.DataItem;

        Literal ltrColumn1 = (Literal)e.Item.FindControl("ltrColumn1");
        Literal ltrColumn2 = (Literal)e.Item.FindControl("ltrColumn2");

        ltrColumn1.Text = drv["Dname"].ToString();

        var childs = drv.Row.GetChildRows("EquiJoin");

        if (childs.Count() > 0)
        {
            ltrColumn2.Text = childs[0]["Ename"].ToString();
        }
    }
} 
```

标记：

```
<asp:Repeater runat="server" ID="rptJoined" OnItemDataBound="rptJoined_ItemDataBound">
        <HeaderTemplate>
            <table>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <asp:Literal runat="server" ID="ltrColumn1" />
                </td>
                <td>
                    <asp:Literal runat="server" ID="ltrColumn2" />
                </td>
            <tr>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

干杯

# javascript - 如何使用 CSS 类动态创建图标？

> ID：15937533
> 
> 赞同：0
> 
> 时间：2013-04-10T22:21:00.483
> 
> 标签：javascript, css, class, icons, getjson

我正在使用 Ajax getJSON 函数从 php 文件中获取乘客的 id。由来自 php 的乘客数量定义的图标数量，以及图标（与外观相同）必须显示在 html 页面中。图标必须可以调用，因为我正在使用引导弹出窗口，当用户来到某个图标时，必须在弹出窗口中显示信息 abaot passsenger。在这里，我初始化组合框；

```
$(document).ready(function() {
      $.getJSON("Stations.php", function(jsonData){  
      $.each(jsonData, function(key,value) {
      $('#selectStation')
     .append($("<option></option>")
     .attr("value",key)
     .text(value.name)); 

  });
});
}); 
```

这是我尝试的js代码，它是从html中的select选项调用来选择站的：

```
function sta_callStation(sel){
  $('#sta_numberOfIcons').empty();
    $.getJSON('Stations.php', function(station){
      $.each(station, function(sta_key, sta_value) {

        if(sel.value==sta_key){
          $.each(sta_value.passengers, function(j,passengers) 
        {
          $('#sta_numberOfIcons').append('<i class="icon-user "></i>')
          });
        }
  });

  }
  );
  } 
```

sel 是从 Stations.php 传递站 id（从 1 到 5）的参数，我从选择选项标签调用此函数。从 sta_value.passengers 仅为每个乘客图标返回数字（从 1 到 20，它们是随机产生的）。这里的图标具有相同的属性，但我希望它们根据乘客 ID 有所不同，因为之后我将调用它们以实现弹出功能。这里的html代码部分：

```
<select name="selectStation" id="selectStation" onchange="sta_callStation(this);">    
</select>

      <div id="noOfPassengers"><strong>İstasyondaki Yolcu Sayısı:</strong></div>

      <a href="#" id="sta_numberOfIcons" rel="popover" class="pas_icon"> </a> 
```

谢谢。

# java - 数组越界错误Java

> ID：15937536
> 
> 赞同：0
> 
> 时间：2013-04-10T22:21:42.647
> 
> 标签：java, arrays, int, variable-assignment

我相信您只需要查看第一个代码。其余的代码是为了以防我遗漏了一些东西。

编辑：确实将第二个 j 更改为 ak 可以解决问题。我将 j 循环了两次，对于我的数组来说，值变得太大了。谢谢！

```
public static void makeMove(){
    char[] path = new char[TicTacToeArray.length];
    int[][] DefensiveOppsArray = new int[TicTacToeArray.length][TicTacToeArray.length];

    for(int i=0; i < DefensiveOppsArray.length; i++){
        for(int j=0; j < DefensiveOppsArray.length; j++){
            DefensiveOppsArray[i][j] = 0;
        }
    }   

    for(int i=0; i < DefensiveOppsArray.length; i++){
        for(int j=0; j < DefensiveOppsArray.length; j++){
            //path for straight down
            for(j=0; j < DefensiveOppsArray.length; j++){
                path[j] = TicTacToeArray[i][j];}

                DefensiveOppsArray[i][j]=DefensiveOppsArray[i][j] + 1;

            }
        }
    } 
```

我一直在为 tic tac toe Java 游戏做这项作业，但遇到了“线程“主”java.lang.ArrayIndexOutofBoundsException：3 中的异常。这个错误来自该行`DefensiveOppsArray[i][j]=DefensiveOppsArray[i][j] + 1;`。这一定意味着我不知何故没有正确定义了我的 DefensiveOppsArray 的大小。我做错了什么？

TicTacToeArray 继承自 UserTicTacToe。测试类很简单

```
public class Test3{

public static void main(String[] args){
    IntelligentTicTacToe2.promptUserTTT();
    }
} 
```

我需要创建一个与 TicTacToeArray 长度相同的 DefenseOppsArray，以便我可以操纵这些数字，从而确定最佳移动方式。不幸的是，我正在努力简单地创建和操作 DefenseOppsArray 中的数字。

```
public class IntelligentTicTacToe2 extends UserTicTacToe{

public static void promptUserTTT(){

    //read the input size
    System.out.print("Enter TicTacToe Array Size: ");
    int size = UserInput.readInt();
    System.out.println("");

    //start the game
    UserTicTacToe.startTTT(size);

    //keep track of consecutive errors
    int consecutiveErrors = 0;

    //display the initial game board
    UserTicTacToe.displayTTT();

    //let the user keep playing forever if they want to
    while(true){
        //get the input symbol from the user
        System.out.print("Enter Symbol (X or O): ");
        String symbol = UserInput.readString();
        System.out.println("");
        //hopefully the string is just one character - if not get just
        //the first character
        char sym = '*';
        if(symbol.length() > 0){
            sym = symbol.charAt(0);
        }

        //if the symbol was a Q, then quit
        if(sym == 'Q'){
            break ;
        }

        //get the row and column
        System.out.print("Enter Row to Place Symbol: ");
        int row = UserInput.readInt();
        System.out.println("");
        System.out.print("Enter Col to Place Symbol: ");
        int col = UserInput.readInt();
        System.out.println("");

        //update the game board and see if input was valid
        boolean inputValid = UserTicTacToe.updateTTT(sym,row,col);

        //re-display the game board if input was accepted
        if(inputValid){
            UserTicTacToe.scoreTTT();
            UserTicTacToe.displayTTT();
            consecutiveErrors = 0;
        }
        //if input was rejected, print a message, increment error count,
        //and quit if we are on the 5th error
        else{
            System.out.println("Invalid Input!");
            if(consecutiveErrors >= 4){
                break ;
            }
            consecutiveErrors++;
        }
        makeMove();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:27:39.297

问题是您`j`在嵌套循环中使用了两倍的计数器

这是出错的地方：

```
for(int i=0; i < DefensiveOppsArray.length; i++){
    for(int j=0; j < DefensiveOppsArray.length; j++){
        //path for straight down
        for(j=0; j < DefensiveOppsArray.length; j++){ // << here you use j again as counter
            path[j] = TicTacToeArray[i][j];
            DefensiveOppsArray[i][j]=DefensiveOppsArray[i][j] + 1;
        }
     }
} 
```

也许你编码一个循环太多了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:30:01.597

您将 int j 增加两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T22:39:23.117

问题确实是`for`重复使用`j`作为其变量的嵌套循环。这部分代码的格式应该是这样的：

```
for(int i=0; i < DefensiveOppsArray.length; i++){
    for(int j=0; j < DefensiveOppsArray.length; j++){
        //path for straight down
        for(j=0; j < DefensiveOppsArray.length; j++){
            path[j] = TicTacToeArray[i][j];
        }

        DefensiveOppsArray[i][j]=DefensiveOppsArray[i][j] + 1;
    }
} 
```

这清楚地表明发生了什么 -`j`在内部循环中增加到 3 `for`，所以当它到达下一行时，它会抛出异常。我不知道你是不是为了这条线

```
DefensiveOppsArray[i][j]=DefensiveOppsArray[i][j] + 1; 
```

是否在该内部循环中，但即使您确实需要该循环`for`，也不要`j`在该内部循环中重用。`for`

# java - 将一大串字节写入文件的最佳有效方法

> ID：15937544
> 
> 赞同：0
> 
> 时间：2013-04-10T22:22:21.020
> 
> 标签：java, string, file, byte, bytearray

我正在将一串位写入这样的文件：

```
//String to ByteArray
byte[] b = new BigInteger(encodedFile.toString(), 2).toByteArray();
//Writing
FileOutputStream fos = new FileOutputStream(fileName.concat(".file"),true);
fos.write(b); 
```

它适用于 100kb 文件中的位串，但比这更大，它变得非常慢。

用更大的位串做这件事的最佳有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:58:29.250

通常，在位置数字系统中解释字符串是非常昂贵的。BigInteger 构造函数没有针对基数是 2 的幂的特殊情况进行优化。通过一些测试可以明显看出这一点：

```
public static void main(String [] args) {
    char[] digits = new char[200000];
    Arrays.fill(digits, '1');
    String s = new String(digits);

    StopWatch watch = new StopWatch("new BigInteger");
    BigInteger bigInt = new BigInteger(s, 2);
    watch.done();
    watch = new StopWatch("toByteArray");
    byte[] data = bigInt.toByteArray();
    watch.done();
} 
```

对于 200k 位，将打印：

> ```
> new BigInteger took 0.772188085
> toByteArray took 0.001747708 
> ```

对于 100k 位，这将打印：

> ```
> new BigInteger took 0.200759594
> toByteArray took 0.000973587 
> ```

显然，新的 BigInteger 采用了 O(n^2) 算法。

知道我们转换二进制数，我们可以简化转换：

```
static byte[] convert(String binaryString) {
    // assumes binaryString.length() is a multiple of 8
    byte[] bytes = new byte[binaryString.length() / 8];
    byte data = 0;
    for (int i = 0; i < bytes.length; i++) {
        int minIndex = i * 8;
        int maxIndex = (i + 1) * 8;
        for (int j = minIndex; j < maxIndex; j++) {
            data <<= 1;
            data |= binaryString.charAt(j) - '0';
        }
        bytes[i] = data;
    }
    return bytes;
} 
```

在具有 100 万个字符的 char 数组上运行它，我们得到：

> ```
> new BigInteger took 19.086559046
> toByteArray took 0.003656331
> convert took 0.009119036 
> ```

以上代码未经测试，使用风险自负:-)

对于非常大的数字，在转换字节时将字节写入 OutputStream 可能是值得的。如果你这样做，你应该使用 BufferedOutputStream。

# jquery - 我可以通过像在 CSS 中那样对它们进行分组来将相同的样式应用于 jQuery 中的两个元素吗？

> ID：15937546
> 
> 赞同：0
> 
> 时间：2013-04-10T22:22:28.427
> 
> 标签：jquery, css, readability

这只是为了保持代码更整洁。在 CSS 中，我可以像这样对元素进行分组：

```
.element1,
.element2,
.element3,
.element4,
.element5,
.element6 {
 font-weight:bold;
} 
```

jQuery中是否有类似的东西，或者我必须单独设置每个。

```
$('.element1').css('font-weight', 'bold');
$('.element2').css('font-weight', 'bold');
$('.element3').css('font-weight', 'bold');
etc 
```

我想我想像

```
$('.element1', '.element2', etc).css('font-weight', 'bold); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T22:24:45.513

更简单的是，您可以在 jQuery 中使用与在 CSS 中完全相同的选择器：

```
$('.element1, .element2').css('font-weight', 'bold); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:24:48.330

简单的答案是肯定的，你可以这样做。但是使用 CSS 语法对选择器进行分组。

```
$('.element1, .element2, .element3').css('font-weight', 'bold'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T22:25:13.367

```
$('.element1, .element2, etc').css('font-weight', 'bold'); 
```

[JQuery 多个选择器](http://api.jquery.com/multiple-selector/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T22:25:40.297

是的你可以！

```
Except you want it like this: $('.element1,.element2').css('font-weight', 'bold); 
```

来源：[http ://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T22:25:42.097

使用[多个选择器](http://api.jquery.com/multiple-selector/)。例子：

```
$("div,span,p.myClass").css("border","3px solid red"); 
```

# sql-server-2008-r2 - 从逗号分隔的字符串中删除值

> ID：15937547
> 
> 赞同：0
> 
> 时间：2013-04-10T22:22:29.657
> 
> 标签：sql-server-2008-r2

我有一个有一些重复行的表，我可以从中找到重复的行，看起来像这样

```
CREATE TABLE Holder
(
    HPKEY INT,
    HSOMEVALUE VARCHAR(50)
);

INSERT INTO HOLDER (HPKEY,HSOMEVALUE)
VALUES
(1,'abc'),
(2,'abc'),
(5,'abc'),
(7,'xyz'),
(9,'xyz') 
```

现在我必须把结果集变成这种格式

```
Somvalue         MINKEY           OTHER_KEYS_EXCEPT_MIN
abc               1               2,5
xyz               7                9 
```

但我得到了第三列中的所有键。

我已经为此创建了[SQLFIDLER](http://sqlfiddle.com/#!3/a33b6/14)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:31:06.707

```
DECLARE @Holder TABLE
(
    HPKEY INT,
    HSOMEVALUE VARCHAR(50)
);

INSERT INTO @HOLDER (HPKEY,HSOMEVALUE)
VALUES
(1,'abc'),
(2,'abc'),
(5,'abc'),
(7,'xyz'),
(9,'xyz');

SELECT SomeValue = HSOMEVALUE, MINKEY, 
  OTHER_KEYS_EXCEPT_MIN = STUFF(
    (SELECT ',' + CONVERT(varchar(11), h2.HPKEY)
       FROM @Holder AS h2 
       WHERE h2.HSOMEVALUE = h.HSOMEVALUE
       AND h2.HPKEY > h.MINKEY
       FOR XML PATH(''), 
       TYPE).value(N'./text()[1]', N'varchar(max)'), 1, 1, N'')
  FROM 
  (
    SELECT HSOMEVALUE, MINKEY = MIN(HPKEY)
    FROM @Holder GROUP BY HSOMEVALUE
  ) AS h
  ORDER BY SomeValue; 
```

在 SQL Server 2017+ 上，这不那么混乱，恕我直言，有`STRING_AGG()`：

```
SELECT SomeValue = h.HSOMEVALUE, h.MINKEY, 
    OTHER_KEYS_EXCEPT_MIN = STRING_AGG(h2.HPKEY, ',')
  FROM @holder AS h2
  INNER JOIN 
  (
    SELECT HSOMEVALUE, MINKEY = MIN(HPKEY)
    FROM @Holder GROUP BY HSOMEVALUE
  ) AS h 
  ON h.HSOMEVALUE = h2.HSOMEVALUE
  WHERE h2.HPKEY > h.MINKEY
  GROUP BY h.HSOMEVALUE, h.MINKEY
  ORDER BY SomeValue; 
```

*   示例[db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2019&fiddle=ce4e3f594b04b27730f8324ae679e963)

# arrays - MatLab中矩阵的RREF

> ID：15937553
> 
> 赞同：0
> 
> 时间：2013-04-10T22:23:10.097
> 
> 标签：arrays, matlab, matrix

我对手动 RREF 给定矩阵有疑问。所以我部分经历了它，但我不知道从这里去哪里。谢谢！

```
 M = [1 0 2 1 18; 
     0 -3 -2 0 -8; 
     -2 -3 0 0 -41; 
     1 0 -1 1 16];
 M2=M;
 M2(3,:) = M2(3,:)+(2*M2(1,:));
 M2(4,:) = M2(4,:)-M2(1,:);
 M3 = M2;
 M3(3,:) = M3(3,:)+M3(2,:);
 M3(3,:) = M3(3,:)-M3(2,:);
 M3(3,:) = M3(3,:)-M3(2,:);
 M3(2,:) = (-1/3)*M3(2,:) 
```

最后我结束了

```
[1 0 2 1 18; 
0 1 .6667 0 2.6667; 
0 0 6 2 3; 
0 0 -3 0 -2] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:57:31.163

在您离开的地方接机：

```
x = [1 0 2 1 18; 0 1 .6667 0 2.6667; 0 0 6 2 3; 0 0 -3 0 -2];
x(3,:) = x(3,:) / 6;

x(1,:) = x(1,:) - 2 * x(3,:);
x(2,:) = x(2,:) - 2/3 * x(3,:);
x(4,:) = x(4,:) + 3 * x(3,:);

x(1,:) = x(1,:) - 1/3 * x(4,:);
x(2,:) = x(2,:) + 2/9 * x(4,:);
x(3,:) = x(3,:) - 1/3 * x(4,:); 
```

与`rref(x)`此类似产生：

```
x =

    1.0000         0         0    0.0000   17.1667
         0    1.0000    0.0000         0    2.2223
         0         0    1.0000         0    0.6667
         0         0         0    1.0000   -0.5000 
```

如果您想知道中间的所有步骤，这是一种方便的方法，但显然使用该`rref`函数通常更好地找到减少的行梯形形式。

请注意，如果您在 matlab 中执行所有步骤而不是复制诸如`.6667`.

# awk - 在特定时间戳之后开始数据整理

> ID：15937554
> 
> 赞同：1
> 
> 时间：2013-04-10T22:23:14.213
> 
> 标签：awk, timestamp

我有几个用逗号分隔的 26 列文件。有几百行。每行在第三列都有一个时间戳。我想在下午 6 点时间戳之后开始对所有文件中的列进行平均，并将平均数据复制到一个新文件中。其中两行如下所示。日期和时间用空格分隔。我可以使用 AWK 进行平均，它是下午 6 点之后的开始，这让我感到困惑。

任何帮助表示赞赏。

```
1,0102,3/1/2013 3:44:50 PM ,3586,20.88,20.51,0.36,0.0,2777,0.083,0.377,0.294,0.0,0.775,0.6,0.60,STABLE,0.01,0.01,0.812,0.812,989,713,755,553,799,
2,0102,3/1/2013 3:59:50 PM ,2727,20.91,20.63,0.28,0.0,2215,0.067,0.302,0.234,0.0,0.812,0.5,0.60,STABLE,0.05,0.06,0.000,0.812,2385,1713,1810,1270,1910, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:56:23.847

像这样的东西？

```
BEGIN { 
 FS=","; 
 ok=0 
} 

$3~/[6,7,8,9,10,11]:[0-9]+:[0-9]+ PM/ { ok=1 } 

ok==1 { print } 
```

# javascript - 为什么 'in' 运算符在 JS 中这么慢？

> ID：15937558
> 
> 赞同：1
> 
> 时间：2013-04-10T22:23:30.103
> 
> 标签：javascript, performance

这是 JSPerf[链接](http://jsperf.com/javascript-in-operator-performance)

仅仅检查一个属性是否存在怎么会比检索它慢呢？

另外为什么 localStorage 实际上更快？是因为它正在访问磁盘吗？

# javascript - 如果输入 (no1) 为空，则禁用输入 (no2)

> ID：15937560
> 
> 赞同：0
> 
> 时间：2013-04-10T22:23:56.210
> 
> 标签：javascript, html

HTML

```
<input type="text" name="year" autofocus onkeypress='validate(event)'><br>
<input type="text" name="month" onkeypress='validate(event)'><br> 
```

JavaScript

```
 <script type="text/javascript">
function validate(evt) {
  var theEvent = evt || window.event;
  var key = theEvent.keyCode || theEvent.which;
  key = String.fromCharCode( key );
  var regex = /[0-9]|\./;
  if( !regex.test(key) ) {
    theEvent.returnValue = false;
    if(theEvent.preventDefault) theEvent.preventDefault();
  }}
</script> 
```

如果我的输入（名称“年”）为空，如何禁用（防止在文本框中写入数字）输入（名称“月”）？当然，如果我要输入年份，如何启用（允许写入数字）它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:37:32.900

默认设置禁用月份输入，因为我相信最初年份将具有空值

`<input type="text" name="mounth" onkeypress='validate(event)' disabled='disabled'>`

现在编写模糊和按键事件处理程序

```
var month_input = document.getElementById('month'); 
var year_input = document.getElementById("year"); 
year_input.onblur = function(){ 
 if (this.value == '') { 
   month_input.setAttribute('disabled',true); 
 } 
}
year_input.onkeypress = function(){ 
  if (this.value!= ''){ 
    month_input.setAttribute('disabled',false); 
  } 
} 
```

我不确定它是否`onblur`会起作用，因为我很困惑它是否起作用，我们可能也需要`onfocus`事件处理程序。我没有测试过！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:46:02.220

这是一个与@prabeen giri 非常相似的解决方案：

HTML需要稍微修改如下：

```
<form>
 <div>
  <input type="text" name="year" autofocus="autofocus" onkeypress="javascript:validate(event);"><br>
  <input type="text" id='monthinput' name="mounth" onkeypress='javascript:validate(event)' disabled="true"><br>
 </div>
</form> 
```

然后我们添加代码来获取月份输入，并设置“禁用”属性。我们可以删除`evt.preventDefault()`代码，因为我们希望人们能够打字。

```
function validate(evt) {
  var theEvent = evt || window.event,
      regex    = /[0-9]|\./,
      monthel  = document.getElementById('monthinput'),
      key      = theEvent.keyCode || theEvent.which;
  key = String.fromCharCode( key );
  if ( !regex.test(key) ) {
      monthel.setAttribute('disabled', 'disabled');
  } else {
      monthel.removeAttribute('disabled', "");
  }
} 
```

我实际上已经对此进行了测试，并且确实有效。但是，如果您对根据输入是否有效显示/隐藏输入更感兴趣，我编写了一个[jQuery 插件，可以轻松显示/隐藏表单部分](http://plugins.jquery.com/dependent-questions/)。显然它需要jQuery。

# wcf - 处理 ServiceHostFactory.CreateServiceHost 故障的正确方法是什么？

> ID：15937563
> 
> 赞同：1
> 
> 时间：2013-04-10T22:24:07.220
> 
> 标签：wcf, service, servicehost

我有一些 WCF 服务已经测试了一段时间了。我们使用 Windows Process Activation Services (WAS) 将它们托管在 IIS 中。当客户连接时，服务就会启动，我们很高兴。

现在，像我一样偏执，在我们发布这个东西之前，我想测试一系列与服务如何处理某些类型的故障相关的边缘案例。其中一项实验涉及为特定服务创建 ServiceHost 本身期间的失败。

我们有一个自定义的 ServiceHostFactory（派生自 ServiceHostFactoryBase），它执行一些初始化工作并返回一个完全配置的服务主机。我正在模拟一个配置错误，该错误会导致 CreateServiceHost 在初始化期间引发 ServiceActivationException。我们还记录异常。

[顺便说一句，当我们的客户看到这个异常时，他们会停止尝试访问该服务（假设如果它第一次未能激活，则需要人工参与）。这与例如 EndpointNotFoundException 不同，在这种情况下，客户端会定期尝试，假设网络条件是瞬态的。]

我们看到的是客户端尝试（一次）打开服务的通道。ServiceHostFactory 似乎在几秒钟内多次尝试激活服务，每次尝试都失败并显示预期的异常消息，然后应用程序池似乎只是锁定了。对该应用程序池中运行的其他服务（已成功激活）的调用将永远挂起。

这似乎很奇怪。我不介意在几次尝试激活失败后，失败的服务会从应用程序池中启动，但杀死其他服务似乎是错误的。请注意，应用程序池不会回收或停止——它只是坐在那里不响应对任何服务操作的请求。

我还应该做些什么来告诉 WCF 未能激活一项服务应该使该服务“脱机”但允许应用程序池中的其他服务继续处理请求？还是我错过了 WAS 更基本的东西？

# sql-server - 光标似乎只获取一条记录

> ID：15937570
> 
> 赞同：1
> 
> 时间：2013-04-10T22:24:49.267
> 
> 标签：sql-server, tsql, stored-procedures, cursor

我正在尝试执行一个存储过程，该过程对于每个位置 =“Ubicacion”（计算固定资产的数量 = Ubicacion，将这些资产的价值相加，并将这些资产折旧的金额相加）对于当前放置在该位置的资产。问题是光标似乎只获取一次

查询光标：

```
SELECT DISTINCT (ubicacion) FROM
         (SELECT activo, ubicacion, Fecha_Ubicacion, row_number() OVER (
            partition BY activo ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate()))
          ) AS RowNum FROM [SISACT].ACTIVO_UBICACION) someAlias WHERE RowNum = 1 
```

结果：

```
Ubicacion
----------
1114
4450
4353 
```

它应该获取 3 次。“位置”中的每条记录一个，并且只有位置中的最新记录。

```
 ALTER PROCEDURE [SISACT].[resume_activos]
AS
BEGIN
  DECLARE @u CHAR(8);
  DECLARE @p VARCHAR(8);
  DECLARE @num_activos INT = 0;
  DECLARE @monto_activos FLOAT = 0;
  DECLARE @saldo_dep_activos FLOAT = 0;

  DECLARE U CURSOR STATIC
    FOR SELECT DISTINCT (ubicacion) FROM
         (SELECT activo, ubicacion, Fecha_Ubicacion, row_number() OVER (
            partition BY activo ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate()))
          ) AS RowNum FROM [SISACT].ACTIVO_UBICACION) someAlias WHERE RowNum = 1
        OPEN U
    FETCH NEXT FROM U INTO @u
    WHILE @@FETCH_STATUS = 0
            BEGIN
        SELECT @num_activos = COUNT(a.Activo), @monto_activos = SUM(a.Costo_adquisicion), @saldo_dep_activos = SUM(a.Saldo_a_depreciar) FROM [SISACT].ACTIVOS_FIJOS a, [SISACT].UBICACIONES ub, (SELECT activo, ubicacion, Fecha_Ubicacion, row_number() OVER (
            partition BY activo ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate()))
          ) AS RowNum FROM [SISACT].ACTIVO_UBICACION) ab WHERE RowNum = 1 AND ub.Ubicacion = @u AND a.Activo = ab.Activo AND ab.Ubicacion = @u

           PRINT 'Ubicacion: ' +@u +' Num activos: ' + CONVERT(VARCHAR, @num_activos) + ' monto activos: ' + CONVERT(VARCHAR, @monto_activos) + ' saldo activos depreciados: '+ CONVERT(VARCHAR, @saldo_dep_activos)

                FETCH NEXT FROM U INTO @u
            END
    CLOSE U
    DEALLOCATE U

END 
```

“打印”语句仅在“消息”选项卡中显示一次，其中包含第一个位置和我之前所说的计算，加上它没有返回任何内容，我希望它返回类似这样的内容

```
Ubicacion | Num_Act | Monto_Act | Saldo_dep_Act
------------------------------------------------
4453      |    2    | 5787.65   | 332.247 
```

我是 T-SQL 的新手，所以如果我做错了非常愚蠢的事情，请原谅我，我之前只用游标做过 SP，它工作正常（它没有返回任何东西）。

我究竟做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:05:51.543

它实际上是在正确地进行计算。我更改了您的 SP 以在 a 中累积输出，`varchar(max)`并且最后仅输出：

```
CREATE PROCEDURE [resume_activos]
AS
BEGIN
  DECLARE @u VARCHAR(8);
  DECLARE @p VARCHAR(8);
  DECLARE @allOutput VARCHAR(MAX) = '';
  DECLARE @num_activos INT = 0;
  DECLARE @monto_activos FLOAT = 0;
  DECLARE @saldo_dep_activos FLOAT = 0;

  DECLARE U CURSOR STATIC
    FOR SELECT DISTINCT (ubicacion) FROM
         (SELECT activo, ubicacion, Fecha_Ubicacion, row_number() OVER (
            partition BY activo ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate()))
          ) AS RowNum FROM ACTIVO_UBICACION) someAlias WHERE RowNum = 1
        OPEN U
    FETCH NEXT FROM U INTO @u
    WHILE @@FETCH_STATUS = 0
            BEGIN
        SELECT @num_activos = COUNT(a.Activo), @monto_activos = SUM(a.Costo_adquisicion), @saldo_dep_activos = SUM(a.Saldo_a_depreciar) FROM ACTIVOS_FIJOS a, UBICACIONES ub, (SELECT activo, ubicacion, Fecha_Ubicacion, row_number() OVER (
            partition BY activo ORDER BY abs(datediff(dd, Fecha_Ubicacion, getdate()))
          ) AS RowNum FROM ACTIVO_UBICACION) ab WHERE RowNum = 1 AND ub.Ubicacion = @u AND a.Activo = ab.Activo AND ab.Ubicacion = @u

           SET @allOutput = @allOutput + char(10) + char(13) + 'Ubicacion: ' +@u +' Num activos: ' + CONVERT(VARCHAR, @num_activos) + ' monto activos: ' + CONVERT(VARCHAR, @monto_activos) + ' saldo activos depreciados: '+ CONVERT(VARCHAR, @saldo_dep_activos)

                FETCH NEXT FROM U INTO @u
            END
    CLOSE U
    DEALLOCATE U
  SELECT @allOutput

END 
```

输出是：

```
Ubicacion: 1114 Num activos: 2 monto activos: 2781.15 saldo activos depreciados: 53.1104
Ubicacion: 4450 Num activos: 1 monto activos: 4553 saldo activos depreciados: 126.472
Ubicacion: 4453 Num activos: 2 monto activos: 5787.65 saldo activos depreciados: 332.247 
```

你可以看到它在这里工作：[http ://sqlfiddle.com/#!3/bce40/1/0](http://sqlfiddle.com/#!3/bce40/1/0)

如果您希望将结果作为实际表，只需创建一个临时表，并在每次迭代时插入部分结果。然后在最后，从中选择以获得完整的结果集。

# string - 如果为真，则excel创建新工作表

> ID：15937573
> 
> 赞同：0
> 
> 时间：2013-04-10T22:25:05.923
> 
> 标签：string, excel, vba

我有以下问题：我有 5000 行和 50 列的 excel 表。我需要复制并粘贴工作表并将第一张工作表中特定单元格中的值导出到此工作表，但如果 B1 和 B2 中的值相同，则不要创建另一个工作表，而是将其复制到第一行下的同一张工作表. 我添加了条件“07”，因为我不希望 excel 在一个过程中创建 5000 张工作表。到目前为止，我有这个：

```
Sub Button1_Click()
Dim newsheetname As String
Dim isometry As String
Application.ScreenUpdating = False
Worksheets("Sheet1").Activate
x = 2

Do While Cells(x, 4) <> ""

If Cells(x, 1) = "07" Then
Sheets(Sheets.Count).Select
Cells(33, 2) = Sheet1.Cells(x, 4)    
Cells(33, 28) = Sheet1.Cells(x, 32)  
End If

If Cells(x, 4) <> Cells(x + 1, 4) Then
Sheets("template").Copy After:=Sheets(Sheets.Count)
ActiveSheet.Name = isometry
End If

isometry = Sheet1.Cells(x + 1, 4)
x = x + 1
Worksheets("Sheet1").Activate

Loop

End Sub 
```

我知道我的“代码”非常简单而且并不完美，我从 VBA 开始。有人可以建议如何完成它，我想它几乎完成了，但我也缺少“新”表的字符串，现在我得到错误说我不能有 2 张同名的表，当然。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:46:36.527

```
Sub Button1_Click()
    Dim newsheetname As String
    Dim isometry As String
    Dim newSheet As Worksheet
    Application.ScreenUpdating = False
    x = 2

    'Go down the Sheet1 until we find a blank cell in column 4
    Do While Worksheets("Sheet1").Cells(x, 4) <> ""

        'If we find the value 07, copy two values to the isometry sheet
        If Sheet1.Cells(x, 1) = "07" Then

            isometry = Sheet1.Cells(x, 4)

            'create the sheet if it does not exist
            If Not SheetExists(isometry) Then
                Sheets("template").Copy After:=Sheets(Sheets.Count)
                Sheets(Sheets.Count).Name = isometry
            End If

            'Copy our data
            Sheets(isometry).Cells(33, 2) = Sheet1.Cells(x, 4)
            Sheets(isometry).Cells(33, 28) = Sheet1.Cells(x, 32)
        End If

        'Move on to the next row
        x = x + 1

    Loop
    Application.ScreenUpdating = True
End Sub

Function SheetExists(isometry) As Boolean
    Dim exists As Boolean
    exists = False
    For Each Sheet In Worksheets
        If Sheet.Name = isometry Then
            exists = True
            Exit For
        End If
    Next
    SheetExists = exists
End Function 
```

# html - 侧面图像附加不可见的超链接，如何删除？

> ID：15937576
> 
> 赞同：0
> 
> 时间：2013-04-10T22:25:11.987
> 
> 标签：html, web, hyperlink

在我的网页上，顶部的标志设置在中心附近，它的超链接回到主页，但是有一个清晰的小条，部分超链接从左下角延伸到末尾页。我该如何删除这个？

代码如下： Main Html

```
<!doctype html>

 html lang="en">
<head>
<meta charset="utf-8" />
<title>Spruce Films</title>
<link href="mainStyle.css" rel="stylesheet" type="text/css" />
 </head>
 <body>
<a href="index.html"><img src="spruce.png"/></a>    

<div id="tabs">
<a href="index.html">Home</a>
<a href="about.html">About</a>
<a href="current.html">Current Projects</a>
<a href="finished.html">Finished Projects</a>
<a href="contacts.html">Contacts & Links</a>
<a href="store.html">Store  </a>

<div id="top_ad">
        <script type="text/javascript"><!--
        google_ad_client = "ca-pub-6336861109904863";
        /* Spruce Films Header */
        google_ad_slot = "1175620153";
        google_ad_width = 728;
        google_ad_height = 90;
        //-->
        </script>
    <script type="text/javascript"
    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>
</div>

<footer id="the_footer">
        Designed and Coded by Austin Choncek Copyright &copy;            SpruceFilms.com All Rights Reserved.
</footer>
     </body>
     </html> 
```

然后css页面如下：

```
 img{
border: 0;
    margin-left: 295px; 
margin-top: -8px;
width: 750px;
height: 110;

    }

    body {
background-image: url(background.png);
background-repeat: repeat-no;
    }

    #tabs{
    border-left: 2px red;
    border-right: 2px #450101;
    border-right-style: solid;
    border-left-style: solid;
    position: absolute;
    width: 746px;
    height: 25px;
    top: 110px;
    left: 308px;

    }   

    a{
font-family: Tahoma;
padding-right: 20px;
padding-left: 5px;
color: orange;
font-size: 20px;
TEXT-DECORATION: NONE;
    }

     a:visited{
    color: orange;
    text-decoration: none;
    }
    a:hover{
    color: red;
    text-decoration: none;
    }
     a:active{
    color: blue;
    text-decoration: none;
    }
    #top_ad{
margin: 5px 5px 10px 10px;
width: 728px;
height: 90px;
    }

    #the_footer{
    clear:both;
    text-align:center;
    padding:20px;
    border-top: 2px solid white;
    color: orange;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:43:36.870

HTML：

```
<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Spruce Films</title>
        <link href="mainStyle.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div id="homepagelink">
            <a href="index.html"><img src="spruce.png"/></a>
        </div>

        <div id="tabs">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="current.html">Current Projects</a>
            <a href="finished.html">Finished Projects</a>
            <a href="contacts.html">Contacts & Links</a>
            <a href="store.html">Store  </a>
        </div>

        <div id="top_ad">
            <script type="text/javascript"><!--
    google_ad_client = "ca-pub-6336861109904863";
    /* Spruce Films Header */
    google_ad_slot = "1175620153";
    google_ad_width = 728;
    google_ad_height = 90;
    //-->
            </script>
            <script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </div>

        <footer id="the_footer">
    Designed and Coded by Austin Choncek Copyright &copy;            SpruceFilms.com All Rights Reserved.
        </footer>
    </body>
</html> 
```

CSS：

```
body {
    background-image: url(background.png);
    background-repeat: repeat-no;
}

#homepagelink *{
    width: 750px;
    height: 110px;
}

#homepagelink a{
    margin-left: 295px;
    margin-top: -8px;
    display: block;
}

#tabs{
    border-left: 2px red;
    border-right: 2px #450101;
    border-right-style: solid;
    border-left-style: solid;
    position: absolute;
    width: 746px;
    height: 25px;
    top: 110px;
    left: 308px;
}   

#tabs a{
    font-family: Tahoma;
    padding-right: 20px;
    padding-left: 5px;
    color: orange;
    font-size: 20px;
    TEXT-DECORATION: NONE;
}

a:visited{
    color: orange;
    text-decoration: none;
}

a:hover{
    color: red;
    text-decoration: none;
}

a:active{
    color: blue;
    text-decoration: none;
}

#top_ad{
    margin: 5px 5px 10px 10px;
    width: 728px;
    height: 90px;
}

#the_footer{
    clear: both;
    text-align: center;
    padding: 20px;
    border-top: 2px solid white;
    color: orange;
} 
```

在 Iron（Chrome 前叉）上按预期工作。

# android - Android APK 安装多个图标/活动？

> ID：15937578
> 
> 赞同：3
> 
> 时间：2013-04-10T22:25:14.410
> 
> 标签：android, layout, android-activity, installation, apk

我有一个具有多种布局/活动的程序。我安装了 APK，在我安装的应用程序位置有 3 个应用程序图标！我以为可能是我的调试环境，但现在我知道它是由 APK 包引起的。这些图标似乎有我在程序中的一些活动/布局的名称。我只想要一个启动点，一个应用程序来显示。它真的把事情搞砸了，因为如果我点击错误的图标，它会使程序崩溃。

是否有某种参数可以设置以防止活动成为启动点，还是完全不同的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T22:28:15.500

您应编辑清单文件并`intent-filter`从所有您不希望启动器显示的活动中删除条目。所以保持这个：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

只为你想成为你的切入点的那个。

# grep - 使用 grep 进行搜索

> ID：15937583
> 
> 赞同：0
> 
> 时间：2013-04-10T22:25:41.040
> 
> 标签：grep

嘿伙计们，我只是想看看是否有人可以帮助我。我正在尝试递归搜索目录以查找以 .poem 作为扩展名并在其中包含“I”的文件。

当我做

```
grep -r -e --include *.poem I 
```

我什么都没有出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:36:53.813

仅返回文件名：

```
 grep -r -H "I" yourdir --include *.poem | cut -d: -f1 | uniq -u 
```

用目录替换 yourdir。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:28:11.557

```
grep --include "*.poem" -R I . 
```

# sql-server-2008-r2 - nchar 与 nvarchar 作为 SQL Server 2008 R2 中的主键

> ID：15937585
> 
> 赞同：2
> 
> 时间：2013-04-10T22:25:42.257
> 
> 标签：sql-server-2008-r2

我通常使用代理数字主键。但现在我必须使用 10 个字符的文本主键。

我的问题是它应该是 nchar 还是 nvarchar？谢谢。

**编辑**

感谢您的回复 - 我知道 nchar 和 nvarchar 之间的区别，我的问题实际上是我应该使用哪个作为主键，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:40:33.977

[T-SQL 文档](http://msdn.microsoft.com/en-us/library/ms186939.aspx)中的建议非常简单：

> 当列数据条目的大小可能相似时，请使用 nchar。当列数据条目的大小可能会有很大差异时，请使用 nvarchar。

在您的情况下，一个 10 字符标识符，答案是 nchar。

# java - 如何使用 bouncycastle 从 pkcs7 文件中获取证书？

> ID：15937586
> 
> 赞同：2
> 
> 时间：2013-04-10T22:25:42.900
> 
> 标签：java, bouncycastle, pkcs#7, csr

大家好！接下来是我的问题：我有一个包含预打包 CSR 的 .pkcs7 文件，我想从中获取 CSR。我怎样才能使用 bouncycastle 呢？

我尝试使用 PEMReader，但它没有用。

```
 private void getCertificatesPKCS7File(String filename){
        try {
            certificates = new ArrayList();

            FileReader fileReader = new FileReader(filename);
            PEMReader pemReader = new PEMReader(fileReader);
           // Object obj = pemReader.readObject();
           // PKCS10CertificationRequest csr = (PKCS10CertificationRequest) obj;
            Object obj = pemReader.readPemObject().getContent();
            PKCS10CertificationRequest csr = new PKCS10CertificationRequest(obj);

            pemReader.close(); 

        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

接下来是例外：

```
 Exception in thread "main" java.lang.IllegalArgumentException: unknown object in factory: org.bouncycastle.asn1.ASN1ObjectIdentifier
    at org.bouncycastle.asn1.pkcs.CertificationRequestInfo.getInstance(Unknown Source)
    at org.bouncycastle.asn1.pkcs.CertificationRequest.(Unknown Source)
    at org.bouncycastle.jce.PKCS10CertificationRequest.(Unknown Source) 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:17:11.390

我找到了解决方案。

```
KeyStore keystore = KeyStore.getInstance("PKCS12", "BC");
keystore.load (new FileInputStream(PATH+"//test.p12"), "testpassword".toCharArray());
PrivateKey privateKey = (PrivateKey)keystore.getKey("testclientcert", "testpassword".toCharArray());

PEMReader pemReader = new PEMReader(new FileReader(filename));
ContentInfo object = (ContentInfo)pemReader.readObject();

CMSEnvelopedDataParser envDataParser = new CMSEnvelopedDataParser(object.getEncoded());
RecipientInformationStore recipients = envDataParser.getRecipientInfos();
Collection envCollection = recipients.getRecipients();
Iterator it = envCollection.iterator();
RecipientInformation recipient = (RecipientInformation) it.next();
byte[] result = recipient.getContent(privateKey, "BC");
String base64Encoded = new String(Base64.encode(result));

System.out.println(base64Encoded); 
```

base64Encoded 将与编码的 csr 匹配。

# wpf - WPF Hierarchical ViewModel FindAncestor 数据绑定错误

> ID：15937589
> 
> 赞同：2
> 
> 时间：2013-04-10T22:26:06.573
> 
> 标签：wpf, data-binding, mvvm, combobox, wpfdatagrid

我正在创建一个 MVVM 应用程序，它有两个视图模型，RegisterUserViewModel 和 UserViewModel。“RegisterUserViewModel”有一个公共属性，它是“UserViewModel”的集合，如下所示的代码

```
public class RegisterUserViewModel : ViewModelBase
{
    public ObservableCollection<UserViewModel> Users { get; }
    public ObservableCollection<string> UsersFromAD { get; }
}

public class UserViewModel : ViewModelBase
{
    public string Name { get; set; }
} 
```

“RegisterUserViewModel”类还有一个“UsersFromAD”属性，该属性填充了从 Active Directory 获得的用户名。

我的问题在于我认为的数据绑定。

我有一个 MainWindow 视图，它将其窗口分为两个区域（左侧和右侧）：左侧区域有可用命令列表，右侧区域有选项卡控件。左侧的命令用于在选项卡控件上打开新选项卡。TabControl 的 ItemsSource 属性绑定到“ViewModelBase”类的集合。由于 DataTemplate 绑定，TabControl 中打开的每个选项卡都会自动绑定到特定视图，具体取决于正在打开的类的类型。

让我更清楚：

1）我在左侧有一个命令，它将“RegisterUserViewModel”的新实例添加到 TabControl 的 ItemsSource 属性绑定到的“ObservableCollection”中。

2) MainWindow.xaml 文件有一个部分指定了一个 DataTemplate，它将特定视图绑定到 RegisterUserViewModel，如下面的代码所示：

```
<Window.Resources>
    <ResourceDictionary>
        <DataTemplate DataType={x:Type ViewModel:RegisterUserViewModel}">
            <View:RegisterUserView />
        </DataTemplate>
    <ResourceDictionary>
<Window.Resources> 
```

3) 通过这样做，WPF 会自动将我的 RegisterUserView 的 DataContext 设置为我的 RegisterUserViewModel。

现在，我向我的 RegisterUserView 添加了一个 DataGrid 控件，并将它的 ItemsSource 设置为我的 UserViewModel 集合（用户）。一切正常，添加到集合中的用户显示在 DataGrid 上。

但是，我想要的是数据网格上的“名称”列使用 DataGridComboBoxColumn，其 ItemsSource 属性设置为位于我的“RegisterUserViewModel”类上的“UsersFromAD”属性。

为此，我使用了以下 xaml：

```
<DataGridComboBoxColumn ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ViewModel:RegisterUserViewModel}}, Path=UsersFromAD}"
                        SelectedValueBinding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ViewModel:UserViewModel}}, Path=Name}"
                        /> 
```

但是，这是行不通的。每当我运行应用程序时，我都会从输出窗口中获得以下信息：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='TestApplication.ViewModel.RegisterUserViewModel', AncestorLevel='1''. BindingExpression:Path=UsersFromAD; DataItem=null; target element is 'DataGridComboBoxColumn' (HashCode=24004376); target property is 'ItemsSource' (type 'IEnumerable')
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='TestApplication.ViewModel.UserViewModel', AncestorLevel='1''. BindingExpression:Path=Name; DataItem=null; target element is 'TextBlockComboBox' (Name=''); target property is 'SelectedValue' (type 'Object') 
```

谁能帮我正确设置这些绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:44:52.300

我通过将 CollectionViewSource 添加到我的 RegisterUserView 的“UserControl.Resources”部分并将 CollectionViewSource 绑定到我的 UsersFromAD 属性来解决了这个问题，如下所示：

```
<UserControl.Resources>
    <CollectionViewSource x:Key="cvsUsersFromAD" Source="{Binding UsersFromAD}" />
</UserControl.Resources> 
```

然后，通过将我的 DataGridComboBoxColumn 绑定到我的 CollectionViewSource，如下所示：

```
<DataGridComboBoxColumn ItemsSource="{Binding Source={StaticResource cvsUsersFromAD}}"
                        /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T00:27:32.197

FindAncestor 在**元素树**中搜索类型，而不是在树中元素的 DataContext 中。因此，对于绑定 ItemSource 的列，您可以尝试以下操作（据我了解您的对象图）

```
<DataGridComboBoxColumn ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type View:RegisterUserView}}, Path=DataContext.UsersFromAD}"
                        /> 
```

# sql - SQL Server 使用外键创建表

> ID：15937590
> 
> 赞同：8
> 
> 时间：2013-04-10T22:26:13.040
> 
> 标签：sql, sql-server, sql-server-2008

我想验证表中外键的正确处理。这是我在下面创建的两个表。一个人可能没有列出地址，所以我希望它为空。否则我想从地址表中引用一个主键并将其作为外键存储在 Person 表中。我们也可能有一个没有人的地址对象。

一个人的表：

```
CREATE TABLE Person
(
    PersonID int IDENTITY PRIMARY KEY,
    FName varchar(50) NULL,
    MI char(1) NULL,
    LName varchar(50) NULL,
    AddressID int FOREIGN KEY REFERENCES Address(AddressID) NULL,
) 
```

地址表：

```
CREATE TABLE Address
(
    AddressID int IDENTITY PRIMARY KEY,
    Street varchar(60) NULL,
    City varchar(50) NULL,
    State varchar(2) NULL,
    Zip varchar(10)NULL,
    Intersection1 varchar(60) NULL,
    Intersection2 varchar(60) NULL,
) 
```

另外 Q2 我从未使用过触发器，但我假设处理插入的方法是使用存储过程首先插入地址，获取主键，然后将其传递给存储过程以插入到 Person 表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T08:43:12.993

给你的问题：是否有可能不止一个人住在同一个地址？另外，一个人有可能住在多个地址上吗？

如果是这种情况，请考虑与附加 PersonAddress 表的 M:N 关系。

否则，如果不是这种情况，我会问自己“是否更有可能有没有地址的人或没有地址的人？” 目标是确定您是否应该将 AddressID 存储在 Person 表中，还是将 PersonID 存储在 Address 表中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:40:39.640

我会像这样更改地址：

```
 CREATE TABLE Address
 (
     AddressID int IDENTITY,
     Street varchar(60) NULL,
     City varchar(50) NULL,
     State varchar(2) NULL,
     Zip varchar(10)NULL,
     Intersection1 varchar(60) NULL,
     Intersection2 varchar(60) NULL,
 )
 Alter Table Address Add Constraint
 PK_Addresses Primary Key Clustered  
 (City Asc, Zip Asc, Street asc)

 Create Unique NonClustered Index IX_Address_Key
 On Address{AddressId) 
```

我会这样做是因为，当您添加一个具有指定 StreetAddress、City 和 Zip 的人时，您可以在`SavePerson`存储过程中执行此操作。

```
If Exists (Select * From Address
           Where Street = @Street
              And City = @city
              And Zip = @zip)
   Begin
       Select @AddressId = AddressId
       From Address
       Where Street = @Street
           And City = @city
           And Zip = @zip
   End
Else Begin
      Insert Address(Street, City, State, Zip)
      Values(@street, @city, @state, @zip)
      Set @AddressId = Scope_Identity()
   End 
```

然后使用插入到 Person 表中的 t-sql 变量 @AddressId 的值。您仍将使用 AddressId 来连接其他 SQL 语句，但您在城市、邮编和街道地址上有一个主键，这将防止您在地址表中插入重复的地址。将此设置为*聚集*索引，以防您可能需要检索或处理全部在一个 zip 中或全部在一个城市中的地址组......

# java - Spring @Value 没有解析为属性文件中的值

> ID：15937592
> 
> 赞同：74
> 
> 时间：2013-04-10T22:26:28.677
> 
> 标签：java, spring, spring-properties

我以前在其他项目中也有过这个工作，我只是在重新做同样的事情，但由于某种原因它不起作用。Spring`@Value`不是从属性文件中读取，而是从字面上获取值

**AppConfig.java**

```
@Component
public class AppConfig
{
    @Value("${key.value1}")
    private String value;

    public String getValue()
    {
        return value;
    }
} 
```

**应用程序上下文.xml：**

```
<context:component-scan
    base-package="com.test.config" />
<context:annotation-config />

<bean id="appConfigProperties"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:appconfig.properties" />
</bean> 
```

**appconfig.properties**

```
key.value1=test value 1 
```

在我的控制器中，我有：

```
@Autowired
private AppConfig appConfig; 
```

应用程序启动得很好，但是当我这样做时

```
appConfig.getValue() 
```

它返回

```
${key.value1} 
```

它不会解析为属性文件中的值。

想法？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-11-27T06:47:31.003

我还发现`@value`不起作用的原因是，`@value`需要`PropertySourcesPlaceholderConfigurer`而不是`PropertyPlaceholderConfigurer`. 我做了同样的改变，它对我有用，我使用的是 spring 4.0.3 版本。我在我的配置文件中使用以下代码进行了配置-

```
@Bean 
public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {
return new PropertySourcesPlaceholderConfigurer();
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2017-03-30T08:42:51.417

就我而言，不会注入静态字段。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-14T04:35:02.883

问题是由于我的 applicationContext.xml 与 spring-servlet.xml 中的问题 - 这是 bean 之间的范围问题。

pedjaradenkovic 好心地向我指出了一个现有资源： [@Controller 类中的 Spring @Value 注释不评估属性文件中的值，](https://stackoverflow.com/questions/11890544/spring-value-annotation-in-controller-class-not-evaluating-to-value-inside-pro) 并且[Spring 3.0.5 不评估属性中的 @Value 注释](https://stackoverflow.com/questions/5275724/spring-3-0-5-doesnt-evaluate-value-annotation-from-properties)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-06-08T00:59:20.440

就我而言，我错过了花括号。我有`@Value("foo.bar") String value`而不是正确的形式`@Value("${foo.bar}") String value`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-04-12T13:12:07.757

对于 Sprig-boot 用户，PropertyPlaceholderConfigurer 和 Spring 3.1 中添加的新 PropertySourcesPlaceholderConfigurer。所以访问属性文件很简单。只需注入

**注意：确保您的财产不得 `Static`**

```
@Value("${key.value1}")
private String value; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-09T12:50:55.363

我使用的是spring boot，对我来说升级版本`1.4.0.RELEASE`解决`1.5.6.RELEASE`了这个问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-04-20T12:26:38.717

就我而言，我有 lombok @AllArgsConstructor 并且也获得了该属性。删除此注释解决了问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-05-15T06:58:55.307

@Value 有时可能需要一天或半天才能解决；）。

这是我所做的：

1.  将属性添加到属性或 YAML 文件

2.  确保使用 @EnableAutoConfiguration 或 @SpringBootApplication 注释主类

3.  创建可以在其中使用 @Value 的 AppConfig

    @Value("${PROPERTY}") 私有字符串 URL；

在类级别使用 @Configuration 注释此 AppConfig

4.  到目前为止，设置已完成，现在可以通过自动装配 AppConfig 在任何您想要的地方使用它

示例：在某些服务中 @Autowired 私有 AppConfig appConfig；并在此服务的方法中调用 appConfig.getUrl() 以从属性文件中获取属性 URL 的值。

注意：不要试图在 CONSTRUCTOR OF SERVICE 中获取价值，它将为空。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-10T22:33:51.547

阅读 pedjaradenkovic 的评论。

除了他提供的链接之外，这不起作用的原因是`@Value`处理需要 a`PropertySourcesPlaceholderConfigurer`而不是 a `PropertyPlaceholderConfigurer`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-07T14:38:50.613

我的原因是导入了错误的`dependency`. 我`lombok`是无意中导入的，而不是把`"import org.springframework.beans.factory.annotation.Value;"` 它改回来解决了这个问题

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-27T15:57:44.477

请注意，如果您`application.properties`的代码库中有多个文件，请尝试将您的值添加到**父**项目的属性文件中。

您可以检查您的项目的`pom.xml`文件，以确定您当前项目的父项目是什么。

或者，尝试使用`environment.getProperty()`而不是`@Value`.

# c++ - 计算联合后剩下多少个不同的向量

> ID：15937594
> 
> 赞同：0
> 
> 时间：2013-04-10T22:26:59.370
> 
> 标签：c++, algorithm, c++11, stdvector, union-find

我只在这个问题中使用 std::vector 并且每个向量都是有序的，没有重复。现在我想合并具有相同数字的向量。所以 2 3 可以与 3 4 5 联合，但不能与 4 5 或 1 5 联合。

例子：

如果我有以下向量...

```
1
1
2 3 4
5
1 5
2
4 7 
```

联合之后，我应该只剩下 2 个向量：

```
1 5
2 3 4 7 
```

代码：

```
vector<int> a,b,c,d,e,f,g;
vector<vector<int>> myList;

a.push_back(1);
b.push_back(1);
c.push_back(2);
c.push_back(3);
c.push_back(4);
d.push_back(5);
e.push_back(1);
e.push_back(5);
f.push_back(2);
g.push_back(4);
g.push_back(7);

myList.push_back(a);
myList.push_back(b);
myList.push_back(c);
myList.push_back(d);
myList.push_back(e);
myList.push_back(f);
myList.push_back(g);

//this should print out the vectors in my above example
for (int i =0; i<myList.size(); i++) {
    for (int j=0; j<myList[i].size(); j++) {
        cout<<myList[i][j]<<" ";
    }
    cout<<endl;
} 
```

我尝试使用 set_union 和 set_intersection 来实现我的目标，但它没有按预期工作。我怀疑问题出在我没有正确更改的向量大小上。请帮忙。谢谢！

编辑：

这是错误的代码，最初我对联合有问题，但现在它会自动运行..现在我想我主要不确定如何使用 set_intersection 来找出是否有交集

```
vector<int>::iterator myIt;
vector<int> myTemp;
vector<int> myTemp2;
vector<int> myResult(20);
vector<int> myResult2(20);

while (!myList.empty()) {

    myTemp2 = myList.back();
    myList.pop_back();

    myIt = set_intersection(myTemp.begin(), myTemp.end(), 
                            myTemp2.begin(), myTemp2.end(), myResult.begin());

    //this is checking whether there is intersection but it doesn't work
    if (myResult.size()) {

        myIt = set_union(myTemp.begin(), myTemp.end(), 
                         myTemp2.begin(), myTemp2.end(), myResult2.begin());

        myTemp = myResult2;

    }

}

cout<<"after union: "<<endl;

for (auto it = myResult2.begin(); it != myResult2.end() ; it++) {
    cout<<*it<< " ";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:25:35.980

如果我对您的理解正确，那么不仅您的代码而且您的方法都大错特错。您正在尝试解决连接的组件/不相交的集合类型问题，但是您的方法例如只返回一个`vector`s `int`...？它肯定需要返回 a `vector`of s。`vector<int>`

以下代码是我能想到的最接近您的代码，应该可以使用。它应该留下`result`你想要的输出。

```
vector< vector<int> > result;

for(int i = 0; i < myList.size(); i++)
{

    bool match = false;
    int matchFirst = -1;

    for(int j = 0; j < result.size(); j++)
    {

        vector<int> myResult;
        vector<int> myResult2;

        set_intersection(myList[i].begin(), myList[i].end(),
                         result[j].begin(), result[j].end(),
                         back_inserter(myResult));

        if (myResult.size())
        {
            set_union(myList[i].begin(), myList[i].end(),
                      result[j].begin(), result[j].end(), back_inserter(myResult2));

            if(match)
            {
                vector<int> myResult3;
                set_union(myResult2.begin(), myResult2.end(),
                          result[matchFirst].begin(), result[matchFirst].end(), back_inserter(myResult3));
                result.erase(result.begin() + j, result.begin() + j + 1);
                result[matchFirst] = myResult3;
                j--;
            }
            else
            {
                matchFirst = j;
                result[j] = myResult2;
                match = true;
            }

        }

    }

    if(!match)
    {
        result.push_back(myList[i]);
    }
} 
```

**编辑**：修复了一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:51:29.970

这并不完美

```
vector<int> myResult(20);

myIt = set_intersection(myTemp.begin(), myTemp.end(), 
     myTemp2.begin(), myTemp2.end(), myResult.begin()); 
```

问题是 set_intersection（和 set_union）不会改变向量的大小。通过使 myResult 大小为 20，您为自己提供了足够的空间，但在完成交集后，您仍然会得到一个大小为 20 的向量，因此`myResult.size() == 20`无论您在两个向量中拥有什么元素开始。

您需要的是使用 set_intersection 的方法，以便将元素添加到目标向量。为此，您需要`back_inserter`

```
#include <iterator>

vector<int> myResult;

set_intersection(myTemp.begin(), myTemp.end(), 
    myTemp2.begin(), myTemp2.end(), 
    back_inserter(myResult)); 
```

`back_inserter`使用 将元素添加到向量中`push_back`，因此 myResult 从大小为零开始，最终以正确的大小结束，具体取决于交点中有多少元素。因此，您可以测试`myResult.size() > 0`以判断是否有任何共同元素。

当你调用 set_union 时做同样的事情。

# ruby-on-rails - Ruby on Rails - 将属性添加到 ActiveRecord::Base 但不想保留在数据库中，但应该在对象 json 中

> ID：15937598
> 
> 赞同：0
> 
> 时间：2013-04-10T22:27:20.867
> 
> 标签：ruby-on-rails, ruby, paperclip

我有一个名为“Entry”的 ActiveRecord::Base 模型。它附有一个文件。我正在使用 Paperclip 上传文件。现在，当我使用视图并在视图中使用服务器端代码时，一切都很愉快。但现在，我想使用 JSON 和 AJAX，以纯 HTML5 呈现前端。因此，为此，我需要文件的 URL。但回形针只存储文件名、文件内容类型等，我可以检索文件的 url，

```
url = @post.myFile.url 
```

所以，我不想将 URL 单独存储在数据库中，但希望它成为“发布”模型的属性，并且应该能够设置和获取它，并且成为我发送的 JSON 的一部分到客户端。

在我的控制器中，我有“索引”方法，

```
def index
@posts = Post.order("created_at desc")

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @posts }
  end
end 
```

我将如何更改我的模型？我将如何更改我的控制器？我尝试使用

```
attr_accessor :file_url 
```

在我的模型中并将这些行添加到控制器中的 index 方法中

```
@posts.each do |myPost|
   myPost.file_url = myPost.myFile.url
end 
```

但未能成功。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:09:13.193

这里有两个问题：一方面，您在声明属性访问器时处于正确的轨道上。而不是控制器中的循环在您的模型中定义它。

```
def file_url
  myFile.url
end 
```

第二个问题是，当您在控制器中序列化数组时，它会调用每个元素的默认序列化，其中不包括您的虚拟属性 file_url。

我为此推荐的解决方案是[ActiveModelSerializers gem](https://github.com/rails-api/active_model_serializers)，它允许您轻松自定义控制器使用的序列化。添加虚拟属性非常容易。（请注意，在您的模型中覆盖 as_json 方法将不起作用，因为数组序列化程序不会使用它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:15:00.573

您可以考虑使用[RABL](https://github.com/nesquena/rabl) gem 来控制 Json 输出的格式。

实际上，它添加了 Json 格式的视图文件，您可以将 URL 作为节点添加到数据中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:55:04.327

我不确定我是否完全理解你的目标。*您是否希望在呈现 JSON之前*从每个帖子中都可以使用 file_url ？如果是这样，您可以将 api_attributes 添加到您的模型中，即：

```
def api_attributes
  {
    id: self.id.to_s,
    title: self.title.to_s,
    ...
    file_url: self.myFile.url,
    ...
  }
end 
```

然后您可以使用以下内容渲染您的 json：

```
format.json { render json: @posts.collect{|post| post.api_attributes} } 
```

这将为您提供具有您指定的所有 api_attributes 的所有帖子。希望这就是你要找的。

# css - 如何让 div 列浮得更紧？

> ID：15937600
> 
> 赞同：1
> 
> 时间：2013-04-10T22:27:24.890
> 
> 标签：css, html, css-float

我的代码笔： [http :](http://codepen.io/leongaban/pen/wzumq) **[//codepen.io/leongaban/pen/wzumq](http://codepen.io/leongaban/pen/wzumq)**

嗨，所以今天我有一个 6 列布局（每行 3 列）。第三列真的很长，几乎就像一个侧栏。

根据设计，第 4 列和第 5 列需要靠近第 1 列和第 2 列的底部（比如说 10px 填充）。

问题是，因为我目前所有的东西都向左浮动，所以长的第 3 列在第 1 列和第 2 列的底部与第 4 列和第 5 列的顶部之间创建了太多空间。

我想保持 div 的位置不变，因为当在较小的浏览器窗口上时，我会有一些自适应代码来重新设置它们的样式。

是否有捷径可寻？或者我是否必须将第 4 列放在 1 下方的另一列中，而第 5 列和第 2 列也一样？那么当屏幕尺寸改变时使用jQuery重新定位div？

**当前问题：** ![在此处输入图像描述](https://i.stack.imgur.com/unIfq.gif)

* * *

**我想要做什么：** ![在此处输入图像描述](https://i.stack.imgur.com/WxtJa.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:36:36.233

你有几个选择，[这篇文章](http://designshack.net/articles/css/masonry/)很好地解释了它们。

1.  在所有浏览器上执行此功能的Javascript/jQuery 插件（[如 jQuery masonry ）](http://masonry.desandro.com/)
2.  使用 CSS 列的纯 CSS 选项（在文章中进行了解释），完全清楚 IE9 不支持此选项 - 并且小心翼翼！

就获得您想要的砖石布局而言，这几乎就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:36:37.273

看看这个：

[http://cssdeck.com/labs/css-only-pinterest-style-columns-layout](http://cssdeck.com/labs/css-only-pinterest-style-columns-layout)

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T22:46:48.433

我看到的唯一方法是包装 col1-col4、col2-col5、col3-col6 并使包装器向左浮动。
那么如果你想让它根据屏幕的分辨率做出响应，你可以使用@media 查询和respond.js。

这是您应该做什么的简要说明：

HTML

```
<div class="wrapper1">
<div class="col1">content here</div>
<div class="col4">content here</div>
</div>

<div class="wrapper2">
<div class="col2">content here</div>
<div class="col5">content here</div>
</div>

<div class="wrapper3">
<div class="col3">content here</div>
<div class="col6">content here</div>
</div> 
```

CSS

```
.wrapper1, .wrapper2, .wrapper3{float:left;} 
```

在这里你可以找到[你的 codepen 更新](http://codepen.io/anon/pen/eptwl)
在这里你可以了解更多关于[respond.js 和 css 媒体查询](https://github.com/scottjehl/Respond)

# c# - Writing XML In .NET

> ID：15937603
> 
> 赞同：0
> 
> 时间：2013-04-10T22:27:50.097
> 
> 标签：c#, xml, asp.net-mvc, xmlwriter

I am trying to format an XML page in C# per the request of client. Below is what I currently create in XML

```
<?xml version="1.0" encoding="utf-8"?>
<!--This is to write the connection strings, text file location, and report destination.-->
<AdminPaths Name="sqlConnection1" connectionString="asdf">
  <TextPath>
    <Key Value="Test3" xmlns="Path" />
  </TextPath>
</AdminPaths> 
```

This is what I would like to have:

```
<?xml version="1.0" encoding="utf-8"?>
<!--This is to write the connection string, text file location, and report destination.-->
<AdminPaths> 
  <Name="sqlConnection1" connectionString="asdf">
</AdminPaths>
<TextPath>
  < Key="Path" Value="Test3">
  < Key="Report" Value="Test2">
</TextPath> 
```

Here is the code I am currently using:

```
 XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;

        XmlWriter writer = XmlWriter.Create("C:\\Users\\fthompson11\\WebFile.xml", settings);
        writer.WriteStartDocument();
        writer.WriteComment("This is to write the connection strings, text file location, and report destination.");
        writer.WriteStartElement("AdminPaths");
        writer.WriteAttributeString("Name", "sqlConnection1");
        writer.WriteAttributeString("connectionString", "asdf");
        writer.WriteStartElement("TextPath");
        writer.WriteStartElement("Key", "Path");
        writer.WriteAttributeString("Value", "Test3");
        writer.WriteEndElement();
        writer.WriteEndDocument();

        writer.Flush();
        writer.Close(); 
```

I have tried using writer.WriteEndElement(); after the writeAttributeString to start but I receive an error that states "Make sure that the ConformanceLevel setting is set to ConformanceLevel.Fragment or ConformanceLevel.Auto if you want to write an XML fragment." I believe that is not what I want to do? Any help would be appreciated.

thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:50:01.230

I *think* this is the XML that you want. I'm guessing, because the XML you state as your goal is not correctly formed.

```
<?xml version="1.0" encoding="utf-8"?>
<!--This is to write the connection strings, text file location, and report destination.-->
<AdminPaths>
  <AdminPath Name="sqlConnection1" connectionString="asdf" />
  <TextPath>
    <Text Key="Path" Value="Test3" />
    <Text Key="Report" Value="Test2" />
  </TextPath>
</AdminPaths> 
```

Basically, in your stated goal XML, you were trying to create 2 root nodes under the xml document, which is a no-no, unless you are willing to use `ConformanceLevel.Fragment` or `ConformanceLevel.Auto` and force this behavior.

The code for this would like the following:

```
XmlWriterSettings settings = new XmlWriterSettings();
settings.Indent = true;

XmlWriter writer = XmlWriter.Create("C:\\Users\\fthompson11\\WebFile.xml",
  settings);
writer.WriteStartDocument();
writer.WriteComment("This is to write the connection strings, text file location, and report destination.");

// the AdminPaths
writer.WriteStartElement("AdminPaths");
writer.WriteStartElement("AdminPath");
writer.WriteAttributeString("Name", "sqlConnection1");
writer.WriteAttributeString("connectionString", "asdf");
writer.WriteEndElement();

// the TextPath's
writer.WriteStartElement("TextPath");
writer.WriteStartElement("Text");
writer.WriteAttributeString("Key", "Path");
writer.WriteAttributeString("Value", "Test3");
writer.WriteEndElement();

writer.WriteStartElement("Text");
writer.WriteAttributeString("Key", "Report");
writer.WriteAttributeString("Value", "Test2");
writer.WriteEndElement();

writer.WriteEndElement(); // </AdminPaths>
writer.WriteEndDocument();
writer.Flush();
writer.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:36:05.950

This is invalid XML for reasons like:

*   More than one root element, that is a single `<>` element around all of the stuff. In the first example, `<AdminPaths>` is the single root element because everything else is contained within it
*   Nodes that don't have no name. For example, `<add=""` is invalid - if the node's name is `add` then it can't have a value directly. Ways to do that is `<add>Value</add>`. Otherwise, you must have an attribute like `<add key="">`
*   Similarly, `< Key="Path" Value="Test3">` is invalid because it doesn't have a name, just two attributes (Key and Value) and also it's not closed (Nodes need to either have a closing tag like `<add></add>` or be self-closing like `<add />` (Notice the / before the `>`)

Read up on the difference between a Node or Element and an Attribute in XML and it should become relatively clear what you need to build, then we can address the how.

# html - Notepad ++如何键入并打印整个布局

> ID：15937608
> 
> 赞同：1
> 
> 时间：2013-04-10T22:27:59.720
> 
> 标签：html, notepad++

我一直在使用记事本++，并决定尝试另一个文本编辑器......崇高的文本。我喜欢该编辑器中的方式，如果将文档另存为 .html，您可以在编辑器中输入

```
html 
```

然后你可以按下标签按钮，它会自动显示为：

```
<html>
<head>
    <title></title>
</head>
<body>

</body>
</html> 
```

看到我不想为崇高的文本支付 70 美元，我想知道 notepad++ 是否有这样的功能。也许是我不熟悉的插件？有人知道这样的事情吗？让我知道！请！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T22:31:29.680

从他们的文档中尝试[Zen Coding for notepad++](https://code.google.com/p/zen-coding/downloads/detail?name=Zen.Coding-Notepad%2b%2b.v0.7.zip&can=2&q=)：

> Zen Coding 是一个用于高速 HTML、XML、XSL（或任何其他结构化代码格式）编码和编辑的编辑器插件。该插件的核心是一个强大的缩写引擎，它允许您将表达式（类似于 CSS 选择器）扩展为 HTML 代码。例如：

`div#page>div.logo+ul#navigation>li*5>a`...可以扩展为：

```
<div id="page">
        <div class="logo"></div>
        <ul id="navigation">
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
                <li><a href=""></a></li>
        </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T22:31:56.767

[http://www.addictivetips.com/windows-tips/webedit-use-text-expansion-integrate-code-snippets-into-notepad/](http://www.addictivetips.com/windows-tips/webedit-use-text-expansion-integrate-code-snippets-into-notepad/)

WebEdit 是为 web 开发人员制作的 notepad++ 扩展，预装了几个特定于 web 开发的文本扩展。它还可以配置为允许您添加自己的文本扩展，如果您认为没有合适的预加载工作。

希望有帮助！

# sql - MS Access 2010 vba 查询

> ID：15937609
> 
> 赞同：1
> 
> 时间：2013-04-10T22:28:00.743
> 
> 标签：sql, ms-access, vba

# 概述

我正在尝试分解或分解装配列表。我们从设计程序生成的输入表开始。格式是固定的。

我试图将评论列中的每个程序集分解为一个新表，其中的结构号与该程序集相关联。

我打算创建一个查询，选择所有 50 列作为新表的输入，但我在网上找到了一些 VBA 代码，它可以根据列名动态创建查询。

该代码似乎可以工作，但它最终所做的只是从第一个结构编号中获取组装项，并在其余结构编号上重复它们。

我是如此接近......但距离解决方案仍然如此遥远 - 所以如果有人对如何更正我的查询有任何想法，我会全神贯注。

提前致谢。

M。

# 输入表样本数据

```
 StructureNumber Structure  Comment  2   Structure  Comment  3   Structure  Comment  4   Structure  Comment  5   Structure  Comment  6   Structure  Comment  7   Structure  Comment  8   Structure  Comment  9   Structure  Comment  10
26  1-S80-H2    1-TS-15PG   1-TMF-CB    1-TM-124TDS 1-TM-9D(22) 1-TM-103    22-TG-1G    11-TG-21C   11-TA-5L
27  1-S90-H4*   1-TBP-161A  1-C9-3A(12) 1-TMF-4B    1-TM-9D(2)  1-TM-101    2-TG-1G 1-TG-21C    1-TA-5L
28  1-S90-H5*   1-TBP-161A  1-C9-3A(12) 1-TMF-4B    1-TM-9D 1-TM-101    2-OPT-D 1-TM-N  * BURY 12.5 FT
29  2-S105-H1*  1-TH-10PV4XX-SP 1-C9-3A(12)D    1-TMF-4B    1-TM-9F 2-TM-101    1-OPT-D 1-OPT-2D    1-TM-N
30  3-S90-H2    1-TH-15PDX  1-TMF-112T  1-TM-9L 3-TM-101    1-OPT-D 1-OPT-2D    1-TM-N 
```

# 输出表样本

```
ID  StrNum  Assembly    Qty
22033   26  S80-H2  1.00
22067   26  TS-15PG 1.00
22101   26  TMF-CB  1.00
22135   26  TM-124TDS   1.00
22169   26  TM-9D(22)   1.00
22203   26  TM-103  1.00
22237   26  TG-1G   22.00
22271   26  TG-21C  11.00
22305   26  TA-5L   11.00
22339   26  OPT-D   1.00
22373   26  TM-N    1.00
22034   27  S80-H2  1.00
22068   27  TS-15PG 1.00
22102   27  TMF-CB  1.00
22136   27  TM-124TDS   1.00
22170   27  TM-9D(22)   1.00
22204   27  TM-103  1.00
22238   27  TG-1G   22.00
22272   27  TG-21C  11.00
22306   27  TA-5L   11.00
22340   27  OPT-D   1.00
22374   27  TM-N    1.00
22035   28  S80-H2  1.00
22069   28  TS-15PG 1.00
22103   28  TMF-CB  1.00
22137   28  TM-124TDS   1.00
22171   28  TM-9D(22)   1.00
22205   28  TM-103  1.00
22239   28  TG-1G   22.00
22273   28  TG-21C  11.00
22307   28  TA-5L   11.00
22341   28  OPT-D   1.00
22375   28  TM-N    1.00 
```

# VBA 代码

```
Option Compare Database

Function TransposeTable()
Dim rsMySet As DAO.Recordset
Dim strSQL As String
Dim OutputTable As String
Dim InputTable As String

Dim i As Integer

InputTable = "MatrixDataset"
OutputTable = "TabularDataset"

'Open the original matrix-style dataset
Set rsMySet = CurrentDb.OpenRecordset(InputTable)

'Start the count at the position number of the first column-oriented field
'Remember that Recordsets start at 0
'For j = 1 To rsMySet.RecordCount - 1
For i = 1 To rsMySet.Fields.Count - 1

'Use the recordset field.name property to build out the SQL string for the current field

strSQL = "INSERT INTO TabularDataset ([StrNum],[Assembly]) " & _
"SELECT [MatrixDataset].[StructureNumber] as StrNum," & _
"'" & rsMySet.Fields(i).Value & "'" & " AS Assembly " & "FROM MatrixDataset WHERE " & _
"'" & rsMySet.Fields(i).Value & "'" & " <> '';"

'Execute the SQL string

CurrentDb.Execute strSQL

'Move to the next column-oriented field

Next i

' Now we need to update the assembly to pull the quantity from
' the front of the field and place it in the Qty field

' UPDATE OutputTable SET Qty = left(Assy,instr(Assy,"-"-1))
strSQL = "UPDATE " & "`" & OutputTable & "` as ot" & " SET ot.Qty = left(ot.Assembly,instr(ot.Assembly,'-')-1);"
CurrentDb.Execute strSQL

strSQL = "UPDATE " & "`" & OutputTable & "` as ot" & " SET ot.Assembly = right(ot.Assembly,len(ot.Assembly)-instr(ot.Assembly,'-'));"
CurrentDb.Execute strSQL

'strSQL = "SELECT Assembly, Qty FROM `" & OutputTable & "` GROUP BY Assembly ORDER BY Assembly;"
'CurrentDb.Execute strSQL

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:03:54.327

尝试这样的事情，我的手附近没有访问权限，因此可以解决语法问题，并使用 ADO 而不是 DAO

```
Option Compare Database

Sub TransposeTable()
Dim Conn as ADODB.Connection
Dim tblInput As ADODB.Recordset
Dim OutputTable As String
Dim InputTable As String

Dim i As Integer
Dim StrNum As String
Dim Assembly As String
Dim Qty as Integer

InputTable = "MatrixDataset"
OutputTable = "TabularDataset"

set Conn = CurrentProject.Connection
Conn.Execute "create table " &    OutputTable & _
             " ( StrNum Text(20), Assembly Text(100), Qty Long) "

set tblInput = new ADODB.Recordset
tblInput.Open InputTable

do while not tblInput.EOF
    StrNum = tblInput(0)
    For i = 1 To tblInput.Fields.Count - 1
        Assembly = Right( tblInput(i), Len(tblInput(i)) - instr(tblInput(i), "-"))
        Qty = CInt(Left( tblInput(i), instr(tblInput(i), "-") - 1))
        Conn.Execute "insert " & OutputTable & "(StrNum, Assembly, Qty)" & _
         " values ('" & StrNum &"', '" & Assemby & "', " & CStr(Qty) & ")"
    Next i
    tblInput.MoveNext
loop 

tblInput.Close
set tblInput = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:10:59.397

这是一种稍微不同的方法，可以产生您想要的结果。请注意，如果您不希望结果中出现“* BURY 12.5 FT”，则输入值“1-TM-N * BURY 12.5 FT”可能需要进行一些清理

```
Sub BuildOutputTable()
Dim db As DAO.Database
Set db = CurrentDb
Dim rsInp As DAO.Recordset
Set rsInp = db.OpenRecordset("SELECT * FROM inpdata")
Dim rsOut As DAO.Recordset
Set rsOut = db.OpenRecordset("SELECT * FROM outdata")

Do Until rsInp.EOF
  rsOut.AddNew
  For i = 1 To rsInp.Fields.Count - 1
    rsOut.AddNew
    rsOut!StrNum = rsInp.Fields(0).Value
    If Not IsNull(rsInp.Fields(i)) Then
        Dim FirstDashPos As Integer
        FirstDashPos = InStr(rsInp.Fields(i), "-")
        rsOut!Qty = Val(Left(rsInp.Fields(i), FirstDashPos))
        rsOut!Assembly = Right(rsInp.Fields(i), Len(rsInp.Fields(i)) - FirstDashPos)
    End If
    rsOut.Update
  Next
  rsInp.MoveNext
Loop 
```

结束子

# c# - MEF ImportMany 不适用于 Caliburn.Micro

> ID：15937613
> 
> 赞同：0
> 
> 时间：2013-04-10T22:28:06.050
> 
> 标签：c#, .net, wpf, mef, caliburn.micro

这是我的元数据：

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class ModuleAttribute : ExportAttribute, IModuleMetadata
{
    public ModuleAttribute(string Contract) : base(Contract,typeof(IScreen))
    {            
        Region = Region.Sidebar;
        IsVisible = true;
        Order = short.MaxValue;
        Description = string.Empty;
    }

    public string Module { get; set; }        
    public Region Region { get; set; }        
    public string DisplayName { get; set; }        
    public bool IsVisible { get; set; }
    public string Description { get; set; }
    public short Order { get; set; }
} 
```

我的界面：

```
public interface IModuleMetadata
{       
   string Module { get; set; }
   Region Region { get; set; }
   string DisplayName { get; set; }
   bool IsVisible { get; set; }
   string Description { get; set; }
   short Order { get; set; }
} 
```

我正在使用：

```
[ImportMany]
public IEnumerable<Lazy<IScreen, IModuleMetadata>> Mods
{
    get;
    set;
} 
```

但我的 Mod 总是以`null`.

更新：

```
[Module("Unit", Module = "Stock")]
class UnitViewModel : BaseViewModel, ICUDB, IHandle<UnitModel>
{ 
```

有趣的是，当我询问使用 GetExport 时。我得到了所有 15 个导出的类。

```
var ex = container.GetExports<IScreen, JIMS.Common.Interface.IModuleMetadata>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:44:28.443

要检查的另一件事是如何创建 BaseViewModel。如果您从 shell 或其他位置执行 new BaseViewModel()，MEF 将无法在类中发挥其魔力。MEF 需要创建任何将使用 MEF 的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T00:00:15.383

您需要检查以确保您匹配合同，这意味着挖掘元数据。虽然我建议这样做以便您可以看到 MEF 如何将所有部分组合在一起，但您应该尝试[为`ImportMany`](http://msdn.microsoft.com/en-us/library/dd833131%28v=vs.95%29.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:25:33.333

由于您使用的是出口合同，因此您将需要相同的进口合同。

喜欢：

```
[ImportMany("Unit")]
public IEnumerable<Lazy<IScreen, IModuleMetadata>> Mods 
```

**使这项工作的**另一种方法是将导出修改为：****

 **```
[Module(null, Module = "Stock")]
class UnitViewModel : BaseViewModel, ICUDB, IHandle<UnitModel> 
```

通过将 null 或空字符串作为合同传递，则将使用该类型。

如果您并不总是需要合同，那么您可以将无参数的 .ctor 添加到`ModuleAttribute`.**

# javascript - 安全 - 不是字符集 - [^z]？

> ID：15937618
> 
> 赞同：3
> 
> 时间：2013-04-10T22:28:14.860
> 
> 标签：javascript, regex, jslint

[http://www.jslint.com](http://www.jslint.com)

`[^foob]`声明由于安全问题，它不允许字符集。（我选择不选择忽略选项）

有什么例子可以说明这可能是一个安全问题？

# javascript - 未捕获的类型错误说函数不能应用于对象？

> ID：15937619
> 
> 赞同：1
> 
> 时间：2013-04-10T22:28:40.917
> 
> 标签：javascript, jquery

当我尝试使用 javascript/jquery 将某些文本替换为其他特定文本时出现此错误。

这是错误：

> 未捕获的类型错误：对象 [object HTMLAnchorElement] 没有方法“html”

以下是网站上的 javascript 行：

```
$(document).ready({
   var navigationLinks = $('.nav a');
        for(var i=0; i < navigationLinks.length; i++){
             var thisLink = navigationLinks[i];
             switch(thisLink.html()){
                case "About":
                    thisLink.html().replace(/About/g,'&#xe00f;');

                case "Work":
                     thisLink.html().replace(/Work/g,'&#xe010');

                case "CV":
                    thisLink.html().replace(/CV/g,'&#xe00c');

                case "Resume":
                    thisLink.html().replace(/Resume/g,'&#xe00d;');

                case "down":
                    thisLink.html().replace(/down/g,'&#xe00d;');

                case "Mail":
                    thisLink.html().replace(/Mail/g,'&#xe011;');

                case "Dribbble":
                    thisLink.html().replace(/Dribbble/g,'&#xe015;');

                 case "GooglePlus":
                    thisLink.html().replace(/GooglePlus/g,'&#xe012;');

                case "Facebook":
                    thisLink.html().replace(/Facebook/g,'&#xe013;');

                case "Twitter":
                   thisLink.html().replace(/Twitter/g,'&#xe014');

                default:
                   thisLink.html().replace(thisLink.html(),thisLink.html());
        }
    }
    window.onscroll=scrollFunc;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:30:35.323

改变：

```
navigationLinks[i]; // DOM element which doesn't have an `html` function 
```

至：

```
navigationLinks.eq(i);// jQuery wrapper which does have an `html` function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:31:40.810

.html() 是一个 jquery 方法。你要

```
$(thislink).html() 
```

# javascript - 使用jquery从另一个表单中动态添加预先填充了用户输入的新表单字段？

> ID：15937621
> 
> 赞同：0
> 
> 时间：2013-04-10T22:28:43.817
> 
> 标签：javascript, jquery, velocity

好的，这就是我需要做的——

需要创建一个表单 - 有两个输入：项目和数量用户将输入...会有一个添加按钮，如下所示。

```
<form id="form1">
   <input type="text id="item" name="" value="" placeholder="Item #">
   <input type="text id="quantity" name="" value="" placeholder="quantity">
   <input name="Add" type="button" class="add" value="add"/>
</form> 
```

这是棘手的部分....

每次用户点击添加按钮时，我都需要来自 form1 的输入以单独的表单“form2”创建一个新的输入......即。他们可能会添加多个项目。添加的每个项目都需要创建一个新的输入。

下面输入的名称将是#item 和#quantity 值的组合用户然后将此表单提交到我的购物车网址

它必须这样格式化

```
<form id="form2">
<input name="ADD_#itemvalue=#quantityvalue" value="" id="NewUcItem">
<input name="submit" type="button" value="submit"
</form> 
```

要么需要使用 jquery 和/或 velcoity 来完成

想法？

任何帮助将不胜感激！

谢谢-尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:35:23.797

实际上几天前刚刚做了类似的事情。我对其进行了一些编辑，因此它应该适合您。

```
<script>
function addForm(){
    $("#forms").append(
        "<form><input/>........</form>"
    );
}
</script>

<input name="Add" type="button" class="add" value="add" onclick="addForm();"/>
<div id="forms"></div> 
```

只需使用您需要的任何内容编辑附加部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:53:09.020

这是我的答案：

```
(function($){ 
   $('.add').click(function(){ 
     var item = $('#item').val(); 
     var quantity = $('#quantity').val(); 
     $('<input name="ADD_'+item+'='+quantity+'" value="" ').insertBefore(#form_id2 input[name="submit"]'); 

   }):
})(jQuery); 
```

我希望这有帮助

# google-api - 在谷歌日历 api 中获取代码时出错

> ID：15937623
> 
> 赞同：0
> 
> 时间：2013-04-10T22:28:48.050
> 
> 标签：google-api, google-calendar-api, google-apps, google-api-php-client

我在谷歌日历应用程序中使用 php 客户端库。要获取访问令牌，它要求输入用户名和密码，然后允许访问选项。我想要一步完成。为此，我使用了[https://www.google.com/accounts/ClientLogin](https://www.google.com/accounts/ClientLogin) \ url 并使用 curl 发送用户名和密码进行身份验证。它返回 SID 和 Auth 值。请让我知道如何使用 Auth 值来获取访问令牌。

```
 curl https://www.google.com/accounts/ClientLogin \
 --data-urlencode Email=brad.gushue@example.com --data-urlencode Passwd=new+foundland \
 -d accountType=GOOGLE \
 -d source=Google-cURL-Example \
  -d service=lh2

  Response:-

   SID=DQAAAHYBADCv2pSv7nfl-
  LSID=EUBBBIaBADCl- 
   Auth=EUBBIacAAADK-kN-

  I'm using the follwing code but it is 2 steps varification:

   <?php
   require_once 'google-api-php-client/src/Google_Client.php';
  require_once 'google-api-php-client/src/contrib/Google_PlusService.php';

  // Set your cached access token. Remember to replace $_SESSION with a
  // real database or memcached.
  session_start();

  $client = new Google_Client();
  $client->setApplicationName('Google+ PHP Starter Application');
  // Visit https://code.google.com/apis/console?api=plus to generate your
  // client id, client secret, and to register your redirect uri.
  $client->setClientId('insert_your_oauth2_client_id');
 $client->setClientSecret('insert_your_oauth2_client_secret');
 $client->setRedirectUri('insert_your_oauth2_redirect_uri');
  $client->setDeveloperKey('insert_your_simple_api_key');
 $plus = new Google_PlusService($client);

  if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
   header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
  }

  if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
  }

  if ($client->getAccessToken()) {
  $activities = $plus->activities->listActivities('me', 'public');
  print 'Your Activities: <pre>' . print_r($activities, true) . '</pre>';

  // We're not done yet. Remember to update the cached access token.
  // Remember to replace $_SESSION with a real database or memcached.
  $_SESSION['token'] = $client->getAccessToken();
  } else {
  $authUrl = $client->createAuthUrl();
  print "<a href='$authUrl'>Connect Me!</a>";
 }

  I wanna to show all the events from my account to on my site. Please let me know   
  how can I accomplish this.

  Thanks. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:01:40.153

您使用的 PHP 客户端库不支持 ClientLogin，而是使用 Oauth2，这是推荐的方法。

但是，还有另一个 php 库 ZEND，它有一个使用 clientLogin 的日历库。 [http://goo.gl/Rhet6](http://goo.gl/Rhet6)

```
// Parameters for ClientAuth authentication
$service = Zend_Gdata_Calendar::AUTH_SERVICE_NAME;
$user = "sample.user@gmail.com";
$pass = "pa$$w0rd";

// Create an authenticated HTTP client
$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service);

// Create an instance of the Calendar service
$service = new Zend_Gdata_Calendar($client); 
```

# java - 用扫描仪回显文本文件并使其双倍行距？

> ID：15937627
> 
> 赞同：2
> 
> 时间：2013-04-10T22:29:03.803
> 
> 标签：java

我必须创建一个 EchoDouble 类来扩展 Echo 类，它将文本文件回显到控制台。

这个文本文件的内容是

```
Nature's first green is gold, 
Her hardest hue to hold. 
Her early leaf's a flower; 
But only so an hour. 
```

但我正在尝试编辑 EchoDouble 类中的 processLine 方法，以便它将像这样以双倍行距回显文本文件

```
Nature's first green is gold, 

Her hardest hue to hold. 

Her early leaf's a flower; 

But only so an hour. 
```

**回声类**

```
 import java.util.Scanner;
 import java.io.*;

    public class Echo{
      String fileName; // external file name
      Scanner scan; // Scanner object for reading from external file

      public Echo(String f) throws IOException
      {
        fileName = f;
        scan = new Scanner(new FileReader(fileName));
      }

      // reads lines, hands each to processLine
      public void readLines(){
        while(scan.hasNext()){
          processLine(scan.nextLine());
        }
        scan.close();
      }

      // does the real processing work
      public void processLine(String line){
        System.out.println(line);
      }
    } 
```

**EchoDouble 类**

```
import java.io.*;

public class EchoDouble extends Echo
{
  public EchoDouble (String datafile) throws IOException
  {
    super(datafile);
  }

  // Prints the given line and inserts a blank line
  // Overrides the processLine method in Echo class
  public void processLine(String line)
  {
    /* **code here** */
  }
} 
```

我是java中这个回声和扫描仪的新手，并且被困在这个问题上。如果有人可以就如何解决这个问题给我任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:33:39.940

这个怎么样：

```
@Override
public void processLine(String line){
     System.out.println(line);
     System.out.println();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:35:27.143

最简单的做法是：

```
public void processLine(String line) {
  System.out.println(line);
  System.out.println();
} 
```

但这会给你一个额外的空行。或者，

```
public void processLine(String line) {
  System.out.println();
  System.out.println(line);
} 
```

会在开头给你一个额外的空行。所以你需要一个关于它是否是第一行的概念。

你可以把这些知识放在`processLine`：

```
private boolean printedAnythingYet = false;
public void processLine(String line) {
  if (printedAnythingYet) {
    System.out.println();
  }
  System.out.println(line);
  printedAnythingYet = true;
} 
```

或在您的`readLines`：

```
public void readLines() {
  boolean isFirstLine = true;
  while (scan.hasNext()) {
    processLine(scan.nextLine(), isFirstLine);
    isFirstLine = false;
  }
  scan.close();
}

public void processLine(String line, boolean isFirstLine) {
  if (!isFirstLine) {
    System.out.println();
  }
  System.out.println(line);
} 
```

我不确定我更喜欢哪一个。老实说，我认为不`processLine`应该`public`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:57:48.220

做：

```
public void processLine(String line){
     System.out.println("\n" + line);
} 
```

\n 是创建新行的原因，然后它会回显。

# c - 什么是覆盖数据？

> ID：15937629
> 
> 赞同：1
> 
> 时间：2013-04-10T22:29:09.610
> 
> 标签：c

我编写了这个 c 程序来了解结构和指针。

**问题**

> 该程序至少在接收输入时工作正常（通过 gdb 测试确认），不正确的是，在打印输出数据时，它似乎被某些东西覆盖了......

**问题**

> 如果编译器为某个数组保留内存，是否可以假设在函数“死亡”后，保留结束，并将内存分配给其他进程，是否正确？因此这将解释为什么结构数据被覆盖？

**编码**

```
 #include<stdio.h>
    #include<stdlib.h>

    typedef struct {int marks;int roll;} ADDRESS ;

    void printer(ADDRESS* pointer,int len)
         {          printf("-- Entering printing mode -- \n");
                ADDRESS* p1;
                p1=pointer;
                int counter=0;
                while ( counter < len)
                {
                   printf(" --> Entry %d  \n",counter);
                   printf("Marks : %d \n",p1->marks);
                   printf("Roll : %d \n ",p1->roll);
                   counter++;p1++;
                }
         }

     ADDRESS *stater(int number)
           {    
                   printf("\t STANDBY FOR INPUT PART \t \n\n\n");
               ADDRESS x[number];
               ADDRESS *c,*i;
               c=x;
               i=c;
               int counterf=number;
               int counter=0;
               while (counter!=counterf)
                   {
                        printf("\t Input the mark : ");
                        scanf("%d",&(c->marks));
                        printf("\t Input the roll : ");
                        scanf("%d",&(c->roll));
                        printf("\n");
                        counter++;
                        c=c+1;
                   }
               return i;
              }

            int main()
                 {
                         ADDRESS *o=stater(4);
                         printer(o,4);
                         return 0;

                  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:33:34.920

在内存被释放后，它通常会被重新分配。当内存存储在堆栈上时尤其如此。所以，是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:04:49.737

这对我来说很有效：

```
#include<stdio.h>
#include<stdlib.h>

typedef struct {int marks;int roll;} ADDRESS ;

void printer(ADDRESS* pointer,int len)
     {          printf("-- Entering printing mode -- \n");
            ADDRESS* p1;
            p1=pointer;
            int counter=0;
            while ( counter < len)
            {
               printf(" --> Entry %d  \n",counter);
               printf("Marks : %d \n",p1->marks);
               printf("Roll : %d \n ",p1->roll);
               counter++;p1++;
            }
     }

ADDRESS *stater(int number)
       {    
           printf("\t STANDBY FOR INPUT PART \t \n\n\n");
           ADDRESS* x = (ADDRESS *)malloc(number*sizeof(ADDRESS));
           ADDRESS *c,*i;
           c=x;
           i=c;
           int counterf=number;
           int counter=0;
           while (counter!=counterf)
               {
                    printf("\t Input the mark : ");
                    scanf("%d",&(c->marks));
                    printf("\t Input the roll : ");
                    scanf("%d",&(c->roll));
                    printf("\n");
                    counter++;
                    c=c+1;
               }
           return i;
          }

        int main()
             {
                     ADDRESS *o=stater(4);
                     printer(o,4);
                     return 0;

              } 
```

# r - RStudio、knitr、pandoc、Word：如何在我的 docx 中获得“新页面”？

> ID：15937631
> 
> 赞同：10
> 
> 时间：2013-04-10T22:29:21.563
> 
> 标签：r, knitr, rstudio, docx, pandoc

我正在使用 RStudio、knitr、pandoc、MS Word 组合在`docx`文档中获取最终结果。

有时，我希望报告在新页面上继续。我找不到实现这一目标的方法。

根据我的谷歌搜索，似乎可以使用`CSS`. 我不知道`HTML`or `CSS`，但如果这是我将学习的解决方案。只是不想走错路...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:50:29.860

试试 LaTeX 命令 \newpage。Pandoc 可以识别它，并且可能（现在不在计算机上）将其翻译为 Word 分页符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-17T02:56:27.783

```
​```{=openxml}
<w:p>
  </w:pPr>
    <w:r>
      <w:br w:type="page"/>
    </w:r>
</w:p>
​``` 
```

将此代码插入.RMD文件中您想要的新页面位置，并将文件编织成word文件。它会被 pandoc 翻译成一个新的分页符，就像使用 $Latex$ 的 \newpage 命令一样。

# assembly - 了解程序集堆栈操作

> ID：15937634
> 
> 赞同：2
> 
> 时间：2013-04-10T22:29:27.600
> 
> 标签：assembly, arm, bare-metal

我正在裸机 ARM 上编写一个 sdram 测试程序。我用 C 编写了它，但现在我想修改生成的程序集以防止程序使用 sdram，这意味着除其他外，没有堆栈。

我最近开始学习ARM汇编，不明白编译器生成的汇编是如何使用下面代码中的堆栈的（我通过阅读ARM ARM :/也找不到答案）。32位的变量值放在栈上，但是为什么push在函数开头保留3乘以32位呢？有人可以在这里解释堆栈操作吗？

C代码：

```
/* ugly to have it as global but it reduces stack usage*/                                              
unsigned int const led_port[]= {0,0,1,1,2,2,3,3,4,4};
unsigned int const led_value_on[]={0x90,0x9,0x90,0x9,0x90,0x9,0x90,0x9,0x90,0x9};                      
unsigned int const masks[] = {0xf0,0xf,0xf0,0xf,0xf0,0xf,0xf0,0xf,0xf0,0xf};                           
unsigned int const led_value_off[]={0x80,0x8,0x80,0x8,0x80,0x8,0x80,0x8,0x80,0x8};                     

 void gbe_led_on(int i)
 {                        
         unsigned int value = 0;                                                                                
         phy_read(led_port[i], 0x10, &value);                                                                   
         value &= ~masks[i];
         value |= led_value_on[i];                                                                              
         phy_write(led_port[i], 0x10, value);
 } 
```

生成的程序集（来自 gcc-arm-elf）：

```
 <gbe_led_off>:
push    {r4, r5, r6, lr}        /* ;reserve space on the stack for 3 32 bits variables + return address */
ldr     r5, [pc, #84]   ; ffff1578 <gbe_led_off+0x60>  /*r5=led_port (array base address) */
sub     sp, sp, #8              /* sp = sp-8 (decimal 8) what does it point to??*/
ldr     r4, [r5, r0, lsl #2]    /* r4 = *(led_port+i)&0x00ff, (shift from 16 bits) */
add     r2, sp, #8              /* r2 = sp+8 (decimal 8) why???*/
mov     r6, r0                  /* r6 = i */
mov     r3, #0                  /* r3 = 0 */
mov     r0, r4                  /* r0 = led_port[i]*/
str     r3, [r2, #-4]!          /* r3 = *(sp+8-4); update r2, to which value???*/
add     r5, r5, r6, lsl #2      /* r5 = led_port[i] & 0x00ff */
mov     r1, #16                 /* r1 = 16 (decimal) */
bl      ffff13f8 <phy_read>     /* call phy_read with arguments on r0, r1, r2*/
ldr     r1, [r5, #40]   ; 0x28  /* r1 = masks[i] */
ldr     r3, [sp, #4]            /* r3 = *(sp+4) ????*/
ldr     r2, [r5, #120]  ; 0x78  /* r2 = led_value_on[i] */
bic     r3, r3, r1              /* value &= masks[i] */
orr     r3, r3, r2              /* value |= led_value_on[i] */
mov     r0, r4                  /* r0 = led_port[i] */
mov     r2, r3                  /* r2 = value  */
mov     r1, #16                 /* r1 = 16    */  
str     r3, [sp, #4]            /* *(sp+4) = value; why do we do that???*/             
bl      ffff13cc <phy_write>    /* branch to phy_write with arguments on r0,r1,r2*/
add     sp, sp, #8              /* sp = sp+8 restore stack pointer before pop? */
pop     {r4, r5, r6, pc}        /* remove 4 bytes from the stack and branch to return address */
.word   0xffff1a30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:04:48.993

push 是保存寄存器`r4`, `r5`, ，`r6`所有这些都必须根据 ARM 编程模型来保存。的推送`lr`是在您调用将修改它的其他函数时保留返回地址。从`sub 8`堆栈中保留另外 8 个字节的内存供其他变量使用（`value`变量） - 稍后`str r3, [2, #-4]`在行中使用。此外，分支链接也`bl`可能正在修改堆栈空间，因此您的堆栈内存问题可能比您想象的要大。此外，您最后关于 4 个字节的流行评论是不正确的 - 它释放了 16 个字节的空间。`phy_read``phy_write`

现在，您将有哪些可用的 RAM 资源可供使用？你需要一些东西，否则你`unsigned int value`将没有任何工作的地方，更不用说你的电话了。你必须有一些可用的东西。如果你这样做了，你可以通过链接描述文件和`section`指令告诉你的 C 程序，省去汇编程序的麻烦。

# objective-c - 指定初始化器的代码是什么样的？

> ID：15937636
> 
> 赞同：0
> 
> 时间：2013-04-10T22:29:29.153
> 
> 标签：objective-c

我查看了有关初始化和初始化程序概念的书籍和多个论坛帖子，但我仍然无法理解指定的初始化程序。

它的代码是什么样的？

在下面的这段代码中，哪个代码行是指定的初始值设定项？

```
-( Fraction *) initWith (int) n over: (int) d
{
    self  = [ super init];
    if (self) 
        [self setTo: n over: d ];
    return self; 
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:44:53.953

您对“指定初始化程序”一词的含义有些困惑。一个类可能有几个初始化器。让我们学习一个虚构的 Cat 课程。它可能有以下初始化程序：

```
- init
- initWithName:
- initWithName:breed:
- initWithName:breed:age: 
```

指定的初始化程序是实际执行该类的初始化并调用到的初始化程序`super`。那里的最后一个`initWithName:breed:age`可能是指定的初始化程序，因为它获取的数据最多。它可能是这样实现的：

```
- (id)initWithName:(NSString *)name breed:(CatBreed)breed age:(NSUInteger)age {
    if (self = [super init]) {
        _name = [name copy];
        _breed = breed;
        _age = age;
    }
    return self;
} 
```

这完成了设置实例的所有工作。其他初始化程序将根据这个实现。例如，另一个可能是这样实现的：

```
- (id)initWithName:(NSString *)name {
    return [self initWithName:name breed:CatBreedTabby age:0];
} 
```

所以要在子类中改变类的初始化行为，只需要改变指定的初始化器，其他的就免费了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T22:33:56.697

每个初始化器都必须在其实现中调用指定的初始化器。

在这种情况下，`[super init]`调用是对类的超类初始化程序的调用，因此这很可能是设计的初始化程序本身。

指定的初始化器可以有多个，具体取决于特定的类。为了找到那些，您需要检查文档。

例如`UIView`有两个指定的初始化器

*   `-initWithFrame:`
*   `-initWithCoder:`

并且您必须在自定义`UIView`子类中可能拥有的任何其他初始化程序中调用两者之一。

有关更多详细信息，请参阅[多个初始化器和指定初始化器](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/Initialization/Initialization.html)（感谢 Seamus）

# spotify - 无法使用我的高级帐户获取 Spotify API 密钥

> ID：15937640
> 
> 赞同：0
> 
> 时间：2013-04-10T22:29:41.537
> 
> 标签：spotify

我想使用 libspotify 但我无法获得任何应用程序密钥。我的密钥中没有任何内容：http: [//developer.spotify.com/technologies/libspotify/keys/](http://developer.spotify.com/technologies/libspotify/keys/)

我找不到要一个链接。我确实使用我的 Spotify 高级帐户登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:03:38.113

它现在应该可以再次工作了，其中一个后端服务的早晨很糟糕。

# html - 是否可以使用 CSS 在父级的 y 滚动条上显示子元素？

> ID：15937642
> 
> 赞同：2
> 
> 时间：2013-04-10T22:29:54.350
> 
> 标签：html, css

我有一个用`<ul>`和`<li>`元素构建的选择框。一些列表项比父框更宽，所以我添加了一个`:after`伪元素来用`:hover`.

一切都*很好*，除非`<ul>`元素有垂直滚动条。然后覆盖层被隐藏并出现一个水平滚动条。

有没有办法在父级的垂直滚动条上显示子级*覆盖*？

JSFiddle 在这里：http: [//jsfiddle.net/x9TZB/14/](http://jsfiddle.net/x9TZB/14/)（在 Chrome 中工作，但目前我的 IE10 崩溃了......很奇怪。）

**更新：**

我已经能够解决我的问题（大部分），方法是向`<div>`DOM 添加另一个元素，将它定位在`<li>`元素上，并设置一堆事件和计时器。还有一些粗糙的边缘；它无论如何都不完美（特别是因为 IE 不支持`pointer-events:none`）。

我会留下这个问题，以防有人找到可行的解决方案——如果没有，那么也许作为更新 HTML5 标准布局规则的默认建议 :-)

* * *

代码粘贴在这里，以防 JSFiddle 页面消失。`<ul>`尝试从元素中添加/删除“滚动”类以查看差异。

```
-- CSS --

ul {
    position: absolute;
    display: block;
    margin: 0;
    list-style-type: none;
    border: 1px solid #aaaaaa;
    width: 150px;
    font: 12px verdana, arial, sans-serif;
    padding: 0;
    overflow-x: visible;
}
ul.scrolling {
    overflow-y: scroll;
    margin-right: -16px;
}
li {
    position: relative;
    margin: 0;
    padding: 0 5px;
    line-height: 25px;
    text-overflow: ellipsis;
    -ms-text-overflow: ellipsis;
    white-space: nowrap;
    color: black;
    cursor: pointer;
    overflow: hidden;
}
ul.scrolling > li {
    padding-right: 6px;
}
li:hover {
    background-color: #c7e0ff;
    overflow: visible;
}
li:hover:after {
    content: attr(contents);
    position: absolute;
    left: 0;
    top: 0;
    padding: 0 5px;
    z-index: 999999;
    background-color: #c7e0ff;
}

-- HTML --

<ul class="scrolling">
    <li>Lorem ipsum</li>
    <li>Dolor sit amet</li>
    <li>Consectetur adipisicing elit</li>
    <li>Sed do eiusmod tempor</li>
    <li>Incididunt ut labore et dolore</li>
    <li>Magna aliqua</li>
    <li>Ut enim ad minim veniam</li>
    <li>Quis nostrud exercitation</li>
    <li>Ullamco laboris nisi ut</li>
    <li>Aliquip ex ea commodo consequat</li>
    <li>Duis aute irure dolor</li>
    <li>In reprehenderit</li>
    <li>In voluptate velit esse</li>
    <li>Cillum dolore eu fugiat nulla pariatur</li>
    <li>Excepteur sint occaecat</li>
    <li>Cupidatat non proident</li>
    <li>Sunt in culpa qui officia</li>
    <li>Deserunt mollit anim id est laborum</li>
</ul>

-- JavaScript (using jQuery) --

//Make sure this is run after the DOM is ready.
$('li').each(function () {
    $(this).attr('contents', $(this).html());
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:00:26.960

我似乎达到了你所追求的效果。这似乎有点“紧张”，但也许这对你来说是一个很好的起点。

我将列表包含在一个 div 中，溢出-y 设置为滚动。然后，我将 li 的位置设置为悬停时的绝对位置，并增加 z-index。更改 z-index 似乎会导致“紧张不安”。这在 Chrome 中有效。

看看 - [http://jsfiddle.net/x9TZB/17/](http://jsfiddle.net/x9TZB/17/)

CSS 更改

```
li:hover{z-index:1;position:absolute;}
#listContainer{z-index:0;width:150px;height:200px;border:1px solid red;overflow-y:scroll;overflow-x:visible;} 
```

**更新：**这在没有包含 div 的情况下有效。只需从上面的小提琴中删除 div .. 还在 IE9 中对其进行了测试，似乎也可以正常工作。

# wcf - 使用 wcf 客户端的无效证书

> ID：15937644
> 
> 赞同：1
> 
> 时间：2013-04-10T22:30:10.603
> 
> 标签：wcf, certificate, wshttpbinding, transport-security

我使用这个 web.config 创建了一个简单的 wcf 服务以部署在 iis 上：

```
<?xml version="1.0"?>
<configuration>

<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.diagnostics>
    <trace autoflush="true" />
    <sources>
        <source name="System.ServiceModel"
          switchValue="Verbose"
          propagateActivity="true">
            <listeners>
                <add name="sdt"
                       type="System.Diagnostics.XmlWriterTraceListener"
                       initializeData= "log.e2e" />
            </listeners>
        </source>
    </sources>
</system.diagnostics>
<system.serviceModel>
    <services>
         <service behaviorConfiguration="ServiceBehavior" name="WcfService1.Service1">
             <endpoint address="" binding="wsHttpBinding"
                 bindingConfiguration="wsHttpEndpointBinding"
                 name="wsHttpEndpoint" contract="WcfService1.IService1">
             </endpoint>

             <endpoint address="mex" binding="mexHttpsBinding" bindingConfiguration=""
                 name="MexHttpsBindingEndpoint" contract="IMetadataExchange" />
         </service>
    </services>
    <bindings>
        <wsHttpBinding>
            <binding name="wsHttpEndpointBinding">
                <security mode="TransportWithMessageCredential">
                    <transport clientCredentialType="Windows" />
                    <message clientCredentialType="UserName" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
            <behavior name="ServiceBehavior">
                <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
                <serviceCredentials>
                    <userNameAuthentication userNamePasswordValidationMode="Windows" />
                </serviceCredentials>
            </behavior>
        </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    </system.serviceModel>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
    </system.webServer>

</configuration> 
```

我在关注这个例子：

[http://msdn.microsoft.com/en-us/library/aa354508%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/aa354508%28v=vs.100%29.aspx)

会员身份认证除外。我按照程序在我的客户端机器和服务器机器上安装了证书。如果我浏览该服务，则会显示证书问题，但无论如何我可以访问不推荐的站点并且可以看到 wsdl。使用 wcf 客户端时，它会引发错误“无法为 SSL/TLS 安全通道建立信任关系”。但是使用 WCFStorm www.wcfstorm.com/，它可以工作。

我不知道是否总是需要验证来自客户端的证书，或者证书是否有问题。这是一个测试环境...感谢任何指导！

# php - PHP 如何解释本地路径以及它在哪里打开文件？

> ID：15937648
> 
> 赞同：0
> 
> 时间：2013-04-10T22:30:29.253
> 
> 标签：php, file, fwrite

我试图弄清楚 WordPress 主题是如何工作的。为此，我想从各种功能写入文件。该文件位于站点的根目录。

```
fwrite(fopen("output.txt", "a"), "Test output\n"); 
```

从`/test.php`，这输出到`/output.txt`。我想在一个深度嵌套的函数中写一个变量的值。将上面的代码输出复制/粘贴到我找不到的地方。这：

```
fwrite(fopen("/output.txt", "a"), "Test output\n"); 
```

也不行。它提出：

`Warning: fopen(/output.txt) [function.fopen]: failed to open stream: Permission denied in /public_html/test.php on line 17`

`Warning: fwrite() expects parameter 1 to be resource, boolean given in /public_html/test.php on line 17`

该手册指定了一些关于方案和包装器的内容，但没有太多关于路径的说明。

> 如果 PHP 决定文件名指定一个本地文件，那么它将尝试在该文件上打开一个流。该文件必须可供 PHP 访问，因此您需要确保文件访问权限允许此访问。如果您已启用`safe mode`或`open_basedir`，则可能会应用更多限制。

如何正确引用我想要的路径，PHP 如何选择使用相对路径写入的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:33:12.713

如果您不使用绝对路径，则该路径是相对于 wordpress 的 index.php 的。要访问与您的 php 文件存储在同一文件夹中的文件，请使用全局常量[`__DIR__`](http://php.net/manual/de/language.constants.predefined.php)：

```
fwrite(fopen(__DIR__ ."/output.txt", "a"), "Test output\n"); 
```

`__DIR__`将为您提供当前 php 脚本的绝对路径。

# richfaces - 是否可以动态更改 Rich-Faces 对话框的大小？

> ID：15937652
> 
> 赞同：1
> 
> 时间：2013-04-10T22:30:57.500
> 
> 标签：richfaces, modal-dialog

![在此处输入图像描述](https://i.stack.imgur.com/q6Fcm.png)

我想创建一个带有 3 个切换面板的对话框作为图像，但我希望每次显示/隐藏切换面板时都会更改对话框大小。

这可以使用 Rich-Faces 对话框吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:49:51.287

两者`rich:modalPanel`都有`rich:popupPanel`一个`autosized`属性，将其设置为 true ，它会做你想做的事。例如

```
<rich:popupPanel id="panel" autosized="true">
    <rich:collapsiblePanel …
    <rich:collapsiblePanel …
    …
</rich:popupPanel> 
```

# php - 从functions.php中检索变量

> ID：15937653
> 
> 赞同：0
> 
> 时间：2013-04-10T22:30:57.583
> 
> 标签：php, wordpress, buddypress

我正在使用以下功能来检查 BuddyPress 注册时列入黑名单的电子邮件域.....

```
function bp_as_restrict_signup_domains( $email_blacklist_result ) {

    $banned = array(
        'test.com', 
        'spammer.com'
    );
    $error = 'Your email domain has been the source of spam. Please use another email address.';

    $email = $email_blacklist_result['user_email']; 
    $domain = array_pop(explode('@', $email));
    if ( in_array($domain, $banned))
    {
        $email_blacklist_result['errors']->add('user_email', __($error, 'bp-restrict-email-domains' ) );
    };
    return $email_blacklist_result;
}
add_filter( 'bp_core_validate_user_signup', 'bp_as_restrict_signup_domains' ); 
```

我想做的是向用户提供一些他们的电子邮件被拒绝的反馈，我如何向这个函数添加一个可以在模板中检索的变量？

像`$bl_result = blacklisted`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:38:44.503

在您的注册模板中，您应该看到：

```
<?php do_action( 'template_notices' ); ?> 
```

您应该能够像这样向它发送消息：

```
if ( in_array($domain, $banned))
{
    $email_blacklist_result['errors']->add('user_email', __($error, 'bp-restrict-email-domains' ) );
    bp_core_add_message( 'Your email has been rejected' );
}; 
```

# oracle - Oracle XQuery - 选择满足条件的最后一个条目

> ID：15937655
> 
> 赞同：0
> 
> 时间：2013-04-10T22:31:16.823
> 
> 标签：oracle, xquery

我有一个名为 SALARIES_LOG 的 XMLTYPE 表，每一行都有这样的数据：

```
<pay_rise event_id="511"><employee_id>1</employee_id> ... </pay_rise>
<pay_rise event_id="512"><employee_id>2</employee_id> ... </pay_rise>
<pay_rise event_id="513"><employee_id>1</employee_id> ... </pay_rise>
<pay_rise event_id="514"><employee_id>3</employee_id> ... </pay_rise>
<pay_rise event_id="515"><employee_id>1</employee_id> ... </pay_rise>
<pay_rise event_id="516"><employee_id>2</employee_id> ... </pay_rise> 
```

对于每个employee_id 值，如果该值有多个条目，我需要获取**最后一个**条目。在示例数据中，它将是：

```
<pay_rise event_id="515"><employee_id>1</employee_id></pay_rise>
<pay_rise event_id="516"><employee_id>2</employee_id></pay_rise> 
```

请注意，我不需要employee_id = 3 的条目，因为只有一个这样的条目。

使用 XQuery 是否可以得到这样的结果？我很接近，但仍然坚持：

```
SELECT XMLQuery(
'for $d in ora:view("SALARIES_LOG")/pay_rise,
     $e in ora:view("SALARIES_LOG")/pay_rise

    where $d/employee_id = $e/employee_id and $d/@event_id < $e/@event_id

    return 
    <pay_rise>{$e/@event_id}
      <employee_id>{$d/employee_id/text()}</employee_id>          
    </pay_rise>' 
RETURNING CONTENT) FROM dual; 
```

这给了我：

```
<pay_rise event_id="513"><employee_id>1</employee_id></pay_rise> -> unwanted entry
<pay_rise event_id="515"><employee_id>1</employee_id></pay_rise>
<pay_rise event_id="516"><employee_id>2</employee_id></pay_rise>
<pay_rise event_id="515"><employee_id>1</employee_id></pay_rise> -> unwanted & duplicated entry 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:00:59.367

您的查询分别比较每对`pay_rise`元素，这不是您想要的。试试这个：

```
SELECT XMLQuery(
' for $id in distinct-values(ora:view("SALARIES_LOG")/pay_rise/employee_id)
  let $pay_rises := ora:view("SALARIES_LOG")/pay_rise[employee_id = $id]
  where count($pay_rises) > 1
  return $pay_rises[last()]' 
RETURNING CONTENT) FROM dual; 
```

# flex-lexer - Flex 无法更改文件

> ID：15937656
> 
> 赞同：0
> 
> 时间：2013-04-10T22:31:19.153
> 
> 标签：flex-lexer

我想处理很多文件，所以我在 xml.l 的末尾添加了这个：

```
int ParseXml(char *s)
{
    int err = 0;
    XMLin = fopen(s, "r");

    if (!XMLin) {
        puts("Error on XML file opening\n");
    } else {
        XML_switch_to_buffer( XML_create_buffer( XMLin, YY_BUF_SIZE ) );
        err = XMLparse();
        XML_delete_buffer( YY_CURRENT_BUFFER );
        fclose(XMLin);
    }

    return err;
} 
```

在第一次执行时它工作（它返回 0），但在第二次调用时它失败（它返回 1）。根据[flex 手册](http://westes.github.io/flex/manual/Multiple-Input-Buffers.html)，它应该可以工作！

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:14:42.987

我找到了解决方案：

```
int ParseXml(char *s)
{
    int err = 0;
    XMLin = fopen(s, "r");

    if (!XMLin) {
        puts("Error on XML file opening\n");
    } else {
        err = XMLparse();
        fclose(XMLin);
        XMLlex_destroy();
    }

    return err;
} 
```

# c# - 使用 JavaScript 和 Razor 检测移动设备

> ID：15937661
> 
> 赞同：0
> 
> 时间：2013-04-10T22:31:32.397
> 
> 标签：c#, javascript, asp.net-mvc-3, razor, view

我一直在寻找一种简单且轻量级的解决方案来检测移动设备并呈现适当的视图。

不幸的是，我的方法并没有取得多大成功。

```
<!-- MOBILE DETECTION SCRIPT-->
<script type="text/javascript">   
if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
        @ViewBag.IsMobile =true;
}
else{
    @ViewBag.IsMobile = false;
}
</script>

<p>BOOLEAN VALUE IS : @ViewBag.IsMobile
</p>

@if (ViewBag.IsMobile == false)
{
<div id="container"> 
```

无论我使用 ViewBag、Session 还是 var，if-then-else 逻辑都不起作用。

请提出一些解决方案！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T23:02:54.413

我环顾几个小时后发现的最简单的解决方案如下（快速修复，不太脏）：

```
 bool isMobile=false;
    string u = Request.ServerVariables["HTTP_USER_AGENT"];
    System.Text.RegularExpressions.Regex b = new System.Text.RegularExpressions.Regex(@"(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino", System.Text.RegularExpressions.RegexOptions.IgnoreCase | System.Text.RegularExpressions.RegexOptions.Multiline);
    System.Text.RegularExpressions.Regex v = new System.Text.RegularExpressions.Regex(@"1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-", System.Text.RegularExpressions.RegexOptions.IgnoreCase | System.Text.RegularExpressions.RegexOptions.Multiline);
    if ((b.IsMatch(u) || v.IsMatch(u.Substring(0, 4)))) {
        isMobile = true;
    } 
```

稍后在同一页面中：

```
@if (isMobile == false)
{
<div id="container">
    <div align="center" style="width: 100%;">
    //some stuff here

...

@if (isMobile == true)
{
//Mobile view here 
```

....没有插件，没有下载，没有重定向....

# vba - 如何使用 Lotusscript 和/或 VBA 将格式化的 Richtext 复制到 Word 文档中？

> ID：15937669
> 
> 赞同：0
> 
> 时间：2013-04-10T22:32:09.740
> 
> 标签：vba, ms-word, lotus-notes, lotusscript, richtext

它直接处理这个：[Cannot instanciate a NotesUIWorkspace from VBA (Word)](https://stackoverflow.com/questions/15903107/cannot-instanciate-a-notesuiworkspace-from-vba-word)

由于机器将具有 Win7 64，这种旧方式不再适用。

那么如何将存储在 NotesRichtextItem 中的格式化文本（包括表格）复制到预定义空间的 Word 文档中？我的想法是在没有证据的情况下使用 XML 来提取 RTF 内容，替换一些未格式化的文本值（这也是一个目标）并通过 VBA 或 LS 将其传输到 Word doc 中。两种方式都可以。我可以使用我的 VBA 代码中的 Notes 后端类，但只有 NotesUIWorkspace 在 64 位环境中不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:33:44.110

一种可能的方法是将 NotesRichTextItem 内容作为 HTML 获取，然后使用 VBA 中可用的任何工具来处理该 HTML 并将其放入您的 Word 文档中。

[这个问题](https://stackoverflow.com/questions/1880511/how-to-export-rich-text-fields-as-html-from-notes-with-lotusscript)的答案描述了几种可能的方法，您可以使用这些方法从富文本中获取 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:10:20.387

您应该能够访问 NotesRichTextItem 并使用 NotesRichTextNavigator 查找每个 NotesRichTextRange，然后获取类型（可以是表格或表格单元格）和样式。您应该能够使用 VB 从字符串和样式构建您的 Word 文档，可能包括表格元素。理论上，至少。

# java - Java StateBased Game - 在 Eclipse 之外运行

> ID：15937670
> 
> 赞同：2
> 
> 时间：2013-04-10T22:32:09.943
> 
> 标签：java, eclipse, state, lwjgl, slick2d

我使用 LWJGL 和 Slick2d 创建了一个游戏。我尝试将我的游戏导出为可运行的 JAR，但是当我双击 JAR 时没有任何反应。有什么方法可以找出为什么它不工作或以另一种方式在 Eclipse 之外运行我的程序？如果您需要任何信息（例如代码），请询问。这是我的 Eclipse 工作区的样子：

![工作区截图](https://i.stack.imgur.com/h9KrD.png)

我的游戏类文件是启动类，我确实选择了它作为我的启动配置。感谢所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:00:30.930

在 Eclipse 中创建一个可运行的 jar 应该就是这样做的，并假设没有丢失的依赖项等创建一个可运行的 jar 文件。

您可以通过命令行手动调用生成的 jar 文件来测试它`java -jar yourjarfile.jar`。如果这工作正常，那么问题是您的 windows 安装没有与自动启动 java 关联的 jar 文件。[要解决该问题，您可以在此处](https://stackoverflow.com/questions/394616/running-jar-file-in-windows)查看此答案。

如果您无法手动运行 jar，则存在依赖关系或其他问题，您需要查看如何在 eclipse 中创建 jar 以及正在使用哪些选项（诊断此问题非常依赖于项目）。

特别是，您可能想查看这个[问题以设置 slick library](https://stackoverflow.com/questions/9610683/exporting-project-with-libraries-to-runnable-jar-from-eclipse)和/或这个[slick tutorial](http://www.cs.bsu.edu/homepages/pvg/misc/slick_eclipse_tutorial.php)。

此外，如[本论坛讨论](http://www.java-gaming.org/index.php?topic=25465.0)中所述，您可能需要创建一个批处理文件来执行，而不是直接执行 jar 来设置本机文件的路径。您还可以将代码直接添加到您的应用程序中以设置本机库的位置（如果您将它们与您的程序捆绑以进行分发，这可能是最终用户最简单的方法），请参阅[有关设置您的 lwjgl 本机库位置的说明](http://lwjgl.com/wiki/index.php?title=Distributing_Your_LWJGL_Application)如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T20:56:58.583

我在 youtube 上找到了一个使用 jarsplice 的视频： [https ://www.youtube.com/watch?v=K6K2d6LGvu8](https://www.youtube.com/watch?v=K6K2d6LGvu8)

# regex - 用正则表达式捕获关系运算符

> ID：15937672
> 
> 赞同：1
> 
> 时间：2013-04-10T22:32:20.437
> 
> 标签：regex

我有一个这样的字符串：

```
5 * ( {0,0} + {0,1} ) >= 4 * ( {0,2} / {0,3} ) 
```

我设法得到了字符串的左右部分；在这种情况下，关系运算符**>=**

我用来获取**+、-、*、/**运算符：

```
[\+\-\*/] 
```

对于**{0,0}**对：

```
\{\d*,\d*\} 
```

我只剩下一个部分：获取关系运算符，它们是： **<,>,<=,>=,==,!=**

任何人都可以帮我写正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:40:22.873

您可以使用以下匹配**<,>,<=,>=,==,!=**

```
[<>=!]=? 
```

这也匹配其他组合，例如`=`and `!`。为确保*它只*匹配所需的模式，您可以使用：

```
(?:<=?|>=?|==|!=) 
```

这有点不简洁，可能没有必要。

# css - YUI-3 Grids && Google Chrome：重叠文本

> ID：15937674
> 
> 赞同：1
> 
> 时间：2013-04-10T22:32:25.730
> 
> 标签：css, google-chrome, yui

我不是 UI 专家，但我不得不为一个副项目做一些 CSS。我目前正在使用 YUI-3 文件；网格、重置和字体，都是v3.9.1。

我遇到的问题是我的 h2 标记文本与设置宽度的重音框重叠，而且它似乎只发生在 Chrome 中。它在 Firefox、Safari 和 IE9 中呈现良好。任何人都知道任何问题？

这是它在 Chrome 上的外观：http: [//grab.by/lwEM](http://grab.by/lwEM)

这是它在 Firefox 上的外观：http: [//grab.by/lwEY](http://grab.by/lwEY)

请注意计数，26 悬停在 Chrome 中的左侧重音上，但重音的固定宽度为 6px。

**- 更新 -**

考虑到问题可能存在于我的自定义 css 中，我将代码片段移出进行测试，果然，即使它是基本的，在 Chrome 中，右侧也有一个空白，这可以解释为什么我的文本重叠. 看起来它是由 YUI reset.css 引起的。

代码片段：[http ://cssdesk.com/4ctMs](http://cssdesk.com/4ctMs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:01:07.223

啊……正在浏览 YUI Css 库并看到通知：“注意：文件“grids.css”已弃用，请改用“cssgrids.css”。不确定他们何时更改它，但是当我进行更改时，页面按预期呈现。

顺便说一句，我曾经使用 Base + Reset，但似乎开发人员发布了[YUI Normalize](http://yuilibrary.com/yui/docs/cssnormalize/)，它有不同的跨浏览器标准化方法，肯定也会检查一下。

# android - ActionBar setTitle() 与 Android 上的 sdk 版本 8

> ID：15937677
> 
> 赞同：0
> 
> 时间：2013-04-10T22:32:41.977
> 
> 标签：android, android-actionbar

嗨，这是一个简短的问题，但对我来说非常重要。

我定义了一个`ActionBar`对象。然后我将标题设置为操作栏，具体`String`如下所示。但问题在于最低 SDK 版本。

我想使用最低 sdk 版本 8 但`ActionBar`强制我使用 sdk 版本**11**。有没有办法解决这个问题？

```
ActionBar actionBar = getActionBar();
actionBar.setTitle(country_name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:33:54.993

`android.app.ActionBar`本身仅在 API 级别 11+ 上可用。如果您想在早期版本的 Android 上使用操作栏，您将需要某种形式的反向移植，例如[ActionBarSherlock](http://actionbarsherlock.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-31T14:36:34.053

你可以通过

```
ActionBar actionbar = getSupportActionBar();
actionbar.setTitle("some title"); 
```

如Android 开发者网站上所述[。](http://developer.android.com/reference/android/support/v7/app/ActionBarActivity.html)

```
getSupportActionBar() // is the Support library version of getActionBar() 
```

# javascript - 在 iOS Safari navigator.plugins 中找不到 Acrobat Reader

> ID：15937679
> 
> 赞同：0
> 
> 时间：2013-04-10T22:32:47.267
> 
> 标签：javascript, ios

所以我确定我们正在测试的 ipad 上安装了 Adob​​e Acrobat。然而，检测它是有问题的。使用 navigator.plugins 对象可以很好地检测除 iOS Safari 浏览器之外的所有浏览器上的 acrobat 阅读器。

```
Console.log("Plugins List:\n");
for (var key in navigator.plugins) {
  Console.log(navigator.plugins[key].name);
} 
```

在 OSX Safari 上，这将返回：

*   Adobe Acrobat NPAPI 插件，版本 10.1.4

*   冲击波闪光

*   Java 小程序插件

*   QuickTime 插件 7.7.1

*   WebKit 内置 PDF

*   不明确的

*   命名项目

*   刷新

*   物品

在 iOS Safari 上，这会返回：

*   QuickTime 插件

*   不明确的

*   命名项目

*   刷新

*   物品

我再次确定已安装 Acrobat Reader。不幸的是，由于我们使用的签名软件与任何其他 pdf 阅读器不兼容，我们只能使用 Acrobat Reader。有没有其他方法可以检测 iOS 版 Safari 上是否安装了 Adob​​e Acrobat？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:13:47.827

Acrobat Reader for iOS 不是浏览器插件，它只是一个应用程序。它不会影响 PDF 在 Safari 中的显示方式。

无法从浏览器确定应用程序是否安装在 iOS 中。但是，在您的情况下，这并不重要，因为无论是否安装 Safari，它的功能都是相同的。

# r - 元素的向量化插入

> ID：15937681
> 
> 赞同：3
> 
> 时间：2013-04-10T22:32:51.013
> 
> 标签：r, vector, vectorization

我编写了一个`R`函数来在向量的给定位置`insert`插入给定元素。`e``p``v`

这里是：

```
insert <- function(v, e, p) {
  if (length(e) != 1 || length(p) != 1) {
    stop('supported the insertion of only one element per call.')
  }
  len <- length(v)
  nms <- names(v)
  enm <- names(e)
  res <- NULL
  if (p > 1 && p <= len) {
    res <- c(v[1:(p-1)], e, v[p:len]) # insert
  } else if (p == 1) {
    res <- c(e, v) # prepend 
  } else if (p == (len+1)) {
    res <- c(v, e) # append
  } else {
    stop('wrong position')
  }
  if (!is.null(enm)) {
      names(res) <- insert(nms, enm, p)
  }
  res
} 
```

请注意，此函数与 R 中的几乎所有内容一样，返回一个新向量。此外（参见递归调用），它还**插入元素的名称**，如果它有一个。

下面是一个简单的使用示例：

```
a <- c(1,2,3,4,5,7,8,10)
names(a) <- c(letters[1:5], letters[7:8], letters[10])
a
# a  b  c  d  e  g  h  j 
# 1  2  3  4  5  7  8 10  
b <- c(9)
names(b) <- letters[9]
insert(a, b, 8)
# a  b  c  d  e  g  h  i  j 
# 1  2  3  4  5  7  8  9 10 
```

我正在尝试编写此函数的**矢量化（高效）版本**。

现在，我写了一个优雅的**解决方案**：

```
vinsert <- function(v, elems, positions) {
  out <- v
  for (i in 1:length(elems)) {
    out <- insert(out, elems[i], positions[i])
  }
  out
} 
```

这里有一个简单的使用示例：

```
a <- c(1,2,3,4,5,7,8,10)
names(a) <- c(letters[1:5], letters[7:8], letters[10])
a
# a  b  c  d  e  g  h  j 
# 1  2  3  4  5  7  8 10
z <- c(6,9)
names(z) <- c(letters[6], letters[9])
z
# f  i
# 6  9
vinsert(a, z, z)
# a  b  c  d  e  f  g  h  i  j 
# 1  2  3  4  5  6  7  8  9 10 
```

因此，我正在考虑的有关这两个功能（`insert`和`vinsert`）的问题是：

1.  返回一个新的向量或修改向量并返回它？
2.  `Rcpp`用?写一个等价的函数
3.  可以使用一阶函数编写等效`R`函数吗？

有什么建议、帮助或更优雅有效的解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:14:48.137

似乎存在许多问题，例如，插入顺序如何受先前插入的影响，以及在插入多个元素的序列时要做什么。这里我们有一个原始序列

```
x <- letters[1:10] 
```

以及我们想插入其中的一些东西

```
v <- LETTERS[1:4] 
```

以及我们想在哪里插入它们

```
at <- c(4, 7, 2, 6) 
```

进行插入的一种方法是找出新索引值`at`相对于原始索引值的顺序；`order`正在提供*稳定*的订单

```
o <- order(c(seq_along(x), at)) 
```

然后进行插入

```
> c(x, v)[o]
 [1] "a" "b" "C" "c" "d" "A" "e" "f" "D" "g" "B" "h" "i" "j" 
```

插入规则和你原来的不太一样

```
> o = order(c(seq_along(a), z))
> c(a, z)[o]
 a  b  c  d  e  g  f  h  j  i 
 1  2  3  4  5  7  6  8 10  9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:35:04.057

这是一种允许多个值的方法`after`（要求值是相同长度的列表

```
vappend <- function(x, values, after){
  lx <- length(x)
  if(missing(after)){
    after <- length(x)
  }
  la <- length(after)
  if(la ==1L){
    return(append(x, unlist(values), after))
  } else {
    stopifnot(length(values) == length(after))
    lv <- sapply(values, length)

    aae <- rep.int(after,lv) 
    c(x, unlist(values))[order(c(seq_along(x), aae))]

  }
}

vappend(x = 1:5, values = list(2:3,3:5),after = 1:2)
## [1] 1 2 3 2 3 4 5 3 4 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T02:29:51.037

对我来说，您似乎只是附加在由值而不是索引确定的“位置”处。在这种情况下，您只需要使用`c`and `order`。

```
a <- c(1, 2, 3, 4, 5, 7, 8, 10)
names(a) <- letters[a]
a
##  a  b  c  d  e  g  h  j 
##  1  2  3  4  5  7  8 10 

z <- c(6, 9)
names(z) <- letters[z]
z
## f i 
## 6 9 

result <- c(a, z)[order(c(a, z))]
result
##  a  b  c  d  e  f  g  h  i  j 
##  1  2  3  4  5  6  7  8  9 10 
```

# java - 在受保护的文件夹中创建文件

> ID：15937682
> 
> 赞同：2
> 
> 时间：2013-04-10T22:32:57.243
> 
> 标签：java, file, directory, protected

我正在尝试在最有可能受保护的文件夹中创建一个文件夹（以及其中的一个文件）。

这是我的代码：

```
package me.pogostick29.audiorpg.data;

import java.io.File;
import java.io.IOException;

import org.apache.commons.io.FileUtils;

public class DataManager {

    private DataManager() { }

    private static DataManager instance = new DataManager();

    public static DataManager getInstance() {
        return instance;
    }

    private File folder;
    private File settings;

    public void setup() throws IOException {

        String foldername;
        String osname = System.getProperty("os.name").toLowerCase();

        if (osname.startsWith("mac")) foldername = System.getProperty("user.home") + "/Library/Application Support/AudioRPG";
        else if (osname.startsWith("linux")) foldername = System.getProperty("user.home") + "/.AudioRPG/";
        else if (osname.startsWith("win")) foldername = System.getenv("APPDATA") + "\\.AudioRPG\\";
        else throw new RuntimeException("Unknown OS: " + osname);

        folder = new File(foldername);

        if (folder.exists()) {

            boolean success = false;

            try { success = folder.mkdirs(); }
            catch (SecurityException e) { FileUtils.forceMkdir(folder); }

            if (!success) throw new IOException("Could not create AudioRPG folder.");
        }

        settings = new File(folder, "settings.txt");

        if (!settings.exists()) {

            boolean success = false;

            try { success = settings.createNewFile(); }
            catch (SecurityException e) { throw new IOException("Could not create settings file."); }

            if (!success) throw new IOException("Could not create settings file.");
        }
    }
} 
```

当我运行代码（在 Mac 上）时，我得到了这个：

> 线程“主”java.io.IOException 中的异常：在 me.pogostick29.audiorpg 的 java.io.File.createNewFile(File.java:883) 的 java.io.UnixFileSystem.createFileExclusively(Native Method) 没有这样的文件或目录.data.DataManager.setup(DataManager.java:55) 在 me.pogostick29.audiorpg.AudioRPG.main(AudioRPG.java:26)

如何在此位置创建文件夹/文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:03:31.243

我曾经`FileSystemView.getFileSystemView().getHomeDirectory();`获取主目录。现在可以了！

# php - 防止简单 php db 搜索脚本上的查询泛滥

> ID：15937684
> 
> 赞同：0
> 
> 时间：2013-04-10T22:33:10.630
> 
> 标签：php, flooding

我以前从未实现过这样的东西，但我需要一种简单的方法来修改我的`searchdb.php`文件。我的网站已经上线，我需要***快速修复***（最小的更改，最好是一个文件（这里是新手开发人员）。

`searchdb.php`在提交表单以查找并返回一些 json 对象时调用：

```
//connect do database
//parse post
//sql
//return as json
//mysql_close(); 
```

我有哪些选择？我知道我可以将它包装在 if 语句中并使用`die()`，但我不确定要使用什么条件。

编辑：阅读[http://en.wikipedia.org/wiki/Query_flooding后](http://en.wikipedia.org/wiki/Query_flooding)

查询泛洪是一种在 P2P 网络上搜索资源的方法。*它很简单，但扩展性很差，因此很少使用*。

我真的需要防止这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:42:16.600

看一下这个：

[http://php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

当您启动数据库连接时，请执行诸如读取锁定目录并计算该目录中锁定文件的数量之类的操作。如果超过你的阈值，那就死吧。否则，使用您的进程 ID 触摸锁定文件，并在进程生命周期结束时使用注册关闭功能将其清理。

这只是在黑暗中快速拍摄...

# jquery - 从使用 Jquery 制作的搜索过滤器中删除字符串

> ID：15937685
> 
> 赞同：0
> 
> 时间：2013-04-10T22:33:10.903
> 
> 标签：jquery, search, replace

我正在使用这个脚本来过滤表格中的结果。问题是电话号码的格式为 xxx-xxx-xxxx，当您搜索时，如果省略连字符，搜索将错过该条目。有没有办法在搜索中忽略连字符？我试过修改省略空格的行，但我根本无法让它工作。任何帮助，将不胜感激。

```
$(document).ready(function () {
    var $orders = $('#orders tbody .filter');
    $('#filtersearch').keyup(function () {
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
        $orders.closest('tr').hide().each(function () {
            if ($('td', this).filter(function () {
                var text = $(this).text().replace(/-\s+/g, ' ').toLowerCase();
                return text.indexOf(val) != -1;
                s
            }).length > 0) $(this).show();
        })
    });
    $('#filtersearch').keyup();
}); 
```

我的代码

```
 // connect to the database
        include('connect-db.php');

        // get results from database
        $result = mysql_query("SELECT * FROM orders ORDER BY Name ASC") 
                or die(mysql_error());  

        // loop through results of database query, displaying them in the table
        while($row = mysql_fetch_array( $result )) {

         // echo out the contents of each row into a table
                echo "<tr>";
                echo '<td>' . $row['date'] . '</td>';
                echo '<td class="filter">' . $row['Name'] . '</td>';
                echo '<td class="filter">' . $row['Company'] . '</td>';
                echo '<td class="filter">' . $row['Phone'] . '</td>';
                echo '<td><img src="images/icons/'.$row['Location'].'.png"></td>';
                echo '<td><a href="delete.php?id=' . $row['id'] . '"><img src="images/icons/checkmark.png"></a></td>';
                echo "</tr>"; 
        } 

?>
</tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:41:54.540

`999-999-999".replace(/-\s+/g, ' ')`将检查连字符*和*空格字符。使用它来检查任何一个：

```
"999-999-999".replace(/[-\s]+/g, ' ')  // "999 999 999" 
```

# jquery - 如果 :nth-child 的 img src 为空，则 jQuery 删除元素

> ID：15937688
> 
> 赞同：2
> 
> 时间：2013-04-10T22:33:25.097
> 
> 标签：jquery

如果幻灯片只有一个图像，我需要删除幻灯片上的后退和下一个箭头，幻灯片总是添加，`<img src />`无论它们是否存在图像，如果只有一个图像，它只会将 src 留为空，所以我试图做它是这样的：

```
if(jQuery(".spslideshow img:nth-child(2)[src='']")){     
jQuery('.next').remove();
jQuery('.back').remove();
} 
```

失败了，它只是删除了后退/下一个，与第二个孩子的 src 是否为空无关。

但是当我自己运行它时：

```
jQuery(".spslideshow img:nth-child(2)[src='']") 
```

它返回正确的 dom 节点

为什么？

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:35:40.493

`jQuery(".spslideshow img:nth-child(2)[src='']")`不是布尔值。如果要在 IF 语句中使用它，请使用`length`

```
if(jQuery(".spslideshow img:nth-child(2)[src='']").length > 0){   
    jQuery('.next').remove();
    jQuery('.back').remove();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:38:08.067

```
if($('.spslideshow img:nth-child(2)').attr('src') == '') { 
  jQuery('.next').remove();
  jQuery('.back').remove();
} 
```

# php - 未知列发生在选择但不更新？

> ID：15937689
> 
> 赞同：0
> 
> 时间：2013-04-10T22:33:31.710
> 
> 标签：php, sql

```
$sql = "SELECT * FROM `productos` WHERE `serial` = ".$_POST['articulo'].""; 
```

上面的查询不起作用，它说“'where 子句'中的未知列'KM3M34KL43M'”这太奇怪了！因为我告诉它该列被称为`serial`...

```
 $sql = "UPDATE `productos` SET `cantidad` = {'".$cantidad."'} WHERE `serial` = ".$_POST['articulo'].""; 
```

然而，这个查询工作得很好，并且 where 子句是一样的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:36:48.640

如果`serial`是文本类型，那么您必须引用该值，而不是

```
$sql = "SELECT * FROM `productos` WHERE `serial` = ".$_POST['articulo'].""; 
```

它应该是：

```
$sql = "SELECT * FROM `productos` WHERE `serial` = '".$_POST['articulo']."'"; 
```

**但是**，您的代码容易受到 SQLInjection 的攻击，因此您必须将值转义为传递用户提供的数据，否则这是错误的。查看类似的方法并在构建查询时`mysqli_real_escape_string()`使用它。`$_POST['articulo']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:37:17.767

可能只是一个错字，但我认为你必须用单引号将返回的值括起来`POST`：

```
$sql = "SELECT * FROM `productos` WHERE `serial` = '".$_POST['articulo']."'"; 
```

# linux - Linux scipt 变量无法正确识别

> ID：15937693
> 
> 赞同：1
> 
> 时间：2013-04-10T22:33:43.987
> 
> 标签：linux, shell, scripting

我有一个关于 Linux 中的 shell 脚本的问题。我一直试图让这段代码工作几个小时，它做了一些我不明白的事情。代码的目的是在 csv 文件中添加用户的名称、gecos 和组的值。csv 文件的格式如下：

```
U12341;Mario Speedwagon;docent
U12342;Petey Cruiser;classA 
```

这是我的代码，我临时删除了 useradd 中的 group 函数，因为这样更容易调试。它一直告诉我 ` 是该组的无效名称。所以我试着用回声把变量放在屏幕上，发现一些对我来说很奇怪的东西。

```
for actie in `more +2 users.csv | tr " " "_"`
do
login=`echo $actie | tr ";" ":" | cut --delimiter=: --field=1 | tr '[A-Z]' '[a-$
groep=`echo $actie | tr ";" ":" | cut --delimiter=: --field=3`;
gecos=`echo $actie | tr ";" ":" | cut --delimiter=: --field=2 | tr "_" " "`;

echo "In login ($login), in gecos ($gecos) en in groep ($groep)"
sudo useradd $login -c "$gecos"
echo "User $login is toegevoegd onder de naam $gecos in groep $groep"

done 
```

这是奇怪的输出：

```
)n login (u12341), in gecos (Mario Speedwagon) en in groep (docent
useradd: user 'u12341' already exists
User u12341 is toegevoegd onder de naam Mario Speedwagon in groep docent
)n login (u12342), in gecos (Petey Cruiser) en in groep (classA
useradd: user 'u12342' already exists 
```

似乎将 $group 之后的字符放在字符串的第一个字符上。我认为我使用相同的变量作为组名的问题是完全相同的。

其他一切似乎都很好，如果我在没有组代码的情况下运行脚本，它会为用户添加正确的 gecos 数据。

以前有人遇到过这样的问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:44:30.453

csv 文件是在 Windows 机器上制作的吗？Windows 以回车 + 换行符 ( `\r\n`) 结束行，而 Linux 仅使用换行符 ( `\n`)。我的猜测是它包括变量`\r`中每行末尾的回车。`groep`然后，当它回显该变量时，`\r`without`\n`将光标发送到行首而不移动到下一行。（为了演示，请尝试`echo -e "Here's a line of text to print with a \rcarriage return in the middle."`）

我不知道一种自动删除 CR 的方法（我会看看能不能找到一个），但是您可以通过 sed 或其他方式运行文件并删除所有出现的`\r`.

编辑：
选项1：安装`dos2unix`（标准）
选项2：（从[这里](http://www.linuxquestions.org/questions/linux-software-2/dos2unix-command-not-found-820134/#post4042798)`tr -d '\r' < input.file > new.file`解除） 选项3：显然只是运行会去掉回车。我没有文件可以测试它，但你可以试一试。
`cat oldfile.csv > newfile.csv`

# ruby-on-rails - 如何在 Rails 选择选项中显示一系列值，同时仍然只选择一个选项？

> ID：15937698
> 
> 赞同：1
> 
> 时间：2013-04-10T22:34:03.827
> 
> 标签：ruby-on-rails

我目前有一个看起来像这样的选择语句：

```
<%= f.select :assessmentYear, (Time.now.year-1..Time.now.year+1).to_a, :prompt=>true  %> 
```

不过，我需要它在选择中显示一个范围。例如，2012-2013、2013-2014 等。但它仍应保存与现在相同的值（例如，2012-2013 将保存 2012，2013-2014 将保存 2013 等）。

这是用户的请求——我的申请是针对学术机构的，并且由于学年分为两个日历年，因此在引用单个值时可能会造成混淆。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:57:13.783

您可以有一个返回数组的助手，如`[['year-year+1', 'year'], ...]`. 类似于：

```
def academic_years 
  years = Array.new
  (Time.now.year-1..Time.now.year+1).each do |year|
     years << ["#{year}-#{year+1}", year]
  end
  return years
end 
```

然后像

```
<%= f.select :assessmentYear, options_for_select( academic_years ), :prompt=>true  %> 
```

助手`options_for_select`将生成如下内容：

```
<option value="2012">2012-2013</option>
<option value="2013">2013-2014</option>
... 
```

# iphone - 如何重新调整 UIBezierPath 的大小和位置？

> ID：15937699
> 
> 赞同：1
> 
> 时间：2013-04-10T22:34:09.840
> 
> 标签：iphone, ios, objective-c, calayer, cashapelayer

我有一个使用 PocketSVG 由 SVG 文件制成的 UIBezierPath。

我想将我的 UIBezierPath 包含在 CGShapeLayer 中，并使用以下代码：

```
self.centerIconShapeLayer = [CAShapeLayer layer];
self.centerIconShapeLayer.frame = CGRectMake(5, 8, self.frame.size.width - 10, self.frame.size.height - 16);
self.centerIconShapeLayer.fillColor = [[UIColor redColor] CGColor];
self.centerIconShapeLayer.contentsRect = CGRectMake(600, 0, 100, 100);
self.centerIconShapeLayer.contentsGravity = kCAGravityCenter;
[self.layer addSublayer:self.centerIconShapeLayer];
self.centerIconShapeLayer.path = myBezierPath.CGPath; 
```

但这似乎不起作用，而且我的形状不会改变与任何这些设置相关的大小或位置。

就将其移动到位的功能而言，我是否缺少某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:47:20.577

类似的功能`contentsGravity`是关于图层的`contents`。形状层`contents`不是*它*的`path`；`path`不受那些东西的影响。我建议您改用转换。或者，不要使用形状图层：只需将您的内容直接绘制到图层中`contents`（如果您需要有关如何执行此操作的更多信息，请告诉我）。

另外，你用`contentsRect`错了。它不是用点来衡量的，而是用比例来衡量的（每个点坐标都在 0 和 1 之间 - 好吧，它比这更复杂，但这是基本思想）。

我尝试的示例，只是为了让您入门（这是在视图控制器中，您必须调整我在这里所做的一切！）：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    self.centerIconShapeLayer = [CALayer layer]; // ordinary layer
    self.centerIconShapeLayer.frame = 
        CGRectMake(5, 8, self.view.frame.size.width - 10, self.view.frame.size.height - 16);
    self.centerIconShapeLayer.delegate = self;
    [self.view.layer addSublayer:self.centerIconShapeLayer];
    // self.centerIconShapeLayer.contentsRect = CGRectMake(0, 0, 0.3, 0.3);
    [self.centerIconShapeLayer setNeedsDisplay];
}

-(void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx {
    UIBezierPath* myBezierPath = 
        [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0,0,100,100) cornerRadius:20];
    CGContextAddPath(ctx,myBezierPath.CGPath);
    CGContextSetFillColorWithColor(ctx, [UIColor redColor].CGColor);
    CGContextFillPath(ctx);
} 
```

运行它，你会看到红色的圆角矩形。现在取消注释该`contentsRect`行，您会发现它确实可以拉伸红色圆角矩形。

当然，您将不得不替换自己的贝塞尔路径；这只是一个示例，向您展示如何将贝塞尔路径的路径直接绘制到图层中。

有关如何直接绘制到图层中的更多信息，请参阅我书中的这一部分：

[http://www.aeth.com/iOSBook/ch16.html#_drawing_in_a_layer](http://www.apeth.com/iOSBook/ch16.html#_drawing_in_a_layer)

有关一般绘图的更多信息，请参阅我的书的绘图章节，从这里开始：

[http://www.aeth.com/iOSBook/ch15.html#_paths_and_drawing](http://www.apeth.com/iOSBook/ch15.html#_paths_and_drawing)

# java - 使用 Maven 发布的 Java 项目的 TFS 项目结构

> ID：15937703
> 
> 赞同：1
> 
> 时间：2013-04-10T22:34:24.783
> 
> 标签：java, maven

我希望托管一个 Java 项目，该项目将在 TFS 服务器中使用 Maven Release 进行管理。

是否应该为此遵循 TFS 存储库结构？

通常在 SVN 中，我们会有 /trunk、/branch、/tags ——这个结构是 maven 版本完全工作所必需的吗？有没有最好的方法来构建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:43:13.027

,和命名空间是 Subversion 使用的约定`trunk`，并不会真正影响 Maven。对于 TFS，我会推荐一种基于ALM Rangers 制作的[TFS 分支和合并指南的方法。](http://vsarbranchingguide.codeplex.com/releases)`branches``tags`

比如我的团队是“TEE”团队，我们的主要项目在`$/TEE/main`. 我们在两个位置创建分支 - 一个位置用于发布分支，另一个位置用于功能分支。它们分别是`$/TEE/Releases`和`$/TEE/Feature`。

这导致文件夹结构如下所示：

```
$/TEE/Feature/SecretUpcomingFeature
$/TEE/Feature/OtherUpcomingFeature
$/TEE/main
$/TEE/Releases/10
$/TEE/Releases/10SP1 
```

等等

当然，这些文件夹中的每一个都包含一个 Maven 超级项目和子项目。

# php - 获取表单的人类可读名称

> ID：15937706
> 
> 赞同：0
> 
> 时间：2013-04-10T22:34:46.033
> 
> 标签：php, arrays, codeigniter, html-email, array-intersect

在过去的 4 个小时里，我一直在研究这个问题，一个又一个问题。现在我终于解决了大部分问题，但我似乎无法解决最后的问题。

问题：我必须向学生发送电子邮件（电子邮件存储在数据库中）。在电子邮件中必须有一个带有列表项的无序列表。那部分是简单的部分（html 电子邮件）。我现在面临的问题是我想获取表单的实际名称，而不是值，因为值只是

> > 价值=“1” 价值=“2”

这不会为学生提供关于表格是什么的太多信息。

这些是我的输入字段：

```
<label id="form"><input type="checkbox" name="form[]" value="3" >DECSP</label>
<label id="form"><input type="checkbox" name="form[]" value="4" >DESNAP</label> 
```

如果您再次注意到该值只是一个数字，我想实际获取 DESCP 和 DESNAP 表单的名称

这是我尝试过的：

```
$body .= '<ul>';

$forms = $this->input->post('form'); // The check boxes 
$dbforms = $this->queue_model->first10() + $this->queue_model->elev9() + $this->queue_model->twenty_5() + $this->queue_model->twen8thir7() + $this->queue_model->checklists(); // Here I take the forms from the database and combine the arrays

$givenforms = array_intersect_assoc($dbforms, $forms); // Here I do an intersect where form_id matches the value

foreach ( $givenforms as $key => $value) { // If a match is good then give me the form_name
$body .= '<li>' . $value . '</li>';
}

$body .= '</ul>'; 
```

我很困惑从这里去哪里。希望大家理解。

我唯一能想到的就是做一个

> 前锋

遍历在复选框中选中的所有表单，然后在查询中

> select * forms where form_id = (检查了什么表单)

然后

> 返回

表单的实际名称。

但同样，我不知道这是否是一个适当的解决方案。提前感谢你们提供的任何信息。

> **编辑 1：**

复选框必须是一个数组，以便我可以将学生收到的表格存储在数据库中。看看我的[另一个问题。](https://stackoverflow.com/questions/15869827/how-to-set-up-db-codes-for-forms)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:52:11.687

PHP 无法知道与给定输入字段关联的文本是什么。您从客户端收到的只是一个键/值对（键是输入字段的名称部分，值是值部分）。

正如您所指出的，您可以再次查询数据库并获取相应的名称。

或者，您可以找到一些其他创造性的方法来传递名称。如：

*   创建一个隐藏的输入字段，其中包含一个数组的字符串表示形式，其中包含所有输入字段的键/名称对。

*   您可以使用一些 JS 来使用所选输入字段的名称更新隐藏的输入字段

*   `name="hiddenInput_3"`使用和为每个输入字段设置一个隐藏的输入字段`value="DECSP"`。现在您可以将输入字段的值与隐藏输入字段的名称相关联，以获取 PHP 端的名称。

警告：这些只是想法，我建议您不要执行上述任何操作，因为您通过客户端传递数据，它们很容易被更改。最好的方法当然是再次查询数据库或在会话中存储一些输入数组以供以后使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:42:14.037

您需要在这里更改一些内容：

```
<label for="DECSP">DECSP</label><input type="checkbox" name="DECSP" value="3" /> 
```

在php中：

```
$value = $_POST['DECSP']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T23:05:57.923

好吧，这工作得很好，而且速度惊人！我什至没有注意到等待时间，所以感谢上帝。

任何其他想要做类似事情的人的代码：

输入字段：

```
<label id="form"><input type="checkbox" name="form[]" value="4" >DESNAP</label> // Yes I know id should be unique I will change that class asap!

            ...............................................
            $body .= '<ul>';

            foreach ($this->input->post('form') as $form_id) {
                $forms[] = $this->queue_model->getform($form_id);
            }

            foreach ($forms as $givenform) {
                $body .= '<li>' . $givenform . '</li>';
            }

            $body .= '</ul>';
           ............................
           $this->email->message($body); 
```

和完成的结果：

![在此处输入图像描述](https://i.stack.imgur.com/OxIxN.png)

# visual-studio-2010 - 错误消息：找不到或打开 PDB 文件

> ID：15937707
> 
> 赞同：69
> 
> 时间：2013-04-10T22:34:53.723
> 
> 标签：visual-studio-2010, cuda, nvidia, windows-7-x64

我尝试运行[NVIDIA 官方网站上](http://docs.nvidia.com/cuda/cuda-samples/index.html)提供的示例程序。大多数程序运行顺利，除了少数我收到类似错误消息的地方。我该如何解决？这是我在运行名为“MatrixMul”的程序后收到的错误消息示例。

注意：我已经在我的 Window7x64 操作系统上安装了 x32 和 x64 [NVIDIA CUDA Toolkit v5.0。](https://developer.nvidia.com/cuda-downloads)

```
'matrixMul.exe': Loaded 'C:\ProgramData\NVIDIA Corporation\CUDA Samples\v5.0\bin\win32\Debug\matrixMul.exe', Symbols loaded.
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Program Files (x86)\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\cudart32_50_35.dll', Binary was not built with debug information.
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\apphelp.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\AppPatch\AcLayers.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\shell32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\userenv.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\profapi.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\winspool.drv', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\mpr.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\nvinit.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\nvcuda.dll', Binary was not built with debug information.
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\setupapi.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\devobj.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll', Cannot find or open the PDB file
'matrixMul.exe': Unloaded 'C:\Windows\SysWOW64\dwmapi.dll'
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\nvapi.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\version.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\wintrust.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\crypt32.dll', Cannot find or open the PDB file
'matrixMul.exe': Loaded 'C:\Windows\SysWOW64\msasn1.dll', Cannot find or open the PDB file
The thread 'Win32 Thread' (0x12fc) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x18a0) has exited with code 0 (0x0).
The program '[3104] matrixMul.exe: Native' has exited with code 0 (0x0) 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-04-10T23:02:06.883

PDB 文件是特定于 Visual Studio 的文件，其中包含项目的调试符号。您可以忽略这些消息，除非您希望使用调试器进入这些 dll 的代码（这是值得怀疑的，因为这些是系统 dll）。换句话说，您可以并且应该忽略它们，因为您不会拥有任何这些 dll 的 PDB 文件（至少默认情况下，事实证明您实际上可以在通过[Microsoft Symbol Server](http://support.microsoft.com/kb/311503)进行调试时获得它们）。这意味着当您设置断点并单步执行代码时，您将无法单步执行任何这些 dll（无论如何您都不想这样做）。

为了完整起见，这里是 MSDN 的官方 PDB 描述：

> 程序数据库 (PDB) 文件包含调试和项目状态信息，允许增量链接程序的调试配置。使用 /ZI 或 /Zi 编译 C/C++ 程序时会创建 PDB 文件

另外为了将来参考，如果您想为自己的代码创建 PDB 文件，则必须在启用 /ZI 或 /Zi 选项的情况下构建项目（您可以通过项目属性设置它们 --> C/C++ - -> 常规，然后设置“调试信息格式”字段）。与您的情况无关，但我认为它将来可能有用

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-02-02T23:37:34.523

使用 VS 2013。尝试以下工具 -> 选项 -> 调试 -> 输出窗口 -> 模块加载消息 -> 关闭它将禁用加载模块的显示。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-01-10T10:13:56.713

如果该消息困扰您，您需要运行具有管理权限的 Visual Studio 才能在 Visual Studio 上应用此方向。

工具-> 选项-> 调试-> 符号并选中“Microsoft 符号服务器”框，标记加载所有模块，然后单击加载所有符号。

Visual Studio 将为您完成所有其他操作，并且您将在“输出”窗口中的“调试”下看到此消息“Native' has exited with code 0 (0x0)”

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-15T12:52:33.270

1.  请检查项目属性 > 配置属性 > 链接器 > 调试选项卡下的设置生成调试信息是否为是。如果不是，请尝试将其更改为是。

2.  那些特殊的 pdb（用于 ntdll.dll、mscoree.dll、kernel32.dll 等）用于 Windows API，简单的应用程序不需要。但是，如果您无法为自己编译的项目找到 pdb，我建议确保 Project Properties > Configuration Properties > Debugging > Working Directory 使用 Project Properties > Configuration Properties > General > Output Directory 中的值。

3.  您需要在“以管理员身份运行”模式下运行 Visual c++。右键单击可执行文件并单击“以管理员身份运行”

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-10T17:13:21.380

我也是 CUDA/Visual Studio 的新手，在几个示例中遇到了同样的问题。如果您运行 DEBUG-> Start Debugging，然后反复跳过 (F10)，您将看到输出窗口出现并被填充。正常执行返回正常完成状态 0x0（如您所见）并且输出窗口关闭。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-23T04:08:23.193

如果在 Visual Studio 中发生这种情况，请清理您的项目并再次运行它。

构建 --> 清洁解决方案

运行（或 F5）

# python - 在我的程序中随机收到“无”？

> ID：15937713
> 
> 赞同：1
> 
> 时间：2013-04-10T22:35:34.537
> 
> 标签：python, python-3.x

```
def validateGuess():
    print(letters)
    inputGuess= input("Choose one of the letters above:")
    if len(inputGuess)> 1:
        inputGuess=input("Choose ONE of the letters above:")
return inputGuess

def wordLength():
    length=input("Welcome to Hangman. How many letters in the secret word?")
    length1=int(length)
    if length1 <0:
        length=input("Welcome to Hangman. How many letters in the secret word?")
    return length    

def guessAmount():
    guesses=input("How many guesses would you like?")
    guesses1=int(guesses)
    if guesses1 < 0:
         guesses=input("How many guesses would you like?")
    return guesses

welcome=wordLength()
remain=input("Do you want to print the count of how many words remain [Y/N]?")
guessNumber=int(guessAmount())
F=open('dictionary.txt')
F1=F.readlines()

welcome2=int(welcome)
a_list=[word.strip('\n') for word in F1]
possible_words = [x for x in a_list if len(x) == welcome2]

letters=      ['a','b','c','d','e','f','g','h','i','j','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
while guessNumber > 0:
    letter_guess=validateGuess()
    guessNumber -= 1
    letters=letters.remove(letter_guess) 
```

基本上这是我正在创建的邪恶刽子手游戏的开始，但我遇到了一个我以前从未见过的问题。每当我运行程序时，每当我到达我的 while 循环的字母猜测部分时，我都会输入一个字母，例如 b，并且由于某种原因它报告回“无”。我相信这与

```
letters=letters.remove(letter_guess) 
```

但我并不积极。我只是想从每轮的字母列表中删除用户的字母猜测。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:38:17.220

[`list.remove()`](http://docs.python.org/3.3/library/stdtypes.html#mutable-sequence-types)就地运作。也就是说，它修改了它被调用的对象，它不会返回没有值的新列表。

简而言之，只需使用：

```
letters.remove(letter_guess) 
```

# java - Java 检查布尔值是否为空

> ID：15937715
> 
> 赞同：88
> 
> 时间：2013-04-10T22:35:41.727
> 
> 标签：java, performance, boolean, nullable

你如何检查一个布尔值是否为空？因此，如果我知道“hideInNav”为空。如何阻止它进一步执行？像下面这样的东西似乎不起作用，但为什么呢？

```
boolean hideInNav = parent.getProperties().get("hideInNav", false);
String hideNavigation = hideInNav != null ? hideInNav : ""; 
```

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-04-10T22:37:19.593

`boolean`只能是`true`或`false`因为它是[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)（+`boolean`变量默认值为`false`）。`Boolean`如果您想使用`null`值，则可以使用该类。Boolean 是一种引用类型，这就是您可以分配`null`给布尔“变量”的原因。例子：

```
Boolean testvar = null;
if (testvar == null) { ...} 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-04-10T22:37:25.753

A`boolean`不能`null`在 java 中。

`Boolean`然而，A可以是`null`。

如果 a`boolean`没有被赋值（比如一个类的成员），那么它将是`false`默认值。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-10T22:48:15.760

唯一可以是`null`a 的是非原始的。

A`boolean`只能持有`TRUE`或者`FALSE`是一个原语。内存中的`TRUE`/`FALSE`实际上是数字（`0`和`1`）

> 0 = 假
> 
> 1 = 真

因此，当您实例化一个对象时，它将为空 `String str; // will equal null`

另一方面，如果您实例化一个原语，它将被分配为 0 默认值。

`boolean isTrue; // will be 0`

`int i; // will be 0`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-10T22:39:32.727

`boolean`是原始类型，因此不能为空。

它的装箱类型 ,`Boolean`可以为空。

该函数可能返回 a`Boolean`而不是 a `boolean`，因此将结果分配给`Boolean`-type 变量将允许您测试是否为空。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-10T22:40:04.890

在 Java 中，`null`仅适用于对象引用；因为`boolean`是原始类型，所以不能赋值`null`。

很难从您的示例中获取上下文，但我猜如果`hideInNav`不在返回的对象中`getProperties()`，您所指示的（默认值？）将是`false`. 我怀疑这是您看到的错误，因为`false`不等于`null`，所以`hideNavigation`获取空字符串？

通过代码示例的更多上下文，您可能会得到一些更好的答案。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-10T22:39:11.333

`null`是分配给引用类型的值。`null`是一个保留值，表示引用与对象的实例不同。

A`boolean`不是 Object 的实例。它是一种原始类型，例如`int`and `float`。以同样的方式：`int x`有一个值`0`，`boolean x`有一个值`false`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-29T09:27:18.840

**boolean**是 Java 中的原始数据类型，**原始数据类型不能像其他原始 int、float 等一样为 null，**如果未分配，它们应该包含默认值。

在Java中，只有对象可以赋值为null，这意味着对应的对象没有引用，因此在内存中不包含任何表示。

因此，如果您想将 object 作为*null*使用，则应该使用 Boolean 类，该类将***原始布尔类型值***包装在其对象中。

> 这些在 Java 中称为包装类

例如：

```
Boolean bool = readValue(...); // Read Your Value
if (bool  == null) { do This ...} 
```

# python - 跟踪网格中的点

> ID：15937716
> 
> 赞同：1
> 
> 时间：2013-04-10T22:35:46.323
> 
> 标签：python, python-2.7, grid, point

假设我们有一个 m 乘 n 的矩形房间。表面覆盖着 1*1 的瓷砖，这意味着我们有 m*n 数量的方形瓷砖。每次给出一个随机点。该程序应该显示放置该点的特定图块。模拟平铺表面的最简单方法是什么？

首先我写了这个：

```
room_coordinates = []
for m in range(m):
    for n in range(n):
        room_coordinates.append((m,n)) 
```

它只给出表面上所有有序的自然数对。每个瓦片由四个这样的点组成，所以我想也许我可以使用字典`{1: [(0,0), (1,0), (0,1), (1,1)]}`来表示一个瓦片，但话又说回来，我不确定如何确定一个点（0.5,0.5）是否实际上在瓦片内1.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:43:16.657

我会用最左下角的坐标来表示每个图块，这样你就可以通过取它的 floor 函数来知道一个点的位置。IE

```
x= math.floor(x) 
```

在点 (0.5,0.5) 的情况下，您可以使用 floor 函数来获取 (0,0) 并使用您的映射来给出图块 1

这样做的一个优点是它不需要您存储图块的所有四个点。一个缺点是你必须决定一个规则，如果一个点位于边缘上会发生什么。

# javascript - netbeans 7.3 - javascript自动完成参数

> ID：15937721
> 
> 赞同：5
> 
> 时间：2013-04-10T22:36:16.900
> 
> 标签：javascript, jquery, netbeans, netbeans-7.3

自从升级到 netbeans 7.3 后，我遇到了一个问题，即 netbeans 不会自动为我提供参数名称。

例如，

在自动完成弹出窗口中，我会看到一个“methodA(param1,param2) xxx.js”。但是一旦我点击它或者回车，它只会填写methodA()。Ctrl+ P 也不给我参数列表。

这很烦人，我必须去找出整个参数列表。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T08:21:03.890

根据[这个](https://netbeans.org/bugzilla/show_bug.cgi?id=230052)doc netbeans 已经修复它，我认为你应该从主页更新到 7.3.1，它会再次工作。

另外，我建议向他们报告错误，可能对更多用户有所帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T03:10:26.623

默认情况下，javascript变量禁用自动完成，转到首选项>编辑器>代码完成>Javascript>并选择所有可能的情况这至少是我的问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T05:33:11.003

查找函数的快捷键是cntrl+space

# css - 引导字体等于图像

> ID：15937727
> 
> 赞同：0
> 
> 时间：2013-04-10T22:36:45.890
> 
> 标签：css

我开始使用css，我很难让字体等于图像，有人可以给我一个提示如何做到这一点？

图片：[http ://www.dlemes.com/jobs/utc.jpg](http://www.dlemes.com/jobs/utc.jpg)

我的部分布局：[http ://www.dlemes.com/jobs/](http://www.dlemes.com/jobs/)

我的 CSS： http: [//pastebin.com/EDXm5itm](http://pastebin.com/EDXm5itm)

我的 HTML： http: [//pastebin.com/c5pKh5Nt](http://pastebin.com/c5pKh5Nt)

# c++ - 使用选择排序根据玩家积分对列表进行排序？

> ID：15937735
> 
> 赞同：0
> 
> 时间：2013-04-10T22:37:17.387
> 
> 标签：c++, c, algorithm, sorting, selection-sort

我正在尝试从球员曲棍球统计数据的二进制文件中对列表进行排序。我的目标是使用选择排序算法根据游戏中的点数按降序对列表进行排序，其中点数 = 进球 + 助攻。

我正在使用一个结构数组，其中每个数组都是球员统计数据的结构。

这是结构。

```
struct Player
{
 char name[20];
 int goals;
int assists;
int rating;
}; 
```

到目前为止，这就是我在排序数组函数中所拥有的。

```
 void sortArrays( Player players[], int numPlayers)
int top=0;
int ssf;
int last=numPlayers;
int ptr;
int i = 0;
Player temp;

while (top < last)    
{
    ptr=top;
    ssf=top;

    pnts = players[i].goals + players[i].assists;
    i++;
} 
```

在这之后我被卡住了。

以下是该函数在广义上应该执行的步骤。

1.  使用公式 points = player[i].goals + player[i].assists 计算点数

2.  根据点数按降序对结构数组进行排序。

3.  交换不同的数组，直到列表按从最大到最少的点数降序排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:44:59.200

你必须使用选择排序吗？`std::sort`如果您定义自定义比较函数，则可以改用：

```
bool compare_players(Player const& a, Player const& b) {
  return (b.goals + b.assists) < (a.goals + a.assists);
} 
```

然后把你的玩家扔进跟注`vector`中`players`

```
std::sort(players.begin(), players.end(), &compare_players); 
```

这比实现选择排序（*O(n^2)* ）代码更少，而且效率更高（*O(n log n)*）。

# python - Python 获得平均值

> ID：15937738
> 
> 赞同：0
> 
> 时间：2013-04-10T22:37:25.527
> 
> 标签：python, python-3.x

我必须创建一个名为 Gradebook 的 Python 模块，现在我在名为 Student 的班级上，它必须有一个名称、ID 和用于计算成绩的评估集。学生姓名和 ID 应该是公开的，评估列表必须是私有的。评估的清单是 ESSAY 和 TEAM PROJECT。用户应该能够将评估添加到列表中，并且用户应该可以通过 get_average() 操作（所有评估的平均值）获得学生平均水平到目前为止我有这个：

```
class Student

def __init__(self, fname=' ', lname=' ',id=' ', grades= none):

   self.firstName = fname

   self.lastName  = lname

   self.id        = id

   if grades is none:

     self.gradeBook =[]

   else

     self.gradeBook = grades

studenList= []

def get_average 
```

我需要添加或删除什么来完成学生课程..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:42:45.993

使用内置函数可以轻松计算列表的平均值`sum()`和`len()`：

```
def get_average(self):
    return sum(self.gradeBook, 0.0) / len(self.gradeBook) 
```

# assembly - 在装配中连接键盘控制器

> ID：15937744
> 
> 赞同：1
> 
> 时间：2013-04-10T22:37:50.753
> 
> 标签：assembly, keyboard

我正在尝试**通过**端口 `**64h**`和`**60h**`. **我已经编写了与Borland Turbo Assembler(TASM)**和**Linker(TLINK)**兼容的汇编代码来做到这一点。我试图从网络上的文章中获取有关连接键盘控制器的足够信息，但不幸的是，到目前为止，在让我的代码获得预期结果方面没有成功。

以下是我已经做过的总结：

1.  我通过读取端口读取**状态寄存器**并最初`**64h**`获取字节 。`**(00010100b)**`
2.  在向控制器发送任何命令之前，我已经包含了一个循环来等待**IBF**标志*（状态寄存器的第 1 位）*以确保它被清除 `**(IBF = 0)**`。
3.  在上述循环之后，我 通过 port 向控制器发送了一个简单的命令，例如`**AAh**`*(Controller Self Test)*或`**ADh**`*(Disable Keyboard Interface)*`**64h**`。
4.  在发送命令后包含另一个循环，以确保并确定**OBF**标志*（状态寄存器的位 0）*已设置`**(OBF = 1)**`。

在这个阶段问题就出现了，当我通过读取端口检查**状态寄存器**`**64h**`时，我看不到控制器没有更新**OBF**和**IBF**，因为我认为至少**OBF**应该是，我从**状态寄存器**得到 的是字节`**(00011100b)**`表示命令已发送到控制器，因为“位 3”已设置。虽然只是在命令`**ADh**`*（禁用键盘界面）*我看到我的键盘停止响应。

以及我使用的系统信息：

*   奔腾4，
*   视窗 XP SP3,
*   Windows 命令提示符 (cmd),
*   Borland Turbo Assembler(TASM) 和 Linker(TLINK) 版本 5，
*   带有 PS/2 连接器的 FCR-8900 键盘，
*   通过 USB-2-PS/2 连接到第二个 PS/2 端口的 USB 鼠标，

PS/2 端口是**6 针 DIN**，我相信并检查了两次。

尽管有这些 PS/2 端口，我还是使用了来自网络的几个片段，这些片段将我的系统报告为**AT 系统**，我也无法理解。

我感谢任何分享任何经验或帮助的人。
谢谢...

# asp.net - ASP.NET 内联表达式不是预期的结果

> ID：15937747
> 
> 赞同：1
> 
> 时间：2013-04-10T22:38:01.707
> 
> 标签：asp.net, webforms

我正在尝试使用这种编码（ASP.NET 内联表达式）来完成这个简单的任务：

在哪里：

*Vars*是一个包含静态字符串变量的静态类。

代码：

```
<asp:HyperLink ID="anyHyperLink" runat="server" />
<% anyHyperLink.NavigateUrl = Vars.aDirectoryString; anyHyperLink.Text = "Some Text"; %> 
```

输出标记结束显示内联表达式代码无效！

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:40:47.887

您必须将该线放在控件上方，而不是下方。引擎从上到下读取，因此当它到达您的代码时，已经为链接呈现了 HTML。

或者你可以把它放在代码隐藏`Page_Load`或类似的东西中，而不是标记。

# c++ - 公共接口中使用的私有 typedef

> ID：15937748
> 
> 赞同：2
> 
> 时间：2013-04-10T22:38:05.190
> 
> 标签：c++, templates

是否有任何理由使用如下的私有类型定义？我看到了使用 typedef 来减少重复中可能出现的错误的好处，但是这些好处也可以通过公共 typedef 来实现。

```
template < typename T >
class foo
{
  typedef typename T::some_type reused_type;
public:
  reused_type go();
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:42:09.483

使用的一个实际原因`typedef`是避免必须在`typename`任何地方编写，而将其公开的一个实际原因是避免出现同一事物（在本例中为类型）被无数不同名称引用的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T22:49:40.010

我可以设计的一个原因是，当且仅当它们构成已发布接口的一部分时，它们才应该是公开的。请记住，模板可以是专门的，如果所讨论的类型仅与某些专业相关而不与其他专业相关，则它不应该是公开的。例如：

```
template <typename T> class Foo
{
    typedef typename T::value_type some_type;
    some_type x;
public:
    int act() { return x.get(); }
};

template <typename U> class Foo<std::vector<U*>>
{
    typedef typename U another_type;
    std::queue<another_type> q;
public:
    int act() { return q.size() / 3; }
}; 
```

在示例中，您承诺`Foo<T>::act()`总是返回一个`int`，但没有别的。

# windows-7 - 如何在 VBS 脚本中添加第二个映射驱动器

> ID：15937750
> 
> 赞同：0
> 
> 时间：2013-04-10T22:38:12.863
> 
> 标签：windows-7, vbscript

以下脚本可在网络上找到，非常适合在 Windows 7 中映射网络驱动器。

我想做的是在同一脚本中添加另一个映射驱动器，但我不熟悉 VBS 脚本，因此寻求您的专家建议！

非常感谢！

担

```
' MNDArguments.vbs
' VBScript to map a network drive with all 5 arguments. 
' Author Guy Thomas http://computerperformance.co.uk/
' Version 1.3 - April 24th 2010
' ---------------------------------------------------------' 
Option Explicit
Dim objNetwork 
Dim strDriveLetter, strRemotePath, strUser, strPassword, strProfile

' Values of variables set
strDriveLetter = "H:" 
strRemotePath = "\\alan\home" 
strUser = "guytom"
strPassword = "P@ssw0rd1"
strProfile = "false"

' This section creates a network object. (objNetwork)
' Then apply MapNetworkDrive method. Result H: drive
' Note, this script features 5 arguments on lines 21/22.
Set objNetwork = WScript.CreateObject("WScript.Network") 
objNetwork.MapNetworkDrive strDriveLetter, strRemotePath, _
strProfile, strUser, strPassword 

WScript.Quit

' End of Example script . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:48:24.987

映射第一个驱动器后，将变量更改为第二个位置，在 中使用不同的驱动器`strDriveLetter`号，然后再次调用`objNetwork.MapNetworkDrive`。

```
strDriveLetter = "H:" 
strRemotePath = "\\alan\home" 
strUser = "guytom"
strPassword = "P@ssw0rd1"
strProfile = "false"

' This section creates a network object. (objNetwork)
' Then apply MapNetworkDrive method. Result H: drive
' Note, this script features 5 arguments on lines 21/22.
Set objNetwork = WScript.CreateObject("WScript.Network") 
objNetwork.MapNetworkDrive strDriveLetter, strRemotePath, _
strProfile, strUser, strPassword 

strDriveLetter = "I:"
strRemotePath = "\\Some\Network\Path"
objNetwork.MapNetworkDrive strDriveLetter, strRemotePath, _
strProfile, strUser, strPassword 
```

（这确实应该是您可以通过阅读您发布的代码来弄清楚的事情，即使您不熟悉 VBScript。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T23:03:06.710

```
Option Explicit
Dim objNetwork, i
Dim strDriveLetter, strRemotePath, strUser, strPassword, strProfile

Dim arrDrives(1,4)
arrDrives(0, 0) = "H:" 
arrDrives(0, 1) = "\\alan\home"
arrDrives(0, 2) = "guytom"
arrDrives(0, 3) = "P@ssw0rd1"
arrDrives(0, 4) = "false"

arrDrives(1, 0) = "I:" 
arrDrives(1, 1) = "\\tom\home"
arrDrives(1, 2) = "tomguy"
arrDrives(1, 3) = "P@ssw0rd1"
arrDrives(1, 4) = "false"

For i = 0 To UBound(arrDrives)
    Set objNetwork = WScript.CreateObject("WScript.Network") 
    objNetwork.MapNetworkDrive arrDrives(i, 0), arrDrives(i, 1), _
    arrDrives(i, 4), arrDrives(i, 2), arrDrives(i, 3) 
Next

WScript.Quit 
```

将 arrDrive(0,0) 复制/粘贴到 (0,4) 以添加另一个驱动器。不要忘记更改 Dim arrDrives（驱动器数减 1、4）。

# r - R ggplot2 轴标题麻烦

> ID：15937756
> 
> 赞同：1
> 
> 时间：2013-04-10T22:38:33.487
> 
> 标签：r, ggplot2

我对ggplot比较陌生。在尝试调整轴标题的主题参数时，我遇到了一些麻烦。具体来说，我想更改字体系列，加粗文本，并稍微向下移动 x 轴标题。我尝试了以下代码 - 我没有收到错误，但图表中没有任何变化。任何想法我做错了什么？我最担心的是用 vjust 将标题向下移动，现在它离我需要的刻度标签太近了。谢谢！

```
ggplot(Car_data, aes(x=Yearyear, y= Total_cars)) +
geom_line(aes(group=1), colour="#56B4E9", size = 1.5) +
geom_errorbar(aes(ymin= (Mean_Total_Cars - SE_Total_Cars), ymax= (Mean_Total_Cars +    SE_Total_Cars)), width=.2, colour= "black") +
geom_point(stat = "identity", colour="gray40", size=5, shape= 18) + geom_point(stat =    "identity", colour="#56B4E9", size=3, shape= 18) +
theme(axis.title.x = element_text(color = "black", size = 9, family = "Arial", face =  "bold", vjust= 1)) +
theme(axis.title.y = element_text(color = "black", size = 9, family = "Arial", face = "bold")) +
theme(axis.text.x = element_text(color = "black", size = 9, family = "Arial", face = "bold")) +
theme(axis.text.y = element_text(color = "black", size = 9, family = "Arial", face = "bold")) +
ylab("Mean # Cars") +
xlab("Year") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:30:05.383

您可以设置`vjust`为负数。您可能希望更改`plot.margin`或`panel.margin`留出足够的空间

例如，没有任何费用

```
ggplot(mtcars, aes(x=mpg,y=am)) + geom_point() 
```

![在此处输入图像描述](https://i.stack.imgur.com/ptqYd.png)

并在`vjust = -1`底部`plot.margin`边缘略微增加

```
ggplot(mtcars, aes(x=mpg,y=am)) + geom_point()  + 
  theme(axis.title.x = element_text(size=14, face = 'bold', vjust = -1), 
        plot.margin = unit(c(1,1,1,0.5), 'lines')) 
```

![在此处输入图像描述](https://i.stack.imgur.com/P3ADC.png)

# php - 为什么我的 php 文件不能将数据插入到我的 mysql 数据库中？

> ID：15937758
> 
> 赞同：0
> 
> 时间：2013-04-10T22:38:41.470
> 
> 标签：php, database-connection

我一直无法让我的 PHP 文件将数据插入到我的数据库中。我已经制作了一个简单的脚本来将数据放入我的数据库中，但它仍然无法正常工作。我希望有人会看到一些让我觉得错过它的傻瓜的东西。下面的代码是我的简单脚本中没有插入到我的数据库中的代码。

```
<? php
$con=mysql_connect("localhost","user","password","database"

mysql_query($con,"INSERT INTO table_name (username, pass) VALUES ('bob', 'tom')");

mysql_close($con);

?> 
```

我希望你们看到这个问题，因为我正在画一个完整的空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:40:54.427

你不见了`mysql_select_db("yourdatabase", $con);`

编辑：忘记这一点，您的连接中有它，但就像有人评论的那样，您有语法错误。

您还可以使用[mysql_error()](http://www.php.net/manual/en/function.mysql-error.php)来查看出了什么问题。

ps 强烈建议不要使用旧的 mysql 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:41:53.097

在您发布的代码中， mysql_connect 缺少结束括号。您是否检查并查看 SQL 本身是否返回任何错误？

我刚刚在我的服务器上运行了查询，它可以工作——它插入了行。因此，您的查询没有任何问题。你确定你的桌子设置正确吗？表中的用户名和密码是哪些类型的字段？您是否使用了正确的表名？您确定要签入您正在写入的同一张表吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:48:42.853

```
<? php
$con=mysql_connect("localhost","user","password","database" 
```

正确的语法和过程是连接，选择数据库。但请确保您已关闭功能：

```
$con = mysql_connect("host","user","password");
$Database = mysql_select_db("Database",$con); 
```

# jpa - 什么控制标量 JPA 本机查询的 List 元素类型？

> ID：15937760
> 
> 赞同：4
> 
> 时间：2013-04-10T22:38:49.023
> 
> 标签：jpa, eclipselink

JPA 提供了运行原生 SQL 查询的能力：

```
final Query q = entityManager.createNativeQuery("SELECT hork FROM foobar");
assert q != null;
final List results = q.getResultList(); 
```

在上面的查询中， my 中将出现什么样的对象`List`？

看起来很简单，但是：

在我们的例子中，我们有一个 Informix`TEXT`列。[Informix`TEXT`类型](http://publib.boulder.ibm.com/infocenter/idshelp/v117/topic/com.ibm.sqls.doc/ids_sqs_1413.htm)有点`CLOB`像.

Informix JDBC 驱动程序报告——不管这是否属实，我们都不能改变它——[`java.sql.Types`该列映射到的字段值](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSetMetaData.html#getColumnType%28int%29)是`java.sql.Types#LONGVARCHAR`. 好的。

如果您像这样运行常规的旧 JDBC 查询：

```
final ResultSet rs = someStatement.executeQuery("SELECT hork FROM foobar");
assert rs != null;
while (rs.next()) {
    final Object result = rs.getObject(1);
    // see if you can guess what result.getClass() is
} 
```

...您正在与 合作`byte[]`，而不是`String`。

现在，如果您使用两大 JPA 提供程序（Hibernate、EclipseLink）运行上面的本机查询，您将在结果列表中获得不同的对象。

Hibernate 返回 a `String`，它只是表单中列的内容`String`，可能是通过`ResultSet#getString(int)`（而不是`ResultSet#getObject(int)`）或通过结果的某种平台编码`byte[]`。

EclipseLink 返回 a 的十六进制表示`byte[]`，当以 ASCII 字符集解码和解释时，它确实是列的内容。

我有两个相关的问题：

1.  如何指示 JPA 标量原生 SQL 查询的类型应该是什么？

2.  如果 EclipseLink 没有返回`String`代表列内容的 a ，为什么它不只是返回 a `byte[]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:40:02.180

很奇怪，您的 Informix JDBC 驱动程序将 TEXT 值作为字节 [] 返回，这似乎很错误，因为它是字符字段而不是二进制字段，它应该是字符串。您可能希望查看您的 JDBC 驱动程序是否对此进行了修复。

JPA 似乎将值作为字符串获取，因为 JDBC 元数据说它是字符串。

对于 EclipseLink，真正发生的事情是 LONGVARCHAR 被解释为 Clob 类型，并且由于 Clob 可以只是一个定位器，因此必须获取整个值，因此它将预期的 Clob 转换为字符串，但因为它实际上是一个字节[]，它将转换器转换为 HEX。您可以在 InformixPlatofrm 中通过覆盖 isClob 并为 LONGVARCHAR 返回 false 来解决此问题，但真正的问题是 JDBC 驱动程序正在为字符字段返回 byte[]。

# php - MySQL DELETE 语句不删除行

> ID：15937787
> 
> 赞同：2
> 
> 时间：2013-04-10T22:41:04.623
> 
> 标签：php, mysql

下面的代码是我如何从数据库中删除数据。用户选择他想要删除的标题，然后查询应该删除这些行。不幸的是，这行不通。

我已通过在 PhpMyAdmin 和 MySQL Workbench 中使用它来确保 DELETE 查询有效，但由于某种原因，我正在编码的 PHP 代码不允许删除工作。

```
<?php
    session_start();
    require ("../login.php");

    if (!isset($_SESSION['user'])) 
        header('Location: ../index.php');

    include ("header.php");
    include ("subnav.php");
?>

    <h2>Current Subscriptions</h2>

    <?php

    $user_id = $_SESSION['user'];

    if (isset($_POST['submit'])) {
        foreach($_POST["titles"] as $title) {
            $stmt = $db->prepare("DELETE FROM subscriptions WHERE user=:user AND title=:title)");
            $stmt->bindValue(':user', $user_id, PDO::PARAM_INT);
            $stmt->bindValue(':title', $title, PDO::PARAM_INT);
            $stmt->execute();
        }
        echo '<p>Thank you! Your changes have been made!</p>';
    }
    else {
        $stmt = $db->prepare
            ("SELECT t.id, t.publisher, t.title
            FROM titles t
                JOIN subscriptions s
                    ON t.id = s.title
            WHERE s.user=:user
            ORDER BY t.id");

        $stmt->bindValue(':user', $user_id, PDO::PARAM_STR);
        $stmt->execute();
        $rows = $stmt->fetchAll();
        $num_rows = count($rows);
        if ($num_rows == 0)
            echo 'You are not currently subscribed to any titles.';
        else {
            ?>
            <form action="" method="post">
            <?php   
            foreach($rows as $row) 
                echo '<input type="checkbox" name="titles[]" value="' . $row['id'] . '">' . $row['publisher'] . ' - ' . $row['title'] . '<br>';
            ?>
            <input type="submit" value="Update" name ="submit" id="submit">
                </form>
        <?php
        }
    }
    ?>

<?php   
    include ("footer.php");
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:44:20.117

我确实在您的 SQL 中看到了额外`)`内容，请尝试将其删除。

```
 ("DELETE FROM subscriptions WHERE user=:user AND title=:title)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:47:12.100

很难用你的代码来判断，但试着用你的 foreach 包装

```
try {
    foreach(...) {
        ...
    }
} catch (PDOException $ex) {
    $ex->getMessage();
} 
```

这应该清楚地告诉你发生了什么。

# arrays - 运行时检查失败 #2 - 变量“e_color”周围的堆栈已损坏

> ID：15937788
> 
> 赞同：0
> 
> 时间：2013-04-10T22:41:09.297
> 
> 标签：arrays, stack, corrupt, allegro

所以我对这个站点以及使用 c++ 和 allegro 编程有点陌生，但是我在制作的这个游戏中一直遇到这个问题，我似乎无法弄清楚。它似乎不是数组溢出（这是我最初的想法），所以如果有人知道问题是什么，我会很激动。

代码很长，对不起。我真的不知道我在做什么。我遗漏了一些位，所以希望这不会影响任何事情。

提前致谢。

```
 void main() {
    InitGraphics(); // see function above for Allegro initialization
    srand(time(NULL));

    int x = 20, y = 20, e_color[9], color = 0x0000FF00;
    int x_enemy[9], y_enemy[9];
    bool over = false, hit[9];
    BITMAP* buffer = create_bitmap(screen->w,screen->h);

    initialization(x_enemy, y_enemy, x, y, e_color, hit, color, buffer); // begins the game, inculding initializing player and enemies

    game_play(x_enemy, y_enemy, x, y, e_color, hit, color, over, buffer); // plays the game

    end_message(x_enemy, y_enemy, x, y, e_color, hit, color, over, buffer); // ends the game

    rest(750);

}
END_OF_MAIN()

// the introduction and initialization of the game
void initialization(int x_enemy[9], int y_enemy[9], int x, int y, int e_color[9], bool hit[9], int color, BITMAP* buffer) {

    intro(buffer);

    initialize_enemy(x_enemy, y_enemy, e_color, hit);
    circlefill(buffer,x,y,10,color); // the player
    draw_enemy(x_enemy, y_enemy, e_color, buffer);

    countdown(buffer);
}

// calls the functions and runs the loop needed to actually play the game
void game_play(int x_enemy[9], int y_enemy[9], int x, int y, int e_color[9], bool hit[9], int color, bool over, BITMAP* buffer) {

    while(key[KEY_ESC] == 0 && over == false) {

        enemy_movement(x_enemy, y_enemy, e_color, buffer);
        rest(5);
        draw_enemy(x_enemy, y_enemy, e_color, buffer);
        test_contact(x_enemy, y_enemy, x, y, e_color, hit, buffer);
        over = test_end(hit);
        if (over == true)
            the_end(e_color, buffer);

        ///////// PLAYER MOVEMENT ////////////

        circlefill(buffer,x,y,10,color); // the player

        if (key[KEY_UP]) {
            circlefill(buffer,x,y,10,0);
            if (y < (0+10))
                y = y;
            else
                y = y-2;
            circlefill(buffer,x,y,10,color);
        }
        if (key[KEY_DOWN]) {
            circlefill(buffer,x,y,10,0);
            if (y > (480-10))
                y = y;
            else
                y = y+2;
            circlefill(buffer,x,y,10,color);
        }
        if (key[KEY_LEFT]) {
            circlefill(buffer,x,y,10,0);
            if (x < (0+10))
                x = x;
            else
                x = x-2;
            circlefill(buffer,x,y,10,color);
        }
        if (key[KEY_RIGHT]) {
            circlefill(buffer,x,y,10,0);
            if (x > (640-10))
                x = x;
            else
                x = x+2;
            circlefill(buffer,x,y,10,color);
        }
        /////// END PLAYER MOVEMENT //////////

        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    }
}

// a message to the user saying game over and thank you for playing, includes a re-play option

void end_message(int x_enemy[9], int y_enemy[9], int x, int y, int e_color[9], bool hit[9], int color, bool over, BITMAP* buffer) {
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "You Won!");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    rest(1500);
    clear(buffer);
    textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+15), 0x00FFFFFF, "Thank you for playing the Game.");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    rest(1000);
    textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+30), 0x00FFFFFF, "To play one more time, press 'n'.");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    rest(1000);
    textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+45), 0x00FFFFFF, "To quit, press any other key.");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    clear_keybuf();
    char answer = readkey();
    clear(buffer);
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);

    if (answer == 110)
    {
        textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "Starting new game.");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(1000);
        clear(buffer);
        initialization(x_enemy, y_enemy, x, y, e_color, hit, color, buffer);
        game_play(x_enemy, y_enemy, x, y, e_color, hit, color, over, buffer);
        rest(750);
        textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "You Won!");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(1500);
        clear(buffer);
        textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+15), 0x00FFFFFF, "Thank you for playing the Game again.");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(750);
        textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+30), 0x00FFFFFF, "Press any key to quit.");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(750);
        clear_keybuf();
        readkey();
        clear(buffer);
    }
}

// text introduction message
void intro(BITMAP* buffer = create_bitmap(screen->w,screen->h)) {
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "Welcome to the Game.");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    rest(500);
    textprintf(buffer, font, ((screen->w)-225), ((screen->h)-15), 0x00FFFFFF, "Press any key to continue.");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    readkey();
    clear(buffer);
    ///
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "Press 'r' for rules or any other key to continue to game.");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    char ans = readkey();
    if (ans == 114)
    {
        // lots and lots of text, yay
        clear(buffer);
        textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "Rules");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(750);
        textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+15), 0x00FFFFFF, "Move your player using the arrow keys.");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(750);
        textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+30), 0x00FFFFFF, "Catch all the red enemies to turn them blue.");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(750);
        textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+45), 0x00FFFFFF, "Once all the enemies have been frozen, you win!");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(750);
        textprintf_centre(buffer, font, screen->w/2, ((screen->h/2)+60), 0x00FFFFFF, "Press ESCAPE at any time to quit game.");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        rest(750);
        textprintf(buffer, font, ((screen->w)-225), ((screen->h)-15), 0x00FFFFFF, "Press any key to continue.");
        blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
        readkey();
        clear(buffer);
    }
    clear(buffer);
}

// counts down from three
void countdown(BITMAP* buffer = create_bitmap(screen->w,screen->h)) {
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "3");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    rest(1000);
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0, "3");
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "2");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    rest(1000);
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0, "2");
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "1");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    rest(1000);
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0, "1");
    textprintf_centre(buffer, font, screen->w/2, screen->h/2, 0x00FFFFFF, "Go");
    blit(buffer, screen, 0, 0, 0, 0, buffer->w, buffer->h);
    rest(1000);
    clear(buffer);
}

// the enemies intial spot
void initialize_enemy(int x[9], int y[9], int color[9], bool hit[9]) {

    //seed the random number generator
    srand((unsigned)time(0));

    for(int a = 0 ; a < 10 ; a++)
    {
        hit[a] = false;
        x[a] = rand()%620;
        y[a] = rand()%460;
        color[a] = 0x00FF0000;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T09:42:57.207

首先，如果你初始化一个有 9 个插槽的数组，你只能在 0-8 范围内使用它们（总共 9 个）

```
void initialize_enemy(int x[9], int y[9], int color[9], bool hit[9]) {

//seed the random number generator
srand((unsigned)time(0));

    for(int a = 0 ; a < 9 ; a++) // The array size of every variable is not big enough
    {                            // So I changed it accordingly to 9 from 10
        hit[a] = false;
        x[a] = rand()%620;
        y[a] = rand()%460;
        color[a] = 0x00FF0000;
    }
} 
```

您遗漏了 50% 的代码重要部分，我认为您在任何地方都犯了这个错误，但您可以搜索所有代码并轻松解决问题。

# c++ - 错误：QApplication：没有这样的文件或目录？

> ID：15937791
> 
> 赞同：0
> 
> 时间：2013-04-10T22:41:40.423
> 
> 标签：c++, qt, directory

我一直在关注某人的 Qt 教程的 Youtube 播放列表。当我尝试遵循[Basic Application 和 HTML Aware Widgets](http://www.youtube.com/watch?v=Gk3zh5lA4ww)时，尝试使用添加的 c++ 类创建一个空的 Qt 项目时出现此错误：

```
error: QApplication: No such file or directory 
```

我安装了最新的 Qt 创建者和库，并在 #includes 下划线...

```
#include <QApplication>
#include <QLabel>

int main(int argc, char * argv[])
{
    QApplication app(argc, argv);
    QLabel *label = new QLabel("hello world");

    label.show();

    return app.exec();
} 
```

在下面回答：我试过了，我的 .pro 看起来像这样：

QT += 核心部件 SOURCES += main.cpp

我得到了这些错误..

```
In function 'int qMain(int, char**)':
error: request for member 'show' in 'label', which is of pointer type 'QLabel*' (maybe you meant to use '->' ?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:05:26.267

使用 Qt5.0.1 在 KUbuntu 上测试

我的`.pro`档案

```
QT      += core widgets
SOURCES += main.cpp 
```

我的`main.cpp`文件：

```
#include <QApplication>
#include <QLabel>

int main(int argc, char * argv[])
{
    QApplication app(argc, argv);              // QApp... instead of Qapp...
    QLabel *label = new QLabel("hello world"); // QLabel * instead of Qlabel

    label->show();  // <- label-> instead of label.

    return app.exec();
} 
```

# image-processing - 同态滤波的概念

> ID：15937792
> 
> 赞同：4
> 
> 时间：2013-04-10T22:41:42.890
> 
> 标签：image-processing, filtering, contrast, image-enhancement, high-contrast

我试图理解同态过滤的概念，我已经阅读了几个关于这个主题的在线页面，例如[http://en.wikipedia.org/wiki/Homomorphic_filtering](http://en.wikipedia.org/wiki/Homomorphic_filtering) 但是，我注意到讨论这个主题的稀缺在线资源。因此，我有两个问题。

首先，我想知道，如何确定可以使用同态过滤来增强图像？换句话说，需要同态滤波的图像类型是什么？

其次，同质滤波是否总是用于衰减照明（低频）并增加反射率（高频）？或者它也可以用来做相反的事情（衰减反射和高光照明）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:56:07.413

经过进一步研究，我找到了答案，

1- 可用于使用同态滤波增强的图像是照明分布不均导致图像中的对象以深色显示的图像。通常，这些图像是暗的，因此它们的细节是隐藏的。

2-根据[这个](http://www.google.ae/url?sa=t&rct=j&q=chapter%204_2%20sharp%20and%20smooth&source=web&cd=1&ved=0CCsQFjAA&url=http://metalab.uniten.edu.my/~aman/cmpb345/notes/Chapter%25204_2%2520-%2520sharp%2520and%2520smooth.ppt&ei=G85mUeOpD8yqrAe2hYHICA&usg=AFQjCNE4Krgm5aRcPeA1_pJk5D2B7m6tow&bvm=bv.45107431,d.bmk&cad=rja)来源，同态滤波是一种频域滤波过程，它压缩亮度（来自照明条件）同时增强对比度（来自物体的反射特性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-14T01:09:47.747

考虑到同态滤波可用于从图像中分离低频照明和高频反射，其一个明显的用途是变化检测。在变化检测中，当我们比较两张图像时，我们会寻找高频反射部分的变化。如果我们过滤掉低频照明部分，那会有所帮助。

在同态滤波之后，左边的明亮输入图像产生右边的图像。

![明亮的输入图像](https://i.imgur.com/nR4eUc1.png) ![输出图像](https://i.imgur.com/ItZsOuu.png)

在同态滤波之后，左边的暗输入图像产生右边的图像。

![深色输入图像](https://i.imgur.com/dtpcpYO.png) ![输出图像](https://i.imgur.com/HwjxgR0.png)

这是一个[matlab链接](http://blogs.mathworks.com/steve/2013/06/25/homomorphic-filtering-part-1/)

这里有一些关于[同态过滤](https://stackoverflow.com/questions/23740934/opencv-homomorphic-filter)问题的其他stackoverflow链接，[另一个](https://stackoverflow.com/questions/20155668/homomorphic-filtering-in-opencv)

# java - 为什么 Ant 插件 taskdefs 的变化？

> ID：15937805
> 
> 赞同：4
> 
> 时间：2013-04-10T22:43:04.167
> 
> 标签：java, plugins, ant, findbugs, cobertura

我真的对为 Ant 插件定义 taskdef 的*正确*（最现代、最佳实践等）方式感到困惑。下面是我从我们内部的一个 Java 应用程序中拼凑出来的一段代码`build.xml`。请注意，以下所有 Ant 目标都 100% 完美运行（即使我已经将它们剪切并粘贴在一起，并且为了简洁起见删除了它们的大部分内容）：

```
<project name="MyApp" default="package" basedir="." xmlns:jacoco="antlib:org.jacoco.ant">
    <path id="cobertura.path">
        <!-- ... -->
    </path>

    <taskdef name="jacoco-coverage" classname="org.jacoco.ant.CoverageTask"/>
    <taskdef name="jacoco-report" classname="org.jacoco.ant.ReportTask"/>
    <taskdef classpathref="cobertura.path" resource="tasks.properties" />
    <taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask"/>

    <target name="run-coco" depends="doOtherStuff">
        <jacoco:coverage>
            <!-- ... -->
        </jacoco:covergae>

        <jacoco-report>
            <!-- ... -->
        </jacoco-report>        
    </target>

    <target name="findbugs">
        <antcall target="compile" />
        <findbugs home="${findbugs.home}" output="xml:withMessages" outputFile="findbugs.xml">
            <!-- ... -->
        </findbugs>
    </target>
</project> 
```

1.  为什么我需要为 JaCoCo 而不是为 Findbugs 定义 XML 命名空间？
2.  什么是反库？有时我在 XML 命名空间定义中看到它，有时它不存在。
3.  尽管taskdef`jacoco-coverage`和`javacoco-report`taskdef 在其名称中都使用连字符（“-”），但相应的任务被分别调用`jacoco:coverage`……`jacoco-report`为什么用冒号（“：”）表示覆盖，以及它是如何工作的（确实如此，相信我！ )?

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T01:40:11.980

让我们一步一步来回答这个问题：

### 步骤#1：定义你的任务

您可以通过以下两种方式之一定义任务：

1.  你可以指向一个类文件，然后给这个类文件定义的任务*命名*。
2.  您可以指向jar 中包含任务名称和这些任务名称使用的类文件的*资源文件。*

在你的 JaCoCo 案例中，你做了第一个：

```
<taskdef name="jacoco-coverage" 
    classname="org.jacoco.ant.CoverageTask"/>
<taskdef name="jacoco-report"
    classname="org.jacoco.ant.ReportTask"/> 
```

但是，您也可以采用第二种方式：

```
<taskdef resource="org/jacoco/ant/antlib.xml"/> 
```

如果您打开 jacoco jar 文件并在该目录中向下钻取，您将看到一个名为`antlib.xml`. 如果您查看该文件，您将看到以下内容：

```
<antlib>
    <taskdef name="coverage"  classname="org.jacoco.ant.CoverageTask"/>
    <taskdef name="agent"     classname="org.jacoco.ant.AgentTask"/>
    <taskdef name="report"    classname="org.jacoco.ant.ReportTask"/>
    <taskdef name="merge"     classname="org.jacoco.ant.MergeTask"/>
    <taskdef name="dump"      classname="org.jacoco.ant.DumpTask"/>
</antlib> 
```

因此，如果 jar 中有一个资源文件，您可以使用单个`<taskdef>`. 请注意，您所调用`jacoco-coverage`的只是`coverage`在这里调用，而您所调用`jacoco-report`的则`report`在此处调用。

在您用作`<jacoco-coverage/>`Ant 任务的地方，我会使用`<coverage/>`.

### 步骤#2：JAR 文件在哪里？

在上面，我将任务定义为：

```
<taskdef resource="org/jacoco/ant/antlib.xml"> 
```

某处，Ant 必须在其类路径中找到该路径，但在哪里呢？如果您将 JaCoCo jar 放入您的`$ANT_HOME/lib`文件夹，它将自动包含在您的类路径中。它使定义任务变得非常容易。不幸的是，这也意味着如果其他人想要运行您的 Ant 脚本，他们必须下载该 JaCoCo jar 并将其放入他们的`$ANT_HOME/lib`文件夹中。不是很便携。

幸运的是，您可以指定 JaCoCo jar 的位置。由于您的项目通常受版本控制，因此放置它的最佳位置是在项目所在目录的下方`build.xml`。当有人签出您的项目时`build.xml`，他们也会得到 JaCoCo.jar。

我的偏好是创建一个名为的目录`antlib`，然后在该`antlib`目录中为每组任务创建一个子目录。在这种情况下，我会有一个名为`antlib/jacoco`.

一旦我的 jacoco.jar 文件被安全安置。在那个目录中，我可以添加一个`<classpath>`子实体到我`<taskdef>`说在哪里找到`jacoco.jar`：

在类路径之前：

```
<taskdef resource="org/jacoco/ant/antlib.xml"/> 
```

类路径之后：

```
<taskdef resource="org/jacoco/ant/antlib.xml">
   <classpath>
       <fileset dir="${basedir}/antlib/jacoco"/>
   </classpath>
</taskdef> 
```

注意使用`<fileset/>`，我不在乎我的 JaCoCo jar 文件是被调用`jacoco.jar`还是`jacoco-2.3.jar`. 如果你知道 jar 的确切名称，你可以这样做：

```
<taskdef resource="org/jacoco/ant/antlib.xml">
   <classpath path="${basedir}/antlib/jacoco/jacoco.jar"/>
</taskdef> 
```

并节省几行。

### 第 3 步：XML 命名空间

到目前为止，我不需要`jacoco:`为我的任务名称添加前缀。

我可以简单地这样做：

```
<project name="MyApp" default="package" basedir=".">

    <taskdef resource="org/jacoco/ant/antlib.xml">
        <classpath path="${basedir}/antlib/jacoco/jacoco.jar"/>
    </taskdef>

    <target name="run-coco" depends="doOtherStuff">
        <coverage>
            <!-- ... -->
        <coverage>

        <report>
            <!-- ... -->
        <report>        
    </target>
</project> 
```

而且，你可以把它留在那里。完全没有问题。简单干净。

但是，如果您使用两个不同的 Ant 任务集，一个被调用`Foo`，一个被调用`Bar`，并且都恰好`<munge/>`在其中定义了一个任务，该怎么办？

```
<taskdef resource="org/foo/ant/antlib.xml">
    <classpath path="${basedir}/antlib/foo.jar/>
</taskdef>

<taskdef resource="org/bar/ant/antlib.xml">
    <classpath path="${basedir}/antlib/bar.jar/>
</taskdef>

<target name="munge-this">
    <!-- Is this foo.jar's or bar.jar's munge task? -->
    <munge vorbix="fester"/>
</target> 
```

`munge`正在执行哪个任务？是一入`foo.jar`还是一入`bar.jar`？

为了解决这个问题，Ant 允许您为每组任务定义一个*XML 命名空间。*您可以在最顶层的`<project>`实体、任务本身或名称中定义这样的命名空间`<target>`。99% 的时间，它是在`<project>`实体中完成的。

```
<project name="demo" default="package" basename="."
    xmlns:foo="I-will-have-fries-with-that"
    xmlns:bar="Never-on-a-first-date">

 <taskdef uri="I-will-have-fries-with-that"
    resource="org/foo/ant/antlib.xml">
    <classpath path="${basedir}/antlib/foo.jar/>
</taskdef>

<taskdef uri="Never-on-a-first-date"
    resource="org/bar/ant/antlib.xml">
    <classpath path="${basedir}/antlib/bar.jar/>
</taskdef>

<target name="munge-this">
    <!-- Look the 'foo:' XMLNS prefix! It's foo.jar's much task! -->
    <foo:munge vorbix="fester"/>
</target> 
```

现在，我知道这是`<munge/>`Foo 任务列表中的任务！

定义了`xmlns`一个 XML 命名空间。`xmlns:foo`为 Foo 的任务集定义了一个命名空间，并为`xmlns:bar`bar 的任务集定义了它。当我使用来自 的任务时`foo.jar`，我会在它前面加上`foo:`命名空间。请注意，此前缀是 . 之后的前缀`xmlns:`。

这`uri`只是一个与命名空间字符串匹配的字符串。我使用了字符串`I-will-have-fries-with-that`并向`Never-on-a-first-date`您展示了字符串本身并不重要。重要的是此字符串与任务的`uri`参数匹配`<taskdef>`。这样，被定义的任务就知道他们应该使用什么*命名空间。*

现在，通常 URI 字符串是一个 URI 定义。有两种方法可以解决这个问题：

*   使用`antlib:`某种标准化的 URI，并使用命名空间的反向命名：`antlib:org.jacoco.ant`.
*   使用指向项目的 URL：`http://www.eclemma.org/jacoco/`。

我更喜欢后者，因为它会指向文档。然而，看起来第一个更受欢迎。

那么，让我们看看 Jacoco 是如何工作的：

```
<project name="MyApp" default="package" basedir="."
    xmlns:jacoco="antlib:org.jacoco.ant">

    <taskdef uri="antlib:org.jacoco.ant" 
        resource="org/jacoco/ant/antlib.xml">
        <classpath path="${basedir}/antlib/jacoco/jacoco.jar"/>
    </taskdef>

    <target name="run-coco" depends="doOtherStuff">
        <jacoco:coverage>
            <!-- ... -->
        <jacoco:coverage>

        <jacoco:report>
            <!-- ... -->
        <jacoco:report>        
    </target>
</project> 
```

请注意，`uri`JaCoCo中的 与字符串`<taskdef/>`相同。`xmlns:jacoco`

这就是任务定义的全部内容。我希望它能解释`jacoco:`前缀的来源以及如何通过指向包含该类的实际类名或指向任务名称***和****类的资源*文件来定义任务。

# android - 使用 Android Maps API v2 时如何检测 UI 线程的迟缓

> ID：15937806
> 
> 赞同：0
> 
> 时间：2013-04-10T22:43:10.537
> 
> 标签：android, performance, user-interface, android-maps-v2

我在[我的应用 "CellViz"](https://play.google.com/store/apps/details?id=com.cellviz.android)中使用 Android Maps API v2 。该应用程序的一项功能是向移动地图实时添加线条和多边形，以在用户收集数据时表示小区信号覆盖范围。

我的应用程序中当前有一个用户定义的参数（默认值 = 25m），它定义了在添加新线和多边形之前覆盖了多少距离。显然，当重绘大量线条和多边形时，UI 会变得迟缓。

我的问题是，当这种缓慢开始时，就地图上的对象数量而言，严重依赖于硬件。因此，我很难为距离参数选择一个默认值，既能在低端设备上表现良好，又能通过在地图上显示合理数量的信息来使该功能在高端设备上有用。

我在应用程序中有设置，您可以取消选中“显示移动多边形历史”和“显示移动线历史”，当这些设置被关闭时，呆滞消失 - 所以减速肯定是由正在绘制的对象数量引起的在地图上。

我希望能够以编程方式检测 UI 线程何时出现跟不上的问题，因此我可以将距离参数自动调整为更大的值（主要对未来的执行有用），或者简单地删除部分或全部这些当它们在低端设备上成为问题时，从地图中删除对象。

知道如何以编程方式检测由于在地图上绘制对象而导致的 UI 线程上的这种迟缓吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:29:31.953

我能想到的一种方法是解析 logcat 以搜索 GC 及其时间。

如果你在 1 秒内获得超过 100ms 的 GC，那是否足够缓慢？测试应该显示。

# ios - 通用应用程序-视图控制器->每个设备一个？

> ID：15937808
> 
> 赞同：2
> 
> 时间：2013-04-10T22:43:19.423
> 
> 标签：ios, objective-c, uiviewcontroller

所以我很快就会为 iOS 开发通用应用程序。我实际上从未这样做过，所以我不确定这里的最佳做法是什么，但我已经能够想到一些解决方案，而不是为每个设备使用单独的 VC。一般问题是 UI（过渡、定位、动画等），因为它因每个设备而异。我非常想避免重复的逻辑代码或为逻辑创建一些容器，因为 VC 是逻辑的地方。所以这是我的想法：

*   代表 - 我将为每个 VC 创建协议，然后创建 2 个实现该协议的类（包含特定于设备的逻辑），在 VC 中，我将根据当前正在运行的设备应用程序将委托设置为这些类之一
*   块 - 非常像代表，但更混乱
*   继承 - 与委托几乎相同，但不是协议和 2 个委托类和一个 VC，而是 3 个 VC - 1\. base 2\. iphone 3\. ipad - 2 和 3 将从 1 继承并实现/覆盖特定于设备的方法

这些是我能想到的 3 个，即使它们基本相同但实现不同。我个人喜欢代表，但我完全是新手，我正在征求你的意见。我正在以正确的方式考虑这一点，还是有任何其他方法或最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:36:45.830

我将为适用于 iPad 和 iPhone 的所有代码创建一个基本视图控制器，然后为每个从基本视图控制器继承的单独的视图控制器。这样，您只需覆盖包含设备特定代码的方法，通常是与 UI 相关的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:51:10.680

在大多数情况下，您实际上并不需要创建不同的视图控制器。

如果您使用故事板，您可以为 iPhone 和 iPad 使用的通用视图控制器创建一个故事板，并为 iPhone 和 iPad 分别添加两个故事板。然后你使用 IBOutlets 在你的代码中引用。

通常你在 iPad 版本中有更多的插座，因为屏幕更大，但代码在 iPhone 版本中应该仍然可以工作。

如果在您的情况下拆分故事板还不够，我建议在 VC 类的不同文件中使用两个类别。然后将通用代码保留在普通文件中，并在类别中添加专用功能代码。

# jquery - Client_side_validations gem 在 Rails 3.2.13 中不起作用

> ID：15937810
> 
> 赞同：4
> 
> 时间：2013-04-10T22:43:22.883
> 
> 标签：jquery, ruby-on-rails, validation, devise, client-side-validation

我花了很长时间试图让**client_side_validations** gem 工作，但没有显示任何文本，也**没有在 forms 之后注入脚本标签**。我已经使用 Rails 生成的标准表单和 Devise 表单进行了尝试。我确保包含 rails.validations.js 文件并取消注释 gem 提供的初始化程序中的块。

这是我的代码：

**client_side_validations.rb**

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  unless html_tag =~ /^<label/
    %{<div class="field_with_errors">#{html_tag}<label for="#{instance.send(:tag_id)}" class="message">#{instance.error_message.first}</label></div>}.html_safe
  else
    %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
  end
end 
```

**JS 包括**

```
<%= javascript_include_tag "/javascript/rails.validations.js" %> 
```

**宝石文件**

```
gem 'client_side_validations' 
```

**标准导轨形式**

```
<%= form_for(@report, :validate => true) do |f| %>
<%= f.hidden_field :url, :value => "http://#{request.host}:#{request.port}#{request.fullpath}" %>

<%= f.label :elements %>
<%= f.text_field :elements %>

<%= f.label :comments %>
<%= f.text_area :comments %>

<%= f.submit "Send", :class => 'btn' %> 
```

**设计形式**

```
<%= form_for(resource, :validate => true, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <%= f.label "First name" %>
  <%= f.text_field :first_name %>

  <%= f.label "Last name" %>
  <%= f.text_field :last_name %>

  <%= f.label :email %>
  <%= f.email_field :email %>

  <%= f.label :password %>
  <%= f.password_field :password %>

  <%= f.label :password_confirmation %>
  <%= f.password_field :password_confirmation %>

  <%= f.label :privacy_policy, :class => 'checkbox' do %>
  <%= f.check_box :privacy_policy %>I agree to the <%= link_to "Privacy policy", privacy_path %><% end %>

  <%= f.submit "Sign up", :class => 'btn' %>
<% end %> 
```

我真的不知道接下来我能做什么。我需要引用不同版本的 gem 吗？如何检查 gem 是否实际运行？

我目前正在使用**Rails 3.2.13**

我在 javascript 控制台中没有收到任何错误。

如果您想查看相关文件，请告诉我。

**任何指针将不胜感激！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:51:57.457

请在您的 Gemfile 中尝试以下操作：

```
gem 'client_side_validations`, :github => 'bcardarella/client_side_validations', :branch => '3-2-stable' 
```

# jquery - 如何设置主干获取回调方法

> ID：15937812
> 
> 赞同：2
> 
> 时间：2013-04-10T22:43:39.480
> 
> 标签：jquery, backbone.js, requirejs

如何为backbonejs的fetch方法设置jsonpCallback函数名？添加到问题是我也使用 requireJS 所以我试图不具有全局函数并遵循 AMD 模式。

我不能使用来自 jquery 的自动生成的方法名称的原因是我正在使用的 api 的开发人员出于缓存原因想要为回调方法设置一个静态名称。

**示例代码**

```
define([
    'jquery',
    'underscore',
    'backbone',
    'marionette',
    'paginator',
    'models/item'], function($, _, Backbone, Marionette, Paginator, modelItem) {
    'use strict';

        var PaginatedCollection = Paginator.requestPager.extend({ 
            model: modelItem,

            paginator_core: {
               jsonpCallback : 'callbackFunc',

                type: 'GET',
                cache: true,

                dataType: 'jsonp',

            },      
            callbackFunc : function(data) {
                console.log(data);
            }

        });

        return PaginatedCollection;

    }); 
```

**错误信息**

TypeError：callbackFunc 不是函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:00:35.657

覆盖您的 fetch 以在请求中传递回调方法名称。

```
fetch: function(options) {
  options || (options = {});
  var data = (options.data || {});
  options.dataType = 'jsonp';
  options.jsonp = 'callbackFunc';

  return Backbone.Collection.prototype.fetch.call(this, options);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T17:20:30.520

由于您想缓存结果（在浏览器中，也可能在服务器上），您还需要设置`options.cache`param.

参数`jsonpCallback`也不是`jsonp`

这是您的同步覆盖功能应如下所示：

```
sync: function (method, model, options) {
    options.timeout = 10000; // required, or the application won't pick up on 404 responses
    options.dataType = 'jsonp';
    options.jsonpCallback = 'callbackFunc';
    options.cache = 'true';
    return Backbone.sync(method, model, options);
} 
```

注意：BackboneJS v1.0，未在 0.9 或更早版本中测试

# javascript - google.maps.Polyline 不是构造函数

> ID：15937813
> 
> 赞同：1
> 
> 时间：2013-04-10T22:43:50.690
> 
> 标签：javascript, google-maps

我正在尝试将 PolyLine 对象添加到地图中，但收到错误消息“google.maps.Polyline not a constructor”。对我来说，这表明我无法导入此类的定义，但我在声明中遗漏的任何示例中都看不到任何内容。我将 Google Maps API 包括在内，如下所示：

```
<!DOCTYPE HTML >
<html>
  <head>
    <title>
    Location: Caradoc, Middlesex, ON, CA 
    </title>
    <meta charset='utf-8'>
    <meta http-equiv='default-style' content='text/css'>
    <meta name='author' content='James A. Cobban'>
    <meta name='copyright' content='&copy; 2013 James A. Cobban'>
    <meta name='keywords' content='genealogy, family, tree, ontario, canada'>
    <link rel='stylesheet' type='text/css' href='http://localhost/styles.css'/>
    <script src='../jscripts/js20/http.js' type='text/javaScript'>
    </script>
    <script src='../jscripts/CommonForm.js' type='text/javaScript'>
    </script>
    <script src='../jscripts/util.js' type='text/javaScript'>
    </script>
    <script src='../tinymce/jscripts/tiny_mce/tiny_mce.js' type='text/javaScript'>
    </script>
    <script src='http://maps.googleapis.com/maps/api/js?sensor=false&region=CA' type='text/javaScript'>
    </script>
    <script src='LegacyLocation.js' type='text/javaScript'>
    </script>
  </head> 
```

几年来，我一直在使用它来显示地图。但现在我希望使用折线来显示区域的边界。

```
var path    = [], poly;

function mapClick(mouseEvent)
{
    if (path.length == 0)
    {       // first click
    var polyOptions = {map: map,
                   strokeColor: "red", 
                   stokeOpacity: 0.5,
                   strokeWeight: 2};
    poly    = new google.maps.PolyLine(polyOptions);
    }       // first click
    path.push(mouseEvent.latLng);
    poly.setPath(path);
} 
```

我收到错误的那一行是直接从本网站上的一篇文章复制而来的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:57:39.573

是`new google.maps.Polyline`，不是`PolyLine`。

具有讽刺意味的是，你在这篇文章的标题中正确地大写了它，以及你引用错误消息的位置。您必须手动输入这些内容，而不是复制和粘贴... :-)

[google.maps.Polyline 文档](https://developers.google.com/maps/documentation/javascript/reference#Polyline)

# dart - dart web 组件不刷新 UI 上的列表

> ID：15937815
> 
> 赞同：3
> 
> 时间：2013-04-10T22:44:09.710
> 
> 标签：dart, dart-webui

我正在尝试创建一个简单的 Web 组件，其目的是显示消息几秒钟然后消失。我已经显示了前两个字符串，但是当我调用通知方法时没有任何反应：

```
<element name="x-informador" constructor="InformadorComponente" extens="div">
      <template>
        <ul>
          <template iterate="mensaje in mensajes">
            <li>{{mensaje}}</li>
          </template>
        </ul>
      </template>
      <script type="application/dart">

import 'dart:async';
import 'package:web_ui/web_ui.dart';
import 'package:web_ui/watcher.dart' as watcher;

class InformadorComponente extends WebComponent {

  @observable
  List mensajes = ['uno', 'dos'];

  const int DURACION_MENSAJE = 7;

  void informar(String informe) {
    mensajes.add(informe);
    watcher.dispatch();

    print('antes del Timer: ');
    print(mensajes);

    new Timer(new Duration(seconds: DURACION_MENSAJE), () {
      mensajes.removeAt(0);
      watcher.dispatch();

      print('paso del mensajes, first');
      print(mensajes);
    });
  }
}
      </script>
    </element> 
```

我可以在浏览器上正确看到所有这些打印，但列表保持不变，没有任何反应。当我更改该列表的字符串并在调用通知方法时分配值时，UI 会刷新，但是当我使用此列表时，什么也没有。

浏览器没有显示任何错误，我从外部调用informar，从层次结构上的一个Web组件。

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:21:33.413

Have a look at [Making a Map or a List observable in Web UI](https://stackoverflow.com/questions/15814349/making-a-map-or-a-list-observable-in-web-ui).

Basically, you want to use the new (and so far, mostly undocumented) `toObservable()` function to make Lists observable. Observables are displacing watcher.dispatch() as the preferred way of watching objects for changes.

# javascript - 通过 JS 存储和访问随机文本的最有效/最有效的方法是什么？

> ID：15937832
> 
> 赞同：0
> 
> 时间：2013-04-10T22:44:58.840
> 
> 标签：javascript, arrays, html, cordova, random

我正在使用 HTML5/jQuery + PhoneGap 构建一个基于回合的 iPad 游戏。

在玩家每回合之后，我们希望显示一些随机的基于文本的信息。通常是一个句子。

总的来说，我们可能有大约 100 个不同的句子，分为 4 组。

就性能而言，解决此问题的正确方法是什么？

这么多内容是否适合简单地存储在 4 个 javascript 数组中？还是太多了？如果太多，创建一个单独的 JSON 文件会更有意义吗？还是使用本地存储？或者那些会矫枉过正？还是我们应该在 HTML DOM 中“存储”这 100 位文本并从那里访问它？其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:06:48.667

100 句话是微不足道的，使用数组不应该对性能产生任何影响，但你可以随时尝试......

[http://jsfiddle.net/ZpCfB/](http://jsfiddle.net/ZpCfB/)（有100个）

[http://jsfiddle.net/ZpCfB/1/](http://jsfiddle.net/ZpCfB/1/)（有4000）

```
var sentences = [[], [], [], []],
    groupCount = 4,
    i = 0,
    sentence = 'This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence This is a very very very long sentence sdfsdfsdf sdfsdfsdfsdf sdfsd sdfsdfsdfsdf sdfsd fsdfsdfsdf s.';

for (; i < 25; i++) {
    for (x = 0; x < 4; x++) {
        sentences[x].push(sentence);
    }
}

console.log(sentences); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:59:13.333

使用 localStorage 并将 25 存储在一个由任何字符（例如“^”）分隔的 localStorage 对象中，然后使用 split() 访问字符串。

```
localStorage.str = "foo^bar^baz"; //etc..
var str1 = localStorage.str;
str1.split("^");
for(var i = 0; i &lt; str.length;i++){
alert(str1[i])
} 
```

# mysql - 比较 yymmdd 日期和今天

> ID：15937835
> 
> 赞同：0
> 
> 时间：2013-04-10T22:45:03.127
> 
> 标签：mysql, date, compare

在我的数据库中，日期以 yymmdd 格式存储。有没有办法将它们与 MYSQL 查询中的今天日期进行比较？

这个明显不行

```
SELECT * FROM users WHERE created >= CURDATE(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:51:39.580

最佳解决方法：使用本机 mysql 日期字段而不是自定义 varchar 格式，问题就消失了。

话虽这么说，至少您的格式是“最重要的部分优先”格式，所以

```
SELECT ...
WHERE created >= DATE_FORMAT(now(), '%y%m%d') 
```

应该可以工作，但需要注意的是您不符合 y2k 标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:52:41.320

尝试先像那样转换创建的列，然后进行比较

```
 SELECT * FROM users WHERE STR_TO_DATE(created, '%Y-%m-%d') >= CURDATE(); 
```

# list - 如何将 List[List[Int]] 的内部元素转换为 tupleNs？（如何展平多态元组）

> ID：15937837
> 
> 赞同：2
> 
> 时间：2013-04-10T22:45:12.590
> 
> 标签：list, scala, functional-programming, extract, flatten

我想转换多个列表，每个列表都有一个恒定的内部列表大小，如下所示：

```
 List(List(1, 2, 3), List(3, 4, 5))
    List(List(1, 2), List(3, 4)) 
```

对此：

```
 List((1, 2, 3), (3, 4, 5))
    List((1, 2), (3, 4)) 
```

因此，如果`val q: List[List[Int]] = List(List(1, 2, 3), List(3, 4, 5)`，可以尝试以下方法：

```
 q.map(_.collect { case a :: b => (a,b) }) 
```

对于 3 元素列表示例，这为您提供了以下形式的内容：

```
 List((1, List(2, 3)), (3, List(4, 5))) 
```

我不能展平元组，因为它们包含两种类型：Int 和 List[Int]，所以我不能按需要`(1, List(2,3))`变成`(1,2,3)`。

那么，我该如何扩展 flatten 函数来做到这一点，或者有没有更好的方法在 scala 中完成这个？scalaz 能帮上忙吗？

**tl;dr**：如何将列表的内部列表转换为元组？（可能的广义问题：如何展平多态元组？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:51:19.127

你可以使用隐式来做类似的事情：

```
trait TupOps[T,I] {
  val size: Int
  def fromList(vals: List[I]): T
}

def list2tup[T,I](vals: List[List[I]])(implicit to: TupOps[T,I]) = {
  if (!vals.forall(_.size == to.size)) sys.error("wrong list size")
  else vals.map(to.fromList _)
}

implicit def tup2ops[I] = new TupOps[(I,I),I] {
  val size = 2
  def fromList(v: List[I]) = (v(0), v(1))
}

implicit def tup3ops[I] = new TupOps[(I,I,I),I] {
  val size = 3
  def fromList(v: List[I]) = (v(0), v(1), v(2))
} 
```

像这样调用：

```
list2tup[(Int,Int),Int](List(List(1,2),List(2,3))) 
```

但这不一定更好，特别是因为您必须`Int`第二次编写，恕我直言，这是一种语法限制，因为您不能给出一种类型并告诉编译器推断另一种类型。

**更新**

如果你显式地传入隐式，它看起来几乎更好：

```
list2tup(List(List(1,2),List(2,3)))(tup2ops) 
```

# javascript - 将 div 对齐在同一行

> ID：15937838
> 
> 赞同：0
> 
> 时间：2013-04-10T22:45:14.793
> 
> 标签：javascript, jquery, html, css

如何使公司徽标 div 与名称、地址、电子邮件和 iphone 容器相邻......我尝试让显示内联并向右浮动，但它没有向上移动......在下面提供我的代码......

[http://jsfiddle.net/CfzSF/embedded/result/](http://jsfiddle.net/CfzSF/embedded/result/)

```
<div style="width: 464px;">

    <div class="page-title">Company Name</div>
    <div style="font-size: 12px; color: #222;">Name:</div>
    <div style="font-size: 12px; color: #222;">Address:</div>
    <div style="font-size: 12px; color: #222;">Email:</div>
    <div style="font-size: 12px; color: #222;">Phone:</div>

</div>

<div style="border: 1px solid #1a4567; width: 100px; float: right;">
    <div>Company</div>
    <div>Logo</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:49:07.143

使用`display: inline-block`- 水平对齐元素

此外，您可以选择使用`float`- 它会产生相同的效果。

**编辑：**

您还应该将 a 添加`float: left`到包含`name, address, email, and phone`字段的容器中。通过为容纳这些元素的容器提供 a `float`，容器将不会占据屏幕的整个宽度，而是占据最宽元素的宽度。

**工作示例：**

[http://jsfiddle.net/ee6GW/4/](http://jsfiddle.net/ee6GW/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:52:50.380

将浮动放在非浮动项目之前。

```
<div style="border: 1px solid #1a4567; width: 100px; float: right;">
    <div>Company</div>
    <div>Logo</div>
</div>
<div style="width: 464px;">
    <div class="page-title">Company Name</div>
    <div style="font-size: 12px; color: #222;">Name:</div>
    <div style="font-size: 12px; color: #222;">Address:</div>
    <div style="font-size: 12px; color: #222;">Email:</div>
    <div style="font-size: 12px; color: #222;">Phone:</div>
</div> 
```

# math - GLSL | 广告牌着色器，保持缩放

> ID：15937842
> 
> 赞同：7
> 
> 时间：2013-04-10T22:45:35.327
> 
> 标签：math, opengl, glsl

我在互联网上搜索了教程、实现和帮助。没有什么。

我唯一能找到的是将 mat4 的左上角 3x3 矩阵设置为标识的广告牌着色器实现。这确实抛弃了旋转，但实际上也抛弃了缩放。

有没有一种方法可以做不会丢弃（非均匀）缩放的广告牌？

**注意：**我不是在寻找任何人来为我编程。只是我无法理解具体细节。欢迎任何指向正确方向的指针。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T22:55:20.307

左上角的 3x3 矩阵包含旋转和比例。如您所见，对上面的 3x3 核弹都进行核弹。您需要先从 3x3 中提取比例来保留比例。3x3 的每一列，作为一个向量，通过取每个列向量的大小来告诉你每个方向的比例。

如果您的 4x4 矩阵是

```
RSX   RSY   RSZ   T
0     0     0     1 
```

那么比例因子是

```
xScale = ||RSX||
yScale = ||RSY||
zScale = ||RSZ|| 
```

保存这些，然后形成一个新的 4x4 矩阵，做你已经在做的事情，但也要结合比例。

```
xScale 0      0      xT
0      yScale 0      yT
0      0      zScale zT
0      0      0      1 
```

# android - 带有 Google 地图和片段的 ActionBarSherlock

> ID：15937843
> 
> 赞同：0
> 
> 时间：2013-04-10T22:45:36.567
> 
> 标签：android, android-fragments, actionbarsherlock, android-mapview

我正在尝试编译这个[例子](http://blog.xavirigau.com/?p=39#comment-1075)

我在用：

android-support-v4-googlemaps

[ActionBarSherlock-Plugin-Maps v.4.0](http://actionbarsherlock.com/)

我返回了这个错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.xrigau.mapsfragments/com.xrigau.mapsfragments.MapswithfragmentsActivity}: java.lang.IllegalArgumentException: MapViews can only be created inside instances of MapActivity. 
```

在这一行：

```
Exchanger.mMapView = new MapView(this, "INSERT_YOUR_MAP_API_KEY_HERE"); 
```

你能帮我解决这个问题吗？

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // We instantiate the MapView here, it's really important!
        Exchanger.mMapView = new MapView(this, "INSERT_YOUR_MAP_API_KEY_HERE"); // TODO: Replace for API Key!

        setupFragments();
        // We manually show the list Fragment.
        showFragment(mMyListFragment);
    } 
```

这是整个文件 .java...这个类扩展了 SherlockFragmentActivity：

```
 package com.xrigau.mapsfragments;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.app.SherlockListFragment;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.google.android.maps.MapView;

public class MapswithfragmentsActivity extends SherlockFragmentActivity {

    private MapFragment mMapFragment;
    private MyListFragment mMyListFragment;

    // We use this fragment as a pointer to the visible one, so we can hide it easily.
    private Fragment mVisible = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // We instantiate the MapView here, it's really important!
        Exchanger.mMapView = new MapView(this, "INSERT_YOUR_MAP_API_KEY_HERE"); // TODO: Replace for API Key!

        setupFragments();
        // We manually show the list Fragment.
        showFragment(mMyListFragment);
    }

    /**
     * This method does the setting up of the Fragments. It basically checks if
     * the fragments exist and if they do, we'll hide them. If the fragments
     * don't exist, we create them, add them to the FragmentManager and hide
     * them.
     */
    private void setupFragments() {
        final FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

        /*
         * If the activity is killed while in BG, it's possible that the
         * fragment still remains in the FragmentManager, so, we don't need to
         * add it again.
         */
        mMapFragment = (MapFragment) getSupportFragmentManager().findFragmentByTag(MapFragment.TAG);
        if (mMapFragment == null) {
            mMapFragment = new MapFragment();
            ft.add(R.id.fragment_container, mMapFragment, MapFragment.TAG);
        }
        ft.hide(mMapFragment);

        mMyListFragment = (MyListFragment) getSupportFragmentManager().findFragmentByTag(MyListFragment.TAG);
        if (mMyListFragment == null) {
            mMyListFragment = new MyListFragment();
            ft.add(R.id.fragment_container, mMyListFragment, MyListFragment.TAG);
        }
        ft.hide(mMyListFragment);

        ft.commit();
    }

    /**
     * This method shows the given Fragment and if there was another visible
     * fragment, it gets hidden. We can just do this because we know that both
     * the mMyListFragment and the mMapFragment were added in the Activity's
     * onCreate, so we just create the fragments once at first and not every
     * time. This will avoid facing some problems with the MapView.
     * 
     * @param fragmentIn
     *            The fragment to show.
     */
    private void showFragment(Fragment fragmentIn) {
        if (fragmentIn == null) return;

        final FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);

        if (mVisible != null) ft.hide(mVisible);

        ft.show(fragmentIn).commit();
        mVisible = fragmentIn;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu with the options to show the Map and the List.
        getSupportMenuInflater().inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.ic_list:
            // Show mMyListFragment.
            showFragment(mMyListFragment);
            return true;

        case R.id.ic_map:
            // Show mMapFragment.
            showFragment(mMapFragment);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    /**
     * This class acts as an exchanger between the Activity and the MapFragment,
     * so if you want, you can put the MapFragment class in a separate java
     * file.
     * 
     * @author Xavi
     * 
     */
    public static class Exchanger {
        // We will use this MapView always.
        public static MapView mMapView;
    }

    /**
     * This is our ListFragment class. You can put it in a separate java file.
     * 
     * @author Xavi
     * 
     */
    public static class MyListFragment extends SherlockListFragment {

        public static final String TAG = "listFragment";

        private final String[] mItems = { "List Item 1", "List Item 2",
                "List Item 3", "List Item 4", "List Item 5", "List Item 6",
                "List Item 7", "List Item 8", "List Item 9", "List Item 10" };

        public MyListFragment() {}

        @Override
        public void onCreate(Bundle arg0) {
            super.onCreate(arg0);
            setRetainInstance(true);
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup vg, Bundle data) {
            // Inflate the ListView layout file.
            return inflater.inflate(R.layout.list_fragment, null);
        }

        @Override
        public void onViewCreated(View arg0, Bundle arg1) {
            super.onViewCreated(arg0, arg1);
            setListAdapter(new ArrayAdapter<String>(getSherlockActivity(), android.R.layout.simple_list_item_1, android.R.id.text1, mItems));
        }
    }

    /**
     * This is the Fragment class that will hold the MapView as its content
     * view. You can put it in a separate java file.
     * 
     * @author Xavi
     * 
     */
    public static class MapFragment extends SherlockFragment {

        public static final String TAG = "mapFragment";

        public MapFragment() {}

        @Override
        public void onCreate(Bundle arg0) {
            super.onCreate(arg0);
            setRetainInstance(true);
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup vg, Bundle data) {
            // The Activity created the MapView for us, so we can do some init stuff.
            Exchanger.mMapView.setClickable(true);
            Exchanger.mMapView.setBuiltInZoomControls(true); // If you want.

            /*
             * If you're getting Exceptions saying that the MapView already has
             * a parent, uncomment the next lines of code, but I think that it
             * won't be necessary. In other cases it was, but in this case I
             * don't this should happen.
             */
            /*
             * final ViewGroup parent = (ViewGroup) Exchanger.mMapView.getParent();
             * if (parent != null) parent.removeView(Exchanger.mMapView);
             */

            return Exchanger.mMapView;
        }
    }
} 
```

SherlockMapActivity.java：

```
 package com.actionbarsherlock.app;

    import android.content.res.Configuration;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.view.View;
    import android.view.Window;
    import android.view.ViewGroup.LayoutParams;
    import com.actionbarsherlock.ActionBarSherlock;
    import com.actionbarsherlock.ActionBarSherlock.OnActionModeFinishedListener;
    import com.actionbarsherlock.ActionBarSherlock.OnActionModeStartedListener;
    import com.actionbarsherlock.ActionBarSherlock.OnCreatePanelMenuListener;
    import com.actionbarsherlock.ActionBarSherlock.OnMenuItemSelectedListener;
    import com.actionbarsherlock.ActionBarSherlock.OnPreparePanelListener;
    import com.actionbarsherlock.app.ActionBar;
    import com.actionbarsherlock.view.ActionMode;
    import com.actionbarsherlock.view.Menu;
    import com.actionbarsherlock.view.MenuInflater;
    import com.actionbarsherlock.view.MenuItem;
    import com.google.android.maps.MapActivity;

    public abstract class SherlockMapActivity extends MapActivity implements OnCreatePanelMenuListener, OnPreparePanelListener, OnMenuItemSelectedListener, OnActionModeStartedListener, OnActionModeFinishedListener {
        private ActionBarSherlock mSherlock;

        protected final ActionBarSherlock getSherlock() {
            if (mSherlock == null) {
                mSherlock = ActionBarSherlock.wrap(this, ActionBarSherlock.FLAG_DELEGATE);
            }
            return mSherlock;
        }

        ///////////////////////////////////////////////////////////////////////////
        // Action bar and mode
        ///////////////////////////////////////////////////////////////////////////

        public ActionBar getSupportActionBar() {
            return getSherlock().getActionBar();
        }

        public ActionMode startActionMode(ActionMode.Callback callback) {
            return getSherlock().startActionMode(callback);
        }

        @Override
        public void onActionModeStarted(ActionMode mode) {}

        @Override
        public void onActionModeFinished(ActionMode mode) {}

        ///////////////////////////////////////////////////////////////////////////
        // General lifecycle/callback dispatching
        ///////////////////////////////////////////////////////////////////////////

        @Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);
            getSherlock().dispatchConfigurationChanged(newConfig);
        }

        @Override
        protected void onPostResume() {
            super.onPostResume();
            getSherlock().dispatchPostResume();
        }

        @Override
        protected void onPause() {
            getSherlock().dispatchPause();
            super.onPause();
        }

        @Override
        protected void onStop() {
            getSherlock().dispatchStop();
            super.onStop();
        }

        @Override
        protected void onDestroy() {
            getSherlock().dispatchDestroy();
            super.onDestroy();
        }

        @Override
        protected void onPostCreate(Bundle savedInstanceState) {
            getSherlock().dispatchPostCreate(savedInstanceState);
            super.onPostCreate(savedInstanceState);
        }

        @Override
        protected void onTitleChanged(CharSequence title, int color) {
            getSherlock().dispatchTitleChanged(title, color);
            super.onTitleChanged(title, color);
        }

        @Override
        public final boolean onMenuOpened(int featureId, android.view.Menu menu) {
            if (getSherlock().dispatchMenuOpened(featureId, menu)) {
                return true;
            }
            return super.onMenuOpened(featureId, menu);
        }

        @Override
        public void onPanelClosed(int featureId, android.view.Menu menu) {
            getSherlock().dispatchPanelClosed(featureId, menu);
            super.onPanelClosed(featureId, menu);
        }

        @Override
        public boolean dispatchKeyEvent(KeyEvent event) {
            if (getSherlock().dispatchKeyEvent(event)) {
                return true;
            }
            return super.dispatchKeyEvent(event);
        }

        @Override
        protected void onSaveInstanceState(Bundle outState) {
            super.onSaveInstanceState(outState);
            getSherlock().dispatchSaveInstanceState(outState);
        }

        @Override
        protected void onRestoreInstanceState(Bundle savedInstanceState) {
            super.onRestoreInstanceState(savedInstanceState);
            getSherlock().dispatchRestoreInstanceState(savedInstanceState);
        }

        ///////////////////////////////////////////////////////////////////////////
        // Native menu handling
        ///////////////////////////////////////////////////////////////////////////

        public MenuInflater getSupportMenuInflater() {
            return getSherlock().getMenuInflater();
        }

        @Override
        public void invalidateOptionsMenu() {
            getSherlock().dispatchInvalidateOptionsMenu();
        }

        public void supportInvalidateOptionsMenu() {
            invalidateOptionsMenu();
        }

        @Override
        public final boolean onCreateOptionsMenu(android.view.Menu menu) {
            return getSherlock().dispatchCreateOptionsMenu(menu);
        }

        @Override
        public final boolean onPrepareOptionsMenu(android.view.Menu menu) {
            return getSherlock().dispatchPrepareOptionsMenu(menu);
        }

        @Override
        public final boolean onOptionsItemSelected(android.view.MenuItem item) {
            return getSherlock().dispatchOptionsItemSelected(item);
        }

        @Override
        public void openOptionsMenu() {
            if (!getSherlock().dispatchOpenOptionsMenu()) {
                super.openOptionsMenu();
            }
        }

        @Override
        public void closeOptionsMenu() {
            if (!getSherlock().dispatchCloseOptionsMenu()) {
                super.closeOptionsMenu();
            }
        }

        ///////////////////////////////////////////////////////////////////////////

  // Sherlock menu handling
    ///////////////////////////////////////////////////////////////////////////

    @Override
    public boolean onCreatePanelMenu(int featureId, Menu menu) {
        if (featureId == Window.FEATURE_OPTIONS_PANEL) {
            return onCreateOptionsMenu(menu);
        }
        return false;
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        return true;
    }

    @Override
    public boolean onPreparePanel(int featureId, View view, Menu menu) {
        if (featureId == Window.FEATURE_OPTIONS_PANEL) {
            return onPrepareOptionsMenu(menu);
        }
        return false;
    }

    public boolean onPrepareOptionsMenu(Menu menu) {
        return true;
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) {
        if (featureId == Window.FEATURE_OPTIONS_PANEL) {
            return onOptionsItemSelected(item);
        }
        return false;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        return false;
    }

    ///////////////////////////////////////////////////////////////////////////
    // Content
    ///////////////////////////////////////////////////////////////////////////

    @Override
    public void addContentView(View view, LayoutParams params) {
        getSherlock().addContentView(view, params);
    }

    @Override
    public void setContentView(int layoutResId) {
        getSherlock().setContentView(layoutResId);
    }

    @Override
    public void setContentView(View view, LayoutParams params) {
        getSherlock().setContentView(view, params);
    }

    @Override
    public void setContentView(View view) {
        getSherlock().setContentView(view);
    }

    public void requestWindowFeature(long featureId) {
        getSherlock().requestFeature((int)featureId);
    }

    ///////////////////////////////////////////////////////////////////////////
    // Progress Indication
    ///////////////////////////////////////////////////////////////////////////

    public void setSupportProgress(int progress) {
        getSherlock().setProgress(progress);
    }

    public void setSupportProgressBarIndeterminate(boolean indeterminate) {
        getSherlock().setProgressBarIndeterminate(indeterminate);
    }

    public void setSupportProgressBarIndeterminateVisibility(boolean visible) {
        getSherlock().setProgressBarIndeterminateVisibility(visible);
    }

    public void setSupportProgressBarVisibility(boolean visible) {
        getSherlock().setProgressBarVisibility(visible);
    }

    public void setSupportSecondaryProgress(int secondaryProgress) {
        getSherlock().setSecondaryProgress(secondaryProgress);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:18:21.790

从异常看来，您扩展了 Activity 而不是 MapActivity。

改变

```
public class MyMapActivity extends Activity { 
```

至

```
public class MyMapActivity extends MapActivity { 
```

你也可以考虑添加

```
<uses-library android:name="com.google.android.maps" /> 
```

如果您还没有，请在清单文件中。

# c# - 登录后从数据库中检索角色列值

> ID：15937844
> 
> 赞同：1
> 
> 时间：2013-04-10T22:45:44.547
> 
> 标签：c#, winforms, visual-studio-2010, sql-server-2008

我正在使用 Visual Studio 2010 和 C# 中的 Windows 窗体应用程序。该应用程序正常运行我可以完美登录，并将用户名登录到下一个表单，这是登录成功后打开的菜单表单。现在我的问题是我想检查登录的用户是经理还是管理员，这取决于存储在数据库中角色列中的值，所以我可以禁用管理员用户的某些功能。有什么想法或帮助将我引导到正确的地方吗？我希望我的问题很清楚

我有一个名为 tblUsers 的表，其中包含以下字段：

```
userId
Username
Password
FirstName
LastName
Mobile
Landline
Address
Email
Role 
```

//clsLoginCollection:

```
 public Boolean Login(clsLogin Login)
      {
        clsDataConduit logincheck = new clsDataConduit();
        logincheck.AddParameter("Username", Login.username);
        logincheck.AddParameter("Password", Login.password);

        logincheck.Execute("sproc_tblUser_Login");

        if (logincheck.Count > 0)
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

//存储过程：

```
ALTER PROCEDURE sproc_tblUser_Login
@Username varchar(10),
@Password varchar(10)

AS

select Username, Password from tblUsers where Username = @Username AND Password = @Password 
```

//clsLoginform:

```
 private void btnLogin_Click(object sender, EventArgs e)
    {
       Boolean b = false;

        if ((String.IsNullOrEmpty(tbUsername.Text)) || (String.IsNullOrEmpty(tbPassword.Text)))
        {
            MessageBox.Show("Username or Password Cannot Be Blank.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        }
        else
        {
            clsLoginCollection l = new clsLoginCollection();
            clsEncryption encrypt = new clsEncryption();// this class have the encryption method
            b = l.Login(new clsLogin(tbUsername.Text, encrypt.Encrypt(tbPassword.Text)));

            if (b == true)
            {
                MainMenu m = new MainMenu(tbUsername.Text, tbPassword.Text);
                m.Show();
                this.Visible = false;
            }
            else
            {
                MessageBox.Show("Invalid Login Details", "Error Message", MessageBoxButtons.OK, MessageBoxIcon.Error, MessageBoxDefaultButton.Button2);
            }
        }
    } 
```

//cls 完整登录

```
public class clsLogin
{
    private Int32 UserID;
    private string Username;
    private string Password;
    private string FirstName;
    private string LastName;
    private string Mobile;
    private string Landline;
    private string Address;
    private string Email;
    private string Role;

    public clsLogin()
    { }

    public clsLogin(string UserName, string Password)
    {
        this.username = UserName;
        this.Password = Password;
    }

    public clsLogin(string UserName, string Password, string FirstName, string LastName, string Mobile, string Landline, string Address, string Email, string Role)
    {
        this.username = UserName;
        this.Password = Password;
        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Mobile = Mobile;
        this.Landline = Landline;
        this.Address = Address;
        this.Email = Email;
        this.Role = Role;
    }

    public Int32 userID
    {
        get { return UserID; }
        set { UserID = value; }
    }

    public string username
    {
        get {return Username;}
        set {Username = value;}
    }

    public string password
    {
        get {return Password;}
        set {Password = value;}
    }

    public string firstName
    {
        get { return FirstName; }
        set { FirstName = value; }
    }

    public string lastName
    {
        get { return LastName; }
        set { LastName = value; }
    }

    public string mobile
    {
        get { return Mobile; }
        set { Mobile = value; }
    }

    public string landline
    {
        get { return Landline; }
        set { Landline = value; }
    }

    public string address
    {
        get { return Address; }
        set { Address = value; }
    }

    public string email
    {
        get { return Email; }
        set { Email = value; }
    }

    public string role
    {
        get { return Role; }
        set { Role = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:59:04.110

像这样的东西？

```
SELECT Role FROM tblUsers WHERE Username = @Username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:18:21.300

这是我对我提出的问题的回答。我使用了 rikki b 提供的查询

//clsLoginCollection（新增返回角色的方法）

```
public string CheckRole(clsLogin Rolecheck)
    {
        string Role;
        clsDataConduit dataconduit = new clsDataConduit();
        dataconduit.AddParameter("@Username", Rolecheck.username);
        dataconduit.AddParameter("@Password", Rolecheck.password);
        dataconduit.Execute("sproc_tblUsers_FilterByRole");

        Role = dataconduit.QueryResults.Rows[0]["Role"].ToString();

        return Role;
    } 
```

在我的 Login.cs 类上，我创建了一个字符串变量来保存此方法的结果

```
string role = "" 
```

和下面

```
logindetails = l.Login(new clsLogin(tbUsername.Text, encrypt.Encrypt(tbPassword.Text))); 
```

我已经添加了这段代码

```
roleofuser =  l.CheckRole(new clsLogin(tbUsername.Text, encrypt.Encrypt(tbPassword.Text))); 
```

因此，如果用户是管理员、经理等，则此“roleofuser”将返回，具体取决于角色，然后使用 if/else 语句，我能够将它们重定向到正确的形式

谢谢 以防万一有人陷入这个特殊问题

# email - VBA - Outlook：从多个邮箱之一发送消息

> ID：15937849
> 
> 赞同：0
> 
> 时间：2013-04-10T22:46:10.927
> 
> 标签：email, vba, outlook, exchange-server

这是我的问题： - 我的客户在 Outlook 2010 中有多个帐户 - 每个帐户都有多个邮箱

示例： - 账户 A：email@address.com - 在该账户下，他关联了以下邮箱： 1\. 支持 support@address.com 2\. 联系 contact@address.com ....

我需要完成的是使用 VBA 发送电子邮件并将消息作为 FROM contact@address.com 发送。我的客户正在使用 Exchange 服务器。不幸的是，我没有 Exchange 服务器，因此无法对其进行测试。

你会不会有什么想法？

这是我当前用于设置帐户的代码（但只有帐户不是该帐户关联/下方的邮箱）：

```
mailItem.sendUsingAccount = application.session.accounts.item("Contacts) 
```

这部分工作和结果来自：email@address.com。但是，我不知道如何发送电子邮件，所以它显示为 FROM：contacts@address.com。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:54:57.653

我相信您可以将 .SendOnBehalfOfName 设置为您要使用的地址。

这样做将提示用户确认对 Mailitem 的访问。

# iphone - 来自 PHP/MySql 服务器的 iOs 地理定位引脚

> ID：15937851
> 
> 赞同：0
> 
> 时间：2013-04-10T22:46:14.643
> 
> 标签：iphone, mysql, ios, web-services, geolocation

我正在制作一个使用数据库中的位置实现 MkMapView 的应用程序。我已经制作了一个登录系统，它可以工作：

1.  有一个in-App Form（伪，pw），用户登录
2.  它连接到一个 PHP 文件，
3.  该文件向服务器发出我的请求，如果信息正确，则记录用户。

现在我想从这对夫妇一样的同一台服务器获取信息：纬度/经度或地点的地址。

我想得到这样的东西：

[http://i.stack.imgur.com/x5e4n.png](http://i.stack.imgur.com/x5e4n.png)

我已经设置了表格，我想要的只是检索这些数据，这些数据将每 x 分钟更新一次，或者当用户点击刷新按钮时更新。

这是我的 PHP 文件请求（已编辑）：

```
<?php

    $result = login();
    $json = array();
    $i = 0;

    while($row = mysql_fetch_array($result)){

    $row['Nom'] = mb_check_encoding($row['Nom'], 'UTF-8') ? $row['Nom'] : utf8_encode($row['Nom']);
    $row['Adresse'] = mb_check_encoding($row['Adresse'], 'UTF-8') ? $row['Adresse'] : utf8_encode($row['Adresse']);

    //Associations des resultats
        $json['locations'][$i]= array(
            'adresse' => $row['Adresse'],
            'nom' => $row['Nom'],
            'latitude' => $row['latitude'],
            'longitude' => $row['longitude']
        );  
        $i++;
    }

    //Encodage du tableau en JSON
    echo json_encode($json);
    echo "<br>";

//FONCTION
function makeSqlConnection()
{
$DB_HostName = "localhost";
$DB_Name = "DB";
$DB_User = "USER";
$DB_Pass = "PW";

    $con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die(mysql_error()); 

        mysql_select_db($DB_Name,$con) or die(mysql_error()); 

    return $con;
}

function disconnectSqlConnection($con)
{
    mysql_close($con);
}

function login()
{
    $con = makeSqlConnection();

    $sql = "SELECT * FROM  Parking";
    $res = mysql_query($sql,$con) or die(mysql_error());

    /*while($r = mysql_fetch_assoc($res)) {
        echo $r['Adresse'] . " " . $r['Nom'];
        echo "<br>";
        $rows[] = $r;
    }*/

    disconnectSqlConnection($con);

    return $res;
}// end of Function 
?> 
```

更新，现在可以了：

{"locations":[{"adresse":"52 Rue du Commerce, 75015 Paris","nom":"une otra cos\u00e9","latitude":"48.846481","longitude":"2.295336"}, {"adresse":"80, rue de la Convention 75015 PARIS","nom":"una cosa","latitude":"48.842136","longitude":"2.285587"}]}

我需要创建一个架构，以后可以重用于 android

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:48:41.503

这是一个很好的教程：[http ://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)

* * *

关于您的 PHP 代码：

您可以编辑 while 以显示 JSON，然后在应用程序中检索它。

```
$json = array();
while($row = mysql_fetch_array($result)){
    $json['locations'][] = array(
        'adresse' => $row['Adresse']. " " . $row['Nom'],
        'latitude' => HERE_LATITUDE_OF_LOCATION_FROM_DB,
        'longitude' => HERE_LONGITUDE_OF_LOCATION_FROM_DB
    );
}
$json = mb_check_encoding($json, 'UTF-8') ? $json : utf8_encode($json);
echo json_encode($json); 
```

然后 iOS 部分与 AFNetworking：

```
NSURL *url = [NSURL URLWithString:@"http://yourserver.com/api/locations"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    for (NSDictionary *location in [JSON objectForKey:@"locations"]) {
        /*
         add here your location to the MKMapView using
         annotation (get lat, lon using [location objectForKey:@"latitude"];)
        */
    }
} failure:nil];
[operation start]; 
```

# javascript - Javascript 音频在浏览器中播放，但不在 iOS 设备上

> ID：15937852
> 
> 赞同：2
> 
> 时间：2013-04-10T22:46:17.150
> 
> 标签：javascript, ios, html, ipad, mobile-safari

我有以下代码用于从数组中播放音频文件

```
function playSound() {
    if(index>=25){
        index = 0;
}
document.getElementById("sound").innerHTML=
"<embed src=\""+audio[index]+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
index++;
} 
```

音频在我的笔记本电脑上播放正常，但无法在 iOS 设备上播放。该代码是从以下 HTML 触发的

```
<button id="newWordBtn" class="play" onclick="playSound(); $('#result').empty(); $('#yourTurn').val(''); myFunction();" data-icon="refresh" tabindex="3">New Word</button> 
```

关于如何让这个工作的任何想法？我知道 iOS 不允许自动播放，但这个声音是由按钮触发的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:29:18.337

许多移动浏览器不处理`<embed>`标签。此外，您没有显示来源是什么，但我敢打赌您使用的是 MP3 文件 - 这对于支持 MP3 的浏览器来说很好，但对于那些不支持的浏览器......是的。

你应该得到这样的结果：

```
<audio autostart>
    <source type="audio/ogg" src="mySong.ogg" />
    <source type="audio/mpeg" src="mySong.mp3" />
    <p>Your browser does not support HTML5 audio. Sorry!</p>
</audio> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T20:34:43.243

不幸的是，iOS 将音频/视频对象锁定为每个网页 1 个，所以一旦你加载了那个，你就已经使用了你的那个。这将默默地杀死您要同时播放的所有其他声音文件。为了让多轨音频通过 javascript 在 iOS 中工作，我已经苦苦挣扎了几个星期，到目前为止，对我有用的最佳解决方案是[Web Audio API](http://www.html5rocks.com/en/tutorials/webaudio/intro/)。附上教程，希望对你有用

# facebook - 当您通过创建者查询时，FQL 事件表不返回 2013 年的事件

> ID：15937860
> 
> 赞同：1
> 
> 时间：2013-04-10T22:47:09.107
> 
> 标签：facebook, facebook-graph-api, facebook-fql

当您使用创建者对事件表和索引进行 FQL 查询时，它不会返回 2013 年的任何事件。我尝试提交错误报告但它被标记为无效，因为他们说他们无法使用确切的查询重现问题我给了他们。但我认为这是因为我在错误报告的标题中打错了字，并输入了“确实返回 2013 年的事件”而不是“不返回 2013 年的事件”。我给他们的确切查询如下所示。任何人都可以验证此问题或让我知道我是否做错了什么？

SELECT eid, start_time, creator FROM event WHERE creator = 80241467512 ORDER BY start_time DESC

您可以比较图形 API 查询：/80241467512?fields=events.fields(start_time)

您会注意到图形 API 结果中有很多 2013 年的事件。但 FQL 结果没有。您还会注意到，与 2012 年及更早的图形 API 结果相比，FQL 结果中有很多缺失的事件。

我想使用 FQL 查询，因为我将使用“IN”语句来查询多个页面 ID。

这是我提交的错误报告的链接：[https ://developers.facebook.com/bugs/360659767374062](https://developers.facebook.com/bugs/360659767374062)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:38:04.023

由于 Facebook 对修复 bug 表现出不专业的态度，我建议您尝试以下解决方法：

```
SELECT eid, start_time, creator FROM event
    WHERE eid IN (
        SELECT eid FROM event_member WHERE uid = 80241467512
    )
    ORDER BY start_time DESC 
```

然后，在遍历所有事件时，过滤并拒绝那些创建者不等于 80241467512 的事件。

# wordpress - 2 wordpress 与 nginx & varnish 安装在同一个域上，一个不起作用

> ID：15937863
> 
> 赞同：0
> 
> 时间：2013-04-10T22:47:25.240
> 
> 标签：wordpress, nginx, varnish

我继承了一个 Web 项目，其中一个域托管 2 个 wordpress 安装（domain.com 和 domain.com/blog）。我稍后会将两者结合起来，但现在它们必须分开。我正在将该站点移动到 ubuntu LEMP 服务器，其中一个 wordpress 安装只是显示一个空白页面。我确定这与我的配置有关。有人能帮我吗？

```
server {

server_name www.domain.com;
listen [::]:8080 deferred;
port_in_redirect off;
server_tokens off;
autoindex off;

client_max_body_size 20m;
client_body_buffer_size 128k;

root /srv/www/domain.com/htdocs;
index index.html index.htm index.php;
try_files $uri $uri/ /index.php?q=$uri&$args;

# Define default caching of 24h
expires 86400s;
add_header Pragma public;
add_header Cache-Control "max-age=86400, public, must-revalidate, proxy-revalidate";

# deliver a static 404
error_page 404 /404.html;
location  /404.html {
    internal;
}

# Deliver 404 instead of 403 "Forbidden"
error_page 403 = 404;

# Do not allow access to files giving away your WordPress version
location ~ /(\.|wp-config.php|readme.html|licence.txt) {
    return 404;
}

# Add trailing slash to */wp-admin requests.
rewrite /wp-admin$ $scheme://$host$uri/ permanent;

# Don't log robots.txt requests
location = /robots.txt {
    allow all;
    log_not_found off;
    access_log off;
}

# Rewrite for versioned CSS+JS via filemtime
location ~* ^.+\.(css|js)$ {
    rewrite ^(.+)\.(\d+)\.(css|js)$ $1.$3 last;
    expires 31536000s;
    access_log off;
    log_not_found off;
    add_header Pragma public;
    add_header Cache-Control "max-age=31536000, public";
}

# Aggressive caching for static files
location ~* \.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|odb|odc|odf|odg|odp|ods|odt|ogg|ogv|otf|pdf|png|pot|pps|ppt|pptx|ra|ram|s$
    expires 31536000s;
    access_log off;
   log_not_found off;
    add_header Pragma public;
    add_header Cache-Control "max-age=31536000, public";
}

# pass PHP scripts to Fastcgi listening on Unix socket
# Do not process them if inside WP uploads directory
# If using Multisite or a custom uploads directory,
# please set the */uploads/* directory in the regex below
location ~* (^(?!(?:(?!(php|inc)).)*/uploads/).*?(php)) {
    try_files $uri = 404;
    fastcgi_split_path_info ^(.+.php)(.*)$;
    fastcgi_pass unix:/var/run/php-fpm.socket;

    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_config;
    include fastcgi_params;

}

# Deny access to hidden files
location ~ /\. {
    deny all;
    access_log off;
    log_not_found off;
}

    location ~ /blog/ {

    root /srv/www/domain.com/htdocs;

    try_files $uri = 404;
    fastcgi_split_path_info ^(.+.php)(.*)$;
    fastcgi_pass unix:/var/run/php-fpm.socket;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
    fastcgi_intercept_errors on;
    fastcgi_ignore_client_abort off;
    fastcgi_connect_timeout 60;
    fastcgi_send_timeout 180;
    fastcgi_read_timeout 180;
    fastcgi_buffer_size 128k;
    fastcgi_buffers 4 256k;
    fastcgi_busy_buffers_size 256k;
    fastcgi_temp_file_write_size 256k;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:53:42.877

“静态文件的积极缓存”的正则表达式缺少右括号。

# mysql - 用于每年或每月汇总的 MySql 查询

> ID：15937864
> 
> 赞同：0
> 
> 时间：2013-04-10T22:47:49.563
> 
> 标签：mysql, checksum

我有以下表结构： table={id,DailyDate,value1,value2} 与 DailyDate ex。2000-01-01

对于每个值，我如何首先获得每月汇总结果，然后每年获得汇总结果？

我正在尝试以下但它不起作用

```
Select Sum(Value1),Year(DailyDate),Month(DailyDate)
From table
Group by Year(DailyDate),Month(DailyDate)
Order by Year(DailyDate),Month(DailyDate) 
```

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:03:08.850

如果您要求的是按年份进行小计，请尝试以下操作：

```
SELECT TheSum, TheYear, COALESCE(TheMonth, CONCAT('Total Year ', TheYear))
FROM (
  SELECT
    SUM(Value1) TheSum,
    YEAR(DailyDate) AS TheYear,
    MONTH(DailyDate) AS TheMonth
  FROM table
  GROUP BY Year(DailyDate), MONTH(DailyDate) WITH ROLLUP) x
WHERE TheYear IS NOT NULL 
```

内部查询用于`WITH ROLLUP`按月生成小计和按年生成总计。外部查询格式化年份并删除总计。

# scala - 添加到自定义列表的末尾

> ID：15937872
> 
> 赞同：0
> 
> 时间：2013-04-10T22:48:26.513
> 
> 标签：scala

我正在上一门 scala 课程，在一项作业中，我想添加到自定义列表的末尾。

```
trait EntityList {
  def head: Entity
  def tail: EntityList
  def isEmpty: Boolean
}

object Nil extends EntityList {
  def head = throw new java.util.NoSuchElementException("head of EmptyList")
  def tail = throw new java.util.NoSuchElementException("tail of EmptyList")
  def isEmpty = true
}

class Cons(val head: Entity, val tail: EntityList) extends EntityList {
  def isEmpty = false
} 
```

我可以在列表的开头添加一个新元素，并通过执行以下操作创建一个新列表：

```
new Cons(myNewElement, myExistingList) 
```

但是如何在自定义列表的末尾添加一个新元素来创建一个新列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T23:09:56.483

**对于“库存”（标准库）`List`**

```
val l1 = List(1, 2, 3)
l1: List[Int] = List(1, 2, 3)

val l2 = l1 :+ 4
l2: List[Int] = List(1, 2, 3, 4)

val l3 = l2 ++ List(5, 6, 7, 8)
l3: List[Int] = List(1, 2, 3, 4, 5, 6, 7, 8) 
```

但是，您应该仔细考虑尝试将新元素添加到cons-cell 列表（例如（和您的“自定义”列表））末尾的后果，因为这非常低效*。*`List`通常，当你想要这个结果时，你会编写一个递归算法，以倒序生成你想要的列表（因为你做了有效的事情并将新生成的元素添加到累积列表的头部），然后当所有这些都完成后，反转后向列表以获得正确的序列。

**对于您的“自定义”列表**

对于一个没有 Scala 细节的基本 cons-cell 列表`List`，您只能从前面构建。在这种情况下，通过在前面添加新元素来构造列表（您唯一能做的），然后编写一个`reverse`算法以按照您需要的顺序获取列表。

**附录**

我想我并没有真正回答这个问题。如果您的目标/要求是将一个新元素附加到末尾，那么您需要做的是创建一个仅包含该元素的新列表，并一个一个（递归地）将现有列表的每个元素*从最后一个添加到第一个！*理想情况下，您会使用尾递归实现来做到这一点。如果您在开始之前不了解附加的低效率，那么您一旦完成就会了解。

# ruby-on-rails - Rails 试图加入 3 个表

> ID：15937874
> 
> 赞同：0
> 
> 时间：2013-04-10T22:48:35.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我的模型：

```
class Template < ActiveRecord::Base
  has_many :application_fields
  has_many :application_fields_values
end

class ApplicationField < ActiveRecord::Base
  belongs_to :template
  has_many :application_fields_values
end

class ApplicationFieldsValue < ActiveRecord::Base
  belongs_to :application_field
end 
```

这是我想要实现的查询：

```
SELECT `application_fields_values`.* , `application_fields`.*, `templates`.*
FROM `application_fields_values` 
  INNER JOIN `application_fields` ON `application_fields`.`id` = `application_fields_values`.`application_field_id`
  inner join `templates` on `templates`.`id` = `application_fields`.`template_id` 
```

这是我所拥有的：

```
@report = ApplicationFieldsValue.joins(:application_field, :template) 
```

但这给了我错误：

```
Association named 'template' was not found; perhaps you misspelled it? 
```

如何使用活动记录实现上述查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:07:43.623

我不确定您的目标查询的目标是什么，因为它正在从所有涉及的表中选择所有字段。你期望`@result`包含什么？

我认为这与您希望建立关系的方式一致。

```
class Template < ActiveRecord::Base
  has_many :application_fields
  has_many :application_fields_values, :through => :application_fields
end

class ApplicationField < ActiveRecord::Base
  belongs_to :template
  has_many :application_fields_values
end

class ApplicationFieldsValue < ActiveRecord::Base
  belongs_to :application_field
  has_one :template, :through => :application_field
end 
```

# c++ - 如何在 Visual C++ 2010 Express 中更改编译器

> ID：15937883
> 
> 赞同：0
> 
> 时间：2013-04-10T22:49:15.113
> 
> 标签：c++, windows, visual-studio-2010, compiler-construction, mingw

我有 Visual C++ 2010 Express，我想构建一个 64 位应用程序。

在 OS X 上，我们使用 gcc。

如果我安装 MinGW，如何更改 Visual C++ 2010 Express 中的默认编译器以使用 MinGW 或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:53:34.067

您不能轻易地使用与 Visual C++ Express 不同的 C++ 编译器。但您可以只使用 Visual C++ 为 Windows 构建 64 位应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:04:52.503

如果您希望在 MinGW 中使用某些东西，您可以尝试使用 Notepad++ 编辑代码并使用 MinGW 进行编译。

Visual Studio 几乎受限于其专有的编译器和链接器。如果您担心保持代码可移植性，请遵循 ANSI/ISO C++ 标准。即使这样，您也很可能必须在每个平台上重新编译。

您还可以查看 Code::Blocks IDE [http://www.codeblocks.org/](http://www.codeblocks.org/)它可以使用 MinGW 进行配置。

# api - 刷新令牌 google api php 库

> ID：15937885
> 
> 赞同：0
> 
> 时间：2013-04-10T22:49:43.367
> 
> 标签：api, cookies, refresh, token

在我的网络应用程序中，我使用 google api php 客户端来访问 google 任务。我已经按照[这里](https://stackoverflow.com/questions/9703700/google-api-authentication-for-server)的一些教程进行操作。

```
$client = new Google_Client();
$tasksService = new Google_TasksService($client);

$client->setAccessType('offline');

$cookie = $_COOKIE["token1"];

if(!empty($cookie)){
    $client->refreshToken($cookie);
}
else{
    $client->setAccessToken($client->authenticate($_GET['code']));
    $_SESSION['access_token'] = $client->getAccessToken();
    $sessionToken = json_decode($_SESSION['access_token']);
    setcookie("token1", $sessionToken->refresh_token, time() + (20 * 365 * 24 * 60 * 60));
} 
```

当用户单击登录 URL 时，他将被带到权限屏幕。如果用户单击“允许访问”，他将作为经过身份验证的用户被重定向到网页，然后我将 refresh_token 存储在 cookie 中。如果 refresh_token 存储在 cookie 中，用户将被重定向而无需再次“允许访问”。我的代码中的问题发生在用户注销时，他们可以作为已注销的用户访问该站点。如何解决问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T18:50:11.863

不要将令牌存储在用户的 cookie 中（出于各种原因，包括您的直接问题，这是一个坏主意）。您已经将其存储在会话中。也可以从 $_SESSION 中检索它。然后确保会话在用户注销时过期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T17:39:54.777

一种对用户更友好的方法是将授权码存储在与用户 ID 关联的数据库中。然后，当他登录时，无需用户再次授权即可获取它（除非它已过期 - 如果您在尝试使用它时遇到错误，则只需再次授权）。这些是我用来存储授权代码和用户 ID 的函数。这些 _store 和 _get 函数的变体可用于存储与用户关联的任何数据。

```
function _store_auth_code($auth_code) {
   $entry = array('auth_code'=> $auth_code,
                  'uid'      => $GLOBALS['user']->uid,
   );
   flashum_entry_delete('flashum_auth_code', $entry);
   flashum_entry_insert('flashum_auth_code', $entry);
}

function _get_auth_code() {
   $entry = array('uid' => $GLOBALS['user']->uid,
   );
   $return = flashum_entry_load('flashum_auth_code', $entry);
   if ($return) {
      return $return[0]->auth_code;
   } else
      return null;
}

function flashum_entry_load($db, $entry = array()) {
  // Read all fields from the flashum table.
  $select = db_select($db, 'flashum');
  $select->fields('flashum');

  // Add each field and value as a condition to this query.
  foreach ($entry as $field => $value) {
    $select->condition($field, $value);
  }
  // Return the result in object format.
  return $select->execute()->fetchAll();
}

function flashum_entry_delete($db, $entry) {
  db_delete($db)
    ->condition('uid', $entry['uid'])
    ->execute();
}

function flashum_entry_insert($db, $entry) {
  $return_value = NULL;
  try {
    $return_value = db_insert($db)
                    ->fields($entry)
                    ->execute();
  }
  catch (Exception $e) {
    drupal_set_message(t('db_insert failed. Message = %message, query= %query',
      array('%message' => $e->getMessage(), '%query' => $e->query_string)), 'error');
  }
  return $return_value;
} 
```

# html - div中的嵌套设计

> ID：15937886
> 
> 赞同：0
> 
> 时间：2013-04-10T22:49:54.210
> 
> 标签：html, css, web

请原谅我的网络编程能力非常有限，这使得即使在谷歌上搜索这些主题也很困难，因为我不知道正确的术语..

无论如何，我的问题（我肯定会用奇怪的措辞，因为我真的不知道如何谈论这个问题）是：

有没有办法用 html + css 实现这个伪代码？

css 文件：

```
#ropeimage {
    background-repeat:repeat-x;
    background:url(images/rope.png);
}

#ropetext {
    <div id="ropeimage">
   /* some text properties */
} 
```

然后在html文件中

```
<div id="ropetext">hello</div>
<div id="ropetext">there</div> 
```

我问的原因是，即使我知道我可以做类似的事情

```
<div id="ropetext"><div id="ropeimage">hello</div></div>
<div id="ropetext"><div id="ropeimage">there</div></div> 
```

如果我知道我总是需要这个，为什么不把它藏在 css 文件中。

如果有人好奇，我想做的是构建一个 div 来重复 x 一个“绳子”图像，然后垂直打印一些文本。我通常不能将所有这些都放在一个 div 中，因为绳索的背景图像会在文本下重复，所以我需要两个 div 以便图像在碰到文本 div 时立即停止重复。

[一张粗略的图片解释了我想要做什么](http://i.stack.imgur.com/Q48NA.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:53:36.947

相信与其用不如用`id`你想用`class`。

所以你的 CSS 看起来像这样：

```
.ropetext {
    /* properties */
} 
```

然后在您的 HTML 中：

```
<div class="ropetext"></div> 
```

类和 ID 之间的区别在于您只想将 ID 用于一个 HTML 标记。一个类可以应用于许多标签。

此外，您可以在 CSS 中进行嵌套样式定义：

```
.rope {
    /* properties defining any rope div in general */
    position: relative;
}

.rope .top {
    /* properties defining the top of the div */
    /* background image stuff goes here */
}

.rope .bottom {
    /* properties defining the bottom of the div */
    position: absolute;
    bottom: 0px;
} 
```

在您的 HTML 中：

```
<div class="rope">
    <div class="top">
    </div>
    <div class="bottom">
        Hello
    </div>
</div> 
```

我尚未对此进行测试，但我相信这符合您的要求。

# ruby-on-rails - Dropbox 与无论何时 gem

> ID：15937892
> 
> 赞同：2
> 
> 时间：2013-04-10T22:50:13.687
> 
> 标签：ruby-on-rails, backup, dropbox, dropbox-api, whenever

我正在尝试使用保管箱。我在 Dropbox 网站上创建了 Core Api App。每当我遇到此错误时运行后：

> 无法获取访问令牌。服务器返回 401：未经授权。访问以下 URL 以使用 Backup 授权您的 Dropbox 应用： [https ://www.dropbox.com/1/oauth/authorize?oauth_token=0CV3BXK6enDIQe7H](https://www.dropbox.com/1/oauth/authorize?oauth_token=0CV3BXK6enDIQe7H)

运行此网址后，我得到了

> My_App 应用程序想与您的 Dropbox 连接。

点击允许按钮后：

> 成功！您的 Dropbox 帐户现已与 My_App 关联

在这一切之后，我收到了这个错误，在 Dropbox 网站上的 App Console 中，我无法将 My_App 转为生产模式：

> 请测试这个应用程序！没有用户链接到这个应用程序。请在申请生产状态之前测试此应用与您的 my_email 帐户的 API 集成。

使用 Dropbox 与何时 gem 备份我的数据库有多正确？

# iphone - iPhone Facebook 的“喜欢”按钮

> ID：15937895
> 
> 赞同：-1
> 
> 时间：2013-04-10T22:50:31.147
> 
> 标签：iphone, facebook, facebook-like

在 iPhone 软件中，我想确定用户是否喜欢 facebook 页面，然后某些功能将激活。我发现了这个： [https](https://developers.facebook.com/docs/reference/plugins/like/) ://developers.facebook.com/docs/reference/plugins/like/ 但它制作了 iFrame，我把它放在我的 webView 中，但如果用户喜欢它，这个功能必须在他或她的每台设备上都处于活动状态得到。

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:35:56.343

不幸的是，如果您将其置于正常状态`UIWebView`，它将无法按预期工作。当`UIWebView`请求 URL 时，不包括来自其他应用程序和 Mobile Safari 的用户 cookie。这意味着 Facebook 无法验证用户是否*喜欢*社交图中的对象。

我建议你看看 Facebook 的 iOS SDK。[https://developers.facebook.com/ios/](https://developers.facebook.com/ios/) 他们将提供一些检查用户*喜欢*的方法。它将处理用户身份验证，并且相对容易上手。

希望这可以帮助！

# jquery - 使用 .css() 设置高度样式的问题

> ID：15937896
> 
> 赞同：2
> 
> 时间：2013-04-10T22:50:56.257
> 
> 标签：jquery, css, plugins

我正在做一个关于基本 jQuery 插件的教程。我花了很长时间试图弄清楚为什么我的代码没有改变我的`<p></p>`.

该练习说要创建一个插件，该插件将设置传入元素的高度，而无需使用`.height()`.

虽然下面的迷你插件不会改变高度，但如果我简单地将`height`属性翻转`.css()`到类似它的东西`margin`就可以完美地工作。

我错过了什么？

```
<body>
    <p>Hello</p>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        (function($, window, document, undefined) {
            $.fn.setHeight = function(hgt) {
                return this.each(function() {
                    $(this).css('height', hgt);
                });
            };
        })(jQuery, window, document);
    </script>
    <script>
        $("p").setHeight(200)
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:06:43.213

我会在这里做两件事：

首先，我会确保将标记的`display`属性显式设置为or ，以防万一这在其他地方被修改。`p``display:inline-block``display:block`

其次，这是更重要的部分，将`hgt`传递给插件的高度值更改为附加单位（、、等）`px`的`pt`字符串。`em`

祝你好运，如果您有任何其他问题/问题，请告诉我！:)

**更新**

让我们从简化插件开始。试试这个，让我知道结果是什么：

```
(function($, window, document, undefined) {
    $.fn.setHeight = function(hgt) {
        $(this).css('height', hgt);
    };
})(jQuery, window, document); 
```

这是一个更新的[小提琴](http://jsfiddle.net/bASWb/1/)。

# json - 将 JSON 绑定到剑道网格 JavaScript

> ID：15937903
> 
> 赞同：0
> 
> 时间：2013-04-10T22:51:50.437
> 
> 标签：json, binding, grid, kendo-ui

帮我修复这个两天前运行完美的代码。我不知道我改变了什么，但现在，网格只是空的，你能帮我吗？请。

```
$("#grid").kendoGrid({
       sortable: true,
       groupable: true,
       scrollable: true,
       height: "300px",
       pageable: {
         pageSizes: 9
                 },
       dataSource: {
         transport: {
             read: {
                url: "http://localhost/pharmacypoints/api/Productos/getSinFiltro",
                    dataType: "Json"
                              }
             }
                },
    Columns:  [
              { field: "Codigo",
                tittle: "Codigo"
              }, 
      { field: "Descripcion", 
        tittle: "Descripcion" 
      }, 
      { field: "Familia", 
        tittle: "Familia"
      }, 
      { field: "Laboratorio",
        title: "Laboratorio"
      }, 
      { field: "Clasificacion",
        tittle: "Clasificacion"
      }]

                        }); 
```

数据库结果是这样的：

```
[{"Codigo":"6140","Producto":"CIPROXINA FA 200ML 400MG","Familia":"ANTIBIOTICO 10","Clasificacion":"CONTROLADOS","Laboratorio":"BAYER DE MEXICO, SA DE CV"}, and more objects 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:06:03.570

两个小问题：

1.  `Columns`必须是小写。
2.  它是`title`和不是`tittle`。

尝试这个：

```
$("#grid").kendoGrid({
    sortable  : true,
    groupable : true,
    scrollable: true,
    height    : "300px",
    pageable  : {
        pageSizes: 9
    },
    dataSource: {
        transport: {
            read: {
                url     : "http://localhost/pharmacypoints/api/Productos/getSinFiltro",
                dataType: "Json"
            }
        }
    },
    columns   : [
        { field: "Codigo", title: "Codigo" },
        { field: "Descripcion", title: "Descripcion" },
        { field: "Familia", title: "Familia" },
        { field: "Laboratorio", title: "Laboratorio" },
        { field: "Clasificacion", title: "Clasificacion" }
    ]
}); 
```

# java - 如何“监控”WebView 中的 URL 库

> ID：15937907
> 
> 赞同：1
> 
> 时间：2013-04-10T22:52:08.113
> 
> 标签：java, android, url, android-webview, webviewclient

所以我希望能够监控我的 WebView 应用程序正在加载的 URL。我试图完成的主要事情是将 WebView 保留在特定网站内，或者至少能够检测用户何时离开网站的 URL。

例子。如果我有 www.google.com 的基本 URL，当用户点击图片时，他会得到“ [http://www.google.com/imghp](http://www.google.com/imghp) ”但是它仍然有 www.google.com 的基本 URL，所以如果有一种方法可以监控基本 URL 何时不再是 www.google.com，例如当用户单击搜索结果然后完全被带到不同的网站时。

这样做的目的是我想向用户显示一个对话框或 Toast，让他们知道他们将离开创建此 WebView 应用程序的网站。

任何代码、想法或建议将不胜感激。

示例代码

```
 @Override
 public void onLoadResource(WebView view, String url)
    {
        if (url.equals("http://www.google.com"))
        {
            //do your own thing here
            view.loadUrl(url);
        }
        else
        {
            AlertDialog.Builder localBuilder2 = new AlertDialog.Builder(Webview_Main.this);
            localBuilder2.setTitle("Hey Wait!");
            localBuilder2.setMessage("You currently are about to leave the website\n\nIf you want to stay inside this website, Please click the Go Back button below");
            localBuilder2.setIcon(R.drawable.ic_launcher);
            localBuilder2.setPositiveButton("Go Back",
                    new DialogInterface.OnClickListener() {
                public void onClick(
                        DialogInterface paramDialogInterface,
                        int paramInt) {
                    web.goBack();
                }
            });
            localBuilder2.setNegativeButton("Continue",
                    new DialogInterface.OnClickListener() {
                public void onClick(
                        DialogInterface paramDialogInterface,
                        int paramInt) {

                }
            });

            localBuilder2.show();
        };
            super.onLoadResource(view, url);
        } 
```

然而，上面的代码不起作用，只是不断弹出警告对话框，因为 URL 可能不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:11:19.110

我已经用以下代码解决了我的问题。

```
 @Override
 public boolean shouldOverrideUrlLoading(WebView view, String url) {
           if (url.startsWith("http://www.google.com"))
            { view.loadUrl(url);
            progressBar.setVisibility(View.VISIBLE);
            }
          else
            { Toast.makeText(getBaseContext(),
            "Your about to leave Google.com",
            Toast.LENGTH_LONG).show();
    }
 } 
```

谢谢@MH。对于建议

# ios - APP后台管理员应该使用哪种数据存储方式

> ID：15937909
> 
> 赞同：0
> 
> 时间：2013-04-10T22:52:20.190
> 
> 标签：ios, sqlite, core-data

我正在制作一个应用程序，它根据人们拍摄的位置在地图上添加注释。一旦应用程序开发完成并部署在客户的 iPad 上，我希望他们能够在访问新地方时添加位置。我还希望他们能够添加他们拍摄的照片，也许还有一些关于这个地方的评论。

问题是，我怎样才能允许用户上传新内容和新位置（坐标），以便在地图上显示新注释，以及该地点的新照片和位置的新详细信息。我已经拥有带有现有注释的应用程序，并且一旦按下的 detailDisclosureButton 就会加载包含详细信息的视图。我只需要一种方法让客户能够添加新的位置和信息并将其上传到应用程序。

iCloud 会以某种方式服务于这个目的吗？或者我应该使用 Core Data 并让客户端简单地将新照片和信息添加到服务器，然后连接到我的应用程序并通过 Core Data 更新它？简单地使用 MSMutableArrays 怎么样......这些可以连接到服务器进行更新吗？或者也许是 SqlLite？

关于从哪里开始的任何想法？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:15:40.037

我们在我们的应用程序中做类似的事情。我们在应用程序上有一个 sqlite 数据库，但我们将其备份到我们自己的服务器并定期同步两者。iCloud 应该能够做到这一点，但我们的应用程序也可以与 Android 设备或网络应用程序同步，因此我们使用自己的服务器。

将它放在应用程序的 sqlite 数据库中确实有助于提高性能。将其从设备上备份确实有助于用户体验，以防他们更换设备、重置设备等。

所以我们让我们的用户添加信息，如果他们在线，我们会将这些信息推送到我们的服务器上。然后，我们会定期检查我们的服务器，看看是否有任何数据更新可以推送给他们，因为我们让他们在多个设备上拥有相同的帐户。

# iphone - 如何将 UISearchBar 添加到同一 UIViewController 中的两个 TableView

> ID：15937911
> 
> 赞同：0
> 
> 时间：2013-04-10T22:52:30.673
> 
> 标签：iphone, ios, uitableview, uiviewcontroller, uisearchbar

1.  我正在使用 JASidePanel - [https://github.com/gotosleep/JASidePanels](https://github.com/gotosleep/JASidePanels)来创建菜单效果。
2.  我正在使用xib。
3.  我的类扩展了 UIViewController。
4.  我不知道如何向另一个 tableView 显示`searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText:`
5.  您会看到第一个 tableView 是一个 Panel，过滤后的一个是带有名称的 Thumb。
6.  以下代码在需要添加第二个 tableview 时停止。

**SidePanelViewController.h**

```
@interface SidePanelViewController : UIViewController <UISearchBarDelegate, UISearchDisplayDelegate, UITableViewDataSource, UITableViewDelegate, MFMailComposeViewControllerDelegate, MFMessageComposeViewControllerDelegate>
{
    IBOutlet UIImageView *_photoProfile;
    IBOutlet UILabel *_nameLabel;
    NSArray *_menuArray;
}

@property (nonatomic, readonly) IBOutlet UISearchBar *searchBar;
@property (nonatomic, strong) IBOutlet UITableView *tableView;
@property(nonatomic, strong) NSMutableArray *tableViewData;
@property(nonatomic, strong) NSMutableArray *originalTableViewData;
@property(nonatomic, strong) NSMutableArray *searchArray;
@property(nonatomic, strong) NSMutableDictionary *units; 
```

**SidePanelViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view from its nib.
    _menuArray = [[NSArray alloc]initWithObjects:@"Home",@"Meu QR Sem Hora", @"Favoritas", @"Minha Pontuação", @"Minha Conta",@"Convidar Amigos", @"Ajuda", @"Fale Conosco",@"Privacidade e Termos", nil];

    _tableViewData = [[NSMutableArray alloc] initWithArray:_menuArray];
    // Don't show the scope bar or cancel button until editing begins
    [_searchBar setShowsScopeBar:NO];
    [_searchBar sizeToFit];

    //
    // Create a header view. Wrap it in a container to allow us to position
    // it better.
    //
    UIView *containerView =
    [[UIView alloc]
     initWithFrame:CGRectMake(0, 0, 320, 30)];
    UILabel *headerLabel =
    [[UILabel alloc]
     initWithFrame:CGRectMake(0, 0, 320, 30)];
    headerLabel.text = NSLocalizedString(@"Perfil", @"");
    headerLabel.textColor = [UIColor blackColor];
    headerLabel.shadowColor = [UIColor whiteColor];
    headerLabel.shadowOffset = CGSizeMake(0, 1);
    headerLabel.font = [UIFont boldSystemFontOfSize:22];
    headerLabel.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5];
    [containerView addSubview:headerLabel];
    self.tableView.tableHeaderView = containerView;

    //SetName and Picture
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    _nameLabel.text = [defaults valueForKey:@"name"];
    _photoProfile.image = [UIImage imageWithData:[defaults objectForKey:@"Photo"]];

}

- (void)viewWillAppear:(BOOL)animated
{
    [_tableView reloadData];
}

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    [self filterContentForSearchText:searchText];
}

- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    [self.sidePanelController setCenterPanelHidden:YES animated:YES duration:0.2f];
}

- (void)searchBarCancelButtonClicked:(UISearchBar *) searchBar
{
     [self.sidePanelController setCenterPanelHidden:NO animated:YES duration:0.2f];
        searchBar.text = @"";
    _tableViewData = [_originalTableViewData mutableCopy];
    [_tableView reloadData];
    [searchBar resignFirstResponder];

}

- (void) searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller
{
    [self.sidePanelController setCenterPanelHidden:NO animated:YES duration:0.2f];
}

#pragma mark - ScrollView (UITableView) delegate methods
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    [_searchBar resignFirstResponder];
    [self performSelector:@selector(enableCancelButton:) withObject:self.searchBar afterDelay:0.0];
}

// Used to re-enabled the cancel button when a user starts scrolling
- (void)enableCancelButton:(UISearchBar *)aSearchBar {
    for (id subview in [aSearchBar subviews]) {
        if ([subview isKindOfClass:[UIButton class]]) {
            [subview setEnabled:TRUE];
        }
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)filterContentForSearchText:(NSString *)searchText {
    if (searchText && searchText.length) {
        [_tableViewData removeAllObjects];

        for (NSDictionary *dictionary in _originalTableViewData)
        {
            for (NSString *thisKey in [dictionary allKeys]) {
                if ([thisKey isEqualToString:@"SearchKey1"] ||
                    [thisKey isEqualToString:@"SearchKey2"] ) {

                    if ([[dictionary valueForKey:thisKey] rangeOfString:searchText
                                                                options:NSCaseInsensitiveSearch].location != NSNotFound) {
                        [_tableViewData addObject:dictionary];
                    } // for (NSString *thisKey in allKeys)

                } // if ([thisKey isEqualToString:@"SearchKey1"] || ...
            } // for (NSString *thisKey in [dictionary allKeys])
        } // for (NSDictionary *dictionary in originalTableViewData)

        [_tableView reloadData];

    } // if (query && query.length)
}

#pragma mark - UITableViewDelegate
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return _menuArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIndentifier = @"CustomMenu";

    CustomMenuCell *cell = (CustomMenuCell *) [_tableView dequeueReusableCellWithIdentifier:cellIndentifier];

    if(!cell){

        cell = (CustomMenuCell *) [[[NSBundle mainBundle] loadNibNamed:@"CustomMenuView" owner:nil options:nil] objectAtIndex:0];
    }

    NSString *tempString = [_menuArray objectAtIndex:indexPath.row];
    [cell configureMenu:tempString];

    cell.selectionStyle = UITableViewCellSelectionStyleGray;

    return cell;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/ZPBRa.png)![在此处输入图像描述](https://i.stack.imgur.com/g7laK.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T23:03:02.877

不知道你是否解决了这个问题，但你是什么意思显示到另一个表视图？如果您的意思是它显示与您发布的第二张图片相似，那么我会继续说如果您使用“搜索栏和搜索显示”，搜索栏应该已经有一个？

`self.searchDisplayController.searchResultsTableView`

如果您确实使用了该搜索栏和显示，您可以拥有 NSPredicate 并制作一个过滤器可变数组，该数组复制并从您的 originalTableViewData 进行谓词。希望这可以帮助您或其他任何仍然感兴趣的人。

# c# - 如何使用 CodeDOM 表示空合并运算符？

> ID：15937912
> 
> 赞同：5
> 
> 时间：2013-04-10T22:52:32.657
> 
> 标签：c#, codedom, null-coalescing-operator

假设，我有以下简化类型：

```
public class Model
{
    public decimal? Result { get; set; }
} 
```

如何使用 CodeDOM 表示空合并运算符以生成 C# 代码，这可能吗？现在我正在使用以下解决方法：

```
new CodePropertyReferenceExpression(
    new CodePropertyReferenceExpression(modelArgument, "Result"),
        "Value")) 
```

等于`model.Result.Value`，但不等于`model.Result ?? 0M`

### 更好的解决方法

`CodeExpression`等于`model.Result.GetValueOrDefault(0M)`适用于可空值类型

```
new CodeMethodInvokeExpression(
                        new CodeMethodReferenceExpression(
                            new CodePropertyReferenceExpression(modelArgument, "Result"),
                            "GetValueOrDefault"),
                            new [] { new CodePrimitiveExpression(0m) })), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:24:12.610

正如评论部分中提到的那样，`??`运算符只是语法糖。如果您检查`IL`代码，您将看到条件`HasValue`，然后调用`GetValueOrDefault`方法。该方法接受一个参数，如果 Nullable 对象没有值，则返回该参数，否则返回`Value`属性。

尝试使用下一个代码，即简单地调用 `GetValueOrDefault`方法 via `CodeMethodInvokeExpression`，这在语义上等效于调用 null 合并运算符。我将`4`其用作默认值，但在您的情况下，省略该参数即可，因为您需要`0m`作为小数的默认值。

```
new CodeMethodInvokeExpression(
                        new CodeMethodReferenceExpression(
                            new CodePropertyReferenceExpression(modelArgument, "Result"),
                            "GetValueOrDefault"),
                            new [] { new CodePrimitiveExpression(0m) })); 
```

注意：经过检查`GetValueOrDefault`我发现，它使用`HasValue`属性。所以没有必要调用它两次（所以编译器会在`??`没有优化的情况下调用它两次。如果启用了优化，它只会调用`GetValueOrDefault`）。方法内容如下：

```
public T GetValueOrDefault(T defaultValue)
{
  if (!this.HasValue)
    return defaultValue;
  else
    return this.value;
} 
```

# javascript - 如何只水平翻转图像而不是canvs？

> ID：15937918
> 
> 赞同：0
> 
> 时间：2013-04-10T22:52:55.220
> 
> 标签：javascript, html, image, canvas

是否可以水平翻转包含在画​​布中但不包含在画布中的图片。

我有几幅图像的画布。

我只想从画布内的所有图像中翻转一个图像。

[演示 jsFiddle](http://jsfiddle.net/2LTNT/)

我有这个代码：

```
var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');
      var x = 10;
      var y = 10;
      var width = 200;
      var height = 137;
      var imageObj = new Image();

      imageObj.onload = function() {
        context.translate(width, 0);
        context.scale(-1, 1);
        context.drawImage(imageObj, x, y, width, height);
       };
      imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg'; 
```

这些行：

```
context.translate(width, 0);
        context.scale(-1, 1); 
```

将图像和画布翻转在一起。

我想做这样的事情：

```
imageObj.translate(width, 0);
imageObj.scale(-1, 1); 
```

怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:19:36.180

这将在您绘制图像然后恢复它时旋转上下文。

```
var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');
      var x = 10;
      var y = 10;
      var width = 200;
      var height = 137;
      var imageObj = new Image();

      imageObj.onload = function() {
        context.save();
        context.translate(width, 0);
        context.scale(-1, 1);
        context.drawImage(imageObj, x, y, width, height);
        context.restore();
       };
      imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg'; 
```

# javascript - javascript在顶部添加变量

> ID：15937919
> 
> 赞同：0
> 
> 时间：2013-04-10T22:53:02.500
> 
> 标签：javascript

好的，这应该是一个简单的

```
 var width1 = size3 + 275 ; // adding more
            var width2 = 225 - size1; // subtracting width 
```

width2 很好，例如如果 size1 = 4 width2 = 221。但是，如果 size3 为 4，则 width1 出来 4275。它不断将其添加到前面或后面。我不知道为什么。（我已经翻转了 size3 + 275，来回 {275+size3} 甚至将 '275' 放在引号中。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:54:31.137

大小值被视为字符串，因为它在引号中，使用[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)将其转换为整数：

```
var width1 = parseInt(size3, 10) + 275 ; // adding more
var width2 = 225 - parseInt(size1, 10); // subtracting width 
```

如果 size 是一个字符串，则`+`运算符用于连接而不是相加。

# regex - 使用正则表达式获取括号之间的子字符串

> ID：15937920
> 
> 赞同：-1
> 
> 时间：2013-04-10T22:53:08.473
> 
> 标签：regex, linux, shell

我有一堆线如下：

```
PING planetlab2.tau.ac.il (192.114.4.3) 56(84) bytes of data. 
```

我想从这些行中获取 ip 地址，它们位于第一行`(`和`)`对之间

如何使用 linux 正则表达式获取它？像 sed, grep, blabla 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:10:20.837

如果您不需要不匹配的行并且您只需要匹配行中的 IP 地址，请尝试以下操作：

```
perl -ne 'print $1 if /\(((?:\d{1,3}\.){3}\d{1,3})\)/'<<EOT
PING planetlab2.tau.ac.il (192.114.4.3) 56(84) bytes of data.
EOT 
```

输出：

```
192.114.4.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:23:38.920

```
echo "PING planetlab2.tau.ac.il (192.114.4.3) 56(84) bytes of data." | sed -r 's/^[^(]+\(([^)]+)\).*/\1/'
192.114.4.3 
```

# jpa - JPA 继承类型已加入 - 合并时丢失 DTYPE

> ID：15937933
> 
> 赞同：0
> 
> 时间：2013-04-10T22:53:51.537
> 
> 标签：jpa, merge, persist

我创建了一个使用JOINED继承类型的超类和子类。

在坚持上，一切正常......我的超类表中的 DTYPE 列设置为类名“TravelTask​​”。但是，当我尝试进行合并时，DTYPE 似乎被刷新为空。

在进行合并之前，我曾尝试使用 entityManager.find() 读回持久化的实体，希望这会拉回 DTYPE 值，但是即使我可以在数据库中看到它，它也被返回为 null。 ..

所以在随后的合并中，DTYPE 丢失了，然后我开始获取主键约束（我假设这是相关的）。

我曾尝试从超类和子类调用persist和merge，但同样的事情发生了......

任何建议表示赞赏。

一世

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:26:27.680

你在映射 DTYPE 列吗？通常你不会映射它，JPA 只会根据对象的类插入它。它永远不应该被更新。

也许包括您的代码和 JPA 提供程序/版本。

# facebook - 添加页面选项卡对话框，在 Facebook 代码上引发 ReferenceError -“未定义 ua”

> ID：15937936
> 
> 赞同：2
> 
> 时间：2013-04-10T22:54:17.077
> 
> 标签：facebook, exception, facebook-javascript-sdk

我正在使用`FB.ui`Javascript API 的方法启动添加页面选项卡对话框：

```
FB.ui({method: 'pagetab'},function(response){
    // code that records the page(s) selected removed 
}); 
```

如果我没有在浏览器中打开控制台，则会弹出对话框，但进度图标会无限旋转。如果我确实打开了控制台，我会看到一个`ReferenceError`异常被抛出，并显示消息“ua 未定义”。`ua`似乎是一个对象的实例，应该是 Facebook 的 pagetab 代码的一部分。封闭的函数也标有`_DEPRECATED`，这有点令人担忧。

直到昨天，这段代码都运行良好，但我在 Facebook 开发者博客中没有看到任何关于可能影响“添加页面选项卡”对话框的更改。

错误：（点击查看更大、更易读的版本）

[![参考错误：](https://i.stack.imgur.com/y8zfF.png)](https://i.imgur.com/FdAaLjc.png)

面向用户的行为：

![空的添加页面选项卡对话框](https://i.stack.imgur.com/9wxZF.png)

更新：这现在是一个[已知的 Facebook 错误](https://developers.facebook.com/bugs/197557357034879?browse=search_51673a317b5092124734169)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:51:16.890

这是 Facebook API 中的一个错误。他们今天推出了一个修复程序，将“添加页面选项卡”对话框返回到运行状态。

# workflow - 自动提交和开发上传解决方案？

> ID：15937941
> 
> 赞同：0
> 
> 时间：2013-04-10T22:54:51.627
> 
> 标签：workflow

我已经回到前端开发，已经有几年了。我一直在使用 GitHub GUI 对我的仓库进行提交，然后使用 Transmit 手动将文件上传到我的盒子。这需要太长时间了！

每次我保存文件并自动推送到我的开发框时，我都希望使“软”（有更好的术语吗？）提交。当我完成一个功能时，我将使用适当的符号进行提交。

我正在使用 osx 在 Sublime Text 2 中编写 html/css/js/php

提前感谢您的时间和帮助！

# python - 在没有numpy的矩阵中打印一列

> ID：15937945
> 
> 赞同：2
> 
> 时间：2013-04-10T22:54:59.840
> 
> 标签：python, arrays, matrix

我对编程真的很陌生，所以如果这是一个非常简单的问题，我深表歉意，但我一直在尝试在不使用 numpy 的情况下打印矩阵中的第一列，但是它打印如下：

```
matrix = \
[[0, 1],
 [3, 7],
 [9, 4],
 [10, 3]]

print matrix[0:3][0]
[0, 1] 
```

我也试过：

```
print matrix[:][0]
[0, 1]

print matrix[:3]
[[0, 1], [3, 7], [9, 4]]

print matrix[:3][0]
[[0, 1], [3, 7], [9, 4]] 
```

我试图达到的答案是：

```
print matrix[code]
0, 3, 9, 10 
```

或类似的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T22:57:38.610

您拥有的是列表列表-因此那里没有列的概念。有两种方法可以做到这一点，一种是（如[Pavel Anossov 的回答](https://stackoverflow.com/a/15937962/722121)所示）是使用列表理解。

一种是使用[`zip()`](http://docs.python.org/3.3/library/functions.html#zip)可用于转置可迭代的：

```
>>> list(zip(*matrix))
[(0, 3, 9, 10), (1, 7, 4, 3)] 
```

我在这里列出了一个列表，以便更容易地显示输出。注意在 2.x 中，`zip()`给出了一个列表而不是一个迭代器（虽然惰性版本是可用的[`itertools.izip()`](http://docs.python.org/2.7/library/itertools.html#itertools.izip)）。

一般来说，`zip()`如果您计划使用多个列，我会使用列表理解，如果您只需要一个列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T22:56:42.193

没有 numpy 的切片是不可能的。您可以使用列表推导：

```
print [row[0] for row in matrix] 
```

# javascript - 谷歌脚本“替换”功能与范围

> ID：15937947
> 
> 赞同：1
> 
> 时间：2013-04-10T22:55:07.440
> 
> 标签：javascript, arrays, multidimensional-array, google-apps-script

我正在尝试在 Google 电子表格中编写一个“罗马数字到十进制数字”函数。到目前为止，我已经设法使用以下代码使其工作：

```
function rom2num(inputRange) {
inputRange = inputRange.replace(/\bi\b/gi,1); //convert 'I' to '1'
  return inputRange;
} 
```

当输入仅为一个单元格时，这非常有效。但是，每当我尝试输入一个范围 (A1:B2) 时，我都会收到错误消息：“无法在对象中找到函数替换”。

我想要实现的一些示例：

```
Column A      | Column with function
i, ii, iii    | 1, 2, 3
Godfather II  | Godfather 2
iv, v, vi     | 4, 5, 6
Star Wars V   | Star Wars 5 
```

正如 Crayon 建议的那样，我可以选择在下面的单元格中重复该函数，但是，需要重新格式化的范围可能是 50 行，或者可能是 100 行，如果它们不被使用。我希望它尽可能自动化。:-)

我知道可以检索一系列单元格的信息，并仅使用以下代码在另一个单元格范围内返回该信息：

```
function copyRange(inputRange) {
return inputRange;
} 
```

所以输入一个范围并输出相同的范围不是问题。问题是试图合并替换功能。我已经设法使用“toString()”函数更改了整个范围内的信息。然后我能够使用'split（“，”）'将输出分成几列，但我不希望它跨列传播，只是跨行。

因此，如果我能以某种方式将范围/数组转换为字符串，然后再转换回范围/数组...

是否可以在不使代码过于臃肿的情况下实现这一目标？（我是一个新手脚本编写者，更喜欢我的脚本简短，就像我上面的例子一样。）

如果我不清楚，我很抱歉。我习惯在这样的论坛上查找答案，但我自己不问问题！

谢谢！

**编辑：终于意识到事情变得有点太复杂了，所以我只是接受了蜡笔的建议并使用了“拖动”方法。为我省了很多麻烦。谢谢您的帮助！！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:52:56.510

根据[https://developers.google.com/apps-script/execution_custom_functions](https://developers.google.com/apps-script/execution_custom_functions) ，您的函数只能更改调用该函数的单元格中的数据，因此无论如何您都不应该尝试更改多个单元格。您应该让该函数对该单元格进行替换，然后将该函数应用于多个单元格。

例如

```
A  B
i  =rom2num(A1)
i
i
i 
```

这将使 B1 等于“1”。现在将鼠标悬停在 B1 上，右下角是点，向下拖动到 B4，您将看到该功能应用于 B2-4 行。

**编辑：**

根据您的评论和问题中的其他信息，我想我知道您要做什么。基本上，您想利用将值溢出到单元格来有效地作用于多个单元格。所以是的，这可以通过返回一个双数组来实现。您的新示例显示了[将罗马数字转换为实际数字](http://blog.stevenlevithan.com/archives/javascript-roman-numeral-converter)..它比简单地做 a 有点复杂，`.replace`但是一旦您弄清楚如何让价值观继续努力！所以这里是如何做到这一点：

```
function rom2num(inputRange) {
  var cells = [];
  for (var i=0;i<inputRange.length;i++) {
    cells[i] = [String(inputRange[i]).replace(/i/gi,1)];
  }
  return cells;
} 
```

此处的此示例遍历范围中的每一行，并简单地将“i”替换为“1”。然后它返回值的双精度数组，例如，如果您有

```
A              B
i, ii, iii     =rom2num(A1:A4)
Godfather II
iv, v, vi
Star Wars V 
```

该函数将返回并溢出单元格，如下所示：

```
A               B
i, ii, iii      1, 11, 111
Godfather II    Godfather 11
iv, v, vi       1v, v, v1
Star Wars V     Star Wars V 
```

就像我说的那样，您要做的不仅仅是`.replace`（转到我给您的链接）才能将罗马数字实际转换为数字，但就您的实际问题而言，应该这样做。

**编辑2：**

我实际上是继续将罗马数字转换功能融入其中，因为我想看到它。所以我想不妨和大家分享一下最终的脚本：

```
function rom2num(inputRange) {
  var cells = [];
  for (var i=0;i<inputRange.length;i++) {
    cells[i] = [
      String(inputRange[i]).replace(/\b([ivxcldm]+)\b/gi,function(p,p1) {
        return deromanize(p1); 
      })
    ];
  }
  return cells;
}

function deromanize (str) {
    var str = str.toUpperCase(),
        validator = /^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/,
        token = /[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,
        key = {M:1000,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},
        num = 0, m;
    if (!(str && validator.test(str)))
        return false;
    while (m = token.exec(str))
        num += key[m[0]];
    return num;
} 
```

和以前一样……A 列有你想要处理的东西，把你`=rom2num(A1:A4)`放在 B 列的第一个单元格中。这会将转换后的罗马数字放入 B 列的每个单元格中，与 A 列单元格对齐。但请记住，它实际上并没有更改单个 An > Bn 单元格..它实际上是在获取您指定的范围并将结果溢出到多个单元格中。它有效地做你想要的，但它并不完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-19T14:48:34.697

我使用了更简洁的方法：

```
const ss = SpreadsheetApp.getActiveSpreadsheet()
const sh = ss.getSheetByName('Sheet1')
sh
  .getRange('A:B')
  .createTextFinder('i')
  .replaceAllWith('1') 
```

# vb6 - 从 VB6 调用 FindMimeFromData

> ID：15937964
> 
> 赞同：0
> 
> 时间：2013-04-10T22:56:48.257
> 
> 标签：vb6, mime

```
Public Declare Function FindMimeFromData Lib "urlmon.dll" ( _
        ByVal pbc As Long, _
        ByVal pwzUrl As String, _
        pBuffer As Any, _
        cbSize As Long, _
        ByVal pwzMimeProposed As String, _
        dwMimeFlags As Long, _
        ppwzMimeOut As Long, _
        dwReserved As Long) As Long 
```

在 VB6 中，我似乎无法弄清楚如何传递`pBuffer`文件前 256 个字符的参数。当我尝试使用 a`Dim buffer() As Byte`并填充它并将其作为参数传递时，它会抛出错误参数的错误，即使定义为`Any`.

我尝试使用[此示例](http://www.pinvoke.net/default.aspx/urlmon.findmimefromdata)，但从文件系统传递整个文件名似乎不起作用。所以我必须尝试像 C# 示例一样使用文件的前 256 个字节发送它。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:15:40.203

我玩弄了以下 Declare，并围绕它构建了一些代码。有两个包装器，GetMimeTypeFromUrl() 和 GetMimeTypeFromData()。我发现前者仅在您使用诸如[http://host.com/file.xtn](http://host.com/file.xtn)之类的简单 URL 时才有效。您可能不得不玩弄其他标志。

但是，其他包装函数听起来像您需要的。

请注意，所有字符串指针都声明为 As Long，并且我使用 StrPtr() 将底层 UTF-16 VB 字符串作为指针传递。

另请注意，您必须使用 CoTaskMemFree() 来释放输出 ppwzMimeOut 字符串指针，否则会泄漏内存。

```
Option Explicit

Private Declare Function FindMimeFromData Lib "Urlmon.dll" ( _
    ByVal pBC As Long, _
    ByVal pwzUrl As Long, _
    ByVal pBuffer As Long, _
    ByVal cbSize As Long, _
    ByVal pwzMimeProposed As Long, _
    ByVal dwMimeFlags As Long, _
    ByRef ppwzMimeOut As Long, _
    ByVal dwReserved As Long _
) As Long

'
' Flags:
'

' Default
Private Const FMFD_DEFAULT As Long = &H0

' Treat the specified pwzUrl as a file name.
Private Const FMFD_URLASFILENAME  As Long = &H1

' Internet Explorer 6 for Windows XP SP2 and later. Use MIME-type detection even if FEATURE_MIME_SNIFFING is detected. Usually, this feature control key would disable MIME-type detection.
Private Const FMFD_ENABLEMIMESNIFFING  As Long = &H2

' Internet Explorer 6 for Windows XP SP2 and later. Perform MIME-type detection if "text/plain" is proposed, even if data sniffing is otherwise disabled. Plain text may be converted to text/html if HTML tags are detected.
Private Const FMFD_IGNOREMIMETEXTPLAIN  As Long = &H4

' Internet Explorer 8\. Use the authoritative MIME type specified in pwzMimeProposed. Unless FMFD_IGNOREMIMETEXTPLAIN is specified, no data sniffing is performed.
Private Const FMFD_SERVERMIME  As Long = &H8

' Internet Explorer 9\. Do not perform detection if "text/plain" is specified in pwzMimeProposed.
Private Const FMFD_RESPECTTEXTPLAIN  As Long = &H10

' Internet Explorer 9\. Returns image/png and image/jpeg instead of image/x-png and image/pjpeg.
Private Const FMFD_RETURNUPDATEDIMGMIMES  As Long = &H20

'
' Return values:
'
' The operation completed successfully.
Private Const S_OK          As Long = 0&

' The operation failed.
Private Const E_FAIL        As Long = &H80000008

' One or more arguments are invalid.
Private Const E_INVALIDARG  As Long = &H80000003

' There is insufficient memory to complete the operation.
Private Const E_OUTOFMEMORY As Long = &H80000002

'
' String routines
'

Private Declare Function lstrlen Lib "Kernel32.dll" Alias "lstrlenW" ( _
    ByVal lpString As Long _
) As Long

Private Declare Sub CopyMemory Lib "Kernel32.dll" Alias "RtlMoveMemory" (ByVal pDest As Long, ByVal pSrc As Long, ByVal nCount As Long)

Private Declare Sub CoTaskMemFree Lib "Ole32.dll" ( _
    ByVal pv As Long _
)

Private Function CopyPointerToString(ByVal in_pString As Long) As String

    Dim nLen            As Long

    ' Need to copy the data at the string pointer to a VB string buffer.
    ' Get the length of the string, allocate space, and copy to that buffer.

    nLen = lstrlen(in_pString)
    CopyPointerToString = Space$(nLen)
    CopyMemory StrPtr(CopyPointerToString), in_pString, nLen * 2

End Function

Private Function GetMimeTypeFromUrl(ByRef in_sUrl As String, ByRef in_sProposedMimeType As String) As String

    Dim pMimeTypeOut    As Long
    Dim nRet            As Long

    nRet = FindMimeFromData(0&, StrPtr(in_sUrl), 0&, 0&, StrPtr(in_sProposedMimeType), FMFD_DEFAULT, pMimeTypeOut, 0&)

    If nRet = S_OK Then
        GetMimeTypeFromUrl = CopyPointerToString(pMimeTypeOut)
        CoTaskMemFree pMimeTypeOut
    Else
        Err.Raise nRet
    End If

End Function

Private Function GetMimeTypeFromData(ByRef in_abytData() As Byte, ByRef in_sProposedMimeType As String) As String

    Dim nLBound          As Long
    Dim nUBound          As Long
    Dim pMimeTypeOut     As Long
    Dim nRet             As Long

    nLBound = LBound(in_abytData)
    nUBound = UBound(in_abytData)

    nRet = FindMimeFromData(0&, 0&, VarPtr(in_abytData(nLBound)), nUBound - nLBound + 1, StrPtr(in_sProposedMimeType), FMFD_DEFAULT, pMimeTypeOut, 0&)

    If nRet = S_OK Then
        GetMimeTypeFromData = CopyPointerToString(pMimeTypeOut)
        CoTaskMemFree pMimeTypeOut
    Else
        Err.Raise nRet
    End If

End Function

Private Sub Command1_Click()

    Dim sRet        As String
    Dim abytData()  As Byte

    sRet = GetMimeTypeFromUrl("http://msdn.microsoft.com/en-us/library/ms775107%28v=vs.85%29.aspx", vbNullString)

    Debug.Print sRet

    abytData() = StrConv("<HTML><HEAD><TITLE>Stuff</TITLE></HEAD><BODY>Test me</BODY></HTML>", vbFromUnicode)

    sRet = GetMimeTypeFromData(abytData(), vbNullString)

    Debug.Print sRet

End Sub 
```

# python - Python 线程间共享文件访问

> ID：15937965
> 
> 赞同：0
> 
> 时间：2013-04-10T22:56:50.667
> 
> 标签：python, multithreading, python-2.7

我有一个线程定期写入文件（writeThread），另一个线程（readThread）从文件中异步读取。readThread 可以使用不同的句柄访问文件而不弄乱任何东西吗？

如果没有，python是否有一个可以被 writeThread 使用但不阻塞 readThread 的共享锁？我不喜欢简单的非共享锁，因为文件访问需要一毫秒的顺序，并且 writeThread 写入周期是相同的顺序（周期取决于一些外部参数）。因此，可能会出现这样一种情况，即使 writeThread 可以释放锁，它也会立即重新获取它，从而导致饥饿。

我能想到的一个解决方案是维护文件的多个副本，一个用于读取，另一个用于写入，并一起避免整个情况。但是，所涉及的文件大小可能会变得很大，因此这种方法并不可取。

有没有其他选择或者这是一个糟糕的设计？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:27:59.013

是的，您可以多次打开该文件并获得对它的独立访问权限。每个文件对象都有自己的缓冲区和位置，因此例如对一个文件对象的搜索不会弄乱另一个文件对象。它的工作原理很像多程序访问，在读取/写入文件的同一区域时必须小心。例如，在写入对象刷新之前，读取器不会看到附加到文件末尾的写入。在读写器刷新之前，读者不会看到对现有数据的重写。写入不会是原子的，因此如果您正在写入记录，读者可能会看到部分记录。阅读器上的异步选择或轮询事件可能很时髦......不确定那个。

另一种方法是 mmap，但我没有使用它来了解问题。

# python - 在 python selenium 中，如何找到元素的可见性？

> ID：15937966
> 
> 赞同：54
> 
> 时间：2013-04-10T22:57:00.090
> 
> 标签：python, python-2.7, selenium-webdriver

我[`is_visible`在 Selenium 文档中找到了该方法](http://selenium.googlecode.com/svn/trunk/docs/api/py/selenium/selenium.selenium.html#selenium.selenium.selenium.is_visible)，但我不知道如何使用它。我不断收到诸如`is_visible needs a selenium instance as the first parameter`.

另外，什么是“定位器”？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-04-11T04:30:35.260

您应该`is_displayed()`改用：

```
from selenium import webdriver

driver = webdriver.Firefox()
driver.get('http://www.google.com')
element = driver.find_element_by_id('gbqfba') #this element is visible
if element.is_displayed():
  print "Element found"
else:
  print "Element not found"

hidden_element = driver.find_element_by_name('oq') #this one is not
if hidden_element.is_displayed():
  print "Element found"
else:
  print "Element not found" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-27T09:18:05.273

从这里：[https ://www.selenium.dev/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.expected_conditions.html](https://www.selenium.dev/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.expected_conditions.html)

只需使用

> selenium.webdriver.support.expected_conditions.visibility_of

因

> 可见性是指元素不仅显示出来，而且高度和宽度都大于0

# linux-kernel - 是否可以从内核模块唤醒用户进程

> ID：15937968
> 
> 赞同：1
> 
> 时间：2013-04-10T22:57:09.257
> 
> 标签：linux-kernel, kernel-module, kernel

我有一个当前正在休眠的用户级进程，通过使用`sleep()`函数。我正在尝试编写一个内核模块，它可以首先`task_struct`从其 PID 中提取用户进程的，然后可以唤醒该进程。到目前为止，我已经实现了从 PID 获取 task_struct 的代码。但是，我不知道任何可以唤醒该过程的功能。我试过`wake_up_process(task_struct)`了，虽然它返回1，即唤醒进程成功，但是`printf()`用户进程的sleep()语句之后的语句没有被执行。更改`state`task_struct 有帮助吗？还是有另一种方法可以做同样的事情？请进一步指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T02:14:01.153

这是可能的，但您可能会以错误的方式进行操作。sleep() 等待延迟，即使您可以从内核内部向进程发出信号（本质上就像用户模式下的 kill(2) 一样，带有一些无害的信号，但是会“将您踢出”系统调用） ,这样做的正确方法是在内核模块导出的设备上阻止睡眠进程。这样，内核模块将拥有控制权 - 进程将卡在 read(2) 调用中，直到你的 read 实现在模块返回时，进程会卡住。

这是更可取的，因为睡觉的整个想法是在你等待某事的时候。当您无限期地简单地 sleep(xxxx) 时，您基本上是在等待超时。更重要的是，使用设备方法，您还可以将文件描述符添加到 select(2)/poll(2) 循环中，这使得与其他输入/输出描述符的同步非常优雅。

# spring - groovy 和 spring 入门指南

> ID：15937970
> 
> 赞同：0
> 
> 时间：2013-04-10T22:57:16.880
> 
> 标签：spring, groovy

我正在寻找使用 spring 框架学习 gr1oovy 来访问数据库。我用谷歌搜索没有找到 spring 和 groovy 的入门代码。

spring 和 groovy 是否有类似的代码，如下面的 url。

[休眠+常规](http://groovy.codehaus.org/Using+Hibernate+with+Groovy)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:23:48.267

如果您正在开发 Web 应用程序，那么[Grails](http://www.grails.org/)框架是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-05T22:15:08.497

由于 Spring4 现在可以使用 groovy 作为项目语言，因此您实际上可以将任何 java 示例重写为 groovy。

查看这个 spring-boot 示例：

[https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples/spring-boot-sample-data-jpa](https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples/spring-boot-sample-data-jpa)

# django - 在 Django-tastypie 测试客户端的 DELETE 请求中发送发布数据

> ID：15937977
> 
> 赞同：3
> 
> 时间：2013-04-10T22:58:13.677
> 
> 标签：django, rest, django-testing, tastypie

我正在尝试使用tastepie ResourceTestCase 和api_client 测试REST 请求，但它与使用angular js 的行为不同，例如。

为 DELETE 请求发送的数据来自使用 api_client 的请求的 GET 参数，但是当我使用 Angular 时，它来自原始 POST 数据，如何将 Tastypie 的行为更改为我期望的行为？那是在原始帖子数据中发送数据吗？

当前代码：

```
 response = self.api_client.delete(url,
                                   format='json',
                                   authentication=self.credentials,
                                   data=data) 
```

# php - 整理数组的某个值

> ID：15937978
> 
> 赞同：0
> 
> 时间：2013-04-10T22:58:22.463
> 
> 标签：php, arrays, parsing

$details['wasprice'] 的值包含单词“was”（即是 $23.99）。我想删除单词“was”并将值保留为“$23.99”。

下面的代码：

```
foreach($html->find('div.product-details-contents') as $content) {
    $detail['img'] = $content->find('img.product-details-image',0)->src;
    $detail['title'] = $content->find('span.title', 0)->plaintext;
    $detail['units'] = $content->find('span.unit-size', 0)->plaintext;
    $detail['wasprice'] = $content->find('span.was-price', 0)->plaintext;
    $detail['nowprice'] = $content->find('span.special-price', 0)->plaintext;

$product[] = $detail;

}

print_r($product); 
```

我只是想知道如何去做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T00:34:12.920

使用[PHP 清理过滤器](http://www.php.net/manual/en/filter.filters.sanitize.php)删除所有非数字，然后放回美元（$）符号。

```
 $newprice = "$".filter_var($wasprice, FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION | FILTER_FLAG_ALLOW_THOUSAND); 
```

在您的示例代码中使用它：

```
<?php 
foreach($html->find('div.product-details-contents') as $content) {
  $detail['img'] = $content->find('img.product-details-image',0)->src;
  $detail['title'] = $content->find('span.title', 0)->plaintext;
  $detail['units'] = $content->find('span.unit-size', 0)->plaintext;
  $detail['wasprice'] = "$".filter_var($content->find('span.was-price', 0)->plaintext, FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION | FILTER_FLAG_ALLOW_THOUSAND);
  $detail['nowprice'] = $content->find('span.special-price', 0)->plaintext;
  $product[] = $detail;
}
print_r($product);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:00:46.867

使用`str_replace()`：

```
$detail['wasprice'] = str_replace('was ', '', $detail['wasprice']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T23:01:38.260

```
if (substr($detail['wasprice'], 0, 4) === 'was ') {
  $detail['wasprice'] = substr($detail['wasprice'], 4);
} else {
  // ruh-roh
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T23:05:06.517

我会在`$`使用之前替换任何东西[`preg_replace()`](http://www.php.net/manual/en/function.preg-replace.php)：

```
$detail['wasprice'] = preg_replace('/([^$]*)(.*)/', '$2', $detail['wasprice']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T23:05:31.740

第三种解决方案：

```
$detail['wasprice'] = ltrim($detail['wasprice'], " asw"); 
```

# jquery - jquery在单独的行中获取上一个列类

> ID：15937979
> 
> 赞同：2
> 
> 时间：2013-04-10T22:58:23.620
> 
> 标签：jquery, html-table, row

我有一个类似的表（我在这里创建了一个更简单的示例）：

```
<table>
  <tr>
    <td colspan="4" class="topic">Topic Name</td>
  </tr>
  <tr>
    <td><a href="#">link</a></td>
    <td><a href="#">link</a></td>
    <td><a href="#">link</a></td>
    <td><a href="#">link</a></td>
  </tr>
  <tr>
    <td><a href="#">link</a></td>
    <td><a href="#">link</a></td>
    <td><a href="#">hello world</a></td>
    <td><a href="#">link</a></td>
  </tr>
</table> 
```

这是一个三行四列的示例表。我使用什么 jQuery 代码来获取第一个 td 中的 text() 类“主题”从 td 调用，文本为“hello world”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:00:23.623

您可以使用`closest`DOM 向上遍历

```
$("td").on("click", function(){
    $(this).closest("table").find("td.topic").first().text()
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:04:52.767

```
$('table td').on('eventName', function(){
    var topic = $(this).closest('tr')
                       .prevAll('tr:has(td.topic)')
                       .first()
                       .text();
}); 
```

[http://jsfiddle.net/7Y5fN/](http://jsfiddle.net/7Y5fN/)

# android - SQLiteException 当联系人有照片时，无法将 BLOB 转换为字符串。安卓

> ID：15937983
> 
> 赞同：3
> 
> 时间：2013-04-10T22:58:35.707
> 
> 标签：android, sqlite, contacts

在我的代码中，我更新了联系信息，包括姓名、地址、电子邮件和照片。当联系人没有照片时一切OK。但是在为联系人分配照片后，我得到 android.database.sqlite.SQLiteException: unknown error: Unable to convert BLOB to string on each update operation。

我将照片添加到联系人的代码

```
Bitmap bit =getBitmap();
                    ByteArrayOutputStream streamy = new ByteArrayOutputStream(); 
                    bit.compress(CompressFormat.PNG, 0, streamy); 
                    byte[] photo = streamy.toByteArray();

                    ContentValues values = new ContentValues(); 

                    values.put(ContactsContract.Data.RAW_CONTACT_ID, rawContactId); 
                    values.put(ContactsContract.Data.IS_SUPER_PRIMARY, 1); 
                    values.put(ContactsContract.CommonDataKinds.Photo.PHOTO, photo); 
                    values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE); 

                    try {
                        if (getPhotoUri(rawContactId) != null) {
                            ContactHelper.context.getContentResolver().update(ContactsContract.Data.CONTENT_URI, values,
                                    String.format("%s = ?", ContactsContract.Data.RAW_CONTACT_ID), new String[] {String.format("%d", rawContactId)});
                        } else {
                            ContactHelper.context.getContentResolver().insert(ContactsContract.Data.CONTENT_URI, values);
                        }
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    } 
```

我的代码更改联系人姓名

```
 ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
        ops.add( ContentProviderOperation.newUpdate( Data.CONTENT_URI )
                .withSelection( Data.RAW_CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + "='" + ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE + "'",
                        new String[] { String.valueOf( rawContactId ) } )
                        .withValue( ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, contact.getName() )                       
                        .build() );

        try {
            ContentResolver cr = context.getContentResolver();
            cr.applyBatch(ContactsContract.AUTHORITY, ops);
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:24:47.663

ThinkAndroid 上有一个不错的小博客文章，它将向您展示如何做到这一点： [http ://thinkandroid.wordpress.com/2009/12/30/handling-contact-photos-all-api-levels/](http://thinkandroid.wordpress.com/2009/12/30/handling-contact-photos-all-api-levels/)

核心部分是这样的：

```
public static void setContactPhoto(ContentResolver c, byte[] bytes, long personId) {
    ContentValues values = new ContentValues();
    int photoRow = -1;
    String where = ContactsContract.Data.RAW_CONTACT_ID + " = " + personId + " AND " + ContactsContract.Data.MIMETYPE + "=='" + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'";
    Cursor cursor = c.query(ContactsContract.Data.CONTENT_URI, null, where, null, null);
    int idIdx = cursor.getColumnIndexOrThrow(ContactsContract.Data._ID);
    if (cursor.moveToFirst()) {
        photoRow = cursor.getInt(idIdx);
    }
    cursor.close();

    values.put(ContactsContract.Data.RAW_CONTACT_ID, personId);
    values.put(ContactsContract.Data.IS_SUPER_PRIMARY, 1);
    values.put(ContactsContract.CommonDataKinds.Photo.PHOTO, bytes);
    values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE);

    if (photoRow >= 0) {
        c.update(ContactsContract.Data.CONTENT_URI, values, ContactsContract.Data._ID + " = " + photoRow, null);
    } else {
        c.insert(ContactsContract.Data.CONTENT_URI, values);
    }
} 
```

基本上，你不能做的是：

```
ContentValues values = new ContentValues();
values.put(ContactsContract.Data.RAW_CONTACT_ID, personId);
values.put(ContactsContract.Data.IS_SUPER_PRIMARY, 1);
values.put(ContactsContract.CommonDataKinds.Photo.PHOTO, bytes.toByteArray());
values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE );
context.getContentResolver().update(ContactsContract.Data.CONTENT_URI, values, ContactsContract.Data.RAW_CONTACT_ID + " = " + personId, null); 
```

那是因为有很多行 RAW_CONTACT_ID = personId（有照片、电话号码、电子邮件等的数据行），所以尝试这个应该会给你一些 SQLite 异常，类似于“CANNOT CONVERT BLOB TO STRING” ” 这很有意义，因为在这种情况下，您可能正在尝试使用这些字节更新电话号码行，因此它会引发适当的错误。因此，在第一个示例中，您需要首先确定 RAW_CONTACT_ID = personId 的哪些行包含照片的 BLOB 值，然后在第二个查询中，您希望在该行中专门设置它。现在请注意，有时 photoRow 可能会返回为 -1。这基本上告诉我们之前没有人尝试设置照片或任何其他信息，因此我们只需要执行 getContentResolver.insert()。现在，究竟为什么这两种情况下的行为不同，我不知道。但是上面的代码可以工作，所以一旦谷歌发布了一些更好的文档，也许我们会发现！

# ruby-on-rails - ruby on rails - 如何在路由、控制器、视图中建立关系？has_many，belongs_to

> ID：15937989
> 
> 赞同：5
> 
> 时间：2013-04-10T22:59:06.117
> 
> 标签：ruby-on-rails, associations, relationship, has-many, belongs-to

我正在努力让我在 Rails 中的关系正常工作。

我有一个用户、画廊、评论模型

```
class Gallery  
  has_many :comments
  belongs_to :user
end

class User  
  has_many :comments
  has_many :galleries
end

class Comment
  belongs_to :gallery
  belongs_to :user
end 
```

现在我应该在路由、控制器和视图中做什么来链接这一切？请帮我 ？找出答案相当令人困惑。如果可以的话，我不希望它像在 railscast 中那样嵌套，但我想要每个模型，例如我可以输入用户的画廊，例如我可以找到并输入画廊 ID 和用户 ID 的评论。

我现在完全被遗忘了，不知道该怎么办。请提供一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T23:38:39.133

这是一个复杂的主题，不能简单地告诉你如何去做，但我会尽力提供一些帮助。Zippie 的建议很好，你应该通过教程来了解不同类型的关系。

在您的数据库中，您将需要：

```
create_table :gallery do |t|
  t.user_id
end

create_table :comments do |t|
  t.gallery_id
  t.user_id
end 
```

这些是 Rails 用来匹配模型的外部索引（外部索引进入指定belongs_to 关系的模型中）。

至于您的路线，没有单一的解决方案，但您可能想要嵌套它们，以便您可以执行 /users/comments 或 /galleries/comments 之类的操作：

```
resource :users do
   resource :comments
end

resource :galleries do
   resource :comments
end 
```

您也可以简单地将它们分开：

```
resources :users, :galleries, :comments 
```

在您的控制器中，当创建一个新对象时，您应该从它所属的对象中执行此操作：

```
@comment = current_user.comments.build(params[:comment]) 
```

例如，这会将评论的 user_id 设置为当前用户。

在视图中，并没有太大区别，只需像这样在控制器中获取@comments 变量：

```
@comments = @gallery.comments 
```

并在您的视图中使用它。

当您想要定义表单助手来创建新评论时，它可能不太直观，例如：

```
<%= form_for([@gallery, @comment]) do |f| %>
  ...
<% end %> 
```

我希望这可以帮助您入门。

# php - 使用 html5 / javascript 和 php 上传/更改头像照片？

> ID：15937997
> 
> 赞同：1
> 
> 时间：2013-04-10T22:59:27.630
> 
> 标签：php, javascript

我正在查看此链接，该链接允许用户将图像拖到头像/个人资料照片上，他们可以将图像放在上面，这将更改/上传不同的图像。

链接：[http ://css-tricks.com/html5-drag-and-drop-avatar-changer-with-resizing-and-cropping/](http://css-tricks.com/html5-drag-and-drop-avatar-changer-with-resizing-and-cropping/)

我现在想知道的是如何使用 php 上传照片，有人能告诉我如何做到这一点吗？谢谢

html:

```
<title>Drag Avatar</title>

<link rel='stylesheet' href='style.css'> 
```

```
<div class="page-wrap">

    <h1>Drag & Drop Image to Change Avatar</h1>

    <div class="profile">

        <div class="profile-avatar-wrap">
            <img src="images/256.jpg" id="profile-avatar" alt="Image for Profile">
        </div>

        <h2>Betty Miller</h2>
        <div class="location">Palo Alto, CA</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur voluptatem accusantium voluptas doloremque porro temporibus aut rerum possimus cum minus.</p>

    </div>

    <h3>You could do this with a file input too...</h3>
    <input type="file" id="uploader">

</div>

<!-- In real life, these scripts are combined -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="resample.js"></script>
<script src="avatar.js"></script> 
```

重采样.js：

```
var Resample = (function (canvas) {

 // (C) WebReflection Mit Style License

 function Resample(img, width, height, onresample) {
  var

   load = typeof img == "string",
   i = load || img;

  // if string, a new Image is needed
  if (load) {
   i = new Image;
   i.onload = onload;
   i.onerror = onerror;
  }

  i._onresample = onresample;
  i._width = width;
  i._height = height;
  load ? (i.src = img) : onload.call(img);
 }

 function onerror() {
  throw ("not found: " + this.src);
 }

 function onload() {
  var
   img = this,
   width = img._width,
   height = img._height,
   onresample = img._onresample
  ;
  // if width and height are both specified
  // the resample uses these pixels
  // if width is specified but not the height
  // the resample respects proportions
  // accordingly with orginal size
  // same is if there is a height, but no width
  var minValue = Math.min(img.height, img.width);
  width == null && (width = round(img.width * height / img.height));
  height == null && (height = round(img.height * width / img.width));

  delete img._onresample;
  delete img._width;
  delete img._height;

  // when we reassign a canvas size
  // this clears automatically
  // the size should be exactly the same
  // of the final image
  // so that toDataURL ctx method
  // will return the whole canvas as png
  // without empty spaces or lines
  canvas.width = width;
  canvas.height = height;
  // drawImage has different overloads
  // in this case we need the following one ...
  context.drawImage(
   // original image
   img,
   // starting x point
   0,
   // starting y point
   0,
   // image width
   minValue,
   // image height
   minValue,
   // destination x point
   0,
   // destination y point
   0,
   // destination width
   width,
   // destination height
   height
  );
  // retrieve the canvas content as
  // base4 encoded PNG image
  // and pass the result to the callback
  onresample(canvas.toDataURL("image/png"));
 }

 var context = canvas.getContext("2d"),
  // local scope shortcut
  round = Math.round
 ;

 return Resample;

}(
 this.document.createElement("canvas"))
); 
```

头像.js：

```
// Required for drag and drop file access
jQuery.event.props.push('dataTransfer');

// IIFE to prevent globals
(function() {

  var s;
  var Avatar = {

    settings: {
      bod: $("body"),
      img: $("#profile-avatar"),
      fileInput: $("#uploader")
    },

    init: function() {
      s = Avatar.settings;
      Avatar.bindUIActions();
    },

    bindUIActions: function() {

      var timer;

      s.bod.on("dragover", function(event) {
        clearTimeout(timer);
        if (event.currentTarget == s.bod[0]) {
          Avatar.showDroppableArea();
        }

        // Required for drop to work
        return false;
      });

      s.bod.on('dragleave', function(event) {
        if (event.currentTarget == s.bod[0]) {
          // Flicker protection
          timer = setTimeout(function() {
            Avatar.hideDroppableArea();
          }, 200);
        }
      });

      s.bod.on('drop', function(event) {
        // Or else the browser will open the file
        event.preventDefault();

        Avatar.handleDrop(event.dataTransfer.files);
      });

      s.fileInput.on('change', function(event) {
        Avatar.handleDrop(event.target.files);
      });
    },

    showDroppableArea: function() {
      s.bod.addClass("droppable");
    },

    hideDroppableArea: function() {
      s.bod.removeClass("droppable");
    },

    handleDrop: function(files) {

      Avatar.hideDroppableArea();

      // Multiple files can be dropped. Lets only deal with the "first" one.
      var file = files[0];

      if (typeof file !== 'undefined' && file.type.match('image.*')) {

        Avatar.resizeImage(file, 256, function(data) {
          Avatar.placeImage(data);
        });

      } else {

        alert("That file wasn't an image.");

      }

    },

    resizeImage: function(file, size, callback) {

      var fileTracker = new FileReader;
      fileTracker.onload = function() {
        Resample(
         this.result,
         size,
         size,
         callback
       );
      }
      fileTracker.readAsDataURL(file);

      fileTracker.onabort = function() {
        alert("The upload was aborted.");
      }
      fileTracker.onerror = function() {
        alert("An error occured while reading the file.");
      }

    },

    placeImage: function(data) {
      s.img.attr("src", data);
    }

  }

  Avatar.init();

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-23T17:41:05.170

[http://php.about.com/od/advancedphp/ss/php_file_upload.htm#step-heading](http://php.about.com/od/advancedphp/ss/php_file_upload.htm#step-heading)

创建一个这样的表单：

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
Please choose a file: <input name="uploaded" type="file" /><br />
<input type="submit" value="Upload" />
</form> 
```

而 php 将是这样的：

```
$target = "upload/";
$target = $target . basename( $_FILES['uploaded']['name']) ;
$ok=1;
if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)){
echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded";
}
else{
echo "Sorry, there was a problem uploading your file.";
} 
```

有关更多选项（限制文件大小、扩展名等），请查看链接

# python - 函数作为函数的参数

> ID：15937998
> 
> 赞同：3
> 
> 时间：2013-04-10T22:59:34.187
> 
> 标签：python, function, arguments

我在一本 Python 书中看到了这个例子，它展示了如何使用一个函数作为另一个函数的参数：

```
def diff2(f, x, h=1E-6):
    r = (f(x-h) - 2*f(x) + f(x+h))/float(h*h)
    return r

def g(t):
    return t**(-6)

t = 1.2
d2g = diff2(g, t)
print d2g 
```

我的问题是，如果不向函数 g 提供参数，这个脚本是如何工作的？有问题的行是：

```
d2g = diff2(g,t) 
```

不应该这样做：

```
d2g = diff2(g(t), t) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T23:01:19.210

`g`作为参数传递给`diff2`. 在`diff2`，那个参数被调用`f`，所以里面`diff2`的名字`f`指的是函数`g`。当`diff2`调用`f(x-h)`（以及其他调用）时，它正在调用`g`，并提供参数。

换句话说，当你这样做时`diff2(g, t)`，你是在告诉`diff2`那`g`是要调用的函数。的参数`g`提供在`diff2`：

```
f(x-h) # calls g with x-h as the argument
f(x)   # calls g with x as the argument
f(x+h) # calls g with x+h as the argument 
```

如果您调用`diff2(g(t), t)`，您将传递的*结果*作为`g(1.2)`参数。 `g`将在调用之前调用`diff2`，`diff2`然后在尝试调用时会失败`f`，因为`f`它将是一个数字（值`g(1.2)`）而不是一个函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T23:16:22.073

所讨论的功能相当随机，可能难以理解。让我们考虑一个简单的例子，一个函数`sum`，它接受两个数字`a`和`b`，并返回它们的和。实际上，我们可以很容易地定义另一个函数`prod`，它也返回他们的产品。

```
def sum(a,b):
    return a + b

def prod(a,b):
    return a * b 
```

假设我们有另一个 function `compute`，它将操作（一个函数）和两个操作数（调用函数的两个数字）作为其参数。在`compute`中，我们在参数上调用给定的操作。

```
def compute(fn, a, b):
    return fn(a, b) 
```

我们可以`compute`做不同的事情。我们可以`compute`对`sum`两个数：

```
compute(sum, 1, 3) 
```

我们可以`compute`将两个数相乘：

```
compute(prod, 1, 3) 
```

基本上，函数名后面没有括号，我们实际上并没有调用函数，它只是命名空间中的另一个*对象*（恰好是我们可以调用的函数）。我们不会在 内部调用该函数`compute`，当我们这样做时`fn(a,b)`。

让我们看看控制台输出的样子：

```
>>> compute(sum,1,3)
4
>>> compute(prod,1,3)
3
>>> sum
<function sum at mem-address>
>>> prod
<function prod at mem-address>
>>> sum(1,2)
3 
```

# ruby-on-rails - 奇怪的错误 - 参数未在黄瓜中的路由中传递给 ruby on rails 应用程序

> ID：15937999
> 
> 赞同：0
> 
> 时间：2013-04-10T22:59:36.443
> 
> 标签：ruby-on-rails, cucumber

当我在 Rails 应用程序上测试我的 ruby​​ 时，我遇到了最奇怪的黄瓜错误。我的功能在本地主机上完美运行。我在几个场景中有几个步骤来检查我是否在某个页面上，特别是 users#show 的模板。因此，我编写了步骤 def 并在 paths.rb 中添加了路径，并设法使此类步骤的第一步通过。然而，尽管使用了完全相同的路径，但其他步骤都失败了，我通过加薪验证了这一事实。

以下是步骤：

来自场景 3：通过

```
Then I should be on the "jadams" profile page 
```

来自场景 2：失败

```
And I am on the "testuser" profile page 
```

来自场景 3：失败

```
And I go to the "testuser" profile page 
```

这是他们使用的步骤定义：

```
Then /^(?:|I )should be on (.+)$/ do |page_name|
  visit path_to(page_name)
end

When /^(?:|I )go to (.+)$/ do |page_name|
  visit path_to(page_name)
end 
```

我定义的路径：

```
when /^the "([^\"]*)" profile page$/i
  user_path(User.find_by_username($1)) 
```

我验证了他们都到达了这条路径，并且找到了一个用户并且有一个 id。我什至尝试`/users/1`直接使用。然而我明白了：

```
No route matches {:action=>"show", :controller=>"users", :id=>nil} 
```

谁能看到为什么其中一个步骤通过而其他步骤没有通过？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:32:21.467

事实证明，有人为失败的步骤之前的步骤写了一个错误的步骤定义。