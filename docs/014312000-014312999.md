# StackOverflow 问答 14312000-14312999

# windows-runtime - 在 WinRT 中同步对 UI 线程执行操作

> ID：14312842
> 
> 赞同：0
> 
> 时间：2013-01-14T03:04:55.727
> 
> 标签：windows-runtime

我正在开发一些 corss 平台库，需要在 UI 线程上执行一个操作。虽然我知道有一个方法 Dispatcher.RunAsync 可以在 UI 线程上执行操作，但它是异步的，我不能使用 await/async 功能，因为代码是跨平台的，我不希望库绑定到.net 4.5 的等待/异步功能。

有什么方法可以在 UI 线程上同步执行操作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:26:41.997

跨平台库不应依赖于特定的 UI（例如，`Dispatcher`或`CoreDispatcher`）。有一种表示抽象“上下文”的类型`SynchronizationContext`：不久前我写了一篇关于这个主题的[MSDN 文章。](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)

如果您的库可以在需要使用 UI 上下文之前捕获它，那么您可以捕获`SynchronizationContext.Current`并稍后用于`Send`在原始上下文上同步执行一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:32:18.467

如果您从 UI 线程执行它 - 没有办法做到这一点。例如，您可以在后台线程中使用 AutoResetEvent，在调用 RunAsync 并从 RunAsync 回调设置它之后等待该事件。

# javascript - 解析json错误

> ID：14312843
> 
> 赞同：1
> 
> 时间：2013-01-14T03:04:41.313
> 
> 标签：javascript, json, parsing

我正在尝试使用 javascript eval() 函数解析以下 JSON。

```
`[{"pk": 1, "model": "relayapp.team", "fields": {"company": 1, "signup": true, "name": "Cool"}}]` 

    function setupTable(data)
    {
        var info = eval("(" + data + ")");
        var string = "";
        for(item in info.fields) 
        {
            record = info.fields[item];
            string = string + "<tr><td>" + record.name + "</td><td> </td><td> " + record.signup + "</td><td></td><td> </td></tr>";

        }
        document.getElementById("team_table_body").innerHTML = string;
    }` 
```

它在控制台调试器中出现此错误。

```
`Uncaught SyntaxError: Unexpected identifier           teamList.html:54
                       setupTable                      teamList.html:54
                       (anonymous function)            teamList.html:48
                       l                               jquery.min.js:2
                       c.fireWith                      jquery.min.js:2
                       T                               jquery.min.js:2
                       r                               jquery.min.js:2` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:10:56.367

这似乎有效。

## [jsFiddle](http://jsfiddle.net/HcTfm/)

**JS**

```
function setupTable(data)
{
    var info = eval("(" + data + ")");
    var string = "";
    for(var i = 0; i < info.length; i++){
        record = info[i];
        string = string + "<tr><td>" + record.fields.name + "</td><td> </td><td> " + record.fields.signup + "</td><td></td><td> </td></tr>";

    }
    document.getElementById("team_table_body").innerHTML = string;
}

setupTable('[{"pk": 1, "model": "relayapp.team", "fields": {"company": 1, "signup": true, "name": "Cool"}}]'); 
```

**HTML**

```
<table id='team_table_body'></table> 
```

# php - PHP 字符串计算

> ID：14312845
> 
> 赞同：0
> 
> 时间：2013-01-14T03:05:18.647
> 
> 标签：php

我正在做一个 php 活动，它将计算给定整数的总和。样本输出：

```
 int number = 367;
 Final output 
 16 
```

16 是 3+6+7 的总和。

这是我的代码：

```
$number = "367";
$int = 0;

for ($i = 0 ; $i < number.length(); $i++ ){
    $char = number.charAt(i);
    $int += Integer.parseInt(char1.toString());
}
echo $int; 
```

我仍然无法得到正确的答案，任何人都可以帮助我吗？谢谢 ！

问候杰伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:12:08.200

我不确定您在做什么，但似乎您正在混合 PHP 和 Javascript。如果您正在寻找一个 PHP 解决方案，它比这容易得多。试试这个：

```
$number = 367;
echo array_sum(str_split($number)); 
```

# jquery - jQuery 调用 CSS3 版本的 stop(true,false) 和事件动画？

> ID：14312849
> 
> 赞同：1
> 
> 时间：2013-01-14T03:05:30.003
> 
> 标签：jquery, css, jquery-animate

谁能告诉我如何使用 CSS3 来做到[这一点](https://stackoverflow.com/a/12906254/1382306)？

[http://jsfiddle.net/dYYZP/65/](http://jsfiddle.net/dYYZP/65/)

几个月来，我一直试图弄清楚如何通过事件调用 CSS3 转换并停止像 jQuery 这样的转换`stop(true, false)`。

```
<div id="outer"></div>
<div id="inner"></div> 
```

```
var under = true;
$("#outer").bind({
    click : function() {
        if(under){
            $("#inner").stop(true, false).animate( {
                left: 50
            }, 500);
        }
        else{
            $("#inner").stop(true, false).animate( {
                left: -50
            }, 500);    
        }
        under = !under;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:20:43.670

[http://jsfiddle.net/dYYZP/81](http://jsfiddle.net/dYYZP/81)（请注意，我只是`-webkit`为了方便而包括在内）。

CSS 2D 变换`translate`可用于沿 X/Y 轴移动元素。这与 CSS3 过渡的组合，允许类似的动画。

如果您想纯粹使用 CSS 来完成此操作，那么您必须将红色框设置`<label>`为复选框元素，然后使用`:checked + .slideout`包含翻译规则的选择器。

动画期间无法停止 CSS 过渡；仅在动画完成后（通过删除规则）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:19:44.633

这是[你](http://jsfiddle.net/dYYZP/77/)想做的吗？

我刚刚将以下代码添加到您`#inner`的 css 中：

```
transition:left .5s;
-moz-transition:left .5s;
-webkit-transition:left .5s; 
```

希望能帮助到你。

# jquery - jQuery-ui 安装

> ID：14312853
> 
> 赞同：5
> 
> 时间：2013-01-14T03:05:40.940
> 
> 标签：jquery, jquery-ui

我想使用来自[http://lab.smashup.it/flip/的 jQuery 插件之一](http://lab.smashup.it/flip/)

我意识到它需要安装 jQuery-UI。[所以，我从http://jqueryui.com/download/](http://jqueryui.com/download/)下载了 jQuery-UI 版本 1.9.2

当我打开压缩文件时，里面有 3 个文件夹。我不知道如何将 jQuery-UI 链接到我的 html 页面。我记得当我将 jQuery 连接到我的 html 页面时，我把

```
<script src="jquery-1.8.3.js">
      </script> 
```

在我的 html 页面中。在 jQuery-UI 的情况下，我不知道将哪一个放在 html 页面中，因为 jQuery-UI 带有 3 个文件夹。我希望有人能帮助我。
提前谢谢你们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T03:21:23.940

为什么不`Google CDN..`直接在您的页面上使用托管的文件。

首先是 jQuery

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

然后是依赖它的插件.. jQuery UI 在这种情况下

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

**更新**

在您看到的 3 个文件夹中..

![在此处输入图像描述](../Images/d72a648c0aaa96c5f971122bf6a891df.png)

转到JS文件，你会发现3个文件..

您可以使用此文件夹中的`.js`或`js.min`参考。

CSS 可以从 CSS 文件夹中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-23T22:45:56.843

您需要做的主要事情如下

1\. 您的 jquery-ui 版本所需的 jquery 版本的 javascript 文件。

> 对于 jquery-ui-1.10.3，这可以在下载的根目录中找到。jquery-1.9.1.js。

2\. 您打算包含的 jquery 库的 javascript 文件。

> 还应该有一个“ui”文件夹，里面有一堆 javascript 文件。如果打开，它们中的大多数都有一个约束列表，需要其他 js 文件才能运行它们。这是在您决定不需要所有 jquery ui 功能的情况下。但是，他们确实有一个包含所有其他文件功能的 javascript 文件。对我来说，这个文件被命名为 jquery-ui.custom.js。
> 
> 如果您希望它在浏览器上运行得更快并且不需要阅读它，那么这个目录还应该包含一个“min”或“minified”文件夹。“缩小”文件夹包含所有相同的 js 文件，但采用缩小形式。缩小的形式被缩短为浏览器可以破译的最小可能的部分，它节省了浏览器加载时间。

3\. 您需要一个 css 参考，以用于您选择使用的 jqueryui 库。

> Jquery 允许您下载带有一些预先创建的主题的 jquery ui。如果你这样做，你的 css 最好位于 css/[themename] 文件夹中。
> 
> 在下载 jquery-ui1.10.3 时，这对我来说位于 css/smoothness/jquery-ui.1.10.3.custom.css
> 
> 与 javascript 一样，您也可以选择缩小版本。在 css 目录中也是一个图像目录。安装时请确保 css 中的图像引用指向此图像文件夹。如果你把它们放在同一个目录中，你应该没问题。

最后，您的 html 页面的头部需要如下内容：

```
<script type="text/javascript" src="/js/jquery/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/js/jquery/jquery-ui-1.7.min.js"></script>
<link rel="stylesheet" type="text/css" href="/css/smoothness/jquery-ui-1.7.css" media="all" /> 
```

如果仔细观察：

1\. 第一个是我的 jquery 代码参考。

2\. 第二个是我的 jquery-ui 代码参考。此处的文件包括所有 jquery 功能。

3\. 第三个是对我决定使用的主题的 css 引用。

请注意，没有必要使用 jquery-ui 提供的 css 主题，因为您可以编写自己的主题。在这种情况下，您将提供对您自己的 css 文件的引用。在大多数地方，我还没有看到这样做。

最后请注意，当下载带有主题的 jquery ui 时，它们会让您选择 css 范围。如果将其留空，则 css 将应用于所有匹配的元素。如果您决定给它一个 css 范围，那么它将仅适用于该特定范围内的元素。

我的工作是在我的办公室更新 jquery，所以如果有人注意到与此不同的任何内容，请告诉我。

# php - 是否可以保持 MYSQL 会话打开？

> ID：14312854
> 
> 赞同：0
> 
> 时间：2013-01-14T03:05:47.293
> 
> 标签：php, mysql, sql

是否可以在 PHP 程序迭代之间保持 SQL 连接/会话“打开”，因此程序不必继续重新登录？

我编写了一个 PHP 程序，它不断（并且合法/尊重地）轮询网络以获取统计天气数据，然后将其转储到本地 MYSQL 数据库中进行分析。我不想通过本地数据库浏览器查看数据，而是希望将其作为由外部 Web 主机托管的在线网页提供。

不确定解决这个问题的最佳方法，我将本地 MYSQL 数据库导出到我的 Web 主机的服务器上，认为因为 PHP 程序需要不断循环（并且比默认运行时更长，HTML 也不断刷新其页面） ，最好将“引擎”保留在本地计算机上，这样我可以让页面在浏览器中不断循环，然后让它连接到我的 Web 服务器上的数据库并将数据转储到那里。

它工作了几个小时。但是，正如我担心的那样，我无法访问我的 cPanel 登录名/主机。此后，我通过自己的测试确认我的 IP 已被阻止（托管公司目前已关闭），这无疑是由于 PHP 程序每 10 分钟重新连接到在线 SQL 数据库一次。我不认为这种行为和连接之间的时间量足以保证将 IP 黑名单列入黑名单，但唉，确实如此。

现在，除了将我的 IP 列入托管公司白名单的可能性之外，有没有办法让 MYSQL 会话/连接保持活动状态，这样程序就不必在迭代之间保持重新登录？

我想这可能只有在我可以让 PHP 程序无限期运行时才有可能，也许在手动调整最大运行时间限制之后（我不知道是否还会有其他外部限制，也许是浏览器限制）。我不确定这是否可行，或者是否可行。

MYSQL 连接是否有某种类型的低级系统范围的“cookie”？随着 PHP 程序完成并关闭（然后等待 HTML 刷新页面），我想唯一不必重新登录的方法是使用某种类型的 cookie 或 IP 地址访问（这需要服务器端功能/实现）。

我承认我在这里的方法可能不是实现这一目标的最有效/最有效的方法。因此，我也愿意接受可以实现相同最终结果的替代方法和建议——一个持续的网络抓取循环，该循环转储到数据库中，然后将数据库不断地转储到网页中。

（我正在寻找一种方法来实现这一点，而不是向我的虚拟主机询问 IP 白名单，或者仅仅确定他们的防火墙的访问禁止率。如果确实没有可行或更好的方法，我会做这两种方法中的任何一种。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T06:07:06.547

也许您可以尝试持久数据库连接。

此链接解释了持久连接：http: [//in2.php.net/manual/en/function.mysql-pconnect.php](http://in2.php.net/manual/en/function.mysql-pconnect.php)

# clojure - ClojureScript：从 fetch 迁移到shoreleave

> ID：14312855
> 
> 赞同：2
> 
> 时间：2013-01-14T03:05:48.630
> 
> 标签：clojure, fetch, clojurescript

随着 webnoir 被弃用，我决定按照[docs](https://github.com/shoreleave/shoreleave-remote-ring)中的描述从 fetch 迁移，但由于某种原因，shoreleave.remotes 没有被编译为 Js，因此我得到了

```
goog.require could not find: shoreleave.remotes.http_rpc 
```

我已经尝试过 remote-callback 和 remotes.macros。我的 ClojureScript 命名空间是这样的

```
(ns my.cljs.ns 
(:require [shoreleave.remotes.http-rpc :as rpc])
  (:require-macros [shoreleave.remotes.macros :as fm]) 
```

和后端

```
(ns my.backend
  (:use my.views
  (:require [compojure.route :as route]
        [compojure.handler :as handler]
        [cemerick.shoreleave.rpc :as rpc]))

 )

(rpc/defremote get-data [last-changed] 
  [:foo]
)

(defroutes my-routes
  (GET "/" [] (intro-view))
  (route/files "/" {:root "resources/public"})
  (route/not-found "<h1>Page not found</h1>"))

(def my-routing (-> #'my-routes
                   rpc/wrap-rpc
                   handler/site)) 
```

任何想法如何让它工作？

更新：我发现出于某种原因 goog.require('shoreleave.remotes.http_rpc') 在 goog.provide('shoreleave.remotes.http_rpc') 之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:19:46.520

这是 lein 中增量编译的问题（请参阅错误[CLJS-282](http://dev.clojure.org/jira/browse/CLJS-282)），在 project.clj 中添加 ':incremental false' 解决了我的问题：

```
:cljsbuild {
  :builds [{
    :incremental false
    :jar true
    :source-path "src-cljs"
    :compiler {
        :output-to "resources/public/js/js.js"
        :optimizations :whitespace
        :pretty-print true}
}]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T14:28:39.880

我刚刚通过在 project.clj 中添加两个依赖项解决了这个问题。

```
[shoreleave "0.3.0"]
[shoreleave/shoreleave-remote "0.3.0"] 
```

# c++ - Qt 5.0 中非小部件上的信号/插槽

> ID：14312856
> 
> 赞同：0
> 
> 时间：2013-01-14T03:06:00.283
> 
> 标签：c++, qt, signals-slots

就 GUI 设计者而言，我了解某些信号如何影响某些插槽和调用代码。除了那个方法，我不确定如何从信号中调用一个槽。

举个例子：

```
void QFileDialog::directoryEntered ( const QString & directory ) [signal] 
```

这是一个信号。输入目录后，我希望它用目录的内容填充一个小部件 QColumnView。

非小部件信号如何调用 UI 小部件的插槽。

我假设您使用连接，但提供的示例使用两个单独的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T06:18:41.640

信号和槽是[QObject](http://qt-project.org/doc/qt-4.8/signalsandslots.html#signals-and-slots)的特性。它甚至适用于非 GUI 代码。

始终通过以下`connect`函数将信号连接到插槽：

```
connect(myDialog, SIGNAL(directoryEntered(QString)),
    this, SLOT(updateColumn(QString))); 
```

此处假设您`updateColumn()`在主对象中有槽位来处理该 QColumnView 的实际 UI 更新。

# mysql - mysql优化

> ID：14312858
> 
> 赞同：1
> 
> 时间：2013-01-14T03:06:20.673
> 
> 标签：mysql, database, search, optimization

我正在建立一个有很多过滤器的网站。每次单击/缩小搜索范围时，都会为所有过滤器重新计算所有计数器。我意识到我在这里造成了一些问题，因为每次点击时，我都会通过大约 50 个计数查询来重新计算所有过滤器。当有许多用户同时使用该站点时，这将产生相当大的数据库负载..

如果您需要更多上下文，过滤器计数器看起来像这样：http: [//screencast.com/t/3bxrWTAtm](http://screencast.com/t/3bxrWTAtm)

优化这些计数的最佳方法是什么？我可以使用 memcache，但由于可能会出现新的列表，因此最多必须缓存大约 15-30 分钟。

以下是 COUNT 查询之一的示例：

```
SELECT COUNT(id) AS numOfRows FROM (SELECT `id`, `theLatitude`, `theLongitude`, ( 3959 * acos( cos( radians(45.5086699) ) * cos( radians( theLatitude ) ) * cos( radians( theLongitude ) - radians(-73.5539925) ) + sin( radians(45.5086699) ) * sin( radians( theLatitude ) ) ) ) AS distance  FROM `housing` WHERE  (`elevator` = '1') AND ( `property-type` = 'loft' )  HAVING distance < 75) AS `newid` 
```

住房表如下所示：

```
CREATE TABLE IF NOT EXISTS `housing` (
`id` varchar(10) NOT NULL,
`date` datetime NOT NULL,
`user` varchar(20) NOT NULL,
`email` varchar(50) NOT NULL,
`title` varchar(60) NOT NULL,
`address` varchar(120) DEFAULT NULL,
`formatted_address` varchar(120) NOT NULL,
`theLatitude` double DEFAULT NULL,
`theLongitude` double DEFAULT NULL,
`property-type` varchar(20) NOT NULL,
`square-feet` int(9) DEFAULT NULL,
`bathrooms` double NOT NULL DEFAULT '0',
`bedrooms` int(2) NOT NULL DEFAULT '0',
`price` int(10) DEFAULT NULL,
`priceUSD` int(10) NOT NULL,
`currency` varchar(3) DEFAULT NULL,
`period` varchar(5) DEFAULT NULL,
`lease-terms` varchar(20) NOT NULL,
`available-from` date NOT NULL,
`contactName` varchar(30) NOT NULL,
`contactPhone1` varchar(30) NOT NULL,
`contactPhone2` varchar(30) NOT NULL,
`description` text NOT NULL,
`cats` tinyint(1) NOT NULL DEFAULT '0',
`small-dogs` tinyint(1) NOT NULL DEFAULT '0',
`small-pets` tinyint(1) NOT NULL DEFAULT '0',
`big-dogs` tinyint(1) NOT NULL DEFAULT '0',
`alarm-system` tinyint(1) NOT NULL DEFAULT '0',
`air-conditioning` tinyint(1) NOT NULL DEFAULT '0',
`balcony` tinyint(1) NOT NULL DEFAULT '0',
`carpet-floors` tinyint(1) NOT NULL DEFAULT '0',
`dishwasher` tinyint(1) NOT NULL DEFAULT '0',
`electricity` tinyint(1) NOT NULL DEFAULT '0',
`fireplace` tinyint(1) NOT NULL DEFAULT '0',
`furniture` tinyint(1) NOT NULL DEFAULT '0',
`heating` tinyint(1) NOT NULL DEFAULT '0',
`high-ceilings` tinyint(1) NOT NULL DEFAULT '0',
`hot-water` tinyint(1) NOT NULL DEFAULT '0',
`natural-gas` tinyint(1) NOT NULL DEFAULT '0',
`spa-hot-tub` tinyint(1) NOT NULL DEFAULT '0',
`refrigerator` tinyint(1) NOT NULL DEFAULT '0',
`stove` tinyint(1) NOT NULL DEFAULT '0',
`storage-space` tinyint(1) NOT NULL DEFAULT '0',
`walk-in-closets` tinyint(1) NOT NULL DEFAULT '0',
`washer-dryer` tinyint(1) NOT NULL DEFAULT '0',
`doorman` tinyint(1) NOT NULL DEFAULT '0',
`elevator` tinyint(1) NOT NULL DEFAULT '0',
`health-facilities` tinyint(1) NOT NULL DEFAULT '0',
`inside-parking` tinyint(1) NOT NULL DEFAULT '0',
`laundry-facilities` tinyint(1) NOT NULL DEFAULT '0',
`outside-parking` tinyint(1) NOT NULL DEFAULT '0',
`pool-sauna` tinyint(1) NOT NULL DEFAULT '0',
`wheelchair-access` tinyint(1) NOT NULL DEFAULT '0',
`authnumber` varchar(15) NOT NULL,
`validated` tinyint(1) NOT NULL DEFAULT '0', 
```

主键 ( `id`) ) 引擎=MyISAM 默认字符集=latin1;

用户可以过滤 50 多个字段。

任何能指出我正确方向的东西都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:23:07.320

我过去曾为一个网站做过类似的事情，包括类别和产品。我的方法是首先为每组过滤器编写一个应用程序调用。换句话说，以获取您的功能列表为例。

接下来，您*绝对*希望将该调用缓存在您的应用程序/Web 代码中。您可以缓存来自您的应用程序或为您的应用程序提供支持的服务的函数调用。例如，如果您有一个函数“getListingFeatures()”，您将在 Memcached 中将该函数缓存 2 分钟。当它过期时，它当然会去数据库并再次将其加载到缓存中。

您绝对可以将到期时间设置为较低的值。

还可以考虑让您的到期时间相当随机，以避免“Thundering Herds”（http://en.wikipedia.org/wiki/Thundering_herd_problem）。

我强烈建议您继续使用它并使用 Memcached。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:07:56.447

首先，`Explain`在您的查询中使用并查看您的 mysql 必须检查多少行。尝试了解幕后发生的事情。

其次，如果可能的话，使用`Join`而不是嵌套查询。这在mysql上要轻得多。

第三，在您的过滤器列上试验不同的索引。

编辑：Bill Karwin 教我 1,2,3 索引规则。即，`WHERE`，`ORDER BY`，`SELECT`。WHERE 语句中的列通常也是最重要的添加索引。

现在，对于使用此类密集计算的查询，我不能说哪种索引最适合您，这就是您应该做一些试验的原因。

[观看此幻灯片](http://www.slideshare.net/billkarwin/how-to-design-indexes-really)以了解索引的基础知识。所有功劳归功于比尔·卡尔文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T04:20:01.063

1.  `Explain`按照 hellohellosharp 的回答中的建议使用。
2.  尝试添加`index`到表中的属性。
3.  使用 Mysql 缓存。
4.  使用内存缓存。强烈建议！

# php - 使用PHP在file1和file2中的数据之间进行减法

> ID：14312865
> 
> 赞同：-1
> 
> 时间：2013-01-14T03:07:39.190
> 
> 标签：php, file

假设我有 2 个文件：

**文件1.txt**

```
10;30;15;40;12;14;15
23;32;10;50;12;54;60 
```

**文件2.txt**

```
2;4;5;6;7;8;9
3;6;7;8;9;0;7 
```

我想在这两个文件之间进行减法。前任`10 - 2........`

**PHP代码：**

```
$file1 = 'File1.txt';
$file2 = 'File2.txt';
if(file_exists($file1)){
    $files = fopen($file1,'r');         
    while(!feof($files)){                           
        $data = explode(";",fgets($files));
        if($title ==""){
            $title = $data[0];
        }   
        if(!empty($data[3])){                   
            $cate = $data[3];
            $filepmta = fopen($file2,'r');
            while(!feof($filepmta)){                        
                $hourData = explode(";",fgets($filepmta));
                if(!empty($hourData[3])){
                    if($title ==""){
                        $title = $hourData[0];
                    }   
                    if(!empty($btnHour)){
                        echo $percentRed = ((int)$data[2] - (int)$hourData[2]);
                        //it loads page so long time so I don know what's error.
                    }
                }
            } 
```

它加载页面很长时间。我不知道如何解决这个问题，请知道的人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:15:16.713

我建议只打开两个文件并将文件的内容存储到内存中。IE 创建 2 个简单循环（非嵌套），分别遍历两个文件并将内容保存到数组中。

然后在前两个之后再做一个循环。根据前两个的数组大小迭代第三个循环。（我假设您可以假设它们的大小相同，但最好添加检查以确保循环 1 和循环 2 生成相同大小/长度的数组。

在第三个循环中，遍历之前生成的两个具有相同索引的数组。

伪代码 // 即使我说我会做伪代码，我最终还是做了这一切。：-/

```
$file_values1 = $file_values2 = $answers = array();

while(!feof($file1)) $file_values1[] = explode(';', fgets($file)); // loop 1
while(!feof($file2)) $file_values2[] = explode(';', fgets($file)); // loop 2

foreach($file_values1 as $key1 => $sub_array) { // loop 3
  foreach($sub_array as $key2 => $value) // loop 4; hehe, oh wellz
  {
      $answers[] = $file_values1[$key1][$key2] = $file_values2[$key1][$key2]
  }
} 
```

基本上，嵌套循环 4，嗯。有更快的答案。第三个循环可以改进，它是 O(N^2)。我会把它留给你优化。没有免费的午餐。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:22:04.773

[fgets()](http://php.net/manual/en/function.fgets.php)不会将文件指针移动到最后一行之后，因此您停留在最后一行，[feof()](http://php.net/manual/en/function.feof.php)仍然返回`false`并且您被困在无限循环中。

做你想做的事情的常用方法是：

```
while (($line = fgets($handle)) !== false) {
    echo $line;
} 
```

[查看fgets() 文档](http://php.net/manual/en/function.fgets.php)中的代码示例，它非常详尽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T03:41:23.137

你让这种方式变得比它必须的更复杂。

1.  打开您的文件并用 读取它们[`file()`](http://php.net/file)，这将为您提供每个文件中的行数组。
2.  使用 . 同时迭代两个线阵列[`MultipleIterator`](http://php.net/multipleiterator)。
3.  [`str_getcsv()`](http://php.net/str_getcsv)使用和[`array_map()`](http://php.net/array_map)技巧将每一行的内容转换为数组。
4.  用另一个迭代每一行值[`MultipleIterator`](http://php.net/multipleiterator)。
5.  计算减法并打印。

仅此而已！我已经在下面实现了上述算法。

```
$file1 = 'File1.txt';
$file2 = 'File2.txt';

$file1 = file( $file1);
$file2 = file( $file2);

$iter = new MultipleIterator;
$iter->attachIterator( new ArrayIterator( $file1));
$iter->attachIterator( new ArrayIterator( $file2));

foreach( $iter as $element) {
    list( $line1, $line2) = array_map( 'str_getcsv', $element, array( ';', ';'));

    $val_iter = new MultipleIterator;
    $val_iter->attachIterator( new ArrayIterator( $line1));
    $val_iter->attachIterator( new ArrayIterator( $line2));

    foreach( $val_iter as $value) {
        list( $el1, $el2) = $value;
        echo ($el1 - $el2); echo ";";
    }
    echo "\n";
} 
```

您可以从[这个 demo](http://viper-7.com/Sl7L8L)中看到，它将文件静态定义为数组，这会产生：

```
8;26;10;34;5;6;6;
20;26;3;42;3;54;53; 
```

# python - syntaxError：“继续”在循环中不正确

> ID：14312869
> 
> 赞同：19
> 
> 时间：2013-01-14T03:08:15.670
> 
> 标签：python, twitter, continue, try-except

我已经为这个错误苦苦挣扎了一段时间，对于口译员为什么抱怨“继续”似乎有不同的看法。所以我想在下面提供错误的代码。

```
import tweepy
import time
def writeHandlesToFile():
    file = open("dataFile.txt","w")
    try:
        list = tweepy.Cursor(tweepy.api.followers,screen_name='someHandle',).items(100000)
        print "cursor executed"
        for item in list:
            file.write(item.screen_name+"\n")
    except tweepy.error.TweepError as e:
        print "In the except method"
        print e
        time.sleep(3600)
        continue 
```

我之所以特别在最后包含 continue 是因为我希望程序从睡眠后停止的位置重新开始执行，以保持程序状态。我需要睡眠以遵守 twitter api 速率限制，其中 api 仅允许您每小时发出一定数量的请求。因此，任何可能认为我的错误幼稚或以其他方式出现的人，请务必指出，或者请在不使用 continue 语句的情况下为我提供替代实现。

顺便说一句，我没有像另一篇文章中建议的那样混合制表符和空格。提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-14T03:13:31.927

[`continue`](http://docs.python.org/2/reference/simple_stmts.html#continue)只允许在`for`or`while`循环内。您可以轻松地重组函数以循环直到有效请求。

```
def writeHandlesToFile():
    while True:
        with open("dataFile.txt","w") as f:
            try:
                lst = tweepy.Cursor(tweepy.api.followers,screen_name='someHandle',).items(100000)
                print "cursor executed"
                for item in lst:
                    f.write(item.screen_name+"\n")
                break
            except tweepy.error.TweepError as e:
                print "In the except method"
                print e
                time.sleep(3600) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T03:12:51.620

问题可能出在您使用[continue的方式上](http://docs.python.org/release/2.5.2/ref/continue.html)

> continue 只能在语法上嵌套在 for 或 while 循环中，但不能嵌套在该循环内的函数或类定义或 finally 语句中。6.1它继续最近的封闭循环的下一个循环。

# javascript - 页面加载前短暂的白色闪烁

> ID：14312871
> 
> 赞同：0
> 
> 时间：2013-01-14T03:08:30.737
> 
> 标签：javascript, html, css

我的网站存在不一致的问题。在页面加载之间，有时在页面完全加载之前会出现白色闪烁。这只是一瞬间，大约有 85% 的时间会发生。此外，**它只发生在 Chrome 中**。

我尝试将脚本放在结束正文标记之前，它对其他浏览器有帮助，但对 Chrome 没有帮助。

有人可以告诉我有什么问题吗？

它与冲突的 CSS 有什么关系吗？有没有办法在显示页面之前预加载页面而不执行`onload`将 html 的可见性设置为可见的事件，因为这不能解决问题；页面仍然是白色的。

**编辑1：**

您有时可能会注意到背景图像加载速度很慢，因此背景在一瞬间是深蓝色的。这不是我所指的。这似乎是一种特殊情况。有时它对我来说是这样的，有时它在页面出现之前的片刻内**完全是白色的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:17:55.773

我的猜测是，浏览器只是在你的 bg 图像有时间加载之前解析身体背景（白色）的 CSS。不幸的是，我对此没有任何快速解决方法。您可以摆脱背景图像渐变并使用 CSS，这可能会停止闪烁。

# pci-e - PCIE 端点到端点事务

> ID：14312873
> 
> 赞同：4
> 
> 时间：2013-01-14T03:08:33.590
> 
> 标签：pci-e

我想澄清一下，PCIE 交换机后面的两个 PCIE 端点的端点到端点事务（对等事务）不会转发到根联合体。

我搜索了一下，了解到如果来自 Endpoint #1 的事务针对的是根端口分配给 Endpoint #2 的 PCIE 地址空间，则交换机会将事务转发到 Endpoint #2 所在的下游端口。

如果我误解了这一点，请纠正我。根据 PCIE 规范或特定于实现，此转发功能是强制性的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T13:04:24.747

首先，如果 PCIe 交换机支持访问控制服务 (ACS)，并且主机软件将交换机配置为将 P2P 事务重定向到上游，则交换机将事务转发到根联合体。所以有一个P2P交易被转发到上游的情况。

如果 Switch 不支持 ACS 或主机软件禁用 ACS，PCIe Switch 将直接向下游转发 P2P 事务。我认为这种路由是强制性的，因为 PCI Switch 的内部桥接器应该像传统的 PCI-PCI 桥接器一样运行。

* * *

以下是一些参考资料：

如果您可以访问最新的 PCIe 规范，您可以阅读规范中的 ACS 功能。但是如果你不是会员，你可以阅读ACS的ECN，因为它是公开的，这也会很有帮助。[PDF格式](http://www.pcisig.com/specifications/pciexpress/specifications/ECN_access_control_061011.pdf)

英特尔提供了描述为什么需要 ACS的有用[文档。](http://www.intel.com/content/www/us/en/pci-express/pci-sig-sr-iov-primer-sr-iov-technology-paper.html)

[这里](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1036811)VMware 要求 PCIe Switch 必须支持 ACS 才能使用 PCI Passthrough。

# python - 停止扭曲时，工厂会等待sql执行完成吗？

> ID：14312876
> 
> 赞同：1
> 
> 时间：2013-01-14T03:08:44.250
> 
> 标签：python, twisted, kill

我想知道我是否使用

```
kill `cat twistd.pid` 
```

如果确实有一些 sql 执行提交会发生什么？它会等待执行完成吗？或者只是未知，它可以完成，还是放弃？

我知道我是否将执行放在**stopFactory**方法中，工厂会做诸如等待执行完成之类的事情。但如果我不这样做，我的意思是执行 stopFactory 方法，它会在工厂停止之前等待执行完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T07:21:21.350

kill`SIGTERM`默认发送。Twisted 安装了一个`SIGTERM`处理程序，它调用`reactor.stop()`. `reactor.stop()`当您使用该`kill`命令时，您调用时会发生的任何事情都会发生。

更具体地说，任何关闭触发器都会运行。这意味着附加到 a 的任何服务`Application`都将调用它们的`stopService`方法（如果 a`Deferred`返回，它将被允许在关闭继续之前完成）。这也意味着反应器线程池中的工作线程将以有序的方式关闭 - 即，允许完成他们正在进行的任何工作。

如果您使用的是 adbapi，那么它会`ConnectionPool`使用它自己的`ThreadPool`并且还会注册一个关闭触发器以以类似的有序方式关闭该池。

因此，当您使用`kill`停止基于 Twisted 的进程时，将允许任何 SQL 中间执行在关闭发生之前完成。

# php - 操作 CodeIgniter 解析的文本

> ID：14312877
> 
> 赞同：-1
> 
> 时间：2013-01-14T03:08:55.120
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter 中的模板解析器类为视图 (MVC) 提供设计人员友好的外观。我有一系列要显示的帖子，但在首页上，我只想显示帖子的一部分（前 200 个字符），然后是...“阅读更多”链接。

它正在输出帖子，但似乎忽略了 PHP substr() 函数，因为文本是全长的。

在模型类内部：

```
function __construct()
{
    parent::__construct();
    $this->load->library('parser'); 
    $this->load->model('MPosts');
}

function index() // BASE_URL
{
    $data = array("article_posts" => $this->MPosts->get_posts());
    $this->parser->parse('VPosts', $data);
} 
```

视图内部：

```
<body>
{article_posts}
    <h2><a href="posts/post/{postID}">{title}</a></h2>
    <p><?=substr("{post}", 0, 200);?>...</p>
    <p><a href="posts/post/{postID}">Read More</a></p>
    <hr />
{/article_posts}
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:33:54.650

由于您使用 MySQL 查询来获取文章，因此您始终`SUBSTRING(article_column_name,1,200)`可以只获取前 200 个字符，基本上`substr()`

请参阅：[https ://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring](https://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:40:30.000

代码内部`parser->parse()`：

*   CI 首先通过`load->view()`处理器传递您的模板，就像常规视图一样（因此它在您的模板中执行 PHP 代码），
*   然后它通过“ `{pseudovar}`-replacer”传递它。

在这一点上我确定你理解了问题：`substr()`应用于字符串`"{post}"`

我可以为您的情况考虑以下选项：

*   做`substr()`控制器端，可能是解决问题的最快解决方案
*   删除 Parser 层并使用普通的 PHP 代码，这很好
*   使用第三方 über 重型全功能模板引擎

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T03:19:43.620

尝试`echo`代替`?=`.

人们倾向于将代码留给`load`控制器构造函数中的（模型）库，其中用户定义的函数将调用对模型文件中实现的用户定义函数的调用。

# asp.net-mvc - DropDownListFor EF5 所选项目中的枚举

> ID：14312879
> 
> 赞同：1
> 
> 时间：2013-01-14T03:09:14.933
> 
> 标签：asp.net-mvc, entity-framework, razor

就像在[EF5 中的 DropDownListFor 枚举中](https://stackoverflow.com/questions/12460152/dropdownlistfor-enums-in-ef5)一样，我想从代码优先的 EF 枚举中生成一个下拉列表。提供的解决方案有效，但未设置所选值。我怎么能做到这一点？我尝试了下面的代码，但它不起作用（其中 SelectList 中的最后一个参数重新表示所选值：

```
@Html.DropDownListFor(model => model.TypeID, new SelectList(Enum.GetValues(typeof(Models.OrganisationType)),model.TypeID)) 
```

我已经回答了我的问题。上面的代码正确设置了下拉列表中的选定值。出于某种原因，当我对我的属性使用“标题”一词并为我的枚举使用“标题”时，MVC 不喜欢我的枚举和属性名称，如下所示：

```
@Html.DropDownListFor(model => model.Title, new SelectList(Enum.GetValues(typeof(BL.Titles)),Model.Title),"") 
```

此外，我使用一个视图来创建和编辑，因此必须添加代码来阻止 MVC 在创建对象之前尝试设置所选值：

```
@if(Model == null) {
            @Html.DropDownListFor(model => model.PersonsTitle, new SelectList(Enum.GetValues(typeof(HLRA.eForms.BL.PersonsTitle))),"")
        }
        else
        {
            @Html.DropDownListFor(model => model.PersonsTitle, new SelectList(Enum.GetValues(typeof(HLRA.eForms.BL.PersonsTitle)),Model.PersonsTitle),"")
        } 
```

有谁知道更优雅的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:35:49.380

这：

```
@Html.DropDownListFor(model => model.PersonsTitle, new SelectList(Enum.GetValues(typeof(HLRA.eForms.BL.PersonsTitle))))) 
```

应该足够了。

我不喜欢你的情况：

> @if(模型 == null)

您应该定义您的模型，并且应该使用您的默认值设置属性“PersonsTitle”。

# javascript - -CSS中的无前缀脚本和前缀

> ID：14312880
> 
> 赞同：2
> 
> 时间：2013-01-14T03:09:23.670
> 
> 标签：javascript, css, vendor-prefix

我将要改造一个网站，并将使用[-prefix-free](http://leaverou.github.com/prefixfree/#)脚本来消除我在 CSS 中的前缀。但是，有些 CSS 我不会编辑。这个 CSS 确实包含一些前缀。如果我将这些前缀留在 CSS 中，-prefix-free 仍然可以正常工作，还是有理由我应该检查 CSS 文件并消除所有前缀？

换句话说：CSS 中的前缀会与无前缀脚本一起破坏或导致奇怪的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:24:41.890

-prefix-free 将保留样式表中已添加前缀的所有属性。事实上，如果您为其指定至少一个单独的前缀，它*不会为同一属性或规则添加其他前缀。*

例如，如果您有

```
-webkit-border-radius: 10px; 
```

然后 -prefix-free*不会*`-moz-border-radius`为 4.0 之前的 Firefox 版本添加，也不会`border-radius`为任何浏览器添加无前缀。WebKit 浏览器将照常应用边框半径，因为它们理解`-webkit-border-radius`.

如果您希望 -prefix-free 为其他浏览器添加前缀，则需要将其更改为

```
border-radius: 10px; 
```

因此，这取决于您希望它为哪些属性应用所有必要的前缀。如果您希望 -prefix-free 在任何必要的地方应用前缀，您需要检查您的样式表并删除任何已经存在的前缀。

当然，请记住，您可能希望为某些属性保留硬编码的前缀，例如特定于 WebKit 的伪元素`-webkit-appearance`和`-webkit-text-size-adjust`. 同样，这取决于属性；您可能需要根据您的布局需求进行研究和决定。

该脚本的主页包含一个[测试驱动器](http://leaverou.github.com/prefixfree/#test-drive)，您可以使用它来预览带前缀和不带前缀属性的结果。请记住，结果是针对您用于运行测试驱动器的浏览器量身定制的，因此如果您`border-radius`在 Firefox 4 或更高版本中添加并运行它，您将不会看到任何更改。但是，如果您改为放置`-webkit-border-radius`声明，您仍然会看到 -prefix-free 使其在预览窗格中保持不变，甚至无需添加 unprefixed 属性，无论您使用哪种浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:19:38.067

仅用于支持浏览器`-prefixes`中存在但尚未标准化或尚未完全实现的功能。

由于许多规范已经标准化，某些属性的前缀要求不再需要，并且自许多版本以来就已经存在。示例：[边界半径](http://caniuse.com/#search=border-radius)。

你可以看看[这里](http://caniuse.com/)，看看哪些属性仍然需要前缀。

使用 CSS 时不会有任何效果，某些元素带有前缀，而其他元素则没有前缀。

# db2 - 使用另一个表中的值更新表

> ID：14312885
> 
> 赞同：0
> 
> 时间：2013-01-14T03:10:37.337
> 
> 标签：db2

我尝试使用 IP_ID 将一个表中的值更新为另一个表，以按照 sybtax 比较 2 个表

```
UPDATE EDWID02.CUSTOMER_MOBILE t1
   SET T1.MOBILE = (
      SELECT T2.MOBILE
      FROM EDWID02.NEW_MOBILE t2
      WHERE T1.IP_ID=T2.IP_ID) 
```

我发现的错误是 DB2 数据库错误：

```
ERROR [21000] [IBM][DB2/AIX64] SQL0811N  The result of a scalar fullselect, 
SELECT INTO statement, or VALUES INTO statement is more than one row.  
SQLSTATE=21000 
```

即使我将 = 更改为它告诉我另一个错误 DB2 数据库错误：

```
ERROR [42601] [IBM][DB2/AIX64] SQL0104N  An unexpected token "in" was found
following "t1    SET T1.MOBILE".  Expected tokens may include:  "=".
SQLSTATE=42601 
```

我在 DB2 中编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:03:59.220

你的误解

```
'UPDATE t1 SET value=onevalue' 
```

onevalue 必须是单个值。您可以通过 (SELECT value FROM t2 WHERE t1.id = t2.id FETCH FIRST 1 ROW ONLY)

# google-maps - 谷歌应用脚 本地图教程更改

> ID：14312891
> 
> 赞同：0
> 
> 时间：2013-01-14T03:11:23.650
> 
> 标签：google-maps, google-apps-script

尝试使用：[https](https://developers.google.com/apps-script/articles/maps_tutorial?hl=en) ://developers.google.com/apps-script/articles/maps_tutorial?hl=en我正确收到了地图。但是，我希望地图保留在一个选项卡上。代码底部写着：

```
SpreadsheetApp.getActiveSpreadsheet().show(ui); 
```

我想我应该把它改成

```
SpreadsheetApp.getActiveSpreadsheet().getSheetByName('restaurants').show(ui); 
```

以便地图保留在一个选项卡上。但它给了我一个错误信息。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T19:58:19.397

您收到一条错误消息，因为该类没有`.show()`方法`Sheet`。ui 附加到电子表格，而不是工作表。（与 Excel 相比，电子表格 == 工作簿，工作表 == 工作表又名选项卡。）

如果要确保包含地图的工作表（选项卡）可见，请使用[`Sheet.activate()`](https://developers.google.com/apps-script/reference/spreadsheet/sheet#activate%28%29).

```
 var ss = SpreadsheetApp.getActiveSpreadsheet();
 var mapSheet = ss.getSheetByName("Map");  // Assuming sheet is named Map
 mapSheet.activate();                      // Bring Map to front
 ss.show(ui);                              // Open UI 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T18:03:11.957

您必须**将电子表格的选项卡**命名为“餐厅”，而不是电子表格。

# rest - 如何使用适用于 .NET 的 U2 工具包创建/使用 WCF oData 服务（RESTful 服务）？

> ID：14312892
> 
> 赞同：-1
> 
> 时间：2013-01-14T03:11:45.620
> 
> 标签：rest, odata, u2, u2netdk

我想使用 U2 Toolkit for .NET 和 U2 数据库创建 WCF oData 服务（RESTful 服务）。然后我想在任何 .NET 客户端应用程序中使用 oData 服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:51:48.420

请看下面我的回答：

**概述**

WCF 数据服务将实体数据公开为数据服务。可以使用 U2 Toolkit for .NET 从 U2 数据库创建此实体数据。本主题向您展示如何在基于现有数据库的 Visual Studio Web 应用程序中创建基于实体框架的数据模型，并使用此数据模型创建新的 WCF oData 服务（RESTful 服务）。您可以在不同的 .NET 应用程序中使用 WCF oData 服务，例如：

*   WPF 应用程序
*   Windows 8 Metro 风格应用程序
*   办公室Excel

**安装**

您需要为 .NET v 1.2.0 安装 U2 工具包。它包含用于 Visual Studio 的 U2 ADO.NET 提供程序和 U2 数据库插件

![在此处输入图像描述](../Images/11f2c7083d442a0fe33ec9c199468b49.png)

**使用现有 U2 帐户创建实体数据模型**

我们将使用 U2 UniVerse 的名为“HS.SALES”的示例数据库。1\. 创建名为“U2_WCF_oData_WebApplication”的 ASP.NET Web 应用程序</p>

![在此处输入图像描述](../Images/b52490fef33f02e4a49e05b44cdb40cd.png)

2.  在项目菜单上，单击添加新项目。
3.  在模板窗格中，单击数据类别，然后选择 ADO.NET 实体数据模型。
4.  键入模型名称，然后单击添加。 ![在此处输入图像描述](../Images/26f842f67fdf77c7138362bef68e9c9c.png)

5.  在选择模型内容对话框中，选择从数据库生成。然后单击下一步。

6.  单击新建连接按钮。 ![在此处输入图像描述](../Images/4ca9badc83ce5c072e7f5f6ccf670630.png)
7.  在“连接属性”对话框中，键入连接字符串参数，然后单击“确定”。
8.  确保选中将 App.Config 中的实体连接设置保存为：复选框。然后单击下一步。
9.  将“实体”更改为“客户实体” ![在此处输入图像描述](../Images/b00f71da7fdc76084d08391f2aea6f1f.png)
10.  在“选择您的数据库对象”对话框中，选择您计划在数据服务中公开的 CUSTOMER 和 CUSTOMER_ORDERS。为“CustomerModel”修改“HS.SALESModel”。 ![在此处输入图像描述](../Images/c0b2a67c3a0cb101ff5b7e137221137f.png)
11.  单击完成以完成向导。 ![在此处输入图像描述](../Images/a185e33e1f21259514a2b6cb3adaed02.png)

**使用新数据模型（客户模型）创建 WCF oData 服务（RESTful 服务）**

1.  在 Visual Studio 中，打开表示数据模型的 Customer.edmx 文件。
2.  在模型浏览器中，右键单击模型，单击属性，然后记下实体容器的名称。 ![在此处输入图像描述](../Images/84cba0c145345a888f27737fa7061591.png)
3.  在解决方案资源管理器中，右键单击 ASP.NET 项目的名称，然后单击“添加新项”。
4.  在“添加新项”对话框中，选择 WCF 数据服务。
5.  提供服务的名称，然后单击“确定”。 ![在此处输入图像描述](../Images/a37915646318abcfeeca589ac54385cb.png)
6.  在数据服务的代码中，将注释 /* TODO: put your data source class name here */ 在定义数据服务的类的定义中替换为继承自 ObjectContext 类的类型，即实体容器数据模型，这在步骤 2 中已记录。

public class U2_Customer_WcfDataService : DataService< /* TODO: 把你的数据源类名放在这里 */ >

```
public class U2_Customer_WcfDataService : DataService< CustomerEntities > 
```

7.  在数据服务的代码中，使授权客户端能够访问数据服务公开的实体集。有关更多信息，请参阅创建数据服务。

    // config.SetEntitySetAccessRule("MyEntityset", EntitySetRights.AllRead);

    ```
     config.SetEntitySetAccessRule("*", EntitySetRights.AllRead); 
    ```

8.  要使用 Web 浏览器测试“U2_Customer_WcfDataService.svc”数据服务，请按 Visual Studio ->Debug->StartWithoutDebugging

![在此处输入图像描述](../Images/ccd1e871a5db565a55a0bad609ebbeec.png)

![在此处输入图像描述](../Images/292e9c57692bdc5fd01a12f7afddba3e.png)

![在此处输入图像描述](../Images/b7afd8b07ce161aa5f1336a61bef41eb.png)

**使用 WCF oData 服务（RESTful 服务）**

1.  在同一解决方案中创建 WPF 项目。将项目重命名为“U2_Consumer_WpfApplication”</li>

![在此处输入图像描述](../Images/78505c3e0ce89fae6e721b996502e265.png) 2.添加服务参考

![在此处输入图像描述](../Images/9633f6de62617098e3b8f75fec3f31bd.png)

3.  按发现按钮，重命名“U2_WCF_oData_ServiceReference”。按确定。

![在此处输入图像描述](../Images/2de17aa67d36af96f77a624c89bacbf5.png)

4.  转到数据-> 显示数据源。

![在此处输入图像描述](../Images/b3b8349bf57764606c8723515016bc4d.png)

5.  将“客户”拖放到 WPF 设计器中。

![在此处输入图像描述](../Images/711d948649a44ee6909f239fd59e367d.png)

6.  打开“MainWindow.xaml.cs”文件。添加这一行（你的 uri 会有所不同）。

    私有 Uri svcUri = new Uri(" [http://localhost:38346/U2_Customer_WcfDataService.svc/](http://localhost:38346/U2_Customer_WcfDataService.svc/) ");

7.  添加这一行。

    U2_WCF_oData_ServiceReference.CustomerEntities ctx = new U2_WCF_oData_ServiceReference.CustomerEntities(svcUri);

8.  添加这一行。

    cUSTOMERSViewSource.Source = ctx.CUSTOMERs.ToList();

9.  您的竞争代码将如下所示。公共部分类 MainWindow : Window { private Uri svcUri = new Uri(" [http://localhost:38346/U2_Customer_WcfDataService.svc/](http://localhost:38346/U2_Customer_WcfDataService.svc/) ");

    ```
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        U2_WCF_oData_ServiceReference.CustomerEntities ctx = new U2_WCF_oData_ServiceReference.CustomerEntities(svcUri);
        System.Windows.Data.CollectionViewSource cUSTOMERsViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("cUSTOMERsViewSource")));
        // Load data by setting the CollectionViewSource.Source property:
        // cUSTOMERsViewSource.Source = [generic data source]
        cUSTOMERsViewSource.Source = ctx.CUSTOMERs.ToList();
    } 
    ```

    }

10.  将 WPF 应用程序设置为“启动项目”。运行 WPF 应用程序。

![在此处输入图像描述](../Images/8eac8bd856b4a9d359aaa2be06f85629.png)

# php - 为“每页项目”设置 cookie

> ID：14312894
> 
> 赞同：2
> 
> 时间：2013-01-14T03:11:50.500
> 
> 标签：php, cookies

我有一个新表单，允许用户在使用亚当分页方案显示的结果中选择“每页项目”。选择已经通过分页链接传递到下一页和上一页。如果我想将“每页项目”（ipp）存储为 cookie，并且能够为使用类似方案的其他页面调用它，那么最好的方法是什么？下面是我的表格：

```
<form action="product_list_by_category_ipp.php" method="get" name="ippForm" id="ipp_changer" class="ipp_changer">
<label>
  #pp:</label>

<select name="ipp" style="display:inline!important;margin:4px;" onchange="document.forms['ipp_changer'].submit()"> 
<option value="<?php echo $ipp; ?>"><?php echo $_GET['ipp']; ?></option>
<option value="5">5</option>
<option value="15">15</option>
<option value="25">25</option>
<option value="All">All</option>
</select>
<input type="hidden" name="cat" value="<?php echo $product_category; ?>" />

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:17:44.277

设置时`$_GET['ipp']`，通过 将其值存储在 cookie 中[`setcookie()`](http://us3.php.net/manual/en/function.setcookie.php)。在随后的页面上，首先检查是否`$_GET['ipp']`设置了，这意味着值正在被更改，然后检查是否`$_COOKIE['ipp']`设置了新值，如果没有传入新值`$_GET`，最后，如果两者都不存在，则提供默认值。

任何时候`$_GET['ipp']`都存在，它将覆盖现有的 cookie 并一直使用，直到另一个`$_GET['ipp']`覆盖它。

```
// If the value was passed in $_GET and is an int or "All"...
if (isset($_GET['ipp']) && (ctype_digit($_GET['ipp']) || $_GET['ipp'] == 'All')) {
  // Store it in the cookie
  setcookie('ipp', $_GET['ipp']);
  // And save in a variable
  $ipp = $_GET['ipp'];
}
// Then check existing cookies
else if (isset($_COOKIE['ipp']) && (ctype_digit($_COOKIE['ipp']) || $_COOKIE['ipp'] == 'All')) {
  $ipp = $_COOKIE['ipp'];
}
// Finally use a default value if none was set
else {
  // Default to 3 for example:
  $ipp = 3;
} 
```

稍后在您的标记中，您只需要使用该值`$ipp`，因为它的来源已经从 解析`$_GET, $_COOKIE`，或者一个默认值。由于我们将其验证为整数，因此无需通过`htmlspecialchars()`.

```
<option value="<?php echo $ipp; ?>"><?php echo $ipp; ?></option> 
```

如果您真的想要严格并验证这`$_GET['ipp']`正是您提供的选项之一，请使用`in_array()`.

```
// Make sure it's one of your allowed values...
if (isset($_GET['ipp']) && in_array($_GET['ipp'], array(5,15,20,25,'All')) {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:16:56.740

在 PHP 中

```
setcookie("ipp", VALUE); 
```

检索它

```
$_COOKIE["ipp"] 
```

# php - 我们可以使 MySQL 选择查询的结果可编辑和可排序吗？

> ID：14312896
> 
> 赞同：3
> 
> 时间：2013-01-14T03:12:02.230
> 
> 标签：php, mysql

我有一个选择查询，它从表中提取数据并相应地显示它

```
$display_query= "select * from customer WHERE abc_mailing_list = '$abc' AND def_mailing_list ='$def' AND ghi_mailing_list = '$ghi' AND position_category IN($var) AND country_code='$country_cat' ORDER BY state";

$display_result=mysqli_query($dbc2,$display_query); 

<table width = "100%"border="1" style="border-collapse: collapse;">
<tr style="background-color: #51626F; color: #FFFFFF;">
<th> S.No</th>
<th> First Name</th>
<th>Last Name</th>
<th>Position Category</th>
<th>State</th>
<th>Country</th>
<th>Title</th>
<th>Agency</th>
<th>Department</th>

</tr>
<?php
$colour2 = "transparent";  
$colour1 = "#B1B0A7";  
$count = 0;
$row_count = 0; 
while($row=mysqli_fetch_assoc($display_result)){

$rowcolor = ($row_count % 2) ? $colour1 : $colour2;
$count++;
?>
<tr style="background: <? echo $rowcolor; ?>;">
<td width="10%" height="20"><? echo $count; ?></td>
<td width="10%" height="20"><? echo $row['first_name']; ?></td>
<td width="10%" height="20"><? echo $row['last_name']; ?></td>
<td width="10%" height="20"><? echo $row['position_category']; ?></td>
<td width="10%" height="20"><? echo $row['state']; ?></td>
<td width="10%" height="20"><? echo $row['country_code']; ?></td>
<td width="10%" height="20"><? echo $row['title']; ?></td>
<td width="10%" height="20"><? echo $row['agency']; ?></td>
<td width="10%" height="20"><? echo $row['department']; ?></td>

</tr>
<?
$row_count++;
}
?> 
```

我的问题是我想让所有内容都可编辑，这样如果用户在返回的结果中发现一些错误，他应该可以选择编辑并保存它，以便可以将其保存在数据库中。有这个插件吗？如果这是一个微不足道的问题，我很抱歉，我是 PHP 新手。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:15:08.817

编辑部分需要一些工作，但您可以使用 DataTables（一个 JQuery 插件）来处理排序、搜索等。

DataTables（jQuery 的表格插件） www.datatables.net

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:21:44.860

您对它的工作原理缺少一些了解。您现在要做的是在网页中显示数据。您需要实现一种机制来更新数据库，这不会立即发生，您需要以文本框等可编辑格式显示数据，而不是让用户更改它并单击更新按钮，例如当他是完毕。然后您需要响应单击该按钮，从文本框中获取已编辑的数据并更新数据库中的正确位置。简单地说，可以通过许多不同的方式来完成。开始做某事并发布一些代码，以便我们提供帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T03:46:03.570

代替

```
'<td width="10%" height="20"><? echo $count; ?></td>' 
```

您应该将此列作为数据库中唯一的自动递增数字，以便可以识别每一行。从那里，您可以使用表单（复选框来选择需要编辑的列，或者可以在每列上编辑的文本输入）。如果您选择使用复选框和“编辑”按钮，请使用附加唯一 ID 的隐藏输入。然后检查是否

```
(isset($_POST['id']) && isset($_POST['firstName']))
{
    $firstName = sanitizeStrin($_POST['firstName']);
    $id = sanitizeString($_POST['id']);
  mysql_query( "UPDATE table SET first_name = '$firstName' WHERE uniqueID='$id'" );
} 
```

.. 等以查看需要更新哪一行中的哪一列。检查每一列需要大量代码，但你明白了。希望这可以帮助。

# java - 在 Spring MVC 上将 JSONObject 作为参数传递

> ID：14312900
> 
> 赞同：1
> 
> 时间：2013-01-14T03:12:24.117
> 
> 标签：java, spring-mvc, jetty

我希望使用 Spring MVC 实现 REST 服务，我在 URL 中传入以下对象`"/url/lookup/{jsonparm}"`：

```
{"url":"http://bubba.com/foo/bar", "max_hops":3} 
```

我尝试了以下方法：

```
@RequestMapping(value = "/url/lookup/{jsonparam}", method = RequestMethod.GET)
@ResponseBody
public String urlLookup(@PathVariable("jsonparam") String jsonparam) {
    // just to see if I can get the parms
    logger.debug("urlLookup get request : " + jsonparam.toString()); 
    JSONObject resp = new JSONObject();
    return resp.toString(); // return an empty JSONObject for now
} 
```

所以我通过调用来调用它

```
http://localhost:8080/v1/wsp/url/lookup/%7B%22max_hops%22%3A3%2C%22url%22%3A%22http%3A%2F%2Fbubba.com%2Ffoo%2Fbar%22%7D 
```

运气不好，请在我的 Jetty 日志中看到以下内容：

```
WARNING: No mapping found for HTTP request with URI [/v1/wsp/url/lookup/{"max_hops":3,"url":"http://bubba.com/foo/bar"}] in DispatcherServlet with name 'rest' 
```

笔记：

1.  url 前缀`localhost:8080/v1/wsp/`是正确的，我的 Servlet 和请求映射也是正确的
2.  我已更新问题以使用 a`@PathVariable`作为响应者建议的一个

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:22:46.943

你很困惑`GET`和`POST`方法。

任何一个：

1.  使用`POST`方法并将 JSON 内容实际*发布*到控制器。您可以使用任何 REST 客户端进行调试，例如。[Chrome 的高级 Rest 客户端](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo)。
2.  使用`GET`方法（就像你现在一样）。*但是*您必须将 JSON 值作为名为`jsonparam`. 因此，您的示例应更改为：

    ```
     http://localhost:8080/v1/wsp/url/lookup/jsonparam=%7B%22max_hops%22%3A3%2C%22url%22%3A%22http%3A%2F%2Fbubba.com%2Ffoo%2Fbar%22%7D 
    ```

后者不太常见。

* * *

**编辑：**

再次查看您的 URL 时，我怀疑您混淆了两个 Spring 注释：

1.  `@PathVariable("jsonparam")`和：
2.  `@RequestParam("jsonparam")`

您正在使用`@RequestParam`，而您的 URL 表明需要`@PathVariable`.

**编辑2：**

但是，可以在这里阅读：http: [//static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-uri-templates](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-uri-templates)路径变量可以传递*任何简单类型*的值。我相信 JSON 不是其中之一，因此你的问题。

我强烈建议使用它`POST`来交换 JSON 值。但是，如果这不是一个选项，我建议坚持使用`GET`方法`@RequestParam`来访问参数值，并像上面更正的示例中那样传递 JSON 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:30:19.330

您应该使用@PathVariable 而不是@RequestParam：

```
public String urlLookup(@PathVariable("jsonparam") String jsonparam){
} 
```

因为你有 @RequestMapping(value = "/url/lookup/ **{jasonparam}** "

而且您的 @RequestMapping 值中有错字。它应该是 /url/lookup/ **{jsonparam}**而不是 {jasonparam}

# openstack - openstack：如何运行多个 Glance 实例？

> ID：14312901
> 
> 赞同：0
> 
> 时间：2013-01-14T03:12:46.670
> 
> 标签：openstack

我是openstack的新手。我已经按照安装指南在单个主机服务器上设置了一个 openstack。现在我有一个问题。在单个节点上，我在 keystone 中注册了 Glance 服务和相关端点。如果我想在多台主机服务器上运行glance，我需要在keystone中注册两个glance服务吗？还是我仍然只需要一个 Glance 服务但添加更多 Glance 端点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:45:27.700

您可能希望找到一种方法来对 glace API 端点进行负载平衡，然后将负载平衡地址作为 PublicURL 放入 keystone 目录中。

诀窍是找到一种负载平衡的方法。最大的问题是查询时间和数据吞吐量的大小。不是一个简单的负载平衡服务。

# ios - ReverseGeocodeLocation City 不够准确

> ID：14312906
> 
> 赞同：0
> 
> 时间：2013-01-14T03:13:40.860
> 
> 标签：ios, objective-c, xcode, gps, location

我从以下地址收到一系列地标：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    ..
} 
```

使用 打印到控制台时`NSLog`，地标以以下形式为我提供数据：

> ..HIDDEN.. St., **Brighton** , MA 02135, United States @ <+42.HIDDEN,-71.HIDDEN> +/- 100.00m

但是当使用以下代码时，我将**波士顿**作为城市

```
[placemark.addressDictionary objectForKey:(NSString*)kABPersonAddressCityKey]); 
```

布莱顿是波士顿的一部分，但控制台日志如何向我显示比城市键更具体的位置..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:32:17.450

看起来你可以用地标做的最好的事情是

```
[locationManager setDesiredAccuracy:kCLLocationAccuracyBest]; 
```

这篇文章可能对[iOS 有一些用处：get Accurate Reverse Geocoding using CLLocationManager?](https://stackoverflow.com/questions/10127405/ios-get-accurate-reverse-geocoding-using-cllocationmanager)

还值得注意的是，使用波士顿代替布莱顿仍然是同一地点的有效地址。

[http://support.apple.com/kb/HT1975](http://support.apple.com/kb/HT1975)

这对我有用：

```
- (void) resetLocationData{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [locationManager startUpdatingLocation];
    NSLog(@"LAT: %f", [locationManager location].coordinate.latitude);
    NSString *latitude = [NSString stringWithFormat:@"%f", [locationManager location].coordinate.latitude];
    NSString *longitude = [NSString stringWithFormat:@"%f", [locationManager location].coordinate.longitude];
    NSString *latlong = [NSString stringWithFormat:@"%@,%@", latitude, longitude];
    NSLog(@"LONG: %f", [locationManager location].coordinate.longitude);
    NSLog(@"Combined Location: %@", latlong);

    [[locationManager location]timestamp];
}

#pragma mark - CLLOCATION STUFF
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    self.currentLocation = newLocation;
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    [geocoder reverseGeocodeLocation:self.currentLocation completionHandler:^(NSArray *placemarks, NSError *error)
     {

         NSLog(@"Placemark is %@", placemarks);
         CLPlacemark *place = [placemarks objectAtIndex:0];
        NSLog(@"placemark 0: %@", place);

        // locationLabel.text = placemarks;

     }];
    if(newLocation.horizontalAccuracy <= 100.0f) {
        [locationManager stopUpdatingLocation];
    }
} 
```

**日志输出：**

2013-01-13 23:23:05.508 CLLocationTest[47617:907] 地标是（“XX XXXXXX Rd, XX XXXXXX Rd, Brighton, MA 02135, United States @ <+42.XXXXXX,-71.XXXXXXX> +/- 100.00m"

# java - mongodb java driver hide id field in aggregation/projection operation

> ID：14312910
> 
> 赞同：4
> 
> 时间：2013-01-14T03:14:18.760
> 
> 标签：java, mongodb, aggregation-framework

I'm performing an aggregation operation using the java mongodb driver, and I followed the example from the docs (pasted below). According to this, the `_id` field should be hidden. However, in my experience with my own code as well as the output of this example, the `_id` field doesn't hide even when setting the projection value to 0 (it works from the mongo shell). Does anyone know if this is a bug in the mongodb java driver? Or am I doing something incorrectly?

```
// create our pipeline operations, first with the $match
DBObject match = new BasicDBObject("$match", new BasicDBObject("type", "airfare") );

// build the $projection operation
DBObject fields = new BasicDBObject("department", 1);
fields.put("amount", 1);
fields.put("_id", 0);
DBObject project = new BasicDBObject("$project", fields );

// Now the $group operation
DBObject groupFields = new BasicDBObject( "_id", "$department");
groupFields.put("average", new BasicDBObject( "$avg", "$amount"));
DBObject group = new BasicDBObject("$group", groupFields);

// run aggregation
AggregationOutput output = collection.aggregate( match, project, group ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:35:28.653

The _id field you are getting at the end is from the `$group` operator. If you want to rename it back to department, add another `$project` to the end of the pipeline and translate _id to department.

# web-services - 我的弹性代码没有正确解析肥皂响应

> ID：14312912
> 
> 赞同：1
> 
> 时间：2013-01-14T03:14:22.503
> 
> 标签：web-services, actionscript-3, apache-flex, soap

我的代码应该解析 SOAP 响应并填充下拉列表。当我手动添加 xml 代码时，它可以工作，但是当我尝试解析 SOAP 响应时，它会遇到以下错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at ex1_02_starter/dropDownList_creationCompleteHandler()[C:\Users\jack\Adobe Flash Builder 4.5\Workspace\Starter 1_02\src\ex1_02_starter.mxml:26]
at ex1_02_starter/___ex1_02_starter_Operation1_result()[C:\Users\jack\Adobe Flash Builder 4.5\Workspace\Starter 1_02\src\ex1_02_starter.mxml:41]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.rpc::AbstractOperation/http://www.adobe.com/2006/flex/mx/internal::dispatchRpcEvent()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AbstractOperation.as:249]
at mx.rpc::AbstractInvoker/http://www.adobe.com/2006/flex/mx/internal::resultHandler()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AbstractInvoker.as:318]
at mx.rpc::Responder/result()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\Responder.as:56]
at mx.rpc::AsyncRequest/acknowledge()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AsyncRequest.as:84]
at DirectHTTPMessageResponder/completeHandler()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\messaging\channels\DirectHTTPChannel.as:451]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at flash.net::URLLoader/onComplete() 
```

我收到的 SOAP 响应

```
 <?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Body>
    <mycustomersResponse xmlns="http://Services.com">
      <mycustomersReturn>
        <age>28</age>
        <name>Alex</name>
      </mycustomersReturn>
      <mycustomersReturn>
        <age>29</age>
        <name>Jack</name>
      </mycustomersReturn>
      <mycustomersReturn>
        <age>30</age>
        <name>Johny</name>
      </mycustomersReturn>
    </mycustomersResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

我的弹性代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:components="components.*"
               xmlns:hellos="services.hellos.*"
               height="957"  creationComplete="initApp()" > 
    <fx:Style source="Styles.css"/>
    <fx:Script>

        <![CDATA[
            import mx.collections.XMLListCollection;
            import mx.events.FlexEvent;
            import mx.messaging.messages.SOAPMessage;
            import mx.rpc.events.ResultEvent;
            [Bindable]
            var _result:*;
            private function initApp():void
            {
                mywebservice.mycustomers();
            }
            protected function  
                dropDownList_creationCompleteHandler(event:ResultEvent):void
            {
                var xml:XML = event.result as XML;
                var xmlString:String = xml.toXMLString();
                var patt:RegExp = new RegExp("xmlns[^\"]*\"[^\"]*\"", "gi");
                var newXmlString:String = xmlString.replace(patt, "");
                xml = new XML(newXmlString);
                _result = new XMLListCollection(xml.mycustomersResponse.mycustomersReturn);
            }

        ]]>  
    </fx:Script>
    <fx:Declarations>
    <s:WebService id="mywebservice"
                  wsdl="http://localhost:8081/WebServiceTest/services/Hellos?wsdl">
        <s:operation name="mycustomers"
                      resultFormat="object"
                      result="dropDownList_creationCompleteHandler(event);"
                      />
        </s:WebService>

    </fx:Declarations>
    <s:FormItem label="Label">
        <s:DropDownList id="dropDownList"

                        labelField="name">
            <s:AsyncListView list="{_result}"/>
        </s:DropDownList>  
    </s:FormItem>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:48:46.813

我认为你应该使用`event.result..mycustomersReturn`. 这将返回一个`XMLList`带有两个项目，然后您可以在下拉列表中转换和使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:02:26.817

来自这里的[下拉列表没有显示它的值](https://stackoverflow.com/questions/14314467/dropdown-list-does-not-show-its-values/14319106#14319106)我稍微修改了我的例子。有两个机会：

1.  从 xml 中剥离命名空间

2.  利用命名空间

这些分别显示在 dropDownList 和 dropDownList2 代码中。

请注意，您不能使用仍然使用 labelField 属性的命名空间（至少我找不到方法）。您必须使用 labelFunction 来提取标签。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <![CDATA[
        import mx.collections.XMLListCollection;
        import mx.events.FlexEvent;
        import mx.messaging.messages.SOAPMessage;
        [Bindable]
        var _result:*;
        [Bindable]
        var _result2:*;

        protected function  
            dropDownList_creationCompleteHandler(event:FlexEvent):void
        {
            var xml:XML = <Body>
                            <myusersResponse xmlns="http://Services.com">
                              <myusersReturn>
                                <name>Nicole</name>
                                <age>50</age>
                              </myusersReturn>
                              <myusersReturn>
                                <name>Jayne</name>
                                <age>40</age>
                              </myusersReturn>
                               <myusersReturn>
                                <name>Alex</name>
                                <age>33</age>
                              </myusersReturn>
                            </myusersResponse>
                          </Body>;

            var xmlString:String = xml.toXMLString();
            var patt:RegExp = new RegExp("xmlns[^\"]*\"[^\"]*\"", "gi");
            var newXmlString:String = xmlString.replace(patt, "");
            xml = new XML(newXmlString);
            _result = new XMLListCollection(xml.myusersResponse.myusersReturn);

        }

        protected function dropDownList2_creationCompleteHandler(event:FlexEvent):void
        {
            var xml:XML = <Body>
                            <myusersResponse xmlns="http://Services.com">
                              <myusersReturn>
                                <name>Nicole</name>
                                <age>50</age>
                              </myusersReturn>
                              <myusersReturn>
                                <name>Jayne</name>
                                <age>40</age>
                              </myusersReturn>
                               <myusersReturn>
                                <name>Alex</name>
                                <age>33</age>
                              </myusersReturn>
                            </myusersResponse>
                          </Body>;

            var ns:Namespace = new Namespace("http://Services.com");
            _result2 = new XMLListCollection(xml.ns::myusersResponse.ns::myusersReturn);                
        }

        private function dropDownList2_labelFunction(item:Object):String{
            var itemXml:XML = item as XML;
            var ns:Namespace = new Namespace("http://Services.com");
            return item.ns::name;
        }

    ]]> 
</fx:Script>

<fx:Declarations>

</fx:Declarations>

<s:FormItem label="Label">
    <s:DropDownList id="dropDownList"
                    creationComplete="dropDownList_creationCompleteHandler(event)"
                    labelField="name">
        <s:AsyncListView list="{_result}"/>
    </s:DropDownList>
    <s:DropDownList id="dropDownList2"
                    creationComplete="dropDownList2_creationCompleteHandler(event)"
                    labelFunction="dropDownList2_labelFunction">
        <s:AsyncListView list="{_result2}"/>
    </s:DropDownList>       
</s:FormItem> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:35:20.793

使用带有命名空间定义的 xml 解析：

```
protected function dropDownList_creationCompleteHandler(event:ResultEvent):void
            {
                namespace ns = "http://Services.com";
                use namespace ns;

                namespace ns_soapenv = "http://schemas.xmlsoap.org/soap/envelope/";
                use namespace ns_soapenv;

                var xml:XML = event.result as XML;                    
                _result = xml.Body.mycustomersResponse.mycustomersReturn;
            } 
```

# c++ - uri 正则表达式模式匹配

> ID：14312916
> 
> 赞同：0
> 
> 时间：2013-01-14T03:14:59.510
> 
> 标签：c++, regex, boost

我在获取要匹配的网址时遇到问题

```
 sregex rex = sregex::compile("(?:ftp|http|https)+://([\\S\^<\^>]+)", sregex::icase ); 
```

它匹配所有的网址，但它还包括在每场比赛结束时的 >> ，我试图否定它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:43:34.023

我相信你想要的是这样的：

```
 sregex rex = sregex::compile("(?:ftp|http|https)://([\\S]+[^<>]*)", sregex::icase ); 
```

当是集合的第一个字符时，该字符`^`仅表示“不” 。`^`因此，`^`in`[\\S\^<\^>]+`并不意味着“不是”。当`^`不是集合的第一个字符时，它表示[目标序列的开始或跟随行终止符](http://www.cplusplus.com/reference/regex/ECMAScript/)，或没有特殊含义。

# javascript - JavaScript 多态变量继承

> ID：14312921
> 
> 赞同：3
> 
> 时间：2013-01-14T03:15:33.453
> 
> 标签：javascript, polymorphism

我正在根据我在网上找到的不同示例在 JavaScript 中练习多态性（第一次尝试）。我知道在其他语言中我可以从扩展的超类中访问超类的变量，并且想知道如何在 JavaScript 中正确执行此操作。下面的代码不会抛出任何错误（至少就 Firefox 的错误控制台而言），但`statement`在`ExtendedClass`.

```
function MyClass() {
  this.statement = "I'm a class with a method";
  this.speak = function() {
    alert(this.statement);
  }
}
var mInstance = new MyClass();
mInstance.speak();

function ExtendedClass() {
  Object.create(MyClass);
  this.speak = function() {
    alert(this.statement+" and I extend a class");
  }
}
var eInstance = new ExtendedClass();
eInstance.speak(); 
```

我可以`statement`从访问`ExtendedClass`吗？这是实现多态性的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:24:15.770

您可以使用`MyClass.call(this)`设置局部变量，然后使用 Object.create 设置原型，像这样

```
function MyClass() {
  this.statement = "I'm a class with a method";
  this.speak = function() {
    alert(this.statement);
  }
}
var mInstance = new MyClass();
mInstance.speak();

function ExtendedClass() {
  MyClass.call(this);
  this.speak = function() {
    alert(this.statement+" and I extend a class");
  }
}
ExtendedClass.prototype = Object.create(MyClass.prototype);
var eInstance = new ExtendedClass();
eInstance.speak(); 
```

您可以在[MDN 文档中查看更多信息](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:23:09.550

我这样做

```
function MyClass() {
  this.statement = "I'm a class with a method";
  this.speak = function() {
    alert(this.statement);
  }
}
var mInstance = new MyClass();
mInstance.speak();

function ExtendedClass() {
  MyClass.call(this);
  this.speak = function() {
    alert(this.statement+" and I extend a class");
  }
}
var eInstance = new ExtendedClass();
eInstance.speak(); 
```

不确定这是否是最好的语法，但我知道这可行，并且您可以正确继承 MyClass 及其所有公共方法和变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T03:23:16.167

[原型](http://beej.us/blog/data/javascript-prototypes-inheritance/)是您正在寻找的。

```
var MyClass = function(){}; //Empty Constructor
MyClass.prototype = {
    statement: "I'm a class with a method",
    speak: function(){
        alert(this.statement);
    }
};
var ExtendedClass = function(){}; //Empty Constructor
ExtendedClass.prototype = new MyClass();
ExtendedClass.prototype.speak = function(){
    alert(this.statement+" and I extend a class");
};
var eInstance = new ExtendedClass();
eInstance.speak(); 
```

# android - 为什么我的 Android 应用程序中的页面无法正常显示？

> ID：14312928
> 
> 赞同：0
> 
> 时间：2013-01-14T03:17:43.287
> 
> 标签：android

我正在编写一个 Android 应用程序。它有两页。第二页应该是一个充满图像按钮的页面。但是当我在模拟器中运行我的应用程序并转到第二页时，该页面不显示。为什么？

这是我得到的一个错误：

> Android logcat文本：致命信号11（SIGSEGV）在0X00000000（代码==1），线程614（com.s

这是整个 LOGCAT

```
: D/gralloc_goldfish(614): Emulator without GPU emulation detected.
01-14 09:08:14.554: D/dalvikvm(614): GC_FOR_ALLOC freed 89K, 3% free 8141K/8327K, paused 33ms, total 35ms
01-14 09:08:14.584: I/dalvikvm-heap(614): Grow heap (frag case) to 10.998MB for 3145744-byte allocation
01-14 09:08:14.744: D/dalvikvm(614): GC_CONCURRENT freed 4K, 3% free 11209K/11463K, paused 105ms+15ms, total 160ms
01-14 09:08:15.054: D/dalvikvm(614): GC_FOR_ALLOC freed 0K, 3% free 11209K/11463K, paused 22ms, total 22ms
01-14 09:08:15.104: I/dalvikvm-heap(614): Grow heap (frag case) to 17.744MB for 7077904-byte allocation
01-14 09:08:15.254: D/dalvikvm(614): GC_CONCURRENT freed 0K, 2% free 18121K/18439K, paused 97ms+6ms, total 157ms
01-14 09:08:15.424: D/dalvikvm(614): GC_FOR_ALLOC freed 3072K, 19% free 15050K/18439K, paused 27ms, total 27ms
01-14 09:08:15.424: I/dalvikvm-heap(614): Grow heap (frag case) to 17.745MB for 3145744-byte allocation
01-14 09:08:15.574: D/dalvikvm(614): GC_CONCURRENT freed <1K, 2% free 18122K/18439K, paused 102ms+15ms, total 149ms
01-14 09:08:15.904: D/dalvikvm(614): GC_FOR_ALLOC freed 0K, 2% free 18122K/18439K, paused 27ms, total 27ms
01-14 09:08:15.954: I/dalvikvm-heap(614): Grow heap (frag case) to 24.495MB for 7077904-byte allocation
01-14 09:08:16.094: D/dalvikvm(614): GC_CONCURRENT freed 0K, 2% free 25034K/25415K, paused 76ms+6ms, total 140ms
01-14 09:08:16.304: D/dalvikvm(614): GC_FOR_ALLOC freed 3072K, 14% free 21964K/25415K, paused 32ms, total 33ms
01-14 09:08:16.314: I/dalvikvm-heap(614): Grow heap (frag case) to 24.498MB for 3145744-byte allocation
01-14 09:08:16.484: D/dalvikvm(614): GC_CONCURRENT freed <1K, 2% free 25036K/25415K, paused 109ms+16ms, total 170ms
01-14 09:08:16.764: D/dalvikvm(614): GC_FOR_ALLOC freed 0K, 2% free 25036K/25415K, paused 30ms, total 30ms
01-14 09:08:16.814: I/dalvikvm-heap(614): Grow heap (frag case) to 31.248MB for 7077904-byte allocation
01-14 09:08:16.994: D/dalvikvm(614): GC_CONCURRENT freed 0K, 2% free 31948K/32391K, paused 99ms+7ms, total 180ms
01-14 09:08:17.145: D/dalvikvm(614): GC_FOR_ALLOC freed 3072K, 11% free 28878K/32391K, paused 37ms, total 37ms
01-14 09:08:17.154: I/dalvikvm-heap(614): Grow heap (frag case) to 31.249MB for 3145744-byte allocation
01-14 09:08:17.314: D/dalvikvm(614): GC_CONCURRENT freed <1K, 2% free 31950K/32391K, paused 82ms+18ms, total 161ms
01-14 09:08:17.624: D/dalvikvm(614): GC_FOR_ALLOC freed 0K, 2% free 31950K/32391K, paused 41ms, total 41ms
01-14 09:08:17.674: I/dalvikvm-heap(614): Grow heap (frag case) to 37.999MB for 7077904-byte allocation
01-14 09:08:17.874: D/dalvikvm(614): GC_CONCURRENT freed 0K, 2% free 38862K/39367K, paused 108ms+8ms, total 204ms
01-14 09:08:18.024: D/dalvikvm(614): GC_FOR_ALLOC freed 3072K, 10% free 35791K/39367K, paused 41ms, total 42ms
01-14 09:08:18.024: I/dalvikvm-heap(614): Grow heap (frag case) to 38.000MB for 3145744-byte allocation
01-14 09:08:18.184: D/dalvikvm(614): GC_CONCURRENT freed <1K, 2% free 38863K/39367K, paused 73ms+20ms, total 157ms
01-14 09:08:18.514: D/dalvikvm(614): GC_FOR_ALLOC freed 0K, 2% free 38863K/39367K, paused 40ms, total 40ms
01-14 09:08:18.564: I/dalvikvm-heap(614): Grow heap (frag case) to 44.750MB for 7077904-byte allocation
01-14 09:08:18.794: D/dalvikvm(614): GC_CONCURRENT freed 0K, 2% free 45775K/46343K, paused 92ms+21ms, total 228ms
01-14 09:08:18.954: D/dalvikvm(614): GC_FOR_ALLOC freed 3072K, 8% free 42704K/46343K, paused 43ms, total 44ms
01-14 09:08:18.954: I/dalvikvm-heap(614): Grow heap (frag case) to 44.751MB for 3145744-byte allocation
01-14 09:08:19.114: D/dalvikvm(614): GC_CONCURRENT freed <1K, 2% free 45776K/46343K, paused 74ms+7ms, total 162ms
01-14 09:08:19.445: D/dalvikvm(614): GC_FOR_ALLOC freed 0K, 2% free 45776K/46343K, paused 60ms, total 60ms
01-14 09:08:19.445: I/dalvikvm-heap(614): Forcing collection of SoftReferences for 7077904-byte allocation
01-14 09:08:19.875: D/dalvikvm(614): GC_BEFORE_OOM freed 9K, 2% free 45767K/46343K, paused 426ms, total 427ms
01-14 09:08:19.875: E/dalvikvm-heap(614): Out of memory on a 7077904-byte allocation.
01-14 09:08:19.875: I/dalvikvm(614): "main" prio=5 tid=1 RUNNABLE
01-14 09:08:19.875: I/dalvikvm(614):   | group="main" sCount=0 dsCount=0 obj=0x40a14568 self=0x2a00b9e0
01-14 09:08:19.875: I/dalvikvm(614):   | sysTid=614 nice=0 sched=0/0 cgrp=apps handle=1073870640
01-14 09:08:19.885: I/dalvikvm(614):   | schedstat=( 3996873888 1969503221 492 ) utm=351 stm=48 core=0
01-14 09:08:19.885: I/dalvikvm(614):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
01-14 09:08:19.885: I/dalvikvm(614):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
01-14 09:08:19.885: I/dalvikvm(614):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
01-14 09:08:19.885: I/dalvikvm(614):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
01-14 09:08:19.885: I/dalvikvm(614):   at android.content.res.Resources.loadDrawable(Resources.java:1930)
01-14 09:08:19.885: I/dalvikvm(614):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-14 09:08:19.894: I/dalvikvm(614):   at android.widget.ImageView.<init>(ImageView.java:120)
01-14 09:08:19.894: I/dalvikvm(614):   at android.widget.ImageView.<init>(ImageView.java:110)
01-14 09:08:19.904: I/dalvikvm(614):   at java.lang.reflect.Constructor.constructNative(Native Method)
01-14 09:08:19.904: I/dalvikvm(614):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-14 09:08:19.904: I/dalvikvm(614):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
01-14 09:08:19.904: I/dalvikvm(614):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
01-14 09:08:19.904: I/dalvikvm(614):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-14 09:08:19.904: I/dalvikvm(614):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-14 09:08:19.904: I/dalvikvm(614):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-14 09:08:19.904: I/dalvikvm(614):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-14 09:08:19.904: I/dalvikvm(614):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-14 09:08:19.904: I/dalvikvm(614):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-14 09:08:19.904: I/dalvikvm(614):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
01-14 09:08:19.904: I/dalvikvm(614):   at android.app.Activity.setContentView(Activity.java:1867)
01-14 09:08:19.904: I/dalvikvm(614):   at com.sgs.First.onCreate(First.java:13)
01-14 09:08:19.904: I/dalvikvm(614):   at android.app.Activity.performCreate(Activity.java:5008)
01-14 09:08:19.904: I/dalvikvm(614):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-14 09:08:19.904: I/dalvikvm(614):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-14 09:08:19.904: I/dalvikvm(614):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-14 09:08:19.904: I/dalvikvm(614):   at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-14 09:08:19.904: I/dalvikvm(614):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-14 09:08:19.904: I/dalvikvm(614):   at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 09:08:19.904: I/dalvikvm(614):   at android.os.Looper.loop(Looper.java:137)
01-14 09:08:19.904: I/dalvikvm(614):   at android.app.ActivityThread.main(ActivityThread.java:4745)
01-14 09:08:19.904: I/dalvikvm(614):   at java.lang.reflect.Method.invokeNative(Native Method)
01-14 09:08:19.904: I/dalvikvm(614):   at java.lang.reflect.Method.invoke(Method.java:511)
01-14 09:08:19.904: I/dalvikvm(614):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-14 09:08:19.914: I/dalvikvm(614):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-14 09:08:19.914: I/dalvikvm(614):   at dalvik.system.NativeStart.main(Native Method)
01-14 09:08:19.930: A/libc(614): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 614 (com.sgs) 
```

这是 XML 代码

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageButton1"
        android:layout_width="160dp"
        android:layout_height="100dp"
        android:src="@drawable/c" />

    <ImageView
        android:id="@+id/imageButton2"
        android:layout_width="160dp"
        android:layout_height="100dp"

        android:src="@drawable/d" />

    </LinearLayout>
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="300dp"
    android:orientation="horizontal" >

     <ImageView
         android:id="@+id/imageButton3"
         android:layout_width="80dp"
         android:layout_height="300dp"

         android:src="@drawable/e" />

   <ImageView
    android:id="@+id/imageButton4"
    android:layout_width="160dp"
    android:layout_height="300dp"

    android:src="@drawable/g" />

    <ImageView
        android:id="@+id/imageButton5"
        android:layout_width="80dp"
        android:layout_height="300dp"

        android:src="@drawable/f" />

   </LinearLayout>

    <ImageView
        android:id="@+id/imageButton6"
        android:layout_width="320dp"
        android:layout_height="100dp"

        android:src="@drawable/h" />

     </LinearLayout> 
```

这是对应的 JAVA 文件

```
package com.sgs;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;

public class First extends Activity implements OnClickListener  {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.first);

        ImageView image1 = (ImageView) findViewById(R.id.imageButton1);
        ImageView image2 = (ImageView) findViewById(R.id.imageButton2);
        ImageView image3 = (ImageView) findViewById(R.id.imageButton3);
        ImageView image4 = (ImageView) findViewById(R.id.imageButton4);
        ImageView image5 = (ImageView) findViewById(R.id.imageButton5);

        image1.setOnClickListener(this);
        image2.setOnClickListener(this);
        image3.setOnClickListener(this);
        image4.setOnClickListener(this);
        image5.setOnClickListener(this);

    }
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()){
        case R.id.imageButton1:

        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:40:38.270

从日志中，您可以看到正在解码图像时出现内存不足错误：

```
01-14 09:08:19.875: E/dalvikvm-heap(614): Out of memory on a 7077904-byte allocation. 
```

也许使用的图像（错误地）对于您模拟器设备配置文件分配的内存来说太大了。您可以尝试增加设备的堆大小（Window-->AVD Manager-->Virtual Devices-->Edit : Hardware properties）

# actionscript-3 - flash：Math.pow 计算较大数字的错误答案

> ID：14312934
> 
> 赞同：0
> 
> 时间：2013-01-14T03:18:15.440
> 
> 标签：actionscript-3, flash, actionscript, actionscript-2

为什么会这样？

当我尝试时：

Math.pow(2,58)=288230376151711740 而实际上是 288230376151711744

或者

Math.pow(2,57)=144115188075855870 而它实际上等于 144115188075855872

它只是在没有任何警告的情况下抛出该数字。如果达到最大值，我会理解它是否停止超过某个数字。但是，这似乎正确计算了前 n 位数字，然后仅在数字的末尾出错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T05:27:16.427

您已经用完了 Number 类型的显示精度。诀窍是，使用 2 的幂，存储在变量中的实际值将是精确的，而当您跟踪它时，引擎会将显示的值截断 16 位，因为它在处理过程中除以 10，并且剩余部分最终会命中如果与没有指数部分的原始值相比，则为“机器零”。这是为了防止显示不精确的浮点除法产生的白噪声。如果您要使用比双精度数存储更多位的大整数/浮点数，则可以解决此问题。

# android - 如何使用 Maps V2 Android API 选择标记？

> ID：14312936
> 
> 赞同：5
> 
> 时间：2013-01-14T03:18:22.387
> 
> 标签：android, google-maps-android-api-2

我目前正在使用`ItemizedOverlay`Maps V1 API 中的类，它跟踪当前选择的标记（如果有）。Maps V2 中是否有任何类似的功能来确定当前选择了哪个标记？另外，有没有办法以编程方式选择一个新的标记？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T17:57:51.067

是的。

要确定选择了哪个标记，请将 OnInfoWindowClickedListener 添加到您的 GoogleMap：

```
//mMap is an instance of GoogleMap
mMap.setOnInfoWindowClickListener(getInfoWindowClickListener()); 
```

覆盖 OnInfoWindowClickListener 内部的 onInfoWindowClicked() 方法：

```
public OnInfoWindowClickListener getInfoWindowClickListener()
{
    return new OnInfoWindowClickListener() 
    {       
        @Override
        public void onInfoWindowClick(Marker marker) 
        {
            Toast.makeText(getApplicationContext(), "Clicked a window with title..." + marker.getTitle(), Toast.LENGTH_SHORT).show();
        }
    };      
} 
```

并跟踪选定的标记，可能使用实例变量。

要以编程方式选择标记，您必须保留所有标记的列表，然后获取一个句柄并调用 showInfoWindow()，类似于以下内容：

```
//markerList is just a list keeping track of all the markers you've added
//to the map so far, which means you'll have to add each marker to this
//list as you put it on the map
Marker marker = this.markerList.get(someObjectYoureShowingAMarkerFor.getId());

if(marker != null)
{
    marker.showInfoWindow();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T17:15:14.887

您可以使用 OnMarkerClickListener。

```
googleMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {
        @Override
        public boolean  onMarkerClick(Marker marker) {
            Toast.makeText(getApplicationContext(), "Clicked a marker with title..." + marker.getTitle(), Toast.LENGTH_SHORT).show();
            return true;
        }
    }); 
```

# c - Unix管道 - 从子描述符中的标准输入读取数据

> ID：14312939
> 
> 赞同：2
> 
> 时间：2013-01-14T03:19:01.560
> 
> 标签：c, unix, piping

我正在尝试在 c 中实现 unix 管道（即执行 ls | wc）。我找到了解决我的问题的相关解决方案（[C Unix Pipes Example](https://stackoverflow.com/questions/4841126/c-unix-pipes-example)），但是我不确定为什么解决的代码片段的特定部分有效。

这是代码：

```
/* Run WC. */
int filedes[2];
pipe(filedes);

/* Run LS. */
pid_t pid = fork();
if (pid == 0) {
    /* Set stdout to the input side of the pipe, and run 'ls'. */
    dup2(filedes[1], 1);
    char *argv[] = {"ls", NULL};
    execv("/bin/ls", argv);
 } else {
    /* Close the input side of the pipe, to prevent it staying open. */
     close(filedes[1]);
 }

 /* Run WC. */
 pid = fork();
 if (pid == 0) {
      dup2(filedes[0], 0);
      char *argv[] = {"wc", NULL};
      execv("/usr/bin/wc", argv);
  } 
```

在执行 wc 命令的子进程中，虽然它将stndin 附加到文件描述符，但似乎我们并没有显式读取第一个子进程中 ls 产生的输出。因此，在我看来，ls 似乎是独立运行的，而 wc 是独立运行的，因为我们在执行 wc 时没有明确使用 ls 的输出。那么这段代码是如何工作的（即它执行 ls | wc）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:51:25.240

显示的代码几乎可以工作（它削减了许多角落，但它有效），因为分叉的孩子确保执行进程将写入（在 的情况下`ls`）和读取的文件描述符（在 的情况下`wc`）是管道的适当端。您不必再做任何事情了；标准输入是文件描述符 0，因此`wc`从标准输入读取没有（文件名）参数。 `ls`始终写入标准输出，文件描述符 1，除非它正在写入错误消息。

代码片段中有三个进程；父进程和两个子进程，每个进程一个`fork()`。父进程也应该关闭管道的两端；它只关闭一个。

通常，在对管道文件描述符执行`dup()`或调用之后，应该关闭管道的两端。`dup2()`您在这里侥幸逃脱，因为`ls`生成数据并终止；你不会在所有情况下。

评论：

```
/* Set stdout to the input side of the pipe, and run 'ls'. */ 
```

不准确；您正在设置`stdout`到管道的输出端，而不是输入端。

`execv()`调用后您应该有一个错误退出；如果它们失败，它们会返回，并且该过程可能会造成严重破坏（例如，如果`ls`失败，您最终会得到两个`wc`运行的副本。

### 一个[SSCCE](http://sscce.org/)

请注意在每个过程中仔细关闭管道的两端。一旦启动了两个子进程，父进程就不再使用管道。我将早期关闭的代码留`filedes[1]`在原地（但将其从显式`else`块中删除，因为以下代码也仅在执行时才`else`执行）。我很可能`closes()`在需要关闭文件的三个代码路径中的每一个中都保留了对。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <unistd.h>

int main(void)
{
    int filedes[2];
    int corpse;
    int status;
    pipe(filedes);

    /* Run LS. */
    pid_t pid = fork();
    if (pid == 0)
    {
        /* Set stdout to the output side of the pipe, and run 'ls'. */
        dup2(filedes[1], 1);
        close(filedes[1]);
        close(filedes[0]);
        char *argv[] = {"ls", NULL};
        execv("/bin/ls", argv);
        fprintf(stderr, "Failed to execute /bin/ls\n");
        exit(1);
    }
    /* Close the input side of the pipe, to prevent it staying open. */
    close(filedes[1]);

    /* Run WC. */
    pid = fork();
    if (pid == 0)
    {
        /* Set stdin to the input side of the pipe, and run 'wc'. */
        dup2(filedes[0], 0);
        close(filedes[0]);
        char *argv[] = {"wc", NULL};
        execv("/usr/bin/wc", argv);
        fprintf(stderr, "Failed to execute /usr/bin/wc\n");
        exit(1);
    }

    close(filedes[0]);

    while ((corpse = waitpid(-1, &status, 0)) > 0)
        printf("PID %d died 0x%.4X\n", corpse, status);
    return(0);

} 
```

示例输出：

```
$ ./pipes-14312939
      32      32     389
PID 75954 died 0x0000
PID 75955 died 0x0000
$ 
```

# windows-phone-8 - 在 Windows Phone 中更改 C++ 组件的命名空间名称会导致异常

> ID：14312941
> 
> 赞同：3
> 
> 时间：2013-01-14T03:19:14.383
> 
> 标签：windows-phone-8, c++-cx

我在 WP8 应用程序中有一个 C++ 运行时组件，如果我更改命名空间名称，每当我尝试在该命名空间中实例化一个类时，都会引发“TargetInvocation”异常。

例如，如果我创建默认的 C++ Windows 运行时组件，则标题如下所示：

```
#pragma once

namespace CppComponent1
{
    public ref class WindowsPhoneRuntimeComponent sealed
    {
    public:
        WindowsPhoneRuntimeComponent();
    };
} 
```

如果我在 .h 和 .cpp 中更改`CppComponent1`为`CppComponent2`，然后尝试`WindowsPhoneRuntimeComponent`在我的 C# 代码中实例化一个对象，我会收到以下错误：

```
A first chance exception of type 'System.TypeLoadException' occurred in Unknown Module.
A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in mscorlib.ni.dll
A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in Microsoft.Phone.ni.dll 
```

如何更改 WP8 应用程序中本机模块的命名空间？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T04:40:36.477

声明组件的 Windows 元数据 (WinMD) 文件的名称必须是声明公共类型的命名空间的前缀。[（我在另一个问题的回答中](https://stackoverflow.com/questions/11004810/xaml-cannot-find-reference-in-local-namespace/11005217#11005217)提供了对命名空间规则的更详细的解释。）

如果将命名空间从 重命名`CppComponent1`为`CppComponent2`，则还需要将构建生成的 WinMD 文件从 重命名`CppComponent1.winmd`为`CppComponent2.winmd`。

# sql - Anagram 的 SQL 代码

> ID：14312944
> 
> 赞同：0
> 
> 时间：2013-01-14T03:19:29.280
> 
> 标签：sql, sql-server-2008-r2, boolean-logic, anagram

我有一个用于查找两个单词是否为字谜的 SQL 代码。

```
DECLARE @str1 VARCHAR(100), @str2 VARCHAR(100)
SELECT @str1 = 'mmaa', @str2 = 'mama'

IF LEN(@str1) <> LEN(@str2)
  BEGIN
    SELECT 'NOT EQUAL'
  END 

ELSE
  BEGIN

    IF (SELECT COUNT(*) FROM

    (

    select  substring(@str1, number, 1) as data
        from    master..spt_values as m 
        where   m.type='p' and number <= len(@str1) AND number > 0

    UNION 

    select  substring(@str2, number, 1) as data
        from    master..spt_values as m 
        where   m.type='p' and number <= len(@str2) AND number > 0
        )
t)

= LEN(@str1)

    SELECT '1 anagram'
ELSE

SELECT '0 not anagram'
END 
```

但是对于像 mmaa 和 mama 这样的词，这个程序返回的不是 anagram。但它们是字谜。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:54:49.053

相当粗糙，但怎么样：

```
Declare @S1 varChar(100) = 'mmaa'
Declare @S2 varChar(100) = 'mama'

Declare @c char(1)
Declare @i tinyint
Declare @o1 varChar(100) = ''
Declare @o2 varChar(100) = ''
While DataLength(@s1) > 0 Begin
   Set @c = Left(@s1, 1)
   Set @s1 = Substring(@s1, 2, len(@s1))
   Set @i = 1

   While @i <= Len(@o1) And @c > substring(@o1, @i, 1) Set @i += 1
   Set @o1 = left(@o1, @i-1) + @c + substring(@o1, @i, len(@o1))
End
While DataLength(@s2) > 0 Begin
   Set @c = Left(@s2, 1)
   Set @s2 = Substring(@s2, 2, len(@s2))
   Set @i = 1

   While @i <= Len(@o2) And @c > substring(@o2, @i, 1) Set @i += 1
   Set @o2 = left(@o2, @i-1) + @c + substring(@o2, @i, len(@o2))
End
Select case When @o1 = @o2 Then 'Anagram' Else 'Not Anagram' End 
```

或将排序封装到一个函数中，

```
 Create FUNCTION [dbo].[SortString](@s varChar(8000))
    RETURNS varChar(8000)
    As
    Begin
        Declare @c char(1)
        Declare @i int
        Declare @out varChar(8000) = left(@s, 1)
        While DataLength(@s) > 0 Begin
            Set @s = Substring(@s, 2, len(@s)-1)
            Set @c = Left(@s, 1)
            Set @i = 0
            While @i < Len(@out) And @c > substring(@out, @i+1, 1) Set @i += 1
            Set @out = case when @i < Len(@out) 
        then stuff(@out, @i+1, 0, @c)
        else  @out + @c end  
        End
        return  @out
    End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T05:18:41.303

请尝试使用`CHECKSUM_AGG`

```
DECLARE @str1 VARCHAR(100), @str2 VARCHAR(100)
SELECT @str1 = 'mmaa', @str2 = 'mama'

IF LEN(@str1) <> LEN(@str2)
  BEGIN
    SELECT 'NOT EQUAL'
  END 
ELSE
  BEGIN
    IF(SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*))
        FROM   (select  substring(@str1, number, 1) as data
            from    master..spt_values as m 
            where   m.type='p' and number <= len(@str1) AND number > 0)T1)=
    (SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*))
        FROM   (select  substring(@str2, number, 1) as data
            from    master..spt_values as m 
            where   m.type='p' and number <= len(@str2) AND number > 0)T2)
        SELECT '1 anagram'
    ELSE
        SELECT '0 not anagram'
END 
```

# php - CakePHP 致命错误：调用未定义的方法 stdClass::findById()

> ID：14312948
> 
> 赞同：-1
> 
> 时间：2013-01-14T03:19:52.150
> 
> 标签：php, cakephp, fatal-error

> **可能重复：**
> [cakephp 数据源调用未定义的方法](https://stackoverflow.com/questions/11925523/cakephp-datasource-call-to-undefined-method)

我收到这种错误

```
Fatal error: Call to undefined method stdClass::findById() in C:\wamp\www\studiohelper\app\controllers\recurring_invoices_controller.php on line 309 
```

这是该行的代码：

```
$invoice = $this->Invoice->findById($invoiceId); 
```

它看起来像一个非常基本的代码，但为什么我会得到这种错误呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:19:17.757

我认为您的型号名称有误。实际上在cake php中是这样的

```
$this->Modelname->findById($id); 
```

您能否在您的模型中检查模型名称是 Invoice 或 RecurringInvoice 请确保这一点。

# html - CSS 关于纯 CSS 可折叠菜单

> ID：14312949
> 
> 赞同：2
> 
> 时间：2013-01-14T03:19:56.787
> 
> 标签：html, css, menu, collapsable

我想知道有没有纯 CSS 可折叠菜单的好例子

这是一个例子

[http://cssdeck.com/labs/pure-css-tree-menu](http://cssdeck.com/labs/pure-css-tree-menu)

该示例`input:checked`用作将子级从更改为的`display:none`触发器`display:block`

这是`li:hover`用于执行此操作的示例

[为移动浏览器制作由向下箭头触发的纯 CSS 可折叠菜单](https://stackoverflow.com/questions/10014077/make-pure-css-collapsible-menu-triggered-by-down-arrow-for-mobile-browsers)

但是我想`li:click`用作触发器，这可能吗？

非常感谢您的建议，非常感谢我能举个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:30:36.790

**我们可以！**

您可以使用`:focus`在点击时激活的伪：http: [//jsfiddle.net/w5zev/2/](http://jsfiddle.net/w5zev/2/)这种技术的停用更加棘手。

取自谷歌搜索，它把我带到了这里：http: [//quhno.internetstrahlen.de/myopera/csstests/collapsible-paragraph.html#url](http://quhno.internetstrahlen.de/myopera/csstests/collapsible-paragraph.html#url)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T03:27:31.230

你不能纯粹用 CSS 来做到这一点， :click 甚至不是一个有效的 CSS 选择器属性（如果我在这里错了，请有人纠正我）。您只能使用：活动、悬停和访问。但是，您可以使用 javascript 或 jQuery

例如。`$('li').click(function(){//Do Something});`

# javascript - 如何在 JavaScript 中克隆构造函数？

> ID：14312951
> 
> 赞同：4
> 
> 时间：2013-01-14T03:20:35.447
> 
> 标签：javascript

我有一个构造函数`Monkey()`：

```
function Monkey(name, age) {
    this.name = name;
    this.age = age;
} 
```

我想创建另一个以`Human()`额外属性命名的构造函数，该属性`cars`将存储该人拥有的汽车数量以及所有拥有的属性`Monkey`（*如`name`和`age`）*

我不想重复`Monkey`新东西中的所有`Human`东西。*是否可以使用原型*克隆`Monkey`和扩展属性？

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T03:23:58.893

我试过这段代码，我想这就是你想要的：

```
function Human(name,age,cars){
    Monkey.call(this,name,age);
    this.cars = cars;
} 
```

这样，`Human`构造函数将`Monkey`构造函数作为普通函数调用，但将其命名空间设置为新`Human`对象。因此，在这种情况下，constructor 中的`this`关键字`Monkey`指的是 class 的对象`Human`，而不是class 的对象。`Monkey.`此外，在这段代码中，条件`new Human() instanceof Human;`返回`true`，因为我没有返回 的新实例`Monkey`，只是使用它的构造函数。

此外，正如您所说，您可以“克隆”原型。只需这样做：

```
Human.prototype = Monkey.prototype; 
```

**编辑**

正如@Bergi amd 建议的那样，克隆原型的最佳方法是使用[Object.create 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)，如下所示：

```
Human.prototype = Object.create(Monkey.prototype, {constructor:{value:Human}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:28:19.220

功能风格/寄生继承的简单开始：

```
function Human(name, age, cars) {
  var that = new Monkey(name, age);
  that.cars = cars;
  return that;
} 
```

正如道格拉斯·克罗克福德所概述的

[http://www.crockford.com/javascript/inheritance.html](http://www.crockford.com/javascript/inheritance.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T03:53:36.187

我写这个答案只是为了补充其他答案，除非您完全知道使用 non-standard 的影响，否则不应使用它`__proto__`。

```
function Monkey(name, age) {
    this.name = name;
    this.age = age;
}

function Human(name, age, cars) {
  this.__proto__ = new Monkey(name, age);
  this.cars = cars;
}

console.log(new Human(1, 2, 3)); 
```

**也可以看看**

*   [__proto__，什么时候会消失？备择方案？](https://stackoverflow.com/questions/10476560/proto-when-will-it-be-gone-alternatives)
*   [JavaScript 和 __proto__ - 哪些浏览器使用它？](https://stackoverflow.com/questions/3082791/javascript-and-proto-what-browsers-use-it)*

# vb.net - VB.NET - 查找当前时区，然后转换为太平洋

> ID：14312952
> 
> 赞同：1
> 
> 时间：2013-01-14T03:20:38.153
> 
> 标签：vb.net, datetime

我尝试四处寻找代码，但运气不佳。我发现了一些小片段，我知道如何将当前时间转换为 UTC，但我真的很想知道如何获取当前时区，然后将时间转换为太平洋时间。

从加利福尼亚到缅因州，我有很多用户一直在使用我的软件。所以我需要找出他们所在的时区，然后无论他们在哪里都将其转换为太平洋时间，这样我就可以准确地将本地时间与我的服务器时间进行比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T03:29:22.300

您可以使用 TimeZoneInfo 类为您转换时区：

```
 Dim now As DateTime = DateTime.Now
    MessageBox.Show(now.ToString())

    Dim pacificNow = System.TimeZoneInfo.ConvertTime(now, TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time"))
    MessageBox.Show(pacificNow.ToString()) 
```

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.findsystemtimezonebyid.aspx)上阅读有关 TimeZones 和 Id 的更多信息。

# mysql - Wamp Mysql 和 Web Matrix wordpress

> ID：14312953
> 
> 赞同：1
> 
> 时间：2013-01-14T03:20:39.190
> 
> 标签：mysql, wordpress, webmatrix

我正在用我的 webmatrix 2.0 安装 wordpress。但是在安装时，用户名默认设置为root，要求输入密码，另一方面，mysql的root默认密码为空。安装和设置的冲突从未完成，我该如何解决？

使用 wamp phpadmin 更改 mysql root 密码无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:04:25.767

您需要为 MySQL 指定一个 root 密码。

# javascript - 为什么 TypeScript 混合了模块和原型模式？

> ID：14312955
> 
> 赞同：4
> 
> 时间：2013-01-14T03:21:06.210
> 
> 标签：javascript, class, module, prototype, typescript

我正在查看此页面上由 TypeScript 生成的 JS 代码：

[http://www.typescriptlang.org/Playground/](http://www.typescriptlang.org/Playground/)

基本上，要创建一个`Greeter`类，它会输出以下内容：

```
var Greeter = (function () {
    function Greeter(message) {
        this.greeting = message;
    }
    Greeter.prototype.greet = function () {
        return "Hello, " + this.greeting;
    };
    return Greeter;
})();

var greeter = new Greeter("world"); 
```

所以我想知道他们为什么混合模块和原型模式？这样做不一样吗：

```
function Greeter(message) {
    this.greeting = message;
}

Greeter.prototype.greet = function () {
    return "Hello, " + this.greeting;
}

var greeter = new Greeter("world"); 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T03:37:47.207

这里使用模块模式是创建一个闭包，允许对任何封闭的变量进行更多控制（没有泄漏到全局，没有全局污染），并允许创建“私有”变量（仅通过模块存在的变量模式的关闭）。

# javascript - Chrome V8 错误

> ID：14312960
> 
> 赞同：1
> 
> 时间：2013-01-14T03:21:49.013
> 
> 标签：javascript, c++, v8

我正在尝试构建 Chrome V8 javascript 引擎，以便可以将其嵌入到我的 c++ 项目中。我在[这里](http://code.google.com/p/v8/wiki/BuildingWithGYP)学习教程。我下载了所需的所有内容并设法创建了项目解决方案，但是当我编译它时，12 个解决方案中只有 5 个得到正确编译。有人可以阐明我的问题吗？网络上似乎没有太多关于它的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:05:19.880

我学到的一些技巧是这样的：

使用正确的`gyp`命令生成正确的 sln 文件。可能目标架构参数错误或您提供给 gyp 的其他参数。

我不知道如何正确地“ `clean`”源代码树，所以如果我想要 gyp 的新选项，我只需删除整个源代码树并从原始存档中解压缩。（或使用`svn`）。

确保您使用`python`并`cygwin`提供了 v8 源。

我使用 pc 模拟器 ( `qemu`) 来安装 Windows XP + Visual Studio 和 v8 源 + 工具。

我尝试了各种版本的 Visual Studio，只有 VS Express 2010 有效。

`linux`一切都更简单。而且您甚至不需要构建它，只需使用“ `aptitude install v8-dev`”

# jquery - 如果它是动态的，如何使用 Jquery 获取活动元素类

> ID：14312964
> 
> 赞同：1
> 
> 时间：2013-01-14T03:22:42.547
> 
> 标签：jquery, dynamic, textinput

当我尝试在 javascript ( `document.activeElement.tagName`) 中获取活动元素时，它会不断返回`BODY`. 输入元素是用 jquery 创建的。

情况如下：在页面加载时，我通过 jquery 创建了一个输入框。（标准类，动态id）

单击按钮时，我想测试是否选择了该输入框

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T03:39:49.623

`document.activeElement`返回当前聚焦的元素。当没有焦点元素时，活动元素是页面的`body`.

单击`button`时，文本框不再具有焦点，因此始终返回正文元素。

在以下位置查看更多信息：[https ://developer.mozilla.org/en-US/docs/DOM/document.activeElement](https://developer.mozilla.org/en-US/docs/DOM/document.activeElement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:45:16.457

您必须通过监视最后单击的项目来跟踪最后选择的项目。

以下脚本应该完成您正在寻找的内容。

## [jsFiddle](http://jsfiddle.net/wgYp2/1/)

**JS**

```
$('body').append(
  //Dynamic Inputs being added
  $('<input />', { 'id':'test', 'type':'text'})
).append(
  //Dynamic Inputs being added
  $('<input />', { 'id':'test2', 'type':'text'})
).on('click', 'input[type="text"]', function(e){
  //Keep track of the last selected input
  $('.lastSelected').removeClass('lastSelected'); 
  $(this).addClass('lastSelected'); 
}); 

//Get the last selected input from the page on a button click
$('#mybutton').click(function(e){
  var items = $('.lastSelected')
  if(items.length > 0){
    alert($('.lastSelected').attr('id')); 
  }
}); 
```

**HTML**

```
<input id='mybutton' type='button' value='Click Me' /> 
```

# c++ - 默认情况下通过引用传递的数组？

> ID：14312970
> 
> 赞同：26
> 
> 时间：2013-01-14T03:23:19.383
> 
> 标签：c++, c

我正在阅读一本 C++ 书，上面写着：

> C++ 通过引用将数组传递给函数——被调用函数可以修改调用者原始数组中的元素值。

它指的是这样的情况：

```
int hourlyTemperatures[ 24 ]; 
modifyArray( hourlyTemperatures, 24 ); 
```

但是，这是在这里工作的普通 C 数组指针，对吧？没有使用 C++“引用”技术，传递的是*按值指针*，在这种情况下，是指向数组第一个元素的指针。最终结果是该函数确实可以访问完整的原始数组，就像引用一样，但这实际上并不是按引用传递，对吧？

从这本 Prentice Hall 的书中： ![有问题的书](../Images/03c53ca265df105d73bf2428484685ec.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T23:28:21.250

确实，当您将数组传递给函数时，您实际上是按值传递指针。但是，我觉得对于刚学习 C++ 的人来说，他们根本不必担心指针。他们了解到您可以通过值或引用函数来传递变量。

通过值意味着对函数中变量的更改不会影响调用函数中的原始值。

通过引用意味着如果函数更改了变量的值，那么这些更改将在原始调用函数中看到。

当数组是函数的参数（没有 const 关键字）时，对数组中的值所做的任何更改都将在原始调用函数中看到。因此，我们说数组默认是通过引用传递的。这避免了必须解释哪些指针在传递静态声明的数组时实际上并不相关，但它让人们知道，如果他们在被调用函数中弄乱了数组中的值，这些更改将在调用函数中持续存在.

我在一所一流的工程学校教授“第一门课程”计算机科学 C++ 课程（我们的编程团队将参加今年在俄罗斯举行的世界总决赛）。班上大约 90% 的人实际上并不是计算机相关专业（主要是机械工程师）。上面的材料足以让他们混淆，而不必解释指针是什么。这就是为什么那本书和其他人提到数组是通过引用传递的，因为许多阅读这些书的人只需要“刚好够”的 C++ 就可以通过，而不必学习每一个细节。那些真正想要编程的人应该毫无问题地过渡到数组实际上是通过指针传递的事实。

不过只是我的看法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-14T04:51:57.943

你是对的。该措辞非常令人困惑，并且使用的“引用”含义与与同名C++ 功能相关的术语*引用不同。*相反，它谈论的是数组名称衰减为指针的方式——事实上，你根本不会像这样“传递一个数组”！

在“过去”中，“引用”在更一般意义上的使用方式与“句柄”相同——一个抽象术语，表示在不支持它的语言中使用间接来伪造引用语义。但是，C++*确实*支持它称为*引用*的东西；因此，在谈论 C++ 时，我们倾向于不使用“句柄”意义上的“引用”（显然，这里是*Deitel ∉ "we"*）。

推荐阅读：

*   [http://jcatki.no-ip.org/fncpp/Resources](http://jcatki.no-ip.org/fncpp/Resources)
*   [The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

任何其他 C++ 书籍*都要非常小心*！尽管在生活的大多数领域中，如果我认为包含在上述两个特定列表中是一本书被认为是“好”的明确先决条件，那将是疯狂的，但有足够多的危险不正确的 C++ 文本在那里（例如您引用的文本），这对于我们的语言新手来说是一个足够大的问题，在 C++ 书籍的世界中，它实际上是一个很好的经验法则。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-14T03:34:39.373

总结我的评论，你是绝对正确的！

这**本书**在行话的选择上是错误的。它试图谈论[衰减为 C 指针的数组](https://stackoverflow.com/questions/1461432/what-is-array-decaying)。它指的是**按值传递这个指针**作为**按引用传递，**这是错误的。

这是一个很常见的误解，我相信我也是这样被教导的（将指针作为值传递 == 通过引用传递）。这在 C++ 引用和按引用传递方面是完全错误的。

如果这是正确的，[我将无法做到这一点](http://liveworkspace.org/code/1ZXzL5$0)..

```
void ModifyMyArray(int *array){
   int oops[4]= {0};
   array = oops;

   array[2] = 1;
}
...
int MyArray[4] = {1,3,5,7};

ModifyMyArray(MyArray); 
```

类似于 Java 中的这个问题 - Java[是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

# android - 恢复活动后Android应用程序无法正常工作

> ID：14312971
> 
> 赞同：3
> 
> 时间：2013-01-14T03:23:27.663
> 
> 标签：android, android-fragments

我有一个应用程序，每当我通过主页硬件按钮退出应用程序时，它应该返回到应用程序所处的最后状态。但是，当我再次启动应用程序时，应用程序显示一个只有我的标题栏的白屏。当我单击标题栏的按钮时，应用程序崩溃，`IllegalStateException`应用程序无法找到单击按钮的方法。

我目前正在使用 Sherlocks Fragment 实现，其中标题栏是一个操作栏。我也在使用 HTC Rhyme，2.3 版（姜饼）。以下是在我的主应用程序中添加片段的代码。

在活动的 onCreate 方法中添加片段的代码：

```
FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
Bundle bMain = getIntent().getExtras();
String statusCheck = "";
if (bMain != null) {
    statusCheck = bMain.getString("statusCheck");
}
if (statusCheck.equals("web")) {
    MyWebViewFragment webfrag = new MyWebViewFragment();
    trans.add(R.id.container,webfrag, "WebViewFragment");
} else if(statusCheck.equals("traveloguelist")) {
    MyTravelogueListFragment travelfrag = new MyTravelogueListFragment();
    trans.add(R.id.container,travelfrag, "TravelogueListFragment");
}
trans.commit(); 
```

这是我更改片段时的代码：

```
MyTravelogueListFragment travelfrag = new MyTravelogueListFragment();
getSupportFragmentManager().beginTransaction().replace(R.id.container, travelfrag).addToBackStack(null).commit(); 
```

**[编辑]**

经过大量阅读和运行后，我意识到主要问题是在恢复应用程序后，实际上又创建了活动。因此，我传入的一些参数没有注册，导致显示错误。我*认为*这是导致这种情况发生的错误：

```
Previously focused view reported id "myresID" during save, but can't be found during restore. 
```

但是，不知道你是如何强制应用程序记住fragment之前的状态的？或者有没有其他方法可以解决这个问题？

我仍然很纠结这个问题。如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:24:24.937

经过多次反复试验和多次阅读，我终于找到了解决问题的方法。

据我了解，由于 Activity 的生命周期，会出现此问题。Tseng 在这个论坛的评论相当全面：http: [//forum.unity3d.com/threads/127794-Android-Apps-crashing-on-resume](http://forum.unity3d.com/threads/127794-Android-Apps-crashing-on-resume)

似乎在某个 Activity 调用其他应用程序时`onPause/onStop`，如果所需内存不足，Android 可能会释放该 Activity 当前持有的一些内存。在这种情况下，暂停的活动所拥有的所有当前对象或变量都将被销毁。因此，当活动重新聚焦时，`onCreate`实际上会再次调用 。因此，活动将不知道我当前需要哪个片段。

但是，我意识到它总是会调用本质上是一个捆绑对象的 saveInstanceState。所以我做了以下事情：

onSaveInstanceState 方法

```
 @Override
  public void onSaveInstanceState(Bundle bundle) {
      //activityFrag is a string object that tells me which fragment i am in currently
      bundle.putString("statusCheck", activityFrag);
  } 
```

onCreate 方法

```
if (savedInstanceState != null) {
    getSupportFragmentManager().popBackStack(null, getSupportFragmentManager().POP_BACK_STACK_INCLUSIVE);
    //return;
    statusCheck = savedInstanceState.getString("statusCheck");
} else {
    statusCheck = b.getString("statusCheck");
} 
```

我所做的是删除到目前为止我堆积的所有碎片，以消除任何缺少所需信息的问题。所以这就像重新开始。状态检查只是确定用户最后访问了哪个片段。

经过大量测试，它似乎确实解决了我的问题。虽然我不会说它是完美的。我遇到的主要缺点之一是，每当我更改我的片段时，我都必须更新和更改我的 statusCheck 以确保将调用正确的片段。但是，我不得不承认这种方式有点不正统，可能不是很正确。

如果大家有更好的想法，欢迎分享！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T09:17:51.207

您可以尝试执行以下操作：

1.  使用[putFragment](http://developer.android.com/reference/android/app/FragmentManager.html#putFragment%28android.os.Bundle,%20java.lang.String,%20android.app.Fragment%29)将当前位于 FragmentManager 中的所有 Fragment 保存到[onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)中的 bundle 中；
2.  然后您可以使用[getFragment从](http://developer.android.com/reference/android/app/FragmentManager.html#getFragment%28android.os.Bundle,%20java.lang.String%29)[onRestoreInstanceState](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)中的捆绑包中获取所有先前存储的片段。

另外......您可能需要一些 HashMap 来帮助确定要保存到包中的片段的层次结构（如果您有容器和包含的片段）。

另外...从捆绑包中恢复时，您需要知道之前放置的所有片段的密钥。可能，最简单的方法是简单地组织一个键数组，并在将片段保存到实例中时将它们放入 bundle 中。

这样您的保存和恢复将是完整和集中的。

# sublimetext2 - 在 sublime 2 中切换 SML 评论

> ID：14312973
> 
> 赞同：0
> 
> 时间：2013-01-14T03:23:35.043
> 
> 标签：sublimetext2, sml

我在 Sublime Text 2 中安装了语法高亮`SML`，但是切换注释不起作用。

有谁知道如何实现这个功能..？

**用例：**

```
-> some text

-> (Cmd+/)

-> (* some text *) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:45:34.320

`Comments.tmPreferences`我从我使用的 Sass 包中复制了该文件并对其进行了编辑。复制 xml 并将其保存在安装 sml 包的相同位置。该行`<string>source.sml</string>`告诉 Sublime 何时使用这种注释样式，用于具有 sml 语法的文件。根据需要进行编辑。该行`TM_COMMENT_START`告诉 Sublime 放在`(*`注释的开头，类似的`TM_COMMENT_END`. 我注释掉了 uuid 行，因为我不知道该放什么，而且没有它似乎也可以工作。我没有在 sml 文件上测试它，而是在其他语法上工作。我建议与包开发人员交谈，看看他们是否会为他们的代码添加解决方案。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>name</key>
<string>Comments</string>
<key>scope</key>
<string>source.sml</string>
<key>settings</key>
<dict>
    <key>shellVariables</key>
    <array>
        <dict>
            <key>name</key>
            <string>TM_COMMENT_START</string>
            <key>value</key>
            <string>(* </string>
        </dict>
        <dict>
            <key>name</key>
            <string>TM_COMMENT_END</string>
            <key>value</key>
            <string> *)</string>
        </dict>
    </array>
</dict>
<!-- <key>uuid</key> -->
<!-- <string>7CDCE4E8-3850-4F98-A0A8-AFAE23F4F6E9</string> -->
</dict>
</plist> 
```

# apache-pig - 在 Pig 中执行 join 计算

> ID：14312974
> 
> 赞同：0
> 
> 时间：2013-01-14T03:23:40.610
> 
> 标签：apache-pig

新猪用户。我将 mysql 语句转换为 pig 并遇到了以下问题。我有 2 个需要加入的表，并且加入的值有一个计算。我认为这一定是一个简单的问题。

例如，我的表是*machine1*和*machinemeans*`Pig` ，我加入了它们。在手册中找不到用于在加入中进行计算的语法。有什么建议么？

```
 select region, os, group, f.machine, f.machine_users, f.machine_tm,
    f.machine_users - g.users_per_machine outliers,
    f.machine_tm - g.tm_per_machine    outlying_tm,
    tm_per_machine/(f.machine_tm+1) factor
    from machine1 f
    inner join machinemeans g using(region, os, group)
    order by 4, 1, 2, 3 
```

谢谢

更新：谢谢，温妮尼克劳斯。我试过你的建议，但我得到一个标量有超过 1 行的输出错误。这是我的代码。

```
 machine1 = LOAD 'S1'  AS (

    block:chararray,
    region:chararray,
    os:chararray,
    group:int,
    machine:int,
    machine_users:int,
    machine_tm:float
);

machinemeans = LOAD 'S2' AS (

    region:chararray,
    os:chararray,
    group:int,
    tot_machines:int,
    tot_users:int,
    users_per_machine:float,
    tm_per_machine:float,
    tm_per_user:float,
    cnt_per_block:float,
    cnt_per_user:float
);

imbalance = FOREACH (JOIN machine1 by (region,os,group), 
machine2 by   (region,os,group))    
GENERATE 
  region,os,group,
  machine1.machine,
  machine1.machine_users,
  machine1.machine_tm,
  machine1.machine_users - machinemeans.users_per_machine,
  machine1.machine_tm - machinemeans.tm_per_machine; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:04:39.307

单个 SQL 查询可能需要多个 Pig Latin 语句。您所指的计算并不完全在 SQL 中`join`；真的是在`select`语句中，`select ... from ...`在SQL中基本对应Pig的`FOREACH ... GENERATE ...`。所以`FOREACH`对`JOIN`. 例如：

```
result =
    FOREACH (
        JOIN table1 BY key1, table2 BY key2
    ) GENERATE
        table1.field1,
        table1.field2,
        table2.field3,
        table1.field4 - table2.field5; 
```

如果您需要进行计算以获取连接键，但以后不关心它们，您甚至可以这样做

```
JOIN table1 BY (field1+field4), table2 BY myUDF(field3); 
```

# c# - 为什么在 windows8 中更新磁贴时必须包含徽章图像

> ID：14312985
> 
> 赞同：0
> 
> 时间：2013-01-14T03:25:47.440
> 
> 标签：c#, xaml, windows-8, tile

我发现当我创建一个更新磁贴应用程序时，如果在 appxmanifest 中设置一个徽章，该应用程序可以工作，但是如果我删除徽章图像，则会抛出一个异常“找不到元素”。我的模板是 TileWideText05

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T05:47:43.177

当您将应用程序设置为在锁屏模式下运行时，通常需要徽章图像。这意味着应用程序将在后台运行并使用徽章图标更新锁定屏幕的详细信息。如果您不使用此功能，只需关闭在锁定屏幕中运行，您将不需要提供图像。

# html - 我可以将 CSS 伪类应用到一个链接而不是所有链接吗？

> ID：14312987
> 
> 赞同：1
> 
> 时间：2013-01-14T03:26:03.850
> 
> 标签：html, css

```
<a href = "www.fashjdkjdasfh.com">fashjdkjdasfh.com</a>
<a href = "www.hjdshf.com">hjdshf</a> 
```

我将如何在我的 CSS 文档中使其中一个链接的颜色与另一个链接不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T03:32:09.870

我会从[这里推荐 12 号（你必须记住的 30 个 CSS 选择器）](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

基本上，您可以在`href`对象中搜索字符串。

**HTML**

```
<a href = "www.google.com">Google</a>
<a href = "www.yahoo.com">Yahoo</a> 
```

**CSS**

```
a {
    color:green;
}

a [href*="google"] {
    color:red;
} 
```

上面的链接是一篇关于 CSS 选择器的精彩文章，并深入介绍了许多不同选择器的示例，包括伪选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:36:26.880

我建议你应该在标签中使用 Id 属性。通过这样做，您可以为该特定超链接添加扩展的 CSS 属性。

```
<style>
  .a { ... }
  .a#myid { color:red; ... }

</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T03:46:01.273

只需给它一个类并相应地分配 CSS：

```
<a href="http://www.fashjdkjdasfh.com">fashjdkjdasfh.com</a>
<a href="http://www.hjdshf.com" class="redlink">hjdshf</a>

<style>
  .redlink { color: red; }
</style> 
```

顺便说一句，我会`http`在您的 href 或`//`.

[http://www.stackoverflow.com](http://www.stackoverflow.com) 或 //www.stackoverflow.com

祝你好运。

# linux-kernel - 当我尝试写入设备时，为什么我的内核模块会抛出“broken pipe”错误？

> ID：14312988
> 
> 赞同：5
> 
> 时间：2013-01-14T03:26:07.990
> 
> 标签：linux-kernel, usb, kernel-module

我目前正在用 C 编写一个 Linux 内核模块。该模块为 USB 灯提供了一个非常基本的驱动程序（该设备由三个彩色 LED 组成）。我已经设法让驱动程序毫无问题地加载和卸载，并且还创建了设备（`/dev/wn0`、`/dev/wn1`等）。但是，在尝试写入设备时，我不断收到错误消息：

```
$ echo "1" >/dev/wn0
bash: echo: write error: Broken pipe 
```

该模块的完整代码在[这里](https://github.com/nathan-osman/Webmail-Notifier-Linux-Driver/blob/master/webmail_notifier.c)。然而，有趣的部分是`wn_set_color()`函数：

```
/* Create the data buffer to be sent to the device. */
u8 buf[8] = {
    red, green, blue, 0, 0, 0, 0x1F, 0x05
};

/* Send the data to the device. */
return usb_control_msg(udev,
                       usb_sndctrlpipe(udev, 0),
                       0, 0, 0, 0,
                       buf, 8, 0); 
```

由于某种原因，它返回`-32`而不是将数据发送到设备。

我对 Linux 内核编程完全陌生，所以我可能会做一些愚蠢的事情。如果您能对此有所了解，将不胜感激。

* * *

**编辑：**这里有一些进一步的信息：

*   `lsusb -v`输出在[这里](https://github.com/nathan-osman/Webmail-Notifier-Linux-Driver/blob/7c6d510af86b85a2fbc73dc095e1d2fad03e30d2/lsusb.txt)

*   类的`bDescriptorType`成员`usb_endpoint_descriptor`包含设备公开的单个端点的“5”（`bEndpointAddress`是`129`- 或`0x81`十六进制）

*   [这](http://i.stack.imgur.com/KbyZd.png)是发送到设备的其中一个控制 URB 的屏幕截图

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T06:10:41.730

`usb_control_msg()` eventually calls down to `usb_submit_urb()`. The [Documentation/usb/error-codes.txt](http://lxr.linux.no/#linux+v3.6/Documentation/usb/error-codes.txt) file describes the errors that this function can return:

```
-EPIPE          The pipe type specified in the URB doesn't match the
                endpoint's actual type. 
```

If `usb_submit_urb()` succeeded, then `usb_control_msg()` returns an `urb->status` value. This lists under `EPIPE`:

```
-EPIPE (**)             Endpoint stalled.  For non-control endpoints,
                        reset this status with usb_clear_halt().

(**) This is also one of several codes that different kinds of host
controller use to indicate a transfer has failed because of device
disconnect.  In the interval before the hub driver starts disconnect
processing, devices may receive such fault reports for every request. 
```

Have you checked for any messages in the kernel log?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T11:13:34.683

我感觉这和你的`usb_sndctrlpipe`电话有关。该函数的定义如下：`unsigned int usb_sndctrlpipe(struct usb_device *dev, unsigned int endpoint)`.

您似乎正确地传递了设备指针，但是您传入`0`控制端点的值，正如您所提到的，它不是您的端点的地址。我建议在开始时使用端点的十六进制值定义一个常量，并将其传递给您的调用。

但是，我相信你有一个更大的问题。

查看您的 lsusb，您的端点似乎实际上不是控制端点，而是中断端点。这会更改您需要调用以进行通信的函数。例如，`usb_sndctrlpipe`您需要生成管道而不是`usb_rcvintpipe(struct usb_device *dev, unsigned int endpoint)`生成管道（因为它是 lsusb 中列出的 IN 端点）并使用不同的函数而不是`usb_control_msg`. 不幸的是，据我所知，似乎没有可用于自动构造中断 urb 的函数，因此您需要创建一个 urb 结构，如[http://www.makelinux.net/ldd3/的第 13.3.2.1 节所述chp-13-sect-3](http://www.makelinux.net/ldd3/chp-13-sect-3)。更糟糕的消息是（除非我遗漏了什么）因为你唯一的端点似乎是中断**IN**端点，您似乎只能从设备接收中断，而无法向设备发送任何内容。您确定通过 USB 更改灯的颜色是设备支持的功能吗？

更多信息可以在以下位置找到：

*   [http://www.beyondlogic.org/usbnutshell/usb4.shtml](http://www.beyondlogic.org/usbnutshell/usb4.shtml)（关于端点的详尽信息以及如何读取描述符）
*   [http://www.makelinux.net/ldd3/chp-13-sect-3](http://www.makelinux.net/ldd3/chp-13-sect-3)和
*   [http://www.makelinux.net/ldd3/chp-13-sect-5（usb](http://www.makelinux.net/ldd3/chp-13-sect-5)通讯的函数定义）

# objective-c - Cocos2d Objective-c 在数组中找不到对象

> ID：14312989
> 
> 赞同：-3
> 
> 时间：2013-01-14T03:26:21.890
> 
> 标签：objective-c, object, cocos2d-iphone, nsmutablearray, add

好的，我昨天发布了一个问题，我猜这不是真正的问题。问题是，当我执行第一个 NSLOG 时，它显示数组长度为 3。然后我将对象 Snake（它包含两个数组并且是 CCSprite 的子类）添加到数组主体。然后，总是在同一个init中，最后两个NSLOG，和前两个一样，告诉我我的两个数组现在长度为0。我不明白这是怎么回事。请帮忙！

```
-(id)init{
if ((self = [super initWithColor:ccc4(255, 255, 255, 255)] ))
{
    SnakePart * snake;
    snake = [[SnakePart alloc]init];

    body = [[NSMutableArray alloc] init];
    NSLog(@"Grandeur du tableau : %i", [[snake arrayOfDirectionChangingPoint] count]);
    NSLog(@"Grandeur du tableau : %i", [[snake arrayOfPartDirection] count]);

    CGSize winSize = [[CCDirector sharedDirector] winSize];
    direction = HAUT;

    snake = [SnakePart spriteWithFile:@"snakeMainSquare.png"];
    snake.position = ccp(winSize.width/2, winSize.height/2 - 75);
    [self addChild:snake];
    [body addObject:snake];

    [self addBodyPart:snake.position.x :(snake.position.y - (snake.contentSize.height * (body.count)))];
    [self addBodyPart:snake.position.x :(snake.position.y - (snake.contentSize.height * (body.count)))];

    SnakePart* head = ((SnakePart*)body[0]);

    NSLog(@"Grandeur du tableau : %i", [[head arrayOfDirectionChangingPoint] count]);
    NSLog(@"Grandeur du tableau : %i", [[head arrayOfPartDirection] count]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:54:44.160

我自己才发现的。我改变了这一行：

```
snake = [SnakePart spriteWithFile:@"snakeMainSquare.png"]; 
```

到：

```
[snake setTexture:[[CCTextureCache sharedTextureCache] addImage:@"snakeMainSquare.png"]]; 
```

我猜 spriteWithFile 有点像擦除我的蛇数组，因为它就像一个初始化。

# javascript - 具有实时更新的仪表板的最佳 javascript 框架

> ID：14312993
> 
> 赞同：0
> 
> 时间：2013-01-14T03:27:05.900
> 
> 标签：javascript, user-interface

我的最新项目是我想开发具有实时更新的全功能仪表板。界面应该是真正的光滑，它应该看起来类似于 portlet 的集合。所以我已经开始并为此进行了研发，我发现了 javascript mvc 框架，它似乎符合我的要求。但是backbone.js、knockout.js、amber.js等很少……你们怎么看？有js框架好不好？以及这种仪表板的最佳方法是什么。

谢谢，凯思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:39:11.690

我喜欢[nodejs](http://nodejs.org/)您可以在短短几分钟内使用[socket.io](http://socket.io/)建立服务器-客户端 websocket 连接。Socket.io 很漂亮，这里有一个使用这个组合构建仪表板的教程。<[教程](http://coenraets.org/blog/2012/10/real-time-web-analytics-with-node-js-and-socket-io/)>。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T07:48:30.820

Ember.js 怎么样，与其他人相比，我阅读了很多很好的反馈

# javascript - 从 css 中检索所有图像 url

> ID：14312994
> 
> 赞同：3
> 
> 时间：2013-01-14T03:27:13.713
> 
> 标签：javascript, css, regex

我已经在网上搜索了几天，但一直找不到我需要的东西。

我想要的是使用 javascript 正则表达式匹配 CSS 文件中的所有背景图像 url。

前任：

```
background:url('images/sprite-global.png'); // should return 'images/sprite-global.png'
background-image: url('images/sprite-global.png'); should also return 'images/sprite-global.png'
background:url( 'images/sprite-global.png' );// should return 'images/sprite-global.png' even if we have spaces.
background:url('http://mysite.com/css/images/sprite-global.png'); // should return 'http://mysite.com/css/images/sprite-global.png' 
```

但是，它不应该返回任何东西：

```
{
display:none;
} 
```

它看起来很简单，但到目前为止，我最好的结果是： url('images/sprite-global.png') 使用：

```
/url\(([^\)]+\)/i 
```

有谁知道我可以使用哪种表达方式？

谢谢

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:33:15.270

[http://jsfiddle.net/2V5Gg/2/](http://jsfiddle.net/2V5Gg/2/)

```
/url\((.*?)\)/ 
```

我不确定您的要求是什么，因为`url`也可以使用双引号或不使用引号，或者您是否担心包含字符串“url”或括号的路径，但这至少适用于您的示例。与其尝试使用精确的正则表达式来处理修剪，不如使用`$.trim`.

# c# - 从 web.config 获取全局配置的 Api 客户端

> ID：14312996
> 
> 赞同：-12
> 
> 时间：2013-01-14T03:27:57.107
> 
> 标签：c#

在我的应用程序中，我想做类似的事情：

```
SomeApiClient apiClient = new SomeApiClient();

List<User> apiClient.getUsers(); 
```

在我的 web.config 中，我将配置几个键/值对。

**如何编写 SomeApiClient 的构造函数，使其从 web.config 加载值，但不是每次，仅在应用程序启动或第一次请求时加载一次？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:37:00.097

给你。

```
namespace dm2
{
    using System.Collections.Specialized;
    using System.Configuration;

    public class SomeApiClient
    {
        internal static NameValueCollection Config
        {
            get
            {
                if (config == null) config = ConfigurationManager.AppSettings;
                return config;
            }
        }

        internal static NameValueCollection config;
    }
} 
```

基本上你只是在一个非静态类中使用一个静态属性......所以为了得到你的配置设置，

```
public void DoFunConfigStuff()
{
    for (var i = 0; i < Config.Count;i++ )
    {
        Console.WriteLine("[{0}]: {1}",Config.Keys[i] ,Config[i]);
    }
} 
```

既然你提到了 web.config，我假设这是一个网络应用程序。所以我想指出，您应该期望您的应用程序池可以随时回收，此时这将导致静态 getter 重新评估并加载新设置。这个最好不要回复。

您可以做的一件事是将此信息序列化到某种介质，无论是磁盘还是数据库，然后使用某种 db 开关或强制重新加载的网页。

所以在那个getter中它会检查序列化的数据，如果它不存在，检查web.config，然后把数据保存在某个地方。下次它被回收时，它将拾取旧数据。我想真的取决于你的设置。