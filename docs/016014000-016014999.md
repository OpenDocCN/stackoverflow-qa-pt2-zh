# StackOverflow 问答 16014000-16014999

# ebay-api - eBay API eBayAuthToken 生存时间

> ID：16014000
> 
> 赞同：1
> 
> 时间：2013-04-15T11:27:01.657
> 
> 标签：ebay-api

我在 eBay 手册和谷歌中搜索过，但实际上找不到任何关于 eBayAuthToken 生命周期的信息。是否可以将令牌而不是用户名和密码存储在我的数据库中？我认为它更安全，但担心它可能会在一周左右后失效/谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T20:17:45.560

根据 API 文档，使用寿命为 18 个月：http: [//developer.ebay.com/DevZone/guides/ebayfeatures/Basics/Tokens-About.html#LifeSpanandUniqueness](http://developer.ebay.com/DevZone/guides/ebayfeatures/Basics/Tokens-About.html#LifeSpanandUniqueness)

> 令牌在应用程序的多个会话中有效期为 18 个月。在令牌到期前七 (7) 天，eBay 在应用程序代表该用户进行的所有调用的响应中的 HardExpirationWarning 字段中返回到期日期。当您的应用程序检测到此字段时，它必须在此警告中的日期之前将用户重定向到 eBay 站点上的登录页面，否则令牌将不再作为验证该用户的一种方式。

# php - php，具有 Null 值的现有数组条目

> ID：16014004
> 
> 赞同：0
> 
> 时间：2013-04-15T11:27:20.590
> 
> 标签：php

在 php 脚本中，我有以下几行：

```
$stmt = $conn->prepare("select zHD, EMail ...");
...     
$res = $stmt->execute();
...
$row = $stmt->fetch(PDO::FETCH_ASSOC);
var_dump($row);   
if ($row["Email"] === NULL) { 
```

在 1 种情况下，我得到以下 var_dump 值：

```
array(2) {
  ["zHD"]=>
  string(1) "1"
  ["EMail"]=>
  NULL
} 
```

在这种情况下，我还会在 var_dump 之后获得下一行的 PHP 通知：

```
<b>Notice</b>:  Undefined index: Email in ... 
```

这真的是真的吗，你得到一个“未定义索引”警告的数组的现有条目，它有一个 NULL 值？

还是我错过了其他东西？

在 var_dump 命令之后包含这种情况的最佳方法是什么，最好的命令是什么？

非常感谢你提前

更新：感谢您的帮助。这就是结对编程（[http://en.wikipedia.org/wiki/Pair_programming](http://en.wikipedia.org/wiki/Pair_programming)）会很好的地方！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:29:14.987

不，这是因为您正在访问错误的数组索引键。

```
if ($row["Email"] === NULL) { 
```

那应该是

```
if ($row["EMail"] === NULL) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:31:19.493

替换`$row["Email"]`为`$row["EMail"]` ...您使用了错误的索引

# php - Jplayer 音频在 Linux chrome 中不起作用

> ID：16014011
> 
> 赞同：2
> 
> 时间：2013-04-15T11:27:35.620
> 
> 标签：php, javascript, linux, jplayer

我正在使用 jplayer.js 在我的网站上播放歌曲。在 Windows 中，它在所有浏览器中都能完美运行。但是在Linux系统下，Chrome浏览器无法播放歌曲。谁帮我解决这个问题。我已经配置了以下详细信息中显示的 jplayer..

```
swfPath : "js",
supplied : "mp3",
wmode : "window" 
```

# ruby-on-rails - Rails - 试图打开一个文件，但得到 MiniMagick::Invalid

> ID：16014012
> 
> 赞同：1
> 
> 时间：2013-04-15T11:27:40.367
> 
> 标签：ruby-on-rails, ruby, image, image-processing, imagemagick

我正在尝试在控制器中加载文件，例如

```
 Avatar.all.each do |avatar|
     if avatar.avatar_file_name
       file = "lib/data/#{avatar.avatar_file_name}"

       image = MiniMagick::Image.open("#{file}")
       ...
     end
   end 
```

但是每当我运行此代码时，我都会收到错误消息

> MiniMagick::无效

我已经尝试重新安装[此处](https://stackoverflow.com/questions/9905499/carrierwave-mini-magick-gems-not-an-image-error)提到的**imagemagick**，但它并没有真正帮助我。

哪里可能有问题？我错过了一个组件还是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:52:28.923

也许你应该先检查文件是否存在

```
if File.exist?(file)
  image = MiniMagick::Image.open(file)
end 
```

要获取文件的路径，您应该执行以下操作：

```
file = "#{Rails.root}/lib/data/#{avatar.avatar_file_name}" 
```

顺便说一句`lib`，不是保存图像的最佳位置。

# android - 自定义标题定义为布局：有没有办法通过样式/主题设置它？

> ID：16014019
> 
> 赞同：1
> 
> 时间：2013-04-15T11:27:50.710
> 
> 标签：android

如果我使用样式定义自定义主题：

```
<style name="MyTheme" parent="android:Theme">
    <item name="android:windowTitleSize">@dimen/title_bar_height</item>
    <item name="android:windowTitleBackgroundStyle">@drawable/titilebar_bg</item>
    <item name="android:windowBackground">@drawable/bg_page</item> 
</style> 
```

而且我还有一个特殊`titlebar.xml`的定义我的标题栏（按钮、图标、文本等）有没有办法将此布局设置为样式中标题栏的默认布局（如所有活动的默认行为）？

这样**我就不必在每个活动**（实际上是所有活动）中添加以下代码：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.my_layout);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.titlebar); 
```

我能看到的唯一方法是将 Activity 子类化以继承方法，该方法将在 onCreate()/setContentView() 中生成 requestWindowFeature()。但这并不完全是我要问的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:36:53.980

样式.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
     <style name="CustomWindowTitleBackground">
        <item name="android:background">#000000</item>
    </style>

    <style name="CustomTheme" parent="android:Theme">
        <item name="android:windowTitleSize">35dip</item>
        <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
    </style>
</resources> 
```

Mainfest.xml

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/CustomTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application> 
```

# java - java新数组，其中对象值为true，数组上的mysql'where'语法

> ID：16014051
> 
> 赞同：2
> 
> 时间：2013-04-15T11:29:26.040
> 
> 标签：java, arrays, arraylist, where, subset

从数组中获取选定对象的最快方法是什么？

```
MyObject[] objects = new MyObject[]{new MyObject(true), new MyObject(false)};
MyObject[] selectedObjects = ??? 
```

有没有比以下更快的方法：

```
ArrayList<MyObject> selObjectsList = new ArrayList<MyObject>();
for(MyObject obj : objects){
   if(obj.isSelected()){
       selObjectsList.add(obj);
   }
}
selectedObjects = selObjectsList.toArray(new MyObject[0]); 
```

一个简单的操作就这么多行，有没有更短的操作来做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:37:31.910

使用标准库，没有（基本上）更整洁的方法可以做到这一点。但是有许多第三方库拥有`filter`或`predicate`支持。想到[谷歌收藏。](https://code.google.com/p/guava-libraries/)而且我也听说过关于[LambdaJ](http://code.google.com/p/lambdaj/)的好消息。希望 Java 8 会有所改善！

使用 LambdaJ，它可能看起来像这样：

```
select(myList, having(on(MyObject.class).isSelected())); 
```

**编辑**我将“最快”解释为最短的行数。如果您考虑的是性能，则此答案可能不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:41:06.523

很不幸的是，不行。如果您使用的是 ArrayList，它是一个线性列表，那么您实际上是在强制进行线性搜索。

如果您想改进查找，那么您可以使用 Map 之类的东西来加快查找速度，但您必须使用智能方法来设置键。例如，如果您要查找订单，则可以使用订单号作为键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:41:34.787

使用地图。

```
 Map<Boolean, List<MyObject>> someMap; 
```

然后您可以执行以下操作来检索选定的“MyObjects”列表。

```
 someMap.get(true); 
```

并填充...

```
 someMap.put(myObjectInstance.isSelected(), myObjectInstance); 
```

# android - 使用 IntentService 接收和回复 SMS 的 WakeLock

> ID：16014052
> 
> 赞同：0
> 
> 时间：2013-04-15T11:29:30.993
> 
> 标签：android

我正在编写一个应用程序，当短信到达时查询数据库并回复发件人。

我在 sms 广播接收器中启动了一个 IntentService，因为该过程可能需要一些时间并被系统杀死。

我想知道在启动服务之前是否有必要在广播接收器中获取唤醒锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:52:03.010

BR 会成功的。但是，一旦您调用“startService()”，这项工作就完成了，并且服务还没有启动（只是意图一直到系统。所以 - 是的，确保从收到广播到工作完成后获取 WL 是一种很好的做法。你可以扩展 Application 类，以便从应用程序的不同组件（BR、Service 等）轻松访问您的 WL

# twitter-bootstrap - CakePHP 和 Twitter Bootstrap：表头上的工具提示

> ID：16014058
> 
> 赞同：0
> 
> 时间：2013-04-15T11:29:49.277
> 
> 标签：twitter-bootstrap, cakephp, html-table, tooltip

```
<table>
  <thead>
    <tr>
      <th>...</th>
    </tr>
  </thead>
  <tbody>
    ...
  </tbody>
</table> 
```

我想`<th>`用 Twitter Bootstrap 2 和 CakePHP 2 在表头上实现一个工具提示。工具提示适用于按钮（所以 JQuery 等正在工作）。带有有效工具提示的按钮示例：

```
<?php
echo $this->Form->postLink('Send', array(
    'action' => 'send'), array(
        'class' => 'btn', 
        'title' => 'Send it back', 
        'rel' => 'tooltip', 
        'data-toggle' => 'tooltip', 
        'data-placement' => 'bottom'
));
?> 
```

# c#-4.0 - 使用客户端上下文和 CAML 查询删除共享点列表中的所有行

> ID：16014079
> 
> 赞同：11
> 
> 时间：2013-04-15T11:30:48.997
> 
> 标签：c#-4.0, sharepoint, sharepoint-2010, sharepoint-list, sharepoint-clientobject

我是 SharePoint 新手，想使用 C# **ClientContext**类和**CAML Query**删除 SharePoint 列表中的所有行。

我怎样才能有效地实现它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-16T13:20:25.357

我解决了。学习是我们需要以相反的顺序删除列表中的项目。

**链接**：http: [//msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitemcollection.delete.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splistitemcollection.delete.aspx)

```
ListItemCollection listItems = oList.GetItems(CamlQuery.CreateAllItemsQuery());
clientContext.Load(listItems,
                    eachItem => eachItem.Include(
                    item => item,
                    item => item["ID"]));
clientContext.ExecuteQuery();

var totalListItems = listItems.Count;
Console.WriteLine("Deletion in " + currentListName + "list:");
if (totalListItems > 0)
{
    for (var counter = totalListItems - 1; counter > -1; counter--)
    {
        listItems[counter].DeleteObject();
        clientContext.ExecuteQuery();
        Console.WriteLine("Row: " + counter + " Item Deleted");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T04:07:44.797

另一种解决方法： - 在新列表（说：配置）上创建一个项目（说：deleteAllItems）。

*   使用 CAML 将 deleteAllItems 值从 False 更改为 True。

*   然后，使用工作流程，

    如果 deleteAllItems == True，则删除所有项目。

    将 deleteAllItems 重置为 False。

解决客户端性能问题。:)

# c# - .Net windows 应用程序开发：检测是否需要 SSL 客户端证书以及哪些是有效的

> ID：16014080
> 
> 赞同：0
> 
> 时间：2013-04-15T11:30:52.457
> 
> 标签：c#, authentication, httpwebrequest, client-certificates

以与 IE 处理客户端证书身份验证过程相同的方式，我想从已安装的 .Net 客户端应用程序中执行相同操作，该应用程序连接到我们已设置为需要客户端证书的 Web 服务器。

我知道如何打开选择证书 UI，允许用户从已安装的证书列表中选择客户端证书，然后将证书添加到传出的 HttpWebRequest。

我能弄清楚的是：

1.  如何确定服务器何时需要客户端证书。它不在 HttpResponse 中。状态码是 403 但我无法读取子状态。

2.  然后如何在 UI 中过滤客户端证书以仅列出基于服务器证书（颁发者？）有效的证书。

提前致谢。

# wix - 存在先前版本时的自定义对话框

> ID：16014082
> 
> 赞同：1
> 
> 时间：2013-04-15T11:30:55.483
> 
> 标签：wix

我想自定义我的安装程序以在已安装先前版本时显示自定义对话框。在欢迎对话框之后，用户应该会看到一个自定义对话框，上面写着“以前的版本已经存在，你想继续吗”。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:30:31.770

查看此[文档](http://wix.sourceforge.net/manual-wix3/WixUI_customizations.htm)，在标准 WIX 对话框中添加自定义对话框。您可以使用**升级**来查找安装的先前版本。

将 OnlyDetect 属性设置为 yes，以避免卸载以前的版本。

```
<Upgrade Id="{CE61D541-9988-4DA7-B748-7DF4355C6000}">
   <UpgradeVersion Property="PREVIOUSFOUND"
                   Minimum="1.0.0" IncludeMinimum="yes"
                   Maximum="$(var.Version)" IncludeMaximum="no"
                   OnlyDetect="yes"/>
</Upgrade> 
```

使用**PREVIOUSFOUND**属性从欢迎对话框发布先前版本存在对话框。

```
<Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog"
         Value="PreviousVersionDlg">PREVIOUSFOUND</Publish> 
```

# actionscript - 特定 swf 框架的 png 快照

> ID：16014084
> 
> 赞同：0
> 
> 时间：2013-04-15T11:31:10.373
> 
> 标签：actionscript

我有两个瑞士法郎。第一个是我的 as3 应用程序。第二个是包含 50 个奇数帧。第一个 swf 只有两个元素：一个文本框，其中用户键入一个整数（实际上是第二个 swf 的帧号）和一个 100 x 300 的边框容器。当用户在第一个 swf 文本框中键入一个整数时，我需要从第一个 swf 访问第二个 swf，拍摄用户指定的帧的位图快照，转换为 png（最小分辨率 300 dpi）并将其显示在第一个 swfs 边框容器中。

谁能指导我如何拍摄（或转换）外部 swf 的特定帧并将其传回主（控制）swf 的位图快照？

谢谢

# cakephp - 来自多个控制器的 CakePHP 2 RSS 提要

> ID：16014086
> 
> 赞同：0
> 
> 时间：2013-04-15T11:31:17.227
> 
> 标签：cakephp, rss, cakephp-2.0

我已经使用 RssHelper 创建了一个 RSS 提要，如[http://book.cakephp.org/2.0/en/core-libraries/helpers/rss.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/rss.html)。它位于 app/View/Posts/rss/index.ctp 并且可以在 /posts/index.rss 访问它显示来自 Posts 的 RSS 提要。

我还为新闻、事件等其他控制器创建了 RSS 提要。我想让用户订阅 RSS 提要，以显示来自其他控制器（如新闻、事件等）的所有提要。也就是说，我想组合来自不同控制器的 RSS 提要。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:03:43.020

在任何 Controller 的操作中，您可以加载其他模型 - 例如，在您的 PostsController 中，如下所示：

```
//PostsController
public function rss_combined() {
    $this->loadModel('Event');
    $this->loadModel('News');
    //do whatever logic you want to create a combined RSS
} 
```

或者，如果模型与模型相关联`Post`，您可以通过模型访问方法`Post`：

```
// Instead of this:
$this->loadModel('Event');
$this->Event->myMethod();

// You can do this:
$this->Post->Event->myMethod(); 
```

`DashboardsController`当我需要许多不直接绑定到特定模型的东西时，我经常会创建一个或类似的东西。然后，您可以指定 Dashboard 模型[不使用数据库表](http://book.cakephp.org/2.0/en/models/model-attributes.html#usetable)：

```
public $useTable = false; 
```

# html-table - 在 IE7 中填充空白无法正常工作

> ID：16014089
> 
> 赞同：0
> 
> 时间：2013-04-15T11:31:36.940
> 
> 标签：html-table, internet-explorer-7, padding

我有一个简单的页面，其中包含产品列表（下行）和购物篮（上行）。当我点击产品列表中的任何产品时，它会`img`从产品列表移动`td`到购物篮`td`。它是通过具有一些宽度、高度和 td 填充的表格来实现的。但在 IE7 中，`padding-top`当`td`为空时存在问题。请看这张图片并告诉我，为什么`td`产品列表（灰色的）不受影响`padding-top`？

图片：

![在此处输入图像描述](https://i.stack.imgur.com/bZI0X.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:49:16.997

在 IE 中，如果`td`标签为空，则认为它不存在。在每个没有内容的人中添加一个`&nbsp;`（空间的 HTML 实体）以避免此错误。`td`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:52:44.303

或者，您可能能够使用`border-top`而不是`padding-top`解决此问题。

# php - 尝试仅更新特定行的列值？

> ID：16014090
> 
> 赞同：0
> 
> 时间：2013-04-15T11:31:39.720
> 
> 标签：php, mysql

我的脚本有一些问题，我基本上是将数据输入到 MySQL 表中。此数据将作为 1 行插入到表中。

在将一行数据输入表中后，我希望当前输入的当前/特定行将“account_type”列从其默认值“member”更新为“client”。

这是一个很长的故事，为什么我需要这样做，但我不想简单地输入值“客户”，它必须从“会员”更新为客户。

我拥有的脚本（这是底部的位）目前正在执行此操作，但它会影响表中的所有行，有没有办法我可以在更新中添加 where 子句以说只影响正在输入的当前行并且不更新表中的所有其他行？

```
<?php ob_start(); 
// CONNECT TO THE DATABASE
    require('../../includes/_config/connection.php');
// LOAD FUNCTIONS
    require('../../includes/functions.php');
$username = $_POST['username'];
$password = $_POST['password'];
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$email = $_POST['email'];
$number = $_POST['number'];
$dob = $_POST['dob'];
$accounttype = $_POST['accounttype'];

$query="INSERT INTO ptb_registrations (
username,
password,
firstname,
lastname,
email,
number,
dob,
accounttype,
date_created )
VALUES(
'".$username."',
'".$password."',
'".$firstname."',
'".$lastname."',
'".$email."',
'".$number."',
'".$dob."',
'".$accounttype."',
now()
)";
mysql_query($query) or die();

$query="INSERT INTO ptb_users (
first_name,
last_name,
email,
password )
VALUES(
'".$firstname."',
'".$lastname."',
'".$email."',
MD5('".$password."')
)";
mysql_query($query) or dieerr();
$result = mysql_query("UPDATE ptb_users SET ptb_users.user_id = ptb_users.id,
      ptb_users.account_type = 'Client'"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:39:16.800

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

您可以使用 MySQL 函数[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)来执行此操作。

旧的 ext/MySQL 扩展通过 公开此功能[`mysql_insert_id()`](http://php.net/mysql-insert-id)，但您也可以在查询中直接访问它，并且更干净、更安全。

所以你可以做这样的事情：

```
$result = mysql_query("
    UPDATE ptb_users
    SET ptb_users.user_id = ptb_users.id,
        ptb_users.account_type = 'Client'
    WHERE id = LAST_INSERT_ID()
"); 
```

* * *

我知道你说“这说来话长……”但你所做的几乎没有意义。我只能想象你这样做是因为触发器 - 这很好地说明了为什么触发器通常是一个坏主意;-)

如果可能，请尝试并重新考虑您的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:34:18.900

在第一次查询后获取插入的 ID，然后在更新中使用它（假设您有一个自动递增的主键）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:52:19.017

尝试在唯一列上使用 WHERE 条件

```
 mysql_query("UPDATE ptb_users SET ptb_users.user_id = ptb_users.id,
     ptb_users.account_type = 'Client'" WHERE ptb_user.email='$email'); 
```

# opencv - 使用 cv::Mat 在 OpenCV 2.4.2 中裁剪和保存 ROI 作为新图像

> ID：16014093
> 
> 赞同：8
> 
> 时间：2013-04-15T11:31:55.817
> 
> 标签：opencv, crop, face-detection, roi

从事人脸检测和识别工作，在成功检测到人脸后，我只想裁剪人脸并将其保存在驱动器中的某个位置以提供识别码。我很难将感兴趣的区域保存为新图像。我在网上有一些代码，但它是用以前版本的 OpenCV 编写的，它使用`IplImage*`. 我正在使用 OpenCV 2.4.2，它使用`cv::Mat`.
嘻嘻！！！
如果你们想要的话，我会发布我的代码（人脸检测和识别本身）。

```
#include <cv.h>
#include <highgui.h>
#include <math.h>

// alphablend <imageA> <image B> <x> <y> <width> <height>
// <alpha> <beta>

IplImage* crop( IplImage* src,  CvRect roi)
{

  // Must have dimensions of output image
  IplImage* cropped = cvCreateImage( cvSize(roi.width,roi.height), src->depth, src->nChannels );

  // Say what the source region is
  cvSetImageROI( src, roi );

  // Do the copy
  cvCopy( src, cropped );
  cvResetImageROI( src );

  cvNamedWindow( "check", 1 );
  cvShowImage( "check", cropped );
  cvSaveImage ("style.jpg" , cropped);

  return cropped;
}

int main(int argc, char** argv)
{
  IplImage *src1, *src2;

  CvRect myRect;

  // IplImage* cropped ;
  src1=cvLoadImage(argv[1],1);
  src2=cvLoadImage(argv[2],1);

  {
    int x = atoi(argv[3]);
    int y = atoi(argv[4]);
    int width = atoi(argv[5]);
    int height = atoi(argv[6]);

    double alpha = (double)atof(argv[7]);
    double beta = (double)atof(argv[8]);

    cvSetImageROI(src1, cvRect(x,y,width,height));
    cvSetImageROI(src2, cvRect(100,200,width,height));

    myRect = cvRect(x,y,width,height) ;

    cvAddWeighted(src1, alpha, src2, beta,0.0,src1);

    cvResetImageROI(src1);
    crop (src1 , myRect);

    cvNamedWindow( "Alpha_blend", 1 );
    cvShowImage( "Alpha_blend", src1 );

    cvWaitKey(0);
  }

  return 0;
} 
```

谢谢。和平

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-15T11:59:03.917

使用`cv::Mat`对象将使您的代码更加简单。假设检测到的人脸位于一个名为`faceRect`type的矩形中`cv::Rect`，您只需键入即可获得裁剪版本：

```
cv::Mat originalImage;
cv::Rect faceRect;
cv::Mat croppedFaceImage;

croppedFaceImage = originalImage(faceRect).clone(); 
```

或者：

```
originalImage(faceRect).copyTo(croppedImage); 
```

`cv::Mat`这会从您提供的矩形创建一个临时对象（不复制数据）。然后，通过克隆或复制方法将真实数据复制到您的新对象中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-11T13:28:23.740

为了裁剪区域，使用 ROI（感兴趣区域）。opencv2 很容易完成这项工作。您可以查看链接： http: [//life2coding.blogspot.com/search/label/cropping%20of%20image](http://life2coding.blogspot.com/search/label/cropping%20of%20image)

# python - 使用“case”时得到一个空行（实际上是在使用聚合时）

> ID：16014094
> 
> 赞同：1
> 
> 时间：2013-04-15T11:31:59.573
> 
> 标签：python, sqlite

我正在使用我的 python 脚本查询一个 sqlite 数据库表。

```
SELECT servername, 
     date('now','localtime'),
     sum(CASE WHEN locked="NO" THEN 1 END),
     sum(CASE WHEN locked="YES" THEN 1 END) 
FROM nodes
WHERE servername="SOME_SERVER" 
```

它工作正常（给我服务器名称、今天的日期、未锁定节点的数量和锁定节点的数量）...

...除非查询不匹配（即没有提供的名称的服务器名称）。在这种情况下，查询结果是

> 空，“2013-04-15”，空，空

（为了清楚起见，我添加了空值）

某些服务器没有节点是有效的。如果我从查询中删除“案例”，我不会得到任何查询结果，所以当我不想要一个结果时，它们会导致我得到一个结果。

如何使它在 SQL 查询中不返回任何内容，而无需在 python 中检测它，或事先查询计数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:47:15.717

嗯加个

```
group by servername 
```

如果没有匹配项，则空白行会消失，正如我偶然发现的那样。我在解释这一点时遇到了麻烦，但我*认为*sqlite 文档中涵盖了这一点：

> 如果 SELECT 语句是没有 GROUP BY 子句的聚合查询，则结果集中的每个聚合表达式都会在整个数据集上计算一次。结果集中的每个非聚合表达式都会针对任意选择的数据集行进行一次评估。相同的任意选择的行用于每个非聚合表达式。或者，如果数据集包含零行，则每个非聚合表达式都针对完全由 NULL 值组成的行进行评估。
> 
> 通过计算结果集中的聚合和非聚合表达式创建的单行结果集数据形成了不带 GROUP BY 子句的聚合查询的结果。**没有 GROUP BY 子句的聚合查询总是只返回一行数据，即使有零行输入数据。**

# javascript - 如何使用 AJAX 从网页获取数据？

> ID：16014097
> 
> 赞同：0
> 
> 时间：2013-04-15T11:32:37.510
> 
> 标签：javascript, jquery, html, ajax

我想只使用 javascript 和 ajax 从网页获取数据。我的网页正在返回一个数组，我想在我的 html 页面上显示它。我不能用这个来使用php。

这是我正在使用的代码。

```
<html>
    <head>
        <title>Getting Started Extension's Popup</title>
        <script src="background.js">
        </script>
        <script type="text/javascript">
            $.ajax({
                url:"http://www.mydomain.com/page1.php?url='http://open.live.bbc.co.uk/weather/feeds/en/2643743/3dayforecast.rss'",
                type: 'GET',
                dataType: 'jsonp'
            });

            function callback(data){
                $('#iec_azn_data').html(data.results[0]);
            }
        </script>
    </head>
    <body>
        Hi
        <div id="iec_azn_data">

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:36:45.237

`success`在`$.ajax`选项中分配一个功能。当您的请求成功返回时，将调用该函数。

```
$.ajax({
  url:"http://www.mydomain.com/page1.php?url='http://open.live.bbc.co.uk/weather/feeds/en/2643743/3dayforecast.rss'",
  type: 'GET',
  dataType: 'jsonp',
  success : function(data){
    //data is a variable containing the returned data
  }
}); 
```

# osgi - 仅在 servicemix 上列出捆绑 ID

> ID：16014100
> 
> 赞同：2
> 
> 时间：2013-04-15T11:32:41.563
> 
> 标签：osgi, apache-karaf, osgi-bundle, apache-servicemix

我正在使用 ServiceMix，我试图列出一些捆绑包并仅检索那里的捆绑包 ID。我正在尝试执行以下操作：

> osgi:列表 | grep -i | awk xxx

我尝试使用 awk，但 ServiceMix 中没有提供。我也尝试使用 shell:exec 像这样：

> osgi:列表 | grep -i | 外壳：执行`awk 'xxx'`

但这也不起作用，也许我的方法完全错误。有没有其他人有一些经验如何实现我只检索捆绑包的 ID 的目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-23T20:49:36.440

您可以随时使用 Karaf 的 shell 语言（从 karaf 2.3.1 开始工作）

```
bundles = $.context bundles ;
echo "Printing bundle information" ;
each ($bundles) {
    symbolicName = $it symbolicName ;
    bundleId = (($it bundleid) toString) ;
    echo "Symbolic name : " $symbolicName " Bundle Id : " $bundleId ;
} 
```

运行时，这将输出类似于：

```
Symbolic name :  org.apache.felix.framework  Bundle Id :  0
Symbolic name :  org.ops4j.pax.url.mvn  Bundle Id :  1
Symbolic name :  org.ops4j.pax.url.wrap  Bundle Id :  2
Symbolic name :  org.ops4j.pax.logging.pax-logging-service  Bundle Id :  3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T07:04:35.433

我认为没有 sed/awk 命令。并且 list 命令不能只显示 bundle id。

您可以记录 JIRA 票证以进行增强。也许对于列表命令的选项来选择仅列出的内容（捆绑 ID、捆绑版本、状态等） [http://karaf.apache.org/index/community/support.html](http://karaf.apache.org/index/community/support.html)

# c# - 日期时间格式问题：字符串未被识别为有效的日期时间

> ID：16014101
> 
> 赞同：12
> 
> 时间：2013-04-15T11:32:41.580
> 
> 标签：c#, asp.net, datetime

我想在 C#中将输入字符串格式化为**MM/dd/yyyy hh:mm:ss格式。**
输入字符串的格式`MM/dd/yyyy hh:mm:ss`
例如：`"04/30/2013 23:00"`

我尝试`Convert.ToDateTime()`了函数，但它认为 4 作为日期，3 作为月份，这不是我想要的。实际上月份是 04，日期是 03。

我也尝试`DateTime.ParseExact()`了函数，但是得到了异常。

我收到错误：

> 字符串未被识别为有效的日期时间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-15T11:38:22.060

您的日期时间字符串不包含任何秒数。您需要在格式中反映这一点（删除`:ss`）。
此外，您需要指定`H`而不是`h`使用 24 小时时间：

```
DateTime.ParseExact("04/30/2013 23:00", "MM/dd/yyyy HH:mm", CultureInfo.InvariantCulture) 
```

浏览此处获取更多信息：

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T11:39:34.377

你可以使用[`DateTime.ParseExact()`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)方法。

> 使用指定的格式和特定​​于区域性的格式信息将日期和时间的指定字符串表示形式转换为其等效的 DateTime。**字符串表示的格式必须与指定的格式完全匹配。**

```
DateTime date = DateTime.ParseExact("04/30/2013 23:00", 
                                    "MM/dd/yyyy HH:mm", 
                                    CultureInfo.InvariantCulture); 
```

这是一个[`DEMO`](http://ideone.com/Q93nC3).

`hh`从 01 到 12 表示 12`HH`小时制，从 00 到 23 表示 24 小时制。

如需更多信息，请查看[`Custom Date and Time Format Strings`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T11:38:36.363

试试这个：

```
string strTime = "04/30/2013 23:00";
DateTime dtTime;
if(DateTime.TryParseExact(strTime, "MM/dd/yyyy HH:mm",  
   System.Globalization.CultureInfo.InvariantCulture, 
   System.Globalization.DateTimeStyles.None, out dtTime))
 {
    Console.WriteLine(dtTime);
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-16T05:18:06.133

如果您的字符串是 2019 年 6 月 15 日，这也可能是问题所在。DateTime Parse 预计它是 2019 年 6 月 15 日。

所以首先用斜线分割它

```
var dateParts = "6/15/2019"
var month = dateParts[0].PadLeft(2, '0');
var day = dateParts[1].PadLeft(2, '0');
var year = dateParts[2] 

var properFormat = month + "/" +day +"/" + year; 
```

现在您可以使用 DateTime.Parse(properFormat, "MM/dd/yyyy")。这很奇怪，但这只是对我有用的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T11:38:06.667

改变文化并尝试这样可能对您有用

```
string[] formats= { "MM/dd/yyyy HH:mm" }
var dateTime = DateTime.ParseExact("04/30/2013 23:00", 
     formats, new CultureInfo("en-US"), DateTimeStyles.None); 
```

检查详细信息：[DateTime.ParseExact 方法（String、String[]、IFormatProvider、DateTimeStyles）](http://msdn.microsoft.com/en-us/library/332de853.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-18T13:51:54.863

```
DateTime dt1 = DateTime.ParseExact([YourDate], "dd-MM-yyyy HH:mm:ss",  
                                           CultureInfo.InvariantCulture); 
```

请注意使用 HH（24 小时制）而不是 hh（12 小时制），以及 InvariantCulture 的使用，因为某些文化使用斜线以外的分隔符。

例如，如果文化是 de-DE，则格式“dd/MM/yyyy”将期望句点作为分隔符 (31.01.2011)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-30T07:04:55.580

**下面的代码对我有用：**

```
string _stDate = Convert.ToDateTime(DateTime.Today.AddMonths(-12)).ToString("MM/dd/yyyy");
String format ="MM/dd/yyyy";
IFormatProvider culture = new System.Globalization.CultureInfo("fr-FR", true);
DateTime _Startdate = DateTime.ParseExact(_stDate, format, culture); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-24T13:49:11.853

您可以使用这种类型格式（从 sql server 获取格式化数据）

* * *

FORMAT(转换(日期时间,'16/04/2018 10:52:20',103),'dd/MM/yyyy HH:mm:ss','en-us')

* * *

转换（VARCHAR，转换（日期时间，'16/04/2018 10:52:20'，103），120）

# delphi - Delphi XE3 Firemonkey 自动调整大小/布局问题

> ID：16014102
> 
> 赞同：0
> 
> 时间：2013-04-15T11:32:42.817
> 
> 标签：delphi, firemonkey, autosize

使用 Firemonkey，我有一个 TVertScrollBox，其中包含一个 TPanel，该 TPanel 动态填充了许多以下 TDisplayItem 对象。

问题是 TDisplayItem 的大小不正确，因此各种组件上的文本被叠加等。

我可以通过获取组件的大小并使容器的大小等来解决滚动框可见区域中的项目的问题。我尝试刷新和 application.ProcessMessages 来调整所有内容的大小以及各种对齐和扭曲选项，但无济于事。

希望我错过了其中的一个关键因素，并且没有发现 Firemonkey 的限制！

干杯，

马丁。

```
Constructor TDisplayItem.Create(owner : TComponent);
begin
  inherited Create(owner);
  Align := TAlignLayout.alTop;
  pnlLabels := TPanel.Create(nil);
  pnlLabels.Align := TAlignLayout.alTop;
  pnlLabels.Height := 50;
  pnlLabels.Parent := self;

  lblICAO := TLabel.Create(nil);
  lblICAO.Parent := pnlLabels;
  with lblICAO do
  begin
    text := 'ICAO';
    Height := 30;
    Position.X := 10;
    align := TAlignLayout.alTop;
    TextAlign := TTextAlign.taCenter;
    Font.Size := 18;
    FontColor :=  $FF00D000 ;
    Visible := False;
    StyledSettings := [TStyledSetting.ssFamily];//, TStyledSetting.ssFontColor];
  end;

  lblFrom := TLabel.Create(nil);
  lblFrom.Parent := pnlLabels;
  with lblFrom do
  begin
    text := 'From : ';
    Height := 30;
    Position.X := 10;
    Position.y := 2;
    width := 150;
    FontColor :=  $FFFF0000 ;
    StyledSettings := [TStyledSetting.ssFamily];//, TStyledSetting.ssFontColor];
  end;

  lblTo := TLabel.Create(nil);
      lblTo.Parent := pnlLabels;
  with lblTo do
  begin
    text := 'To : ';
    Height := 30;
    Position.X := 170;
    Position.y := 2;
    width := 150;
    FontColor :=  $FFFF0000 ;
    StyledSettings := [TStyledSetting.ssFamily];//, TStyledSetting.ssFontColor];
  end;

 lblStatus := TLabel.Create(nil);
  lblStatus.Parent := pnlLabels;
  with lblStatus do
  begin
    text := 'Status : ';
    Height := 30;
    Position.X := 330;
    Position.y := 2;
    width := 100;
    Font.Size := 10;
    FontColor :=  $FFFF0000 ;
    StyledSettings := [TStyledSetting.ssFamily];//, TStyledSetting.ssFontColor];
  end;

  lblNonGeog  := TLabel.Create(nil);
  with lblNonGeog do
  begin
    text := 'Non-Geog : ';
    Height := 30;
    Position.X := 440;
    Position.y := 2;
    width := 150;
    Font.Size := 10;
    FontColor :=  $FFFF0000 ;
    StyledSettings := [TStyledSetting.ssFamily];//, TStyledSetting.ssFontColor];
  end;
  lblNonGeog.Parent := pnlLabels;

  memItem := TLabel.Create(nil);
  memItem.Parent := self;
  with memItemE do
  begin
    Align := TAlignLayout.alTop;
    DisableFocusEffect := False;
    AutoSize := True;
    WordWrap := True;
  end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:31:02.857

好的，终于解决了。我在正确的路线上认为这是一个绘图问题 - 当其中一个标签的文本被更改时，需要 label.dopaint。这会更新标签的高度，即使它不在显示区域中。然后，父 TPanel 可以通过对子组件的高度求和来正确设置它的高度。

# android - achartengine - 不知道如何使用日期作为 x 轴 - 我保存的文件是空的

> ID：16014103
> 
> 赞同：0
> 
> 时间：2013-04-15T11:32:44.973
> 
> 标签：android, achartengine

我有一个活动，我从编辑文本中获取输入并将其存储在列表中。

我还将当前日期存储在列表中。

然后，我按下保存上述内容的保存按钮。

第二天用户再输入一些数据并保存等等。

我想用 x 轴日期格式和 y 轴用户输入的值制作一个图。

在一项活动中，我有：

```
...
String filename = "data.csv";    
List<Double> mydata=new ArrayList<Double>();
List<Date> mydate=new ArrayList<Date>();

....value=(EditText) findViewById(R.id.enter_data);
...
switch (v.getId()){
        case R.id.savebtn:
            savefunc();

            break;
        case R.id.graphicsbtn: 

            Intent i = new Intent();        
            i.setClassName(this,LineGraph.class.getName());                 
            this.startActivity(i);  
            break;

   public void savefunc(){

    SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
    Date d=new Date();
    try{
     d=thedate.parse(filename);
    mydate.add(d);
    }
    catch  (ParseException e){
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    double thedata=Double.parseDouble(value.getText().toString().trim());
    mydata.add(thedata);
..
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
    for (int i=0;i<mydate.size();i++){
       bw.write(mydate.get(i)+","+mydata.get(i)+"\n");
   ... 
```

在 LineGraph 活动中：

```
public class LineGraph extends Activity {

    private static List<Date> date = new ArrayList<Date>();
private static List<Double> data = new ArrayList<Double>();

    public Intent getIntent(Context context){

           readfunc();

      TimeSeries series = new TimeSeries("Showing data");
    for (int i=0;i<date.size();i++){    
        series.add(date.get(i),data.get(i));    

    } 
```

读取功能：

```
public void readfunc(){

    SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
    Date d=new Date();
    try{
     d=thedate.parse(filename);
    }
    catch.. 
    BufferedReader br = new BufferedReader(new InputStreamReader(fis));

         do {
             s = br.readLine();     
             if (s != null ){
                 String[] splitLine = s.split(",");
                 date.add(d);//Double.parseDouble(splitLine[0]));
                 data.add(Double.parseDouble(splitLine[1])); 
```

我有这些问题：

1）我收到的文件是空的（日期有问题，因为保存和读取文件的方法有效）。

2）在图形屏幕上出现白色背景（当然没有数据，因为文件是空的），但为什么是白色背景？我将相同的代码用于其他目的，我没有收到白色背景。

3）我不确定如何在 x 轴上使用 Dates。我应该使用 List 吗？列表 ？.

- - - - - - - - - - - - 更新 - - - - - - - - - - - - - --------------------------------

好的，最后！（根据用户“Dan”的建议）

我用了`ChartFactory.getTimeChartView(this, dataset, mRenderer,"dd/MM/yyyy");`

代替`ChartFactory.getLineChartIntent(context, dataset, mRenderer,"dd/MM/yyyy");`

而且您不需要使用 String List ，只需使用 Date List

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:21:25.643

处理您的文件的代码必须是这样的（未编译）：

```
public void savefunc(){
    List<String> myDate = new ArrayList<String>(); //To store the formatted dates
    SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
    Date d=new Date(); //the current date
    String sd = thedate.format(d); // sd contains "16/04/2013", the formatted date
    myDate.add(sd);

    double thedata=Double.parseDouble(value.getText().toString().trim());
    mydata.add(thedata);
    ...
    BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
    for (int i=0;i<mydate.size();i++){
       bw.write(mydate.get(i)+","+mydata.get(i)+"\n");
    }
}

public void readfunc(){

    SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
    Date d;
    BufferedReader br = new BufferedReader(new InputStreamReader(fis));

    do {
        s = br.readLine();     
        if (s != null ){
            String[] splitLine = s.split(","); //first substring is the formatted date
            date.add(thedate.parse(splitLine[0])); //do something with exception
            data.add(Double.parseDouble(splitLine[1]));
... 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:05:14.390

对于动态图，使用 GraphicalView 而不是 intent::

```
 public GraphicalView mChartView; 
```

创建一个 xml::

```
<RelativeLayout 
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   xmlns:android="http://schemas.android.com/apk/res/android">

<LinearLayout
    android:id="@+id/graph"
    android:layout_width="fill_parent"
    android:layout_height="145dip" >

  </LinearLayout>
</RelativeLayout> 
```

然后在你的代码中：

```
 LinearLayout layout = (LinearLayout) findViewById(R.id.graph);
 mChartView = ChartFactory.mChartView = ChartFactory.getLineChartView(getBaseContext(), dataset, renderer)
 layout.addView(mChartView); 
```

*   输入您从编辑文本字段中读取的值后：

*   然后您传递新值以添加到相应的数组列表中

*   那么您应该在添加新值后再次调用线图的代码，并记住在读取数组列表（即。`dataset.clear();`）之前清除系列，即。当行代码功能从头开始添加 dataset.clear(); 因为如果您不清除数据将重叠，并且可能通过异常或行可能会在旧数据中看起来很厚......

然后调用`mChartView.repaint();`刷新图

**这些链接也会帮助你链接[1](https://stackoverflow.com/questions/10630898/how-to-draw-a-line-dynamically-in-android?rq=1) [链接2](https://stackoverflow.com/questions/7955411/dynamically-draw-lines-between-multiple-geopoints-in-android-mapview)**

# c# - 通过 .NET Remoting 实现内部接口

> ID：16014106
> 
> 赞同：0
> 
> 时间：2013-04-15T11:32:49.820
> 
> 标签：c#, .net, .net-remoting, internalsvisibleto

我有一个内部接口，我需要通过 .NET 远程处理来实现，以确保只有我们的程序集远程调用这些成员（使用 InternalsVisibleTo 来授予对朋友程序集的访问权限）。但是，当我实现接口并构建它时，出现以下错误：

```
'AssemblyName' does not implement interface member 'InterfaceMember1(...)' 'AssemblyName' cannot implement an interface because it is not public. 
```

我无法搜索并找到一种方法来完成这项工作。但是，我明确实现了允许我的程序集构建的接口，并且我可以毫无问题地从任何朋友程序集中调用远程方法。

我担心我在这个主题上发现的信息缺乏，特别是在 MSDN 和 StackOverflow 上。通过内部接口实现 .NET 远程处理有什么问题吗？如果是这样，为什么？

**编辑** 这是我的界面和实现的样子：

界面

```
internal interface IAdmin
{
    bool TESTPING();
    bool AdminTask1(int val);
    ...
} 
```

执行

```
public class RService : MarshalByRefObject, IAdmin
{
    //IAdmin members

    bool IAdmin.TESTPING()
    {
        return true;
    }

    bool IAdmin.AdminTask1(int val)
    {
        // do stuff
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:37:08.030

MSDN： http: [//msdn.microsoft.com/en-us/library/ms182313 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms182313(VS.80).aspx)

> 接口方法具有公共可访问性，不能由实现类型更改。内部接口创建一个不打算在定义接口的程序集之外实现的协定。使用 virtual 修饰符实现内部接口方法的公共类型允许该方法被程序集外部的派生类型覆盖。如果定义程序集中的第二种类型调用该方法并期望一个仅限内部的协定，则当执行外部程序集中的重写方法时，行为可能会受到影响。这会产生安全漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:37:35.340

您无法以这种方式实现安全功能。远程规范是开放的，因此任何人都可以创建消息，将其发送到您的远程班级并接收响应。您的服务无法可靠地确定是谁调用了它。

您可以实现自定义授权，并在每个方法调用中发送一个秘密令牌，以确保只有您的代码调用它。

# svn - SVN 使用 uuid 重定位问题

> ID：16014108
> 
> 赞同：5
> 
> 时间：2013-04-15T11:15:13.667
> 
> 标签：svn, working-copy, svn-switch

我有一个关于`svn switch --relocate`. 我有一个旧存储库`beta`，我们正在迁移到新的 SVN 服务器。在那里，我创建了一个名为`legacy`并提交了存储库中的所有文件的新`beta`存储库。现在我需要更新所有工作副本以使用 repo `legacy`。当我为此执行命令时，它说 UUID 不匹配：

```
svn switch --relocate file:///var/www/svn/beta https://domain.com/svn/legacy

svn: The repository at 'https://domain.com/svn/legacy' has uuid '3e359681-0317-844a-a84c-80a4a624e59d', but the WC has '35afee29-560b-4976-914e-5bafcd58a7c0' 
```

如何修复它以使工作副本连接到旧版存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:10:58.363

如果它们具有不同的 UUID（它们是“不相关的”），则无法在存储库之间切换。你必须做

*   新的新鲜结帐从`legacy`

或者

*   [setuuid](http://svnbook.red-bean.com/en/1.7/svn.ref.svnadmin.c.setuuid.html) legacy 用于使用 beta 的 UUID

# node.js - 无法在 node.js 中安装业力

> ID：16014112
> 
> 赞同：1
> 
> 时间：2013-04-15T11:33:12.427
> 
> 标签：node.js, npm

这是我得到的：

```
H:\>npm install -g karma npm http GET https://registry.npmjs.org/karma npm http GET https://registry.npmjs.org/karma npm http GET https://registry.npmjs.org/karma 
npm ERR! Error: connect ETIMEDOUT npm ERR!
     at errnoException (net.js:878:11) npm ERR!
     at Object.afterConnect [as oncomplete] (net.js:869:19) 
npm ERR! If you need help, you may report this log at: npm ERR!     <http://github.com/isaacs/npm/issues> npm ERR! or email it to: npm ERR!
     <npm-@googlegroups.com>
npm ERR! System Windows_NT 6.1.7601 
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\no ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "-g" "karma" 
npm ERR! cwd H:\ 
npm ERR! node -v v0.10.3 
npm ERR! npm -v 1.2.17 
npm ERR! syscall connect npm ERR! code ETIMEDOUT 
npm ERR! errno ETIMEDOUT 
npm ERR! 
npm ERR! Additional logging details can be found in: 
npm ERR!     H:\npm-debug.log npm ERR! not ok code 0 
```

我是 node.js 的新手。我只使用它是因为我想使用 Karma 对我的 angularjs 应用程序进行单元测试。

知道发生了什么吗？

编辑日志文件

```
0 info it worked if it ends with ok
1 verbose cli [ 'C:\\Program Files\\nodejs\\\\node.exe',
1 verbose cli   'C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js',
1 verbose cli   'install',
1 verbose cli   '-g',
1 verbose cli   'karma' ]
2 info using npm@1.2.17
3 info using node@v0.10.3
4 verbose node symlink C:\Program Files\nodejs\\node.exe
5 verbose read json C:\Users\berthelots\AppData\Roaming\npm\package.json
6 verbose read json C:\Users\berthelots\AppData\Roaming\npm\package.json
7 verbose cache add [ 'karma', null ]
8 verbose cache add name=undefined spec="karma" args=["karma",null]
9 verbose parsed url { protocol: null,
9 verbose parsed url   slashes: null,
9 verbose parsed url   auth: null,
9 verbose parsed url   host: null,
9 verbose parsed url   port: null,
9 verbose parsed url   hostname: null,
9 verbose parsed url   hash: null,
9 verbose parsed url   search: null,
9 verbose parsed url   query: null,
9 verbose parsed url   pathname: 'karma',
9 verbose parsed url   path: 'karma',
9 verbose parsed url   href: 'karma' }
10 silly lockFile 512423cb-karma karma
11 verbose lock karma C:\Users\berthelots\AppData\Roaming\npm-cache\512423cb-karma.lock
12 silly lockFile 512423cb-karma karma
13 silly lockFile 512423cb-karma karma
14 verbose addNamed [ 'karma', '' ]
15 verbose addNamed [ null, '' ]
16 silly lockFile cd7961bb-karma karma@
17 verbose lock karma@ C:\Users\berthelots\AppData\Roaming\npm-cache\cd7961bb-karma.lock
18 silly addNameRange { name: 'karma', range: '', hasData: false }
19 verbose url raw karma
20 verbose url resolving [ 'https://registry.npmjs.org/', './karma' ]
21 verbose url resolved https://registry.npmjs.org/karma
22 info trying registry request attempt 1 at 13:28:17
23 http GET https://registry.npmjs.org/karma
24 info retry will retry, error on last attempt: Error: connect ETIMEDOUT
25 info trying registry request attempt 2 at 13:28:48
26 http GET https://registry.npmjs.org/karma
27 info retry will retry, error on last attempt: Error: connect ETIMEDOUT
28 info trying registry request attempt 3 at 13:30:09
29 http GET https://registry.npmjs.org/karma
30 silly lockFile cd7961bb-karma karma@
31 silly lockFile cd7961bb-karma karma@
32 error Error: connect ETIMEDOUT
32 error     at errnoException (net.js:878:11)
32 error     at Object.afterConnect [as oncomplete] (net.js:869:19)
33 error If you need help, you may report this log at:
33 error     <http://github.com/isaacs/npm/issues>
33 error or email it to:
33 error     <npm-@googlegroups.com>
34 error System Windows_NT 6.1.7601
35 error command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "-g" "karma"
36 error cwd H:\
37 error node -v v0.10.3
38 error npm -v 1.2.17
39 error syscall connect
40 error code ETIMEDOUT
41 error errno ETIMEDOUT
42 verbose exit [ 1, true ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:25:49.373

备查：

检查您的代理是否允许连接。否则请参阅[此问题](https://github.com/isaacs/npm/issues/3130)如何为 npm 设置代理。

# android - 使用 Facebook SDK 3.0.1 for Android 获取电子邮件地址

> ID：16014117
> 
> 赞同：1
> 
> 时间：2013-04-15T11:33:37.770
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk, facebook-sdk-3.0

我目前正在开发一个应用程序，旨在通过使用 Facebook 帐户对任何用户进行身份验证。

我在从用户帐户获取用户电子邮件时遇到问题。我的代码如下

```
 private void signInWithFacebook() {

    SessionTracker mSessionTracker = new SessionTracker(getBaseContext(), new StatusCallback() {

        public void call(Session session, SessionState state, Exception exception) {

        }
    }, null, false);

    String applicationId = Utility.getMetadataApplicationId(getBaseContext());
    Session mCurrentSession = mSessionTracker.getSession();

    if (mCurrentSession == null || mCurrentSession.getState().isClosed()) {
        mSessionTracker.setSession(null);
        Session session = new Session.Builder(getBaseContext()).setApplicationId(applicationId).build();
        Session.setActiveSession(session);
        mCurrentSession = session;
    }

    if (!mCurrentSession.isOpened()) {
        Session.OpenRequest openRequest = null;
        openRequest = new Session.OpenRequest(FacebookLoginActivity.this);

        if (openRequest != null) {
            openRequest.setDefaultAudience(SessionDefaultAudience.FRIENDS);
            openRequest.setPermissions(Arrays.asList("user_birthday", "email", "user_location"));
            openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);

            mCurrentSession.openForRead(openRequest);
        }
    }else {
        Request.executeMeRequestAsync(mCurrentSession, new Request.GraphUserCallback() {
              public void onCompleted(GraphUser user, Response response) {
                  Log.w("myConsultant", user.getId() + " " + user.getName() + " " + user.getLink() + "  "+ response);
              }
            });
    }
} 
```

我正在使用适用于 Android 的 Facebook SDK 3.0.1。我已设置 Facebook Graph Api 所需的权限。在响应xml中，没有像电子邮件这样的字段。Facebook Sdk 文档不够好，我不知道如何获取电子邮件地址。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T01:24:42.967

电子邮件不是返回的默认字段。相反，您应该创建一个 meRequest，并向其传递一个参数，例如：fields=email。

```
Request me = Request.newMeRequest(mCurrentSession, new GraphRequestCallback() {...});
Bundle params = me.getParameters();
params.putString("fields", "email,name");
me.setParameters(params);
me.executeAsync(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-26T02:52:14.690

您在常规情况下就像这样打电话 - 唯一不同的是您不能直接 user.email

System.out.println(user.asMap().get("email").toString());

常规的 ：

```
 @Override
        public void onClick(View v) {
            // start Facebook Login
            Session.openActiveSession(Giris.this, true, new Session.StatusCallback() {

              // callback when session changes state
              @Override
              public void call(Session session, SessionState state, Exception exception) {
                if (session.isOpened()) {

                  // make request to the /me API
                  Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    // callback after Graph API response with user object
                    @Override
                    public void onCompleted(GraphUser user, Response response) {
                      if (user != null) {
                          System.out.println(user.getName());
                          System.out.println(user.getBirthday());
                          System.out.println(user.getFirstName());
                          System.out.println(user.getLastName());
                          System.out.println(user.getLink());
                          System.out.println(user.getUsername());
                          System.out.println(user.getLocation());
                          System.out.println("facebook user id" + user.getId());
                         System.out.println(user.asMap().get("email").toString());
                         // Session.OpenRequest open = new Session.OpenRequest(Login)
                      }
                    }
                  });
                }
              }
            });
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T10:00:48.843

只需调用此方法即可将用户电子邮件 ID 返回给您。

```
private void doSocialNetworkinWithFacebook()
    {
        // check for session 
         Session session=Session.getActiveSession();
         if (session != null && session.isOpened()) 
             {  
                // user is already login show
                    try
                        {
                            Session.OpenRequest request = new Session.OpenRequest(this);
                            request.setPermissions(Arrays.asList("email", "publish_actions"));
                        }
                    catch (Exception e)
                        {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                 Request.executeMeRequestAsync(session, new Request.GraphUserCallback() 
                        {
                          // callback after Graph API response with user object

                          @Override
                          public void onCompleted(GraphUser user, Response response) 
                          {
                              if (user != null) 
                               {
                                   Toast.makeText(activity, "Welcome  "+user.getName(), Toast.LENGTH_SHORT).show();
                                  // publishFeedDialog(session);
                                    try
                                        {
                                            strFirstName = user.getFirstName().toString();
                                            strLocation = user.getLocation().getProperty("name").toString();
                                            strEmail = user.asMap().get("email").toString();

                                        }
                                    catch (Exception e)
                                        {
                                            // TODO Auto-generated catch block
                                            e.printStackTrace();
                                            strEmail="";
                                        }

                                    runOnUiThread(new Runnable()
                                        {
                                            public void run()
                                                {
                                                    setUserInfoFromFacebook(strFirstName, strLocation, strEmail);
                                                }
                                        });
                                }
                          }
                    });

             }
         else
             {
                 // user is not log in 
                 //show  login screen

                // start Facebook Login

                    try
                        {
                            Session.OpenRequest request = new Session.OpenRequest(this);
                            request.setPermissions(Arrays.asList("email", "publish_actions"));
                        }
                    catch (Exception e)
                        {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                 Session.openActiveSession(activity, true, new Session.StatusCallback() 
                 {

                     // callback when session changes state
                    @Override
                    public void call(final Session session, SessionState state, Exception exception) 
                    {
                        //session.openForRead(new Session.OpenRequest(this).setPermissions(Arrays.asList("email")));
                        Log.d(TAG, "Session :"+session.toString());
                        Log.d(TAG, "Session is opened :"+session.isOpened());

                        if (session.isOpened()) 
                        {                               
                            // make request to the /me API

                            Request.executeMeRequestAsync(session, new Request.GraphUserCallback()

                                {
                                  // callback after Graph API response with user object
                                  @Override
                                  public void onCompleted(GraphUser user, Response response) 
                                  {
                                      if (user != null) 
                                       {

                                           Toast.makeText(activity, "Welcome  "+user.getName(), Toast.LENGTH_SHORT).show();
                                          // publishFeedDialog(session);
                                           try
                                            {
                                                    strFirstName = user.getFirstName().toString();
                                                    strLocation = user.getLocation().getProperty("name").toString();
                                                    strEmail = user.asMap().get("email").toString();
                                            }
                                        catch (Exception e)
                                            {
                                                // TODO Auto-generated catch block
                                                e.printStackTrace();
                                                strEmail="";
                                            }

                                            runOnUiThread(new Runnable()
                                                {
                                                    public void run()
                                                        {
                                                            setUserInfoFromFacebook(strFirstName, strLocation, strEmail);
                                                        }
                                                });
                                        }
                                  }
                            });

                        }
                        else if(session.isClosed())
                            {
                                 Toast.makeText(activity, "Unable to connect facebook, please try later..",Toast.LENGTH_SHORT).show();
                            }

                    }
                  });
             }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-14T11:26:44.807

首先添加适当的权限，然后使用该`getProperty`功能获取电子邮件。

```
permissions = Arrays.asList("email","languages","user_location","user_likes",    "user_education_history","user_work_history","user_hometown","user_about_me","user_status");

  Log.i(TAG, "user_email    : " + user.getProperty("email")); 
```

# build - 保存文件时，构建以崇高的文本打开 2

> ID：16014120
> 
> 赞同：1
> 
> 时间：2013-04-15T11:33:46.767
> 
> 标签：build, sublimetext2, sublimetext

我遇到了崇高文本的问题。

每当我使用命令 S 保存文件时，它都会打开我的构建。我已经将我的构建设置为 Firefox，保存在 Packages/User/Firefox.sublime-build 下使用命令 B 打开我的构建仍然有效，但每当我想保存文件时，它也会打开构建...

# java - 使用 String.charAt() 的错误工作扫描仪

> ID：16014121
> 
> 赞同：0
> 
> 时间：2013-04-15T11:33:52.147
> 
> 标签：java, file

我在项目中使用 Scanner 时遇到问题。我有一个带有这样字符串的文件：

*   姓名 = 乔恩
*   计数 = 100
*   1ip = 127.0.0.7
*   结束=文件

我将所有这些字符串添加到数组中，并且该数组添加到两个 ArrayList 中。我不需要以数字开头的线女巫。比如“1ip”。所以我试着跳过它。

这就是我的方法代码：

```
 public void scan_file() throws IOException{
      Scanner sc = null;         
      String [] array_string;
      String not_sring;

      try{  
              File out = new File("file.txt");          
          sc = new Scanner(out);
          while(sc.hasNextLine()){
          not_sring=sc.nextLine();
           if(not_sring.charAt(0)>='0' && not_sring.charAt(0)<='9'){
                array_string = sc.nextLine().split("=");
            }
           else{
               array_string=sc.nextLine().split("=");
               for (int i=0; i<array_string.length; i++)
                for(int j=1; j<array_string.length; j++){
                           list_id.add(array_string[i]);
                           list_value.add(array_string[j]);     
                     }
               }
        }
      }

         catch(FileNotFoundException e) {
                 //e.printStackTrace(System.out);
                 System.out.println("File not found");
                 scan_file();
         } 
        sc.close();} 
```

而这一切都行不通。如果有人理解我的英语和我的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:39:33.333

您在循环中调用了两次`nextLine()`，这当然是您的问题之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:41:30.937

如果你想跳过一行，只需继续下一个循环迭代：

```
 if(not_sring.charAt(0)>='0' && not_sring.charAt(0)<='9'){
     continue; // This will skip to the next while iteration begining with the conditional check
 } 
```

如果您的格式`id=value`不是使用：

```
 array_string=not_sring.split("="); // No need to use nextLine again as it will overwrite the current line read into not_sring
    list_id.add(array_string[0]); 
    list_value.add(array_string[1]); 
```

这是假设文件格式是正确的描述。`else`这些块之间不再需要了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:56:22.860

```
try{  
          File out = new File("file.txt");          
          sc = new Scanner(out);
          while(sc.hasNextLine()){
              not_sring=sc.nextLine();
              if(!Character.isDigit(not_sring.charAt(0))){
                array_string = not_sring.split("=");
                list_id.add(array_string[0]);
                list_value.add(array_string[1]);
              }
          }

} 
```

检查这个，你不需要循环，你需要一个 if 块，否则字符串将被丢弃。

# pip - 如何让 pip 使用 https 获取包？

> ID：16014122
> 
> 赞同：3
> 
> 时间：2013-04-15T11:33:54.097
> 
> 标签：pip

我在防火墙后面使用 Python，其中某些资源和 URL 被阻止，但我可以使用 https 访问它们。

当我尝试使用 pip 安装软件包时，它抱怨 MD5 哈希错误，因为它实际上检索的是代理服务器的拒绝页面。

如何让 pip 使用 https？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:50:05.790

好的，事实证明我使用的是 pip 1.1。正如聚光灯在他的评论中指出的那样，https 自 1.3 起默认启用。

# c# - 是否可以验证发布的文件是否为 pdf？

> ID：16014123
> 
> 赞同：6
> 
> 时间：2013-04-15T11:33:55.323
> 
> 标签：c#, asp.net, pdf

conserned网站的主要工作是接受用户的文件并保存。直到 2 个月前，当我被告知要强制执行仅接受 pdf 文件的约束时，一切都很好。

在此之前，用户习惯于提交从文本、rtf 到好的 pdf 的各种格式。

我通过检查文件扩展名应用了约束——简单对吗？但是，当管理员检查这些文件时，有 60% 的文件已损坏。

我花了很多不眠之夜来确定损坏的原因，然后突然我想可能是他们提交了损坏的文件。

我获取了以前的记录，并确定了一些我们从中获取损坏文件的用户最喜欢的文件类型格式。

我把扩展改回了最喜欢的扩展和繁荣..文件打开了。

然而，尽管我用粗体字告诉用户如何将文件转换为 pdf 一些（很多）只是改变了扩展和提交，但我才知道。由于该网站不奖励用户。提交的文件管理人员对我抱怨。有什么方法可以在不依赖扩展名的情况下检查文件是否为pdf？

我在 c# 3.5 asp.net 中使用文件上传

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-15T11:54:59.720

由于所有 PDF 文件都以 ASCII 字符串“%PDF-”开头，因此只需测试文件的前几个字节以确保它们以该字符串开头。

```
bool IsPdf(string path)
{
    var pdfString = "%PDF-";
    var pdfBytes = Encoding.ASCII.GetBytes(pdfString);
    var len = pdfBytes.Length;
    var buf = new byte[len];
    var remaining = len;
    var pos = 0;
    using(var f = File.OpenRead(path))
    {
        while(remaining > 0)
        {
            var amtRead = f.Read(buf, pos, remaining);
            if(amtRead == 0) return false;
            remaining -= amtRead;
            pos += amtRead;
        }
    }
    return pdfBytes.SequenceEqual(buf);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T16:09:08.490

我发现[这个站点](http://www.garykessler.net/library/file_sigs.html)在帮助确定文件是否与其扩展名匹配方面非常有用。这是一个巨大的文件签名列表，您可以将其与 spender 的代码一起使用。

# c# - Jquery Ajax Post 后部分视图刷新

> ID：16014129
> 
> 赞同：5
> 
> 时间：2013-04-15T11:34:20.627
> 
> 标签：c#, jquery, ajax, asp.net-mvc-4, jquery-datatables

在我的 c# MVC4 应用程序中，我正在使用两个局部视图。Partial View 1 位于 ID 为 Partial_Analysis 的 div 中，Partial View 2 位于 ID 为 Display_Average 的 div 中。每个视图都包含一个 datatables.net 数据表。当在部分视图 1 中的表中选择一行时，会生成一个 jquery ajax 帖子，导致部分视图 2 使用更新的数据表刷新，该数据表显示基于在部分视图 1 中进行的行选择的结果。

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('.rowselection').click(function (e) {
            var tdata = $('#form1').serialize();
            $.ajax({
                type: "POST",
                data: tdata,
                url: "Home/PartialAverage",
                success: function (result) { success(result); }
            });
        });

        function success(result) {
            $("#Display_Average").html(result);
        }
    });
</script> 
```

单击特定按钮时，会刷新局部视图 1。

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('#ChangeName').click(function (e) {
            var tdata = $('#form1').serialize();
            var origname = $('#NameDiv').find('input[name="Name"]').first().val();
            var newname = $('#NameDiv').find('input[name="updatedName"]').first().val();
            $.ajax({
                type: "POST",
                data: {
                    mCollection: tdata,
                    Name: origname,
                    updatedName: newname
                },

                url: "Home/ChangeName",
                success: function (result) { success(result); }
            });
        });

        function success(result) {
            $("#Partial_Analysis").html(result);
        }
    });
</script> 
```

在刷新局部视图 1 后，我希望第二个局部视图也刷新。我试过这个导致无限循环。

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('#Partial_Analysis').ajaxSuccess(function (e) {
            var tdata = $('#form1').serialize();
            $.ajax({
                type: "POST",
                data: {
                    mCollection: tdata,
                },

                url: "Home/PartialAverage",
                success: function (result) { success(result); }
            });
        });

        function success(result) {
            $("#Display_Average").html(result);
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T11:56:09.003

`ajaxSuccess`是一个全局处理程序，只要收到对 ajax 调用的响应，就会调用它。在其中执行另一个 ajax 调用肯定会导致无限循环。

这里最好的选择可能是在`success`第一个部分视图的处理程序中更新第二个表：

```
function success(result) {
    $("#Partial_Analysis").html(result);

    reloadDisplayAverage();
}

function reloadDisplayAverage() {   
    var tdata = $('#form1').serialize();
    $.ajax({
        type: "POST",
        data: {
            mCollection: tdata,
        },
        url: "Home/PartialAverage",
        success: function (result) { success(result); }
    });

    function success(result) {
        $("#Display_Average").html(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T08:49:59.553

如果响应是 ajax 响应...那么

```
 $.ajax({
                url: 'Home/PartialAverage',
                data: {mCollection: tdata,},
                type: 'POST',
                success: function (result) {

                    $("#Display_Average").html(data);
                }
            }); 
```

这应该对你有用..它对我有用....

# inversion-of-control - 动态实例化对象时，如何将实现连接到结构图中的关闭类型

> ID：16014130
> 
> 赞同：1
> 
> 时间：2013-04-15T11:34:22.200
> 
> 标签：inversion-of-control, structuremap

我有一个项目，它有命令和命令执行器类，它们接受给定的命令并做一些事情。

我使用结构映射和泛型来为我想在我的系统中运行的任何给定命令查找和创建执行器的实例。

例如：

我有一个基本执行程序类

```
public abstract class BaseExecutor<T> : IExecutor<T>
{
//do something
} 
```

这是一个执行器的示例，它应该由结构映射为以下命令类创建：MyFakeCommand

```
public class MyFakeCommandExecutor : BaseExecutor<MyFakeCommand>
{
    public void Run(MyFakeCommand cmd)
    {
        //do something
    }
} 
```

要将执行程序连接到命令，请通过调用 ConnectImplementationsToTypesClosing 配置结构映射。

```
public void RegisterExecutionAssembly<T>()
{
    IocContainer.Configure(c => c.Scan(scanner =>
    {
        scanner.AssemblyContainingType<T>();
        scanner.ConnectImplementationsToTypesClosing(typeof(IExecutor<>));
    }));
} 
```

并找到给定命令的执行者，我调用以下命令

```
public IExecutor<T> GetExecutorFor<T>()
{
    return IocContainer.GetAllInstances<IExecutor<T>>().FirstOrDefault(); 
} 
```

因此，要为命令运行执行程序，我可以执行以下操作：

```
var cmd = new MyFakeCommand();
var executor = GetExecutorFor(cmd);
executor.Run(cmd); 
```

这一切都很好，直到我开始动态创建命令。

例如：

```
string commandTypeFullName = "Namespace.MyFakeCommand"
Type cmdType = Type.GetType(commandTypeFullName);

var cmd1 = JsonConvert.DeserializeObject(strCommand, cmdType);
var cmd2 = ObjectFactory.GetInstance(cmdType);

GetExecutorFor(cmd1); // fails to find executor
GetExecutorFor(cmd2); // fails to find executor 
```

所以我的问题是如何配置结构映射以仍然找到动态实例化对象的执行器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:31:09.303

You need to introduce a non-generic `IExecutor` interface that all of your `IExecutor<T>` implement.

Then you use the `ObjectFactory.ForGenericType` method. See [https://github.com/structuremap/structuremap/blob/v2.6.3/Source/StructureMap/ObjectFactory.cs#L310](https://github.com/structuremap/structuremap/blob/v2.6.3/Source/StructureMap/ObjectFactory.cs#L310)

```
var executor = ObjectFactory.ForGenericType(typeof(IExecutor<>)).
  WithParameters(cmdType).
  GetInstanceAs<IExecutor>() 
```

Now `executor` will be an instance of the non-generic `IExecutor`, which should also have a Run method. The executor implements the non-generic `Run` method by casting the command object and passing it to the generic `Run` method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:50:37.310

我不知道 StructureMap （我使用 SimpleInjector），但这个问题并不特定于容器，它是泛型的问题。

您通常可以使用 dynamic 关键字来实现您想要做的事情：

```
//slight tweak to your listed method so that it would work
public IExecutor<T> GetExecutorFor<T>(T instance)
{
    return IocContainer.GetAllInstances<IExecutor<T>>().FirstOrDefault(); 
} 
```

测试代码：

```
string commandTypeFullName = "Namespace.MyFakeCommand"
Type cmdType = Type.GetType(commandTypeFullName);

dynamic cmd1 = JsonConvert.DeserializeObject(strCommand, cmdType);
dynamic cmd2 = ObjectFactory.GetInstance(cmdType);

dynamic exec1 = GetExecutorFor(cmd1);
dynamic exec2 = GetExecutorFor(cmd2); 
```

最佳实践应该是限制动态的使用——它没有提供智能感知，没有编译时支持等。所以我会用这个来代替：

```
public void ExecuteCommand<T>(T command)
{
    IExecutor<T> executor = 
        IocContainer.GetAllInstances<IExecutor<T>>().FirstOrDefault(); 
    if (executor == null) throw new Exception();
    executor.Run(command)
} 
```

测试代码：

```
string commandTypeFullName = "Namespace.MyFakeCommand"
Type cmdType = Type.GetType(commandTypeFullName);

dynamic cmd1 = JsonConvert.DeserializeObject(strCommand, cmdType);
dynamic cmd2 = ObjectFactory.GetInstance(cmdType);

ExecuteCommand(cmd1);
ExecuteCommand(cmd2); 
```

# css - 使用引导程序将 div 的内容居中

> ID：16014131
> 
> 赞同：2
> 
> 时间：2013-04-15T11:34:27.193
> 
> 标签：css, twitter-bootstrap

我有这个页脚：

```
<div id="footer" class="navbar-bottom">
    <div class="navbar-inner">
    <div class="row">
        <div class="span12" style="text-align: center;">
        <ul class="menu-footer">
            <li><a href="#"><img src="images/fportfolio.png"><p class="merg-top">Portfolio</p></a></li>
            <li><a href="#"><img class="center" src="images/fabout.png"><p class="merg-top">About</p></a></li>
            <li><img width="160px" src="images/logo.png"></li>
            <li><a href="#"><img src="images/fclients.png"><p class="merg-top">Clients</p></a></li>
            <li><a href="#"><img src="images/fcontact.png"><p class="merg-top">Contact</p></a></li>
        </ul>
        </div>
    </div>
    </div>
</div> 
```

每个文本和图像都在`li`元素内完美居中，现在我喜欢该`ul`元素位于 div 的中心，但它现在与左对齐。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:38:12.443

修复你的宽度`.menu-footer`，并添加

```
margin: 0 auto; 
```

以它的父母为中心`div`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:59:29.763

居中的项目必须粉碎浮动属性，

添加这个CSS：

```
.span12 {
    width: 940px;
    margin: 0 auto;
    float: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T19:03:47.807

尝试：

```
 <div class="span12 text-center">
    <ul class="menu-footer">
        <li><a href="#"><img src="images/fportfolio.png"><p class="merg-top">Portfolio</p></a></li>
        <li><a href="#"><img class="center" src="images/fabout.png"><p class="merg-top">About</p></a></li>
        <li><img width="160px" src="images/logo.png"></li>
        <li><a href="#"><img src="images/fclients.png"><p class="merg-top">Clients</p></a></li>
        <li><a href="#"><img src="images/fcontact.png"><p class="merg-top">Contact</p></a></li>
    </ul>
  </div> 
```

# android - 准确的智能手机传感器 Android

> ID：16014132
> 
> 赞同：0
> 
> 时间：2013-04-15T11:34:28.800
> 
> 标签：android, android-sensors

我正在研究“使用传感器的智能手机定位系统”项目。

我将使用传感器陀螺仪、加速度计、磁力计、接近度等来计算设备的位置。所以我需要知道为此选择的最佳设备，以便传感器数据准确。

我研究了一些：Galaxy Tab 2、S3、S3 mini、Nexus 4。我需要知道最准确的设备才能实现这一点。

如果可能的话，您能否提及传感器型号，例如在 Galaxy Tab 中，我们有 MPU 3050。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:49:51.513

这是一个硬件问题。除非您能找到一个已经完成测试以解决您的特定查询的网站，否则恐怕您只能靠自己了。

# sharepoint - SharePoint 2010 多报表查看器 Web 部件 - 非常慢

> ID：16014136
> 
> 赞同：5
> 
> 时间：2013-04-15T11:34:55.580
> 
> 标签：sharepoint, reporting-services, sharepoint-2010

我在一个 SharePoint 页面上有 7 个报表查看器 Web 部件。加载所有这些需要很长时间。如果我直接打开 RDL，报告会在 2 秒内加载。如果我只加载一个报表查看器 Web 部件，那么 Web 部件的加载速度也非常快。

**如何减少加载时间？**

所有为延迟加载、AJAX 调用等而创建的 UpdatePanel 都会导致部分问题。禁用 ViewState 不是一种选择，因为它会破坏 Web 部件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:28:03.490

多年来，我们遇到了同样的问题。SharePoint 不适用于多个报表查看器 Web 部件。这令人沮丧，但对此无能为力。我们发现最好的解决方案是将不同的报告合并到一个报告中，实质上是在报告本身中制作仪表板。这将 Web 部件的数量减少到一两个。

# android - Android管理相对布局对齐

> ID：16014137
> 
> 赞同：0
> 
> 时间：2013-04-15T11:34:55.617
> 
> 标签：android, android-layout, alignment

我设计了一个带有 3 个按钮的布局，我想管理分隔符的对齐方式。这是我的 xml 布局，

 `````
<RelativeLayout
                    android:id="@+id/menuLayout1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="15dp"
                    android:layout_marginRight="15dp" 

                    >

                    <Button
                        android:id="@+id/btn_Menu"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:background="#00000000"
                        android:drawableTop="@drawable/menu"
                        android:text="@string/menu"
                        android:textColor="@color/restaurant_list_menu_font"
                        android:textStyle="bold" />

                    <View
                        android:layout_width="5dp"
                        android:layout_height="35dp"
                        android:layout_centerInParent="true"
                        android:layout_marginLeft="10dp"
                        android:layout_marginRight="10dp"
                        android:layout_marginTop="15dp"
                        android:layout_centerHorizontal="true"
                        android:layout_centerVertical="true"
                        android:layout_toRightOf="@+id/btn_Menu"
                        android:gravity="center"
                        android:layout_gravity="center" 
                        android:background="@drawable/sep" />

                    <Button
                        android:id="@+id/btn_Review"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:background="#00000000"
                        android:drawableTop="@drawable/reviews"
                        android:text="@string/pages"
                        android:textColor="@color/restaurant_list_menu_font"
                        android:textStyle="bold" />

                    <View
                        android:layout_width="5dp"
                        android:layout_height="35dp"
                        android:layout_centerInParent="true"
                        android:layout_marginLeft="10dp"
                        android:layout_marginRight="10dp"
                        android:layout_marginTop="15dp"
                        android:layout_centerHorizontal="true"
                        android:layout_centerVertical="true"
                        android:layout_toRightOf="@+id/btn_page"
                        android:background="@drawable/sep"
                        android:gravity="center"
                        android:layout_gravity="center"
                         />

                    <Button
                        android:id="@+id/btn_page"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentTop="true"
                        android:layout_centerHorizontal="true"
                        android:background="#00000000"
                        android:drawableTop="@drawable/pages"
                        android:gravity="center_horizontal"
                        android:text="@string/reviews"
                        android:textColor="@color/restaurant_list_menu_font"
                        android:textStyle="bold" />
                </RelativeLayout> 
```` 

`我想以 2 按钮为中心管理视图，这里是当前输出![在此处输入图像描述](https://i.stack.imgur.com/5qbAX.png)`

 `管理了 3 个按钮，但我还想管理此分隔符图像的对齐方式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:44:09.320

不要使用分隔图像作为背景，而是将 imageView 添加到视图中，使视图填充整个间隙并将该 imageview 居中在父级中。据我所知，没有关于如何在视图中定位背景的选项。

另一种方法是将它们全部放在线性布局中，使用 imageViews 而不是 Views，并使用权重来正确定位它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:47:00.530

尝试使用嵌套布局，这样你就可以单独管理每一个``

# dotnetnuke - 编辑页面不起作用 DNN 7.00.05

> ID：16014139
> 
> 赞同：2
> 
> 时间：2013-04-15T11:35:02.403
> 
> 标签：dotnetnuke

我已经下载了最新版本的 DNN7(7.00.05) 并按照安装视频中的说明在 localhost 上正确配置了它，但是在从菜单项单击编辑页面时，我被重定向到主页。我已经多次重复安装过程来解决这个问题。但这个问题仍然出现在编辑页面功能上。现在令人沮丧。

有人有这个问题的解决方案吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:41:14.307

尝试以下解决方案

转到 web.config 并在下面找到`<modules>`部分`<system.webServer>`并添加以下键值。

`<modules runAllManagedModulesForAllRequests="true" >`

这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T22:17:35.747

Nice Post, This is working Perfectly. I have added runAllManagedModulesForAllRequests="true" in web.config and my both issues(Edit Page & Add New Module) has been resolved. In my web.config I have added like this:-

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true">
  ...
  </modules>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T12:51:11.957

您可以尝试以下步骤来解决问题

1.  在 IIS 的 ISAPI 中允许 4.0 版本
2.  使用 localhost 将您的代码作为虚拟目录指向 IIS 中的网站
3.  单击 IIS 中的网站，然后从 IIS 的浏览选项中选择编辑权限，然后从安全选项卡中向文件夹添加完全权限。
4.  使用 IIS 中的管理网站选项重新启动实例并从 IIS 浏览

应该这样做！！！！

# c# - 如何将sql的谓词转换为linq to sql

> ID：16014143
> 
> 赞同：0
> 
> 时间：2013-04-15T11:35:08.160
> 
> 标签：c#, linq-to-sql

如何将以下查询转换为 Linq 查询——

```
SELECT ID FROM Table1 
INNER JOIN Table2 
ON Table1.ID IN (SELECT ID FROM @Temp) 
```

# android - 从一个活动向另一个活动发送消息

> ID：16014144
> 
> 赞同：2
> 
> 时间：2013-04-15T11:35:11.953
> 
> 标签：android, android-activity, handler, message

我有一个活动`(Activity_A)`，它有一个`handler`并且`receiving messages`来自外部`library`。问题是`Activity_A`启动活动`Activity_B`。`Activity_B`启动时`Activity_A` `receives a message`，`handler`我想“发送”到`Activity_B`.

怎么做？

我无法将`handler`from移动`Activity_A`到，`Activity_B`因为某些`messages`接收必须由`Activity_A.`

我想避免使用`global/static variables`. 是否有可能以某种方式保存对我创建时`Activity_A`的引用？如何发送from to ？`Activity_B``intent``message``Activity_A``Activity_B`

这里重要的一点是，是的，我想将一个对象从一个活动传递到另一个活动，但不是在我创建新活动的那一刻（以包的形式传递对象）。每当我从外部库收到消息时，我都想异步执行此操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T11:42:42.253

在`Activity_A`

```
String msg = "message";
Intent i = new Intent(Activity_A.this, Activity_B.class);
i.putExtra("keyMessage", msg);
startActivity(i); 
```

在`Activity_B`

```
Bundle extras = getIntent().getExtras();
String msg = extras.getString("keyMessage"); 
```

希望有帮助。

更新：
我描述了两个活动的交互过程。但是，如果消息从库到达，则在`Activity_B`运行时 - 此方法不相关。
尝试将处理程序移动到某个[Service](http://developer.android.com/intl/ru/reference/android/app/Service.html)，这将在您需要时起作用。并且您可以定期查询服务“`Activity_A`来`Activity_B`了一条新消息？” 使用[计时器](http://developer.android.com/intl/ru/reference/java/util/Timer.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:43:31.440

应用程序不能那样工作。如果您希望活动完成某些工作，它必须对用户可见。您可以考虑服务做后台工作（即传感器处理），或制作活动 B 片段 - 然后活动 A 将仍然在前台，而它的片段对用户可见。

# django - Google App Engine 上的 Django：无法上传图片

> ID：16014147
> 
> 赞同：3
> 
> 时间：2013-04-15T11:35:27.357
> 
> 标签：django, google-app-engine

我正在尝试在我的 Django 应用程序中为模型实现 ImageField。该应用程序在 Google App Engine 上运行。但是在上传（本地机器，使用 GAE SDK 1.7.7）时，我得到一个`[Errno 78] Function not implemented`.

错误源于对`os.makedirs()`in的调用`django.core.files.storage.FileSystemStorage._save()`；调用的参数`makedirs`是：

```
u'/Users/.../PycharmProjects/myproject/media/uploaded 
```

我的`MEDIA_ROOT`条目`SETTINGS.PY`包含：

```
/Users/.../PycharmProjects/myproject/media/ 
```

我的`MEDIA_URL`条目`SETTINGS.PY`包含：

```
/media/ 
```

媒体目录包含一个名为“uploaded”的子目录。我检查了权限，他们需要读/写访问权限。

我的 ImageField 的字段定义是：

```
image = models.ImageField(upload_to = "uploaded/" 
```

出于某种原因，Django 想要创建已经存在的目录。使用 Django 控制台`os.path.exists(u'path/to/media/upload')`返回 True （这是正确的），所以我不明白 Django 为什么要创建目录。

此外，我使用 Google Cloud SQL 进行存储，并安装了 PILLOW 进行图像处理。我还在我的`app.yaml`.

我可能错过了一些基本的东西，但目前对导致这种情况的原因一无所知......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:30:49.657

是的，我认为您在这里遗漏了一些非常基本的东西。您无权访问 Google App Engine 上的文件系统，因此`os.makedirs()`无法正常工作。如果您想上传图片（或一般文件），您必须将它们存储在 Blobstore 或 Google Cloud Storage 中。在做任何其他事情之前，我建议您先阅读[Blobstore Python API 概述](https://developers.google.com/appengine/docs/python/blobstore/overview)，您可以在其中看到有关如何上传文件的完整工作示例。

此外，如果您将图像作为 blob 上传，您将能够[`get_serving_url()`](https://developers.google.com/appengine/docs/python/images/functions#Image_get_serving_url)通过提供`blob_key`. 使用此 URL，您可以为特定图像请求任何尺寸，甚至可以在服务器端对其进行裁剪，而无需任何额外努力。

# java - 从 csv 文件读取时忽略逗号值

> ID：16014153
> 
> 赞同：2
> 
> 时间：2013-04-15T11:35:39.370
> 
> 标签：java, opencsv

我有一个 csv 文件，它有 5 列由“，”分隔。

当列在数据中包含“，”时，读取 csv 时会出现问题。

我尝试使用 Opencsv，但它给出了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:42:06.957

如果列包含逗号 ( `,`)，则必须用双引号 ( `"`) 括起来。双引号可以通过重复 ( `""`) 来转义。因此，包含逗号值的行必须表示为：

```
"hello, world", "This says: ""hello, world""" 
```

此行包含两个值：

*   你好世界
*   这说：“你好，世界”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:37:26.353

无法区分作为值一部分的逗号与旨在分隔两个值的逗号。如果您的值将包含逗号，并且您无法转义它们，您将不得不使用另一个分隔符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T11:37:19.747

我修改了代码以在 csv 中使用分号作为分隔符。现在我可以用“，”正确读取数据了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:39:18.857

您需要使用其他符号来分隔 csv 文件中的单词。我认为没有办法在单词本身中捕捉逗号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T12:12:45.853

无法识别作为值的一部分的逗号和 CSV 的逗号部分。使用不同的分隔符。值必须用引号括起来。或在转换为 CSV 之前，将所有逗号转换为您的值中未出现的某个字符，这些字符可以在稍后阶段恢复。

# android - Android 设备是否为同一个应用程序使用不同数量的堆和占用空间

> ID：16014154
> 
> 赞同：5
> 
> 时间：2013-04-15T11:35:42.953
> 
> 标签：android, memory-management, heap-memory, allocation

我们为一个简单的项目开发了 NDK 原型。该代码已编译并在设备和模拟器上运行。但是，在手机上查看设置菜单时：（Samsung Galaxy Nexus(Android 4.2.2)、Samsung Gio(Android 2.3.6)），在 Gio 上运行应用程序比在运行应用程序时占用更多空间银河系。此外，以下命令报告 GIO 的堆分配更高：

```
System.out.println(Debug.getNativeHeapAllocatedSize() / 1049L); 
```

我们为很多功能使用了一个静态库。确切的结果是：

**关系：**

*   占用空间 (MB)（Java 实现）1.24
*   占用空间 (MB)（C++ 库实现）0.96
*   内存分配（MB）（Java实现）1.6
*   内存分配 (MB)(C++ lib 实现) 1.5

**吉奥：**

*   占用空间 (MB)（Java 实现）1.19
*   占用空间 (MB)（C++ 库实现）1.71
*   内存分配（MB）（Java实现）4.6
*   内存分配 (MB)(C++ lib 实现) 5.5

占用空间和内存使用量差异的原因是什么？

（在 iOS 设备（C++ 库）上测量分配在 3GS 上与在 Galaxy Nexus 上产生的结果大致相同）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:01:34.933

Android 2.x 和 Android 4 之间有很多不同之处。例如，位图内存的管理方式：

> 在 Android 2.2（API 级别 8）及更低版本上，当垃圾收集发生时，您的应用程序的线程会停止。这会导致延迟，从而降低性能。**Android 2.3 增加了并发垃圾回收，这意味着在不再引用位图后很快就会回收内存。**
> 
> 在 Android 2.3.3（API 级别 10）及更低版本中，位图的支持像素数据存储在本机内存中。它与存储在 Dalvik 堆中的位图本身是分开的。本机内存中的像素数据不会以可预测的方式释放，可能会导致应用程序短暂超出其内存限制并崩溃。**从 Android 3.0（API 级别 11）开始，像素数据与关联的位图一起存储在 Dalvik 堆中。**

引自：http: [//developer.android.com/training/displaying-bitmaps/manage-memory.html](http://developer.android.com/training/displaying-bitmaps/manage-memory.html)

# java - 如何使用 bouncycastle 将 X509 证书转换为 PKCS7？

> ID：16014157
> 
> 赞同：1
> 
> 时间：2013-04-15T11:36:00.467
> 
> 标签：java, bouncycastle, x509, pkcs#7

大家好！我的问题如下：我正在尝试将 X509 证书加密为 PKCS7，但我收到错误的结果。

第一次尝试是：（用过bcmail-jdk16:1.46）

```
 Security.addProvider(new BouncyCastleProvider());

            keystore = KeyStore.getInstance("PKCS12", "BC");
            keystore.load (new FileInputStream(PATH+"//pkcs7-csr-cer//identity.p12"), "testpassword".toCharArray());
            PrivateKey privateKey = (PrivateKey)keystore.getKey("testclientcert", "testpassword".toCharArray());

            CMSSignedDataGenerator signedDataGen = new CMSSignedDataGenerator();

            signedDataGen.addSigner(privateKey, certificate, CMSSignedDataGenerator.ENCRYPTION_RSA, CMSSignedDataGenerator.DIGEST_SHA256);
            CMSProcessableFile pkcs7 = new CMSProcessableFile(new File(destinationfile));
            CMSSignedData signedData = signedDataGen.generate(pkcs7, true, "BC");
            signedData = new CMSSignedData(pkcs7, signedData.getEncoded()); 
```

......它不起作用。

第二次尝试是 next（使用 bcmail-jdk16-140）：

```
 Security.addProvider(new BouncyCastleProvider());

        CMSEnvelopedDataGenerator envDataGen = new CMSEnvelopedDataGenerator();
        envDataGen.addKeyTransRecipient(certificate);

        CMSProcessable sData = new CMSProcessableByteArray(certificate.getEncoded());
        CMSEnvelopedData enveloped = envDataGen.generate(sData, CMSEnvelopedDataGenerator.AES256_CBC, "BC");
        return enveloped.getEncoded(); 
```

在这两种情况下我都会得到错误的结果。请帮助谁知道正确的方法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:07:05.810

我找到了解决方案！

```
 private byte[] encryptCertToPKCS7(X509Certificate certificate, Key key) 
                throws CertificateEncodingException, CMSException, NoSuchProviderException, NoSuchAlgorithmException, IOException, OperatorCreationException {
        CMSSignedDataGenerator generator = new CMSSignedDataGenerator();

        ContentSigner sha256Signer = new JcaContentSignerBuilder("SHA256withRSA").setProvider("BC").build((PrivateKey) key);
        generator.addSignerInfoGenerator(new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder()
                                                                               .setProvider("BC").build())
                                                                              .build(sha256Signer, certificate));
        generator.addCertificates(new JcaCertStore(certificates));
        CMSTypedData content = new CMSProcessableByteArray(certificate.getEncoded());

        CMSSignedData signedData = generator.generate(content, true);
        return signedData.getEncoded();
    } 
```

# javascript - 如何使用 Kendo UI Grid 的 SetDataSource 方法

> ID：16014159
> 
> 赞同：9
> 
> 时间：2013-04-15T11:36:03.573
> 
> 标签：javascript, jquery, html, kendo-ui, kendo-grid

有没有人能够使用剑道 UI 网格的 setdatasource 方法？我相信这用于分配可以在后期分配给网格的数据源，也用于网格刷新目的。但是我找不到任何合适的文档来解释如何使用这种方法并制作可刷新的网格。

我正在尝试通过远程 ajax 调用更新我的数据源。我还假设它应该通过将 autosync 属性设置为 true 来在更新源时自动刷新。每次单击日历控件时，我都会将日期值传递给 GetRemoteData 函数，以便通过 ajax 请求更新数据。

目前这不起作用。关于解决方案的任何线索？

**我的观点**

```
 $('#calendarContainer').kendoCalendar({
        format: "dd/MM/yyyy",
        culture: "en-GB",
        change: onDateChange
    });

 function onDateChange() {
        var selectedDate = kendo.toString(this.value(), 'dd/MM/yyyy');

        GetRemoteData(selectedDate);
        /*
         $("#grid").data("kendoGrid").dataSource.data(bob);
         $("#grid").data("kendoGrid").dataSource.read();
        */
    }

   $('#grid').kendoGrid({

            dataSource:GetRemoteData(date),

            scrollable: {
                virtual: true
            },
            navigatable: true,
            groupable: true,
            sortable: true,
            selectable: "row",
            pageable: true,

            pageable: {
                input: true,
                numeric: false
            },

            resizable: true,
            reorderable: true,
            filterable: {
                extra: false
            },
            columns: [
                {
                    field: "DealNumber",
                    width: 150,
                    title: "DealNumber",
                    filterable: {
                        operators: {
                            string: {
                                startswith: "Starts With",
                                contains: "Contains"
                            }
                        }

                    },

                },
               {
                   field: "DealIssuer",
                   width: 150,
                   title: "Issuer",
                   filterable: {
                       operators: {
                           string: {
                               startswith: "Starts With",
                               contains: "Contains"
                           }
                       }
                   }

               },
                  {
                      field: "Ticker",
                      width: 150,
                      title: "Ticker",
                      filterable: {
                          operators: {
                              string: {
                                  startswith: "Starts With",
                                  contains: "Contains"
                              }
                          }
                      }

                  },
                     {
                         field: "DealType",
                         width: 150,
                         title: "Type",
                         filterable: {
                             operators: {
                                 string: {
                                     startswith: "Starts With",
                                     contains: "Contains"
                                 }
                             }
                         }

                     },
                        {
                            field: "DealValue",
                            width: 150,
                            title: "Value",
                            filterable: {
                                operators: {
                                    string: {
                                        startswith: "Starts With",
                                        contains: "Contains"
                                    }
                                }
                            }

                        },
                           {
                               field: "DealStatus",
                               width: 150,
                               title: "Status",
                               filterable: {
                                   operators: {
                                       string: {
                                           startswith: "Starts With",
                                           contains: "Contains"
                                       }
                                   }
                               }

                           },
                 {
                     field: "DealPricingCompletionDate",
                     width: 230,
                     title: "DealPricingCompletionDate",
                     format: "{0:dd/MM/yyyy}",
                     //  template: '#= kendo.toString(StartDate, "dd/MM/yyyy") #',
                     filterable: {
                         ui: "datetimepicker",
                         operators: {
                             date: {
                                 gt: "After",
                                 lt: "Before",
                                 eq: "Equals"
                             },
                             messages: {
                                 filter: "Apply",
                                 clear: "Clear"
                             }
                         }

                     }
                 },

                 {
                     command: { text: "View Details", click: showDetails }, title: " ", width: "140px"
                 },

            ],
            editable: "popup",
            height: 600
        }).data("kendoGrid");

function GetRemoteData(date) {

        var chosenDate;

        if (typeof date == "undefined") {
            chosenDate = "12-12-2013";
        }
        else {
            chosenDate = date;
        }

       var  source = new kendo.data.DataSource({
            autoSync: true,
            transport: {
                read: {
                    type: "GET",
                    url: "http://localhost:35798/RestServiceImpl.svc/GetDealData",
                    dataType: "jsonp",
                    contentType: "application/json; charset=utf-8",
                    cache: false,
                },

                parameterMap: function (data, type) {

                    var data = {
                        startDate: chosenDate
                    }
                    return data;
                }
            },
            schema: {
                model: {
                    fields: {
                        DealNumber: { type: "string" },
                        DealIssuer: { type: "string" },
                        Ticker: { type: "string" },
                        DealType: { type: "string" },
                        DealValue: { type: "number" },
                        DealStatus: { type: "string" },
                        DealPricingCompletionDate: { type: "date" }

                    }
                }
            },
            pageSize: 16
        });

        source.fetch(function () {
            var data = this.data();
        });
        return source;
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-15T11:40:37.347

你试过什么了？这是非常基本的。

例子：

```
var ddl = $('#testDropDown').data("kendoDropDownList");
var otherDropDownList= $('#otherDropDown').data("kendoDropDownList");

var ds = new kendo.data.DataSource();
ds.data(otherDropDownList.dataSource.data()); // set new DataSource to otherDropDown's data source then filter it
ds.filter(
     {
         field: "Id",
         operator: "eq",
         value: parseInt(id)
     }
)

ddl.setDataSource(ds); 
```

显然，无论您遇到哪种情况，这一切都会有所不同。

**网格更新**

```
var ds = new kendo.data.DataSource();
var grid = $('#grid').data("kendoGrid");

grid.setDataSource(ds); // sets to a blank dataSource 
```

或者，将此数据源与另一个网格一起使用？

```
var gridDataSource = $('#grid').data("kendoGrid").dataSource;
var secondGrid = $('#secondGrid').data("kendoGrid");

secondGrid.setDataSource(gridDataSource); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-14T18:01:08.303

如果您想设置 setDataSource 其他方式是从您的 ajax 请求返回的对象创建一个数据源，正如 Brett 在以下链接中所解释[的](https://stackoverflow.com/users/2701144/brett)[那样](https://stackoverflow.com/questions/20684678/how-to-set-list-as-kendo-grid-datasource-in-javascript)

```
 var dataSource = new kendo.data.DataSource({
  data: "your object returned by ajax"
});

$('#GridKatildigiKurslar').data('kendoGrid').setDataSource(dataSource); 
```

当然，网格应该配置为显示返回的对象。

# visual-studio-2010 - VS2010 和带有 CMake 的点云库

> ID：16014160
> 
> 赞同：2
> 
> 时间：2013-04-15T11:36:07.340
> 
> 标签：visual-studio-2010, cmake, point-cloud-library

我正在尝试编译一个演示项目，但是当我使用 CMake 时，我不断遇到生成项目的错误。目前我被困在 CMake 输出：

> CMake 错误：文件 C:/Users/Thomas/Documents/Visual Studio 2010/Projects/PCL1/pcl_config.h.in 不存在。CMakeLists.txt:232 (configure_file) 处的 CMake 错误：configure_file 配置文件问题
> 
> 找不到 GTest（缺少：GTEST_LIBRARY GTEST_INCLUDE_DIR GTEST_MAIN_LIBRARY） 将无法构建测试：未找到 GTest。cmake/pcl_utils.cmake:291 (list) 处的 CMake 错误：列出子命令 REMOVE_ITEM 需要存在列表。调用堆栈（最近调用优先）：CMakeLists.txt:247 (topological_sort)
> 
> cmake/pcl_utils.cmake:341 处的 CMake 错误（消息）：list_length 必须至少等于 1 调用堆栈（最近调用优先）：cmake/pcl_utils.cmake:386 (fill_list) CMakeLists.txt:248 (sort_relative)

我从未创建过 PCL_config.h 文件，查看 CMakeList.txt 意味着该文件是由 CMake 本身创建的。此外，我从未使用过 GTest，也不知道它的作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T17:40:17.137

试试下面的。

1.  从 PCL 官方网站获取 PCL 1.6.0 的预编译版本。

2.  它带有所有依赖项，只需确保安装程序运行时没有任何错误。

3.  安装 CMAKE 2.8。或更高。

4.  按照任何 PCL 教程中有关使用 CMake 编译和运行 PCL 代码的说明进行操作。

5.  在上述步骤之前，您可能需要卸载所有内容并进行全新安装。

让我们知道它是否有效。

# javascript - angular-ui/bootstrap：有没有办法获得类似“onDialogOpen”的东西？

> ID：16014162
> 
> 赞同：1
> 
> 时间：2013-04-15T11:36:12.900
> 
> 标签：javascript, angularjs, angular-ui, angular-ui-bootstrap

我使用 ui-bootstrap 在我的控制器中打开一个模式对话框，我需要知道对话框何时打开（部分 html 已添加到 dom）。在我的特殊情况下，我需要让 OpenLayers 找到相应的地图 div。

我不能使用 dialog.open() 返回的承诺对象，因为关闭对话框时会调用“成功”。

到目前为止我有两个控制器

*   主控件
*   对话框控件

有没有办法弄清楚上面提到的事件？

提前致谢！

# c# - 使用 texture2d 变量初始化非静态类

> ID：16014164
> 
> 赞同：0
> 
> 时间：2013-04-15T11:36:39.403
> 
> 标签：c#, constructor, initialization, xna-4.0, texture2d

我正在学习 XNA（和一般的 C#），并且在尝试编写自己的小横向卷轴以用于学习目的时，我偶然发现了以下问题。

该级别是从瓷砖构建的，并且由于我不想在每次实例化时将纹理传递给瓷砖（例如`return new Tile(positionVector2, TEXTURE)`），因此默认情况下应该使用此纹理构造类。

现在我无法让它工作，我尝试使用这样的构造函数：

```
public Tile(Vector2 position)
{
   this.texture = Platformer03.Texture;  
} 
```

游戏类在哪里`Platformer03`，Texture 是加载的平铺纹理的属性。现在因为`Platformer03`是类而不是实例（它不是静态的），这显然不起作用，但我什至找不到`Platformer03`（它称为game1，但超出范围）的实例。

所以我确定我做错了，但是我怎样才能让 Tile 类在每个实例化时使用某个 texture2d 呢？

请温柔一点，即使您可能无法想象一个更白痴的问题，我可以向您保证，在过去的几个小时里，我已经像疯子一样在谷歌上搜索和阅读来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:43:13.867

如果您将`Texture`变量`Platformer03`设置为`static`变量，那么它可以在没有`Platformer03`类本身的实例的情况下访问（前提是它没有标记为私有或受保护）。

如果您找不到`Platformer03`该类，也许您没有在正确的命名空间中查找？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:13:56.697

我不确定我是否理解你的问题，但是如果在你的`Platformer03`构造函数中你已经在加载想要的纹理，你可以实例化一个新的`Platformer03`并得到它。像这样：

```
public Tile(Vector2 position)
{
    Texture = new Platformer03().Texture;
} 
```

或者如果在你的所有不同对象中`Plataformer03`只使用一个值，你可以在非静态类中有一个静态成员，如下所示：`Texture``Platformer03`

```
class Platformer03
{
    public static Texture2D Texture = ... ;
}
class Tile
{
    public Tile(Vector2 position)
    {
        this.texture = Platformer03.Texture;
    }
} 
```

对不起我的英语。

# mysql - 如何在 MediaWiki 数据库中进行重音和不区分大小写的搜索？

> ID：16014167
> 
> 赞同：5
> 
> 时间：2013-04-15T11:36:51.270
> 
> 标签：mysql, mediawiki

假设我的 wiki (MediaWiki 1.19.4) 中有这些页面标题：

```
SOMETHIng
Sómethìng
SomêthÏng
SÒmetHínG 
```

如果用户搜索`something`我希望所有 4 个页面都作为结果返回。

目前我唯一能想到的是这个查询（MySQL Percona 5.5.30-30.2）：

```
SELECT page_title
FROM page
WHERE page_title LIKE '%something%' COLLATE utf8_general_ci 
```

仅返回`SOMETHIng`.

我必须走在正确的道路上，因为**如果我搜索`sóméthíng`OR `SÓMÉTHÍNG`，我会得到`SOMETHIng`结果。如何修改查询，以便按预期获得其他结果？**此处的性能并不重要，因为该`page`表仅包含约 2K 行。

这是具有相关位的表定义：

```
CREATE TABLE page (
    (...)
    page_title VARCHAR(255) NOT NULL DEFAULT '' COLLATE latin1_bin,
    (...)
    UNIQUE INDEX name_title (page_namespace, page_title),
) 
```

*不得*修改表定义，因为这是 MediaWiki 和 AFAIK 的库存安装，其代码期望该字段以这种方式定义（即 unicode 存储为二进制数据）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:49:24.407

MediaWiki [TitleKey 扩展](http://www.mediawiki.org/wiki/Extension%3aTitleKey)基本上就是为此而设计的，但它只进行大小写折叠。但是，如果你不介意修改它，并且安装了 PHP [iconv 扩展](http://php.net/manual/en/book.iconv.php)，你可以编辑[TitleKey_body.php](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/extensions/TitleKey.git;a=blob;f=TitleKey_body.php;hb=HEAD)并替换方法：

```
static function normalize( $text ) {
    global $wgContLang;
    return $wgContLang->caseFold( $text );
} 
```

例如：

```
static function normalize( $text ) {
    return strtoupper( iconv( 'UTF-8', 'US-ASCII//TRANSLIT', $text ) );
} 
```

和（重新）运行rebuildTitleKeys.php。

TitleKey 扩展将其规范化的标题存储在一个[单独的表中](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/extensions/TitleKey.git;a=blob;f=titlekey.sql;hb=HEAD)，名称出人意料`titlekey`。它旨在通过 MediaWiki 搜索界面访问，但如果您愿意，您当然也可以直接查询它，例如：

```
SELECT page.* FROM page
  JOIN titlekey ON tk_page = page_id
WHERE tk_namespace = 0 AND tk_key = 'SOMETHING'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:00:03.570

我找到了完美的解决方案，无需修改或创建表格。它*可能*会对性能产生影响（我没有测试），但正如我在问题中所说，它是一个约 2K 行的表，所以它应该无关紧要。

问题的根源在于**MediaWiki 将 UTF8 编码的文本存储在 latin1 编码的表中**。这对 MediaWiki 来说并不重要，因为它知道这一点，它总是会用正确的字符集查询数据库并做它的事情，本质上是**使用 MySQL 作为一个哑位容器**。这样做是因为 MySQL 中的 UTF8 支持显然不足以满足其需求（请参阅 MediaWiki 中的注释`DefaultSettings.php`，变量`$wgDBmysql5`）。

当您希望数据库本身能够执行 UTF8 感知操作（就像我想在我的问题中做的那样）时，就会出现问题。您将无法这样做，因为**据 MySQL 所知，它不存储 UTF8 编码的文本**（尽管它是，如上一段所述）。

对此有一个明显的解决方案：将您要使用的列转换为 UTF8，如下所示`CONVERT(col_name USING utf8)`。这里的问题是 MySQL 试图提供危险的帮助：它认为`col_name`存储的是 latin1 编码的文本，它会将**每个字节**转换（而不是编码）为其等效的 UTF8，并且您将以双编码的 UTF8 结尾，这显然是错误的。

如何避免 MySQL 如此友好和乐于助人？**在转换为 UTF8*****之前***只需转换**为 BINARY ！***这样，MySQL 就不会假设任何事情，并且会完全按照要求进行：将这些位编码为 UTF8。确切的语法是`CONVERT(CAST(col_name AS BINARY) USING utf8)`.*

 *所以这是我现在的最后一个查询：

```
SELECT CONVERT(CAST(page_title AS BINARY) USING utf8)
FROM page
WHERE
    CONVERT(CAST(page_title AS BINARY) USING utf8)
        LIKE '%keyword_here%'
            COLLATE utf8_spanish_ci 
```

现在，如果我搜索`something`或`sôMëthîNG`或任何变体，我会得到所有结果！

请注意，我使用它`utf8_spanish_ci`是因为我希望搜索能够区分`ñ`但`n`不`á`区分`a`. 根据您的用例使用不同的排序规则（[这里是完整列表](https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)）。

相关链接：

*   [MySQL：将不正确的 latin1 列转换为 utf8](http://nicj.net/mysql-converting-an-incorrect-latin1-column-to-utf8/)
*   [MySQL如何在UTF-8中“不区分大小写”和“不区分重音”](https://stackoverflow.com/questions/10831076/how-to-mysql-work-case-insensitive-and-accent-insensitive-in-utf-8)
*   [MySQL 5.5 中可用的排序规则](https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:50:32.237

**不区分大小写：**您可以简单地让数据库为您完成工作（您已经使用**_ci**完成了）

**口音：** 为了拥有所有口音或至少所有已知口音，您可以在数据库中使用两行。第一行按原样存储结果（这意味着您存储**SomeêthÏng**），并且您另外创建第二个**search_row**，在这种情况下将包含字符串**something**（没有任何重音符号）。对于转换，您可以使用替换规则创建一个函数。

现在您可以使用转换功能转换**搜索字符串**。

最后一步是，您创建一个触发器，每次您在 table **page中插入/更新标题时，它都会填充/更新字段****search_row**。

 **此解决方案也不会对性能产生任何负面影响！***

# java - setSoTimeout 在 java tcp 连接中不起作用

> ID：16014172
> 
> 赞同：0
> 
> 时间：2013-04-15T11:37:13.610
> 
> 标签：java

我有一个与客户端连接以接收字符串的服务器，但是当连接丢失时，服务器保持相同的状态并且不会回到它尝试再次建立连接的状态。我用过`setSoTimeout`，但它不起作用。

这是我的代码：

```
ServerSocket welcomeSocket = null;
                Socket connectionSocket = null;
                BufferedOutputStream outToClient = null;

                try {
                    System.out.println("connecting to send "+fileToSend);

                    welcomeSocket = new ServerSocket(3249);
                    connectionSocket  = welcomeSocket.accept();

                    connectionSocket.setSoTimeout(10000);
                    welcomeSocket.setSoTimeout(10000);
                    outToClient = new BufferedOutputStream(connectionSocket.getOutputStream());

                } catch (Exception ex) {
                    System.out.println("set so");
                    break;
                    // Do exception handling
                } 
```

有人可以告诉我为什么这不会引发异常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:45:09.400

您需要实际`read`调用客户端输入流才能触发 SO 超时。`read`并且仅当所述调用阻塞的时间超过超时设置时才会触发异常。

此外，在服务器套接字上设置 SO 超时也没有用，因为您永远不会在服务器端“读取”它。

# vba - 在 Excel 工作表中搜索/过滤所有列以查找字符串，然后将包含的行复制到另一个工作表中的第一个空白行

> ID：16014176
> 
> 赞同：0
> 
> 时间：2013-04-15T11:37:17.040
> 
> 标签：vba

stackoverflow 和 VBA 的新手（以及一般的脚本在较小程度上）所以如果我违反了任何规则或犯了任何愚蠢的错误，我深表歉意。

目前我有一个包含多个字符串的一维数组。我想为数组中的每个字符串构建一个循环，在sheet1 的*所有*列中搜索字符串，然后将包含的行复制到 sheet2 中的第一个空白行。

问题是我找不到一个内置的子例程，它允许我搜索多个/所有列的搜索词，只有那些在单个列中查找的。我认为有一些内置的东西可以做到这一点，因为这似乎是一件显而易见的事情——我在哪里可以找到它？如果你感觉很好并且你有一些示例代码，请发布它:)

谢谢，
路易斯

PS如果有人有一些他们想推荐的VBA指南/文档，请做！我的 google fu 很弱，到目前为止我还没有找到太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:08:15.763

这不是一个真正有效的代码，但它应该让您很好地了解如何使用循环（列、行、数组）
*注意*：如果您的电子表格中有某种结构（例如标题），那么您可以找到行中最后使用的列 - 这比遍历工作表中的所有列更有效。

```
 Sub doTheJob()
        Application.ScreenUpdating = False
        Dim ws1 As Worksheet, ws2 As Worksheet, arr() As String, str$, i&, j&, k&

        Set ws1 = ThisWorkbook.Sheets(1)
        Set ws2 = ThisWorkbook.Sheets(2)

        str = "this is your string"
        arr = Split(str, " ")

        For i = 1 To ws1.Columns.Count
            For j = 1 To ws1.Cells(Rows.Count, i).End(xlUp).Row
                For k = LBound(arr) To UBound(arr)
                    If StrComp(CStr(ws1.Cells(j, i).Value), arr(k), vbTextCompare) = 0 Then
                        ws1.Rows(j & ":" & j).Select
                        Selection.Copy
                        Dim nxt&
                        nxt = ws2.Range("A" & Rows.Count).End(xlUp).Row + 1
                        ws2.Rows(nxt & ":" & nxt).Select
                        Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
                        :=False, Transpose:=False
                    End If
                Next k
            Next j
        Next i
    Application.ScreenUpdating = True
End Sub 
```

后编辑 - 它现在应该复制整行......

# wpf - 在 mvvm 中显式保存

> ID：16014177
> 
> 赞同：0
> 
> 时间：2013-04-15T11:37:17.770
> 
> 标签：wpf, mvvm, binding

我有一个包含员工详细信息（全名、年龄、职位）的网格和一个保存按钮。我希望只有在按下保存按钮时才会保存员工。我如何在 MVVM 中实现它？

```
 <TextBlock
        Margin="3"
        Text="Full Name:"
        VerticalAlignment="Center"
        />
    <TextBox 
        Grid.Column="1"
        Margin="3"
        Text="{Binding FullName, UpdateSourceTrigger=Explicit, ValidatesOnDataErrors=True}"
        />     
    <TextBlock
        Grid.Row="1"
        Margin="3"
        Text="Age:"
        VerticalAlignment="Center"
        />
    <TextBox 
        Grid.Column="1"
        Grid.Row="1"
        Margin="3"
        Text="{Binding Age, UpdateSourceTrigger=Explicit, ValidatesOnDataErrors=True}"
        />
    <TextBlock
        Grid.Row="2"
        Margin="3"
        Text="Position:"
        VerticalAlignment="Center"
        />
    <TextBox 
        Grid.Column="1"
        Grid.Row="2"
        Margin="3"
        Text="{Binding Position, UpdateSourceTrigger=Explicit, ValidatesOnDataErrors=True}"
        />

    <Button
        Grid.Row="4"
        Grid.ColumnSpan="2"
        Content="Save"
        Command="{Binding SaveCommand}"
        Width="80"
        Height="22"
        Margin="3"
        HorizontalAlignment="Right"
        VerticalAlignment="Bottom"
        /> 
```

我的 View 模型没有实现 Save 方法：我不确定我知道如何处理显式绑定......

```
public string FullName
        {
            get { return _emp.FullName; }
            set 
            { 
                _emp.FullName = value;
                OnPropertyChanged("FullName");
            }
        }

        public int Age
        {
            get { return _emp.Age; }
            set 
            { 
                _emp.Age = value;
                OnPropertyChanged("Age");
            }
        }

        public string Position
        {
            get { return _emp.Position; }
            set 
            { 
                _emp.Position = value;
                OnPropertyChanged("Position");
            }
        }

        public EmployeeViewModel(Employee emp)
        {
            _emp = emp;

            _employees = new ObservableCollection<EmployeeViewModel>();

            if (_emp.Employees != null)
            {
                foreach (Employee employee in _emp.Employees)
                    _employees.Add(new EmployeeViewModel(employee));
            }
        }

        public string[] ValidatedProperties =
        {
            "FullName",
            "Age",
            "Position"
        };

        public RelayCommand SaveCommand
        {
            get
            {
                return _saveCommand ??
                    (_saveCommand = new RelayCommand(Save, CanSave));
            }
            set { _saveCommand = value; }
        }

        private bool CanSave()
        {
            foreach (string property in ValidatedProperties)
                if (!string.IsNullOrEmpty(GetValidationError(property)))
                    return false;

            return true;
        }

        private void Save()
        {
            throw new NotImplementedException();    
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:37:12.457

经过一番挖掘，我发现了一些不错的技术，使用命令参数+转换器。 [http://www.shujaat.net/2011/01/updatesourcetrigger-explicit-for-mvvm.html](http://www.shujaat.net/2011/01/updatesourcetrigger-explicit-for-mvvm.html)

所以在我的情况下：

```
 <TextBlock
        Margin="3"
        Text="Full Name:"
        VerticalAlignment="Center"
        />
    <TextBox 
        x:Name="FullNameTextBox"
        Grid.Column="1"
        Margin="3"
        Text="{Binding FullName, UpdateSourceTrigger=Explicit, ValidatesOnDataErrors=True}"
        />     
    <TextBlock
        Grid.Row="1"
        Margin="3"
        Text="Age:"
        VerticalAlignment="Center"
        />
    <TextBox 
        x:Name="AgeTextBox"
        Grid.Column="1"
        Grid.Row="1"
        Margin="3"
        Text="{Binding Age, UpdateSourceTrigger=Explicit, ValidatesOnDataErrors=True}"
        />
    <TextBlock
        Grid.Row="2"
        Margin="3"
        Text="Position:"
        VerticalAlignment="Center"
        />
    <TextBox  
        x:Name="PositionTextBox"
        Grid.Column="1"
        Grid.Row="2"
        Margin="3"
        Text="{Binding Position, UpdateSourceTrigger=Explicit, ValidatesOnDataErrors=True}"
        />

    <Button
        Grid.Row="4"
        Grid.ColumnSpan="2"
        Content="Save"
        Command="{Binding SaveCommand}"
        Width="80"
        Height="22"
        Margin="3"
        HorizontalAlignment="Right"
        VerticalAlignment="Bottom"
        >
        <Button.CommandParameter>
            <MultiBinding Converter="{StaticResource EmployeeConverter}">
                <Binding ElementName="FullNameTextBox" Path="Text" />
                <Binding ElementName="AgeTextBox" Path="Text" />
                <Binding ElementName="PositionTextBox" Path="Text" />
            </MultiBinding>
        </Button.CommandParameter>
    </Button>
</Grid> 
```

对视图模型的更改：

```
private RelayCommand<object> _saveCommand;

public RelayCommand<object> SaveCommand
{
    get
    {
        return _saveCommand ??
            (_saveCommand = new RelayCommand<object>(Save, CanSave));
    }
    set { _saveCommand = value; }
}

private bool CanSave(object value)
{
    foreach (string property in ValidatedProperties)
        if (!string.IsNullOrEmpty(GetValidationError(property)))
            return false;

    return true;
}

private void Save(object value)
{
    string[] parameters = ((string)value).Split(new char[] { ':' });
    FullName = parameters[0];
    Age = Convert.ToInt32(parameters[1]);
    Position = parameters[2];
} 
```

和小转换器：

```
public class EmployeeConverter : IMultiValueConverter
{
    public object Convert(object [] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string fullName = (string)values[0];
        string age = (string)values[1];
        string position = (string)values[2];

        return string.Format("{0}:{1}:{2}", fullName, age, position);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# wpf - 如何使用 INotifyDataErrorInfo 在 WPF 4.5 中显示与实体相关的错误？

> ID：16014178
> 
> 赞同：2
> 
> 时间：2013-04-15T11:37:22.100
> 
> 标签：wpf, validation, inotifydataerrorinfo

MSDN 文档指出，`GetErrors`如果 propertyName 为 null 或为空，则该方法应返回与实体相关的错误。

但调试表明 propertyName 始终是正在验证的属性的名称。

我应该怎么做才能强制 WPF 询问与实体相关的错误？

**更新**

看起来这在`ValidationSummary`存在控制的 Silverlight 中是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T06:34:20.830

请参阅我对以下问题的回答以获得答案：

[INotifyDataErrorInfo 实体级验证。如何引发 Validation.Error 事件？](https://stackoverflow.com/questions/18650931/inotifydataerrorinfo-entity-level-validation-how-to-raise-a-validation-error-ev)

例如，您只需为 Grid 定义一个 Validation.ErrorTemplate ，它应该在出现错误时显示出来！

# ruby-on-rails - 在 Rails 应用程序中集成 svg-edit

> ID：16014180
> 
> 赞同：3
> 
> 时间：2013-04-15T11:37:27.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, svg-edit

我必须在我的 rails 应用程序中集成[svg-edit 。](http://code.google.com/p/svg-edit/)我已经下载了它的文件，但我不想将它的所有 css、js 和图像分开并将它们放在 app/assets 中。并给它们各自的路径。有没有简单的方法来集成它。

我也粗略地看到了这个 gem [，](https://github.com/lml/sketchily)但是我需要自定义一些功能主义者，并且不能用这个 gem 来完成。

# r - 从句子中删除不相关的字符

> ID：16014185
> 
> 赞同：2
> 
> 时间：2013-04-15T11:37:34.607
> 
> 标签：r

我有以下句子：

```
**I**%%AABB%&&**WANT**%%AO%**ONLY**%RA%$**THESE** 
```

我只想提取那些*被定义*为相关的词：`I, WANT, ONLY, THESE, WORDS, NEXT, STEP`. 应从句子中删除所有其他字符（数字、字母、特殊字符）。

在这种情况下，生成的句子将是：

```
I WANT ONLY THESE. 
```

我有数千行这样的行，每行在有用的词之间都有自己的一组字符。有没有一种有效的方法可以在 R 中摆脱这些？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T11:46:33.757

```
string <- "**I**%%AABB%&&**WANT**%%AO%**ONLY**%RA%$**THESE**"
regmatches(string, gregexpr("I|WANT|ONLY|THESE|WORDS|NEXT|STEP", 
                            string))

[[1]]
[1] "I"     "WANT"  "ONLY"  "THESE" 
```

编辑：如果你想然后转换回一个句子，说我将匹配项存储在一个名为的对象中`matches`：

```
sentencify <- function(sentence){
  paste0(paste(sentence, collapse=" "), ".")
}

lapply(matched, sentencify)

[[1]]
[1] "I WANT ONLY THESE." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:46:41.800

这是一种方法，假设您有一个要检查的列表：

```
> mystring2 <- "**I**%%AABB%&&**WANT**%%AO%**ONLY**%RA%$**THESE**"
> mystring2
[1] "**I**%%AABB%&&**WANT**%%AO%**ONLY**%RA%$**THESE**"
> temp <- strsplit(mystring2, "[^a-zA-Z]")[[1]]
> myWords <- c("I", "WANT", "ONLY", "THESE", "WORDS", "NEXT", "STEP")
> temp[temp %in% myWords]
[1] "I"     "WANT"  "ONLY"  "THESE" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T11:54:27.560

如果您没有相关单词的列表，`hunspell`请自动执行 :)

```
> system(paste('echo "', gsub('\\W', ' ', '**I**%%AABB%&&**WANT**%%AO%**ONLY**%RA%$**THESE**'), '" | hunspell -G -d en_US'))
I
WANT
ONLY
RA
THESE 
```

# windows - 如何配置 NSB 以将错误日志发送到 Windows 事件查看器？

> ID：16014186
> 
> 赞同：0
> 
> 时间：2013-04-15T11:37:35.337
> 
> 标签：windows, nservicebus

我需要能够在 Windows 应用程序事件日志中检查 NSB 上的错误。主要用于错误，但警告也会很有用。

我得到：NSB 上的错误显示在“服务器管理器”\Features\Message Queuing\Private Queues\Errors

我想要：NSB 上的错误显示在“服务器管理器”\诊断\事件查看器\应用程序和服务日志中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:18:35.050

尝试将 EventLogAppender（或类似的）添加到您的配置中，并使用您的日志框架在发生异常时使用适当的级别创建条目。确保不实际处理异常，只需捕获并记录（并重新抛出）。

# ruby-on-rails - 在 Bootstrap 的弹出框内使用 Watir 的 .click

> ID：16014192
> 
> 赞同：1
> 
> 时间：2013-04-15T11:37:49.640
> 
> 标签：ruby-on-rails, testing, twitter-bootstrap, watir, watir-webdriver

在 Watir 中，我试图访问`a`出现在 Bootstrap 提供的弹出框内的元素。

只是调用`a(:class, 'my_link').click`不想玩球，所以我添加了一行`a(:class, 'my_link').wait_until_present`，希望这可能是单击生成弹出框的元素和访问其内容之间的时间问题，但这只是在 30 秒后超时并返回该元素永远不会出现。

在等待期间，我可以打开代码检查器并确认该元素确实存在并且是可点击的。

我应该提到，手动执行 Watir 应该执行的步骤。

### 我现在的想法

我知道当我尝试使用 jQuery 与这个元素进行交互时，使用常规`.click();`是行不通的，相反我不得不调用`$('body').on('click', ',my_link');`类似的东西在这里起作用吗？

这可能与元素被错误地归类为不可见有关。

任何指导将不胜感激。

### 代码

这是弹出框内部生成的代码：

```
<div class="popover fade bottom in" style="top: 40px; left: 424px; display: block;">
  <div class="arrow"></div>
  <div class="popover-inner">
    <h3 class="popover-title"></h3>
    <div class="popover-content">
    <!-- SNIP -->
      <p>
        <a class="my_link">My Link</a>
      </p>
    </div>
  </div>
</div> 
```

弹出框是通过点击生成的；

```
$('.nav-popup').popover('show'); 
```

这是 Watir 测试的相关部分；

```
span(:class, 'nav-popup').click
a(:class, 'my_link').wait_until_present
a(:class, 'my_link').click 
```

为了检查我是否可以与弹出框交互，我将以下内容添加到我的 Watir 测试中；

```
quick_log = a(:class, 'my_link').html
binding.pry 
```

当 pry 打开时，我可以看到它`quick_log`包含正确的 HTML 内容，这很烦人，因为下一行就是 `a(:class, 'my_link').wait_until_present`它的内容。

### 错误信息

线

```
a(:class, 'my_link').click 
```

生成；

```
Selenium::WebDriver::Error::ElementNotVisibleError:
   Element is not currently visible and so may not be interacted with 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:59:59.820

鉴于您的回答，那么我会简单地做而不是两行代码

```
browser.div(:class, 'popover-content').a(:class, 'my_link').click 
```

鉴于它是由 javascript 动态创建的，您可能需要扔一些东西来同步并等待元素生成

```
browser.div(:class, 'popover-content').when_present.a(:class, 'my_link').click 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:11:48.440

这似乎与引导程序生成弹出框的方式有关，它必须从某个地方克隆它，这意味着当我这样做时，`a(:class, 'my_link').click`它会找到实际弹出框从中克隆的隐藏版本。

为了解决这个问题，我`a(:class, 'my_link').click`改为

```
container = div(:class, 'popover-content')
container.a(:class, 'my_link').click 
```

这使它更具体，并避免找到重复的元素。

# android - 失败的活页夹事务android位图

> ID：16014194
> 
> 赞同：2
> 
> 时间：2013-04-15T11:38:07.757
> 
> 标签：android, android-camera, bitmapimage

请在下面找到我正在尝试的代码片段。

```
PictureCallback mPicture = new PictureCallback() {
@Override
public void onPictureTaken(byte[] data, Camera camera) {            
Bitmap bMap = BitmapFactory.decodeByteArray(data, 0, data.length);
String encoded = encodeTobase64(bMap);
Intent i = new Intent(Photocapture.this, ConfirmCapture.class);
i.putExtra("img", encoded);
startActivity(i);           
}
};
protected String encodeTobase64(Bitmap image) {
Bitmap immagex = image;
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
immagex.compress(Bitmap.CompressFormat.JPEG, 100, baos);
byte[] b = baos.toByteArray();
String imageEncoded = Base64.encodeToString(b,Base64.DEFAULT);      
return imageEncoded;
} 
```

当我执行此操作时，我的活页夹事务失败。我正在开发一个自定义相机应用程序。任何输入都将对继续进行有很大帮助！

# code-coverage - Sonar-Cobertura 自定义过滤器

> ID：16014201
> 
> 赞同：0
> 
> 时间：2013-04-15T11:38:27.013
> 
> 标签：code-coverage, sonarqube, cobertura

我通过 sonar-maven plugin 在我的项目中使用声纳。我正在使用 Cobertura 插件进行代码覆盖率分析。我想从代码覆盖率报告中排除一些模块/类。

我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:14:51.450

您可以使用 sonar.coverage.exclusions 来不报告项目某些文件的覆盖范围。

您可以在项目设置中的“Exclusions > Code Coverage”类别中找到此属性。

[![在此处输入图像描述](https://i.stack.imgur.com/fV0rp.png)](https://i.stack.imgur.com/fV0rp.png)

# entity-framework - DatabaseGeneratedOption.Identity 查询

> ID：16014202
> 
> 赞同：2
> 
> 时间：2013-04-15T11:38:28.987
> 
> 标签：entity-framework

我首先将框架 4.5 与 EF5 数据库一起用于现有数据库，该数据库没有为大多数表打开身份插入。我正在使用的数据库也有现有数据。我正在尝试打开数据库生成的身份。

EF5 做到了，我的实体的地图显示

```
this.Property(t => t.ActionId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None); 
```

我已经更新到

```
this.Property(t => t.ActionId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

我运行了 Update-Database -Verbose 它说：

```
No pending code-based migrations.
Applying automatic migration: 201304151128390_AutomaticMigration.
ALTER TABLE [dbo].[Action] ALTER COLUMN [ActionId] [int] NOT NULL 
```

如果我在 SqlMS 中打开表设计器，Identity Specification 仍然设置为 No。我检查了我的数据库连接并且可以在同一个表中添加一个新列。我也尝试过毫无乐趣地切换到数据注释：

```
[DatabaseGenerated(DatabaseGeneratedOption.Identity)] 
```

我错过了一步吗？

提前谢谢罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T17:57:48.303

我的代码也遇到了同样的问题，然后找到了使用 [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)] 的提议，但这仍然没有帮助我。在此步骤之后，我为我的关键属性留下了 [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)] 注释，并将身份规范手动设置为是，并增加 1。我成功了。我认为这可能是 asp.net 中的一个错误

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-16T11:27:55.740

您可以通过删除数据库并在包控制台管理器中重新执行 Update-Database -Verbose 命令来实现目标。

# php - 剑道自动完成搜索多列

> ID：16014205
> 
> 赞同：4
> 
> 时间：2013-04-15T11:38:56.327
> 
> 标签：php, autocomplete, kendo-ui, kendo-grid

我在我的 KendoGrid 中使用了 kendo Auto Complete，它现在工作正常，但它只搜索或仅从一列中获取数据，

我希望它在多个列中进行搜索。

这是我在 KendoGrid 中的自动完成代码。

```
 $(function(){
    $("#EmployeeGrid").kendoGrid({
        dataSource:{
            serverPaging: true,
            serverFiltering: true,
            pageSize: 5,
            transport: {
                read: "<?php echo base_url() ?>index.php/hr_management/manage_hr/list_view"
            },
            schema:{
                data: "data",
                total: "total"
            }
        },
        toolbar: kendo.template($("#toolbarTemplate").html()),
        pageable: {
            input:true,
            numeric:false
        },
        columns: [
            {
                field: "EmployeeID",
                hidden:true
            },
            {
              field: "FileNo",
              title: "File Number"
            },
            {
                template:"#= FirstName # #= LastName #",
                title: "Full Name"
            },
            {
                field:"City",
                title:"City"
            },
            {
                field:"AddressLine1",
                title:"Address 1"
            },

            {
                field:"WorkPhone",
                title:"WorkPhone"
            },
            {
                field:"MobileNo",
                title:"Mobile No"
            },
            {command: { text: "View", click: showDetails }, title: " ", width: "140px"},
            {command: { text: "Edit", click: EditUserDetails }, title: " ", width: "140px"}
        ]
    });

});
var autoCompleteUsers = $("#employees").kendoAutoComplete({
    minLength: 3,
    dataTextField: "FileNo",
    dataSource: {
        serverFiltering: true,
        transport: {
            read: {
                type: "GET",
                dataType: "json",
                contentType:'application/json; charset=utf-8',
                url: "<?php echo base_url() ?>index.php/hr_management/manage_hr/search_employee/",
                data: function (arg){
                    return {FileNo : autoCompleteUsers.data("kendoAutoComplete").value()};
                }
            }
        }
    },
    change: onChangeAutoComplete
});
function onChangeAutoComplete(){
    var value = this.value();
    var grid = $('#EmployeeGrid');
    if (value) {
        grid.data("kendoGrid").dataSource.filter({ field: "FileNo", operator: "Contains", value: value });
    } else {
        grid.data("kendoGrid").dataSource.filter({});
    }
}

function showDetails(e) {
    e.preventDefault();
    $('.action_button').html('');
    var row = $(e.target).closest("tr");
    var item = $("#EmployeeGrid").data("kendoGrid").dataItem(row);
    $.ajax({
        type: "POST",
        url: "<?php echo base_url().'index.php/hr_management/manage_hr/view_employee_profile/'?>"+JSON.parse(item.EmployeeID),
        success: function(output_string){
            var data = output_string.split("MyMark_Employee");
            $('.second_column_content_container').html(data[0]);
            $('.action_button').html(data[1]);

            $("#createEmployee").hide();
        },
        error: function(data){
            alert("error");
        }
    });

}

function EditUserDetails(e) {
    e.preventDefault();
    $('.action_button').html('');
    var row = $(e.target).closest("tr");
    var item = $("#EmployeeGrid").data("kendoGrid").dataItem(row);
    $.ajax({
        type: "POST",
        url: "<?php echo base_url().'index.php/hr_management/manage_hr/edit_employee_details/'?>"+JSON.parse(item.EmployeeID),
        success: function(output_string){
            var data = output_string.split("MyMark_Employee");
            $('.second_column_content_container').html(data[0]);
            if(data[1]!= " ")
            {
                $('.action_button').html(data[1]);
            }

        },
        error: function(data){
            alert("error");
        }
    });

} 
```

该怎么办？我需要定义多个`dataTextField:`吗？需要建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T21:06:52.303

好问题。我想知道同样的事情。

查看剑道代码（kendo.web.min.js）后，似乎无法为属性 dataTextField 定义多个字段。看起来只允许一个字段。

一种解决方法是在模型中添加一个字段，其中包括（以字符串形式）您要搜索的所有字段。然后将 dataTextField 设置为该字段。这不是一个理想的解决方案，但它有效。

# spring - 来自 Spring 应用程序的旧式 RMI 调用

> ID：16014207
> 
> 赞同：0
> 
> 时间：2013-04-15T11:39:08.347
> 
> 标签：spring, rmi, legacy, corba

我们有一个服务在另一台服务器上运行，可以使用旧的 rmi 调用 (Corba) 进行访问。该服务器与Spring无关，位于另一个地方，我们对开发和源码没有任何影响。

我们有一个位于 weblogic 服务器中的 Spring 应用程序，在这个应用程序中，我们有一些代理类，它们正在访问普通的 RMI 并获取数据。不幸的是，这种方法意味着我们不能使用spring bean注入，也不能在我们的单元测试中模拟代理类。

所以我们正在搜索一种方法，从 Spring (Bean) 上下文中访问遗留的 rmi。我在网上搜索，但总是得到相同的结果，服务器也是一个 spring 应用程序。

谁能给我一个线索，我应该在哪里搜索或者是否有任何框架、库等可以帮助我解决问题。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:18:51.040

您可以使用`RmiProxyFactoryBean`来访问传统的 RMI 服务，而不仅仅是 Spring RMI Invokers。

对于传统的 RMI 代理，使用 RMI 服务接口或镜像 RMI 服务接口的接口，但不要声明`RemoteExceptions`.

# latex - Doxygen 生成的 Latex 文件，LATEX_HEADER & INPUT 标签的使用

> ID：16014208
> 
> 赞同：1
> 
> 时间：2013-04-15T11:39:14.713
> 
> 标签：latex, doxygen, pdflatex

我试图用 Doxygen 生成 Latex 文件。我使用“INPUT”标签来获取“.h”文件并使用 LATEX_HEADER 来定制我自己的 HEADER。问题是两个文件的集成。如果我同时使用标签 INPUT = /../../xxx.h 文件和 LATEX_HEADER = ../../yyy.tex，则会出现许多编译错误。如果我像只使用 INPUT 标记一样单独使用它们，它会生成 Doxygen Header 并获得没有错误的 pdf，或者如果我只使用 LATEX_HEADER，它可以用我自己的 HEADer 生成正常，但不能同时使用两者。任何人都可以建议我任何事情。

# sql-server - 在 SQL Server 2012 中插入缺失值

> ID：16014213
> 
> 赞同：0
> 
> 时间：2013-04-15T11:39:23.713
> 
> 标签：sql-server, tsql, interpolation, missing-data

我想在 SQL Server 2012 中插入缺失值并相应地更新我的表

例如我的数据如下：

```
Week_Number  Var1   Output_Var
1            10         10
2            20         20
3           NULL        22.5
4           NULL        25.0
5           NULL        27.5
7            30         30 
```

var1 的输出应该类似于 Output_Var 变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-02T08:59:00.637

```
declare @alo as table(x int, y float);
insert into @alo (x,y) values (1,10);
insert into @alo (x,y) values (2,20);
insert into @alo (x,y) values (3,null);
insert into @alo (x,y) values (4,null);
insert into @alo (x,y) values (5,null);
insert into @alo (x,y) values (6,30);

SELECT this.x as [X], isnull(this.y,
    (
        SELECT    CASE WHEN next.x IS NULL  THEN prev.y
                       WHEN prev.x IS NULL  THEN next.y
                       WHEN next.x = prev.x THEN prev.y
                       ELSE prev.y + ( (next.y - prev.y) * (this.x - prev.x) / (next.x - prev.x) )
                  END 
        FROM
            ( SELECT TOP 1 X, Y FROM @alo WHERE x <= this.x and y is not null ORDER BY x DESC ) AS prev
            CROSS JOIN
            ( SELECT TOP 1 X, Y FROM @alo WHERE x >= this.x and y is not null ORDER BY x ASC ) AS next
        )) as [Y]
FROM @alo this order by this.x ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:43:40.250

您可以使用类似的东西（来自[this](http://en.wikipedia.org/wiki/Simple_linear_regression#Numerical_example)）：

```
declare @alo as table(x int, y float);
insert into @alo (x,y) values
(1,10),
(2,20),
(3,null),
(4,null),
(5,null),
(6,30)
;
declare @sumtable as table(sx int ,sy int ,sx2 int,sy2 int ,sxy int, n int );

insert into @sumtable
select 
SUM(d.x) as sx,
SUM(d.y) as sy,
SUM(d.x2) as sx2,
SUM(d.y2) as sy2,
SUM(d.xy) as sxy,
count(0) as n
from (

    select
    x, x*x as x2,
    y, y*y as y2,
    x*y as xy
    from @alo
    where x is not null and y is not null
)  D

declare @sx int = (select sx from @sumtable), 
        @sx2 int = (select sx2 from @sumtable),
        @sy int= (select sy from @sumtable), 
        @sy2 int= (select sy2 from @sumtable),
        @sxy int= (select sxy from @sumtable),
        @n int =  (select n from @sumtable);

declare @b as float = cast((@n*@sxy- @sx*@sy) as float)/ cast((@n*@sx2 - @sx*@sx) as float);
declare @a as float = (1.0/@n)*@sy - @b*(1.0/@n)*@sx;

update @alo 
set y = @b*x+@a
where y is null

select * from @alo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:48:25.737

[您可以使用简单的线性回归](http://en.wikipedia.org/wiki/Simple_linear_regression)技术估计您的缺失值，请参阅“[数值示例](http://en.wikipedia.org/wiki/Simple_linear_regression#Numerical_example)”。

# java - Selenium WebDriver 基本 java 项目中的错误

> ID：16014219
> 
> 赞同：1
> 
> 时间：2013-04-15T11:39:37.017
> 
> 标签：java, selenium, selenium-chromedriver, timeoutexception

在 Eclipse 中运行 seleniumWebdriver 项目时出现以下错误。

```
Started ChromeDriver
port=49011
version=26.0.1383.0
log=C:\Users\testuser\workspace\WebDriver_Project\chromedriver.log
Exception in thread "main" org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.
Build info: version: '2.31.0', revision: '1bd294d', time: '2013-02-27 20:53:56'
System info: os.name: 'Windows 8', os.arch: 'amd64', os.version: '6.2', java.version: '1.7.0_17'
Driver info: driver.version: ChromeDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:548)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:216)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:111)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:115)
    at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:161)
    at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:107)
    at test.test.main(test.java:17)
Caused by: org.openqa.selenium.WebDriverException: Timed out waiting for driver server to start.
Build info: version: '2.31.0', revision: '1bd294d', time: '2013-02-27 20:53:56'
System info: os.name: 'Windows 8', os.arch: 'amd64', os.version: '6.2', java.version: '1.7.0_17'
Driver info: driver.version: ChromeDriver
    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:165)
    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:62)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:527)
    ... 6 more
Caused by: org.openqa.selenium.net.UrlChecker$TimeoutException: Timed out waiting for [http://localhost:49011/status] to be available after 20014 ms
    at org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:104)
    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:163)
    ... 8 more
Caused by: com.google.common.util.concurrent.UncheckedTimeoutException: java.util.concurrent.TimeoutException
    at com.google.common.util.concurrent.SimpleTimeLimiter.callWithTimeout(SimpleTimeLimiter.java:143)
    at org.openqa.selenium.net.UrlChecker.waitUntilAvailable(UrlChecker.java:79)
    ... 9 more
Caused by: java.util.concurrent.TimeoutException
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at com.google.common.util.concurrent.SimpleTimeLimiter.callWithTimeout(SimpleTimeLimiter.java:130)
    ... 10 more 
```

我在 Eclipse 中的代码如下。我添加了 selenium java zip 文件附带的所有 jar 文件

```
package test;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;

public class test {

    public static void main(String[] args) {
        System.setProperty("webdriver.chrome.driver", "C:\\Users\\testuser\\Documents\\SW\\Testing\\selenium-2.31.0\\chromedriver.exe");
        WebDriver driver = new ChromeDriver();
        driver.get("https://www.google.com.au/");
        WebElement element = driver.findElement(By.name("q"));
        element.sendKeys("mysql excel 2013");
        element.submit();
    }

} 
```

请帮助我找出我错在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T17:35:40.037

有人知道吗？如果您在没有 grails 的情况下独立运行它，我的测试工作得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:55:28.423

selenium 似乎在等待端口 49011 上的一些响应。可能是其他一些应用程序阻塞了该端口。使用 netstat 检查打开的端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-30T15:55:37.890

您仍在使用 selenium -2.31.0 `\\selenium-2.31.0\\chromedriver.exe`。请`3.11.0`从[这里安装最新版本的 selenium](https://www.seleniumhq.org/download/)

也请从[这里](https://sites.google.com/a/chromium.org/chromedriver/downloads)安装最新版本的 chrome 驱动程序。如果不是最新的任何更高的东西，那么`version 2.35`应该可以工作。

然后运行你的测试，让我们知道你看到了什么。

# c - 在单个 udp 服务器中处理 40 个客户端的可能算法

> ID：16014221
> 
> 赞同：1
> 
> 时间：2013-04-15T11:39:38.937
> 
> 标签：c, windows, multithreading, network-programming, udp

我正在开发 udp 服务器/cient 应用程序。我希望我的服务器一次能够处理 40 个客户端。现在我使用的方法是创建一个连续接收数据的接收线程和一个发送数据的发送线程（如果需要）。由于套接字队列足够大，可以缓冲来自 40 个客户端的数据，所以我只使用一个接收线程。实现这种单服务器多客户端应用程序的其他可能方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:58:44.433

您当然可以运行多个服务器线程，但每个线程都必须侦听不同的 UDP 端口。如果这对您来说没问题，请尝试多个线程，但不要超过您拥有的处理器内核数。由于线程切换，除此之外的任何事情都会减慢整个过程。

您可以尝试的另一件事是将服务器进程的优先级设置为实时。UDP 数据包是易变的——如果你捕捉它们的速度太慢，它们就会消失。但是，这种高优先级带来了风险：如果您的服务器没有正确编写，它可能会消耗 100% 的 CPU 并且渲染系统实际上会挂起。它也不应该让 CPU 的其他进程饿死，但同样，如果它写得很好，例如不使用`Thread.Sleep`

但是，如果您的系统在最大负载下可以在当前设计下正常工作，那么您可以进行测试，那么最好的办法就是什么都不做。

# phpmailer - phpmailer代码在函数内不起作用

> ID：16014224
> 
> 赞同：0
> 
> 时间：2013-04-15T11:39:43.337
> 
> 标签：phpmailer, php

我在函数中有下面的代码..但是它从不将附件添加到电子邮件中。电子邮件很好，但没有附件。

但是，如果我从函数中删除代码并向其中添加一个单独的文件（没有函数部分）并且在同一目录中它可以正常工作。

为什么在函数中不添加附件？

```
function resendOrder()
{
    //global $siteEmailFrom, $siteEmailName, $dir;
    require_once('OrderMailer/class.phpmailer.php');// need this to send email

    $mail = new PHPMailer();
    // Now you only need to add the necessary stuff

    // HTML body

    $body = "Testing";

    // And the absolute required configurations for sending HTML with attachement
    $mail->From      = "mark@******.co.uk"; 
    $mail->AddAddress("mark@******.co.uk", "My-webpage Website");
    $mail->Subject = "test for phpmailer-3";
    $mail->MsgHTML($body);

    $mail->AddAttachment("ploxy.jpg");

    if(!$mail->Send()) {
        echo "There was an error sending the message";
        exit;
    }
    else{
        echo "Message was sent successfully";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:47:33.730

不能引用附件名称“ploxy.jpg”，即：不能引用文件名。

你必须参考临时文件名，你可以做类似的事情

```
$_FILES['ploxy']['tmp_name']; // temp_name can be anything 
```

或者更准确地说：

```
$filePath = "../images/"; // Path to image, can be the empty string.
$ploxy = $_FILES['ploxy']['tmp_name'];
$mail->AddAttachment($filePath, $ploxy); 
```

基本上：您必须先将文件上传到脚本，然后才能发送；[http://php.net/manual/en/features.file-upload.php](http://php.net/manual/en/features.file-upload.php)

# jsf - 注册用户后Bean null？

> ID：16014225
> 
> 赞同：1
> 
> 时间：2013-04-15T11:39:47.773
> 
> 标签：jsf, exception, jsf-2

我有一个bean `UserControl`，`SessionScope`在系统用户之后`register`，他/她会尝试登录系统，对吗？

使用相同的bean，但是在第二次尝试登录一次（例如使用错误的密码）后，出现我的bean的异常`null`，为什么？

我在 and 使用`composition`相同`register form`的`login form`：

```
<!DOCTYPE html>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:ui="http://java.sun.com/jsf/facelets">

    E-Mail:<h:message id="m_email" for="email" styleClass="red" /><br/>
    <h:inputText id="email" value="#{userC.user.email}" maxlength="45" validatorMessage="e-mail inválido" >
        <f:validateLength minimum="6" maximum="45" />
        <f:ajax event="blur" render="m_email" />
    </h:inputText>
    <br/>
</ui:composition> 
```

第一次工作，但第二次，不要。给我这个例外：

```
/resources/jsf/composition/body/user/form/email.xhtml @9,108 value="#{userC.user.email}": Target Unreachable, 'null' returned null 
```

这是我的豆子，`UserControl`：

```
@ManagedBean(name="userC")
@SessionScoped
public class UserControl  implements Serializable{
    private static final long serialVersionUID = 7708365499838642904L;

    @EJB UserEAO userEAO;
    @EJB AddressEAO addressEAO;

    private User user;

    private Message message;

    /*
     * Variable
     */
    private boolean logged;

    public UserControl(){
        user = new User();
        user.setAddressCity(new AddressCity());
        user.setAddressState(new AddressState());
        user.setAddressCountry(new AddressCountry());

        logged = false;
    }
  .. methods
} 
```

是错误的启动我`objects`的`constructor`吗？

**更新** 完整代码`UserControl`：

```
package com.hi.mvc.controller;

import java.io.IOException;
import java.io.Serializable;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.ejb.EJB;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;

import com.hi.mvc.eao.AddressEAO;
import com.hi.mvc.eao.UserEAO;
import com.hi.mvc.model.AddressCity;
import com.hi.mvc.model.AddressCountry;
import com.hi.mvc.model.AddressState;
import com.hi.mvc.model.User;
import com.hi.utility.Crypto;
import com.hi.utility.Email;
import com.hi.utility.Message;

@ManagedBean(name="userC")
@SessionScoped
public class UserControl  implements Serializable{
        private static final long serialVersionUID = 7708365499838642904L;

        @EJB UserEAO userEAO;
        @EJB AddressEAO addressEAO;

        private User user;

        private Message message;

        /*
         * Variable
         */
        private boolean logged;

        public UserControl(){
                user = new User();
                user.setAddressCity(new AddressCity());
                user.setAddressState(new AddressState());
                user.setAddressCountry(new AddressCountry());

                logged = false;
        }

        /*
         * CRUD
         */
        public String register(){
                if (userEAO.find(user.getEmail()) == null){
                        defineUser();

                        message = userEAO.create(user);
                        //sending user email confirmation
                        if (message.getCode() == 0) {
                                message = new Message(1);
                                message.setEmail(user.getEmail());

                                sendConfirmationEmail(user);
                                return "/pages/system/message.xhtml?faces-redirect=true";
                        }else
                                //user already registered and trying to register again
                                message = new Message(-1002);
                }

                addMessage();
                return null;
        }

        public String update() {
                message = userEAO.update(user);

                this.addMessage();
                return null;
        }

        public String delete(){
                message = userEAO.delete(user);
                if (message.getCode() >= 0)
                try {
                        ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
                        ec.invalidateSession();

                        message = new Message(3001);
                        addMessage();

                        ec.redirect(ec.getRequestContextPath() + "/pages/system/message.xhtml");
                } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
                addMessage();
                return null;
        }

        /*
         *  Log in/off
         */
        public String login(){
                String password = user.getPassword();
                user = userEAO.find(user.getEmail());
                // if user was found
                if ( user != null ){
                        if ( user.getEmailConfirmed()){
                                // with facebook registration, password is empty, so we avoid login empty and check the password
                                if ( !user.getPassword().isEmpty() && Crypto.check(password, user.getPassword())){
                                        //user = addressEAO.findByUser(user.getId());
                                        logged = true;

                                        return "/index.xhtml?faces-redirect=true";
                                }else
                                        message = new Message(-2000);

                        }else
                                message = new Message(-1003);
                }else
                        message = new Message(-2000);

                addMessage();
                return null;
        }

        public void logout(){
                try {
                        ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
                        ec.invalidateSession();
                        ec.redirect(ec.getRequestContextPath() + "/index.xhtml");
                } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
        }

        /*
         * Functions
         */
        public void defineUser(){
                encryptPassword(user);
                user.setMemberSince(new Date());
                user.setAcceptanceRate(0);
                user.setResponseRate(0);

                // user do not confirm email yet
                user.setEmailConfirmed(false);

                // set address to be empty
                user.getAddressCity().setCity(" ");
                user.getAddressState().setState(" ");
                user.getAddressCountry().setCode(" ");
                defineAddress();
        }

        public void defineAddress(){
                AddressCity addressCity = addressEAO.findCity(user.getAddressCity().getCity());
                if (addressCity == null){
                        addressCity = new AddressCity();
                        addressCity.setCity(user.getAddressCity().getCity());
                        addressEAO.createCity(addressCity);
                }
                user.setAddressCity(addressCity);

                AddressState addressState = addressEAO.findState(user.getAddressState().getState());
                if (addressState == null){
                        addressState = new AddressState();
                        addressState.setState(user.getAddressState().getState());
                        addressEAO.createState(addressState);
                }
                user.setAddressState(addressState);

                AddressCountry addressCountry = addressEAO.findCountry(user.getAddressCountry().getCode());
                if (addressCountry == null){
                        addressCountry = new AddressCountry();
                        addressCountry.setCode(user.getAddressCountry().getCountry());
                        addressEAO.createCountry(addressCountry);
                }
                user.setAddressCountry(addressCountry);
        }

        /*
         * Date
         */
        public Date convertDate(String date){
                try {
                        DateFormat formatter = new SimpleDateFormat("MM/dd/yy");  
                        return (Date)formatter.parse(date);
                } catch (ParseException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
                return null;
        }

        /*
         * E-Mail
         */
        public void sendConfirmationEmail(User u){
                Email email = new Email();
                email.setUser(u);
                email.setSubject("Hotel Informal - Por favor, confirme seu endereço de email");
                email.simpleEmail();
        }

        public void sendWelcomeEmail(User u){
                Email email = new Email();
                email.setUser(u);
                email.setSubject("Hotel Informal - Olá, seja bem-vindo(a)");
                email.simpleEmail();
        }

        public String resendEmailConfirmation(){
                sendConfirmationEmail(user);
                message = new Message(2);
                message.setEmail(this.user.getEmail());

                return "/pages/system/message.xhtml?faces-redirect=true";
        }

        /*
         * Password
         */
        public void encryptPassword(User u) {
                if (u.getPassword() != null){
                        u.setPassword(Crypto.encrypt(u.getPassword()));
                }
        }

        public String changePassword(){
                encryptPassword(user);
                message = userEAO.update(user);
                if (message.getCode() >= 0)
                        message = new Message(2002);

                addMessage();
                return null;
        }

        public Message checkPassword(User user) {
                if (user == null)
                        return new Message(-3000);

                if (Crypto.check(user.getPassword(), user.getPassword())) {
                        return new Message(1);
                } else
                        return new Message(-2000);
        }

        public String forgotPassword(){
                user = userEAO.find(user.getEmail());
                if (user != null){
                        Email email = new Email();
                        email.setUser(user);
                        email.setSubject("Hotel Informal - Redefinir senha");
                        email.simpleEmail();

                        message = new Message(6);
                        message.setEmail(user.getEmail());
                }else
                        message = new Message(-1004);

                addMessage();
                return "/pages/system/message.xhtml?faces-redirect=true";
        }       

        public String resetPassword(){
                encryptPassword(user);
                userEAO.update(user);

                Email email = new Email();
                email.setUser(user);
                email.setSubject("Hotel Informal - Senha redefinida");
                email.simpleEmail();

                message.setEmail(user.getEmail());
                message = new Message(2001);

                addMessage();
                return "/pages/system/message.xhtml?faces-redirect=true";
        }

        private void addMessage(){
                FacesMessage fMessage = new FacesMessage(message.getMessage());
                FacesContext.getCurrentInstance().addMessage(null, fMessage);
        }

        // get's & set's

        public Message getMessage() {
                return message;
        }

        public void setMessage(Message message) {
                this.message = message;
        }

        public User getUser() {
                return user;
        }

        public void setUser(User user) {
                this.user = user;
        }

        public boolean isLogged() {
                return logged;
        }

        public void setLogged(boolean logged) {
                this.logged = logged;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:27:40.817

遵循 and 的建议`maple_shaft`并`kolossun`不足以解决我的问题，但遵循[这个](https://stackoverflow.com/questions/13858154/target-unreachable-null-returned-null-in-jsf-form)建议，检查方法中的is`user`是否是。`null``public User getUser()`

```
@PostConstruct
public void init(){
    if (user == null){
        user = new User();
        logged = false;
    }

    if (user != null && user.getAddressCity() == null)
        user.setAddressCity(new AddressCity());

    if (user != null && user.getAddressState() == null)
        user.setAddressState(new AddressState());

    if (user != null && user.getAddressCountry() == null)
        user.setAddressCountry(new AddressCountry());
} 
```

和 ：

```
public User getUser() {
    init();
    return user;
} 
```

通过这种方式，我确保`user`始终初始化对象和其他类。我仍然不明白为什么`null`办理登机手续`@PostConstruct`还不够，它一直给我同样的错误。

# iphone - 设备中的临时认证问题？

> ID：16014227
> 
> 赞同：-4
> 
> 时间：2013-04-15T11:39:48.680
> 
> 标签：iphone, ios

当我在设备上单击我的应用程序时，它会抛出诸如“您的配置证书已过期”之类的消息。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:43:36.460

您需要更新您的证书，然后更新配置文件以使用该新证书。

从钥匙串访问开始创建 CSR，然后转到此处： [https ://developer.apple.com/devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/index.action)

# c++ - 最佳实践：如何解释/处理 QDataStream？

> ID：16014230
> 
> 赞同：1
> 
> 时间：2013-04-15T11:39:54.250
> 
> 标签：c++, qt, serialization, qbytearray

我需要处理由另一个非 Qt 程序创建的定义结构的流式二进制数据 (QDataStream)。我想知道解释这些数据的最佳做法是什么。假设数据在电报中是结构化的（提供了结构定义），如下所示，不能由我自己更改：

4字节头| 2字节序号| 1 字节校验和 | 10字节数据

我看到以下在“电报”类中处理数据的可能性：

1.  Telegram 类有一个私有的 QByteArray 成员变量。使用 readRawData 方法一次从流中读取所有数据（17 个字节）并将其存储在其中。变量是用公共方法访问和解释的，比如`return (array.at(4)<<8) + array.at(5)`序列号，不是很优雅。
2.  Telegram 类有一个与结构联合的公共 char[17] 成员变量。使用 readRawData 从流中读取所有数据并存储在其中。之后访问变量时，这仅在结构上完成，就像`telegramstruct.squenceNumber`我看到这种方法的潜在问题一样，如字节序和填充。
3.  Telegram 类对于每个电报字段都有私有成员变量，例如`QString strHeader`. 从流中读取电报时，数据直接存储在这些变量中。对于基本类型，使用 readRawData 或 operator>> 完成读取。

代码应该尽可能快，因为要处理大量数据。我在带有 MinGW 的 Windows 上使用 Qt 5.0.1。

我的问题：

*   上述解决方案中哪一个是最佳实践和快速，还是有更好的方法？
*   像在 1 中一样一次读取是否比在 3 中读取 4 字节、2 字节、1 字节……更快？
*   使用 1 和 3，我不能使用提供的具有已定义结构的头文件，这是不好的做法吗？
*   是否有可能与 QByteArray 和结构建立某种“联合”？
*   如何使用解决方案 3 轻松计算校验和？

非常感谢您的意见和提示。

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:38:01.637

Well, sorry dont have that much time to write code examples, but will try to give a brief hints. 1) Performance issue. As soon as you have performance constrains first thing to optimise is an amounts of actual reads from the stream from where data are coming. Whatever it's File/Socket/etc it's anyway QIODevice. So first thing to do is to maintain some kind of QByteArray where you adding all data available on a QIODevice on every ready attempt/handling data received notification. So below I assume there is certain QByteArray m_rawData which holds currently unprocessed bytes, which can be some amount of Telegrams + last telegram which can be received partially.

2) I would make a class like Telegram which holds telegram data, roughly saying

```
class Telegram {
       QString       header;
       int           sequenceNumber;
       unsigned char checkSum;
       QByteArray    data;

       ...

       bool          checkSumOK();  // check is checksum is OK for provided data

} 
```

with constructors and operators on your taste (you can implement copy constructor/etc).. Then I would extend this class with ( <<, >>) operators to support QDataStream which operates on temporary buffer mentioned in part 1).

So general concept is that you read data from the stream to temporary buffer as soon as possible and after read is done you fetch from resulted buffer as many Telegram's instances as possible. Then you work with QDataSteam applied on a QByteArray you can safely use read 4 bytes, read 1 byte etc calls without having that much performance impact because in general it's mostly about shifting pointers.

3) Of course if you talking about extreme condition.. you can think of unions (as being mentioned in previous answer) to make direct copy of raw data on top of a aligned structure but that way requires much more careful programming (especially taking in consideration x32/x64 archs as well as big/little endians platforms)

# iphone - Game Center 未在排行榜 iPhone 中显示分数

> ID：16014233
> 
> 赞同：2
> 
> 时间：2013-04-15T11:40:11.337
> 
> 标签：iphone, ios, objective-c, xcode, game-center

我已经在我的项目中集成了游戏中心，我可以登录游戏中心并打开排行榜但它没有显示任何分数。我试图在排行榜中提交分数，它返回成功，但它没有显示在那里。

提交分数

```
-(void)submitScore
{
    GKScore *myScoreValue = [[[GKScore alloc] initWithCategory:@"something"] autorelease];
    myScoreValue.value = [prefs integerForKey:@"total"];

    [myScoreValue reportScoreWithCompletionHandler:^(NSError *error){
        if(error != nil){
            NSLog(@"Score Submission Failed");
        } else {
            NSLog(@"Score Submitted");
        } 
    }];
} 
```

我已经搜索过这个问题，我发现[了这个](https://stackoverflow.com/questions/9121089/ios-game-center-sandbox-leaderboards-show-no-score)，[这个](https://stackoverflow.com/questions/8720316/ios-game-center-scores-not-showing-on-leaderboard-in-sandbox?lq=1) 我都试过了，但没有工作。

我在启动应用程序时得到了这个。

```
<Info>: 16:39:10.550238 com.apple.AVConference: GKSConnSettings: set server: {
    "gk-cdx" = "17.173.254.218:4398";
    "gk-commnat-cohort" = "17.173.254.220:16386";
    "gk-commnat-main0" = "17.173.254.219:16384";
    "gk-commnat-main1" = "17.173.254.219:16385";
} 
```

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:31:59.317

给你的一些笔记

```
« Make sure leaderboard is setup in iTunesConnect with Id: something

« Login gamecenter app with testUser from same iTunesConnect account

« Try myScoreValue.value = 500 once, sometimes small values are neglected in sandbox mode.

« Confirm - Logged in to sandbox mode 
```

![在此处输入图像描述](https://i.stack.imgur.com/X24ss.png)

# mvvm - 通用表单域的咨询/编辑模板

> ID：16014240
> 
> 赞同：0
> 
> 时间：2013-04-15T11:40:29.137
> 
> 标签：mvvm, knockout.js

在我的淘汰赛表格中，我有很多这样的重复代码：

```
<div data-bind="if:Id == 0">
My form field : <input type="text" name="MyFormField" data-bind="value:MyFormField />
</div>
<div data-bind="if:Id != 0">
My form field consultable : <span data-bind="text:MyFormField"></span>
</div> 
```

如您所见，如果 Id = 0，我会显示一个输入，如果只是为了咨询，我会显示一个简单的跨度。

是否可以制作一个通用模板？这个想法是：

1.  调用模板并引用我要显示的属性
2.  如果 Id == 0，模板呈现一个输入，相反，模板呈现一个跨度

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:51:32.067

查看[文档](http://knockoutjs.com/documentation/template-binding.html)的注释 5 ，您可以动态选择要用于部分的模板。在你的情况下，它会是这样的：

```
<ul data-bind='template: { name: templateName }'> </ul> 
```

然后将计算属性添加到您的视图模型：

```
templateName = ko.computed(function()
{
    return Id() === 0 ? 'inputTemplate' : 'spanTemplate';
}); 
```

然后将两个模板命名为与计算中的两个命名选项相同：

```
<script type="text/html" id="inputTemplate">
    <input type="text" data-bind="text: name" />
</script>

<script type="text/html" id="spanTemplate">
    <span data-bind="text: name" />
</script> 
```

# c# - EF edmx 继承

> ID：16014243
> 
> 赞同：1
> 
> 时间：2013-04-15T11:40:35.637
> 
> 标签：c#, entity-framework, entity-framework-5

## 用例

1.  围绕实体框架实施 DAL 以支持未来的 ORM 替换
2.  DAL 是为了部分暴露 EF 生成的类
3.  与 Model-First 一起使用的实体框架（DB 尚不存在）

## 分析

*   要启用 EF 生成的类的部分公开，必须确保不应在上下文之外公开任何 EF 导航道具，此外，由于安全原因，不应直接公开值的子集。
*   为此，最佳解决方案是使用继承，其中 ~local~ 属性在基类中实现，导航属性被添加到派生类，这样，DAL 只能暴露基类，优雅地避免脱离上下文导航道具曝光。

## 例子

```
class UserInfo
{
   public int      UserId       { get; set; }
   public string   DisplayName  { get; set; }
   public DateTime CreationTime { get; set; }
   public DateTime LastModified { get; set; }
}

class UserProfile : public UserInfo
{
   // I don't want this to be directly exposed out of the DAL
   public string ConfirmationToken { get; set; }
   // Navigation property
   public virtual ICollection<UserVariant> Variants { get; set; }
}

class DAL
{
   // Returned value include no navigation properties
   public UserInfo GetUser(int UserId) { ... }
} 
```

## 要解决的问题

*   在使用“.edmx”文件的继承时，我希望相应的数据库表根据“UserProfile”生成，但是，派生类（UserProfile）的实体集名称设置为基类（UserInfo），省略了“确认令牌'。

**是否可以通过将“UserProfile”用作数据库表而不是 UserInfo 的引用来定义@“.edmx”的继承？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:15:32.910

解决方案是将“模型优先”转换为“代码优先”，并让 DB 模型类从公开所选方法（非导航属性）的接口继承，然后 DAL 将公开该接口，避免脱离上下文导航属性访问。

不幸的是，我没有找到针对上述问题的 Model-First 解决方案，不得不使用 Code-First 。

# php - PayPal IPN 通知收到同一付款的多个通知

> ID：16014245
> 
> 赞同：1
> 
> 时间：2013-04-15T11:40:41.887
> 
> 标签：php, codeigniter, paypal-ipn

我想知道为什么我会收到一次付款的多个 IPN 通知，以及如何阻止这种情况。我只想保留一个通知。

```
// STEP 2: Post IPN data back to paypal to validate

//$ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
$ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {

    // my stuff goes here

} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:29:03.260

我想到了两个可能性：

1.  如果您的处理脚本返回 HTTP 错误，PayPal 会重试通知。
2.  对于某些交易，PayPal 会发送多个通知。就像支票一样。或者当交易后来被取消/退款/撤销时。您需要为此检查付款状态字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-17T23:47:48.587

它看起来像一个非常旧的帖子，但我在 2019 年发现了同样的问题，您可以通过添加来简单地解决这个问题

```
 header("HTTP/1.1 200 OK"); 
```

在代码的第一行添加 http 标头 200 ok。

# python - 使用 Python 进行基于时间的数据分析

> ID：16014246
> 
> 赞同：7
> 
> 时间：2013-04-15T11:40:47.120
> 
> 标签：python, mongodb, hadoop, pandas, pytables

我有一个项目，物理传感器将数据发送到服务器。数据不定期发送 - 在某些东西激活传感器之后，但不低于每 20 分钟一次。在服务器上，数据存储在 Posgresql 数据库中。

数据结构如下：

```
Sensor Table
    sensor name - string
    sensor serial no - string
    sensor type - foreign key to types table

Sensor Data Table
    sensor - foreign key
    timestamp
    value 1 - boolean
    value 2 - boolean
    value 3 - integer
    value 4 - float
    ... 
```

预计总共不超过 100 个请求/秒。数据库中的数据记录应该保留 90 天，在某些情况下甚至更长（不仅仅是我之前想的 2 周）。因此，记录的总数不会超过 120 960 000/14 天。这是“安全”的估计。实际上，它可能会少 10 倍（10 个请求/秒，12 960 000 条记录）。

我需要对数据进行一些分析，例如：

1.  当新记录出现并且“值 2”为真时做某事
2.  当传感器 X 的“值 2”为真的时间超过某个声明的时间（50 分钟、1 小时或更长时间）时，做一些事情
3.  当传感器 X 在 24 小时内“值 2”的总真实时间超过某个声明的时间时执行某些操作
4.  当传感器 X 的“值 3”为真的时间超过某个声明的时间并且在此期间没有其他 XYZ 类型的传感器处于活动状态时，请执行某些操作...

上面的“声明时间”大于等于1秒。

整个服务器部分是在 Django 中开发的（和 django-rest-framework 来收集数据）。

问题是如何有效地进行此类数据分析，假设应该对数据和时间段进行实时或接近实时（1 秒）的监控以触发所需的操作。

我的想法：

1.  运行一个进程，每秒查询数据库以查找符合条件的记录并调用特定操作（可能需要超过 1 秒）

2.  为每种分析类型运行一些单独的进程（eventlet？），然后每 1 秒查询一次数据库并触发特定操作。

3.  每个传感器运行一个进程，持续向其订阅者报告：我在“值 2”上的正确时间超过 x 秒等。在该传感器的新数据到达后，进程被重置。像 zeromq 这样的发布-订阅解决方案可能会在这里使用吗？

4.  使用其他/更快的解决方案

    *   Mongodb - 问题可能是删除数据后（2 周）mongodb 的文件没有被压缩。
    *   Hadoop——对于这类问题来说是不是太大太复杂了？
    *   Pandas 和一些 HDF5 存储 - 问题可能在于它是否能够进行我上面描述的分析，并且可能还能够写入文件。但是..也可以与 mongo 一起使用。

提示？

更新。

目前对我来说似乎简单有效的解决方案是：

1.  数据到达传感器 A 后，运行所有测试并
2.  以如下方式将测试结果存储在一些“测试”表（或 redis）中：
    *   今天下午 1:15 运行动作“传感器打开时间超过”
    *   今天下午 1:30 运行动作“传感器打开时间超过 24 小时”...
3.  连续扫描上面的“测试”表，当它是今天下午 1:15 时，然后运行所需的操作，等等。
4.  当传感器 A 收到新信号时，再次运行所有测试，并重置“测试”表中的数据。

这将要求我在每次请求到达特定传感器时触发测试，但另一方面，我必须每 1 秒扫描一次“测试”表。

更新 2

我发现了 PyTables ( [http://www.pytables.org/moin/PyTables](http://www.pytables.org/moin/PyTables) )，看起来它非常适合我作为数据存储的用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:00:06.370

我的第一个尝试是在“传感器数据表”上创建一个多列索引，例如：

```
sensor->timestamp->value1 //Index 1
sensor->timestamp->value2 //Index 2
sensor->timestamp->value3 //Index 3
sensor->timestamp->value4 //Index 4 
```

看看你的 SQL 查询是否足够快。您可以通过 eventlet 或 cron 查询它。从性能的角度来看，只要此查询足够快，您使用哪个并不重要，它很可能是您的瓶颈。

另一个建议是尝试 MySQL 内存表，或 postgre 等价物（[PostgreSQL 中的内存表](https://stackoverflow.com/questions/7785419/in-memory-table-in-postgresql)）。

还有一个建议是尝试 Redis。您可以将“传感器数据”存储为排序集的集合；每个传感器 id 和 value 字段一个排序集，并按时间戳对数据进行排序。

```
 ZADD sensor_id:value1 timestamp value
 ZADD sensor_id:value2 timestamp value 
```

Redis 将需要一些应用程序逻辑来累积数据，但如果它们都适合 RAM，它会非常快。

回复：MongoDB。您可以获得良好的性能。只要您的可查询数据+索引可以放入RAM并且没有太多写锁。尽管运行 2 个提供重叠功能的重量级数据库是一种管理（和编码）负担。鉴于此，压缩并不是真正的问题。您可以在传感器数据上创建 TTL 索引，mongo 将删除 bg 线程中的旧数据。文件大小将在一段时间后保持不变。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:23:58.780

如果您的规则很简单或很少，您可以尝试使用 SQL 触发器来更新存储的视图，这可能会被快速查询。例如，假设您想要检测某个传感器已经激活了给定的时间，您可以有一个表格，其中包含当前激活的传感器的激活时间。每当您存储原始事件时，触发器都会更新这样的表。

类型 3 的规则会更加困难。除非它们很少，并且您可以为每个触发器和视图设置一组触发器和视图，或者预先知道允许的时间段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:55:50.807

您是否考虑过按问题分桶并流式处理输入数据？

这种类型的示例方法是：

```
for event in new_events: # new events to be written from the RESTful service
    for test in tests: # known tests you need to perform
        increment/decrement <test.bucket>.<sensor>.<valueX> # update the bucket as necessary
        # e.g. seconds_since_changed.sensor1.value3 += 1
     # additionally, save each record to a standard database for long-term purposes
     # and to be able to rebuild/redo tests as necessary. 
```

这种事务流的理想存储机制是一种非常适合低延迟写入/更新的存储机制。NoSQL 解决方案非常适合此类工作（我个人使用 Redis 进行类似类型的分析，但您绝不会受限于该特定解决方案。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:40:36.613

选项#4。关系数据库是明显的瓶颈。以更简单的形式安排数据传输（目录中的文件，以传感器名称或任何唯一键命名）。您可以更快地处理，检查时间戳和读取 - 然后在分析后将数据推送到后端的 rdb。

# asp.net-mvc - 我正在使用带有剃须刀代码的 mvc 开发 aspnet

> ID：16014247
> 
> 赞同：-1
> 
> 时间：2013-04-15T11:40:48.737
> 
> 标签：asp.net-mvc, razor

我不明白以下几行的含义。

(a) 这是 .cshtml 文件中的一行。我使用剑道用户界面。

```
@Html.TextBox("textname", null, new { @class = "k-textbox", style = "width:97px;" }) 
```

(b)。这是来自`app_data`文件夹。我不明白 HtmlEncode 和 HtmlAttributeEncode 之间的区别

```
public class AntiXssEncoder : HttpEncoder
{
    public AntiXssEncoder() 
    {
    }

    protected override void HtmlEncode(string value, TextWriter output)
    {
        output.Write(AntiXss.HtmlEncode(value));
    }

    protected override void HtmlAttributeEncode(string value, TextWriter output)
    {
        output.Write(AntiXss.HtmlAttributeEncode(value));
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:49:06.487

第一行

```
@Html.TextBox("textname", null, 
               new { @class = "k-textbox", style = "width:97px;" }) 
```

将生成类似的输出

```
<input type="text" class="k-textbox" style="width:97px"/> 
```

因此，如果它们是表单的一部分，它是一个允许生成具有某些优势的文本框的助手，例如绑定。[您可以在 MSD 和此处](http://microsoftmentalist.wordpress.com/2011/09/22/asp-net-mvc-16-html-textbox-and-html-textboxfor-helper-methods/)阅读有关它的更多信息

其他两种方法之间的区别是，如[MSDN 资源中所述](http://msdn.microsoft.com/en-us/library/wdek0zbf.aspx)

> `HtmlAttributeEncode`方法**仅**将引号 (")、与号 (&) 和左尖括号 (<) 转换为等效的字符实体。它比 HtmlEncode 方法快得多。

# c# - LINQ to DataSet，获取字符字段时出错

> ID：16014252
> 
> 赞同：0
> 
> 时间：2013-04-15T11:41:03.653
> 
> 标签：c#, linq

```
var dadproductlist = from dgdproduct in dadData.Tables[0].AsEnumerable()
select new DeliveryAdjustmentProduct
{
    AdjustmentQuantity = dgdproduct.Field<int>("AdjustedQty"),
    AdjustmentType = dgdproduct.Field<char>("AdjustmentType").ToString(),
    DeliveredDate = dgdproduct.Field<DateTime>("ExpectedDate"),
    ProductCode = dgdproduct.Field<int>("ProductNum").ToString(),
    RevisedQuantity = dgdproduct.Field<int>("RevisedOrderQty"),
    SupplierId = dgdproduct.Field<int>("SupplierId").ToString(),
    TrailerId = "Pradeep"
}; 
```

我编写了上面的查询来获取一个字符字段，它以`"Specified Cast Not Valid"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:44:07.353

> 我已经编写了上面的查询来获取一个字符字段，它以“Specified Cast Not Valid”失败

如果您从数据库中获取数据，则`CHAR`映射到`string`C# 中。所以试试：

```
AdjustmentType = dgdproduct.Field<string>("AdjustmentType"), 
```

代替

```
AdjustmentType = dgdproduct.Field<char>("AdjustmentType").ToString(), 
```

您可以修改 的类型`AdjustmentType`，或者尝试从字符串中获取第一个字符以分配给您的`char`类型`AdjustmentType`，例如：

`AdjustmentType = dgdproduct.Field<string>("AdjustmentType")[0]`

*（但以上仅假设返回的*字符串中至少有一个字符）

# java - 使用 birt 引擎生成报告期间的 FontHandler 异常

> ID：16014256
> 
> 赞同：2
> 
> 时间：2013-04-15T11:41:11.037
> 
> 标签：java, report, birt

在生成 birt 报告期间，我的表现低于预期。下面给出了带有堆栈跟踪的代码。

我需要在我的应用程序中添加任何其他与字体相关的文件吗？有没有人对此有想法。

当我将渲染选项设置为“HTML”时，它工作正常。仅当我将渲染选项设置为“pdf”时才抛出异常。

> BirtEngineDesktop.java：导入java.io.File；导入 java.io.FileInputStream；导入 java.util.HashMap；导入 java.util.logging.Level；导入 org.eclipse.birt.core.exception.BirtException；导入 org.eclipse.birt.core.framework.Platform；导入 org.eclipse.birt.report.engine.api.*；
> 
> 公共类 BirtEngineDesktop {
> 
> ```
> public static void main(String[] args) throws Exception {
>     String reportName = "new_report_2.rptdesign";
>     IReportEngine engine = null;
>     IReportRunnable design = null;
>     IRunAndRenderTask task = null;
>     PDFRenderOption renderContext = null;
>     HashMap contextMap = null;
>     PDFRenderOption options = null;
>     final EngineConfig conf = new EngineConfig();
>     conf.setEngineHome("ReportEngine");
>     System.out.println("BIRT_HOME: " + conf.getBIRTHome());
>     conf.setLogConfig(null, Level.FINE);
> 
>     try {
>         Platform.startup(conf);
>     } catch (BirtException e1) {
>         e1.printStackTrace();
>     }
> 
>     IReportEngineFactory factory = (IReportEngineFactory) Platform
>             .createFactoryObject(IReportEngineFactory.EXTENSION_REPORT_ENGINE_FACTORY);
>     engine = factory.createReportEngine(conf);
> 
>     try {
>         design = engine.openReportDesign(reportName); 
>     } catch (Exception e) {
>         System.err.println("An error occured during the opening of the report file!");
>         e.printStackTrace();
>         System.exit(-1);
>     }
>     task = engine.createRunAndRenderTask(design);
>     renderContext = new PDFRenderOption();
>     contextMap = new HashMap();
>     FileInputStream fis = new FileInputStream(new File("C:\\test\\sample.xml"));
>     contextMap.put("org.eclipse.datatools.enablement.oda.xml.inputStream",fis);     
>     contextMap.put(EngineConstants.APPCONTEXT_PDF_RENDER_CONTEXT,
>             renderContext);
>     task.setAppContext(contextMap);
> 
>     options = new PDFRenderOption();
>     options.setOutputFileName("D://"+reportName + ".pdf");         options.setOutputFormat("pdf");
>     task.setRenderOption(options);
>     try {
>         task.run();
>     } catch (Exception e) {
>         e.printStackTrace();
>         System.exit(-1);
>     }
>    engine.destroy();
>     System.exit(0);
> } } 
> ```

我的堆栈跟踪是：

```
org.eclipse.birt.report.engine.api.impl.EngineTask handleFatalExceptions

SEVERE: An error happened while running the report. Cause:
java.lang.NullPointerException
    at org.eclipse.birt.report.engine.layout.pdf.font.FontHandler.getMappedFont(FontHandler.java:201)
    at org.eclipse.birt.report.engine.layout.pdf.font.FontHandler.selectFont(FontHandler.java:167)
    at org.eclipse.birt.report.engine.layout.pdf.font.FontSplitter.buildChunk(FontSplitter.java:98)
    at org.eclipse.birt.report.engine.layout.pdf.font.FontSplitter.getNext(FontSplitter.java:189)
    at org.eclipse.birt.report.engine.layout.pdf.text.ChunkGenerator.getNext(ChunkGenerator.java:104)
    at org.eclipse.birt.report.engine.nLayout.area.impl.TextCompositor.getNextTextArea(TextCompositor.java:189)
    at org.eclipse.birt.report.engine.nLayout.area.impl.TextCompositor.getNextArea(TextCompositor.java:127)
    at org.eclipse.birt.report.engine.nLayout.area.impl.TextAreaLayout.layoutChildren(TextAreaLayout.java:182)
    at org.eclipse.birt.report.engine.nLayout.area.impl.TextAreaLayout.layout(TextAreaLayout.java:173)
    at org.eclipse.birt.report.engine.nLayout.area.impl.InlineTextArea.layout(InlineTextArea.java:65)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.startContent(LayoutEngine.java:561)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startText(ContentEmitterAdapter.java:147)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startLabel(ContentEmitterAdapter.java:153)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:65)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.visitContent(LayoutEngine.java:716)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.visitContent(LayoutEngine.java:724)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.startForeign(LayoutEngine.java:767)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:77)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.visitContent(LayoutEngine.java:716)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.visitChildren(LayoutEngine.java:740)
    at org.eclipse.birt.report.engine.nLayout.RegionLayoutEngine.layout(RegionLayoutEngine.java:31)
    at org.eclipse.birt.report.engine.nLayout.area.impl.PageArea.layoutFooter(PageArea.java:489)
    at org.eclipse.birt.report.engine.nLayout.area.impl.PageArea.initialize(PageArea.java:249)
    at org.eclipse.birt.report.engine.nLayout.area.impl.RootArea.createNewPage(RootArea.java:147)
    at org.eclipse.birt.report.engine.nLayout.area.impl.RootArea.initialize(RootArea.java:138)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.setContainer(LayoutEngine.java:368)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine._startContainer(LayoutEngine.java:456)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.startContainer(LayoutEngine.java:355)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startPage(ContentEmitterAdapter.java:65)
    at org.eclipse.birt.report.engine.emitter.CompositeContentEmitter.startPage(CompositeContentEmitter.java:290)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:47)
    at org.eclipse.birt.report.engine.layout.html.buffer.PageNode.start(PageNode.java:49)
    at org.eclipse.birt.report.engine.layout.html.buffer.ContainerBufferNode.start(ContainerBufferNode.java:79)
    at org.eclipse.birt.report.engine.layout.html.buffer.ContainerBufferNode.start(ContainerBufferNode.java:79)
    at org.eclipse.birt.report.engine.layout.html.buffer.ContainerBufferNode.start(ContainerBufferNode.java:79)
    at org.eclipse.birt.report.engine.layout.html.buffer.ContainerBufferNode.start(ContainerBufferNode.java:79)
    at org.eclipse.birt.report.engine.layout.html.buffer.HTMLPageBuffer.startContent(HTMLPageBuffer.java:113)
    at org.eclipse.birt.report.engine.layout.html.buffer.TableBreakBuffer.startContent(TableBreakBuffer.java:287)
    at org.eclipse.birt.report.engine.layout.html.HTMLLeafItemLM.start(HTMLLeafItemLM.java:67)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:139)
    at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:70)
    at org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:26)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:140)
    at org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.resumeLayout(HTMLInlineStackingLM.java:111)
    at org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.layoutNodes(HTMLInlineStackingLM.java:160)
    at org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:26)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:140)
    at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:70)
    at org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:26)
    at org.eclipse.birt.report.engine.layout.html.HTMLTableBandLM.layoutChildren(HTMLTableBandLM.java:67)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:140)
    at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:70)
    at org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:26)
    at org.eclipse.birt.report.engine.layout.html.HTMLTableLM.layoutChildren(HTMLTableLM.java:132)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:140)
    at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:70)
    at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:92)
    at org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:100)
    at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:181)
    at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:77)
    at BirtEngineDesktop.main(BirtEngineDesktop.java:69)
An error occured while running the report!
org.eclipse.birt.report.engine.api.EngineException: Error happened while running the report.
    at org.eclipse.birt.report.engine.api.impl.EngineTask.handleFatalExceptions(EngineTask.java:2329)
    at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:191)
    at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:77)
    at BirtEngineDesktop.main(BirtEngineDesktop.java:69)
Caused by: java.lang.NullPointerException
    at org.eclipse.birt.report.engine.layout.pdf.font.FontHandler.getMappedFont(FontHandler.java:201)
    at org.eclipse.birt.report.engine.layout.pdf.font.FontHandler.selectFont(FontHandler.java:167)
    at org.eclipse.birt.report.engine.layout.pdf.font.FontSplitter.buildChunk(FontSplitter.java:98)
    at org.eclipse.birt.report.engine.layout.pdf.font.FontSplitter.getNext(FontSplitter.java:189)
    at org.eclipse.birt.report.engine.layout.pdf.text.ChunkGenerator.getNext(ChunkGenerator.java:104)
    at org.eclipse.birt.report.engine.nLayout.area.impl.TextCompositor.getNextTextArea(TextCompositor.java:189)
    at org.eclipse.birt.report.engine.nLayout.area.impl.TextCompositor.getNextArea(TextCompositor.java:127)
    at org.eclipse.birt.report.engine.nLayout.area.impl.TextAreaLayout.layoutChildren(TextAreaLayout.java:182)
    at org.eclipse.birt.report.engine.nLayout.area.impl.TextAreaLayout.layout(TextAreaLayout.java:173)
    at org.eclipse.birt.report.engine.nLayout.area.impl.InlineTextArea.layout(InlineTextArea.java:65)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.startContent(LayoutEngine.java:561)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startText(ContentEmitterAdapter.java:147)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startLabel(ContentEmitterAdapter.java:153)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:65)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.visitContent(LayoutEngine.java:716)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.visitContent(LayoutEngine.java:724)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.startForeign(LayoutEngine.java:767)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:77)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.visitContent(LayoutEngine.java:716)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.visitChildren(LayoutEngine.java:740)
    at org.eclipse.birt.report.engine.nLayout.RegionLayoutEngine.layout(RegionLayoutEngine.java:31)
    at org.eclipse.birt.report.engine.nLayout.area.impl.PageArea.layoutFooter(PageArea.java:489)
    at org.eclipse.birt.report.engine.nLayout.area.impl.PageArea.initialize(PageArea.java:249)
    at org.eclipse.birt.report.engine.nLayout.area.impl.RootArea.createNewPage(RootArea.java:147)
    at org.eclipse.birt.report.engine.nLayout.area.impl.RootArea.initialize(RootArea.java:138)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.setContainer(LayoutEngine.java:368)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine._startContainer(LayoutEngine.java:456)
    at org.eclipse.birt.report.engine.nLayout.LayoutEngine.startContainer(LayoutEngine.java:355)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterAdapter.startPage(ContentEmitterAdapter.java:65)
    at org.eclipse.birt.report.engine.emitter.CompositeContentEmitter.startPage(CompositeContentEmitter.java:290)
    at org.eclipse.birt.report.engine.emitter.ContentEmitterUtil.startContent(ContentEmitterUtil.java:47)
    at org.eclipse.birt.report.engine.layout.html.buffer.PageNode.start(PageNode.java:49)
    at org.eclipse.birt.report.engine.layout.html.buffer.ContainerBufferNode.start(ContainerBufferNode.java:79)
    at org.eclipse.birt.report.engine.layout.html.buffer.ContainerBufferNode.start(ContainerBufferNode.java:79)
    at org.eclipse.birt.report.engine.layout.html.buffer.ContainerBufferNode.start(ContainerBufferNode.java:79)
    at org.eclipse.birt.report.engine.layout.html.buffer.ContainerBufferNode.start(ContainerBufferNode.java:79)
    at org.eclipse.birt.report.engine.layout.html.buffer.HTMLPageBuffer.startContent(HTMLPageBuffer.java:113)
    at org.eclipse.birt.report.engine.layout.html.buffer.TableBreakBuffer.startContent(TableBreakBuffer.java:287)
    at org.eclipse.birt.report.engine.layout.html.HTMLLeafItemLM.start(HTMLLeafItemLM.java:67)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:139)
    at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:70)
    at org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:26)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:140)
    at org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.resumeLayout(HTMLInlineStackingLM.java:111)
    at org.eclipse.birt.report.engine.layout.html.HTMLInlineStackingLM.layoutNodes(HTMLInlineStackingLM.java:160)
    at org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:26)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:140)
    at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:70)
    at org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:26)
    at org.eclipse.birt.report.engine.layout.html.HTMLTableBandLM.layoutChildren(HTMLTableBandLM.java:67)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:140)
    at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:70)
    at org.eclipse.birt.report.engine.layout.html.HTMLStackingLM.layoutChildren(HTMLStackingLM.java:26)
    at org.eclipse.birt.report.engine.layout.html.HTMLTableLM.layoutChildren(HTMLTableLM.java:132)
    at org.eclipse.birt.report.engine.layout.html.HTMLAbstractLM.layout(HTMLAbstractLM.java:140)
    at org.eclipse.birt.report.engine.layout.html.HTMLBlockStackingLM.layoutNodes(HTMLBlockStackingLM.java:70)
    at org.eclipse.birt.report.engine.layout.html.HTMLPageLM.layout(HTMLPageLM.java:92)
    at org.eclipse.birt.report.engine.layout.html.HTMLReportLayoutEngine.layout(HTMLReportLayoutEngine.java:100)
    at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:181)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:32:42.143

尝试：

*   将您的字体目录添加到 CLASSPATH（或将报告字体复制/符号链接到 CLASSPATH 中的任何目录）
*   使用以下代码注册字体目录：

    ```
    import java.security.AccessController;
    import java.security.PrivilegedAction;    
    import com.lowagie.text.FontFactory;

    ...

    AccessController.doPrivileged(new PrivilegedAction<Object>() {
            public Object run() {
                    FontFactory.registerDirectory(yourFontsDirectory);
                    return null;
            }
    }); 
    ```

字体目录应包含报表设计使用的 ttf 字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:58:16.157

我认为您需要将语言环境设置为`task.setLocale(new Locale("en", "US"));`

# c++ - 是否有任何现有的库在 C/CPP/Obj-C 中实现了 matlab 函数？

> ID：16014258
> 
> 赞同：1
> 
> 时间：2013-04-15T11:41:16.273
> 
> 标签：c++, objective-c, c, matlab, porting

我正在使用仅在 Matlab 中实现的算法。

但是，一旦我没有服务器或移植代码所需的 Matlab 许可证，我需要使用 gcc 运行它。

Sp，我正在尝试在 Objective-C 中实现自己的算法。这样，我想知道是否已经有任何现有的库已经实现了（至少一组）Matlab 函数。

ATM 我正在​​自己制作 Matlab 函数，这变成了一项非常耗时的任务。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T19:57:40.220

好消息和坏消息 - 有一个专门设计用于将 Matlab 代码翻译成 C++ 的库 -来自 Princeton Satelite Systems 的[MatrixLib 。](http://www.psatellite.com/matrixlib/index.php)[我知道这一点，因为我曾经在那家公司工作过:-)]。然而，它并不便宜。您可以在线阅读文档，并且可以出于某种原因协商折扣。

在那里我专门用它来为 C++ 做一个巨大的 Matlab 脚本，所以它肯定是针对这种用途的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:55:34.587

您提供的链接中的代码中似乎没有使用任何不寻常或奇特的东西，因此如果您只有一个线性代数库，那么重新实现应该相当简单。[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)非常好，Boost 的[uBLAS](http://www.boost.org/doc/libs/1_53_0/libs/numeric/ublas/doc/index.htm)也是如此，尽管据报道 uBLAS 有点慢。

我建议您阅读[这篇 StackExchange 帖子](https://scicomp.stackexchange.com/questions/351/recommendations-for-a-usable-fast-c-matrix-library)，以便对可用的不同版本进行相当全面的比较。

# jpa - 玩！框架 1.2.3 模型不受任何插件管理

> ID：16014260
> 
> 赞同：0
> 
> 时间：2013-04-15T11:41:24.700
> 
> 标签：jpa, playframework, playframework-1.x

我正在使用播放！1.2.3

我正在尝试从 yaml 文件加载数据并使用 JPA 将其持久化，但出现异常

发生执行异常 RuntimeException：无法加载夹具 rss-sources.yml：模型 models.RSSSource 不受任何插件管理

有人可以提供建议吗？

堆栈跟踪是

```
Internal Server Error (500) for request GET /

Execution exception (In /app/controllers/Bootstrap.java around line 19)
RuntimeException occured : Cannot load fixture rss-sources.yml: Model models.RSSSource is      not managed by any plugin

play.exceptions.JavaExecutionException: Cannot load fixture rss-sources.yml: Model     models.RSSSource is not managed by any plugin
    at play.jobs.Job.call(Job.java:155)
at Invocation.Job(Play!)
Caused by: java.lang.RuntimeException: Cannot load fixture rss-sources.yml: Model models.RSSSource is not managed by any plugin
at play.test.Fixtures.loadModels(Fixtures.java:223)
at controllers.Bootstrap.doJob(Bootstrap.java:19)
at play.jobs.Job.doJobWithResult(Job.java:50)
at play.jobs.Job.call(Job.java:146)
... 1 more
Caused by: play.exceptions.UnexpectedException: Model models.RSSSource is not managed by any plugin
at play.db.Model$Manager.factoryFor(Model.java:57)
at play.test.Fixtures.resolveDependencies(Fixtures.java:386)
at play.test.Fixtures.loadModels(Fixtures.java:197)
... 4 more 
```

我的模型类是：

```
package models;

import javax.persistence.*;

import play.db.jpa.*;
import play.data.validation.*;

import org.yaml.snakeyaml.Yaml;

/**
 * Class to describe a news url
 * contains url string and category
 * 
 * 
 *
 */

@Entity
@Table(name="RSSSourcesTable")
public class RSSSource
{
    //variable to old source
    @Required
    @Id
    private String source;

    //variables to hold urls for news category RSS feeds
    private String topNewsURL;
    private String worldNewsURL;
    private String ukNewsURL;
    private String usaNewsURL;
    private String sportsNewsURL;
    private String businessNewsURL;
    private String technologyNewsURL;

    public RSSSource(String source)
    {
        this.source = source;  
    }

    //getters and setters here
} 
```

我的引导类是：

```
package controllers;

import play.jobs.Job;
import play.jobs.OnApplicationStart;
import play.jobs.OnApplicationStop;
import play.test.Fixtures;

@OnApplicationStart 
public class Bootstrap extends Job
{
/**
 * On start up this method loads the configuration that is set in the config loader, this contains the connection details for the 
 * RSS feed sources.
 * 
 */
     public void doJob()
    {
        System.out.println("Loading RSS sources from file: rss-sources.yml");
        Fixtures.loadModels("rss-sources.yml");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:54:39.530

您的模型类应该扩展`play.db.jpa.Model`，或者在您的情况下，因为您使用的是自定义 ID `play.db.jpa.GenericModel`（[播放 JPA 文档](http://www.playframework.com/documentation/1.2.3/jpa)）。IE

```
public class RSSSource 
```

应该成为

```
public class RSSSource extends GenericModel 
```

顺便说一句，您可能希望从 Play 1.2.3 更新到 1.2.5。

# c# - 使用带有证书的 iTextSharp 签署 PDF，至少 7 年可靠

> ID：16014262
> 
> 赞同：0
> 
> 时间：2013-04-15T11:41:27.027
> 
> 标签：c#, security, certificate, pdf-generation, itextsharp

我正在接收文件并将它们转换为 PDF/ **A**。然后我想使用可靠的签名方法对它们进行签名。我试图实现的是以下。
证书...：

*   将应用于自制文档（即我可以完全控制内容）
*   验证文件的来源（在这种情况下，我）
*   验证没有任何更改（因为应用了证书/签名）
*   至少可靠 7 年（例如高质量算法）

这将导致以下工作流程。
**我生成一个文档。我把标志/证书放在上面。用户从我们的网站下载 pdf。然后他下载我提供的证书以验证文件上的签名。结果是符号有效/无效。**

问题是：*如何**使用 iTextSharp 签名**以及**我需要什么才能获得 7 年可靠的证书**？*

编辑：我看过这个文件，但它让我有点头晕。有很多选择：http: [//itextpdf.com/book/digitalsignatures/](http://itextpdf.com/book/digitalsignatures/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:13:28.633

您需要的第一件事是有效期超过 7 年的证书。您需要一个存储在硬件（USB、HSM、智能卡）上的证书，并且该证书是 CDS 或 AATL 批准的。

即使您找到有效期超过 7 年的证书，您也不能 100% 确定它在此期间仍然有效。如果证书被泄露，可以撤销证书。例如：当签署文件的人丢失了他的 USB 令牌时。使用硬件安全模块进行签名应该更可靠。

至于算法：您至少应该使用 SHA-2 和至少 2048 位的加密密钥，但没有人会保证这些算法在未来 7 年内是安全的。从这个意义上说，你的问题可能应该被否决，因为它没有真正的意义：你期望我们有一个水晶球。

但是：如果您阅读了我的书的最后一章（让您头晕目眩的那一章），您会发现通过添加文档安全存储 (DSS) 和 Document- 来延长已签名文档的寿命始终是可能的。级别时间戳。最终签名（文档级时间戳）通常会使用目前最受信任的算法。例如：几年后，您可能能够使用 SHA-3。

请注意，签名类型和加密算法也会对 PDF/A 版本产生影响。目前，您至少需要 PDF/A-2 才能获得面向未来的签名。

# python - 通过命令行运行 Python 脚本时不打印任何内容

> ID：16014266
> 
> 赞同：-1
> 
> 时间：2013-04-15T11:41:34.810
> 
> 标签：python, python-2.7

这是我的简单代码：mycode.py

```
def shara(file):
    import codecs
    import sys
    n=codecs.open(file,'r','utf-8').read()
    print n
    print "mycode"
    raw_input() 
```

当我像这样通过命令行运行时：

```
C:\wamp\PYTHON>python C:\wamp\PYTHON\Scripts\mycode.py C:\wamp\PYTHON\Scripts\sample.txt 
```

它不打印任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:51:54.377

大概您希望 python 实际运行该函数，因此您需要添加：

```
import sys
if __name__ == '__main__':
    shara(sys.argv[1]) 
```

# kendo-ui - 如何将 k-state-error 类添加到 kendo 日期选择器

> ID：16014270
> 
> 赞同：0
> 
> 时间：2013-04-15T11:41:43.533
> 
> 标签：kendo-ui

我需要在 Kendo 日期选择器的 onChange 事件中添加 k-state-error 类。

```
 function onChange(e) {
    if (e.date == undefined) {
        $(this).closest('span').addClass("myclass");
        $(this).parent('span').addClass("myclass");
        $(this).child('span').addClass("myclass");
    }
} 
```

我怎样才能访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:26:13.840

内部`change`事件处理程序`$(this)`是指`DatePicker`而不是原始的`input`. 所以你应该`$(this.element)`改用。

```
$("#date").kendoDatePicker({
    change: onChange
    }
});

function onChange(e) {
    if (!e.sender.value()) {
        $(this.element).closest('span').addClass("myclass");
        $(this.element).parent('span').addClass("myclass");
        // NOTE: The following will actually not work since it does not have child 
        // $(this.element).child('span').addClass("myclass");
    }
} 
```

**编辑**：并将样式定义为：

```
.myclass {
    border: 3px solid red !important;
} 
```

在此处运行示例：http: [//jsfiddle.net/OnaBai/Csp6P/](http://jsfiddle.net/OnaBai/Csp6P/)

# c# - 加快我的 BOM 计算

> ID：16014273
> 
> 赞同：0
> 
> 时间：2013-04-15T11:41:46.860
> 
> 标签：c#, asp.net, linq, entity-framework

我有一个相当小的 MRP 应用程序，它由销售订单簿、材料清单和材料资源计划报告组成。

销售订单簿只是项目、数量和到期日的列表。物料清单是每个项目、该项目的子组件和数量的平面列表，如下所示：[ParentItemID] [ComponentItemID] [Qty]

然后我还添加了我的采购订单，以便用户可以看到运行余额。

它（应该）计算起来相当简单。

MRP 报告在功能上运行良好，但是运行大约需要 90 秒，这显然让我的用户感到沮丧。我目前正在使用队列来存储数据，我的整个代码如下所示：

```
 public void MRPCalcBtn_Click(object sender, EventArgs e)
//Calculate MRP Report
{
    //kick off a timer
    DateTime startTime = DateTime.Now;

    //Flip the panels to hide the button
    panel1.Visible = false;
    panel2.Visible = true;
    Page.Title = "MRP Report"; //set the title so we can tell if it's finished from the task bar

    //Create DataTable to hold items
    var dt = new DataTable();

    dt.Columns.Add("ItemID", System.Type.GetType("System.String"));
    dt.Columns.Add("QtyIn", System.Type.GetType("System.Decimal"));
    dt.Columns.Add("QtyOut", System.Type.GetType("System.Decimal"));
    dt.Columns.Add("DueDate", System.Type.GetType("System.DateTime"));

    var db = new CS3Entities(); // should these be calls to DAL?

    //ADD SALES ORDERS
    //---------------------------------------------------------------------------------------------
    //read orderbook in
    var orderBook = (from ob in db.SalesOrderItems
                     where ob.QtyOutstanding > 0
                     //where ob.ItemID == "9783B" //whilst testing, remove in production
                     select new { ob.ItemID, ob.QtyOutstanding, ob.DueDate });

    //create a queue to store temporary work, the line items are Orders
    var q1 = new Queue<OrderItem>();

    foreach (var item in orderBook) //loop through the order book
    {
        //Copy order book to queue to start off with
        var orderBookArray = new OrderItem
                                 {
                                     ItemID = item.ItemID,
                                     QtyIn = 0,
                                     QtyOut = item.QtyOutstanding,
                                     DueDate = item.DueDate
                                 };

        q1.Enqueue(orderBookArray); //adds line item to queue
    }

    //start calculating the BoM items
    try
    {
        do //main working loop
        {
            var testItem = q1.Peek(); //pull out next line item in queue

            var testItemID = testItem.ItemID; //pull out ItemID from line item
            var testQty = testItem.QtyOut; //pull out Qty from line item
            var testDueDate = testItem.DueDate; //pull out ItemID from line item

            //determines Bill OF Materials for each item
            var bills = (
                    from b in db.BillOfMaterials
                    where b.ItemID == testItemID
                    select new { b.ComponentItemID, b.Qty }
                    );

            if (bills.Any()) //if line item has any sub components
            {
                //add each sub comopnent to the queue
                foreach (var bill in bills)
                {
                    var bomArray = new OrderItem
                                       {
                                           ItemID = bill.ComponentItemID,
                                           QtyOut = bill.Qty*testQty,
                                           QtyIn = 0,
                                           DueDate = testDueDate
                                       };

                    q1.Enqueue(bomArray);
                }

                q1.Dequeue(); //Remove item from queue after all sub components have been added
            }
            else //if no items in Bill Of Materials, must be "leaf" component, add it to "final" table
            {
                AddToItems(dt, testItemID, 0, testQty, testDueDate); //add item to data table as QtyOut
                q1.Dequeue(); //Remove item from queue
            }

        } while (q1.Count != 0); //end of do loop, until queue is empty
    }
    catch
    {
        ErrorLbl.Text = "ERROR"; //if something goes wrong
    }

    //Queue should now be empty and DataTable dt holds all final items for purchase

    //ADD PURCHASE ORDERS
    //---------------------------------------------------------------------------------------------
    //read purchase orders in
    var purchaseOrderItems = (from poi in db.PurchaseOrderItems
                              join po in db.PurchaseOrders on poi.PurchaseOrderID equals po.PurchaseOrderID
                              where po.PurchaseOrderCancelled != true && 
                                    po.PurchaseOrderDeleted != true && 
                                    poi.Balance > 0 && 
                                    poi.LineItemComplete != true

                              orderby poi.DueDate ascending 

                              select new { poi.ItemID, poi.Balance, poi.DueDate }).ToList(); //Is a list faster than the database calls?

    foreach (var item in purchaseOrderItems) //loop through the purchase orders and append them to the temp table
    {
        //add purchase order items to data table as QtyIn
        AddToItems(dt, item.ItemID, Convert.ToDecimal(item.Balance), 0, Convert.ToDateTime(item.DueDate));
    }

    //SORT RESULTS
    //---------------------------------------------------------------------------------------------
    //Sort and group the raw data
    var sorteditems = //sort and group the data table to show sum of qty per day per item
        (from p in dt.AsEnumerable()
        orderby p.Field<string>("ItemID") , p.Field<DateTime>("DueDate")
        group p by new {ItemID = p.Field<string>("ItemID"), DueDate = p.Field<DateTime>("DueDate")}
        into g

        select new
                   {
                       g.Key.ItemID,
                       g.Key.DueDate,
                       QtyIn = g.Sum(p => p.Field<decimal>("QtyIn")),
                       QtyOut = g.Sum(p => p.Field<decimal>("QtyOut"))
                   }).ToList();

    //Create second DataTable to hold sorted and grouped report items
    //tried to use same datatable dt but it didn't work, no hardship to instantiate another
    var dt2 = new DataTable();

    dt2.Columns.Add("ItemID", Type.GetType("System.String"));
    dt2.Columns.Add("QtyIn", Type.GetType("System.Decimal"));
    dt2.Columns.Add("QtyOut", Type.GetType("System.Decimal"));
    dt2.Columns.Add("DueDate", Type.GetType("System.DateTime"));

    foreach (var item in sorteditems) //loop through the sorted results
    {
        //Move the sorted and grouped items into the datatable
        AddToItems(dt2, item.ItemID, Convert.ToDecimal(item.QtyIn), Convert.ToDecimal(item.QtyOut), Convert.ToDateTime(item.DueDate));
    }

    Session["MRPTable"] = dt2; //save datatable to session for recall later by repeater

    //Set repeater datasource to unique item list with details
    var itemslist = from si in sorteditems
                    group si by new { si.ItemID } into sig //equivilent to DISTINCT

                    join i in db.Items
                    on sig.Key.ItemID equals i.ItemID

                    select new
                    {
                        i.ItemID,
                        i.ItemName,
                        i.StocktakeCost,
                        i.ItemROP,
                        i.ItemROQ,
                        i.ItemUOM,
                        i.ItemStock
                    };

    Repeater1.DataSource = itemslist; //note repeater contains a GridView that contains the line items
    Repeater1.DataBind(); //Fire the repeater

    //time finished
    DateTime finishTime = DateTime.Now;

    //Set the start time label
    TimeStart.Text = startTime.TimeOfDay.ToString();

    //Set finish time
    TimeFinish.Text = finishTime.TimeOfDay.ToString();

    TimeTaken.Text = (finishTime - startTime).Minutes.ToString(CultureInfo.InvariantCulture) + " Minute(s), " + (finishTime - startTime).Seconds.ToString(CultureInfo.InvariantCulture) + " Seconds";

    //Add to activity log
    ActivityDAL.AddNewLog("MRP Report", "Generated", TimeTaken.Text, "N/A", HttpContext.Current.User.Identity.Name);

} 
```

谁能看到我在哪里可以提高报告的速度以及我在哪里犯了任何明显的错误。

正如我所说，报告工作正常，但速度很慢。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:01:50.980

```
var bills = (from b in db.BillOfMaterials
             where b.ItemID == testItemID
             select new { b.ComponentItemID, b.Qty }); 
```

上面的代码应该在 do {} while() 循环之外，否则 db.BillOfMaterials 将在 while 循环运行时循环多次

```
public void MRPCalcBtn_Click(object sender, EventArgs e)
//Calculate MRP Report
{
    //kick off a timer
    DateTime startTime = DateTime.Now;

    //Flip the panels to hide the button
    panel1.Visible = false;
    panel2.Visible = true;
    Page.Title = "MRP Report"; //set the title so we can tell if it's finished from the task bar

    //Create DataTable to hold items
    var dt = new DataTable();

    dt.Columns.Add("ItemID", System.Type.GetType("System.String"));
    dt.Columns.Add("QtyIn", System.Type.GetType("System.Decimal"));
    dt.Columns.Add("QtyOut", System.Type.GetType("System.Decimal"));
    dt.Columns.Add("DueDate", System.Type.GetType("System.DateTime"));

    var db = new CS3Entities(); // should these be calls to DAL?

    //ADD SALES ORDERS
    //---------------------------------------------------------------------------------------------
    //read orderbook in
    var orderBook = (from ob in db.SalesOrderItems
                     where ob.QtyOutstanding > 0
                     //where ob.ItemID == "9783B" //whilst testing, remove in production
                     select new OrderItem
                                 {
                                     ItemID = ob.ItemID,
                                     QtyIn = 0,
                                     QtyOut = ob.QtyOutstanding,
                                     DueDate = ob.DueDate
                                 };);

    //create a queue to store temporary work, the line items are Orders
    var q1 = new Queue<OrderItem>();

    foreach (var item in orderBook) //loop through the order 
        q1.Enqueue(orderBookArray); //adds line item to queue

    //determines Bill OF Materials for each item
    var billDict = db.BillOfMaterials.
                   GroupBy(b => b.ItemID).
                   ToDictionary(
                       g => g.Key, 
                       g => g.Select(b => new { b.ComponentItemID, b.Qty }).ToList()
                   );

    //start calculating the BoM items
    try
    {
        do //main working loop
        {
            var testItem = q1.Peek(); //pull out next line item in queue

            var testItemID = testItem.ItemID; //pull out ItemID from line item
            var testQty = testItem.QtyOut; //pull out Qty from line item
            var testDueDate = testItem.DueDate; //pull out ItemID from line item

            if (billDict.ContainsKey(testItemID)) //if line item has any sub components
            {
                var bills = billDict[testItemID];
                //add each sub comopnent to the queue
                foreach (var bill in bills)
                {
                    var bomArray = new OrderItem
                                       {
                                           ItemID = bill.ComponentItemID,
                                           QtyOut = bill.Qty*testQty,
                                           QtyIn = 0,
                                           DueDate = testDueDate
                                       };

                    q1.Enqueue(bomArray);
                }
            }
            else //if no items in Bill Of Materials, must be "leaf" component, add it to "final" table
            {
                AddToItems(dt, testItemID, 0, testQty, testDueDate); //add item to data table as QtyOut
            }

            q1.Dequeue(); //Remove item from queue

        } while (q1.Count != 0); //end of do loop, until queue is empty
    }
    catch
    {
        ErrorLbl.Text = "ERROR"; //if something goes wrong
    }

    //Queue should now be empty and DataTable dt holds all final items for purchase

    //ADD PURCHASE ORDERS
    //---------------------------------------------------------------------------------------------
    //read purchase orders in
    var purchaseOrderItems = (from poi in db.PurchaseOrderItems
                              join po in db.PurchaseOrders on poi.PurchaseOrderID equals po.PurchaseOrderID
                              where po.PurchaseOrderCancelled != true && 
                                    po.PurchaseOrderDeleted != true && 
                                    poi.Balance > 0 && 
                                    poi.LineItemComplete != true

                              orderby poi.DueDate ascending 

                              select new { poi.ItemID, poi.Balance, poi.DueDate }).ToList(); //Is a list faster than the database calls?

    foreach (var item in purchaseOrderItems) //loop through the purchase orders and append them to the temp table
    {
        //add purchase order items to data table as QtyIn
        AddToItems(dt, item.ItemID, Convert.ToDecimal(item.Balance), 0, Convert.ToDateTime(item.DueDate));
    }

    //SORT RESULTS
    //---------------------------------------------------------------------------------------------
    //Sort and group the raw data
    var sorteditems = //sort and group the data table to show sum of qty per day per item
        (from p in dt.AsEnumerable()
        orderby p.Field<string>("ItemID") , p.Field<DateTime>("DueDate")
        group p by new {ItemID = p.Field<string>("ItemID"), DueDate = p.Field<DateTime>("DueDate")}
        into g

        select new
                   {
                       g.Key.ItemID,
                       g.Key.DueDate,
                       QtyIn = g.Sum(p => p.Field<decimal>("QtyIn")),
                       QtyOut = g.Sum(p => p.Field<decimal>("QtyOut"))
                   }).ToList();

    //Create second DataTable to hold sorted and grouped report items
    //tried to use same datatable dt but it didn't work, no hardship to instantiate another
    var dt2 = new DataTable();

    dt2.Columns.Add("ItemID", Type.GetType("System.String"));
    dt2.Columns.Add("QtyIn", Type.GetType("System.Decimal"));
    dt2.Columns.Add("QtyOut", Type.GetType("System.Decimal"));
    dt2.Columns.Add("DueDate", Type.GetType("System.DateTime"));

    foreach (var item in sorteditems) //loop through the sorted results
    {
        //Move the sorted and grouped items into the datatable
        AddToItems(dt2, item.ItemID, Convert.ToDecimal(item.QtyIn), Convert.ToDecimal(item.QtyOut), Convert.ToDateTime(item.DueDate));
    }

    Session["MRPTable"] = dt2; //save datatable to session for recall later by repeater

    //Set repeater datasource to unique item list with details
    var itemslist = from si in sorteditems
                    group si by new { si.ItemID } into sig //equivilent to DISTINCT

                    join i in db.Items
                    on sig.Key.ItemID equals i.ItemID

                    select new
                    {
                        i.ItemID,
                        i.ItemName,
                        i.StocktakeCost,
                        i.ItemROP,
                        i.ItemROQ,
                        i.ItemUOM,
                        i.ItemStock
                    };

    Repeater1.DataSource = itemslist; //note repeater contains a GridView that contains the line items
    Repeater1.DataBind(); //Fire the repeater

    //time finished
    DateTime finishTime = DateTime.Now;

    //Set the start time label
    TimeStart.Text = startTime.TimeOfDay.ToString();

    //Set finish time
    TimeFinish.Text = finishTime.TimeOfDay.ToString();

    TimeTaken.Text = (finishTime - startTime).Minutes.ToString(CultureInfo.InvariantCulture) + " Minute(s), " + (finishTime - startTime).Seconds.ToString(CultureInfo.InvariantCulture) + " Seconds";

    //Add to activity log
    ActivityDAL.AddNewLog("MRP Report", "Generated", TimeTaken.Text, "N/A", HttpContext.Current.User.Identity.Name);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:46:21.227

找到了这个问题的答案，修复了一个错误的加入并将报告从 90 秒减少到 5 秒

# sql-server - 使用 SSIS 加载不同语言的 Excel 文件

> ID：16014279
> 
> 赞同：0
> 
> 时间：2013-04-15T11:42:07.597
> 
> 标签：sql-server, tsql, ssis

我有 86 个国家/地区，每个国家/地区在 CountryFolder 中都有一个文件夹：例如

```
C:\Users\Countries\Algeria 
```

在每个国家/地区文件夹中都有该国家/地区语言的 Excel 表：

```
C:\Users\Countries\Algeria\Excel Sheet.xlsx 
```

我有一个 ForEach 循环包，它遍历所有从 Excel 表格中提取数据的国家。这些工作表都采用相同的格式，但使用不同的语言。我的 SSIS 包遍历所有将工作表加载到数据库的英语国家/地区，但在到达西班牙语和其他非英语国家/地区时会引发错误，因为它使用列名进行映射。表列名称为英文，因此它们与非英语国家的 Excel 列名称不匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:59:49.890

我假设您有一个`ForEach`循环来迭代`folder`.Inside`ForEach Loop`使用`FileSystem`任务以将特定文件复制到不同的位置。然后在`Script task`读取原始 Excel 文件并将列 heders 更改为英文名称的帮助下，这样您就可`Data Flow Task`以为所有具有不同的`langauages`

```
 ConnString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;   
 Data Source={0};Extended Properties=\"Excel 12.0 Xml;HDR=YES;IMEX=1\";"
 ,@ForEachVariable); 
```

`Note :@ForEachVariable``ForEach`包含由Loop存储在变量中的文件位置

```
//open the connection
OleDbCommand query = 
 new OleDbCommand("SELECT * FROM ["xlWorksheet"$]", objConn); 

//popluate the Datetable and get the column names using 
dt.Columns[0].ColumnName 
```

获得列名后，将其更改为 Excel 中的英文名称，然后使用`DFT`

包装设计：-

![在此处输入图像描述](https://i.stack.imgur.com/WkRaF.png)

通过这种方式，您可以`reuse`将现有的数据流任务

# php - 为什么 PHP 中的 CRYPT_BLOWFISH 在产生比 SHA 更短的哈希时被认为更好

> ID：16014282
> 
> 赞同：4
> 
> 时间：2013-04-15T11:42:15.293
> 
> 标签：php, sha, blowfish, crypt

为什么 PHP 中的 CRYPT_BLOWFISH 在产生比 CRYPT_SHA-256/512 更短的哈希时被认为更适合密码哈希？找到计算相同 BLOWFISH 哈希的另一个词不是比 SHA256/512 哈希更可能吗？

示例哈希取自 php.net 手册：

```
Blowfish: $2a$07$usesomesillystringfore2uDLvp1Ii2e./U9C8sBjqp8I90dH6hi
SHA-256:  $5$rounds=5000$usesomesillystri$KqJWpanXZHKq2BOB43TSaYhEWsQ1Lr5QNyPCDH/Tp.6
SHA-512:  $6$rounds=5000$usesomesillystri$D4IrlXatmP7rx3P3InaxBeoomnAihCKRVQP22JZ6EY47Wc6BkroIuUUBOov1i.S5KPgErtP/EN5mcO.ChWQW21 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:58:13.630

bcrypt 的安全性在于它的计算速度比任何其他算法都要慢得多。

使用任何 SHA 版本，您都可以获得更好的计算机，并且您将能够立即制作彩虹表。使用 bcrypt 仍然需要很长时间，这种算法很耗时。因此，几乎不可能从哈希中检索原始密码。

您可以查看此[链接以获取更多信息](http://phpmaster.com/why-you-should-use-bcrypt-to-hash-stored-passwords/)。您还可以从全面涵盖它的 Security StackExchange 中看到[这个线程！](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage)

* * *

关于哈希产生较小的事实，这根本不重要，因为正如我所说，如果您想找到哈希来自哪个密码，则需要很长时间。

请参阅[此沙箱](http://sandbox.onlinephpfunctions.com/code/723d752754f76a8982434bb37c168ad11a5ba5b0)。只需将负载因子设置为超过 15 就会使其执行时间超过 3 秒。尝试使用它，您就会明白为什么它是安全的。

沙箱中的代码：

```
$time = microtime(true);
$pass =  crypt('myNewPassword', '$2y$15$usesomesillystringforsalt$');
$end_time = microtime(true);

$diff = $end_time - $time;
echo "$pass\n$diff" 
```

输出：

> $2y$15$usesomesillystringforeTfp6/FuUgyb1HKFA36V9tf6Go5xlv/a
> 2.4688489437103

1 个哈希需要 2.5 秒！想象一下尝试散列数百万个密码！

# c# - ButtonClick 事件未添加数据

> ID：16014287
> 
> 赞同：-6
> 
> 时间：2013-04-15T11:42:38.580
> 
> 标签：c#, asp.net, database

所以我有以下代码，但数据库没有更新，页面似乎没有显示任何错误。构建中没有错误，但仍然没有数据进入。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data;

public partial class ValidateMe : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        SqlConnection connection = new SqlConnection("Data Source=MICROSOF-58B8A5\SQL_SERVER_R2;Initial Catalog=Movie;Integrated Security=True");

        connection.Open();

        if (TextBox8.Text == TextBox9.Text)
        {
            string UserName = TextBox7.Text;
            string Password = TextBox8.Text;
            string FirstName = TextBox1.Text;
            string LastName = TextBox2.Text;
            string Address = TextBox3.Text;
            string PostCode = TextBox4.Text;
            string Phone = TextBox5.Text;
            string Email = TextBox6.Text;

            string sqlquery = "INSERT INTO `users` (`user_id`, `username`, `first_name`, `last_name`, `password`, `address`, `postcode`, `phone`, `email`, `level`) VALUES (NULL, '@UserName', '@FirstName', '@LastName', '@Password', '@Address', '@PostCode', '@Phone', '@Email');";

            SqlCommand command = new SqlCommand(sqlquery, connection);
        }
    }
} 
```

对我所缺少的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:45:45.733

您的代码遗漏了几个（基本）步骤。

打开连接后，您应该执行以下操作：

*   构建命令
*   添加命令所需的参数
*   执行它
*   关闭连接

像这样

```
string sqlquery = "INSERT INTO users (username, first_name, last_name, password," + 
                  "address, postcode, phone, email, level) VALUES " + 
                  "(@UserName, @FirstName, @LastName, @Password, " + 
                  "@Address, @PostCode, @Phone, @Email);";

SqlCommand command = new SqlCommand(sqlquery, connection);

command.Parameters.AddWithValue("@username", Username);
.....
// Add the other parameters
.....

// Execute the query
command.ExecuteNonQuery();

// Close the connection
connection.Close(); 
```

您不必在字段名称周围加上反标（SqlServer 不需要它们），参数名称也不应该用单引号括起来。

最后一点。如果`user_id`是一个身份字段，那么您不需要添加到命令文本中。

# php - 生成随机数

> ID：16014288
> 
> 赞同：0
> 
> 时间：2013-04-15T11:42:41.207
> 
> 标签：php, random

有谁知道如何生成从-1到1的随机数。或者甚至有可能吗？我已经研究过了，我只得到了生成从 0 到 N 的随机数的答案。顺便说一下，我正在使用 PHP。

请帮忙！提前感谢那些会回答的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:44:07.903

如果您有一个随机函数生成从 0.0 到 1.0 的数字，请将结果乘以 2 并减去 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T11:46:05.743

生成 0 到 2 之间的随机数，然后从生成的数字中减去 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:48:27.807

你可以试试这个整数：

```
$array = range(- 1, 1, 1);
echo $array[mt_rand(0, count($array) - 1)]; // example 0 
```

或者对于在的第三个参数中声明的具有精度的浮点数`range()`：

```
$array = range(- 1, 1, 0.1);
echo $array[mt_rand(0, count($array) - 1)]; // example -0.9 
```

# oop - 理解封装和抽象的简单方法

> ID：16014290
> 
> 赞同：79
> 
> 时间：2013-04-15T11:42:43.630
> 
> 标签：oop, language-agnostic, encapsulation, abstraction

学习 OOP 概念，对深入理解抽象和封装特别感兴趣。

已经查看了以下内容

[抽象 VS 信息隐藏 VS 封装](https://stackoverflow.com/questions/24626/abstraction-vs-information-hiding-vs-encapsulation)

[抽象和封装的区别？](https://stackoverflow.com/questions/742341/difference-between-abstraction-and-encapsulation)

如果没有一个真实而简单的示例类/代码片段，我发现很难理解这些概念。

> 我的一位同事说抽象只不过是创建抽象类和普通类，用范围保护其成员变量称为封装。

有没有一种简单的方法可以让我理解并帮助其他人理解它们到底是什么，而不是重复以下内容？

> 抽象和封装是互补的概念：抽象关注对象的可观察行为……封装关注引起这种行为的实现……封装通常通过信息隐藏来实现，即隐藏所有信息的过程不影响其本质特征的对象的秘密。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2014-04-12T15:07:14.110

**抽象**是一个过程，您只显示“相关”数据并“隐藏”用户不必要的对象细节。以您的手机为例，您只需要知道要按下哪些按钮来发送消息或拨打电话，按下按钮时会发生什么，您的消息是如何发送的，您的电话是如何连接的，这些都从用户。

**封装**是将数据和函数组合成一个称为类的单元的过程。在Encapsulation中，不直接访问数据；它是通过类中存在的函数访问的。简而言之，类的属性保持私有，并提供公共 getter 和 setter 方法来操作这些属性。因此，封装使数据隐藏的概念成为可能。

![在此处输入图像描述](https://i.stack.imgur.com/L9iXI.png)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-15T11:49:13.510

**抽象**是隐藏信息或仅向客户提供必要的细节。

例如汽车刹车——你只知道踩下踏板会使车辆停下来，但你不需要知道它在内部是如何工作的。

**抽象的优势**明天如果制动实现从鼓式制动器更改为盘式制动器，作为客户端，您无需更改（即您的代码不会更改）

**封装**是将数据和行为绑定在一个单元中。它也是一种语言机制，用于限制对某些组件的访问（这可以通过私有、受保护等访问修饰符来实现）

例如，**类**具有属性（即数据）和行为（即对该数据进行操作的方法）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-15T13:16:01.857

使用 C# 的示例

```
//abstraction - exposing only the relevant behavior
public interface IMakeFire
{
     void LightFire();
}

//encapsulation - hiding things that the rest of the world doesn't need to see
public class Caveman: IMakeFire
{
     //exposed information  
     public string Name {get;set;}

     // exposed but unchangeable information
     public byte Age {get; private set;}

     //internal i.e hidden object detail. This can be changed freely, the outside world
     // doesn't know about it
     private bool CanMakeFire()
     {  
         return Age >7;
     }

     //implementation of a relevant feature
     public void LightFire()
     {
        if (!CanMakeFire())
        {
           throw new UnableToLightFireException("Too young");
        }
        GatherWood();
        GetFireStone();
        //light the fire

     }

     private GatherWood() {};
     private GetFireStone();
}

public class PersonWithMatch:IMakeFire
{
      //implementation
 } 
```

任何穴居人都可以生火，因为它实现了**IMakeFire**的“功能”。拥有一组火制造者（列表），这意味着 Caveman 和 PersonWithMatch 都是有效的选择。

这意味着

```
 //this method (and class) isn't coupled to a Caveman or a PersonWithMatch
  // it can work with ANY object implementing IMakeFire
  public void FireStarter(IMakeFire starter)
  {
        starter.LightFire();
    } 
```

因此，您可以拥有许多具有大量细节（属性）和行为（方法）的实现者，但在这种情况下，重要的是他们的发火能力。这是**抽象。**

由于生火需要一些步骤（GetWood 等），因此这些步骤是隐藏在视图中的，因为它们是班级的内部关注点。穴居人还有许多其他可以被外界称为的公共行为。但是一些细节总是会被隐藏，因为与内部工作有关。它们是私有的，只为对象而存在，它们从不暴露。这是**封装**

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-07-16T10:11:15.297

> 抽象是广义的术语。即封装是抽象的子集。

**抽象**是管理复杂系统的强大方法。抽象由定义明确的对象及其层次分类管理。

**例如**，汽车本身就是一个定义明确的对象，它由其他几个较小的对象组成，例如齿轮系统、转向机构、发动机，它们又拥有自己的子系统。但是对于人类来说，汽车是一个单一的对象，可以通过其子系统的帮助进行管理，即使它们的内部细节是未知的。 [礼貌](http://beginnersbook.com/2013/03/oops-in-java-encapsulation-inheritance-polymorphism-abstraction/)

* * *

**封装：**将数据成员和方法一起包装成一个单元（即类）称为封装。

封装就像封装在一个胶囊中。也就是将与一个对象相关的相关操作和数据封装到该对象中。

封装就像你的包，你可以把你的笔、书等放在里面。这意味着这是封装成员和函数的属性。

```
class Bag{
    book;
    pen;
    ReadBook();
} 
```

封装意味着隐藏对象的内部细节，即对象如何做某事。

封装防止客户看到其内部视图，其中实现了抽象的行为。

封装是一种用于保护对象中的信息不受其他对象影响的技术。

隐藏数据以确保安全，例如将变量设为私有，并公开属性以访问将公开的私有数据。

因此，当您访问该属性时，您可以验证数据并进行设置。 [礼貌](http://pankajtiwarii.blogspot.com/p/oops-abstraction-encapsulation.html)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-01-04T08:11:25.717

**抽象**是一种隐藏细节*以简化界面的方法。*

因此，以汽车为例，汽车中的所有控件都是抽象的。这使您可以在不了解转向、加速或减速系统的基本细节的情况下操作车辆。

一个**好的**抽象是对一个接口进行广泛标准化的抽象，跨越类似问题的多个实例。一个**伟大的**抽象可以改变一个行业。

现代方向盘、制动踏板和油门踏板都是伟大抽象的例子。汽车转向最初看起来更像是自行车转向。刹车和油门都是手动操作的。但是我们今天使用的抽象是如此强大，它们席卷了整个行业。

--

**封装**是一种隐藏细节的方法*，以保护它们免受外部操纵。*

封装可以防止驾驶员操纵汽车的驾驶方式——从转向、悬架和制动的刚度，到油门和变速箱的特性。大多数汽车不提供用于更改任何这些内容的接口。这种封装可确保车辆按照制造商的预期运行。

一些汽车提供少量的驾驶模式——如豪华、运动和经济——允许驾驶员同时改变其中的几个属性。通过提供驾驶模式，制造商允许驾驶员对体验进行一些控制，同时防止他们选择会使车辆不那么愉快或不安全的属性组合。通过这种方式，制造商隐藏了细节以防止不安全的操作。这是封装。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-05-30T13:12:22.663

好吧，我将用一个真实世界的例子来解释抽象。假设在您家中您确实有一个电插头，并且许多设备可以连接到同一个插头，但插头永远不会知道它连接到哪个设备，换句话说，设备的详细信息被抽象（隐藏）到了插头。

想想如果我们将设备直接连接到没有插头的电线上会怎样？假设将灯泡直接连接到电线，然后电线知道它连接到哪个设备以及何时需要更换灯泡，然后我们必须从灯泡上移除电线连接，这意味着灯泡与电线紧密耦合。换句话说，灯泡和电线知道它所连接的细节，意味着没有抽象。

在面向对象的世界中，抽象的工作方式完全相同。使用其他类函数/属性的类不需要知道它正在使用哪些类函数/属性，并且应该使用接口/抽象类抽象所有内容。

让我编写相同的示例。这里我有一个类“ElectricPlug”，它正在运行一个设备。但是“ElectricPlug”类不知道它正在运行哪个设备。它可以是任何实现接口“IDevice”的类，这意味着“RunDevice”的实现是从“ElectricPlug”中抽象出来的。这是完整的示例代码，

```
class Program
{
    static void Main(string[] args)
    {
        ElectricPlug electricPlug = new ElectricPlug(new Bulb());
    }
}

public class ElectricPlug
{
    private readonly IDevice _device;
    public ElectricPlug(IDevice device)
    {
        _device = device;
    }

    public void Run()
    {
        _device.Rundevice();
    }
}

public interface IDevice
{
    void Rundevice();
}

public class Bulb : IDevice
{
    public void Rundevice()
    {
       Console.WriteLine("Switched on bulb");
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-04-15T11:48:57.683

抽象是您从您计划在设计中捕获/表示的实体中“丢弃”不必要的细节并仅保留与您的域相关的实体属性的过程。
示例：要代表汽车，您将保留例如型号和价格、当前位置和当前速度，而忽略颜色和座位数量等。

封装是属性和在单个抽象单元（即类）中操作它们的操作的“绑定”。
因此，汽车将具有`accelarate` `stop`操纵位置和当前速度等的功能。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-06-02T04:04:46.403

封装就是它听起来的样子，一种在某物周围放置一个盒子以保护其内容的方式。抽象是提取某物的功能属性，这样您就可以仅使用提取的内容执行操作，而无需了解内部工作原理。

当我们说两种物质是液体时，我们使用“液体”作为我们选择讨论的那些物质的属性的抽象。这种抽象告诉我们，鉴于我们之前对液体的经验，我们可以用这些物质做些什么。

抽象也与层次结构没有任何关系。你可以有另一个抽象，比如“金属”，它以不同的方式提取物质的特性。

抽象会忘记细节，因此如果您使用特定的抽象，则不应询问抽象未授予的底层物质的属性。就像如果你把牛奶和水混合在一起，你很难问你有多少牛奶。

Functor 是对具有某种映射概念的事物的抽象，也就是说，您可以在其内部内容上运行一个函数，将内部位转换为其他任何内容。外部的东西保持相同的东西。

这很有用的地方是，如果你有一个在 Lists 上工作的函数，并且你意识到你只依赖于 map 接口，你可以改为依赖 Functor，然后你的函数可以与流、promise、maybes、元组和任何其他共享该抽象的东西。

像 Haskell 这样的函数式语言具有一些非常强大的抽象能力，这使得极端代码重用变得实用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-03-16T19:14:36.927

*抽象*就像使用计算机。

除了通过 GUI（图形用户界面）和外部硬件（例如屏幕）看到的内容之外，您完全不知道它发生了什么。所有那些漂亮的颜色等等。**作为普通消费者，您只会看到与您相关的详细信息。**

*封装*是**隐藏无关细节**的实际行为。

您使用您的计算机，但您看不到它的 CPU（中央处理单元）是什么样的（除非您试图闯入它）。它隐藏（或封装）在所有铬和塑料后面。

在 OOP（面向对象编程）语言的上下文中，您通常有这种设置：

```
CLASS {
  METHOD { 
    *the actual code*
  }
} 
```

“封装”的一个例子是有一个普通用户看不到的方法（私有）。“抽象”是普通用户使用他们可以（公共）以使用私有方法的方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-03T09:08:48.750

数据抽象：访问任何类的数据成员和成员函数都简单地称为数据抽象......

封装：绑定变量和函数或 1 可以说数据成员或成员函数都在一个单元中称为数据封装....

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-08-25T02:34:57.283

封装可以被认为是用于将数据绑定在一起的包装纸，并作为一个单独的单元来保护它免受各种外部污垢的影响（我的意思是外部功能）。

抽象涉及缺乏细节和使用简单的界面来控制复杂的系统。

例如，我们可以通过按下按钮来点亮灯泡，而不用担心底层的电气工程（抽象）。

但是，您不能以任何其他方式点亮灯泡。（封装）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-07T13:48:51.533

**数据抽象**：DA 只是过滤具体项目。通过类我们可以实现纯粹的抽象，因为在创建类之前我们可以只考虑类的相关信息。

**封装**：这是一种机制，通过它我们可以保护我们的数据免受外部影响。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-15T11:53:38.870

```
public abstract class Draw {
    public abstract void drawShape(); // this is abstraction.  Implementation detail need not to be known.
    // so we are providing only necessary detail by giving drawShape(); No implementation. Subclass will give detail.

    private int type;    // this variable cannot be set outside of the class. Because it is private.
    // Binding private instance variable with public setter/getter method is encapsulation 

    public int getType() { 
        return type;
    }

    public void setType(int type) {  // this is encapsulation. Protecting any value to be set.
        if (type >= 0 && type <= 3) {
            this.type = type;
        } else {
            System.out.println("We have four types only. Enter value between 0 to 4");
            try {
                throw new MyInvalidValueSetException();
            } catch (MyInvalidValueSetException e) {
                e.printStackTrace();
            }

        }
    }
} 
```

`Abstraction`与实现细节未知的方法有关，这是一种实现隐藏。
`Encapsulation`与实例变量绑定与方法有关，一种数据隐藏。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-02-13T13:33:17.723

抽象是向用户显示必要的信息，而封装则向用户隐藏不需要的数据（来自用户的产品）。

封装实现了抽象。

抽象是封装实际实现它的过程。 **例如。** **添加用户逻辑**-> 我们需要验证用户，创建数据库连接并插入用户。所以用户不知道需要调用验证函数，创建数据库连接，然后将值插入数据库。他只调用 AddUser 函数，该函数用 in 调用内部所有逻辑，这只是封装（对功能进行分组并隐藏方法）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-19T04:48:34.070

**封装：**我认为这与如何将事物绑定到一个实体而不是隐藏有很大关系。如果你选择隐藏你可以隐藏的东西。

**抽象：**抽象与隐藏的东西有很大关系，可以有不同的抽象级别。例如，在功能抽象中，我们可能会说能够将项目添加到列表中很重要，但如何完成的细节并不重要，应该隐藏起来。使用数据抽象，我们会说列表是我们可以存储信息的地方，但是列表的实际实现方式（例如，作为数组或作为一系列链接位置）并不重要，应该隐藏。

[参考](http://www.tonymarston.co.uk/php-mysql/abstraction.txt)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-12-23T17:41:39.643

**抽象**——用简单的话来说，抽象可以说是一种让用户远离某些系统的复杂细节或详细工作的方法。您也可以将其视为解决设计和界面级别任何问题的简单方法。

您可以说抽象的唯一目的是隐藏可能使用户感到困惑的细节。所以为了简化的目的，我们可以使用抽象。抽象也是面向对象编程的一个概念。它隐藏了实际数据，只显示了必要的信息。例如，在 ATM 机中，您不知道它在内部是如何工作的。只有您关心使用 ATM 接口。所以这可以被认为是一种抽象过程。

**封装**——封装也是面向对象编程的一部分。在这种情况下，您所要做的就是将数据和代码打包在一起，以便它们可以作为一个单元工作。它在实施级别起作用。它还提高了应用程序的维护性。

封装侧重于将保存信息的过程。在这里，您必须保护您的数据不被外部使用。

# c# - 转换字典时出现显式转换运算符错误

> ID：16014293
> 
> 赞同：2
> 
> 时间：2013-04-15T11:42:48.447
> 
> 标签：c#, operator-keyword, implicit

用户定义的转换必须与封闭类型相互转换。

尝试转换时出现问题`Dictionary<string,string>`。这甚至可能吗？

下面是我的代码。

```
 using Newtonsoft.Json;

    public static implicit operator Dictionary<string, string>(string jsonString)
    {
        return JsonConvert.DeserializeObject<Dictionary<string, string>>(jsonString); ;
    }

    public static implicit operator string(Dictionary<string, string> dict)
    {
        return JsonConvert.SerializeObject(dict);
    } 
```

这是否意味着我应该在`Dictionary`Class 中编写这两个方法？如果是这样，是否不可能将字符串转换为`Dictionary`？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:56:16.860

您不能为定义运算符的类型定义额外的转换运算符，`Dictionary<string, string>`或者`string`如果它们不从或转换为您定义运算符的类型，就像您不能为这些类型声明其他方法一样。

您要么需要将这些转换定义为普通的静态实用程序方法，要么可以定义派生自的类`Dictionary<string, string>`并在其中定义运算符：

```
public class StringDictionary : Dictionary<string, string>
{
    public static implicit operator StringDictionary(string jsonString) 
    {
        return JsonConvert.DeserializeObject<StringDictionary>(jsonString);;
    }

    public static implicit operator string(StringDictionary dict) 
    {
        return JsonConvert.SerializeObject(dict);
    }
} 
```

# php - JavaScript 数组搜索和 MySQL LIKE 查询哪个更高效？

> ID：16014295
> 
> 赞同：2
> 
> 时间：2013-04-15T11:42:57.820
> 
> 标签：php, javascript, mysql, arrays

我知道这是一个有点模糊的问题，但哪种算法会更有效和/或“更快”？

搜索预加载的 JavaScript 名称数组或使用 MySQL 查询`"SELECT NAME WHERE NAME LIKE '%VARIABLE%'`？将使用 jquery AJAX 调用 MySQL 来访问 PHP 文件。

我网站的一些背景知识，它是一个主要面向移动用户的网站，并使用 jquery 和 php 的组合来提供内容。在这种情况下，用户将在**约 22,000 个**唯一名称的列表中搜索特定名称。

我还考虑过使用 LocalStorage 作为缓存来存储表，但这需要一个额外的（尽管成本可能更低？）验证/更新/加载缓存的步骤。

如果需要更多信息，请提前告诉我并感谢。

编辑：

一些额外的信息，用户可以并且可能会搜索多个非唯一值。例如：“Jane”的搜索值可以并且应该返回结果`'Jane Smith', 'Janet Smith', 'Jane Doe', 'Janess Whatver', 'jfhfuhd_JANE_dfifhf, 'Blah'`（不知道谁会有这样的名字，但如果它在数据库中并且他们搜索了 Jane，它应该与其他人一起返回）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:51:20.190

我会选择 MySQL。事实上，我什至不会考虑将两者进行比较。

数据库擅长处理数据：这是他们的工作。让他们去做。

将数据存储在本地有很多缺点：

*   如果一条数据发生变化怎么办？您会再次将所有数据重新发布给所有客户吗？
*   您必须首先将所有数据发送给所有客户端。
*   客户是否有空间（保留）该数据？

当然，最好的方法是完全或部分地对名称进行索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T11:48:04.217

这只是猜测，但未经测试，我会立即使用 MySQL 查询。MySQL 已由其开发人员针对最佳搜索/排序算法进行了优化——这就是它的工作（看看他们的[基准手册](http://www.mysql.com/why-mysql/benchmarks/)会让你知道他们有多关心）。编写 JavaScript 解释器的人不会有那么多时间来优化他们的搜索/排序算法。

作为一个额外的好处，Javascript 选项取决于客户端的计算机速度和浏览器 - 一个慢速设备，执行不佳的解释将需要更长的时间。但是，MySQL 选项取决于*您的*服务器，因此完全在您的控制之下。

**一些测试**

具有 10,000 个值的 JavaScript 数组，与设定值（jsfiddle.net/c6rpK/）进行比较 - 我得到大约 12 毫秒

对于使用 MySQL 的相同测试，我得到 2.3ms

# angularjs - 有没有办法让资源调用返回一个 AngularJS 的承诺？

> ID：16014301
> 
> 赞同：1
> 
> 时间：2013-04-15T11:43:16.100
> 
> 标签：angularjs

我有以下代码，它返回一个承诺，这正是我这次调用所需要的。现在我想让我对 $resource 的调用返回一个承诺，但我无法让它做我需要的事情。

```
get: function (applicationId) {
   return $http({
      method: 'GET',
      url: '/api/TestAccounts/GetSelect',
      params: { applicationId: applicationId }
   });
} 
```

我的资源编码如下：

```
var Test = $resource('/api/Tests', {}, {
   saveData: { method: 'PUT' },
   deleteData: { method: "DELETE", params: { testId: 0 } }
}); 
```

当我运行以下命令并将数据正确返回到 resp 变量中时。然而，这不是我想要的。

```
 query: function (selectedSubject) {
    Test.query({ subjectId: selectedSubject },
       function (resp) {
          var aa = resp;
        }
    );
 } 
```

**问：**我想回报一个承诺。有没有一种方法可以让 $resource 像调用 $http 那样返回一个承诺？我正在寻找的是一个承诺，因此我可以执行以下调用代码：

```
testService.query($scope.selectedSubject)
   .then(function (result) {
      var a = result.data;
   }, function (result) {
      alert("Error: No data returned");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:23:48.997

只需使用 $q 服务并修改代码如下并返回一个承诺

```
query: function (selectedSubject) {

         var deferred = $q.defer();
        Test.query({ subjectId: selectedSubject },
           function (resp) {
              deferred.resolve(resp);
            }
        );
    return deferred.promise;
     } 
```

# rest - 如何在 ember.js-data 中处理 REST 调用的响应

> ID：16014302
> 
> 赞同：0
> 
> 时间：2013-04-15T11:43:16.363
> 
> 标签：rest, ember.js, ember-data

我已经使用 RESTAdapter 设置了 Ember，以便通过 RESTfull API 检索我的模型。

```
App.Store = DS.Store.extend({
    revision: 12,
    adapter: DS.RESTAdapter.create({ 
    url : 'http://127.0.0.1:5000',
    // In order to allow cross domain requests
    ajax: function(url, type, hash) {
        jQuery.ajax(url)

        },
    }),
});

App.File = DS.Model.extend({
    content: DS.attr('string'),
    name: DS.attr('string'),
}); 
```

在我的路线中，我想要一个通过 REST 调用的特定文件并将其传递给我的模板。

```
 App.FilesRoute = Ember.Route.extend({
        model: function() {
            var file = App.File.find("49898c14b49eab87597d3195b500107e")
            console.log(file)
            return file  
        }
    }); 
```

但是当我返回文件时，Ember 为我提供了一个空白页。当我返回一个随机字符串时，我的模板将加载。

Chromiums 开发人员工具的 Network 选项卡向我显示了调用的响应`http://127.0.0.1:5000/files/49898c14b49eab87597d3195b500107e`： `{"file": {"content": null, "name": "Titl"}}` 这是我预期的响应。但是 Ember 将它包装在一个复杂的对象中： ![在此处输入图像描述](https://i.stack.imgur.com/O7rgc.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:12:53.893

The "complex" object is a DS.Model instance. In your case, it should be a App.File.

You can access the retrieved value by calling `.get('name')` on this object for example.

Also, `App.FilesRoute` expects you to return an array, not a single instance.

# xslt - 将查询字符串保存到变量中

> ID：16014304
> 
> 赞同：0
> 
> 时间：2013-04-15T11:43:27.163
> 
> 标签：xslt

我想将查询字符串保存到 xslt 中的变量中。

我怎样才能完成这项工作？

```
www.mydomain.com/products/product.aspx?query="prod-+og+skipr"&searchField=Category&at=privat 
```

我的 Xslt

```
<xsl:if test="$isloggedin != 'true'">
    <ul class="tax-switch">
        <li class="private-btn">
            <xsl:if test="library:RequestQueryString('at') = 'privat'">
                <xsl:attribute name="class">
                    <xsl:text>private-btn active</xsl:text>
                </xsl:attribute>
            </xsl:if> <a href="?at=privat" at="privat">Privat</a>
        </li>
        <li class="business-btn">
            <xsl:if test="library:RequestQueryString('at') = 'business'">
                <xsl:attribute name="class">
                    <xsl:text>business-btn active</xsl:text>
                </xsl:attribute>
            </xsl:if> <a href="?at=business" at="business">business</a>
        </li>
    </ul>
</xsl:if> 
```

这里的 href 仅包含 ?at=business 但我需要在 ?at 之前附加整个查询字符串

# facebook - 使用 fb graph 登录画布应用程序时如何获取电子邮件？

> ID：16014307
> 
> 赞同：-1
> 
> 时间：2013-04-15T11:43:36.350
> 
> 标签：facebook, facebook-login, facebook-canvas, facebook-graph-api

当用户仅使用 fb graph api 登录我的 facebook canvas 应用程序时，我想获取用户电子邮件？我不想使用 facebook php sdk，因为我无法使用此代码处理它（实际上，我尝试了很多但失败了）Plz帮助

```
$app_id = "xxxxxxx";

$canvas_page = "xxxxxxxx";

$auth_url = "http://www.facebook.com/dialog/oauth?client_id=" . $app_id . "&redirect_uri=" . urlencode($canvas_page);

$signed_request = $_REQUEST["signed_request"];

list($encoded_sig, $payload) = explode('.', $signed_request, 2);

$data = json_decode(base64_decode(strtr($payload, '-_', '+/')), TRUE);

if(empty($data["user_id"])) 
{
    echo("<script> top.location.href='" . $auth_url . "'</script>");
} 
else 
{
    echo ("Welcome User: " . $data["user_id"]);
    echo ("Welcome User: " . $data["email"]);   //i tried this
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:22:47.277

'email' 字段可以在 FB API 的`user`对象中找到，但前提是您已明确请求`email`权限。有很多方法可以请求此权限，例如

```
$param['scope'] = "email";
$login_url = $facebook->getLoginUrl($param);
echo 'Please <a href="' . $login_url . '">login.</a>'; 
```

将打印一个授权电子邮件权限的登录 url。然后，您可以通过用户对象检索电子邮件，如下例所示：

```
$user_profile = $facebook->api('/me','GET');
echo "email: ".$user_profile['email']; 
```

[**注意：**应用程序无法获取用户朋友的电子邮件地址。](http://developers.facebook.com/docs/reference/login/email-permissions/)

# android - OnCompletionListener

> ID：16014309
> 
> 赞同：1
> 
> 时间：2013-04-15T11:43:41.740
> 
> 标签：android

任何人都向我解释了如何在 android 程序中使用 OnCompletionListener 一个接一个地播放音频...这里无法获取第二个音频文件..

```
private void playRecording() throws IllegalArgumentException,
        SecurityException, IllegalStateException, IOException {

    player = new MediaPlayer();
    player.setOnCompletionListener(new OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
            player.stop();
            if (i < numberOfFiles) {

                i++;
                playAudio(Environment.getExternalStorageDirectory()
                        .getAbsolutePath() + "/android" + i + ".3gp");
            }
        }
    });
    player.start();

}

private void playAudio(String filename) {

    try {

        Toast.makeText(getApplicationContext(), filename, Toast.LENGTH_LONG)
                .show();
        player.setDataSource(filename);
        player.prepare();
        player.start();

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# java - 查找变量类型参数的中位数

> ID：16014313
> 
> 赞同：0
> 
> 时间：2013-04-15T11:43:59.737
> 
> 标签：java, classcastexception

我有一个方法，它以对象的形式接受可变数量和类型的参数。我想仅计算这些参数中数字的中位数。我使用列表插入元素（数字），然后使用集合对列表进行排序。每当我将整数和双精度数作为参数传递时，我都会在 Collections.sort() 行中收到 Classcast 异常。这是我的方法：

```
public Object median(Object... O) {

    List l = new ArrayList<Object>();
    for (int i = 0; i < O.length; i++) {
        if (Number.class.isAssignableFrom(O[i].getClass())) {
            l.add(O[i]);
        } else {
            try {
                double d = Double.parseDouble(O[i].toString());
                l.add(d);
            } catch (Exception e) {

            }
        }
    }
    Collections.sort(l);
    double sum = 0;
    if (l.size() % 2 == 0) {

        if (l.get((l.size()) / 2 - 1) instanceof Double) {
            Double d = (Double) l.get((l.size()) / 2 - 1);
            sum += d;
        } else if (l.get((l.size()) / 2 - 1) instanceof Integer) {
            Integer d = (Integer) l.get((l.size()) / 2 - 1);
            sum += d;
        }
        if (l.get((l.size()) / 2) instanceof Double) {
            Double d1 = (Double) l.get(l.size() / 2);
            sum += d1;
        } else if (l.get((l.size()) / 2) instanceof Integer) {
            Integer d1 = (Integer) l.get(l.size() / 2);
            sum += d1;
        }

        return sum / 2;
    } else {
        if (l.get((l.size()) / 2) instanceof Double) {
            Double d1 = (Double) l.get(l.size() / 2);
            sum = d1;
        } else if (l.get((l.size()) / 2) instanceof Integer) {
            Integer d1 = (Integer) l.get(l.size() / 2);
            sum = d1;
        }
        return sum;
       }

    } 
```

我可以以任何方式调用该方法，例如：

1.  System.out.println("中位数------"+cmp.median(13, 18, 13, 14, 13, 16, 14, 21, 13));

2.  System.out.println("中位数---------"+cmp.median(13, 18.1, 13, 14, 13, 16, 14, 21, 13));

3.  System.out.println("中位数---------"+cmp.median(13, 18, 13,"13", 14, 13, 16, 14, 21,13);

4.  System.out.println("中位数---------"+cmp.median(13, 18,"xyz", 13, 14, 13, 16, 14,21,13));

我认为 Collections.sort() 不能与 Doubles 一起使用。请提出出路！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:46:43.900

兑换

```
List l = new ArrayList<Object>(); 
```

至

```
List<Number> l = new ArrayList<Number>(); 
```

并使用： 在`for`循环内，有：

```
if(O[i] instanceof Number)
   l.add((Number)O[i]); 
```

并对它们进行排序：

```
Collections.sort(l, new Comparator<Number>(){
 @Override
  public void compare(Number t1, Number t2){
   if(t1.doubleValue<t2.doubleValue)
    return -1;
    else if(t1.doubleValue==t2.doubleValue)
       return 0 
    else return 1
}
} 
```

它正确抛出`ClassCastException`，因为`l`定义的是 type 的列表`Object`。根据声明`Object`不执行`Comparable`。因此，您需要提供一个比较器来完成这项工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:31:50.587

## Method to find median of any number and type of arguments

```
@Override
public Object median(Object... O) {
    List<Double> l = new ArrayList<Double>();
    for (int i = 0; i < O.length; i++) {
        if (Number.class.isAssignableFrom(O[i].getClass())) {
            if (O[i] instanceof Double) {
                Double d = (Double) O[i];
                l.add(d);

            } else if (O[i] instanceof Integer) {
                Integer j = (Integer) O[i];
                double d = Double.parseDouble(Integer.toString(j));
                l.add(d);
            }
        } else {
            try {
                double d = Double.parseDouble(O[i].toString());
                l.add(d);
            } catch (Exception e) {

            }
        }
    }
    Double[] array = new Double[(l.size())];
    l.toArray(array);
    Arrays.sort(array);
    double sum = 0;
    if (array.length % 2 == 0) {

        sum = array[array.length / 2 - 1] + array[array.length / 2];

        return sum / 2;
    } else {

        return array[array.length / 2];
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:54:15.293

我想问题出在你的 else 块上。

如果您的控制流转到 else 则意味着该对象不是数字（双精度或其他方式），因此将其添加到列表中根本不明智。

同样在您的 If 块中，您可能应该区分各种数字，即 Integer、Double 等，并相应地进行转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:55:00.180

我会做类似的事情：

```
public Object median(Object... objs) {
  List<Number> nrs = extractNumbers(objs);
  // do whatever with the numbers
}

private List<Number> extractNumbers(Object[] objs) {
   final List<Number> nrs = new ArrayList<Number>();
   for(final Object o:objs){
      if(isNumber(o)){
        nrs.add(getNumber(o));
      }
   }
   return nrs;
}
private boolean isNumber(Object o){
  Number.class.isAssignableFrom(o.getClass());
}
private Number getNumber(Object o){
  return (Number) o;
} 
```

然后您可以修改`isNumber`/`getNumber`方法以适应您的识别/解析需求，而不会影响算法的其余部分

# android - Android LVL：再次“无法绑定到服务”（getApplicationContext() 没有帮助）

> ID：16014317
> 
> 赞同：0
> 
> 时间：2013-04-15T11:44:14.687
> 
> 标签：android, android-lvl

*   我复制了 *{android-sdk}\extras\google\play_licensing\sample* ，将 *{android-sdk}\extras\google\play_licensing\library\src* 添加到复制项目的*src目录中。*
*   修改了BASE64_PUBLIC_KEY，设置为我的其中一个键。
*   在模拟器上添加google账号，登录。就是BASE64_PUBLIC_KEY对应的账号。
*   许可证测试响应设置为 LICENSED
*   试图改变

    ```
    new ServerManagedPolicy(this, ...) 
    ```

    至

    ```
    new ServerManagedPolicy(this.getApplicationContext(), ...) 
    ```

*   也在`LicenseChecker.checkAccess()`试图改变

    ```
    mContext.bindService() 
    ```

    至

    ```
    mContext.getApplicationContext().bindService() 
    ```

`.bindService()`仍然返回 false 并且在 bindService() 调用期间 log​​cat 仍然报告警告：

```
Unable to start service Intent { act=com.android.vending.licensing.ILicensingService }: not found 
```

有人可以参考我请一个 LVL 的工作示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:05:44.263

解决了。对于项目和模拟器 avd，必须使用“Google API”而不是“Android”。

# arduino - 来自 ITG3200 陀螺仪的 Arduino I²C 主读卡器

> ID：16014320
> 
> 赞同：0
> 
> 时间：2013-04-15T11:44:26.277
> 
> 标签：arduino, gyroscope, i2c, msp430

我正在使用将 Arduino 库转换为[MSP430](http://en.wikipedia.org/wiki/TI_MSP430)库的 Energia库。我将陀螺仪连接到[Launchpad](http://en.wikipedia.org/wiki/TI_MSP430#MSP430_Launchpad)并使用所需的上拉电阻构建电路。以下是 Sparkfun 陀螺仪的示例代码：

```
//The Wire library is used for I²C communication
#include <Wire.h>

//This is a list of registers in the ITG-3200\. Registers are parameters that
//determine how the sensor will behave, or they can hold data that represent
//the sensors current status.
//To learn more about the registers on the ITG-3200, download and read the datasheet.
char WHO_AM_I = 0x00;
char SMPLRT_DIV= 0x15;
char DLPF_FS = 0x16;
char GYRO_XOUT_H = 0x1D;
char GYRO_XOUT_L = 0x1E;
char GYRO_YOUT_H = 0x1F;
char GYRO_YOUT_L = 0x20;
char GYRO_ZOUT_H = 0x21;
char GYRO_ZOUT_L = 0x22;

//This is a list of settings that can be loaded into the registers.
//DLPF, Full Scale Register Bits
//FS_SEL must be set to 3 for proper operation
//Set DLPF_CFG to 3 for 1kHz Fint and 42 Hz low pass Filter
char DLPF_CFG_0 = 1<<0;
char DLPF_CFG_1 = 1<<1;
char DLPF_CFG_2 = 1<<2;
char DLPF_FS_SEL_0 = 1<<3;
char DLPF_FS_SEL_1 = 1<<4;

//I²C devices each have an address. The address is defined in the datasheet for the
//device. The ITG-3200 breakout board can have different address depending on how
//the jumper on top of the board is configured. By default, the jumper is connected to
//the VDD pin. When the jumper is connected to the VDD pin the I²C address
//is 0x69.
char itgAddress = 0x69;

//In the setup section of the sketch the serial port will be configured, the I²C
//communication will be initialized, and the ITG-3200 will be configured.
void setup()
{
    //Create a serial connection using a 9600 bit/s baud rate.
    Serial.begin(9600);

    //Initialize the I²C communication. This will set the Arduino up as the 'Master'  device.
    Wire.begin();

    //Read the WHO_AM_I register and print the result
    char id=4;
    id = itgRead(itgAddress, 0x00);
    Serial.print("ID: ");
    Serial.println(id, HEX);

    //Configure the gyroscope
    //Set the gyroscope scale for the outputs to +/-2000 degrees per second
    //itgWrite(itgAddress, DLPF_FS, (DLPF_FS_SEL_0|DLPF_FS_SEL_1|DLPF_CFG_0));
    //Set the sample rate to 100 Hz
    //itgWrite(itgAddress, SMPLRT_DIV, 9);
}

//The loop section of the sketch will read the X,Y and Z output rates from the gyroscope and 
//output them in the Serial Terminal
void loop()
{
    //Create variables to hold the output rates.
    //int xRate, yRate, zRate;

    //Read the x,y and z output rates from the gyroscope.
    // xRate = readX();
    // yRate = readY();
    // zRate = readZ();

    //Print the output rates to the terminal, seperated by a TAB character.
    // Serial.print(xRate);
    // Serial.print('\t');
    // Serial.print(yRate);
    // Serial.print('\t');
    // Serial.println(zRate);

    //Wait 10 ms before reading the values again. (Remember, the output rate was set 
    //to 100 Hz and one reading per 10 ms = 100 Hz.)
    char id = 4;
    id = itgRead(itgAddress, 0x00);
    Serial.print("ID: ");
    Serial.println(id, HEX);
    delay(1000);
}

//This function will write a value to a register on the itg-3200.
//
//Parameters:
//  char address: The I²C address of the sensor. For the ITG-3200 breakout the address is 0x69.
//  char registerAddress: The address of the register on the sensor that should be written to.
//  char data: The value to be written to the specified register.
void itgWrite(char address, char registerAddress, char data)
{
    //Initiate a communication sequence with the desired I²C device
    Wire.beginTransmission(address);
    //Tell the I²C address which register we are writing to
    Wire.write(registerAddress);
    //Send the value to write to the specified register
    Wire.write(data);
    //End the communication sequence
    Wire.endTransmission();
}

//This function will read the data from a specified register on the ITG-3200 and return the value.
//Parameters:
//  char address: The I²C address of the sensor. For the ITG-3200 breakout the address is 0x69.
//  char registerAddress: The address of the register on the sensor that should be read
//Return:
//  unsigned char: The value currently residing in the specified register
unsigned char itgRead(char address, char registerAddress)
{
    //This variable will hold the contents read from the I²C device.
    unsigned char data = 5;

    //Send the register address to be read.
    Wire.beginTransmission(address);

    //Send the Register Address
    Wire.write(registerAddress);

    //End the communication sequence.
    Wire.endTransmission();

    //Ask the I²C device for data
    //Wire.beginTransmission(address);
    Wire.requestFrom(address, 1);

    //Wait for a response from the I²C device
    if(!Wire.available()){
        //Save the data sent from the I²C device
        data = Wire.read();
    }

    //End the communication sequence.
    // Wire.endTransmission();

    //Return the data read during the operation
    return data;
}

//This function is used to read the X-Axis rate of the gyroscope. The function
//returns the ADC value from the gyroscope.
//NOTE: This value is NOT in degrees per second.
//Usage: int xRate = readX();
int readX(void)
{
    int data = 0;
    data = itgRead(itgAddress, GYRO_XOUT_H)<<8;
    data |= itgRead(itgAddress, GYRO_XOUT_L);

    return data;
}

//This function is used to read the Y-Axis rate of the gyroscope. The function returns     
//the ADC value from the gyroscope.
//NOTE: This value is NOT in degrees per second.
//Usage: int yRate = readY();
int readY(void)
{
    int data=0;
    data = itgRead(itgAddress, GYRO_YOUT_H)<<8;
    data |= itgRead(itgAddress, GYRO_YOUT_L);

    return data;
}

//This function is used to read the Z-axis rate of the gyroscope. The function returns 
//the ADC value from the gyroscope.
//NOTE: This value is NOT in degrees per second.
//Usage: int zRate = readZ();
int readZ(void)
{
    int data = 0;
    data = itgRead(itgAddress, GYRO_ZOUT_H)<<8;
    data |= itgRead(itgAddress, GYRO_ZOUT_L);

    return data;
} 
```

我将示波器连接到 SDA 和 SCL 总线上以测量结果是否正确。在前 8 个 SCL 周期中，SDA 总线是我所期望的，7 位从地址和 1 位读取。但是对应于来自陀螺仪的 ACK 的第 9 个 SCL 周期应该为低的 SDA 似乎是错误的。陀螺仪永远不会将 SDK 降低到低电平以确认主机。

我最近买了这个产品，所以我认为它没有问题。我猜主人从不释放 SDA 总线来检查 ACK。我在这里想念什么？

# javascript - UIWebView 和 javascript window.opener

> ID：16014323
> 
> 赞同：1
> 
> 时间：2013-04-15T11:44:29.257
> 
> 标签：javascript, ios, uiwebview, window.opener

假设一个 UIWebView 使用 window.open() 运行 javascript 代码来打开一个新窗口。假设我重写 window.open() 以与本机代码通信并打开一个单独的 UIWebView。现在我希望这两个 web 视图通过 window.opener 在 javascript 中进行通信。这怎么可能？

# html - 垂直对齐不起作用

> ID：16014332
> 
> 赞同：0
> 
> 时间：2013-04-15T11:45:03.537
> 
> 标签：html, css

所以这就是发生的事情

![在此处输入图像描述](https://i.stack.imgur.com/VbTMM.png)

我想垂直对齐右侧的箭头，使其位于 div 的中心。这是html：

```
<div class="title-block" >
    <span class="date">{{ order.getCreated()|date('M d, Y') }}</span>
    <span class="invoice">Invoice #{{ order.getInvoice().getInvoiceNumber()}}</span>
    <span class="retail-price">Rp {{ order.getTotalPrice() }}</span>
    <img src="{{ asset('bundles/shopiousmain/img/dashboard-li-down-arrow.png') }}"/>
</div> 
```

如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/BIU2M.png)

它的垂直对齐已经设置为中间。但是，为什么它不垂直居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:52:24.473

删除`float:right`将修复它，但随后您将失去浮动。或者，如果你知道元素的高度并且你确定它不会改变，你可以试试这个：

```
.title-block img {
  position:absolute;
  height: 20px;
  top: 0;
  bottom: 0;
  right: 0;
  margin: auto 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:53:04.653

**现在习惯了这个**Define your `.title-block` `position relative;`and your`img tag` `absolute`并`right:0; top:xxx;` **根据你的设计**定义..

```
.title-block{position:relative;}
#order-history .data-container-body .data-block .title-block img{
float:none;
position:absolute;
right:0;
top:10px; // according to your design set 
} 
```

# ruby-on-rails - 红宝石heroku系统计时器问题

> ID：16014334
> 
> 赞同：1
> 
> 时间：2013-04-15T11:45:14.017
> 
> 标签：ruby-on-rails, heroku, gemfile

我正在尝试将我的 rails 项目上传到 heroku。我不断收到错误：

```
An error occurred while installing SystemTimer (1.2.3), and Bundler cannot
continue. 
```

我已经做了一些研究并进行了相应的修改，但它仍然无法正常工作。首先，我尝试在我的 gemfile 中注释掉 SystemTimer，但没有这样做。我的 heroku 系统堆栈显然是 Cedar 1.9.1。我的红宝石版本是 1.8.7。根据网上的一些研究，把：

```
ruby '1.8.7' 
```

在 gemfile 中将恢复到 Cedar 1.8.7，并相应地编译它，但这也不起作用。知道我能做什么吗？这是我不断收到的全部信息（不知道为什么会出现 1.9.1，即使我在 gemfile 中明确提到了 1.8.7）：

```
 Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
christophecompaq@ubuntu:~/Populisto-heroku$ git push heroku master
Counting objects: 1347, done.
Compressing objects: 100% (871/871), done.
Writing objects: 100% (1347/1347), 3.09 MiB | 99 KiB/s, done.
Total 1347 (delta 426), reused 1033 (delta 276)

-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       Fetching gem metadata from https://rubygems.org/.......
       Fetching gem metadata from https://rubygems.org/..
       Installing rake (0.9.5)
       Installing SystemTimer (1.2.3)
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       creating Makefile
       make
       gcc -I. -I/usr/local/include/ruby-1.9.1/x86_64-linux -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I.   -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long  -o system_timer_native.o -c system_timer_native.c
       In file included from system_timer_native.c:8:
       /usr/local/include/ruby-1.9.1/ruby/backward/rubysig.h:14:2: warning: #warning rubysig.h is obsolete
       system_timer_native.c: In function ‘install_first_timer_and_save_original_configuration’:
       system_timer_native.c:46: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:53: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:57: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:62: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:65: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:69: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:82: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:89: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:96: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:101: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c: In function ‘install_next_timer’:
       system_timer_native.c:112: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:119: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:123: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:130: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:136: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:143: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:146: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c: In function ‘restore_original_configuration’:
       system_timer_native.c:157: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:160: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:168: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:170: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:172: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c: In function ‘restore_original_timer_interval’:
       system_timer_native.c:190: warning: passing argument 1 of ‘log_error’ discards qualifiers from pointer target type
       system_timer_native.c:38: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:192: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c: In function ‘restore_sigalrm_mask’:
       system_timer_native.c:199: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:201: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:37: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c: In function ‘install_ruby_sigalrm_handler’:
       system_timer_native.c:211: error: ‘rb_thread_critical’ undeclared (first use in this function)
       system_timer_native.c:211: error: (Each undeclared identifier is reported only once
       system_timer_native.c:211: error: for each function it appears in.)
       system_timer_native.c: In function ‘restore_original_ruby_sigalrm_handler’:
       system_timer_native.c:217: error: ‘rb_thread_critical’ undeclared (first use in this function)
       system_timer_native.c: In function ‘clear_pending_sigalrm_for_ruby_threads’:
       system_timer_native.c:266: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:237: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c: In function ‘set_itimerval’:
       system_timer_native.c:290: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:237: note: expected ‘char *’ but argument is of type ‘const char *’
       system_timer_native.c:299: warning: passing argument 1 of ‘log_debug’ discards qualifiers from pointer target type
       system_timer_native.c:237: note: expected ‘char *’ but argument is of type ‘const char *’
       make: *** [system_timer_native.o] Error 1
       Gem files will remain installed in /tmp/build_nn5uo1y1yyxf/vendor/bundle/ruby/1.9.1/gems/SystemTimer-1.2.3 for inspection.
       Results logged to /tmp/build_nn5uo1y1yyxf/vendor/bundle/ruby/1.9.1/gems/SystemTimer-1.2.3/ext/system_timer/gem_make.out
       An error occurred while installing SystemTimer (1.2.3), and Bundler cannot
       continue.
       Make sure that `gem install SystemTimer -v '1.2.3'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:07:28.240

我把它修好了。问题似乎是，在我更改之后，我从未将我的项目推送到 github。我现在得到一个不同的错误，但它与系统计时器无关。谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:01:35.887

请参考以下链接：

[推送到 Heroku 时出现 Bundler 错误](https://stackoverflow.com/questions/7070035/bundler-error-when-pushing-to-heroku)

[Ruby on Rails - 无法安装 SystemTimer](https://stackoverflow.com/questions/10126336/ruby-on-rails-can-not-install-systemtimer)

如何在 1.9.2 上安装 SystemTimer：

[如何在 1.9.2 上安装 SystemTimer？](https://stackoverflow.com/questions/7850216/how-to-install-systemtimer-on-1-9-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:06:52.883

试一次`heroku restart`。您还可以使用 ruby​​ 1.9 中的超时库作为 SystemTimer 的替代品。

[http://ruby-doc.org/stdlib-1.9.3/libdoc/timeout/rdoc/Timeout.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/timeout/rdoc/Timeout.html)

# ios - 选择单元格时如何获取节标题视图的标题

> ID：16014338
> 
> 赞同：8
> 
> 时间：2013-04-15T11:45:25.183
> 
> 标签：ios, cocoa-touch, uitableview

我有一个`UITableView`which has many `sections`，每个部分只有 1 行。

我想要做的是，当我单击特定单元格时，应该更改与单元格对应的标题标题。

我已经使用`-tableView:viewForHeaderInSection:`

如何在`-tableView:didSelectRowAtIndexPath:`方法中获取行标题标题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T11:52:53.833

您可以获得所选索引的标题视图，例如：

```
UIView *headerView=[deviceTable headerViewForSection:indexPath.section]; 
```

然后通过循环从headerView中获取孩子。like

```
for(UIView *view in headerView.subviews)
{
     if ([v isKindOfClass:[UILabel class]])
        {
            UILabel *label=(UILabel *)v;
            NSString *text=label.text;
        }
} 
```

**编辑：** 正如 Desdenova 建议的那样：

```
 UITableViewHeaderFooterView *headerView=[deviceTable headerViewForSection:indexPath.section];
    NSString *title=headerView.textLabel.text; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T12:43:20.980

我建议同时实现`tableView:titleForHeaderInSection:`and `tableView:viewForHeaderInSection:`（如果两者都实现，那么 iOS 更喜欢`viewForHeaderInSection:`）。然后让您的实现`tableView:viewForHeaderInSection:`使用标签创建其视图并使用以下结果填充它`tableView:titleForHeaderInSection:`：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
     UIView *yourHeaderView;
     UILabel *someLabel;

     // set up the view + label

     // if self doesn't implement UITableViewDelegate, you can use tableView.delegate
     someLabel.text = [self tableView:tableView titleForHeaderInSection:section];

     return yourHeaderView;
} 
```

现在当你响应一行点击时，很容易得到相应的标题：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
     NSString *titleForHeader = [self tableView:tableView titleForHeaderInSection:indexPath.section];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-01T11:48:32.677

快速解决方案：

```
let sectionHeaderView = table.headerViewForSection(indexPath.section)
let sectionTitle = sectionHeaderView?.textLabel?.text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:49:35.913

只需将数据源用于节标题。所以无论`NSArray`你有什么保存字符串值

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
```

只需在 didSelectRowAtIndexPath 中使用它：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
...
NSString *titleForHeader = [myHeaderTitleArray objectAtIndex:indexPath.section];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-10T17:38:26.373

**斯威夫特 4**：

```
let indexPath = IndexPath.init(row: 0, section: 0) // put here your row or section number..
let myHeaderView = tableView.headerView(forSection:indexPath.section)
let title = myHeaderView?.textLabel?.text 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-15T11:48:25.133

您可以使用以下方法获取部分索引：

```
indexpath.section 
```

使用章节索引，您可以简单地复制您所拥有的内容`-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`以获得章节标题。

# asp.net-mvc - 保存 CKEDITOR 内容时出错

> ID：16014340
> 
> 赞同：0
> 
> 时间：2013-04-15T11:45:31.047
> 
> 标签：asp.net-mvc

在我的应用程序中允许用户创建 PDF 文件。在我的应用程序中使用了 CKEDITOR。

```
function create_PDF(box) {
        var filename = $("#filename").val();
        if (filename == "") {
            alert("Enter filename");
            return false;
        }
        var content = CKEDITOR.instances["message"].getData();
        if (content == "") {
            alert("Enter Content in The Editor");
            return false;
        }
        content = content.trim();
        dhtmlx.modalbox.hide(box);
        dhtmlx.message("Saving file...");
        $.post("/FileUpload/CreateNewPDFile",
    {
        filename: '' + filename + '', content: '' + content + ''
    }, function (data) {

        alert("PDF File created succesfully");
        CKEDITOR.instances["message"].setData("");
    });
    } 
```

CreateNewPDFFile 控制器代码为：

```
 public ActionResult CreateNewPDFile(FormCollection data)
    {
        var filename = data["filename"];
        var htmlContent = data["content"];
        string sFilePath = Server.MapPath(_createdPDF + filename + ".pdf");
        htmlContent = htmlContent.Trim();
        if (!System.IO.File.Exists(sFilePath))
        {
            Document doc = new Document(PageSize.A4, 10, 10, 10, 10);
            doc.SetMargins(50, 50, 50, 50);
            doc.SetPageSize(new iTextSharp.text.Rectangle(iTextSharp.text.PageSize.LETTER.Width, iTextSharp.text.PageSize.LETTER.Height));
            PdfWriter.GetInstance(doc, new System.IO.FileStream(sFilePath, System.IO.FileMode.Create));
            iTextSharp.text.Font fnt = FontFactory.GetFont("Times New Roman", 14);
            doc.Open();
            PdfPTable pdfTab = new PdfPTable(1);
            PdfPCell pdfCell = null;
            pdfCell = new PdfPCell(new Phrase(new Chunk(htmlContent)));
            pdfTab.AddCell(pdfCell);
            doc.Add(pdfTab);
            doc.Close();
            Response.ContentType = "application/pdf";

            System.Web.HttpContext.Current.Response.Write(doc);
            Response.Flush();
            Response.End();
        }

        return View();
    } 
```

PDF 文件已成功创建，但其中显示 HTML 内容，例如：如果我在文件中插入单选按钮，而不是在新创建的文件中，则显示

```
<input name="age" type="radio" 
```

值="15-20" />

而不是单选按钮。如何避免 html 内容？

# excel - Excel 2007 根据另一个字段更改单个系列中条形的颜色

> ID：16014342
> 
> 赞同：1
> 
> 时间：2013-04-15T11:45:37.733
> 
> 标签：excel, colors, bar-chart, series

我有一个包含如下数据的数据透视表：

```
Chain     Store               Units
Bob's     BB Los Angeles        10
Bob's     BB San Diego          12
Tom's     TM Los Angeles        12
Tom's     TM San Francisco      18
Kate's    K Monterey            11 
```

目前我有一个条形图，只是按降序显示所有商店和单位，所以首先是 TM San Francisco，然后是 TM Los Angeles 和 BB San Diego，然后是 K Monterey 等。这就是我想要查看数据的方式。

但我还想对链条进行颜色编码，所以 Bob 的商店有一个红色的条，Tom 的有蓝色，而 Kate 的有绿色。

是否有可能做到这一点？我尝试了各种设置数据透视表的方法，但最终看起来一团糟，我找不到将每个条形图的颜色基于“链”字段的方法。

=

我正在测试宏解决方案，但如果有人有非宏解决方案，请仍然回答。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:08:58.160

如果您正在寻找基于宏/VBA 的解决方案，那么操作图表的数据点格式非常容易。假设系列 XValues = Chain，您可以这样做：

```
Sub SetColors()
Dim cht As Chart
Dim srs As Series
Dim xVals As Variant
Dim p As Long

Set cht = ActiveSheet.ChartObjects(1).Chart '<-- Modify as needed'
Set srs = cht.SeriesCollection(1) '<-- Modify as needed'

xVals = srs.XValues  '<-- modify as needed, if your Chain is not part of series data you will need to build this array another way'

For p = 1 To UBound(xVals)
    Select Case xVals(p)
        Case "Bob's"
            srs.Points(p).Format.Fill.ForeColor.RGB = RGB(255, 0, 0)
        Case "Tom's"
            srs.Points(p).Format.Fill.ForeColor.RGB = RGB(0, 255, 0)
        Case "Kate's"
            srs.Points(p).Format.Fill.ForeColor.RGB = RGB(0, 0, 255)
    End Select
Next
End Sub 
```

如果链不是系列数据的一部分，则必须更改`xVals`设置方式，但一般原则仍应适用：遍历系列中的点，检查参考列表，并应用特定颜色基于参考项目。

# c# - 如何包含子类

> ID：16014345
> 
> 赞同：1
> 
> 时间：2013-04-15T11:45:46.053
> 
> 标签：c#, asp.net-mvc, entity-framework, include

有人可以帮我解决这个 .net mvc 问题：

我有这些课程：

```
public class ImportItem
{
    [Key]
    public int Id { get; set; }
}

public class ImportItemListTemplate
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public List<ImportItem> ImportItemList { get; set; }
}

public class Context : DbContext
{
    public DbSet<ImportItemListTemplate> ImportItemListTemplates { get; set; }
} 
```

在控制器中我需要设置这个：

```
Context context = new Context();
int id = ...;
ImportItemListTemplate tmp = context.ImportItemListTemplates.Find(id); 
```

但这不包括 ImportItemListTemplate 类中的 ImportItemList。我想我需要包含属性 ImportItemList，但我不知道如何。

我尝试了一些想法，例如：

```
ImportItemListTemplate tmp = context.ImportItemListTemplates.Include(i => i.ImportItemList).SingleOrDefault(x => x.Id == id); 
```

但它不起作用。错误：

> *“无法将 lambda 表达式转换为类型‘字符串’，因为它不是委托类型”*

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:51:50.510

您的代码应如下所示，

```
ImportItemListTemplate tmp = context.ImportItemListTemplates.Include("ImportItemList").SingleOrDefault(x => x.Id == id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:52:31.487

尝试这个：

```
ImportItemListTemplate tmp = context.ImportItemListTemplates
                                    .Include(i => i.ImportItemList)
                                    .Where(x => x.Id)
                                    .SingleOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:00:28.220

[`DbSet.Include`](http://msdn.microsoft.com/en-us/library/gg696785%28v=vs.103%29.aspx)接受一个字符串，所以它不会对 lambda 感到满意。

我想您需要的是名称空间[`IQueryable<T>.Include`](http://msdn.microsoft.com/en-us/library/gg679205%28v=vs.103%29.aspx)中的扩展方法`System.Data.Entity`，尤其是接受表达式的[重载。](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)有了它，您可以使用类似的语法

```
query.Include(e => e.Level1Collection) 
```

从数据库加载集合属性。
如果名称空间未添加到`using`列表中，请添加名称空间，然后重试代码。

# c# - 如何判断我使用的是 ObjectContext API 还是 DbContext API？

> ID：16014358
> 
> 赞同：0
> 
> 时间：2013-04-15T11:46:30.167
> 
> 标签：c#, entity-framework, dbcontext, objectcontext

我有两个具有不同数据库模型的项目（尽管相同的实体框架版本 5.0.0）。

他们的查询如下所示：

项目一：

```
if (_db.Entry(customer).State == EntityState.Detached) 
```

项目二：

```
if (customer.EntityState == EntityState.Detached) 
```

这些是差异，以及其他小事。

我如何知道每个项目正在使用哪个版本的实体框架（当 DLL 版本匹配时）？将“旧”版本更新为“新”模型版本是否有意义？有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:20:46.997

项目 1 使用`DbContext`API，因为只有这种上下文类型有`Entry`方法。

项目 2 最有可能与从那里`ObjectContext`派生`EntityObject`和`Customer`继承的实体一起使用`EntityState`。如果`Customer`有自定义`EntityState`属性，则无法用您的单行进行区分。按 F12 两次 - 一次在`customer`指向声明的变量上，然后在该`Customer`变量的类型（可能）上查看类声明并检查它是否派生自`EntityObject`.

引用项目 2 中的 EF5 程序集这一事实毫无意义。它可能未在代码中使用，或者代码仅使用了一些辅助方法（如 lambda 版本`Include`），但似乎并未使用`DbContext`. 它将引用 .NET 框架程序集（`System.Data.Entity.dll`等）中的 EF 类。

升级项目 2 值得考虑，因为所有更新的 EF 开发都遵循 POCO 方法（而不是`EntityObject`方法）。

# vim - 如何在 .vimrc 中为折叠高亮设置自定义颜色（用于 putty）

> ID：16014361
> 
> 赞同：28
> 
> 时间：2013-04-15T11:46:39.227
> 
> 标签：vim, putty, vim-syntax-highlighting

将以下内容添加到`.vimrc`作品中

```
:hi Folded ctermbg=Grey 
```

但它仍然过于明亮和突出，所以我们想指定一个更具体的颜色三元组，如下所示：

```
:hi Folded ctermbg=#A0A0A0 
```

但 vi 不会接受它：

```
Error detected while processing /home/guest/.vimrc:
line   10:
E421: Color name or number not recognized: ctermbg=#A0A0A0 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-15T12:09:45.000

`cterm`in`ctermbg`是“彩色终端”的缩写。它用于定义 Vim 在终端仿真器中运行时的背景颜色，并且只能接受命名颜色如`grey`or`cyan`或颜色编号如`7`. 十六进制值仅在 GVim/MacVim 中有效，并且必须与`guibg`/一起使用`guifg`：

```
hi Folded guibg=#A0A0A0 
```

在你的 shell 中，做`$ echo $TERM`：它应该返回类似`xterm`,`screen`或`xterm-256color`一些变体的东西。

如果您在不能显示超过 8/16 色（`$TERM`不包含`256color`）的终端仿真器中运行 Vim，除非您在终端仿真器中定义自己的调色板，否则您将无法使用不同的灰色阴影。

它应该如下所示：

```
hi Folded ctermbg=7 
```

或者像这样：

```
hi Folded ctermbg=grey 
```

如果您的终端仿真器将自己宣传为“准备好 256 种颜色”（`$TERM`contains `256color`），那么您可以使用[此图表](https://upload.wikimedia.org/wikipedia/commons/1/15/Xterm_256color_chart.svg)中的任何颜色，只要您使用它的数字（`242`）而不是它的十六进制值。

它应该如下所示：

```
hi Folded ctermbg=242 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:50:19.123

除了[romainl](https://stackoverflow.com/users/546861/romainl)的解释之外，必须将以下几行添加到 .vimrc 中，如此[处](http://www.mediabandit.co.uk/blog/151_putty-colours)所述：

```
if &term =~ "xterm"
  "256 color --
  let &t_Co=256
  " restore screen after quitting
  set t_ti=ESC7ESC[rESC[?47h t_te=ESC[?47lESC8
  if has("terminfo")
    let &t_Sf="\ESC[3%p1%dm"
    let &t_Sb="\ESC[4%p1%dm"
  else
    let &t_Sf="\ESC[3%dm"
    let &t_Sb="\ESC[4%dm"
  endif
endif 
```

之后，从romainl提供的[xterm256](https://stackoverflow.com/users/546861/romainl)[颜色表中](http://upload.wikimedia.org/wikipedia/en/1/15/Xterm_256color_chart.svg)选择的任何十进制颜色值都应相应地显示在 PuTTY 中。

# html - 扩大div的宽度

> ID：16014364
> 
> 赞同：2
> 
> 时间：2013-04-15T11:46:45.313
> 
> 标签：html, css

我正在研究一个部分，在该部分中我使用了两个带有浮动左侧的 div。当右 div 不可见时，我想扩大左 div 的宽度。

这就是我正在做的事情：

```
<style>

    body{
        font-family:Arial, Helvetica, sans-serif; 
        font-size:12px
    }
    .mainContainer{
        width:300px; 
        border:blue solid 1px; 
        overflow:hidden
    }
    .leftCont{
        float:left; 
        border:green solid 1px
    }
    .rightCont{
        float:left; 
        border:red solid 1px
    }

</style>

<div class="mainContainer">
    <div class="leftCont">
        Lorem ipsum dolor sit amet, consectetur 
    </div>
    <div class="rightCont">
        right
    </div>
</div> 
```

我只想用 div/css 来解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:22:31.767

如果您不介意，您可以通过将右侧放在`div`左侧之前稍微更改标记来实现：

```
<div class="rightCont"></div>
<div class="leftCont"></div> 
```

然后，将你的浮动`div.rightCont`到右边，然后给左边的一个溢出 whitout 浮动它：

```
.leftCont{
  overflow: hidden;
  border: green solid 1px
}
.rightCont{
  float: right;
  border: red solid 1px
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:00:47.910

`float:left`不可能，请尝试使用`display:table`和`display:table-cell`

```
body{
        font-family:Arial, Helvetica, sans-serif; 
        font-size:12px
    }
    .mainContainer{
        width:300px; 
        overflow:hidden;
        border:1px solid blue;
        display:table;
    }
    .leftCont{        
        border:green solid 1px;
        display:table-cell;
    }
    .rightCont{
        border:red solid 1px;
        display:table-cell;
    } 
```

**[演示](http://jsfiddle.net/maheshsapkal/uVykV/1/)**

# java - 如何在Android中为复选框勾选设置白色背景？

> ID：16014365
> 
> 赞同：0
> 
> 时间：2013-04-15T11:46:54.227
> 
> 标签：java, android

我正在为 4.0 版本开发 Android 应用程序，并且所有复选框都有黑色背景用于勾选，但我需要白色。如果我使用“背景”xml 属性作为“白色”，那么所有复选框（带文本）都是白色的；我只需要白色的地方来打勾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T09:45:14.380

也许我的解决方案不是很优雅，但它对我有用：

我只是用复选框矩形 (15x15) 的尺寸和白色背景创建了另一个布局。然后我将此布局添加到一个RelativeLayout，我还在其中放置了复选框。边距为 9dp，我将白色布局矩形放在复选框下方，因此复选框的背景颜色似乎是白色。

```
 <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="@dimen/login_large_margin"
            android:layout_marginTop="@dimen/login_medium_margin" >

            <RelativeLayout
                android:layout_width="15dp"
                android:layout_height="15dp"
                android:layout_margin="9dp"
                android:background="@color/white" >
            </RelativeLayout>

            <CheckBox
                android:id="@+id/login_check"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:fontFamily="sans-serif-light"
                android:text="@string/login_check"
                android:textColor="@color/white" >
            </CheckBox>
        </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:58:58.003

最简单的方法 -`CheckBox`使用`ImageView`3 个背景状态 ( `stateSelected=true`, `stateSelected=false`, `statePressed = true`) 进行模拟。
只需创建具有 3 个背景的适当 xml 文件并将其设置为`ImageView` `background`.
然后在代码中，单击时`ImageView`只需 switch `ImageView.setSelected = !ImageView.isSelected`。

希望它的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T07:02:15.897

我不知道我是不是很晚了还是什么，但这是[解决方案](https://stackoverflow.com/a/11464319/2683275)

**代码片段：**

说这个选择器的名字是“checkbox_selector”

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_checked="true" 
    android:drawable="@drawable/cbchk_blue"
    android:state_focused="false">
</item>
<item android:state_checked="true" 
    android:drawable="@drawable/cbchk_blue"
    android:state_focused="true">
</item>
<item android:state_checked="false" 
    android:drawable="@drawable/cbunchk_blue"
    android:state_focused="false">
</item>
<item android:state_checked="false" 
    android:drawable="@drawable/cbunchk_blue"
    android:state_focused="true">
</item> 
```

为了将其仅设置为复选框而不是整个文本，您可以将其设置为：

```
<CheckBox
     android:layout_width="45dip"
     android:layout_height="wrap_content"
     android:layout_centerVertical="true"
     android:button="@drawable/checkbox_selector"
     android:text="@string/text_here" /> 
```

# javascript - 在 JavaScript 中，为什么我们使用 el = document.createElement() 来创建 Element 对象而不是 el = new Element();

> ID：16014368
> 
> 赞同：5
> 
> 时间：2013-04-15T11:47:15.103
> 
> 标签：javascript, dom

也就是说，为什么我们不遵循标准的 JavaScript 约定使用

```
var el = new Element("div"); 
```

但使用

```
var el = document.createElement("div"); 
```

去做吧？

（PS`document`是类的对象`Document`。 `Element`也是类，`Document`和`Element`类都是在浏览器环境中定义的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:00:44.010

所有`document.xxxx`方法都是 DOM 的一部分，而不是 Javascript 语言的一部分。它是一个单独的 API，属于浏览器，但允许浏览器中的 Javascript 访问。

如果要在浏览器中实现另一种语言，它将使用完全相同的 API 来访问 DOM。事实上，IE 中的 VBScript 正是这样做的——为了证明，[请参见此处的一些示例代码](http://www.herongyang.com/VBScript/IE-Browser-DOM-API-Document-Object.html)。（*但请注意，我**不**建议在浏览器中实际使用 VBScript！坚持使用 JS*）

并且 Javascript 可以在浏览器环境（例如 node.js）之外使用，在这种情况下，它可能没有或不需要 DOM 类结构。

DOM 也可以在浏览器之外实现，并且相同的 API 可用于使用它的任何语言。例如，PHP 有一个 DOMDocument 类，它实现了所有相同的 DOM 方法来从树中添加/删除/等元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:51:47.093

我认为 Javascript 作为一种语言需要与第三方控制结构无关。在这种情况下，DOM，向 DOM 添加新元素应该由其控制对象管理，而`document`不是通过语言`new Element("div")`。

在 node.js 中没有 DOM 元素的概念，因此内置的 DOM 控件在语言中是多余的。因此，在浏览器中抽象对 DOM 的控制和操作是有意义的，因此应该由抽象对象`document`而不是语言中的控制结构来管理。

# python - 在 Python 3 中找到唯一不可散列的不可排序类型的最佳方法是什么

> ID：16014370
> 
> 赞同：5
> 
> 时间：2013-04-15T11:47:17.833
> 
> 标签：python, python-3.x

所以在 Python 2 中你可以使用类似的东西

```
>>> items = [[1, 2], [3], [3], 4, 'a', 'b', 'a']
>>> from itertools import groupby
>>> [k for k, g in groupby(sorted(items))]
[4, [1, 2], [3], 'a', 'b'] 
```

效果很好，`O(N log N)`及时。然而 Python 3 惊呼`TypeError: unorderable types: int() < list()`. 那么在 Python 3 中最好的方法是什么？（我知道最好是一个主观术语，但根据 Python 确实应该有一种方法）

编辑：它不必使用排序，但我猜这将是最好的方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T11:51:01.357

在 2.x 中，两种无法比较的内置类型的值按类型排序。类型的顺序没有定义，除非它在解释器的一次运行期间是一致的。所以，`2 < [2]`可能是真或假，但它*始终*是真或假。

在 3.x 中，不可比较的内置类型的值是不可比较的——这意味着`TypeError`如果您尝试比较它们，它们会引发 a。所以，`2 < [2]`是一个错误。而且，至少从 3.3 开始，这些类型本身甚至没有可比性。但是，如果您只想重现 2.x 的行为，那么它们`id`的 s 绝对是可比的，并且在解释器运行期间是一致的。所以：

```
sorted(items, key=lambda x: (id(type(x)), x)) 
```

对于您的用例，这就是您所需要的。

* * *

但是，这不会与 2.x 完全相同，因为这意味着，例如，`1.5 < 2`可能是`False`（因为`float`> `int`）。如果您想复制确切的行为，您需要编写一个键函数，首先尝试比较值，然后`TypeError`回退到比较类型。

`cmp`这是旧式函数比新式函数更容易阅读的少数情况之一`key`，所以让我们编写其中一个，然后使用[`cmp_to_key`](http://docs.python.org/3.3/library/functools.html#functools.cmp_to_key)它：

```
def cmp2x(a, b):
    try:
        if a==b: return 0
        elif a<b: return -1
        elif b<a: return 1
    except TypeError:
        pass
    return cmp2x(id(type(a)), id(type(b)))
sorted(items, key=functools.cmp_to_key(cmp2x)) 
```

这仍然不能保证 2.x 给出的不同类型的两个值之间的顺序相同，但是由于 2.x 没有定义任何这样的顺序（只是它在一次运行中是一致的），所以它不可能。

但是，仍然存在一个真正的缺陷：如果您定义的类的对象不是完全排序的，那么它们最终将排序为相等，我不确定这是否与 2.x 在这种情况下会做的事情相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:05:18.513

让我们退后一步。

你想使一个集合唯一化。

如果这些值是可散列的，您将使用 O(N)`set`解决方案。但他们不是。如果你能想出某种散列函数，你可以等效地使用 a `dict`of `myhash(value): value`。如果您的用例确实是“只有可散列值和可散列值的平面`list`s”，您可以通过`try`ing to 来做到这一点`hash`，然后回退到`hash(tuple())`. 但总的来说，这是行不通的。

如果它们是完全排序的，您将使用 O(N log N)`sorted`解决方案（或等效的基于树的解决方案或类似的解决方案）。如果你能想出某种全排序函数，你可以将 a 传递`key`给`sorted`函数。我认为这将适用于您的用例（因此我的其他答案）。但是，如果不是，则没有 O(N log N) 解决方案将起作用。

如果两者都不是，您可以回退到 O(N**2) 线性搜索解决方案：

```
unique = []
for value in items:
    if value not in unique:
        unique.append(value) 
```

如果您找不到某种方法来为您的值定义全排序或散列函数，那么这是您能做的最好的事情。

# javascript - 不同页面上的多个 HighCharts

> ID：16014374
> 
> 赞同：0
> 
> 时间：2013-04-15T11:47:38.767
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.2, coffeescript, highcharts

我有一个咖啡脚本：

```
chart = undefined
$ ->
chart = new Highcharts.Chart(
  chart:
    renderTo: "sales "
    type: "line" 
```

……

```
chart1 = undefined
$ ->
  chart1 = new Highcharts.Chart(
    chart:
      renderTo: "graph"
      type: "line" 
```

......

```
<div id="sales" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
<div id="graph" style="min-width: 400px; height: 400px; margin: 0 auto"></div> 
```

如果两个 div 都在同一个 html 页面上，这可以正常工作，但如果我在不同页面上共享每个 div 则不行。我看不出原因..为什么

基本思想是在不同页面上显示不同的折线图。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:57:04.917

如果您在每个页面上都包含两个图表的代码，您应该会收到一个 javascript 错误 - Highcharts 错误 13 ( [http://www.highcharts.com/errors/13](http://www.highcharts.com/errors/13) )。

当您告诉 Highcharts 在不存在的 div 中构建图表时，会发生此错误。

此错误通常会阻止显示其他图表。

您只需要调用每个页面上包含元素的图表，而无需调用其他图表。

# angularjs - $scope 中的所有变量在 Angular.js 中未定义

> ID：16014376
> 
> 赞同：0
> 
> 时间：2013-04-15T11:47:58.923
> 
> 标签：angularjs, angularjs-scope

我有一个非常简单的网站，它使用[Angular.js](http://angularjs.org/)来显示其内容。我2天前开始学习它，按照官方教程完全没有问题。

这是我的 js 文件：

```
var Site = angular.module('Website', []);

Site.config(function ($routeProvider) {
  $routeProvider
    .when('/home',  {templateUrl: 'parts/home.html', controller: 'RouteController'})  
    .when('/who',   {templateUrl: 'parts/who.html', controller: 'RouteController'})
    .when('/what',  {templateUrl: 'parts/what.html', controller: 'RouteController'})
    .when('/where', {templateUrl: 'parts/where.html', controller: 'RouteController'})
    .otherwise({redirectTo: '/home'});
});

function AppController ($scope, $rootScope, $http) {
    // Set the slug for menu active class
    $scope.$on('routeLoaded', function (event, args) {
        console.log(args);
        $scope.slug = args.slug;
    });
}

function RouteController ($scope, $rootScope, $routeParams) {
    // Getting the slug from $routeParams
   var slug = $routeParams.slug; 
   var pages = {
      "home": {
        "title": "Samuele Mattiuzzo",
      },

      "who": {
        "title": "All you'll get, won't blog"
      },

      "what": {
       "title": "Shenanigans about this website"
      },

      "where": {
        "title": "Where can you find me on the net?"
      }
    };
    $scope.$emit('routeLoaded', {slug: slug});
    $scope.page = pages[slug];
} 
```

可以看到，很简单，只需要根据page slug返回一个页面标题即可。在模板中（我用 加载我的应用程序`<body ng-controller="AppController">`），在`<ng-view>`指令中我加载了其中一个部分模板（当前正在工作并显示静态内容），但我看不到`{{page.title}}`.

我已`Batarang`在浏览器上启用，并且正在使用 测试我的网站`web-server.js`，但我读到 Batarang 在变量和范围方面存在一些问题，并且总是返回未定义，所以这就是我添加该`console.log`语句的原因。不管我尝试打印什么（args、slug 或页面，显然在 js 的不同部分），它总是未定义的。

我在这里到底做错了什么？谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:21:57.357

您的所有控制器都没有与您的“站点”相关联。

我相信，如果您将免费功能更改为与站点相关联，这应该会让您走上正轨。此外，您可以稍微简化代码，因为您要查找的信息包含在 $location 而不是 $routeParams 中。

```
Site.controller("RouteController", function($scope, $location) {
var slug = $location.path(); 
var pages = {
  "/home": {
    "title": "Samuele Mattiuzzo",
  },

  "/who": {
    "title": "All you'll get, won't blog"
  },

  "/what": {
   "title": "Shenanigans about this website"
  },

  "/where": {
    "title": "Where can you find me on the net?"
  }
};
$scope.page = pages[slug];
}); 
```

此外，在您的 AppController 中，您可以监视 $routeChangeSuccess 而不是从 RouteController 通知位置更改：

```
Site.controller("AppController", function($rootScope) {
  $rootScope.$on("$routeChangeSuccess", function() { \\do something }
}); 
```

# php - Zend Form 验证码不起作用

> ID：16014380
> 
> 赞同：1
> 
> 时间：2013-04-15T11:48:12.680
> 
> 标签：php, zend-framework, zend-form, captcha

我正在使用以下代码在联系表单上创建验证码。该代码在我的主机上运行良好，但自从我将网站移至 1and1.co.uk 后，验证码已停止工作。

```
 <?php

    $captcha = $this->createElement('captcha', 'captcha',
                        array('required' => true,
                                'captcha' => array('captcha' => 'Image',
                                        'font' => 'captcha/fonts/arial.ttf',
                                        'fontSize' => '24',
                                        'wordLen' => 5,
                                        'height' => '50',
                                        'width' => '150',
                                        'imgDir' => 'captcha',
                                        'imgUrl' => Zend_Controller_Front::getInstance()->getBaseUrl().'/captcha',
                                        'dotNoiseLevel' => 50,
                                        'lineNoiseLevel' => 5)));
                $captcha->setLabel('* Are you a human? :'); 

   $this->getElement('captcha')->removeDecorator("viewhelper");

 ?> 
```

验证码使用的所有目录的路径和权限都是有效的。我不明白是什么导致了问题，因为表单中的所有其他字段都没有抛出错误或异常，也可以正常工作。

我要在这里提到的一件事是 1and1 是任何人都可以获得的最差托管，但我没有选择在其他地方托管它，因为我的客户希望在此托管上使用该网站....我认为这可能是 1and1 的问题出色地...

# android - 字符串数组上的 NullpointerException

> ID：16014381
> 
> 赞同：1
> 
> 时间：2013-04-15T11:48:23.190
> 
> 标签：android, nullpointerexception, arrays

我的 android 应用程序出现问题。
我使用字符串数组在 TextView 中显示项目，但每次我得到 NullpointerException，你能帮我看看我错在哪里吗？
这是代码：

```
public class test extends Activity {

        String [] myString ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.text);

        myString = getResources().getStringArray(R.array.myArray);

        String q = myString[1];

        TextView tv = (TextView) findViewById(R.id.text2);
        tv.setText(q);
    }
} 
```

和我的 xml 代码：

```
 <string-array name="myArray">
    <item > string 1</item>

    <item > string 2</item>

    <item> string 3</item>

    <item > string 4</item>
 </string-array> 
```

日志猫：

```
04-15 11:38:27.647: E/AndroidRuntime(285): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.app/com.example.app.test}: java.lang.NullPointerException
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.os.Looper.loop(Looper.java:123)
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-15 11:38:27.647: E/AndroidRuntime(285):  at java.lang.reflect.Method.invokeNative(Native Method)
04-15 11:38:27.647: E/AndroidRuntime(285):  at java.lang.reflect.Method.invoke(Method.java:521)
04-15 11:38:27.647: E/AndroidRuntime(285):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-15 11:38:27.647: E/AndroidRuntime(285):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-15 11:38:27.647: E/AndroidRuntime(285):  at dalvik.system.NativeStart.main(Native Method)
04-15 11:38:27.647: E/AndroidRuntime(285): Caused by: java.lang.NullPointerException
04-15 11:38:27.647: E/AndroidRuntime(285):  at com.example.app.test.onCreate(vovochka.java:29)
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-15 11:38:27.647: E/AndroidRuntime(285):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:59:26.013

在按钮单击时在 textview 中设置文本。

在数组.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string-array name="myArray">
<item > string 1</item>
<item > string 2</item>
<item> string 3</item>
<item > string 4</item>
</string-array>
</resources> 
```

在你的活动中

```
String[] myString;
TextView _tv;
Button b;
String q; 
```

在 onCreate()

```
setContentView(R.layout.activity_main);
myString = getResources().getStringArray(R.array.myArray);
q = myString[1];
_tv = (TextView) findViewById( R.id.tv ); 
b= (Button) findViewById(R.id.button1);
b.setOnClickListener(new OnClickListener()
{

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        _tv.setText(q);

    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:04:20.707

试试这个：

mainActivity.java

```
public class MainActivity extends Activity {
    String [] myString ;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myString = getResources().getStringArray(R.array.myArray);
        String q = myString[1];
        Log.e(q,"string");
        TextView tv = (TextView) findViewById(R.id.text1);
        tv.setText(q);
    }
} 
```

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="54dp"
        android:text="TextView" />

</RelativeLayout> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">sample</string>
    <string name="action_settings">Settings</string>
    <string name="hello_world">Hello world!</string>

    <string-array name="myArray">
        <item> string 1</item>
        <item> string 2</item>
        <item> string 3</item>
        <item> string 4</item>
    </string-array>

</resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:54:14.247

在 values/array.xml 中尝试这样的事情作为你的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<string-array name="myArray">
    <item>string 2</item>
    <item>string 3</item>
    <item>string 4</item>
</string-array>

</resources> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:04:06.297

首先，您检查该视图上是否存在文本视图，否则字符串 [] 上没有错误。

```
myString = getResources().getStringArray(R.array.myArray);

String q = myString[1];

TextView tv = (TextView) findViewById(R.id.text2);
if(tv==null)
{
   System.out.println("text view is null");
}
else
{
    tv.setText(q);
} 
```

您可以检查上面的代码..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T12:08:22.163

这可能对您有帮助`Array`

```
String q = myString[1]; 
```

改变喜欢

```
int pos = 1;

String q = myString[pos]; 
```

# android - 让安卓设备进入睡眠模式

> ID：16014387
> 
> 赞同：4
> 
> 时间：2013-04-15T11:48:29.360
> 
> 标签：android

我想在设备处于睡眠模式时测试我的应用程序。

屏幕关闭不是一个好兆头，因为设备可能因其他原因而打开。我想确保设备处于睡眠模式。是否有任何命令通过 ADB 或其他东西显式地将设备发送到睡眠模式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-13T18:15:05.173

根据这个其他线程（我刚刚检查过）： [如何通过 ADB 锁定 Android 屏幕？](https://stackoverflow.com/questions/13850192/how-to-lock-android-screen-via-adb)

```
adb shell input keyevent 26 
```

行得通！好东西。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-15T11:54:05.133

可能这会对你有所帮助。

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
     PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "My Tag");
     wl.acquire();
       ..screen will stay on during this section..
     wl.release(); 
```

[更多细节在这里](http://developer.android.com/reference/android/os/PowerManager.html)

# c# - 函数覆盖不调用

> ID：16014391
> 
> 赞同：1
> 
> 时间：2013-04-15T11:48:40.090
> 
> 标签：c#, virtual

我正在编写的程序有问题，我的虚拟功能似乎没有按应有的方式运行。

我有一个带有虚函数的类，以及一个覆盖它的派生类。当我调用该函数时，不会调用覆盖，但会调用基础。这是我之前做过一百万次的事情，但我不知道这种行为如何在简单的情况下发生。

举个例子：

```
public class ClassA
{
  public DoStuff()
  {
    MyVirtual()
  }

  protected virtual MyVirtual()
  {
    Console.WriteLine("Base MyVirtual Called");
  }
}

public class ClassB : ClassA
{
  protected override MyVirtual()
  {
    Console.WriteLine("Overridden MyVirtual Called");
  }
}

ClassA test = new ClassB;
test.DoStuff(); 
```

这个例子只是为了效果（我没有编译它来检查它，我只是演示）。我只想知道什么会破坏它，所以不会调用覆盖。我不能粘贴我的具体代码，但理论上就是这么简单。

*   继承层次结构只是两个类
*   没有密封的修饰符
*   该类是通过对继承类的简单调用 new 创建的
*   虚函数受到保护，并像这样从基类中的公共函数调用

这怎么可能打破或什么会干扰这种行为？该项目非常复杂，但这并不是我正在实施的新事物。在我的特定代码中，甚至还有另一个以完全相同的方式编写并以相同方式继承的虚函数，效果很好。我什至通过复制/粘贴该函数并重命名来创建新函数，因此语法应该相同（当它们不起作用时，我确实从头开始重建它们，但它们的行为没有区别）。

无论如何，我已经束手无策了，我不能花几天时间为此寻找一个晦涩的原因，所以任何关于从哪里开始寻找的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T12:03:14.827

如果您修复错误，它将成功编译并按您预期的方式运行。

**固定版本：**

```
public class ClassA
{
  public void DoStuff()
  {
    MyVirtual();
  }

  protected virtual void MyVirtual()
  {
    Console.WriteLine("Base MyVirtual Called");
  }
}

public class ClassB : ClassA
{
  protected override void MyVirtual()
  {
    Console.WriteLine("Overridden MyVirtual Called");
  }
}

ClassA test = new ClassB();
test.DoStuff(); 
```

**输出：**

```
Overridden MyVirtual Called 
```

这基本上意味着，与您的陈述相反，您的代码“理论上没有那么简单”，我的猜测是**您实际上并没有覆盖**B 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-13T15:52:21.820

如果您在继承链中有多个类，您可能需要检查这些类中具有相同名称的所有方法（如果存在）是否具有“覆盖”

# mysql - MySql 动态选择

> ID：16014393
> 
> 赞同：0
> 
> 时间：2013-04-15T11:48:54.570
> 
> 标签：mysql, stored-procedures

表名称：查找字段名称：查找 示例字段名称值：
Country.CountryCode

在表“Look”内进行选择时，我应该动态拆分字段名“LookUp”的值，并将第一个值作为表名，将第二个值作为字段名以进行动态选择。我有 split 功能，问题是如何使它在 case 语句中工作，或者也许有人有替代解决方案。目前我有这个显然不起作用

```
SELECT l.Id,
  case when l.lookup is not null then
      SELECT t.Id
      FROM (SPLIT_STR(l.LOOKUP,'.',1)) AS t 
      WHERE t.(SPLIT_STR(l.LOOKUP,'.',2)) = l.attValue
      LIMIT 1
  END AS attValue
FROM look as l 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:05:16.837

不要相信可以从字段中获取表名。确实表明您的数据库设计存在问题。

以前的类似问题：-

[在 LEFT JOIN 中使用变量作为表名的 MYSQL 查询](https://stackoverflow.com/questions/3646412/mysql-query-using-variable-as-table-name-in-left-join)

如果要加入的相关表/字段数量有限，并且您事先知道它们，那么可能会执行以下操作：-

```
SELECT l.Id, 
CASE 
    WHEN SPLIT_STR(l.LOOKUP,'.',1) = 'tableA' THEN tableA.Id 
    WHEN SPLIT_STR(l.LOOKUP,'.',1) = 'tableB' THEN tableB.Id 
    WHEN SPLIT_STR(l.LOOKUP,'.',1) = 'tableC' THEN tableC.Id 
    WHEN SPLIT_STR(l.LOOKUP,'.',1) = 'tableD' THEN tableD.Id 
    ELSE NULL
END AS SubId
FROM look as l 
LEFT OUTER JOIN tableA ON tableA.ColA = l.attValue
LEFT OUTER JOIN tableB ON tableA.ColB = l.attValue
LEFT OUTER JOIN tableC ON tableA.ColC = l.attValue
LEFT OUTER JOIN tableD ON tableA.ColD = l.attValue 
```

即，加入每个可能的子表并使用 CASE 从您想要的那个中返回字段。

但是，如果您被迫这样做，那么我建议您尽早重新设计数据库。

# mobile - 如何在 Appcelerator 移动应用中安装 NewRelic Mobile？

> ID：16014394
> 
> 赞同：1
> 
> 时间：2013-04-15T11:48:57.537
> 
> 标签：mobile, appcelerator, newrelic

我在我们基于 Web 的应用程序上使用 NewRelic，由于他们最近发布了一个移动版本，我们希望将它合并到我们现有的 Appcelerator 应用程序中。我们通常使用 Titanium Studious 3.0.2 进行开发。

我们正在使用 NewRelic iOS Agent 1.309，它本质上是用于 XCode 4.2+ 的 NewRelicAgent.framework 包。

如何在 Appcelerator 或 Titanium Studios 中设置它，以便它可以与我们现有的应用程序一起使用？

我们通过以下方式获得了框架：[https ://marketplace.appcelerator.com/apps/1140?1691569151#overview](https://marketplace.appcelerator.com/apps/1140?1691569151#overview)

我们通常这样做的方式是我们需要将框架复制到`User/Library/Application Support/titanium/ios/module-version/module-code ...`

并将其添加到应用程序：

```
<modules>
        <module version="0.1">nameOfYourModule</module>
    </modules>
</ti:app> 
```

我们如何以类似的方式将这个 iOS 框架添加到我们的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:57:54.017

他们实际上还没有发布它。他们或多或少地在市场上为它创造了一个占位符。

据我了解，该模块本身将于今年晚些时候发布。

# c# - 'WebSupergoo.ABCpdf7.Internal.NDoc' 的类型初始化程序引发异常

> ID：16014397
> 
> 赞同：2
> 
> 时间：2013-04-15T11:49:10.543
> 
> 标签：c#, asp.net, initialization, abcpdf

我安装了一个软件ABCPDF7，它将html文件转换为pdf并保存。

我面临一个错误：

```
 ERROR MESSAGE :The type initializer for 'WebSupergoo.ABCpdf7.Internal.NDoc' threw an exception. ERROR DETAILS : at WebSupergoo.ABCpdf7.Internal.NDoc.New() at WebSupergoo.ABCpdf7.Doc..ctor() 
```

在线的 ：

```
WebSupergoo.ABCpdf7.Doc oDoc = new WebSupergoo.ABCpdf7.Doc(); 
```

======

此错误出现在一个旧应用程序中。

因此，为了进行交叉检查，我确实创建了一个虚拟应用程序，并在同一个框中执行了代码，一切正常。

知道现有应用程序在哪里失败了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T01:43:14.950

ABCpdf7 需要两个可访问的 DLL：ABCPDF.DLL 和 ABCPDFCE7.DLL。两者必须是相同的版本（直到次要版本号），并且都必须与它们运行的​​机器的位数相匹配（32 位或 64 位）。

旧应用程序中的一个 DLL 可能不正确。

# php - PHP curl 使用 bash 或 file_get_contents 启动 - 慢

> ID：16014398
> 
> 赞同：1
> 
> 时间：2013-04-15T11:49:12.597
> 
> 标签：php, performance, curl

我有一个简单的 PHP curl 脚本，可以检查我的本地主机是否有更新等。如果我在浏览器中打开 .php，它运行速度很快 - 它会立即加载。但是，如果我想使用 file_get_contents 将文件集成到另一个 PHP 文件中，或者只是测试 - 通过 bash 运行它 - 大约需要 5 秒才能完成！文本响应本身几乎立即出现，但随后光标闪烁 3-5 秒，然后才完成请求。

我怎样才能使 curl 脚本不需要那么长时间来清理或者它正在做的任何事情呢？

```
$url='http://nodes:1041/?request=speed';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);

$store = curl_exec($ch);
$array = json_decode($store, true);

if(!$array['nodes']) {
    echo 'Nothing running';
} else {
    foreach($array['nodes'] as $key => $speed) {
        $upload += $speed[0];
        $dnload += $speed[1];
    }
}

echo 'Down: ' . $dnload . '/s\n';
echo 'Up: ' . $upload .'/s\n';

curl_close($ch); 
```

# function - 为什么只有第一个 div 响应函数？

> ID：16014401
> 
> 赞同：0
> 
> 时间：2013-04-15T11:49:17.680
> 
> 标签：function, html, var

我正在创建一个在线测验，其中将包含三个名为#useralt 的 div 中的三个不同的回答选项。所有 div 将具有相同的 id 但不同的内容。与#answer-div 内容相同的div 将触发“正确！” div，而其他会触发“Sorry”-div。

我只能让第一个#useralt-div 工作，接下来让我麻木......谁能帮我让他们三个都工作？

这是网站：[http ://www.juliawallin.se/moviecharades/play.html](http://www.juliawallin.se/moviecharades/play.html)

```
$(document).ready(function(){
$("#useralt").click(function(){
var correctAnswer = $('#answer').text().toLowerCase();
var givenAnswer = $('#useralt').text().toLowerCase();

var match = correctAnswer.match(new RegExp("^#moviecharades (.+)$"));
correctAnswer = match[1];

if (givenAnswer == correctAnswer)
{
     $("#correct").show("fast").delay("1000").hide("500"); //Slide Down Effect
       $('#output').html(function(i, val) { return val*1+1 });
       var el = document.createElement('div');
       el.innerHTML = $("#output")[0].innerHTML;
       document.getElementById('highscore').appendChild(el);
       var interval = 1000 * 60 * 1;
       APP.refresh(1, interval);

}
else
{
     $("#correct").hide("fast");    //Slide Up Effect
        $("#incorrect").show("500").delay("1000").hide("500");   
} 
```

}); });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:50:44.357

ID 必须是唯一的。所以这行不通。尝试类似：

```
<div class="useralt" id="useralt1">
<div class="useralt" id="useralt2">
<div class="useralt" id="useralt3"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:53:16.710

来自 w3 学校，[http://www.w3schools.com/tags/att_global_id.asp](http://www.w3schools.com/tags/att_global_id.asp)

> > 指定元素的唯一 ID。命名规则： 必须至少包含一个字符 不能包含任何空格字符 在 HTML 中，所有值都不区分大小写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:55:45.573

ID必须是唯一的，你需要使用class。将您的 id "useralt" 更改为 class 然后使用：

```
$(".useralt").click(function(){
var correctAnswer = $('#answer').text().toLowerCase();
var givenAnswer = $(this).text().toLowerCase();
....
... 
```

# listbox - 需要列表框帮助（简单脚本）

> ID：16014403
> 
> 赞同：1
> 
> 时间：2013-04-15T11:49:23.210
> 
> 标签：listbox, autohotkey, msgbox

我不是专家，但现在试着弄清楚大约 6 个小时，我有一个包含 2 个项目的选择窗口，无论我选择什么，我都选择 No1 项目。稍后，如果选择可以工作，我会用操作替换 nr1、nr2。请帮忙！我假设我在 MyListbox1 使用了错误的代码。

```
Gui, Add, ListBox, vMyListBox1 gMyListBox1 w100 r10
{
    GuiControl,, MyListBox1, Item1|Item2
}
Gui, Show
return

MyListBox1:
if A_GuiEvent <> DoubleClick
    return
GuiControlGet, MyListBox1, %Item1%
GuiControlGet, MyListBox1, %Item2%
IfMsgBox, %Item1%
MsgBox, MsgBox You entered 1
    return
IfMsgBox, %Item2%
MsgBox, MsgBox You entered 2
Return

GuiClose:
GuiEscape:
ExitApp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T06:19:05.047

像这样？

```
Gui, Add, ListBox, vMyListBox1 gMyListBox1 w100 r10, NotePad|x
Gui, Show
return

MyListBox1:
if A_GuiEvent <> DoubleClick ; If not double click stop
    Return
GuiControlGet, MyListBox1 ; Get current value of MyListBox1 variable
If (MyListBox1 = "NotePad") ; If MyListBox1 contains NotePad
    Run, NotePad.exe
Else If (MyListBox1 = "x") ; If MyListBox1 contains x
{
    Send, !{Esc} ; Need to switch back to previous application since GUI is in focus and you would send the data to your own GUI
    Sleep, 100 ; Wait a little while, so that the other application can be in focus
    Send, x ; You could have used Send, %MyListBox1%, since MyListBox1 contains x
}
Return

GuiClose:
GuiEscape:
ExitApp 
```

# html - 如何使用 html 5 按钮执行 jsf 操作

> ID：16014405
> 
> 赞同：4
> 
> 时间：2013-04-15T11:49:29.053
> 
> 标签：html, jsf, seam3

我们如何使用 html 5 按钮标签来执行 jsf 操作，例如。

去表演

```
<h:commandButton action="#{identity.login}" value="Login"/> 
```

html 5 中的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:02:48.900

Try to write a custom facelet component to wrapper a html5 element yourself.

Another project, [omnifaces](http://omnifaces.org) provides html5 compatibility for current jsf components.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T14:06:15.923

<input jsf:id="do-search-button" type="submit" jsf:action="#{searchController.doSearch}" class="search-button" title="#{msg.search_tooltip}" value=" #{msg.search_button}" />

# c - 在数组中使用指针时遇到问题

> ID：16014406
> 
> 赞同：0
> 
> 时间：2013-04-15T11:49:32.397
> 
> 标签：c, pointers, malloc

我是 C 新手，指针有问题。我一直无法在网上或通过我的同龄人找到答案，所以我在这里。

我被分配到：

*   创建一个包含 20 个随机整数的数组
*   打印出整数
*   按升序对数组进行排序
*   再次打印出来

当我用 GCC 编译程序并运行时，我遇到了分段错误。当我尝试在函数中设置`number[i]`or的值时，我已将其范围缩小到发生。任何帮助，将不胜感激。`number[k]``sort`

```
#include <stdio.h>

void sort(int* number, int n){
     /*Sort the given array number , of length n*/
    int temp, min;
    int i, k;
    for(i=0; i<n; i++){
        min = i;
        for(k=i+1; k<n; k++){
            if(number[k]<min){
                min = k;
            }
        }
        temp = number[i];
        number[i] = number[k];
        number[k] = temp;
    }   
}

int main(){
    /*Declare an integer n and assign it a value of 20.*/
    int n=20;

    /*Allocate memory for an array of n integers using malloc.*/
    int *array = malloc(n * sizeof(array));

    /*Fill this array with random numbers, using rand().*/
    srand(time(NULL));
    int i;
    for(i=0; i<n; i++){
        array[i] = rand()%1000+1;
    }

    /*Print the contents of the array.*/
    for(i=0; i<n; i++){
        printf("%d\n", array[i]);
    }

    /*Pass this array along with n to the sort() function of part a.*/
    sort(&array, 20);

    /*Print the contents of the array.*/
    printf("\n");
    for(i=0; i<n; i++){
        printf("%d\n", array[i]);
    }

    return 0;
} 
```

这是我得到的编译错误：

> Q3.c：在函数âmainâ中：
> 
> Q3.c:31：警告：函数“malloc”的隐式声明
> 
> Q3.c:31：警告：内置函数“malloc”的隐式声明不兼容
> 
> Q3.c:34：警告：函数âsrandâ的隐式声明
> 
> Q3.c:34：警告：函数“time”的隐式声明
> 
> Q3.c:37：警告：函数ârandâ的隐式声明
> 
> Q3.c:46：警告：从不兼容的指针类型传递“排序”的参数 1
> 
> Q3.c:9：注意：预期 âint *â 但参数是âint **â 类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:53:30.743

在你交换元素的地方，

```
temp = number[i];
number[i] = number[k];
number[k] = temp; 
```

`k == n`因为它是在结束之后

```
for(k=i+1; k<n; k++){ 
```

你的意思是在交换中使用`min`而不是。`k`

在`main`,

```
int *array = malloc(n * sizeof(array)); 
```

`n`为指向 的指针分配足够的空间`int`，而不是为 20分配空间`int`。那应该是

```
int *array = malloc(n * sizeof *array); 
```

关于编译器警告/错误，

```
#include <stdlib.h> 
```

并打电话

```
sort(array, 20); 
```

而不是通过`&array`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:54:20.793

`array`是一个`int*`，你的`sort`函数期待一个`int*`，但你传递`&array`了 int 指针的地址

# unity3d - Unity 3D 抗锯齿不起作用？

> ID：16014412
> 
> 赞同：0
> 
> 时间：2013-04-15T11:49:58.447
> 
> 标签：unity3d, antialiasing

抗锯齿似乎不适用于免费版本的 Unity。我创建了一个非常简单的项目，其中包含一个立方体、相机和灯光来演示这一点。

抗锯齿在设置中设置：

> 编辑->项目设置->质量

该项目是作为网络播放器构建的，生成的立方体非常参差不齐，没有抗锯齿。

这是项目质量设置图像的链接，以及在我在这里使用的 Web 浏览器中生成的立方体锯齿状线条，Chrome 和 IE 也是如此：

![在此处输入图像描述](https://i.stack.imgur.com/MyOvf.jpg)

这是 Unity 3D 网络应用程序本身的链接：

[http://moderncoder.byethost15.com/Unity3DCube/](http://moderncoder.byethost15.com/Unity3DCube/)

似乎免费版本中提供了抗锯齿功能，那么这个故事会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-16T13:53:07.080

质量设置 切换到脚本 Unity 允许您设置它将尝试渲染的图形质量级别。一般来说，质量是以帧速率为代价的，因此最好不要在移动设备或旧硬件上追求最高质量，因为这会对游戏玩法产生不利影响。质量设置检查器（菜单：编辑 > 项目设置 > 质量）用于在编辑器中为所选设备选择质量级别。它分为两个主要区域 - 在顶部，有以下矩阵：

Unity 允许您为给定的质量选项组合指定一个名称，以便于参考。矩阵的行让您可以选择每个质量级别适用于哪个不同平台。矩阵底部的默认行本身不是质量级别，而是设置用于每个平台的默认质量级别（列中的绿色复选框表示当前为该平台选择的级别）。Unity 预启用了六个质量级别，但您可以使用矩阵下方的按钮添加自己的级别。您可以使用垃圾桶图标（最右侧的列）删除不需要的质量级别。

您可以单击质量级别的名称来选择它进行编辑，这是在设置矩阵下方的面板中完成的：

您可以为质量级别选择的质量选项如下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T20:37:56.407

我有同样的问题。我在播放器设置中启用了“使用 DX11”，问题已解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-17T09:23:31.813

Unity 允许您为给定的质量选项组合指定一个名称，以便于参考。矩阵的行让您可以选择每个质量级别适用于哪个不同平台。矩阵底部的默认行本身不是质量级别，而是设置用于每个平台的默认质量级别（列中的绿色复选框表示当前为该平台选择的级别）。Unity 预启用了六个质量级别，但您可以使用矩阵下方的按钮添加自己的级别。您可以使用垃圾桶图标（最右侧的列）删除不需要的质量级别。

# android - Twitter4j 在取消登录后抛出“未找到身份验证挑战”

> ID：16014413
> 
> 赞同：0
> 
> 时间：2013-04-15T11:50:00.073
> 
> 标签：android, twitter4j

我正在使用 Twitter4J 发布一些推文。当我尝试发布推文时，我打开一个带有 authenticationURL 的 web 视图以登录：

```
twitterRequestToken = twitter.getOAuthRequestToken(Constants.TWITTER_CALLBACK);

Intent i = new Intent(FutbolTvActivity.this, TwitterWebLoginActivity.class);
i.putExtra("URL", twitterRequestToken.getAuthenticationURL());
startActivityForResult(i, 1); 
```

如果我完成了这个过程，我就会成功登录并可以发送推文。问题是，如果我单击登录网页上的取消按钮并尝试再次登录，我会收到下一个异常

```
twitter.getOAuthRequestToken(Constants.TWITTER_CALLBACK): No authentication challenges found 
```

如果我重用以前的身份验证 URL，webview 会显示一条错误消息，指出此 URL 太旧。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:26:39.880

最后，我找到了解决方案：

我第一次使用：

```
twitter = TwitterFactory.getSingleton() 
```

用于获取 Twitter 对象。通过这种方式，我第二次调用 getOAuthRequestToken() 时收到上述错误。

不，我正在使用：

```
twitter = new TwitterFactory(configuration.build()).getInstance(); 
```

所以每次我开始相关活动时都有不同的实例。通过这种方式，我从来没有在同一个实例上第二次调用 getOAuthRequestToken() 所以我没有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T13:11:33.797

听起来可能很奇怪，但请尝试自动设置您的时间/日期更新。根据我以前的经验，这就是问题所在。当我设置这个并且手机时间同步后，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:16:55.057

更改回调 URL 不是原因，重置密钥需要一些时间。检查您的密钥是否正确并且时间是否同步。几天前出现了一个问题，现在已修复。确保要求 URL 的任何字段（“网站”和“回调 URL”）都是完全限定的非 twitter.com 域。可能您的应用程序名称已被另一个应用程序使用。尝试使用不同的名称并尝试再次保存。

检查此链接[创建应用程序的临时问题](https://dev.twitter.com/issues/317 "创建应用程序的临时问题")

检查您的模拟器，可能是您的设备时间不同步。如果您的时间不同步，它将无法正常工作。

该库也已更新.. 检查此链接[Discussing API v1.1](https://dev.twitter.com/blog/current-status-api-v1.1)和[twitter 问题：无法检索访问令牌。状态：401。](https://code.google.com/p/socialauth-android/issues/detail?id=48)

祝你的项目好运！

# excel - 在 Excel 表中编辑外部数据

> ID：16014414
> 
> 赞同：1
> 
> 时间：2013-04-15T11:50:02.383
> 
> 标签：excel, plugins, excel-external-data

如何开发 Excel 插件来编辑 Excel 数据表中的外部数据？

Excel 可以连接到外部数据源，但据我所知，它们是单向只读数据表。我正在尝试做的是类似于 Excel 的 TFS 插件。我相信还有很多这样的。

对于那些不知道该插件的人：安装后，TFS Excel 插件将作为 Excel 中的一个新菜单出现。通过该菜单，您可以打开与 TFS 服务器的连接，并将您的（工作项）记录作为 Excel 表格导入 Excel。您可以添加新行或编辑表中的数据。某些单元格附有下拉列表，但列表中仅显示有效选项，并且每条记录都不同。您可以编辑表中的行，并且可以将这些记录批量推送回服务器。

我不知道这是否会有所不同，但我的数据源上的连接和更新操作将通过 Web 服务进行。

我想这需要一些认真的开发，但我在关于外部数据范围的网页之间迷失了（仅供阅读）。有人可以指导我进一步阅读该主题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:24:07.483

外部数据范围对您没有帮助，因此您可以停止阅读有关它们的网页。你是对的，它们是只读的。您可以将它们用于操作的读取部分，但您将围绕写入部分进行大量编码，您不妨控制一切。您只是不会从外部数据范围中获得足够的好处来保证在这种情况下完全使用它们。在我看来，当然。

如果您正在读取和写入数据库，您可能会使用 ActiveX 数据对象 (ADO)。您将读入一个记录集，监视它的变化，然后根据需要使用 UPDATE、DELETE 和 INSERT 语句写回数据库。

如果您将通过 API 与数据库交互，正如您所指出的，您可能会使用 Microsoft XML 库，特别是 MSXML2.XMLHTTP 对象。您可以使用 GET、POST、PUT、DELETE 以及您可以通过 HTTP 执行的任何其他操作。

如果您以前从未使用过 XMLHTTP，那么您将需要学习一些东西。但这并不是特别困难，并且有大量可用信息。在我看来，最困难的部分是跟踪对 Excel 工作表所做的更改。如果您允许用户使用 Excel 的本机编辑功能，则可能很难跟踪所做的更改。如果您遇到用户必须使用您的菜单项删除记录的完全锁定情况，那么您必须询问您为什么使用 Excel（仍然可能有充分的理由，但熟悉 Excel 的界面） '不要成为其中之一，因为你会用你的代替它）。

也许您已经为此制定了策略。但如果没有，请搜索“使用工作表更改事件检测已删除的行”以了解您将面临的一些挑战。如果您有前进的道路，请继续阅读 XMLHTTP，您应该已经准备就绪。

# java - 使用 javaagent 获取托管在 tomcat 中的应用程序的开始和结束时间

> ID：16014422
> 
> 赞同：0
> 
> 时间：2013-04-15T11:50:31.120
> 
> 标签：java, profiling, bytecode, instrumentation, javaagents

我编写了一个 javaagent 应用程序来获取 java 应用程序的执行时间，它工作正常。我尝试使用此应用程序来获取托管在 tomcat 服务器中的应用程序的执行时间。我没有得到所需的输出。我的 javaagent 代码来自“ [http://www.ibm.com/developerworks/java/library/j-jip/](http://www.ibm.com/developerworks/java/library/j-jip/) ”。我有两个疑问 1.如何过滤掉托管在tomcat和profile中的特定应用程序使用javaagent。2\. javaagent如何在tomcat中检测应用程序的开始和结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:53:51.263

为什么这需要一个 java 代理？使用[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)`contextInitialized()`并在和中记录时间`contextDestroyed()`。

来自 servlet 3.0 规范

> **javax.servlet.ServletContextListener**的实现在它们的 contextInitialized 方法中按照它们被声明的顺序被调用，并在它们的 contextDestroyed 方法中以相反的顺序被调用。

# c++ - C++ 11 替代 pthread_cond_timedwait

> ID：16014425
> 
> 赞同：6
> 
> 时间：2013-04-15T11:50:37.513
> 
> 标签：c++, multithreading, c++11, timeout, pthreads

我需要做一个线程等到

*   超时已过期，或
*   变量被另一个线程更改

经过一些研究，我发现 pthreads 得到了 **pthread_cond_timedwait**，如果我使用 pthreads，这在这种情况下可能很有用。

我正在使用 C++ 11 线程。在不完全传递给 pthreads 的情况下，是否有适合我的替代方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T11:52:59.407

是的，你想要[`std::condition_variable`](http://en.cppreference.com/w/cpp/thread/condition_variable)from ，它有一个需要一段时间`<condition_variable>`的成员函数。`wait_for`

> condition_variable 类是一个同步原语，可用于阻塞一个线程，或同时阻塞多个线程，直到：
> 
> *   从另一个线程收到通知
> *   超时到期

# c# - DataGridView中的复选框在检查后不会改变它的值

> ID：16014429
> 
> 赞同：8
> 
> 时间：2013-04-15T11:50:46.043
> 
> 标签：c#, winforms, datagridview, datagridviewcheckboxcell

我在 DataGridView 的一列中有复选框。

现在我遇到了一个问题：当我单击Checkbox**一次**时，它会发生变化，但只是视觉上的，在代码中它的值仍然设置为 false。但是，如果我单击复选框，然后单击 datagridview 上的任何其他位置（或在代码中手动更改其值 true），它会更改其值为 true。

如何在单击后强制我的复选框更改值？（令人讨厌的是检查复选框实际上没有检查它）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T12:08:51.453

当控件失去焦点时，将应用对基础数据源的更改。[`CellContentClick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellcontentclick.aspx)您可以在事件中明确处理它。

请仔细阅读链接的文档，因为它描述了类似的场景，并讨论了不同类型的网格单元。

也发现[了这个](http://codingeverything.blogspot.com/2013/01/firing-datagridview-cellvaluechanged.html)。完全相同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-01T22:43:50.393

假设您有一个名为**Form1的表单**

名称为**dgv的 DataGridView**

其中一个 CheckBoxColumn 与 ColumnIndex = **5**

```
public Form1()
{
    InitializeComponent();
    dgv.CellContentClick += dgv_CellContentClick;
} 
```

在该特定列的事件中提交数据网格的更改

```
private void dgv_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 5) dgv.EndEdit();
} 
```

# iphone - 如何在不打开摄像机的情况下录制视频？

> ID：16014431
> 
> 赞同：2
> 
> 时间：2013-04-15T11:50:50.967
> 
> 标签：iphone, ios, video

如何在不打开任何相机的情况下录制视频？我的要求是当一个人有问题时，他的视频被录制，但不是通过打开相机，它应该在后台工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:58:13.827

将[AVFoundation 框架](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html)用于`video capturing`.

不要添加`AVCaptureVideoPreviewLayer`以查看`recorded`当前的内容`UIView`

# ios - 闰年本地通知

> ID：16014434
> 
> 赞同：2
> 
> 时间：2013-04-15T11:50:55.750
> 
> 标签：ios, objective-c

如果我要设置一个`NSLocalNotification`2016 年 2 月 29 日（闰年）的触发日期并每年重复一次通知，它只会在每个闰年触发还是在非闰年（3 月 1 日）触发?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:54:30.100

在设备上对其进行测试后，我发现它每年都会触发，但会在非闰年的 2 月 28 日触发。

有趣的是，闰年（除了最初的闰年，在这种情况下是 2016 年）它会在 28 日和 29 日触发。

# facebook - 将 URL 哈希添加到 Facebook 和 Twitter 共享卡的元数据中

> ID：16014439
> 
> 赞同：1
> 
> 时间：2013-04-15T11:51:19.877
> 
> 标签：facebook, http, twitter, web

我希望使用通过 URL (www.example.com/index.html#myhash) 提供的哈希，并在 Facebook 和 Twitter 可以检索的页面元数据中使用它来制作这样的共享卡：[https ://dev.twitter.com/docs/cards/types/photo-card](https://dev.twitter.com/docs/cards/types/photo-card)。这可能吗？还是只使用 PHP $_GET[] 变量会更好？我试图保持页面静态，因此散列是理想的，但我很确定我不能用 JS 动态创建元标记，因为 Twitter 和 Facebook 不会执行该代码。感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:04:01.583

正确，在客户端创建元元素是行不通的，因为这些爬虫不执行任何客户端脚本代码，他们只是查看获得的 HTML 代码。

并且 URL 的散列部分仅对客户端重要，因此在发出 HTTP 请求时它甚至不会传递给服务器——因此基于散列生成服务器端的元元素也是不可能的。

最后，更改 URL 的哈希部分*并不会*使其成为不同的 URL——因此这与 Facebook 的 Open Graph 理念不兼容，其中等式是*一个 URL == 一个 OG 对象*。

# azure - 从 Azure 辅助角色访问文件共享

> ID：16014441
> 
> 赞同：1
> 
> 时间：2013-04-15T11:51:21.143
> 
> 标签：azure, azure-worker-roles, file-sharing

我们希望在 Windows Azure 中迁移我们的 FTP 服务器。我们创建了干净的虚拟机映像并在那里安装了 FTP 服务器。现在，为了能够直接从 Windows Azure 数据中心处理驻留在 FTP 目录中的文件，我们创建了文件共享和端点（端口 445 TCP 和 UDP）。如果我们试图从 Worker Role 访问 FTP 服务器的文件共享，我们通常会得到*“访问路径 '...' 被拒绝。”*. 我们可以从 Worker Role 通过远程桌面访问 FTP 服务器的文件共享，这意味着防火墙和 FTP 配置是正确的。辅助角色能否访问 Windows Azure 数据中心中的文件共享？

编码：

```
 try
        {
            const string networkShare = @"...";
            Directory.GetFiles(networkShare).ToList().ForEach(file => Trace.TraceInformation(file));

            Thread.Sleep(10000);
            Trace.WriteLine("Working", "Information");
        }
        catch (Exception ex)
        {
            Trace.TraceError(ex.ToString());
        } 
```

例外：

```
Exception thrown on running: System.UnauthorizedAccessException: Access to the path '...' is denied.

Server stack trace: 
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileSystemEnumerableIterator`1.CommonInit()
   at System.IO.FileSystemEnumerableIterator`1..ctor(String path, String originalUserPath, String searchPattern, SearchOption searchOption, SearchResultHandler`1 resultHandler, Boolean checkHost)
   at System.IO.Directory.InternalGetFileDirectoryNames(String path, String userPathOriginal, String searchPattern, Boolean includeFiles, Boolean includeDirs, SearchOption searchOption, Boolean checkHost)
   at System.IO.Directory.InternalGetFiles(String path, String searchPattern, SearchOption searchOption)
   at KALCIK.NET.Plugin.ReadFromShare.ReadFromSharePlugin.Manipulate(String valueToManipulate)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at KALCIK.NET.Plugin.Contracts.TextManipulationPluginBase.Manipulate(String valueToManipulate)
   at KALCIK.NET.CloudServices.WorkerRole.BusinessLayers.WorkOrderProcessing.ProcessWorkOrder(Tuple`2 workOrder) in c:\Development\Samples\CloudServicesPlugInSample\CloudServices.WorkerRole\BusinessLayers\WorkOrderProcessing.cs:line 56
   at KALCIK.NET.CloudServices.WorkerRole.WorkOrderProcessorService.Run() in c:\Development\Samples\CloudServicesPlugInSample\CloudServices.WorkerRole\WorkOrderProcessorService.cs:line 67; TraceSource 'WaWorkerHost.exe' event 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:26:47.427

是的，问题似乎是用户，主机进程正在运行。要解决此问题，您可以创建具有管理员权限的新用户（例如在启动任务的帮助下，在角色启动时）并模拟执行的代码。[您可以在此处](http://kalcik.net/2013/08/02/monitoring-ftp-server-file-shares-on-windows-azure/)查看示例实现。

```
public class WorkerRole : RoleEntryPoint
{

    public sealed class SafeTokenHandle : SafeHandleZeroOrMinusOneIsInvalid
    {
        private SafeTokenHandle() : base(true) { }

        [DllImport("kernel32.dll")]
        [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
        [SuppressUnmanagedCodeSecurity]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool CloseHandle(IntPtr handle);

        protected override bool ReleaseHandle()
        {
            return CloseHandle(handle);
        }
    }

    [DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    public static extern bool LogonUser(String lpszUsername, String lpszDomain, String lpszPassword, int dwLogonType, int dwLogonProvider, out SafeTokenHandle phToken);

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    public extern static bool CloseHandle(IntPtr handle);

    public override void Run()
    {

        // This is a sample worker implementation. Replace with your logic.
        Trace.WriteLine("TestWorkerRole entry point called", "Information");

        while (true)
        {
            try
            {

                SafeTokenHandle safeTokenHandle;
                var returnValue = LogonUser("username", Environment.MachineName, "password", 2, 0, out safeTokenHandle);

                if (returnValue)
                {
                    using (safeTokenHandle)
                    {
                        using (var impersonatedUser = WindowsIdentity.Impersonate(safeTokenHandle.DangerousGetHandle()))
                        {
                            const string networkSharePath = @"UNCPath";
                            Directory.GetFiles(networkSharePath).ToList().ForEach(file => Trace.TraceInformation(file));
                        }
                    }

                }

                Thread.Sleep(10000);
                Trace.WriteLine("Working", "Information");
            }
            catch (Exception ex)
            {
                Trace.TraceError(ex.ToString());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:33:28.460

我认为这是一个安全问题：用户（工作角色在其下运行）无法在网络共享上进行身份验证。在 Directory.GetFiles 之前尝试“网络使用”

C# 中的“net use”：从 C#[访问远程目录](https://stackoverflow.com/questions/5433570/access-a-remote-directory-from-c-sharp)

# php - 不可见的 div 是否会在页面上加载任何内容

> ID：16014452
> 
> 赞同：-4
> 
> 时间：2013-04-15T11:52:04.080
> 
> 标签：php, html

实际上，我的问题有点不同，所以我在谷歌上找不到我的问题的任何答案。因此，我必须来这里得到我的解决方案的答案。我想知道，如果我的网页上有大约 50 个 Div，它们是不可见的，并且它们中有一些文本数据，它们会在网页上有任何负载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:54:38.437

是的，它们包含在页面的 html 中，因此会使您的页面更重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:55:12.793

是的，它们将被加载。加载您的 html 页面，然后“查看源代码”.. 在 html 代码中，您将看到隐藏的 div。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:55:27.207

服务器必须将 HTML 数据发送给用户。因此它会对服务器产生一定的负载。另一方面，只是 DIV 没有任何复杂的代码，所以对于大多数网络服务器来说这不会是一个问题。

# java - 线程正在执行，在给出“interrupt()”之后

> ID：16014453
> 
> 赞同：2
> 
> 时间：2013-04-15T11:52:05.783
> 
> 标签：java, multithreading

```
class Thread3_1 extends Thread {
  public static int count = 0;
  String tname1;
  public Thread3_1(String threadname) {
    tname1 = threadname;
  }
  public void run() {
    for (int i = 1; i <= 10; i++) {
      System.out.println(tname1 + " : " + i);
      count++;
      if (count == 2) {
        try {
          sleep(1000);
          count = 0;
        } catch (InterruptedException e) {
          e.printStackTrace();
        }
      }
    }
    if (isInterrupted()) {
      System.out.println("Stop Thread");
      return;
    }
  }
}

class Thread3_2 extends Thread {
  String tname2;
  public Thread3_2(String threadname) {
    tname2 = threadname;
  }
  @Override
  public void run() {
    for (int i = 1; i <= 10; i++) {
      System.out.println(tname2 + " : " + i);
      if (i == 5) {
        Thread.currentThread().interrupt();
        System.out.println("Going to interrupt Thread1");
      }
    }
  }
} 
```

给定后线程正在执行`interrupt()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:58:52.090

中断一个线程只是`true`为这个线程设置一个中断标志。

线程本身有责任定期检查此标志的值并在`run()`它为真时尽快停止执行（通过从方法返回）。

如果在线程休眠时设置了中断标志（或者当它在诸如 、 等的阻塞调用`wait()`中被阻塞时`await()`），阻塞方法会抛出一个 InterruptedException 。发现此异常并尽快停止执行也是线程的责任。

您的第一个线程定期检查标志并在它为真时退出，但在捕获 InterruptedException 时无法这样做。

您的第二个线程会自行中断，但这样做时不会从其`run()`方法返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:58:24.810

您中断 Thread3_2 而不是 Thread3_1。

在您正在调用的 Thread3_2 的运行方法中

```
Thread.currentThread().interrupt(); 
```

这将向当前正在执行的线程发送一个中断，这是 Thread3_2 的一个实例。如果要中断 Thread3_1，则需要对该线程的引用。

例如：

```
class Thread3_2 extends Thread{

    Thread threadToInterrupt;

    public Thread3_2(Thread threadToInterrupt) {
        this.threadToInterrupt = threadToInterrupt;
    }

    @Override
    public void run() {
        for (int i = 1; i <= 10; i++) {
            System.out.println(tname2+ " : " +i);
            if(i == 5){
                threadToInterrupt.interrupt();
                System.out.println("Going to interrupt Thread1");
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:58:55.827

来自 Java 教程：

> 很多抛出InterruptedException的方法，比如sleep，被设计成取消它们当前的操作，并在收到中断时立即返回。
> 
> 如果一个线程很长时间没有调用抛出 InterruptedException 的方法怎么办？然后它必须定期调用 Thread.interrupted，如果收到中断则返回 true。*

*换句话说：其他不抛出 InterruptedException 的方法必须定期调用 Thread.interrupted，如果收到中断则返回 true。

在这里解释：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:03:32.217

您要中断的线程必须设计为通过从 run() 方法优雅退出来处理中断请求。这意味着确保 InterruptedExceptions 导致代码跳出循环。这也意味着在循环内定期检查中断标志。还有其他更难处理的场景，例如不可中断的 IO 操作。

目标线程将自己重新标记为中断也是一个很好的做法，这样调用堆栈中的调用者也可以得到中断的指示（在 catch 语句中使用 Thread.currentThread().interrupt()）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T12:14:46.183

如上所述，您需要中断 Thread3_1 而不是 Thread3_2。应用此修复程序后，您仍然会遇到一个问题：

```
try {
              sleep(1000); 
              count = 0;
            } catch (InterruptedException e) {
              e.printStackTrace();
            } 
```

因此，如果在睡眠中断发生时，中断标志将被清除并且 isInterrupted() 方法将返回 false，因此将不满足以下条件：

```
if (isInterrupted()) {
          System.out.println("Stop Thread");
          return;
        } 
```

所以你也需要在 catch 块中处理这个问题，即如果在 catch 中返回（被中断）

# .htaccess - 重写规则以包括对现有目录的重定向

> ID：16014455
> 
> 赞同：0
> 
> 时间：2013-04-15T11:52:07.950
> 
> 标签：.htaccess, mod-rewrite

我有 .htaccess 脚本：

```
DirectoryIndex index.php
Options -Indexes

Options +FollowSymlinks

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/?$ index.php [L,QSA] 
```

这会将所有请求重定向到`index.php`脚本中，但存在的现有文件或目录除外。但是，我有`/lib`包含 webapp 库的目录，我想扩展重写规则以将请求重定向到`/lib[/(.*)]`（目录及其下的所有内容）`index.php`，但到目前为止，我一直遇到问题。

我需要在`.htaccess`文件中添加哪些行来添加对该规则的支持？

ps

我正在为此执行此操作的 webapp 目前存在于测试服务器上，并且都存储在更高的基础下，因此目前的 lib URL 是`http://localhost:8080/c2/lib`. 我没有定义其中的`/c2`部分，`.htaccess`因为我试图让它保持不同，只有 webapp 进行处理。

我知道我可以将`/lib`目录移动到更高的目录，但我正在尝试使用`.htaccess`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:30:00.663

您可以添加一个额外的规则，它重写所有请求`/lib/*`

```
RewriteRule ^lib/.*$ index.php [L] 
```

# c++ - 使用 MS 绕道防止 Winsock 注入

> ID：16014458
> 
> 赞同：0
> 
> 时间：2013-04-15T11:52:15.020
> 
> 标签：c++, dll, detours

我在某处阅读了一段代码，该代码承诺它可以保护应用程序 Winsock 功能免受数据包编辑器的影响。

我运行一个游戏服务器，这对我来说真是个好消息。但这真的可能吗？就像在我的游戏可执行文件中添加一个使用 detours 的 DLL 来保护我的 winsock 函数不被劫持？

就像他们将数据包编辑器连接到我的应用程序一样，他们不会在数据包记录中看到任何内容？

或者将我的应用程序的过程从这些工具中隐藏起来是一种更好的方法？

谢谢你。请讨论。

我找到的代码：http: [//pastebin.com/XtfSHxBL](http://pastebin.com/XtfSHxBL)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:55:31.620

如果您将此类代码添加到您的游戏中，我会拒绝它；）

克服它。
客户端不安全，永远不能被信任。

此外，我可以在两者之间切换一个 linux 路由器，并在那里捕获数据包..

如果您不想捕获您的 winsock 数据，则需要使用良好的非对称加密算法（如 PGP）对其进行加密，然后再将数据发送到 winsock。

如果这是真的，一个更好的主意是使用 isdebuggerpresent 来关闭程序。但是您需要加密可执行文件，因为否则我只需使用 IDA 将其反汇编，然后将 isdebuggerpresent 修补到 NOP，或者在运行时通过 createremotethread 将其修补为 0xe9 并返回 false，顺便说一下，文件校验和检查无法检测到.

但是，如果我劫持 isdebuggerpresent WinAPI 函数并 nop 它，这样你仍然很容易受到攻击。这也可以通过 MS 绕道来实现；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:00:38.823

任何类似的事情都是微不足道的。专注于保护实际协议，使用加密，在服务器端验证一切。

我会在评论中发布这个，但显然你需要声誉才能做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:59:33.990

在某种程度上，这是可能的。然而，没有什么能阻止顽固的黑客。

我记得的一种可能性（因为我调查了对这个“安全”函数导入的攻击）被 .NET 运行时使用，以保护它免受劫持注册表读取/打开函数（出于与 CAS 相关的安全原因）。
基本上，他们决定硬连线函数地址，为许多 Windows 变体（几个服务包）指定直接地址。显然，这是只有你是 MS 才能熟练做到的事情（你打了 advapi32，改变了 Reg* 函数的地址？你也提交了一个 mscoree 的补丁）。

它使捕获和拦截这些功能变得困难（至少，比仅使用 IAT 更困难），但正如我所说，我发现它是如何完成检查攻击的......

使用 Detour，您仍然使用 IAT，但您可以检查是否有人修改它，并“恢复”（重写）原始地址。或者至少检查一下。这就是 Punkbuster 过去所做的，IIRC。请注意，这证明没有什么比得上安全客户端（人们了解 PB 在做什么 -> 他们规避了它）。

# ipad - ipad 3 vs 4 中的响应式网站

> ID：16014461
> 
> 赞同：1
> 
> 时间：2013-04-15T11:52:22.663
> 
> 标签：ipad, responsive-design, media-queries

据我了解，ipad 2 和 ipad 3 的屏幕分辨率为 1024，而 ipad 4 则为两倍。

然而，iPad 仍会放大您的网站，理想情况下，您希望您的网站在平板电脑上查看时以某种方式显示和运行。

您如何使用媒体查询有效地定位这两种设备？

@media 仅屏幕和 (max-width:1024px)

但是，这不会涵盖 ipad 4 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:59:41.833

是的，他们有不同的分辨率。我们必须针对特定的媒体查询来处理这个问题。我建议你阅读[这篇](http://stephen.io/mediaqueries/) [文章](http://stephen.io/mediaqueries/)。

# spring - Servlet 中的 Spring 自动装配问题

> ID：16014466
> 
> 赞同：1
> 
> 时间：2013-04-15T11:52:31.510
> 
> 标签：spring, autowired, embedded-jetty

我在使用自动装配时遇到了一些问题

首先我创建一个嵌入式服务器

主.java

```
Server server = new Server(8080);
    CXFNonSpringServlet cxf = new CXFNonSpringJaxrsServlet();
    ServletHolder servlet = new ServletHolder(cxf); 
    servlet.setInitParameter("javax.ws.rs.Application", "com.asd.dispatcher.rest.testApplication"); 
    servlet.setName("services"); 
    servlet.setForcedPath("services");     

    ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
    context.setContextPath("/hello");
    server.setHandler(context);
    context.addServlet(servlet, "/*");
    server.start(); 
```

测试应用程序.java

```
public class testApplication extends Application  {
@Override
public Set<Class<?>> getClasses() {
    Set<Class<?>> classes = new HashSet<Class<?>>();
    classes.add(testServlet.class);
    return classes;
}
} 
```

testServlet.java

```
@Path("/people")
@Component
@Scope("prototype")
public class testServlet {    

@Autowired
private  StatsService statsService;

@Produces({ "application/json" })
@GET
public String getPeople(@QueryParam("page") @DefaultValue("1") final int page) {
    System.out.println("======= getPeople");

    //statsService.printStats();

    return "Hello World";
}
} 
```

现在我的问题是我的 statsService 没有在 testServlet.java 中自动装配，但我可以将它自动装配到另一个用 @Service 注释的类中，

这是因为我使用了 CXFNonSpringServlet 吗？还是因为我尝试自动接线的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:01:10.007

**好的，我开始工作了**

好的，所以我修复了它（我会将其发布为答案，但无法回答我自己的问题：/）

把答案放在这里帮助其他有同样问题的人

看了下面的 [Autowireing in servlet](https://stackoverflow.com/questions/11843690/autowiring-in-servlet)

我得出的结论是，获取 applicationContext 然后 bean 的 Post Construct 方法可以工作

例如：我的代码是这样的

```
@Path("/people")
@Component
@Scope("prototype")
public class testServlet {    

private  StatsService statsService;

@PostConstruct
public void initStats() {
    System.out.println("============================= Init");        
    ApplicationContext context = new GenericXmlApplicationContext("applicationContext.xml");  
    statsService = context.getBean("statsService", StatsService.class);
  }

@Produces({ "application/json" })
@GET
public String getPeople(@QueryParam("page") @DefaultValue("1") final int page) {
    System.out.println("======= getPeople");

    statsService.printStats();

    return "Hello World";
}
} 
```

虽然这不是自动装配，但它确实有效，但如果有人知道如何通过自动装配来做到这一点，我很想知道，因为它会比我找到的解决方案更清洁。

*在旁注中，我发现了一个关于我的问题的“解决方案”的新问题，因为我的 statsService 还自动连接了其他 bean，而且似乎虽然自动连接初始化了这些 bean，但它们在另一个中的状态发生了任何变化类没有反映在 statsService 实际上这些 bean 的状态保持不变（尽管这可能是我对 spring 还是新手所以我不确定的可疑行为）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:01:56.337

我不知道 CXFNonSpringServelt 是什么，但我的问题是：您是否在应用程序的 context-config.xml 文件中添加了上面的行？

```
<beans
xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.2.xsd">
...
...
<context:component-scan base-package="package of the classes with annotations" /> 
```

在您的服务器类中，您应该添加注释`@Service`

```
@Service("myService")
public class MyService ... 
```

你可以`@Authowire`这样使用：

```
public class Client{
    @Autowire
    MyService myservice;
    ... 
```

# c++ - 了解具有不同签名的继承和函数

> ID：16014475
> 
> 赞同：1
> 
> 时间：2013-04-15T11:53:05.523
> 
> 标签：c++, inheritance, polymorphism

假设我有一个基类和一个派生类。

```
class Base {
 public:
  void A(int x, int y) {do something}
  void B() {
    A(x,y);
    do something;
  }
};

class Derived : public Base {
  void A() {do something else};
};

Derived derived1;
derived1.B(); 
```

函数的签名不同，B会调用派生A还是基A？如果它会调用派生的B，我猜它会忽略参数？

如果派生的A需要不同的参数而不是没有参数，我是否必须将B的整个代码复制到派生类中才能改变B调用A的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:07:00.563

函数的代码总是在定义它的类的上下文中计算。这包括确定每个表达式调用哪个函数。所以在里面`Base::B()`，这个调用`A(x, y)`被编译器翻译成对`Base::A`. 即使您稍后调用`derived1.B()`，它也会调用`derived1 . Base::A`（伪语法）。

唯一改变这一点的是虚函数。但是，即使使用它们，规则也是相似的。重载解析（基本上是将函数名称和签名与调用表达式匹配的过程）是在定义包含函数的类的上下文中完成的。如果该决议导致选择了一个虚函数，则将在运行时调用虚调用机制来调用*该函数的适当覆盖。*

让我们考虑这个例子：

```
struct Base {
  virtual void foo(int);
  virtual void bar() { foo(0.0); }
};

struct Derived : Base {
  virtual void foo(int);
  virtual void foo(double);
};

Derived d;
d.bar(); 
```

即使在这个例子中，调用`d.bar()`也会调用`Derived::foo(int)`. 这是因为调用签名匹配是在 的上下文中完成的`Base`，它只看到并使用从到`foo(int)`的隐式转换`double``int.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:01:32.640

两个原因迫使不`Base::B`打电话`Base::A``Derived::A`

*   `A`它以特定的重载调用：`A(int, int)`
*   `Base::A`并且`Base::B`不是虚拟的，所以它调用`Base::A`. 代码不是多态的。

展示虚拟方法如何工作的最简单示例是：

```
class Base {
public:
   virtual void A() {
      // do job #1
   }
};

class Derived : public Base {
public:
   virtual void A() {
      // do job #2
   }
};

// ...

Derived derived1;

Base *base = &derived1;

base->A(); // <---- It calls `Derived::A()` and does job #2 
```

但是，如果您使用不同`A`的`B`参数写入（重载它），则必须使用实际参数显式调用它。

# c# - 编辑 ABPeoplePickerNavigationController 导航栏按钮

> ID：16014477
> 
> 赞同：3
> 
> 时间：2013-04-15T11:53:18.340
> 
> 标签：c#, xamarin.ios

```
 ABPeoplePickerNavigationController _contactController;

    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        window = new UIWindow (UIScreen.MainScreen.Bounds);

        _contactController = new ABPeoplePickerNavigationController();

        //viewController = new HomeScreen ();
        //navController = new UINavigationController (_contactController);
        window.RootViewController = _contactController;
        window.MakeKeyAndVisible ();

        return true;
    } 
```

所以现在当应用程序打开时，会显示联系人列表。我想在右侧导航栏按钮上添加不同的功能而不是取消？我该怎么做呢？如何访问此按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:12:04.990

`ABPeoplePickerNavigationController`如果没有在其视图中找到正确的子视图，则无法修改控件。此外，经过此类修改的应用程序可能会被 Apple 拒绝。

尝试制作自己的`UIViewController`，其功能将接近`iOS`s `ABPeoplePickerNavigationController`：

*   [`AddressBook`](https://stackoverflow.com/a/5674914/548395)通过课堂阅读联系人；
*   将联系人数据传递到`UITableView`部分和索引中。

# javascript - 按钮点击问题

> ID：16014478
> 
> 赞同：1
> 
> 时间：2013-04-15T11:53:18.947
> 
> 标签：javascript, jquery, css, click

我正在使用单击时会向下移动的按钮。

```
.button:active {
    position: relative;
    top: 2px;
} 
```

我遇到的问题是用户偶尔单击按钮顶部的右侧，或者在按钮边框下方或按钮边框上。当单击向下时，按钮向下移动，光标不再位于按钮上方。因此，实际上并未注册点击。我在小提琴中复制了这个：

[http://jsfiddle.net/DJNEb/3/](http://jsfiddle.net/DJNEb/3/)

如果在按钮的上边缘单击右键，按钮会移动，但不会触发 click 事件处理程序。我在 IE、Firefox、Chrome 中看到了这种行为。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:48:25.067

基本上`click()`事件受到`:active`状态移动对象的干扰。

[在这里阅读更多。](https://stackoverflow.com/a/11468967/1654265)

顺便说一句，您的解决方案与那个答案有点不同；

从@cdanisor提出的解决方案开始，您需要使用`mouseup()`（为了保留按钮的移动效果并且仅在释放鼠标时触发事件）

演示：http: [//jsfiddle.net/kEQjU/](http://jsfiddle.net/kEQjU/)

```
<div id="alertMe">
    <div class="button red"> test</div>
</div>

$("#alertMe").mouseup(function() {
    alert("Handler for .click() called.");
}); 
```

* * *

**编辑**

显然，您可以通过使用 a`button`而不是 a来保持键盘兼容性`div`，并将相同的函数绑定到`keyup`事件：

演示：http: [//jsfiddle.net/kEQjU/1/](http://jsfiddle.net/kEQjU/1/)

```
<div id="alertMe">
    <input type="button" class="button red" value="test" /> 
</div>

$("#alertMe").mouseup(function() {
alert("Handler for .click() called.");
});
$("#alertMe").keyup(function() {
alert("Handler for .click() called.");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:11:48.620

我会将按钮放在 div 中并在 div 上添加事件，这样您就可以保持效果而不会过度复杂您的代码。

另一种方法是处理 mousedown 和 mouseup 事件并检查光标位置是否已更改

# python - 无法访问 django 模板中的字典列表

> ID：16014479
> 
> 赞同：-2
> 
> 时间：2013-04-15T11:53:19.090
> 
> 标签：python, django, list, dictionary

我认为我有一个列表，例如

```
getit = [{u'company': u'',
  u'customerId': u'qwert',
  u'dateCreated': u'2012-10-28 08:52:43.0',
  u'dateModified': u'2012-12-17 22:27:58.0',
  u'email1': u'',
  u'email2': u'',
  u'extensionId': u'306',
  u'message': u'',
  u'name': u'',
  u'phone1': u'0284533',
  u'phone2': u'',
  u'productCode': u'12400',
  u'prospectId': u'795',
  u'status': u'0',
  u'subscriberEmail': u'naveen@hi.com',
  u'subscriberId': u'ro@gmail.com',
  u'title': u'',
  u'trackId': u'12345',
  u'vendorEmail': u'va@tal.com',
  u'vendorNumber': u'0284533'}]

context['hi'] = getit 
```

我正在尝试在我的模板中迭代这些数据，例如 .

```
{% for x in hi %}
   {{x.status}}
   {{x.productCode}}
{% endfor %} 
```

不幸的是无法在我的模板中访问

请帮我看看我在这里做错了什么

**更新**

这是我的看法

```
def  subscriberreport(request):
    context = {}

    subscriberId = request.session['subscriberId']
    REST_URL = 'http://10.10.10.76:8100/UCSRestService/prospectrequest/' + subscriberId + '/subscriber'
    context = {}
    geta = Agent()
    getr = geta.GETT('caason',REST_URL,'apikey','SecretString')
    geti = geta.response.text
    getwj = json.loads(geti)
    for i,j in getwj.items():
        if i == "data":
           getit = j
    print getit
    print type(getit)
    context['hi'] = getit

    RESTC_URL = 'http://10.10.10.76:8100/UCSRestService/calldetailrecord/' + subscriberId + '/subscriber'
    context = {}
    getac = Agent()
    getrc = getac.GETT('caason',RESTC_URL,'apikey','SecretString')
    getic = getac.response.text
    getwjc = json.loads(getic)
    print "++++++++++++++++++++++CDR+"

    for k,v in getwjc.items():
        if k == "data":
           context['cdr'] = v
        if k == "error":
           context['cdr'] = False
    context['report'] = True
    return render_to_response('actual/reports.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:04:50.237

添加到上下文后，您正在将上下文重置为空`getit`：

```
context['hi'] = getit

...

context = {}    # here's your problem 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:06:40.867

只需删除以下行：

```
context = {} 
```

你会没事的。（此行清除上下文字典，因此您的数据被删除）

旁注，你的代码很糟糕，我建议清理它。

# c++ - 前进或移动

> ID：16014481
> 
> 赞同：0
> 
> 时间：2013-04-15T11:53:19.970
> 
> 标签：c++, c++11, move-semantics, rvalue-reference

这些是移动和前进的有效用法吗？
f3 和 f4 是一样的吗？
这样做有危险吗？
谢谢！

```
#include <utility>
class A {};
A f1() {
  A a;
  return a;   // Move constructor is called
}
A f2(A&& a) {
  return a;   // Copy constructor is called, which is what I try to avoid.
}
A f3(A&& a) {
  return std::forward<A&&>(a); // Move constructor is called
}
A f4(A&& a) {
  return std::move(a); // Move constructor is called
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:30:16.713

`std::forward` exists because of a quirk in how `&&` works under type deduction.

Under type deduction, the `T` in `T&&` will bind to one of 3 possibilities. If being deduced from an lvalue `int&`, `T` will bind to `int&`. Then `int& &&` is just a `int&`. If being deduced from an lvalue `int const&`, `T` will bind to `int const&`, and `int const& &&` is `int const&`. If being deduced from an rvalue `int` of some kind, `T` will bind to `int`, and `int&&` is `int&&`.

`std::forward` is a utility function to reverse that map. The three pertinent signatures of `std::forward<>` are: `T& std::forward<T&>(T&)` or `T const& std::forward<T const&>(T const&)` or `T&& std::forward<T>(T&&)`

All of this ends up being exceedingly useful when doing the technique known as "perfect forwarding", where you use `T&&t` in a type deduction context, then `std::forward<T>(t)` to pass on the "same type" as was deduced from to another call.

Note that there are a few simplifying lies above. There are is also the possibility of `T const&&` which is pretty obscure type-wise, as an example. I probably glossed over some details of how the type deduction works, and the terms `rvalue` and `lvalue` don't fully reflect the full 5-fold (or is it 6?) different kinds of variable values in C++11.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:55:10.353

*   `std::forward`与*通用参考*一起使用，即 a `template <typename T> ... T&&`。

*   `std::move`与*右值引用*一起使用（如您的`A&&`）。

所以两者`f1`都是`f4`合理的解决方案。他们做不同的事情，所以你必须决定你想要哪一个。

不要使用`f2`或`f3`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:58:28.820

对于您的示例，他们会做同样的事情，但使用它是惯用的`std::move`

```
A f(A&& a) {
  // use std::move(a)
} 
```

函数模板的情况略有不同

```
template<typename A>
A f(A&& a) {
   // use std::forward<A>(a)
} 
```

不同之处在于第二个版本可以同时接收左值和右值（Scott Meyers 将它们命名为“[**通用引用**](http://accu.org/var/uploads/journals/Overload111.pdf)”），而第一个版本只能接收右值。

# php - 使用 PHP 访问网络摄像头？

> ID：16014482
> 
> 赞同：3
> 
> 时间：2013-04-15T11:53:20.383
> 
> 标签：php, webcam

使用 PHP 在技术上可行吗？例如，允许我网站的访问者查看他们自己的网络摄像头、拍摄照片，然后将文件上传到一个目录，也可以上传到我的 MySQL-DB。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T11:54:12.103

不，PHP 是一种服务器端语言，因此无法访问客户端硬件。

但是，现代浏览器允许 JavaScript 代码访问网络摄像头、麦克风等，因此您可以记录一些内容，然后将其提交到服务器。[Photobooth.js](http://wolframhempel.github.io/photobooth-js/)可能值得一看。

当然，您*也可以*使用 Flash、Silverlight 或 Java Applet。但几乎每台 PC 上只有前者可用。除此之外，当您不是绝对需要 Flash 时，您应该避免使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:54:50.963

不，你不能。

PHP 在你的服务器上运行，它不知道用户的机器或硬件，即使它有，你也不能使用它们。

您必须使用一些客户端编程，使用 javascript、HTML5 或 Flash 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:05:39.013

简单的答案是否定的。您可以使用 javascript 、 jQuery 或 flash 访问网络摄像头 [http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/) [http://www.scriptcam.com/docs.cfm](http://www.scriptcam.com/docs.cfm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T11:56:48.000

根本没有

服务器端语言无法控制客户端硬件......

你需要一些可以在客户端工作的东西，比如 flash、javascript 等

但是我发现了这个[http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/) jquery 插件。你可以看看

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T11:57:09.493

不，正如@ThiefMaster 所说，是一种服务器技术。如果您想访问客户端网络摄像头，您可以使用：

*   闪光
*   银光
*   JavaScript/HTML5（带`getUserMedia()`）

[这里](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)是关于如何在 HTML5 中做到这一点的介绍。希望这可以帮助你

# python - 生成可能的组合并仅获得前 50 个

> ID：16014484
> 
> 赞同：2
> 
> 时间：2013-04-15T11:53:28.083
> 
> 标签：python, combinations

我正在寻找一种方法来获得前 50 个可能的组合（固定长度的 20 个）的条件，但我似乎无法找到我正在寻找的东西。我有一个下面的例子。

```
import itertools
a = array([1,2,5])
b = array([8,9,10])
c = 0
if c == 1:
  x = a
  y = b
else:
  x = b
  y = a
mylist = list(itertools.product(x,y,x,y,x,y,x,y,x,y,x,y,x,y,x,y,x,y,x,y)) 
```

我的输出是：

```
(8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1)
(8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 2)
(8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 5)
(8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 2 8 1)
(8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 2 8 2)
(8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 1 8 2 8 5)
.
. 
```

等等..

我已经遇到了内存错误。我觉得这个组合太多了，所以我只想得到前50个。有没有办法做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T11:56:18.143

留下来`itertools`，使用[`islice`](http://docs.python.org/2/library/itertools.html#itertools.islice)：

```
list(itertools.islice(itertools.product(x,y,x,y,x,y,x,y,x,y,x,y,x,y,x,y,x,y,x,y), 50)) 
```

这会从 中获取前 50 个元素`product`并将它们转换为列表。

# java - SimpleDateFormat.parse() 忽略模式中的字符数

> ID：16014488
> 
> 赞同：4
> 
> 时间：2013-04-15T11:53:40.150
> 
> 标签：java, parsing, date, simpledateformat

我正在尝试解析可以具有树不同格式的日期字符串。即使字符串不应该匹配第二个模式，它也会以某种方式匹配，因此返回错误的日期。

那是我的代码：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Start {

    public static void main(String[] args) {
        SimpleDateFormat sdf = new SimpleDateFormat("dd.MM.yyyy");
        try{
            System.out.println(sdf.format(parseDate("2013-01-31")));
        } catch(ParseException ex){
            System.out.println("Unable to parse");
        }
    }

    public static Date parseDate(String dateString) throws ParseException{
        SimpleDateFormat sdf = new SimpleDateFormat("dd.MM.yyyy");
        SimpleDateFormat sdf2 = new SimpleDateFormat("dd-MM-yyyy");
        SimpleDateFormat sdf3 = new SimpleDateFormat("yyyy-MM-dd");

        Date parsedDate;
        try {
            parsedDate = sdf.parse(dateString);
        } catch (ParseException ex) {
            try{
                parsedDate = sdf2.parse(dateString);
            } catch (ParseException ex2){
                parsedDate = sdf3.parse(dateString);    
            }
        }
        return parsedDate;
    }
} 
```

有了输入`2013-01-31`，我得到了输出`05.07.0036`。

如果我尝试解析`31-01-2013`或`31.01.2013`得到`31.01.2013`预期的结果。

我认识到如果我设置这样的模式，程序会给我完全相同的输出：

```
SimpleDateFormat sdf = new SimpleDateFormat("d.M.y");
SimpleDateFormat sdf2 = new SimpleDateFormat("d-M-y");
SimpleDateFormat sdf3 = new SimpleDateFormat("y-M-d"); 
```

为什么它会忽略我的模式中的字符数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-21T19:26:10.703

SimpleDateFormat 存在严重问题。默认的 lenient 设置会产生垃圾答案，我想不出 lenient 有什么好处的情况。宽松设置不是对人类输入的日期变化产生合理解释的可靠方法。这不应该是默认设置。

如果可以，请改用 DateTimeFormatter，请参阅 Ole VV 的答案。这种较新的方法更优越，并产生线程安全和不可变的实例。如果您在线程之间共享 SimpleDateFormat 实例，它们可以产生垃圾结果而不会出现错误或异常。可悲的是，我建议的实现继承了这种不良行为。

禁用 lenient 只是解决方案的一部分。您仍然会得到在测试中难以捕捉到的垃圾结果。有关示例，请参见下面代码中的注释。

这是 SimpleDateFormat 的扩展，它强制进行严格的模式匹配。这应该是该类的默认行为。

```
import java.text.DateFormatSymbols;
import java.text.ParseException;
import java.text.ParsePosition;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

/**
 * Extension of SimpleDateFormat that implements strict matching.
 * parse(text) will only return a Date if text exactly matches the
 * pattern. 
 * 
 * This is needed because SimpleDateFormat does not enforce strict 
 * matching. First there is the lenient setting, which is true
 * by default. This allows text that does not match the pattern and
 * garbage to be interpreted as valid date/time information. For example,
 * parsing "2010-09-01" using the format "yyyyMMdd" yields the date 
 * 2009/12/09! Is this bizarre interpretation the ninth day of the  
 * zeroth month of 2010? If you are dealing with inputs that are not 
 * strictly formatted, you WILL get bad results. You can override lenient  
 * with setLenient(false), but this strangeness should not be the default. 
 *
 * Second, setLenient(false) still does not strictly interpret the pattern. 
 * For example "2010/01/5" will match "yyyy/MM/dd". And data disagreement like 
 * "1999/2011" for the pattern "yyyy/yyyy" is tolerated (yielding 2011). 
 *
 * Third, setLenient(false) still allows garbage after the pattern match. 
 * For example: "20100901" and "20100901andGarbage" will both match "yyyyMMdd". 
 * 
 * This class restricts this undesirable behavior, and makes parse() and 
 * format() functional inverses, which is what you would expect. Thus
 * text.equals(format(parse(text))) when parse returns a non-null result.
 * 
 * @author zobell
 *
 */
public class StrictSimpleDateFormat extends SimpleDateFormat {

    protected boolean strict = true;

    public StrictSimpleDateFormat() {
        super();
        setStrict(true);
    }

    public StrictSimpleDateFormat(String pattern) {
        super(pattern);
        setStrict(true);
    }

    public StrictSimpleDateFormat(String pattern, DateFormatSymbols formatSymbols) {
        super(pattern, formatSymbols);
        setStrict(true);
    }

    public StrictSimpleDateFormat(String pattern, Locale locale) {
        super(pattern, locale);
        setStrict(true);
    }

    /**
     * Set the strict setting. If strict == true (the default)
     * then parsing requires an exact match to the pattern. Setting
     * strict = false will tolerate text after the pattern match. 
     * @param strict
     */
    public void setStrict(boolean strict) {
        this.strict = strict;
        // strict with lenient does not make sense. Really lenient does
        // not make sense in any case.
        if (strict)
            setLenient(false); 
    }

    public boolean getStrict() {
        return strict;
    }

    /**
     * Parse text to a Date. Exact match of the pattern is required.
     * Parse and format are now inverse functions, so this is
     * required to be true for valid text date information:
     * text.equals(format(parse(text))
     * @param text
     * @param pos
     * @return
     */
    @Override
    public Date parse(String text, ParsePosition pos) {
        Date d = super.parse(text, pos);
        if (strict && d != null) {
           String format = this.format(d);
           if (pos.getIndex() + format.length() != text.length() ||
                 !text.endsWith(format)) {
              d = null; // Not exact match
           }
        }
        return d;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-26T17:39:51.617

## java.time

java.time 是现代 Java 日期和时间 API，其行为方式符合您的预期。因此，只需简单翻译您的代码即可：

```
private static final DateTimeFormatter formatter1 = DateTimeFormatter.ofPattern("dd.MM.yyyy");
private static final DateTimeFormatter formatter2 = DateTimeFormatter.ofPattern("dd-MM-yyyy");
private static final DateTimeFormatter formatter3 = DateTimeFormatter.ofPattern("yyyy-MM-dd");

public static LocalDate parseDate(String dateString) {
    LocalDate parsedDate;
    try {
        parsedDate = LocalDate.parse(dateString, formatter1);
    } catch (DateTimeParseException dtpe1) {
        try {
            parsedDate = LocalDate.parse(dateString, formatter2);
        } catch (DateTimeParseException dtpe2) {
            parsedDate = LocalDate.parse(dateString, formatter3);
        }
    }
    return parsedDate;
} 
```

（我将格式化程序放在您的方法之外，因此不会为每次调用重新创建它们。如果您愿意，可以将它们放在里面。）

让我们试一试：

```
 LocalDate date = parseDate("2013-01-31");
    System.out.println(date); 
```

输出是：

> 2013-01-31

对于数字`DateTimeFormatter.ofPattern`，将模式字母的数量作为*最小*字段宽度。它还假设月份中的日期不超过两位数。因此，在尝试格式时`dd-MM-yyyy`，它成功解析`20`为一个月中的一天，然后抛出 a `DateTimeParseException`，因为 . 之后没有连字符（破折号）`20`。然后该方法继续尝试下一个格式化程序。

## 你的代码出了什么问题

`SimpleDateFormat`您尝试使用的类是出了名的麻烦，幸运的是早已过时。您遇到的只是它的众多问题之一。重复文档中关于它如何处理来自 Teetoo 答案的数字的重要句子：

> 对于解析，模式字母的数量将被忽略，除非需要分隔两个相邻的字段。

如此`new SimpleDateFormat("dd-MM-yyyy")`愉快地解析`2013`为月份的日期，`01`月份和`31`年份。接下来我们应该预料到它会抛出异常，因为 1 月 31 日没有 2013 天。但是`SimpleDateFormat`默认设置不会这样做。它只是在接下来的几个月和几年中不断计算天数，并在五年半后的第 36 年 7 月 5 日结束，这是您观察到的结果。

## 关联

[Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T12:31:27.373

一种解决方法可能是使用正则表达式测试 yyyy-MM-dd 格式：

```
public static Date parseDate(String dateString) throws ParseException {
    SimpleDateFormat sdf = new SimpleDateFormat("dd.MM.yyyy");
    SimpleDateFormat sdf2 = new SimpleDateFormat("dd-MM-yyyy");
    SimpleDateFormat sdf3 = new SimpleDateFormat("yyyy-MM-dd");

    Date parsedDate;
    try {
        if (dateString.matches("\\d{4}-\\d{2}-\\d{2}")) {
            parsedDate = sdf3.parse(dateString);
        } else {
            throw new ParseException("", 0);
        }
    } catch (ParseException ex) {
        try {
            parsedDate = sdf2.parse(dateString);
        } catch (ParseException ex2) {
            parsedDate = sdf.parse(dateString);
        }
    }
    return parsedDate;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T12:05:26.793

它记录在`SimpleDateFormat`javadoc 中：

> 对于格式化，模式字母的数量是最小位数，较短的数字在此数量上补零。**对于解析，模式字母的数量将被忽略，除非需要分隔两个相邻的字段。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T12:23:41.847

谢谢@Teetoo。这帮助我找到了解决问题的方法：

如果我希望解析函数与模式完全匹配，我必须将`SimpleDateFormat.setLenient`SimpleDateFormat 的“lenient”（）设置为`false`：

```
SimpleDateFormat sdf = new SimpleDateFormat("d.M.y");
sdf.setLenient(false);
SimpleDateFormat sdf2 = new SimpleDateFormat("d-M-y");
sdf2.setLenient(false);
SimpleDateFormat sdf3 = new SimpleDateFormat("y-M-d");
sdf3.setLenient(false); 
```

如果我只为每个段使用一个模式字母，这仍然会解析日期，但它会认识到 2013 年不可能是这一天，因此它与第二个模式不匹配。结合长度检查，我得到了我想要的。

# iphone - 移动设备的媒体查询 - 宽度不正确

> ID：16014489
> 
> 赞同：0
> 
> 时间：2013-04-15T11:53:46.157
> 
> 标签：iphone, ios, mobile, responsive-design, mobile-safari

我一直在开发一个响应式网站。我一直在使用 Chrome 开发人员工具将屏幕尺寸覆盖为 320 像素，并使用媒体查询来更改 CSS。这是我使用的媒体查询：

```
@media only screen 
and (max-width : 480px) { 
```

在我的浏览器上，这可以正常工作，我得到了这个（将视口设置为 320 x 480px）：

![在此处输入图像描述](https://i.stack.imgur.com/vm6W5.png)

然而，在 iPhone 5 上查看时，结果与全宽版本相同] [2](https://i.stack.imgur.com/iDcPm.jpg)：

![在此处输入图像描述](https://i.stack.imgur.com/iDcPm.jpg)

[您可以在此处](http://www.haselden.co.uk/rttest/css/media.css)查看完整的媒体查询 CSS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:19:47.297

添加这个

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /> 
```

在您的`<head>`标签中。

这意味着您的网站将缩放到设备宽度而不是默认宽度。

# javascript - prettyPrint() 只产生一次效果。（谷歌美化）

> ID：16014494
> 
> 赞同：1
> 
> 时间：2013-04-15T11:53:50.073
> 
> 标签：javascript, jquery, modal-dialog, prettify

我有这个 JavaScript（带有 jQ​​uery）：

```
var g_files_added, socket, cookie, database = null;
var file_contents = [];
function viewFile(key, filename) {
    $('#title-filename').text(filename);
    $('.prettyprint').text(file_contents[key]);
    $('#viewFileModal').modal('show');
}
$(document).ready(function() {
    $(document).on('shown', '#viewFileModal', function(event) {
            prettyPrint();
    });
});

// Variables have been set in code not shown, irrelevant to problem.
// prettyPrint() is called everytime the #viewFileModal is shown,
// but its effect is only felt once. 
```

`prettyPrint()`每次显示 viewFileModal 模态框（由 Bootstrap 提供）时都会调用它，只是它似乎在每次页面加载时只产生一次效果。

`prettyPrint()`在使模态框出现后，我尝试在 JS 控制台中注释并输入。它确实只在第一次显示该框时（每页加载）才有效。

有任何想法吗？我一直坚持这一点。我也试过把电话打到`prettyPrint()`放在 viewFile 函数中；但效果是一样的。

非常感谢。

山姆。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-29T20:20:27.923

在美化之后，调用“prettyPrint()”会在你的 PRE 标签中添加一个名为“prettyPrinted”的类。下面的行将删除页面上“prettyPrinted”类的所有实例，以便 prettyPrint() 函数可以重新美化您的 PRE 标签。这可以在**不**向 DIV 动态添加 PRE 标记的情况下完成。

```
$('.prettyprinted').removeClass('prettyprinted'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T22:02:12.667

Joseph Poff 的答案是正确的，但你必须小心。prettPrint() 将所有内容包装在扫描标签中。如果你删除了 prettyprinted 类，你并没有删除扫描标签。除非您正在清除 pre 的内容（或剥离所有扫描标签），否则每次调用 prettyPrint() 时，您都将添加扫描标签，这将包装您的旧扫描标签。它可以很快失去控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:22:48.293

感谢马太。解决办法是改成这样。也就是说，动态添加整个 pre 而不仅仅是文本。

```
var g_files_added, socket, cookie, database = null;
var file_contents = [];
function viewFile(key, filename) {
    $('#title-filename').text(filename);
    $('#fileblock').html('<pre class="prettyprint">' + file_contents[key] + '</pre>'); // fileblock is a div.
    $('#viewFileModal').modal('show');
}
$(document).ready(function() {
    $(document).on('shown', '#viewFileModal', function(event) {
        prettyPrint();
    });
}); 
```

:)

# javascript - 将参数传递给函数（ajax、javascript、jquery）

> ID：16014499
> 
> 赞同：-3
> 
> 时间：2013-04-15T11:54:09.030
> 
> 标签：javascript, jquery

如何将`x`参数传递给函数`startTable`？我想按作者过滤结果，并且已经坚持了几天......

```
$(document).ready(function () {
    var result;
    alert('ajax works');
    $.ajax({
        type: "GET",
        url: "xml.php",
        cache: true,
        dataType: "xml",
        success: function (xml) {

            function startTable(x) {
                $(xml).find("item").each(function (index) {
                    var author = $(this).find('author').text();
                    var title = $(this).find('title').text();
                    var rating = $(this).find('rating').text();
                    var review = $(this).find('review').text();
                    // Checks the condition
                    if (author == x) {
                        $('#input1').append('<tr><td>Title: <b>' + title + '</b></td><td>Rating: <b>' + rating + '</b></td></tr><tr><td colspan="2">' + review + '</td></tr>');
                    }
                });
            };

        }
    });
});

function startFilter() {
    var x = document.getElementById('inputFilter').value;
    // Passing parameter
    startTable(x);
}; 
```

有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:04:43.610

您不能从外部调用本地函数。您应该做的是过滤成功回调函数中的响应数据

```
$.ajax({
    type: "GET",
    url: "xml.php",
    success: function (response) {
      render_and_filter(response);
    }
});

function render_and_filter(data){
 // ... append or update your data to document here ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:17:18.737

我重新编写了您的代码以调用 ajax，然后使用它 - 一切都是从执行开始的。这有点笨拙，但你可以继续工作。

```
function startTable(x, xml) {
    $(xml).find("item").each(function (index) {
        var xmlItem = $(this);
        if (xmlItem.find('author').text() == x) {
            var thisItem = {
                title: xmlItem.find('title').text(),
                rating: xmlItem.find('rating').text(),
                review: xmlItem.find('review').text()
            };
            $('#input1').append('<tr><td>Title: <b>' + thisItem.title + '</b></td><td>Rating: <b>' + thisItem.rating + '</b></td></tr><tr><td colspan="2">' + thisItem.review + '</td></tr>');
        }
    });
}

function getData(x) {
    var result;
    alert('ajax works');
    $.ajax({
        type: "GET",
        url: "xml.php",
        cache: true,
        dataType: "xml",
        success: function (xml) {
            startTable(x, xml);
        }
    });
}

function startFilter() {
    var x = document.getElementById('inputFilter').value;
    // Passing parameter
    getData(x);
}

//get started
startFilter(); 
```

现在可能只是我，但您可能会在服务器上过滤您的结果（传递“x”值并只发回您需要的内容，但这取决于您。

# javascript - Foreach javascript 与prototype.js 冲突

> ID：16014507
> 
> 赞同：0
> 
> 时间：2013-04-15T11:54:29.780
> 
> 标签：javascript, prototypejs

如果我尝试包含prototype.js，Foreach 会返回一个奇怪的函数，否则我包含的脚本可以正常工作。以下带有原型的错误输出：

```
function each(iterator, context) {
    try {
        this._each(iterator, context);
    } catch (e) {
        if (e != $break) 
            throw e;
    }
    return this;
} 
```

**更新：**我用 if (element.hasOwnProperty (array)) {} 解决了这个问题，但我不满意，因为放置一个 else 你会显示很多函数原型。这显然是一个冲突，我如何解决冲突？

# java - 引用内部静态 java 类时工具箱编译的奇怪行为

> ID：16014513
> 
> 赞同：7
> 
> 时间：2013-04-15T11:54:47.163
> 
> 标签：java, scala, reflection, scala-2.10, toolbox

假设我有以下java类：

```
package com.test;
public class Outer {
    public static class Inner { public static final String VAL = "Inner"; }
} 
```

正如您所期望的那样，我可以从 scala 代码中引用`VAL`常量，但是当我尝试使用 scala 工具箱编译器编译引用该字段的代码时，它会失败。（堆栈跟踪遵循下面的示例）。

这段代码说明了我的意思：

```
import scala.reflect.runtime.universe
import scala.tools.reflect.ToolBox
object Issue extends App {
  val mirror = universe.runtimeMirror(getClass.getClassLoader)
  val toolbox = ToolBox(mirror).mkToolBox()
  println                  (com.test.Outer.Inner.VAL) // prints 'Inner'
  val tree = toolbox.parse("com.test.Outer.Inner.VAL")
  val compiled = toolbox.compile(tree)() // fails to compile
} 
```

这是我得到的异常跟踪：

```
Exception in thread "main" scala.tools.reflect.ToolBoxError: reflective compilation has failed: 

value Inner is not a member of object com.test.Outer
    at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl$ToolBoxGlobal.throwIfErrors(ToolBoxFactory.scala:319)
    at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl$ToolBoxGlobal.compile(ToolBoxFactory.scala:252)
    at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl.compile(ToolBoxFactory.scala:416)
    at Issue$delayedInit$body.apply(Issue.scala:8)
    at scala.Function0$class.apply$mcV$sp(Function0.scala:40)
    at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)
    at scala.App$$anonfun$main$1.apply(App.scala:71)
    at scala.App$$anonfun$main$1.apply(App.scala:71)
    at scala.collection.immutable.List.foreach(List.scala:318)
    at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:32)
    at scala.App$class.main(App.scala:71)
    at Issue$.main(Issue.scala:3)
    at Issue.main(Issue.scala) 
```

有没有人遇到过这个？有什么我可以改变的（即编译器选项）来使它工作吗？

谢谢。

**编辑**

这是我用“-verbose -Yissue-debug”编译时得到的：

```
[reflect-compiler] made Scala package scala
[reflect-compiler] unpickling Scala package package and package scala, owner = package scala
[reflect-compiler] made Scala package java
[reflect-compiler] made Scala package lang
[reflect-compiler] made Scala package runtime
[reflect-compiler] made Scala package annotation
[reflect-compiler] unpickling Scala package package and package runtime, owner = package runtime
[reflect-compiler] made Scala package collection
[reflect-compiler] unpickling Scala package package and package collection, owner = package collection
[reflect-compiler] translating reflection info for Java class java.lang.Object
[reflect-compiler] unpickling Scala class Unit and object Unit, owner = package scala
[reflect-compiler] translating reflection info for Java class java.lang.Throwable
[reflect-compiler] unpickling Scala class Long and object Long, owner = package scala
[reflect-compiler] translating reflection info for Java class java.lang.InterruptedException
[reflect-compiler] unpickling Scala class Int and object Int, owner = package scala
[reflect-compiler] unpickling Scala class Boolean and object Boolean, owner = package scala
[reflect-compiler] translating reflection info for Java class java.lang.String
[reflect-compiler] translating reflection info for Java class java.lang.CloneNotSupportedException
[reflect-compiler] made Scala package io
[reflect-compiler] translating reflection info for Java interface java.io.Serializable
[reflect-compiler] translating reflection info for Java interface java.lang.CharSequence
[reflect-compiler] unpickling Scala class Char and object Char, owner = package scala
[reflect-compiler] translating reflection info for Java class java.io.ObjectStreamField
[reflect-compiler] made Scala package util
[reflect-compiler] unpickling Scala class Float and object Float, owner = package scala
[reflect-compiler] unpickling Scala class Double and object Double, owner = package scala
[reflect-compiler] unpickling Scala class Byte and object Byte, owner = package scala
[reflect-compiler] translating reflection info for Java class java.lang.StringBuffer
[reflect-compiler] translating reflection info for Java class java.util.Locale
[reflect-compiler] translating reflection info for Java class java.io.UnsupportedEncodingException
[reflect-compiler] made Scala package nio
[reflect-compiler] made Scala package charset
[reflect-compiler] translating reflection info for Java class java.nio.charset.Charset
[reflect-compiler] translating reflection info for Java class java.lang.StringBuilder
[reflect-compiler] translating reflection info for Java interface java.lang.Comparable
[reflect-compiler] made Scala package beans
parsing com.test.Outer.Inner.VAL
importing com.test.Outer.Inner.VAL
compiling com.test.Outer.Inner.VAL
[reflect-compiler] unpickling Scala class Predef and object Predef, owner = package scala
[reflect-compiler] unpickling Scala class ClassfileAnnotation and object ClassfileAnnotation, owner = package annotation
[reflect-compiler] unpickling Scala class Annotation and object Annotation, owner = package annotation
[reflect-compiler] unpickling Scala class StaticAnnotation and object StaticAnnotation, owner = package annotation
[reflect-compiler] made Scala package reflect
[reflect-compiler] unpickling Scala package package and package reflect, owner = package reflect
[reflect-compiler] made Scala package api
[reflect-compiler] unpickling Scala package package and package api, owner = package api
[reflect-compiler] unpickling Scala class Universe and object Universe, owner = package api
[reflect-compiler] unpickling Scala class Symbols and object Symbols, owner = package api
[reflect-compiler] unpickling Scala class Types and object Types, owner = package api
[reflect-compiler] unpickling Scala class FlagSets and object FlagSets, owner = package api
[reflect-compiler] unpickling Scala class Scopes and object Scopes, owner = package api
[reflect-compiler] unpickling Scala class Names and object Names, owner = package api
[reflect-compiler] unpickling Scala class Trees and object Trees, owner = package api
[reflect-compiler] unpickling Scala class Constants and object Constants, owner = package api
[reflect-compiler] unpickling Scala class Annotations and object Annotations, owner = package api
[reflect-compiler] unpickling Scala class Positions and object Positions, owner = package api
[reflect-compiler] unpickling Scala class Exprs and object Exprs, owner = package api
[reflect-compiler] unpickling Scala class TypeTags and object TypeTags, owner = package api
[reflect-compiler] unpickling Scala class TagInterop and object TagInterop, owner = package api
[reflect-compiler] unpickling Scala class StandardDefinitions and object StandardDefinitions, owner = package api
[reflect-compiler] unpickling Scala class StandardNames and object StandardNames, owner = package api
[reflect-compiler] unpickling Scala class BuildUtils and object BuildUtils, owner = package api
[reflect-compiler] unpickling Scala class Mirrors and object Mirrors, owner = package api
[reflect-compiler] unpickling Scala class Printers and object Printers, owner = package api
[reflect-compiler] unpickling Scala class Importers and object Importers, owner = package api
[reflect-compiler] made Scala package runtime
[reflect-compiler] unpickling Scala package package and package runtime, owner = package runtime
[reflect-compiler] unpickling Scala class StringContext and object StringContext, owner = package scala
[reflect-compiler] unpickling Scala class Product and object Product, owner = package scala
[reflect-compiler] unpickling Scala class Equals and object Equals, owner = package scala
[reflect-compiler] unpickling Scala class Serializable and object Serializable, owner = package scala
[reflect-compiler] made Scala package immutable
[reflect-compiler] unpickling Scala package package and package immutable, owner = package immutable
[reflect-compiler] unpickling Scala class Array and object Array, owner = package scala
[reflect-compiler] translating reflection info for Java interface java.lang.Cloneable
[reflect-compiler] unpickling Scala class AnyVal and object AnyVal, owner = package scala
[reflect-compiler] unpickling Scala class NotNull and object NotNull, owner = package scala
[reflect-compiler] unpickling Scala class LowPriorityImplicits and object LowPriorityImplicits, owner = package scala
[reflect-compiler] made Scala package com
[reflect-compiler] unpickling Scala class Dynamic and object Dynamic, owner = package scala
[reflect-compiler] made Scala package test
[reflect-compiler] translating reflection info for Java class com.test.Outer
[reflect-compiler] *** missing: Inner/true/object Outer/false/class scala.reflect.runtime.SynchronizedOps$$anon$1
java.lang.Exception
    at scala.tools.nsc.typechecker.Contexts$Context.issue(Contexts.scala:399)
    at scala.tools.nsc.typechecker.ContextErrors$ErrorUtils$.issueTypeError(ContextErrors.scala:84)
    at scala.tools.nsc.typechecker.ContextErrors$ErrorUtils$.issueNormalTypeError(ContextErrors.scala:69)
    at scala.tools.nsc.typechecker.ContextErrors$TyperContextErrors$TyperErrorGen$.NotAMemberError(ContextErrors.scala:331)
    at scala.tools.nsc.typechecker.Typers$Typer.handleMissing$1(Typers.scala:4846)
    at scala.tools.nsc.typechecker.Typers$Typer.scala$tools$nsc$typechecker$Typers$Typer$$typedSelect$1(Typers.scala:4851)
    at scala.tools.nsc.typechecker.Typers$Typer.typedSelectOrSuperCall$1(Typers.scala:4938)
    at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:5551)
    at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:5630)
    at scala.tools.nsc.typechecker.Typers$Typer.typedQualifier(Typers.scala:5710)
    at scala.tools.nsc.typechecker.Typers$Typer.typedQualifier(Typers.scala:5716)
    at scala.tools.nsc.typechecker.Typers$Typer.typedSelectOrSuperCall$1(Typers.scala:4918)
    at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:5551)
    at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:5630)
    at scala.tools.nsc.typechecker.Typers$Typer.transformedOrTyped(Typers.scala:5825)
    at scala.tools.nsc.typechecker.Typers$Typer.typedDefDef(Typers.scala:2250)
    at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:5557)
    at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:5630)
    at scala.tools.nsc.typechecker.Typers$Typer.scala$tools$nsc$typechecker$Typers$Typer$$typedStat$1(Typers.scala:2921)
    at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$62.apply(Typers.scala:3025)
    at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$62.apply(Typers.scala:3025)
    at scala.collection.immutable.List.loop$1(List.scala:170)
    at scala.collection.immutable.List.mapConserve(List.scala:186)
    at scala.tools.nsc.typechecker.Typers$Typer.typedStats(Typers.scala:3025)
    at scala.tools.nsc.typechecker.Typers$Typer.typedTemplate(Typers.scala:1914)
    at scala.tools.nsc.typechecker.Typers$Typer.typedModuleDef(Typers.scala:1794)
    at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:5572)
    at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:5630)
    at scala.tools.nsc.typechecker.Typers$Typer.scala$tools$nsc$typechecker$Typers$Typer$$typedStat$1(Typers.scala:2921)
    at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$62.apply(Typers.scala:3025)
    at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$62.apply(Typers.scala:3025)
    at scala.collection.immutable.List.loop$1(List.scala:170)
    at scala.collection.immutable.List.mapConserve(List.scala:186)
    at scala.tools.nsc.typechecker.Typers$Typer.typedStats(Typers.scala:3025)
    at scala.tools.nsc.typechecker.Typers$Typer.typedPackageDef$1(Typers.scala:5288)
    at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:5575)
    at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:5630)
    at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:5687)
    at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3.apply(Analyzer.scala:99)
    at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:463)
    at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3$$anonfun$run$1.apply(Analyzer.scala:91)
    at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3$$anonfun$run$1.apply(Analyzer.scala:91)
    at scala.collection.Iterator$class.foreach(Iterator.scala:727)
    at scala.collection.AbstractIterator.foreach(Iterator.scala:1157)
    at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3.run(Analyzer.scala:91)
    at scala.tools.nsc.Global$Run.compileUnitsInternal(Global.scala:1582)
    at scala.tools.nsc.Global$Run.compileUnits(Global.scala:1556)
    at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl$ToolBoxGlobal.compile(ToolBoxFactory.scala:251)
    at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl.compile(ToolBoxFactory.scala:416)
    at Issue$delayedInit$body.apply(Issue.scala:8)
    at scala.Function0$class.apply$mcV$sp(Function0.scala:40)
    at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)
    at scala.App$$anonfun$main$1.apply(App.scala:71)
    at scala.App$$anonfun$main$1.apply(App.scala:71)
    at scala.collection.immutable.List.foreach(List.scala:318)
    at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:32)
    at scala.App$class.main(App.scala:71)
    at Issue$.main(Issue.scala:3)
    at Issue.main(Issue.scala)
Exception in thread "main" scala.tools.reflect.ToolBoxError: reflective compilation has failed: 

[namer in 31ms]
[packageobjects in 0ms]
value Inner is not a member of object com.test.Outer
[typer in 211ms]
[total in 247ms]
[reset] recursing in package <root>
    at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl$ToolBoxGlobal.throwIfErrors(ToolBoxFactory.scala:319)
    at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl$ToolBoxGlobal.compile(ToolBoxFactory.scala:252)
    at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl.compile(ToolBoxFactory.scala:416)
    at Issue$delayedInit$body.apply(Issue.scala:8)
    at scala.Function0$class.apply$mcV$sp(Function0.scala:40)
    at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)
    at scala.App$$anonfun$main$1.apply(App.scala:71)
    at scala.App$$anonfun$main$1.apply(App.scala:71)
    at scala.collection.immutable.List.foreach(List.scala:318)
    at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:32)
    at scala.App$class.main(App.scala:71)
    at Issue$.main(Issue.scala:3)
    at Issue.main(Issue.scala) 
```

**编辑 2**

我认为这是反射 API 中的一个错误，但我不确定。我已经调试了打字阶段并提出了以下建议：

在`com.test.Outer`分配了适当的符号后，我们进入了 的打字阶段`com.test.Outer.Inner`。

它在那里查找`Inner`使用的符号`scala.reflect.internal.Scopes.Scope#lookupEntry(Name)`。

检查所查看的范围表明它确实包含 a `ScopeEntry`for a `ClassSymbol`of`Inner`但范围符号名称和方法`name`参数之间的相等性测试是使用完成的`Object#equals`（即`equals`没有被覆盖），并且两个名称实例不相同。

关于符号名称和传递的名称参数的最后一点是我看到它们具有相同的`index`字段。我不确定这意味着什么，但我的印象是这意味着它们在名称表中引用相同的名称，所以它们是相等的（？）（虽然两者之间有一个区别，一个是`TermName`和符号的名称是一个`TypeName`)。

无论如何，我可能会打开一个错误 Scala 的错误跟踪器，只是想在这里总结一下。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-12T18:55:08.403

正确 - 看起来 Scala / JVM 反射 API 无法确定 VAR 是嵌套 Inner 类的静态成员。

# php - Delphi/Cpp 等价于 PHP 中的 RawURLEncode

> ID：16014516
> 
> 赞同：2
> 
> 时间：2013-04-15T11:54:54.767
> 
> 标签：php, delphi, c++builder, urlencode, html-encode

我在cpp builder（或delphi）中寻找与PHP RawURLEncode（和Decode）等效的函数。

我使用以下字符串进行测试：（`_%_&_+_=_ _"_'_a_b_c_d_e_f_g_h_`我希望只编码 var 值，而不是整个 URL）

rawurlencode 返回：`_%25_%26_%2B_%3D_%20_%22_%27_a_b_c_d_e_f_g_h_`

我试过没有成功：

*   TIdURI::ParamsEncode:`_%25_&_+_=_%20_%22_'_a_b_c_d_e_f_g_h_`
*   TIdURI::PathEncode:`_%25_&_%2B_=_%20_%22_'_a_b_c_d_e_f_g_h_`
*   TIdURI::URLEncode：错误：无协议（需要完整路径）
*   HTTPApp::HTMLEncode:（`_%_& amp;_+_=_ _& quot;_'_a_b_c_d_e_f_g_h_`“&”后加空格）
*   Wininet::WinHTTPEncode：在单元中找不到函数
*   IdGlobal::URLEncode：在单元中找不到函数
*   SynaCode::URLEncode：XE2 中找不到单元

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T12:09:51.547

PHP`RawURLEncode`是[RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)的实现。我的网络搜索产生了这个声称实现 RFC 3986 的[Delphi 单元。](https://www.assembla.com/code/delphi-doodlings/subversion/nodes/58/trunk/URIEncode/UURIEncode.pas)

我根据您的输入对其进行了测试：

```
{$APPTYPE CONSOLE}

uses
  System.SysUtils,
  UURIEncode in 'UURIEncode.pas';

begin
  Writeln(URIEncode('_%_&_+_=_ _"_''_a_b_c_d_e_f_g_h_'));
  Readln;
end. 
```

输出是：

```
_%25_%26_%2B_%3D_%20_%22_%27_a_b_c_d_e_f_g_h_

```

在 PHP 文档中找到了我成功进行网络搜索的关键，其中说明了[`RawURLEncode`](http://php.net/manual/en/function.rawurlencode.php)where is 状态：

> 根据 RFC 3986 进行 URL 编码

# ios - 将对象添加到数组不起作用

> ID：16014517
> 
> 赞同：0
> 
> 时间：2013-04-15T11:54:59.560
> 
> 标签：ios, objective-c, arrays

我尝试将一些地图信息存储到 a`NSMutableArray`但它不起作用。我认为只有一个小问题我找不到。

在 .h 文件中：

```
@property (retain, nonatomic) NSMutableArray *annotationArray; 
```

在 .m 文件：

```
 MapPoint *placeObject = [[MapPoint alloc] initWithName:title subtitle:subtitle coordinate:loc];
    [annotationArray addObject:placeObject];
    NSLog(@" count: %lu", (unsigned long)[annotationArray count]); // always "0" 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:58:32.023

看来您可能忘记了初始化数组。在尝试向其中添加对象之前尝试添加以下行：

```
[self setAnnotationArray:[[NSMutableArray alloc] init]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:57:31.913

我需要查看更多代码，但我认为您很可能没有设置 annotationArray。你在哪里写`_annotationArray = [[NSMutableArray alloc] init]`吗？

如果没有，它的位置是类 init 方法，或者您可以在函数中编写：

```
if (annotationArray == nil) {
_annotationArray = [[NSMutableArray alloc] init]
} 
```

您也可以使用`[self setAnnotationArray:[[NSMutableArray alloc] init]]`而不是`_annotationArray`，但这取决于您的综合声明。

我建议你不要只在你的函数中初始化它而不检查它是否已经被首先设置，因为当你的代码变得更复杂时，你会冒着覆盖其他东西的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:56:56.397

我想你错过了这个：

```
_annotationArray=[[NSMutableArray alloc]init]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:10:47.900

在 .m 文件：在标题之后添加

```
@synthesize annotationArray=_annotationArray;

- (void)loadView 
{
self. annotationArray =[NSMutableArray array];
} 
```

# php - 在谷歌地图中动态添加更多结果

> ID：16014524
> 
> 赞同：0
> 
> 时间：2013-04-15T11:55:07.313
> 
> 标签：php, javascript, jquery, google-maps, google-maps-api-3

我正在为此工作几个小时，但没有成功。
此代码一次运行良好，并在地图上添加了 100 条记录。然后我想在前 100 个之后从 db 添加更多结果。我该怎么做，请指导我。这是代码。
我也尝试使用 ajax，但结果从 php 返回后导致 json 损坏，所以这对我也不起作用。

```
<div class="span12 geoData">

    <?php

    $db = new db();
    $data = array();
    $tweets = array();
    $counter = 0;

    $query = "SELECT * FROM `tweets` WHERE `geo_lat` != 0 LIMIT 100";
    $results = $db->select($query);

    $count = mysqli_num_rows($results);

    while (($row = mysqli_fetch_assoc($results)) !=FALSE) {
        $tweets[$counter]['tweet_text'] =  $row['tweet_text'];
        $tweets[$counter]['geo_lat'] =  $row['geo_lat'];
        $tweets[$counter]['geo_long'] =  $row['geo_long'];

        $counter++;
    }

    $data['count'] = $count;
    $data['tweets'] = $tweets;

    $jsonData = json_encode($data);

    ?>
    <script src="mapsApi.js"></script>
    <script src="markerclusterer_compiled.js"></script>
    <script type="text/javascript">

    var data = <?php echo $jsonData; ?>;

    function initialize() {       

    var center = new google.maps.LatLng(39.744408452010475, -100.15602825000002);

    var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 4,
    center: center,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    infowindow = new google.maps.InfoWindow({
    content: "holding..."
    });

    var markers = [];
    for (var i = 0; i < data.count; i++) {
    var contentSTR = '<div id="info"><p><span>Ttitle:</span> '+ data.tweets[i].tweet_text + '</p></div>';
    var dataTweets = data.tweets[i];
    var latLng = new google.maps.LatLng(dataTweets.geo_lat,
                                      dataTweets.geo_long);
    var marker = new google.maps.Marker({
        position: latLng,
        html: contentSTR,           
    });

    google.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(this.html);
        infowindow.open(map, this);

    });

    markers.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers); 
}                         
google.maps.event.addDomListener(window, 'load', initialize);

</script>

<div id="map-container">
    <div id="map"></div>
</div>              

</div> 
```

# visual-studio-lightswitch - 在 Light Switch 2011 的其他自动完成框中选择数据时填充自动完成框

> ID：16014526
> 
> 赞同：0
> 
> 时间：2013-04-15T11:55:09.190
> 
> 标签：visual-studio-lightswitch

我有一个表 x 有来自两个表的两个关系。一种是具有列 ID 和公司的公司。其他是具有列 ID 公司和部门的部门。同样，公司是部门中的外键。

在电灯开关中，我为表 x 添加了数据屏幕。它将公司和部门显示为自动完成框。

现在我想根据公司自动完成框中的选定值过滤部门。我不想使用自定义控件。是否可以直接在LightSwitch中

我试图应用过滤器，但我不知道如何传递当前选定的公司名称。

任何人都可以有任何博客或帖子的链接，我可以从中获得如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:56:02.180

这称为嵌套或级联组合框。这两个博客文章应该可以满足您的需求：

[LightSwitch – 用于数据输入的嵌套 AutoCompleteBox](http://dotnettim.wordpress.com/2011/03/20/lightswitch-nested-autocompletebox-for-data-entry/)

[LightSwitch – 用于数据输入的嵌套 AutoCompleteBox 第 2 部分](http://dotnettim.wordpress.com/2011/04/11/lightswitch-nested-autocompletebox-for-data-entry-part-2/)

# c# - 尝试使用 ADFS 2.0 声明为 Dynamics 2011 实施 SSO - 声明未通过

> ID：16014530
> 
> 赞同：0
> 
> 时间：2013-04-15T11:55:23.430
> 
> 标签：c#, dynamics-crm-2011, wif, adfs2.0

我正在尝试为 microsoft dynamics 2011 实现 SSO，如本（写得非常糟糕）[演练](http://msdn.microsoft.com/en-us/library/gg509057.aspx)中所述。
我已将我的 ASP.NET 网站配置为 ADFS 管理器中的依赖方，并按照说明添加 STS 引用。
我已经为 ADFS 中的 UPN 字段定义了一个发布转换规则。

在我的 ASP.NET 应用程序中，执行此操作时，
`IClaimsIdentity claimsIdentity = ((IClaimsPrincipal)(Thread.CurrentPrincipal)).Identities[0];`我确实得到了 的实例`Microsoft.IdentityModel.Claims.ClaimsIdentity`，但是，它的`Claims`集合是空的。

但是，我注意到`FederationMetadata.xml`“添加 sts”向导生成的仅包含 2 个`<auth:ClaimType>`元素 - for`name`和`role`，两者都是 optional=true。
但是，如果我尝试手动编辑和更新我的依赖方`FederationMetadata.xml`以添加`upn`为声明类型，或者使现有声明类型之一成为非可选，我会遇到以下错误 - `ID6018 Digest verification failed...`。
如果我将两者都恢复为“可选=真”，则不会发生错误。

任何人都可以提供有关如何将`UPN`字段添加到我的 ASP.NET 应用程序的任何见解吗？
此外，将不胜感激比我提到的更好的操作方法/演练。

我不确定在这里提供什么进一步的信息，所以我将发布我的应用程序`FederationMetadata.xml`：

```
<?xml version="1.0" encoding="utf-8"?>

<EntityDescriptor ID="_bad84517-5281-47e8-be9d-2e1a78eae772" entityID="https://MyAspnetSite.com:4455/"
                  xmlns="urn:oasis:names:tc:SAML:2.0:metadata">
  <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
    <ds:SignedInfo>
      <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
      <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
      <ds:Reference URI="#_bad84517-5281-47e8-be9d-2e1a78eae772">
        <ds:Transforms>
          <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
          <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
        </ds:Transforms>
        <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
        <ds:DigestValue>
          eWoZYLA/oMNMWd+S9m0TlbIg2rUSuumAckA0BTdAqbg=
        </ds:DigestValue>
      </ds:Reference>
    </ds:SignedInfo>
    <ds:SignatureValue>
      yMubsY42ZblFDP4ZFEO06uT317c/xdMUF7PrOhPpShkDtbigg1TWq3tGYEa35+xpfjqQCseHJH07ftkxOH6t0u6ngqbGCmZ4yaOBTA3bdbGMGull6WwLSQIxNn2eR1mRzyF2mIM3t4Jfl6EoOZ0msnsyUTVI9Oq03eFweDN2zoI=
    </ds:SignatureValue>
    <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
      <X509Data>
        <X509Certificate>
           certificate data
        </X509Certificate>
      </X509Data>
    </KeyInfo>
  </ds:Signature>
  <RoleDescriptor xsi:type="fed:ApplicationServiceType"
                  protocolSupportEnumeration="http://schemas.xmlsoap.org/ws/2005/02/trust http://docs.oasis-open.org/ws-sx/ws-trust/200512"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:fed="http://docs.oasis-open.org/wsfed/federation/200706">
    <KeyDescriptor use="encryption">
      <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
        <X509Data>
          <X509Certificate>

           certificate data
          </X509Certificate>
        </X509Data>
      </KeyInfo>
    </KeyDescriptor>
    <fed:ClaimTypesRequested>
      <auth:ClaimType Uri="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" Optional="false"
                      xmlns:auth="http://docs.oasis-open.org/wsfed/authorization/200706" />
      <auth:ClaimType Uri="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" Optional="false"
                      xmlns:auth="http://docs.oasis-open.org/wsfed/authorization/200706" />
      <auth:ClaimType Uri="http://schemas.microsoft.com/ws/2005/05/identity/claims/upn" Optional="false"
                      xmlns:auth="http://docs.oasis-open.org/wsfed/authorization/200706" />
    </fed:ClaimTypesRequested>
    <fed:TargetScopes>
      <EndpointReference xmlns="http://www.w3.org/2005/08/addressing">
        <Address>
          https://MyAspnetSite.com:4455/
        </Address>
      </EndpointReference>
    </fed:TargetScopes>
    <fed:ApplicationServiceEndpoint>
      <EndpointReference xmlns="http://www.w3.org/2005/08/addressing">
        <Address>
          https://MyAspnetSite.com:4455/
        </Address>
      </EndpointReference>
    </fed:ApplicationServiceEndpoint>
  </RoleDescriptor>
</EntityDescriptor> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:41:59.670

您不能直接修改 FederationMetadata 文档，因为它是经过数字签名的。如果这样做，它将被 ADFS 拒绝，因为它认为它已被篡改。

无论如何，元数据文档不控制 ADFS 中发出的声明。除了添加 RP 之外，您还需要在 ADFS 中创建规则来定义将为该 RP 发出的声明。

[CRM 的其他文档](http://msdn.microsoft.com/en-us/library/gg188600.aspx)解释了如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T06:59:08.503

好吧，为了将来可能会遇到这种情况的可怜人的利益，我将记录对我来说是什么问题：
“添加 STS 引用”向导以错误的方式更改了我的 web.config。

我不知道为什么会这样，也许是因为我有一个预先存在的`<system.serviceModel>`部分，但是向导添加了该`<claimTypeRequirements>`部分和其他各种`<system.serviceModel> \ <bindings> \ <ws2007FederationHttpBinding>`似乎并没有真正做任何事情的东西。
我最终删除了它并手动添加了相应的`<microsoft.identityModel>` 部分。
这似乎成功了。

# jquery - jQuery 升级、.attr 和 .prop - 1.2.6 到 1.9.1

> ID：16014534
> 
> 赞同：5
> 
> 时间：2013-04-15T11:55:32.273
> 
> 标签：jquery, attr, prop

我正在尝试将大量工作中的网站从非常旧的 jQuery 版本（1.2.6、1.4.3）升级到最新版本（1.9.1）。一切进展顺利 - 迁移脚本完成了大部分工作，尽管这仅适用于 1.6.4 到 1.9.1，但我认为我已经完成了大部分需要排序的其他更改。

不过，我遇到了几个问题，主要问题是从`.attr()`to的变化`.prop()`——因为我们所有的代码都使用`.attr()`了，如果我们只是将其更改为使用 .prop()，则会出现一些中断，特别是一些用于过滤商店中的产品——这些调用 AJAX 调用并在被点击时进行其他处理。

我最初的“修复”（在非常大的空中报价中）是基于简单地将呼叫从一个重定向到另一个：

```
$.fn.attr = $.fn.prop; 
```

我敢肯定这会引入整个世界的错误，尽管它修复了最初被破坏的错误。从那以后，我只注意到另一个由它引起的错误（到目前为止，无论如何），那就是它导致 href 属性（可能是从 # 开始的锚点）返回完整的规范化 URL - [http:// jsfiddle.net/eT6xE/1/](http://jsfiddle.net/eT6xE/1/)

```
<a href="#something"><span>Product Details</span></a>
<div></div>

$('div').append( $('a').attr('href') );
$('div').append( '<br />' + $('a').prop('href') );
// #something  \n  http://fiddle.jshell.net/eT6xE/1/show/#something 
```

鉴于这是我注意到的唯一错误，我已经玩了一点并想出了一个解决方法 - [http://jsfiddle.net/M92CE/1/](http://jsfiddle.net/M92CE/1/) - 这似乎可以重新引入原来的功能。尽管对于 href attr/prop 问题来说，这似乎是一个相当干净的解决方案，但我还是不禁觉得最初的修复是……与它可能的修复相去甚远。

是否有任何“标准”方法可以重新引入此功能，如果没有，是否有更好的方法？

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:11:58.573

jQuery 1.9 删除了*许多*在以前版本中已弃用的旧功能。从 jQuery 1.2 迁移到 1.9，您几乎肯定会遇到很多，正如您所发现的。

幸运的是，jQuery 1.9 有一个名为[jQuery Migrate](https://github.com/jquery/jquery-migrate)的配套库，用于向后兼容旧版本，它恢复了在 1.9 中删除的所有旧的弃用功能。

如果您需要使用最新的 jQuery 版本备份和运行旧代码，请使用 jQuery Migrate 使其正常工作。

但是，请记住，Migrate 库的目的是帮助您过渡到新功能，而不是让您的代码停留在过去。因此，请使用 Migrate 使代码正常工作，但随后您需要开始考虑更改代码，以便不需要 Migrate。

根据您拥有的代码量，这可能需要相当多的工作，但使用 Migrate 可以让您一个接一个地进行这些更改，而不必一次修复所有内容。

希望有帮助。

# html - Safari css hack 在 IE8 上工作

> ID：16014542
> 
> 赞同：0
> 
> 时间：2013-04-15T11:55:46.507
> 
> 标签：html, css

在一个html页面支持这些浏览器Mozilla Firefox14、IE8、Safari5.1.1、Chrome19。由于要支持所有这些浏览器，我必须使用 css hack 来保持页面上元素的正确对齐。

下面是css：

对于 Mozilla Firefox 和 IE8：

```
.dis_stats
{
position:absolute;
margin-top:-30px;
margin-left:-190px;
background:#E0E0E0;
width:141px;
height:80px;
_position:relative;
_margin-top:-460px;
_margin-left:115px;
} 
```

对于 Safari 和 Chrome：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
.dis_stats
{
position:absolute;
background:#E0E0E0;
margin-top:-30px;
margin-left:731px;
width:141;
height:80;
}
} 
```

现在 Mozilla 上发生的事情正在完美运行。但在 IE8 上，它正在应用为 Safari 和 Chrome 定义的属性，如果我删除任何 Safari 和 Chrome 的属性，那么它将从预期的属性中选择相同的属性（即为 IE8 和 Mozilla 定义的）。

我不知道为什么会发生这种情况。有人请建议这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T01:57:39.953

我建议尝试制定一个符合标准且不需要 hack 的版本。但是如果你必须破解，你可以考虑专门为 IE 8 使用单独的样式表来修复其问题的条件注释：

```
<!--[if lt IE 8]>
<style type="text/css" src="path/to/ie-only-style.css">
<![endif]--> 
```

这并不能真正解释 IE 的问题，但可以解决一些特定于 IE 的问题，而无需花费太多时间（以可维护性为代价）。

# ruby-on-rails - 重构 rails 方法

> ID：16014543
> 
> 赞同：0
> 
> 时间：2013-04-15T11:55:54.597
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring

我想知道，我该如何重构这段代码，因为它看起来不太好阅读和理解

```
def next_payment_price
    price = self.plan_price
    price = discounted_price if self.coupon && self.coupon_duration.nil? && self.coupon_discount != 100
    price = discounted_price if self.coupon && self.coupon_duration.present? && self.coupon_discount != 100 && ((self.created_at + 14.days + self.coupon_duration.month)  > Time.now )
    price
end

def discounted_price
    self.plan_price - ((self.plan_price * self.coupon_discount) / 100)
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:17:33.353

我认为您可以使用较小的方法来更好地阅读

```
 def next_payment_price
    correct_discount? && correct_coupon? ? discounted_price : self.plan_price
  end

  def expired_coupon?
    (self.created_at + 14.days + self.coupon_duration.month)  < Time.now
  end

  def correct_coupon?
    self.coupon_duration.nil? || (self.coupon_duration && !expired_coupon?)
  end

  def correct_discount?
    self.coupon && self.coupon_discount && self.coupon_discount < 100
  end

  def discounted_price
    self.plan_price - self.plan_price * self.coupon_discount / 100
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:04:52.747

我建议您在`coupon`模型中创建一些小方法，从而赋予对象更多含义，例如：

```
def is_less_than_100?
  self.coupon_discount != 100
end

def is_date_bigger_than_today?
  (self.created_at + 14.days + self.coupon_duration.month)  > Time.now
end 
```

这样你的代码会更少，而且更容易理解：

```
price = discounted_price if self.is_less_than_100? and self.is_date_bigger_than_today? 
```

PS：名字只是为了说明目的。我想你明白了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:08:13.417

如果您也将过期逻辑提取到方法中怎么办？

```
 def not_expired?
        return false if self.coupon_duration.nil?
        ((self.created_at + 14.days + self.coupon_duration.month)  > Time.now )
    end 
```

然后：

```
 def next_payment_price
        price = self.plan_price
        price = discounted_price if self.coupon? and not_expired? ...
    end 
```

# c# - YouTube API，C#.net - 从 YouTube 获取视频信息有时失败

> ID：16014545
> 
> 赞同：1
> 
> 时间：2013-04-15T11:56:05.477
> 
> 标签：c#, api, youtube, gdata

我正在尝试向 YouTube 上的视频添加评论，有时当我收到要添加评论的视频时，YouTube 向我发送以下错误：执行请求失败： http: [//gdata.youtube.com/feeds /api/videos/ceVlltPBcHg/comments](http://gdata.youtube.com/feeds/api/videos/ceVlltPBcHg/comments)

异常的内部消息是：“远程服务器返回错误：（403）禁止。”

```
public bool commentVideo(string videoId)
{
       Uri Url = new Uri("http://gdata.youtube.com/feeds/api/videos/" + videoId);
       YouTubeRequestSettings s = new YouTubeRequestSettings(AppName, ApiKey,UserName,
                                                                  Password);
       s.Timeout = 10000000;
       YouTubeRequest account  = new YouTubeRequest(s);
       account.Proxy = GetProxyForUser(user);
       Video video = account.Retrieve<Video>(Url);//some times got exception
       string rating = commentRepository.getRating();
       Comment c = new Comment();
       c.Content = commentRepository.getComment();
       account.AddComment(video, c);
       Console.WriteLine("Comment successfully added to : " + videoId);
       return true;
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:53:08.583

谷歌的 qouta 安全规则似乎向我的代码返回错误。当我长时间使用代码时，代码可以正常工作。

# model-view-controller - 如何将变量从控制器传递到视图 joomla mvc

> ID：16014548
> 
> 赞同：7
> 
> 时间：2013-04-15T11:56:10.627
> 
> 标签：model-view-controller, view, joomla, controller

根据此示例，如何将我的变量从 joomla 子控制器传递到视图

```
 class MYControllerControllerParser extends JController{

            public function __construct($default = array()) {

            parent::__construct($default);

        }

     protected function _import($file, $type) {

            $layout = '';
            switch ($type) {

                case 'importcsv':
                    $contains_headers       = false;
                    $field_separator    = JRequest::getVar('separator');
                    $field_separator    = empty($field_separator) ? ',' : $field_separator;
                    $field_enclosure    = JRequest::getVar('enclosure');;
                    $field_enclosure    = empty($field_enclosure) ? '"' : $field_enclosure;
//this variable should be passed to the view
                    $this->info = $this->getImportInfoCSV($file, contains_headers, $field_separator, $field_enclosure);
//This variable should go to view
                    $this->file = basename($file);
                    $layout = 'importcsv';
                    break;
            }

    $this->getView('import','html')->display();
    }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T13:54:04.953

在控制器中：

```
$view = $this->getView('import','html');
$view->myVariable = 'hello';
$view->display(); 
```

在视图中：

```
class MycomponentViewItem extends JViewLegacy
{
  /** @var  string   my variable */
  public $myVariable;

  public function display($tpl = null)
  {
    $myVariable = $this->myVariable;
    //...
  }
} 
```

# android - 如何连接两个 android 设备并在 B 的屏幕上显示来自 A 剪贴板的文本 - 所有方法？

> ID：16014554
> 
> 赞同：0
> 
> 时间：2013-04-15T11:56:22.770
> 
> 标签：android, bluetooth, messaging

基本上 - 任务：

在设备一上，文本被复制到剪贴板。

设备二必须对刚刚复制到设备一的文本执行一些操作，例如调用具有搜索引擎页面的浏览器并查询？q=text-from-clipboard-just-copied-on-device-A。

*第一个问题*：是否可以使用开箱即用的应用程序？

*第二个问题*：如果没有，有什么不同的方法可以做到这一点？

两台设备都在同一个本地 wi-fi 网络上（通过路由器连接）。通过外部 ip 服务器连接不是我想要的，如果有的话，我更喜欢在设备 A 或设备 B (android) 上运行的服务器，因此不需要工作互联网连接。

*   我看到有一个 Wi-fi direct 选项（我的设备是 4.0 和 4.2 Android 版本，所以这是可能的）。是否有源代码如何使用wifi直接发送消息并在另一端接收？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:08:20.437

第一个问题：是否可以使用开箱即用的应用程序？

不，开箱即用的应用程序是不可能的。如果有的话我会很惊讶！

第二个问题：如果没有，有什么不同的方法可以做到这一点？

一种方法是实现蓝牙服务器和客户端应用程序，它们可以在它们之间进行通信并交换数据。当然，您将能够实现不同的功能，例如打开带有您在问题中提到的文本的网页。

或者您也可以查看此处解释的 NFC 通信：（请记住，设备必须在非常短的距离内才能实现此类通信）[http://developer.android.com/guide/topics/connectivity/nfc/index。 html](http://developer.android.com/guide/topics/connectivity/nfc/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:12:37.863

我想问题1是不可能的。我无法想象一个开箱即用的应用程序知道你想对接收到的数据执行什么操作。

问题二的解决方案可能是使用 tcp 套接字。一台设备作为服务器，一台作为客户端，这样您就可以将您的字符串、链接或其他任何内容发送到另一台设备，该设备接收并执行一些操作。

编辑：对不起，刚刚读到你不想在互联网许可的情况下这样做，所以可以通过蓝牙、短信进行数据交换......

# python - 如何使用 python 从谷歌获取过去 2 小时的结果？

> ID：16014558
> 
> 赞同：1
> 
> 时间：2013-04-15T11:56:44.833
> 
> 标签：python, urllib, google-search-api

我有一个搜索主题“leo messi”。我想在过去 2 小时内发布所有关于“leo messi”的博客。现在我被困在这里。这段代码没有过滤博客和时间

```
import urllib
import json as m_json
query = "leo messi"
query = urllib.urlencode ( { 'q' : query } )
response = urllib.urlopen ( 'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&' + query ).read()
json = m_json.loads ( response )
results = json [ 'responseData' ] [ 'results' ]
for result in results:
    title = result['title']
    url = result['url']   # was URL in the original and that threw a name error exception
    print ( title + '; ' + url ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:14:53.620

根据[此文档](https://developers.google.com/custom-search/v1/using_rest#st_params)，谷歌 API 仅提供`dateRestrict`允许您添加这些限制的参数：

> 根据日期将结果限制为 URL。支持的值包括：
> 
> *   d[number]：请求过去指定天数的结果。
> *   w[number]：请求过去几周指定数量的结果。
> *   m[number]：请求指定过去月份数的结果。
> *   y[number]：请求过去指定年数的结果。

尽管经过更详细的搜索后，我发现[它](http://www.rankpanel.com/blog/google-search-parameters/)显示`tbs=qdr`了可以使用的参数，如下所示：

> 您可以指定不同的时间段
> 
> *   tbs=qdr:s – 前一秒
> *   tbs=qdr:n – 前一分钟
> *   tbs=qdr:h – 前一小时
> *   tbs=qdr:d – 前一天
> *   tbs=qdr:w – 前一周
> *   tbs=qdr:m – 上个月
> *   tbs=qdr:y – 上一年

但我不知道它是否适用于 websearch api。

# javascript - 获取页面的可滚动高度

> ID：16014564
> 
> 赞同：0
> 
> 时间：2013-04-15T11:56:54.340
> 
> 标签：javascript, jquery, scroll, window

首先，我想知道这些术语之间的区别：

```
- $(window).height() 

- $(document).height() 

- $(window).scrollTop() 
```

这些术语与我有些相似，我无法理解它们之间的明显区别。以下是我的回答：

*   `$(window).height()`：给出用户可以看到的窗口高度。

*   `$(document).height()`：给出文档的总高度。根据页面上的内容，这可以大于/小于窗口高度。

*   `$(document).scrollTop()`: 给出滚动条在窗口中的垂直位置。

**真正的问题：** 我正在尝试实现延迟加载，当滚动条从页面底部越过一个点 200px 时，我需要调用服务器。我无法使用上述值来获得它。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:01:24.490

窗口是您可以看到的区域 - 就好像您的屏幕是一个窗口并且您正在查看文档一样。该文档是整个文档 - 它可能比窗口短或长得多。

这是你需要的数学：

```
if( $(document).height() - $(document).scrollTop() < 200 ){
    //Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:23:10.397

```
$(window).height();   // returns height of browser viewport
$(document).height(); // returns height of HTML document
$(window).scrollTop(); //Get the current vertical position of the scroll bar for the first               element in the set of matched elements or set the vertical position of the scroll bar for every matched element.

$(window).scrollHeight(); //Height of the scroll view of an element; it includes the element padding but not its margin. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:37:35.480

最终，在理解了这些术语之后，我弄清楚了应该是什么计算。感谢答案。我的定义几乎是正确的。

```
function (isScrollable) {
  var isUserAtBottom = ($(window).height() + $(window).scrollTop() + 200 > $(document).height());
  if (isUserAtBottom) {
     // Do something (Like Ajax call to server to fetch new elements) 
     return true;
  }
} 
```

# android - Paypal 退款 api 给出错误 NO API ACCESS TO RECEIVER

> ID：16014567
> 
> 赞同：2
> 
> 时间：2013-04-15T11:57:00.907
> 
> 标签：android, paypal, paypal-sandbox

我正在使用来自自适应支付 api 的预先批准和延迟链式支​​付。

我使用 api 的测试业务帐户也是主要接收者帐户。

在使用预先批准启动延迟付款后，我得到了一个支付密钥。资金在主要收款人中准确收到。我的应用程序现在有一个场景，即资金必须从主要收款人退还给购买者。当尝试使用支付密钥执行此退款并指定接收方并设置主要接收方标志时，我收到错误 NO_API_ACCESS_TO_RECEIVER。

这阻止了我的应用程序发布，并且是一个严重的问题。请您尽早解除对我的屏蔽。

这是我的代码：

```
RefundRequest refundRequest = new RefundRequest();
    refundRequest.setPayKey(payKey);
    refundRequest.setCurrencyCode(KeyConstants.CURRENCY_USD_CODE);
    refundRequest.setRequestEnvelope(ClientInfoUtil.getMyAppRequestEnvelope());

    ReceiverList receiverList = new ReceiverList();
    Receiver receiver = new Receiver();
    receiver.setEmail(businessAccountPaypalEmail);
    receiver.setPrimary(true);

    double truncatedAmount = NumberUtil.getDoubleTruncate(amount, KeyConstants.TWO_DECIMAL_FORMAT);
    BigDecimal trunBigDecimal = new BigDecimal(truncatedAmount);
    receiver.setAmount(trunBigDecimal.setScale(2, RoundingMode.HALF_UP));

    receiverList.getReceiver().add(receiver);

    refundRequest.setReceiverList(receiverList);

    try {
        AdaptivePayments adaptivePayments = new AdaptivePayments();
        RefundResponse refundResponse =  adaptivePayments.refund(refundRequest);
        ResponseEnvelope responseEnvelope = refundResponse.getResponseEnvelope();
        AckCode ackCode = responseEnvelope.getAck();
        if(ackCode == AckCode.SUCCESS || ackCode == AckCode.SUCCESS_WITH_WARNING){
            Logger.getLogger(PayPalSessionBean.class.getName()).log(Level.INFO, "Refund success for the pay key {0} and messsage {1}",
                    new Object[]{payKey});
            System.out.println("Ack code is " + ackCode);
            RefundInfoList refundInfoList = refundResponse.getRefundInfoList();
            List<RefundInfo> refundInfos = refundInfoList.getRefundInfo();
            for (Iterator iterator = refundInfos.iterator(); iterator
                    .hasNext();) {
                RefundInfo refundInfo = (RefundInfo) iterator.next();

                System.out.println(refundInfo.getReceiver().getEmail() + "\t" + refundInfo.getRefundTransactionStatus() + "\t" + 
                        refundInfo.getRefundGrossAmount() + '\t' + refundInfo.getRefundStatus() + '\t');

                ErrorList errorList = refundInfo.getErrorList();
                List<ErrorData> errs = errorList.getError();
                for (Iterator iterator2 = errs.iterator(); iterator2
                        .hasNext();) {
                    ErrorData errorData = (ErrorData) iterator2.next();
                    System.out.println(errorData.getMessage());
                }
            }
            return true;
        } 
```

在上面的代码片段中，返回的 Ak 代码是成功的，但是当我打印 RefundInfo 对象的退款状态时，它显示 NO_API_ACCESS_TO_RECEIVER。我已经从主帐户的贝宝面板向 api 调用者授予了权限。

我身边有什么遗漏吗？请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:48:42.070

如果您只是从主要（您自己）退款给发件人并且您想要全额退款，那么您不需要指定任何收件人。否则，我需要某种类型的 PayKey 或 Correlation ID 来查找我这边的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T07:06:08.100

我自己得到了答案。与大家分享

它正在从错误的位置读取贝宝 SDK 客户端属性文件。

为了避免此类问题，我们应该在 AdaptivePayments 的构造函数中设置属性。

以下是更多说明的代码：

有一个会话 bean PropertyBean 具有函数 getPayPalProperties() 从属性文件中读取所有贝宝属性。

```
Properties properties = propertyBeanLocal.getPayPalProperties();

AdaptivePayments adaptivePayments = new AdaptivePayments(properties); 
```

而不是这样做

```
refundRequest.setRequestEnvelope(ClientInfoUtil.getMyAppRequestEnvelope()); 
```

做这个。

```
RequestEnvelope requestEnvelope = new RequestEnvelope();
requestEnvelope.setErrorLanguage("en_us");
refundRequest.setRequestEnvelope(requestEnvelope); 
```

# c# - 如何使用具有相同合同和绑定的动态端点创建多个 wcf 服务实例而不保存在 app.config 中？

> ID：16014572
> 
> 赞同：3
> 
> 时间：2013-04-15T11:57:16.607
> 
> 标签：c#, wpf, wcf, c#-4.0, wcf-binding

这是我的服务器端`app.config`：

```
<services>
  <service name="PokerService.PlayerService" behaviorConfiguration="ServiceBehaviorPlayer">
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:5054" />
      </baseAddresses>
    </host>
    <!-- Service Endpoints -->
    <endpoint  address="player" binding="netTcpBinding" bindingConfiguration="PlayerBinding" contract="PokerService.IPlayerService" />
    <endpoint address="player/mex" binding="mexTcpBinding" name="ServiceBehaviorPlayer" contract="IMetadataExchange"  />
  </service>
</services> 
```

我正在客户端代码中生成动态端点：

```
ServiceHost host = new ServiceHost(typeof(PokerService.PlayerService));

NetTcpBinding binding = new NetTcpBinding(SecurityMode.Message);
binding.Name = "NetTcpBinding_IPlayerService";
binding.Security.Message.ClientCredentialType = MessageCredentialType.IssuedToken;

ServiceEndpoint ep = host.AddServiceEndpoint(
            typeof(PokerService.IPlayerService),
            binding,
            "net.tcp://localhost:5054");
        EndpointAddress myEndpointAdd = new EndpointAddress(new Uri("net.tcp://localhost:5054/player1"),
             EndpointIdentity.CreateDnsIdentity("pident.cloudapp.net"));
        ep.Address = myEndpointAdd; 
```

对于服务测试代码：

```
var PlayerChannelFactory = new DuplexChannelFactory<ClientApplication.PlayerService.IPlayerService>(new PlayerHandler(handler, this), binding, ep.Address);

PlayerChannelFactory.Credentials.SupportInteractive = false;
        PlayerChannelFactory.Credentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;
PlayerServiceProxy = PlayerChannelFactory.CreateChannelWithIssuedToken(User.Instance.userToken); 
```

现在我收到此错误

![错误](https://i.stack.imgur.com/PzMg3.png)

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:09:07.750

客户端配置文件如下所示：

```
<client>
      <endpoint address="net.tcp://localhost:5054/player" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IPlayerService" contract="PlayerService.IPlayerService" name="NetTcpBinding_IPlayerService">
      <identity>
          <dns value="pident.cloudapp.net"/>
        </identity>
      </endpoint>
         </client> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:03:07.447

我还认为您的服务和客户端之间存在端点不匹配。尝试：

```
new EndpointAddress(new Uri("net.tcp://localhost:5054/player") 
```

客户端配置文件长什么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:00:42.787

由于您可以在同一地址上托管多个服务（使用端口共享，...） - 您的服务端点地址定义了“您正在寻找哪些服务”。

因此，正如@Backlash 还提到的，您的客户端的 uri 应该指向正确的服务器地址。

# spring - 没有定义类型 [javax.persistence.EntityManagerFactory] 的唯一 bean：预期单个 bean 但找到 0

> ID：16014573
> 
> 赞同：1
> 
> 时间：2013-04-15T11:57:16.353
> 
> 标签：spring, hibernate, hibernate-entitymanager

我的 spring security/hibernate 应用程序有问题，我无法解决，因为我是 spring 新手，也是 hibernate。这是我的问题：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userAccountService': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [javax.persistence.EntityManagerFactory] is defined: expected single bean but found 0: 
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:343)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1120)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    at javax.servlet.GenericServlet.init(GenericServlet.java:241)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:736)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at runjettyrun.Bootstrap.main(Bootstrap.java:97)
2013-04-15 14:39:30.076:INFO::Started SelectChannelConnector@0.0.0.0:8080 
```

我无法弄清楚那里有什么问题。我用谷歌搜索并尝试了一些可能对其他人有帮助的解决方案，但我的错误不断出现。由于我是 Spring 新手，因此可能是我在代码中犯的一些简单错误。:)

web.xml

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext-security.xml</param-value>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <!-- Spring Security -->
  <filter>
      <filter-name>springSecurityFilterChain</filter-name>
      <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter> 
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <welcome-file-list>
    <welcome-file>jsp/index.jsp</welcome-file>
  </welcome-file-list>

</web-app> 
```

应用程序上下文.xml

```
 <beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:mvc="http://www.springframework.org/schema/mvc"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/security
            http://www.springframework.org/schema/security/spring-security-3.1.xsd
            http://www.springframework.org/schema/mvc
            http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <mvc:annotation-driven />

    <http auto-config="true">
        <form-login login-page="/login" default-target-url="/" authentication-failure-url="/loginfailed" />
        <logout logout-success-url="/logout" />
        <intercept-url pattern="/admin" access="ROLE_ADMIN" />
        <intercept-url pattern="/" access="ROLE_USER,ROLE_ADMIN" />
    </http>

    <beans:bean id="loginService" class="fishpoop.services.LoginService" />

    <authentication-manager>
        <authentication-provider user-service-ref="loginService">
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

hibernateContext.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <context:property-placeholder location="/WEB-INF/jdbc.properties" />

    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Declare a datasource that has pooling capabilities-->
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
          destroy-method="close"
          p:driverClass="${jdbc.driverClassName}"
          p:jdbcUrl="${jdbc.url}"
          p:user="${jdbc.username}"
          p:password="${jdbc.password}"
          p:acquireIncrement="5"
          p:idleConnectionTestPeriod="60"
          p:maxPoolSize="100"
          p:maxStatements="50"
          p:minPoolSize="10" />

    <!-- Declare a JPA entityManagerFactory-->
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" >
        <property name="persistenceXmlLocation" value="classpath*:META-INF/persistence.xml"></property>
        <property name="persistenceUnitName" value="hibernatePersistenceUnit" />
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" >
                <property name="showSql" value="true"/>
            </bean>
        </property>
    </bean>

    <!-- Declare a transaction manager-->
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

</beans> 
```

用户帐户服务.java

```
package fishpoop.services;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import fishpoop.model.UserAccount;

@Service("userAccountService")
@Transactional
public class UserAccountService {

    private EntityManager entityManager;

    @PersistenceContext
    public void setEntityManager(EntityManager entityManager){ 
            this. entityManager = entityManager; 
        }
    public UserAccount get(Integer id)
    {
        Query query = entityManager.createQuery("FROM user_account as ua WHERE ua.id="+id);
        return (UserAccount) query.getSingleResult();
    }

    public UserAccount get(String username)
    {
        Query query = entityManager.createQuery("FROM user_account as ua WHERE ua.username='"+username+"'");
        return (UserAccount) query.getSingleResult();
    }

    public void add(UserAccount userAccount)
    {
        entityManager.persist(userAccount);
    }
} 
```

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:42:31.687

看来您的文件名不匹配：

```
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/applicationContext-security.xml</param-value>
<param-value>/WEB-INF/applicationContext.xml</param-value> 
```

在合同中，您提到`applicationContext.xml`并`hibernateContext.xml`

无论如何`param-value`应该只出现一次，例如：

```
 <context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/hibernateContext.xml /WEB-INF/applicationContext.xml
</param-value> 
```

`param-value`注意标签内两个值之间的空格

Spring 已启动并定位您的 Service 类（通过`<mvc:annotation-driven />`）的事实表明它使用的是第一个 xml 文件，而不是第二个

# vb.net - 我的 Excel 的 vb.net 程序无法在不同的计算机上运行

> ID：16014576
> 
> 赞同：0
> 
> 时间：2013-04-15T11:57:25.350
> 
> 标签：vb.net, excel

我使用 Visual Studio 2010 Express 编写了一个 vb.net 程序来打开和操作 Excel 工作簿。我有 MS Office 2010，我的程序在我的电脑上运行良好。当我尝试在我妻子的电脑上运行它时......什么也没有。我没有收到任何错误消息...什么也没有。她和我有相同版本的 Office，但她有 Windows XP，我有 Vista，她的计算机比我的计算机具有更多的安全协议，但我的另一个程序，它不导入任何 Office 命名空间，在她的计算机上运行良好。

当我查看她计算机上的任务管理器时，“应用程序”选项卡下没有任何内容，但在“进程”选项卡下，我看到了 Excel.exe 的一个实例，如果我再次尝试运行该程序，应用程序下仍然没有任何内容，但还有另一个进程下的 Excel.exe 实例。

我曾尝试使用 Click-Once 技术安装我的程序，并且在 Rebuild 后仅使用 Release 文件夹...什么也没有。

我也尝试在 2.0、3.0 等版本下编译它......什么都没有。

以下是一些相关代码：

```
Public Class CleanUpDataForm
    Dim m_objExcel As New Excel.Application
    Dim m_rngRange, m_rngEnd As Excel.Range
    Dim m_blnEntireRow, m_blnCancel As Boolean
    Dim m_strRange, m_strSearch, m_strLogFrameCode As String
    Const c_strCode As String = "log"
    Friend Const c_intScrollBarWidth As Integer = 30

Private Sub CleanUpDataForm_FormClosed(sender As Object, e As    System.Windows.Forms.FormClosedEventArgs) Handles Me.FormClosed
    m_objExcel = Nothing
    Dispose()
End Sub

Private Sub tsbOpen_Click(sender As System.Object, e As System.EventArgs) Handles tsbOpen.Click

    ofdGetWorksheet.Title = "Select Worksheet"
    ofdGetWorksheet.Filter = "All Excel Files (*.xl*)|*.xl*|(*.xlsx)|*.xlsx|(*.xlsm)|*.xlsm|(*.xlsb)|*.xlsb|(*.xlam)|*.xlam|(*.xltx)|*.xltx|(*.xltm)|*.xltm|(*.xls)|*.xls|(*.xla)|*.xla|(*.xlt)|*.xlt|(*.xlm)|*.xlm|(*.xlw)|*.xlw"
    ofdGetWorksheet.FileName = ""
    If ofdGetWorksheet.ShowDialog <> System.Windows.Forms.DialogResult.Cancel Then
        Me.Text = ofdGetWorksheet.FileName
        m_objExcel.Workbooks.Open(Me.Text)
        tsbCopySheet.Enabled = True
        tsbFindRows.Enabled = True
        tsbClose.Enabled = True
        m_objExcel.Visible = True
    Else
        Me.Text = ""
    End If

    Me.Activate()

End Sub 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:33:56.680

我相信我也遇到了这个问题，但是这行代码（在您的 m_objExcel.visible 语句之后）是修复它的原因（从内存中获取）。

```
m_objExcel.Windows(1).Visible = True 
```

您可能想要查看的一件事是 InteropServices 库中的 Marshal.BindToMoniker 方法。我发现这非常有用。如果文件未打开，则将其打开。如果它已经打开，那么它将使用该实例。像这样...

```
wb = System.Runtime.InteropServices.Marshal.BindToMoniker(fileName) 'open the file.  If the file is already open, then this uses the open file instead of trying to open again
exApp = wb.Parent 
```

wb 是我的工作簿变量，exApp 是我的 Excel 变量。

另一件事；确保 Excel 已关闭并从任务管理器中删除那些讨厌的进程

```
Private Sub KillExcel()
    For Each RunningProcess In Process.GetProcessesByName("Excel")
        RunningProcess.Kill()
    Next
End Sub 
```

# java - 如何在没有集合的情况下对 ArrayList 进行洗牌

> ID：16014579
> 
> 赞同：1
> 
> 时间：2013-04-15T11:57:31.060
> 
> 标签：java, list, arraylist, shuffle

我有一个“令牌”数组列表。我可以用整数填充它们，没问题。但是，我在不使用内置列表类的情况下随机重新排列它们时遇到了麻烦。有什么建议么？

```
TopSpinArray<Integer> al = new TopSpinArray<Integer>(numTokens, spinSize);

    //fills ArrayList with tokens
    for(int i = 1; i <= numTokens; i++) {
        al.add(i);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T12:06:12.347

您可以使用以下代码。

> ```
>  public static void shuffleList(List<Integer> a) {
>     int n = a.size();
>     Random random = new Random();
>     random.nextInt();
>     for (int i = 0; i < n; i++) {
>       int change = i + random.nextInt(n - i);
>       swap(a, i, change);
>     }
>   }
> 
>   private static void swap(List<Integer> a, int i, int change) {
>     int helper = a.get(i);
>     a.set(i, a.get(change));
>     a.set(change, helper);
>   } 
> ```

请注意，这是从以下链接复制的

[http://www.vogella.com/articles/JavaAlgorithmsShuffle/article.html](http://www.vogella.com/articles/JavaAlgorithmsShuffle/article.html)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:01:19.283

如果您可以打乱您的班级（可能是因为不是列表：那么您可以填充一个列表，打乱该列表并最终在您的班级中添加打乱的数据：

```
 final List<Integer> tempList = new ArrayList<Integer>();

    //fills ArrayList with tokens
    for(int i = 1; i <= numTokens; i++) {
        tempList.add(i);            

    }

    Collections.shuffle(tempList);

    for(Integer i: tempList) {
        al.add(i);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T19:36:23.377

基于@Jabir 的回答

用于交换任何类型的对象（不仅仅是整数）

```
public static <T> void shuffleList(List<T> a) {
    int n = a.size();
    for (int i = 0; i < n; i++) {
      int change = i + Random.nextInt(n - i);
      swap(a, i, change);
    }
  }

  private static <T> void swap(List<T> a, int i, int change) {
    T helper = a.get(i);
    a.set(i, a.get(change));
    a.set(change, helper);
  } 
```

# sql - 选择查询：from 子句有多个表，但我希望 where 子句仅对两个表有条件

> ID：16014582
> 
> 赞同：0
> 
> 时间：2013-04-15T11:57:39.973
> 
> 标签：sql, select, where

例如：

```
SELECT aa.name, aa.id
    FROM ba_acct_memo aa, acct_mast bb
    WHERE (aa.cod_acct_no=bb.cod_acct_no AND aa.flg_mnt_status='U' 
      and bb.flg_mnt_status='A') 
```

给出 1 行（例如）

但

```
SELECT aa.name, aa.id
    FROM ba_acct_memo aa, acct_mast bb, college cc
    WHERE (aa.cod_acct_no=bb.cod_acct_no AND aa.flg_mnt_status='U'
      and bb.flg_mnt_status='A') 
```

给出与第一个查询相同的结果，但给出的结果与大学表中的行数一样多。

但它应该像第一个查询一样工作。

有人可以解释我的查询的奇怪行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:28:11.723

以下步骤将帮助您了解（内部）加入。

```
 --Create Table 1 :
            Create Table #Table1 
            (
                Roll_No INT ,
                Student_Name Varchar(50)
            )
            Go

            --Create Table 2 :
            Create Table #Table2
            (
                Roll_No INT, 
                Student_Address Varchar(200)
            )
            Go

            --Create Table 3 :
            Create Table #Table3
            (
                Roll_No INT, 
                 Student_Contact_No Varchar(10) 
            )
            Go

            -- Insert Values into #Table1: 
            Insert into #Table1 Values ('1','John')
            Insert into #Table1 Values ('2','Alex')
            Insert into #Table1 Values ('3','Mike')
            Insert into #Table1 Values ('4','Steve')
            Insert into #Table1 Values ('5','Jack')
            Insert into #Table1 Values ('6','Vicky')
            Insert into #Table1 Values ('7','Sid')
            Insert into #Table1 Values ('8','Tom')

            -- Insert Values into #Table2: 
            Insert into #Table2 Values ('1','1st Street')
            Insert into #Table2 Values ('2','2rd Street')
            Insert into #Table2 Values ('3','3rd Street')
            Insert into #Table2 Values ('4','4th Street')
            Insert into #Table2 Values ('5','5th Street')
            Insert into #Table2 Values ('6','6th Street')
            Insert into #Table2 Values ('7','7th Street')
            Insert into #Table2 Values ('8','8th Street')

            -- Insert Values into #Table3: 
            Insert into #Table3 Values ('1','123-123')
            Insert into #Table3 Values ('2','123-111')
            Insert into #Table3 Values ('3','123-122')
            Insert into #Table3 Values ('4','123-125')
            Insert into #Table3 Values ('5','123-126')
            Insert into #Table3 Values ('6','123-116')
            Insert into #Table3 Values ('7','123-145')
            Insert into #Table3 Values ('8','123-132')

            --View Data :
            Select * from #Table1

            Select * from #Table2

            Select * from #Table3

            -- First Query :  (With Out Third Table) : 

            Select A.Roll_No,A.Student_Name,B.Student_Address from #Table1 A, #Table2 B 
            Where a.Roll_No = B.Roll_No
            and a.Roll_No = 1

            --It will Retrun One Record. If you add third table in this query with out  join with any other tables ( Table 1 and Table 2 )

            -- Secord Query :

            Select A.Roll_No,A.Student_Name,B.Student_Address from #Table1 A, #Table2 B , #Table3 C
            Where a.Roll_No = B.Roll_No
            and a.Roll_No = 1

            --It will return 8 Same Records. (Because Table 3 having 8 Records) 
            --You can understand when execute why it is return 8 records.

            -- Third Query : 
            Select *  from #Table1 A, #Table2 B , #Table3 C
            Where a.Roll_No = B.Roll_No
            and a.Roll_No = 1

            --Delete some records from #Table 3 :
            Delete #Table3 Where Roll_No > 5

            --Execute again Third Query :

            -- Third Query : 
            Select *  from #Table1 A, #Table2 B , #Table3 C
            Where a.Roll_No = B.Roll_No
            and a.Roll_No = 1

            --Clean Up:
            Drop table #Table1
            Drop table #Table2
            Drop table #Table3 
```

# windows - 在 Windows 中，我可以确定特定适配器上是否有 Internet 连接

> ID：16014583
> 
> 赞同：1
> 
> 时间：2013-04-15T11:57:40.983
> 
> 标签：windows, networking, adapter

有什么方法可以确定特定适配器上是否存在 Internet 连接...这不仅包括 IP 地址的存在，还包括实际验证的连接。

前任。Wifi 适配器上的 InternetCheckConnection 之类的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:01:25.143

答案在[Microsoft Windows 网络列表管理器 API中](http://msdn.microsoft.com/en-us/library/ee264321%28v=vs.85%29.aspx)

本文提供了一个示例，其中`pNetwork`是您感兴趣的特定网络的规范：

```
NLM_CONNECTIVITY nlmConnectivity;
hr = pNetwork->GetConnectivity(&nlmConnectivity);
if (nlmConnectivity & NLM_CONNECTIVITY_IPV4_INTERNET)
{
// "IPv4 internet connectivity";
}
if (nlmConnectivity & NLM_CONNECTIVITY_IPV6_INTERNET)
{
// "IPv6 internet connectivity";
} 
```

# php - Jquery-toggle on click 功能，在单击时不起作用。但它适用于双击

> ID：16014585
> 
> 赞同：0
> 
> 时间：2013-04-15T11:58:00.180
> 
> 标签：php, javascript, ajax, jquery

嗨，我的切换功能有一些问题，它只能在双击而不是单击时工作，所以任何人都可以帮助我解决这个问题。

下面是我的 HTML 代码：

```
 <div class="search_result_per_page">
    <dl class="selectcsdd perpage">
    <dt>
    <a href="javascript:void(0);" rel="nofollow">
    <span id="dropdownArrow" class="close">Items per page</span>
    </a>
   </dt>
   <dd>
   <ul style="display: none;">
  <li>
  <li>
  <li>
  </ul>
  </dd>
  </dl>
  </div> 
```

**当我点击span id="dropdownArrow"**时，我想切换 UL 。但它只在双击时切换。为此编写的 Jquery 代码如下。

```
 $(document).ready(function($)
       {
          $(".selectcsdd.perpage dt a").click(function() { 
                $(".selectcsdd.perpage dd ul").toggle(function(){               
            var arrow = $(".selectcsdd.perpage #dropdownArrow").attr('class');
                if(arrow=='close'){
                $(".selectcsdd.perpage #dropdownArrow").attr('class','open');
            }
            else if(arrow=='open'){
                $(".selectcsdd.perpage #dropdownArrow").attr('class','close');
            }
        });
    });
    $(".selectcsdd.sortby dt a").click(function() {
        $(".selectcsdd.sortby dd ul").toggle(function(){
            var arrow = $(".selectcsdd.sortby #dropdownArrow").attr('class');
            if(arrow=='close'){
                $(".selectcsdd.sortby #dropdownArrow").attr('class','open');
            }
            else if(arrow=='open'){
                $(".selectcsdd.sortby #dropdownArrow").attr('class','close');
            }
        });
    });

    $(document).bind('click', function(e) {
        var $clicked = $(e.target);
        if (! $clicked.parents().hasClass("open"))
            $(".selectcsdd.perpage dd ul").hide();
            $(".selectcsdd.sortby dd ul").hide();
    });
}); 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:42:45.337

尝试这个：

```
$(document).ready(function($) {

    $(".selectcsdd.perpage dt a").click(function(e) { 
        $(".selectcsdd.perpage dd ul").toggle(function(){               
            var arrow = $(e.target).attr('class');
            if(arrow=='close'){
                $(".selectcsdd.perpage #dropdownArrow").attr('class','open');
            }
            else if(arrow=='open'){
                $(".selectcsdd.perpage #dropdownArrow").attr('class','close');
            }
            if (! e.class == 'open'){
                $(".selectcsdd.perpage dd ul").hide();
                $(".selectcsdd.sortby dd ul").hide();
            }
        });
    });
    $(".selectcsdd.sortby dt a").click(function() {
        $(".selectcsdd.sortby dd ul").toggle(function(){
            var arrow = $(".selectcsdd.sortby #dropdownArrow").attr('class');
            if(arrow=='close'){
                $(".selectcsdd.sortby #dropdownArrow").attr('class','open');
            }
            else if(arrow=='open'){
                $(".selectcsdd.sortby #dropdownArrow").attr('class','close');
            }
        });
    });
}); 
```

将单击事件绑定到文档和链接导致错误。该链接将捕获该事件并使文档一无所有。既然事件只关心链接，为什么不在事件发生时处理所有事情呢？

--lol迟到20分钟--

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:13:34.580

您正在使用`.click()`和`.bind('click')`在同一个元素上，这似乎导致了问题。如果你删除`.bind()`它工作正常

# .htaccess - htaccess 全局ip地址，ipv4，默认网关混淆

> ID：16014590
> 
> 赞同：0
> 
> 时间：2013-04-15T11:58:15.250
> 
> 标签：.htaccess, default, ipv4, gateway

请原谅这个琐碎的问题，但我不明白如何正确使用 IP 地址来拒绝访问我的网站。假设我有网站 www.mywebsite.com。假设我的办公机器有以下 3 个 IP 地址：

```
ipv4: 192.1.2.3
default gateway: 192.1.2.345
and the global ip for my network: 456.34.56.78 (retrieved using www.globalip.com) 
```

现在我想向我网络中的任何用户授予访问权限，因此我认为正确使用的号码是我办公室中所有机器通用的全局 ip 456.34.56.78：

我正在使用以下代码：

```
# redirect all visitors to alternate site but retain full access for you
ErrorDocument 403 http://www.bbc.com
Order deny,allow
Deny from all
Allow from 456.34.56.78 
```

但它不工作。它正在重定向我网络中的所有机器以及外部机器。我做错了什么？谢谢您的帮助

# r - 通过 MLE 进行 CIR 模型估计

> ID：16014600
> 
> 赞同：1
> 
> 时间：2013-04-15T11:58:35.853
> 
> 标签：r, estimation, stochastic-process

我想通过 R 中的 ML 来估计 CIR 模型参数。它如下所示：

dr=(theta1-theta2*r) + theta3*sqrt(r)*dW。

该方法在 Iacus 的书“Option Pricing and Estimation of Financial Models with R”附带的 sde packege 中实现。

在那里，在示例（第 5 章）中，实现了速率估计并计算了系数 theta1-3。现在我想用我的数据集（X2）做同样的事情。

```
library(quantmod)

library(sde)
library(Ecdat)
data(Irates)
X1=Irates[,"r1"]
getSymbols(Symbols="DTB4WK",src="FRED")
X2=interpNA(coredata(DTB4WK))
X2[X2<0]=0

X=X2
CIR.logistic = function(theta1, theta2,theta3) {
  n=length(X)
  dt=deltat(X)
  cat(theta1,"  ",theta2, "  ",theta3,"  \n")
  return(-sum(dcCIR(x=X[2:n],Dt=dt,x0=X[1:(n-1)], theta=c(theta1,theta2,theta3),log=TRUE)))
}
mle(CIR.logistic,start=list(theta1=0.1, theta2=0.1,theta3=0.1),method='L-BFGS-B',
    lower=c(0.01,0.01,0.01),upper=c(1,1,1)) 
```

我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:27:31.653

在 CIR 模型中，该比率几乎肯定是非零的：去除负值是不够的。

```
# Also remove zeroes (if there are many of them, it is probably not a good idea)
X[ X <= 0 ] <- .1

# Then, you code works
mle( CIR.logistic,
     start = list(theta1=0.1, theta2=0.1, theta3=0.1),
     method = 'L-BFGS-B',
     lower = c(0.01,0.01,0.01),
     upper = c(1,1,1) ) 
```

# php - PHP MySQLi 准备语句和获取列的子集

> ID：16014602
> 
> 赞同：4
> 
> 时间：2013-04-15T11:58:38.233
> 
> 标签：php, mysql, mysqli

我正在使用 MySQLi 和 PHP 来调用带有准备好的语句的存储 MySQL 例程。它返回一个包含几十列的结果集。

```
$stmt = $dbconnection->prepare("CALL SomebodysDbProcedure(?);");
$stmt->bind_param("s", $idvalue);
$stmt->execute();
$stmt->bind_result($col1, $col2, $col3, ...); 
```

但是，我只对输出列的*一个子集感兴趣。*

[文档](http://php.net/manual/en/mysqli-stmt.bind-result.php)说`bind_result()`需要处理*完整*的返回列集：

> 请注意，所有列都必须在`mysqli_stmt_execute()`调用之后和之前绑定`mysqli_stmt_fetch()`。

我是否还需要为那些我不感兴趣的列添加代码？如果是这样，如果将来扩展 MySQL 存储的例程结果集，甚至重新排列列，应用程序将中断。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:13:39.557

我假设您只是不想为 bind_result() 函数写出所有这些变量。您可以使用如下函数代替 bind_result() 函数。将您的 $stmt 对象传递给它，您将获得一个包含所需字段的标准对象数组。

```
function getResult($stmt)
{
    $valid_fields = array('title', 'date_created'); // enter field names you care about

    if (is_a($stmt, 'MySQLi_STMT')) {
        $result = array();

        $metadata = $stmt->result_metadata();
        $fields = $metadata->fetch_fields();

        for (; ;)
        {
            $pointers = array();
            $row = new \stdClass();

            $pointers[] = $stmt;
            foreach ($fields as $field)
            {
                if (in_array($field->name, $valid_fields)) {
                    $fieldname = $field->name;
                    $pointers[] = &$row->$fieldname;
                }
            }

            call_user_func_array('mysqli_stmt_bind_result', $pointers);

            if (!$stmt->fetch())
                break;

            $result[] = $row;
        }

        $metadata->free();

        return $result;
    }
    return array();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:33:05.847

Jonathan Mayhak 的回答指引我朝着正确的方向前进。在 PHP [bind_result 页面上](http://php.net/manual/en/mysqli-stmt.bind-result.php)，nieprzeklinaj 提供了一个名为`fetch()`. 有用; 像这样使用它：

```
$stmt = $conn->prepare("CALL SomebodysDbProcedure(?);");
$stmt->bind_param("s", $idvalue);
$stmt->execute();
$sw = (array)(fetch($stmt));
$s = $sw[0]; // Get first row
$dateCreated = $s['date_created']; // Get field date_created 
```

**编辑：**不幸的是，同一 PHP 文件中的连续调用似乎不适用于此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:15:38.910

尝试使用 fetch_fields php 方法：

```
array mysqli_fetch_fields ( mysqli_result $result ) 
```

[http://php.net/manual/en/mysqli-result.fetch-fields.php](http://php.net/manual/en/mysqli-result.fetch-fields.php)

# r - 使用 zoo/xts 删除 R 中的特定值

> ID：16014604
> 
> 赞同：4
> 
> 时间：2013-04-15T11:58:45.957
> 
> 标签：r, time-series, xts, zoo, missing-data

我关于“​​在 R 中使用线性插值添加缺失的 xts/zoo 数据”的另一个问题，您可以在此处找到在 R 中使用线性插值[添加缺失的 xts/zoo 数据](https://stackoverflow.com/questions/16011790/add-missing-xts-zoo-data-with-linear-interpolation-in-r)。

但总的来说，我的数据还有一个问题——我确实有没有意义的“错误”值：

```
"2012-04-09 05:03:00",2
"2012-04-09 05:04:00",4
"2012-04-09 05:05:39",-10
"2012-04-09 05:09:00",0
"2012-04-09 05:10:00",1 
```

所以替换缺失的日期有效：

```
y <- merge(y, zoo(,seq(start(y),end(y),by="min")), all=TRUE)
y <- na.approx(y) 
```

但正如您所见，-10 没有意义，并且值不在 min:sec 处，值为 00。我需要像 na.rm 这样的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:03:41.677

目前尚不清楚您想做什么。但我猜你想从 xts 对象中删除一些异常值。如果您想要像“na.rm”这样的解决方案，一个想法是替换不需要的值，`NA`然后使用`na.omit`.

```
x <- read.zoo(text='
"2012-04-09 05:03:00",2
"2012-04-09 05:04:00",4
"2012-04-09 05:05:39",-10
"2012-04-09 05:09:00",0
"2012-04-09 05:10:00",1',sep=',',tz='')

x[x == -10] <- NA
na.omit(x)

                    x
2012-04-09 05:03:00 2
2012-04-09 05:04:00 4
2012-04-09 05:09:00 0
2012-04-09 05:10:00 1 
```

**编辑**

要获取每个日期的条件，您可以查看 index(x) 并对其进行格式化。

```
format(index(dat),'%S')
[1] "00" "00" "39" "00" "00" 
```

但在这里我使用内置`.indexsec`（另见.indexmin，.indexhour，..）

```
dat[.indexsec(dat) != 0]
2012-04-09 05:05:39 
                -10 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T13:03:47.613

以下是如何用 NA 替换低于阈值（在本例中为 0）的值。之后就可以跑`na.approx`了。

```
# read in
Lines <- '"2012-04-09 05:03:00",2
"2012-04-09 05:04:00",4
"2012-04-09 05:05:39",-10
"2012-04-09 05:09:00",0
"2012-04-09 05:10:00",1
'
data2 <- as.xts(read.zoo(text = Lines, sep = ",", tz = ""))

# perform calculation
data2[data2<0] <- NA 
```

# accessibility - 网站可以采取哪些简单的步骤来改善残障访问者的可访问性？

> ID：16014605
> 
> 赞同：2
> 
> 时间：2013-04-15T11:58:47.560
> 
> 标签：accessibility, role, wai-aria

**更新 2：再次编辑以更清楚地关注残疾游客**

单独应用 ARIA 地标角色是一项重大的可访问性改进，还是一项收效甚微的折中措施？网站是否可以做其他相对简单的事情来显着提高可访问性？

*   我所说的可访问性是指残障人士的可用性，例如视力障碍、使用鼠标困难等。
*   简单来说，我的意思是对网站主要模板上的页面结构进行大规模更改，而不是对每个页面进行手动调整。

例如，应用 ARIA 标志性角色的一个步骤对于许多网站来说都是可行的，只需更新他们的博客或内容管理软件模板。整整九码来注释每个小部件的交互状态要困难得多，除非底层平台已经这样做了。

以下是网站可以采取的一些可能步骤，所有这些步骤都是相对容易实现的：

*   将所有内容放在 HTML5 语义容器标签中，特别是文章、旁边、导航、部分、图、无花果标题、页脚、页眉和主
*   将 ARIA 地标角色分配给内容容器和 HTML 标题
*   将 aria-labelledby 和 aria- describeby 属性分配给适当的内容容器
*   为内容容器设置标题属性（不太理想，因为它被所有人看到）

其中哪些值得做？综上所述，它们是否会对残疾人的无障碍环境产生真正的影响？还有其他简单的东西可以提高可访问性吗？

（我特别不是在谈论表单或交互性，那是另一个话题。我也不是在谈论确保 HTML 和图像颜色具有良好的对比度，不是因为它不重要，而是因为必须在案例中完成- 逐个基本，而不是在全局模板中。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T00:52:10.663

您将获得最大的可访问性影响，重点是强大的键盘导航和周到的 DOM 结构，包括清晰的标题轮廓和带有 HTML 和 ARIA 的语义部分。键盘导航是屏幕阅读器用户和许多行动不便的人的主要导航模式，因此您的网站中的任何操作或工作流程都需要一个基础。

请务必使用 HTML5 分段元素。除了使您的标记和 CSS 规则更优雅之外，它还为屏幕阅读器更清晰地定义了页面结构，并使页面导航更容易。许多元素的语义[已经](http://tink.co.uk/2013/02/screen-reader-support-for-html5-sections/)在 NVDA、JAWS 和 VoiceOver 中得到支持——尽管不一致。

ARIA 地标在这 3 个屏幕阅读器中[也有很好的支持](http://blog.paciellogroup.com/2011/07/html5-accessibility-chops-aria-landmark-support/)，特别是作为跳过冗余标题内容的一种方式。`role='main'`在包含元素上使用您的主要内容。

`aria-describedby`并且`aria-labelledby`对于复杂的形式和模态很有用。不过，在依赖这些属性之前，请专注于创建连贯的阅读顺序以及清楚地标记和分组表单元素。具体来说，使用`for`属性将`<label>`s 与其控件关联，使用`<fieldset>`s with`<legend>`对相关控件进行分组。

一般避免使用该`title`属性。无法通过键盘焦点显示其内容，因此对于不使用屏幕阅读器的纯键盘用户（更不用说移动设备）而言，它实际上是无用的。

根据您内容的范围，您需要比这些建议更进一步以获得强大的可访问性，但您在尝试首先解决容易获得的成果方面有正确的想法。它会走很长一段路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T14:08:09.530

通过将其标记为[section508](/questions/tagged/section508 "显示标记为“section508”的问题") *，它告诉我您正在制作的网站是为美国联邦政府或采用该标准的州提供的。第 508 节概述[了残疾人可以理解的标准](https://www.section508.gov/index.cfm?fuseAction=stdsdoc#Web)。一些机构制定了自己的清单，既可以扩展标准，也可以模仿标准；例如[HHS 的清单](http://www.hhs.gov/web/508/accessiblefiles/checklists.html)。我建议您与该机构的第 508 节协调员联系，了解他们为确定 508 合规性所做的工作。但是，如果您希望政府机构使用您的产品，我建议您为其[填写 VPAT](http://www.itic.org/public-policy/accessibility)。

如果你想建立可访问的网站，一般来说，我建议遵循[WCAG 2.0](http://www.w3.org/WAI/intro/wcag.php)

> 单独应用 ARIA 地标角色是一项重大的可访问性改进，还是一项收效甚微的折中措施？

ARIA 在一定程度上有助于可访问性。ARIA 让您将页面的某些区域标记为热点。我建议你看看我的可访问性或[我的关于 ARIA](https://stackoverflow.com/search?q=user%3A1276124+ARIA)[的答案](https://stackoverflow.com/search?q=user:1276124+%5Baccessibility%5D)

> 网站是否可以做其他相对简单的事情来显着提高可访问性？

有些事情很简单，我建议查看我上面发布的链接作为起点，然后询问有关实施的问题。[WebAIM 也有一些](http://webaim.org/resources/)关于可访问性的资源。

* * *

## 来自评论

> 我正在寻找一个网站可以采取的对用户有实际实际好处的行动，即使他们不能达到第 508 条要求的程度

我建议不要以这种心态继续前进。第 508 节的所有规定或 WCAG 的指导方针都有实际好处，问题是哪些适用于您的站点/应用程序。例如，如果您有一个带有一个标题行和/或一列标题的表格，则条款 (g) 将适用：

> (g) 应为数据表确定行和列标题。

但是，如果您有一个更复杂的表 (g) 将不适用，而是 (h) 将是：

> (h) 对于具有两个或多个逻辑级别的行或列标题的数据表，应使用标记来关联数据单元格和标题单元格。

然而，在 WCAG 中，没有这样的表格指南，它隐藏在[1.3.1、信息和关系](http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html)下，并在[WCAG 2.0 技术 H51](http://www.w3.org/TR/WCAG20-TECHS/H51.html)中有详细说明。我可以对 508 的每个条款或 WCAG 2.0 的指导方针提出相同的论点。

> 标题是迄今为止最常用的页内导航，大多数读者用户现在都知道或 ARIA 地标，但使用习惯却大不相同。

是的，HTML 标题是最广泛使用的导航方法，因为它们自 HTML 2.0（1995 年 11 月）以来一直存在。但是，对于使用屏幕阅读器和使用 Opera 网络浏览器的人来说，它们只是一个导航选项。Firefox 可能有一个附加组件，但没有查找。如果您要在您的网站/应用程序中实施标题*（我推荐）*，请注意您使用的标题。它们应该形成某种层次结构，所以不要因为字体的外观而从 a 跳到`<h1>`an ；`<h4>`相反，使用`<h2>`, 并使用 CSS 重新设置样式。

这对于 ARIA 也是一样的。ARIA 导航仅适用于 JAWS、NVDA 和我相信 WindowEyes，但对于所有其他辅助技术，不适用。Firefox 有一个附加组件，用于 ARIA 地标的基本导航（我个人不喜欢它）。然而，在浏览器实现导航 ARIA 地标的内置方式之前，您不能只是将它们弹出并说您的网站现在可以完全访问。

*-*保留有关第 508 节的部分以供参考，因为问题最初是用它标记的。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T02:59:41.893

几个简单但有效的步骤：

确保非鼠标用户可以看到焦点所在的元素。许多 CSS 重置样式会删除浏览器的默认设置。虚线比颜色好

```
button:focus {
    outline: dotted 1px #000;
}

a:focus {
    outline: dotted 1px #000;
} 
```

但如果使用颜色，则应满足颜色对比度要求。查看[https://addons.mozilla.org/en-us/firefox/addon/juicy-studio-accessibility-too/](https://addons.mozilla.org/en-us/firefox/addon/juicy-studio-accessibility-too/)

将“跳转到主上下文链接”作为页面上的第一个选项卡项。看看[http://www.anz.com.au](http://www.anz.com.au)就是一个很好的例子。只需点击它。

请务必注意，屏幕阅读器用户可以仅使用标题（H1、H2 等）进行导航，因此这一点尤为重要。另请注意，当他们到达表单或表单元素时，他们还使用向下箭头来导航内容和选项卡。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T04:22:28.357

减少到达某个地方所需的点击量，这也与确保从您的主页轻松访问网站上最常用的功能密切相关。此外，请确保在整个网站的每个页面上都可以轻松找到您网站的相同“重要”用途。

您可能认为只需单击主页，然后从那里访问生命体征很容易，但用户往往真的不喜欢这种架构。虽然，那是针对主流普通用户的。如果您要迎合特定类型的用户，则需要调整整个架构。

分析是关键……祝你好运！

# javascript - 使用 Jquery 的 Ajax 函数处理来自 ASP.NET Web 服务的响应

> ID：16014607
> 
> 赞同：0
> 
> 时间：2013-04-15T11:58:52.887
> 
> 标签：javascript, jquery, ajax, json, web-services

我有来自 ASP.NET Web 服务的响应

```
<string xmlns="http://Walkthrough/XmlWebServices/">
{"approverName":"","emailAddress":"","companyName":"ABC","address":{"streetAddress1":"12 BlahBlah","streetAddress2":"","state":"ON","zipCode":"","country":"SO","phoneNumber":""},"tabledata:"[{"vendorPart":"AAAAA","partDescription":"N/A","price":"0.00","quantity":"28"},{"vendorPart":"BBBBBBB","partDescription":"N/A","price":"0.00","quantity":"3"},{"vendorPart":"CCCCCC","partDescription":"N/A","price":"0.00","quantity":"25"}]}
</string> 
```

使用此 jquery 函数调用它：

```
$(document).ready(function() {
                $.ajax({
                type: "POST",
                url: "http://www.webservice.com/blahblah.asmx/blahb123",
                data: "tnWsGuid=TEST1",
                dataType: "script",
                    success: function(msg)
                    {
                        alert("sucess")
                    },
                    error: function(e)
                    {
                        alert(JSON.stringify(e));                       
                    }
                    });
            }); 
```

我的第一个问题是，我有 403 个禁止使用此功能的问题，但省略 contentType 改变了这一点。然后我遇到了 XML 解析问题，一时兴起将 dataType 更改为脚本修复了该问题并给了我一个响应，然后我点击了成功功能。为什么这行得通？

我也想知道如何打印出这些数据，因为试图将其视为 json 是行不通的，XML 也行不通。

在 chrome 中，我收到此警告：

```
Resource interpreted as Script but transferred with MIME type text/xml: "http://www.webservice.com/blahblah.asmx/blahb123?tnWsGuid=TEST1&_=1366025879568." 
```

附加到此网址末尾的部分让我感到困惑（在 TEST1 之后）。在控制台中，我也在 chrome 中收到此错误：

```
Uncaught SyntaxError: Unexpected token < 
```

Firebug 给了我：

```
SyntaxError: syntax error
 [Break On This Error]  

<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://Walkthrough/XmlWebServices/">
    {"approverName":"","emailAddress":"","companyName":"ABC","address":{"streetAddress1":"12 BlahBlah","streetAddress2":"","state":"ON","zipCode":"","country":"SO","phoneNumber":""},"tabledata:"[{"vendorPart":"AAAAA","partDescription":"N/A","price":"0.00","quantity":"28"},{"vendorPart":"BBBBBBB","partDescription":"N/A","price":"0.00","quantity":"3"},{"vendorPart":"CCCCCC","partDescription":"N/A","price":"0.00","quantity":"25"}]}
    </string> 
```

所以基本上现在 dataType 是脚本，我得到了某种响应，但仍然不知道如何解析这些数据。最好变成一个html表格。

我希望你能帮忙！谢谢阅读！

编辑：

这是 Firebug[在此处记录的标头信息的链接](http://i.imgur.com/GNEQxJl.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:58:29.807

当服务器发送一个 json 数组时，您需要将数据类型设置为 json。请参阅此处的数据类型部分[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:47:37.943

我已经解决了这个问题，并成功地让它在 IE 上返回数据集（由于两者的异步问题，我希望在托管此页面时能够解决这个问题，因此尚未在 Chrome 和 Firefox 上工作。我`$.support.cors = true;`在 ajax 函数和我的新成功函数正确显示了如下数据：

`function(data, status, jqxhr) { xmlString = data;
alert(xmlString); }`

# java - 从 xml 中提取 HTML

> ID：16014608
> 
> 赞同：0
> 
> 时间：2013-04-15T11:58:54.237
> 
> 标签：java, html, xml

我想从 xml 文件中提取 html 页面。请问有什么想法吗？

```
 <?xml ....>
      <first>
      </first>

         <second>
         </second>
      <xhtml>
          <html>
              .....some html code here
          </html>
      </xhtml> 
```

我想从上面提取html页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:04:42.133

因为 xml 和 html 标记相似，所以任何 xml 解析器都可能存在问题。我建议当您将 html 数据保存在 xml 文件中时，对其进行编码以防止 xml 解析器出现问题。然后，当您从 xml 中调用数据时，您只需对其进行解码以供使用。

```
<?xml ....?
<first></first>
<second></second>
<markup>
    &lt;html&gt;
        code here
    &lt;/html&gt;
</markup> 
```

当您解码标记部分时，它看起来像这样

```
<html>
    code here
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:22:48.650

您可能会发现这有一些用处：

[http://www.w3schools.com/xml/xml_parser.asp](http://www.w3schools.com/xml/xml_parser.asp)

您可以使用 JavaScript 从 XML 中提取 HTML。然后，您可以使用 JavaScript 在您的 HTML 页面上创建一个元素并将 HTML 转储到其中。唯一的问题是您收到的 XML 数据似乎有一个 HTML 标记。

如果要将内容添加到现有页面，则必须去除 html 和 body 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-12T01:00:54.140

如果你使用python，提取可以很容易。

```
from simplified_scrapy.simplified_doc import SimplifiedDoc 
html='''
 <?xml >
    <first>
    </first>
        <second>
        </second>
    <xhtml>
        <html>
            .....some html code here
        </html>
    </xhtml>
'''
doc = SimplifiedDoc(html)
html = doc.xhtml.html
print (html) 
```

首先你需要使用 pip 安装 simple_scrapy。

```
pip install simplified_scrapy 
```

# php - php mysql准备语句不起作用

> ID：16014612
> 
> 赞同：-1
> 
> 时间：2013-04-15T11:59:07.020
> 
> 标签：php, mysqli, prepared-statement

我目前正在学习 php 和 mysql，并且正在尝试构建一个身份验证网页，用户可以在其中注册并能够登录到受成员保护的页面。注册过程运行良好，但由于某种原因，我的登录执行脚本中出现此错误。

```
Fatal error: Call to a member function prepare() on a non-object in /homepages/8/d459264879/htdocs/tymbi_reg/login_exec.php on line 40 
```

第 40 行在这里 if($stmt = $mysqli->prepare("SELECT * FROM member WHERE username=? AND password =?"))

我一直在努力寻找问题所在，但没有成功。

这是我在登录脚本中使用的代码

```
<?php

session_start();
require_once('connection.php');
$errmsg_arr = array();
$errflag = false;
$username = $_POST['username'];
$password = $_POST['password'];

if($username == '') {
    $errmsg_arr[] = 'Username missing';
    $errflag = true;
}
if($password == '') {
    $errmsg_arr[] = 'Password missing';
    $errflag = true;
}

if($errflag) {
    $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
    session_write_close();
    header("location: index.php");
    exit();
} else {

    if($stmt = $mysqli->prepare("SELECT * FROM member WHERE username=? AND password =?"))
    {
        $stmt->bind_param("ss", $username, $password);
        $stmt->execute();
        $stmt->store_results();

        if($stmt->num_rows > 0)
        {

            $SESSION['username'] = $username;
            header("Location: home.php");

        }

        else

        {

            $error['alert'] = "Username or password are incorrect";

        }

    }   

}

?> 
```

这是我的 connection.php 代码

```
<?php
$con=new mysqli("test","test","test","test");
// Check connection
if (mysqli_connect_errno())
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
?> 
```

是的，我已经用我的详细信息替换了测试值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:02:59.857

确保您正确定义[了 $mysqli](http://www.php.net/manual/en/mysqli.construct.php)

```
$mysqli = new mysqli('host','user','pass','database_name'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:02:55.627

你还没有定义`$mysqli`- 你的连接。这就是为什么它不起作用。

除非它在`connection.php`​​. 你能试试 var_dump`$mysqli`看看你得到了什么吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:11:24.613

```
$link = mysqli_connect("localhost", "user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
} 
```

这有助于读取连接错误。

或者你也可以使用

```
try
{
//your connection
}catch(Exception $e)
{
  echo $e->getMessage();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-08T10:41:08.273

我建议全力使用 Mysqli 对象，而不是混入程序函数。如果您像这样编写连接逻辑，您会更早发现错误：

```
$con = new mysqli("host","user","pass","db");

if ($mysqli->errno)
{
    echo "Failed to connect to MySQL: " . $mysqli->error;
} 
```

OP 将连接声明为**$con**，然后尝试将其访问为**$mysqli**。mysqli_connect_errno() 报告**$con**没问题，但是**$mysqli->errno 会失败**，因为此时 $mysqli 不是对象，因为他将连接命名为 $con 而不是 $mysqli

# json - JSON 中的长字符串值

> ID：16014616
> 
> 赞同：0
> 
> 时间：2013-04-15T11:59:13.630
> 
> 标签：json, jersey, jackson, jax-rs

我正在写一个`MessageBodyWriter`for `java.util.Properties`。

```
@Override
public void writeTo(final Properties t, final Class<?> type,
                    final Type genericType, final Annotation[] annotations,
                    final MediaType mediaType,
                    final MultivaluedMap<String, Object> httpHeaders,
                    final OutputStream entityStream)
    throws IOException, WebApplicationException {

    LOGGER.log(Level.INFO, "writeTo({0}, {1}, {2}, {3}, {4}, {5}, {6})",
               new Object[]{t, type, genericType, annotations, mediaType,
                            httpHeaders, entityStream});

    if (MediaType.APPLICATION_XML_TYPE.isCompatible(mediaType)) {
        t.storeToXML(entityStream, null);
        return;
    }

    if (MediaType.APPLICATION_JSON_TYPE.isCompatible(mediaType)) {

        final JsonGenerator generator =
            JSON_FACTORY.createGenerator(entityStream);

        generator.writeStartObject();

        for (String stringPropertyName : t.stringPropertyNames()) {
            generator.writeFieldName(stringPropertyName);
            generator.writeString(t.getProperty(stringPropertyName));
            //generator.writeStringField(stringPropertyName,
            //                           t.getProperty(stringPropertyName));
        }

        generator.writeEndObject();

        return;
    }

    throw new WebApplicationException(
        Response.Status.UNSUPPORTED_MEDIA_TYPE);

} 
```

当我请求 for`application/xml`时，它似乎工作正常。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
  <entry key="java.library.path">C:\Program Files\Java\jdk1.7.0_17\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Programs\cygwin\usr\local\bin;C:\Programs\cygwin\bin;C:\Program Files (x86)\PHP;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Program Files (x86)\Wizvera\Delfino;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files\CollabNet\Subversion Client;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0;C:\Programs\cygwin\bin;C:\Programs\apache-maven-3.0.5\bin;E:\programs\apache-ivy-2.3.0\bin;E:\programs\apache-ant-1.9.0\bin;C:\Program Files\Java\jdk1.7.0_17\bin;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\QuickTime\QTSystem;C:\Program Files\SlikSvn\bin;C:\Programs\emacs-24.2\bin;C:\Program Files (x86)\ESTsoft\ALZip;C:\Programs\android-sdk-windows\tools;C:\Programs\android-sdk-windows\platform-tools;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Common Files\Autodesk Shared;C:\Program Files\Common Files\Autodesk Shared;C:\Program Files (x86)\Graphviz2.26.3\bin;C:\Programs\android-sdk-windows\tools;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn;C:\Program Files\Microsoft SQL Server\100\Tools\Binn;C:\Program Files\Microsoft SQL Server\100\DTS\Binn;C:\Programs\db-derby-10.8.2.2-bin\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\QuickTime\QTSystem;C:\Program Files\Microsoft Windows Performance Toolkit;C:\Program Files\Microsoft SDKs\Windows\v7.1\bin;C:\Program Files (x86)\Microsoft WSE\v3.0\Tools;C:\Program Files\Microsoft SQL Server\110\Tools\Binn;C:\Program Files (x86)\Graphviz 2.28\bin;C:\Program Files (x86)\ESTsoft\ALSee\x64;.</entry>
</properties> 
```

但是当我试图在输入时`application/json`输出结果修剪`java.library.path`。

```
{
    "java.vendor": "Oracle Corporation",
    "sun.java.launcher": "SUN_STANDARD",
    "catalina.base": "C:\\Programs\\cygwin\\tmp\\gfembed1008540206574562263tmp",
    "sun.management.compiler": "HotSpot 64-Bit Tiered Compilers",
    "catalina.useNaming": "false",
    "os.name": "Windows 7",
    "sun.boot.class.path": "C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\lib\\rt.jar;C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\lib\\sunrsasign.jar;C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\classes",
    "javax.security.jacc.PolicyConfigurationFactory.provider": "com.sun.enterprise.security.jacc.provider.SimplePolicyConfigurationFactory",
    "user.country.format": "KR",
    "sun.desktop": "windows",
    "java.vm.specification.vendor": "Oracle Corporation",
    "java.runtime.version": "1.7.0_17-b02",
    "javax.net.ssl.keyStore": "C:\\Programs\\cygwin\\tmp\\gfembed1008540206574562263tmp/config/keystore.jks",
    "user.name": "onacit",
    "web.home": "C:\\Programs\\cygwin\\tmp\\gfembed1008540206574562263tmp\\modules\\web",
    "shared.loader": "${catalina.home}/shared/classes,${catalina.home}/shared/lib/*.jar",
    "user.language.format": "ko",
    "guice.disable.misplaced.annotation.check": "true",
    "user.language": "en",
    "sun.boot.library.path": "C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\bin",
    "com.sun.aas.javaRoot": "C:\\Program Files\\Java\\jdk1.7.0_17\\jre",
    "classworlds.conf": "C:\\Programs\\apache-maven-3.0.5/bin/m2.conf",
    "java.version": "1.7.0_17",
    "com.sun.aas.instanceRootURI": "file:/C:/Programs/cygwin/tmp/gfembed1008540206574562263tmp/",
    "user.timezone": "Asia/Seoul",
    "sun.arch.data.model": "64",
    "javax.rmi.CORBA.UtilClass": "com.sun.corba.ee.impl.javax.rmi.CORBA.Util",
    "java.endorsed.dirs": "C:\\Program Files\\Java\\jdk1.7.0_17\\jre\\lib\\endorsed",
    "com.sun.aas.installRoot": "C:\\Programs\\cygwin\\tmp\\gfembed1008540206574562263tmp",
    "sun.cpu.isalist": "amd64",
    "sun.jnu.encoding": "MS949",
    "file.encoding.pkg": "sun.io",
    "package.access": "",
    "file.separator": "\\",
"java.specification.name":"JavaPlatformAPISpecification",
"java.class.version":"51.0",
"user.country":"US",
"java.home":"C: \\ProgramFiles\\Java\\jdk1.7.0_17\\jre",
"java.vm.info":"mixedmode",
"os.version":"6.1",
"com.sun.aas.productRoot":"C: \\Programs\\cygwin\\tmp",
"org.omg.CORBA.ORBSingletonClass":"com.sun.corba.ee.impl.orb.ORBSingleton",
"com.sun.aas.installRootURI":"file: /C: /Programs/cygwin/tmp/gfembed1008540206574562263tmp/",
"path.separator":";",
"java.vm.version":"23.7-b01",
"user.variant":"",
"java.awt.printerjob":"sun.awt.windows.WPrinterJob",
"sun.io.unicode.encoding":"UnicodeLittle",
"com.sun.aas.hostName":"onacit-PC",
"awt.toolkit":"sun.awt.windows.WToolkit",
"package.definition":"",
"user.script":"",
"user.home":"C: \\Users\\onacit",
"com.sun.aas.instanceName":"server",
"com.sun.aas.configRoot":"C: \\Programs\\cygwin\\tmp\\gfembed1008540206574562263tmp\\config",
"java.specification.vendor":"OracleCorporation",
"java.library.path":"C: \\ProgramFiles\\Java\\jdk1.7.0_17\\bin;C: \\Windows\\Sun\\Java\\bin;C: \\Windows\\system32;C: \\Windows;C: \\Programs\\cygwin\\usr\\local\\bin;C: \\Programs\\cygwin\\bin;C: \\ProgramFiles(x86)\\PHP;C: \\ProgramFiles(x86)\\AMDAPP\\bin\\x86_64;C: \\ProgramFiles(x86)\\AMDAPP\\bin\\x86;C: \\ProgramFiles(x86)\\Wizvera\\Delfino;C: \\ProgramFiles\\CommonFiles\\MicrosoftShared\\WindowsLive;C: \\ProgramFiles(x86)\\CommonFiles\\MicrosoftShared\\WindowsLive;C: \\ProgramFiles\\CollabNet\\SubversionClient;C: \\Windows\\system32;C: \\Windows;C: \\Windows\\System32\\Wbem;C: \\Windows\\System32\\WindowsPowerShell\\v1.0;C: \\Programs\\cygwin\\bin;C: \\Programs\\apache-maven-3.0.5\\bin;E: \\programs\\apache-ivy-2.3.0\\bin;E: \\programs\\apache-ant-1.9.0\\bin;C: \\ProgramFiles\\Java\\jdk1.7.0_17\\bin;C: \\ProgramFiles(x86)\\ATITechnologies\\ATI.ACE\\Core-Static;C: \\ProgramFiles(x86)\\QuickTime\\QTSystem;C: \\ProgramFiles\\SlikSvn\\bin;C: \\Programs\\emacs-24.2\\bin;C: \\ProgramFiles(x86)\\ESTsoft\\ALZip;C: \\Programs\\android-sdk-windows\\tools;C: \\Programs\\android-sdk-windows\\platform-tools;C: 
```

看？在为 提供价值时停止`java.library.path`。

难道我做错了什么？这是杰克逊的错吗？这是 G/F 的缓冲问题吗？

这是 System.out 为该值打印的内容。

```
C:\Program Files\Java\jdk1.7.0_17\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Programs\cygwin\usr\local\bin;C:\Programs\cygwin\bin;C:\Program Files (x86)\PHP;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Program Files (x86)\Wizvera\Delfino;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files\CollabNet\Subversion Client;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0;C:\Programs\cygwin\bin;C:\Programs\apache-maven-3.0.5\bin;E:\programs\apache-ivy-2.3.0\bin;E:\programs\apache-ant-1.9.0\bin;C:\Program Files\Java\jdk1.7.0_17\bin;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\QuickTime\QTSystem;C:\Program Files\SlikSvn\bin;C:\Programs\emacs-24.2\bin;C:\Program Files (x86)\ESTsoft\ALZip;C:\Programs\android-sdk-windows\tools;C:\Programs\android-sdk-windows\platform-tools;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Common Files\Autodesk Shared;C:\Program Files\Common Files\Autodesk Shared;C:\Program Files (x86)\Graphviz2.26.3\bin;C:\Programs\android-sdk-windows\tools;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn;C:\Program Files\Microsoft SQL Server\100\Tools\Binn;C:\Program Files\Microsoft SQL Server\100\DTS\Binn;C:\Programs\db-derby-10.8.2.2-bin\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\QuickTime\QTSystem;C:\Program Files\Microsoft Windows Performance Toolkit;C:\Program Files\Microsoft SDKs\Windows\v7.1\bin;C:\Program Files (x86)\Microsoft WSE\v3.0\Tools;C:\Program Files\Microsoft SQL Server\110\Tools\Binn;C:\Program Files (x86)\Graphviz 2.28\bin;C:\Program Files (x86)\ESTsoft\ALSee\x64;. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:02:37.687

我解决了。我需要穿上那些。

```
generator.flush();
generator.close(); 
```

# gtk - 如何更改 gtk-entry 图标大小？

> ID：16014618
> 
> 赞同：1
> 
> 时间：2013-04-15T11:59:15.597
> 
> 标签：gtk

有什么方法可以更改 gtk_entry / gtk_spin_button 的图标大小。因为使用触摸屏，我需要更大的图标。

我尝试从我的自定义主题更改 gtkrc 并添加：

```
gtk-icon-sizes = "gtk-spin-button=48,48:gtk-entry=48,48" 
```

可悲的是，这对我的旋转按钮没有影响。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:30:35.350

挖掘 gtk 源代码刚刚找到了答案，我很幸运 :)

我添加了

```
gtk-icon-sizes = "gtk-menu=48,48" 
```

在我的主题的 gtkrc 中，它最终调整了我在 gtk-entry 和 gtk-spin-button 中的图标大小。

# regex - 使用正则表达式

> ID：16014625
> 
> 赞同：0
> 
> 时间：2013-04-15T11:59:30.547
> 
> 标签：regex

我在点网中使用正则表达式做简单的事情时遇到了麻烦。假设我想找到所有包含单词“pizza”的行。我想我会做以下事情：

```
^ .* pizza .* $ 
```

这个想法是第一个字符表示行首，美元符号表示行尾，点星表示任意数量的字符。这似乎不起作用。

然后我尝试了其他不起作用的方法。我想我会在我的 Visual Basic 项目中找到所有以“Sub Page_Load”开头并以“End Sub”结尾的例程。我进行了搜索：

```
 Sub Page_Load .* End Sub 
```

但这在项目中发现了几乎每个子程序。换句话说，它并不局限于 Page_Load 子。所以我想我会很聪明，并注意到每个 End Sub 都在一行的末尾，所以我所要做的就是像这样在它后面放一个 $：

```
 Sub Page_Load .* End Sub$ 
```

但这会发现绝对为零的字符串。那么我做错了什么？（请注意，我在 .* 周围放置了额外的空白，以便您可以看到它，但通常不会出现空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:02:39.947

你可能需要非贪婪的方法。试试这个：

`^.*?pizza.*$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:25:45.427

所以，现在完成新的答案。

1.  搜索单词“pizza”（不是“pizzas”）

    1.  如果您有一个多行字符串并且想要查找单行，则需要使用 Option `[Multiline][1]`。这会改变锚的行为`^`并`$`匹配行的开始和结束。

    2.  为确保仅匹配完整的单词“pizza”而不匹配部分匹配，请使用[单词边界](http://www.regular-expressions.info/wordboundaries.html)

    3.  如果不使用 Singleline 选项，则无需担心贪婪

    所以你的正则表达式是：

    ```
    Regex optionRegex = new Regex(@"^.*\bpizza\b.*$", RegexOptions.Multiline); 
    ```

2.  为此`Sub Page_Load.*End Sub`，您需要匹配多行：

    1.  使用[单行](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx#Singleline)选项，以允许`.`匹配换行符。

    2.  [您需要量词](http://msdn.microsoft.com/en-us/library/3206d374.aspx)的不贪婪匹配行为

    所以你的正则表达式是：

    ```
    Regex optionRegex = new Regex(@"Sub Page_Load.*?End Sub", RegexOptions.Singleline); 
    ```

# c - 当存在状态为“TIME_WAIT”的 tcp 连接时，无法建立 tcp 连接

> ID：16014627
> 
> 赞同：1
> 
> 时间：2013-04-15T11:59:32.910
> 
> 标签：c, linux, tcp, network-programming

我写了一个简单的 tcp 客户端和服务器并运行它们我注意到当我`ctrl+c`用来结束程序时 tcp 连接被关闭但 tcp 连接状态就像`TIME_WAIT` 我再次运行 tcp 客户端和服务器时 tcp 连接不能再次建立一个`RST`数据包总是由tcp服务器发送我必须等待一段时间才能建立下一个tcp连接

这是什么原因以及如何处理这个问题？

此外，我注意到在一台主机上，当 tcp 连接处于状态时，`FIN_WAIT_2` 即使它没有收到`FIN`，tcp 连接也会在一段时间后关闭，为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:20:25.907

这个问题的解决方案是设置 SO_REUSEADDR 套接字选项。这告诉堆栈允许绑定碰巧处于 TIME_WAIT 状态的地址。

TIME_WAIT 状态的原因似乎是为了让散乱的数据包有一些时间到达。如果堆栈无法确保连接正常关闭，则可能有数据包在传输中，或者发送方甚至可能正在主动发送更多数据。堆栈希望避免将这些数据包与新绑定连接的流量混合。

这是关于将 SO_REUSEADDR 用于 TCP 和 UDP 的一个[很好的答案。](https://stackoverflow.com/questions/577885/uses-of-so-reuseaddr)

# java - 如何在 Derby 数据库的双列中设置精度？

> ID：16014629
> 
> 赞同：2
> 
> 时间：2013-04-15T11:59:39.763
> 
> 标签：java, sql, derby

我正在使用这些代码在 derby 数据库中创建一个表。

```
 CREATE TABLE "USED_BANKACCOUNT"
    (
       "FYEAR" VARCHAR(10),
        "NUM" DOUBLE,
       "USERNAME" VARCHAR(20)
        ); 
```

我的数据是这样存储的。

```
 FYEAR              NUM                  USERNAME
   ---------------------------------------------------
   2013               10.5                 Pranjal
   2013               5.25                 Pranjal
   2013               9.0                  Bimal 
   --------------------------------------------------- 
```

但我希望我的数据像这样存储

```
 FYEAR              NUM                  USERNAME
   ---------------------------------------------------
   2013               10.50                 Pranjal
   2013               5.25                  Pranjal
   2013               9.00                  Bimal 
   --------------------------------------------------- 
```

我应该如何处理我的`DOUBLE`数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:05:00.367

使用具有定义精度和小数位数的 DECIMAL[类型：](http://db.apache.org/derby/docs/10.1/ref/rrefsqlj15260.html)

```
CREATE TABLE "USED_BANKACCOUNT" (
    "FYEAR" VARCHAR(10),
    "NUM" DECIMAL(5, 2),
    "USERNAME" VARCHAR(20)
); 
```

表示数字中允许的`precision`总位数（小数点左右），`scale`表示允许的小数位数。所以上面的例子定义了一个十进制数，最多允许 5 位数字，小数部分有 2 位数字。

# sql - 保存在字段中的 SQL 函数 - 如何执行 DATEADD()？

> ID：16014634
> 
> 赞同：2
> 
> 时间：2013-04-15T11:59:56.483
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有一个名为 FunctionValue 的字符串列字段。此字段可以包含`DATEADD(datepart, number, date)`或`GETDATE()`或其他内容。

例如，如果`DATEADD(year, 3, GETDATE())` 我希望稍后在 SP 运行时执行此操作，并将值保存在名为`@FunctionValue`.

```
SET @FunctionValue = ( SELECT CASE
                        WHEN FunctionValue LIKE 'DATEADD%' THEN --???
                        WHEN FunctionValue LIKE 'GETDATE' THEN CAST(GETDATE() AS nvarchar(255))
                        ELSE FunctionValue
                    END AS FV
                    FROM @TSV_WithTarget 
```

我不确定我需要在那里放什么才能做到这一点，以便无论值是什么，`DATEADD`函数的结果都会返回并保存在`@FunctionValue`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:06:16.593

单程;

```
--modify field or add an assignment
declare @sql nvarchar(128) = 'set @result = ' + 'DATEADD(year, 3, GETDATE())'

declare @FunctionValue datetime
exec sp_executesql @sql, N'@result datetime output', @FunctionValue output

select @FunctionValue 
```

类型是提前需要的，或者你可以做一些丑陋的事情，比如显式转换为 sql_variant。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:03:48.343

试试这个——

```
DECLARE @FunctionValue NVARCHAR(500)
SELECT @FunctionValue = 'SELECT ' + ( 
                            SELECT CASE
                                WHEN FunctionValue LIKE 'DATEADD%' THEN 'DATEADD(year, 3, GETDATE())'
                                WHEN FunctionValue LIKE 'GETDATE' THEN 'GETDATE()'
                                ELSE FunctionValue
                            END
                            FROM @TSV_WithTarget
                        )

EXEC sp_executesql @FunctionValue 
```

# jquery - JQuery Regexp Starts with

> ID：16014637
> 
> 赞同：0
> 
> 时间：2013-04-15T12:00:14.673
> 
> 标签：jquery, regex

I didnt write the code below but ive added an if to it, to check for a value called starts, if starts is set to 1, I only want to return results that start with the value, i tried searching RegEx exp and swapped out the 'i' for a 'a' or '\A' but neither work, what character do i need in there for a starts with?

Thanks

```
function searchTable(inputVal, tablename,starts) {
    var table = $(tablename);
    table.find('tr:not(.header)').each(function (index, row) {
        var allCells = $(row).find('td');
        if (allCells.length > 0) {
            var found = false;
            allCells.each(function (index, td) {
                if (starts = 1) {
                    var regExp = new RegExp(inputVal, 'i');
                } else {
                    var regExp = new RegExp(inputVal, 'i');
                }

                if (regExp.test($(td).text())) {
                    found = true;
                    return false;
                }
            });
            if (found == true) $(row).show().removeClass('exclude'); else $(row).hide().addClass('exclude');
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:03:35.513

You need to use the caret `^` at the beginning of your regexp (it matches the position "beginning of a string or a line"). But that's not a modifier. The `i` pour replaced stands for "case insensitive".

So...

```
var regExp = new RegExp((starts ? '^' : '') + inputVal, 'i'); 
```

# currency - Authorize.net 是否支持不同的货币类型？

> ID：16014643
> 
> 赞同：1
> 
> 时间：2013-04-15T12:00:35.353
> 
> 标签：currency, authorize.net

我发现一篇文章引用了 Authorize.net 的一个名为“x_currency_type”的字段，但是 Authorize.net API 文档没有引用任何关于货币类型的内容。我还发现了一个帖子，它清楚地表明 Authorize.Net 只支持美元。

我很困惑。Authorize 是否支持使用其他货币设置定期付款，如果是，任何人都可以帮助我如何使用该方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:02:16.987

Authorize.Net 刚刚宣布[支持加元、英镑和欧元](http://community.developer.authorize.net/t5/News-and-Announcements/Authorize-Net-Expansion-into-Canada-the-United-Kingdom-and/td-p/33690)。

**货币代码更新**

如果您的集成使用 AIM、SIM 或 DPM 并发送值为“USD”的“x_currency_code”字段，则您可能需要进行小幅更改以支持以 CAD、GBP 或 EUR 进行处理。您现在需要发送与商户设置为处理的货币相关的适当货币代码。例如，您必须为设置为以加元处理的任何商户发送“CAD”。

如果您不发送货币代码，或者如果您使用我们的任何其他 Authorize.Net API，则此时无需进行任何更改。这些 API 的货币代码将自动默认为与商家处理器关联的货币。

**其他必填字段**

为了通过我们在欧洲的新处理器连接接受付款，现在每笔交易都需要一些现有的可选字段。请查看以下处理英镑或欧元付款的附加必填字段列表：

名字
姓氏
地址
城市
州
邮编
国家
电子邮件

这些更改适用的 API 指南已相应更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:21:08.800

Authorize.net 完全支持英镑（英镑）、欧元和美元。然而，他们的测试环境目前仅以美元显示。然而，无论货币如何，与 Authorize.Net 的集成都是相同的。因此，在使用他们的测试账户时，请确保我们没有发送美元以外的任何货币。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-25T06:31:54.820

我尝试在 Woocommerce 中更改货币，但在测试时无法正常工作。

突然，我将客户详细信息从菲律宾更改为美国。它付款成功。

也许货币还会检查买方的位置。

# c# - ListView：将自定义数据模板中的网格拉伸到最大宽度？

> ID：16014644
> 
> 赞同：2
> 
> 时间：2013-04-15T12:00:38.410
> 
> 标签：c#, windows-runtime, windows-store-apps, winrt-xaml

我想`DataTemplate`为我的`ListView`. 我有一个简单的`class Person`：

```
public class Person
{
    public string Name{get;set;}
    public SolidColorBrush SomeColor{get;set;}

    public Person(string name){ Name = name; }
} 
```

我将`ItemsSource`my 的属性设置`ListView`为`List<Person> persons`. 如果我只是使用`DisplayMemberPath=Name`一切正常，但我希望有一个自定义模板来显示`Name`和`SomeColor`. 我创建了一个示例`Grid`来展示我希望它的外观（没有任何绑定，仅作为示例）：

```
<Grid Height="50">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto" MinWidth="10"/>
    </Grid.ColumnDefinitions>
    <TextBlock Text="Patrick" Grid.Column="0" TextAlignment="Right" Margin="0,0,10,0" VerticalAlignment="Center"/>
    <Rectangle Fill="Green" Grid.Column="1" />
</Grid> 
```

这是我尝试实现我`DataTemplate`的`ListView`：

```
<ListView x:Name="listView" ItemsSource="{Binding ElementName=pageRoot, Path=FriendList ,Mode=OneWay}">
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.ItemTemplate>
        <DataTemplate>
            <Grid HorizontalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto" MinWidth="10"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Name}" Grid.Column="0"/>
                <Rectangle Fill="LimeGreen" Grid.Column="1"/>
            </Grid>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

现在的问题是`Grid`没有扩展到 ListView 的完整可用宽度。它只是`Grid`大约 20-30 像素宽度的一小部分。搜索谷歌后，我添加了`ListView.ItemContainerStyle`，但没有帮助。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T21:08:26.060

尝试`HorizontalContentAlignment`在`Stretch`你的`ItemContainerStyle/Style/Setter`.

# linq-to-sql - Linq-to-SQL：尝试创建实体的新版本，但得到“无法添加已存在的实体”

> ID：16014648
> 
> 赞同：0
> 
> 时间：2013-04-15T12:00:48.027
> 
> 标签：linq-to-sql

我有下表

```
[TestModule]
ProductId uniqueidentifier primarykey
ModuleId uniqueidentifier primarykey
LastEdited timestamp primarykey
LastEditor uniqueidentifier
LastEditComment nvarchar(200)
CheckedOutTo uniqueidentifier
... other fields ... 
```

该类定义如下：

```
 [Column(IsPrimaryKey=true)]
    public Guid ProductGuid { get; private set; }

    [Column(IsPrimaryKey = true)]
    public Guid ModuleGuid { get; private set; }

    /// <summary>
    /// date of last edit
    /// </summary>
    [Column(IsPrimaryKey=true)]
    public DateTime LastEditDate { get; set; }

    /// <summary>
    /// Guid of last editor
    /// </summary>
    [Column]
    public Guid LastEditorGuid { get; set; }

    /// <summary>
    /// Summary of last changes
    /// </summary>
    [Column]
    public string LastEditNote { get; set; }

    /// <summary>
    /// Current editor. Null if checked in
    /// </summary>
    [Column(CanBeNull=true)]
    public Guid CheckedOutByGuid { get; set; } 
```

我希望能够选择一个 TestModule 实体，进行一些修改并将其作为新实体插入。目标是拥有变化的历史。

但是，我无法插入更改的对象。我收到一条错误消息“无法添加已存在的实体”。在插入对象之前，我将 LastEdited 属性设置为一个新值（现在），并且期望由于该属性是主键，它应该定义一个新实体。情况似乎并非如此。

任何人都可以帮助我了解这里发生了什么吗？实际上定义实体的是什么？主键？对象身份？还有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:05:44.840

你可以尝试设置

```
 db.ObjectTrackingEnabled = false 
```

选择实体时的数据上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:58:13.220

在我看来，实体首先是由对象本身而不是对象的主键属性标识的。我发现克隆对象是前进的方向。如果主键属性保持不变，则尝试插入克隆对象会被视为错误，这是意料之中的。`Context.SubmitChanges()`调用该方法时，修改的对象会在数据库中更新。我猜这一切都很合乎逻辑——一旦你掌握了窍门..

# php - Facebook：OAuthException：（＃200）必须具有有效的 access_token 才能访问此端点

> ID：16014649
> 
> 赞同：4
> 
> 时间：2013-04-15T12:00:48.667
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在尝试从 facebook 获取所有公共事件，

当我尝试从我的服务器执行我的 php 代码时，我收到错误：**Uncaught OAuthException: (#200) Must have a valid access_token to access this endpoint throw in /....../sdk/src/base_facebook.php on第 1254 行**

而如果我在heroku上执行相同的代码......它可以工作......我想在我的服务器上执行代码......请帮助......我的代码是......：

```
 <?php

require_once('utils.php');

require_once('sdk/src/facebook.php');

$facebook = new Facebook(array(
  'appId'  => '.........',
  'secret' => '..............',
  'sharedSession' => true,
  'trustForwarded' => true,
));

$events =idx($facebook->api('/search?q=trade&type=event&limit=5000&access_token=ksdkslhosihgksjdhlshfshdfgskdjhsklfhsklfhskfjhsdlkhslhslh'), 'data', array());

$var=1;

foreach($events as $event)
{

    $id = idx($event, 'id');
    $name = idx($event, 'name');
    $owner = idx($event, 'owner');
    $start_time = idx($event, 'start_time');
    $end_time = idx($event, 'end_time');
    $location = idx($event, 'location');
    $description = idx($event, 'description');
     echo "S.No:".$var."<br>";
     echo "ID:".he($id)."<br>";
     echo "Name:".he($name)."<br>";
     echo "Owner:".he($owner)."<br>";
     echo "start_time:".he($start_time)."<br>";
     echo "end_time:".he($end_time)."<br>";
     echo "location:".he($location)."<br>";
     echo "description:".he($description)."<br>";
     $var=$var+1;
}   

?> 
```

使用的 util.php 文件与 heroku 中的相同.....

实用程序.php

```
 <?php

/**
 * @return the value at $index in $array or $default if $index is not set.
 */
function idx(array $array, $key, $default = null) {
  return array_key_exists($key, $array) ? $array[$key] : $default;
}

function he($str) {
  return htmlentities($str, ENT_QUOTES, "UTF-8");
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-03T02:17:37.857

可能与此有关

[脸书错误](https://developers.facebook.com/bugs/453298034751100?browse=search_516534c213df06064266897)

# android - 显示具有内置 android 应用程序的缩放功能的图像

> ID：16014650
> 
> 赞同：0
> 
> 时间：2013-04-15T12:00:52.130
> 
> 标签：android

我正在尝试在 Android 内置应用程序的图库中显示下载的图像。但我面临着从 sdcard 存储和删除图像的问题。但我可以使用 MediaPlayer 播放歌曲而无需存储歌曲。

像 MediaPlayer 类一样，是否有任何直接类来渲染 url 图像以获得放大和缩小的直接功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:32:59.677

什么都没有建。您将需要一个图像加载实现和一个捏缩放实现。

以下两个是我个人可以推荐的。

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

和

[https://github.com/chrisbanes/PhotoView](https://github.com/chrisbanes/PhotoView)

```
public class ImageViewerActivity extends Activity {

public static final String EXTRA_URL = ImageViewerActivity.class.getName() + ".EXTRA_URL";

private ImageView mImageView;

private PhotoViewAttacher mAttacher;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_viewer_activity);

    mImageView = (ImageView) findViewById(R.id.iv_photo);

    //retrieve image url from extras
    String url = getIntent().getStringExtra(EXTRA_URL);

    //The MAGIC happens here!
    mAttacher = new PhotoViewAttacher(mImageView);

    ImageLoader.getInstance().loadImage(url, new ImageLoadingListener() {
        @Override
        public void onLoadingStarted(String imageUri, View view) {
            //To change body of implemented methods use File | Settings | File Templates.
        }

        @Override
        public void onLoadingFailed(String imageUri, View view, FailReason failReason) {
            //To change body of implemented methods use File | Settings | File Templates.
        }

        @Override
        public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
            mImageView.setImageBitmap(loadedImage);
            mAttacher.update();
        }

        @Override
        public void onLoadingCancelled(String imageUri, View view) {
            //To change body of implemented methods use File | Settings | File Templates.
        }
    });
}

@Override
public void onDestroy() {
    super.onDestroy();

    // Need to call clean-up
    mAttacher.cleanup();
}
} 
```

和布局...

```
<merge xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">
<ImageView android:id="@+id/iv_photo"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent" />
</merge> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T10:27:32.100

请参阅下面的代码以显示具有缩放功能的图像。

```
public class AndroidZoomActivity extends Activity implements OnTouchListener {

    private static final String TAG = "Touch";

    // These matrices will be used to scale points of the image
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    // The 3 states (events) which the user is trying to perform
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // these PointF objects are used to record the point(s) the user is touching
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         ImageView view = (ImageView) findViewById(R.id.im_card);

         view.setImageBitmap((getBitmap("Here ImageURL")));
         view.setOnTouchListener(this);
    }

     @Override
     public boolean onTouch(View v, MotionEvent event) {

     ImageView view = (ImageView) v;
     view.setScaleType(ImageView.ScaleType.MATRIX);
     float scale;

     dumpEvent(event);
     // Handle touch events here...

     switch (event.getAction() & MotionEvent.ACTION_MASK) {
     case MotionEvent.ACTION_DOWN: // first finger down only
     savedMatrix.set(matrix);
     start.set(event.getX(), event.getY());
     Log.d(TAG, "mode=DRAG"); // write to LogCat
     mode = DRAG;
     break;

     case MotionEvent.ACTION_UP: // first finger lifted

     case MotionEvent.ACTION_POINTER_UP: // second finger lifted

     mode = NONE;
     Log.d(TAG, "mode=NONE");
     break;

     case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

     oldDist = spacing(event);
     Log.d(TAG, "oldDist=" + oldDist);
     if (oldDist > 5f) {
     savedMatrix.set(matrix);
     midPoint(mid, event);
     mode = ZOOM;
     Log.d(TAG, "mode=ZOOM");
     }
     break;

     case MotionEvent.ACTION_MOVE:

     if (mode == DRAG) {
     matrix.set(savedMatrix);
     matrix.postTranslate(event.getX() - start.x, event.getY()
     - start.y); // create the transformation in the matrix
     // of points
     } else if (mode == ZOOM) {
     // pinch zooming
     float newDist = spacing(event);
     Log.d(TAG, "newDist=" + newDist);
     if (newDist > 5f) {
     matrix.set(savedMatrix);
     scale = newDist / oldDist; // setting the scaling of the
     // matrix...if scale > 1 means
     // zoom in...if scale < 1 means
     // zoom out
     matrix.postScale(scale, scale, mid.x, mid.y);
     }
     }
     break;
     }

     view.setImageMatrix(matrix); // display the transformation on screen

     return true; // indicate event was handled
     }

     /*
     *
     --------------------------------------------------------------------------
     * Method: spacing Parameters: MotionEvent Returns: float Description:
     * checks the spacing between the two fingers on touch
     * ----------------------------------------------------
     */

     private float spacing(MotionEvent event) {
     float x = event.getX(0) - event.getX(1);
     float y = event.getY(0) - event.getY(1);
     return FloatMath.sqrt(x * x + y * y);
     }

     /*
     *
     --------------------------------------------------------------------------
     * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
     * Description: calculates the midpoint between the two fingers
     * ------------------------------------------------------------
     */

     private void midPoint(PointF point, MotionEvent event) {
     float x = event.getX(0) + event.getX(1);
     float y = event.getY(0) + event.getY(1);
     point.set(x / 2, y / 2);
     }

     /** Show an event in the LogCat view, for debugging */
     private void dumpEvent(MotionEvent event) {
     String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
     "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
     StringBuilder sb = new StringBuilder();
     int action = event.getAction();
     int actionCode = action & MotionEvent.ACTION_MASK;
     sb.append("event ACTION_").append(names[actionCode]);

     if (actionCode == MotionEvent.ACTION_POINTER_DOWN
     || actionCode == MotionEvent.ACTION_POINTER_UP) {
     sb.append("(pid ").append(
     action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
     sb.append(")");
     }

     sb.append("[");
     for (int i = 0; i < event.getPointerCount(); i++) {
     sb.append("#").append(i);
     sb.append("(pid ").append(event.getPointerId(i));
     sb.append(")=").append((int) event.getX(i));
     sb.append(",").append((int) event.getY(i));
     if (i + 1 < event.getPointerCount())
     sb.append(";");
     }

     sb.append("]");
     Log.d("Touch Events ---------", sb.toString());
     }

     /**
      * Finctionality for concerting imageURl string into bitmap
      * @param url
      * @return
      */
    public static Bitmap getBitmap(String url) {
        Bitmap bm = null;
        try {
            URL aURL = new URL(url);
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            bm = BitmapFactory.decodeStream(new FlushedInputStream(is));
            bis.close();
            is.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return bm;
    }

    static class FlushedInputStream extends FilterInputStream {
        public FlushedInputStream(InputStream inputStream) {
            super(inputStream);
        }

        @Override
        public long skip(long n) throws IOException {
            long totalBytesSkipped = 0L;
            while (totalBytesSkipped < n) {
                long bytesSkipped = in.skip(n - totalBytesSkipped);
                if (bytesSkipped == 0L) {
                    int b = read();
                    if (b < 0) {
                        break; // we reached EOF
                    } else {
                        bytesSkipped = 1; // we read one byte
                    }
                }
                totalBytesSkipped += bytesSkipped;
            }
            return totalBytesSkipped;
        }
    }

} 
```

我希望你现在得到了预期的缩放功能代码。

# javascript - 在检票口事件中获取变量 javascript

> ID：16014654
> 
> 赞同：0
> 
> 时间：2013-04-15T12:01:06.427
> 
> 标签：javascript, events, onclick, wicket, panel

首先我想提一下，我是 js 和 wicket 的初学者。

我正在尝试检索在我的页面上的 javascript 中定义的变量。我想在我的页面上触发事件时检索此变量。

我使用此代码检索变量，但它不工作（这是我的检票口面板 java 类）：

```
...
    add(new AjaxEventBehavior("onclick") {
        private static final long serialVersionUID = 1L;

        protected void onEvent(AjaxRequestTarget target) {
        if(target != null) {
                String value = RequestCycle.get().getRequest().getParameter("i");
            }
        }
    }); 
```

有人能指出我正确的方向吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:22:47.033

阅读此[https://cwiki.apache.org/WICKET/calling-wicket-from-javascript.html](https://cwiki.apache.org/WICKET/calling-wicket-from-javascript.html)。您需要将您的行为传递`getCallbackUrl()`给 js 并使用`Wicket.Ajax.get({ u: '${callbackUrl}' + '${args}' })`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:31:57.463

您需要将变量的内容“发布”到您的行为中，以便能够在您的请求参数中获取它。您可以使用`AjaxCallDecorator`(wicket < 6) 或`AjaxCallListener`(wicket >= 6) 轻松完成。

我建议您了解您的应用程序发生了什么，Java 端无法轻松检索 Javascript 变量。

# javascript - 如何找到窗口顶部位置和我的 iframe 起始位置之间的距离

> ID：16014658
> 
> 赞同：1
> 
> 时间：2013-04-15T12:01:26.287
> 
> 标签：javascript, jquery, html

如何找到窗口顶部位置和我的 iframe 起始位置之间的距离。

我尝试使用这种方法[使用javascript确定从div顶部到窗口顶部的距离，](https://stackoverflow.com/questions/9880472/determine-distance-from-the-top-of-a-div-to-top-of-window-with-javascript) 但它对我不起作用。

请提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-01T20:17:37.720

我试过使用这种方法：

```
 var topDistance = $('iframe')[0].offsetTop; 
```

取得了不同程度的成功。其中，您的标签名称将是：

```
 var topDistance = $('#myframeId').offsetTop; 
```

# c# - 使用 linq C# 动态排序

> ID：16014659
> 
> 赞同：3
> 
> 时间：2013-04-15T12:01:26.873
> 
> 标签：c#, linq, entity-framework

我想对具有多个操作的 datagridview 进行排序。

我解释自己：我有一个带有键和值的字典。该值是带有 ASC 或 DESC 的字符串，我想使用此策略对所有内容进行排序：

```
string sort=String.Empty;
sort+=".OrderBy(c=>c.Value)"; ==> the first one in my list
foreach(var column in list) 
{
    if(column.Value=="DESC")
        sort+=".ThenByDescending(c=>c.Value)";

    if(column.Value=="ASC")
        sort+=".ThenByAscending(c=>c.Value)";
} 
```

`List<Formule> list=ListFormules.Where(f=>f.Identificator==null)`==> 这是我的问题

我不知道如何更改我的字符串以在我的查询中工作。你有想法或更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:13:53.773

由于评论，发布我的评论作为答案。

您应该检查动态 linq。

Scott Guthrie 有一篇关于它的详细博客文章。[关联](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

# php - PHP大文件使用文件系统中不存在的文件夹进行压缩

> ID：16014663
> 
> 赞同：0
> 
> 时间：2013-04-15T12:01:38.067
> 
> 标签：php, unix, compression, zip

我正在创建某种文件共享应用程序。在此应用程序中，您应该能够上传和下载文件并构建这些文件。

我选择不继续操纵文件系统。但是我根据时间戳将文件上传到文件夹中，并将重要信息存储在数据库中并在数据库中构建它们。所以没有真正的子文件夹，只有数据库中的关系来将这些文件构建到文件夹中。

不，我想让用户通过压缩来下载文件夹（包括子文件夹）。但是我想在将要下载的 zip-archive 中重新创建这个文件夹结构（用户在前端看到的）。我已经设法使用 PHP 的 ZipArchive 类来做到这一点：http: [//php.net/manual/en/class.ziparchive.php](http://php.net/manual/en/class.ziparchive.php) 但是这有一个大问题。压缩大文件时会占用大量内存和 CPU。而且系统必须能够处理大文件（> 1GB）我不可能允许PHP使用> 1GB的内存？！

现在我发现了一个 Stackoverflow 问题，可以在 php 中使用更少的内存压缩大文件： [https ://stackoverflow.com/a/4357904/383731](https://stackoverflow.com/a/4357904/383731)

这似乎使用了 Unix Zip 命令，**但是是否可以在这些 zip 中创建文件夹而文件系统中不存在它们？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:23:13.603

*   在您的临时目录中创建一个文件夹
*   添加子文件夹和[链接](http://help.hardhathosting.com/question.php/95)到真实文件
*   压缩它
*   发送
*   杀死临时文件

关于链接的部分很重要。如果您只使用链接，您实际上不必复制文件内容。您所做的只是给 zip 工具一个提示，它可以在其中找到您想要包含在存档中的内容

**编辑：**

符号链接和硬链接都有效，上面的链接解释了如何使用符号链接来实现。

# c# - 将简单的 ForEach 转换为 Linq 语句

> ID：16014668
> 
> 赞同：3
> 
> 时间：2013-04-15T12:01:57.983
> 
> 标签：c#, linq

我是一名 SQL 开发人员，所以 Linq（和一般的 C#）对我来说有点陌生，但我有一个简单的`foreach`循环，我认为 Linq 查询可能会更好地服务。如果没有别的，即使手头的问题不是特别困难，这将是一个有用的学习内容。这是我的代码：

```
bool fireAgain = true;
foreach (var connMan in Dts.Connections)
{
    Dts.Events.FireInformation
        ( 0
          , ""
          , String.Format("Connection Manager {0} has connection string {1}"
          , connMan.Name
          , connMan.ConnectionString)
          , ""
          , 0
          , ref fireAgain
        );
} 
```

我可以弄清楚：

```
from connMan in Dts.Connections select connMan 
```

很容易，但是我如何将我的 connMan 传递给我对 FireInformation 方法的调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T12:08:32.390

我不建议尝试将其转换为 Linq，因为 Linq 旨在用于函数式编程，而不是命令式编程。如果您想将其与 SQL 进行比较，那么它将没有 DML。

`Dts.Events.FireInformation`似乎没有返回您可以选择的值。它可能会触发一个事件或其他东西，它还使用一个`ref`参数。那段代码看起来根本不像一个查询，我认为它不应该被强加给一个。在`foreach`这种情况下，循环非常好，因为您实际上是在其中工作而不是查询数据（这是 linq 的用途）。

如果您需要根据某些条件过滤集合，如果您需要加入单独的集合或类似的东西，那么 Linq 可能是一个更好的工具。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T12:07:13.943

通常 LINQ 将用于查询信息。在这种情况下，您也在查询信息。

但是，您可以执行以下操作：

```
Dts.Connections.ForEach((conMan) =>
{
    Dts.Events.FireInformation(0, "", String.Format("Connection Manager {0} has connection string {1}", connMan.Name, connMan.ConnectionString), "", 0, ref fireAgain);
} 
```

也就是说，如果 Dts.Connections 是一个 List，否则你不能这样做。（无法从您的问题中判断它是 IEnumerable 还是 List）

一种解决方法是创建一个扩展方法并使用它。像这样：

```
public void ForEach<T>(this IEnumerable<T> source, Action<T> action)
{
    foreach(T item in source)
    {
        action(item);
    }
} 
```

之后，您可以在源上使用 ForEach 方法，如示例所示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T12:06:25.397

```
Dts.Connections
   .ForEach(connMan => Dts.Events.FireInformation(0, "", String.Format("Connection Manager {0} has connection string {1}", connMan.Name, connMan.ConnectionString), "", 0, ref fireAgain)); 
```

如果 Connections 不是 IEnumerable，则将第一行更改为 ;

```
Dts.Connections.ToList() 
```

# xslt - xslt：如何使用元标记？

> ID：16014671
> 
> 赞同：0
> 
> 时间：2013-04-15T12:02:03.323
> 
> 标签：xslt, internet-explorer-10

我们如何`"<meta http-equiv="X-UA-Compatible" content="IE=edge"/>"` 在 xslt 中包含元标记？否则我们如何检查 IE10 和其他的 IE 兼容性。

我在 Web 配置文件中的以下代码适用于 IE10，现在我应该在 xslt 中包含相同的代码，或者应该适用于 IE10 的替代代码。代码：

```
<httpProtocol>
      <customHeaders>
        <clear />
        <add name="X-UA-Compatible" value="IE=EmulateIE9" />
      </customHeaders>
</httpProtocol> 
```

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:22:26.687

如果您询问将 XML 转换为 HTML 的客户端 XSLT 并且在您想要包含的 HTML 结果中，那么只需将其放在输出元素`meta`的模板中，例如`html` `head`

```
<xsl:template match="/">
  <html>
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"/>
      <title>Example</title>
    </head>
    <body>
      <h1>Example</h1>
      <xsl:apply-templates/>
    </body>
  </html>
</xsl:template>

.. 
```

# excel - 自动筛选以查找空白单元格

> ID：16014672
> 
> 赞同：2
> 
> 时间：2013-04-15T12:02:14.820
> 
> 标签：excel, vba

我正在尝试在 VBA 中针对同一字段中的三个不同条件应用自动过滤器。应用过滤器后，我想找到所有空白的单元格，有人可以建议吗？

```
 Sub ApplyAutoFiler()
    Dim ws As Worksheet
    Dim I, j, NumberOfErrors As Long
    IsErrors = False

    Set ws = Sheets("Assessments")

    NumberOfErrors = 0
    Dim Z As Range
    Set Z = Cells(4, 3).EntireColumn.Find("*", SearchDirection:=xlPrevious)
    If Not Z Is Nothing Then
        NumberOfRows = Z.Row
    End If

    For I = 4 To NumberOfRows

   With ws
   .AutoFilterMode = False
  .Range("W4:AA4").AutoFilter Field:=1, Criteria1:=Array("A", "B", "C"), Operator:=xlFilterValues
  .Cells.SpecialCells(xlCellTypeBlanks).Interior.Color = 65535
  .AutoFilterMode = False

   End With

   Next I

   End Sub 
```

![在此处输入图像描述](https://i.stack.imgur.com/mlwZS.png)

我最终将其作为嵌套的 if 语句

```
If Range("W" & i).Value = "A" Or Range("W" & i).Value = "B" Or Range("W" & i).Value = "C" Then
     If Range("AD" & i).Value = "" Then
        Range("AD" & CStr(i)).Interior.ColorIndex = 3
        NumberOfErrors = NumberOfErrors + 1
     End If
  End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:38:35.180

这似乎让我很接近（它还假设您有一个名为“评估”的工作表）：

```
 Sub ApplyAutoFiler()
   Dim ws As Worksheet

   Set ws = Sheets("Assessments")

 With ws
      .AutoFilterMode = False
      .Range("A:AZ").AutoFilter Field:=23, Criteria1:=Array("a", "b", "c"), Operator:=xlFilterValues
      .Cells.SpecialCells(xlCellTypeBlanks).Interior.Color = 65535
      .AutoFilterMode = False
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T18:57:02.983

我今天刚刚发现了一些关于使用 VBA 代码过滤空白的内容。请务必将其包含在需要空白单元格的所有代码中：

```
' Get Rows with blanks
WorkRange.AutoFilter Field:=1, Criteria1:="=", Operator:=xlOr, Criteria2:="=" & ""

' Hides Rows with blanks ... same idea with the "<>" for operator
WorkRange.AutoFilter Field:=1, Criteria1:="<>", Operator:=xlOr, Criteria2:="<>" & "" 
```

第一个标准获得真正的空白单元格和那些具有隐藏/不可打印字符的单元格，第二个标准获得那些包含空字符串的单元格。Excel 用户界面可以很好地处理这个问题，但 VBA 代码需要这两个条件。

这个未记录的警告只花费了我几个小时的调试时间，更不用说我的经理说了几句“我以为我们正在从这些列中删除空白......”

只是想我会分享，希望能为大家省去一些麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-05T12:43:45.373

我知道这个踏板已经很长了。但只是想分享。要过滤掉空白单元格，您可以使用以下条件使用自动过滤器：

```
Worksheets("sheet name").Range("A1").autoFilter Field:=18, Criteria1:=(Blanks) 
```

“字段”是指列号。至于“Criteria1”，它可以是

```
Criteria1:=(Blanks) 
```

或者

```
Criteria1:="=" 
```

或者

```
Criteria1:="" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T15:03:08.853

为此，您不需要 VBA。您可以为此使用条件格式。看这个例子

在CF规则中，设置这个公式

`=AND($AA5="",OR($W5="a",$W5="b",$W5="c"))`

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/j6EE1.png)

如果你仍然想要 VBA，那么看看这个

```
Sub Sample()
    Dim blnkRange As Range, rng As Range, aCell As Range
    Dim ws As Worksheet

    Set ws = ThisWorkbook.Sheets("Assessments")

    With ws
        '~~> Sample range for testing purpose
        Set rng = .Range("W4:AA11")

        .AutoFilterMode = False

        With rng
            '~~> Filter on "a","b","c"
            .AutoFilter Field:=1, Criteria1:=Array("a", "b", "c"), Operator:=xlFilterValues
            '~~> Then filter on blanks on Col AA
            .AutoFilter Field:=5, Criteria1:="="

            '~~> Using offset. Assuming that Row 4 has headers
            Set blnkRange = .Offset(1, 0).SpecialCells(xlCellTypeVisible).Cells
        End With

        .AutoFilterMode = False
    End With

    '~~> This will give you the blank cells in Col AA
    If Not blnkRange Is Nothing Then
        For Each aCell In blnkRange
            '~~> Color the blank cells red in Col AA
            If aCell.Column = 27 Then aCell.Interior.ColorIndex = 3
        Next
    End If
End Sub 
```

# c++ - 在 DLL 中使用的结构地址

> ID：16014677
> 
> 赞同：0
> 
> 时间：2013-04-15T12:02:24.627
> 
> 标签：c++, struct, lua

我有 struct 的地址（我认为它很好） 0040336C 我试图在我注入某个程序的 DLL 中使用它（地址在哪里）

这真的是实验性的，因为我正在尝试获取 lua_State 地址。

```
data:0040336C ?L@@3PAUlua_State@@A dd ?               ; DATA XREF: _main+Cw

lua_State* L = (lua_State*)0x0040336C; 
```

我尝试过这种方式，但是在我注入它之后程序就崩溃了。

（调试器说什么）

> midaslua.exe 中 0x003a19e8 处未处理的异常：0xC0000005：访问冲突读取位置 0x443de713。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:07:10.060

您引用的第一个地址是*DLL 数据部分内*的结构地址，但您尝试取消引用的地址*是进程内存中*的地址。这两个地址*不是*同一类型的，所以不可能像你一样使用它们。

实际上，您尝试取消引用一块内存，应用程序可能已经或可能没有存储一些数据并将这块内存视为`lua_State`（很可能不是）。这导致了未定义的行为，最终出现了 AV。

很难（甚至不可能）在内存中找到一个位置，该变量存储在进程的内存中。建议使用另一种方法。

# oop - 使用 SuperClass 时避免重复数据

> ID：16014679
> 
> 赞同：4
> 
> 时间：2013-04-15T12:02:30.703
> 
> 标签：oop, matlab, pass-by-reference

我是第一次开发 MATLAB OOP 项目。我的父类将有一个非常大的矩阵，孩子（很多）需要访问它。如何防止孩子复制数据？

在伪代码中，我要求，

```
classdef parent
    properties
        largeMatrix;
    end
end
classdef child < parent
    methods
        function obj = child(parent)
             Data.parent of this child = Share from parent
        end
        ...
        something = largeMatrix(n,m);
    end
end
p = parent; p.largeMatrix = rand(100);
c1 = child(p);
c2 = child(p); 
```

孩子 c1 和 c2 都应该访问在原始文件中创建的相同数据`rand(100)`，但不应该复制，`largeMatrix`因为我需要很多孩子，并且希望程序具有内存效率。`largeMatrix`将从文件中读取。

PS：这是我第一次在这个论坛发帖，如果我发错了，请原谅我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:50:38.780

MATLAB**在 write 时复制数组**。

假设您的`parent`类是（无需子类化句柄）：

```
classdef parent
    properties
        largeMatrix;
    end
end 
```

你的`child`课是：

```
classdef child < parent
    methods
        function obj = child(parent)
            obj.largeMatrix = parent.largeMatrix;
        end
    end
end 
```

现在，让我们创建父级并为其属性分配一个大矩阵`largeMatrix`：

```
p = parent;
p.largeMatrix = rand(1e4); % 750 MB circa 
```

查看内存中的跳转：

![在此处输入图像描述](https://i.stack.imgur.com/Xv8vN.png)

现在，让我们创建一个孩子并检查数据是否被引用：

```
c = child(p);
size(c.largeMatrix) 
```

如您所见，内存中没有跳转：

![在此处输入图像描述](https://i.stack.imgur.com/5WXjz.png)

最后，让我们对孩子的数据做一个简单的更改：

```
c.largeMatrix(1) = 1; 
```

如您所见，只有**在写入时数组才会被有效复制**：

![在此处输入图像描述](https://i.stack.imgur.com/ZO0hC.png)

为了防止写入在`child.largeMatrix`具有属性的父类`(Abstract = true)`和子类中定义属性`(SetAccess = immutable)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:20:08.827

类只是一种数据类型，它不保存任何数据。如果你实例化一个类的对象`parent`，`Parent`然后实例化一个类的对象`child`，`Child`那么默认情况下`child`不会从`parent`. 您可以使用复制构造函数将数据从一个对象复制到另一个对象。

```
child = parent;  % this copies the data in `parent` to `child` 
```

但是，在这种情况下，Matlab 会在`parent`.

[您可以通过使用句柄对象](http://www.mathworks.com/help/matlab/matlab_oop/comparing-handle-and-value-classes.html)来避免复制数据。您可以将句柄对象分配给多个变量或将其传递给函数，而不会导致 MATLAB 复制原始对象。例如，

```
classdef A < handle
    properties
        largeMatrix;  % wrap your large data into a handle class
    end
end

classdef B
    properties
        data;
    end
    methods
        function obj = B(mydata)
            obj.data = mydata;
        end
    end
end 
```

然后在主程序中你可以分配

```
a = A();
a.largeMatrix = rand(100);
b1 = B(a);   
b2 = B(a);
b3 = b1;    % can even do this

% no copies of largeMatrix were made, because `a` is a handle object

% accessing largeMatrix
b1.data.largeMatrix 
b3.data.largeMatrix 
```

# java - 以编程方式生成 XLS 时出现问题

> ID：16014682
> 
> 赞同：0
> 
> 时间：2013-04-15T12:02:38.510
> 
> 标签：java, jsp, tomcat6, business-objects

我已在服务器端部署此代码，以使用 XLs 的宏将 rep 文件（BO 文件）转换为 xls 文件。我通过此 jsp 调用调用了宏，并将宏将 .rep 文件转换为 xls 文件。. 当从服务器系统的客户端调用 jsp 时，不要打开 xls 表，但是当我尝试运行与独立 java 代码相同的代码时，它可以工作。在这里我附上了一个示例代码。请帮助我。

```
<%@ page import="java.io.*" %><%@ page contentType="application/vnd.ms-excel"%> <html><head></head> <body> <% String cmdLine = "\"C:/Program Files (x86)/Microsoft Office/Office12/EXCEL.EXE\" /e/\"D:\\North%20America\\Workspace%20Defined_2013-03-23-06-50-50.rep\" D:\\NewFolder\\Converter.xlsm"; try{Process p = Runtime.getRuntime().exec(cmdLine); } catch(Exception e){ e.printStackTrace(); } %> </body> </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:08:31.420

你不能那样做。如果调用jsp需要打开excel，需要设置响应的内容类型。IE。应用程序/vnd.ms-excel

```
<%@ page contentType="application/vnd.ms-excel" %> 
```

这将表明浏览器传入的数据流是 ms excel 并且浏览器将相应地处理它

# c# - AsQueryable() 如何在内部工作？

> ID：16014687
> 
> 赞同：3
> 
> 时间：2013-04-15T12:02:44.040
> 
> 标签：c#, linq, ravendb, asqueryable

也许这是一个简单的问题，但确实`AsQueryable()`有一些性能损失？

一般来说，我们正在使用 RavenDB，并且我们有这样的现有代码

```
protected override IQueryable<T> QueryableIndexRawQuery(string rawQuery, int skip = 0, int take = 128, string indexName = null) 
{ 
    var defaultIndexName = !string.IsNullOrWhiteSpace(indexName) ? indexName : string.Format("{0}{1}", typeof(T).Name, IndexPreffix);

    return this.Session.Advanced.DocumentStore.DatabaseCommands.GetIndex(defaultIndexName) != null 
        ? this.Session.Advanced.LuceneQuery<T>(defaultIndexName).Statistics(out this.Statistics).Skip(skip).Take(take).Where(rawQuery).AsQueryable()
        : this.Session.Advanced.LuceneQuery<T>().Statistics(out this.Statistics).Skip(skip).Take(take).Where(rawQuery).AsQueryable();
} 
```

所以 Where 子句返回我们`IDocumentQuery`然后我们尝试表示它`AsQueryable()`

```
this.Session.Advanced.LuceneQuery<T>(defaultIndexName).Statistics(out this.Statistics).Skip(skip).Take(take).Where(rawQuery) 
```

问题`AsQueryable()`最终在内部做什么？它是如何转换的？带有内存集合示例的答案`List<>`也将非常有用。

像这样：

```
 var list = new List<string>() { "1", "2", "3" };
    list.AsQueryable(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:22:37.147

`.AsQueryable()`强制我们在内存中评估查询，因为您使用的是`session.Advanced.LuceneQuery()`. 不建议这样做。`session.Query()`如果要使用 IQueryable，则需要使用。

# c# - 当我在 WPF 矩形背景中加载透明 png 图像时得到白色背景？

> ID：16014694
> 
> 赞同：1
> 
> 时间：2013-04-15T12:03:18.560
> 
> 标签：c#, wpf, png, imagebrush

当我加载`png`具有矩形背景的透明图像时`ImageBrush`，`WPF`图像后面会出现白色背景。它将所有其他内容隐藏回该图像。

```
public void DisplayModel()
{
    Uri url = new Uri("pack://application:,,,/Model/01.png");
    BitmapImage bmpimg = new BitmapImage();
    bmpimg.BeginInit();
    bmpimg.UriSource = url;
    bmpimg.EndInit();                       

    ImageBrush BrushView = new ImageBrush(bmpimg);
    BrushView.AlignmentX = AlignmentX.Right;
    BrushView.Stretch = Stretch.Fill;

    Material MaterialView = new DiffuseMaterial(BrushView);

    MeshGeometry3D mesh_view = new MeshGeometry3D();

    double Zdeep = -48;
    double x = -30;
    double y = -5;
    double xEnd = 60;
    double yEnd = 45;
    //MessageBox.Show(x.ToString()+"-"+y.ToString());
    commonObject.makeRectangle(mesh_view, new Point3D(x, y, Zdeep), new Point3D(x + xEnd, y, Zdeep), new Point3D(x + xEnd, yEnd, Zdeep), new Point3D(x, yEnd, Zdeep), new Point(0, 0), new Point(0, 1), new Point(1, 1), new Point(1, 0));

    GeometryModel3D ViewGeometry = new GeometryModel3D(mesh_view, MaterialView);
    group.Children.Add(ViewGeometry);
} 
```

这是我使用并得到这种输出的代码：

[![图像获得白色背景，图像后面的墙因白色背景而消失](https://i.stack.imgur.com/vThXr.png)](https://i.stack.imgur.com/vThXr.png)

# maven - Maven需要互联网连接吗？

> ID：16014701
> 
> 赞同：0
> 
> 时间：2013-04-15T12:03:36.740
> 
> 标签：maven

我尝试通过 maven 构建一个项目。我尝试过

```
$ mvn archetype:generate -DgroupId=org.thoughtworks.app -DartifactId=mvntest -DarchetypeArtifactId=maven-archetype-quickstart 
```

它有效。然后我尝试了

```
$ mvn archetype:generate -DgroupId=org.thoughtworks.app -DartifactId=mvntest 
```

我的意思是，我删除了archetypeArtifactId参数。它失败了，我没有为它提供Internet。错误消息在这里。这个参数是否使它需要Internet？忘记其他依赖。

```
 [INFO] artifact org.apache.maven.archetypes:maven-archetype-quickstart: checking for updates from central    
    [WARNING] repository metadata for: 'artifact org.apache.maven.archetypes:maven-archetype-quickstart' could not be retrieved from repository: central due to an error: Error transferring file: repo1.maven.org   
    [INFO] Repository 'central' will be blacklisted   
    [INFO] ------------------------------------------------------------------------  
    [ERROR] BUILD FAILURE  
    [INFO] ------------------------------------------------------------------------  
    [INFO] The desired archetype does not exist (org.apache.maven.archetypes:maven-archetype-quickstart:RELEASE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-04T07:57:37.133

在本地存储库上下载所有依赖项后，您可以使用 -o （离线）选项运行 mvn 命令，它应该可以工作，除非您不需要来自远程存储库的任何其他依赖项（当需要互联网连接时） ）。

如果您有一个存储库，其中包含网络中所需的所有依赖项，则无需外部 Internet 连接即可访问，只需编辑您的 settings.xml 以获取 Intranet 依赖项。

# android - Android：在视图下方添加阴影/windowContentOverlay

> ID：16014708
> 
> 赞同：0
> 
> 时间：2013-04-15T12:03:57.570
> 
> 标签：android, android-layout, header, android-actionbar, shadow

我已经在我的布局中手动添加了一个标题。显然阴影（在 windowContentOverlay 中定义）被放置在标题上方，但我希望它位于标题下方。那么如何在标题下方添加阴影。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:16:55.873

您应该将 ab_solid_shadow_holo.9.png 放在布局中，例如

```
<LinearLayout ...>
<ImageView ...
android:src=".../ab_solid_shadow_holo.9.png".../>
</LinearLayout> 
```

并在标头xml中使用它

```
<LinearLayout ...
android:orientation = "vertical">

...your header layout...

<include layout="@layout/action_bar_drop_shadow" />

</LinearLayout> 
```

其中 action_bar_drop_shadow 是包含带有 src 的 imageview 的 xml 的名称：ab_solid_shadow_holo.9.png

# qt - QDockWidget 没有停靠在 QDialog 上

> ID：16014713
> 
> 赞同：0
> 
> 时间：2013-04-15T12:04:09.637
> 
> 标签：qt, docking, qdialog

在 QDialog 上使用 QDockWidget 是否正确？当我尝试使用它时，停靠小部件没有停靠在对话框窗口上。执行应用程序时，我无法调整停靠小部件的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:14:56.223

`QDockWidgets`必须由 a '拥有' `QMainWindow`，但您当然可以将 a`QMainWindow`放在 a`QDialog`中。

# html - 使用 pandoc 将 html mathjax 转换为 markdown

> ID：16014717
> 
> 赞同：0
> 
> 时间：2013-04-15T12:04:23.350
> 
> 标签：html, mathjax, pandoc

我有一些 html 文件，包括 mathjax 命令。我想使用 pandoc 将它翻译成 php extra markdown。

问题是 pandoc 在所有数学命令之前添加“\”。例如 \begin{equation} \$ x\^2 等

您知道如何使用 pandoc 避免这种情况吗？我认为一个相关的问题是：[How to convert HTML with mathjax into latex using pandoc?](https://stackoverflow.com/questions/11338049/how-to-convert-html-with-mathjax-into-latex-using-pandoc)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:36:57.017

你可以编写一个简短的 Haskell 程序 unescape.hs：

```
-- Disable backslash escaping of special characters when writing strings to markdown.
import Text.Pandoc

main = toJsonFilter unescape
  where unescape (Str xs) = RawInline "markdown" xs
        unescape x        = x 
```

现在用`ghc --make unescape.hs`. 并与

```
pandoc -f html -t json | ./unescape | pandoc -f json -t markdown 
```

这将禁用`$`markdown 输出中特殊字符（如 ）的转义。

一种更简单的方法可能是通过 sed 管道 pandoc 的正常降价输出：

```
pandoc -f html -t markdown | sed -e 's/\\\([$^_*]\)/\1/g' 
```

# jquery - 将 jQuery 脚本添加到 Django 管理界面

> ID：16014719
> 
> 赞同：39
> 
> 时间：2013-04-15T12:04:37.810
> 
> 标签：jquery, python, django, admin

我将稍微简化一下情况。假设我有一个名为 Lab 的模型。

```
from django.db import models

class Lab(models.Model):
    acronym = models.CharField(max_length=20)
    query = models.TextField() 
```

字段`query`几乎总是与字段相同`acronym`。因此，我希望在 Django 管理界面`query`的字段中输入文本后自动填写该字段。`acronym`此任务必须由 jQuery 脚本执行。

因此，如果我举个例子：您想通过 Django 管理界面向数据库添加一个新实验室。您单击添加按钮，然后进入带有两个字段的空表单。您手动填写该`acronym`字段的值`ABCD`，然后该`query`字段应以相同的值自动完成，这意味着`ABCD`.

我应该如何进行？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-15T12:10:51.480

要将媒体添加到管理员，您只需将其添加到您的管理员类的元类媒体中，例如：

**管理员.py**

```
class FooAdmin(admin.ModelAdmin):
    # regular stuff
    class Media:
        js = (
            '//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', # jquery
            'js/myscript.js',       # project static folder
            'app/js/myscript.js',   # app static folder
        )

admin.site.register(Foo, FooAdmin) 
```

如果您只包含一个文件，请注意尾随逗号，因为它必须是一个元组。您也可以通过这种方式选择加入 css。

管理员已经包含（旧版本）jquery。要使用快捷方式，请将其添加到“myscript”文件的顶部：

```
if (!$) {
    $ = django.jQuery;
} 
```

为了解决您的问题，我将[扩展 admin](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)。您可以将 js 事件添加到任何 DOM 节点，以触发 myscript 文件中的 ajax 调用到正确的管理视图进行处理。

# sql-server - TSQL 中无类型 XML 的引用完整性问题

> ID：16014728
> 
> 赞同：0
> 
> 时间：2013-04-15T12:04:55.853
> 
> 标签：sql-server, xml, tsql

我将从显示我的表结构开始：

数字表：

```
Id  AccountId  MobileNr    FirstName  LastName    AttributeKeyValues  Labels
--- ---------- ----------- ---------- ----------- ------------------- -------
490 2000046    2XXXXXXXXXX Eon        du Plessis  <attrs />           <lbls>
                                                                        <lbl>Meep11e</lbl>
                                                                        <lbl>43210</lbl>
                                                                        <lbl>1234</lbl>
                                                                        <lbl>Label 5</lbl>
                                                                        <lbl>Label 6 (edit)</lbl>
                                                                      </lbls>
----------------------------------------------------------------------------- 
```

标签表：

```
Id          AccountId   Label             RGB    LastAssigned            LastMessage
----------- ----------- ----------------- ------ ----------------------- ------------
91          2000046     Meep11e           000000 2013-04-15 13:42:06.660 NULL
------------------------------------------------------------------------------------- 
```

这是问题

每个数字都可以分配有多个标签，并存储为无类型的 XML。在`Numbers.Labels` `//lbls/lbl/text()`您会注意到那里的文本将与中的文本匹配`Labels.Label`

这是更新`Numbers.Labels`列的存储过程，由我正忙于编写的外部应用程序运行。XML 结构由该外部应用程序生成，具体取决于`Labels.Label`表中读取的行

```
CREATE PROCEDURE [dbo].[UpdateLabels]
    @Id     INT,
    @Labels XML
AS
BEGIN
    UPDATE 
        Numbers
    SET
        Labels = @Labels
    WHERE
        Id = @Id

    UPDATE 
        Labels
    SET
        LastAssigned = GETDATE()
    WHERE
        label
    IN
        (SELECT @Labels.value('(//lbls/lbl)[1]', 'VARCHAR(100)'))
    END 
```

这里的问题是，如果 2 个人使用自己的会话登录同一个帐户，并且用户 1 尝试运行此更新存储过程，但就在按下按钮进行此更新之前，用户 2 删除了其中的 1 个标签包含在用户 1 的更新会话中的`Labels.label`表，它将导致 XML 包含“已删除”行，并且当我尝试再次查询数字时可能会出现问题（当我显示标签后的数字时会查询 RGB 列在 jQuery 中标记为具有十六进制彩色背景）

我的想法是在提交更新之前检查构建的 XML 中包含的行是否存在。如何在 TSQL 中实现这一点？或者有什么更好的方法可以推荐吗？

**编辑**

我们的表结构是有意非规范化的，没有外键约束。

**编辑 2**

好吧，看来我的问题有点难，或者我脑子太用力了，变得愚蠢:)。我会尽量简化。

*   在 中的`Labels`列中`Numbers`，每个`<lbl>`元素都必须存在于`Labels`表中
*   更新 中的`Labels`列时`Numbers`，如果在 XML 中找到表中不存在的 Label，则`Labels`必须引发错误。
*   XML 是在我的应用程序中预先形成的，这意味着每次运行更新时，`Labels`列中的旧 XML`Numbers`将被我的应用程序生成的新 XML 替换
*   `Labels`这是我需要检查表中不再存在的 XML 中是否存在标签节点的地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:26:44.957

在尝试任何操作之前，我会检查您的 xml 中是否有不在真实表（在数据库中）中的行。如果您发现了什么，请尽早退出。

这是一个罗斯文的例子。

```
Use Northwind
GO

DECLARE @data XML;

SET @data = 

N'
<root>
    <Order>
        <OrderId>10248</OrderId>
        <CustomerId>VINET</CustomerId>
    </Order>
    <Order>
        <OrderId>-9999</OrderId>
        <CustomerId>CHOPS</CustomerId>
    </Order>
</root>';

/* select * from dbo.Orders */

declare @Holder table ( OrderId int, CustomerId nchar(5) )

Insert Into @Holder (OrderId , CustomerId )
SELECT
      T.myAlias.value('(./OrderId)[1]', 'int') AS OrderId
    , T.myAlias.value('(./CustomerId)[1]', 'nchar(5)') AS CustomerId
FROM 
    @data.nodes('//root/Order') AS T(myAlias);

if exists (select null from @Holder h where not exists (select null from dbo.Orders realTable where realTable.OrderID = h.OrderId )) 
BEGIN
    print 'you have rows in your xml that are not in the real table.  raise an error here'
END
Else
BEGIN
    print 'Using the data'
    Update dbo.Orders Set CustomerID = h.CustomerId
    From dbo.Orders o , @Holder h
    Where o.OrderID = h.OrderId
END 
```

# java - tcp 从edittext获取客户端的ip

> ID：16014729
> 
> 赞同：0
> 
> 时间：2013-04-15T12:04:58.103
> 
> 标签：java, tcp

我有 tcp 多线程服务器，我将在 pc 上的 android 设备和客户端上运行，服务器只接收消息并将 msg 发送回来。我想问是否可以使用edittext从用户输入中获取客户端IP？我是否需要在此处（服务器）传递此值，因为在我仅在平面 java 中运行程序之前我没有这样做。Smth like（如果它是正确的地方）

```
server= new ServerSocket("xxx.xxx.x.xxx" ,5555); 
```

我如何从edittext中读取值并在这里使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:00:38.730

您的问题不是很清楚，但是服务器可以从套接字中获取客户端的IP地址：

```
csocket.getRemoteSocketAddress().toString(); 
```

# servicestack - 有没有办法调试 ModelBinding？

> ID：16014731
> 
> 赞同：2
> 
> 时间：2013-04-15T12:05:01.367
> 
> 标签：servicestack, model-binding

我正在使用 ServiceStack，但我的一个请求 DTO 遇到了困难。即使我可以看到它在请求中正确设置，类型的属性之一`int`总是会出现。`0`

**是否有在 ServiceStack 中调试 ModelBinding 进程的方法？**

# android - 尝试在运行时更改主布局时应用程序崩溃

> ID：16014732
> 
> 赞同：-2
> 
> 时间：2013-04-15T12:05:14.383
> 
> 标签：android

尊敬的 stackoverflow 用户，我最近在我的应用程序“（MinePedia）”中添加了一个新竞赛，获胜者会收到一个免费的竞赛获胜者应用程序插件“（com.shadycorp）”，我希望我的应用程序主要活动显示备用 layout.xml在运行时，如果用户安装了竞赛插件“（com.shadycorp）”并且我已经使用 if 和 else 来尝试达到我想要的结果，但是每次我启动它时我的应用程序都会崩溃。所以这里的任何人都可以帮忙我

这是（Minepedia）的MainActivity

```
package com.shadycorp.minecraftrecipebook;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
         Button button2 = (Button) findViewById(R.id.button1);
            button2.setOnClickListener(new OnClickListener() {          
                public void onClick(View v) {
                    startActivity(new Intent(getApplicationContext(), MainActivity2.class));
                }
            });

            Button button9 = (Button) findViewById(R.id.info);
            button9.setOnClickListener(new OnClickListener() {          
                public void onClick(View v) {
                    startActivity(new Intent(getApplicationContext(), AppInf.class));       
                }
            });

            Button button91 = (Button) findViewById(R.id.dlc);
            button91.setOnClickListener(new OnClickListener() {         
                public void onClick(View v) {

                    startActivity(new Intent(getApplicationContext(), DLC.class));
                }
            });

            Button button96 = (Button) findViewById(R.id.help);
            button96.setOnClickListener(new OnClickListener() {         
                public void onClick(View v) {
                    startActivity(new Intent(getApplicationContext(), Instruction.class));              
                }
            });

            // this
            String ns = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

            int icon = R.drawable.launcher;        
            CharSequence tickerText = "MinecraftPedia"; // ticker-text
            long when = System.currentTimeMillis();         
            Context context = getApplicationContext();     
            CharSequence contentTitle = "MinePedia";  
            CharSequence contentText = "This is the quick launch button for MinePedia";      
            Intent notificationIntent = new Intent(this, MainActivity.class);
            PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
            Notification notification = new Notification(icon, tickerText, when);
            notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

            // and this
            final int HELLO_ID = 1;
            mNotificationManager.notify(HELLO_ID, notification);
            boolean installed  =   appInstalledOrNot("com.shadycorp");  
            if(installed)
            {
            //set if action
                setContentView(R.layout.winner_main);
            }
            else
            {
              //set else action
                setContentView(R.layout.activity_main);
            }
        }
        private boolean appInstalledOrNot(String uri)
        {
            PackageManager pm = getPackageManager();
            boolean app_installed = false;
            try
            {
                   pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
                   app_installed = true;
            }
            catch (PackageManager.NameNotFoundException e)
            {
                   app_installed = false;
            }
            return app_installed ;            
    }               
} 
```

这是 LogCat

```
04-15 12:01:07.529: E/AndroidRuntime(827): FATAL EXCEPTION: main
04-15 12:01:07.529: E/AndroidRuntime(827): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.shadycorp.minecraftrecipebook/com.shadycorp.minecraftrecipebook.MainActivity}: java.lang.NullPointerException
04-15 12:01:07.529: E/AndroidRuntime(827):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:09:31.183

这是因为您正在从**尚不存在的布局**中调用按钮（或任何其他 UI 组件） 。

在调用任何组件*之前*，您需要运行条件逻辑并设置布局。

还要记住：由于它们是不同的布局，它们可能不包含相同的组件，因此，当您决定要设置哪个布局时，如果您尝试调用按钮和当前布局中没有声明，会抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:12:57.190

在创建调用时，您必须在第一个语句中使用默认布局行，因为您无法在没有布局的情况下添加按钮

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main); 
```

}

```
 public void addButton(){

                  Button button9 = (Button) findViewById(R.id.info);
                  button9.setOnClickListener(new OnClickListener() {          
                      public void onClick(View v) {
                          startActivity(new Intent(getApplicationContext(),                    

                              AppInf.class));  
                        }
                  });

                  Button button91 = (Button) findViewById(R.id.dlc);
                  button91.setOnClickListener(new OnClickListener() {         
                      public void onClick(View v) {

                          startActivity(new Intent(getApplicationContext(),           

                                    DLC.class));
                                   }
                  });

                  Button button96 = (Button) findViewById(R.id.help);
                  button96.setOnClickListener(new OnClickListener() {         
                      public void onClick(View v) {
                          startActivity(new Intent(getApplicationContext(),                

                        Instruction.class)); 
                    }
                  });
                     } 
```

现在在任何你想要的地方调用这个方法，不要忘记在两个布局中添加按钮布局定义..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:14:29.473

您应该根据包含的布局 First 获取每个视图的所有 reference_ID。

> 在尝试使用 ID 查找视图之前先设置此条件。

```
boolean installed  =   appInstalledOrNot("com.shadycorp");  
            if(installed)
            {
            //set if action
                setContentView(R.layout.winner_main);
            }
            else
            {
              //set else action
                setContentView(R.layout.activity_main);
            } 
```

假设您必须维护一个`Boolean`，`layout`当您使用两者中的任何视图时，两者都存在`layout`

# uitableview - 寻找具有无限滚动的 UITableView ，上下方向

> ID：16014733
> 
> 赞同：0
> 
> 时间：2013-04-15T12:05:16.157
> 
> 标签：uitableview, infinite-scroll

我想要 UITableView 具有无限滚动功能，无论是向上还是向下。表视图中显示的数据来自可变数组。

它的数字在 1 到 10 和 10 之后。然后它应该从 1 再次重复循环。不影响滚动的平滑度。任何人都可以帮助我提供示例代码。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T03:40:50.463

我不是很清楚你在问什么。

您想通过仅让数字 1 到 10 无限重复来测试 tableview 吗？

例如，您是否尝试使用分页并一次获取十条记录的模拟实现进行测试？

# c++ - 避免在默认模板中使用尖括号

> ID：16014736
> 
> 赞同：10
> 
> 时间：2013-04-15T12:05:18.763
> 
> 标签：c++, templates, coding-style, class-template

如果我有一个具有默认模板类型的模板类，我必须编写模板尖括号。**有没有可能避免这种情况？**

例子：

```
template <typename T=int>
class tt {
public:
  T get() { return 5; }
};

...

tt<> t;  // how to avoid <>
std::cout << t.get() << std::endl; 
```

到目前为止，我已经通过一个单独的命名空间并重新声明了这个类：

```
namespace detail_ {
template <typename T=int>
class tt {
public:
  T get() { return 5; }
};
}

class tt : public detail_::tt {}

...

tt t;
std::cout << t.get() << std::endl; 
```

问题是，如果我想将该类与其他类型一起使用，我必须检查命名空间 detail_。**是否有另一种解决方案**，我还没有看到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T12:21:43.440

*...如果我想使用课程...*

这是一个常见的混淆来源。类模板不是类，而是从中生成类的模板。尖括号告诉编译器你想用给定的模板参数从类模板中生成一个类，没有尖括号你所拥有的是一个*模板*。

```
template <typename T = int>
struct TemplateClass { /*...*/ };

template <template <typename>  class T>
void f() {
   T<int> t; // ...
}
template <typename T>
void g() {
   T t; // ...
}

f<TemplateClass>();     // Accepts a template with a single type argument
g<TemplateClass<> >();  // Accepts a type, that can be generated out of the template 
```

语言不允许模板和同名类型在同一个命名空间中共存，所以答案是做不到。您可以创建一个类型别名，但您必须给它一个不同的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T12:06:44.173

你可以使用类型定义...

```
typedef tt<> tt_; 
```

然后简单地使用`tt_`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-18T11:21:49.723

从 C++17 开始，由于[类模板参数推导](https://en.cppreference.com/w/cpp/language/class_template_argument_deduction)，事情[发生了变化](https://wandbox.org/permlink/7OuyNQLuzYgGOjAA)。

`tt`并且`tt<>`不是一回事：类型和类模板是不同的，并且继续被区别对待。

无论如何，在您示例中的简单场景中，C++ 17 假定您的意思是什么，并且`<>`不再需要。

更多细节：

*   [模板默认参数](https://stackoverflow.com/q/15373823/3235496)（特别是[https://stackoverflow.com/a/50970942/3235496](https://stackoverflow.com/a/50970942/3235496)）；
*   [为什么在指定所有模板参数都具有默认值的模板类时需要 <>？](https://stackoverflow.com/q/42670137/3235496)

# javascript - EmberJS如何处理transitionTo

> ID：16014743
> 
> 赞同：1
> 
> 时间：2013-04-15T12:05:46.927
> 
> 标签：javascript, jquery, ember.js

我有以下代码，当输入搜索查询并按下输入按钮或单击提交按钮时，它会调用 transitionToRoute('search') 。

但是，我的路由器仍然不会在它说的模板中显示 searchQuery：

`<p>You searched for: "{{searchQuery}}"</p>`

`http://www.example.com/#/search/[object Object]`并且 URL在搜索某些东西时看起来像（这对我来说似乎不正确）。

（完整代码可以查看：http: [//jsfiddle.net/Mn2yy/1/](http://jsfiddle.net/Mn2yy/1/)）这是相关代码：

模板：

```
<script type="text/x-handlebars" data-template-name="container">
    <button {{action "doSearch"}} rel="tooltip-bottom" title="search" class="icon"><i class="icofont-search"></i></button>
    {{view Ember.TextField valueBinding="search" action="doSearch"}}

    {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="searchpage">
    <h1>Search</h1>
    {{#linkTo "home"}}Homepage{{/linkTo}}
    <p>You searched for: "{{searchQuery}}"</p>
</script> 
```

应用控制器：

```
MyApp.ApplicationController = Ember.Controller.extend({
    // the initial value of the `search` property
    search: '',

    doSearch: function() {
        // the current value of the text field
        var query = this.get('search');
        this.transitionToRoute('search');
    }
}); 
```

和 Searchpage 路线：

```
MyApp.SearchRoute = Ember.Route.extend({
    setupController: function(controller) {
        controller.set('searchQuery', this.get('query'));
    },

    renderTemplate: function() {
        this.render('searchpage', { into: 'container' });
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:18:35.577

首先，您需要在路由器中为搜索路由定义动态段：

```
MyApp.Router.map(function() {
    this.route("home", { path: "/" });
    this.route("search", { path: "/search/:query" })
}); 
```

然后在操作中设置`searchQuery`应用程序的属性`doSearch`。您还将`query`变量传递给`transitionToRoute`方法，因为它将填充动态段。

```
MyApp.ApplicationController = Ember.Controller.extend({
    // the initial value of the `search` property
    search: '',

    doSearch: function() {
        // the current value of the text field
        var query = this.get('search');
        this.set('searchQuery', query);
        this.transitionToRoute('search', query);
    }
}); 
```

由于您需要从`App.SearchController`实例访问此属性，因此您需要使用`needs`API 将 2 个控制器连接在一起：

```
MyApp.SearchController = Ember.Controller.extend({
    needs: ['application'],
    application: Ember.computed.alias('controllers.application')
}); 
```

*将`controllers.application`属性别名为 just `application`，以避免输入过多，例如。在模板中。*

`search`然后在模板中绑定到这个属性：

```
<script type="text/x-handlebars" data-template-name="searchpage">
    <h1>Search</h1>
    {{#linkTo "home"}}Homepage{{/linkTo}}
    <p>You searched for: "{{application.searchQuery}}"</p>
</script> 
```

最后一步：如果此时刷新页面，`searchQuery`不会自动从 URL 填充。让我们用`deserialize`钩子来解决这个问题：

```
MyApp.SearchRoute = Ember.Route.extend({  
    deserialize: function(params) {
        this.controllerFor('application').setProperties({
            searchQuery: params.query,
            search: params.query
        });
    },

    renderTemplate: function() {
        this.render('searchpage', { into: 'container' });
    }
}); 
```

这将从 URL 获取参数并使用`query`键的值设置应用程序控制器。

差不多就这些了，希望没有遗漏！

# javascript - 如何为 WinJS.Resources.processAll 切换语言？

> ID：16014756
> 
> 赞同：0
> 
> 时间：2013-04-15T12:06:30.187
> 
> 标签：javascript, windows-8, localization, winjs

使用 WinJS.Resources.processAll 时，WinJS 使用的是系统语言，这很好。此 MSDN 站点上的示例显示，如何更改语言/上下文以更改单个字符串：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465248.aspx#loading_strings_for_a_specific_language_or_context](http://msdn.microsoft.com/en-us/library/windows/apps/hh465248.aspx#loading_strings_for_a_specific_language_or_context)。

但是，只要 WinJS.Resources.processAll 需要更改一大堆字符串，怎么可能更改语言呢？

```
// (?) switch language just for the next call (?)
WinJS.Resources.processAll(target).next(function () {
    // (?) switch language back (?)
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:23:30.877

看来这个[http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.resources.core.resourcecontext](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.resources.core.resourcecontext)应该让你开始。

# javascript - Rails javascript文件上的编码问题

> ID：16014764
> 
> 赞同：0
> 
> 时间：2013-04-15T12:07:04.080
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, character-encoding

我有一个 Rails 应用程序，带有一些 javascripts（用 UTF-8 编写）。其中一个 javascripts 包含非 ANSI 字符，如 à。当 javascript 被编译时（一个 javascript 是从其中许多创建的），这个字符被错误地写入。

例如，ó 变成 Ã³

我知道肯定有编码问题，但我不知道如何解决。以某种方式告诉rails我的javascript是UFT-8吗？我尝试将 <%# encoding: utf-8 %> 添加到 js 文件中，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:42:50.017

我会借用@Kodak 的答案（并稍微强调一下）：

> **尝试将其重命名为 js.erb**并将 <%# encoding: utf-8 %> 放在顶部

可以在此处找到该线程，并提供更多信息。希望能帮助到你！

[Rails 中 JavaScript 资源中的编码错误](https://stackoverflow.com/questions/9822597/encoding-error-in-javascript-asset-in-rails)

# javascript - 跨框架跨站脚本——创建网页重载器/看门狗

> ID：16014769
> 
> 赞同：1
> 
> 时间：2013-04-15T12:07:21.880
> 
> 标签：javascript, html, watchdog, cross-site

**设置：**

有远程测量站，有集中的收集/处理/呈现服务器（带有网络服务器），还有观察站，为客户显示收集的数据。

这些观察站由简单的嵌入式计算机组成，配备网络浏览器，以信息亭模式工作，每个都显示来自中央服务器的一个特定网页。该网页使用 AJAX 更新，显示给定测量站的最新测量结果。连接到固定监视器，这些站应该可以几乎免维护运行多年。

现在我们已经解决了大部分问题，但问题是：如果网络服务器出现故障怎么办？浏览器将加载“无法访问”、“404”、“权限被拒绝”、“500”或服务器在该点采取的任何故障模式，并保持在那里直到有人手动重新启动观察站。

我想出的一般解决方案是将浏览器的主页设置为观察到的页面，而不是设置为始终可用的本地 HTML 文件，该文件将定期检查远程页面是否已正确加载和更新，如果失败则重新加载以任何理由执行。

**问题：**

问题在于跨框架脚本。我猜目标网页必须加载为框架、iframe、文本/HTML 类型的对象或其他方式，使其在不删除/禁用本地“容器”文件的情况下显示。几年前我写了一个跨框架脚本页面，绕过安全对策并不容易。从那时起，安全必须加强。

因此，从远程服务器加载的页面包含一段 javascript，如果一切顺利，它会定期启动（一些 setInterval），或者如果出现问题则不会。该信号周期性地到达容器帧使其重置其超时并且不采取任何其他动作。

如果信号没有到达，当超时到期时，容器开始定期刷新加载的网页，直到服务器固定并加载正确的内容，向加载器发出信号。

每次触发特定功能时，如何让远程页面向从 file:// URL 加载的本地（容器）页面发出“活动”信号（例如，设置变量）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-09T17:39:32.403

有一个名为[porthole](https://github.com/ternarylabs/porthole)的库，它基本上可以完成 SF. 的回答所描述的内容，但形式更正式。我刚刚写了一个网页来切换显示两个 iframe 之一。在我的顶级网页中

```
var windowProxy;
windowProxy = new Porthole.WindowProxy(baseURL + '/porthole/proxy.html', frameId);
windowProxy.addEventListener(onMessage);
...
function onMessage(messageEvent) {
    if (messageEvent.origin !== baseURL) {
        $log.error(logPrefix + ': onMessage: invalid origin');
        console.dir(messageEvent);
        return;
    }
    if (messageEvent.data.pong) {
        pongReceived();
        return;
    }
    $log.log(logPrefix + ': onMessage: unknown message');
    console.dir(messageEvent);
}
...
var sendPing = function () {
    $log.log(logPrefix + ': ping to ' + baseURL);
    ...
    windowProxy.post({ 'ping': true });
}; 
```

加上一些额外的控制逻辑。在子网页中，以下是我必须添加的所有内容（加上`portholeService.init()`来自控制器的调用）：

```
// This service takes care of porthole (https://github.com/ternarylabs/porthole)
// communication if this is invoked from a parent frame having this web page
// as a child iframe. Usage of porthole is completely optional, and should
// have no impact on anything outside this service. The purpose of this
// service is to enable some failover service to be build on top of this
// using two iframes to switch between.
services.factory('portholeService', ['$rootScope', '$log', '$location', function ($rootScope, $log, $location) {
    $log.log('Hello from portholeService');

    function betterOffWithFailover() {
        ...
    }

    function onMessage(messageEvent) {
        $rootScope.$apply(function () {
            if (messageEvent.origin !== baseUrl) {
                $log.error('onMessage: invalid origin');
                console.dir(messageEvent);
                return;
            }

            if (!messageEvent.data.ping) {
                $log.error('unknown message');
                console.dir(messageEvent.data);
                return;
            }

            if (betterOffWithFailover()) {
                $log.log('not sending pong');
                return;
            }

            windowProxy.post({ 'pong': true });
        });
    }

    var windowProxy;
    var baseUrl;
    function init() {
        baseUrl = $location.protocol() + '://' + $location.host() + ':' + $location.port();
        windowProxy = new Porthole.WindowProxy(baseUrl + '/porthole/proxy.html');
        windowProxy.addEventListener(onMessage);
    }

    return {
        init: init
    };
}]); 
```

* * *

作为参考，这些页面使用[AngularJS](https://www.angularjs.org/)，以防`$rootScope.$apply`您不熟悉等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:54:18.397

跨框架、跨站点通信的方法是使用postMessage。

包含的框架在每次正确执行时应执行：

```
window.top.postMessage('tyrp', '*'); 
```

容器文件应包含：

```
window.onmessage = function(e)
{
    if (e.data == 'tyrp') {
        //reset timeout here
    }
}; 
```

# java - AppEngine (Java) 上的 Adwords API

> ID：16014774
> 
> 赞同：2
> 
> 时间：2013-04-15T12:07:39.433
> 
> 标签：java, google-app-engine, google-ads-api

我正在尝试在 Google App Engine (Java 1.7.7) 上使用 Adwords Api。

我尝试使用默认依赖项：

```
 <dependency>
        <groupId>com.google.api-ads</groupId>
        <artifactId>ads-lib</artifactId>
        <version>1.14.1</version>
    </dependency>
    <dependency>
        <groupId>com.google.api-ads</groupId>
        <artifactId>adwords-axis</artifactId>
        <version>1.14.1</version>
    </dependency> 
```

它们在开发服务器上工作正常，但在生产中失败（这本身就很奇怪）。

在谷歌搜索并没有找到任何东西后，我做了另一个 MavenSearch 并发现：

```
 <dependency>
        <groupId>com.google.api-ads</groupId>
        <artifactId>adwords-appengine</artifactId>
        <version>1.14.1</version>
    </dependency> 
```

我尝试使用那个看起来不错的库。

我将代码切换为使用 Api 提供的 import com.google.api.ads.adwords.jaxws.v201302.*。

但是即使在开发服务器上，东西也很糟糕：例如 java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "accessClassInPackage.com.sun.xml.internal.ws")。

它还在生产中中断 - 例如： java.lang.SecurityException: java.lang.IllegalAccessException: Reflection is not allowed on private javax.xml.ws.wsaddressing.W3CEndpointReference$Address javax.xml.ws.wsaddressing.W3CEndpointReference.address

简单总结一下：

我的应用程序运行良好并且可以正常工作。但不在 AppEngine 生产中。而不是使用 adwords-appengine。

有没有很好的教程如何在 AppEngine 上设置 ads-lib？似乎官方网站没有对教程（甚至是库）的单一引用。我想知道是否有人在使用 com.google.api-ads 的 adwords-appengine。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:03:23.390

好的，“解决方案”如下：

1) 使用

```
<dependency>
    <groupId>com.google.api-ads</groupId>
    <artifactId>adwords-appengine</artifactId>
    <version>1.14.1</version>
</dependency> 
```

2) 确保您只使用 jaxws - 例如：

```
com.google.api.ads.adwords.jaxws.v201302.* 
```

3) 注意生产中的“真正”问题。App Engine 上的许多错误消息只是警告，可以忽略。特别注意 BeansUtils 异常并在您的代码中修复它们。一些 Adwords 类使用 BeanUtils（和反射）并且不在 AppEngine 上运行。我能够轻松地在我的代码中解决这些问题。

4) AppEngine:devserver 1.7.7 坏了，因为它会抛出很多

```
java.security.AccessControlException: access denied exceptions. 
```

但

在生产中不会发生这些错误。我正在使用 Ninja 开发我的应用程序，因此我可以轻松地从官方开发服务器切换。但是，如果你不能切换，我猜你会被卡住。[在https://code.google.com/p/googleappengine/issues/detail?id=9213](https://code.google.com/p/googleappengine/issues/detail?id=9213)提交了一个错误

**更新**

Adsense AppEngine 团队反应迅速，该问题将在下一个 devserver 1.7.8 中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:25:02.730

您可以使用以下命令行选项禁用开发应用服务器中的安全检查：--jvm_flags=-D--enable_all_permissions=true

# php - $_FILES 为空，enctype 已设置，我之前用过

> ID：16014775
> 
> 赞同：0
> 
> 时间：2013-04-15T12:07:42.653
> 
> 标签：php, file, upload, isnullorempty

FILES 是空的，但它不应该是。我以前上传过文件。该文件足够小，我正在使用 enctype （对于许多其他人来说，这就是问题所在）。我正在上传txt文件。我还在另一个 php 文件中使用了相同的设置来将更大的 txt 文件上传到同一个目录，并且它可以工作（实际上我只是从另一个文件中复制了代码！）。

这是我的表格（上一个提交下一个）：

```
<form name=fileForm action='FTtoXML.php' enctype="multipart/form-data" method='post'>
<input type='file' name='file' id='file' onChange=document.forms['saveForm'].submit()>
</form>

<form name=saveForm id=saveForm action='FTtoXML.php' enctype="multipart/form-data" method=post>
<input type=hidden id=gameToSave name=gameToSave value='yes'>
</form> 
```

然后是一些调试php代码：

```
if ($_FILES["file"]["error"] > 0)
{
echo "Error: " . $_FILES["file"]["error"] . "<br />";
}
else
{
echo "no file error<p>";
echo "var_dump: ".var_dump($_FILES)."<br>";
echo 'file_uploads: '. ini_get('file_uploads'). '<br />';
echo 'upload_tmp_dir: '. ini_get('upload_tmp_dir'). '<br />';
echo 'upload_max_filesize: '. ini_get('upload_max_filesize'). '<br />';
echo 'max_file_uploads: '. ini_get('max_file_uploads'). '<br />';
echo "Upload: " . $_FILES["file"]["name"] . "<br>";
echo "Type: " . $_FILES["file"]["type"] . "<br>";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>"; 
```

输出：

```
var_dump: array(0) { }  
file_uploads: 1
upload_tmp_dir: /tmp
upload_max_filesize: 10M
max_file_uploads: 
Upload: 
Type: 
Size: 0 kB
Temp file: 
```

所以你可以看到没有名称、类型等。然后当我尝试打开文件时，

```
if (file_exists("uploads/" . $_FILES["file"]["name"]))
{
echo "filealreadyexists<br>";
} 
```

是的，输出：filealreadyexists

因此，如果空文件名不存在，它似乎被视为存在？因此，稍后当我尝试移动文件时......

```
move_uploaded_file($_FILES["file"]["tmp_name"],  "uploads/mydoc.txt"); 
```

...它不起作用，当我尝试打开文件时...

```
$file = fopen("uploads/mydoc.txt", "r") or exit("Unable to open file!"); 
```

...它说“无法打开文件！” 因为该文件在目录中不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:14:29.897

将您显示的 HTML 更改为：

```
<form name='saveForm' action='FTtoXML.php' enctype="multipart/form-data" method='post'>
<input type='file' name='file' id='file' onChange=document.forms['saveForm'].submit()>
<input type=hidden id=gameToSave name=gameToSave value='yes'>
</form> 
```

这样一来，一切都在一种形式中。您提交的底部表单不包含`<input type='file'`

# ios - 通过 IOS 应用内购买的附加功能选项

> ID：16014777
> 
> 赞同：2
> 
> 时间：2013-04-15T12:07:52.877
> 
> 标签：ios, objective-c, in-app-purchase

对 IAP（非消耗性）是否扩展应用程序的功能有点困惑：

1.  只需解锁预编码功能
2.  提供一种使用新功能动态扩展应用程序的方法

欢迎任何帮助、指导和最佳实践！

提前感谢弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:10:16.693

您可以两者都做，具体取决于非消耗品是什么。如果是媒体文件，那么您可以让您的应用下载它。通常，如果您销售添加功能的代码，开发人员倾向于对其进行预编码，并且在购买发生时，添加一个标志`NSUserDefaults`来解锁它。这要简单得多。

# maven - Jenkins 中的 Checkstyle - NoSuchMethodError

> ID：16014778
> 
> 赞同：1
> 
> 时间：2013-04-15T12:08:07.523
> 
> 标签：maven, jenkins, checkstyle

我正在尝试让 checkstyle 在詹金斯工作。仅在 maven 中，一切运行顺利，但是当我在 jenkins 中运行 checkstyle:checkstyle 目标时，出现以下错误：

```
mojoSucceeded org.apache.maven.plugins:maven-checkstyle-plugin:2.10(default-cli)
   java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
at hudson.remoting.UserRequest.perform(UserRequest.java:118)
at hudson.remoting.UserRequest.perform(UserRequest.java:48)
at hudson.remoting.Request$2.run(Request.java:326)
at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:722)

Caused by: java.lang.NoSuchMethodError: hudson.plugins.analysis.core.FilesParser.<init>(Ljava/lang/String;Lhudson/plugins/analysis/core/AnnotationParser;Ljava/lang/String;)V
at hudson.plugins.checkstyle.CheckStyleReporter.perform(CheckStyleReporter.java:123)
at hudson.plugins.analysis.core.HealthAwareReporter.postExecute(HealthAwareReporter.java:313)
at hudson.maven.Maven3Builder$MavenExecutionListener.recordMojoEnded(Maven3Builder.java:421)
at hudson.maven.Maven3Builder$MavenExecutionListener.mojoSucceeded(Maven3Builder.java:403)
at org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult.fire(DefaultExecutionEventCatapult.java:87)
at org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult.fire(DefaultExecutionEventCatapult.java:42)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:228)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
... 18 more
channel stopped 
```

我正在使用以下版本：

*   詹金斯版 1.480.3
*   Checkstyle 插件 3.35
*   静态分析采集器插件 1.35
*   Maven 集成插件 1.480.3

# php - 从数据库中获取一个表，向其中添加一列，然后将其插入另一个

> ID：16014781
> 
> 赞同：0
> 
> 时间：2013-04-15T12:08:19.193
> 
> 标签：php, sql, database, phpmyadmin

我是 php 新手，所以请多多包涵。

我正在尝试从一个数据库中获取一个表，向其中添加一列，然后将其插入另一个数据库。

这似乎很简单。我只是使用 fetch_assoc 来获取数据，然后遍历数组并添加我想要的。

问题是：使用 fetch_assoc 获取数据似乎不起作用，并且我的代码给出了错误。

这是我所做的：

```
 $sql = mysql_query("SELECT InterestedEntityId, Score FROM users.`user_interests` WHERE UserId= 6268694 ORDER BY Score DESC");

    $interestTable = array();

    while ($row = mysql_fetch_assoc($sql)) //I get an error in this step.
        $interestTable[] = $row; 

//-------------------------------------------------

//here is what I would have done had the above code worked.

    foreach( $interestTableas &$row) {  //go over each row and add a column "Name" with value "something"
         $row->Name = "something";
    } 
```

有人可以帮我解决这个问题吗？我走在正确的轨道上，还是有更简单的方法来做事？

提前致谢，

**编辑** 谢谢大家的提示，经过一番调查，我将问题缩小到第二个 foreach 循环。IE的问题在于以下代码：

```
 foreach( $interestTableas &$row) {  //go over each row and add a column "Name" with value "something"
         $row->Name = "something";
    } 
```

问题就在那里，其余代码工作正常。

# database - 如何在 Ubuntu 13.04 上更改 Postgresql 中的数据目录

> ID：16014784
> 
> 赞同：2
> 
> 时间：2013-04-15T12:08:21.693
> 
> 标签：database, postgresql, ubuntu

我在 ubuntu 13.04 上更改 postgresql 9.1 上的数据目录时遇到问题：

我首先做了一个：

```
sudo pg_dropcluster --stop 9.1 main 
```

然后尝试在所需路径中创建一个新路径：

```
 sudo pg_createcluster -d /home/fccoelho/Documentos/databases/postgresqldata 9.1 main 
```

但我因权限被拒绝而失败：

```
Creating new cluster (configuration: /etc/postgresql/9.1/main, data: /home/fccoelho/Documentos/databases/postgresqldata/)...
initdb: could not access directory "/home/fccoelho/Documentos/databases/postgresqldata": Permission denied
Error: initdb failed 
```

我应该提到我检查了权限，尝试手动创建目录并在之后“chowning”给用户 postgres 等等。没有任何改变权限被拒绝的消息。

我还尝试使用与 POstgresql 一起分发的 initdb 二进制文件，但没有成功

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:37:00.607

我找到了一个workaraound，但不是真正的解决方案：

我发现我无法在我的主树中维护数据目录，所以我创建了一个新目录***/home/postgresqldata/***并运行：

```
sudo pg_createcluster -d /home/postgresqldata/ 9.1 main 
```

一切都按预期工作！

# entity-framework-4 - linq to entity - 使用新值更新表不起作用

> ID：16014789
> 
> 赞同：1
> 
> 时间：2013-04-15T12:08:33.650
> 
> 标签：entity-framework-4, linq-to-entities, asp.net-webpages

下面的代码将正确的值更新到 OBJECT_TYPES 表中，但是 OBJECT_ITEMS 表正在被覆盖，但我不知道为什么。任何人都可以帮忙吗？

```
 var templateId = Request["id"].AsInt();
var dbcontext = new STDEntities1();
var query = dbcontext.OBJECT_TYPES.Where(o => o.ID == templateId);
var template = query.FirstOrDefault();
var newItem = new OBJECT_TYPES
{
    CATEGORY_ID = template.CATEGORY_ID,
    COMPANY_ID = template.COMPANY_ID,
    OBJECT_NAME = "** Select A Name **",
    HEIGHT = template.HEIGHT,
    WIDTH = template.WIDTH,
    TEMPLATE = template.ID
};

foreach (var field in template.OBJECT_ITEMS)
{
    newItem.OBJECT_ITEMS.Add(field);

}
dbcontext.OBJECT_TYPES.Add(newItem);
dbcontext.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:04:32.147

发生这种情况是因为您添加的字段实际上是由 dataContext/dbContext 跟踪的对象，甚至有一个 id。所以这些值被覆盖了。

尝试创建一个新字段或尝试从上下文中分离该字段，然后将 Id/Primary 键设置为 0 并尝试再次插入它。

# javascript - EaselJS 代码的 Javascript 编辑器完成

> ID：16014791
> 
> 赞同：1
> 
> 时间：2013-04-15T12:08:45.867
> 
> 标签：javascript, ide, code-completion, easeljs

我可以使用什么 javascript 编辑器来完成 EaselJS 代码？我尝试了适用于 Eclipse 的 Aptana 插件，但没有成功，我还尝试使用以下命令制作未压缩文件并导入解压缩文件

> 节点 ./build.js --format=PRETTY_PRINT

我也尝试为 EaselJS 寻找 sdocml，但我找不到任何东西。

有谁知道我们如何完成 EaselJS 代码？

谢谢

-马兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:02:37.573

虽然这不是官方的，不幸的是我没有时间将其调整为 EaselJS 0.6.0 这里是 SublimeText 的代码完成：http://indiegamr.com/easeljs-codecompletion-for-sublimetext2/ [-](http://indiegamr.com/easeljs-codecompletion-for-sublimetext2/)但是请注意，这不是您可能习惯于 Java 或 AS3 的“智能”完成，但它包括方法和属性等。从 0.5.0

CreateJS 还有一个 TypeScript 定义：[https](https://bitbucket.org/drk4/createjs_ts_definitions) ://bitbucket.org/drk4/createjs_ts_definitions （不幸的是，也只有 EaselJS 0.5.0）——但如果你想要一个好的/智能代码，TypeScript 是比纯 JS 更好的选择——完成。- 但也许你可以在网上找到 0.6.0 的东西。

*编辑：这看起来像是 TypeScript 的更新版本：[https ://nuget.org/packages/easeljs.TypeScript.DefinitelyTyped/](https://nuget.org/packages/easeljs.TypeScript.DefinitelyTyped/)

# java - 数组返回一个字符串而不是一个对象

> ID：16014794
> 
> 赞同：1
> 
> 时间：2013-04-15T12:08:51.373
> 
> 标签：java

你好，我必须首先制作一个程序我要求登录代码我放了一个`try/catch`因为我希望密码只有数字，如果给一个字符来刺激异常，第二个不是显示对象数组`Product`而是一个字符串`Productl@pos51sd`和我找不到为什么要给我看这个。

```
import java.rmi.Naming;
import java.util.Scanner;

public class RMIClient {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
                int pin=0;
        try {   

            String  name    =   "//Localhost/RMI_Server";
            Functions lp    =(Functions)Naming.lookup(name);
            try{
            System.out.println("Please give your Personal Code (PIN)");

                        pin=in.nextInt();
             }catch (NumberFormatException nfe) {
                    System.out.println("Input must be a number.");
                            }
            if(lp.validate(pin)){
            System.out.println("Give description of item");
            String desc=in.next();
                        int sizep=lp.search(desc).length;
                        Product [] p =new Product[sizep];
                        System.arraycopy(lp.search(desc),0,p,0,sizep);
                        for(int i=0;i<sizep;i++){
            System.out.println(p[i].toString());}
            System.out.println("Give numberCode of item you want to buy");
            String code=in.next();
            System.out.println(lp.purchase(code));
            }else{
            System.out.println("Your code is False");}
            lp.close();
        }catch (Exception   e)  {
             System.out.println("SumClient  err:    " + e); 
             System.exit(1);
        }   
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:35:18.660

类产品'import java.io.Serializable;

公共类产品实现可序列化{

```
private String description;
private String serialNum;
private float price;
private String company;

public Product(String description,String serialNum,float price,String company){
this.description=description;
this.serialNum=serialNum;
this.price=price;
this.company=company;       
}

public void set_description(String description){this.description=description;}
public String get_description(){return description;}
public void set_serialNum(String serialNum){this.serialNum=serialNum;}
public String get_serialNum(){return serialNum;}
public void set_price(float price){this.price=price;}
public float get_price(){return price;}
public void set_company(String company){this.company=company;}
public String get_company(){return company;}

public String toSting(){
    return "Item "+ serialNum +" is product from "+ company +" price " + price +"E Description: ( "+ description +" )";

} 
```

} '

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:11:55.007

它打印 toString() 方法的结果。

您可以在 System.out 上找到有关打印异常的一些详细信息。在java这里[http://alvinalexander.com/blog/post/java/java-exception-printing-log4j](http://alvinalexander.com/blog/post/java/java-exception-printing-log4j)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:15:04.240

不幸的是，您没有向我们展示该类`Product`，但您真正想要做的是`toString()`根据您的要求在该类中实现方法。我不知道是什么`pos51sd`，但只是为了讨论让我们调用包含这个值的变量`code`。

在这种情况下，您的课程`Product`应如下所示：

```
class Product {
    .....
    private String code;
    .......

    public String toString() {
        return getClass().getSimpleName() + "@" + code;
    }
} 
```

# java - 如何创建大小大于整数最大值的数组

> ID：16014799
> 
> 赞同：11
> 
> 时间：2013-04-15T12:09:08.347
> 
> 标签：java, algorithm, data-structures

我试图在 600851475143 之前得到所有素数。我为此使用了埃拉托色尼筛。这需要我创建一个如此巨大的布尔数组。坏主意，你可能会耗尽内存。任何其他方式。我尝试使用字符串，使用值为 0 和 1 的每个索引来表示真或假。但 indexOf 方法也返回 int。

接下来我使用二维数组来解决我的问题。还有其他更好的方法来存储如此庞大的数组吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T12:17:44.247

600851475143 布尔值的内存要求最多为 70Gb。这是不可行的。您需要按照 Stephan 的建议使用压缩，或者找到不同的算法来计算素数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T12:15:56.887

我有一个类似的问题，我使用了一个位集（基本上按顺序将 1 或 0 设置为所需的偏移量），我建议使用[EWAHCompressedBitmap](https://code.google.com/p/javaewah/)它也会压缩你的位集

**编辑**

正如 Alan 所说，BitSet 将占用 70GB 内存，但您可以做另一件事：拥有多个 BitSet（连续的 BitSet，以便您可以计算绝对位置）并将您当时需要的 BitSet 加载到内存中，就像一个懒惰的人一样加载，在这种情况下，您将控制所使用的内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-26T22:04:56.163

您可以使用 HotSpot 的内部 sun.misc.Unsafe API 来分配更大的数组。[我写了一篇博客文章如何用它模拟一个数组](http://www.omsn.de/blog/big-arrays-in-java)但是，它不是一个官方的 Java API，所以它有资格作为一个 hack。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T14:09:38.657

记住每个数字是否是素数并不实际（对于大数来说，筛子通常是一种非常慢的方法）。

从这个[链接](http://primes.utm.edu/howmany.shtml)中，您可以了解预计有多少个质数小于 X。对于您的 6000 亿范围，您可以预计在该范围内存在大约 200 亿个质数。将它们存储为 long[] 将需要大约 160GB 的内存......这比建议的 70GB 存储每个数字的单个位要多，如果排除偶数（2 是唯一的偶数），则为一半。

对于台式计算机来说，35GB 的内存可能有点多，但一个好的工作站可以有这么多的 RAM。我会尝试使用位移/屏蔽的二维数组。

我仍然希望您的筛选代码运行*相当*长的时间（从几天到几年）。我建议您研究比筛子更先进的素数检测方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T12:15:10.000

使用[BitSet](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html)。然后您可以设置位任何索引元素。因此， 600851475143 在`2^39`内部仅占用 39 位（实际上，它使用 long 将占用 64 位）。

您实际上可以移动到`2^63`对于大多数用途来说都是巨大的

# google-chrome - 获取用户即将打开的网站的url？

> ID：16014804
> 
> 赞同：1
> 
> 时间：2013-04-15T12:09:32.520
> 
> 标签：google-chrome

我只是在开发一个扩展来消磨时间，所以我想知道是否有可能获取该人即将打开的网站的网址？比如假设我打开一个新标签并输入google.com。我可以在按 Enter 或 Go 后立即获取 url 吗？

# ios - 用于 Ad Hoc 测试的 NSLogger

> ID：16014805
> 
> 赞同：2
> 
> 时间：2013-04-15T12:09:40.567
> 
> 标签：ios

我正在寻找一个日志框架，当我在我的设备上运行应用程序作为临时分发时，它可以在我的 mac 上显示日志。

我遇到过 NSLogger。

它在模拟器中运行良好，但如果我在设备上运行（来自 xcode 或来自网络）它不起作用。

不工作意味着当我在模拟器上运行时，mac Desktop Viewer 应用程序没有启动。

如何集成 NSLogger 以便我可以从设备获取日志到我的 MAC？

是否有任何其他框架可以为我提供这种日志记录？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-07T17:43:25.773

这是我为使 NSLogger 工作而采取的步骤。对于桌面查看器：

*   下载[桌面查看器二进制文件](https://github.com/fpillet/NSLogger/releases/download/v1.5/NSLogger-Desktop.Viewer.1.5.zip)或
*   遵循桌面查看器 xcode 说明：[第一部分](https://github.com/fpillet/NSLogger/wiki/Building-the-NSLogger-viewer)和[第二部分](https://github.com/fpillet/NSLogger/tree/master/Desktop%20Viewer)
*   运行桌面查看器
*   去`NSLogger->Preferences->Network`
*   查看`Publish Bonjour service for automatic discovery on local network`
*   `NSLogger`在`Bonjour service name`文本框中输入
*   转到`NSLogger->Window->Show Logger Status`，您应该会看到一个显示以下内容的状态窗口：

    *   Bonjour（准备好接受连接）
    *   Bonjour SSL（准备好接受连接）
    *   TCP/IP 端口 50000（不可用）
*   注意：此时您将看不到桌面查看器输出窗口...该窗口仅在 NSLogger 客户端正确连接到桌面查看器时出现。

对于 iOS 客户端：

*   确保您的 iOS 设备与运行桌面查看器的计算机位于同一本地网络上
*   安装`Discovery`允许您浏览 Bonjour 网络的应用程序
*   运行`Discovery`并浏览本地 Bonjour 网络，您应该会看到 NSLogger 桌面查看器发布的两个条目：
    *   `_nsloggger._tcp.`
    *   `_nslogger-ssl._tcp.`
*   [按照这些说明](https://github.com/fpillet/NSLogger)将 NSLogger 客户端与您的 iOS 应用程序集成
*   完成集成后，您的项目将如下[所示](http://i.stack.imgur.com/Ne9Mu.png)（我的项目名为 iosTapDetectorDemo）
*   在需要的地方添加`#import <NSLogger/NSLogger.h>`语句（对我来说，这是在进行 NSLogger 方法调用的方法文件包含的包含文件中）
*   用方法调用替换所有`NSLog`方法`LoggerCompat`调用
*   将以下代码添加到您的主程序中：

    ```
    LoggerSetOptions(LoggerGetDefaultLogger(), kLoggerOption_BrowseBonjour|kLoggerOption_BufferLogsUntilConnection);
    LoggerSetupBonjour(LoggerGetDefaultLogger(), CFSTR("_nslogger._tcp"), CFSTR("NSLogger"));
    LoggerStart(LoggerGetDefaultLogger()); 
    ```

*   运行您的 iOS 应用程序，记录器输出窗口应出现在桌面查看器上，您的`LoggerCompat`方法调用应在查看器中显示文本

# symfony1 - 多对多关系如何排序原则查询？

> ID：16014808
> 
> 赞同：1
> 
> 时间：2013-04-15T12:09:48.123
> 
> 标签：symfony1, doctrine, many-to-many, schema

我使用学说 1.2，这是我的架构：

```
ProviderProduct:
 columns:
   provider_id: 
     type: integer
     primary: true
   product_id:
     type: integer
     primary: true
   num:
     type: integer
     default: 0
     unsigned: true
Provider: 
 columns:
   name: {type: string(255), notnull: true, notblank: true, unique: true}
 relations:
   Products:
     class: Product
     local: provider_id
     foreign: product_id
     refClass: ProviderProduct
Product:
 columns:
    #a lot of columns
 relations:
   Providers:
     class: Provider
     local: product_id
     foreign: provider_id
     refClass: ProviderProduct 
```

我想要的是为特定提供商获得最大数量的产品（这是数量）。我试过这个查询：

```
$query = Doctrine_Query::create()->select('p.*')
                                     ->from('Product p')
                                     ->innerJoin('p.Providers pr')
                                     ->where('pr.name = ?', 'WhiteStore')
                                     ->orderBy('ProviderProduct.num');
$query->fetchOne(); 
```

结果sql查询：

```
SELECT p.* FROM product p 
INNER JOIN provider_product p3 ON (p.id = p3.product_id) 
INNER JOIN provider p2 ON p2.id = p3.provider_id, provider_product p4 
WHERE (p2.name = ?) ORDER BY p4.num 
```

如您所见，它不是按 num 字段排序的。那么，什么是适合我的任务的 dql？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-08T15:22:08.440

我认为您也需要关联 refClass ：

```
ProviderProduct:
  columns:
    provider_id: 
    type: integer
    primary: true
  product_id:
    type: integer
    primary: true
  num:
    type: integer
    default: 0
    unsigned: true
relations:
  Provider: { foreignAlias: ProviderProduct }
  Product:  { foreignAlias: ProviderProduct } 
```

然后通过 refClass 关联得到数字：

```
$query = Doctrine_Query::create()->select('p.*')
  ->from('Product p')
  ->innerJoin('p.ProviderProduct pp')
  ->innerJoin('pp.Provider pr')
  ->where('pr.name = ?', 'WhiteStore')
  ->orderBy('pp.num DESC') // to get de max first
  ->groupBy('p.id') // if any duplicates
  ->limit(1);

$product = $query->fetchOne(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T10:22:32.703

[多对多关系如何排序原则查询？](https://stackoverflow.com/questions/16014808/how-order-doctrine-query-for-many-to-many-relationship/40155950#40155950)

您可以使用以下构造：

```
$query = Doctrine_Query::create()->select('p.*')
->from('Product p')
->innerJoin('p.Providers pr')
->where('pr.name = ?', 'WhiteStore')
->orderBy('p.Providers.ProviderProduct.num'); 
```

Doctrine 1 的非原生行为是为多对多关系创建一个不可见的别名。您可以使用此别名来建立正确的顺序。

# extjs - Ext Flot 动态改变图表值

> ID：16014812
> 
> 赞同：0
> 
> 时间：2013-04-15T12:09:59.380
> 
> 标签：extjs, flot, extjs3, linechart

我正在使用 Ext flot 在我的应用程序上绘制图表。我想用 ajax 请求或按钮更新图表数据。我无法更新值。有人有想法吗？

```
var graphDataArr = [{ label: 'My Graph', data: myDataArray, color: '#46F252', hoverable: false, clickable: false }];

new Ext.Window({
    header      : false,
    layout      : 'anchor',
    height      : 200,
    width       : 750,
    baseCls     : 'ext_panel_header_bar',
    items       : [ {
        xtype       : 'flot',
        id          : 'flotGraph',
        cls         : 'x-panel-body',
        series      : graphDataArr,
        xaxis       : {
            min : xMin,
            max : xMax
        },
        yaxis       : {
            min : yMin,
            max : yMax
        },
        tooltip     : false,
        anchor      : '98% 99%'
    } ]
}).show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:33:04.840

Ext Flot API 文档说：

```
setData( Array Series ) : void

You can use this to reset the data used. Note that axis scaling, ticks, legend etc. will not be recomputed (use setupGrid() to do that). You'll probably want to call draw() afterwards. 

You can use this function to speed up redrawing a plot if you know that the axes won't change. Put in the new data with setData(newdata) and call draw() afterwards, and you're good to go. 
```

您可以在按钮处理程序中执行以下操作（`dataArray`新数据数组在哪里）：

```
var chart = Ext.getCmp('flotGraph');    
chart.setData(dataArray);
chart.setupGrid();
chart.draw(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:04:46.623

如果您从 Web 应用程序以 Json/Proper 格式发送记录，那么您可以简单地创建可以在按钮/提交按钮上调用的 JavaScript。

```
 function createCharts() {

    var queryString = $('#mainForm').formSerialize();
    var url_String = "runChartData.action" + '?'+queryString+'&selectedModule=Line';// URL to call ajax

    $.ajax({ 
          type: "post",
          dataType: "json",
          url: url_String,
          async : true,
          success: function(data){ 

                chartData = data;

                        createChart(data); // the Method you have Created As I have created Bellow

        }, error: function(data){
            $('#chartDiv').empty(); //empty chart Div to recreate it.

        }
     });
}

createChart(var myDataArray){

$('#chartDiv').empty(); // reset to Create New Chart with new Data

var graphDataArr = [{ label: 'My Graph', data: myDataArray, color: '#46F252', hoverable: false, clickable: false }];

new Ext.Window({
    header      : false,
    layout      : 'anchor',
    height      : 200,
    width       : 750,
    baseCls     : 'ext_panel_header_bar',
    items       : [ {
        xtype       : 'flot',
        id          : 'flotGraph',
        cls         : 'x-panel-body',
        series      : graphDataArr,
        xaxis       : {
            min : xMin,
            max : xMax
        },
        yaxis       : {
            min : yMin,
            max : yMax
        },
        tooltip     : false,
        anchor      : '98% 99%'
    } ]
}).show();

} 
```

# python - Django 对静态内容的 Nginx 权限被拒绝 13

> ID：16014816
> 
> 赞同：3
> 
> 时间：2013-04-15T12:10:25.080
> 
> 标签：python, django, nginx

我使用本[教程](https://uwsgi.readthedocs.org/en/latest/tutorials/Django_and_nginx.html)来设置 virtualenv 和 nginx 服务器。我完全按照指示做了，但我仍然得到一个

> 权限被拒绝 (13)

尝试访问静态内容时出错。我已经将我的静态目录和整个 Django 项目设置为由`www-data`.

更进一步，如果我忽略静态内容并尝试让所有内容都与 Emperor 一起运行，我会遇到更多的权限被拒绝错误。现在每次我尝试访问该网站。

```
root      8704  0.0  0.0  62780  1260 ?        Ss   16:19   0:00 nginx: master process /usr/sbin/nginx
www-data  8705  0.0  0.0  63108  1680 ?        S    16:19   0:00 nginx: worker process
www-data  8706  0.0  0.0  63108  1680 ?        S    16:19   0:00 nginx: worker process
www-data  8707  0.0  0.0  63108  1680 ?        S    16:19   0:00 nginx: worker process
www-data  8708  0.0  0.0  63448  2276 ?        S    16:19   0:00 nginx: worker process 
```

以 root 身份启动 uwsgi 时：[https](https://gist.github.com/anonymous/f19997fd07c0237a7435) ://gist.github.com/anonymous/f19997fd07c0237a7435 使用 www-data 启动 uwsgi 时：

```
root@vmd2719:~/energy1/energydrinks# uwsgi --ini django.ini --uid www-data --gid www-data
[uWSGI] getting INI configuration from django.ini
open("./python27_plugin.so"): No such file or directory [core/utils.c line 3321]
!!! UNABLE to load uWSGI plugin: ./python27_plugin.so: cannot open shared object file: No such file or directory !!!
*** Starting uWSGI 1.9.6 (64bit) on [Mon Apr 15 16:24:49 2013] ***
compiled with version: 4.6.3 on 15 April 2013 11:52:36
os: Linux-3.2.0-40-generic #64-Ubuntu SMP Mon Mar 25 21:22:10 UTC 2013
nodename: vmd2719
machine: x86_64
clock source: unix
detected number of CPU cores: 1
current working directory: /root/energy1/energydrinks
writing pidfile to /tmp/energy-master.pid
detected binary path: /usr/local/bin/uwsgi
setgid() to 33
setuid() to 33
chdir(): Permission denied [core/uwsgi.c line 2063]
chdir(): Permission denied [core/uwsgi.c line 1249]
chdir(): Permission denied [core/uwsgi.c line 1269] 
```

访问静态文件的 Nginx 调试日志：

```
2013/04/15 16:20:25 [debug] 8708#0: *1 http filename: "/root/energy1/energydrinks/static/jgrowl/jquery.jgrowl.js"
2013/04/15 16:20:25 [debug] 8708#0: *1 add cleanup: 0000000001F68C10
2013/04/15 16:20:25 [error] 8708#0: *1 open() "/root/energy1/energydrinks/static/jgrowl/jquery.jgrowl.js" failed (13: Permission denied), client: 109.193.75.142, server: .de, request: "GET /static/jgrowl/jquery.jgrowl.js HTTP/1.1", host: ".de:8000", referrer: "http://.de:8000/member/register/"
2013/04/15 16:20:25 [debug] 8708#0: *1 http finalize request: 403, "/static/jgrowl/jquery.jgrowl.js?" a:1, c:1
2013/04/15 16:20:25 [debug] 8708#0: *1 http special response: 403, "/static/jgrowl/jquery.jgrowl.js?"
2013/04/15 16:20:25 [debug] 8708#0: *1 http set discard body
2013/04/15 16:20:25 [debug] 8708#0: *1 xslt filter header
2013/04/15 16:20:25 [debug] 8708#0: *1 charset: "" > "utf-8"
2013/04/15 16:20:25 [debug] 8708#0: *1 HTTP/1.1 403 Forbidden 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T14:34:17.107

所以你的 nginx 在`www-data`里面运行`/root`......那可不好。`/root`普通用户无法访问（除非您`chmod +x`这样做，这是一个坏主意）。

您应该将数据移到它之外，在`/srv/http`或`/var/www`中`/home/whatever`，而不是在`/root`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:12:42.783

如果你的 nginx 不在生产中，你可以添加“error_log /path/to/log debug;” 然后尝试访问您的静态内容之一。你会看到 nginx 试图在调试文件中加载什么。它应该很有用。

不要犹豫，在这里发布它的内容以帮助我们理解。

# android - 网络状态缺失

> ID：16014819
> 
> 赞同：1
> 
> 时间：2013-04-15T12:10:32.397
> 
> 标签：android, android-wifi, wifimanager

我可以使用以下方法添加网络，但如果在和之后添加或失败，`code`则无法获取状态。请帮忙！！！`authentication``Enable` `Network``reconnect`

```
 mWifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
            removeNetwork();

        Boolean isWifiConnected = false;

        WifiConfiguration mWifiConf = new WifiConfiguration();          
        mWifiConf.SSID = "\"" + networkList.get(item_pos).SSID + "\"";
        mWifiConf.hiddenSSID = true;
        mWifiConf.status = WifiConfiguration.Status.ENABLED;  
        mWifiConf.priority = 1;         
        if(addWPA2Network(mWifiConf, etPassword.getText().toString())<0)
        {

        }
        else
        {
            List<WifiConfiguration> list = mWifiManager.getConfiguredNetworks();

            for (WifiConfiguration i : list) 
            {
                if (i.SSID != null && i.SSID.equals("\"" + networkList.get(item_pos).SSID + "\"")) 
                {
                    mWifiManager.disconnect();
                    isWifiConnected = mWifiManager.enableNetwork(i.networkId, true);
                    isWifiConnected = mWifiManager.reconnect();                 

                    break;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:32:16.493

将网络的 android 权限添加到清单文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:37:15.400

从这个链接得到我的答案：[https ://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/wifi/WifiStatusTest.java](https://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/wifi/WifiStatusTest.java)

```
if (intent.getAction().equals(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION)) {
                handleSupplicantStateChanged(
                        (SupplicantState) intent.getParcelableExtra(WifiManager.EXTRA_NEW_STATE),
                        intent.hasExtra(WifiManager.EXTRA_SUPPLICANT_ERROR),
                        intent.getIntExtra(WifiManager.EXTRA_SUPPLICANT_ERROR, 0));
            } 
```

使用此处理程序检查其连接是否成功。

# ios - 如何创建单元格转到下一页

> ID：16014825
> 
> 赞同：1
> 
> 时间：2013-04-15T12:10:50.947
> 
> 标签：ios, objective-c, uitableview, nsmutablearray

我创建了一个 TableView 页面，这个 TableView 有很多来自这段代码的单元格：

```
@interface ViewController : UITableViewController
{
    NSMutableArray *animal;
    NSMutableArray *color;
    NSMutableArray *all;
}
@implementation ViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    animal = [[NSMutableArray alloc]initWithObjects:@"Lion",@"Tiger",@"Dog",@"Cat",@"Sheep",@"Wolf", nil];
    color = [[NSMutableArray alloc]initWithObjects:@"Blue",@"Red",@"Yellow",@"Green",@"Black", nil];

    all = [[NSMutableArray alloc]init];
    [all addObjectsFromArray:animal];
    [all addObjectsFromArray:color];
} 
```

我想什么时候点击动物单元格数组转到下一页（下一页是
同一个根表视图，换句话说，我想要点击动物单元格数组表视图页面刷新并显示点击的单元格信息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:05:23.710

请参考链接（它有从表中加载详细视图的示例）， [https://www.youtube.com/watch?v=0jt0vcrzq4A](https://www.youtube.com/watch?v=0jt0vcrzq4A)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:16:24.373

尝试这个

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 //if need any condition check here
 YourViewController *YVC = [[YourViewController alloc] initWithNibName:nil bundle:nil]]  
 [self.navigationController YourViewController:YVC animated:YES];

} 
```

# c# - MVC 4 模态窗口和 AJAX

> ID：16014826
> 
> 赞同：1
> 
> 时间：2013-04-15T12:10:51.183
> 
> 标签：c#, jquery, ajax, asp.net-mvc, twitter-bootstrap

我正在使用 MVC 4 和 Entity Framework 来开发 Web 应用程序。我有一张包含人的桌子。还有一个编辑按钮，它调用一个模式窗口，并且由于它，用户可以编辑一个人。我正在使用局部视图来这样做。

我的问题是：在我的操作中，我返回了一个视图，但我只希望当我点击保存按钮时，模式窗口消失并且我的表格被更新。任何想法？

行动 ：

```
[HttpGet]
public ActionResult EditPerson(long id)
{
    var person = db.Persons.Single(p => p.Id_Person == id);

    ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

    return PartialView("_EditPerson", person);
}

[HttpPost]
public ActionResult EditPerson(Person person)
{

    ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

    if (ModelState.IsValid)
    {
        ModelStateDictionary errorDictionary = Validator.isValid(person);

        if (errorDictionary.Count > 0)
        {
            ModelState.Merge(errorDictionary);
            return View(person);
        }

        db.Persons.Attach(person);
        db.ObjectStateManager.ChangeObjectState(person, EntityState.Modified);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(person);
} 
```

局部视图（实际上是模态窗口）：

```
@model BuSIMaterial.Models.Person

<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Edit</h3>
</div>
<div>

@using (Ajax.BeginForm("EditPerson", "Person", FormMethod.Post,
                    new AjaxOptions
                    {
                        InsertionMode = InsertionMode.Replace,
                        HttpMethod = "POST",
                        UpdateTargetId = "table"
                    }))
{

    @Html.ValidationSummary()
    @Html.AntiForgeryToken()

    @Html.HiddenFor(model => model.Id_Person)

    <div class="modal-body">
       <div class="editor-label">
            First name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>
        <div class="editor-label">
            Last name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>
        <div class="editor-label">
            National number :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.NumNat, new { maxlength = 11 })
            @Html.ValidationMessageFor(model => model.NumNat)
        </div>
        <div class="editor-label">
            Start date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.StartDate, new { @class = "datepicker", @Value = Model.StartDate.ToString("yyyy/MM/dd") })
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>
        <div class="editor-label">
            End date :
        </div>
        <div class="editor-field">
            @if (Model.EndDate.HasValue)
            {
                @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker", @Value = Model.EndDate.Value.ToString("yyyy/MM/dd") })
                @Html.ValidationMessageFor(model => model.EndDate)
            }
            else
            {
                @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker" })
                @Html.ValidationMessageFor(model => model.EndDate)
            }
        </div>
        <div class="editor-label">
            Distance House - Work (km) :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.HouseToWorkKilometers)
        </div>
        <div class="editor-label">
            Category :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one ...")
            @Html.ValidationMessageFor(model => model.Id_ProductPackageCategory) <a href="../ProductPackageCategory/Create">
                Add a new category?</a>
        </div>
        <div class="editor-label">
            Upgrade? :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Upgrade)
            @Html.ValidationMessageFor(model => model.Upgrade)
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-inverse" type="submit">Save</button>
    </div>
}

</div> 
```

还有我调用模态的脚本：

```
$(document).ready(function () {

    $('.edit-person').click(function () {
           var id = $(this).data("id");
           var url = '/Person/EditPerson/'+id;
           $.get(url, function(data) {

               $('#edit-person-container').html(data);
               $('#edit-person').modal('show');

           });
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:29:08.723

需要进行一些更改，但这是我在这种情况下要做的

1) 将 EditPerson post 方法从 actionresult 更改为 JsonResult

```
[HttpPost]
public JsonResult EditPerson(Person person) 
{

    // code here to save person

    bool success = true; // somehow determine if the save was successful
    string msg = ""; // error message is needed?
    return JsonResult(new {success,msg, person});
} 
```

2）添加一个javascript函数来关闭模态

```
function closeModal(response){

    // the response is the Json Result sent back from the action

    if (response.success === true){
        // actually got a true response back
    }
    $('#edit-person').modal('show'); // or similar code
} 
```

3）然后更新您的 Ajax 调用以在成功时执行代码

```
@using (Ajax.BeginForm("EditPerson", "Person", FormMethod.Post,
                new AjaxOptions
                {
                    InsertionMode = InsertionMode.Replace,
                    HttpMethod = "POST",
                    UpdateTargetId = "table",
                    OnSuccess = "closeModal(response);" // or javascript code to close the modal, you can also 
                }))
{ ... 
```

一些提示

我不喜欢 MVC ajax 助手。我认为它们很臃肿，而且我觉得还有其他框架做得更好。这就是我的看法。各有各的。我更喜欢自己使用 jQuery ajax 库。我认为它更容易使用，但同样取决于你。

OnSuccess 表示“服务器成功”不保存成功。所以要小心。

免责声明：我在累的时候写了这篇文章，所以它可能不是 100% 让我知道任何问题。

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:27:00.103

在您的 POST 操作中，您可以返回以下内容：

```
return Json(new { error = false, message = "Person edited." }); 
```

在 Ajax.BeginForm 的 AjaxOptions 中添加：

```
OnSuccess = "Modal.onAjaxSuccess" 
```

然后在某个地方，在 script.js 中说：

```
function onAjaxSuccess(data, status, xhr) {
    if (data.error) {
        $.notify({
            type: "error",
            text: data.message
        });
    }
    else {
        $('.modal').modal('hide');
    }
} 
```

这将关闭窗口，但我仍然无法让与 Bootstrap 模态相关的变暗屏幕消失，它也不会使用 AJAX 更新 DIV - 也许 Darin 可以揭示一些信息？

* * *

如果您仍然想知道如何执行此操作，可以这样做：

您有一个返回人员列表的 GET 操作：

```
[HttpGet]
public ActionResult People()
{
    return PartialView("_ListOfPeoplePartial");
} 
```

然后有一个 JS 函数，当您在允许您创建新人的模式上单击保存（即 btn-save-new-person）时触发：

```
$(function () {
    $(document.body).on('click', '#btn-save-new-person', function (e) {
        $('#create-new-person-modal').modal('hide');
        $('body').removeClass('modal-open');
        $('.modal-backdrop').remove();
        var url = "/Home/People";
        $.get(url, function (data){
            $('#list-of-people').html(data);
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T12:15:50.330

> 在我的操作中，我返回了一个视图，但我只希望当我点击保存按钮时，模式窗口消失并且我的表格被更新。任何想法？

您可以返回包含表格的局部视图，而不是从此控制器操作返回视图。然后在 AJAX 调用的成功回调中简单地更新相应的容器。

# javascript - 如何使用jquery删除td标签中的内容

> ID：16014830
> 
> 赞同：3
> 
> 时间：2013-04-15T12:11:02.423
> 
> 标签：javascript, jquery

我有一个表定义为

```
<table>
  <tr>
    <td>
       <input type='text' />
    </td>
    <td>
      <button id ='first'>Button</button>
    </td>
    <td>
      <input type='text' />
   </td>
 </tr> 
```

```
$("#first").live('click',function(){
    $(this).prev().remove();
    $(this).remove();
}); 
```

如何删除`td`. 但我不想删除`td`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T12:19:28.550

如果要删除之前 TD 的完整内容（而不是特定的 INPUT 元素），这将起作用：

```
$(document).on("click", "#first", function() {
    $(this).closest("td").prev().empty();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T12:20:09.943

[http://jsfiddle.net/sfHBn/1/](http://jsfiddle.net/sfHBn/1/)

```
$(document).on("click", "#first", function() {
    $(this).closest("td").prev().html("");
}); 
```

这将删除之前`td`标签中的所有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T12:14:34.857

您应该向上 DOM 树直到 parent `<td>`，然后获取 previous `<td>`，在`<input>`里面找到并删除它。您应该使用`on()`with 事件委托而不是 deprecated `live()`：

```
$(document).on("click", "#first", function() {
    $(this).closest("td").prev().find("input").remove();
}); 
```

*请*注意，`document`您可以使用.*`#first`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:16:51.247

这是要实现的一个班轮。

```
 $(this).closest("td").prev().remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T12:21:36.487

我建议您`.on()`改用它，因为`.live()`它现在已从 jQuery 版本 1.9+ 中删除：

```
$(document).on('click', "#first", function(){
   $(this).closest('td').prev().children().remove();
}); 
```

单击`#first`按钮并获取`.closest()` `<td>`并获取`.prev()`元素，它是 a `<td>`，然后是`.remove()`它的`.children()`。*

# javascript - Rails 中的分页 Ajax 无法始终如一地工作

> ID：16014832
> 
> 赞同：1
> 
> 时间：2013-04-15T12:11:11.227
> 
> 标签：javascript, jquery, ruby-on-rails-3, jquery-ui, pagination

我有一个 Rails 应用程序，我使用 will_paginate 和 ajax 对记录进行分页。我读过最新版本的 js/jquery 贬低了 live() 函数，所以使用 on() 或 bind()。

现在问题来了。我将代码更改为使用 .on() ，当我单击链接时，它将重新加载 div 而无需重新加载页面。如果我单击另一个页码链接，它将重新加载页面。它似乎只是偶尔起作用。

下面是我正在使用的代码。有任何想法吗？这是来自 Railscast #240，顺便说一句。

```
 $("#display th a, #display .pagination a").on("click", function() {
    $.getScript(this.href);
    return false;
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:17:19.120

经过一番搜索，其他人在 Railscast.com 上发布了一个有效的答案。

这是需要它的人的代码。

```
$(document).on("click","#display th a, #display .pagination a", function() {
$.getScript(this.href);
return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:06:11.463

尝试这个：

```
 $("#display th a, #display .pagination a").click(function() {
    $.ajax({
      url: this.href,
      dataType: 'script'
    });
    return false;
  });
  }); 
```

# php - SQL 从具有相同列名的 2 个表中选择仅在不为空时返回列

> ID：16014833
> 
> 赞同：6
> 
> 时间：2013-04-15T12:11:11.863
> 
> 标签：php, mysql, sql

我想知道是否有人可以帮我解决这个问题...

我需要查询两个表，其中一个表包含默认数据，第二个表包含任何覆盖数据，例如...

### 表格1

```
id = 5  
title = 'This is the default title'  
text = 'Hi, default text here...' 
```

### 表 2

```
id = 1  
relation_id = 5
title = 'This is an override title'  
text = NULL 
```

我需要返回一组完整的行，所以如果 table2 文本为空，那么我的结果集将包含 table1 文本。同样，如果我的 table2 标题不为空，那么我的结果标题将是 table2 标题的值，从而覆盖默认的 table1 文本值。

### 完美的结果集

从上面给定的表结构

```
id = 5
title = 'This is an override title'
text = 'Hi, default text here...' 
```

我曾尝试使用标准连接从两个表中获取所有数据，然后使用 PHP 排列数据，但如果可能的话，我真的很想在 SQL 中执行此操作。

**我正在运行的查询的一个粗略示例是......**

```
SELECT vt.id, 
  vt.title as vt_title,
  vt.text AS vt_text,
  vt.relation_id,
  t.id, t.title,
  t.text 
  FROM table1 vt 
  LEFT JOIN table2 t ON vt.relation_id = $id 
  AND vt.relation_id = t.id", 
```

我的表最多可以有 6 个具有相同列名/覆盖数据的六列。我想尽可能保持默认字段名称不变，并避免在返回集中分配新名称，例如

### 坏结果集

```
id = 1
title = 'default title'
override_title = 'this is the override title'
text = 'Hi, default text here...' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:14:18.673

```
SELECT  a.ID,
        COALESCE(b.Title, a.Title) Title,
        COALESCE(b.Text, a.Text) Text
FROM    Table1 a
        LEFT JOIN Table2 b
            ON a.ID = b.relation_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/68f80/2)

输出

```
╔════╦═══════════════════════════╦═══════════════════════╗
║ ID ║           TITLE           ║         TEXT          ║
╠════╬═══════════════════════════╬═══════════════════════╣
║  5 ║ This is an override title ║ Hi. default text here ║
╚════╩═══════════════════════════╩═══════════════════════╝ 
```

# javascript - 返回图片的目录

> ID：16014834
> 
> 赞同：-3
> 
> 时间：2013-04-15T12:11:19.153
> 
> 标签：javascript, image

是否将图像的目录返回到带有 JavaScript 的文本字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:28:08.370

我有一个可以捕获照片并保存在计算机上的网络摄像头，我需要将图片目录返回到文本字段。

# javascript - 如何从 Dijit FilteringSelect 小部件中删除所有选项？

> ID：16014835
> 
> 赞同：3
> 
> 时间：2013-04-15T12:11:19.910
> 
> 标签：javascript, widget, dojo, dijit.form

我尝试从 dijit.form.filteringselect 中删除所有选项，并使用以下函数向 dijit.form.filteringselect 添加一个选项。但是，我收到一个错误：*没有方法 getOptions 和 addOption*。我正在使用道场 1.7

```
function showTablesDropDown(tableDiv){
  dijit.byId(tableDiv).removeOption(dijit.byId(tableDiv).getOptions());
  dijit.byId(tableDiv).addOption(dojo.create("option", {label:"None", value:"None"}));
} 
```

如何从 dijit.form.filteringselect 中删除所有选项并将选项添加到 dijit.form.filteringselect？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T16:00:17.863

这里的问题只是对`FilteringSelect`（以及从 继承的任何东西`_AutoCompleterMixin`）如何与其数据交互的轻微误解。无论您如何创建`FilteringSelect`小部件，控制其选项的底层机制都是一个遵循[Dojo Store API](http://dojotoolkit.org/reference-guide/1.7/dojo/store.html#id3)的对象。

这意味着为了修改`FilteringSelect`小部件的选项，您需要与之交互`store`。我已经[设置了这个小提琴](http://jsfiddle.net/pGt5n/13/)来演示，但基本上你想将你的功能更改为：

```
function showTablesDropDown(tableDiv){
   var filteringSelectWidget = dijit.byId(tableDiv);

   // Clear current value since options are changing.
   filteringSelectWidget.set("value", ""); 

   var store = filteringSelectWidget.get("store");
   var newData = [{label: "None", value: "None"}];    

   // Give the underlying store a new data array.
   store.setData(newData);
} 
```

# c# - PDF公文格式

> ID：16014839
> 
> 赞同：1
> 
> 时间：2013-04-15T12:11:37.990
> 
> 标签：c#, winforms

我确实从 jpg 图像生成了一个 pdf 文件。但是 jpg 图像具有官方文件的大小。当我打开pdf时，图像太大了。我需要 pdf 文件是官方纸张大小。有什么解决办法吗？（panel1 有公纸的大小。我需要这个大小等于公纸的大小）

```
 SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        saveFileDialog1.Filter = "PDF Files|*.pdf";
        string fileName = string.Empty;
        saveFileDialog1.FileName = "name.pdf";
        btnGerarPDF.Visible = false;
        using (Bitmap bitmap = new Bitmap(panel1.ClientSize.Width,
                                               panel1.ClientSize.Height))
        {
            panel1.DrawToBitmap(bitmap, panel1.ClientRectangle);
            bitmap.Save("C:\\" + (nPaginasPDF + 1) + ".bmp", ImageFormat.Bmp);
        }

        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {

            fileName = saveFileDialog1.FileName;
            Document doc = new Document();
            PdfWriter.GetInstance(doc, new FileStream(fileName, FileMode.Create));
            doc.Open();

            for (int iCnt = 0; iCnt < nPaginasPDF+1; iCnt++)
            {
                iTextSharp.text.Image image1 = iTextSharp.text.Image.GetInstance("C:\\" + (iCnt + 1) + ".bmp");
                image1.ScalePercent(75f);
                doc.NewPage();
                doc.Add(image1);
            }

            doc.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:16:20.037

您可以在创建文档时设置页面大小：

`Document doc = new Document(PageSize.A4);`

# ios - 石英动画错误

> ID：16014840
> 
> 赞同：1
> 
> 时间：2013-04-15T12:11:38.137
> 
> 标签：ios, objective-c, xcode, quartz-core

我已经包含了`<QuartzCore/QuartzCore.h>`框架。

在 IBAction 我有这个：

```
- (IBAction)searchOptions:(id)sender {    
    FilterViewController *ctrl = [[FilterViewController alloc] initWithNibName:@"FilterViewController" bundle:nil];
    [UIView transitionFromView:self.view toView:ctrl.view duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:nil];

    [self.navigationController pushViewController:ctrl animated:NO];
} 
```

当我单击按钮时，页面会像您期望的那样卷曲：

当我单击下一个按钮（应该将页面向后卷曲）时，我收到此错误：

**线程 1：EXC_BAD_ACCESS（代码=2，地址=0x8）**

我认为问题在于上述动作（而不是展开动作）。

出了什么问题？

编辑：再读一小时后 - 可能是记忆问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:48:21.667

我不确定，但我认为不会`UIView`保留您传递给它的控制器。假设您使用的是 ARC，您可以尝试将其设置`FilterViewController`为属性。

即在标题中添加：

```
@class FilterViewController;

@interface YourViewController : UIViewController {
    FilterViewController *_filterViewController;
} 
```

然后在实现中将其更改为：

```
 _filterViewController = [[FilterViewController alloc] initWithNibName:@"FilterViewController" bundle:nil];
 [UIView transitionFromView:self.view _filterViewController duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:nil];
 [self.navigationController pushViewController:_filterViewController animated:NO]; 
```

以确保它被保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:32:12.270

你不是真的必须做卷页效果吗？

[先试试这个]

```
- (IBAction)searchOptions:(id)sender { 
    FilterViewController *ctrl = [[FilterViewController alloc] init];
    ctrl.modalTransitionStyle = UIModalTransitionStylePartialCurl;
    [self presentModalViewController:ctrl animated:YES];
    } 
```

# spring - 使用 infinispan 的弹簧缓存

> ID：16014842
> 
> 赞同：1
> 
> 时间：2013-04-15T12:11:43.170
> 
> 标签：spring, caching

我想在运行时在缓存和非缓存模式之间切换。我知道这可以通过删除标签来实现。但这需要重建源代码/重新部署。如果我发现 infinispan 缓存出现异常错误（超时，或节点不可访问 - 我正在使用 infinispan hot rod），我需要切换到非缓存模式。

是否可以扩展 spring cacheinterceptor 并返回 null 值，以便应用程序从 DB 中获取值。基本上所有对 cacheinterceptor 的调用都应该被忽略。

感谢您分享信息，如果你们中的任何人做过类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-25T10:00:02.410

我认为这个问题至少有两种解决方案。首先，您可以创建自己的[CacheInterceptor](http://grepcode.com/file/repository.springsource.com/org.springframework/org.springframework.context/3.2.0/org/springframework/cache/interceptor/CacheInterceptor.java#CacheInterceptor)实现并将切换代码放在那里。然后您需要指示 Spring 使用您的自定义 CacheInterceptor。[ProxyCachingConfiguration](http://grepcode.com/file/repository.springsource.com/org.springframework/org.springframework.context/3.2.0/org/springframework/cache/annotation/ProxyCachingConfiguration.java#ProxyCachingConfiguration.cacheInterceptor%28%29)类可能是开始调查的好地方。

第二种解决方案是修改 Infinispan Spring 集成代码并在其中添加切换功能。为了实现这一点，您必须覆盖[SpringRemoteCacheManagerFactoryBean](https://github.com/infinispan/infinispan/blob/57bf1d2905bac362e6a0772907782b061bb7f626/spring/spring4/src/main/java/org/infinispan/spring/provider/SpringRemoteCacheManagerFactoryBean.java)、[SpringRemoteCacheManager](https://github.com/infinispan/infinispan/blob/57bf1d2905bac362e6a0772907782b061bb7f626/spring/spring/src/main/java/org/infinispan/spring/provider/SpringRemoteCacheManager.java)和[SpringRemoteCache](https://github.com/infinispan/infinispan/blob/57bf1d2905bac362e6a0772907782b061bb7f626/spring/spring/src/main/java/org/infinispan/spring/provider/SpringRemoteCache.java)。我建议将切换代码放在 SpringRemoteCache#get 中。

# delphi - 蓝牙德尔福2007

> ID：16014844
> 
> 赞同：1
> 
> 时间：2013-04-15T12:11:45.233
> 
> 标签：delphi, bluetooth, delphi-2007

我是 Delphi 的新手，使用 Delphi 2007，我连接到蓝牙打印机 e 并发送数据。参考 post [Bluetooth and Delphi](https://stackoverflow.com/questions/6827245/bluetooth-and-delphi-how) and [Indy Bluetooth support](http://forums2.atozed.com/viewtopic.php?f=7&t=25691)，我试图在我的 delphi 项目中加载 IdBluetooth.pas 并得到一些错误：

1) ULONG、SYSTEMTIME 和所有其他 Windows 类型无法识别。

```
sin.port           := ULONG(-1); 
```

2) 第 107 行未声明的标识符 FReuseSocket 和 otUnix

```
if (FReuseSocket = rsTrue) or ((FReuseSocket = rsOSDependent) and (GOSType = otUnix)) then 
```

TdIOHandlerSocket 不包含成员 TdIOhandlerSocket(228 和 311)：

```
Socket.ReuseSocket := FReuseSocket; 
```

我添加了 JWABluetoothA、JWABtHDef、JWABthSdpDef、JWAWinDLLNames、JWAWindows、JWAws2Bth 库

我该如何解决这些错误？

另一个问题：除了连接，如果我要向BT设备发送任何其他数据，我应该使用什么程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:51:00.743

1 - 然后，您可能应该将`Windows`单元添加到 uses 子句以使这些类型可用。

2 - 您使用的是 Delphi 2007，但您链接的文章的日期`Indy Bluetooth Support`是 2011 年年中。它很可能是为比 Delphi 2007 附带的版本更新的 Indy 版本编写的；您可能必须升级您的 Indy 版本或修改源`Bluetooth.pas`以将其降级为您的 Indy 版本。

就您的“另一个问题”而言，这就是另一个（单独的）问题，因为在您成功编译之前，现在对它的回答将毫无意义`Bluetooth.pas`。

# sql - 在表名中搜索通配符

> ID：16014846
> 
> 赞同：3
> 
> 时间：2013-04-15T12:11:54.243
> 
> 标签：sql, sql-server, database

在我的数据库中，我创建了一些名称中间包含“_”字符的表，我想找到所有这些表。
例如：

```
Doc_Amit,Doc_Raj,chem_Man etc 
```

我知道查找表名的查询如下：

```
select * from sys.tables where name like '%%' 
```

但我的问题是我应该在 % 和 % 之间写什么，这样我才能得到包含通配符“_”的表名？

注意：我使用的是 SQL Server 2012

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:18:07.147

试试这个——

```
SELECT s.name + '.' + o.name
FROM sys.objects o
JOIN sys.schemas s ON o.[schema_id] = s.[schema_id]
WHERE o.name LIKE  '%\_%' ESCAPE '\'
    AND o.[type] = 'U' 
```

回复评论——

```
 SELECT * 
    FROM sys.objects o

    -> 

ALTER VIEW sys.objects AS
    SELECT *
    FROM sys.objects$

    -----------------------------

    SELECT * 
    FROM sys.tables t

    ->

ALTER VIEW sys.tables AS
    SELECT *
    FROM sys.objects$ o
    LEFT JOIN sys.sysidxstats lob ON lob.id = o.object_id AND lob.indid <= 1
    LEFT JOIN sys.syssingleobjrefs ds ON ds.depid = o.object_id AND ds.class = 8 AND ds.depsubid <= 1   -- SRC_INDEXTOLOBDS 
    LEFT JOIN sys.syssingleobjrefs rfs ON rfs.depid = o.object_id AND rfs.class = 42 AND rfs.depsubid = 0   -- SRC_OBJTOFSDS
    LEFT JOIN sys.syspalvalues ts ON ts.class = 'LEOP' AND ts.value = o.lock_escalation_option
    WHERE o.type = 'U' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:25:55.773

我得到了最简单的答案，而且更简单！

```
select * from sys.objects where name like '%[_]%' 
```

# asp.net-mvc-4 - 从目录中的文件夹加载 ASP.NET MVC 4 文件时出错

> ID：16014848
> 
> 赞同：4
> 
> 时间：2013-04-15T12:11:55.810
> 
> 标签：asp.net-mvc-4

我在托管我的网站时遇到问题。

当我在目录中加载我在 Visual Studio 2012 中制作的 wwebsite 文件时，它运行良好，但是当我将 hem 放在目录内的文件夹中并在浏览器中转到该文件夹​​的名称时，它出错了。

因此，例如，当我将所有文件放在目录中时，我的地址是： [https](https://example.net/) ://example.net/ 它显示一切正确

当我在我的目录“MyProject”中创建一个文件夹并将文件放在这里时，它在我的浏览器中出错了：[https ://example.net/MyProject](https://example.net/MyProject)

我的 web.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <httpRuntime targetFramework="4.5" />
    <compilation targetFramework="4.5" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:18:44.483

通过*文件*，我猜你在谈论一些 javascript 或 CSS 文件。如果是这种情况，您应该使用 url helper 来包含它们：

```
<script type="text/javascript" src="~/scripts/myscript.js"></script> 
```

代替：

```
<script type="text/javascript" src="/scripts/myscript.js"></script> 
```

如果您不是在谈论您的站点运行不正常，那么您应该确保 IIS 中的虚拟目录指向正确的物理位置。

# android - Phonegap Android：未知铬错误：-6

> ID：16014849
> 
> 赞同：5
> 
> 时间：2013-04-15T12:11:56.070
> 
> 标签：android, cordova, plugins

我正在创建一个 Phonegap Android 应用程序，但在向其添加插件时遇到了问题。Cordova 版本是 2.2.0。我没有使用 jQM 或 Sencha Touch。我在 Android 4.0 上测试该应用程序。

我指的插件是[Android Phonegap 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)。这是我的`index.html`文件：

```
<!DOCTYPE html>
<html>
  <head>
    ...
  </head>
  <body>
    <div class="wrapper">
      ...
    </div>

    <script type="text/javascript" src="vendor/cordova-2.2.0.js"></script>
    <script type="text/javascript" src="assets/application.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/datePickerPlugin.js"></script>
  </body>
</html> 
```

这是我的主要 Java 文件：

```
import android.app.Activity;
import android.os.Bundle;
import org.apache.cordova.*;

public class looker extends DroidGap
    {
        @Override
        public void onCreate(Bundle savedInstanceState)
            {
                super.onCreate(savedInstanceState);
                super.setIntegerProperty("splashscreen", R.drawable.splash);
                super.loadUrl("file:///android_asset/www/index.html", 7000);
            }
    } 
```

因此，为了了解问题是否出在插件中，我将[这个文件](https://github.com/phonegap/phonegap-plugins/blob/master/Android/DatePicker/datePickerPlugin.js)**最小** 化到我使用的所有最小化脚本所在的位置。我从中删除了插件的脚本标签，插件工作得很好！所以它可能与URL有关？`assets/application.js``index.html`

**到目前为止我尝试了什么？**

我进行了很多研究，并尝试了其他类似问题的几种解决方案。

1.  确保我的`loadUrl`主要课程中有 3 个 / ：

    ```
    public void onCreate(Bundle savedInstanceState)
        {
          super.onCreate(savedInstanceState);
          super.setIntegerProperty("splashscreen", R.drawable.splash);
          super.loadUrl("file:///android_asset/www/index.html", 7000);
        } 
    ```

    从一开始就这样，**没有任何区别**。

2.  尝试在 super.loadUrl() 之前调用 super.init()。**也没有用**。

3.  试过这个：

    ```
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.init();
        super.setIntegerProperty("loadUrlTimeoutValue", 6000);
        super.loadUrl("file:///android_asset/www/index.html");
    } 
    ```

    **仍然没有解决问题。**

4.  通过添加 . 检查文件是否已加载到应用程序中`alert();`。**它加载**。

大体上是这样。如果需要，我们很乐意为您提供更多信息以解决此问题。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:14:03.890

我按照指南进行操作，并且能够让插件正常工作。

但是，当我在 config.xml 中有这个时，我能够复制“未知的铬错误：-6”：

`<plugin name="DatePickerPlugin1" value="com.phonegap.plugin.DatePickerPlugin"/>`

确保 XML 中的“名称”属性是 DatePickerPlugin，因为这是 JavaScript 代码用于插件的名称：[https ://github.com/phonegap/phonegap-plugins/blob/master/Android/DatePicker/ datePickerPlugin.js#L33](https://github.com/phonegap/phonegap-plugins/blob/master/Android/DatePicker/datePickerPlugin.js#L33)

不过，可能还有其他方法可以产生相同的错误。如果这没有帮助，您可以发布或链接到实际调用此插件的 HTML 文件以及 config.xml 吗？（确保您使用的是 res/xml/config.xml 而不是 res/xml/plugins.xml，此处已弃用：http: [//cordova.apache.org/docs/en/2.0.0/guide_upgrading_android_index.md .html#Upgrading%20Cordova%20Android](http://cordova.apache.org/docs/en/2.0.0/guide_upgrading_android_index.md.html#Upgrading%20Cordova%20Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T07:35:04.717

我得到同样的错误：Unknown Chromium error -6"
我的错误是错误的部分路径。

我必须为部分指定**相对路径**。

当您使用 ng-include 或模块**ngRoute**时，
而不是这样：

> > ng-include="'/partials/file.html'"

把这个：

> > ng-include="'partials/file.html'"

如果你看我删除了路径中的第一个斜杠。

这种方法解决了我的铬错误。

# android - 方向从纵向模式更改为横向模式时的意外行为

> ID：16014851
> 
> 赞同：1
> 
> 时间：2013-04-15T12:12:02.200
> 
> 标签：android

我的应用程序有以下清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.netserv.Pungry"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:maxSdkVersion="17"
        android:minSdkVersion="5" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />

    <!-- <meta-data -->
    <!-- android:name="ADMOB_ALLOW_LOCATION_FOR_ADS" -->
    <!-- android:value="true" /> -->

    <meta-data
        android:name="ADMOB_PUBLISHER_ID"
        android:value="a150cb2e31846cf" />

    <application
        android:name=".MyApplication"
        android:allowBackup="true"
        android:icon="@drawable/bghomescreen"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.netserv.Pungry.Home"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".LocationbyCities" >
        </activity>
        <activity android:name=".General" >
        </activity>
        <activity android:name=".RestaurantsList" >
        </activity>
        <activity android:name=".Quickbite" >
        </activity>
        <activity android:name=".AdvanceSearch" >
        </activity>
        <activity android:name=".SelectMenu" >
        </activity>
        <activity android:name=".RestaurantDetails" >
        </activity>
        <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="orientation|uiMode|keyboard|keyboardHidden|screenSize|smallestScreenSize|screenLayout" />

        <receiver android:name=".UpdateReceiver" >
            <intent-filter>
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

当我将应用程序加载到设备时，它在纵向模式下工作正常。但是，当我从纵向模式更改为横向模式时，它会转换为一些不正确的活动，有时应用程序本身会关闭。

我已经在纵向布局中定义了布局，在横向模式下定义了布局。

我不想将方向固定为纵向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:19:06.237

尝试覆盖这两种方法。它解决了我的问题。

```
 @Override
    protected void onSaveInstanceState(Bundle outState) {
        webView.saveState(outState);            
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle inState) {
        webView.restoreState(inState); 
        super.onRestoreInstanceState(inState);
    } 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:21:06.000

只需在所有活动中使用 configChange 属性

```
<activity
    android:name="com.netserv.Pungry.Home"
    android:label="@string/app_name"
    android:configChange="orientation|screenSize" > <!-- like this use this attribute in all activities --> 
```

# jquery - jquery selector popping error message in IE when selector is null?

> ID：16014852
> 
> 赞同：1
> 
> 时间：2013-04-15T12:12:03.560
> 
> 标签：jquery, internet-explorer

我有一个使用 jquery 的共享 javascript 文件，称之为**common.js**，它被 2 个页面使用，比如**hello.html**和**world.html**。该脚本包括以下事件处理程序：

```
$("#helloPageButton").click(function () { ... });
$("#worldPageButton").click(function () { ... }); 
```

这一切在 Chrome、Firefox 中都可以正常工作，但在 IE 中，hello.html 会在这些选择器的行中抛出“预期对象”的错误。

如果找不到选择器，即 - 为空，如何让 IE**不抛出错误并继续前进？**

这是另一个示例：这在 IE 中不起作用：

```
<html>
<body>

<input type="button" id="helloButtonID" value="This is the hello button">

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>
$("#worldButtonID").click(function(){
     alert("The world button is not on the webapge.");   
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:09:00.483

您可以在将点击事件添加到按钮之前检查按钮是否存在

```
if ($("#helloButtonID").length > 0){
    $("#helloButtonID").click(function(){
         alert("The world button is not on the webapge.");   
    });
} 
```

检查这个[小提琴](http://jsfiddle.net/Fhvnf/2/)

# jquery - 把重点放在Mobile IE (WP8) 中的元素 我正在开发一个基于 HTML 5 的 Web 应用程序，最终将部署到 iOS、Android 和 Windows Phone 8（也可能是 7）应用程序的一部分涉及用户从选择下拉菜单。因为这些表单元素的样式不是很好，所以我想出了一个解决方案，让 CSS 将选择元素移动到一个绝对位置，从顶部开始 -10000 像素，这样它们就不会出现在应用程序中。该应用程序。然后在其位置插入一个 a 元素，该元素的样式看起来像一个简单的块，其中写入了当前选

> ID：16014853
> 
> 赞同：0
> 
> 时间：2013-04-15T12:12:11.063
> 
> 标签：jquery, html, select, focus, windows-phone

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:05:33.603

我还没有发现这个问题的根本原因，但是通过使用普通`select`元素并使用 CSS 设置样式来解决它。

为了避免下拉箭头按钮可见，我习惯将元素`jQuery.wrap()`包装在`select`元素中，使用比 更宽`div`的元素设置我想要的样式，即：`select``div`

```
div {
    border: 1px solid #FFF;
    overflow: hidden;
    width: 100px;
}

div select {
    background: transparent;
    border: 0;
    padding: 8px 10px;
    color: #FFF;
    width: 150px; /* wider than the div, to hide the drop-down arrow */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:39:57.627

据我所知，jQuery 2.0 在 IE > 8 中不起作用

> 请记住，jQuery 2.0 不会在 IE 6、7 或 8 上运行；我们为 jQuery 1.9 保留了这个职责。我们完全预计大多数 Internet 网站可能会在相当长的一段时间内继续使用 jQuery 1.x，只要旧版本的 IE 仍然包含很大比例的网络冲浪者。因此 jQuery 团队也将继续支持 jQuery 1.x 和 2.x 行。不要因为在您的网站上使用 1.9 而觉得您错过了什么或落后了，因为 1.9 和 2.0 的 API 是相同的。

[http://blog.jquery.com/2013/03/01/jquery-2-0-beta-2-released/](http://blog.jquery.com/2013/03/01/jquery-2-0-beta-2-released/)

# javascript - 从主干集合中获取每个模型

> ID：16014854
> 
> 赞同：6
> 
> 时间：2013-04-15T12:12:12.860
> 
> 标签：javascript, backbone.js, underscore.js

我确信这是一个非常容易解决的问题，但到目前为止我发现的所有帖子似乎都没有直接解决这个问题：我如何遍历一个集合来获取每个模型？

我尝试使用的第一种方法是下划线的 each 方法。这是我的电话和功能：

```
collection_var.each(paintThings); 
```

这是我的功能：

```
function paintThings() {
        console.log(this);
        console.log(this.model);
            var thing_type = this.model.get("type"),
                thing_other = this.model.get("otherAttribute");

                console.log(this.model);
                console.log(thing_type);
                console.log(thing_other);
        } 
```

现在，这是未定义的，并且 this.model 错误：

```
Uncaught TypeError: Cannot read property 'model' of undefined 
```

我知道答案很简单，但它让我发疯！我是下划线的新手。这里有人可以帮忙吗？如果它们更快/更好，我也对其他非下划线方法持开放态度。

我也试过这个：

```
 for (var i = 0, l = collection_var.length; i < l; i++) {
            console.log(collection_var[i]);
 } 
```

但这也没有给我我想要的东西。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T12:18:36.813

第一种方法：使用`models`您的集合的属性：

```
var myModel
for(var i=0; i<myCollection.length; i++) {
  myModel = myCollection.models[i];
} 
```

第二种方法是用`each`方法：

```
myCollection.each(function(model, index, [context]) {...}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T12:25:15.973

迭代集合的每个模型，例如。正如backbone.js给出的那样

```
books.each(function(book) {
  book.publish();
}); 
```

在你的情况下，它应该是这样的

```
collection_var.each(function(paintThing){
    console.log(paintThing);
    var thing_type = this.model.get("type"),
        thing_other = this.model.get("otherAttribute");

    console.log(paintThing);
    console.log(thing_type);
    console.log(thing_other);
}); 
```

[http://backbonejs.org/#Collection-Underscore-Methods](http://backbonejs.org/#Collection-Underscore-Methods)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:18:23.937

我想你应该试试`collection_var.models.each(paintThings)`。这应该使您可以直接访问集合的模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:19:23.557

好吧，愚蠢的错误！我只需要向函数传递一个额外的参数，这样我就可以触摸模型。

像这样：

```
function paintThings(thing) {
    //returns model
    console.log(thing);
        var thing_type = thing.get("type"),
            thing_other = thing.get("otherAttribute");

            //These all respond directly
            console.log(thing);
            console.log(thing_type);
            console.log(thing_other);
    } 
```

我仍然会查看所有答案并接受最优雅的解决方案！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-22T16:27:42.460

我使用了下划线图。

```
docs = Backbone.Collection.extend();

this.subViews = _.map(docs.models, function(doc) {
    return new DocView({ model: doc });
}, this); 
```

# iphone - 使用 iOS SDK 在朋友的 Facebook 墙上发表评论

> ID：16014856
> 
> 赞同：-5
> 
> 时间：2013-04-15T12:12:22.033
> 
> 标签：iphone, ios, facebook, facebook-graph-api, facebook-ios-sdk

我是 ios 开发的新手，我对仅从 ios 应用程序对 ios 应用程序 facebook 帐户发表评论感到震惊。你能指导我如何实施吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:04:09.020

NSString *urlString = [NSString stringWithFormat:@" [https://graph.facebook.com/YOUR_FRIEND_FB_ID/photos?access_token=%@](https://graph.facebook.com/YOUR_FRIEND_FB_ID/photos?access_token=%@) ", self.accessToken];

```
UIImage * pic = [UIImage imageNamed:@"green-background.png"];
NSData *picData = UIImageJPEGRepresentation(pic, 1);
NSURL *url = [NSURL URLWithString:urlString];
ASIFormDataRequest *newRequest = [ASIFormDataRequest requestWithURL:url];
[newRequest setPostValue:@"This is Sample Text" forKey:@"message"];
[newRequest setData:picData forKey:@"data"];
[newRequest setPostValue:self.accessToken forKey:@"access_token"];
[newRequest setDelegate:self];
[newRequest setDidFinishSelector:@selector(postToWallFinished:)];
[newRequest startAsynchronous]; 
```

# c - sscanf 直到到达逗号

> ID：16014859
> 
> 赞同：9
> 
> 时间：2013-04-15T12:12:29.923
> 
> 标签：c, string, scanf

我正在尝试从字符串中扫描单词和数字，如下所示：“ **hello, world, I, 287876, 6.0** ” <-- 这个字符串存储在一个`char`数组（字符串）中我需要做的是将事情分开并将它们分配给不同的变量，这样就可以了

```
 char a = "hello"
     char b = "world"
     char c = "I"
     unsigned long d = 287876
     float e = 6.0 
```

我知道常规 scanf 在到达空白时会停止从 stdin 读取。所以我一直在想，可能有一种方法可以让 sscanf 在到达**“，”**（逗号）时停止阅读

我一直在探索图书馆以找到 sscanf 只读字母和数字的格式。我找不到这样的东西，也许我应该再看一次。

有什么帮助吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T12:29:52.753

如果字符串中变量的顺序是固定的，我的意思是它总是：

```
string, string, string, int, float 
```

在中使用以下格式说明符`sscanf()`：

```
int len = strlen(str);
char a[len];
char b[len];
char c[len];
unsigned long d;
float e;

sscanf(" %[^,] , %[^,] , %[^,] , %lu , %lf", a, b, c, &d, &e); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:20:30.620

此示例使用`strtok`应该会有所帮助：

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] ="hello, world, I, 287876, 6.0" ;
  char * pch;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str,",");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (NULL, ",");
  }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-08-02T21:04:12.267

假设文本文件的格式是不变的，您可以使用以下解决方案。

```
std::ifstream ifs("datacar.txt");
    if(ifs)
    {
       std::string line;
       while(std::getline(ifs,line))
       {
            /* optional to check number of items in a line*/
            std::vector<std::string> row;
            std::istringstream iss(line);
            std::copy(
                std::istream_iterator<std::string>(iss),
                std::istream_iterator<std::string>(),
                std::back_inserter(row)
            );

            /*To avoid parsing the first line and avoid any error in text file */
            if(row.size()<=2)
                continue;

            std::string format = "%s %s %s %f %[^,] %d";
            char year[line.size()],make[line.size()],three[line.size()],full[line.size()];
            float numberf;
            int numberi;  

            std::sscanf(line.c_str(),format.c_str(),&year,&make,&three,&numberf,&full,&numberi);

        /* create your object and parse the next line*/

        }

    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-15T12:17:36.957

请参阅`strtok`和/或的文档`strtok_r`

# php - 发件人限制（搜索）

> ID：16014864
> 
> 赞同：2
> 
> 时间：2013-04-15T12:12:46.690
> 
> 标签：php, exchangewebservices, php-ews

[我正在尝试使用PHP EWS](https://github.com/jamesiarmes/php-ews)在交换服务器上检索特定发件人的电子邮件列表。

我的代码示例专门与限制（搜索）构造相关：

```
$request->Restriction = new EWSType_RestrictionType();
$request->Restriction->IsEqualTo = new EWSType_IsEqualToType();

$request->Restriction->IsEqualTo->FieldURI = new EWSType_PathToUnindexedFieldType();
$request->Restriction->IsEqualTo->FieldURI->FieldURI = 'message:Sender';

$request->Restriction->IsEqualTo->FieldURIOrConstant = new EWSType_FieldURIOrConstantType();
$request->Restriction->IsEqualTo->FieldURIOrConstant->Constant->Value = 'Bob Smith'; 
```

这种类型的限制导致零结果。

我注意到当我不受限制地搜索时，返回的结果包含发件人信息（但它是嵌套的）。例如：

```
[Sender] => stdClass Object
  (
    [Mailbox] => stdClass Object
      (
        [Name] => Bob Smith
      )
  ) 
```

如何满足限制中的嵌套信息？

其他搜索表达式示例：[https ://github.com/jamesiarmes/php-ews/wiki/Search-Expression:-Simple-Conditions](https://github.com/jamesiarmes/php-ews/wiki/Search-Expression:-Simple-Conditions)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T18:36:47.600

根据[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.emailmessage.sender%28v=exchg.80%29.aspx)文档， message:Sender 具有以下定义：

> 适当的价值
> 
> 类型：Microsoft.Exchange.WebServices.Data.EmailAddress
> 
> 一个电子邮件地址。

因此，不要使用限定名称“Bob Smith”（Outlook 可能会识别它，但 EWS 不知道），而是使用电子邮件地址 ('bsmith@foo.com')。

此外，虽然上面的代码应该可以工作，但它可能会抛出一个错误，因为 Constant 永远不会被定义。试试这个：

```
$request->Restriction->IsEqualTo->FieldURIOrConstant = new EWSType_FieldURIOrConstantType();
$request->Restriction->IsEqualTo->FieldURIOrConstant->Constant = new EWSType_ConstantValueType();
$request->Restriction->IsEqualTo->FieldURIOrConstant->Constant->Value = 'bsmith@foo.com'; 
```

# android - 将 JSON 响应的值存储在 arraylist 中，然后根据 JSONObject 输出过滤它们

> ID：16014868
> 
> 赞同：1
> 
> 时间：2013-04-15T12:13:12.643
> 
> 标签：android, json, arraylist

我正在开发一个应用程序，`JSON`当我使用正确的参数访问服务器时，我会得到响应。现在，我必须解析这些数据并将其`arraylist`存储`array`在`JSONObject`. 这就是我想说的：以下是`JSON response`我得到的：

```
{"rewards":[
{
"rewardID":"2",
"rewardType":"giftcard",
"rewardTitle":"$5 Starbucks Gift Card"
},
{
"rewardID":"3",
"rewardType":"giftcard",
"rewardTitle":"$5 Target Gift Card"
},
{
"rewardID":"24",
"rewardType":"miles",
"rewardTitle":"100 AmericanAirlines Advantage Miles"
},
{
"rewardID":"25",
"rewardType":"miles",
"rewardTitle":"100 US Airways Dividend Miles"
}
]
} 
```

您可以看到`rewardType`具有不同值的参数，例如`"giftcard"`, `"miles"`。我必须根据`JSONObject`ie`rewardType`单独解析并将其存储在以`arraylist`供进一步处理。这是我为获取 resposne 并将其存储在不同变量中所做的工作：

```
@Override
    protected String doInBackground(String... args) {
        HttpParams params = new BasicHttpParams();
        params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,
                HttpVersion.HTTP_1_1);
        HttpClient httpClient = new DefaultHttpClient(params);
        HttpPost post = new HttpPost(
                "API HERE");

        post.setHeader("Content-Type", "application/x-www-form-urlencoded");

        try {
            post.setEntity(new StringEntity("client_id=" + client_id + "&"
                    + "client_secret=" + clientSecretKey, HTTP.UTF_8));

            HttpResponse response = httpClient.execute(post);
            int i = response.getStatusLine().getStatusCode();
            System.out.println("HTTP Post status: "
                    + i);

            BufferedReader in = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));

            // SB to make a string out of the inputstream
            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            }
            in.close();

            // the json string is stored here
            String result = sb.toString();
            System.out.println("Result Body: " + result);
            return result;

        } catch (Exception e) {
            // TODO: handle exception
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        JSONObject jObject;
        try {
            jObject = new JSONObject(result);

            JSONArray jSearchData = jObject.getJSONArray("rewards");

            for (int i = 0; i < jSearchData.length(); i++) {

                JSONObject objJson = jSearchData.getJSONObject(i);

                rewardID = objJson.getString("rewardID");
                rewardType = objJson.getString("rewardType");
                rewardTitle = objJson.getString("rewardTitle");

                  if (rewardType == "giftcard") {
                    System.out.println("Reward ID: " + rewardID);
                    System.out.println("Reward Type: " + rewardType);
                    System.out.println("Reward Tittle: " + rewardTitle);
                    System.out.println("Reward ImageFileName: "
                            + rewardImageFilename);
                    System.out.println("Reward Price: " + rewardPrice);
                }

            }

        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        } 
```

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:05:49.037

利用：

if (rewardType.equals("giftcard"))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:17:37.153

如果您从 url 获取此数据，则此

```
 HttpGet httpGet = new HttpGet(url);
        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
                    inputstream = httpEntity.getContent();  
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString(); 
```

否则

```
 try {

        json = (your full data convert into string).toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

          rewards = jObj.getJSONArray("rewards");

        // looping through All 
        for (int i = 0; i < rewards.length(); i++) {
            JSONObject c = rewards.getJSONObject(i);

            // Storing each json item in variable

            rewardID = c.getString("rewardID");
            rewardTitle = c.getString("rewardTitle");

            // adding all get values into array
            if (rewardID != "null" && rewardTitle != "null") {
          //add your data values into list and then filter
                array1.add(rewardID);
                array2.add(rewardTitle);

            }

        } 
```

**编辑**

```
 ArrayList<String> array1 = new ArrayList<String>();
ArrayList<String> array2 = new ArrayList<String>();
    ArrayList<String> array3 = new ArrayList<String>();
    if (rewardType=="giftcard") {
        array1.add(rewardID);
        array2.add(rewardTitle);
         array2.add(rewardType);
      }

   show in which activity you want to show 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:44:30.320

为什么不创建一个对象来封装从 JSON 读取的数据。IE：

```
public final class Reward {
    private static final String REWARD_TYPE_GIFTCARD = "giftcard";
    private final int mRewardId;
    private final String mRewardType;
    private final String mRewardTitle;

 public Reward(final int rewardId, final String rewardType, final String rewardTitle){
     mRewardId = rewardId;
     mRewardType = rewardType;
     mRewardTitle = rewardTitle;
 }
 // Implement getter methods here. 
```

}

然后，您可以拥有这些 Reward 对象的数组列表，这将使它们更易于使用。您甚至可以添加一个方法来检查奖励是否是礼品卡：

```
public boolean isGiftcard() {
    return REWARD_TYPE_GIFTCARD.equals(mRewardType);
} 
```

此时，您可以按照 Rohit 的建议进行操作，仅当它是礼品卡时才将其添加到列表中。最后，如果您仍然需要所有对象并且您只是在寻找一种合乎逻辑的方式对它们进行分组，请尝试使用 HashMap>，其中键是奖励类型，值是一个列表，您可以在其中放置所有奖励，即礼品卡() 为真。

# javascript - 用于下载图像的画布 URL

> ID：16014870
> 
> 赞同：1
> 
> 时间：2013-04-15T12:13:28.943
> 
> 标签：javascript, html, getusermedia

只需获取canvas/image的url即可插入下载链接

```
<a href=IMAGE URL HERE" download="image">Save Image</a> 
```

我有以下代码...

```
<script>
            (function(){

                var ctx=canvas.getContext('2d');
                var localMediaStream=null;

                function sizeCanvas(){
                    setTimeout(function(){
                        canvas.width=video.videoWidth;
                        canvas.height=video.videoHeight;
                        img.height=video.videoHeight;
                        img.width=video.videoWidth;
                    },100);}

                function snapshot(){
                    ctx.drawImage(video,0,0);
                    img.src=canvas.toDataURL('image/png');
                }

                btnInsert.addEventListener('click',function(e){

                    if(navigator.getUserMedia){
                        navigator.getUserMedia('video',function(stream){
                            video.src=stream;
                            localMediaStream=stream;
                            sizeCanvas();
                        })
                    }else if(navigator.webkitGetUserMedia){
                        navigator.webkitGetUserMedia({
                            video:true
                        },function(stream){
                            video.src=window.webkitURL.createObjectURL(stream);
                            localMediaStream=stream;
                            sizeCanvas();
                        })
                    }else{({
                            target:video
                        });}},false);

                btnTake.addEventListener('click',function(e){
                    snapshot();
                },false);

                video.addEventListener('click',snapshot,false);
                btnCancel.addEventListener('click',function(e){
                    video.src='';
                    video.pause();
                    localMediaStream.stop();
                     nimg = new Image();
                     img.src=nimg;

                },false);})();

        </script> 
```

这段代码中发生了什么......是网络摄像头捕获的图像，dai 有保存按钮，这就是我需要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:01:34.170

这是解决方案...

```
<input type="text" id="ID_TEXT"/>
<a href="#" id="ID_LINK" download="">Save Image</a> 
```

输入图像名称是什么

```
<script>
            (function(){

...

                ID_LINK.addEventListener('click',function(e){
                   ID_LINK.href=canvas.toDataURL('image/png');
                   ID_LINK.download=ID_TEXT.value;
                },false);

...
        </script> 
```

我希望是

# java - 在 Lucene Java 中索引和搜索非字母字符

> ID：16014872
> 
> 赞同：1
> 
> 时间：2013-04-15T12:13:29.553
> 
> 标签：java, lucene

使用的 Lucene (Java) 版本是 4.2.1，用于索引和搜索的分析器是 org.apache.lucene.analysis.core.WhitespaceAnalyzer。下面的代码是在 Scala 中编写的，但我认为对于具有类似 C 语言经验的任何人来说都很容易阅读。

这是问题所在：我还需要用非字母字符索引和搜索文本。例如，我有名称的实体：“名称 1”、“名称 2”、“名称 3”……我希望能够搜索“名称 2”或只是“2”甚至“我 2” ”。

到目前为止我有

场：

```
val textField = new TextField("text", theFullText, Field.Store.NO) 
```

和查询：

```
val parser = new QueryParser(version, "text", analyzer)

// case-sensitive search
parser.setLowercaseExpandedTerms(false)   // removed when MyAnalyzer is used

// To be able to search for text in the middle. Makes searches slower when the index is big!
parser.setAllowLeadingWildcard(true)

val textWithWildcard = s"*${QueryParserBase.escape(text)}*"

val textQuery = parser.parse(textWithWildcard)
booleanQuery.add(textQuery, BooleanClause.Occur.MUST)
val topDocs: TopDocs = searcher.search(booleanQuery, 9999)
val hits: Array[ScoreDoc] = topDocs.scoreDocs
hits.map(_.doc) // return an Array of ScoreDocs' ids 
```

一个简单的单元测试：

```
"be able to search numbers" {
  for (idx <- 1 to 10) {
    val entity = new Entity
    entity.id = idx
    entity.name = s"name ${idx}"

    indexingService.index(entity)
  }

  val ids: Seq[Int] = indexingService.search[Entity]("name 3")
  ids.length must_==(1)
} 
```

即创建 10 个实体，然后搜索第三个。问题是结果是0。

想法要更改我的配置以使其正常工作？

**更新**：我创建了自己的分析器以支持不区分大小写的搜索：

```
class MyAnalyzer(ver: Version) extends Analyzer {

   protected def createComponents(fieldName: String, reader: Reader): Analyzer.TokenStreamComponents = {
      val tokenizer = new WhitespaceTokenizer(ver, reader)
      val lowerCaseFilter = new LowerCaseFilter(ver, tokenizer)
      val tsc = new Analyzer.TokenStreamComponents(tokenizer, lowerCaseFilter)
      tsc
   }
 } 
```

现在结果是**10**！同样，这是不希望的，因为测试搜索“名称 3”但返回了所有实体，即似乎数字在索引和搜索时都被削减了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:15:50.887

解决方案是添加：

```
parser.setDefaultOperator(Operator.AND) 
```

我之前尝试过，但由于某种原因它没有用。我想其他一些设置有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:00:30.967

要在字段中一起搜索一组单词，请用双引号将单词括起来。

我相信您可以跳过通配符（名称和 3 之间没有任何内容）。

```
val textWithWildcard = s"\"${QueryParserBase.escape(text)}\"" 
```

编辑：给你 10 个结果是正确的行为，因为返回的文档有不同的分数。当您按实体搜索时，您需要能够区分完全匹配查询和部分匹配查询。

# c++ - 关于数据库连接架构的设计难题

> ID：16014875
> 
> 赞同：0
> 
> 时间：2013-04-15T12:13:35.973
> 
> 标签：c++, database, architecture

我正在设计一个数据库浏览应用程序，到目前为止它还支持 MySQL，但最近我也开始实现对 Sqlite 的支持，并且在设计连接架构的实现方式时遇到了一些丑陋的问题。这仅与“连接”部分有关（即：您获取用户/数据库/主机的位置，或者对于 sqlite 文件名），而不是数据库功能。那已经整理好了。

我有一个基类“Connection”，它公开“普通”方法，例如`name()`，或纯虚拟方法，`virtual string fullLocation() = 0`它们返回一个可用于标识数据库的字符串（例如：`database@host`对于 MySql，或`/etc/mydb.sqlite`对于 Sqlite）。

现在，用户当然需要指定他想要连接的数据库，因此在应用程序的 GUI 中，他只需选择类型，然后填写凭据即可。我的麻烦就从这里开始了。我创建了一个`MySqlConnection`和一个`SqliteConnection`类，它们都派生自`Connection`但大多数情况下我最终得到的结果如下：

```
 Connection* c = 0;
        if(gui->engine_name() == "MYSQL")
        {
            string host = gui->getHost();
            string user = gui->getUser();
            string password = gui->getPassword();
            int port = gui->getPort();
            string db = gui->getDatabase();
            c = new MySqlConnection(host, user, password, db, port);
        }
        else
        {
            string dbFile = gui->getSqliteDbFile();
            c = new SqliteConnection(dbFile);
        }
        string meta = application->use_connection(&c); 
```

而且我担心这将在整个应用程序中继续存在，因为这两个数据库引擎的性质如此不同。

您对如何以优雅的方式解决此问题有一些指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:19:24.337

一种更优雅的方法是设计一个工厂类并在该`GenerateConnection()`工厂的方法中处理 GUI 输入：

```
void ConnectionFactory::GenerateConnection(Connection* c)
{
 if(gui->engine_name() == "MYSQL")
    {
        string host = gui->getHost();
        string user = gui->getUser();
        string password = gui->getPassword();
        int port = gui->getPort();
        string db = gui->getDatabase();
        c = new MySqlConnection(host, user, password, db, port);
    }
    else
    {
        string dbFile = gui->getSqliteDbFile();
        c = new SqliteConnection(dbFile);
    }

} 
```

如果您不喜欢对 gui 的依赖，您可以定义一个名为 Parameters 的结构并根据 gui 输入更新其实例，并将此对象提供给连接工厂的连接生成方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:22:57.863

您需要模式工厂，它将以抽象的方式为您创建连接。是肤浅的回答。这个工厂将是很好的 Builder 模式的参数化。像这样的东西：

```
 ParamBuilder *b = new ParamBuilder;
 if(gui->engine_name() == "MYSQL")
 {
      b->setHost(gui->getHost())
       ->setUser(gui->getUser());
       ->setPassword(gui->getPassword());
        ...
  }
  else
  {
      b->setFile(gui->getSqliteDbFile());
  }
  Connection *c = globalConnectionFactory->createConnection(b); 
```

# ocaml - 为什么这个 OCaml 代码这么慢？

> ID：16014877
> 
> 赞同：3
> 
> 时间：2013-04-15T12:13:41.163
> 
> 标签：ocaml

我是 OCaml 新手。我在 OCaml 中编写了一个简单的程序来生成公平和平方数（一个回文数和另一个回文数的平方，更多细节在这里：[https ://code.google.com/codejam/contest/2270488/dashboard# s=p2](https://code.google.com/codejam/contest/2270488/dashboard#s=p2) ) 如下：

更新 1：优化算法（在我的笔记本电脑上大约需要 20 秒）：

```
open Printf;;

let rec _is_palindrome s i j =
  i >= j || 
  (s.[i] = s.[j] && 
      _is_palindrome s (i + 1) (j - 1))
;;

let is_palindrome s =
  let sl = String.length s in
    sl > 0 && (_is_palindrome s 0 (sl - 1))
;;

let rec del_zeros s =
  let sl = String.length s in
    if (sl < 1) then
      s
    else
      (if s.[0] = '0' then
         del_zeros (String.sub s 1 (sl - 1))
       else
         s
      )
;;

let c2i c =
  Char.code c - Char.code '0'
;;

let i2c i =
  Char.chr (i + Char.code '0')
;;

(* only for finding fair and square numbers *)
let square s =
  let slen = String.length s in
    if slen < 1 then
      ""
    else
      let reslen = 2 * slen in
      let t = ref 0 in
        t := 0;
        (* fast check *)
        (let i = reslen/2 in
           for j = (slen - 1) downto 0 do
             if (i - 1 - j) >= 0 && (i - 1 - j) < slen then
               t := !t + (c2i s.[j]) * (c2i s.[i - 1 - j]);
           done;
           if !t > 9 then
             (* jump out *)
             raise (Invalid_argument "carry");
        ); 
        (let res = String.make reslen '0' in
           (* do the square cal now *)
           for i = (reslen - 1) downto 1 do
             t := 0;
             for j = (slen - 1) downto 0 do
               if (i - 1 - j) >= 0 && (i - 1 - j) < slen then
                 t := !t + (c2i s.[j]) * (c2i s.[i - 1 - j]);
             done;
             if !t > 9 then
               (* jump out *)
               raise (Invalid_argument "carry");
             res.[i] <- i2c !t;
           done;
           del_zeros res
        );
;;

let rec check_fs fsns p =
  try let sq = square p in
    if (is_palindrome sq) then
      sq :: fsns
    else
      fsns
  with Invalid_argument "carry" ->
    fsns
;;

(* build the fair and square number list *)
(* dfs *)
let rec create_fair_square_nums fsns p sum max_num_digs =
  let l = String.length p in
    if l > max_num_digs || sum > 9 then
          fsns
    else
      let fsns = create_fair_square_nums fsns ("0" ^ p ^ "0") sum max_num_digs in
      let fsns = create_fair_square_nums fsns ("1" ^ p ^ "1") (sum + 1) max_num_digs in
      let fsns = create_fair_square_nums fsns ("2" ^ p ^ "2") (sum + 4)  max_num_digs in
      let fsns = create_fair_square_nums fsns ("3" ^ p ^ "3") (sum + 9) max_num_digs in
      let fsns = check_fs fsns p in
        fsns
;;

let rec print_fsns fsns =
  List.iter (fun s -> printf "%s " s) fsns;
  printf "\n"
;;

let num_str_cmp s1 s2 =
  let len1 = String.length s1 in
  let len2 = String.length s2 in
    match (len1 - len2) with
      | 0 ->
          String.compare s1 s2
      | cmp -> cmp
;;

(* works *)

let max_dig = 51;;

let fsns = 
  let fsns = create_fair_square_nums [] "" 0 max_dig in
  let fsns = create_fair_square_nums fsns "0" 0 max_dig in
  let fsns = create_fair_square_nums fsns "1" 1 max_dig in
  let fsns = create_fair_square_nums fsns "2" 4 max_dig in
    create_fair_square_nums fsns "3" 9 max_dig
;;

let fsns = List.sort num_str_cmp fsns;;

print_fsns fsns;; 
```

我的原始代码（天真的解决方案，太慢了）：

```
open Printf;;

let rec _is_palindrome s i j =
  if i < j then
    if s.[i] = s.[j] then
      _is_palindrome s (i + 1) (j - 1)
    else
      false
  else
    true
;;

let is_palindrome s =
  if (String.length s < 1) then
    false
  else
    _is_palindrome s 0 ((String.length s) - 1)
;;

let rec del_zeros s =
  let sl = String.length s in
    if (sl < 1) then
      s
    else
      (if s.[0] = '0' then
         del_zeros (String.sub s 1 (sl - 1))
       else
         s
      )
;;

let c2i c =
  Char.code c - Char.code '0'
;;

let i2c i =
  Char.chr (i + Char.code '0')
;;

(* only positive number *)
let square s =
  (* including the carry dig *)
  let slen = String.length s in
  let res = (
    if slen > 0 then
      let reslen = 2 * slen in
      let res = String.make reslen '0' in
      let t = ref 0 in
        for i = (reslen - 1) downto 1 do
          t := c2i (res.[i]);
          for j = (slen - 1) downto 0 do
            if (i - 1 - j) >= 0 && (i - 1 - j) < slen then
              (t := !t + (c2i s.[j]) * (c2i s.[i - 1 - j]);
          (* printf "%d, %d: %d\n" j (i - 1 - j) !t; *) )
          done;
          (* printf "%d: %d\n" i !t; *)
          if !t > 9 then
            (res.[i - 1] <- 
             Char.chr (Char.code res.[i - 1] + (!t / 10));
             t := !t mod 10
            );
          res.[i] <- i2c !t;
        done;
        res;
        else
          ""
  ) in
    (* printf "square %s -> %s\n" s res; *)
    del_zeros res
;;

let extend_palindrome new_ps n = 
  ("0" ^ n ^ "0") :: 
  ("1" ^ n ^ "1") :: 
  ("2" ^ n ^ "2") :: 
  ("3" ^ n ^ "3") :: 
  new_ps
;;

let rec extend_palindromes new_ps ps = 
  match ps with
    | [] -> new_ps
    | h :: t -> 
        let new_ps = extend_palindrome new_ps h in
          extend_palindromes new_ps t
;;

let rec check_fs fsns ps =
  match ps with
    | [] -> fsns
    | h :: t -> 
        let sq = square h in
          if (is_palindrome sq) then
            check_fs (sq :: fsns) t
          else 
            check_fs fsns t
;;

(* build the fair and square number list *)
let rec create_fair_square_nums fsns ps max_num_digs =
  match ps with
    | h :: t ->
        if String.length h > max_num_digs then
          fsns
        else
          let ps = extend_palindromes [] ps in
          let fsns = check_fs fsns ps in
            create_fair_square_nums fsns ps max_num_digs
    | [] ->
        raise (Invalid_argument "fsn should not be []")
;;

let rec print_fsns fsns =
  List.iter (fun s -> printf "%s " s) fsns;
  printf "\n"
;;

let num_str_cmp s1 s2 =
  let len1 = String.length s1 in
  let len2 = String.length s2 in
    match (len1 - len2) with
      | 0 ->
          String.compare s1 s2
      | cmp -> cmp
;;

(* works *)

let max_dig = 50;;

let fsns = 
  let fsns0 = create_fair_square_nums [] [""] max_dig in
  let fsns1 = create_fair_square_nums [] ["0"; "1"; "2"; "3"] max_dig in
    (* print_fsns fsns0;
    print_fsns fsns1; *)
    ["0"; "1"; "4"; "9"] @ fsns0 @ fsns1
;;

(* print_fsns fsns;; *)

let fsns = List.sort num_str_cmp fsns;;

print_fsns fsns;; 
```

此代码生成 10^100 以内的公平和平方数。

此代码在性能方面应该存在一些（或许多）问题。在我杀死它之前，它运行了 30 多分钟。当 max_dig = 14 时，它会很快完成（< 1 分钟）。

欢迎任何关于改进此代码的建议或批评。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:13:17.193

这可能是许多其他问题中的一个（在您的用例中可能可以忽略不计，您应该分析一下以找出答案），但此代码片段已经存在算法问题：

```
let rec del_zeros s =
  let sl = String.length s in
    if (sl < 1) then
      s
    else
      (if s.[0] = '0' then
         del_zeros (String.sub s 1 (sl - 1))
       else
         s
      )
;; 
```

String.sub 在长度参数中是线性的（在内存中，因此是时间），所以整个函数是二次的：`del_zeros (String.make 50_000 '0')`可能会很慢。

为了有效地编写此代码，您应该将保留的字符收集在列表累加器中，不断累积总长度，最后创建一个大小合适的字符串并将这些字符写入其中。

作为近似值，使用的自然代码`Buffer`已经相当有效（这是我建议为通常的应用程序编写的，但如果这是关键路径的一部分，则可能不在算法竞赛中）：

```
let del_zeros s =
  let buf = Buffer.create (String.length s) in
  for i = 0 to (String.length s) - 1 do
    if s.[i] <> '0' then Buffer.add_char buf s.[i]
  done;
  Buffer.contents buf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T15:28:12.307

在处理大整数时，您可以使用`Big_int`比您自定义的 square 实现更快的模块（它还可以为您节省大量编写代码的时间）。

`if a then b else false`此外，在你可以简单地写的地方写是不好的风格`a && b`。

# extjs4 - console.log 不起作用

> ID：16014878
> 
> 赞同：0
> 
> 时间：2013-04-15T12:13:42.903
> 
> 标签：extjs4, console.log

我使用 ExtJS 4，当尝试通过带有 console.log 的 js 控制台打印时，消息不显示。我使用 Firebug 来查看 js 控制台。一个例子：

```
...
init: function(){
   console.log('Controlador cargado.');
   this.control({
   'abm-grid-usuarios button[action=show]':{
      click: function(btn){
         console.log('Se clickeo el boton de vista.');
         btn.up('abm-grid-usuarios').verInfoUsuario();
      }
   }
   });
} 
```

我加载了 ext-dev.js，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:51:43.067

您需要在应用配置中使用控制器吗？

```
...
Ext.application({

    controllers: [
        "ControllerName"
    ],
... 
```

# c++ - 将纹理与常见的 alpha 相结合

> ID：16014879
> 
> 赞同：1
> 
> 时间：2013-04-15T12:13:42.837
> 
> 标签：c++, directx

我有两个带有 alpha 通道的纹理，我需要通过以下方式“组合”：`result_alpha = 1 - (1 - alpha_1) * (1 - alpha_2)`. 我可以通过一些渲染状态操作来做到这一点：

```
device->SetRenderState(D3DRS_SRCBLEND, D3DBLEND_INVSRCALPHA); // note the inversion
device->SetRenderState(D3DRS_DESTBLEND, D3DBLEND_SRCALPHA);

device->SetTextureStageState(0, D3DTSS_ALPHAOP, D3DTOP_MODULATE);
device->SetTextureStageState(0, D3DTSS_ALPHAARG1, D3DTA_TEXTURE | D3DTA_COMPLEMENT);

device->SetTextureStageState(1, D3DTSS_ALPHAOP, D3DTOP_MODULATE);
device->SetTextureStageState(1, D3DTSS_ALPHAARG1, D3DTA_TEXTURE | D3DTA_COMPLEMENT); 
```

但是，我还需要使用恒定的 alpha 值来调制结果，我不知道该怎么做。如果我只是将 alpha 设置为漫反射颜色，则结果将在`(1-alpha, 1)`范围内而不是`(0, alpha)`.

# php - PHP MySQL 有两个查询

> ID：16014881
> 
> 赞同：1
> 
> 时间：2013-04-15T12:13:49.100
> 
> 标签：php, mysql, database

我需要做一个`SELECT * FROM table_X`，问题是 table_X 是另一个查询的结果，我不知道该怎么做，也许有两个循环，像这样：

```
<?php

$query1 = mysql_query("SELECT * FROM table_ref");
while ($row = mysql_fetch_array($query1))
{

     $name = $row['table_name'];

     $query2 = mysql_query(" SELECT * FROM '$name' ");

     while ($row = mysql_fetch_array($query2)) 
     {
         $time = $data['itime'];
         echo $time;      
     }
}

?> 
```

桌子都很相似，我不能联合，没有钥匙。所以我想要的是从第一个查询的每个结果中只显示第二个查询的结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:16:35.247

只需更改您的报价即可开始查询

**改变**

```
 $query2 = mysql_query(" SELECT * FROM '$name' "); 
```

**至**

```
 $query2 = mysql_query(" SELECT * FROM `".$name."` "); 
```

我也宁愿检查这部分

```
 while ($row = mysql_fetch_array($query2)) 
 {
     $time = $data['itime'];
     echo $time;      
 } 
```

您已经使用变量`$row`来获取以前的查询，因此最好更改为其他内容，看起来`$data`符合您的需求，因为您已经使用但您没有声明它

```
 while ($data = mysql_fetch_array($query2)) 
 {
     $time = $data['itime'];
     echo $time;      
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:17:14.247

那么，你的结构是什么？我不明白。你有列 table_name 在哪里列出了很多表？如果是这样，只需在您的 $name 上使用反引号：

```
$query2 = mysql_query(" SELECT * FROM `$name` "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:18:48.627

除了评论中指出的明显内容外，您正在`$row`第二个循环中覆盖。

此外，您正在尝试读取`$data`未定义的数组 ( )。

以下会更好（但仍然不理想）：

```
$query1 = mysql_query("SELECT `table_name` FROM `table_ref`");
while ($row = mysql_fetch_array($query1))
{
     $name = $row['table_name'];
     $query2 = mysql_query("SELECT `itime` FROM `$name`");

     while ($data = mysql_fetch_array($query2)) 
     {
         $time = $data['itime'];
         echo $time;      
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T13:21:18.803

试试这个查询：

select x.* from (SELECT table_name FROM table_ref) as x

# c# - 绕过 Page.VerifyRenderingInServerForm

> ID：16014899
> 
> 赞同：0
> 
> 时间：2013-04-15T12:14:50.683
> 
> 标签：c#, asp.net, webforms, asp.net-2.0

我正在尝试通过单击按钮（使用`Control.Render`）将向导控件呈现为 HTML 字符串。我已经使用以下内容禁用了事件验证，这可以正常工作并使我能够将整个*页面*呈现为字符串。我在包含向导​​的用户控件中执行此操作：

```
protected void Page_Init(object sender, EventArgs e)
{
    if (Request.Form["__EVENTTARGET"] != null
        && Request.Form["__EVENTTARGET"] == btnPrint.ClientID.Replace("_", "$"))
    {
        Page.EnableEventValidation = false;
    }
} 
```

虽然这可行，但我想自己呈现向导控件。我知道当我尝试自行呈现此控件（不带表单标签）时，我可以重写`Page.VerifyRenderingInServerForm`以防止页面引发异常，如下所示：`runat="server"`

```
public override void VerifyRenderingInServerForm(Control control)
{
    // base.VerifyRenderingInServerForm(control);
} 
```

但是，我不想完全覆盖它。有没有办法可以动态绕过它：

*   对于单击相关按钮的特定 PostBack，或者...
*   专门针对向导控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:11:25.070

怎么样：

```
public override void VerifyRenderingInServerForm(Control control)
{
    if (!SkipVerifyRenderingInServerForm)
    {
        base.VerifyRenderingInServerForm(control);
    }
}

public bool SkipVerifyRenderingInServerForm
{
    get
    {
        object o = HttpContext.Current.Items["SkipVerifyRenderingInServerForm"];
        return (o == null) ? false : (bool) o;
    }
    set
    {
        HttpContext.Current.Items["SkipVerifyRenderingInServerForm"] = value;
    }
} 
```

然后您可以在您的按钮单击事件处理程序中设置`SkipVerifyRenderingInServerForm`为。`true`

# excel - 根据 excel 中的 2 个条件返回多个不同的值

> ID：16014901
> 
> 赞同：0
> 
> 时间：2013-04-15T12:14:51.997
> 
> 标签：excel

希望你能帮忙。我有 2 张看起来像这样的 excel 表：

```
Sheet1:

 ID       trnx       Module
 1        aj08       AA
 2        aj08       AA
 3        aj08       AA
 1        CJ20       ps opex
 1        CJ20       ps capex
 2        cn22       HR

 Sheet 2

 ID       trnx       Module
 1        aj08 
 2        aj08 
 1        ml81
 3        aj08
 2        cn22
 1        cj20
 1        cj20
 3        mm02 
```

我使用的公式是

```
INDEX($G$2:$G$9,SMALL(IF(A2=$F$2:$F$9,ROW($F$2:$F$9)-MIN(ROW($F$2:$F$9))+1,"")&IF(C2=$H$2:$H$9,ROW($H$2:$H$9)-MIN(ROW($H$2:$H$9))+1,""),COUNTIF(A$2:A$2,A2)&COUNTIF(C$2:C$2,C2))) 
```

我需要根据匹配的 ID 和 trnx 填充工作表 2 中的“模块”，如果 ID 匹配但不匹配 trnx，则模块的单元格必须为“不匹配”。

我遇到的问题是工作表 2 错误地填充了数据。例如，工作表 2 中第二次出现的 ID“1”是拉出 Module ps opex。假设为“不匹配”，因为表 2 中的 trnx 是 ml81。

请帮忙！！！提前致谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:44:52.080

这不会解决我在评论中询问您有“重复键”的部分，但无论如何可能会对您有所帮助：

由于您的键实际上是 the`Id`和`trnx`列的组合，因此我插入了一个连接列（我使用`=CONCATENATE(trnx, "_", id)`了那些名称指代工作表位置的位置，但您也可以轻松地在另一个方向上连接，或者使用其他一些分隔符。它是只是为了创建一个键列（我们可以更轻松地对其进行排序和搜索。）

在表 2 中，我从那里列出的值中形成了相同的键列，然后您的模块列变为：

```
 =IF(ISNA(VLOOKUP(I12,$C$10:$D$15,2,0)), "No Match", VLOOKUP(I12,$C$10:$D$15,2,0)) 
```

在该公式中，I12 是我们在工作表 2 中查找的关键单元格，而 VLOOKUP 中的绝对引用是工作表 1 中的数据表。

# web-scraping - Scrapy：如何在一段时间后重新抓取页面？

> ID：16014908
> 
> 赞同：0
> 
> 时间：2013-04-15T12:15:10.933
> 
> 标签：web-scraping, scrapy

懒惰，我正在尝试使用scrapy，而不是使用celery+requests实现我自己的抓取服务（去过那里，做到了）。假设我有一个我喜欢监视的 N 个页面的列表。在检索页面 X 并阅读其内容后，我想告诉系统稍后（取决于其内容）重新扫描它，比如两个小时过去后。

Scrapy 可以做到这一点吗？

# jquery - 如何在 JavaScript 中触发 jQuery-sortable 的“更新”事件？

> ID：16014909
> 
> 赞同：2
> 
> 时间：2013-04-15T12:15:17.623
> 
> 标签：jquery, jquery-ui, testing, jquery-ui-sortable

我想在我的集成测试中测试使用 jQuery 排序的排序。为此，测试框架（capybara，selenium）允许我调用`page.execute_script("activeAdminSortable().sortable().update()")`.

通过使用适当的参数触发`update`事件，我可以模拟拖放以测试它是否有效。JavaScript 代码的相关部分是：

```
(function($) {
  $(document).ready(function() {
    $('tbody .grabber').parents('tbody').activeAdminSortable();
  });

  $.fn.activeAdminSortable = function() {
    this.sortable({
      update: function(event, ui) {
        $.ajax({
          axis: 'y',
          cursor: 'move',
          url: ui.item.find('[data-sort-url]').data('sort-url'),
          type: 'post',
          data: { position: ui.item.index() + 1 },
          success: activeAdminSortableFlashFinished
        });
      }
    });

    this.disableSelection();
  }
})(jQuery); 
```

我需要找到一种方法来触发`update`事件并传递正确的参数。有没有简单的方法来制作这样的`event`, 和`ui`参数？并触发`update`.

或者，我可以编写一些 JavaScript 来实际抓取、拖放项目，但这对我来说似乎相当脆弱。或者那是微不足道的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-11T23:45:30.913

`.trigger("update")`在你有的地方添加`.update()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T01:28:35.187

我`$('#sortable').trigger('sortupdate')`成功地用于同样的目的。

# html - 如何在 django 中为模板应用背景图像

> ID：16014910
> 
> 赞同：4
> 
> 时间：2013-04-15T12:15:26.340
> 
> 标签：html, css, django, django-templates

在我的网站中，在一个特别的表格中，我必须插入一个图像作为背景。我这样做了，但图像看起来像双图像，因为图像小于单元格的宽度和高度，它正在重叠。

在背景图像单元格中，我使用 no-repeat 来结束同一图像的重复显示，但它不起作用。我正在使用 django 框架中的 html 设计网页。

模板是

```
<td background="{{ STATIC_URL }}images/sample.JPG" no-repeat;> 
```

请问如何取消表格单元格中相同背景图像的重复显示。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-02-02T17:07:31.930

看看我是怎么做到的：在模板中，我输入了以下行：

```
<body id="bg" style="background-image: url('{% static "images/33.jpg"%}')";> 
```

在CSS中：

```
#bg{
    background-size: 1800px 900px;
    background-repeat: no-repeat;
    background-position: top;
    background-attachment: fixed;
} 
```

结果，我获得了固定的背景和屏幕的比例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T12:19:46.210

`'no-repeat'`不是有效的 html 属性。您为什么不使用样式属性或正确的 css 包含文件？

```
<td style="background: url('{{ STATIC_URL }}images/sample.JPG') no-repeat;"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T12:28:02.027

尝试如下...它会帮助你...

它`no repeats the image background`和它也`Stretch the image to Table Cell`..

**CSS：**

```
<style>
.tdStyle
{
background-image:url('{{ STATIC_URL }}images/sample.JPG');
background-repeat:no-repeat;
background-size:100%;
}
</style> 
```

要支持旧浏览器，您可以在 CSS 中添加以下行：

```
-moz-background-size: 100%; /* Gecko 1.9.2 (Firefox 3.6) */
-o-background-size: 100%; /* Opera 9.5 */
-webkit-background-size: 100%; /* Safari 3.0 */
-khtml-background-size: 100%; /* Konqueror 3.5.4 */
-moz-border-image: url(mtn.jpg) 0; /* Gecko 1.9.1 (Firefox 3.5) */ 
```

**HTML：**

```
<td class="tdStyle"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-02T11:10:50.037

在 CSS 中你会做：

```
#.bg-image {

      background-size: 100%;

      background-position: center center;

      background-repeat: no-repeat; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-04T04:55:18.700

这对我有用。如果我们使用带有 background-image:url 的内联样式，我们必须手动创建路径。

```
<body id="bg" style="background-image: url('../images/33.jpg')";> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-19T22:13:04.743

```
.bgded{
      background-image: url( "{% static 'images/ur.jpg' %}");
  } 
```

请记住通过添加加载静态页面

```
{% load static %} 
```

在您的 html 页面的顶部。

# jquery - Jquery克隆特定标签

> ID：16014911
> 
> 赞同：0
> 
> 时间：2013-04-15T12:15:44.383
> 
> 标签：jquery, clone

我正在尝试根据以下内容在 h6 标记中回显内容：

```
$('input').keyup( function () {
if ($(this).val() > '0') 
    $('#testh6').append($(this).parents("tr").clone("h6"));
}); 
```

问题是，它需要整个 tr 而不仅仅是包含 h6。我该如何修改它，所以我只是克隆 h6？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:16:58.170

这应该这样做：

```
$('input').keyup( function () {
if ($(this).val() > '0') 
    $('#testh6').append($(this).parents("tr").find("h6").clone());
}); 
```

**编辑**：回答评论：

当 val == 0 时再次删除它

```
$('input').keyup( function () {
    if ($(this).val() > '0') {
        $('#testh6 h6').remove();  // Make sure there's no previous tag left.
        $('#testh6').append($(this).parents("tr").find("h6").clone());
    }
    elseif ($(this).val() == '0'){
        $('#testh6 h6').remove();
    }
}); 
```

这当然会删除该 div 中的所有 h6-tags，如果这不是你想要的，你需要保留一个引用或以某种方式识别它，以便以后恢复它

# ios - UITextView/UILabel 中显示链接、热词的最佳解决方案是什么？

> ID：16014916
> 
> 赞同：1
> 
> 时间：2013-04-15T12:15:58.393
> 
> 标签：ios, objective-c, uilabel

我想在`UILabel`/`UITextView`成为链接中添加一些单词，以便人们可以单击它（例如电话号码、网络链接、用户名……等）。

我尝试过使用`UIWebView`，但它加载文本太慢，不像简单`UILabel`/那么快，`UITxtView`所以我决定不使用`UIWebView`.

我搜索了许多习惯`UILabel`来做到这一点，我发现`GLTapLabel`我认为这是最简单的方法。但`GLTapLabel`仅支持 2 种类型的链接，它检测以“#”和“@”开头的单词（我想创建更多类型，如电话号码、网络链接等）。还有一个问题是，如果我点击 a里面`GLTapLabel`的链接，`UITableView`它会触发`tableView:didSelectRowAtIndexPath:`（我在这里也问过[GLTapLabel Inside UITableView](https://stackoverflow.com/questions/15764931/gltaplabel-inside-uitableview?noredirect=1#comment22668262_15764931)但尚未解决）。

所以大家能给我一些建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T13:25:18.583

对于任意链接，您最好使用[`TTTAttributedLabel`](https://github.com/mattt/TTTAttributedLabel)，它的子类`UILabel`在 iOS 5 上显示属性字符串。如果您使用的是 iOS 6+，则`UILabel`直接支持属性字符串。

```
TTTAttributedLabel *someLabel;
[someLabel addLinkToURL:[NSURL URLWithString:someURLString] 
              withRange:[longerTextString rangeOfString:linkTextString]];

#pragma mark - TTTAttributedLabel Delegate

- (void)attributedLabel:(TTTAttributedLabel *)label didSelectLinkWithURL:(NSURL *)url {
    // handle the URL somehow
    [[UIApplication sharedApplication] openURL:url];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:53:19.603

您需要启用`UITextView`. `dataDetectorTypes`这将允许您拥有 URL 和其他类型数据的链接。

# php - 在 codeigniter 中使用两个输入字段进行搜索

> ID：16014918
> 
> 赞同：1
> 
> 时间：2013-04-15T12:16:11.657
> 
> 标签：php, mysql, codeigniter, search, cookies

我有一个搜索表可以在我的数据库中搜索工厂。我的工厂表现在有一个名为“邮政编码”的字段，当您第一次访问该站点时，您必须输入您的邮政编码。这将保存在 cookie 中，因此您不必再次更改它。

现在我想使用搜索词和 cookie 'postcode' 来搜索工厂

这是我的搜索表单[http://kees.een-site-bouwen.nl/](http://kees.een-site-bouwen.nl/)

所以是这样的：

```
<form action="home/searchresults" method="post">
<input type="search" placeholder="search..." name="search">
<input type="search" value="<?= $this->input->cookie('postcode')?>">
</form> 
```

在我的控制器中是这样的：

```
$match = $this->input->post('search');
$match2 = $this->input->cookie('postcode');

$data['query'] = $this->bedrijven_model->get_search($match, $match2);
$this->load->view('views/header');
$this->load->view('views/searchresults', $data);
$this->load->view('views/footer'); 
```

在我的模型中，我有：

```
function get_search($match)
{
    $this->db->like('Bedrijfsnaam', $match);
    $this->db->or_like('Postcode', $match);
    $this->db->or_like('Plaats', $match);
    $this->db->or_like('Telefoonnummer', $match);
    $this->db->or_like('Email', $match);
    $this->db->or_like('Website', $match);
    $this->db->or_like('Profiel', $match);
    $this->db->or_like('Adres', $match);
    $this->db->or_like('Categorie', $match);

    $this->db->join('bedrijven', 'bedrijfcategorieen.idbedrijven = bedrijven.idbedrijven');
    $this->db->join('categorieen', 'bedrijfcategorieen.idcategorieen = categorieen.idcategorieen');
    $this->db->group_by('bedrijfcategorieen.idbedrijven', 'bedrijfcategorieen.idcategorieen');

    $query = $this->db->get('bedrijfcategorieen');

    return $query->result();
   } 
```

但这不起作用。我在这里问了一个类似的问题：[防止在控制器功能中覆盖查询 - codeigniter](https://stackoverflow.com/questions/16011313/prevent-overriding-queries-in-controller-function-codeigniter)

但没有对我有用的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:29:09.397

您为 提供了 2 个参数`$this->bedrijven_model->get_search($match, $match2);`，但只在函数本身中提供了一个：`get_search($match)`。所以：

```
function get_search($match, $match2 = false)
{
    $this->db->like('Bedrijfsnaam', $match);
    $this->db->or_like('Postcode', $match);
    //etc
    if($match2){
        $this->db->where('Postcode', $match2);
    }
} 
```

...应该管用？

**更新**

在聊天中，很明显最好不要使用活动记录，因为它是一个有点复杂的查询。相反，我提供了这个原始 SQL：

```
$query = "SELECT * FROM (`bedrijfcategorieen`)
JOIN `bedrijven` ON `bedrijfcategorieen`.`idbedrijven` = `bedrijven`.`idbedrijven`
JOIN `categorieen` ON `bedrijfcategorieen`.`idcategorieen` = `categorieen`.`idcategorieen`
WHERE (`Bedrijfsnaam` LIKE '%".$this->input->post('search')."%'
OR `Plaats` LIKE '%".$this->input->post('search')."%'
OR `Telefoonnummer` LIKE '%".$this->input->post('search')."%'
OR `Email` LIKE '%".$this->input->post('search')."%'
OR `Website` LIKE '%".$this->input->post('search')."%'
OR `Profiel` LIKE '%".$this->input->post('search')."%'
OR `Adres` LIKE '%".$this->input->post('search')."%'
OR `Categorie` LIKE '%".$this->input->post('search')."%')
AND (`Postcode` = `".$this->input->post('cookie')."`)
GROUP BY `bedrijfcategorieen`.`idbedrijven`"; 
```

...使用此位检索结果集：

```
$result = $this->db->query($query); 
```

`$this->input->post('search')`并且`$this->input->post('cookie')`可以在上面的sql中替换为`$match`and 。`$match2`我还建议为 cookie 设置一个默认值，因为它可以被用户从输入字段中删除；就像是

```
$match2 = $this->input->post('cookie') ? $this->input->post('cookie') : 'default'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:27:28.877

如果我理解你是正确的，你为什么不在 like 语句之后添加另一个 where 语句。像这样的东西：

```
function get_search($match,$postcode)
{
    $this->db->like('Bedrijfsnaam', $match);
    $this->db->or_like('Postcode', $match);
    $this->db->or_like('Plaats', $match);
    $this->db->or_like('Telefoonnummer', $match);
    $this->db->or_like('Email', $match);
    $this->db->or_like('Website', $match);
    $this->db->or_like('Profiel', $match);
    $this->db->or_like('Adres', $match);
    $this->db->or_like('Categorie', $match); 
```

$this->db->where("postcode",$postcode);

```
 $this->db->join('bedrijven', 'bedrijfcategorieen.idbedrijven = bedrijven.idbedrijven');
    $this->db->join('categorieen', 'bedrijfcategorieen.idcategorieen = categorieen.idcategorieen');
    $this->db->group_by('bedrijfcategorieen.idbedrijven', 'bedrijfcategorieen.idcategorieen');

    $query = $this->db->get('bedrijfcategorieen');

    return $query->result();
   } 
```

更新：

你的cookie设置了吗？你能正确获得价值吗？尝试下一个脚本作为控制器。应该将 cookie 值回显到屏幕上。也许它在获取 cookie 值时已经出错了。

```
 $match = $this->input->post('search');
    $match2 = $this->input->cookie('postcode');
echo "cookie value = ".$match2;

    $data['query'] = $this->bedrijven_model->get_search($match, $match2);
    $this->load->view('views/header');
    $this->load->view('views/searchresults', $data);
    $this->load->view('views/footer'); 
```

# ember.js - ember-data 作为 d3 的数据

> ID：16014920
> 
> 赞同：3
> 
> 时间：2013-04-15T12:16:16.270
> 
> 标签：ember.js, d3.js, ember-data

我想将我的 emberdata 用作在 d3 中创建对象的数据。我尝试将控制器模型中的项目转换为新的 javascript 对象，并将这个新数组提供给 d3 数据。这是代码

```
App.GraphicsView = Ember.View.extend( {
didInsertElement: function() {
    var svg = d3.select("#svg");
    var data = this.get('controller').get('model').get('content');
    var newData = [];
    for(var i = 0; i < data.length; i++) {
          newData.push(data[i]);
     }
    var graphics = svg.selectAll("rect")
        .data(newData)
        .enter()
        .append("rect");
    graphics.attr("x", function(d, i) {
        return d.get('x');
    })
} 
```

但数据变量不是真正的数组，所以我不能迭代它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:29:54.373

Ember 有很多内置的迭代器（查看 Ember.Enumerable 文档）。但是，在您的情况下，只需调用`toArray`就足够了。

```
App.GraphicsView = Ember.View.extend({
  didInsertElement: function() {
    var svg = d3.select("#svg");
    var data = this.get('controller.content');
    var newData = data.toArray();
    var graphics = svg.selectAll("rect")
      .data(newData)
      .enter()
      .append("rect");
    graphics.attr("x", function(d, i) {
      return d.get('x');
    })
  }
}) 
```

编辑：这是您的小提琴[http://jsfiddle.net/PkT8x/156/的工作版本](http://jsfiddle.net/PkT8x/156/)

有几件事，首先，你有不兼容的 Ember 和 Ember-Data 版本。

其次，`FixtureAdapter`默认情况下模拟远程响应，因此集合实际上是空`didInsertElement`的`App.Graphic`，直到下一个运行循环才用对象填充数组，为了解决这个问题，我让 Ember 在控制器长度时重新计算 d3 对象变化。

```
App.GraphicsView = Ember.View.extend({
  graphicsObserver: function() {
    var svg = d3.select("#svg");
    var data = this.get('controller.content');
    var newData = data.toArray();
    var graphics = svg.selectAll("rect")
      .data(newData)
      .enter()
      .append("rect");
    graphics.attr("x", function(d, i) {
      return d.get('x');
    })
  }.observes("controller.length")
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T19:32:06.777

这是另一个例子：http: [//jsfiddle.net/2UPLp/16/light/](http://jsfiddle.net/2UPLp/16/light/)

要求：

```
d3.v2.min.js
handlebars-1.0.0.beta.6.js
ember-1.0.pre.min.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T19:16:40.677

这是另一种方法

[https://github.com/sabithpocker/ember-appkit-d3-sample](https://github.com/sabithpocker/ember-appkit-d3-sample)

> 这种特殊的方法是使用 d3 生成路径并使用 Ember 将其绑定到 svg。这将导致路径响应应用程序中的数据更改。该示例不使用 d3 来呈现 svg，而是使用 d3 API 来计算路径并在 svg 中使用它。

# html - HTML 5 和图像映射

> ID：16014925
> 
> 赞同：0
> 
> 时间：2013-04-15T12:16:19.850
> 
> 标签：html, image, html5-canvas

任何人都知道如何完成这样的事情

[http://www.jarzebinowe.pl/mieszkania.html](http://www.jarzebinowe.pl/mieszkania.html) （您需要选择楼层...）

在 HTML5 中？

这是关于选择公寓、灯光等的问题。.. 顶一下 HTML5 如何处理一张图像，结果就是这样

我很抱歉提出如此奇怪和简洁的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:19:46.430

**试试 html`map`元素**

您可能可以通过使用 html 更简单地实现对建筑物的“深入”，`map`这将让您的用户单击图像的一部分并链接到新的更具体的图像。

这是一个参考： [http ://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

**[使用更精美的画布显示进行编辑。]**

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/BbCJx/](http://jsfiddle.net/m1erickson/BbCJx/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:15px; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var floorplan=document.getElementById("floorplan");
    var planCtx=floorplan.getContext("2d");
    planCtx.font="24px Arial";
    planCtx.fillStyle="red";

    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    var lastWindow=-1;
    var plan=new Image();
    var outside=new Image();
    outside.onload=function(){
        plan.onload=function(){
            ctx.drawImage(outside,0,0);
        }
        plan.src="https://dl.dropboxusercontent.com/u/139992952/stackoverflow/inside.jpg";
    }
    outside.src="https://dl.dropboxusercontent.com/u/139992952/stackoverflow/outside.png";

    var windows=[]
    windows.push({top:66, left: 70, bottom:111, right:111, floorplan:0, apartment:"3a"});
    windows.push({top:66, left:139, bottom:111, right:183, floorplan:0, apartment:"3b"});
    windows.push({top:66, left:211, bottom:111, right:255, floorplan:0, apartment:"3c"});
    windows.push({top:153, left: 70, bottom:196, right:111, floorplan:1, apartment:"2a"});
    windows.push({top:153, left:139, bottom:196, right:183, floorplan:1, apartment:"2b"});
    windows.push({top:153, left:211, bottom:196, right:255, floorplan:1, apartment:"2c"});
    windows.push({top:239, left:139, bottom:283, right:182, floorplan:2, apartment:"1a"});

    function selectWindow(x,y){
        var w;
        var isInWindow=false;
        for(var i=0;i<windows.length;i++){
            w=windows[i];
            if(x>w.left && x<w.right && y>w.top && y<w.bottom){
               isInWindow=true;
               if(i!=lastWindow){
                   planCtx.clearRect(0,0,floorplan.width,floorplan.height);
                   planCtx.drawImage(plan,0,0);
                   planCtx.fillText("Apt: "+w.apartment+", Plan: "+w.floorplan,70,25);
                   lastWindow=i;
               } 
               break;
            }
        }
        if(!isInWindow){ planCtx.clearRect(0,0,floorplan.width,floorplan.height); };
    }

    function handleMouseMove(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);
      $("#movelog").html("Move: "+ canMouseX + " / " + canMouseY);

      // Put your mousemove stuff here
      selectWindow(canMouseX,canMouseY);

    }

    $("#canvas").mousemove(function(e){handleMouseMove(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <p>Mouse over a window to see it's floorplan</p>
    <canvas id="canvas" width=300 height=300></canvas>
    <canvas id="floorplan" width=300 height=300></canvas>

</body>
</html> 
```

# android - Android：调用相机意图后活动被破坏

> ID：16014930
> 
> 赞同：48
> 
> 时间：2013-04-15T12:16:25.293
> 
> 标签：android, android-activity, android-camera-intent

我有两个活动（A1，A2）。A1 调用 A2 并从 A2 我调用相机意图如下

```
launchIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
launchIntent.putExtra(MediaStore.EXTRA_OUTPUT,photoPath);   
startActivityForResult(launchIntent,CAMERA_REQUEST); 
```

它打开相机，我可以拍照。但是，一旦我单击保存按钮（s3 中的勾选按钮），就会出现问题，我的**onActivityResult**不会被调用，而是会调用 A2 的 onDestroy 方法。我在 onActivityResult fn 中几乎没有要完成的逻辑。

我在 Stackoverflow 上读过一些关于此的帖子，但我无法从中获得有用的输出。我的第二个活动（A2）有这样的清单

```
android:configChanges="keyboardHidden|orientation|locale"
android:screenOrientation="portrait 
```

**注意：**在 HTC One X 中，我的 onActivityResult fn 被调用，但在我的 S3 中，第二个 Activity(A2) 被破坏

请分享你对此的想法。提前致谢

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-05-14T14:21:23.550

我有同样的问题。我会疯的，但最后我在[这里](https://stackoverflow.com/questions/16154279/galaxy-s3-taking-picture-in-portrait-mode-destroys-activity)找到了解决方案。问题是，当您单击相机的“保存”按钮时，活动调用更改方向方法，它将销毁并重新创建。尝试设置

`android:configChanges="orientation|screenSize"`

在 android 清单中（不仅`android:configChanges="orientation"`因为[这里](https://stackoverflow.com/questions/3329318/android-how-to-not-destroy-the-activity-when-i-rotate-the-device)建议，它不适用于 API 级别 13 或更高级别）。

它可以防止破坏活动，它对我有用。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-11-03T05:24:55.793

启动相机需要大量内存。因此，在内存不足的设备上，android 系统会关闭在后台运行的活动，因此会调用 onCreate()。由于您提供的此光路径变为空，您将无法获取保存的图像。

解决方案是在系统破坏您的活动时保存光路径，然后再次恢复。

```
@Override
    public void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub

            outState.putString("photopath", photopath);

        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        if (savedInstanceState != null) {
            if (savedInstanceState.containsKey("photopath")) {
                photopath = savedInstanceState.getString("photopath");
            }
        }

        super.onRestoreInstanceState(savedInstanceState);
    } 
```

如果您在 Fragment 上执行此操作。

```
@Override
    public void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub

            outState.putString("photopath", photopath));

        super.onSaveInstanceState(outState);
    }

    @Override
    public void onViewStateRestored(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        if (savedInstanceState != null) {
            if (savedInstanceState.containsKey("photopath")) {
                photopath = savedInstanceState.getString("photopath");
            }
        }

        super.onViewStateRestored(savedInstanceState);
    } 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-11-17T05:50:35.773

确保您没有打开“不保留活动”开发人员设置，因为它会破坏您要离开的活动。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-15T12:27:56.077

相机应用程序需要大量内存，为了释放内存，操作系统必须终止后台应用程序，包括您的应用程序。这对于所有 Android 应用程序都是正常的。当相机应用返回时，您的活动将被重新创建。要保留活动状态信息，请覆盖`onSaveInstanceState()`以存储您的数据并将它们读回`onCreate()`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-26T09:20:04.870

当我调用 Camera Intent 时，我的 Activity 有许多任务正在运行。我有 GPS 位置监听器，还有更多任务。

当它从相机意图返回时，我需要在地图上的图像拍摄位置添加标记。所以如果用户拍摄了多张照片，它应该为每张照片显示标记。

如果每次我调用 Camera Intent 时它都会破坏我的 Activity，那么我之前拥有的关于标记及其位置的所有信息都会丢失。而且，我将不得不再次初始化地图。这对我的应用程序来说是个大问题。

是的，只有当我在横向模式下拍照时才会发生这种情况。如果我拍肖像照，到目前为止一切都很好..

我会尝试`android:configChanges="orientation|screenSize"` 按照这里的建议使用..希望它会有所帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-17T10:27:19.730

对我来说，当我在开发人员模式中启用一个名为“**不要保留活动**”的选项时，就会发生这种情况。取消选中后，从图库或相机应用程序中选择图片后，活动将不会重新创建。

# java - 如何在elasticsearch中添加where子句

> ID：16014932
> 
> 赞同：3
> 
> 时间：2013-04-15T12:16:29.473
> 
> 标签：java, elasticsearch

我对弹性搜索很陌生。我有一个弹性搜索查询，它根据关键字返回数据库中存在的所有用户，但在这里我只需要获取活动状态为真的用户，但现在我正在获取所有用户列表。

我已经建立了一个搜索查询

```
 {
        "from" : 0,
        "size" : 30,
        "query" : {
            "query_string" : {
                "query" : "*jhon*",
                "default_field" : "_all"
            }
        },
        "sort" : [ 
            {
                "id" : {
                    "order" : "desc"
                }
            }
        ]
    } 
```

我正在使用类似的查询`*jhon*`，但我需要得到类似用户名的结果，`jhon`并且他的活动状态应该是真实的，所以我已经尝试过`*"+jhon+"\*"#activated~true"`，但我没有得到想要的结果。我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T18:41:19.127

最好在查询中添加过滤器。过滤器更快，因为它们不涉及任何评分并且被缓存。您可以使用不同的过滤器，elasticsearch 查询 DSL 非常灵活。过滤器的类型取决于您索引数据的方式，这取决于您的数据。我将假设最简单的解决方案：一个[term filter](http://www.elasticsearch.org/guide/reference/query-dsl/term-filter/)。看看下面的例子。

```
{
    "from" : 0,
    "size" : 30,
    "query" : {
        "query_string" : {
            "query" : "*jhon*",
            "default_field" : "_all"
        }
    },
    "filter" : {
        "term" : { 
            "activated" : "true" 
        }
    },
    "sort" : [ 
        {
            "id" : {
                "order" : "desc"
            }
        }
    ]
} 
```

请注意，搜索时应用过滤器的方法有多种。在我的示例中，我应用了一个顶级过滤器，该过滤器将仅应用于搜索结果，而不应用于构面。如果您也希望将其应用于构面，您应该查看[过滤后的查询](http://www.elasticsearch.org/guide/reference/query-dsl/filtered-query/)；而不是添加过滤器，您会将当前查询包装到新的过滤查询中，该查询也可以包含相同的术语过滤器。

# matlab - Matlab中HSV类型的Matlab转换

> ID：16014933
> 
> 赞同：0
> 
> 时间：2013-04-15T12:16:31.613
> 
> 标签：matlab, types, hsv

我正在寻找使用 matlab 在电影中进行图像校正。我在谷歌上搜索了将电影分割成图像的示例，然后是另一个提高图像质量的示例。当我使用几个示例时，我遇到了一个问题，我想知道是否可以将 HSV 图像转换为 uint8 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:28:46.607

如果您的 HSV 图像是 double 类型并且范围介于 0 和 1 之间，那么您可能会很幸运，将其乘以 256 并转换为 uint8：

```
HSVuint8 = uint8(HSV.*256); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:02:55.567

[您可以使用hsv2rgb](http://www.mathworks.nl/help/matlab/ref/hsv2rgb.html)将任何 HSV 图像转换为 RGB

一旦转换你

# c# - nunit TestContext 抛出 NullReferenceException

> ID：16014936
> 
> 赞同：2
> 
> 时间：2013-04-15T12:16:45.700
> 
> 标签：c#, unit-testing, nunit, resharper

我有以下代码：

```
[TestFixture]
public class LexicalTests
{
    [Test]
    public void LexicalTest1()
    {
        TestContext.CurrentContext.TestDirectory;
    }
} 
```

`CurrentContext``TestDirectory`尝试获取或`WorkingDirectory`属性时抛出异常。

我怎么解决这个问题？

PS：在我的家用电脑上测试完美（没有奇怪的例外）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:41:07.690

似乎某些提供运行 NUnit 单元测试功能的应用程序存在 TestContext 类的问题。

下面班级的测试应该通过：

```
using NUnit.Framework;

namespace UnitTests
{
    [TestFixture]
    public class UnitTests
    {
        [Test]
        public void CurrentContextTest()
        {
            Assert.IsNotNull(TestContext.CurrentContext);
            Assert.IsNotNull(TestContext.CurrentContext.TestDirectory);
            Assert.IsNotNull(TestContext.CurrentContext.WorkDirectory);
        }
    }
} 
```

如果测试没有通过，那么正如 Dmitry 在上面的评论中所写，在 ReSharper 菜单中更改 NUnit 版本。在 Visual Studio 中，转到 ReSharper -> 选项 -> 工具 -> NUnit。单击指定的 NUnit 安装单选按钮并确保指定了包含 nunit.core.dll、nunit.core.interfaces.dll 和 nunit.util.dll 的文件夹。如果找不到列出的文件，将显示错误。

![在此处输入图像描述](https://i.stack.imgur.com/2L99b.png)

更改 NUnit 版本后，重新运行测试，它应该可以通过。

# javascript - javascript执行时菜单无序

> ID：16014943
> 
> 赞同：0
> 
> 时间：2013-04-15T12:17:11.360
> 
> 标签：javascript, asp.net

我正在使用 .NET 框架 4.0 开发 ASP.NET 应用程序

我想在服务器上的某些代码完成执行时显示 javascript 警报。

例如：

```
protected void Button1_Click(object sender, EventArgs e)
{
    NewAllocation.getSettings();
    NewAllocation.populateParentFundTable(FundNameTextBox.Text, RemarksTextBox.Text, Decimal.Parse(AmountTextBox.Text), DateTime.Parse(DateTextBox.Text), Decimal.Parse(SurplusTextBox.Text));
    ClientScript.RegisterStartupScript(GetType(),"key","alert(\"New fund allocation successful\");",true);
} 
```

我这样调用 javascript 代码是因为**javascript 警报应该只在按钮处理程序中的 c# 代码完成后执行**。

问题是，当 javascript 警报执行时，我的菜单变得混乱。

![在此处输入图像描述](https://i.stack.imgur.com/nBXja.png)

而在点击按钮之前是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/NFDJR.png)

**我的菜单是使用 ASP.NET 菜单控件在母版页中设计的。**

如何解决菜单乱序问题？

# c++ - 检查 C++ 头文件上的操作系统时出错

> ID：16014944
> 
> 赞同：0
> 
> 时间：2013-04-15T12:17:12.000
> 
> 标签：c++, gcc, header, hashmap, c-preprocessor

我收到了一些 C++ 代码，我正在尝试使用提供的 makefile 在 Linux 64 位下编译。

在该代码中有一个包含以下代码的 string_hash.h 文件：

```
#ifndef STRING_HASH
#define STRING_HASH

#include <string>
#include "universal_hash_map.h"

#ifdef WINDOWS
typedef stdext::hash_compare<std::string> String_Hasher;
typedef stdext::hash_map< std::string, std::string, stdext::hash_compare<std::string> > String_Hash;
#else
#ifdef LINUX
class String_Hasher: public stdext::hash< std::string > {
private:
    stdext::hash<const char*> hasher;
public:
    String_Hasher() {}
    size_t operator() (const std::string& p) const {
        return hasher(p.c_str());
    }
};
typedef stdext::hash_map< std::string, std::string, String_Hasher > String_Hash;
#endif
#endif

#endif 
```

Universal_hash_map.h 是：

```
#include "define_os.h"

#if defined(__MINGW32__) || defined(LINUX)
#include<ext/hash_map>
#define stdext __gnu_cxx;
#else
#if defined(_MSC_VER)
#include<hash_map>
#endif
#endif 
```

和define_os.h：

```
#if defined(WINDOWS) || defined(LINUX)
#else

#if defined(_MSC_VER) || defined(WIN32)  || defined(_WIN32) || defined(__WIN32__) \
|| defined(WIN64)     || defined(_WIN64) || defined(__WIN64__)
#define WINDOWS
#elif defined(sun)       || defined(__sun)      || defined(linux)       || defined(__linux) \
 || defined(__linux__)   || defined(__CYGWIN__) || defined(BSD)         || defined(__FreeBSD__) \
 || defined(__OPENBSD__) || defined(__MACOSX__) || defined(__APPLE__)   || defined(sgi) \
 || defined(__sgi)
#define LINUX
#endif

#endif 
```

如果我像这样编译项目，我会收到错误消息，告诉我编译找不到 stdext::hash

```
Compiling string_functions.o from /home/adria/Code/JensAdria/trunk/thirdparty/pechin/Cpp_Libraries/mylibrary/codes/string_functions.cpp.
In file included from /home/adria/Code/JensAdria/trunk/thirdparty/pechin/Cpp_Libraries/mylibrary/codes/string_functions.h:5:0,
                 from /home/adria/Code/JensAdria/trunk/thirdparty/pechin/Cpp_Libraries/mylibrary/codes/string_functions.cpp:1:
/home/adria/Code/JensAdria/trunk/thirdparty/pechin/Cpp_Libraries/mylibrary/codes/string_hash.h:12:29: error: expected class-name before ‘;’ token
/home/adria/Code/JensAdria/trunk/thirdparty/pechin/Cpp_Libraries/mylibrary/codes/string_hash.h:12:29: error: expected ‘{’ before ‘;’ token
/home/adria/Code/JensAdria/trunk/thirdparty/pechin/Cpp_Libraries/mylibrary/codes/string_hash.h:12:35: error: ‘hash’ in namespace ‘::’ does not name a type
/home/adria/Code/JensAdria/trunk/thirdparty/pechin/Cpp_Libraries/mylibrary/codes/string_hash.h:21:9: error: ‘__gnu_cxx’ does not name a type
/home/adria/Code/JensAdria/trunk/thirdparty/pechin/Cpp_Libraries/mylibrary/codes/string_hash.h:21:15: error: ‘hash_map’ in namespace ‘::’ does not name a type
make: *** [string_functions.o] Error 1 
```

但真正让我感到困惑的是，如果我将universal_hash_map.h 中的第一行注释为不包含define_os.h，则代码编译得很好！

因此将universal_hash_map.h更改为：

```
//#include "define_os.h"

#if defined(__MINGW32__) || defined(LINUX)
#include<ext/hash_map>
#define stdext __gnu_cxx;
#else
#if defined(_MSC_VER)
#include<hash_map>
#endif
#endif 
```

要不就

```
//#include "define_os.h"

//#if defined(__MINGW32__) || defined(LINUX)
#include<ext/hash_map>
#define stdext __gnu_cxx;
//#else
//#if defined(_MSC_VER)
//#include<hash_map>
//#endif
//#endif 
```

编译得很好。

但是在最后一个示例中，如果我取消注释 *#include "define_os.h"* 它不会编译：s

所以问题是，为什么试图定义操作系统会使代码无法编译？

此外，检查 gcc 预定义符号似乎没有任何问题：

```
$ gcc -E -dM - </dev/null | grep linux
#define __linux 1
#define __linux__ 1
#define __gnu_linux__ 1
#define linux 1 
```

编辑：有关命名空间的更多信息

在 /usr/include/c++/4.7/ext/hash_map （没有文件扩展名）我有：

```
#ifndef _BACKWARD_HASH_MAP
#define _BACKWARD_HASH_MAP 1

#ifndef _GLIBCXX_PERMIT_BACKWARD_HASH
#include "backward_warning.h"
#endif

#include <bits/c++config.h>
#include <backward/hashtable.h>
#include <bits/concept_check.h>

namespace __gnu_cxx _GLIBCXX_VISIBILITY(default)
{
_GLIBCXX_BEGIN_NAMESPACE_VERSION

  using std::equal_to;
  using std::allocator;
  using std::pair;
  using std::_Select1st;

  /**
   *  This is an SGI extension.
   *  @ingroup SGIextensions
   *  @doctodo
   */
  template<class _Key, class _Tp, class _HashFn = hash<_Key>,
       class _EqualKey = equal_to<_Key>, class _Alloc = allocator<_Tp> >
    class hash_map
    {
    private:
      typedef hashtable<pair<const _Key, _Tp>,_Key, _HashFn,
            _Select1st<pair<const _Key, _Tp> >,
            _EqualKey, _Alloc> _Ht;

      _Ht _M_ht;

    public:
      typedef typename _Ht::key_type key_type; 
```

我似乎无法找到我正在运行的代码的 4.7.3 版本，但[这里](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/libstdc++/api/a01192_source.html)是与我相同的 4.7.2。

编辑：在 string_functions.cpp 上运行 gcc -E 后的文件：

[有错误（包括）](https://dl.dropboxusercontent.com/u/4028328/withError.txt)

[没有错误（不包括）](https://dl.dropboxusercontent.com/u/4028328/withoutError.txt)

[差异](https://dl.dropboxusercontent.com/u/4028328/diff.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:53:05.500

问题是您使用的是非标准类型，因此不能保证它在您的代码中具有可移植性。

如果可以（因为您的标准库支持它），您应该切换到`std::unordered_map`. 它主要是非标准的标准替代品，`stdext::hash_map`它将独立于平台，无需所有功能`#ifdef`。

要对其进行测试，您可以执行以下操作：

```
#define stdext std
#define hash_map unordered_map 
```

如果可行，那么我建议您快速搜索和替换您的文件。

另一种解决方案是查找您的 hash_map 标头并找出它所在的名称空间。它似乎不在 __gnu_cxx 中。它可能在 stdext 中，可能会被预处理器替换为 __gnu_cxx。

# java - 四元数对象旋转

> ID：16014949
> 
> 赞同：3
> 
> 时间：2013-04-15T12:17:36.847
> 
> 标签：java, android, opengl-es, rotation

几天以来，我一直在尝试为 android OpenGL ES 实现四元数旋转。我想通过 input 获得功能`quaternion(x,y,z,w)`。此功能将为`GL10`对象设置旋转。GL10 对象仅`gl.glRotatef(y, 1.0f, 0.0f, 0.0f)`具有提供欧拉角设置位置的功能。我尝试了该类[https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/math/Quaternion.java](https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/math/Quaternion.java)来创建 Matrix 但它仍然不起作用。如果有人可以通过作为参数显示/编写如何设置 GL10 对象的位置，我将不胜感激`quaternion(GL10setRotation(Quaternion q)).`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:10:42.070

`glRotatef`只是当前矩阵与旋转矩阵的乘积（加上相关的边界检查）。

在 OpenGL 1 中执行此操作的一种方法（使用链接的四元数类）是：

```
Matrix rotation = new Matrix();
quaternion.toMatrix(rotation);
glMultMatrixf(rotation.getAsArray(), 0); 
```

请注意，`glRotate`并且`glTranslate`比[自己做矩阵数学](https://stackoverflow.com/questions/8613469/glmultmatrix-glloadmatrix-more-efficient-than-glrotatef-or-gltranslatef)和使用`glLoadMatrix`. 一般来说，如果性能很重要，我建议不要完全使用 OpenGL 1。

# android - 这可能吗？播放列表 + Youtube 播放器 API

> ID：16014952
> 
> 赞同：1
> 
> 时间：2013-04-15T12:17:43.260
> 
> 标签：android, youtube-api, youtube-channels

我想知道是否有可能做到这一点。在我视图的任何地方，我都想查看视频列表（来自我的 youtube 频道或只是我创建的播放列表），这样用户可以点击其中任何一个，并且使用 youtube 播放器 API 将在底部可视化以屏幕为例。

这可能吗？如果可以，会有多复杂？（我真的是 android 的初学者，而不是编程）。我已经阅读了有关 Youtube DATA APi 的信息，但它似乎与 youtube 应用程序一起使用，所以它不是我想要做的。

非常感谢。

**编辑 21/05/2014**

添加信息以防将来有人对此感兴趣（一年后，但迟到总比没有好）。我上传了一个示范应用程序，展示了如何做到这一点。它可以在以下 GitHub 存储库中找到：[https ://github.com/Rafagf/HealthTube](https://github.com/Rafagf/HealthTube)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:32:30.907

您是否看过[文档中的示例](https://developers.google.com/youtube/android/player/sample-applications)？那是最好的开始。我认为没有人能够为您提供比那里可用的更完整的代码。

# scheduling - 用于 Autosys 的 Java API , cs-7

> ID：16014956
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:17:48.963
> 
> 标签：scheduling, autosys

我是企业调度程序世界的新手。
我需要使用 java 程序在 Autosys、cs-7 等企业调度程序中安排工作。是否有任何可用于 Autosys、cs-7 的 java API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:45:37.843

是的，当前版本的 Autosys (CA Workload Automation AE) 有 Java SDK。

# c - printf NULL 不带引号或不带引号的 sql 语句

> ID：16014960
> 
> 赞同：3
> 
> 时间：2013-04-15T12:18:18.547
> 
> 标签：c, printf

我正在编写一个程序来打印出数千行（MySQL）SQL 指令，以异步时间发送到数据库服务器。每组 SQL 指令都将通过 *nix 管道重定向保存到文件中。

我面临的问题是关于字段的`NULL`值`char *`。如果有一个

```
printf ( "\"%s\" ", foo_field); 
```

和 foo_field 可能是也可能不是`NULL`。

MySQL 需要接收一个 plain `NULL`，而不是 a `"NULL"`，所以我必须在有值的时候去掉双引号`NULL`。当值不是`NULL`时，必须用双引号括起来。

对于我展示的情况，我可以放置 a`if then`以便参数为`%s`if`NULL`或`\"%s\"`if not `NULL`。

但是如果我们考虑一个有 20 个字段的 SQL 行，那么这样做就不是很好了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:57:00.307

咳咳。*咳*...

请注意`printf( "%s" )`for NULL 指针的行为是**undefined**。

`NULL`不是在任何or `null`or or `nil`or 空字符串周围是否会有引号，而是从某种意义上说，您的应用程序可能会简单地崩溃。

这就是为什么 C/C++ 的信条是*不*向标准函数添加安全网的原因。该库不仅在您的指针上执行`if`-`else`以使您免于崩溃。不，如果您想安全起见，*则必须*添加*另一个* `if`-`else`以免依赖于实现...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:42:02.403

确保 foo_field 是一个 char 数组，至少比您的字段长 2 个字符。

```
void add_quotes_unless_NULL(char* str)
{
    if (strncmp("NULL", str, 5) != 0)
    {
        char prev = str[0];
        str[0] = '\"';
        int i;
        for (i = 1; prev; ++i)
        {
            char curr = str[i];
            str[i] = prev;
            prev = curr;
        }
        str[i] = '\"';
        str[i+1] = '\n';
    }
} 
```

现在这样使用它：

```
add_quotes_unless_NULL(foo_field);
printf ( "%s ", foo_field); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T12:26:30.287

那么，您的问题是 if-then-else 多次很难看？

函数呢？

```
void print_field (const char *field) {
  if (field)
    printf ("\"%s\" ", field);
  else
    printf ("NULL ");
} 
```

然后在你的真实代码中：

```
print_field (foo_field);
print_field (bar_field);
...... 
```

如果你确保函数在同一个文件中（用 声明`static`），那么编译器可能会内联它，如果它判断它更有效的话。

# silverlight - wp7中多个收件人的UI控件

> ID：16014963
> 
> 赞同：0
> 
> 时间：2013-04-15T12:18:23.333
> 
> 标签：silverlight, windows-phone-7, xaml

我正在准备的屏幕有点像短信屏幕。我有联系人，并希望在收件人字段中显示一个和多个联系人。您能否告诉我在短信屏幕中的 WP7 中使用了哪种类型的控件。我可以参考的任何自定义控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:03:40.080

一个非常基本的（阅读：原始）实现将使用一个`ListBox`控件和一个[`WrapPanel`](http://www.geekchamp.com/articles/wp7-wrappanel-in-depth)集合作为容器来完成。将其绑定到联系人列表，并确保为每个项目实现自定义项目模板。

# batch-file - wsadmin jython 脚本退出代码到调用脚本

> ID：16014966
> 
> 赞同：1
> 
> 时间：2013-04-15T12:18:32.507
> 
> 标签：batch-file, automation, websphere, exit-code

我正在编写批处理和 bash 脚本来自动化一些 websphere 任务。

我需要将 myscipt.jy 的退出代码返回到调用脚本 jython 脚本

```
#----------myscipt.jy-----------
#I am testing exit status
import sys;
sys.exit(1) 
```

批处理脚本是

```
REM superduper.cmd
profiles\myprofile\bin\wsadmin -lang jython -f myscript.jy
echo myscript.jy exited with %ERRORLEVEL% 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:26:38.533

我正在使用以下解决方法来解决问题

首先将键/值对从 jython 写入文件

```
#----------myscipt.jy-----------
#I am testing exit status
import sys;
logFile = open(heaplog, "w")
logFile.write("HEAPSIZECHANGED=1")
logFile.close()
sys.exit(1) 
```

然后将键/值加载为 env。批量变量并使用它

```
FOR /F "tokens=*" %%i in ('type "%HEAPLOG%" ^| findstr /V /B #') DO SET %%i
IF !HEAPSIZECHANGED! EQU 1 CALL :_restartServer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-09T02:12:24.310

根据Jython V2.7[链接](https://www.ibm.com/support/knowledgecenter/en/SSEQTP_9.0.0/com.ibm.websphere.base.doc/ae/rxml_jython27.html#rxml_jython27__sec3)的变化，检测退出码的方式可以如下。

```
#----------myscipt.jy-----------
#I am testing exit status
import os
os._exit(1) 
```

批处理脚本是

```
REM superduper.cmd
profiles\myprofile\bin\wsadmin -lang jython -f myscript.jy
echo myscript.jy exited with %ERRORLEVEL% 
```

# sql - SQL 返回连续记录

> ID：16014969
> 
> 赞同：2
> 
> 时间：2013-04-15T12:18:40.837
> 
> 标签：sql, linq, lambda, sql-server-2008-r2

一个简单的表：

```
ForumPost
--------------
ID (int PK)
UserID (int FK)
Date (datetime) 
```

我希望返回特定用户连续*n*天每天至少发布 1 次帖子的次数。

例子：

```
User 15844 has posted at least 1 post a day for 30 consecutive days 10 times 
```

我已经用 linq/lambda 标记了这个问题，以及一个很好的解决方案。我知道我可以通过迭代所有用户记录来解决这个问题，但这很慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:51:19.487

您可以使用一个方便的技巧`ROW_NUMBER()`来查找连续条目，想象以下一组日期，它们的 row_number （从 0 开始）：

```
Date        RowNumber
20130401    0
20130402    1
20130403    2
20130404    3
20130406    4
20130407    5 
```

对于连续的条目，如果从值中减去 row_number，则会得到相同的结果。例如

```
Date        RowNumber   date - row_number
20130401    0           20130401
20130402    1           20130401
20130403    2           20130401
20130404    3           20130401
20130406    4           20130402
20130407    5           20130402 
```

然后，您可以分组`date - row_number`以获取连续天数的集合（即前 4 条记录和最后 2 条记录）。

要将其应用于您的示例，您将使用：

```
WITH Posts AS
(   SELECT  FirstPost = DATEADD(DAY, 1 - ROW_NUMBER() OVER(PARTITION BY UserID ORDER BY [Date]), [Date]),
            UserID,
            Date
    FROM    (   SELECT  DISTINCT UserID, [Date] = CAST(Date AS [Date])
                FROM    ForumPost
            ) fp
), Posts2 AS
(   SELECT  FirstPost, 
            UserID, 
            Days = COUNT(*), 
            LastDate = MAX(Date)
    FROM    Posts
    GROUP BY FirstPost, UserID
)
SELECT  UserID, ConsecutiveDates = MAX(Days)
FROM    Posts2
GROUP BY UserID; 
```

**[SQL Fiddle 示例（简单，每个用户最多连续几天）](http://www.sqlfiddle.com/#!3/f9db9/3)**

**[进一步的例子来展示如何获得所有连续的时期](http://www.sqlfiddle.com/#!3/f9db9/4)**

**编辑**

我认为以上内容并没有完全回答这个问题，这将给出用户发布的次数，或连续 n 天：

```
WITH Posts AS
(   SELECT  FirstPost = DATEADD(DAY, 1 - ROW_NUMBER() OVER(PARTITION BY UserID ORDER BY [Date]), [Date]),
            UserID,
            Date
    FROM    (   SELECT  DISTINCT UserID, [Date] = CAST(Date AS [Date])
                FROM    ForumPost
            ) fp
), Posts2 AS
(   SELECT  FirstPost, 
            UserID, 
            Days = COUNT(*), 
            FirstDate = MIN(Date), 
            LastDate = MAX(Date)
    FROM    Posts
    GROUP BY FirstPost, UserID
)
SELECT  UserID, [Times Over N Days] = COUNT(*)
FROM    Posts2
WHERE   Days >= 30
GROUP BY UserID; 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/d72f0/4)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:21:11.017

我认为，您的特定应用程序使这变得非常简单。如果在“n”天的间隔中有“n”个不同的日期，那么这些“n”个不同的日期*必须*是连续的。

滚动到底部以获取仅需要公用表表达式并更改为 PostgreSQL 的通用解决方案。（开玩笑。我是在 PostgreSQL 中实现的，因为我时间不够。）

```
create table ForumPost (
  ID integer primary key,
  UserID integer not null,
  post_date date not null
);

insert into forumpost values
(1, 1, '2013-01-15'),
(2, 1, '2013-01-16'),
(3, 1, '2013-01-17'),
(4, 1, '2013-01-18'),
(5, 1, '2013-01-19'),
(6, 1, '2013-01-20'),
(7, 1, '2013-01-21'),

(11, 2, '2013-01-15'),
(12, 2, '2013-01-16'),
(13, 2, '2013-01-17'),
(16, 2, '2013-01-17'),
(14, 2, '2013-01-18'),
(15, 2, '2013-01-19'),

(21, 3, '2013-01-17'),
(22, 3, '2013-01-17'),
(23, 3, '2013-01-17'),
(24, 3, '2013-01-17'),
(25, 3, '2013-01-17'),
(26, 3, '2013-01-17'),
(27, 3, '2013-01-17'); 
```

现在，让我们看看这个查询的输出。为简洁起见，我正在查看 5 天的间隔，而不是 30 天的间隔。

```
select userid, count(distinct post_date) distinct_dates
from forumpost
where post_date between '2013-01-15' and '2013-01-19'
group by userid;

USERID  DISTINCT_DATES  
1       5
2       5
3       1 
```

对于符合条件的用户，该 5 天间隔内的不同日期数必须为 5，对吗？所以我们只需要将该逻辑添加到 HAVING 子句中。

```
select userid, count(distinct post_date) distinct_dates
from forumpost
where post_date between '2013-01-15' and '2013-01-19'
group by userid
having count(distinct post_date) = 5;

USERID  DISTINCT_DATES  
1       5
2       5 
```

* * *

**更通用的解决方案**

说真的没有道理，如果你从 2013 年 1 月 1 日到 2013 年 1 月 31 日每天发帖，你已经连续 30 天发了 2 次。相反，我希望时钟在 2013 年 1 月 31 日重新开始。我很抱歉在 PostgreSQL 中实现；稍后我将尝试在 T-SQL 中实现。

```
with first_posts as (
  select userid, min(post_date) first_post_date
  from forumpost
  group by userid
), 
period_intervals as (
  select userid, first_post_date period_start, 
         (first_post_date + interval '4' day)::date period_end
  from first_posts
), user_specific_intervals as (
  select 
    userid, 
    (period_start + (n || ' days')::interval)::date as period_start, 
    (period_end + (n || ' days')::interval)::date as period_end 
  from period_intervals, generate_series(0, 30, 5) n
)
select userid, period_start, period_end, 
       (select count(distinct post_date) 
        from forumpost
        where forumpost.post_date between period_start and period_end
          and userid = forumpost.userid) distinct_dates
from user_specific_intervals
order by userid, period_start; 
```

# .net - 即使在用新版本替换应用程序后，脚本也会运行旧版本的 .NET 应用程序

> ID：16014972
> 
> 赞同：0
> 
> 时间：2013-04-15T12:18:48.443
> 
> 标签：.net, windows, vb.net, batch-file, autosys

谢谢您阅读此篇。

Environment 是在 Windows Server 上运行的 AutoSys 调度程序，该作业调用 Perl 脚本，该脚本通过 FTP 抓取一些文件并使用 VB.NET 应用程序处理它们。在客户请求更改后，我们上周推出了新版本的 VB.NET 应用程序。

新版本被推送，但是当脚本以某种方式运行时，旧代码正在执行（我们可以通过日志输出和结果文件来判断）。如果我从桌面运行脚本，它会执行新代码，但从调度程序运行时，它会运行旧代码。

这对我们来说很困难，因为该应用程序的旧版本不再可用。我们用新版本复制了它（再次，当我运行它时它可以工作）。

有什么想法吗？我感谢大家花时间阅读本文并试图帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:04:35.750

听起来 Autosys 作业环境与您从桌面运行的环境不同的经典问题。当您从命令提示符作为该服务器上作业的用户 ID 运行时，该命令是否有效？如果是从该命令提示符运行，请运行 set > user_env.txt

将现有的 autosys 作业复制到新作业，并将命令替换为 set > autosys_env.txt。然后运行作业。检查 user_env.txt 和 autosys_env.txt 是否存在任何可能导致该错误的差异。仔细查看 PATH 值。您可能需要从命令提示符和作业中运行 perl -v 和等效的 vb.net。如果安装了 where.exe，这有助于查看文件所在的位置。

# html - CSS 渲染问题？

> ID：16014974
> 
> 赞同：1
> 
> 时间：2013-04-15T12:18:50.940
> 
> 标签：html, css, border

我目前正在尝试将一些设计添加到自编程板上。不知何故，我在 CSS 渲染中遇到了奇怪的错误：

![在此处输入图像描述](https://i.stack.imgur.com/0oF7G.png)

该板的每一行都是一个 .BoardRow 类，用 CSS 格式化。所以，我正在使用：

```
.BoardRow td {
    border: 2px dotted #4E6011;
    background-image:-webkit-linear-gradient(bottom, #FFFFFF 33%, #EFEFEF 90%); /* Chrome, Safari */
} 
```

这是为了在每一行周围添加一些漂亮的边框。不知何故，第一行总是无法按预期工作。在 Google Chrome 中使用 CTRL + 鼠标放大时，顶部边框总是如图所示发生变化。我该怎么办？

编辑：这是完整生成的 HTML 代码：

```
<div id="Top">
  <div id="Navi"> <a class="Link" href="index.php?s=home">Startseite</a> <a class="Link" href="index.php?s=physicians">Ärzteliste</a> <a class="Link" href="index.php?s=pmr">Polymyalgia Rheumatica</a> <a class="Link" href="index.php?s=logout">Abmelden</a> <a class="Link" href="index.php?s=course">Krankheitsverlauf</a> <a class="Link" href="index.php?s=board">Forum</a> </div>
</div>
<div id="Main">
  <table id="Board">
    Seite (1 von 1)
    <tr>
      <td class="BoardHeadline">Thema</td>
      <td class="BoardHeadline">Beiträge</td>
      <td class="BoardHeadline">Angesehen</td>
    </tr>
    <tr class="BoardRow">
      <td class="BoardName"><a href="index.php?s=board&threadid=3">asdfasdfas</a> von (Unbekannter Benutzer)<br />
        geschrieben am 25:03:2013 um 15:43 </td>
      <td class="BoardCounter">3</td>
      <td class="BoardCounter">20</td>
    </tr>
    <tr class="BoardRow">
      <td class="BoardName"><a href="index.php?s=board&threadid=5">Titelasdgkljahskjdghkjasg</a> von (Unbekannter Benutzer)<br />
        geschrieben am 25:03:2013 um 16:14 </td>
      <td class="BoardCounter">1</td>
      <td class="BoardCounter">4</td>
    </tr>
    <tr class="BoardRow">
      <td class="BoardName"><a href="index.php?s=board&threadid=6">asdjglkajsljkdg</a> von (Unbekannter Benutzer)<br />
        geschrieben heute um 12:58 </td>
      <td class="BoardCounter">3</td>
      <td class="BoardCounter">12</td>
    </tr>
  </table>
  <br />
  <a href="index.php?s=board&action=newthread&where=2">Neues Thema eröffnen</a> </div>
<div id="UserPanel"> <a href="index.php?s=profile">Benutzerprofil</a> </div> 
```

这是CSS：

[CSS](http://pastebin.com/252C5rTn)

请注意，我不是 HTML 或 CSS 专家。;)

我正在使用 Google Chrome 19（我的 USB 记忆棒上的旧便携式版本），但这也发生在本地安装的 IE 8 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:48:37.190

问题是，两个虚线边框是冲突的，尝试使用边框：折叠

# android - 如何锁定Android应用程序使其无法关闭？

> ID：16014977
> 
> 赞同：-2
> 
> 时间：2013-04-15T12:19:06.783
> 
> 标签：android, html, native

我正在寻找一种方法（本机/HTML5/jQuery）来锁定应用程序，使其无法关闭。我很清楚这不是用户友好的。

关键是设备管理员通过密码/pin/模式锁定应用程序，以防止用户离开该应用程序。

任何想法表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:40:16.167

制作这样一个应用程序的唯一方法是制作一个需要身份验证的启动器，以允许用户使用其余的应用程序。在任何其他类型的应用程序中，用户将始终能够使用主页按钮退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:41:42.457

我假设这个问题将应用于封闭环境应用程序，这意味着它不会出现在 Google Play 上，也不会以任何方式提供给大众）。

我以前做过这种类型的应用程序，可能最直接的方法是制作一个启动器应用程序，这样主页按钮的点击就会传递给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:32:12.000

我认为您不能以这种方式锁定您的活动，因为系统控制其状态。您可以管理电源状态、屏幕，但您不能也不应该冻结您的活动并禁止打开其他应用程序。

即使您找到了解决方案，也有一个简单的案例：用户重新启动设备并且您的锁不起作用。

# android - KeyListener 上的 NullPointerException

> ID：16014980
> 
> 赞同：0
> 
> 时间：2013-04-15T12:19:18.377
> 
> 标签：android, keylistener

我正在接收`nullPointerException`启动活动，但不知道为什么。谁能告诉我？也许缺少了什么？

```
 btnLeft = (ImageButton)findViewById(R.id.btnLeft);
    btnLeft.setOnKeyListener(new OnKeyListener() {

        public boolean onKey(View v, int keyCode, KeyEvent event) {
            // TODO Auto-generated method stub
            if(event.getAction() == KeyEvent.ACTION_DOWN){
                JSONObject sendJSon = new JSONObject();
                try {
                    sendJSon.put("side", "1");
                    sendJSon.put("pushed", "1");
                    mConnection.sendTextMessage(sendJSon.toString());
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else if (event.getAction() == KeyEvent.ACTION_UP){
                JSONObject sendJSon = new JSONObject();
                try {
                    sendJSon.put("side", "1");
                    sendJSon.put("pushed", "0");
                    mConnection.sendTextMessage(sendJSon.toString());
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            return true;
        }
    }); 
```

日志猫：

```
04-15 15:02:13.113: E/AndroidRuntime(18722): FATAL EXCEPTION: main
04-15 15:02:13.113: E/AndroidRuntime(18722): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.autobahn/com.example.stas.ArcanoidActivity}: java.lang.NullPointerException
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.os.Looper.loop(Looper.java:137)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at java.lang.reflect.Method.invokeNative(Native Method)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at java.lang.reflect.Method.invoke(Method.java:511)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at dalvik.system.NativeStart.main(Native Method)
04-15 15:02:13.113: E/AndroidRuntime(18722): Caused by: java.lang.NullPointerException
04-15 15:02:13.113: E/AndroidRuntime(18722):    at com.example.stas.ArcanoidActivity.onCreate(ArcanoidActivity.java:75)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.app.Activity.performCreate(Activity.java:4465)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-15 15:02:13.113: E/AndroidRuntime(18722):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

第 75 行：

`btnLeft.setOnKeyListener(new OnKeyListener() {`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:22:39.140

问题是`btnLeft`

```
btnLeft = (ImageButton)findViewById(R.id.btnLeft); 
```

未绑定到您的布局文件。请向我们展示 layout.xml 以及整个`onCreate`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:21:52.170

需要

```
ImageButton btnLeft ;
btnLeft = (ImageButton)findViewById(R.id.btnLeft); 
```

或者

```
ImageButton btnLeft= (ImageButton)findViewById(R.id.btnLeft); 
```

并且检查`name`是正确的`setContentView(R.layout.name);`

希望有帮助

# asp.net-mvc - 从网格中选择复选框后重定向到相同位置

> ID：16014982
> 
> 赞同：0
> 
> 时间：2013-04-15T12:19:21.567
> 
> 标签：asp.net-mvc, jquery-ui, jquery, redirect

我有一张桌子，其中有一列复选框。在用户选择一个特定的复选框后，假设从第 20 行开始，并执行必要的操作，我想调用网格，但它应该指向我选择复选框的行。但目前它没有发生。除了window.location，还有什么其他方法？我希望你能得到我的问题。请帮忙。提前致谢！以下是我的代码-

```
 function UpdateStatus(status, id, cb) {
    var Status = status;
    var Id = id;
    var projectId = $("#projectId").val();
    if ($("#" + status + id).is(':checked')) {
        if (confirm("Are you sure?")) {
            var data = { Status: Status, Id: Id, projectId: projectId };
            $.ajax({
                url: '@Url.Action("EditDispatchStatus", "BOM")',
                type: 'GET',
                data: data,
                async: false,
                success: function (data) {
                     window.location = '@Url.Action("DispatchStatus","BOM")?Id=' + data.result;
                }
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:28:22.373

首先，您应该删除该`async: false`选项，因为这是一个阻塞调用，而不是 AJAX 调用，而且非常糟糕。

现在到你的实际问题。以下是获取包含行的方法：

```
function UpdateStatus(status, id, cb) {
    var Status = status;
    var Id = id;
    var projectId = $("#projectId").val();
    var $checkbox = $("#" + status + id);
    if ($checkbox.is(':checked')) {
        if (confirm("Are you sure?")) {
            var data = { Status: Status, Id: Id, projectId: projectId };
            $.ajax({
                url: '@Url.Action("EditDispatchStatus", "BOM")',
                type: 'GET',
                data: data,
                context: $checkbox.closest('tr'),
                success: function (data) {
                    // this will point to the <tr> that was clicked
                }
            });
        }
    }
} 
```

注意我们是如何传递`context: $checkbox.closest('tr')`成功回调的。所以在这个回调内部`this`将指向`<tr>`被点击的行。你可以使用它来做一些事情。

# iphone - 应用内购买沙盒测试服务器延迟

> ID：16014983
> 
> 赞同：0
> 
> 时间：2013-04-15T12:19:21.973
> 
> 标签：iphone, ios, xcode, in-app-purchase, appstore-sandbox

在测试我的应用内购买时，我在连接到沙盒环境时遇到了一些问题。问题如下：

1-在xcode的ios模拟器中..连接沙箱服务器需要很长时间。但是，一旦它完成并且我购买了附加组件，一切都会从那里顺利进行。这里的问题是连接苹果服务器并确认购买需要很长时间。所需时间约为 2 到 3 分钟。

2-我在我的iphone上上传了二进制文件来测试它，在iphone上连接服务器也需要几分钟。但问题是，在苹果要求我确认购买后，我说是的。什么都没发生。我永远无法输入我的测试用户苹果凭据并购买附加组件。

有没有人遇到过类似的问题？反正有没有测试为什么要花这么长时间？还有什么方法可以查看我在 iphone 上运行应用程序时是否收到任何错误？

谢谢你的帮助。

# greasemonkey - GM_getValue 未定义错误

> ID：16014987
> 
> 赞同：0
> 
> 时间：2013-04-15T12:19:25.363
> 
> 标签：greasemonkey

在我的greasemonkey脚本中，我想检查GM值：用户名和密码是否已设置，但是当我尝试以下代码时，它会返回错误：

```
TypeError: GM_getValue(...) is undefined    
...f (GM_getValue ("username").length == 0 + GM_getValue ("password").length == 0 ) 
```

代码：

```
if (GM_getValue ("username").length == 0 + GM_getValue ("password").length == 0 ){
var username = $('input[name=username]');
var password = $('input[name=password]');

//Username en Password in Firefox zetten met GM_setValue
$(".button").click(function(){

GM_setValue ("username", username.val() );
GM_setValue ("password", password.val() );

});
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T23:18:38.960

[`GM_getValue`不返回数组并且没有`length`属性。](http://wiki.greasespot.net/GM_getValue)如果未设置该值，则
该函数返回。`undefined`进行您正在尝试的检查的正确方法是：

```
var uName = GM_getValue ("username", "");
var pWord = GM_getValue ("password", "");

if ( ! uName   &&  ! pWord) {
    uName = $('input[name=username]').val();
    pWord = $('input[name=password]').val();
} 
```

# 但是，还有两件事需要了解/考虑：

1.  该错误消息（如果尚未编辑）表明脚本未`GM_getValue`正确激活。[您必须设置适当`@grant`的值才能使用`GM_`函数。](http://wiki.greasespot.net/@grant)例如：

    ```
    // @grant    GM_getValue
    // @grant    GM_setValue 
    ```

2.  您开始的方法：

    *   有错误——因此需要这个问题。
    *   有你会发现的可用性问题。
    *   没有便利或安全功能。

所以，不要在没有充分理由的情况下重新发明轮子。对于这类事情，已经有经过验证的、更安全、功能齐全的框架。 [**这是一个很好的。**](https://stackoverflow.com/a/15269327/331508)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:54:55.497

首先，我不确定您是否可以像这样直接检查函数返回值的长度。其次，您绝对不应该添加这样的布尔值，您需要布尔与运算符`&&`而不是`+`. 尝试这样的事情：

```
var username = GM_getValue("username");
var password = GM_getValue("password");
if ((username.length == 0) && (password.length == 0)) {
    username = $('input[name=username]').val();
    password = $('input[name=password]').val();
}
$(".button").click(function(){
    GM_setValue ("username", username);
    GM_setValue ("password", password);
}); 
```

# php - 为什么 INSERT 和 UPDATE 不起作用？

> ID：16014989
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:19:27.833
> 
> 标签：php, mysql, sql

我有这个。我正在扫描带有文件的目录（例如：count.php.2013-04-11_151028.bak）。从文件名我只需要日期和时间，我想将它们插入数据库 - 具有 2 个字段（file_date -t​​imestamp，count-int）的表（table2）。计数验证日期在该文件夹中的次数（例如：如果 5 个文件名包含某个日期，则计数为 5。如果文件中的日期在 db 中没有记录，则将插入日期并且计数为 1。）。所有插入的文件都将从源目录中删除到另一个目录，因为我不想一直扫描相同的文件。

$dir = "route1"; $files = scandir($dir);

```
foreach ($files as $file_name)
{
$data = '';
$an = substr($file_name, -21, 4);
$luna = substr($file_name, -16, 2);
$zi = substr($file_name, -13, 2);
$ora = substr($file_name, -10, 2);
$min = substr($file_name, -8, 2);
$data = $an. '-' .$luna. '-' .$zi. ' ' .$ora. ':' .$min.':'.'00';

if(strtotime($data) == FALSE )  continue;

$result = mysqli_query($con,"SELECT count(*) as total FROM table2 WHERE file_date='$data'");
$row = mysqli_fetch_array($result, MYSQLI_ASSOC);

if($row >0) {
mysqli_query($con, "UPDATE table2 SET count=count+1 WHERE file_date='$data'");
        }
else    {
mysqli_query($con,"INSERT INTO table2 (file_date, count) VALUES ('$data',1)");

$source = "route1";
$destination = "route2";

foreach ($files as $file) {
    if (in_array($file, array(".",".."))) continue;

    if (copy($source.$file, $destination.$file)) {
     $delete[] = $source.$file;
            }
            }
foreach ($delete as $file) {
        unlink($file);
            }   
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:20:12.243

`count()`是[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。你需要把它放在蜱虫中：

```
UPDATE table2 SET `count`=`count`+1 WHERE file_date='$data'
INSERT INTO table2 (file_date, `count`) VALUES ('$data',1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:43:23.777

好吧，我发现了问题，是这样的：替换行：if($row >0)

与： if($row ['total'] >0)。

问题解决了！插入和更新工作。谢谢！

# android - Android - 未调用 onLoadFinished

> ID：16014992
> 
> 赞同：10
> 
> 时间：2013-04-15T12:19:32.853
> 
> 标签：android, android-loadermanager, android-loader

我遇到了加载器的问题。

我有一个活动，它显示从本地数据库检索到的记录列表。当活动开始时，记录会通过 LoaderManager.initLoader() 方法自动加载。

也可以通过 ActionBarSherlock 中的刷新按钮手动刷新列表。但是，在完成另一个向 DB 添加记录的活动后，不会调用 onLoadFinished。

我正在使用[SimpleCursorLoader](http://www.androiddesignpatterns.com/2012/08/implementing-loaders.html)，这是活动的代码片段：

```
@Override
public void onStart() {
   ...
   getSupportLoaderManager().initLoader(0, null, this);
}

@Override
public void onPause() {
   ...
   getSupportLoaderManager().destroyLoader(0);
}

public void refreshRecords() {
   getSupportLoaderManager().restartLoader(0, null, this);
}

@Override
public Loader<Cursor> onCreateLoader(int id, final Bundle args) {
Loader<Cursor> l = new SimpleCursorLoader(this) {
    @Override
    public Cursor loadInBackground() {
        return recordDAO.getCursor();
    }
};
l.forceLoad();
return l;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor c) {
   // updateUI
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
} 
```

问题是在完成其他活动后，`onLoaderCreate`被调用，但`onLoaderFinished`未被调用。

经过一些调试，我发现它`SimpleCursorAdapter.deliverResults()`也被称为，bud 最终出现在`.. if (isReset()) { ..`

我错过了什么吗？如何强制重新加载数据？

先感谢您

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-04T18:16:28.540

由于讨论，我终于找到了解决这个问题的方法

[https://groups.google.com/forum/#!topic/android-developers/DbKL6PVyhLI](https://groups.google.com/forum/#!topic/android-developers/DbKL6PVyhLI)

```
public static <T> void initLoader(final int loaderId, final Bundle args, final LoaderCallbacks<T> callbacks,
        final LoaderManager loaderManager) {
    final Loader<T> loader = loaderManager.getLoader(loaderId);
    if (loader != null && loader.isReset()) {
        loaderManager.restartLoader(loaderId, args, callbacks);
    } else {
        loaderManager.initLoader(loaderId, args, callbacks);
    }
} 
```

此外，从支持库 28 开始，请确保不要从内部调用 initLoader `Fragment.onCreate()`。正如更新的文档所述

> 您通常在活动的`onCreate()`方法或片段的`onActivityCreated()`方法中初始化 Loader。

见[https://developer.android.com/guide/components/loaders](https://developer.android.com/guide/components/loaders)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-24T11:48:00.657

RaB 解决方案对我不起作用

**我的工作解决方案**，总是在重启前销毁加载器

```
Loader<Cursor> loader = mLoaderManager.getLoader(mKeyLoader);
if (loader != null)
{
    mLoaderManager.destroyLoader(mKeyLoader);
}
mLoaderManager.restartLoader(mKeyLoader, args, this); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-07T08:12:40.320

除了 RaB 的回答之外，如果您使用的是 custom `Loader`，请确保如果您`super`在覆盖时调用`deliverResult()`：

```
@Override
public void deliverResult(D data) {
    super.deliverResult(data); // <--onLoadFinished() will not be called if you don't call this
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-11T20:22:21.467

fwiw，在调用第一个 onLoadFinished 之前，我第二次尝试立即重新启动加载程序时遇到了类似的问题，导致两者都没有被调用。

这对我有用：

```
if( loader == null )
    loader = loaderMngr.initLoader(
        0, null, myLoaderCallbacks
        ); 
else if( loader.isAbandoned() )
    return;
else
    loaderMngr.restartLoader(
        0, null, myLoaderCallbacks
        ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-28T06:21:11.000

检查支持库。使用此导入 android.support.v4.app。不要使用 android.app.loadermanager。

```
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader; 
```

初始化部分

```
 LoaderManager mLoaderManager=getSupportLoaderManager(); 

      LoaderManager.LoaderCallbacks<Cursor> mCursorLoaderCallbacks=new LoaderManager.LoaderCallbacks<Cursor>() {
                @Override
                public Loader<Cursor> onCreateLoader(int id, Bundle cursor) {
                      return new CursorLoader(getActivity(), MediaStore.Video.Media.EXTERNAL_CONTENT_URI, COLUMNS_OF_INTEREST, null, null,
                            MediaStore.Video.Media.DATE_ADDED + " DESC");
                }
                @Override
                public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
                }

                @Override
                public void onLoaderReset(Loader<Cursor> loader) {              
               }
            };

  mLoaderManager.initLoader(URL_LOADER_EXTERNAL, null, mCursorLoaderCallbacks); 
```

# iphone - 如何在括号之间获取子字符串

> ID：16014993
> 
> 赞同：-1
> 
> 时间：2013-04-15T12:19:35.817
> 
> 标签：iphone, ios, xcode, nsstring

我有一个像 ConsumerVisit(201) 或 Date(CX1) 这样的字符串。如何在括号 "(" ")" 中获取字符串？

我用以下代码尝试了几次，但它在 substringWithRange 中崩溃了。

```
NSRange match;
    NSRange match1;
    match = [_actType.text rangeOfString: @"("];
    match1 = [_actType.text rangeOfString: @")"];
    NSLog(@"%i,%i",match.location,match1.location);
    NSString *newDes = [_actType.text substringWithRange: NSMakeRange (match.location, match1.location-1)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:22:24.453

试试下面的代码..

```
NSString *newDes = _actType.text;
NSArray *strArray = [newDes componentsSeparatedByString:@"("];
newDes = [strArray objectAtIndex:1];
strArray = [newDes componentsSeparatedByString:@")"];
newDes = [strArray objectAtIndex:0]; 
```

newDes 的值应该是**201** ..

我用你的价值像下面这样..

```
NSString *newDes = @"ConsumerVisit(201)";
NSArray *strArray = [newDes componentsSeparatedByString:@"("];
newDes = [strArray objectAtIndex:1];
strArray = [newDes componentsSeparatedByString:@")"];
newDes = [strArray objectAtIndex:0];
NSLog(@"\n\n newDes ==>> %@",newDes); 
```

并且出来是**newDes ==>> 201**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:53:39.863

如果您有足够的冒险精神，您可以使用实际上为此目的创建的*正则表达式。*不过，他们确实需要一点时间来适应。

```
NSString *text = @"ConsumerVisit(201)";
NSString *substring = nil;

NSRange parenRng = [text rangeOfString: @"(?<=\\().*?(?=\\))" options: NSRegularExpressionSearch];

if ( parenRng.location != NSNotFound ) {
     substring = [text substringWithRange:parenRng];
} 
```

模式分解如下：

1.  搜索一个括号，它`\\(`在 Cocoa 正则表达式中是“拼写”的
2.  ...但不要将它包含在最终的子字符串中 - 由`(?<=)`包含括号的构造表示。这被称为积极的后视。
3.  在括号之后，将任何字符（点）取零次或多次（星号），但在满足整个正则表达式（问号）的同时使其尽可能短
4.  确保所有内容都以括号结尾，但不要将其包含在结果中（类似于上面 1\. 中提到的左括号。这称为正向预测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T12:40:17.287

使用以下代码，

```
NSString *subString = nil;
NSString * myString = @" hello(1234)";
NSRange range1 = [myString rangeOfString:@"("];
NSRange range2 = [myString rangeOfString:@")"];

if ((range1.length == 1) && (range2.length == 1) && (range2.location > range1.location))
{
    NSRange range3;
    range3.location = range1.location+1;
    range3.length = (range2.location - range1.location)-1;

    subString = [myString substringWithRange:range3];
}
NSLog(@"%@",subString); 
```

**输出 =====> 1234**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T12:54:58.327

我想到了..

```
 NSString *originalString = @"ConsumerVisit(201)"
    NSRange start = [originalString rangeOfString:@"("];
    NSRange end = [originalString rangeOfString:@")"];
    NSString *betweenBraces;
    if (start.location != NSNotFound && end.location != NSNotFound && end.location > start.location) {
        betweenBraces = [originalString substringWithRange:NSMakeRange(start.location+1, end.location-(start.location+1))];
    }
    NSLog(@"Sub string: %@", betweenBraces); 
```

输出>子字符串：201

感谢@paras n @vinu 为您提供快速解答。

# ios - 在 nsobject 和 viewcontroller 之间传递数据的最佳方式

> ID：16014995
> 
> 赞同：1
> 
> 时间：2013-04-15T12:19:44.527
> 
> 标签：ios, objective-c, afnetworking, viewcontroller, nsobject

我有一个辅助类，它有一个函数，可以进行 api 调用并获取一些 json 数据和格式并返回一个数组。我的 TableViewController 正在尝试访问该返回的数组。是的，正如您所料，我的 tableviewcontroller`viewDidLoad`方法无法访问我的助手类返回的数组对象。

```
@interface MyHelperClass : NSObject

@property (nonatomic,retain)NSArray *myArray;

@end

@implementation MyHelperClass

@synthesize myArray;

- (NSArray *) returnArray{

 // make api calls and return array

  return myArray;

}

@end

@implementation MyTableViewController
{
- (void)viewDidLoad
{
    [super viewDidLoad];

    MyHelperClass *myhelper = [[MyHelperClass alloc]initWithPath:getSpacePath];

    allTopics = (NSArray *)[myhelper returnArray];

    NSLog(@"Load my Array%@",allTopics);
}
} 
```

我的问题是，我是否需要实现一个委托来传递数据，或者有没有其他方法可以将数据传递给我的视图控制器？

PS：我不想使用全局变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:25:54.703

这段代码有没有给你任何警告？

您正在尝试`NSArray *`从`void`返回方法返回一个。

修改为

```
- (NSArray *) returnArray{ // YOU CAN RETURN id AS WELL, AS YOU ARE TYPE CASTING THE RESULT AT CALLING TIME
    // make api calls and return array
    NSLog (@"myArray :: %@", [myArray description]); // Post the output back here
    return myArray;
} 
```

让我知道问题是否仍然存在。

## 编辑

设置断点在

```
allTopics = (NSArray *)[myhelper returnArray]; // AT - (void)viewDidLoad 
```

和

```
return myArray; // AT HelperClass method 
```

如果第一个它首先被解雇，那么您必须按照评论中建议的@A-Live 实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:40:58.700

很抱歉这么晚才发布答案。我弄清楚了问题所在。正如@A-Live 提到的，使用 AFNetworking 的 Rest API 调用正在使用异步调用，因此它不会在其执行时间内将数组返回到主线程。就我而言，

```
-(void)viewDidLoad {

NSLog(@"I get called first");

MyHelper *helper = [[MyHelper alloc]init];

// returns array. However, [helper getData] is an async call under the hood. Hence myArray is nil
myArray = [helper getData];

} 
```

为了解决这个问题，我利用了 NSNotification。

```
@implementation MyHelper{

   -(NSArray *)getData(){

    [[NSNotificationCenter defaultCenter] postNotificationName:@"some.name.notification" object:JSON];

    }
}

-(void)viewDidLoad(){

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadData:) name:@"some.name.notification" object:nil];

}

-(void)loadData:(NSNotification *)notif {

// You can access the JSON object passed by the helper in here

NSArray *myArray = [notif object];

// do whatever you want with the array.

} 
```

我希望我足够详细。我希望这可以帮助某人并避免很多头痛。