# StackOverflow 问答 12995000-12995999

# python - Python eval_cli_line()

> ID：12995006
> 
> 赞同：0
> 
> 时间：2012-10-21T04:34:19.353
> 
> 标签：python, simics

`eval_cli_line("cache_%s" % cpu.name + ".ptime")`在我的python脚本中不断给出以下错误

*`NameError: global name 'eval_cli_line' is not defined`*

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:47:33.300

在 Simics 4.x 中，eval_cli_line 已被替换为 run_command()。阅读迁移指南。

# python - Python 日志记录：使用更改保存位置记录配置文件

> ID：12995007
> 
> 赞同：1
> 
> 时间：2012-10-21T04:34:26.560
> 
> 标签：python, logging, python-2.7, config

假设我有以下配置日志文件：

```
[loggers]
keys=root,seeker,event

[handlers]
keys=consoleHandler,seekerFileHandler,eventFileHandler

[formatters]
keys=consoleFormatter,logFormatter

[logger_root]
level=DEBUG
handlers=consoleHandler,seekerFileHandler,eventFileHandler

[logger_seeker]
level=DEBUG
handlers=consoleHandler,seekerFileHandler
qualname=seeker
propagate=0

[logger_event]
level=DEBUG
handlers=consoleHandler,eventFileHandler
qualname=event
propagate=0

[handler_consoleHandler]
class=StreamHandler
level=INFO
formatter=consoleFormatter
args=(sys.stdout,)

[handler_seekerFileHandler]
class=FileHandler
level=DEBUG
formatter=logFormatter
args=('seeker.log','a')

[handler_eventFileHandler]
class=FileHandler
level=DEBUG
formatter=logFormatter
args=('event.log','a')

[formatter_consoleFormatter]
format=%(asctime)s - thread:%(thread)d - %(name)s - %(levelname)s | %(message)s
datefmt=%m/%d/%Y %X

[formatter_logFormatter]
format=%(asctime)s | %(message)s
datefmt=%m/%d/%Y %X 
```

通常我会：

```
import logging
from logging.config import fileConfig
from os import getcwd

fileConfig(''.join([getcwd(),'/logging.conf']))
event_logger = logging.getLogger("event")
seeker_logger = logging.getLogger("seeker") 
```

处理每个记录器。但是，我倾向于在两个不同的平台上运行该软件：Windows 和 Linux，因此如果它们各自将其保存在“公共”位置会更好。我正在寻找的是这样的：

```
from sys import platform
if 'win' in platform:
    #alter the save path to this location
if 'linux' in platform:
    #alter save path to this location 
```

但我不知道如何使用配置文件来实现这一点，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:45:33.893

您有 2 个选项。

1.  使用`logging-linux.conf`文件和`logging-win.conf`具有不同路径的文件并将它们加载到您的平台测试中。

2.  不要使用配置文件，而是将记录器的创建委托给您自己的模块，并在创建`FileHandler`实例时进行平台测试。

采用的解决方案取决于代码的复杂性。如果您正在构建一个库，请查看此页面：[http ://docs.python.org/howto/logging.html#configuring-logging-for-a-library](http://docs.python.org/howto/logging.html#configuring-logging-for-a-library)

# php - PHP/MYSQL 零错误代码：备注

> ID：12995010
> 
> 赞同：0
> 
> 时间：2012-10-21T04:36:00.597
> 
> 标签：php, mysql

这不是一个问题，而是一个我认为非常有用的评论。

下面的一段代码

```
$sql="UPDATE    Adherents
         SET    Prenom='$_POST[tfPrenom]',  
                Civilite='$_POST[mdCivil]',
                .....
       WHERE No_Adherent=$LeNumero"; 
```

[随后是通常的 mysqli_query() 调用]

会不断失败并且非常难以调试：在“死”条件下

> if (!$resultat) { die ('无法更新：错误代码是 ' .mysqli_connect_errno() .' 描述为 '.>mysqli_connect_error()); }

它将返回“无法更新：错误代码为 0 描述为”，即 NO ERROR CODE，NO ERROR MESSAGE。

事实上，我的错误在于行名拼写错误（当然，这里没有注意到它——缺少尾随字母）。

结论：mysqli_query() 可以在没有适当的错误代码/消息的情况下生成错误。

我希望这可以帮助一些人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T04:51:41.697

您使用了错误的功能。

如手册条目中所述[`mysqli_connect_errno()`](http://www.php.net/manual/en/mysqli.connect-errno.php)：

> 返回上次调用的最后一个错误代码号[`mysqli_connect()`](http://www.php.net/manual/en/function.mysqli-connect.php)。

你想要[`mysqli_errno()`](http://www.php.net/manual/en/mysqli.errno.php)并且[`mysqli_error()`](http://php.net/manual/en/mysqli.error.php)：

```
if (!$resultat) die (
  'Unable to update: error code is '
  . mysqli_errno($link) . ' described as ' . mysqli_error($link)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:51:17.703

使用 sprintf 而不是直接在查询字符串中使用变量。

```
$sql =sprintf("UPDATE Adherents SET Prenom= %s, Civilite=%s WHERE No_Adherent=%s",$_POST[tfPrenom], $_POST[mdCivil], $LeNumero); 
```

PHP 将用变量值替换 %s。

请尝试以下方法来检测错误：

```
<?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

    /* check connection */
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    if (!mysqli_query($link, "update ...SET a=1")) {
        printf("Errormessage: %s\n", mysqli_error($link));
    }

    /* close connection */
    mysqli_close($link);
    ?> 
```

# c# - C#中的备份和恢复

> ID：12995012
> 
> 赞同：2
> 
> 时间：2012-10-21T04:36:10.433
> 
> 标签：c#, sql, database

> **可能重复：**
> [SQL Server - 数据库“数据库”不存在。确保名称输入正确](https://stackoverflow.com/questions/3358148/sql-server-database-database-does-not-exist-make-sure-that-the-name-is-ente)

我写了这段代码，但是数据库不识别备份？请指导

```
 SqlConnection con = new SqlConnection();
            con.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Resources\dbcn.mdf;Integrated Security=True;User Instance=True";

            SqlCommand cmd = new SqlCommand();
            string MasterPath = "c://";
            try
            {
                con.Open();
                //BACKUP DATABASE نام بانک اطلاعاتی TO DISK = 'مسیر پشتیبان گیری بانک اطلاعاتی'
                string query = "BACKUP DATABASE dbcn TO DISK = '" + MasterPath + @"\BackupLibrary" + "\\dbcn.mdf" + "'";
                cmd.CommandText = query;
                cmd.Connection = con;
                cmd.ExecuteNonQuery();
                con.Close();

                MessageBox.Show("error");
            }
            catch(System.Exception EX)
            {
                System.Windows.Forms.MessageBox.Show(EX.Message);

            } 
```

错误;

```
Database 'dbcn' does not exist. Make sure that the name is entered correctly. 
```

BACKUP DATABASE 异常终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:15:28.807

它可能超出了您对这个项目的需要，但将来您可能想要研究 SQL 管理对象 (SMO)。它使您能够在托管代码（例如 c#）中执行 SQL Server 维护任务。

我相信它是 SQL Server SDK 的一部分。您需要将以下引用添加到您的项目中：

```
Microsoft.SqlServer.Smo
Microsoft.SqlServer.SmoExtended
Microsoft.SqlServer.ConnectionInfo
Microsoft.SqlServer.Management.Sdk.Sfc
Microsoft.SqlServer.SqlEnum 
```

我能够在以下位置找到这些程序集：C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies\

```
string ServerName = "server";
string DatabaseName = database;
string UserId = userId;
string Password = password;
ServerConnection serverConnection;

private Server _server;
public Server Server
{
    get
    {
        if (_server == null)
        {
            Connect();
        }
        return _server;
    }
}

string connectionString 
{
    get
    {
        return string.Format("Data Source={0};Initial Catalog={1};UID={2};Password={3}", ServerName, DatabaseName, UserId, Password);
    }
}

public void Connect()
{
    _serverConnection = new ServerConnection();
    _serverConnection.LoginSecure = false;
    _serverConnection.Login = UserId;
    _serverConnection.Password = Password;

    _server = new Server(_serverConnection);
}

public void BackupDatabase()
{
    using (SqlConnection cn = new SqlConnection(connectionString))
    {
        ServerConnection svCon = new ServerConnection(cn);
        Server svr = new Server(svCon);
        cn.Open();
        cn.ChangeDatabase("master");

        string testFolder = @"C:\temp";
        string databaseName = _databaseName;
        Backup backup = new Backup();
        backup.Action = BackupActionType.Database;
        backup.Database = databaseName;
        backup.Incremental = false;
        backup.Initialize = true;
        backup.LogTruncation = BackupTruncateLogType.Truncate;

        string fileName = string.Format("{0}\\{1}.bak", testFolder, databaseName);
        BackupDeviceItem backupItemDevice = new BackupDeviceItem(fileName, DeviceType.File);
        backup.Devices.Add(backupItemDevice);
        backup.PercentCompleteNotification = 10;
        //backup.PercentComplete += backup_PercentComplete;
        //backup.Complete += backup_Complete;

        backup.SqlBackup(svr);
        if (!VerifyBackup(svr))
        {
            //throw new Exception("Backup could not be verified.");
        }
        svr = null;
        cn.Close();
    }
}

public bool VerifyBackup(Server svr)
{
    string testFolder = @"C:\temp";
    string databaseName = _databaseName;
    Restore restore = new Restore();
    restore.Action = RestoreActionType.Database;
    string fileName = string.Format("{0}\\{1}.bak", testFolder, databaseName);
    BackupDeviceItem backupItemDevice = new BackupDeviceItem(fileName, DeviceType.File);
    restore.Devices.AddDevice(fileName, DeviceType.File);
    restore.Database = databaseName;
    restore.PercentCompleteNotification = 10;
    //restore.PercentComplete += new PercentCompleteEventHandler(ProgressEventHandler);

    bool verified = restore.SqlVerify(svr);
    return verified;
}

public void RestoreDatabase()
{
    using (SqlConnection cn = new SqlConnection(connectionString))
    {
        ServerConnection svCon = new ServerConnection(cn);
        Server svr = new Server(svCon);
        cn.Open();
        cn.ChangeDatabase("master");

        string testFolder = @"C:\temp";
        string databaseName = _databaseName;
        Restore restore = new Restore();
        restore.Action = RestoreActionType.Database;
        string fileName = string.Format("{0}\\{1}.bak", testFolder, databaseName);
        BackupDeviceItem backupItemDevice = new BackupDeviceItem(fileName, DeviceType.File);
        restore.Devices.AddDevice(fileName, DeviceType.File);
        restore.Database = databaseName;
        restore.ReplaceDatabase = true;
        restore.PercentCompleteNotification = 10;
        //restore.PercentComplete += new PercentCompleteEventHandler(ProgressEventHandler);
        svr.KillAllProcesses(databaseName);

        restore.SqlRestore(svr);
        svr = null;
        cn.Close();
    }
} 
```

# algorithm - 多个语句的大 O 表示法

> ID：12995015
> 
> 赞同：0
> 
> 时间：2012-10-21T04:36:29.270
> 
> 标签：algorithm, big-o

假设有多个具有某些大 o 符号的函数，任何 O(N)、O(N^2) 等。如果你有一个代码片段，例如。

```
 f1(x);
 f2(x);
 f3(x); 
```

所有的大 O 符号是加在一起还是相乘？关于为什么任何一个都是正确的 - 加法或乘法的任何解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:43:22.343

两者都不。你会取最大值。

调用更大的代码`g`...如果例如 O( `f2`) >= O( `f1`) 且 O( `f2`) >= O( `f3`)，则复杂度`g`为 <= 3 * O( `f2`) = O( `f2`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:43:00.257

假设它们不修改`x`，则将 O 符号相加，因为完成这三个符号所花费的时间是单独完成每个符号所花费的时间之和。

# git - IDEA：如何从 git 导入模块？

> ID：12995020
> 
> 赞同：16
> 
> 时间：2012-10-21T04:37:29.367
> 
> 标签：git, intellij-idea

使用`IntelliJ`idea，是否可以从 导入一个新模块`GIT`，类似于插件是如何做到`Eclipse`的`eGit`？

请提供截图。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-21T12:53:42.017

它分两步完成：

1.  `VCS`| `Checkout from Version Control`，选择**Git**或**GitHub**。
2.  `File`| `Add Module`,如果克隆的存储库中已有文件，**则从现有源创建模块**或**导入现有模块。**`.iml`

# objective-c - 我可以在旧版本的 iOS 上使用 ARC 吗？

> ID：12995022
> 
> 赞同：0
> 
> 时间：2012-10-21T04:37:45.500
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [带有 ARC 的 Xcode 4.2：我的代码甚至可以在固件早于 5.0 的 iOS 设备上运行吗？](https://stackoverflow.com/questions/7768861/xcode-4-2-with-arc-will-my-code-run-even-on-ios-devices-with-firmware-older-tha)

我对 ARC 概念和引用计数技术感到困惑。我在 ios4 中创建了一个应用程序。在 ios4 中没有 ARC 概念，因此程序员在使用引用计数释放对象时必须注意内存。如果程序员在创建对象时忘记释放对象ios4 中的应用程序 如果在 ios5 中运行相同的应用程序，未发布的对象会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T04:40:55.590

ARC 是一个编译时选项，它不依赖于特定的 iOS 版本。如果您有一个使用 iOS 4 SDK 构建的非 ARC 应用程序，并且您在 iOS 5 或 iOS 6 下运行它，它仍然运行相同。如果您在 iOS 4 下出现内存泄漏，那么在任何其他版本的 iOS 下都会有同样的泄漏。

要利用 ARC，您必须将您的应用程序转换为使用 ARC 并在启用 ARC 的情况下编译项目。

# php - 重用数组而不是创建新数组有什么优势吗？

> ID：12995025
> 
> 赞同：1
> 
> 时间：2012-10-21T04:38:38.320
> 
> 标签：php, arrays, performance

尝试在 $_SESSION 数组中保存“通用”数组以应用例如 PHP 排序函数而不是从服务器调用新结果集是一种好习惯吗？如果我想根据喜欢而不是时间戳对评论进行排序，例如调用一个新的结果集似乎有点矫枉过正。也许这个“问题”还有另一个最佳实践？这样工作能提高多少效率？非常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:01:16.837

这可能是一个非常好的选择，也可能是一个灾难性的选择。

你有明显的优势，或者看起来是这样，但是根据用户数量，这些结果的变化频率，数组的大小等，缺点是巨大的。

如果您计划在脚本的生命周期内将其保留为全局变量，那还不错。

如果您的用户很少，那可能没问题，但请考虑大小。

如果结果会经常变化，那么您需要做双重工作，因为您必须不断检查会话中的值是否仍然新鲜且可以使用。

如果没有关于用户、使用频率等的完整数据集，我会说您不应该使用该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:08:44.910

PHP 有一个非常高效的数组系统。此外，每个请求都会重新加载整个 php 库和您的所有代码，因此您尝试重用一个数组至多是无关紧要的，更糟糕​​的是，您的代码会无缘无故地显着复杂化。

只需编写代码，根据需要创建新数组，如果遇到性能问题，请在遇到性能问题时解决。

现代计算机速度非常快。

# c++ - 重载运算符 C++：为什么分母要乘以 10

> ID：12995027
> 
> 赞同：0
> 
> 时间：2012-10-21T04:38:57.213
> 
> 标签：c++, class, operator-overloading, fractions

我正在做一个分数分配，我提示用户输入两个分数，然后我加、减、乘和除这两个分数。我知道我仍然需要减少分数，但是我不知道为什么分母要乘以 10。如果我为 frac1 输入 1 1/2，为 frac2 输入 2 2/5，则分母是 100 而不是 10 . 太奇怪了.. 任何指导表示赞赏！:)

```
// fraction9.cpp : main project file.
#include "stdafx.h"
#include<conio.h>
#include<iostream>
 #include<string>
using namespace std;

class Fraction
{
private:
   int whole;
   int numerator;       // may be any integer
   int denominator;     // should always be positive
public:
 Fraction();    // Set numerator = 0, denominator = 1.
 Fraction(int w, int n, int d=1);   // constructor with parameters
            //  acts as conversion constructor

 // operator overload as member
 Fraction operator+ (const Fraction& f) const; 
 Fraction operator- (const Fraction& f) const;
 Fraction operator* (const Fraction& f) const;
 Fraction operator/ (const Fraction& f) const;     

 // standard input/output routines
 void Input();      // input a fraction from keyboard.
 void Show() const;     // Display a fraction on screen

 // accessors
 int GetWhole() const;
 int GetNumerator() const;
 int GetDenominator() const;

 // mutator
   bool SetValue(int w, int n, int d=1); // set the fraction's value through parameters
   //double Evaluate() const;   // Return the decimal value of a fraction

};

Fraction Fraction::operator+(const Fraction& f) const
// operator overload for + written as member function
{
   Fraction r;      // result
   r.numerator = (denominator * whole + numerator) * f.denominator + (f.denominator *     f.whole + f.numerator) * denominator;
   r.denominator = (denominator * f.denominator);
   return r;
}

Fraction Fraction::operator-(const Fraction& f) const
// operator overload for - written as member function
{
   Fraction r;      // result
   r.numerator = (denominator * whole + numerator) * f.denominator - (f.denominator *     f.whole + f.numerator) * denominator;
   r.denominator = (denominator * f.denominator);
   return r;
}

// operator overload for * written as member function
Fraction Fraction::operator*(const Fraction& f) const
{
   Fraction r;      // result
   r.numerator = ((denominator * whole + numerator) * (f.denominator * f.whole +     f.numerator));
   r.denominator = (denominator * f.denominator);
   return r;
}

// operator overload for / written as member function
Fraction Fraction::operator/(const Fraction& f) const
{
   Fraction r;      // result
   r.numerator = ((denominator * whole + numerator) * f.denominator);
   r.denominator = (denominator * (f.denominator * f.whole + f.numerator));
   return r;
}

Fraction::Fraction()
// Default constructor.  Initializes fraction to 0/1
{
   whole = 0;
   numerator = 0; 
   denominator = 1;
}

Fraction::Fraction(int w, int n, int d)
// initializes fraction to n/d (defaults to 0/1 if invalid data)
{
   if (SetValue(w, n, d) == false)
  SetValue(0, 0, 1);
}

void Fraction::Input()
{
    cout << "Enter whole number ";
  cin >> whole;
  cout << "Enter numerator " ;  
  cin >> numerator; 
  cout << "Enter denominator ";
  cin >> denominator;
      if (denominator <= 0)
  cout << "*** Denominator must be positive.  Try again: ";
  while (denominator <= 0)
    {
        cout << "Please re-enter the denominator of the fraction, it cannot be 0" <<     endl;
        cin >> denominator;
    };
}

void Fraction::Show() const
// Display a fraction
{
   cout << whole << " " << numerator << '/' << denominator;
}

int Fraction::GetWhole() const
{
    return whole;
}

int Fraction::GetNumerator() const
{
   return numerator;
}

int Fraction::GetDenominator() const
{
   return denominator;
}

bool Fraction::SetValue(int w, int n, int d)
// sets fraction to n/d and returns true for success (good data)
// returns false and leaves fraction alone if bad data
{
   if (d <= 0)
    return false;

   numerator = n;
   denominator = d;
   return true;
}

// Driver routine to test the Fraction class 

int main()
{

Fraction f1, f2;
cout << "Enter first fraction: ";
f1.Input();
cout << "\n You entered ";
f1.Show();
cout << "\n Enter second fraction: ";
f2.Input();
cout << "You entered ";
f2.Show();
cout << "\n The sum of the first and second fraction is ";
Fraction Aresult;
Aresult = f1 + f2;
Fraction Sresult;
Sresult = f1 - f2;
Fraction Mresult;
Mresult = f1 * f2;
Fraction Dresult;
Dresult = f1 / f2;
Aresult.Show();
Sresult.Show();
Mresult.Show();
Dresult.Show();
cout << '\n';
_getch();
return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T05:55:52.227

这些额外的零不会附加到分母上。它们是你要串在一起的混合分数的全部部分。

结果实际上是

```
0 39/10
0 -9/10
0 36/10
0 15/24 
```

但是您将它们打印在一行上：

```
0 39/100 -9/100 36/100 15/24 
```

# android - 如何使用 adb pull 命令？

> ID：12995030
> 
> 赞同：21
> 
> 时间：2012-10-21T04:40:15.313
> 
> 标签：android, command-line, android-emulator, android-ndk

> **可能重复：**
> [如何使用 adb pull 从 Android 复制选定的文件](https://stackoverflow.com/questions/8650407/how-to-copy-selected-files-from-android-with-adb-pull)

我正在使用这样的 adb pull 命令：

```
adb pull /sdcard/*.trace C:/ 
```

但我告诉我远程对象'/sdcard/*.trace'没有退出我检查跟踪文件是否在sdcard中。现在如何从sdcard中提取这些文件。你能帮我解决一下吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T04:57:06.617

我不认为 adb pull 处理多个文件的通配符。我遇到了同样的问题，并通过将文件移动到文件夹然后拉文件夹来做到这一点。

我发现一个链接做同样的事情。尝试按照以下步骤操作。

[如何使用 adb pull 从 Android 复制选定的文件](https://stackoverflow.com/questions/8650407/how-to-copy-selected-files-from-android-with-adb-pull)

# ruby-on-rails - 控制器和视图之间的复选框标签绑定

> ID：12995035
> 
> 赞同：0
> 
> 时间：2012-10-21T04:41:28.110
> 
> 标签：ruby-on-rails

我是 RoR 的新手。我面临的问题是我有几个复选框，最初当我第一次运行我的应用程序时，我希望它们都被选中，而下次我希望它检查最后一个复选框。为此，在我的控制器中，我有

```
 @all_ratings = Movie.all_ratings
 @selected_ratings = []
 if !params[:ratings].nil? 
   params[:ratings].each_key do |key|
     @selected_ratings << key
   end
 elsif
   @selected_ratings = @all_ratings
 end 
```

虽然我的模型看起来像

```
class Movie < ActiveRecord::Base
  def self.all_ratings
    @all_rating = ['G', 'PG', 'PG-13', 'R']
  end
end 
```

表格看起来像这样

```
Include: 
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", 1, rating==@selected_ratings.each{|s_rating|}
  = submit_tag 'Refresh', :id => "ratings_submit" 
```

现在我想在控制器中做的是，我想看看参数是否为空，如果是，那么我想检查所有的值，所以我创建了一个实例变量@selected_ratinngs 并将所有评级值传递给。如果我从复选框中选择了一些值，那么我将这些值保存在 selected_ratings 中。

在视图中，我计划使用 selected_rating 并且在 check_box_tag 中希望将 selected_rating 与 rating 进行比较，以查看它是否已经存在，否则选中的参数为 true。

在进行了如此冗长的描述之后，我想补充一点，这不会按计划进行任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:01:57.693

包括？而是为我工作

```
= check_box_tag "ratings[#{rating}]", 1, (@selected_ratings.include? rating) 
```

# java - 在单词列表中查找拼写错误

> ID：12995038
> 
> 赞同：5
> 
> 时间：2012-10-21T04:42:39.990
> 
> 标签：java, algorithm

给定一个长度为`l`的正确单词列表和一个长度`l`为 的不正确单词列表，通过交换两个连续字母，找到与正确单词列表不同的错误单词列表中的单词。这些词被认为是错别字。例如，`hte`被认为是拼写错误的`the`while`het`不被视为拼写错误。

什么是最省时的算法，可以让我们找到这个定义被认为是拼写错误的单词列表？

我被告知该列表可以在线性时间内计算，但我无法在线性时间内找到解决方案。我能想到的唯一方法是将一个列表中的所有字母与另一个列表进行比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T05:23:54.570

```
L - list of correct words of size n.
L'- list of incorrect words of size m.
H - hash table
R - result set

1\. for each word w in L :
   1.1  for each typo t of w : //there are l-1 typos
     1.1.1 insert t into H
2\. for each word w' in L' :
   2.1 if w' in H insert w' in R
3\. return R 
```

时间复杂度： `O(n*l)+O(m) = O(max(n*l,m))`

空间复杂度： `O(n*l)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:22:21.623

假设每个“拼写错误”的单词中只能有一个交换：

从一个空的 HashTable H 开始。

对于 INCORRECT 单词列表中的每个单词 K：

*   通过交换每对连续字符来生成 (l-1) 个新单词：K_1, K_2, ..., K_x, ..., K_(l-1)
    *   对于这些新词中的每一个，将其添加到 HashTable H 中，键为 K_x，值为 K（原始错误词）

现在对于正确单词列表中的每个单词 C，：

*   对于每个 C，检查 HashTable H 中是否存在键 C。
*   如果 HashTable H 中存在键 C，则输出与 C 关联的值 C'：由于这些值都来自 INCORRECT 单词列表，因此我们必须找到一个不正确的单词，通过交换两个连续的字母，将其变成正确的单词单词。
*   输出每个这样的 C'

由于 l 是一个固定数字（它必须是，否则你可以同时将 l 和 n 增长到无穷大，否则没有线性时间算法），你有以下运行时复杂性：

*   遍历不正确的单词列表需要线性时间
*   为不正确单词列表中的每个单词生成新单词需要恒定的时间 l
*   将每个（新词，K）添加到哈希表 H 需要恒定的时间
*   遍历正确的单词列表需要线性时间
*   根据 HashTable H 检查正确单词列表中的每个单词需要恒定的时间

因此这是 O(n) 运行时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T05:43:49.743

```
findTypos(List CORRECT_LIST,
List INCORRECT_LIST,
List TYPOS_OUTPUT_LIST) {
 boolean INCORRECT_LIST_EMPTY = false  

 for each element in CORRECT_LIST {  
    TYPOS = computeTypos(element)  
    for each typo in TYPOS  
        if(INCORRECT_LIST.contains(typo)) {  
            INCORRECT_LIST.remove(typo)  
            TYPOS_OUTPUT_LIST.add(typo)  
        }  
        if(INCORRECT_LIST.size() == 0) {  
            INCORRECT_LIST_EMPTY = true;  
            break;  
        }  
    }  
    if(INCORRECT_LIST_EMPTY) {  
        break;  
    }  
 }
 return TYPOS_OUTPUT_LIST;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T05:47:43.357

这是单一交换案例的解决方案。我假设每个单词只有一个交换。因此，对于 word `algorithm`，`algo[ir]thm`是一个有效的错字；而`[la]go[ir]thm`无效。

让我们调用正确的单词列表`A`和另一个列表`B`。

1.  从 list 中创建一个包含不正确单词的哈希表。像这样的哈希函数`H[B]``B`

    ```
    Σ(a i *10 i ); 其中 0 <= i < a.length，a i = 索引 i 处字符的 int 值
    ```

    这是`O(l)`.

2.迭代`A`。

```
（假设 base 1 索引）

错字= []
对于 i = 1 到 A.length
  对于 j = A[i].length 到 2
    临时 = 交换（A[i]，j，j-1）
    哈希 = getHash(temp)
    如果（ HB .has（哈希））
      错字。添加（临时）
返回错字

```

你看到两个循环了吗？他们执行多少次？让我们做数学

```
a 1 .length + a 2 .length + .. + al .length - l
（减号是因为我们实际上在每个单词中都少了一个）
= length_of_all_characters_the_list_A - l

```

但是我如何获得订单？嗯，大 O 是上边界，所以

```
O(l*max(A[i].length)
=> O(l*m)

```

# javascript - jquery 小部件中的对象仅表现为一个实例

> ID：12995039
> 
> 赞同：0
> 
> 时间：2012-10-21T04:42:48.227
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-widget-factory

我一直在使用小部件工厂开发一个 jQuery 小部件。

一切都很好，除了我注意到如果我在同一页面上的多个 DOM 元素上实例化小部件，则小部件中的任何对象都将在 DOM 元素之间共享，但选项对象除外。

我认为所有对象和函数在小部件中都有自己的实例。我显然遗漏了一些东西，并希望得到一些指导。

例如：

```
(function($) {
  $.widget("a07.BearCal", {
    options: { className : "test" },
    _glbl: { something: "" },
    _create: function() {
      this._glbl.something = this.element.attr('class');
      this.options.className = this.element.attr('class');
    },
  });
})(jQuery);

// Instantiate widget on .full
$('.full').BearCal();

//Should output full
console.log($('.full').data('BearCal')._glbl.something);

//Should output full
console.log($('.full').data('BearCal').options.className);

// Instantiate widget on .mini
$('.mini').BearCal();

//Should output mini
console.log($('.mini').data('BearCal')._glbl.something);

//Should output mini
console.log($('.mini').data('BearCal').options.className);

//Should output full but outputs mini
console.log($('.full').data('BearCal')._glbl.something);

//Should output full
console.log($('.full').data('BearCal').options.className);​ 
```

工作示例：http: [//jsfiddle.net/NrKVP/4/](http://jsfiddle.net/NrKVP/4/)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:06:12.937

小部件的属性：

```
$.widget("a07.BearCal", {
  // The stuff in here...
}); 
```

附加到您的小部件的原型。小部件工厂知道`options`并且知道它需要为每个小部件复制它们：您`options`的行为与您预期的一样，因为小部件工厂安排了这种行为。小部件工厂对此一无所知`_glbl`，因此它留在原型上，因此被小部件的所有实例共享。

`_glbl`如果您想要每个小部件的副本，您可以复制自己：

```
 this._glbl = { something: this.element.attr('class') }; 
```

这将为您`_glbl`在每个小部件上提供不同的对象。

演示：http: [//jsfiddle.net/ambiguous/UX5Zg/](http://jsfiddle.net/ambiguous/UX5Zg/)

如果你`_glbl`的更复杂，那么你可以使用[`$.extend`](http://api.jquery.com/jQuery.extend/)复制它并合并`something`：

```
this._glbl = $.extend(
  { },
  this._glbl,
  { something: this.element.attr('class') }
); 
```

如果您需要深层副本，您将希望将其`true`用作第一个参数。`$.extend`需要空对象 ，`{ }`因为`$.extend`会将所有内容合并到其第一个对象参数中，并且您需要一个新副本。

演示：http: [//jsfiddle.net/ambiguous/pyUmz/1/](http://jsfiddle.net/ambiguous/pyUmz/1/)

# php - 删除 php 会话超时

> ID：12995043
> 
> 赞同：1
> 
> 时间：2012-10-21T04:43:05.853
> 
> 标签：php, apache, .htaccess, session

我正在寻找删除我网站上 php 会话的超时。的结果：

```
var_dump(ini_get('session.save_path')); var_dump(ini_get('session.gc_maxlifetime')); var_dump(ini_get('session.cookie_lifetime')); 
```

是*字符串（13）“/var/lib/php5”字符串（4）“1440”字符串（1）“0”*

根据我看到的论坛，将 session.cookie_lifetime 设置为 0 超时应该已经是无限的，不是吗？

所以两个问题：我需要设置哪些值来删除会话超时？而且...我知道我需要将代码放入 .htaccess 但是 .htaccess 需要在哪里才能对 php 会话生效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:18:01.173

我不太确定 PHP 会话垃圾收集是如何工作的，但我不确定您是否可以完全消除它。如果您想保留会话，请在页面上放置一些 JS，该页面会定期发出请求以保持会话新鲜。如果您担心让人们登录的时间更长（可能在浏览器关闭后），您可以使用[自己的 cookie](https://stackoverflow.com/questions/7591728/designing-a-secure-auto-login-cookie-system-in-php/7591897#7591897)。

# haskell - 修复 OCaml 中的数据类型

> ID：12995044
> 
> 赞同：4
> 
> 时间：2012-10-21T04:43:08.070
> 
> 标签：haskell, recursion, ocaml, sml, fixpoint-combinators

Haskell 中的以下数据类型如何用 OCaml 或 SML 表示？

```
newtype Fix f = In (f (Fix f)) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-21T08:28:15.647

我已经[在邮件列表上回答了这个问题](https://sympa.inria.fr/sympa/arc/caml-list/2012-10/msg00109.html)（我必须说我有点不高兴你在两个不同的地方问这个问题而没有几天的延迟，因为它可能会引起重复工作），但是让我们在这里复制它。

这里有一个困难，因为 OCaml 不支持更高级别的类型变量。在这个声明中，`f`不是一个“类型”，而是一个“类型操作符”（kind `* -> *`）。要在 OCaml 中做同样的事情，您可以使用函子（不是 Haskell 函子；在 OCaml 中，“函子”一词表示可能依赖于其他模块/函子的高阶模块）；函子是更高种类的。

```
module type ParamType = sig
  type ('a, 'b) t
end

module Fix (M : ParamType) = struct
  type 'b fix = In of ('b fix, 'b) M.t
end

module List = struct
  module Param = struct
    type ('a, 'b) t = Nil | Cons of 'b * 'a
  end
  include Fix(Param)
end

open List.Param
open List

let rec to_usual_list =
  function
  | In Nil -> []
  | In (Cons (x, xs)) -> x :: to_usual_list xs 
```

好消息是 OCaml 还支持等递归而不是等递归类型，这允许您在每个递归层删除“In”包装器。为此，您必须使用“-rectypes”选项编译现有模块（以及所有通过接口也看到此等递归的模块）。然后你可以写：

```
module type ParamType = sig
  type ('a, 'b) t
end

module EqFix (M : ParamType) = struct
  type 'b fix = ('b fix, 'b) M.t
end

module EqList = struct
  module Param = struct
    type ('a, 'b) t = Nil | Cons of 'b * 'a
  end
  include EqFix(Param)
end

open EqList.Param

let rec to_usual_list =
  function
  | Nil -> []
  | (Cons (x, xs)) -> x :: to_usual_list xs 
```

模块的语法非常繁重，看起来很吓人。如果您坚持，您可以使用一流的模块将其中一些用途从函子转移到简单的函数。我选择先从“简单”的方式开始。

高级变量嫉妒可能是 OCaml 类型的崇拜者（或出于某些（好！）原因来到功能县的这些地区徘徊的 Haskellers）最严重的疾病。在实践中，我们不使用它并没有太多问题，但是由于这个仿函数步骤，大量使用 monad 转换器确实会变得复杂，这也是它在这里不是很流行的风格的原因之一。您还可以通过考虑支持它们的语言中高级变量的缺陷来分散自己的注意力；对构造函数多态性而不是任意类型级函数的限制使它们的表现力不如您想要的那样。那天我们解决了绝对完美的高阶类型抽象的细节，也许 OCaml 会跳到它上面？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T05:24:13.743

我不认为 OCaml 允许您抽象类型构造函数。`-rectypes`我认为，对于 Fix 的特定应用程序，您可以使用 获得类似的效果。

```
$ ghci
GHCi, version 7.4.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> newtype Fix f = In (f (Fix f))
Prelude> type L = Fix []
Prelude> let w = In [] :: L
Prelude> let x = In [x] :: L

$ ocaml -rectypes
        OCaml version 4.00.0

# type l = l list;;
type l = l list
# ([] : l);;
- : l = []
# let rec x = [x];;
val x : 'a list as 'a = [[[...]]]
# (x : l);;
- : l = [[[...]]] 
```

我不是模块类型专家。可能有一种方法可以使用模块来比这更接近。使用模块系统似乎一切皆有可能。

# java - 如何连续获取对 java 应用程序的 http 响应？

> ID：12995046
> 
> 赞同：0
> 
> 时间：2012-10-21T04:43:13.530
> 
> 标签：java, php, netbeans-7, httpresponse, scheduler

我有下面显示的编码，我已经计划从 php Web 服务器页面获取 http 响应。

```
public static void stopPHPDataChecker() {      
        canStop=true;
}

public static void main (String args[]) {
    // http request to the php page and get the response
    PHPDataChecker pdc = new PHPDataChecker();
    ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
    final ScheduledFuture<?> pdcHandle = scheduler.scheduleAtFixedRate(pdc, 0L, 10L, TimeUnit.MILLISECONDS);// Start schedule
    scheduler.schedule(new Runnable() {

        public void run() {
            System.out.println(">> TRY TO STOP!!!");
            pdcHandle.cancel(true);
            Sheduler.stopPHPDataChecker();
            System.out.println("DONE");
        }

    }, 1L, TimeUnit.MILLISECONDS);

   do {
        if (canStop) {
            scheduler.shutdown();

        }
    } while (!canStop);

    System.out.println("END");
} 
```

此编码仅返回一个响应，但我希望它连续获得响应，以便我可以根据返回的值执行不同的任务。我该怎么做？先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:11:19.617

**-**我的简单建议是使用 Thread，它会在一定的时间间隔后向 web 服务发送请求，并接收响应。

```
 Thread t = new Thread(new Runnable(){

          public void run(){

   while(isDone){  

             //isDone is the boolean variable which will help u end the Thread.

            // SEND THE REQUEST 

try{

  Thread.sleep(5000);   // Delay of 5 seconds before the request is fired again

   }catch(Exception ex){

           ex.printStackTrace();

        }
    }
   }

    });

 t.start();

 t.join();   // Use join() to block the process further till the response arrives. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:57:17.693

要获得答案，您必须发布请求...

每一次 ！

将请求帖子放入您的定期循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T04:53:55.977

```
Sheduler.stopPHPDataChecker(); 
```

在 run 方法中使 canStop= true ，并且

```
if (canStop) {
    scheduler.shutdown();

} 
```

使调度程序关闭。从 run 方法中删除 stopPHP.. 方法将解决此问题。您可能已重新考虑代码。看起来令人困惑。

# bash - 将文件拆分为 x 个文件，其中文件名被编号

> ID：12995050
> 
> 赞同：-1
> 
> 时间：2012-10-21T04:43:36.337
> 
> 标签：bash, split

在 bash 脚本中，如何将大型文本/csv 文件拆分为 n 个文件（每行 m 行）；生成的文件名需要从 1 开始编号并以 1 [0,1...999...] 递增。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T04:55:15.930

该[`csplit`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/csplit.html)命令几乎是为这项工作制定的：

```
csplit -f output-csv. -n 4 -k input.csv 100 {2000} 
```

这将拆分`input.csv`为文件中前 200,000 行的 100 行文件。输出文件将开始`output-csv.`，后跟 4 位数字。意思是“`-k`不要在收到信号时清理”。根据输入文件的大小以及您的突发奇想和愿望调整数字。

请注意第一个文件的古怪行为，记录在链接到的 POSIX 手册页中。

# kinect - 如何在 Kinect Toolbox 中检测回放的结束

> ID：12995051
> 
> 赞同：1
> 
> 时间：2012-10-21T04:43:39.087
> 
> 标签：kinect, replay, kinect.toolbox

我在我的项目中使用 Kinect.Toolbox，我需要在回放结束后显示一条消息。有没有办法得到这一刻？

实际上我的代码执行以下操作

```
Stream recordStream = File.OpenRead(@"D:\recorded.FisioKinect");
this.Replay = new KinectReplay(recordStream);
this.Replay.ColorImageFrameReady += replay_ColorImageFrameReady;
this.Replay.Start(); 
```

replay_ColorImageFrameReady 在这里

```
void replay_ColorImageFrameReady(object sender, ReplayColorImageFrameReadyEventArgs e)
{
    if (this.Replay.IsFinished)
    {
        MessageBox.Show("End");
    }
    byte[] pixelData = new byte[e.ColorImageFrame.PixelDataLength];
    e.ColorImageFrame.CopyPixelDataTo(pixelData);
    // Other awesome stuff :)
} 
```

请注意，Replay 对象有一个名为 IsFinished 的属性，但如果 R​​eplay IsFinished，则不会引发 replay_ColorImageFrameReady，因此永远不会显示消息。

Kinect.Toolbox 的代码使用 TPL，我对 TPL 不太了解，我想更改 Kinect.Toolbox 的代码以触发像 OnReplayEnd 这样的事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T21:53:14.030

You can build a structure like this:

In your KinectReplay.cs

add

```
public event EventHandler Closing;

protected virtual void OnClosing()
{
    EventHandler Closing = this.Closing;
    if (Closing != null)
        Closing(this, EventArgs.Empty);
} 
```

and trigger it wherever you want to use it.

```
replay.Closing += new EventHandler(replayMediaEnded); 
```

# java - Netbeans中的自定义javadoc标签？

> ID：12995056
> 
> 赞同：2
> 
> 时间：2012-10-21T04:44:52.953
> 
> 标签：java, netbeans, javadoc

我正在尝试在 Netbeans 项目中使用自定义 javadoc 标记。我已将 javadoc 命令行选项添加到项目设置中，并且当我实际生成 javadoc 时标记工作正常，但由于某种原因，自定义标记根本不会显示在 IDE 显示的 javadoc 预览中。这是 Netbeans 错误还是我错过了某个步骤以使标签显示在 IDE 中？

编辑：这是 Netbeans 7.2

# python - 从给定的 QuerySet 获取 FK 集

> ID：12995057
> 
> 赞同：0
> 
> 时间：2012-10-21T04:45:05.760
> 
> 标签：python, django

使用 django，我试图从另一个 QuerySet 获取 FK 关系的 QuerySet。

也就是说，给定这样的关系： `ParentTable (ParentID)`和 `ChildTable(ChildID, ParentID`

我有一个特定的 QuerySet `children = Child.objects.filter(**some_filters)` ，我需要一个 QuerySet 用于 QuerySet 中`Parent`“引用”的对象`children`。

我最初的想法是只使用，像这样： `Parent.objects.filter(id__in=child.only('parent'))`，但检查 SQL 查询表明，它给出了一个 WHERE 子句`ParentID IN (SELECT subq.ChildID FROM ...`，显然会产生不希望的结果。（检查唯一方法显示我在这里的使用不正确，所以这种行为是意料之中的）

所需的查询将是`ParentID IN (SELECT subq.ParentID FROM ...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:15:01.910

那么你已经回答了你的问题：

考虑到这一点，当创建外键引用时，Django 会自动为您创建反向引用，这就是您能够根据子项过滤结果的原因。此外，如果您想遵守此行为，您可以在模型字段中使用 Symmetrical=False kwargs 来不生成反向关系。

```
class Parent(models.Model):
...

class Child(models.Model):
     parent = models.ForeignKey(Parent) 
```

# 您可以随时进行查询：

```
Parent.objects.filter(child__in = Childrens.objects.all()) 
```

# sql - 此查询中不存在 SQL - 是否可能

> ID：12995059
> 
> 赞同：0
> 
> 时间：2012-10-21T04:45:23.427
> 
> 标签：sql, sql-server

这是我的脚本 - 它只是查找与人员行关联的图像文件。

现在，如果查询运行时没有明显的 .jpg，则会显示错误：

> *消息 4860，级别 16，状态 1，行 1
> 无法批量加载。文件“C:\Dev\ClientServices\Defence\RAN\Shore\Config\Photos\002054.2009469432270600.001.jpg”不存在。*

有没有办法将此查询写入

```
IF not exists then set id_number = '002054.2009469432270427.001' 
```

因此它将始终为没有图片的任何行显示此照片。

```
ALTER
procedure [dbo].[as_ngn_sp_REP_PH108_photo] (@PMKEYS nvarchar(50)) 
AS
---exec [as_ngn_sp_REP_PH108_photo] '8550733'
SET 
NOCOUNT ON

DECLARE @PATH AS NVARCHAR(255)
DECLARE @ID_NUMBER NVARCHAR(27)
DECLARE @SQL AS NVARCHAR(MAX)

EXEC DB_GET_DB_SETTING'STAFF PICTURE FILE LOCATION', 0, @PATH OUTPUT 

IF RIGHT(@PATH,1) <> '\'

    SET @PATH = @PATH + '\' 

SELECT @ID_NUMBER = ID_NUMBER FROM aView_person WHERE EXTRA_CODE_1 = @PMKEYS

SET @PATH = @PATH + @ID_NUMBER + '.jpg'

SET @SQL = 'SELECT ''Picture1'' [Picture], BulkColumn FROM OPENROWSET(Bulk ''' + REPLACE(@PATH,'''','''''') + ''', SINGLE_BLOB) AS RAN'

EXEC SP_EXECUTESQL @SQL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:06:00.593

您可以将代码更改为如下工作：

```
SET @PATH = @PATH + isnull(@ID_NUMBER,'002054.2009469432270427.001') + '.jpg' 
```

如果未找到@Id_Number，则该值将为 null，因此我们将 null 替换为默认 id。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T05:01:06.033

我猜您需要检查 SQL Server 中的文件是否存在。查找下面的帖子以了解在 SQL Server 中如何实现。这家伙使用内置的**xp_fileexist**存储过程来解决问题。

**[使用 xp_fileexist 存储过程在 SQL Server 中进行文件验证](http://www.mssqltips.com/sqlservertip/1272/file-validation-in-sql-server-with-xpfileexist-stored-procedure/)**

祝你好运 ！！

# java - jDateChooser如何解决刷新页面？

> ID：12995062
> 
> 赞同：1
> 
> 时间：2012-10-21T04:46:00.830
> 
> 标签：java, page-refresh, jdatechooser

当我从**jDateChooser**中选择日期时，它会**刷新**整个页面。因此，我给文本框的值变为空，并且出现空指针异常。我该如何解决这个**刷新**问题？

# css - 链接箭头下降到新行

> ID：12995066
> 
> 赞同：1
> 
> 时间：2012-10-21T04:48:13.323
> 
> 标签：css, internet-explorer-8, css-selectors, whitespace, nowrap

我有一个带有链接列表的侧边栏，每个链接的右侧都有一个箭头图标（使用 :after 选择器在锚样式中设置）。在许多链接上，箭头正在下降到它自己的行。我想确保文本可以根据需要换行，但要防止箭头本身被孤立到一行上。

我以为我已经通过在 :after 伪元素上使用“white-space: nowrap”解决了这个问题，因为它在 Firefox 中有效。不幸的是，我发现它不适用于 IE8、Chrome 和 Safari。

在 Firefox、IE8、Chrome 和 Safari 中，有没有办法防止链接图标中断到自己的行，同时仍允许链接中的文本根据需要换行？

基本 HTML 结构：

```
<div id="sidebar">
  <ul>
    <li><a>Link 1</a></li>
    <li><a>Link 12</a></li>
  </ul>
</div> 
```

样式规则（用 sass 编写）：

```
div#sidebar
  width: 170px

  a:after
    content: url('images/icon_double-arrow.png')
    margin: 0 0 0 6px
    white-space: nowrap 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T18:10:57.270

我相信我解决了这个问题。我更改了样式，以便将箭头图像设置为锚背景，并使用填充将其定位在右侧，而不是将箭头图像设置为 :after 内容。适用于所有提到的浏览器：边框：0 背景：url('images/icon_arrow.png') no-repeat right center padding-right: 15px

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T06:37:53.623

最简单的解决方案可能是在生成的内容中使用字符而不是图像，例如

```
content: '\bb'; 
```

使用“»” U+00BB 右指向双角引号，类似于您现在使用的图像，或

```
content: '\2192'; 
```

使用箭头字符“→” U+2192 RIGHTWARDS ARROW。

IE 行为异常的原因似乎是它通常将图像视为允许在其前面换行，当出现在行内上下文中时，即使没有空格介入（例如`sometext<img ...>`）。当你改用一个字符，它前面没有空格字符时，IE 应用文本的换行规则（这[在 IE 中很奇怪，](http://www.cs.tut.fi/~jkorpela/html/nobr.html)但不允许换行，例如在“foo»”中的“»”之前）。

# android - 如何根据在edittext中输入的文本滚动到列表视图中的特定项目？

> ID：12995068
> 
> 赞同：0
> 
> 时间：2012-10-21T04:48:32.433
> 
> 标签：android, listview, android-contacts, contactscontract

我创建了一个多联系人选择器，在其中我显示了`listview`with中所有联系人的列表`checkbox`，但我想做的是现在我想将一个`edittext`放在顶部，以便用户快速滚动列表。例如，如果用户在其中键入字母 D，`edittext`它应该向下滚动到名称以 D 开头的位置。我正在使用`CustomAdapter`它来填充列表中的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:18:07.120

[返回 ListView 时，](https://stackoverflow.com/questions/3014089/scroll-to-a-position-in-a-listview)您是否有机会查看维护/保存/恢复滚动位置

# php - PHP图像不工作

> ID：12995070
> 
> 赞同：0
> 
> 时间：2012-10-21T04:48:55.370
> 
> 标签：php, mysql, image

我正在尝试使这个 .php 文件充当 .png，所以我可以这样做`<img src='test.php'>`[example]

我添加了一个标题作为图像并这样做：

```
<?php

/* Start Connection */
[Ignore This]
/* End Connection */

/* Add to counter */
mysql_query("UPDATE counter SET counter = counter + 1");
/* End Add */

/* For Echo */
$count = mysql_fetch_row(mysql_query("SELECT counter FROM counter"));
$hits = $count[0];
/* Create Echo as Null 
* @echo
echo "$hits";
*/

/* End Echo */

//Img Area
$font = "font.ttf";
$image = imagecreatefrompng("hits.png");
$color = imagecolorallocate($image, 255, 255, 255);
imagettftext($image, 15, 0, 10, 24, $color, $font, $hits);
imagepng($image, "test.png");
imagedestroy($image);
header('Content-Type: image/png')
?> 
```

但它只是显示一个损坏的图像。

这个文件是img.php

损坏的图像是 img.php

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:50:59.927

`imagepng($image, "test.png");`如果要将图像保存到文件中，为什么希望将其输出到浏览器？如果要直接输出，只需使用`imagepng($image);`

此外，标头调用需要在输出任何内容之前进行。

# node.js - 无法在连接 USB 的 Android 设备上通过 Chrome 进行 Node.js 测试

> ID：12995071
> 
> 赞同：1
> 
> 时间：2012-10-21T04:49:01.923
> 
> 标签：node.js

我无法从使用 IPv4 地址的 USB 绑定 Android 设备 (Chrome) 访问 Node.js 测试。

在 Win7 PC 上运行的 Node hello world 在本地使用计算机名称、IPv4 地址、本地主机等在端口 1337、8080 等上运行良好。

尽管从 Android 以相同的方式（使用 IPv4 地址）到达 Apache，但没有问题！

是配置问题吗？

代码 ：

```
var portNum = 8080;  //1337;
http.createServer(_handler).listen( portNum ); 
```

# macos - 如何使用 amazon ec2 实例设置我的 mac ftp 客户端？

> ID：12995075
> 
> 赞同：4
> 
> 时间：2012-10-21T04:49:55.963
> 
> 标签：macos, ftp, amazon-ec2, amazon-web-services

到目前为止，我已经完成了以下工作：

1.  部署亚马逊 ec2 实例。
2.  从桌面上的实例接收证书/密钥。
3.  在我的 Mac 上安装 ftp cyberduck。

还剩下什么？

我坚持在我的桌面上转换密钥的笨拙部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:16:07.630

如果您的 EC2 机器正在运行 SSH 服务器，那么您基本上就可以开始使用了。请参阅[Cyber​​duck 手册中的 Public Key Authentication](http://trac.cyberduck.ch/wiki/help/en/howto/sftp#PublicKeyAuthentication)，尤其是这部分：

> 在 Cyber​​duck 的 Connection Dialog 或 Bookmark editor 中，选择 Use Public Key Authentication 并选择 .ssh 目录中的私钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T09:33:27.390

按照[此](http://youtu.be/hd4oL3WIPVM)视频获取分步说明

打开 Cyber​​duck -> 打开连接 -> 从下拉列表中选择 SFTP 提供必要的参数并在更多选项下单击“使用公钥身份验证”并指定 .pem 文件的路径。然后按连接按钮

如果您喜欢使用 FileZilla，请按照[此操作。](http://y2u.be/e9BDvg42-JI)

# c# - 如何使用端口数据接收事件连接mysql数据库

> ID：12995077
> 
> 赞同：3
> 
> 时间：2012-10-21T04:50:48.420
> 
> 标签：c#, mysql, database-connection

目前我正在使用 C# 代码在我的应用程序中访问 MySQL 数据库。我想通过在端口数据接收事件中触发数据访问方法来访问数据库。我已经编写了数据访问方法，该方法在调制解调器接收到消息时触发串行端口数据接收事件。但是我无法访问数据库。它给出了一条错误消息：

```
 unable to connect any specified MySQL hosts 
```

当我使用按钮单击事件调用数据访问方法而不让它在串口数据接收事件中触发时，它可以正常工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T10:46:28.570

您应该尝试通过 mysql 命令行工具或 mysql 工作台连接来检查您和 MySQL 服务器之间的连接。

如果无法连接，可能是由于防火墙或 mysql 未启动而强制发出一些连接。

# python - 如何停止使用 Python 在 Google App Engine 中重定向 URL？

> ID：12995087
> 
> 赞同：1
> 
> 时间：2012-10-21T04:52:58.160
> 
> 标签：python, google-app-engine, url, redirect, urlfetch

我正在使用`urlfetch`谷歌应用引擎，但即使我使用它，它仍然会转到重定向的最终页面：

```
result = urlfetch.fetch(classUrl, payload=None, method=urlfetch.GET, headers={}, allow_truncated=False, follow_redirects=False) 
```

例如，如果 classUrl 是 Google 中的搜索词

```
(https://www.google.com/search?q=setInstanceFollowRedirects()+python&oq=setInstanceFollowRedirects()+python&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8) 
```

它会将我重定向到 www.google.com

如何停止此重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:37:14.500

可能是 cookie 问题，一些网站坚持至少进行一次 302 ruondtrip 以设置所需的 cookie。您必须自己管理 cookie。SO上还有其他问题可以解释如何做到这一点。

# python - python中的伪透明窗口背景

> ID：12995093
> 
> 赞同：2
> 
> 时间：2012-10-21T04:54:18.860
> 
> 标签：python, background, transparency, pygtk, cairo

如何使用 pygtk 和 cairo 向窗口添加伪透明背景？我计划使用它为不使用复合管理器的用户在扩展坞中获得半透明背景。

编辑：查看虚拟终端源，我想我应该使用根窗口像素图，但是我该如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:22:54.603

也许您可以将墙纸加载到 Pixbuf 中，然后从中创建一个 subpixbuf 并在窗口中使用 cairo 绘制它。

您可以使用 GLib.Settings 加载当前壁纸。

在 vala 中（不知道 pygtk，但它非常相似）它会是这样的：

```
GLib.Settings settings = new GLib.Settings ("org.gnome.desktop.background"); 
```

然后使用 get_string() 获取图片路径。

# java - 我如何让一个 jar 与另一个 jar 通信

> ID：12995094
> 
> 赞同：-2
> 
> 时间：2012-10-21T04:54:30.530
> 
> 标签：java, io, ipc, executable-jar

好的，所以我有 2 个罐子（控制台，核心）

1st-Console) 接收用户输入

第二核）处理输入并给出输出

我试图通过交换输入和输出来让这两个“通信”

现在，当我遇到“通知”对方有输入要接收和输出要给出的问题时，我已经尝试写入文件进行通信

我对这个理想有点陌生，所以如果它是一个简单的功能，请不要批评。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:44:57.873

如果您只有一个进程（与拥有多个 Jar 文件无关），那么您可以简单地在另一个中使用一个 Jar 文件。

但是，如果您单独运行 Jar 文件，那么您有两个不同的进程，您需要的是进程间通信，它可以通过多种方式完成：

*   **[远程方法调用（RMI）：](http://en.wikipedia.org/wiki/Java_Remote_Method_Invocation)**它允许一个进程在另一个地址空间的另一个进程中执行一个函数

*   **[网络套接字：](http://en.wikipedia.org/wiki/Network_socket)**允许您在各种进程之间发送序列化数据。

# entity-framework - 实体框架中的多连接查询

> ID：12995095
> 
> 赞同：0
> 
> 时间：2012-10-21T04:54:47.883
> 
> 标签：entity-framework, join

我有以下表格

```
tasks  
id | name   | proj_id  
1  | task1  | 1  
2  | task2  | 1  
3  | task3  | 1  

projects  
id | name  
1  | sample proj1  
2  | demo project  

budget_versions  
id | version_name| proj_id  
1  | 50          | 1  

budgets  
id | cost  | budget_version_id | task_id  
1  | 3000  | 1                 | 2  
2  | 5000  | 1                 | 1 
```

我需要使用实体框架加入这些表以获得如下结果

```
task_id | task_name | project_id | budget_version | budget_id | cost   
1       | task1     | 1          | 1              | 2         |5000  
2       | task2     | 1          | 1              | 1         |3000  
3       | task3     | 1          | NULL           | NULL      |NULL 
```

```
select tsk.id,tsk.name, tsk.project_id, bgtver.id, bgt.id, bgt.cost 
from TASK tsk
left outer join BUDGET_VERSIONS bgtver
on tsk.project_id= bgtver.project_id
left outer join BUDGETS bgt
on bgtver.id = bgt.budget_version_id  and tsk.id = bgt.task_id
where bgtver.id = 1 
```

这是我迄今为止尝试过的

```
var budgetlists = _worker.Budgets.Get().GroupJoin(
    _worker.BudgetVersions.Get(),
    rb => rb.budget_version_id, 
    rbv => rbv.id,
    (rb, rbrbv) => new {rb, rbrbv}
).SelectMany(
    @t => @t.rbrbv.DefaultIfEmpty()
).GroupJoin(
    _worker.Tasks.Get(), 
    rbrbv => rbrbv.id, 
    tsk => tsk.id,
    (rbrbv, tskrb) => new {rbrbv, tskrb}
).SelectMany(
    @p => @p.tskrb.DefaultIfEmpty()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:38:13.863

这应该有效：

```
var result = from tsk in tasks
                join bv in budget_versions on tsk.proj_id equals bv.proj_id into g1
                from bgtver in g1.DefaultIfEmpty()
                join b in budgets on new { bgtver_id = bgtver.id, tsk.id } equals new { bgtver_id = b.budget_version_id, id = b.task_id } into g2
                from bgt in g2.DefaultIfEmpty()
                select new Result 
                { 
                    task_id = tsk.id, 
                    task_name = tsk.name, 
                    project_id = tsk.proj_id, 
                    budget_version = bgtver.id, 
                    budget_id = bgt == null ? (int?)null : bgt.id, 
                    cost = bgt == null ? (int?)null : bgt.cost 
                }; 
```

[下面](http://www.google.com/search?q=linq%20left%20outer%20join)介绍如何在 LINQ 中进行左外连接。

# windows-8 - 如何在 WinRT 中将页面加载到框架中？

> ID：12995097
> 
> 赞同：0
> 
> 时间：2012-10-21T04:55:12.793
> 
> 标签：windows-8, microsoft-metro

有没有办法将另一个页面加载到网格内的框架中？

例如，如果我有一个包含内容行和列的主页，我想将另一个页面加载到该内容行和列（即框架）中？

我知道这是可能的，因为其他应用程序可以做到

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:11:57.673

让框架导航到页面，这是 VB.net 的示例：

```
frameA.Navigate(GetType(TestPage)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:31:29.153

使用更好的`<WebView .../>`元素来查看网页。 [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview)

# php - xhtml 到 Wordpress？

> ID：12995100
> 
> 赞同：2
> 
> 时间：2012-10-21T04:55:44.243
> 
> 标签：php, wordpress, xhtml

我正在学习xhtml/html5/PHP，已经掌握了这些语言的大部分概念。我不明白的是，如果我在 xhtml 中有多个页面，例如 home(index)html、about.html、blog.html 等，我是否需要将所有这些页面转换为 php 文件？

我从网上下载了一些模板来查看 php 文件，但是在模板文件夹中没有用于菜单类别的单独文件，只有用于创建 wp 主题的常用 .php 文件。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:59:15.003

欢迎来到网络开发！Wordpress 是用 PHP 编写的，因此您应该将 Wordpress 主题中的所有文件都设为 PHP（或支持 PHP 的文件，如 CSS、Javascript 等）。在制作 Wordpress 主题时，将所有 HTML 文件转换为 PHP 文件至关重要，否则您将无法使用 Wordpress 原生主题中的任何 PHP 函数。

有关主题开发的更多信息，[请通读此文档](http://codex.wordpress.org/Theme_Development)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:09:08.340

如果您的网站将是动态网站，您需要将所有页面转换为 php 文件。您的页眉和页脚可能具有相同的格式，但不适用于您的内容。您可以一页一页地创建这些页面，但这样做需要付出很大的努力。因为您需要将页眉和页脚编码（粘贴）到每一页。如果要更改页眉或页脚中的某些内容，则需要在其中的每个文件中进行更改。

在 PHP 中，您只需要在 header.php 和 footer.php（分别）中编写一次页眉和页脚。然后使用 include 调用它们，使其与您的内容一起显示。塔拉。如果要更改页眉/页脚的某些内容，只需将其更改为 header.php 或 footer.php。塔拉。您的页眉或页脚已立即更改，您无需更改每个文件。

`Do I need to convert all of those pages to php files?`

答案是，是的！但首先将它们切片为页眉、页脚、侧边栏等。

`in the template folder there is no individual files for the menu categories, just the usual .php files for created a wp theme.`

是的，实际上有。通常使用函数 register_nav_menus 位于 functions.php 中。[我认为您应该从http://codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development)开始学习 WordPress 主题。他们在那里拥有丰富的资源。

是的，希望它有所帮助。祝你好运！:-)

# objective-c - 如何停止 NSTimer

> ID：12995101
> 
> 赞同：0
> 
> 时间：2012-10-21T04:56:10.907
> 
> 标签：objective-c, ios, nstimer

当我按下停止按钮停止计时器时，它只是重置为原始时间并再次开始倒计时。我到处寻找，我发现的只是“无效”而且它不起作用。我希望当我点击停止时时间停止并且标签显示原始时间。我还关闭了自动计数，所以我可以尝试释放，它给了我一个错误：

> 0x10e20a5: movl 16(%edx), %edx EXC_BAD_ACCESS (代码=2, 地址=0x10)

```
NSTimer *rockettTimer;
int rocketCount;

@interface FirstViewController ()
@property (strong, nonatomic) IBOutlet UILabel *rocketTimer;

- (IBAction)stopButton:(id)sender;
- (IBAction)startButton:(id)sender;

@end

@implementation FirstViewController
@synthesize rocketTimer;

-(void) rocketTimerRun{
    rocketCount = rocketCount - 1;
    int minuts = rocketCount / 60;
    int seconds = rocketCount - (minuts * 60);
    NSString *timerOutput = [NSString stringWithFormat:@"%d:%.2d", minuts, seconds];
    rocketTimer.text = timerOutput;
}

- (IBAction)startButton:(id)sender {
    rocketCount = 180;
    rockettTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self    selector:@selector(rocketTimerRun) userInfo:nil repeats:YES];

- (IBAction)stopButton:(id)sender {
    [rockettTimer invalidate];
    //[rockettTimer release];
}

- (void)viewDidLoad
{

    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setRocketTimer:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

 - (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:02:59.147

我想你正在多次按下开始按钮。每次调用 startButton 函数时，它都会创建一个新计时器并忘记旧计时器。`[rockettTimer invalidate]`为了防止这种情况，我建议您在创建新计时器之前立即放置一个。

您还应该将 RockettTimer 初始化为 nil。更好的是，您应该将其设为该类的成员变量，因为现在您将无法拥有该类的多个实例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T03:38:28.230

您应该尝试使用另一种方法来初始化您的计时器。并在 viewDidLoad 中执行：

# time - 根据时间改变背景 - Objective C

> ID：12995103
> 
> 赞同：3
> 
> 时间：2012-10-21T04:56:52.437
> 
> 标签：time, background, compare, nsdate, nscalendar

所以我想做的是根据一天中的时间改变图像的背景，但它遇到了问题。这是代码：

```
-(void)updateBackground
{
    NSDate *currentTime = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"hh:mm a"];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
    NSString *resultTime = [dateFormatter stringFromDate:currentTime];
    [timeLabel setText:resultTime];
    NSString *morningStart = [NSString stringWithFormat:@"05:00 AM"];
    NSString *morningEnd = [NSString stringWithFormat:@"11:59 AM"];
    NSString *afternoonStart = [NSString stringWithFormat:@"12:00 PM"];
    NSString *afternoonEnd = [NSString stringWithFormat:@"02:59 PM"];
    NSString *eveningStart = [NSString stringWithFormat:@"03:00 PM"];
    NSString *eveningEnd = [NSString stringWithFormat:@"07:59 PM"];
    NSString *nightStart = [NSString stringWithFormat:@"08:00 PM"];
    NSString *nightEnd = [NSString stringWithFormat:@"04:59 AM"];
    NSLog(resultTime);
    if ([resultTime compare:morningStart]==NSOrderedDescending) {
        if ([resultTime compare:morningEnd]==NSOrderedAscending) {
            UIImage *morning = [UIImage imageNamed:@"MorningTime.jpeg"];
            [background setImage:morning];
        }
    }
    if ([resultTime compare:afternoonStart]==NSOrderedDescending) {
        if ([resultTime compare:afternoonEnd]==NSOrderedAscending) {
            UIImage *afternoon = [UIImage imageNamed:@"afternoonSky.jpeg"];
            [background setImage:afternoon];
        }
    }
    if ([resultTime compare:eveningStart]==NSOrderedDescending) {
        if ([resultTime compare:eveningEnd]==NSOrderedAscending) {
            UIImage *evening = [UIImage imageNamed:@"EveningSky.jpeg"];
            [background setImage:evening];
        }
    }
    if ([resultTime compare:nightStart]==NSOrderedDescending) {
        if ([resultTime compare:nightEnd]==NSOrderedAscending) {
            UIImage *night = [UIImage imageNamed:@"NightSky.jpeg"];
            [background setImage:night];
        }
    }

} 
```

那么问题出在哪里，假设现在是晚上 11:54，但它一直说是在上午 5:00 之后和上午 11:59 之前！这不是选择正确的 if 语句！我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:10:03.153

NSDate 格式以 24 小时格式提供时间，因此您必须更改时间（例如（01:00 AM，13:00 PM））以放置任何您想要的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:13:52.510

可能这个对你有帮助，

```
NSDate *currentTime = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"hh:mm a"];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
    NSString *resultTime = [dateFormatter stringFromDate:currentTime];
    NSString *morningStart = [NSString stringWithFormat:@"05:00 AM"];
    NSString *morningEnd = [NSString stringWithFormat:@"11:59 AM"];
    NSString *afternoonStart = [NSString stringWithFormat:@"12:00 PM"];
    NSString *afternoonEnd = [NSString stringWithFormat:@"14:59 PM"];
    NSString *eveningStart = [NSString stringWithFormat:@"15:00 PM"];
    NSString *eveningEnd = [NSString stringWithFormat:@"19:59 PM"];
    if ([morningStart compare:resultTime]==NSOrderedAscending & [resultTime compare:morningEnd]==NSOrderedAscending) {
            NSLog(@"morning");      
    }
   else  if ([afternoonStart compare:resultTime]==NSOrderedAscending & [resultTime compare:afternoonEnd]==NSOrderedAscending) {
                NSLog(@"aftrnon..."); 
            }
   else  if ([eveningStart compare:resultTime]==NSOrderedAscending & [resultTime compare:eveningEnd]==NSOrderedAscending) {
                NSLog(@"evening");    
    }
    else {
        NSLog(@"nit time");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T06:24:36.317

您应该使用*NSDateComponents*仅获取您正在比较的*NSDate*对象的小时和分钟。*查看NSDateComponents*的官方文档了解如何使用它。

然后使用以下方法之一比较*NSDate对象：*

```
- (NSDate *)earlierDate:(NSDate *)anotherDate
- (NSDate *)laterDate:(NSDate *)anotherDate
- (BOOL)isEqualToDate:(NSDate *)anotherDate 
```

你不应该在比较日期时使用 NSString。

# big-o - 所有条件检查都是常量大 O 吗？

> ID：12995107
> 
> 赞同：1
> 
> 时间：2012-10-21T04:57:47.803
> 
> 标签：big-o

如果一个函数具有 O(N) 复杂度并且在 if 语句中调用它，它仍然是 O(1) 吗？

例如：

```
 f(x);
   if (f2(x))
     f3(x); 
```

其中 f(x) 是 O(N) f2(x) 是 O(N) 而 f3(x) 是 O(Nlog2N)。

那么在条件为真的最坏情况下，这个片段的整体复杂度会是 O(Nlog2N) 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:03:06.033

**Big O 返回算法时间复杂度或空间的上限（最坏情况）。**

> 条件语句是 O(1)。

`if (f2(x))`可以写成

```
boolean b = f2(x);
if(b){...} 
```

因此，上面的条件有 O(1)，而上面的 f2(x) 的评估是 O(N)。因此该集合将具有 O(N) 复杂度。

* * *

你会采取最坏的情况，即条件评估为真，然后计算它。 **O(Nlog2N)**将是您问题中块的整体复杂性。

**[（规则）](http://instantkick.blogspot.com/2012/08/what-why-of-big-o-notation.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:05:22.653

是的。这是最坏的情况。在一种情况下是 o(n)，而在另一种情况下是 o(N lg n)。

因此，由于我们对最坏的情况感兴趣，我们说它是后者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T05:05:55.390

Big-O 是一个上限，所以片段`f1(); if(f2()) f3();`是`O(f1 + f2 + f3)`。在不知道其他任何事情的情况下，这将是最好的结果（因为您必须假设最坏情况的行为）。

但是，如果可以*证明*这`f2`是错误的（例如，因为您在分析中已经到达数据结构的末尾），您可以将其缩减为`O(f1 + f2)`. 这有时是必要的，例如在分析递归算法的基本情况时。

# rdf - 如何使用 SPARQL 查询从 owl 中检索个人？

> ID：12995110
> 
> 赞同：2
> 
> 时间：2012-10-21T04:59:15.393
> 
> 标签：rdf, sparql, jena

我可以使用以下查询从我的本体中检索个人：

```
SELECT ?indiv WHERE { ?indiv rdf:type:Fruit  } 
```

我得到了 Apple、Orange 等结果，但是当我用 Java 编写这个查询时，我得到了以下异常：

```
Exception in thread "main" com.hp.hpl.jena.query.QueryParseException: Encountered " "}" "} "" at line 4, column 41.
Was expecting one of:
    <IRIref> ...
    <PNAME_NS> ...
    <PNAME_LN> ...
    <BLANK_NODE_LABEL> ...
    <VAR1> ...
    <VAR2> ...
    "true" ...
    "false" ...
    <INTEGER> ...
    <DECIMAL> ...
    <DOUBLE> ...
    <INTEGER_POSITIVE> ...
    <DECIMAL_POSITIVE> ...
    <DOUBLE_POSITIVE> ...
    <INTEGER_NEGATIVE> ...
    <DECIMAL_NEGATIVE> ...
    <DOUBLE_NEGATIVE> ...
    <STRING_LITERAL1> ...
    <STRING_LITERAL2> ...
    <STRING_LITERAL_LONG1> ...
    <STRING_LITERAL_LONG2> ...
    "(" ...
    <NIL> ...
    "{" ...
    "[" ...
    <ANON> ...
    "+" ...
    "*" ...
    "/" ...
    "|" ...
    "?" ...

at com.hp.hpl.jena.sparql.lang.ParserSPARQL11.perform(ParserSPARQL11.java:87)
at com.hp.hpl.jena.sparql.lang.ParserSPARQL11.parse(ParserSPARQL11.java:40)
at com.hp.hpl.jena.query.QueryFactory.parse(QueryFactory.java:132)
at com.hp.hpl.jena.query.QueryFactory.create(QueryFactory.java:69)
at com.hp.hpl.jena.query.QueryFactory.create(QueryFactory.java:40)
at com.hp.hpl.jena.query.QueryFactory.create(QueryFactory.java:28) 
```

我的代码是：

```
String queryString = " PREFIX ont: <http://www.owl-ontologies.com/fruitOntology.owl#> 
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> 
SELECT ?indiv WHERE { ?indiv ont:Fruit  } ";

Query query = QueryFactory.create(queryString) ;
QueryExecution qexec = QueryExecutionFactory.create(query, m) ;
try {
  ResultSet results = qexec.execSelect() ;
  for ( ; results.hasNext() ; )
  {
    QuerySolution soln = results.nextSolution() ;
    Resource y = soln.getResource("y") ; 
    Resource x = soln.getLiteral("x") ;   
    System.out.println(y.getLocalName()+" = "+x.getString()) ;
  }
}
catch(Exception e){
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:19:31.530

那是非法的 SPARQL 语法。你想要这样的东西：

```
PREFIX ....
SELECT ?indiv WHERE { ?indiv rdf:type ont:Fruit  } 
```

RDF 是三元组；感兴趣的三重模式是谓词所在的位置`rdf:type`。分隔图案的 3 个部分的空格是必要的。

# javascript - jsp中的多项选择题

> ID：12995112
> 
> 赞同：0
> 
> 时间：2012-10-21T04:59:41.860
> 
> 标签：javascript, html, jsp

我正在开发一个网页，我将在其中基于普通的 JSP-MsAccess 连接进行一个小测验。但是当我运行我的测验并回答一个问题时，结果将应用于所有问题，这意味着如果我得到第一个问题，那么我的分数是 10，如果我的第一个答案错误，我的分数是 0。代码：

```
<%@ page import="java.sql.*" %>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JSP Page</title>
</head>
<body>
<% 
String ans=" ";
if(request.getParameter("correctAns")!=null)
{
    ans=request.getParameter("correctAns").toString();
}

Connection conn = null;

Statement st = null;

ResultSet rs = null;

String id=request.getParameter("id");
System.out.println("id:"+id);

int i=1;

String s,g;

int count=0;

try {

Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
 conn = DriverManager.getConnection("jdbc:odbc:qdsn");
 rs = null;

 st = conn.createStatement();

//for(i=1;i<=2;i++)
// {
rs = st.executeQuery("select * from exam");

while(rs.next()) {
%>

<br/>
<center>

<table border="1" width="500px" bgcolor="pink" cellspacing="0" cellpadding="0">
  <tr>
    <td width="100%">

<form name="form1">

 <h2 align="center"><font color="red">Online Quiz Application</font></h2>

<b>Select Correct Answer</b>
        <table border="0" width="500px" cellspacing="2" cellpadding="4">
 <tr>

<td width="50%"> Question:</td>
<input type="hidden" name="correctAns" value="<%=rs.getString(6)%>" />
<tr>
<td><%= rs.getString("quest") %></td></tr>
<tr>
<td>

1: <input type="radio" name="a" value= "QA" /></td>
    <td><%= rs.getString("QA") %></td></tr> 
<tr>
<td>
2: <input type="radio" name="a" value="QB" /></td>
<td><%= rs.getString("QB") %></td></tr>

<tr>
<td>
3: <input type="radio" name="a" value="QC" /></td>
<td><%= rs.getString("QC") %> </td></tr>

<tr>
<td>
4: <input type="radio" name="a" value="QD" /> </td>
<td> <%= rs.getString("QD") %> </td></tr>

<tr>
<td>
<center>
   <input type="submit" value="Submit" name="submit"></center></td></tr>
</table>

</form>
 </td>
  </tr>
</table>
</center>
</body>
<% g=request.getParameter("a");
%>
<% 
if(g.equals(ans)){

count++;
}

%>

<%
}}
// }
catch (Exception ex) {
ex.printStackTrace();

%>

<%
} finally {
if (rs != null) rs.close();
if (st != null) st.close();
if (conn != null) conn.close();
}
out.println("Score="+count);
%>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:07:31.207

更新您的单选按钮名称以使用一些索引，即

在顶部：声明索引变量。

```
<% int qNum = 0; %> 
```

在页面中间，在`radio`字段命名中使用索引变量。

```
 <input type="radio" name="a<%=qNum%>" value="QA" />
 <input type="radio" name="a<%=qNum%>" value="QB" />
 <input type="radio" name="a<%=qNum%>" value="QC" />
 <input type="radio" name="a<%=qNum%>" value="QD" /> 
```

在页面底部，检索索引参数并将索引加一。

```
 <% g=request.getParameter("a"+qNum);
    qNum++;
  %> 
```

# javascript - 带有图像确定按钮的 Javascript 自定义警报框

> ID：12995117
> 
> 赞同：0
> 
> 时间：2012-10-21T05:00:43.890
> 
> 标签：javascript, jquery, html, ajax

我需要使用下一个图标图像创建自定义警报框。我使用了文本链接，但我不知道如何放置下一个图标而不是文本链接。我在这里添加了我的自定义警报框功能。任何人都可以帮助做到这一点。此图像在根目录中命名为 new-go-next.png。

```
function createCustomAlert(txt,string_url) {
    // shortcut reference to the document object
    d = document;

    // if the modalContainer object already exists in the DOM, bail out.
    if(d.getElementById("modalContainer")) return;

    // create the modalContainer div as a child of the BODY element
    mObj = d.getElementsByTagName("body")[0].appendChild(d.createElement("div"));
    mObj.id = "modalContainer";
     // make sure its as tall as it needs to be to overlay all the content on the page
    mObj.style.height = document.documentElement.scrollHeight + "px";

    // create the DIV that will be the alert 
    alertObj = mObj.appendChild(d.createElement("div"));
    alertObj.id = "alertBox";
    // MSIE doesnt treat position:fixed correctly, so this compensates for positioning the alert
    if(d.all && !window.opera) alertObj.style.top = document.documentElement.scrollTop + "px";
    // center the alert box
    alertObj.style.left = (d.documentElement.scrollWidth - alertObj.offsetWidth)/2 + "px";

    // create an H1 element as the title bar
    h1 = alertObj.appendChild(d.createElement("h1"));
    h1.appendChild(d.createTextNode(ALERT_TITLE));

    // create a paragraph element to contain the txt argument
    msg = alertObj.appendChild(d.createElement("p"));
    msg.innerHTML = txt;

    // create an anchor element to use as the confirmation button.
    btn = alertObj.appendChild(d.createElement("a"));
    btn.id = "closeBtn";
    btn.appendChild(d.createTextNode(ALERT_BUTTON_TEXT));
    btn.href="";
    // set up the onclick event to remove the alert when the anchor is clicked
    btn.onclick = function() { removeCustomAlert(); window.location=string_url;return false; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:15:47.017

```
 function createCustomAlert(txt, string_url) {
        // shortcut reference to the document object
        d = document;

        // if the modalContainer object already exists in the DOM, bail out.
        if (d.getElementById("modalContainer")) return;

        // create the modalContainer div as a child of the BODY element
        mObj = d.getElementsByTagName("body")[0].appendChild(d.createElement("div"));
        mObj.id = "modalContainer";
        // make sure its as tall as it needs to be to overlay all the content on the page
        mObj.style.height = document.documentElement.scrollHeight + "px";

        // create the DIV that will be the alert 
        alertObj = mObj.appendChild(d.createElement("div"));
        alertObj.id = "alertBox";
        // MSIE doesnt treat position:fixed correctly, so this compensates for positioning the alert
        if (d.all && !window.opera) alertObj.style.top = document.documentElement.scrollTop + "px";
        // center the alert box
        alertObj.style.left = (d.documentElement.scrollWidth - alertObj.offsetWidth) / 2 + "px";

        // create an H1 element as the title bar
        h1 = alertObj.appendChild(d.createElement("h1"));
        h1.appendChild(d.createTextNode(ALERT_TITLE));

        // create a paragraph element to contain the txt argument
        msg = alertObj.appendChild(d.createElement("p"));
        msg.innerHTML = txt;

        // create an anchor element to use as the confirmation button.
        //btn = alertObj.appendChild(d.createElement("a"));
        //btn.id = "closeBtn";
        //btn.appendChild(d.createTextNode(ALERT_BUTTON_TEXT));
        //btn.href = "";

        btn = alertObj.appendChild(d.createElement("img"));
        btn.id = "closeBtn";
        btn.src = 'new-go-next.png';

        // set up the onclick event to remove the alert when the anchor is clicked
        btn.onclick = function () { removeCustomAlert(); window.location = string_url; return false; }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:33:19.220

只需在元素内添加图像 dom 元素。

```
var oImg=document.createElement("img");
oImg.setAttribute('src', 'next-to-go');
oImg.setAttribute('alt', 'na');
oImg.setAttribute('height', '60px');
oImg.setAttribute('width', '60px');    

btn.appendChild(oImg); 
```

[查看jsfiddle。](http://jsfiddle.net/XR2fL/3/)

# java - 在 Java 中管理属性

> ID：12995123
> 
> 赞同：0
> 
> 时间：2012-10-21T05:01:41.137
> 
> 标签：java, properties

在编写程序时，我通常使用 java.util.Properties 类来加载包含配置参数的属性文件。

我通常编写一个实用程序类，它具有检索单个属性的 get 方法，例如：

```
public long getConnectionTimeout() {
   String textVal=getProperty("connectionTimeout", "1000");
   return Long.parseLong(textVal); 
} 
```

这种方法很适合我，但是当要处理一长串属性时它会变得有点乏味。

我正在寻找一种更好的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T05:22:04.727

用于`HashMap`存储将与您的属性文件关联的属性，如下所示。在您的实用程序类中，创建一个`HashMap`实例字段。

```
HashMap<String,String> propertiesMap; 
```

然后在你的构造函数或初始化方法中初始化它，你喜欢。

```
propertiesMap = new HashMap<String,String>(); 
```

使用来自属性文件的数据填充哈希图。

```
for (String key : properties.stringPropertyNames()) 
{
    String value = properties.getProperty(key);
    propertiesMap.put(key, value);
} 
```

然后编写一个通用方法来获取具有其名称的特定属性：

```
public String getProperty(String name)
{
    return propertiesMap.get(name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:21:15.383

如果您使用的是 Java EE，则可以尝试使用此方法，该方法利用 CDI（上下文和依赖注入）： [使用 CDI 在 Java EE 6 中的应用程序配置](http://weblogs.java.net/blog/jjviana/archive/2010/05/18/applicaction-configuration-java-ee-6-using-cdi-simple-example)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T05:30:38.683

另一种方法是您可以使用[Enums](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)。这样，您将能够直接访问带有常量的属性。

```
public static void main(String[] args) {
    System.out.println(Properties.USER_NAME.getValue(String.class));
    System.out.println(Properties.CONNECTIION_TIMEOUT.getValue(Integer.class));
}

enum Properties {
    CONNECTIION_TIMEOUT {
        @Override
        public <T> T getValue(Class<T> toClass) {
            return toClass.cast(1000);//your code goes here
        }
    },
    USER_NAME {
        @Override
        public <T> T getValue(Class<T> toClass) {
            return toClass.cast("Test");//your code goes here
        }
    },
    PASS_WORD {
        @Override
        public <T> T getValue(Class<T> toClass) {
            return toClass.cast("Test");//your code goes here
        }
    };
    public abstract <T> T getValue(Class<T> toClass);
} 
```

# maven - 如何让 maven 警告交互依赖版本不匹配？

> ID：12995127
> 
> 赞同：5
> 
> 时间：2012-10-21T05:02:44.980
> 
> 标签：maven, maven-3

在下面的示例 Maven 依赖项中，slf4j 依赖项想要引入 log4j 1.2.17，而 log4j 显式依赖项想要引入 1.2.15。Maven 将 log4j 解析为版本 1.2.15 但是，没有警告表明 Maven 会打印出 sl4j 需要更高版本的 log4j。

我怎样才能让 Maven 对这些类型的冲突发出警告，而不是默默地接受 1.2.15 版本？

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-log4j12</artifactId>
  <version>1.7.2</version>
</dependency>
<dependency>
  <groupId>log4j</groupId>
  <artifactId>log4j</artifactId>
  <version>1.2.15</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T07:14:54.687

简而言之，应该使用[Maven-enforcer-plugin来处理这个问题。](http://maven.apache.org/plugins/maven-enforcer-plugin/)

你只需要像这样配置强制插件

```
<project>
  ...
  <build>
    <plugins>
      ...
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-enforcer-plugin</artifactId>
        <version>1.1.1</version>
        <executions>
          <execution>
            <id>enforce</id>
            <configuration>
              <rules>
                <DependencyConvergence/>
              </rules>
            </configuration>
            <goals>
              <goal>enforce</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

* * *

更详细地说，如[文档页面](http://maven.apache.org/enforcer/enforcer-rules/dependencyConvergence.html)中所述，类似这样的东西具有交互依赖不匹配：

```
<dependencies>
  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-jdk14</artifactId>
    <version>1.6.1</version>
  </dependency>
  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-nop</artifactId>
    <version>1.6.0</version>
  </dependency>
</dependencies> 
```

将在没有执行者规则的情况下默默地“工作”，但是在设置了规则后，它将使构建失败

```
Dependency convergence error for org.slf4j:slf4j-api1.6.1 paths to dependency are:

[ERROR]
Dependency convergence error for org.slf4j:slf4j-api:1.6.1 paths to dependency are:
+-org.myorg:my-project:1.0.0-SNAPSHOT
  +-org.slf4j:slf4j-jdk14:1.6.1
    +-org.slf4j:slf4j-api:1.6.1
and
+-org.myorg:my-project:1.0.0-SNAPSHOT
  +-org.slf4j:slf4j-nop:1.6.0
    +-org.slf4j:slf4j-api:1.6.0 
```

因此，当用户收到有关失败构建的错误消息时，她可以通过排除来修复它，例如

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-jdk14</artifactId>
  <version>1.6.1</version>
</dependency>
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-nop</artifactId>
  <version>1.6.0</version>
  <exclusions>
    <exclusion>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
    </exclusion>
  </exclusions>
</dependency> 
```

# ruby-on-rails-3 - Sencha touch 与 rails 后端

> ID：12995128
> 
> 赞同：0
> 
> 时间：2012-10-21T05:02:47.757
> 
> 标签：ruby-on-rails-3, sencha-touch-2

我有一个 Rails 应用程序，现在我想提供一个移动 UI，所以现在我正在评估 Sencha Touch。我的目标是创建 Sencha Touch 视图并通过 rails 而不是通过 js 格式的roller 为它们提供服务。但是我很难让它工作或找到任何样品。所以，我想知道是否有可能实现这一目标。

任何人都知道如何做到这一点？

谢谢，祝你好运。

# java - 如何将 Graphics2D 画布保存到图像文件

> ID：12995132
> 
> 赞同：0
> 
> 时间：2012-10-21T05:03:12.990
> 
> 标签：java, image, swing, jpanel, graphics2d

> **可能重复：**
> [Java Swing：获取 JFrame 的“图像”](https://stackoverflow.com/questions/5853879/java-swing-obtain-image-of-jframe)

在我的 java 程序中，我想将一个 JPanel 的 Graphics2D 画布保存为图像。我要求为此提供必要的课程，并提出建议，谢谢。我希望我已经足够清楚了。我没有添加代码示例，因为我认为没有必要。

# vba - VBA子程序不能传递变量

> ID：12995133
> 
> 赞同：0
> 
> 时间：2012-10-21T05:03:34.817
> 
> 标签：vba, excel, subroutine

我在将变量从一个子程序传递到另一个子程序时遇到问题。我已将它们宣布为公开，但它似乎不起作用。它说子程序超出范围。我所需要的只是在我的第二个子例程中使用 varUnique（一个数组）和 firstIndex。我需要做什么才能做到这一点？

```
Public fistIndex As Integer
Public varUnique As Variant
Sub FindUnique()

    Dim varIn As Variant
    Dim iInCol As Long
    Dim iInRow As Long
    Dim iUnique As Long
    Dim nUnique As Long
    Dim isUnique As Boolean
    Dim lastIndex As Integer

    varIn = Range("List")
    ReDim varUnique(1 To UBound(varIn, 1) * UBound(varIn, 2))

    nUnique = 0
    For iInRow = LBound(varIn, 1) To UBound(varIn, 1)
        For iInCol = LBound(varIn, 2) To UBound(varIn, 2)

            isUnique = True
            For iUnique = 1 To nUnique
                If varIn(iInRow, iInCol) = varUnique(iUnique) Then
                    isUnique = False
                    Exit For
                End If
            Next iUnique

            If isUnique = True Then
                nUnique = nUnique + 1
                varUnique(nUnique) = varIn(iInRow, iInCol)
            End If

        Next iInCol
    Next iInRow
    '// varUnique now contains only the unique values.
    '// Trim off the empty elements:
    ReDim Preserve varUnique(1 To nUnique)
    firstIndex = LBound(varUnique)
    lastIndex = UBound(varUnique)

create:
    If Not varUnique(firstIndex) = "Sub-Total" Then
    Worksheets.Add.Name = varUnique(firstIndex)
    Call Ledge(varUnique, firstIndex)
    Else
    End
    End If
    If Not firstIndex = lastIndex Then
    firstIndex = firstIndex + 1
    ActiveCell.Offset(1, 0).Select
    GoTo create
    Else
    End If
End Sub
Sub Ledge(varUnique, firstIndex)
'

'

'Define Variables
Dim Account_type As String
Dim Debit As Long
Dim Credit As Long

'Select Journal and Cell B4
    Sheets("Journal").Select
    Range("B4").Select

Account_Search:
'Make that cell= account_type
    Account_type = ActiveCell.Value
'If that cell= cash then save the values adjecent
    If Account_type = varUnique(firstIndex) Then
        ActiveCell.Offset(0, 1).Select
        Debit = ActiveCell.Value
        ActiveCell.Offset(0, 1).Select
        Credit = ActiveCell.Value
'Then go back to where you began
        ActiveCell.Offset(0, -2).Select
'Select Cash and Cell A2
        Sheets(varUnique(firstIndex)).Select
        Range("A2").Select
Search:
'If both cells are empy
            If ActiveCell.Value = "" And ActiveCell.Offset(0, 1).Value = "" Then
'Then write values and indicate you have done so
               ActiveCell.Value = Debit
               ActiveCell.Offset(0, 1).Select
               ActiveCell.Value = Credit
               Else
'If they are not empty go down one cell and search again
               ActiveCell.Offset(1, 0).Select
               GoTo Search
            End If
'Once it is recorded go to Journal again and go down one more cell
                Sheets("Journal").Select
                ActiveCell.Offset(1, 0).Select
'If it wasn't cash then go down one
    Else
        ActiveCell.Offset(1, 0).Select
    End If
'Record that cell value and check to see if it is not sub-total
    Account_type = ActiveCell.Value
    If Not Account_type = "Sub-Total" Then
'Now see if it is cash
        GoTo Account_Search
    Else
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:55:15.540

我不认为错误是因为传递参数，尽管“下标超出范围”可能是`firstIndex`指向`varUnique`数组中缺少的项目。

关于您的代码的一些想法：

*   通常，您应该避免使用变体，即使它们在涉及数组时会很方便。而是使用类型化数组（在这种情况下，使用字符串数组`Dim varUnique() as String`）或集合
*   如问题评论中所述，您还应尽可能避免使用公共或全局变量。在您上面的代码中，它们绝对不是必需的。
*   使用`Option Explicit`，上面也提到了。以这种方式编译时会发现很多错误，否则很难找到错误（参见`fistIndex`vs `firstIndex`）
*   使用函数将值传递回调用子 - 我认为您的示例中不需要它 -`firstIndex`据我所知，您不会改变

最后，我知道几个在 subs 和函数之间传递参数的例子，但正如我所说，我认为这不是你遇到问题的地方。

```
Option Explicit

Sub OuterSub()
    Dim varUnique As Variant
    Dim firstIndex As Integer
    Dim returnedInt As Integer

    '***** Create array
    varUnique = Array("String#1", "String#2", "String#3", "String#4", "String#5", "String#6")

    '***** Get first index
    firstIndex = LBound(varUnique)

    '***** Pass variables to second sub
    Call InnerSub(varUnique, firstIndex)

    '***** Pass variables to and from function
    returnedInt = InnerFunction(varUnique, firstIndex)

    Debug.Print "returnedInt=" & returnedInt & ", varUnique(returnedInt)=" & varUnique(returnedInt)
End Sub

Sub InnerSub(pvIn As Variant, piIndex As Integer)
    '***** Do something with the paramterers, like
    '***** checking to see if pvIn is an array
    If IsArray(pvIn) Then
        Debug.Print pvIn(piIndex)
    Else
        Debug.Print "pvIn not an array..."
    End If
End Sub

Function InnerFunction(pvIn As Variant, piIndex As Integer) As Integer
    '***** Return Integer
    InnerFunction = piIndex + 1
End Function 
```

# css - CSS3变换双向倾斜

> ID：12995149
> 
> 赞同：4
> 
> 时间：2012-10-21T05:06:18.600
> 
> 标签：css, transform, transformation

我正在尝试重现某种假的 3d 透视图。我怎样才能做一个 CSS3 变换，以某种方式我可以存档这个倾斜效果。

![在此处输入图像描述](../Images/86db385635b3881c522381613e407205.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T00:12:16.470

```
-webkit-transform: perspective(100px) rotateX(20deg); 
```

[JSF](http://jsfiddle.net/brentonstrine/349x9/2111/)中。[参考](https://www.webkit.org/blog/386/3d-transforms/)。

# javascript - apply() 没有按预期工作

> ID：12995153
> 
> 赞同：1
> 
> 时间：2012-10-21T05:07:06.537
> 
> 标签：javascript

我是 javascript 新手，遇到了“应用”方法。作为练习，我尝试为所有函数创建一个包装函数，如下面的代码片段。1\. 为什么这不能按预期工作，以及 2\. 如何为所有函数创建一个包装函数？

```
function funcWrapper(func){
   return func.apply(this, arguments);
};

function sum(num1, num2){
   return num1 + num2;
}

funcWrapper(sum, 2, 3); 
// expected 5, but returns
// function sum(num1, num2){
//    return num1 + num2;
// }2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T05:12:07.817

这是因为 funcWrapper 中的 arguments 对象是`[function sum(num1, num2){ return num1 + num2; }, 2, 3]`，第一个参数是你传递的函数。`arguments`对象是您传递给函数的所有参数。

解决方案是排除作为对象的第一个参数。通常在 javascript 中，人们使用数组的 slice 方法。那么你可能会问自己那`arguments`是一个对象，并且没有那个方法。但是我们可以做以下解决方法：

```
var args = Array.prototype.slice.call(arguments, 1);
return func.apply(this, args); 
```

在 funcWrapper 中。通过将第一行转换为：

```
var args = [].slice.call(arguments, 1);
return func.apply(this, args); 
```

您也可以将其包装成这样的函数：

```
function _slice(obj, start, end) {
  return [].slice.call(obj, start, end);
} 
```

并像这样使用它：

```
var args = _slice(arguments, 1); 
```

请注意，在 ES6（未在浏览器中实现）中，这个问题是通过使用[rest 参数](http://wiki.ecmascript.org/doku.php?id=harmony:rest_parameters)来解决的：

```
function funcWrapper(func, ...args){
   return func.apply(this, args);
}; 
```

还有一件事，当您尝试包装构造函数时，请确保您也继承原型，否则您会陷入与此问题相同的陷阱：[jQuery logger plugin](https://stackoverflow.com/questions/11685407/jquery-logger-plugin/11697787#11697787)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T05:13:22.323

在此处查看此链接[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

“arguments 对象不是 Array。它类似于 Array，但除了长度之外没有任何 Array 属性。例如，它没有 pop 方法。但是它可以转换为真正的 Array：”

```
var args = Array.prototype.slice.call(arguments); 
```

尝试

```
function funcWrapper(func){
     var args = Array.prototype.slice.call(arguments, 1); // skip func parameter
     return func.apply(this, args);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T05:11:12.497

通过将完整`arguments`对象提供给`.apply`，您也提供了功能。

您需要排除第一个参数。

```
function funcWrapper(func) {
   var sliced = [].slice.call(arguments, 1);
   return func.apply(this, sliced);
} 
```

另一种解决方案是这样做：

```
function funcWrapper(func) {
   return func.call.apply(func, arguments);
} 
```

但这有点令人困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T05:12:08.073

因为`arguments`包含`[sum, 2, 3]`.

如果您知道要调用的函数接受 2 个参数，您可能会想要这样做：

```
return func.call(this, arguments[1], arguments[2]); 
```

如果您不知道参数的数量，可能：

```
var args = [];
for(var i = 1; i < arguments.length; i++)
    args.push(arguments[i]);
return func.apply(this, args); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T05:12:57.240

`return func.apply(this, arguments);`应该`return func.apply(this, Array.prototype.slice.call( arguments, 1 ));`

# automake - 告诉 automake 在安装之前或链接之后在程序上运行一些命令

> ID：12995161
> 
> 赞同：8
> 
> 时间：2012-10-21T05:09:56.243
> 
> 标签：automake

我想在安装二进制文件之前使用 automake 处理/修改它们。例如，我想将二进制文件中的符号提取到一个单独的文件和位置（像[这样](https://stackoverflow.com/questions/866721/how-to-generate-gcc-debug-symbol-outside-the-build-target)）。另一个示例是收集关键资产的 md5sum 以发布报告。

这是我拥有的简化（但具有代表性）的 Makefile.am：

```
abc_PROGRAMS = foo
foo_SOURCES = foo.cpp

pqr_PROGRAMS = bar
bar_SOURCES = bar.cpp

ALL_SYMS := $(PROGRAMS:%=%.sym)

sym_DATA = $(ALL_SYMS)

# A convenient target such as "make foo.sym" will trigger this rule:
$(ALL_SYMS): %.sym : %
   ...
   objcopy --preserve-dates --only-keep-debug $< $@
   objcopy --preserve-dates --strip-all --add-gnu-debuglink=$@ $<
   ... 
```

在安装过程中，我尝试了几种方法来挂钩我的脚本，但收效甚微。

1.  一种可能的方法是使用 install-exec-local：

    ```
    install-exec-local: $(ALL_SYMS) 
    ```

    install-exec-local 的问题在于，当我使用：“make install -j”时，install-exec-local 目标与安装并行运行，因此二进制文件 foo 和 bar 被安装到它们各自的目标目录中，甚至当它们被 %.sym 规则修改时，可能会弄乱已安装的文件。但是，如果不使用 -j，则此解决方案有效。我想我是否可以利用使用 -j 的优势。

2.  另一种可能的方法是使用 install-exec-hook：

    ```
    install-exec-hook: $(ALL_SYMS) 
    ```

    install-exec-hook 的问题是程序 foo 和 bar 在我有机会使用 %.sym 规则修改它们之前已经安装。除了 foo 和 bar 安装在不同的位置之外，我没有通用的方法来获取它们的目标位置，同时编写合适的 install-exec-hook 规则。

3.  另一种可能的方法是定义 STRIP_PROGRAM 或类似的东西，但这并不能很好地工作，因为我认为它不适用于“make install”目标，而只能用于“make install-strip -j”。我没有走这条路，因为我们的构建脚本使用“make install -j”。

4.  另一种方法是创建在构建时间而不是安装时间运行的构建规则。但是这个真的很麻烦，它在构建目录中创建了很多文件，我想避免它。此外，项目中的新人在添加新程序时可以轻松绕过这些精心调整的精心安排。

    ```
    abc_PROGRAMS = foo
    foo : foo.tmp
    foo.sym : foo
    noinst_PROGRAMS = foo.tmp
    foo_tmp_SOURCES = foo.cpp

    pqr_PROGRAMS = bar
    bar : bar.tmp
    bar.sym : bar
    noinst_PROGRAMS += bar.tmp
    bar_tmp_SOURCES = bar.cpp

    sym_DATA = foo.sym bar.sym

    foo bar: % : %.tmp
    ...
    cp $@ $<
    objcopy --only-keep-debug $@ $@.sym
    objcopy --strip-all --add-gnu-debuglink=$@.sym $@ 
    ```

如果 automake 提供了一个在安装程序之前或在构建程序之后运行的钩子，我会喜欢的。

stackoverflow.com 社区确实对 Internet 上可用的解决方案的质量产生了影响。我相信一定有人遇到过和我类似的问题。我正在等待有关此问题的良好解决方案或行业最佳实践。最后，对于未能使问题更简短或更易于理解，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-09T15:59:33.720

> 告诉 automake 在安装之前或链接之后在程序上运行一些命令

“刚刚链接后”部分可以使用`libtool`'`postlink_cmds`步骤完成。[`postlink_cmds`记录在案](https://www.gnu.org/software/libtool/manual/html_node/libtool-script-contents.html#index-postlink_005fcmds)：

> ***变量：postlink_cmds***
> 
> 完成链接程序所需的命令。postlink_cmds 在程序链接后立即执行。postlink_cmds 中出现的任何字符串@OUTPUT@ 都会在执行之前替换为创建的可执行文件的名称（即，如果生成了包装器，则不是包装器）。同样，@TOOL_OUTPUT@ 被@OUTPUT@ 的工具链格式替换。通常禁用（即 postlink_cmds 为空）。

* * *

下面是`configure.ac`用于`sed`修补`libtool`和创建`postlink_cmds`之后的 a 的一部分`libtool`。我们需要它在 Solaris 共享对象上应用软件功能，因为我们通过映射文件设置它们的链接选项`-M <mapfile>`被剥离（显然[`libtool`保留了几乎所有`-M`选项](https://stackoverflow.com/a/47205778/608639)）。

虽然`libtool`有一个`postlink_cmds`我们不知道如何更传统地设置它。也许有一个`AC_XXX`地方可以做到这一点。

```
#############################################################################
## Hack ahead. GNU's libtool does not honor our '-M cryptopp.mapfile' in AM_LDFLAGS
## for the libcryptopp.so recipe. Many thanks to John Martin of Oracle for help wielding
## elfedit. The hw_cap = 0x1800 is SSE2 SSE and its needed for old hardware when new
## instructions are present, like SSE4.1, SSE4.2, CLMUL, AES, RDRAND, RDSEED and SHA.
## TODO: determine if we are allowed to hijack libtool's postlink_cmds function. It
## works well but we may be violating a policy somewhere along the line.

if test "$IS_SUN_OS" -ne "0" && test "$IS_SUN_COMPILER" -ne "0"; then
   if test "$IS_IA32" -ne "0"; then

      echo "Adding postlink script"
      rm -f postlink.sh 2>/dev/null
      echo "echo \"Fixing shared object capabilities\"" >> postlink.sh
      echo "elfedit -e 'cap:hw1 0x1800' .libs/cryptest" >> postlink.sh
      echo "elfedit -e 'cap:hw1 0x1800' .libs/cryptestcwd" >> postlink.sh
      echo "elfedit -e 'cap:hw1 0x1800' .libs/libcryptopp.so.6.0.0" >> postlink.sh
      echo "" >> postlink.sh
      chmod +x postlink.sh

      echo "Adding postlink script to libtool postlink_cmds"
      sed 's|postlink_cmds=""|postlink_cmds="./postlink.sh"|g' libtool > libtool.fixed
      mv libtool.fixed libtool
      chmod +x libtool
   fi
fi 
```

* * *

在使用 hack 之前`sed`，我尝试`postlink_cmds`在`configure.ac`. 不幸的是，它不起作用，导致`postlink_cmds=""`生成`libtool`. 这是*不起作用*的东西：

```
if test x"$postlink_cmds" = "x"; then
    postlink_cmds="./postlink.sh"
else
    postlink_cmds="~ ./postlink.sh"
fi 
```

这`~`是由于[`libtool`手册](https://www.gnu.org/software/libtool/manual/html_node/libtool-script-contents.html#index-postlink_005fcmds)说明：

> ... 用于命名保存 shell 命令以进行延迟评估的变量的约定是使用后缀 _cmd 需要单行有效的 shell 脚本，而后缀 _cmds 可能会延迟多行 shell 脚本以供以后评估. 按照惯例，_cmds 变量在必要时用 ~ 字符分隔评估单元。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:54:26.733

按照选项 #3 的思路，在这种情况下，您可能会考虑设置其中一个`INSTALL`变量（INSTALL、INSTALL_DATA、INSTALL_PROGRAM、INSTALL_SCRIPT）并将其指向执行您想要的操作的脚本，并`install`在最后一步调用实数。

# php - 将 php post 数据添加到 mySQL 字符串的正确语法

> ID：12995162
> 
> 赞同：0
> 
> 时间：2012-10-21T05:10:01.547
> 
> 标签：php, mysql, syntax

我有一个表单的字段帖子：

```
<form action="post.php" method="post">
<input type="text" name="foo" /> 
```

我试图插入到 post.php中数据库中`foo`命名的一个小的 mySql 表中。`'datatable'``'mydatabase'`

此字符串适用于我在表中添加数据行：

```
mysql_query('INSERT INTO 'mydatabase'.'datatable' ('data') VALUES (\'testabc\');'); 
```

所以我知道我的连接字符串正在工作。但是，我无法弄清楚如何将实际的帖子数据`($_POST['foo'])`插入到我的表中。我尝试过字符串，例如：

```
mysql_query('INSERT INTO 'mydatabase'.'datatable' ('data') VALUES (\'' + $_POST['foo'] + '\');'); 
```

但无法找出正确的语法来完成这项工作。你们中的任何一个聪明人都可以帮助提示我正确的方向吗？

非常感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:13:35.243

PHP`.`用于连接，而不是`+`.

但是，你真的不应该使用`mysql_*`. 我强烈建议[PDO](http://us1.php.net/manual/en/book.pdo.php)。它使用简单，可以保护您免受注射（您目前容易受到注射）。您可能还需要考虑启用了魔术引号，因此`stripslashes`发布数据可能是合适的。 `trim`. 通常也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:11:46.833

您的问题是您正在使用`+`连接查询字符串的各个部分。在 php 中，字符串连接是使用点完成的`.`。你能做的是

```
mysql_query('INSERT INTO `mydatabase`.`datatable` (`data`) VALUES (\'' . mysql_real_escape_string($_POST['foo']) . '\');'); 
```

但是就像在下面的评论中提到的那样，您确实应该使用 PDO。

# maven - 何时应显式定义 maven 中的交互依赖项？

> ID：12995163
> 
> 赞同：5
> 
> 时间：2012-10-21T05:10:08.037
> 
> 标签：maven, maven-3

很多像spring这样的开源项目都包含多个模块，当在maven中添加这些模块作为依赖项时，我应该明确定义每个依赖项还是让传递依赖管理来做它的事情。例如，以下两种情况中的哪一种是最佳实践。

**案例 1：包括我想要的最高级别的功能**

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency> 
```

**案例 2：将框架的每个部分都包含为显式依赖项**

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
            .... other dependencies that are transitively resolved by maven
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency> 
```

最佳实践案例 1 或案例 2 哪个是最佳实践，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T06:08:54.257

这取决于您是否声明了使用相同依赖项的任何其他依赖项（在本例中为 Spring）。如果您只需要顶级依赖项，请声明它。如果您使用的其他依赖项依赖于传递依赖项的特定版本，请将其声明为显式依赖项。

以 Spring 为例：如果您声明`spring-webmvc`然后决定需要另一个 spring 包，例如`spring-security`，明确定义它们都依赖的任何共享依赖项可能是个好主意，这样您就知道哪个版本包含在您的项目。

基本上，声明您需要特定版本的任何内容，然后让 maven 处理其余部分，直到您需要排除版本或声明特定版本。这就是构建 maven 的目的，所以让它管理依赖关系，直到它做出错误的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:22:34.127

我认为＃1更好，因为从官方**[文档](http://blog.springsource.org/2009/12/02/obtaining-spring-3-artifacts-with-maven/)**中可以清楚地看出这`spring-webmvc`取决于所有弹簧模块。

```
<!--
    Spring MVC for Servlet Environments (depends on spring-core, spring-beans, spring-context, spring-web)
    Define this if you use Spring MVC with a Servlet Container such as Apache Tomcat (org.springframework.web.servlet.*)
-->
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-webmvc</artifactId>
  <version>${org.springframework.version}</version>
</dependency> 
```

您还可以查看**[pom](http://repo1.maven.org/maven2/org/springframework/spring-webmvc/3.1.2.RELEASE/spring-webmvc-3.1.2.RELEASE.pom)**以查看所有依赖项都`spring-webmvc`依赖于与它所在的版本相同的版本。

因此，至少对于这个用例，我认为不需要在您的 pom 中明确声明它们。

# gcc - 如何使用 CMake 安装 GCC 运行时库？

> ID：12995166
> 
> 赞同：5
> 
> 时间：2012-10-21T05:10:48.800
> 
> 标签：gcc, cmake, mingw

我已经编译了一个 C++ 程序，它在我的计算机上完美运行，但是如果我的朋友尝试启动该程序，它会说`libgcc_s_sw2-1.dll`丢失了。如何使用 CMake 在程序中包含所有必需的 GCC 运行时库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T13:36:00.140

正如 rubenvb 正确回答：libgcc 是必需的，或者您应该添加`CMAKE_EXE_LINKER_FLAGS=-static`到您的 CMakeLists.txt。

作为替代方案，您可以尝试在 MinGW 安装中找到 libgcc_s_sw2-1.dll 并使用[InstallRequiredSystemLibraries](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:InstallRequiredSystemLibraries)将其“打包”到您的安装中。这也很好地与[CPack](http://www.cmake.org/cmake/help/v2.8.8/cpack.html)集成。

例如，在我自己的代码中，我有：

```
if( MINGW )
    message( STATUS "    Installing system-libraries: MinGW DLLs." )
    get_filename_component( Mingw_Path ${CMAKE_CXX_COMPILER} PATH )
    set( CMAKE_INSTALL_SYSTEM_RUNTIME_LIBS ${Mingw_Path}/mingwm10.dll ${Mingw_Path}/libgcc_s_dw2-1.dll ${Mingw_Path}/libstdc++-6.dll )
endif( MINGW )
include( InstallRequiredSystemLibraries ) 
```

稍后，在准备安装或包的部分：

```
# Actually install it when make install is called.
# Note, this works with CPack
if( CMAKE_INSTALL_SYSTEM_RUNTIME_LIBS )
    install( PROGRAMS ${CMAKE_INSTALL_SYSTEM_RUNTIME_LIBS} DESTINATION bin COMPONENT System )
endif( CMAKE_INSTALL_SYSTEM_RUNTIME_LIBS ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T09:51:29.167

所有使用 GCC 编译的程序都需要 libgcc dll。如果您不想在程序中重新分发此 DLL，则必须通过传递`-static`给链接器或在 CMake 中静态链接：

```
CMAKE_EXE_LINKER_FLAGS=-static 
```

这是特定于 GCC 的。

# objective-c - iOS（iPad）应用程序加载后在模拟器中崩溃

> ID：12995172
> 
> 赞同：1
> 
> 时间：2012-10-21T05:11:41.857
> 
> 标签：objective-c, ipad, ios6

昨天，我的应用程序在模拟器上运行良好。我向 XIB 添加了背景图像，并调整了一些控件的位置。现在，当我尝试运行它时，它会崩溃：

> 2012-10-20 21:54:00.280 Ring It Up Scorer[580:11303] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键值编码关键 autoBlue1Col。***第一掷调用堆栈：（0x1ca6012 0x10e3e7e 0x1d2efb1 0xb90711 0xb11ec8 0xb119b7 0xb3c428 0x2480cc 0x10f7663 0x1ca145a 0x246bcf 0x24898d 0x2aceb 0x2b002 0x29ed6 0x3b315 0x3c24b 0x2dcf8 0x1c01df9 0x1c01ad0 0x1c1bbf5 0x1c1b962 0x1c4cbb6 0x1c4bf44 0x1c4be1b 0x297da 0x2b65c 0x1ced 0x1c15）的libc ++ abi.dylib：终止叫做抛出一个异常

autoBlueCol1 是 uiTextField 的子类的一个实例。我有 4 个类的文本字段，它崩溃的应该是它创建的第 3 个。

子类是：

```
#import "SPRalphaTextField.h"

@implementation SPRalphaTextField

-(void)awakeFromNib
{

   [super awakeFromNib];

    self.delegate = self;

}

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

    if([string length]==0)
    {
        return YES;
    }

    if ([[textField text] length] + [string length] - range.length > 1)
    {
        return NO;
    }

    /*  limit to only ABC characters  */
    NSCharacterSet *myCharSet = [NSCharacterSet characterSetWithCharactersInString:@"abcABC"];
    for (int i = 0; i < [string length]; i++)
    {
        unichar c = [string characterAtIndex:i];
        if ([myCharSet characterIsMember:c])
        {
            return YES;
        }
    }

    return NO;
}

@end 
```

这应该是一个简单的程序。我只有一种看法。我有 3 个不同的子类，但这些都是文本框。我确定我可能需要为此添加更多代码。只要让我知道有什么帮助，我会添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:20:15.493

看起来您正在尝试在某处设置未定义键的值。这是错误：

**[setValue:forUndefinedKey:]：这个类对于键 autoBlue1Col 不符合键值编码**

您是否在应用程序的任何位置设置 autoBlue1Col 的值？如果是这样，请确保密钥的名称正确或存在。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T18:39:26.067

我发现我是通过尝试解决另一个问题来创建这个问题的。我在应用程序属性中设置了主界面。我这样做是因为该应用程序挂在加载屏幕上，所以我认为这就是问题所在。我将针对该问题创建一个新问题。

# php - 有没有办法不在每个文件中使用包含语句？

> ID：12995177
> 
> 赞同：3
> 
> 时间：2012-10-21T05:12:14.107
> 
> 标签：php, hook

我想让我的网站在每次运行任何页面时都尝试验证用户，而不必将包含添加到每个文件中。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:15:17.070

使用`auto_prepend_file`，一个ini设置。这会自动包含一个文件。不过，请注意您放入该文件中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:10:21.460

在 index.php 中使用 switch whit case：

```
switch (isset($_GET["page"])?$_GET["page"]:""){

        case 'user': 
                include 'user.php';
        break; 

        default:                
        case '':  
        case 'index': 
                include 'main.php';
        break;
} 
```

并调用您的页面：`http://your-website.com/index.php?page=user`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:06:24.287

您可以尝试在索引或引导文件中使用自动加载程序，例如：

```
// Autoload any files that are required
function autoLoad($classToLoad)
{
    if(file_exists('file/path/' . $classToLoad . '.php'))
    {
    require('file/path/' . $classToLoad . '.php');
    }
    else if(file_exists('other/file/path/' . $classToLoad . '.php'))
    {
        require('other/file/path/' . $classToLoad . '.php');
    }
}
spl_autoload_register('autoLoad'); 
```

[您可以在PHP 手册](http://php.net/manual/en/language.oop5.autoload.php)中找到有关自动加载的更多信息 。

# java - 如何在java中临时标记对象

> ID：12995178
> 
> 赞同：0
> 
> 时间：2012-10-21T05:12:18.040
> 
> 标签：java, jvm

有没有办法在运行时用反射标记给定的java对象（不是类！）？有什么方法可以修改对象的任何内容，以便我们下次看到它时可以识别它？

或者这种识别的唯一方法是将对象存储到 IdentityHashMap 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:19:25.350

Java 实例默认不支持动态元数据。但是，即使他们这样做了，您所描述的也是一种反模式。

如果您需要围绕实例创建元数据，有很多方法可以做到，但最简单的方法是在集合中注册对象并以这种方式附加元数据，无论是否持久。

您可以在运行时使用动态代理来实现这一点，但我再次建议不要这样做。如果您正在构建一个真正需要此功能的系统，那么在您的特定应用程序类上添加一些元数据的基础对象将很容易实现，不会花费您任何费用，并且复杂性较低。

# ruby-on-rails - Rails 加载类更改而不重新启动服务器

> ID：12995184
> 
> 赞同：3
> 
> 时间：2012-10-21T05:13:28.027
> 
> 标签：ruby-on-rails, ruby

我有一个类似这样的导轨设置。

应用程序/服务/TestService.rb

```
class TestService

  def self.doSomething
    return 'Hello World!'
  end

end 
```

我在控制器中使用这个文件。

```
require 'TestService'

class IndexController < ApplicationController

  def index
    @message = TestService.doSomething
  end

end 
```

我还在 config 文件夹中的 application.rb 中添加了这个，以便在服务文件夹中自动加载类。

```
config.autoload_paths += %W(#{config.root}/app/service) 
```

但是该应用程序似乎没有获取对 TestService 类的更新。我该如何解决这个问题，以便在不重新启动服务器的情况下显示 TestService 类中的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:26:49.407

`require`尝试加载包含可重新加载常量的文件时不要使用。

通常，您无需执行任何特殊操作即可使用该常量。您将直接使用常量，而无需使用`require`或其他任何东西。

但是，如果您想干净利落地使用您的代码，`ActiveSupport`可以为您提供一种*不同*的方法来加载这些文件：`require_dependency`.

```
require_dependency 'test_service'

class IndexController < ApplicationController
  ...
end 
```

尽管令人困惑的是，您会尝试干净利落并显式加载包含`TestService`但不显式加载包含`ApplicationController`...的文件。

您不需要更改`autoload_paths`配置。

* * *

# 更新 1

为了让 Rails 找到并加载您的常量（类和模块），您需要执行以下操作：

您必须确保应用程序中的每个可重新加载常量都位于具有正确文件名的文件中。该文件必须始终位于 的某个子目录中`app`，例如`app/models`or`app/services`或任何其他子目录。如果常量名为`TestService`，则文件名必须以 . 结尾`test_service.rb`。

算法是：`"TestService".underscore + ".rb" #=> "test_service.rb"`.

```
filename_glob = "app/*/" + the_constant.to_s.underscore + ".rb" 
```

因此，如果常数为`TestService`，则 glob 为`app/*/test_service.rb`。所以坚持常数`app/services/test_service.rb`会起作用，`app/models/test_service.rb`尽管后者是不好的形式。如果常量是`SomeModule::SomeOtherModule::SomeClass`，则需要将文件放入`app/*/some_module/some_other_module/some_class.rb`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:14:54.077

你说你的文件在`app/server`，但你正在自动加载`app/service`。哪个是对的？

将您的文件重命名为`app/service/test_service.rb`，自动加载器应该可以工作。Rails 在你的自动加载路径中寻找 snake_cased 文件名。`require`一旦自动加载行为正确，您也不需要手册。

# android - Android - 通过 Intent 拍摄照片并使用自定义名称将它们保存到自定义目的地

> ID：12995185
> 
> 赞同：9
> 
> 时间：2012-10-21T05:13:32.387
> 
> 标签：android, camera, android-sdcard, android-camera-intent

我有一个程序可以通过 Intent 打开相机拍照。这么多部分已经很好了。但是，我希望它以某个文件名保存到某个文件夹（文件名是可选的，但它真的很有帮助）。

这就是我到目前为止所拥有的。

这是打开相机的代码行：

```
//TODO camera stuff.
Intent openCam = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

//The two lines of code below were commented out at first.
//They were eventually added when I tried to save it with a custom name and destination
fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image
openCam.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

startActivityForResult(openCam, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

结果处理程序在这里：

```
//TODO handle result
if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
   if (resultCode == RESULT_OK) {
         // Image captured and saved to fileUri specified in the Intent
         Toast.makeText(this, "Image saved to:\n" +
                     data.getData(), Toast.LENGTH_LONG).show();
            System.out.println("I am here");

   } 
   else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
   } 
   else {
            // Image capture failed, advise user
   }
} 
```

在我实现以下两种方法之前，代码运行良好。但是，它以默认文件名（时间戳版本）保存到默认文件夹。吐司显示“图像已保存到：null”，因为我还没有设置那部分。

所以这里是应该处理自定义文件名和目标的方法

```
/** Create a file Uri for saving an image or video */
private static Uri getOutputMediaFileUri(int type){
      return Uri.fromFile(getOutputMediaFile(type));
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    Environment.getExternalStorageState();

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "MyCameraApp");
    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");
    } else {
        return null;
    }

    return mediaFile;
} 
```

*这些代码来自 developer.android.com 的相机指南。

上面的代码设法打开相机并拍照并保存它们。但是，当用户决定停止拍照并按返回键时，就会出现问题。发生的情况是应用程序强制关闭并给出此错误：

```
10-21 12:44:33.699: E/AndroidRuntime(13016): FATAL EXCEPTION: main
10-21 12:44:33.699: E/AndroidRuntime(13016): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=null} to activity {com.AIC.QRCodeScanner/com.AIC.QRCodeScanner.QRCodeScanner}: java.lang.NullPointerException
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.app.ActivityThread.access$2000(ActivityThread.java:117)
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.os.Handler.dispatchMessage(Handler.java:99)
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.os.Looper.loop(Looper.java:123)
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.app.ActivityThread.main(ActivityThread.java:3691)
10-21 12:44:33.699: E/AndroidRuntime(13016): at java.lang.reflect.Method.invokeNative(Native Method)
10-21 12:44:33.699: E/AndroidRuntime(13016): at java.lang.reflect.Method.invoke(Method.java:507)
10-21 12:44:33.699: E/AndroidRuntime(13016): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
10-21 12:44:33.699: E/AndroidRuntime(13016): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
10-21 12:44:33.699: E/AndroidRuntime(13016): at dalvik.system.NativeStart.main(Native Method)
10-21 12:44:33.699: E/AndroidRuntime(13016): Caused by: java.lang.NullPointerException
10-21 12:44:33.699: E/AndroidRuntime(13016): at com.AIC.QRCodeScanner.QRCodeScanner.onActivityResult(QRCodeScanner.java:379)
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.app.Activity.dispatchActivityResult(Activity.java:3934)
10-21 12:44:33.699: E/AndroidRuntime(13016): at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
10-21 12:44:33.699: E/AndroidRuntime(13016):    
... 11 more 
```

它指向的线将是这条线（第 379 行）：`data.getData(), Toast.LENGTH_LONG`

`/Pictures/MyCameraApp`但是，这些文件与拍摄的 Instagram 照片一起保存在该文件夹中。

所以问题是： 1.有没有办法让 onActivityResult 正常工作？我知道我可以诉诸使用 startActivity 以免杀死应用程序。2\. 有没有办法只用相机拍一张？因此，在用户保存照片后，应用程序会返回到主要活动。3\. 另外，我可以将它保存到我自己的文件夹中吗？我不确定它为什么将照片保存在 中`/Pictures/MyCameraApp`，我希望它只保存到`/MyCameraApp`.

我想我在这里错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-25T13:43:32.967

这是使它工作的代码：

```
//camera stuff
Intent imageIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());

//folder stuff
File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
imagesFolder.mkdirs();

File image = new File(imagesFolder, "QR_" + timeStamp + ".png");
Uri uriSavedImage = Uri.fromFile(image);

imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);
startActivityForResult(imageIntent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

它打开相机并拍摄一张照片（在用户保存拍摄的图像后它会返回到主要活动。它将图像保存到指定的文件夹。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T05:25:27.917

您可以在文件夹中获取照片，但为此您必须使用以下代码传递带有意图的文件名

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
File out = Environment.getExternalStorageDirectory();
out = new File(out, imagename);
i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(out));
startActivityForResult(i, CAMERA_RESULT); 
```

out 文件包含完整路径和文件名。

现在处理 onActivityResult() 方法并检查结果的状态，如果结果为 RESULT_OK，然后使用您提供的文件名来访问照片。

您可以参考[How to get camera result as a uri in data 文件夹？](https://stackoverflow.com/questions/10042695/how-to-get-camera-result-as-a-uri-in-data-folder)更多选择。

**编辑**

您将`data.getData()`变为 null，因为如果您通过意图传递文件 url，它将为 null。实际上，您已经有了与 Intent 一起传递的文件路径，那么为什么要尝试从包中获取它`onActivityResult()`呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-14T16:00:43.457

这可能对你有帮助

```
File file=new File(Environment.getExternalStorageDirectory(),"file name");

button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        opencam();
    }
});

protected void opencam() {
    Intent in = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);    
    in.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(file));
    startActivityForResult(in,1);
} 
```

# c - 如何在 C 中创建具有设置权限/时间/等的文件？

> ID：12995189
> 
> 赞同：2
> 
> 时间：2012-10-21T05:14:09.623
> 
> 标签：c, file-io, file-permissions

我有一个实现存档的程序，我需要从创建的存档中提取文件。我打算通过创建一个新文件来做到这一点。我已经有了文件名/用户 ID/组 ID/日期/模式（权限）/等。那么我将如何创建具有这些给定属性的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:29:38.423

创建文件时，会自动设置某些属性。这包括所有者和时间/日期。您可以指定要创建的文件的名称，但该文件自动归您所有，并继承您的用户 ID 和组 ID（即执行程序的用户 ID） - 这是系统生成的，出于安全原因这样做（如果您无权访问其他用户的凭据怎么办？）。但是，一旦创建了文件，您就可以更改所有者或组 (chown/chgrp) 甚至更改文件权限 (chmod)。如果您希望执行单个命令，您可以简单地附加这些命令（使用 ;）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:31:42.493

您几乎需要三个系统调用来完成您的任务：

*   [`chmod`](http://www.kernel.org/doc/man-pages/online/pages/man2/chmod.2.html)更改权限。
*   [`chown`](http://www.kernel.org/doc/man-pages/online/pages/man2/chown.2.html)更改所有权（用户和/或组）。
*   [`utime`](http://www.kernel.org/doc/man-pages/online/pages/man2/utime.2.html)更改文件的上次访问和修改时间。

# log4j - 在 Liferay 中使用 log4j 开发 JSP 页面只是为了查看服务器日志

> ID：12995190
> 
> 赞同：0
> 
> 时间：2012-10-21T05:14:10.483
> 
> 标签：log4j, tomcat7, liferay-6

我想开发一个简单的 JSP 页面，我可以在其中查看服务器的日志。这不会是一个 Portlet，只是一个普通的 JSP，我可以将它放在根文件夹中并点击一个 URL。我正在使用 Log4j。

我有这个应用程序作为普通的 Java EE，我可以在普通的 Tomcat 服务器 7.0.27 中运行它。

但是，我不知道如何在 Liferay Tomcat 服务器上运行它。问题是如何修补`SystemStatusAppender.java`文件。我看不到我的 JSP 上的任何日志以及我的`log4j.jar`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:21:45.310

`where to keep my log4j jar`

您的 JSP 仅由您的 Tomcat 服务器提供服务，请将 Jar 保存在您的 Applciation->`WEB-INF/Lib`或 Tomcat 服务器类路径 ( `CATALINA_HOME/common/lib directory`)

`I am not able to see any logs on my jsp`,

我认为您需要以实用的方式打开日志文件并显示内容，例如

```
 <%
      String fileName = System.getProperty("catalina.base") + "/logs/myApp.log"
      BufferedReader reader= new BufferedReader(new FileInputStream(cfileName));
      String line;
      while((line = reader.readLine()) != null) {
          out.println(line);
      }
      reader.close();
   %> 
```

# c# - 如何在不通过参数一遍又一遍地传递 GameTime 的情况下使用它？

> ID：12995197
> 
> 赞同：1
> 
> 时间：2012-10-21T05:15:39.563
> 
> 标签：c#, parameters, xna, parameter-passing

我希望能够使用`GameTime`而无需每次在所有方法的参数中显式输入其名称。它只是在代码中看起来不太好。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:46:36.137

很好地传递参数是 OOP 的基础，但一个建议是有一个用 GameTime 初始化的基类，然后从它扩展所有类。这样您就可以作为受保护的成员访问它。

```
public class BaseClass 
{
    protected BaseClass(GameTime gt) 
    {
        Time = gt;
    }

    protected GameTime Time {private set; protected get;}

}

public class SomeOtherClass : BaseClass
{
    public SomeOtherClass(GameTime gt) : base(gt)
    {
    }

    public void DoSomething() 
    {
        //can access Time here
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:50:02.913

你可以通过别的东西。我个人通常这样做：

```
float seconds = (float)gameTime.ElapsedGameTime.TotalSeconds;
something.Update(seconds);
otherThing.Update(seconds); 
```

这将使您不必在每次要使用它时以秒为单位提取经过的时间。

* * *

如果您想节省一些打字时间，可以这样做：

```
interface IHasUpdate { void Update(float seconds); } 
```

然后，如果您`IHasUpdate`在类上实现接口，只需单击一两下或快捷键，您就可以让 Visual Studio 为`Update`. 这具有额外的优势，您将能够推理`IHasUpdate`.

* * *

如果你发现自己不得不传递很多“东西”，你可以创建一个这样的结构：

```
struct UpdateContext { float seconds; PlayerInput input; SomethingElse blah; } 
```

这还有一个额外的优势，即如果您的方法需要新参数，您可以轻松地将新内容添加到“更新上下文”中`Update`。

* * *

而且，当然，您通常实际上不需要知道绘图的时间，因此您可以`Draw`完全跳过将它传递给方法。

* * *

除了传递参数之外，做*其他*事情确实**不是**一个好主意，因为从概念上讲，您拥有的是特定于给定方法调用“树”的数据。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:28:08.443

具有公共静态属性 GameTime 的全局静态类，它将在每个 Game.Update() 开始时更新。然后所有对象将通过此属性访问该变量。但是，这被认为是一种不好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T06:07:38.297

我刚刚发现`GameTime`在主 Update 方法执行过程中不会改变，所以我可以安全地在本地 GameTime 变量中使用它的副本，如下所示：

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    public GameTime gt;

    /* ... */    

    protected override void Update(GameTime gameTime)
    {
        gt = gameTime;

    // the rest of the Update method
    }
} 
```*

# ruby-on-rails - 骨干搬运轨道虚拟场

> ID：12995202
> 
> 赞同：1
> 
> 时间：2012-10-21T05:16:02.547
> 
> 标签：ruby-on-rails, backbone.js

我在我的模型中添加了一个计算当前进度的方法。我还覆盖了 as_json 方法以在我的响应中包含虚拟字段。

```
def progress
   //code to get progress
end

def as_json(options = { })
  super((options || { }).merge({
    :methods => [:progress]
  }))
end 
```

我现在遇到的问题是我得到一个 UnknownAttributeError ，因为主干正在尝试提交“进度”字段。

```
ActiveRecord::UnknownAttributeError (unknown attribute: progress): 
```

我尝试将此添加到控制器中更新方法的第一行

```
params.delete('progress') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:34:20.793

将您的进度方法从您的`attr_accessible`线路中取出，这应该可以解决问题。

我遇到了同样的问题，ThoughtBot 支持人员（[Backbone.js on Rails](https://learn.thoughtbot.com/products/1-backbone-js-on-rails)）帮助了我（强烈推荐这本书，附带对您的应用程序的支持）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:08:36.847

它是嵌套的，所以我必须这样做

```
params[:assignment].delete('progress') 
```

我还将它添加到模型中

```
attr_reader :progress 
```

# c++ - Allegro 和 Code::Blocks 的自动完成功能

> ID：12995205
> 
> 赞同：3
> 
> 时间：2012-10-21T05:16:33.857
> 
> 标签：c++, codeblocks, allegro5

我之前用 msvc++ 2010 尝试过 Allegro 5，它在输入像 al_map_rgb 这样的函数时为我提供了函数定义，而在 code::blocks 中我没有得到这样的东西。

我从一个问题中了解到 Allegro 使用宏来定义函数，因此 Code::Blocks 无法将其用于自动完成。

如何在 Code::Blocks 中启用该功能？[如果可能的话]

PS。[http://forums.codeblocks.org/index.php?topic=15728.0](http://forums.codeblocks.org/index.php?topic=15728.0)，在这个讨论中，他们谈到为 Allegro 创建一个包含所有函数签名的单独头文件，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:36:47.753

要制作包含所有签名的标题，您必须遍历每个 allegro 函数并将其添加到标题中（例如 allegro_prototypes.h）

例如：

```
ALLEGRO_FILE *al_fopen(const char *path, const char *mode);
void al_fclose(ALLEGRO_FILE *f);
size_t al_fread(ALLEGRO_FILE *f, void *ptr, size_t size); 
```

对 allegro 中的每个函数继续执行此操作。需要做很多工作，但如果您非常依赖自动完成，可能会值得。您将需要大约 750 个原型。

# javascript - Windows 应用商店应用程序/ Metro 应用程序：ListView 数据绑定错误

> ID：12995208
> 
> 赞同：0
> 
> 时间：2012-10-21T05:17:16.817
> 
> 标签：javascript, microsoft-metro, windows-store-apps, windows-store

我正在开发 Windows Store App/Metro UI 应用程序，它从 AppSettings 获取数据并将这些数据绑定到 ListView 中。这是**data.js的代码**

```
(function () {
    "use strict";

    var dataSource = new Array();
    var dataList = new WinJS.Binding.List();

    var appData = Windows.Storage.ApplicationData.current;
    var roamingSettings = appData.localSettings;
    var json = roamingSettings.values["reminderList"];
    if (json != undefined) {
        dataSource = JSON.parse(json);

        for (var i in dataSource) {
            var rem = dataSource[i];
            dataList.push(rem);
        }

    }
    // Create a namespace to make the data publicly
    // accessible. 
    var publicMembers =
        {
            itemList: dataList
        };
    WinJS.Namespace.define("MyData", publicMembers);
})(); 
```

这是我使用的 ListView 的代码。

```
<div id="basicListView" data-win-control="WinJS.UI.ListView" 
            data-win-options="{ itemDataSource : MyData.itemList.dataSource, itemTemplate:select('#mediumListIconTextTemplate') }"> 
```

但是当存储中有一项时，它在 ListView 中显示为**未定义。**当 AppSettings 中有多个项目时，它会给我以下错误。

```
{
    "exception": null,
    "error": [
        [{
            "description": "Out of stack space",
            "number": -2146828260,
            "stack": "Error: Out of stack space\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)"
        }]
    ],
    "promise": {
        "_oncancel": null,
        "_nextState": null,
        "_state": {
            "name": "error",
            "done": null,
            "then": null
        },
        "_listeners": null,
        "_value": [
            [{
                "description": "Out of stack space",
                "number": -2146828260,
                "stack": "Error: Out of stack space\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)\n   at getProperty (ms-appx://microsoft.winjs.1.0/js/base.js:8283:13)\n   at get (ms-appx://microsoft.winjs.1.0/js/base.js:8566:36)"
            }]
        ],
        "_isException": false,
        "_errorId": 7
    },
    "id": 7
} 
```

谁能指点我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:08:06.287

你的模板`mediumListIconTextTemplate`看起来如何？它是否与您用于构建数据列表的 JSON 对象匹配？我怀疑它是。

此外，当您说引发错误时，您能否提供堆栈跟踪？

如果您发布示例 JSON 以及`mediumListIconTextTemplate`.

# xml - 您如何从不公开提供 API 的其他网站获取 XML 数据以在您自己的 ios 应用程序中使用？

> ID：12995209
> 
> 赞同：0
> 
> 时间：2012-10-21T05:17:17.350
> 
> 标签：xml

您如何从其他网站获取 XML 数据以在您自己的 ios 应用程序中使用？没有任何公共 API 可供使用的网站。我是 xcode 和目标 c 的新手，请稍微详细解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:21:23.073

您必须编写自己的服务来抓取站点信息，将其转换为 XML，然后提供您的 API。这可能违反网站的条款和条件；您必须与内容所有者确认。

这并不理想，因为如果站点更改了布局，您将不得不不断更新您的爬虫；或者该站点可以简单地阻止您的刮板访问他们的服务器。

最好的解决方案是与内容所有者交谈并制定出许可他们数据的方法。他们可能有一个不公开的 API。

# c# - 如何将自定义结构的数组存储在文件中？

> ID：12995213
> 
> 赞同：1
> 
> 时间：2012-10-21T05:18:00.953
> 
> 标签：c#

我有一个简单的结构，如下。

```
public struct Structure
{
    public byte Style;
    public string Value1;
    public string Value2;
    public int Value3;
    public bool Active;
} 
```

我想使用可变大小将这个结构的数组存储为文件。该文件将在程序启动时自动加载，并随着程序的使用进行更新。我可以弄清楚如何在程序中使用它，我只是不确定我应该用来存储它的方法。我猜我应该为每个值使用带有前缀字节长度的二进制写入器？如果这是正确的，那么如何存储和加载 Structure[X] 数组的示例将非常有帮助。出于美学原因，我想将其保存在具有自定义扩展名的文件中（即：Array.ext），尽管我不反对任何其他将在启动之间以该格式存储数据的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:28:32.933

您可以添加`[Serializable]`到此并使用二进制序列化将数据序列化为字节数组。比您可以将其保存到文件中。

```
public static string Serialize(object o)
{
    using (var s = new FileStream())
    {
        _binaryFormatter.Serialize(s, o);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:28:33.023

你有几个选择。如果您需要以人类可读的格式存储文件，您可以使用 XML 或 JSON 序列化器/反序列化器。这是一个 XML 示例

```
public static void Serialize(Structure[] input) 
{
  var serializer = new XmlSerializer(input.GetType());
  var sw= new StreamWriter(@"C:\array.ext");
  serializer.Serialize(sw, input);
  sw.Close();
}    

public static Structure[] Deserialize() 
{
  var stream = new StreamReader(@"C:\array.ext");
  var ser = new XmlSerializer(typeof(Structure[]));
  object obj = ser.Deserialize(stream);
  stream.Close();
  return (Structure[])obj;
} 
```

如果你想使用二进制序列化器

```
public static void Serialize(Structure[] input) 
{
    var stream = new StreamWriter(@"C:\Array.ext");
    var bformatter = new BinaryFormatter();    
    bformatter.Serialize(stream, input);
    stream.Close();
}

public static Structure[] Deserialize() 
{
    var stream = new StreamReader(@"C:\array.ext");
    var bformatter = new BinaryFormatter();
    var obj = bformatter.Deserialize(stream);
    stream.Close();
    return (Structure[])object;
} 
```

您还需要标记您的`[Serializable]`课程

```
[Serializable]
public class Structure { //etc 
```

# ios - 如何判断特定蓝牙设备是否连接到我的 iOS 设备？

> ID：12995215
> 
> 赞同：0
> 
> 时间：2012-10-21T05:18:47.833
> 
> 标签：ios, bluetooth

我已经多次看到这个问题被问到 Android 上，但从来没有被问到过 iOS。有没有办法枚举当前连接的蓝牙设备，或者如果没有，测试特定的设备？我们正在尝试构建一个应用程序，该应用程序可以检测它何时失去与特定音频设备的连接。

作为记录，它实际上不需要对设备执行任何操作。它只需要知道它是否已连接。

另一种不太有用的方法是我们是否可以检测到哪个是当前选择的音频输出。唯一的缺点是技术上你可以连接到它并且仍然通过其他东西（耳机，AirPlay等）路由音频，所以它并没有真正给我们想要的东西，但总比没有好（如果这是可能的话。 )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:25:18.627

从 iOS 5.0 开始，您可以使用**CoreBluetooth**框架。看看**CBCentralManager**类。此类可让您检索已连接设备的列表。

# ruby-on-rails - RoR 脚本/插件安装选项“-r”.. 它有什么作用......可能是 Git 规范？

> ID：12995218
> 
> 赞同：1
> 
> 时间：2012-10-21T05:19:20.070
> 
> 标签：ruby-on-rails, ruby, git

所以我正在运行这些命令来安装特定版本的 rspec

```
ruby script/plugin install git://github.com/dchelimsky/rspec.git -r 'refs/tags/1.2.9'
ruby script/plugin install git://github.com/dchelimsky/rspec-rails.git -r 'refs/tags/1.2.9' 
```

“-r”选项有什么作用？（在每个命令中的 'refs/tags/1.2.9' 之前）

这是一个 git 选项吗？还是 ruby​​/ror 安装的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:27:34.350

如果我没记错的话，使用该`-r`参数只允许您指定要安装的 git 存储库的哪个分支，而不是当前的 master 分支。

它是一个安装参数，而不是一个 git 参数。

# javascript - Chrome 扩展管理 API，访问“installType”

> ID：12995220
> 
> 赞同：0
> 
> 时间：2012-10-21T05:19:49.237
> 
> 标签：javascript, google-chrome, google-chrome-extension, v8

通过阅读[http://developer.chrome.com/extensions/management.html](http://developer.chrome.com/extensions/management.html)如果我添加到我的权限清单中，我会得到这样的印象：

...“权限”：[“webRequest”，“存储”，“”，“管理”]，...

我现在应该能够做这样的事情：

```
if(chrome.management.get('installType') == "development") {
    DEVELOPMENT = true;
} 
```

但我收到的错误信息，

```
Error during management.get: Failed to find extension with id installType 
```

让我觉得它真的想要一个应用 id，比如：

```
chrome.runtime.id 
```

但签名很清楚，事实并非如此：

```
Error: Invocation of form management.get(string, string) doesn't match definition management.get(string id, optional function callback) 
```

所以我的基本问题是：我如何巧妙地做到这一点，以便如果我处于未打包（因此，我正在开发）模式，我可以设置一个标志，并做一些在扩展存储中不需要的其他东西（在我的情况，更改 Web 服务端点）？

我找不到一堆有关 management.get 的示例，所以我认为我上面的 .get 调用有缺陷，我的权限不正确，和/或 .get 上的错误消息被剪切和从 getAll 粘贴 :)

让我知道我该如何澄清这一点，我已经敲了一个小时的头，可能可以使用一些引导性问题；)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:51:56.623

installType 属性是 ExtensionInfo 结构的一部分，因此当您使用 get() 或 getAll() 获取扩展时，应为其设置此属性。

# python - 熊猫添加系列以保持流动总和

> ID：12995222
> 
> 赞同：1
> 
> 时间：2012-10-21T05:20:41.593
> 
> 标签：python, pandas

我刚刚开始使用 Python 并使用 pandas 编写一个小的股票投资组合应用程序。我遇到的问题是在我的仓位类中，它创建了 pandas Series 来表示基于交易的每只股票随着时间的推移所拥有的股票数量。因此，如果我在 2012 年 10 月 10 日买入 50 股 IBM 并在 2012 年 10 月 14 日卖出 10 股，我希望 IBM 的 position.shares 系列为：

*   2012 年 10 月 10 日：50
*   2012 年 10 月 11 日：50
*   2012 年 10 月 12 日：50
*   2012 年 10 月 13 日：50
*   2012 年 10 月 14 日：40
*   2012 年 10 月 15 日：40

我计划通过添加从交易日期到当前日期的系列，然后将这些系列中的每一个相加为一个来做到这一点。我正在尝试使用 Series.add 函数，因为我需要一个填充值来确保代表新交易的新股票系列不是旧头寸的 NaN。问题是我不知道如何初始化可以正确添加的可行系列。我在下面的代码中尝试 Series(0) 只是返回：

```
Series([], dtype=float64) 
```

我还尝试使用一些随机日期初始化它，其值为 0，但即使在添加了不同的系列之后，我也只是不断地取回该系列。

这是我的代码：

```
class Position: 
    def __init__(self, trades):
        self.ticker = trades[0].ticker #grab the ticker we are dealing with
        self.shares = Series()
        for trade in trades:
            if trade.tranType == 0 or trade.tranType == 2:
                direction = 1 #a buy increases share amount
            else:
                direction = -1 # a sell decreases share amount
            dateRangeInFolio = pd.DateRange(trade.date, datetime.datetime.today())     #from the event date through today
            shareSer = Series(trade.shares * direction, index=dateRangeInFolio)
            self.shares.add(shareSer, fill_value=0)
        print self.shares 
```

谢谢你的帮助。如果我遗漏了一些非常基本的东西，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:46:13.557

所以 Series.add*返回*总和系列...我认为它只是将其添加到已经存在的系列对象中。所以我这样做了：

```
self.shares = self.shares.add(shareSer, fill_value=0) 
```

代替

```
self.shares.add(shareSer, fill_value=0) 
```

它有效。

# c++ - OpenCV 中的串行通信

> ID：12995229
> 
> 赞同：0
> 
> 时间：2012-10-21T05:22:06.533
> 
> 标签：c++, c, opencv, serial-port, arduino

我正在构建一个涉及识别对象颜色的应用程序，然后在机械手的帮助下对其进行分类。颜色识别的代码在 OpenCV 中已经准备好了，我不知道如何将这些数据传输到我通过 USB 连接的 Arduino UNO 板。我以前在 MATLAB 中制作过这种应用程序，但不知道如何在 OpenCV 中完成。我们有什么方法可以通过 OpenCV 中的串口发送数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:33:21.090

你考虑过使用[OpenFrameworks](http://www.openframeworks.cc/documentation/)吗？我个人没有玩过 OpenCV，但我玩过 OF 上与 arduinos 的串行通信。OF 还包括 OpenCV 库，因此您可以将您的工作与它联系起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:51:38.530

**先决条件**：安装带有python绑定的opencv。我通常在Mac Os上工作。使用macports在mac上安装带有python绑定的opencv非常容易。我不知道windows和linux，但不缺教程。只是谷歌。

而关于python，别着急，2天就能学很多python。[Google python 类](http://code.google.com/edu/languages/google-python-class/)绝对是一个好的开始。

检查[一下](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imread#imread)不同的python opencv方法。[这](http://opencvpython.blogspot.in/)是一个用python启动opencv的好网站

# ruby-on-rails - 如何摆脱 RSpec 中的必要重新加载？

> ID：12995230
> 
> 赞同：0
> 
> 时间：2012-10-21T05:22:14.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec-rails

我在运行规范时遇到了一个奇怪的行为。

除非我取消注释行，否则此代码不起作用（`baz.viewed`未更新）`baz.reload`。

```
describe "#..." do
  it "..." do
    baz = user.notifications.create!(title: "baz")
    baz.update_attribute(:created_at, Time.now + 3.day)

    # it sets `viewed` to `true` in the model to which `baz` is referred.
    user.dismiss_latest_notification!

    # baz.reload
    baz.viewed.should == true
  end
end 
```

我不使用`Spork`or运行规范`Guard`，但无论如何都不会重新加载此模型。

为什么会发生？或者，在规范中调用`.reload`方法是否正常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T05:58:03.993

让我让这个案例更清楚一点：当行`baz = user.notifications.create!(title: "baz")`被执行时，会发生两件事：

1- 一个新的通知行被添加到数据库中。

2- 在内存中创建一个对象，代表这一行，并且可以用变量引用`baz`。请注意，`baz`它的查看值为 false（同时该行也是如此）。

现在我没有看到方法的实际实现

```
user.dismiss_latest_notification! 
```

但是由于您没有将任何变量传递给它，我当然知道您有一个本着以下精神的代码：

```
def dismiss_latest_notification!
  latest_notification = self.notifications.last
  latest_notification.viewed = true
  latest_notification.save!
end 
```

这里重要的一行是

```
 latest_notification = self.notifications.last 
```

一个对象在内存中创建，代表相同的行`baz`，但存储在另一个变量 - latest_notification 中。

现在你有两个变量代表数据库中的同一行。当您在 latest_notification 上执行保存时，数据库会使用正确的查看值更新，但变量`baz`不会以任何方式更新以反映此更改。您别无选择，只能通过`reload`对其执行来强制使用最新值从数据库更新。

我认为摆脱重新加载的正确方法是稍微改变测试：

代替

```
baz.viewed.should == true 
```

采用：

```
user.notifications.last.viewed.should be_true 
```

在我看来，它更适合这个特定测试的目的。

# ruby-on-rails - Heroku 不通过控制器发送延迟作业电子邮件

> ID：12995233
> 
> 赞同：1
> 
> 时间：2012-10-21T05:22:40.297
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2, delayed-job

当有人填写表格时，我正在尝试使用 Heroku 上的 Rails 3.2 应用程序中的延迟作业发送电子邮件。我已经能够通过本地开发机器上的延迟作业成功发送电子邮件。如果我通过 Heroku 上的控制台手动运行它们，我还可以使用延迟作业发送电子邮件。但是，当有人提交触发电子邮件的表单时，它不会发送。

这是我的邮件：

```
class ClaimMailer < ActionMailer::Base
  default from: "noreply@coatchex.com"

  def patron(claim)
    mail(:to => claim.email, :subject => I18n.t('mailers.claims.patron.subject'))
  end

  def coatchex(claim)
    @claim = claim
    mail(:to => 'claims@coatchex.com', :subject => I18n.t('mailers.claims.coatchex.subject'))
  end
end 
```

这是我的控制器：

```
class ClaimsController < ApplicationController
  layout 'basic'

  def new
    @claim = CoatChex::Forms::Claim.new
  end

  def create
    @claim = CoatChex::Forms::Claim.new(params[:claim])
    if @claim.valid?
      ClaimMailer.delay.coatchex(@claim)
      render :thank_you
    else
      render :new
    end
  end
end 
```

就像我提到的，如果我通过 Heroku 控制台运行以下命令，它会将电子邮件排入延迟作业并发送它就好了：

```
@claim = ...
ClaimMailer.delay.coatchex(@claim) 
```

但是，每当我通过表单发送它时，它都不会触发。

如果我足够快，我可以在 Heroku 控制台中运行 Delayed::Job.count 并在通过表单提交时在作业执行之前看到值 1。所以我知道延迟的工作正在得到它。如果我使用

```
heroku logs -p worker -t 
```

我可以看到在手动执行时记录作业过程，但在通过表单时看不到。

数据库中没有失败的作业。

以前有人遇到过这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:48:02.177

我有一个类似的问题。一个很好的起点是[https://devcenter.heroku.com/articles/delayed-job#debugging](https://devcenter.heroku.com/articles/delayed-job#debugging)上的信息- 特别`Delayed::Job.last.last_error`是在 Heroku 控制台上运行的信息。

在我的情况下，我得到的错误是`Job failed to load: uninitialized constant Syck::Syck`，通过添加`psych`到我的 gemfile 来修复它。请参阅[Delayed_job: Job failed to load: uninitialized constant Syck::Syck](https://stackoverflow.com/questions/5367228/delayed-job-job-failed-to-load-uninitialized-constant-sycksyck)和[http://effectif.com/ruby-on-rails/syck-and-psych-yaml-parsers-on-heroku](http://effectif.com/ruby-on-rails/syck-and-psych-yaml-parsers-on-heroku)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T12:28:07.967

您需要使用命令启动worker

`rake jobs:work`

在你的 heroku rails 控制台上。

# javascript - javascript 通过鼠标悬停滚动对象

> ID：12995236
> 
> 赞同：0
> 
> 时间：2012-10-21T05:23:06.757
> 
> 标签：javascript, html, dom, scroll, onmouseover

我正在努力做到这一点，以便当鼠标悬停在图像上时 div 会滚动，但只能滚动到现在。某处它只是不太工作

```
$(document).ready(function()
 {
    $('#test').bind('mouseenter', function() 
   {
    var self = $(this);
    var right = parseInt(self.style.left) || 200;               
    this.iid = setInterval(function() 
     {
         if (right <= 400)
         {                     
         right += 200;                         
         }
         else
         {
          right = 400;                         
         }
    self.style.left = right + "px";
     }, 525);
   }).bind('mouseleave', function()
           {
    this.iid && clearInterval(this.iid);
           });

 });​

    #test {
        color:white;
        width: 400px; 
    height: 400px; 
    left: 200px; 
    background-color: #000; 
    position: absolute;
    }

    <div id="test">hover me please</div>​ 
```

或这里的小提琴：http: [//jsfiddle.net/qjxqC/1/](http://jsfiddle.net/qjxqC/1/)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:37:29.667

代替

```
var self = $(this); 
```

经过

```
var self = this; 
```

因为`style`是 DOM 对象的属性，而不是 jQuery 对象，但你这样做：

```
self.style.left = right + "px"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:56:15.423

首先，不要将 JavaScript 属性 (iid) 附加到 DOM 引用 (this) **this.iid 上**。这将导致某些浏览器 (IE) 中的内存泄漏。我也建议使用递归超时。

我会使用 setTimeout 进行此操作。鉴于您的限制检查和更容易从您的功能中中断，它提供了更多控制。这是您的代码重做。

```
$(document).ready(function(){
    var timeout; // keep your timeout reference at a higher scope for example
    $('#test').bind({
        'mouseenter': function(){ 
            var self = $(this);
            var incrementScroll = function() {
                var left = parseInt(self.css("left"));
                if(left <= 400) {
                    self.css("left", "+=200");  // as of jQuery 1.6 you can do this
                    // self.css("left", left+200);
                    timeout = setTimeout(incrementScroll, 525);
                }
            }             
            incrementScroll();
        },
        'mouseleave': function(){
            clearTimeout(timeout);
    }});
}); 
```

# ios - CGAffineTransformRotate 在执行旋转之前移动对象

> ID：12995241
> 
> 赞同：1
> 
> 时间：2012-10-21T05:23:45.743
> 
> 标签：ios

我正在尝试为 a 的变换设置动画`UIButton`，`CGAffineTransformRotate`当它正确执行动画时，它会在执行此操作之前将按钮向下和向左移动约 15 个像素。这是执行动画转换的代码：

```
[UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionTransitionNone
                 animations:^{
                     self.addCloseButton.transform = CGAffineTransformRotate(self.addCloseButton.transform, degreesToRadians(45));
                 }
                 completion:nil]; 
```

当我反转转换时，它会做同样的事情，只是在动画之前将其移回原始位置（向上 15 个像素，向右 15 个像素），我使用以下代码执行此操作：

```
[UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionTransitionNone
                 animations:^{
                     self.addCloseButton.transform = CGAffineTransformIdentity;
                 }
                 completion:nil]; 
```

为什么会发生这种转变？该按钮是使用界面生成器创建的，即使我将动画持续时间设置得更高或添加延迟，也会立即发生转变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:27:54.480

我想通了：原来在我的 xib 上选择了“使用自动布局”（它添加了一堆自动约束）在尝试使用转换时搞砸了。关闭它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T17:39:17.170

在仍然使用自动布局和情节提要的同时解决此问题是可能的。请参阅我对这个问题的回答：[https ://stackoverflow.com/a/19582959](https://stackoverflow.com/a/19582959)

# class - 在 Scala 中，如何获取“对象”（不是类的实例）的 *name*？

> ID：12995250
> 
> 赞同：20
> 
> 时间：2012-10-21T05:25:11.093
> 
> 标签：class, scala, object, reflection, jvm-languages

在 Scala 中，我可以像这样声明一个对象：

```
class Thing

object Thingy extends Thing 
```

我将如何`"Thingy"`在 Scala 中获得（对象的名称）？

*我听说 Lift（Scala 的 Web 框架）能够做到这一点。*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-21T18:55:03.750

如果您将其声明为 a`case object`而不仅仅是 an`object`那么它将自动扩展[`Product`特征](http://www.scala-lang.org/api/current/scala/Product.html)，您可以调用该`productPrefix`方法来获取对象的名称：

```
scala> case object Thingy
defined module Thingy

scala> Thingy.productPrefix
res4: java.lang.String = Thingy 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-21T05:56:06.737

只需获取类对象，然后获取其名称。

```
scala> Thingy.getClass.getName
res1: java.lang.String = Thingy$ 
```

剩下的就是删除`$`.

编辑：

要删除封闭对象的名称和拖尾`$`就足够了

```
res1.split("\\$").last 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-04T05:21:06.937

我不知道哪种方式是正确的方式，但这可以通过 Scala 反射来实现：

```
implicitly[TypeTag[Thingy.type]].tpe.termSymbol.name.toString 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-03T13:40:28.003

```
def nameOf[T](implicit ev: ClassTag[T]):String = ev.runtimeClass.getName.replace("$", "") 
```

# python - 在多核上运行 python 程序

> ID：12995256
> 
> 赞同：2
> 
> 时间：2012-10-21T05:25:49.820
> 
> 标签：python, multithreading, parallel-processing

我是多核编程的新手。以下程序仅使用一个核心。我怎样才能让它在多个核心上运行（我有 4 个核心）。

```
simDict={}

def sim(outer,inner, ...):
    val= /*do some math*/
    simDict[...]=val

def foo():
   for outer in xrange(0, limit):
      for inner in xrange(outer, limit):
          sim(outer,inner, ...)
foo() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T05:29:39.620

简单的：

```
from multiprocessing import Pool

p = Pool()

def do_inner(outer, limit):
    for inner in xrange(outer, limit):
        sim(outer, inner, ...)

def foo():
    p.map(do_inner, xrange(limit))

foo() 
```

这`multiprocessing.Pool`用于创建一个工作进程池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:30:16.817

对于您的问题，我将使用队列，然后我将坚持消费者/生产者问题并从那里开始。除非您的线程之间存在一些数据依赖性，否则您将需要使用一些更高级的锁定机制，并且必须防止更多的线程陷阱。

生产者/消费者概念：[http](http://en.wikipedia.org/wiki/Producer-consumer_problem) ://en.wikipedia.org/wiki/Producer-consumer_problem 仅供参考：[http ://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

`multiprocessing`使用起来可能会有所帮助，如果只使用线程，全局解释器锁在某些特定情况下会减慢速度。

# blackberry - PhoneGap 状态栏通知

> ID：12995259
> 
> 赞同：0
> 
> 时间：2012-10-21T05:26:43.040
> 
> 标签：blackberry, cordova

有谁知道如何为黑莓 PhoneGap 应用程序实现状态栏通知？我的意思是当有人收到通知时，它应该在黑莓顶部的主屏幕上显示为一个小图像图标，就像出现电子邮件警报一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:19:05.557

要仅显示带有数字的图标，您可以使用 webworks 中的 showBannerIndicator。

例如

```
function notify()
{
    blackberry.app.showBannerIndicator('notifyicon.png', 1);
} 
```

[https://developer.blackberry.com/html5/apis/blackberry.app.html#.showBannerIndicator](https://developer.blackberry.com/html5/apis/blackberry.app.html#.showBannerIndicator)

如果你想让它可点击，你需要考虑尝试从这里实现社区插件，这将是更多的工作：

[https://github.com/blackberry/WebWorks-Community-APIs/tree/master/Smartphone/MessageList](https://github.com/blackberry/WebWorks-Community-APIs/tree/master/Smartphone/MessageList)

我已经在phonegap 应用程序中成功使用了bannerindicator，但我还没有尝试过MessageList。

# mysql - 数周内将足球选秀与其他球员进行比较

> ID：12995261
> 
> 赞同：1
> 
> 时间：2012-10-21T05:26:50.030
> 
> 标签：mysql, similarity

我有一个足球台球网站。每周，我的朋友都会挑选每场比赛的获胜者。我想将每个球员的选秀权与其他球员进行比较，并列出相似的百分比。我发现这个页面可以帮助我计算特定一周的相似度：[比较标签组以查找 PHP/MySQL 的相似度/分数](https://stackoverflow.com/questions/3446308/compare-group-of-tags-to-find-similarity-score-with-php-mysql)。[感谢 Ivar Bonsaksen](https://stackoverflow.com/users/365119/ivar-bonsaksen)，他的解决方案效果很好！

我现在要做的是显示过去几周每个玩家的累积**相似度**。

我有 3 个表要查询：配置文件 (spprofiles)、游戏 (sp6games) 和精选 (sp6picks)。另一个名为 Teams (sp6teams) 的表用于获取团队的名称，但在这里无关紧要。

```
Profiles (spprofiles)
+-----------+-------------+
| profileID | profilename |
+-----------+-------------+
| 52        | My Team A   |
| 53        | Some Team B |
+-----------+-------------+

Games (sp6games)
+--------+--------+---------+------+
| gameID | weekID | visitor | home |
+--------+--------+---------+------+
| 1      | 2      | 9       | 21   |
| 2      | 2      | 14      | 6    |
| 17     | 3      | 6       | 9    |
| 18     | 3      | 30      | 21   |
+--------+--------+---------+------+

Picks (sp6picks)
+-----------+--------+------+
| profileID | gameID | pick |
+-----------+--------+------+
| 52        | 1      | 21   |
| 52        | 2      | 6    |
| 52        | 17     | 12   |
| 52        | 18     | 21   |
| 53        | 1      | 9    |
| 53        | 2      | 6    |
| 53        | 17     | 9    |
| 53        | 18     | 21   |
+-----------+--------+------+ 
```

本周的查询如下所示：

```
$weekID = 3; //the current weekID
$profile = 52; //the current ProfileID

SELECT
  targetProfiles.profileID AS targetID,
  sourceProfiles.profileID AS sourceID,
    COUNT(targetProfiles.profileID)
    /
    (((SELECT COUNT(*) FROM sp6Picks LEFT JOIN sp6Games USING (gameID) WHERE profileID = sourceProfiles.profileID AND weekID = $weekID)
      +
    (SELECT COUNT(*) FROM sp6Picks LEFT JOIN sp6Games USING (gameID) WHERE profileID = targetProfiles.profileID AND weekID = $weekID))/2)
  AS similarity
FROM
  spProfiles AS sourceProfiles
  LEFT JOIN
    (SELECT sp6Picks.* FROM sp6Picks LEFT JOIN sp6Games USING (gameID) WHERE weekID = $weekID) AS sourcePicks
    ON (sourcePicks.profileID = sourceProfiles.profileID)
  INNER JOIN
    (SELECT sp6Picks.* FROM sp6Picks LEFT JOIN sp6Games USING (gameID) WHERE weekID = $weekID) AS targetPicks
    ON (sourcePicks.pick = targetPicks.pick AND sourcePicks.profileID != targetPicks.profileID)
  LEFT JOIN
    spProfiles AS targetProfiles
    ON (targetPicks.profileID = targetProfiles.profileID)
WHERE sourceProfiles.profileID = $profile
GROUP BY targetID 
```

如果我分别在几周内运行此查询，我会得到以下结果：

```
$weekID = 2;
+----------+----------+------------+
| targetID | sourceID | similarity |
+----------+----------+------------+
| 53       | 52       | 0.5000     |
+----------+----------+------------+

$weekID = 3;
+----------+----------+------------+
| targetID | sourceID | similarity |
+----------+----------+------------+
| 53       | 52       | 0.5000     |
+----------+----------+------------+ 
```

到目前为止，我为累积计算出的查询看起来像这样（但我尝试了其他几种变体）。基本上，我只是将 WHERE 子句更改为包括前几周`weekID <= $weekID`，并将 Games 表添加到主 FROM 子句`LEFT JOIN sp6games ON (targetPicks.gameID = sp6games.gameID)`中。

```
$weekID = 3; //the current weekID
$profile = 52; //the current ProfileID

SELECT
  targetProfiles.profileID AS targetID,
  sourceProfiles.profileID AS sourceID,
    COUNT(targetProfiles.profileID)
    /
    (((SELECT COUNT(*) FROM sp6Picks LEFT JOIN sp6Games USING (gameID) WHERE profileID = sourceProfiles.profileID AND weekID <= $weekID)
      +
    (SELECT COUNT(*) FROM sp6Picks LEFT JOIN sp6Games USING (gameID) WHERE profileID = targetProfiles.profileID AND weekID <= $weekID))/2)
  AS similarity
FROM
  spProfiles AS sourceProfiles
  LEFT JOIN
    (SELECT sp6Picks.* FROM sp6Picks LEFT JOIN sp6Games USING (gameID) WHERE weekID <= $weekID) AS sourcePicks
    ON (sourcePicks.profileID = sourceProfiles.profileID)
  INNER JOIN
    (SELECT sp6Picks.* FROM sp6Picks LEFT JOIN sp6Games USING (gameID) WHERE weekID <= $weekID) AS targetPicks
    ON (sourcePicks.pick = targetPicks.pick AND sourcePicks.profileID != targetPicks.profileID)
  LEFT JOIN
    spProfiles AS targetProfiles
    ON (targetPicks.profileID = targetProfiles.profileID)
  LEFT JOIN sp6games ON (targetPicks.gameID = sp6games.gameID)
WHERE sourceProfiles.profileID = $profile
GROUP BY targetID, weekID 
```

合并后的结果应该是 0.5000，但我得到的是：

```
$weekID = 3;
+----------+----------+------------+
| targetID | sourceID | similarity |
+----------+----------+------------+
| 53       | 52       | 0.7500     |
+----------+----------+------------+ 
```

问题是`COUNT(targetProfiles.profileID)`在几周内没有正确总计，因此`similarity`值被搞砸了。对于更大的数据集，它似乎也不是很有效。

感谢您花时间阅读，并可能提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:47:56.743

```
SELECT   t.profileID                 AS target,
         SUM(s.pick=t.pick)/COUNT(*) AS similarity
FROM     sp6picks s
    JOIN sp6picks t USING (gameID)
    JOIN sp6games g USING (gameID)
WHERE    g.weekID    <= 3
     AND s.profileID != t.profileID
     AND s.profileID  = 52
GROUP BY t.profileID 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/c5d12/2/0)上查看。

# google-apps-script - 如何使用 onEdit 事件返回已编辑单元格的范围？

> ID：12995262
> 
> 赞同：5
> 
> 时间：2012-10-21T05:26:52.900
> 
> 标签：google-apps-script

这似乎应该很容易，但我似乎无法让我的任何小测试实现工作。最终目标是创建一个仅在编辑特定范围内的单元格时运行的函数。为了实现这一点，我正在创建一个在每次编辑时运行的函数，但首先检查编辑单元格的范围是否在某个范围内，如果这是真的，则只执行其余的代码，否则，它只是立即结束。

在我看来，这样做的第一步是找出如何返回已编辑单元格的范围。我尝试了各种测试。

这是当前版本，我通过编辑电子表格对其进行了测试：

```
function onEdit(e){
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheets()[0];
var eRange = e.range;
var message = eRange.getA1Notation();
ss.toast(message);
} 
```

（输出：吐司没有出现/什么都没有发生）

我在这里发布了大约 10 个其他版本，但我意识到这没有帮助。

我已经设法在我的 toast 消息中返回 [object Object] 和 [undefined]，所以我知道我的 toast 函数没有犯一些愚蠢的错误。

e.range 不返回一个范围吗？那是我出错的地方吗？如果它返回一个范围，我是否应该能够使用范围内的任何方法，就像我使用了类似“ss.getRange("A1").someMethod()" 一样？还是有一些我不明白的区别？

好的，我意识到我在这里问了几个不同的问题——我只是想更清楚地了解我的思维过程，以防它帮助你纠正我的错误。一个简单的问题是：我可以使用什么样的命令或方法来返回已编辑单元格的范围？

很抱歉问了这么一个基本的问题。我真的很害怕有人会输入正确的搜索词组合，答案就会出现在结果的顶部......但我似乎无法自己找到它，所以我在这里。我已经尝试了 StackOverflow 和旧 Google Groups 支持论坛中的许多代码片段，以及我自己的许多尝试。我看到人们在这里就我的最终目标提出了很多类似的问题——只有在特定范围内的单元格被编辑时才运行 onEdit 函数——但答案都更加复杂，而且似乎是针对每个具体情况量身定制的，但他们没有不适合我的。我确定答案就在那里，但我已经连续三个晚上一直在寻找，发现很多类似的问题被问到，而且只是可以' 我似乎无法自己实施这些建议。感谢您对我的耐心，非常感谢您提供的任何答案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T06:00:37.113

[这是从文档](https://developers.google.com/apps-script/understanding_triggers#Simple)中获取（并稍作修改）的代码：

```
function onEdit(event){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = event.source.getActiveSheet();
  var r = event.source.getActiveRange();
  r.setComment("Last modified: " + (new Date())+' by '+Session.getActiveUser());
  ss.toast('Last cell modified = '+r.getA1Notation()+' by '+Session.getActiveUser());
} 
```

# ruby-on-rails - Rails 服务器错误：Ruby 版本是 1.8.7，但您的 Gemfile 指定了 1.9.3

> ID：12995271
> 
> 赞同：12
> 
> 时间：2012-10-21T05:28:47.597
> 
> 标签：ruby-on-rails, ruby

我输入了一个现有的 ruby​​ 应用程序，然后输入：

$ 导轨

想在这里启动rails服务器。但它说：

您的 Ruby 版本是 1.8.7，但您的 Gemfile 指定了 1.9.3

实际上，我有一个 1.8.7，但我删除了它。如果我这样做：

$红宝石-v

它说：ruby 1.9.3p286（2012-10-12 修订版 37165）[x86_64-darwin11.4.2]

所以我不知道我该如何解决它。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T12:26:47.670

如果您使用的是[rvm](https://rvm.io)，请运行以下命令：

```
$ rvm use 1.9.3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-04T15:55:40.170

我有类似的问题：

```
$ bundle install
Your Ruby version is 2.1.0, but your Gemfile specified 1.9.3 
```

但：

```
$ ruby -v
1.9.3-p484
$ which ruby
/home/malo/.rvm/rubies/ruby-1.9.3-p484/bin/ruby 
```

我找到了五个答案：[1](https://stackoverflow.com/questions/21060721/rails-server-gives-your-ruby-version-is-1-9-3-but-your-gemfile-specified-2-1)、[2](https://stackoverflow.com/questions/20203998/your-ruby-version-is-1-9-3-but-your-gemfile-specified-1-9-3-p194)、[3](https://stackoverflow.com/questions/19342044/in-ruby-your-ruby-version-is-1-9-3-but-your-gemfile-specified-2-0-0)、[4](https://stackoverflow.com/questions/18837415/your-ruby-version-is-2-1-0-but-your-gemfile-specified-2-0-0)、[5](https://stackoverflow.com/questions/20199970/bundlerrubyversionmismatch-your-ruby-version-is-1-9-3-but-your-gemfile-speci)。这也是[github](/questions/tagged/github "show questions tagged 'github'")上的[公开问题](https://github.com/sstephenson/rbenv/issues/400)。但是，我已将问题解决如下：[![](../Images/18d1f425efc5b0b646032ae83b93d54e.png)](/questions/tagged/github "显示标记为“github”的问题")

1.  [找到我的捆绑](/questions/tagged/bundler "显示标记为“捆绑器”的问题")器的路径：

    ```
    $ which bundle
    /home/malo/.rvm/gems/ruby-1.9.3-p484@global/bin/bundle 
    ```

2.  打开它进行编辑（或只是[cat](/questions/tagged/cat "显示标记为“猫”的问题")它），并看到它在第一行有无效的 ruby​​ 链接：

    ```
    $ cat $(which bundler)|head -n 1 
    #!/home/malo/.rvm/rubies/ruby-2.1.0/bin/ruby 
    ```

3.  然后我得到了当前有效红宝石的路径，并用它替换了那个无效的：

    ```
    $ which ruby
    /home/malo/.rvm/rubies/ruby-1.9.3-p484/bin/ruby 
    ```

    当然你也可以尝试用常见的形式替换它：

    ```
    #!/usr/bin/env ruby 
    ```

    这应该会选择当前使用的 ruby​​ 版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T05:33:20.360

尝试使用捆绑器

```
bundle exec rails s 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-18T21:29:28.467

我发现我收到此错误的原因是我在配置文件中使用 Heroku 命令行程序，而 Heroku Toolbelt 带有它自己的 Ruby 版本。

该问题的两个解决方案是要么不使用 Heroku，要么使用`Bundler.with_clean_env`块而不是反引号来输出`heroku`命令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T06:49:57.727

请试试这个：

```
 1\. Open your gemfile
 2\. Specify rails version
 3\. Run bundle update
 4\. Run rails server - rails s 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-06T18:31:36.057

时不时地发生在我身上。但是我经常不喜欢在这里和那里切换 ruby​​ 版本。因此，我所做的只是转到 Gemfile 并将 ruby​​ 版本切换到我正在使用的版本。这样做可以让我启动我的服务器并继续工作。

例如，现在对于我正在开发的应用程序，我的 Gemfile 位于

```
ruby ENV["CUSTOM_RUBY_VERSION"] || "2.1.6" 
```

我会把它改成

```
ruby ENV["CUSTOM_RUBY_VERSION"] || "1.9.3" 
```

# multithreading - 资源池死锁

> ID：12995276
> 
> 赞同：2
> 
> 时间：2012-10-21T05:29:59.673
> 
> 标签：multithreading, deadlock

此伪代码在多个线程中同时运行会导致死锁：

```
Resource res1 = pool.get();
...
Resource res2 = pool.get();
...
pool.release(res2);
pool.release(res1); 
```

这是预期的行为吗？（我猜是）

如果池的大小是线程数的两倍，则似乎不会发生死锁 - 这个语句正确吗？

这种计算机科学中的僵局是否有一个“科学”的名称？将不胜感激一些链接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:35:41.063

假设您有两个线程和两个资源。

线程 A 执行`res1 = pool.get()`并获取一个资源。线程 B 执行`res1 = pool.get()`并获取一个资源。现在池已经用完了，所以两个线程都不能完成`res2 = pool.get()`。

如果您有一个备用资源（即至少线程`n+1`资源`n`），问题就会消失，因为在这种情况下，一个线程可以保证获得两个资源，完成，从而释放足够的资源供其他线程使用。增加资源数量可以提高并行度；由于资源是线程的两倍，每个线程都可以在不阻塞的情况下获取资源，因此所有线程都可以并行执行。

AFAIK 这被简单地称为“僵局”，因为它本质上是该现象的教科书示例。两个任务现在都在等待对方释放必要的资源。

# linux - 创建.so文件

> ID：12995277
> 
> 赞同：0
> 
> 时间：2012-10-21T05:30:09.763
> 
> 标签：linux, unix, compilation, solaris

有一组带有 - 扩展名的文件。с：avl_tree.c、buf_read.c、db_prep.c、file_process.c、global_header.c、traverser.c。使用的包含文件位于文件夹/usr/gcc/4.4/bin/include 中，jni.h 除外，库位于文件夹/usr/gcc/4.4/bin/lib 中。如何从它们中创建.so 文件（如果可以在此命令中指定所有选项）？通过使用 JNI 创建本地方法，我对通信感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:19:53.443

你真的应该阅读 GCC 的文档。尤其是[调用 GCC](http://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html#Invoking-GCC)。[程序库 howto](http://tldp.org/HOWTO/Program-Library-HOWTO/)也是相关的。

很多时候，一些构建器被用来驱动构建。[GNU make](http://www.gnu.org/software/make/)经常被使用并且有很好的教程文档。如果您的`Makefile`-s 很复杂，您可能还想使用[GNU remake](http://bashdb.sourceforge.net/remake/)来调试它们（`remake`是 的调试变体`make`）。

您通常希望将每个单独的 C 源文件编译成与[位置无关的代码](http://en.wikipedia.org/wiki/Position-independent_code)，因为[共享对象](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)具有 PIC 代码。您可以使用

```
 gcc -Wall -fPIC -o foo.pic.o foo.c 
```

要将 C 源代码编译`foo.c`为与位置无关的目标文件`foo.pic.o`，您可能需要一些其他编译器选项（例如`-I`，添加包含目录，或`-D`定义一些预处理器符号，`-g`用于调试和`-O`优化）。

^(我强烈建议启用几乎所有的警告`-Wall`（并改进您的代码，直到没有给出警告；这将稍微提高您的代码质量）。)

然后你必须将所有这些`*.pic.o`文件链接到一个共享对象中

```
 gcc -shared *.pic.o -o foo.so 
```

您可以将一些共享库链接到共享对象中。

您可能想阅读[Levine 关于链接器和加载器的书](http://www.iecc.com/linker/)

当然，如果您使用 GNU `make`，您将拥有`Makefile`所有这一切的规则。

你也可以使用[GNU libtool](http://en.wikipedia.org/wiki/GNU_Libtool)。

也许[dlopen(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html)会让你感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:35:44.553

这个问题可能应该提供更多信息。

大多数源集都有一个 Makefile、配置脚本或其他一些项目来设置输出（您想要的 .so 库）。

gcc -动态 -o 文件.so 文件.c

将从其中一个源文件中创建一个 so 文件，但您可能需要所有源文件中的一个 so 文件。

# twitter - 知道一个帐户是否发了推文

> ID：12995286
> 
> 赞同：0
> 
> 时间：2012-10-21T05:32:07.983
> 
> 标签：twitter

背景信息：我的网站有一个帐户系统，我们想在每次他们发推文/Facebook 分享时给帐户“奖励积分”。

对于 facebook 分享，我们可以通过使用 redirect_uri 来跟踪共享的帐户，并将它们重定向回我们的网站（使用指定的 url）并注意它。[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

推特上也有这样的吗？我一直在努力寻找真正的东西，但我找不到一种方法来通知我的系统某个帐户已经发了推文。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:34:42.893

Twitter API 中的基本对象之一是 User 对象，它为您提供了有关用户的大量信息。User 对象的一个​​属性称为“status”，它是一个 Tweet 对象，它是用户最近的一条推文。

因此，在您的应用程序中，您可以存储用户最后一条推文的唯一标识符和日期/时间。然后在您选择的时间间隔内，您可以获取有关用户的信息，并查看他们最近推文的 ID 是否与您数据库中的 ID 匹配。如果不匹配，则用户发布了一条新推文。

[用户对象的 Twitter API 文档](https://dev.twitter.com/docs/platform-objects/users)

[Tweet 对象的 Twitter API 文档](https://dev.twitter.com/docs/platform-objects/tweets)

# c - 结构的访问元素传递到 void* 指针

> ID：12995287
> 
> 赞同：3
> 
> 时间：2012-10-21T05:33:00.897
> 
> 标签：c, struct, binary-tree, typedef, void-pointers

我正在使用二叉搜索树数据结构来对一系列具有类型定义的结构进行排序：

```
typedef struct {
    char c;
    int index;
} data_t;

typedef struct node node_t;

typedef node {
    void *data;
    node_t *left;
    node_t *right;
} 
```

node_t typedef 来自为此目的提供给我的库，可能带有 void* 指针以确保多态性。 `node`将被传递到函数中：

`static void *recursive_search_tree(node_t *root, void *key, int cmp(void*,void*))`

在 recursive_search_tree 函数中，我希望能够修改代码以使用索引元素作为条件来找到最接近线性传递的索引的匹配字符数组，这最终将涉及传递到的 data_t`*key`和`key->index`在函数内访问。

**问题**

是否可以访问`key->index`key`void*`指向结构的位置，或者只有在声明为 key 的类型时`data_t`才有可能？`data_t`我试图做后者，但是即使将指针转换为 int 似乎也没有通过编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:39:26.043

当然有可能，你会强制转换`key`为 type `*data_t`。（只要那是真正的`key`指向！）

```
key                     /* argument of type void* */
(data_t*)key            /* cast as type data_t*   */
((data_t*)key)->index   /* dereferenced */ 
```

这是一个简单的例子：

```
#include <stdlib.h>
#include <stdio.h>

typedef struct {
    char    c;
    int     index;
} data_t;

typedef struct node {
    void    *data;
    struct node *left;
    struct node *right;
} node_t;

static int cmp(void *lhs, void *rhs)
{
    return ((data_t *)lhs)->index - ((data_t *)rhs)->index;
}

int main(void)
{
    data_t d0;
    data_t d1;

    d0.c     = 'A';
    d0.index = 1;
    d1.c     = 'B';
    d1.index = 2;

    printf("d0 < d1? %s\n", (cmp((void *)&d0, (void *)&d1) < 0 ? "yes" : "no"));
    printf("d1 < d0? %s\n", (cmp((void *)&d1, (void *)&d0) < 0 ? "yes" : "no"));

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:47:37.253

这是类型不安全的，任何使用 void 也是如此。使用 void 通常是因为中间人持有一些它不为他人方便而使用的东西。这是一个 C 函数，可让您在树中保存您想要的任何内容。它所做的只是返回你给它的任何指针。

在您的搜索功能中

```
int cmp(void* dt1, void* dt2)
{
data_t*  data1 = (data_t*)dt1;
data_t*  data2 = (data_t*)dt2;
/* Do what you need with data1 and data2 here */
} 
```

应该让你为所欲为。您遇到的问题是您需要在函数内转换您的值。cmp 的参数应该与您正在使用的库的 API 完全匹配，其中参数为 void*。

# ruby-on-rails - Unicorn 如何滚动重启？

> ID：12995296
> 
> 赞同：5
> 
> 时间：2012-10-21T05:34:29.373
> 
> 标签：ruby-on-rails, unicorn

假设我对我的 rails 应用程序进行了一些更改，例如更改 html 布局。我将如何使用 Unicorn 进行滚动重启？实际上，人们想为最新版本的 rails 应用程序调出独角兽进程（或工人？），然后自动将流量从旧的独角兽进程/工人切换到新的进程/工人。从谷歌搜索中，我无法得到关于如何做到这一点以及围绕它的所有问题的具体明确解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T23:28:08.527

有多种方法，但其中一种方法如下：

*   将 SIGUSR2 发送到主进程。Unicorn 使用工作进程启动一个新的主进程，它与您的旧主进程和旧工作进程并行存在。
*   等到新的主进程和工作进程启动。
*   杀死老主人。

资料来源：[http ://unicorn.bogomips.org/SIGNALS.html](http://unicorn.bogomips.org/SIGNALS.html)

不过，这对内存不是很友好。您暂时需要两倍的内存使用量。

[Phusion Passenger Enterprise](https://www.phusionpassenger.com/enterprise)支持滚动重启（以及其他很酷的功能），但它会逐个重启进程，因此不需要太多内存。可以使用 TTIN 和 TTOUT 信号在 Unicorn 中编写一对一的滚动重启脚本，但 Phusion Passenger 会自动为您完成所有操作，无需编写脚本。

# .htaccess - 如何使用 .htaccess 隐藏多个子文件夹？

> ID：12995299
> 
> 赞同：2
> 
> 时间：2012-10-21T05:35:01.947
> 
> 标签：.htaccess, web, hide, subdirectory

`http://www.example.com/blog/demo/first-post`

`http://www.example.com/blog/test/second-post`

我想将上面的网址重写为

`http://www.example.com/first-post`

`http://www.example.com/second-post`

我用了：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /demo/$1 [L] 
```

但它不适用于***test***。请帮忙。

# java - hibernate.cfg.xml 未找到异常，昨天正在使用 configure()

> ID：12995303
> 
> 赞同：0
> 
> 时间：2012-10-21T05:35:53.073
> 
> 标签：java, hibernate, log4j

在 ec2 上加载基于休眠的可运行 jar，我突然收到 hibernate.cfg.xml 未找到异常。

```
233  [main] FATAL com.mcruiseon.server.hibernate.ReadOnlyOperations  - Unable to create SessionFactory for Hibernate
233  [main] FATAL com.mcruiseon.server.hibernate.ReadOnlyOperations  - ./hibernate.cfg.xml not found
234  [main] FATAL com.mcruiseon.server.hibernate.ReadOnlyOperations  - org.hibernate.HibernateException: ./hibernate.cfg.xml not found
org.hibernate.HibernateException: ./hibernate.cfg.xml not found
    at org.hibernate.internal.util.ConfigHelper.getResourceAsStream(ConfigHelper.java:173)
    at org.hibernate.cfg.Configuration.getConfigurationInputStream(Configuration.java:1929)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1910) 
```

这是包含 cfg.xml 文件的文件夹的快照。 ![在此处输入图像描述](../Images/def4c58c8c112bdfe7b3208d99d17a9b.png)

我正在尝试使用以下代码片段初始化休眠。它正在与 just 一起工作`configure()`，由于某种原因它刚刚停止工作。

```
Configuration configuration = new Configuration().configure("./hibernate.cfg.xml");
sessionFactory = configuration.buildSessionFactory(new ServiceRegistryBuilder().buildServiceRegistry()); 
```

编辑：更糟糕的是，我现在开始遇到 log4j 问题。我只是度过了糟糕的一天。

```
INFO net.spy.memcached.MemcachedConnection:  Connection state changed for sun.nio.ch.SelectionKeyImpl@480457
Exception in thread "main" java.lang.NoSuchFieldError: TRACE
    at org.jboss.logging.Log4jLogger.translate(Log4jLogger.java:58)
    at org.jboss.logging.Log4jLogger.isEnabled(Log4jLogger.java:39)
    at org.jboss.logging.Logger.tracev(Logger.java:197) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:05:38.857

我无法想象你的根目录是什么。但是如果 ../mcruiseOn/mcruiseOserver/ 是根目录，那么请尝试将其放在那里。并将其称为“/hibernate.cfg.xml”。除了放置它的路径之外，您的休眠 xml 没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:11:14.100

我建议这样做：

1) 尝试检查 hibernate.cfg.xml 的系统权限是否具有 rw 权限

2）而是尝试提供可能有帮助的绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:02:44.960

根本原因：当我们从 Hibernate 3.5 迁移到 4.0 时，我们不应该从 3.5 替换 jpa 库。我在使用不正确的 log4j 时也发生了冲突。我必须使用“正在开发”的 log4j 1.2.12，而不是 1.2.9（稳定）版本才能使其正常工作。总而言之，升级是痛苦的，并且会产生各种疯狂的副作用。

谢谢@Arham 和@Raunak，你们是最有用的。很好的提示。

# facebook-fql - FQL 查询：仅获取朋友对我的信息流发表的所有帖子和评论

> ID：12995304
> 
> 赞同：0
> 
> 时间：2012-10-21T05:35:55.723
> 
> 标签：facebook-fql

我正在对我的朋友列表中的所有朋友成功使用以下 FQL 查询：

```
SELECT uid2 FROM friend WHERE uid1 = me() 
```

我想使用所有返回的 uid2 来执行第二个查询（或者只是将它组合成一个大查询！！！！）它只抓取朋友在我的 news_feed 上的所有评论、帖子和消息。

继承人我到目前为止抓住朋友和非朋友。

```
SELECT type, created_time, post_id, actor_id, message FROM stream WHERE filter_key IN (SELECT filter_key FROM stream_filter WHERE uid = me()) 
```

我只关心抓取朋友发布的内容（消息和文本信息）。如果您有一个可以提供帮助的查询，那就太好了。仅供参考，我已经去过 FB**流**表页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:40:53.837

将您的第一个语句作为另一个 where 子句附加到您的第二个：

```
SELECT type, created_time, post_id, actor_id, message FROM stream 
WHERE filter_key IN (SELECT filter_key FROM stream_filter WHERE uid = me())
AND actor_id IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

# java - 为什么我会得到 int.class cast 的类转换异常

> ID：12995305
> 
> 赞同：5
> 
> 时间：2012-10-21T05:36:18.503
> 
> 标签：java, generics

在下面的程序中，我不明白为什么会有`ClassCastException`for cast from`int.class`

**更新：** 我应该指定我知道原始类型是什么。`What I don't understand is why int.class is provided with broken implementation?`

```
 public static void main(String[] args) {
    System.out.println(DataType.INT.getValue(Integer.class));
    System.out.println(DataType.INT.getValue(int.class));//Class cast exception here
}

enum DataType {
    INT {
        @Override
        public <T> T getValue(Class<T> toClass) {
            return toClass.cast(1000);//ClassCastException here for int.class
        }
    };
    public abstract <T> T getValue(Class<T> toClass);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T06:13:48.723

发生这种情况是因为使用[isInstance()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29)`cast()`的操作。`Class` `method which returns false for primitive classes`

> 如果此 Class 对象表示原始类型，则此方法返回 false。

方法代码`cast()`如下

```
public T cast(Object obj) {
if (obj != null && !isInstance(obj))//It fails here since isInstance returns false
    throw new ClassCastException();
return (T) obj; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T05:37:30.687

好的，在浏览了一些链接并尝试了一些代码之后，我发现：-

*   `int.class`== `Integer.TYPE`== 整数
*   `int.class`!=`Integer.class`

因此， 的值`int.class`是表示类型的 Class 对象`int`。

所以，当你调用你的`DataType.INT`with时，你不能调用`int.class`的`toClass`containsts 。可能是因为它没有从类扩展。因为，方法内部用于检查调用类型是否为类型。`int``cast``Object``cast``isinstance``Object`

```
public T cast(Object obj) {
if (obj != null && !isInstance(obj))
    throw new ClassCastException();
return (T) obj;
} 
```

因此，如果调用的类型`cast`不是 的实例`Object`，当然`primitive`类型不是，它将返回`false`，因此返回 a `ClassCastException`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T05:56:04.240

当您尝试将一种数据类型的对象转换为另一种数据类型时，Java 会引发类转换异常。这里 int 不是一个对象，它是一个在运行时由一些本机代码实例化的原语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T06:24:34.823

我认为这是正在发生的事情：

当你打电话`return toClass.cast(1000);`时，字面`1000`量被提升为`Integer`。此处提到了提升规则：[**Java 语言规范**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.1)。

现在，当`cast`方法被调用时`intClass`，它会检查 argument(1000) 是否属于同一实例`int.class`，即它是否失败，因为它不是。

另一方面，当您转换为 时`Integer.class`，它是成功的，因为实例类型确实匹配。

**所以 the`ClassCastException`来是因为`Promotion`字面意思`1000`to `Integer`。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T05:37:27.097

`Integer`是`int`值的类包装器，`int`而是原始类型，而不是类。不要混淆原始类型和类，例如，在必须使用类的代码中：

```
List<int> lstInteger; //won't compile!
List<Integer> lstInteger; //compiles fine 
```

更多信息：

*   [Java：int 与 Integer](http://illegalargumentexception.blogspot.com/2008/08/java-int-versus-integer.html)
*   [Java：整数或整数](https://stackoverflow.com/q/423704/1065197)

* * *

将`int`类型视为原始 C/C++ int 类型。知道这一点， int 不是一个类，因此没有任何属性，任何方法，只是保存一个整数值。另一方面，`java.lang.Integer`是`int`原始类型的类包装器。这是为了`int`在只能使用对象实例的情况下使用。一个很好的例子是 Java 中的通用系统，它只适用于类（如您的代码示例中所建议的那样）。

有关这方面的更深入信息，您可以阅读 Oracle Java 教程：[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T05:46:55.943

我认为这是因为它`int.class`与`Integer.class`.

**更新**

* * *

我们可以看一下 cast 方法，它的参数是 an`Object`所以很明显 1000 被自动装箱，因此该方法的实际参数是一个实例`Integer`：

```
public T cast(Object obj) {
if (obj != null && !isInstance(obj))
    throw new ClassCastException();
return (T) obj;
} 
```

# java - 如何在Android / Java的for循环中等待迭代之间的特定时间？

> ID：12995307
> 
> 赞同：1
> 
> 时间：2012-10-21T05:37:00.243
> 
> 标签：java, android, for-loop

我正在制作一个程序，在同一个 ImageView 中显示图像的不同部分。但它应该在任何两个图像更改之间等待一段时间，大约 500 毫秒。像这样：

```
for(int i=1; i<=4;i++){
  for(int j=1;j<=4;j++){
  //code to refresh the image.
  // wait for 500 milliseconds before resuming the normal iteration
  }
} 
```

我尝试使用以下代码：

```
for(int i=1; i<=4;i++){
  for(int j=1;j<=4;j++){
    //code to refresh the image.
    Thread.sleep(500);
  }
} 
```

但这仅显示图像的最后一段，而不是逐段显示。顺便说一句，每个片段都保存为 pic1、pic2、pic3.. 等等（它们都是不同的图像）。我想要一个按以下顺序显示它们的解决方案：

*   图1
*   等待 500 毫秒
*   图2
*   等待 500 毫秒
*   图3
*   ... 等等

万分感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:53:38.390

如果这是在您的 UI 线程循环中，您应该使用 an`AsyncTask`或 a`Timer`来实现您的目标，以避免阻塞 UI。

使用`AsyncTask`：

```
class UpdateImages extends AsyncTask<Void, Integer, Boolean> {
    @Override
    protected void onPreExecute() {
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // refresh the image here
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        for(int i=0; i<4; i++) {
            for(int j=0; j<4; j++) {
                // NOTE: Cannot call UI methods directly here.
                // Call them from onProgressUpdate.
                publishProgress(i, j);
                try {
                    Thread.sleep(500);
                } catch(InterruptedException) {
                    return false;
                }
            }
        }
        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {
    }
} 
```

然后打电话

```
new UpdateImages().execute(); 
```

当你想开始这个任务时。使用`AsyncTask`这种方式可以避免阻塞你的 UI，并且仍然可以让你按时做任何你想做的事情。

# javascript - 嵌套引号和变量连接

> ID：12995308
> 
> 赞同：0
> 
> 时间：2012-10-21T05:37:24.127
> 
> 标签：javascript

我在这里遇到一个复杂的嵌套引号语句：

```
var name = "foo";
$("#list").append("<li data-theme='c'><a href='#details' onclick='sessionStorage.name=PRINT_VAR_NAME_HERE;' data-transition='slide'>PRINT_VAR_NAME_HERE</a></li>"); 
```

我可以使用以下命令在**第二个**位置打印变量的值：“+name+”

但不确定如何在第一个位置完成**它**。

（我使用 'PRINT_VAR_NAME_HERE' 作为第一个和第二个位置的占位符）

有任何想法吗 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:42:35.377

只需使用字符串分隔符 (the `"`) 来分隔字符串并将字符串与您的变量连接起来，然后转义（使用反斜杠）您需要出现*在*字符串本身中的任何引号：

```
$("#list")
    .append("<li data-theme='c'><a href='#details' onclick='sessionStorage.name=\"" + name + "\"' data-transition='slide'>"+ name + "</a></li>"); 
```

当然，我假设您想在字符串中引用变量，否则我看不出问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T16:18:09.890

我遇到了同样的问题，试图弄清楚如何在 JavaScript 中嵌套引号以生成 HTML。我在“onclick”区域遇到了一个特定的障碍，因为我在其中包含了一个变量。此外，浏览器错误地解释了我的报价。

解决方案：您必须明确告诉浏览器您正在使用哪些引号以及在哪里使用。为此，您使用 ' 表示单引号，使用 " 表示双引号。

希望这对某人有帮助...

```
document.getElementById("item-controls-" + id).innerHTML = "<span class=\'controls\' id=\'save-control\' onclick=&#39;saveForm(\"" + id + "\")&#39;>save</span> ... 
```

# java - 如何在 Netbean 6.8 中删除 Generated Souce(jax-ws)，我应该根据网站地址还是从 api 从 WSDL 生成 WS 客户端？

> ID：12995312
> 
> 赞同：1
> 
> 时间：2012-10-21T05:37:53.307
> 
> 标签：java, web-services, soap, webservice-client

我尝试在 Netbean 6.8 中使用 ws-import 生成这一代 java 类。我想重新生成一个 jax-ws，因为在包 ebay.api.paypalapi 中发现了一个错误（我认为该错误是由于来自 Paypal SOAP Api 的 wsdl 文件）。

Netbean 6.8 不允许删除 Generated Souce(jax-ws) 所以我使用基于 www.paypal.com/wsdl/PayPalSvc.wsdl 的 wsdl 重新创建了另一个 ws 文件，但它仍然无法正常工作。

希望有人建议我如何解决这个问题。谢谢。

这是错误代码：

```
 20-Oct-2012 21:39:18 : Retrieving Location: http://www.paypal.com/wsdl/PayPalSvc.wsdl 

    Retrieved :    https://www.paypalobjects.com/wsdl/PayPalSvc.wsdl 
    Saved at: C:\Documents and Settings\Karen\Desktop\ShoppingCart\src\conf       
    \xml-resources\web-service-references\PayPalSvc\wsdl\www.paypalobjects.com\wsdl\PayPalSvc.wsdl
     Retrieving Location: CoreComponentTypes.xsd 
    Found in document: https://www.paypalobjects.com/wsdl/PayPalSvc.wsdl

    Error: An I/O error occured. Remote host closed connection during handshake
    Retrieving Location: eBLBaseComponents.xsd 
    Found in document: https://www.paypalobjects.com/wsdl/PayPalSvc.wsdl
    Retrieved :    https://www.paypalobjects.com/wsdl/eBLBaseComponents.xsd 
    Saved at: C:\Documents and Settings\Karen\Desktop\ShoppingCart\src\conf     \xml-resources\web-service-        references\PayPalSvc\wsdl\www.paypalobjects.com\wsdl\eBLBaseComponents.xsd
    Retrieving Location: EnhancedDataTypes.xsd 
    Found in document: https://www.paypalobjects.com/wsdl/PayPalSvc.wsdl
    Retrieved :    https://www.paypalobjects.com/wsdl/EnhancedDataTypes.xsd 
    Saved at: C:\Documents and Settings\Karen\Desktop\ShoppingCart\src\conf\xml-resources\web-service-        references\PayPalSvc\wsdl\www.paypalobjects.com\wsdl\EnhancedDataTypes.xsd
    Retrieving Location: CoreComponentTypes.xsd 
    Found in document: https://www.paypalobjects.com/wsdl/eBLBaseComponents.xsd
    Retrieved :    https://www.paypalobjects.com/wsdl/CoreComponentTypes.xsd 
    Saved at: C:\Documents and Settings\Karen\Desktop\ShoppingCart\src\conf \xml-resources\web-service-        references\PayPalSvc\wsdl\www.paypalobjects.com\wsdl\CoreComponentTypes.xsd
    Retrieving Location: EnhancedDataTypes.xsd 
    Found in document: https://www.paypalobjects.com/wsdl/eBLBaseComponents.xsd
    File name already exists with the same content length. Ignoring the file.:
    Retrieving Location: EnhancedDataTypes.xsd 
    Found in document: https://www.paypalobjects.com/wsdl/eBLBaseComponents.xsd
    Retrieving Location: eBLBaseComponents.xsd 
    Found in document: https://www.paypalobjects.com/wsdl/CoreComponentTypes.xsd
    File name already exists with the same content length. Ignoring the file.:
    Retrieving Location: eBLBaseComponents.xsd 
    Found in document: https://www.paypalobjects.com/wsdl/CoreComponentTypes.xsd` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:19:19.830

wsimport 可以自己手动使用。

尝试下载 wsdl 文件和 wsdl 文件中链接的所有 xsd 文件。将 wsdl 文件保存为 .xml，将 xsd 保存为 .xsd 文件。修改 wsdl 文件以指向本地 xsd 文件。

然后尝试使用以下命令运行 wsimport：-

wsimport -keep -verbose -s 。-d 。-wsdllocation

然后尝试调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:04:12.357

查看`xsd`它们彼此链接的 s 以及导入，当它尝试第二次下载它时会出错。

我会将`wsdl`所有链接`xsd`的 s 下载到本地文件夹并尝试从那里生成 Web 服务客户端。如果您的 netbeans 代理生成器太愚蠢而无法处理此递归，请查看[axis2](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html#generating)。如果您碰巧使用 maven，请查看[wdl2code](http://axis.apache.org/axis2/java/core/tools/maven-plugins/maven-wsdl2code-plugin.html)。

# android - 在没有 MODE_WORLD_READ/WRITE 的情况下写入文件

> ID：12995314
> 
> 赞同：2
> 
> 时间：2012-10-21T05:38:00.843
> 
> 标签：android, android-emulator

好的，我遇到了很多关于创建和写入/读取文件的教程。我想要我的 Android 应用程序是创建一个小文本文件，它将在其中读取和写入一些设置，以便可以保存我的用户信息。问题是我遇到的每个教程都使用 SD 卡（允许用户和任何其他应用程序读取）或使用 MODE_WORLD_READABLE 使任何应用程序读取它。

我想知道如何创建和读/写我的文件，但私有或至少将其保存在手机的内部存储中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:52:36.377

这是一个简单的例子。要阅读首选项，请执行以下操作：

```
SharedPreferences preferences = getSharedPreferences("YourAppName", MODE_PRIVATE);
String thisString = preferences.getString("KeyForThisString", "default"); 
```

您可以 getInt、getLong 等。

要存储首选项，请使用以下行：

```
SharedPreferences preferences = getSharedPreferences("YourAppName",MODE_PRIVATE);
SharedPreferences.Editor editor = preferences.edit();
editor.putString("KeyForThisString", thisString);
editor.commit(); 
```

和以前一样，您可以使用 putInt、putLong 等。

此 API 的可用方法在这里：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:12:13.143

`dont know how to use it much and from what im seeing at least, its not much of a difference unless im wrong.`

我仍然建议使用`SharedPreferences`技术。这显然很容易，并且可以节省大量时间。

您可以使用它来保存任何原始数据：`booleans, floats, ints, longs, and strings`. 例如，每次用户调用对您的应用程序的任何更改时，您都可以这样做，因为它是一种高性能技术。通过这种方式，即使在崩溃时，所有编辑的信息也将被存储。

假设你有一个活动。

使用此方法`data`您要保存到文件的字符串在哪里。

```
private void saveInfo(String data){
   String key = "myKey"; 
   SharedPreferences.Editor editor = mPrefs.edit();
   editor.putString(key , data);
   editor.commit();
} 
```

现在，当您再次启动应用程序时，将`onCreate`调用方法，您可以将信息加载回来：

```
 private void loadInfo(){
     String key = "myKey"; 
     SharedPreferences mPrefs = context.getSharedPreferences(LauncherUI.PREFS_NAME, 0);
     String yourData = mPrefs.getString(key, ""); // "" means if no data found, replace it with empty string
} 
```

以下是 5 种数据存储类型的链接：[存储选项](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# c++ - 使用 C++ API 选择和存储数组

> ID：12995317
> 
> 赞同：3
> 
> 时间：2012-10-21T05:38:23.010
> 
> 标签：c++, z3

我正在使用 z3 v 4.1。我正在使用 C++ API，并尝试在上下文中添加一些数组约束。

我在 C++ API 中看不到选择和排序函数。我尝试混合使用 C 和 C++ API。`array_example1()`在C API 提供的示例中，如果我将上下文变量从`Z3_Context`（即 C API）更改为`context`（即 C++ API），我会在“create antecedent”语句中遇到分段错误

```
void array_example1(){

context ctx; //Z3_context ctx; 
Z3_sort int_sort, array_sort;
Z3_ast a1, a2, i1, v1, i2, v2, i3;
Z3_ast st1, st2, sel1, sel2;
Z3_ast antecedent, consequent;
Z3_ast ds[3];
Z3_ast thm;

printf("\narray_example1\n");
LOG_MSG("array_example1");

//ctx = mk_context();

int_sort    = Z3_mk_int_sort(ctx);
array_sort  = Z3_mk_array_sort(ctx, int_sort, int_sort);

a1          = mk_var(ctx, "a1", array_sort);
a2          = mk_var(ctx, "a2", array_sort);
i1          = mk_var(ctx, "i1", int_sort);
i2          = mk_var(ctx, "i2", int_sort);
i3          = mk_var(ctx, "i3", int_sort);
v1          = mk_var(ctx, "v1", int_sort);
v2          = mk_var(ctx, "v2", int_sort);

st1         = Z3_mk_store(ctx, a1, i1, v1);
st2         = Z3_mk_store(ctx, a2, i2, v2);

sel1        = Z3_mk_select(ctx, a1, i3);
sel2        = Z3_mk_select(ctx, a2, i3);

/* create antecedent */
antecedent  = Z3_mk_eq(ctx, st1, st2);

/* create consequent: i1 = i3 or  i2 = i3 or select(a1, i3) = select(a2, i3) */
ds[0]       = Z3_mk_eq(ctx, i1, i3);
ds[1]       = Z3_mk_eq(ctx, i2, i3);
ds[2]       = Z3_mk_eq(ctx, sel1, sel2);
consequent  = Z3_mk_or(ctx, 3, ds);

/* prove store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3)) */
thm         = Z3_mk_implies(ctx, antecedent, consequent);
printf("prove: store(a1, i1, v1) = store(a2, i2, v2) implies (i1 = i3 or i2 = i3 or select(a1, i3) = select(a2, i3))\n");
printf("%s\n", Z3_ast_to_string(ctx, thm));
prove(ctx, thm, Z3_TRUE);

} 
```

我还尝试将它们转换`st1`为`st2`从`Z3_AST`到`expr`然后将它们等同，但我仍然遇到分段错误。如何使用 C++ API 使用选择和存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:05:21.947

Z3 有两种内存管理模式：push/pop 和引用计数。引用计数是在很久以后才引入的。用于创建的 C API 方法`Z3_Context`定义将使用哪种内存管理模式。API`Z3_mk_context`创建一个`push/pop`使用策略的上下文。也就是说，AST 对象在`Z3_pop`被调用时被删除。在匹配之间创建的任何 AST 对象`Z3_push`都将被删除。此策略易于使用，但它可能会阻止您的应用程序释放未使用的内存。API`Z3_mk_context_rc`创建一个使用引用计数来回收内存的上下文。这是 Z3 4.x 中的官方方法。此外，Z3 4.x 中引入的新对象（例如，战术、求解器、目标）仅支持这种方法。如果您使用 C++、C#、OCaml 或 Python API。然后，使用新的引用计数策略就非常简单了。另一方面，C API 更难使用，因为我们必须显式调用`Z3_*inc_ref`and`Z3_*dec_ref`API。如果我们错过其中一个，我们可能会发生崩溃（如您的示例）或内存泄漏。在 C++ API 中，我们提供了几个“智能指针”来自动为我们管理引用计数器。

您的示例崩溃，因为您替换`Z3_context ctx`为`context ctx`. 类的构造函数`context`使用`Z3_mk_context_rc`而不是`Z3_context`. c++ 目录中的文件`example.cpp`演示了如何组合 C++ 和 C API（参见函数`capi_example()`）。在此示例中，C++ 智能指针用于包装 C API 返回的 C 对象。

最后，C++ API 提供了以下用于创建数组表达式的函数：

```
inline expr select(expr const & a, expr const & i) {
    check_context(a, i);
    Z3_ast r = Z3_mk_select(a.ctx(), a, i);
    a.check_error();
    return expr(a.ctx(), r);
}
inline expr select(expr const & a, int i) { return select(a, a.ctx().num_val(i, a.get_sort().array_domain())); }
inline expr store(expr const & a, expr const & i, expr const & v) {
    check_context(a, i); check_context(a, v);
    Z3_ast r = Z3_mk_store(a.ctx(), a, i, v);
    a.check_error();
    return expr(a.ctx(), r);
}
inline expr store(expr const & a, int i, expr const & v) { return store(a, a.ctx().num_val(i, a.get_sort().array_domain()), v); }
inline expr store(expr const & a, expr i, int v) { return store(a, i, a.ctx().num_val(v, a.get_sort().array_range())); }
inline expr store(expr const & a, int i, int v) { 
    return store(a, a.ctx().num_val(i, a.get_sort().array_domain()), a.ctx().num_val(v, a.get_sort().array_range())); 
} 
```

# c# - 子/父关系的类编程方法

> ID：12995318
> 
> 赞同：0
> 
> 时间：2012-10-21T05:38:33.510
> 
> 标签：c#

我正在开发一个从各种在线档案中抓取内容的程序，但对 OOP 还是陌生的。我认为最好的方法是有一个指定共享变量和方法的父类，然后是每个存档的子类，然后包含从该特定站点获取信息的特定方法，例如 GrabStoryVariables() 存在于每个子类以适应该档案的个人需求。该程序在文本框中获取一个 URL，然后从那里它将确定使用 URL 来实例化哪个子类。

我遇到的问题是弄清楚如何创建子类对象并使其可供整个程序访问。例如，要创建 FanFictionAuthors 的实例： FanBook：

```
private void btnGetInfo(object sender, EventArgs e)
{
  CreateBook();
}

private void CreateBook()
{
  if (addressBar.Text.Contains("fanficauthors.net"))
  {
    FanFictionAuthors myBook = new FanFictionAuthors();
  }
  return;
} 
```

myBook 的作用域只是 CreateBook() 函数，所以这种方法不会奏效。有关处理此问题的最佳方法的任何建议？我用它作为一种更好地学习编程的方法，所以“正确”的方法是我想要弄清楚的，不管是什么。

编辑：该程序的特定功能是从 fanfiction.net、fictionpress.com 或任意数量的其他在线故事档案中获取在线故事的 URL。每个故事都有一组共享属性，例如标题、章节数、字长、章节标题和故事的实际内容。该程序编译所有这些以创建单个 html 文档（后来被扩展以允许不同的电子书格式），而不是一堆小的单个章节文件。

考虑到这一点，每个存档之间唯一不同的部分是从特定存档中获取变量的方法以及如何根据存档的功能在章节之间进行迭代。

目前我正在做的只是在启动主窗体后立即创建一个 myBook 对象，然后为获取变量并进行迭代的函数创建一个不同的方法名称。然而，随着我添加更多档案，这变得更加复杂。我最初想做的只是将 myBook 转换为单个存档类型（在本例中为 FanFictionAuthors），以获取使用其特定功能的能力。在网上看，从父母到孩子的铸造似乎并不容易，也不推荐，所以我不知道还有什么方法可以解决这个问题。

这是该项目的 GitHub 链接。这个版本有点过时了，但让你看看我目前是如何处理这个的：[https ://github.com/benroth/fBook](https://github.com/benroth/fBook)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:50:51.533

创建一个超类，您可以在其中使用公共属性和方法：

```
public class FanBook
{
    // use a common constructor
    public FanBook(string url)
    {
        grabHtml(url);
        // ...
    }

    protected string grabHtml(string address) { // SNIP }

    protected void CreateStoryHeader() { // SNIP }

    // other common methods which are the same for every subclass (maybe BuildToc, GetStory, etc.)

    // maybe if you want some easy access to attributes, you could add a dictionary
    public void Dictionary<string, string> Attributes;

    // Then use abstract methods to define methods that are different for subclasses
    protected abstract void GrabStoryVariables();
    protected abstract void GenerateStoryInfo();
} 
```

然后创建一个派生自的子类`Book`：

```
public class FFNETBook : FanBook {
    // FFNETBook constructor to call contructor from FanBook too
    public FFNETBook(string url) : FanBook(url) {
        // specific initializations for FFNET

    }

    public override void GrabStoryVariables() { // special implementation for FFNET here }

    public override void GenerateStoryInfo() { // special implementation for FFNET here }
} 
```

我知道当您没有太多经验时，很难掌握 OOP。因此，请随时提出问题。如果你做对了，那么你永远不需要转换成子类。

要回答评论中的问题：

您可以在`form1.cs`文件中创建一个类变量：

```
private FanBook currentBook;

private void CreateBook()
{
    currentBook = new FFNETFanBook("http://...");
}

private void AnotherMethod() {
    if ( currentBook != null ) {
        currentBook.GrabStoryVariables();
    } else {
        throw new Exception("Book not initialized yet.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:51:49.337

实现一个名为 IAuthors 的接口并定义你想要的方法

```
Interface IAuthors
{
//method
void authorMethod();
} 
```

跨类实现接口

```
Public Class FanFictionAuthors:IAuthors
{
public void authorMethod()
{
//fanfiction specific action
}
}

Public class SciFiAuthors:IAuthors
{
public void authorMethod()
{
//scifiauthor specific action
}
} 
```

现在对现有代码进行以下更改

```
private void btnGetInfo(object sender, EventArgs e)
{
  IAuthors auth=CreateBook();//Use a Interface ref
  auth.authorMethod();//Runtime will decide which authorMethod to call depending 
                      //on the object returned.
}

//Note that i am returning the Interface type instead of the void
private IAuthors CreateBook()
{
  if (addressBar.Text.Contains("fanficauthors.net"))
  {
    return new FanFictionAuthors();//Return your object
  }elseif(addressBar.Text.Contains("scificauthors.net"))
  {
    return new SciFiAuthors();//Return your object
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T06:52:51.113

您可以在父级中创建一个列表并将子级添加到该列表中。然后，您可以遍历该列表以查看孩子是否完成等。

```
ChildList.Add(new fan....) 
```

# sencha-touch - 在 Sencha Touch Container 中引用 HTML 对象

> ID：12995319
> 
> 赞同：0
> 
> 时间：2012-10-21T05:38:56.410
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 Sencha Touch 2.0.1。我正在尝试获取对容器中某些 HTML 的引用。（我的目标是读取对象的宽度，并在必要时缩小字体大小以使其适合）。

这是我的代码：

```
Ext.define("SFCT.view.Flashcard", { 
    extend: 'Ext.Container', 

    xtype: 'flashcardpanel', 

    requires: [ 
        'Ext.TitleBar' 
    ], 

    config: { 
        itemId: 'mainScreen', 
        title: 'Flashcards', 

        layout: 'fit', 

        items: [ 
            { 
                xtype: 'container', 
                layout: { 
                    type: 'vbox', 
                    pack: 'center' 
                }, 
                items: [ 
                    { 
                        xtype: 'container', 
                        itemId: 'wordContainer' 
                    } 
                ], 
                style: 'text-align: center' 
            }, 
            { 
                xtype: 'button', 
                docked: 'right', 
                text: 'Next', 
                action: 'next' 
            } 
        ] 
    }, 

    updateWord: function(newWord) { 
        var s = '<div style="font-size: 72px">' + newWord+ '</div>'; 
        var c = Ext.ComponentQuery.query('#wordContainer')[0]; 
        console.log(c.getHtml()); 
        c.setHtml(s); 
    } 
}); 
```

如果我使用如上所示的 Ext.Container.getHtml()，它将 HTML 作为字符串返回。但我正在寻找对 div 元素本身的引用，以便获得它的宽度。

任何想法我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:48:43.233

如果我没错的话

```
c.element 
```

应该让您参考被包装的元素。

# objective-c - 使用 CorePlot 的项目中的链接器错误，刚刚升级到 IOS 6

> ID：12995320
> 
> 赞同：0
> 
> 时间：2012-10-21T05:38:59.407
> 
> 标签：objective-c, ios, linker, ios6, core-plot

> **可能重复：**
> [CorePlot 无法在 XCode 4.4 中构建](https://stackoverflow.com/questions/11772545/coreplot-failed-to-build-in-xcode-4-4)

我有以下链接器错误：-

> clang：错误：-Z-reserved-lib-stdc++：存在“-c”时未使用“链接器”输入 命令/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败退出代码 1

我刚刚升级到 IOS 6，我的项目正在使用 CorePlot 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:23:10.297

[您是否尝试过coreplot github](https://github.com/djw/core-plot)的新版核心情节？应该解决问题。

# scala - 不知道我的任务要去哪里

> ID：12995322
> 
> 赞同：8
> 
> 时间：2012-10-21T05:39:12.403
> 
> 标签：scala

我今天遇到了一些问题，对`var`存储在地图中的案例类实例中的字段进行分配。这是演示问题的 repl 中的一个简单会话：

```
scala> case class X(var x: Int)
defined class X

scala> val m = Map('x -> X(1))
m: scala.collection.immutable.Map[Symbol,X] = Map('x -> X(1))

scala> m
res0: scala.collection.immutable.Map[Symbol,X] = Map('x -> X(1))

scala> m('x).x = 7

scala> m
res1: scala.collection.immutable.Map[Symbol,X] = Map('x -> X(1))

scala> val x = m('x)
x: X = X(1)

scala> x.x = 7
x.x: Int = 7

scala> x
res2: X = X(7)

scala> m
res3: scala.collection.immutable.Map[Symbol,X] = Map('x -> X(7))

scala> m('x).x_=(8)

scala> m
res5: scala.collection.immutable.Map[Symbol,X] = Map('x -> X(8)) 
```

第一次分配尝试什么也没做。但是，将实例存储在 val 中，然后进行赋值，就像直接调用字段的赋值方法一样。

我正在使用 Scala 2.9.2。

如果这是预期的行为，那么如果有人可以向我解释它会很好，因为我现在似乎无法理解它。如果这是一个错误，那么也很高兴知道。

无论哪种方式，知道第一个`m('x).x = 7`任务的去向也很有趣。我假设*某处某处发生**了*变异——我只是不知道那可能是什么。

 ***更新：**看起来这只发生在 repl 中。我刚刚尝试编译代码并且分配按预期发生。那么，repl 对我的作业做了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:19:14.607

这似乎是一个错误。如果使用 2.10 nightly 执行此操作，则会引发错误消息：

```
scala> m('x).x = 7
<console>:10: error: ')' expected but string literal found.
 + "m(scala.Symbol("x")).x: Int = " + `$ires0` + "\n" 
                    ^ 
```

我为此创建了[一张票](https://issues.scala-lang.org/browse/SI-6549)。*

# windows-services - 处理超时或失败的服务依赖项

> ID：12995326
> 
> 赞同：0
> 
> 时间：2012-10-21T05:39:52.930
> 
> 标签：windows-services

我编写了一个 Windows 服务，它覆盖 ISenesLogon2 的 Logon 和 Logoff 方法，以检查何时发生登录和注销，然后将日志信息插入服务器计算机上的 sql server 中。

但是当我在服务器之后打开客户端计算机时出现问题。

在这种情况下，我的服务无法插入 sql server。

我认为这是因为在 winservice 尝试访问它之前，sql server 没有完全加载。

所以我想找到一种方法来以编程方式检查 sql server 是否准备好然后尝试使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:56:01.307

您的服务无法启动，直到其依赖项远程或其他方式也已启动。检查 SQL Server 很容易，尝试连接它并重试直到成功。

唯一的问题是服务在启动时会超时，你不能坐下来无限期地重复这个。

不能在合理的时间范围内可靠地启动的事情不应该是服务，或者它们应该尽快失败。否则，您最终会收到大量关于服务超时的支持请求。

服务通常也不是与用户交互的，所以失败更糟，因为除非你做一个托盘图标，否则你不能直接告诉用户你没有启动。

# javascript - 事件更改不会在动态填充的选取器上触发 - Titanium SDK

> ID：12995327
> 
> 赞同：0
> 
> 时间：2012-10-21T05:39:59.633
> 
> 标签：javascript, titanium, titanium-mobile

我正在尝试创建一个自定义 Picker，其数据来自远程 JSON。问题是，当我从选择器中选择一行时，它不会在第一次触发选择器上的“更改”事件，我必须关闭选择器并再次从选择器中选择一行，然后事件更改才起作用.

```
var clubs_data = [];
//custom object to handle the httpClient
new K().scoutmobile.Tools.getData(new K().scoutmobile.URL_BASE, {Accion:new K().scoutmobile.CLUBS}, function(_response){
    if(response.status.codigo === "RESULT"){
        clubs_data.push(Ti.UI.createPickerRow({title:'select a club'}));
        for(_j in _response.data){
            clubs_data.push(Ti.UI.createPickerRow({color:'#fff',title: _response.data[_j].Propiedades.club_nombre.Valor, id:_response.data[_j].Propiedades.club_id.Valor}));

        inputClubs.add(clubs_data); //where inputClubs is created previously

    }else{                              
        new K().scoutmobile.Tools.createDialog('invalid_user_alert_dialog_title','invalid_user_alert_dialog_message');
    }
});

//event listener
inputClubs.addEventListener('change', function(e){
        Ti.API.info(e.row.id);
    });

win.add(inputClubs); 
```

在 Titanium Studio 控制台中，我得到了这个：

```
[WARN][InputManagerService(   60)] Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@43f8dbb8 
```

任何想法它正在发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:39:14.780

我对此有三个解决方案，但都不够好：

1.  一个非常愚蠢的解决方案是让选择器在开始时指向空选项，然后用户无论如何都需要更改它
2.  如果您使用该选择器值加载 UI 的另一个元素，则可以使用默认（或第一个）选项预加载该部分
3.  您可以修改 Titanium SDK 源代码，他们在其中编写此日志“窗口已聚焦”并触发更改事件。这非常简单，我已经为 TabGroup 控件完成了该操作，可能需要 2 小时的时间（对于 Android 或IOS）

# c - “机械臂移动积木堆”C语言编程挑战

> ID：12995328
> 
> 赞同：3
> 
> 时间：2012-10-21T05:40:22.323
> 
> 标签：c, algorithm, recursion, tree

我试图解决这个问题，但我在实现上遇到了一些麻烦，问题是这样的：

*有 n 叠块，每叠包含 m 个块，用 c 语言设计一个程序，控制一个机械臂，该机械臂使用可能的最小移动量将块从初始配置移动到最终配置，您的手臂一次只能移动一个块并且只能在堆栈顶部获取块，您的解决方案应该使用指针或递归方法*

换句话说，块应该从这里开始（假设有 3 个堆栈和 3 个块）：

```
| || || |
|3|| || |
|2||1|| | 
```

对此：

```
| ||1|| |
| ||2|| |
| ||3|| | 
```

使用最短的动作打印每个动作

我在想也许我可以使用某种树来解决它（也许是 n 叉树？），因为这是指针和递归方法的完美使用，但到目前为止它被证明是不成功的，我遇到了很多麻烦定义将存储所有动作的结构，因为每次我想向树中添加新动作时我都必须检查，如果该动作之前没有完成，我希望每个叶子都是唯一的，所以当我找到解决方案时会给我最短的路径。

这是我想到的数据结构：

```
typedef struct tree(
char[MAX_BLOCK][MAX_COL] value;    
struct tree *kids
struct tree *brothers;
)Tree; 
```

（我真的是 C 的新手，如果这一切都错了，我很抱歉，我更习惯 Java）

你们会怎么做呢？你有什么好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:00:33.700

您有基本的想法-尽管我不确定您为什么选择选择兄弟而不是父母。

您*可以*通过简单的 BFS 搜索来解决这个问题，但它是一个稍微不那么有趣的解决方案，而不是您似乎已经为自己设置的那个解决方案。

我认为，如果我们简明扼要地将我们解决问题的方法表述为[Dijkstra's](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)、 A* 或其他一些搜索算法的公式，将会有所帮助。

如果您不熟悉 Dijkstra 算法，则必须先阅读该算法，然后再尝试进一步尝试。它是最短路径探索的基础性工作之一。

熟悉 Dijkstra 的，A* 可以很容易地描述为

> Dijsktra 最小化从一开始的距离。A* 添加了一个启发式方法，可以最小化到终点的（预期）距离。

考虑到这个算法，让我们说明 A* 搜索算法的特定输入。

> 给定一个开始配置*S-start*和一个结束配置*S-end* ，给定一组由奖励函数*T管理的规则**R*，我们能否找到从 S-start 到 S-end 的最短路径

 *现在，我们可以设想我们的数据结构不是树，而是图。节点将是棋盘状态，我们可以使用我们的规则 R 从一个状态转换到另一个状态。我们将使用奖励函数 T 选择要遵循的边，即 A* 的启发式。

您的数据结构中缺少的是成本。在每个节点上，您都需要存储当前的最短路径，以及它是否已最终确定。

让我们对您的数据结构进行修改，这将使我们能够轻松地遍历图形并存储最短路径信息。

```
typedef struct node {
  char** boardState;
  struct node *children;
  struct node *parent;
  int distance;
  char status; //pseudo boolean
} node; 
```

> 如果您有兴趣自己发现算法，您可能想在这里停下来。

我们现在考虑我们系统的规则：一次一个块，从堆栈的顶部开始。每一步都将构成我们图中的一条*边*，其权重由 S-begin 的最短移动数加上我们添加的启发式算法决定。

然后我们可以画出算法的草图，如下所示：

```
node * curr = S-begin;
while (curr != S-end) {
  curr->status == 'T'; //T for True
  for(Node child : children) {
     // Only do this update if it is cheaper than the 
     int updated = setMin(child->distance, curr->distance + 1 + heuristic(child->board));
     if(updated == 1) child->parent = curr;  
  } 
  //set curr to the node with global minimum distance who has not been explored
} 
```

然后，您可以通过从 S-end 到 S-begin 向后跟踪父项来找到最短路径。

如果您对这些类型的问题感兴趣，您应该考虑参加研究生级别的 AI 课程，他们会在其中解决这些类型的问题 :-)*

# c - K&R 的 C 编程语言示例 CH1

> ID：12995332
> 
> 赞同：2
> 
> 时间：2012-10-21T05:42:12.887
> 
> 标签：c

我正在阅读这本书，并且遇到了一些我不知道如何从第 1 章测试的示例。它们让你逐行阅读并寻找不同的字符，但我不知道如何测试我制作的 C 代码.

例如：

```
/* K&R2: 1.9, Character Arrays, exercise 1.17

STATEMENT:
write a programme to print all the input lines
longer thans 80 characters. 
*/
<pre>
#include<stdio.h>

#define MAXLINE 1000
#define MAXLENGTH 81

int getline(char [], int max);
void copy(char from[], char to[]);

int main()
{
  int len = 0; /* current line length */
  char line[MAXLINE]; /* current input line */

  while((len = getline(line, MAXLINE)) > 0)
{
  if(len > MAXLENGTH)
printf("LINE-CONTENTS:  %s\n", line);
}

return 0;
}
int getline(char line[], int max)
{
int i = 0; 
int c = 0; 

for(i = 0; ((c = getchar()) != EOF) && c != '\n' && i < max - 1; ++i)
  line[i] = c;

if(c == '\n')
  line[i++] = c;

 line[i] = '\0';

 return i;
} 
```

我不知道如何创建一个具有不同行长的文件来测试它。在做了一些研究之后，我看到有人这样尝试：

```
[arch@voodo kr2]$ gcc -ansi -pedantic -Wall -Wextra -O ex_1-17.c
[arch@voodo kr2]$ ./a.out 
like htis
and
this line has more than 80 characters in it so it will get printed on the terminal right
now without any troubles. you can see for yourself
LINE-CONTENTS:  this line has more than 80 characters in it so it will get printed on the
terminal right now without any troubles. you can see for yourself
but this will not  get printed
[arch@voodo kr2]$ 
```

但我不知道他是如何管理的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:49:30.097

该程序读取标准输入。如果您只是准确地键入该示例中显示的内容，您将看到相同的输出。输入 a`^D`以结束您的程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T05:59:34.770

```
for(i = 0; ((c = getchar()) != EOF) && c != '\n' && i < max - 1; ++i) 
```

这行代码告诉您您需要了解的有关 getline() 函数的所有信息。

它将逐个字符读取并将其存储在数组中，直到：

1.  您不要在终端上按 ^D(linux)/^Z(win) (^ = control)
2.  您不按键盘上的“输入”键
3.  输入的字符数不应超过`max - 1`. 否则它们将不会被复制。在您的示例中， max = 1000 因此只输入了 999 个字符。

# networking - m/m/1 队列示例

> ID：12995339
> 
> 赞同：1
> 
> 时间：2012-10-21T05:43:48.847
> 
> 标签：networking, queue

我很难处理 M/M/1 队列（通用队列架构）。我明白那个

(lambda)^2/(mu*(mu-lambda)) = 平均排队等候的顾客人数

我正在努力解决的部分是我的队列仅限于 3 个客户等待，然后他们被丢弃。那么我如何找到我现在排队等候的普通客户呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:21:59.270

从逻辑上讲，限制队列会使某些队列状态（即 > n）成为不可能。因此，您处于所有状态的概率 < n 总和为 1.0。

对“队列大小有限的 mm1”进行简单的 Google 搜索，第一个结果是可以回答您问题的 PDF。该论文实际上给出了可用的公式。

# networking - WireShark/Fiddler 类似 Windows Mobile 6 的网络捕获工具

> ID：12995343
> 
> 赞同：0
> 
> 时间：2012-10-21T05:44:48.253
> 
> 标签：networking, windows-mobile, windows-mobile-6.5

是否有任何 WireShark/Fiddler 之类的 Windows Mobile 6 网络捕获工具？我想调试我的手机的网络流量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:11:02.030

如果我没记错的话，Windows Mobile 6 支持 WiFi 模式代理，这意味着您可以像捕获 Windows Phone 7 一样捕获其流量。请参阅[此归档文章](http://web.archive.org/web/20121026074003/http://www.fiddler2.com/fiddler/help/hookup.asp#Q-WinPhone)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T22:33:53.237

您应该使用 Windows 7/8 PC 连接自创建的恶意接入点，并使用 WireShark 捕获接入点上的流量。查看以下链接了解更多详情 - [http://mohit.io/blog/windows-capture-analyze-mobile-device-network-traffic/](http://mohit.io/blog/windows-capture-analyze-mobile-device-network-traffic/)

# ios - GCD、NSThread 或 NSOperationQueue 哪个最好？

> ID：12995344
> 
> 赞同：22
> 
> 时间：2012-10-21T05:44:54.227
> 
> 标签：ios, multithreading, grand-central-dispatch, nsthread, nsoperationqueue

iOS 中多线程的最佳方式是什么，因为我们有三个选项 GCD `NSThread`、 和`NSOperationQueue`？我很困惑哪一个是最好的？如果没有，那么应该在什么场景下使用哪个以及它们有何不同，如果有人有一些很好的使用示例`NSOperationQueue`，请分享，以便我学习。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-22T17:55:49.230

简单的回答：

1.  当您想要或需要直接控制您创建的线程时，请使用 NSThread（甚至 pthreads API），例如，您需要对线程优先级进行细粒度控制，或者与其他一些直接出售/使用线程对象的子系统交互，而您需要与它保持在同一页面上。这种情况很少见，但确实会发生，尤其是在实时应用程序中。

2.  当您的任务非常适合简单的并行化时，请使用 GCD，例如，您只想将一些工作“扔到后台”而几乎没有额外的工作，您有一些数据结构，您只想序列化访问（并且串行队列很棒以无锁方式执行此操作），您有一些 for 循环可以很好地与 dispatch_apply() 并行化，您有一些 GCD 的源 API 将使您能够在后台轻松处理的数据源/计时器等. GCD 非常强大，你可以用它做更多的事情，但这些都是相对“不费吹灰之力”的场景，你不想陷入初始化和设置任务中，就像简单地“做基本的并行的东西”。

3.  当您已经在 Cocoa API 层（而不是直接用 C 语言编写 POSIX API）并且想要并行化更复杂的操作时，请使用 NSOperation。NSOperation 允许子类化、任意复杂的依赖图、取消和支持许多其他可能对您有用的高级语义。NSOperation 实际上在幕后使用 GCD，因此它与 GCD 一样具有多核、多线程能力，尽管它也带来了 Foundation 框架，所以如果你在 POSIX 层进行黑客攻击，你可能想要使用选项#2。

然而，正如其他人所说，这完全取决于您要做什么，因此您的问题没有单一甚至普遍正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:55:14.603

我最近一直倾向于 NSOperationQueue。这在内部使用 GCD 并且是线程安全的，并且使用起来非常简单。

# asp.net - IIS 7 应用程序池工作进程寿命和会话寿命

> ID：12995345
> 
> 赞同：3
> 
> 时间：2012-10-21T05:45:23.603
> 
> 标签：asp.net, asp.net-mvc, session, iis-7, worker-process

在 IIS7 应用程序池中有一个设置空闲超时默认为 20 分钟，它表示：

> 工作进程在关闭之前将保持空闲的时间量（以分钟为单位），如果工作进程不处理请求并且没有收到新请求，则工作进程处于空闲状态。

我的问题是，如果工作进程由于超时时间而关闭，那么托管在这个工作进程中的应用程序创建的会话会丢失吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:38:54.323

是[的 - 会话数据与应用程序池工作进程相关联](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)，因此一旦工作人员关闭，会话数据就会丢失。

> 默认行为是将会话变量存储在 ASP.NET 工作进程的内存空间中。

（当然，这假设您使用*InProc*作为会话模式。如果您使用的是数据库，那么它将在工作程序关闭后持续存在。）

# c# - 用于更改可空和非空数据类型的数据注释是什么？

> ID：12995349
> 
> 赞同：2
> 
> 时间：2012-10-21T05:46:32.500
> 
> 标签：c#, entity-framework, asp.net-mvc-4, visual-studio-2012, entity-framework-migrations

我认为这对于有经验的程序员来说应该很简单，但它就是这样。我正在使用实体框架代码进行项目。我还启用了迁移并设置为自动（可爱的功能）。

我愚蠢地在我的实体类中声明了一种数据类型错误，现在我意识到它不适用于我正在尝试做的事情。一定是自动完成功能。但无论如何，该字段可以为空，现在我已将其更改为我想要的，它已将该字段设置为“非空”。

起初：`public virtual Byte[] ImageData { get; set; }`

变成：`public virtual byte ImageData { get; set; }`

现在我已经更改并构建了解决方案，`update-database -force`将无法正常工作并引发错误：

```
Cannot insert the value NULL into column 'ImageData', column does not allow nulls. UPDATE fails. The statement has been terminated. 
```

是否有我可以用来将此字段设置回可为空的数据注释？

例如：`[DataType(DataType.Upload)]`

我已经在这里浏览了相当长的时间，但似乎找不到我要找的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T05:57:03.837

将属性类型更改为可为空的形式`byte?`。

```
public virtual byte? ImageData { get; set; } 
```

# python - 写python程序写python程序

> ID：12995357
> 
> 赞同：0
> 
> 时间：2012-10-21T05:49:37.270
> 
> 标签：python, file, python-2.7, procedure

我正在尝试编写一个程序来自动化制作 tkinter 窗口的过程，所以我试图使用 open() 函数打开一个 txt 文件（可能应该是 .py 不应该吗？）这使得窗口，我试图让它写的代码是：

```
def a_procedure():
    window = Tk()
    #rest of code necessary to make a Tkinter window 
```

但问题是，当我使用

```
open()
textfile.write("def a_procedure()"/
"window = Tk()") 
```

我在文本文件中得到的是： def a_procedure(): window = TK() #rest of text

是否有（a）用 open() 编写多行的方法或（b）用过程编写过程的更好方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T06:12:08.730

您的示例没有显示您将如何改变生成的函数（因为如果它们都相同，则不需要生成它们）。所以我将展示一个不同的例子，一个函数可以返回一个新函数。

```
def make_function(first_multiplicand):
    def multiply(second_multiplicand):
        return first_multiplicand * second_multiplicand

    return multiply 
```

然后你可以制作乘以不同数量的函数：

```
doubler = make_function(2)
tripler = make_function(3)
print doubler(7), tripler(7) 
```

这样你就不必先写出一个`.py`文件然后再写`import`它（如果你不能在任何有用的地方写出文件，这可能会出现问题，并且要求你通过字符串格式创建 Python 源代码，这很丑陋） .

它也值得一看`functools`，尤其是`functools.partial`；您可以使用它重写上面的内容，如下所示：

```
import functools

def make_function(first_multiplicand):
    def multiply(first, second):
        return first * second
    return functools.partial(multiply, first_multiplicand) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T05:51:40.730

您可以使用多行字符串：

```
textfile.write("""
def a_procedure():
    window = Tk()
""") 
```

只要确保正确缩进。

为什么需要从 Python 脚本生成 Python？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T05:55:21.937

尝试：“def a_procedure():\n\twindow = Tk()”

# javascript - 使用 CSS 重新创建电话短信 UI：在保持滚动的同时将对话绝对定位到底部

> ID：12995358
> 
> 赞同：0
> 
> 时间：2012-10-21T05:49:48.833
> 
> 标签：javascript, css

在黑客马拉松中工作，我们的手机模型有问题。我们想将文本流锚定到底部：似乎是一个很好的位置机会：绝对......对吗？好吧，这使得我们的滚动不起作用。现在它被锚定在顶部，相对定位，并且滚动确实有效。

尝试单击“我说过...”按钮几次。理想情况下，这些按钮应该（连同出现的文本框）锚定到底部。

这是临时网址：

[http://gotinto.com/text/](http://gotinto.com/text/)

和一个永久的 JS Fiddle URL：

[http://jsfiddle.net/Qyn7V/](http://jsfiddle.net/Qyn7V/)

这是简单的 HTML：

```
 <div class="convoPhone">
    <div class="phoneDisplay">
    <div class="convoCont">
    <div class="actualConvo">...(the actual text convo goes here)...</div></div></div></div> 
```

有什么解决办法吗？我们愿意接受 javascript、CSS 以及任何组合。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:46:09.527

你试过位置：固定吗？观察您的链接，作为概念证明，应该这样做：

```
<div class="addLine" style="position: fixed; bottom: 60px; width: 290px;"> 
```

编辑：将三个占位符对话作为具有可见性的占位符：隐藏（这确保它们占据空间）。

```
<div class="convoCont">
    <div class="actualConvo" style="">
        <div class="invisibleFirst">
            <div style="visibility: hidden;" class="textInputCont isaid"><div class="author">Me:</div><textarea class="isaid"></textarea><div class="delete">Remove</div></div>
            <div style="visibility: hidden;" class="textInputCont isaid"><div class="author">Me:</div><textarea class="isaid"></textarea><div class="delete">Remove</div></div>
            <div style="visibility: hidden;" class="textInputCont isaid"><div class="author">Me:</div><textarea class="isaid"></textarea><div class="delete">Remove</div></div>
        </div>          
    </div>
    <div class="addLine" style="position: fixed; bottom: 60px; width: 290px;">
        <div class="isaid textLine">I said...</div>
        <div class="tsaid textLine">They said...</div>
    </div>
    <br class="clear">
</div> 
```

然后对于前 3 个真实条目中的每一个，删除一个占位符。**如果您想要更高的精度，您可以在actualConvo**上使用 padding-top 复制相同的占位符效果。只需将 padding-top 减少一个固定值，直到它在 0 处触底。如果您想让按钮可滚动，只需删除样式并在更高的 DOM 级别应用 padding-top。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:46:22.173

我最终将按钮定位为绝对，然后使用一些 jquery/javascript 来制作最小高度。谢谢大家的帮助！

```
var contH = $('.phoneDisplay').css('height');
    if($('.convoCont').css('height') < contH) {
        $('.convoCont').css('height',contH);
    } 
```

# linux-kernel - yum 更新内核冲突

> ID：12995362
> 
> 赞同：0
> 
> 时间：2012-10-21T05:50:45.320
> 
> 标签：linux-kernel, kernel, fedora, yum, raspberry-pi

我有 RaspberryPI 模型 B 和 Fedora Raspberry Remix 17 RC2（安装于 2012 年 9 月）。昨天，我确实尝试了 yum update。但我做不到。为什么？

```
[root@rberry ~]# yum update raspberrypi-kernel
Loaded plugins: langpacks, presto, refresh-packagekit
Resolving Dependencies
--> Running transaction check
---> Package raspberrypi-kernel.armv5tel 0:3.2.27-1.20120926git9245b4c.rpfr17 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

============================================================================
Package Arch Version Repository Size
============================================================================
Installing:
raspberrypi-kernel armv5tel 3.2.27-1.20120926git9245b4c.rpfr17 rasp-pi 12 M

Transaction Summary
============================================================================
Install 1 Package

Total size: 12 M
Installed size: 37 M
Is this ok [y/N]: y
Downloading Packages:
Running Transaction Check
Running Transaction Test

Transaction Check Error:
file /boot/kernel.img from install of raspberrypi-kernel-3.2.27-1.20120926git9245b4c.rpfr17.armv5tel conflicts with file from package raspberrypi-kernel-3.1.9-11.20120727gitf958199.rpfr17.armv5tel

Error Summary
------------- 
```

更新

```
[root@rberry opt]# rpm -qa raspberrypi-kernel\*
raspberrypi-kernel-3.1.9-11.20120727gitf958199.rpfr17.armv5tel

[root@rberry opt]# uname -a
Linux rberry 3.1.9 #1 PREEMPT Mon Jul 30 14:50:41 EDT 2012 armv6l armv6l armv6l GNU/Linux

[root@rberry opt]# yum install raspberrypi-kernel-3.2.27-1.20120926git9245b4c.rpfr17.armv5tel
.....
Transaction Check Error:
  file /boot/kernel.img from install of raspberrypi-kernel-3.2.27-1.20120926git9245b4c.rpfr17.armv5tel conflicts with file from package raspberrypi-kernel-3.1.9-11.20120727gitf958199.rpfr17.armv5tel

[root@rberry opt]# rpm -qf /boot/kernel.img
raspberrypi-kernel-3.1.9-11.20120727gitf958199.rpfr17.armv5tel 
```

对不起，我的英语不好 ））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:12:02.103

可能存在打包问题，其中两个内核包“拥有”一组公共文件（在这种情况下，`/boot/kernel.img`两个包都声称，因此它们不能同时安装）

您目前安装了哪些内核？尝试

```
rpm -qa raspberry-kernel\* 
```

如果除了`3.1.9-11`导致问题的内核之外还有另一个内核，请启动它，删除有问题的内核，然后安装新的内核更新。

如果做不到这一点，只需更新除内核之外的所有内容：

```
yum update --exclude=raspberry-kernel\* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-06T14:59:14.343

你有没有尝试过

> 百胜清洁所有

其次是

> 百胜更新

我遇到了同样的问题，并在一分钟内解决了它。希望它仍然可以提供帮助。

# templates - 从dust.js模板访问express.js助手的问题

> ID：12995372
> 
> 赞同：2
> 
> 时间：2012-10-21T05:52:31.487
> 
> 标签：templates, express, helpers, dust.js

我正在玩 node-express-boilerplate 项目并尝试将其转换为使用dust.js 模板。我让dust.js 使用Express@3.x 和dustjs-linkedin 渲染简单的视图，但是我坚持将帮助程序转换为在dust.js 模板中使用。

我重新定义了从@ [https://github.com/mape/node-express-boilerplate/blob/master/server.js:144开始的代码](https://github.com/mape/node-express-boilerplate/blob/master/server.js:144)

符合新的 Express@3.x 版本（使用[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)作为指南），例如：

应用程序配置（功能（）{

```
 app.use(function(req, res, next) {
       res.locals.assetsCacheHashes = function(req, res) {
           return assetsMiddleware.cacheHashes;
       }
       res.locals.session = function(req, res) {
           return req.session;
       }
       res.locals.error = function(err, req, res, next) {

       // ...

       }
       next();
    });
}); 
```

我会假设在dust.js 模板中，我可以使用 {session} 来测试会话或 {assetsCacheHashes} 来测试并打印出来，但情况似乎并非如此。

关于我做错了什么的任何提示？我应该改用dust.js 助手吗？如果是这样，有人可以举个例子吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:46:16.463

我相信您错误地定义了本地人。

试试这个：

```
res.locals.session = req.session;

{{session}} 
```

# ios - 使用 RESTKit 映射 iTunes 搜索 API 结果

> ID：12995375
> 
> 赞同：6
> 
> 时间：2012-10-21T05:52:50.263
> 
> 标签：ios, restkit, itunes-search-api

我正在尝试使用 RestKit 将 iTunes 搜索 API 结果加载到自定义对象中。我为结果定义了一个简单的 NSObject 子类：

```
@interface LSiTunesResult : NSObject

@property (nonatomic) NSInteger itemID;
@property (nonatomic) NSInteger artistID;

@property (strong, nonatomic) NSString *title;
@property (strong, nonatomic) NSString *artistName;
@property (strong, nonatomic) NSString *collectionName;
@property (strong, nonatomic) NSString *itemDescription;

@property (strong, nonatomic) NSURL *imageURL;
@property (strong, nonatomic) NSURL *thumbnailURL;
@property (strong, nonatomic) NSURL *trackPreviewURL;
@property (strong, nonatomic) NSURL *trackViewURL;

//
+ (RKObjectMapping *)objectMapping;

@end 
```

为简单起见，我定义了对象映射

`RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[LSiTunesResult class]]; [mapping addAttributeMappingsFromDictionary:@{ @"artistName" : @"artistName" }];`

我尝试了几种不同的方法来实际请求结果，同时使用自定义 RKObjectManager 和 RKObjectRequestOperation。我使用 RKObjectRequestOperation 的简单示例如下所示：

```
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:[LSiTunesResult objectMapping] pathPattern:nil keyPath:@"results" statusCodes:nil];
RKObjectRequestOperation *operation = [[RKObjectRequestOperation alloc] initWithRequest:urlRequest responseDescriptors:@[responseDescriptor]];
[operation.HTTPRequestOperation setAcceptableContentTypes:[NSSet setWithObject:@"text/javascript"]];

[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    NSLog(@"The search results are: %@", [mappingResult array]);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"Failure reason: %@", [error localizedDescription]);
}];

[operation start]; 
```

不幸的是，我从 RKResponseMapperOperation 收到以下错误：“restkit.network:RKResponseMapperOperation.m:197 无法解析响应数据：加载了内容类型为 'text/javascript' 的无法处理的响应 (200)”

我登录了 RestKit 网络，看来来自 iTunes API 的响应将内容类型标记为“文本/javascript”，而正文包含有效的 JSON。我已经尝试告诉 RKObjectRequestOperation text/javascript 是可接受的内容类型。

有人对 iTunes API 和 RestKit 有任何经验吗？我很好奇这是否是我的一个简单的映射问题，或者声称内容类型是 javascript 而它似乎是有效的 JSON 的 iTunes API 是否正在抛弃 RestKit。下面是在我的示例中记录的 iTunes 搜索 API 响应示例。

```
 2012-10-21 01:48:54.061 Listen[99898:617] T restkit.network:RKHTTPRequestOperation.m:124 GET 'http://itunes.apple.com/search?term=The%20Lumineers&country=US&media=music&limit=1' (200):
    response.headers={
        "Cache-Control" = "no-transform, max-age=60";
        Connection = "keep-alive";
        "Content-Encoding" = gzip;
        "Content-Length" = 519;
        "Content-Type" = "text/javascript; charset=utf-8";
        Date = "Sun, 21 Oct 2012 05:48:54 GMT";
        Vary = "Accept-Encoding";
        "X-Apple-Partner" = "origin.0";
        "apple-timing-app" = "49 ms";
        "x-apple-application-instance" = 1018018;
        "x-apple-application-site" = NWK;
        "x-apple-orig-url-path" = "/search?term=The%20Lumineers&country=US&media=music&limit=1";
        "x-apple-translated-wo-url" = "/WebObjects/MZStoreServices.woa/ws/wsSearch?term=The%20Lumineers&country=US&media=music&limit=1";
        "x-webobjects-loadaverage" = 0;
    }
    response.body=

    {
     "resultCount":1,
     "results": [
    {"wrapperType":"track", "kind":"music-video", "artistId":350720227, "trackId":516035614, "artistName":"The Lumineers", "trackName":"Ho Hey", "trackCensoredName":"Ho Hey", "artistViewUrl":"https://itunes.apple.com/us/artist/the-lumineers/id350720227?uo=4", "trackViewUrl":"https://itunes.apple.com/us/music-video/ho-hey/id516035614?uo=4", "previewUrl":"http://a404.v.phobos.apple.com/us/r30/Video/fd/81/e1/mzi.gxodlwda..640x256.h264lc.u.p.m4v", "artworkUrl30":"http://a1838.phobos.apple.com/us/r30/Video/v4/41/64/37/416437c2-c02e-4706-3f13-a47f50ec2ccc/Cover.40x30-75.jpg", "artworkUrl60":"http://a621.phobos.apple.com/us/r30/Video/v4/41/64/37/416437c2-c02e-4706-3f13-a47f50ec2ccc/Cover.80x60-75.jpg", "artworkUrl100":"http://a1629.phobos.apple.com/us/r30/Video/v4/41/64/37/416437c2-c02e-4706-3f13-a47f50ec2ccc/Cover.100x100-75.jpg", "collectionPrice":1.99, "trackPrice":1.99, "releaseDate":"2012-04-03T07:00:00Z", "collectionExplicitness":"notExplicit", "trackExplicitness":"notExplicit", "trackTimeMillis":160952.0, "country":"USA", "currency":"USD", "primaryGenreName":"Singer/Songwriter"}]
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-30T06:08:05.347

有两件事可以完成这项工作。

你得到的第一个：

```
operation.HTTPRequestOperation.acceptableContentTypes = [NSSet setWithObject:@"text/javascript"]; 
```

第二个是注册这个类型的json序列化器。

```
[RKMIMETypeSerialization registerClass:[RKNSJSONSerialization class] forMIMEType:@"text/javascript"]; 
```

然后一切正常！

# javascript - 为 Ajax 生成的表提供简单的 js 分页

> ID：12995377
> 
> 赞同：0
> 
> 时间：2012-10-21T05:53:28.640
> 
> 标签：javascript, ajax, drupal, pagination, html-table

我在 drupal 中有一个 ajax 调用，它会在我单击的位置生成并返回整个表。表格很大，所以我希望它们分页。我没有时间进行服务器端分页，而且我还需要在很多地方应用它。

我发现这个[http://code.google.com/p/one-simple-table-paging/](http://code.google.com/p/one-simple-table-paging/)非常易于使用，应该可以解决我的目的。

我设法在静态 html 页面中使用它：

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="oneSimpleTablePaging-1.0.js"></script>

<table class="tableToPaginate">
    <tr>
        <th>Id</th><th>Name</th>
    </tr>
        <?php for ($i = 0; $i < 100; $i++) { ?>                            
        <tr>
            <td><?php echo $i ?></td><td><?php echo "name" . $i ?></td>
        </tr>                        
        <?php } ?>
</table>

<script>
   $(document).ready(function(){
       $('.tableToPaginate').oneSimpleTablePagination({rowsPerPage: 20});
   });        
</script> 
```

但是当我对我的 ajax 生成的表使用相同的技术时，为它们提供相同的类并在 page.tpl、php 中调用脚本时，我看不到分页

```
echo '<table id="ajaxcustomerdata" class="account_info tableToPaginate">';
..... 
```

我是 ajax 和 js 的新手；请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:21:34.960

为此目的使用[DataTables javascript 插件 - 非常强大且简单的 jQuery 插件。](https://stackoverflow.com/questions/12995377/giving-simple-js-pagination-to-a-ajax-generated-table)

添加分页 AJAX 表只是一个：

```
$(document).ready(function() {
    $('#example').dataTable( {
        "bProcessing": true,
        "sAjaxSource": '../ajax/sources/arrays.txt'
    } );
} ); 
```

或者您可以[将通常的 html 表转换为 DataTable 表](http://datatables.net/release-datatables/examples/data_sources/dom.html)：

```
$(document).ready(function() {
    $('#example').dataTable();
} ); 
```

[有关此示例的更多信息](http://datatables.net/release-datatables/examples/data_sources/ajax.html)。

# java - 是否有合适的算法来检测图形的背景颜色？

> ID：12995378
> 
> 赞同：8
> 
> 时间：2012-10-21T05:53:32.827
> 
> 标签：java, image

在大学里，我们被分配了一项任务，给定一张图像，我们必须识别“图形”、它们的颜色以及它们内部“像素组”的数量。让我解释：

![在此处输入图像描述](../Images/fc57a61e1dcfd4f3c01aa00fe1cb4676.png)

上图有一个**数字**（图中可以有多个数字，但我们暂时先不管它）。

*   画布的背景颜色是 0,0 处的像素（在本例中为黄色）
*   图形的边框颜色为黑色（可以是画布背景色以外的任何颜色）。
*   图形的背景颜色为白色（也可以与画布的背景颜色相同）。
*   一个图形只能有一种背景颜色。
*   图中有两个像素组。一个是蓝色像素池，另一个是红色池，里面有一些绿色。如您所见，像素组像素的颜色无关紧要（它只是与图形的背景颜色不同）。重要的是他们接触（甚至是对角线）。因此，尽管有两种不同的颜色，但这样的组无论如何都被认为只是一个。
*   如您所见，边界可以随心所欲地不规则。然而，它只有一种颜色。
*   众所周知，一个像素组不会接触到边界。
*   有人告诉我，像素组的颜色可以是除图形背景颜色之外的任何颜色。我假设它可以与图形的边框颜色（黑色）相同。

我们已经获得了一个能够拍摄图像并将它们转换为矩阵的类（每个元素都是一个表示像素颜色的整数）。

就是这样。我正在用 Java 做。

**到目前为止我做了什么**

*   遍历矩阵中的每个像素
*   如果我发现一个与背景颜色不同的像素，我会假设它属于图形的边框。从现在开始我将调用这个像素`initialPixel`。
*   请注意，`initialPixel`我提供的图像中的图像左上角的黑色像素。我故意在那里做了一个锐利的切割来说明它。
*   我现在的任务是找到图形的背景颜色（在本例中为白色）。

但是我很难找到这样的背景颜色（白色）。这是我所做的最接近的方法，它适用于某些情况 - 但不适用于此图像：

*   因为我知道边框的颜色，所以我可以找到第一个不同的颜色**，**即`initialPixel`. 听起来是个好主意 - 它有时确实有效，但它不适用于提供的图像：在这种情况下它将返回黄色，因为`initialPixel`与图形的内容相距甚远。

假设我确实找到了图的背景颜色（白色），我的下一个任务是意识到图中存在两个像素组。这似乎更容易：

*   由于我现在知道了图形的背景颜色（白色），我可以尝试遍历图形中的每个像素，如果我找到一个不属于边框且不属于图形背景的像素，我已经可以知道存在一个像素组。我可以开始一个递归函数来查找与该组相关的所有像素并“标记”它们，以便在未来的迭代中我可以完全忽略这些像素。

**我需要的**

是的，我的问题是关于如何根据我之前描述的内容找到图形的背景颜色（请记住，它可以与整个图像的背景颜色相同 - 现在它是黄色的，但它也可以是白色的）。

我不需要任何代码——我只是想不出一个合适的算法。边界可以有如此奇怪的不规则线条的事实让我很生气。

甚至更好：我一直做错了吗？也许我根本不应该过多关注这一点`initialPixel`。也许另一种初始方法会起作用？是否有关于此类主题的任何文档/示例？我意识到有很多关于“计算机视觉”等的研究，但我找不到关于这个特定问题的太多信息。

**一些代码**

我检索包含所有数字的向量的函数： *注意：`Figure`只是一个包含一些值的类，例如背景颜色和元素数量。

```
public Figure[] getFiguresFromImage(Image image) {
    Figure[] tempFigures = new Figure[100];
    int numberOfFigures = 0;
    matrixOfImage = image.getMatrix();
    int imageBackgroundColor = matrixOfImage[0][0];
    int pixel = 0;

    for (int y = 0; y < matrixOfImage.length; ++y) {
        for (int x = 0; x < matrixOfImage[0].length; ++x) {
            pixel = matrixOfImage[y][x];
            if (!exploredPixels[y][x]) {
                // This pixel has not been evaluated yet
                if (pixel != imageBackgroundColor ) {
                    // This pixel is different than the background color
                    // Since it is a new pixel, I assume it is the initial pixel of a new figure
                    // Get the figure based on the initial pixel found
                    tempFigures[numberOfFigures] = retrieveFigure(y,x);
                    ++numberOfFigures;
                }
            }
        }   
    }

    // ** Do some work here after getting my figures **

    return null;
} 
```

然后，显然，该功能`retrieveFigure(y,x)`是我无法做到的。

**笔记：**

*   出于学习目的，我不应该使用任何外部库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T06:30:37.937

解决此问题的一个好方法是将图像视为[图形](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)，其中每个颜色填充区域都有一个节点（此答案中的“组件”）。

这是实现此方法的一种方法：

1.  将所有像素标记为未访问。

2.  对于每个像素，如果该像素未被访问，则对其执行[洪水填充](http://en.wikipedia.org/wiki/Flood_fill)算法。在洪水填充期间，将每个连接的像素标记为已访问。

    现在您应该在图像（或“组件”）中有一个纯色区域列表，因此您只需要弄清楚它们是如何相互连接的：

3.  找到具有与背景颜色组件相邻的像素的组件 - 这是您的图形边框。请注意，您可以通过查找具有 0,0 像素的组件来找到背景颜色组件。

4.  现在找到像素与新找到的“图形边框”组件相邻的组件。将有两个这样的组件 - 选择一个不是背景的（即没有 0,0 像素的）。这是你的人物背景。

5.  要找到像素组，只需计算与图形背景组件相邻的像素的组件数量（当然忽略图形边框组件）

这种方法的优点：

*   在 O(# 像素) 时间内运行。
*   易于理解和实施。
*   不假设背景颜色和图形背景颜色不同。

* * *

为确保您了解迭代组件及其邻居的工作方式，以下是第 5 步的示例伪代码实现：

```
List<Component> allComponents; // created in step 2
Component background; // found in step 3 (this is the component with the 0,0 pixel)
Component figureBorder; // found in step 4
List<Component> pixelGroups = new List<Component>(); // list of pixel groups

for each Component c in allComponents:
    if c == background:
        continue;
    for each Pixel pixel in c.pixelList:
        for each Pixel neighbor in pixel.neighbors:
            if neighbor.getComponent() == figureBorder:
                c.isPixelGroup = true;

int numPixelGroups = 0;
for each Component c in allComponents:
    if (c.isPixelGroup)
        numPixelGroups++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:16:29.450

试试这个代码：

```
import java.util.Scanner;
import java.awt.image.BufferedImage;
import java.io.*;

import javax.imageio.ImageIO;

class Analyzer{
    private int pixdata[][];
    private int rgbdata[][];
    private BufferedImage image;
    int background_color;
    int border_color;
    int imagebg_color;
    private void populateRGB(){
        rgbdata = new int[image.getWidth()][image.getHeight()];
        for(int i = 0; i < image.getWidth(); i++){
            for(int j = 0; j < image.getHeight(); j++){
                rgbdata[i][j] = image.getRGB(i, j);
            }
        }
        int howmanydone = 0;
        int prevcolor,newcolor;
        prevcolor = rgbdata[0][0];

        /*
        for(int i = 0; i < image.getWidth(); i++){
           for(int j = 0; j < image.getHeight(); j++){
              System.out.print(rgbdata[i][j]);
           }
           System.out.println("");
        }*/
        for(int i = 0; i < image.getWidth(); i++){
            for(int j = 0; j < image.getHeight(); j++){
                newcolor = rgbdata[i][j];
                if((howmanydone == 0) && (newcolor != prevcolor)){
                    background_color = prevcolor;
                    border_color = newcolor;
                    prevcolor = newcolor;
                    howmanydone = 1;
                }
                if((newcolor != prevcolor) && (howmanydone == 1)){
                    imagebg_color = newcolor;
                }
            }
        }
    }
    public Analyzer(){ background_color = 0; border_color = 0; imagebg_color = 0;}
    public int background(){ return background_color; }
    public int border() { return border_color;}
    public int imagebg() {return imagebg_color;}
    public int analyze(String filename,String what) throws IOException{
        image = ImageIO.read(new File(filename));
        pixdata = new int[image.getHeight()][image.getWidth()];
        populateRGB();
        if(what.equals("background"))return background();
        if(what.equals("border"))return border();
        if(what.equals("image-background"))return imagebg();
        else return 0;
    }
}
public class ImageAnalyze{
    public static void main(String[] args){
        Analyzer an = new Analyzer();
        String imageName;

        Scanner scan = new Scanner(System.in);
        System.out.print("Enter image name:");
        imageName = scan.nextLine();
        try{
        int a = an.analyze(imageName,"border");//"border","image-background","background" will get you different colors
        System.out.printf("Color bg: %x",a);

        }catch(Exception e){
           System.out.println(e.getMessage());
        }
    }
} 
```

返回的颜色是 ARGB 格式。您需要从中提取 R、G 和 B。

这段代码有一个错误。使用有限状态机进行实现。在第一个状态下，您在图像内部，因此 0,0 是背景颜色，然后当发生变化时，变化是边框颜色，然后第三个状态是在图像内部 + 边框和颜色内部变化。

# php - 图像打印质量检查

> ID：12995381
> 
> 赞同：1
> 
> 时间：2012-10-21T05:54:55.243
> 
> 标签：php, image

数字印刷中图像的通常基本标准是

*   CMYK
*   300 dpi
*   正确的比例

**是否有可能将用户上传的图像与放置的打印标准进行比较？**

（使用 PHP 和一些扩展，例如 ImageMagic）

想法是如果用户上传打印质量差的图像，例如 jpg 100x100px @ 72dpi，请以适当的方式通知用户。但是经过我所做的所有研究，无法定义一些模型如何提取上传的图像数据并进行比较/检查。

任何想法如何解决这个问题将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:08:40.900

你有[Imagick::getImageResolution](http://be.php.net/manual/en/imagick.getimageresolution.php)来获得 dpi 的分辨率，你有[getimagesize](http://be.php.net/manual/en/function.getimagesize.php)，在那里你检查通道，4 是 cmyk，3 rgb。

# android - 添加新列表后如何在android中更新列表视图

> ID：12995385
> 
> 赞同：2
> 
> 时间：2012-10-21T05:55:58.380
> 
> 标签：android, json, android-listview, listadapter

我正在使用 json 执行类似联系应用程序的操作

我可以查看联系人并添加新联系人，但在添加新联系人后无法自动更新联系人（在我的数据库中已更新）。我必须在 Eclipse 中再次运行我的应用程序才能看到新联系人

我的一些主要代码是这样的

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.*;
import android.content.*;
import android.database.Cursor;
import android.os.Bundle;
import android.view.*;
import android.widget.*;

public class MainActivity extends ListActivity {

    private Cursor friendsCursor = null;
    int position;
    private ArrayList<Data> friends = null;
    DateFormat fDateTimeDisplay = new SimpleDateFormat("dd-MM-yyyy");
    DateFormat fDateTime = new SimpleDateFormat("yyyy-MM-dd");
    public static  String friendURL = "http://-----/friend.php";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        friends = new ArrayList<Data>();
        setListAdapter(new DataAdapter()); 

        try
        {
            JSONArray jArray = new JSONArray(getServerData());
            String name, address, gender;
            long code;
            Date DOB;
            friends.clear();
            for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                code = json_data.getLong("FriendCode");
                name = json_data.getString("FriendName");
                address = json_data.getString("FriendAddress");
                gender = json_data.getString("FriendGender");
                DOB = fDateTime.parse(json_data.getString("FriendDOB"));
                Data data = new Data(name, address, gender, DOB,code);
                friends.add(data);  } 

        }catch(JSONException e){
            //Display error message
            Toast.makeText(this, "Error parsing data " + e.toString(), Toast.LENGTH_LONG).show();
        }
        catch (ParseException pe) {
            Toast.makeText(this, "Error parsing data " + pe.toString(), Toast.LENGTH_LONG).show();
        }
        registerForContextMenu(getListView());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        new MenuInflater(this).inflate(R.menu.option, menu);
        return(super.onCreateOptionsMenu(menu));
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.add:
                Intent intent = new Intent(this, AddActivity.class);
                intent.putExtra("code", 1);
                startActivityForResult(intent, 1);

                return(true);

        }       

        return(super.onOptionsItemSelected(item));
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == Activity.RESULT_OK)
        {       
        }
    }

    private String getServerData() {  
        InputStream is = null;

        String result = "";

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(friendURL);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        }catch(Exception e){
            Toast.makeText(this, "Error in http connection " + e.toString(), Toast.LENGTH_LONG).show();
        }

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Toast.makeText(this, "Error converting result " + e.toString(), Toast.LENGTH_LONG).show();
        }
        return result;
    }

    class DataAdapter extends ArrayAdapter<Data> {
        DataAdapter() {
            super(MainActivity.this, R.layout.row, friends);
        }

        public View getView(int position, View convertView, ViewGroup parent) {     
            View row = convertView;         
            if (row == null) {                                                  
                LayoutInflater inflater = getLayoutInflater();              
                row = inflater.inflate(R.layout.row, parent, false);
            }

            ViewHolder holder = (ViewHolder)row.getTag();           
            if (holder == null) {                                                   
                holder = new ViewHolder(row);
                row.setTag(holder);
            }
            holder.code.setText(Long.toString((friends.get(position).getcode())));  
            holder.txtName.setText(friends.get(position).getName());
            holder.txtAddress.setText(friends.get(position).getAddress());
            holder.txtGender.setText(friends.get(position).getGender());
            holder.txtDOB.setText(fDateTimeDisplay.format(friends.get(position).getDOB()));
            return(row);
        }
    }

} 
```

当我想添加一个新联系人时，我使用 Intent AddActivity 打开一个新的布局调用添加

这是我的 AddActivity 的一些代码

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.text.*;
import java.util.*;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.*;
import android.os.Bundle;
import android.view.*;
import android.widget.*;

public class AddActivity extends Activity {
    public static  String friendInsertURL = "http://----/friendInsert.php";

    Calendar calendar = Calendar.getInstance();
    DateFormat fDateTime = new SimpleDateFormat("yyyy-MM-dd");
    DateFormat fDateTimeDisplay = new SimpleDateFormat("dd-MM-yyyy");
    long code;
    EditText editName, editAddress;
    RadioButton rbMale, rbFemale;
    TextView txtDOBEdit;
    String gender;
    int position;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add);

        editName = (EditText)findViewById(R.id.editName);
        editAddress = (EditText)findViewById(R.id.editAddress);
        txtDOBEdit = (TextView)findViewById(R.id.txtDOBEdit);
        rbMale = (RadioButton)findViewById(R.id.rbMale);
        rbFemale = (RadioButton)findViewById(R.id.rbFemale);
        editName.setText("");
        editAddress.setText("");
        calendar = Calendar.getInstance();      
        txtDOBEdit.setText(fDateTimeDisplay.format(calendar.getTime()));
        rbMale.setChecked(true);
    }

    private String setServerData(String mode, String name, String address, String gender, String dob) {        
        InputStream is = null;

        String save = "";

        ArrayList<NameValuePair> parameters = new ArrayList<NameValuePair>();

        if (mode.equals("INSERT")) {   

            parameters.add(new BasicNameValuePair("FriendName", name));
            parameters.add(new BasicNameValuePair("FriendAddress", address));
            parameters.add(new BasicNameValuePair("FriendGender", gender));
            parameters.add(new BasicNameValuePair("FriendDOB", dob));
            friendInsertURL = "http://----/friendInsert.php";
        }

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(friendInsertURL );
            httppost.setEntity(new UrlEncodedFormEntity(parameters));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

        }catch(Exception e){
            Toast.makeText(this, "Error in http connection " + e.toString(), Toast.LENGTH_LONG).show();
        }

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            save=sb.toString();
        }catch(Exception e){
            Toast.makeText(this, "Error converting result " + e.toString(), Toast.LENGTH_LONG).show();
        }
        return save;
    }

    public void chooseDate(View v) {        
        new DatePickerDialog(this, d,
                calendar.get(Calendar.YEAR),
                calendar.get(Calendar.MONTH),
                calendar.get(Calendar.DAY_OF_MONTH))
                .show();        
    }
    DatePickerDialog.OnDateSetListener d = new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            calendar.set(Calendar.YEAR, year);
            calendar.set(Calendar.MONTH, monthOfYear);
            calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
            TextView txtDOBEdit = (TextView)findViewById(R.id.txtDOBEdit);
            txtDOBEdit.setText(fDateTimeDisplay.format(calendar.getTime()));
        }
    };

    public void setSave(View view){

        String save;
        EditText editName = (EditText)findViewById(R.id.editName);
        EditText editAddress = (EditText)findViewById(R.id.editAddress);
        RadioButton rbMale = (RadioButton)findViewById(R.id.rbMale);

        if (rbMale.isChecked()){
            gender = "Male";}
        else{
            gender = "Female";          
        }

            save = setServerData("INSERT", editName.getText().toString(), editAddress.getText().toString(), gender, fDateTime.format(calendar.getTime()));

        finish();
    }
} 
```

我已经搜索并发现我必须使用`adapter.notifyDataSetChanged()`来更新我的适配器但是当我将此代码放入我的 AddActivity

```
 ArrayAdapter<Data> adapter = (ArrayAdapter<Data>)getListAdapter(); 
```

那里的`getListAdapter`错误，我不能放一个`ListActivity`，当我运行它时它会导致我的应用程序错误。

我的问题是如何更新我的适配器，以便在添加新适配器时始终可以看到我的联系人更新？

发现了一些东西：

我的添加代码是添加到数据库而不是适配器中..是因为那个吗？那么如何添加到适配器中是真的吗？它在 MainActivity 还是 AddActivity 中？

注意：我的列表视图正在使用查看器来显示内容..

真的需要帮助..我已经尝试了所有我知道的代码，但除了退出并再次运行应用程序之外仍然无法更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:07:25.160

代码中需要的更改并将其粘贴到您的项目中

```
public class MainActivity extends ListActivity {

private ArrayList<Data> friends;
private ArrayAdapter adapter;
private ListViewlistview;

@Override
public void onCreate(Bundle savedInstanceState) {

    friends = new ArrayList<Data>();
    listview = (ListView) findViewById(R.id.listview_id);
    adapter = new ArrayAdapter<Data>(this, R.id.list, friends);
    listview.setAdapter(adapter);
} 
```

这将更新列表视图，因此您可以在将新列表添加到“朋友”列表后调用它。

```
adapter.notifyDataSetChanged(); 
```

# java - 语言的类型兼容性

> ID：12995389
> 
> 赞同：0
> 
> 时间：2012-10-21T05:56:06.693
> 
> 标签：java, c++, c, types, type-conversion

Java 中的什么类型对应于 C 中的 long int 类型？通过使用 JNI 创建本地方法，我对通信感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:30:00.937

答案取决于`long`C/C++ 编译器支持的数据类型的大小。这取决于您的硬件（32 位与 64 位）以及编译器和编译器开关。我们可以肯定地说，Java`long`是 64 位签名的，而 Java`int`是 32 位签名的。

这篇 SO 帖子涉及 C/C++ 数据类型的大小 - [C++ 标准规定 int、long 类型的大小是什么？](https://stackoverflow.com/questions/589575/size-of-int-long-etc)- 其中一个答案为您提供了一种简单的方法来查找任何给定原始类型的大小......在*您的*机器上使用*您的**编译*器和编译器设置。

# android - 如何一次获取当前的 GPS 位置？

> ID：12995393
> 
> 赞同：1
> 
> 时间：2012-10-21T05:56:45.350
> 
> 标签：android, gps

我有简单的流程：当我单击按钮时，我应该只在那个时候获得当前的纬度/经度，我为此使用 LocationListner 但问题是 onLocationChange() 方法仅在我更改位置时调用，否则会给出 0.00/0.00 . 我该怎么办，请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:00:48.843

```
 LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
  LocationListener mlocListener = new MyLocationListener();
 mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
        mlocListener);

 public class MyLocationListener implements LocationListener {

@Override
public void onLocationChanged(Location loc) {
    loc.getLatitude();
    loc.getLongitude();

    Geocoder gcd = new Geocoder(getApplicationContext(),
            Locale.getDefault());
    try {
        mAddresses = gcd.getFromLocation(loc.getLatitude(),
                loc.getLongitude(), 1);

    } catch (IOException e) {

    }

    String cityName = (mAddresses != null) ? mAddresses.get(0)
            .getLocality() : TimeZone.getDefault().getID();
    String countryName = (mAddresses != null) ? mAddresses.get(0)
            .getCountryName() : Locale.getDefault().getDisplayCountry()
            .toString();

    mCurrentSpeed.setText("Longitude"+loc.getLongitude()+" Latitude"+loc.getLatitude());
}

@Override
public void onProviderDisabled(String provider) {
    Toast.makeText(getApplicationContext(), "Gps Disabled",
            Toast.LENGTH_SHORT).show();
}

@Override
public void onProviderEnabled(String provider) {
    Toast.makeText(getApplicationContext(), "Gps Enabled",
            Toast.LENGTH_SHORT).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:04:13.500

您可以实现您的位置侦听器来记住交付的位置，可能以某种方式对它们进行平均。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T11:19:49.930

您不能真正要求 Android 立即为您提供当前的 GPS 位置，您最好的选择是等到它获得位置更改更新或使用最后已知值！

您可以使用最后一个已知位置。

看看这里：

[在 Android 上获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)

希望这可以帮助

# matlab - Matlab cumsum 在 NaN 处重置？

> ID：12995399
> 
> 赞同：6
> 
> 时间：2012-10-21T05:57:26.283
> 
> 标签：matlab, vectorization

如果我有一个像这样的 1 或 NaN 的向量：

```
[1 1 1 NaN 1 1 NaN 1 1 1 1] 
```

如何在 NaN 的位置将 cumsum 重置为零，如下所示：

```
[1 2 3 0 1 2 0 1 2 3 4] 
```

理想情况下，我希望有一个矢量化解决方案，因为我需要对大矩阵中的每一列都执行此操作，并且 NaN 的位置在列中不是恒定的。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T07:54:51.707

您可以尝试以下两条“矢量化”行：

```
A(isnan(A)) = 1-diff([0 find(isnan(A))]);
cumsum(A)

ans =

  1     2     3     0     1     2     0     1     2     3     4 
```

诀窍是`NaN`用一个将在这些点重置的值`cumsum`替换`0`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T07:05:26.603

我只能想到几个解决方案：

```
v = [1 1 1 NaN 1 1 1 1 NaN 1];
a = v==v;              %% convert the values first to [1 1 1 0 1 1 1 1 0 1] format
n = a==0;              %% positions of the NaNs
c = cumsum(a);         %% your intermediate result
d = diff([0 c(n)]);    %% runs of ones
v(n) = -d;             %% replace Nans by -3, -4      [1 1 1 -3 1 1 1 1 -4 1] 
cumsum(v)              %% the answer [1 2 3 0 1 2 3 4 0 1] 
```

注意：尚未检查极端条件（`NaN`在第一个/最后一个位置，连续`NaN`s 等）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-21T07:18:30.173

[在这个链接](http://www.mathworks.com/matlabcentral/fileexchange/14895-nancumsum)中有一个很好的 FEX 文件可以处理这个问题。该代码对 NaN 进行了用户指定的处理。它允许用户用零替换 NaN，或者跳过它们，或者重置 NaN，将 NaN 保持为占位符。

# java - 我尝试在我的 s40 手机上使用 Nokicert，但是当我在 cmd 中打开它时，它给了我一个异常错误

> ID：12995400
> 
> 赞同：3
> 
> 时间：2012-10-21T05:57:44.243
> 
> 标签：java, exception

我试图在 Vista 中为我的诺基亚 s40 手机下载证书。但是当我尝试打开 cmd 文件时，它给了我这个错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no swt-win32-3555 or
    swt-win32 in swt.library.path, java.library.path or the jar file
    at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.C.<clinit>(Unknown Source)
    at org.eclipse.swt.widgets.Display.<clinit>(Unknown Source)
    at net.tuxed.nokicert.NokiCertGUI.main(Unknown Source) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:02:55.050

这意味着 NokiCert 无法找到`The Standard Widget Toolkit`.

我不确定您是如何安装 NokiCert 的，或者您是否以某种方式自己编译了它，但一个好主意可能是在[此处为您的平台下载 SWT 安装程序](http://www.eclipse.org/swt/)并单独安装。这*应该*设置平台特定库的路径，以便可以正确找到它们。

# ruby-on-rails-3 - 在树莓派上安装 bcrypt-ruby (rails 3.2.8 using devise)

> ID：12995404
> 
> 赞同：0
> 
> 时间：2012-10-21T05:58:37.110
> 
> 标签：ruby-on-rails-3, raspberry-pi, bcrypt-ruby

我很高兴尝试将我的树莓派设置为登台服务器。这是一个使用设备进行身份验证的 Rails 应用程序 3.2.8。

当它捆绑安装失败时

```
Installing bcrypt-ruby (3.0.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension 
```

如果我“sudo gem install bcrypt-ruby -v '3.0.1'”那么它安装得很好，但 capistrano 部署总是失败。

有任何想法吗？我宁愿不部署为 sudo，因为这不是它在生产中的工作方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T06:04:55.613

您可能没有安装工作的 ruby​​ 开发库。检查您的 Ruby 版本：

```
$ ruby --version 
```

假设您有 ruby​​ v1.9.3，请安装`ruby1.9.3-dev`. 版本号无关紧要；只需使用您已安装的相同版本号。

# python - 如何在 Python 3.3 中跳出 while 循环

> ID：12995405
> 
> 赞同：0
> 
> 时间：2012-10-21T05:58:43.337
> 
> 标签：python

```
m = int(input("First number (0 to stop): "))
n = int(input("Second number: "))

def gcd(a, b):
   while b != 0:
        c = a % b
        a = b
        b = c
        if b == 0:
            break
   return a

print ("The greatest common divisor of", n,"and", m, "is", abs(gcd(m,n))) 
```

当 m 等于 0 时，如何跳出这个 while 循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:06:42.390

根据您的输入提示，您可能需要一个外部循环`(0 to stop)`：

```
def gcd(a, b):
   while b != 0:
        c = a % b
        a, b = b, c  # tuple assignment FTW!
        if b == 0:
            break
   return a

while True:
    m = int(input("First number (0 to stop): "))
    if m == 0:
        break
    n = int(input("Second number: "))
    print("The greatest common divisor of {0} and {1} is {2}".format(n, m, abs(gcd(m, n)))) 
```

# php - PHP If 语句不适用于表单

> ID：12995408
> 
> 赞同：-1
> 
> 时间：2012-10-21T05:59:07.017
> 
> 标签：php, forms, if-statement

我得到了意想不到的 T_ELSES。请帮忙

```
<?php
$password = $_POST['password'];
$submit = $_POST['submit'];
if ($password == "lol") {
 if ($password) {
  if ($submit) {
   echo "Logged in";
   }
  } else {
  echo "Wrong Pass";
  }
  } else {
  echo "Please fill in all fields.";
  }
 } else {
 echo "Please click submit";
}
?> 
```

要么只是说请点击提交，要么它给我意外的错误，或者它没有检测到请填写所有字段。请帮助我并修复我的代码谢谢

问：有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:05:37.203

在我看来，您需要这样的东西：

```
<?php
$password = $_POST['password'];
$submit   = $_POST['submit'];
if ($password) {
    if ($password == "lol") {
        if ($submit) {
            echo "Logged in";
        } else {
            echo "Please click submit";
        }
    } else {
        echo "Wrong Pass.";
    }
} else {
    echo "Please fill in all fields.";
} 
```

请注意，我只是在尝试解决语法问题，我无法猜测您脚本的逻辑。

我已更新以反映您的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:06:45.543

```
<?php
    $password = $_POST['password'];
    $submit = $_POST['submit'];

    if ($password == "lol") 
    {
        if ($password) 
        {
            if ($submit) 
            {
                    echo "Logged in";
            }
        } 
        if(!$password)
        {
                echo "Wrong Pass";
        }
    } 
    if(!$password !== "lol")
    {
                echo "Please fill in all fields.";
    }
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T06:24:38.857

作为您的问题的解决方案，请参考下面提到的代码片段

```
 if(!empty($submit))
    {
  if(!empty($password))
  {
     if($password=='lol')
     {
        echo "Logged in";
      }
     else
     {
         echo "Wrong Pass";
     }
  }
  else
  {
     echo "Please fill in all fields.";
   }
}
else
{
echo "Please click submit";
 } 
```

# mod-rewrite - Mod重写查询字符串

> ID：12995412
> 
> 赞同：0
> 
> 时间：2012-10-21T05:59:34.530
> 
> 标签：mod-rewrite

Mod Rewrite noob 所以请原谅我的无知，但我想做的只是一个简单的查询字符串删除

从：`http://yourwebsite.com/x?section=y`

至：`http://yourwebsite.com/x/y`

我在我的**.htaccess**中添加我的 mod 重写规则，如下所示：

```
ErrorDocument 404 /404

Options +MultiViews
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

RewriteCond %{QUERY_STRING} ^section=(.*)$ [NC]
RewriteRule ^(.*)$ /$1/%1? [R=301,L,NE] 
```

问题是在访问时：

```
http://yourwebsite.com/x?section=y 
```

我的规则将其写回：

```
http://yourwebsite.com/x.php/y 
```

漂亮网址中的**.php**非常丑陋，我正在努力摆脱它。

我的 mod 重写规则有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:44:45.283

您很可能正在寻找这样的东西：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d  
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+)\/(.+)$ /$1.php?section=$2 [L]

RewriteCond %{QUERY_STRING} ^section=(.*)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ /$1/%1 [R=301,L,NE] 
```

它进行了两次重写：

1.  请求`x/y`在内部重写为`x.php?section=y`
2.  一个请求`x?section=y`被重定向到`x/y`

请注意，一个是内部重写，而另一个重定向浏览器以显示一个不那么“丑陋”的 url。

一个提示：如果您可以使用 apaches 重写模块 (`RewriteLog`和`RewriteLogLevel`) 的日志记录功能，这将为您提供有关重写过程中实际发生的事情的大量详细信息。

# c++ - 如何在 C++ 中逐字输出字符串

> ID：12995413
> 
> 赞同：2
> 
> 时间：2012-10-21T05:59:52.120
> 
> 标签：c++

假设我需要从我的 C++ 代码中输出一些程序代码。所以我需要打印如下内容：

```
cout << "foo(\"hello\", \"world\", 5)" << endl; 
```

有没有办法让我不需要逃避每个“？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T06:06:38.263

使用 C++11，您可以做到

`R"delimeter(foo("hello", "world",5))delimeter"`

where`R"delimeter(`定义原始字符串的开头， `delimeter`最多 16 个字符的标签，并`)delimeter"`结束原始字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T08:31:05.020

如果你使用 C++03，你可以使用宏来做你想做的事：

```
#define PRINT_STRING(s) cout << (#s) << endl;

int main() {
    cout << "foo(\"hello\", \"world\", 5)" << endl;
    PRINT_STRING(foo("hello", "world", 5))
    return 0;
} 
```

退货

```
output:
foo("hello", "world", 5)
foo("hello", "world", 5) 
```

你可以在这里看到它：http: [//ideone.com/G6TvU3](http://ideone.com/G6TvU3)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T06:05:09.077

如果您的编译器支持 C++11，则多行引号构造为`R"LABEL(`Where LABEL is a valid label。结束报价使用`)LABEL"`

# c - C动态分配内存块

> ID：12995414
> 
> 赞同：1
> 
> 时间：2012-10-21T06:00:01.620
> 
> 标签：c, arrays, memory-management, linked-list

这是我的数据结构

```
struct Node{
      int x;
      Node *next;
      Node *prev;
} 
```

如果我分配内存

```
Node *A = malloc (sizeof (Node) * 10); 
```

在这种情况下，如何使用数组索引访问数组中的每个框？还是不可能？

我的目标只是想在这块内存中创建一个链表。

基本上我想分配一块内存，然后分配他们的上一个和下一个......

也许这令人困惑，对不起我的措辞..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:04:45.583

这为您提供了一个 10 s 的数组`Node`，可通过`A`. 现在，您所要做的就是例如

```
A[0].next = &A[1]; 
```

设置`next`第一个节点的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:09:08.407

`malloc`返回`void*`然后你应该为你的类型转换它`Node*`

`Node *A = (Node *)malloc (sizeof (Node) * 10);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T06:14:34.237

以您的方式分配许多节点可能对内存管理有效，但我不会像数组一样访问它们。我认为你应该依赖链表而不是混合这两种方法，因为它很容易导致难以追踪和修复的错误。

# c# - 为什么没有重定向到在 ASP.NET MVC 4 中查看

> ID：12995415
> 
> 赞同：1
> 
> 时间：2012-10-21T06:00:04.193
> 
> 标签：c#, .net, file-upload, asp.net-mvc-4

所有，我有一个保存发布文件的控制器（请查看下面的代码）。完成它大约需要20-30分钟。但我保存文件后发现，RedirectToAction 不起作用。显示的 IE 状态栏：

```
Waiting for http://......./index. 
```

顺便说一句，我的会话状态存储在 SQL Server 中。超时时间为 300 分钟。我不确定这个问题是否与我之前在[此处](https://stackoverflow.com/questions/12995345/iis-7-application-pool-work-process-life-and-session-life)发布的 IIS 7 应用程序池空闲时间有关。虽然它没有重定向到操作，但我发现会话仍然存在。文件和记录已成功保存。唯一的问题是它没有重定向。请帮助我。谢谢。

```
[HttpPost]
[AcceptButton("Upload")]
public ActionResult Upload(UploadPackageModel model)
{
    //after about 20-30 min for 160MB file-upload, runs here.
    DeployLogModel tempLog = null;
    try
    {
        if (Request.Files.Count > 0 && Request.Files[0].ContentLength > 0)
        {
            var file = Request.Files[0];
            var fileName = Path.GetFileName(file.FileName);
            string sUploadFullPath = string.Empty;
            model.ID = Guid.NewGuid();//PK id of Uploaded Package
            string sUploadFileName = model.ID + Path.GetExtension(file.FileName);
            model.CreatedBy = DataHelp.LoginAdministrator.ID.ToString();
            model.LastUpdatedBy = DataHelp.LoginAdministrator.ID.ToString();
            model.PackageSize = Request.Files[0].ContentLength;
            model.CreatedDate = DateTime.UtcNow;
            model.LastUpdatedDate = DateTime.UtcNow;
            model.PackageName = fileName;

            string rootPath = AppDomain.CurrentDomain.BaseDirectory + "\\" + "DeployPackages\\";

            sUploadFullPath = Path.Combine(rootPath, sUploadFileName);
            model.PackagePath = sUploadFullPath;
            if (!Directory.Exists(rootPath))
                Directory.CreateDirectory(rootPath);

            file.SaveAs(sUploadFullPath);//Save the uploaded package.
            model.SavePackInfoIntoDB(model);//Save record to DB
        }
    }
    catch (Exception ex)
    {
        Log.Write("-Upload-Package-failed-:\r\n" + ex.Message + "\r\n" + ex.StackTrace);
    }
    return RedirectToAction("Index");//does not work.
} 
```

文件和记录已成功保存。唯一的问题是它没有重定向。

**更新：**

Web.config httpRuntime 设置为：

```
<httpRuntime executionTimeout="14400" maxRequestLength="716800" /> 
```

**编辑添加索引操作代码：**

```
public ActionResult Index(int? page)
{
        var db = DbContextHelper.CreateInstance();

        //Find all uploaded packages.
        var packages = db.DeployPackages.OrderByDescending(x => x.CreatedDate).Select(x => new PackageModel
             {
                 PackageId = x.ID,
                 UploadedBy = x.CreatedBy,
                 Description = x.Description,
                 PackageName = x.PackageName,
                 PackageSize = x.PackageSize,
                 PackagePath = x.PackagePath,
                 UploadTime = x.CreatedDate,
                 VersionName = x.VersionName
             }).ToList();

        int pageSize = ConfigHelper.BigPageSizeNum;
        int pageNumber = (page ?? 1);
        return View(packages.ToPagedList(pageNumber, pageSize));
    } 
```

**编辑添加 Fiddler 跟踪信息**

```
result protocol Host                 Url          

200    http     test.cloudapp.net    /package/upload
200    http     test.cloudapp.net    /package/index 
```

我可以在 fiddler 中看到响应 html 内容`/package/index`，但浏览器只是冻结在同一页面（`/package/upload`）上。

我想知道是否有办法用js代码更改windows.location.href，我的想法是成功完成上传操作。然后向客户端输出一些脚本，例如经典 asp.net 页面中的 response.write 脚本。js 将 windows.location.href 更改为重定向到`/package/index`. 有没有办法在 ASP.NET MVC4 中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:54:19.127

用于输出 javascript以`Content(sResultScript, "text/html")`重定向索引 url。IE8 显示失败页面，chrome 和 Firefox 都可以。

# c#-4.0 - 派生类和基类继承发生 XMLSerialization 时的数据丢失

> ID：12995416
> 
> 赞同：0
> 
> 时间：2012-10-21T06:00:22.460
> 
> 标签：c#-4.0, windows-runtime

当我尝试序列化对象的通用列表时，我会丢失一些数据，其中包含派生类使用的任何变量。我曾经在派生类中有这些变量，但由于基类正在序列化，我认为派生变量会被忽略。

**编码：**

```
[XmlInclude(typeof(AchievementStock))]
    [XmlInclude(typeof(AchievementCash))]
    [XmlInclude(typeof(AchievementStockSpecify))]
    public abstract class Achievement : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        protected string _title;
        protected string _description;
        protected int _cashValue;
        protected bool _completed;

        //Cash
        protected int _amountCash;
        protected bool _greater;

        //Stocks
        protected int _amountStocks;

        //StockSpecify
        protected string _stockName;
        protected int _amount;

        public abstract void CheckAchievement(AssetManager assetManager, AchievementManager achievementManager);

        public Achievement()
        {
        }

        public Achievement(string title, string description, int cashValue, bool completed)
        {
            Title = title;
            Description = description;
            _cashValue = cashValue;
            _completed = completed;
        }

        public void PropertyChangedEvent(string assetName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(assetName));
            }
        }

    }

    public class AchievementCash : Achievement
    {

        public AchievementCash(string title, string description, int cashValue, bool completed, int amountCash, bool greater)
            : base(title, description, cashValue, completed)
        {
            _amountCash = amountCash;
            _greater = greater;
        }

        public AchievementCash()
        {
        }

        public override void CheckAchievement(AssetManager assetManager, AchievementManager achievementManager)
        {

        }
    }

    public class AchievementStock : Achievement
    {

        public AchievementStock(string title, string description, int cashValue, bool completed, int amountStocks)
            : base(title, description, cashValue, completed)
        {
            _amountStocks = amountStocks;
        }

        public AchievementStock()
        {
        }

        public override void CheckAchievement(AssetManager assetManager, AchievementManager achievementManager)
        {
        }
    }

    public class AchievementStockSpecify : Achievement
    {
        public AchievementStockSpecify(string title, string description, int cashValue, bool completed, string stockName, int amount)
            : base(title, description, cashValue, completed)
        {
            _stockName = stockName;
            _amount = amount;
        }

        public AchievementStockSpecify()
        {
        }

        public override void CheckAchievement(AssetManager assetManager, AchievementManager achievementManager)
        {
        }
} 
```

成为默认值的变量是：

```
 //Cash
        protected int _amountCash;
        protected bool _greater;

        //Stocks
        protected int _amountStocks;

        //StockSpecify
        protected string _stockName;
        protected int _amount; 
```

有人对为什么会发生这种情况有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:55:27.290

您必须有公共字段而不是受保护的字段，因为只有公共属性和字段才能被 XMLSerializer 序列化。

# c++ - xcode中的模板类错误

> ID：12995422
> 
> 赞同：0
> 
> 时间：2012-10-21T06:01:20.917
> 
> 标签：c++, xcode, macos, boost

我知道这已被问过数百万次，但我仍然找不到解决方案。

我正在使用 OSX 10.8、boost 1.50、xcode 4.5.1。

*   我使用 macports 安装了 boost。
*   创建了一个空的 xcode 项目。我的 main.cpp 包含以下代码

```
    #include “升压/容器/deque.hpp”
    int main(int argc, char *argv[])
    {
        boost::container::deque d(12, 5.5f);
        返回0；
    }

```

*   更新了“标题搜索路径”以指向“/opt/local/include”
*   更新了“库搜索路径”以指向“/opt/local/lib”
*   尝试更改“c++ 语言方言”、“c++ 标准库”和其他设置，但完全没有成功。

当我构建项目时，我在 allocator_traits.hpp 和 deque.hpp 中遇到与语义问题相关的错误，我不知道为什么。恐怕当我开始使用更多的 boost 库时，会弹出更多的错误。

deque.hpp（第 482 和 483 行）
基本说明符必须是类名（ptr_alloc_t 和 allocator_type）

我还需要做什么来配置boost。为什么使用 boost 这么复杂？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:45:28.213

`boost::container::deque`是一个模板类，你必须指定你使用哪种类型。在您的情况下，这是`float`：

```
boost::container::deque<float> d(12, 5.5f); 
```

[您可以在此处](http://www.cprogramming.com/tutorial/templates.html)阅读有关模板的更多信息

# html - 如何预防 漂浮在 Firefox 中的其他 div 之上？

> ID：12995425
> 
> 赞同：5
> 
> 时间：2012-10-21T06:01:33.477
> 
> 标签：html, firefox, css

在我正在做的项目中，我有多个分区，一个接一个，根据导航栏的选择，我一个接一个地加载它们。现在，如果我在`<div>`. 但是当我向一个 div 添加一个表单时，它开始漂浮在它上面的 div 上。当我选择表单中的任何元素时会发生这种情况。`dropDown`此外，我似乎无法选择`<form>`.

这是部门列表的示例代码

```
 <div class="container">
            <div class="st-container">

                    <input type="radio" name="radio-set" checked="checked" id="st-control-1"/>
                    <a href="#st-panel-1">Serendipity</a>
                    <input type="radio" name="radio-set" id="st-control-2"/>
                    <a href="#st-panel-2">Happiness</a>
                    <input type="radio" name="radio-set" id="st-control-3"/>
                    <a href="#st-panel-3">Tranquillity</a>
                    <input type="radio" name="radio-set" id="st-control-4"/>
                    <a href="#st-panel-4">Positivity</a>
                    <input type="radio" name="radio-set" id="st-control-5"/>
                    <a href="#st-panel-5">Passion</a>

                    <div class="st-scroll">

                            <div class="st-panel" id="st-panel-1">
                                <h2>Serendipity</h2>
                                <p>Banksy adipisicing eiusmod banh mi sed. Squid stumptown est odd future nisi, commodo mlkshk pop-up adipisicing retro.</p>
                            </div >

                   <!--problematic div starts-->         
               <div id="RepresentativeRegistrationPage" class="st-panel st-color">
        <form action="#" method="post" id="registration-form" novalidate="novalidate">
            College:
            <select class="required" id="college_id" name="college_id">
            <option selected="selected" value="">Select College</option>
            <option value="4">St. Xaviers College</option>
            <option value="5">DMC College</option>
            </select><span class="error_msg"></span><br>

            First Name: <input type="text" value="" class="required" name="first_name" id="first_name"><span class="error_msg"></span><br>
            Last Name: <input type="text" value="" class="required" name="last_name" id="last_name"><span class="error_msg"></span><br>
            Username: <input type="text" class="required" name="username" id="username"><span class="error_msg"></span><br>
            Password: <input type="password" class="required" name="password" id="password"><span class="error_msg"></span><br>
            Confirm Password: <input type="password" class="required" name="confirm_password" id="confirm_password"><span class="error_msg"></span><br>
            Mobile Number: <input type="text" value="" class="required" name="mobile_number" id="mobile_number"><span class="error_msg"></span><br>
            Email address: <input type="text" value="" class="required" name="email" id="email"><span class="error_msg"></span><br>
            <input type="submit" value="Register" name="submit">
        </form>
        </div>
                            <!--problematic div ends -->  

             <div class="st-panel" id="st-panel-3">
                      <h2>Tranquillity</h2>
                      <p>Sint aute occaecat id vice. Post-ironic fap pork belly next level godard, id fanny pack williamsburg forage truffaut.</p>
             </div>

             <div class="st-panel st-color" id="st-panel-4">
                       <h2>Positivity</h2>
                       <p>Mixtape fap leggings art party, butcher authentic farm-to-table you probably haven't heard of them do labore cosby sweater.</p>
             </div>

             <div class="st-panel" id="st-panel-5">
                        <h2>Passion</h2>
                        <p>Fixie ad odd future polaroid dreamcatcher, nesciunt carles bicycle rights accusamus mcsweeney's mumblecore nulla irony.</p>
             </div>

      </div><!-- // st-scroll -->

    </div><!-- // st-container --> 
```

这是CSS

```
.st-container {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    font-family: 'Josefin Slab', 'Myriad Pro', Arial, sans-serif;
}

.st-container > input,
.st-container > a {
    position: fixed;
    bottom: 0px;
    width: 20%;
    cursor: pointer;
    font-size: 16px;
    height: 34px;
    line-height: 34px;
}

.st-container > input {
    opacity: 0;
    z-index: 1000;
}

.st-container > a {
    z-index: 10;
    font-weight: 700;
    background: #e23a6e;
    color: #fff;
    text-align: center;
    text-shadow: 1px 1px 1px rgba(151,24,64,0.2);
}

/* "Fix" for percentage rounding: add a background bar pseudo element with the same color like the labels */
.st-container:before {
    content: '';
    position: fixed;
    width: 100%;
    height: 34px;
    background: #e23a6e;
    z-index: 9;
    bottom: 0;
}

#st-control-1, #st-control-1 + a {
    left: 0;
}

#st-control-2, #st-control-2 + a {
    left: 20%;
}

#st-control-3, #st-control-3 + a {
    left: 40%;
}

#st-control-4, #st-control-4 + a {
    left: 60%;
}

#st-control-5, #st-control-5 + a {
    left: 80%;
}

.st-container > input:checked + a,
.st-container > input:checked:hover + a{
    background: #821134;
}

.st-container > input:checked + a:after,
.st-container > input:checked:hover + a:after{
    bottom: 100%;
    border: solid transparent;
    content: '';
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
    border-bottom-color: #821134;
    border-width: 20px;
    left: 50%;
    margin-left: -20px;
}

.st-container > input:hover + a{
    background: #AD244F;
}

.st-container > input:hover + a:after {
    border-bottom-color: #AD244F;
}

.st-scroll,
.st-panel {
    position: relative;
    width: 100%;
    height: 100%;
}

.st-scroll {
    top: 0;
    left: 0;
    -webkit-transition: all 0.6s ease-in-out;
    -moz-transition: all 0.6s ease-in-out;
    -o-transition: all 0.6s ease-in-out;
    -ms-transition: all 0.6s ease-in-out;
    transition: all 0.6s ease-in-out;

    /* Let's enforce some hardware acceleration */
    -webkit-transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
}

.st-panel{
    background: #fff;
    overflow: hidden;
}

#st-control-1:checked ~ .st-scroll {
    -webkit-transform: translateY(0%);
    -moz-transform: translateY(0%);
    -o-transform: translateY(0%);
    -ms-transform: translateY(0%);
    transform: translateY(0%);
}
#st-control-2:checked ~ .st-scroll {
    -webkit-transform: translateY(-100%);
    -moz-transform: translateY(-100%);
    -o-transform: translateY(-100%);
    -ms-transform: translateY(-100%);
    transform: translateY(-100%);
}
#st-control-3:checked ~ .st-scroll {
    -webkit-transform: translateY(-200%);
    -moz-transform: translateY(-200%);
    -o-transform: translateY(-200%);
    -ms-transform: translateY(-200%);
    transform: translateY(-200%);
}
#st-control-4:checked ~ .st-scroll {
    -webkit-transform: translateY(-300%);
    -moz-transform: translateY(-300%);
    -o-transform: translateY(-300%);
    -ms-transform: translateY(-300%);
    transform: translateY(-300%);
}
#st-control-5:checked ~ .st-scroll {
    -webkit-transform: translateY(-400%);
    -moz-transform: translateY(-400%);
    -o-transform: translateY(-400%);
    -ms-transform: translateY(-400%);
    transform: translateY(-400%);
}

/* Content elements */

.st-deco{
    width: 200px;
    height: 200px;
    position: absolute;
    top: 0px;
    left: 50%;
    margin-left: -100px;
    background: #fa96b5;
    -webkit-transform: translateY(-50%) rotate(45deg);
    -moz-transform: translateY(-50%) rotate(45deg);
    -o-transform: translateY(-50%) rotate(45deg);
    -ms-transform: translateY(-50%) rotate(45deg);
    transform: translateY(-50%) rotate(45deg);
}

[data-icon]:after {
    content: attr(data-icon);
    font-family: 'RaphaelIcons';
    color: #fff;
    text-shadow: 1px 1px 1px rgba(151,24,64,0.2);
    position: absolute;
    width: 200px;
    height: 200px;
    line-height: 200px;
    text-align: center;
    font-size: 90px;
    top: 50%;
    left: 50%;
    margin: -100px 0 0 -100px;
    -webkit-transform: rotate(-45deg) translateY(25%);
    -moz-transform: rotate(-45deg) translateY(25%);
    -o-transform: rotate(-45deg) translateY(25%);
    -ms-transform: rotate(-45deg) translateY(25%);
    transform: rotate(-45deg) translateY(25%);
}

.st-panel h2 {
    color: #e23a6e;
    text-shadow: 1px 1px 1px rgba(151,24,64,0.2);
    position: absolute;
    font-size: 54px;
    font-weight: 900;
    width: 80%;
    left: 10%;
    text-align: center;
    line-height: 50px;
    margin: -70px 0 0 0;
    padding: 0;
    top: 50%;
    -webkit-backface-visibility: hidden;
}

#st-control-1:checked ~ .st-scroll #st-panel-1 h2,
#st-control-2:checked ~ .st-scroll #st-panel-2 h2,
#st-control-3:checked ~ .st-scroll #st-panel-3 h2,
#st-control-4:checked ~ .st-scroll #st-panel-4 h2,
#st-control-5:checked ~ .st-scroll #st-panel-5 h2{
    -webkit-animation: moveDown 0.6s ease-in-out 0.2s backwards;
    -moz-animation: moveDown 0.6s ease-in-out 0.2s backwards;
    -o-animation: moveDown 0.6s ease-in-out 0.2s backwards;
    -ms-animation: moveDown 0.6s ease-in-out 0.2s backwards;
    animation: moveDown 0.6s ease-in-out 0.2s backwards;
}
@-webkit-keyframes moveDown{
    0% {
        -webkit-transform: translateY(-40px);
        opacity: 0;
    }
    100% {
        -webkit-transform: translateY(0px);  
        opacity: 1;
    }
}

@-moz-keyframes moveDown{
    0% {
        -moz-transform: translateY(-40px);
        opacity: 0;
    }
    100% {
        -moz-transform: translateY(0px);  
        opacity: 1;
    }
}

@-o-keyframes moveDown{
    0% {
        -o-transform: translateY(-40px);
        opacity: 0;
    }
    100% {
        -o-transform: translateY(0px);  
        opacity: 1;
    }
}

@-ms-keyframes moveDown{
    0% {
        -ms-transform: translateY(-40px);
        opacity: 0;
    }
    100% {
        -ms-transform: translateY(0px);  
        opacity: 1;
    }
}

@keyframes moveDown{
    0% {
        transform: translateY(-40px);
        opacity: 0;
    }
    100% {
        transform: translateY(0px);  
        opacity: 1;
    }
}

.st-panel p {
    position: absolute;
    text-align: center;
    font-size: 16px;
    line-height: 22px;
    color: #8b8b8b;
    z-index: 2;
    padding: 0;
    width: 50%;
    left: 25%;
    top: 50%;
    margin: 10px 0 0 0;
    -webkit-backface-visibility: hidden;
}
#st-control-1:checked ~ .st-scroll #st-panel-1 p,
#st-control-2:checked ~ .st-scroll #st-panel-2 p,
#st-control-3:checked ~ .st-scroll #st-panel-3 p,
#st-control-4:checked ~ .st-scroll #st-panel-4 p,
#st-control-5:checked ~ .st-scroll #st-panel-5 p{
    -webkit-animation: moveUp 0.6s ease-in-out 0.2s backwards;
    -moz-animation: moveUp 0.6s ease-in-out 0.2s backwards;
    -o-animation: moveUp 0.6s ease-in-out 0.2s backwards;
    -ms-animation: moveUp 0.6s ease-in-out 0.2s backwards;
    animation: moveUp 0.6s ease-in-out 0.2s backwards;
}

@-webkit-keyframes moveUp{
    0% {
        -webkit-transform: translateY(40px);
        opacity: 0;
    }
    100% {
        -webkit-transform: translateY(0px);  
        opacity: 1;
    }
}

@-moz-keyframes moveUp{
    0% {
        -moz-transform: translateY(40px);
        opacity: 0;
    }
    100% {
        -moz-transform: translateY(0px);  
        opacity: 1;
    }
}

@-o-keyframes moveUp{
    0% {
        -o-transform: translateY(40px);
        opacity: 0;
    }
    100% {
        -o-transform: translateY(0px);  
        opacity: 1;
    }
}

@-ms-keyframes moveUp{
    0% {
        -ms-transform: translateY(40px);
        opacity: 0;
    }
    100% {
        -ms-transform: translateY(0px);  
        opacity: 1;
    }
}

@keyframes moveUp{
    0% {
        transform: translateY(40px);
        opacity: 0;
    }
    100% {
        transform: translateY(0px);  
        opacity: 1;
    }
}

/* Colored sections */

.st-color,
.st-deco{
    background: #fa96b5;
}
.st-color [data-icon]:after {
    color: #fa96b5;
}
.st-color .st-deco {
    background: #fff;
}
.st-color h2 {
    color: #fff;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.1);
}
.st-color p {
    color: #fff;
    color: rgba(255,255,255,0.8);
}

@media screen and (max-width: 520px) {
    .st-panel h2 {
        font-size: 42px;
    }

    .st-panel p {
        width: 90%;
        left: 5%;
        margin-top: 0;
    }

    .st-container > a {
        font-size: 13px;
    }
}
@media screen and (max-width: 360px) {
    .st-container > a {
        font-size: 10px;
    }

    .st-deco{
        width: 120px;
        height: 120px;
        margin-left: -60px;
    }

}
body{
    font-family: Georgia, serif;
    background: #ddd;
    font-weight: 400;
    font-size: 15px;
    color: #333;
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
}
a{
    color: #555;
    text-decoration: none;
}
.clr{
    clear: both;
    padding: 0;
    height: 0;
    margin: 0; 
```

这个问题只发生在 Firefox 中（我使用的是 Firefox 16.0）。这是问题的[JSFiddle](http://jsfiddle.net/DGFat/4/)。单击导航栏中的“幸福”选项以进入有问题的部分。有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:07:32.763

如果要开始一个新的 div，则使用 clear 属性来防止从前一个 div 继承。像这样的东西：

```
<div your style here></div>
<div Style="clear:both"></div>
<div You second div></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:53:24.810

你想把那个表格放在中心吗？看一下这个：

将此添加到您的 CSS（此处为 jsFiddle：http: [//jsfiddle.net/DGFat/8/](http://jsfiddle.net/DGFat/8/)）

```
form {
    height:200px;
    position: absolute;
    left: 50%;
    width:300px;
    top: 50%;
    margin: -100px 0 0 -150px;
    background: gray; /*just so you could see it better */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T13:46:48.087

似乎 css 魔法在“标签”方面混淆了 Firefox。这是一个非常有趣的问题，因为 Firefox 似乎试图定位标签并自动对齐视口以使其位于顶部，尽管它已经是...... CSS 明智，我无能为力，即使使用`overflow:hidden`，你也可以仍然使用鼠标中键滚动正文，从而导致 Firefox 中出现不对齐问题。使用谷歌浏览器，多次按下“Serendipity”选项卡上的选项卡将导致视口直接滚动到输入选项卡。请参阅[避免 IE 中的键盘导航触发不必要的滚动？](https://stackoverflow.com/questions/4653331/avoid-unwanted-scrolling-triggered-by-keyboard-navigation-in-ie)

但是，使用 javascript，如果您愿意牺牲网站的“无 javascript”方面，这一切都可以轻松避免。

```
var tabs = document.getElementById("registration-form").elements;
for (var i = 0; i < tabs.length; i++) {
    tabs[i].setAttribute("tabindex", i + 1);
    tabs[i].addEventListener('keydown', function(e) {
        var e = window.event || e;
        var keyCode = e.keyCode || e.which;

        if (keyCode == 9) {
            e.preventDefault();

            var x = window.scrollX,
                y = window.scrollY;

            var elementToFocus = document.getElementById("registration-form").elements[this.getAttribute("tabindex")];
            if (typeof elementToFocus == "undefined") {
                elementToFocus = document.getElementById("registration-form").elements[0];
            }
            elementToFocus.focus();
            window.scrollTo(x, y);

        }
    });
}
window.addEventListener("scroll", function(e) {
    var e = window.event || e;
    e.preventDefault();
    window.scrollTo(0, 0);
});​ 
```

[http://jsfiddle.net/DGFat/15/](http://jsfiddle.net/DGFat/15/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T15:21:21.553

我认为问题在于您对“一切”的输入。

在此声明中添加：`[type="checkbox"]`到您的 CSS：
`.st-container > input, .st-container > a { ... }`成为 `.st-container > input[type="checkbox"], .st-container > a { ... }`

停止 FF 中的选项卡问题，但它稍微破坏了定位，并摆脱了导航。听起来比它更糟糕。

`input`所有浏览器都有元素的内置属性。我认为您的 CSS 实现在将您的功能与演示文稿隔离方面做得不够好。

# php - 如何使用 PHP 使我的输出文本可滚动？

> ID：12995432
> 
> 赞同：2
> 
> 时间：2012-10-21T06:03:15.753
> 
> 标签：php, html, css, text, scrollable

我试图回显的文本`$data`太长了，并且超出了表格的边界。除此之外，所有文本都在没有换行符（或空行）或适当间距的情况下显示。

我的简单 PHP 代码：

```
<div id="sampleid1" class="tabcontent" style="margin-left:48px;">
    <table width="510" border="0" cellspacing="4" cellpadding="4" class="SampleClass">
        <tr>
            <td>
                <?php echo Sample1_LABEL;?>
            </td>
            <th align="left"><strong>:</strong>
            </th>
            <td>
                <?php echo $data[ 'Sample1'];?>
            </td>
        </tr>
        <tr>
            <td>
                <?php echo Sample2_LABEL;?>
            </td>
            <th align="left"><strong>:</strong>
            </th>
            <td>
                <?php echo $data[ 'Sample2'];?>
            </td>
        </tr>
    </table>
</div> 
```

总之：

1.  我需要使用 检索的文本进行`$data`格式化，以便在回显时在输出中显示换行符。
2.  我需要输出文本是可滚动的，所以没有文本会超出边界。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T06:13:04.303

您需要将 CSS 设置为 TD 标签，在其中回显 $data ...

```
<td style="height:150px; overflow-y:scroll;"> 
```

我的错误.. TD 不接受溢出，所以你可以这样做::

```
<td style="height:150px"><div style="height:100%; overflow-y:scroll;">..PHPCODE...</div></td> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T06:15:24.110

您可以`<pre>`在空格很重要的输出周围回显一个标签。就像是：

```
<?php echo "<pre>".Sample1_LABEL."</pre>";?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T06:37:27.343

你可以试试这个

```
<td>
   <div style="height:100px; overflow:auto">
      <?php echo $data['Sample2'];?>
   </div>
</td> 
```

你也可以试试

```
echo(nl2br($data['Sample2']));  //converts newline to <br /> html tag 
```

# java - 如何在 JTable 单元格中设置图标？

> ID：12995433
> 
> 赞同：4
> 
> 时间：2012-10-21T06:03:32.040
> 
> 标签：java, swing, icons, jtable, imageicon

我正在尝试在 Jtable 的单元格中添加图像图标。我有一个如下所述的代码。我该怎么做？

```
package com.orb;
private final LinkedList<Product> list= new LinkedList<Product>();
private final LinkedList<Boolean> checkList = new LinkedList<Boolean>();
public void addItem(Product customer) {
    list.add(customer);
    checkList.add(false);
    checkList.remove(true);
    fireTableDataChanged();
  }

@Override
public int getColumnCount() {
        return 6;
}

@Override
public int getRowCount() {
    return list.size();
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    Object obj = null;

    if(columnIndex==4){
        setTotal(list.get(rowIndex));
    }

    switch (columnIndex){
        case 0: obj= list.get(rowIndex).getCode() ;break;
        case 1: obj=list.get(rowIndex).getDescription(); break;
        case 2: obj=list.get(rowIndex).getQuantity();break;
        case 3: obj=list.get(rowIndex).getPrice();break;            
        case 4: obj=list.get(rowIndex).getTotal();break;
    }
    return obj;
}

@Override
public Class<?> getColumnClass(int arg0) {

    switch(arg0){
    case 0: case 1: return String.class; 
    case 2: return Integer.class; 
    case 3: case 4: return Double.class;

    //case 5: return ImageIcon.class;
    }
    return super.getColumnClass(arg0);
}

@Override
public boolean isCellEditable(int arg0, int arg1) {
    boolean isCellEditable = false;
    switch(arg1){
    case 2: case 3: isCellEditable= true;break;
    default: isCellEditable= false;break;
    }
    return isCellEditable;
    //return super.isCellEditable(arg0, arg1);
}

@Override
public void setValueAt(Object arg0, int arg1, int arg2) {
    System.out.println("Value seted" +arg0 + arg1 + arg2);

    switch(arg2){
    case 0: break;
    case 1: break;
    case 2: list.get(arg1).setQuantity((Integer)arg0); setTotal(list.get(arg1)); break;
    case 3: list.get(arg1).setPrice((Double)arg0); setTotal(list.get(arg1));break;          
    case 4: list.get(arg1).setTotal((Double)arg0);break;

       //case 0: checkList.set(arg1, (Boolean)arg0);break;
       default:break;
    }

    fireTableDataChanged();
}

public LinkedList<Product> getList() {
    LinkedList<Product> temp = new LinkedList<Product>();
    int index=-1;
    for(Boolean isSelected:checkList){
        index++;
        if(isSelected){
            temp.add(list.get(index));
        }
    }
    return temp;
}

public void deleteRow(int rowNubmer)
{
    list.remove(rowNubmer);     
    fireTableDataChanged();
}

public void setTotal(Product product){
    Double total = 0.0d;
    total = product.getQuantity ()* product.getPrice();
    product.setTotal(total);

}
@Override
public void fireTableDataChanged() {
    super.fireTableDataChanged();       

} 
```

我有一个像上面这样的表格模型。我想在表格单元格中添加图像图标，并希望在按下该图标时删除单元格。我该如何处理这段代码？请给我完整的描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T06:28:39.227

您可以使用[`DefaltTableCellRenderer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableCellRenderer.html)由 a 支持的 a `JLabel`，然后您可以使用它来设置图标。

最好的解决方案是扩展`DefaltTableCellRenderer`和覆盖该`getTableCellRendererComponent`方法，并根据需要逐个单元格地应用图标

您可以通过为给定`Class`类型定义默认渲染器或直接应用于列来应用渲染器

查看[如何使用 JTables](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)和特别是[使用自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)

**更新示例**

这是**一种**方法，还有更多...

```
public class TestTable {

    public static void main(String[] args) {
        new TestTable();
    }

    public TestTable() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JTable table = new JTable();
                table.setGridColor(Color.LIGHT_GRAY);
                table.setShowGrid(true);
                table.setShowHorizontalLines(true);
                table.setShowVerticalLines(true);                
                table.setModel(new TestTableModel());
                table.getColumn("X").setCellRenderer(new DeleteCellRenderer());
                table.getColumn("X").setCellEditor(new DeleteCellEditor());

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class TestTableModel extends AbstractTableModel {

        private List<RowData> rowData;

        public TestTableModel() {
            rowData = new ArrayList<RowData>(25);
            for (int index = 0; index < 10; index++) {
                rowData.add(new RowData(index));
            }
        }

        @Override
        public String getColumnName(int column) {
            return column == 0 ? "Text" : "X";
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            RowData rd = rowData.get(rowIndex);
            return rd.isDeletable();
        }

        @Override
        public int getRowCount() {
            return rowData.size();
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            RowData rd = rowData.get(rowIndex);
            return columnIndex == 0 ? rd.getText() : rd.isDeletable();
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            RowData rd = rowData.get(rowIndex);
            if (columnIndex == 1) {
                if (aValue instanceof Boolean && (Boolean)aValue) {
                    rowData.remove(rd);
                    fireTableRowsDeleted(rowIndex, rowIndex);
                }
            }
        }

    }

    public class RowData {

        private String text;
        private boolean deletable;

        public RowData(int row) {
            text = "Row " + row;
            deletable = Math.round(Math.random() * 1) == 0;
        }

        public String getText() {
            return text;
        }

        public boolean isDeletable() {
            return deletable;
        }        
    }

    public class DeleteCellRenderer extends DefaultTableCellRenderer {

        public DeleteCellRenderer() {
            try {
                BufferedImage img = ImageIO.read(getClass().getResource("/Delete.png"));
                setIcon(new ImageIcon(img));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            setText(null);
            if (value instanceof Boolean && (Boolean)value) {
                setEnabled(true);
            } else {
                setEnabled(false);
            }
            return this;
        }        
    }

    public class DeleteCellEditor extends AbstractCellEditor implements TableCellEditor {

        private JLabel label;

        public DeleteCellEditor() {
            label = new JLabel("Delete");
        }

        @Override
        public Object getCellEditorValue() {
            return true;
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    stopCellEditing();
                }
            });
            return label;
        }

        @Override
        public boolean isCellEditable(EventObject e) {
            return true;
        }        
    }    
} 
```

**更新**

为什么不使用`JButton`/ `TableCellEditor`？ [这就是为什么](https://stackoverflow.com/questions/25070511/add-jbutton-to-each-row-of-a-jtable/25071138#25071138)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T06:10:19.173

这是通过可以扩展*JLabel*的自定义单元格渲染器完成的。您可以轻松设置*JLabel*的图标。这是一个[合适的例子](http://www.exampledepot.com/egs/javax.swing.table/CustRend.html)。

*Renderer 是一个组件，它必须在JTable*调用*getTableCellRendererComponent*并传递单元格状态和内容后将自己绘制为表格单元格。渲染器通常会自行设置属性并返回*this*。渲染器也可以返回一些其他对象，只要它扩展了*Component*。

# python - 表示和解决给定图像的迷宫

> ID：12995434
> 
> 赞同：283
> 
> 时间：2012-10-21T06:03:44.147
> 
> 标签：python, algorithm, matlab, image-processing, maze

给定图像表示和解决迷宫的最佳方法是什么？

![范围问题 134 的封面图片](../Images/ec2c809324557a525447fe874d52284b.png)

给定一个 JPEG 图像（如上所示），读取它、将其解析为某种数据结构并解决迷宫问题的最佳方法是什么？我的第一直觉是逐像素读取图像并将其存储在布尔值列表（数组）中：`True`对于白色像素和`False`非白色像素（可以丢弃颜色）。这种方法的问题在于图像可能不是“像素完美”。我的意思是，如果墙上某处有一个白色像素，它可能会创建一条意想不到的路径。

另一种方法（经过一番思考后想到）是将图像转换为 SVG 文件 - 这是在画布上绘制的路径列表。这样，可以将路径读入相同类型的列表（布尔值）中，其中`True`指示路径或墙壁，`False`指示可通行的空间。如果转换不是 100% 准确，并且没有完全连接所有墙壁，从而产生间隙，则此方法会出现问题。

转换为 SVG 的另一个问题是线条不是“完全”笔直的。这导致路径是三次贝塞尔曲线。使用由整数索引的布尔值列表（数组），曲线不会轻易转移，曲线上的所有点都必须计算，但不会与列表索引完全匹配。

我认为虽然其中一种方法可能有效（尽管可能无效），但考虑到如此大的图像，它们的效率非常低，并且存在更好的方法。这是如何做到最好（最有效和/或复杂性最低）的？有没有最好的方法？

然后是迷宫的解决。如果我使用前两种方法中的任何一种，我基本上都会得到一个矩阵。根据[这个答案](https://stackoverflow.com/a/3097677/1267663)，表示迷宫的好方法是使用树，解决它的好方法是使用[A* 算法](http://en.wikipedia.org/wiki/A%2a_search_algorithm)。如何从图像中创建一棵树？有任何想法吗？

**TL;DR**
最好的解析方式？变成什么数据结构？所述结构如何帮助/阻碍解决？

**更新**
我已经尝试使用`numpy`@Thomas 推荐的方式实现@Mikhail 用Python 编写的内容。我觉得算法是正确的，但它并没有像希望的那样工作。（下面的代码。）PNG 库是[PyPNG](https://raw.github.com/drj11/pypng/master/code/png.py)。

```
import png, numpy, Queue, operator, itertools

def is_white(coord, image):
  """ Returns whether (x, y) is approx. a white pixel."""
  a = True
  for i in xrange(3):
    if not a: break
    a = image[coord[1]][coord[0] * 3 + i] > 240
  return a

def bfs(s, e, i, visited):
  """ Perform a breadth-first search. """
  frontier = Queue.Queue()
  while s != e:
    for d in [(-1, 0), (0, -1), (1, 0), (0, 1)]:
      np = tuple(map(operator.add, s, d))
      if is_white(np, i) and np not in visited:
        frontier.put(np)
    visited.append(s)
    s = frontier.get()
  return visited

def main():
  r = png.Reader(filename = "thescope-134.png")
  rows, cols, pixels, meta = r.asDirect()
  assert meta['planes'] == 3 # ensure the file is RGB
  image2d = numpy.vstack(itertools.imap(numpy.uint8, pixels))
  start, end = (402, 985), (398, 27)
  print bfs(start, end, image2d, []) 
```

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2012-10-21T07:20:56.137

这是一个解决方案。

1.  将图像转换为灰度（尚未二进制），调整颜色的权重，使最终的灰度图像大致均匀。您可以通过在图像 -> 调整 -> 黑白中控制 Photoshop 中的滑块来实现。
2.  通过在 Photoshop 中的图像 -> 调整 -> 阈值中设置适当的阈值，将图像转换为二进制。
3.  确保阈值选择正确。使用具有 0 容差、点采样、连续、无抗锯齿的魔棒工具。检查选择中断处的边缘是否不是由错误阈值引入的错误边缘。事实上，这个迷宫的所有内部点从一开始就可以进入。
4.  在迷宫上添加人工边界，以确保虚拟旅行者不会在它周围走动 :)
5.  以您喜欢的语言实施[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)(BFS) 并从一开始就运行它。我更喜欢[MATLAB](http://en.wikipedia.org/wiki/MATLAB)来完成这项任务。正如@Thomas 已经提到的，没有必要弄乱图形的常规表示。您可以直接使用二值化图像。

这是 BFS 的 MATLAB 代码：

```
function path = solve_maze(img_file)
  %% Init data
  img = imread(img_file);
  img = rgb2gray(img);
  maze = img > 0;
  start = [985 398];
  finish = [26 399];

  %% Init BFS
  n = numel(maze);
  Q = zeros(n, 2);
  M = zeros([size(maze) 2]);
  front = 0;
  back = 1;

  function push(p, d)
    q = p + d;
    if maze(q(1), q(2)) && M(q(1), q(2), 1) == 0
      front = front + 1;
      Q(front, :) = q;
      M(q(1), q(2), :) = reshape(p, [1 1 2]);
    end
  end

  push(start, [0 0]);

  d = [0 1; 0 -1; 1 0; -1 0];

  %% Run BFS
  while back <= front
    p = Q(back, :);
    back = back + 1;
    for i = 1:4
      push(p, d(i, :));
    end
  end

  %% Extracting path
  path = finish;
  while true
    q = path(end, :);
    p = reshape(M(q(1), q(2), :), 1, 2);
    path(end + 1, :) = p;
    if isequal(p, start) 
      break;
    end
  end
end 
```

[它真的非常简单和标准，用Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)或其他方式实现它应该没有困难。

这是答案：

[![在此处输入图像描述](../Images/aacf0dc59380515688d7c9055a7ad406.png)](https://i.stack.imgur.com/gQ7nV.png)

* * *

## 回答 #2

> 赞同：164
> 
> 时间：2012-11-01T09:40:23.417

此解决方案是用 Python 编写的。感谢 Mikhail 对图像准备的指导。

**动画广度优先搜索：**

![BFS 动画版](../Images/113cafb57c89d7b2a0132dcee1c6fe0b.png)

**完成的迷宫：**

![完成迷宫](../Images/0d4fd19d1f986bb85d4cd81b2fde5f72.png)

```
#!/usr/bin/env python

import sys

from Queue import Queue
from PIL import Image

start = (400,984)
end = (398,25)

def iswhite(value):
    if value == (255,255,255):
        return True

def getadjacent(n):
    x,y = n
    return [(x-1,y),(x,y-1),(x+1,y),(x,y+1)]

def BFS(start, end, pixels):

    queue = Queue()
    queue.put([start]) # Wrapping the start tuple in a list

    while not queue.empty():

        path = queue.get() 
        pixel = path[-1]

        if pixel == end:
            return path

        for adjacent in getadjacent(pixel):
            x,y = adjacent
            if iswhite(pixels[x,y]):
                pixels[x,y] = (127,127,127) # see note
                new_path = list(path)
                new_path.append(adjacent)
                queue.put(new_path)

    print "Queue has been exhausted. No answer was found."

if __name__ == '__main__':

    # invoke: python mazesolver.py <mazefile> <outputfile>[.jpg|.png|etc.]
    base_img = Image.open(sys.argv[1])
    base_pixels = base_img.load()

    path = BFS(start, end, base_pixels)

    path_img = Image.open(sys.argv[1])
    path_pixels = path_img.load()

    for position in path:
        x,y = position
        path_pixels[x,y] = (255,0,0) # red

    path_img.save(sys.argv[2]) 
```

**注意：**将访问过的白色像素标记为灰色。这消除了对访问列表的需要，但这需要在绘制路径之前从磁盘第二次加载图像文件（如果您不想要最终路径和所有路径的合成图像）。

[我使用的迷宫的空白版本。](https://i.imgur.com/vXN0V.jpg)

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2013-05-20T19:33:31.647

我尝试自己实施 A-Star 搜索来解决这个问题。密切关注[Joseph Kern](https://stackoverflow.com/a/13174351/1025391)的框架实现和[此处](http://en.wikipedia.org/wiki/A-star#Pseudocode)给出的算法伪代码：

```
def AStar(start, goal, neighbor_nodes, distance, cost_estimate):
    def reconstruct_path(came_from, current_node):
        path = []
        while current_node is not None:
            path.append(current_node)
            current_node = came_from[current_node]
        return list(reversed(path))

    g_score = {start: 0}
    f_score = {start: g_score[start] + cost_estimate(start, goal)}
    openset = {start}
    closedset = set()
    came_from = {start: None}

    while openset:
        current = min(openset, key=lambda x: f_score[x])
        if current == goal:
            return reconstruct_path(came_from, goal)
        openset.remove(current)
        closedset.add(current)
        for neighbor in neighbor_nodes(current):
            if neighbor in closedset:
                continue
            if neighbor not in openset:
                openset.add(neighbor)
            tentative_g_score = g_score[current] + distance(current, neighbor)
            if tentative_g_score >= g_score.get(neighbor, float('inf')):
                continue
            came_from[neighbor] = current
            g_score[neighbor] = tentative_g_score
            f_score[neighbor] = tentative_g_score + cost_estimate(neighbor, goal)
    return [] 
```

由于 A-Star 是一种启发式搜索算法，您需要提出一个函数来估计达到目标之前的剩余成本（此处为：距离）。除非您对次优解决方案感到满意，否则不应高估成本。此处保守的选择是[曼哈顿（或出租车）距离](http://en.wikipedia.org/wiki/Taxicab_geometry)，因为它表示所用冯诺依曼邻域的网格上两点之间的直线距离。（在这种情况下，永远不会高估成本。）

然而，这将大大低估手头给定迷宫的实际成本。因此，我添加了另外两个距离度量平方欧几里得距离和曼哈顿距离乘以四进行比较。然而，这些可能会高估实际成本，因此可能会产生次优结果。

这是代码：

```
import sys
from PIL import Image

def is_blocked(p):
    x,y = p
    pixel = path_pixels[x,y]
    if any(c < 225 for c in pixel):
        return True
def von_neumann_neighbors(p):
    x, y = p
    neighbors = [(x-1, y), (x, y-1), (x+1, y), (x, y+1)]
    return [p for p in neighbors if not is_blocked(p)]
def manhattan(p1, p2):
    return abs(p1[0]-p2[0]) + abs(p1[1]-p2[1])
def squared_euclidean(p1, p2):
    return (p1[0]-p2[0])**2 + (p1[1]-p2[1])**2

start = (400, 984)
goal = (398, 25)

# invoke: python mazesolver.py <mazefile> <outputfile>[.jpg|.png|etc.]

path_img = Image.open(sys.argv[1])
path_pixels = path_img.load()

distance = manhattan
heuristic = manhattan

path = AStar(start, goal, von_neumann_neighbors, distance, heuristic)

for position in path:
    x,y = position
    path_pixels[x,y] = (255,0,0) # red

path_img.save(sys.argv[2]) 
```

下面是一些用于结果可视化的图像（灵感来自[Joseph Kern](https://stackoverflow.com/a/13174351/1025391)发布的图像）。动画在主 while 循环 10000 次迭代后显示一个新帧。

广度优先搜索：

![广度优先搜索](../Images/e0f6b7c1f03fd2877652b7b9958614e7.png)

A-Star 曼哈顿距离：

![A-Star 曼哈顿距离](../Images/6d53d36c46244eb6191bc9af15aabac2.png)

A 星平方欧几里得距离：

![A星平方欧几里得距离](../Images/7a8e7f729d22d2bee05830ae49088163.png)

A-Star 曼哈顿距离乘以四：

![A-Star 曼哈顿距离乘以四](../Images/e25638220f90b773ad94137da02fcf3e.png)

结果表明，迷宫的探索区域对于所使用的启发式方法有很大不同。因此，平方欧几里得距离甚至会产生与其他度量不同的（次优）路径。

关于 A-Star 算法在终止前的运行时间方面的性能，请注意，与只需要评估目标的“目标性”的广度优先搜索 (BFS) 相比，对距离和成本函数的大量评估加起来每个候选位置。这些额外功能评估 (A-Star) 的成本是否超过检查大量节点 (BFS) 的成本，尤其是性能是否对您的应用程序来说是一个问题，这取决于个人看法当然不能普遍回答。

关于与穷举搜索（例如，BFS）相比，明智的搜索算法（例如A -Star）是否是更好的选择，一般可以说如下*。*随着迷宫的维数，即搜索树的分支因子，穷举搜索（穷举搜索）的劣势呈指数增长。随着复杂性的增加，这样做变得越来越不可行，并且在某些时候，您对*任何*结果路径都非常满意，无论它（大约）最优与否。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2012-10-24T08:33:15.350

树搜索太多了。迷宫本质上是沿着解决方案路径可分离的。

（感谢Reddit 的[rainman002](http://www.reddit.com/r/coding/comments/11yvxu/solving_a_maze_given_an_image_stack_overflow/c6qtnrr)向我指出这一点。）

正因为如此，您可以快速使用[连接组件](https://en.wikipedia.org/wiki/Connected_Component_Labeling)来识别迷宫墙的连接部分。这会在像素上迭代两次。

如果你想把它变成一个很好的解决方案路径图，你可以使用带有结构化元素的二进制操作来填充每个连接区域的“死胡同”路径。

MATLAB 的演示代码如下。它可以使用调整来更好地清理结果，使其更通用，并使其运行得更快。（有时不是凌晨 2:30。）

```
% read in and invert the image
im = 255 - imread('maze.jpg');

% sharpen it to address small fuzzy channels
% threshold to binary 15%
% run connected components
result = bwlabel(im2bw(imfilter(im,fspecial('unsharp')),0.15));

% purge small components (e.g. letters)
for i = 1:max(reshape(result,1,1002*800))
    [count,~] = size(find(result==i));
    if count < 500
        result(result==i) = 0;
    end
end

% close dead-end channels
closed = zeros(1002,800);
for i = 1:max(reshape(result,1,1002*800))
    k = zeros(1002,800);
    k(result==i) = 1; k = imclose(k,strel('square',8));
    closed(k==1) = i;
end

% do output
out = 255 - im;
for x = 1:1002
    for y = 1:800
        if closed(x,y) == 0
            out(x,y,:) = 0;
        end
    end
end
imshow(out); 
```

![当前代码的结果](../Images/15432f57d05be3c0de45bba61c202b87.png)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2012-10-24T02:41:16.557

使用队列进行阈值连续填充。将入口左侧的像素推入队列，然后开始循环。如果队列中的像素足够暗，则其颜色为浅灰色（高于阈值），并且所有相邻像素都被推入队列。

```
from PIL import Image
img = Image.open("/tmp/in.jpg")
(w,h) = img.size
scan = [(394,23)]
while(len(scan) > 0):
    (i,j) = scan.pop()
    (r,g,b) = img.getpixel((i,j))
    if(r*g*b < 9000000):
        img.putpixel((i,j),(210,210,210))
        for x in [i-1,i,i+1]:
            for y in [j-1,j,j+1]:
                scan.append((x,y))
img.save("/tmp/out.png") 
```

解决方案是灰墙和彩墙之间的走廊。请注意，这个迷宫有多种解决方案。此外，这似乎只是工作。

![解决方案](../Images/c022070b4aa2549e06e4f235adf9dbf2.png)

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2013-12-10T05:51:13.333

给你：[maze-solver-python](https://github.com/scharissis/maze-solver-python) (GitHub)

![在此处输入图像描述](../Images/2720b99e5cedda373bfa4444ab31803c.png)

我玩得很开心，并扩展了[Joseph Kern](https://stackoverflow.com/a/13174351/1505651)的回答。不减损它；我只是为其他可能有兴趣玩这个的人做了一些小的补充。

这是一个基于 python 的求解器，它使用 BFS 来查找最短路径。我当时的主要补充是：

1.  图像在搜索前被清理（即转换为纯黑白）
2.  自动生成 GIF。
3.  自动生成 AVI。

就目前而言，此示例迷宫的起点/终点是硬编码的，但我计划对其进行扩展，以便您可以选择适当的像素。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-10-21T07:17:42.813

我会选择矩阵的布尔选项。如果您发现标准 Python 列表对此效率太低，您可以使用`numpy.bool`数组来代替。1000x1000 像素迷宫的存储空间仅为 1 MB。

不要为创建任何树或图形数据结构而烦恼。这只是一种思考方式，但不一定是在内存中表示它的好方法；布尔矩阵既更容易编码，也更高效。

然后用A*算法求解。对于距离启发式，使用曼哈顿距离 ( `distance_x + distance_y`)。

`(row, column)`用坐标元组表示节点。每当算法（[维基百科伪代码](http://en.wikipedia.org/wiki/A%2a_search_algorithm#Pseudocode)）调用“邻居”时，只需循环四个可能的邻居（注意图像的边缘！）。

如果您发现它仍然太慢，您可以在加载之前尝试缩小图像。注意不要在此过程中丢失任何狭窄的路径。

也许也可以在 Python 中进行 1:2 的缩小，检查您实际上没有丢失任何可能的路径。一个有趣的选择，但它需要更多的思考。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-10-29T16:23:01.363

这里有一些想法。

（1.图像处理：）

1.1 将图像加载为[RGB](http://en.wikipedia.org/wiki/RGB_color_model)像素图。在[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)中，使用`system.drawing.bitmap`. 在没有简单的图像支持的语言中，只需将图像转换为可 [移植像素图格式](http://en.wikipedia.org/wiki/Netpbm_format)(PPM)（一种 Unix 文本表示，生成大文件）或一些您可以轻松阅读的简单二进制文件格式，例如[BMP](http://en.wikipedia.org/wiki/BMP_file_format)或[TGA](http://en.wikipedia.org/wiki/Truevision_TGA)。Unix中的[ImageMagick或 Windows 中的](http://en.wikipedia.org/wiki/ImageMagick)[IrfanView](http://en.wikipedia.org/wiki/IrfanView)。

1.2 如前所述，您可以通过将每个像素的（R+G+B）/3 作为灰度的指标来简化数据，然后对该值进行阈值化以生成黑白表。假设 0=black 和 255=white，接近 200 的值将消除 JPEG 伪影。

（2.解决方案：）

2.1 深度优先搜索：用起始位置初始化一个空栈，收集可用的后续移动，随机选择一个并推入栈，直到到达终点或死胡同。在通过弹出堆栈进行死路回溯时，您需要跟踪地图上访问了哪些位置，因此当您收集可用移动时，您永远不会两次走同一条路径。动画非常有趣。

2.2 广度优先搜索：前面提到过，和上面类似，只是使用了队列。动画也很有趣。这就像图像编辑软件中的洪水填充一样。我认为您可以使用此技巧在 Photoshop 中解决迷宫问题。

2.3 Wall Follower：从几何上讲，迷宫是一个折叠/回旋的管子。如果您将手放在墙上，您最终会找到出口；）这并不总是有效。有一定的假设：完美的迷宫等，例如，某些迷宫包含岛屿。一定要查一下；这很迷人。

（3.评论：）

这是一个棘手的问题。如果用一些简单的数组形式表示，则很容易解决迷宫，每个元素都是具有北、东、南和西墙的单元类型和一个已访问的标志字段。但是，鉴于您正在尝试使用手绘草图来执行此操作，它会变得混乱。老实说，我认为试图使草图合理化会让你发疯。这类似于相当复杂的计算机视觉问题。也许直接进入图像地图可能更容易但更浪费。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-10-04T00:55:31.190

这是使用 R 的解决方案。

```
### download the image, read it into R, converting to something we can play with...
library(jpeg)
url <- "https://i.stack.imgur.com/TqKCM.jpg"
download.file(url, "./maze.jpg", mode = "wb")
jpg <- readJPEG("./maze.jpg")

### reshape array into data.frame
library(reshape2)
img3 <- melt(jpg, varnames = c("y","x","rgb"))
img3$rgb <- as.character(factor(img3$rgb, levels = c(1,2,3), labels=c("r","g","b")))

## split out rgb values into separate columns
img3 <- dcast(img3, x + y ~ rgb) 
```

RGB转灰度，见：[https ://stackoverflow.com/a/27491947/2371031](https://stackoverflow.com/a/27491947/2371031)

```
# convert rgb to greyscale (0, 1)
img3$v <- img3$r*.21 + img3$g*.72 + img3$b*.07
# v: values closer to 1 are white, closer to 0 are black

## strategically fill in some border pixels so the solver doesn't "go around":
img3$v2 <- img3$v
img3[(img3$x == 300 | img3$x == 500) & (img3$y %in% c(0:23,988:1002)),"v2"]  = 0

# define some start/end point coordinates
pts_df <- data.frame(x = c(398, 399),
                     y = c(985, 26))

# set a reference value as the mean of the start and end point greyscale "v"s
ref_val <- mean(c(subset(img3, x==pts_df[1,1] & y==pts_df[1,2])$v,
                  subset(img3, x==pts_df[2,1] & y==pts_df[2,2])$v))

library(sp)
library(gdistance)
spdf3 <- SpatialPixelsDataFrame(points = img3[c("x","y")], data = img3["v2"])
r3 <- rasterFromXYZ(spdf3)

# transition layer defines a "conductance" function between any two points, and the number of connections (4 = Manhatten distances)
# x in the function represents the greyscale values ("v2") of two adjacent points (pixels), i.e., = (x1$v2, x2$v2)
# make function(x) encourages transitions between cells with small changes in greyscale compared to the reference values, such that: 
# when v2 is closer to 0 (black) = poor conductance
# when v2 is closer to 1 (white) = good conductance
tl3 <- transition(r3, function(x) (1/max( abs( (x/ref_val)-1 ) )^2)-1, 4) 

## get the shortest path between start, end points
sPath3 <- shortestPath(tl3, as.numeric(pts_df[1,]), as.numeric(pts_df[2,]), output = "SpatialLines")

## fortify for ggplot
sldf3 <- fortify(SpatialLinesDataFrame(sPath3, data = data.frame(ID = 1)))

# plot the image greyscale with start/end points (red) and shortest path (green)
ggplot(img3) +
  geom_raster(aes(x, y, fill=v2)) +
  scale_fill_continuous(high="white", low="black") +
  scale_y_reverse() +
  geom_point(data=pts_df, aes(x, y), color="red") +
  geom_path(data=sldf3, aes(x=long, y=lat), color="green") 
```

瞧！

[![正确找到最短路径的解决方案](../Images/3354893724e1cdc907f4f0d4211b025e.png)](https://i.stack.imgur.com/QvhNm.png)

如果您不填写一些边框像素，就会发生这种情况（哈！）...

[![求解器绕过迷宫的解决方案版本](../Images/ec25a282c0d73878a7d9b45d0362b10c.png)](https://i.stack.imgur.com/mY3Ja.png)

完全披露：在找到这个问题之前，我自己问并回答了一个非常[相似的问题。](https://stackoverflow.com/q/52601127/2371031)然后通过 SO 的魔力，发现这个问题是最热门的“相关问题”之一。我想我会用这个迷宫作为一个额外的测试用例......我很高兴地发现我的答案也适用于这个应用程序，只需要很少的修改。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-23T16:47:42.770

好的解决方案是，不是按像素查找邻居，而是按单元格来完成，因为走廊可以有 15px，所以在同一个走廊中，它可以采取左或右等动作，而如果它是按照位移来完成的是一个立方体，它会是一个简单的动作，比如向上、向下、向左或向右

# android - 从 Android 联系人中获取联系人姓名和姓氏

> ID：12995436
> 
> 赞同：4
> 
> 时间：2012-10-21T06:04:02.710
> 
> 标签：android, android-contacts, device

我正在构建一个需要从 Android 联系人中选择联系人的应用程序。我这样做了，并在我的应用程序中使用以下代码来检索姓名和姓氏表格选择的联系人（在 中`onActivityResult`）。

```
Cursor namesc = getContentResolver().query( ContactsContract.Data.CONTENT_URI, null, ContactsContract.Data.CONTACT_ID + " = " + id,null, null);
if (namesc.moveToFirst()) {
String name = namesc.getString(namesc.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME));
String family = namesc.getString(namesc
.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME));
String middle = namesc.getString(namesc
.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.StructuredName.MIDDLE_NAME)); 
```

它在 HTC 手机和其他一些手机中运行良好，但在许多 SE Xperia 型号和一些三星设备中，它不能给我姓名和家庭并返回 null。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:36:37.653

这是我使用的代码：

```
 String structuredNameWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?"; 
        String[] structuredNameWhereParams = new String[]{id, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE}; 
        cursor = resolver.query(ContactsContract.Data.CONTENT_URI, null, structuredNameWhere, structuredNameWhereParams, null); 
        if (cursor.moveToFirst()) 
        { 
            String StructuredNameId = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName._ID));
            String prefix = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.PREFIX));
            String givenName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME));
            String middleName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.MIDDLE_NAME));
            String familyName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME));
            String suffix = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.SUFFIX));
        } 
```

我真正看到的唯一区别是我在 where 参数中添加了 mime-type，并且我检索数据的方式略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-09T06:27:12.313

```
/* Return all contacts and show each contact data in android monitor    console as debug info. */    private List<ContactDTO> getAllContacts()    {
       List<ContactDTO> ret = new ArrayList<ContactDTO>();
       // Get all raw contacts id list.
       List<Integer> rawContactsIdList = getRawContactsIdList();
       int contactListSize = rawContactsIdList.size();
       ContentResolver contentResolver = getContentResolver();
       // Loop in the raw contacts list.
       for(int i=0;i<contactListSize;i++)
       {
           // Get the raw contact id.
           Integer rawContactId = rawContactsIdList.get(i);
           Log.d(TAG_ANDROID_CONTACTS, "raw contact id : " + rawContactId.intValue());
           // Data content uri (access data table. )
           Uri dataContentUri = ContactsContract.Data.CONTENT_URI;
           // Build query columns name array.
           List<String> queryColumnList = new ArrayList<String>();
           // ContactsContract.Data.CONTACT_ID = "contact_id";
           queryColumnList.add(ContactsContract.Data.CONTACT_ID);
           // ContactsContract.Data.MIMETYPE = "mimetype";
           queryColumnList.add(ContactsContract.Data.MIMETYPE);
           queryColumnList.add(ContactsContract.Data.DATA1);
           queryColumnList.add(ContactsContract.Data.DATA2);
           queryColumnList.add(ContactsContract.Data.DATA3);
           queryColumnList.add(ContactsContract.Data.DATA4);
           queryColumnList.add(ContactsContract.Data.DATA5);
           queryColumnList.add(ContactsContract.Data.DATA6);
           queryColumnList.add(ContactsContract.Data.DATA7);
           queryColumnList.add(ContactsContract.Data.DATA8);
           queryColumnList.add(ContactsContract.Data.DATA9);
           queryColumnList.add(ContactsContract.Data.DATA10);
           queryColumnList.add(ContactsContract.Data.DATA11);
           queryColumnList.add(ContactsContract.Data.DATA12);
           queryColumnList.add(ContactsContract.Data.DATA13);
           queryColumnList.add(ContactsContract.Data.DATA14);
           queryColumnList.add(ContactsContract.Data.DATA15);
           // Translate column name list to array.
           String queryColumnArr[] = queryColumnList.toArray(new String[queryColumnList.size()]);
           // Build query condition string. Query rows by contact id.
           StringBuffer whereClauseBuf = new StringBuffer();
           whereClauseBuf.append(ContactsContract.Data.RAW_CONTACT_ID);
           whereClauseBuf.append("=");
           whereClauseBuf.append(rawContactId);
           // Query data table and return related contact data.
           Cursor cursor = contentResolver.query(dataContentUri, queryColumnArr, whereClauseBuf.toString(), null, null);
           /* If this cursor return database table row data.
              If do not check cursor.getCount() then it will throw error
              android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0.
              */
           if(cursor!=null && cursor.getCount() > 0)
           {
               StringBuffer lineBuf = new StringBuffer();
               cursor.moveToFirst();
               lineBuf.append("Raw Contact Id : ");
               lineBuf.append(rawContactId);
               long contactId = cursor.getLong(cursor.getColumnIndex(ContactsContract.Data.CONTACT_ID));
               lineBuf.append(" , Contact Id : ");
               lineBuf.append(contactId);
               do{
                   // First get mimetype column value.
                   String mimeType = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.MIMETYPE));
                   lineBuf.append(" \r\n , MimeType : ");
                   lineBuf.append(mimeType);
                   List<String> dataValueList = getColumnValueByMimetype(cursor, mimeType);
                   int dataValueListSize = dataValueList.size();
                   for(int j=0;j < dataValueListSize;j++)
                   {
                       String dataValue = dataValueList.get(j);
                       lineBuf.append(" , ");
                       lineBuf.append(dataValue);
                   }
               }while(cursor.moveToNext());
               Log.d(TAG_ANDROID_CONTACTS, lineBuf.toString());
           }
           Log.d(TAG_ANDROID_CONTACTS, "=========================================================================");
       }
       return ret;    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-09T01:03:09.090

[Android 通讯录刚刚重生](https://proandroiddev.com/android-contacts-reborn-19985c73ad43)！使用[Contacts, Reborn API](https://github.com/vestrel00/contacts-android)，原始问题的答案，

> 我在我的应用程序中使用以下代码来检索姓名和姓氏表格选择的联系人......它不能给我姓名和家庭并返回 null。有谁能够帮我？

是以下...

在 Java 中，

```
public void printContactFullName(Context context, Long contactId) {
    Contacts contactsApi = ContactsFactory.create(context);
    Contact contact = contactsApi
            .query()
            .include(Fields.Name.getAll())
            .where(WhereKt.equalTo(Fields.Contact.Id, contactId))
            .find()
            .get(0);

    // Assuming this contact only have 1 RawContact...
    Name name = ContactDataKt.nameList(contact).get(0);
    Log.d(
            "Contact",
            "Prefix: " + name.getPrefix() +
            ", Given name: " + name.getGivenName() +
            ", Middle name: " + name.getMiddleName() +
            ", Family name: " + name.getFamilyName() +
            ", Suffix: " + name.getSuffix()
    );
} 
```

在科特林，

```
fun printContactFullName(context: Context, contactId: Long) {
    Contacts(context)
        .query()
        .include(Fields.Name.all)
        .where(Fields.Contact.Id equalTo contactId)
        .find()
        .first().let { contact ->
            // Assuming this contact only have 1 RawContact...
            val name = contact.names().first()
            Log.d(
                "Contact",
                """
                    Prefix: ${name.prefix}
                    Given name: ${name.givenName}
                    Middle name: ${name.middleName}
                    Family name: ${name.familyName}
                    Suffix: ${name.suffix}
                """.trimIndent()
            )
        }
} 
```

但是请记住，并非所有联系人都必须具有专有名称。用户可以创建没有姓名的联系人。这是本机联系人应用程序中的行为。

[您可以使用Contacts, Reborn API](https://github.com/vestrel00/contacts-android)做更多的事情。您甚至可以构建自己的成熟联系人应用程序，该应用程序可以与几乎所有 Android 副本附带的应用程序并驾齐驱。

# android - 用于显示文本选择句柄的 EditText 的自定义剪切/复制操作栏

> ID：12995439
> 
> 赞同：39
> 
> 时间：2012-10-21T06:04:30.683
> 
> 标签：android, android-edittext, textview, contextual-action-bar

我有一个应用程序，我希望能够显示一个允许用户选择一些文本的 TextView（或 EditText），然后按一个按钮来处理该文本。在 Honeycomb 之前的 Android 版本上实现这一点没有问题，但在 Honeycomb 及更高版本上，默认的长按操作是显示带有复制/剪切/粘贴选项的操作栏。我可以截取长按以显示我自己的操作栏，但是我没有显示文本选择句柄。

一旦我启动了自己的 ActionMode，我如何才能显示文本选择句柄？

这是我用来启动 ActionMode 的代码，除了没有显示文本选择句柄外，它可以工作：

```
public boolean onLongClick(View v) {
    if(actionMode == null)
        actionMode = startActionMode(new QuoteCallback());
    return true;
}

class QuoteCallback implements ActionMode.Callback {

    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        MenuInflater inflater = mode.getMenuInflater();
        inflater.inflate(R.menu.quote, menu);
        return true;
    }

    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        return false;
    }

    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        switch(item.getItemId()) {

        case R.id.quote:
            Log.d(TAG, "Selected menu");
            mode.finish();
            // here is where I would grab the selected text
            return true;
        }
        return false;
    }

    public void onDestroyActionMode(ActionMode mode) {
        actionMode = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-22T03:44:29.843

我想出了自己问题的答案；TextView（以及因此 EditText）有一个`setCustomSelectionActionModeCallback()`应该用来代替`startActionMode()`. 使用它可以自定义 TextView 用于文本选择的菜单。示例代码：

```
bodyView.setCustomSelectionActionModeCallback(new StyleCallback()); 
```

其中 StyleCallback 通过删除 Select All 并添加一些样式操作来自定义文本选择菜单：

```
class StyleCallback implements ActionMode.Callback {

    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        Log.d(TAG, "onCreateActionMode");
        MenuInflater inflater = mode.getMenuInflater();
        inflater.inflate(R.menu.style, menu);
        menu.removeItem(android.R.id.selectAll);
        return true;
    }

    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        return false;
    }

    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        Log.d(TAG, String.format("onActionItemClicked item=%s/%d", item.toString(), item.getItemId()));
        CharacterStyle cs;
        int start = bodyView.getSelectionStart();
        int end = bodyView.getSelectionEnd();
        SpannableStringBuilder ssb = new SpannableStringBuilder(bodyView.getText());

        switch(item.getItemId()) {

        case R.id.bold:
            cs = new StyleSpan(Typeface.BOLD);
            ssb.setSpan(cs, start, end, 1);
            bodyView.setText(ssb);
            return true;

        case R.id.italic:
            cs = new StyleSpan(Typeface.ITALIC);
            ssb.setSpan(cs, start, end, 1);
            bodyView.setText(ssb);
            return true;

        case R.id.underline:
            cs = new UnderlineSpan();
            ssb.setSpan(cs, start, end, 1);
            bodyView.setText(ssb);
            return true;
        }
        return false;
    }

    public void onDestroyActionMode(ActionMode mode) {
    }
} 
```

菜单添加的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/italic"
          android:showAsAction="always"
          android:icon="@drawable/italic"
          android:title="Italic"/>
    <item android:id="@+id/bold"
          android:showAsAction="always"
          android:icon="@drawable/bold"
          android:title="Bold"/>
    <item android:id="@+id/underline"
          android:showAsAction="always"
          android:icon="@drawable/underline"
          android:title="Underline"/>
</menu> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-08T07:03:07.567

如果您想自定义操作栏中的选项，上述解决方案很好。但是如果你想覆盖操作栏复制/粘贴等，下面是代码......

```
public class MainActivity extends Activity {
    EditText editText;
    private ClipboardManager myClipboard;
    private ClipData myClip;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myClipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE);
        editText = (EditText) findViewById(R.id.editText3);

        myClipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE);
        editText = (EditText) findViewById(R.id.editText3);
        editText.setCustomSelectionActionModeCallback(new Callback() {

            @Override
            public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
                // TODO Auto-generated method stub
                return false;
            }

            @Override
            public void onDestroyActionMode(ActionMode mode) {
                // TODO Auto-generated method stub

            }

            @Override
            public boolean onCreateActionMode(ActionMode mode, Menu menu) {
                // TODO Auto-generated method stub
                return true;
            }

            @Override
            public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
                // TODO Auto-generated method stub
                switch (item.getItemId()) {
                case android.R.id.copy:
                    int min = 0;
                    int max = editText.getText().length();
                    if (editText.isFocused()) {
                        final int selStart = editText.getSelectionStart();
                        final int selEnd = editText.getSelectionEnd();

                        min = Math.max(0, Math.min(selStart, selEnd));
                        max = Math.max(0, Math.max(selStart, selEnd));
                    }
                    // Perform your definition lookup with the selected text
                    final CharSequence selectedText = editText.getText()
                            .subSequence(min, max);
                    String text = selectedText.toString();

                    myClip = ClipData.newPlainText("text", text);
                    myClipboard.setPrimaryClip(myClip);
                    Toast.makeText(getApplicationContext(), "Text Copied",
                            Toast.LENGTH_SHORT).show();
                    // Finish and close the ActionMode
                    mode.finish();
                    return true;
                case android.R.id.cut:
                    // add your custom code to get cut functionality according
                    // to your requirement
                    return true;
                case android.R.id.paste:
                    // add your custom code to get paste functionality according
                    // to your requirement
                    return true;

                default:
                    break;
                }
                return false;
            }
        });         
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T08:16:41.117

最简单的方法是在您的`application`标签中定义的主题样式中添加一行`AndroidManifest`。打开您的主题样式并添加以下内容：

```
<item name="actionModeBackground">@color/your_color</item> 
```

或者

```
<item name="android:actionModeBackground">@color/your_color</item> 
```

例如：我定义的主题风格：

```
<style name="AppTheme" parent="AppBaseTheme">

        <item name="calendarViewStyle">@style/Widget.Holo.CalendarView</item>
        <item name="android:actionBarStyle">@style/AppTheme1</item>
        <!-- below is the line you have to add -->
        <item name="android:actionModeBackground">@color/black_actionBar</item>
</style> 
```

# r - 有什么方法可以在 R 中编辑矩阵中的值？

> ID：12995440
> 
> 赞同：2
> 
> 时间：2012-10-21T06:04:36.797
> 
> 标签：r, matrix

我已经解析了一个文件以提取某些值。一列包含带有符号的百分比。有没有办法删除那个“%”字符？

由此：

```
98.9%   23    43
92.2%   342   34
98.9%   53    53
82.2%   32    76
97.9%   83    45
92.9%   92    23 
```

至：

```
98.9   23    43
92.2   342   34
98.9   53    53
82.2   32    76
97.9   83    45
92.9   92    23 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T06:13:39.573

您在标题中说您有一个矩阵 - 在这种情况下，矩阵中的所有内容都应该已经是“字符”。用于`gsub`将 % 替换为空。

```
> j <- matrix(c("1%", "2%", 3, 4), ncol = 2)
> j
     [,1] [,2]
[1,] "1%" "3" 
[2,] "2%" "4" 
> gsub("%", "", j)
     [,1] [,2]
[1,] "1"  "3" 
[2,] "2"  "4" 
```

如果你希望它是数字，你可以`apply`使用`as.numeric`

```
> apply(gsub("%", "", j), 1, as.numeric)
     [,1] [,2]
[1,]    1    2
[2,]    3    4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T06:13:18.500

用于`gsub`替换`%`空字符串，然后转换为数字：

```
x <- c("98.9%", "92.2%", "98.9%", "82.2%", "97.9%", "92.9%")
as.numeric(gsub("%", "", x))
[1] 98.9 92.2 98.9 82.2 97.9 92.9 
```

# java - 内部类不能构造其他内部类的新实例

> ID：12995446
> 
> 赞同：0
> 
> 时间：2012-10-21T06:05:50.293
> 
> 标签：java

我有一个`Scraper`用静态内部类调用的类`Builder`，还有一个称为非静态内部类的类`StringPair`，我正在尝试获取一个构建器方法来构造 a`new StringPair(a,b)`并将其添加到 an `ArrayList<StringPair>`，但是它不能编译，编译器说`Error: non-static variable this cannot be referenced from a static context`并特别强调了`new StringPair(a,b)`问题的根源。

我不明白这里出了什么问题，任何帮助将不胜感激！

```
class Scraper {

    private final ArrayList<StringPair> stringPairs;

    Scraper(Builder builder) {

        stringPairs = builder.builderStringPairs;

    }

    public static class Builder {

        private static ArrayList<StringPair> builderStringPairs = new ArrayList<StringPair>();

        public Builder addStringPairs(String a, String b) {

            builderStringPairs.add(new StringPair(a, b));
            return this;
        }

        public Scraper build() {
            return new Scraper(this);
        }

    }

    class StringPair {
        String a,b;

        StringPair(String a, String b) {
            this.a = a;
            this.b = b;

        }

        String getA() {
            return a;
        }
        String getB() {
            return b;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T06:11:14.020

`Builder`不是内部类 - 它只是一个*嵌套*类，没有隐式引用包含类 ( `Scraper`) 的实例。

`StringPair`然而，*是*一个内部类。为了构造 的实例`StringPair`，您需要引用 的实例`Scraper`。因此，制作`Builder`工作的选项：

*   使其成为内部类（非静态）
*   创建`StringPair`一个嵌套类（静态）
*   在某处给出`Builder`一个实例，此时您可以使用：

    ```
    builderStringPairs.add(instance.new StringPair(a, b)); 
    ```

我怀疑第二个选项在这里是最合适的——我看不出有任何理由`StringPair` *需要*引用`Scraper`.

有关嵌套类和内部类的更多信息，请参阅[JLS 的第 8.1.3 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)

# c# - Windows Store App GridView 获取总宽度

> ID：12995453
> 
> 赞同：0
> 
> 时间：2012-10-21T06:07:14.207
> 
> 标签：c#, xaml, gridview, microsoft-metro, windows-store-apps

我正在构建一个 Windows 应用商店应用程序，它使用 GridView 来显示项目列表（基本，开箱即用的模板）。我想知道我是否可以获得所有项目占用的总宽度。

现在，我将项目列的数量乘以其中一项的总宽度。这是可行的，但它要求我背后的代码对我的观点了解太多。我想找到一个具有宽度的属性并绑定到它。

谢谢你的帮助！

这是我必须获取 GridView 的列宽的代码

```
(itemGridView.ItemContainerGenerator.ContainerFromIndex(0) as GridViewItem).ActualWidth 
```

我没有获得列数的好方法，所以这也会有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:30:37.470

GridView的`ActualWidth`属性应该包含您要查找的信息。

如果没有，您可以尝试调用`Measure`gridview 让它执行所需的布局演算并输出所需的大小。

# c# - 发布到事件聚合器的每个小事件是否都需要自己是一个空的 CompositePresentationEvent？

> ID：12995458
> 
> 赞同：4
> 
> 时间：2012-10-21T06:07:38.357
> 
> 标签：c#, wpf, silverlight, design-patterns, prism

我试图从架构和设计的角度来理解*事件聚合器模式。*我以前从未在 WPF 中使用过 Prism，但我正在研究它在 MSDN 上的工作原理。

在我看来，对于每个事件，用户都必须创建一个新的事件对象来扩展`CompositePresentationEvent`. 似乎新事件对象除了继承自那些之外没有其他功能（它通常没有自己的代码）。

例如：

A `AddNewStuffEvent`看起来像：

```
public class AddNewStuffEvent : CompositePresentationEvent<Object> {} //The end of the class 
```

对于一个`HealthChangeEvent`：

```
public class HealthChangeEvent: CompositePresentationEvent<Object> {} //The end of the class 
```

对于一个`BookFlipEvent`：

```
public class BookFlipEvent: CompositePresentationEvent<Object> {} //The end of the class 
```

对于一个`BookCloseEvent`：

```
public class BookCloseEvent: CompositePresentationEvent<Object> {} //The end of the class 
```

`BookOpenEvent`对于,等的每个小事件，这可能会永远持续下去`BookTearEvent`。因此，在特定的命名空间文件夹中，将有大量的事件类，并且事件聚​​合器将在运行时加载所有这些事件对象. 也就是说，每个小活动都需要一个空班？这是它的工作原理吗？有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T06:25:24.440

是的，每个事件类型都需要它自己的类，你必须定义它。

> 似乎新事件对象除了继承自那些之外没有其他功能

目的只是为事件提供强类型。这使得编写代码来订阅它们变得更加容易。即，订阅代码可以这样写：

```
aggregator.GetEvent<AddNewStuffEvent>().Subscribe(Handler); 
```

这是替代方案的一种更可取的方法，例如依赖say形式的“魔术字符串” `aggregator.GetEvent("AddNewStuffEvent").Subscribe(Handler)`（在编译时无法验证。

# ruby-on-rails - Rails 新手：您如何在 Rails 应用程序中使用 application_controller.rb？

> ID：12995459
> 
> 赞同：5
> 
> 时间：2012-10-21T06:07:43.927
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我刚刚进入轨道并开始慢慢理解它。有人可以解释或给我一些关于在 application_controller 中编码的好处或时间和原因的想法吗？有哪些用例。您如何为您的 Rails 应用程序使用应用程序控制器？我不想在其中放太多代码，因为据我了解，每个请求都会调用此控制器。这是真的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T06:12:47.283

ApplicationController 实际上是应用程序中的每个其他控制器都将从中继承的类（尽管这绝不是强制性的）。

我同意不要用太多代码弄乱它并保持干净整洁的态度，尽管在某些情况下 ApplicationController 是放置代码的好地方。例如：如果您正在使用多个语言环境文件并希望根据请求的 URL 设置语言环境，您可以在 ApplicationController 中执行此操作：

```
before_filter :set_locale

def set_locale
  I18n.locale = params[:locale] || I18n.default_locale
end 
```

这将使您免去在每个控制器中分别设置语言环境的麻烦。您只需执行一次，您就可以在整个系统中设置区域设置。

`protect_from_forgery`可以在新的 Rails 应用程序的默认 ApplicationController 上找到著名的也是如此。

另一个用例可能是拯救应用程序中某种类型的所有异常：

```
rescue_from ActiveRecord::RecordNotFound, :with => :record_not_found
private
def record_not_found
  render :text => "404 Not Found", :status => 404
end 
```

一般来说，如果你有一个所有其他控制器肯定会使用的特性，ApplicationController 可能是一个好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:08:41.413

我将它用于需要在多个控制器中使用的助手和方法。一个很好的例子是[Ryan Bates “Super Simple Authentication from Scratch”](http://railscasts.com/episodes/21-super-simple-authentication)

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  helper_method :admin?

  protected

  def authorize
    unless admin?
      flash[:error] = 'Sorry, that page is only for admins'
      redirect_to :root
      false
    end
  end

  def admin?
    session[:password] == "password"
  end
end 
```

然后你可以在你的应用程序中的任何地方`before_filter :authorize`或`if admin?`任何地方。

# parsing - 程序语法的解析算法是什么？

> ID：12995465
> 
> 赞同：0
> 
> 时间：2012-10-21T06:09:57.047
> 
> 标签：parsing, grammar, context-free-grammar, regular-language, context-sensitive-grammar

我想知道用于解析编程语法的解析算法是什么。除了 IEEE 研究论文之外，我可以阅读有关编程语法和解析算法的任何链接、博客或任何内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:39:32.080

# vim - 在 unix 和 windows 机器之间同步 vimrc 和插件

> ID：12995473
> 
> 赞同：3
> 
> 时间：2012-10-21T06:12:35.160
> 
> 标签：vim

我正在使用[此截屏视频](http://vimcasts.org/episodes/synchronizing-plugins-with-git-submodules-and-pathogen/)中描述的方法来保持我的 vimrc 和插件在多台机器上同步。我遇到的问题是一台机器运行ubuntu，另一台运行win7。

到目前为止，我发现了两种类型的问题。第一个似乎是行尾。为了让我的 windows vimrc 在 linux 机器上被读取，我必须做`:set fileformat=unix and write`. 但即使这样做了，我在所有插件中都遇到了类似的行尾问题：

```
jg@jg-VirtualBox:~$ vim ~/.vimrc
Error detected while processing /home/jg/.vimrc:
line   11:
E484: Can't open file /home/jg/vimfiles/plugin/autotag.vim
Error detected while processing /home/jg/.vim/plugin/DrawIt.vim:
line   60:
E492: Not an editor command: ^M
line   62:
E15: Invalid expression: &cp^M
line 1290:
E171: Missing :endif
Error detected while processing /home/jg/.vim/plugin/auto_number.vim:
line    5:
E488: Trailing characters 
```

我可以做一些事情，比如`vim ~/.vim/**/*.vim` 将它们全部加载，然后`:argdo set ff=unix | w`以相同的方式修复所有文件，但这似乎是一种糟糕的方法，因为任何时候我都用我的 vimfiles 从一台计算机更新 git repo 并从另一台计算机上提取它，我必须记住做这个文件转换。有没有更好的办法？

最后，vimrc 中的某些配置细节，例如某些二进制文件的位置，会因操作系统而异。处理这些差异的最佳方法是什么？我应该在我的 .vimrc 中添加 if 语句分支到 has("gui_win32")，还是有更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T07:17:16.043

是的，您必须在 vimrc 中添加分支才能获得特定于机器/操作系统的设置。这并不像听起来那么脏：一个`if`/ `ifelse`/`endif`就足够了。

另一种方法是将您的机器/操作系统特定设置保存在单独的非版本控制文件中：因为它非常本地化，您不需要在其他机器/操作系统上传播其内容。

您可以将这些设置放入`~/.vim/vimrc.local`并明确将此文件添加到`.gitignore`repo 中或之外，`~/.vimrc.local`并从您的 vimrc 中获取该文件。

Vim 在 Linux 上处理 Windows 行结尾有问题，但在 Windows 上处理 Linux 行结尾没有问题。只需在任何地方使用 Linux 换行符就可以了。

# ruby-on-rails-3 - 在 Rails 中调整缩略图大小

> ID：12995476
> 
> 赞同：1
> 
> 时间：2012-10-21T06:13:16.627
> 
> 标签：ruby-on-rails-3

有谁知道我可以在 Rails 中使用什么来将所有图像的大小调整为相同的宽度（和成比例的高度）？

# c++ - eclipse中CDT的问题

> ID：12995482
> 
> 赞同：1
> 
> 时间：2012-10-21T06:13:52.867
> 
> 标签：c++, pointers, eclipse-cdt

我正在为 C++ 程序使用 eclipse。

在我运行代码时构建我的代码后，我得到**name.exe has stop working**错误。相同的代码在这里工作正常[http://codepad.org/2c5xFbLM](http://codepad.org/2c5xFbLM)。

请帮我找到这个问题。
提前致谢。
我的代码：

```
#include<iostream>
#include<math.h>
#include <cstdlib>
using namespace std;

struct node{
    struct node * lc;
    struct node * rc;
    int data;
};

typedef struct node Node;

Node * getNewNode(int data){
    Node * node = NULL;

    node = (Node*)malloc(sizeof(node));
    node -> data = data;
    node -> lc = NULL;
    node -> rc = NULL;

    return node;
}

Node * buildBst(Node * root,int data){
    if(NULL == root){
        return getNewNode(data);
    }
    if(data > root -> data){
        root -> rc = buildBst(root->rc,data);
    }else{
        root -> lc = buildBst(root->lc,data);
    }
    return root;
}

void printInorder(Node * root){
    if(root != NULL){
        printInorder(root -> lc);
        cout << root -> data << " ";
        printInorder(root -> rc);
    }
}

int main(int argc, char* argv[]) {

    int arr [] = {2,3,4,1,5,9,0,3};
    Node * root = NULL;
    for(int i = 0;i < 6; ++i){
        root = buildBst(root,arr[i]);
    }
    printInorder(root);
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T06:40:40.687

由于您使用的是 C++，所以使用`new`运算符而不是`malloc`，崩溃发生在您调用 malloc 的第 14 次迭代或您的第 4 次节点创建时，由于调试的额外填充，它允许它处于调试模式（虽然技术上是 UB否则）并且可能通过保护字节写入。

同样，它在 malloc 代码上崩溃了，因为您使用的是`sizeof(node)`vs `sizeof(Node)`。

# android - 没有生成 R.java，因为 Eclipse 无法运行 aapt

> ID：12995484
> 
> 赞同：2
> 
> 时间：2012-10-21T06:14:24.713
> 
> 标签：android, eclipse, ubuntu

我使用 Ubuntu 11.10 和 eclipse 进行 Android 开发。我以前将android-sdk保存在我的主文件夹中，但由于空间不足，我将其复制到硬盘中。当我将sdk移到硬盘时，我没有运行adb、aapt或其他平台工具的权限。所以，我编辑了 /etc/fstab 文件并添加了以下行 现在，当我在终端中`/dev/sda3 /media/hdisk ntfs-3g defaults 0 0` 执行命令时，我得到了这个输出`ls -l | grep "sdk"`

drwxrwxrwx 1 root root 4096 2012-10-20 16:07 android-sdk-linux

所以，我现在有了权限，但是当我运行eclipse时，仍然没有生成R.java文件，但是生成了BuildConfig.java文件。我可以从终端运行 aapt，但每次更改代码时都这样做是不切实际的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:01:30.827

如果您运行的是 64 位 Linux，此命令可能会对您有所帮助：

```
sudo apt-get install ia32-libs 
```

有同样的问题，而那个人成功了。[在这里](https://stackoverflow.com/a/7057134)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:46:24.987

这是一项非常基本的检查，但您是否更改了 Eclipse 中 Android SDK 的位置？首选项 -> Android -> SDK 位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:38:19.947

这个问题似乎必须在我的电脑重新启动大约 2-3 次后自行解决。感谢大家的帮助。

# linq - 使用 LINQ 在 PIVOT 中添加每行总和

> ID：12995488
> 
> 赞同：0
> 
> 时间：2012-10-21T06:15:37.013
> 
> 标签：linq, c#-4.0

我有以下将普通数据表转换为数据透视表的函数。

但我还有 1 个要求，它还应该显示 Value 列，即所有 Pivot 列单元格的总和。

```
e.g. : ORDER | SUM | PLANDATE
         1      50    10-Oct-2012
         1      10    10-Oct-2012
         2      15    12-Oct-2012 
```

PIVOT 之后应该是这样的

```
ORDER | SUM | 10-Oct-2012 | 12-Oct-2012
  1      60     50            10
  2      15                   15 
```

我的枢轴功能是：

```
DataTable Pivot(DataTable dt, DataColumn pivotColumn, DataColumn pivotValue) {
    // find primary key columns 
    //(i.e. everything but pivot column and pivot value)
    DataTable temp = dt.Copy();
    temp.Columns.Remove( pivotColumn.ColumnName );
    temp.Columns.Remove( pivotValue.ColumnName );
    string[] pkColumnNames = temp.Columns.Cast<DataColumn>()
        .Select( c => c.ColumnName )
        .ToArray();

    // prep results table
    DataTable result = temp.DefaultView.ToTable(true, pkColumnNames).Copy();
    result.PrimaryKey = result.Columns.Cast<DataColumn>().ToArray();
    dt.AsEnumerable()
        .Select(r => r[pivotColumn.ColumnName].ToString())
        .Distinct().ToList()
        .ForEach (c => result.Columns.Add(c, pivotColumn.DataType));

    // load it
    foreach( DataRow row in dt.Rows ) {
        // find row to update
        DataRow aggRow = result.Rows.Find(
            pkColumnNames
                .Select( c => row[c] )
                .ToArray() );
        // the aggregate used here is LATEST 
        // adjust the next line if you want (SUM, MAX, etc...)
        aggRow[row[pivotColumn.ColumnName].ToString()] = row[pivotValue.ColumnName];
    }

    return result;
} 
```

谢谢&任何帮助都会得到帮助...

```
Sample Data :
 OrderStatus    Qty     Dated
    New 100 10-Oct-2012
    New 150 10-Oct-2012
    New 100 10-Oct-2012
    Conf    200 12-Oct-2012
    New 100 12-Oct-2012
    Reconf  300 12-Oct-2012
    New 200 15-Oct-2012
    New 200 15-Oct-2012
    Reconf  100 18-Oct-2012
    New 150 18-Oct-2012
    Conf    150 18-Oct-2012
    New 100 20-Oct-2012
    Reconf  500 20-Oct-2012
    New 100 30-Oct-2012
    New 700 30-Oct-2012
    New 100 30-Oct-2012
    Conf    100 10-Oct-2012 
```

**更新代码**：

```
 private DataTable DataTableToPivot(DataTable dtNormalTable, DataColumn pivotColumn, DataColumn valueColumn)
            {
                cTracing.WriteTrace("Inside DataTableToPivot", "DataTableToPivot");

                DataTable dtPivot = null;
                DataTable tempPivot = null;
                DataColumn sumColumn = new DataColumn();
                string[] pkColumnNames = null;

                try
                {
                    sumColumn.ColumnName = valueColumn.ColumnName;
                    sumColumn.DataType = typeof(string);
                    sumColumn.DefaultValue = "0";

var allrows = dt.AsEnumerable().Select(delegate(DataRow r)
            {
                DataRow nr = dt.NewRow();
                foreach (DataColumn item in dt.Columns)
                {
                    nr.SetField(item.ColumnName, r[item.ColumnName] is DBNull ? string.Empty : r[item.ColumnName]);
                }
                return nr;
            });

            dtNormalTable = allrows.CopyToDataTable();

                    // find primary key columns 
                    //(i.e. everything but pivot column and pivot value)
                    tempPivot = dtNormalTable.Copy();

                    tempPivot.Columns.Remove(pivotColumn.ColumnName);
                    tempPivot.Columns.Remove(valueColumn.ColumnName);

                    pkColumnNames = tempPivot.Columns
                                                 .Cast<DataColumn>()
                                                 .Select(c => c.ColumnName)
                                                 .ToArray();

                    // prep results table
                    dtPivot = tempPivot.DefaultView.ToTable(true, pkColumnNames).Copy();
                    dtPivot.PrimaryKey = dtPivot.Columns.Cast<DataColumn>().ToArray();
                    // include the sum column
                    dtPivot.Columns.Add(sumColumn);
                    try
                    {
                        dtNormalTable.AsEnumerable()
                          .Select(r => r[pivotColumn.ColumnName].ToString())
                          .Distinct()
                          .ToList()
                          .ForEach(c => dtPivot.Columns.Add(Convert.ToDateTime(c).ToString("dd-MMM-yyyy"), typeof(string)));
                    }
                    catch
                    {
                        dtNormalTable.AsEnumerable()
                          .Select(r => r[pivotColumn.ColumnName].ToString())
                          .Distinct()
                          .ToList()
                          .ForEach(c => dtPivot.Columns.Add(c, typeof(string)));
                    }

                    // load it
                    foreach (DataRow row in dtNormalTable.Rows)
                    {
                        // find row to update
                        DataRow aggRow = dtPivot.Rows.Find(
                            pkColumnNames
                                         .Select(c => row[c])
                                         .ToArray());
                        // the aggregate used here is LATEST 
                        // adjust the next line if you want (SUM, MAX, etc...)
                        string columnName = string.Empty;
                        try
                        {
                            columnName = Convert.ToDateTime(row[pivotColumn.ColumnName]).ToString("dd-MMM-yyyy");
                        }
                        catch
                        {
                            columnName = row[pivotColumn.ColumnName].ToString();
                        }

                        if (aggRow.IsNull(columnName))
                        {
                            aggRow[columnName] = Convert.ToDecimal(row[valueColumn.ColumnName]);
                        }
                        else
                        {
                            aggRow[columnName] = Convert.ToDecimal(aggRow[columnName]) +
                                                 Convert.ToDecimal(row[valueColumn.ColumnName]);
                        }

                        if (numberFormat == "3")
                        {
                            // add the value to the sum
                            aggRow[sumColumn] = (Convert.ToDecimal(aggRow[sumColumn].ToString()) +
                                                Convert.ToDecimal(row[valueColumn.ColumnName].ToString())).ToString("#0.000");
                        }
                        else if (numberFormat == "2")
                        {
                            // add the value to the sum
                            aggRow[sumColumn] = (Convert.ToDecimal(aggRow[sumColumn].ToString()) +
                                                Convert.ToDecimal(row[valueColumn.ColumnName].ToString())).ToString("#0.00");
                        }
                        else if (numberFormat == "1")
                        {
                            // add the value to the sum
                            aggRow[sumColumn] = (Convert.ToDecimal(aggRow[sumColumn].ToString()) +
                                                Convert.ToDecimal(row[valueColumn.ColumnName].ToString())).ToString("#0.0");
                        }
                        else
                        {
                            // add the value to the sum
                            aggRow[sumColumn] = (Convert.ToDecimal(aggRow[sumColumn].ToString()) +
                                                Convert.ToDecimal(row[valueColumn.ColumnName].ToString())).ToString("#0");
                        }
                    }

                    return dtPivot;
                }
                catch (Exception ex)
                {
                    cTracing.WriteTrace("Error inside DataTableToPivot", "DataTableToPivot");
                    cLogging.WriteLog(ex);
                    return null;
                }
                finally
                {
                    if (dtPivot != null)
                        dtPivot.Dispose();
                }
            }
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:41:50.300

如何将每一行的值添加到相应聚合行中的总和列？

```
DataTable Pivot(DataTable dt, DataColumn pivotColumn, DataColumn pivotValue) {
    DataColumn sumColumn = new DataColumn();
    sumColumn.ColumnName = "SUM";
    sumColumn.DataType = typeof(int);
    sumColumn.DefaultValue = 0;

    // find primary key columns 
    //(i.e. everything but pivot column and pivot value)
    DataTable temp = dt.Copy();
    temp.Columns.Remove( pivotColumn.ColumnName );
    temp.Columns.Remove( pivotValue.ColumnName );
    string[] pkColumnNames = temp.Columns.Cast<DataColumn>()
        .Select( c => c.ColumnName )
        .ToArray();

    // prep results table
    DataTable result = temp.DefaultView.ToTable(true, pkColumnNames).Copy();
    result.PrimaryKey = result.Columns.Cast<DataColumn>().ToArray();
    // include the sum column
    result.Columns.Add(sumColumn);
    dt.AsEnumerable()
        .Select(r => r[pivotColumn.ColumnName].ToString())
        .Distinct()
        .OrderBy(c => Convert.ToDateTime(c))   // Order by the date
        .ToList()
        .ForEach (c => result.Columns.Add(c, pivotColumn.DataType));

    // load it
    foreach( DataRow row in dt.Rows ) {
        // find row to update
        DataRow aggRow = result.Rows.Find(
            pkColumnNames
                .Select( c => row[c] )
                .ToArray() );
        // the aggregate used here is LATEST 
        // adjust the next line if you want (SUM, MAX, etc...)
        string columnName = row[pivotColumn.ColumnName].ToString();
        if(aggRow.IsNull(columnName))
        {
            aggRow[columnName] = (int)row[pivotValue.ColumnName];          
        }
        else
        {
            aggRow[columnName] = Convert.ToInt32(aggRow[columnName]) +
                                 (int)row[pivotValue.ColumnName];
        }   
        // add the value to the sum
        aggRow[sumColumn] = (int)aggRow[sumColumn] + 
                            (int)row[pivotValue.ColumnName];
    }

    return result;
} 
```

# ruby-on-rails - rake 资产：预编译不适用于生产

> ID：12995489
> 
> 赞同：0
> 
> 时间：2012-10-21T06:15:38.293
> 
> 标签：ruby-on-rails, deployment, rake

突然间我的服务器无法运行资产预编译

```
RAILS_ENV=production rake assets:precompile 
```

使用跟踪运行命令时出现的错误是

```
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in    `block in create_shell_runner'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/var/www/website/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/var/www/website/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/var/www/website/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/var/www/website/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p286@global/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p286@global/bin/rake:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => assets:precompile 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T06:04:07.383

尝试这个

```
touch tmp/restart.txt 
```

# ruby-on-rails - Rails - 创建新类别（找不到具有 ID 的类别）

> ID：12995490
> 
> 赞同：4
> 
> 时间：2012-10-21T06:15:56.250
> 
> 标签：ruby-on-rails, ruby

我有一个我知道的应用程序

```
def new 
    respond_to do |format|
      format.html { new_or_edit }
      format.js { 
        @category = Category.new
      }
    end  
end 
```

当我点击一个链接时被调用。

这导致 new_or_edit 被调用（在同一个文件中定义）。

```
 def new_or_edit
    @categories = Category.find(:all)
    @category = Category.find(params[:id])
    @category.attributes = params[:category]
    if request.post?
      respond_to do |format|
        format.html { save_category }
        format.js do 
          @category.save
          @article = Article.new
          @article.categories << @category
          return render(:partial => 'admin/content/categories')
        end
      end
      return
    end
    render 'new'
  end 
```

经过一些测试，我发现每次执行都停止在

```
@category = Category.find(params[:id]) 
```

出现错误“找不到没有 ID 的类别”。当我打印出来时，Params 没有 :id 哈希。这是因为我必须在创建默认 :id 字段之前将其保存到数据库中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T06:30:46.470

您做错的事情是试图统一两个本质上不同的操作：新建和编辑。

params 是您从客户端获得的参数的哈希值。

当您创建一个新对象时，`params[:id]`将其留空，因为新创建的对象的 id 属性是服务器的职责，而不是客户端的职责。

当您编辑现有对象时，`params[:id]`它不为空，因为该对象已存在于数据库中并具有一个 id。这里的意思`params[:id]`是“请使用这些属性编辑带有 id param[:id] 的对象”。

在解释了这一点之后，当你创建一个**新**对象时，这一行：

```
@category = Category.find(params[:id]) 
```

失败，因为`params[:id]`是空的。

# php - 修改 Nginx 正则表达式，使其仅在某些情况下应用

> ID：12995497
> 
> 赞同：3
> 
> 时间：2012-10-21T06:18:31.800
> 
> 标签：php, regex, node.js, nginx

我正在创建一个混合 PHP/Node.js 应用程序。对于 PHP，我使用的是 Yii 框架。在 Node.js 中，我使用 express。

PHP 通过 Nginx 运行。我使用 proxy_pass 指令将任何以 /node 开头的请求集中到运行在端口 3000 上的节点服务器（例如 server.com/node/api 被代理到 server.com:3000/api。）

在大多数情况下，这很好用。但是，我的 Nginx 配置文件中的指令之一确保对不存在的静态文件的请求不会传递给 Yii。相反，会返回一个简单的 404 错误。该指令的原始版本如下所示：

```
location ~ \.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar|txt)$ {
    try_files $uri =404;
    #For production servers you can set expires header with a long period
    expires 3M;
} 
```

该指令的问题在于 Node.js 提供了一些静态文件（尤其是 socket.io 客户端）。当浏览器请求 server.com/node/socket.io/socket.io.js 时，上述规则被触发，Nginx 返回 404。

我想要做的是修改规则，以便仅当对静态文件的请求不以 /node/ 开头时才返回 404。我尝试了各种规则组合，但似乎没有一个有效。在查阅了 perl 正则表达式文档之后，我认为这是一个可能有效的文档，但没有：

```
location ~* (?<!/node/)\.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar|txt)$ {
    try_files $uri =404;
    expires 3M;
} 
```

我认为规则的否定/后视部分`(?<!/node/)`可以排除以 /node/ 开头的请求，但事实并非如此。相反，对于真正不存在的 js 文件和 socket.io.js（以及从 Node.js 提供的各种其他静态文件）都会触发该规则。所以在这两种情况下我都会得到 404。

我应该如何更改正则表达式，以便仅在请求不以 /node/ 开头时应用规则？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T09:31:35.847

如果我没看错你的问题，你说的是*不以 . 开头的* `/node/`路径。这比匹配*前面没有的*东西要简单得多。这应该这样做：

```
location ~* ^(?!/node/).*\.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar|txt)$ { 
```

我认为@Pogo 几乎拥有它，但据我所知，它`location`不包括服务器名称。正则表达式开始锚点，`^`匹配紧接在`.com`（在这种情况下）和第一个斜杠之前的位置。因此，`^(?!/node/)`确保您的路径不以`/node/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:56:55.323

问题是，负面的lookbehind 看起来**直接**在点的前面。不幸的是，据我所知，只有 .NET 支持可变长度的lookbehinds。解决方法是反转字符串，反转正则表达式并在末尾使用负前瞻（可以是可变长度）：

```
(?!.*/node/) 
```

不幸的是，我现在无法写出完整的正则表达式，因为我正在手机上打字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T06:57:55.357

我认为问题可能是因为 javascipt 不完全支持向后看。可以先看开头看看是不是/node/，然后继续。

所以，

```
.*com(?!/node/).*\.(js|css|png|jpg|gif|swf|ico|pdf|mov|fla|zip|rar|txt)$ 
```

可能会帮助你。

# html - HTML 下拉菜单导航不显示

> ID：12995499
> 
> 赞同：0
> 
> 时间：2012-10-21T06:18:35.380
> 
> 标签：html, css, user-interface, drop-down-menu

我正在尝试学习 HTML/CSS，在课程中我想创建一个基于 CSS 的下拉菜单导航栏。我阅读了几乎所有我能找到的教程并最终构建了它，但问题是它没有按预期工作，我让主菜单正常工作，但是列表没有显示。这是我的 HTML 的结构：

```
 <div id="Header"/>
 <div id="Navigation" > 
<ul id="Menu-H">

        <li id="HOME"><a href="#">HOME</a></li>

        <li id="ITEMS"><a href="#">ITEMS</a></li>
    <ul >
        <li><a href="#">New Item</a></li>
        <li><a href="#">Search Item</a></li>
    </ul>

        <li id="Category"><a href="#">CATALOG</a></li>

        <li id="Inventory"><a href="#">INVENTORY</a></li>

    </ul>
<a class="LogOutButton" href="#">LOG OUT</a> 
```

这是我构建的 CSS：

```
#Menu-H {    
    padding: 0;
    margin: 0;
    list-style-type: none; 
    margin-left: 50px;      
}

#Menu-H  li {    
    float:left;
}

#Menu-H li:hover {    
    background: #f4f4f4;
    border-radius: 5px 5px 0px 0px;
}

#Menu-H  li  a {

    //border-left: 2px solid blue;
    //border-right: 2px solid blue;
    //background-color: white;
    display:block;
    padding: 5px 15px 5px 15px;
    text-decoration: none;
    text-shadow: 1px 1px 1px #FFFFFF
}

#Menu-H li:hover a {    
    color: #161616;
    text-shadow: 1px 1px 1px#FFFFFF;
}

/* Drop Down Menu.........*/

#Menu-H ul {    
    background: #161616;
    background:rgba(255,255,255,0);
    list-style: none;
    display: none;
}

Menu-H ul li {    
    padding-top: 1px;;
    float: none;    
}

Menu-H li:hover ul {    
    display:block;
}

#Menu-H li:hover a {    
    background: #6b0c36;        
}

#Menu-H li:hover ul li a:hover {    
    background: #333;
} 
```

我找不到原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:02:00.213

您的 HTML 不正确，您需要将辅助元素`<ul>`放在父元素中`<li>`

```
<ul id="Menu-H">

        <li id="HOME"><a href="#">HOME</a></li>
        <li id="ITEMS"><a href="#">ITEMS</a>
           <ul>
              <li><a href="#">New Item</a></li>
              <li><a href="#">Search Item</a></li>
          </ul>
        </li>   

        <li id="Category"><a href="#">CATALOG</a></li>
        <li id="Inventory"><a href="#">INVENTORY</a></li>

</ul> 
```

此外，您忘记`#`在 CSS 中为两个 id-s 添加。这是我做的一个小提琴，你可以看到我做了一些我正在谈论的改变并且它有效：

[http://jsfiddle.net/SJQ9B/](http://jsfiddle.net/SJQ9B/)

# javascript - 如何使下拉菜单中的文本出现在html部分？

> ID：12995500
> 
> 赞同：0
> 
> 时间：2012-10-21T06:18:35.893
> 
> 标签：javascript, drop-down-menu

所以我有一个下拉菜单，在每个菜单列表中都有一个文本..如何让这些文本打印在我的 html 页面的预览部分？

无标题文档

```
<body>
    <h1>Word</h1>

    <div id="controls">
        <fieldset id="text">
            <legend>Preview text</legend>
            <ul>
                <li>
                    <label><input type="radio" name="cc" value="Pre" id="pre" checked="checked" /> Pre: </label>
                    <select name ="dropdown">
                        <option selected="selected">Hello World.</option>
                        <option>How is your days going?.</option>
                        <option>I <3 You.</option>
                    </select>
                </li>

            </ul>
        </fieldset>
    <div id="preview">
        <fieldset>
            <legend>Preview</legend>
            <p></p>
        </fieldset>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:24:58.570

您可以使用此代码。只需复制并粘贴它

```
<script type="text/javascript">
function fnc()
{
var text=document.getElementById("dropdown").value;
document.getElementById("preview").innerHTML=text;
}
</script>
<body>
<h1>Word</h1>

<div id="controls">
    <fieldset id="text">
        <legend>Preview text</legend>
        <ul>
            <li>
                <label><input type="radio" name="cc" value="Pre" id="pre" checked="checked" /> Pre: </label>
                <select name ="dropdown" onchange="fnc()" id="dropdown">
                    <option selected="selected">Hello World.</option>
                    <option>How is your days going?.</option>
                    <option>I <3 You.</option>
                </select>
            </li>

        </ul>
    </fieldset>
    <div id="preview">
    <fieldset>
        <legend>Preview</legend>
        <p></p>
    </fieldset>
    </div>
</body> 
```

# hibernate - Hibernate 4：部分多对一关联 + where/filter 鉴别器

> ID：12995504
> 
> 赞同：0
> 
> 时间：2012-10-21T06:19:39.777
> 
> 标签：hibernate, many-to-one, discriminator

我正在使用 Hibernate 4。我有这个带有 Category 和 CategoryItem 表的数据库：

```
CREATE  TABLE `test`.`Category` (
  `Id` INT NOT NULL AUTO_INCREMENT ,
  `Description` VARCHAR(50) NOT NULL ,
  PRIMARY KEY (`Id`) )

CREATE  TABLE `test`.`CategoryItem` (
  `IdCategory` INT NOT NULL ,
  `Id` VARCHAR(10) NOT NULL ,
  `Description` VARCHAR(100) NOT NULL ,
  PRIMARY KEY (`Id`, `IdCategory`) ,
  CONSTRAINT `fk_table1_Category1`
    FOREIGN KEY (`IdCategory` )
    REFERENCES `test`.`Category` (`Id` )) 
```

这用于存储不同的类别或目录及其值。例如：

类别表：

```
1, 'Genders'
2, 'Marital status'
3, 'Countries' 
```

类别项目表：

```
1, 'FEM', 'Female'
1, 'MAL', 'Male'
2, 'SIN', 'Single'
2, 'MAR', 'Married'
3, 'US', 'United States'
3, 'UK', 'England' 
```

这些值在整个架构中使用，但仅对 CategoryItem(Id) 进行逻辑引用，例如：

```
CREATE  TABLE `test`.`Person` (
  `Id` INT NOT NULL ,
  `Name` VARCHAR(30) NULL ,
  --this fields are referencing CategoryItem(Id)
  `IdGender` VARCHAR(10) NOT NULL ,
  `IdMaritalStatus` VARCHAR(10) NOT NULL ,
  `IdCountryOrigen` VARCHAR(10) NOT NULL ,
  PRIMARY KEY (`Id`) ) 
```

是否可以在 Hibernate 中使用某种技术映射这些表？我现在无法更改此架构。

**编辑：**

到目前为止，这些是类和映射：

```
public class Category implements Serializable {

    private int id;
    private String description;

    private Set<CategoryItem> items = new HashSet<CategoryItem>();

    public Category() {
    }

    //getters and setters omitted
}

public class CategoryItem implements Serializable {

    private CategoryItemId id;
    private Category category;
    private String description;

    public CategoryItem() {
    }
    //getters and setters omitted
}

public class CategoryItemId implements Serializable {

    private Category category;
    private String id;

    public CategoryItemId() {
    }
    //getters and setters omitted
}

public class Person implements Serializable {

    private int id;
    private String name;
    private CategoryItem gender;
    private CategoryItem maritalStatus;
    private CategoryItem countryOrigen;

    public PersonaNatural() {
    }
    //getters and setters omitted
}

  <class catalog="test" name="test.Category" table="Category">
    <id name="id" type="int">
      <column name="Id"/>
      <generator class="increment"/>
    </id>
    <property name="description" type="string">
      <column length="50" name="Description" not-null="true"/>
    </property>
    <set inverse="true" name="items">
      <key>
        <column name="IdCategory" not-null="true"/>
      </key>
      <one-to-many class="test.CategoryItem"/>
    </set>    
  </class>

  <class catalog="test" name="test.CategoryItem" table="CategoryItem">
    <composite-id class="test.CategoryItemId" name="id">
        <key-many-to-one name="category" class="test.Category">
            <column name="IdCategory" not-null="true"/>
        </key-many-to-one>
      <key-property name="id" type="string">
        <column name="Id"/>
      </key-property>
    </composite-id>
    <many-to-one name="category" class="test.Category" fetch="select" insert="false" update="false">
      <column name="IdCategory" not-null="true"/>
    </many-to-one>
    <property name="description" type="string">
      <column name="Description" length="100" not-null="true"/>
    </property>
  </class>

<class catalog="test" name="test.Person" table="Person">
    <id name="id" type="int">
      <column name="Id"/>
      <generator class="increment"/>
    </id>
    <property name="name" type="string">
      <column length="30" name="Name" not-null="false"/>
    </property>
    <many-to-one name="gender" class="test.CategoryItem" fetch="select">
        <column name="IdGender" not-null="true"/>
    </many-to-one>
    <many-to-one name="maritalStatus" class="test.CategoryItem" fetch="select">
        <column name="IdMaritalStatus" not-null="true"/>
    </many-to-one>
    <many-to-one name="countryOrigen" class="test.CategoryItem" fetch="select">
        <column name="IdCountryOrigen" not-null="true"/>
    </many-to-one>
  </class> 
```

我正在尝试多对一，但出现此错误：**'must have the same number of columns as the referenced primary key'**。这是有道理的，因为我假装只在 Person.hbm.xml 上映射 CategoryId(Id)。

我需要指定*where*或*discriminator*值来完成左连接条件，因为 CategoryItem(Id) 本身并不是唯一的。

也许这对于 Hibernate 来说甚至是不可能的，但我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:03:10.147

这就是我解决 Person 映射的方法：

```
<class catalog="test" name="test.Person" table="Person">
    <id name="id" type="int">
      <column name="Id"/>
      <generator class="increment"/>
    </id>
    <property name="name" type="string">
      <column length="30" name="Name" not-null="false"/>
    </property>
    <many-to-one name="gender" class="test.CategoryItem" fetch="select">
        <formula>1</formula>
        <column name="IdGender" not-null="true"/>
    </many-to-one>
    <many-to-one name="maritalStatus" class="test.CategoryItem" fetch="select">
        <formula>2</formula>
        <column name="IdMaritalStatus" not-null="true"/>
    </many-to-one>
    <many-to-one name="countryOrigen" class="test.CategoryItem" fetch="select">
        <formula>3</formula>
        <column name="IdCountryOrigen" not-null="true"/>
    </many-to-one>
  </class> 
```

添加`<formula>(IdCategory)</formula>`instead of`<column>`元素会导致hibernate 匹配CategoryItem 的复合ID 并正确解析左连接。

谢谢。

# android - intent.putExtra(...) 中的语法错误

> ID：12995505
> 
> 赞同：2
> 
> 时间：2012-10-21T06:19:49.223
> 
> 标签：android, eclipse-juno

![在此处输入图像描述](../Images/72f0daddb69a403a0dd2f2a1281cf3e8.png)我正在关注[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)上的开发指南。我写了以下代码：

```
Intent intent = new Intent(this, DisplayMessageActivity.class);
EditText editText = (EditText) findViewById(R.id.edit_message);
String message = editText.getText().toString();
intent.putExtra(EXTRA_MESSAGE, message); 
```

在最后一行，我在`=intent.putExtra(EXTRA_MESSAGE, message)`. 代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:53:14.253

对于意图，建议（[如果不需要](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29)）使用完全限定名称（以包为前缀）。简单的字符串键更常与 Bundle 相关联。

```
// Intent
intent.putExtra("com.my.example.EXTRA_IDENTIFIER", myValue);

// Bundle
bundle.putExtra("FavFruit", mApple); 
```

哦，还有……

**如果没有来自 LogCat 的错误堆栈跟踪，就不可能诊断出您的问题。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:36:26.577

你可以这样使用：-

```
intent.putExtra=("Extra_Message",message); 
```

＆访问消息的值在另一个活动中： -

```
String message=getIntent().getExtra().getString("Extra_Message"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-16T03:46:52.297

您正在尝试在类主体中创建一个意图。这不可能。

您必须创建意图并在方法中启动活动。

首先，`EXTRA_MESSAGE`如果未定义，则在顶部定义：

```
public final static String EXTRA_MESSAGE = "com.mycompany.myfirstapp.MESSAGE"; 
```

然后像这样编辑您的 sendMessage 方法

```
public void sendMessage(View view) {
  Intent intent = new Intent(this, DisplayMessageActivity.class);
  EditText editText = (EditText) findViewById(R.id.edit_message);
  String message = editText.getText().toString();
  intent.putExtra(EXTRA_MESSAGE, message);
} 
```

并在关闭括号后删除代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-16T03:38:27.360

您错过了定义 EXTRA_MESSAGE 值的步骤。

将文本分配给本地消息变量，并使用 putExtra() 方法将其文本值添加到意图。

**java/com.mycompany.myfirstapp/MyActivity.java**

```
public void sendMessage(View view) {
  Intent intent = new Intent(this, DisplayMessageActivity.class);
  EditText editText = (EditText) findViewById(R.id.edit_message);
  String message = editText.getText().toString();
  intent.putExtra(EXTRA_MESSAGE, message);
} 
```

Intent 可以将数据类型作为键值对携带，称为 extras。putExtra() 方法采用第一个参数中的键名和第二个参数中的值。

# jquery - 在左值为零的 Div 之前添加一个 Div

> ID：12995508
> 
> 赞同：0
> 
> 时间：2012-10-21T06:20:12.007
> 
> 标签：jquery, html, css

我试图在一个 Div 之前添加一个 Div 值为零。
但结果是前置的 Div 替换了旧 Div 的位置
ie] 前置的 Div 现在有左值 '0'

这是我用于前置的代码，

```
 $("#xx").prepend("<div> Hello </div>"); 
```

**编辑**

![在此处输入图像描述](../Images/c67d827daaba5b527682446a08f775d5.png)

是否有可能在具有负左值的 div 之前添加一个 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:23:03.520

```
 $("#xx").prepend("<div class='prediv'> Hello </div>"); 
```

像那样？

```
.prediv{
   position: absolute;
   left:  -100px; 
 } 
```

我不认为这正是它的样子，但你明白了，只需将类放在前面的字符串中，并将必要的规则应用于你希望 div 去的地方，默认情况下它不会出去具有负左值的父级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:46:09.193

您可以执行以下操作

```
var mydiv  = $('<div>');//now you can do everything like :
mydiv.css('left','-100px')/*.attr('sth','sth')*/;//prepare it as you like
$("#xx").prepend(mydiv); // now prepend will add it 
```

# jquery - tinyscrollbar() 在 fancybox 中不起作用

> ID：12995511
> 
> 赞同：0
> 
> 时间：2012-10-21T06:20:53.950
> 
> 标签：jquery, fancybox, fancybox-2, tinyscrollbar

我正在使用 tinyscrllbar() 插件，它在花哨的盒子中运行良好。当我将 div 放入fancybox 时，只显示轨道图像，而滚动条的其余部分不显示，显然它根本不起作用。有什么解决方案可以让 tinyscrollbar() 在 fancybox 中工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:37:24.917

尝试`tinyscrollbar()`使用fancybox的初始化。`afterShow`打回来。

为什么？因为当您`tinyscrollbar`在页面加载时进行初始化时，DOM 中不存在fancybox（`tinyscrollbar`仅对文档中的现有元素进行初始化）。

将 fancybox 添加到 DOM 后，`tinyscrollbar`需要重新初始化才能在 fancybox 中工作。

# iphone - ios绘画应用程序覆盖绘画笔触

> ID：12995513
> 
> 赞同：0
> 
> 时间：2012-10-21T06:22:00.987
> 
> 标签：iphone, ios, ipad, drawrect

我正在创建一个绘画应用程序，但是如果描边一条线一种颜色，如果描边另一条线穿过前一个描边，则第一个描边将颜色更改为第二种颜色![在此处输入图像描述](../Images/3139085ce0d0b21e9ca32c96807d2cca.png)

这是我用来绘画的代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];

    previousPoint1 = [touch previousLocationInView:self];
    previousPoint2 = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

    [self touchesMoved:touches withEvent:event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];

    CGPoint point = [touch locationInView:self];

    /* check if the point is farther than min dist from previous */
    CGFloat dx = point.x - currentPoint.x;
    CGFloat dy = point.y - currentPoint.y;

    if ((dx * dx + dy * dy) < kPointMinDistanceSquared) {
        return;
    }

    previousPoint2 = previousPoint1;
    previousPoint1 = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

    CGPoint mid1 = midPoint(previousPoint1, previousPoint2);
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);
    CGMutablePathRef subpath = CGPathCreateMutable();
    CGPathMoveToPoint(subpath, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(subpath, NULL, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGRect bounds = CGPathGetBoundingBox(subpath);

    CGPathAddPath(path, NULL, subpath);
    CGPathRelease(subpath);

    CGRect drawBox = bounds;
    drawBox.origin.x -= self.lineWidth * 2.0;
    drawBox.origin.y -= self.lineWidth * 2.0;
    drawBox.size.width += self.lineWidth * 4.0;
    drawBox.size.height += self.lineWidth * 4.0;

    [self setNeedsDisplayInRect:drawBox];
}

- (void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextAddPath(context, path);
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

    CGContextStrokePath(context);

    self.empty = NO;
} 
```

你们中的任何人都知道我做错了什么，或者我怎样才能让每个笔画彼此独立？

我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:18:25.680

我认为您需要做的是在更改颜色时开始新的路径。不要只是不断地将具有新颜色的新子路径添加到具有旧颜色的同一路径中。

您将需要为每个路径存储它应该呈现的颜色，然后在 drawRect 方法中循环遍历您的路径。

# objective-c - 在 Objective-C 中以编程方式控制 Mac 光标

> ID：12995522
> 
> 赞同：4
> 
> 时间：2012-10-21T06:23:22.127
> 
> 标签：objective-c, macos

App Store 上有很多应用程序可以让你控制 Mac 的光标——你在 iPhone 上安装应用程序，在 Mac 上安装一些客户端软件，然后当你在手机上移动手指时，它就会控制你的 Mac通过蓝牙。

我的问题是，这是怎么做到的？不是在 iOS 端，而是在 Mac 端。如何以编程方式更改 Mac 上光标的位置？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T06:36:23.623

正如@H2C03 所述，您可以通过 执行此操作`CGWarpMouseCursorPosition()`，但是您只能每 250 毫秒（0.25 秒）扭曲鼠标位置。为了解决这个问题，你必须添加一些额外的代码来不断地扭曲鼠标。

```
NSPoint mouseWarpLocation = NSMakePoint(100, 100);

CGEventSourceRef evsrc = CGEventSourceCreate(kCGEventSourceStateCombinedSessionState);
CGEventSourceSetLocalEventsSuppressionInterval(evsrc, 0.0);
CGAssociateMouseAndMouseCursorPosition (0);
CGWarpMouseCursorPosition(mouseWarpLocation);
CGAssociateMouseAndMouseCursorPosition (1);
CFRelease(evsrc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:30:10.800

CoreGraphics 可以做到 - 具体来说，您正在寻找该`CGWarpMouseCursorPosition()`功能。Quartz (CoreGraphics)在此处[显示服务文档](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html)。

示例：将光标移动到屏幕中央：

```
CGDirectDisplayID displayID = CGMainDisplayID();
size_t screenWidth = CGDisplayPixelsWide(displayID);
size_t screenHeight = CGDisplayPixelsHigh(displayID);
CGPoint centerOfScreen = CGPointMake(screenWidth / 2, screenHeight / 2);
CGWarpMouseCursorPosition(centerOfScreen); 
```

# javascript - 在电子表格转换为 HTML 的页面中显示/隐藏列

> ID：12995523
> 
> 赞同：0
> 
> 时间：2012-10-21T06:23:42.193
> 
> 标签：javascript, html, hide, show

我知道关于这个主题已经有一些答案，但我想再问一次，以便您提出最佳选择。

我创作了一本书，可以同时教授（到目前为止 4 种语言）。我将在墨西哥旅行时出售这本书的各种版本。但它也可以在线免费获得。您可以通过访问 [http://jersllvs.majormigraine.com直接访问相关版本](http://jersllvs.majormigraine.com)

我使用 OpenOffice 套件中的电子表格程序（与 excel 相同）创建了这本书。现在 4 种语言有 4 列，当我开始研究语言 #5 时，我意识到如果我可以隐藏/显示页面上的列，我可以为自己节省很多工作。我想要做的是使用电子表格程序`index.html`为这本书创建所有语言的，然后将所需的代码添加到 html 文件中，以便用户可以选中/取消选中语言。屏幕顶部会有一个语言列表（英语、西班牙语等），每种语言将由 3 列组成，这些列将延伸整个页面的长度。

我对基本 HTML 的了解有限，但与计算机打交道有很长的历史，并且可以学习任何需要的东西。然而，由于整个项目是完全免费的（我仍然必须出去卖书谋生），我想找到最简单、最快的方法来实现这一点。

非常感谢您的回答，杰瑞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:03:21.857

我个人会使用 Jquery。但是，如果您不太熟悉它，这可能会非常复杂。如果您单击我在下面提供的链接，则会有一个简短的演示，说明我认为您正在寻找什么。但是，由于您的网页太大，我认为这对您来说可能非常复杂，因为还涉及到很多样式。看看我制作的链接，看看那是不是你想要的。如果是，那么您可以慢慢开始研究如何将其实施到您的网站中。要使 Jquery 在您的网页上运行，您需要将以下代码添加到`<head>`HTML 页面的标记中。

```
<script type="text/JavaScript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

然后您可以从我的链接中使用的 Jquery 代码将需要在`<script>`看起来像的标签内

```
<script type="text/javascript">YOUR CODE HERE</script> 
```

我希望这就是你要找的。这是我为您制作的页面的链接：http:
[//jsfiddle.net/3xR2p/1/](http://jsfiddle.net/3xR2p/1/)

# objective-c - 将字符类型转换为 NSInteger

> ID：12995524
> 
> 赞同：0
> 
> 时间：2012-10-21T06:23:49.017
> 
> 标签：objective-c

我在这个主题上搜索了一下，但我真的找不到任何有用的东西。这是我感到困惑的代码：

```
const char *beginning = "Love";
NSLog(@"%s", beginning); //Love
NSLog(@"%d", (NSInteger)beginning); //14687 
```

是什么`(NSInteger)beginning`意思？为什么输出14687？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T06:27:39.730

您不是将字符转换为 NSInteger，而是将指向字符数组的指针转换为 NSInteger。该值是指向该字符数组的指针的值。

有关 C 中指针和数组的教程，请参阅此链接

[http://pw1.netcom.com/~tjensen/ptr/pointers.htm](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)

# android - 如何以弹出窗口的形式在收件箱中显示短信？

> ID：12995527
> 
> 赞同：1
> 
> 时间：2012-10-21T06:24:04.747
> 
> 标签：android, sms

我已经看到我的手机和其他手机中的短信被显示为`popup`一种东西。`I know how to show the sms from inbox in the form of ListView`.我搜索了很多，但没有办法在android中显示类似短信之`PopUp`类的东西。有人可以在这方面帮助我吗？提前致谢。

![在此处输入图像描述](../Images/93f5b8e6a43def92cfa4664b506c76f7.png).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:45:57.527

一般来说，您需要做的是：

1.  在清单中使用 SMS 接收意图过滤器注册 BroadcastReceiver（不要忘记权限）

    ```
    <receiver android:name="com.tam.receivers.YourReceiver" >
        <intent-filter >
            <action android:name="android.intent.action.SMS_RECEIVED" />
        </intent-filter>
    </receiver>

    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" > 
    ```

2.  在 BroadcastReceiver 的 onReceive 中启动后台服务

    公共类 YourReceiver 扩展 BroadcastReceiver { @Override public void onReceive(Context context, Intent intent) {

    ```
     Intent startServiceIntent = new Intent(context, YourService.class);
            context.startService(startServiceIntent);
    } 
    ```

    }

3.  从服务中打开一个对话框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:54:58.233

下面的链接可以帮助您在弹出窗口中显示短信

[http://mobile.dzone.com/articles/android-custom-sms-popup-part](http://mobile.dzone.com/articles/android-custom-sms-popup-part)

# url - Magento - 如何隐藏每个页面的 URL 键？

> ID：12995528
> 
> 赞同：0
> 
> 时间：2012-10-21T06:24:21.837
> 
> 标签：url, magento, key

有没有办法隐藏 Magento 中每个页面的 URL 键？例如站点 URL www.test.com/Logitech-bluetooth-keyboard。我可以禁用或隐藏 URL 键，以便每个页面都是 www.test.com 吗？

我正在使用 Magento 社区 1.7.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:03:15.933

简短的回答是：不。我很好奇你为什么要做这样的事情，从用户的角度来看，这将是糟糕的可用性，并且非常糟糕的 SEO，因为你只能用谷歌搜索你的主页。

您可以做的是重写整个事情，以便所有链接都将加载 Ajax 请求。这将需要一些认真的时间和精力，我认为这不值得，因为我看不到它的好处。

# ibm-midrange - 是否可以将显示文件记录格式粘贴到另一个中间？

> ID：12995534
> 
> 赞同：0
> 
> 时间：2012-10-21T06:24:59.410
> 
> 标签：ibm-midrange

我正在处理一个显示文件。这个显示文件是在屏幕顶部显示一个页眉，在底部显示一个页脚，在中间显示一个子文件。目前我将它分为四种记录格式，一种用于页眉，一种用于页脚，两种用于子文件。由于某些原因，我想将页眉和页脚制作成记录格式。所以在 RPG 中它会首先写入页眉和页脚，然后在中间写入子文件。我曾尝试运行 RPG，但将子文件控制记录写入屏幕时出现错误。有没有办法克服这个错误？还是不可能这样做？

某些消息需要使用 ERRMSGID 关键字显示，这些关键字由单独的指标限定。有一条消息与标题中的字段相关联，而另一条消息与页脚中的字段相关联。假设两个条件都满足，那么如果要分别写入页眉记录格式和页脚记录格式，则在其间按回车将显示一条消息。这种效果在这里不是很理想。我希望一次显示其中一个，并且它们的触发条件不能更改。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:51:36.110

[OVERLAY](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzakc%2Frzakcmstoverla.htm)关键字是将一种记录格式放在屏幕上而将其他信息留在屏幕上的主要方法。如果您愿意，您应该能够使用它来组合顶部和底部格式，并由中间子文件中的格式覆盖。

就子文件显示而言，标准做法是为您首先编写的页脚设置单独的格式。当然，您不仅限于标准做法。

我也会学习其他[DDS 显示关键字](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzakc%2Frzakcmstkeyent.htm)。那里有很多有用的技术。

# scala - scala中的弃用警告

> ID：12995535
> 
> 赞同：3
> 
> 时间：2012-10-21T06:25:04.480
> 
> 标签：scala

我定义了一个名为`ti`但编译后它显示弃用警告的函数。我在 Eclipse 中做了同样的事情。该代码工作正常，但显示警告。

```
scala>  def ti(chars:List[Char],a:List[(Char,Integer)]):List[(Char,Integer)] = {
     |    if(chars.length!=0) {
     |      var j = 1
     |      var c = chars.head
     |      for(i<-chars.tail) {
     |        if(c==i) j=j+1
     |      }
     |      a::List((c,j))
     |      ti(chars.tail,a)
     |   }
     |   else a
     | } 
```

> 警告：有 3 个弃用警告；使用 -deprecation 重新运行以获取详细信息 ti: (chars: List[Char], a: List[(Char, Integer)])List[(Char, Integer)]

这是什么原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T06:30:20.353

如果它告诉您使用 -deprecation 重新运行，您应该这样做：

```
k@k:~$ scala -deprecation
Welcome to Scala version 2.9.1 (OpenJDK 64-Bit Server VM, Java 1.6.0_24).
Type in expressions to have them evaluated.
Type :help for more information.

scala> def ti(chars:List[Char],a:List[(Char,Integer)]):List[(Char,Integer)]=
     |         { if(chars.length!=0)
     |            {
     |            var j=1
     |            var c=chars.head
     |            for(i<-chars.tail)
     |            {
     |            if(c==i) j=j+1
     |            }
     |            a::List((c,j))
     |            ti(chars.tail,a)
     |            }
     |         else a
     |         } 
```

然后你得到你的警告：

```
<console>:7: warning: type Integer is deprecated: use java.lang.Integer instead
       def ti(chars:List[Char],a:List[(Char,Integer)]):List[(Char,Integer)]=
                                 ^
<console>:7: warning: type Integer is deprecated: use java.lang.Integer instead
       def ti(chars:List[Char],a:List[(Char,Integer)]):List[(Char,Integer)]=
                                                       ^
<console>:16: warning: type Integer is deprecated: use java.lang.Integer instead
                  a::List((c,j))
                   ^ 
```

这里的问题是您应该使用`java.lang.Integer`或者仅`Int`在您不需要与 Java 的互操作性时使用。因此，您要么`import java.lang.Integer`更改`Integer`为`Int`.

# regex - 如何组合这些正则表达式？

> ID：12995540
> 
> 赞同：13
> 
> 时间：2012-10-21T06:26:04.863
> 
> 标签：regex, perl

四个非常相同的正则表达式。我用以下标量值替换字符串。这怎么能更有效率？

```
$line =~ s/\[(receiver)\]/$receiver/g;
$line =~ s/\[(place)\]/$place/g;
$line =~ s/\[(position)\]/$position/g;
$line =~ s/\[(company)\]/$company/g; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-21T06:34:35.300

考虑只使用真正的模板系统。 [例如，模板工具包](http://search.cpan.org/perldoc/Template%3a%3aToolkit)非常简单。

撇开这一点不谈，你说你希望它更有效率。它目前的低效率是一个问题吗？如果没有，请不要理会它。

您可以一次性完成所有操作：

```
my %subst = (
    'receiver' => $receiver,
    'place'    => $place, 
    'position' => $position,
    'company'  => $company,
);
$line =~ s/\[(receiver|place|position|company)\]/$subst{$1}/g; 
```

但是，例如，如果`$receiver`是“地方”，这将采取不同的行动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T09:44:07.627

好的，让我们看看，你想要什么：

如果你想“评估”变量的值，你在字符串中找到的那个名字，那么，你需要：

```
my $receiver = 'rcv';
my $place = 'plc';
my $position = 'pstn';
my $company = 'cmpn';
my $allVariableNames = join('|',qw(receiver place position company));
$line = '[receiver]';
$line =~ s/\[($allVariableNames)\]/'$'.$1/eg;
#$line =~ s/\[($allVariableNames)\]/eval('$'.$1)/eg; <- smarter and shorter variant
print $line,"\n"; #contain $receiver
print eval($line), "\n";   # evaluate ($receiver) => get rcv 
```

这是完成此任务的另一种方法，请参阅上面的**ysth**答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T07:21:06.830

对于组合正则表达式，你真的想看看[Regexp::Assemble](https://metacpan.org/module/Regexp%3a%3aAssemble)。

**更新**：也许一个更完整的例子是为了：

```
my %subst = (
    'receiver' => 'rcv',
    'place'    => 'plc',
    'position' => 'pos',
    'company'  => 'cpy',
);

my $re = Regexp::Assemble->new->add(keys %subst);

my $str = "this is the receiver: [receiver] and this is the place: [place]";

$str =~ s/(?:\[($re)\])/$subst{$1}/g; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T02:13:27.913

我得到这个：

```
/\[(receiver|place|position|company)\]/${"$+"}/ge; 
```

$receiver $place $position $company 应该是全局变量（我们的）

# iphone - iPhone核心数据可以缓存NSManagedObjects吗？

> ID：12995547
> 
> 赞同：0
> 
> 时间：2012-10-21T06:27:11.607
> 
> 标签：iphone, objective-c, caching, core-data, nsmanagedobject

我在我的一个应用程序中运行一个数据模型，其中一个事件定义了一个“eventType”关系。这允许我通过更改它们的“eventType”关系对象来修改多个事件的外观。

我遇到的问题是，在插入事件之前，我使用下面的代码检查该对象的 typeRelationship 是否存在。如果我需要插入大量对象，这需要一些时间。

**我可以缓存此获取请求的结果（例如 in `NSMutableDictionary`）并检查该字典（本地内存）以查看是否有`NSManagedObject`给定的`EventIDEnum`？**我可以让缓存永远保持活动状态，还是底层对象会在一段时间后“过时”？

```
-(Event*)insertAndReturnNewObjectWithTypeID:(EventIDEnum)eventTypeID date:(NSDate*)date
{

    NSFetchRequest *eventTypesArray = [NSFetchRequest fetchRequestWithEntityName:@"EventType"];
    eventTypesArray.predicate = [NSPredicate predicateWithFormat:@"SELF.id == %d", eventTypeID];
    NSArray *eventTypes = [[DataManager sharedInstance].managedObjectContext executeFetchRequest:eventTypesArray error:nil];

    if(eventTypes.count==0)
    {
        DLog(@"ERROR inserting event with type: %i NOT FOUND",(int)eventTypeID);
        return nil;
    }
    else {

        if(eventTypes.count !=1)
        {
            DLog(@"ERROR found %i events with type %i",eventTypes.count,(int)eventTypeID);
        }

        EventType* eventType = [eventTypes lastObject];

        if(date)
        {
//            DLog(@"Returning object");
            return [self insertAndReturnNewObjectWithEventType:eventType date:date];
        }else {
//            DLog(@"Returning object");
            return [self insertAndReturnNewObjectWithEventType:eventType];
        }

    }
} 
```

谢谢你看我的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:58:02.360

获取请求返回的对象数组无法缓存。它们仅在用于查询它们的 NSManagedObjectContext 尚未释放时才有效。NsManagedObject.objectID 和您从查询中检索到的数据可以被缓存并保存多久，只要您愿意。您最好将相关数据和 objectID 复制到另一个您缓存并与 CoreData 对象分开维护的对象中；并释放获取请求返回的核心数据数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:36:18.867

您使用的模式通常被称为“查找或创建”：查找其唯一特征匹配的对象，如果存在则返回它，如果不存在则创建/填充/返回它。

你可以做的一件事就是在 Core Data 之外做一些独特的事情。如果可能基于您的数据，也许您可​​以遍历您的 EventIDEnum 值，找到您需要可用的唯一值，从而减少您执行的提取次数。对于每个 EventIDEnum，您只需搜索一次。只要您在一个线程/上下文中工作，就可以缓存它们。

当我编写这种代码时，我发现将 NSManagedObjectContext 作为参数传递是很有帮助的。这使我可以在任何地方使用查找或创建或批量插入方法，无论是在主线程上还是在私有队列/上下文中。那将取代你的`[[DataManager sharedInstance] managedObjecContext]`电话。

# php - 如何让图像循环打印

> ID：12995549
> 
> 赞同：-1
> 
> 时间：2012-10-21T06:27:30.167
> 
> 标签：php

这可能是一个非常简单的解决方案，但我是 PHP 新手，我一直在搜索谷歌以了解如何让它工作但无济于事。这是我的问题，我希望能够使用该`glob`功能`extract(pathinfo)`来查找文件夹中的所有图像并将它们打印到 html 页面中。我只能将一张图像打印到屏幕上，我认为它会打印它们以便找到文件。这是我的代码：

```
<?php 
$images = glob('*.{png,jpg,jpeg}', GLOB_BRACE);

foreach($images as $img) {
    extract(pathinfo($img));
    $thumb_name = "$filename.$extension";       
    //$thumb_name = $info['filename'] . '.' . $info['extension'];
    echo $thumb_name . "\n";
}
?> 
```

最后是 html 文件：

```
<?php include 'index.php' ?>
<html>
<head>
<title>Insert title here</title>
</head>
<body>

<?php echo "<img src=\"$thumb_name\" title=\"bar\" alt=\"foo\" />"; ?>
<?php echo "<img src=\"$thumb_name\" title=\"bar\" alt=\"foo\" />"; ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:31:55.727

**不是实际的工作代码，只是为了让你有个想法**

将 echo img 放入 for 循环中

```
 $images = glob('*.{png,jpg,jpeg}', GLOB_BRACE);
     foreach($images as $img){
        extract(pathinfo($img))
      $thumb_name = "$filename.$extension";       
      echo     '<img src=\'.$thumb_name\.' title=\bar\ alt=\foo\ />';
           } 
```

# php - 两个元素在一个 foreach 循环中打印，而不是下一个循环开始

> ID：12995550
> 
> 赞同：4
> 
> 时间：2012-10-21T06:27:31.787
> 
> 标签：php

我有一个数组

```
$foo = array(1,2,3,4,5,6,7,8,9); 
```

当我为此使用 foreach 循环时

```
foreach($foo as $val):  
    print '<li>'.$val.'</li>';  
endforeach 
```

输出是，

```
<li> 1 </li>  
<li> 2 </li>  
<li> 3 </li>  
<li> 4 </li>  
<li> 5 </li> 
```

但我想推出类似的东西

```
<li> 1, 2 </li>  
<li> 3, 4 </li>  
<li> 5, 6 </li>  
<li> 7, 8 </li> 
```

是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T06:42:46.703

```
$foo = array(1,2,3,4,5,6,7,8,9);
foreach (array_chunk($foo, 2) as $chunk) {
    echo "<li>" . implode(', ', $chunk) . "</li>\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T06:36:43.830

对于 php，您可以执行以下操作：

```
for($i=0;$i<count($foo);$i+=2) {
    echo "<li>{$foo[$i]}, {$foo[$i+1]}</li>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T06:34:38.563

这可能是您需要的：

```
foreach($foo as $key=>$val) {
    if ($val&1) {
        echo '<li>' . $val;
        if($key == (count($foo)-1)){
            echo '</li>';
        }
    } else {
        echo ',' . $val . '</li>';
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T06:36:40.413

请试试这个：

```
$foo = array(1,2,3,4,5,6,7,8,9); 

$i=1;
$firstElement = "";

foreach($foo as $val):  

    if($i%2==0)
    {
        print '<li>'.$firstElement.','.$val.'</li>';  
    }
    else
    {
        $firstElement = $val;
    }   

    $i++;

endforeach 
```

# javascript - For以某种格式循环进入数组

> ID：12995551
> 
> 赞同：1
> 
> 时间：2012-10-21T06:27:34.050
> 
> 标签：javascript, arrays, loops, for-loop, format

我一直在尝试从 for 循环创建一个数组，使用 push 以 ["value, value, value, value, value, value"] 格式创建一个数组，但我需要它来创建以下格式的数组: [["值，值，值"]，["值，值，值"]

原始数组是在没有 for 循环的情况下创建的，如下所示：

```
new array (["1","2",3"],["1,2,3"],["1,2,3"],["1,2,3"]); 
```

那么我该如何使用循环来创建相同的内容呢？

```
var colour = ["red","green","blue","orange"];

for (i=1; i<5; i++){

var name = $("#name"+i).val();                                      

var can = $("#candidate"+i).val();

arrayOfData = new Array([can,name,colour[i]]); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:58:30.570

只需将`arrayOfData`自己推到一个数组中。

```
var array = [];
var colour = ["red","green","blue","orange"];
for (i=1; i<5; i++){
    var name = $("#name"+i).val();                                      
    var can = $("#candidate"+i).val();
    arrayOfData = [can,name,colour[i-1]]; 
    array.push(arrayOfData);
} 
```

​ 演示在这里：http: [//jsfiddle.net/f5J5z/4/](http://jsfiddle.net/f5J5z/4/)

# c++ - 为什么我的计数线程在使用 pthreads 时不能正常工作？

> ID：12995553
> 
> 赞同：0
> 
> 时间：2012-10-21T06:27:54.423
> 
> 标签：c++, multithreading, pointers, pthreads

在我的`main()`函数中，我调用`pthread_create`创建一个新线程。我将文本文件的名称传递给它，线程打开文本文件，计算行数，然后将该数字返回到`main()`我将整数设置`totalCount +=`为返回的数字的位置。

我知道线程函数可以正常工作，因为我用另一段代码计算了文本文件中的行数。当我使用循环`pthread_create`多次调用时会出现问题。`totalCount`我从计算一个文件中得到的结果是准确的，但是当我打开两个或更多文件时，输入是`totalCount`错误`main()`的。

我的程序可能出了什么问题导致这种情况？我的线程函数有问题吗？我的`pthread_join`？我知道这个问题在没有代码的情况下可能会很模棱两可，但是给出这个描述有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:15:40.490

无代码都是猜测。但肯定`totalCount +=`不是线程安全的。您需要一个原子联锁操作（例如[`__sync_fetch_and_add`](http://gcc.gnu.org/onlinedocs/gcc-4.1.0/gcc/Atomic-Builtins.html)），或者您需要使用互斥锁来保护它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:35:28.937

为了乐趣而在黑暗中拍摄——我能看到这个错误发生的唯一方法是如果内部行计数器——不是`totalCount`，而是跟踪每个文件中的行数——是一个全局的多变的。每个 pthread 都可能调用相同的行计数函数，因此当其他线程更新时，每个文件的行计数将不正确地增加。所以我会预测它`totalCount`总是大于而不是小于实际的行数。

# javascript - ReturnIfAbrupt 在 ES6 草案中是什么意思？

> ID：12995554
> 
> 赞同：13
> 
> 时间：2012-10-21T06:28:18.953
> 
> 标签：javascript, ecmascript-harmony

我目前正在为 ES6 草案实现一些 shims。我想知道是否有人可以告诉我是什么`ReturnIfAbrupt`意思。例如，我的实现`Number.toInt`（调用 internal`[[ToInteger]]`如下：

```
if (!('toInt' in Number))
    Object.defineProperty(Number, 'toInt', {

        value: function toInt(value) {
            // ECMA-262 Ed. 6, 9-27-12\. 9.1.4

            // 1\. Let number be the result of calling ToNumber on the input argument.
            var number = Number(value);

            // 2\. ReturnIfAbrupt(number).
            // ?

            // 3\. If number is NaN, return +0.
            if (number != number) return 0;

            // 4\. If number is +0, -0, +Infinity, or -Infinity, return number.
            if (number == 0 || 1 / number == 0) return number;

            // 5\. Return the result of computing sign(number) * floor(abs(number)).
            return (n < 0 ? -1 : 1) * Math.floor(Math.abs(number));

        },

        writable: true,
        configurable: true

    }); 
```

步骤 2 是`ReturnIfAbrupt(number)`。你会注意到我目前有`// ?`这一步，因为我不知道该怎么做。它说的时候是什么意思`ReturnIfAbrupt(...)`？

我已经阅读了`ReturnIfAbrupt`草稿中的部分，但是我无法理解第 2 步*要做*`// ?`什么，在上面的代码中要替换什么。

从我的阅读来看，可能什么都不应该做，这`ReturnIfAbrupt`一步只是意味着让 ToNumber 中发生的任何错误向上传播，退出函数。但是，这似乎过于冗长，因为我认为这是不言而喻的。此外，在我看来，它`ToNumber`甚至不会引发错误。有人可以确认或帮助我理解真正的含义吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T10:08:52.047

ReturnIfAbrupt 指的是突然完成。完成记录包含一个类型和与之关联的值。正常的完成类似于表达式的结果值。除了正常完成之外，函数的返回完成是通常的预期完成。任何其他完成类型都是突然的。那就是扔，休息，继续。

```
if (isCompletionRecord(v)) {
  if (isAbruptCompletion(v)) {
    return v;
  } else {
    v = v.value;
  }
} 
```

按照你的方式实现它，它需要将函数包装在 try catch 中。抛出的值将是突然完成。不过，这不是您在 JS 级别看到的东西，它用于在引擎级别实现控制流和非本地控制传输。

我已经在 J​​S 虚拟机中实现了大部分 ES6 规范，这也可能有助于阐明它，这里是 ToInteger：[https ://github.com/Benvie/continuum/blob/master/lib/continuum.js#L516](https://github.com/Benvie/continuum/blob/master/lib/continuum.js#L516)

```
function ToInteger(argument){
  if (argument && typeof argument === OBJECT && argument.IsCompletion) {
    if (argument.IsAbruptCompletion) {
      return argument;
    }
    argument = argument.value;
  }
  return ToNumber(argument) | 0;
} 
```

# iphone - 如果原始 CGPoints 丢失，如何将存储的 CGPath 重绘为 Bezier 路径

> ID：12995555
> 
> 赞同：2
> 
> 时间：2012-10-21T06:28:32.480
> 
> 标签：iphone, objective-c, ios

如果未存储原始 CGPoints，如何将存储的 CGPath 重绘为 Bezier 路径？

这是代码，但它不起作用（在标准模式下重绘路径而不是在贝塞尔模式下）：

```
CGMutablePathRef UpathFREEHAND = CGPathCreateMutable();
CGPoint firstPointFH = [[pointArray objectAtIndex:0] CGPointValue];
CGPathMoveToPoint(UpathFREEHAND, NULL, firstPointFH.x, firstPointFH.y);

for (int i = 0; i < [pointArray count]; i++)
    {
        CGPathAddLineToPoint(UpathFREEHAND, NULL, [[pointArray objectAtIndex:i] CGPointValue].x, 
        [[pointArray objectAtIndex:i] CGPointValue].y);
    }

CGMutablePathRef _TempPathForUndo = UpathFREEHAND;

//Add PATH object to array
[UPath addObject:CFBridgingRelease(_TempPathForUndo)];

//Load PATH object from array
_TTempPathForUndo = (__bridge CGMutablePathRef)([UPath objectAtIndex:i]);

// Now create the UIBezierPath object.
UIBezierPath *bp;
bp = [UIBezierPath bezierPath];
bp.CGPath = _TTempPathForUndo;

CGContextAddPath(context, bp.CGPath);
//Color, Brush Size parameters, Line cap parameters..
CGContextStrokePath(context); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:47:13.610

您可以使用以下方法[`UIBezierPath`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/cl/UIBezierPath)：

```
+ (UIBezierPath *)bezierPathWithCGPath:(CGPathRef)CGPath 
```

a 的重用`CGPath`是有效的。检查此示例添加`TestView`a`UIViewController`并链接 a`UIButton`以在单击它时强制重绘`[_testView setNeedsDisplay]`：

```
// TestView.h

#import <UIKit/UIKit.h>

@interface TestView : UIView {

    CGMutablePathRef _path;
    BOOL _nextDraws;
}

@end

// TestView.m

#import "TestView.h"

@implementation TestView

- (void)drawRect:(CGRect)rect {

    BOOL firstDraw = !_nextDraws;
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    if (firstDraw) {
        NSLog(@"first draw");

        _path = CGPathCreateMutable();
        CGPathMoveToPoint(_path, NULL, 0, 0);
        CGPathAddLineToPoint(_path, NULL, CGRectGetMaxX(rect), CGRectGetMaxY(rect));
        CGPathCloseSubpath(_path);
        CGContextAddPath(ctx, _path);
        CGContextSetStrokeColorWithColor(ctx,[UIColor whiteColor].CGColor);
        CGContextStrokePath(ctx);

        _nextDraws = YES;
    }
    else {
        NSLog(@"next draws");

        CGContextRef ctx = UIGraphicsGetCurrentContext();
        CGContextClearRect(ctx, rect);
        UIBezierPath * bezierPath = [UIBezierPath bezierPathWithCGPath:_path];
        CGContextAddPath(ctx, bezierPath.CGPath);
        CGContextSetStrokeColorWithColor(ctx,[UIColor whiteColor].CGColor);
        CGContextStrokePath(ctx);
    }
}

- (void)dealloc {
    CGPathRelease(_path);
    [super dealloc];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-09T17:33:33.610

atxe 的 Swift 3.0 版本的回答：

```
let myCGPath: CGPath = // stored CGPath or path taken from another object
let bezierPath = UIBezierPath(cgPath: myCGPath) 
```

# android - android - ADB Logcat 错误

> ID：12995558
> 
> 赞同：2
> 
> 时间：2012-10-21T06:29:19.040
> 
> 标签：android, crash, adb, logcat

我收到了这个错误，我不知道发生了什么。谢谢！

```
I/DEBUG   (   78): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (   78): Build fingerprint: 'verizon_wwe/inc/inc:2.3.4/GRJ22/185897.2:user/release-keys'
I/DEBUG   (   78): pid: 9829, tid: 9839  >>> com.eternal5.election2012 <<<
I/DEBUG   (   78): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000000f
I/DEBUG   (   78):  r0 00000003  r1 00000000  r2 003a9578  r3 003a9560
I/DEBUG   (   78):  r4 00000000  r5 00000018  r6 003a9568  r7 0000a000
I/DEBUG   (   78):  r8 00000020  r9 00357998  10 0033e358  fp 00000008
I/DEBUG   (   78):  ip 00000000  sp 44f4d8b8  lr afd10fc8  pc afd1336a  cpsr 88000030
I/DEBUG   (   78):  d0  3efafafc3df0f0f2  d1  000000003f800000
I/DEBUG   (   78):  d2  0000000043f00000  d3  00000000bf800000
I/DEBUG   (   78):  d4  00000000c4054000  d5  3fd5333300000000
I/DEBUG   (   78):  d6  bf80000044054000  d7  3f80000000000000
I/DEBUG   (   78):  d8  00000000000002e0  d9  0000000000000000
I/DEBUG   (   78):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (   78):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (   78):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (   78):  d16 bfa5a8b56edbeb54  d17 bfe304e4d987aa10
I/DEBUG   (   78):  d18 bf29dc075e93ddb3  d19 3ec6cd878c3b46a7
I/DEBUG   (   78):  d20 bfd07ff866e96ee2  d21 3fc500b99b47720d
I/DEBUG   (   78):  d22 0000000000000000  d23 3ef99342e0ee5069
I/DEBUG   (   78):  d24 40dd4c2013880000  d25 40ed4c1013880000
I/DEBUG   (   78):  d26 40cd4c4013880000  d27 3ef99342e0ee5069
I/DEBUG   (   78):  d28 c002011d28ebc7c3  d29 3ff0000000000000
I/DEBUG   (   78):  d30 0000000000000000  d31 3ff0000000000000
I/DEBUG   (   78):  scr 20000017
I/DEBUG   (   78): 
I/DEBUG   (   78):          #00  pc 0001336a  /system/lib/libc.so
I/DEBUG   (   78):          #01  pc 00014642  /system/lib/libc.so
I/DEBUG   (   78):          #02  pc 000771a0  /system/lib/egl/libGLESv2_adreno200.so
I/DEBUG   (   78):          #03  pc 000799f4  /system/lib/egl/libGLESv2_adreno200.so
I/DEBUG   (   78):          #04  pc 00079c12  /system/lib/egl/libGLESv2_adreno200.so
I/DEBUG   (   78):          #05  pc 00081a26  /system/lib/egl/libGLESv2_adreno200.so
I/DEBUG   (   78):          #06  pc 0005d92e  /system/lib/egl/libGLESv2_adreno200.so
I/DEBUG   (   78):          #07  pc 000600f2  /system/lib/egl/libGLESv2_adreno200.so
I/DEBUG   (   78):          #08  pc 0007389c  /system/lib/egl/libGLESv2_adreno200.so
I/DEBUG   (   78):          #09  pc 00013242  /system/lib/egl/libGLESv1_CM_adreno200.so
I/DEBUG   (   78):          #10  pc 0001b3a0  /system/lib/egl/libGLESv1_CM_adreno200.so
I/DEBUG   (   78):          #11  pc 0009e48c  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #12  pc 000bfc60  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #13  pc 000cb818  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #14  pc 00091508  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #15  pc 00091508  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #16  pc 00091508  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #17  pc 00091508  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #18  pc 00091508  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #19  pc 000c932c  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #20  pc 000921c4  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #21  pc 000c2950  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #22  pc 00086978  /data/data/com.eternal5.election2012/lib/libcorona.so
I/DEBUG   (   78):          #23  pc 000181b4  /system/lib/libdvm.so
I/DEBUG   (   78):          #24  pc 00049f6a  /system/lib/libdvm.so
I/DEBUG   (   78): 
I/DEBUG   (   78): code around pc:
I/DEBUG   (   78): afd13348 51acf8c4 1a5be218 f0c042bb 69608213 
I/DEBUG   (   78): afd13358 4283186d 8093f000 2c1f08cc 6898d82b 
I/DEBUG   (   78): afd13368 68c668d9 f040429e 688b8205 f04042b3 
I/DEBUG   (   78): afd13378 42888201 f8dfd10c 2601c428 fa1644fc 
I/DEBUG   (   78): afd13388 f8dcf004 ea266000 f8cc0400 e0804000 
I/DEBUG   (   78): 
I/DEBUG   (   78): code around lr:
I/DEBUG   (   78): afd10fa8 e2166903 1a000017 e5945000 e1a02004 
I/DEBUG   (   78): afd10fb8 e2055a02 e1a00005 e3851001 ebffee16 
I/DEBUG   (   78): afd10fc8 e3500000 13856002 1a000001 ea000009 
I/DEBUG   (   78): afd10fd8 ebfffe52 e1a01004 e1a00006 ebffee16 
I/DEBUG   (   78): afd10fe8 e1a01005 e1a02006 e3a03000 e1550000 
I/DEBUG   (   78): 
I/DEBUG   (   78): stack:
I/DEBUG   (   78):     44f4d878  00000000  
I/DEBUG   (   78):     44f4d87c  00066325  
I/DEBUG   (   78):     44f4d880  00066315  
I/DEBUG   (   78):     44f4d884  0034e9d8  
I/DEBUG   (   78):     44f4d888  00000000  
I/DEBUG   (   78):     44f4d88c  00000006  
I/DEBUG   (   78):     44f4d890  00000000  
I/DEBUG   (   78):     44f4d894  00358510  
I/DEBUG   (   78):     44f4d898  003a9568  
I/DEBUG   (   78):     44f4d89c  003a9568  
I/DEBUG   (   78):     44f4d8a0  003a9568  
I/DEBUG   (   78):     44f4d8a4  005864e3  
I/DEBUG   (   78):     44f4d8a8  00000020  
I/DEBUG   (   78):     44f4d8ac  00357998  
I/DEBUG   (   78):     44f4d8b0  df002777  
I/DEBUG   (   78):     44f4d8b4  e3a070ad  
I/DEBUG   (   78): #00 44f4d8b8  003a9568  
I/DEBUG   (   78):     44f4d8bc  003a9568  
I/DEBUG   (   78):     44f4d8c0  80fa855c  
I/DEBUG   (   78):     44f4d8c4  005864e3  
I/DEBUG   (   78):     44f4d8c8  00000020  
I/DEBUG   (   78):     44f4d8cc  afd14645  /system/lib/libc.so
I/DEBUG   (   78): #01 44f4d8d0  003a9568  
I/DEBUG   (   78):     44f4d8d4  80e771a3  /system/lib/egl/libGLESv2_adreno200.so
D/CDMASMSdispatcher(  250): NUmem value is: false
D/DeviceStorageMonitorService(  124): DeviceStorageMonitorservice, nv value dis/local: false
I/BootReceiver(  124): Copying /data/tombstones/tombstone_05 to DropBox (SYSTEM_TOMBSTONE)
D/AudioPolicyService(  975): stopOutput() tid 975
D/AudioPolicyService(  975): releaseOutput() tid 975
D/SensorGUI(  124): SensorChannel::write(): write errno = 32, mSendFd = 239
E/SensorService(  124): dropping 1 events on the floor (Broken pipe)
E/InputDispatcher(  124): channel '408976b0 com.eternal5.election2012/com.ansca.corona.CoronaActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
E/InputDispatcher(  124): channel '408976b0 com.eternal5.election2012/com.ansca.corona.CoronaActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
D/Zygote  (   80): Process 9829 terminated by signal (11)
D/SensorGUI(  124): SensorChannel::write(): write errno = 32, mSendFd = 239
E/SensorService(  124): dropping 1 events on the floor (Broken pipe)
D/SensorGUI(  124): SensorChannel::write(): write errno = 32, mSendFd = 239
E/SensorService(  124): dropping 1 events on the floor (Broken pipe)
D/SensorService(  124): SensorDevice::activate: handle = 0x0, enabled = 0x0
D/Sensors (  124): Enable akm: en = 0
D/SensorService(  124): noteStopSensor: uid = 0x3e8, handle = 0x0
D/SensorGUI(  124): ~SensorChannel: mSendFd = 239, mReceiveFd = -1
D/dalvikvm(  124): GC_FOR_MALLOC freed 1653K, 48% free 8091K/15303K, external 3528K/3906K, paused 161ms
I/ActivityManager(  124): Process com.eternal5.election2012 (pid 9829) has died.
I/WindowManager(  124): WIN DEATH: Window{408eb8e0 SurfaceView paused=false}
I/WindowManager(  124): WIN DEATH: Window{408976b0 com.eternal5.election2012/com.ansca.corona.CoronaActivity paused=false} 
```

这确实发生在随机时间，但每次我开始玩游戏时都会发生。

如果这很明显，我很抱歉，但我是 Android 新手，并不真正理解这个日志。谢谢你！

# ipad - 颜色与 iPad 上应有的颜色相反

> ID：12995559
> 
> 赞同：0
> 
> 时间：2012-10-21T06:29:22.627
> 
> 标签：ipad

我有一台原装**iPad**。

我注意到某些网站/文档以相反的颜色显示它们应该显示的颜色——白色背景为黑色，红色图像为绿色，蓝色图像为黄色。现在我在 Photoshop 中使用白色、蓝色和绿色创建了标头。如果这有什么不同的话，它就是一个 jpeg。
在我所有的设备上它都能正常显示，除了在 iPad 上它显示为黑色、金色和紫色——并且与其他所有设备完全冲突。

这是[网站](http://www.reformSbCounty.com)，如果有帮助的话——抱歉，我似乎无法将它作为超链接插入。它只是一个临时站点，所以这并不是惊天动地的，但我想知道如何在未来的站点中防止这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:50:05.870

图片[http://reformsbcounty.com/wp-content/uploads/2012/10/ReformHeader-copy2.jpg](http://reformsbcounty.com/wp-content/uploads/2012/10/ReformHeader-copy2.jpg)使用 CMYK 颜色空间。您应该尝试为 Web 使用 RGB 颜色空间（24 位图像）。对由 PhotoShop 反转存储的 JPEG CMYK 颜色字节大惊小怪（添加一个并非所有 JPEG 消费者都能理解的特殊标记）。0% 颜色存储为 0xFF（100% 存储为 0x00），而标准为 0->0 100%->0xFF。因此，尝试将您的图像转换为 RGB 图像应该可以在所有设备上为您提供正确的渲染。

# javascript - 如何在没有 AJAX 的情况下本地获取 JSON

> ID：12995560
> 
> 赞同：4
> 
> 时间：2012-10-21T06:29:22.223
> 
> 标签：javascript, jquery, ajax, json, html

我正在使用 HTML5 Canvas 和 Javascript 构建游戏，并且我正在为我的关卡使用 JSON 格式的平铺地图。瓷砖在 FireFox 中正确呈现，但是当我使用 Chrome 时，JSON 提取失败，并显示“Access-Control-Allow-Origin 不允许 Origin null”。我正在使用 jQuery 的 $.ajax 命令，我的所有文件都在一个目录中。

我会使用[这篇](https://stackoverflow.com/questions/8456538/origin-null-is-not-allowed-by-access-control-allow-origin)文章的解决方案，但我不能使用 Web 服务器解决方案。

有没有其他方法可以获取要解析和读取的 JSON 文件？类似于仅通过提供 URL 来加载图像的东西？或者有什么方法可以快速将我的 JSON 文件转换为全局可用的字符串，以便我可以用 JSON.parse() 解析它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:41:25.780

在 Chrome 中可能对您有用的一种选择是使用命令行开关调用浏览器`--allow-file-access-from-files`。这个问题解决了这个问题：[Google Chrome --allow-file-access-from-files disabled for Chrome Beta 8](https://stackoverflow.com/questions/4270999/google-chrome-allow-file-access-from-files-disabled-for-chrome-beta-8)

另一种可能性是将 JSON 数据作为脚本获取，将全局变量设置为 JSON 值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:43:07.327

为什么本地 Web 服务器不是一个选项？Apache 是免费的，可以安装在任何东西上，而且易于使用，IMO。此外，特别是对于 Chrome，请查看`--allow-file-access-from-files`

但如果**没有**其他工作，也许您可​​以在`script`标签中添加指向文件的链接，然后附加`var SomeGlobalObject = ...`到每个文件的顶部。您甚至可以通过使用 JS 将脚本标签附加到`head`. 但最后，您可以不使用 AJAX，而是这样做`JSON.parse(SomeGlobalObject)`

换句话说，通过添加脚本标签将文件加载到全局命名空间中。通常这会被认为是不好的做法，但仅用于测试，在没有任何其他选项的情况下，它可能会起作用。

# mysql - 插入记录时对多个表进行约束检查

> ID：12995561
> 
> 赞同：2
> 
> 时间：2012-10-21T06:29:56.250
> 
> 标签：mysql, sql, constraints, alter

我有这样的数据库方案..

```
create table Photographer(
id int primary key references Person(id) on update cascade on delete cascade,
livesIn int not null references Location(id) on update cascade on delete no action
);
create table Specialty(
photographer int references Photographer(id) on update cascade on delete cascade,
type enum('portrait','landscape','sport'),
primary key(photographer, type)
);
create table Photo(
id int primary key,
takenAt timestamp not null,
takenBy int references Photographer(id) on update cascade on delete no action,
photographedAt int references Location(id) on update cascade on delete no action,
type enum('portrait','landscape','sport')
); 
```

如果摄影师有 t 作为摄影师的专业之一，我必须限制数据库，以便摄影师有资格拍摄类型 t 的照片。

我的尝试没有奏效。

```
/*Attempt 1*/
ALTER TABLE Photo ADD CONSTRAINT constraint_1      
CHECK (Photo.type in (SELECT Specialty.type FROM Specialty,Photo,Photographer 
WHERE Photo.takenBy = Photographer.id 
AND Photographer.id = Specialty.photographer 
AND Specialty.type = Photo.type));
/*Attempt 2 using exists instead of 'in'*/
ALTER TABLE Photo ADD CONSTRAINT constraint_1      
CHECK (exists (SELECT * FROM Specialty,Photo,Photographer 
WHERE Photo.takenBy = Photographer.id 
AND Photographer.id = Specialty.photographer 
AND Specialty.type = Photo.type)); 
```

我在这里做错了什么特别的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:11:16.157

如[`ALTER TABLE`语法](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)中所述：

> 该`CHECK`子句被所有存储引擎解析但忽略。请参阅[第 13.1.17 节，“<code>CREATE TABLE 语法”</a>。接受但忽略语法子句的原因是为了兼容性，以便更容易地从其他 SQL 服务器移植代码，以及运行使用引用创建表的应用程序。请参阅](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)[第 1.8.5 节，“MySQL 与标准 SQL 的区别”</a>。](http://dev.mysql.com/doc/refman/5.5/en/differences-from-ansi.html)
> 
> [](http://dev.mysql.com/doc/refman/5.5/en/differences-from-ansi.html)

 [你有几个选择：](http://dev.mysql.com/doc/refman/5.5/en/differences-from-ansi.html) 

[](http://dev.mysql.com/doc/refman/5.5/en/differences-from-ansi.html)
2.  [使用](http://dev.mysql.com/doc/refman/5.5/en/differences-from-ansi.html)[`FOREIGN KEY`约束](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)，这要求所有表都使用`InnoDB`存储引擎：

    ```
    ALTER TABLE Specialty
      ADD FOREIGN KEY (photographer) REFERENCES Photographer (id);

    ALTER TABLE Photo
      ADD FOREIGN KEY (takenBy, type) REFERENCES Specialty (photographer, type); 
    ```

3.  使用触发器：

    ```
    CREATE TRIGGER foo1 BEFORE INSERT ON Photo FOR EACH ROW
    IF NOT EXISTS (
      SELECT *
      FROM   Specialty s JOIN Photographer p ON s.photographer = p.id
      WHERE  p.id = NEW.takenBy AND s.type = NEW.type
    ) THEN CALL raise.error;

    CREATE TRIGGER foo2 BEFORE UPDATE ON Photo FOR EACH ROW
    IF NOT EXISTS (
      SELECT *
      FROM   Specialty s JOIN Photographer p ON s.photographer = p.id
      WHERE  p.id = NEW.takenBy AND s.type = NEW.type
    ) THEN CALL raise.error; 
    ```

# java - 如何使用 wait/notifyAll

> ID：12995568
> 
> 赞同：6
> 
> 时间：2012-10-21T06:31:18.477
> 
> 标签：java, multithreading, wait, runnable, notify

我想知道在 java 中是否有可能有一个实现 Runnable 的类，如果该类的一个对象进入 wait() （所以线程停止运行直到它收到信号），同一个类的另一个对象是否可以通知它继续运行？

理想情况下，我想做的是：

```
public class ThreadClass implements Runnable{

 public void run(){
 //.. Does some arbitrary work

  if( aCondition){  //have it wait until something signals it to contine exection.
 this.wait();
 }

 //Continues to do more work.

 //finished whatever it needed to do. Signal all other threads of this object type to continue their work.
 this.notifyAll();

 }
} 
```

这可能吗？如果可以，我将如何去做？我正在尝试使对象本身可以管理自己和所有其他相同类型的对象。所以使用这个类的人不必担心管理它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T06:37:35.687

> 我正在尝试使对象本身可以管理自己和所有其他相同类型的对象。所以使用这个类的人不必担心管理它。

如果您想让每个实例都了解其他每个实例，则需要某种静态收集……这会使垃圾收集变得棘手，并且很难测试。

我建议您有一个单独的管理器类型，其唯一工作是管理此类的实例。然后你仍然只需要在一个地方拥有逻辑，但你不需要知道该类型的所有实例 - 管理器只需要知道它正在管理什么。您甚至可以创建 API，以便客户端代码*只*需要查看管理器，并且隐藏单个实例。

编辑：澄清一下，您甚至可能根本不需要`wait`/ `notifyAll`- 更喜欢 中的高级构造`java.util.concurrent`，它允许您编写生产者/消费者场景而无需低级操作，例如`wait`. 这个答案解决了让对象知道他们应该与哪些其他对象通信的更高级别的问题。问题的一种类型的所有对象都知道另一种类型的想法会导致问题，因此提出了管理器类的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T07:02:18.947

通过管理自身，您可能意味着管理其锁的同步并根据某些条件遵守其实例变量的边界。

```
public class ThreadClass implements Runnable {

    public void run() {
        // .. Does some arbitrary work
        synchronized (this) {
            while (! aCondition) { // have it wait until something signals it to
                                // contine exection.
                this.wait();
            }
        }

    /*  Reset the aCondition var to its old value to allow other threads to 
        enter waiting state

        Continues to do more work.

        Finished whatever it needed to do. Signal all other threads of this
         object type to continue their work.*/
        synchronized (this) {
            this.notifyAll();
        }

    }
} 
```

您还应该查看[Condition](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)界面。除了使用 java.util.concurrent 类之外，它似乎具有完全相同的要求。有一个BoundedBuffer的例子。

请参阅下面的生产者消费者示例。它具有相同的等待/通知模板。可用标志声明为 volatile，以便可以对其执行线程安全读取和写入。

```
public class ProducerConsumerTest {
    public static void main(String[] args) {
        CubbyHole c = new CubbyHole();
        Producer p1 = new Producer(c, 1);
        Consumer c1 = new Consumer(c, 1);

        p1.start();
        c1.start();
    }
}

    class CubbyHole {
        private int contents;
        private volatile boolean available = false;

        public int get() {
            synchronized (this) {
                while (available == false) {
                    try {
                        wait();
                    } catch (InterruptedException e) {
                    }
                }
            }

            available = false;
            synchronized (this) {
                notifyAll();
            }
            return contents;
        }

        public void put(int value) {
            synchronized (this) {
                while (available == true) {
                    try {
                        wait();
                    } catch (InterruptedException e) {
                    }
                }
            }
            available = true;

            contents = value;

            synchronized (this) {
                notifyAll();
            }
        }
    }

    class Consumer extends Thread {
        private CubbyHole cubbyhole;
        private int number;
        private Integer takeSum = new Integer(0);

        public Consumer(CubbyHole c, int number) {
            cubbyhole = c;
            this.number = number;
        }

        public Integer getTakeSum() {
            return takeSum;
        }

        public void run() {
            int value = 0;
            for (int i = 0; i < 100; i++) {
                value = cubbyhole.get();
                takeSum+=value;

            }

            System.out.println("Take Sum for Consumer: " + number + " is "
                    + takeSum);
        }
    }

    class Producer extends Thread {
        private CubbyHole cubbyhole;
        private int number;
        private Integer putSum = new Integer(0);

        public Integer getPutSum() {
            return putSum;
        }

        public Producer(CubbyHole c, int number) {
            cubbyhole = c;
            this.number = number;
        }

        public void run() {
            for (int i = 0; i < 100; i++) {
                int rnd = (int) (Math.random() * 10);
                cubbyhole.put(rnd);
                putSum+=rnd;
                try {
                    sleep((int) (Math.random() * 100));
                } catch (InterruptedException e) {
                }
            }
            System.out.println("Put Sum for Producer: " + number + " is " + putSum);

        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T07:10:14.733

您问

> 同一类的另一个对象可以通知它继续运行吗？

绝对没错！- 如果对象被阻止等待此对象，则从任何类的任何实例调用 notifyAll*将**允许*它们运行。（包括 Runnable 自身等待）

 *notifyAll 不关心它通知的类的类型，它通知正在等待该对象的任何类。（将其用作锁）。

就此而言，任何类的任何实例都可以在任何对象上调用等待或通知。wait 和 notify 是 java.lang.Object 上的公共方法

请参阅本教程等待，通知。

[http://www.java-samples.com/showtutorial.php?tutorialid=306](http://www.java-samples.com/showtutorial.php?tutorialid=306)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T06:46:18.177

```
If( condition)
{ wait } 
```

理想情况下，等待应该被 while 条件而不是 if 块包围。因为客户在继续之前应该确保条件得到满足，而不是仅仅依赖于通知。*

# xcode - 已删除的 iPhone 5 故事板保留

> ID：12995573
> 
> 赞同：0
> 
> 时间：2012-10-21T06:33:26.077
> 
> 标签：xcode, ios6, xcode4.5

我需要为我的 iPhone5 应用程序添加一个故事板——因为自动布局不适用于这个项目。

当我意识到我应该复制并重命名现有的 mainstoryboard 文件时，我从头开始创建了一个故事板并放弃了它（并删除了文件）。

问题是，当我将模拟器作为 iPhone 5 运行时，我仍然会看到旧的已删除视图。我已经尝试按照其他帖子中的建议清理项目等。我还检查了旧的故事板是否被保存在任何愚蠢的地方——它不在那里。

知道发生了什么吗？

# google-apps-script - 开始使用 Google 小工具

> ID：12995579
> 
> 赞同：0
> 
> 时间：2012-10-21T06:36:07.113
> 
> 标签：google-apps-script

我仍在尝试让我的第一个小工具正常工作....所以我遵循了帮助，打开了我的网站，打开了脚本，添加了一个脚本，制作了一个 html 类型的 ui，为每个半逗号发布了我更改了一个版本，否则在那里似乎没有办法在发布之前测试脚本，在 exe 窗口中它看起来不错，所以现在我想将它嵌入到站点中......

并且,,, 它没有出现.... 很好地添加了“按 URL”，所以我将 exes 页面 URL 粘贴到其中，我得到了一个不受支持的功能：org.apache.shindig.common.xml.XmlException: The element类型“meta”必须由匹配的结束标签“”终止。在： (1383,5)

所以我被卡住了......我如何将我的小工具放到页面上？？？

网址是[https://script.google.com/macros/s/AKfycbwbTcSDuGZLy1eNlAHjrewkmOm5ZHkDQsze3CPP4-M/dev](https://script.google.com/macros/s/AKfycbwbTcSDuGZLy1eNlAHjrewkmOm5ZHkDQsze3CPP4-M/dev)

ciao布鲁诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:00:59.903

在插入菜单中，有两种插入小工具的可能性（这让我无法理解，这就是为什么花了这么长时间才找到...）第一个是公共小工具，第二个是我一直在搜索的小工具，与本地小工具...

问题解决了，不便之处请见谅......

布鲁诺

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:49:53.233

网页上小工具的 url 如下所示：

```
https://sites.google.com/macros/exec?service=AKfycbxLvE49lcgdQlvw3ouxLnjEvYwgdiOPH5ecNYClzw 
```

脚本必须与版本一起保存并发布（部署），然后才能插入。

您能否告诉我们您是否有“管理此站点”中可用脚本列表中显示的脚本（见下文）

![在此处输入图像描述](../Images/6f2ca3a0a3eac3b65338c6164bd02c82.png)

然后，当您尝试插入小工具时，您应该拥有相同的列表，如下所示：

![在此处输入图像描述](../Images/1818f39c92e9b215a6594d8bb03024a2.png)

如果这些步骤都没有问题，那么我建议您通过复制/粘贴代码来重新创建一个新脚本，从站点的脚本编辑器中发布它并重试......这是一个非常简单的过程，我不知道如果您遵循每一步，可能会出什么问题...

祝你好运 ;）

# python - 不管它是如何散列的，网站是否能够解密散列密码？

> ID：12995582
> 
> 赞同：1
> 
> 时间：2012-10-21T06:36:22.490
> 
> 标签：python, hash, md5

我正在创建一个登录网站的 python 脚本（在这种情况下，它是用于更新 Tunnelbroker.net 的 IPv4 端点的 URL），它使用散列的用户名和密码。

我的问题是这个。如果我使用 echo mypassword | md5sum 它给了我一个与我找到的 python 脚本不同的哈希（使用 hashlib 和 hashdigest 来完成任务）。

例如，如果“mypass”是机器人，则回显机器人 | md5sum 给我 2cf61812c352ec4fd0dae8f52874701d 但如果我通过 python 脚本运行它，我会得到 27f5e15b6af3223f1176293cd015771d

*   我正在使用的脚本位于[http://wiki.python.org/moin/Md5Passwords](http://wiki.python.org/moin/Md5Passwords)

我的问题很简单：网站能否解密其中任何一个并获得“机器人”？我问这个，因为我想包含用于散列密码的 python 脚本的变体（以防最终用户在 Windows 或其他无法生成 MD5 散列的操作系统上）。

在此先感谢，祝您有美好的一天:) 帕特里克。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T06:44:30.180

`md5`和同一句话中的密码让我不寒而栗.. `md5`是一种单向散列函数，这意味着一旦散列就*应该*没有办法[“解密” 。](https://stackoverflow.com/questions/1240852/is-it-possible-to-decrypt-md5-hashes)它*不是*加密功能。但是，使用[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)（可能还有[其他方式](https://stackoverflow.com/questions/1240852/is-it-possible-to-decrypt-md5-hashes)），您*可以*从哈希中恢复一些常见的字符串`md5`，这使得使用`md5`加密密码的想法变得更糟。

但无论如何，这是答案：

不，Python 脚本的答案是正确的。如果你使用`echo -n "robots" | md5sum`你会发现它们是一样的：`27f5e15b6af3223f1176293cd015771d`

原因是`echo`会在它回显的字符串末尾附加一个换行符（惊喜！），添加`-n`不会打印换行符，因此会给你正确的结果。

或者，您可以简单地使用`md5sum -s "robots"`或`md5 -s "robots"`生成哈希而不使用`echo`.

* * *

参考`echo`：

> echo 实用程序将任何指定的操作数（由单个空白 ( `' '`) 字符分隔并后跟换行符 ( `\n`) 字符）写入标准输出。

[使用什么密码哈希算法？](https://security.stackexchange.com/questions/4789/most-secure-password-hash-algorithms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:44:44.690

字符串 "robots\n" 的 MD5 为 2cf61812c352ec4fd0dae8f52874701d

字符串 "robots" 的 MD5 是 27f5e15b6af3223f1176293cd015771d

`md5sum robots`给你什么？

# unix - 在两个 Unix 主机之间复制文件

> ID：12995598
> 
> 赞同：-1
> 
> 时间：2012-10-21T06:39:20.353
> 
> 标签：unix, hosts, cp

我正在从我越狱的 iPod 上运行一个远程 ssh 服务器，一旦连接，我就可以访问它的文件系统，但是当我尝试将文件从 iPod 复制到我的计算机时，我意识到我无法在那个 Unix 中访问我计算机的文件系统用户。我对此有点陌生，所以如果我做了一些愚蠢的事情，请原谅我，但是有什么方法可以将这些文件放到我的电脑上吗？

系统信息：

电脑：MacBook Pro 5,5 OS X 10.8.2

iPod：iPod touch 2,2 iOS 4.1.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T06:58:27.777

您应该能够使用 scp。它的工作方式几乎与复制类似，但使用 ssh 在主机之间复制。

从桌面你会运行类似

```
scp root@ipod:/my/file . 
```

这将登录到 iPod（你应该用你用来登录的 IP 地址或域名替换它）作为 root 用户（你可以用你使用的那个用户替换那个用户）并将 /my/file 复制到你的机器上在当前目录中重新运行命令。

# python - 如何设置列表框中项目的颜色

> ID：12995599
> 
> 赞同：1
> 
> 时间：2012-10-21T06:39:27.610
> 
> 标签：python, tkinter

我正在制作一个`Listbox`应该包含两个列表中的行。

这是我的草稿：

```
LISTBOX = Listbox(master)

for line in LIST1:
    for lin in LIST2:
        LISTBOX.insert(END, line)
        LISTBOX.insert(END, lin) 
```

现在，我希望`LIST1`在列表框中自动标记来自的行（以蓝色突出显示）。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:09:41.187

你可以这样做：

```
LISTBOX.insert(END, line)
LISTBOX.itemconfigure(END, background="blue") 
```

# c# - 如何从特定的 Word 或 Excel 文档中获取设计属性值？

> ID：12995601
> 
> 赞同：2
> 
> 时间：2012-10-21T06:40:15.237
> 
> 标签：c#, office-interop

是否可以从特定文档中获取设计属性值？如果是这样，我将使用什么方法，以及如何使用？

例子：

我有 file.docx，然后那个 file.docx 有一个 Tahoma 字体的文本，大小为 74，样式为粗体和斜体。现在，我想获取设置字体、大小和样式的属性值（注意：值，而不是属性）。如果这是可能的，它是否也适用于样式表等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:49:44.730

对于 Word 文档：

```
using Microsoft.Office.Interop.Word;

        namespace ConsoleApplication1
        {
            class Program
            {
                static void Main(string[] args)
                {

                    Application application = new Application();
                    application.Visible = false;

                    Document document = application.Documents.Open(@"C:\file.docx", Type.Missing, true);

                    // Loop through all words in the document.
                    int count = document.Words.Count;
                    for (int i = 1; i <= count; i++)
                    {
                        string text = document.Words[i].Text; //you can validate if string.IsNullOrEmpty....
                        string fontName = document.Words[i].Font.Name;
                        string bold = document.Words[i].Font.Bold.ToString();
                        string fontSize = document.Words[i].Font.Size.ToString();
                        Console.WriteLine("Word {0} = {1} -- Font:{2}, Size: {3}, Bold:{4}", i, text, fontName, fontSize, bold);
                    }

                    application.Quit();

                    Console.ReadLine();

                   }
            }
        } 
```

Excel 文档：

```
using Microsoft.Office.Interop.Excel;
using System.Runtime.InteropServices;

...

     static void Main(string[] args)
            {

                Application application = new Application();
                application.Visible = false;
                string filePath = @"C:\excel.xlsx";

                var book = application.Workbooks.Open(filePath, Type.Missing, true);

                Workbook workBook = application.Workbooks.Open(filePath,
                                                                Type.Missing, true, Type.Missing, Type.Missing,
                                                                Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                                                                Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                                                                Type.Missing, Type.Missing);

                foreach (Worksheet item in workBook.Sheets)
                {
                    foreach (Range cell in item.Cells)
                    {
                        //Navigate huge options... 
                        //.Borders
                        //.Style
                        //... 
                    }

                }

                workBook.Close(false, filePath, null);
                Marshal.ReleaseComObject(workBook);

                application.Quit();

                Console.ReadLine();

            } 
```

# gps - GPS 模块无法启动

> ID：12995607
> 
> 赞同：0
> 
> 时间：2012-10-21T06:41:44.890
> 
> 标签：gps, arduino

我有一个 antenova 零件号。我试图用以太网 Arduino 控制的 M10382。我可以让设备通过其 USB 通道发送数据包，但不能通过 UART 通道发送数据包。我尝试以 9600 波特率发送单元 CR/LF，但没有结果。

有人用过这个模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T23:34:32.630

这个 GPS 模块是 3.3v，你给它 3.3v 电源和 GPS rx 引脚上的 3.3v 吗？如果您将模块（或那个引脚）直接插入 Arduino，您可能已经炸毁了它。

正确接线后（3.3v），然后试试[这个优秀的 GPS 库](http://arduiniana.org/libraries/tinygps/)。尝试示例代码来调试您的问题。您只需将 3.3v VCC、GND 和 GPS 的 tx 引脚插入 Arduino 上的数字输入引脚。

祝你好运。

# scripting - 使用日期命令列出文件并返回字数

> ID：12995614
> 
> 赞同：-1
> 
> 时间：2012-10-21T06:43:28.480
> 
> 标签：scripting

我想创建一个脚本，它可以列出特定目录中的文件并返回计数。

例如我有文件名：

```
abc_20121018.txt
bcddelhi_20121017.txt
zxy_20121018 
```

我只想`20121018`使用 date 命令列出其中包含的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:49:39.523

如果您只想获取包含 20121018 的文件，我不明白为什么需要 date 命令来执行此操作！

使用以下命令：

```
ls -1 *_20121018.txt|wc -l 
```

# mysql - mysql根据列值分隔行，可能吗？

> ID：12995616
> 
> 赞同：0
> 
> 时间：2012-10-21T06:43:36.233
> 
> 标签：mysql, sql

自过去几天以来，这个问题一直困扰着我。这是我的想法：
一家超级大的零售店公司在许多不同的城市都有店，每家店都在特定的一天开业。将数据制成表格的表格将（至少）两列，
（1）城市名称（2）打开日期
理想的输出：多个列表，每个列表包含按时间顺序（按打开日期）排序的 10 个城市的给定城市的所有商店按字母顺序。
为了解决这个问题，我正在考虑：
Fetch #1：按字母顺序从表中获取 10 个城市
Fetch #2（循环中多次获取）：迭代每个获取的城市，并获取
其所有各自的商店，按打开日期排序.

我想出的上述方法可以完成这项工作，但是我想知道是否有更简洁的方法可以做到这一点，这涉及在进行 fetch #1 本身时循环通过城市的商店，从而不会增加通过使用外部循环并执行许多 sql 执行而不是仅执行一次来降低时间复杂度。
那可能吗？一个sql语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:59:50.523

```
SELECT * FROM my_table NATURAL JOIN (
  SELECT DISTINCT city FROM my_table ORDER BY city LIMIT 10
) t ORDER BY city, opened 
```

在应用程序中循环遍历结果集时拆分为单独的列表：只需检查`city`它自上次迭代以来是否已更改。在伪代码中：

```
for each record in resultset:
  if current city is not equal to last city then start new list
  output current record
  set last city to current city 
```

# java - 如何以更少的内存提高字符串处理的性能？

> ID：12995617
> 
> 赞同：1
> 
> 时间：2012-10-21T06:43:56.017
> 
> 标签：java, string, performance, collections

我正在用Java实现这个。

```
Symbol file     Store data file

1\item1         10\storename1
10\item20       15\storename6
11\item6        15\storename9
15\item14       1\storename250
5\item5         1\storename15 
```

用户将使用通配符搜索商店名称，例如`storename?` 我的工作是搜索商店名称并使用符号数据生成完整的字符串。例如：

item20-storename1
item14-storename6
item14-storename9

我的做法是：

1.  逐行读取存储数据文件
2.  如果任何行包含匹配的搜索字符串（如`storename?`），我会将该行推送到中间存储结果文件
3.  我还将匹配商店名称的 itemno 复制到数组列表中（如 10,15）
4.  当这个 arraylist size%100==0 时，我将使用 hashset 删除重复的项目号，显着减小 arraylist 大小
5.  当arraylist大小> 1000

    1.  使用排序该列表`Collections.sort(itemno_arraylist)`
    2.  打开符号文件并开始逐行读取
    3.  对于每一行`Collections.binarySearch(itemno_arraylist,itmeno)`
    4.  如果匹配则将结果推送到中间符号结果文件
6.  继续步骤1，直到存储数据文件的EOF

...

在这一切之后，我将结合两个结果文件（符号结果文件和存储结果文件）来呈现实际的字符串列表。

这种方法是有效的，但它会消耗更多的 CPU 时间和主内存。

我想知道一个更好的解决方案，减少 CPU 时间（目前为 2 分钟）和内存（目前为 80MB）。Java 中有许多可用的集合类。哪一个会为这种巨大的字符串处理问题提供更有效的解决方案？

如果您对这种字符串处理问题有任何想法，那么在 Java 中也会非常有用。

注意：这两个文件的长度接近一百万行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:03:43.703

用嵌入式数据库替换这两个平面文件（有[很多](https://en.wikipedia.org/wiki/Embedded_database)，我过去使用 SQLite 和 Db4O）：问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T07:18:38.273

所以你需要替换`10\storename1`为，`item20-storename1`因为符号文件包含`10\item20`. 显而易见的解决方案是将符号文件加载到 Map 中：

```
String tokens=symbolFile.readLine().split("\\");
map.put(tokens[0], tokens[1]); 
```

然后逐行读取存储文件并替换：

```
String tokens=storelFile.readLine().split("\\");
output.println(map.get(tokens[0])+'-'+tokens[1])); 
```

这是最快的方法，但仍会为地图使用大量内存。您可以减少将地图存储在数据库中的内存，但这会显着增加时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T07:10:31.613

使用地图有什么限制吗？您可以将项目添加到地图，然后您可以轻松搜索？100 万条记录意味着 1M * 记录大小，因此不会有问题。

```
 Map<Integer,Item> itemMap= new HashMap();
   ...
   Item item= itemMap.get(store.getItemNo()); 
```

但是，最好的解决方案是使用数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T06:48:28.850

如果您的输入数据文件不经常更改，则解析文件一次，将数据放入`List`自定义类中，例如`FileStoreRecord`将您的记录映射到文件中。在您的自定义类上定义一个`equals`方法。`List`对例如搜索执行所有后续步骤，您可以`contains`通过以自定义对象的形式传递搜索字符串来调用方法`FileStoreRecord`。

如果文件在一段时间后发生变化，您可能需要`List`在特定间隔后刷新或跟踪列表创建时间并在使用前与文件更新时间戳进行比较。如果有不同，请重新创建列表。管理文件检查的另一种方法可能是让线程不断轮询文件更新，并且在文件更新的那一刻，它通知刷新列表。

# session - Asp.net 中的 Session 替代方案？

> ID：12995622
> 
> 赞同：1
> 
> 时间：2012-10-21T06:45:04.037
> 
> 标签：session, state-management

我们在应用程序中使用 Asp.net Session 进行状态管理。默认情况下，正在使用进程内模式。但是现在，我们必须寻找替代方案，因为由于性能问题，我们的客户已要求我们从应用程序中删除 Session。

一种方法是将客户端的所有内容都保存在 Postback 的隐藏字段中。这肯定不是一个好方法。

还有其他方法吗？我相信会有一个替代方案。

PS：请不要建议查询字符串。

谢谢，

苏米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:12:50.977

接近那个的东西，`HttpContext.Current.Items`但寿命更短

> HttpContext 的 Items 集合是 IDictionary 键值集合，它们在单个 HTTPRequest 中共享。是的，HttpContext.Current.Items 对单个 HTTPRequest 有效。一旦处理后，服务器信息被发送回浏览器，在 Items[] 集合中设置的变量将丢失。至于会话变量，信息对多个请求有效，因为这是用户特定的。会话变量仅在会话超时或明确清除值时过期。

更多来自这些文章

*   [当我们可以使用 HttpContext.Current.Items 在 ASP.NET 中存储数据时](http://abhijitjana.net/2011/01/14/when-we-can-use-httpcontext-current-items-to-stores-data-in-asp-net/)

# objective-c - 表视图数据加载问题

> ID：12995626
> 
> 赞同：0
> 
> 时间：2012-10-21T06:45:41.273
> 
> 标签：objective-c, ios, xcode

我对表格视图有疑问。我在表格视图单元格中放置了一个标签和开关。我默认将开关值设置为 NO。现在，当在模拟器中加载表视图时，表视图会显示带有 NO 值的开关。现在我选择开关值为YES。但是表格视图使用出列可重用单元格方法 滚动表格视图时的属性 现在每次都会重新加载对象 开关值是 NO 还是 YES？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:55:21.423

是的。滚动表格视图的另一件事是它不调用 reload 方法。如果您使用双端队列可重用单元格方法属性，它只是重用已创建的表格视图单元格。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T08:44:24.583

保证没有重复的单元格：在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
```

如下 ：

```
for(UIView *v in [cell subviews])
{
    if([v isKindOfClass:[UILabel class]] ||[v isKindOfClass:[UISwitch class]])
        [v removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T08:01:11.547

当表格视图滚动时，TableViewCells 会在必要时被销毁和创建。

当一个单元格在离开可见屏幕区域时被破坏时，作为单元格子视图的开关控件也会被破坏。

因此，当您滚动回之前设置的开关之一时，您实际上看到的是 UITableViewCell 的另一个实例，其中添加了一个开关视图，因此看起来开关值变回了 NO。

您需要的第三件事是记住每行中每个开关的值应该是什么。如果您要显示核心数据实体信息表，那么也许您可以为您的实体定义一个属性，例如“活动”。在这种情况下，每次更改开关值时，都会将核心数据实体“活动”属性设置为开关值，例如：

```
-(UITableViewCell *)tableView:(UITableView)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...

    if(cell == nil)
    {
        // set switch control tag number (don't use 0)
    }

    // get switch control by tag number

    // pseudocode
    Engine *myEngine = [arrEngine objectAtIndex:indexPath.row];

    mySwitchControl.active = myEngine.active;

    ...
}

// when you change switch value, remember to update your core data entity value
-(void)updateSwitchValue:(BOOL) newValue
{
    // update value
} 
```

否则，您可以简单地使用布尔值的 NSMutableArray 来确定每个开关的哪一行应该是 YES 或 NO：

```
// my header file (.h file)
@interface
{
    NSMutableArray *arrSwitchValues;
}

// my implementation file (.m file)
-(UITableViewCell *)tableView:(UITableView)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...

    if(cell == nil)
    {
        // set switch control tag number (don't use 0)
    }

    // get switch control by tag number

    // pseudocode
    BOOL switchVal = [arrSwitchValues objectAtIndex:indexPath.row];

    mySwitchControl.active = switchval;

    ...
}

// when you change switch value, remember to update your array
-(void)updateSwitchValue:(BOOL) newValue
{
    // update value
} 
```

希望有帮助。

# ruby-on-rails - 将 turn gem 与 Test::Unit 一起使用

> ID：12995633
> 
> 赞同：0
> 
> 时间：2012-10-21T06:46:58.807
> 
> 标签：ruby-on-rails, ruby, testunit

我在 Rails 应用程序中使用 Turn gem 来着色我的 Test::Unit 输出，并且在我的任何测试运行之前我发现以下输出：

```
stephen@x5:~/code/ruby$ rake test
gem install minitest
gem install minitest
... tests seem to run just fine, and are nicely coloured 
```

每次我运行它们时都会发生这种情况。这里有什么交易？我应该使用 minitest 而不是 Test::Unit 吗？

着色 Test::Unit 输出的最佳方法是什么？只是寻找红色和绿色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:47:38.847

`gem 'redgreen'`使用 Test::Unit 对我来说非常有用（在 Ruby 1.9.2 和 Rails 3.0.7 上）。

将以上内容添加到您的 Gemfile。

在[RubyGems](http://rubygems.org/gems/redgreen)上。

# java - 读取 mp3 二进制数据进行可视化

> ID：12995634
> 
> 赞同：7
> 
> 时间：2012-10-21T06:47:31.140
> 
> 标签：java, swing, mp3, javasound

在我之前的帖子中，我在尝试读取 mp3 文件时遇到了一点麻烦。现在我能够做到这一点，并且我希望能够使用 java swing 渲染来自 mp3 的数据。同时播放 mp3 和可视化效果会很好。

我有二进制数据（我通过管道传输到输出流），但我不知道如何解释数据。

基本上，在 LINE57 左右，我需要对字节数组做什么，以便我可以将数据解释为 db 值？

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.SourceDataLine;

public class MainSound {

    public static void main(final String [] args) throws Exception {
        System.out.println("Running");        
        System.out.println(System.getProperty("java.version"));        
        final AudioFileFormat.Type [] types = AudioSystem.getAudioFileTypes();
        for (final AudioFileFormat.Type t : types) {
            System.out.println("Returning Type : " + t);
        } // End of the for //                
        final String PATH = "C:\\Users\\bbrown\\Downloads\\swing-hacks-examples-20060109\\Ch10-Audio\\75\\soundcloud2.mp3";             
        final File file = new File(PATH);
        final AudioInputStream in = AudioSystem.getAudioInputStream(new BufferedInputStream(new FileInputStream(file)));

        AudioInputStream din = null;
        final AudioFormat baseFormat = in.getFormat();
        final AudioFormat decodedFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,
                baseFormat.getSampleRate(),
                16,
                baseFormat.getChannels(),
                baseFormat.getChannels() * 2,
                baseFormat.getSampleRate(),
                false);

        System.out.println("Channels : " + baseFormat.getChannels());                
        din = AudioSystem.getAudioInputStream(decodedFormat, in);        
        rawplay(decodedFormat, din);
        in.close();       
        System.out.println("Done");
    }    

    private static synchronized void rawplay(final AudioFormat targetFormat, final AudioInputStream din) throws IOException, LineUnavailableException {              
        final byte[] data = new byte[4096];
        final SourceDataLine line = getLine(targetFormat);               
        if (line != null) {
            System.out.println("Entering ...");
            // Start
            line.start();
            int nBytesRead = 0, nBytesWritten = 0;
            while (nBytesRead != -1) {
                nBytesRead = din.read(data, 0, data.length);
                if (nBytesRead != -1) {
                    // LINE57, HOW CAN INTERPRET this data for VISUALIZATION.
                    nBytesWritten = line.write(data, 0, nBytesRead);
                    System.out.println("... -->" + data[0] + " bytesWritten:" + nBytesWritten);
                }                                           
            } // End of while //            
            System.out.println("Done ...");
            // Stop
            line.drain();
            line.stop();
            line.close();
            din.close();
        } // End of the if //
    }

    private static synchronized SourceDataLine getLine(AudioFormat audioFormat) throws LineUnavailableException {
        SourceDataLine res = null;
        final DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);
        res = (SourceDataLine) AudioSystem.getLine(info);
        res.open(audioFormat);
        return res;
    }

} // End of the class // 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T07:39:29.080

查看[Extreme Media Player](http://xtrememp.sourceforge.net/)源代码，它是一个支持可视化的跨平台媒体播放器，当然是用 Java 编写的。

对代码的研究应该可以帮助您了解如何读取正在播放的字节数据的分贝。（我喜欢这个问题，因为我以前没有见过这个问题）。

如此处所示：

![在此处输入图像描述](../Images/633e6d79fc4b531a2d8e2a7cc4cdebf8.png)

**更新：**

遗憾的是 Java 本身并不支持 MP3 格式，但请查看此链接，该链接向我们展示了[JMF（Java 媒体框架）](http://www.oracle.com/technetwork/java/javase/download-142937.html)，它是一个用于 j2SE 的插件，可[在 JMF 的额外 MP3 插件的](http://www.oracle.com/technetwork/java/javase/download-137625.html)帮助下启用 MP3 支持。

# python - 为什么 os.path.basename() 使我的 HTPC 脚本失败？

> ID：12995635
> 
> 赞同：0
> 
> 时间：2012-10-21T06:47:58.010
> 
> 标签：python

完整脚本在这里： http: [//pastebin.com/d6isrghF](http://pastebin.com/d6isrghF)

我承认我对 Python***很***陌生，所以如果这是一个容易回答的问题，请原谅我的愚蠢。有问题的部分是这样的：

```
sourcePath = jobPath
while os.path.basename(sourcePath):
    if os.path.basename(os.path.dirname(sourcePath)).lower() == category.lower():
        break
    else:
        sourcePath = os.path.dirname(sourcePath)
if not os.path.basename(sourcePath):
    print "Error: The download path couldn't be properly determined"
    sys.exit() 
```

jobPath 正在从 sabnzbd 提供给脚本，并且是：

```
/mnt/cache/.apps/sabnzbd/complete/name.of.folder 
```

类别是：

```
tv 
```

所以我想我的问题是：为什么这会因错误而失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:56:39.103

## 为什么它不起作用

您的代码无法工作，因为`while`执行 until`os.path.basename(sourcePath)`未评估为`True`，然后`if`调用语句，该语句（因为它看起来像`if not os.path.basename(sourcePath)`：）显然被评估为`True`，因此显示消息（您的“错误”）：

## 带注释的源代码

```
sourcePath = jobPath

# This is executed until os.path.basename(sourcePath) is evaluated as true-ish:
while os.path.basename(sourcePath):
    if os.path.basename(os.path.dirname(sourcePath)).lower() == category.lower():
        break
    else:
        sourcePath = os.path.dirname(sourcePath)

# Then script skips to the remaining part, because os.path.basename(sourcePath)
# has been evaluated as false-ish (see above)

# And then it checks, whether os.path.basename(sourcePath) is false-ish (it is!)
if not os.path.basename(sourcePath):
    print "Error: The download path couldn't be properly determined"
    sys.exit() 
```

## 何时（以及为什么）它有时会起作用

它*有时*仅因为在路径中找到类别而起作用，这意味着即使仍然满足条件（关键字：之后的条件），`while`也会退出（使用）循环。因为循环中的条件仍然满足（即使满足，我们也退出了循环），不再满足下一条语句的条件（ ）并且不会打印消息（“错误”）。`break``while``os.path.basename(sourcePath)``while``not os.path.basename(sourcePath)`

## 可能的解决方案

我相信其中一个解决方案是在您的代码中添加一个计数器，只有在特定数量的迭代中您将无法找到您需要的内容时才会打印错误。您还可以尝试捕获“递归太多”异常（当然，如果您将使用递归，但错误将是这样的：）`RuntimeError: maximum recursion depth exceeded`。

但是，您应该重新设计它以满足您自己的需求。

# java - 更新语句语法错误

> ID：12995642
> 
> 赞同：2
> 
> 时间：2012-10-21T06:49:07.107
> 
> 标签：java, sql, jsp

我有以下字符串，其中包含我要执行的查询：

```
 query = "UPDATE inventario"
     + " set descripcion = '" + descripcion + "',"
     + " set bodega = '" + bodega + "'"
     + " where codigo = " + codigo; 
```

我收到一个更新语句语法错误，但我看不到错误在哪里。任何帮助表示赞赏。“描述”和“酒窖”列是文本类型列。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T06:52:32.630

嗯，这可能是因为你有多个`set`部分而不是使用逗号分隔，并且可能是因为你没有在`codigo`值周围加上引号（如果那是另一个字符串）......但我*强烈*建议你不要像这样创建 SQL无论如何，直接在 SQL 中使用值。

相反，使用准备好的语句：

```
String sql = "UPDATE inventario set descripcion=?, bodega=? where codigo=?";
PreparedStatement st = conn.prepareStatement(sql);
st.setString(1, descripcion);
st.setString(2, bodega);
st.setString(3, codigo); 
```

使用准备好的语句有三个直接的好处：

*   它避免了[SQL 注入攻击](http://bobby-tables.com)（想想如果你的描述中有引号会发生什么）
*   它将代码（SQL）与数据（值）分开
*   这意味着您避免转换日期时间等类型，在这种情况下，通过字符串表示是一个巨大的潜在错误来源

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T06:51:27.027

删除额外`SET`的查询。

```
query = "UPDATE inventario"
 + " set descripcion = '" + descripcion + "',"
 + "     bodega = '" + bodega + "'"
 + " where codigo = " + codigo; 
```

但是该查询很容易受到`SQL Injection`. 请参数化您的查询。例子，

```
String query = "UPDATE inventario" + 
               "   set descripcion = ?, bodega = ? " + 
               " where codigo = ?";
PreparedStatement prep = connection.prepareStatement(query);
prep.setString(1, descripcion);
prep.setString(2, bodega);
prep.setInt(3, codigo);
prep.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T06:51:23.090

`SET`关键字只需要一次。正在更新的多个列应以逗号分隔，如下面的语句所示。

```
query = "UPDATE inventario"
    + " set descripcion = '" + descripcion + "',"
    + "     bodega = '" + bodega + "'"
    + " where codigo = " + codigo; 
```

顺便说一句，强烈建议[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)用于此类操作，而不是像这样形成查询以避免[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

```
query = "UPDATE inventario"
    + " set descripcion = ?, bodega = ? "
    + " where codigo = ?";
PreparedStatement ps = connection.prepareStatement(query);
ps.setString(1, descripcion);
ps.setString(2, bodega);
ps.setInt(3, codigo);
int updateCount = ps.executeUpdate(); 
```

# visual-studio - 如何在 Microsoft Visual Studio 中禁用团队项目模式？

> ID：12995646
> 
> 赞同：0
> 
> 时间：2012-10-21T06:50:47.027
> 
> 标签：visual-studio

我安装了 Microsoft Visual Studio，在安装过程中我想我以某种方式勾选了 Team Project 复选框。现在我无法以任何方式创建一个正常的 ASP.NET 网站。如果有人告诉我如何解决这个问题，我将不胜感激。我也卸载并安装了七次。但没有运气。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:20:01.500

如果我对你的理解是对的。您尝试在 IDE 中为 Web 开发人员更改默认模板。

在 Visual Studio 中，您可以通过转到工具 -> 导入导出设置轻松更改 IDE 的配置文件。这将打开导入导出 Windows 向导。按照简单的向导（它还允许您保存当前设置以供将来使用）并选择新的配置文件设置（基于您正在处理的项目的类型），您就可以使用新的配置文件了。

我假设您需要选择“Web 开发”。

# shapes - （子弹物理）如何避免类似于环形的复合形状的隧道效应？

> ID：12995659
> 
> 赞同：2
> 
> 时间：2012-10-21T06:53:08.867
> 
> 标签：shapes, tunneling, bulletphysics

我有一些由四个类似于方形框架的矩形形状组成的复合形状，这个想法是将它们用作环的粗略近似

圆环绕着钉子扔，可以同时扔几个圆环，坚硬的圆环相互碰撞几次，不能像锁链一样卡住

它们由于隧道而被卡住，如下图所示

有没有办法避免由于隧道效应而产生的这种“链接”效应？

![复合环](../Images/8afd8623854cef19bb10cedc9ed96c28.png)

a) 复合体，b) 单个形状，以及 c) 顶视图

![隧道效应](../Images/4eb3009f30aa7578a60c7f5528ff900f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:08:54.163

为什么不简单地使用圆柱体或盒子作为您的环代理？你真的需要东西能够在不发生碰撞的情况下穿过环的中心吗？

一个实心盒子的体积应该仍然大致接近你的戒指，但应该更容易解决隧道问题。

# objective-c - 从 Xcode Bundle 中读取文本文件

> ID：12995661
> 
> 赞同：4
> 
> 时间：2012-10-21T06:53:21.923
> 
> 标签：objective-c, xcode, macos, file, bundle

为什么我无法读取 foo.rtf 的内容？我已经把它放在 Xcode 包中了。fileRoot 仍然包含 null。

```
NSString* filePath = @"foo";
NSString* fileRoot = [[NSBundle mainBundle] pathForResource:filePath ofType:@"rtf"];       

NSLog(@"File root contains %@", fileRoot); 
```

* * *

@TheAmateurProgrammer，谢谢你的图表。我刚刚将 foo.rtf 添加到捆绑资源中。fileRoot 的结果仍然为空。我还缺少什么步骤？

构建阶段中 Target 的“复制捆绑资源”现在包含 foo.rtf。（我不能插入图片，因为我还是个新手）。

（我会在我可以让 fileRoot 正确指向之后添加内容读取）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T07:15:10.033

您添加了文件，但它真的复制到了您的应用程序包中吗？

[![](../Images/69a04c7e8c645145247b9239967b2847.png)](https://i.stack.imgur.com/MGHin.png)

确保将您的 rtf 文件复制到您的资源中。

其次，你只得到 rtf 的路径，而不是 rtf 的内容。

```
NSString *fileRoot = [[NSBundle mainBundle] pathForResource:filePath ofType:@"rtf"]; 
NSString *contents = [[[NSAttributedString alloc] initWithRTF:[NSData dataWithContentsOfFile:fileRoot] documentAttributes:NULL] string]; 
```

这将获得 rtf 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:08:36.570

首先检查您的文件是否存在于包中，如果存在，它必须与“foo.rtf”同名。

你得到 nil 因为你的文件没有直接存在于包中。

一旦获得正确的文件路径，您就可以通过调用 NSString 类的 initWithContentsOfFile 方法将文本文件的内容作为字符串获取。

# c - Lisp s 表达式的平面求值

> ID：12995667
> 
> 赞同：4
> 
> 时间：2012-10-21T06:55:42.343
> 
> 标签：c, lisp, eval, s-expression

我试图弄清楚如何实现 Lisp 评估 **non-recursive**。我的基于 C 的评估器是[Minimal Lisp](https://github.com/eiselekd/MinimalLisp/blob/master/l1.c)文件 l1.c。然而，那里的几个函数再次递归到 eval：eval、apply、evargs、evlist 以及 Lisp Ops defineFunc、whileFunc、setqFunc、ifFunc...

我试图找出一个**平**的评价。我可以想出一些可能的方法：

1.  转换为字节码并在 VM 中执行
2.  实现一个扁平的 Forth 求值器并在 Forth 中实现 Lisp 求值，这就是[lf.f](https://github.com/eiselekd/MinimalLisp/blob/master/lf.f)所做的。
3.  另一种可能性可能是将 l1.c 中的所有递归函数加入一个大的 switch 循环中。局部变量将连接到基于堆的结构中，对递归子函数的调用将由基于堆的返回堆栈实现。

我的问题是：是否存在以不同方式进行平面评估的算法/论文/实现。我正在寻找一种不转换为字节码但类似于使用下推堆栈的无递归“深度优先遍历”的实现。我想对原始的 s 表达式进行操作。

答：在 c 中实现评估器时，您需要在一个平面循环中实现整个事物，手动实现返回堆栈和堆栈帧，使用 goto 和 switch() 对控制流进行建模。这是一个例子：[flat](https://github.com/eiselekd/MinimalLisp/blob/master/flat1.c)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:46:57.817

Lisp 的一个非常重要的方面，实际上也是随后许多函数式语言的一个重要方面，是它是*组合式*的。这意味着表达式的含义是使用其子表达式的含义来定义的——或者换句话说，求值的定义本质上是递归的。在非函数式语言中，表达式与语句之间存在一些差异，但即使存在表达式也不受某种限制，因此递归也被纳入定义。可能语言定义的递归性不那么明显的唯一情况是汇编语言。（当然，即使存在意义的定义，也需要归纳。）

因此，与某些递归定义的斗争`eval`是您将失去的东西。如果您将编译为机器代码，则该代码将是递归的（并且生成的代码也将是递归的）。如果您通过 Forth 求值器进行求值，那么该求值器仍然是递归的。即使您在另一个答案中采用 CPS 建议，您最终也只会获得另一个堆栈编码。

所以最重要的是，你能得到的最好的结果是一些不直接使用机器堆栈的堆栈编码——没有实质性的区别，但你通常会损失性能（因为 CPU 非常有效地处理*堆栈*，并且编码它在堆上的速度会变慢）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T07:37:02.330

请参阅此主题：[继续传递样式](http://en.wikipedia.org/wiki/Continuation-passing_style)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T09:06:20.173

在 C 中实现 Lisp 求值器时，C 编译器使用堆栈来生成子例程调用的控制流。要在 C 中实现无堆栈评估器，您需要使用 goto 和 switch() 手动编写控制流：

```
v *
evargs(ctx *cctx, v *l, v *env)
{
    struct v *r = 0;
    if (l) {
        r = eval(cctx, car(l),env);
        r =  mkCons(r,evargs(cctx, cdr(l),env));
    }
    return r;
} 
```

得到

```
case EVARGS_0:
    S_SET(0,0);                         /* EVARGS_0: r = 0; */ 
    if (!(v=S(2)))                      /* if (l) */
        goto ret;
    RCALL_EVAL(EVARGS_1, car(v));       /* r = < eval(cctx, car(l),env); > */
    break;    
case EVARGS_1:
    S_SET(3,S(1));                      /* EVARGS_1: < r = ... > */
    RCALL_EVARGS(EVARGS_2, cdr(S(2)));  /*  r =  mkCons(r, < evargs(cctx, cdr(l),env) > ); */
    break;
case EVARGS_2:
    S_SET(0,mkCons(S(3),S(1)));         /* EVARGS_2: < r =  mkCons(r,  evargs(cctx, cdr(l),env)  ); > */
    goto ret; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T08:06:36.927

我认为您可能缺少的关键见解是，在 lisp 解释器中，最小的函数集被实现为非递归的原语。原语的确切集合各不相同，但包括 cons、car、cdr 和 apply 的“最原始”版本，它执行这些实际功能之一，而不是其自身的解释版本。

你应该查阅 John McCarthy 的原始论文和/或 John Allen 的 Lisp 1.5

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T12:59:35.980

我记得有一本关于 HOPE 编程语言的书。它是一种类似于 ML 的函数式语言。它对其编译器进行了全面的概念描述，并总体上对函数式语言编译器进行了思考。它提出的一个观察结果是关于 Y-combinator 的争论。作者建议处理递归函数的一种可能方法是实现 Y-combinator 并将每个递归函数转换为可以使用 Y-combinator 进行递归的非递归函数。

这将是一种类似的`if`特殊形式的技巧，它提供（通常就足够了）人们在一种语言中可能需要的各种惰性求值。以类似的方式，您可以限制所有函数递归，但引入一个`Y`允许递归开始的特殊函数。

# android - 尝试从流中播放时出现 MediaPlayer 错误

> ID：12995668
> 
> 赞同：0
> 
> 时间：2012-10-21T06:55:45.527
> 
> 标签：android, android-mediaplayer

有谁知道MediaPlayer 中这个错误**（1，-2147483648）的第二个参数是什么意思？**尝试从 url 流播放音频时，我不断收到它。如果这很重要，我会尝试从扩展 BaseExpandableListAdapter 的类中播放它。我已经查看了这篇文章[Android MediaPlayer error: MediaPlayer error(1, -2147483648) on Stream from internet](https://stackoverflow.com/questions/10795388/android-mediaplayer-error-mediaplayer-error1-2147483648-on-stream-from-inte)但是所有答案都涉及流支持问题。在我的情况下，这不是流支持问题，因为我能够播放来自同一流的音频，但只是使用不同的类。这是我用来玩的一种方法：

```
private void startPlaying(String fileName) {
    mediaPlayer = new MediaPlayer();

    try {
        if (fileInputStream != null) {  // Read a file from a fileInputStream from a filesystem (EXTERNAL OR INTERNAL storage)
            mediaPlayer.setDataSource(fileInputStream.getFD());
            Log.d("MediaPlayer is playing", "from device");

        } else {
    //      mediaPlayer = new MediaPlayer();
            mediaPlayer.setDataSource(getFilePath());   // Read a file from a url
            Log.d("MediaPlayer is playing", "from stream");             
        }
        mediaPlayer.prepare();
        mediaPlayer.start();
        mediaPlayer.setOnCompletionListener(new CompletionListener());

    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:16:13.053

在这种情况下，错误通常是其中之一：

1.  文件路径错误。找到不正确的目录或 Url 或 Uri。
2.  媒体文件有误，格式不兼容。
3.  缺少权限

这是一个很好的博客，概述了这些情况以及如何解决它们：

[http://www.weston-fl.com/blog/?p=2988](http://www.weston-fl.com/blog/?p=2988)

另请参阅此线程：

[Android 媒体播放器 MediaPlayer(658): 错误 (1, -2147483648)](https://stackoverflow.com/questions/8236095/android-mediaplayer-mediaplayer658-error-1-2147483648?rq=1)

# javascript - 如何删除 页面上的所有标签

> ID：12995670
> 
> 赞同：1
> 
> 时间：2012-10-21T06:55:50.013
> 
> 标签：javascript, google-chrome, google-chrome-extension, wbr

我正在尝试为 youtube 评论制作 chrome 扩展，但是当我添加一些东西时，它会不断添加

```
<wbr></wbr> 
```

标签，有什么办法可以在javascript中删除页面上的所有这些标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T06:59:14.453

最简单的方法是：

```
var wbrs = document.getElementsByTagName('wbr');

while (wbrs.length) {
    wbrs[0].parentNode.removeChild(wbrs[0]);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Awsfn/)。

# virtual-printer - 如何在 C# 中模拟打印机

> ID：12995671
> 
> 赞同：0
> 
> 时间：2012-10-21T06:55:51.630
> 
> 标签：virtual-printer

我正在创建一个可以与打印机一起使用的 C# 应用程序。我没有打印机，我需要调试应用程序。

关于如何实现这一目标有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:58:42.733

您可以使用[PDFCreator](http://sourceforge.net/projects/pdfcreator/)，它提供了一个输出 PDF 和其他一些格式的虚拟打印机。它应该支持物理 USB/网络打印机的大部分功能，以便您可以有效地调试您的应用程序。

虽然我怀疑这个问题与 C# 有什么关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T06:58:59.040

也许您应该安装一个虚拟打印机，例如 PDFCreator。

见[http://sourceforge.net/projects/pdfcreator/](http://sourceforge.net/projects/pdfcreator/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T07:02:18.993

使用[DoPDF](http://www.dopdf.com/)，安装此免费应用程序后，您可以在“设备和打印机”上找到您的打印机，它会将您的文档打印成 PDF 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T07:06:58.723

除了“使用 PDF 打印机驱动程序”的答案之外，Windows Vista/7/8 都附带了“Microsoft XPS Document Writer”。XPS 基本上是一种基于 XML 的 PDF 样式格式，应该足以测试您的应用程序。

# c# - 放大后如何提高翻译速度？

> ID：12995673
> 
> 赞同：0
> 
> 时间：2012-10-21T06:55:57.710
> 
> 标签：c#, winforms, graphics, user-controls

我有一个可以放大和缩小以及平移的控件。通过点击两个按钮的选择，用户可以分别放大或缩小。我的问题是放大或缩小后的翻译：如果我缩小到大约 0.2F，我必须多次点击平移才能移动我在基数 0 处可能拥有的相同距离。我似乎通过划分缩放解决了这个问题通过它的自平方：z/(z*z) 但这似乎改变了整个矩阵——而且我没有在任何线上用这个来转换矩阵！

这是我的代码：

```
Matrix mtrx = new Matrix();
mtrx.Translate(pan.X, pan.Y);
mtrx.Scale(zoom, zoom);
e.Graphics.Transform = mtrx;

// To-Do drawing code here 
```

基本注意事项：

*   按钮单击事件时缩放增加和减少 .12F
*   正在绘制的控件是继承的 UserControl 类
*   开发环境为 C# 2010
*   绘图代码处理两个位置为 {0, 0} 的矩形
*   当我放大或缩小某种方式时，我只想能够以与基数 0（未放大或缩小）相同的速度平移。〜没有运动滞后的感觉

编辑：我已经将上面的代码更新为我之前处理的改进版本。这会处理缩放后的平移速度，但新问题是缩放发生的位置：好像缩放点也在被平移......

编辑：我将如何在 3D（XNA）中做到这一点：

```
public class Camera
{
    private float timeLapse = 0.0f;
    private Vector3 position, view, up;

    public Camera(Vector2 windowSize)
    {
        viewMatrix = Matrix.CreateLookAt(this.position, this.view, this.up);
        projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.Pi / 4.0f,
                           (float)windowSize.X / (float)windowSize.Y, 0.005f, 1000.0f);
    }
    //Sets time lapse between frames
    public void SetFrameInterval(GameTime gameTime)
    {
        timeLapse = (float)gameTime.ElapsedGameTime.Milliseconds;
    }

    //Move camera and view position according to gamer's move and strafe events.
    private void zoomHelper(Vector3 direction, float speed)
    {
        speed *= (float)timeLapse; // scale rate of change
        direction *= speed;
        position.Y += direction.Y;
        position.X += direction.X;      // adjust position 
        position.Z += direction.Z;
        view.Y += direction.Y;
        view.X += direction.X;      // adjust view change
        view.Z += direction.Z;
    }
    //Allows the camera to move forward or backward in the direction it is looking.
    public void Zoom(float amount)
    {
        Vector3 look = new Vector3(0.0f, 0.0f, 0.0f);
        Vector3 unitLook;
        // scale rate of change in movement
        const float SCALE = 0.005f;
        amount *= SCALE;
        // update forward direction
        look = view - position;
        // get new camera direction vector 
        unitLook = Vector3.Normalize(look);
        // update camera position and view position
        zoomHelper(unitLook, amount);
        viewMatrix = Matrix.CreateLookAt(position, view, up);
    }

    //Allows the camera to pan on a 2D plane in 3D space.
    public void Pan(Vector2 mouseCoords)
    {
        // The 2D pan translation vector in screen space
        Vector2 scaledMouse = (mouseCoords * 0.005f) * (float)timeLapse;
        // The camera's look vector
        Vector3 look = view - position;
        // The pan coordinate system basis vectors
        Vector3 Right = Vector3.Normalize(Vector3.Cross(look, up));
        Vector3 Up = Vector3.Normalize(Vector3.Cross(Right, look));
        // The 3D pan translation vector in world space
        Vector3 Pan = scaledMouse.X * Right + -scaledMouse.Y * Up;
        // Translate the camera and the target by the pan vector
        position += Pan;
        view += Pan;
        viewMatrix = Matrix.CreateLookAt(position, view, up);
    }
} 
```

像这样使用：

```
Camera cam; // object
effect.Transform = cam.viewMatrix * cam.projectionMatrix;
// ToDo: Drawing Code Here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:28:11.970

尝试这个：

```
Matrix mtrx = new Matrix();  
mtrx.Scale(zoom, zoom);  
mtrx.Translate(pan.X/zoom, pan.Y/zoom, MatrixOrder.Append);   
e.Graphics.Transform = mtrx;  
// To-Do drawing code here 
```

# mfc - MFC，自动创建超链接

> ID：12995675
> 
> 赞同：0
> 
> 时间：2012-10-21T06:56:18.413
> 
> 标签：mfc

我正在使用 MFC 构建一个 textEdit 应用程序。有没有办法在用户写网址时自动创建超链接？这就像当你写一个网址“www.google.com”时，应用程序会检测到网址并立即创建一个超链接。我已经搜索了解释这一点的文档，但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:01:05.387

您可能想要使用[CRichEditCtrl](http://msdn.microsoft.com/en-us/library/76a787xf%28v=vs.80%29.aspx)，它使用 RTF 规范来进行富文本突出显示。这可以包括下划线和颜色，您可以使用它们来创建超链接。有关详细信息，请参阅[超链接的 RTF 语法。](https://stackoverflow.com/questions/2850575/what-is-the-rtf-syntax-for-a-hyperlink)

我认为您仍然必须检测单击该超链接，但这可能是一个单独的问题。

请注意，Jake，MFC 有点过时的 UI 框架。如果您知道自己在做什么以及为什么需要使用它，那很好，但如果您刚刚进入 UI 编程，我建议您使用更现代的东西，例如 WPF 或任何基于 XAML 的衍生产品。

# web-services - 无需人工干预即可读取和写入 Dropbox 帐户

> ID：12995677
> 
> 赞同：0
> 
> 时间：2012-10-21T06:56:26.573
> 
> 标签：web-services, oauth, dropbox-api

我需要使用 Dropbox 作为服务器存储。为此，我需要我的网络应用程序只与（我的服务器的）一个保管箱帐户对话并绕过 Oauth。有没有什么方法可以让我在没有任何手动干预（如身份验证）的情况下读写 Dropbox。我只需要读取和写入单个保管箱帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:28:25.640

处理一次 OAuth 流并保存生成的访问令牌以供将来使用。获得授权访问令牌后，您可以进行 API 调用，而无需用户进一步干预。

# python - Python数组奇怪的行为

> ID：12995679
> 
> 赞同：4
> 
> 时间：2012-10-21T06:56:40.113
> 
> 标签：python

> **可能重复：**
> [python中列表的奇怪行为](https://stackoverflow.com/questions/10191749/strange-behavior-of-lists-in-python)

我正在尝试初始化一个 6 x 6 的无 2D 数组。这是我所做的：

```
arr = [[None]*6]*6 
```

然后我尝试插入一些值，如下所示：

```
arr[2][0] = arr[2][1] = 0 
```

它不是将 (2,0) 和 (2,1) 的值更改为 0 并保持数组的其余部分为无，而是将所有列 0 和 1 更改为 0。

完整示例：

```
>>> arr = [[None]*6]*6
>>> arr
[[None, None, None, None, None, None], [None, None, None, None, None, None], [None, None, None, None, None, None], [None, None, None, None, None, None], [None, None, None, None, None, None], [None, None, None, None, None, None]]

>>> arr[2][0] = arr[2][1] = 0
>>> arr
[[0, 0, None, None, None, None], [0, 0, None, None, None, None], [0, 0, None, None, None, None], [0, 0, None, None, None, None], [0, 0, None, None, None, None], [0, 0, None, None, None, None]] 
```

为什么会发生这种情况，我该如何预防？

ps我使用“奇怪的行为”这个词对我来说很奇怪，而不是python搞砸了:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:01:11.973

您正在创建一个包含 6 个对原始 6 元素数组的引用的数组，但您需要有 6 个不同的数组。

尝试

```
[[None]*6 for i in range(6)] 
```

这将创建 6 个不同的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T07:00:48.713

当您说 时`[None]*6`，将创建一个包含六个`None`值的列表。当你将它乘以 时*，*你得到的就是*同一个*列表`6`的六个副本。所以修改一行也会以同样的方式修改所有其他行。

 *您可以通过执行此操作来解决此问题（或查看[此问题](https://stackoverflow.com/questions/2397141/how-to-initialize-a-two-dimensional-array-in-python)以获取替代方案）：

```
arr = [[None]*6 for i in xrange(6)] 
```*

# javascript - 重定向脚本

> ID：12995681
> 
> 赞同：1
> 
> 时间：2012-10-21T06:57:30.877
> 
> 标签：javascript, jquery, redirect

目前，我在 x 秒后将用户重定向到另一个页面，但我想要做的是，在 y 秒后重定向用户，计时器只会在用户点击我页面上的链接后启动，目前计时器仅在用户之后启动访问我的页面。

这是我在谷歌搜索中找到的代码 -

* * *

```
<head>
<script>
function js_wait()
{
setTimeout (js_go(), 3000); // 3000 ms = 3 secs
}
function js_go()
{
window.location = "mynexpage.php";
}
</script>
</head>
<body>
<a href="" onclick="js_wait(); return false;">My link</a>
</body> 
```

*   正文显示链接
*   单击时，它调用 javascript 函数“js_wait”
*   js_wait 启动一个定时器 x 秒，然后调用 js_go
*   js_go 重定向到页面。

* * *

我能够让它重定向 onclick 但它在单击链接后立即重定向，但我希望它在重定向之前等待 y 秒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T07:00:32.573

不要激活该方法，而是像这样传递函数签名：

```
<head>
<script>
function js_wait()
{
setTimeout (js_go, 3000); // 3000 ms = 3 secs
}
function js_go()
{
window.location = "mynexpage.php";
}
</script>
</head>
<body>
<a href="" onclick="js_wait(); return false;">My link</a>
</body> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T06:59:53.907

`()`从 setTimeout 函数参数中删除。

```
setTimeout (js_go, 3000); // 3000 ms = 3 secs 
```

如果你有它，这意味着你传递函数调用的结果而不是函数引用。

* * *

作为背景信息，setTimeout 可以以两种不同的方式使用：要么传递一个函数引用，就像你所做的那样，要么传递一个字符串，它将在 setTimeout 触发的时间进行评估。这意味着如果您想将一些参数传递给 setTimeout，您可以将它们作为字符串传递（如`setTimeout('js_go("http://google.fi")', 3000)`）或将它们包装到一个函数中，这是首选方式（`setTimeout(function() {js_go("http://google.fi")}, 3000)`）。

但是，由于您在这里不使用参数，您应该只传递函数引用，如上面的代码块所示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T07:00:18.617

请尝试这个更简单：**工作演示** [http://jsfiddle.net/FE4cT/](http://jsfiddle.net/FE4cT/)

对于重定向，这是关键：`window.parent.location`

休息，我希望它会满足你的需要`:)`

**代码**

```
function js_wait() {
    setTimeout(function() {
        window.parent.location = "http://www.google.com";
    }, 3000);

}​ 
```

*样本*

```
 window.setTimeout(function() {
        window.location.href = 'http://www.google.com';
    }, 3000); 
```

即在您的具体情况下：

```
 window.setTimeout(function() {
            window.location = 'mynexpage.php';
        }, 3000); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T07:04:38.630

简单地写成：

```
 function js_wait_redirect() {
      setTimeout(
           function(){
              window.location = "mynexpage.php";
           }
           , 3000); // 3000 ms = 3 secs
    } 
```

# r - 有什么方法可以使散点图中的绘图点在 R 中更加透明？

> ID：12995683
> 
> 赞同：76
> 
> 时间：2012-10-21T06:58:04.250
> 
> 标签：r, plot, ggplot2, alpha

我有一个 3 列矩阵；绘图由基于第 1 列和第 2 列值的点绘制，但基于第 2 列（6 个不同组）着色。我可以成功绘制所有点，但是，分配为紫色的最后一个绘图组（第 6 组）掩盖了其他组的绘图。有没有办法让情节点更透明？

```
s <- read.table("/.../parse-output.txt", sep="\t") 
dim(s) 
[1] 67124     3
x <- s[,1] 
y <- s[,2]
z <- s[,3] 
cols <- cut(z, 6, labels = c("pink", "red", "yellow", "blue", "green", "purple"))
plot(x, y, main= "Fragment recruitment plot - FR-HIT", ylab = "Percent identity", xlab = "Base pair position", col = as.character(cols), pch=16) 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-10-21T08:18:26.677

否则，您`alpha`在包`scales`中有功能，您可以在其中直接输入颜色矢量（即使它们是您示例中的因素）：

```
library(scales)
cols <- cut(z, 6, labels = c("pink", "red", "yellow", "blue", "green", "purple"))
plot(x, y, main= "Fragment recruitment plot - FR-HIT", 
     ylab = "Percent identity", xlab = "Base pair position", 
     col = alpha(cols, 0.4), pch=16) 
# For an alpha of 0.4, i. e. an opacity of 40%. 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-21T07:15:43.990

创建颜色时，您可以使用`rgb`并设置其`alpha`参数：

```
plot(1:10, col = rgb(red = 1, green = 0, blue = 0, alpha = 0.5),
     pch = 16, cex = 4)
points((1:10) + 0.4, col = rgb(red = 0, green = 0, blue = 1, alpha = 0.5),
       pch = 16, cex = 4) 
```

[![在此处输入图像描述](../Images/a72f2881d07ef4a439e52b740e757dfe.png)](https://i.stack.imgur.com/PLAEU.png)

详情请参阅`?rgb`。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-21T08:21:52.887

透明度也可以在颜色参数中编码。它只是另外两个十六进制数字，编码介于 0（完全透明）和 255（完全可见）之间的透明度。我曾经写过这个函数来为颜色向量添加透明度，也许它在这里有用？

```
addTrans <- function(color,trans)
{
  # This function adds transparancy to a color.
  # Define transparancy with an integer between 0 and 255
  # 0 being fully transparant and 255 being fully visable
  # Works with either color and trans a vector of equal length,
  # or one of the two of length 1.

  if (length(color)!=length(trans)&!any(c(length(color),length(trans))==1)) stop("Vector lengths not correct")
  if (length(color)==1 & length(trans)>1) color <- rep(color,length(trans))
  if (length(trans)==1 & length(color)>1) trans <- rep(trans,length(color))

  num2hex <- function(x)
  {
    hex <- unlist(strsplit("0123456789ABCDEF",split=""))
    return(paste(hex[(x-x%%16)/16+1],hex[x%%16+1],sep=""))
  }
  rgb <- rbind(col2rgb(color),trans)
  res <- paste("#",apply(apply(rgb,2,num2hex),2,paste,collapse=""),sep="")
  return(res)
} 
```

一些例子：

```
cols <- sample(c("red","green","pink"),100,TRUE)

# Fully visable:
plot(rnorm(100),rnorm(100),col=cols,pch=16,cex=4)

# Somewhat transparant:
plot(rnorm(100),rnorm(100),col=addTrans(cols,200),pch=16,cex=4)

# Very transparant:
plot(rnorm(100),rnorm(100),col=addTrans(cols,100),pch=16,cex=4) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-09-14T04:18:34.933

如果您使用的是十六进制代码，您可以在代码末尾再添加两位数字来表示 Alpha 通道：

例如半透明红色：

```
plot(1:100, main="Example of Plot With Transparency")
lines(1:100 + sin(1:100*2*pi/(20)), col='#FF000088', lwd=4)
mtext("use `col='#FF000088'` for the lines() function") 
```

[![具有透明度的颜色示例图](../Images/34c235db2cc08648f96a76e1b9a7588d.png)](https://i.stack.imgur.com/DjYGy.png)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-10-21T07:44:30.053

如果您决定使用`ggplot2`，您可以使用参数设置重叠点的透明度`alpha`。

例如

```
library(ggplot2)
ggplot(diamonds, aes(carat, price)) + geom_point(alpha = 1/40) 
```

# javascript - setInterval 重新加载页面谷歌浏览器扩展

> ID：12995696
> 
> 赞同：0
> 
> 时间：2012-10-21T07:00:04.340
> 
> 标签：javascript, google-chrome-extension

我有代码背景js：

```
chrome.contextMenus.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(null, {
        code: "setInterval(function(){alert('test')}, 2000)"
    });
});

var id = chrome.contextMenus.create({
    "title": "Auto Refresh",
    "contexts": ["page"]
});​ 
```

它工作，每 2 秒它有一个警告框“测试”；

但是我用 location.reload 替换了 alert('test')：

```
chrome.contextMenus.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(null, {
        code: "setInterval(function(){location.reload()}, 2000)"
    });
});

var id = chrome.contextMenus.create({
    "title": "Auto Refresh",
    "contexts": ["page"]
});​ 
```

第一次只有1次刷新，不会继续刷新。请帮助我，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:04:33.867

当一个页面被刷新时，`setInterval`句柄就会消失，所以它不会像你预期的那样工作。

一个解决方案是`setInterval`在你的扩展中做：

```
chrome.contextMenus.onClicked.addListener(function(tab) {
    setInterval(function() {
        chrome.tabs.executeScript(tab.id, {
            code: "location.reload()"
        });
    }, 2000);
});

var id = chrome.contextMenus.create({
    "title": "Auto Refresh",
    "contexts": ["page"]
});​ 
```

由于我承认您只想刷新当前页面，因此我将其添加`tab.index`为第一个参数，`chrome.tabs.executeScript`以便仅刷新当前页面。

**请注意，**用户可能会多次选择该选项，因此您可能需要检查是否是这种情况或删除上下文菜单项。Also when the tab is closed you will need to call `clearInterval`, or else you will cause a lot of problems. 这些留给你练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:23:44.693

@阿尔文，

根据您的回答，我找到了解决方案：

```
chrome.contextMenus.onClicked.addListener(function(tab) {
    var tabID;
    chrome.tabs.getSelected(null, function(tab) {
        tabID = tab.id;
    });
    setInterval(function() {
        chrome.tabs.executeScript(tabID, {
            code: "location.reload()"
        });
    }, 2000);
});
var id = chrome.contextMenus.create({
    "title": "Auto Refresh",
    "contexts": ["page"]
}); 
```

我添加了 chrome.tabs.getSelected 来保存 tab.id，这个解决方案让我很满意：D

# java - 如何在 jboss 服务器中部署 spring mvc 应用程序？

> ID：12995697
> 
> 赞同：0
> 
> 时间：2012-10-21T07:00:10.217
> 
> 标签：java, spring, model-view-controller, jboss

我正在使用 JBoss 应用程序服务器实现 Spring MVC 应用程序。在 JBoss 服务器启动期间运行应用程序时出现以下异常。因为它在 Tomcat 中运行良好。

谁能给我一些建议。我正在使用 Eclipse IDE。

```
加载时出现意外错误：com.ibm.icu.impl.data.LocaleElements_zh__PINYIN: java.lang.ClassFormatError: Unknown constant tag 60 in class file com/ibm/icu/impl/data/LocaleElements_zh__PINYIN

向类 org.springframework.web.context.ContextLoaderListener 的侦听器实例发送上下文初始化事件的异常：org.springframework.beans.factory.BeanDefinitionStoreException：从 ServletContext 资源 [/WEB-INF/dispatcher-servlet.xml] 解析 XML 文档时出现意外异常; 嵌套异常是 java.lang.NoClassDefFoundError: org/jboss/virtual/VirtualFileVisitor

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T07:22:14.713

你可以参考这篇文章，我跟着这个，似乎异常不再存在 [Javassist failure in hibernate: invalid constant type: 60](https://stackoverflow.com/questions/3026956/javassist-failure-in-hibernate-invalid-constant-type-60)

# objective-c - 使用 UITableView 和 Conditional 时字体颜色设置不正确

> ID：12995705
> 
> 赞同：0
> 
> 时间：2012-10-21T07:00:52.613
> 
> 标签：objective-c, ios, cocoa-touch, tableview

我有一个 UITableView 设置了一个核心数据获取结果控制器和使用情节提要创建的自定义单元格。一切正常，直到我尝试有条件地为某些单元格设置 UILabel 的字体颜色。

在情节提要中，默认情况下，每个单元格都以灰色字体显示“出发时间”。但是，如果单元格代表用户的当前位置，则字体应该是蓝色的。所以我在 configureCell 中设置了一个条件（靠近这个片段的底部）：

```
-(void) configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    if ([cell isMemberOfClass:[SectionDividerCell class]])  {
        [self configureSectionDividerCell:(SectionDividerCell *)cell atIndexPath:indexPath];
    }
    else if ([cell isMemberOfClass:[VisitCell class]])  {
        [self configureVisitCell:(VisitCell *)cell atIndexPath:indexPath];
    }
}

-(void) configureVisitCell:(VisitCell *)cell atIndexPath:(NSIndexPath *)indexPath  {
    //Regular visit cell

    Visit *visit = [self.fetchedResultsController objectAtIndexPath:indexPath];

    //Set text content
    cell.titlePlace.text = visit.place_name;
    cell.arriveText.text = [visit getArrivalTimeDisplay:@"hh:mm a"];
    cell.leaveText.text = [visit getDepartureTimeDisplay:@"hh:mm a"];
    cell.durationText.text = visit.durationDisplay;

    //Set fonts
    [cell.durationText setFont:[UIFont fontWithName:@"Roboto-BoldCondensed" size:20.0]];
    [cell.arriveText setFont:[UIFont fontWithName:@"Roboto-Light" size:12.0]];
    [cell.titlePlace setFont:[UIFont fontWithName:@"Roboto-BoldCondensed" size:17.0]];

    //If current location, make text blue
    if (!visit.departure_time)    {
        [cell.leaveText setFont:[UIFont fontWithName:@"Roboto-Bold" size:12.0]];
        [cell.leaveText setTextColor:[UIColor blueColor]];
    }
    else    {
        [cell.leaveText setFont:[UIFont fontWithName:@"Roboto-Light" size:12.0]];

    }

    //Get Image for cell
    if (!cell.imgThumb.image)   {

        NSString *imageURL = [[docDir stringByAppendingString:@"/"] stringByAppendingString:visit.place.imageName];
        [cell.imgThumb setImage:[[UIImage alloc] initWithContentsOfFile:imageURL]];
    }

} 
```

使用上面的代码，“当前位置”单元格的 UILabel 是正确的蓝色，但其他一些单元格也是蓝色的（似乎是随机的 - 发生在大约 10% 的单元格中。

如果我在 else 语句中添加此代码以将不是当前位置的单元格的颜色设置回默认值，则可以解决问题： [cell.leaveText setTextColor:[UIColor grayColor]];

但我不明白的是，为什么有些单元格的字体颜色设置不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:10:00.317

> 为什么某些单元格的字体颜色设置不正确？

这不是不正确的。

> 如果我在 else 语句中添加此代码以将不是当前位置的单元格的颜色设置回默认值，则可以解决问题：`[cell.leaveText setTextColor:[UIColor greyColor]];`

对，就是这样。那是因为 UITableView 为了减少内存占用，重用了表格视图单元格。而且当一个单元格被重用时， UITableView 不会重置它的属性，所以**你**必须将它们重置为默认值。你也可以在我的一些代码中看到这种模式，例如，[这个文件浏览器 UITableView](https://github.com/H2CO3/Fridge/blob/master/FileBrowserViewController.m)使用浅蓝色显示符号链接，但普通文件使用默认黑色。这里还可以看到`else`条件语句的分支。

```
// test for symlink
if (readlink([childPath UTF8String], NULL, 0) != -1) {
    cell.textLabel.textColor = [UIColor colorWithRed:0.1f green:0.3f blue:1.0f alpha:1.0f];
} else {
    cell.textLabel.textColor = [UIColor blackColor];
} 
```

# symfony - Symfony 2.1 FOSUser 翻译错误信息

> ID：12995712
> 
> 赞同：0
> 
> 时间：2012-10-21T07:02:06.163
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我正在使用以下代码来获取表单中的所有错误：

```
 // get all the errors in the form in an array
  public static function getErrorMessages(\Symfony\Component\Form\Form $form) {
    $errors = array();

    // actual errors
    foreach ($form->getErrors() as $key => $error) {
        $errors[] = $error->getMessage();
    }

    // find children that are not valid
    if ($form->count()>0) {
        foreach ($form->all() as $child) {
            if (!$child->isValid()) { 
                $errors[$child->getName()] = formHelper::getErrorMessages($child);
            }
        }
    } 
```

这样可行。唯一的问题是 FOSUser：我已经定义了我的验证组并且错误没有得到翻译。我没有得到“密码太短”，而是得到“fos_user.password.short”。问题在于这一行：

```
$errors[] = $error->getMessage(); 
```

这不会翻译错误。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:58:42.610

您应该使用翻译服务来翻译消息试试这个：

```
public function getFormErrorsAssoc(FormInterface $form) {
    $errors = array();                                                                                                                                   
    /* @var \Symfony\Component\Form\FormError $error*/                                                                                                   
    foreach ($form->getErrors() as $key => $error) {                                                                                                     
        $message = $this->translator->trans($error->getMessageTemplate(), $error->getMessageParameters(), 'validators');
        if ($message) {
            $errors[$key] = $message;
        }
    }
    if ($form->hasChildren()) {
        /* @var FormInterface $child*/
        foreach ($form->getChildren() as $child) {
            $label = $child->getAttribute('label') ? : $child->getName();
            if (!$child->isValid()) {
                $errors[$label] = $this->getFormErrorsAssoc($child);
            }
        }
    }

    return $errors;
} 
```

# javascript - Javascript 定时下载

> ID：12995724
> 
> 赞同：0
> 
> 时间：2012-10-21T07:04:27.893
> 
> 标签：javascript, html

所以我正在尝试使用脚本来为我的网站上的下载计时，并且我在更改计时器为 0 时的功能时遇到了麻烦。这是代码：

```
 else{ 
        //After the counter download the file and end the timer 
        document.getElementById("time").innerText = "Now"; 
        download(); 
        return; 
    } 
```

现在而不是说“现在”并使用“下载（）”自动下载；我如何让它显示一个超链接而不是“现在”？非常感谢所有帮助。提前致谢！-马特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:07:18.087

不太清楚你在问什么，但这里有......

```
var link = "http://link_to_download";     
document.getElementById("time").innerHTML = "<a href = " + link + ">Now</a>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T07:08:31.520

您可以创建一个新`a`元素，并将其`onclick`事件设置为您的下载函数：

```
var link = document.createElement("a");
link.onclick = download;
link.innerHTML = "Download";
link.href = "#";

var img = document.createElement("img");
img.src = "images/site_logo.gif";
img.height = 54;
img.onmouseover = function() { this.src = 'images/logo.png'; };
img.onmouseout = function() { this.src = 'images/site_logo.gif'; };
link.appendChild(img);

document.getElementById("time").appendChild(link); 
```

*   演示：http: [//jsfiddle.net/D5qr7/2/](http://jsfiddle.net/D5qr7/2/)
*   带图片：http: [//jsfiddle.net/D5qr7/4/](http://jsfiddle.net/D5qr7/4/)

# android - 从核心数据转换为 SQLite

> ID：12995729
> 
> 赞同：0
> 
> 时间：2012-10-21T07:05:19.233
> 
> 标签：android, sqlite, core-data

我有一个已经存在的数据库，它是用 Core Data 为我正在尝试跨平台的 iPhone 应用程序编写的。

有没有办法将 Core Data 导出或转换为 SQLite？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:35:26.773

我自己没有尝试过，但这些链接可能会有所帮助：

[http://coderslike.us/2009/06/11/how-to-find-that-sqlite-file-behind-your-coredata/](http://coderslike.us/2009/06/11/how-to-find-that-sqlite-file-behind-your-coredata/)

[http://uncorkedstudios.com/2011/05/16/locating-core-datas-sqlite-database/](http://uncorkedstudios.com/2011/05/16/locating-core-datas-sqlite-database/)

[XCode4 - 在哪里寻找由核心数据创建的 sqlite 文件](https://stackoverflow.com/questions/6507395/xcode4-where-to-look-for-sqlite-file-created-by-core-data)

[核心数据会自动创建 SQLite 数据库文件吗？](https://stackoverflow.com/questions/9901694/does-core-data-create-a-sqlite-database-file-automatically?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:59:44.317

最终使用外部 ORM 并在我的应用程序上创建了我自己的数据库版本。

# c - Prim 的 MST 算法，C 中的邻接表实现

> ID：12995730
> 
> 赞同：6
> 
> 时间：2012-10-21T07:05:25.233
> 
> 标签：c, list, graph, graph-algorithm, prims-algorithm

我在过去一天一直在努力完成的编程课上遇到了这个问题……而且我真的不知道该怎么做。

我了解 Prim 算法的基本概念：

```
1\. Start at an arbitrary node (the first node will do) and 
add all of its links onto a list.  

2\. Add the smallest link (which doesn't duplicate an existing path) 
in the MST, to the    Minimum Spanning Tree.  
Remove this link from the list.  

3\. Add all of the links from the newly linked node onto the list

4\. repeat steps 2 & 3 until MST is achieved 
(there are no nodes left unconnected). 
```

我已经获得了一个 Graph 的实现（使用邻接列表）来实现 Prim 的算法。问题是我不太了解实现。到目前为止，我对实现的理解如下：

作为一个邻接列表，我们有数组形式的所有节点： 链接到它的是一个链接列表，包含权重、目的地和指向特定节点其余链接的指针的详细信息：

看起来有点像这样的东西：

```
[0] -> [weight = 1][Destination = 3] -> [weight = 6][Destination = 4][NULL]
[1] -> [weight = 4][Destination = 3][NULL]
and so on... 
```

我们还有一个“Edge”结构，我认为它应该使实现变得更简单，但我并没有真正看到它。

这是给出的代码：

GRAPH.h 界面：

```
typedef struct { 
  int v; 
  int w; 
  int weight;
} Edge;

Edge EDGE (int, int, int);

typedef struct graph *Graph;

Graph GRAPHinit (int);
 void GRAPHinsertE (Graph, Edge);
 void GRAPHremoveE (Graph, Edge);
  int GRAPHedges (Edge [], Graph g);
Graph GRAPHcopy (Graph);
 void GRAPHdestroy (Graph);
int GRAPHedgeScan (Edge *);
void GRAPHEdgePrint (Edge);
int GRAPHsearch (Graph, int[]);
Graph GRAPHmst (Graph);
Graph GRAPHmstPrim (Graph);

#define maxV 8 
```

GRAPH.c 实现：

```
 #include <stdlib.h>
#include <stdio.h>
#include "GRAPH.h"

#define exch(A, B) { Edge t = A; A = B; B = t; } 
#define max(A,B)(A>B?A:B)
#define min(A,B)(A<B?A:B)

typedef struct node *link;
struct node { 
  int v; 
  int weight;
  link next; 
};

struct graph { 
  int V; 
  int E; 
  link *adj; 
};

static void sortEdges (Edge *edges, int noOfEdges);
static void updateConnectedComponent (Graph g, int from, int to, int newVal, int *connectedComponent);

Edge EDGE (int v, int w, int weight) {
  Edge e = {v, w, weight};
  return e;
}

link NEW (int v, int weight, link next) { 
  link x = malloc (sizeof *x);

  x->v = v; 
  x->next = next;     
  x->weight = weight;
  return x;                         
}

Graph GRAPHinit (int V) { 
  int v;
  Graph G = malloc (sizeof *G);

  // Set the size of the graph, = number of verticies
  G->V = V; 
  G->E = 0;

  G->adj = malloc (V * sizeof(link));
  for (v = 0; v < V; v++){
    G->adj[v] = NULL;
  }
  return G;
}

void GRAPHdestroy (Graph g) {
  // not implemented yet
}

void GRAPHinsertE(Graph G, Edge e){ 
  int v = e.v;
  int w = e.w;
  int weight = e.weight;

  G->adj[v] = NEW (w, weight, G->adj[v]);
  G->adj[w] = NEW (v, weight, G->adj[w]); 
  G->E++;
}

void GRAPHremoveE(Graph G, Edge e){ 
  int v = e.v;
  int w = e.w;
  link *curr;

  curr = &G->adj[w]; 
  while (*curr != NULL){
    if ((*curr)->v == v) {
      (*curr) = (*curr)->next;
      G->E--;
      break;
    }
    curr= &((*curr)->next);
  }
  curr = &G->adj[v]; 
  while (*curr != NULL){
    if ((*curr)->v == w) {
      (*curr) = (*curr)->next;
      break;
    }
    curr= &((*curr)->next);

  }
}

int GRAPHedges (Edge edges[], Graph g) {
  int v, E = 0; 
  link t;  

  for (v = 0; v < g->V; v++) {
    for (t = g->adj[v]; t != NULL; t = t->next) {
      if (v < t->v) {
    edges[E++] = EDGE(v, t->v, t->weight); 
      }
    }
  }
  return E;
}

void GRAPHEdgePrint (Edge edge) {
  printf ("%d -- (%d) -- %d", edge.v, edge.weight, edge.w);
}

int GRAPHedgeScan (Edge *edge) {
  if (edge == NULL) {
    printf ("GRAPHedgeScan: called with NULL \n");
    abort();
  }

  if ((scanf ("%d", &(edge->v)) == 1) &&
      (scanf ("%d", &(edge->w)) == 1) &&
      (scanf ("%d", &(edge->weight)) == 1)) {
    return 1;
  } else {
    return 0;
  }
}  

// Update the CC label for all the nodes in the MST reachable through the edge from-to
// Assumes graph is a tree, will not terminate otherwise.
void updateConnectedComponent (Graph g, int from, int to, int newVal, int *connectedComponent) {
  link currLink = g->adj[to];
  connectedComponent[to] = newVal;

  while (currLink != NULL) {
    if (currLink->v != from) {
      updateConnectedComponent (g, to, currLink->v, newVal, connectedComponent);
    }
    currLink = currLink->next;
  }
}

// insertion sort, replace with O(n * lon n) alg to get 
// optimal work complexity for Kruskal
void sortEdges (Edge *edges, int noOfEdges) {
  int i;
  int l = 0;
  int r = noOfEdges-1;

  for (i = r-1; i >= l; i--) {
    int j = i;
    while ((j < r) && (edges[j].weight > edges[j+1].weight)) {
      exch (edges[j], edges[j+1]);
      j++;
    }
  }

}

Graph GRAPHmst (Graph g) {
  Edge *edgesSorted;
  int i;
  int *connectedComponent = malloc (sizeof (int) * g->V);
  int *sizeOfCC = malloc (sizeof (int) * g->V);
  Graph mst = GRAPHinit (g->V);

  edgesSorted = malloc (sizeof (*edgesSorted) * g->E);
  GRAPHedges (edgesSorted, g);
  sortEdges (edgesSorted, g->E);

  // keep track of the connected component each vertex belongs to
  // in the current MST. Initially, MST is empty, so no vertex is
  // in an MST CC, therefore all are set to -1.
  // We also keep track of the size of each CC, so that we're able 
  // to identify the CC with fewer vertices when merging two CCs
  for (i = 0; i < g->V; i++) {
    connectedComponent[i] = -1;
    sizeOfCC[i] = 0;
  }

  int currentEdge = 0; // the shortest edge not yet in the mst
  int mstCnt = 0;      // no of edges currently in the mst
  int v, w;

  // The MST can have at most min (g->E, g->V-1) edges
  while ((currentEdge < g->E) && (mstCnt < g->V)) {
    v = edgesSorted[currentEdge].v;
    w = edgesSorted[currentEdge].w;
    printf ("Looking at Edge ");
    GRAPHEdgePrint (edgesSorted[currentEdge]);
    if ((connectedComponent[v] == -1) ||
    (connectedComponent[w] == -1)) {
      GRAPHinsertE (mst, edgesSorted[currentEdge]);
      mstCnt++;
      if (connectedComponent[v] == connectedComponent[w]) {
    connectedComponent[v] = mstCnt;
    connectedComponent[w] = mstCnt;
    sizeOfCC[mstCnt] = 2;  // initialise a new CC
      } else {
    connectedComponent[v] = max (connectedComponent[w],  connectedComponent[v]);
    connectedComponent[w] = max (connectedComponent[w],  connectedComponent[v]);
    sizeOfCC[connectedComponent[w]]++;
      }
      printf ("  is in MST\n");
    } else if (connectedComponent[v] == connectedComponent[w]) {
      printf ("  is not in MST\n");
    } else {
      printf ("  is in MST, connecting two msts\n");
      GRAPHinsertE (mst, edgesSorted[currentEdge]);
      mstCnt++;
      // update the CC label of all the vertices in the smaller CC
      // (size is only important for performance, not correctness)
      if (sizeOfCC[connectedComponent[w]] > sizeOfCC[connectedComponent[v]]) {
    updateConnectedComponent (mst, v, v, connectedComponent[w], connectedComponent);
    sizeOfCC[connectedComponent[w]] += sizeOfCC[connectedComponent[v]];
      } else {
    updateConnectedComponent (mst, w, w, connectedComponent[v], connectedComponent);
    sizeOfCC[connectedComponent[v]] += sizeOfCC[connectedComponent[w]];
      }
    }
    currentEdge++;
  }
  free (edgesSorted);
  free (connectedComponent);
  free (sizeOfCC);
  return mst;
}

// my code so far
Graph GRAPHmstPrim (Graph g) {

   // Initializations
   Graph mst = GRAPHinit (g->V); // graph to hold the MST
   int i = 0;

   int nodeIsConnected[g->V]; 
   // initially all nodes are not connected, initialize as 0;
   for(i = 0; i < g->V; i++) {
      nodeIsConnected[i] = 0;
   }

   // extract the first vertex from the graph
   nodeIsConnected[0] = 1;

   // push all of the links from the first node onto a temporary list
   link tempList = newList();
   link vertex = g->adj[0];

   while(vertex != NULL) {
      tempList = prepend(tempList, vertex);
      vertex = vertex->next;
   }

   // find the smallest link from the node;
   mst->adj[0] = 

}

// some helper functions I've been writing
static link newList(void) {
   return NULL;
}

static link prepend(link list, link node) {
   link temp = list;
   list = malloc(sizeof(list));
   list->v = node->v;
   list->weigth = node->weight;
   list->next = temp;

   return list;
}

static link getSmallest(link list, int nodeIsConnected[]) {
   link smallest = list;

   while(list != NULL){
      if((list->weight < smallest->weight)&&(nodeIsConnected[list->v] == 0)) {
         smallest = list;
      }
      list = list->next;
   }

   if(nodeIsConnected[smallest->v] != 0) {
      return NULL;
   } else {
      return smallest;
   }
} 
```

为清楚起见，file 以从文件中获取测试数据：

```
#include <stdlib.h>
#include <stdio.h>
#include "GRAPH.h"

// call with graph_e1.txt as input, for example.
//
int main (int argc, char *argv[]) { 

  Edge e, *edges;
  Graph g, mst;
  int graphSize, i, noOfEdges;

  if (argc < 2) {
    printf ("No size provided - setting max. no of vertices to %d\n", maxV);
    graphSize = maxV;
  } else  { 
    graphSize = atoi (argv[1]);
  }
  g =   GRAPHinit (graphSize);    

  printf ("Reading graph edges (format: v w weight) from stdin\n");
  while (GRAPHedgeScan (&e)) {
    GRAPHinsertE (g, e);
  }

  edges = malloc (sizeof (*edges) * graphSize * graphSize);
  noOfEdges = GRAPHedges (edges, g);
  printf ("Edges of the graph:\n");
  for (i = 0; i < noOfEdges; i++) {
    GRAPHEdgePrint (edges[i]);
    printf ("\n");
  }

  mst = GRAPHmstPrim (g);
  noOfEdges = GRAPHedges (edges, mst);

  printf ("\n MST \n");
  for (i = 0; i < noOfEdges; i++) {
    GRAPHEdgePrint (edges[i]);
    printf ("\n");
  }

  GRAPHdestroy (g);
  GRAPHdestroy (mst);
  free (edges);  
  return EXIT_SUCCESS;
} 
```

提前致谢。

卢克

完整文件：[http ://www.cse.unsw.edu.au/~cs1927/12s2/labs/13/MST.html](http://www.cse.unsw.edu.au/~cs1927/12s2/labs/13/MST.html)

更新：我对这个问题进行了另一次尝试。这是更新的代码（上面的一个编辑将graph_client.c更改为使用我编写的“GRAPHmstPrim”函数。

GRAPH_adjlist.c::

```
#include <stdlib.h>
#include <stdio.h>
#include "GRAPH.h"

#define exch(A, B) { Edge t = A; A = B; B = t; } 
#define max(A,B)(A>B?A:B)
#define min(A,B)(A<B?A:B)

typedef struct _node *link;
struct _node { 
  int v; 
  int weight;
  link next; 
}node;

struct graph { 
  int V; 
  int E; 
  link *adj; 
};

typedef struct _edgeNode *edgeLink;
struct _edgeNode {
  int v;
  int w;
  int weight;
  edgeLink next;
}edgeNode;

static void sortEdges (Edge *edges, int noOfEdges);
static void updateConnectedComponent (Graph g, int from, int to, int newVal, int *connectedComponent);

Edge EDGE (int v, int w, int weight) {
  Edge e = {v, w, weight};
  return e;
}

link NEW (int v, int weight, link next) { 
  link x = malloc (sizeof *x);

  x->v = v; 
  x->next = next;     
  x->weight = weight;
  return x;                         
}

Graph GRAPHinit (int V) { 
  int v;
  Graph G = malloc (sizeof *G);

  G->V = V; 
  G->E = 0;

  G->adj = malloc (V * sizeof(link));
  for (v = 0; v < V; v++){
    G->adj[v] = NULL;
  }
  return G;
}

void GRAPHdestroy (Graph g) {
  // not implemented yet
}

void GRAPHinsertE(Graph G, Edge e){ 
  int v = e.v;
  int w = e.w;
  int weight = e.weight;

  G->adj[v] = NEW (w, weight, G->adj[v]);
  G->adj[w] = NEW (v, weight, G->adj[w]); 
  G->E++;
}

void GRAPHremoveE(Graph G, Edge e){ 
  int v = e.v;
  int w = e.w;
  link *curr;

  curr = &G->adj[w]; 
  while (*curr != NULL){
    if ((*curr)->v == v) {
      (*curr) = (*curr)->next;
      G->E--;
      break;
    }
    curr= &((*curr)->next);
  }
  curr = &G->adj[v]; 
  while (*curr != NULL){
    if ((*curr)->v == w) {
      (*curr) = (*curr)->next;
      break;
    }
    curr= &((*curr)->next);

  }
}

int GRAPHedges (Edge edges[], Graph g) {
  int v, E = 0; 
  link t;  

  for (v = 0; v < g->V; v++) {
    for (t = g->adj[v]; t != NULL; t = t->next) {
      if (v < t->v) {
    edges[E++] = EDGE(v, t->v, t->weight); 
      }
    }
  }
  return E;
}

void GRAPHEdgePrint (Edge edge) {
  printf ("%d -- (%d) -- %d", edge.v, edge.weight, edge.w);
}

int GRAPHedgeScan (Edge *edge) {
  if (edge == NULL) {
    printf ("GRAPHedgeScan: called with NULL \n");
    abort();
  }

  if ((scanf ("%d", &(edge->v)) == 1) &&
      (scanf ("%d", &(edge->w)) == 1) &&
      (scanf ("%d", &(edge->weight)) == 1)) {
    return 1;
  } else {
    return 0;
  }
}  

// Update the CC label for all the nodes in the MST reachable through the edge from-to
// Assumes graph is a tree, will not terminate otherwise.
void updateConnectedComponent (Graph g, int from, int to, int newVal, int *connectedComponent) {
  link currLink = g->adj[to];
  connectedComponent[to] = newVal;

  while (currLink != NULL) {
    if (currLink->v != from) {
      updateConnectedComponent (g, to, currLink->v, newVal, connectedComponent);
    }
    currLink = currLink->next;
  }
}

// insertion sort, replace with O(n * lon n) alg to get 
// optimal work complexity for Kruskal
void sortEdges (Edge *edges, int noOfEdges) {
  int i;
  int l = 0;
  int r = noOfEdges-1;

  for (i = r-1; i >= l; i--) {
    int j = i;
    while ((j < r) && (edges[j].weight > edges[j+1].weight)) {
      exch (edges[j], edges[j+1]);
      j++;
    }
  }

}

Graph GRAPHmst (Graph g) {
  Edge *edgesSorted;
  int i;
  int *connectedComponent = malloc (sizeof (int) * g->V);
  int *sizeOfCC = malloc (sizeof (int) * g->V);
  Graph mst = GRAPHinit (g->V);

  edgesSorted = malloc (sizeof (*edgesSorted) * g->E);
  GRAPHedges (edgesSorted, g);
  sortEdges (edgesSorted, g->E);

  // keep track of the connected component each vertex belongs to
  // in the current MST. Initially, MST is empty, so no vertex is
  // in an MST CC, therefore all are set to -1.
  // We also keep track of the size of each CC, so that we're able 
  // to identify the CC with fewer vertices when merging two CCs
  for (i = 0; i < g->V; i++) {
    connectedComponent[i] = -1;
    sizeOfCC[i] = 0;
  }

  int currentEdge = 0; // the shortest edge not yet in the mst
  int mstCnt = 0;      // no of edges currently in the mst
  int v, w;

  // The MST can have at most min (g->E, g->V-1) edges
  while ((currentEdge < g->E) && (mstCnt < g->V)) {
    v = edgesSorted[currentEdge].v;
    w = edgesSorted[currentEdge].w;
    printf ("Looking at Edge ");
    GRAPHEdgePrint (edgesSorted[currentEdge]);
    if ((connectedComponent[v] == -1) ||
    (connectedComponent[w] == -1)) {
      GRAPHinsertE (mst, edgesSorted[currentEdge]);
      mstCnt++;
      if (connectedComponent[v] == connectedComponent[w]) {
    connectedComponent[v] = mstCnt;
    connectedComponent[w] = mstCnt;
    sizeOfCC[mstCnt] = 2;  // initialise a new CC
      } else {
    connectedComponent[v] = max (connectedComponent[w],  connectedComponent[v]);
    connectedComponent[w] = max (connectedComponent[w],  connectedComponent[v]);
    sizeOfCC[connectedComponent[w]]++;
      }
      printf ("  is in MST\n");
    } else if (connectedComponent[v] == connectedComponent[w]) {
      printf ("  is not in MST\n");
    } else {
      printf ("  is in MST, connecting two msts\n");
      GRAPHinsertE (mst, edgesSorted[currentEdge]);
      mstCnt++;
      // update the CC label of all the vertices in the smaller CC
      // (size is only important for performance, not correctness)
      if (sizeOfCC[connectedComponent[w]] > sizeOfCC[connectedComponent[v]]) {
    updateConnectedComponent (mst, v, v, connectedComponent[w], connectedComponent);
    sizeOfCC[connectedComponent[w]] += sizeOfCC[connectedComponent[v]];
      } else {
    updateConnectedComponent (mst, w, w, connectedComponent[v], connectedComponent);
    sizeOfCC[connectedComponent[v]] += sizeOfCC[connectedComponent[w]];
      }
    }
    currentEdge++;
  }
  free (edgesSorted);
  free (connectedComponent);
  free (sizeOfCC);
  return mst;
}

edgeLink newEdgeList(void) {
   return NULL;
}

edgeLink addEdgeList(edgeLink list, int node, link edge) {
  printf("EdgeListStart");
   edgeLink temp = list;
   list = malloc(sizeof(edgeNode));
   list->w = node;
   list->v = edge->v;
   list->weight = edge->weight;
   list->next = temp;
   printf("EdgeListEnd");
   return list;
} 

edgeLink findSmallest(edgeLink waitList, int nodeIsConnected[]) {
  printf("SmallestSTart");
   edgeLink smallest = waitList;
   int small = 99999;

   while(waitList != NULL) {
     if((waitList->weight < small)&&(nodeIsConnected[waitList->v] == 0)) {
        smallest = waitList;
        small = smallest->weight;
     } else {
       printf("\n\n smallest already used %d", waitList->v);
     }

     waitList = waitList->next;
   }
   printf("SmallestEnd");
if(nodeIsConnected[smallest->v] == 0){
        return smallest;

     } else {
       printf("Returning NULL");
        return NULL;
     }
}

link addList(edgeLink smallest, link list, int v) {
  printf(":istsatt");
   link temp = list;
   list = malloc(sizeof(node));
   list->v = v;
   list->weight = smallest->weight;
   list->next = temp;
   printf("Listend");
   return list;
}  

Graph GRAPHmstPrim (Graph g) {

   Graph mst = GRAPHinit (g->V); // graph to hold the MST

   int i = 0;
   int v = 0;
   int w = 0;
   int nodeIsConnected[g->V]; // array to hold whether a vertex has been added to MST

   int loopStarted = 0;
   edgeLink smallest = NULL;

   // initially all nodes are not in the MST
   for(i = 0; i < g->V; i++) {
     nodeIsConnected[i] = 0;
   }

   while((smallest != NULL)||(loopStarted == 0)) {
     printf("v is : %d", v);
     // add the very first node to the MST
      nodeIsConnected[v] = 1;
      loopStarted = 1;

      // push all of its links onto the list
      link vertex = g->adj[v];
      edgeLink waitList = newEdgeList();

      while(vertex != NULL) {
        waitList = addEdgeList(waitList, v, vertex);
        vertex = vertex->next;
      }

      // find the smallest edge from the list
      // which doesn't duplicate a connection
      smallest = findSmallest(waitList, nodeIsConnected);

      // no nodes don't duplicate a connection
      // return the current MST
      if(smallest == NULL){
        return mst;
      }

      // otherwise add the attributes to the MST graph
      w = smallest->w;
      v = smallest->v;

      mst->adj[v] = addList(smallest, mst->adj[v], w);
      mst->adj[w] = addList(smallest, mst->adj[w], v);

   }

   return mst;

} 
```

更改摘要： - 添加了 edgeList 以保存可能进入 MST 的边 - 数组 nodeIsConnected[] 以跟踪节点是否在 MST 中 - 选择最小节点的函数。如果没有不复制链接的节点，则返回 NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:29:14.737

鉴于这似乎是家庭作业，我不会在代码中给出完整的答案。您的代码似乎在正确的轨道上。您需要的下一步确实是将临时列表中的最小链接添加到您的 mst。通过从您的列表中添加最小的一个，您实际上是在将您的（部分构建的）mst 连接到一个尚未在您的 mst 中的节点。具有最小权重的链接将始终是将您的 mst 中的节点连接到其他节点的最便宜的方式。

当您添加最小的链接时，您正在向部分构建的树添加一个节点，您需要更新您的临时列表。您需要将新节点的所有链接添加到列表中。完成此操作后，您的临时列表将包含部分构建的 mst 中所有节点的所有链接。您继续添加节点的过程，直到所有节点都在您的 mst 中。

添加最便宜的链接时，您需要检查是否将新节点连接到您的 mst。最便宜的链接可能是连接 2 个已经在您的 mst 中的节点。如果是这样，则需要跳过该链接，然后选择下一个最便宜的链接。实际上有几种处理方法。您可以维护已经在您的 mst 中的一组节点/向量，维护一个布尔向量以跟踪节点的状态或确保您的临时列表仅包含连接新节点的链接（尽管这是最密集的方法） .

# c# - 在不分配新节点实例的情况下对单个链表进行排序

> ID：12995740
> 
> 赞同：-2
> 
> 时间：2012-10-21T07:06:56.130
> 
> 标签：c#, data-structures, linked-list

我正在使用 C#，我想在不使用额外内存的情况下对链表进行排序。

```
Input: listptr→ 11 → 8 → 2→ 4 → 5
Output: listptr→ 2 → 4 → 5 → 8 → 11 
```

这是我的课：

```
public class SNode
{
    public int data;
    public SNode next;
} 
```

我应该创建一个新`temp`变量来存储临时列表吗？

喜欢`SNode temp = new SNode(2,NULL);`？

这是一个家庭作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:27:23.827

好吧，一种简单的方法是断开链，将其排序到 List<> 中，然后重新链接对象。

这是我对此的看法。我知道我完全失败了“没有额外的记忆”。部分。对不起。

```
public class SNode : IComparable
{
    public int data;
    public SNode next;

    // Implement IComparable, so List.Sort can do its magic.
    public int CompareTo(object obj)
    {
        SNode node = obj as SNode;
        if (node == null)
            throw (new Exception()); // Wrong type?

        if (this.data < node.data)
            return -1;
        else if (this.data > node.data)
            return 1;
        else
            return 0;
    }
}

// Sort the linked nodes.
public SNode Sort(SNode root)
{
    List<SNode> list = Unlink(root);
    list.Sort();
    return Link(list);
}

// Unlink a chained link and return a list of them.
public List<SNode> Unlink(SNode root)
{
    List<SNode> nodes = new List<SNode>();

    nodes.Add(root);
    nodes.AddRange(Unlink(root.next));
    root.next = null;

    return nodes;
}

// Take a list and build a linked list.
public SNode Link(List<SNode> list)
{
    if (list.Count == 0)
        return null;

    for(int i = 0; i < list.Count - 1; i++)
        list[i].next = list[i + 1];

    return list[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:29:37.243

一种简单（不是最有效）的方法是创建一个与列表大小相同的数组，并让数组中的每个元素引用一个节点。然后使用内置的排序方法对数组进行排序。作为最后一步，您循环遍历数组并将每个节点的链接设置为正确的后继节点。

由于这个问题是家庭作业，我怀疑您不允许使用内置的排序方法。如果是这样，您必须为您的链表实现任何现有的排序算法。[合并排序](http://en.wikipedia.org/wiki/Merge_sort)似乎是一个不错的选择。[这](http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html)是对单链表算法的一个很好的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T10:41:59.347

我应该认为练习的重点是在不创建整个内容的副本的情况下对列表进行排序（因此您可能可以使用变量形式的少量内存来帮助排序）。

最简单的编码方法可能是使用[冒泡排序](https://en.wikipedia.org/wiki/Bubble_sort)（尽管这对于大型列表来说效率极低）。诀窍是使用变量来跟踪当前对之前的节点，因为`next`如果需要交换对中节点的顺序，则必须调整它。

正如其他人指出的那样，在实际项目中，您将使用 .NET 框架为您完成繁重的工作，但我想这是*指针*操作的理论练习，因此您应该自己编写所有代码。

# php - GET 方法...提取变量

> ID：12995749
> 
> 赞同：-1
> 
> 时间：2012-10-21T07:08:59.537
> 
> 标签：php, url-parameters, getmethod

有人可以帮助我如何使用 php 中的 GET 方法从以下 url 中提取 url 参数吗？

```
http://domainname.com/?formBuilderForm%5BFormBuilderID%5D=29&formBuilderForm%5Brandomizer%5D=508398db941a26.20741366&formBuilderForm%5Bvw_sre_ticker_name%5D=TPX&formBuilderForm%5Bvw_sre_entry_price%5D=100&formBuilderForm%5Bvw_sre_entry_date%5D=21%2F10%2F2012 
```

我相信变量名称是 formBuilderForm [FormBuilderID] 并且值是 29。我尝试了以下代码，但它没有工作。

```
<?php
$_vw_sre_ticker_name_in = $_GET["formBuilderForm [FormBuilderID ]"];
echo 'vw_sre_ticker_name'.$vw_sre_ticker_name_in;
?> 
```

我相信，这与 ASCII 和非 ASCII 的东西有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:02:52.460

`%5D`代表 [ 在 url 编码中

所以你可能会尝试

```
<?php
 $_vw_sre_ticker_name_in = $_GET["formBuilderForm[FormBuilderID]"];
 echo 'vw_sre_ticker_name'.$vw_sre_ticker_name_in;
?> 
```

您需要删除空格。

然而，正如 Seth 所指出的，这真的是非常基本的调试一个简单的

```
print_r($_GET); 
```

会为您提供所需的信息，而不是在 Stackoverflow 上询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:05:50.373

您可以在 $_GET 上使用 foreach

```
foreach($_GET as $key=>$value) {
       echo $key . ':' . $value;
} 
```

# c - C - 在外部函数的指针数组中分配值

> ID：12995754
> 
> 赞同：2
> 
> 时间：2012-10-21T07:09:54.210
> 
> 标签：c, arrays, pointers, memory-management, function-call

假设我有以下情况（一些粗略的伪代码）：

```
struct { 
  int i;
} x

main(){
  x** array = malloc(size of x pointer); // pointer to an array of pointers of type x
  int* size = current size of x // (initally 0)
  add(array, size);
}

add(x** array, int* size){ // adds one actual element to the array
  x** temp = realloc(array, (*size)+1); // increase the array size by one
  free(array);
  array = temp;

  // My question is targeted here
  array[*size] = malloc(size of x); // makes a pointer to the value 
  array[*size]->i = size;
  *size++;  
} 
```

我的问题是：一旦 add() 完成，存储在数组中的指针的值是否会随着函数调用堆栈一起消失，因为我在 func() 中分配了它们？我担心他们可能会，在这种情况下，我会有更好的方法来做事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:13:38.640

不，他们没有。它们一直存在，直到返回的指针`malloc()`被传递给相应的`free()`函数。`malloc()`如果该函数的工作方式与自动数组相同，则该函数的存在将毫无意义。

编辑：旁注。当@Ancurio 指向它时，您错误地释放了先前返回的指针后面的内存，该指针`malloc()`在当时是无效的，因为`realloc()`它已被使用。不要那样做。`realloc()`正常工作。）

# javascript - 如何根据加载的内容设置“加载微调器”的持续时间

> ID：12995761
> 
> 赞同：2
> 
> 时间：2012-10-21T07:11:05.720
> 
> 标签：javascript, jquery, ajax

我为我的动态网站制作了加载“animation.gif”。这是我从 jquery 中使用的代码，用于显示和隐藏微调器：

```
$("#loading").bind("ajaxSend", function(){
   $(this).show();
 }).bind("ajaxComplete", function(){
   $(this).hide();
 }); 
```

[http://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events)

* * *

**我的问题：** 该网站有不同的内容（如 Flash、图像、文本等）。因此，网站的某些部分比其他部分需要更长的时间来加载。但是加载动画的持续时间总是一样的（太快了）。当我使用 flash(4mb) 和 html 文本加载内容时，微调器隐藏得太快，并且内容仍在加载。与总部图像相同..

我可以使用一分钟延迟，例如：

```
$("#this").delay(600).fadeOut("slow"); 
```

但我认为这根本不是一个好的解决方案。 ***在加载整个内容之前，如何不隐藏加载微调器？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:27:40.090

您可以为页面中的所有慢速加载元素创建一个标志列表。

然后开始监听每个元素的加载事件（你也可以用 flash 来做）。

每次加载元素时都会引发其标志。

在后台运行一个间隔来观察这个列表，一旦所有的列表项都被提升，移除加载微调器。

你也可以试试这个：

```
var iv = setInterval(function () {
    if (document.all["theObject"].readyState == 4) {
        clearInterval(iv)
        alert("Object loaded (maybe).")
    }
}, 100) 
```

取自：[http](http://www.webdeveloper.com/forum/showthread.php?160792-lt-object-onload) ://www.webdeveloper.com/forum/showthread.php?160792-lt-object-onload ，

by 兽人灼烧者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:37:08.517

从您链接到的页面，只需绑定到`ajaxStart`and `ajaxStop`，它具有内置的所需逻辑，并且仅在任何组中的第一个 AJAX 请求以及最后一个 AJAX 请求完成时触发。

或者，您可以使用自己的计数器来计算有多少 AJAX 请求未完成：

```
(function(sel) {
    var count = 0;

    $(sel).bind("ajaxSend", function() {
        if (count++ === 0) {
            $(this).show();
        }
    }).bind("ajaxComplete", function() {
        if (--count === 0) {
            $(this).hide();
        }
    });
})('#loading'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:55:59.857

好的，我尝试了[这个（Fiddle Here）](http://jsfiddle.net/nuYpH/2/)，希望是您正在寻找的。

基本上：

*   给每个你希望加载器等待一个`.content`类的元素
*   使用您的 jQuery/AJAX 动态设置内容 src
*   将元素绑定`$('.content')`到`.load()`事件
*   当`.load()`被触发时增加一个计数器，如果计数器等于`.length`选择器，`$('.content')`则隐藏加载 gif

来自关于[.load() 事件的](http://api.jquery.com/load-event/)[jQuery 站点](http://api.jquery.com)：

> 此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。

所以它应该适用于你的惰性内容。

希望能帮助到你！

# slider - BxSlider 不显示任何内容

> ID：12995764
> 
> 赞同：2
> 
> 时间：2012-10-21T07:12:15.180
> 
> 标签：slider, bxslider

我在我的网站上使用这些代码来制作 bxsilder

```
<script src="js/jquery-latest.js" type="text/javascript"></script>
<script src="js/jquery.bxSlider.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $('#slider1').bxSlider({
        mode: 'fade'

        });

  });

</script>

                  <div id="slider1">
                    <div class="slide">
                        <img src="images/thumbnails/slide1.png">
                    </div>
                    <div class="slide">
                        <img src="images/thumbnails/slide2.png">
                    </div>
                    <div class="slide">
                        <img src="images/thumbnails/slide3.png">
                    </div>
                    <div class="slide">
                        <img src="images/thumbnails/slide4.png">
                    </div>
                    <div class="thumbs">
                      <a href=""><img src="images/thumbnails/slide1-thumb.png" /></a>
                      <a href=""><img src="images/thumbnails/slide2-thumb.png" /></a>
                      <a href=""><img src="images/thumbnails/slide3-thumb.png" /></a>
                      <a href=""><img src="images/thumbnails/slide4-thumb.png" /></a>
                    </div>

                  </div> 
```

* * *

CSS

```
#slider1{
    width:500px;
    height:400px;
    background-color:#ccc;
}
.slide {
    width:500px;
    height:350px;
}
.slide img {
    width:500px;
    height:350px;
}

.thumbs {
    width:125px;
    height:75px;
} 
```

但是页面中什么也没有出现！除了 prev & next 这段代码有什么问题？

* * *

该帖子被拒绝，因为此消息“您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的场景。” 所以我会重复这些话，直到它被接受！

“您的帖子没有太多解释代码部分的上下文；请更清楚地解释您的场景。” “您的帖子没有太多解释代码部分的上下文；请更清楚地解释您的场景。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T16:32:11.427

2 .js 文件的路径是否正确？也就是说，您是否有一个名为“js”的文件夹，其中包含两个文件？还是您只是从网络示例中复制/粘贴代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T17:00:11.350

我用 bxslider un jquery 测试了你的代码 - ir 工作“很好”。您确定，您的图片已正确添加吗？

使用 Chrome 开发人员工具测试您的网站，查看网络和控制台 - 是否显示任何错误？

# ruby-on-rails - 为了提高性能（Rails），我应该在这个 Post 模型中索引哪些列？

> ID：12995766
> 
> 赞同：0
> 
> 时间：2012-10-21T07:12:19.677
> 
> 标签：ruby-on-rails, indexing

我有以下`Post`模型：

```
 create_table "posts", :force => true do |t|
    t.string   "title"
    t.string   "content"
    t.integer  "user_id"
    t.datetime "created_at",                               :null => false
    t.datetime "updated_at",                               :null => false
    t.integer  "comments_count",        :default => 0,     :null => false
    t.string   "image_file_name"
    t.string   "image_content_type"
    t.integer  "image_file_size"
    t.datetime "image_updated_at"
    t.boolean  "published",             :default => false
    t.datetime "published_at"
    t.boolean  "draft",                 :default => false
    t.string   "document_file_name"
    t.string   "document_content_type"
    t.integer  "document_file_size"
    t.datetime "document_updated_at"
  end

  add_index "posts", ["user_id", "created_at"], :name => "index_posts_on_user_id_and_created_at" 
```

到目前为止，我只有 2 个索引。

我仍然不太确定要索引哪些列来提高性能，所以我想听听一些建议。

（抱歉，我是索引新手，所以我想知道这是否：`["user_id", "created_at"]`在这两个索引之间创建关系？（或者索引之间没有关系？）或者看起来像这样，因为它们是在同一个 Rails 迁移中创建的？ ")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:19:22.440

当您知道您将经常对该列进行 SQL 查找时，您应该担心索引列。如果没有看到应用程序代码的其余部分，很难确定应该索引哪些列，但我想说您选择了两个好的列。

下面是一篇很好的文章，它帮助我理解了索引，里面有一些旧的 Rails 语法，但相关的是它关于何时索引列的要点。

[http://tomafro.net/2009/08/using-indexes-in-rails-choosing-additional-indexes](http://tomafro.net/2009/08/using-indexes-in-rails-choosing-additional-indexes)

# powershell - 我可以将 PowerShell 'Start-Job' 设置为低优先级吗？

> ID：12995767
> 
> 赞同：10
> 
> 时间：2012-10-21T07:12:29.833
> 
> 标签：powershell, start-job

我想降低在 PowerShell 脚本中以[Start-Job 开始的作业的优先级。](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/start-job?view=powershell-6)这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T07:31:28.410

我在作业代码中使用了这个技巧（它可以是可选的，由参数控制）：

```
[System.Threading.Thread]::CurrentThread.Priority = 'Lowest' 
```

可用的优先级值：最低、低于正常、正常、高于正常、最高

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T07:15:01.690

如果您已经启动它，那么您可以使用它：

```
 $a = gps powershell
 $a.PriorityClass = "BelowNormal" 
```

或者您可以使用以下密钥：

```
 Get-WmiObject Win32_process -filter 'name = "notepad.exe"' | foreach-object { $_.SetPriority(32) } 
```

优先级代码如下：

```
 256 REALTIME
 128 HIGH_PRIORITY
 32768 ABOVE_NORMAL
 32 NORMAL
 16384 BELOW_NORMAL
 64 IDLE 
```

# system - 系统虚拟化：了解 IO 虚拟化和管理程序的角色

> ID：12995768
> 
> 赞同：4
> 
> 时间：2012-10-21T07:12:33.407
> 
> 标签：system, virtual-machine, virtualization, hypervisor

我想正确理解 I/O 虚拟化。上下文是纯/完全虚拟化，而不是半虚拟化。

我的理解是管理程序虚拟化硬件并为每个沙盒应用程序提供虚拟资源。每个沙盒都认为自己在访问底层硬件，但实际上并非如此。相反，它是管理程序执行所有访问。我需要更好地理解这一方面。

假设芯片有一个硬件计时器，操作系统内核将其用作滴答计时器。让我们假设有 2 个虚拟机（例如 Windows 和 Linux）在管理程序之上运行。

没有一个虚拟机修改了它们的源代码。所以他们继续吐出直接对定时器资源进行编程的指令。

虚拟机管理程序在这里的真正作用是什么？这两个操作系统如何真正阻止访问真实的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:33:05.203

经过一番阅读，我已经达到了一定程度的理解，描述于：

[https://stackoverflow.com/a/13045437/1163200](https://stackoverflow.com/a/13045437/1163200)

我在这里完全复制它：

这是试图回答我自己的问题。

[系统虚拟化：了解 IO 虚拟化和管理程序的角色](https://stackoverflow.com/questions/12995768/system-virtualization-understanding-io-virtualization-and-role-of-hypervisor)

# 虚拟化

虚拟化作为一个概念，可以使多个/不同的应用程序在相同的底层硬件上共存，而无需相互了解。

例如，Windows、Linux、Symbian 等成熟的操作系统及其应用程序可以在同一平台上共存。所有计算资源都是虚拟化的。

这意味着上述机器都无法访问物理资源。唯一可以访问物理资源的实体是称为虚拟机监视器（又名 Hypervisor）的程序。

现在这很重要。请仔细阅读并重新阅读。

管理程序为上述每台机器提供虚拟化环境。由于这些机器访问的不是物理硬件而是虚拟化硬件，因此它们被称为虚拟机。

例如，Windows 内核可能想要启动一个物理计时器（系统资源）。假设定时器是内存映射IO。Windows 内核在定时器地址上发出一系列加载/存储指令。在非虚拟化环境中，这些加载/存储会导致对定时器硬件进行编程。

然而，在虚拟化环境中，这些基于加载/存储的物理资源访问将导致陷阱/故障。陷阱由管理程序处理。Hypervisor 知道 windows 试图对计时器进行编程。管理程序为每个虚拟机维护 Timer 数据结构。在这种情况下，管理程序会更新它为 Windows 创建的计时器数据结构。然后它对真正的计时器进行编程。定时器产生的任何中断首先由管理程序处理。更新虚拟机的数据结构，调用后者的中断服务程序。

长话短说，Windows 做了它在非虚拟化环境中会做的所有事情。在这种情况下，它的操作导致更新的不是真实的系统资源，而是虚拟资源（上面的数据结构）得到更新。

因此，所有虚拟机都认为它们正在访问底层硬件；在他们不知道的现实中，对物理硬件的所有访问都是由管理程序介导的。

上面描述的一切都是完整/经典的虚拟化。大多数现代 CPU 不适合经典虚拟化。陷阱/故障不适用于所有指令。因此，在现代设备上很容易绕过管理程序。

这就是半虚拟化应运而生的地方。虚拟机源代码中的敏感指令被对 Hypervisor 的调用所取代。上面的加载/存储片段可以被一个调用替换，例如

```
Hypervisor_Service(Timer Start, Windows, 10ms); 
```

# 仿真

仿真是与虚拟化相关的主题。想象一个场景，最初为 ARM 编译的程序在 ATMEL CPU 上运行。ATMEL CPU 运行一个仿真程序，该程序解释每条 ARM 指令并在 ATMEL 平台上模拟必要的操作。因此，模拟器提供了一个虚拟化环境。

在这种情况下，系统资源的虚拟化不是通过陷阱和执行模型执行的。

# batch-file - 将用户切换到管理员的批处理脚本

> ID：12995772
> 
> 赞同：2
> 
> 时间：2012-10-21T07:13:36.370
> 
> 标签：batch-file, dos

我需要以不同的用户身份登录到 Windows，然后通过批处理脚本将用户切换到管理员用户。RUNAS windows 实用程序对我有用。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:03:05.890

`RunAs`不起作用，因为在（我假设您正在使用）Windows 7 中默认禁用管理帐户。

我发现启动提升的命令提示符（甚至从批处理脚本）的最简单方法是创建提升的快捷方式。

```
First, Right-Click on your desktop and Click "New -> Shortcut"
Next type CMD into the box labled "Type the location of the item:"
Click "Next -> Finish" 
```

`CMD.exe`现在，您的桌面上有一个新的快捷方式。下一个...

```
Right Click "CMD.exe -> Properties -> Advanced..."
Check "Run as administrator"
Click "OK -> OK" 
```

现在您有了一个快捷方式`C:\Windows\System32\cmd.exe`，它将`cmd.exe`以管理权限启动。您现在可以将快捷方式移动到您想要的任何位置，只需确保它位于 PATH 变量中的某个位置，因此您不必在调用它时指定它的路径。我有一个用于批处理文件的特殊目录，还有一个用于第 3 方可执行文件的目录。我将我的移动到批处理目录。

现在根据 Windows，快捷方式的名称是 cmd.exe，但是如果您进入“DOS”，您将能够看到它**实际上**命名为`cmd.exe.lnk`. 我将我的重命名为`cmd.Admin.lnk`只是为了指定它的作用。

您现在可以通过几种不同的方式启动它。

单击`START Ball`，然后键入：（`cmd.exe.lnk``Return`或`cmd.admin.lnk`，无论您选择哪个）。
打开命令提示符并键入：`cmd.exe.lnk``Return`
将行添加`cmd.exe.lnk`到批处理文件。

您甚至可以传递它的参数，例如：

```
cmd.admin.lnk "/c echo. & echo %time% & echo. & pause.exe"
cmd.admin.lnk "/c cd /d d:\tmp & x.bat & echo. & echo %time% & echo. & pause.exe"
cmd.admin.lnk "/c title The Shiznit & echo. & echo %date% %time% & echo. & pause.exe"
cmd.admin.lnk "/c title The Shiznit & echo. & echo %date% %time% & echo. & pause.exe & exit 999" 
```

最后一个示例将返回`%errorlevel%`999。尽管不会传回其他变量。

请注意我必须如何`.exe`在内部命令之后放置`pause`。我发现您可以通过这种方式强制执行许多内部命令。甚至`.com`工作。

最后，与 不同`runas`的是，使用此快捷方式将做两件事**：**

**首先**，它会创建一个弹出窗口，要求获得以管理权限执行的权限。这与默认禁用管理员帐户一样，是一种防止恶意程序和脚本运行的安全措施。

**其次**，如果从命令提示符或批处理文件启动，它将打开**另一个**命令解释器窗口。除非您使用 启动它，否则`start`调用窗口会等待新窗口关闭，然后继续执行批处理文件或命令解释器停止的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T09:35:34.953

CPAU.exe 是解决此问题的好方法

# java - FTP 中的 GET 请求

> ID：12995774
> 
> 赞同：1
> 
> 时间：2012-10-21T07:13:40.293
> 
> 标签：java, sockets, ftp

我在向 FTP 服务器发送请求以下载文件时需要帮助......我已经编写了以下代码来使用 HTTP 下载文件，它可以成功运行，但我不知道如何为 FTP 做......因为我已经使用套接字进行连接，它必须通过这种方式完成，只是建议我下载 FTP 文件的请求（发送到服务器）的格式是什么......

///////////////////////////编码////////////////////// //////////////////////////////

```
 URL url_of_file=new URL("http://fs36.filehippo.com/4281/856e12e1656d480da79ef2b40581f75e/npp.6.2.Installer.exe");
       String hostaddress=url_of_file.getHost();

       Socket mysocket3 = new java.net.Socket();

    //create socket to server for HTTP use port 80 for FTP use 21 //

       mysocket3.connect(new InetSocketAddress(hostaddress,80));

        OutputStream os = mysocket3.getOutputStream();
         int file_size=5860557;

       //REQUEST Formate for HTTP ..........//

         String getRequest = "GET " + url_of_file + " HTTP/1.1\r\n" +            
            "Host: "+ hostaddress + "\r\n" + 
            "Range: bytes=0-"+file_size+" \r\n\r\n";  

         os.write(getRequest.getBytes("UTF-8"));

        os.flush();
        InputStream in = mysocket3.getInputStream();

        // 2\. Recieving the  data,.............. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T07:14:58.757

FTP 是与 HTTP**不同的协议**。FTP 中没有“GET”请求。要了解请求和响应的外观，请阅读[**RFC959**](http://www.ietf.org/rfc/rfc959.txt) FTP 规范。

从 Java 的角度来看，您可以尝试**[org.apache.commons.net.ftp.FTPClient](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:18:24.697

您可以使用[org.apache.commons.net.ftp.FTPClient](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html)

```
FTPClient f = new FTPClient();
f.connect(server);
f.login(username, password); 
```

# php - IPN 传送失败。HTTP 错误代码 500：内部服务器错误

> ID：12995777
> 
> 赞同：-1
> 
> 时间：2012-10-21T07:13:57.460
> 
> 标签：php, logging, error-handling, cpanel, paypal-ipn

我正在创建一个 PHP 文件来与 Paypal 的即时付款通知 (IPN) 进行通信。我创建了一个“ipn.php”文件，它使用 IPN 监听器（带有一个文件“ipnlistener.php”）来监听来自 Paypal 服务器的“POST”消息。

为此，我还在与 ipn.php 相同的文件夹中创建了一个“ipn_errors.log”文件。当我尝试从网络浏览器访问 ipn.php 时，它应该会抛出一个错误并将其记录到 ipn_errors.log 文件中。该错误显示在 Web 浏览器上，但未记录在 ipn_errors.log 文件中。此外，在使用 Paypal Sandbox 的即时付款通知 (IPN) 模拟器时，它会显示错误“IPN 传递失败。HTTP 错误代码 500：内部服务器错误”

我相信这是因为 ipn.php 和 ipn_errors.log 文件的权限问题。谁能告诉我在这种情况下什么权限是正确的？我正在使用 cpanel 来管理我的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:22:45.013

服务器用户需要写权限。您需要为组添加写权限并将文件的组更改为服务器用户，或者为所有者添加写权限（并将所有者更改为服务器用户）。

服务器用户是指运行 apache 的用户。在 Debian/ubuntu 上，该用户是 www-data，在 redhat 上，它被称为 apache。查看其他与网络服务器相关的文件的所有者，您应该能够在某个地方找到它作为文件所有者。

# ruby - “意外结束”错误

> ID：12995778
> 
> 赞同：0
> 
> 时间：2012-10-21T07:14:02.830
> 
> 标签：ruby

我正在尝试编写一个 Ruby 递归函数，但我不断收到此错误。我的代码是这样的

```
def myfun(mylist)
   nextlist = []  

   if mylist.size == 1  
      return (mylist[0])
   else
      # populate the list "nextlist" with fewer elements as compared to mylist somehow
   end

   return myfun(nextlist)
end 
```

出现以下错误消息，指向最后一条`end`语句：

> 语法错误，意外的 $end，预期为 keyword_end

这里的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:22:47.650

根据古老的“授人以渔”谚语，我将回答更普遍的问题“我如何找到缺失或多余的东西`end`？”。

For this, I find it very helpful to use the auto-indenting feature of my editor. In vim, I just hit gg=G to indent the entire file, and scan through it visually to find where the indent starts being different from what I'd expect.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:22:25.423

当我复制和粘贴您的代码时，我没有收到语法错误。您粘贴的函数周围是否还有其他代码可能缺少`end`？

# c - 在 printf 参数中提升类型是否危险？

> ID：12995789
> 
> 赞同：7
> 
> 时间：2012-10-21T07:16:12.393
> 
> 标签：c, logging, printf

我的问题源于在尝试为多个位深度平台（例如 32/64）构建时尝试使用 printf 记录事物。

一个不断抬头的问题是试图在多个架构上打印整数。在 32 位上它会像

```
printf(" my int: %d\n", myInt); 
```

但在 64 位上，它必须更改为

```
print (" my int: %ld\n", (long)myInt); 
```

我有两个相关的问题：

1.  我的第一个想法是，当您告诉 printf 打印一个变量并给它一个格式时，它会查看该变量的地址并获取该格式所需的尽可能多的字节。起初这似乎是一个大问题。例如，如果您有一个变量 myChar，它是一个 char（1 字节），但使用了 %d 格式说明符，这将告诉 printf 转到 myChar 的地址并获取接下来的 4 个字节以将其视为 int。如果是这种情况，似乎 printf 会从相邻变量中抓取垃圾日期（因为它抓取了 4 个字节，但实际值只有 1 个字节）。然而，情况似乎并非如此。通过使用 myChar 并指定 %d，printf 获取 1 个字节，然后用 0 填充高 3 个字节。我的理解在这里正确吗？

2.  如果上述情况属实，那么总是将变量提升到最大值以避免在 32/64 位情况下出现的问题类型是否有任何真正的危害。例如，如果您有一个短变量 myShort 和一个 int 变量 myInt，那么始终将它们打印为：

    printf("myShort %ld", (long)myShort); printf("myInt %ld", (long)myInt);

感谢您的任何澄清。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:10:34.867

关于`printf`：在您选址的情况下，“%d”必须按照规范处理平台定义的“int”数据类型。不管是 32 位、64 位还是 128 位线性 AS/400 值。如果您想将该值提升为更大的字段类型（并将该提升与相关的格式字符串粒子匹配），您当然可以这样做，

```
int a=0;
printf("%ld", (long)a); 
```

肯定是使用促销定义的行为。

我认为您问题的真正症结在于以下情况，以及强制晋升是否可以“解决”出现的任何问题。例如：

```
char ch = 'a';
printf("%d", ch); 
```

或者怎么样：

```
char ch = 'a';
printf("%ld", (long)ch); 
```

或者可能是这个（这是你似乎试图避免的真实情况）：

```
char ch = 'a';
printf("%ld", ch); 
```

其中第一个将起作用，但这只是因为在 va-arg 列表上堆栈推送的任何东西的最小大小是平台大小`int`。编译器会自动为您将值提升为 int。由于 "%d" 期望一个平台`int`一切都会好起来。

第二个将*始终*有效并得到完全支持。`char`从到有一个明确而明确的提升`long`。即使`long`是 64 位（或更大），它仍然可以工作。

三是一路UB。`printf`正在寻找 a`long`并且将只显示 a 的字节`int`。如果这似乎在您的平台上“有效”，请检查您的平台宽度是否为`int`和`long`。它可能只是因为您的平台`long`和`int`位宽相同而“工作”。*当将代码移植到它们不存在的平台时，它会带来有趣的惊喜，并且由于它是通过 va-arg 推送的，因此在真正*不同的宽度开始发挥作用之前，您不会看到它。

说了这么多，现在将实际*地址*扔给某些东西（实际上是任何东西），例如所需的`scanf`东西，我们正在寻找完全不同的东西。

```
int val;
sscanf("%ld",&val); 
```

这是一个等待发生的段错误。就像上面一样，如果您的平台`long`和平台`int`宽度相同，您将永远不会知道。将此代码放到一个大小不同的盒子中，`long`并`int`为随后的核心文件的 gdb-load 做好准备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:05:46.913

你说：

> 一个不断抬头的问题是试图在多个架构上打印整数

通过传入不是该类型大小的值来尝试解决类型问题是否危险，是的。这就是编译器警告你的原因。似乎给您带来问题的可移植性概念并不是为了让 printf 高兴。

它旨在使您的程序在多个体系结构上运行并且不会崩溃。如果您有特定于平台的代码，您应该使用 #ifdef 宏来解决它。

否则，您将掷骰子尝试对内存级别类型转换进行分层。

printf 是一种方便而不是类型转换方法。

看来您专注于整数 - 您可能会侥幸逃脱。但总的来说，我不会依赖这样的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T07:57:31.083

`bools`/ `_Bools`，`chars`并且`shorts`在传递给`int`可变`unsigned int`参数函数（如`printf()`. 同样`floats`得到转换成`doubles`.

因此，如果您传递的内容小于`int`，将毫无问题地`printf()`抓取整体（除非传递的值实际上是 an并且您使用而不是打印它，您会得到未定义的行为）。`(unsigned) int``unsigned int``%d``%u`

其他类型，AFAIR，不进行此类转换。

这一行：

```
print (" my int: %ld\n", (long)myInt); 
```

不会在这条线上给你买任何东西：

```
printf(" my int: %d\n", myInt); 
```

两者都是有效的，结果实际上是相同的。唯一的区别是前者可能会导致更大的代码和更长的执行时间（如果`sizeof(long) >= sizeof(int)`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T08:02:10.747

1.  参数在堆栈中传递，每个条目具有固定宽度（32 或 64）位。编译器将整数、字符、short 转换为体系结构的本机宽度，或者在 32 体系结构的 double（或 long long）的情况下，它从堆栈中分配两个插槽。“填充”要么用零完成，要么将变量的符号位复制到其余位。（称为符号位扩展）

2.  升级到 64 位的一个缺点是嵌入式系统缺乏兼容性，这些系统通常不提供 64 位打印。这也意味着在 32 位系统中一些性能损失，因为前 32 位总是被传递和转换（涉及 64 位宽除以 10）而没有任何实际用途。然而，更大的问题属于软件工程领域：“未来兼容”日志是否会产生错误的希望，即所有计算和系统的所有输入也可以在 32 位系统上以 64 位模式工作。

(long) 在 32 位架构中并不意味着 64 位。这用 (long long) 表示。

# php - PHP、Doxygen 和原始 HTML

> ID：12995791
> 
> 赞同：0
> 
> 时间：2012-10-21T07:16:27.607
> 
> 标签：php, html, doxygen, comments

我想在文档中包含一些原始 HTML。我正在使用 Doxygen 生成此文档，因此它包含在 PHP 脚本中。

问题是，如果我这样做：

```
\\\ \htmlonly
<table>
.... etc

\\\ \endhtmlonly 
```

PHP 解析原始 HTML 并因此产生错误。

但是，如果我在生成的页面中出现的每一行的开头添加“///”。

这个问题的解决方案是什么？或者是否可以让 Doxygen 使用各种标签生成表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:22:18.003

我不确定您的示例代码的上下文，因为我不了解 PHP，但通常 doxygen 注释看起来像：

```
/// \htmlonly
/// <table>
/// .... etc
/// \endhtmlonly 
```

注意所有*注释* 行（doxygen 解析注释，而不是生成文档的源代码）如何以 开头`///`，甚至是 HTML 代码。将`///`在包含在文档中之前从 HTML 中删除。试试上面的方法，看看是否能解决你的问题。如果没有，您能否提供更多上下文，即一个最小的工作示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-20T08:14:02.127

你用`include()`吗？这会解析 HTML，但这不是必需的。请改用[fpassthru](http://php.net/manual/en/function.fpassthru.php)。

# php - 读取目录文件功能

> ID：12995794
> 
> 赞同：2
> 
> 时间：2012-10-21T07:16:58.213
> 
> 标签：php, function, dir

我有 10 个包含一些子文件夹的主文件夹。我想创建一个循环，遍历主文件夹（10 个文件夹中的每个文件夹）并为每个文件夹创建标签。

我是 php 的初学者，我设法创建了一个程序来读取目录并创建链接。但是....每个目录中的代码都是相同的代码，我不想复制同一个文件 10 次，所以如果我想更改某些内容会很头疼...我无法创建正确的为此发挥作用。

有人能帮帮我吗？

```
<?php   

$dir = ".";
$handle = opendir($dir);
$entry = readdir($handle);
$foldername=basename(getcwd());

if ($handle = opendir($dir)) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            if (is_dir($entry) === true){        
                $foldername=basename($entry);                                           
               echo "<a class='directory' href='http://the_link/".$entry."'> ".$foldername." </a>";
            }                   
        }
    }
    closedir($handle);
}           
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:19:58.157

最简单的方法是使用 RecursiveDirectoryIterator

用法示例：

```
$ite = new RecursiveDirectoryIterator("../");
foreach ($ite as $file) {
  echo $file . "\n";   
} 
```

在您的情况下，您可以使用：

```
$dir = ".";
$ite = new RecursiveDirectoryIterator($dir);
foreach ($ite as $entry) {
  if (is_dir($entry)) {
    $foldername = basename($entry);
    echo "<a class='directory' href='http://the_link/".$entry."'> ".$foldername." </a>";
} 
```

或者在一个函数中：

```
function displayDir($dir) {
  $ite = new RecursiveDirectoryIterator($dir);
  foreach ($ite as $entry) {
    if (is_dir($entry)) {
      $foldername = basename($entry);
      echo "<a class='directory' href='http://the_link/".$entry."'> ".$foldername." </a>";
  }
} 
```

有关更多详细信息，请参阅[文档](http://php.net/manual/en/class.recursivedirectoryiterator.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:26:01.390

请试试这个：

```
<?php

  getDirectoryList("your directory path");

  function getDirectoryList ($directory) 
  {
    $results = array();   
    $handler = opendir($directory);

    while ($file = readdir($handler)) {    
      if ($file != "." && $file != "..") {
        $results[] = $file;
      }
    }
    closedir($handler);

    return $results;

  }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:09:20.973

对于扫描文件夹和子文件夹：

```
function scan_folder($from_folder = '/your/default/path/') {  

        if ($handle = @opendir ( $from_folder )) {

                while ( $file = readdir ( $handle ) ) {
                        if (is_file ( $from_folder . $file )) {      

                            echo $from_folder . $file;

                        } else if ((is_dir ( $from_folder . $file )) && ($file != '.') && ($file != '..')) {
                                 echo $from_folder . $file;
                        }
                }

                closedir ( $handle );
        }

} 
```

利用：

```
scan_folder('/your/path/to/scan/'); 
```

使用的功能：

*   [打开目录（）](http://www.php.net/manual/en/function.opendir.php)
*   [读取目录（）](http://www.php.net/manual/en/function.readdir.php)
*   [is_dir()](http://www.php.net/manual/en/function.is-dir.php)
*   [is_file()](http://www.php.net/manual/en/function.is-file.php)

# jquery - CodeSlider 选项卡大小调整

> ID：12995797
> 
> 赞同：0
> 
> 时间：2012-10-21T07:17:54.840
> 
> 标签：jquery, html, css, jquery-ui, slider

我正在使用[这个](http://kevinbatdorf.github.com/codaslider/)jquery 插件。这是我的html：

```
<div class="account_window" style="display:none;">
    <div class="coda-slider"  id="slider-id">
      <div>
        <h2 class="title">Option1</h2>
        <p>Stuff for option 1</p>
      </div>
      <div>
        <h2 class="title">Password</h2>
        <form id="change_Pass" action="" method="post">
            Current Password<span style="color:red;">*</span><input type="password" id="change_password" name="change_password"><br>
            New Password<span style="color:red;">*</span><input type="password" id="new_password" name="new_password"><br>
            Verify Password<span style="color:red;">*</span><input type="password" id="verify_password" name="verify_password"><br>
            <input type="submit" value="Submit" id="change_pass_submit">
         </form>
      </div>
    </div>
</div> 
```

这是jquery：

```
$('#slider-id').codaSlider({
    firstPanelToLoad: 1,
    dynamicArrows: false
}); 
```

因此，当我删除此行时`style="display:none;"`，选项卡可以正常工作并且看起来很完美。但是当我添加它时，选项卡看起来像这样：
![代码滑块](../Images/924b5b1ebe588639e137ae27d3e199ef.png)

我不知道为什么。没有控制台错误。[这](http://jsbin.com/welcome/37373/edit)是该问题的工作演示。为什么显示的这么奇怪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:39:37.943

您遇到的问题是因为 Coda Slider 在初始化时会在滑块周围创建一个包装器元素，这在隐藏其父元素的情况下不能很好地发挥作用。

解决方法是让滑块在可见*后初始化。*`account_window`

为此，请将您的 jQuery 更改为：

```
$('#show_coda').click(function(){
  $('.account_window').show();

  $('#slider-id').codaSlider({
    firstPanelToLoad: 1,
    dynamicArrows: false
  });
}); 
```

# php - 在页面底部而不是顶部打印错误？

> ID：12995798
> 
> 赞同：1
> 
> 时间：2012-10-21T07:17:55.150
> 
> 标签：php, error-reporting

在开发我的网站时，我启用了错误报告。但是每次生成错误时，它都会在页面顶部的开始标记之前生成。这有时会破坏文档并改变网站的许多方面，例如性能和元素的显示方式。

有什么方法可以收集所有错误并将它们全部显示在页面底部？

多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:30:29.380

例如，您可以创建自己的错误处理程序并将所有错误收集到文件中。或者进入数组，然后按照您的要求在页面底部显示所有错误。

应该是这样的：

```
<?php
// At the top of your PHP code

class MyError
{
    protected static $collected = array();

    public static function getCollectedErrors()
    {
      return self::$collected;
    }

    protected static function addError($key, $error)
    {
      if (!isset(self::$collected[$key]))
        self::$collected[$key] = array();

      self::$collected[$key][] = $error;
    }

    // CATCHABLE ERRORS
    public static function captureNormal( $number, $message, $file, $line )
    {
        // Insert all in one table
        $error = array( 'type' => $number, 'message' => $message, 'file' => $file, 'line' => $line );
        // Display content $error variable
        self::addError('error', $message . " at " . $file . ':' . $line);
    }

    public static function captureException( $exception )
    {
        // Display content $exception variable
        self::addError('exception', $exception);
    }

    // UNCATCHABLE ERRORS
    public static function captureShutdown( )
    {
        $error = error_get_last( );
        if( $error ) {
            ## IF YOU WANT TO CLEAR ALL BUFFER, UNCOMMENT NEXT LINE:
            # ob_end_clean( );

            // Display content $error variable
            self::addError('shutdown', $error);
        } else { self::addError('shutdown', '<none>'); return true; }
    }
}

set_error_handler( array( 'MyError', 'captureNormal' ) );
set_exception_handler( array( 'MyError', 'captureException' ) );
register_shutdown_function( array( 'MyError', 'captureShutdown' ) );
?> 
```

然后，您可以使用以下命令按类别访问所有错误：

```
Error::getCollectedErrors(); 
```

**UPD：**要在页面底部显示错误，请将此代码添加到要输出错误的位置：

```
<?php
    $errors = MyError::getCollectedErrors();

    foreach ($errors as $category => $items) {
        echo "<strong>" . $category . ":</strong><br />";

        foreach ($items as $error) {
            echo $error . "<br />";
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:26:20.240

我不知道将它们全部放在页面底部，但您可以将所有错误消息发送到如下错误文件：

```
error_reporting(E_ALL);
ini_set('display_errors', 'off');
ini_set('log_errors', 'on');
ini_set('error_log', 'path/to/error/file.log'); 
```

此外，在进行编码和测试时，您可以在 IDE 中保持文件打开，并在每次测试后检查它以查看是否发生了任何新错误。

# list - C链表访问冲突

> ID：12995801
> 
> 赞同：0
> 
> 时间：2012-10-21T07:18:35.610
> 
> 标签：list, pointers, linked-list, access-violation

我用指针和函数制作了这个程序，它应该是一个链表。我不断收到“访问冲突读取位置 0xcdcdcded”。在下面的最后一部分。我认为可能是我下一步没有初始化，但我是指针新手，不知道该怎么做。任何帮助是极大的赞赏。

```
typedef struct temp 
{
    char name[20];
    char telephone[10];
    temp *next;
} node;

node* creation1 ()
{    
    node *NEW = NULL;
    NEW = (node*)malloc(sizeof(node)); 
    return NEW;
}

node* creation2 ()
{   
    node *start= NULL;
    node *NEW = creation1();
    start= NEW;
    return start;
}

node* creation3 ()
{    
    node *NEW = creation1();
    node *current = NULL;
    current=NEW;
    return current;
} 

void consult ()
{   
    node *NEW= creation1();
    node *start= creation2();
    node *current = creation3();
    int exit;
    printf("How many contacts do you wish to add? ");
    scanf("%i",&exit);

    for(int i=1; i<=exit; i++)
    {
        NEW = (node*)malloc(sizeof(node));
        current->next=NEW;                 
        current = NEW; 
        fflush(stdin);
        puts("NAME: ");
        gets(NEW->name); 
        puts("TELEPHONE: ");
        gets(NEW->telephone);
        NEW->next=NULL;
    } 

    current=start->next;

    int i = 0;
    do 
    {
        i++;
        current = current->next; //this is where it stops and gives me the access reading violation
    }while (current != NULL);
}

int main(int argc, char** argv)
{  
    consult();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:04:16.007

由于这似乎是家庭作业，我不想透露太多，但您的基本问题是您首先使用`node *start= creation2();`. 在执行的这一点上， 的值`start->next`是垃圾，可以是任何东西。

然后，在你的 for 循环中，`start`节点根本没有被触及，这意味着它`start->next`仍然可以是任何东西。

接下来，在 行`current=start->next;`中，您将设置`current`为`start->next`的垃圾值。

然后最后一行`current = current->next;`你取消引用垃圾值并跳转到内存中的一个随机位置。

通常，如果您有一个指针值（例如`start->next`），并且在创建它时没有将指针设置为的好值，则应将其设置为`NULL`. 然后，在取消引用值之前（使用`->`运算符），您应该检查左侧的变量`->`是否等于`NULL`，如果是，则不执行`->`操作。我真的很难给出任何更具体的建议，因为您的代码中没有注释来解释应该发生的事情。

# objective-c - 显示标题和网址不起作用

> ID：12995805
> 
> 赞同：0
> 
> 时间：2012-10-21T07:18:57.510
> 
> 标签：objective-c, xcode4

我使用了这段代码：

```
- (void)webView:(WebView *)sender didStartProvisionalLoadForFrame:(WebFrame *)frame //2 errors on this line stating: expected ")" before "WebView" and expected ")" before "WebFrame"
{
    //Only report feedback from main frame.
    if (frame == [sender mainFrame]) {
        NSString *url = [[[[frame dataSource] request] URL] absoluteString];
        [adressBar setStringValue:url];
    }
}

- (void)webView:(WebView *)sender didRecieveTitle:(NSString *)title forFrame:(WebFrame *)frame // Same 2 errors as the first line of code
{
    if (frame == [sender mainFrame]){
        [[sender window] setTitle:title];
    }
} 
```

但它没有在文本字段中设置窗口的标题或完整的 url……我错过了什么吗？编辑：我已经连接了一切。

# php - 是否可以使用 PHP 检测 css 伪元素？

> ID：12995807
> 
> 赞同：1
> 
> 时间：2012-10-21T01:37:18.827
> 
> 标签：php, javascript, css, wordpress, responsive-design

在我使用 Twitter Bootstrap 的响应式 WordPress 主题中，我正在尝试使用类似于[CSS 条件加载](http://css-tricks.com/examples/ConditionalCSS/)但依赖 PHP 而不是 Javascript 的技术来最小化如此多的请求加载。

我想做的是使用 PHP 来检测`:after`伪元素内容属性，以根据浏览器的媒体查询/视口大小查看正在加载的元素。

这是示例 CSS：

```
 body:after { 
        display: none; 

        /* Default */
        content: "A";
    }

    @media (min-width: 35em) {
        body:after {
            content: "B";
        }
    } 
```

具体来说，如果 PHP 可以检测到`content: "A"`它处于活动状态，它将加载`custom_mobile_content()`呈现移动内容的钩子。如果它检测到`content: "B"`，它将加载`custom_desktop_content()`呈现更多桌面内容的钩子。

我尝试使用 javascript 版本，但它需要我将一大块格式化的 HTML 放入 javascript 变量中，并且在呈现页面时，在包含在 javascript 中的页面上存在大量无效且未使用的文本块。PHP 似乎更合适。

是否有可以轻松生成此代码的代码？

* * *

编辑：看来我必须将 JS 变量或函数传递给 PHP 才能使其工作，我想这很复杂。

这是我正在尝试使用的javascript：

```
$(function() {
    var currentSize = "A";
    $(window).resize(function() {
        var size = window.getComputedStyle(document.body, ':after').getPropertyValue('content');

        /* Ridiculous thing to deal with inconsistent returning of
        value from query. Some browsers have quotes some don't */
        size = size.replace(/"/g, "");
        size = size.replace(/'/g, "");

        if (size != currentSize) {
            if (size == 'B') {
               $(".content").load('<?php custom_hook(); ?>');
               currentSize = 'B';
            }
        }

    }).resize();

} 
```

我已将上述代码包含在 WordPress 页面本身中，因为它不需要缓存在文件中。它仅在此页面上使用一次。但是，这样做的问题是`custom_hook()`代码在页面上呈现，并且该挂钩包含一堆标记。如果 javascript 确定我正在使用`A`，则所有这些标记都无缘无故地出现在源代码中的页面上。我想找到一种方法来防止自定义钩子呈现，除非它被用于`B`. 希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:37:33.630

目前没有可靠的方法来检测伪元素，即使在 JavaScript 中也是如此。他们没有 CSS 对象模型 (CSSOM)。PHP 在这种情况下也无法帮助您，因为它只在服务器端起作用。

对于备用工作流程，您可以使用 JavaScript 找出当前处于活动状态的媒体查询。基于此，您可以在必要时加载其他资源。

有关如何使用来自 JavaScript 的媒体查询的详细信息，请参阅[MDN 上的这篇文章。](https://developer.mozilla.org/en-US/docs/DOM/Using_media_queries_from_code?redirectlocale=en-US&redirectslug=CSS%2FUsing_media_queries_from_code)

# java - 如何使用 Java 中的 Morphia 和 Play 框架从实体中检索特定字段

> ID：12995808
> 
> 赞同：6
> 
> 时间：2012-10-21T07:19:29.110
> 
> 标签：java, mongodb, playframework, morphia

我在 Play 中创建了一个大实体！Java 中的框架，我想只使用 Morphia 和 MongoDB 从数据库中检索特定字段。实体本身非常大并且包含许多字段，所以我想通过只检索一个字段来提高我的应用程序的性能。

我知道这是可能的，但我不知道该怎么做......
这是我班上的一些领域`Shop`：

```
public String imagePath;
public String profileImagePath;
public String Motto;
@Reference
public Category primeCategory;
public boolean isOnline; 
```

如您所见，该`primeCategory`字段是`Category`我要检索的实体。我在 Morphia 的网站上看到了一些可以实现的东西：

```
Datastore ds = null; 

Shop shop = ds.createQuery(Shop.class).retrievedFields(true, "primeCategory").get(); 
```

我不确定我到底要来这里做什么。

如果有人可以向我解释这是否是方法以及我应该如何做，并提供一个例子，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T19:06:49.633

尝试这个

```
Shop.createQuery().retrievedFields(true, "primeCategory").get() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T08:39:05.860

```
Shop shop = ds.createQuery (Shop.class).retrievedFields (true,"primeCategory","Other_field_1","Other_field_2").get(); 
```

会像这样检索文档：

```
{
     "_id":ObjectId("..."),
     "primeCategory":{
                       ...
                     },
     "Other_field_1":"....",
     "Other_field_2":"...."

} 
```

你有一个很好的尝试。

# python - Jenkins：将我的 Python 模块放在 PYTHONPATH

> ID：12995809
> 
> 赞同：4
> 
> 时间：2012-10-21T07:19:42.953
> 
> 标签：python, jenkins, environment-variables

我正在使用 Jenkins 来测试[`nodepy`](https://github.com/ketch/nodepy)我开发的 Python 模块。但是，我收到如下错误：

```
File "/var/lib/jenkins/jobs/NodePy/workspace/convergence.py", line 6, in workspace.convergence
Failed example:
    from nodepy import rk, convergence, ivp
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib/python2.7/doctest.py", line 1289, in __run
        compileflags, 1) in test.globs
      File "<doctest workspace.convergence[0]>", line 1, in <module>
        from nodepy import rk, convergence, ivp
    ImportError: No module named nodepy 
```

如何在 Jenkins 中设置 PYTHONPATH（以便我的模块可导入）？

我什至不确定应该添加哪个目录。似乎 Jenkins 把东西放在了 jenkins/jobs/nodepy/workspace/ 中，所以该目录甚至没有正确的名称供 python 找到它。

**编辑：**

python 模块[`nodepy`](https://github.com/ketch/nodepy)是一个`git`存储库，我已将我的 jenkins 作业配置为观看和签出。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T08:07:11.767

*   将其添加到您的**参数化**作业参数列表中（并填写或提供默认值）
*   或者，如果您对 jenkins 具有管理员访问权限，则可以将其添加到那里的系统变量中（转到`Manage Jenkins`，然后`System Configuration`）
*   或`sys.path.append`在您的脚本中使用。

例如

```
import sys
import os
# jenkins exposes the workspace directory through env.
sys.path.append(os.environ['WORKSPACE'])
import nodepy 
```

或者，在您的 jenkins 构建配置中，配置构建步骤（如果它是一个 shell 脚本）：

```
export PYTHONPATH=$WORKSPACE:$PYTHONPATH 
```

**包裹问题**

```
/var/lib/jenkins/jobs/NodePy/workspace/convergence.py 
```

这是一个问题，因为没有`nodepy`目录。所以即使你放置了正确的系统路径，你的包结构也不会是正确的。你可以做的是改变你的工作空间的样子，从：

```
/var/lib/jenkins/jobs/NodePy/workspace/convergence.py
/var/lib/jenkins/jobs/NodePy/workspace/ivp.py
/var/lib/jenkins/jobs/NodePy/workspace/rk.py 
```

至

```
/var/lib/jenkins/jobs/NodePy/workspace/nodepy/__init__.py
/var/lib/jenkins/jobs/NodePy/workspace/nodepy/convergence.py
/var/lib/jenkins/jobs/NodePy/workspace/nodepy/ivp.py
/var/lib/jenkins/jobs/NodePy/workspace/nodepy/rk.py 
```

**编辑：在正确的子目录中提取文件**

你的工作空间将是

```
/var/lib/jenkins/jobs/NodePy/workspace/ 
```

您无需更改工作区目录，它由您的作业名称 ( `NodePy`) 和您的 jenkins 配置键入，您只需**在**`nodepy`工作区中创建目录，并将您的文件放在那里。您可以[更改您的 jenkins 作业配置](https://stackoverflow.com/questions/7520979/how-to-get-hudsons-git-plugin-to-clone-repo-with-the-name-of-the-repo-in-the-pa)并让它在正确的子目录中签出repo ，或者您可以自己移动文件：**`git``nodepy`**

 **```
mkdir .nodepy
# .nodepy is hidden, * doesn't capture hidden files.
mv * .nodepy
mv .nodepy nodepy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-27T06:52:29.927

在python3安装过程中，确保安装适用于所有用户

自定义安装 -> 下一步 -> 为所有用户安装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T21:05:17.800

您应该安装`nodepy`作为测试过程的一部分。Jenkins 和其他测试驱动的开发工具需要能够在您安装的代码发生变化时更新它（以及验证您的安装过程是否正常工作），正确的方法是使用`.pth`链接或安装它结帐后。如果您只想使用从 github 签出的存储库，您可以从`workspace`目录中插入以下 shell 命令：

```
pip install -e ./nodepy 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T13:59:47.807

事实证明，我需要做的就是按照[这个问题](https://stackoverflow.com/questions/7520979/how-to-get-hudsons-git-plugin-to-clone-repo-with-the-name-of-the-repo-in-the-pa)的答案让 Jenkins 将我的 repo 克隆到一个子目录`workspace/nodepy/`中。由于 Jenkins 在 中运行构建`workspace`，因此它会找到该包。

当我第一次这样做时，它以某种方式创建了 nodepy/nodepy/nodepy/... 目录的无限递归。清理完工作区后，这个问题就消失了。**

# java - 如何停止 Java 线程？

> ID：12995817
> 
> 赞同：5
> 
> 时间：2012-10-21T07:21:05.123
> 
> 标签：java, multithreading

> **可能重复：**
> [你如何杀死 Java 中的线程？](https://stackoverflow.com/questions/671049/how-do-you-kill-a-thread-in-java)
> [如何在 Java 中启动/停止/重新启动线程？](https://stackoverflow.com/questions/1881714/how-to-start-stop-restart-a-thread-in-java)

[`Thread`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html)具有以下功能：

*   `destroy()`
*   `stop()`
*   `suspend()`

但它们都已被弃用。
你用什么来停止线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:24:04.530

你应该确保它只是在它应该运行的时候运行/退出。

检查[这个](http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)以获得解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T07:24:56.613

您可以使用布尔标志来停止线程。您也可以使用[Thread.isInterrupted()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#isInterrupted%28%29)来检查线程是否被中断并忽略与布尔标志相同的其余工作。

```
class Worker implements Runnable {
    private volatile boolean shouldRun = true;

    @Override
    public void run() {
        while (shouldRun) {
            // your code here
        }
    }

    public void cancel()
    {
        shouldRun = false;
    }
} 
```

如果您想知道为什么不推荐使用这些功能，可以查看[Java Thread Primitive Deprecation](http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T07:26:53.570

你可以这样做：

```
private boolean running = true;

public void stop () {
    running = false;
}    

public void run () {
    while (running) { 
        //your code goes here
    }
} 
```

这只是让 run-method 消失的简单方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T07:27:04.607

你礼貌地请他结束工作。该线程应该表现良好，并且在被询问时应该结束它的工作。

询问您使用`Thread.interrupt()`哪个会抛出`InterruptedException`（如果线程正在等待）或在线程中设置标志（如果不等待）。

然后，线程应该在捕获到时退出它的工作，`InterruptException`或者如果它做了很多长时间的工作（没有睡眠/等待），它应该不时检查它是否被中断，如果是则退出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T07:31:25.913

您提到的方法已被弃用，因为一旦使用它们可能会使系统进入不稳定状态：就像杀死进程一样。使用这些方法不会给线程任何优雅退出的机会。

结论是你正在实现的每个线程都应该有自己的优雅退出机制。通常，您执行以下操作。创建默认情况下的`boolean`标志。线程的方法应该实现如下循环：`exit``false``run()`

```
while (!exit) {
    // do the job
} 
```

添加`exit()`将此标志转换为`true`的方法，因此当从线程外部调用该方法时，`while`将在下一次迭代中离开循环。退出时您应该关心关闭资源等。

显然你可以通过发送 sing 来改进机制

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T07:44:32.890

任何线程都会运行以完成其工作。它应该确定自己是否还有更多工作要做。当您想停止一个工作线程时，这意味着该线程认为该工作存在，但您不希望该线程执行它。这绝对是您设计中的一个问题。在一个好的设计问题中，不需要停止/恢复线程。

# wordpress - ShareThis 插件 wordpress Magento FishPig 删除 @sharethis 提及并替换

> ID：12995822
> 
> 赞同：0
> 
> 时间：2012-10-21T07:22:03.003
> 
> 标签：wordpress, magento, plugins, sharethis, fishpig

```
<span class='st_twitter_hcount' st_title='<?php the_title(); ?>' st_url='<?php the_permalink(); ?>' st_via='twittername' displayText='twitter'></span> 
```

我正在使用上面的代码，想知道是否有人使用 FishPig、Magento、wordpress 和 Share This 插件遇到过这个问题。我根本无法用我的 twittername 获得 @share this replacecd。我也没有看到这个值的数据库表......也许有人会有想法。

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:28:47.163

您只需要将跨度上的“st_via”参数更改为您的 Twitter 用户名（不带“@”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:30:57.893

所以这就是我解决这个问题的方法，我使用 addthis 而不是 ShareThis，我非常高兴并让它立即工作。所以如果其他人有这个问题，我会使用 addthis。

# aop - 更改类变量的方法的切入点

> ID：12995824
> 
> 赞同：2
> 
> 时间：2012-10-21T07:22:43.780
> 
> 标签：aop, aspectj

是否可以编写一个有效的切入点来匹配更改特定类类型的类变量的方法？这样做的目的是我的类有一个 lastModificationDate，每当类变量发生更改时，我都想将其更新为最新日期。

方法示例：

```
public void stupidMethod() {

 ...
 for (int i = 0; i < 100; i++) this.var = whatever;
 ...
} <--- I want to match here 
```

目前我有这个，但它不是很理想：

```
after(SimpleEntity entity) : set(* *.*) && target(entity) && !within(SimpleEntityAspect) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:12:25.820

不存在，`get`并且`set`切入点仅适用于成员，但不适用于局部变量。因此，您的示例将仅匹配`SimpleEntity`对象的成员变量分配。如果这是您想要做的，请重新表述您的问题的标题和内容，以明确您真正想要实现的目标。还请提供更多代码上下文，例如类型声明的相关部分`SimpleEntity`。

我现在最好的猜测是，您希望匹配更改特定类型成员的方法的退出点。如果您在建议中还告诉我们您究竟想做什么（例如打印方法名称或分配的值等），我们可能会更好地帮助您。

* * *

**更新：**好的，我找到了一个使用`pertarget`方面实例化加上 ITD（类型间声明）的解决方案，可以满足您的需求。我没有测试性能或内存消耗，我把它留给你。

示例实体类：

```
public class SimpleEntity {
    private static int currentId = 1;

    private int id;
    private String name;
    private long lastModification;

    public SimpleEntity(String name) {
        this.id = currentId++;
        this.name = name;
    }

    public void stupidMethod(final int count) {
        for (int i = 0; i < count; i++)
            name = name.replaceFirst("_[0-9]+$", "") + "_" + i;
    }

    public int tripleValue(final int value) {
        return 3 * value;
    }

    @Override
    public String toString() {
        return "SimpleEntity [id=" + id + ", name=" + name + ", lastModification=" + lastModification + "]";
    }
} 
```

创建和使用实体的示例应用程序类：

```
public class Application {
    public static void main(String[] args) {
        SimpleEntity entity1 = new SimpleEntity("Adam");
        entity1.stupidMethod(3);
        entity1.tripleValue(11);
        entity1.stupidMethod(3);
        SimpleEntity entity2 = new SimpleEntity("Eve");
        entity2.stupidMethod(3);
        entity1.tripleValue(22);
        entity2.stupidMethod(3);
    }
} 
```

执行 Piotr Blasiak 要求的方面：

```
public privileged aspect SetterCallingMethodAspect pertarget(entitySetter(SimpleEntity)) {
    private static interface MemberChangeDetector {}
    private boolean MemberChangeDetector.changed;

    declare parents : SimpleEntity implements MemberChangeDetector;

    pointcut entitySetter(SimpleEntity entity) :
        set (* SimpleEntity+.*) && target(entity) && !within(SetterCallingMethodAspect);
    pointcut constructorExecution() :
        execution(*.new(..)) && !cflow(adviceexecution());
    pointcut methodExecution() :
        execution(* *(..)) && !cflow(adviceexecution());

    after(SimpleEntity entity) : entitySetter(entity) {
        entity.changed = true;
        System.out.println(this + ",  " + thisJoinPointStaticPart + "  ->  " + entity);
    }

    after(SimpleEntity entity) : if(entity.changed) && target(entity)
        && (constructorExecution() || methodExecution())
    {
        entity.changed = false;
        entity.lastModification = System.nanoTime();
        System.out.println(
            this + ",  " + thisJoinPointStaticPart +
            "  ->  update lastModification to " + entity.lastModification
        );
    }
} 
```

示例控制台输出：

```
SetterCallingMethodAspect@bb6ab6,  set(int SimpleEntity.id)  ->  SimpleEntity [id=1, name=null, lastModification=0]
SetterCallingMethodAspect@bb6ab6,  set(String SimpleEntity.name)  ->  SimpleEntity [id=1, name=Adam, lastModification=0]
SetterCallingMethodAspect@bb6ab6,  execution(SimpleEntity(String))  ->  update lastModification to 1863715110885880
SetterCallingMethodAspect@bb6ab6,  set(String SimpleEntity.name)  ->  SimpleEntity [id=1, name=Adam_0, lastModification=1863715110885880]
SetterCallingMethodAspect@bb6ab6,  set(String SimpleEntity.name)  ->  SimpleEntity [id=1, name=Adam_1, lastModification=1863715110885880]
SetterCallingMethodAspect@bb6ab6,  set(String SimpleEntity.name)  ->  SimpleEntity [id=1, name=Adam_2, lastModification=1863715110885880]
SetterCallingMethodAspect@bb6ab6,  execution(void SimpleEntity.stupidMethod(int))  ->  update lastModification to 1863715112627443
SetterCallingMethodAspect@bb6ab6,  set(String SimpleEntity.name)  ->  SimpleEntity [id=1, name=Adam_0, lastModification=1863715112627443]
SetterCallingMethodAspect@bb6ab6,  set(String SimpleEntity.name)  ->  SimpleEntity [id=1, name=Adam_1, lastModification=1863715112627443]
SetterCallingMethodAspect@bb6ab6,  set(String SimpleEntity.name)  ->  SimpleEntity [id=1, name=Adam_2, lastModification=1863715112627443]
SetterCallingMethodAspect@bb6ab6,  execution(void SimpleEntity.stupidMethod(int))  ->  update lastModification to 1863715114328497
SetterCallingMethodAspect@12d03f9,  set(int SimpleEntity.id)  ->  SimpleEntity [id=2, name=null, lastModification=0]
SetterCallingMethodAspect@12d03f9,  set(String SimpleEntity.name)  ->  SimpleEntity [id=2, name=Eve, lastModification=0]
SetterCallingMethodAspect@12d03f9,  execution(SimpleEntity(String))  ->  update lastModification to 1863715120762834
SetterCallingMethodAspect@12d03f9,  set(String SimpleEntity.name)  ->  SimpleEntity [id=2, name=Eve_0, lastModification=1863715120762834]
SetterCallingMethodAspect@12d03f9,  set(String SimpleEntity.name)  ->  SimpleEntity [id=2, name=Eve_1, lastModification=1863715120762834]
SetterCallingMethodAspect@12d03f9,  set(String SimpleEntity.name)  ->  SimpleEntity [id=2, name=Eve_2, lastModification=1863715120762834]
SetterCallingMethodAspect@12d03f9,  execution(void SimpleEntity.stupidMethod(int))  ->  update lastModification to 1863715121338606
SetterCallingMethodAspect@12d03f9,  set(String SimpleEntity.name)  ->  SimpleEntity [id=2, name=Eve_0, lastModification=1863715121338606]
SetterCallingMethodAspect@12d03f9,  set(String SimpleEntity.name)  ->  SimpleEntity [id=2, name=Eve_1, lastModification=1863715121338606]
SetterCallingMethodAspect@12d03f9,  set(String SimpleEntity.name)  ->  SimpleEntity [id=2, name=Eve_2, lastModification=1863715121338606]
SetterCallingMethodAspect@12d03f9,  execution(void SimpleEntity.stupidMethod(int))  ->  update lastModification to 1863715121829729 
```

# mfc - (MFC) 包括 AfxMessageBox、Dialog 和 File Explorer 在内的所有弹出窗口都位于主窗口的后面

> ID：12995827
> 
> 赞同：1
> 
> 时间：2012-10-21T07:23:11.470
> 
> 标签：mfc

正如我在标题中所写的，所有弹出消息都隐藏在主窗口的后面，我将其创建为 SDI（单文档界面）表单并为其添加了 Office 2007 样式。

我尝试使用`::MessageBox`而不是`AfxMessageBox`和`SetWindowPos`函数将 z 顺序固定到底部，但它不起作用。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:27:22.233

您很可能有一个隐藏的顶级父级。在里面放一个断点`CWinApp::DoMessageBox`并检查您的弹出窗口被分配了哪个父窗口！

# c++ - 与媒体基金会的视频合成

> ID：12995830
> 
> 赞同：6
> 
> 时间：2012-10-21T07:24:06.043
> 
> 标签：c++, windows, winapi, video, ms-media-foundation

我正在尝试将 2 个视频合成为一个（也是音频）并另存为文件。比如说，在最终视频的左半部分显示一个源视频，在右侧显示另一个源。任何编码都可以。不是 DirectShow。

我怀疑 IMFVideoMixerControl 可能与此有关，但不幸的是，我对 MF 太陌生，无法确定为实现这一目标而采取的正确步骤。如果您能给我一些指导或网络上有任何示例，请告诉我。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T20:01:17.023

`IMFVideoMixerControl`用于渲染视频。您在查看 SourceReader 时走在正确的轨道上。

这是我要做的：

1.  `IMFSourceReader`为每个视频源创建一个。
2.  创建一个`IMFSinkWriter`并配置它的帧宽度等于源阅读器帧宽度的总和。
    1.  用于`IMFSourceReader::GetCurrentMediaType`获取源媒体类型。
    2.  `MFGetAttributeSize`与 GUID一起使用`MF_MT_FRAME_SIZE`可获取每种源类型的框架尺寸。
    3.  为 SinkWriter 创建一个媒体类型，`MFCreateMediaType`并用于`IMFMediaType::CopyAllItems`将属性从源复制到接收器媒体类型。
    4.  `MFSetAttributeSize`与 GUID一起使用`MF_MT_FRAME_SIZE`来设置接收器类型的增加的框架尺寸。
    5.  用于`IMFSinkWriter::AddStream`创建与源类型相同的视频流，宽度属性除外
3.  为每个源调用 IMFSourceReader::ReadSample，为每个源提供一个 IMFSample。
4.  分配一个新的`IMFSample`，附加一个`IMFMediaBuffer`增加框架宽度的新的。
5.  用于`MFCopyImage`将每个源缓冲区复制到分配的媒体缓冲区的对应端。
6.  用于`IMFSinkWriter::WriteSample`将您`IMFSample`的内容写入文件接收器。

请参阅[此示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663604%28v=vs.85%29.aspx)了解一些基本的 SourceReader/SinkWriter 处理，尽管此示例使用视频捕获源而不是文件。您可以使用 SourceReader`MFCreateSourceReaderFromURL`而不是`MFCreateSourceReaderFromMediaSource`.

编辑：我意识到你也问过音频。我的回答仅涉及合成视频流。

# c++ - 测试换行符

> ID：12995832
> 
> 赞同：2
> 
> 时间：2012-10-21T07:24:37.863
> 
> 标签：c++, newline

我需要帮助测试换行符。在我的程序中，我有

```
char s[9][9];
for(unsigned int i = 0; i < 9; i++)
{
  for(unsigned int j = 0; j < 9; j++)
  {
      cin >> s[i][j];
      if(s[i][j] == '\n')
      {
        cout << "ERROR" << endl;
      }
  }
} 
```

我怎样才能得到它，以便二维字符数组可以检测是否有换行符？我的程序似乎只是跳过了 if 语句。如果可能的话，我宁愿不使用 getline 或任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T07:31:59.400

您可以使用任[`noskipws`](http://www.cplusplus.com/reference/iostream/manipulators/noskipws/)一标志

```
cin >> noskipws >> s[i][j]; 
```

或[`cin.get ();`](http://www.cplusplus.com/reference/iostream/istream/get/)方法：

```
s[i][j] = cin.get (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:37:22.503

这可以解决问题。

```
#include "iostream"
using namespace std;

int main()
{
    int count = 0;
    char s[9][9];
    for(unsigned int i = 0; i < 9; i++)
    {
      for(unsigned int j = 0; j < 9; j++)
      {
        cin >> noskipws >>s[i][j];
        count++;
          if(s[i][j] == '\n' || count == 82)
          {
            cout << "ERROR" << endl;
          }
      }
    }
} 
```

# java - WebSphere MQ 是 WebSphere AS 8 / 8.5 中的默认 JMS 提供程序吗？

> ID：12995835
> 
> 赞同：3
> 
> 时间：2012-10-21T07:25:17.427
> 
> 标签：java, jms, websphere, ibm-mq

对于 WebSphere 中的 JMS 测试，我下载了 WebSphere AS 8.0 的开发人员版本。

WebSphere MQ（作为 IBM 的单独产品提供）是否已包含在此版本中，或者 WAS 是否使用不同的 JMS 提供程序？

* * *

更新：我知道在（基于 Apache Geronimo 的）IBM WASCE（“社区版”）中，Apache ActiveMQ 被用作默认的 JMS 提供程序。

WAS 8.0 / 8.5 中使用了哪种产品，IBM 专有产品或像 ActiveMQ 这样的开源产品，如下面的答案所示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T08:10:39.663

WebSphere Application Server 附带一个名为`Service Integration Bus (SIBus)`. 这也被称为 WebSphere Application Provider 的默认消息传递提供程序，并且是 Java EE 兼容的消息传递引擎。它具有
1) 集群
2) 支持 P2P 和 Pub/Sub 消息传递样式等功能。
3) 高可用性
4) 安全性
5) 并且可以与 WebSphere MQ 集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T07:26:45.107

根据 Java EE 6 的要求，Websphere AS 带有自己的 JMS 提供程序。

提供者不是 MQ。它可以是 ActiveMQ 的修改版本或任何其他 JMS 兼容的实现。

# symfony - 如何在容器编译之前向 Symfony 2 添加自定义路由？

> ID：12995842
> 
> 赞同：1
> 
> 时间：2012-10-21T07:26:05.183
> 
> 标签：symfony, routes

让我更详细地解释一下这个案例，因为标题如果太长就不能很好地解释它。

我正在 SF2 之上构建一个迷你框架，以与我们的遗留系统一起使用。我们开发了一个迷你的、简单的插件系统，每个插件都有自己的 routing.xml，如下所示：

```
routes:
  admin_plugins:
    pattern:  /manager/
    defaults: { _controller: plugins\riCore\AdminController::indexAction } 
```

我们显然想将这些路由添加到 routeCollection 中，但是有 1 个调整：我们希望在路由模式和 id 前面加上插件名称。我们曾经遍历插件列表并手动执行如下操作：

```
self::$container->get('router')->getRouteCollection()->add($plugin_lc_name . '_' . $key, new Route($route['pattern'], $route['defaults'], $route['requirements'], $route['options'])); 
```

然而，现在我们开始使用 SF2 内核并编译容器，我们开始遇到这个问题：

```
[21-Oct-2012 08:40:57] PHP Fatal error:  Call to undefined method Symfony\Component\Routing\RouteCollection::__set_state() in plugins\cache\prod\pluginsProdProjectContainer.php on line 791 
```

所以我认为这可能是由于我们试图 getRouteCollection() 太快了，也许必须有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:53:20.153

要回答我的问题，是的，它似乎有效。我只是还没有找到让 SF2 缓存这些路由的方法。下面是我用来添加动态路由的部分代码。如您所见，我想为路由添加某些前缀

```
$plugin_lc_name = strtolower($plugin);
                foreach ($plugins_settings[$plugin]['routes'] as $key => $route) {
                    $route = array_merge(array('pattern'      => '',
                                               'defaults'     => array(),
                                               'requirements' => array(),
                                               'options'      => array()), $route);
                    if (strpos($route['pattern'], '/') !== false)
                        $route['pattern'] = $plugin_lc_name . $route['pattern'];
                    else
                        $route['pattern'] = $plugin_lc_name . '_' . $route['pattern'];

                    $container::get('router')->getRouteCollection()->add($plugin_lc_name . '_' . $key, new Route($route['pattern'], $route['defaults'], $route['requirements'], $route['options']));
                } 
```

# database - 向数据库表添加内部 ID 会提高性能吗？

> ID：12995844
> 
> 赞同：0
> 
> 时间：2012-10-21T07:26:32.907
> 
> 标签：database

目前我有一个唯一的业务键，它被设置为主键来识别表记录。

最近，我的团队建议再添加一个内部自动编号 ID，他们的反馈将提高性能。

真的是这样吗？即使我已经拥有一个独特的业务密钥来提高性能，我是否真的应该创建额外的内部自动编号 ID

# jquery - 我的 jQuery 和 CSS 点击切换菜单表现得很奇怪

> ID：12995850
> 
> 赞同：0
> 
> 时间：2012-10-21T07:27:18.460
> 
> 标签：jquery, css, menubar

我在 jQuery 中的弹出菜单遇到了各种奇怪和古怪的问题。

该菜单应该位于窗口底部的工具栏上，并在单击时弹出（但在悬停时不会弹出）。然后它应该在以下情况下再次隐藏：a）单击菜单项，b）再次单击打开它的工具栏按钮，c）或单击其他任何内容时。

起初这似乎工作得很好，但它已经开始恶化。现在，我只剩下一个小故障......

这是发生的事情：

1.  我加载页面
2.  我单击第一个菜单按钮。它会按应有的方式弹出菜单。
3.  我单击第二个菜单按钮。它弹出，我打开的另一个弹出。
4.  让第二个打开，我再次单击第一个。啊！第二个保持开放！现在它们都同时开放了！？？
5.  现在我单击页面中的某些内容以使它们消失。只有第一个菜单消失了！第二个徘徊。为了让 IT 消失，我必须点击它的菜单按钮。

请帮忙！！！这是我的jsFiddle：

[http://jsfiddle.net/xn4TN/31/](http://jsfiddle.net/xn4TN/31/)

这是我的 JavaScript：

```
 var togglemenu = null;
    function fn_togglemenu(datatarget) {
        $('.bottom-menu-bg ul li ul[data-target="' + datatarget + '"]').slideToggle(function() {
            togglemenu = $(this).is(':visible') ? datatarget : null;
            $('.bottom-menu-bg ul li ul[data-target="' + datatarget + '"]').parent('li a').toggleClass('hover');
        });
    }
    $(document).ready(function() {
        $('.bottom-menu-bg ul li a').click(function(ev){
            ev.preventDefault();
            fn_togglemenu($(this).attr('data-target'));
        });
        $(document).click(function(ev){
            if(togglemenu != null) {
                fn_togglemenu(togglemenu);
            }
        });
    }); 
```

有太多代码无法实际包含内联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:58:39.310

Toggle 并没有在此处隐藏其他菜单，因此最好明确说明。试试这个：

```
function fn_togglemenu(datatarget) {
    // hide menus
    $('.bottom-menu-bg ul li ul').hide();
    $('.bottom-menu-bg ul li').removeClass('hover');
    // show target menu
    $('ul[data-target="' + datatarget + '"]').slideToggle(function() {
        $('ul[data-target="' + datatarget + '"]')
            .parent('li a').addClass('hover');
    });
 }

$(document).ready(function() {
    $('.bottom-menu-bg ul li a').click(function(ev) {
        ev.preventDefault();
        ev.stopPropagation();
        fn_togglemenu($(this).attr('data-target'));
    });

    $(document).click(function(ev) {
        // explicitly hide menus
        $('.bottom-menu-bg ul li ul').hide();
    });
}); 
```

​</p>

注意：也停止了链接点击处理程序的传播。

这是您更新的 jsfiddle：http: [//jsfiddle.net/benedict_w/hzHKD/](http://jsfiddle.net/benedict_w/hzHKD/)

# java - Java中带参数的方法

> ID：12995855
> 
> 赞同：7
> 
> 时间：2012-10-21T07:27:43.070
> 
> 标签：java, methods, parameter-passing

有人可以解释**为什么**这有效。

我在 Eclipse 中有 2 个类。一个名为“Car”的类包含以下代码..

```
public class Car {
    public void printOut(String variable1){
        System.out.println("Hello " +variable1);
    }
} 
```

另一个类，也就是我的“主要”所在的地方，叫做“House”，里面的代码是

```
import java.util.Scanner;

class House {
    public static void main(String args[]){
        Scanner input = new Scanner(System.in);
        Car carObject = new Car();

        System.out.println("Enter name here: ");
        String variable2 = input.nextLine();

        carObject.printOut(variable2);
    }
} 
```

当我运行代码时，它会工作，它会写“在此处输入名称”，当我输入它时，它会继续说“你好”输入名称“”

我的问题是，'variable1' 和 'variable2' 是否有任何关系，除了它们都是 String 类。

因为我对为什么代码编译正确感到困惑。

对我来说，看起来变量 1 与变量 2 没有相关性，即使它们都是 String 类，但看起来它们从来没有相互交互，并且 variable1 没有在“House”类中使用全部，但它仍然知道编译我输入的任何内容。就好像 'variable1' 被 'variable2' 替换，并且 variable2 包含的任何内容都会被打印出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T07:34:34.630

类中的方法定义`Car`是您使用它时的原型。你有没有用“黑匣子”教过数学中的函数？你输入一个数字，然后得到输出。所以，你输入 3，如果函数是 f(x) = Xx2，输出就是 6。在你调用方法之前，var2 和 var1 是完全不同的。但是，在该方法中，传递了 var2 并替换了您在该方法中使用的所有 var1。别担心，我开始Java的时候也没有这个

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T07:35:36.570

它们之所以相关，只是因为您正在传递`variable2`给您的`Car.printOut`方法。想象一下这个类比：你知道如何根据命令做数学作业。你是一个被调用的对象，`FacelessVoid`你有一个名为 的方法`doHomework`。 `doHomework`接受一个类型的参数`Work`。在现实世界中，我会有一箱工作，我会把这箱工作扔到你的桌子上。无论我在盒子上写什么对你来说都无关紧要，但盒子里的东西会被扔到你的桌子上，在那里你可以随意称呼它。

这正是您的代码中发生的情况：您有一个名为 的字符串`variable2`，其内容被“转储”到`variable1`inside `printOut`。值得注意的是，字符串实际上并没有`dumped`进入您的方法，而是复制了一个引用。所以它是同一个对象，只是被称为不同的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T07:32:01.100

变量 2 中的引用将被简单地称为复制到变量 2 中。变量 2 作为方法参数传递。除此之外没有任何关系。变量 2 仅对 main 是本地的，variable1 仅对 printOut 是本地的。将 variable1 视为期望来自调用方法的值的函数参数。这意味着您可以将任何字符串传递给 printOut。

例如，`carObject.printOut("Toyota")` 如您所见，我没有将变量传递给 printOut，而是一个硬编码字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T07:46:53.390

variable2 是对内存中某处的字符串的**引用。**Java 使用 variable2 中的值来找出字符串的位置。例如：

```
variable2                   memory location 1100
[1100]      ------>         "hello" 
```

variable1 也是对内存中某处的字符串的引用。当您调用该函数时，variable2 中的值（在本例中为 1100）被放置在 variable1 中。

```
variable1                   memory location 1100
[1100]      ------>         "hello" 
```

因此该函数可以使用 variable1 找到 variable2 引用的字符串，因为字符串的位置都包含在两者中。或者换一种说法，它们都引用相同的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T07:31:12.217

在调用该方法时，变量 2 的值将被移动到变量 1

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T07:32:18.320

它们与您将 variable2 传递给 printOut() 方法完全相同。variable1 只是方法参数的名称。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-21T07:33:04.323

来自调用者或被调用者的变量名无效。你可以有一个变量参数命名`orange`和另一个`helicopter`它会做同样的事情。重要的是它们必须具有相同的类型（此处`String`）。

无论两个变量的名称如何，调用者变量的内容都会传递给方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-21T07:33:05.970

`variable1`实际上不是变量，而是将传递给方法的变量的名称。您将需要此名称，因为您在方法中使用它进行某些操作。因此，当您通过 时`variable2`，它现在确实是一个变量，您会在方法中以`variable1`. 希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-21T07:33:48.830

在 Java 中，参数总是按值传递。但是，如果您传递一个对象，则它指向原始对象引用，您可以修改原始对象。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-21T07:36:49.457

没有关系 v1 和 v2。当您从 Hous 类调用 car.printOut() 方法时，它会将 v2 作为值推送到堆栈。car.printOut() 方法将此值从堆栈中弹出到 v1 变量。因此，您可以使用任何名称。

此外，当您在 printOut() 处更改 v1 的值时，v2 不会更改。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-21T07:41:33.387

其他人已经给出了很好的答案，但只是为了让您的词汇正确，`variable1`称为[“形式参数”](http://wiki.answers.com/Q/What_is_the_difference_between_actual_and_formal_parameters)，而`variable2`实际参数，也称为传递给方法的“参数” `printOut`。在传递参数时，更容易意识到你只是在玩名字。在直觉层面，它只是在玩弄数据位置，而不是按名称引用东西。

# python - 错误：pyopencl：为特定设备创建上下文

> ID：12995859
> 
> 赞同：1
> 
> 时间：2012-10-21T07:29:04.613
> 
> 标签：python, opencl, pyopencl

我想在我的平台上为特定设备创建上下文。但我收到一个错误。

代码：

```
import pyopencl as cl
platform = cl.get_platforms()
devices = platform[0].get_devices(cl.device_type.GPU)
ctx = cl.Context(devices[0]) 
```

我得到的错误：

```
Traceback (most recent call last):
  File "D:\Programming\Programs_OpenCL_Python\Matrix Multiplication\3\main3.py", line 16, in <module>
    ctx = cl.Context(devices[0])
AttributeError: 'Device' object has no attribute '__iter__' 
```

如果我使用，程序编译和执行没有任何错误和警告：

```
ctx = cl.create_some_context() 
```

但是每次使用此功能执行程序时，我都必须手动选择设备类型。我可以设置以下环境变量

```
PYOPENCL_CTX='0' 
```

使用它，我将无法根据要求为可用的不同设备创建上下文。对于我创建的所有上下文，它将默认设置为设备 0。

有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T19:22:36.340

根据 PyOpenCL 文档，[Context](http://documen.tician.de/pyopencl/runtime.html?highlight=get_devices#pyopencl.Context)采用设备列表，而不是特定设备。

如果您将上下文创建代码更改为：

```
platform = cl.get_platforms()
my_gpu_devices = platform[0].get_devices(device_type=cl.device_type.GPU)
ctx = cl.Context(devices=my_gpu_devices) 
```

它应该工作。如果您真的想将选择限制为仅一个设备，您可以操作`my_gpu_devices`列表，例如：

```
my_gpu_devices = [platform[0].get_devices(device_type=cl.device_type.GPU)[0]] 
```

# php - 每周每月产品销售报告

> ID：12995863
> 
> 赞同：0
> 
> 时间：2012-10-21T07:30:52.810
> 
> 标签：php, mysql, sql

如何运行 SQL 查询来检索每周和每月的销售报告。

**表：订单**

## ID |Product_id | 订购价格 | 数量 | 购买日期

```
1        1           34         2        9/10/12
2        1           34         2        8/10/12
3        4           34         2        07/10/12
4        3           34         2        22/09/12
5        1           34         2        9/10/12
6        1           34         2        22/09/12
7        4           34         2        9/08/12
8        3           34         2        22/09/12 
```

**表：产品**

```
ID | Name | description

1    A       ksfjsdkf
2    B       ksfjsdkf
3    C       ksfjsdkf
1    A       ksfjsdkf 
```

**预期结果** ：以下是不准确的示例结果

```
product_name           Weekly Sum(QTY), weekly revenue,  Monthly SUM(QTY), monthly revenue

A                           120             3000           2345                  234343 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:07:40.197

好的，这里是数量和订单价格的简单查询

```
SELECT p.Description, psw.qtysum, psw.opsum, psm.qtysum, psm.opsum
FROM Products p
LEFT JOIN
  ( SELECT sw.product_id, SUM( sw.QTY ) AS qtysum, SUM( sw.`order price` ) AS opsum 
    FROM orders sw 
    WHERE WEEK( sw.`purchase date`) = WEEK( current_date )
    AND YEAR( sw.`purchase date`) = YEAR( current_date )
    GROUP BY sw.product_id ) psw 
  ON p.id = psw.product_id

LEFT JOIN
  ( SELECT sm.product_id, SUM( sm.QTY ) AS qtysum, SUM( sm.`order price` ) AS opsum 
    FROM orders sm 
    WHERE MONTH( sm.`purchase date`) = MONTH( current_date )
    AND YEAR( sm.`purchase date`) = YEAR( current_date )
    GROUP BY sm.product_id ) psm 
  ON p.id = psm.product_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:45:47.140

您可以使用 php datetime("W") 获取 weeknumber 和 datetime("m") 获取月份编号，然后将数据库中的所有日期转换为 weeknumber 和 monthnumber 并对其进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:00:46.943

```
SELECT p.name, week.qty, week.price, month.qty, month.price
FROM products p LEFT JOIN
  (SELECT p.id AS prod_id, SUM(o.qty) AS qty, SUM(o.price) AS price
   FROM products p LEFT JOIN orders o ON p.id = o.prod_id
   WHERE o.date >= DATE_SUB(CURDATE(), INTERVAL 7 day)
   GROUP BY p.id) AS week ON p.id = week.prod_id LEFT JOIN
  (SELECT p.id AS prod_id, SUM(o.qty) AS qty, SUM(o.price) AS price
   FROM products p LEFT JOIN orders o ON p.id = o.prod_id
   WHERE o.date >= DATE_SUB(CURDATE(), INTERVAL 1 month)
   GROUP BY p.id) AS month ON p.id = month.prod_id 
```

没有太优化，但我这里没有 mysql cli，所以我不会发布任何没有能力测试甚至可能无法工作的复杂内容。

# asp.net - 如何在 ActiveX 对象上显示模式弹出窗口？

> ID：12995871
> 
> 赞同：4
> 
> 时间：2012-10-21T07:32:12.820
> 
> 标签：asp.net, activex, activexobject

我的页面中有一个`modal popup extender`和一个`ActiveX object control`，但是当我显示它时，弹出窗口显示在对象下方。如何在对象控件上显示弹出窗口？这是我的代码：

```
<object id="lablab" clsid="clsid:...." width="100px" height="120px">
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:16:57.010

我在 div 中使用弹出窗口，但我不能在弹出窗口上显示它，因为对象比弹出窗口强:)，并且弹出窗口显示在对象下方。我使用 iframe 标签！并设置在 iframe 上弹出的 z-index 属性，iframe 比 object 强

```
<asp:Panel runat="server" ID="PnlRefer" Width="300px" Style="background-color: #D6D6D6; padding-bottom: 5px; min-height: 145px; display: block; position: absolute; top: -100px;">//my popup
<iframe src="" width="297px"  style="position: fixed;z-index:-1; height:303px;" 
            scrolling="no"></iframe>
<div style="z-index: 1;height: 300px;Width:300px;">
...//content of popup
</div>
</asp:Panel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:46:56.387

：将它包裹在 DIV TAG 周围，然后您可以轻松地将移动事件捕获到 div 并触发您想要的任何代码

```
<div style="width:100px; height:120px;">
   <object id="lablab" clsid="clsid:...." width="100px" height="120px">
   </object>
</div> 
```

# c# - 对 MDI 应用程序的双显示器支持

> ID：12995873
> 
> 赞同：3
> 
> 时间：2012-10-21T07:32:30.253
> 
> 标签：c#, winforms, mdi, multiple-monitors

我需要为我的 MDI 应用程序实现双显示器支持。任何人都可以提出一个好的方法来做到这一点。

在双监视器模式下运行时，我尝试将我选择的子表单“MDIparent”字段设置为“null”，以将子表单带出 MDI 窗口。但是，如果我重新分配了 MDIparent，因为我还需要在双模式下执行此操作，则子窗体事件不会正确触发。

欢迎任何建议。

谢谢苏尼尔

# php - ahref 的 strip_tags 无法正常工作

> ID：12995875
> 
> 赞同：0
> 
> 时间：2012-10-21T07:32:43.857
> 
> 标签：php, html, strip-tags

我正在使用 strip_tags() 函数来提取链接的内容（文本部分不是链接部分）。该字符串是从 twitter 获得的。不幸的是，它返回相同的东西。

代码如下

```
$a = $cur['source'];
echo strip_tags($a); 
```

**输入**

```
<a href="http://twitter.com/download/android">Twitter for Android</a> 
```

**输出**

```
<a href="http://twitter.com/download/android">Twitter for Android</a> 
```

当我将输入复制粘贴到字符串并尝试 strip_tags 时，它工作得很好。可能是什么原因/？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:48:48.273

您需要使用[html_entity_decode](http://fr2.php.net/function.html-entity-decode)因为您的 HTML 看起来是 HTML，但实际上并非如此（事实上，所有 html 代码本身都被编码为其他 html 代码）。

如果你尝试`echo htmlentities($cur['source'])`，你会看到

```
&lt;a href=&quot;http://twitter.com/download/android&quot;&gt;Twitter for Android&lt;/a&gt; 
```

这意味着该字符串可以在浏览器上显示而不会被解释为 html（在您的情况下为链接）。例如，如果我想`<html>`在 Stackoverflow 上显示而不看到我的`<html>`标签被解释，这将非常有用。

# asp.net - IE9隐藏了我网页的一部分，为什么？

> ID：12995883
> 
> 赞同：1
> 
> 时间：2012-10-21T07:33:21.050
> 
> 标签：asp.net, internet-explorer-8, internet-explorer-9, popupwindow

我有一个用 ASP.NET Framework 4.0 编写的 Web 应用程序。Web 应用程序已有 10 年的历史，仍然存在大量基于旧框架 2.0 的遗留代码。决定将 Telerik RibbonBar 控件添加到页面中，一旦引入 Telerik，某个弹出式浏览器窗口看起来就不再一样了。奇怪的是，在实现 RibbonBar 控件时弹出窗口没有被触及，并且弹出浏览器窗口中不存在其他 Telerik 控件。

在某些机器上，它在 IE 8 中看起来仍然不错，但在 IE9 中的所有机器上，布局变得一团糟，似乎部分内容被隐藏了。

布局利用许多用户控件到一个带有 Javascript 布局控制的 aspx 页面布局。

**这个弹出式浏览器窗口的旧外观和外观应该是这样的：**

![Telerik 更新前](../Images/8c8fe492c730bff1a4ae9e7692523fb1.png)

**浏览器弹出窗口当前的外观：**

![Telerik 更新后](../Images/ee933f6e0fac2aa1e3ef5b7f396af0c3.png)

有谁知道为什么这可能发生在 IE9 而不是 IE8 中？

***答案（由[blachshma](https://stackoverflow.com/users/1379664/blachshma)提供）：*** IE=EmulateIE8。Emulation 说的非常具体，所以 IE=8 或 IE=Emulate8 不起作用，它必须说 IE=EmulateIE8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:18:59.620

IE9 更符合 W3C 标准，这意味着不再支持以前版本的 IE 上可用的某些“功能”。

[你可以在这里](http://blogs.msdn.com/b/ie/archive/2011/03/18/preparing-your-site-for-ie9.aspx)阅读更多关于它的信息。

要查看您网站上的具体问题，您可以使用[IE9 Compat Inspector](http://blogs.msdn.com/b/ie/archive/2011/04/27/ie9-compat-inspector.aspx)

如果你希望 IE9 像 IE8 一样呈现你的页面，你可以使用这个 META 标签

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"> 
```

或者对于 IE7

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" > 
```

# jquery-plugins - 将 jquery 插件添加到 Symfony 2.1 项目

> ID：12995884
> 
> 赞同：2
> 
> 时间：2012-10-21T07:33:21.890
> 
> 标签：jquery-plugins, symfony, assets, assetic

如何将一些 jQuery 插件添加到 Symfony 2.1 项目？

我使用 composer 安装所有前端资产，因此所有插件都存储在**Symfony/vendor**目录中。

我可以指定 JS 文件加载到这样的模板中：

```
{% javascripts filter='?yui_js' output='js/compiled/plugins.js'
    '%kernel.root_dir%/../vendor/author/plugin1/plugin.js'
    '%kernel.root_dir%/../vendor/author/plugin2/plugin.js'
    '%kernel.root_dir%/../vendor/author/plugin3/plugin.js'
%} 
```

并在调用后：

```
php ./app/console assetic:dump ... 
```

所有指定的文件都将被编译并放置在**Symfony/web**目录下。

但是如果某些插件需要的不仅仅是一个 JS 或 CSS 文件怎么办？如果它需要从插件目录（不在网络服务器的文档根目录中）动态加载一些图像、样式或脚本怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:10:27.450

不幸的是，这是 Assetic 的一个小问题。将 css 文件合二为一`assetic:dump`可能会破坏插件的内部目录结构。它如何从资产倾销中幸存下来几乎取决于插件自己的架构。

一种选择[是使用`assets:install`命令](http://symfony.com/doc/current/book/templating.html#including-stylesheets-and-javascripts-in-twig)将资产文件从 Bundle/Resources/public/ 文件夹复制或符号链接到 web/bundles/ 目录。

我通常做的是将外部库文件（css、js 和图像）直接放在 web/ 下适当的子文件夹中。当 css 和 js 文件合并并放置到 Web 根目录（带有`assetic:dump`）时，所有插件文件都可以从正确的子文件夹中找到。在 CDN 环境中工作时，此方法也适用。然而，这不是最优雅的解决方案，它稍微违反了所有 Bundles（或插件）应该彼此分开的想法。

# iphone - IOS UIImage 按名称从库中选择（获取名称）

> ID：12995887
> 
> 赞同：1
> 
> 时间：2012-10-21T07:33:57.897
> 
> 标签：iphone, ios, uiimageview

简单的想法是用户从照片库中选择图像（完成）然后它显示在 UIImageView 中（完成）

这是我要求的部分：1-当用户选择照片时，我需要将其名称存储在 sqlite DB 中。2-稍后我想从照片库中获取另一个 UIImageView 中的照片，通过存储的名称选择它。

数据库没有问题，只是图像的名称以及如何按名称从图库中获取它。

请为我提供解决方案或解决方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:05:52.830

马哈茂德，

我刚刚回答完另一个可以帮助你的问题。此外，如果您只需要存储不需要使用 SQLite 的名称。你可以使用一些轻量级的东西，比如 PLIST。该链接将向您展示如何做到这一点。保存图像并以名称存储以供以后使用。

[如何在 iOS 中保存图片](https://stackoverflow.com/questions/12994924/how-to-save-a-picture-in-ios/12994949#12994949)

# python - 名称“_”未定义

> ID：12995888
> 
> 赞同：20
> 
> 时间：2012-10-21T07:34:00.800
> 
> 标签：python, django

执行时出现以下错误：

```
$ python manage.py schemamigration myapp --initial 
```

它似乎抱怨这条线：

```
audio_file = models.FileField(_("Audio file"), upload_to=get_audio_upload_path) 
```

我不确定我做错了什么。请帮忙。

```
Traceback (most recent call last):
 File "/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py", line 10, in <module>
execute_from_command_line(sys.argv)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
utility.execute()
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 231, in execute
self.validate()
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 266, in validate
num_errors = get_validation_errors(s, app)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/validation.py", line 30, in get_validation_errors
for (app_name, error) in get_app_errors().items():
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 158, in get_app_errors
self._populate()
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 64, in _populate
self.load_app(app_name, True)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 88, in load_app
models = import_module('.models', app_name)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
File "/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/myapp/models.py", line 39, in <module>
class AudioTrack(models.Model):
File "/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/myapp/models.py", line 51, in AudioTrack
audio_file = models.FileField(_("Audio file"), upload_to=get_audio_upload_path)
 NameError: name '_' is not defined 
```

这是我的 model.py 文件：

```
import os
import mimetypes

from django.conf import settings
from django.contrib.auth.models import User

from django.db import models

GENRE_CHOICES =  (
             ('R', 'Rock'),
             ('J/B', 'Jazz/Blues'),
             ('B', 'Blues'),
             ('R&B' 'R&B'),
             ('J', 'Jazz'),
             ('P', 'Pop'), 
             ('H', 'Hip-Hop'),    
             )

def get_upload_path(dirname, obj, filename):
   return os.path.join("audiotracks", dirname, obj.user.username, filename)

def get_audio_upload_path(obj, filename):
   return get_upload_path("audio_files", obj, filename)

class Genre(models.Model):
   genre_choices = models.CharField(max_length=1, choices=GENRE_CHOICES)
   slug = models.SlugField(max_length = 40, unique = True) #so as to have a dedicated page for each category 
   description = models.TextField()

def __unicode__(self):
       return self.title

def get_absolute_url(self):
    return "/genres/%s/" % self.slug

class AudioTrack(models.Model):
   class Meta:
      abstract = True

   user = models.ForeignKey(User, 
      related_name = "tracks",
      blank = True,
      null = True
  )

added_on = models.DateTimeField(auto_now_add=True, null = True)
updated_on = models.DateTimeField(auto_now=True, null = True)
audio_file = models.FileField(_("Audio file"), upload_to=get_audio_upload_path)
title = models.CharField(_("Title"), max_length="200", null=True)
description = models.TextField(_("Description"), null=True, blank=True)
slug = models.SlugField(max_length = 40, unique = True) #so as to have a dedicated page for each category 
genres = models.ManyToManyField(Genre)

def __unicode__(self):
    return "Track '%s' uploaded by '%s'" % (self.title, self.user.username)

@property
def mimetype(self):
    if not hasattr(self, '_mimetype'):
        self._mimetype = mimetypes.guess_type(self.audio_file.path)[0]
    return self._mimetype

@property
def filetype(self):
    if '/' in self.mimetype:
        type_names = {'mpeg': 'MP3', 'ogg': 'Ogg Vorbis', 'wave':'wav', 'FLAC':'FLA'}
        filetype = self.mimetype.split('/')[1]
        return type_names.get(filetype, filetype)
    else:
        return self.mimetype

@models.permalink
def get_absolute_url(self):
    # ('tracks.views.track_detail', [self.user.username, self.slug])
    return "/%s/%s/" %(self.genre, self.slug)

if hasattr(settings, 'AUDIOTRACKS_MODEL'):
   app_name, model_name = settings.AUDIOTRACKS_MODEL.split('.')
   Track = models.get_model(app_name, model_name)
else:
   class Track(AudioTrack):
      pass

class Genre_Track(models.Model): #links genre to tracks
   audio_track = models.ForeignKey(AudioTrack)
   genre = models.ForeignKey(Genre) 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-21T07:40:39.440

你错过了这个：

```
from django.utils.translation import gettext as _ 
```

[从Django i18n 文档](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)中阅读更多信息。`Django`这是/`python`项目中的惯用方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-14T06:01:00.843

现在应该是这个 `django.utils.translation import ugettext_lazy as _`

# jquery - jQuery 验证插件日期格式：日期干扰 dateITA

> ID：12995890
> 
> 赞同：2
> 
> 时间：2012-10-21T07:34:16.650
> 
> 标签：jquery, validation, datepicker

我正在为一个商业网站构建一个后端数据库 UI，并且有一些包含几个日期字段的表单。我在它们上使用 jQueryUI 日期选择器（dateFormat：'dd/mm/yyyy'），但也可以在输入字段中输入日期，所以我也想验证输入（我知道还有另一个插件用于验证日期选择器字段，但我想避免引入更多插件是可能的）。

我一直在研究解决 Chrome 的语言环境设置问题，并认为我已经解决了这个问题，但我也有一个不同的问题，我在任何其他帖子中都没有提到过。

我的客户很可能会使用不会验证这种格式的日期的 Chrome 来访问它，所以我使用了 validate 插件附带的附加方法中的 dateITA 文件。

```
function validate_newjob() {
$('#newjob').validate({
        rules: {
            DueDate: {
                required: true,
                dateITA: true 
            }
        },
        messages: {
            DueDate: {
                required: "* Required",
                dateITA: "Date format dd/mm/yyyy"
            }
        },
        errorClass: "formerror",
        errorElement: "span",
        errorPlacement: function(error, element) {
            $(element).next().after(error);
        }
    });
} 
```

这工作正常。日期在出错时使用我的消息“日期格式 dd/mm/yyyy”进行验证。

示例：我开始输入 2012 年 8 月 8 日，当我输入错误消息时显示“日期格式 dd/mm/yyyy”，然后当我完成输入日期时，字段验证成功。

但奇怪的事情也在发生。如果我开始输入像 2012 年 18 月 12 日这样的日期，则内置 date: true 验证方法会启动并发出默认错误“请输入有效日期”。（因为第 18 天的值没有通过验证脚本）

使用 dateITA 附加方法时，如何阻止默认日期方法验证字段并给我一个假阴性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T07:58:03.700

回答了我自己的问题...

我有一个 class="date" 分配给似乎自动触发 date 方法的字段（仅用于我的 css）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-30T13:37:42.053

```
rules: {
            DueDate: {
                required: true,
                date:false,
                dateITA: true 
            }
        }, 
```

# ios - 如何使用 GLKit 旋转视图？

> ID：12995892
> 
> 赞同：0
> 
> 时间：2012-10-21T07:34:45.663
> 
> 标签：ios, opengl-es

我想使用 GLKit 围绕 Z 轴旋转视图。有什么简单的方法可以做到这一点？

# java - Java：执行连接变量和文字的 StringBuilder.indexOf() 的开销

> ID：12995895
> 
> 赞同：3
> 
> 时间：2012-10-21T07:35:33.300
> 
> 标签：java, string, performance, indexof

`sb.indexOf(c + "")` 执行where `c`is of type`Character`或`char`and `sb`is `StringBuilder`object是否有性能开销？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T07:39:30.733

您可以使用`String.valueOf`

```
builder.indexOf(String.valueOf(c)); 
```

这种方法有很多好处。

1.  干净的代码
2.  String.valueOf 使用 char[] 从传递的 char 创建 String 对象，`char data[] = {c};`因此不需要额外的操作。

`2`真的是一个微优化，我总是会选择`1`“干净的代码”这个选项。

值得一提的是，这是连接版本生成的字节码：

```
new #2; //class java/lang/StringBuilder
dup
invokespecial #6; //Method java/lang/StringBuilder."<init>":()V
aload_1
invokevirtual #7; //Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
ldc #8; //String 
invokevirtual #9; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
invokevirtual #10; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
invokevirtual #11; //Method java/lang/StringBuilder.indexOf:(Ljava/lang/String;)I 
```

如您所见，它创建了第二个`StringBuilder`，进行了两次`append`调用，然后是一个`toString`. 相比之下，这是`String.valueOf`版本：

```
aload_0
aload_1
invokestatic #12; //Method java/lang/String.valueOf:(Ljava/lang/Object;)Ljava/lang/String;
invokevirtual #11; //Method java/lang/StringBuilder.indexOf:(Ljava/lang/String;)I 
```

这只是将`Character`（已经自动拆箱成 a `char`）交给`String.valueOf`. 那有什么作用呢？我们看一下JDK源码：

```
public static String valueOf(char c) {
    char data[] = {c};
    return new String(0, 1, data);
} 
```

所以它创建了一个新的单字符数组并直接交给`String`构造函数。很有可能效率更高。

但同样，这可能是一个微优化。`String.valueOf`调用使代码更清晰，这是主要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:10:14.780

Java中的`String`和`StringBuilder/StringBuffer`类使用模式优先精确字符串匹配算法的蛮力方法。该算法涉及在文本的所有位置检查模式的出现，该模式从某个位置开始并移动一个位置，因此我感觉`String.indexOf`并且`StringBuilder.indexOf`在性能方面将是相同的。

但是，`String`该类有一个`indexOf(char c)`方法，而`StringBuilder/StringBuffer`有`indexOf(String s)`方法，所以如果您在其中搜索一个字符，`StringBuilder`您必须首先将 char 转换为 String。在您的示例中，这可能是唯一的开销。

注意：String 和 StringBuilder 类使用的蛮力算法在处理中小型文本时就足够了，但在处理大型文档时，最好使用更复杂的搜索字符串搜索算法。

# c++ - 在qt窗口中添加滚动条？

> ID：12995899
> 
> 赞同：4
> 
> 时间：2012-10-21T07:36:03.040
> 
> 标签：c++, qt

我一直在从[这里](https://www.youtube.com/watch?v=6KtOzh0StTc&feature=youtube_gdata_player)的视频教程中学习 qt 。我已经完成了 35 个视频。所以我想创建一个示例应用程序来了解 qt。我正在使用最新版本的 qt creator。

我添加了一些**按钮**并删除了主窗口中的菜单栏和工具栏。

![在此处输入图像描述](../Images/dc32c7b8cf8f83224345d75dff298673.png)

运行后我发现如果我调整窗口滚动条不会出现。

![在此处输入图像描述](../Images/ac83641ce7ae8aa50c2bf3d21226eb8e.png)

我不希望按钮调整大小或移动。我对它们变得不可见很好，但我想要滚动条，以便用户可以滚动到不可见的部分。我添加了一个滚动区域小部件，但它不起作用。我通过在互联网上搜索进行了一些编码，但这也不起作用。当我将滚动区域的大小增加到窗口大小时；运行后窗口显示为空白。也许按钮在滚动区域“下方”。我如何更改应该在“顶部”上的对象？

另外因为我只是一个初学者，我不知道使用 qt 进行设计的最佳方法是什么。我应该只使用设计器放置所需的小部件，然后通过编码给出它们的特性吗？还是我应该使用设计师完成设计？还是我应该放弃设计师并完成完整的编码？谢谢你！

**编辑** @Synxis，这没有多大帮助。我什至使用了 secentralwidget(ui->scrollareacontentswidget); 我尝试删除 centralwidget QWidget，但我不能。有什么解决办法吗？

![在此处输入图像描述](../Images/b46728917ff771e1e225bf1261e0bc59.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T07:54:46.130

QWidget 没有滚动条，您需要添加一个具有滚动条的区域。

只需将[QScrollArea](http://qt-project.org/doc/qt-4.8/qscrollarea.html)添加到您的窗口，然后将所有小部件（按钮等）放入其中即可。不要忘记将滚动区域布局到整个主窗口。

更准确地说，层次结构是这样的：

```
main window central widget (with a layout)
    scroll area
        scroll area widget (with a layout, layout scroll area if you're in the designer)
            your container widget (should be layouted also)
                your buttons, layouts, etc... 
```

（`(with a layout)`= 使用布局布局小部件，但布局的类型无关紧要，因为只需要布局一个小部件）。

您的容器小部件应根据需要进行布局，间隔器可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:09:01.053

让 QHBoxLayout 成为一个普通的 QWidget() 对象，然后将该小部件对象设置为滚动区域的小部件，调用 setWidget()。这都是真正需要的。或者至少有时您需要调用 setWidgetResizable(bool) 如果可以利用额外的空间。示例代码如下。

```
#include <QtGui>

class YourWidget : public QWidget
{
public:
    YourWidget(QWidget* parent=0)
        : QWidget(parent)
    {
        QHBoxLayout* buttonLay = new QHBoxLayout;
        for (int i=0; i<10; ++i) {
            QPushButton* button = new QPushButton(tr("Button%1").arg(i));
            buttonLay->addWidget(button);
        }

        QLabel* dummyBigLabel = new QLabel(tr("DummyBigLabel"));
        dummyBigLabel->setAlignment(Qt::AlignCenter);
        dummyBigLabel->setMinimumSize(400,300);
        dummyBigLabel->setFrameStyle(QFrame::Panel | QFrame::Sunken);

        QVBoxLayout* mainLay = new QVBoxLayout(this);
        mainLay->addLayout(buttonLay);
        mainLay->addWidget(dummyBigLabel);
    }
};

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

QWidget* topLevelWidget = 0;
    YourWidget* editor = new YourWidget;
#ifdef USE_NO_SCROLL_AREA
    topLevelWidget = editor;
#else
    QScrollArea* scroller = new QScrollArea;
    scroller->setWidget(editor);
    topLevelWidget = scroller;
#endif
    topLevelWidget->show();
    topLevelWidget->raise();
    return app.exec();
} 
```

# xaml - 奇怪的滚动条行为

> ID：12995901
> 
> 赞同：4
> 
> 时间：2012-10-21T07:36:17.210
> 
> 标签：xaml, windows-8, microsoft-metro, scrollbar

在我的应用程序中，我有一个非常奇怪的滚动条行为：底部滚动条在滚动时会随机改变其大小。我使用了一个 GridView，里面有很多项目（支持代码）：

```
<GridView
  Margin="0,-3,0,0"
  Padding="116,0,40,46">

  <GridView.ItemsPanel>
     <ItemsPanelTemplate>
         <VirtualizingStackPanel Orientation="Horizontal"/>
     </ItemsPanelTemplate>
  </GridView.ItemsPanel>
  <GridView.GroupStyle>
     <GroupStyle>
         <GroupStyle.HeaderTemplate>
             <DataTemplate>
                <!-- Data Template here -->         
             </DataTemplate>
         </GroupStyle.HeaderTemplate>
         <GroupStyle.Panel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid ItemWidth="250" ItemHeight="250" Orientation="Vertical" Margin="0,0,80,0"  MaximumRowsOrColumns="4"/>
            </ItemsPanelTemplate>
         </GroupStyle.Panel>
     </GroupStyle>
  </GridView.GroupStyle>
</GridView> 
```

我还发现如果我删除填充，行为就会消失。我可以将填充的值设置为边距，但是滚动条也有边距，看起来真的很难看......

我该如何改变呢？- 我注意到其他几个应用程序有这个问题......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T15:21:18.747

您所看到的（“随机滚动条大小变化”）是网格内项目虚拟化的结果（实际上是在 VirtualisingStackPanel 内）。随着网格视图中的虚拟化容器加载更多显示项目，滚动查看器会根据其内容调整大小。

如果该行为导致您出现问题，请尝试覆盖项目面板模板并为您的元素指定一个非虚拟化容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:47:08.340

我认为您应该将 Grid 放在 ScrollViewer 标记中。

```
<ScrollViewer Height="200" Width="200" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
<GridView
  Margin="0,-3,0,0"
  Padding="116,0,40,46">

  <GridView.ItemsPanel>
     <ItemsPanelTemplate>
         <VirtualizingStackPanel Orientation="Horizontal"/>
     </ItemsPanelTemplate>
  </GridView.ItemsPanel>
  <GridView.GroupStyle>
     <GroupStyle>
         <GroupStyle.HeaderTemplate>
             <DataTemplate>
                <!-- Data Template here -->         
             </DataTemplate>
         </GroupStyle.HeaderTemplate>
         <GroupStyle.Panel>
            <ItemsPanelTemplate>
                <VariableSizedWrapGrid ItemWidth="250" ItemHeight="250" Orientation="Vertical" Margin="0,0,80,0"  MaximumRowsOrColumns="4"/>
            </ItemsPanelTemplate>
         </GroupStyle.Panel>
     </GroupStyle>
  </GridView.GroupStyle>
</GridView>
 </ScrollViewer> 
```

尝试根据您的应用进行调整。请参阅 ScrollViewer 了解[此处](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer)的属性和事件。[在这里](http://code.msdn.microsoft.com/windowsapps/XAML-ScrollViewer-pan-and-949d29e9)做一些新的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T04:50:29.947

@ZombieSheep 解释的内容实际上是非常正确的，但是这种情况仅在您使用 gridview/listview 的增量加载时才会发生，但是在您的特定情况下，如果您可以设置左右填充，则滚动条会由于 gridview 的填充属性而改变大小值 (Padding=" **116** ,0, **40** ,46") 为零或小于你可以看到差异，可能不需要将 gridview 放在滚动查看器内

# android - Android - 以编程方式使用扬声器拨打电话

> ID：12995902
> 
> 赞同：1
> 
> 时间：2012-10-21T07:36:33.890
> 
> 标签：android, android-intent

我已经阅读[了这篇](https://stackoverflow.com/a/8792039/804503)文章和其他一些文章，但我仍然不确定如何在打开扬声器的情况下拨打电话。有人建议说

> 在您开始通话之前，您先注册听者，然后激活扬声器。收到 CALL_STATE_IDLE 后，您移除监听器并再次停用扬声器

但这究竟是什么意思？

这是我的代码 -

```
 Intent intentCallActivity = new Intent(context, tabWidgetActivity.class);
                intentCallActivity.putExtra("number", phoneNumber);
                intentCallActivity.putExtra("speaker", true);

                intentCallActivity.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                context.startActivity(intentCallActivity); 
```

这不起作用。有时，在我测试此代码后，我的手机扬声器无法正常工作。这可能是因为我没有停用免提电话。我还需要做什么？

# android - Android WebView 可以用硬件加速做一个translationX 动画吗？

> ID：12995909
> 
> 赞同：4
> 
> 时间：2012-10-21T07:37:20.773
> 
> 标签：android, webview, android-animation

我在某处读到硬件加速应该适用于所有内置的 Android 视图；但是，当我尝试使用 WebView 制作幻灯片动画时，整个 Web 内容在动画期间变为空白。

我会写一个小应用程序，所以如果你想亲自看看，你可以试试。每次在 WebView 中加载页面时，应用程序都会执行幻灯片动画。我们将在 ImageView 和 WebView 之间滑动。ImageView 将只包含 WebView 本身的屏幕截图。为您的活动在 onCreate 中粘贴以下代码：

```
final WebView myWebView = (WebView) findViewById(R.id.webview);
myWebView.loadUrl("http://www.google.com");

final ImageView myImageView = (ImageView) findViewById(R.id.imageView);

myWebView.setWebViewClient(new WebViewClient() {

    public void onPageFinished(WebView view, String url) {

        myWebView.setDrawingCacheEnabled(true);
        myWebView.buildDrawingCache();
        myImageView.setImageBitmap(Bitmap.createBitmap(myWebView.getDrawingCache()));
        myWebView.setDrawingCacheEnabled(false);

        myImageView.setVisibility(View.VISIBLE);

        myWebView.setLayerType(View.LAYER_TYPE_HARDWARE, null);

        ObjectAnimator webViewAnimator = ObjectAnimator.ofFloat(myWebView, "translationX", myWebView.getWidth(), 0);
        webViewAnimator.setDuration(SLIDE_DURATION);
        ObjectAnimator imageViewAnimator = ObjectAnimator.ofFloat(myImageView, "translationX", 0, -myWebView.getWidth());
        imageViewAnimator.setDuration(SLIDE_DURATION);

        AnimatorSet set = new AnimatorSet();
        set.addListener(new AnimatorListenerAdapter() {
            public void onAnimationEnd(Animator animation) {
                myWebView.setLayerType(View.LAYER_TYPE_NONE, null);
                myImageView.setVisibility(View.GONE);
            }
        });
        set.playTogether(webViewAnimator, imageViewAnimator);
        set.start();
    }
} 
```

确保您的 Manifest.xml 中有 android:hardwareAccelerated="true"

此外，在您的 main_layout.xml 中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <WebView
        android:id="@+id/webview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <ImageView
        android:id="@+id/imageView"
        android:contentDescription="@string/image_view_description"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="gone" />

</RelativeLayout> 
```

现在每次加载页面时，都会在 ImageView（包含 WebView 的屏幕截图）和 WebView 本身之间进行幻灯片转换。

**该错误在 JellyBean 模拟器中不可重现，但它确实发生在迄今为止测试的所有 ICS/JellyBean 设备上......**

对此问题的任何见解将不胜感激。请注意，虽然我可以通过将其图层类型设置为 LAYER_TYPE_SOFTWARE 来简单地禁用 WebView 上的硬件加速，这将解决“消隐”问题，但由于渲染优势，我想保持启用硬件加速。

# websphere - 是否有可免费下载的 WebSphere MQ 开发人员版？

> ID：12995911
> 
> 赞同：12
> 
> 时间：2012-10-21T07:37:24.227
> 
> 标签：websphere, ibm-mq

WebSphere Application Server 8.0 提供免费的开发人员版本，是否也有适用于 WebSphere MQ 的版本？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-26T20:10:34.730

有适用于 Windows 和 Linux 的 Websphere MQ 8 和 9 的开发人员版本。

您可以在这里获取它：[https ://developer.ibm.com/messaging/mq-downloads/](https://developer.ibm.com/messaging/mq-downloads/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T08:20:47.607

有可供免费下载的 WebSphere MQ 试用版。试用版具有您在企业版中获得的所有功能。您可以使用 90 天。[这](http://www.ibm.com/developerworks/downloads/ws/wmq/)是下载链接。

还有一个可用的 WebSphere Application Server v8.5 试用版。这是一个60的试验。你可以从[这里](http://www.ibm.com/developerworks/downloads/ws/was/)下载。如果您不想下载试用版，您可以选择 IBM SmartCloud 和 Amazon EC2 上提供的沙盒和云。

**更新：**这里还有 WAS 的开发者版本[。](http://www.ibm.com/developerworks/downloads/ws/wasdevelopers/index.html)

据我所知，MQ 不包含在 WAS 8.5 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-19T16:19:56.150

我知道这是一个较老的问题，但这是我的两分钱：

可以从 hub.docker.com 下载 IBM MQ 的 docker 镜像。该镜像可免费用于开发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T15:24:52.640

最近，IBM 在 IBM Integration Bus V9 中打包了 WebSphere MQ 7.5。当您购买 IIB V9 时，您将获得 WMQ 7.5

还有一个名为“IBM Integration Bus for Developers”的相关产品。据我所知，这是 IIB V9，除了条款和条件不同。例如，您不得在生产中使用“IBM Integration Bus for Developers”。

关键是像 IIB V9 这样的“IBM Integration Bus for Developers”包含 WebSphere MQ V7.5 的许可证。据我所知，这是 WMQ 第一次不受时间限制地免费提供。

[您可以在https://www.ibm.com/developerworks/community/blogs/c7e1448b-9651-456c-9924-f78bec90d2c2/entry/download?lang=en](https://www.ibm.com/developerworks/community/blogs/c7e1448b-9651-456c-9924-f78bec90d2c2/entry/download?lang=en)获得有关“IBM Integration Bus for Developers”的更多详细信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T10:25:58.040

WAS 有它自己的内置消息总线，因此通常不需要两者都有。

WebSphere MQ 更像是一个基础设施组件，因此通常人们坚持使用任何 JMS 提供程序进行 MQ 开发并在生产环境中连接到 MQ。IBM/MQ 客户和合作伙伴也（不知道这里的确切标准）能够获得用于开发环境的免费版本。

# java - 尝试在应用程序和 servlet 之间进行连接时，URLConnection.getInputStream() 抛出 FileNotFoundException

> ID：12995916
> 
> 赞同：1
> 
> 时间：2012-10-21T07:38:15.973
> 
> 标签：java, tomcat, servlets

我想开发一个在 Tomcat 上运行的 servlet 文件之间进行通信的应用程序。

下面是我的应用程序中的代码，它试图连接到这个 servlet，发送请求并获取响应。

```
 private URLConnection getServletConnection() {
    try {
        URL servletURL = new URL("http://localhost:8080/test/servlet");
        URLConnection conn = servletURL.openConnection();

        conn.setDoInput(true);
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        return conn;
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

以下是引发异常的代码：

```
URLConnection conn = getServletConnection();
OutputStream outputStream = conn.getOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(outputStream);
ServletRequestMessage srm = new ServletRequestMessage(2, username, password);
oos.writeObject(srm);
oos.flush();
oos.close();
InputStream inputStream = conn.getInputStream(); 
```

例外是：

```
java.io.FileNotFoundException: http://localhost:8080/test/servlet 
```

谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:01:12.363

**服务器端**

```
public class ServletImpl extends HttpServlet implements Servlet {

    ....
    public ServletImpl() {
      super();      
    }

 public void init(ServletConfig config) throws ServletException{
    super.init(config);         

    /*
     Application scope 
     Shared between all servlets, JSP pages, and custom tags within a J2EE application 
     or within the whole container if no applications are defined.
     The programmatic interface to the application scope is the 'ServletContext' object.         
     */

    ServletContext context = config.getServletContext();
    context.setAttribute("base", config.getInitParameter("base"));
      /* where "base" is iniy param in web.xml
         <init-param>
    <param-name>base</param-name>
    <param-value>/ServlrtName/sys</param-value>
    </init-param>       

       */

....

}
    ....
protected void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException
{
    doPost(request, response);
}

    protected void doPost(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException
   {
    Enumeration<?> paramNames = request.getParameterNames();

    while(paramNames.hasMoreElements()) {

        String paramName = (String)paramNames.nextElement();

        String[] paramValues = request.getParameterValues(paramName);

         if("sub".equals(paramName)){

            paramValues = request.getParameterValues(paramName);

            if(paramValues.length > 0){

                String param = paramValues[0];
                // do something
                ....
            }               

        }           
    }
}

....
// prepear response 
    response.setContentType("text/html");

    PrintWriter out = response.getWriter();

    out.println(mMessageResponseStr);
    out.close(); 
```

这里我使用`sub`了标签，见：`if("sub".equals(paramName)){`。

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
 <display-name>ServlrtName</display-name>
 <servlet>
    <description>
    </description>
    <display-name>ServlrtName</display-name>
    <servlet-name>ServlrtName</servlet-name>
    <servlet-class>com.demo.servlet.ServletImpl</servlet-class>
  <init-param>
    <param-name>base</param-name>
    <param-value>/ServlrtName/sys</param-value>
    </init-param>
  <init-param>

        ....

</servlet>

...

 <servlet-mapping>
    <servlet-name>ServlrtName</servlet-name>
    <url-pattern>/sys/*</url-pattern>
  </servlet-mapping> 
```

**客户端**

我用`DefaultHttpClient`和`HttpPost`。我发送`sub`标签。这是一个向 Servlet 发送数据的方法：

```
 public boolean send(String data) {

    DefaultHttpClient httpclient = null;
    boolean success = false;

    try {           
        httpclient = new DefaultHttpClient();

        String url = "your URL";

        HttpPost httpost = new HttpPost(url);

        List <NameValuePair> nvps = new ArrayList <NameValuePair>();
        nvps.add(new BasicNameValuePair("sub", data));

        httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

        HttpResponse response = httpclient.execute(httpost);

        HttpEntity entity = response.getEntity();

        if (entity != null) {

            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();

            if(statusCode != 200){
                mResErr.onErrorResponse(statusCode);                    
            }

            InputStream is = entity.getContent();
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            String line = null;
            while ( (line = br.readLine()) != null) {

                // get data from line

            }
            is.close();

        } else {
            //response is null/
        }
        success = true;

        mRes.onHttpResponse(mArr);

    } catch (Exception e) {
        mResErr.onErrorResponse(e);
        e.getStackTrace();
    }

    if (httpclient != null) {
        // resource cleanup
        httpclient.getConnectionManager().shutdown();
    }

    return success;
} 
```

** 注释，在开始检查连接之前，请从服务器端删除用户/密码。如果一切按预期工作，请将其切换回来并在客户端使用：

```
Credentials cred = new UsernamePasswordCredentials("user", "pswd");

         httpclient.getCredentialsProvider().setCredentials(
                    new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT, AuthScope.ANY_REALM),
                    cred); 
```

# iphone - 手势弹出 NavigationController

> ID：12995918
> 
> 赞同：2
> 
> 时间：2012-10-21T07:38:54.713
> 
> 标签：iphone, cocoa-touch, uinavigationcontroller, core-animation

在 Flurry for Twitter 中，您可以向右滑动以弹出当前的 ViewController。这当然不难实现，但是在 Flurry 中，两个 ViewController 会随着您的拖动而消失。

所以我的问题是当用户向右滑动时弹出 ViewController 时如何执行动画，这样动画并不总是在 0.3 秒内完成。

您可以在 0:35 - 0:38看到[此视频中的效果。](http://youtu.be/WwouQegVDpc?hd=1&t=35s)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:46:00.753

由于 UINavigationController 的弹出动画无法参数化，在我看来 Flurry 的开发人员做了这样的事情：

1.  在导航堆栈中获取对当前和上一个视图控制器的引用
2.  将手势识别器附加到当前视图的视图 - 或者可能找到任何其他方式来检测手指运动
3.  当用户的手指移动时，为两个视图设置动画
4.  当手势结束时，*实际上*弹出视图控制器，传递`NO`给`animated:`方法调用的参数。

# cron - cPanel Cron 作业运行 PHP 文件

> ID：12995919
> 
> 赞同：0
> 
> 时间：2012-10-21T07:39:05.020
> 
> 标签：cron, cpanel

我正试图让我的 cronjob 在 cPanel 中工作。

我想运行位于`http://www.mydomain.com/path/cron-job.php`
但它必须包含的 PHP 文件`?code=something`

所以它会是这样的：`http://www.mydomain.com/path/cron-job.php?code=something`

我尝试使用以下命令： `php -q /home/mydomain/public_html/path/cron-jpb.php?code=something >/dev/null`
和
`/usr/bin/php -q /home/mydomain/public_html/path/cron-jpb.php?code=something >/dev/null`

但一切都没有运气..有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:43:39.873

由于 cron 作业是从命令行而不是通过 Web 服务器运行的，因此 GET 部分没有被传递到您的脚本中。尝试使用[此脚本](http://www.noah.org/wiki/PHP_CLI_GET)将变量从 CLI 拉入脚本。我没有编写该脚本，使用风险自负。

# python - 如何防止 FUNCTYPE 被收集

> ID：12995925
> 
> 赞同：1
> 
> 时间：2012-10-21T07:40:46.933
> 
> 标签：python, ctypes

我在我的脚本中创建 CFUNCTYPE 对象并将它们作为回调传递给 c。如果我将它们设为本地，它们会立即被销毁，并且我得到访问 violaton 错误尝试使用 gc.disable()，它没有帮助。今天我制作全局列表并在需要时放置/删除 FUNCTYPE 对象。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:57:31.367

最简单的方法是将 CFUNCTYPE 对象附加到模块或类。我发现拥有一个 Python 包装模块很有用——本质上是一个单独的文件，它将所有内容都保存在一个命名空间中的 ctypes 级别。

您可以根据需要从那里添加和删除回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:56:38.560

用作`CFUNCTYPE`装饰器。这会修改模块命名空间中的回调函数并保留其引用：

```
CALLBACK = CFUNCTYPE(c_int)

@CALLBACK
def callback():
    return 5

my_ctypes_function(callback) 
```

与以下在行完成时破坏 CALLBACK 对象的情况相反：

```
my_ctypes_function(CALLBACK(callback)) 
```

# javascript - 嵌入推文得到 403（禁止）

> ID：12995926
> 
> 赞同：3
> 
> 时间：2012-10-21T07:40:51.027
> 
> 标签：javascript, html, css, twitter, http-status-code-403

我在我的页面上嵌入了一些推文，但我得到：

```
GET https://cdn.api.twitter.com/1/friendships/exists.json?user_a=19463349&screen_name_b=mrland_news&callback=twttr.setFriendshipExists 403 (Forbidden) follow_button.html:1
GET https://cdn.api.twitter.com/1/friendships/exists.json?user_a=19463349&screen_name_b=BeautyBubble&callback=twttr.setFriendshipExists 403 (Forbidden) follow_button.html:1 
```

在我的开发者控制台中。仅当我登录 Twitter 时才会发生这种情况，当我注销时我没有收到任何这些错误。看起来某些小部件是由以下原因引起的：

```
<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script> 
```

如果我删除此行，我不会收到错误消息，但也不会收到任何漂亮的推文格式。我必须使用 OAuth 吗？我不想，因为它应该是一个匿名应用程序。

编辑：我没有进行 API 调用，我相信它是从 widgets.js 中调用的。我正在像这样嵌入推文

```
`<blockquote class="twitter-tweet">
<p>This is a direct report from heaven! Or the ESPN 12 screen tv room at Sports Center   
<a href="http://t.co/qsoUuprP" title="http://twitter.com/jimcramer/status/260071104171876353/photo/1">twitter.com/jimcramer/stat…&lt;/a>
</p>&mdash; Jim Cramer (@jimcramer) 
<a href="https://twitter.com/jimcramer/status/260071104171876353" data-datetime="2012-10-21T17:32:38+00:00">October 21, 2012</a>
</blockquote>
<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>` 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-21T07:52:00.330

我认为它与小部件无关。当我尝试同时进行 API 调用时，我收到以下消息作为响应：

> 以下信息不适用于未经身份验证的受保护用户。

这与[文档](https://dev.twitter.com/docs/api/1/get/friendships/exists)一致：

> 如果用户 A 或用户 B 受到保护，则需要进行身份验证。此外，认证用户必须是受保护用户的追随者。

# asp.net - Asp 部分页面缓存

> ID：12995928
> 
> 赞同：0
> 
> 时间：2012-10-21T07:41:32.447
> 
> 标签：asp.net, caching

是否可以使用输出缓存在 asp 中部分缓存页面？

我正在构建一个博客，每个博客文章都有自己的页面我正在考虑缓存每个博客文章页面并在文章 ID 上使用 varybyparam 缓存参数。

该页面将包含许多社交元素，我希望每个人都不同，所以我不希望这些元素被缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:43:41.527

您可以将 UserControls 用于要缓存的页面部分，并使用`<%@ OutputCache %>`指令对其进行配置。这是[MSDN 上的一篇文章，](http://msdn.microsoft.com/en-us/library/h30h475z%28v=vs.100%29.aspx)它解释了该过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T07:43:41.857

如果将博文封装到用户控件中，则[可以单独缓存](http://msdn.microsoft.com/en-us/library/h30h475z%28v=vs.100%29.aspx)。

> 在控件缓存（也称为片段缓存）中，您可以通过创建包含缓存内容的用户控件然后将用户控件标记为可缓存来缓存部分页面输出。

因此，如果您将博客文章设置为服务器控件，那么您应该能够使用 VaryByParams 正常缓存它。

# ruby-on-rails - 为 Ubuntu 设置 Path/to/rails 时遇到问题

> ID：12995930
> 
> 赞同：0
> 
> 时间：2012-10-21T07:42:13.227
> 
> 标签：ruby-on-rails, ubuntu

我正在按照 Ubuntu 的指南让 Rails 在我新安装的 Ubuntu 上运行（我对 Linux 非常陌生）。

我已经安装了 Apache、MySQL 和 Ruby 和 Rails。我通过检查它的版本来检查它并且它们工作。现在下一步说我必须打开我的 Apache conf 并将一些内容更改为 /path/to/rails/ ***。

但我不知道我的 Rails 位于何处。我怎样才能弄清楚这个？或者Ubuntu给出的默认值是什么？

我已经尝试搜索我的文件系统，但这会带来太多结果，以至于它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:47:55.773

假设您已经通过 Gem 安装了 Rails，获取其路径的最简单方法是`gem which rails`在命令行中键入。

请注意，Rails 实际上是由大量不同的 gem 组成的，例如 ActiveRecord、ActiveModel、ActionController 等。如果您想找到包含所有 gem（包括所有不同的 Rails gem）的文件夹，请输入`rails env`，然后转到标记为 的路径`INSTALLATION DIRECTORY`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:21:50.883

[教程](https://help.ubuntu.com/10.04/serverguide/ruby-on-rails.html)说：

> 首先要更改的是 DocumentRoot 指令：
> 
> > DocumentRoot /path/to/rails/application/public

这意味着它应该指向您的 rails 应用程序的公共文件夹。
创建一个新的 Rails 应用程序`rails new SomeName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:03:48.880

我自己通过删除所有内容并使用另一个教程（简单的步骤！） [http://blog.sudobits.com/2012/05/02/how-to-install-ruby-on-rails-in-ubuntu-来修复它12-04-lts/](http://blog.sudobits.com/2012/05/02/how-to-install-ruby-on-rails-in-ubuntu-12-04-lts/)

# mysql - 使用唯一索引来限制 MySQL 中每列的行数

> ID：12995933
> 
> 赞同：2
> 
> 时间：2012-10-21T07:42:32.023
> 
> 标签：mysql, indexing

我有一个非常大的 MySQL 表，它太大而无法频繁查询（500m+ 行）。我所做的是将我需要的结果缓存在另一个名为“最近”的表中。

在“最近”表中，架构看起来像这样

用户身份

PAGE_ID

显示顺序

我在 USER_ID 和 DISPLAY_ORDER 上放置了一个唯一索引，因为我只想在此表中为每个用户存储最多 64 条记录。因此，DISPLAY_ORDER 只是一个最多可达 64 的 int。使用 REPLACE INTO 更新行。

这是一个好方法吗？或者，一旦用户点击超过 64 行，我应该定期从表中删除数据。我需要考虑性能。在接下来的几个月里，5 亿的主表将增长到 10 亿，每个用户有 64 行，这意味着“最近”表也将非常大......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T20:33:14.563

如果我是你，我会认真考虑迁移到大数据 NoSQL 数据库。像 Cassandra 或 HBase 这样的东西，它们在处理大量数据时都具有非常好的性能。让 5-10 个集群节点使用 MapReduce 为您完成工作，而不是一个巨大的单片服务器试图扫描和查找那么多记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T20:54:58.570

我同意 Eggyal 和 Todd Nakamura 的观点。

**eggyal** : 对数据进行分区
在处理如此大的数据集时，您确实需要对数据进行分区，这样您就有机会在数据的子集上运行查询而不是对整个数据进行查询。

**Todd Nakamura**：研究一种不同的数据库技术。
这个问题看起来确实像 NoSQL 数据存储会是一个很好的解决方案。它将允许非常大的数据集，以及使用 Map/Reduce (Hadoop) 来并行化查询的能力。

# php - Codeigniter 从 html 输入中删除内联样式

> ID：12995934
> 
> 赞同：2
> 
> 时间：2012-10-21T07:42:35.870
> 
> 标签：php, codeigniter, xss, user-input, validation

看看下面的代码：

```
$this->input->post('title', FALSE); 
```

我手动禁用了 XSS 过滤。

现在让我们看一些例子：

```
<p BAD_ATTR_KEY="BAD_ATTR_VAL">Salam</span> 
```

回报：

```
<p BAD_ATTR_KEY="BAD_ATTR_VAL">Salam</span> 
```

* * *

```
<p style="color: red;">Salam</span> 
```

回报：

```
<p  red;">Salam</span> 
```

任何想法如何禁用此行为，以便站点管理员能够轻松地将不同的内联样式分配给页面上的任何元素？

* * *

**更新：**

我启用了全局 XSS 过滤，`application/config/config.php`因为我一直需要它。

只有当受信任的管理员从后端发布他们的内容时，我才需要 XSS 过滤。为此，我手动禁用了上面代码中提到的 XSS 过滤。而且我认为手动配置应该覆盖默认配置`config.php`，因此应该没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:05:05.253

根据[Asad](https://stackoverflow.com/users/1726343/asad)的评论，我发现了我的问题所在。

即使现在我已经使用以下方法手动禁用了 XSS 过滤：

```
$body = $this->input('body', FALSE); 
```

，那仍然被删除，因为我在`application/config/config.php`.

我真的不知道为什么无论如何不能使用第二个参数覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T00:06:01.453

我在这个问题上花了大约 5 个小时，找到了简单的解决方案。首先，您需要找到安全类，它位于您的项目/应用程序/核心中，如果使用了任何 codeigniter cms，则在 project/system/codeigniter/core/security

那里会有一个名为'_remove_evil_attributes'的函数（受保护的方法）在这个函数中会有一行 $evil_attributes = array('on\w*', 'style', 'xmlns', 'formaction'); 如果要在输入元素或文本区域中允许样式属性，则需要从此处删除“样式”以允许样式属性正常工作，否则它们将自动替换为下面此函数中编写的这行代码

$str = preg_replace('/<(/?[^><]+?)([^A-Za-z<>-])(. *?)('.implode('|', $attribs).' )(.* ?)([\s><])([><]*)/i', '

所以要小心这件事，不要像我一样浪费你宝贵的时间。海信谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-27T05:30:34.547

看的不是解决方案，而是**解决方法**。

对我来说，出于安全原因，我**无法禁用全局 XSS 过滤。**

所以，我做到了。

```
<h1 stile="color:red;">Red</h1> 
```

请注意，`style`写为`stile`。

即使有`$this->input->post('body', TRUE);`

现在，我已经`str_replace("stile", "style", $body);`在前端使用了。

也许不是最好的解决方案，而是一种可行的解决方法。

# python - 计算矩阵中小于一个值的所有值

> ID：12995937
> 
> 赞同：87
> 
> 时间：2012-10-21T07:43:02.027
> 
> 标签：python, arrays, numpy, pixel

我必须计算矩阵（二维数组）中小于 200 的所有值。

我为此写下的代码是：

```
za=0   
p31 = numpy.asarray(o31)   
for i in range(o31.size[0]):   
    for j in range(o32.size[1]):   
        if p31[i,j]<200:   
            za=za+1   
print za 
```

`o31`是一个图像，我将它转换成一个矩阵，然后找到值。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-10-21T08:32:56.487

这对于布尔数组非常简单：

```
p31 = numpy.asarray(o31)
za = (p31 < 200).sum() # p31<200 is a boolean array, so `sum` counts the number of True elements 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2012-10-21T08:11:00.107

该`numpy.where`功能是您的朋友。因为它的实现是为了充分利用数组数据类型，所以对于大图像，您应该注意到比您提供的纯 python 解决方案的速度提高。

直接使用 numpy.where 将产生一个布尔掩码，指示某些值是否符合您的条件：

```
>>> data
array([[1, 8],
       [3, 4]])
>>> numpy.where( data > 3 )
(array([0, 1]), array([1, 1])) 
```

并且掩码可用于直接索引数组以获取实际值：

```
>>> data[ numpy.where( data > 3 ) ]
array([8, 4]) 
```

您从那里获取它的确切位置将取决于您希望结果的形式。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-10-21T08:13:37.877

有很多方法可以实现这一点，比如展平过滤或简单枚举，但我认为使用[布尔/掩码数组](http://docs.scipy.org/doc/numpy/user/basics.indexing.html#boolean-or-mask-index-arrays)是最简单的一种（而 iirc 是一种更快的方法）：

```
>>> y = np.array([[123,24123,32432], [234,24,23]])
array([[  123, 24123, 32432],
       [  234,    24,    23]])
>>> b = y > 200
>>> b
array([[False,  True,  True],
       [ True, False, False]], dtype=bool)
>>> y[b]
array([24123, 32432,   234])
>>> len(y[b])
3
>>>> y[b].sum()
56789 
```

**更新**：

正如 nneonneo 已经回答的那样，如果您想要的只是通过阈值的元素数量，您可以简单地执行以下操作：

```
>>>> (y>200).sum()
3 
```

这是一个更简单的解决方案。

* * *

速度比较`filter`：

```
### use boolean/mask array ###

b = y > 200

%timeit y[b]
100000 loops, best of 3: 3.31 us per loop

%timeit y[y>200]
100000 loops, best of 3: 7.57 us per loop

### use filter ###

x = y.ravel()
%timeit filter(lambda x:x>200, x)
100000 loops, best of 3: 9.33 us per loop

%timeit np.array(filter(lambda x:x>200, x))
10000 loops, best of 3: 21.7 us per loop

%timeit filter(lambda x:x>200, y.ravel())
100000 loops, best of 3: 11.2 us per loop

%timeit np.array(filter(lambda x:x>200, y.ravel()))
10000 loops, best of 3: 22.9 us per loop

*** use numpy.where ***

nb = np.where(y>200)
%timeit y[nb]
100000 loops, best of 3: 2.42 us per loop

%timeit y[np.where(y>200)]
100000 loops, best of 3: 10.3 us per loop 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-21T14:35:34.237

这是一个使用花式索引并将实际值作为中间值的变体：

```
p31 = numpy.asarray(o31)
values = p31[p31<200]
za = len(values) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-12-03T19:39:55.070

要计算任何 numpy 数组中大于 x 的值的数量，您可以使用：

```
n = len(matrix[matrix > x]) 
```

布尔索引返回一个数组，该数组仅包含满足条件（矩阵 > x）的元素。然后 len() 计算这些值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-17T17:31:45.570

您可以使用[numpy.count_nonzero](https://numpy.org/doc/stable/reference/generated/numpy.count_nonzero.html)，将整体转换为单线：

```
za = numpy.count_nonzero(numpy.asarray(o31)<200)  #as written in the code 
```

# asp.net-mvc-3 - 日期时间已更改格式 mvc

> ID：12995939
> 
> 赞同：0
> 
> 时间：2012-10-21T07:43:10.823
> 
> 标签：asp.net-mvc-3, model-binding

在一个`Edit`动作中，我从数据库中检索模型并将其发送到视图。在视图中`createdDate`为模型的属性创建了一个隐藏标签。当我单击`submitt`按钮回发模型`modelstate.isvalid`时`false`，它会生成此错误。该值`20.10.2012 22:29:39`对`DateCreate`. 当我右键单击并选择查看源时，隐藏标签包含`20.10.2012 22:29:39`而不是`2012-10-22 22:29:39`. 我不知道为什么日期的格式会改变。我试图解决问题，我认为我确信最好不要将`DateTime`其用作模型的属性。最好有一个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:03:58.030

我也有这个问题，它是由于服务器与客户端的全球化而发生的。您可以在 web.config 中设置全球化，也可以在将日期发送到服务器之前在客户端转换日期。

# mysql - 具有相同类型实体但不同数据库的多个数据源

> ID：12995947
> 
> 赞同：2
> 
> 时间：2012-10-21T07:44:00.167
> 
> 标签：mysql, hibernate-mapping

我有相同的数据要提交到两个不同的 MySQL 数据库。一旦它在一个中更新、插入、删除，它应该立即在另一个中更新、插入、删除，否则两者都回滚。

```
<bean id="sessionFactory"
class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="t1Datasource"
    <property name="mappingResources">
        <list>
            <value>content/name.hbm.xml</value>
            <value>conten/desg.hbm.xml</value>
        </list>
    </property>
</bean> 
```

我应该为其他数据库创建一个新会话还是有其他进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:01:55.260

如果我要这样做，我将有`2 connection managers`1 指向，`databaseA`另一个指向`databaseB`，然后在我的数据访问层中，设置`auto commit`为 false，`transact at databaseA`然后如果事务成功，我将`transact to`使用 databaseB，然后如果成功，`commit connection 1 then commit connection 2`否则回滚两者

# c# - 如何在 C# 中使用组合框项

> ID：12995948
> 
> 赞同：-4
> 
> 时间：2012-10-21T07:44:03.683
> 
> 标签：c#, combobox

我在 C#.As 中有一个带有不同项目的组合框：

1.  新物品
2.  删除项目
3.  显示项目

现在我想为每个组合框项目设置不同的表单。如果我单击任何项​​目，然后打开新项目表单。

我怎么用这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:12:25.587

您可以通过[`SelectedIndexChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindexchanged%28v=vs.100%29.aspx)这种方式使用该事件：

```
//ComboBox.SelectedIndexChanged += ComboBox_SelectedIndexChanged;
private void ComboBox_SelectedIndexChanged(object sender, EventArgs e){
    string selected = (string)ComboBox.SelectedItem;

    if(selected == "New Item"){
        //do something here
    }
    else if(selected == "Delete Item"){
        //do something here
    }
    else if(selected == "Show Item"){
        //do something here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:50:59.483

在这种情况下，在组合框上`SelectionChanged`有一个`switch()`命令，每个选项都有一个，在这种情况下调用`selectedIndex``case``newItemFormVariable.show()`

我可能会弄错属性或事件名称，因为我是在认真做这件事的，但你明白了。

# objective-c - 即使插入了耳机，也要强制使用内置扬声器

> ID：12995953
> 
> 赞同：0
> 
> 时间：2012-10-21T07:44:53.530
> 
> 标签：objective-c, macos, cocoa

我正在尝试找到一种强制声音通过计算机的内部扬声器路由的方法——即使插入了耳机。

我一直在使用`AudioToolbox/AudioServices.h`，但到目前为止，我只能调整当前活动输出设备的音量。

即使我无法将声音路由到其他设备，有没有办法调整非活动输出设备的音量？例如，我想在插入耳机时编辑内置扬声器的音量。

只是为了澄清，我试图在 OS X 中实现这一点，而不是 iOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:44:27.290

这是不可能的（至少在 iMac 系列上是不可能的，但在其他产品上也是可能的）。我曾经什至向苹果提交了一个错误，但他们回答说它按预期工作并且他们不会改变这一点。硬件（至少在我的 iMac 上）能够做到这一点。我建议您向 Apple 提交错误。

# iis - 如何知道 iis 是否安装在 windows 7 上？

> ID：12995954
> 
> 赞同：2
> 
> 时间：2012-10-21T07:44:56.787
> 
> 标签：iis, windows-7, installation

我已经安装了 IIS 8.0 Express，我可以在程序和功能下看到列出的内容。我首先在 Visual Studio 命令提示符下运行这个“aspnet_regiis.exe -i”。然后在 RUN 中键入 inetmgr。它向我显示了一个错误“Windows 找不到 inetmgrr。请确保您输入正确，然后再试一次。”。

谁能告诉我如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:46:56.150

我认为您需要重新安装 IIS 并重新安装。

首先检查这个： -

转到开始-> 运行类型 inetmgr，然后按确定。如果你得到一个 IIS 配置屏幕。已安装，否则未安装。

您还可以检查控制面板->添加删除程序，单击添加删除 Windows 组件并在已安装组件列表中查找 IIS。

重新安装 IIS。

控制窗格 -> 添加删除程序 -> 单击添加删除 Windows 组件取消选中 IIS 框单击下一步并按照提示卸载 IIS。将 Windows 光盘插入相应的驱动器。控制窗格 -> 添加删除程序 -> 单击添加删除 Windows 组件 检查 IIS 框 单击下一步并按照提示安装 IIS。

# linux - 多个进程的Linux内核逻辑地址

> ID：12995957
> 
> 赞同：4
> 
> 时间：2012-10-21T07:46:38.523
> 
> 标签：linux, memory-management, linux-kernel, embedded-linux

据我了解，“每个进程的地址空间分为用户空间/内核空间的3G / 1G，而1G（少一点）与物理地址一一映射，称为内核逻辑地址”。现在，我的问题是，系统上运行着多个进程，所有进程如何与物理地址进行一对一的映射？例如，当内核在进程 A 的上下文中访问内核逻辑地址时，现在发生了抢占，当内核访问进程 B 的上下文中的逻辑地址时会发生什么？

在类似的情况下，只有 512MB RAM 的 PC 会发生什么？这些 PC 的 1G 内核空间的一对一映射是如何发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:22:53.347

这是一个链接，它为我的问题提供了很好的说明。

[http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory](http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory)

“在 Linux 中，内核空间始终存在，并在所有进程中映射相同的物理内存。内核代码和数据始终是可寻址的，随时准备处理中断或系统调用。相比之下，用户模式部分的映射每当发生进程切换时，地址空间都会发生变化：”

回答问题的第一部分：Linux 内核空间在所有进程中保持相同，并且进程上下文切换无关紧要。内核空间在所有进程上下文中保持映射到相同的 RAM 页。

回答问题的第二部分：物理 RAM 大小（512 MB 或 2GB）的大小与内核地址空间无关。与规则一样，内核有 1G 的内核地址空间可用，无论它进行什么分配，都使用这些地址。将这些地址映射到可用 RAM（512MB 或 2GB）是 MMU 的工作。在 1G 或更多 RAM 的情况下，整个 1G 将被映射为内核地址空间，而在 512 MB RAM 的情况下，它将是 512MB。它不会损害用户空间地址，因为一切都是虚拟地址，它们将根据需要被换出，包括内核空间页面的那些。

注意：这里我假设 1G/3G 拆分，这不是硬性规定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T02:23:50.663

首先考虑总虚拟地址空间的内核部分（比如说 1GB）并没有全部被使用可能会有所帮助。并且总的物理内存并没有全部映射到内核空间。

内核空间将具有它使用的物理 RAM 的虚拟内存映射，以及定义的任何内存映射外围设备。那些没有分页。

用户空间中的每个进程可以为其代码+数据拥有多达 3 GB 的虚拟内存。对于物理内存，有两个极端，看看每一个都可能会有所启发。

大物理内存：如果处理器支持大物理寻址，例如 36 位，则可能有 64 GB 的物理内存。您可以有多个进程，每个进程都有 3 GB 代码+数据，它们甚至不必将页面交换到辅助存储。每个上下文切换都会设置 MMU 以将新执行进程的物理内存映射回用户空间。

小物理内存：假设有 512 MB，内核使用其中的 128 MB。剩余的 384 MB 将保存用户进程的代码+数据。如果用户进程需要更多，页面将根据需要在辅助存储和 RAM 之间交换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:17:10.417

好吧，在传统的多核系统中，所有处理器都可以访问所有 RAM。在 Linux 中，每个进程在 3GB 端都有自己的地址空间，而 1GB 端保持不变（我认为）因为内核在某种程度上是一个始终存在的进程。因为虚拟内存的内核部分保持不变（因此，有一个内核地址空间），所以当它抢占一个进程时，内核地址空间不会改变。

很简单，内核只映射那些 512 MB。其他 512 MB 的虚拟地址空间只是映射到空页面条目，它只是告诉 CPU 在该地址不应访问任何内存，并在访问时引发 CPU 异常。

# android - 动画视图中的线程...如何？

> ID：12995963
> 
> 赞同：2
> 
> 时间：2012-10-21T07:47:18.443
> 
> 标签：android, multithreading, android-animation, android-view

[在我正在尝试构建的相关视图的](https://stackoverflow.com/questions/12979507/animating-in-ondraw-without-surfaceview)研发中，我开始了一个简单的项目来掌握如何在超越自己之前完成更多的基本绘图“东西”。

就像我的其他问题状态一样，SurfaceView 线程和动画有很多信息，但我觉得这个应用程序可能有点矫枉过正。我将一次在屏幕上显示 10 到数百个最终视图，从我收集到的 SurfaceView 中，它通常用作 Activity 的主视图（游戏屏幕等）。

这个研发应用画了几个圆圈，并计算目标（红线）和之前位置（白线）之间的距离：

![当前实现的屏幕截图](../Images/625b5929f16859bf1126c2e83566ca64.png)

我`onDraw`的非常简单，但是我很难弄清楚如何实现线程或处理程序，或任何类型的非 UI 循环来计算目标和主圆之间的值。

我有一个私有的静态内部线程，我认为这很容易，但没有骰子。最新的弗兰肯码：

```
private static class DragThread extends Thread {
    private DragTest view;
    private boolean animate;

    private float currentY, targetY, delta, inc;

    public DragThread(View v){
        view = (DragTest)v;
        targetY = view.mTargetData.getY();
        currentY = view.mMainData.getY();
    }
    public void run(){
        while(Math.abs(currentY - targetY) >= 0){
            view.mMainData.setY(currentY + 10f);
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {

            }finally{
                view.postInvalidate();    
            }
        }
        Log.e(TAG, "Loop finished");
    }
} 
```

`mMainData`并且`mTargetData`只是持有每个圆的位置值的 POJO，我的 onDraw 使用它来更新位置：

```
mMainData = new CircleData(startXposition, startYposition, radius); 
```

...并使用标准吸气剂检索。

本质上，我知道当我抬起手指时我需要启动循环逻辑，但是我遇到了一些错误，从“线程已经启动”到冻结和崩溃。处理程序给我泄漏警告......伙计。我花光了。

这是`onTouchEvent`我的观点，并解释了每个事件：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    int action = event.getAction();

    if(action == MotionEvent.ACTION_DOWN){

        // set some flags for drawing, update "hero" circle Y position
        // based off event data
    }else if(action == MotionEvent.ACTION_UP){

        // reset flags that dictate ghost circle drawing, etc. and invalidate
        // I think I need to start the loop here, but how?! 
        // new Thread().start()? Some sort of Handler? GAH!

    }else if(action == MotionEvent.ACTION_MOVE){
        // update mMainData Y position which is passed into onDraw, invalidate to reflect movement changes
    }        
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:53:00.447

根据[这篇文章](http://eagle.phys.utk.edu/guidry/android/animatorDemo.html)，解决方案显然是盯着我的脸，但我认为它比实际更难。

有问题的示例应用程序的最终解决方案是让视图实现，当用户抬起手指时`Runnable`设置一个新动画，并使用 a来计算偏移量。`Thread``Scroller`

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    int action = event.getAction();

    if(action == MotionEvent.ACTION_DOWN){
        // ...
    }else if(action == MotionEvent.ACTION_UP){
        // ...

        startAnimation();
        return true;
    }else if(action == MotionEvent.ACTION_MOVE){
        // ...
    }        
    return false;
}
public void run(){
    int start = (int)mMainData.getY();
    int end   = (int)mTargetData.getY();

    mScroller.startScroll(0, start, 0, -Math.round(mMainData.getY() - end), 500);

    while(canAnimate()){
        while(mScroller.computeScrollOffset()){
            mMainData.setY(mScroller.getCurrY());
            postInvalidate();
        }
        stopAnimation();
    }
}
private void startAnimation(){
    mThread = new Thread(this);
    mThread.start();
}
private void stopAnimation(){
    animate = false;
}
private boolean canAnimate(){
    return animate == true;
} 
```

# git - 远程检查自修订日期/时间以来的更改，无需拉取

> ID：12995964
> 
> 赞同：1
> 
> 时间：2012-10-21T07:47:44.633
> 
> 标签：git

我正在寻找一种方法来检查`git remote`自上次获取以来的更改。

我知道 git 的工作原理是让获取远程查看更改，但我知道许多持续集成工具，例如能够“ping”远程以进行更改的“TeamCity”。

我想知道构建代理等如何进行这些检查，以便我可以编写自己的工具来通知人们对 repo 的更改。

你会使用什么 git 命令来检查 a 上的更改`git remote`？

就够`git ls-remote .`了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:22:56.537

我猜他们通过执行 a`git fetch`并查看 refs 的变化来执行“ping”。`post-update`钩子可以用来检查这一点。

另一种查看`foo`远程分支是否`bar`已更改的方法是执行 a `git fetch bar foo`，它将分支提取到`FETCH_HEAD`中，然后运行例如 a`git log bar/foo..FETCH_HEAD`以将您的旧版本`foo`与刚刚获取的版本进行比较。

最后一条评论：您可以使用它`git ls-remote`来查看您上次看到远程分支后是否已更新，但要访问提交元数据（日期），您必须获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T11:00:00.077

构建代理通常通过让服务器在更改时对它们执行 ping 操作来完成，这是通过一个`post-receive`钩子来完成的，该钩子发送带有新提交 SHA 的 HTTP POST。我看不出有理由在不获取的情况下检查遥控器。

`git ls-remote`将为您提供提交 SHA，您显然可以将其与本地的进行比较，但这不会为您提供有关已完成多少次提交的任何信息。

# glsl - 了解片段

> ID：12995965
> 
> 赞同：1
> 
> 时间：2012-10-21T07:47:49.120
> 
> 标签：glsl, fragment-shader

我刚刚开始使用片段着色器，在完成了一些简单的等离子效果之后，我就卡住了。我已经知道您可以检索片段的 X、Y 和 Z，并且我正在考虑构建一个着色器，该着色器将根据片段的 Z 为片段着色。

这是我到目前为止所拥有的：

```
void main() {
    float z = gl_FragCoord.z;
    float t = (sin(z) + 1) * 0.5;

    gl_FragColor = vec4(t, t, t, 1);
} 
```

问题是我正在用一个三角形测试它，无论我如何旋转它，它都有相同的恒定颜色，所以我开始问自己（并且在 SO）：为什么三角形是单一颜色的？这个 Z 不应该是每个片段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:47:29.443

gl_FragCoord 中的 z 坐标在 0 和 1 之间进行归一化（其中 0 对应于近平面，1 对应于远平面）。使用透视投影，这种映射是非线性的，有利于近平面。这意味着即使在旋转时，您的三角形也可能会映射到相同的颜色。

值得指出的是，您的总体想法很好（在我的 GLSL 着色器编辑器中创建）：http: [//goo.gl/32Voo](http://goo.gl/32Voo)

请注意，我在这里使用正交投影来获得更好的深度可视化 - 切换到投影使颜色几乎相同（仅变化几个百分比）。

# android - 如何在Android中使用jhlabs图像库的Crystalize或Pointilize过滤器？

> ID：12995971
> 
> 赞同：0
> 
> 时间：2012-10-21T07:49:31.500
> 
> 标签：android, image, filter

你能回复Android中jhlabs图像库的Crystalize或Pointilize过滤器的例子吗？我确实按照自己的风格编写代码，但它没有用。:P

以下代码是我写的。它不起作用。我不知道为什么代码不起作用。

你能告诉我原因吗？

```
 PointillizeFilter filter = new PointillizeFilter();
    filter.setEdgeColor(Color.BLACK);
    filter.setScale(10f);
    filter.setRandomness(0.1f);
    filter.setAmount(0.1f);
    filter.setFuzziness(0.1f);
    filter.setTurbulence(10f);
    filter.setGridType(PointillizeFilter.SQUARE);
    int[] src = AndroidUtils.bitmapToIntArray(artWork);
    filter.filter(src, width, height);
    Bitmap destImage = Bitmap.createBitmap(src, width, height, Config.ARGB_8888); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:26:48.477

当您调用方法`filter(src,width,height)`将其分配给`src`然后代码将起作用。因为此方法返回`IntArray`JHLabs 库中的。因此，代码将是：

```
PointillizeFilter filter = new PointillizeFilter();
filter.setEdgeColor(Color.BLACK);
filter.setScale(10f);
filter.setRandomness(0.1f);
filter.setAmount(0.1f);
filter.setFuzziness(0.1f);
filter.setTurbulence(10f);
filter.setGridType(PointillizeFilter.SQUARE);
int[] src = AndroidUtils.bitmapToIntArray(artWork);
src=filter.filter(src, width, height);
Bitmap destImage = Bitmap.createBitmap(src, width, height, Config.ARGB_8888); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-22T07:15:11.783

这行得通。

```
PointillizeFilter pointillizeFilter = new PointillizeFilter();
pointillizeFilter.setEdgeThickness(0.45f);
pointillizeFilter.setFadeEdges(false);
pointillizeFilter.setEdgeColor(Color.GRAY);
pointillizeFilter.setFuzziness(1.0f);
int[] src47 = AndroidUtils.bitmapToIntArray(inter);
int width47 = inter.getWidth();
int height47 = inter.getHeight();
int[] dest47 = pointillizeFilter.filter(src47, width47, height47);
Bitmap destBitmap47 = Bitmap.createBitmap(dest47, width47, height47, Bitmap.Config.ARGB_8888); 
```

# ssms - 无法连接到 Microsoft SQL Server Management Studio

> ID：12995974
> 
> 赞同：1
> 
> 时间：2012-10-21T07:50:15.493
> 
> 标签：ssms

嗨，我刚刚在 asp.net 上读了一本新书，要求我使用 Microsoft SQL Server Management Studio。所以我安装了这个软件，但是当我打开它时，我被要求提供 SQL Server 名称，当我点击浏览时，没有什么可以选择的。

如何连接到 Microsoft SQL Server Management Studio 2008？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:53:52.947

> *我已经安装了 Visual Studio Professional 并且还安装了 SQL Server*

因此，您很可能拥有一个 SQL Server **Express**版本，如果您输入 SQL Server 实例名称，就可以访问该版本

```
.\SQLEXPRESS 
```

或者

```
(local)\SQLEXPRESS 
```

您可以使用这两个服务器实例名称中的任何一个连接到 SQL Server Management Studio 吗？

该实例可能不会显示在浏览服务器列表中，因为 (1) SQL Server Browser 服务可能未运行，或者 (2) 因为该实例已在设置中标记为“隐藏实例”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:53:41.357

要安装，您需要执行以下步骤：-

打开 SQL Server Management Studio，将打开“连接到服务器”窗口。选择/输入以下内容：

服务器类型：数据库引擎

服务器名称：`.\SQLEXPRESS`

身份验证：SQL Server 身份验证

登录名：[SQL 2008 登录名]

密码：[SQL 2008 密码]

# ember.js - 在 Ember 路由器中更改状态时断开插座/删除视图？

> ID：12995975
> 
> 赞同：3
> 
> 时间：2012-10-21T07:50:27.037
> 
> 标签：ember.js, ember-old-router

我有一个带有两个出口的应用程序模板的应用程序。当我进入 root.index 状态时，我只想连接一个 outlet，当我进入 root.chats 状态时，我希望两个 outlet 都连接。当我从 root.index 导航到 root.chats 时，这很好用，但是当我返回时，导航窗格出口仍然存在（应该如此）。如何断开此插座或删除最初连接的视图？控制器 mixin 的 disconnectOutlet 方法是否已弃用？我应该以完全不同的方式构建它吗？我在下面包含了我的代码。谢谢。

```
// State flag helper function. See https://github.com/ghempton/ember-router-example/blob/master/js/app.js

function stateFlag(name) {
  return Ember.computed(function() {
    var state = App.router.currentState;
    while(state) {
      if(state.name === name) return true;
      state = state.get('parentState');
    }
    return false;
  }).property('App.router.currentState');
}

// Application

App = Em.Application.create({

    ApplicationController: Ember.Controller.extend({
        isChats: stateFlag('chats')
    }),
    ApplicationView: Ember.View.extend({
        templateName: 'application'
    }),
    ChatlistController:  Em.Controller.extend({
        hideView: false
    }),
    ChatlistView:  Em.View.extend({
        templateName:  'chatlist',
        didInsertElement: function(){
            this.$("#nav_pane").css({'left':'-=275', 'z-index':'-5'}).animate({
                left: ["+=275", 'swing'],
            },500,function() {
                $(this).css('z-index','5')
            });
        },
        _hideViewChanged: function() {
            if (this.get('hideView')) {
                this.hide();
            }
        }.observes('hideView'),
        hide: function() {
            var that = this;
            this.$("#nav_pane").hide("slow", function() {
                that.remove();
            });
        }
    }),
    ChatroomController:  Em.Controller.extend({

    }),
    ChatroomView:  Em.View.extend({
        templateName:  'chatroom'
    }),
    DashboardController:  Em.Controller.extend({

    }),
    DashboardView:  Em.View.extend({
        templateName:  'dashboard'
    }),
    Router: Ember.Router.extend({
        //location: 'history',
        enableLogging: true,
        goToDashboard:  Ember.Route.transitionTo('root.index'),
        goToChats:  Ember.Route.transitionTo('root.chats'),
        root:  Ember.Route.extend({
            index:  Ember.Route.extend({
                route:  '/',
                connectOutlets: function(router, context) {
                    router.get('applicationController').connectOutlet('content', 'dashboard');
                }
            }),
            chats:  Ember.Route.extend({
                route:  '/chats',
                connectOutlets: function(router, context) {
                    router.get('applicationController').connectOutlet('navpane', 'chatlist');
                    router.get('applicationController').connectOutlet('content', 'chatroom');
                }
            }),
            files:  Ember.Route.extend({
                route:  '/files'
            })
        })
    })
});

App.initialize(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T18:48:21.150

我相信你正在寻找`disconnectOutlet`，它根本没有被弃用：[http ://emberjs.com/api/classes/Ember.Controller.html#method_disconnectOutlet](http://emberjs.com/api/classes/Ember.Controller.html#method_disconnectOutlet)

它居住的好地方是路线的`exit`事件：[http ://emberjs.com/api/classes/Ember.State.html#event_exit](http://emberjs.com/api/classes/Ember.State.html#event_exit)

```
chats:  Ember.Route.extend({
    route:  '/chats',
    connectOutlets: function(router, context) {
        router.get('applicationController').connectOutlet('navpane', 'chatlist');
        router.get('applicationController').connectOutlet('content', 'chatroom');
    },
    exit: function(router){
      router.get('applicationController').disconnectOutlet('chatroom');
    }
}), 
```

# android - 例外：未能交付结果

> ID：12995979
> 
> 赞同：1
> 
> 时间：2012-10-21T07:51:30.483
> 
> 标签：android, android-intent, runtime

我收到以下异常：

```
10-06 15:54:24.558: E/AndroidRuntime(2858): FATAL EXCEPTION: main
10-06 15:54:24.558: E/AndroidRuntime(2858): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=2, result=-1, data=Intent { dat=content://contacts/people/1 flg=0x1 }} to activity {com.gaurav.androidpractice/com.gaurav.androidpractice.MainActivity}: android.content.res.Resources$NotFoundException: String resource ID #0x0
10-06 15:54:24.558: E/AndroidRuntime(2858):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3141)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3184)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at android.app.ActivityThread.access$1100(ActivityThread.java:130)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1243)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at android.os.Looper.loop(Looper.java:137)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at java.lang.reflect.Method.invokeNative(Native Method)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at 
java.lang.reflect.Method.invoke(Method.java:511)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-06 15:54:24.558: E/AndroidRuntime(2858):     at dalvik.system.NativeStart.main(Native Method)
10-06 15:54:24.558: E/AndroidRuntime(2858): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x0 
```

在以下代码中：

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        Log.e(TAG, getMethodName());

        if(resultCode == Activity.RESULT_OK){
            Cursor cursor = getContentResolver().query(data.getData(), new String[]       {Contacts.DISPLAY_NAME}, null, null, null);
            if(cursor.moveToFirst()){
                int columnindex = cursor.getColumnIndex(Contacts.DISPLAY_NAME);
                String name = getString(columnindex);
                nameTextView.setText(name);
            }
        }
        super.onActivityResult(requestCode, resultCode, data);
    } 
```

和，

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    nameTextView = (TextView)this.findViewById(R.id.name);
    Uri uri = Uri.parse("content://contacts/people");
    Intent intent = new Intent(Intent.ACTION_PICK, uri);
    startActivityForResult(intent, PICK_CONTACT_SUBACTIVITY);
} 
```

请澄清问题的原因和位置以及我该如何解决这个问题。

谢谢你帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:20:51.993

在`String name = getString(columnindex)`中，您正在调用[Context.getString](http://developer.android.com/reference/android/content/Context.html#getString%28int%29)，这在这里完全没用（它加载一个字符串资源并需要一个资源 ID）。改为使用[cursor.getString](http://developer.android.com/reference/android/database/Cursor.html#getString%28int%29)来获取游标列的内容。

# java - 从 Android SQLite db 获取最大唯一 ID 不起作用

> ID：12995980
> 
> 赞同：2
> 
> 时间：2012-10-21T07:51:53.577
> 
> 标签：java, android, sql, sqlite

我在网上找到了这个代码示例，但我无法让它工作。当它运行时，应用程序崩溃。有什么简单的解决方案吗？

```
public long getMaxID() {
        int id = 0;
        final String MY_QUERY = "SELECT MAX(_id) AS _id FROM db_table";
        Cursor mCursor = mDb.rawQuery(MY_QUERY, null);  

              if (mCursor.getCount() > 0) {
                mCursor.moveToFirst();
                id = mCursor.getInt(mCursor.getColumnIndex(MY_QUERY));
              }

    return id;
        } 
```

我的 logcat 错误似乎是：

```
10-21 07:48:32.704: E/AndroidRuntime(4023): Caused by: java.lang.IllegalStateException: get field slot from row 0 col -1 failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:13:16.930

您不能`getColumnIndex`对某些查询字符串执行操作，您需要传递 _id 列名。所以而不是

```
 id = mCursor.getInt(mCursor.getColumnIndex(MY_QUERY)); 
```

利用

```
 id = mCursor.getInt(mCursor.getColumnIndex("_id")); 
```

# javascript - 构建、编译javascript库

> ID：12995986
> 
> 赞同：2
> 
> 时间：2012-10-21T07:52:15.347
> 
> 标签：javascript, node.js, build, requirejs, amd

我有一个当前使用 requirejs 的 javascript 库。

为了保持可读性，我将所有内容结构化到目录中。我现在想将所有模块一起编译到一个用于生产的 javascript 文件中，但使这些文件在没有编译的情况下仍然可以工作以进行开发，这样我在测试某些东西时就不必重新编译所有内容。

我如何完成这项任务？

# c# - 存储当前用户控件，以便以后删除并添加新控件

> ID：12995988
> 
> 赞同：0
> 
> 时间：2012-10-21T07:53:25.400
> 
> 标签：c#, wpf

我正在尝试将当前活动的用户控件存储在我当前正在使用的 wpf 应用程序中，但是我不确定如何执行此操作。

我目前将用户控件加载到我的 wpf 窗口网格（MainContent）中，如下所示：

```
MyAccount control = new MyAccount();
MainContent.Children.Add(control); 
```

但是我需要能够删除当前控件并在其位置添加一个新控件，但是我无法弄清楚如何存储当前正在使用的控件。

**编辑：**为了澄清，我想将控件名称存储在内存中，以便稍后调用`MainContent.Children.Remove(oldcontrol)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:43:29.717

您的问题已经包含答案 - 您只需将控件的名称存储在内存中。只需将它放在函数外部的变量名中 / 在您移除控件时仍然可用的对象中，以便您仍然可以引用该变量。

也就是说，如果控件的名称始终相同（正如当前选择的答案所暗示的那样，这表明只有一个 MyAccount 类型的控件），您可能根本不需要变量。你只需要告诉控件它的名字是什么：

添加具有名称的控件：

```
MyAccount control = new MyAccount();
control.Name = "myAccountControl";
MainContent.Children.Add(control); 
```

按名称删除：

```
MainContent.Children.RemoveByKey("myAccountControl"); 
```

这应该比上面的代码更有效，并且意味着如果您对给定类型拥有多个控件，则只需删除您感兴趣的那个 - 并非该类型的所有控件（或给定 break 语句，无论发生哪种控制成为该类型的第一个）。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.removebykey.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.removebykey.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:11:03.760

我很确定这不是最优雅的解决方案，但它可能会

```
 MyAccount oldControl = null;
        foreach (UserControl control in mainContent.Children)
        {
            if (control.GetType() == typeof(MyAccount))
            {
                oldControl = (MyAccount)control;
                break;
            }
        }

        mainContent.Children.Remove(oldControl); 
```

# msdeploy - MSDeploy API - 允许不受信任的证书

> ID：12995991
> 
> 赞同：4
> 
> 时间：2012-10-21T07:53:51.467
> 
> 标签：msdeploy, webdeploy, microsoft-web-deploy

我正在尝试通过 c# 使用 MSDeploy API 运行远程 MSDeploy 命令。

我正在运行以下内容：

```
//test connection by pulling down file list
var sourceBaseOptions = new DeploymentBaseOptions();
var destBaseOptions = new DeploymentBaseOptions
                            {
                                ComputerName = "https://mysite.com/msdeploy.axd?sitename=siteName",
                                UserName = "username",
                                Password = "password",
                                AuthenticationType = "Basic"
                            };
var syncOptions = new DeploymentSyncOptions();       

var deployment = DeploymentManager.AvailableProviderFactories;
DeploymentObject deploymentObject = DeploymentManager.CreateObject("dirPath", Settings.TemporaryStoragePath, sourceBaseOptions);
// collect and report all the changes that would happen
var changes = deploymentObject.SyncTo(destBaseOptions, syncOptions); 
```

当我运行不受信任的证书时，它会引发异常。我如何告诉 MSDeploy 不要担心证书？（即基于代码的“AllowUntrustedCertificate=true”）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:03:45.380

看来我必须`ServicePointManager`为服务器证书验证设置回调。

在我调用 MSDeploy 之前放置以下内容似乎可行：

```
ServicePointManager.ServerCertificateValidationCallback = (s, c, chain, err) =>
{
    return true;
}; 
```

# css - twitter bootstrap 输入前置全宽

> ID：12995993
> 
> 赞同：4
> 
> 时间：2012-10-21T07:53:55.723
> 
> 标签：css, twitter-bootstrap

目前使用 bootstrap-2.1.1

我有一个`row-fluid`包含 2 列的列，在这些列中我有输入前缀。这是一个示例代码：

```
<div class="row-fluid">
   <div class="span6">
      <ul>
         <li>
            <div class="input-prepend box-shadow">
                <span class="add-on">email</span>
                <input type="text" name="email" value="" placeholder="Edit email"/>
            </div>
        </li>
     </ul>
   </div>
   <div class="span6">
      <ul>
         <li>
             <div class="input-prepend box-shadow">
               <span class="add-on">name</span>
               <input type="text" name="name" value="" placeholder="Edit name"/>
             </div>
         </li>

      </ul>
    </div>
</div> 
```

你可以在这里看到 JSBIN：[http ://jsbin.com/unuruh/1/](http://jsbin.com/unuruh/1/)

**问题**

如何仅`input-prepend`使用**首选 CSS**使父项的输入字段全宽（并使用浏览器调整大小） ？请记住，`add-on`应该是相同的宽度......

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T09:14:08.447

### Fluid spans

Here is an approach : [Demo (jsbin)](http://jsbin.com/unuruh/4)

```
<li>
  <div class="row-fluid">
    <div class="input-prepend box-shadow clearfix" style="border-radius: 3px;">
     <span class="add-on span2" style="width: 14.2%;float: left;">email</span>
     <input class="span1" style="width: 85.8%;float: left;border-right: 0;border-tradius: 0;border-bottom-right-radius: 0;" type="text" name="#" value="#hello" placeholder="Edit project"/>
   </div>
  </div>
</li> 
```

The `width` and `float` are there to override what the responsive behavior is doing to `span`s, the rest of the inline style is to make the box a little bit prettier.

There is a similar question, without all the wrapper problems : [Fluid input-append in Bootstrap Responsive](https://stackoverflow.com/q/11188964/1478467)

* * *

### Absolute positioning

**Update** version 2.3 : you need `.input-fullwidth { display: block; }`, [Updated Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/RmM2J/8/)

Another approach would be with absolute positioning : [Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/RmM2J/)

```
.input-prepend.input-fullwidth {
    position: relative;
}
.input-prepend.input-fullwidth .add-on {
    width: 40px;
}
.input-prepend.input-fullwidth .input-wrapper {
    position: absolute;
    display: block;
    left: 51px; /* 40 + 2*5 - 1 */
    right: 0;
    top: 0;
    bottom: 0;
}
.input-prepend.input-fullwidth .input-wrapper input {
    width: 100%;
    height: 100%;
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
          box-sizing: border-box;
} 
```

```
<div class="input-prepend input-fullwidth">
    <span class="add-on">email</span>
    <div class="input-wrapper"><input type="text" name="#" value="#hello" placeholder="Edit project"/></div>
</div> 
```

* * *

Ultimately, you may be looking for the [flexbox feature of CSS3 (w3.org)](http://www.w3.org/TR/css3-flexbox/)

# android - listView 显示所有数据，而不是我指定的数据

> ID：12995997
> 
> 赞同：1
> 
> 时间：2012-10-21T07:54:48.750
> 
> 标签：android, listview, adapter

所以我遇到的问题是我有一个哈希表，其中的键值为

键：整数值：ArrayList

在我的自定义 listView 适配器中，我将其设置为仅显示哈希表中某个位置的值。但目前它正在显示整个哈希表。我不太确定我做错了什么..这是适配器

注意：Statics.mainPageListPosition 是一个静态 int，当用户单击主屏幕上的某个位置时设置。然后我希望适配器显示该位置，并且仅显示该位置的数据。

```
package assignments;

import java.util.ArrayList;
import java.util.Hashtable;

import com.example.mt_study.R;
import com.example.statics.Statics;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class AssignmentListViewAdapter extends ArrayAdapter<Assignment> {

    private LayoutInflater inflater;
    private Hashtable<Integer, ArrayList<Assignment>> assignmentList;

    // class used to hold views when the user scrolls on the listView
    // it stores them and then we can re-use their id's as the user scrolls
    // down or up the screen so we don't have to keep calling findViewById
    private class assignmentViewHolder {
        TextView Title;
        TextView Date;

        public assignmentViewHolder(TextView assignmentTitle, TextView Date) {
            this.Title = assignmentTitle;
            this.Date = Date;
        }

        public TextView getTitle() {
            return Title;
        }

        public TextView getDate() {
            return Date;
        }
    }

    public AssignmentListViewAdapter(Context context,
            Hashtable<Integer, ArrayList<Assignment>> data) {
        super(context, R.id.assignment_row_title, R.id.assignment_row_date);
        inflater = LayoutInflater.from(context);
        assignmentList = data;

    }

    // set of functions useful for the getView function
    public int getCount() {
        return Statics.allAssignments.get(Statics.mainPageListPosition).size();
    }

    public Assignment getItem(int position) {
        return assignmentList.get(Statics.mainPageListPosition).get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public int getViewTypeCount() {
        return 1;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // Assignment assignment = this.getItem(position);

        TextView assignmentTitle;
        TextView assignmentDate;

        // if theres no view yet created on the screen, create one
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.assignment_row, null);

            // give the views their respective ID's
            assignmentTitle = (TextView) convertView
                    .findViewById(R.id.assignment_row_title);
            assignmentDate = (TextView) convertView
                    .findViewById(R.id.assignment_row_date);

            // set the tag so we can just use the viewHolder instead of calling
            // findViewById over. It saves memory
            convertView.setTag(new assignmentViewHolder(assignmentTitle,
                    assignmentDate));
        }
        // this gets called when the user scrolls down or up the screen and the
        // adapter
        // wants to maximize efficiency by just calling the viewHolder instead
        // of findViewById
        else {
            assignmentViewHolder viewHolder = (assignmentViewHolder) convertView
                    .getTag();
            assignmentTitle = viewHolder.getTitle();
            assignmentDate = viewHolder.getDate();

        }
        // down here is where you set the values for all your views/objects
        // such as Buttons or textViews.
        assignmentTitle.setText(Statics.allAssignments
                .get(Statics.mainPageListPosition).get(position).getTitle());
        assignmentDate.setText(Statics.allAssignments
                .get(Statics.mainPageListPosition).get(position).getDate_due());

        return convertView;
    }
} 
```

编辑：最近发现，我的哈希表将我发送的每个值都放在每个可用的位置，哈哈。我所做的是，当用户单击主页上的某个位置时，它会保存该位置并使用它将保存在该位置的数据存储在哈希表中。Temp 是一个数组列表，其中用户保存的数据以这种格式存储：

{number, String, number, string} 其中数字是哈希表中我要存储字符串的位置。

这是我将数据保存到哈希表的地方。一切对我来说都是正确的，也许我已经盯着它太久了@.@

```
for (int i = 0; i < temp.size(); i++) {
                if (isInteger(temp.get(i))) {
                    currentAssignment.setTitle(temp.get(i + 1));
                    //currentAssignment.setDate_due(temp.get(i + 2));
                    currentAssignmentList.add(index, currentAssignment);
                    index++;

                    Statics.allAssignments.put(Integer.parseInt(temp.get(i)), currentAssignmentList);
                    //Statics.allAssignments.get(Integer.parseInt(temp.get(i))).add(currentAssignment);
                    currentAssignment = new Assignment();
                    //Toast.makeText(context, "Called" + Integer.toString(i), Toast.LENGTH_SHORT).show();
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T08:14:51.747

您在哪里设置 ArrayAdapter 上的项目列表？我认为您应该使用您的`data`构造函数参数，无论是`addAll(data)`在调用`super()`. 请注意，您目前忽略此数据`getView()`并使用您的静态数据。在`getView()`中，一旦您在超类 ArrayAdapter 中正确设置了项目，您应该使用`Assignment a = getItem(position)`并设置来自该对象的字段，而不是静态数据。

例如在构造函数中......

```
super(context, R.id.assignment_row_title, R.id.assignment_row_date, data); 
```

然后在 getView()...

```
Assignment a = getItem(position);
assignmentTitle.setText(a.getTitle());
assignmentDate.setText(a.getDate_due()); 
```

这当然假设您传入的列表`data`是正确的。希望一旦您的代码只查看一个项目列表，您就可以更轻松地验证该列表是否正确。

**编辑：**

在您的第二段代码中，您在哪里`currentAssignmentList`为每个哈希表键创建一个新的？如果将相同的对象分配给哈希表的所有条目，那么它们都将包含相同的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T08:26:03.950

更改值时不要忘记调用`notifyDataSetChanged`您的值。`adapter``mainPageListPosition`