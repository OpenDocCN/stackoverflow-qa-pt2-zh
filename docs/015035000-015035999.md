# StackOverflow 问答 15035000-15035999

# c++ - \u0052\u0022 是否开始一个原始字符串？

> ID：15035002
> 
> 赞同：3
> 
> 时间：2013-02-22T23:31:39.507
> 
> 标签：c++, c++11

假设我们有以下内容：

```
\u0052\
\u0022\u0058(Please no?)\u0058\u0022 
```

转换通用字符名称并进行线拼接后，结果将是

```
R"X(Please no?)X" 
```

这是一个有效的原始字符串。根据 2.5.3，“在原始字符串的初始和最终双引号字符之间，在阶段 1 和 2 中执行的任何转换都将被还原”：

```
R"\u0058(Please no?)\u0058" 
```

这仍然是一个有效的原始字符串。

这真的是这个过程的运作方式吗？如果不是，必须更改多少才能使上述内容成为有效的原始字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:09:30.503

不，这不是这个过程的运作方式。

第 2.3 节第 2 段：

> *...如果字符或字符串文字的c-char-sequence*、*s-char-sequence*或*r-char-sequence*之外的通用字符名称的十六进制值对应于控制字符 ... 或基本源字符集中的字符，程序格式错误。

所以你的程序格式不正确。一些编译器可能会选择以您指定的方式解析通用字符名称，但这将是一个非标准扩展。

除此之外，你做对了。如果你写：

```
R\
"\u0058(Please no?)\u0058" 
```

's将`\u0058`被还原。

# eclipse - 追溯eclipse中被覆盖方法的方法调用

> ID：15035006
> 
> 赞同：1
> 
> 时间：2013-02-22T23:31:51.823
> 
> 标签：eclipse, apache-flex

我正在查看源代码，它有一个名为 updateDisplayList 的方法。此源代码中有各种名称相似的方法。但是我对一种特定的 updateDisplayList 方法感兴趣。我想检查调用此方法的位置。我曾尝试在 Eclipse 中使用 CTRL+SHIFT+G，它会返回该源代码中此方法的所有引用。但是，由于有许多具有相同名称的方法，这些引用也会被返回。我怎么知道那个特定的 updateDisplayList 方法在哪里被调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:12:18.587

如评论中所述，`updateDisplayList()`是一种 Flex 组件生命周期方法。几乎每个 Flex 组件都实现了这个方法。

如果您在一个类中修改了此方法，让我们调用它`ClassA`，并且您还在其他类中看到此修改的效果，这一定意味着其他类`ClassA`以某种方式继承。

要确定谁继承自`ClassA`，您只需在项目中搜索该类名即可。这可能会找到您正在寻找的其他类。但是，可能有一系列继承自的类，`ClassA`因此您可能需要更深入地查看（找到所有扩展的类，`ClassA`然后搜索这些类）。这可能是一个滑坡，可能不会有成果。

另一种方法是在`updateDisplayList()`方法中设置断点`ClassA`。正如我所提到的，您会经常遇到此断点。在 FlashBuilder/Eclipse 中，您可以使用“表达式”窗口并检查`this`. 如果`this`是`ClassA`，它不是您要寻找的机器人，所以让执行继续。

我敢肯定还有其他一些方法可以解决这个问题。但是`updateDisplayList()`这么常用的方法，搜索那个方法名没有意义:)

# vb.net - 更改 RichTextBox 中所有单词实例的颜色

> ID：15035010
> 
> 赞同：1
> 
> 时间：2013-02-22T23:32:29.767
> 
> 标签：vb.net, colors, richtextbox, highlight

我试图做到这一点，我可以在代码中指定一个或多个单词，并且当我编译/调试时，我希望程序在 Richtextbox 中搜索这些单词的所有实例并更改那里的颜色。

```
Dim GRAB as String = New WebClient().DownloadString("example.com")
RichTextBox1.Text = GRAB
` Color Word Code Here 
```

我在谷歌上查了很多东西，但我试过的一切都只会突出第一个词。

对不起，如果我的打字不好，我打字时手臂骨折了..

有人可以帮我解决这个问题，或者写一个快速的片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:11:11.807

尝试这个 ：

```
Dim wordslist As New List(Of String)
wordslist.Add("Hello")
wordslist.Add("World")

Dim len As Integer = RichTextBox1.TextLength

For Each word As String In wordslist

    Dim lastindex = RichTextBox1.Text.LastIndexOf(word)
    Dim index As Integer = 0

    While index < lastindex

    RichTextBox1.Find(word, index, len, RichTextBoxFinds.None)
    RichTextBox1.SelectionColor = Color.Blue
    index = RichTextBox1.Text.IndexOf(word, index) + 1

    End While

Next 
```

[从这里](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/8683fec1-f269-45a3-9dd7-6e73e6be464f/)从 C# 修改和翻译

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:52:21.560

您需要选择将有颜色变化的文本。

```
RichTextBox1.Select(RichTextBox1.Text.IndexOf("example"),4)
 RichTextBox1.SelectionColor = Color.Red 
```

将“.com”渲染为红色或

```
RichTextBox1.Select(6,4)
  RichTextBox1.SelectionColor = Color.Red 
```

会做同样的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T16:14:47.223

假设您想将“暗淡”制作为蓝色作为 VS：-

粘贴这个：

```
If RichTextBox1.Text.EndsWith("Dim") Then
        RichTextBox1.Select(RichTextBox1.TextLength - 3, 3)
        RichTextBox1.SelectionColor = Color.Blue
        RichTextBox1.Select(RichTextBox1.TextLength, RichTextBox1.TextLength)
        RichTextBox1.SelectionColor = Color.Black
    End If 
```

将此代码添加到 RichTextBox 到 Text_Changed。

# visual-studio-2010 - VS 2010 构建设置 - 下拉列表中不包含“发布”构建

> ID：15035013
> 
> 赞同：0
> 
> 时间：2013-02-22T23:32:35.933
> 
> 标签：visual-studio-2010, visual-studio

我继承了一个 mvc3 类库项目。我想构建这个库的发布版，但下拉列表中唯一可用的是每个 VS2010 Pro 的 Active(Debug)。

![在此处输入图像描述](../Images/9a2aedd0c2584ecd88996a4a93ec9747.png)

如何创建发布版本？

更新：

如果我选择 Build -> Configuration Manager -> New(Reelase) 我会得到以下信息：

![在此处输入图像描述](../Images/0128908d64648e02be4fe73b26240e07.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:34:58.907

转到**构建 > 配置管理器并在****活动解决方案配置**下拉列表中选择“新建” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:39:25.617

取消选中创建新解决方案配置的选项。

# jquery - JQUERY 从 DOb 获取年龄并显示隐藏的单元格

> ID：15035014
> 
> 赞同：0
> 
> 时间：2013-02-22T23:32:37.230
> 
> 标签：jquery

我有用户表单，当用户输入出生日期时，我希望 htat，JQUERY 来锻炼他们的年龄，如果他们超过 35 岁，它将显示一个隐藏的 div。

到目前为止，我已经设法把它拼凑起来

```
 $(document).ready(function() {
      $('#dob').datepicker({
    onSelect: function(value, ui) {
        var today = new Date(), 
            dob = new Date(value), 
            age = new Date(today - dob).getFullYear() - 1970;

        $('#age').text(age);
    },
    maxDate: '+0d',
    yearRange: '1960:2010',
    changeMonth: true,
    changeYear: true
});

 if ($(age).val() >= 35) {
    // do something
    alert("35");
}else{
    alert("not 35");
}

   }); 
```

但它会在页面加载时显示警报，我确定我只是把一些东西放在了错误的地方，但我不知道是什么。我已经将警报放在文本中，以显示正在工作的内容，我将用 show() 替换它，我让它工作。平心而论，我实际上并没有为拥有日期选择器而烦恼，它在我发现的一个例子中，所以我保留了它，如果它更容易做到，那么很好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:37:14.043

Your condition is misplaced and you were using `$(age)` instead of `age` or `$('#age').val()`

```
$(document).ready(function () {
    $('#dob').datepicker({
        onSelect: function (value, ui) {
            var today = new Date(),
                dob = new Date(value),
                age = new Date(today - dob).getFullYear() - 1970;

            $('#age').text(age);

            if (age >= 35) {
                // do something
                alert("35");
            }
            else {
                alert("not 35");
            }
        },
        maxDate: '+0d',
        yearRange: '1960:2010',
        changeMonth: true,
        changeYear: true
    });
}); 
```

By the way, this is not the right calculation for the age. You only use the year.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:38:27.513

你有块：

```
if ($(age).val() >= 35) {
    // do something
    alert("35");
}else{
    alert("not 35");
} 
```

*函数结束*后*`onSelect`。您需要将该块移入`onSelect`或将其放入更改事件处理程序中。*

 *例如：

```
...
onSelect: function(value, ui) {
    var today = new Date(), 
        dob = new Date(value), 
        age = new Date(today - dob).getFullYear() - 1970;

    $('#age').text(age);

    if (age >= 35) {
        // do something
        alert("35");
    }else{
        alert("not 35");
    }
},
... 
```

* * *

**编辑** 省略号是为了表明我遗漏了与您的原始示例没有变化的代码。这是*完整*的示例：

```
$(document).ready(function() {
    $('#dob').datepicker({
        onSelect: function(value, ui) {
          var today = new Date(), 
              dob = new Date(value), 
              age = new Date(today - dob).getFullYear() - 1970;

          $('#age').text(age);

          if (age >= 35) {
              // do something
              alert("35");
          }
          else {
              alert("not 35");
          }
        },
        maxDate: '+0d',
        yearRange: '1960:2010',
        changeMonth: true,
        changeYear: true
    });    
}); 
```*

# javascript - 如何计算下拉列表的总数量？

> ID：15035015
> 
> 赞同：-3
> 
> 时间：2013-02-22T23:32:39.873
> 
> 标签：javascript, html, css, html-select

我是平面设计师不是程序员但我按照一些教程为在线表单网页制作佣金

我想知道如何计算这张表中的价格（经销商总计，公众第二个总计）>。> 我知道这很复杂。

我试图在代码页中添加 cwolves 答案.. 但它与我的提交按钮冲突.. 它不能在没有按钮的情况下自动出现.. 出现在表格下方的某处？

您可以在此处查看此表：http: [//jsfiddle.net/87JpK/](http://jsfiddle.net/87JpK/)

```
<table border="0" cellspacing="3" cellpadding="0">
  <tr>
    <td width="125" height="30"><div align="left"><em3>&nbsp;Product's Name</em3></div></td>
    <td width="85"><div align="left"><em3>Volume ml</em3></div></td>
    <td width="110"><div align="left"><em3>Distributor</em3></div></td>
    <td width="110"><div align="left"><em3>Public</em3></div></td>
    <td width="200"><div align="left"><em3>Quantity (1 Pack=10 Units)</em3></div></td>
  </tr>
  <tr>
    <td height="30"><label for="face_cream">&nbsp;&nbsp;<em4>Face Cream</em4></label></td>
    <td>120</td>
    <td>&nbsp;21.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td>&nbsp;35.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td><select name="face_cream" id="face_cream">
      <option value="0 Pack" selected="selected">Choose your quantity...</option>
      <option value="1 Pack">1 Pack</option>
      <option value="2 Packs">2 Packs</option>
      <option value="3 Packs">3 Packs</option>
      ...
      <option value="99 Packs">99 Packs</option>
      <option value="100 Packs">100 Packs</option>
      </select></td>
  </tr>
  <tr>
    <td height="30"><label for="body_cream">&nbsp;&nbsp;<em4>Body Cream</em4></label></td>
    <td>250</td>
    <td>&nbsp;36.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td>&nbsp;59.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td><select name="body_cream" id="body_cream">
      <option value="0 Pack" selected="selected">Choose your quantity...</option>
      <option value="1 Pack">1 Pack</option>
      <option value="2 Packs">2 Packs</option>
      <option value="3 Packs">3 Packs</option>
      ...
      <option value="99 Packs">99 Packs</option>
      <option value="100 Packs">100 Packs</option>
      </select>
    </td>
  </tr>
  <tr>
    <td height="30"><label for="body_oil">&nbsp;&nbsp;<em4>Body Oil</em4></label></td>
    <td>100</td>
    <td>&nbsp;31.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td>&nbsp;53.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td><select name="body_oil" id="body_oil">
      <option value="0 Pack" selected="selected">Choose your quantity...</option>
      <option value="1 Pack">1 Pack</option>
      <option value="2 Packs">2 Packs</option>
      <option value="3 Packs">3 Packs</option>
      ...
      <option value="99 Packs">99 Packs</option>
      <option value="100 Packs">100 Packs</option>
      </select></td>
  </tr>
  <tr>
    <td height="30"><label for="face_wash">&nbsp;&nbsp;<em4>Face Wash</em4></label></td>
    <td>200</td>
    <td>&nbsp;26.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td>&nbsp;39.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td><select name="face_wash" id="face_wash">
      <option value="0 Pack" selected="selected">Choose your quantity...</option>
      <option value="1 Pack">1 Pack</option>
      <option value="2 Packs">2 Packs</option>
      <option value="3 Packs">3 Packs</option>
     ...
      <option value="99 Packs">99 Packs</option>
      <option value="100 Packs">100 Packs</option>
      </select></td>
  </tr>
  <tr>
    <td height="30"><label for="breast_oil">&nbsp;&nbsp;<em4>Breast Oil</em4></label></td>
    <td>100</td>
    <td>&nbsp;30.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td>&nbsp;49.00&nbsp;&nbsp;<em2>(CHF)</em2></td>
    <td><select name="breast_oil" id="breast_oil">
      <option value="0 Pack" selected="selected">Choose your quantity...</option>
      <option value="1 Pack">1 Pack</option>
      <option value="2 Packs">2 Packs</option>
      <option value="3 Packs">3 Packs</option>
     ...
      <option value="99 Packs">99 Packs</option>
      <option value="100 Packs">100 Packs</option>
      </select></td>
  </tr>

</table> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:49:28.660

呃，为什么不呢。使用 jQuery：

```
eval( $( 'td:nth-child(3)' ).map( function( td, $this ){
    return ( ( parseFloat( ( $this = $( this ) ).text() ) || 0 )
        * ( parseFloat( $this.parent().find( 'select' ).val() ) || 0 ) );
} ).get().join( '+' ) ) 
```

演示：

[http://jsfiddle.net/W8yK8/](http://jsfiddle.net/W8yK8/)

更改`nth-child(3)`为`4`公开价格

（对于任何想批评我的人来说，这与问题本身的质量相同）

# android - 设置window.location后的jquery超时

> ID：15035019
> 
> 赞同：1
> 
> 时间：2013-02-22T23:32:59.037
> 
> 标签：android, jquery, url, redirect

我正在尝试检测 Android 设备上是否安装了应用程序。我的应用程序已经注册了一个 uri 模式，如果在浏览器中转到“myapp://”，我的应用程序将被调用。如果设备上未安装我的应用程序，则会出现问题。如果浏览到“myapp://”失败，我想让浏览器导航到不同的 url。

我认为这可以通过在 jquery 中设置一个计时器来实现。

例如：

```
setTimeout(function () {
   window.location = 'https://www.google.com';
}, 50);
window.location = "myapp://"; 
```

这在 safari 上运行良好，因为如果它无法加载 url，它只会显示一个弹出窗口，并且在后台，这个 jquery 仍将处于活动状态并且计时器触发导致重定向。

但是在 android 中，浏览器会显示一个错误页面，指出它无法加载 url 并且计时器永远不会触发。

在这种情况下有没有办法做到这一点

# css - 为什么要将 css 选择器的名称放在主题标签 div# 之前？

> ID：15035028
> 
> 赞同：1
> 
> 时间：2013-02-22T23:33:28.130
> 
> 标签：css, selector, hashtag

实际上，我想知道两者之间的区别：

```
#content{some CSS rules} 
```

和

```
div#content{some CSS rules} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:34:54.887

第一个选择任何具有 ID 的元素`content`。

第二个选择任何`div`具有 ID 的元素`content`。

[MDN：编写高效的 CSS - 样式系统如何匹配规则](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS#How_the_Style_System_Matches_Rules)

# ruby-on-rails - 使用 Ruby 读取 Excel 公式

> ID：15035029
> 
> 赞同：0
> 
> 时间：2013-02-22T23:33:35.947
> 
> 标签：ruby-on-rails, ruby, excel, spreadsheet

我正在尝试使用电子表格 gem 来解析存储有关学校课程信息的 XLS 文件。这些 XLS 文件是自动生成的，因此我无法更改数据的呈现方式。

课程安排被保存为字符列表，用破折号表示课程未开会的日期。一个例子是“3--33--”，这意味着班级在轮换的第 1、4 和 5 天的第 3 块期间开会。Excel 将其中一些计划解析为公式，这意味着我需要从某些单元格中读取公式本身。问题是，当我尝试使用 cell.data 从公式单元格读取数据时，结果是一个类似`\r\x00\x1F\x00\x00\x00\x00\x00\xD0\x84\xC0\x1EB\x00\x04`. 我假设这是 Ruby 尝试将数据打印为 ASCII 文本。经过一番研究，我了解到 Excel 以 RPN 格式存储公式。

简而言之：我不确定如何从 Excel 电子表格中读取公式（公式本身，而不是公式的计算值）。我无法更改输入的 Excel 电子表格，并且拥有一个纯粹的 Ruby 解决方案会很好，因为我计划将它与 Rails 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:17:09.297

一种不同的方法是：

*   使用 xls2csv 将其转换为 csv：http: [//linux.die.net/man/1/xls2csv](http://linux.die.net/man/1/xls2csv)

*   使用 ruby​​ 标准库阅读它：[http ://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)

我希望这可以帮助你。

# ruby - 这是需要红宝石的正确方法吗？

> ID：15035030
> 
> 赞同：1
> 
> 时间：2013-02-22T23:33:39.643
> 
> 标签：ruby, rubygems, gem, sinatra, bundler

嗨，所以我偶然发现了一种使用 bundler 在我的 sinatra 应用程序中要求我的红宝石宝石的新方法，我想知道我是否应该这样做：

我的 gem 文件如下所示：

```
source 'https://rubygems.org'
gem 'sinatra'
gem 'thin'
gem 'haml' 
```

我的 config.ru 文件如下所示：

```
require 'rubygems'
require 'bundler'

Bundler.require

require './web'
run Sinatra::Application 
```

我的 web.rb 文件如下所示：

```
class MyApp
  before do
    cache_control :public, :max_age => 60
  end

  not_found do
    haml :not_found
  end

  get '/' do
    haml :index
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:37:15.190

Get rid of these lines from your config.ru file:

```
require 'rubygems'
require 'bundler'

Bundler.require 
```

Just make sure you run

```
bundle install 
```

from the terminal to install your gems before starting the application.

# c++ - 如何使用静态对象和方法！？C++ 挫折

> ID：15035032
> 
> 赞同：2
> 
> 时间：2013-02-22T23:33:48.147
> 
> 标签：c++, static, static-methods, object-reference, private-constructor

所以我已经做了几个小时我认为会快速简单的项目，但我无法让它工作！这让我很沮丧，哈哈，我必须接近，但也许我不是。

我将在我的代码中包含解释它应该做什么的注释。本质上它使用私有构造函数和析构函数。一个成员整数，然后是一个公共静态函数，用于返回对类中对象的引用 - 以及一个应该显示成员整数并递增它的公共函数。我不断收到范围和初始化错误。

**以下是错误：**

```
Singleton.h: In function ‘int main(int, char**)’:
Singleton.h:28:2: error: ‘Singleton::Singleton()’ is private
main.cpp:38:12: error: within this context
Singleton.h:29:2: error: ‘Singleton::~Singleton()’ is private
main.cpp:38:12: error: within this context 
```

任何帮助或建议将不胜感激！

这是我的代码（Singleton.h、Singleton.cpp、main.cpp）：

**单例.h：**

```
#ifndef SINGLETON_H
#define SINGLETON_H
#include <iostream>
#include <string>
#include <fstream>
#include <cstdlib>

class Singleton {

public:
    static Singleton& instance(); //returns a reference to a Singleton obj
    void sendOutput(); //prints member variable and increments it
private:
    int myInt; //member integer-variable
    Singleton(); //constructor
    ~Singleton(); //destructor

};
#endif 
```

**单例.cpp：**

```
#include <string>
#include "Singleton.h"

using namespace std;

//Displays to console that the obj was created. Initializes the member variable
Singleton::Singleton(){
    myInt = 0; //member variable
    cout << "Singleton Object Created!" << endl;
}

//destructor - displays to console that the Singleton object was destructed
Singleton::~Singleton(){
   // delete myObj;
    cout << "Singleton Object Destructed!" << endl;
}

//display member variable value and increment
void Singleton::sendOutput(){
    cout << "Request to send data to output to console" << endl;
    cout << "Integer Value: " << myInt << endl;
    myInt++;
}

//REQUIRED: Static method with a reference to an object of this class return type
//create a static Singleton object and return it
Singleton& Singleton::instance(){
    static Singleton myObj;
    return myObj;
} 
```

**主.cpp：**

```
#include "Singleton.h"
#include <string>
#include <iostream>
#include <cstdlib>

using namespace std;

//Another requirement - demo static variables
void static_test(){
    static int a = 1;
    cout << a << endl;
    a++;
}

int main(int argc, char * argv[]){

    static_test();
    static_test();
    static_test();

//messed around with this for awhile - got it to work a few times
//messed it up a few more times O.o 

    Singleton mySingletonObj;
    Singleton& sRef = Singleton::instance();
    //sRef = Singleton::instance();
    sRef.sendOutput();

    return 0;
} 
```

* * *

想法/建议/问题/疑虑？任何事情都将有助于减轻这给我带来的挫败感，哈哈。给我造成这样的问题似乎太简单了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:43:31.013

禁止在该范围内：

> 单例 mySingletonObj;

应该可以：

> Singleton& sRef = Singleton::instance();

引用不可重新分配：

> sRef = Singleton::instance();

应该可以：

> sRef.sendOutput();

另外，删除这个——语言已经指定了对象的生命周期和存储，并负责销毁它：

> 删除我的对象；

您还应该`delete`能够复制类型：

```
Singleton(); //constructor
Singleton(const Singleton&) = delete; // deleted copy constructor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:38:32.037

只需`delete myObj;`在此处删除：

```
Singleton::~Singleton(){
    delete myObj;
    cout << "Singleton Object Destructed!" << endl;
} 
```

它应该可以工作。myObj 是静态分配的，因此将在进程退出时由运行时删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:47:45.133

首先，在开始编写程序之前，您应该了解该语言的基础知识。从您的代码看起来您​​尝试删除 myObj，它是来自另一个方法的本地静态对象，在析构函数中不可见，更不用说您只能在指针上调用 delete，并且应该只删除由 operator new 初始化的指针。此外，您的单例应该具有私有或已删除（对于 C++11）复制构造函数和赋值运算符。如果你这样做：“sRef = Singleton::instance();” 不会编译（而且它不应该在逻辑上）。除此之外一切都很好。

# ubuntu - 在 Ubuntu 终端中使用 wget 下载目录的所有“有用”文件

> ID：15035035
> 
> 赞同：1
> 
> 时间：2013-02-22T23:34:05.503
> 
> 标签：ubuntu, terminal, wget

我正在尝试下载网站（[https://cgran.org/browser/projects/ucsb_jello](https://cgran.org/browser/projects/ucsb_jello)）中目录的所有有用文件。“有用文件”是指当我进入目录时可以看到的文件（cpp、python 和其他文件）。我不想下载任何 html 文件。

我遵循了[使用 wget 递归获取包含任意文件的目录](https://stackoverflow.com/questions/273743/using-wget-to-recursively-fetch-a-directory-with-arbitrary-files-in-it)的建议，并使用了以下命令：

wget -r --no-parent --reject "index.html*" '--no-check-certificate' [https://cgran.org/browser/projects/ucsb_jello](https://cgran.org/browser/projects/ucsb_jello) '

不幸的是，它下载了很多不必要的文件，即我在网站上看不到的文件。此外，它还遗漏了该目录子文件夹中的一些重要 cpp 文件。

如何使用单个 wget 命令下载该目录的所有子文件夹和相关文件？任何反馈将不胜感激。

谢谢，

纳兹穆尔

# objective-c - NSDateFormatter stringFromDate 不返回字符串

> ID：15035037
> 
> 赞同：3
> 
> 时间：2013-02-22T23:34:09.270
> 
> 标签：objective-c, cocoa

我正在尝试使用 NSDateFormatter 将保存的日期更改为山区标准时间，但它似乎不起作用。

它正在向控制台输出“currentDate: 2013-02-22 23:20:20 +0000 date with date formatter: other 2000-01-01 07:00:00 +0000”。

看起来该字符串没有正确创建，但我似乎以与正常调用它相同的方式调用它。

建议？

```
 NSTimeZone * mtnTimeZ= [NSTimeZone timeZoneWithAbbreviation:@"MST"];

    NSDate *currentDate = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setTimeZone:mtnTimeZ];

    NSString * timeZ = [dateFormatter stringFromDate:currentDate];

    NSDate * newDate = [dateFormatter dateFromString:timeZ];
    NSLog(@"currentDate: %@ string With dateFormatter: %@ date made from string %@", currentDate, timeZ, newDate); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T06:01:42.527

您需要设置样式以指定日期和时间格式以使其工作：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterFullStyle];
[dateFormatter setTimeStyle:NSDateFormatterFullStyle];

[dateFormatter setTimeZone:[NSTimeZone defaultTimeZone]];
NSString * dateCurrentTZ = [dateFormatter stringFromDate:[NSDate date]];

[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"MST"]];
NSString * dateMSTZ = [dateFormatter stringFromDate:[NSDate date]];

NSLog(@"Date In Current Time Zone: %@", dateCurrentTZ);
NSLog(@"Date In MST: %@", dateMSTZ); 
```

如果您想指定自己的格式：

[NSDateFormatter 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)

然后寻找基于 iOS 和 Mac OSX 版本的“固定格式”。你的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T23:44:18.977

尝试输入以下行：

```
[dateFormatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"]; 
```

像这样：

```
NSTimeZone * mtnTimeZ= [NSTimeZone timeZoneWithAbbreviation:@"MST"];

NSDate *currentDate = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
[dateFormatter setTimeZone:mtnTimeZ];

NSString * timeZ = [dateFormatter stringFromDate:currentDate];

NSDate * newDate = [dateFormatter dateFromString:timeZ];
NSLog(@"currentDate: %@ string With dateFormatter: %@ date made from string %@", currentDate, timeZ, newDate); 
```

# javascript - jQuery focus() 事件的无限循环元素我有这个 HTML： <select id="select-one"><option value="">Choose</option> <option value="1">House</option></select> <select id=" select-two"><option value="">Choose ID：15035041 赞同：3 时间：2013-02-22T23:34:33.937 标签：javascript, focus, jquery, onfocus 回答 #1 赞同：3 时间：2013-02-23T14:12:15.263 注意：根据您的评论，这假设您必须收听焦点事件。 解决方案 1 -blur()在 Chrome 中使用 - 有效但有问题 理论上，该focus事件是不可取消的，因此在这种情况下return false或不会产生任何影响。event.preventDefault()但是，在实践中，您可以使用该blur()方法来反转事件。 例如： $('#select-two').on('focus',function () { if ($("#select-one").val() == "") { $(this).blur(); alert('Fill select-one first!'); return false; } }); 参见jsFiddle 演示 这有效地防止了该字段在alert调用后重新获得焦点，因此focus事件不会重复。唯一的问题是，在 Chrome 中，即使该字段不再集中，下拉菜单仍然打开（参见演示）。 解决方案 2 - 使用remove()和clone()- 昂贵但跨浏览器 如果 Chrome 的行为有问题，您可以采取更粗略的方法，即您从 DOM 中取出，remove()然后将其重新插入 DOM。这将有效地完全“重置”元素，使其没有焦点并关闭。selectclone()select 例如： $(document).on('focus','#select-two',function (e) { if ($("#select-one").val() == "") { $(this).remove().clone().insertAfter('#select-one'); alert('Fill select-one first!'); return false; } }); 参见jsFiddle 演示 这种方法的好处是它在 Chrome 中也能很好地工作。这种方法的缺点是它涉及到操纵 DOM 来解决一个非常微不足道的问题。 回答 #2 赞同：1 时间：2013-02-22T23:56:37.657 我认为当 select-one 的值具有“”时，您需要一个额外的事件来更改内容 select-two，如下所示： HTML <select id="select-one"> <option value="">Choose</option> <option value="1">House</option> </select> <select id="select-two"> <option value="">Choose</option> <option value="A">Table</option> </select> JS $("#select-one").change(function() { if ($(this).val() == "") { $("#select-two").val(""); } }); $("#select-two").focus(function() { if( $("#select-one option:selected").val() == "" ) { alert("Fill select-one first!"); $("#select-one").focus(); return false; } }); 演示</option></select>

# c# - Making a transparent button

> ID：15035046
> 
> 赞同：0
> 
> 时间：2013-02-22T23:34:57.430
> 
> 标签：c#, winforms, c#-4.0

I am working on a Winforms application and imported the Windows API Code Pack for the Microsoft .NET Framework. Below is my code:

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Microsoft.WindowsAPICodePack.Taskbar;
using Microsoft.WindowsAPICodePack.Shell;    

namespace Glass_Test2
{
...
} 
```

But when I tried to add a button on it, it turned out like:

![enter image description here](../Images/45748c3638650f655e90891dd38460b9.png)

Can any body tell me how to make the button here transparent?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:29:37.797

如果您不能切换到 WPF，我会使用 GDI+ 并绘制矩形 - 它可以响应鼠标事件。现在您可以控制透明度。

```
Public Class GDIButton
  Public Property Bounds As Rectangle
  Public Property Text As String
  Public Property BorderColor As Color
  Public Property FillColor As Color
End Class 
```

# javascript - 使用 JS Bootstrap 打开选项卡内的链接

> ID：15035053
> 
> 赞同：-1
> 
> 时间：2013-02-22T23:35:20.720
> 
> 标签：javascript, twitter-bootstrap

所以我有一个基本的选项卡窗格，里面有 5 个像这样的窗格

```
<li><a href="#Formais" data-toggle="tab">Formais</a></li> 
```

使用 twitter bootstrap 并在他们的每个窗格内容中，我有各种我想在内容中打开的链接

我对 JS，引导程序非常陌生，不知道如何做到这一点。（我唯一的想法是在单击链接时使用某种包含）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:42:34.457

使用 jQuery（和 ajax）是要走的路。在链接上：

```
<a onclick="callUrl('urlpath')" href="#">link</a> 
```

和窗格内的 div

```
<div id="divid"></div> 
```

最后：

```
function callUrl (URL) {
  $('#divid').load(URL);
} 
```

这帮助我解决了在窗格内打开指向外部源的链接的问题。也许我对这个问题不太清楚，我道歉。

# jquery - How to get notified when attribute value of a control is dynamically set or changed in Jquery

> ID：15035055
> 
> 赞同：1
> 
> 时间：2013-02-22T23:35:54.533
> 
> 标签：jquery

I want to have event delegation like behavior when control's attribute value is set or changed.

i.e. Code like below should call a function `$(controlSelector).attr('attrName','value');`

```
$(input,select,inputarea).delegate('attributeNameToWatch','EventType',function(){}); 
```

I add custom attribute dynamically in my code.

I tried the above code with my preferred attribute name and EventType as "change" but it does not trigger when I add , set or change attribute value.

# php - php How to make a proper hash function that will handle given strings

> ID：15035056
> 
> 赞同：0
> 
> 时间：2013-02-22T23:36:19.730
> 
> 标签：php, hash

I want to create a hash function that will receive strings and output the corresponding value in an array that has predefined "proportions". For instance, if my array holds the values:

```
[0] => "output number 1"
[1] => "output number 2"
[2] => "output number 3" 
```

Then the hash function `int H(string)` should return only values in the range `0` and `2` for any given string (an input string will always return the same key).

The thing is that i want it to also make judgement by predefined proportions so, for instance `85%` of given strings will hash out as `0`, `10%` as `1` and `5%` as `2`. If there are functions that can emulate normal distribution that will be even better.

I also want it to be fast as it will run frequently. Can someone point me to the right direction on how to approach this in php? I believe I'm not the first one that asked this but I came short digging on SO for an hour.

**EDIT:**

What i did until now is built a hash function in `c`. It does the above hashing without proportions (still not comfortable with php):

```
int StringFcn (const void *key, size_t arrSize)
{
    char *str = key;
    int totalAsciiVal = 0;

    while(*str)
    {
        totalAsciiVal += *str++;
    }

    return totalAsciiVal % arrSize;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:49:32.057

做这样的事情怎么样：

```
// Hash the string so you can pretty much guarantee it will have a number in it and it is relatively "random"
$hash = sha1($string);

// Iterate through string and get ASCII values
$chars = str_split($hash);
$num = 0;
foreach ($chars as $char) {
    $num += ord($int);
}

// Get compare modulo 100 of the number
if ($num % 100 < 85) {
    return 0;
}
if ($num % 100 < 95) {
    return 1;
}
return 2; 
```

**编辑：**

[您可以直接使用crc32](http://php.net/crc32)`sha1`获得足够大的整数，而不是使用 散列（感谢评论中的@nivrig）。

```
// Convert string to integer
$num = crc32($string);

// Get compare modulo 100 of the number
if ($num % 100 < 85) {
    return 0;
}
if ($num % 100 < 95) {
    return 1;
}
return 2; 
```

# oracle11g - How do I define object-references between tables in object-relational database feature of oracle SQL developer

> ID：15035059
> 
> 赞同：1
> 
> 时间：2013-02-22T23:36:46.267
> 
> 标签：oracle11g, oracle-sqldeveloper

I successfully created an EmployeeType in Oracle 11g with the following atrributes;

```
emp_id   VARCHAR2(5)
title   VARCHAR(15)
firstname VARCHAR(20)
surname   VARCHAR(20)
address Addresstype
tel_no  ARRAY(3) of VARCHAR(15)
get_address() VARCHAR2() 
```

and was told to create DepartmentType in Oracle 11g with the following attributes

```
dept_id  VARCHAR2(3)
location AddressType
manager  REF Employee 
```

but my problem now is I don't know how to use the object-relational REF construct to define object-references between the two tables for relating Departments to Employees so that I can create table which will store department details and insert rows.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:41:38.993

您可以使用一些 ORM（对象关系映射）框架，您可以[在此处阅读](http://docs.oracle.com/cd/E13189_01/kodo/docs316/ref_guide_mapping.html)

[什么是对象关系映射框架？](https://stackoverflow.com/questions/1152299/what-is-an-object-relational-mapping-framework)

这是一个很大的话题，或者您可以设法自己找到一种方法，但是您必须知道，关系数据库只是带有数据的行，与面向对象的对象无关，您可以将其作为一种方法存储数据。

我希望这有帮助。

# ios - iCloud 支持子目录吗？

> ID：15035070
> 
> 赞同：0
> 
> 时间：2013-02-22T23:37:27.437
> 
> 标签：ios, icloud, subdirectory

我们想将我们的一些应用程序的子目录（及其下的文件）备份到 iCloud，并且还能够在运行时浏览这些文件，但没有找到任何用于此目的的 API/属性，它仍然可能吗？我们怎么能去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:42:29.907

使用`NSFileManager`. 您可以在 iCloud 中创建文件夹，就像在应用程序沙箱中的任何文件夹中一样。

```
NSFileManager *fm = [NSFileManager defaultManager];
NSURL *rootURL = [fm URLForUbiquityContainerIdentifier:nil];
NSURL *newFolder = [NSURL URLWithString:@"someFolder" relativeToURL:rootURL];
[fm createDirectoryAtURL:newFolder withIntermediateDirectories:YES attributes:nil error:nil]; 
```

TODO - 添加正确的结果和错误检查。

# c++ - C++11 线程，在主线程上运行

> ID：15035071
> 
> 赞同：4
> 
> 时间：2013-02-22T23:37:28.083
> 
> 标签：c++, opengl, asynchronous, c++11, stdthread

我正在做一些尝试 C++11 线程的开发。我想在异步线程中运行一些代码，当该代码完成后，我想在主线程上运行其他代码**但只有当它完成时！**

这是因为我想异步运行的事情是加载 OpenGL 的东西，并且在执行线程时使用 OpenGL 上下文有点棘手，据我所知，这几乎不是在不同的线程中运行相同的上下文。

但是我想创建一个加载器线程，它加载 collada 文件，这里真正耗时的东西是解析文件并设置数据，所有我可以（技术上）在一个单独的线程中做的事情，然后只是做主线程上的 opengl 特定任务。（这是我最初的想法，我可能只是走错路了）..

所以我在想，如果我可以分离一个异步线程来加载 collada 文件并填写数据，那么一旦完成，我将在主线程上调用以绑定缓冲区、设置着色器等等。我可以在没有线程的情况下做到这一点，但是在后台加载新数据时会非常顺利，而不会让 GL 吓坏..

所以我会尝试排列我想要做的步骤：

1.  主线程到处做它做的事情......
2.  有人要求加载新的网格
3.  通过创建异步线程并在其中加载 collada 数据来初始化网格
4.  同时主线程继续做它的东西
5.  一旦collada加载完成，异步线程通知主线程它希望在主线程上进行额外的加载（即设置缓冲区等）。
6.  设置完成，网格将自身添加到渲染队列

我确实让所有这些都同步工作，我想要的是一种在分离的异步线程完成后做一些事情的方法。

任何想法或对我的想法的建设性批评：P 都受到热烈欢迎！我可能在想这一切都是错误的方式，我一直在考虑做一些类似观察者模式的事情，但我真的不知道如何以最好的方式解决它。我不介意线程化OpenGL的东西，但这似乎有点像自找麻烦..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T23:45:57.037

如果我正确理解了您的用例，那么我认为从策略`std::async()`开始以`std::launch::async`确保操作真正在另一个线程上启动的功能正是您想要的：

```
// Your function to be executed asynchronously
bool load_meshes();

// You can provide additional arguments if load_meshes accepts arguments
auto f = std::async(std::launch::async, load_meshes); 

// Here, the main thread can just do what it has to do...

// ...and when it's finished, it synchronizes with the operation
// and retrieve its result (if any)

bool res = f.get(); // res will hold the return value of load_meshes,
                    // or this will throw an exception if one was
                    // thrown inside load_meshes()

if (res) 
{ 
    // ... and then it will go on doing the remaining stuff on the main thread
} 
```

这里要注意的一件棘手的事情是，您应该始终将 的返回值分配`std::async()`给某个变量（类型为`std::future<T>`），其中`T`返回的类型是`load_meshes()`. 否则将导致主线程等待`load_meshes()`完成（因此，就好像在主线程中调用了该函数）。

# d3.js - 是否有选择查询来获取除我当前选择之外的所有内容？

> ID：15035078
> 
> 赞同：4
> 
> 时间：2013-02-22T23:37:49.127
> 
> 标签：d3.js

在我的 d3js 应用程序中，当用户将鼠标悬停在特定圆圈上时，我将其放大。那没问题。同时，我想选择“所有其他”并将它们变小。抓住“所有其他圈子”的好查询是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:20:39.137

您可以根据需要使用[selection.filter或常用](https://github.com/mbostock/d3/wiki/Selections#wiki-filter)[selection.select](https://github.com/mbostock/d3/wiki/Selections#wiki-select)的鲜为人知的功能形式。

如果您使用[键函数](http://bost.ocks.org/mike/constancy/#key-functions)将 DOM 元素绑定到数据，这是推荐的方式，那么您可以过滤选择的键：http: [//jsfiddle.net/9TmXs/](http://jsfiddle.net/9TmXs/)

```
.on('click', function (d) {

    // The clicked element returns to its original size
    d3.select(this).transition() // ...

    var circles = d3.selectAll('svg circle');
    // All other elements resize randomly.
    circles.filter(function (x) { return d.id != x.id; })
        .transition() // ...
}); 
```

另一种通用方法是比较 DOM 元素本身：http: [//jsfiddle.net/FDt8S/](http://jsfiddle.net/FDt8S/)

```
.on('click', function (d) {

    // The clicked element returns to its original size
    d3.select(this).transition() // ..

    var self = this;

    var circles = d3.selectAll('svg circle');
    // All other elements resize randomly.
    circles.filter(function (x) { return self != this; })
        .transition()
        // ...
}); 
```

# java - 在选项（子）窗口中单击“应用”应在 HUD（父）窗口中设置变量，但不会

> ID：15035079
> 
> 赞同：0
> 
> 时间：2013-02-22T23:37:50.950
> 
> 标签：java, class, variables, methods, sql-server-mars

提早问了一个问题，但没有很好地布局我的代码，整个问题有点混乱，然后当我更改了我的代码但仍然有同样的问题时，问题仍然存在，但是我决定重新提出问题我的代码布局更整洁，因此您可以看到重要的部分。

这是最初问题的链接：

[无法在 JAVA 中将变量从子级返回给父级（选项窗口）](https://stackoverflow.com/questions/15027696/cannot-get-variable-from-child-back-to-parent-in-java-options-window)

基本上我有各种各样的课程。其中三个是：

```
Menu()
HUD()
Options() 
```

我的主要课程是 Menu()，从 Menu() 开始，HUD() 是通过按钮打开的。菜单没有给我带来任何问题，但是，HUD() 和 Options() 是。

Options() 是从 HUD() 内部打开的，里面有 5 个按钮组，它们之间包含 14 个选项。当用户为按钮组选择每个选项时，然后单击应用，并且为每个组选择的单选按钮的值（字符串值）应分配给 HUD() 上的给定变量。但是，当单击应用时，它会清除所有变量，或者这就是它似乎正在做的事情。

在 Option() 类中应用按钮：

```
private void cmdApplyActionPerformed(java.awt.event.ActionEvent evt) {                                         
    // TODO add your handling code here:

    hud.setTime(btnTxtTime);
    hud.setTemp(btnTxtTemp);
    hud.setSurface(btnTxtSurface);
    hud.setWeather(btnTxtWeather);
    hud.setRadiation(btnTxtRadiation);
    dispose();
} 
```

这是 Option() 类的一部分。

```
public class Options extends javax.swing.JFrame {

    public String btnTxtTime;
    public String btnTxtTemp;
    public String btnTxtSurface;
    public String btnTxtWeather;
    public String btnTxtRadiation;
    public static boolean ApplyClicked;

/**
 * Creates new form Profile
 */

    private HUD hud;

    public Options(HUD hud) {
        initComponents();
        this.hud = hud;
    } 
```

这是 Option() 类中的一个方法：

```
public String getTime() {

    if ("Day".equals(grpTimeOfDay.getSelection())) {
        btnTxtTime = "Day";
        return this.btnTxtTime;
    }

    if ("Night".equals(grpTimeOfDay.getSelection())) {
        btnTxtTime = "Night";
        return this.btnTxtTime;
    }
    return null;
} 
```

这是从 HUD() 中打开 Options() 的方式：

```
private void cmdOptionsActionPerformed(java.awt.event.ActionEvent evt) {                                           
    // TODO add your handling code here:

    Options o = new Options(hud);
    this.getLocation(p);
    o.setLocation((int) p.getX() + 100, (int) p.getY() + 100);
    o.setVisible(true);
} 
```

这是我的 HUD() 类的开始：

```
public abstract class HUD extends javax.swing.JFrame implements Runnable {

    private Options o;
    private HUD hud;

    public HUD(Options o) {

        initComponents();
        this.o = o; 
```

这是来自 HUD() 的方法，它从 Options() 中获取 JButtons 的值：

```
public void setTime(String strTime) {

    strTime = o.getTime();
    txtTime.setText(strTime);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:50:41.443

我们只看一种方法：

```
public void setTime(String strTime) {
    strTime = o.getTime();
    txtTime.setText(strTime);
} 
```

您从 Option 类中调用它

```
hud.setTime(btnTxtTime); 
```

但是`setTime`忽略您传入的值并立即用`o.getTime()`.

从您发布的内容很难判断，但您可能对方法调用和参数的工作方式感到困惑。

# python - 循环python，返回输入函数

> ID：15035082
> 
> 赞同：-1
> 
> 时间：2013-02-22T23:38:11.570
> 
> 标签：python, python-3.x

我正在尝试创建一个循环，让我要求用户下注，直到资金用完或决定退出。我如何从不同的功能中获取输入？

```
import random
import sys

def greeting():

    print('COP1000 Slot Machine - Jesus Pacheco')
    print('Let\'s play slots!')

# Function ask user starting amout to bet
# then it will check for any input error 
def intro():
    greeting()

    print('How much money do you want to start with?')

    print('Enter the starting amount of dollars.', end='')
    total = int(input())

    print('Your current total is '+ str(total)+'\n')
    while True:

        print('How much money do you want to bet (enter 0 to quit)?', end='');
# Bett will be the amount of money that the player will bet 
        bett = int(input())
        if bett == 0:
            sys.exit()
        if bett > int(total):
            print('ERROR You don\'t have that much left')

        elif bett < int(0):
            print('ERROR: Invalid bet amount\n')

        else:
            break

# Function will ask user to press enter to play slot machine
def slotMachine():
    print('Press enter to pull slot machine handle!')
    input()

# Function shows results of slot machine after handle being pulled
def random():
    import random

    num1 = random.randint(1, 5)
    num2 = random.randint(1, 5)
    num3 = random.randint(1, 5)

    print('/---+---+---\  ')
    print('|-'+ str (num1)+'-|-'+ str(num2) +'-|-'+ str (num3) +'-|')
    print('\---+---+---/  ')

    if num1 == num2 and num2 == num3:
        print('JACKPOT! cha-ching, you win')

    if num1 == num3 or num2 == num3:
        print('Match two, you get your bet back!')

    else:
        print('sorry, no match')

intro()

slotMachine()

random()

input() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:48:33.057

你需要做的是创建一种获取输入的方法，返回它，检查它是否有效，然后调用老虎机函数。此外，您可以使用`input(s)`; `s`是您要显示的提示（`s`通常是字符串）。我建议将这一切都放在一个`main()`函数下：

```
import sys
import random
def main():
    intro()
    total = int(input('Starting Money: '))
    if total <= 0: 
        raise ValueError('Starting Money must be greater than 0.')
    # the above raises an error if the bet is less than 0
    while True:
        bet = getInput(total)
        total = slotMachine(total, bet)
        if total == 'win' or total <= 0:
            break   

def intro():
    print('COP1000 Slot Machine - Jesus Pacheco')
    print("Let's play slots!")

def getInput(total):
    userInput = int(input('Bet (0 to quit): '))
    if userInput > total or userInput < 0: 
        raise ValueError('Bet must be less than total and greater than 0.')
    if userInput== 0: 
        sys.exit()
    # the above raises an error if the bet is less than 0 or greater than the total
    return userInput

def slotMachine(total, bet):
    num1 = random.randint(1, 5)
    num2 = random.randint(1, 5)
    num3 = random.randint(1, 5)

    print('/---+---+---\  ')
    print('|-'+ str(num1)+'-|-'+ str(num2) +'-|-'+ str(num3) +'-|')
    print('\---+---+---/  ')

    if num1 == num2 and num2 == num3:
        print('JACKPOT! Cha-Ching, you win!')
        return 'win'

    elif num1 == num3 or num2 == num3:
        print('Match two, you get your bet back!')
        return total

    else:
        print('Sorry, no match.')
        return total - bet
main() 
```

我建议您阅读有关[函数](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)和[返回语句](http://docs.python.org/2/reference/simple_stmts.html#return)的信息。

# jquery - 实现 typeahead.js CSS 问题

> ID：15035085
> 
> 赞同：4
> 
> 时间：2013-02-22T23:38:28.803
> 
> 标签：jquery, html, css

我在使用 typeahead.js 时遇到问题，这是 twitter 的一个新插件，您可以查看该插件的外观示例：http: [//twitter.github.com/typeahead.js/examples/](http://twitter.github.com/typeahead.js/examples/)

你可以在这里看到我的实现：http: [//mypcisbroke.co.uk/problem/](http://mypcisbroke.co.uk/problem/)

我的问题

*   文本框应在焦点上变为白色（这在安装插件之前有效）
*   文本框中自动完成的建议应该用较浅的颜色

这是我的网站 css

```
.navbar .top-search form { margin: 0 10px 0 0; padding-top: 5px; position: relative; }
.navbar .top-search input, .navbar .top-search button { -webkit-transition: all 200ms ease-in-out; -moz-transition: all 200ms ease-in-out; -o-transition: all 200ms ease-in-out; transition: all 200ms ease-in-out; }
.navbar .top-search input { padding: 2px 24px 2px 10px; border: none; margin: 0; width: 150px; background: #999; -webkit-border-radius: 20px; moz-border-radius: 20px; -ms-border-radius: 20px; border-radius: 20px; }
.navbar .top-search input:focus { background: #f5f5f5; -webkit-box-shadow: none; -moz-box-shadow: none; -ms-box-shadow: none; box-shadow: none; }
.navbar .top-search button { opacity: .6; position: absolute; right: 7px; top: 9px; padding: 0; margin: 0; line-height: 12px; background: none; border: none; -webkit-box-shadow: none; -moz-box-shadow: none; -ms-box-shadow: none; box-shadow: none; }
.navbar .top-search input:focus + button { opacity: 1 } 
```

这是 typeahead 的样式

```
.typeahead,
.tt-query,
.tt-hint {
  width: 396px;
  height: 30px;
  padding: 8px 12px;
  font-size: 24px;
  line-height: 30px;
  border: 2px solid #ccc;
  -webkit-border-radius: 8px;
     -moz-border-radius: 8px;
          border-radius: 8px;
  outline: none;
}

.typeahead:focus {
  border: 2px solid #0097cf;
}

.tt-query {
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
     -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}

.tt-hint {
  color: #999
} 
```

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T01:17:14.760

在`typeahead.css`文件的第 13 行，您有一行代码读取此内容

```
background-color: transparent !important; 
```

由于这个确切的原因，这是必要的。`transparent`它正在为其中的所有内容创建背景颜色`.tt-query`（但我不确定它的位置，因为`tt-query`您的 html 中没有任何类）。你的`:focus`风格很好。如果您删除`!important`，那么您的代码应该可以正常运行。

作为替代方案，您可以使用黑暗建议的方法，并添加`!important`到焦点样式中。这可行，但我仅将其用于错误修复和生产。我很少在已部署的站点上使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T00:54:49.663

1.  添加`!important`规则`.navbar .top-search input`，您将获得白色焦点。显然某处存在特异性冲突..

    像这样添加它：

    ```
    .navbar .top-search input:focus {
    background: none repeat scroll 0 0 #F5F5F5 !important;
    box-shadow: none;
    } 
    ```

2.  要更改建议字体颜色，只需在线编辑文件中的`.tt-suggestion p`选择器`typeaheadstyling.css``58`

# data-binding - KnockoutJS 值绑定动态

> ID：15035089
> 
> 赞同：1
> 
> 时间：2013-02-22T23:38:40.407
> 
> 标签：data-binding, knockout.js

有没有办法动态绑定到淘汰赛中的对象，例如：

```
<label data-bind="attr:{for:$data.name}, text:$data.prettyName"></label>
                                            <!-- ko if:$data.isTextBox-->
                                                <input data-bind="attr:{id:$data.name,value:$parent.currentDocument().values[$data.name]}" type="text"></input>
                                            <!-- /ko --> 
```

或者有没有其他方法来处理 k/v 绑定？values 被定义为 {} 并且随着整体类型的变化 values[$data.name] 被创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:24:35.473

`value`应该绑定没有`attr`

```
<input data-bind="attr:{id:$data.name}, value:$parent.currentDocument().values[$data.name]" type="text"></input> 
```

# javascript - 从 Ajax 调用 Jquery 访问数据

> ID：15035090
> 
> 赞同：1
> 
> 时间：2013-02-22T23:38:44.883
> 
> 标签：javascript, jquery, jquery-ui-autocomplete

我正在使用 Jquery Ui 自动完成功能。

我遇到的问题是从我的 api 返回的数据。

```
"{"d":{"results":[],"facets":{"facet_counts":{"Town":{"":0,"londonderry":136914,"london bridge":1,"london":8983316,"london colney":1}}},"__solr_time":3473457,"__ser_time":1564,"__t_time":1421,"__count":9120232,"__max_score":1.0}}" 
```

我已经通过在线解析器运行它并且它是有效的，但我不知道如何访问带有相应编号的城镇列表。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:42:39.243

我可以使用以下方式访问城镇“名称”和号码：

```
var test = {
    "d": {
        "results": [],
        "facets": {
            "facet_counts": {
                "Town": {
                    "": 0,
                    "londonderry": 136914,
                    "london bridge": 1,
                    "london": 8983316,
                    "london colney": 1
                }
            }
        },
        "__solr_time": 3473457,
        "__ser_time": 1564,
        "__t_time": 1421,
        "__count": 9120232,
        "__max_score": 1
    }
}
for(var prop in test.d.facets.facet_counts.Town){
     console.log(prop);
     console.log(test.d.facets.facet_counts.Town[prop]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:47:05.447

只需在字符串上运行 JSON.parse() 然后拉出`Town`节点。

```
var string; // the data string returned by API.
var dataObj = JSON.parse(string);
var Town = dataObj.d.facets.facet_counts.Town;

// access the properties as needed
var londonCount = Town.london;
var londonBridgeCount = Town['london bridge']; // need to use bracket notation to get this one 
```

# node.js - 更新节点模块不会影响程序

> ID：15035095
> 
> 赞同：2
> 
> 时间：2013-02-22T23:39:01.917
> 
> 标签：node.js

我正在经历一些奇怪的事情。

我有一个节点项目，它使用导入到目录中的外部`npm`模块`node_modules`。

现在我正在对节点模块代码进行更改，当我运行我的应用程序时，更改不会生效（我知道，因为我已经放在`console.log()`那里了）。

我在这里错过了什么吗？节点是否以某种方式缓存它的模块？还是听起来像本地的东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:41:54.713

这绝对应该有效。

但是，如果同一个模块也作为其他模块的依赖项包含在内，那么它将位于该模块的 node_modules 中。如果这是正在使用的那个，那么这就是您需要更改的那个。

# javascript - 是否有更短或更直接的方法来设置此字体选择器的值？

> ID：15035096
> 
> 赞同：0
> 
> 时间：2013-02-22T23:39:02.950
> 
> 标签：javascript, jquery

我正在使用此处找到的字体选择[器](https://bitbucket.org/lindekleiv/jquery-ui-fontselector/src/f8196e52c014ae056eb089a3b8eb3a5fe873ae85/jquery.ui.fontSelector.js?at=master)。我没有看到手动设置字体的方法，所以我想出了自己的方法。作为一个新手，我想知道是否有比我现有的更简单的手动设置所选字体的方法。我试图理解他们的 .js 文件，但我无法弄清楚是否有更简单的方法来做我想做的事。

[我的小提琴](http://jsfiddle.net/nPmYD/)/// 堆栈溢出不会让我发布 JS 链接...看我的小提琴

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>

/// STACK OVERFLOW WOULDN'T LET ME POST THE JS links...see my fiddle

    <script>
    $(document).ready(function(){
           $('#fonts').fontSelector({
            fontChange: function(e, ui) {
                $('span.handle').html('&#9660;');
                $('ul.fonts').hide();
                $(".fonts").children().removeClass('selected'); // remove the "selected" class on everything
            }
           });

           $("#changeFont").on("click",function(){
               var selectedFont = "Ruda";
               $(".fonts").children().removeClass('selected');
               $(".fonts").find("li:contains(Ruda)").addClass('selected');
               $('div.fontSelector h4.selected').text("Ruda").css("font-family","Ruda");
           });
    });

    </script>

</head>

<body>

<button id="changeFont">Change Font</button>
<select id="fonts">
  <option value="Chelsea Market">Chelsea Market</option>
  <option value="Droid Serif" selected="selected">Droid Serif</option>
  <option value="Ruluko">Ruluko</option>
  <option value="Ruda">Ruda</option>
  <option value="Magra">Magra</option>
  <option value="Esteban">Esteban</option>
  <option value="Lora">Lora</option>
  <option value="Jura">Jura</option>
</select>

</body>
</html> 
```

# highcharts - 如果显示的系列有空数据，ignoreHiddenSeries 不会在 X 轴上隐藏值

> ID：15035105
> 
> 赞同：1
> 
> 时间：2013-02-22T23:40:51.403
> 
> 标签：highcharts

我正在研究类似于以下[http://jsfiddle.net/7FdQR/1/的高图表](http://jsfiddle.net/7FdQR/1/)

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        title: {
            text: 'Stacked column chart'
        },
        xAxis: {
            categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Total fruit consumption'
            },
            stackLabels: {
                enabled: true,
                style: {
                    fontWeight: 'bold',
                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                }
            }
        },
        legend: {
            align: 'right',
            x: -100,
            verticalAlign: 'top',
            y: 20,
            floating: true,
            backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
            borderColor: '#CCC',
            borderWidth: 1,
            shadow: false
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.x +'</b><br/>'+
                    this.series.name +': '+ this.y +'<br/>'+
                    'Total: '+ this.point.stackTotal;
            }
        },
        plotOptions: {
            column: {
                stacking: 'normal',
                dataLabels: {
                    enabled: true,
                    color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                }
            }
        },
        series: [{
            name: 'John',
            data: [null, 3, 7, 2, null]
        }, {
            name: 'Jane',
            data: [2, 2, 3, 2, 1]
        }, {
            name: 'Joe',
            data: [3, 4, 4, 2, 5]
        }]
    });
}); 
```

});

如果您查看 John 的数据，您会看到 apples 和bananas 的一些空值。

如果我们禁用 Jane 和 Joe 系列并仅保留 John 的信息，即使 John 的数据集中有空值并且 ignoreHiddenSeries 设置为 true，我们仍将在 x 轴上看到所有水果类别。我想在这里实现的是重新绘制 x 轴以仅显示橘子、梨和葡萄标签（x 轴上没有苹果和香蕉标签）。有没有办法在highcharts中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:53:35.977

找到了解决方案。它可能不是最好的，但它可以工作[http://jsfiddle.net/Hm8T9/](http://jsfiddle.net/Hm8T9/)

我创建了一个小脚本并使用 setExtremes() 函数手动设置 xAxis 的最小值和最大值。

此外，如果您曾经处理 < 5 个类别并且不想显示所有类别（如在我的示例中），请将 xAxis 的 minRange 设置为 1 或您需要的任何数字。

```
xAxis: 
{
    minRange: 1
} 
```

# .net - 如何删除所有事件处理程序？

> ID：15035106
> 
> 赞同：1
> 
> 时间：2013-02-22T23:40:54.547
> 
> 标签：.net, events, c#-4.0, delegates

将事件设置为 null 是否会有效地分离所有目标？

```
public class Test
{
    public delegate void SomethingHappenedEventHandler(Test obj);
    public event SomethingHappenedEventHandler SomethingHappened;

    private void OnSomethingHappened()
    {
        if (this.SomethingHappened != null)
            this.SomethingHappened(this);

        //Once this event is fired, do not allow any more invocations!
        this.SomethingHappened = null;
    }
} 
```

不必手动分离所有事件：

```
public class Thing
{
    priavte Test Testing { get; set; }

    public Thing()
    {
        this.Testing = new Test();
        this.Testing.SomethingHappened += DoSomething;
    }

    private void DoSomething(Test obj)
    {
        //Do some stuff.
        //Detach manually.
        this.Testing.SomethingHappened -= DoSomething;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:01:11.380

是的，`null`将有效地从列表中删除订阅者。您唯一需要记住的是，下次您提出该事件时，您可能会得到一个`NullReferenceException`. 因此，既然您正在检查值，`not null`那么您会没事的，但请确保每次调用它时都要检查它。

# php - 取消关注 SoundCloud API

> ID：15035108
> 
> 赞同：1
> 
> 时间：2013-02-22T23:41:04.633
> 
> 标签：php, javascript, ruby, api, soundcloud

我试图找到一种通过使用 SoundCloud API 来取消关注用户的方法。我知道有用于关注/评论的文档，但是有什么方法可以取消关注您使用 API 关注的任何特定用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:53:19.560

是的，[请阅读此处的文档](http://developers.soundcloud.com/docs#follow)

API 端点是：

```
DELETE /me/followings/3207 
```

其中“我”是通过您的应用进行身份验证的用户，3207 是他们之前关注的人的用户 ID。我会放置正确的客户端代码，但您已经在 PHP 和 Ruby 中标记了这个问题。

# sql - 用CSV中一个单元格的数据填充列？

> ID：15035109
> 
> 赞同：1
> 
> 时间：2013-02-22T23:41:09.437
> 
> 标签：sql, database, tsql, csv

我正在使用 SQL Server 2012。我有许多 CSV 文件，其中包含来自客户糖果店的历史购买数据。在每个文件的顶部，文件中都有购买数据的日期，然后是列标题。我想要做的是填充一个名为“PurchaseDate”的列，然后将购买日期（文件顶部的日期）添加到该列直到文件末尾，然后导入文件。[我在这里](http://blog.sqlauthority.com/2012/06/20/sql-server-importing-csv-file-into-database-sql-in-sixty-seconds-018-video/)找到了如何在 T-SQL 中导入 CSV 文件，但一直无法找到此问题的答案。大量的文件 (50-60) 使我无法有效地手动导入数据。非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T03:43:35.247

导入表格将是最乏味的部分。然后你可以在他们每个人上运行它。

```
CREATE TABLE ImportedCsv (
  [01/21/2013] nvarchar(max),
  [Column 1] nvarchar(max),
  [Column 2] nvarchar(max)
);

ALTER TABLE ImportedCsv ADD PurchaseDate DATETIME;

DECLARE
  @PurchaseDate nvarchar(max)

SELECT TOP 1
  @PurchaseDate = CAST(column_name as nvarchar(max))
FROM information_schema.columns
WHERE table_name = 'ImportedCsv'
ORDER BY ordinal_position

UPDATE ImportedCsv SET PurchaseDate = CAST(@PurchaseDate as datetime) 
```

# python - 编译某些 cython 模块时出现 Windows / PyPi / PyCharm 链接器错误

> ID：15035111
> 
> 赞同：0
> 
> 时间：2013-02-22T23:41:15.483
> 
> 标签：python, pycharm, pypi, mingw-w64

目前，我正在 Windows 上使用 PyCharm，我尝试通过 PyPi 安装一些软件包。为了方便起见，我使用了 PyCharm 的集成功能，它与 shell easy_install 基本相同。

但是，在安装必须使用 gcc 编译的软件包时，我会遇到一些错误。由于以前的错误，我已经在 stackoverflow 上浏览了很多问题，并设法克服了一些错误（使用 mingw64，从设置脚本中删除 -mno-cygwin 参数等）但现在我完全被困住了一：

build\temp.win-amd64-2.7\Release\cpyamf\amf0.o:amf0.c:(.text+0xb912): 未定义对 `__imp_PyExc_ImportError' 的引用

c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.7.1/../../../../x86_64-w64-mingw32/bin/ld.exe: build\ temp.win-amd64-2.7\Release\cpyamf\amf0.o：“.data”部分中的错误重定位地址 0x78

collect2.exe：错误：ld 返回 1 退出状态

错误：命令“gcc”失败，退出状态为 1

该错误发生在 PyAMF 和 Twisted 的安装中，它们在某些部分使用 cython。我还没有找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:44:00.270

我在freenode上#python的人们的帮助下解决了这个问题。或者更好：找到解决方法。

问题基本上是我在 Windows 上使用了 64 位 python，这对于 minGW64 和其他东西并不适用。

我安装了 32 位 Python，编辑了 distutils.cfg 修复了 -mno-cygwin 问题，它基本上是开箱即用的。

所以如果其他人遇到这个问题：使用 32 位 Python。

# groovy - 如何从它的父级拦截脚本的 run() 方法

> ID：15035115
> 
> 赞同：1
> 
> 时间：2013-02-22T23:41:54.103
> 
> 标签：groovy, metaprogramming

我正在尝试稍微改变我的 groovy 脚本的实现方式。我仍然希望它们从命令行运行，但我真的很想允许从同一个脚本中调用不同的方法（对它们进行分组），我还想要一个自动文档系统。

我正在尝试运行这样的脚本：

```
@Doc("这是一个测试脚本")
公共测试脚本（
    @Doc("参数 1 是可选的") String param1="nobody"
)
{
    println "你好"+param1
}

```

如果它被命名，说“脚本”，我可以通过在命令行中说：“脚本 testScript”或“脚本 testScript world”来运行该方法。如果您使用“script --help”，您将使用@Doc 注释在屏幕上显示使用情况。

我希望使用的技巧是 Groovy 为脚本指定基类的能力。如果我使用 -b Base 我可以在执行孩子的“运行”方法之前运行 Base 的构造函数。

在这一点上，我需要拦截即将“运行”的呼叫，但我不知道该怎么做。无论我尝试什么，expandoMetaClass、invokeMethod，它们都不会拦截对孩子的 run() 方法的调用。（我相信 invokeMethod 有一些方法可以做“继承”，但它需要一个设置才能在 main() 中运行..而脚本没有其中之一）。

如果我承诺使用批处理文件或其他类来启动脚本，这将是微不足道的，但我真的不想在命令行中添加更多内容（我希望将 -b Base 放在环境变量中以便脚本仍会像您对 cli 的期望一样运行）。

这是我的基类的一个例子......

```
抽象类 Base 扩展脚本实现 GroovyInterceptable {
    公共基础（）{
        println "执行完毕"
        assert(this.class.name == "script") // 它是子脚本的一个实例
        def metaClass = this.class.getMetaClass() // 应该是脚本的元
        metaClass.run = this.&myRun // 我相信这应该可以工作
    }
    定义我的运行（）
    {
        println "从未调用，但脚本在 Base() 返回后运行"
    }
}

```

# jquery - jquery 1.9 手风琴高度问题

> ID：15035117
> 
> 赞同：2
> 
> 时间：2013-02-22T23:41:55.647
> 
> 标签：jquery, jquery-ui, user-interface

我正在使用父高度为 400 像素的手风琴。我希望手风琴的高度永远不会大于 400 像素，但我也希望手风琴的各个元素调整到其内容的大小。通过将“heightStyle”设置为“fill”，我可以让整个手风琴的高度为 400px。在这种情况下，手风琴的每个元素都有相似的大小，如果元素的内容大于默认大小，它就会变成可滚动的，但如果内容更小，你会得到很多空白空间，这是我不想要的。

当然，我可以通过将“heightStyle”设置为“content”来使每个元素成为内容的大小，但是在这种情况下，折叠的展开大小可以大于 400px。所以我想要的是“填充”和“内容”的组合，你知道如何获得这种行为吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T00:58:42.920

您只需要在 css 中设置 max-height 和 overflow 属性。[这是一个演示](http://jsfiddle.net/Mottie/E3xnz/)：

```
#accordion .ui-accordion-content {
    max-height: 400px;
    overflow-y: auto;
} 
```

我将演示最大高度设置为 200px 只是为了演示目的。

# sql - rails没有这样的列错误

> ID：15035120
> 
> 赞同：2
> 
> 时间：2013-02-22T23:42:19.067
> 
> 标签：sql, ruby-on-rails, migration

我有以下应用程序。一部电影有很多评论，一个电影观众有很多评论。当我尝试将评论与电影相关联时，出现以下错误

```
Review Load (0.1ms)  SELECT "reviews".* FROM "reviews" WHERE "reviews"."movie_id" = 5
SQLite3::SQLException: no such column: reviews.movie_id: SELECT "reviews".* FROM     "reviews"  WHERE "reviews"."movie_id" = 5
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: reviews.movie_id:     SELECT "reviews".* FROM "reviews"  WHERE "reviews"."movie_id" = 5 
```

使用 sql gui 编辑器后，我发现正确的查询应该是

```
SELECT "reviews".* FROM "reviews" WHERE "movie_id" = 5 
```

评论.rb

```
class Review < ActiveRecord::Base
  belongs_to :movie
  belongs_to :moviegoer
  attr_protected :moviegoer_id
end 
```

movie.rb 和 moviegoer.rb 有

> has_many :评论

在他们中。架构.rb

```
ActiveRecord::Schema.define(:version => 20130222225620) do

create_table "moviegoers", :force => true do |t|
t.string   "name"
t.string   "provider"
t.string   "uid"
t.datetime "created_at", :null => false
t.datetime "updated_at", :null => false
end

create_table "movies", :force => true do |t|
t.string   "title"
t.string   "rating"
t.text     "description"
t.datetime "release_date"
t.datetime "created_at",   :null => false
t.datetime "updated_at",   :null => false
end

create_table "reviews", :force => true do |t|
t.integer "potatoes"
t.text    "comments"
t.integer "moviegoers_id"
t.integer "movies_id"
end

end 
```

我究竟做错了什么？为什么rails查询“reviews”。“movie_id”而不仅仅是“movie_id”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:52:25.243

您在迁移中使用了错误的列名。rails 的约定是外键是单数的。如果不是，那么您需要通过关联上的选项散列告诉 Rails 外键是什么。

要么回滚你的迁移，修复列名（moviegoers_id 也是错误的）然后再次迁移，或者告诉 rails 外键。

```
Class Review < ActiveRecord::Base
  belongs_to :movie, :foreign_key => 'movies_id'
  belongs_to :moviegoer, :foreign_key => 'moviegoers_id'
end 
```

两种模型的许多方面都必须发生同样的情况。

# javascript - Jquery 冲突，一个脚本不能与另一个脚本一起使用

> ID：15035121
> 
> 赞同：1
> 
> 时间：2013-02-22T23:42:24.323
> 
> 标签：javascript, jquery, lavalamp

*我有用于菜单的 jquery 脚本和其他用于图库的脚本，如何使它们都工作？下面是我的代码*

**我在 li 元素上也有一些扩展框问题，解释如下：**

任何不适合固定宽度或高度框的内容都会导致框扩展以适合内容，而不是让内容溢出。

影响：Internet Explorer 6.0 可能性：可能

**还有双浮动边距错误错误：**

当在浮动方向的同一侧对浮动框应用边距时，边距加倍。此错误仅影响一个或多个浮动行中的第一个浮动。

影响：Internet Explorer 6.0 可能性：很可能

非常紧急，请帮忙！

**菜单栏的脚本**

```
 <script type="text/javascript" src="../../js/jquery.min.js"></script>
<script type="text/javascript" src="../../js/jquery.easing.min.js"></script>
<script type="text/javascript" src="../../js/jquery.lavalamp.min.js"></script>
<script type="text/javascript" src="../../js/image_fade.js"></script>
<script type="text/javascript">
    $(function() {
      $("#lava_menu").lavaLamp({
        fx: "backout",
        speed: 700
      });
    });
</script> 
```

**画廊脚本**

```
 <script type="text/javascript"src="../../hisasann-jStack/js/jquery.js"></script>
         <script type="text/javascript" src="../../hisasann-jStack/js/jquery.easing.1.3.js"></script>
        <script type="text/javascript" src="../../hisasann-jStack/js/jStack.js"></script>

        <!-- syntax -->
        <link rel="stylesheet" href="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Styles/SyntaxHighlighter.css" type="text/css" />  
        <script type="text/javascript" src="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/shCore.js"></script>  
        <script type="text/javascript" src="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/shBrushXml.js"></script>  
        <script type="text/javascript" src="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/shBrushCss.js"></script>  
        <script type="text/javascript" src="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/shBrushPhp.js"></script>  
        <script type="text/javascript" src="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/shBrushJScript.js"></script>  
        <script type="text/javascript" src="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/shBrushCss.js"></script>  
        <script type="text/javascript" src="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/shBrushJava.js"></script>  
        <script type="text/javascript" src="http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/shBrushRuby.js"></script>  
        <script type="text/javascript" charset="utf-8">
            $(function() {
                dp.SyntaxHighlighter.ClipboardSwf = 'http://hisasann.com/housetect/js/dp.SyntaxHighlighter/Scripts/clipboard.swf';
                dp.SyntaxHighlighter.HighlightAll('code');

                // fadeInOut
                $("#logo").fadeOut().fadeIn();

                // smooth scroller
                $("a[href^=#]").click(function() {
                    var hash = this.hash;
                    if(!hash || hash == "#")
                        return false;
                    $($.browser.safari ? 'body' : 'html')
                        .animate({scrollTop: $(hash).offset().top}, 1500, "easeInOutBounce");
                    return false;
                });
            });

            var options = {
                isClickAnimation: true,
                isPositionRandom: true,
                durationOut: 300,
                durationIn: 200,
                easingOut: "easeInOutBack",
                easingIn: "easeOutBounce",
                moveLeft: 250,
                moveTop: 150,
                opacityOut: 0.6,
                opacityIn: 1,
                delay: 10,
                direction: "next",
                callback: function() {}
            };

            $(window).bind("load", function() {
                // jStack
                var jstack = $("#imageBox").jStack(options);
                $("#next").click(function() {
                    jstack.next();
                });

                $("#prev").click(function() {
                    jstack.prev();
                });
                $("#shuffle").click(function() {
                    jstack.shuffle();
                });
            });

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:42:07.490

```
<script type="text/javascript" src="../../js/jquery.min.js"></script>
<script type="text/javascript"src="../../hisasann-jStack/js/jquery.js"></script> 
```

如果我没记错的话，它们都是 jquery 库？，如果它们加载在同一页面上，它们可能会相互冲突，这个问题发生在我身上，我所做的是删除了其中一个库，

# objective-c - 共享常量定义变量的标准是什么

> ID：15035122
> 
> 赞同：3
> 
> 时间：2013-02-22T23:42:27.880
> 
> 标签：objective-c, static, constants

正如标题所说 - 在 Java 中，我只需让一个类定义常量，然后将它们导入将使用它们的类中。在 Objective-C 中是否以同样的方式完成？

为了清楚起见，我想

```
#define variable 1
#define variable 2.0 
```

并在不同的类中使用相同的常量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T23:45:07.940

将宏放在头文件中，`#include`或`#import`在您需要访问它们时放在该头文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T00:06:49.773

使用宏还有另一种选择。您可以将它们定义为全局变量。

在常量.h 中：

```
extern int variableX;
extern float variableY; 
```

在 Constants.m 中（通常在导入之后，在任何其他代码之前）：

```
int variableX = 1;
float variableY = 2.0f; 
```

与宏相比，这种方法有几个优点：

1.  客户不需要看到价值。
2.  如果值更改，则无需重新编译导入 Constants.h 的每个文件。
3.  这些值可以通过多种不同的方式进行初始化，而不仅仅是文字。
4.  使用变量时的类型安全和编译器检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T00:12:39.407

您的示例使用 C 预处理器宏。这在 Objective-C 中的工作方式与在任何其他支持 C 风格预处理器宏的环境中相同：将它们粘贴到共享头文件`#import`中`#include`。

虽然这完全没问题，但您是在询问与类相关的常量，尤其是 Objective-C。在 Objective-C 中，你经常会看到常量 NSStrings（例如用于通知名称或字典键）和属于特定类的类似常量，定义如下：

在标题 (.h) 中：

```
extern NSString * const LibraryEntryDidUpdateNotification;
extern const NSUInteger LibraryEntryDefaultStarRating;

@interface LibraryEntry : NSObject

... 
```

在实施（.m）中：

```
NSString * const LibraryEntryDidUpdateNotification = @"LibraryEntryDidUpdateNotification";
const NSUInteger LibraryEntryDefaultStarRating = 3;

@implementation LibraryEntry

... 
```

这就是 Apple 在其现代框架中的做法，以及许多第三方开发人员的做法。在我看来，重构比预处理宏更容易（例如，当使用 Xcode 中的“重构”按钮重命名一个类时，同样很容易使用这些常量），但是常量的预处理宏也有其好处。

如果您有兴趣，请参阅[此处](http://www.mikeash.com/pyblog/friday-qa-2011-08-19-namespaced-constants-and-functions.html)和[此处](http://vgable.com/blog/2010/07/19/define-string/)以更深入地讨论该主题。

# python - 用什么命令代替 urllib.request.urlretrieve？

> ID：15035123
> 
> 赞同：28
> 
> 时间：2013-02-22T23:42:28.087
> 
> 标签：python, python-3.x, python-requests, urllib

我目前正在编写一个从 URL 下载文件的脚本

```
import urllib.request
urllib.request.urlretrieve(my_url, 'my_filename') 
```

文档[`urllib.request.urlretrieve`](http://docs.python.org/3/library/urllib.request.html#urllib.request.urlretrieve)状态：

> 以下函数和类是从 Python 2 模块 urllib（与 urllib2 相对）移植而来的。它们可能会在未来的某个时候被弃用。

因此我想避免它，所以我不必在不久的将来重写这段代码。

我无法`download(url, filename)`在标准库中找到另一个接口。如果`urlretrieve`被认为是 Python 3 中的遗留接口，那么替换是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-23T00:22:12.080

*不推荐使用是一回事，*将来可能会被弃用**是*另一回事。*

 *如果它适合您的需求，我会继续使用`urlretrieve`.

也就是说，你可以没有它：

```
from urllib.request import urlopen
from shutil import copyfileobj

with urlopen(my_url) as in_stream, open('my_filename', 'wb') as out_file:
    copyfileobj(in_stream, out_file) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-22T23:51:05.090

requests 非常适合这个。虽然安装它有一些依赖项。这是一个例子。

```
import requests
r = requests.get('imgurl')
with open('pic.jpg','wb') as f:
  f.write(r.content) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-28T04:41:20.357

另一种不使用[`shutil`](https://docs.python.org/3/library/shutil.html)也没有其他外部库的解决方案，如[`requests`](http://docs.python-requests.org/en/latest/).

```
import urllib.request

image_url = "https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon.png"
response = urllib.request.urlopen(image_url)
image = response.read()

with open("image.png", "wb") as file:
    file.write(image) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-21T04:42:21.973

不确定这是否是您正在寻找的，或者是否有“更好”的方式，但这是我在库之后添加到脚本顶部的内容，以使我的脚本与 Python 2/3 兼容。

```
# Python version compatibility
if version.major == 3:
    from urllib.error import HTTPError
    from urllib.request import urlopen, urlretrieve

elif version.major == 2:
    from urllib2 import HTTPError, urlopen

    def urlretrieve(url, data):
        url_data = urlopen(url)
        with open(data, "wb") as local_file:
            local_file.write(url_data.read())
else:
    raise ValueError('No valid Python interpreter found.') 
```

这至少看起来像是一个方便的技巧，我希望这可能对某人有所帮助。

最好的！*

# orchardcms - 来自不同模块的果园自定义模块返回视图

> ID：15035129
> 
> 赞同：2
> 
> 时间：2013-02-22T23:43:00.003
> 
> 标签：orchardcms

我最近浏览了 Pluralsight 上的 Advanced Orchard 教程，它确实向我展示了我可以做很多事情来扩展 Orchard。也就是说，我想知道一个模块是否有办法从另一个模块返回视图？

这种情况是我正在为我的客户构建具有专有功能的自定义模块，因此我想使用 API 密钥保护它们，类似于 oForms 的工作方式。我的和他们的唯一区别是，无论激活如何，它们都允许功能，而我的根本不起作用，所以我想要一个基本模块，我的所有自定义模块都来自该模块，每个模块都可以执行以下操作：

```
if (this.IsActivated())
    return View("ViewFromThisModule")
else
    return View("NotActivatedViewFromBaseModule") 
```

这背后的真正目的是，我不必将基本模块中使用的视图复制到每个自定义视图中，例如模块是否被激活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:45:04.347

根据 Betrand 的建议，我不会采用多模块路线，而是使用单个模块来分解功能。然后我不需要分享任何东西，因为整个东西都是独立的。

# javascript - 在 Response.Redirect 之前更新 aspx 页面上的标签

> ID：15035135
> 
> 赞同：0
> 
> 时间：2013-02-22T23:43:45.427
> 
> 标签：javascript, asp.net, vb.net

我有以下重定向，但需要在重定向之前将标签更改为“成功”：

```
Response.Redirect(Url) 
```

我试过传入 false 然后更改 label.Text = "Success"

还尝试保存这样的值

您需要的是一种在过渡期间保存数据的方法。因此，第一次通过验证将值存储到 Session 变量中没有成功。

```
Session ("label") = "Success
Response.Redirect(Url, False)

Label.Text = Session("label") 
```

是通过java脚本做到这一点的唯一方法吗？

我会使用：

```
Page.ClientScript.RegisterClientScriptBlock 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:27:41.540

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "anyKey", "<script>alert('Success'); window.open(" + url + ");</script>", false); 
```

或者如果您想在用户按下消息框上的确定按钮时打开 url，您也可以这样做

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "anyKey", "<script>if(confirm('Success')) window.open(" + url + ");</script>", false); 
```

同样，正如 Aristo 上面所说

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "anyKey", "<script>$('#"+ lblYourLabel.ClientID +"').val('Success'); var t=setTimeout(function(){window.open(" + url + ");},3000);</script>", false); 
```

# mobile - Distriqt AIR 本地通知栏 - 删除旧通知

> ID：15035141
> 
> 赞同：0
> 
> 时间：2013-02-22T23:44:11.030
> 
> 标签：mobile, air, notifications, push-notification, local

我们尝试实现 distriqt 的不错的本地通知扩展。

使用停用事件设置了新通知：

```
 notification.id        = int(Math.random()*100);
                    notification.tickerText = _asde + " asdasd!";
                    notification.title      = _asde + " asd!";
                    notification.body       = "asd!";
                    notification.iconType   = NotificationIconType.APPLICATION;
                    notification.count      = 0;
                    notification.repeatInterval = 0;
                    notification.vibrate    = false;
                    notification.playSound  = true;
                    notification.soundName  = "assets/sounds/notification.mp3";

                    notification.delay      = secondsToDeath;
                    notification.data       = "Some notification data to attach "+notification.id;
try
                {
                    Notifications.service.notify( notification.id, notification );

                    _count ++;
                    Notifications.service.setBadgeNumber( _count );
                }
                catch (e:Error)
                {

                } 
```

如果用户单击该应用程序并再次将其停用，则会设置新通知。

旧通知仍然可用并显示，但我们希望删除旧通知。我们还没有找到注销旧通知的方法。

任何想法？

```
 private static const DEACTIVATE_NOTIFICATION_ID_4 : int = 4; 
```

被宣布。

```
if(_GoodA == true){
                    setSpielenFertigDate.time = 2400000*(1-_aktuellerFreudeWert/_maximalerFreudeWert);
                    var secondsToSpielenFertig:int = int((setSpielenFertigDate.time)/ 1000);

                    trace("halloe" + _fernseherAn.toString());
                    notification4.id        = DEACTIVATE_NOTIFICATION_ID_4;
                    notification4.tickerText = "He test it!";
                    notification4.title         = "sdf is happy!";
                    notification4.body      = "sdf test is on!";
                    notification4.iconType  = NotificationIconType.APPLICATION;
                    notification4.count     = 0;
                    notification4.repeatInterval = 0;
                    notification4.vibrate   = false;
                    notification4.playSound  = true;
                    notification4.soundName  = "assets/sounds/notification.mp3";

                    notification4.delay     = secondsToSpielenFertig;
                    notification4.data      = "Some notification data to attach "+ notification4.id;

                    try
                    {
                        Notifications.service.notify( notification4.id, notification4 );

                        _count ++;
                        Notifications.service.setBadgeNumber( _count );
                    }
                    catch (e:Error)
                    {

                    }
                }
                else{
                    trace("halloe2" + _fernseherAn.toString());
                    setSpielenDate.time = 5100000*(_aktuellerFreudeWert/_maximalerFreudeWert);
                    var secondsToSpielen:int = int((setSpielenDate.time)/ 1000);

                    notification4.id        = DEACTIVATE_NOTIFICATION_ID_4;
                    notification4.tickerText = "He tested it!";
                    notification4.title         = "sdf is unhappy!";
                    notification4.body      = "sdf test is off!";
                    notification4.iconType  = NotificationIconType.APPLICATION;
                    notification4.count     = 0;
                    notification4.repeatInterval = 0;
                    notification4.vibrate   = false;
                    notification4.playSound  = true;
                    notification4.soundName  = "assets/sounds/notification.mp3";
                    //Sekunden bis Nachricht geschickt wird
                    notification4.delay     = secondsToSpielen;
                    notification4.data      = "Some notification data to attach "+notification4.id;

                    try
                    {
                        Notifications.service.notify( notification4.id, notification4 );

                        _count ++;
                        Notifications.service.setBadgeNumber( _count );
                    }
                    catch (e:Error)
                    {

                    }
                } 
```

如果应用程序的 deactivate 事件被触发，它会跟踪 if 和 else 子句的正确部分。但它不会更新正文和标题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:55:14.833

我们的扩展有两种方法可以做到这一点。两者都涉及跟踪通知的 ID。

第一个是跟踪您的最后一个通知并从通知区域“取消”它。为此，您至少需要存储最后创建的通知的 ID。您可能感兴趣的代码部分是**取消**功能，它通过指定要删除的通知的 id 从通知面板中删除通知。

在你的类中的某处声明对最后一个通知的引用：

```
private var _lastNotification : Notification; 
```

然后在您的停用处理程序中：

```
var notification:Notification = new Notification();
notification.id = int(Math.random()*100);
notification.tickerText = "Deactivated";
notification.title = "TEST";
notification.body = "Application Deactivated";

if (_lastNotification != null)
    Notifications.service.cancel( _lastNotification.id );
Notifications.service.notify( notification.id, notification );

// Set this to be the recent notification displayed
_lastNotification = notification; 
```

第二个选项是为所有停用通知使用单个通知 ID。在这种情况下，您选择用于通知的常量 ID 并根据需要更新通知。通知管理器不会显示额外的通知，而只会更新具有指定 ID 的通知（或者如果它已被用户关闭，则显示它）。

```
private static const DEACTIVATE_NOTIFICATION_ID : int = 10;

var notification:Notification = new Notification();
notification.id = DEACTIVATE_NOTIFICATION_ID;
notification.tickerText = "Deactivated";
notification.title = "TEST";
notification.body = "Application Deactivated";

Notifications.service.notify( notification.id, notification ); 
```

希望这可以帮助！

# sql-server - 如何计算 SQL Server 中多个点之间的距离？

> ID：15035143
> 
> 赞同：10
> 
> 时间：2013-02-22T23:44:36.267
> 
> 标签：sql-server, distance, geography

我有来自 GPS 的数据表，例如：`Latitude`, `Longitude`, `Time`,`UserId`

如何聚合指定时间范围内的总距离，将所有点的所有距离（按时间排序）和用户分组数据相加？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T08:55:21.313

如果您使用 SQL Server，您可能对使用地理数据类型感兴趣，因此您可以使用专用方法和地理索引请求数据库。

地理数据类型自 SQL Server 2008 起可用，您可以在此处获得更多信息：

[http://msdn.microsoft.com/en-us/library/cc280766.aspx](http://msdn.microsoft.com/en-us/library/cc280766.aspx)

将数据放入地理列后，您将能够使用 STDistance() 方法计算两点之间的距离，请参阅 MSDN：

[http://msdn.microsoft.com/en-us/library/bb933808.aspx](http://msdn.microsoft.com/en-us/library/bb933808.aspx)

这是一个示例，其中 STDistance() 用于计算以米（国际标准单位）返回的两点之间的距离（具有地理变形）：

```
DECLARE @pointA geography;
DECLARE @pointB geography;
SET @pointA = geography::STGeomFromText('POINT(-122.34900 50)', 4326);
SET @pointB = geography::STGeomFromText('POINT(-122.34900 47.65100)', 4326);
SELECT @pointA.STDistance(@pointB); 
```

如果您使用的是 SQL Server 2005（或者如果您想避免使用地理数据类型），您可以查看 CodePlex 上的 MsSQLSpatial 项目，可在此处获得：[http ://mssqlspatial.codeplex.com/wikipage?title =特色&referringTitle=首页](http://mssqlspatial.codeplex.com/wikipage?title=Features&referringTitle=Home)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-20T08:06:08.887

以下函数以英里为单位给出***两个地理坐标之间的距离***

```
create function [dbo].[fnCalcDistanceMiles] (@Lat1 decimal(8,4), @Long1 decimal(8,4), @Lat2 decimal(8,4), @Long2 decimal(8,4))
returns decimal (8,4) as
begin
declare @d decimal(28,10)
-- Convert to radians
set @Lat1 = @Lat1 / 57.2958
set @Long1 = @Long1 / 57.2958
set @Lat2 = @Lat2 / 57.2958
set @Long2 = @Long2 / 57.2958
-- Calc distance
set @d = (Sin(@Lat1) * Sin(@Lat2)) + (Cos(@Lat1) * Cos(@Lat2) * Cos(@Long2 - @Long1))
-- Convert to miles
if @d <> 0
begin
set @d = 3958.75 * Atan(Sqrt(1 - power(@d, 2)) / @d);
end
return @d
end 
```

以下函数以公里为单位给出***两个地理坐标之间的距离***

```
CREATE FUNCTION dbo.fnCalcDistanceKM(@lat1 FLOAT, @lat2 FLOAT, @lon1 FLOAT, @lon2 FLOAT)
RETURNS FLOAT 
AS
BEGIN

    RETURN ACOS(SIN(PI()*@lat1/180.0)*SIN(PI()*@lat2/180.0)+COS(PI()*@lat1/180.0)*COS(PI()*@lat2/180.0)*COS(PI()*@lon2/180.0-PI()*@lon1/180.0))*6371
END 
```

**用法：**

```
select [dbo].[fnCalcDistanceKM](13.077085,80.262675,13.065701,80.258916) 
```

下面的函数使用 sql server 2008 中引入的 Geography 数据类型给出 两个***[地理](http://technet.microsoft.com/en-us/library/cc280766%28v=sql.100%29.aspx)***坐标***之间的距离（以公里为单位）***

```
DECLARE @g geography;
DECLARE @h geography;
SET @g = geography::STGeomFromText('LINESTRING(-122.360 47.656, -122.343 47.656)', 4326);
SET @h = geography::STGeomFromText('POINT(-122.34900 47.65100)', 4326);
SELECT @g.STDistance(@h); 
```

**参考：** [Ref1](http://blog.opensourcesql.com/2011/04/calculate-distance-between.html)，[Ref2](https://stackoverflow.com/a/8907943/730807)

我希望这有帮助

# sql-server - 创建一个由零组成的二进制字符串，长度可变

> ID：15035145
> 
> 赞同：0
> 
> 时间：2013-02-22T23:44:54.030
> 
> 标签：sql-server, sql-server-2008, tsql

`varbinary(max)`如果长度是在运行时指定的（例如，在存储过程中），那么创建类型为 的二进制零字符串的最优雅方法是什么？

我可以使用该`REPLICATE`函数来做到这一点，但这涉及到很多转换：

```
CAST(REPLICATE(CAST(CAST(0 AS tinyint) AS varbinary(max)), @size)
    AS varbinary(max)) 
```

（它甚至不适合在线......）有没有更好的方法来做到这一点？

**编辑**：代码应该适用于`@size > 8000`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T08:16:55.873

原始形式

```
CAST(REPLICATE(CAST(CAST(0 AS tinyint) AS varbinary(max)), @size)
    AS varbinary(max)) 
```

仍然最适合我的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:14:08.513

更好还是更短？:)

```
declare @size int
set @size = 3

select  CAST(REPLICATE(CAST(CAST(0 AS tinyint) AS varbinary(max)), @size) AS varbinary(max)),
        cast(replace(space(@size), ' ', 0x0) as varbinary(max)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:57:25.863

```
; with Foo as (
  select 1 as Size
  union all
  select Size * 2
    from Foo
    where Size < 65536 )
  select Size, Cast( Replicate( Char( 0 ), Size ) as VarBinary(MAX) ) as WideZero
    from Foo
    option ( maxrecursion 0 ) 
```

# r - R CMD 检查 --as-cran 警告

> ID：15035150
> 
> 赞同：29
> 
> 时间：2013-02-22T23:45:13.913
> 
> 标签：r, cran

在将我的包上传到 CRAN 之前，我正在尝试进行 R CMD 检查。

```
R CMD check --as-cran "my package folder". 
```

但是，它会发出以下警告：

```
"checking for unstated dependencies in examples ... OK

WARNING

pdf is needed for checks on size reduction of PDFs" 
```

我在网上搜索但没有找到解决这个问题的线索。仅当我运行“R CMD check”时不会出现此警告。我的包裹可以正常工作。有人可以告诉我我的包裹有什么问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-06-20T09:35:41.597

qpdf 是减小 pdf 大小所必需的外部程序，可以从[sourceforge 站点](https://sourceforge.net/projects/qpdf/files/)下载。您可以安装 32 bis 或 64 位版本，两者都可以工作。

要安装它，请下载该文件，然后将该文件夹复制到您的程序文件夹中。

接下来，您需要通过添加“C:\Program Files\qpdf-version_numer\bin”来编辑系统路径以指向 bin 文件夹。在命令批处理 (cmd) 中键入 qpdf 以查看是否已正确设置，您应该会收到消息

```
qpdf: an input file name is required

Usage: qpdf [options] infile outfile
For detailed help, run qpdf --help 
```

完成此操作后，应从 R CMD 检查中删除警告

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-11-11T11:51:28.777

添加到[塞德里克的答案](https://stackoverflow.com/a/44649267/3438001)：

如果您运行的是 32 位版本的 R，请务必[下载](https://sourceforge.net/projects/qpdf/files/)32 位版本的 qpdf，这是从 SourceForge 主页链接的版本。如果您正在运行 R 的 64 位安装，则需要进行一些挖掘以找到 qpdf 的 64 位版本，该版本被埋得更深一些（[此处](https://sourceforge.net/projects/qpdf/files/qpdf/7.0.0/)列出了 7.0 版本）。

将压缩的 qpdf 目录解压缩到硬盘（可能在 下）后，在环境变量下`C:\Program Files`添加`C:\Program Files\qpdf-version_no\bin`到系统`PATH`中，然后重新启动 R 以便它选择新的`PATH`，您需要让 Windows 相信 pqdf 可以安全运行。

导航`C:\Program Files\qpdf-version_numer\bin`并执行`qpdf.exe`（通过双击）。Windows 10 引发安全警告，因为它是一个无法识别的可执行文件。您需要使用该`more options`链接找到运行程序的按钮。完成此操作后，Windows 会将该文件识别为可以安全运行，并允许包括 R 在内的其他程序使用它。

# svn - SVN - 显示文件

> ID：15035158
> 
> 赞同：1
> 
> 时间：2013-02-22T23:45:59.347
> 
> 标签：svn, tortoisesvn

我想要实现的只是通过 ssh+svn// 协议（tortoiseSVN）将存储库中的文件下载到我的计算机中，而不是弄乱 svn 本身的任何东西。

导出功能可以安全使用吗？svn repo 上的东西不会乱七八糟，删除或禁用任何东西吗？只是将文件复制到我的计算机中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:49:04.670

是的，export 可以安全使用。导出将为您提供源文件的副本，并且不会跟踪对这些文件的更改。以下是有关导出命令的文档：

[http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)

# excel - 宏以相同的缩放打印两种不同的纸张尺寸

> ID：15035159
> 
> 赞同：3
> 
> 时间：2013-02-22T23:45:59.707
> 
> 标签：excel, printing, excel-2010, vba

我设置了一个宏来打印一个大数据集。它不能全部放在一张纸上（宽度方向，它可以根据需要在高度方向延伸）。它在 11x17 (Macro1) 上打印 2/3 的数据，在 8.5x11 (Macro2) 上打印剩余的 1/3。为了让它适合，我正在使用以下内容：

```
 .Zoom = False
    .FitToPagesWide = 1
    .FitToPagesTall = False 
```

现在，这已经足够好了。不幸的是，当它按比例缩小时，两张纸的比例并不相同，因此您不能将 8.5x11 放在 11x17 旁边并使行匹配。无论如何将缩放从一个宏传递到另一个？如果您设置`.FitToPagesWide`，则`.Zoom`仅返回 false。还应注意，数据集可能会添加额外的 2 到 4 列。因此，如果我为工作表设置特定的缩放比例，我觉得它并非在所有情况下都有效。理想情况下，我想只适合 11x17 并让 8.5x11 具有相同的比例。

*编辑*我使用了接受的答案并为我的宏删除了一些不必要的项目。最终代码如下：

```
 .Zoom = 60
    With ActiveSheet
        Do While .VPageBreaks.Count > 2
            .PageSetup.Zoom = .PageSetup.Zoom - 1
            ActiveWindow.View = xlPageBreakPreview
            ActiveWindow.View = xlNormalView
        Loop
    End With 
```

*编辑 2*当前代码迭代包括几个调试步骤。

```
 With ActiveSheet
        i = 1
        .PageSetup.Zoom = 80
        Do While .VPageBreaks.Count > 2
            .PageSetup.Zoom = .PageSetup.Zoom - 1
            ActiveWindow.View = xlPageBreakPreview
            ActiveWindow.View = xlNormalView
            Application.StatusBar = "Zooming Iteration #" & i & " :: Zoom at " & .PageSetup.Zoom
            i = i + 1
        Loop
        Application.StatusBar = False
    End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:02:23.600

我为一些报告做了类似的事情。基本上我只是继续将缩放设置为一个档次，直到没有垂直分页符为止。此时，您可以对第二张工作表应用相同的缩放。这将是未经测试的，但应该给你一个开始：

```
With wsBig
    Do While .VPageBreaks.Count > 0
        .PageSetup.Zoom = .PageSetup.Zoom - 1
        ActiveWindow.View = xlPageBreakPreview
        ActiveWindow.View = xlNormalView
    Loop
    wsSmall.PageSetup.Zoom = .PageSetup.Zoom
End With 
```

视图类型之间的切换对于使其工作是必要的，但我忘记了具体原因。

# jquery - 如何使用jQuery捕获框架内链接上的点击事件？

> ID：15035162
> 
> 赞同：1
> 
> 时间：2013-02-22T23:46:47.373
> 
> 标签：jquery, jsp, hyperlink, frame

我在 jsp 页面中使用 jQuery 1.6.2，并且试图捕获框架中任何链接的点击事件。需要注意的是链接在一个框架中（不是 iframe）并且没有 div。html结构是：

```
frameset
    frame with id and name
    frame with id and name
        html
            body
                table
                    tbody
                        tr
                          td
                            <a class='className' href="reference to another jsp to load"/>
... 
```

我可以使用此代码作为示例进入框架以删除所有有效的链接。

```
$('a',top.frames['frameName'].document).remove(); //This works! 
```

但是，我不知道如何将单击事件处理程序附加到这些链接。我从简单的事情开始，例如：

```
$('a').click(function(){ 
        alert("Click function found!");
    }); 
```

并且已经为此工作了很长一段时间，但没有成功。

关于如何做到这一点的任何想法？

**最终的：**

我做错的事情是使用 document.ready() 来放置我的代码。当我像这样移动它时：

```
$(window).load(function () {
    //$('a',top.frames['myFrame'].document).remove();
    $('a',top.frames['myFrame'].document).bind('click', function(e){
        alert('In myFrame!');
        e.preventDefault();
    });
}); 
```

一切正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:48:30.570

如果以下工作：

```
$('a',top.frames['frameName'].document).remove(); 
```

那么应该：

```
$('a',top.frames['frameName'].contentDocument).click(function(){  .... }); 
```

请记住，要使其正常工作，必须在绑定单击事件时加载框架。

# ruby - 应该发生什么，使得 η 还原突然出现在红宝石中？

> ID：15035165
> 
> 赞同：4
> 
> 时间：2013-02-22T23:47:05.477
> 
> 标签：ruby

假设我有`def f(a); a + 1; end`并应用`f`到 List 它通常看起来像`[1,2,3].map { |x| f x }`.

当我想使用 η-reduction ( `(λx.Mx) → M`) 时，这里出现错误：

```
> [1,2,3].map f
ArgumentError: wrong number of arguments (0 for 1)
    from (irb):2:in `f'
    from (irb):4
    from /usr/bin/irb:12:in `<main>' 
```

应该怎么做才能使它成为有效的 Ruby 语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:27:42.173

```
[1, 2, 3].map &method(:f)
=> [2, 3, 4] 
```

见[`Object#method`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-method)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:58:27.263

地图需要一个块。如果你愿意，你可以这样做：

```
f = lambda { |a| a+1 }
[1,2,3].map &f 
```

这样，您将块作为参数传递。为了通过参数传递块，您需要使用 & 符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T00:27:05.590

你也可以这样做：

```
print (1..3).collect{|i| i+1}  #=> [2, 3, 4] 
```

或者这也是：

```
(1..3).map(&:succ)  #=> [2, 3, 4] 
```

# javascript - 根据文档使用时 jQuery.on() 不起作用？

> ID：15035169
> 
> 赞同：1
> 
> 时间：2013-02-22T23:47:28.357
> 
> 标签：javascript, jquery

我已经阅读了 live()（现在已经从 jQuery 中删除）、delegate() 和 on() 的所有文档。在用这个问题打了自己八个小时之后，我不知道如何解决它。我想向一堆链接添加一个匿名函数，这些链接是从通过 AJAJ 引入的数据创建的。我试过以下代码：

```
$("#more_items_outer").on(
            'click',
            '.show_more',
            function(a){
                var target = a.parentElement;
                if (target.is(":visible")){
                    target.hide("slow");
                } else {
                    target.show();
                }
            }
        ); 
```

页面加载后，当我在开发浏览器的 JS 控制台中运行此代码时，它运行良好。但是，如果此代码在创建实际链接之前运行，则对这些链接没有任何作用。据我了解（以及作为多个来源，包括官方 jQuery 文档，对其进行描述），我在上面的代码中使用的 on() 函数应该可以使创建的类“show_more”的任何元素作为 id 为“more_items_outer”的任何元素的后代，在单击它时将执行匿名函数。即使新元素的创建晚于此代码的执行，这也应该是正确的。这在我的开发系统上并没有发生，我很清楚为什么会这样。如果有帮助，我正在运行 jQuery 1.9.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:30:40.057

首先，请查看下面的第 5 项。在我看来，您的 click 事件处理程序函数中有几个 javascript 错误。

一般来说，动态形式的`.on()`作品是这样的：

```
$(static selector that exists).on('click', 'dynamic selector', function() {}); 
```

由于您没有向我们展示您的 HTML 或 ajax，我只能列举出可能出错的类型：

1.  静态选择器表示的对象在`.on()`调用执行时必须存在。
2.  静态选择器对象必须是动态对象的父对象。
3.  动态选择器必须匹配在原始调用时存在或稍后添加的子对象。
4.  在调用之前您可能会遇到 javascript 错误`.on()`，因此它永远不会执行。
5.  您的处理程序函数中似乎有一个 javascript 错误。您引用的代码`a.parentElement`似乎是错误的。在那种情况下，`a`是一个 jQuery 事件对象，我不相信它有一个`parentElement`属性。而且，即使 parentElement 是一个元素，那么你做的下一行`target.is(":visible")`也不会工作，因为`target`它不是一个 jQuery 对象。因此，您至少必须修复处理程序函数中的代码。如果这是唯一的错误，那么您应该能够在 javascript 错误控制台或调试控制台中看到这些错误。

# python - 从 HTML 获取 OpenGraph 元标记的最快方法？

> ID：15035174
> 
> 赞同：2
> 
> 时间：2013-02-22T23:48:08.317
> 
> 标签：python, html, parsing, facebook-opengraph, lxml

Beautiful Soup 效率不够高，所以我尝试使用 pure `lxml`。但是，这`lxml.html.fromstring`是错误的（[一段时间后它突然吃掉了 100% 的 RAM](https://stackoverflow.com/questions/5260261/lxml-parser-eats-all-memory)），所以我需要以其他方式（而不是`fromstring`）。

我可以使用 API 中的任何其他模块吗？我想不通，互联网上的例子令人惊讶地接近于零。

这就是我现在正在做的事情，但正如我所说，我需要替换`fromstring`：

```
 mySearchTree = fromstring(data)
        metas = {}
        n = -1
        for a in mySearchTree.cssselect('meta'):
            n += 1
            metas[n] = {}
            for b in a.items():
                metas[n][b[0]] = b[1]
        y = 0
        tag = []
        for m in metas:
            if 'property' in metas[m] and 'content' in metas[m]:
                if 'og:' in metas[m]['property']:
                    y += 1
                    tag.append({metas[m]['property'] : metas[m]['content']})

        for x in tag:
            for y in x:
                #print '%s ==> %s' % (y, x[y])
                self.rj[y] = x[y] 
```

任何指针都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:40:43.590

由于 OpenGraph 标签通常位于 HTML 文档的开头，因此您只能读取和解析输入文件的一部分。我认为该部分很大的可能性`HEAD`非常小（尽管您的研究可能会导致不同的意见，这取决于您的样本）。

1.  设置块大小（例如 1024 字节）。
2.  逐块读取输入文件（类似于`stream.read(1024)`），直到缓冲区中存在`</head>`（或`</HEAD>`，或`<body>`等）。决定限制 - 在输入损坏并且没有标头左右的情况下最大读取的字节数，因此您可以尽快放弃消耗大量内存。
3.  使用`lxml.html`解析器读取你缓存的片段（无效，但没关系，`lxml`可以处理，不会影响我们的目标）。
4.  现在，您有了`lxml`带有 HTML 文件头部的 DOM 对象。它是高效创建的，没有过多内存消耗的风险。您可以进行任何搜索、提取等。我会使用`xpath`，但请随意使用您在问题中上面的时髦 DOM 挠痒痒代码。

# php - 使用其他查询参数时，Instagram 重定向 URI 与原始重定向 URI 不匹配

> ID：15035175
> 
> 赞同：6
> 
> 时间：2013-02-22T23:48:16.487
> 
> 标签：php, wordpress, oauth, instagram

我正在为 WordPress 开发一个插件，用户单击“在 Instagram 上登录”按钮来授权我的 Instagram 应用程序。授权后，该插件基本上只会从用户那里获取最新的 Instagram 照片并通过小部件显示。

这是我的插件如何工作的分步说明：

1.  用户在 WordPress 设置页面上单击“在 Instagram 上登录”。
2.  用户将被带到 Instagram 的授权屏幕（登录屏幕）
3.  用户成功验证并批准了我的应用程序。
4.  Instagram 将用户重定向到我的**Redirect URI**。
5.  文件“instagram-api-redirect.php”将获得“code”和“return_uri”参数。其中“代码”用于请求“访问令牌”。
6.  它与“访问令牌”一起重定向回 WordPress 设置页面。
7.  该插件将“访问令牌”存储到数据库以用于验证请求。

我遇到的问题是，我在第 5 步收到错误消息*“重定向 URI 与原始重定向 URI 不匹配” 。当我从***重定向 URI**中删除“return_uri”查询参数时，它工作正常。

一些细节可能会有所帮助：

这是我的应用程序中的**重定向 URI**：

> http://mysite.com/plugins/pulp_instagram/instagram-api-redirect.php

这是我发送到 Instagram 的**"/authorize"的****重定向 URI**：

 **> http://mysite.com/plugins/pulp_instagram/instagram-api-redirect.php?return_uri=http://localhost/instagram-app

这是我发送到 Instagram 的**“/authorize”**的完整授权 URL ：

> https://api.instagram.com/oauth/authorize/?client_id=CLIENT-ID&redirect_uri=http://mysite.com/plugins/pulp_instagram/instagram-api-redirect.php?return_uri=http://localhost/instagram -app&response_type=代码

这是 URL 响应：

> http://mysite.com/plugins/pulp_instagram/instagram-api-redirect.php?return_uri=http://localhost/instagram-app&code=557d15dacd0d40459edf70aa159476de

这是“instagram-api-redirect.php”文件的完整代码：

```
<?php 

// the redirect uri
$return_uri = $_GET['return_uri'];

require 'instagram.class.php';

// Initialize class
$instagram = new Instagram(array(
  'apiKey'      => 'CLIENT-ID',
  'apiSecret'   => 'CLIENT-SECRET',
  'apiCallback' => 'http://mysite.com/plugins/pulp_instagram/instagram-api-redirect.php'
));

// Receive OAuth code parameter
$code = $_GET['code'];

// Check whether the user has granted access
if (true === isset($code)) {

    // Receive OAuth token object
    $data = $instagram->getOAuthToken($code);
    print_r($data); 
} else {

  // Check whether an error occurred
  if (true === isset($_GET['error'])) {
    echo 'An error occurred: '.$_GET['error_description'];
  }

}
?> 
```

另外，我正在使用[cosenary](https://github.com/cosenary/Instagram-PHP-API)的“Instagram PHP API”类（instagram.class.php） 。

提前致谢！**

# c - 从C中的char数组中减去一条信息

> ID：15035180
> 
> 赞同：0
> 
> 时间：2013-02-22T23:48:49.960
> 
> 标签：c, regex, filter, arrays

我目前正在编写一段代码，但我不确定如何解决这个问题。病态说明情况：

这段代码的目标是在 C 中创建一个“动态”矩阵。使用“fgets”我得到一个 char 数组，我的代码将第一行解释为一个 char 数组。然而，还有更多行我现在只对第一行感兴趣，所有其他行只包含我需要存储的信息。

我只对第一行感兴趣的原因是因为它包含有关矩阵需要多大的信息才能适合下面的所有信息。信息以某种模式出现，它始终采用 x,y 的形式。x 和 y 彼此不受约束，例如 x 可以比 y 小或大 10 倍。也没有设置行上信息的位置，它可以浮动在屏幕的右侧或左侧。

是否有任何形式，如 java 中的正则表达式，我可以用来过滤信息？例如，在第一行中查找“，”，找到后检查“，”的右侧和左侧，一直到第一个空格，并将这两个值存储在变量中。

例子：

```
[                   14,10            ] 
```

结果将是：

```
int rowSize = 14;
int columnSize = 10; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:54:38.927

为什么不搜索第一个有效的十进制字符？

```
#include <ctype.h>
#include <stdlib.h>
#include <stdio.h>

char *first_digit(const char *s)
{
    while (!isdigit(*s)) s++;
    return s;
}

int main()
{
    const char *line = "[             14,      10        ]";
    int n, k;

    const char *first = first_digit(line);
    const char *end;
    n = strtol(first, &end, 10);

    const char *second = first_digit(end);
    k = strtol(second, NULL, 10);

    printf("n, k = %d, %d\n", n, k);
    return 0;
} 
```

# c# - 有没有办法在 Windows 上自定义放大镜程序？

> ID：15035183
> 
> 赞同：1
> 
> 时间：2013-02-22T23:48:57.107
> 
> 标签：c#, zooming

我需要创建或自定义放大镜。放大镜需要与 windows 7 放大镜相同，只是有两点不同：

1）放大镜不跟随鼠标光标：我的意思是放大镜在放大或缩小时保持静止。

2）鼠标光标不会从放大镜视图中消失：我的意思是鼠标光标不能远离缩放区域。

任何想法？

谢谢你。

# android - 安卓谷歌地图。计算 onLocationchange 的行进距离并在 textview 中显示。？

> ID：15035184
> 
> 赞同：1
> 
> 时间：2013-02-22T23:49:01.390
> 
> 标签：android, performance, android-layout, android-intent, android-widget

我正在开发一个 Android 谷歌地图活动项目。我应该计算 onLocationchange 的行进距离。在计算距离时，我遇到了一个问题。此处的实际要点是在触发 onlocationchange 时在文本视图中显示行进的距离。这是我尝试过的代码。

```
 @Override
            public void onLocationChanged(Location location) {
                // TODO Auto-generated method stub
                GeoPoint point = new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude() *1E6));
                path.add(point);
                controller.animateTo(point);
                mapview.invalidate();
                distance();
            }

            public void distance(){
                start = path.get(0);
                stop = path.get(path.size()-1);
                double lat1 = start.getLatitudeE6() / 1E6;
                double lat2 = stop.getLatitudeE6() / 1E6;
                double lon1 = start.getLongitudeE6() / 1E6;
                double lon2 = stop.getLongitudeE6() / 1E6;
                double dLat = Math.toRadians(lat2 - lat1);
                double dLon = Math.toRadians(lon2 - lon1);
                double a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
                double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                double d = c * 6378.1;
                d =Double.parseDouble(new DecimalFormat("####.###").format(d));
                text.setText(" distance :" + d + "km");
            } 
```

我正在通过 DDMS Manual Decimal 传递四个位置这是这些位置。

```
1)lat    -122.084095  This is the start point. and the text view is set to 0kms
                  long     37.422006

                2)lat    -122.085095    The textview distance is set to 0.088kms 
                  long     37.422006  

                3)lat    -122.085095    The textview distance is set to 0.142kms  wroks fine till here
                  long     37.423006    

                4)lat    -122.084095    The text view distance is set to 0.111kms    WTF. now why is that my distance is decreased from 0.142kms to 0.111kms
                  long     37.423006  

                5)4)lat    -122.084095    The text view distance is set to 0.0kms    OMG.. Now the textview shows 0.0kms whats wrong. 
                  long     37.422006 
```

这是计算距离的正确方法吗？我在做什么错误。我认为我们应该为点数组循环。但是怎么做？？我不知道...请帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:04:33.060

当你回到原点时，它说你的距离为 0 的事实应该引发一个灯泡：你实际计算的是从你的原点到你正在模拟的任何新点的距离，而不是总距离沿着路径。

您应该测量从您所在的最后一个点到下一个点的距离，而不是测量从点 1 到每个其他点的距离，并将其添加到您创建的距离变量中以保存总距离。

例如，更改以下内容应该可以解决您的问题：

```
start = path.get(path.size()-2);
//Be sure to check that there's at least 2 points in your array with an if statement!! 
```

然后后来：

```
totalDistance += d;
textView.setText("Text" + totalDistance); 
```

其中 totalDistance 是您之前定义的两倍。

# visual-studio-lightswitch - LightSwitch中_Pvt_Extensions的作用是什么

> ID：15035188
> 
> 赞同：6
> 
> 时间：2013-02-22T23:49:17.450
> 
> 标签：visual-studio-lightswitch

在 LightSwitch 中：

1.  _Pvt_Extensions 目录的作用是什么？

2.  为什么一般建议不要将此目录包含在源代码管理中？内容不需要吗？如果找不到，它是从某个地方（哪里？）拉出来的吗？

3.  为什么 Microsoft 建议将此目录包含在 Team build 的源代码控制中（请参阅[如何使用 Visual Studio TFS 2012 Team Build 构建 LightSwitch 项目](http://download.microsoft.com/download/4/3/C/43CEB2FB-6F22-428F-B397-D1926556181C/TFS%20Team%20Build%20with%20LightSwitch.docx)）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T07:17:10.653

当您单击该框以使用扩展名时，LightSwitch 需要该扩展名的文件将被复制到该文件夹​​中。

不确定源代码控制建议。

# scanf - 我在 php 中使用“fscanf”时出现的问题

> ID：15035194
> 
> 赞同：0
> 
> 时间：2013-02-22T23:49:47.183
> 
> 标签：scanf

我将这些句子和单词写在一个名为“titluri.txt”的文本文件中。这个“titluri.txt”里面有：

> “word1 word2 计算器 nu porneste din cauza ca@ 计算机无法启动，因为#”

我使用这个 php 脚本：

..etc 等 $fisier1 = fopen("titluri.txt", "r"); while((!feof($fisier1)) && ($citeste = fscanf($fisier1, "%s\t%s\t%[^@]s\t%[^#]s\n"))){

list($baza_de_date,$tablou,$subiect,$subect_en) = $citeste;} 等等。

但我不明白为什么 $subect_en 没有效果。当从文本文件读取时出现“word1”，出现“word2”，出现句子“calculatorul nu porneste din cauza ca”，但“计算机无法启动，因为”不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:12:34.923

尝试这个`"%s\t%s\t%[^\t]%[^#\n]"`

# c - 在井字游戏中需要一些关于变量的帮助（初学者编码器）

> ID：15035196
> 
> 赞同：0
> 
> 时间：2013-02-22T23:49:57.550
> 
> 标签：c, tic-tac-toe

我在使用 C 语言创建的井字游戏时遇到了一些问题。

我有一个名为 int cats 的变量（猫游戏是平局游戏），用于帮助计算和显示平局游戏的文本。

我几乎整个星期都在尝试弄清楚如何让比赛打成平局。即使你们能指出我正确的方向，那也太好了！

-弗伦丁

（PS开头的空if语句是针对玩家与电脑游戏的。如果我能弄清楚如何让游戏打成平局，我可以编写那部分没问题！再次感谢大家！）

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

void printTheBoard(char boardPieces[3][3]);
int playerOne(char boardPieces[3][3], int cats);
int playerTwo(char boardPieces[3][3], int cats);
void checkBoard(char boardPieces[3][3], int cats);

int main(void)
{
    char boardPieces[3][3] = {'\0'};
    int cats = 0;  //A tie game in Tic-Tac-Toe is called a Cats Game.
    int choice;

    printf("Would you like to play against the computer or another player?\n");
    printf("Press 1 to play against another player.\n");
    printf("Press 2 to play against the computer.\n");
    scanf("%d", &choice);

    if(choice == 1)
    {
        for(int i = 0; i < 5; ++i)
        {
            printTheBoard(boardPieces);
            playerOne(boardPieces, cats);
            checkBoard(boardPieces, cats);

            printTheBoard(boardPieces);
            playerTwo(boardPieces, cats);
            checkBoard(boardPieces, cats);
        }   
    }

    if(choice == 2)
    {

    }

    return 0;
}

void printTheBoard(char boardPieces[3][3])
{
    printf("\n %c | %c | %c\n", boardPieces[0][0], boardPieces[0][1], boardPieces[0][2]);
    printf("---|---|---\n");
    printf(" %c | %c | %c\n", boardPieces[1][0], boardPieces[1][1], boardPieces[1][2]);
    printf("---|---|---\n");
    printf(" %c | %c | %c\n\n", boardPieces[2][0], boardPieces[2][1], boardPieces[2][2]);
}

int playerOne(char boardPieces[3][3], int cats)
{
    int choice;

    printf("It is your turn. You are player O. Please enter in the space you would like to  take. The first space is 1, continuing left to right, top to bottom\n");
    scanf("%d", &choice);

    if(choice == 1)
    {
        boardPieces[0][0] = 'O';
        ++cats;
        return cats;
    }
    else if(choice == 2)
    {
        boardPieces[0][1] = 'O';
        ++cats;
        return cats;
    }
    else if(choice == 3)
    {
        boardPieces[0][2] = 'O';
        ++cats;
        return cats;
    }
    else if(choice == 4)
    {
        boardPieces[1][0] = 'O';
        ++cats;
        return cats;
    }
    else if(choice == 5)
    {
        boardPieces[1][1] = 'O';
        ++cats;
        return cats;
    }
    else if(choice == 6)
    {
        boardPieces[1][2] = 'O';
        ++cats;
        return cats;
    }
    else if(choice == 7)
    {
        boardPieces[2][0] = 'O';
        ++cats;
        return cats;
    }
    else if(choice == 8)
    {
        boardPieces[2][1] = 'O';
        ++cats;
        return cats;
    }
    else if(choice == 9)
    {
        boardPieces[2][2] = 'O';
        ++cats;
        return cats;
    }
}

int playerTwo(char boardPieces[3][3], int cats)
{
    int choice;

    printf("It is your turn. You are player X. Please enter in the space you would like to  take. The first space is 1, continuing left to right, top to bottom\n");
    scanf("%d", &choice);

    if(choice == 1)
    {
        boardPieces[0][0] = 'X';
        ++cats;
        return cats;
    }
    else if(choice == 2)
    {
        boardPieces[0][1] = 'X';
        ++cats;
        return cats;
    }
    else if(choice == 3)
    {
        boardPieces[0][2] = 'X';
        ++cats;
        return cats;
    }
    else if(choice == 4)
    {
        boardPieces[1][0] = 'X';
        ++cats;
        return cats;
    }
    else if(choice == 5)
    {
        boardPieces[1][1] = 'X';
        ++cats;
        return cats;
    }
    else if(choice == 6)
    {
        boardPieces[1][2] = 'X';
        ++cats;
        return cats;
    }
    else if(choice == 7)
    {
        boardPieces[2][0] = 'X';
        ++cats;
        return cats;
    }
    else if(choice == 8)
    {
        boardPieces[2][1] = 'X';
        ++cats;
        return cats;
    }
    else if(choice == 9)
    {
        boardPieces[2][2] = 'X';
        ++cats;
        return cats;
    }
}

void checkBoard(char boardPieces[3][3], int cats)
{
    if(boardPieces[0][0] == 'O')
    {
        if(boardPieces[0][1] == 'O')
        {
            if(boardPieces[0][2] == 'O')
            {
                printf("Player O has won the game!\n");
            }
        }
        else if(boardPieces[1][1] == 'O')
        {
            if(boardPieces[2][2] == 'O')
            {
                printf("Player O has won the game!\n");
            }
        }
        else if(boardPieces[1][0] == 'O')
        {
            if(boardPieces[2][0] == 'O')
            {
                printf("Player O has won the game!\n");
            }
        }
    }
    else if(boardPieces[0][2] == 'O')
    {
        if(boardPieces[1][1] == 'O')
        {
            if(boardPieces[2][0] == 'O')
            {
                printf("Player O has won the game!\n");
            }
        }
        else if(boardPieces[1][2] == 'O')
        {
            if(boardPieces[2][2] == 'O')
            {
                printf("Player O has won the game!\n");
            }
        }
    }
    else if(boardPieces[1][1] == 'O')
    {
        if(boardPieces[0][1] == 'O')
        {
            if(boardPieces[2][1] == 'O')
            {
                printf("Player O has won the game!\n");
            }
        }
        else if(boardPieces[1][0] == 'O')
        {
            if(boardPieces[1][2] == 'O')
            {
                printf("Player O has won the game!\n");
            }
        }
    }
    else if(boardPieces[2][0] == 'O')
    {
        if(boardPieces[2][1] == 'O')
        {
            if(boardPieces[2][2] == 'O')
            {
                printf("Player O has won the game!\n");
            }
        }
    }

    if(boardPieces[0][0] == 'X')
    {
        if(boardPieces[0][1] == 'X')
        {
            if(boardPieces[0][2] == 'X')
            {
                printf("Player X has won the game!\n");
            }
        }
        else if(boardPieces[1][1] == 'X')
        {
            if(boardPieces[2][2] == 'X')
            {
                printf("Player X has won the game!\n");
            }
        }
        else if(boardPieces[1][0] == 'X')
        {
            if(boardPieces[2][0] == 'X')
            {
                printf("Player X has won the game!\n");
            }
        }
    }
    else if(boardPieces[0][2] == 'X')
    {
        if(boardPieces[1][1] == 'X')
        {
            if(boardPieces[2][0] == 'X')
            {
                printf("Player X has won the game!\n");
            }
        }
        else if(boardPieces[1][2] == 'X')
        {
            if(boardPieces[2][2] == 'X')
            {
                printf("Player X has won the game!\n");
            }
        }
    }
    else if(boardPieces[1][1] == 'X')
    {
        if(boardPieces[0][1] == 'X')
        {
            if(boardPieces[2][1] == 'X')
            {
                printf("Player X has won the game!\n");
            }
        }
        else if(boardPieces[1][0] == 'X')
        {
            if(boardPieces[1][2] == 'X')
            {
                printf("Player X has won the game!\n");
            }
        }
    }
    else if(boardPieces[2][0] == 'X')
    {
        if(boardPieces[2][1] == 'X')
        {
            if(boardPieces[2][2] == 'X')
            {
                printf("Player O has won the game!\n");
            }
        }
    }

    else if(cats == 9)
    {
        printf("There was a tie game!\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:03:25.700

在函数中`playerOne()`，`playerTwo()`您递增`cats`声明为函数参数的变量。您应该将值存储在`cats`您在 start of 中声明的变量中`main`，例如：

```
for(int i = 0; i < 5; ++i)
{
    printTheBoard(boardPieces);
    cats = playerOne(boardPieces, cats);
    checkBoard(boardPieces, cats);

    printTheBoard(boardPieces);
    cats = playerTwo(boardPieces, cats);
    checkBoard(boardPieces, cats);
} 
```

更详细的解释如下。考虑以下代码：

```
void func(int var)
{
    var = 2;
}

int main(void) 
{
    int var;
    var = 1;
    func(var);
} 
```

**这里有两个不同的变量名称** `var` **。**一个在 的开头声明`main`，它的作用域或生命周期在`main`函数内。

另一个被声明为 的参数`func`，它的作用域是`func`函数的本地。**这意味着当函数返回****时，变量及其值不再存在。** `func`

 **现在，如果我们想`func`在函数返回后使用 's 局部变量的值，我们可以：

*   返回由 修改的值`func`：

    ```
    int func(int var)
    {
        var++;
        return var;
    }
    ...
    new_var = func(old_var); 
    ```

*   `func`改为通过指针就地修改变量：

    ```
    void func(int *var)
    {
        (*var)++;
    }
    ...
    func(&var); 
    ```

* * *

此外，在您当前的代码中永远不会运行`else if`最后打印平局消息的条件：`checkBoard()`

```
...
else if(boardPieces[2][0] == 'X')
{
    if(boardPieces[2][1] == 'X')
    {
        if(boardPieces[2][2] == 'X')
        {
            printf("Player O has won the game!\n");
        }
    }
}

else if(cats == 9)
{
    printf("There was a tie game!\n");
} 
```

`checkBoard()`考虑在打印游戏结果后从函数返回。也许考虑返回一个值来指示游戏是否已经结束，这样你就可以在发生这种情况时结束程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-01T09:13:54.763

我也是一个初学者程序员。我只是想用 C++ 分享我的井字游戏。我只是想分享它，因为我认为如果您使用 for 循环将值放入表中，它可以以更有效的方式创建。

> 这是主文件

```
#include <iostream>
#include <vector>
#include "tic_tac.hpp"
#include <bits/stdc++.h>

int main() {
    std::ios_base::sync_with_stdio(false);
    std::cin.tie(NULL);
    printf("-------------------------Welcome to the Tic Tac Toe game-------------------------\n");
    printf("Now steps to play this game is simple:- \n-> Enter the position at which you want to mark your sign.\n\n");
    printf("Just in case for position reference of the table\n\n");
    printf("  1  |  2  |  3  \n");
    printf("------------------\n");
    printf("  4  |  5  |  6  \n");
    printf("------------------\n");
    printf("  7  |  8  |  9  \n");
    printf("\n Ready to play the game(1 for YES and 0 for no): ");
    int start;
    scanf("%d", &start);
    if (start == 1) {
        game_run();
    }
    else {    
        return 0;
    }
} 
```

> 这是函数文件“tic_f.cpp”

```
#include <vector>
#include <iostream>
#include "tic_tac.hpp"
#include <algorithm>

//I am using 0 for player a and X for player b

int game_run() {
    //This the vector to which we pass input.
    std::vector<std::string> game_p = {" ", " ", " ", " ", " ", " ", " ", " ", " "};
    bool game_on = true;
    std::string user_t = "A";

    while (game_on) {
        int user_in;

        for (int i = 0; i < 9; i += 3) {
            std::cout << std::endl << " " + game_p[i] + "  |  " + game_p[i+1] + "  |  " + game_p[i+2] << std::endl;

            if (i < 6) {
                std::cout << "--------------\n";
            }    
        }
        //Check if any user has won
        //Thus variable check if the game has tie
        bool it = false;
        for (int i = 0; i < 9; i++) {
            if (game_p[i] == " ") {
                it = true;
            }
        }
        bool win_check = win(game_p);

        if (win_check) {
            std::cout << "\n\nPlayer " + user_t +  " won the game. Congrats!\n";
            game_on = false;
            return 0;
        }
        else if (!it) {
            std::cout << "Ohh, that's a tie. Nice game fellas.\n";
            game_on = false;
            return 0;
        }
        ;

        //This checks on which user turn it is
        if (user_t == "A") {
            user_t = "B";
        }
        else if (user_t == "B") {
            user_t = "A";
        }
        printf("\nEnter the position you want to make the sign: ");
        scanf("%1d", &user_in);

        if (user_t == "A" && user_in <= 9) {
            game_p[user_in - 1] = "0";
        }
        else if (user_t == "B" && user_in <= 9) {
            game_p[user_in -1] = "X";
        }

    }

}

bool win(std::vector<std::string> game_l) {
    bool what_r = false;
    for (int i = 0; i< 9; i += 3) {
        if (game_l[i] == game_l[i+1] && game_l[i] == game_l[i+2] && game_l[i] != " ") {
            what_r = true;
        }
    }
    for (int i = 0; i < 3; i++) {
        if (game_l[i] == game_l[i+3] && game_l[i] == game_l[i+6] && game_l[i] != " ") {
            what_r = true;
        }
    }    
    for (int i = 0; i < 3; i+= 2) {
        if (i == 0 && (game_l[i] == game_l[i+4] && game_l[i] == game_l[i+8])&& game_l[i] != " ") {
            what_r = true;
        }
        else if (i==2 && (game_l[i] == game_l[i+4] && game_l[i] == game_l[i+6]) && game_l[i] != " ") {
            what_r = true;
        }
    }
    return what_r;
} 
```

> 这是头文件“tic_tac.hpp”

```
#include <vector>
#include <string>
#include <stack>

bool win(std::vector<std::string> game_l);
int game_run(); 
```**

# entity-framework - 实体框架和 Azure 数据同步

> ID：15035199
> 
> 赞同：0
> 
> 时间：2013-02-22T23:50:12.020
> 
> 标签：entity-framework, entity-framework-5, azure-sql-database, azure-data-sync

是否有人针对 SQL Azure DB 使用实体框架，其中 DB 参与与另一个 SQL Azure DB 的 Azure 数据同步？

代码优先数据库迁移如何与此一起使用？Azure 数据同步是否会将架构更改更新到第二个数据库？

Azure 数据同步设置添加表并对原始数据库进行架构更改。这会导致实体框架出现任何问题吗？即使数据库的架构由于 Azure 数据同步设置而发生更改，我是否仍然能够在原始数据库上执行迁移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:08:33.640

数据同步不会自动获取任何架构更改，您必须自己显式影响架构更改并修改同步定义。

数据同步创建的对象不在您的 EF 模型中，您也不应该添加它们。

# axapta - 如何更改表单按钮的对齐方式？

> ID：15035200
> 
> 赞同：0
> 
> 时间：2013-02-22T23:50:15.123
> 
> 标签：axapta, dynamics-ax-2012

我想更改 AX 2012 中按钮的对齐方式我在表单的按钮组中有 4 个按钮看起来像

```
Button1    Button4
Button2    
Button3 
```

我想将 Button3 移动到第二列中，例如

```
Button1    Button3
Button2    Button4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T07:25:41.713

`Group`尝试使用带有 2 列的“垂直”将按钮放在常规表单控件中。

# image - 如何在 Qt 5 中保存灰度图像

> ID：15035205
> 
> 赞同：3
> 
> 时间：2013-02-22T23:50:50.407
> 
> 标签：image, qt, save, qt5

我无法让 Qt5 保存灰度`Format_Indexed8`图像。当我保存文件时，我得到一个没有相关功能的多色混乱。我期待一个灰度 BMP。

单色图像存储为`sizeof(uchar)*widthGL*heightGL`.

```
glTexSubImage2D(GL_TEXTURE_2D,0,0,0,widthGL,heightGL,
                GL_LUMINANCE,GL_UNSIGNED_BYTE,noise);
//computation   
QImage mySurface(noise,widthGL,heightGL,QImage::Format_Indexed8);
mySurface.save("test.bmp","BMP"); 
```

我目前的工作涉及使用第二个数组并且感觉很脏

```
static unsigned char* mbuffer = new unsigned char[3*widthGL*heightGL];
for (int i = 0,bpos=0;i<widthGL*heightGL;i++)
{
mbuffer[bpos++]=noise[i];
mbuffer[bpos++]=noise[i];
mbuffer[bpos++]=noise[i];
}
QImage mySurface(mbuffer,widthGL,heightGL,QImage::Format_RGB888); 
```

我想知道是否有任何方法可以让 Qt5 输出类似于灰度图像的东西。

编辑

> 在最新版本的 Qt 中，这个问题很有可能得到解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-28T12:37:00.763

问题是在使用之前没有在图像中设置颜色表。从 Qt 文档（[http://doc.qt.io/qt-5/qimage.html#QImage-4](http://doc.qt.io/qt-5/qimage.html#QImage-4)）：

> 如果 format 是索引颜色格式，则图像颜色表最初为空，并且必须在使用图像之前使用 setColorCount() 或 setColorTable() 充分扩展。

你可以试试这个：

```
glTexSubImage2D(GL_TEXTURE_2D,0,0,0,widthGL,heightGL,GL_LUMINANCE,GL_UNSIGNED_BYTE,noise);
//computation
QVector<QRgb> colorTable(256); //our grayscale palette
QImage mySurface(noise,widthGL,heightGL,QImage::Format_Indexed8);
for (int i = 0; i < 256; ++i)
     colorTable[i] = qRgb(i, i, i); //build palette
mySurface.setColorCount(256);
mySurface.setColorTable(colorTable);
mySurface.save("test.bmp","BMP"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T02:03:56.683

较新版本的 Qt 引入了`Format_Grayscale8`，因此可以保存 8 位灰度图像，如下所示：

```
QImage mySurface(noise,widthGL,heightGL,QImage::Format_Grayscale8);
mySurface.save("test.bmp","BMP"); 
```

当我注意到@owacoder 提出的方法实际上开始生成无法使用 ImageJ 或 Paint 打开的无效 BMP 文件（无论出于何种原因）时，我重新审视了这个问题。

# c++ - 如何访问整数的单个字节？

> ID：15035208
> 
> 赞同：6
> 
> 时间：2013-02-22T23:51:00.987
> 
> 标签：c++, byte, bit

对于指定的通信标准 RTCM SC104 3.1，我需要将数据跨字节拆分为一对 12 位数据段。因此，对于给定的消息，我需要将消息类型号放在第一个字节和第二个字节的一半上。然后我需要在第二个字节的一半开始一个 ID 整数并继续到第三个字节。这种模式一直持续到消息的末尾，它会减少 20 位、5 位和其他大小的其他整数，基本上是剪掉通常会填充整数值的 MSB 端的 0。

我还没有看到明确的定义，但我认为它必须以网络字节顺序输出，因此在复制位之前，我必须反转内存中的整数。我对 cpp 还是很陌生，想知道如何获取构成内存中整数的各个字节？如果我可以访问字节，那么我可以按位使用或将位从 2 个字节拆分为一个用于消息。

这是在添加数据之前构建消息的开始：

```
//build message 1002  gps 00111110 1010
    char buf1002[BUFFERSIZE];
    buf1002[0] = 0x3E; //00111110
    buf1002[1] = 0xA0; //10100000
//ref station id 12 bits of 16
//ex unsigned short m = 1100;
//m would be byte2 00000100 byte1 01001100
//buf1002[1] would be 10100100
//buf1002[2] would be 01001100
//reverse bit order for network after building? 
```

参考站将来自一个无符号短整数，因此是一个 2 字节整数。那么我该如何从其中读取单个字节呢？我是否从内存位置指针开始？如果是，那又如何？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:19:55.403

您可以像这样使用位字段 - 最后有一些警告：

```
typedef union packet {
    struct {
        unsigned int msgno  : 12; // creates a 12 bit wide integral field
        unsigned int msgtype  : 12;
        unsigned int somefield2  : 3;
        unsigned int somefield3  : 5;
    } fields;

    unsigned char asbytes[4];
} packet;

...

packet p;
// fill it, by using the field side of the union
p.fields.msgno = 16;
p.fields.msgtype = 12;
p.fields.somefield2 = 6;
// and retrieving them as regular bytes
unsigned char abyte = p.asbytes[0];
abyte = p.asbytes[1];
// and so on 
```

对我来说，主要优点是可读性：所有操作都像常规操作一样对更窄的整数类型变量进行操作。有一些限制（例如可移植性），但如果您不必针对多个体系结构或编译器或不同的字节序，它可以帮助您的程序更易于阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T00:08:07.757

例如，如果您的整数看起来像 00001000 00000000 11000000 00110000 （我正在制作空格来区分每个字节），则包含在 int a 的示例中：

```
int     a;
int     single_byte;

a = the_number; 
```

你可以做一个像

```
int     get_byte_in_integer(int byte_number, int integer); 
```

以便：

```
single_byte = get_byte_in_integer(1, a); // That would give you the 11000000 byte 
```

和

```
int    get_byte_in_integer(int byte_number, int integer)
{
      return (integer >> (byte_number << 3)) & 0xff);
} 
```

希望这有助于字节部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:58:18.600

您可以将其作为字节双关，例如：

```
const unsigned short s(1);
const char* const bytes(reinterpret_cast<const char*>(&s));

const char NaturalOrder[sizeof(s)] = {bytes[0],bytes[1]};
const char EndianFlipped[sizeof(s)] = {bytes[1],bytes[0]}; 
```

（但另请参阅 dmckee 关于内置函数自然大小的评论，并考虑使用固定宽度类型）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-25T03:18:39.773

请检查 libswiftnav 存储库中实现的 getbitu 函数（链接转载如下）。想法是通过从 ms 位端提取然后移向最低有效位端来提取跨多个字节打包的值。它需要的输入是保存打包值的缓冲区、值的字节偏移量（相对于缓冲区的开头）和要提取的值的位数。这些函数可以很容易地被模板化以支持返回除 uint32 之外的打包整数...添加一些状态来保存当前偏移量（在随后的 getbitu 调用中递增），您可以通过重复发出轻松解压缩打包消息中的所有数据字段getbitu() 根据特定的 RTCM 消息模式。便携的，

[https://github.com/swift-nav/libswiftnav/blob/master/src/bits.c](https://github.com/swift-nav/libswiftnav/blob/master/src/bits.c)

# drools - 从工作记忆中检索特定类型的事实

> ID：15035209
> 
> 赞同：7
> 
> 时间：2013-02-22T23:51:04.747
> 
> 标签：drools, drools-fusion

我需要从工作记忆中检索特定类型的事实，而不是检索所有事实。

我了解到我可以从工作记忆中检索所有事实，如下所示。

```
drools.getWorkingMemory().getWorkingMemoryEntryPoint("Stream").getObjects(); 
```

请提供一些指针以从工作内存中检索特定类型的对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T15:18:17.733

您可以使用查询来代替使用 getObjects() 方法。查询就像没有 RHS 的规则：

```
query "getObjectsOfClassA"
    $result: ClassA()
end 
```

您可以在查询中使用 DRL 语言的所有功能来创建真正复杂的匹配模式。您甚至可以将参数传递给查询：[http ://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html_single/#d0e7632](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html_single/#d0e7632)

然后，在您的 java 代码中，您可以使用以下命令调用您的查询：

```
QueryResults results = ksession.getQueryResults( "getObjectsOfClassA" ); 
for ( QueryResultsRow row : results ) {
    ClassA classA = ( ClassA ) row.get( "$result" ); //you can retrieve all the bounded variables here
    //do whatever you want with classA
} 
```

如果您需要所有 ClassA 的集合，您可以在查询中使用累积函数。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-05T09:04:29.680

您可以使用 ObjectFilter

```
Collection<Object> myfacts = session.getObjects( new ClassObjectFilter(MyFact.class) ); 
```

不幸的是，在 Drools 5.5.0 Final 中，生成的集合的 contains 方法无法按预期工作。通常一个 contains 方法返回 true，如果搜索到的对象*等于*集合中的某个值，但 Drool 的集合只找到具有相同引用的对象（它使用 == 来比较对象）。

# javascript - 用于 XML 编辑的 HTML 组件

> ID：15035211
> 
> 赞同：4
> 
> 时间：2013-02-22T23:51:20.053
> 
> 标签：javascript, html, css, xml

我应用 html HTML 页面在服务器上编辑和发送 xml。为了使其更有用，我希望基于 HTML 做出具有以下属性的决策：

1.  在编辑期间突出显示 XML 语法（必需）；
2.  体积轻巧（例如 5+ Mb 太多了）（必需）
3.  即时或按请求（例如按按钮）验证 XML（可选）
4.  是免费的（非常需要，但如果它真的满足所有要求，我愿意接受付费决定）；

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T00:02:32.920

您可能希望查看[CodeMirror](http://codemirror.net/)，它具有 XML 语法突出显示、自动完成、标签关闭和其他一些很棒的功能。

我不确定 CodeMirror 本身是否包含 XML 验证，但如果您可以使用 XmlHttpRequest 将内容发送到某种在线 XML 验证服务，那么添加它应该不会很困难。

# c# - 防止功能区从浮动窗口窃取焦点

> ID：15035212
> 
> 赞同：1
> 
> 时间：2013-02-22T23:51:23.133
> 
> 标签：c#, wpf, ribbon

我正在开发一个 WPF 应用程序，但是从几天前开始，我一直在坚持一些事情。

我已经成功创建了一些视图并添加了一个功能区。当我的观点是“**选项卡式文档**”时，一切似乎都按预期工作。

当我将任何视图置于“**浮动**”状态时，问题就出现了，这样做时，我无法执行从功能区按钮到浮动窗口的任何命令，因为**当我按下功能区中的按钮时，我的浮动窗口立即失去它重点**。

我一直在尝试很多方法来尝试解决这个问题，但没有运气。

我什至尝试过实现[这个](https://stackoverflow.com/questions/6410146/dockable-windows-floating-window-and-mainwindow-menu-integration)和[这个](http://blogs.msdn.com/b/visualstudio/archive/2010/03/09/wpf-in-visual-studio-2010-part-3-focus-and-activation.aspx)解决方案，但是它们似乎只适用于 WPF 菜单，而不是功能区（这就是我需要的）。

我很抱歉没有显示任何代码，但我真的没有任何有用的代码来解决这个问题，因为我无法找到任何适合我的解决方案。

希望可以有人帮帮我。先感谢您

# python - 使用 Autobahn Wamp Cra 时如何使用延迟返回身份验证密钥？

> ID：15035213
> 
> 赞同：2
> 
> 时间：2013-02-22T23:51:24.403
> 
> 标签：python, python-2.7, twisted, autobahn, wamp-protocol

我正在继承`WampCraServerProtocol`（来自 Autobahn Python）并覆盖`getAuthSecret`. 我知道现在我可以从该方法返回一个 deferred，但是，在做一个简单的测试时：

```
def getAuthSecret(self, authKey):        
    deferred = Deferred()
    deferred.callback("secret")
    return deferred 
```

...我收到以下错误`WampCraClientProtocol`：

`Authentication Error! http://api.wamp.ws/error#generic Deferred instance has no attribute '__len__' None`

好的，仅此一项就已经令人困惑了。`getAuthSecret`延期返还是否有特殊要求？

好的，继续前进，基于该错误，我向要返回的延迟添加了一个（微不足道的） **len方法：**

```
def getAuthSecret(self, authKey):
    #secret_deferred = self.factory.get_secret(authKey)
    deferred = Deferred()
    deferred.__len__ = lambda: 1
    deferred.callback("secret")
    return deferred 
```

...在这种情况下，我得到：

```
Authentication Error! http://api.wamp.ws/error#generic unsupported operand type(s) for +: 'instance' and 'str' None 
```

这让我更加困惑。我只想知道从该方法返回延迟的正确方法。（我应该注意，如果返回一个简单的字符串，一切都会完美运行）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:42:19.703

这对我有用：

[https://github.com/tavendo/AutobahnPython/blob/master/examples/wamp/authentication/server.py#L72](https://github.com/tavendo/AutobahnPython/blob/master/examples/wamp/authentication/server.py#L72)

您使用的是什么 AutobahnPython 版本？

更新：

v0.5.9 有一个关于基于延迟的身份验证的错误（请参阅下面的评论）。它已在 v0.5.14 上修复。Wamp Cra 基于延迟的身份验证在该版本上运行良好。

# php - 未设置变量时，PHP ISSET 函数仍在运行

> ID：15035215
> 
> 赞同：0
> 
> 时间：2013-02-22T23:51:39.200
> 
> 标签：php, web-scraping, screen-scraping

希望这是一个非常简单的解决方案，我是 PHP 新手，所以我可能遗漏了一些明显的东西。我正在用 ScraperWiki 构建一个刮板（尽管这是 PHP 的一个问题，与 SW 几乎没有关系）。代码如下：

```
<?php
require 'scraperwiki/simple_html_dom.php';

$allLinks = array();

function nextPage($nextUrl, $y)
{
    getLinks($nextUrl, $y);    
}

function getLinks($url) // gets links from product list page   
{
    global $allLinks;
    $html_content = scraperwiki::scrape($url);
    $html         = str_get_html($html_content);

    if (isset($y)) {
        $x = $y;
    } else {
        $x = 0;
    }

    foreach ($html->find("div.views-row a.imagecache-product_list") as $el) {
        $url          = $el->href . "\n";
        $allLinks[$x] = 'http://www.foo.com';
        $allLinks[$x] .= $url;
        $x++;
    }

    $next = $html->find("li.pager-next a", 0)->href . "\n";
    print_r("Printing $next:");
    print_r($next);

    if (isset($next)) {
        $nextUrl = 'http://www.foo.com';
        $nextUrl .= $next;
        print_r($nextUrl);
        $y = $x;
        print_r("Printing X:");
        print_r($x);
        print_r("Printing Y:");
        print_r($y);

        nextPage($nextUrl, $y);
    } else {
        return;
    }

}

getLinks("http://www.foo.com/department/accessories");

print_r($allLinks);

?> 
```

**预期输出**：脚本应该从第一页抓取所有链接，找到“下一页”按钮，从其 URL 中抓取链接，从该 URL 中找到“下一页”等等。当没有更多“下一页”链接时，它应该停止。

**CURRENT OUTPUT**：代码运行良好，但它不会在应该停止的时候停止。这是关键行：

```
$next = $html->find("li.pager-next a", 0)->href . "\n";
if (isset($next)) { } 
```

如果页面上存在a，我只希望“nextPage()”函数运行`li.pager-next a`。这是控制台的输出：

```
 http://www.foo.com/department/accessories?page=1
        http://www.foo.com/department/accessories?page=2
        http://www.foo.com/department/accessories?page=3
        http://www.foo.com/department/accessories?page=4
        http://www.foo.com/department/accessories?page=5
        http://www.foo.com/department/accessories?page=6
        http://www.foo.com/department/accessories?page=7
        http://www.foo.com/department/accessories?page=8
        http://www.foo.com/department/accessories?page=9
        http://www.foo.com/department/accessories?page=10

    PHP Notice:  Trying to get property of non-object in /home/scriptrunner/script.php on line 31
 // THE LOOP SHOULD BREAK HERE BUT DOESN'T

        http://www.foo.com
        http://www.foo.com/home?page=1
        http://www.foo.com/home?page=2
        http://www.foo.com/home?page=3
        http://www.foo.com/home?page=4
        http://www.foo.com/home?page=5
        http://www.foo.com/home?page=6
        http://www.foo.com/home?page=7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:58:06.283

那这个呢：

```
$next = $html->find("li.pager-next a", 0);

if (isset($next)) {
    $nextUrl = 'http://www.foo.com';
    $nextUrl .= $next->href; // move ->href here
    print_r($nextUrl . "\n"); // put \n here since we don't actually want that char in the url
    $y = $x;
    print_r("Printing X:");
    print_r($x);
    print_r("Printing Y:");
    print_r($y);

    nextPage($nextUrl, $y);
} else {
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:58:28.027

无论返回什么值

```
$next = $html->find("li.pager-next a", 0)->href . "\n"; 
```

当您附加到它时，它永远不会导致`isset($next)`返回 false `"\n"`。

使用这样的东西：

```
$nextElement = $html->find("li.pager-next a", 0);

if(isset($nextElement))
{
    $nextUrl = 'http://www.foo.com' . $nextElement->href . PHP_EOL;

    print_r($nextUrl);
    $y = $x;
    print_r("Printing X:");
    print_r($x);
    print_r("Printing Y:");
    print_r($y);

    nextPage($nextUrl, $y);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-23T00:01:52.977

只需删除 isset()

```
    如果（$下一个）{
    }

```

# javascript - 如何手动调度 hashchange 事件

> ID：15035217
> 
> 赞同：7
> 
> 时间：2013-02-22T23:52:04.527
> 
> 标签：javascript

1 - 什么是 WebKit 的正确语法（主要用于 iPad 上的 Safari，如果它适用于 Win Chrome 则很好）`.addEventListener`到`hashChange`事件？

2 - 是否可以（以及如何）通过`.dispatchEvent`上述浏览器手动/以编程方式调度 hashChange 事件？

TIA。

我找到了1的答案：

`window.addEventListener("hashchange", function() {console.log(location.hash)});`

但我仍然不知道如何发送`hashchange`手册，因为我不知道`EVENTOBJECT`我应该传递给`window.dispatchEvent(EVENTOBJECT)`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T22:10:31.143

如果你想在不改变哈希值的情况下强制 hashchcange 事件，你应该调用：

```
window.dispatchEvent(new HashChangeEvent("hashchange")) 
```

传递给事件处理程序的对象将具有以下可用道具：

```
String oldURL;
String newURL; 
```

这是我发现的唯一信息：

[https://github.com/WebKit/webkit/blob/master/Source/WebCore/dom/HashChangeEvent.h](http://forum.php.pl/index.php?showtopic=213470)

在这里收到答案后：

[http://forum.php.pl/index.php?showtopic=213470](https://github.com/WebKit/webkit/blob/master/Source/WebCore/dom/HashChangeEvent.h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T11:31:26.460

以下是如何让它在 Internet Explorer (IE11) 上运行

```
/**
 * cross browser hash change event dispatch
 */
function dispatchHashchange() {
    if (typeof HashChangeEvent !== "undefined") {
        window.dispatchEvent(new HashChangeEvent("hashchange"));
        return;
    }

    // HashChangeEvent is not available on all browsers. Use the plain Event.
    try {
        window.dispatchEvent(new Event("hashchange"));
        return;
    } catch (error) {
        // but that fails on ie
    }

    // IE workaround
    const ieEvent = document.createEvent("Event");
    ieEvent.initEvent("hashchange", true, true);
    window.dispatchEvent(ieEvent);
} 
```

# c# - 你如何清除整个datagridview列

> ID：15035219
> 
> 赞同：2
> 
> 时间：2013-02-22T23:52:16.137
> 
> 标签：c#, datagridview

我有一个包含几列的 DataGridView，你如何清除整个列中的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:55:00.403

只需循环行并清除单元格：

```
foreach (DataGridViewRow myRow in dataGridView1.Rows) 
{
    myRow.Cells[0].Value = null; // assuming you want to clear the first column
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T18:16:50.797

好吧，我知道已经有一段时间了，但这就是我所做的……我只是将列复制到一个临时变量中，从 datagridview 中删除该列，最后将临时列插入到 datagridview 中……这样，我不不必遍历所有行...

就像是：

```
 var tmp = dgv.Columns[3];
 dgv.Columns.Remove(dgv.Columns[3]);
 dgv.Columns.Insert(3, tmp); 
```

我还编写了一个扩展程序，以使代码更易于阅读：

```
public static class Extensions
{
    public static void ClearColumn(this DataGridView dgv, int columnIndex)
    {
        if (dgv.Columns != null && dgv.Columns.Count - 1 >= columnIndex)
        {
            var tmpCol = dgv.Columns[columnIndex];
            dgv.Columns.Remove(dgv.Columns[columnIndex]);
            dgv.Columns.Insert(columnIndex, tmpCol);
        }
    }
} 
```

像这样使用它：

```
Datagridview1.ClearColumn(3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T21:02:04.267

你可以使用这样的东西。假设您要清除第 0 列。

```
var myColumn = myDataGridView.Columns[0];

for (int i = 0; i < myColumn.Cells.Count; i++)
  column.Cells[i].Value = null; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-23T00:19:39.787

你的意思

```
dataGridView1.Rows.Clear(); 
```

或者

如果您使用的是`BindingSource`

```
bindingSource1.Clear(); 
```

或者如果你想清除你的`DataGridView Columns`

```
dataGridView1.Columns.Clear(); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-23T00:14:13.480

清除特定列

```
dataGridView1.Rows[<ROW_INDEX>].Cells[<CELL_INDEX>].Value = null 
```

# java - 在 main() 中调用 int 函数以显示当前工作日

> ID：15035224
> 
> 赞同：1
> 
> 时间：2013-02-22T23:52:58.880
> 
> 标签：java, function, calendar

我对java很陌生，发现以下代码来获取不包括周六和周日的工作日数。

我需要知道如何调用这个函数`main()`来显示`workDays`当前月份。

谢谢。

```
package mypkg;

import java.sql.Date;
import java.util.Calendar;

public class workrays {

    public static int getWorkingDaysBetweenTwoDates(Date startDate, Date endDate) {
        Calendar startCal;
        Calendar endCal;
        startCal = Calendar.getInstance();
        startCal.setTime(startDate);
        endCal = Calendar.getInstance();
        endCal.setTime(endDate);
        int workDays = 0;

        //Return 0 if start and end are the same
        if (startCal.getTimeInMillis() == endCal.getTimeInMillis()) {
            return 0;
        }

        if (startCal.getTimeInMillis() > endCal.getTimeInMillis()) {
            startCal.setTime(endDate);
            endCal.setTime(startDate);
        }

        do {
            startCal.add(Calendar.DAY_OF_MONTH, 1);
            if (startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY
            && startCal.get(Calendar.DAY_OF_WEEK) != Calendar.SUNDAY) {
                ++workDays;
            }
        } while (startCal.getTimeInMillis() < endCal.getTimeInMillis());

        return workDays;
    }

    public static void main(String args[]) {

        getWorkingDaysBetweenTwoDates(Date startDate, Date endDate);
        System.out.println(workdays);       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:00:28.507

首先，您应该使用`java.util.Date`而不是`java.sql.Date`. 其次，您需要先创建`Date`s 实例，然后再将其发送到您的`getWorkingDaysBetweenTwoDates`函数。第三，您需要将`getWorkingDaysBetweenTwoDates`函数的结果存储在局部变量中，然后使用它。为了创建`Date`s，您可以使用一个`SimpleDateFormat`对象：

```
public static void main(String[] args) {
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    try {
        Date startDate = sdf.parse("2013-02-20");
        Date endDate = sdf.parse("2013-02-22");
        int workdays = getWorkingDaysBetweenTwoDates(startDate, endDate);
        System.out.println(workdays);
    } catch (Exception e) {
        System.out.println("There's an error somewhere. Check the stacktrace to find it");
        e.printStackTrace(System.out);
    }
} 
```

* * *

根据您的评论，您可以创建另一个函数，该函数`Date`通过发送以下内容返回具有第一个日期值的实例`Date`：

```
public static Date getFirstDateOfMonth(Date aDate) {
    Calendar c = Calendar.getInstance();
    c.setTime(aDate);
    c.set(Calendar.DATE, 1);
    return c.getTime();
} 
```

你可以这样称呼它：

```
public static void main(String[] args) {
   Date endDate = new Date(); //current date/time
   Date startDate = getFirstDateOfMonth(endDate);
   int workdays = getWorkingDaysBetweenTwoDates(startDate, endDate);
   System.out.println(workdays);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:54:50.340

您需要传递如下引用：

```
Date startDate = new Date();
Date endDate = new Date();
getWorkingDaysBetweenTwoDates(startDate, endDate); 
```

或一个班轮：

```
getWorkingDaysBetweenTwoDates(new Date(), new Date()); 
```

当然，您必须在创建它们时提供开始和结束日期的值，通常使用`java.util.Calendar`. 您也可以使用 Date 方法来实现它，但它们已被弃用。

**编辑：**

这就是您`java.util.Date`使用来自的方法进行操作的方式[`java.util.Calendar`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

```
Date startDate = new Date();//current date in milliseconds
Calendar cal = Calendar.getInstance();
cal.setTime(startDate);
cal.set(Calendar.DATE, 1); 
```

# c# - 为什么我不能读取或写入会话？引发 NullObject 引用

> ID：15035229
> 
> 赞同：0
> 
> 时间：2013-02-22T23:53:50.117
> 
> 标签：c#, asp.net, session, asp.net-web-api

我正在制作一个 WebAPI 应用程序，但发现我无法读取或写入会话。我通常会怎么做会给出 NullObject 引用错误，即：

```
Session["Test"] = "Testing"; var testing = Session["Test"].ToString(); 
```

有人会碰巧理解这个例子的原因吗？

```
using System;
using System.Globalization;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web;
using System.Web.Http;
using System.Web.SessionState;
using System.Web.UI.WebControls;
using DotNetNuke.Entities.Modules;
using DotNetNuke.Entities.Portals;
using DotNetNuke.Services.Exceptions;
using DotNetNuke.Web.Api;

namespace DotNetNuke.Modules.ContactsManager
{

    public partial class ServicesController : DnnApiController
    {
       [AllowAnonymous]
       [HttpGet]
       public HttpResponseMessage createRequest(string amount)
       {
          //code omitted     
          HttpContext.Current.Session["Test"] = "Test";
          //code omitted
          return Request.CreateResponse(HttpStatusCode.OK, result);
       }
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:24:40.807

可能是您没有正确添加到会话中。

尝试做类似的事情`HttpContext.Current.Session.Add("Test", "Test");`

然后，您的第二条语句`var testing = Session["Test"].ToString();`将按照您的预期检索数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:47:01.430

我找到了答案，一切都与继承有关。我的解释可能措辞不太好，因为我仍在学习，但就是这样。

我正在使用的类已经继承了一个 ApiController 类，并且在我的 DotNetNuke 项目中，似乎 Session 之类的东西包含在“{NameSpace}ModuleBase”类中。所以实现一个 IDisposable

```
 using(myPorjectModuleBase base = new myProjectModuleBase())
{
 var testing = Session["Test"].ToString();
} 
```

然后我可以访问会话。

这可能是针对 6.2 及更高版本的 DotnetNuke 平台上的模块开发的。

感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T04:57:44.290

您可以使用以下代码，这是 C# 中的示例示例

```
public static string UserId
    {
        get
        {
            if (HttpContext.Current.Session["UserId"] == null)
            {
                return "";
            }
            return HttpContext.Current.Session["UserId"].ToString();
        }
        set
        {
            HttpContext.Current.Session["UserId"] = value;
        }
    } 
```

# jsf - JSF 动作与结果属性

> ID：15035232
> 
> 赞同：6
> 
> 时间：2013-02-22T23:54:06.067
> 
> 标签：jsf, jsf-2

我是 JSF 的新手，我想了解操作与结果属性之间的区别是什么？这不是按钮和命令按钮之间的区别，而是**同一**按钮标签上的结果与操作属性之间的区别。

例如，我可以拥有：

```
<h:button value="Go" outcome="<value>" /> 
```

或者

```
<h:button value="Go" action="<value>" /> 
```

我不确定何时使用哪一个。另外，`<value>`is`<#{bean.methodThatReturnsStringInNavigationRule}>`或有区别`<string literal in navigation rule>`吗？

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T00:40:01.380

不同之处在于，虽然**action**定义了要执行的服务器方法，但**结果**指定了一个 view-id，它将成为您页面的目标。您必须根据您要实现的目标使用 JSF 输入：

*   `<h:button outcome="user-management">`将您定位到用户管理页面。把它想象成一种链接。
*   `<h:commandButton action="#{backingBean.goToUserManagement}"`如果您在操作方法中返回**“用户管理” ，则与****结果**相同，但它允许您在服务器端执行一些逻辑。它必须嵌入到`h:form`标签中。

之间也没有区别`<h:button outcome="user-management">`or `<h:button outcome="#{backingBean.userManagementNavigationResult}">`，只要您的服务器端 getter 方法返回“用户管理”值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T00:15:33.460

如果您看到 JSF 2.0 API，则标签没有`action`属性。是 JSF 2.0 中的一个新标签。您可以直接在属性中声明导航结果，无需调用 bean 来返回类似.`<h:button>``<h:button>``outcome``<h:commandButton>`

但是，如果浏览器禁用了 JavaScript，导航将失败，因为“h:button”标签会生成一个“onclick”事件来处理导航`window.location.href`。

```
<h:button value="buton" outcome="login" /> 
```

**//HTML输出**

```
<input type="button" 
       onclick="window.location.href='/ContextRoot/faces/login.xhtml; return false;" 
       value="buton" /> 
```

资料来源：[mkyong](http://www.mkyong.com/jsf2/jsf-2-button-and-commandbutton-example/)。我最喜欢的网站，您可以在其中找到不错的示例。

JSF 的优秀博客：[BalusC](http://balusc.blogspot.com/2006/06/communication-in-jsf.html)。这个论坛上这么多人的英雄:)。

# jquery - Jquery增量yyyy-mm-dd日期

> ID：15035233
> 
> 赞同：0
> 
> 时间：2013-02-22T23:54:27.503
> 
> 标签：jquery, backbone.js

伙计们，我正在尝试在 Backbone 应用程序上制作旅馆预订日历。我需要每周间隔来制作日历，但问题是，有一个 YYYY-MM-DD 日期，我不知道如何每天增加，知道每个月有多少天。

有人有想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:09:01.260

仅使用 javascript Date 对象，您可以像这样递增：

```
var dayIncrement = 24 * 60 * 60 * 1000; // one day in milliseconds
var startDate = new Date('2013-03-01 00:00:00');
var startDateMillis = startDate.getTime();
var startDatePlusOne = new Date(startDateMillis + dayIncrement);

var weekIncrement = dayIncrement * 7;
var startDatePlusWeek = new Date(startDateMilis + weekIncrement); 
```

还有许多其他库，例如[DateJS](http://www.datejs.com/)，它们提供了更强大的功能。

# java - 无法解析异常类：ZXing

> ID：15035235
> 
> 赞同：0
> 
> 时间：2013-02-22T23:54:38.200
> 
> 标签：java, android, zxing

我有一个项目在较新的设备和 API 级别上运行得非常好，但是，我在模拟器上遇到了一些问题。当我在模拟器上加载应用程序时，我遇到了这个问题：

```
02-22 18:36:11.584: W/dalvikvm(652): VFY: unable to resolve exception class 872 (Lcom/google/zxing/WriterException;)
02-22 18:36:11.584: W/dalvikvm(652): VFY: unable to find exception handler at addr 0x7da
02-22 18:36:11.584: W/dalvikvm(652): VFY:  rejected Lcom/example/myapp/Card;.getFrontView (Landroid/content/Context;)Landroid/widget/LinearLayout;
02-22 18:36:11.584: W/dalvikvm(652): VFY:  rejecting opcode 0x0d at 0x07da
02-22 18:36:11.584: W/dalvikvm(652): VFY:  rejected Lcom/example/myapp/Card;.getFrontView (Landroid/content/Context;)Landroid/widget/LinearLayout;
02-22 18:36:11.584: W/dalvikvm(652): Verifier rejected class Lcom/example/myapp/Card; 
```

然后这导致了一个明显`java.lang.VerifyError`的`Card`类。

问题出在`WriterException`课程上，但课程只是：

```
/*
 * Copyright 2008 ZXing authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.zxing;

/**
 * A base class which covers the range of exceptions which may occur when encoding a barcode using
 * the Writer framework.
 *
 * @author dswitkin@google.com (Daniel Switkin)
 */
public final class WriterException extends Exception {

  public WriterException() {
  }

  public WriterException(String message) {
    super(message);
  }

  public WriterException(Throwable cause) {
    super(cause);
  }

} 
```

也许我错过了为什么这会导致旧 API 级别出现问题，但这就是我在这里问这个的原因！我很欣赏 SO 的集体和大众知识。

编辑：

我尝试通过在更深层次的类中处理抛出的 WriterException 来删除它。这阻止了我上面列出的那个问题（仍然不确定为什么）。然而，新的问题出现了！

我认为这可能与我的图书馆没有被正确阅读有关。我有一个用户库，`core.jar`里面有 ZXing。.jar 列出了每个类并将其全部打开，但我得到：

```
02-22 18:56:49.564: W/dalvikvm(688): VFY: unable to find class referenced in signature (Lcom/google/zxing/BarcodeFormat;)
02-22 18:56:49.604: E/dalvikvm(688): Could not find class 'com.google.zxing.EncodeHintType', referenced from method Barcode.BarcodeGenerator.encodeAsBitmap
02-22 18:56:49.604: W/dalvikvm(688): VFY: unable to resolve const-class 869 (Lcom/google/zxing/EncodeHintType;) in LBarcode/BarcodeGenerator;
02-22 18:56:49.604: D/dalvikvm(688): VFY: replacing opcode 0x1c at 0x0011
02-22 18:56:49.604: E/dalvikvm(688): Could not find class 'com.google.zxing.MultiFormatWriter', referenced from method Barcode.BarcodeGenerator.encodeAsBitmap
02-22 18:56:49.604: W/dalvikvm(688): VFY: unable to resolve new-instance 870 (Lcom/google/zxing/MultiFormatWriter;) in LBarcode/BarcodeGenerator; 
```

现在在我的警告中。我真的被这一切难住了。。

[这是一个名为 ZXing 的用户库的屏幕截图，我已将其添加到项目的 Java 构建路径 > 库中。](http://i.imgur.com/GsavLOZ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:17:59.500

这无关紧要，`WriterException`您不必修改代码。图书馆本身很好。您可以看到实际上缺少许多类，可能是所有类。您实际上并未包含该库。既然你说你重新包装了它，问题就在那里。这些类不`.jar`正确，或者您可能将其作为 a 包含`.jar`在 a 中`.jar`。

# ios - 究竟什么代码必须放在 iOS 的主线程上？

> ID：15035243
> 
> 赞同：1
> 
> 时间：2013-02-22T23:55:14.690
> 
> 标签：ios, multithreading, performance, user-interface, grand-central-dispatch

有人可以向我解释一下哪些代码行应该放在 iOS 的主线程上吗？

我有以下内容：

```
- (void)asyncWorkOnLayingOutSKUs:(UILongPressGestureRecognizer *)gesture andBlock:(void (^)(BOOL))completion {
__block NSTimeInterval totalTi = -[NSDate timeIntervalSinceReferenceDate];
//
dispatch_queue_t callerQ = dispatch_get_current_queue();
dispatch_queue_t loadingQ = dispatch_queue_create("ff.aq", NULL);
dispatch_async(loadingQ, ^{

    //Code below can be placed here and then I used: dispatch_async(dispatch_get_main_queue(), ^{ //code here that must go on main thread });  in order to make it work

    BOOL trueBool = YES;
    //
    dispatch_async(callerQ, ^{
        totalTi += [NSDate timeIntervalSinceReferenceDate];
        NSLog(@"Performance: %g sec", totalTi);
        completion(trueBool);
        if(completion){

    //For now, there is no multithreading since all code is placed on main thread...

            self.timingDate = [NSDate date];

            switch (self.lastButtonPressedForDragTags) {
                case 1:{
                    self.slotOneButtonIndex = gesture.view.tag-1;
                } break;
                case 2:{
                    self.slotTwoButtonIndex = gesture.view.tag-1;
                } break;
                case 3:{
                    self.slotThreeButtonIndex = gesture.view.tag-1;
                } break;
                case 4:{
                    self.slotFourButtonIndex = gesture.view.tag-1;
                } break;
                case 5:{
                    self.slotFiveButtonIndex = gesture.view.tag-1;
                } break;
            }

            int touchedtag = gesture.view.tag;
            UIView* thisView;
            UIScrollView* thisScrollView;

            switch (gesture.view.superview.superview.tag) {
                case -1:{
                    thisView = self.dragTagsScrollViewContainer;
                    thisScrollView = self.dragTagsScrollView;
                } break;
                case -2:{
                    thisView = self.SKUTagsScrollViewContainer;
                    thisScrollView = self.SKUTagsScrollView;
                } break;
                case -3:{
                    thisView = self.otherTagsScrollViewContainer;
                    thisScrollView = self.otherTagsScrollView;
                } break;
                case -4:{
                    thisView = self.leftDraggedTagsScrollViewContainer;
                    thisScrollView = self.leftDraggedTagsScrollView;
                } break;
            }

            UIButton *button = (UIButton*)[thisView viewWithTag:touchedtag];

            if(![button isSelected]){
                [self setButtonSelected:button];
            }
            else{
                [self setButtonDeselected:button];
            }

            //Get the position of the button RELATIVE to the superview by subtracting the content offset for x direction:
            CGRect buttonPosition = CGRectMake(button.frame.origin.x - thisScrollView.contentOffset.x, button.frame.origin.y, button.frame.size.width, button.frame.size.height);

            CGRect sizeOfScrollView = CGRectMake(0, 0, thisScrollView.frame.size.width, thisScrollView.frame.size.height);

            if(CGRectContainsRect(sizeOfScrollView, buttonPosition)){}
            else{
                //extend scrollview to L or R
                CGPoint rightBottomEdgeOfButton = CGPointMake(buttonPosition.origin.x + buttonPosition.size.width, buttonPosition.origin.y + buttonPosition.size.height);
                CGRect intersection = CGRectIntersection(sizeOfScrollView, buttonPosition);
                float amountToMove;
                float currentXDirectionOffset = thisScrollView.contentOffset.x;
                CGPoint newOffset;

                if (CGRectContainsPoint(sizeOfScrollView, rightBottomEdgeOfButton)){
                    //Need to move Left
                    amountToMove = button.frame.size.width - intersection.size.width + 5;
                }
                else{
                    //Need to move Right
                    amountToMove = -(button.frame.size.width - intersection.size.width + 5);
                }
                newOffset = CGPointMake(currentXDirectionOffset-amountToMove, thisScrollView.contentOffset.y);

                [thisScrollView setContentOffset:newOffset];
            }

            [self.SKUTagsScrollViewContainer removeFromSuperview];

            NSMutableArray* arrayToUse = [[NSMutableArray alloc]initWithArray:[self getIntersectionArray]];

            [self populateScrollViewWithArray:arrayToUse andScrollView:self.SKUTagsScrollView withContainer:self.SKUTagsScrollViewContainer andmaxNumberOfRowsForScrollView:6];

#ifdef DEBUG
            NSLog(@"Time taken to AFTER populateScrollViewWithArray: %g and for %d controls", [[NSDate date] timeIntervalSinceDate:self.timingDate], [arrayToUse count]);
#endif
        }
    });
});
dispatch_release(loadingQ);
} 
```

现在显然加载 q 上没有任何内容，并且该方法`populateScrollViewWithArray`基本上在 UIScrollView 上安排了一些按钮。我发现我能够“包装”任何我认为对其中的 ui 渲染至关重要`dispatch_async(dispatch_get_main_queue(), ^{});`的代码，然后我可以将此处显示的所有代码`if(completion){}`放在加载 q 中。

这两个选项都有效，我测量了性能，发现我得到了相似的结果。

我的问题是我是 iOS 新手，我想知道：

如何使用线程最大化性能？

究竟应该在主线程上做什么？在该方法`populateScrollViewWithArray`中，我执行了以下操作：

```
 dispatch_async(dispatch_get_main_queue(), ^{

            [scrollview addSubview:scrollViewContainer];
            [self.view addSubview:scrollview];
        }); 
```

但我做了一些事情，比如创建标签、创建按钮和在加载 q 上添加手势（没有明确地将它们包围在`dispatch_async(dispatch_get_main_queue(), ^{});`

谁能指出我除了“阅读文档”之外的简明解释，因为我通常发现 Apple 文档很冗长。有点像这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:15:11.850

一般规则是大多数 UIKit 类在后台线程中使用是不安全的，除非文档另有明确说明（有时文档不一致，有时它会中断，例如 UIKit 绘图从 4.0 开始应该是线程安全的，但被破坏了在 iOS 5.x 中）。

IIRC 文档还建议在后台线程上*创建*视图（例如通过加载 nib）是安全的，前提是它们没有被添加到窗口中。不过，我还没有对此进行浸泡测试，因此可能存在一些不安全的边缘情况（UIWebView 可能就是其中之一）。

它也比这*稍微*复杂一些，因为根据[GKTapper 示例代码，一些 UIKit 类从后台线程](http://developer.apple.com/library/ios/#samplecode/GKTapper/Listings/Classes_GameCenterManager_m.html)*释放*是不安全的：

> 如果在辅助队列上执行的块中**引用**了视图控制器，则该视图控制器可能会在主队列之外释放（并解除分配）。 **即使实际块被安排在主线程上也是如此。** ... UIKit 视图控制器只能在主线程上访问，因此上面的代码段可能会导致**微妙且难以追踪的错误**。

您的代码捕获`self`并`gesture`在后台线程上运行的（由 a 引用的块）块中，这意味着它们可能会在后台线程上释放，这可能偶尔会崩溃。

其他挑剔：

*   `totalTi`不需要是`__block`变量。
*   `loadingQ`应替换为全局队列。
*   `if(completion)`始终为真（在上面的行中，如果为 NULL `completion(trueBool)`，则崩溃）。`completion`
*   您可以将大部分代码移动到 VC 中的完成方法，而不是使用 6 级缩进。

# javascript - 使用列名获取存储值 - EXTJS 4

> ID：15035246
> 
> 赞同：4
> 
> 时间：2013-02-22T23:56:32.423
> 
> 标签：javascript, json, extjs, extjs4, store

```
Ext.define('GoogleMarkerModel', {
        extend: 'Ext.data.Model',
        fields: ['Locating','MainPower','Acc','PowerOff','Alarm','Speed','Direction','Latitude','Longitude','DateTime','MainID', 'DeviceID','IOState','OilState']
    });

    var MarkerStore = Ext.create('Ext.data.JsonStore', {
        model: 'GoogleMarkerModel',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'get-googlemarker.php',
            baseParams: {  //here you can define params you want to be sent on each request from this store
                        mainid: 'value1'
                        },
            reader: {
                type: 'json',
                root: 'images'
            }
        }
    });

tree.on('checkchange', function(node){
        var data = node.data;
        Ext.MessageBox.show({
        title: 'Changed checkbox status',
        msg: 'MainID: ' + data.MainID + ' <br /> Checkbox status: ' + data.checked,
        icon: Ext.MessageBox.INFO
        });

        if (data.checked == true){
        MarkerStore.load({
                        params: {  //here you can define params on 'per request' basis
                                mainid: data.MainID,
                                }
                        })

        var options = {
        lat:MarkerStore[0].Latitude,
        lng:MarkerStore[0].Longitude,
        marker: {title:"Hello World!"},
        listeners: {
                     click: function(e){

                                         }
                    }     
        }     
        addDoctorLocation(options);           
        }       
    }) 
```

这是一个获取返回值的例子

```
http://localhost/GPS/examples/tabs/get-googlemarker.php?mainid=1 
```

返回

```
[{"ID":"1808","Locating":"1","MainPower":"0","Acc":"1","PowerOff":"1","Alarm":"128","Speed":"0","Direction":"293","Latitude":"5.391788482666016","Longitude":"100.29693603515625","DateTime":"2013-02-19 15:44:36","MainID":"1","IOState":"0","OilState":"0"}] 
```

这是get-googlemarker.php的返回值，我想把纬度值保存在lat变量中，将经度值保存在longt变量中。像这样的东西：

找到 MainID 为 1 的行，获取列名 Latitude 值。

## 更新 2

```
var lati,longi;
        var record = MarkerStore.findRecord('MainID',data.MainID);
        if(record) {
            lati = record.get('Latitude'); 
        longi = record.get('Longitude'); 
        } 
```

记录返回为空，找不到MainID = 1？为什么？data.MainID 值为 1。

## 更新 3

```
Ext.define('GoogleMarkerModel', {
    extend: 'Ext.data.Model',
    idProperty:'MainID',
    fields: ['ID','Locating','MainPower','Acc','PowerOff','Alarm','Speed','Direction','Latitude','Longitude','DateTime','MainID','IOState','OilState']
});

var MarkerStore = Ext.create('Ext.data.JsonStore', {
    model: 'GoogleMarkerModel',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: 'get-googlemarker.php',
        baseParams: {  //here you can define params you want to be sent on each request from this store
                    mainid: 'value1'
                    },
        reader: {
            type: 'json',
            idProperty : 'MainID',
        }

    }
}); 
```

我添加了 idProperty，但仍然无法工作。

错误
![在此处输入图像描述](../Images/4824dbc3904819bcd121e12a92850b7e.png)

## 最新代码

```
tree.on('checkchange', function(node){
        var data = node.data;

        if (data.checked == true){
        MarkerStore.load({
                        params: {  //here you can define params on 'per request' basis
                                mainid: data.MainID,
                                }
                        })

        var lati,longi;
        var recordPos = MarkerStore.findBy(function(rec,id){
             return rec.data.MainID == data.MainID;
        }, this);
        if(recordPos > -1) {
           var record = MarkerStore.getAt(recordPos);
           lati = record.get('Latitude'); 
           longi = record.get('Longitude'); 
        }

        Ext.MessageBox.show({
        title: 'Changed checkbox status',
        msg: 'MainID: ' + data.MainID + ' <br /> Checkbox status: ' + data.checked + ' <br /> lati: ' + lati + ' <br />',
        icon: Ext.MessageBox.INFO
        });

        var options = {
        lat:lati,
        lng:longi,
        marker: {title:"Hello World!"},
        listeners: {
                     click: function(e){

                                         }
                    }     
        }     
        addDoctorLocation(options);           
        }       
    }) 
```

仍然无法获得纬度值。任何的想法？
如何确定 MarkerStore 里面有数据？我认为 MarkerStore 是空的。如何检查这个？

## 更新 4

```
var lati,longi;
        var recordPos = MarkerStore.findRecord('MainID', '1');
           lati = recordPos.get('Latitude'); 
           longi = recordPos.get('Longitude'); 
```

仍然无法工作，recordPos 为空。在 Firebug 上发现错误

```
TypeError: recordPos is null
[Break On This Error]   
lati = recordPos.get('Latitude'); 
```

我认为问题在于 JSON 存储从 PHP 中保存数据

## 更新 5

我可以确定 JSON 存储有数据，因为我尝试使用此代码打印所有 JSON 存储数据

```
MarkerStore.on('load', function(store, records) {
    for (var i = 0; i < records.length; i++) {
    console.log(records[i].get('Latitude'));
    };
}); 
```

它正在控制台上打印数据

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T06:17:22.750

一些提示：JSON 支持对象、数组、字符串、布尔值、浮点数，但您只使用字符串？此外还有一个自动字段配置，因此所有内容都将保留字符串。接下来是`idProperty`您的模型和读者都没有定义。根据您的 JSON 字符串，我猜这是 ID。您应该添加该行

```
idProperty:'ID' 
```

到模型和阅读器，并将该字段添加`ID`到您的模型中。如果您不想使用`ID`我想它会`MainID`这样插入。现在，如果你有一个 idProperty，你可以通过调用它的 id 来获取记录`store.getById(1234)`。

您也可以像这样进行自定义搜索

```
var lati,longi;
var recordPos = MarkerStore.findBy(function(rec,id){
     return rec.data.MainID == data.MainID;
}, this);
if(recordPos > -1) {
   var record = MarkerStore.getAt(recordPos);
   lati = record.get('Latitude'); 
   longi = record.get('Longitude'); 
} 
```

如果这不返回任何内容，请检查您的商店中是否有数据，如果有，请提供更多信息，以便商店如何设置该记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:51:04.747

如前所述，`sra`您可以设置`idProperty`

```
var MarkerStore = Ext.create('Ext.data.JsonStore', {
    model: 'GoogleMarkerModel',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: 'get-googlemarker.php',
        baseParams: {
            mainid: 'value1'
        },
        reader: {
            type: 'json',
            root: 'images',
            idProperty: 'MainId'
        }
    }
}); 
```

然后通过`MarkerStore.getById(123)`'MarkerStore.findRecord('MainId', 123)'查找记录

**重要提示：**似乎 extjs 使用 === 运算符而不是 == 来比较两个变量。那么如果一个变量具有 int 类型而另一个具有 string 类型，则比较可能是错误的（例如对于“1”=== 1）。那么你应该使用 'MarkerStore.findRecord('MainId', '123')' 代替。

# c++ - C++ 中的 Linux shmget() 函数

> ID：15035248
> 
> 赞同：2
> 
> 时间：2013-02-22T23:56:41.827
> 
> 标签：c++, pthreads, fork, shared-memory

我正在尝试设置共享内存的 s 段来保存字符串数组。例如这个数组

> string example[] = {"This is", "An Example", "of strings"};

然后我尝试调用 shmget 以便我可以保留适当数量的操作系统共享内存。

> shmget(IPC_PRIVATE, sizeOf(example), IPC_CREAT);//我希望这会创建共享内存段

我发现这个[网站](http://www.cs.cf.ac.uk/Dave/C/node27.html)说“关键参数是与信号量 ID 关联的访问值”什么信号量 ID 以及如何创建一个。

这使用 g++ -Wall 编译，但我不知道如何检查它是否有。根据 IPC_PRIVATE 所在的 linux 中的 shm 手册，我应该指定“key_t”类型的内容。我的想法是我如何识别共享内存的关键，即指定一个字符串作为共享内存名称或指定一个 ID 号。

阅读手册指出 shmget() 返回一个“shmid”。同样，虽然什么是 shmid，它是 int、string、pointer 还是某种特殊类型，这就是我识别共享内存段的方式吗？另外，如果 shmget() 正在返回某些东西，我不需要将其分配给某些东西吗？

如果您能推荐一个教程或概述，我将不胜感激。除了上面的具体问题，我想要一个从将由 fork() 命令创建的线程访问共享内存的示例。

我的最终目标是为数组中的每个字符串生成一个线程，该线程将执行某种反转。这只是开始使用共享内存和 pthreads 的一个小任务，因为我还没有找到一个教程来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:53:29.657

好的，在我解释所有次要细节之前，通过共享内存共享数据时非常重要的一件事是您了解您实际放入共享内存的内容。

在您的示例中，您有：

```
string example[] = {"This is", "An Example ", "of strings"}; 
```

您可能没有认真考虑过这一点，但是您认为实际字符串如何存储在“std::string”中？我不知道这种特殊情况下的确切细节，但一个相当典型的实现是这样的[这是简化的，真正的“类字符串”是使用`basic_string`类作为基础的模板类声明]。

```
class string
{
    char *str;
    int len;
} 
```

因此，如果您复制`example`到共享内存中，那么您将在共享内存中拥有三个指针和三个整数。这些指针指向一些几乎可以肯定不在共享内存中的内存......显然，“其他进程”中的内存地址不会是你所期望的[好吧，至少如果字符串不是常量并且你的进程在创建字符串之前被分叉 - 但如果字符串是恒定的和/或在分叉发生时已经存在，那么您真的不需要共享内存，对吗？]

对此的典型解决方案是仅将数据存储在“普通旧数据”的共享内存中（因此没有包含成员函数或指针的对象）。实现此目的的一种方法是“序列化”数据 - 如果您想将数据存储在文件中，您会做同样的事情。

> 这使用 g++ -Wall 编译，但我不知道如何检查它是否有。根据 IPC_PRIVATE 所在的 linux 中的 shm 手册，我应该指定“key_t”类型的内容。我的想法是我如何识别共享内存的关键，即指定一个字符串作为共享内存名称或指定一个 ID 号。

您可以指定一个密钥或使用 IPC_PRIVATE（在手册页中被解释为“不幸的名称”，而“IPC_NEW”将是一个更好的选择）

> 阅读手册指出 shmget() 返回一个“shmid”。同样，虽然什么是 shmid，它是 int、string、pointer 还是某种特殊类型，这就是我识别共享内存段的方式吗？另外，如果 shmget() 正在返回某些东西，我不需要将其分配给某些东西吗？

您链接到的站点实际上解释了如何存储`shmid`：

```
int shmid;

... Several lines of code... 

if ((shmid = shmget(key, SHMSZ, IPC_CREAT | 0666)) < 0) { 
```

我认为这应该足以让你开始。

# c# - Asp.net web api 发布动作参数

> ID：15035251
> 
> 赞同：0
> 
> 时间：2013-02-22T23:57:07.533
> 
> 标签：c#, c#-4.0, asp.net-mvc-4, asp.net-web-api, action-filter

我目前正在编写一个由 mvc web api 服务器和 mvc 4 客户端组成的小应用程序，我遇到了一个问题，这已经困扰了我好几天了。

我有一个 ContactsController，其中包含：

```
[HttpPost]
    public ActionResult AddContact(ContactModel model, HttpPostedFileBase image)
    {
        return ActionWrapper(() =>
        {
            if (model.InitializeFromCookie())
            {
                if (image != null)
                {
                    model.ImageMimeType = image.ContentType;
                    model.Picture = new byte[image.ContentLength];
                    image.InputStream.Read(model.Picture, 0, image.ContentLength);
                }

                PostObject("api/contacts/postcontact", model);
                RefreshCookie();
                return RedirectToAction("Contacts", "Contacts");
            }

            else
            {
                return JsonRedirectResult(Url.Action("Login", "Users"));
            }
        });
    } 
```

模型派生自 AuthorizationContent。post对象方法：

```
[NonAction]
        protected object PostObject(string apiUrl, object obj, object additionalData = null)
        {
            var query = additionalData != null ? additionalData.GetQueryString() : string.Empty;
            apiUrl += query;
            var action = _client.PostAsJsonAsync(apiUrl, obj);
            action.Wait();

            if (!action.Result.IsSuccessStatusCode)
            {
                var code = action.Result.StatusCode;
                var error = action.Result.ReasonPhrase;
                throw new ServerSideException(code, error);
            }

            else
            {
                return action.Result.Content.ReadAsAsync<object>().Result;
            }
        } 
```

该方法即将调用webapi控制器的方法：

```
[AuthorizedOnly, HttpPost]
    public void PostContact([FromBody]AuthorizationContent item, User authorizedUser)
    {
        var realItem = Mapper.Map<ContactModel, Contact>((ContactModel) item);
        _contactService.AddContact(authorizedUser, realItem);
    } 
```

过滤器：

```
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class)]
class AuthorizedOnly : ActionFilterAttribute
{
    private ISessionService _sessionService;
    private Session _userSession;

    public ISessionService SessionService
    {
        get { return _sessionService ?? (_sessionService = NinjectWebCommon.Kernel.Get<ISessionService>()); }
    }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var auth = actionContext.ActionArguments.Values.FirstOrDefault() as AuthorizationContent;

        if (auth == null)
        {
            throw new UnauthorizedException();
        }

        else
        {
            var user = SessionService.GetMemberBySessionCredentials(auth.Token, auth.UserName);
            _userSession = user.Session;

            if (SessionService.IsSessionValid(_userSession))
            {
                actionContext.ActionArguments["authorizedUser"] = user;
                base.OnActionExecuting(actionContext);
            }

            else
            {
                throw new UnauthorizedException();
            }
        }
    } 
```

该代码适用于获取操作，但是当我尝试执行如上所示的帖子时，我总是收到服务器端异常说明

> {状态代码：400，原因短语：
> 
> '无法将多个参数（'item' 和 'authorizedUser'）绑定到请求的内容。'，版本：1.1，内容：System.Net.Http.StringContent，标头：{ Content-Type: text/plain; 字符集=utf-8 } }

问题 - 我如何声明authorizedUser 将来自过滤器和模型绑定器不应该在请求内容中查找它？对不起我的英语不好，提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:08:31.363

你可以有一个空的参数绑定，除了说它不会从正文中读取之外什么都不做。请参阅这篇博文[，](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)了解为什么只有一个参数可以读取 Web API 中的正文。您可以在全局配置上注册参数绑定，也可以为其定义属性。下面是参数绑定的示例代码，

```
public class EmptyParameterBinding : HttpParameterBinding
{
    public EmptyParameterBinding(HttpParameterDescriptor descriptor)
        : base(descriptor)
    {
    }

    public override bool WillReadBody
    {
        get
        {
            return false;
        }
    }

    public override Task ExecuteBindingAsync(ModelMetadataProvider metadataProvider, HttpActionContext actionContext, CancellationToken cancellationToken)
    {
        return Task.FromResult(0);
    }
} 
```

# python - Python 等价于 find -exec

> ID：15035253
> 
> 赞同：3
> 
> 时间：2013-02-22T23:57:22.460
> 
> 标签：python, popen3

我正在尝试在 Popen 中运行此 BASH 命令：

```
find /tmp/mount -type f -name "*.rpmsave" -exec rm -f {} \; 
```

但是每次我在标准错误中得到：“find: missing argument to `-exec'\n”。

与此等效的 python 是什么？

我天真的方法是：

```
for (root,files,subdirs) in os.walk('/tmp/mount'):
    for file in files:
        if '.rpmsave' in file:
            os.remove(file) 
```

肯定有更好，更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:07:12.627

你实际上有两个问题——第一，为什么你的`Popen`构造不起作用，第二，如何`os.walk`正确使用。Ned 回答了第二个问题，所以我将解决第一个问题：您需要注意 shell 转义。`\;`是转义的，`;`因为通常`;`Bash 会将其解释为分隔两个 shell 命令，并且不会传递给`find`. （在其他一些 shell 中，`{}`也必须进行转义。）

但是，`Popen`如果可以避免的话，您通常不想使用外壳。所以，这应该工作：

```
import subprocess

subprocess.Popen(('find', '/tmp/mount', '-type', 'f',
                  '-name', '*.rpmsave', '-exec', 'rm', '-f', '{}', ';')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:59:44.687

你所拥有的基本上就是这样做的方法。您正在协调三件不同的事情：1) 遍历树，2) 仅对 .rpmsave 文件进行操作，以及 3) 删除这些文件。您会在哪里找到可以在本地完成所有这些操作而无需拼写出来的东西？Bash 命令和 Python 代码都具有大致相同的复杂性，这并不奇怪。

但是您必须修复代码，如下所示：

```
for root,files,subdirs in os.walk('/tmp/mount'):
    for file in files:
        if file.endswith('.rpmsave'):
            os.remove(os.path.join(root, file)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T00:13:54.803

如果你发现自己经常做这些事情。这可能是 os.walk 的有用包装器：

```
def files(dir):
   # note you have subdirs and files flipped in your code
   for root,subdirs,files in os.walk(dir):
      for file in files:
         yield os.path.join(root,file) 
```

要删除目录中具有特定扩展名的一堆文件：

```
[os.remove(file) for file in files(directory) if file.endswith('.extension')] 
```

# java - Android 在运行的 asynctasks 之间交换数据

> ID：15035255
> 
> 赞同：0
> 
> 时间：2013-02-22T23:57:28.650
> 
> 标签：java, android, asynctaskloader

我想要实现的是在运行异步任务（doInBackground）之间共享数据。所以发生的事情是我有一个单独的类（扩展 Asynctask），它用它自己的 Async 类加载数据和活动，我用它来更新活动中的信息。基本上我想要实现的是活动中的线程（监控线程）与加载器一起工作并从加载器类提供一些数据，当加载器准备好时，“监控”和“加载器”都应该死。

我尝试使用接口设置一个 volatile 变量，但没有成功，我似乎无法在线程（异步任务）之间共享信息。有什么建议吗？也许需要一个 Exchanger 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:08:07.027

有什么理由不能使用[onProgressUpdate](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)功能？我可能对你的用例感到困惑......但一个例子可能如下：

```
class MyActivity extends Activity {

  private AsyncTask<Uri,MyDataObject, MyResult> = new AsyncTask<Uri,MyDataObject, MyResult>() {
    private MyResult mResult;

    protected MyResult doInBackground(Uri... uris) {           
      int count = urls.length;
      mResult = new MyResult()

      for (int i = 0; i < count; i++) {
        MyDataObject anObject = mDataLoader.getObject(uris[i]);
        publishProgress(anObject);

        mResult.add(anObject);
        // Escape early if cancel() is called
        if (isCancelled()) break;
      }
      return totalSize;
    }

    protected void onProgressUpdate(MyDataObject... data) {
      addDataToUI(data[0]);
    }

    protected void onPostExecute(MyResult result) {
      Toast.makeText("All Done!", Toast.LENGTH_LONG).show();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:12:03.207

听起来您想让 Activity 在加载器线程加载数据时显示一些信息？所以你需要将一些信息从 loader 传递到 Activity 中，更新 UI。在这种情况下，我不确定您是否需要 Activity 中的第二个 AsyncTask（和关联的线程），因为您仍然需要将数据获取到主线程，然后才能更新 UI。相反，您应该按照[JRaymond 的建议进行操作，只需使用](https://stackoverflow.com/a/15035353/2098224)[publishProgress](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)将更改推送到主线程并在[onProgressUpdate的主线程上处理它们](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)

如果你需要更通用的东西，你也可以考虑使用 java.util.concurrent。例如，可以使用 BlockingQueue 来实现消费者/生产者模式。[有关代码片段，](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)请参阅Javadoc 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T22:42:55.587

所有异步任务（除非使用提供的执行器执行）都在同一个后台线程上运行，因此不可能同时执行它们。

从文档：

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。

# c++ - C++ 和 Spotify API 入门

> ID：15035256
> 
> 赞同：0
> 
> 时间：2013-02-22T23:57:31.567
> 
> 标签：c++, compiler-construction, sublimetext2, spotify

我决定通过实际使用 Spotifi 的 API 来开始学习 C++。

所以我下载了适合windows环境的文件，并设置MinGW使用它来编译。

现在，一切就绪，我在 Sublime2 项目中加载 Spotify-examples 文件夹并运行构建，但问题是我似乎无法传递以下错误：

```
c:/mingw/bin/../lib/gcc/mingw32/4.7.2/../../../../mingw32/bin/ld.exe:D:\W0RK\Software\spotify-examples\Makefile: file format not recognized; treating as linker script
c:/mingw/bin/../lib/gcc/mingw32/4.7.2/../../../../mingw32/bin/ld.exe:D:\W0RK\Software\spotify-examples\Makefile:1: syntax error
collect2.exe: error: ld returned 1 exit status
[Finished in 0.4s with exit code 1] 
```

这是我自定义的 sublime 构建配置：

```
{
    "cmd": ["C:\\MinGW\\bin\\mingw32-g++.exe", "-Wall", "-time", "--verbose", "$file", "-o", "$file_base_name"]
} 
```

我错过了构建过程中的任何步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:01:52.720

您正在尝试链接 Makefile，由于它不是目标文件，因此将失败。您需要将其从构建过程中排除。

# c# - 创建了多少个字符串对象？

> ID：15035257
> 
> 赞同：5
> 
> 时间：2013-02-22T23:57:42.050
> 
> 标签：c#, string, object

我有以下 C# 代码：

```
string stg1 = "String 1";
string stg2 = "String 2";
string stg3 = "String 3";
string stg4;
stg4 = stg1 + stg3;
stg4 = stg4 + stg2 + stg3;
stg4 = "";
stg3 = ""; 
```

创建了多少个字符串对象？
我认为创建了 7 个字符串对象：`"String 1"`, `"String 2"`, `"String 3"`, `stg1 + stg3`, `stg4 + stg2 + stg3`, `""`, 和`""`. 我不确定第 4 条语句 ( `string stg4;`) 是否创建了一个字符串对象，并且我在某处读到将空字符串分配给一个字符串`""`并不会创建一个对象，但我认为这不是真的。你们有什么感想？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T00:10:11.770

> 我在某处读到，将空字符串“”分配给字符串不会创建对象，但我认为这不是真的。你们有什么感想？

这并不完全正确。肯定会为空字符串创建一个字符串实例。

话虽如此，该代码中不会有两个实例；只有一个。除非您在编译时禁用该设置，否则编译器将查找所有相同的编译时文字字符串，并仅创建一个`string`对象来表示它，并为定义该字符串的所有变量提供对该字符串的相同引用。这被称为“实习”。

请注意，默认情况下，字符串实习仅适用于*编译时*文字字符串，而不是运行时生成的字符串。如果在运行时生成两个相等的字符串，它们不一定是对同一个字符串对象的引用。

除此之外，您的分析是正确的。

同样值得注意的是，虽然您正确地说明这`stg4 + stg2 + stg3`将导致仅创建一个字符串，但您并没有真正解释原因，而且为什么会这样也不清楚。

最初的猜测可能是这里将执行两个操作，首先`stg4 + stg2`是 ，这将产生一个字符串，然后将该结果连接起来`stg3`以创建最终结果。但事实并非如此。编译器*实际上*会生成一个对 的*调用*，`string.Concat`将所有三个字符串作为参数传递（`Concat`定义为`Concat(params string[] args)`它可以接受任意数量的字符串），并且`Concat`足够聪明，可以只创建一个字符串，而不是为 n-1 中间体创建字符串价值观。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-23T00:47:59.370

Servy 的回答非常准确。我特别喜欢对串联的正确分析。

我只想在这个出色的答案中添加一点额外的点，那就是它是实现定义的，非文字`String.Empty`是否与文字一起实习`""`。.NET 的某些版本会自动执行，而某些版本不会自动执行。

看

[http://ericlippert.com/2009/09/28/string-interning-and-string-empty/](http://ericlippert.com/2009/09/28/string-interning-and-string-empty/)

更多细节。

# ios - 如何在 UIView 上制作斜角？

> ID：15035258
> 
> 赞同：7
> 
> 时间：2013-02-22T23:57:45.250
> 
> 标签：ios, uiview, core-graphics

这里有很多关于使 a`UIView`的角变圆的问题。不幸的是，我找不到任何关于如何制作*斜角*的东西。我怎样才能制作一个`UIView`以 45 度角切割的角？

*如果您可以向我展示如何以一定角度切割任何单个*角落，您甚至可以获得额外的（象征性的）金星。

编辑：作为参考，[这里有](https://stackoverflow.com/questions/9034328/how-do-i-round-only-the-top-two-corners-of-a-uilabel/)一个我怀疑与这个解决方案有类似实现的问题的链接。我只是不知道我必须改变什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T01:54:54.407

首先，您需要一条带有角的路径：

```
- (CGPathRef) makeAnglePathWithRect: (CGRect)rect withSize:(float) s {

    CGPoint one = CGPointMake( rect.origin.x +s, rect.origin.y);
    CGPoint two = CGPointMake( rect.origin.x + rect.size.width - s, rect.origin.y);

    CGPoint three = CGPointMake( rect.origin.x + rect.size.width, rect.origin.y +s);
    CGPoint four = CGPointMake( rect.origin.x + rect.size.width, rect.origin.y + rect.size.height -s);

    CGPoint five = CGPointMake( rect.origin.x + rect.size.width-s, rect.origin.y + rect.size.height);
    CGPoint six = CGPointMake(rect.origin.x+s, rect.origin.y + rect.size.height);

    CGPoint seven = CGPointMake(rect.origin.x, rect.origin.y + rect.size.height-s);
    CGPoint eight = CGPointMake(rect.origin.x, rect.origin.y + s);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path,NULL,one.x, one.y);
    CGPathAddLineToPoint(path,NULL,two.x, two.y);
    CGPathAddLineToPoint(path,NULL,three.x, three.y);
    CGPathAddLineToPoint(path,NULL,four.x, four.y);
    CGPathAddLineToPoint(path,NULL,five.x, five.y);
    CGPathAddLineToPoint(path,NULL,six.x, six.y);
    CGPathAddLineToPoint(path,NULL,seven.x, seven.y);
    CGPathAddLineToPoint(path,NULL,eight.x, eight.y);
    CGPathAddLineToPoint(path,NULL,one.x, one.y);

    return path;
} 
```

然后你需要使用路径来指定掩码：

```
CAShapeLayer *maskLayer = [CAShapeLayer layer];
CGRect bounds = CGRectMake(0.0f, 0.0f, 100, 100); //figure out your bounds

[maskLayer setFrame:bounds];
CGPathRef p = [self makeAnglePathWithRect:bounds withSize:20.0];
maskLayer.path = p;
_myview.layer.mask = maskLayer; 
```

如果您想从任何角落删除角度，请拨弄点八，删除“s”值。您可以使用 size 参数更改从角上切出的三角形的大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-19T15:31:39.817

从@nont 获得灵感并使用扩展，我编写了以下代码段：

```
extension UIView {

    public enum Corner: Int {
        case TopRight
        case TopLeft
        case BottomRight
        case BottomLeft
        case All
    }

    public func blendCorner(corner corner: Corner, length: CGFloat = 20.0) {
        let maskLayer = CAShapeLayer()
        var path: CGPathRef?
        switch corner {
        case .All:
            path = self.makeAnglePathWithRect(self.bounds, topLeftSize: length, topRightSize: length, bottomLeftSize: length, bottomRightSize: length)
        case .TopRight:
            path = self.makeAnglePathWithRect(self.bounds, topLeftSize: 0.0, topRightSize: length, bottomLeftSize: 0.0, bottomRightSize: 0.0)
        case .TopLeft:
            path = self.makeAnglePathWithRect(self.bounds, topLeftSize: length, topRightSize: 0.0, bottomLeftSize: 0.0, bottomRightSize: 0.0)
        case .BottomRight:
            path = self.makeAnglePathWithRect(self.bounds, topLeftSize: 0.0, topRightSize: 0.0, bottomLeftSize: 0.0, bottomRightSize: length)
        case .BottomLeft:
            path = self.makeAnglePathWithRect(self.bounds, topLeftSize: 0.0, topRightSize: 0.0, bottomLeftSize: length, bottomRightSize: 0.0)
        }
        maskLayer.path = path
        self.layer.mask = maskLayer
    }

    private func makeAnglePathWithRect(rect: CGRect, topLeftSize tl: CGFloat, topRightSize tr: CGFloat, bottomLeftSize bl: CGFloat, bottomRightSize br: CGFloat) -> CGPathRef {
        var points = [CGPoint]()

        points.append(CGPointMake(rect.origin.x + tl, rect.origin.y))
        points.append(CGPointMake(rect.origin.x + rect.size.width - tr, rect.origin.y))
        points.append(CGPointMake(rect.origin.x + rect.size.width, rect.origin.y + tr))
        points.append(CGPointMake(rect.origin.x + rect.size.width, rect.origin.y + rect.size.height - br))
        points.append(CGPointMake(rect.origin.x + rect.size.width - br, rect.origin.y + rect.size.height))
        points.append(CGPointMake(rect.origin.x + bl, rect.origin.y + rect.size.height))
        points.append(CGPointMake(rect.origin.x, rect.origin.y + rect.size.height - bl))
        points.append(CGPointMake(rect.origin.x, rect.origin.y + tl))

        let path = CGPathCreateMutable()
        CGPathMoveToPoint(path, nil, points.first!.x, points.first!.y)
        for point in points {
            if point != points.first {
                CGPathAddLineToPoint(path, nil, point.x, point.y)
            }
        }
        CGPathAddLineToPoint(path, nil, points.first!.x, points.first!.y)
        return path
    }

} 
```

通过这种方式，您可以轻松地融合您的角落：

```
let view = UIView()
view.blendCorner(corner: .TopRight)
// or view.blendCorner(corner: .All) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T02:35:40.040

这是一种方法。鉴于：

`const CGFloat kRadius = 20.0; //'radius' of the corner clip`

并在您看来这个属性：

`@property (nonatomic,strong) CAShapeLayer *maskLayer;`

您可以设置一个带有斜角线连接的简单蒙版层（很容易为您提供所需的 45 度角）：

```
CAShapeLayer *maskLayer = [CAShapeLayer layer];

maskLayer.lineWidth = kRadius * 2.0;
maskLayer.lineJoin = kCALineJoinBevel;
maskLayer.strokeColor = [[UIColor blackColor] CGColor];

self.layer.mask = self.maskLayer = maskLayer; 
```

然后在适当的时间（比如在你的 中`-[ViewClass layoutSublayersOfLayer:]`）只需将遮罩层的路径设置为半径插入的矩形路径：

`self.maskLayer.path = CGPathCreateWithRect(CGRectInset(self.bounds,kRadius,kRadius), NULL);`

这是一种无需手动绘制路径的每一部分的方法。您实际上是在使用斜角线连接来为您完成这项工作。

# message-queue - 大规模分布式元胞自动机的本地、低容量消息传递

> ID：15035259
> 
> 赞同：1
> 
> 时间：2013-02-22T23:58:05.417
> 
> 标签：message-queue, messaging, distributed-system, cellular-automata, distributed-objects

我正在使用大规模分布式元胞自动机开发模拟。单元模拟分布在节点之间，并使用 ZooKeeper 进行协调。持久性数据存储在 Riak 中。元胞自动机本身是用 Python 编写的。

如果一个单元可以将少量（例如每秒几到几十个）消息（可能是键值对）传递给它的直接邻居（曼哈顿社区），这对我的模拟将非常方便。然而，对于数百万个单元格的模拟，天真的方法最终会产生数百万个小邮箱，每个单元格一个，并且缓慢地将消息涓涓细流到每个盒子中。这让 ZooKeeper 或 RabbitMQ 屈服了！[有人推荐我 DDS](https://stackoverflow.com/questions/12868309/what-distributed-message-queues-support-millions-of-queues)，但它似乎非常企业化，而且我找不到任何 Python 绑定。

我是分布式系统开发的新手——这实际上只是一个爱好项目，看看我能走多远。我不禁觉得我走错了路，为每个小单元的邮箱转向了一个单一的消息总线。一个细胞很容易确定它的邻居和它在世界上的位置，所以看起来消息传递应该容易受到某种分块的影响。然而，这个区域演员的设计以及它如何与单个细胞进行交流却让我无法理解。我看到单元如何通过消息总线将消息传递给块，但是块如何将消息传递回单元？

我是否正在接近这个问题的真正解决方案？分布式节点将少量消息传递给其邻居的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:04:00.343

我不确定您需要这些消息的持久性；根据您的描述，您似乎对来自不同单元格的消息没有任何排序限制。我认为您*确实*希望对从同一单元格 a 发送到同一单元格 b 的所有消息进行总排序。

ZooKeeper 被淹没了，因为它提供了所有消息的*全局总排序*。我不确定您的系统需要通过 Zookeeper 进行哪种类型的协调，但它最适合*粗粒度的*协调，而不是细粒度的协调。（在我工作的地方，我们分别称之为*角色*锁定和*资源*锁定以阐明意图。工作人员承担角色而不是锁定资源。）

所以，这里有一些关于我所掌握信息的想法。

如果消息不需要持久，最好的方法是保持与邻居的连接并将消息直接发送给他们。我假设是 2D 或 3D，所以（曼哈顿）邻居的数量很少。

其余的将假设您需要耐用性。

单个消息队列系统应该能够处理数百万条消息；但如果对它们进行一些分区，它们会获得更好的性能。

首先，尝试将所有消息发送到同一个队列。让一些工作人员（由 ZooKeeper 选择）将消息从队列中拉出并将它们发送到它们的目标单元（在确认队列之前需要单元的确认）。您还可以让一组工作人员接收来自单元的消息以放入队列中。基本上，这有助于解决队列中的争用。

```
[  Router ]--->[ Queue ]--->[  Router  ]
 ^   ^   ^                   |   |   |
 |   |   |                   V   V   V
[A] [B] [C]                 [D] [E] [F] 
```

现在您可以概括一下，并为*每个区域*设置一个队列。（当需要处理的消息较少时，队列会更好地工作。）每个区域有一个或多个路由器。

```
 ,----->[ QueueA ]<------.
        |                       |   (Note which arrows are bi-directional)
        V                       |
[ RouterA ]--->[ QueueB ]<--->[ RouterB ]
 ^   ^   ^                     ^   ^   ^
 |   |   |                     |   |   |
 V   V   V                     V   V   V
[A] [B] [C]                   [D] [E] [F] 
```

如果消息系统*仍然被淹没*，您可以将上图中的队列替换为整个消息队列*系统*。

这些是一些简单的想法，不知道实际的领域，希望能为您指明一个好的方向。

顺便说一句，您可能想研究 Twitter 的架构（过去和现在），因为它们基本上有数百万个邮箱，每个邮箱对应一个元胞自动机（也称为人）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:37:49.030

我正在玩弄的一个想法：

我在几个地方读到过有人使用 ZooKeeper 作为内部系统的 DNS 的替代品。由于模拟工作进程已经向 ZooKeeper 注册了他们负责的单元模拟，我想注册一个他们将响应的 IP 和端口，然后使用 ZeroMQ 设置单元之间的 P2P 消息传递应该不会太远。这仍然是一个粗略的草图。

# xml - 要求在 XML 属性值中编码 < (<) 有什么好处？

> ID：15035262
> 
> 赞同：0
> 
> 时间：2013-02-22T23:58:13.540
> 
> 标签：xml, syntax, xml-parsing

为什么必须`<`在 XML 属性值`>`中编码而不需要这种编码？

显然，这是“因为规范是这样说的”..

..但是，我正在寻找*一个简单、实用的示例或原因来说明为什么存在这种限制，从解析的角度来看，*何时`>`不需要在这种情况下转义。

我想不出任何，但在不试图确定原始理由的情况下（除非记录在案），我希望能够看到一个案例，*说明该限制消除了哪些解析/语法复杂性，或者添加此限制可以实现什么*- 是否使用过/对“寻求”有用吗？它是否能够统一属性值和文本内容解析？其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:28:35.683

它可能是一个自同步的东西；如果您保证“<”不会出现在 XML 文档的内部，除非它作为标签起始符，那么您可以从文档中间开始，跳过字符直到看到“<”，然后开始解析，确信您在标签的开头。天真地，这似乎并不是那么有用——从中间开始解析 XML 没有多大意义——但它可能对错误恢复有影响。只要“<”受到保护，就没有理由以同样的方式担心“>”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:42:19.923

有两种方法可以回答“为什么”的问题：

(a) 你能想出这条规则可以达到什么目的吗？

(b) 作为历史事实，你知道为什么工作组成员会以他们的方式投票吗？

历史方法（b）非常困难；即使是那些出席做出决定的会议的人，有时也很难知道委员会为什么会做出这样的决定，而且从会议记录中找出答案通常是不可能的。可能是下午晚些时候；他们可能对提议改变的人变得不耐烦，等等。

不过，通常情况下，XML 规范中的奇怪之处可以追溯到它在 SGML 中的起源。XML 工作组急于确保在 XML 中不允许在 SGML 中不允许的任何内容，并且由于其语法灵活性，SGML 施加了各种限制，例如允许不使用引号分隔的属性。我不是 SGML 专家，所以我不能比这更精确，但我 90% 肯定这是解释。

# apache - 如何使静态文件上的 HTTP 缓存标头无效

> ID：15035268
> 
> 赞同：1
> 
> 时间：2013-02-22T23:58:31.567
> 
> 标签：apache, caching, http-headers, browser-cache

我在 .htaccess 中设置了一个 CacheControl 声明，供浏览器缓存静态文件。

在连续部署后，如何定义使客户端缓存无效的指令？

```
<Files *.js>
Header add "Cache-Control" "max-age=604800"
</Files> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:50:51.347

> 如何定义使客户端缓存无效的指令？

简短的回答是你不能 - HTTP 协议不支持它。

但是有一种偷偷摸摸的方法来做到这一点：创建一个清单 html 页面，列出所有可缓存的资产，将其加载到 iframe 中，然后使用 Javascript 对 iframe 进行刷新。这将为服务器创建有条件的内容请求 - 如果您的服务器以 2xx 状态响应，则提供的新内容将覆盖缓存。

然而，仅仅因为它*可能*并不使它成为一个好主意（出于很多原因——除非你想付钱让我来提供几周的咨询和培训，否则不要问）；**不要在家尝试做这个！**

普遍的共识是，管理缓存的最佳方式是提供具有*很*长 TTL 的内容，但[在 URL 中嵌入版本信息](https://stackoverflow.com/questions/850187/caching-from-urls-with-a-query-string)。

# mysql - 按多列排序

> ID：15035269
> 
> 赞同：0
> 
> 时间：2013-02-22T23:58:42.083
> 
> 标签：mysql, codeigniter, search, union

在我的应用程序中，我在两个不同的表和两个不同的列名上执行关键字搜索。我想组合 the`movies.title`和 the`people.title`以便我可以按字母顺序对它们进行排序。目前我合并我的两个查询，结果首先与电影一起返回，然后与人一起返回。

```
 public function get_from_keyword($keyword){

        $movie_query = $this->db
        ->select('id, title, release_year')
        ->from('movies')
        ->like('movies.title', $keyword)
        ->where('movies.id IS NOT NULL', null)
        ->get()
        ->result();

        $person_query = $this->db
        ->select('name, person_id')
        ->from('people')
        ->like('name', $keyword)
        ->get()
        ->result();

        $merged_queries = array_merge($movie_query, $person_query);
        return $merged_queries;

    } 
```

我不确定是否需要动态更改`SELECT`查询中的列名之一以便将它们合并在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:32:01.763

尝试使用“AS”来命名 movies.title 和 people.name 字段，如下所示：

```
 $person_query = $this->db
    ->select('name', 'MySortTitle') // AS
    ->select('person_id')
    ->from('people')
    ->like('name', $keyword)
    ->get()
    ->result(); 
```

电影查询也是如此：

```
 $movie_query = $this->db
    ->select('title', 'MySortTitle') // AS
    ->select('id, release_year')
    ->from('movies')
    ->like('movies.title', $keyword)
    ->where('movies.id IS NOT NULL', null)
    ->get()
    ->result(); 
```

然后按 MySortTitle 对合并后的数组进行排序。

# python - 从 python 脚本通过 cygwin 运行 rsync 命令

> ID：15035270
> 
> 赞同：0
> 
> 时间：2013-02-22T23:58:52.787
> 
> 标签：python, cygwin, rsync

我试图让这个工作，但我一直在

```
subprocess.call(['c:/cygwin/bin/bash.exe', '--login', '-i', 'rsync', '-zrgo', '--omit-dir-times', '--verbose', '--delete', '.', 'usertwo@192.168.1.1:/var/www/project/']) 
```

--

```
bash: /usr/bin/rsync: cannot execute binary file
126 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:03:10.430

您缺少 bash 的“-c”（命令）选项。此外，您应该将 rsync 命令作为单个字符串提供：

```
subprocess.call(['c:/cygwin/bin/bash.exe', '--login', '-i', '-c', 'rsync -zrgo --omit-dir-times --verbose --delete . usertwo@192.168.1.1:/var/www/project/']) 
```

从手册页：

```
-c string If the -c option is present,  then  commands  are  read  from
          string.   If  there  are arguments after the string, they are
          assigned to the positional parameters, starting with $0. 
```

例如：

```
# bash /bin/ls
/bin/ls: /bin/ls: cannot execute binary file
# bash -c "/bin/ls -l"
<ls output> 
```

# django - Solr 与 Django 一起工作只能找到完全匹配

> ID：15035271
> 
> 赞同：1
> 
> 时间：2013-02-22T23:59:18.547
> 
> 标签：django, solr, django-haystack

我在索引页面上有一个 django 应用程序和一个搜索栏。我安装了 haystack 和 solr。我输入了 python manage.py build_solr_schema 并将以下 xml 粘贴到 example/solr/conf/schema.xml

```
 <?xml version="1.0" ?>
<schema name="default" version="1.4">
  <types>
    <fieldtype name="string"  class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
    <fieldtype name="binary" class="solr.BinaryField"/>
    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="float" class="solr.TrieFloatField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="double" class="solr.TrieDoubleField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="date" class="solr.TrieDateField" omitNorms="true" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true" precisionStep="6" positionIncrementGap="0"/>
    <fieldType name="point" class="solr.PointType" dimension="2" subFieldSuffix="_d"/>
    <fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/>
    <fieldtype name="geohash" class="solr.GeoHashField"/>
    <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords_en.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPossessiveFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords_en.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPossessiveFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">
      <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="ngram" class="solr.TextField" >
      <analyzer type="index">
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="15" />
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="edge_ngram" class="solr.TextField" positionIncrementGap="1">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front" />
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
      </analyzer>
    </fieldType>
  </types>

  <fields>
    <!-- general -->
    <field name="id" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="django_ct" type="string" indexed="true" stored="true" multiValued="false"/>
    <field name="django_id" type="string" indexed="true" stored="true" multiValued="false"/>

    <dynamicField name="*_i"  type="int"    indexed="true"  stored="true"/>
    <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
    <dynamicField name="*_l"  type="long"   indexed="true"  stored="true"/>
    <dynamicField name="*_t"  type="text_en"    indexed="true"  stored="true"/>
    <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
    <dynamicField name="*_f"  type="float"  indexed="true"  stored="true"/>
    <dynamicField name="*_d"  type="double" indexed="true"  stored="true"/>
    <dynamicField name="*_dt" type="date" indexed="true" stored="true"/>
    <dynamicField name="*_p" type="location" indexed="true" stored="true"/>
    <dynamicField name="*_coordinate"  type="tdouble" indexed="true"  stored="false"/>

    <field name="text" type="text_en" indexed="true" stored="true" multiValued="false" />

  </fields>

  <!-- field to use to determine and enforce document uniqueness. -->
  <uniqueKey>id</uniqueKey>

  <!-- field for the QueryParser to use when an explicit fieldname is absent -->
  <defaultSearchField>text</defaultSearchField>

  <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
  <solrQueryParser defaultOperator="AND"/>
</schema> 
```

我有一个名为“foorightfoo”的对象。当我搜索“foo”时，什么都没有出现，但是当我搜索“foorightfoo”时，答案就出现了。此外，当我从太阳能管理面板检查时，同样的情况仍在继续......我的搜索只适用于完全匹配。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:10:32.890

实际上我通过操纵我的 schema.xml 的最后一部分来解决这个问题，比如

```
- <field name="text" type="text_en" indexed="true" stored="true" multiValued="false" />

+ <field name="text" type="ngram" indexed="true" stored="true" multiValued="false" /> 
```

用 ngram 改变搜索的字段类型就可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:04:54.413

您需要在末尾附加一个通配符`*`，因此查询如下

```
q=title:foo* 
```

# javascript - 如何为某些媒体查询关闭 .js？

> ID：15035277
> 
> 赞同：1
> 
> 时间：2013-02-23T00:00:06.153
> 
> 标签：javascript

我有一个使用灯箱 .js 插件的投资组合页面，当我的屏幕尺寸小于 480 时，我希望能够将其关闭，因为弹出框太大。有没有办法在css中做到这一点？如果不是，我该如何在 .js 中解决这个问题？

这是网站[http://www.campusphotoservices.org/portfolio.html](http://www.campusphotoservices.org/portfolio.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:16:54.043

在 javascript 中，您可以像在 CSS 中一样匹配媒体查询。窗口附加了一个 matchMedia() 对象，[https://developer.mozilla.org/en-US/docs/DOM/window.matchMedia](https://developer.mozilla.org/en-US/docs/DOM/window.matchMedia)。您可以像在 CSS 中一样使用媒体查询。

```
var mediaQuery = matchMedia("(min-width: 400px)");
if (mediaQuery.matches) {
  /* the view port is at least 400 pixels wide */
} else {
  /* the view port is less than 400 pixels wide */
} 
```

并非所有浏览器都支持它，因此您需要使用 matchMedia polyfill，[https://github.com/paulirish/matchMedia.js/](https://github.com/paulirish/matchMedia.js/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:01:57.063

你不能直接用 CSS 来做，但用 JavaScript 做起来很简单。

在代码中调用 lightbox 的位置，只需检查窗口的宽度是否大于 480 像素；否则做任何你想做的事情。

```
window.innerWidth 
```

# python - Python 组合导致 AttributeError

> ID：15035279
> 
> 赞同：1
> 
> 时间：2013-02-23T00:00:24.080
> 
> 标签：python, oop, nlp

我正在构建一个有限状态接受器（FSA ......基本上是一棵树）。我有一个`FSA`班级和一个`State`班级，`FSA`应该由许多`States`. 但是，当`FSA`最初创建 an 时，我想创建它的开头`State`和结尾`State`，并将它们连接起来。这是代码：

```
class State (object):
    __slots__ = "chars","children"
    def __init__(self,chars,children=[]):
        self.chars = chars
        self.children = children

class FSA (object):
    __slots__ = "vocab"
    def __init__(self,vocab):
        self.vocab = vocab
        self.start = State("0")
        self.finish = State("1")
        self.start.children.append(self.finish)
        self.finish.children.append(self.start) 
```

但是，当我运行时`fsa = FSA("vocab.small")`，这会引发错误：

```
AttributeError: 'FSA' object has no attribute 'start' 
```

有没有办法可以启动`FSA`并`States`为它创建两个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:02:32.140

你说：

```
__slots__ = "vocab" 
```

你是什​​么意思？如果你想有一个 start 属性，你需要将它包含在你的`__slots__`列表中，或者根本不使用`__slots__`。除非您有内存问题，否则最好忽略该`__slots__`属性。

# .net - 将文件从一个 zip 复制到另一个 zip - ICSharpCode.SharpZipLib.Zip

> ID：15035281
> 
> 赞同：0
> 
> 时间：2013-02-23T00:00:44.560
> 
> 标签：.net, vb.net, zip, clone, sharpziplib

我会将文件从一个 ZipFile 复制到另一个 ZipFile。

为什么没那么容易？

```
' Copy files from b.zip to a.zip
Dim a As New ZipFile(CurDir() & "\a.zip")
Dim b As New ZipFile(CurDir() & "\b.zip")

a.BeginUpdate()

For Each c As ZipEntry In b
    a.Add(c) 'Error: ICSharpCode.SharpZipLib.Zip.ZipException - Entry cannot have any data
Next

a.CommitUpdate()
a.Close() 
```

我在 .NET 4.5 Visual Basic 上使用[https://github.com/icsharpcode/SharpZipLib库。](https://github.com/icsharpcode/SharpZipLib)

谁能给我小费？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:27:51.663

如果您的目标 zip 文件与源文件相同，则复制整个 Zip 文件并重命名它，为什么要一个一个地做文件............

# jquery - jQuery .is() 表示已经点击

> ID：15035284
> 
> 赞同：0
> 
> 时间：2013-02-23T00:01:04.467
> 
> 标签：jquery, indexing, toggle

我有一系列列表，当单击列表项时，列表被分成两部分，中间插入一个段落元素。这个段落元素根据被点击的列表项的索引分配了一个类。

如果先前单击了列表项，或者该段落包含与单击项的索引相同的类，我现在正在尝试删除该段落元素。

我似乎无法理解实现此功能所需的 .is() 方法。我的选择器非常麻烦，但这是我的 .is() 方法：

```
if ($(this).is($(this).parent().parent().children('.'+index))) {
    alert('li alread clicked');
} 
```

[http://jsfiddle.net/K4b8J/15/](http://jsfiddle.net/K4b8J/15/)

* * *

JS：

```
$(".category_list.grid li").click(function () {
    var $uls = $(this).parent().parent().children("ul"); 
    var $lis =  $uls.find("li");
    // add second list
    if ($uls.length < 2) {
        var $newUl = $("<ul></ul>").insertAfter($uls);
        $uls = $uls.add($newUl);
    }

    var index = $lis.index(this);
    alert(index);
    //calculate how many lis fit per line
    var noPerLine = Math.floor($(".category_list.grid").width()/$(".category_list.grid li").outerWidth(true));
    //find index at end of line to cut
    var cutIndex = (Math.ceil((index+1)/noPerLine)*noPerLine)-1;
    // if last row make index last item
    if (cutIndex > ($lis.length-1)) {
        cutIndex = $lis.length-1;
    }
    alert(cutIndex);

    var $following = $lis.slice(cutIndex + 1); // get all following `li` elements

    // append all li elements up to the current one to the
    // first list
    $uls.eq(0).append($lis.slice(0, cutIndex + 1));

    if ($following.length > 0) {
       // append to second list
       $uls.eq(1).append($following);
    } else {
        // remove second list if empty
        $uls.eq(1).remove();
        $uls = $uls.eq(0);
    }

    // add a paragraph after the first list
    $('.preview').remove();
    // find if index already clicked
    if ($(this).is($(this).parent().parent().children('.'+index))) {
        alert('li alread clicked');
    }

    $('<p />', {'class': 'preview ' + index,text: 'Test'}).insertAfter($uls.eq(0));

}); 
```

HTML：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js" type="text/javascript"></script>
<div class="category_list grid">
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div>
<div class="category_list grid">
    <ul>
        <li></li>
        <li></li>
    </ul>
</div>
<div class="category_list grid">
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</div> 
```

CSS：

```
*{padding:0;margin:0}
.preview {clear:both; min-height: 10em; background: red;}
ul {clear:both;}
li {
  width: 5em;
  height: 3em;
  background: black;
    display: inline-block;
    text-align: left;
    margin: 1em;
    color: white;
}
.category_list {margin-bottom:2em; clear:both;} 
```

* * *

这样的事情更有意义，但我仍然无法让它工作。

```
if ($(this).parent().siblings('.preview').is('.'+index)) {
        alert('li already clicked');
    } 
```

似乎`$(this).parent().siblings('.preview')`制作了某种“.previews”数组，而不是从 div 中选择唯一现有的 .'preview'。

* * *

好的，这有效：

```
if ($(this).parent().next('.preview').is('.'+index)) {
        alert('li already clicked');
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:15:35.133

```
if ($(this).parent().next('.preview').is('.'+index)) {
        alert('li already clicked');
} 
```

Works & if 语句应该在删除段落元素之前执行。 [http://jsfiddle.net/K4b8J/19/](http://jsfiddle.net/K4b8J/19/)

# python - 使用 MySQL 后端按字段查找最新的不同查询集

> ID：15035286
> 
> 赞同：0
> 
> 时间：2013-02-23T00:01:15.560
> 
> 标签：python, django

假设我有一个模型：

```
class Calls(models.Model): 
    callid = models.AutoField(primary_key=True)
    altid = models.BigIntegerField()
    calldate = models.DateField(auto_now=True, verbose_name='Call Date')
    followupdate = models.DateField(blank=True,null = True, verbose_name='Follow-up Date') 
```

我想做的是：

```
Calls.objects.order_by("followupdate").distinct('altid') 
```

但是由于我使用的是 MySQL，因此我似乎无法在特定字段上使用 distinct。根据[文档](http://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct)中的第一个注释`distinct`。当我尝试运行时，我收到一个错误。`NotImplementedError: DISTINCT ON fields is not supported by this database`

下面是我的表的一个最小示例，以及我想如何查询以采取行动。逗号分隔的值分别表示：callid、altid、calldate 和 followupdate。

是）我有的：

```
1,1,yesterday,thursday
2,2,yesterday,next wednesday
3,1,thursday,next thursday 
```

我想要的是：

```
2,2,yesterday,next wednesday
3,1,thursday,next thursday 
```

注意：我无法更改为 PostgreSQL

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:14:31.850

也许不是最有效的解决方案（我的直觉告诉我，如果集合具有某种不同的 lambda 函数或其他东西，集合可能会稍微好一些……），但很容易做到：

```
results = Calls.objects.order_by("followupdate")
newresults = []

seen_altid = []

for result in results:
    if result.altid not in seen_altids:
        seen_altids.append(result.altid)
        newresults.append(result) 
```

不过，顺便说一句，如果您使用此解决方案，听起来您想订购，`-followupdate`这样您将获得 3,1 而不是 1,1

编辑：jk，[http](http://www.peterbe.com/plog/uniqifiers-benchmark) ://www.peterbe.com/plog/uniqifiers-benchmark似乎支持我这个解决方案。稍微修改一下 seen 是一个字典，大概是 O(1) 查找。如果您需要，这很酷（尽管除非您的结果集大小很大，否则可能真的没有必要）

# php - 内容选项卡并选择选项值以显示数据（jquery 和 php）

> ID：15035288
> 
> 赞同：2
> 
> 时间：2013-02-23T00:01:16.917
> 
> 标签：php, jquery

我正在创建内容选项卡，这些选项卡根据选择框列表中的所选值显示数据。我的问题是我无法弄清楚如何设置所选项目（联赛）的值保持不变，因此所有三个选项卡都显示来自所选项目（联赛）的数据。为了更容易理解，如果用户选择了英超联赛，标签将显示该联赛的排名、结果和射手。这是我的代码： HTML：

```
 <!Doctype html>
     <html>
     <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <script type="text/javascript" src=jquery.js"></script>
     <script type="text/javascript" src="script.js"></script>
     </head>
     <body>
     <ul id="nav">
     <li><a href="tab1">Standings</a></li>
     <li><a href="tab2">Results</a></li>
     <li><a href="tab3">Goalscorers</a></li>
     <li><select name="selecting" class="selecting">
     <option value="0">--Choose a league--</option>
     <?php
      $sql=mysql_query("select * from leagues ORDER BY id ASC LIMIT 6");
      while($row=mysql_fetch_array($sql))
       {
        $id=$row['id'];
       $data=$row['name'];
       echo '<option value="'.$id.'">'.$data.'</option>'; } ?>
      </select></li>
      </ul>
      <div id="content"> </div> 
```

jQuery (script.js)

```
 $(document).ready(function(){
   $(".selecting").change(function()
   {
   var id=$(this).val();
   var dataString = 'id='+ id;

   $.ajax ({
   type: "POST",
   url: "tab1.php",
   data: dataString,
   dataType: "html",
   cache: false,
   success: function(data)
   {
   $("#content").html(data).show();
   } 
   });
   $.ajax({
   type: "POST",
   url: "tab2.php",
   data: dataString,
   dataType: "html",
   cache: false,
   success: function(data)
   {
   $("#content").html(data).show();
   } 
   });

   $.ajax({
   type: "POST",
   url: "tab3.php",
   data: dataString,
   dataType: "html",
   cache: false,
   success: function(data)
   {
   $("#content").html(data).show();
   } 
   });
   });

    $('#content').load('tab1.php');
$(' ul#nav li a ').click(function() {
var page = $(this).attr('href');
$('#content').load(page + '.php');
return false;

});
    }); 
```

这是一个tab文件，三个都是一样的，只是sql查询不同。tab2.php

```
@$id=$_POST['id'];
if(!empty($id))
{
$mysql = mysql_query(" SELECT * from results WHERE leagueid = '$id' ORDER BY matchday asc LIMIT 10 ");
$matchday = "";
while ($row = mysql_fetch_array($mysql)) {
if($matchday != $row['matchday']) {
$matcday = $row['matchday'];
echo 'Matchday: '.$row['matchday'].'<br>';
}
    echo ''.$row['hteam'].'  '.$row['hgoals'].' : '.$row['agoals'].'  '.$row['ateam'].'<br>';
}` 
```

我提前感谢您的帮助。此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:47:57.033

嘿，如果您编写了相同的代码，请编辑您的代码，然后请再次 ping，因为这里写的代码充满了如下所述的错误

1.  你还没有初始化 jquery( `$(document).ready(function(){});`)
2.  您在提取结果的页面上有一个 php 语法错误
3.  您编写了一个非常糟糕的脚本。

# sencha-touch-2 - Sencha touch 2 冲突的听众

> ID：15035290
> 
> 赞同：0
> 
> 时间：2013-02-23T00:01:21.593
> 
> 标签：sencha-touch-2

我有以下样式的 html 代码侦听器：

```
listeners  :  {
        tap: {
            fn: function(e, del, sender) {
                console.log("you pressed A!");
            },
            element : 'element',
            delegate : '.a'
        },
        tap: {
            fn: function(e, del, sender) {
                console.log("You pressed B!");
            },
            element:'element',
            delegate : '.b'
        }
    } 
```

在听众内部，他们都发生冲突，只有第二个会被附加。他们都在同一个对象中为侦听器使用名称“tap”，所以我认为这就是原因，

我将如何解决这个问题？（顺便说一句，我也有几个键），我不能直接附加到元素，因为它们是 html 代码的侦听器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:20:26.060

```
listeners:{
    tap: function(list, index, target, record, e, eOpts){
        var elm = Ext.get(e.target);
        if(elm.dom.className == "a"){} // or any other thing you want to check
    }
} 
```

您可以对其进行控制台以查看有关它的更多信息您也可以这样做`elm.dom.id`

# asana - 我可以使用 Asana API 添加评论吗？

> ID：15035293
> 
> 赞同：0
> 
> 时间：2013-02-23T00:01:38.790
> 
> 标签：asana

我可以使用 Asana API 向任务添加评论吗？

我想为 git 编写钩子，在每次本地提交之后，我都会向 Asana 添加评论，并且在每次推送之后，我都会添加评论，其中包含指向 github（或任何其他“git commit viewer”）中提交的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:15:35.177

（我在 Asana 工作）。

是的。请参阅开发者文档中“评论对象”下的故事部分：

[https://asana.com/developers/api-reference/stories](https://asana.com/developers/api-reference/stories)

# ios - 加速，移动物品

> ID：15035298
> 
> 赞同：0
> 
> 时间：2013-02-23T00:02:16.073
> 
> 标签：ios, objective-c, accelerometer

我现在正在开发一个使用加速来玩的游戏。我发现了如何让我的项目移动，但不改变它的“原点”，或者更准确地说，加速度计算的原点：

事实上，我的图像移动了，它的中心是这样定义的：

```
imageView.center = CGPointMake(230, 240); 
```

如您所见，我使用横向模式。但是，我希望我的形象“逐步”移动。我所说的渐进式就像游戏中的[Lane Splitter](https://www.youtube.com/watch?v=7vVzYTFgugw)：

您可以看到自行车在移动，例如，当他完全靠在左侧时，该人可以将 iPad 水平定向，但自行车不会回到屏幕中间。我不知道该怎么做，因为当我尝试解决方案时，我的图像会移动，但只要我的 iPhone 水平放置，我就会回到中心。我明白为什么，但我不知道如何纠正这个问题。

这是我当前的代码：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
    int i = 0;
    float current;
    if (i == 0)
    {
        imageView.center = CGPointMake(230, 240);
        current = 240;
        i++;
    }
    //try to modify the origin of acceleration
    imageView.center = CGPointMake(230, current - (acceleration.y*200));
    current = imageView.center.y;      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:02:49.367

问题是这`i`是一个局部变量。您的代码相当于

```
imageView.center = CGPointMake(230, 240);
float current = 240;
imageView.center = CGPointMake(230, current - (acceleration.y*200));
[imageView center]; 
```

相反，尝试这样的事情（假设您的图像视图在启动时位于正确的位置）：

```
CGPoint current = imageView.center;
current.y -= acceleration.y*200;
imageView.center = current; 
```

还要记住，`acceleration.y`在设备坐标空间中；如果您的 UI 支持多个方向，则需要补偿界面旋转。

# c# - #if #else #endif 和常规 if, else 之间的区别

> ID：15035305
> 
> 赞同：5
> 
> 时间：2013-02-23T00:02:34.747
> 
> 标签：c#, .net

正如标题所述，我想知道使用之间有什么区别

```
#if
   DoWork();
#else
   DoAnotherWork();
#endif 
```

和

```
if (debug)
   DoWork();
else
   DoAnotherWork(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T00:07:14.137

```
if (debug)
    DoWork();
else
    DoAnotherWork(); 
```

上面的代码将被编译并在运行时检查条件。

```
#if
    DoWork();
#else
    DoAnotherWork();
#endif 
```

这些语句将在编译时检查。

所以如果#if条件为真，DoWork(); 将被编译，否则 DoAnotherWork(); 将被编译。与前面的示例一样，包括 if 语句在内的所有代码都将被编译。

请阅读预处理器指令

[预处理器指令](http://msdn.microsoft.com/en-us/library/ed8yd1ha.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-23T00:04:46.190

第一个是[预处理器指令](http://msdn.microsoft.com/en-us/library/ed8yd1ha%28v=vs.71%29.aspx)，第二个是[逻辑语句](http://msdn.microsoft.com/en-us/library/676s4xab%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-23T00:06:45.710

第一个版本使用预处理器指令。这些是编译器本身只编译某些语句的指令。生成的可执行文件将仅包含已编译的语句。因此，条件必须是可以在编译时评估的东西。

第二个版本在运行时进行评估。编译器将编译所有语句以及评估`if`条件的逻辑。所有语句都将包含在生成的可执行文件中。实际执行的语句将在您的代码运行时确定。

# java - 如何重绘 Java Applet

> ID：15035313
> 
> 赞同：3
> 
> 时间：2013-02-23T00:03:31.160
> 
> 标签：java, swing, applet, awt

我有以下代码，它是将摄氏温度转换为华氏温度的简单小程序。

如果输入正确的数字并单击按钮，则温度将被转换并显示没有问题。但是，如果文本框包含无效条目，则需要在错误面板上的标签上显示一条消息，但除非我调整小程序的大小，否则不会发生这种情况。所以问题是“如何重绘！！！”

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TemperatureConverter extends Applet{

private JLabel lblCel=new JLabel("Celsius Temperature   :");
private JLabel lblFar=new JLabel("Fahrenheit value      :");
private JLabel lblResult=new JLabel("");
private JLabel lblError=new JLabel("");
private JTextField txtFahr;
private JPanel celsPanel;
private JPanel farPanel;
private JPanel errorPanel;
private JButton btnEnter = new JButton("Convert");
public double temp = 0.0;

public void init(){

    celsPanel = new JPanel(new GridLayout(1,3,2,2));
    celsPanel.add(lblCel);
    txtFahr = new JTextField(50);
    celsPanel.add(txtFahr);
    btnEnter.addActionListener(new ActionListener() {       
        @Override
        public void actionPerformed(ActionEvent arg0) {
            try{
                temp = Double.parseDouble(txtFahr.getText());
                double X = (temp - 32)* 0.69;
                lblResult.setText(String.valueOf(X));
                lblError.setText(" ");
            }
            catch(NumberFormatException ex){
                lblError.setText("Invalid Celsius Value");
            }
        }
    });
    celsPanel.add(btnEnter);

    farPanel = new JPanel(new GridLayout(1,2,2,2));
    farPanel.add(lblFar);
    lblResult.setSize(100, 30);
    farPanel.add(lblResult);

    errorPanel = new JPanel();
    lblError.setSize(100, 30);
    errorPanel.add(lblError);

    setLayout(new GridLayout(3,2,2,2));
    add(celsPanel);
    add(farPanel);
    add(errorPanel);
    setSize(550,200);

}

} 
```

任何人都可以解决这个问题吗？我在考虑标签尺寸问题，但后来我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:16:47.137

试试这个 ：

```
 btnEnter.addActionListener(new ActionListener() {       
        @Override
        public void actionPerformed(ActionEvent arg0) {
            try{
                temp = Double.parseDouble(txtFahr.getText());
                double X = (temp - 32)* 0.69;
                lblResult.setText(String.valueOf(X));
                lblError.setText(" ");
                this.repaint();
            }
            catch(NumberFormatException ex){
                lblError.setText("Invalid Celsius Value");
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:06:12.043

1.  扩展 JApplet ，在 html 页面的标签中使 applet 的高度变大
2.  不能使用网格布局和设置大小，如果你想使用自己的大小然后 setLayout Manager as null for applet 然后 setBounds
3.  如果 1 和 2 不起作用，则在组件上调用 invalidate 以强制重绘 lblError.invalidate()

关于空布局管理器和设置边界：这适用于所有操作系统（已在 Apple、unix、windows 和 linux 上测试过），尽管教科书说在现实中使用布局管理器都非常愚蠢，在我的测试中像素大小高达 1000x800 12年。样本[图像 xy](http://sel2in.com/prjs/java/imageXy/ "图像 xy 小程序") ; [拼字游戏架](http://sel2in.com/prjs/java/scrabble_rack/%20applet)； [信息捕获](http://sel2in.com/prjs/java/dj_info_capture/)

参考阅读[javadoc中的无效、重绘和忽略重绘](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html)

# jquery - HTML客户端调用webapi登录

> ID：15035317
> 
> 赞同：2
> 
> 时间：2013-02-23T00:03:59.973
> 
> 标签：jquery, html, asp.net-web-api

在花了几个月的时间试图解决这个问题之后，我终于不得不寻求你的帮助。

场景：Ajax 调用传递用户名和密码的 webapi 方法。如果用户有效，则将会话 ID/令牌返回给客户端。该令牌将在所有后续请求中传递；也许使用时间戳来进一步保护方法。

我理解这个理论，我需要的是示例代码。带有用户名和密码字段的 HTML 页面。“登录”按钮单击对 asp.net WebAPI 中的 rest 方法进行 Ajax 调用，以针对自定义成员表进行身份验证。

如果一切正常，将令牌发送到客户端（将存储在用户设备上）

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T11:27:54.740

鉴于您正在为用户名和密码打开一个端点，您应该阅读[4.4.3](http://www.rfc-editor.org/rfc/pdfrfc/rfc6819.txt.pdf)下描述[的一些威胁。](http://www.rfc-editor.org/rfc/pdfrfc/rfc6819.txt.pdf)[资源所有者密码凭据](http://www.rfc-editor.org/rfc/pdfrfc/rfc6819.txt.pdf)（使用用户名和密码的 OAuth2 流程）- 即使这不是 OAuth 解决方案，遵循该建议仍然非常重要，这涵盖了诸如使用 SSL 进行传输级别安全性等基础知识，但它也列出了很多其他威胁和对策...

在 JavaScript 中使用用户的凭据本身就是一种威胁。OAuth 2 规范将隐式授权流程描述为使用 JavaScript 获取会话 (access_token) 的首选方法，隐式流程旨在使凭证远离 javascript。[这里](http://weblogs.thinktecture.com/cweyer/2012/11/oauth2-in-thinktecture-identityserver-v2-implicit-grant-flow-with-javascript.html)有一个该方法的示例演练；[但是，这将涉及您安装授权服务器、使用第 3 方提供程序或使用DotNetOpenAuth 之](https://github.com/DotNetOpenAuth/DotNetOpenAuth/tree/master/samples/OpenIdRelyingPartyMvc)类的东西实现自己的授权服务器（[这里](http://www.dotnetopenauth.net/documentation/securityscenarios/)的一些好场景并不太难）。

**但是假设您已经排除了 OAuth 2 和隐式授权流程等，那么......**

我在[这里](https://github.com/markyjones/StackOverflow/tree/master/ExampleBasicAuthWithSession)放置了一个在线示例，它通过 AJAX 使用基本身份验证返回 Json Web 令牌[JWT](http://openid.net/specs/draft-jones-json-web-token-07.html)会话令牌，以用于所有后续请求。

我的示例是基本的，因此令牌存储在内存中；但是，cookie、本地存储等可用于在 Web 环境中更长时间地存储令牌。

我的示例使用 Thinktecture 的[IdentityModel](https://github.com/thinktecture/Thinktecture.IdentityModel.45)包。

下面还有其他示例和详细的演练，这些绝对应该用作进一步的参考和指导......

*   [Thinktecture Javascript 示例](https://github.com/thinktecture/Thinktecture.IdentityModel.40/tree/master/Samples/Web%20API/Clients/JavaScriptClients)
*   [狗粮我们的 API - 身份验证](http://ben.onfabrik.com/posts/dog-fooding-our-api-authentication)

我的例子借鉴了上面和这个问题[How to use Basic Auth with jQuery and AJAX?](https://stackoverflow.com/questions/5507234/how-to-use-basic-auth-and-jquery-and-ajax)

如果您的登录表单和 API 位于不同的域中，那么您还需要调查[CORS](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)或 JSONP，确保在服务器上使用安全存储并隐藏在服务器上的会话签名密钥。该密钥当前在 WebApiConfig.cs 中进行了硬编码，还请务必重新启用必须通过 SSL 选项。

**一旦是PhoneGap**

您的服务器可能是相同的，但您可以使用 PhoneGap 框架来替换您的一些 JavaScript...

# android - Dashclock 小部件示例扩展无法实例化服务

> ID：15035324
> 
> 赞同：1
> 
> 时间：2013-02-23T00:04:32.803
> 
> 标签：android, dashclock

我正在尝试编写[dashclock](https://play.google.com/store/apps/details?id=net.nurik.roman.dashclock&feature=related_apps#?t=W251bGwsMSwxLDEwOSwibmV0Lm51cmlrLnJvbWFuLmRhc2hjbG9jayJd)扩展，所以我从[example-extension](http://code.google.com/p/dashclock/source/browse/example-extension/)开始， 但我无法让它正常工作。我可以在扩展列表的 dashclock 设置中看到这个示例扩展，但它不在实际的 dashclock 小部件上。它使用此堆栈跟踪定期在后台崩溃：

```
02-22 17:04:31.118: E/AndroidRuntime(25888): FATAL EXCEPTION: main
02-22 17:04:31.118: E/AndroidRuntime(25888): java.lang.RuntimeException: Unable to instantiate service com.example.dashclock.exampleextension.ExampleExtension: java.lang.ClassNotFoundException: Didn't find class "com.example.dashclock.exampleextension.ExampleExtension" on path: /data/app/com.example.dashclock.exampleextension-1.apk
02-22 17:04:31.118: E/AndroidRuntime(25888):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2513)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at android.app.ActivityThread.access$1600(ActivityThread.java:141)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1316)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at android.os.Looper.loop(Looper.java:137)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at java.lang.reflect.Method.invokeNative(Native Method)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at java.lang.reflect.Method.invoke(Method.java:511)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at dalvik.system.NativeStart.main(Native Method)
02-22 17:04:31.118: E/AndroidRuntime(25888): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.dashclock.exampleextension.ExampleExtension" on path: /data/app/com.example.dashclock.exampleextension-1.apk
02-22 17:04:31.118: E/AndroidRuntime(25888):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-22 17:04:31.118: E/AndroidRuntime(25888):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2510)
02-22 17:04:31.118: E/AndroidRuntime(25888):    ... 10 more 
```

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:52:58.363

错误：

> java.lang.ClassNotFoundException：在路径上找不到类“com.example.dashclock.exampleextension.ExampleExtension”：/data/app/com.example.dashclock.exampleextension-1.apk

这意味着它无法找到`ExampleExtension.java`应该位于`com.example.dash` `clock.exampleextension`包中的位置

* * *

首先，不要将示例文件导入 eclipse，启动一个全新的 Android 应用程序

询问时取消选择创建活动按钮

创建完成后，右键单击 src 文件夹并添加一个包。然后右键单击该包并创建一个新类。这个新课程将成为您的扩展。[从此处](http://code.google.com/p/dashclock/)的 Dashclock 站点获取 2 个 jar 文件

将它们拖到您的 libs 文件夹中

将此添加到您的清单中

```
 <application android:label="@string/app_name"
    android:icon="@drawable/ic_extension_yourIcon"
    android:theme="@android:style/Theme.Holo">

    <service android:name=".YourExtension"
        android:icon="@drawable/ic_extension_your_icon"
        android:label="@string/your_extension_title"
        android:permission="com.google.android.apps.dashclock.permission.READ_EXTENSION_DATA">
        <intent-filter>
            <action android:name="com.google.android.apps.dashclock.Extension" />
        </intent-filter>
        <meta-data android:name="protocolVersion" android:value="1" />
        <meta-data android:name="description"
            android:value="@string/your_extension_description" />
    </service>

</application> 
```

保存 Manifest，找到红线指示的错误并将适当的字符串添加到您的 strings.xml

这是一个空的扩展类

```
 public class YourExtension extends DashClockExtension {

    @Override
    protected void onUpdateData(int reason) {

    publishUpdate(new ExtensionData()
    .visible(true)
    .icon(R.drawable.ic_extension_yourIcon)
    .status("This is the text when minimized")
    .expandedTitle("This is the white Title text when expanded")
    .expandedBody("This is the grey footer text when expanded")
    .clickIntent(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"))));

    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T19:50:44.010

如果在做了 jb15613 解释得很好之后它不起作用（我在评论中看到人们 - 像我一样 - 对他们不起作用），在 IntelliJ 上，在您希望它提供的项目结构的模块依赖项选项卡中设置JAR 作为“编译”。

# c# - 方法参数中的“this”关键字是什么意思？

> ID：15035330
> 
> 赞同：22
> 
> 时间：2013-02-23T00:05:25.893
> 
> 标签：c#, extension-methods, html-helper

```
namespace System.Web.Mvc.Html
{
    // Summary:
    //     Represents support for HTML in an application.
    public static class FormExtensions
    {
        public static MvcForm BeginForm(this HtmlHelper htmlHelper, string actionName, string controllerName);
...
    }
} 
```

我注意到 BeginForm 方法中第一个参数前面的“this”对象似乎不被接受为参数。在真正的 BeginForm 方法中看起来像：

```
BeginForm(string actionName, string controllerName); 
```

省略第一个参数。但它实际上以某种隐藏的方式接收了第一个参数。你能解释一下这个结构是如何工作的吗？我实际上正在探索 MVC 4 互联网示例。谢谢你。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-23T00:21:16.367

这就是扩展方法在 C# 中的工作方式。扩展方法功能允许您使用自定义方法扩展现有类型。`this [TypeName]`方法参数上下文中的关键字是`type`您要使用自定义方法扩展的关键字，`this`用作前缀，在您的情况下，`HtmlHelper`是`type`要扩展`BeginForm`的方法，是应该扩展它的方法。

看看这个`string`类型的简单扩展方法：

```
public static bool BiggerThan(this string theString, int minChars)
{
  return (theString.Length > minChars);
} 
```

您可以轻松地在`string`对象上使用它：

```
var isBigger = "my string is bigger than 20 chars?".BiggerThan(20); 
```

参考：

*   有据可查的参考资料是：[如何：实现和调用自定义扩展方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb311042.aspx)

*   有关 ASP.NET MVC 中的扩展方法的更具体参考是： [如何创建自定义 MVC 扩展方法](http://blog.syntaxc4.net/post/2010/10/09/how-to-create-custom-mvc-extension-methods.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T00:10:23.480

扩展方法：

扩展现有类型的“螺栓固定”方式。它们允许您使用新功能扩展现有类型，而无需子类化或重新编译旧类型。例如，您可能想知道某个字符串是否为数字。或者您可能希望在 ASP.net WebForms 中为控件提供 Show() Hide() 功能。

例如：

```
public static class MyExtensionMethods
{
    public static void Show(this Control subject)
    {
        subject.Visible = true;
    }
    public static bool IsNumeric(this string s)
    {
        float output;
        return float.TryParse(s, out output);
    }
} 
```

**编辑：** 有关更多信息，您可以在以下位置查看 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)，由@aush 友情链接。

我喜欢阅读有关扩展方法的“C# 深度”。这里有一段摘录：http: [//my.safaribooksonline.com/book/programming/csharp/9781935182474/extension-methods/ch10lev1sec3](http://my.safaribooksonline.com/book/programming/csharp/9781935182474/extension-methods/ch10lev1sec3)

您当然可以在线购买这本书，或者您可以使用 Google 对它的幕后工作原理进行一些研究。

# python - 创建字典的字典：循环

> ID：15035331
> 
> 赞同：0
> 
> 时间：2013-02-23T00:05:29.580
> 
> 标签：python

我想使用循环创建字典词典（DofD）。在循环内部，我的“subdict”变量将被设置，然后用新名称添加到 DofD。

我从文件中读取，根据分隔符“####”将内容拆分为块，该分隔符将每个子字典中我想要的内容分开。我根据块中的一个字段命名 DofD 中的每个条目。

我很困惑，因为我的输出 DofD 有正确命名的条目，但是子目录中的所有信息都是相同的。所有值都反映了最后一个子字典的内容。

```
idxs=[i for i,val in enumerate(fileContents) if val=='####\r\n']
paramsDict={}
for i in range(len(idxs)):
    pos=idxs[i]
    if i < len(idxs)-1: endLine=idxs[i+1]+1 # watch out for end of file
    else: endLine=len(fileContents)
    blockForSubDict=fileContents[idxs[i]+1:endLine]

    paramsDict[blockForSubDict[0].split()[0]]={'Name': blockForSubDict[0].split()[0], 'Values' : [float(x.replace('\r\n','')) for x in blockForSubDict[5:lenBlock]]} 
```

我手工制作了一个示例来创建字典字典，以确保我的语法没有做一些奇怪的事情：

```
d1={'Name': 'name1', 'Value': 30}

d2={'Name': 'name2', 'Value': 29}

d3={}
d3[d1['Name']]=d1
d3[d2['Name']]=d2 

d3 
```

> {'name1'：{'Name'：'name1'，'Value'：30}，'name2'：{'Name'：'name2'，'Value'：29}}

这行得通。

我在循环中搞砸了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:22:39.970

所以，问题是我的 DofD 中的条目实际上只是对我循环中的 subdict 的引用。这意味着我的 DofD 只是有一堆不同名称的条目，它们都指向同一个 subdict。subdict 的内容随着每次迭代而变化，最终通过我的循环反映了最后一次的块值。因此，我的 DofD 中的所有条目都显示了同一组 subdict 值。

我决定将 subdict 的 deepcopy() 放入 DofD 中，而不是在每次迭代中创建一个不同命名的 subdict，以便每个条目都保持其独特的内容。

我的代码现在看起来像：

```
 import copy
    ...
    paramsDict[blockForSubDict[0].split()[0]]={'Name':
    copy.deepcopy(blockForSubDict[0].split()[0]), 
    'Values' : 
    [copy.deepcopy(float(x.replace('\r\n',''))) for x in blockForSubDict[5:lenBlock]]} 
```

# regex - 在 bash 脚本中使用 ls 命令时的模式匹配

> ID：15035333
> 
> 赞同：2
> 
> 时间：2013-02-23T00:05:39.940
> 
> 标签：regex, sh, ls

在 sh 脚本中，我试图遍历与以下模式匹配的所有文件，
`abc.123`基本上是 abc。后面只能跟数字，后面的数字`.`可以是任意长度。
使用

`$ shopt -s extglob`
`$ ls abc.+([0-9])`

完成这项工作，但在终端上而不是通过脚本。如何仅获取与模式匹配的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:15:07.877

如果我理解正确，该模式可以翻译成正则表达式：

```
^abc\.[0-9]+$ 
```

所以你可以

继续使用`ls`并 grep 输出。例如：

```
ls *.*|xargs -n1|grep -E '^abc\.[0-9]+$' 
```

或使用`find`

find 有一个选项`-regex`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:33:55.540

如果您正在使用`sh`而不是`bash`，并且大概您还希望符合 POSIX 标准，您可以使用：

```
for f in ./*
do
    echo "$f" | grep -Eq '^\./abc.[0-9]+$' && continue
    echo "Something with $f here"
done 
```

它可以很好地处理带有空格、引号等的文件名，但可能会匹配一些不应该包含换行符的文件名。

If you tagged your question `bash` because you're using bash, then just use extglob like you described.

# android - 获取行数StaticLayout将文本分割成

> ID：15035336
> 
> 赞同：0
> 
> 时间：2013-02-23T00:05:58.987
> 
> 标签：android, layout, android-canvas

我正在画布上绘制一些文本，并使用 StaticLayout 将文本包裹在屏幕上。我想对齐文本，使文本底部位于屏幕底部。

为此，我需要知道 StaticLayout 将文本包装到了多少行中，这样我就可以将它乘以字体大小，并将它从我的组件的高度偏移这么多。

这是我的静态布局：

```
main = new TextPaint();
main.setTextSize(textSize);
main.setColor(Color.WHITE);
bottomText = new StaticLayout("Long text that requires wrapping.", main, getWidth(), Layout.Alignment.ALIGN_CENTER, 1f, 1.0f, false); 
```

我通过翻译我的画布将它向下移动：

```
canvas.translate(0, getHeight() / 2);
bottomText.draw(canvas);
canvas.restore(); 
```

所以; 如何将其与底部对齐，或获取已拆分的行数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:09:38.980

怎么样`StaticLayout.getLineCount()`？

# sparql - 具有大量 UNION 的 SPARQL 查询的替代方案

> ID：15035337
> 
> 赞同：4
> 
> 时间：2013-02-23T00:06:11.587
> 
> 标签：sparql, rdf, semantic-web, virtuoso, named-graphs

我有一些命名图存储在 Virtuoso 中，我想从提供的列表中找到与最多术语匹配的图。

我的查询是以编程方式构建的，如下所示：

```
SELECT DISTINCT ?graph (count(DISTINCT ?match) as ?matches)
WHERE {
  GRAPH ?graph {
    {?match rdf:label "term 1"} 
     UNION {?match rdf:label "term 2"} 
     UNION {?match rdf:label "term 3"}
     ...
  }
}
ORDER BY DESC(?matches) 
```

每个术语成为另一个 UNION 子句。

有一个更好的方法吗？查询变得又长又难看，当术语太多时，Virtuoso 会抱怨。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-20T19:23:04.070

在 SPARQL 1.1 中，有一个[**values**](http://www.w3.org/TR/sparql11-query/#inline-data)子句可以帮助解决这个问题。它可以让你写：

```
select ?match where {
  values ?label { "term 1" "term 2" "term 3" }
  ?match rdfs:label ?label
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T11:52:43.900

（这是 rdfs：标签）

另一种写法是：

```
{ ?match rdfs:label ?X . FILTER (?x in ("term 1", "term 2", "term 3")) } 
```

或（SPARQL 1.0）

```
{ ?match rdfs:label ?X . FILTER ( ?x = "term 1" || ?x = "term 2" || ?x = "term 3" )  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-20T07:24:27.017

价值解决方案更强大，因为它允许使用 UNDEF 如下（例如）：

```
VALUES (?s ?p ?o) { (<http://abc#X> <http://abc#P1> UNDEF)
                    (UNDEF <http://abc#P2> <http://abc#Y>) } 
```

UNDEF 有一个通配符函数，返回的三元组是单独匹配每个值三元组的并集。但是当然对于大型数据集，从性能的角度来看可能会变慢

# android - Android - 从位于 TableRow 内的 TextView 获取数据

> ID：15035339
> 
> 赞同：0
> 
> 时间：2013-02-23T00:06:42.200
> 
> 标签：android, listview, onclick, textview, tablerow

嘿伙计们，这是我的问题。我在 ListView 中有一个长长的数据列表（按字母顺序组织），因此为了让用户的生活更轻松，我想让他们通过单击包含在一张表（在列表上方）。

所以用户看到：

ABCDE F....
项目 1
项目 2
项目 3
...
...

单击“D”时，我将使用 ScrollTo(position) 之类的东西来到达列表的那一部分。

如何在不为每个 TextView 创建 26 个 onClick 侦听器的情况下做到这一点？我的想法是使用一个表格，并希望获得在激活 TableRow 侦听器时单击的 TextView。

或者

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:23:38.357

对于每个字母，我会使用`LinearLayout`with`android:orientation="horizontal"`并将s 放入其中。`Button`每个`onClick`在您的 xml 中都有一个调用函数的函数。然后在函数中做类似的事情

```
int id = v.getId();
    Button btn = (Button) findViewById(id);

    String letter = btn.getText().toString(); 
```

然后使用您计划在列表中搜索的那个字母。使用`String`函数或将每个字母分配给列表中的一个数字。有了这样的东西，您只有一个`onClick`侦听器，并使用`View`在列表中单击的任何一个进行搜索

# c++ - 在 c++0x 之前使用 map::at()

> ID：15035341
> 
> 赞同：0
> 
> 时间：2013-02-23T00:06:48.380
> 
> 标签：c++, stl

我很高兴看到 map::at() 被添加到 c++11，但是在挖掘之后，我发现它已经在 gcc 库中定义，并且可以与 -std=c++0x*和*c++98一起使用.

是否将此方法用于在 c++0x 被认为可移植之前使用标准编译的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:21:22.080

我认为你误解了什么`-std=c++0x`意思。从[C 方言选项](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html)：

> 'c++11'
> 
> 'c++0x'
> 
> 2011 ISO C++ 标准加上修正案。对 C++11 的支持仍处于试验阶段，在未来的版本中可能会以不兼容的方式发生变化。不推荐使用名称“c++0x”。

如您所见`c++0x`， and`c++11`是等效的并且`c++0x`已被弃用。

# mysql - 一个 MySql 查询来检索按日期时间排序的两个部分？

> ID：15035343
> 
> 赞同：1
> 
> 时间：2013-02-23T00:07:11.500
> 
> 标签：mysql, database

如果我可以通过查询做到这一点，我需要一些帮助来可视化。

我有元素 1 和元素 2。

要素一是VIP

元素二正常不重要。

所有其他共性都是相同的。

如何从数据库中选择元素 1 和元素 2，其中我按创建日期排序，但首先是所有 VIP，然后是普通元素？

```
table events
eventid int
eventinfo text
vip      tinyint
datecreated timestamp 
```

因此，首先要尝试显示所有贵宾事件，然后显示每页限制为 10 的其余事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:18:30.473

像这样：

```
SELECT *
FROM events
ORDER BY CASE WHEN VIP = 1 THEN 0 ELSE 1 END, DateCreated DESC; 
```

这将使元素`VIP`首先出现，然后是其他元素。

[SQL 小提琴演示](http://sqlfiddle.com/#!2/116d5/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:22:10.770

您应该按`VIP`和 按对结果进行排序`date`。它应该看起来像这样：

```
SELECT (...) FROM (...) WHERE (...) ORDER BY date, VIP; 
```

您还可以添加`ASC`或`DESC`以获得升序或降序。

# clojure - 使用带 bool 函数的 doseq

> ID：15035345
> 
> 赞同：1
> 
> 时间：2013-02-23T00:07:13.947
> 
> 标签：clojure

我是 Clojure 的新手。

假设我有一个简单的`doseq`代码：

```
(doseq [keyval db] (f keyval)) 
```

`f`是一个布尔函数，我想知道是否所有迭代都返回 TRUE。这就像评估`and`每个序列的运算符一样。

如何检查每次迭代的结果并在 之后使用它`doseq`，最好的方法是什么？

例子：

```
(and (f? :a db) (f? :b db)...) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T03:09:56.457

`doseq`适用于当身体只是打算对每个元素产生副作用时。

您的示例应使用以下方式实现`every?`：

```
(every? f db) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:28:12.827

您不需要评估每个术语，而只需要评估第一个错误。如果我得到你的要求，试试[一些](http://clojuredocs.org/clojure_core/clojure.core/some)。

```
; assuming f? and db in scope

(defn all-are-f [aseq] (not (some #(not (f? % db)) aseq))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T00:18:38.500

有很多方法可以映射和过滤一个集合来搜索不同的东西，希望这些例子能给你一些想法：

```
user> (def db {:a 1 :b 2 :c 3 :d 4})
#'user/db 
user> (map (fn [[k v]] (if (even? v) true false)) db) 
(false false true true) 
user> (filter (fn [[k v]] (if (even? v) true false)) db) 
([:b 2] [:d 4]) 
```

有几种方法可以查看它们是否都是真的：

```
user> (reduce #(and %1 %2) 
              (map (fn [[k v]] (if (even? v) true false)) 
                    {:a 2 :b 4 :c 6}))                                             
true 
user> (reduce #(and %1 %2) (map (fn [[k v]] (if (even? v) true false)) db)) 
false  

user> (not-any? false? (map (fn [[k v]] (if (even? v) true false)) db)) 
false 
user> (not-any? false? (map (fn [[k v]] (if (even? v) true false)) {:a 2 :b 4 :c 6}))
true 
```

并查看数据库中的其他内容：

```
user> (filter (fn [[k v]] (if (even? v) true false)) {:a 2 :b 4 :c 6})
([:a 2] [:c 6] [:b 4])  
user> (filter (fn [[k v]] (if (odd? v) true false)) {:a 2 :b 4 :c 6})
()
user> (if (empty? (filter (fn [[k v]] (if (odd? v) true false)) {:a 2 :b 4 :c 6})) "all where even" "some where odd")
"all where even" 
```

# ssl-certificate - [0] 和 [3] 在 ASN1 中如何工作？

> ID：15035349
> 
> 赞同：11
> 
> 时间：2013-02-23T00:07:25.137
> 
> 标签：ssl-certificate, asn.1

我正在解码 ASN1（在 X.509 中用于 HTTPS 证书）。我做得很好，但是有一件事我找不到和可以理解的文档。

在这个[JS ASN1 解析器](http://lapo.it/asn1js/)中，您会在一个元素下看到 a`[0]`和 a ，第一个在 data: 中看起来像这样。我想知道这意味着什么以及如何解码。`[3]``SEQUENCE``A0 03 02 01 02 ...`

另一个例子是[Anatomy of an X.509 v3 Certificate](https://web.archive.org/web/20170708104847/http://www.jensign.com/JavaScience/GetTBSCert/index.html)，前两个元素`[0]`后面有一个。`SEQUENCE`

我不明白的是 A0 如何适合标签字节的前 2 位是一个类，下一个是原始/构造位，其余 5 位应该是标签类型的方案。A0 是 10100000，这意味着标签类型值为零。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T17:19:44.590

听起来您需要介绍 ASN.1 标记。有两个角度可以解决这个问题。X.690 定义了 BER/CER/DER 编码规则。因此，它回答了标签如何编码的问题。X.680 定义了 ASN.1 本身。因此，它定义了标记的语法和规则。这两个规范都可以在 ITU-T 网站上找到。我会给你一个快速的概述。

BER/DER/CER 中使用标签来识别类型。它们对于区分 SEQUENCE 的组件和 CHOICE 的替代项特别有用。

标签结合了标签类别和标签编号。标记类是 UNIVERSAL、APPLICATION、PRIVATE 和 CONTEXT-SPECIFIC。UNIVERSAL 类基本上用于内置类型。APPLICATION 通常用于用户定义的类型。CONTEXT-SPECIFIC 通常用于构造类型（SEQUENCE、CHOICE、SEQUENCE OF）内的组件。在语法上，当在 ASN.1 模块中指定标签时，它们会写在括号内：[ tag_class tag_number ]; 对于 CONTEXT-SPECIFIC，tag_class 被省略。因此，[应用程序 10] 或 [0]。

虽然每个 ASN.1 类型都有一个关联的标签，但从句法上讲，还有一个“TaggedType”，ASN.1 作者使用它来指定用于编码类型的标签。基本上，TaggedType 将标签前缀放在类型之前。例如：

```
MyType ::= SEQUENCE {
  field_with_tagged_type [0] UTF8String
} 
```

TaggedType 中的标记是显式的或隐式的。如果是显式的，这意味着我希望对原始标签进行显式编码。如果是隐式的，这意味着我很高兴只对我指定的标签进行编码。在显式情况下，BER 编码产生一个嵌套的 TLV（标签长度值）：外部标签（上例中的 [0]）、长度，然后是另一个 TLV 作为值。在示例中，此内部 TLV 将具有用于 UTF8String 的 [UNIVERSAL 12] 标记。

标记是显式的还是隐式的取决于您如何编写标记和标记环境。例如：

```
MyType2 ::= SEQUENCE {
  field_with_explicit_tag [0] EXPLICIT UTF8String OPTIONAL,
  field_with_implicit_tag [1] IMPLICIT UTF8String OPTIONAL,
  field_with_tag [2] UTF8String OPTIONAL
} 
```

如果您既未指定 IMPLICIT 也未指定 EXPLICIT，则有一些规则定义标记是显式还是隐式（参见 X.680 31）。这些规则考虑了为 ASN.1 模块定义的标记环境。ASN.1 模块可以将标记环境指定为隐式标记、显式标记或自动标记。 **粗略地说**，如果您没有为标记指定 IMPLICIT 或 EXPLICIT，则如果标记环境为 EXPLICIT，则标记将是显式的，如果标记环境是 IMPLICIT 或 AUTOMATIC，则标记将是隐式的。自动标记环境与 IMPLICIT 标记环境基本相同，除了自动为 SEQUENCE 和 CHOICE 类型的成员分配唯一标记。

请注意，在上面的示例中，MyType2 的三个组件都是可选的。在 BER/CER/DER 中，解码器将根据编码标签（显然最好是唯一的）知道存在什么组件。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-25T16:43:28.590

ASN.1 BER 和 DER 使用 ASN.1 TAGS 来明确识别编码流中的某些组件。ASN.1 标签有 4 类：UNIVERSAL、APPLICATION、PRIVATE 和 context-specific。[0] 是特定于上下文的标记，因为它前面没有标记类关键字。UNIVERSAL 为 ASN.1 中的内置类型保留。大多数情况下，您会看到特定于上下文的标签，以消除包含 OPTIONAL 元素的 SEQUENCE 中的潜在歧义。如果您知道您收到的两件不是可选的，一件接一件，即使它们的标签相同，您也知道哪个是哪个。但是，如果第一个是可选的，则两者必须具有不同的标签，否则如果编码中只有一个，您将无法分辨您收到的是哪一个。

今天大多数情况下，ASN.1 规范使用“自动标签”，因此您不必担心消息中的这种歧义消歧，因为 SEQUENCE、SET 和 CHOICE 的组件将自动获取以 [0] 开头的特定于上下文的标签，[ 1]、[2] 等。

[您可以在http://www.oss.com/asn1/resources/books-whitepapers-pubs/asn1-books.html](http://www.oss.com/asn1/resources/books-whitepapers-pubs/asn1-books.html)找到有关 ASN.1 标签的更多信息，其中有两本可免费下载的书籍。

另一个优秀的资源是[http://asn1-playground.oss.com](http://asn1-playground.oss.com)，您可以在其中尝试在线编译器和编码器/解码器中具有不同标签的 ASN.1 规范的变体。在那里您可以看到标签更改对编码的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-13T00:40:14.670

[0] 是特定于上下文的标记类型，这意味着要弄清楚它赋予字段（如果设置了“Constructed”标志）或数据值（如果未设置“Constructed”标志）它包装的含义；你必须知道它出现在什么上下文中。

此外，您还需要知道发送方和接收方在 DER 流中交换什么样的对象，即。“ASN.1 模块”。

假设他们正在交换证书签名请求，并且 [0] 显示为根 SEQUENCE 内的 SEQUENCE 内的第 4 个字段：

```
SEQUENCE
    SEQUENCE
        INTEGER 0
        SEQUENCE { ... }
        SEQUENCE { ... }
        [0] { ... }
    }
} 
```

然后根据定义证书签名请求的 DER 内容的 RFC2968，定义 ASN.1 模块的附录 A，该特定字段的含义被偷偷地定义为“属性”和“应该设置 Constructed 标志”：

```
 attributes    [0] Attributes{{ CRIAttributes }} 
```

您还可以通过查看根序列定义（第 4 节：“顶级类型 CertificationRequest ")，找到其中的 CertificationRequestInfo 位置，并找到“属性”项在 CertificationRequestInfo 中的位置，最后查看它是如何标记的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-25T19:16:37.080

我终于解决了这个问题，并认为我可以为任何仍然试图理解这一点的人提供一些见解。在我的示例中，与上述示例一样，我使用的是 DER 格式的 X.509 证书。我遇到了“A0 03 02 01 02”序列，但无法弄清楚它是如何转换为版本号 2 的。因此，如果您遇到同样的问题，这就是它的工作原理。

A0 告诉你它是一个“上下文特定”字段，一个“构造”标签，类型值为 0x00。立即，特定于上下文的内容告诉您不要对 DER/BER 使用普通类型字段。相反，鉴于这是一个 X.509 证书，类型值在 RFC 5280, p 116 中被标记。在那里您将看到四个字段，它们的标记分别为 [0]、[1]、[2] 和 [3 ]，分别代表“version”、“issuerUniqueID”、“subjectUniqueID”和“extension”。所以在这种情况下，A0 的值告诉您这是 X.509 上下文特定字段之一，特别是“版本”类型。这会处理“A0”值。

正如您所料，“03”值只是您的长度。

由于这被识别为“构造”，因此数据应表示正常的 DER/BER 对象。“02 01 02”是您要查找的实际版本号，以整数表示。“02”是整数的标准BER编码，“01”是你的长度，“02”是你的值，或者在这种情况下，你的版本号。

因此，鉴于 X.509 定义了 4 种特定于上下文的类型，您应该期望在证书中的任何位置看到“A0”、“A1”、“A2”和“A3”。希望上面提供的信息现在更有意义，并帮助您更好地理解这些标记所代表的含义。

# jenkins - Jenkins 上游 - 下游工作 - 安静期

> ID：15035352
> 
> 赞同：3
> 
> 时间：2013-02-23T00:07:59.563
> 
> 标签：jenkins

**Jenkins 场景详细信息：**
=======================
- Jenkins 中构建执行器的数量（主/从）：**3**
- 上游作业：**USJob**和此作业可以在任何构建执行器上运行
- DownStream 作业：**DSJob**和此作业有120秒的**安静期****+**它仅与特定的构建执行器上运行有关。

*   USJob 在构建步骤中有这个：**echo "Happy Birthday James"** ，完成这项工作需要 5 秒
*   DSJob 在构建步骤中有这个：**回显“詹姆斯邦德已死”** ，完成这项工作需要 5 秒

现在，假设我们运行**USJob** (parent/UpStream job) **5 次**，这将 ---> 调用***DSJob*** (child/DownStream job) 5 次，那么，我想要的是：

1.  Jenkins 应该运行 USJob 5 次，因此在每次调用期间调用 DSJob 子作业。
2.  DSJob 不会运行 DSJob（一旦从 USJob 调用），DSJob 将处于空闲状态或排队等待“120 秒”（即设置为静默期）。

3.  现在，如果我们看到这种情况，UPJob 将调用 DSJob 5 次，并且 DSJob 将在队列中等待，直到满足该相当时期。因此，一旦安静期结束，Jenkins 将启动 DSJob。

**我的问题：** 我想查看的是我可以在 DSJob（子作业）中设置什么设置/选项，以便 DSJob 只运行一次，而不关心它被调用了多少次。 ***换句话说***：如果詹姆斯邦德/某人死了***一次***，他就不能再死了！……**明白了**！但是有人可以在他的生日那天祝他生日快乐 N # 次。

-- 这个概念类似于在 TFS 中以累积方式运行持续集成 (CI) 构建（Team Foundation Server - 在构建定义的 TRIGGER 部分内），即一旦源代码控制发生更改就运行构建，但将所有更改累积到源代码控制，直到正在运行的 CI 构建正在进行，一旦完成，下一个 CI 构建将选择开发人员完成的所有其他源代码控制更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:48:06.590

我同意，因为这是一种选择，我最终会走这条路。感谢分享埃尔达。我们基本上不想通过将文件放入工作区来使用，因为我们在任何机器上的任何可用从属设备上运行作业，并且不想在所有机器/从属设备都可以访问的中央 NAS 上创建文件。另外，我不想让子/下游作业寻找父/上游作业，如果它以 X 状态完成，然后运行它。

我这样做的方式是在 DSJob 上使用 Quiet period 设置为 120 秒 + 从 USJob 或 DSJob 的任何其他父级调用“DSJob”（您可以选择直接/通过属性文件传递/或不传递参数）+ 发现它工作正常。当我安排多个 USJob 时，第一次出现的 USJob 称为 DSJob，它等待了 120 秒（或 X 秒你想要的），然后一旦 USJob 第一个作业完成，第二个 USJob 开始并完成，它再次调用 DSJob 但这并没有不要将新的 DSJob 放入队列中，尽管它只是碰到了剩余的 X 号。工作 DSJob 从 X 开始运行的秒数 - 无论到目前为止花费了多少时间......再次回到 X 秒，这很好。我还使用了“Build Blocker 插件”，但我只是用它来在逻辑上明确我的观点，因为事情就像我想要使用 DSJob 上设置的“安静期”概念一样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T12:34:26.087

如果我理解正确，您不希望在 5 次（快速）USJob 执行后发生 5 次 DSJob 执行。您宁愿希望 DSJob从 USJob的*最后一个*触发器执行*一次吗？*受SCM的[静默期功能的启发？](http://jenkins-ci.org/content/quiet-period-feature)

 *如果是这样的话，那么我面临同样的问题。我所做的是编写一个 Groovy 脚本，作为 USJob 的最后一步执行。首先，它获取所有下游作业的列表（在您的情况下将简单地返回 DSJob）。如果您不需要它动态工作，您可以跳过此步骤。如果这些作业中的任何一个已排队，则脚本会将它们从队列中删除。然后 USJob 将正常触发 DSJob（再次）。

最终结果是，如果 USJob 在 120 秒的时间范围内触发了多次，DSJob 只会触发一次。只有来自 USJob 的最后一个触发器才会生效。

我是一个 Groovy 新手，所以我的脚本是我在网上找到的其他脚本的杂乱组合。我知道有更好的方法来做到这一点。如果这是您正在寻找的解决方案，我将发布（凌乱的）脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T06:14:33.247

我建议以下想法：根本不要将美国和 DS 工作联系起来。让美国的工作做好它的事情并完成。让 DS 作业检查某些内容以决定是否开始。

要实现这一点，请使用[Script Trigger Plugin](https://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin)。我将它用于类似的需求，并且效果很好！您可以完全控制触发并使用编写良好的脚本，您可以应用您想要的任何逻辑，让您完全控制触发和流程。

请注意 - 评估构建的脚本不必保存为外部文件。它也可以写入作业的配置中。还支持 Groovy 脚本。

希望这可以帮助。*

# api - 用户交互后如何存储第 3 方 API 数据？

> ID：15035355
> 
> 赞同：1
> 
> 时间：2013-02-23T00:08:19.923
> 
> 标签：api, database-design, architecture

我目前正在进行的项目正在消耗大量通过 API 公开的第三方信息。这些数据集不断变化，每个数据集都有数百万个条目。

用户将表示他们最喜欢的数据，并在需要时调用该数据。一个示例可能是用户想要将库存级别“添加书签”到他们的“稍后分析”列表中。

我目前的想法是，在搜索用户等操作期间，会看到来自第三方的“实时”数据。如果他们标记了他们感兴趣的东西，我会将这些数据复制到我控制的数据库中。该信息的后续视图来自我的数据库，而不是第 3 方，因为第 3 方条目可能会更改（或完全不存在）。

这是良好的 API 实践吗？搜索时将哪些对象键发送到面向客户端的应用程序？第三方钥匙？或者我是否预处理搜索结果并确定我在本地拥有哪些项目，从而在这些实例中返回本地键？或者我是否完全抽象了第 3 方源并为每个返回的项目生成唯一的本地密钥，然后如果有人保存 [这似乎真的很重，tho]，然后使用？或者我是否推迟该处理并在某人为某物添加书签后查找本地是否存在某物？

# jquery - 单击按钮时取消选中复选框并隐藏父级

> ID：15035357
> 
> 赞同：3
> 
> 时间：2013-02-23T00:08:26.277
> 
> 标签：jquery, html, twitter-bootstrap

我写的下面的代码应该有一行复选框，当被选中时，在单独的 div 中显示该复选框的标签。

```
 <div class="span3" id="bill">
          <label class="checkbox">
            <input type="checkbox" value="" id="item1" checked="checked">
            Item1 - Price
          </label>
          <label class="checkbox">
            <input type="checkbox" value="" id="item2" checked="checked">
            Item2 - Price
          </label>
        </div>
        <div class="span3" id="currBill">
          <label id="item1_lb">
            Item1 - Price
          </label>
          <label id="item2_lb">
            Item2 - Price
          </label>
        </div>
      </div>
      <div class="row-fluid">
        <button class="btn" id="pay">Pay</button>
      </div> 
```

以下js负责在选择/取消选择时显示标签（这很草率，所有复选框稍后都将从数据库中填写，这只是我的问题的一般概念的一些地方保存代码。）

这两个功能似乎都不起作用，点击功能至少会触发，但实际上并没有隐藏任何东西。有任何想法吗？

```
$(function() {
  $('input:checkbox').bind('change',(function() {
    $('#'+ithis.id+'_lb').toggle($(this).is(':checked'));
  });

  $("#pay").click(function() {
    $("#bill input[type=checkbox]").each(function() {
      if($(this).checked)
      {
        $(this).parent().hide();
        $(this).checked = false;
      }
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:11:14.653

`$(this).checked`尝试访问 jQuery 集合属性`checked`。`.prop`您可以通过该方法更改元素属性。

```
if ($(this).prop('checked')) {
    ...
    $(this).prop('checked', false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:25:24.417

您应该使用浏览器控制台检查错误（按`Ctrl+Shift+J`）。您有以下错误：

*   在第 2 行`('change',(function()`中，删除`function`关键字之前的括号。
*   `ithis.id`应该是`this.id`。
*   相反，检查`if($(this).checked)`应该像你首先做的那样：`if($(this).is(':checked'))`
*   要取消选择复选框，请使用`$(this).prop('checked', false);`

**在这里小提琴：http:** [//jsfiddle.net/qKPGd/](http://jsfiddle.net/qKPGd/)

# doxygen - 从 doxygen 获取类层次结构点文件

> ID：15035361
> 
> 赞同：5
> 
> 时间：2013-02-23T00:09:11.313
> 
> 标签：doxygen, graphviz, dot

Doxygen 使用 graphviz 为我的项目生成了一个很好的类层次结构。但我现在想在该图中添加手动注释。为此，我需要编辑 DOT 文件。但是 doxygen 似乎没有在任何地方输出该文件。它只输出一个`.map`文件和`.png`图像。

如何让 doxygen 给我点文件？我检查了他们的文档，但找不到任何方法来实现它。doxygen 肯定必须在某个阶段生成点文件吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T10:44:46.933

如果您在 doxygen 的配置文件中设置`DOT_CLEANUP`为`NO`，doxygen 将不会删除 .dot 文件。

# jquery - 使用 Jquery 和 Ajax 将 div 元素的内容保存在文件中

> ID：15035362
> 
> 赞同：0
> 
> 时间：2013-02-23T00:09:13.860
> 
> 标签：jquery, ajax

我有一个 php 文档，在文档 PHP 中，表格正在从数据库中加载记录，我在 php 文档的末尾添加 jquery 代码以将“table:eq(9)”内容保存到 HTML 文件中

我已经尝试过了，但没有奏效：

```
var bufferId = $("table:eq(9)").html();
$.ajax({
    type: "POST",
    url: "saver.html",
    data: {
        id: bufferId
    },
    dataType: "html",
    success: function (data) {
        alert("ok");
    }
}); 
```

# javascript - 流星和把手#each 迭代对象

> ID：15035363
> 
> 赞同：21
> 
> 时间：2013-02-23T00:09:19.537
> 
> 标签：javascript, meteor, handlebars.js

我想将把手`#each`与不是数组的对象一起使用。

我怎么做？我需要它仍然可以使用流星的特殊功能`#each`。

我的对象是以下形式：

```
{
  john: "hello",
  bob: "hi there"
} 
```

我试图得到这样的输出：

```
<div>hello</div>
<div>hi there</div> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-23T01:02:49.260

您需要在 js 中使用帮助器来帮助车把理解您的对象：

添加到您的客户端js

```
Template.registerHelper('arrayify',function(obj){
    var result = [];
    for (var key in obj) result.push({name:key,value:obj[key]});
    return result;
}); 
```

`{{name}}`并在您的 html 中使用（您也可以使用带有 的键）：

```
{{#each arrayify myobject}}
   <div title="hover here {{name}}">{{value}}</div>
{{/each}} 
```

`myobject`来自您的模板：

```
Template.templatename.helpers({
    myobject : function() { 
      return { john:"hello", bob: "hi there" } 
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-10T05:13:35.620

您可以使用下划线 _.map 将对象转换为数组

html:

```
<template name="test">
    {{#each person}}
       <div>{{greeting}}</div>
    {{/each}}
</template> 
```

js：

```
Template.test.helpers({
    person : function () { 
        return _.map(object, function(val,key){return {name: key, greeting: val}});
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-24T01:38:46.797

现在发现这一点的人应该注意，在撰写本文时，在 Meteor 中声明 Handlebars 助手的正确方法是使用 UI.registerHelper 方法，而不是使用 Handlebars.registerHelper。所以上面的助手现在应该是这样的：

```
UI.registerHelper("arrayify", function(obj){
    result = [];
    for (var key in obj){
        result.push({name:key,value:obj[key]});
    }
    return result;
}); 
```

# android - 从列表中获取 itemid

> ID：15035366
> 
> 赞同：-1
> 
> 时间：2013-02-23T00:09:43.630
> 
> 标签：android, gridview, baseadapter

我正在开发墙纸应用程序我实现了此代码以便从资产 [加载图像从资产文件夹加载我的图片](https://stackoverflow.com/questions/8373251/gallery-shows-blank-when-loading-images-from-assets-folder)

它工作得很好，但我从列表中获取 itemid 以使用 id 在全屏活动或设置壁纸中显示这些图像之一时遇到问题

```
public long getItemId(int position) {

    return position ;
} 
```

这是我的代码

```
public class ImageAdapter extends BaseAdapter{
 private Context mContext;
private List<String> list;
private AssetManager assetManager;

public ImageAdapter(Context c, List<String> list) {
    mContext = c;
   this.list = list;

}

public int getCount() {

    return list.size();
}

public Object getItem(int position) {

    return position;
}

public long getItemId(int position) {

    return position;
}

public View getView(int position, View view, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);

    try {

        InputStream is = mContext.getAssets().open(list.get(position));
        Bitmap bm = BitmapFactory.decodeStream(is);
        imageView.setImageBitmap(bm);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(80, 80));
    } catch (IOException e) {

        e.printStackTrace();
    }
    // TODO Auto-generated method stub
    return imageView;
}

public class Gs3Wallpaper extends Activity {
private  ImageButton Gs3Button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    GridView gridView = (GridView) findViewById(R.id.GridView1);
    try {
        gridView.setAdapter(new ImageAdapter(this ,getImage()));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    public List<String> getImage()throws IOException {
    AssetManager assetManager = getAssets();
    String[] files = assetManager.list("gallary");
    List<String> list = new ArrayList<String>();
    for (String it : files) {
        list.add("gallary"+File.separator + it);        

    }
    return list; 
```

我不知道如何从我尝试使用 list.get(position) 的列表中获取 id 但它返回字符串而不是 int 所以我不能将它传递给 setImageResource 例如

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:58:49.813

`HashMap`您可以做的是在`getView()`设置列表项时设置图像或图像的路径，具体取决于您的操作方式。使用`position`for the`key`和 image as the`value`

```
public class MyClass
{
    HashMap<String, Bitmap> imageMap = new HashMap<String, Bitmap>();
... 
```

然后将其设置在您的`getView()`

```
public View getView(int position, View view, ViewGroup parent) {
ImageView imageView = new ImageView(mContext);

try {

    InputStream is = mContext.getAssets().open(list.get(position));
    Bitmap bm = BitmapFactory.decodeStream(is);
    imageView.setImageBitmap(bm);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(80, 80));

    String posString = String.valueOf(position);
    imageMap.put(posString, bm);
} catch (IOException e) {
....
} 
```

像这样的东西应该适合你。然后只需使用位置将位图从`HashMap`

# css - “-fx-shape”与“-fx-background-image”兼容吗？

> ID：15035367
> 
> 赞同：9
> 
> 时间：2013-02-23T00:10:05.503
> 
> 标签：css, svg, javafx-2

我想将纹理应用于自定义形状。我认为这会起作用：

```
.myTextureShape {
-fx-shape: "M0 0 L0 50 L25 25 L50 50 L50 0 Z";
-fx-background-image: url("resources/texture_bg.png");
-fx-background-repeat: repeat;
} 
```

但事实并非如此！我得到了正确的形状，但没有纹理。我所有其他区域都已正确纹理化，因此我知道语法是正确的。我想这是因为它们默认是矩形的。

如果我改用以下样式：

```
.myTextureShape {
 -fx-shape: "M0 0 L0 50 L25 25 L50 50 L50 0 Z";
 -fx-background-color: red;
} 
```

然后我得到一个正确的红色背景。

如果两个属性不兼容，如何将纹理应用于自定义 SVG 路径形状？

PS：我的纹理 PNG 文件是一个 10*10 的小栅格，我重复它来填充我的区域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:37:08.277

As far as I am concerned `-fx-shape` and `-fx-background-image` don't work together. JavaFX CSS offers a lot of styling options ... however there are some limitations and some things are only possible with programming. JavaFX CSS uses `impl_setShape()` to coarse the Region class to the defined shape (which is market as deprecated in the api but you can still try it out in javafx 2.2 - which I am using at the moment). Adding the background image ignores the shape and fills the whole pane/region, the same happens if you use addChildren to add ImageView objects into it. So - the css string will not translate into the result you would like.

So I can think of at least 2 ways of applying a pattern to a custom SVGPath shape. The one I would use is done with ImagePattern. First build the shape like this

```
SVGPath shape = new SVGPath();
shape.setContent("M0 0 L0 50 L25 25 L50 50 L50 0 Z"); 
```

or using shape builder

```
SVGPath shape = SVGPathBuilder.create()
    .content("M0 0 L0 50 L25 25 L50 50 L50 0 Z")
    .build(); 
```

and then set the image pattern as fill

```
Image img = new Image("myjavafxapp/resources/texture_bg.png");
shape.setFill(new ImagePattern(img,0,0,10,10,false)); 
```

An alternative would use clipping (adding a custom shape clip to a pane with -fx-background-image set in the css style), which would look somewhat like this

```
Pane test = new Pane(); 
test.setStyle(" -fx-background-image: url(\"myjavafxapp/res/index.jpeg\");");
SVGPath shape = new SVGPath();
shape.setContent("M0 0 L0 50 L25 25 L50 50 L50 0 Z");
test.setClip(shape); 
```

One of these should do the trick - you get your shape with the textured background. This is the equivalent to what you would expect from a Region or Pane class with style

```
.myTextureShape {
    -fx-shape: "M0 0 L0 50 L25 25 L50 50 L50 0 Z";
    -fx-scale-shape: false;
    -fx-background-image: url("myjavafxapp/resources/texture_bg.png");
    -fx-background-repeat: repeat; 
} 
```

So the SVGPath shape is like all Shape classes nonresizable, in contrast to Region/Pane, this is why I set here the `-fx-scale-shape` attribute to false. The way you had it was with the default setting - which is setting it to true - which makes the shape fill out the whole parent object ... from which I guess that this would be also your desired result. ... there are now again multiple ways of making the shape scale to the parent object.

I got it to work using Group to embed the shape and with a method translating the group (the image size needs to be adjusted in the ImagePattern, so that the texture doesn't scale with the shape). I'm adding a tiny working app, which I used to see on the above example if I remember everything correctly. (if you would like the shape to scale proportionally, you use the same scale factor instead of scalex and sclaey in the addScale method)

```
 package myjavafxapp;

    import javafx.application.Application;
    import javafx.application.Platform;
    import javafx.beans.value.ChangeListener;
    import javafx.beans.value.ObservableValue;
    import javafx.scene.Group;
    import javafx.scene.Node;
    import javafx.scene.Scene;
    import javafx.scene.layout.Pane;
    import javafx.scene.layout.StackPane;
    import javafx.scene.shape.SVGPath;
    import javafx.scene.shape.SVGPathBuilder;
    import javafx.scene.image.Image;
    import javafx.scene.paint.*;
    import javafx.scene.transform.Scale;
    import javafx.scene.transform.Translate;
    import javafx.stage.Stage;
    /**
     * @author martint
     */
    public class MyJavaFXApp extends Application {

            private final static String svg = "M0 0 L0 50 L25 25 L50 50 L50 0 Z";
            private SVGPath shape;
            private Image img;
            private Pane resizePane;
            private Group shapeGroup;
            private Node content;

        @Override
        public void start(final Stage primaryStage) {

            //build the SVGPath shape
            shape = SVGPathBuilder.create().content(svg).build();
            img = new Image("myjavafxapp/res/index.jpeg");
            resizePane = new Pane();
            shapeGroup = new Group();
            resizePane.getChildren().add(shapeGroup);

            StackPane root = new StackPane();
            root.getChildren().add(resizePane);

            Scene scene = new Scene(root, 200, 200); 
            primaryStage.setScene(scene);
            primaryStage.show();
            //fill node content
            content = nodeCont();
            shapeGroup.getChildren().add(content);
            //resizing listening
            resizePane.widthProperty().addListener(new ChangeListener<Number>(){
                            @Override
                            public void changed(ObservableValue<? extends Number> observable, Number oldValue, Number newValue) {
                                    addScaling();
                            }});
            resizePane.heightProperty().addListener(new ChangeListener<Number>(){
                            @Override
                            public void changed(ObservableValue<? extends Number> observable, Number oldValue, Number newValue) {
                                    addScaling();
                            }});
            Platform.runLater(new Runnable() {          
                            @Override
                            public void run() {
                                    addScaling();
                            }
                    });
            }
            private Node nodeCont() {
                    Group cont = new Group();
                    cont.getChildren().add(shape);
                    return cont;
            }
            private void addScaling() {
                    shapeGroup.getTransforms().clear();           
                    //shape boundary
                    double cx = content.getBoundsInParent().getWidth();
                    double cy = content.getBoundsInParent().getHeight();
                    //resizePane boundary
                    double px = resizePane.getWidth();
                    double py = resizePane.getHeight();
                    //if pane set
                    if (px > 0.0 && py > 0.0) {
                            //scale
                            double scalex = px/cx;
                            double scaley = py/cy;
                            //center
                            double centerx = 0.5 * (px - cx*scalex);
                            double centery = 0.5 * (py - cy*scaley);            
                            //transform
                            shapeGroup.getTransforms().add(new Translate(centerx, centery));
                            shapeGroup.getTransforms().add(new Scale(scalex, scaley));
                            shape.setFill(new ImagePattern(img,0,0,10/scalex,10/scaley,false));
                    }
            }
            public static void main(String[] args) {
                    launch(args);
            }

    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T20:09:22.770

无法通过 css 将背景纹理应用于自定义形状是 JavaFX 2.2 (Java 7) 的[平台错误](http://javafx-jira.kenai.com/browse/RT-28825)。

在 Java 8 中，平台错误已得到修复。

示例 CSS：

```
/** 
 * file textured-shape.css
 * place in same directory as TexturedShape.java and ensure build system copies 
 * this file to the build output directory.
 */
.textured-shape {
  /** (a square with the bottom triangle chunk taken out of it) */
  -fx-shape: "M0 0 L0 50 L25 25 L50 50 L50 0 Z";
  -fx-background-image: url('http://icons.iconarchive.com/icons/tooschee/misc/128/Present-icon.png');
  /** 
   * Image license:  
   *   CC Attribution-Noncommercial 3.0 http://creativecommons.org/licenses/by-nc/3.0/
   *   Buy commercial license here: http://tooschee.com/portfolio?worksCategory=icons
   */
} 
```

示例应用程序：

```
import static javafx.application.Application.launch;
import javafx.application.*;
import javafx.scene.Scene;
import javafx.scene.layout.Pane;
import javafx.stage.Stage;

public class TexturedShape extends Application {
  @Override public void start(Stage stage) {
    Pane pane = new Pane();
    pane.setPrefSize(128, 128);
    pane.getStyleClass().add("textured-shape");

    Scene scene = new Scene(pane);
    scene.getStylesheets().add(
      getClass().getResource("textured-shape.css").toExternalForm()
    );
    stage.setScene(scene);
    stage.show();
  }

  public static void main(String[] args) { launch(args); }
} 
```

在 Java 7 上运行示例代码，形状未应用于背景纹理：

![java7示例](../Images/173b9059f8fe00d0f487366c13e955ca.png)

[在Java 8b80](http://jdk8.java.net/download.html)上运行相同的示例代码，将形状应用于背景纹理：

![java8sample](../Images/f9d4c5fc3c64a1f68aa9ba3a75bc4340.png)

# css - 在所有元素上放置 CSS 过渡的成本

> ID：15035368
> 
> 赞同：8
> 
> 时间：2013-02-23T00:10:10.123
> 
> 标签：css, css-transitions

我经常发现自己为很多东西添加了过渡，而且它们通常是相同的过渡。做类似的事情的性能成本是多少

```
* { 
   transition: all 200ms ease; //with prefixes, of course
} 
```

并且只是将 a 设置`transition-property: none;`为您特别不想转换的元素？它会少于在整个代码中添加多个转换语句所需的代码量吗？

编辑：对于那些想知道它所应用的 DOM 的复杂性的人，假设它是一个复杂的 web-app-type DOM。我问的原因是因为页面上的许多元素不会移动，因此不需要过渡。我很好奇这是否相关并且仅仅将过渡分配给所有元素对性能有害。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-16T19:50:48.517

当它们不转换时，它们不会消耗额外的资源，因此在渲染后它是相同的，假设您已经删除了所有不必要的转换。

# c - C 中的 asm“‘mov’ 的内存引用过多”

> ID：15035379
> 
> 赞同：11
> 
> 时间：2013-02-23T00:11:20.943
> 
> 标签：c, assembly

我看过关于同样错误的帖子，但我仍然收到错误：

```
 too many memory references for `mov'
 junk `hCPUIDmov buffer' after expression 
```

...这是代码（mingw编译器/ C::B）：

```
 #include iostream

    using namespace std;

    union aregister
    {
        int theint;
        unsigned bits[32];
    };

    union tonibbles
    {
        int integer;
        short parts[2];
    };

    void GetSerial()
    {
        int part1,part2,part3;
        aregister issupported;
        int buffer;

        __asm(
            "mov %eax, 01h"
            "CPUID"
            "mov buffer, edx"
        );//do the cpuid, move the edx (feature set register) to "buffer"

        issupported.theint = buffer;
        if(issupported.bits[18])//it is supported
        {
            __asm(
                "mov part1, eax"
                "mov %eax, 03h"
                "CPUID"
            );//move the first part into "part1" and call cpuid with the next subfunction to get
            //the next 64 bits

            __asm(
                "mov part2, edx"
                "mov part3, ecx"
            );//now we have all the 96 bits of the serial number

            tonibbles serial[3];//to split it up into two nibbles

            serial[0].integer = part1;//first part
            serial[1].integer = part2;//second
            serial[2].integer = part3;//third
        }
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-23T00:22:30.610

您的汇编代码[格式不](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#toc3)适合 gcc。

首先，gcc 使用 AT&T 语法（编辑：[默认情况下，感谢 nrz](https://stackoverflow.com/questions/5397677/gcc-intel-syntax-inline-assembly)），因此它需要`%`为每个寄存器引用添加一个`$`，为立即操作数添加一个。目标操作数始终在*右侧*。

其次，您需要为`\n\t`新行传递行分隔符（例如 ）。由于 gcc 将您的字符串直接传递给汇编器，因此它需要特定的语法。

您通常应该尽量减少您的汇编程序，因为它可能会导致优化器出现问题。最小化所需汇编程序的最简单方法可能是将 cpuid 指令分解为一个函数，然后重用它。

```
void cpuid(int32_t *peax, int32_t *pebx, int32_t *pecx, int32_t *pedx)
{
    __asm(
         "CPUID"
          /* All outputs (eax, ebx, ecx, edx) */
        : "=a"(*peax), "=b"(*pebx), "=c"(*pecx), "=d"(*pedx)   
          /* All inputs (eax) */
        : "a"(*peax)                                           
    );
} 
```

然后只需调用 using;

```
int a=1, b, c, d;

cpuid(&a, &b, &c, &d); 
```

另一种可能更优雅的方法是[使用宏来完成](http://newbiz.github.com/cpp/2010/12/20/Playing-with-cpuid.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-23T00:35:04.117

1.  由于 C 的工作方式，

    ```
    __asm(
        "mov %eax, 01h"
        "CPUID"
        "mov buffer, edx"
    ); 
    ```

    相当于

    ```
    __asm("mov %eax, 01h" "CPUID" "mov buffer, edx"); 
    ```

    这相当于

    ```
    __asm("mov %eax, 01hCPUIDmov buffer, edx"); 
    ```

    这不是你想要的。

2.  AT&T 语法（GAS 的默认）将目标寄存器放在末尾。

3.  AT&T 语法要求立即数以 $ 为前缀。

4.  你不能像那样引用局部变量；您需要将它们作为操作数传递。

[维基百科的文章](http://en.wikipedia.org/wiki/CPUID#Accessing_the_id_from_other_languages)给出了一个返回 eax 的工作示例。

以下代码段可能涵盖了您的用例（我对 GCC 内联汇编或 CPUID 并不十分熟悉）：

```
int eax, ebx, ecx, edx;
eax = 1;
__asm( "cpuid"
     : "+a" (eax), "+b" (ebx), "+c" (ecx), "+d" (edx));
buffer = edx 
```

# php - 我不能回显变量，但我可以在函数中使用它？

> ID：15035381
> 
> 赞同：0
> 
> 时间：2013-02-23T00:11:31.023
> 
> 标签：php, html, mysql, variables, echo

我正在开发一个通过 PHP 和 html 表单将表格转换为数组的系统。在这样做时，我必须将用户 ID 回显到表上的隐藏元素中。这是我难过的地方：

```
 $sqlb = mysql_query('SELECT * FROM table_row WHERE tid = 1');
    $numb = 0;
    while($rowsres = mysql_fetch_array($sqlb))
    {

    ....

    echo('<td style="text-align: center;"><input type="checkbox" value="'.$rowres['rid'].'" name="list[]" /></td>');

echo $rowres['rid'];

echo('<td>'.getData(1, $rowsres['rid'], 1).' '.getData(1, $rowsres['rid'], 2).'</td>');
    ....

    } 
```

稍微解释一下代码和发生了什么：

1.  我首先遍历我的数据库。
2.  第一个....是我对结果进行一些简单的过滤
3.  然后问题开始了。第一个回声是我试图放置行 ID 的隐藏值。

该值不会写入。我试过打印，回声，我试过把它分配给其他变量，但无论出于什么原因它都不会写。

让事情变得更加混乱：当我在第三个 echo 语句中使用 SAME 变量时，它起作用了！该函数 getData 只是访问数据库并返回用户的名字和姓氏，它正在执行此操作。

我非常困惑，以前从未遇到过这样的问题。

其他事情：当我转储 $rowres 时，它返回 null，与 $rowres['rid'] 相同更正每个用户的名字和姓氏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:24:39.033

您正在使用两个不同的变量名称：

`$rowsres`是你在循环中分配的东西以及你传入的东西`getData`。

`$rowres`（请注意只有一个's'）是您要回显的内容。这是一个完全独立的变量，没有分配任何内容。

# mysql - 如何限制连接查询？

> ID：15035388
> 
> 赞同：0
> 
> 时间：2013-02-23T00:12:46.047
> 
> 标签：mysql, phpmyadmin

我正在尝试导出一个客户列表，每个客户只有一个地址簿条目。

```
SELECT c.customers_id, c.customers_firstname, c.customers_lastname,
ab.address_book_id, ab.customers_id, ab.entry_company, ab.entry_firstname, ab.entry_lastname, ab.entry_street_address
FROM customers c
INNER JOIN address_book ab
ON c.customers_id=ab.customers_id
WHERE 1=1
ORDER BY c.customers_id ASC 
```

我究竟做错了什么？

* * *

编辑：我有超过 1 个地址簿条目，因为有些客户有 2 个保存的地址。但我只需要一个用于出口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:20:04.357

创建一个只返回一个客户 ID 和一个 address_book_id 的表，如下所示

```
SELECT c.customers_id, c.customers_firstname, c.customers_lastname,
ab.address_book_id, ab.customers_id, ab.entry_company, ab.entry_firstname,     ab.entry_lastname, ab.entry_street_address
FROM customers c
 INNER JOIN address_book ab ON c.customers_id=ab.customers_id
 INNER JOIN
 (SELECT customers_id, MAX(address_book_id) AS AddressBookID
  FROM address_book
  GROUP BY customers_id) AS NewAddressBook ON c.customers_id = NewAddressBook.customers_id AND ab.address_book_id = NewAddressBook.AddressBookID
ORDER BY c.customers_id ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:20:12.033

我认为这应该可行——它返回 MIN(address_book_id):

```
SELECT c.customers_id, c.customers_firstname, c.customers_lastname,
    ab.address_book_id, ab.customers_id, ab.entry_company, ab.entry_firstname, ab.entry_lastname,   ab.entry_street_address
FROM customers c
    INNER JOIN address_book ab
        ON c.customers_id=ab.customers_id
    INNER JOIN (
        SELECT MIN(address_book_id) min_address_book_id, customers_id
        FROM address_book 
        GROUP BY customers_id
    ) m ON ab.customers_id = m.customers_id AND 
        ab.address_book_id = m.min_address_book_id
ORDER BY c.customers_id ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T00:20:51.260

在 MySQL 中，您可以执行以下操作：

```
SELECT c.customers_id, c.customers_firstname, c.customers_lastname,
ab.address_book_id, ab.customers_id, ab.entry_company, ab.entry_firstname, ab.entry_lastname, ab.entry_street_address
FROM customers c
INNER JOIN address_book ab
ON c.customers_id=ab.customers_id
group by c.customers_id
ORDER BY c.customers_id ASC 
```

这会为所有其他字段提取*任意*值。对于 from 的字段`customer`，值很好，因为它们在所有行上都是相同的。对于来自 的字段`address_book`，选择任意值。

理论上，这可以混合来自不同行的值。尽管这在实践中不会发生，但也不能保证。因此，这是一种使用 MySQL 中名为 Hidden Columns 的功能来做你想做的事情的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T00:21:14.880

**更新：**

由于检索哪些地址簿条目对您无关紧要，因此此查询将获取具有最大值的条目`address_book_id`：

```
SELECT c.customers_id, 
       c.customers_firstname, 
       c.customers_lastname,
       ab.address_book_id,
       ab.customers_id, 
       ab.entry_company, 
       ab.entry_firstname,
       ab.entry_lastname,
       ab.entry_street_address 
  FROM customers c LEFT JOIN 
       address_book ab ON c.customers_id=ab.customers_id AND
       ab.address_book_id = (SELECT MAX(address_book_id) 
                              FROM address_book 
                             WHERE customers_id = c.customers_id)
 ORDER BY c.customers_id; 
```

理论上，您可以让客户没有关联的通讯录条目。`LEFT JOIN`将允许您拉动它们。如果您不想要这种行为，只需更改`LEFT JOIN`为`INNER JOIN`.

**这是工作的[sqlfiddle](http://sqlfiddle.com/#!2/0bcce/1)**

**原始答案**

这是我的第一个答案，它可以在 MySql 中工作，尽管它可以从不同的行中获取任意值。请参阅@Gordon Linoff 的回答中的解释。

```
SELECT c.customers_id, 
       c.customers_firstname, 
       c.customers_lastname,
       MAX(ab.address_book_id),
       MAX(ab.customers_id), 
       MAX(ab.entry_company), 
       MAX(ab.entry_firstname),
       MAX(ab.entry_lastname),
       MAX(ab.entry_street_address)
FROM customers c INNER JOIN 
     address_book ON c.customers_id=ab.customers_id
GROUP BY c.customers_id, c.customers_firstname, c.customers_lastname,
ORDER BY c.customers_id 
```

# list - 如何在 sml/nj 中非递归地展平列表？

> ID：15035389
> 
> 赞同：3
> 
> 时间：2013-02-23T00:12:47.937
> 
> 标签：list, sml, smlnj

```
fun flat [] = []   
  | flat (l::ls) = l @ flat ls; 
```

这将使列表变平。

有没有办法非递归地做同样的操作？也许与HOFs？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:26:46.433

您可以使用高阶函数[List.foldr](http://www.standardml.org/Basis/list.html)：

```
fun flat xs = List.foldr (fn (x, acc) => x @ acc) [] xs 
```

正如@Andreas 所说，上面的功能可以缩短：

```
fun flat xs = List.foldr op@ [] xs 
```

尽管您想`flat`作为练习来实现，但标准库中的[List.concat](http://www.standardml.org/Basis/list.html#SIG%3aLIST.concat%3aVAL)做的事情完全相同。

# linux - 从 x86 asm 访问 linux 中的命令行参数的问题

> ID：15035394
> 
> 赞同：0
> 
> 时间：2013-02-23T00:13:30.843
> 
> 标签：linux, assembly, x86, command-line-arguments

我有一个基本的 asm 程序来检查字符串是否是数字。我正在添加代码以从命令行争论中读取，让它保持段错误。

如果我读的是正确的，这应该得到传递给程序的参数数量，它应该存储在 0(%ebp) 中。我究竟做错了什么？

完整的代码可以在这里找到：http://pastebin.com/kGV2Mxx4[问题](http://pastebin.com/kGV2Mxx4) 是_start的前3-5行。

在查看 lscpu 的输出时，我有一个 i868 cpu。虽然，它说它可以在 32 位和 64 位下运行。我正在运行 32 位 linux (Arch linux x86)

我解决了这个问题。我做了 2 次弹出，一次绕过程序名称，下一次获得第一个参数。更新的代码可以在这里找到：http: [//pastebin.com/xewyeHYf](http://pastebin.com/xewyeHYf)

有人可以告诉我为什么我不能只做以下事情：

```
pushl 8(%ebp) 
```

或者

```
movl 8(%ebp), %eax 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:50:55.520

这是我写的关于这个主题的一个小教程： [NASM - Linux Getting command line parameters](http://www.dreamincode.net/forums/topic/285550-nasm-linux-getting-command-line-parameters/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:10:14.527

你可以这样写：

```
_start:
b1: movl    0(%ebp), %eax
    cmpl    $1, %eax
    je      load_msg
b2:    pushl    8(%ebp)
b4:    call    check 
```

要了解为什么您之前的尝试不起作用，请绘制堆栈图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:17:57.420

编译一个小型 C 程序来执行您想要执行的操作，然后将其编译为汇编语言以准确了解如何访问参数。x86_32 代码看起来一点也不像上面的代码，顺便说一句：

```
int main(int argc, char *argv[])
{
  return argv[1][0];
} 
```

给出（是的，有些是多余的堆栈簿记，但无论如何）：

```
 .file   "tst.c"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    movl    12(%ebp), %eax
    addl    $4, %eax
    movl    (%eax), %eax
    movzbl  (%eax), %eax
    movsbl  %al, %eax
    popl    %ebp
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (GNU) 4.7.2 20121109 (Red Hat 4.7.2-8)"
    .section    .note.GNU-stack,"",@progbits 
```

# tcl - Tcl while incr 逻辑

> ID：15035396
> 
> 赞同：1
> 
> 时间：2013-02-23T00:13:35.050
> 
> 标签：tcl

我想从 1 数到 10 但跳过 5。这仅在我将 incr 放在下面的开头时才有效。为什么？我认为 incr after else 将增加 a 到 2 3 4 等然后跳过 5 并进入 10。但它停在 5 并且永远不会继续。

这行得通

```
set a 1
set b 10

while {$a < $b} {
    incr a
    if {$a == 5} {
        continue
    } else {
        puts $a
    } 
} 
```

这不起作用

```
while {$a < $b} {
    if {$a == 5} {
        continue
    } else {
        puts $a
    } 
    incr a
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:56:36.033

想想 continue 命令的逻辑：它跳过循环的其余部分，从头开始。当 a == 5 时，if 语句为真，因此您跳过循环的其余部分，这也跳过了`incr`命令。到循环的顶部，a 仍然是 5，然后您再次跳过循环的其余部分。实际上，您正在进入一个无限循环。解决它的一种方法是不使用 continue 命令：

```
set a 1
set b 10
while {$a <= $b} {
    if {$a != 5} {
        puts $a
    }
    incr a
} 
```

顺便说一句，第一种方法不太奏效：它跳过数字 1 并从 2 开始。

# powershell - 如何使用 PowerShell 将命令提示符的输出转换为变量

> ID：15035403
> 
> 赞同：2
> 
> 时间：2013-02-23T00:14:28.500
> 
> 标签：powershell, command-prompt, powershell-3.0

我正在使用 PowerShell v3.0 启动一个新的 cmd.exe 进程，然后在其中加载 Visual Studio 命令提示符以执行构建，如下所示：

```
Start-Process cmd.exe -ArgumentList $cmdArgumentsToRunMsBuildInVsCommandPrompt -WindowStyle $windowStyle -Wait 
```

这可行，它会打开一个新的命令提示符窗口，我可以看到构建发生，然后在构建完成时命令提示符窗口关闭。我希望能够获取写入命令提示符窗口的文本并将其存储在变量中，以检查构建是否通过。我尝试使用它，但它不起作用；$buildOutput 变量为空：

```
Start-Process cmd.exe -ArgumentList $cmdArgumentsToRunMsBuildInVsCommandPrompt -WindowStyle $windowStyle -Wait -OutVariable buildOutput
Write-Host "Build output = $buildOutput" 
```

这是有道理的，因为 cmd.exe 进程没有返回任何文本；它只是将它写入它自己的窗口。有没有办法让我能够将该文本存储在一个变量中以供原始 powershell 脚本使用？我知道我可以向 MsBuild 提供一个参数，让它将构建日志写入文件，但我正在寻找一种不涉及写入日志文件并且稍后必须删除它的解决方案。

任何建议表示赞赏。谢谢！

<# 编辑 #>

感谢您迄今为止的所有回复！一个流行的建议是直接调用 MsBuild.exe 而不使用 cmd.exe。我需要通过 cmd.exe 的原因是，如果直接从 MsBuild.exe 调用某些项目（例如 XNA 项目），则无法成功构建。相反，我需要从 Visual Studio 命令提示符调用 MsBuild.exe，以便（我假设）设置所有必需的环境变量。我想我可以直接调用 VS 命令提示符，但它也会有与调用 cmd.exe 相同的问题。如果我找不到 VS 命令提示符，我会回退到直接调用 MsBuild.exe，所以仍然感谢这些答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T14:52:55.603

您始终可以通过以下方式捕获控制台程序的输出：

```
$output = [string](nuget.exe) 
```

这里我使用了 nuget（$output 将包含可用的命令列表），但您当然可以使用带有适当参数的 msbuild.exe。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T17:46:24.800

我已经使用我的问题的第一条评论中的建议解决了我的问题，即将构建输出写入日志文件，使用它，然后删除它。如果他们需要，这允许我仍然向用户显示带有构建进度的 cmd 窗口，并在构建完成后检查构建输出。它还允许我在另一个进程中运行构建，因此如果我们不希望我们的脚本在继续执行之前等待构建完成，我们可以使用 PassThru。

我创建了一个 Invoke-MsBuild powershell 模块，以使使用 MsBuild 构建变得轻而易举，同时为附加功能提供大量参数（如果构建成功或失败则返回，可以显示/隐藏构建窗口，可以等待/不等待构建完成，可以自动显示失败构建的构建日志等）。您可以[从我的博客查看和下载脚本](http://blog.danskingdom.com/invoke-msbuild-powershell-module/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T12:15:48.917

```
$process = New-Object System.Diagnostics.Process;
$process.StartInfo.UseShellExecute = $false;
$process.StartInfo.RedirectStandardOutput = $true;
$process.StartInfo.FileName = "cmd.exe";
$process.StartInfo.Arguments = $cmdArgumentsToRunMsBuildInVsCommandPrompt;
$process.Start();
$outputStream = $process.StandardOutput;
$outputStream.ReadToEnd(); 
```

你也可以重定向`StandardError`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-14T01:59:04.220

编辑：我最终使用了@David Brabant 的回答

我遇到了这个问题并创建了一个回显函数

```
function echo()
{
    $input
} 
```

这让我这样做

```
$output = &"cmd.exe" $args | echo 
```

# python - 从创建的列表中绘图

> ID：15035409
> 
> 赞同：0
> 
> 时间：2013-02-23T00:14:55.610
> 
> 标签：python, python-2.7, matplotlib

考虑代码：

```
a = [1, 2, 3, 4]
for i in range(len(a)):

   for j in range(i+1, len(a)):
       dd21 = (a[i]-a[j])
       j = j + 1
       if i != j and dd21 !=0:
             print i, j, dd21
fig = plt.figure()
ax = fig.add_subplot(111)

ax.hist(dd21)
plt.tight_layout()

plt.tight_layout()
plt.show()

output = IndexError: invalid index to scalar variable. 
```

我必须更改我的 dd21 列表，以便它可以在直方图中绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:27:32.097

您似乎打算存储`dd21`您在循环中计算的所有值。`dd21`但是，目前您每次都覆盖。

这应该使它工作，允许您绘制直方图：

```
a = [1, 2, 3, 4]
dd21 = [] # initialize empty list
for i in range(len(a)):

   for j in range(i+1, len(a)):
       dd21.append(a[i]-a[j])
       # ... continue as before 
```

# html - 有没有办法在一个母版页中使用多个 CSS 样式表？

> ID：15035418
> 
> 赞同：0
> 
> 时间：2013-02-23T00:15:59.713
> 
> 标签：html, css

我正在创建一个 Web 应用程序并编写了一个 CSS 样式表以应用于所有颜色、布局、定位等。总共大约 800 行。

我想为用户提供选择配色方案偏好的选项；目前，这意味着我的项目中有 6 个 CSS 文件副本，每个副本仅具有不同的颜色属性（大约 15 或 20 行）来表示 6 个不同的配色方案选项。

这似乎是很多繁琐的重复；所有其他 CSS 属性在每个副本中保持不变。

有没有办法将颜色属性分离到单独的 CSS 样式表中，以便与一般 CSS 样式表一起应用于页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:32:24.953

实现目标的一种方法是提取每个受颜色影响的 CSS 元素，并将其放入一个选择器中，例如：

```
p, li, #whatever, .someClassInfluencedByColoring{
  color: #[yourColor];
} 
```

您可以将此声明放入一个 CSS 文件（例如 color.css）中，然后在主 CSS 文件中使用如下导入语句：

```
@import url("color.css"); 
```

另一种方法是使用[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)并使用变量，您可以在每个样式表中定义一次颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:48:30.327

制作颜色样式表。假设您的主要课程有一个名为

```
Main.css

.example{
float:right;
width:100px;
height:auto;
} 
```

并且您希望使用用户指定的配色方案对其应用颜色。

像这样制作较小的配色方案

```
Color1.css

.example{
color:orange;
}

Color2.css

.example{
color:red;
} 
```

在主索引页面中将如下所示：

```
<head>
<link rel="stylesheet" type="text/css" href="main.css" />

    <?php
    //user get color scheme from db query
    $color = //user color variable
    if($color == 1){
    echo '<link rel="stylesheet" type="text/css" href="color1.css" />';
    }elseif($color == 2){
    echo '<link rel="stylesheet" type="text/css" href="color2.css" />';
    }
    ?>
</head> 
```

这是我能想到的唯一方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T00:58:33.157

只需使用

```
var bleh = $('body');
function changeToBlue() {
    bleh.css("background","blue");
} 
```

# c++ - 在新 OCV 2.4.3 中配置相机属性

> ID：15035420
> 
> 赞同：2
> 
> 时间：2013-02-23T00:16:45.660
> 
> 标签：c++, opencv, webcam

我可能只是在谷歌上搜索错了，但我找不到在新的 Open CV 中更改相机属性的方法（读取函数）。我需要禁用相机的**自动曝光**和**自动增益**。
这甚至可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-02T10:10:25.460

这是一个老问题，但我想为此添加一个解决方案。

opencv 调用底层 v4l 方法来查询帧、设置/获取相机属性等。问题是，调用不完整。同样出于某种原因，该库调用 v4l 方法而不是 v4l2 方法。类似的问题[在这里](http://opencv-users.1802565.n2.nabble.com/setting-exposure-on-linux-CV-CAP-PROP-EXPOSURE-and-v4l-td7584521.html)。看来是通过修改opencv代码来解决的。

我还检查了 opencv 是否可以设置 v4l2 支持的属性，例如“手动曝光”、“或自动曝光优先级”。它不能。我玩了 v4l2 来解决这个问题：

```
#include <libv4l2.h>
#include <linux/videodev2.h>
#include <sys/ioctl.h>
#include <fcntl.h>

// open capture
int descriptor = v4l2_open("/dev/video0", O_RDWR);

// manual exposure control
v4l2_control c;
c.id = V4L2_CID_EXPOSURE_AUTO;
c.value = V4L2_EXPOSURE_MANUAL;
if(v4l2_ioctl(descriptor, VIDIOC_S_CTRL, &c) == 0)
    cout << "success";

// auto priority control
c.id = V4L2_CID_EXPOSURE_AUTO_PRIORITY;
c.value = 0;
if(v4l2_ioctl(descriptor, VIDIOC_S_CTRL, &c) == 0)
    cout << "success"; 
```

然后，您可以使用 opencv。

相机控制的完整列表在[这里](http://www.linuxtv.org/downloads/legacy/video4linux/API/V4L2_API/spec-single/v4l2.html#camera-controls)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T10:50:56.913

所以，有你的 VideoCapture：

```
VideoCapture cap(0); 
```

现在您可以尝试设置或获取属性：

```
//may work or not, highly driver/impl specific.
cap.set(CV_CAP_PROP_AUTO_EXPOSURE, 0 ); 
double exposure = cap.get(CV_CAP_PROP_AUTO_EXPOSURE); 
```

有时您甚至可以通过以下方式访问驱动程序配置对话框：

```
cap.set(CV_CAP_PROP_SETTINGS , 1 ); 
```

这些常数在 highgui_c.h 中，大约 l 333

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-11T06:01:47.717

您可以使用 OpenCV API 通过[VideoCapture::Set()](http://docs.opencv.org/2.4/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-set)来执行此操作。以下是如何在 Python 中手动设置曝光的示例：

```
import cv2

cap = cv2.VideoCapture(0)
cap.set(cv2.CAP_PROP_EXPOSURE,-4)

while(True):
    ret, frame = cap.read()

    cv2.imshow('frame',frame)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows() 
```

这是我对每帧曝光时间的注释。虽然我相信它们是特定于相机的，但它们会给你一个好主意。

```
-1 640 毫秒
-2 320 毫秒
-3 160 毫秒
-4 80 毫秒
-5 40 毫秒
-6 20 毫秒
-7 10 毫秒
-8 5 毫秒
-9 2.5 毫秒
-10 1.25 毫秒
-11 650 微秒
-12 312 微秒
-13 150 微秒

```

相同的功能具有 GAIN 和许多其他值的设置，尽管我没有尝试过。

更多讨论 [在 OpenCV 中设置手动曝光](http://www.principiaprogramatica.com/2017/06/11/setting-manual-exposure-in-opencv/)

# php - Magento 1.7 重新索引不适用于产品价格

> ID：15035422
> 
> 赞同：0
> 
> 时间：2013-02-23T00:16:55.250
> 
> 标签：php, mysql, magento

我无法从 magento 管理面板重新索引产品价格

```
Fatal error: Uncaught exception 'Zend_Db_Statement_Exception' with message 'SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '7bec5e01e314f80cce1226696b6b29edc' for key 'PRIMARY'' in /usr/local/psa/admin/plib/Zend/Db/Statement/Pdo.php:238 Stack trace: #0 /usr/local/psa/admin/plib/Zend/Db/Statement.php(283): Zend_Db_Statement_Pdo->_execute(Array) #1 /usr/local/psa/admin/plib/Zend/Db/Adapter/Abstract.php(433): Zend_Db_Statement->execute(Array) #2 /usr/local/psa/admin/plib/Zend/Db/Adapter/Pdo/Abstract.php(230): Zend_Db_Adapter_Abstract->query('INSERT INTO `se...', Array) #3 /usr/local/psa/admin/plib/Zend/Db/Adapter/Abstract.php(511): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO `se...', Array) #4 /usr/local/psa/admin/plib/Zend/Db/Table/Abstract.php(924): Zend_Db_Adapter_Abstract->insert('sessions', Array) #5 /usr/local/psa/admin/plib/Zend/Session/SaveHandler/DbTable.php(354): Zend_Db_Table_Abstract->insert(Array) #6 /usr/local/psa/admin/plib/CommonPanel/Session/SaveHandler.php(48): Zend_Session_SaveH in /usr/local/psa/admin/plib/Zend/Db/Statement/Pdo.php on line 238 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T08:19:25.237

这个错误是针对哪个表的？导致错误的查询是什么？

我刚刚修复了一个客户的垃圾场。当您找到您时，是否引发了错误以及查询是什么，您就会发现问题。

`catalog_product_entity_tier_price`我找到了已删除的等级价格。

# php - 我怎样才能使这个 php 代码片段浮动：就在我的页脚中，但保留在页面的正文中？

> ID：15035427
> 
> 赞同：0
> 
> 时间：2013-02-23T00:17:31.197
> 
> 标签：php, wordpress

我想让这些社交图标**浮动：就**在我的页脚中。但是当我在关闭 PHP 标记之前尝试**这个？>：**

```
<span style="float:right;"><?php if ( function_exists('cn_social_icon') ) echo 
cn_social_icon(); ?></span> 
```

它给了我：

```
Parse error: syntax error, unexpected '<' in /home/jpweber/public_html/footer.php 
on line 33 
```

如果我把它**放在**结束 PHP 标记下面，?>，它可以工作，但出现在页面主体**之外**，在屏幕的右下角（在蓝色区域）。

我希望它在页面正文中，但我想让它向右浮动。我可以让它显示在正文中的唯一方法是在结束 php 标记上方使用它：

```
if ( function_exists('cn_social_icon') ) echo cn_social_icon(); 
```

**在结束语的**下方？>。**但它不会**浮动：对**。 ![在此处输入图像描述](../Images/4f43d050fc9cfc247e410143c53307a3.png)**

 **所以我必须在页脚的某处实现一些代码，目前就是这个，你在图片中看到的，其中**if ( function_exists('cn_social_icon') ) echo cn_social_icon();** 只是混在那里：

```
<?php
/**
 * Builds the footer structure.
 *
 * @package Catalyst
 */

global $catalyst_layout_id;
if ( function_exists('cn_social_icon') ) echo cn_social_icon();
if( !is_page_template( 'template-blank-body.php' ) )
{
catalyst_hook_before_before_footer( $catalyst_layout_id . '_catalyst_hook_before_before_footer' );
catalyst_hook_before_footer( $catalyst_layout_id . '_catalyst_hook_before_footer' );
catalyst_hook_after_before_footer( $catalyst_layout_id . '_catalyst_hook_after_before_footer' );
catalyst_hook_footer( $catalyst_layout_id . '_catalyst_hook_footer' );

catalyst_hook_before_after_footer( $catalyst_layout_id . '_catalyst_hook_before_after_footer' );
catalyst_hook_after_footer( $catalyst_layout_id . '_catalyst_hook_after_footer' );
catalyst_hook_after_after_footer( $catalyst_layout_id . '_catalyst_hook_after_after_footer' );
}
wp_footer();

catalyst_hook_after_html( $catalyst_layout_id . '_catalyst_hook_after_html' );

/**
 * Un-comment the below function to list all items currently hooked into a WordPress or Catalyst hook.
 */
//catalyst_list_hooked();
/**
 * Un-comment the below function to display the number of database queries during the WordPress execution.
 */
//echo get_num_queries();
?>

</body>

</html> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:27:23.840

不确定您正在寻找哪个钩子，但请使用以下格式尝试所有钩子：

代替：

```
if ( function_exists('cn_social_icon') ) echo cn_social_icon(); 
```

和：

```
function add_social_icons() {
    if ( function_exists('cn_social_icon') ) echo cn_social_icon();
}
add_action($catalyst_id.'_catalyst_hook_before_before_footer', 'add_social_icons'); 
```**

# c - 在 /sys 文件系统中创建条目

> ID：15035429
> 
> 赞同：3
> 
> 时间：2013-02-23T00:17:33.330
> 
> 标签：c, linux, filesystems

我正在尝试在 /sys/devices/platform 中添加一些文件来测试我的程序，但看起来 sysfs 不可编辑。有没有办法可以添加/伪造 /sys 条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:29:14.187

如果您想在其中实际添加文件，您可能可以使用 linux 内核模块，但我建议您不要这样做来测试程序。

`chroot`可以用来制作一个假文件系统来运行你的代码，但这可能过于复杂。

我建议使用一个`SYS_PATH`值，这样你就可以重新编译你的程序进行测试并让它在别处查找。

```
#ifdef DEBUG
#define SYS_PATH "/home/user/myfakesys"
#else
#define SYS_PATH "/sys"
#endif 
```

...

```
FILE *f = fopen(SYS_PATH "/devices/platform/...", "wb"); 
```

# svn - TortoiseSVN - 通过 ssh 导出

> ID：15035431
> 
> 赞同：0
> 
> 时间：2013-02-23T00:18:18.257
> 
> 标签：svn, ssh, tortoisesvn

我有登录名/密码，我需要通过 ssh+svn// 协议访问 svn。

我在 Windows 上使用 tortoiseSVN，导出命令来下载文件。

我有几个问题：

1.  这就是我所做的一切吗？只需导出，输入登录名/密码，就可以了？没有腻子，钥匙等？
2.  为什么单击导出后，在输入任何身份验证数据之前，我收到错误消息，关于缺少隧道，找不到指定文件？这是配置问题，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:32:04.343

在 TortoiseSVN 站点上[使用 SSH 保护 Svnserve ，或者](http://tortoisesvn.net/ssh_howto.html)[通过 PuTTY 在 Windows 上通过 SSH 使用屏幕截图保护 TortoiseSVN](http://www.vectorns.com/blog/technical-articles/1-tortoisesvn-over-ssh-on-windows-via-putty/)

这两篇文章都是关于私钥验证的，如果是用户密码，你只需要修改 Putty 会话的设置

# key - 使用私钥/公钥的 EPub 加密

> ID：15035433
> 
> 赞同：0
> 
> 时间：2013-02-23T00:18:23.267
> 
> 标签：key, public, epub, encryption

我正在尝试使用私钥加密整个 EPub 的 XHTML / HTML 文件，然后在 META-INF/encrpytion.xml 中附加一个公钥，以便用户能够以这种方式阅读这本书。基于许多不相关的标准，私钥/公钥对是唯一的。

以某种方式可以使用这种加密方案吗？如果是，我应该使用什么 encryption.xml 结构？

或者，如果这是不可能的，我是否可以“混淆”实际的 XHTML 书籍文件，就像字体在 EPub 包中“混淆”一样？

谢谢，我对此很陌生，并且没有关于如何制作自己的 EPub 书籍加密的明确规范。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:25:58.050

首先，非常松散地说，当您使用私钥加密时，它是数字签名，而不是加密。然后，接收者可以通过使用公钥“解密”来验证消息没有被更改。实际上，听起来您打算加密数据，因此您正在向后使用密钥。

其次，非对称加密用于密钥传输，而不是数据加密。正确的做法是使用对称算法加密文件，然后使用非对称算法的公钥加密对称密钥。更好的是，找到一个 CMS (S/MIME) 库来为您做这件事。即使正确应用这样的库也很难做到正确。您绝对不应该尝试从加密原语中实现相同的功能。

最后，如果您正在尝试创建某种 DRM 系统，您不妨放弃。版权保护是一个法律问题，而不是技术问题。你不能把东西锁起来，然后把钥匙交给小偷。

# ruby-on-rails - 如何在不初始化 Rails 的情况下从 schema.rb 创建数据库？

> ID：15035442
> 
> 赞同：20
> 
> 时间：2013-02-23T00:19:40.717
> 
> 标签：ruby-on-rails, ruby

我正在尝试从 schema.rb 创建我的所有表

我使用了命令：“rake db:schema:load”

但是，这失败了，因为在我的一个初始化程序中，它引用了一个显然不存在的模型/表（因为数据库为空）

我可以注释掉这些行，然后再次运行 schema:load，但还有其他选择吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-23T00:29:29.433

可能最快的方法是将有问题的初始化程序移动到应用程序外部的临时目录，然后运行您的模式加载。但是，如果这不起作用，或者由于某种原因不是一个选项，您总是可以通过创建一个简单的 rails 应用程序来执行架构加载来解决这个问题：

1.  创建一个新的 Rails 应用程序：`rails new (app)-fixer`
2.  将您的`gemfile`（除非有特定例外）复制到修复程序应用程序。
3.  将您的`database.yml`配置复制到修复程序应用程序。
4.  将您的`schema.rb`文件复制到修复程序应用程序。
5.  根据您的应用程序的需要执行所有适当的“捆绑安装”命令。
6.  然后运行`"rake db:drop db:create db:schema:load"`

这将根据您当前的模式从头开始构建一个新数据库。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T03:41:38.183

您可以在初始化程序中添加对表存在的检查。

```
if TheModel.table_exists?
  // do something with the model
end 
```

# android - 更改日历事件的提醒会更改事件 ID，而不是提醒 ID

> ID：15035444
> 
> 赞同：1
> 
> 时间：2013-02-23T00:19:47.567
> 
> 标签：android, android-contentprovider, android-calendar

我正在尝试编写一些代码来判断事件的提醒是否已更改（添加或删除），但我遇到了一个奇怪的事件。而不是删除或更改提醒，似乎正在删除并重新添加事件！我的代码不正确吗？或者这是真正发生的事情？

要对此进行测试，您需要：

1.  创建带有提醒的事件

2.  同步您的模拟器后单击按钮

3.  移除活动提醒

4.  等到该更改同步到您的模拟器，然后再次单击该按钮

**JAVA代码**

```
package com.example.remindertest;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;

import android.app.Activity;
import android.content.ContentResolver;
import android.content.ContentUris;
import android.database.Cursor;
import android.net.Uri;
import android.provider.CalendarContract.CalendarAlerts;
import android.provider.CalendarContract.Events;
import android.provider.CalendarContract.Instances;
import android.provider.CalendarContract.Reminders;
import android.util.Log;
import android.view.View;

public class ReminderActivity extends Activity
{
    final static public String TAG = "ReminderActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Add button
        setContentView(R.layout.reminder_activity);
        Log.d(TAG, "Started");
    }

    public void onClick(View v)
    {
        Cursor cursor = getContentResolver().query(
            Reminders.CONTENT_URI,
            null, null, null, null
        );

        String str = "";

        /*
        * Some crappy code to test this
        */
        while ( cursor.moveToNext())
        {
            int eventId = cursor.getInt(cursor.getColumnIndex(Reminders.EVENT_ID));
            Cursor eCursor = getContentResolver().query(
                Events.CONTENT_URI,
                new String[] { Events._ID, Events.TITLE },
                "_id = ?", new String[] {"" + eventId}, ( String ) null);

            eCursor.moveToNext();
            String title = eCursor.getString(eCursor.getColumnIndex(Events.TITLE));

            str += eventId + " = " + title + " = " +
                cursor.getInt(cursor.getColumnIndex(Reminders._ID)) + " = " +
                cursor.getInt(cursor.getColumnIndex(Reminders.METHOD)) + " = " +
                cursor.getLong(cursor.getColumnIndex(Reminders.MINUTES)) + "\n";
        }

        Log.d(TAG, str);
    }
} 
```

**布局 XML**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  tools:context=".ReminderActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="98dp"
    android:onClick="onClick"
    android:text="Button" />

</RelativeLayout> 
```

**清单 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.remindertest"
  android:versionCode="1"
  android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.READ_CALENDAR"/>
<uses-permission android:name="android.permission.WRITE_CALENDAR"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
    android:name="com.example.remindertest.ReminderActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T13:44:54.913

不，您的代码是正确的。在我的 6 台设备上发生的情况完全相同 - 当您编辑它时，事件会更改它的 id（可能是重新创建）。顺便说一句，当您更改活动的时间、标题、地点或任何其他细节时也会发生这种情况——不仅仅是提醒。有趣的是，它并不总是发生——只是有时。但通常 2-3 次编辑事件足以模拟这种行为。

我不太清楚事件频繁更改其 ID 的原因，但基于此我会说，该事件的 ID 不应该用作唯一标识符。

# string - 字符串排序 - std::set 还是 std::vector？

> ID：15035447
> 
> 赞同：1
> 
> 时间：2013-02-23T00:20:01.570
> 
> 标签：string, sorting, vector, stl, set

我将有大约 1000 个需要按字母顺序排序的字符串。

从我读过的内容来看，std::set 已排序。std::vector 不是。std::set 似乎是一个更简单的解决方案，但如果我要使用 std::vector，我需要做的就是使用 std::sort 来按字母顺序排列字符串。

我的应用程序可能对性能至关重要，也可能不重要，因此性能不一定是这里的问题（现在），但是由于我需要遍历容器以将字符串写入文件，因此我已经阅读了遍历std::set 比遍历 std::vector 慢一点。

我知道这可能无关紧要，但我想听听你们在这种情况下会选择哪一个。

哪个 stl 容器最适合我的需要？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T13:31:39.837

std::vector 一次性调用 std::sort 似乎是做你所追求的最简单的方法，从计算上讲。std::set 通过键提供动态查找，您在这里并不真正需要，如果您必须处理重复项，事情会变得更加复杂。

确保使用 reserve 为向量预分配内存，因为在这种情况下您提前知道大小。这可以防止在添加到向量时重新分配内存（非常昂贵）。

此外，如果您使用 [] 表示法而不是 push_back()，您可能会节省一些时间，避免对 push_back() 进行边界检查，但这确实是学术性的和非实质性的，甚至可能不适用于编译器优化。:-)

# ios - 这个字符串是什么格式的？

> ID：15035451
> 
> 赞同：4
> 
> 时间：2013-02-23T00:20:28.547
> 
> 标签：ios, iphone, encoding, format, dataformat

我试图弄清楚 iPhone 游戏应用程序正在发送什么数据。它使用[`GKTurnBasedMatch`](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html#//apple_ref/occ/cl/GKTurnBasedMatch)框架。

我已经捕获了它的一些数据包，并且发现了一条有希望的 XML 消息，其中该字符串作为`game-state`键的值：

```
eyJHYW1lR3VpZCI6ImJkMTIwYWZiLTNjNjQtNGU3Ni05MzdhLWZlMTYyOGUxZGI1NyIsIkdhbWVEYXRhIjoiQWdFVXdxbHA4aUxSdlZ3UWZXK1d0T0hpbkZXalVheHQ1MXlsM01MQ04ydytMZ2Q5aVNPeGJSRnZ2dzZnMnVTcjJSZ1hUY3lxYzlZWHVmZFZGZTFndVM0QjEwZXZcLzRCRXBPNGZQUHFlR0RadDk4WkxKdG83SXZQQkFQVGcyNmh0ZmRMTFB2cm1uM0o0b3NFWmtcL1lkeXNYeDBnMmtMNUdVZWtYXC9US24rYURVTlpJbzk4MGZLTkRwVnU0ays5cDdPOER3RVRCUU8rOVZhdEhPSUh1eDBFR0dUaUtwVGRSS0tEWUFkb3c1bmtnZ2FOakwrYVU4Q1FudXJIajZcLzNXSzZPbzNvVVpRR3o4VU50RFB2QzFvYm90TTNnRHBjdDNaZ250WDZlWkxweDVvc3VpUnN4OFNWcWFpR29hTTg5VE8xeG84ZXRXb0hXQXFmYU13eG5mblJ2TFprVTVxRkZnTGljS0U5dUZDZUg5UCs0cDlXMFFQejg5TXlzaGF5dFdDdFJxOEZHYkg1c3dJeW85UmZ2Q1Y0V1daTE9CWDF1OWVZTXZGVHFkMStmMFwvdm5VSVJRUFp0NlNGY3pHaXhPWGtGaWpPeXNPMEtHT2F2M2JWK1F4UXEzSG95SUwrVjVBQTIyRmExWjB0Mjhub2F4ME1vUUF2T2ZaejZWSlwvY0dyNFNneWZQeCtEdnVVQU9lOFJycDNrK3YxZTlhXC94Vk43WGdKRG1vNzRBUkxcL1wveU5hMGx1MWxqRXN2NnVrVUJcLzZRdkJnZGdsSG1tOGhQa0VLTzJ0M0NveXBHM0FBaEUzVlVHcmNpbm9mTE11OTI0MDFpWmFXWUV5MTJOXC9XOXFKcFNtR2lsaXVYVmNITnA5Wm15U1hIQ05lOEVwNVhqSk1jZ3h4ZnRFRkEwaXlEQkM3b2tJVjdXNmc4ZHZDNGdNcVFnMXNSRjlXTGJxU0l3S3BKM1BGYm51QlZNb2xodDQzSTJLXC9tU2JWRU1VRnhyME5mNitDZnlNYm5PZ2ZOMG9wblFXXC9rNm5RQitkXC8yeVVWY2poVXBxb0RpR05IRFIydldcL09CZXJiQ3JUSmtZK3V3aFZWcDVSNlBqWHdPVXRNek1BenduU0tETGFNK1BIMitvZTY1WXRVZmNRM0p6Wkc5bUNpNk50ZmhZWUNscWtJcHpsNVYrRE1MUXdLR294eXhJVnhcL1F3U094Q3lvTjNGdm90RlhBU0ZEWXVGb1R0ckdHSHlrWlFIYzljYks4K2REUXAycVhHK3VoYSt5VEhseElRSjJUcTNmMU5zY3cyQXlcL3dncitVekdEV0lseVdiYWQzWXNTTVhOVUJucFNpaHYydkxEbEF3MFArUnVsOTMyUzFMeEttSzRKWnRvY08zVlp0UXlpUUpIcklhNVdzUTRvb3JnVHQrc0ZFemxqQytOeXRGQ3h1dlpcL042ZUVTUFROTDZsMFJHZnk4c0RuSnBiR1VvS0lsXC9zMFdnTFRxelp6cXY5bXJGTkpcL2c2WXYwNTNzc1BhSWJkbW1JVG4rcnpmeUhwTnJrVkFKN0NPdGFxd2VnbmRnN3FuMDhidGJjMHF5Mm5rZU5wVkRtejBINGY0eFVXMDROSjYrR0R3QnNoTVNqNUV4YVJVWXBza3F0XC9mQmZcL2t0cGFkTk9nWkt2dmNoOGJUTXBcL2J2TTVtdnptc0NOUUxsalM1cEZwRFI0RDVHQzk3RzZzMnMxNExiNE1Sd05oaXpKMCs1cEc0M1BId29tK1Vna1ZTcG9Td083Qk9HeGQ4VVhGZENCV0hmbmhpanY1SEptajJLcm84N3Fhc0tNT00xS3NOWEtEREduXC9DQmRJUDBqVFJ4a0p5MjFUYUswT2ptYktFbU43RHNWRjF0U09DTU1rU2FXRlJqNWNVZ3lzVzhSbzNvcnRzOEltQW1HWWVoVzNCTHZYbUdVcUljdXNHSUxVbzhuOW5vK2tjQnlSSzhIU3poVXlPclpBQndPcW5wd1FzZ084YVBjc2hyQW1zZWtqSmpLb2N1NkMxUEluWGhqMzJ4aWhhTVJnVGxwNFVnTjlkNXA2WGVwZ1A4SkZLOURmdjUrRDN2RnBsRFJvZnpLTmVucEVsV3QyM2xKTGg1NzlLUmtCWnpBdlJwOSthWDVEdHh1bDR4NnhZR2pBR04xUUk0Q2hNbXl3SVR3clJqQUNwSHlkK0tsQmNMQWpUNmNZZFhsUldkTW52SEpyV1RFMVUzaTZISkRZakNlbXhGMVg1MWVqR1BVSzZLOE9UKzJzYzNcL2tmQmJjM0I4VUJZMitJSWNGYTd1YWVFMFc1RWJDZnA0c004UzVWZ1dUM3VsdUI2aUJOQ2UyRFJrYnF2VU9IWmVJbVNmODd5VktnSysxMW5OVUNXNmtnMjhVTTdIdysyU1E3T1NXeEI3dXV3Q2tKejc0M0I4cVBlOVJQejJxWGxodGdMTmZTSGpCaWJXSytVVTVcL0UzU1l1dDIrdnJLSDNWS0NvMTNTbCtEQlBMVGFhSHhkUEhLR0pQdEdUMVZobERnMmRlTGlLZVkwaEdPMGhzSUFGWTVEYVJuU0xwWWd5Qmw1cEI3Mmt6MVJmXC9IWGhvRkE4bU04aHhLY3JSKzM4eXZ6YmwzeXZmRzdOTzFFeitSamF3ZVBaT1J1VWRBYkVIMmdUK01Gb3BPSStZR1lYV1BGVjhLVG1JbW5wYzBlNGo3NiszT3c0eGFhQ3dONGd0c3JSbnNiNEdpU2I2TVRoNDJwR2JpOEtMbk53bXJTRVM2NCtWMFoyVkQ1bFwvUUNIV1o2QnppVFhsdUZhYUdCMGVBeUxPWlQzMXF6bTZGMDBhNnVPNEY4M0c4dWUwa1poT2RBNlRIdXU0TVpDVHF0VEpkM3p2WmU4bTdtaG5SNlFhM2tOd3BNZW9lcjY4ZGxiaGRUYmtpVFNYODh1Z3VvNVlcL1IyemRhQ0NYTERuZUFjZWRmNmlDWGFuXC9ONFZsekRhYVRLdUxoY2hnM2NFMllFWGtieGxSN29INWN1Y3hWUnhQTG1VZEo1TFFrdVwvZ0Nwc3pGVExTUUJnVUdkQjdzams4cE1hZUthOGl4K0RXYWVoTjE1ZFBVd1c3NEJVWG5ucTMxdG1NdnJ6M2xUTXF5OGF6NFM5ajRDd1pubjI0QzR5XC9RNTI1emN3djM2RFJyMVpcL2ZyTWl1Zk9tVGNSSjFlYzJ0XC85NU1HWDZITERqUW5waytoajBEaG5xNGw5WHAyblRtZElYUktMM2p1bTNJZFwva21EbkkwTFptQzBTRStsU1doQWI4aXFIaXl2MWxQTGJpYkkrUm15TlVNdXpcL0lxMStiMCtiTlNVRXpYTXg1MDJHK2hJcHhyNWFYQ0ZOYktTWEpXZDlIdGpHNHBFQU94RENQc1BMTjF4bjhkZWZLQkdkcytuV3ZBa3EyZXlOM2NxM0sxU3ByaHZLWXd4enJcL0FEVTlYTXMyVDVkS3F1bzdlclBHaHp2NU5BTUVSUWNnWGNkRjRaZ2NOZ3pmYTBLOGd3aEpsOGR4ZU02cjl5VEROcWQ0YkpQNEgyXC8rczI2eXlwVkRnaUhQVWRxMGxUanFlN1NtbTREWG41VWthV0JHSnBJRDdNWDk5d29hN2N0YnNhOXM4OGVFSWJ0YmRHWDAzMkRxS1wvcUZrSXdRU0I4RXZhTzNJcVlnQ0I5YXBSQlp4ck5mVk9kMGlUNVNYckFseFF6QW1Jd0dxaGtRZVpkVm92M3BJREk4QkxpdCs4eVNQUGMyejQrTjJvM3F2VlJneVk4WmY5clNtdHM1M0tURmxNVzZTM0tIQ2pDc3FWN1poVkZGNDdwN0F4NWV5R05rVFFWUFROZ2xlRWNyeEVXRWszYUQ1SzlLTjM0UEQ1dGd6eDd5dGM0TUdvb0hmTEpWTDQ1ekJYYTJCVXdKbHVZUGltaXM1TXh6ZUt6NzNHKytJSzllV3haMERoSkV2bnFubUlES29wS1B0S0orbFpYMlFNcEtXNVBObjdLc0FiN2hjQzFrb1oxQjhrcnhvQnFVejZZNnVBYTY5akpjUmhOZlNNbG8rMzA3MG5hbFpST1p3NHRTVVpJclwvYXNUc25nVWZ0XC9JRUNcL3FtSTRvZ0NjNGxLZ0VjXC94K0tzV1p3K0g3Qk4zODVGXC9qaCtVcG9sTGVEU3lTV3BLbXY1Mll1eDRpOHlkaVNNcFc2Y0RNNmFrT2ZUZWhkclNRTlAxd3BnR0NoZGM5NHloWmx2NmZJYVN5T3dFQXRvc3FQQ1RKTmg1UFI4ZVBram5FakR6dXlNRmhcL2pYSEhiWEpFdWkyd2kzSmZWYlNYWWpyTDlNeUd1SFYxXC9YSnZrZ0ZOU1FHZ2RSWllCSjhIckhmWGdraWt6WEFJNzVLc2twYzlud2RzTFNNRHhpVitVRlwvVFo3R2REMFQ2QkxKSHlCSitUTGdtZDZOZUZtR0cyRVZjb0dBRjY0ZThkOUdmS3BcL1pwRlh5N0dnamtRZjNrR0c1MjdlV3FiUkJhNWtldW0xUzd0RE00M0NBRlBqT0hEbnVYang5RUVsanJXbTErck1mWng4bWtzV3h4cmVFczBXUXBPaHZiT1JIcjZcL2RVSGdKY1l3SFk0bkQ3UWdGdlJpTXdndnRtR25tMXB6QzVZU3U3TEt2YWVEVGtyakZMVGhaTFBDZFQreStJRnNsXC9RdzRTaFJlSGN2bWdRT2NBSnlJVnlhNnY0T2RUSEwwSk95Z3F2SGthdWdQeFFjekEwRDV4bXl2XC9zOHhWb2F2M2xjOFwvRjhvWm5JMlB0b2xzMjdESVBsTkhOMkt2aXp1NDdKSmh2VW9WT1lqWlV3bEZ2RzUrbXB2c0hIckhld21zM1FLRVwvN3V1RklxOXlid2J6NFwvUzVrdE5XQ29OUnh3RDNhMVhvSmlSSjdUcVh2V2M1U1ZuUVJ5M3h3Z0lvV0VtbFNaTjREU3JidHFOVzh2UFFpYUV0SlF0azRKeFBvNVwvajlXblFiUjJMeTFJbWRSVldXNEZERG02WGtkSEx3b05KZ0ZIYXQ1RUh1NDJRZGJjcytXclFTTExBdmVsZGJkWHdSMkJHR1FCa2JidkVtTTBqMHhXR2lcL2hKVFg3aFFxWXNiWkpnR3dXeHVheTd4dE00dWw1Q1NWQ1ArZU9NdDJPcHEzQVU0aEJLSnJnRUN3R1FDM3lhM3ZlVENXZnk0M2lEQ3N2dTlcL0Qyanh1bGdRR1pJWTZObDU4c3A4SVFlaGxDTk5scnNQN3haZ0ZxVVZxS3ViblF0R2tLeENvM01nSUtCSVQxQzB6OHpDd3ZHTFNKelBCaEFYOWNENU10djg0bGZXdmpRSFczNWdpNHJmdkc4cUZ3SGw4RlVjWjdcL05udk15U2l3K0pZRlU2S3pMMFVXdnRaVTZrMWtVWmZnaWNNSDdUWlRkTWhodU9ZTzVrMDlSbDNrbHVYNGdzV3hSUTRNVWtkMTJsN1FiajlnUGVhejRTOTRwMXdzNUhqQ1lhUVZEMzhuc1dqb1VsXC9xQVVlWDMrR2FcL1RzRXFkN1NocFYxT3dYOTRzaDYzb3lKb1gzXC9tZmlxRGlMZUdMSEhtQWhqdXZwNFJYUlwvTmJheU01WUdhUzFNaURMYzgrRzczZEtwa1JtM2xTNDRGT0lISHdcL1wvSjlvbXFJaXV2YkM0aGxHTUVcL3lPMW82NVFCOXlPSDEyV0VFSktCbGFDQlFUZzRmTjlMRlFxMU9jVjJkRkd6UDdTZ2hHb0VUMHRTTjhkc2toVWhnUUJvaWpicGlxVWRyNEprOU8rbkI0UXZcL2xFM29BNFwvWG8rblU1eDBFamgzRWFoampSQ1ZzU3RHUzdqTzVuUE9ua2hCUjROV3Q0Sm9Ca2dOK0lMOHJDb2xUekVXUUFrVFkyTzBoQjB1bldCaHVUR0JHbk9wUHl3amV6ckZ5Wlg3M1hcL3NISGpRYXBYdndSZGJKMm5Wdm05bVc0amZ1b2VlQnpsdVE4Z0NXU1FwOW1TK2VrUHg5ZVNwM2ZhMUFTeVl1V2V3TU5SM3ViUENIUU0yTkw2aFIrdmRvWCtoY2h1dzN2UnpLaDhBZzhaXC9HbEI5cENWYUpIK1QzaHpUMHowSTdJT1dxXC9PWG9JNEIyV1hPa1lMM0ZNRm5FUk9cL2I2bzA4Q0puWU52S1h0YW9lTEtBVnFEWUFmdFFKSTlmV0ZkazZCTDg0c2xXR2F4bVZ1cDF3Vk50NDBxV1wveVI5dmJnSHFrbVwvWmtcL3loTm9cL1ZLaWR6M2JiWVNHcVhoQzJzajFMTGpJS29WZDNKMHV5TDFJZjViZVNYM28yQkhSYmkwWmZMbnR3enNubGFQZmF3MHQ5bkZYbWdMRUVVaDBnR1wvZmk0RU9wQ2hDNDNUNFc0K2hLZDQzSTc2ekQzQzhZOTdlK01icnloekdJWGF4Qmd4NUdPR1FnWlZPNFdlU241VG40WXMyQ01vSkpnVEpudmgwUVE3WTk2MnBwSDF4Y0FjdGdQTG51eFhwVzQ5QnR2MG5NNUljZkwxZ0N5RUNvblo1R2ZuQW9FeUk5amM3UzFXMjF0RUpsdEZ5d3lzVmVBQktxamZjeGlBR0lhNU9rOTJXUkFcL2kzb2V6aHl6NHBvcGNlelcybysrTUgzSUF4RmVOV1JnVm1hXC9FMDRWK05JTlE1RU4rTXpSd1lGVjdzREVJaDlkanBuenJ5cEZycE1IclBlXC9qOGFuYkc4aE1tajZFN0JoN3dvdENTZno0aDhGekxhMTF6am9keUVtNG5SSThLZXZTOHpkYzdqNDFKZ0xhTmRaV1VvdzJ6RnpPY3FiWUNVZDlxaEh1MXQ3eWNlNWR4dkJTMk0wZVZ0eEw4cGRUZnFYTFhNb0diSldWYlIyWWREVTFtRzdlaGtcLzVFVStibUZRWExPNWpnUWp4OVwvRHhzK2EwZFJYRnE4WHlvVEdQd1FTaVRZa3RuVGE4NzhIQlBBN2Y4R1JkUVRlaU8wb08xNGVNWHBNYlZ4RHZcL0lBZnU1QTlFZ1FTQjNjS0xNeEFrSVkyb2UyK01INEdkQkhadDQ4Y1NXRHpLdUtqREFHa3MwMTZHVWFYMHJ5VnhoejQ1blFaa0gxNmFlTGFDS0F1MUs5VVwveFdRMDB6eDBSdWFLOCtCK1wvKzFnUHkwVHh5VkhtOEZ3UWpPYVZxM0lhbEdBV0hodnBjYWtRNk54T3gyaFZzSkN4bEl4TVVCZ3B4djF2VlN3aXA2T2RhVHV4cENYeTZhTEFabUlSeGNINlNRWWVmNERiNzhqT1hCc1NFRWJ5bkJ0OEp6OFRtcmhvWHRPUVwveDhsTlwvM0s0T0k1ZEpBbStLZHN3TzBlVUdMdz09In0= 
```

当然是 Base64！所以我解码它并得到：

```
{"GameGuid":"bd120afb-3c64-4e76-937a-fe1628e1db57","GameData":"AgEUwqlp8iLRvVwQfW+WtOHinFWjUaxt51yl3MLCN2w+Lgd9iSOxbRFvvw6g2uSr2RgXTcyqc9YXufdVFe1guS4B10ev\/4BEpO4fPPqeGDZt98ZLJto7IvPBAPTg26htfdLLPvrmn3J4osEZk\/YdysXx0g2kL5GUekX\/TKn+aDUNZIo980fKNDpVu4k+9p7O8DwETBQO+9VatHOIHux0EGGTiKpTdRKKDYAdow5nkggaNjL+aU8CQnurHj6\/3WK6Oo3oUZQGz8UNtDPvC1obotM3gDpct3ZgntX6eZLpx5osuiRsx8SVqaiGoaM89TO1xo8etWoHWAqfaMwxnfnRvLZkU5qFFgLicKE9uFCeH9P+4p9W0QPz89MyshaytWCtRq8FGbH5swIyo9RfvCV4WWZLOBX1u9eYMvFTqd1+f0\/vnUIRQPZt6SFczGixOXkFijOysO0KGOav3bV+QxQq3HoyIL+V5AA22Fa1Z0t28noax0MoQAvOfZz6VJ\/cGr4SgyfPx+DvuUAOe8Rrp3k+v1e9a\/xVN7XgJDmo74ARL\/\/yNa0lu1ljEsv6ukUB\/6QvBgdglHmm8hPkEKO2t3CoypG3AAhE3VUGrcinofLMu92401iZaWYEy12N\/W9qJpSmGiliuXVcHNp9ZmySXHCNe8Ep5XjJMcgxxftEFA0iyDBC7okIV7W6g8dvC4gMqQg1sRF9WLbqSIwKpJ3PFbnuBVMolht43I2K\/mSbVEMUFxr0Nf6+CfyMbnOgfN0opnQW\/k6nQB+d\/2yUVcjhUpqoDiGNHDR2vW\/OBerbCrTJkY+uwhVVp5R6PjXwOUtMzMAzwnSKDLaM+PH2+oe65YtUfcQ3JzZG9mCi6NtfhYYClqkIpzl5V+DMLQwKGoxyxIVx\/QwSOxCyoN3FvotFXASFDYuFoTtrGGHykZQHc9cbK8+dDQp2qXG+uha+yTHlxIQJ2Tq3f1Nscw2Ay\/wgr+UzGDWIlyWbad3YsSMXNUBnpSihv2vLDlAw0P+Rul932S1LxKmK4JZtocO3VZtQyiQJHrIa5WsQ4oorgTt+sFEzljC+NytFCxuvZ\/N6eESPTNL6l0RGfy8sDnJpbGUoKIl\/s0WgLTqzZzqv9mrFNJ\/g6Yv053ssPaIbdmmITn+rzfyHpNrkVAJ7COtaqwegndg7qn08btbc0qy2nkeNpVDmz0H4f4xUW04NJ6+GDwBshMSj5ExaRUYpskqt\/fBf\/ktpadNOgZKvvch8bTMp\/bvM5mvzmsCNQLljS5pFpDR4D5GC97G6s2s14Lb4MRwNhizJ0+5pG43PHwom+UgkVSpoSwO7BOGxd8UXFdCBWHfnhijv5HJmj2Kro87qasKMOM1KsNXKDDGn\/CBdIP0jTRxkJy21TaK0OjmbKEmN7DsVF1tSOCMMkSaWFRj5cUgysW8Ro3orts8ImAmGYehW3BLvXmGUqIcusGILUo8n9no+kcByRK8HSzhUyOrZABwOqnpwQsgO8aPcshrAmsekjJjKocu6C1PInXhj32xihaMRgTlp4UgN9d5p6XepgP8JFK9Dfv5+D3vFplDRofzKNenpElWt23lJLh579KRkBZzAvRp9+aX5Dtxul4x6xYGjAGN1QI4ChMmywITwrRjACpHyd+KlBcLAjT6cYdXlRWdMnvHJrWTE1U3i6HJDYjCemxF1X51ejGPUK6K8OT+2sc3\/kfBbc3B8UBY2+IIcFa7uaeE0W5EbCfp4sM8S5VgWT3uluB6iBNCe2DRkbqvUOHZeImSf87yVKgK+11nNUCW6kg28UM7Hw+2SQ7OSWxB7uuwCkJz743B8qPe9RPz2qXlhtgLNfSHjBibWK+UU5\/E3SYut2+vrKH3VKCo13Sl+DBPLTaaHxdPHKGJPtGT1VhlDg2deLiKeY0hGO0hsIAFY5DaRnSLpYgyBl5pB72kz1Rf\/HXhoFA8mM8hxKcrR+38yvzbl3yvfG7NO1Ez+RjawePZORuUdAbEH2gT+MFopOI+YGYXWPFV8KTmImnpc0e4j76+3Ow4xaaCwN4gtsrRnsb4GiSb6MTh42pGbi8KLnNwmrSES64+V0Z2VD5l\/QCHWZ6BziTXluFaaGB0eAyLOZT31qzm6F00a6uO4F83G8ue0kZhOdA6THuu4MZCTqtTJd3zvZe8m7mhnR6Qa3kNwpMeoer68dlbhdTbkiTSX88uguo5Y\/R2zdaCCXLDneAcedf6iCXan\/N4VlzDaaTKuLhchg3cE2YEXkbxlR7oH5cucxVRxPLmUdJ5LQku\/gCpszFTLSQBgUGdB7sjk8pMaeKa8ix+DWaehN15dPUwW74BUXnnq31tmMvrz3lTMqy8az4S9j4CwZnn24C4y\/Q525zcwv36DRr1Z\/frMiufOmTcRJ1ec2t\/95MGX6HLDjQnpk+hj0Dhnq4l9Xp2nTmdIXRKL3jum3Id\/kmDnI0LZmC0SE+lSWhAb8iqHiyv1lPLbibI+RmyNUMuz\/Iq1+b0+bNSUEzXMx502G+hIpxr5aXCFNbKSXJWd9HtjG4pEAOxDCPsPLN1xn8defKBGds+nWvAkq2eyN3cq3K1SprhvKYwxzr\/ADU9XMs2T5dKquo7erPGhzv5NAMERQcgXcdF4ZgcNgzfa0K8gwhJl8dxeM6r9yTDNqd4bJP4H2\/+s26yypVDgiHPUdq0lTjqe7Smm4DXn5UkaWBGJpID7MX99woa7ctbsa9s88eEIbtbdGX032DqK\/qFkIwQSB8EvaO3IqYgCB9apRBZxrNfVOd0iT5SXrAlxQzAmIwGqhkQeZdVov3pIDI8BLit+8ySPPc2z4+N2o3qvVRgyY8Zf9rSmts53KTFlMW6S3KHCjCsqV7ZhVFF47p7Ax5eyGNkTQVPTNgleEcrxEWEk3aD5K9KN34PD5tgzx7ytc4MGooHfLJVL45zBXa2BUwJluYPimis5MxzeKz73G++IK9eWxZ0DhJEvnqnmIDKopKPtKJ+lZX2QMpKW5PNn7KsAb7hcC1koZ1B8krxoBqUz6Y6uAa69jJcRhNfSMlo+3070nalZROZw4tSUZIr\/asTsngUft\/IEC\/qmI4ogCc4lKgEc\/x+KsWZw+H7BN385F\/jh+UpolLeDSySWpKmv52Yux4i8ydiSMpW6cDM6akOfTehdrSQNP1wpgGChdc94yhZlv6fIaSyOwEAtosqPCTJNh5PR8ePkjnEjDzuyMFh\/jXHHbXJEui2wi3JfVbSXYjrL9MyGuHV1\/XJvkgFNSQGgdRZYBJ8HrHfXgkikzXAI75Kskpc9nwdsLSMDxiV+UF\/TZ7GdD0T6BLJHyBJ+TLgmd6NeFmGG2EVcoGAF64e8d9GfKp\/ZpFXy7GgjkQf3kGG527eWqbRBa5keum1S7tDM43CAFPjOHDnuXjx9EEljrWm1+rMfZx8mksWxxreEs0WQpOhvbORHr6\/dUHgJcYwHY4nD7QgFvRiMwgvtmGnm1pzC5YSu7LKvaeDTkrjFLThZLPCdT+y+IFsl\/Qw4ShReHcvmgQOcAJyIVya6v4OdTHL0JOygqvHkaugPxQczA0D5xmyv\/s8xVoav3lc8\/F8oZnI2Ptols27DIPlNHN2Kvizu47JJhvUoVOYjZUwlFvG5+mpvsHHrHewms3QKE\/7uuFIq9ybwbz4\/S5ktNWCoNRxwD3a1XoJiRJ7TqXvWc5SVnQRy3xwgIoWEmlSZN4DSrbtqNW8vPQiaEtJQtk4JxPo5\/j9WnQbR2Ly1ImdRVWW4FDDm6XkdHLwoNJgFHat5EHu42Qdbcs+WrQSLLAveldbdXwR2BGGQBkbbvEmM0j0xWGi\/hJTX7hQqYsbZJgGwWxuay7xtM4ul5CSVCP+eOMt2Opq3AU4hBKJrgECwGQC3ya3veTCWfy43iDCsvu9\/D2jxulgQGZIY6Nl58sp8IQehlCNNlrsP7xZgFqUVqKubnQtGkKxCo3MgIKBIT1C0z8zCwvGLSJzPBhAX9cD5Mtv84lfWvjQHW35gi4rfvG8qFwHl8FUcZ7\/NnvMySiw+JYFU6KzL0UWvtZU6k1kUZfgicMH7TZTdMhhuOYO5k09Rl3kluX4gsWxRQ4MUkd12l7Qbj9gPeaz4S94p1ws5HjCYaQVD38nsWjoUl\/qAUeX3+Ga\/TsEqd7ShpV1OwX94sh63oyJoX3\/mfiqDiLeGLHHmAhjuvp4RXR\/NbayM5YGaS1MiDLc8+G73dKpkRm3lS44FOIHHw\/\/J9omqIiuvbC4hlGME\/yO1o65QB9yOH12WEEJKBlaCBQTg4fN9LFQq1OcV2dFGzP7SghGoET0tSN8dskhUhgQBoijbpiqUdr4Jk9O+nB4Qv\/lE3oA4\/Xo+nU5x0Ejh3EahjjRCVsStGS7jO5nPOnkhBR4NWt4JoBkgN+IL8rColTzEWQAkTY2O0hB0unWBhuTGBGnOpPywjezrFyZX73X\/sHHjQapXvwRdbJ2nVvm9mW4jfuoeeBzluQ8gCWSQp9mS+ekPx9eSp3fa1ASyYuWewMNR3ubPCHQM2NL6hR+vdoX+hchuw3vRzKh8Ag8Z\/GlB9pCVaJH+T3hzT0z0I7IOWq\/OXoI4B2WXOkYL3FMFnERO\/b6o08CJnYNvKXtaoeLKAVqDYAftQJI9fWFdk6BL84slWGaxmVup1wVNt40qW\/yR9vbgHqkm\/Zk\/yhNo\/VKidz3bbYSGqXhC2sj1LLjIKoVd3J0uyL1If5beSX3o2BHRbi0ZfLntwzsnlaPfaw0t9nFXmgLEEUh0gG\/fi4EOpChC43T4W4+hKd43I76zD3C8Y97e+MbryhzGIXaxBgx5GOGQgZVO4WeSn5Tn4Ys2CMoJJgTJnvh0QQ7Y962ppH1xcActgPLnuxXpW49Btv0nM5IcfL1gCyEConZ5GfnAoEyI9jc7S1W21tEJltFywysVeABKqjfcxiAGIa5Ok92WRA\/i3oezhyz4popcezW2o++MH3IAxFeNWRgVma\/E04V+NINQ5EN+MzRwYFV7sDEIh9djpnzrypFrpMHrPe\/j8anbG8hMmj6E7Bh7wotCSfz4h8FzLa11zjodyEm4nRI8KevS8zdc7j41JgLaNdZWUow2zFzOcqbYCUd9qhHu1t7yce5dxvBS2M0eVtxL8pdTfqXLXMoGbJWVbR2YdDU1mG7ehk\/5EU+bmFQXLO5jgQjx9\/Dxs+a0dRXFq8XyoTGPwQSiTYktnTa878HBPA7f8GRdQTeiO0oO14eMXpMbVxDv\/IAfu5A9EgQSB3cKLMxAkIY2oe2+MH4GdBHZt48cSWDzKuKjDAGks016GUaX0ryVxhz45nQZkH16aeLaCKAu1K9U\/xWQ00zx0RuaK8+B+\/+1gPy0TxyVHm8FwQjOaVq3IalGAWHhvpcakQ6NxOx2hVsJCxlIxMUBgpxv1vVSwip6OdaTuxpCXy6aLAZmIRxcH6SQYef4Db78jOXBsSEEbynBt8Jz8TmrhoXtOQ\/x8lN\/3K4OI5dJAm+KdswO0eUGLw=="} 
```

看起来像一个字典，`GameData`键中有另一个 Base64 字符串。但是，Base64 解码*给*了我一堆二进制数据：

```
02 01 14 c2 a9 69 f2 22 d1 bd 5c 10 7d 6f 96 b4 .....i."..\.}o..
e1 e2 9c 55 a3 51 ac 6d e7 5c a5 dc c2 c2 37 6c ...U.Q.m.\....7l
3e 2e 07 7d 89 23 b1 6d 11 6f bf 0e a0 da e4 ab >..}.#.m.o......
d9 18 17 4d cc aa 73 d6 17 b9 f7 55 15 ed 60 b9 ...M..s....U..`. 
```

这是不可压缩的：

```
>>> len(game_data)
4114
>>> len(game_data.encode("zlib"))
4125 
```

它不是 zlib 编码的：

```
>>> game_data.decode("zlib")

Traceback (most recent call last):
  File "<pyshell#126>", line 1, in <module>
    game_data.decode("zlib")
  File "C:\Python27\lib\encodings\zlib_codec.py", line 43, in zlib_decode
    output = zlib.decompress(input)
error: Error -3 while decompressing data: incorrect header check 
```

没有标题，它甚至不是 zlib：

```
>>> def inflate(data):
    import zlib
    decompress = zlib.decompressobj(
            -zlib.MAX_WBITS  # see above
    )
    inflated = decompress.decompress(data)
    inflated += decompress.flush()
    return inflated

>>> inflate("roflcopters".encode("zlib")[2:])
'roflcopters'
>>> inflate(game_data)

Traceback (most recent call last):
  File "<pyshell#130>", line 1, in <module>
    inflate(game_data)
  File "<pyshell#128>", line 6, in inflate
    inflated = decompress.decompress(data)
error: Error -3 while decompressing: invalid distance too far back 
```

我已经尝试使用这个[在线的 Objective-C 编译器](http://www.compileonline.com/compile_objective-c_online.php)以及各种类，如`NSUnarchiver`、`NSKeyedUnarchiver`和`NSPropertyListSerialization`，但还没有运气。这些似乎都产生了至少具有可识别字符串的输出，因此即使使用它们，也必须进行其他操作。

不同批次之间唯一的相似之处是它们都以`0x0201`. 其他一切似乎都完全不同，即使是同一场比赛的后续更新，这让我想知道是否正在进行一些混淆/加密......

关于我可以从这里去哪里的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:27:18.280

它几乎可以肯定是游戏中的一些专有结构，序列化为字节。`0x0201`很可能是一个结构的版本控制，或者只是一组在你看到的 blob 中不会改变的标志。

没有必要假设这是故意混淆或加密的数据。标准的文本（JSON、XML）和二进制（bplist）容器越来越普遍，并且通常使人们的生活更轻松，但是如果方便的话，以更原始的二进制格式表示数据并没有什么不好的。（见下文回复：加密）

真正更详细地进行逆向工程可能是一项西西弗斯式的任务：找出二进制 blob 中的值是什么，无论是数字还是其他。将游戏状态数据与游戏的已知（或未知）值相匹配。对代码进行逆向工程，看看它在写什么。这是一些大学运动的东西，但这是可能的。

* * *

回复：加密：加密，或者至少是签名，在在线游戏的某些部分*很*常见，以防止机器人篡改游戏状态以获得优势。这是否发生在这里是任何人的猜测。一堆代表世界位置的浮点数看起来同样是随机的。

# php - php imap 如何搜索未读并按日期对它们进行排序？

> ID：15035454
> 
> 赞同：1
> 
> 时间：2013-02-23T00:20:58.420
> 
> 标签：php, imap

是否可以获取未读消息并按日期对消息进行排序？我有

```
$messages = imap_search($imap,"UNSEEN");
  imap_sort($imap, SORTDATE, 1); 
```

但我想知道它是否不应该

```
 imap_sort($imap, SORTDATE, 1);
$messages = imap_search($imap,"UNSEEN"); 
```

或者是其他东西 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T20:02:28.260

您可以使用

```
$messages = imap_search($imap,"UNSEEN");
$sorted = array_reverse($messages); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T10:26:39.090

这是一个可以帮助您的代码：

```
$host = '{imap.gmail.com:993/imap/ssl}INBOX';

// Connect to the pop3 email inbox belonging to $user
$con = imap_open("$host", $user, $pass) or die("Can't connect: " . imap_last_error());

// after some sleeping
if (!imap_ping($con)) {
    // do some stuff to reconnect
die("The user is no longer logged in.");
} else {
    echo ('Connection Successful !');
}

$MC = imap_check($con);

// Get the number of emails in inbox
$range = "1:".$MC->Nmsgs; 

// Retrieve the email details of all emails from inbox
$response = imap_fetch_overview($con,$range); 
$response = array_reverse($response);

// displays basic email info such as from, to, date, subject etc...
foreach ($response as $msg) {
    // extra filters to show records which are Unread/Not seen  
    if($msg->seen == "0"  && $msg->recent == "0"){
        echo '<pre>';
        var_dump($msg);
        echo '</pre><br>-----------------------------------------------------<br>';
    }
} 
```

`ksort`最终，您可以使用功能为日期智能排序或键智能排序设置条件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-28T10:12:07.913

如果使用 imap_sort，则不需要使用 imap_search，因为 imap_sort 承认参数 $search_criteria 和 imap_search。假设 imap_sort 类似于 imap_search，但您也可以得到有序的结果。

```
$messages = imap_sort($imap, SORTDATE, 1, SE_UID, 'UNSEEN'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T04:29:04.363

U r 独立地对原始数据集执行两种不同的操作。一种可能的方法是从第一个命令（搜索）中获取所有数据，将其存储在某个变量中，然后实现您自己的排序功能。

# assembly - MIPS 汇编语言

> ID：15035460
> 
> 赞同：-1
> 
> 时间：2013-02-23T00:21:30.807
> 
> 标签：assembly, mips

我正在尝试编写 MIPS 汇编语言，提示用户输入两个数字来描述系统屏幕的二维，以像素表示，然后计算并打印屏幕的像素数。

例如，在 C++ 中：

```
int width,height,result;
cout<<"Enter width of the device screen: ";
cin>>width;
cout<<"Enter height of the device screen: ";
cout>>height;
result=width*height;
cout<<"The result of the Iphone 4S in pixel: "<<result; 
```

（这是我第一次编写这个 MIPS 程序集，所以我确定这段代码是错误的。我需要有人帮我更正下面的代码并请给我解释一下。）

```
.data
str1: .asciiz "Enter width of the device screen: "
str2: .asciiz "Enter height of the device screen: "
str3: .asciiz "The result of the Iphone 4S in pixel: "
newline: .asciiz "\n"

main:
li $v0,4 #system call code for print string
la $a0,str1 #address of str1
syscall #print str1

#get the first number from the user, put into $s0
li $v0,5 #system call for read input
syscall #read integer into $v0 from console.
move $s0,$v0 #move the number read into $s0

#read input string for str2
li $v0,4  #system call code for print string
la $a0,str2 #address of str2
syscall #print str2

#get the second number from the user, put into $s1
li $v0,5 #system call for read input
syscall #read integer into $v0 from console.
move $s1,$v0 #move the number read into $s0

#do the calculation 
mul $s2,$s0,$s1 # s2 is the register to store $s0 and $s1 from the user input.

#read print string for st3
li $v0,4 #system call code for print string

#print width*height
li $v0,1
move $ao,$s2 #move the result of multiplication into $a0 to print
syscall 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:36:05.740

您的程序非常接近 - 您只有几个问题：

1.  你缺少一个`.text`指令。那可能应该在您的`newline`线路之后和之前进行`main:`。

2.  你有一个`$ao`你可能想要`$a0`接近程序结束的地方。

3.  您从未打印过`str3`- 您需要添加：

    ```
    la $a0,str3 #address of str3
    syscall 
    ```

    在你的`li $v0,4 #system call code for print string`行之后。

4.  您应该确保`exit`在程序末尾添加一个系统调用：

    ```
    li $v0,10
    syscall 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-07T12:07:56.850

```
.data
str1: .asciiz "Enter width of the device screen: "
str2: .asciiz "Enter height of the device screen: "
str3: .asciiz "The result of the Iphone 4S in pixel: "
newline: .asciiz "\n"
         .text 

main:
li $v0,4                       #system call code for print string
la $a0,str1                    #address of str1
syscall                        #print str1

                               #get the first number from the user, put into $s0
li $v0,5 #system call for read input
syscall #read integer into $v0 from console.
move $s0,$v0 #move the number read into $s0

#read input string for str2
li $v0,4  #system call code for print string
la $a0,str2 #address of str2
syscall #print str2

#get the second number from the user, put into $s1
li $v0,5 #system call for read input
syscall #read integer into $v0 from console.
move $s1,$v0 #move the number read into $s0

#do the calculation 
mul $s2,$s0,$s1 # s2 is the register to store $s0 and $s1 from the user input.

#read print string for st3
li $v0,4 #system call code for print string
la $a0, str3
syscall
#print width*height
li $v0,1
move $a0,$s2 #move the result of multiplication into $a0 to print
syscall
#
li $v0, 10
syscall 
```

# iphone - 准备继续传递数据选择器

> ID：15035462
> 
> 赞同：0
> 
> 时间：2013-02-23T00:21:38.560
> 
> 标签：iphone, ios, selector, segue

我正在尝试使用以下代码通过 segues 传递数据：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([segue.identifier isEqualToString:@"exerciseDetailDescription"]) {
    SoulExerciseDetailQuarViewController *destination = segue.destinationViewController;
    if ([destination respondsToSelector:@selector(setOverview:)]) {
        NSDictionary *overview = @{@"name" : [_exercise objectForKey:@"name"], @"longDescription" : [_exercise objectForKey:@"longDescription"]};
        [destination setValue:overview forKey:@"overview"];

    }
}
else if ([segue.identifier isEqualToString:@"exerciseDetailGear"]) {
    SoulExerciseDetailTriaViewController *destination = segue.destinationViewController;
    if ([destination respondsToSelector:@selector(setSelectedGearString:)]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        NSString *selectedGearString = cell.detailTextLabel.text;
        [destination setValue:selectedGearString forKey:@"selectedGearString"];

    } 
}
else if ([segue.identifier isEqualToString:@"exerciseDetailCategory"]) {
    SoulExerciseDetailDuaViewController *destination = segue.destinationViewController;
    if ([destination respondsToSelector:@selector(setSelectedCategoryString:)]) {
        NSLog(@"Go");
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        NSString *selectedCategoryString = cell.detailTextLabel.text;

        [destination setValue:selectedCategoryString forKey:@"selectedCategoryString"];

    }
}} 
```

因此，如果它响应在 segue 的目的地中找到的设置器，则它允许传输数据。

奇怪的是第一个响应正确，但在第二个和第三个中，它说目标视图控制器没有响应那些设置器

例如，在第三个中没有显示 nslog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:36:08.533

以前评论的回答：

NSLog 目标类：

```
NSLog(@"class name: %@", NSStringFromClass([destination class])); 
```

我敢打赌，这门课不是你想的那样。

OP：“它说导航控制器”

这不是你所期望的，对吗？所以弄清楚为什么错误的东西被实例化了。

# php - 如何删除前导零？

> ID：15035464
> 
> 赞同：0
> 
> 时间：2013-02-23T00:22:06.503
> 
> 标签：php, mysql, sql, preg-replace

我正在使用的数据库中有一个名为 last_count 的列，其中填充了整数。该数字具有许多 0 的基本格式，然后是实际数字（例如 000001489）。我需要去掉数字之前的零，然后将它们显示在从查询“select last_count, query, job_id from twitterinblack46.job where job_id in ('.$job_id_all.') order by last_count desc;'

我正在研究 preg_replace 但它也删除了其他零（例如，如果数字是 00001480，它会回显 148 而不是 1480）。我正在使用 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:31:53.753

只需在php中将类型更改为int

```
// Your sql stuff
$stmt->bind_result($last_count);
while ($stmt->fetch()) {
    echo "<tr>";
    echo "<td>".intval($last_count)."</td>";  // Or use (int)$last_count
    echo "</tr>";
} 
```

见[http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:23:45.517

最简单的方法是将值转换为整数：

```
select cast(col as int) 
```

这将显示不带前导零的数字。

如果您需要将值作为字符串，则可以将其转换为 varchar：

```
select cast(cast col as int) as varchar(255)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T00:41:31.490

这个怎么样？

```
preg_match("/[^0].*/",$number, $matches);
echo $matches[0]; 
```

# mysql - MySQL排名查询和LEFT JOIN

> ID：15035467
> 
> 赞同：0
> 
> 时间：2013-02-23T00:22:22.760
> 
> 标签：mysql, sql, join, left-join, ranking

我有一个属于用户的**用户**和**facebook_accounts数据库。**用户根据他们相对于其他用户的点数来“排名”：这是通过嵌入的 SELECT 语句来完成的，该语句计算所有用户的点数比用户多。

该数据库有大约 10k 用户。以下 SQL 查询需要 MySQL ~0.16s 才能完成：

```
SELECT
    *, (SELECT (COUNT(*) + 1)
            FROM users AS UserHigher
            WHERE UserHigher.points > User.points
       ) AS rank
FROM
    users AS User
ORDER BY
    User.points DESC, User.created ASC
LIMIT 0, 30 
```

但是，添加 LEFT JOIN 来检索用户的**facebook_account**会挂起 MySQL：

```
SELECT
    *, (SELECT (COUNT(*) + 1)
            FROM users AS UserHigher
            WHERE UserHigher.points > User.points
       ) AS rank
FROM
    users AS User
LEFT JOIN
    facebook_accounts AS FacebookAccount
        ON (FacebookAccount.user_id = User.id)
ORDER BY
    User.points DESC, User.created ASC
LIMIT 0, 30 
```

我知道用于对用户进行排名的 COUNT() 选择方法效率较低，但这是我遇到的最可靠的方法。我不明白的是，当一个简单的 LEFT JOIN 看起来与排名 SELECT 语句完全分开时，为什么它会破坏原本合理的查询。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:27:52.427

我的猜测是原始查询首先进行排序并且仅执行排名 30 次。第二个查询过于复杂，MySQL 无法检测到这种优化。

以下可能会有所帮助：

```
select *
from (SELECT *, (SELECT (COUNT(*) + 1)
                 FROM users AS UserHigher
                 WHERE UserHigher.points > User.points
                ) AS rank
      FROM users AS User
      ORDER BY User.points DESC, User.created ASC
      LIMIT 0, 30
     ) t join
     facebook_accounts AS FacebookAccount
     ON (FacebookAccount.user_id = User.id)
order by points desc, created asc 
```

# haskell - 你如何定义一个签名函数 h :: M Int -> M Int -> M Int 使得 h (M x) (M y) = M (x+y) 而不展开单子？

> ID：15035468
> 
> 赞同：3
> 
> 时间：2013-02-23T00:22:30.120
> 
> 标签：haskell, monads

[这个问题来自http://blog.sigfpe.com/2007/04/trivial-monad.html](http://blog.sigfpe.com/2007/04/trivial-monad.html)上的文章“Trivial Monad” 。提供的答案是

```
h x y = x >>= (\x -> g x y) 
```

或等效地（在文章的上下文中）

```
h :: W Int -> W Int -> W Int 
h x y = bind ( \x-> g x y ) x 
```

其中 g 是

```
g :: Int -> W Int -> W Int
g x y = y >>= (return . (+x)) 
```

对于单子：

`data W a = W a deriving Show`

现在我有点困惑，如果 x`Int`作为第一个参数但 x 是，你怎么能把 x 放在 g 中`W Int`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T00:31:34.277

> 现在我有点困惑，如果 x 以 Int 作为第一个参数但 x 是 M Int，你怎么能把 x 放在 g 中？

有两个不同`x`的变量，内部的一个在 lambda 表达式中隐藏了外部的一个。编写代码的更清晰的方法是

```
h mx my = mx >>= (\x -> g x my) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T01:47:42.107

Missingno 指出了一个关键步骤，但名义问题的答案是：`liftM2 (+)`.

# javascript - 销毁 WebWorker

> ID：15035473
> 
> 赞同：13
> 
> 时间：2013-02-23T00:23:23.177
> 
> 标签：javascript, google-chrome, firefox, safari, web-worker

有没有办法在 JavaScript 中销毁 HTML5 WebWorkers？

这是我的情况：我有一个 Web 应用程序，它生成相当数量的 WebWorker（介于 16 到 32 之间）来优化一些渲染过程。此过程在最初几次运行良好，但当脚本运行多次时页面消失（不重新加载页面）。当我尝试一次生成很多（100 多个）WebWorkers 时，我遇到的错误是一样的，所以我假设我遇到了同样的障碍。

当脚本多次运行时，第一轮实例化的 WebWorkers 不再需要存在；我不重用任何 WebWorker 对象。我想销毁第一次创建的 WebWorkers，以便脚本的未来执行在尝试生成新的 WebWorkers 时不会停止。

我只在 Chrome 和 Firefox 中注意到了这个问题；Safari 似乎没有这个限制。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-23T00:44:17.940

您应该能够从主窗口调用它来立即终止工作人员：

```
myWorker.terminate(); 
```

在此处查看完整的 API：[https ://developer.mozilla.org/en-US/docs/DOM/Using_web_workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)

或者，您可以`close()`从工作人员本身调用，请参阅：[https ://developer.mozilla.org/en-US/docs/DOM/Using_web_workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)

# rally - 与 sdk.js 相关的 Javascript 错误

> ID：15035474
> 
> 赞同：1
> 
> 时间：2013-02-23T00:23:29.730
> 
> 标签：rally

我正在尝试在 Rally 中使用自定义页面，该页面使用 iframe 链接到我的外部应用程序。在运行时，我收到一个与 Rally 的 sdk.js 文件相关的 javascript 错误。

我做错了什么？

Javascript 错误：

![来自 sdk.js 的 Javascript 错误](../Images/02e75a6848e59b1a68a95229b4ea2503.png)

用于我的自定义页面的代码：

```
<script type="text/javascript" src="/apps/2.0p4/sdk.js"></script>

<script type="text/javascript">
    Rally.onReady(function() {
        Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

            launch: function() {    

        var user = this.getContext().getUser(); 
            var projectId = Rally.environment.getContext().getProject().ObjectID;
        document.write('<div id="Timesheet"><iframe src="https://myserver/Entry.aspx?RallyUserName=' + user.UserName + '&RallyProject='+ projectId +'" height=90%  width=100% style="border-top-width: 0px;border-right-width: 0px;border-bottom-width: 0px;border-left-width: 0px;"></iframe></div>');                 

            },

        });            

        Rally.launchApp('CustomApp', {
            name: 'Timesheets'
        });
    });
</script> 
```

问候，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T15:38:21.703

我建议使用自定义 URL 应用程序来满足此需求：

![添加应用...](../Images/0e9e5d2d93e51f82fe905b14b5e2451a.png)

![自定义网址](../Images/2a702c86f8b29d81fcae392abf3ad9c6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:03:48.573

当您在 sdk 深处遇到奇怪的错误时，包含 sdk-debug.js 而不是 sdk.js 通常会有所帮助。您将获得更好的堆栈跟踪，可以帮助您跟踪正在发生的事情。

在这种情况下，您的 document.write 代码正在删除应用程序期望存在的 dom 元素。使用 Ext 创建你的 dom 元素，你应该已经准备好了：

```
Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',
    items: [
        { xtype: 'container', itemId: 'Timesheet' }
    ],

    launch: function() {
        this.down('#Timesheet').add({
           xtype: 'component',
           autoEl: {
               tag: 'iframe',
               src: '',
               //...
           }
        });
    } 
```

或者从应用程序中的任何容器或组件中，您始终可以调用 getEl() 并直接使用 dom 元素。

# c# - RPG 库存：添加和删除项目

> ID：15035477
> 
> 赞同：2
> 
> 时间：2013-02-23T00:23:49.407
> 
> 标签：c#, game-engine

到目前为止，我有这个：

```
class Inventory {
     private Potion[] potions;
     private Weapon[] weapons;
     private Armor[]  armor;
     private Food[]   food;
     private Ore[] ores;

     public int InventorySlots {get;set;}
     public Inventory() {
            InventorySlots = 10;
            BuildInventory();
     }
     public Inventory(int slots) {
            InventorySlots = slots;
            BuildInventory();
     }
     public void BuildInventory() {
            potions = new Potion[InventorySlots];
            weapons = new Weapons[InventorySlots];
            armor = new Armor[InventorySlots];
            food = new Food[InventorySlots];
            ores = new Ore[InventorySlots]
     }
} 
```

Itf，例如，我想在 10 个插槽的库存中添加一个新武器，我将如何添加和删除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T10:30:25.817

为了显着简化问题，您可以创建一个基类“项目”，您的所有项目类型都来自：

```
public class Item
{
    // put any common attributes here
}

public class Armor : Item
{
    // define properties for Armor here
}

public class Weapon : Item
{
    // define properties for weapons here
} 
```

当您像这样创建子类时，您可以使用`Item`变量来存储任何派生类。您可以创建一个新`Weapon`实例并将其分配给`Item`实例类型的库存槽。所以你的`Inventory`类变成了`Item`s 的集合。

假设您想要数组到库存位置的 1 对 1 映射，并且不希望自己重新排列东西，那么数组方法可能是要走的路。

```
class Inventory
{
    // Array to store items
    public Item[] Items { get; private set; }

    // Inventory capacity is array length
    public int Capacity { get { return (Items == null) ? 0 : Items.Length; } }

    // Constructor
    public Inventory(int capacity = 10)
    {
        SetInventorySize(capacity);
    }

    // Set size of inventory, retaining contents where possible
    public void SetInventorySize(int cap)
    {
        if (cap <= 0)
            Items = null;
        else if (Items == null)
            Items = new int[cap];
        else
            Array.Resize(ref Items, cap);
    }

    // Get index number of first free slot in inventory
    public int FirstAvail()
    {
        if (Items != null)
        {
            for (int i = 0; i < Items.Length; ++i)
            {
                if (Items[i] == null)
                    return i;
            }
        }
        return -1;
    }

    // Add item to array, returning index or -1 on failure
    public int AddItem(Item item)
    {
        if (Items != null)
        {
            for (int i = 0; i < Items.Length; ++i)
            {
                if (Items[i] == null)
                {
                    Items[i] = item;
                    return i;
                }
            }
        }
        return -1;
    }
} 
```

该`Items`属性是一个数组，您可以存储任何`Item`衍生对象，如`Armor`或`Weapon`以上。要将项目添加到列表中，请找到一个清晰的位置（`FirstAvail`例如使用方法）并将项目放入该位置的项目列表中。

当您使用库存中的物品时，您需要确定它们是什么来弄清楚如何处理它们。您可以`as`这样使用操作：

```
// get the first item in the inventory
Item item = inventory.Items[0];

if ((Armor armorItem = item as Armor) != null)
{
    // Code to execute for Armor items
    armorItem.Wear();
}
else if ((Weapon weaponItem = item as Weapon) != null)
{
    // Code to execute for Weapon items
    weaponItem.Equip();    
}
else if ((Potion potionItem = item as Potion) != null)
{
    // Code to execute for Potion items
    potionItem.Drink();
} 
```

该`as`操作将检查对象的真实类型，如果不匹配则返回 null。因此，如果您将物品存储`Potion`在库存的插槽 0 中，它不会尝试将其用作`Armor`或`Weapon`物品。

当然，这是一个人为的例子。`Item`在类中定义基本的通用操作并在子类中覆盖它们会更有用。然后，您只需调用（例如）`item.DefaultAction()`并`DefaultAction`为每个子类型实现覆盖以执行适当的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:31:20.530

看起来您将无法在 Inventory 类之外设置武器，因为它是私有的，但如果您在 Inventory 类中进行设置，因为它是一个数组，您只需将武器分配给武器数组的索引。要删除它，您只需将该武器索引设置为空。

```
weapons[index] = weapon;  // add
weapons[index] = null;  // remove 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T00:42:47.380

我个人会公开这些

```
private Potion[] potions;
private Weapon[] weapons;
private Armor[]  armor;
private Food[]   food;
private Ore[] ores; 
```

但是，如果您想让它们保持私有，则可以使用方法来访问不同数组的不同位置。

例子。

```
public Weapon getWeaponAtPositon(int index)
{
    if (index >= 0 && index < InventorySlots)
        return weapons[index];
    else
        return null;
}

public void setWeaponAtPositon(Weapon weapon, int index)
{
    if (weapon != null && index >= 0 && index < InventorySlots)
        weapons[index] = weapon;
}

public void deleteWeaponAtPositon(int index)
{
    if (index >= 0 && index < InventorySlots)
        weapons[index] = null;
} 
```

您可以为您拥有的不同数组重复这些操作，这样您一次只能访问一个字段，这为您提供了从类外部修改数组的更安全的方式（即使它是仍然很容易）

希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T00:34:44.833

在数组位置使用对象之前，请务必检查*null ：*

```
if (potions[4] != null)
{
    potions[4].DrinkMe();
} 
```

您可以通过重新分配*null来删除项目*

```
potions[4] = null; 
```

请注意，所有数组位置都将从*null*开始。编码：

```
potions = new Potion[InventorySlots]; 
```

分配一个*数组*，`Potion`但不在`Potion`每个数组槽中放置一个新实例。这取决于你。

# angularjs - 使用 yo angular 脚手架时无法获取 /

> ID：15035478
> 
> 赞同：2
> 
> 时间：2013-02-23T00:24:33.680
> 
> 标签：angularjs, gruntjs, yeoman

我正在尝试按照以下工作流程步骤使 Yeoman 1.0 beta 的角脚手架工作：

```
npm install generator-angular generator-testacular  # install generators
yo angular                     # scaffold out a AngularJS project
npm install && bower install   # install default dependencies
grunt server                   # preview your app 
```

当我运行时：

```
grunt server 
```

我得到一个页面：

> 不能获取 /

运行时：

```
grunt 
```

我得到一个 dist 文件夹，其中只有脚本文件夹。
基本脚手架应该提供开箱即用的基本页面，对吗？

任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T08:04:13.443

这似乎是 Github 上最近的一个错误。BTFord 刚刚解决了这个问题，这也为我解决了这个问题。

将 Gruntfile.js 中的第 18 行调整为：

yeomanConfig.app = require('./component.json').appPath **|| '应用程序'** ;

[https://github.com/yeoman/generator-angular/commit/3a5a9dfea964b41d053d7e5fcb18906ace89aeda](https://github.com/yeoman/generator-angular/commit/3a5a9dfea964b41d053d7e5fcb18906ace89aeda)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T18:13:44.300

在我不小心移动了我的`app`文件夹后，我收到了这个错误。

只需将它放回我的`ProjectName`文件夹并修复它。

如果其他人遇到这个问题，希望它会有所帮助。

# vba - 基于当前统计的分布预测准确实时更新解决方案

> ID：15035482
> 
> 赞同：4
> 
> 时间：2013-02-23T00:25:02.490
> 
> 标签：vba, excel, excel-formula, prediction

作为我当前项目的一部分，我需要为以下内容找到一个漂亮的 Excel 解决方案：有一个在线游戏，人们可以在其中获得经验（类似于 SO rep）并在获得足够的经验后立即进入下一个级别（再次，这是非常像 SO 特权）。当然这对每个人都需要不同的时间：有些人在第一周获得足够的经验，有些人需要 5 周才能通过关卡。统计如下：

```
Week from join: Week 1  Week 2  Week 3  Week 4  Week 5
Level up:       5%      15%     40%     30%     10% 
```

也就是说，如果在这周我们有一些人加入了游戏，5周后他们都会进入下一个级别（有些人会放弃并离开，但为了简单起见，我没有在条件列表中包含这个因素）。

对于每场比赛，当前玩家的数量都很重要。为了使游戏保持流行和令人兴奋，每个级别都应该有明确**的最少**玩家数量。显然，这个价值在不断变化：新人来了，而其他人则更上一层楼。然而——这就是行动开始的地方！-**当前玩家的这个最小值不是恒定的**，可能会因许多因素而谨慎。为简单起见，这意味着在未来 10 到 15 周内，有一组预测的每周应该达到的最少玩家数量（这是基于收集的统计数据，但对于给定的任务，这是一个**已知**的集合）。

到目前为止一切顺利，图片如下所示：

![样品 1](../Images/c32c9d372c3075e2eb040d38256b4546.png)

而最左边的一列是**每周加入游戏**的人数，每周下面的粗体数字行是本周通过的人数**进入下一个级别**。

有很多新人，计算每周的总水平提升是微不足道的。相反的事情一点也不那么容易（嗯，至少对我来说） - 这就是问题：**如何预测每周所需的新人数量**（最左边的列） - 以获得所需的人数未来几周的下一个级别（底部的粗体行）？

到目前为止，我仍然找不到合适且准确的解决方案 2 周。我尝试了所有可能的选项 - 从复杂和数组公式到 Solver 插件，但没有运气：我总是有比方程更多的未知数。但是，我很确定这不是一项不可能完成的任务：对于某些解决方案，Solver 可以提供与期望值相当接近的数字，但并非针对每组期望值。

一些假设和（也许）重要条件：

1.  虽然应该不是问题，但实际的每周分布 %%% 数字会**根据需要**通过 DB 查询和进一步的 Excel 处理进行更新。
2.  到目前为止，数据库中可用的实际新人值当然被视为方程的**已知值**。显然，它们无法更改，例如，如果`less than desired`实际上一周内有多少人加入了游戏，那应该会影响对未来几周的总体预测。
3.  **实际进入下一关**的玩家总数**在特定时间段内**应该保持不变**：例如，如果我们希望在从 1 月开始的每个冬季周，至少有 100 人加入游戏，那么我们有 8 整周，因此有 800 名玩家总共。但是，如果 1 月份我们实际上每周有 80 名新玩家 - 这意味着 2 月份的努力工作）为了确定“检查点”**小计每 10 周计算一次**。在任何情况下，任何低值都必须在接下来的几周内得到补偿。**
***   反之亦然：如果我们在给定一周内的**新人数量超过预期**- 我们可能会在下周吸引更少的玩家来实现下一个小计目标。*   **玩家的流量是无限的**——提供图片样本只是为了清晰和更好地理解。可以根据需要在未来计算所需的值 - 预测模式是可重复的。如果这对解决方案很重要 -**从当前开始 10 周**。*   纯配方解决方案是可取的 - 甚至非常复杂。但是，VBA 仍然是一个可接受的选项。在任何情况下，计算值的准确实时/按需更新绝对优于简单但半手动或近似的解决方案。**

 **至于我在这里的每一个问题 - 我不要求`ready to play`解决方案，但非常感谢正确的指导或宝贵的建议。我故意不将其发布到[https://stats.stackexchange.com/](https://stats.stackexchange.com/) - 这更像是编程问题，因为理论显然很简单......或者可能太简单了，所以我看不到很明显的解决方案。

请随时通过评论请求任何其他详细信息或解释：尽管我试图尽可能清晰和简单，但某些对我来说并不重要的方面实际上可能对准确的解决方案至关重要。

示例文件（带有上述示例）：[https ://www.dropbox.com/s/q3bnagyet86i34r/StatPrognosis01.xlsx](https://www.dropbox.com/s/q3bnagyet86i34r/StatPrognosis01.xlsx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:15:52.610

不需要 VBA 或复杂的数组公式 - 您只需要一些简单的数学转换为公式：

主要思想是，您可以通过“反转”计算来确定每周的数量。逻辑如下：（注：单元格引用基于屏幕截图，即黄色的 5% 为 B2）：

*   如果一周的“加入者”中有 5% 进入下一个级别，并且第 1 周（总体）应该有 10 人进入，则 10/5% = 200 人需要在第一周加入。
    作为一个公式，这意味着： B5: `=B12`, A5:`=B5/B2`
*   从那里你可以计算出第一周的加入者是如何分布的（即第 5 行的其余部分没有变化）
*   在第 2 周，您希望 35 人成为下一个级别。从前一步您知道，从第 1 周开始，您有 30 人达到了该级别。因此，必须有 5 人来自第 2 周的加入者。当他们再次形成该波的 5% 时，总波必须为 5/5%=100
    在公式中： C6: `=C12-C5`, A6:`=C6/B2`
*   ...

现在，您可以使用一些 INDEX 函数来概括这一点，而不是为每周创建一个单独的公式。为此，我将您的示例扩展为周数作为标题列和行：

![在此处输入图像描述](../Images/6eddd4385152bc4a24a1f99e95871151.png)

要计算每个“每周加入波”的数量，即范围 C5:O17，请使用以下公式：

```
=IF($A5>C$4+N("这波还没有人加入："),0,
    IF(C$4=$A5+N("新一波第一周："),
        IF($A5=1+N("本周第一波必须是预期的数字："),C18,
        N("所有其他周，这必须是预期的数字减去
          前几周的“升级”：")+(C$18-SUM(C4:C$5))
    ),
    N("加入后的任何一周，应用每周升级比率
       加入总人数：")+INDEX($C$2:$O$2,C$4-$A5+1)*$B5)
)

```

以及每周所需的加入者数量，即范围 B5:B17：

```
=指数($C5:$O5,$A5)/$C$2

```

这是更新的[解决方案文件](https://www.dropbox.com/s/jk7kd270awma3wt/StatPrognosis01_Solution1.xlsx)！**

# sql - 如何优化一个相当直接的子查询，TOP 会增加执行时间

> ID：15035484
> 
> 赞同：1
> 
> 时间：2013-02-23T00:25:04.553
> 
> 标签：sql, sql-server

我正在尝试为以下查询找到更好的解决方案，这需要几秒钟才能运行，并且向其添加 TOP 会增加执行时间。

```
SET STATISTICS TIME ON;
DECLARE @firstTerm NVARCHAR(255);
DECLARE @lastTerm NVARCHAR(255);
DECLARE @totalKeywords INT;
SET @firstTerm = 'john';
SET @lastTerm = 'doe';
SET @totalKeywords=2;

SELECT 20 AS [Priority], clientid AS ClientId
FROM clients.dbo.ViewClientsByFullname WITH (NOLOCK)
WHERE @totalKeywords > 1 AND fullname IN (
 SELECT COALESCE(ParentName + ' ','') + @lastTerm AS Name
 FROM dbo.DiminuitiveNames WITH (NOLOCK) 
 WHERE Name=@firstTerm OR ParentName=@firstTerm
 UNION
 SELECT COALESCE(Name + ' ','') + @lastTerm AS Name 
 FROM dbo.DiminuitiveNames WITH (NOLOCK) 
 WHERE ParentName IN (
  SELECT ParentName 
  FROM dbo.DiminuitiveNames WITH (NOLOCK) 
  WHERE Name=@firstTerm OR ParentName=@firstTerm
  )
 ) 
```

该查询基本上是检查一个表中的备用名称列表（例如，@firstTerm=Robert 然后它还获取一个 bob、bobby、rob 等列表），然后也对这些备用名称进行搜索。

我试图想办法用 INNER JOIN 来做到这一点，但当时被难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:33:50.303

我想知道这将如何使用显式连接而不是`in`语句：

```
SELECT 20 AS [Priority], clientid AS ClientId
FROM clients.dbo.ViewClientsByFullname v WITH (NOLOCK) left outer join
     (SELECT distinct COALESCE(ParentName + ' ','') + @lastTerm AS Name
      FROM dbo.DiminuitiveNames WITH (NOLOCK) 
      WHERE Name=@firstTerm OR ParentName=@firstTerm
    ) c1
    on v.fullname = c1.name left outer join
    (select distinct COALESCE(Name + ' ','') + @lastTerm AS Name 
     FROM dbo.DiminuitiveNames WITH (NOLOCK) 
     WHERE ParentName IN (SELECT ParentName 
                          FROM dbo.DiminuitiveNames WITH (NOLOCK) 
                          WHERE Name=@firstTerm OR ParentName=@firstTerm
                         )
    ) c2
    on v.fullname = c2.name
WHERE @totalKeywords > 1 AND (c1.name is not null or c2.name is not null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:39:35.537

试试你的新查询

```
SELECT 20 AS [Priority],clientid AS ClientId
FROM clients.dbo.ViewClientsByFullname WITH (NOLOCK)
WHERE @totalKeywords > 1
  AND EXISTS (
              SELECT 1
              FROM dbo.DiminuitiveNames WITH (NOLOCK) 
              WHERE Name=@firstTerm OR ParentName=@firstTerm
                AND (COALESCE(ParentName + ' ','') + @lastTerm = fullname
                  OR COALESCE(Name + ' ','') + @lastTerm = fullname)    
              ) 
```

# java - 我想在 LWJGL 中围绕其中心旋转一个精灵

> ID：15035491
> 
> 赞同：1
> 
> 时间：2013-02-23T00:26:23.980
> 
> 标签：java, opengl, geometry, lwjgl

这里没有任何问题能够提供帮助。我想在 LWJGL 中围绕它的中心旋转一个精灵，一个带有纹理的四边形。

这是我的代码，目前，它围绕其他一些中心旋转。

```
public void draw(int x, int y, int rot) { 
```

// 存储当前模型矩阵 glPushMatrix();

```
 // bind to the appropriate texture for this sprite
    texture.bind();

    // translate to the right location and prepare to draw
    glTranslatef(x, y, 0);
            glRotatef(rot,0f,0f,1f);
    // draw a quad textured to match the sprite
    glBegin(GL_QUADS);
    {
    texture.bind(); // or GL11.glBind(texture.getTextureID());

    glBegin(GL_QUADS);
        glTexCoord2f(0,0);
        glVertex2f(100,100);
        glTexCoord2f(1,0);
        glVertex2f(100+texture.getTextureWidth()*2,100);
        glTexCoord2f(1,1);
        glVertex2f(100+texture.getTextureWidth()*2,100+texture.getTextureHeight()*2);
        glTexCoord2f(0,1);
        glVertex2f(100,100+texture.getTextureHeight()*2);
    glEnd();
    }
    glEnd();

    // restore the model view matrix to prevent contamination
    glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T12:27:57.613

围绕它们的中心（或任何偏移点，实际上）旋转 2d 精灵意味着将要旋转的点平移到窗口的原点。如果它是你的精灵的中间，这意味着将精灵翻译成点：
-sprite.width/2 ， -sprite.height/2
设想精灵被“绘制”，四分之一在屏幕区域，四分之三在屏幕区域之外此时屏幕区域。现在是旋转它的时候了，它仍然会围绕原点旋转，但这恰好也是精灵的中间。最后，将精灵翻译回您希望它在屏幕上显示的位置。
在旁注中，我不明白为什么人们评论他的方式已被弃用。这与问题完全无关，并且在某些情况下不想使用更新的功能。

# javascript - 如何根据 Prototype 中包含字符串的属性值选择所有元素

> ID：15035492
> 
> 赞同：2
> 
> 时间：2013-02-23T00:26:27.027
> 
> 标签：javascript, prototypejs, prototype

这是我的场景。

我在页面中有以下输入。

```
<input name="myInput[field1]" value="field1value" type="text" />

<input name="myInput[field2]" value="field2value" type="text" />

<select name="myInput[select1]">
   <option value="1" selected="selected">Option 1</option>
   <option value="2">Option 2</option>
   <option value="3">Option 3</option>
</select> 
```

使用 Prototype，我试图选择包含`myInput`在`name`属性中的所有字段并遍历每个字段以将它们的值附加到变量中，如下所示：

```
var myVar = field1Value + field2Value + select1Value; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:43:29.503

未经测试：

```
var myVar;
$$('input[name="myInput"]').each(function(i) {
    myVar += $(i).value; // Might be $(this).value
}); 
```

我不再编写原型代码了，但我*认为*会起作用。如果没有，它应该让你足够接近以完成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:01:37.117

正确的解决方案如下：

```
var myVar;
$$('[name^="myInput"]').each( function(i) {
   myVar += i.value;        
}); 
```

它们是选择所有输入的关键，`myInput`在它们的`name`属性中包含使用`^`符号前的`=`符号。实现这`[name^="myInput"]`一点的正确选择器也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T05:48:17.257

您还可以将类添加到您想要总结的任何字段，如下所示

```
var sum = 0;
$$('.addthese').each(function(i){
    sum += i.getValue()
}); 
```

这使它更加灵活，因为您不必担心表单元素的名称，只要它应用了类，就会添加值

我使用了该`getValue()`方法，因为它可以解决某些表单元素`value`在 DOM 中没有属性的问题。

# javascript - 无法 AJAXify 功能搜索

> ID：15035498
> 
> 赞同：1
> 
> 时间：2013-02-23T00:27:04.240
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3

[将此 Railscast](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)改编为在我的应用程序中的显示页面上工作，搜索工作正常，但它不是即时的（奇怪的是，它在 keyup 上，虽然它在提交时工作，我以为我没有编码） .

正如我在下面的更新中提到的，当我尝试通过将“remote：true”添加到 form_tag（与 RailsCast 的偏差）来解决问题时，搜索完全停止运行。知道发生了什么吗？

**index.html.erb**

```
<%= form_tag @post, :method => 'get', :id => "posts_search", class: "search_form squeeze form-inline" do %>
  <p>
    <%= text_field_tag :search, params[:search], 
    placeholder: "Search titles:", id: "search_field" %>
    <%= submit_tag "Search", name: nil, class: "btn squeeze search" %>
  </p>
  <div id="list"><%= render 'search' %></div>
<% end %> 
```

**_search.html.erb**

```
<ul class="blog_links">
<% @posts.first(@link_num).each do |p| %>
    <li class="total_hover">
        <%= p.name %>
    </li>
<% end %>
</ul> 
```

**index.js.erb**

```
$("#list").html("<%= escape_javascript(render("search")) %>"); 
```

**post_controller.rb**

```
 def index
    @posts = Post.search(params[:search]).reverse

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

 def search
    @posts = Post.search(params[:search]).reverse
    render json: { results: @posts }
 end 
```

**post.rb**

```
 def self.search(search)
    if search
      where('name LIKE ?', "%#{search}%")
    else
      scoped
    end
  end 
```

**javascripts/posts.js.coffee**

```
$ -> 
  $("#posts_search input").keyup ->
    $.get $("#posts_search").attr("action"), $("#posts_search").serialize(), null, "script"
    false 
```

**路线.rb**

```
match '/search', to: 'posts#search' 
```

**编辑**——当我向我的 form_tag 添加“remote: true”时，搜索完全停止工作。如在，它既不搜索 keyup 也不搜索提交。

不过，有趣的是，我的网络（在检查器中）似乎在我按下提交时（且仅在）时发出 GET 请求。该请求包括我的搜索词，因此，例如，当我在名为“这是一个非常长的帖子名称”（带有 slugged url）的帖子页面上搜索“long”时，请求是这样的：

```
http://localhost:3000/posts/this-is-a-really-long-post-title?utf8=%E2%9C%93&search=long 
```

该 URL 实际上并未显示在 URL 栏中，但它存在于网络请求中。

**编辑**——按照 Paulo 的建议将 remote:true 移动到我的 form_tag 中的正确位置。所以：

```
<%= form_tag @post, remote: true, method: 'get', id: "posts_search", class: "search_form squeeze form-inline" do %> 
```

再一次，拥有 remote:true 通常会停止搜索功能。当我检查那个元素时，我得到了这个：

```
<form accept-charset="UTF-8" action="/posts/this-is-a-really-long-post-title" class="search_form squeeze form-inline" data-remote="true" id="posts_search" method="get"> 
```

“this-is-a-really-long-post-title”是我进行搜索的页面上的帖子标题。它也是 url 中的 slug。因此，我认为问题可能是我在此标签中调用的操作。建议使用“/posts”，但是 a）我在节目中进行搜索，而不是在索引页面上进行搜索，并且 b）当我尝试“/posts”时，它会产生这个表单标签：

```
<form accept-charset="UTF-8" action="/posts" class="search_form squeeze form-inline" data-remote="true" id="posts_search" method="get"> 
```

当我按搜索时（在我在搜索框中键入时出现类似的错误，因此 keyup 正在工作），我收到此错误（在控制台检查器中）。

```
GET http://localhost:3000/posts?utf8=%E2%9C%93&search= 404 (Not Found) jquery.js:8476
 send jquery.js:8476
 jQuery.extend.ajax jquery.js:7931
 $.rails.rails.ajax jquery_ujs.js:110
 $.rails.rails.handleRemote jquery_ujs.js:175
 (anonymous function) jquery_ujs.js:392
 jQuery.event.dispatch jquery.js:3046
 elemData.handle jquery.js:2722 
```

**编辑**——如果我像在 Railscast 中那样删除 remote:true，并在路径中使用@post，我会得到这种奇怪的行为组合：

*   虽然我的 javascript 不再有与*提交*表单相关的任何操作，但当我提交搜索时，页面会完全重新加载，搜索执行并正确显示。
*   当我只是键入时，Firebug 控制台显示每次按键都会触发一个请求（考虑到我的 JS，这是有道理的），但实际页面上没有任何反应。

同样，当我添加 remote:true 时，页面上什么也没有发生。

**编辑**——如果我删除了 posts.js.coffee 的内容，搜索的执行结果完全相同。例如，如果 form_tag 中没有 remote:true，它就可以工作，但只有在按下提交时才有效。为什么它忽略 .js.coffee 文件中发生的事情？

**编辑以回应 JVNILL 的回答**

我用 jvnill 建议的内容替换了 posts.js.coffee 中的代码。现在搜索根本不起作用，但似乎这是在 javascript 中调用的搜索函数没有做它的事情的结果，导致 preventDefault 调用似乎正在工作，并且当我搜索时（这里，对于“真的”），浏览器似乎将我的按键作为参数发送：

```
Started GET "/archive?utf8=%E2%9C%93&search=rea&_=1362073395037" for 127.0.0.1 at 2013-02-28 09:43:17 -0800
Processing by PostsController#index as JS
  Parameters: {"utf8"=>"✓", "search"=>"rea", "_"=>"1362073395037"}
  Post Load (0.2ms)  SELECT "posts".* FROM "posts" WHERE (name LIKE '%rea%')
  Rendered posts/_search.html.erb (0.5ms)
  Rendered posts/index.html.erb within layouts/application (1.8ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.5ms)
Completed 200 OK in 23ms (Views: 21.5ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=real&_=1362073395038" for 127.0.0.1 at 2013-02-28 09:43:17 -0800
Processing by PostsController#index as JS
  Parameters: {"utf8"=>"✓", "search"=>"real", "_"=>"1362073395038"}
  Post Load (0.1ms)  SELECT "posts".* FROM "posts" WHERE (name LIKE '%real%')
  Rendered posts/_search.html.erb (0.6ms)
  Rendered posts/index.html.erb within layouts/application (1.9ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.4ms)
Completed 200 OK in 50ms (Views: 49.2ms | ActiveRecord: 0.1ms)

Started GET "/archive?utf8=%E2%9C%93&search=real&_=1362073395039" for 127.0.0.1 at 2013-02-28 09:43:17 -0800
Processing by PostsController#index as JS
  Parameters: {"utf8"=>"✓", "search"=>"real", "_"=>"1362073395039"}
  Post Load (0.1ms)  SELECT "posts".* FROM "posts" WHERE (name LIKE '%real%')
  Rendered posts/_search.html.erb (0.6ms)
  Rendered posts/index.html.erb within layouts/application (2.0ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.5ms)
Completed 200 OK in 17ms (Views: 16.1ms | ActiveRecord: 0.1ms)

Started GET "/archive?utf8=%E2%9C%93&search=reall&_=1362073395040" for 127.0.0.1 at 2013-02-28 09:43:17 -0800
Processing by PostsController#index as JS
  Parameters: {"utf8"=>"✓", "search"=>"reall", "_"=>"1362073395040"}
  Post Load (0.2ms)  SELECT "posts".* FROM "posts" WHERE (name LIKE '%reall%')
  Rendered posts/_search.html.erb (0.5ms)
  Rendered posts/index.html.erb within layouts/application (1.8ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.4ms)
Completed 200 OK in 16ms (Views: 15.2ms | ActiveRecord: 0.2ms)

Started GET "/archive?utf8=%E2%9C%93&search=reall&_=1362073395041" for 127.0.0.1 at 2013-02-28 09:43:17 -0800
Processing by PostsController#index as JS
  Parameters: {"utf8"=>"✓", "search"=>"reall", "_"=>"1362073395041"}
  Post Load (0.2ms)  SELECT "posts".* FROM "posts" WHERE (name LIKE '%reall%')
  Rendered posts/_search.html.erb (0.6ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:58:09.667

我不完全确定我是否正确理解了您，但是使用您的原始设置，您可以进行有效的搜索吗？您只想通过 ajax 提交表单？另外，您有延迟的搜索响应？我希望下面的代码可以解决这两个问题

```
@search = ->
  $.get $('#posts_search').attr("action"), $("#posts_search").serialize(), null, "script"

$ ->
  $('#posts_search input').keypress -> search()

  $('#posts_search').submit (e) ->
    e.preventDefault()
    search() 
```

[您可以使用keypress](http://code.google.com/p/jquery-utils/wiki/DelayedObserver)而不是 keyup 或使用观察搜索字段更改的插件，例如延迟观察者。您还需要观察何时提交表单并使用ajax而不是普通的表单提交

更新：刚刚注意到日志显示您将执行 index 操作，它实际上正在呈现一个 html 模板，这意味着您没有 js 模板。所以复制`show.js.erb`到`index.js.erb`.

更新：编辑索引操作。您需要添加的另一件事是`format.js`respond_to 块内的一行，因此它不会默认为html。

```
def index
  @posts = Post.search(params[:search]).reverse

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @posts }
    format.js
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:26:54.737

将远程选项添加到您的 form_tag。检查[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag)。

```
<%= form_tag('/posts', :remote => true) %>
# => <form action="/posts" method="post" data-remote="true"> 
```

使用 firebug 检查生成的表单是否将 data-remove 标记设置为 true。

# c++ - C++ std::sort 带有动态数组错误

> ID：15035506
> 
> 赞同：2
> 
> 时间：2013-02-23T00:27:49.623
> 
> 标签：c++, arrays, sorting

有很多关于如何`std::sort()`使用`std::vector`. 对于我的特定家庭作业，我不允许使用`std::vector`，因此我想`std::sort()`在自定义对象的动态数组上使用。

像这样：

```
int numberOfRoads = 100000;
Road* roads = new Road[numberOfRoads];
// Assume the comparator is defined correctly (<- this was the problem)
std::sort(roads, roads + numberOfRoads, SortRoadsComparator); 
```

这是我收到的主要编译器错误：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\algorithm(3781): error C2664: 'int (const void *,const void *)' : cannot convert parameter 1 from 'Road' to 'const void *'
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

我收到此错误大约 20 次。它究竟需要我做什么？

**排序道路比较器（）**

```
int SortRoadsComparator(void const *v1, void const *v2)
{
    Road *a = (Road *)v1;
    Road *b = (Road *)v2;

    if (a->Length > b->Length) 
        return 1;

    else if (b->Length > a->Length) 
        return -1;

    else
    {
        // Non-determinism case
        if (a->Length == b->Length)
        {
            if ( (min(a->CityA, a->CityB) < min(b->CityA, b->CityB)) ||
                 (
                      (min(a->CityA, a->CityB) == min(b->CityA, b->CityB)) && max(a->CityA, a->CityB) < max(b->CityA, b->CityB)                                   
                 )
               )
            {
                return -1;
            }
            else
            {
                return 1;
            }
        }
        else
        {
            // Not expecting this
        }
    }
} 
```

**由 billz 的评论解决。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:41:26.240

它要求您将适当的比较器传递给 std::sort。如果您阅读 std::sort[文档](http://en.cppreference.com/w/cpp/algorithm/sort)，您会发现它需要以下签名：

```
bool cmp(const Type1 &a, const Type2 &b); 
```

和：

> 类型 Type1 和 Type2 必须使得 RandomIt 类型的对象可以被取消引用，然后隐式转换为它们。

因此，在您的情况下，取消引用的“迭代器”道路具有 Road& 类型，并且功能可能类似于：

```
bool cmp( const Road &a, const Road &b ); 
```

PS 看起来您正在将 qsort 代码移植到 C++ 中。虽然建议签名：

```
int cmp( const Road &a, const Road &b ); 
```

将编译，它在逻辑上是不正确的，并且会隐藏您需要更改函数中的返回值并稍微更改逻辑的事实。在当前的实现中，std::sort 很可能会崩溃，但肯定不会按照您期望的方式对您的序列进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T00:37:28.967

`SortRoadsComparator`函数原型应该是：

```
bool SortRoadsComparator(Road const& v1, Road const& v2); 
```

您应该确保`SortRoadsComparator`返回弱有序`Road`。

# c - C蛮力递归函数

> ID：15035511
> 
> 赞同：-1
> 
> 时间：2013-02-23T00:28:30.357
> 
> 标签：c, recursion, brute-force

所以我在使用递归函数时遇到了麻烦，我的问题是我有一个代表金币的数组，它是一个 [] 这个数组有需要与两个用户共享的硬币，从长远来看，每个用户都可以获得相同数量的黄金或最好的解决方案......就像这样

```
Gold
10 6 5 2
User A : gets 10 2
User B : gets 6 5 
```

用户 A 和用户 B 之间的绝对值给了我差异。在这种情况下，它将是 1

为了解决这个问题，我需要通过所有可能的组合，这就是我使用暴力和递归函数的原因......为此，我必须运行每一个组合并查看两者之间的绝对差异，如果它比以前的更好我最好将其保存在全局变量中...

问题是该功能根本无法正常工作..如果您帮助我，我将不胜感激...

代码如下：

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

int best = 0; // keeps the best option

int share_friends_recursive(int nelems,int a[],int friend_a,int friend_b,int i){
    int sub = 0;
    friend_a += a[i];
    friend_b += a[i+1];
    if(i+1 == nelems){

        return 0;
    }else{
        sub = abs(friend_a - friend_b);
        if(sub < best){
            best = sub;
        }
        i++;
        share_friends_recursive(nelems,a,friend_a,friend_b,i);
    }

}

int main(int argc, char *argv[]) {
    //
    int nelems = 4;
    int a[] = {10,6,5,2};

    //friend A can get the first value
    // friend B gets the second one ...
    share_friends_recursive(nelems,a,0,1,0);
    printf("%d \n",best);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:58:05.270

你需要想想你在做什么。例如：

```
int share_friends_recursive(int nelems,int a[],int friend_a,int friend_b,int i){
    int sub = 0;
    friend_a += a[i];
    friend_b += a[i+1]; 
```

所以你把第一堆给朋友A，第二堆给朋友B。但是你稍后会递归`i`递增1，所以即使你已经给了第二堆，你也要给A它给B。这没有任何意义。

您想要做的是尝试将第一堆给 A 然后递归地给出其余的堆，然后重新开始，尝试将第一堆给 B 并递归地给出其余的堆并将这两种情况比较看看哪个最好。

**编辑**

好的，让我们一步一步来。你有你的递归函数：

```
int share_friends_recursive(int nelems,int a[],int friend_a,int friend_b,int i){ 
```

这里`nelems`是堆的总数，`a`是每堆的大小，`i`是已经分配了多少堆`friend_a`，`friend_b`是给了每个朋友多少。那么首先，如果我们已经分配了所有的堆怎么办？这是一个多么好的解决方案？调用者需要知道这一点，所以我们会返回它。

```
 if (i == nelems) {
        return abs(friend_a - friend_b); 
```

这告诉我们完成后我们做得有多好（或多差）。如果我们没有完成怎么办？好吧，那么我们需要尝试`i`同时给 a 和 b 打桩，看看哪个更好。

```
 } else {
        int toA = share_friends_recursive(nelems, a, friend_a + a[i], friend_b, i+1);
        int toB = share_friends_recursive(nelems, a, friend_a, friend_b + a[i], i+1); 
```

那么这些中哪一个更好呢？好吧，我们只是比较并返回较低的：

```
 if (toA <= toB)
            return toA;
        else
            return toB;
    }
} 
```

..这告诉我们最好的分裂有多好。

# linux - 一起使用linux命令“sort -f | uniq -i”来忽略大小写

> ID：15035512
> 
> 赞同：12
> 
> 时间：2013-02-23T00:28:32.190
> 
> 标签：linux, sorting, awk, gawk, uniq

我正在尝试在包含两列的数据列表中查找唯一且重复的数据。我真的只想比较第 1 列中的数据。

数据可能如下所示（由选项卡分隔）：

```
What are you doing?     Che cosa stai facendo?
WHAT ARE YOU DOING?     Che diavolo stai facendo?
what are you doing?     Qual è il tuo problema amico? 
```

所以我一直在玩以下内容：

1.  在不忽略大小写的情况下进行排序**（只是“排序”，没有 -f 选项）可以**减少重复项

    gawk '{ FS = "\t" ; 打印 $1 }' EN-IT_Corpus.txt | **排序** | uniq -i -D > 骗子

2.  忽略大小写**排序（“sort -f”）**给了我更多的重复

    gawk '{ FS = "\t" ; 打印 $1 }' EN-IT_Corpus.txt | **排序-f** | uniq -i -D > 骗子

如果我想查找忽略大小写的重复项，我是否认为＃2 更准确，因为它首先忽略大小写对其进行排序，然后根据排序的数据查找重复项？

据我所知，我无法组合排序和唯一命令，因为排序没有显示重复项的选项。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2018-11-09T10:05:41.417

你可以保持简单：

```
sort -uf
#where sort -u = the unique findings
#      sort -f = insensitive case 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T00:34:50.570

我认为关键是对数据进行预处理：

```
file="EN-IT_Corpus.txt"
dups="dupes.$$"
sed 's/        .*//' $file | sort -f | uniq -i -D > $dups
fgrep -i -f $dups $file 
```

该`sed`命令只生成英文单词；这些是不区分大小写的，然后不区分大小写地运行`uniq`，只打印重复的条目。`fgrep`然后再次处理数据文件，用or查找那些重复的键`grep -F`，指定要在文件中查找的模式`-f $dups`。显然（我希望）命令中的大空白`sed`是一个制表符；您可能可以`\t`根据您的外壳等进行编写`sed`。

事实上，使用 GNU `grep`，您可以：

```
sed 's/        .*//' $file |
sort -f |
uniq -i -D |
fgrep -i -f - $file 
```

如果重复的数量真的很大，你可以用以下方法压缩它们：

```
sed 's/        .*//' $file |
sort -f |
uniq -i -D |
sort -f -u |
fgrep -i -f - $file 
```

给定输入数据：

```
What a surprise?        Vous etes surpris?
What are you doing?        Che cosa stai facendo?
WHAT ARE YOU DOING?        Che diavolo stai facendo?
Provacation         Provacatore
what are you doing?        Qual è il tuo problema amico?
Ambiguous        Ambiguere 
```

所有这些的输出是：

```
What are you doing?        Che cosa stai facendo?
WHAT ARE YOU DOING?        Che diavolo stai facendo?
what are you doing?        Qual è il tuo problema amico? 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-23T00:40:18.503

或这个：

独特的：

```
awk '!arr[tolower($1)]++'  inputfile > unique.txt 
```

重复

```
awk '{arr[tolower($1)]++; next} 
END{for (i in arr {if(arr[i]>1){print i, "count:", arr[i]}} }' inputfile > dup.txt 
```

# ruby-on-rails - 回形针远程图像上传的无限递归

> ID：15035519
> 
> 赞同：0
> 
> 时间：2013-02-23T00:29:39.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, infinite, open-uri

在成功实现了 Trevor Turk 的博文[“使用 Paperclip 通过 URL 轻松上传”](http://trevorturk.com/2008/12/11/easy-upload-via-url-with-paperclip/)中的代码之后，在这个最新的迭代中，我的应用程序给了我以下错误：

```
Started POST "/pins" for 127.0.0.1 at 2013-02-22 14:05:20 -0300
Processing by PinsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Q6kmHS7Co+j2Y4JYd+3YO0OmDHU/upK1ADvRbS8UAIc=", "pin"=>{"image_url"=>"http://media-cache-ec3.pinterest.com/550x/b4/b7/82/b4b782bf268cb52d201853886510e3a9.jpg", "description"=>"Test"}, "commit"=>"Create Pin"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-c7vstl'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-17pzds5'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1kh7v9y'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-ngtq1u'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-jzmkac'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1x4vpj5'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1iwdp4q'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-cvro9z'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1tn727x'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-q77ipe'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1e5wt1x'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-7xaoic'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-kzw7ab'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-m1frw1'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-aojdb8'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-kzn0w6'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-cj55fi'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-d3s1h0'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-15hmo2q'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-17apjuj'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-f97eej'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1t9ou1f'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1dfnz21'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-ozc0ac'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1uiz51r'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-57ahli'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-u96rmb'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-vt2ph3'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-st55ih'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1phbyb3'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-wdu3nu'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1iit16u'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-117n6l2'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-qr5380'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-tod0l9'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1u19f33'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1rta45x'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-6o0hug'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-14e2zh7'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1lnwdhm'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-9en3jt'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-hhb0b2'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-9b0ak8'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1yyvnl9'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-15ebo0r'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-kpavxm'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-qgrtq2'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1erqxe5'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1h23wb0'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1heb0b3'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1oswpj8'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1y1z7di'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-89spzg'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-96op3f'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-4aizhy'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1s5nw68'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-k4jb2y'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1gjqddi'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1nzej79'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1yurmzq'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1yvoyxn'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-ec4b0b'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-12zau9q'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-va8ryp'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-11362zg'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-14d0lek'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-65t94r'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-2zqkrs'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-nzvtnc'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-mokk7l'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1v6n3k3'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-7tvcwq'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-z4qieu'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-5let78'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1azr7s1'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-xfbbhj'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-qpuxih'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1oqv313'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1lw2iyw'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-sgsyl7'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-z3kc9d'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1csf869'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1615j19'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-gjlms9'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1t0vhjc'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1x2w35'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1wgmxox'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-ce9qo7'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1mxr8v0'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1y1716x'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-19vj2ky'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1s2yq7p'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-10xd3y3'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-fohqek'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1p8i5y4'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-mx211u'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-nhtv6r'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1sdvwt9'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1nu8xde'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1yo03yt'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-pfu1cg'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-oqslme'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1s8wcup'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1x91fzc'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1b3zxzf'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1miary7'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-18ef2u'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-eo8odm'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1noqove'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-hl4yhz'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-mqjd16'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-10do8b2'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-n1dqn2'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1raiaq5'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1myor64'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1i2e0b3'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-hgtnym'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-lzuyqt'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-1cvazmm'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-shgn3h'
Command :: file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-a1n19w'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 201007ms

Errno::EMFILE (Too many open files - file -b --mime '/var/folders/8z/sh44jtbs33163s5hsjxj6tsc0000gr/T/open-uri20130222-25293-a1n19w'):
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/models/pin.rb:27:in `download_remote_image'
  app/controllers/pins_controller.rb:48:in `block in create'
  app/controllers/pins_controller.rb:47:in `create' 
```

看起来发生了某种无限递归，但我不知道在哪里。

以下是相关模型的样子：

```
require 'open-uri'

class Pin < ActiveRecord::Base
  belongs_to :user
  attr_accessible :description, :image, :image_url

  has_attached_file :image, styles: { medium: "320x240>"}

  validates :description, presence: true
  validates :user_id, presence: true
  validates_attachment :image, presence: true,
                                                         content_type: { content_type: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'] },
                                                         size: { less_than: 5.megabytes }

  # Remote image downloading
  attr_accessor :image_url
  before_validation :download_remote_image, :if => :image_url_provided?

  private

    def image_url_provided?
      !self.image_url.blank?
    end

    def download_remote_image
      self.image = URI.parse(image_url)
      # self.image_remote_url = image_url
    end

    def do_download_remote_image
      io = open(URI.parse(image_url))
      def io.original_filename; base_uri.path.split('/').last; end
      io.original_filename.blank? ? nil : io
    rescue # catch url errors with validations instead of exceptions (Errno::ENOENT, OpenURI::HTTPError, etc...)
      print "An error occurred: ",$!, "\n"
    end
end 
```

还有我的别针/_form.html.erb

```
<%= simple_form_for(@pin, html: { class: "form-horizontal"}) do |f| %>
  <%= f.error_notification %>
  <%= f.full_error :image_file_size, class: "alert alert-error" %>
  <%= f.full_error :image_content_type, class: "alert alert-error" %>

  <%= f.input :image, label: "Upload an image" %>
  <%= f.input :image_url, label: false, placeholder: "http://" %>
  <%= f.input :description, as: :text, input_html: { rows: "3" } %>

  <div class="form-actions">
    <%= f.button :submit, class: "btn btn-primary" %>
  </div>
<% end %> 
```

最后，我的 Pins 控制器非常标准：

```
 def new
    @pin = current_user.pins.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @pin }
    end
  end

  def create
    @pin = current_user.pins.build(params[:pin])

    respond_to do |format|
      if @pin.save
        format.html { redirect_to @pin, notice: 'Pin was successfully created.' }
        format.json { render json: @pin, status: :created, location: @pin }
      else
        format.html { render action: "new" }
        format.json { render json: @pin.errors, status: :unprocessable_entity }
      end
    end
  end 
```

似乎它一遍又一遍地运行 download_remote_image 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:38:49.490

在阅读有关'before_validation'的rails文档之后，似乎如果您不指定操作，即（before_validation：download_remote_image，：on =>：create），那么每次更改对象时它都会运行调用的方法。在这种情况下，调用 before_validation 方法，然后在该方法中，通过“self.image =”更改对象。如果您未指定“on create”，则在此阶段再次调用 before_validation，从而重新启动 download_remote_image 方法。当它到达'self.image='时，它会再次调用它，依此类推。因此，也许可以在验证前添加 ':on => :create' 或在启动方法之前通过“return if self.image.present?”之类的语句检查图像对象是否已经存在。

我对 Rails 很陌生，所以这个想法可能有缺陷，但对我来说很有意义。

# ruby-on-rails - rails 优点 gem 什么都不做？

> ID：15035526
> 
> 赞同：2
> 
> 时间：2013-02-23T00:30:37.107
> 
> 标签：ruby-on-rails, merit-gem

我将功绩宝石用于徽章/积分，它在应用程序中没有任何作用。在控制台中它可以工作，但在应用程序中它没有。

在merit.rb中：

```
# Use this hook to configure merit parameters
Merit.setup do |config|
  # Check rules on each request or in background
  config.checks_on_each_request = true

  # Define ORM. Could be :active_record (default) and :mongo_mapper and :mongoid
  config.orm = :active_record

  #Define :user_model_name. This model will be used to grand badge if no :to option is given. Default is "User".
  config.user_model_name = "User"

  # Define :current_user_method. Similar to previous option. It will be used to retrieve :user_model_name object if no :to option is given. Default is "current_#{user_model_name.downcase}".
  config.current_user_method = "current_user"
end

# Create application badges (uses https://github.com/norman/ambry)
Badge.create!({
 :id => 1,
 :name => 'just-registered'
})

Badge.create!({
  :id => 2,
  :name => 'voter',
})

Badge.create!({
  :id => 3,
  :name => 'liker-on-steroids'
}) 
```

在 point_rules.rb 中：

```
module Merit

class PointRules
include Merit::PointRulesMethods

def initialize
  # score 10, :on => 'users#update' do
  #   user.name.present?
  # end
  #
  # score 15, :on => 'reviews#create', :to => [:reviewer, :reviewed]
  #
  # score 20, :on => [
  #   'comments#create',
  #   'photos#create'
  # ]

  score 10, :on => 'users#update' do |user|
    user.nickname.present?
  end

  score 20, :on => 'pictures#create', :to => :user

  score 5, :on => 'pictures#vote_up', :to => :user do |picture|
    picture.vote_up
  end

  score 5, :on => 'pictures#vote_against', :to => user do |picture|
    picture.vote_against
  end
end
end
end 
```

让我们把图片上的20分#create：

```
def create
    @picture = Picture.new(params[:picture])
    @picture.user_id = current_user.id
    @picture.fame = false
    if @picture.save
      redirect_to root_path, notice: "Picture saved."
    else
      redirect_to root_path, error: "Could not save picture."
    end
  end 
```

路线：

```
resources :pictures do
    member do
      post :vote_up
      post :vote_against
      post :unvote
    end
  end 
```

但不仅如此。没有任何效果，它实际上没有响应 - 无论我做什么，它都不会给用户积分或徽章。

我正在使用 OmniAuth (facebook) 注册用户

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-04T13:09:42.537

[看看这个](https://github.com/tute/merit/wiki/How-to-grant-badges-on-user-registration-using-Devise)，我想这可以给你一个方法！

祝你好运！

# javascript - JavaScript中的减指数

> ID：15035532
> 
> 赞同：2
> 
> 时间：2013-02-23T00:31:05.977
> 
> 标签：javascript, numbers, double

出于兴趣而不是现实生活的需求：是否有可能在 JavaScript 中减去两个数字的指数？因为`1e+29 * 1e-3`（或`1e+29 / 1e+3`）的结果是不精确的数字`9.999999999999999e+25`，即使正确的结果`1e+26`可以用 JavaScript 表示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:06:16.557

*必须*有更简洁的方法，但一种选择是将您的数字转换为字符串，对其进行操作，然后将其转换回数字：

```
function exp_add(num,exp) {
    var split = num.toExponential().split('e');
    var exponent = parseInt(split[1],10);
    exponent += exp;
    return parseFloat(split[0] + "e" + exponent);
} 
```

[jsFiddle](http://jsfiddle.net/mgibsonbr/jqerL/)的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:13:19.963

您可以使用`Math.log(1e29)/Math.LN10`，但是会产生`28.999999999999993`. Base 2 对这些数字来说是不精确的。所以我们最后的手段是`Number.prototype.toString`，它正确地产生了`"1e29"`。我们现在如何使用它？

```
function toExp(num) {
    return num.toExponential().split("e").map(Number);
    // num.toString() only works for num <= 1e-6 and num >= 1e21
}
function fromExp(exp) {
    return exp[0] * Math.pow(10, exp[1]);
// or:     parseFloat(exp[0]+"e"+exp[1]);
}

function expMultiply(a, b) {
    return [ a[0]*b[0], a[1]+b[1] ];
}
function expDivide(a, b) {
    return [ a[0]/b[0], a[1]-b[1] ];
}

> fromExp(expMultiply(toExp(1e29), toExp(1e-3)))
1e+26
> fromExp(expDivide(toExp(1e29), toExp(1e3)))
1e+26 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:16:30.243

您自然会看到这是浮点除法的结果，尤其是当一个数字远小于另一个数字时。但是，如果数字具有相同的底数，也许你应该只存储它们的指数。否则，您可以使用对数：

```
( Math.log(1e29) + Math.log(1e-3) ) / Math.LN10
> 25.999999999999993 
```

您可能只想将该结果四舍五入到小数点后几位，以处理不准确性并获得以 10 为底的结果。

# python - 在 Sublime Text 中构建 Python

> ID：15035538
> 
> 赞同：3
> 
> 时间：2013-02-23T00:31:57.753
> 
> 标签：python, build, sublimetext2, build-error

我无法在朋友的使用 Sublime Text 2 运行 Windows XP SP3 的计算机上构建 Python 系统。我们重新安装了 Python 2.7.3 和 Sublime Text 2，但仍然遇到问题。我们的`Python.sublime-build`领域说：

```
{
    "cmd": ["C:\\Python27\\python.exe", "-u", "$(FULL_CURRENT_PATH)"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

当我们尝试构建简单的 Python 程序时，例如：

```
2 * 2 
```

Sublime Text 不会构建系统，而是会吐出：

```
C:\Python27\python.exe: can't find '__main__' module in ''
[Finished in 0.1s with exit code 1] 
```

如果我能在这方面得到一些帮助，那就太好了。非常感谢帮助我的人！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T02:45:40.070

我通过将文件保存为 .py 文件来解决此问题。我打开了一个新文件，添加了一些代码，并尝试构建它，这给了我这个错误。保存为 .py 文件后，我能够正常构建和运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-22T22:30:55.077

你没有保存文件。您需要像 name_fila.py 这样保存文件，然后才能运行它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T05:47:15.583

我将它用于 Python 3.4，效果很好

您放置的当前路径似乎是问题所在。

`"$(FULL_CURRENT_PATH)"`-->`"$file"`

`{ "cmd": ["C:\\Python34\\python.exe", "-u", "$file"], "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)", "selector": "source.python" }`

亚历山大

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-23T00:57:33.983

我认为你应该制作一个`__main__`类似这个`__name__ == '__main__'`模块然后尝试编译它......

# android - Eclipse/ADT 中的模拟器问题

> ID：15035539
> 
> 赞同：0
> 
> 时间：2013-02-23T00:31:58.270
> 
> 标签：android, eclipse

在测试我的代码时，我遇到了一些不一致的错误。我安装了许多外部库，甚至我编写的代码也存在一些问题。

我将在模拟设备上运行一个项目，然后在实际设备上运行完全相同的项目（相同的品牌和 API 级别），我经常在模拟器上遇到被拒绝的类和丢失文件的问题/崩溃，但在实际设备上却没有（一切运行良好）。这是刚刚发生的事情吗？

如果这只是发生的事情，我该如何在许多不同的设备上进行测试？我不介意买它们，但是我不知道要买哪些，或者从哪里得到它们。鉴于我的问题，我想我只需要知道我应该如何为 Android 开发。

# javascript - 需要全局匹配帮助的 JavaScript 正则表达式

> ID：15035540
> 
> 赞同：4
> 
> 时间：2013-02-23T00:31:58.510
> 
> 标签：javascript, regex

我是 JavaScript 新手，对正则表达式有疑问。我有以下代码：

```
var patt3=new RegExp(/(July|August)\s+\d{1,2}(\s|,)\d{4}/g);
var str3 = "August                               12,1988";
var match3 = str3.match(patt3);
document.write(match3.toString() + "<br/>"); 
```

输出为：1988 年 8 月 12 日

这是相同的代码，但从 RegExp 的末尾删除了“g”：

```
var patt3=new RegExp(/(July|August)\s+\d{1,2}(\s|,)\d{4}/);
var str3 = "August                               12,1988";
var match3 = str3.match(patt3);
document.write(match3.toString() + "<br/>"); 
```

输出变为：August 12,1988,August,,

根据我在网上找到的定义，'g' 应该匹配所有出现的模式。但是我仍然对“g”对代码的影响感到困惑。

我将不胜感激任何澄清。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:42:06.350

关键的区别在于，如果正则表达式模式是全局的，则该`string.match`方法被[定义](http://es5.github.com/#x15.5.4.10)为具有不同的行为。

如果模式是全局的，则包含所有匹配项的数组。在您的情况下，您只有一个匹配项，但您可以通过以下示例看到差异

```
let matches = "aaaa".match(/a(a)/g); 
console.log(matches) // returns ["aa", "aa"]
```

但是，如果模式不是全局的，则该方法返回一个与找到的第一个匹配项对应的数组。该数组在第一个位置包含完全匹配的字符串，在其他位置包含捕获。捕获是由括号分隔的正则表达式的位。同样，您可以看到该示例的不同之处：

```
"aaaa".match(/a(a)/g); // returns ["aa", "a"] 
```

* * *

最后，我只想指出您的代码的一些小问题。

首先，这里不需要使用`new Regexp`构造函数。只需直接使用正则表达式文字

```
var patt3 = /(July|August)\s+\d{1,2}(\s|,)\d{4}/g 
```

其次，不要盲目“toString”的东西。在您的情况下，您将该方法应用于数组，这就是您得到奇怪结果的原因。

最后，学习使用开发者工具，包括调试器和console.log。在表现力和生产力方面，它比滥用 document.write 和 alert 要好得多。

```
console.write(match3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:41:53.737

`g`只匹配*整个*模式的所有出现。它与 PHP 等匹配组不同`preg_match_all`。如果没有`g`，它只匹配模式 ( `matches[0]`) 的第一次出现，并且所有匹配的组都是其他数组元素。

如果你也想获得嵌套匹配，你可以使用[John Resig](http://ejohn.org/blog/search-and-dont-replace/)描述的概念来做到这一点：

```
str3.replace(patt3, function () {
    //This is the first captured group in all matches iterated over
    console.log(arguments[1]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T00:42:59.800

引用[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)`String.match`：_

> 如果正则表达式不包含 g 标志，则返回与[regexp.exec(string)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)相同的结果。
> 
> 如果正则表达式包含 g 标志，则该方法返回一个包含所有匹配项的[Array 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)如果没有匹配项，则该方法返回 null。

在第二个示例中，数组的第一个元素是匹配项，而其他元素是捕获组。使用`g`，每个元素将是不同的匹配项。

# c++ - C++模板类编译错误

> ID：15035544
> 
> 赞同：0
> 
> 时间：2013-02-23T00:32:28.580
> 
> 标签：c++, compiler-errors, hashtable

我正在自己实现一个 HashTable 并发现以下错误：

```
 19 template <class key, class value>
 20 class HashEntry { ... }

 60 template <class key, class value>
 61 class HashTable
 62 {
 63 
 64 private:
 65     size_t _tableSize;
 66     HashEntry<key, value>** _table;
 67 
 68 public:
 69 
 70     HashTable(size_t s)
 71     {
 72         _tableSize = s;
 73         _table = (HashEntry<key, value>**) smalloc(s * sizeof(HashTable<key, value>*));
 74     }
 75 
 76     void addEntry(HashEntry<key, value>(key k, value v))  <---
 77     {
 78 
 79     }
 80 
 ...
 91 };

 93 int main ()
 94 {
 95     HashTable<int, string> t(100);
 96     t.addEntry(HashEntry<int, string>(1, string("a")));    <---

HASH_chaining.cc:96: error: no matching function for call to ‘HashTable<int, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >::addEntry(HashEntry<int, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >)’
HASH_chaining.cc:76: note: candidates are: void HashTable<key, value>::addEntry(HashEntry<key, value> (*)(key, value)) [with key = int, value = std::basic_string<char, std::char_traits<char>, std::allocator<char> >] 
```

乍一看，我找不到任何问题。我认为这与我定义 addEntry 接口的方式有关。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:36:14.147

您无法提取参数列表中的内容（看起来这就是您想要做的）。

更改您的`addEntry`函数，使其签名为：

```
void addEntry(HashEntry<key, value> h) 
```

或者

```
void addEntry(key k, value v) 
```

在我看来，第二个看起来更干净，但如果你真的希望调用者`HashEntry`出于某种原因构造，第一个也可以。

# python-sphinx - 从主 TOCTree 隐藏 Sphinx 小节

> ID：15035546
> 
> 赞同：13
> 
> 时间：2013-02-23T00:32:34.143
> 
> 标签：python-sphinx, sections, toctree

是否可以从主 TOCTree 隐藏 RST 文件中存在的一个（或所有）小节？

让我再描述一下：

**索引.rst**

```
:doc:`Label <path/to/rst/file>`
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. toctree::

   Label <path/to/rst/file>
   Label <path/to/rst/file>

   Label of Children TOCTree <path/to/rst/children/file> 
```

**孩子/file.rst**

```
Children Title
==============

.. toctree::

   Label of Grandchildren 1
   Label of Grandchildren 2

Subsection 1
------------

Subsection 2
------------

Subsection 3
------------ 
```

这些文件在构建后将生成主 TOCTree：

*   标签
*   标签
*   儿童标签
    *   孙子的标签 1
    *   孙子的标签 2
    *   第 1 款
    *   第 2 小节
    *   第 3 小节

而且我想隐藏子部分，只保留 TOCTrees，尽可能多和尽可能深。例如：

*   标签
*   标签
*   儿童标签
    *   孙子的标签 1
    *   孙子的标签 2

但是，如果单击**与儿童标签**关联的超链接，则子部分将照常列出；

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-11-04T15:27:45.093

我花了一段时间才弄清楚，但我想我终于明白了。“技巧”是您需要在包含 toc 的父 rst 和包含该部分的子 rst 中设置指令。

对我来说，我先在父级的 toc 中添加了`:maxdepth:1`and ，然后在子级的 toc 中添加了和，这非常有效。这使我可以在子项中进行分层子节格式，该子项可以正确呈现，但不会显示在 TOC 中。`:titlesonly:``:titlesonly:`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-17T00:11:10.133

“rubric”指令可以实现你想要的：

[http://sphinx-doc.org/markup/para.html#directive-rubric](http://sphinx-doc.org/markup/para.html#directive-rubric)

它不会以完全相同的方式生成章节标题，但至少它们不会出现在目录中

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-31T18:28:05.930

您可以使用 的`maxdepth`参数[`toctree`](http://sphinx-doc.org/markup/toctree.html)来设置 TOC 的深度：

```
.. toctree::
    :maxdepth: 2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-24T05:30:28.767

尝试将第 1 小节的 ------------------ 更改为 ***************** 等。此外，您可以制作多个目录树每个都有自己的最大深度，例如

```
.. toctree::
    :maxdepth: 2

    Label <path/to/rst/file>
    Label <path/to/rst/file>

.. toctree::
    :maxdepth: 1
    Label of Children TOCTree <path/to/rst/children/file> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-27T00:45:53.637

您可以制作自己的标签

你想要你的标题类型的地方

```
|start-h3| My Title |end-h3| 
```

在文件写入结束时

```
.. |start-h3| raw:: html

     <h3>

.. |end-h3| raw:: html

     </h3> 
```

# java - java.lang.NoClassDefFoundError: javax/mail/MessagingException

> ID：15035548
> 
> 赞同：7
> 
> 时间：2013-02-23T00:33:18.217
> 
> 标签：java, jakarta-mail, noclassdeffounderror

我一直在开发一个程序，该程序使用 Javamail API 根据时间事件和某些条件发送电子邮件。该程序在 Eclipse（最新版本）中完美运行，并且 javamail 和 activator jar 位于构建路径中，javamail 的依赖项也是如此。当我将项目导出为 jar 并尝试运行它时，就会出现问题。（生成的堆栈跟踪与 Eclipse 构建路径中缺少 javamail jar 的情况相同）。

堆栈跟踪如下：

```
`Exception in thread "Timer-1" java.lang.NoClassDefFoundError: javax/mail/MessagingException
at SpaceCheck.HourlySpaceAlerts(SpaceCheck.java:212)
at WarningReports.run(WarningReports.java:21)
at java.util.TimerThread.mainLoop(Unknown Source)
at java.util.TimerThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: javax.mail.MessagingException
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 4 more` 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T00:42:10.627

假设您将`javamail`和其他依赖项放入`lib/`相对于导出的 jar 的文件夹中，您必须在清单文件中声明这些 jar：

```
Class-Path: lib/javamail.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:12:12.543

您还可以通过在此 url 添加软件 REPO 之一来获取 Java EE 库。

[http://download.eclipse.org/tools/orbit/downloads/](http://download.eclipse.org/tools/orbit/downloads/)

# sql-server - 将表 B 中的列的值设置为表 A 中的列的最大值

> ID：15035549
> 
> 赞同：0
> 
> 时间：2013-02-23T00:33:19.127
> 
> 标签：sql-server, tsql

我有两个这样的表：

```
Application  
ApplicationID  ApplicationDesc  VersionNo
1              APP1             1
2              APP2             1
3              APP3             1
4              APP1             2 
5              APP2             2
6              APP1             3

Order
OrderID      ApplicationID      OrderDescription
1            1                  Belongs to APP1 version 1
2            4                  Belongs to APP1 version 2
3            6                  Belongs to APP1 version 3 
```

我想用相应应用程序的最新版本的 ApplicationID 更新表 Order 中的 ApplicationID 列。

我希望数据看起来像这样：

```
Order
OrderID      ApplicationID      OrderDescription
1            6                  Belongs to APP1 version 1
2            6                  Belongs to APP1 version 2
3            6                  Belongs to APP1 version 3 
```

我该如何做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:03:35.770

您可以使用公用表表达式来查找最新的 ApplicationID，然后将您的更新语句加入 CTE：

```
;WITH cteNewest(ApplicationID, NewestApplicationID)
AS(
  SELECT
     ApplicationID
    ,MAX(ApplicationID) OVER(PARTITION BY ApplicationDesc)
  FROM Application
)

UPDATE o
SET o.ApplicationID = new.NewestApplicationID
FROM [Order] o
JOIN cteNewest new
  ON o.ApplicationID = new.ApplicationID; 
```

有一个[SQLFiddle](http://sqlfiddle.com/#!3/73dc8/12)

# excel - Excel：SUMIFS 对与文本字符串中包含的文本字符串相邻的值求和

> ID：15035550
> 
> 赞同：4
> 
> 时间：2013-02-23T00:33:23.203
> 
> 标签：excel, excel-formula

我希望使用将通配符搜索集成到参考公式中的多条件、多数组函数对数值求和。

我的数据结构如[http://bit.ly/Xv8tHP的摘录](http://bit.ly/Xv8tHP)

![在此处输入图像描述](../Images/aefbb22f03ef26b3f2602e0c56e7351f.png)

我对 C2 中公式的目标是：

*   “价格”列中 $C$3:$C$24 的总和值，
*   对于 $A$3:$A$24 = A2 [本例中为“New York”] 的行，以及
*   对于在 B2 ["Digital TV" and "Basic" in this example] 中找到 $B$3:$B$24 中的全文字符串的行。

在此示例中输出到 C2 的结果将是来自 C24 的 80.95 美元 + 来自 C3 的 38.99 美元 = 119.94 美元。

对于第一个条件，以下公式片段有效： =SUMIFS($C$3:$C$24,$A$3:$A$24,"="&A2,[...]

但是在整合第二个条件时，我很困惑，无论是使用 ISERROR(SEARCH[...])=FALSE、INDEX 还是其他参考函数。条件的“包含”部分似乎很麻烦。

有人有建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T02:14:45.917

试试这个：

```
=SUMPRODUCT($C$3:$C$24,--(A2=$A$3:$A$24),IF(ISERROR(FIND($B$3:$B$24,B2)),0,1)) 
```

您必须通过在公式栏中按`Ctrl`+ `Shift`+将此公式作为数组公式输入。`Enter`数组条目对于`FIND`将数组作为搜索文本参数是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T02:04:49.837

将另一个辅助函数添加到另一列，比如`E3:E24`包含公式

```
=FIND(B3,$B$2) 
```

（这是区分大小写的。为了不区分大小写使用`SEARCH`而不是`FIND`）

那么 `SUMIFS`公式就是

```
=SUMIFS($C$3:$C$24,$A$3:$A$24,A2,$E$3:$E$24,">0") 
```

# uiviewcontroller - 使用 viewController 来控制屏幕的一部分

> ID：15035552
> 
> 赞同：0
> 
> 时间：2013-02-23T00:34:18.530
> 
> 标签：uiviewcontroller

试图实现一个扫雷应用程序。并在尝试将板添加到滚动视图以进行缩放和平移时遇到问题。然后所有的触摸都被发送到滚动视图并且触摸丢失了。我在想我可以使用另一个 viewController 来处理所有的触摸类型事件，并将其他事件（平移和缩放）传递给应用程序的 rootviewController。我是否必须实现 didStartPanning 的差异。

或者这可以在它自己的 tileview 中处理。和 boardView 处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:22:51.243

因此，我能够确认您无法轻松响应同一视图控制器中子视图和滚动视图的触摸。似乎最好响应 VC 中的视图触摸并在更高级别使用滚动视图。现在效果很好。

# data-binding - Angular JS - 自定义指令中的两种方式绑定

> ID：15035557
> 
> 赞同：0
> 
> 时间：2013-02-23T00:34:58.523
> 
> 标签：data-binding, angularjs, directive, dynamic-properties

如果这个问题已经得到解答，请指点我当前的位置（我已经搜索了很多，但找不到匹配的解决方案 - 如果我错过了，我很抱歉！）

首先：目前我必须坚持使用 AngularJS 1.0.0rc10 并且：（如果可能的话）我希望指令的定义/调用方式保持这种方式（因为它已经被广泛使用）

这实际上应该是微不足道的——我仍然不知道我的方法中的缺陷是什么。基本上我已经创建了一些用于生成表单元素的自定义指令（它们比我提供的示例复杂一些，但问题是一样的）。我在控制器中生成（实际上是复制）一个对象，将其传递到范围并使用我的指令绑定到该对象的各种属性（在示例中，我添加了两个用例：单个列表和一个数组由中继器处理的对象）

当涉及到原始数据类型时，似乎双向绑定并不成功。期望的结果应该是：更改纯文本属性的输入（它与实例对象一起使用）并在控制台（firefox：console.log）中记录范围的对象，这应该反映更改。

请注意，我确实选择了编译方法，因为属性的名称（在这种情况下：文本和实例）应该在 HTML 视图中自由定义（= 指令声明）

我在下面创建了一个小提琴：http: [//jsfiddle.net/matthias000/vqwHM/2/](http://jsfiddle.net/matthias000/vqwHM/2/)。

万一小提琴在这里不起作用是代码：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <script language="javascript" type="text/javascript" src="jquery/jquery-1.7.2.min.js"></script>
    <script language="javascript" type="text/javascript" src="angular/angular-1.0.0rc10.js"></script>
    <script language="javascript" type="text/javascript" src="bootstrap/js/bootstrap.js"></script>  
    <script type="text/javascript">
        angular.module('TestApplication', [])
            .directive('formTextInput', function() {
                return {
                    restrict: 'E',
                    compile: function(element, attrs) {
                        var htmlText = '<input class="input-small" type="text" ng-model="' + attrs.property + '">';
                        element.replaceWith(htmlText);
                    }
                }
            })
            .directive('formObjectInput', function() {
                return {
                    restrict: 'E',
                    compile: function(element, attrs) {
                        var htmlText = '<div class="input-append">' +
                            '<input class="input-small" type="text" ng-model="' + attrs.property + '.text">' +
                            '<span class="add-on">{{notimportant}}</span>' +
                        '</div>';
                        element.replaceWith(htmlText);

                        return this.link;
                    },
                    link:function(scope, element, attrs) {
                        scope.notimportant = eval('scope.' + attrs.property + '.append');                       
                    }
                }
            })
            .directive('formShowBtn', function() {
                return {
                    restrict: 'E',
                    replace:true,
                    scope:{},
                    template: '<button class="btn" ng-click="display()">Show</button>',
                    link:function(scope, element, attrs) {
                        scope.display = function() {
                            scope.$parent.display(attrs.property);
                        };
                    }
                }
            });

        function TestController($scope) {
            var testobjectsingle = {text: 'hello text', instance: {text: 'hello instance', append: 'ST'}};
            $scope.testobjectsingle = testobjectsingle;

            var testobjectarray = [];
            for (var i = 0 ; i < 2 ; i++) 
                testobjectarray.push( {text: 'hello text' + i,  instance: {text: 'hello instance' + i, append: 'ST'}} );

            $scope.testobjectarray = testobjectarray;

            $scope.display = function(value) {
                console.log( JSON.stringify($scope[value]) );
            };
        }
    </script>
</head>
<body>
    <div ng-app="TestApplication">
        <div ng-controller="TestController">
            <div style="padding:20px">
                <form-text-input data-property="testobjectsingle.text"></form-text-input>
                <form-object-input data-property="testobjectsingle.instance"></form-object-input>
                <form-show-btn data-property="testobjectsingle"></form-show-btn>
            </div>

            <div style="padding:20px">
                <div ng-repeat="singleelement in testobjectarray">
                    <form-text-input data-property="singleelement.text"></form-text-input>
                    <form-object-input data-property="singleelement.instance"></form-object-input>
                </div>
                <form-show-btn data-property="testobjectarray"></form-show-btn>
            </div>
        </div>
    </div>
</body>
</html> 
```

非常感谢您的帮助！

亲切的问候，马蒂亚斯

编辑：小提琴的最佳选择应该是“不换行” - 对不起！

# python - 我如何将文本文件中的单词翻译成 piglatin

> ID：15035560
> 
> 赞同：1
> 
> 时间：2013-02-23T00:35:19.367
> 
> 标签：python, python-3.x

因此，通过使用“for”语句，我将文本文件分解为列表，如下所示：

```
['these', 'are', 'lines']
['meant', 'to', 'be', 'translated']
['to', 'piglatin'] 
```

所以基本上如果它以元音'aeiou'开头，你就拿这个词+'yay'，如果它没有你把字母移到后面直到你到达一个元音然后加yay，如果它没有元音你忽略它。

例如; 即将翻译，将是：aboutyay otay ebay anslatedtray。

到目前为止，这是我的代码：

```
untranslated = open('english.txt','r')
vowels = 'aeiou'

for lines in untranslated:
    words = lines.split()
    print(words) 
```

我不想要关于如何完成这个或多或少的完整代码，我将如何从第一个单词开始以及如何拼接它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:39:00.020

如何对字符串进行切片：

```
word = 'these'
print word[0] # it's similar to list indexing, starts at 0 
```

要按倒序获取字母，请使用负数：`word[-1]`是最后一个字母；`word[-2]`是倒数第二个，等等。

`word[1:]`返回从索引 1（第二个字母）到末尾的每个字母。'word[:5] `returns every letter up to index 5 (exclusive, letters 1, 2, 3, and 4).` words[1:5]` 返回从索引 1 到索引 5 的每个字母（字母 2、3 和 4）。

由于您有多条线路，因此您想要这样做，`words += lines.split()`因为

```
untranslated = open('english.txt','r')
vowels = ('a', 'e', 'i', 'o', 'u') # I like using lists/tuples rather than strings
# if you are just checking if something is in it
newWords = []

for lines in untranslated:
    words += lines.split() # this fixes the last line problem
    # this assumes each word is on one line, separated by a space (like: 'these are words')

for word in words: # iterates through every word
    if word[0] in vowels: # if first letter is a vowel
        new_word = word + 'yay'
    else:
        new_word = word[1:] + word[0] + 'ay'
        newWords.apend(new_word) 
```

根据 Eric Roper 的建议，您可以创建字典作为翻译：

```
newWords = {}
for word in words:
    if word[0] in vowels:
        new_word = word + 'yay'
        newWords[word]  = new_word
    else:
        new_word = word[1:] + word[0] + 'ay'
        newWords[word] = new_word 
```

一些参考资料：

*   [字符串](http://www.tutorialspoint.com/python/python_strings.htm)
*   [字典](http://www.tutorialspoint.com/python/python_dictionary.htm)

# php - 关闭功能之前的 PHP 分析延迟

> ID：15035565
> 
> 赞同：5
> 
> 时间：2013-02-23T00:35:32.987
> 
> 标签：php, performance, profiling

```
// VERY BEGIN OF SCRIPT
$_SERVER['HX_startTime'] = microtime(true);

...

// MY SHUTDOWN FUNCTION
register_shutdown_function('HX_shutdownFn');
function HX_shutdownFn()
{
    // formatTimeSpan is simple time to string conversion function
    var_dump(formatTimeSpan(microtime(true) - $_SERVER['HX_startTime']));
}

...

// VERY END OF SCRIPT
var_dump(formatTimeSpan(microtime(true) - $_SERVER['HX_startTime'])); 
```

我有**0.0005s**。在脚本和**1.1s**结束时。在关机功能。正常吗？1秒在哪里丢失？

脚本是纯php，不使用db连接等。在WAMP服务器上测试（php v 5.3.9，apache 2.2.21）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T13:46:50.127

关闭某些连接并完成清理后，关闭函数将耗尽正常堆栈。延迟总是会作为此函数的性质发生，这取决于您之前所做的或尝试在此函数中执行的操作。

手册没有说明，但它是一个调试功能，也应该这样对待。

在正常操作中，您永远不应该使用它。没有优势。您可以在脚本末尾手动调用您的关闭函数，并为意外关闭留下一个处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T19:57:24.890

正如其他人所提到的，可能还有其他关闭功能。此外，当对象超出范围（如果在全局范围内）时，会调用对象的析构函数。

您可以使用 XDebug 模块 ( [http://xdebug.org/](http://xdebug.org/) ) 详细查看所有这些内容，尤其是在使用跟踪文件时。安装和配置 XDebug 后，您可以将 ?XDEBUG_TRACE=1 附加到您的 url 并查看整个页面执行的完整调用堆栈，包括每行的时间信息。

使用适当的选项，您还可以查看分配、参数名称和值、返回值和分配。这是一个非常强大和有用的工具。

这些是我用于 XDebug 的设置：

```
xdebug.default_enable=1
xdebug.profiler_enable=0
xdebug.profiler_enable_trigger=1
xdebug.profiler_append=On
xdebug.auto_trace=Off
xdebug.show_mem_delta=On
xdebug.collect_return=On
xdebug.collect_params=4
xdebug.profiler_output_dir = /tmp
xdebug.profiler_output_name = profile.%H.%t.%p
xdebug.var_display_max_children = 999
xdebug.var_display_max_data = 99999
xdebug.var_display_max_depth = 100
xdebug.remote_enable=1
xdebug.cli_color=1
xdebug.show_local_vars=1    
xdebug.show_mem_delta=1
xdebug.collect_return=1
xdebug.collect_assignments=1
xdebug.collect_params=4
xdebug.collect_includes=1
xdebug.trace_enable_trigger=1
xdebug.trace_output_dir=/tmp
xdebug.trace_output_name=trace.%t.%R.%p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:39:34.003

*我假设这里的代码比您发布的要多 - 在这种情况下，如果您将任何输出传输到客户端，脚本在发送*之前不会关闭。

正如评论中提到的，还可能注册了其他关闭功能，您可能不知道这些功能。

如果一切都失败了，尝试隔离这个脚本（所以只有你发布的行，即使没有任何替代品`...`）并比较从命令行和你的网络服务器运行它。可能会涉及一些特定于服务器的开销。

# mysql - 在mysql中插入数据

> ID：15035567
> 
> 赞同：0
> 
> 时间：2013-02-23T00:36:09.717
> 
> 标签：mysql, insert-update, alter-table, sql-insert

好的，伙计们，我必须知道如何开始这个并需要一些指导。我需要插入新客户（指定为个人或企业并为企业创建主管。使用不同的帐户类型为新客户分配新帐户。将新分支和新员工插入 i。然后使用新分支，添加交易到新账户。

我不确定是否使用`INSERT`语句，`ALTER TABLE`或者我是否应该创建一个全新的表。当前的表是：账户、分公司、业务、客户、员工、个人、官员、交易。

当我尝试这个时：

```
INSERT INTO customer (cust_type_cd) VALUES('I'),('B'); 
```

我收到了这条消息：

> 错误代码：1364 字段“fed_id”没有默认值

这对我来说毫无意义。在此先感谢您的帮助。

这是结构：

**表帐户：**

```
`account_id`, `product_cd`, `cust_id`, `open_date`, `close_date`, `last_activity_date`, `status`, `open_branch_id`, `open_emp_id`, `avail_balance`, `pending_balance` 
```

**表分支：**

```
`branch_id`, `name, address`, `city`, `state`, `zip` 
```

**餐桌业务：**

```
cust_id, name, state_id, incorp_date 
```

**表客户**

```
`cust_id, fed_id, cust_type_cd, address, city, state, postal_code` 
```

**表员工：**

```
`emp_id, fname, lname, start_date, end_date, superior_emp_id, dept_id, title, assigned_branch_id` 
```

**表个人**

```
cust_id, fname, lname, birth_date 
```

**表官：**

```
`officer_id, cust_id, fname, lname, title, start_date, end_date` 
```

**表事务**

```
`txn_id, txn_date, account_id, txn_type_cd, amount, teller_emp_id, execution_branch_id, funds_avail_date` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:43:46.007

如果表中的字段是必需的并且不能为 NULL，您将收到此错误。您需要插入所有字段，在这种情况下，至少是 fed_id 字段：

```
INSERT INTO Customer (cust_type_cd, fed_id) 
VALUES ('I', 1); 
```

如果需要其他字段，您可能会继续收到类似的错误。需要查看您的表结构才能理解这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T02:20:42.047

`fed_id`表中的字段没有默认值`customer`。

您可以向该字段添加默认值：

```
ALTER TABLE customer MODIFY fed_id INT NULL DEFAULT NULL; 
```

或修改您的`INSERT`语句以提供值：

```
INSERT INTO customer
 (cust_type_cd,fed_id)
VALUES('I',0),('B',0); 
```

# nosql - 当 noSql 数据库没有引用约束时，它们如何兼容 ACID？

> ID：15035570
> 
> 赞同：0
> 
> 时间：2013-02-23T00:36:27.893
> 
> 标签：nosql

来自维基百科：

一致性（酸）

“在数据库系统中，一致事务是在其执行过程中不违反任何完整性约束的事务。如果事务使数据库处于非法状态，它将被中止并报告错误。”

如果 noSql 数据库没有完整性约束的概念，那么它们如何声称符合 ACID？令我震惊的是，他们认为一致性是其他东西（可能是整个集群的相同性），或者没有约束它不能违反任何约束，因此它们默认通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:17:58.720

当您执行一条语句（例如插入）时，需要完成几项任务，创建索引，持久化新记录，排列缓存元素等，一致性意味着如果其中一个步骤失败，那么另一个应该以某种方式反转，索引不能指向不存在的元素，id 不能重复等等，这也是一致性。酸不是 RDBMS 系统独有的属性，而是任何支持状态的系统。

# c# - 在 C# 中通过 SMTP 读取附件

> ID：15035573
> 
> 赞同：0
> 
> 时间：2013-02-23T00:36:44.260
> 
> 标签：c#, encoding, smtp, base64

我正在做一个需要使用 SMTP 创建自己的电子邮件服务器的项目。所有 SMTP 的东西都工作正常，但我现在正在努力发送附件。

我正在做的是我正在读取来自客户端的数据，以获取以 64 进制字符串形式出现的附件。然后我解码 base 64 字符串并将其写入一个文件，然后我的电子邮件服务器将其附加并转发给收件人。

这在发送 txt 文件时工作得很好，但是如果我在解码发生时尝试发送任何其他内容，例如 docx、图像等，它会引发异常，指出 base 64 字符串的长度无效。

当我将收到的 base 64 字符串复制并粘贴到在线转换工具中时，它们不会失败，因为当我在记事本 ++ 中查看图像文件时，我确实获得了至少部分正确内容，我看到了一些我可以看到的 xml还可以在我的在线转换工具上的解码字符串中看到。然而，在线工具确实有一些其他不匹配的东西。

发送给我时，base 64 字符串的编码方式是否存在一些差异，或者在文本文件和图像文件之间对 base 64 字符串的解码是否有不同之处。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:41:32.107

SMTP 不知道附件。它用于指定一条消息和一组收件人。收件人必须是有效地址，但 SMTP 并不真正关心邮件本身的外观。

你想做的是研究 MIME。MIME 是一种特定的电子邮件消息格式，允许您发送内容丰富的消息（如 HTML 而不仅仅是纯文本）或发送多部分消息，如消息和文件附件。

发送带有附件的消息将涉及构建格式适当的 MIME 消息，然后以与当前相同的方式使用 SMTP，将消息视为大文本正文，就像其他任何方式一样。只有文本的特殊格式（由邮件客户端解释，但被 SMTP 本身忽略）会有所不同。

# c++ - 链接 C++ 程序时出错

> ID：15035575
> 
> 赞同：-1
> 
> 时间：2013-02-23T00:36:59.467
> 
> 标签：c++, gcc, compilation, compiler-errors

我正在尝试编译一些非常简单的 C++ 代码，每次尝试时都会出现此错误：

```
Undefined symbols for architecture x86_64:
"std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))", referenced from:
  _main in ccdb9vrE.o
"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string()", referenced from:
  _main in ccdb9vrE.o
"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()", referenced from:
  _main in ccdb9vrE.o
"std::ios_base::Init::Init()", referenced from:
  __static_initialization_and_destruction_0(int, int)in ccdb9vrE.o
"std::ios_base::Init::~Init()", referenced from:
  ___tcf_0 in ccdb9vrE.o
"std::cin", referenced from:
  _main in ccdb9vrE.o
"std::cout", referenced from:
  _main in ccdb9vrE.o
"std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)", referenced from:
  _main in ccdb9vrE.o
"std::terminate()", referenced from:
  _main in ccdb9vrE.o
"std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
  _main in ccdb9vrE.o
"std::basic_ostream<char, std::char_traits<char> >& std::operator<< <char, std::char_traits<char>, std::allocator<char> >(std::basic_ostream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
  _main in ccdb9vrE.o
"std::basic_istream<char, std::char_traits<char> >& std::operator>><char, std::char_traits<char>, std::allocator<char> >(std::basic_istream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)", referenced from:
  _main in ccdb9vrE.o
"___gxx_personality_v0", referenced from:
  Dwarf Exception Unwind Info (__eh_frame) in ccdb9vrE.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我正在使用这个命令来编译它：

```
$ gcc script.cc 
```

这是脚本的代码：

```
#include <iostream>
#include <string>
using namespace std;

int main() {
        cout << "Please enter your name:\n";
    string name;
    cin >> name;
    cout << "Hello, " << name << endl;

    return 0;
} 
```

而且我确实下载了最新的开发工具。如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:39:23.510

使用 g++，因为它是一个 c++ 文件而不是 ac 文件......它应该这样工作......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T00:40:20.203

`gcc`是 GNU *C*编译器可执行文件的名称；因此，它旨在编译和构建 C 代码。要将代码编译为 C++，请使用`g++`可执行文件。

`gcc`实际上会编译 C++ 代码（基于文件扩展名），但不会正确链接生成的二进制文件（由于 ommitted `libstdc++`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T00:42:16.677

无论如何：到目前为止，没有一个答案提到链接不适用于 GCC 但使用 G++ 的实际原因。问题不在于编译步骤，而在于链接。`gcc`默认情况下不会链接到 C++ 标准库`g++`。

# windows - Powershell - Import-CSV 然后使用特定列作为排除数组

> ID：15035579
> 
> 赞同：0
> 
> 时间：2013-02-23T00:37:16.643
> 
> 标签：windows, powershell, csv, import

我和这个有一点关系。我正在尝试使用 powershell 导入一个 CSV 文件，该文件是稍后在脚本中处理的 XML 的日志文件。

目标是在脚本顶部有一个 if 语句，以排除`$_.FullName`已经以这种方式处理过的每个文件，如果脚本多次运行，它将读取此列而不是第二次处理该文件。

注意：我对powershell很陌生，抱歉语法草率

以下是我当前的代码和尝试

```
$sourceDir = "C:\test" #Production Folder "D:\Vodassets\_PreImport_Success"
$tempDir = "C:\test-temp"
$targetDir = "C:\test-copyback"
$Date = Get-Date -format MM-dd-yyyy
$Time =     "{0:h:mm:ss tt zzz}" -f (get-date)
$LogFile = "Disney-Log.csv"

### Copy Disney Metadata.xml's to a temporary folder for the editting process
if (Test-Path $LogFile){
    $ImportLog = Import-CSV $LogFile
    $GetXML = @(Get-ChildItem $sourceDir -recurse -filter "Metadata.xml" -exclude {$LogFile.Fullname} | Where-Object {$_.FullName -like "*disney*"})
} else {
    $GetXML = @(Get-ChildItem $sourceDir -recurse -filter "Metadata.xml" | Where-Object {$_.FullName -like "*disney*"})
}
$OutXML = ForEach-Object { $GetXML } | Select LastWriteTime,Fullname,DirectoryName
if ($GetXML.count -eq 0){
    write-host "No files to copy. Ending Process....." -foregroundcolor yellow -backgroundcolor black 
} else {
    ForEach ($File in $GetXML)
    {   $Path = $File.DirectoryName.Replace($sourceDir,$tempDir)
        if (-not (Test-Path $Path)) {
            Write-Host "Destination $Path doesn't exist, creating it." -foregroundcolor yellow -backgroundcolor black
            New-Item -Path $Path -ItemType Directory
            Copy-Item -Path $File.FullName -Destination $Path -ErrorAction silentlyContinue }
            elseif (-not $?) { write-warning "Failed to copy $($File.Fullname)" }
            else { write-host "Succesfully copied $($File.Fullname) to $($tempDir)" -foregroundcolor green -backgroundcolor black }
        }

### Edit XML Process
    ForEach ($File in $GetXML)
    {   $Path = $File.DirectoryName.Replace($sourceDir,$tempDir)
        if (Test-Path $Path) {
            $xmlData = [xml](Get-Content $File.FullName)
            foreach ($group in $xmlData){
                $xmlData.assetpackages.assetpackage.'Type' = 'SVOD'
                $xmlData.assetpackages.assetpackage.'Product' = 'SVOD'
                $xmlData.assetpackages.assetpackage.'Name' = 'Disney Family Movies'
            }
        }
        $xmlData.Save($File.Fullname)   
    }

    $OutXML | Export-Csv $LogFile -NoTypeInformation -Force -Append

### Copy Files to VOD Import Server
    $import = (Get-ChildItem $tempDir -recurse -filter "Metadata.xml" | Where-Object {$_.FullName -like "*disney*"})
    if ($import.count -eq 0) {
        write-host "No files to import. Ending Process....." -foregroundcolor yellow -backgroundcolor black
    } else {
        ForEach ($File in $import)
        {   $Path = $File.DirectoryName.Replace($tempDir,$targetDir)
            if (-not (Test-Path $Path)) {
                Write-Host "Destination $Path doesn't exist, creating it." -foregroundcolor yellow -backgroundcolor black
                New-Item -Path $Path -ItemType Directory
                Copy-Item -Path $File.FullName -Destination $Path -ErrorAction silentlyContinue }
                elseif (-not $?) { write-warning "Failed to copy $($File.Fullname)" }
                else { write-host "Succesfully copied $($File.Fullname) to $($targetDir)" -foregroundcolor green -backgroundcolor black }
            }
    }

### Cleanup temporary directory
    if (-not (Test-Path $tempDir | Where-Object {$_.FullName -like "*disney*"})){
        Get-ChildItem $tempDir -recurse | % { Remove-Item $_.FullName -recurse } #Remove the -whatif to actual clean out the directory
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:52:13.817

我在您的文件中看到了多件需要注意的事情：

*   `$OutXML = ForEach-Object { $GetXML } | Select LastWriteTime,Fullname,DirectoryName #Foreach loop is unnecessary. $OutXML = $GetXML | Select ... works`

*   `New-Item -Path $Path -ItemType Directory #ItemType should be File`

*   您的 XML 编辑看起来有问题。您要求每次`group`，但每次您尝试编辑整个文件时`xmlData`

可能还有更多，那些只是早期引起我注意的那些。

要回答您的问题，请查看下面的代码。它应该给出如何解决它的想法。如果文件路径是您存储在日志中的唯一内容，则应该使用纯文本文件，因为它更快更容易。我在下面包含了文本文件和 csv 的解决方案。由于您没有提供 csv-headers/sample，因此该解决方案适用于单列 csv（我不知道您想如何将其保存回 csv）。

```
#Load from csv
$log = Import-Csv .\test.csv
$loggedpaths = $log | Select-Object -ExpandProperty FullName

#Get only untouched files
$GetXML = @(Get-ChildItem $sourceDir -recurse -filter "Metadata.xml" | Where-Object {$_.FullName -like "*disney*" -and $loggedpaths -notcontains $_.FullName})

#Add processed file after editing(after $xmldata.save($file.fullname)
$log += $file | Select-Object LastWriteTime, Fullname, DirectoryName

#Save log to csv
$log | Export-Csv .\test.csv -NoTypeInformation 
```

# google-maps - 完全空白的谷歌地形图？

> ID：15035583
> 
> 赞同：1
> 
> 时间：2013-02-23T00:38:23.080
> 
> 标签：google-maps, terrain

我需要一张完全空白的谷歌地图地形图。我知道如何使用 API 工具，但是，我无法摆脱代表公园土地和城市区域的绿色、灰色和白色填充多边形。

我只想要地形。没有其他的。

建议？我已经广泛搜索，没有答案即将到来。

DZ

# sql - 需要学校评分系统的架构

> ID：15035584
> 
> 赞同：3
> 
> 时间：2013-02-23T00:38:41.373
> 
> 标签：sql, hibernate, schema

我是 SQL 新手，正在尝试创建一个可用于 Hibernate 的数据库模式，但我担心扩展问题、数据访问和查询数据的最佳方式。

项目：学校评分系统

**背景：** 想要存储所有作业，但如果我们计划一所学校有 4000 名学生，每个学生都有约 182 天的课程。如果每天有一个评分作业（课堂 + 家庭作业），那么每个作业可以有 182 x 6 x 4000，这意味着每学年有大约 430 万个成绩。10 年内约 4370 万。

我应该能够显示每季度的所有作业和当前成绩。我也应该能够在我上学的任何一年获得这些（一次 1Q）。教师和管理员应该能够从所有存储的历史记录中检索（再次一次 1Q）。

**问题：**

**Q1 可扩展性** 会有性能问题吗？表增长到 100M 条目有什么问题吗？

**数据访问：** 有没有更好的方法来拆分数据？考虑在作业中的日期（因此是季度）之间检索每个学生的 id 成绩数据。我应该为 QuarterID 添加另一列并制作一个表格来存储它们吗？

**访问成绩：** 查询学生季度成绩的最佳方式是什么？

*   Grade[] getStudentGrades(学生ID，开始日期，结束日期)

自然会配合

*   作业 [] getAssignmentDetails( 成绩 [] 成绩 )

我知道这两个可以使用 SQL 连接语句连接到另一个类 GradedAssignment 中：

*   GradedAssignment[] getStudentGradedAssignement( studentid, startdate, enddate )

**这个模式看起来对吗？** （从下面添加更新）
注意：为简洁起见，我省略了许多表格列。

> **学生**
> - **studentid** (PK)
> 
> **StudentClass** (参考表)
> - classid (FK)
> - studentid (FK)
> 
> **老师**
> -teacherid **(** PK)
> 
> **TeacherClass**（参考表）
> -teacherid **（** PK）
> -classid
> 
> **成绩** （我能想到的唯一主键是与 assignmentid+studentid 复合）
> - assignmentid (FK)
> - Grade
> - classid
> - studentid (FK)
> 
> **作业**
> - **assignmentid** (PK)
> - teacherid (FK)
> - pointsPossible
> - assignDate
> - dueDate
> - name
> - 描述

**获得成绩的最佳方式是什么？**

*   选择 Assignment.pointsPossible、Assignment.name、Grade.grade FROM Grade、Assignment WHEREgrade.studentid=:id AND Grade.assignmentid == Assignment.assignmentid AND Assignment.assignDate < :dateFinish AND Assignment.assignDate > :dateStart;

或使用 JOIN ？？？

*   选择 Assignment.pointsPossible、Assignment.name、Grade.grade FROM Grade LEFT JOIN Assignment on assignmentid WHEREgrade.studentid=:id AND Assignment.assignDate < :dateFinish AND Assignment.assignDate > :dateStart;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:41:06.213

考虑到学校的动态，我认为您的模式必须有一些补充。例如，学生每年从一个班级转到另一个班级。还必须考虑这些条件以构建可持续的应用程序。

我认为一个好的模式是 -

**学生**

*   studentid（主键）
*   名
*   姓
*   出生日期
*   ....（记录所需的所有其他基本个人信息）

**学生班**

*   studentid（外键引用studentid）
*   classid（外键引用class.classid）
*   入学日期
*   ...（与学生入学或升学相关的所有其他信息）

**班级**

*   classid（主键）
*   班级名称
*   ...（与课程相关的所有其他信息）

**教师班**

*   teacherid（外键引用teacher.teacherid）
*   classid（外键引用class.classid）
*   分配日期
*   发布日期
*   ...

**老师**

*   教师ID（主键）
*   名
*   姓
*   资质
*   出生日期
*   ...

**任务**

*   assignmentid（主键）
*   assigning_teacherid（外键引用teacher.teacherid）
*   积分可能
*   分配日期
*   截止日期
*   姓名
*   描述
*   ...

**年级**

*   assignmentid (fk)
*   类 ID (fk)
*   学生证 (fk)
*   年级
*   ...

您对 (assignmentid, studentid) 上的复合主键是正确的，它们也是外键。

# php - 普通论坛无法识别我的 ProxyConnect SSO

> ID：15035590
> 
> 赞同：0
> 
> 时间：2013-02-23T00:39:08.073
> 
> 标签：php, forum

[如本页](http://vanillaforums.org/page/ProxyConnect_SSO)所述，我正在尝试与 Vanilla 论坛集成单点登录。我将[Codeigniter](http://ellislab.com/codeigniter)与[Tank auth](http://konyukhov.com/soft/tank_auth/)一起使用，但我知道这种方法并不特定于任何框架。

我的站点和我拥有的 Vanilla 论坛的副本都托管在本地，因此它们共享相同的域 (localhost)，这是此方法的要求。我写了一些 PHP 代码，应该输出 ProxyConnect 的“AuthenticateUrl”所需的信息：

```
$id = $this->tank_auth->get_user_id();
if($id===false) return;

$user = $this->tank_auth->user();
header('Content-type: text/plain');
echo "UniqueID=$id";
echo "\nName=" . $user->username;
echo "\nEmail=" . $user->email; 
```

如果我登录到我的网站，它会输出以下内容：

```
UniqueID=1
Name=hassan
Email=something@somewhere.com 
```

这对我来说看起来不错。当我尝试让 Vanilla 使用它来验证用户身份时，它不起作用。它给了我一个非常通用的错误消息：

```
Bonk
Something funky happened. Please bear with us while we iron out the kinks. 
```

不是很描述。当我检查错误日志时，我看到了这个条目：

```
File does not exist: /Library/WebServer/Documents/applications,
referer: http://localhost/vanilla/index.php?p=/settings/proxyconnect/test 
```

这是 ProxyConnect 的错误，还是上述输出格式错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:46:41.253

确保验证 url 上的 mime 类型设置为纯文本/文本。我让它在测试模式下工作，但它在真正的论坛上不起作用。

# ruby-on-rails-3 - 表单中的file_field没有上传任何东西

> ID：15035594
> 
> 赞同：0
> 
> 时间：2013-02-23T00:39:24.520
> 
> 标签：ruby-on-rails-3, file-upload, controller, routes, controller-action

我有一个文件上传表单，提交后会路由到我的 parse_upload 操作。但是，当我尝试检索文件或文件上传对象附带的任何属性（original_filename、content_type）时，我收到错误消息。如果我理解正确，该文件应该以[与原始文件相同的名称存储在 #{Rails.root}/public/uploads 中](http://guides.rubyonrails.org/form_helpers.html#uploading-files)。

当我运行我的应用程序时，我的 parse_upload 操作中出现错误，指出 NoMethodError

```
NoMethodError in RevenueModelsController#parse_upload
     undefined method `original_filename' for "rails_upload_test.xlsx":String 
```

...我的上传不包含这些方法？该文件（和上传目录）也不存在。请帮忙，我在下面列出了所有相关文件：

路线.rb

```
resources :revenue_models do
  get 'upload', :on => :collection
end
match 'revenue_models/upload' => 'revenue_models#parse_upload', :via => :post
root :to => "home#index" 
```

控制器动作：

```
# UPLOAD create instance variable, call onto upload form, and route to parse_upload action
def upload
    @uploaded_doc = { :workbook => RubyXL::Parser.new }
end
# Parse the uploaded file
def parse_upload
    file_name = (params[:uploaded_doc][:workbook]).original_filename
end 
```

upload.html.erb - 上传表单提交给 parse_upload 动作

```
<%= form_tag(:url => {:controller => "revenue_models", :action => parse_upload_revenue_models_path}, :html => {:method => "put", :multipart => true}) do %>
    <%= file_field(:uploaded_doc, :workbook) %>
    <%= submit_tag("Upload File") %>                                                 
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:09:08.537

form_tag 在第一个参数中接受一个 URL，然后是选项。看起来您将哈希值作为第一个参数传递给它，所以我猜您的 HTML 输出不是您想要的。尝试这样的事情：

```
<%= form_tag revenue_models_parse_upload_path, :method => :put, :multipart => true do [...] 
```

# xslt - 使用 xalan 的 xml 转换返回不一致的结果

> ID：15035596
> 
> 赞同：0
> 
> 时间：2013-02-23T00:39:36.743
> 
> 标签：xslt

我们在生产环境中遇到了一个无法在任何环境中复制的奇怪问题。生成此错误的订单流程和管理应用程序平均每天处理数千个订单。4000 起订。订单 xml 使用各种 xslt 进行转换，以在订单生命周期过程的每个阶段更新订单数据。但是每天一次，当xml转换的输出出错时，订单服务和管理应用程序的底层API将为订单抛出OrderUpdateException。应用程序内置的订单影响管理使用户能够重试或重新提交最初失败的订单任务。该任务调用无状态会话 bean，该 bean 通过使用 xalan 应用订单 xml 的转换来修改订单数据。

我们知道它最初失败的原因，但不知道究竟是什么触发了它导致错误的转换。

订购 XML：

```
<GetOrder.Response xmlns="urn:com:metasolv:oms:xmlapi:1">
    <OrderID>243193</OrderID>   
    <_root>
    ....
        <Wireless>
            ...
            ....
            <MDN>
                <Action>NONE</Action>
                ....
                ...
                <Services>
                    <Voice>
                        <ServiceName>VOICE</ServiceName>
                        <ServiceStatus>Initial</ServiceStatus>
                        <FulfillmentItems>
                            <FulfillmentItem index="1353944898394">
                                <FulfillmentItemCode>DCF1</FulfillmentItemCode>                         
                                <FulfillmentMessages/>
                                <Attributes/>
                            </FulfillmentItem>
                            <FulfillmentItem index="1353944898409">
                                <FulfillmentItemCode>HCFB</FulfillmentItemCode>
                                <FulfillmentItemCodeDescription>FC-VOICE</FulfillmentItemCodeDescription>
                                <FulfillmentMessages/>
                                <Attributes/>
                            </FulfillmentItem>
                        </FulfillmentItems>
                    </Voice>
                </Services>
            </MDN>
        </Wireless>
    </_root>
</GetOrder.Response> 
```

XSL：

```
<xsl:template match="oms:Wireless">
    <OrderDataUpdate xmlns="http://www.metasolv.com/OMS/OrderDataUpdate">
        <xsl:apply-templates select="oms:MDN"/>
    </OrderDataUpdate>
</xsl:template>

<xsl:template match="oms:MDN">
    <xsl:call-template name="voice_template">
        <xsl:with-param name="mdnId" select="$mdnId"/>
        <xsl:with-param name="oldmdnId" select="$oldmdnId"/>
        ...
    </xsl:call-template>
</xsl:call-template>

<xsl:template name="voice_template"> 
    <xsl:param name="mdnId"/> 
    <xsl:param name="oldmdnId"/> 
    <xsl:param name="minId"/> 
    ....
    .....

    <xsl:for-each select="oms:Services/oms:Voice/oms:FulfillmentItems/oms:FulfillmentItem"> 
        <xsl:variable name="fulfillmentItem_index"> 
            <xsl:value-of select="@index"/> 
        </xsl:variable> 

        <Add path="/Wireless/MDN/Services/Voice/FulfillmentItems/FulfillmentItem[@index='{$fulfillmentItem_index}']/Attributes"> 

        ----
        ----
        </Add>
    <xsl:for-each>
<xsl:template>

<xsl:template match="* | @* | text()">
    <!-- do nothing -->
    <xsl:apply-templates/>
</xsl:template> 
```

转换后的输出 XML：

```
<?xml version="1.0" encoding="UTF-8"?> 
<OrderDataUpdate xmlns="http://www.metasolv.com/OMS/OrderDataUpdate" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
    <Add xmlns="" path="1353944898394']/Attributes"> 
        <Attribute> 
            <name>HLR-MSISDN</name> 
            <value>2045731730</value> 
        </Attribute> 
        <Attribute> 
            <name>HLR-IMSI</name> 
            <value>302660397124421</value> 
        </Attribute> 
        <Attribute> 
            <name>HLR-NON_MTS_IMSI</name> 
            <value>302370397124421</value> 
        </Attribute> 
    </Add> 
    <Add xmlns="" path="/Wireless/MDN/Services/Voice/FulfillmentItems/FulfillmentItem[@index='1353944898409']/Attributes"> 
    <Attribute> 
        <name>HLR-MSISDN</name> 
        <value>2045731730</value> 
    </Attribute> 
    ....
<OrderDataUpdate> 
```

我们发现在 for 循环的第一次迭代期间为变量“fulfillmentItem_index”设置了错误的值。对于连续迭代，正在设置正确的值。结果，应用程序抛出 OrderUpdateException 并停止处理特定订单。然而，在重新提交相同的任务时，订单流程会恢复，就好像一开始什么都没有发生一样。

该应用程序在 Weblogic Application Server 9.2 MP3 上运行。我们还进行了环境检查，结果如下：

.我进行了环境检查，结果就是这样。

```
<checkEnvironmentExtension> 
     <EnvironmentCheck version="$Revision: 1.29 $"> 
          <environment> 
               <item key="version.DOM.draftlevel">2.0fd</item> 
               <item key="java.class.path">:/home/weblogic/bea/patch_weblogic923/profiles/default/sys_manifest_classpath/weblogic_patch.jar:/opt/java1.5/lib/tools.jar:/home/weblogic/bea/weblogic92/server/lib/Bug8841241_920mp1.jar:/home/weblogic/bea/weblogic92/server/lib/weblogic_sp.jar:/home/weblogic/bea/weblogic92/server/lib/weblogic.jar:/home/weblogic/bea/weblogic92/server/lib/webservices.jar::/home/weblogic/bea/weblogic92/common/eval/pointbase/lib/pbclient51.jar:/home/weblogic/bea/weblogic92/server/lib/xqrl.jar:/home/weblogic/AQJMSHOME/AQJMS/StartupClass/lib/WLS9.0/AQJMSStartupClass.jar:/home/weblogic/AQJMSHOME/jar_files/aqapi13.jar:</item> 
               <item key="version.JAXP">1.1 or higher</item> 
               <item key="java.ext.dirs">/opt/java1.5/jre/lib/ext</item> 
               <item key="version.xerces2">Xerces-J 2.8.1</item> 
               <item key="version.xerces1">Xerces 1.4.4</item> 
               <item key="version.xalan2_2">Xalan Java 2.7.0</item> 
               <item key="version.xalan1">not-present</item> 
               <item key="version.ant">Apache Ant version 1.6.2 compiled on August 5 2004</item> 
               <item key="java.version">1.5.0.17</item> 
               <item key="version.DOM">2.0</item> 
               <item key="version.crimson">not-present</item> 
               <item key="sun.boot.class.path">/opt/java1.5/jre/lib/rt.jar:/opt/java1.5/jre/lib/i18n.jar:/opt/java1.5/jre/lib/sunrsasign.jar:/opt/java1.5/jre/lib/jsse.jar:/opt/java1.5/jre/lib/jce.jar:/opt/java1.5/jre/lib/charsets.jar:/opt/java1.5/jre/classes</item> 
               <item key="version.SAX">2.0</item> 
               <item key="version.xalan2x">Xalan Java 2.7.0</item> 
          </environment> 
          <status result="OK"/> 
     </EnvironmentCheck> 
</checkEnvironmentExtension> 
```

感谢有人可以帮助我解释这种奇怪的行为。我们每天都会看到这种情况，至少有 1 或 2 个订单经常失败。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:49:56.073

艰难的一个。您当然没有为这里的任何人提供足够的信息来得出答案。但我会检查您使用的是 Xerces 的 Apache 版本，而不是 Sun/Oracle JDK 版本。后者是错误的，根据我的经验，错误通常是属性值的损坏。这个错误是几年前提出的，很明显甲骨文无意修复它。

# android - 当 ListView.setChoiceMode 设置为 CHOICE_MODE_MULTIPLE_MODAL 时，显示单个项目被选中

> ID：15035598
> 
> 赞同：3
> 
> 时间：2013-02-23T00:39:39.967
> 
> 标签：android, listview, android-listview

当您在 Eclipse 中使用 ADT，并告诉 ADT 创建一个具有 Master/Detail Flow 的新活动时，此方法将出现在以下片段之一中：

```
/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE : ListView.CHOICE_MODE_NONE);
} 
```

但是，我想实现一个`MultiChoiceModeListener`. 因此，这需要我消除对这个方法的所有引用，因为它会删除`CHOICE_MODE_MULTIPLE_MODAL`所需的。但是，我仍然希望单个项目在未激活时从列表中选择其中一个后显示为“已激活” `ActionMode`，因为我仍在显示该项目的详细信息。（显然，在适当的时候切换）有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:55:11.107

> 但是，当 ActionMode 未激活时，我仍然希望在从列表中选择其中一个项目后，单个项目显示为“已激活”，因为我仍在显示该项目的详细信息。（显然，在适当的时候切换）有没有办法做到这一点？

首先，你想做的事情似乎有点违反直觉。当上下文操作栏未显示时，您将激活一行，但是当 CAB 存在时，您将允许用户选择多行（？！）（当 CAB 存在时，详细信息面板会发生什么，并且用户选择不同的行？！）。当驾驶室被选中多行（激活）时会发生什么？当 CAB 被解散时，详细信息面板会发生什么？

无论如何，做你想做的最简单的方法可能是保留生成的方法（以及选择模式）并丢失`MultiChoiceListener`. 相反，您将自己`ActionMode`管理`ListView`模拟`MultiChoiceModeListener`. 这`ActionMode`将从. `OnItemLongClickListener`_`ListView`

# windows - 如何使用 Windows 脚本下载字符编码不正确的网页？

> ID：15035599
> 
> 赞同：2
> 
> 时间：2013-02-23T00:39:48.513
> 
> 标签：windows, http, scripting, jscript, wsh

我正在尝试`http://173.192.48.92/test.php`使用 WSH 下的 JScript 下载此测试页面。

我正在使用这样的 WinHttp 组件：

```
WinHTTP = WScript.CreateObject('WinHttp.WinHttpRequest.5.1') ;
WinHTTP.Open( 'GET', 'http://173.192.48.92/test.php' ) ;
WinHTTP.Send() ;
WScript.echo( WinHTTP.responseText ) ; 
```

但我不能让它工作。WinHttp 触发运行时错误，因为该页面有`Content-Type: text/html; charset=UTF-8`但该页面的实际内容是 latin1。

有没有办法可以使用 WSH 获取 URL 的内容，无论该内容是什么？

PS：我使用的是 Windows Vista SP2 和 IE9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:23:39.903

我不确定我是否会解决您的问题，但至少会尝试。

当您在 WSH 中运行脚本时，IE 版本无关紧要，因为它们使用单​​独的脚本主机。您的脚本在我的 XP x64 下运行良好。

好的，我想到的是尝试[XMLHttpRequest](http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx)对象。我将发布 VBScript 代码，如果需要，我认为将其转换为 JavaScript 并不难。

```
URL = "http://173.192.48.92/test.php"
Set http = CreateObject("Microsoft.XmlHttp")

http.open "GET", URL, False
http.send ""

If http.status <> 200 Then 'if not OK
    WScript.Echo "Response status " & _
        http.status & " - " & http.statusText
    WScript.Quit  'exit the script
End If

WScript.Echo http.responseText 
```

如果编码是问题，那么您应该在最后一行出现错误。如果是这样，则删除此行并尝试使用[ADO Stream object](http://www.w3schools.com/ado/ado_ref_stream.asp)，即将其附加到上面的代码：

```
Set stream = CreateObject("ADODB.Stream")
With stream
    .Open
    .Type     = 2 'text
    .Position = 0
    '.Charset  = "utf-8"
    .Charset  = "latin1"
    .WriteText http.responseText
    .SaveToFile "output.txt", 2
    .Close
End With 
```

在我的测试中，它适用于字符集 UTF-8 和 Latin1，我希望这能解决问题。

好吧，如果那没有帮助，那么请告诉我您遇到的那种错误。

# ios - NSDictionary 外面的值是有效的，里面是 null

> ID：15035605
> 
> 赞同：1
> 
> 时间：2013-02-23T00:40:24.230
> 
> 标签：ios, objective-c, xcode, nsdictionary

我有一个荒谬的问题。

我有不同类型的值，它们插入字典中。问题是字典外的值是有效的，里面是空的。

```
 NSString *name = [NSString stringWithFormat:@"%@",_nameTextField.text];
 NSString *icon = [NSString stringWithFormat:@"%i",itemIcon];

 NSDictionary *dictionary = [[NSDictionary alloc]initWithObjectsAndKeys:name,@"name",
icon,@"icon", nil];

NSLog(@"string %@ dictionary %@",icon,[dictionary objectForKey:@"icon"]); 
```

日志

```
string 18 dictionary (null) 
```

此问题仅发生在第二个值上，第一个“名称”不会。然而过程是一样的。

更奇怪的是，这段代码，我在另一个类中使用，相同并且运行良好。

现在我想知道。Xcode中可能有问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T01:03:56.780

`initWithObjectsAndKeys`当您使用（或）创建字典时`dictionaryWithObjectsAndKeys:`，一个`nil`值表示参数的结尾。

无论您在参数列表中输入显式`nil`（就像每个人最后都这样做），还是使用任何具有`nil`值的变量，都是如此。

```
NSSString *name = nil;
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:name, @"name", nil]; 
```

这会给你一个空字典，因为第一个参数是`nil`. 甚至没有考虑其他论点。

# java - 来自 Text 小部件的 SWT getText() 返回 NULL 字符串

> ID：15035613
> 
> 赞同：0
> 
> 时间：2013-02-23T00:41:39.470
> 
> 标签：java, eclipse, events, swt, listener

此 SWT 程序有一个名为 mBuy 的组，其中包括用于输入股票买入价格的文本字段。按下计算按钮并激活事件侦听器后，我想将此文本字段中的任何内容分配给我已在此处初始化的变量。

```
final Text tmp0 = new Text(mBuy, SWT.SINGLE);
tmp0.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

// Calculate Button
Button tmp3 = new Button(mBuy, SWT.PUSH);
tmp3.setText("Calculate");
tmp3.setLayoutData(new GridData(SWT.FILL, SWT.FILL, false, true));

// if calculate button is pressed
tmp3.addSelectionListener(new SelectionAdapter() {
    public void widgetSelected(SelectionEvent e) {
        //take the decimal value inside textbox 
        bPrice=Double.parseDouble(tmp0.getText());
        // don't show buy menu anymore
        mBuy.dispose();

    }
}); 
```

# c++ - istream::read 不读取整个文件

> ID：15035622
> 
> 赞同：1
> 
> 时间：2013-02-23T00:42:17.443
> 
> 标签：c++, file

我正在练习文件读取，这就是为什么我制作了这个“十六进制编辑器”，它使用读取功能来复制内存中的文件。

```
ifstream iFile(argv[1],ios::ate, ios::binary);

int sizea=iFile.tellg();
char* file=new char[sizea];

iFile.seekg(0);
iFile.read(file,sizea);

cout << iFile.gcount(); 
```

所以对于我的测试文件，sizea 设置为 2378，在内存中分配了 2378 字节的正确块，但 gcount() 函数返回 389。确实，内存被正确信息填满到第 389 个字节并且它充满了 CD s 直到第 2378 个字节。

读取功能是否有某种内部限制？我看不出我在这里可能做错了什么。

好的，发现问题：

```
ifstream iFile(argv[1],ios::ate, ios::binary);
//should be
ifstream iFile(argv[1],ios::ate | ios::binary); 
```

# node.js - Jade 模板，包含变量范围

> ID：15035624
> 
> 赞同：9
> 
> 时间：2013-02-23T00:42:19.597
> 
> 标签：node.js, pug

我正在使用 Jade（没有 Express，仅用于静态 HTML 模板） - 我理解它能够创建部分，这意味着范围不是问题，但这似乎不是这种情况，我找不到对此用途的参考-案子。

**玉大师**

```
!!! 5
html
  block vars
  - var slug= 'home'
  head
    block pagetitle
      title Static HTML
    link(rel='stylesheet', href='css/styles.css')
  body(class= slug)
    .wrapper
      include includes/header 
```

**包括/header.jade**

```
.header 
  ul
    li(class= slug) 
```

我已经尝试过语法变体，包括`#{slug}`并且总是在文件中得到错误“slug is not defined” `includes/header.jade`——可以这样做吗？

**编辑：**所以 Dave Weldon 在下面的评论中给出的答案是，当包含在 master.jade 中时该变量是可用的，但是我的构建命令编译**了所有**的翡翠文件，包括它们自己的包含，此时该变量当然不是定义。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-23T00:52:25.183

您可以使用这样的[mixin](https://github.com/visionmedia/jade#a14)来完成此操作：

玉大师

```
include includes/header

!!!
html
  block vars
  - var slug= 'home'
  head
    block pagetitle
      title Static HTML
    link(rel='stylesheet', href='css/styles.css')
  body(class= slug)
    .wrapper
      mixin header(slug) 
```

包括/header.jade

```
mixin header(klass)
  .header
    ul
      li(class= klass) 
```

编译时：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Static HTML</title>
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body class="home">
    <div class="wrapper">
      <div class="header">
        <ul>
          <li class="home"></li>
        </ul>
      </div>
    </div>
  </body>
</html> 
```

# git - 如何像远程一样获取一个文件

> ID：15035625
> 
> 赞同：0
> 
> 时间：2013-02-23T00:42:20.267
> 
> 标签：git

我知道我能做到

```
git fetch origin
git --reset origin/master 
```

将我的本地重置为远程分支。如果我想解决某些文件的合并冲突以及 x1.cpp、x2.cpp 等其他文件的合并冲突，我只想保留远程版本（强制远程版本）而不进行任何合并解析。有没有一种有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:24:13.213

要将文件恢复到其远程版本，您可以使用：

```
git checkout x1.cpp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T04:53:54.513

如果您知道您总是想要远程版本的文件，您可以为它们使用自定义合并驱动程序：

> `git config merge.theirs.driver "mv %B %A"`
> 
> `echo x1.cpp merge=theirs >> .git/info/attributes`

然后，为了安全，

> `git checkout`*`upstream/branch`*`-- x1.cpp`

确保你一开始是干净的。

请注意，尽管无论本地分支中有什么，这总是会采用任何更改的上游版本，但它不会阻止您添加本地更改，这些更改将持续存在，直到有人从上游合并新更改的版本。

# jquery - 带 var 的顶部滚动

> ID：15035628
> 
> 赞同：0
> 
> 时间：2013-02-23T00:42:32.077
> 
> 标签：jquery, var

好的看起来像这样

```
 $(".back-top").hide();
$(function () {
    $('#container').scroll(function () {
        if ($(this).scrollTop() > 100) {
            $('.back-top').fadeIn();
        } else {
            $('.back-top').fadeOut();
        }
    });
    $('.back-top a').click(function () {
        $('#container,#top,body,html').animate({
            scrollTop: 0
        }, 400);
        return false;
    });
}); 
```

但我需要一个变量 TopScroll 或其他，因为我的网站在一页中，我做了这个：

```
 $(function () {
var TopScroll = false;
        if (TopScroll==true){
            $(".back-top").show();
        } else {
            $(".back-top").hide();
        }
    $('#container').scroll(function () {
        if ($(this).scrollTop() > 100) {
            $('.back-top').fadeIn();
            TopScroll = true;
        } else {
            $('.back-top').fadeOut();
            TopScroll = false;
        }
    });
    $('.back-top a').click(function () {
        $('#container,#top,body,html').animate({
            scrollTop: 0
        }, 400);
        TopScroll = false;
        return false;
    });
}); 
```

并且不再工作了。我真的需要这个帮助。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:02:36.030

这是你想说的吗？

```
$(function () {
    var TopScroll = false;
    var updateTopScrollVisibility = function() {
        if (TopScroll) {
            $(".back-top").show();
        } else {
            $(".back-top").hide();
        }
    }
    $('#container').scroll(function () {
        if ($(this).scrollTop() > 100) {
            $('.back-top').fadeIn();
            TopScroll = true;
        } else {
            $('.back-top').fadeOut();
            TopScroll = false;
        }
        updateTopScrollVisibility();
    });
    $('.back-top a').click(function () {
        $('#container,#top,body,html').animate({
            scrollTop: 0
        }, 400);
        TopScroll = false;
        updateTopScrollVisibility();
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:33:46.200

移动/添加

```
var TopScroll = false;
var updateTopScrollVisibility = function() {
    if (TopScroll == false) {
        $(".back-top").show();
    } else {
        $(".back-top").hide();
    }
} 
```

就在之前

```
$(function() {
    var TopScroll = false;
    ... 
```

所以它是这样的

```
var TopScroll = false;
var updateTopScrollVisibility = function() {
    if (TopScroll == false) {
        $(".back-top").show();
    } else {
        $(".back-top").hide();
    }
}
$(function() {
    $('#container').scroll(function() {
... 
```

然后添加`updateTopScrollVisibility();`为之后的第一行`if (contentClicked == false) {`和之后的第一行

```
} else {
    musicOverlay.animate({
        marginRight: -683
        }, 400); 
```

# php - 在 jpg 上合并 png 并使用 php 保持透明度

> ID：15035632
> 
> 赞同：5
> 
> 时间：2013-02-23T00:43:05.773
> 
> 标签：php, gd

我有一个 PNG，我正在尝试将它合并到 JPG 之上。使用以下代码

```
$dest = imagecreatefromjpeg("example.jpg");
$src = imagecreatefrompng("example.png");

imagealphablending($dest, false);
imagesavealpha($dest, true);

imagealphablending($src, true);

imagecopymerge($dest, $src, $src2x, $src2y, 0, 0, $src2w, $src2h, 100);

header('Content-Type: image/png');
imagepng($dest, "user/".$imei."/".$picCount."_m");

imagedestroy($dest);
imagedestroy($src); 
```

结果如下

![在此处输入图像描述](../Images/55e3fece87bb1e768090e3ec17fcd8b8.png)

我还尝试了[一个类似问题的建议，该问题](https://stackoverflow.com/a/6466165/773263)说使用“imagecopyresampled”而不是“imagecopymerge”，但是当我这样做时，圣诞老人的帽子根本没有出现。

我需要更改什么以使圣诞帽在合并时保持透明？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T21:19:29.450

解决方案都需要使用“imagecopyresampled”。以及从发布的源代码中删除第 4 行和第 5 行。

```
imagealphablending($dest, false);
imagesavealpha($dest, true); 
```

这是完整的工作版本

```
$dest = imagecreatefromjpeg("example.jpg");
$src = imagecreatefrompng("example.png");

imagecopyresampled($dest, $src, $src2x, $src2y, 0, 0, $src2w, $src2h, $src2w, $src2h); 

header('Content-Type: image/png');
imagejpeg($dest, "user/".$imei."/".$picCount."_m.jpeg");

imagedestroy($dest);
imagedestroy($src); 
```

![在此处输入图像描述](../Images/e0d49229e243880dbd609259be7ce424.png)

# php - “重复键”问题

> ID：15035633
> 
> 赞同：1
> 
> 时间：2013-02-23T00:43:06.680
> 
> 标签：php, mysql, sql

我有一个查询：

```
INSERT INTO tx3_hu_villages (uid,vid,x,y,name,population) VALUES 
(122,2569,-29,36,'qwertzuiop',330),
(122,52915,-134,25,'asdfghjkléá',916)
ON DUPLICATE KEY UPDATE 
name=VALUES(name),population=VALUES(population); 
```

它在 MySQL Workbench 中运行良好，但在 PHP 中我收到此错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL  server version for the right syntax to use near '' at line 1

CREATE TABLE `tx3_hu_villages` (
  `vid` int(11) unsigned NOT NULL,
  `uid` int(11) unsigned DEFAULT NULL,
  `x` smallint(6) DEFAULT NULL,
  `y` smallint(6) DEFAULT NULL,
  `name` varchar(60) DEFAULT NULL,
  `population` smallint(5) unsigned DEFAULT 0,
  PRIMARY KEY (`vid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

如果没有`ON DUPLICATE KEY UPDATE`PHP 的工作也很好。

这是PHP代码：

```
$sql = "INSERT INTO ".$table_name."_villages (uid,vid,x,y,name,population) VALUES ";

for($i=0;$i<count($v);$i++){

$sql.= "(".$v[$i]['uid'].",".$v[$i]['vid'].",".$v[$i]['x'].",".$v[$i]['y'].",'".$v[$i]['village']."',".$v[$i]['population']."),";

}

$sql[strlen($sql)-1] = "";

$sql.= "ON DUPLICATE KEY UPDATE name=VALUES(name),population=VALUES(population);";

echo $sql; 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:33:16.757

进行此类多次插入的一种方法是像这样使用 PHP 内爆函数

```
$sql = "INSERT INTO ".$table_name."_villages (uid,vid,x,y,name,population) VALUES ";

for($i=0;$i<count($v);$i++){

$temp[] = "(".$v[$i]['uid'].",".$v[$i]['vid'].",".$v[$i]['x'].",".$v[$i]['y'].",'".$v[$i]['village']."',".$v[$i]['population'].")";

}

$sql .= implode(',', $temp);

$sql.= " ON DUPLICATE KEY UPDATE name=VALUES(name),population=VALUES(population);";

echo $sql; 
```

可能会避免那些与空白相关的问题。

# c++ - 如何检查 DLL 以获取信息

> ID：15035644
> 
> 赞同：3
> 
> 时间：2013-02-23T00:44:16.197
> 
> 标签：c++, windows, dll, exe

有没有办法检查单个（C++ 编译的）DLL 文件并找出它调用的 Win32 函数？

我有`MyDll.dll`档案。我知道在这个 dll 中的某个地方，有一段代码正在从 Windows 注册表中检索信息。

有没有办法找出 DLL 正在访问的注册表项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:00:18.930

您可以访问 DLL 的 PE 导入表来确定 DLL 静态链接到哪些 Win2 API 函数，但这并不能保证这些函数在 DLL 的代码中实际被调用，并且这也不考虑动态加载的 Win32 API 函数通过`GetProcAddress()`.

要找出 DLL 正在访问哪些注册表项，您可以：

1.  反汇编/反编译 DLL，例如使用 IDA，并查看代码中调用`RegOpenKeyEx()`、`RegQueryValueEx()`和其他注册表函数的所有位置。
2.  编写一个将 DLL 加载到内存中并动态修补注册表函数导入的应用程序，以便它可以拦截输入参数值。
3.  像 Ben 建议的那样使用 SysInternals Process Monitor。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T00:53:23.180

您需要执行 DLL；如果您这样做，那么 Sysinternals（现在是 Microsoft 的一部分）进程监视器将向您显示该进程进行的所有注册表访问，并捕获每个的堆栈跟踪（您可以使用它来查找从该 DLL 进行的调用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T14:07:39.253

Heaventools Software有**[PE Explorer](http://www.heaventools.com)**。

> 导出函数列表查看器显示可能被其他应用程序调用的那些函数。

具体参见[DLL 导出查看器](http://www.heaventools.com/PE_Explorer_Exports_Viewer.htm "DLL 导出查看器")页面了解更多详细信息。

# mysql - 在 MySQL 数据库中保存 GCM regId

> ID：15035646
> 
> 赞同：0
> 
> 时间：2013-02-23T00:44:17.160
> 
> 标签：mysql, push-notification, google-cloud-messaging

我正在开发 GCM Demo 应用程序，我正在尝试将 GCM 服务器的注册 ID 存储在 mysql 数据库中。在示例中，它存储在 Datastore 的列表中。我在服务器端的 RegisterServlet 中有以下代码用于注册，但数据库中没有注册。我真的需要你的帮助！

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
  throws ServletException {
String regId = getParameter(req, PARAMETER_REG_ID);

try {
//Load the Driver for connection
Class.forName("com.mysql.jdbc.Driver");
//Get a connection to the particular database
Connection con = DriverManager.getConnection("jdbc:mysql://localhost/GCMFINAL", "root", "root");

PreparedStatement pstmt=con.prepareStatement("insert into GCM(ID)values("+regId +")");
pstmt.execute();
} catch (SQLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (ClassNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
setSuccess(resp); 
```

}

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:47:52.710

我的猜测是您可能在这里遇到了 SQL 语法问题：

```
"insert into GCM(regId)values("+regId +")" 
```

尝试添加这样的空格：

```
"insert into GCM (regId) values ("+regId +")" 
```

# sql - SQL将匹配的行选择为两列，每个匹配一行

> ID：15035649
> 
> 赞同：1
> 
> 时间：2013-02-23T00:45:06.227
> 
> 标签：sql, sql-server-2008

我有一个包含以下信息的表：

```
MatchID DataID Data 
1       100    info1 
1       101    info2 
2       102    info3 
2       103    info4 
2       104    info5 
3       105    info6 
3       106    info7 
3       107    info8 
3       108    info9 
```

我需要将结果放在两列中，每个匹配的 ID 对应一行，如下所示：

```
MatchID DataID1   Data1   DataID2    Data2
   1      100     info1    101       info2
   2      102     info3    103       info4
   2      102     info3    104       info5
   2      103     info4    104       info5
   3      105     info6    106       info7
   3      105     info6    107       info8
   3      105     info6    108       info9
   3      106     info7    107       info8
   3      106     info7    108       info9
   3      107     info8    108       info9 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T00:48:51.013

您可以通过使用连接来做到这一点：

```
select t1.matchid, t1.dataid, t1.data, t2.dataid, t2.data
from t t1 join
     t t2
     on t1.matchid = t2.matchid and
        t1.dataid < t2.dataid 
```

# chef-infra - 从 chef-solo 节点获取自动属性

> ID：15035650
> 
> 赞同：1
> 
> 时间：2013-02-23T00:45:19.843
> 
> 标签：chef-infra

我正在研究 Chef Server 和 Chef Solo 之间的一些差异。如果我配置了 chef-solo 节点，是否可以将 Ohai 收集的属性存储在我自己的远程数据库中？我试图模仿 Chef Server 的功能，但使用我自己的技术等。

我不认为默认情况下这个功能是内置在厨师独奏中的，添加这个的好方法是什么？我目前正在考虑将属性发送到数据库的附加处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:55:18.797

处理程序是实现此类功能的合理方式。如果您只想在成功运行结束时更新服务器（模仿厨师客户端的行为），请将其注册为报告处理程序。如果您想在每次运行时更新服务器，请将其注册为报告处理程序和异常处理程序。

在您的处理程序中，`run_status.node.automatic_attrs`将包含 ohai 提供的数据。有关更多详细信息，请参阅Opscode 站点上 的[异常和报告处理程序文档。](http://docs.opscode.com/chef/essentials_handlers.html)

# matlab - 绘制二维主成分

> ID：15035652
> 
> 赞同：0
> 
> 时间：2013-02-23T00:45:41.497
> 
> 标签：matlab

Matlab 新手。创建脚本以生成 2D 分布并确定其主成分。

我绘制主成分的方法是曲折的。必须有一种更优雅的方式来绘制主成分。它是什么？

我可以在我的线段末端加箭头吗？这是我的 .m 文件：

```
%Distrubtion variances
xx = 2;
yy = .6;
xy = .5;

%Create distribution data
A = mvnrnd([0 0] , [xx xy; xy yy], 100);

%Get principal components of data
coeff = pca(A);

%Plot distribution
h = plot(A(:,1),A(:,2),'b.');
hold on

%Do crazy stuff to plot principal components
temp=zeros(2,4);
temp(:, 2:2:end) = coeff;
scalefactor=10; %Make the lines longer
temp=scalefactor * temp
X=temp(1:2:end);
Y=temp(2:2:end);
plot(X, Y, 'r', 'LineWidth', 2);

%format plot
axis('square')
grid on;
xlabel('X Axis');
ylabel('Y Axis');
xlim([-10, 10]);
ylim([-10 10])

shg;
hold off; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T02:29:39.370

这可能更合理。该`quiver`函数绘制箭头。（[见文档](http://www.mathworks.com/help/matlab/ref/quiver.html)）。不过，您仍然需要自己调整箭头的大小。也许计算数据的范围而不是 10，并在比例因子和轴限制中使用它。

```
n = length(coeff);
coeff = 10 * coeff; % Make the lines longer
quiver(zeros(1,n), zeros(1, n), coeff(1,:), coeff(2,:), 'r', 'LineWidth', 2); 
```

另外，我不知道您使用的是哪个版本的 MATLAB，但`pca`在`princomp`我的版本中。

# c# - 将另一个列表中的属性添加到实体

> ID：15035653
> 
> 赞同：0
> 
> 时间：2013-02-23T00:46:05.963
> 
> 标签：c#, entity-framework-4, linq-to-entities

我花了几个小时在 SO 上找到答案。我要么不知道如何搜索，要么我问错了问题。

情况如下：

我有一个实体客户。我从我的数据库上下文中得到这个，比如 db.Customers。我有用户。这些不在我自己的数据库中，而是在 CMS 的数据库中。我可以使用像 UserManager.GetUsers 这样的东西来检索所有用户，这会给我一个用户对象的 IQueryable（与 System.Web.Security 中的用户对象相同。

现在我想创建一个包含所有客户的列表，但我希望在同一个列表中还包含来自 User 对象的属性，例如 IsLockedOut 和 LastActivityDate。

我认为通过创建一个具有属性 Customer 和其他属性的新对象会很简单。但是每次我在 Linq 查询中放入 GetUser 或 IsUserLockedOut 时都会出现编译错误，例如“LINQ to Entities 无法识别该方法”或“仅允许使用无参数的构造函数和初始化程序”。

有什么办法可以让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:03:39.927

您不能简单地使用 Linq 查询将属性添加到具体类型 - 您当然可以创建一个匿名类型，该类型具有`Customer`属性以及您想要添加到匿名类型的任何其他字段。

您收到的错误是因为您将无法直接转换为 SQL 的自定义方法调用嵌入到某个地方的 Linq 查询中。发布您的 Linq 查询，它可能很容易被发现。

# coffeescript - 2行代码中的Coffeescript错误

> ID：15035654
> 
> 赞同：0
> 
> 时间：2013-02-23T00:46:07.513
> 
> 标签：coffeescript

我的 Coffeescript 有什么问题？获取“未定义不是函数，试图评估......”指向最后一行

```
jQuery ->
  $('#article_tag_list').autocomplete
    source: $('#article_tag_list').data('autocomplete-source') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:48:50.160

`autocomplete`不是 jQuery 标准的东西。也许您忘记加载您正在尝试使用的 jQuery 插件？

事实上，如果我采用该代码并模拟一个名为 的无操作插件`autocomplete`，它运行时不会出现任何错误。

```
jQuery.fn.autocomplete = -> # implement $().autocomplete()

jQuery ->
  $('#article_tag_list').autocomplete
    source: $('#article_tag_list').data('autocomplete-source') 
```

[http://jsfiddle.net/qRPL6/](http://jsfiddle.net/qRPL6/)

# security - 在服务器上找到 WSO 2.5。这是否意味着我被黑客入侵了？

> ID：15035658
> 
> 赞同：2
> 
> 时间：2013-02-23T00:46:34.697
> 
> 标签：security

我在我的测试目录中找到了这个文件。它说它是 WSO 2.5，它显示了我的所有文件。我不记得把它放在这里了，它说它自 2012 年 12 月 21 日以来一直存在。我的 public_html 中也有一个类似的文件。两者都是加密的，所以都是乱码。整洁的小界面，但它看起来像一个黑客工具。

我应该担心吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T00:51:42.387

如果您不知道输出是什么，并且没有 chron 或类似的工作来创建此类输出，那么您可能就是。确实有一个叫WSO的工具，就是用来做渗透测试的。

如果这是您所指[的界面，那么您很可能确实被黑客入侵了。](http://www.invisiblehackers.in/2012/06/download-wso-new-version-25-web-shell.html)

# python - 使用python将csv中的单列解析为文本文件

> ID：15035660
> 
> 赞同：2
> 
> 时间：2013-02-23T00:46:35.833
> 
> 标签：python, csv, python-2.7, text-parsing

我终于把我的 dbf 文件变成了 csv，但现在我很困惑如何将它解析成文本文件以供进一步编辑。

我一直在阅读 csv 模块，但老实说，我的头开始旋转。对我来说，其中大部分似乎是希腊语。但是，如果可能的话，我想要使用模块的代码。

我的 car.csv 文件如下所示：

```
Name,Total,Freq
Toyota,2,2
Mazda,1,1
Kia,2,1
Volkswagon,3,1 
```

我想将以下句子输出到文本文件（或 csv）中：

在这个街区内，街上停着一辆丰田、马自达、起亚和大众汽车。

如果结果是两个我不想要逗号：

汽车.dbf

```
Toyota,2,2
Mazda,2,1 
```

在这个街区内，街上停着一辆丰田和马自达。

汽车.dbf

```
empty 
```

这附近的街道上没有停放汽车。

我从之前的一篇文章中得到了一个关于构建 if-else 句子的好建议，但对如何解析列感到迷茫（由于某种原因，它们没有出现在 Excel 中，我以为我只有一列）

蟒蛇2.7

顺便提一句。任何人都知道一个很好的网站，它以新手可以理解的方式解释 csv 模块？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:55:39.590

[Python 文档示例](http://docs.python.org/2/library/csv.html#examples)总是很受欢迎。

你想要这样的东西：

```
import csv

makes = []
with open('cars.csv', 'rb') as f:
    reader = csv.reader(f)
    next(reader) # Ignore first row

    for row in reader:
        makes.append(row[0])

print makes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:55:03.767

使用`csv`模块：

```
>>> with open('cars.csv') as f:
...    reader = csv.reader(f)
...    cars_list = [row[0] for row in reader]
...
>>> cars_list
['Name', 'Toyota', 'Mazda', 'Kia', 'Volkswagon'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T00:55:39.950

如果我理解正确，您已经拥有 csv 文件。如果是这样，您需要做的就是将其读入您用来处理它的任何函数中。这是一个例子：

```
def process_csv():
    with open('/path/to/file/car.csv') as f:
        for line in f:
            values_list = line.split(',') #gives you a list
            #process your the rest here. 
```

基本上，这会加载您的文件并从每一行创建一个列表。所以对于你的`Toyota,2,2`，你最终会得到

`> print('Name = " + values_list[0])` `Name = Toyota`

# c# - 何时/如何用 foreach 替换 for 循环

> ID：15035662
> 
> 赞同：1
> 
> 时间：2013-02-23T00:47:21.907
> 
> 标签：c#, foreach

我正在创建一个整数集类，其中对象可以通过一个布尔数组保存多达 101 个数字。我的任务是尽可能使用 foreach 循环，但我找不到可以使用它的地方/甚至可以使用它的地方。

这是我的一些代码片段，我完全按照老师的要求完成了程序。如果可能的话，我无法完全弄清楚将联合集设置为 foreach 循环。这个程序可以通过 foreach 循环改进吗？如果可以，在哪里？

```
public bool[] set = new bool[101];

public IntegerSet(){

    for (int k = 0; k < set.Length; k++)
    {
        set[k] = false;
    }

public IntegerSet unionSet  (IntegerSet a)
{
    IntegerSet c = new IntegerSet();
    for (int i = 0; i < 101; i++)

    {
        if (a.set[i] == true || this.set[i] == true)
            c.set[i] = true;
    }

    return c;
}

public bool isEqual(IntegerSet a)
{
    int count = 0;
    for (int i = 0; i < 101; i++)
    {
        if (a.set[i] == this.set[i])
            count++;
    }
    if (count == 101)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T01:10:32.693

`foreach`通常，在处理单个集合*而不修改它*的情况下使用循环。在您有多个集合的情况下，带有索引的循环更合适。

在您的情况下，三个循环都不符合上述描述：

*   第一个循环写入数组
*   第二和第三个循环处理多个序列。

您可以大大简化您的代码，但每当您使用两组时，`for`循环更合适（我假设使用 LINQ 不是一个选项）。

```
public IntegerSet unionSet  (IntegerSet other) {
    IntegerSet res = new IntegerSet();
    for (int i = 0; i < 101; i++) {
        res.set[i] = other.set[i] || this.set[i];
    return res;
}
public bool isEqual(IntegerSet a) {
    for (int i = 0; i < 101; i++) {
    if (a.set[i] != this.set[i])
        return false;
    return true;
} 
```

为了完整起见，使用 LINQ 可以避免大多数循环：

```
public IntegerSet unionSet(IntegerSet other) {
    // Assume that you have a constructor that takes IEnumerable<bool>
    new IntegerSet(set.Zip(other.set, (a, b) => a || b));
}
public bool isEqual(IntegerSet a) {
    return set.SequenceEqual(a.set);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T01:14:50.533

可能对您有所帮助的简单经验法则：

> 对数组使用 for 循环，对迭代器使用 foreach 循环

您的所有集合似乎都是数组，因此您的循环使用（fors）是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T01:18:19.303

第一个 for 循环不能用 foreach 代替，因为无法更改 foreach 循环中的元素。

第二个和第三个 for 循环不是很好的候选者，因为 foreach 循环遍历一组，但您需要它们遍历两组。

理论上，您可以使用[Zip](http://msdn.microsoft.com/en-us/library/dd267698%28VS.100%29.aspx)（可从 .NET 4 获得）或创建一个返回的函数`IEnumerable<Pair<int,int>>`，其中`Pair`是一个仅[包含两个值](https://stackoverflow.com/a/166094/395718)的类，然后在两者中使用此函数`unionSet`和`isEqual`. 例如看这个[问题](https://stackoverflow.com/q/1955766/395718)，用`KeyValuePair`代表想象`Pair`。这可能是老师要求的，也可能是矫枉过正。取决于老师。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T01:19:31.620

您可以使用以下构造替换每个 for 循环：

```
int counter = 0;
foreach(bool b in set)
{
   set[counter] = true;
   counter++;
} 
```

另外，请注意 any`bool[] table = new bool[10];`的所有值都设置为`false`，因为它`false`是 bool 类型的默认值。

# actionscript-3 - 从对象画线到鼠标 (AS3)

> ID：15035665
> 
> 赞同：2
> 
> 时间：2013-02-23T00:47:37.187
> 
> 标签：actionscript-3, flash

我的代码在这里：

```
 graphics.clear();
        graphics.lineStyle(1, 0, 1);
        graphics.moveTo(cannon.x, cannon.y);
        graphics.lineTo(mouseX, mouseY); 
```

好像什么都没画。顺便说一句，它现在在 ENTER_FRAME 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T01:11:47.330

参考以下代码。这是我的简单代码绘制应用程序。并粘贴下面的代码：

`startX`而是`startY`应该更改为您的对象（`cannon`）。

如果要删除前一行。调用处理程序`this.graphics.clear();`。`onDrawReady`

```
var isDrawingReady:Boolean;
var startX:Number, startY:Number;
stage.addEventListener(MouseEvent.MOUSE_DOWN, onDrawReady);
stage.addEventListener(MouseEvent.MOUSE_UP, onDrawStop);
stage.addEventListener(MouseEvent.MOUSE_MOVE, onDraw);
function onDrawReady(e:MouseEvent):void
{
    startX = e.stageX;
    startY = e.stageY;
    isDrawingReady = true;
}

function onDraw(e:MouseEvent):void
{
    if(isDrawingReady)
    {
        this.graphics.lineStyle(2,0xff0000);
        this.graphics.moveTo(startX,startY);
        this.graphics.lineTo(e.stageX,e.stageY);

        startX = e.stageX;
        startY = e.stageY;
    }

    e.updateAfterEvent();
}

function onDrawStop(e:MouseEvent):void
{
    isDrawingReady = false;
} 
```

# 编辑

如果你想在鼠标移动时总是画线。尝试如下：

```
var startX:Number, startY:Number;
stage.addEventListener(MouseEvent.MOUSE_MOVE, onDraw);
function onDraw(e:MouseEvent):void
{
    this.graphics.lineStyle(2,0xff0000);
    this.graphics.moveTo(startX,startY);
    this.graphics.lineTo(e.stageX,e.stageY);

    startX = e.stageX;
    startY = e.stageY;

    e.updateAfterEvent();
} 
```

# android - 不透明像素格式是什么意思

> ID：15035670
> 
> 赞同：1
> 
> 时间：2013-02-23T00:48:31.123
> 
> 标签：android

在android中，我可以将表面设置为不透明像素格式

[http://developer.android.com/reference/android/graphics/PixelFormat.html](http://developer.android.com/reference/android/graphics/PixelFormat.html)

你能告诉我不透明格式是什么意思吗？这是否意味着原始，没有编码格式？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:47:53.907

不透明像素格式基本上与确定像素透明度/不透明度有关。通常[Alpha 通道](http://en.wikipedia.org/wiki/Alpha_channel)用作不透明度通道。通过将像素格式设置为 OPAQUE，Android 将选择自己的 OPAQUE 格式，而不是使用 Alpha 通道位来获取透明度信息。

另请阅读[RGBA 颜色空间](http://en.wikipedia.org/wiki/RGBA_color_space)以获取更多信息。

# javascript - JavaScript 和模态对话框

> ID：15035672
> 
> 赞同：1
> 
> 时间：2013-02-23T00:48:38.373
> 
> 标签：javascript, jquery

一个 JavaScript 函数，需要提示用户输入一些数据，然后通过 Ajax 提交该数据。来自 WinForms/WPF 背景，我的第一个想法是做这样的事情：

```
function promptForData() {
    $('#my-form').dialog({
        autoOpen: true,
        modal: true,
        buttons: {
            "OK": function () {
                alert("Added");
                // Unlike WinForms I cannot
                // set a dialog result here
                $(this).dialog("close");
            },
            "Cancel": function () {
                alert("Canceled");
                $(this).dialog("close");
            }
        }
    });
}

function update() {
    var data = promptForData();
    // Unlike WinForms execution continues immediately even
    // for a "modal" dialog (jQuery UI Dialog, modal: true)
    makeAjaxCall(data);
} 
```

显而易见的解决方案似乎是重组代码，以便`makeAjaxCall(data)`在对话框的“OK”处理程序中发生。

由于所涉及的实际代码要复杂得多，我确实希望将提示数据与使用数据分开。是否有合适的模式来做到这一点？

*注意：显示的实际实现使用 jQuery UI，但我认为问题与此无关。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:58:57.880

基本模式是用回调参数表示“下一步做什么”。不要从提示函数返回值，而是使用这些值调用回调，而不是将提示函数的返回值放入变量中，而是将其放入回调的参数中。

```
function promptForData(callback) {
    $('#my-form').dialog({
    autoOpen: true,
    modal: true,
    buttons: {
        "OK": function () {
            alert("Added");
            // Unlike WinForms I cannot
            // set a dialog result here
            $(this).dialog("close");

            callback(/*pass your data here*/); // <----
        },
        "Cancel": function () {
            alert("Canceled");
            $(this).dialog("close");
        }
    }
});
}

promptForData(function(data){
    makeAjaxCall(data)
}) 
```

如果你做了很多异步的事情，这可能会开始变得有点难看，因为回调倾向于“嵌套”在彼此内部，从而创建一个“厄运金字塔”。如果您遇到这种情况，我建议您查看 Promise/Deferred 模式。

请注意，我也没有在这里介绍错误处理。在编写“回调”代码时，如果某些东西可能引发异常，您需要立即添加一个 try/catch 块，以便您可以捕获它并将其传递给单独的错误回调。同样，如果这对您来说是个问题，您可能需要查看 Promises。

# c - C 程序省略字符

> ID：15035673
> 
> 赞同：-1
> 
> 时间：2013-02-23T00:48:50.260
> 
> 标签：c

我正在尝试创建一个将文本文件转换为 c 的程序，只是为了好玩。我的问题是输出值与应有的不同。

```
 #include <stdio.h>
    #include <string.h>

    int main(int argc, char *argv[]) {

     FILE *intf=fopen(argv[1], "r");        //input and output file
     FILE *ocf=fopen(argv[2], "w");
     char b[1000];
     char *d;
     char *s;
     char *token;

    const char delim [2] = "`";

        fprintf(ocf, "#include <stdio.h>\n int main(void) {\n"); //Preparation

    while (fgets(b, 20, intf) !=NULL) { //Ensure that EOF has not been reached

      if (d = strstr(b, "print")) { //Search for "print" in the file
          fprintf(ocf, "printf(\"");    //Prepare for "printf("");" statement
          s=strstr(b, "`");     //Search for delimiting character
          token=strtok(s, delim);       //Omit delimiting character
    while( token != NULL) {
            token[strlen(token)-1]=NULL;    //Omit newline character that kept geting inserted
            fprintf(ocf, "%s", token);  //Print what was read
            token = strtok(NULL, delim);    //
    }
        fprintf(ocf, "\");\n");     //Finish printf() statement
    }

    }
      fprintf(ocf, "\n}");      //Finish c file
      printf("Creation of c file complete \n");
    } 
```

输入文件：

```
 print `hello\n world
    print `Have a nice day 
```

和输出：

```
 #include <stdio.h>
    int main(void) {
    printf("hello\n wor");
    printf("Have a nice");

    } 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:58:29.323

您应该修复此行：

```
while (fgets(b, 20, intf) !=NULL) 
```

它实际上从行中获取多达 20 个字符，因此您不会阅读整行。然后在下一次迭代中读取该行的其余部分，但它被跳过，因为它不包含单词“print”。您应该每行获得超过 20 个字符来修复此错误。您的缓冲区 (b) 大小为 1000，因此您可以负担得起。

# android - Android - 我可以从混音器获取音频数据以进行播放吗？

> ID：15035675
> 
> 赞同：0
> 
> 时间：2013-02-23T00:48:51.103
> 
> 标签：android, audio

我想捕捉安卓手机上播放的音频。

至于语音通话音源，我可以使用 AudioRecord 来实现。但我不知道有什么方法可以获取其他音频源（例如，其他应用正在播放的音乐）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:52:31.420

> 至于语音通话音源，我可以使用 AudioRecord

仅当“语音呼叫音频源”是指麦克风时。

> 但我不知道有什么方法可以获取其他音频源（例如，其他应用正在播放的音乐）。

如果设备处于免提模式，您可以通过麦克风对其进行捕捉。

否则，您无权访问其他应用程序的音频输出。

# xml - 根据其他属性值替换 xml 属性

> ID：15035682
> 
> 赞同：3
> 
> 时间：2013-02-23T00:50:09.880
> 
> 标签：xml, xslt

我是 XSLT 的新手，所以我非常感谢任何帮助。我在stackoverflow上搜索了很多，尝试应用几种方法，但失败了。

我有一个这样的xml：

```
 <?xml version="1.0" encoding="utf-8"?>
       <asset_detail>
          <asset id="1" show_type="Movies">
             <title><![CDATA[Movie]]></title>
             <media_list>
               <media id="11" title="" type="trailer">
                 <version format="m3u8" rel_path="/Content/movie.m3u8"/>
                 <version format="HLS" rel_path="/movies/movie.m3u8"/>
               </media>
               </media_list>
           </asset>
       </asset_detail> 
```

我应该复制整个 xml 并且：

```
if media_list/media/version/@format = '**HLS**' I need to replace **@rel_path** with
value: **concat**(existing value of **@rel_path****,** **someVariable**
(I'm passing to xsl as a <xsl:param>) 
```

我想我必须使用类似的东西：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="@*|node()">
        <xsl:param name="someVariable"/>
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="media/version">
        <xsl:attribute name="rel_path">
            <xsl:choose>
                <xsl:when test="./@format = HLS">
                    <xsl:value-of select="concat(rel_path,$someVariable)">
                </xsl:when>
            </xsl:choose>
        </xsl:attribute>
    </xsl:template>
</xsl:stylesheet> 
```

我知道它不起作用:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T05:51:54.930

**使用[AVT](http://www.w3.org/TR/xslt#attribute-value-templates)（属性值模板）的更短的解决方案：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:param name="psomeParam" select="'/xxx'"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="version[@format='HLS']">
  <version rel_path="{@rel_path}{$psomeParam}">
   <xsl:apply-templates select="@*[not(name()='rel_path')] | node()"/>
  </version>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<asset_detail>
    <asset id="1" show_type="Movies">
        <title><![CDATA[Movie]]></title>
        <media_list>
            <media id="11" title="" type="trailer">
                <version format="m3u8" rel_path="/Content/movie.m3u8"/>
                <version format="HLS" rel_path="/movies/movie.m3u8"/>
            </media>
        </media_list>
    </asset>
</asset_detail> 
```

**产生了想要的正确结果：**

```
<asset_detail>
   <asset id="1" show_type="Movies">
      <title>Movie</title>
      <media_list>
         <media id="11" title="" type="trailer">
            <version format="m3u8" rel_path="/Content/movie.m3u8"/>
            <version rel_path="/movies/movie.m3u8/xxx" format="HLS"/>
         </media>
      </media_list>
   </asset>
</asset_detail> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T02:10:59.970

你很接近。传递给样式表的全局参数应在外层声明（移至`output`元素的后续兄弟）。HLS 格式匹配还不如直接在模板中完成`[@format='HLS']`。此外，您在`value-of`. 最后，您不能直接更改匹配元素的属性；因此`copy`下面的元素，发出具有现有属性+更新格式的匹配元素：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:param name="someVariable"/>
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="media/version[@format='HLS']">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:attribute name="rel_path">
                <xsl:value-of select="concat(@format,$someVariable)"/>
            </xsl:attribute>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

希望这可以帮助。

# sublimetext2 - Sublime Text：如何查看当前工作目录以及如何更改它

> ID：15035689
> 
> 赞同：2
> 
> 时间：2013-02-23T00:51:01.583
> 
> 标签：sublimetext2

Q1：如何在 Sublime Text 中查看当前工作目录是什么？

我想知道，所以我知道当我进行文本搜索时它正在搜索哪些目录/子目录。

Q2：另外，有没有办法改变当前的工作目录？

Sublime Text 2，v2.0.1，构建 2217；Mac OS X 狮子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T03:00:55.060

当您执行“在文件中查找”时，它会搜索“位置：”字段中列出的文件夹/文件。如果没有指定，我相信这默认为项目中的所有文件/文件夹。您可以通过在“Where：”字段中指定不同的值来更改此设置，并通过单击“Where：”值旁边的“...”图标来添加更多标准以获取选项`Clear, Add Folder, Add Include Filter, Add Exclude Filter, Add Open Folders, Add Open Files`

限制搜索的另一个选项是执行“文件 > 打开...”并打开要搜索的文件夹。这将打开一个带有新项目的新窗口。

我通常会打开一个文件夹，这样它会弹出一个新窗口，然后`Project -> Save Project As`保存项目。命令面板中还有一个命令可以执行此操作。然后，您可以使用快捷方式在项目之间快速切换`cmd+ctrl+p`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T23:22:02.437

ST 中的当前工作目录可以在 Finder 中打开，方法是右键单击打开文件中的任意位置并选择“在 Finder 中显示”。

无论如何，“当前工作目录”的概念在 ST 中仅在项目的上下文中才有意义，该项目本身就是一个文件夹以及其中的所有文件（除了那些被项目文件过滤掉的文件）。这将排除立即更改工作目录的可能性，我应该认为

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T01:21:31.620

这个怎么样：[https](https://www.sublimetext.com/docs/3/build_systems.html) ://www.sublimetext.com/docs/3/build_systems.html 。working_dir**选项**可以更改当前工作目录。可能这会对你有所帮助。

# ruby-on-rails - 将 _url 绝对链接与 ActionController 整页缓存一起使用

> ID：15035695
> 
> 赞同：2
> 
> 时间：2013-02-23T00:52:25.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, actioncontroller

我们有一个 rails 3 应用程序（3.2.12），我们希望在其上实现全页缓存（使用 ActionController `caches_page`）

我们`_url`在应用程序的任何地方都使用 url 助手，这导致所有缓存页面（在生产中）中的链接都具有域：`http://0.0.0.0/`

我们在几个需要链接中的域的页面上有规范链接，因此我们无法轻松切换到`_path`url 帮助程序。

我搜索了 Google 和 StackOverflow，但找不到答案。

我没有传递任何选项`caches_page`

这些页面基本上是这样的：

```
class SomeController < ApplicationController
  caches_page :index, :other_action

  def index
  end

  def other_action
  end
end 
```

**如何使生成的缓存页面中的链接具有正确的域？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:45:08.147

也许您正在本地缓存页面（将它们写入“public”目录），然后将包括“public”目录在内的所有内容部署到生产站点，从而从生产中提供开发页面。

# javascript - 从 JSON 构建构造函数

> ID：15035697
> 
> 赞同：0
> 
> 时间：2013-02-23T00:52:41.723
> 
> 标签：javascript, json

从 JSON 中，我想请求构造函数的名称并让它在 javascript 中执行。

**json.js**

```
{
    objArray = [
        {
            "funcName":"executeMe"
        }
     ]
} 
```

**page.js**

```
var newInstance = createInstanceByName(objArray[0].funcName); //"executeMe"
//Functions like: var newInstance = new lib.executeMe(); 
```

**lib.js**（我无法控制）看起来像这样：

```
(lib.executeMe = function() {
    this.initialize(img.executeMe);
}).prototype = new cjs.Bitmap();
p.nominalBounds = new cjs.Rectangle(0,0,200,200); 
```

我希望我可以重新利用[这个线程](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)的解决方案，但重要的是变量 newInstance 在整个 page.js 中可供我使用 - 让我传递上下文是不够的。我需要在这里完成任务。

createInstanceByName() 如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:56:49.543

```
function createInstanceByName(funcName) {
    return new lib[funcName];
} 
```

* * *

如果您需要传递参数，请将它们放在一个数组中，然后改为：

```
function createInstanceByName(funcName, args) {
    var inst = Object.create(lib[funcName].prototype)
    lib[funcName].apply(inst, args);
    return inst;
} 
```

您还可以`arguments`通过切片而不是使用数组来使用对象。

该`Object.create`方法在旧浏览器中不可用，但可以为此目的进行足够的填充。

# c++ - 在 C++ 中，有没有办法抛出一个“事件”，它会像异常一样“冒泡”堆栈？

> ID：15035705
> 
> 赞同：0
> 
> 时间：2013-02-23T00:53:45.263
> 
> 标签：c++

我正在制作一个 MVC 应用程序，我正在寻找的是某种方式来触发某种信号或事件，让它“冒泡”到更高级别的视图类，并得到处理。这种“冒泡”和处理的行为与异常的抛出和捕获完全一样，除非显然在“抛出”事件时不会停止执行，就像发生异常一样。

C++ 中是否存在这样的东西？

我背后的理由是，较低级别的模型类不需要知道任何关于视图的信息就可以工作。我不想将函数/对象指针传递给到处的视图。

编辑：我可能应该补充一点，我的应用程序使用标准 C++，所以还没有 QT，尽管我可能会尝试将它链接到 QT GUI。在模型类中包含 QT 特定代码和标准 C++ 是否明智？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:40:40.300

您正在寻找的是可重新启动的异常。这些不是在 C++ 中实现的。在 C++ 中，对异常处理程序的搜索在搜索时执行展开，因此在找到处理程序时，该处理程序和抛出站点之间的所有信息都已被丢弃，因此无法返回到抛出站点。

Common Lisp 有可重新启动的异常（它们被称为条件，而不是被“抛出”，而是“发出信号”）。当发出条件信号时，将通过动态上下文搜索处理程序。处理程序使用类型层次结构标识，与 C++ 和其他语言非常相似。但当时并没有平仓。条件处理程序（由它们自己，或与重新启动处理程序合作）确定执行将在哪里继续。这非常有用，因为它允许较低级别的代码从情况中恢复，而无需采取单方面的步骤，而是在较高级别代码的指导下。我可以看到它在模型-视图-控制器框架中的用途。

由于 C++11 具有本地匿名函数，因此可能可以将类似这样的东西组合在一起。尽管这些不是真正的词法闭包（它们只是“向下的函数参数”），但这就是所需要的，因为只需要向下传递处理程序，以便它们可以被较低级别的函数调用，而不必返回。

# php - 如何在插入新数据时将数据从 php 文件发送到 android 文件并使用服务？

> ID：15035707
> 
> 赞同：0
> 
> 时间：2013-02-23T00:54:38.897
> 
> 标签：php, android, sql-server, android-service

我想使用该功能添加接近警报，并且我有纬度和经度。我怎么能对 php 文件说，当它获取新数据时，它会将数据发送到一个 android 文件，该文件将使用添加接近警报功能，并将通知所有使用该应用程序且在 100 米半径内的人?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:32:48.493

您在服务器端所需要的只是：

*   登录
*   ChangePosition => 将当前用户（但是您将存储纬度/经度信息）设置到他的新位置。
*   PersosnNearMe => 在您的记录中搜索用户附近的人。我确信有大量的 php-libs 或 sql-scripts 可以让所有用户在一定范围内。
    保存当前用户旁边的人的信息 - 您将在“NeedsUpdate”中需要它。
*   NeedsUpdate：根据保存的 PersonsNearMe 信息和新请求，如果您的 android 手机需要同步列表，则返回一个简单的布尔值。

您可以很容易地将其构建为 RESTful-Server。JSON在这里是你的朋友：http: [//php.net/manual/en/book.json.php](http://php.net/manual/en/book.json.php)

构建 RestfulClient 更加容易：您只需在开始时登录，每隔 n 秒查询一次“NeedsUpdate”，然后在有人出现时触发警报框。最后，您必须在每次使用 ChangePosition 移动时通知服务器。

# java - Java - Swing UI 要观察的数据主体

> ID：15035710
> 
> 赞同：2
> 
> 时间：2013-02-23T00:54:46.153
> 
> 标签：java, swing, observers

我制作了一个 jPanel 用作数据绘图查看器。这些面板可能有多个窗口查看相同的数据源，但是数据可能需要在点击特定的 jPanel 之前进行处理。

为了解决额外处理的问题，我正在考虑为每个 jPanel 使用一个 swing worker，并使用该线程来观察数据主体线程。

我提出的方法是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:58:56.913

只要您在后台线程中执行长时间运行的任务，并在 Event Dispatch Thread 中修改 Swing 组件，您就可以了。

# javascript - 我应该将菜单折叠状态存储在多个 cookie 中吗？

> ID：15035712
> 
> 赞同：1
> 
> 时间：2013-02-23T00:55:00.233
> 
> 标签：javascript, jquery, cookies

我正在开发一个控制面板，它有一个左栏菜单，其中包含使用 JavaScript(jQuery)、HTML 和 Cookie 的可折叠部分。请参阅图片了解简要想法。

在图像中，您可以看到`Account Information`菜单已展开/打开/可见。

`Server Admin`, `Database Management`, `Domain Management`, `Mail`, 和`several others`未在图像中显示为折叠/关闭/隐藏

![菜单图片](../Images/0276c6bd9a86bd051bae42a44a5baa19.png)

目前，我为每个菜单部分存储一个 cookie，告诉它是否折叠。如果有 10 个菜单部分，即在每次页面加载时读取 10 个 Cookie（n X 菜单部分）。

所以我的问题是，如果在我的控制面板中有 20-30 个 cookie 保存此信息，最好将它们存储为 1 个 cookie，然后将每个菜单的值存储在这个 cookie 中，可能是 JSON 字符串或其他存储在cookie中的格式？

很想听听比我现在更好的方法。它现在有效，但感觉不对。

请帮忙，我绝不是 Javascript 专家，我还在学习 JS，我的背景更多的是 PHP。

到目前为止，这是我的代码...

```
// jQuery Cookie plugin is not shown but is also used.

$(document).ready(function() {

    // Handle the menu state based on Click events
    $('#menu-sidebar li:has(ul) .heading').click(function() {
        $(this).next().toggle();
        if ($(this).next().is(':visible')) {
            $.cookie($(this).text().replace(/\+|-|\s/g,''), 'expanded');

            $(this).children('.open').text('-');
        }

        if ($(this).next().is(':hidden')) {
            $.cookie($(this).text().replace(/\+|-|\s/g,''), 'collapsed');

            $(this).children('.open').text('+');
        }
    });

    // Handle the Menu state based on current Cookie values
    $('#menu-sidebar > li').each(function() {
        var cookieName = $(this).children('.heading').text().replace(/\+|-|\s/g,'')
        var verticalNav = $.cookie( cookieName );

        if (verticalNav == 'expanded') {
            $(this).find('ul').show();
            $(this).find('.open').text('-');
        }
    });

}); 
```

我已经在 J​​SFiddle 页面上添加了所有的 JavaScript 和 HTML + CSS，以便在这里查看它的运行情况...... [http://jsfiddle.net/jasondavis/mvucU/](http://jsfiddle.net/jasondavis/mvucU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:00:45.570

由于这是一个纯 javascript 实现，您应该使用 localstorage [http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

由于值不会随每个请求一起发送（如使用 cookie），因此您可以选择使用单个或多个条目。如果你想使用最少的条目，你可以使用 json，例如使用这个插件[https://code.google.com/p/jquery-json/](https://code.google.com/p/jquery-json/)

# javascript - JSON 记录计数返回 0 ？EXTJS 4

> ID：15035715
> 
> 赞同：0
> 
> 时间：2013-02-23T00:55:19.850
> 
> 标签：javascript, ajax, json, extjs, extjs4

```
Ext.define('GoogleMarkerModel', {
        extend: 'Ext.data.Model',
        fields: ['ID','Locating','MainPower','Acc','PowerOff','Alarm','Speed','Direction','Latitude','Longitude','DateTime','MainID','IOState','OilState']
    });

    var MarkerStore = Ext.create('Ext.data.JsonStore', {
        model: 'GoogleMarkerModel',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'get-googlemarker.php',
            baseParams: {  //here you can define params you want to be sent on each request from this store
                        mainid: 'value1'
                        },
            reader: {
                type: 'json',
            }

        }
    });

MarkerStore.load({
params: {  
        mainid: 1,
        }
}) 
```

这是萤火虫中的记录返回，我试图用`alert(MarkerStore.getCount());`返回 0 计算记录？为什么？
我仔细检查了字段名称，一切都是正确的。这是怎么回事？

```
[{"ID":"1808","Locating":"1","MainPower":"0","Acc":"1","PowerOff":"1","Alarm":"128","Speed":"0","Direction":"293","Latitude":"5.391788482666016","Longitude":"100.29693603515625","DateTime":"2013-02-19 15:44:36","MainID":"1","IOState":"0","OilState":"0"}] 
```

## 更新

```
Ext.define('GoogleMarkerModel', {
    extend: 'Ext.data.Model',
    idProperty:'MainID',
    fields: ['ID','Locating','MainPower','Acc','PowerOff','Alarm','Speed','Direction','Latitude','Longitude','DateTime','MainID','IOState','OilState']
});

var MarkerStore = Ext.create('Ext.data.JsonStore', {
    model: 'GoogleMarkerModel',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: 'get-googlemarker.php',
        baseParams: {  //here you can define params you want to be sent on each request from this store
                    mainid: 'value1'
                    },
        reader: {
            type: 'json',
            idProperty : 'MainID',
        }

    }
}); 
```

我添加了 idproperty，但仍然无法工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:17:24.423

我不明白你为什么使用 idProperty？

看看[api-docs](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader)会给你一个简短的例子。你的代理阅读器应该看起来很相似，你的 json 也应该如此。使用根属性。

# php - 如果 CodeIgniter 方法不存在，则重定向到默认方法。

> ID：15035716
> 
> 赞同：4
> 
> 时间：2013-02-23T00:55:21.643
> 
> 标签：php, codeigniter, class, redirect, methods

我正在使用 CodeignIter，并且正在寻找一种在调用方法不存在时为单个控制器编写自定义处理例程的方法。

假设你打电话`www.website.com/components/login`

在`components`控制器中，没有一个名为 的方法`login`，因此它不会发送 404 错误，而是默认使用另一个名为 的方法`default`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T03:17:25.930

是的，有一个解决方案。如果您有`Components`控制器和文件名`components.php`。编写以下代码...

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Components extends CI_Controller
{

    public function __construct()
    {
        parent::__construct();
    }

    public function _remap($method, $params = array())
    {
        if (method_exists(__CLASS__, $method)) {
            $this->$method($params);
        } else {
            $this->test_default();
        }
    }

    // this method is exists
    public function test_method()
    {
        echo "Yes, I am exists.";
    }

    // this method is exists
    public function test_another($param1 = '', $param2 = '')
    {
        echo "Yes, I am with " . $param1 . " " . $param2;
    }

    // not exists - when you call /compontents/login
    public function test_default()
    {
        echo "Oh!!!, NO i am not exists.";
    }

} 
```

由于`default`PHP 是保留的，因此您不能使用它，因此您可以像这里一样编写自己的默认方法`test_default`。这将自动检查您的类中是否存在方法并相应地重定向。它还支持参数。这对我来说很完美。你可以自己测试一下。谢谢！！

# php - 在不在数据库中的文件中进行 modx 模板化

> ID：15035720
> 
> 赞同：0
> 
> 时间：2013-02-23T00:55:46.717
> 
> 标签：php, modx, modx-revolution, modx-templates

所以我让模板文件正常工作。有点。

![在此处输入图像描述](../Images/7407ac0b08a4639f02600b1832d0982b.png)

静态资源会渲染。但是当我对文件进行更改时，我必须在更改显示在输出中之前在 Modx ui 中点击保存。有什么办法可以一起关闭缓存吗？或者至少有某种“监视”系统可以在文件保存时刷新缓存？我真的很想开始使用 modx，但到目前为止模板工作流程真的很痛苦。

必须有一个包。但到目前为止，我的谷歌搜索还不够。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T03:44:37.917

您可以在系统设置中关闭默认缓存 [或将缓存生命周期设置为 1 秒，0 未记录，但我认为这意味着“永远”而不是 0 秒] & 这应该适合您。[我有同样的问题 - 它确实有效]

尽管您在完成开发后希望将模板存储在数据库中以提高性能，但要利用数据库和查询缓存以及磁盘缓存。

并且您可能想考虑使用 ACE 或 codeMirror 包而不是远程编辑器。我不相信有任何软件包可以监视文件的更改〜但是〜您也可以编写一个插件来为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:09:15.593

您只需要在系统设置中关闭“cache_resource”。( [http://rtfm.modx.com/display/revolution20/cache_resource](http://rtfm.modx.com/display/revolution20/cache_resource) ) 不要忘记在开发过程结束时将设置恢复到原来的位置。你可以直接在文件中给自己做个提醒，例如：`<!-- Partial Resource Cache is Off Now -->`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T11:57:56.673

实际上，关闭缓存是愚蠢且不必要的。

如果您更新文件系统上的静态模板，只需在站点菜单中清除缓存即可。

此外，关于将模板存储在数据库中以提高性能的声明，只需忽略它。性能将来自被缓存的页面，无论是来自数据库还是文件系统。

性能在缓存中，更不用说使用 minify 和其他技术了。

# sqlite - rm sqlite3 的分段错误

> ID：15035722
> 
> 赞同：-1
> 
> 时间：2013-02-23T00:55:51.257
> 
> 标签：sqlite, segmentation-fault

我试图删除 sqlite

```
sudo rm /usr/lib/i386-linux-gnu/sqlite3.so.0.6.8 
```

然而是给我一个分段错误

我在 /usr/lib/i386-linux-gnu 和 /usr/local/lib 中有两个 libsqlite3.so.0 和 libsqlite3.so.0.8.6 的副本。

我遇到了sql问题，所以我打算删除它并重新安装。我能够从 /usr/lib/i386-linux-gnu（使用 rm）中删除 libsqlite3.so.0，但是当从同一位置删除 libsqlite3.so.0.8.6 时，我现在遇到了段错误。从 /usr/local/lib 目录复制 libsqlite 文件也会给我一个段错误。

重新安装 sqlite3（通过 apt-get 和源）也会给我一个分段错误错误。

任何想法如何重新安装 sqlite（或删除所有 sqlite 文件并重新安装）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:16:31.123

看到[这个线程](https://askubuntu.com/questions/260353/segmentation-fault-when-using-su-or-sudo)。

通过 aptdcon 重新安装所有 sqlite 包就可以了。

# php - 从数据库中获取数据不起作用

> ID：15035723
> 
> 赞同：-1
> 
> 时间：2013-02-23T00:56:14.983
> 
> 标签：php, database, arrays

这是我的代码。我认为问题在于`$retrieve["'choice'.'$i'"];`这里的正确格式是什么？

```
$i = '1';
do {
   $choice[$i] = $retrieve["'choice'.'$i'"];
   $i++;
} 
while ($i <= $numberofchoices);
echo $choice['1']; //not working!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:06:56.733

尝试这个：

```
$i = '1';
do {
   $choice[$i] = $retrieve["choice".$i];
   $i++;
} 
while ($i <= $numberofchoices);
echo $choice['1']; 
```

# sublimetext2 - Sublime Text：如何在文本搜索中仅显示文件名，或“折叠所有”结果？

> ID：15035726
> 
> 赞同：11
> 
> 时间：2013-02-23T00:56:56.350
> 
> 标签：sublimetext2

在 Sublime Text 中进行文本搜索时，有没有办法只显示匹配的文件名，**而不**显示匹配的实际行以及这些行周围的上下文？

我可以浏览每个文件并折叠这些行（将鼠标悬停在第一列中的行号和第三列中的文件名之间的列上，显示一个箭头图标，单击该箭头图标）——有没有办法轻松折叠所有他们？

Sublime Text 2, v2.0.1, build 2217

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-25T04:24:19.060

我自己也一直在想这个，但显然答案很简单。使用**代码折叠。**

转到菜单**Edit** > **Code Folding** > **Fold All**。Mac 上的键盘快捷键是`⌘K`, 然后`⌘1`

## 正常结果：

![展开代码](../Images/c8816383acc3e317a449d81e6bdfe7a3.png)

## （部分）折叠结果：

![部分折叠/折叠的代码](../Images/e3b37e1345432c74038b6b56f2c90f4f.png)

显然，它的效果不太好——在 ST2 和 ST3 中，一些结果仍在展开——但它确实如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-22T16:00:35.317

我处理这个问题的方法是执行搜索，复制整个结果输出并将其粘贴到新文档中。然后使用“搜索文件”（ctrl-shift-F）并在该结果文件中搜索“C:\Users\”，并取消选择“显示上下文”。这给了我一个文件和路径的列表。

[![在此处输入图像描述](../Images/b61f0cbad78b2c7f857f51d870b217d7.png)](https://i.stack.imgur.com/AD3x9.png)

# ios - ios磁力计：校准视图的力显示

> ID：15035729
> 
> 赞同：6
> 
> 时间：2013-02-23T00:57:17.093
> 
> 标签：ios, cllocationmanager, calibration, magnetometer

作为机械罗盘的用户，我注意到磁力计提供的航向通常偏离 45 度或更多，尽管在这种情况下没有出现校准显示。

如果我在户外测试或使用我的应用程序，我会在指南针视图出现时校准磁力计。这行得通，看来这是必要的。

我不想向我的应用程序的用户显示一个不准确的航向，当可以通过使用八字形运动进行频繁校准来实现或多或少准确的航向时。

有没有人知道每次我的指南针视图出现时强制显示磁力计校准视图的解决方案？

我在这里搜索了所有（？）帖子，只有一个人有类似的想法，但没有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T11:25:16.760

恐怕没有办法做到这一点 - 虽然 API 允许您*关闭*校准视图（使用`dismissHeadingCalibrationDisplay`调用）以防止它中断您的应用程序界面，但无法强制开始校准。如果您认为它可能有用，我建议向 Apple 提交功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T16:14:55.327

```
 - (BOOL)locationManagerShouldDisplayHeadingCalibration:(CLLocationManager
*)manager {
        if(!manager.heading) return YES; // Got nothing, We can assume we got to calibrate.
        else if( manager.heading.headingAccuracy < 0 ) return YES; // 0 means invalid heading, need to calibrate
        else if( manager.heading.headingAccuracy > 5 )return YES; // 5 degrees is a small value correct for my needs, too.
        else return NO; // All is good. Compass is precise enough.
    } 
```

**字体：** [罗盘校准objective-c](https://stackoverflow.com/questions/17089155/compass-calibration-objective-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T11:24:10.800

我认为在 ios6 及以下版本中没有任何 api :(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-18T16:41:33.827

**拿一块冰箱磁铁**，将它移动到 iPhone 屏幕的顶部。您可能还需要同时在几个轴上旋转 iPhone；有创意。

请注意，要再次用磁铁欺骗磁力计，您可能需要让它自行重置为地球磁场。您可以通过在所有轴上旋转 iPhone 来做到这一点。

在校准屏幕再次消失后，我遇到了一个错误。上面的方法可以让我在10秒左右的时间内强制它随意出现。

一些附加信息： 当校准屏幕出现时，AppDelegate`applicationWillResignActive`被调用。然后当它完成时：`applicationDidBecomeActive`。（我的错误：我只在 中重新启动了我的运动管理器`applicationWillEnterForeground`，而不是在`applicationDidBecomeActive`。）

# jquery - 使用 JQuery 如何检测对某个列表的任何 html 列表元素的点击并获取 li 元素中的文本？

> ID：15035743
> 
> 赞同：0
> 
> 时间：2013-02-23T00:58:44.907
> 
> 标签：jquery, jquery-selectors

使用 JQuery 如何检测对某个列表的任何 html 列表元素的点击并获取 li 元素中的文本？

例如，我有以下列表：

```
<ul id="mylist">
  <li>one</li>
  <li>two</li>
  <li>three</li>        
</ul> 
```

例如，如果用户单击 li 元素*之一*，则 JQuery 应该检测到这一点并获取字符串*"one"*。

# 我为自己解决问题所做的一切

我正在考虑给每个 li 元素一个以相同开头的 id，例如：

```
<li id='li-1'>one</li>
<li id='li-2'>two</li>
<li id='li-3'>three</li> 
```

然后执行以下操作（CoffeScript）：

```
$('[id^="li-"]').click ->
  console.log $(this).html # should log one when user clicks on li-1 etc 
```

但这似乎真的很不优雅和凌乱。请有人帮助我并教我一种更好的方法来做到这一点（并且一种有效的方法，因为我的例子不起作用:(）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:02:01.173

这行得通吗？（带[演示](http://jsfiddle.net/Xyh2m/)）

```
$('#mylist li').on('click', function() {
    console.log($(this).html());
}); 
```

在这里，事件作为“mylist”的 id 附加到其中的所有`li`元素`ul`，因此这不会`li`在您的 dom 中的任何其他元素上触发。因为事件侦听器`li`直接附加到，调用`$(this)`会为您提供该元素。

或者在 CoffeeScript 中（和一个[演示](http://jsfiddle.net/UB9fu/)）

```
$('#mylist li').click ->
  console.log $(this).html()
  false 
```

# javascript - 如何在多个文件中组织视图

> ID：15035745
> 
> 赞同：0
> 
> 时间：2013-02-23T00:58:55.657
> 
> 标签：javascript, jquery, kendo-ui

我们正在使用 kendoui 移动框架和 icenium 创建一个移动混合应用程序。我知道这是一个单页应用程序，里面有很多视图。但是，如果我们添加大量视图 index.html 会变得非常大并且难以维护。我想知道是否有办法将视图组织到单个文件中，并以某种方式将它们包含到主页中。类似于 asp.net 中的部分视图。我找不到这样做的方法，也许有一些 js 库可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:59:31.150

您不需要外部库来实现这一点。**Kendo 使用称为远程视图**的功能开箱即用地支持此功能。您可以在 index.html 中拥有主视图，在 other.html 文件中拥有其他视图。请参阅此处的文档：[http ://docs.kendoui.c​​om/getting-started/mobile/application#remote-views](http://docs.kendoui.com/getting-started/mobile/application#remote-views)

**只需添加不带**# 定义远程视图的文件名（包括路径） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T02:26:28.443

为此，RequireJS 有一个[文本插件。](https://github.com/requirejs/text)使用它，您可以像加载 Javascript 依赖项一样加载 html、模板或其他文本文件。一个人为的例子：

```
define([
  "lib/underscore",
  "lib/backbone",  
  "text!views/template.html"
], 

function (_, Backbone, template) {
  return Backbone.View.extend({

    template: _.template(template),

    initialize: function() {
      this.listenTo(this.model, "change", this.render);
    },

    render: function() {
      this.$el.html(this.template(this.model.toJSON()));
    }
  }); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T02:38:37.683

你可以使用RequireJS，我没用过，但我知道你可以用，我有这个代码

```
// The view Loader. Used to asynchronously load views located in separate .html files
    window.templateLoader = {

    load: function(views, callback) {

        var deferreds = [];

        $.each(views, function(index, view) {
            if (uknowLocate.Views[view]) {
                deferreds.push($.get('js/templates/' + view + '.php', function(data) {
                    uknowLocate.Views[view].prototype.template = _.template(data);
                }, 'html'));
            } else {
                console.error(view + " not found");
            }
        });

        $.when.apply(null, deferreds).done(callback);
    }

}; 
```

我以这种方式使用它：

```
uknowLocate.init = function () {
    templateLoader.load(['HomeView', 'MainMenuView',
        'GeofencesNewView',
        'CheckinOnetimeView','CheckinScheduledView','CheckinNewView','CheckinRecurrentView',
        'LocationhistoryView'], function () {
        app = new uknowLocate.Routers.ApplicationRouter();
        Backbone.history.start({pushState:false, root:'/project/folder/'});
    });
}; 
```

通过这种方式我加载我的模板，这是用于 Backbone，你可以接受这个想法

# jquery - 有人可以帮我在 jquery if 语句中获取 div 的类吗？

> ID：15035748
> 
> 赞同：-1
> 
> 时间：2013-02-23T00:58:58.390
> 
> 标签：jquery, css

Ergo：为什么这行不通？

我正在尝试制作动画功能，它必须根据其名称更改 css div 的位置。例如，产品 1 不需要更改其顶部位置，产品 2 需要更改，产品 3 需要更改更多。

已经为此苦苦挣扎了好几个小时！

```
if($(this).attr("class") = "product1")
        {
            $(this).cssAnimate({height: '100%',marginBottom:'-350px'}, {duration: 400});
        }
        else if($(this).attr("class") = "product2")
        {
            $(this).cssAnimate({top:'-176px',height: '100%',marginBottom:'-350px'}, {duration: 400});
        }
        else if($(this).attr("class") = "product3")
        {
            $(this).cssAnimate({top:'-352px',height: '100%',marginBottom:'-350px'}, {duration: 400});
        }
        else
        {
        return false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:01:42.250

首先，您需要将“=”更改为“==”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:17:59.173

考虑更接近这一点的东西：

```
var topPx;
var productClass = $(this).attr("class");

switch (productClass) {
    case "product1": topPx = "0px";    break;
    case "product2": topPx = "-176px"; break;
    case "product3": topPx = "-353px"; break;
    default: return false;
}

$(this).cssAnimate({
    top:          topPx,
    height:       '100%',
    marginBottom: '-350px'
}, {
    duration: 400
}); 
```

有很多方法可以写这个，但我倾向于以沟通为目标，并消除重复的冗余。例如，没有理由继续获取该`"class"`属性；大概它不会在这段代码的生命周期内改变。除了单个条目之外，参数 to`cssAnimate`是相同的，因此仅更改该条目是有意义的。

`return`我对我在 switch 语句中的使用并不感到兴奋。选项包括显式比较、检查`productClass`数组值是否存在等。使用类到像素偏移的映射也很容易：

```
var offsets = {
    "product1": "0px",
    "product2": "-176px",
    "product3": "-353px"
};

var productClass = $(this).attr("class");
var offset = offsets[productClass];
if (offset === undefined) {
    return false;
}

$(this).cssAnimate({
    top:          offset,
    height:       '100%',
    marginBottom: '-350px'
}, {
    duration: 400
}); 
```

您可能希望将其包装到获取偏移量的方法中，或者可能返回将与默认映射合并的选项映射。

# birt - 图表呈现前的数据集查询更改（BIRT 报告）

> ID：15035749
> 
> 赞同：0
> 
> 时间：2013-02-23T00:59:07.027
> 
> 标签：birt

我是 BIRT 报告的新手，我有一个问题，我需要在呈现图表之前更改数据集查询文本。此报表上将有多个图表具有相同的数据集，但查询文本中的参数已修改。

图表事件处理可以做到这一点吗？下面是我想要做的一个例子。提前致谢

```
/**
 * Called before populating the series dataset using the DataSetProcessor.
 *
 * @param series
 *            Series
 * @param idsp
 *            IDataSetProcessor
 * @param icsc
 *            IChartScriptContext
 */

function beforeDataSetFilled( series, idsp, icsc )
{

this.queryText = "select from table where parameter = '"+params["Data"].value+"'"

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:58:09.827

我相信您可以使用图表的数据集绑定中的数据集参数来做到这一点。

您将使用查询创建数据集，并保留未设置的参数：

```
SELECT * FROM table WHERE parameter = ? 
```

然后在图表的dataSet参数绑定中，设置成你想要的参数。

![在此处输入图像描述](../Images/77cb7cfd6a2b32f75a0e8b775bae7c28.png)

# ibm-connections - 有没有办法将第三方搜索索引拉入 IBM Connections 搜索索引？

> ID：15035750
> 
> 赞同：0
> 
> 时间：2013-02-23T00:59:24.493
> 
> 标签：ibm-connections, ibm-sbt

[Seedlist SPI](http://www-10.lotus.com/ldd/appdevwiki.nsf/xpDocViewer.xsp?lookupName=IBM+Connections+4.0+API+Documentation#action=openDocument&res_title=Seedlist_SPI_ic40a&content=pdcontent)允许您将 IBM Connections 搜索推送到第三方索引中。

相反，是否有记录的方式将第三方搜索索引拉入 IBM Connections 搜索索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:17:18.960

我不知道解决方案。您所能做的就是使用您自己的提供商扩展 Connections 中的搜索框，在这种情况下，新页面（您的页面）只会显示您的搜索结果。

# java - M2E Eclipse Maven 工作区解析和 CDI

> ID：15035751
> 
> 赞同：0
> 
> 时间：2013-02-23T00:59:25.813
> 
> 标签：java, maven, jboss, cdi, m2e

我有一个战争项目 A，我正在部署到使用 CDI 的 JBoss AS7 并且一切正常。但是我想在另一个项目 B 中使用一些类，我将它们添加到我的 pom.xml 并为其打开工作区解析，因为这些类将由多个战争项目共享。

现在这些类只要在战争项目 A 中就可以正常工作，但是当我将它们移到 B 时，它们上的 CDI 停止工作。另一个项目 B 有一个 webapp/WEB-INF/beans.xml，但是在查看 A 的已部署战争时，项目 B 表示为一个仅包含类文件的 jar，没有 beans.xml。无论我尝试什么，CDI 都无法正常工作。

获取 B 中包含 beans.xml 的唯一解决方案是将 Bs 打包设置为 war，此时它不会打包，而是部署为目录（命名为 jar），这会使 JBoss 崩溃，并且包含所有库 A 和 B 再次使用。

我有点迷茫——如果我想在这种情况下使用 CDI，我真的只能使用一个怪物项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:25:24.033

您的问题是您将战争项目结构跟踪到一个 jar 项目中，因此您的配置文件没有最终进入您的最终项目的类路径。为了解决这个问题，将它移动到*/src/main/resources*目录，**Maven**将在构建完成后重新分配它。看一看[Maven 标准布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)说明。

# node.js - NODEJS writeStream 错误

> ID：15035753
> 
> 赞同：2
> 
> 时间：2013-02-23T00:59:50.867
> 
> 标签：node.js

```
var http = require('http');
var fs = require('fs').createWriteStream('file1');;

http.createServer(function(req, res) {
  // This opens up the writeable stream to `output`

  // This pipes the POST data to the file
  req.pipe(fs);

  // After all the data is saved, respond with a simple html form so they can post more data
  req.on('end', function () {
    res.writeHead(200, {"content-type":"text/html"});
    res.end('<form method="POST"><input name="test" /><input type="submit"></form>');
  });

  // This is here incase any errors occur
  fs.on('error', function (err) {
    console.log(err);
  });
}).listen(8080); 
```

在上面的代码中，我试图使用 POST 方法接受来自 HTML 表单的输入，并将其通过管道传输到文件的写入流中，但我无法实现并且正在显示以下错误

```
{ [Error: EBADF, close] errno: 9, code: 'EBADF' }
{ [Error: EBADF, close] errno: 9, code: 'EBADF' }
{ [Error: EBADF, close] errno: 9, code: 'EBADF' }
{ [Error: EBADF, close] errno: 9, code: 'EBADF' }
{ [Error: EBADF, close] errno: 9, code: 'EBADF' }
{ [Error: EBADF, close] errno: 9, code: 'EBADF' }
{ [Error: EBADF, close] errno: 9, code: 'EBADF' }
{ [Error: EBADF, close] errno: 9, code: 'EBADF' }
{ [Error: EBADF, close] errno: 9, code: 'EBADF' } 
```

出了什么问题，我应该做些什么修改才能成功地将数据从 POST 重定向到文件中？[我在使用可写流写入文件时](https://stackoverflow.com/questions/11945405/node-js-ebadf-error-when-writeing-file-using-writable-stream)阅读了这篇相关的帖子Node.js EBADF 错误

但是还是找不到出路，我是NODEJS新手，请帮帮我。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:27:26.533

默认情况下，当源流发出 end 时，在目标上调用 end()，因此目标不再可写。传递 { end: false } 作为保持目标流打开的选项。

你应该简单地做：

```
req.pipe(fs, { end: false }); 
```

你的错误就会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T06:40:06.447

您的错误是因为在管道完成后第一次`req.pipe(fs);`运行后，它关闭了`WriteStream` `fs`，`req.pipe(fs);`在第一次尝试写入已关闭的 FD 之后`EBADF`，

您需要重新创建`WriteStream`或直接使用`data`事件`req`而不是使用管道。但无论哪种方式，您都会遇到严重的并发问题。您很可能应该为每个请求创建一个新的 WriteStream 到不同的文件。

# c - C中的位串

> ID：15035754
> 
> 赞同：1
> 
> 时间：2013-02-23T01:00:07.053
> 
> 标签：c, bitstring

我必须在我的代码中实现位串（根据某些标准中给出的参数）。

一些标准参数是位串（具有不同的长度=3、7、24、1024 等）。

我将它们定义为：（示例：长度为 3 的位串）

```
#define SIZE 1 

struct bt_string
{       
    /* Array will be min 1 Byte Long, 
     * this parameter stores the number of Bits 
     * actually being used */
    unsigned short int bit_length;

    char bit_string [SIZE];
} sample_bit_string; 
```

我不允许使用位域。

有人可以建议（如果可能的话）任何更好的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:16:46.917

我想位图是您正在寻找的。（wiki：[http](http://en.wikipedia.org/wiki/Bitmap) ://en.wikipedia.org/wiki/Bitmap ）并且，从 Linux 内核移植的示例实现：[http ://code.google.com/p /ulib/source/browse/trunk/src/base/bitmap.c](http://code.google.com/p/ulib/source/browse/trunk/src/base/bitmap.c)。

# c# - 奇怪一个实体对象不能被具有通用存储库的 IEntityChangeTracker 的多个实例引用

> ID：15035756
> 
> 赞同：0
> 
> 时间：2013-02-23T01:00:18.113
> 
> 标签：c#, .net, entity-framework, repository-pattern, entity-framework-5

我正在使用 EF 5.0 并且有一个通用的上下文：

```
namespace ComTr.Web.BusinessLayer
{
    public class GenericRepository<TEntity> : IDisposable where TEntity : ComTrBaseEntity //Use as base class to allow access to base entities properties like modified
    {
        internal ComTrContext Context;
        internal DbSet<TEntity> DbSet;

        public GenericRepository()
        {
            Context = new ComTrContext();
            DbSet = Context.Set<TEntity>();
        }

        public virtual TEntity GetById(object id)
        {
            return DbSet.Find(id);
        }

        /// <summary>
        /// Edits the specified entity to update. Will attach entity to the context
        /// </summary>
        /// <param name="entityToUpdate">The entity to update.</param>
        /// <returns></returns>
        public virtual TEntity Edit(TEntity entityToUpdate)
        {
            entityToUpdate.Modified = DateTime.Now;
            DbSet.Attach(entityToUpdate);
            Context.Entry(entityToUpdate).State = EntityState.Modified;
            return entityToUpdate;
        }
    }
} 
```

现在我尝试使用以下代码更新单个值：

```
var  ComBookingRespository = new ComBookingRespository();
comBooking= ComBookingRespository.GetById(adventureBookingId);

////Save Token in database
comBooking.PaymentToken = token;

ComBookingRespository.Edit(comBooking); 
```

VS 将在以下行停止：

```
Context.Entry(entityToUpdate).State = EntityState.Modified; 
```

带有以下错误消息：

> 一个实体对象不能被多个 IEntityChangeTracker 实例引用

这很奇怪，因为我没有其他参考（如您所见，上下文是新启动的）。我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:35:12.253

您的错误可能来自 PaymentToken 实体。

您有一个要附加到`adventureBooking`. 很可能，您使用相同的逻辑通过不同的通用存储库获取该实体 - 您在该存储库中创建了一个上下文并检索了该项目。由于令牌实体附加到您的`TokenRepository`，并且您的`adventureBooking`实体附加到您的，因此`comBookingRepository`您有 2 个不同的上下文。要么断开你的`token`实体与其原始存储库的连接，要么重载你的存储库以便能够传递你的上下文，这样你的上下文就会在你的存储库之间共享。

```
 public GenericRepository(DbContext context)
        {
            Context = context;
            DbSet = Context.Set<TEntity>();
        } 
```

然后在您的代码中创建您的存储库：

```
var context = new new ComTrContext();
var  ComBookingRespository = new ComBookingRespository(context );
var  tokenRepository = new tokenRepository (context ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:32:03.033

您的上下文的另一个实例是跟踪相关实体。

# signalr - SignalR hub.js 缩小

> ID：15035759
> 
> 赞同：2
> 
> 时间：2013-02-23T01:00:21.383
> 
> 标签：signalr

[https://github.com/SignalR/SignalR/wiki/Extensibility](https://github.com/SignalR/SignalR/wiki/Extensibility)上的 SignalR github 存储库可扩展性 表明您可以替换

我在 Global.asax Application_Start 事件中完成的 IJavaScriptMinifier：-

```
protected void Application_Start()
{
    Microsoft.AspNet.SignalR.GlobalHost.DependencyResolver.Register(typeof(Microsoft.AspNet.SignalR.Hubs.IJavaScriptMinifier), () => new Common.HubMin());

    // Register the default hubs route: ~/signalr
    RouteTable.Routes.MapHubs();
    ....
}

public class HubMin : Microsoft.AspNet.SignalR.Hubs.IJavaScriptMinifier
{
    public string Minify(string source)
    {
        CodeSettings settings = new CodeSettings
        {
          PreserveImportantComments = false,
          PreserveFunctionNames = true
        };
        Minifier doMin = new Minifier();
        string mind = doMin.MinifyJavaScript(source, settings);
        return mind;
    }
} 
```

我已经在调试器中检查了这个函数正在被调用并且缩小的源被返回，但是 hubs.js 文件仍然没有被缩小。

有什么线索吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:03:56.263

这仅在运行时有效，而不是在您运行 SignalR.exe 时。

# python - Django POST 请求失败

> ID：15035761
> 
> 赞同：0
> 
> 时间：2013-02-23T01:00:28.550
> 
> 标签：python, django

在我的表单中使用 POST 时出现错误，即使我已在表单中添加了 csrf_token....

错误

禁止 (403)

CSRF 验证失败。请求中止。

帮助

失败原因：未设置 CSRF cookie。

通常，当存在真正的跨站点请求伪造时，或者未正确使用 Django 的 CSRF 机制时，可能会发生这种情况。对于 POST 表单，您需要确保： •您的浏览器正在接受 cookie。• 视图函数使用RequestContext 作为模板，而不是Context。• 在模板中，每个 POST 表单内都有一个 {% csrf_token %} 模板标签，以内部 URL 为目标。• 如果您没有使用 CsrfViewMiddleware，那么您必须在使用 csrf_token 模板标签的任何视图以及接受 POST 数据的视图上使用 csrf_protect。

您看到此页面的帮助部分是因为您的 Django 设置文件中有 DEBUG = True。将其更改为 False，将仅显示初始错误消息。

您可以使用 CSRF_FAILURE_VIEW 设置自定义此页面。

```
views.py

def search_form(request):
    return render_to_response('search_form.html')
def search(request):
    print 'request.post=', request.POST
    print 'request.get=', request.GET
    print 'request.method=', request.META.get('REQUEST_METHOD')
    if 'q' in request.GET:
        message = 'You searched for :%r' % request.GET['q']
    else:
        message = 'You submitted an empty form'

    return HttpResponse(message)

search-form.html

<html>
<head>
    <title>Search</title>
</head>
<body>
    <form action="/polls/search/" method="post">{% csrf_token %}
        <input type="text" name="q">
        <input type="submit" value="Search">
    </form>
</body>
</html>

urls.py
urlpatterns = patterns('',url(r'^$',views.index,name='index'),
        url(r'^meta/',views.display_meta,name='meta'),
        url(r'^search-form/$',views.search_form),
        url(r'^search/',views.search), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:18:29.580

您想在[此处](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/)查看第 3 点。您正在返回一个普通的 HttpResponse，所以我认为 csrf 上下文处理器正在被跳过。您可能要考虑使用[django.shortcuts.render](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)代替。此外，在您的模板中，您的表单方法是“发布”，但在您看来，您正在检查 request.GET。这与您遇到的 CSRF 问题无关，但可能是您想要解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T08:16:40.367

您尚未将令牌添加到表单中。

您已经添加了代码`{% csrf_token %}`，但`django.core.context_processors.csrf`没有被使用，因此模板标签实际上并没有输出任何东西（模板标签静默失败）。

而不是 using `HttpResponse`，您需要[render_to_response()](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#django.shortcuts.render_to_response)（带有[RequestContext](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django.template.RequestContext)）或只需[render()](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#render)（为您处理[RequestContext](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django.template.RequestContext)）。

另一方面，您不需要两个视图。`search`应该处理呈现表单和处理表单 -

从 django.shortcuts 导入渲染

```
def search(request):
    if request.method == POST:
        print 'request.post=', request.POST
        print 'request.get=', request.GET
        print 'request.method=', request.META.get('REQUEST_METHOD')
        if 'q' in request.GET:
            message = 'You searched for :%r' % request.POST['q']
        else:
            message = 'You submitted an empty form'
        return render(request, 'search_form.html', {'message': message})
    return render(request, 'search_form.html') 
```

然后将`{{ message }}`变量添加到您的`search_form.html`模板中-可能在某种 if 语句中以实现您现在正在做的相同事情-

```
<body>
    {% if message %}
        <div> {{ message }} </div>
    {% else %}
        <form action="/polls/search/" method="post">{% csrf_token %}
            <input type="text" name="q">
            <input type="submit" value="Search">
        </form>
    {% endif %}
</body> 
```

# qt - Qt 5 dark Fusion 主题是否可用于 Windows？

> ID：15035767
> 
> 赞同：10
> 
> 时间：2013-02-23T01:00:47.093
> 
> 标签：qt, themes, stylesheet, qt5

经过一番研究，我发现 Qt 5 现在提供了一个所谓的 Fusion 主题，在他们的[一篇博客文章](http://blog.qt.io/blog/2012/10/30/cleaning-up-styles-in-qt5-and-adding-fusion/)中有描述。我真的很喜欢你在最后一张图片中看到的黑色配置的主题，我想在我的应用程序中使用它，但似乎这个配色方案是由 Unity/Gnome3 强制使用的（看起来像一个 Ubuntu 窗口）所以我是渴望知道是否有任何可用的样式表或解决方法可以将这个黑暗版本的主题应用于应用程序。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-09T11:47:48.887

我相信你已经找到了，但是，正如 TheBootro 所说，Fusion 主题是由调色板控制的。

[我在这里](http://qt-project.org/forums/viewthread/25802)找到了调色板的娱乐。一点都不完整！

```
qApp->setStyle(QStyleFactory::create("Fusion"));
QPalette p = qApp->palette();
p.setColor(QPalette::Window, QColor(53,53,53));
p.setColor(QPalette::Button, QColor(53,53,53));
p.setColor(QPalette::Highlight, QColor(142,45,197));
p.setColor(QPalette::ButtonText, QColor(255,255,255));
p.setColor(QPalette::WindowText, QColor(255,255,255));
qApp->setPalette(p); 
```

编辑：我创建了一个[要点](https://gist.github.com/Skyrpex/5547015)，以便我们可以使其功能完整。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-11T11:55:52.693

这是我的深色调色板：

```
// set style
qApp->setStyle(QStyleFactory::create("Fusion"));
// increase font size for better reading
QFont defaultFont = QApplication::font();
defaultFont.setPointSize(defaultFont.pointSize()+2);
qApp->setFont(defaultFont);
// modify palette to dark
QPalette darkPalette;
darkPalette.setColor(QPalette::Window,QColor(53,53,53));
darkPalette.setColor(QPalette::WindowText,Qt::white);
darkPalette.setColor(QPalette::Disabled,QPalette::WindowText,QColor(127,127,127));
darkPalette.setColor(QPalette::Base,QColor(42,42,42));
darkPalette.setColor(QPalette::AlternateBase,QColor(66,66,66));
darkPalette.setColor(QPalette::ToolTipBase,Qt::white);
darkPalette.setColor(QPalette::ToolTipText,Qt::white);
darkPalette.setColor(QPalette::Text,Qt::white);
darkPalette.setColor(QPalette::Disabled,QPalette::Text,QColor(127,127,127));
darkPalette.setColor(QPalette::Dark,QColor(35,35,35));
darkPalette.setColor(QPalette::Shadow,QColor(20,20,20));
darkPalette.setColor(QPalette::Button,QColor(53,53,53));
darkPalette.setColor(QPalette::ButtonText,Qt::white);
darkPalette.setColor(QPalette::Disabled,QPalette::ButtonText,QColor(127,127,127));
darkPalette.setColor(QPalette::BrightText,Qt::red);
darkPalette.setColor(QPalette::Link,QColor(42,130,218));
darkPalette.setColor(QPalette::Highlight,QColor(42,130,218));
darkPalette.setColor(QPalette::Disabled,QPalette::Highlight,QColor(80,80,80));
darkPalette.setColor(QPalette::HighlightedText,Qt::white);
darkPalette.setColor(QPalette::Disabled,QPalette::HighlightedText,QColor(127,127,127));

qApp->setPalette(darkPalette); 
```

在这里您还可以找到一个带有无框窗口和自定义样式表以扩展深色调色板的完整示例： [https ://github.com/Jorgen-VikingGod/Qt-Frameless-Window-DarkStyle](https://github.com/Jorgen-VikingGod/Qt-Frameless-Window-DarkStyle)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T08:37:17.290

AFAIK，Qt5 Fusion 主题的颜色完全由调色板控制，而调色板又由系统主题控制。所以在 Ubuntu 上你会得到橙色，在 Windows 上你会得到蓝色......

所以基本上你所要做的就是使用一个工具或 QtProject.conf 文件来手动调整 Qt5 应用程序的调色板，并且不要忘记使用参数“-style fusion”启动你的应用程序，因为它在 ubuntu 上从 GTk+ 外观仿真开始。

# javascript - 如何在这个基于正则表达式的 JSON 到 XML 转换器中处理嵌套数组

> ID：15035769
> 
> 赞同：1
> 
> 时间：2013-02-23T01:01:36.260
> 
> 标签：javascript, regex, arrays, json, parsing

我只是将一个 json 到 xml 转换器一起破解，它或多或少地解析 json，并在正则表达式回调函数中将其直接操作为 xml。我已经完全发明了这种方法，所以我不确定是否有任何明显/可怕的缺点或限制 - 迄今为止，解析对我来说几乎是一个谜。

我在那里发表了很多评论，所以希望它很容易理解。

## 编码

```
var cb = function(m,oo,co,st,s,ignore,cl,cm,oa,ca){

  // remove slashes from captured strings
  s = stripslashes(s)

  // this will be built, and returned at the end
  var xml = ""

  // function to add padding to the output, at the start of the lines
  var pad = function(q){ q--; q *= 4
    var out = ''
    for(;q--;) out += ' '
    return out
  }

  // track the arrat status, last item type, current indent level, and tags stack
  this.array = this.array || null
  this.last = this.last || null
  this.level = this.level || 0
  this.tags = this.tags || []

  // Handle opening braces
  if(oo){

    if(this.array && this.last.match(/^(cm|oa)$/)){
      xml += "\n"+pad(this.level)+"<item>"
      this.tags.push("item")
    }

    // increase the indentation level
    this.level++

    // set the last item, which should be the last thing to do in the block
    this.last = 'oo'

  // Handle closing braces
  } else if(co){

    // if the last item was not a string, then add padding
    if(this.last != 'st')
      xml += pad(this.level)

    // close a tag
    xml += "</"+this.tags.pop()+">\n"

    // decrease the indentation level
    this.level--

    // set the last item, which should be the last thing to do in the block
    this.last = 'co'

  // Handle Strings
  } else if(st){

    // Debug by showing the tags as they are pushed and popped from the stack
    // console.log(this.tags)

    // Handle Strings where last item was an Object, or a comma
    if(this.last == "oo" || this.last == "cm"){

      // add the tag to the stack, and xml output
      this.tags.push(s)
      xml += "\n"+pad(this.level)+"<"+s+">"

    // Handle Strings where last item was an Colon
    } else if(this.last == "cl"){
      xml += s
    }

    // set the last item, which should be the last thing to do in the block
    this.last = 'st'

  // Handle the opan arrays
  } else if(oa){
    this.array = 1
    this.level++
    xml += "\n"+pad(this.level)+"<array>"
    this.level++
    this.last = 'oa'

  // Handle the close arrays
  } else if(ca){
    this.array = 0
    xml += pad(this.level)+"</"+this.tags.pop()+">\n"
    this.level--
    xml += pad(this.level)+"</array>\n"
    this.level--
    this.last = 'ca'

  // Handle the colons
  } else if(cl){
    this.last = 'cl'

  // Handle the commas
  } else if(cm){
    if(this.last == "co")
      xml += pad(this.level)+"</"+this.tags.pop()+">"
    else
      xml += "</"+this.tags.pop()+">"
    this.last = 'cm'
  }

  // return the built xml
  return xml

}

// DEPENDENCY
function stripslashes (str) {

  return (str + '').replace(/\\(.?)/g, function (s, n1) {
    switch (n1) {
    case '\\':
      return '\\';
    case '0':
      return '\u0000';
    case '':
      return '';
    default:
      return n1;
    }
  });
}

// DATA FOR TESTING
var o = {
  "hash":"b6f6991d03df0e2e04dafffcd6bc418aac66049e2cd74b80f14ac86db1e3f0da",
  "ver":1,
  "vin_sz":1,
  "vout_sz":2,
  "lock_time":"Unavailable",
  "size":258,
  "relayed_by":"64.179.201.80",
  "block_height": 12200,
  "tx_index":"12563028",
  "inputs":[
    { "prev_out":{
        "hash":"a3e2bcc9a5f776112497a32b05f4b9e5b2405ed9",
        "value":"100000000",
        "tx_index":"12554260",
        "n":"2"
      },
      "scriptSig":"Unavailable"
    },
    { "prev_out":{
        "hash":"a3e2bcc9a5f776112497a32b05f4b9e5b2405ed9",
        "value":"100000000",
        "tx_index":"12554260",
        "n":"2"
      },
      "scriptSig":"Unavailable"
    },
    { "prev_out":{
        "hash":"a3e2bcc9a5f776112497a32b05f4b9e5b2405ed9",
        "value":"100000000",
        "tx_index":"12554260",
        "n":"2"
      },
      "scriptSig":"Unavailable"
    },
    { "prev_out":{
        "hash":"a3e2bcc9a5f776112497a32b05f4b9e5b2405ed9",
        "va'l\"u'e":"1000\"00000",
        "tx_index":"12554260",
        "n":"2"
      },
      "scriptSig":"Unavailable"
    }
  ],
  "out":[
    { "value":"98000000",
      "hash":"29d6a3540acfa0a950bef2bfdc75cd51c24390fd",
      "scriptPubKey":"Unavailable"
    },
    { "value":"2000000",
      "hash":"17b5038a413f5c5ee288caa64cfab35a0c01914e",
      "scriptPubKey":"Unavailable"
    }
  ]
}

var s = JSON.stringify(o)

console.log("Original: "+s+"\n")

// var r = /({)|(})|([""''])(.+?)\3|(:)|(,)|(\[)|(\])/g

// THE REGEX
// capturing groups map to -> m,oo,co,st,s,ignore,cl,cm,oa,ca in the callback
// meaning match, open-object, close-object, string-type, string, ignore, colon, comma, open-array, close-array
// string escaping made possible by... `(['"])((\\\3|[^\3])+?)\3`
var r = /({)|(})|(['"])((\\\3|[^\3])+?)\3|(:)|(,)|(\[)|(\])/g

var xml = s.replace(r,cb)

console.log(xml) 
```

## 问题

1.  如何添加对嵌套数组的支持？
2.  这种解析技术叫什么？
3.  字符串转义方法是否可靠？
4.  这是一种可行的解析方法吗？
5.  使用这种方法有更通用的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-17T03:46:09.357

当您正在寻找自己的解决方案时，我相信您的意思是了解解析器在这种情况下是如何工作的。

> 如何添加对嵌套数组的支持？

数组可以是值、对象和数组的集合。因此，编写一个分别处理值、数组和对象的方法。现在，当您遇到数组或数组内的对象时，调用相同的函数。

我不确定其他问题。但这是我在[快速 xml 解析器中使用的解决方案](https://github.com/NaturalIntelligence/fast-xml-parser)

```
var j2x = function(jObj,level){
    var xmlStr = "", attrStr = "" , val = "";
    var keys = Object.keys(jObj);
    var len = keys.length;
    for(var i=0;i<len;i++){
        var key = keys[i];
        if(typeof jObj[key] !== "object"){//premitive type
            var attr = this.isAttribute(key);
            if(attr){
                attrStr += " " +attr+"=\""+ this.encodeHTMLchar(jObj[key], true) +"\"";
            }else if(this.isCDATA(key)){
                if(jObj[this.options.textNodeName]){
                    val += this.replaceCDATAstr(jObj[this.options.textNodeName], jObj[key]);
                }else{
                    val += this.replaceCDATAstr("", jObj[key]);
                }
            }else{//tag value
                if(key === this.options.textNodeName){
                    if(jObj[this.options.cdataTagName]){
                        //value will added while processing cdata
                    }else{
                        val += this.encodeHTMLchar(jObj[key]);    
                    }
                }else{
                    val += this.buildTextNode(jObj[key],key,"",level);
                }
            }
        }else if(Array.isArray(jObj[key])){//repeated nodes
            if(this.isCDATA(key)){
                if(jObj[this.options.textNodeName]){
                    val += this.replaceCDATAarr(jObj[this.options.textNodeName], jObj[key]);
                }else{
                    val += this.replaceCDATAarr("", jObj[key]);
                }
            }else{//nested nodes
                var arrLen = jObj[key].length;
                for(var j=0;j<arrLen;j++){
                    var item = jObj[key][j];
                    if(typeof item === "object"){
                        var result = this.j2x(item,level+1);
                        val  += this.buildObjNode(result.val,key,result.attrStr,level);
                    }else{
                        val += this.buildTextNode(item,key,"",level);
                    }
                }
            }
        }else{

            if(this.options.attrNodeName && key === this.options.attrNodeName){
                var Ks = Object.keys(jObj[key]);
                var L = Ks.length;
                for(var j=0;j<L;j++){
                    attrStr += " "+Ks[j]+"=\"" + this.encodeHTMLchar(jObj[key][Ks[j]]) + "\"";
                }
            }else{
                var result = this.j2x(jObj[key],level+1);
                val  += this.buildObjNode(result.val,key,result.attrStr,level);
            }
        }
    }
    return {attrStr : attrStr , val : val};
} 
```

# javascript - Javascript + jQuery + 实现 getter 和 setter 的函数

> ID：15035772
> 
> 赞同：0
> 
> 时间：2013-02-23T01:01:46.560
> 
> 标签：javascript, jquery

我开始学习 JavaScript 和 jQuery，有一个小的 JavaScript 概念我完全不明白。它是关于函数、setter 和 getter 的。这是代码示例。

如您所见，当我单击标记时，会打开一个对话框表单，我通过对话框表单获取数据，将其保存到两个对象（`myHeader`和`myContent`）中，最后使用它。

*   第一个`console.log`执行的是`(1)`，它打印`'hi'`.
*   第二个`console.log`是`(2)`，它打印保存到对象中的内容`myHeader`。
*   但是`console.log`number `(3)`，有时不打印任何东西，或者它打印`undefined`。

我对 JavaScript 函数有什么误解？

```
$(function() {

$(".myMarkup").click(function() {   
    $( "#dialog-form" ).dialog("open", function() {
        console.log(myHeader.getContent());  //(3)
    });
});

Header = function() {
    var val='hi';
    this.getContent = function() { return val; }
    this.setContent = function(x) { val = x; }
};

Content = function() {
    var val='hi';
    this.getContent = function() { return val; }
    this.setContent = function(x) { val = x; }
};

var myContent = new Content();
var myHeader = new Header();
    console.log(myHeader.getContent());  //(1)

$( "#dialog-form" ).dialog({
  autoOpen: false,
  height: 300,
  width: 350,
  modal: true,
  buttons: {
    "Modify": function() {
    a = document.getElementById('name').value.toString();
    b = document.getElementById('surname').value.toString();    
    myHeader.setContent(a);
    myContent.setContent(b);
    console.log(myHeader.getContent(a)); //(2)
    },
  }
)}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:38:54.017

对我来说就像一个时间问题：

把你的 myHeader 和 myContent-Declaration 从 jQuery-Ready-Callback 中取出，或者把它放在最开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:55:38.277

问题不在于函数、setter 或 getter。问题在于如何使用对话 API。看起来您想要一个打开事件的回调函数，因此您可以在初始化期间添加回调。

```
$( "#dialog-form" ).dialog({
//your options +
open:function() {
        console.log(myHeader.getContent());  
    }

}); 
```

或者在调用 open 方法之前设置

```
$(".myMarkup").click(function() {   

    $( "#dialog-form" ).bind( "dialogopen", function() {
        console.log(myHeader.getContent());  //(3)
    }).dialog("open");
}); 
```

open 方法不接受任何参数，因此只有参数。

我会建议你在使用任何 api 之前查看它的 api 文档。 [api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)

我发现的其他语法错误是您没有正确关闭括号。

`)}`; 将为您`});`提供额外的`});``$(function() {`

# iphone - 使用 nslog 是否会损害测试人员的安全性

> ID：15035774
> 
> 赞同：0
> 
> 时间：2013-02-23T01:02:15.733
> 
> 标签：iphone, objective-c, ipad, ios5

我用谷歌搜索并找不到任何可能意味着答案是否定的东西，但如果我不小心让 nslog 记录传入的互联网消息（聊天），我可以向我的测试人员保证这是私人信息还是有办法我可以取回它。当我用谷歌搜索时，您似乎需要插入设备并运行它才能查看该数据。我认为没有人拥有该机密信息，它只是一个游戏服务器，但我希望能够让人们知道他们是否对他们使用该应用程序的私密性有疑问，即使我不打算出去看看对于任何人的聊天记录我自己。

麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:05:00.727

最好将您记录的任何内容视为自动公开。永远不要记录潜在的私人信息，尤其是在生产环境中。它是否*可以*被检索（它可以）甚至都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:11:53.210

NSLog 将写入他们设备上的系统日志。从上的文档`NSLogv`：

> 将错误消息记录到 Apple 系统日志工具（参见 man 3 asl）。如果 STDERR_FILENO 文件描述符已从默认值重定向或将转到 tty，它也将被写入那里。

因此，数据以明文形式存储在他们的设备上。如果有敏感数据，这不是最佳做法。作为开发人员，检索它对您来说并非易事，但它的存在仍然不是一件好事。我建议在您的发布版本中禁用 NSLog（您确定不是吗？您在自己的设备上运行版本时是否查看过 Xcode 中的控制台？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:29:26.867

*事后*可以通过插入设备来查看日志。我相信即使设备被密码锁定，这也能正常工作。

有限的长度表明日志可能只是在内存中，但不能保证——Apple 可能会将它们保存到闪存中以用于崩溃报告。

也不能保证它们不能被其他进程读取。

# java - Hadoop M/R 实现“你可能认识的人”友情推荐

> ID：15035778
> 
> 赞同：1
> 
> 时间：2013-02-23T01:02:38.183
> 
> 标签：java, hadoop, mapreduce, data-mining

如何通过查看两人有多少共同朋友来建立友谊推荐系统，并使用 mapreduce 作业将他们推荐为朋友？有点像 facebook 或 linkedin 所做的，显示推荐人列表，并根据共同朋友的数量对他们进行排名。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T01:02:38.183

此解决方案取自我的博客，我在项目中使用了此代码。

完整版，见[https://www.dbtsai.com/blog/hadoop-mr-to-implement-people-you-might-know-friendship-recommendation/](https://www.dbtsai.com/blog/hadoop-mr-to-implement-people-you-might-know-friendship-recommendation/)

由于我不确定这是否是最佳解决方案，并且我也想在 stackoverflow 中有一个文档，所以我在这里提出并回答了我自己的问题。我寻找来自社区的反馈。

最好的友谊推荐通常来自朋友。关键思想是，如果两个人有很多共同的朋友，但他们不是朋友，那么系统应该推荐他们相互连接。让我们假设友谊是无向的：如果 A 是 B 的朋友，那么 B 也是 A 的朋友。这是 Facebook、Google+、Linkedin 和几个社交网络中最常用的友谊系统。将其扩展到推特中使用的定向友谊系统并不难；但是，我们将在这篇文章中专注于无向案例。

输入数据将包含邻接列表，并有多行格式为 <USER><TAB><FRIENDS>，其中 <USER> 是唯一用户的唯一 ID，<FRIENDS> 是用户列表逗号谁是 <USER> 的朋友。以下是输入示例。在图中可以更容易地理解用户和用户之间的关系。

```
1    0,2,3,4,5
2    0,1,4
3    0,1,4
4    1,2,3
5    1,6
6    5 
```

在图中，可以看到用户 0 不是用户 4 和 5 的朋友，但用户 0 和用户 4 有共同的朋友 1、2 和 3；用户 0 和用户 5 有共同的朋友 1。因此，我们想推荐用户 4 和用户 5 作为用户 0 的朋友。

输出的推荐好友会以如下格式给出。<USER><TAB><向 USER 推荐的朋友（共同朋友的数量：[共同朋友的 id，...]），...>。输出结果按照共同好友数排序，可以从图中验证。

```
0    4 (3: [3, 1, 2]),5 (1: [1])
1    6 (1: [5])
2    3 (3: [1, 4, 0]),5 (1: [1])
3    2 (3: [4, 0, 1]),5 (1: [1])
4    0 (3: [2, 3, 1]),5 (1: [1])
5    0 (1: [1]),2 (1: [1]),3 (1: [1]),4 (1: [1])
6    1 (1: [5]) 
```

现在，让我们将这个问题放入单个 M/R 作业中。用户0有朋友1、2、3；因此，<1, 2>、<2, 1>、<2, 3>、<3, 2>、<1, 3> 和 <3, 1> 这对具有用户 0 的共同好友。结果，我们可以发出 <key, value> = <1, r=2; m=0>, <2, r=1; m=0>，<2，r=3；m=0>...，其中 r 表示推荐的朋友，m 表示共同的朋友。我们可以在reduce阶段聚合结果，计算一个用户和推荐用户有多少共同朋友。但是，这种方法会带来一个问题。如果用户 A 和推荐用户 B 已经是朋友了怎么办？为了克服这个问题，我们可以在发出的值中添加另一个属性 isFriend，如果我们知道朋友在 reduce 阶段已经是朋友，我们不推荐他们。

定义fromUser为<USER>，toUser为输入数据中的<FRIENDS>之一，则算法为

**地图阶段**

1.  发出 <fromUser, r=toUser; m=-1> 对于所有 toUser。假设有*n 个*toUser；然后我们将发出*n*条记录来描述 fromUser 和 toUser 已经是朋友。请注意，它们已经是发出的密钥和 r 之间的朋友，因此我们将 m 设置为 -1。
2.  发出 <toUser1, r=toUser2; m=fromUser> 表示 toUser1 和 toUser2 来自 toUser 的所有可能组合，它们有共同的朋友 fromUser。它将发出*n(n - 1)*条记录。
3.  在 map 阶段总共有*n^2 个* 发出的记录，其中 n 是 <USER> 拥有的朋友数。

**减少阶段，**

1.  只是将他们在键之间有多少共同朋友和值中的 r 相加。如果他们中的任何一个有共同的朋友-1，我们不会推荐，因为他们已经是朋友了。
2.  根据共同朋友的数量对结果进行排序。

因为发出的值不是 hadoop 中的原始数据类型，所以我们必须自定义一个新的可写类型，如下代码所示。

```
static public class FriendCountWritable implements Writable {
    public Long user;
    public Long mutualFriend;

    public FriendCountWritable(Long user, Long mutualFriend) {
        this.user = user;
        this.mutualFriend = mutualFriend;
    }

    public FriendCountWritable() {
        this(-1L, -1L);
    }

    @Override
    public void write(DataOutput out) throws IOException {
        out.writeLong(user);
        out.writeLong(mutualFriend);
    }

    @Override
    public void readFields(DataInput in) throws IOException {
        user = in.readLong();
        mutualFriend = in.readLong();
    }

    @Override
    public String toString() {
        return " toUser: "
                + Long.toString(user) + " mutualFriend: "
                + Long.toString(mutualFriend);
    }
} 
```

映射器可以通过以下方式实现

```
public static class Map extends Mapper<LongWritable, Text, LongWritable, FriendCountWritable> {
    private Text word = new Text();

    @Override
    public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
        String line[] = value.toString().split("\t");
        Long fromUser = Long.parseLong(line[0]);
        List toUsers = new ArrayList();

        if (line.length == 2) {
            StringTokenizer tokenizer = new StringTokenizer(line[1], ",");
            while (tokenizer.hasMoreTokens()) {
                Long toUser = Long.parseLong(tokenizer.nextToken());
                toUsers.add(toUser);
                context.write(new LongWritable(fromUser),
                        new FriendCountWritable(toUser, -1L));
            }

            for (int i = 0; i < toUsers.size(); i++) {
                for (int j = i + 1; j < toUsers.size(); j++) {
                    context.write(new LongWritable(toUsers.get(i)),
                            new FriendCountWritable((toUsers.get(j)), fromUser));
                    context.write(new LongWritable(toUsers.get(j)),
                            new FriendCountWritable((toUsers.get(i)), fromUser));
                }
                }
            }
        }
    } 
```

减速器可以通过以下方式实现

```
public static class Reduce extends Reducer<LongWritable, FriendCountWritable, LongWritable, Text> {
    @Override
    public void reduce(LongWritable key, Iterable values, Context context)
            throws IOException, InterruptedException {

        // key is the recommended friend, and value is the list of mutual friends
        final java.util.Map<Long, List> mutualFriends = new HashMap<Long, List>();

        for (FriendCountWritable val : values) {
            final Boolean isAlreadyFriend = (val.mutualFriend == -1);
            final Long toUser = val.user;
            final Long mutualFriend = val.mutualFriend;

            if (mutualFriends.containsKey(toUser)) {
                if (isAlreadyFriend) {
                    mutualFriends.put(toUser, null);
                } else if (mutualFriends.get(toUser) != null) {
                    mutualFriends.get(toUser).add(mutualFriend);
                }
            } else {
                if (!isAlreadyFriend) {
                    mutualFriends.put(toUser, new ArrayList() {
                        {
                            add(mutualFriend);
                        }
                    });
                } else {
                    mutualFriends.put(toUser, null);
                }
            }
        }

        java.util.SortedMap<Long, List> sortedMutualFriends = new TreeMap<Long, List>(new Comparator() {
            @Override
            public int compare(Long key1, Long key2) {
                Integer v1 = mutualFriends.get(key1).size();
                Integer v2 = mutualFriends.get(key2).size();
                if (v1 > v2) {
                    return -1;
                } else if (v1.equals(v2) && key1 < key2) {
                    return -1;
                } else {
                    return 1;
                }
            }
        });

        for (java.util.Map.Entry<Long, List> entry : mutualFriends.entrySet()) {
            if (entry.getValue() != null) {
                sortedMutualFriends.put(entry.getKey(), entry.getValue());
            }
        }

        Integer i = 0;
        String output = "";
        for (java.util.Map.Entry<Long, List> entry : sortedMutualFriends.entrySet()) {
            if (i == 0) {
                output = entry.getKey().toString() + " (" + entry.getValue().size() + ": " + entry.getValue() + ")";
            } else {
                output += "," + entry.getKey().toString() + " (" + entry.getValue().size() + ": " + entry.getValue() + ")";
            }
            ++i;
        }
        context.write(key, new Text(output));
    }
} 
```

其中 Comparator 在 TreeMap 中用于按共同好友数量的降序对输出值进行排序。

欢迎任何评论和反馈。谢谢。

# node.js - 从 npm 下载源代码而不安装它

> ID：15035786
> 
> 赞同：120
> 
> 时间：2013-02-23T01:03:08.703
> 
> 标签：node.js, package, npm

如何在不实际安装的情况下从 npm 下载包的源代码（即不使用`npm install thepackage`）？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2015-01-13T18:35:27.863

您可以使用`npm view [package name] dist.tarball`which 将返回压缩包文件的 URL。

`wget`这是一个用于下载 tarball的示例：

```
wget $(npm view lodash dist.tarball) 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2016-05-06T19:09:14.563

一个更简单的方法是`npm pack <package_name>`. 这将从注册表中检索 tarball，将其放在 npm 缓存中，并将副本放在当前工作目录中。请参阅[https://docs.npmjs.com/cli/pack](https://docs.npmjs.com/cli/pack)

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2018-02-12T12:00:34.997

**如果您还没有安装 npm**，使用当前的公共 API，您还可以从 URL 访问有关 npm 注册表中的包的信息`https://registry.npmjs.org/<package-name>/`。

然后，您可以导航 JSON`versions > (version number) > dist > tarball`以获取代码存档的 URL 并下载它。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2016-06-30T08:10:28.650

`npm pack XXX`是最快的输入，它会下载一个档案。

或者：

```
npm v XXX dist.tarball | xargs curl | tar -xz 
```

该命令还将：

*   下载带有进度条的包
*   提取到一个名为`package`

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2015-12-08T21:41:47.463

在 linux 上，我通常会下载这样的包的 tarball：

```
wget `npm v [package-name] dist.tarball` 
```

注意反引号``，在stackoverflow上我看不清它们。

“v”只是视图的另一个别名：

[https://docs.npmjs.com/cli/view](https://docs.npmjs.com/cli/view)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-22T10:01:45.197

您还可以使用[UNPKG访问 npm 包的内容](https://unpkg.com)

```
https://unpkg.com/browse/[package-name]@[package-version]/ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-15T23:26:33.850

我的团队创建[OSS Gadget](https://github.com/Microsoft/OSSGadget)是为了让这样的事情变得更容易，尤其是在跨不同生态系统工作时。该套件中的工具之一称为`oss-download`：

```
oss-download pkg:npm/express         # Latest version
oss-download pkg:npm/express@4.17.1  # Specific version
oss-download pkg:npm/express@*       # All versions
oss-download -e pkg:npm/express      # Decompress contents recursively 
```

如果您只对 npm 感兴趣，那么`npm pack`这是您的最佳选择，但如果您没有安装 npm 或需要使用 PyPI、RubyGems、NuGet 等做类似的事情，那么 OSS Gadget 可能会有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-29T11:24:36.377

根据[Gustavo Rodrigues 的回答](https://stackoverflow.com/a/27929112)，修复 .tgz 中的“包”目录，添加最新的次要版本发现。

```
#!/bin/bash

if [[ $# -eq 0 ]] ; then
    echo "Usage: $0 jquery bootstrap@3 tinymce@4.5"
    exit 64 ## EX_USAGE
fi

set -e ## So nothing gets deleted if download fails

for pkg_name in "$@"
do

    ## Get latest version, also works with plain name
    url=$( npm v $pkg_name dist.tarball | tail -n 1 | cut -d \' -f 2 )
    tmp_dir=$( mktemp -d -p . "${pkg_name}__XXXXXXXXX" )

    ## Unpacks to directory named after package@version
    curl $url | tar -xzf - --strip 1 --directory $tmp_dir
    rm -rf $pkg_name
    mv $tmp_dir $pkg_name
done 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-11T11:39:17.170

为了简单地查看 npm 包的内容概览，无需在本地下载任何内容，您可以使用：

```
npm pack --dry-run <package-name> 
```

**演示：**

```
$ npm pack --dry-run express
npm notice
npm notice   express@4.17.2
npm notice === Tarball Contents ===
npm notice 110.6kB History.md
npm notice 1.2kB   LICENSE
npm notice 4.8kB   Readme.md
npm notice 224B    index.js
npm notice 14.3kB  lib/application.js
npm notice 2.4kB   lib/express.js
npm notice 853B    lib/middleware/init.js
npm notice 885B    lib/middleware/query.js
npm notice 12.5kB  lib/request.js
npm notice 27.3kB  lib/response.js
npm notice 15.0kB  lib/router/index.js
npm notice 3.3kB   lib/router/layer.js
npm notice 4.1kB   lib/router/route.js
npm notice 5.9kB   lib/utils.js
npm notice 3.3kB   lib/view.js
npm notice 2.8kB   package.json
npm notice === Tarball Details ===
npm notice name:          express
npm notice version:       4.17.2
npm notice filename:      express-4.17.2.tgz
npm notice package size:  54.7 kB
npm notice unpacked size: 209.6 kB
npm notice shasum:        c18369f265297319beed4e5558753cc8c1364cb3
npm notice integrity:     sha512-oxlxJxcQlYwqP[...]66Ha8jCUo9QGg==
npm notice total files:   16
npm notice
express-4.17.2.tgz 
```

# c# - DataGrid 创建和 DateFormat

> ID：15035787
> 
> 赞同：0
> 
> 时间：2013-02-23T01:03:18.757
> 
> 标签：c#, silverlight, linq-to-sql

![在此处输入图像描述](../Images/d1ea35fbe26d0d28b1d81e453c268030.png)

我的数据网格有 ETA_DATE，但格式应该是 dd.mm.yyyy。如何更改格式？我的 C# SilverLight 代码是：

```
DataGrid dataGridShips = new DataGrid();
dataGridShips.Margin = new Thickness(5, 77, 5, 5);
dataGridShips.Width = 590;
dataGridShips.ItemsSource = e.Result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:12:15.040

步骤 1.`AutoGenerateColumns="False"`手动设置、添加列。请参阅：[为 Silverlight DataGrid 定义列](http://blogs.msdn.com/b/scmorris/archive/2008/03/27/defining-columns-for-a-silverlight-datagrid.aspx)

第 2 步。编写您自己的日期时间转换器，请参阅：[使用转换器形成值](http://www.silverlightshow.net/items/How-to-format-a-binding-value-using-convertors.aspx)

或者将 AutoGenerateColumns 设置为 True，您可以选择选项 2： [在 DataGrid 控件中自定义自动生成的列](http://msdn.microsoft.com/en-us/library/cc903950%28v=vs.95%29.aspx)

您可以尝试在您的属性上设置显示格式

```
[DisplayFormat(DataFormatString = "format")] 
```

但根据我的经验，它不起作用。

# android - 在 Android 中绘制正方形 3x3 厘米

> ID：15035792
> 
> 赞同：0
> 
> 时间：2013-02-23T01:04:13.207
> 
> 标签：android, canvas, imageview, paint

我需要在屏幕上绘制一个 3x3 厘米的精确正方形，您需要在任何类型的屏幕中精确尺寸作为设计工作。

三星 Ace 的结果是 2.8 厘米，结果并不准确。

爪哇...

```
DisplayMetrics metrics = new DisplayMetrics();

getWindowManager().getDefaultDisplay().getMetrics(metrics);

float ld =  30 * metrics.densityDpi * (metrics.density/25.4f);

bitmap = Bitmap.createBitmap((int) ld, (int) ld, Bitmap.Config.ARGB_8888);

canvas = new Canvas(bitmap);
paint = new Paint();

paint.setColor(Color.WHITE);

imageView.setImageBitmap(bitmap);

canvas.drawRect(0, 0, (float) ld, (float) ld, paint); 
```

XML...

```
<ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/image_view"
        android:scaleType="center"/> 
```

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:20:21.107

我认为您需要在特定方向 x 和 y 上使用 dpi，例如：

```
// We want 30/25.4 inches but in dots
float inches = 30/25.4f;

float xdpi = getResources().getDisplayMetrics().xdpi;
float xDots = inches * xdpi;
float ydpi = getResources().getDisplayMetrics().ydpi;
float yDots = inches * ydpi;

Paint paint = new Paint();
paint.setColor(Color.WHITE);
canvas.drawRect(0, 0, xDots, yDots, paint); 
```

然后你会有更多的机会，但它们并不适用于每部手机。将此代码放入 Android 应用程序的 onDraw() 方法后，我得到以下结果：

```
Nexus 7:        2.8 cm
Galaxy Nexus    3.0 cm
HTC Sensation   3.0 cm
HTC Desire HD   2.7 cm 
```

因此，并非在所有情况下都是准确的。

# security - ASP.NET MVC 4 WebAPI - 可以将会话状态用于安全资源吗？

> ID：15035794
> 
> 赞同：4
> 
> 时间：2013-02-23T01:04:25.593
> 
> 标签：security, asp.net-mvc-4, session-state

我们正在使用 ASP.NET MVC 在中间构建一个 3 层 Web 应用程序。我们使用直接 MVC 和 WebAPI 的组合来实现响应。**使用基于令牌的服务**来保护后端数据。

**我们的目的是为每个登录系统的用户**请求一个新令牌。虽然所有令牌都将使用相同的用户/密码组合生成，但我们认为如果我们可以将令牌与用户名和会话相关联，它至少会提供一些可追溯性。

为了简单和灵活，我们将生成的令牌存储到**会话状态中。**我们需要会话状态，即使是 WebAPI 调用，我们也可以访问该令牌以进行 WebAPI 调用。在访问我们的 REST 资源之前，我们需要进行身份验证。

我已经阅读了很多关于 SO 的帖子，这听起来像是一种糟糕的方法。有哪些**选择**？这个解决方案的真正**限制**是什么？

提前感谢您的输入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T06:52:34.510

会话相对容易被破坏。会话 cookie 没有加密（尽管您可以指定它是一个安全的 cookie，这会有所帮助），也没有验证它是否有效。这使得窃取和/或攻击相对容易。

此外，由于许多其他原因，会话并不理想，例如每当 asp.net 工作进程被回收时，会话就会丢失。这将迫使用户重新登录。因此会话可能会在任何时候随机丢失，因为您无法控制工作进程何时回收（它可以在多种原因下这样做）。

我真的不知道您的令牌系统的详细信息，因此很难提出替代方案，但您可以查看 FormsAuthentication 生成身份验证 cookie 的方式作为基础。您还可以使用 FormsAuthentication 并将您的令牌存储在票证的用户数据中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:18:20.260

您必须考虑系统是否会由于身份验证和会话的分离而受到损害，因为 ASP.Net 将会话标识符存储为身份验证 cookie 的单独 cookie。

举这个过于简单的例子：

> 你想强制用户在第一次登录时更改他的密码，没有例外，所以在你`Session["MustCheck"] = true`在登录时设置的代码中。
> 
> 用户很聪明，并意识到这是由会话控制的。他们如何绕过它？
> 
> 他们删除会话 cookie，从而删除当前会话并仍处于登录状态。
> 
> 现在没有“必须检查”，因此用户可以完全避免它

如果您想做一些涵盖所有基础的事情，cookie 是您的最佳选择。

您可以使用类似于加密[cookie 值的](https://stackoverflow.com/questions/4360839/encrypt-cookies-in-asp-net)方法，在其中使用[经过验证的方法](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)加密值（不要使用您自己的方法！）。

已验证的用户 ID 或与用户相关的不可变 (ID) 作为密钥。

您也可以使用其中一种

# java - Java - 使用 Tomcat JDBC 连接池时获取活动连接数

> ID：15035799
> 
> 赞同：4
> 
> 时间：2013-02-23T01:06:05.170
> 
> 标签：java, jdbc-pool

在 Apache DBCP 中有一个方法 getMaxActive() 来获取活动连接的数量。我正在尝试使用 Tomcat JDBC 连接池。我能够创建一个数据源并使用它来运行我的查询，但我想打印到我的控制台以查看池中使用了多少活动连接。

使用 Tomcat JDBC 连接池时是否有此方法？

# oracle - Oracle 无效标识符

> ID：15035802
> 
> 赞同：1
> 
> 时间：2013-02-23T01:06:30.790
> 
> 标签：oracle

```
Error report:
ORA-00904: "RDD"."USED_END_DATE": invalid identifier
ORA-02063: preceding line from ADSWEBPROD
ORA-06512: at line 5 
```

以下查询使我无效标识符错误。

```
DECLARE
  TYPE demo_date_array_type IS TABLE OF dc_demo_dates.demo_date_id%TYPE;
  updated_demo_dates demo_date_array_type;
BEGIN
  SELECT ddd.demo_date_id 
  BULK COLLECT INTO
    updated_demo_dates
  FROM 
    dc_demo_dates ddd 
  JOIN 
    dc_demo_reservations ddr 
  ON 
    ddd.reservation_id = ddr.reservation_id
    AND ddr.status NOT IN ('DENIED','CANCELLED')
    AND ddr.demo_type <> 'Training'
    AND ddr.environment IS NOT NULL
    AND ddd.last_update_date > SYSTIMESTAMP - 1           -- updated in the last day
    AND ddd.demo_start_date > SYSTIMESTAMP - 14 -- no older than 2 weeks
  JOIN
    (SELECT demo_date_id, used_start_date, used_end_date 
     FROM rps_by_demo_date 
     GROUP BY demo_date_id, used_start_date, used_end_date ) rdd
    ON rdd.demo_date_id = ddd.demo_date_id
  WHERE
    ddd.demo_start_date != NVL(rdd.used_start_date, SYSTIMESTAMP)  -- either start date
    OR ddd.demo_end_date != NVL(rdd.used_end_date, SYSTIMESTAMP);  -- or end date has changed
END; 
```

如果我删除`GROUP BY demo_date_id, used_start_date, used_end_date`or 如果我将最后`OR`一个更改为 a `AND`，则代码将成功执行（除非它没有给我所需的结果）

你知道会发生什么吗？谢谢

编辑：我将 group by 子句从子查询移到主查询中，并获得了我想要的结果。但我仍然不明白是什么导致了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:53:32.933

尝试这个 ：-

```
DECLARE
  TYPE demo_date_array_type IS TABLE OF dc_demo_dates.demo_date_id%TYPE;
  updated_demo_dates demo_date_array_type;
BEGIN
  SELECT ddd.demo_date_id 
  BULK COLLECT INTO
    updated_demo_dates
  FROM 
    dc_demo_dates ddd 
  JOIN 
    dc_demo_reservations ddr 
  ON 
    ddd.reservation_id = ddr.reservation_id
    AND ddr.status NOT IN ('DENIED','CANCELLED')
    AND ddr.demo_type <> 'Training'
    AND ddr.environment IS NOT NULL
    AND ddd.last_update_date > SYSTIMESTAMP - 1           -- updated in the last day
    AND ddd.demo_start_date > SYSTIMESTAMP - 14 -- no older than 2 weeks
  JOIN
    (SELECT demo_date_id, used_start_date, used_end_date 
     FROM rps_by_demo_date 
     GROUP BY demo_date_id, used_start_date, used_end_date ) rdd
    ON rdd.demo_date_id = ddd.demo_date_id
    AND (ddd.demo_start_date != NVL(rdd.used_start_date, SYSTIMESTAMP)  
    OR ddd.demo_end_date != NVL(rdd.used_end_date, SYSTIMESTAMP));  
END; 
```

我已将 where 子句移至连接条件。在连接操作中使用 where 子句有时会导致意外结果。您的 where 子句可能无法识别 rdd。但是，您的连接条件可能会识别它。

# javascript - -= 运算符有效但无效 +=

> ID：15035810
> 
> 赞同：0
> 
> 时间：2013-02-23T01:07:42.747
> 
> 标签：javascript, operators

我正在获取查询结果，遍历它们并尝试在将它们输出到页面之前进行一些调整。我似乎无法让`+=`操作员在所有浏览器中正常工作。虽然，`-=`运营商似乎工作正常。基本上，`+=`只是串联。

我试过强制结果为数字，但这似乎也不起作用。

```
var str = '<h2>The Score</h2>'

    for (var i = 0; i < data.message.DATA.length; i++) {

    var theName = data.message.DATA[i][columnMap.ENTRYID]
        switch (theName)
        {
        case "jrd":
            newname = "Carmen";
            theNumber = data.message.DATA[i][columnMap.TOTALCOUNT] -= 110;
            if ($('#entryid').val() == "jrd"){
                $('#recordcount').text(theNumber);
            }
            break;
        case "ejf":
            newname = "Elijah";
            theNumber = Number(data.message.DATA[i][columnMap.TOTALCOUNT] += 50);
            if ($('#entryid').val() == "ejf"){
                $('#recordcount').text(theNumber);
            }
            break;
        }

        str += '<b>'+newname+'</b>'
        str += ' '+theNumber+'<br/>'
    }

    $("#score").html(str)
    } 
```

这是从我的 ColdFusion 查询返回的数据。我`$.ajax()`用来打电话给CFC... `{"message":{"COLUMNS":["ENTRYID","TOTALCOUNT"],"DATA":[["ejf","62"],["gdd","52"],["jrd","215"],["kpf","70"]]},"error":false}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:12:13.710

我想你的意思是写

```
Number(data.message.DATA[i][columnMap.TOTALCOUNT]) + 50; 
```

您仍在电话号码中进行*连接。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:25:27.687

其他答案解决了一半的问题，但您似乎也想要`TOTALCOUNT`这套。你可以做这个长手，但我认为你正在寻求一个最小的解决方案，那么如何将*Object*引用为 var，然后使用你可以使用`+`and `-`，保持单行。

```
/* for (;;) { */

var DATAi = data.message.DATA[i], // added new var `DATAi`
    theName = DATAi[columnMap.ENTRYID];
switch (theName) {
    case "jrd":
        newname = "Carmen";
        theNumber = DATAi[columnMap.TOTALCOUNT] = +DATAi[columnMap.TOTALCOUNT] - 110; // made this match
        if ($('#entryid').val() == "jrd") {
            $('#recordcount').text(theNumber);
        }
        break;
    case "ejf":
        newname = "Elijah";
        theNumber = DATAi[columnMap.TOTALCOUNT] = +DATAi[columnMap.TOTALCOUNT] + 50; // modified
    //  ... 
```

# java - 如何打印不带逗号？

> ID：15035811
> 
> 赞同：-3
> 
> 时间：2013-02-23T01:07:43.500
> 
> 标签：java

我正在尝试调用一种方法来打印“R，a，b，b，i，t”。如果传递了空字符串 ("")，我的方法不应该打印任何内容。

```
public static void printLetters(String a) {
    if (a == "")
        System.out.println(a);
    else
        for (int i = 0; i <= a.length() - 1; i++) {
            char rabb = (a.charAt(i));
            System.out.print(rabb + ",");

            if (i != a.length() - 1) {
                System.out.print(" ");
            }
        }
} 
```

现在的问题是我正在打印“r，a，b，b，it”，我不知道为什么。似乎`if(i!=a.length()-1){`无法消除最后一个逗号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:11:40.777

首先，永远不要`==`用于字符串比较，使用`.equals`：

```
if ("".equals(a)) 
```

在您的 for 循环中，提取字符并仅打印它。然后，如果您检测到您不在字符串的末尾，则打印一个逗号和一个空格。

```
char rabb = (a.charAt(i));
System.out.print(rabb);

if (i != a.length() - 1) {
     System.out.print(", ");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:10:26.363

像这样的东西？？

```
 char rabb = (a.charAt(i));
             if(i==a.lenght()-1){
             System.out.print(rabb + ",");
             }
             else 
             System.out.print(rabb); 
```

此外，您的字符串比较是错误的。使用 equals 方法比较字符串。

```
if ("".equals(a)) 
```

您还可以`String.isEmpty()`用来检查字符串是否为空

```
 if (a.isEmpty()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:14:12.570

比较简单的是删除最后一个字符，因为逗号是最后一个字符，使用String类方法根据位置删除即可

```
String myString = "a,b,c,d,"

String newString = myString.subString(0,myString.length()-2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T01:23:18.937

```
static String comma(String a) {
    if (a.length() == 0)
        return "";
    char[] c = new char[a.length()+a.length()-1];
    for (int i = 0; i < a.length()*2-2; i+=2) {
        c[i] = a.charAt(i/2);
        c[i+1] = ',';
    }
    c[c.length-1] = a.charAt(a.length()-1);
    return new String(c);
} 
```

# jquery - 使用 Jquery 确定下拉菜单内部元素的高度的问题

> ID：15035812
> 
> 赞同：2
> 
> 时间：2013-02-23T01:08:05.197
> 
> 标签：jquery, html, drop-down-menu

目前我有一个 Ajax 调用，它获取填充到下拉列表中的通知。在将这些通知附加到下拉 div 中后，我想为下拉设置动画以打开所有元素的总高度。

目前这个函数在点击时被调用：

```
function showNotificationDropDown() {
    if ($('#notification-dropdown-box').height() == 0) {
              // removing old content
        $("#notifi-box").remove();
              // this is to show the loading spinner
        $('#notification-dropdown-box').animate({ height: "120px" }, 100);
              //shows loading spinner while call is being made
        var spinner = $("<div class='spinner-sm'> </div>");
        $('#notification-dropdown-box').html(spinner);

        $.ajax({
           type: "POST",
           url: "/GetNotifications",
           traditional: true
        }).fail(function () {
           alert('AJAX failed');
        }).complete(function () {
           spinner.remove();
        }).done(function (html) {
           //after the html data is obtained it is appended into the notification
           //after it is appended the notification must drop down to the hieght of this html data
           $('#notification-dropdown-box').append(html).done(expandNotificationDropDown());
           return false;
        });

        return false;
    }
        return false;
    }; 
```

现在扩展通知的功能有问题：

```
 function expandNotificationDropDown() {
        $('#notification-dropdown-box').children().each(function () {
            var totalHeight = totalHeight + $(this).outerHeight(true);
            alert(totalHeight);
            if ($(this).is(':last-child')) {
                $('#notification-dropdown-box').animate({ height: totalHeight }, 100);
            }
        });
    } 
```

我使用警报来测试每次通过的高度。我的问题是我从警报中得到的只是“NaN”。一旦最后一个通知片段被添加到高度，就没有动画完成，因为没有获得高度。

这是什么原因？主#notification-dropdown-box 中的所有孩子都没有书面高度，但我的研究告诉我，outerHeight 仍然应该获得它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:51:37.260

在您的代码中，总高度未定义。未定义 + 数字是 NaN。试试这个：

```
function expandNotificationDropDown() {
    var totalHeight = 0;
    $('#notification-dropdown-box').children().each(function () {
        totalHeight = totalHeight + $(this).outerHeight(true);
    });
    alert(totalHeight);
    if ($(this).is(':last-child')) {
        $('#notification-dropdown-box').animate({ height: totalHeight }, 100);
    }
} 
```

# jquery - scrollTop 不能在 IE 上工作，但在 chrome 上可以

> ID：15035813
> 
> 赞同：1
> 
> 时间：2013-02-23T01:08:10.407
> 
> 标签：jquery, html, internet-explorer

我使用这个 js 并且在 chrome 上工作得很好：

```
$('#main-nav a').click( function() {
                event.preventDefault();
                var nome = $(this).attr("href");

                 $('html, body').animate({
         scrollTop: $(nome).offset().top-198
     }, 1600);

}); 
```

但是在 IE 上根本不起作用，不要滚动或任何东西，只是在没有偏移的情况下下降到目标 div ......有什么帮助吗？我用`<!DOCTYPE html>`....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:09:45.350

您尚未将`event`对象传递给函数：

```
$('#main-nav a').click(function(event) { 
```

# couchbase - 如何使用 Python 客户端从 Couchbase 中删除视图？

> ID：15035819
> 
> 赞同：3
> 
> 时间：2013-02-23T01:08:49.930
> 
> 标签：couchbase

有没有办法使用 Python 客户端删除 Couchbase 客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:12:02.767

最简单的方法是直接调用 REST API，因为它没有在 SDK 中实现。

此 API 记录在这里： http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-designdoc-api-deleting.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-designdoc-api-deleting.html)

# c++ - 什么时候类不包含构造函数？

> ID：15035822
> 
> 赞同：1
> 
> 时间：2013-02-23T01:09:13.213
> 
> 标签：c++, constructor

我对 C++ 很陌生，但对其他语言有一般的了解。最近我看到了一些关于 C++ 的教程，有时我看到没有自己的构造函数的类，甚至没有`className();`. 这可能也存在于其他语言中，但我以前从未见过。我想我以前也没有见过它们，所以我的问题是：它们有什么用？它们是什么？我试着用谷歌搜索这个，但我不知道它的名字..“无构造函数类”并没有给我太多。

如果没有构造函数，是否可以实例化它？或者它更像是一个静态的东西？如果我有一个包含整数但没有构造函数的类，我可以去`int i = myClass.int;`或类似的东西吗？你如何访问无构造函数的类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T01:10:41.173

如果您没有显式声明构造函数，那么编译器会为您提供一个零参数的构造函数。^*

所以这段代码：

```
class Foo {
}; 
```

与此代码相同：

```
class Foo {
public:
    Foo() {};
}; 
```

* * *

[* 除非这不起作用，例如，类包含需要初始化的引用或 const 成员，或者派生自没有默认构造函数的超类。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:12:33.140

如果您没有显式指定构造函数，编译器会为您生成默认构造函数（没有参数的构造函数和复制构造函数）。所以没有无构造函数类这样的东西。您可以使您的构造函数无法访问以控制您的类的实例何时以及如何创建，但这是另一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:27:56.667

没有构造函数的类是实现接口的好模型。

许多接口由方法组成，没有数据成员，所以没有什么可构造的。

```
class Field_Interface
{
  public:
    // Every field has a name.
    virtual const std::string&  get_field_name(void) const = 0;

    //  Every field must be able to return its value as a string
    virtual std::string         get_value_as_string(void) const = 0;
}; 
```

上面的类被称为抽象类。它并不是要具有任何功能，而是要定义一个接口。

# client-server - Boost-ASIO 简单回显客户端-服务器无法建立连接？

> ID：15035824
> 
> 赞同：0
> 
> 时间：2013-02-23T01:09:36.553
> 
> 标签：client-server, boost-asio, connectivity

我将 BOOST-ASIO 用于简单的回显[客户端](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_client.cpp)-[服务器](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)（客户端和服务器有单独的链接）。当我尝试运行服务器时，我使用它`async_tcp_echo_server 4000`。对于我使用的客户端`blocking_tcp_echo_client #.#.#.# 4000`（使用 #.#.#.# 作为 IP 地址）。我在 XP-SP3 上，我的计算机使用 USB 卡连接到我的无线 dsl 调制解调器。在客户端几秒钟后，我收到此错误：

```
Exception: connect: A connection attempt failed because the connected party did
not properly respond after a period of time, or established connection failed be
cause connected host has failed to respond 
```

有什么想法吗？我关闭了包括 Windows 防火墙在内的防火墙，但仍然没有任何响应。我的端口可能在不正确的范围内吗？我是否需要包含计算机名称来指定网络上的机器（网络上有时还有其他机器处于活动状态）？我确实尝试在另一台直接连接到 dsl 调制解调器的计算机上运行它，并且出现同样的问题。我确实ping了我的地址，并且确实适用于4/4个数据包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T02:28:26.467

你可以试试

```
$ telnet server-ip 4000 
```

从您的客户端，看看是否可以建立 tcp 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T03:01:39.623

这可能是各种各样的问题。因此，值得使用较低级别的网络工具，例如 `netcat`在服务器上提供端口，并尝试`netcat`从客户端连接。这可以通过消除应用程序的网络编程代码引入的任何潜在问题来帮助简化问题。如果问题被确定为网络问题，则需要检查几件事：

*   验证服务器上的防火墙例外。
*   验证服务器网络网关中的防火墙例外。
*   如果服务器和客户端在不同的网络上，客户端尝试连接到服务器的外部 IP，则验证服务器的网关是否知道要路由到服务器的流量。这可能需要在路由设备中设置规则，例如[端口转发。](http://en.wikipedia.org/wiki/Port_forwarding)
*   如果服务器和客户端在同一个网络上，但客户端尝试通过网络的外部 IP 连接到服务器，则验证网关是否支持环回以外部 IP 为目的地的内部流量。
*   使用网络分析工具（例如[Wireshark](http://www.wireshark.org/)）来验证数据包中的[生存时间](http://en.wikipedia.org/wiki/Time_to_live)字段是否足够高以至于不会被丢弃。

# javascript - 使用 javascript 在 Chrome/Mac 上强制“过度滚动”

> ID：15035828
> 
> 赞同：3
> 
> 时间：2013-02-23T01:10:04.197
> 
> 标签：javascript, jquery, google-chrome

当您达到文档的限制时，您可以继续滚动，并且可以在文档反弹（过度滚动）之前看到文档的背景。

如何使用javascript强制窗口像这样过度滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:59:27.587

这不是最终的解决方案，因为我认为动画是不完美的，它真的只适用于桌面，但它至少可以让你开始。我所做的是增加滚动动画的主体高度。

```
 $(document).on('scroll mousewheel', function (e) {
    //Check for mousewheel scrolling down (or not used at all)
    if (!e.originalEvent || !e.originalEvent.wheelDeltaY
       || e.originalEvent.wheelDeltaY < 0) {
       if ($(window).height() + $(this).scrollTop() == $(this).height()) {
          //Prevent simultaneous triggering of the animation
          if (!$("body").data('bouncing')) {
             $("body").height(function (_, h) { return h + 15; })
                 .data('bouncing', true);
             $("body, html").animate({
                'scrollTop': '+=15'
             }, 125).animate({
                'scrollTop': '-=15'
             }, {duration: 125, complete: function () {
                $(this).height(function (_, h) { return h - 15; })
                    .data('bouncing', false);
             }});
          }
       }
    }
 }).on('keydown', function (e) {
    //The "down" arrow; still bounces when pressed at the bottom of the page
    if (e.which == '40') {
       $(this).trigger('scroll');
    }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T02:19:12.997

我一直在玩这个版本，它使用 div 模拟效果，在页面底部滑入和滑出视图。如果你有一个高分辨率显示器，你可能需要增加主 div 的高度来测试它。

```
<div id="main" style="background:#f5f5f5;height:1000px"></div>
<div id="overscroll" style="background:#666666;height:120px"></div>

<script type="text/javascript">
    var $doc = $(document);
    $doc.ready(function () {

        var $wnd = $(window),
            $oscroll = $('#overscroll'),
            block = false;

        $wnd.bind('scroll', function () {
            if (!block) {
                block = true;

                var scrollTop = $wnd.scrollTop(),
                    wndHeight = $wnd.height(),
                    docHeight = $doc.height();

                try {
                    if (scrollTop + (wndHeight + 120) > docHeight) {
                        $oscroll.slideUp('slow');
                    }
                    else if ($oscroll.css('display') === 'none'
                        && (scrollTop + (wndHeight + 120) < docHeight)) {
                        $oscroll.slideDown();
                    }
                } finally {
                    block = false;
                }
            }
        });
    });
</script> 
```

# sql - Postgres 窗口函数语法

> ID：15035829
> 
> 赞同：2
> 
> 时间：2013-02-23T01:10:06.070
> 
> 标签：sql, postgresql, window-functions

为什么会出现以下查询：

`select ROW_NUMBER() OVER(PARTITION BY user_id ORDER BY time DESC) as rownum FROM users where rownum < 20;`

产生以下错误？

`ERROR: column "rownum" does not exist LINE 1: ...d ORDER BY time DESC) as rownum FROM users where rownum < 2...`

如何构造这个查询，以便获得前 20 个项目，由我的窗口函数定义？

`user_id`并且`time`都是在 上定义的列`users`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T01:18:09.757

它会像这样工作：

```
SELECT *
FROM  (
   SELECT ROW_NUMBER() OVER(PARTITION BY user_id ORDER BY time DESC) AS rownum
   FROM   users
   ) x
WHERE  rownum < 20; 
```

这里的重点是事件的顺序。窗口函数在`WHERE`子句之后应用。因此`rownum`尚不可见。您必须将其放入子查询或 CTE 并在下一个查询级别应用该`WHERE`子句。`rownum`

[根据文档](http://www.postgresql.org/docs/current/interactive/tutorial-window.html)：

> 仅允许在查询的`SELECT`列表和`ORDER BY` 子句中使用窗口函数。它们在其他地方被禁止，例如 in`GROUP BY`和 子句。这是因为它们在处理这些子句之后在逻辑上执行。此外，窗口函数在常规聚合函数之后执行。这意味着在窗口函数的参数中包含聚合函数调用是有效的，但反之则不然。`HAVING``WHERE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:19:04.557

因为该`where`子句在 select 之前执行，所以它还不知道该别名。像这样做：

```
select *
from (
    select ROW_NUMBER() OVER(PARTITION BY user_id ORDER BY time DESC) as rownum 
    FROM users 
) s
where rownum < 20; 
```

# objective-c - 取消一个 NSURLRequest

> ID：15035832
> 
> 赞同：1
> 
> 时间：2013-02-23T01:10:35.247
> 
> 标签：objective-c, nsurlconnection, nsurlrequest

原生 SDK 中是否提供了取消发出的 URL 请求的方法？我知道这种方法：

```
[connection cancel] 
```

但我想知道我们是否可以取消请求。我只想使用原生 SDK，不允许使用第三方库。还有一种方法可以使用本机库跟踪下载进度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:34:56.977

对于第一部分，您需要在 NSURLConnection 上调用 cancel 作为`[connection cancel]`.

根据[NSURLRequest 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURLRequest)：

> NSURLRequest 封装了加载请求的两个基本数据元素：要加载的 URL，以及在查询实现提供的 URL 内容缓存时使用的策略。

根据[NSURLConnection 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

> NSURLConnection 对象提供对执行 URL 请求加载的支持。NSURLConnection 的接口是稀疏的，仅提供用于启动和取消 URL 请求的异步加载的控件。

因此，您取消的是 URL 连接，而不是 URL 请求。

对于第二部分，检查[NSURLConnectionDownloadDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDownloadDelegate_Protocol/NSURLConnectionDownloadDelegate/NSURLConnectionDownloadDelegate.html)。为此，它具有以下委托方法。

```
– connection:didWriteData:totalBytesWritten:expectedTotalBytes:
– connectionDidResumeDownloading:totalBytesWritten:expectedTotalBytes:
– connectionDidFinishDownloading:destinationURL: 
```

# javascript - 使用 foreignObject 使用 D3js 动态添加 SVG

> ID：15035835
> 
> 赞同：3
> 
> 时间：2013-02-23T01:11:10.787
> 
> 标签：javascript, svg, d3.js

**在职的**

```
<g>
<foreignObject width="100%" height="100%">
<body>
<div style="width:4em;height:4em">
<object height="100%" width="100%" 
        data="icons/cloud.svg" type="image/svg+xml">

</object>
</div>
</body>
</foreignObject>
<text x="0" y="15" fill="red">I love SVG</text>
</g>

</svg> 
```

**不工作**

我正在尝试使用 d3js 动态添加相同的内容。但它只是简单地添加 DOM 元素结构，而不是加载 SVG 图像。

```
d3.select("body").append("svg")
.append("foreignOject").attr("height","100%").attr("width","100%")
.append("body")
.append("div").style("width","4em").style("height","4em")
.append("object").attr("height","100%").attr("width","100%")
.attr("data","icons/cloud.svg").attr("type","image/svg+xml"); 
```

在 xhtml: 前缀之后也一样。我不知道为什么那个“对象”标签没有加载 SVG 图像。请检查以下 SC： ![在此处输入图像描述](../Images/3f6b1dc1c8a707bed6227c0a3839771a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T08:02:16.767

您需要在外部 html 元素前加上 xhtml: 前缀，以便 d3 在 xhtml 命名空间中创建它。因此 append("body") 例如正确地写为 append("xhtml:body") 。

d3 元素从其父元素获取默认命名空间，因此如果您编写 xhtml:body，则内部 div 可以编写为“div”或“xhtml:div”

您还将 foreignObject 拼错为 foreignOject。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:55:24.250

通过为“object”标签添加后备“img”标签来修复，如下所示：

```
var svg = d3.select('body').append('svg');
svg.append('foreignObject')
  .attr('width', '100%')
  .attr('height', '100%')
  .attr('x', 0) 
 .append('xhtml:div').style('height','1100px').style('width','1100px')
.append('xhtml:object')
.attr('height','100%').attr('width','100%')
.attr('type','image/svg+xml')
.attr('data','http://upload.wikimedia.org/wikipedia/commons/8/84/Konqi_svg.svg')
.append('img').attr('alt','notloaded'); 
```

# google-analytics - 您如何从 Google Analytics（分析）报告 API 中获取自定义维度？

> ID：15035838
> 
> 赞同：4
> 
> 时间：2013-02-23T01:11:23.150
> 
> 标签：google-analytics

新的 2.0 移动 API 不再支持自定义变量，并声明您需要使用自定义维度。

[https://developers.google.com/analytics/devguides/collection/ios/v2/migration?hl=en](https://developers.google.com/analytics/devguides/collection/ios/v2/migration?hl=en)

这一切都很好，但是没有[明显或记录](http://ga-dev-tools.appspot.com/explorer/)的方法可以将这些自定义维度从核心报告 API 3.0 中取出。

[https://developers.google.com/analytics/devguides/reporting/core/v3/reference](https://developers.google.com/analytics/devguides/reporting/core/v3/reference)

我们有移动和网络用户，无论使用什么设备，我们都需要获取所有数据。我们怎样才能通过那里获得自定义尺寸？

[http://ga-dev-tools.appspot.com/explorer/](http://ga-dev-tools.appspot.com/explorer/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T13:02:21.893

只需请求“ **dimension1** ”或类似名称。**您可以在管理部分/自定义定义**的代码示例中获得它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T03:21:50.810

谷歌增加了对此的支持。

[http://analytics.blogspot.com/2013/07/40-new-data-points-in-google-analytics.html](http://analytics.blogspot.com/2013/07/40-new-data-points-in-google-analytics.html)

# macos - OS X 上长时间运行的进程使用的内存

> ID：15035841
> 
> 赞同：0
> 
> 时间：2013-02-23T01:11:47.437
> 
> 标签：macos, unix, memory-management

我想确保长时间运行的数字运算算法不会使用太多内存。该算法用 C++ 编写并在 OS X 上运行。一个大大简化的版本是：

```
int main() {
    while (someCondition) {
        // notice nothing is allocated on the heap
        vector<int> v(10, 0);
    }
} 
```

我已经使用 Instruments（分配和泄漏）分析了代码。我没有看到任何泄漏。虽然“实时字节”计数看起来不错（徘徊在 20 MB 左右），但“总字节”计数却在不断增长。我担心的是，当“总计数”达到大约 80 GB 时，我收到了 OS X 警告说硬盘空间不足（我有一个 120 GB 固态磁盘）。我不太了解操作系统/进程交互，所以我想我会问：

**在第一个进程被杀死或不再运行之前，基于 UNIX 的操作系统上长时间运行的进程使用的内存是否可供其他进程使用？**

**编辑：**看起来我误解了 Instruments 中的“总字节数”数字：[Instruments ObjectAlloc: Explanation of Live Bytes & Total Bytes](https://stackoverflow.com/questions/2154219/instruments-objectalloc-explanation-of-live-bytes-overall-bytes)。当我在活动监视器中检查进程时，“真实内存”基本上是恒定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:22:57.563

您收到磁盘空间警告的原因可能与虚拟内存分配有关。每次您的进程（或操作系统）请求内存时，它通常首先在后备存储 - 交换中“分配”。

总虚拟内存是可用交换空间加上 RAM 的大小。我无权访问 OSX，我知道它按自己的规则运行，但必须有一个命令显示交换使用情况

```
swap -l  (Solaris)
swap -s   (Solaris)
free (linux) 
```

我想出的唯一命令是`vm_stat`, plus `top` - 它似乎 top 可能最接近我所说的。

# ruby-on-rails - Capistrano 杀死资产：预编译

> ID：15035846
> 
> 赞同：13
> 
> 时间：2013-02-23T01:12:05.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano

我正在尝试部署我的应用程序，但我不断收到

```
*** [err :: xxx.xxx.xx.xxx] bash: line 1:  9953 Killed                  bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile 
```

我认为问题在于这个过程花费的时间太长。日志中没有错误，`top`也没有显示任何异常。我确实设法摆脱日志的是它正在杀死的进程似乎是`application.js`编译。

当我在`rake assets:precompile`本地运行时，没有错误/警告。

我可以延长 capistrano 在终止进程之前等待的长度吗？这真的是问题吗？我还能在哪里看？

**更新**

跑步时

```
bundle exec rake assets:precompile RAILS_ENV=production RAILS_GROUPS=assets --trace 
```

我得到以下输出

```
** Invoke assets:precompile (first_time)
** Execute assets:precompile
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
Killed 
```

当我跑步时

```
bundle exec rake assets:precompile RAILS_ENV=production --trace 
```

我明白了

** 执行资产：预编译

```
.../.rvm/rubies/ruby-1.9.3-p374/bin/ruby path/to/app/production/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace

** Invoke assets:precompile:all (first_time)

** Execute assets:precompile:all

** Invoke assets:precompile:primary (first_time)

** Invoke assets:environment (first_time)

** Execute assets:environment

** Invoke tmp:cache:clear (first_time)

** Execute tmp:cache:clear

** Execute assets:precompile:primary

rake aborted!

Command failed with status (): [/home/user/.rvm/rubies/ruby-1.9.3-p374...]

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:53:in `block in create_shell_runner'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `call'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `sh'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `sh'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:80:in `ruby'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `ruby'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:12:in `ruby_rake_task'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'

/home/user/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'

path/to/app/production/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'

path/to/app/production/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'

path/to/app/production/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>'

Tasks: TOP => assets:precompile 
```

这不会发生在暂存目录中。我觉得它在盯着我的脸

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-09T22:47:48.047

所以我认为我们的问题是 bootstrap-sass 是资产预编译的一部分。所以它炸毁了所有的css，然后把它全部编译下来。当这与大量 sass/css 结合使用时，该进程会使用大量内存，而操作系统会杀死它。经过大量研究，我遇到了一个相当不错的解决方案。在本地编译、压缩、上传、在服务器上解压、在服务器上符号链接，然后删除所有创建的额外文件（本地资产/压缩文件）。

这是脚本

```
namespace :deploy do
  namespace :assets do

    task :precompile, :roles => :web do
      from = source.next_revision(current_revision)
      if capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ lib/assets/ app/assets/ | wc -l").to_i > 0
        run_locally("RAILS_ENV=#{rails_env} rake assets:clean && RAILS_ENV=#{rails_env} rake assets:precompile")
        run_locally "cd public && tar -jcf assets.tar.bz2 assets"
        top.upload "public/assets.tar.bz2", "#{shared_path}", :via => :scp
        run "cd #{shared_path} && tar -jxf assets.tar.bz2 && rm assets.tar.bz2"
        run_locally "rm public/assets.tar.bz2"
        run_locally("rake assets:clean")
      else
        logger.info "Skipping asset precompilation because there were no asset changes"
      end
    end

    task :symlink, roles: :web do
      run ("rm -rf #{latest_release}/public/assets &&
            mkdir -p #{latest_release}/public &&
            mkdir -p #{shared_path}/assets &&
            ln -s #{shared_path}/assets #{latest_release}/public/assets")
    end
  end

  # other stuff...

end 
```

这是[我找到脚本的地方](http://www.rostamizadeh.net/blog/2012/04/14/precompiling-assets-locally-for-capistrano-deployment)。它提供了更好的解释

**编辑**：

较新的 Rails 部署存在问题。我不确定确切的版本，但它似乎会影响 rails 4。资产需要指定它们正在编译的环境，否则生产/登台环境将找不到它们。

# android - 使用 robolectric 测试异步任务

> ID：15035850
> 
> 赞同：27
> 
> 时间：2013-02-23T01:12:21.263
> 
> 标签：android, unit-testing, robolectric

你知道如何使用 Robolectric 为 AsyncTasks 实现单元测试吗？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-21T12:09:13.623

调用`execute(...)`任务，然后等待结果调用`Robolectric.runBackgroundTasks()`/`Robolectric.flushBackgroundThreadScheduler()`然后就可以断言了。

```
@Test
public void test() {
    //create task
    MyAsyncTask asyncTask = new MyAsyncTask();

    //start task
    asyncTask.execute(...);

    //wait for task code
    // Robolectric.runBackgroundTasks(); (pre 3.0)
    Robolectric.flushBackgroundThreadScheduler(); //from 3.0

    //can run asserts on result now
    assert...(asyncTask.get());
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-11T00:02:58.107

使用 Robolectric 2.4，现在是`ShadowApplication`：

`ShadowApplication.runBackgroundTasks();`

# wordpress - Wordpress，按类别查询页面并显示元信息

> ID：15035851
> 
> 赞同：0
> 
> 时间：2013-02-23T01:12:21.297
> 
> 标签：wordpress, themes

我有一个 wordpress 博客，它的主题带有一些自定义代码，可以按类别访问帖子。直到现在我还没有使用过 wordpress，并且想让这段代码适用于页面而不是帖子。到目前为止，我已经尝试了一些来自 codex.wordpress.org 的基本查询，但没有取得多大成功。

有人可以帮忙吗？

```
<?php $some_array_of_pages = new WP_Query( array( 'ignore_sticky_posts' => 1,    'posts_per_page' => -1, 'orderby' => 'title', 'order' => 'ASC', 'category_name' => 'category'  ) ); ?>
  <?php while ($some_array_of_pages->have_posts()) : ?>    
  <?php $properties->the_post(); ?>
<?php $meta1 = get_post_meta( get_the_ID(), 'meta_name', true ); ?>
<?php $meta2 = get_post_meta( get_the_ID(), 'meta_name', true ); ?>
<?php if ($meta1 && $meta2): ?>
//do something here                              
<?php endif; ?>
  <?php wp_reset_postdata(); ?>
  <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:14:45.423

将“post_type”添加到您的查询中：

```
<?php $some_array_of_pages = new WP_Query( array( 'post_type'=>'page'  ) ); ?> 
```

[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

OP的完整示例：

```
<?php $some_array_of_pages = new WP_Query( array( 'ignore_sticky_posts' => 1,    'posts_per_page' => -1, 'orderby' => 'title', 'order' => 'ASC', 'category_name' => 'category', 'post_type' => 'page'  ) ); ?> 
```

# java - 使用杰克逊 JSON 解析器：复杂的 JSON？

> ID：15035855
> 
> 赞同：7
> 
> 时间：2013-02-23T01:12:50.340
> 
> 标签：java, json, jackson

我有一个复杂的 JSON，我正在尝试使用 Jackson JSON 解析它。我对如何进入 latLng 对象以提取 lat,lng 值有点困惑。这是 JSON 的一部分：

```
{
    "results": [
        {
            "locations": [
                {
                    "latLng": {
                        "lng": -76.85165,
                        "lat": 39.25108
                    },
                    "adminArea4": "Howard County",
                    "adminArea5Type": "City",
                    "adminArea4Type": "County", 
```

这就是我迄今为止在 Java 中所拥有的内容：

```
public class parkJSON
{
    public latLng _latLng;

    public static class latLng
    {
        private String _lat, _lng;
        public String getLat() { return _lat; }
        public String getLon() { return _lng; }
    } 
} 
```

和

```
ObjectMapper mapper = new ObjectMapper(); // can reuse, share globally
mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
parkJSON geo = mapper.readValue(parse, parkJSON.class);

System.out.println(mapper.writeValueAsString(geo));  
String lat = geo._latLng.getLat();
String lon = geo._latLng.getLon();
output = lat + "," + lon;
System.out.println("Found Coordinates: " + output); 
```

*已解决*这就是我通过使用树模型解决问题的方式以供将来参考：

```
 ObjectMapper mapper = new ObjectMapper(); // can reuse, share globally
            mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);                 
            JsonNode rootNode = mapper.readTree(parse);
            JsonNode firstResult = rootNode.get("results").get(0);
            JsonNode location = firstResult.get("locations").get(0);
            JsonNode latLng = location.get("latLng");
            String lat = latLng.get("lat").asText();
            String lng = latLng.get("lng").asText();
            output = lat + "," + lng;
            System.out.println("Found Coordinates: " + output); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T01:38:23.913

如果您对这个输入结构真正感兴趣的只是 lat 和 lng 完全映射可能是 Jackson 提供的不同方法中最不适应的，因为它迫使您编写类来表示数据中的不同层。

Jackson 提供了两种替代方案，允许您提取这些字段而无需定义这些类：

1.  [树模型](http://wiki.fasterxml.com/JacksonTreeModel)提供了许多导航方法来遍历树并提取您感兴趣的数据。
2.  [简单的数据绑定](http://wiki.fasterxml.com/JacksonInFiveMinutes#A.22Raw.22_Data_Binding_Example)将 JSON 文档映射到 Map 或 List，然后可以使用这些集合提供的方法进行导航。

Jackson 文档包含这两种技术的示例，在您的程序中应用它们应该不会太难，使用您的调试器来调查解析器创建的数据结构，以查看文档是如何映射的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-12T12:09:05.333

无论你的 json 是什么：这是一个用于转换 json2object 或 Object2json 的实用程序，

```
import java.io.IOException;
import java.io.StringWriter;
import java.util.List;

import com.fasterxml.jackson.core.JsonGenerationException;
import com.fasterxml.jackson.core.JsonParseException;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;

/**
 * 
 * @author TIAGO.MEDICI
 * 
 */
public class JsonUtils {

    public static boolean isJSONValid(String jsonInString) {
        try {
            final ObjectMapper mapper = new ObjectMapper();
            mapper.readTree(jsonInString);
            return true;
        } catch (IOException e) {
            return false;
        }
    }

    public static String serializeAsJsonString(Object object) throws JsonGenerationException, JsonMappingException, IOException {
        ObjectMapper objMapper = new ObjectMapper();
        objMapper.enable(SerializationFeature.INDENT_OUTPUT);
        objMapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);
        StringWriter sw = new StringWriter();
        objMapper.writeValue(sw, object);
        return sw.toString();
    }

    public static String serializeAsJsonString(Object object, boolean indent) throws JsonGenerationException, JsonMappingException, IOException {
        ObjectMapper objMapper = new ObjectMapper();
        if (indent == true) {
            objMapper.enable(SerializationFeature.INDENT_OUTPUT);
            objMapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);
        }

        StringWriter stringWriter = new StringWriter();
        objMapper.writeValue(stringWriter, object);
        return stringWriter.toString();
    }

    public static <T> T jsonStringToObject(String content, Class<T> clazz) throws JsonParseException, JsonMappingException, IOException {
        T obj = null;
        ObjectMapper objMapper = new ObjectMapper();
        obj = objMapper.readValue(content, clazz);
        return obj;
    }

    @SuppressWarnings("rawtypes")
    public static <T> T jsonStringToObjectArray(String content) throws JsonParseException, JsonMappingException, IOException {
        T obj = null;
        ObjectMapper mapper = new ObjectMapper();
        obj = mapper.readValue(content, new TypeReference<List>() {
        });
        return obj;
    }

    public static <T> T jsonStringToObjectArray(String content, Class<T> clazz) throws JsonParseException, JsonMappingException, IOException {
        T obj = null;
        ObjectMapper mapper = new ObjectMapper();
        mapper = new ObjectMapper().configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);
        obj = mapper.readValue(content, mapper.getTypeFactory().constructCollectionType(List.class, clazz));
        return obj;
    } 
```

# android - （已弃用）片段 onOptionsItemSelected 未被调用

> ID：15035861
> 
> 赞同：82
> 
> 时间：2013-02-23T01:13:24.863
> 
> 标签：android, android-fragments, android-actionbar

**编辑：** 这个问题是针对已弃用的夏洛克动作栏的。现在应该改用 Android 支持库

我为我添加了一个名为 share 的操作栏菜单选项`fragment`，但未捕获到选择事件

我像这样添加它

```
@Override
public void onCreateOptionsMenu (Menu menu, MenuInflater inflater) {
    MenuItem item = menu.add(0, 7,0, R.string.share);
    item.setIcon(R.drawable.social_share).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
} 
```

试图在两者中`fragment`捕捉`fragment activity`它

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case 7:
            Intent share = new Intent(Intent.ACTION_SEND);
            share.setType("text/plain");
            share.putExtra(Intent.EXTRA_TEXT, "I'm being sent!!");
            startActivity(Intent.createChooser(share, "Share Text"));
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

我`setHasOptionsMenu(true);`在`onCreate()`.

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-05-27T07:46:21.310

我也遇到了同样的问题：

> 片段中未调用 onMenuItemSelected 事件

搜google找不到解决办法，在FragmentActivity中添加onMenuItemSelected方法也没有解决。

最后通过参考[http://developer.android.com/guide/topics/ui/actionbar.html解决它](http://developer.android.com/guide/topics/ui/actionbar.html)

> 注意：如果您通过 Fragment 类的 onCreateOptionsMenu 回调从片段中添加菜单项，那么当用户选择片段的其中一项时，系统会为该片段调用相应的 onOptionsItemSelected() 方法。然而，活动有机会首先处理事件，因此系统在为片段调用相同的回调之前对活动调用 onOptionsItemSelected()。

这意味着只有当您在活动的 onOptionsItemSelected() 中没有该菜单项处理程序时，才会调用片段上的 onOptionsItemSelected()。

代码如下-----在 FragmentActivity 上删除**R.action.add**的处理程序）：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case android.R.id.home:
            popBackStack();             
            return true;        
        case R.id.action_search:
            searchAction();
            return true;
        case R.id.action_logout:
            userLogout();
            return true;
        //case R.id.action_add:
            //return true;    
        default:
            return super.onOptionsItemSelected(item);
    }   
} 
```

**R.action.add**在 Fragment 上的处理程序如下所示：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    Log.d("onOptionsItemSelected","yes");
    switch (item.getItemId()) {
        case R.id.action_add:
            add();
            return true;    
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

最后记得添加

```
 setHasOptionsMenu(true); 
```

在 Fragment 的 onCreate 方法中

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2013-08-19T17:00:41.480

我遇到了同样的问题，但我认为最好总结并介绍最后一步以使其正常工作：

1.  `setHasOptionsMenu(true)`在 Fragment 的方法中添加`onCreate(Bundle savedInstanceState)`方法。

2.  覆盖`onCreateOptionsMenu(Menu menu, MenuInflater inflater)`（如果您想在 Fragment 的菜单中做一些不同的事情）和 Fragment`onOptionsItemSelected(MenuItem item)`中的方法。

3.  在 Activity 的`onOptionsItemSelected(MenuItem item)`方法中，确保在 Fragment 的方法`false`中实现菜单项操作时返回。`onOptionsItemSelected(MenuItem item)`

一个例子：

# 活动

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.activity_menu_item:
        // Do Activity menu item stuff here
        return true;
    case R.id.fragment_menu_item:
        // Not implemented here
        return false;
    default:
        break;
    }

    return false;
} 
```

# 分段

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
    ....
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    // Do something that differs the Activity's menu here
    super.onCreateOptionsMenu(menu, inflater);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.activity_menu_item:
        // Not implemented here
        return false;
    case R.id.fragment_menu_item:
        // Do Fragment menu item stuff here
        return true;
    default:
        break;
    }

    return false;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-10T16:39:32.603

我注意到人们给你的解决方案是在活动中为你的菜单项而不是片段实现代码。我认为如果您在片段中实现代码而不是活动，它看起来会更加组织化，因为在我看来它看起来更好。为此，请执行以下操作：

**活动**

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getMenuInflater().inflate(R.menu.menu, menu);      
        return true;
    }

 @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {            
        switch (item.getItemId())
        {
            case R.id.SomeIDInTheMenueOfTheActivity:
            {
               //something();
                break;
            }
            default:
             //do something default and add the code under : 
             return super.onOptionsItemSelected(item);
        }
        return true;
    } 
```

**分段**

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);  
            setHasOptionsMenu(true);      
        }

  @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
    {           
        super.onCreateOptionsMenu(menu, inflater);
    }

     @Override
        public boolean onOptionsItemSelected(MenuItem item)
        {
            switch (item.getItemId())
            {           
                case R.id.SomeIDInFragmentMenue:
                {             
                    break;
                }

                default:
                    return super.onOptionsItemSelected(item);
            }

            return true;
        } 
```

现在的行（和喜欢）：“return super.onOptionsItemSelected(item);” 在activity和fragment中是非常重要的，因为就像你在debug中跟着代码一样，你会看到首先在Activity上调用menue events函数，如果item与activity的switch中的id不匹配——情况下，默认行：“super.onOptionsItemSelected(item);” 如我们所愿，将在片段上调用 ​​onOptionsItemSelected 函数。（如果您有很多片段，请确保其中也包含该行，因为调用层次结构可能有些复杂）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-03T17:31:09.453

我正在使用actionbarsherlock。这对我有用：

1) 创建 dummy_menu.xml 菜单

```
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android" android:layout_height="match_parent" android:layout_width="fill_parent" >
<item
      android:title=""
      android:showAsAction="never"
      android:id="@+id/dummyMenu"
        /> 
```

2）在活动中像这样膨胀菜单：

```
@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
   inflater.inflate(R.menu.dummy_menu,menu);
   return super.onCreateOptionsMenu(menu);
} 
```

3）在片段 onCreateView 调用 setHasOptionsMenu(true) 并覆盖 onCreateOptionsMenu 和 onOptionsItemSelected 也像这样隐藏 dummyMenu（在片段中）

```
 @Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.fragment_actions, menu);
    MenuItem item = menu.findItem(R.id.dummyMenu);
    item.setVisible(false);
    super.onCreateOptionsMenu(menu, inflater);
} 
```

希望它可以帮助某人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-18T10:41:26.503

非常简单，您可以在片段中执行此操作，以确保您的操作正确收听：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-25T18:14:37.193

编辑操作栏 sherlock 使用

我不得不使用

```
public boolean onMenuItemSelected(int featureId, MenuItem item) { 
```

在主要活动中捕获菜单项

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-19T06:59:40.407

我有这个问题。这是因为我覆盖了错误的方法

onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) 是我使用的。

确保您使用的是正确的！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-29T14:49:36.877

您必须`toolbar.bringToFront();`在活动中添加此代码下一组工具栏

```
 public class MainActivity extends AppCompatActivity {
     protected void onCreate(Bundle savedInstanceState) {
        ...

        Toolbar toolbar = findViewById(R.id.toolbar);
        toolbar.setTitle("Yazd");
        setSupportActionBar(toolbar);
        toolbar.bringToFront(); // <<= add here
         ... 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-11T10:18:32.143

您没有链接到活动方法中的超类。请让 onCreateOptionsMenu() 返回 super.onCreateOptionsMenu(menu)，让 onOptionsItemSelected() 返回 super.onOptionsItemSelected(item) （您正在处理的项目除外，它应该返回 true 表示您已处理该事件）

# regex - Perl 5 - 正则表达式中最长的标记匹配（使用交替）

> ID：15035862
> 
> 赞同：3
> 
> 时间：2013-02-23T01:13:31.743
> 
> 标签：regex, perl

可以强制 Perl 5 正则表达式匹配最长可能的字符串，如果正则表达式是，例如：

```
a|aa|aaa 
```

我发现在 perl 6 中可能是默认设置，但在 perl 5 中，我怎样才能得到这种行为？

示例模式：

`[0-9]|[0-9][0-9]|[0-9][0-9][0-9][0-9]`

如果我有 string `2.10.2014`，那么第一个匹配将是 2，这没关系；但下一场比赛将是 1，这是不行的，因为它应该是 10。然后 2014 将是 4 随后匹配 2,0,1,4，但它应该是 2014 使用 [0-9][0-9] [0-9][0-9]。我知道我可以使用 [0-9]+，但我不能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T01:53:26.920

一般解决方案：将最长的放在第一位。

```
my ($longest) = /(aaa|aa|a)/ 
```

具体解决方案：使用

```
my ($longest) = /([0-9]{4}|[0-9]{1,2})/ 
```

如果您无法编辑模式，则必须找到所有可能性并找到其中最长的一个。

```
my $longest;
while (/([0-9]|[0-9][0-9]|[0-9][0-9][0-9][0-9])/g) {
   $longest = $1 if length($1) > length($longest);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T01:57:30.583

对于未知模式，我能看到的最明智的解决方案是匹配所有可能的模式，查看匹配子串的长度并选择最长的子串：

```
my @patterns = (qr/a/, qr/a(a)/, qr/b/, qr/aaa/);
my $string = "aaa";

my @substrings = map {$string =~ /($_)/; $1 // ()} @patterns;

say "Matched these substrings:";
say for @substrings;

my $longest_token = (sort { length $b <=> length $a } @substrings)[0];

say "Longest token was: $longest_token"; 
```

输出：

```
Matched these substrings:
a
aa
aaa
Longest token was: aaa 
```

对于已知模式，可以手动对它们进行排序，以便第一次匹配与最长匹配相同：

```
"aaa" =~ /(aaa|aa|b|a)/;
say "I know that this was the longest substring: $1"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T01:18:04.397

替代将使用匹配的*第一个*替代，因此只需编写即可`/aaa|aa|a/`。

对于您在问题中显示的示例，只需将最长的替代项放在第一位，就像我说的那样：

```
[0-9][0-9][0-9][0-9]|[0-9][0-9]|[0-9] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-05T16:39:15.333

```
perl -Mstrict -Mre=/xp -MData::Dumper -wE'
  {package Data::Dumper;our($Indent,$Sortkeys,$Terse,$Useqq)=(1)x4}
  sub _dump { Dumper(shift) =~ s{(\[.*?\])}{$1=~s/\s+/ /gr}srge }
  my ($count, %RS);
  my $s= "aaaabbaaaaabbab";
  $s =~ m{ \G a+b? (?{ $RS{ $+[0] - $-[0] } //= [ ${^MATCH}, $-[0] ]; $count++ }) (*FAIL) };
  say sprintf "RS: %s", _dump(\%RS);
  say sprintf "count: %s", $count;
'
RS: {
  "1" => [ "a", 0 ],
  "2" => [ "aa", 0 ],
  "3" => [ "aaa", 0 ],
  "4" => [ "aaaa", 0 ],
  "5" => [ "aaaab", 0 ]
}

count: 5 
```

# python - popen 命令没有给出所需的输出

> ID：15035863
> 
> 赞同：0
> 
> 时间：2013-02-23T01:13:35.853
> 
> 标签：python

我正在使用以下代码运行 git 命令“git tag -l contains ad0beef66e5890cde6f0961ed03d8bc7e3defc63”..如果我独立运行此命令，我会看到所需的输出..但是通过下面的程序，它不起作用，有没有人有任何输入有什么问题？

```
from subprocess import check_call,Popen,PIPE
revtext = "ad0beef66e5890cde6f0961ed03d8bc7e3defc63"
proc = Popen(['git', 'tag', '-l', '--contains', revtext ],stdout=PIPE ,stderr=PIPE)
(out, error) = proc.communicate()
print "OUT"
print out 
```

# javascript - jQuery Tools Validator - 正则表达式测试 - 仅排除字母

> ID：15035864
> 
> 赞同：0
> 
> 时间：2013-02-23T01:13:44.347
> 
> 标签：javascript, jquery, validation, jquery-tools

我正在尝试验证一个字段以包含除字母以外的所有内容，但以下内容仅适用于我输入的第一个字符。因此，如果我输入“123a”，测试方法将返回 true。

```
$.tools.validator.fn("input#Phone", "Please enter a valid phone number.", function(input, value) {  
    var pass;
    var rgx = /[^a-z]/gi;

    if ( rgx.test(value) 
         || (value == "") 
         || (value == $(input).attr("placeholder"))) {  

        $(input).removeClass("invalid");            
        pass = true;            
    } else {                    
        $(input).addClass("invalid");           
        pass = false;       
    }

    return pass;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:15:37.563

你只匹配一个字符。

```
/^[^a-z]$/i 
```

这确保了整个字符串都是非字母的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T06:59:31.693

1.  仅适用于数字：

    ```
     RegExp(/^[^a-zA-Z]$/i) 
    ```

2.  您可以使用的电话号码

    ```
     RegExp(/^[0-9 -()+]{6,20}$/i) 
    ```

# android - ScrollView 在 android 中不起作用

> ID：15035865
> 
> 赞同：0
> 
> 时间：2013-02-23T01:13:48.693
> 
> 标签：android, keyboard, scrollview

我想知道为什么 ScrollView 在这个 Source 中不起作用。

此源中的水龙头具有日历和 EditText。

如果我单击 EditText 并弹出 softKey，我想滚动。

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:id="@+id/scroll"   >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        tools:context=".AddActivity" >
        <TabHost
            android:id="@android:id/tabhost"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <LinearLayout
               android:layout_width="fill_parent"
               android:layout_height="fill_parent"
               android:orientation="vertical">

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"/>

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent" >
                </FrameLayout>       

            </LinearLayout>
        </TabHost>
    </LinearLayout>
</ScrollView> 
```

--- 在标签中 ---

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent">
<Button 
    android:id="@+id/first_button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" 
    android:text="save"/>
<LinearLayout 
    android:id="@+id/first_LL"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_alignParentTop="true"
    android:layout_above="@id/first_button">
    <TextView
        android:id="@+id/firstday"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity = "center"/>
    <add.AddCalendar
        android:id="@+id/Cfirst"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="1dp"
        android:paddingBottom="1dp"
        />      
    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"  >
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text = "Date : "/>
        <Spinner
            android:id="@+id/first_Year"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text = "year"/>
        <Spinner
            android:id="@+id/first_Month"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text = "month"/>
        <Spinner
            android:id="@+id/first_Day"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text = "day"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text = "sth : "
            android:gravity="top"/>
        <EditText
            android:id="@+id/first_Text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint=" write "
            android:gravity="top"/>
    </LinearLayout>
</LinearLayout> 
```

我不知道为什么这段代码不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:27:21.003

我认为您应该使用 ScrollView 而不是整个屏幕将布局包装在选项卡中

# android - 在frameLayout中放一个按钮

> ID：15035866
> 
> 赞同：2
> 
> 时间：2013-02-23T01:13:53.077
> 
> 标签：android, android-layout, android-camera

我有一个带相机的小应用程序，我有一个没有问题的设备，但如果我可以更改应用程序，它的美感会大大提高。

我把活动的xml代码：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:id="@+id/layout">

    <FrameLayout 
        android:id="@+id/preview"
        android:layout_weight="1" 
        android:layout_width="fill_parent"
        android:layout_height="0dip">

    </FrameLayout>

    <Button
        android:id="@+id/buttonClick"
        android:layout_width="109dp"
        android:layout_height="105dp"
        android:layout_gravity="center"
        android:background="@drawable/obutrador2" >

    </Button>

</LinearLayout> 
```

当我运行应用程序时，按钮占据的屏幕的整个高度都有一条白色条纹。我该如何解决这个问题？它会使按钮出现在相机正在捕获的图像上方，作为具有默认手机的应用程序。

问题是如何定位框架布局，使其充满屏幕并将按钮置于底部中心。如果我将 FrameLayout 全屏显示，则该按钮会消失。

我留下了一张照片的链接： [https ://www.dropbox.com/s/jbns8jddtwxjhdp/IMAG0348.jpg](https://www.dropbox.com/s/jbns8jddtwxjhdp/IMAG0348.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:29:24.593

我认为您应该像这样在 FrameLayout 中定义 Button 。您可以将 FrameLayout 作为父布局，并且可以将按钮放置在任何您想要的位置

```
<FrameLayout 
        android:id="@+id/preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <Button
        android:id="@+id/buttonClick"
        android:layout_width="109dp"
        android:layout_height="105dp"
        android:layout_gravity="center"
        android:background="@drawable/obutrador2" >

    </Button>

</FrameLayout> 
```

希望这对你有用......谢谢

# java - 如何在Java中将一维和二维数组写入文本文件

> ID：15035868
> 
> 赞同：0
> 
> 时间：2013-02-23T01:14:27.173
> 
> 标签：java, arrays, printf

我想将数组的每个元素写入一个文本文件。例如下面将更清楚地演示

```
String[] Name = {"Eric","Matt","Dave"}

Int[] Scores = {[45,56,59,74],[43,67,77,97],[56,78,98,87]}

double[] average = {45.7,77.3,67.4} 
```

我想要文本文件中的以下内容

```
Student Eric scored 45,56,59,74 with average of 45.7
Student Matt scored 43,67,77,97 with average of 77.3
Student Dave scored 56,78,98,87 with average of 67.4 
```

我创建了输出文件

```
PrintStream output = new PrintStream(new File("output.txt")); 
```

我使用了一个 for 循环

```
for(int i =0;i<=Name.length;i++){

    output.println("Student  " + Name[i] + " scored " + Scores[i] + " with average of " + average[i]);
} 
```

但这没有用。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:21:29.593

我的猜测是编译器不喜欢这一行：

```
Int[] Scores = {[45,56,59,74],[43,67,77,97],[56,78,98,87]} 
```

Java中没有`Int`类型。假设您的意思是`int`，编译器仍然会抱怨，因为`[45,56,59,74]`它不是 int！

您需要的是一个`int[][]`和一个声明，例如：`{{45,56,59,74}}`

不过，我不确定你会对输出感到满意......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:25:59.693

1.  二维数组需要两个括号而不是一个，
2.  Int 应该是小写的，
3.  变量应该是小写的（分数而不是分数）。

所以它应该是这样的：

```
int[][] scores = {{45,56,59,74},{43,67,77,97},{56,78,98,87}}; 
```

此外，for 循环应该从 0 运行到比长度小 1 ，否则你会越界。

```
names.length = 3
names[0] = "Eric"
names[1] = "Matt"
names[2] = "Dave" 
```

因此，当您尝试访问 names[3] 时，您将得到一个越界异常，因为该数组仅包含 3 个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:26:40.197

也许您忘记刷新或关闭 PrintStream（我还修复了上面提到的错误）

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintStream;

public class Main {
    public static void main(String[] args) {
        String[] Name = {"Eric","Matt","Dave"};

        int[][] Scores = {{45,56,59,74},{43,67,77,97},{56,78,98,87}};

        double[] average = {45.7,77.3,67.4};

        try (
                PrintStream output = new PrintStream(new File("output.txt"));
            ){

            for(int i =0;i<Name.length;i++){
                String sc ="";
                for (int j=0;j<Scores[i].length;j++){
                        sc+=Scores[i][j]+" ";
                }
                output.println("Student  " + Name[i] + " scored " + sc + " with average of " + average[i]);
            }
            output.close();

        } catch (FileNotFoundException e) {

            e.printStackTrace();
        }

    }

} 
```

请注意，这是 java7 语法（带有 的 try..catch 块`()`）

见：http: [//blog.sanaulla.info/2011/07/10/java-7-project-coin-try-with-resources-explained-with-examples/](http://blog.sanaulla.info/2011/07/10/java-7-project-coin-try-with-resources-explained-with-examples/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-23T01:22:25.053

您必须使用 FileWriter 而不是 PrintStream。

```
BufferedWriter bw = new BufferedWriter(new FileWriter(new File(
                                        "C:/new.txt"), true));

StringBuffer sb = new StringBuffer();

for(int i =0;i<=Name.length;i++){
    sb.append("Student " + Name[i] + " scored " + Scores[i]
    + " with average of " + average[i] + "\n"); 
}

bw.write(sb.toString());
bw.close(); 
```

# linux - 何时使用 TCP 打孔技术以及为什么使用它？

> ID：15035881
> 
> 赞同：3
> 
> 时间：2013-02-23T01:15:41.740
> 
> 标签：linux, networking, tcp, nat, hole-punching

我正在研究**TCP 打孔**技术，并从这篇文章中获得了一些知识：[TCP_hole_punching](http://en.wikipedia.org/wiki/TCP_hole_punching)。但我不明白以下部分：

```
 Network Drawing
      Peer A ←→ Gateway A ← .. Network .. → Gateway B ←→ Peer B  

      Types of NAT
      The availability of the TCP-hole-punching technique depends 
      on the type ofcomputer port allocation used by the NAT. When 
      two peers, A and B, instantiate TCP   connections by binding 
      to local ports Pa and Pb, respectively, **they need to know 
      the remote  endpoint NAT port in order to make the connection**. 
```

这里有一些问题，有人可以帮忙解释一下吗？任何帮助或建议将不胜感激！！

Q1。假设我们有一个在 NAT1 后面运行的客户端应用程序和一个在 NAT2 后面运行的服务器应用程序。他们将进行消息传递和文件传输通信。该模式将是服务器侦听并接受来自客户端的连接。**他们是否需要使用 TCP 打孔来保持 tcp 连接正常工作？**

Q2。**只有当它是对等通信并且双方都相互连接时（例如，2x CONNECT()、没有 LISTEN()、ACCEPT() 等），才需要 TCP 打孔技术吗？**

Q3。在上面的文本中，“他们需要知道远程端点的 NAT 端口才能建立连接”是什么意思？**为什么他们需要知道远程端点的NAT端口？他们不只需要知道对方机器的本地端口吗？**

例如，假设这对是 (ClientA, publicIPA, LocalPortA), (ClientB, publicIPB, LocalPortB)。如果 ClientA 想通过 TCP 与 ClientB 通信，它可能会这样做：

```
 clientBAddr.port = LocalPortB;
         clientBAddr.ip = inet_addr(publicIPB);
         connect(fdA, clientBAddr,...); 
```

为什么它需要知道诸如 NATPortA 和 NATPortB 之类的信息？如果clientA和clientB不关心NATA和NATB有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:52:02.077

由于这篇文章重新打开，直到此刻没有人留下答案，我想根据这篇文章自己回答：[Peer-to-Peer Communication Across Network Address Translators](http://www.bford.info/pub/net/p2pnat/index.html)

关于第一季度，是的。如果没有像打孔这样的机制，一方用来与另一方同步的数据包将被路由器丢弃。

关于第二季度，不完全是。监听套接字不能直接工作。你需要其他技巧。

# java - 从 Java 中保存 MySQL 中的图像

> ID：15035883
> 
> 赞同：3
> 
> 时间：2013-02-23T01:15:54.933
> 
> 标签：java, mysql, image, swing, blob

我正在尝试从 Java swing 应用程序将图像保存在 MySQL 数据库中。我正在使用 JFileChsoser 来获取图像的路径。然后转换文件，使其可以保存在 BLOB 类型的 MySQL 列中。但是我尝试保存的每张图像都无法正确保存或正确转换。有人可以告诉我我在这里做错了什么吗？

```
private void btn_choosepicActionPerformed(java.awt.event.ActionEvent evt) {
    JFileChooser picchooser = new JFileChooser();
    picchooser.setDialogTitle("Select Image");
    picchooser.showOpenDialog(null);
    File pic=picchooser.getSelectedFile();
    path= pic.getAbsolutePath();
    txt_path.setText(path.replace('\\','/'));
    try{
        File image = new File(path);
        FileInputStream fis = new FileInputStream(image);
        ByteArrayOutputStream baos= new ByteArrayOutputStream();
        byte[] buff = new byte[1024];
        for(int readNum; (readNum=fis.read(buff)) !=-1 ; ){
            baos.write(buff,0,readNum);
        }
        userimage=baos.toByteArray();
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    }     
} 
```

然后在此之后我像这样将它保存到数据库中。

```
private void btn_saveActionPerformed(java.awt.event.ActionEvent evt) {
    String user= txt_username.getText();
    try{
        String sql="insert into imgtst (username,image) values ('"+user+"','"+userimage+"')";
        pst=con.prepareStatement(sql);
        pst.executeUpdate();
        JOptionPane.showMessageDialog(null, "Saved");
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    }  
} 
```

我已经将变量 userimage 和 path 声明为全局变量

```
String path=null;
byte[] userimage=null; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T01:39:09.573

您在 sql 语句中将 byte[] 转换为 String，您最终会得到不正确的数据。

使用 BLOB 的正确方法是传递`InputStream`自身。您可以使用`FileInputStream`您正在使用的文件来读取文件。

```
File image = new File(path);
FileInputStream fis = new FileInputStream ( image );

String sql="insert into imgtst (username,image) values (?, ?)";
pst=con.prepareStatement(sql);

pst.setString(1, user);
pst.setBinaryStream (2, fis, (int) file.length() ); 
```

当您取回它时，您同样可以`InputStream`从`ResultSet`：

```
InputStream imgStream = resultSet.getBinaryStream(2); 
```

# javascript - SVG 路径上的布尔运算

> ID：15035884
> 
> 赞同：13
> 
> 时间：2013-02-23T01:16:07.767
> 
> 标签：javascript, svg, computational-geometry

截至 2014 年初，SVG 规范没有对布尔运算的任何内置支持

布尔运算是用于改变大部分重叠路径的固有几何形状的方法。它们允许通过对更简单的形状执行操作来构造复杂的形状，并且在某种程度上类似于[Constructive Solid Geometry (CSG)](https://en.wikipedia.org/wiki/Constructive_solid_geometry)。

然而，这个问题是指 2D 矢量路径。流行的路径运算有：并集、减法、交集、异或（异或）。

是否有任何图书馆可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-27T03:53:45.370

有[Javascript Clipper](http://sourceforge.net/projects/jsclipper/)，它允许路径上的所有[布尔运算](https://en.wikipedia.org/wiki/Boolean_operations_on_polygons)集，但条件是输入路径是*多边形。*

*   如果我们有任何曲线（三次/二次贝塞尔曲线），可以使用[De Casteljau 算法](http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/Bezier/de-casteljau.html)轻松地将它们细分为多边形。

    *   如果细分样本足够高，则结果将是一个在视觉上看起来像曲线的多边形（以大量数据为代价，因为顶点数量线性增加，具体取决于细分的保真度）。

[然后我们可以在JavaScript Clipper](http://sourceforge.net/projects/jsclipper/)中为布尔运算提供路径。

* * *

这里需要注意的是，如果路径包含曲线，我们就会失去路径固有的“弯曲”特性。做上面提到的“多边形化”，或多或少是一条单行道。

# javascript - 如何更改jquery中所有表单输入的属性？

> ID：15035886
> 
> 赞同：0
> 
> 时间：2013-02-23T01:16:35.840
> 
> 标签：javascript, jquery, forms, parent, children

我继承了几种形式：

```
<tr>
    <form method="post" action="\">
        <td><input disabled type="text" name="t1" id="t1" value=""></td>
        <td><input disabled type="email" name="t2" id="t2" value=""></td>
        <td><input disabled type="email" name="t3" id="t3" value=""></td>
        <td><input type="submit" id="edit" value="Edit"></td>
        <td><input type="submit" name="change" value="Change"></td>
    </form>
</tr>
<tr>
    <form method="post" action="\">
        <td><input disabled type="text" name="t1" id="t1" value=""></td>
        <td><input disabled type="email" name="t2" id="t2" value=""></td>
        <td><input disabled type="email" name="t3" id="t3" value=""></td>
        <td><input type="submit" id="edit" value="Edit"></td>
        <td><input type="submit" name="change" value="Change"></td>
    </form>
</tr>
.... 
```

当我单击一个`#edit`按钮时，我想将链向上推到它自己的位置`table`，选择所有`input`子项并删除该`disabled`属性，但仅适用于该表单。

我试过这样的事情：

```
$('#edit').on("click", function(e){
    e.preventDefault();
    var form = $(this).parent("form");
    // or maybe a $.each ??
    form.children('input').removeAttr("disabled");
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:19:35.297

`$(this).parent()`实际上是 a `<td>`，所以它什么也不返回。

```
$(this).closest('form').find('input').prop('disabled', false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:19:36.647

```
$('#edit').on("click", function(e){
    e.preventDefault();
    var form = $(this).closest("form");
    // or maybe a $.each ??
    form.find('input').attr("disabled","");
}); 
```

使用`closest`and`find`代替。

`parent`指的是确切的父母，而`closest`找到树上的第一个匹配项。 `children`是直子，不是孙子。

# java - 在java中编辑xml内容并将其作为字符串传递，最好使用节点

> ID：15035893
> 
> 赞同：0
> 
> 时间：2013-02-23T01:17:21.913
> 
> 标签：java, xml, xml-parsing

我有一个 xml 文档，将用作模板

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"><content type="application/xml"><m:properties><d:AccountEnabled>true</d:AccountEnabled><d:DisplayName>SampleAppTestj5</d:DisplayName><d:MailNickname>saTestj5</d:MailNickname><d:Password>Qwerty1234</d:Password><d:UserPrincipalName>saTestj5@identropy.us</d:UserPrincipalName></m:properties></content></entry> 
```

我使用这个代码在 java 中调用它，其中 payLoadXML.xml 具有上述内容。

```
"InputStream is = getClass().getClassLoader().getResourceAsStream("/payLoadXML.xml");" 
```

现在我正在尝试编辑标签值，例如将“saTestj5”更改为“saTestj6”，然后转换整个 xml 并将其存储在 xml 中。谁能告诉我如何实现这一目标？有人告诉我这可以通过使用“节点”来完成，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:48:55.673

使用 jaxb 或 sax 解析器通过使用 getter 方法转换为对象并更改对象并转换回 xml

试试[这个](http://www.mkyong.com/java/how-to-modify-xml-file-in-java-jdom/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:12:23.050

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = null;
        docBuilder = docFactory.newDocumentBuilder();

        Document doc = null;
        InputStream is = getClass().getClassLoader().getResourceAsStream("/payLoadXML.xml");
        doc = docBuilder.parse(is);

        Node staff = doc.getElementsByTagName("m:properties").item(0);

        Text givenNameValue = doc.createTextNode("abc");
        Element givenName = doc.createElement("d:GivenName");
        givenName.appendChild(givenNameValue);
       staff.appendChild(givenName);
    TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = null;
        transformer = transformerFactory.newTransformer();

        DOMSource source = new DOMSource(doc);
        StringWriter writer = new StringWriter();
        StreamResult result = new StreamResult(writer);

        transformer.transform(source, result); 
```

# .net - Visual Studio 2012 作为自定义 .NET 语言 IDE

> ID：15035894
> 
> 赞同：0
> 
> 时间：2013-02-23T01:17:31.073
> 
> 标签：.net, visual-studio, visual-studio-2012

我隐约知道，Visual Studio 是作为语言模块构建在与语言无关的“代码编辑 IDE”基础之上的，并且可以将其扩展为用作其他语言的 IDE。

理想情况下，我是否希望拥有一种新的（.net 兼容）语言和项目类型，我可以在 Visual Studio 解决方案中与其他项目并排使用。

任何人都可以帮助我了解所涉及的步骤/需要完成的工作领域，以使这成为可能吗？

# vba - Word VBA - 将部分文档加载到变量中，然后运行 .indexOf 进行搜索

> ID：15035895
> 
> 赞同：0
> 
> 时间：2013-02-23T01:17:58.880
> 
> 标签：vba, ms-word, string-formatting

好的，我是一名 Javascript 程序员，而 VBA 让我发疯了——我对此一无所知，这就像拔牙寻找最简单的事情的简单文档。

我实际上是在尝试运行一个小脚本来自动格式化文档，部分基于内容。

我想抓取文档的第三行，或者前 100 个字符，我真的不在乎，并在`String().indexOf('foobar')`其上运行等效的，以检查文档的该部分是否包含字符串。

我终其一生都找不到如何：

一个。将文本选择加载到变量中。
湾。运行一个理智的外表`indexOf`。

有人可以帮忙吗？也许指向我不是 Micrsoft 的理智的 VBA 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:45:29.840

> 一个。将文本选择加载到变量中。

确定`Word.Range`您想要的范围 ( ) 并获取该`Text`范围的属性。
例如，

```
dim s as string
s = ThisDocument.Paragraphs(3).Range.Text 
```

* * *

> 湾。对 indexOf 运行一个理智的表象。

不[`InStr`](http://office.microsoft.com/en-us/word-help/HV080608419.aspx)好吗？

```
msgbox InStr(s, "foobar") 
```

# c++ - 设置指向非静态成员函数的指针

> ID：15035905
> 
> 赞同：16
> 
> 时间：2013-02-23T01:18:36.477
> 
> 标签：c++

我正在尝试设置一个在执行期间根据一组用户参数设置的函数指针。我想让函数指针指向一个非静态成员函数，但我找不到怎么做。

我见过的例子说这只能用静态成员函数来完成，或者在直接 C 中使用全局变量。

一个简化的例子如下：

```
 class CA
    {
    public:
        CA(void) {};
        ~CA(void) {};
        void setA(double x) {a = x; };
        void setB(double x) {b = x; };

        double getA(const double x) {return x*a; };
        double getB(const double x) {return x*b; };

        void print(double f(const double), double x) {
            char cTemp[256];
            sprintf_s(cTemp, "Value = %f", f(x));
            std::cout << cTemp;
        };

    private:
        double a, b;
    }; 
```

实现部分是

```
CA cA;
cA.setA(1.0);
cA.setB(2.0);

double (*p)(const double);

if(true) {
    p = &cA.getA;  //'&' : illegal operation on bound member function expression
} else {
    p = cA.getB;  //'CA::getB': function call missing argument list; use '&CA::getB' to create a pointer to member
                  //'=' : cannot convert from 'double (__thiscall CA::* )(const double)' to 'double (__cdecl *)(const double)'
}

cA.print(p, 3.0); 
```

那么如何让 p 指向“getA”或“getB”，以便“打印”仍然可以使用它。

据我所知，建议是使用 boost 或 std::bind 但我对这两种方法都没有经验。我希望我不需要深入研究这些，我只是错过了一些东西。

编译器 MSVC++ 2008

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-23T01:25:53.967

不要忘记成员函数接受隐式`this`参数：因此，接受 a 的成员函数`double`不能与接受 a 的非成员（自由）函数相同`double`。

```
// OK for global functions
double (*p)(const double);

// OK for member functions
double (CA:*p)(const double); 
```

您*调用*它们的方式也不同。首先，对于成员函数，您需要一个对象来调用它们（其地址最终将绑定到`this`函数调用中的指针）。其次，您需要使用`.*`运算符（`->*`如果您通过指针执行调用，则需要使用运算符）：

```
p = &CA::getA;
CA cA;
(cA.*p)(); 
```

始终如一地，您将不得不更改对 function 的定义`print()`：

```
 #include <iostream>

    void print(double (CA::*f)(const double), double x) 
    {
        // Rather use the C++ I/O Library if you can...
        std::cout << "Value = " << (this->*f)(x);
    }; 
```

所以最后，这就是你应该如何重写你的`main()`函数：

```
int main()
{
    CA cA;
    cA.setA(1.0);
    cA.setB(2.0);

    double (CA::*p)(const double);

    if (true) // Maybe use some more exciting condition :-)
    {
        p = &CA::getA;
    } 
    else {
        p = &CA::getB;
    }

    cA.print(p, 3.0);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T01:51:58.963

## 编译问题

**该答案侧重于问题中提出的编译问题。**我不建议将其作为解决方案实施。

指向成员函数的指针最好用`typedef`s 和宏来处理。

这是调用成员函数的宏：

```
#define CALL_MEMBER_FN(object, ptrToMember)  ((object).*(ptrToMember)) 
```

**资料来源：** [[33.6] 使用指向成员函数的指针调用成员函数时，如何避免语法错误？](http://www.parashift.com/c++-faq/macro-for-ptr-to-memfn.html), [C++ 常见问题解答](https://isocpp.org/wiki/faq/pointers-to-members#typedef-for-ptr-to-memfn)。

`(object).*(ptrToMember)`这使您在任何时候希望通过指针调用成员函数时都不必记住丑陋的语法。

在你的`class`，声明一个`typedef`被调用的`CAGetter`，这将使变量声明更简单：

```
class CA
{
public:    
    typedef double (CA::*CAGetter)(const double x); 
```

然后你可以`print()`很简单地声明你的函数：

```
 void print(CAGetter f, double x) 
```

正文也简洁明了：

```
 {
        std::cout << "value = " << CALL_MEMBER_FN(*this, f)(x) << '\n';
    } 
```

示例用法：

```
CA a;
a.setA(3.1);
a.setB(4.2);

// Using a variable...
CA::CAGetter p = &CA::getA;
a.print(p, 1);

// without a variable
a.print(&CA::getB, 1);

// Calling the functions from outside the class...
std::cout << "From outside (A): " << CALL_MEMBER_FN(a, p)(10) << std::endl;
std::cout << "From outside (B): " << CALL_MEMBER_FN(a, &CA::getB)(10) << std::endl; 
```

## 设计问题

将指向成员函数的指针传递给同一类的实例的方法是一种设计味道（通常不会将成员变量传递给方法，这没有什么不同）。这个问题中没有足够的信息来解决底层设计问题，但这个问题可能可以通过单独`print()`的方法、成员变量或继承和多态来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:35:48.067

您可以使用指向方法的指针：

```
class CA
{
    public:
        typedef double (CA::*getter)( double );
        CA(void) {};
        ~CA(void) {};
        void setA(double x) {a = x; };
        void setB(double x) {b = x; };

        double getA(const double x) {return x*a; };
        double getB(const double x) {return x*b; };

        void print(getter f, double x) {
            char cTemp[256];
            sprintf(cTemp, "Value = %f", (this->*f)(x));
            std::cout << cTemp;
        };

    private:
        double a, b;
};

int main()
{
    CA cA;
    cA.setA(1.0);
    cA.setB(2.0);

    CA::getter p;

    if(true) {
            p = &CA::getA;  
    } else {
            p = &CA::getB; 
    cA.print( p, 3.0 );
} 
```

或者使用 boost::bind

```
class CA
{
    public:
        typedef boost::function<double( double )> getter;
        CA(void) {};
        ~CA(void) {};
        void setA(double x) {a = x; };
        void setB(double x) {b = x; };

        double getA(const double x) {return x*a; };
        double getB(const double x) {return x*b; };

        void print(getter f, double x) {
            char cTemp[256];
            sprintf(cTemp, "Value = %f", f(x));
            std::cout << cTemp;
        };

    private:
        double a, b;
};

int main()
{
    CA cA;
    cA.setA(1.0);
    cA.setB(2.0);

    CA::getter p;

    if(true) {
            p = boost::bind( &CA::getA, &cA, _1 );
    } else {
            p = boost::bind( &CA::getB, &cA, _1 );
    }
    cA.print( p, 3.0 );
} 
```

# php - 为什么 PHP 将 2014 年 1 月 1 日的日期显示为 2013 年 1 月

> ID：15035906
> 
> 赞同：-1
> 
> 时间：2013-02-23T01:18:54.460
> 
> 标签：php, date

我遇到了一个奇怪的问题，该问题仅针对我的数据库中 2014-01-01 的日期。我正在重新格式化日期，但 PHP 将它们显示为 1 月 13 日。所有其他日期在不同月份都显示正常。这怎么可能？

我的功能：

```
public function exp_date($date) {
    // Hide wrong dates
    if ($date == '0000-00-00' || $date == '1969-12-31') {
        $out = "";
    } else {
        $out = strtoupper(date('M y', strtotime($date)));
    }

    if ($out == 'DEC 69' || $out == 'JAN 70') {
        $out2 = "";
    } else {
        $out2 = $out;
    }
    return $out2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:33:06.527

删除您对`strtotime`:

```
$out = strtoupper(date('M y', $date)); 
```

# c++ - 为什么 cv::gpu::GaussianBlur 比 cv::GaussianBlur 慢？

> ID：15035907
> 
> 赞同：0
> 
> 时间：2013-02-23T01:18:57.740
> 
> 标签：c++, opencv, cuda, gpu

我不是 C++、OpenCV 和 CUDA 方面的专家，不明白为什么

```
cv::gpu::warpPerspective(g_mask, g_frame, warp_matrix, g_frame.size(), 
    cv::INTER_LINEAR, cv::BORDER_CONSTANT, cv::Scalar(255,255,255));
cv::gpu::GaussianBlur(g_frame, g_frame, cv::Size(blur_radius, blur_radius), 0);
g_frame.download(mask); 
```

比

```
cv::gpu::warpPerspective(g_mask, g_frame, warp_matrix, g_frame.size(), 
    cv::INTER_LINEAR, cv::BORDER_CONSTANT, cv::Scalar(255,255,255));
g_frame.download(mask);
cv::GaussianBlur(mask, mask, cv::Size(blur_radius, blur_radius), 0); 
```

告诉我，为什么会这样？还是我写错了代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-29T01:43:44.693

GPU 的 IPC 开销通常是罪魁祸首。您应该考虑使用 cv::Stream 接口来最小化该开销。

# php - 以正确的方式访问 stdClass 对象？

> ID：15035909
> 
> 赞同：2
> 
> 时间：2013-02-23T01:19:15.120
> 
> 标签：php, object, stdclass

我有一个如下所示的 stdClass 对象：

```
stdClass Object
(
    [0] => stdClass Object
        (
            [id1] => Fri Feb 22 00:02:15 +0000 2013
            [id2] => 21312
            [id3] => 13552412
        )

    [1] => stdClass Object
        (
            [id1] => Fri Feb 22 00:02:15 +0000 2013
            [id2] => 21331
            [id3] => 13495842
        )
) 
```

如何访问 ID？我发现了几个类似的问题，但没有一个对我有用。
让我们假设对象存储在`$myVar`.

我试过`$myVar->0->id1`, `$myVar->id1`, `$myVar->[0]->id1`, `$myVar->['0']->id1`，`$myVar[0]->id1`但都没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:33:36.977

就像我在评论中假设的那样，该结构看起来并不打算被视为一个对象。与其在对象上挣扎，不如[`json_decode()`](http://php.net/json-decode)先返回一个关联数组

```
$data = json_decode($json, true);
echo $data[0]['id1']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:29:49.997

您可以使用`$myvar->{'0'}->id1`

或者您可以先将其转换为数组，然后：

```
$arr = (array) $myobj;
$arr[0]->id1; 
```

# java - 需要帮助理解java链表putAfter()方法

> ID：15035910
> 
> 赞同：-4
> 
> 时间：2013-02-23T01:19:27.287
> 
> 标签：java, data-structures, linked-list

链中包含 LinkedList 的元素。注意：这个类的操作管理一个链接和它的邻居之间的关系。LinkedList 负责保存列表的头部和尾部。

```
public class Link<Item> {
    private final Item item;
    private Link<Item> next;
    private Link<Item> prev; 
```

将此链接插入到给定链接之后的列表中。@param before 是给定的链接。

```
public final void putAfter (Link<Item> before) {
    prev = before;
    if (null == before) return;
    next = before.next;
    before.next = this;
    if (null != next) 
        next.prev = this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:43:32.537

您在方法¹的编码中犯了一个基本错误。

您可以通过以下方式找到它：

*   阅读您的代码并在您的脑海中“执行”它......或用铅笔和纸，或
*   在调试器中运行它并单步执行该方法以查看每个语句实际上在做什么。

我们可以告诉您您的错误是什么，但是如果您尝试自己找到问题，您将学会更好地编程。从长远来看，这将使您成为更好的程序员……这就是**我们想要的**²。

* * *

^(1 - 根据您编写的方法的性质，我假设这是某种学习练习。如果不是这样，我的答案会有所不同......)

^(2 - 需要明确的是，我不容忍为他人做作业。从长远来看，这不符合*任何人的利益。*)

# c++ - 在 MATLAB 中解析具有十六进制浮点常量的文件

> ID：15035912
> 
> 赞同：0
> 
> 时间：2013-02-23T01:19:35.340
> 
> 标签：c++, c, matlab, parsing, floating-point

我正在尝试在 MATLAB 中解析包含一些浮点测试向量的文件。

这是文件的一部分：

```
b32+    +1.7FFFFFP127   -1.7FFFFFP127   +0.0P0  
b32+    +1.000000P0 -1.6D0976P9 -1.6CC976P9 
b32+    +1.000000P-126  -1.000000P-126  +0.0P0  
b32+    -1.7FFFFFP127   +1.7FFFFFP127   +0.0P0  
b32-    -1.7FFFFFP127   -1.7FFFFFP127   +0.0P0  
b32-    +1.000000P0 -1.000000P0 +1.000000P1 
b32-    -1.7C3AB6P14    +1.000000P0 -1.7C3CB6P14    
b32-    +1.2F0948P14    +1.000000P0 +1.2F0748P14    
b32-    -1.000000P-126  +1.000000P-126  -1.000000P-125  
b32-    +1.000000P-126  +1.000000P-126  +0.0P0  
b32-    -1.000000P-126  +1.0410ADP-103  -1.0410AEP-103  
b32-    +1.7FFFFFP127   +1.7FFFFFP127   +0.0P0  
b32*    +1.12D2C6P92    -1.000000P0 -1.12D2C6P92    
b32*    +1.7FFFFFP127   -1.000000P0 -1.7FFFFFP127   
b32*    -1.7FFFFFP127   +1.000000P0 -1.7FFFFFP127   
b32*    -1.5FEA32P-51   +1.000000P0 -1.5FEA32P-51   
b32*    -1.000000P-126  +1.000000P0 -1.000000P-126  
b32*    -1.000000P0 +1.000000P0 -1.000000P0 
b32*    +1.000000P0 +1.000000P0 +1.000000P0 
b32*    +1.000000P-126  +1.000000P0 +1.000000P-126  
b32*    +1.000000P-126  +1.7FFFFFP127   +1.7FFFFFP1 
```

由于混合数据类型，基本上我不知道如何解析这个文件。

此文件中显示了三种可能的浮点运算（加法：b32+，减法：b32-，和乘法：b32*）。前两个数字是操作数，最后一个数字是结果。

之后我想将数字格式化为 32 位浮点格式（我可能会弄清楚）。问题是我不知道如何获取“b32+”之类的东西，然后将数字转换为变量，以便将它们转换为标准浮点格式。

我计划为查看符号（+/-）的数字实现一种算法，并根据它设置符号位。查看“。”之间的十六进制。和'P'并将其设置为有效数字。然后取 P 后面的数字作为无偏指数。然后我计划对其他数字重复此过程。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:27:03.817

这实际上是我正在寻找的：

```
c = sscanf(line,'b32%c %c%c.%xP%d %c%c.%xP%d %c%c.%xP%d',[1,inf]); 
```

# node.js - Express 路由器与 Backbone pushstate 冲突

> ID：15035917
> 
> 赞同：4
> 
> 时间：2013-02-23T01:19:55.477
> 
> 标签：node.js, backbone.js, express

Express`/`路线为我的 Backbone 的应用程序提供服务`index.html`。

我`pushstate`在 Backbone 中使用，但是 Backbone 应该处理的路由正在由 express 处理，并给出`404`响应。

如何设置 Express 服务`index.html`但将其他路由委托给 Backbone？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T02:18:30.550

在这种情况下，您有多种选择：

1.  您可以让服务器处理与客户端相同的路由并返回相同的结果。这很难实现，但它提供了一个很好的 url。Github 做到了这一点。

2.  始终返回 index.html 并处理路由客户端。（这有点丑陋且难以维护）

3.  不要使用推送状态。阿门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-10T12:07:02.403

您可以使用 /* 方法。把它作为最后一条路线。这样其他路由（例如任何服务 API 调用）将在匹配 /* 的全部路由之前匹配。这也是 Backbone 处理其路由的方式。

# asp.net - 空闲，控件停止工作

> ID：15035918
> 
> 赞同：1
> 
> 时间：2013-02-23T01:20:17.957
> 
> 标签：asp.net

我对aspx还是陌生的。我使用 Web 表单构建了一个网站。在站点闲置一段时间后，控件停止工作（链接没有响应，等等......）。我不明白为什么。我确实使用会话变量。这是会话过期的事情吗，因为我尝试增加 Session.Timeout，而不是它似乎比默认值或我设置的时间短得多。是否还有其他可能导致问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:25:41.940

这可能发生在以下情况中，其中包括我未列出的其他情况。这些中的每一个都不太可能，因为很可能是您的代码的随机位导致了这种情况。

**最好的选择是从头开始一个新项目，看看该项目是否有同样的问题。**保持基本，如果它有同样的问题，你有一个主机问题，可能需要重新安装 IIS，或者计算机可能会受到损害或死机。

**其他可能性（都不太可能，但可能）**

*   您有一些 HTML 导致控件变得模糊。示例：您可能会意外地将 div 覆盖在按钮上，导致这些按钮看起来不活动，但实际上用户只是单击按钮顶部的不可见 div。
*   您已打开调试并已命中断点，并且您没有告诉代码继续执行或停止调试
*   您有一些禁用所有控件的代码（代码隐藏或客户端）
*   控件实际上处于活动状态，但您没有看到反应，因为您有死锁或无限循环正在占用您的 Web 服务器
*   应用程序池已停止工作。不太可能。
*   IIS 网站已停止。不太可能。
*   应用程序池已决定回收或因不活动而被怀疑。如果您在应用程序池需要很长时间才能回收或重新启动的情况下运行，那么您的控件在重新启动时似乎什么也没做。

# c# - 从 MSBuild xml 获取 ItemGroup 集合及其项目

> ID：15035922
> 
> 赞同：2
> 
> 时间：2013-02-23T01:21:01.673
> 
> 标签：c#, asp.net

我想通过解析 dotnet c# 中的以下 xml 来知道 ItemGroup 的名称。我尝试了各种选择，但无法得到它。基本上我想知道有 ItemGroup ，它可以更多。无论如何我们可以加载这个 xml 并获取 ItemGroups 的列表及其名称。

在这里，我希望 ItemGroup 名称为“cssfile_individual”，cssfile_individual2

```
 <Project xmlns="http://schemas.microsoft.com/developer/MsBuild/2003">

      <UsingTask TaskName="CssCompressorTask" AssemblyFile="Yahoo.Yui.Compressor.Build.MsBuild.dll" />
      <UsingTask TaskName="JavaScriptCompressorTask" AssemblyFile="Yahoo.Yui.Compressor.Build.MsBuild.dll" />

      <PropertyGroup>

      </PropertyGroup>

        <Target Name="Minify">

        <ItemGroup>
          <cssfile_individual Include="test1.css"/>
          <cssfile_individual Include="test2.css"/>
          <cssfile_individual Include="test3.css"/>
          <cssfile_individual Include="test3.css"/>      
        </ItemGroup>

 <ItemGroup>
      <cssfile_individual2 Include="test1.css"/>
      <cssfile_individual2 Include="test2.css"/>
      <cssfile_individual2 Include="test3.css"/>
      <cssfile_individual2 Include="test3.css"/>      
    </ItemGroup>

        </Target>
    </Project> 
```

我尝试如下

```
 XmlDocument objXML = new XmlDocument();
             objXML.Load(path); 
```

然后开始生孩子。

示例 XML 如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/MsBuild/2003">
  <UsingTask TaskName="CompressorTask"
             AssemblyFile="D:\JsCssCompressor\JsCssCompressor\bin\Yahoo.Yui.Compressor.Build.MsBuild.dll" />

  <Target Name="MyTaskTarget">
    <ItemGroup>
      <JavaScriptFiles Include="C:\Work\Purchase_Flow\eBizSol_App\Release\WebSites\Websites\McAfee.Consumer.Website\UIDesign\LegacySite\Scripts\FlexDashboard\AddDevice.js"/>
    </ItemGroup>
    <CompressorTask
        JavaScriptCompressionType="YuiStockCompression"
        JavaScriptFiles="@(JavaScriptFiles)"
        ObfuscateJavaScript="True"
        PreserveAllSemicolons="False"
        DisableOptimizations="Nope"
        EncodingType="Default"
        DeleteJavaScriptFiles="false"
        LineBreakPosition="-1"
        JavaScriptOutputFile="C:\Work\Purchase_Flow\eBizSol_App\Release\WebSites\Websites\McAfee.Consumer.Website\UIDesign\LegacySite\Scripts\FlexDashboard\MAA2.0.js"
        LoggingType="ALittleBit"
        ThreadCulture="en-us"
        IsEvalIgnored="false"
            />
  </Target>
</Project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T04:17:00.003

**使用 LINQ to XML**

```
XDocument objXML = new XDocument();
objXML.Load(path); 
```

**您的 LINQ 代码将如下所示**

```
var ItemGroups = from IG in objXML.Descendants("ItemGroup")
                 select new {
                     Children = LG.Descendants()
                 };

//Print Results
string str = "";

foreach (var IG in ItemGroups){
  str += "Item Group Name: " + IG.Children[0].Name + Environment.NewLine;
  foreach (var IGValue in IG.Children){
    str += "  " + IGValue.Attribute("Include").Value + Environment.NewLine;
  }
} 
```

**参考**

*   LINQ to [XML 后代的 MSDN](http://msdn.microsoft.com/en-us/library/bb360635.aspx)
*   [LINQ 读取 XML](https://stackoverflow.com/questions/670563/linq-to-read-xml)

# 更新

这是一个示例应用程序。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Xml.Linq;

namespace testapp_xdocument_linq
{
    class Program
    {
        static void Main(string[] args)
        {

            XNamespace ns = "http://schemas.microsoft.com/developer/msbuild/2003";
            XDocument X = XDocument.Load("C:\\Users\\Brian\\Documents\\Visual Studio 2012\\Projects\\testapp_xdocument_linq\\testapp_xdocument_linq\\testapp_xdocument_linq.csproj");

            var PropertyGroups = from PG in X.Descendants(ns + "PropertyGroup") select PG;

            //Print Results
            foreach (var element in PropertyGroups)
            {
                Console.WriteLine("First Descendant Name: " + element.Descendants().First().Name + Environment.NewLine);
            }

            Console.ReadLine();
        }
    }
} 
```

这是一个全新的 C# 控制台应用程序。我正在加载项目自己的 .csproj 文件。

我无法针对您的示例 XML 执行此代码。我怀疑这是因为它破坏了[http://schemas.microsoft.com/developer/msbuild/2003](http://schemas.microsoft.com/developer/msbuild/2003)定义的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-08T16:35:32.150

您可以像这样使用[Microsoft.Build](https://www.nuget.org/packages/Microsoft.Build/)：

```
var pathToXml = @"<path>";
var nodes = ProjectRootElement.Open(pathToXml).AllChildren;
var itemGroupElements = nodes.OfType<ProjectItemGroupElement>(); 
```

然后获取每个 Item Group 的第一个子项并获取其名称：

```
foreach (var itemGroup in itemGroupElements)
{
    Console.WriteLine(itemGroup.FirstChild.ElementName);
} 
```

# python - Python，函数改变值

> ID：15035923
> 
> 赞同：1
> 
> 时间：2013-02-23T01:21:09.377
> 
> 标签：python

所以我无法让这个系统正常工作，我不能确定我问的是正确的问题，但这是正在发生的事情以及我想要发生的事情。

```
money = 1
def Stats():
     print
     print "money " + str(money)

def gainM():
     money + 2
     Stats()

if money == 1:
     gainM() 
```

现在当它去印钱时会发生什么，即使我在值上加了 2，值仍然是 1。（代码不是我实际程序的副本，而是显示正在发生的事情的示例。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T01:24:52.420

`money + 2`是无操作的。您实际上必须分配`money`一个新值

```
money = money + 2
# or
money += 2 
```

但是你会发现你得到一个错误 - 你不能分配给函数范围之外的变量。您可以使用以下`global`关键字：

```
global money
money += 2 
```

这将允许您更改`money`函数内的值。

`money`但是，推荐的方法是作为参数传递：

```
def gainM(money):
    money += 2
    Stats()
    return money

if money == 1:
    money = gainM(money) 
```

如果您使用的是第二个选项（您应该使用），您还需要更改您的`Stats`函数，以拥有一个`money`参数。

```
def Stats(money):
     print
     print "money " + str(money) 
```

否则，该函数将打印`1`而不是`3`.

另一个建议 - 使用字符串格式。

```
'money %d' % money  # the old way
'money {}'.format(money)  # the new and recommended way 
```

现在你传入`money`函数`Stats`。

```
def gainM(money):
    money += 2
    Stats(money)
    return money 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T01:23:37.923

您需要将新价值分配给金钱。像这样：

```
money = money + 2 
```

或简写形式：

```
money += 2 
```

此外，如果变量在您的函数之外，则需要将其声明为全局变量（因此它不会创建局部变量）

所以你最终得到：

```
def gainM():
    global money
    money += 2
    Stats() 
```

编辑：只是为了澄清，我并不是说你应该使用全局变量。一般来说，它们是一个坏主意（尽管它们在某些情况下可能有用）。但是，这就是这个特定示例需要工作的内容。但是，您可能想要的是一个具有实例变量的类，该类的方法会修改该类。但是，鉴于您似乎还没有掌握该语言的基础知识，请一步一步来，不要担心我之前的句子中的任何您现在不理解的单词:)

# batch-file - svnlook cat -t 在 Windows 上不起作用（当我创建 .bat 脚本时）

> ID：15035925
> 
> 赞同：1
> 
> 时间：2013-02-23T01:21:22.097
> 
> 标签：batch-file, transactions, cat, pre-commit, svnlook

我正在尝试编写一个 .bat 脚本作为 svn 中的预提交挂钩。但是，当我尝试使用带有 -t 选项的 svnlook cat 命令时，它不起作用。它一直告诉我语法错误。我尝试了所有方法，包括添加引号、更改 -t 选项等。但是，如果我删除 -t 选项，它不会报告语法错误。所以这是错误脚本：

```
SET REPOS=%~1 (I want to remove the quotes of the path)
SET TXN=%2 

"C:\Program Files (x86)\VisualSVN Server\bin\svnlook.exe" cat -t %TXN% %REPOS% myworkingdir/txtIwanttoread 
```

如果我执行以下操作，它们都很好：

```
SET REPOS=%~1 (I want to remove the quotes of the path)
SET TXN=%2 

"C:\Program Files (x86)\VisualSVN Server\bin\svnlook.exe" cat %REPOS% myworkingdir/txtIwanttoread 
```

或者

```
SET REPOS=%~1 (I want to remove the quotes of the path)
SET TXN=%2 

"C:\Program Files (x86)\VisualSVN Server\bin\svnlook.exe" cat -r 28 %REPOS% myworkingdir/txtIwanttoread 
```

有人请帮助我！谢谢！

别管大家，我想我只是自己想通了。我们应该使用 SET TXN=%~2 来消除引号。即使我这样做了，愚蠢的批次也会在变量 TXN 的末尾放置一个空格。这就是导致问题的原因。所以脚本应该如下所示：

```
SET REPOS=%~1 (I want to remove the quotes of the path)
SET TXN=%~2 
SET TXN=%TXN: =% (deblank)

"C:\Program Files (x86)\VisualSVN Server\bin\svnlook.exe" cat -t %TXN% %REPOS% myworkingdir/txtIwanttoread 
```

# c# - 强制浮点数的相对较小的不准确性

> ID：15035928
> 
> 赞同：2
> 
> 时间：2013-02-23T01:21:36.783
> 
> 标签：c#, .net, mono, floating-point

我需要将一个非常小的值添加到浮点值以使其差异微不足道，从而使其无法通过相等性测试。

为了避免精度问题，我选择添加一个相对较小的数字，而不是添加一个非常小的数字。这是一个好的解决方案吗？还是有一种可靠的方法来添加更小的数字？

```
matrix.m00 += matrix.m00 * 0.0000001f;
matrix.m11 += matrix.m11 * 0.0000001f;
matrix.m22 += matrix.m22 * 0.0000001f; 
```

从阅读中我发现最好的解决方案是使用下一个可表示的浮点数。尽管在 C# 中执行此操作的过程要么 a) 需要非托管/不安全代码，要么 b) 使用`BitConverter`速度太慢。所以我认为上述解决方案可行，但我想知道是否有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:28:29.380

您可以将[ulp](http://en.wikipedia.org/wiki/Unit_in_the_last_place)添加到任何双精度数（取决于双精度数）；这是您可以添加或减去的最小数字，它会改变它的值。

*   [计算双打的最后一位单位 (ULP)](https://stackoverflow.com/questions/9485943/calculate-the-unit-in-the-last-place-ulp-for-doubles)
*   [下一个更高/更低的 IEEE 双精度数](https://stackoverflow.com/questions/1245870/next-higher-lower-ieee-double-precision-number)

不过，这些帖子都使用`BitConverter`. 我发现了一篇讨论如何在没有不安全代码的情况下添加 ulp 的帖子`BitConverter`，但是：

[http://realtimemadness.blogspot.com/2012/06/nextafter-in-c-without-allocations-of.html](http://realtimemadness.blogspot.com/2012/06/nextafter-in-c-without-allocations-of.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:26:10.883

当然有一个问题。如果这些值中的任何一个为 0，那么您将准确地添加 0，即根本不修改该值。

你有什么理由不能使用不安全的代码来做到这一点？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T01:41:08.920

您可以添加到浮点数以产生不同数字的最小数字是原始数字的函数，它不是某个常数。调用这个函数`Epsilon(x)`。

`Epsilon(0)`，即可以添加到浮点 0 以产生可区分数字的最小浮点数，可以在静态值中找到`Double.Epsilon`。

不过，即使使用像 1 这样的“大”epsilon 最终也会失败。例如，这在 C# 中返回 true：

```
var big = 10000000000000000.0;
Console.WriteLine(big == (big + 1.0)); 
```

因此，除非您确定您的输入在某个固定的幅度范围内（例如，都接近 0），否则您不能只用一个常数来捏造它。

# fortran - 如果一个数组在循环中被重复分配并且从未在 Fortran 中被释放，会发生什么？

> ID：15035930
> 
> 赞同：0
> 
> 时间：2013-02-23T01:22:20.167
> 
> 标签：fortran

我想知道以下代码对记忆的作用：

```
program A

While (t < large number)
 allocate(a)
 ...

end program 
```

“allocate(a)”是否在每次迭代中指代相同的内存位置，如果未使用程序结束前的 deallocate(a)，是否存在内存泄漏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T01:37:46.030

答案是分配一个已经分配的项是错误的，所以这个代码示例是错误的。

如果项目被声明为`allocatable`. 他们没有注意到该项目是否使用该`pointer`属性声明。在这种情况下，您会发生内存泄漏，因为内存已在早期迭代中保留，但由于指针已被重用，因此不再有办法访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:03:13.503

要回答您的另一个问题，不可能用`allocatable`对象泄漏内存。例如，具有本地范围的可分配数组在到达时被释放，`return`或者`end`（除非它们被保存），可分配类型组件与它们的父级一起自动释放，等等。

在程序结束之前不释放对象并不是真正意义上的不可寻址内存泄漏，因为您的程序在执行期间仍然可以访问它。Valgrind 会将此内存报告为“仍可访问”。您可能认为释放此类对象的方式更好，但您不需要这样做。

# objective-c - 在正确初始化之前使用“extern”全局

> ID：15035932
> 
> 赞同：-1
> 
> 时间：2013-02-23T01:22:34.033
> 
> 标签：objective-c

我正在尝试确定是否有一个优雅的解决方案来解决这个问题。

假设我在某个标头中定义了一个全局变量：

常量.h：

```
extern NSString *someGlobal; 
```

然后我希望在其他类中使用这个全局：

Foo.m

```
NSString *localVariable = someGlobal; 
```

如果我像这样初始化全局，这一切都很好：

常数.m：

```
NSString *someGlobal = @"Some String Literal"; 
```

但是可以说我需要将全局初始化为不是编译时常量的东西。在这种情况下，我通常会这样做：

常数.m：

```
@implementation Constants

+ (void)initialize {
    someGlobal = ... // some non-trivial initialization
}

@end 
```

现在我有一个潜在的问题`Foo.m`。`Constants`如果我尝试使用时没有对类进行引用`someGlobal`，则结果为`nil`. 一种解决方法是：

Foo.m（或在某些应用程序启动代码中）：

```
[Constants class]; 
```

这将触发类的`initialize`方法`Constants`并`someGlobal`正确初始化。只要这是在任何运行时使用之前完成的`someGlobal`，一切都会正常工作。

有没有更好的方法来初始化具有非编译时间常量的外部全局变量，而无需在应用程序启动时调用诸如`[Constants class`] 之类的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T01:32:29.240

Objective-C 中更惯用的方式是使用*单例*而不是多个全局变量。方法如下：

```
@interface Globals
@property (readwrite,nonatomic) NSString *myString;
@property (readwrite,nonatomic) int myInt;
+(Globals*) instance;
@end

+(Globals*) instance {
    static dispatch_once_t once;
    static Globals *inst;
    dispatch_once(&once, ^{
        inst = [[Globals alloc] init];
        inst.myString = @"Some String Literal";
        inst.myInt = 42;
    });
    return inst;
} 
```

现在你可以像这样使用你的全局变量：

```
NSLog(@"Global string: %@", [Globals instance].myString);
NSLog(@"Global string: %d", [Globals instance].myInt); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T01:32:06.727

不，没有更好的办法。从逻辑上讲，如果必须在初始化变量之前执行某些代码，则必须采取措施确保发生这种情况。

您可以安排程序代码的流程，以确保在`Constants`执行任何其他需要它的代码之前初始化该类。例如，通过调整程序中事物的初始化顺序，并按照代码执行的顺序`main()`自上而下地向自己证明它是有效的。但除此之外（在任何情况下都是最安全的事情），您将使用您的技术强制它在使用之前使其有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T01:48:17.377

就像 dasblinkenlight 的回答一样，这可能不是您正在寻找的，但它是另一种方法。

我会创建返回您正在寻找的值的类方法，如下所示：

```
+(NSString *)someConstant {
    static NSString *constant;
    if(constant == nil)
        constant = //your initialization here;
    return constant;
} 
```

然后你需要在哪里使用它只需调用`[Constants someConstant];`

*其他随机想法：* 不是某个编译时值的常量并不是 extern 变量的真正用途，并且此方法可确保每次使用变量时都对其进行初始化。使用常量的类无论如何都必须知道你的类，否则它不会导入它的头文件

# git - 推送时在 bitbucket 上运行脚本

> ID：15035939
> 
> 赞同：1
> 
> 时间：2013-02-23T01:24:17.767
> 
> 标签：git, repository, push, bitbucket

我想运行位于服务器存储库中的脚本。我如何从 bash git 命令行调用该脚本。上面的目的是运行脚本，然后脚本执行一些自定义的测试程序。在推送一些新程序之前，我想在服务器上已有的程序上运行这些测试程序。如果可以做到这一点，请彻底回答您的问题，因为我对 git 完全陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T01:27:10.753

我怀疑你可以在 bitbucket 上做到这一点。您必须在推动之前执行此操作。

当你提交时，你可能想查看 git hooks 以在你的系统上运行它。

见[http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-16T22:19:34.420

自从有人提出并回答后，似乎已经添加了对此的支持。

这是文档：[https ://developer.atlassian.com/server/bitbucket/how-tos/register-maintain-hook-scripts/](https://developer.atlassian.com/server/bitbucket/how-tos/register-maintain-hook-scripts/)

# java - Java字符串替换正则表达式

> ID：15035940
> 
> 赞同：-1
> 
> 时间：2013-02-23T01:24:23.583
> 
> 标签：java, regex, string

我正在动态地在 SQL 中进行一些字符串替换。

```
MySQLString = " a.account=b.account ";
MySQLString = " a.accountnum=b.accountnum "; 
```

现在如果我这样做

```
MySQLString.replaceAll("account", "account_enc"); 
```

结果将是

```
a.account_enc=b.account_enc 
```

（这很好）

但看看第二个结果

```
a.account_enc_num=a.account_enc_num 
```

（这应该是不好的`a.accountnum_enc=b.accountnum_enc`）

请告知我如何使用 Java String Replace 来实现我想要的。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T02:39:18.980

从您的评论中：

> 反正有没有告诉正则表达式只替换一个。**帐户**=b。**帐户**或一个。**账号**=b。**帐号**。我不希望**accountname**被替换为`_enc`

如果我理解正确，您只想将`_enc`部分添加到`account`or `accountnum`。为此，您可以使用

```
MySQLString = MySQLString.replaceAll("\\baccount(num)?\\b", "$0_enc"); 
```

`(num)?`表示这`num`是可选的，因此正则表达式将接受`account`或`accountnum`

`\\b`at start 表示前面不能有字母、数字或“ `_`”，`account`因此它不会接受（影响）诸如 myaccount 或 my_account 之类的内容。

`\\b`最后将阻止`_`account 或 accountnum 后面的其他字母、数字或“”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:28:01.787

很难从这么少的例子中推断出来，但也许你想要的是：

```
MySQLString = MySQLString.replaceAll("account\\w*", "$0_enc"); 
```

它将附加`_enc`到以 . 开头的任何字母、数字和下划线序列`account`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T01:38:42.817

尝试

```
 String s = " a.accountnum=b.accountnum ".replaceAll("(account[^ =]*)", "$1_enc"); 
```

这意味着用找到的序列+“_enc”替换任何以“account”开头的不是''或'='的序列字符。

$1 是对正则表达式中第 1 组的引用；第1组是括号中的表达式（account[^ =]+），即我们的序列

有关详细信息，请参阅[http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

# security - 更改 PyroCMS 的管理员访问 url

> ID：15035941
> 
> 赞同：1
> 
> 时间：2013-02-23T01:24:25.567
> 
> 标签：security, routes, admin, backend, pyrocms

出于安全原因，我想更改 pyrocms 后端的 url。我试图在 routes.php 中更改它，但我得到的只是

```
Fatal error: Class 'CI' not found in /Applications/MAMP/htdocs/pyro2/system/cms/libraries/MX/Modules.php on line 92 
```

这就是我的 routes.php 的样子：

```
$route['3741/help/([a-zA-Z0-9_-]+)']        = 'admin/help/$1';
$route['3741/([a-zA-Z0-9_-]+)/(:any)']      = '$1/admin/$2';
$route['3741/(login|logout)']               = 'admin/$1';
$route['3741/([a-zA-Z0-9_-]+)']            = '$1/admin/index'; 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T22:53:00.997

“通过默默无闻的安全性不是安全性。如果 PyroCMS 管理面板如此容易破解，那么无论你将其重命名为什么，我们都会度过糟糕的一天。” -菲尔鲟鱼

# ruby-on-rails - Elasticsearch / Tire - 展平嵌套对象

> ID：15035943
> 
> 赞同：1
> 
> 时间：2013-02-23T01:24:57.047
> 
> 标签：ruby-on-rails, mapping, elasticsearch, tire

参考[Query DSL Explained Tutorial Slides 14-15](http://www.elasticsearch.org/tutorials/2011/08/28/query-dsl-explained.html)

如何展平嵌套对象？

我有一个命名的模型`Entry`和另一个命名的模型`Category`，它们共享一个 HABTM 关联。目前一切正常，搜索结果似乎正确，但我不知道我的映射是否正确。该教程说，当您展平对象时，文档将如下所示：

```
{
    tweet      => "Perl is GREAT!",
    posted     => "2011-08-15",
    user.name  => "Clinton Gormley",
    user.email => "drtech@cpan.org",
    tags       => ["perl","opinion"],
    posts      => 2,
} 
```

对象`user`被展平。当我查看我的 JSON 文档的来源时，它看起来像这样：

```
{
"title":"First",
"description":"first test",
"categories":
    {"categories_name":"CAP and Using the CAP website"},
"attachment":"VEVTVCE=\n",
"published":true
} 
```

所以，我假设它应该说`categories.categories_name`，但我不知道如何指定，或者是否有必要。这是一些模型代码：

```
class Entry < ActiveRecord::Base

  include Tire::Model::Search
  include Tire::Model::Callbacks

  has_and_belongs_to_many :categories

  mount_uploader :doc, EntryDocUploader

  tire.mapping do
      indexes :title  
      indexes :description
      indexes :categories do
        indexes :categories_name, type: 'string', index: 'not_analyzed'
      end
      indexes :attachment, :type => 'attachment', 
                    :fields => {
                    :title    => { :store => 'yes' },
                    :attachment     => { :term_vector => 'with_positions_offsets', :store => 'yes' }
                    }
  end

 def to_indexed_json
    {
    :title          => title,
    :description    => description,
    :categories     => {:categories_name => cats}, #categories.map { |c| { :categories_name => c.name}}.to_sentence,
    :attachment      => attachment,
    }.to_json
  end

  def self.search(params)
    tire.search(load: true) do
      query { string params[:query], default_operator: "AND" } if params[:query].present?
      filter :term, :published => "true"
    end
  end

  def cats
    categories.map(&:name).to_sentence
  end

end 
```

# eclipse - 使用 MacPorts 安装 Eclipse

> ID：15035949
> 
> 赞同：0
> 
> 时间：2013-02-23T01:25:56.787
> 
> 标签：eclipse, macports

我正在学习如何使用 MacPorts，所以我一直在尝试使用它来安装各种东西。我注意到它有一个 Eclipse 端口，所以我使用它安装了它

```
sudo port install eclipse-ecj32 
```

这安装了端口及其所有依赖项。但我不知道现在该怎么办！我没有看到它安装在我的 LaunchPad 的任何地方。

呜呜……我该怎么办？如何让日食运行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T02:08:17.263

Eclipse[**不能通过 MacPorts 使用**](http://www.macports.org/ports.php?by=category&substr=eclipse)。这可能是因为可以[**为 Mac 下载**](http://www.eclipse.org/downloads/?osType=macosx)本机版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:37:15.290

那不是实际的 IDE，那是字节码编译器......所以它不是一个 GUI 应用程序，它只是我相信的编译器的一个 jar。

# c# - 选择 - 是或否

> ID：15035966
> 
> 赞同：1
> 
> 时间：2013-02-23T01:28:16.463
> 
> 标签：c#, .net, combobox

我正在制作一个是或否`comboBox`标记为“组合框”。在 my 的 Items 属性中`yesnocomboBox`，我将第一项设置为`Yes`，将第二项设置为 No。

当我让我的用户选择是时，它必须显示对其他某些标签和文本框的可见性。我如何编码来做到这一点？

到目前为止，我有这个但它不起作用：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if(yesnocomboBox.SelectedItem = "0"){

    }
} 
```

好的，我选择使用复选框。到目前为止，当用户选中复选框时，这是我的代码：

```
 private void yestochappedlipsCheckBox_CheckedChanged(object sender, EventArgs e)
    {
        if (yestochappedlipsCheckBox.Checked = chapstickbrandsListBox.Visible = true)

            (choosewhatyouwanttobuyLabel.Visible = true); 
```

我如何使它们的两个可见性看起来都是真实的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:08:30.633

如果您太认真而无法将其`comboBox`与`Yes`或`No`选择一起使用。确保设置`DropDownStyle = DropDownList`

```
bool? IsYes;
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox1.SelectedIndex != -1)
    {
        //IsYes = comboBox1.SelectedIndex == 0;
        choosewhatyouwanttobuyLabel.Visible = comboBox1.SelectedIndex == 0;
    }
    else
    {
        IsYes = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T02:06:09.983

我看到你说你正在切换到一个复选框，但是用一个组合来做到这一点会很简单。我认为您在代码中使用了赋值操作，而不是相等比较。通过检查索引而不是项目来尝试以下操作。

此外，作为良好的编码习惯，请保持括号一致。

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if(yesnocomboBox.SelectedIndex == 0)
    {
        label1.Visible = true;
        otherItem.Visible = true;
        anotherItem.Visible = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T02:00:01.730

```
private void yestochappedlipsCheckBox_CheckedChanged(object sender, EventArgs e)
{
    if (yestochappedlipsCheckBox.Checked)
     {
        chapstickbrandsListBox.Visible = true;
        choosewhatyouwanttobuyLabel.Visible = true;
     }
} 
```

# java - 删除 BufferedImage 像素值和/或将它们设置为透明

> ID：15035969
> 
> 赞同：2
> 
> 时间：2013-02-23T01:28:46.170
> 
> 标签：java, polygon, bufferedimage, alpha, pixels

我一直在使用多边形类，并尝试将多边形内的像素值设置为透明，或者如果可能的话将它们全部删除，但是当我试图将值存储为 RGB 时，我遇到了一些困难int 值并且不知道如何通过此方法使像素透明/删除。

除此之外，我还想做同样的事情，但将像素保留在多边形内部并尽可能删除外部的像素，以便只留下多边形内包含的像素。我之前已经搜索过这个，但无济于事。

我确实尝试为此创建一个 SSCCE，以便任何花时间提供帮助的人更容易使用和查看，但是作为我正在创建的一个更大的程序的一部分，事实证明这需要一些时间，但是有一次我有一个工作来更好地证明这个问题，我将编辑这篇文章。

感谢任何人花时间帮助我解决这个问题

下面我有一些代码用于我目前用来分割已指定多边形中包含的像素。这与我将多边形外的像素设置为透明的方式非常相似，仅使用 if 语句参数交换以删除图像的一部分并返回 newImage 而不是保存图像内容，但是它可以完美地工作当我这样做以保存多边形中包含的像素时，由于某种原因它不会保存。

```
 public void saveSegment(int tabNum, BufferedImage img) {
    segmentation = new GUI.Segmentation();
    Polygon p = new Polygon();
    Color pixel;

    p = createPolygon(segmentation);

    int height = img.getHeight();
    int width = img.getWidth();
    newImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);

    //loop through the image to fill the 2d array up with the segmented pixels
    for(int y = 0; y < height; y++) {
        for(int x = 0; x < width; x++) {

            //If the pixel is inside polygon
            if(p.contains(x, y) == true) {
                pixel = new Color(img.getRGB(x, y));
                //set pixel equal to the RGB value of the pixel being looked at
                int r = pixel.getRed(); // red component 0...255
                int g = pixel.getGreen(); // green component 0...255
                int b = pixel.getBlue(); // blue component 0...255
                int a = pixel.getAlpha(); // alpha (transparency) component 0...255
                int col = (a << 24) | (r << 16) | (g << 8) | b;
                newImage.setRGB(x, y, col);
            }
            else {
                pixel = new Color(img.getRGB(x, y));
                int a = 0; // alpha (transparency) component 0...255
                int col = (a << 24);
                newImage.setRGB(x, y, col);
            }
        }
    }
    try {
        //then save as image once all in correct order
        ImageIO.write(newImage, "bmp", new File("saved-Segment.bmp"));
        JOptionPane.showMessageDialog(null, "New image saved successfully");
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T02:07:39.450

一种更简单的方法是使用 Java2D 的裁剪功能：

```
BufferedImage cutHole(BufferedImage image, Polygon holeShape) {

    BufferedImage newImage = new BufferedImage(
        image.getWidth(), image.getHeight(), image.getType());

    Graphics2D g = newImage.createGraphics();

    Rectangle entireImage =
        new Rectangle(image.getWidth(), image.getHeight());

    Area clip = new Area(entireImage);
    clip.subtract(new Area(holeShape));

    g.clip(clip);
    g.drawImage(image, 0, 0, null);

    g.dispose();

    return newImage;
}

BufferedImage clipToPolygon(BufferedImage image, Polygon polygon) {

    BufferedImage newImage = new BufferedImage(
        image.getWidth(), image.getHeight(), image.getType());

    Graphics2D g = newImage.createGraphics();

    g.clip(polygon);
    g.drawImage(image, 0, 0, null);

    g.dispose();

    return newImage;
} 
```

# javascript - onmouseover 抛出对象为空或未定义

> ID：15035974
> 
> 赞同：0
> 
> 时间：2013-02-23T01:30:12.023
> 
> 标签：javascript, dom-events, internet-explorer-9, onmouseover

`onmouseover`不能在 IE9 中工作。控制台抛出此错误：

> SCRIPT5007：无法设置属性“onmouseover”的值：对象为空或未定义

这是我的代码：

```
window.onload = function()
{
var FB;
FB = document.getElementById('facebook_logo');
FB.onmouseover=function(){FB.src='images/facebook.png';};
FB.onmouseout=function(){FB.src='images/facebook_mono.png';};
} 
```

这是正在运行的页面。 [troythobodeaux.com/websites/mytappap/](http://troythibodeaux.com/websites/mytappap/)

当您将鼠标悬停在导航栏中的 Facebook 图标上时，它应该会切换，但在 IE9 中它不起作用。似乎适用于 IE7、8、Firefox 和 Chrome。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T03:47:35.577

我能够在本地重现该错误，发现不包含 CSS 文件时不会发生该错误。然后我发现了导致问题的 CSS 规则。这是这个规则`#nav`：

```
-moz-border-radius: 7px; 
```

我不确定为什么会导致问题，但确实如此。至少我在本地测试时是这样。

# lua - 触发隐藏和显示表格

> ID：15035975
> 
> 赞同：0
> 
> 时间：2013-02-23T01:30:13.613
> 
> 标签：lua, coronasdk

我试图在我的桌子上触发隐藏和表演`local starTable = {}`

```
local starTable = {} -- Set up star table

local function showStarTable()
-- some trigger to show the star table
end
timer.performWithDelay( 500, showStarTable, 1 )

local function hideStarTable()
-- some trigger to hide the star table
end
timer.performWithDelay( 1000, hideStarTable, 1 ) 
```

是否有可能实现这一目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:23:41.883

您的代码将在 1/2 秒后执行函数 showStarTable() 1 次。然后再过 1/2 秒，它会执行一次 hideStarTable()。

像 display.newImageRect() 这样的显示对象是表格，所以如果这是您所指的表格，您可以通过更改对象的 .alpha 属性或其可见性（.isVisible = true 或 .isVisible = false 来显示/隐藏它们）。然而，表格本身只是信息的容器，通用表格是不可显示的。它可以包含单个显示对象或多个。

如果表格具有可显示的内容，您将负责在显示/隐藏功能中显示/隐藏表格的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:23:16.480

为了配合第一个答案，这里有一个例子：

```
local starTable = {}
local star1  = <display object>

starTable:insert(star1)

local function showStarTable()
    starTable.alpha = 1
end
timer.performWithDelay( 500, showStarTable, 1 )

local function hideStarTable()
    starTable.alpha = 0
end
timer.performWithDelay( 1000, hideStarTable, 1 ) 
```

或者你想坚持一张实际的桌子。并且没有看到实际插入到您的starTable中的内容，您可以尝试：

```
local starTable = {}

local star  = <display object>
starTable[1] = star

star  = <display object>
starTable[2] = star

star  = <display object>
starTable[3] = star

local function showStarTable()
    for i=1, #starTable do
        starTable[i].star.alpha = 1
    end
end
timer.performWithDelay( 500, showStarTable, 1 )

local function hideStarTable()
    for i=1, #starTable do
        starTable[i].star.alpha = 0
    end
end
timer.performWithDelay( 1000, hideStarTable, 1 ) 
```

但是，第一个选项更好，如果它适用于您的程序。

# function - Postgres 使用记录类型函数创建视图

> ID：15035977
> 
> 赞同：1
> 
> 时间：2013-02-23T01:30:38.600
> 
> 标签：function, postgresql, record, plpgsql

我有这个复杂的查询，其中用户定义的函数`conta_relatos()`作为选择语句运行得很好。但是当我尝试使用相同的指令创建视图时它不起作用。Postgres 告诉我“conta_relatos”列有伪类型记录。这个函数，`conta_relatos()`返回一个记录类型变量。
[编辑添加：]
返回类型是前面问题中定义的众所周知的复合类型：
[Postgres Function End Loop and return Error](https://stackoverflow.com/questions/15030722/postgres-function-end-lop-and-return-error)

以下是查询：

```
CREATE OR REPLACE VIEW "Sumario" AS 
SELECT "Aspectos"."ID" AS "Aspecto Normativo ID", 
    "Aspectos"."Aspecto" AS "Aspecto Normativo", 
    "Fatores"."ID" AS "Fator Normativo ID", 
    "Fatores"."Fator" AS "Fator Normativo", "Diagnostico"."Vinculo_Final", 
    "Fatores_1"."ID" AS "Fator Determinativo ID", 
    "Fatores_1"."Fator" AS "Fator Determinativo", 
    "Aspectos_1"."ID" AS "Aspecto Determinativo ID", 
    "Aspectos_1"."Aspecto" AS "Aspecto Determinativo", 
    count("Itens"."ID") AS "No Itens", 
    conta_relatos("Fatores"."ID", "Fatores_1"."ID")
FROM  
    "Diagnostico"
JOIN ("Aspectos" "Aspectos_1"
JOIN ("Fontes"
JOIN "Itens" ON "Fontes"."ID" = "Itens"."Fonte"
JOIN ("Fatores" "Fatores_1"
JOIN ("Aspectos"
JOIN ("Vinculos"
JOIN "Fatores" ON "Vinculos"."Fator_Normativo" = "Fatores"."ID") ON "Aspectos"."ID" = "Fatores"."Aspecto" AND "Aspectos"."ID" = "Fatores"."Aspecto") ON "Fatores_1"."ID" = "Vinculos"."Fator_Determinativo") ON "Itens"."ID" = "Vinculos"."Item") ON "Aspectos_1"."ID" = "Fatores_1"."Aspecto") ON "Diagnostico"."ID" = "Vinculos"."Diagnostico_ID"
GROUP BY "Aspectos"."ID", "Aspectos"."Aspecto", "Fatores"."ID", "Fatores"."Fator", "Diagnostico"."Vinculo_Final", "Fatores_1"."ID", "Fatores_1"."Fator", "Aspectos_1"."ID", "Aspectos_1"."Aspecto"
ORDER BY "Aspectos"."ID", "Aspectos_1"."ID", "Fatores"."Fator", "Fatores_1"."Fator"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:45:13.550

仔细检查：您只需要像这样拆分复合返回类型：

```
CREATE OR REPLACE VIEW "Sumario" AS 
SELECT ...
 **(**conta_relatos("Fatores"."ID", "Fatores_1"."ID")**).***
FROM ... 
```

[手册中有关访问复合类型的详细信息。](http://www.postgresql.org/docs/current/interactive/rowtypes.html#AEN7304)

顺便说一句：除非您确切知道自己在做什么，否则我建议不要在您的 JOIN 中使用括号。您拥有它的方式是强制执行一个特定的执行计划。很有可能，它不是最好的。

* * *

### 第一种方法误解了错误消息

当您定义一个函数时`RETURNS record`（我尽可能避免），您必须在每次调用时提供一个列定义列表，例如：

```
SELECT * FROM conta_relatos(1,2) AS f(col1 int, col2 text, ...) 
```

我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)：

> 如果函数已定义为返回记录数据类型，则必须存在别名或关键字 AS，后跟格式为 ( column_name data_type [, ... ] ) 的列定义列表。列定义列表必须与函数返回的列的实际数量和类型相匹配。

干净的解决方案是更改您的函数以返回*众所周知的类型*而不是匿名记录。有多种方法可以解决这个问题，具体取决于具体情况。如果您在重写函数时遇到问题，请打开另一个问题。

# php - 尽管定义了变量，但为空 $_GET 数组

> ID：15035979
> 
> 赞同：0
> 
> 时间：2013-02-23T01:30:49.897
> 
> 标签：php

我只是在我的本地主机服务器上拼凑了一个网站的开始——Apache、MYSQL、MYPHPADMIN。在我尝试使用 $_GET 动态链接导航之前，一切似乎都运行良好。这是 index.php 中的代码：

```
<?php include('Config/setup.php') ?>
<?php

if ($_GET['page'] == ''){
$pg = 'home';
} else {
$pg =$_GET['page']; 
}

?>

<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>FTS</title>

<link rel="stylesheet" type="text/css" href="css/Styles.css"/>

</head>

<body>
 <div class ="header temp_Block">
      <?php include('templates/header.php');?>
</div>

<div class ="main_nav temp_Block">
    <?php include('templates/main_nav.php');?>
</div>
<div id ="Content">
    <div class ="main_content temp_Block ">
        <?php
        include ('content/'.$pg.'php');

        ?>

    </div>
</div>     
    <div class = "footer temp_Block">
    <?php include('templates/footer.php');?>
    </div>

</body>

</html> 
```

当我检查我的链接以查看是否能够链接到我的各个页面时——主页、服务、关于我们等。它给了我这个错误：

```
Notice: Undefined index: page in C:\xampp\htdocs\test\index.php on line 6

Warning: include(content//content/homephp): failed to open stream:
No such file or directory in C:\xampp\htdocs\test\index.php on line 35

Warning: include(): Failed opening 'content//content/homephp' for inclusion
(include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\test\index.php on line 35 
```

所以我运行它来看看 $_GET 发生了什么：

```
var_dump($_GET);
exit; 
```

数组为空。它什么也没显示。我以前使用过这种方法，但不同之处在于我在托管站点上。我检查了我是否有权限问题，但我检查了 apache.conf 并没有出现任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:33:51.497

先检查变量是否设置，*再*检查是否有相关值：

```
if (isset($_GET['page']) && $_GET['page'] !== ''){
    $page = $_GET['page'];
} else {
    $page = 'home';
} 
```

不过要小心[目录遍历攻击](http://en.wikipedia.org/wiki/Directory_traversal_attack)；因为您的代码会让攻击者查看任意文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:34:20.700

你忘记了“。” 在文件名中（就在扩展名之前）。在代码部分之后：

```
if ($_GET['page'] == ''){
  $pg = 'home';
} else {
  $pg =$_GET['page']; 
} 
```

添加以下内容：

```
$pg = $pg . "."; 
```

或者，更改以下行：

```
include ('content/'.$pg.'php'); 
```

至：

```
include ('content/'.$pg.'.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T09:08:32.130

兄弟，我想你来自 TheDigiCraft。猜猜我也被困在那里并在 10 分钟前问了这个问题。在这里（[https://stackoverflow.com/questions/17501271/i-have-error-in-coding-plz-fix-it-for-me](https://stackoverflow.com/questions/17501271/i-have-error-in-coding-plz-fix-it-for-me)）。只需用它替换 if else 代码就可以了:)

```
<?php

     echo"the page is now " ;

     if(isset($_GET['page']) == '')

         {
            echo "home";
         }
     else
         {
            echo $_GET['page'];
         } 
```

## ?>

顺便说一句，我的代码是这样的，它没有错误。我也在学习那门课程：D。

```
<?php
// setup code here
include('config/setup.php');

?>

<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title> Dynamic Website Project </title>
<link rel="stylesheet" type="text/css" href="css/styles.css">

</head>
<body>

<div class="header temp_block">
    <?php include('template/header.php'); ?>
</div>

<div class="nav_menu temp_block">

<?php include('template/main_nav.php'); ?>

</div>

<div class="content temp_block">
    <?php

     echo"the page is now " ;

     if(isset($_GET['page']) == '')

         {
            echo "home";
         }
     else
         {
            echo $_GET['page'];
         }
    ?>
</div>

<div class="footer temp_block">

<?php include('template/footer.php'); ?>

</div>

</body>
</html> 
```

# javascript - 防止默认 keyCode 38 和 40

> ID：15035982
> 
> 赞同：1
> 
> 时间：2013-02-23T01:31:47.560
> 
> 标签：javascript, jquery

当我按下向上和向下按钮时，如何防止页面滚动。键码 38 和 40。我试过了

```
$(window).on("click", function(event){
  var keyCode = event.which;
  if(keyCode == 38 || keyCode == 40){
    preventDefault();
  }
}); 
```

但这似乎并不能阻止 IE 中的页面滚动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T01:32:51.817

你必须打电话`event.preventDefault()`，不只是`preventDefault()`。你需要处理`keydown`事件，而不是`click`. 在`document`or`window`对象上，可能；不是`foo`。

# android - 直接打开谷歌地图原生应用

> ID：15035984
> 
> 赞同：0
> 
> 时间：2013-02-23T01:32:05.597
> 
> 标签：android

我有点需要你的帮助。所以我有这个数据经度= 6.97425 纬度= -107.63164，我从数据库中检索到，我希望我的应用程序直接打开谷歌地图本机应用程序并向我显示该纬度和经度的位置。我不知道该怎么做。也许你可以帮助我，谢谢

原谅我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T01:39:52.037

尝试阅读此[线程](https://stackoverflow.com/questions/8132069/calling-google-map-using-intent)。您基本上必须为谷歌地图应用程序启动一个具有相应操作的意图。

# php - 端口 80 或 443 上的 TOR 网络 - 共享服务器上的 TOR

> ID：15035986
> 
> 赞同：1
> 
> 时间：2013-02-23T01:32:16.777
> 
> 标签：php, curl, port, tor, screen-scraping

我想使用来自 TOR 网络后面的共享服务器（仅端口 80 和 443 开放）的 PHP cURL 进行屏幕抓取。我尝试下面的代码并从我的服务器收到“拒绝访问”错误，因为端口 8118 和 9050 已关闭。我联系了支持，他们说这是不可能的。我对此表示怀疑，但一直在寻找，找不到简单的解决方案。有什么想法吗？

```
 <?php
$fh = fopen('curldebug.txt','w') or die($php_errormsg);
// Initialize cURL
$ch = curl_init();

// Set the website you would like to scrape
curl_setopt($ch, CURLOPT_URL, "http://www.fixitts.com/whatismyip.php");
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1; rv:18.0) Gecko/20100101 Firefox/18.0');
curl_setopt($ch, CURLOPT_REFERER, 'http://www.fixitts.com');
curl_setopt($ch, CURLOPT_PROXY, '127.0.0.1:8118');

curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_STDERR, $fh);
 // Set cURL to return the results into a PHP variable
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// This executes the cURL request and places the results into a variable.
$curlResults= curl_exec($ch);

        if(curl_errno($ch))
        {
            echo 'Curl error: ' . curl_error($ch);
        }

        $info = curl_getinfo($ch);
        print_r ($info);

// Close curl
curl_close($ch);
fclose($fh) or die($php_errormsg);
// Echo the results to the screen>
echo $curlResults;

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T01:59:39.077

您的虚拟主机的支持可能是正确的。

附带说明一下，通过 TOR 进行屏幕抓取是一件非常反社会的事情。这是许多网站阻止来自已知 TOR 出口节点的访问的很大一部分原因。请停下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T02:04:27.857

我假设你有一个本地代理在 8118（Polipo 或 Privoxy）上监听。

端口 8118 和 9050 是 TOR 和 Polipo 在 localhost (127.0.0.1) 上默认使用的端口。
本地主机端口没有被共享服务器阻止 - 127.0.0.1 是您的 PC。如果它们被阻止，则您的 PC（防火墙）上有一些东西在这样做。

此外，您可以告诉 TOR 和 Polipo（或其他）在其配置文件中使用不同的端口。在上面的代码以及 Polipo/Privoxy 上将 8118 更改为其他内容。

共享服务器是否限制为 80 和 443 无关紧要。这就是 TOR 发送您的东西所需的全部内容。TOR 出口服务器解开它得到的任何东西，并查看它应该去的端口（原始目标端口）。

共享服务器可能会阻止端口 80 和 443 与已知 TOR 服务器的连接。打开浏览器，将代理设置为 SOCKS127.0.0.1 端口 9050，看看是否可以浏览网页。如果这不起作用，你可能有你的答案。您可以查看 TOR 文档。我记得他们在那里告诉你如何判断 TOR 是否被阻止。

# windows - iMacros - 此 TAG 失败（未找到输入字段）

> ID：15035987
> 
> 赞同：0
> 
> 时间：2013-02-23T01:32:28.267
> 
> 标签：windows, firefox, imacros, data-extraction

这是我要选择的输入字段（来自网站）

```
<input class="inputtext" maxlength="100" aria-label="Search" 
placeholder="Search Your Friends" autocomplete="off" 
aria-autocomplete="list" aria-expanded="false" aria-owns=
"typeahead_list_u_jsonp_6_3" role="combobox" spellcheck="false" 
value="Search" type="text"> 
```

我需要标记它，然后对要提取的 URL 进行相对搜索。（我不需要在输入字段中输入任何内容。） TAG 失败了，我得到的是页面上的第一个 URL，而不是输入字段之后的第一个 URL。（上面的输入字段是我需要抓取的链接之前唯一容易选择的项目。）

这是失败的代码：

```
TAG POS=1 TYPE=INPUT:TEXT ATTR=NAME:*  
TAG POS=R1 TYPE=A ATTR=HREF:* EXTRACT=HREF 
```

iMacros v. 7.6.0.2 for Firefox Windows XP SP3

（不幸的是，iMacros 官方论坛已经死了。所以我把这个带到了这里。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:20:33.677

您只能标记您可以使用的东西，例如表单、字段和链接。
见：[http ://wiki.imacros.net/TAG](http://wiki.imacros.net/TAG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:03:23.343

那是因为您的代码是通用的，请尝试：

```
TAG POS=1 TYPE=INPUT:TEXT ATTR=class:inputtext 
```

# ruby-on-rails - 在 rails 中显示相关数据（user_id、email 等）

> ID：15035989
> 
> 赞同：0
> 
> 时间：2013-02-23T01:32:38.920
> 
> 标签：ruby-on-rails, ruby, views, models, erb

我发现了一些关于此的帖子，但到目前为止，我尝试使用的所有内容都没有为我完成。我对 Rails 还是很陌生——我基本上对 HTML 和 CSS 很熟悉，但是我学习了 Skillshare Rails 课程，并且正在努力将它与 Railstutorial 书结合起来。所以请温柔一点。

我有一个基本的应用程序，用户可以创建“项目”。我用脚手架架起“物品”。它们也可能是微博。但是对于脚手架创建的视图，我想显示用户的电子邮件地址而不是电子邮件地址。我将在模型、视图和控制器中进行哪些更改？这就是我所拥有的。

控制器：

```
def email
  @email = @item.user_id.email
end 
```

看法：

```
<td><%= item.content %></td>
<td><%= @email %></td>
<td><%= link_to 'Show', item %></td>
<td><%= link_to 'Edit', edit_item_path(item) %></td>
<td><%= link_to 'Destroy', item, confirm: 'Are you sure?', method: :delete %></td> 
```

商品型号：

```
class Item < ActiveRecord::Base
  attr_accessible :content, :user_id
  validates :content, :length => { :maximum => 140 }
  belongs_to :user
end 
```

用户模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  has_many :items
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T11:37:32.667

有三种方法。

首先，我感觉最好的方式。根据您的要求是简单的委派。

```
class Item < ActiveRecord::Base
  attr_accessible :content, :user_id
  validates :content, :length => { :maximum => 140 }
  belongs_to :user

  delegate :email, to: :user
end 
```

在视图中，

简单地打电话。

```
<td><%= item.email %></td> 
```

就像@cluster 说的

你可以在控制器中使用

```
@email = @item.user.email 
```

或者

将代码移至项目模型

```
class Item < ActiveRecord::Base
  attr_accessible :content, :user_id
  validates :content, :length => { :maximum => 140 }
  belongs_to :user

  def user_email
    user.email
  end
end 
```

在意见中，

```
<td><%= item.user_email %></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T03:37:07.060

在您的控制器中，您不想添加其他方法，因为这些方法是用户应该能够通过 URL 访问的“操作”。（在某些情况下，例如在过滤器之前，您会这样做，但这超出了这里的范围）。

您可以在控制器操作中执行此操作

```
class ItemsController
  def show
    @item = Item.find params[:id]
    @email = @item.user.email
  end
end 
```

或者您可以简单地调用`@item.user.email`视图本身。

# javascript - JQuery 中 document.getElementbyId 的等价物是什么？

> ID：15035992
> 
> 赞同：5
> 
> 时间：2013-02-23T01:32:46.433
> 
> 标签：javascript, jquery

```
map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions); 
```

但这不起作用：

```
map = new google.maps.Map($('#map_canvas'), mapOptions); 
```

我正在寻找类似...

```
$('#map_canvas').toElementBlahblah? 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T01:33:41.257

[`.get(index)`](http://api.jquery.com/get/)

```
$('#map_canvas').get(0)
$('#map_canvas')[0] 
```

* * *

虽然，`document.getElementById`显然具有更好的性能 - 它是 jQuery 核心在查询 DOM 以获取单个 ID 选择器时内部使用的方法。

因此，您正在构建一个 jQuery 对象，然后将其丢弃。由您决定是否在带宽中节省一些字节或在执行时间中节省微秒。

老实说，差别不大。当不关心性能并且我懒得打字时，我使用 jQuery 版本`document.getElementById`，尽管在这种情况下 vanilla JS 更合乎逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T01:34:36.440

您可以使用以下[`.get()`方法](http://api.jquery.com/get/)：

```
 $('#map_canvas').get(0);
 $('#map_canvas')[0]; // or direct property access 
```

但是，我认为没有理由不使用`document.getElementById`.

# android - onResume() 仅在应用程序通过启动器图标启动时有效，而不是在安装时按打开按钮

> ID：15035993
> 
> 赞同：2
> 
> 时间：2013-02-23T01:32:47.523
> 
> 标签：android, android-activity, minimize, home-button

我正在使用`Min-TargetSDK=3`and开发一个 android 应用程序`TargetSDK=15`。以前我也问过有关我的应用程序在按下主页按钮时没有被最小化到最近的应用程序的问题。每当我启动我的应用程序时，它都会从登录页面开始，而不是显示上次查看的屏幕。但直到现在我才找到解决方案。

当用户通过按下主页按钮从应用程序切换到其他任务时，我设法以某种方式带来了上次查看的活动。仍然应用程序没有被最小化到最近的应用程序。

现在面临一些不同的问题：

**场景 1 - 好的：**

1.  从复制到 sd 卡的 apk 文件安装我的应用程序
2.  安装后点击**完成**。
3.  然后通过单击启动器图标打开它。

在这种情况下，如果用户在使用应用程序时单击主页按钮并使用启动器图标重新打开应用程序，**则会显示**最后查看的屏幕。但仍然**没有**在最近的应用程序列表下列出应用程序。

**场景 2 - 有问题：**

1.  从复制到 sd 卡的 apk 文件安装我的应用程序
2.  安装完成后点击“打开”按钮打开。

在这种情况下，如果用户在使用应用程序时单击主页按钮并使用启动器图标重新打开应用程序，最后查看的屏幕**不会显示**。相反，它从登录页面开始。也未在“最近的应用程序”列表下列出的应用程序。这是我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.net.elderlyhealth"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>

<uses-permission android:name="android.permission.READ_PHONE_STATE"/>

<uses-permission android:name="android.permission.CALL_PHONE"/>

<uses-sdk android:minSdkVersion="3"
    android:targetSdkVersion="15"/> 

<application 
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".ElderlyActivity" android:alwaysRetainTaskState="true"
        android:label="@string/title_activity_elderly" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity  android:name=".ElderlyHealthAct" />

    <activity android:name=".account.LoginPage"  />
    <activity android:name=".account.SignupPage" />
    <activity  android:name=".account.RoleNavigator" />
    <activity  android:name=".account.CreateRoleActivity"  />
    <activity  android:name=".account.RoleAdmin"/>
    <receiver   android:name=".server.AlarmReceiver"></receiver>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:16:06.987

我认为这适用于您的第二种情况。您可以签`FLAG_ACTIVITY_BROUGHT_TO_FRONT`入`onCreate()`您的第一个活动的标志，然后在设置时完成。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != 0) {
    // Here activity is brought to front, not created,
    // so finishing this will get you to the last viewed activity
finish();
return;
    }

// Regular code.
} 
```

# python - 如何在鼻子下进行进口的“提前退货”？

> ID：15035996
> 
> 赞同：2
> 
> 时间：2013-02-23T01:32:52.283
> 
> 标签：python, unit-testing, nose, unittest2

我正在为一个大型 Python 项目策划大量单元测试。我们使用[鼻子](https://nose.readthedocs.org/en/latest/)来做我们的测试发现和执行。我有一些测试文件确实不应该在某些条件下运行。例如，也许我有一个永远不应该在 Windows 上运行的测试模块（仅在 Mac 和 Linux 上）。

以下是我使用过的一些解决方案：

1.  使用 Nose 优秀的[属性插件](https://nose.readthedocs.org/en/latest/plugins/attrib.html)标记测试方法或类。
2.  在测试方法或类上使用[unittest.skipIf()](http://docs.python.org/2/library/unittest.html#unittest.skipIf)
3.  例如，使用[鼻子的模式排除](https://nose.readthedocs.org/en/latest/usage.html#cmdoption-I)来跳过`windows`名称中的文件。

我对 1 和 2 的抱怨是这些迫使我导入模块，这至少是浪费时间，并且如果存在依赖于平台的导入，可能会导致错误。我不喜欢#3，因为我觉得它很脆弱，并且在阅读测试用例时不容易看出它会被跳过。这三个似乎都过度依赖于测试和测试运行器之间的交互，我想要一些只是在测试中的东西。

我想在测试模块的顶部执行以下操作：

```
"""This module should not be run on Windows"""
import platform
if platform.system() == 'Windows':
    <stop reading this module.  nothing to see here>

# do the tests. 
```

如何告诉 Python 或 Nose 停止读取模块，但没有错误？我想我正在寻找相当于提前退货的进口商品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:42:40.740

从模块执行中提早返回的能力[之前已经提出过，](http://mail.python.org/pipermail/python-ideas/2012-April/014882.html)但它收到了一些反对票，并且该功能没有添加到语言中。

您可以阅读邮件列表线程，但通常认为必须将模块的大部分缩进额外级别的问题并不是添加此“返回”功能的充分理由。有人说几乎所有模块中的代码都应该在函数和类中，几乎没有模块级代码会受到这个问题的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:28:24.780

在 Nose 和 unittest 下，SkipTest 异常被特殊处理——它不是失败。因此，以下代码将停止执​​行，并且不会向 unittest 运行器报告错误：

```
import unittest
import platform
if platform.system() == 'Windows':
  raise unittest.case.SkipTest("The rest of this code will not be run on Windows.") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T02:50:14.873

`ImportError`你可以用那个信息加注。调用者可能会以未捕获的异常退出，解释显示该错误，但`ImportError`如果需要，它可以捕获。

# jsoup - Railo instanceof 不使用 Jsoup

> ID：15035999
> 
> 赞同：0
> 
> 时间：2013-02-23T01:33:30.600
> 
> 标签：jsoup, railo, cfml

我正在运行一个带有 tomcat 和 Railo 的 linux 服务器。如果我尝试这个简单的代码：

```
check = "";
jSoupClass = createObject( "java", "org.jsoup.Jsoup" );

if(IsInstanceOf(jSoupClass,"org.jsoup.Jsoup")){
 check = "ok";      
}

writeDump(check ); 
```

如果我运行这个简单的代码，var`check`总是空的。我用许多 java 类运行这个简单的测试，并且一切正常。

在我的应用程序中，我使用 jsoup 没有问题，但似乎无法运行这个简单的检查。我用它来检查文档的文档类型：

```
jSoupClass = createObject( "java", "org.jsoup.Jsoup" );
dom = jSoupClass.connect( "http://www.mutuiinpdap.net" ).userAgent("Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6").timeout(10000).execute();

doc = dom.parse();
nods = doc.childNodes();
doctype = {};
for (key in nods) {
  if(IsInstanceOf(key,"org.jsoup.nodes.DocumentType")){
doctype.string = key.toString();
switch(key) {
 case "<!DOCTYPE html>":
      doctype.declarations = "Html 5";
  break;
     case '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">':
  doctype.declarations = "XHTML transitional";
  break;
    }
   }
  }

writeDump(doctype); 
```

有没有办法解决这个问题？我可以使用不同的代码来检查哪个 doctype 是文档吗？

此代码在我的本地 Windows 机器上完美运行。但是在我安装了 Ubuntu 的生产服务器上中断了......

[编辑]

我也用这段代码测试过：

```
public function getDoctype(){

 myClass = {};

jSoupClass = createObject( "java", "org.jsoup.Jsoup" );
whois = createObject("java", "org.apache.commons.net.whois.WhoisClient");

myClass.jj = "ko";
myClass.ww = "ko";

writeDump(jSoupClass);  
writeDump(whois);   

if(IsInstanceOf(jSoupClass,"org.jsoup.Jsoup")){
    myClass.jj = "ok";      
}

if(IsInstanceOf(whois,"org.apache.commons.net.whois.WhoisClient")){
    myClass.ww = "ok";      
}

return myClass; 
```

}

我会得到一个 myClass.jj = "ko"; 和 myClass.ww = "ok";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T16:14:36.600

您可以测试`object.getClass().getName() EQ 'org.jsoup.Jsoup'`该课程是否符合您的预期。

即使这可以解决您的代码问题，我仍然会推荐我发布的其他答案来确定文档类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T12:57:15.273

要使 DOCTYPE 有效，它必须是文档中的第一件事，因此无需遍历节点检查实例。

您所要做的就是检查第一个标记 - 即第一个`>`字符之前的 HTML 字符串的内容（或者，对于某些 XHTML，在 first 和 second 之间`>`）

您也不需要（或想要）一长串完整的 doctype 声明。除了 HTML 5，它们都遵循相同的模式（即具有 DTD），因此您可以简单地从 doctype 中提取名称。

我已经将该逻辑包装到下面发布的函数中 - 可能需要一些调整或额外的工作来执行您的需要，但它已经过简单的测试并且可以工作。希望这一切都是不言自明的，但如果有任何部分不是，请告诉我。

```
jSoupClass = createObject( "java" , "org.jsoup.Jsoup" , "./jsoup-1.7.1.jar" );

doc = jSoupClass
    .connect( "http://www.mutuiinpdap.net" )
    .userAgent("Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6")
    .timeout(10000)
    .execute()
    ;

doctype = determineDoctype( doc.body() );

writeDump(doctype);

function determineDoctype( Html )
{

    var FirstTag = trim(ListFirst(Arguments.Html,'>'));

    if ( LCase(trim(FirstTag)) EQ '<!doctype html' )
        return 'Html 5';

    if ( Left(FirstTag,5) EQ '<?xml' )
        FirstTag = trim(ListGetAt(Arguments.Html,2,'>'));

    if ( Left(LCase(FirstTag),14) NEQ '<!doctype html' )
        return 'Non-HTML doctype [#FirstTag#]' ;

    var dtd = rematch('-//W3C//DTD [^/]+',FirstTag);

    if ( ArrayLen(dtd) )
        return ListRest(dtd[1],' ');

    return 'Unknown Doctype [#FirstTag#]';
} 
```