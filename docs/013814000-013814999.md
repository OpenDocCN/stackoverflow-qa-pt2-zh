# StackOverflow 问答 13814000-13814999

# php - PyroCMS：如何修复

> ID：13814000
> 
> 赞同：2
> 
> 时间：2012-12-11T05:09:59.663
> 
> 标签：php, pyrocms

我似乎无法在页面布局中工作。即使我直接复制并粘贴文档中的代码（[http://docs.pyrocms.com/2.1/manual/concepts/organization](http://docs.pyrocms.com/2.1/manual/concepts/organization)）。

```
<h1>{{ page:title }}</h1>
<div class="one_third">{{ page:body }}</div>
<div class="two_thirds">{{ widgets:instance id="1"}}</div> 
```

信息从小部件和页面都显示，但它们是堆叠的，而不是单独的列。

[http://tinypic.com/r/2hfq8er/6](http://tinypic.com/r/2hfq8er/6) <---截图

我记得在我测试的最后一个 pyrocms 网站的布局中成功使用了标签，但不知道这次我做错了什么。谢谢你的帮助。

注意：我还尝试在页面本身的 html 中使用 div 类，尽管页面按应有的方式拆分，但内容仍然堆叠在其中一列中。尽管在后一栏的开始和结束之间列出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:20:40.913

我相信这已经在 PyroCMS 论坛上得到了回答，但是为了在这里回答问题的记录：

这些类是人们对页面布局所做的那种事情的例子。

没有提供默认的“网格系统”。如果您想使用一个，欢迎您去下载您有兴趣使用的任何其他网格系统的 Twitter Bootstrap。

# c++ - 重载流操作符问题

> ID：13814007
> 
> 赞同：1
> 
> 时间：2012-12-11T05:11:08.853
> 
> 标签：c++

我在通过运算符重载打印时遇到问题。目前我正在创建一个数据库，其中包含一个 Item 类作为基类，Item 的派生类是 Movie、Book 和 MusicAlbum。以下是如何将一本书插入图书馆的示例：

```
Item    *item;

cout << ">>>>>> adding items to library:" << endl << endl;
item = library->addBook("The Curious Incident of the Dog in the Night-Time",  "Mark Haddon", 240);
if (item != NULL) {
    library->addKeywordsForItem(item, 2, "autism", "Asperger's Syndrome");
    cout << item << endl;
    } 
```

其中addBook是类库中定义的函数，还有addKeywordsForItem。我的问题是： cout << item << endl;

我知道我需要重载流 << 运算符才能做到这一点，但我的主要功能（上面的代码来自哪里）包括用于添加电影和音乐专辑的类似功能。我用于重载流操作符的函数位于我的基类中，并接收一个基类指针作为参数，如下所示：

```
ostream& operator<<(ostream& out, const Item* item); 
```

对于书，我需要打印标题、作者、页数和关键字。对于电影和音乐专辑，也有一些特定的东西可以打印出来。

如何仅使用基类中重载流式运算符的一个函数来打印我需要的任何信息？不管基类指针是否指向 Book、Movie 或 MusicAlbum 的实例？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:20:54.800

通常是有一个转发到虚函数的全局重载：

```
struct Base {    
    virtual std::ostream &print(std::ostream &os) const { 
        return os << base_data;
    }
};

struct Derived : Base {     
    virtual std::ostream &print(std::ostream *os) const { 
       return os << derived_data;
    }
};

std::ostream &operator<<(std::ostream &os, base const &b) { 
    return b.print(os);
} 
```

每个派生类都将`print`根据需要重写以将自身打印到流上。由于`operator<<`采用了`Base`引用，它可以使用普通的虚拟分派来`print`根据它接收到的对象的动态类型转发到正确类中的实现。

# javascript - 当我将鼠标悬停在另一个 div 上时，更改带有效果的标题图像

> ID：13814012
> 
> 赞同：0
> 
> 时间：2012-12-11T05:11:33.273
> 
> 标签：javascript, jquery, html, css

我在一个 div 和另一个 div 中有标题图像，标题 div 下面有一些内容。当我将内容 div 悬停时，标题图像应更改为具有某种效果的另一个图像。这可以用css本身完成还是需要jquery？..谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:29:20.303

如果您在更改时需要效果，我们需要 javascript 或 jquery。

在这里，我在 animate() 上做了一个简单的图像更改功能

css

```
 #header{ background:url(http://blogs-images.forbes.com/daviddisalvo/files/2012/01/googlelogo2.jpg) no-repeat; width:700px; height:400px;} 
```

html

```
 <div id="header"></div>
 <div id="content">Blah Blah Blah</div> 
```

jQuery

```
 $(document).ready(function(){
 $('#content').mouseover(function(){
 $('#header').animate({ opacity:1});
 $('#header').css('background','url(http://www.google.com/mobile/android/images/android.jpg)')
 $('#header').animate({ opacity:0.1});
 });
 $('#content').mouseleave(function(){
 $('#header').animate({ opacity:0.1});
 $('#header').css('background','url(http://blogs-images.forbes.com/daviddisalvo/files/2012/01/googlelogo2.jpg) no-repeat')
 $('#header').animate({ opacity:1});
});

 }); 
```

[您可以在此处](http://jsbin.com/ilawuj/1/)检查输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:30:07.900

CSS 不允许在另一个元素上使用 :hover 类，因此您需要 JavaScript 来执行此操作。

[检查这个小提琴](http://jsfiddle.net/tEp4z/)没有动画

用动画[检查这个小提琴](http://jsfiddle.net/tEp4z/1/)

Javascript

```
$('#content').hover(function() {
    $('.hover-image').fadeIn('slow');
},
function() {
    $('.hover-image').fadeOut('slow');
}) 
```

HTML

```
<div id="header">
    <img src="http://media.smashingmagazine.com/images/header-contest/full/avto.jpg" />
    <img class="hover-image" src="http://mitosoc.org/blogs/wp-content/themes/Cutline2pt1/images/header.jpg">
</div>
<div id="content">Lorem ipsum viverra tortor donec nulla torquent porttitor diam praesent viverra, curae felis semper ad ultricies vitae placerat convallis sagittis felis, quisque etiam dui in primis sit curabitur porttitor ornare velit fames aptent lobortis accumsan torquent quam libero fames, porttitor etiam netus suspendisse sagittis potenti.</div> 
```

CSS

```
#header { overflow:hidden; width:850px; height:200px; position:relative; }
.hover-image { display:none; position:absolute; z-index:1; top:0; left:0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:53:17.017

```
<html>
<head>
<style type="text/css">
.logo-img{
     background-color:green;
}
.logo-img:hover{
     opacity:0.5;
     background-color:red;
}
</style>
<body>
<img src="/img/logo.png" class="logo-img">
</body>
</html> 
```

# mysql - 如何在使用 MySQL 的别名列上使用 WHERE 条件进行选择？

> ID：13814014
> 
> 赞同：3
> 
> 时间：2012-12-11T05:11:36.433
> 
> 标签：mysql, sql

我有以下查询：

```
SELECT IF(TIMESTAMPDIFF(HOUR,users_codes.timestam,CURRENT_TIMESTAMP()) < 48,'no','yes') AS Expired
FROM users_codes 
```

如何仅返回具有的行`'no'`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T05:12:39.950

添加`WHERE`条件。*您不能`ALIAS`在 where 子句上*使用。

```
SELECT IF(TIMESTAMPDIFF(HOUR,users_codes.timestam,CURRENT_TIMESTAMP()) < 48,'no','yes') AS Expired 
FROM   users_codes
WHERE  IF(TIMESTAMPDIFF(HOUR,users_codes.timestam,CURRENT_TIMESTAMP()) < 48,'no','yes') = 'no' 
```

或使用子查询

```
SELECT *
FROM
(
    SELECT IF(TIMESTAMPDIFF(HOUR,users_codes.timestam,CURRENT_TIMESTAMP()) < 48,'no','yes') AS Expired 
    FROM   users_codes
) s
WHERE  Expired  = 'no' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:14:26.317

我相信你可以做这样的事情

```
SELECT IF( TIMESTAMPDIFF(
    HOUR,
    users_codes.timestam,
    CURRENT_TIMESTAMP()
  ) < 48, 'no', 'yes') AS Expired

FROM users_codes
HAVING Expired = 'no'; 
```

# android - GLThread 或 GLSurfaceview 重叠问题？

> ID：13814016
> 
> 赞同：0
> 
> 时间：2012-12-11T05:11:48.747
> 
> 标签：android, multithreading, opengl-es-2.0, overlap, glsurfaceview

我的应用程序中有 2 个 GLSurfaceViews（android，opengles 2.0）。其中两个重叠，因此我可以将其顶部用作预览。我的问题是当我启动应用程序时，顶部 glsurfaceview 的内容在片刻之后消失了（我设置了与背景 glview 不同的背景颜色。所以我可以区分内容消失或整个 GLview）。我不知道从哪里开始寻找问题。我的代码如下。

提前致谢。

```
package jp.android.MyProject;

import android.app.Activity;
import android.widget.TextView;

import android.view.ViewGroup.LayoutParams;
import android.os.Bundle;

public class MyProjectActivity extends Activity {

MyOpenGLView myGLView;
PreviewGLView previewView;
private int sizeofPreview = 300;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    myGLView = new MyOpenGLView(this);
    setContentView(myGLView);
    myGLView.requestFocus();
    myGLView.setFocusableInTouchMode(true);

    previewView = new PreviewGLView(this);
    addContentView(previewView,new LayoutParams(sizeofPreview, sizeofPreview));

    previewView.setBackgroundColor(0xFF000000);

    myGLView.textWindow = new TextView(this);
    addContentView(myGLView.textWindow,new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    myGLView.touchWindow = new TextView(this);
    addContentView(myGLView.touchWindow, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    myGLView.touchWindow.setY(600.0f);
}

@Override
protected void onResume(){
    super.onResume();
    myGLView.onResume();
previewView.onResume();
}

@Override
protected void onPause(){
    super.onPause();
    myGLView.onPause();
    previewView.onPause();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:56:37.217

我不相信您可以（或不应该）在 android 应用程序中使用两个重叠的 GLSurfaceView。它只是不是那样设计的

更好的方法是将绘制主场景和预览场景的所有代码放入 GLSurfaceView.Renderer 中的两个不同方法中

然后在 期间`onDrawFrame(GL10 gl)`，调用主绘制方法，然后清除深度缓冲区而**不是颜色缓冲区，**然后调用该方法在主场景的顶部绘制预览。您仍然应该`onDrawFrame(GL10 gl)`在 Renderer的开头清除两个缓冲区

```
public class MyRenderer implements GLSurfaceView.Renderer {

/**
 * GLSurfaceView onto which stuff is rendered
 */
private GLSurfaceView mGLView;

/**
 * The current scene to render
 */
public MyScene mScene;

/**
 * The preview scene to draw over the top
 */
public MyScene mPreviewScene;

/**
 * 
 * @param The GLSurfaceView this renderer is attached to
 */
MyRenderer(GLSurfaceView mGLView;){
    this. mGLView =  mGLView;;
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {

    // clear the background
    gl.glClearColor(0, 0, 0, 1);

            // Enable depth testing
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthMask(true);
    gl.glDepthFunc(GL10.GL_LEQUAL);  

    // enable back face culling
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glFrontFace(GL10.GL_CCW);        
    gl.glCullFace(GL10.GL_BACK);

}

public void onSurfaceChanged(GL10 gl, int width, int height) {

    // set the new viewport width/height
    setViewportWidth(width);
    setViewportHeight(height);

}

public void onDrawFrame(GL10 gl) {

    // clear the canvas at the start of the draw call
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        // draw scene
        gl.glPushMatrix();

        // draw the foreground scene
        if(mScene!=null){
            mScene.draw(gl);
            // clear the depth buffer only!         
            gl.glClear(GL10.GL_DEPTH_BUFFER_BIT);
        }

        gl.glPopMatrix();

        gl.glPushMatrix();

        // draw the preview scene on top
        if(mPreviewScene!=null){
            mPreviewScene.draw(gl);
        }

        gl.glPopMatrix();

    return;

}
} 
```

__

```
public interface MyScene{

    public void draw(GL10 gl);
} 
```

__

```
public class MyOpenGLScene implements MyScene{

    // etc

} 
```

__

```
public class PreviewGLScene implements MyScene{

    // etc

} 
```

__

```
GLSurfaceView mGLView;
MyOpenGLScene myScene;
PreviewGLScene previewScene;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mGLView = new GLSurfaceView(this);
    MyRenderer renderer = new MyRenderer(mGLView);

    myScene = new MyOpenGLScene();
    previewScene = new PreviewGLScene();

    renderer.mScene = myScene;
    renderer.mPreviewScene = previewScene;

    mGLView.setRenderer(renderer);

    setContentView(myGLView);
} 
```

注意：这里的调用都在 OpenGL ES 1.0 中，但应该很容易计算出 OpenGL ES 2.0 的等价物。

此外，您实际上不需要重写 GLSurfaceView（尽管如果您有并且正在 GLSurfaceView 中进行渲染，您可以将我放入`MyRenderer`单个 GLSurfaceView 的方法交换，结果应该是相同的）

# c++ - 带有xml的OpenCV C++中的Do-while语句

> ID：13814017
> 
> 赞同：0
> 
> 时间：2012-12-11T05:11:47.853
> 
> 标签：c++, xml, opencv

我正在尝试使用 OpenCV 从 xml 文件中读取数据。数据来自视频记录。

我想做的是写一个“do-while”语句，基本上说“当该帧没有数据时什么都不做”

我尝试在 while 语句中使用 FileNode::empty()，但我认为我没有正确理解语法，因为我不断收到错误“调用没有对象参数的非静态成员函数”

我是一个完全的编程新手，所以我真的不知道我应该如何正确地构造语句。我一直在阅读 OpenCV 的教程和参考手册，但这并没有为我解决任何问题。

下面是 xml 文件开头的一个例外：

```
<frame_00000>
  <pose type_id="opencv-matrix">
    <rows>0</rows>
    <cols>0</cols>
    <dt>u</dt>
    <data></data></pose>
  <expertCode>3</expertCode>
  <autoCode>-1</autoCode></frame_00000>
<frame_00001>
  <pose type_id="opencv-matrix">
    <rows>0</rows>
    <cols>0</cols>
    <dt>u</dt>
    <data></data></pose>
  <expertCode>0</expertCode>
  <autoCode>-1</autoCode></frame_00001>
<frame_00002>
  <pose type_id="opencv-matrix">
    <rows>6</rows>
    <cols>1</cols>
    <dt>d</dt>
    <data>
      9.6603986167822176e-02 2.7534827334102827e-02
      -7.9839974858475181e-03 2.9772357539313782e+02
      2.6446663460538508e+02 1.5645098067258549e+00</data></pose>
  <expertCode>0</expertCode>
  <autoCode>0</autoCode></frame_00002> 
```

基本上，我想要它做的是查看每个帧节点，确定其中是否有任何数据，如果没有则忽略它们。

任何有关 FileNode::empty() 语句语法的提示都将不胜感激。

编辑：

这是我到目前为止的代码，基于打开 XML 文件的教程

```
#include "opencv2/opencv.hpp"
#include <fstream>

using namespace cv;

int main()
{
    FileStorage fs("output.xml", FileStorage::READ);
    do {
        ;
    } while ();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:57:04.413

The opencv XML API is very simple, really just to get a cv::Mat on/off disk. If you are trying to do more than this I would use a regular XML library.

But most XML parsers aren't designed to read a file that is changing dynamically, they normally open the file and build a tree structure.

Could you just keep trying to open the file, check if it has changed, close it, wait and then re-open ?

# matlab - matlab - “子系统数据序列化期间内存不足”错误消息

> ID：13814021
> 
> 赞同：0
> 
> 时间：2012-12-11T05:12:01.947
> 
> 标签：matlab

保存大型 (300 MB) 结构时会发生这种情况。（它`containers.Map`是以字符串为键，各种大型矩阵为值。）

错误信息：

```
Out Of Memory during serialization of the Subsystem Data
Error using save
Error closing file C:\a\comsol\fibre_bundle_AP.mat.

Error in process_data3/saveData (line 132)
        save(save_file, 'data'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:12:01.947

正如[这里](http://www.mathworks.com.au/matlabcentral/answers/37479)所解释的，当前版本的 Matlab 中的`save`函数会复制它正在保存的结构。这可能会导致 Matlab 内存不足。

一种解决方案是使用旧版本的`save`，如下所示：

```
save(save_file, 'data', '-v7.3'); 
```

以上解决了我的问题。

# c++ - 在 C++ 中从 hdf5 读取字符串

> ID：13814027
> 
> 赞同：2
> 
> 时间：2012-12-11T05:12:12.930
> 
> 标签：c++, hdf5

我正在从 Microsoft Visual C++ 2008 中的 H5 文件中读取数据集。对于 int 和 double 类型的数据，一切正常，但是在遇到字符串时遇到了问题。在 H5 文件中，我有 18 个字符串，每个字符串的长度为 24。我的代码如下；

```
StrType strdatatype(PredType::C_S1, 24);
char *buffer1[18];
DataSet datasetCurveNames = riskFactorsH5.openDataSet("/gstrCurveNames");

datasetCurveNames.read(&buffer1, strdatatype); 
```

在执行时，缓冲区 1 充满了错误的指针。作为替代方案，我尝试使用 H5T_VARIABLE 通过修改来管理可变长度字符串：

```
 StrType strdatatype(PredType::C_S1, H5T_VARIABLE); 
```

这也失败了。如果有人能对这个问题有所了解，将不胜感激。

干杯，卢卡斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-26T22:21:47.627

HDF5 C++ API 的文档严重不足。这就是我从数据集中读取字符串的方式。我只是在代码完成 IDE 的帮助下才弄清楚这一点：

```
using namespace H5;
std::string field_name("name of the field");
StrType datatype(0, H5T_VARIABLE);
DataSpace dataspace(H5S_SCALAR);
DataSet datset = group.openDataSet(field_name);

std::string field_value;
datset.read(field_value, datatype, dataspace); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:44:35.967

您需要为完整的字符串分配内存，库不会为您分配内存。你应该更换

```
char *buffer1[18]; 
```

经过

```
char buffer1[18][24]; 
```

和

```
datasetCurveNames.read(&buffer1, strdatatype); 
```

应该

```
datasetCurveNames.read(buffer1, strdatatype); 
```

（没有`&`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T05:25:31.133

```
 auto dataset = file.openDataSet(kDatasetName);
    auto dataspace = dataset.getSpace();
    hsize_t dims_out[2];
    auto ndims = dataspace.getSimpleExtentDims(dims_out, nullptr);
    assert(ndims == 2);
    auto n = dims_out[0] * dims_out[1];
    auto data_type = dataset.getDataType();
    auto type_class = data_type.getClass();
    auto data_size = data_type.getSize();
    void* out = new char[n * data_size]();
    dataset.read(out, data_type);
    if (type_class == H5T_INTEGER) {
    } else if (type_class == H5T_STRING) {
      std::string* strs = new std::string[n];
      for (auto i = 0u; i < n; ++i) {
        auto len = data_size;
        auto c_str = out + data_size * i;
        for (auto p = c_str + len - 1; p != c_str && !*p; --p) --len;
        strs[i].assign(c_str, len);
      }
    }
    free(out); 
```

结帐[https://github.com/opentradesolutions/openalpha/blob/hdf5/src/openalpha/data.cc](https://github.com/opentradesolutions/openalpha/blob/hdf5/src/openalpha/data.cc)以获取完整示例

# javascript - 逐行显示文件内容

> ID：13814030
> 
> 赞同：-1
> 
> 时间：2012-12-11T05:12:26.690
> 
> 标签：javascript, ruby-on-rails, ruby

是否可以在 ruby​​ on rails 下的浏览器中读取文件内容并逐行显示它。它应该显示为正在播放视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:16:13.467

你的意思是在这样的html页面中显示原始文件内容吗[https://raw.github.com/intridea/oauth2/master/lib/oauth2.rb](https://raw.github.com/intridea/oauth2/master/lib/oauth2.rb)

并且每一行都由超链接包裹，如果你这么说，这是可能的

使用js解决方案

```
 (function($) {
$.fn.typewriter = function() {
    this.each(function() {
        var $ele = $(this), str = $ele.html(), progress = 0;
        $ele.html('');
        var timer = setInterval(function() {
            var current = str.substr(progress, 1);
            if (current == '<') {
                progress = str.indexOf('>', progress) + 1;
            } else {
                progress++;
            }
            $ele.html(str.substring(0, progress) + (progress & 1 ? '_' : ''));
            if (progress >= str.length) {
                clearInterval(timer);
            }
        }, 75);
    });
    return this;
};
  })(jQuery); 
```

在你的 index.html.erb

```
 <body>
     <div id="code" style='display:none'>
       <%= File.open("#{full_path}").readlines.join("<br/>") %>
     </div>
     <script> $('#code'). typewriter() </script>
  </body> 
```

你可以把你的CSS放在代码元素上

# android - 搜索哈希键时拒绝访问

> ID：13814035
> 
> 赞同：1
> 
> 时间：2012-12-11T05:12:58.033
> 
> 标签：android, facebook, cmd

为了在 android 中通过 facebook 共享文本，我在项目中安装了 facebook sdk，然后从**debug.keystore**`cmd`获取 hashkey在 java 的路径之前给出了以下行

> “keytool -exportcert -alias androiddebugkey -keystore (C:\Program Files\Java\jre7\bin) | openssl sha1 -binary | openssl base64”

但是从中获得“**拒绝访问**” `cmd`，可能会出现什么问题？

# android - android中的Webview仅在三星galaxy tab 2中挂起

> ID：13814038
> 
> 赞同：6
> 
> 时间：2012-12-11T05:13:04.647
> 
> 标签：android, android-webview

我是 Android 开发的新手。`WebView`我只在三星 Galaxy Tab 2 中遇到了 Android 问题。所有其他设备都可以正常工作。

我的应用程序仅包含带有 jquery 的 WebView。当应用程序启动时，WebView 被加载，然后用户只与 WebView 交互。在三星 Galaxy Tab 中，有时会延迟加载 WebView 的内容，否则它可以正常工作。如果最初有延迟，则需要发生事件（例如触摸或方向更改）以进行加载，然后应用程序完全挂起。

是否有任何设置来控制“缩放”事件？

我不知道，我是否错过了代码中的某些内容。我正在添加我的代码以供参考。请帮我解决这个问题。提前致谢。

```
public class myApp extends Activity 
{
    WebView myWeb;

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myWeb=(WebView) findViewById(R.id.webView1);

        WebSettings webSettings=myWeb.getSettings();
        webSettings.setJavaScriptEnabled(true);
        myWeb.clearCache(true);

        myWeb.loadUrl("file:///android_asset/index.html");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:48:36.213

我的这部分答案与您的 WebView 加载和挂起问题有关：

使用任意数量的方法将输入`loadUrl()`移出`onCreate()`主 UI 线程，例如...

**而不是这个**：

```
myWeb.loadUrl("file:///android_asset/index.html"); 
```

**使用这个**：

```
Timer timer = new Timer();
timer.schedule(new TimerTask() {
    @Override
    public void run() {
        myWeb.loadUrl("file:///android_asset/index.html");
    }
}, 400); 
```

**缩放**：

关于问题的“缩放”部分，请参阅这篇文章：[enable/disable zoom in Android WebView](https://stackoverflow.com/questions/5125851/enable-disable-zoom-in-android-webview)

# bitmap - 在 XNA 中使用原语

> ID：13814039
> 
> 赞同：1
> 
> 时间：2012-12-11T05:13:30.107
> 
> 标签：bitmap, xna, drawing, primitive, texture2d

也许我正在尝试以一种非设计的方式使用 XNA，但我非常希望能够绘制我自己的图元并将它们保存为位图、纹理 2D 或任何可以容纳几条二维线的东西为了我。我的目标是编写一个程序化创建纹理的游戏，而不是仅仅从内容管理器加载。

如果有帮助的话，我已经创建了一个存储多边形的 Shape 类，我可能可以告诉 spriteBatch 画出每条线，但我试图通过在某处存储常用形状来进行优化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T05:33:32.687

您可以为您的任务使用[RenderTarget](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.rendertarget%28v=xnagamestudio.31%29.aspx)。像这样的东西：

```
// var to store your drawing
Texture2D newShape;

// drawing will be on this target
RenderTarget2D rt = new RenderTarget2D(GraphicsDevice, width, height);
SpriteBatch sb = new SpriteBatch(GraphicsDevice);

// set to render all to render target
GraphicsDevice.SetRenderTarget(rt); 

GraphicsDevice.Clear(Color.Transparent); 

sb.Begin();

// Draw what you want here.

sb.End()

// Return to drawing on "main" buffer
GraphicsDevice.SetRenderTarget(null);

// Save the texture you just drawn
newShape = rt; 
```

# asp.net - 我们是否应该将业务实体存储在视图状态变量中

> ID：13814043
> 
> 赞同：1
> 
> 时间：2012-12-11T05:13:47.427
> 
> 标签：asp.net, session, viewstate, state-management

我有一个业务实体，我在单个 aspx 页面上使用它。这个页面有很多控件，因此会发生很多回发。我想知道，是否建议将此业务实体存储在视图状态（因为我需要在单个页面上）或会话（因为如果实体有更多数据，它将增加我的页面大小并因此增加网络延迟）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:22:00.840

**View State:**

Why do you use ViewState? It makes your page heavier. Hence you will end up with poor response time.

**Session -** From my view, you can use it here but make sure you remove it once it is not necessary or no longer referred. As you start storing objects in Session IIS will store those in in-memory/in proc (default) will get increased and IIS processing will be slower over the period of time. If your server has good memory 32GB Ram and other capabilities to handle , you no need to worry

**HttpContext**

HttpContext would be the much better way of storing an object between a single round trip(request/response). So you can prefer this over a session as it will be availble only for a current request, no need to worry about removing an object like session handling, as it will be automatically cleared once the request completed.

Hope these things would be helpful to you!

# iphone - 在 iPhone 中加载动态视图

> ID：13814044
> 
> 赞同：0
> 
> 时间：2012-12-11T05:13:48.750
> 
> 标签：iphone, objective-c, ios, uiview

我正在编写一个 iPhone 应用程序，我需要在其中将 xib 文件动态加载到视图中。我有 4 个这样的场景，我正在加载它们，`didFinishLaunchingWithOptions`并且根据条件检查的相应视图必须动态加载。代码似乎运行良好，因为我没有收到编译时错误，但我 `linker command failed with exit code 1 (use -v to see invocation)`在 3 个文件中的任何一个文件中都收到了链接器错误（取决于动态场景）。外部库只导入到项目中一次。现在我打算使用一个`Singleton`库。

已加载的动态视图包含外部硬件设备的外部库。

我通过`setContentView(R.layout.as_per_condition);`根据条件设置内容视图解决了 Android 中的相同问题。我想知道在 iOS 中是否有类似的方法。

因为，Apple 也会从内存的角度审查每个代码，我有点担心，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:50:00.173

您可能正在使用一些框架类，但没有在您的类中导入必要的标头。这就是为什么你会得到链接器错误。至于动态视图，您能否澄清问题或发布一些代码？

# ruby-on-rails - ActiveRecord：find_or_create_by_association

> ID：13814045
> 
> 赞同：0
> 
> 时间：2012-12-11T05:13:57.037
> 
> 标签：ruby-on-rails, activerecord

我想知道使用类似于该`find_or_crate`方法的方法查找或创建嵌套记录的理想方法是什么。

对于常规属性，有非常方便的`User.find_or_create_by_attribute`方法。

嵌套关联有什么用吗？

假设 a`User`有一个`Profile`。根据它的`profile`存在来寻找或创造的理想方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:14:44.333

我不认为你会找到比`profile = user.profile || user.create_profile`.

# xpath - XPath / Selenium 无法使用包含 / 开头的部分 id 定位元素

> ID：13814047
> 
> 赞同：4
> 
> 时间：2012-12-11T05:14:02.900
> 
> 标签：xpath, selenium

我使用 AjaxFormLoop 生成了以下 HTML。

```
<div id="phones">
    <div class="t-forminjector tapestry-forminjector" id="rowInjector_13b87fdd8b6">
        <input id="number_13b87fdd8b6" name="number_13b87fdd8b7" type="text"/>
        <a id="removerowlink_13b87fdd8b6" href="#" name="removerowlink_13b87fdd8b6">remove</a>
    </div>

    <div class="t-forminjector tapestry-forminjector" id="rowInjector_13b87fdda70" style="background-image: none; background-color: rgb(255, 255, 251);">
        <input id="number_13b87fdda70" name="number_13b87fdda70" type="text" />
        <a id="removerowlink_13b87fdda70" href="#" name="removerowlink_13b87fdda70">remove</a>
    </div>
</div> 
```

我正在尝试使用部分 ID 访问子 2 中的第二个输入字段，但是我没有成功地让它工作。

到目前为止我所尝试的。

```
String path = "//input[contains(@id,'number_')][2]";
String path = "(//input[contains(@id,'number_')])[2]"; 
```

我什至不能使用 1 而不是 2 访问输入 1，但是如果我删除 [2] 并且只使用

> String path = "//输入[包含(@id,'number_')]";

我可以毫无问题地访问第一个字段。

如果我使用确切的 ID，我可以毫无问题地访问任一字段。

如果可能，我确实需要使用 id，因为每个 t-forminjector 行中有更多字段在此示例中不存在。

**使用 Selenium 实现。**

```
 final String path = "(//input[starts-with(@id,'quantity_')])[2]";

    new Wait() {
        @Override
        public boolean until() {
            return isElementPresent(path);
        }
    }.wait("Element should be present", TIMEOUT); 
```

* * *

### 解决

我注意到我似乎无法使用以下开头/包含来定位 dom 中的任何元素，但是如果我使用完整的 id，它就可以工作。

```
//Partial ID - fails
//*[starts-with(@id,"quantity_")]

//Exact ID - works
//*[starts-with(@id,"quantity_-112409575185705")] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:55:28.943

As Iwburk stated, this was a namespace issue. According to the Selenium API,

[http://release.seleniumhq.org/selenium-remote-control/0.9.0/doc/java/com/thoughtworks/selenium/Selenium.html](http://release.seleniumhq.org/selenium-remote-control/0.9.0/doc/java/com/thoughtworks/selenium/Selenium.html)

while using an xpath expression, I needed to used xpath=xpathExpression changing my query string to:

```
String path = "xpath=(//input[starts-with(@id,'quantity_')])[2]"; 
```

I found a related post here, [Element is found in XPath Checker but not in Selenium](https://stackoverflow.com/questions/1711013/xpath-selenium-element-is-found-in-xpath-checker-but-not-in-selenium)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T09:42:15.023

您无法访问它，因为您没有将元素定位为在页面中是唯一的。使用使其独一无二的 xpath，-您的 xpath 看起来不错。更多信息在这里 [http://www.seleniumhq.org/docs/appendix_locating_techniques.jsp](http://www.seleniumhq.org/docs/appendix_locating_techniques.jsp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:11:27.000

[您在此处粘贴](http://www.xpathtester.com/saved/73f39fd7-f240-4e41-bd88-527cc8a8789a)的生成输出根本不包含其中`number_`任何位置的字符串。它*确实*包含`Number_`——注意大写`N`——但它不是字符串的第一部分。也许你的意思是这样的（至少选择*了一些东西*）：

```
(//input[contains(@id, 'Number_')])[2] 
```

或者：

```
(//input[starts-with(@id,'catalogNumber_')])[2] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-27T23:59:29.313

除了 selenium 语法问题之外，还有一个与标记结构相关的 xpath 问题。
xpath 1：`//input[starts-with(@id,'number_')][1]`
xpath 2：`(//input[starts-with(@id,'number_')])[1]`

在下面的示例中，xpath 1 将返回 2 个节点（不正确），而 xpath 2 将是正确的，因为`input`节点不是兄弟节点，因此需要使用括号来引用生成的节点集

```
<div id="phones">
    <div>
        <input id="number_1" name="number_1" type="text"/>
    </div>
    <div>
        <input id="number_2" name="number_2" type="text" />
    </div>
</div> 
```

不带括号的结果

```
/ > xpath //input[starts-with(@id,'number_')][1]
Object is a Node Set :
Set contains 2 nodes:
1  ELEMENT input
    ATTRIBUTE id
    TEXT
        content=number_1
    ATTRIBUTE name
    TEXT
        content=number_1
    ATTRIBUTE type
    TEXT
        content=text
2  ELEMENT input
    ATTRIBUTE id
    TEXT
        content=number_2
    ATTRIBUTE name
    TEXT
        content=number_2
    ATTRIBUTE type
    TEXT
        content=text 
```

在下一个示例中，括号不会产生影响，因为节点是兄弟节点

```
<div id="other">
<input id="pre_1" type="text"/>
<input id="pre_2" type="text" />
<div>a</div>
</div> 
```

带括号

```
/ > xpath (//input[starts-with(@id,'pre_')])[1]
Object is a Node Set :
Set contains 1 nodes:
1  ELEMENT input
    ATTRIBUTE id
    TEXT
        content=pre_1
    ATTRIBUTE type
    TEXT
        content=text 
```

不带括号

```
/ > xpath //input[starts-with(@id,'pre_')][1]
Object is a Node Set :
Set contains 1 nodes:
1  ELEMENT input
    ATTRIBUTE id
    TEXT
        content=pre_1
    ATTRIBUTE type
    TEXT
        content=text 
```

测试是用 xmllint shell 完成的 `xmllint --html --shell test.html`

# android - padding_medium 无法解析或不是字段错误

> ID：13814050
> 
> 赞同：2
> 
> 时间：2012-12-11T05:14:07.597
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager

我有一个视图寻呼机以水平滑动方式查看图像。我正在使用扩展 FragmentPagerAdapter 的 ImageFragmentAdapter 类填充视图寻呼机。在我的 ImageFragmentAdapter .java 中，我在这一行出现错误

```
int padding = context.getResources().getDimensionPixelSize(R.dimen.padding_medium);

Error is : padding_medium cannot be resolved or is not a field 
```

我刚刚搜索了这个问题，我知道我应该将此行添加到导入中。

```
import your.application.packagename.R; 
```

但我仍然在这条线上出错。谁能告诉是什么问题。？

```
ImageFragmentAdapter .java

    public class ImageFragmentAdapter extends FragmentPagerAdapter implements
            IconPagerAdapter 
            {

         private int[] CONTENT = new int[] {
                R.drawable.gallery_photo_1,
                R.drawable.gallery_photo_2,
                R.drawable.gallery_photo_3,
                R.drawable.gallery_photo_4
            };

        protected static final int[] ICONS = new int[] { R.drawable.marker,
                R.drawable.marker, R.drawable.marker, R.drawable.marker };

        private int mCount = CONTENT.length;

        public ImageFragmentAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return ImageFragment.newInstance(CONTENT[position % CONTENT.length]);
        }

        @Override
        public int getCount() {
            return mCount;
        }

         @Override
            public Object instantiateItem(ViewGroup container, int position) {
              Context context = MainActivity.appContext;
              ImageView imageView = new ImageView(context);
              int padding = context.getResources().getDimensionPixelSize(
                      R.dimen.padding_medium);//error//
              imageView.setPadding(padding, padding, padding, padding);
              imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
              imageView.setImageResource(CONTENT[position]);
              ((ViewPager) container).addView(imageView, 0);
              return imageView;
            }
        @Override
        public boolean isViewFromObject(View view, Object object) {
          return view == ((ImageView) object);
        }
        @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
          ((ViewPager) container).removeView((ImageView) object);
        }
        /*
        @Override
        public CharSequence getPageTitle(int position) {
            return ImageFragmentAdapter.CONTENT[position % CONTENT.length];
        }
    */
        @Override
        public int getIconResId(int index) {
            return ICONS[index % ICONS.length];
        }

        public void setCount(int count) {
            if (count > 0 && count <= 10) {
                mCount = count;
                notifyDataSetChanged();
            }
        }
    } 
```

我使用 DetailsFragment.java 将 View 寻呼机填充到 fragment_details.xml

```
public class DetailsFragment extends SherlockFragment 
{
     public static final String TAG = "detailsFragment";

    ImageFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) 
    {
        //container.removeAllViews();
        // TODO Auto-generated method stub
        View view = inflater.inflate(R.layout.fragment_details, container,
                false);

        mAdapter = new ImageFragmentAdapter(getActivity().getSupportFragmentManager());

        mPager = (ViewPager) view.findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator) view.findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);

        return view;
    }

} 
```

片段详细信息.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <com.viewpagerindicator.CirclePageIndicator
        android:id="@+id/indicator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dip" />

</LinearLayout> 
```

# android - 如何在 Android 视频视图中播放 Youtube 视频？

> ID：13814055
> 
> 赞同：34
> 
> 时间：2012-12-11T05:14:34.943
> 
> 标签：android, youtube, android-videoview

我正在开发一个需要嵌入其中的 youtube 视频播放器的 android 应用程序。我成功地从 API 获得了 RTSP 视频 URL，但是当我试图在我的 android 视频视图中加载这个 rtsp url 时，它显示“ `Can't play this video.`”。以前我用这种方法开发了一个类似的应用程序，当时它运行良好，但现在也无法加载。

我很确定，我从 API 获得了正确的 RTSP url。`rtsp://v6.cache6.c.youtube.com/CiULENy73wIaHAlV9VII3c64lRMYESARFEgGUglwbGF5bGlzdHMM/0/0/0/video.3gp`

这是我的活动代码：

```
 mVideoURL = getIntent().getStringExtra("EXT_URL");
    Log.i("VIDEO URL", " " + mVideoURL);

    MediaController mc = new MediaController(this);
    mVideoStreamView = (VideoView) findViewById(R.id.vidPlayer);

    mVideoStreamView.setVideoURI(Uri.parse(mVideoURL));
    mVideoStreamView.setMediaController(mc);
    mVideoStreamView.requestFocus();
    mVideoStreamView.start(); 
```

**编辑** 从 logcat 中找到了一些附加信息：

```
ARTSPConnection(6607): status: RTSP/1.0 200 OK
ASessionDescription(6607): v=0
ASessionDescription(6607): o=GoogleStreamer 378992432 328144046 IN IP4 74.125.213.182
ASessionDescription(6607): s=Video
ASessionDescription(6607): c=IN IP4 0.0.0.0
ASessionDescription(6607): b=AS:29
ASessionDescription(6607): t=0 0
ASessionDescription(6607): a=control:*
ASessionDescription(6607): a=range:npt=0-1703.000000
ASessionDescription(6607): m=video 0 RTP/AVP 98
ASessionDescription(6607): b=AS:17
ASessionDescription(6607): a=rtpmap:98 H263-2000/90000
ASessionDescription(6607): a=control:trackID=0
ASessionDescription(6607): a=cliprect:0,0,144,176
ASessionDescription(6607): a=framesize:98 176-144
ASessionDescription(6607): a=fmtp:98 profile=0;level=10
ASessionDescription(6607): m=audio 0 RTP/AVP 99
ASessionDescription(6607): b=AS:12
ASessionDescription(6607): a=rtpmap:99 AMR/8000/1
ASessionDescription(6607): a=control:trackID=1
ASessionDescription(6607): a=fmtp:99 octet-align
ARTSPConnection(6607): status: RTSP/1.0 200 OK
ARTSPConnection(6607): status: RTSP/1.0 200 OK
ARTSPConnection(6607): status: RTSP/1.0 200 OK
ARTSPConnection(6607): status: RTSP/1.0 200 OK
ARTSPConnection(6607): status: RTSP/1.0 200 OK
ASessionDescription(6607): v=0
ASessionDescription(6607): o=GoogleStreamer 1299458498 503248054 IN IP4 74.125.213.182
ASessionDescription(6607): s=Video
ASessionDescription(6607): c=IN IP4 0.0.0.0
ASessionDescription(6607): b=AS:29
ASessionDescription(6607): t=0 0
ASessionDescription(6607): a=control:*
ASessionDescription(6607): a=range:npt=0-1703.000000
ASessionDescription(6607): m=video 0 RTP/AVP 98
ASessionDescription(6607): b=AS:17
ASessionDescription(6607): a=rtpmap:98 H263-2000/90000
ASessionDescription(6607): a=control:trackID=0
ASessionDescription(6607): a=cliprect:0,0,144,176
ASessionDescription(6607): a=framesize:98 176-144
ASessionDescription(6607): a=fmtp:98 profile=0;level=10
ASessionDescription(6607): m=audio 0 RTP/AVP 99
ASessionDescription(6607): b=AS:12
ASessionDescription(6607): a=rtpmap:99 AMR/8000/1
ASessionDescription(6607): a=control:trackID=1
ASessionDescription(6607): a=fmtp:99 octet-align
ARTSPConnection(6607): status: RTSP/1.0 461 Unsupported Transport
ARTSPConnection(6607): status: RTSP/1.0 461 Unsupported Transport 
```

请建议我一种在 android 视频视图中加载 youtube 视频的方法。

提前致谢...

**编辑** 刚刚签入另一台设备 HTC Desire (2.2)。代码运行良好。我想知道，Nexus（4.1）会有什么问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-28T04:09:39.427

由于我找不到在视频视图中加载 rtsp URL 的任何方法（适用于所有设备和 android 版本），我通过另一种解决方法解决了我的问题。我使用 webview 将 youtube 播放器嵌入其中，这种方法在所有经过测试的设备中都能很好地工作。

这是我的代码：

```
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setPluginState(PluginState.ON);
mWebView.loadUrl("http://www.youtube.com/embed/" + videoID + "?autoplay=1&vq=small");
mWebView.setWebChromeClient(new WebChromeClient()); 
```

非常感谢你们所有的帮助。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-11T06:30:59.703

```
private class YourAsyncTask extends AsyncTask<Void, Void, Void>
    {
        ProgressDialog progressDialog;

        @Override
        protected void onPreExecute()
        {
            super.onPreExecute();
            progressDialog = ProgressDialog.show(AlertDetail.this, "", "Loading Video wait...", true);
        }

        @Override
        protected Void doInBackground(Void... params)
        {
            try
            {
                String url = "http://www.youtube.com/watch?v=1FJHYqE0RDg";
                videoUrl = getUrlVideoRTSP(url);
                Log.e("Video url for playing=========>>>>>", videoUrl);
            }
            catch (Exception e)
            {
                Log.e("Login Soap Calling in Exception", e.toString());
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);
            progressDialog.dismiss();
/*
            videoView.setVideoURI(Uri.parse("rtsp://v4.cache1.c.youtube.com/CiILENy73wIaGQk4RDShYkdS1BMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"));
            videoView.setMediaController(new MediaController(AlertDetail.this));
            videoView.requestFocus();
            videoView.start();*/            
            videoView.setVideoURI(Uri.parse(videoUrl));
            MediaController mc = new MediaController(AlertDetail.this);
            videoView.setMediaController(mc);
            videoView.requestFocus();
            videoView.start();          
            mc.show();
        }

    }

public static String getUrlVideoRTSP(String urlYoutube)
    {
        try
        {
            String gdy = "http://gdata.youtube.com/feeds/api/videos/";
            DocumentBuilder documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            String id = extractYoutubeId(urlYoutube);
            URL url = new URL(gdy + id);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            Document doc = documentBuilder.parse(connection.getInputStream());
            Element el = doc.getDocumentElement();
            NodeList list = el.getElementsByTagName("media:content");///media:content
            String cursor = urlYoutube;
            for (int i = 0; i < list.getLength(); i++)
            {
                Node node = list.item(i);
                if (node != null)
                {
                    NamedNodeMap nodeMap = node.getAttributes();
                    HashMap<String, String> maps = new HashMap<String, String>();
                    for (int j = 0; j < nodeMap.getLength(); j++)
                    {
                        Attr att = (Attr) nodeMap.item(j);
                        maps.put(att.getName(), att.getValue());
                    }
                    if (maps.containsKey("yt:format"))
                    {
                        String f = maps.get("yt:format");
                        if (maps.containsKey("url"))
                        {
                            cursor = maps.get("url");
                        }
                        if (f.equals("1"))
                            return cursor;
                    }
                }
            }
            return cursor;
        }
        catch (Exception ex)
        {
            Log.e("Get Url Video RTSP Exception======>>", ex.toString());
        }
        return urlYoutube;

    }

protected static String extractYoutubeId(String url) throws MalformedURLException
    {
        String id = null;
        try
        {
            String query = new URL(url).getQuery();
            if (query != null)
            {
                String[] param = query.split("&");
                for (String row : param)
                {
                    String[] param1 = row.split("=");
                    if (param1[0].equals("v"))
                    {
                        id = param1[1];
                    }
                }
            }
            else
            {
                if (url.contains("embed"))
                {
                    id = url.substring(url.lastIndexOf("/") + 1);
                }
            }
        }
        catch (Exception ex)
        {
            Log.e("Exception", ex.toString());
        }
        return id;
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-17T13:16:17.900

`VideoView`由于 YouTube 的当前版本，如果您要用于显示您的视频，您可能会收到“无法播放此视频”错误。

看看这个方法：http `YouTubePlayerView`: [//xinyustudio.wordpress.com/2014/03/17/android-development-play-youtube-video-in-your-app-cant-play-this-video-and-故障排除/](http://xinyustudio.wordpress.com/2014/03/17/android-development-play-youtube-video-in-your-app-cant-play-this-video-and-troubleshooting/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-13T01:52:03.190

使用 YouTube Android 播放器 API。它完美地工作。从这里查看我的示例：

活动主.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/activity_main"
android:layout_width="match_parent"
android:layout_height="match_parent"

tools:context="com.example.andreaskonstantakos.vfy.MainActivity">

<com.google.android.youtube.player.YouTubePlayerView
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:visibility="visible"
android:layout_centerHorizontal="true"
android:id="@+id/youtube_player"
android:layout_alignParentTop="true" />

<Button
android:text="Button"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:layout_centerHorizontal="true"
android:layout_marginBottom="195dp"
android:visibility="visible"
android:id="@+id/button" />

</RelativeLayout> 
```

MainActivity.java：

```
package com.example.andreaskonstantakos.vfy;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import com.google.android.youtube.player.YouTubeBaseActivity;
import com.google.android.youtube.player.YouTubeInitializationResult;
import com.google.android.youtube.player.YouTubePlayer;
import com.google.android.youtube.player.YouTubePlayerView;

public class MainActivity extends YouTubeBaseActivity {

YouTubePlayerView youTubePlayerView;
Button button;
YouTubePlayer.OnInitializedListener onInitializedListener;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     youTubePlayerView = (YouTubePlayerView) findViewById(R.id.youtube_player);
     button = (Button) findViewById(R.id.button);

     onInitializedListener = new YouTubePlayer.OnInitializedListener(){

         @Override
         public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer youTubePlayer, boolean b) {

            youTubePlayer.loadVideo("Hce74cEAAaE");

             youTubePlayer.play();
     }

         @Override
         public void onInitializationFailure(YouTubePlayer.Provider provider, YouTubeInitializationResult youTubeInitializationResult) {

         }
     };

    button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

youTubePlayerView.initialize(PlayerConfig.API_KEY,onInitializedListener);
        }
    });
}
} 
```

和 PlayerConfig.java 类：

```
 package com.example.andreaskonstantakos.vfy;

/**
 * Created by Andreas Konstantakos on 13/4/2017.
 */

public class PlayerConfig {

PlayerConfig(){}

public static final String API_KEY = 
"xxxxx";
} 
```

[将“Hce74cEAAaE”替换为来自https://www.youtube.com/watch?v=Hce74cEAAaE](https://www.youtube.com/watch?v=Hce74cEAAaE)的视频 ID 。从 Console.developers.google.com 获取您的 API_KEY，并在 PlayerConfig.API_KEY 上替换它。有关更多信息，您可以按照以下教程逐步操作：[https ://www.youtube.com/watch?v=3LiubyYpEUk](https://www.youtube.com/watch?v=3LiubyYpEUk)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T06:19:07.317

使用视频视图：

1.布局xml中的代码：

```
<VideoView

       android:layout_width=”wrap_content”

       android:layout_height=”wrap_content”

       android:id=”@+id/YoutubeVideoView” /> 
```

2.java类中的代码：

```
VideoView v = (VideoView) findViewById(R.id.YoutubeVideoView);

v.setVideoURI(Uri.parse(“rtsp://v4.cache3.c.youtube.com/CjYLENy73wIaLQlW_ji2apr6AxMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYOr_86Xm06e5UAw=/0/0/0/video.3gp”));

v.setMediaController(new MediaController(this)); //sets MediaController in the video view

// MediaController containing controls for a MediaPlayer                            

v.requestFocus();//give focus to a specific view

v.start();//starts the video 
```

我们通过为移动平台指定 Youtube 视频的 3gp 链接来设置 VideoUri。要添加播放、暂停、倒带、快进和进度滑块等媒体控件，我们将 MediaController 添加到 VideoView。

uri.parse（视频的 3gp 链接）...你可以从 youtube 获得这个

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T06:58:14.760

这取决于您接收 rtsp 的视频编解码器格式。有些设备不支持运行 .mp4 文件。通过[Android 媒体支持](http://developer.android.com/guide/appendix/media-formats.html)了解更多信息。检查您是否可以播放任何其他 .3gp 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-01T20:05:29.933

经过长时间的搜索，我找到了这种实现方式。

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.about_fragment, container, false);

    String frameVideo = "<html><body><br><iframe width=\"320\" height=\"200\" src=\"https://www.youtube.com/embed/XDYbEuY8nIc\" frameborder=\"0\" allowfullscreen></iframe></body></html>";

    WebView displayYoutubeVideo = (WebView) rootView.findViewById(R.id.videoView);
    displayYoutubeVideo.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            return false;
        }
    });
    WebSettings webSettings = displayYoutubeVideo.getSettings();
    webSettings.setJavaScriptEnabled(true);
    displayYoutubeVideo.loadData(frameVideo, "text/html", "utf-8");
  return rootView;
    } 
```

在 layout.xml 中：

```
 <WebView android:id="@+id/videoView"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:layout_marginTop="-45dp"
            android:layout_marginLeft="-5dp"/> 
```

这将运作良好。

# javascript - 在 jQuery 中使用 for 循环创建 div 并为每个 div 分配 ID

> ID：13814057
> 
> 赞同：2
> 
> 时间：2012-12-11T05:15:11.183
> 
> 标签：javascript, jquery, html, css

我目前正在使用 for 循环创建 div。

问题是当我尝试为在 for 循环中创建的每个 div 元素分配一个唯一的 id 时。

我越来越近了，但目前计数从 36 开始，而不是 1。

非常感谢你的帮助！

这是我的html：

```
<!DOCTYPE html>
<html>
<head>
<title>Intro Webpage!</title>

<meta charset="UTF-8" /> 
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; target-densitydpi=device-dpi" />
<link rel="stylesheet" type="text/css" href="style.css"/>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="script.js"></script>
</head>
<body>
</body>
</html> 
```

现在，这是我的 script.js：

```
for(i = 0; i < 35; i++) {
$(document).ready(function(){
    $('body').append('<div id="div'+ (i++) +'" />');
});
} 
```

另外，我的CSS：

```
div {
width: 167px;
height: 167px;
border-radius: 10px;
background-color: #ff0000;
display: inline-block;
margin-left: 5px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:17:10.603

您`loop in side document.ready instead of putting document.ready in loop`还需要添加您可能不需要`i`在循环体内增加，因为它`increamented`在循环签名中。**[您可以在此处](http://api.jquery.com/ready/)**阅读有关 document.ready的更多信息

```
$(document).ready(function(){
  for(i = 0; i < 35; i++) {
    $('body').append('<div id="div'+ i +'" />');
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T05:23:44.937

所有提供的答案都可以完成这项工作，但如果你想让它更快，你可以这样做。此外，如果您希望`div`id 以 1 开头，您应该这样做`++i`而不是`i++`. `i++`没有意义，因为这是由`for loop`自动完成的。

```
$(document).ready(function() {
    var divsToAppend = "";
    for (i = 0; i < 35; i++) {
        divsToAppend += '<div id="div' + (++i) + '" />';        
    }
    $('body').append(divsToAppend);
});​​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T05:17:41.437

尝试：

```
$(document).ready(function(){
    var html='';
    for(i = 0; i < 35; i++) {
        html += '<div id="div'+ i +'" />';
    }
    $('body').append(html);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T05:17:17.223

将 $(document).ready 从循环中拿出来供初学者使用。

```
$(document).ready(function() {
    // do loop here
} 
```

# asp.net-mvc - settings.Modal = true 有什么用；在 Devexpress MVC 弹出控件中

> ID：13814059
> 
> 赞同：-1
> 
> 时间：2012-12-11T05:15:17.223
> 
> 标签：asp.net-mvc, asp.net-mvc-3, popup, devexpress

实际上我正在使用 DevExpress MVC 扩展，并且我正在使用 PopUpControl。在浏览演示时，我发现了一个类似的声明

```
settings.Modal = true; 
```

谁能告诉我它的实际用途？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:26:43.013

当您设置`settings.Modal = true;`时，它将将此对话框视为模态对话框

# netbeans - Maven 类别未出现在 Netbeans 中

> ID：13814063
> 
> 赞同：1
> 
> 时间：2012-12-11T05:15:29.233
> 
> 标签：netbeans, maven-plugin

我将从 GeoTools 开始。Maven 安装正确，因为 cmd 提示显示版本 3.0.4。但在 Netbeans 6.5 中，**Maven Category**似乎并没有创建新项目。我现在应该经历什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:04:03.393

如果您的系统有足够的资源，请考虑将[Netbeans](http://netbeans.org/downloads/)升级到最新版本 7.2。它有内置的 maven 插件或打击链接可以帮助你。

[操作方法：为 Netbeans 6.5.x 安装 Maven](http://wiki.open-esb.java.net/Wiki.jsp?page=FujiHowToInstallMavenForNetbeans6.5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:21:37.310

请按照我给出的链接..它给出了关于 NetBeans IDE 和 Maven 存储库的正确解释

[NetBean IDE 中的 Maven 存储库](http://platform.netbeans.org/tutorials/nbm-maven-quickstart68.html)

# php - 我如何将 ajax 与 javascript 函数一起使用

> ID：13814066
> 
> 赞同：0
> 
> 时间：2012-12-11T05:16:05.087
> 
> 标签：php, javascript, ajax

我对 Ajax 很陌生。我正在使用以下 javascript 函数从那些用户选择**li**的列表中获取值。但是每次重新加载页面时都使用此功能。我正在尝试使用这个函数来使用 ajax。我怎样才能使用这个需要语法的 ajax。

我的功能：

```
 <script type="text/javascript" language="javascript">
    function pagelim(index)
{
    var page_lim=$('#page_num li').get(index).id; 
    self.location="<?php echo get_option('head'); ?>"+'?details&limit=' + page_lim ;
}
    </script>

    <script type="text/javascript" language="javascript">
    function dateby(index)
{
    var date_by=$('#sort-by-date a').get(index).id; 
    var cls=document.getElementById(date_by).className;
    if(date_by=="ASC")
    {
       date_by="DESC";

    }
    else
    {
       date_by="ASC";
    }
    self.location="<?php echo get_option('head'); ?>"+'?details&sort=' + date_by ;
}
    </script> 
```

从列表中获取值：

```
 <div class="sort-links">
       <span class="by-date" id="sort-by-date">Sort by: <a  href="#" id='<?php _e($sort_by)?>' class='<?php _e($class)?>' onclick="dateby($(this).index())" >Date</a>
    </span> 

    //list to select value 
    <span id="view-on-page">View on Page: <a href="#" class="down-arrow"><?php if($lim=="") { _e($limit); } else { _e($lim); }  ?></a>
                  <ul id="page_num">
                      <li id="5" onclick="pagelim($(this).index())"><a href="#">5</a></li>
                      <li id="10" onclick="pagelim($(this).index())"><a href="#">10</a></li>
                      <li id="15" onclick="pagelim($(this).index())"><a href="#">15</a></li>
                  </ul>
                </span> 
             </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:31:19.700

欢迎来到函数式编程的美妙世界。

我假设你正在做一个基于“索引”的“获取”请求，这是一个 url？如果是这种情况，那么您需要提供回调。

```
$('#page_num li').get(index. function(id) {
    var page_lim = id; // assuming that's what you sent back.
    self.location="<?php echo get_option('head'); ?>"+'?details&limit=' + page_lim ;
}); 
```

请注意，您必须将所有内容放在 ajax 请求完成后调用的函数中。我假设您从请求中发回的只是您需要的 id。

jQuery AJAX 调用是异步的，这意味着函数 $(...).get(url, callback); 在 AJAX 调用完成之前返回一个值。该回调函数仅在 AJAX 调用完成后发生。我建议花一些时间阅读 jQuery API 文档。

您也可以在 Google 上搜索“javascript 函数式编程”，看看是否可以解释 JavaScript（以及 jQuery）如何并不总是返回您期望的函数值。在这方面，它与 PHP 或 ASP.NET 等其他语言非常不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:22:43.140

嗨，希望这对您有所帮助...创建一个 div（例如“MyDiv”）并放置您想要动态更改的所有元素（无需刷新页面）...然后尝试[jQuery.load()](http://api.jquery.com/load/)方法...喜欢

```
<div id = "MyDiv">
<div class="sort-links">
       <span class="by-date" id="sort-by-date">Sort by: <a  href="#" id='<?php _e($sort_by)?>' class='<?php _e($class)?>' onclick="dateby($(this).index())" >Date</a>
    </span> 

    //list to select value 
    <span id="view-on-page">View on Page: <a href="#" class="down-arrow"><?php if($lim=="") { _e($limit); } else { _e($lim); }  ?></a>
                  <ul id="page_num">
                      <li id="5" onclick="pagelim($(this).index())"><a href="#">5</a></li>
                      <li id="10" onclick="pagelim($(this).index())"><a href="#">10</a></li>
                      <li id="15" onclick="pagelim($(this).index())"><a href="#">15</a></li>
                  </ul>
                </span> 
             </div>
</div> //end of MyDiv 
```

然后改变你的脚本

```
<script type="text/javascript" language="javascript">
    function pagelim(index)
{
    var page_lim=$('#page_num li').get(index).id; 
    $("#MyDiv").load("<?php echo get_option('head'); ?>"+'?details&limit=' + page_lim);
}
    </script>

    <script type="text/javascript" language="javascript">
    function dateby(index)
{
    var date_by=$('#sort-by-date a').get(index).id; 
    var cls=document.getElementById(date_by).className;
    if(date_by=="ASC")
    {
       date_by="DESC";

    }
    else
    {
       date_by="ASC";
    }
    $("#MyDiv").load("<?php echo get_option('head'); ?>"+'?details&sort=' + date_by);
}
    </script> 
```

请注意，我还没有测试过这个......

使用 jQuery 执行 AJAX 请求非常简单......所以请参考[这个页面](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:53:55.230

尝试绑定到链接的点击事件。这样，您可以删除任何内联 javascript 并将其全部整齐地包含在您的函数中。

```
$("li a").click(function() {
  //should alert the id of the parent li element
  alert($(this).parent.attr('id'));

  // your ajax call
  $.ajax({
    type: "POST",
    // post data to send to the server
    data: { id: $(this).parent.attr('id') }
    url: "your_url.php",
    // the function that is fired once data is returned from your url
    success: function(data){
      // div with id="my_div" used to display data
      $('#my_div').html(data);
    }
  });        
}); 
```

此方法意味着您的列表元素看起来像，

```
<li id="5"><a href="#">5</a></li> 
```

这看起来并不理想，因为 id="5" 是模棱两可的。

尝试类似的东西，

```
<li class="select_me">5</li> 
```

那么你的点击事件绑定看起来像这样，

```
// bind to all li elements with class select_me
$("li.select_me").click(function() {
  // alert the text inside the li element
  alert($(this).text());
}); 
```

# string - String lists applescript

> ID：13814068
> 
> 赞同：0
> 
> 时间：2012-12-11T05:16:35.533
> 
> 标签：string, macos, list, applescript, repeat

I am trying to have a list of applescript items but the things i'm adding are strings with multiple words. When I try to view lets say item 1 of my list, it ends up being all of the items in the list. I'm doing this from a repeat which might make a difference but I am very confused so anything that you think might work just post it. Thanks!!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T05:46:49.430

Here's how you do it. This shows 2 types of repeat loops and how you use them. Good luck!

```
set myList to {"some words", "more of them", "and a lot of words"}

repeat with i from 1 to count of myList
    set thisItem to item i of myList
    -- do something with thisItem
end repeat

-- or another way to do a repeat loop

repeat with anItem in myList
    set thisItem to contents of anItem
    -- Notice if we use a repeat loop like this (e.g. anItem) then anItem
    -- is just a reference to the words. To actually get the words
    -- we need to get the contents of anItem
end repeat 
```

# java - 为什么我在尝试从 Android 中的字符串解析整数时收到 NumberFormatException？

> ID：13814069
> 
> 赞同：2
> 
> 时间：2012-12-11T05:16:45.043
> 
> 标签：java, android, parseint, numberformatexception

我正在寻找基于自定义 ROM 工具的更新功能。我使用此代码[http://www.androidsnippets.com/check-for-updates-once-a-day](http://www.androidsnippets.com/check-for-updates-once-a-day)作为基础，并很快意识到我无法使用 Dropbox 来部署该代码。所以我修改了代码以从 Dropbox 下载一个 version.txt 文件。该文件包含一个数字（最新版本代码，在本例中为 11）。我需要读取该行并将字符串解析为整数以与当前 versionCode 进行比较，并在存在更新时触发下载。除了从 txt 文件中解析 int 之外，所有代码都有效。

这是我的代码：

```
 private Thread checkUpdate = new Thread() {
public void run() {
    try {

        File sdcard = Environment.getExternalStorageDirectory();
        File file = new File(sdcard,"BPversion.txt");
        StringBuilder text = new StringBuilder();
        BufferedReader br = new BufferedReader(new FileReader(file));
        String line;
        while ((line = br.readLine()) != null) {
            text.append(line);

        int curVersion = getPackageManager().getPackageInfo("com.JB15613.BPcolorTool", 0).versionCode;
        System.out.println(line);
        int newVersion = 0;
        System.out.println(line);

        try {
            newVersion = Integer.parseInt(line);
            System.out.println(line);
        } catch(NumberFormatException nfe) {
            System.out.println("Exception " + nfe);
        }

        if (newVersion > curVersion) {
            mHandler.post(showUpdate);
        }    
        }
    } catch (Exception e) {
        Log.d("ANDRO_ASYNC", "Caught exception");

    }
} 
```

我得到了这个例外：

```
 Exception java.lang.NumberFormatException: Invalid int: "11" 
```

当我应用断点并运行调试器时，它会在 parseInt 行崩溃。

11 对我来说看起来像是一个有效的 int ！

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:25:10.333

行结束 CRLF ，所以，需要在 String 中调用函数 trim() ..

```
int newVersion = Integer.parseInt(line.trim()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T11:34:24.210

我只想补充已经说明的内容：

您的问题是您的 11 无法解析为 int，其根本原因是您将空格作为字符串的一部分进行解析。

如前所述， trim() 方法应该可以解决问题，但是如果您想知道是什么导致了问题以及为什么要修复它，那么这就是原因。

您不是在尝试解析“11”，而是在解析诸如“11”或“11”之类的东西，这是另一回事。您正在读取的文件中的空格被包含在您的字符串中，因为它被传递到 parseInt 方法中。

同样，我知道这已得到解答，但我认为这些附加信息仍然有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T06:01:09.337

**尝试在 logcat 或 screen 或 ui 中打印 line 的值。**
检查将会发生什么。一个有效的 int 即将到来或任何其他的即将到来。
我认为**行不包含有效的 int。**

```
 Exception java.lang.NumberFormatException 
```

**由于int格式或数字格式无效而引发上述异常。**
检查线的值

# oauth - Intuit 合作伙伴平台 - 我们应该寻找哪些返回状态来检查 OAuth 令牌是否仍然有效？

> ID：13814074
> 
> 赞同：4
> 
> 时间：2012-12-11T05:17:04.463
> 
> 标签：oauth, intuit-partner-platform

在通过 Intuit 技术审查时，Intuit 表示我们需要在我们的应用程序中检查以确保 OAuth 令牌仍然有效。

到目前为止，我发现当 OAuth 令牌无效时可能会发生至少两个不同的返回码 - 是否不止两个？我们应该寻找哪些其他返回码？

目前发现：

*   HTTP 401 未经授权
*   HTTP 200 OK + 错误代码 3200

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T06:57:08.077

唯一应该使用的 HTTP 状态是 401 Unauthorized。任何其他响应状态要么是错误，要么是 Intuit 方面规范的错误实现。

令牌可能是有效的，只是不适用于您尝试访问的资源。在这些情况下，务实并真正为 API 使用者指定为什么他们会得到 401 是很好的。Intuit 可能会用 200 + 错误代码覆盖这种情况。但这只是一个猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:19:12.247

Keith，请记住，您不必检查令牌是否无效，您应该始终知道。如果客户断开连接，那么他们将被发送到具有领域的 OpenId 端点，您可以在其中找到它们并断开它们。

或者，如果您断开连接，那么您就知道它无效。

但是，是的，这是一个错误，它应该只是未经授权的。我只是想指出，在正常用例下调用之前，您应该知道状态。

震动

# c++ - 交叉引用类对象

> ID：13814076
> 
> 赞同：1
> 
> 时间：2012-12-11T05:17:13.963
> 
> 标签：c++

我做了这样的事情：

```
struct Vertex {
  list<Edge*> edges;
};

struct Edge {
  Vertex* v1;
  Vertex* v2;
}; 
```

和编译器错误：

> 'Edge' 未在此范围内声明

如果不将这两个放入单独的标题“vertex.h”和“edge.h”中，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T05:19:27.467

在使用 前使用**前向声明**`Edge`。

```
struct Edge;

struct Vertex 
{
    list<Edge*> edges;
}; 
```

请注意，当您转发声明一个*类型*时，编译器将该类型视为*Incomplete 类型*，它对类型的布局一无所知，但它只知道该类型存在，因此如何使用 Incomplete 存在一些限制类型。

**好读：**
[我什么时候可以使用前向声明？](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:19:59.310

您可以前向声明类型：

```
struct Vertex;
struct Edge {
   Vertex* v1;
   Vertex* v2;
}; 
```

话虽如此，让一个顶点知道它的边列表可能不是一个好的图设计。如果你想在多个图中重用相同的顶点怎么办？（例如，机场可能是不同人使用的多个不同行程中的一个合理顶点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T05:21:10.310

如果您的类型通过指针相互使用，您可以在定义另一个类型之前前向声明其中一个。例如像这样：

```
struct Vertex;
struct Edge { Vertex* v1; Vertex* v2; };
struct Vertex { list<Edge*> edges; }; 
```

# mysql - 如何执行 MySQL 查询以格式化和移动数据？

> ID：13814077
> 
> 赞同：1
> 
> 时间：2012-12-11T05:17:13.230
> 
> 标签：mysql, select, group-by

我目前有一个 34,930,054 行的 MySQL 数据库，其格式设置为条目（以前的编码人员的工作）位于 3 列表中的多行中，即：

```
Part number 1 | height | 5cm  
Part number 1 | length | 10cm  
Part number 1 | width  | 5cm   
Part number 2 | length | 1cm  
Part number 2 | height | 3cm  
Part number 2 | width  | 8cm 
```

我想将数据合并到一个更干净的 2 列表中以供以后输出。IE：

```
Part number 1 | height: 5cm  <br /> length: 10cm <br /> width: 5cm  
Part number 2 | height: 1cm  <br /> length: 3cm <br /> width: 8cm 
```

如何查找具有相同部件号的所有行，以上述 2 列格式将行插入新表（第 1 列中的部件号以及原始表中第 2 列和第 3 列中的所有数据到新表的第 2 列桌子）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:24:18.557

尝试这个：

```
INSERT INTO parts_new (partnum, description)
SELECT partNum, GROUP_CONCAT(CONCAT(measurement_type, ' : ', measurement_value) 
              ORDER BY FIELD(measurement_type, 'height', 'length', 'width')  
              SEPARATOR ' <br /> ') description
FROM parts_old
GROUP BY partNum 
```

**或者**

```
INSERT INTO parts_new (partnum, width, LENGTH, height)
SELECT partNum, SUM(width) width, SUM(LENGTH) LENGTH, SUM(height) height
FROM (SELECT partNum, IF(measurement_type='width', measurement_value, 0) width, 
        IF(measurement_type='height', measurement_value, 0) height, 
        IF(measurement_type='length', measurement_value, 0) LENGTH
FROM parts_old) AS A
GROUP BY partNum 
```

检查链接[**MySQL INSERT INTO...SELECT**](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:46:03.907

由于我不知道您的真实表名和列名，因此我将假装它们看起来像这样：

**part_old（数据库表）**

```
partnum   measurement_type  measurement_value
-------   ----------------  -----------------
1         width             5
1         length            10
1         height            5
2         width             8
2         length            1
2         height            3 
```

如果我正确理解您的问题，您希望得到以下结果：

**part_new（数据库表）**

```
partnum   width  length  height
-------   -----  ------  ------
1         5      10      5
2         8      1       3 
```

使用正确的列类型构建新表后，您可以使用以下 SQL 将数据从旧表迁移到新表：

```
insert into parts_new (partnum, width, length, height)
(
    select 
        h.partnum as partnum,
        w.measurement_value as width,
        l.measurement_value as length,
        h.measurement_value as height 
    from 
        parts_old as w
    inner join 
        parts_old as l on l.partnum = w.partnum
    inner join
        parts_old as h on h.partnum = w.partnum
    where 
        w.measurement_type = 'width'
        and
        l.measurement_type = 'length'
        and
        h.measurement_type = 'height'    
    group by 
        h.partnum
) 
```

我使用 Sequel Pro 在 MySQL 5.1 上对此进行了测试，以确保它可以正常工作。

# html - 无法从 HTTP 请求获取图像

> ID：13814092
> 
> 赞同：0
> 
> 时间：2012-12-11T05:19:17.827
> 
> 标签：html, ajax, jquery, get, httprequest

我已经检查了图像，它们确实存在于服务器上。

我已经用这段代码在 CSS 规则中包含了图像

```
.Invite{background: url("../images/interface/Shop/Btn_Ad_Invite_all.png") 0px 0px;}
.Invite:hover{ background-position-x: -86px; }
.Invite:active{ background-position-x: -172px; }

<div class="Button Invite" onclick="invite()"></div> 
```

我正在尝试使用 jQuery Ajax get 并尝试在浏览器控制台中使用此代码将图像注入正文

```
$.get("https://fb.spot-the-differences.com/test/images/interface/Shop/Btn_Ad_Invite_all.png");
$.get("images/interface/Shop/Btn_Ad_Invite_all.png");
$("body").append("<img src='https://fb.spot-the-differences.com/test/images/interface/Shop/Btn_Ad_Invite_all.png'/>");
$("body").append("<img src='images/interface/Shop/Btn_Ad_Invite_all.png'/>"); 
```

我所有的浏览器（IE、Firefox、Chrome）都说无法获取图像而没有响应。我本地网络中的其他计算机可以毫无问题地获取图像。

如果我复制图像 url 并粘贴到浏览器地址，我可以毫无问题地接收图像：

![在此处输入图像描述](../Images/49a1a2cf47df82349d563baaf7411c98.png)

有人可以解释为什么会发生这种情况以及如何解决这个问题我不希望这种情况发生在我网站上的客户身上。

我将不胜感激任何形式的对话或帮助。

当我尝试将有问题的图像的路径更改为任何不准确的路径时，我发现了可疑的事情，我仍然得到状态 failed 而不是 404 not found 像这样

```
<img src='http://google.Shop/Btn_Ad_Invite_all.png'/> 
```

[jsfriddle](http://jsfiddle.net/fQK5K/1/)我看到 IMG4 与 IMG2 相同，甚至图像损坏图标也没有出现

我需要一些建议非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:35:41.437

看起来您使用的是与网页不同的协议（HTTPS 与 HTTP），这可能会导致浏览器出现跨域安全问题。尝试：

```
 $.get("http://fb.spot-the-differences.com/test/images/interface/Shop/Btn_Ad_Invite_all.png"); 
```

或者这应该与页面协议无关

```
$.get("/test/images/interface/Shop/Btn_Ad_Invite_all.png"); 
```

如果您的目标是动态显示图像，我确实同意一些评论，尽管设置图像标签的 src 属性并使用 css 定位精灵。例如：

```
 $('img').attr('src', '/test/images/interface/Shop/Btn_Ad_Invite_all.png');) 
```

# iphone - 如何在 iOS 应用中播放 youtube 的私人频道视频

> ID：13814099
> 
> 赞同：1
> 
> 时间：2012-12-11T05:19:54.307
> 
> 标签：iphone, ios, video, youtube, private

我想在我的应用程序中播放私人视频，要求是：用户应该能够在不询问用户名和密码的情况下播放私人视频。我有用户名和密码。我可以硬编码并向客户展示。我想知道如何做到这一点？请帮我。任何帮助表示赞赏。谢谢

# cocos2d-iphone - 通过从不同点（例如在 Photoshop 中）倾斜 CCSprite 来弯曲它

> ID：13814102
> 
> 赞同：1
> 
> 时间：2012-12-11T05:20:11.657
> 
> 标签：cocos2d-iphone, ccsprite

嗨，我正在将 Cocos2d 与 Box2d 一起使用。

我有一个“Stick.png”作为 CCSprite 现在我想将它从中心向下**弯曲**并从图像的末端和开始向上弯曲.. 我正在尝试制作像爬山这样的游戏，它只使用草带的一个绿色图像用于游戏中使用的**整车**路径/道路。

我将不胜感激。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:08:50.380

您可以使用[skewX skewY 属性](http://www.learn-cocos2d.com/api-ref/latest_2.x/cocos2d-iphone/html/interface_c_c_node.html#a3ab54b6652338e7d575ee14971147cbf)来实现此效果。还有 CCSkewBy 和 CCSkewTo 动作来动画倾斜。

# objective-c - 如何通过现有对象创建实例

> ID：13814108
> 
> 赞同：2
> 
> 时间：2012-12-11T05:20:59.340
> 
> 标签：objective-c, cocoa, nsnumber, objective-c-runtime

我已经尝试了以下代码。它崩溃了

```
 NSNumber* a = [[NSNumber alloc] initWithLong:12];
    NSNumber* b = [[NSClassFromString([NSString stringWithUTF8String:object_getClassName(a)]) alloc] initWithLong:12]; 
```

以下代码也崩溃了。

```
 NSNumber* a = [[NSNumber alloc] initWithLong:12];
    NSNumber* b = [[a class] alloc] initWithLong:12]; 
```

但以下代码有效

```
 NSNumber* b = [[NSClassFromString(@"NSString") alloc] initWithLong:12] 
```

当我想从 NSNumber 的实例中获取类名时。它总是返回“__NSCFNumber”而不是“NSNumber”。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:31:01.370

NSNumber 是一个“抽象类”，这意味着虽然它代表多个类，但它生成的对象不会以`class`您可能期望的方式响应消息。

[您可以在Apple 的类集群文档](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html)中了解更多关于抽象类的信息。

# c - mmap() 拥有内存块

> ID：13814111
> 
> 赞同：0
> 
> 时间：2012-12-11T05:21:16.343
> 
> 标签：c, linux, unix, mmap

我调用了 mmap()，我尝试使用`MAP_ANONYMOUS`如下方式映射 64MB：

```
void *block = mmap(0, 67108864, PROT_READ, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);
if (block == MAP_FAILED)
    exit(1); 
```

我知道要真正拥有内存，我需要点击那块内存。我想添加某种 0 或空字符串来实际拥有内存。我该怎么做？我尝试了以下方法，但这显然是段错误（我知道为什么会这样）：

```
char *temp = block;
for (int i = 0; i < 67108864; i++) {
    *temp = '0';
    temp++;
} 
```

我如何通过在该块中分配某些东西来实际获得该块的所有权？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:15:30.747

您的进程已经拥有内存，但我认为您想要的是使其常驻。也就是说，您希望内核为`mmap`ed 区域分配物理内存。

内核为进程分配了一个虚拟内存区域（VMA），但这只是指定了一个有效区域，并没有实际分配物理页面（或有时也称为帧）。要让内核在页表中分配条目，您需要做的就是强制页错误。

强制页面错误的最简单方法是像您正在做的那样触摸内存。但是，因为您的页面大小几乎可以肯定是 4096 字节，您实际上只需要每 4096 字节读取一个字节，从而减少您实际需要做的工作量。

最后，因为您正在设置 pages `PROT_READ`，您实际上会想要从每个页面中读取而不是尝试写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:07:37.403

你的问题表述的不是很好。我不明白**为什么您认为该过程不拥有通过获得的内存`mmap`**？

你新的`mmap`记忆区只有`PROT_READ`（所以你可以读里面的零），你需要它才能在`PROT_READ|PROT_WRITE`里面写。

但是一旦`mmap`返回，您的进程就已经“拥有”了内存。

如果进程的 pid 为 1234，您可以通过顺序读取（可能`cat /proc/1234/maps`在不同的终端中）其内存映射`/proc/1234/maps`；从您的流程内部，使用`/proc/self/maps`.

也许您对[内存过量](http://maboelnour.wordpress.com/2011/09/16/memory-overcommit-in-linux-memory-management/)使用感兴趣；有一种方法可以禁用它。

也许[mincore(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mincore.2.html)、[msync(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/msync.2.html)、[mlock(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mlock.2.html)系统调用会让你感兴趣。

也许你想要[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)`MAP_POPULATE`的or`MAP_LOCKED`标志

^(我实际上不明白你为什么在你的问题中说“拥有记忆”，我不太明白。如果您只想禁用内存过度使用，请告诉。)

你也可能`mmap`有一些文件段。我相信在这种情况下没有可能的过度使用。但我只是建议禁用整个系统中的内存过度使用，通过`/proc/sys/vm/overcommit_memory`.

# javascript - 使用 eq() 和 find() 添加一个类

> ID：13814112
> 
> 赞同：1
> 
> 时间：2012-12-11T05:21:24.493
> 
> 标签：javascript, jquery, html, jquery-selectors

我在包含的 div 中有几个 div，例如：

```
<div id="container">

 <div class="itmeholder">
  <div class="item">
  </div>
 </div>
 <div class="itmeholder">
  <div class="item">
  </div>
 </div>
 <div class="itmeholder">
  <div class="item">
  </div>
 </div>
 <div class="itmeholder">
  <div class="item">
  </div>
 </div>

</div> 
```

我想向第二个“项目”div 添加一个类，所以我创建了：

```
$('#container:eq(1)').find('.item').addClass('newclass'); 
```

这不起作用。我也尝试过使用`nth-child()`，也无济于事。

任何人都可以向我建议一个更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:22:04.813

您缺少`#`id 选择器，还需要修改选择器。

**[现场演示](http://jsfiddle.net/rajaadil/qpc3d/)**，

```
$('#container .itmeholder:eq(1)').find('.item').addClass('newclass'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:25:23.707

试试这个

```
$('#container').find('.item').eq(1).addClass('newclass');​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T05:30:04.487

首先，您分别定位容器：

```
$('#container') 
```

然后获取它的孩子，将其限制为只有第二个孩子：

```
 .children(':eq(1)') 
```

执行其余的搜索和操作：

```
 .find('.item')
    .addClass('newclass'); 
```

完整代码：

```
$('#container')
    .children(':eq(1)')
    .find('.item')
    .addClass('newclass'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T05:34:08.997

可能这就是你想要的：

```
$('#container').find('.item').eq(1).addClass('newClass') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T05:24:25.463

```
$('#container .itmeholder:eq(1)').find('.item').addClass('newclass'); 
```

首先找到内部元素 childs 并使用 eq 找到所需的项目并为其添加类

# mysql - 查看帮助。从 3 个表中提取数据

> ID：13814120
> 
> 赞同：1
> 
> 时间：2012-12-11T05:22:24.563
> 
> 标签：mysql

好的，我需要一些关于这个主题的重要帮助。这就是我需要视图做的事情。需要取出勤表中 DKP_Change 列的 Sum

```
 SELECT SUM(a.DKP_Change) FROM Attendance AS a GROUP BY Name 
```

从字符表中添加初始 DKP 的值

```
 SELECT b.Inital_DKP FROM Characters AS b GROUP BY Name 
```

减去团队掉落的总和

```
 SELECT SUM(c.Cost) FROM Raid_Drops AS c GROUP BY Name 
```

我对 VIEWS 的想法完全陌生，我不知道从哪里开始，视图的名称应该是 DKP，列应该是 Name 和 Total_DKP，其中总 dkp 是根据上面的 select 语句计算的。

这是所有 3 个表的创建。

```
CREATE TABLE `Attendance` (
 `Date` date NOT NULL,
 `Name` varchar(20) NOT NULL,
 `Hours` int(11) NOT NULL,
 `Penalty` float NOT NULL,
 `Rank` set('Raider','Core','Elite') NOT NULL,
 `Rate` int(11) NOT NULL,
 `DKP_Change` float NOT NULL,
 `RecordNumber` int(11) NOT NULL AUTO_INCREMENT,
 PRIMARY KEY (`RecordNumber`)
) ENGINE=MyISAM AUTO_INCREMENT=15 DEFAULT CHARSET=latin1

CREATE TABLE `Characters` (
 `ID` int(11) NOT NULL AUTO_INCREMENT,
 `Name` varchar(25) NOT NULL,
 `Class` varchar(25) NOT NULL,
 `Spec` varchar(25) NOT NULL,
 `Position` set('Healer','Tank','DPS') NOT NULL COMMENT 'Healer, Tank, or DPS',
 `Usable` set('Cloth','Mail','Plate') NOT NULL COMMENT 'Type of Usable Armor? Cloth,        Mail, Or Plate',
 `Primary Stat` set('Agility','Strength','Intellect','Healer','Tank') NOT NULL COMMENT     'Used for Sorting Only(ie dps trinket with agility strength dps not eligible)',
 `Initial_DKP` int(11) NOT NULL COMMENT 'DKP given at the start of current tier.',
 `Total_DKP` int(11) NOT NULL COMMENT 'Huge Complicated Mess.',
 PRIMARY KEY (`ID`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=latin1

CREATE TABLE `Raid_Drops` (
 `Record Number` int(11) NOT NULL,
 `Date` date NOT NULL,
 `Name of Item` varchar(25) NOT NULL,
 `Item Slot` enum('Main Hand','Off Hand','Head','Neck','Shoulder','Back','Chest','Wrist','Hands','Waist','Legs','Feet','Ring 1','Ring 2','Trinket 1','Trinket 2') NOT NULL,
 `Player_Name` varchar(25) NOT NULL,
 `Cost` float NOT NULL,
 PRIMARY KEY (`Record Number`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:50:00.527

你可以

*   加入子选择中的三个表，分组`Name`
*   对每个子选择的结果执行计算

我唯一不完全清楚的部分是其中的名称`Characters`是否唯一。如果是，您可以放弃该组。否则，AVG 可能会给您带来意想不到的结果。

**SQL 语句**

```
SELECT sumA
       , initialB
       , sumC
       , sumA + initialB - sumC
       , a.Name
FROM   (
         SELECT Name, SUM(DKP_Change) AS sumA 
         FROM Attendance 
         GROUP BY Name
       ) AS a
       INNER JOIN (
         SELECT Name, Inital_DKP AS initialB 
         FROM Characters 
       ) AS b ON a.Name = b.Name
       INNER JOIN (
         SELECT Name, SUM(Cost) AS sumC 
         FROM Raid_Drops 
         GROUP BY Name
       ) AS c ON c.Name = b.Name 
```

# c# - XNA 和 windows phone 7 中的开始按钮

> ID：13814123
> 
> 赞同：0
> 
> 时间：2012-12-11T05:22:43.217
> 
> 标签：c#, windows-phone-7, xna, windows-phone, xna-4.0

为WP7写一个xna游戏，想知道，在玩游戏的过程中，如果我按下开始按钮，理想情况下会发生什么？1.识别开始按钮事件，当前状态保存和重新加载游戏的代码回来了吗？2.没有代码，WP7会处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:58:20.330

如果“开始”按钮是指 windows/home 按钮，那么您不会在那里实现任何功能。后退按钮是一种不同的情况，它的功能有非常具体的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:51:43.473

WP7 将处理它。您的游戏将冻结在当前状态。您将能够使用后退按钮返回到该状态。

# dotnetnuke - 如何获取 dotnetnuke 中的所有角色组

> ID：13814125
> 
> 赞同：5
> 
> 时间：2012-12-11T05:22:50.803
> 
> 标签：dotnetnuke

RoleController.GetRoleGroups(portalid); 仅提供用户创建的组，而不是默认创建的全局角色组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:37:23.303

您可以`RoleController.GetRoleGroups()`为此使用：-

```
 var arrGroups = RoleController.GetRoleGroups(portalSettings.PortalId);
   foreach (RoleGroupInfo roleGroup in arrGroups)
   {
    //Your Logic goes here :-
   } 
```

您可以`RoleController.GetRoles()`为此使用：-

此方法有两个重载：-

```
 IList<RoleInfo> GetRoles(int portalId, Func<RoleInfo, bool> predicate);

 IList<RoleInfo> GetRoles(int portalId); 
```

您可以在此处查看[源代码](http://searchco.de/codesearch/view/10045379)：-

这就是您可以使用该方法的方式：-

```
foreach (var role in TestableRoleController.Instance.GetRoles(portalId))
{
    // you can Put your Logic here :-
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T12:19:42.673

全局角色组实际上是没有角色组。因此，“全局”组是组 ID 为 的角色`-1`。

# c - 使用 %c 时，奇数循环不起作用

> ID：13814128
> 
> 赞同：6
> 
> 时间：2012-12-11T05:23:08.383
> 
> 标签：c, scanf

我正在学习 C 编程。`%c`我写了一个奇怪的循环，但在我使用in时不起作用`scanf()`。
这是代码：

```
#include<stdio.h>
void main()
{
    char another='y';
    int num;
    while ( another =='y')
    {
        printf("Enter a number:\t");
        scanf("%d", &num);
        printf("Sqare of %d is : %d", num, num * num);
        printf("\nWant to enter another number? y/n");
        scanf("%c", &another);
    }
} 
```

但是如果我`%s`在这段代码中使用，例如`scanf("%s", &another);`，那么它工作正常。
为什么会这样？任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T05:29:02.507

转换从输入中`%c`读取下一个单个字符，无论它是什么。在这种情况下，您之前使用 读取了一个数字`%d`。您必须按回车键才能读取该数字，*但*您没有做任何事情来从输入流中读取换行符。因此，当您进行`%c`转换时，它会从输入流中读取换行符（无需等待您实际输入任何内容，因为已经有输入等待读取）。

当您使用`%s`时，它会跳过任何前导空白以获取除空白以外的某些字符。它将换行符视为空白，因此它隐式跳过等待的换行符。由于（可能）没有其他内容等待阅读，因此它会继续等待您输入某些内容，正如您显然希望的那样。

如果要`%c`用于转换，可以在格式字符串中在其前面加上一个空格，这也将跳过流中的任何空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:43:03.027

在您输入第一个 scanf %d 的数字后，ENTER 键位于标准输入流中。该键被 scanf %c 行捕获。

使用`scanf("%1s",char_array); another=char_array[0];`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T05:28:29.350

在这种情况下使用`getch()`而不是。`scanf()`因为 scanf() 需要 '\n' 但您在该 scanf() 处只接受一个字符。所以 '\n' 给下一个 scanf() 造成混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T05:30:52.197

```
#include<stdio.h>
void main()
{
char another='y';
int num;
while ( another =='y')
{
    printf("Enter a number:\t");
    scanf("%d", &num);
    printf("Sqare of %d is : %d", num, num * num);
    printf("\nWant to enter another number? y/n");
    getchar();
    scanf("%c", &another);
}
} 
```

# android - 默认使用 Google 即时搜索

> ID：13814130
> 
> 赞同：1
> 
> 时间：2012-12-11T05:23:13.317
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean, google-now

我正在为 Google Now 开发一个应用程序，在我的手机中，我有两个语音命令选项。一种是谷歌搜索，另一种是语音搜索。默认情况下，我想使用 Google 搜索，结果应该出现在 Google Now Voice 中。

# android - Android Google Analytics 连接到服务失败 1

> ID：13814131
> 
> 赞同：2
> 
> 时间：2012-12-11T05:23:13.827
> 
> 标签：android, google-analytics

我尝试使用以下代码 onCreate 在我的 Android 应用程序上实现谷歌分析，但在谷歌分析（实时）模式下似乎什么都没有出现，我检查了 GAV2 Catlog 如下：

连接到服务失败 1

未找到广告系列

bindService 返回 false.......

不知道 ？！！！！！！我的 iphone 应用程序版本可与 google 分析一起使用，但 android 尚无法使用...

任何人都给我提示。

谢谢。

```
 Context mCtx = this; // Get current context.
  GoogleAnalytics myInstance = GoogleAnalytics.getInstance(mCtx.getApplicationContext());
  myInstance.setDebug(true);
  Tracker myNewTracker = myInstance.getTracker("UA-XXXXXXXX-1"); // A new tracking ID.
  myNewTracker.trackView("/app_launched"); 
```

# google-maps - 如何使用 google.maps.Size

> ID：13814132
> 
> 赞同：-2
> 
> 时间：2012-12-11T05:23:16.603
> 
> 标签：google-maps, google-maps-api-3

在实例化 google.maps.Map 类的对象时，我想设置地图的宽度和高度。

```
 var mapOptions = {                
                   center: new google.maps.LatLng(122.5, 200),                 
                   mapTypeId:google.maps.MapTypeId.HYBRID;
                   zoom: 15,                   
                   scaleControl: false,       
                };
                this.map.mapObject = new google.maps.Map(document.getElementById("google_map"), mapOptions); 
```

我正在使用上面的代码来创建谷歌地图的实例，但我不知道如何使用 google.maps.Size 类。

谁能解释一下如何使用 google.maps.Size 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:52:27.533

[MapOptions 对象](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)中没有 size 属性。您必须确保您的 HTML 元素（“google_map”）在创建地图时具有有效的大小，或者在地图对象具有有效大小时触发“resize”事件。

# iphone - 如何使用 iphon sdk 将我们自己的 iphone 应用程序添加到 iAd 控制器中？

> ID：13814137
> 
> 赞同：0
> 
> 时间：2012-12-11T05:23:50.930
> 
> 标签：iphone, ios4, app-store-connect, iad, itunes-store

我是我的 iPhone 应用程序，我正在使用 iAd 控制器。在这个 iAd 控制器中，我想宣传我们自己的移动应用程序。我怎样才能做到这一点。iTunes Connect 中是否有任何设置。

请在这个问题上帮助我

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T05:49:24.007

您可以只使用一个简单的 UIView 动画以同样的方式展示您的广告。在 iTunes Connect 中，我相信您只能排除要放置在您的应用程序中的广告。

```
//yourObject setHidden to NO
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:.5];
self.yourObject.center = CGPointMake(x, y);
self.yourObject.transform = CGAffineTransformMakeRotation(0);
[UIView commitAnimations]; 
```

您可以使用这些动画来模仿 iAd 或创建自己的广告。您也可以只在视图上静态显示广告，或者使用

```
yourObject.alpha = 1; 
```

而不是 commitAnimations 上面的两行。

# mysql - 如何获取几个不同时间范围的唯一值 WHERE exec_datetime >= NOW() - INTERVAL n DAY？

> ID：13814141
> 
> 赞同：0
> 
> 时间：2012-12-11T05:24:20.673
> 
> 标签：mysql, sql, date, select

我可以选择单个时间范围内的唯一 IP 地址总数

```
SELECT COUNT(DISTINCT ip_address) as ip_addr, exec_datetime
FROM requests
WHERE exec_datetime >= NOW() - INTERVAL 1 DAY;

ip_addr exec_datetime
45      12/10/2012 5:21 
```

如何在单个查询中返回以下子句的结果集...

```
WHERE exec_datetime >= NOW() - INTERVAL 1 DAY;
WHERE exec_datetime >= NOW() - INTERVAL 2 DAY;
...
WHERE exec_datetime >= NOW() - INTERVAL 14 DAY; 
```

...所以结果集看起来像这样？

```
ip_addr exec_datetime
45      11/26/2012 5:21
85      11/27/2012 5:21
130     11/28/2012 5:21
170     11/29/2012 5:21
...     ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:59:20.567

我会使用这样的东西：

```
SELECT
  COUNT(DISTINCT requests.ip_address) ip_addr,
  days.day
FROM
  (SELECT now()-INTERVAL 1 DAY as day UNION
   SELECT now()-INTERVAL 2 DAY UNION
   ...
   SELECT now()-INTERVAL 14 DAY) days
  INNER JOIN requests
  on requests.exec_datetime >= days.day
GROUP BY
  days.day 
```

# jsrender - JSRender：任何关于 JSRender 的优秀文档

> ID：13814144
> 
> 赞同：0
> 
> 时间：2012-12-11T05:24:38.210
> 
> 标签：jsrender

我们在我们的应用程序中使用 JSRender，这是一个社交网络应用程序。我发现 JSRender 在市场上是非常新的，还没有好的文档......如果有人有任何信息可以在哪里找到好的文档，请分享链接......提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:34:29.603

虽然我不愿将这些文章称为“文档”，但这些链接对我很有帮助：

[http://msdn.microsoft.com/en-us/magazine/hh882454.aspx](http://msdn.microsoft.com/en-us/magazine/hh882454.aspx)
[http://msdn.microsoft.com/en-us/magazine/hh882454.aspx](http://msdn.microsoft.com/en-us/magazine/hh882454.aspx)

否则，它是 Boris Moore 在 github 上的演示站点：

[http://borismoore.github.com/jsrender/demos/demos.html](http://borismoore.github.com/jsrender/demos/demos.html)

我在问题列表中的 Boris 回复中也发现了一些要点：

[https://github.com/BorisMoore/jsrender/issues](https://github.com/BorisMoore/jsrender/issues)

* * *

更新：文档现在位于[https://www.jsviews.com](https://www.jsviews.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:27:46.497

这是关于[jsRender](http://pluralsight.com/training/Courses/TableOfContents?courseName=jsrender-fundamentals)的培训课程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:49:42.403

我刚刚花了最后一个小时寻找一些文档......没有运气。

这是另一篇有用的文章 [http://msdn.microsoft.com/en-us/magazine/hh975379.aspx](http://msdn.microsoft.com/en-us/magazine/hh975379.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-10T16:53:15.227

“jQuery Hotshot”一书在其某些章节中使用了 jsrender

# android - TextView 如何仅在左侧、顶部和底部设置边框

> ID：13814145
> 
> 赞同：5
> 
> 时间：2012-12-11T05:24:38.333
> 
> 标签：android

这是我的编码。这是 TextView 4 边框的设计蓝色。我想要的是只为 3 个边框（顶部、左侧和底部）设计。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#449def" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="0dp" />
            <padding
                android:left="5dp"
                android:top="5dp"
                android:right="5dp"
                android:bottom="5dp" />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:startColor="#ffffff"
                android:endColor="#ffffff"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="0dp" />
            <padding
                android:left="5dp"
                android:top="5dp"
                android:right="5dp"
                android:bottom="5dp" />
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T05:29:32.600

下面的代码放置在 1dp 高度的底部，你必须在其他方面玩这个

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<!-- This is the line -->
<item>
  <shape>
        <solid android:color="#535353" />
  </shape>
</item>

<!-- This is the main color -->
<item android:bottom="1dp">
 <shape>
       <solid android:color="#252525" />
 </shape>
</item>
</layer-list> 
```

参考这个讨论[Open-sided Android stroke？](https://stackoverflow.com/questions/2422120/open-sided-android-stroke)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:38:42.607

这是一个快速的解决方案（可能是愚蠢的），添加`android:translationX="2dp"`您的`TextView`，您可以添加`android:paddingRight="2dp"`以弥补丢失的空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-31T16:19:18.220

像这样试试

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape>
            <padding android:bottom="1dp" android:left="1dp" android:right="0dp"
                android:top="1dp"/>
            <solid android:color="#000"/>
        </shape>
    </item>

    <!-- Background -->
    <item>
        <shape>
            <solid android:color="@color/white"/>

        </shape>
    </item>
</layer-list> 
```

# ms-access - 如何在 MS Access 数据库的所有表中查找列名？

> ID：13814148
> 
> 赞同：1
> 
> 时间：2012-12-11T05:25:01.440
> 
> 标签：ms-access

我正在使用带有多个表的大型 MS Access 数据库。我想知道如何从数据库中的所有表中搜索列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:31:28.880

UNION 查询将是一种方法。

```
SELECT FieldA from Table 1 
UNION
Select FieldA from Table 2 
UNION 
Select FieldA from Table 3 
```

将上述内容另存为查询，然后您可以编写另一个查询，其中包含您喜欢的任何条件的第一个查询。

我知道这看起来很乏味，但这就是将数据分散得如此之多而不是将其拉入单个表的问题。如果您可以提供有关您正在尝试做什么的详细信息，也许我们可以给出更具体的答案。

# asp.net - select * tablename 返回两种不同格式的日期时间

> ID：13814152
> 
> 赞同：0
> 
> 时间：2012-12-11T05:25:29.010
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我需要一些关于从数据表中检索记录的建议。我有一个表包含列**dateDBO**作为**DateTime**。我`select * from tblUsers`在两个不同的场景中使用 select 查询。在一个（服务器）中，我得到 dateDBO 格式，`01/01/2012 12:00:00 AM`而在其他（本地）场景中，我得到了`01-Jan-00 12:00:00 AM`。

任何人都可以告诉我这是怎么发生的我知道我可以通过使用**Cast 或 Convert**指定特定的列名来解决这个问题，但这`select * tblUsers`会给我带来一些神秘的结果吗？

*我从我的 asp.net (3.5) 应用程序中调用它。

提前致谢。

对不起英语。

**更新**:: 当我部署在服务器上时，相同的代码反映了这个日期`01/01/2012 12:00:00 AM`，但在我的本地却是这样的`01-Jan-00 12:00:00 AM`。所以我很困惑这是由于某些日期和时间设置更改以及此日期时间更改如何影响 asp.net选择。我的 .net 代码

```
//set the command
objCommand = new OleDbCommand(strQueryText, objConnection);
//set the command type
objCommand.CommandType = CommandType.Text;
OleDbDataAdapter objDataAdapter = new leDbDataAdapter(objCommand); 
DataSet objLcDataSet = new DataSet(); 
objDataAdapter.FillSchema(objLcDataSet, SchemaType.Mapped); 
int lngRetVal = objDataAdapter.Fill(objLcDataSet); 
```

结果数据 ::

```
dateDBO
1959-11-05 00:00:00.000 
1965-12-13 00:00:00.000 
1979-08-01 00:00:00.000 
1972-02-15 00:00:00.000 
1978-12-23 00:00:00.000 
1985-09-04 00:00:00.000 
1986-04-19 00:00:00.000 
1966-03-10 00:00:00.000 
1959-08-30 00:00:00.000 
```

请问大家，**控制面板中的****Regional Option**字段会影响查询输出吗？？

 **当我改变它时，我发现结果与我在服务器上得到的结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:01:56.903

尝试这个：

SELECT REPLACE(CONVERT(VARCHAR(9), dateDBO, 6), '', '-') AS [DD-Mon-YY], CONVERT(VARCHAR(8), dateDBO, 108) as [HH:MM:SS] , substring(convert(varchar(30), dateDBO , 9), 25, 2) 来自 tblUser

然后你需要加上这三列。

有关详细信息，请参阅 [http://www.sql-server-helper.com/tips/date-formats.aspx](http://www.sql-server-helper.com/tips/date-formats.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:32:11.060

试试这个 dataset.table[0].rows[0]["dateDBO"].ToString("dd/MM/yyyy");**

# node.js - Jade.escape 在已编译的 Jade 模板上未定义

> ID：13814153
> 
> 赞同：1
> 
> 时间：2012-12-11T05:25:43.610
> 
> 标签：node.js, pug

我已经编译了一个玉模板，如：

```
jade --client --no-debug ... 
```

然后在客户端包含`jade.js`和编译的模板文件。但是jade.escape 是未定义的。我注意到编译后的模板函数如下所示：

```
function anonymous(locals, attrs, escape, rethrow, merge) {
    attrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;
    var buf = [];
    with (locals || {}) {
    var interp;
    buf.push('<h1>');
    var __val__ = title
    buf.push(escape(null == __val__ ? "" : __val__));
    buf.push('</h1>');
    }
    return buf.join("");
} 
```

注意转义是如何作为参数传入的。那么预期的使用情况如何？

假设我有一个非常简单的模板：

```
h1= title 
```

然后我像这样使用它：

```
html = anonymous({title: "Hello World!"}) 
```

但这意味着逃逸将是不确定的？我注意到jade.escape 也未定义，尽管我包括在内`jade.js`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T16:44:27.863

您需要将 runtime.js 与jade.js 一起添加才能使用jade.escape。

# javascript - 使用 json 数据填充表

> ID：13814154
> 
> 赞同：1
> 
> 时间：2012-12-11T05:25:46.170
> 
> 标签：javascript, jquery, html, getjson

我正在尝试使用从 $.getJSON() 调用中检索到的 JSON 字符串填充 HTML 表。$.getJSON() 调用工作正常。但我无法用检索到的 json 数据填充 html 表。请帮助我的代码..我是新手..

```
function loadTable(result){
    if(result.groups="no"){
        var num_rows = result.noofteams;
        var rows = "";

        for(var i=0;i<num_rows;i++){
        rows +='<tr>'+result.noofteams+'</tr>';         

        }
        $("#container").append(rows); 
```

这里的*结果*是我收到的 json 对象。*result.noofteams*给出了适当的值（我已经检查过了）。但问题是，我无法用*result.noofteams填充**#container*请帮助..

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T05:27:34.167

你`=`在需要`==`或`===`有条件时使用

```
 function loadTable(result){
        if(result.groups==="no"){
            var num_rows = result.noofteams;
            var rows = "";

            for(var i=0;i<num_rows;i++){
            rows +='<tr><td>'+result.noofteams+'</td></tr>';         

            }
            $("#container").append(rows);
        }
    } 
```

编辑：添加`<td>`它们也很重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:31:54.087

像这样使用 JSON 会更干净......

```
for (i in result) {
    rows += '<tr>' + result[i]['noofteams'] + '</tr>';
} 
```*

# c++ - 获取包含在唯一指针中的原始指针的地址

> ID：13814156
> 
> 赞同：1
> 
> 时间：2012-12-11T05:26:02.937
> 
> 标签：c++, unique-ptr

我有一个函数，它接受一个指向指针的参数。

```
 func(**pTmp); 
```

实际上这个 pTmp 是一个原始指针，而我得到的 pTmp 是一个唯一指针，所以我需要传递包含在唯一指针中的原始指针的地址。我这样做

```
func(&pTmp.get()) 
```

但我得到这个编译错误。左值需要作为一元 & 操作数。

我究竟做错了什么？

# bash - 导入shell脚本函数

> ID：13814157
> 
> 赞同：23
> 
> 时间：2012-12-11T05:26:05.273
> 
> 标签：bash, shell

我`err()`在文件中有一个函数`abc`。这些文件没有`.sh`扩展名，但它们以`#!/bin/bash`.

```
err () {
    echo "${1}" >&2 
} 
```

现在我将它导入到另一个文件中`xyz`：

```
source abc
someFunction(){ 
    err "Failed to back up"
} 
```

这是正确的导入方式吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-11T05:29:29.573

是的，你可以像上面提到的那样做，或者像：`. FILENAME`

该文件不需要以`.sh`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T08:21:04.883

没关系，这里还有一些提示：

1.  对函数使用命名约定，例如在函数名称前加上`f_`，例如`f_err`. 函数调用与其他命令没有什么不同，这是给读者的一个提示。它还减少了名称冲突的机会。

2.  您只需要读取权限，并且不需要`#!/bin/bash`（它只是一个评论）。

3.  在 Bash 中，必须在函数解析之前设置一些选项。例如，`shopt -s extglob`如果它使用扩展通配符，则必须在函数之前和外部完成。把它放在函数中为时已晚。

4.  Bash 不支持 FPATH 环境变量或自动加载（就像 Korn shell 一样）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T10:38:04.627

您需要*导出*新创建的函数

在末尾`abc`添加：

```
export -f err 
```

# css - 使用垂直对齐居中图像：CSS 中的中间不起作用

> ID：13814159
> 
> 赞同：0
> 
> 时间：2012-12-11T05:26:07.820
> 
> 标签：css, image, center, vertical-alignment

网站的第一次用户。我在垂直居中图像时遇到问题。我在网上搜索了不同的答案，但找不到任何答案。我试过使用垂直对齐：中间；但它不起作用。它水平居中，但不是垂直居中。

继承人的 div 与图像（这是一个幻灯片）。提前致谢！

```
<div id="photo">

                <img src="lax.jpg" name="slide" width="70%" height="70%">

                <script type="text/javascript">

                var step=1
                function slideit(){
                document.images.slide.src=eval("image"+step+".src")
                if(step<3)
                step++
                else
                step=1
                setTimeout("slideit()",2500)
                }
                slideit()

               </script>
            </div> 
```

和CSS

```
#photo{
position:absolute;
top:15%;
height:80%;
width: 70%;
left:20%;
background:#3377ff;
overflow:hidden; 
```

}

```
img{
vertical-align:middle;
display: table-cell; 
margin-left: auto; 
margin-right: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:29:06.997

尝试删除这个

```
img{
vertical-align:middle;
display: table-cell; 
margin-left: auto; 
margin-right: auto;
} 
```

并在您的 div 中添加内容

```
 #photo{
     position:absolute;
     top:15%;
     height:80%;
     width: 70%;
     left:20%;
     background:#3377ff;
     overflow:hidden;
     vertical-align:middle;
     display: table-cell; 
     margin-left: auto; 
     margin-right: auto;
 } 
```

# java - 来自 JAR 的 Spring 依赖注入

> ID：13814164
> 
> 赞同：0
> 
> 时间：2012-12-11T05:27:03.080
> 
> 标签：java, spring, dependency-injection, junit, applicationcontext

我有项目 A 中的 dao 层，项目 B 是应用程序层，它使用项目 A 作为它的依赖项

我可以看到项目 A 中的类，并使用这些类在项目 B 中完美编码。

现在我想做 JUnit 测试

在 A (MyTest.java)

```
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
@ContextConfiguration(locations = { "classpath*:reb/spring/persistenceContextTest.xml", "classpath*:rev/spring/modelContextTest.xml" })
public class MyTest extends AbstractTransactionalJUnit4SpringContextTests {
      @Autowired
      protected HibernateTemplate hibernateTemplate;
      @Autowired
      protected DAOImpl dao;
         //CODE here
} 
```

这里一切都很好。所有属性都已正确注入，没有问题。

现在我需要测试应用层 {project b}

```
@ContextConfiguration(locations = { "classpath*:reb/spring/applicationContextTest.xml" })
public class MyAnotherTest extends AbstractTransactionalJUnit4SpringContextTests {
     @Autowired
     protected HibernateTemplate hibernateTemplate;
     @Autowired
     protected DAOImpl dao;
} 
```

并在 applicationContextTest.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://cxf.apache.org/jaxws 
        http://cxf.apache.org/schemas/jaxws.xsd">
    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
    <import resource="classpath*:reb/spring/persistenceContextTest.xml" />
    <import resource="classpath*:reb/spring/modelContextTest.xml" />

</beans> 
```

但是当我运行 B 测试时，Spring 无法找到项目 A 中定义的属性。我该如何实现呢？

**更新** 我将测试 xmls 移动到 Src 文件夹，以便 maven 在项目 B 中识别并且它确实被识别。但是我仍然低于错误

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.cxf.transport.servlet.ServletTransportFactory' defined in class path resource [META-INF/cxf/cxf-servlet.xml]: Error setting property values; nested exception is org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (2) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'bus' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in URL [file:/C:/Users/Public/CC_DATA/OSS_Mar-2013_SharedDev/OSS/Rosy/JComponents/Rebecca/Rebecca-access/target/classes/rebecca/spring/persistenceContextDump.xml]: Invocation of init method failed; nested exception is org.hibernate.cache.CacheException: net.sf.ehcache.CacheException: Error configuring from null. Initial cause was null
PropertyAccessException 2: org.springframework.beans.MethodInvocationException: Property 'transportIds' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in URL [file:/C:/Users/Public/CC_DATA/OSS_Mar-2013_SharedDev/OSS/Rosy/JComponents/Rebecca/Rebecca-access/target/classes/rebecca/spring/persistenceContextDump.xml]: Invocation of init method failed; nested exception is org.hibernate.cache.CacheException: net.sf.ehcache.CacheException: Error configuring from null. Initial cause was null
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1361)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    ... 24 more
Caused by: org.springframework.beans.PropertyBatchUpdateException; nested PropertyAccessExceptions (2) are:
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'bus' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in URL [file:/C:/Users/Public/CC_DATA/OSS_Mar-2013_SharedDev/OSS/Rosy/JComponents/Rebecca/Rebecca-access/target/classes/rebecca/spring/persistenceContextDump.xml]: Invocation of init method failed; nested exception is org.hibernate.cache.CacheException: net.sf.ehcache.CacheException: Error configuring from null. Initial cause was null
PropertyAccessException 2: org.springframework.beans.MethodInvocationException: Property 'transportIds' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in URL [file:/C:/Users/Public/CC_DATA/OSS_Mar-2013_SharedDev/OSS/Rosy/JComponents/Rebecca/Rebecca-access/target/classes/rebecca/spring/persistenceContextDump.xml]: Invocation of init method failed; nested exception is org.hibernate.cache.CacheException: net.sf.ehcache.CacheException: Error configuring from null. Initial cause was null
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1358)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:43:04.513

如果您使用的是 maven，那么其中的任何资源和来源`src/test`都是单个模块的本地资源，即其中的任何内容`projectA/src/test`都将从`projectB`. 有多种选择：

*   *移动测试资源：*我不鼓励你这样做，但基本上你可以将你`applicationContextTest.xml`的移动到`src/main`文件夹中，但是你的二进制可交付成果中有测试代码。

*   *复制测试资源：*当您将任何 bean 设置从复制`projectA`到`projectB`. 这通常意味着您正在为单元测试创​​建测试应用程序上下文，并且您的实际应用程序具有不同的应用程序上下文。

*   *删除所有测试应用程序上下文：*这将是最干净的解决方案，如果您没有任何测试上下文，您将被迫测试*真实的东西。*如果您需要特定于环境的属性，您可以使用 PropertyPlaceHolders，如果您需要不同的 bean（连接池等），您可以使用 Profiles。

查看配置文件的新 Spring 3.1 功能：http: [//blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:51:04.467

您的测试持久性上下文 xml 名称在项目 A 和项目 B 中相同。您可以尝试更改`persistenceContextTest.xml`项目 A 中的名称`persistenceContextTestA.xml`以确保问题不是因为文件名重复。

# c - 当我们尝试将一个函数作为参数传递给同一个函数时会发生什么？

> ID：13814165
> 
> 赞同：0
> 
> 时间：2012-12-11T05:27:17.510
> 
> 标签：c

当我运行以下程序时，我得到的输出为 1.00000。但我怀疑该功能是如何工作的？我不太确定它的工作原理。请让我知道以下代码的工作过程

```
float avg(float,float,float);

int main() 
{ 
    float p=1,q=2,r=-2,a;
    a=avg(p,(q=4,r=-12,q),r); 
    printf("%f",a); 
    return 0; 
} 

float avg(float x,float y,float z) 
{
    return (x+y+z)/3; 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T05:30:53.650

函数调用中没有函数调用。

在，

```
a=avg(p,(q=4,r=-12,q),r); 
```

编码：

```
(q=4,r=-12,q) 
```

assigns `q = 4`，`r = -12`并`q`作为第二个参数传递。稍后会详细介绍^([注：1])

请注意，函数参数的评估顺序是**Unspecified**。
这意味着参数可以按顺序传递给函数：

*   **案例1：**从左到右或
*   **案例 2：**从右到左或
*   **案例 3：**编译器想要的任何神奇顺序（当然，这只有在参数不超过 2 时才有可能）

在您的示例中，如果您的编译器选择：

*   **情况 1**，那么输出将是`-2.....`
*   **情况 2**则输出为`1`.
*   **案例3**然后输出可以很神奇

正如您从代码示例中看到的那样，最好不要编写任何会产生[**副作用**](http://msdn.microsoft.com/en-us/library/8a425116%28v=vs.80%29.aspx)的代码。

* * *

^([注：1])

表达式中逗号运算符( `,`) 的含义：

```
(e1,e2,e3) 
```

是：

> 对子表达式求值，然后`e1`求值`e2`，再求值`e3`。表达式的值是 的值`e3`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:58:21.937

如果 x+y+z = 3，则可以得到 1 作为输出。我们知道 x 为 1，因此 y+z = 2。如果 q = 4 且 r = -2，这是可能的。由于评估顺序未定义，因此我们可以得出结论，编译器正在从右到左评估参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T05:50:15.567

你确定你没有收到编译器警告吗？如果没有，启用`-Wall`（对于 gcc 编译器）。

> > a=avg(p,(q=4,r=-12,q),r);

根据定义的函数，此函数调用中的第一个参数是`float (float,float,float)`NOT类型`float`。你应该得到一个编译器警告。

第一个参数是指向函数的指针`avg`；没有函数调用。

# php - C 函数，如 PHP 中的 in_array

> ID：13814167
> 
> 赞同：2
> 
> 时间：2012-12-11T05:27:25.110
> 
> 标签：php, c

```
<?php
$os = array("Mac", "NT", "Irix", "Linux");
if (in_array("Irix", $os)) {
    echo "Got Irix";
}
if (in_array("mac", $os)) {
    echo "Got mac";
}
?> 
```

C 中是否有一些与`in_array`PHP 类似的函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T05:33:54.077

**不**，但你可以这样实现

```
typedef int (*cmpfunc)(void *, void *);

int in_array(void *array[], int size, void *lookfor, cmpfunc cmp)
{
    int i;

    for (i = 0; i < size; i++)
        if (cmp(lookfor, array[i]) == 0)
            return 1;
    return 0;
}

int main()
{
    char *str[] = {"this is test", "a", "b", "c", "d"};

    if (in_array(str, 5, "c", strcmp))
        printf("yes\n");
    else
        printf("no\n");

    return 0;
} 
```

# database - 调用以前用户的信息以进行表单自动填充

> ID：13814168
> 
> 赞同：2
> 
> 时间：2012-12-11T05:27:25.977
> 
> 标签：database, forms, session, session-cookies

我有一个用户填写的表格，他们的信息被转移到下一个登陆页面的表格以生成潜在客户，因此他们不必重新填写另一个表格。

无论如何让数据库动态创建链接，所以如果用户离开登录页面并单击链接，他们将被引导到登录页面，所有表单填写的信息都填写了以前的样子？

这是调用数据的代码

```
global $wpdb;

if ($_SESSION['form'] == 'old') {

$FirstName = $_REQUEST['FirstName'];
$LastName = $_REQUEST['LastName'];
$Address1 = $_REQUEST['Address1'];
$Email = $_REQUEST['Email'];
} 
else {
$FirstName = $_REQUEST['first_name'];
$LastName = $_REQUEST['last_name'];
$Address1 = $_REQUEST['street'];
$Email = $_REQUEST['form_email'];
}

$_SESSION['FirstName'] = $FirstName;
$_SESSION['LastName'] = $LastName;
$_SESSION['Address1'] = $Address1;
$_SESSION['Email'] = $Email; 
```

然后表单在所需字段中回显

# java - 插件和 jar 中的修订号和构建日期

> ID：13814170
> 
> 赞同：0
> 
> 时间：2012-12-11T05:27:33.293
> 
> 标签：java, eclipse, build, eclipse-plugin, bamboo

构建后，我看到一些插件在插件或 jar 名称中包含修订号和构建日期，而有些则没有。我想知道它是如何配置的？PDE 构建是自己做的还是如何做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:59:06.780

MANIFEST.MF 中的版本号如下所示：

```
Bundle-Version: 1.1.0.qualifier 
```

PDE Build 将用构建日期时间字符串替换限定符。因此，也许您的某些插件的版本号不包含“限定符”标签。

# database-connection - 在 symfony1.4 中逐步建立数据库连接

> ID：13814175
> 
> 赞同：0
> 
> 时间：2012-12-11T05:28:20.530
> 
> 标签：database-connection, symfony-1.4

我是symfony的新手。我现有的应用程序是在 symfony1.4 中开发的。他们没有使用任何数据库连接。现在我想在这个应用程序中创建新的 MySQL 数据库连接。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:09:18.743

1.  在 settings.yml

    ```
    all:
      use_database: true 
    ```

2.  从控制台运行此命令

    ```
    php symfony configure:database "mysql:host=dbhost;dbname=yourdbname" dbuser dbpassword 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:59:46.727

请检查所有步骤以使数据库连接 symfony1.4

```
Step 1 : 
```

文件：配置/ProjectConfiguration.class.php

```
find what:
---------

public function setup()
  {
    $this->enablePlugins('owCorePlugin');
  }

Repalce with :
------------
public function setup()
  {
    $this->enablePlugins('owCorePlugin');
    $this->enablePlugins('sfDoctrinePlugin');    
  }
Step 2 :
config/databases.yml
You need to create this file and add below code.replace caps letter with your details.You need to maintain same space also.
all: 
```

学说：类：sfDoctrineDatabase 参数：dsn：mysql:host=HOST_NAME;dbname=DB_NAME 用户名：USERNAME 密码：PASSWORD 第 3 步：frontend/config/settings.yml

```
find what :
use_database:           false
Replace with
use_database:           true
Run the following command:
change the project configuration.Make sure you need to run this command in root folder of our project 
```

php symfony 配置：数据库 --name=doctrine --class=sfDoctrineDatabase "mysql:host=HOST_NAME;dbname=DB_NAME" 用户名密码

```
step 5: schema files
$ php symfony doctrine:build-schema
$ php symfony doctrine:build-model
$ php symfony doctrine:build-forms
$ php symfony doctrine:build-filters
$ ln -s lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/web web/sfDoctrinePlugin 
```

# reporting-services - SSRS：透视列

> ID：13814178
> 
> 赞同：0
> 
> 时间：2012-12-11T05:28:49.323
> 
> 标签：reporting-services

我有一个从存储过程传递给 SSRS 的原始数据列表。我有一个矩阵，然后旋转数据。

例如：

```
Raw data

WeekNumber    Date
1             Mon 10th Dec
1             Tue 11th Dec
1             Wed 12th Dec
2             Mon 17th Dec 
```

旋转时，列名将变为以下内容

```
Mon 10th Dec | Tue 11th Dec  | Wed 12th Dec  | Mon 17th Dec 
```

是否有可能在 where 条件下设置支点？在这个例子中，我希望它看起来像

```
Mon 10th Dec | Tue 11th Dec  | Wed 12th Dec 
```

然后是 12 月 17 日星期一的另一列，因为 WeekNumber 是 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:15:41.643

是的，这并不难。

您所说的 SSRS 中的枢轴实际上只是一个列组。您可以将过滤器或父组添加到列组中，以过滤掉 WeekNumber <> 2 或按 WeekNumber 的组以上。使用父组，您可以获得如下结果：

```
WeekNum: 1                                   | Total for week |   |WeekNum: 2    | Total for week  |             
Mon 10th Dec | Tue 11th Dec  | Wed 12th Dec  |                |   |Mon 17th Dec
 20          |  25           |  10           |  55            |   |  15          |  15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:42:09.503

我不确定我是否理解你的问题。但无论如何，也许您可​​以考虑按照以下方式在存储过程中进行数据透视：

[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

我使用报告工具的成功秘诀是在数据级别解决复杂的问题，而不是试图让报告工具去做。

# android - 与相机快门声音同时播放音频

> ID：13814179
> 
> 赞同：1
> 
> 时间：2012-12-11T05:28:51.837
> 
> 标签：android, android-camera, android-mediaplayer, android-audiomanager

如何在相机快门关闭的同时播放声音？

在我的应用程序中，我有一个嵌入的相机预览。活动开始 5 秒后自动拍摄 3 张照片。在此期间，应用程序通过蓝牙接收一系列值。每次值大于预设阈值时，应用程序都会播放音调，这是使用 MediaPlayer 完成的。

问题是当相机关闭时，快门声似乎接管了所有音频，并且正在播放的音调停止并且仅在 3 次快门单击后恢复。我不想让相机快门静音，那么有没有办法让我通过点击快门来播放音调？这一切都发生在一项活动中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:51:29.690

一种可能的解决方案是`ENFORCED_AUDIBLE`为您的音调使用隐藏的流类型。这是相机快门声音最有可能使用的流类型，因此除非快门声音已静音，否则它不会被静音。

请注意，这种流类型直到 ICS 才引入（或者它可能是 GB/HC，我不能肯定地说出来），因此它不会与现有的每个 Android 版本兼容。此流类型标识符的整数值为 7，但如果您想检查是否存在/以编程方式获取其值，您可以使用`AudioSystem`类上的反射来实现。

这是一个如何做到这一点的示例：

```
public static boolean mHasEnforcedStream = true;
public static int STREAM_SYSTEM_ENFORCED = 0;

...

static
{        
    try
    {
        Class asClass = Class.forName("android.media.AudioSystem");
        Field sseField = asClass.getDeclaredField("STREAM_SYSTEM_ENFORCED");
        STREAM_SYSTEM_ENFORCED = sseField.getInt(null);
    }
    catch (Exception e)
    {
        mHasEnforcedStream = false;
    }
} 
```

请记住，如果您使用这种流类型，即使用户连接了例如 3.5 毫米有线耳机，并且即使用户已将他/她的手机置于静音模式，您也将始终在扬声器中听到您的声音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:42:26.667

我认为这是你应该需要的。这应该包含您需要的内容。第一个链接可能比第二个链接更有用，因为您还想拥有其他声音，尽管您可以禁用特定于相机穿梭声音的音频通道。

*   [有什么方法可以替换或静音android中的相机快门声音吗？](https://stackoverflow.com/questions/5289481/is-there-any-way-to-replace-or-silence-the-camera-shutter-sound-in-android)
*   [在android中以编程方式停止相机点击声音](https://stackoverflow.com/questions/1594018/stop-camera-click-sound-programmatically-in-android)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T06:29:10.713

好吧，因为我还是编程新手，所以我会在谷歌上搜索哪些文件会发出相机声音，然后我会将你的应用程序放到它会用不同的扩展名重命名这些文件的位置，这样声音就不会响起并且有他们重命名回原始文件。或者我会研究如何通过更改相机值使相机静音。我知道在我的三星 Galaxy SIII 上我必须更改相机文件名。（冲刺载体）

# ruby-on-rails-3 - Ruby On Rails：Instagram gem，无法访问回调 url

> ID：13814180
> 
> 赞同：3
> 
> 时间：2012-12-11T05:28:59.727
> 
> 标签：ruby-on-rails-3, real-time, instagram

我一直在使用 Instagram gem 和实时 API 看到一些有趣的行为，我正在尝试创建一个基本的应用程序来创建订阅和处理 Instagram 的响应。下面是创建订阅并将标签名称保存到我的数据库的代码。

```
 def create
    @subscription = Subscription.new params[:subscription]
    options = {:object_id => params[:subscription][:tag_name]}

    if @subscription.save
      Instagram.create_subscription('tag', "http://myapp.herokuapp.com/subscriptions/process_subscription/", aspect = 'media', options)
      redirect_to "/subscriptions/tag/#{@subscription.tag_name}"
  end 
```

请注意，回调 url 位于可访问的 heroku，有趣的是，当我访问`subscriptions/new`heroku 域时，Instagram API 给了我一个“错误请求，无法访问回调 URL”。当我使用相同的回调 url 通过 curl 创建订阅时，一切都按预期工作，当我转到`subscriptions/new`我的本地主机（使用相同的回调 url 集）时，它也按预期工作。下面是 process_subscription 操作：

```
def process_subscription
  if params["hub.challenge"]
    render :text => params["hub.challenge"]
  else      
    PrivatePub.publish_to("/subscriptions/tag/#{params[:object_id]}", payload: params[:_json])
  end
end 
```

第一个 if 语句将处理 pubsubhub 挑战。实际创建订阅后，接收和处理有效负载就没有问题了。所以现在我唯一能想到的是，当我在 heroku 域时，服务器进程在 Instagram 发回给它时有点忙，我不明白这怎么可能，所以任何建议都将不胜感激。

这是订阅成功和失败时服务器日志的链接。请注意，我正在注销这些日志中的帖子参数。[https://gist.github.com/4256108](https://gist.github.com/4256108)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:43:58.917

经过多次试验和错误后，当 Instagram 将其 hub.challenge 发送回应用程序导致“错误请求，无法访问回调 URL”错误时，问题看起来越来越像 rails 进程很忙。

对我有用的是使用另一个线程来创建 Instagram 订阅，这样 Instagram 几乎可以立即成功地访问我的应用程序并到达我的回调 url。这个解决方案是最快和最轻量级的，也许在 Heroku 上购买一个或多个工作人员并通过 Sidekiq 或其他东西将其移动到后台进程是有益的，但这对于仅响应集线器挑战来说似乎有点矫枉过正。

```
 def instagram_photos
    Thread.new do |t|
      options = {:object_id => params[:tag_name]}
      Instagram.create_subscription('tag', "http://myapp.herokuapp.com/subscriptions/process_subscription", aspect = 'media', options)
      t.exit
    end
    redirect_to root_path
  end 
```

# c# - 将项目附加到列表的末尾

> ID：13814190
> 
> 赞同：0
> 
> 时间：2012-12-11T05:29:44.453
> 
> 标签：c#

我正在使用链接列表。该列表包含基于文本框中插入的值（大小、高度、库存、价格）的项目。. 通过按钮单击 Add 函数从 texboxes 获取值并附加项目，但每次我将项目添加到列表而不是放置在列表末尾时，它总是放在第一位。我不确定为什么会出现这种行为。如何修改以便它可以始终将项目附加到列表的末尾？（我在名为 results 的第五个多行文本框上显示我的测试结果）。

**代码**

```
 public void Add()
    {
        textBoxResults.Clear();

        int stock = Convert.ToInt32(Stock.Text);
        string type = Type.Text;
        double price = Convert.ToDouble(Price.Text);
        int height = Convert.ToInt32(Height.Text);

        Tree = new FruitTrees();
        Tree.Stock = stock;
        Tree.Type = type;
        Tree.Price = price;
        Tree.Height = height;
        Total += Tree.Price * Tree.Stock;
        Trees.AddLast(Tree);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:52:32.863

这是学校项目吗？只是想知道你为什么不使用`System.Collections.Generic.LinkedList<T>`.

```
LinkedList<FruitTrees> trees = new LinkedList<FruitTrees>(); 
```

它带有自己的`AddLast`方法，可以完全满足您的要求。

另外，我认为您的班级名称不应该是复数（FruitTree vs FruitTrees）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:56:24.693

您可以实现自己的 AddLast，如下所示：

```
FruitTrees item = Trees.Retrieve(0); 
while (item.Next != null)
{
  item = item.Next;
}
item.Next = NewItem 
```

# excel - 如何按时间间隔进行具体分组？

> ID：13814195
> 
> 赞同：0
> 
> 时间：2012-12-11T05:30:50.653
> 
> 标签：excel, logic, excel-2007, grouping, pivot-table

在我的 Excel 文件中，我有以下内容：

```
行标签......|......计数总和  
***爱丽丝琪........2751***  
2012 年 9 月 28 日 11:42.............833  
2012 年 9 月 28 日 11:43................................84  
2012 年 9 月 28 日 12:07................................917  
2012 年 9 月 28 日 19:34................................138  
2012 年 9 月 28 日 19:35................................779  
**ALICANTIAYAA005...........78**  
2012 年 9 月 28 日 16:37................................78  
**BELLAVBA005........2429**  
2012 年 9 月 7 日 11:34................................230  
2012 年 9 月 7 日 11:35................................984  
2012 年 9 月 7 日 11:38................................56  
2012 年 9 月 7 日 11:39................................1159
```

如果我左键单击任何时间戳，然后左键单击并按分钟分组，Excel 将按分钟分组，然后将值汇总为 5 分钟组。

我该怎么做才能表明我想按 5 分钟而不是 1 分钟分组？例如：

```
行标签......|......计数总和  
***爱丽丝琪........2751***  
2012 年 9 月 28 日 11:42 ......  
.........................................917   
2012 年 9 月 28 日 11:43 ......  
2012 年 9 月 28 日 12:07................................917  
2012 年 9 月 28 日 19:34 ......  
.............................................917  
2012 年 9 月 28 日 19:35 ......
```

所以对于`AliceRicky`，它被归纳为 3 组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:42:35.510

我怀疑您的源数据中可能需要一个帮助列。说等于第一个数据行中的时间值，然后：

```
=IF(AND(INT((B2-40908)*288)=INT((B3-40908)*288),A2=A3),D2,B3) 
```

在随后的行中（假设行标签 in `ColumnA`、 Time in `ColumnB`、Count in`ColumnC`和 Helper 列是`D`, in source ）。

然后将 Helper 列作为行标签进行旋转。

这（从 1/1/12 开始，即 1/1/1900+40908 天）将时间带入 5 分钟间隔（00:00:00 - 00:04:59 等，因此 09/07/2012 11:34 在与 09/07/2012 11:35 不同的乐队）并将这些命名为该乐队中的第一次，为每个行标签单独命名。288 是一天中的 5 分钟数。

# ruby-on-rails - Rails - JSON 格式的回形针 URL 以及其他属性

> ID：13814207
> 
> 赞同：0
> 
> 时间：2012-12-11T05:31:45.927
> 
> 标签：ruby-on-rails, json

我已经关注了 Ryan Bates 的关于使用 jQuery Tokeninput 来实现多对多关联的自动完成列表的[截屏视频。](http://railscasts.com/episodes/258-token-fields)现在我想为每个结果拉一张照片。我正在使用 Paperclip 并通过在控制器中执行此操作将 url 传递到 JSON 文件中：

```
format.json { render :json => @users.map(&:photo_url) } 
```

Ryan 将属性传递到 JSON 文件的代码如下：

```
format.json { render :json => @users.map(&:attributes) } 
```

但是如何将两者结合起来在 JSON 文件中同时显示`:attributes`和方法呢？`:photo_url`

我尝试了不同的东西，包括下面的代码，但似乎没有任何效果。似乎只能调用一种方法`.map`？

```
// Doesn't work
format.json { render :json => @users.map(&:attributes, &:photo_url) }

// Doesn't work
format.json { render :json => @users.map(&:attributes).map(&:photo_url) } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:27:15.033

这有帮助吗？（注意 - 我刚从一个晚上回来，不是 100%，所以我可能完全误解了你的问题。）

这将创建一个数组数组：数组中的第一个元素包含用户的属性，第二个元素包含照片 URL：

`@users.map {|u| [u.attributes, u.photo_url]}`

这会创建一个哈希 - 就像上面的数组一样。但是第一个元素被命名为“attributes”，第二个元素被命名为“photo_url”。

`@users.map {|u| {:attributes => u.attributes, :photo_url => u.photo_url}}`

尝试插入其中一个或两个。它们应该适合您。

（例如`format.json { render :json => @users.map {|u| [u.attributes, u.photo_url]} }`）。

* * *

编辑：

只是有了另一个想法。

您可以将两者合并到一个集合中（这样您就可以将它们全部放在一个哈希中，而不是数组中的单独元素中）：

`@users.map {|u| u.attributes.merge(:photo_url => u.photo_url)}`

这将`photo_url`作为密钥添加到`attributes`哈希中。对于您为读取 JSON 而编写的任何代码，它可能更容易工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T11:12:32.480

如果这对任何人都有帮助，我会找到一个很好的方法：

```
class MyModel < ActiveRecord::Base
  has_attached_file :avatar, :styles => { :large => "500x500#", :medium => "300x300#", :small => "100x100#", :thumb => "50x50#" }

  def as_json(options)
    json = super
    self.avatar.styles.each do | format |
      json = json.merge({"avatar_"+format[0].to_s => self.avatar(format[0])})
    end
    json
  end
end 
```

然后你可以简单地打电话

```
render :json => @my_model 
```

在渲染集合时也可以工作。

然后可以使用 as_json(options) 进行一些条件渲染，例如：

```
model_to_json = @my_model.to_json(:nested => true)
render :json => model_json 
```

# python - 试图在注释或文字中查找关键字的所有实例？

> ID：13814208
> 
> 赞同：7
> 
> 时间：2012-12-11T05:31:51.430
> 
> 标签：python, regex, regex-negation

我正在尝试在一些 Java 代码（使用 Python 脚本）中查找关键字“public”的所有实例，这些实例不在注释或字符串中，也就是`//`在 a`/*`和 a之间`*/`，而不是在 double 或 single 之间引号，并且它们不是变量名的一部分——即它们必须以空格、制表符或换行符开头，并且必须跟在相同的后面。

所以这就是我现在所拥有的——

```
//.*\spublic\s.*\n
/\*.*\spublic\s.*\*/
".*\spublic\s.*"
'.*\spublic\s.*' 
```

我把这搞砸了吗？

**但这正是我不想要的。我怎样才能把它转过来并搜索这四个表达式之和的倒数，*作为一个单一的正则表达式*？**

我发现这可能使用了负前瞻和后视，但我仍然无法将它拼凑在一起。此外，对于 /**/ 正则表达式，我担心它`.*`与换行符不匹配，因此它无法识别这`public`是在评论中：

```
/*
public
*/ 
```

**低于这一点的一切都是我在纸上思考的，可以忽略不计。这些想法并不完全准确。**

* * *

编辑：

我敢说`(?<!//).*public.*`会匹配任何不在单行注释中的内容，所以我掌握了窍门。我认为。但仍然不确定如何结合一切。

编辑2：

那么——按照这个想法，我`|`把它们都编成——

`(?<!//).*public.*|(?<!/\*).*public.\*/(?!\*/)|(?<!").*public.*(?!")|(?<!').*public.*(?!')`

但我不确定。`//public`不会被第一个替补匹配，但会被第二个匹配。我需要与前瞻和后视，而不是或整个事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T09:16:47.127

对不起，我得告诉你一个消息，你想做的事是不可能的。原因主要是因为 Java 不是常规语言。我们现在都知道，大多数正则表达式引擎都提供非常规的功能，但 Python 尤其缺乏可以解决问题的递归 (PCRE) 或平衡组 (.NET) 之类的东西。但让我们更深入地研究一下。

首先，为什么你的模式没有你想象的那么好？（用于匹配这些文字`public` *内部*的任务；类似的问题将适用于反转逻辑）

正如您已经认识到的那样，您将遇到换行问题（在 的情况下`/*...*/`）。这可以通过使用修饰符/选项/标志`re.S`（改变 的行为`.`）或使用`[\s\S]`代替`.`（因为前者匹配任何字符）来解决。

但还有其他问题。您只想查找周围出现的字符串或注释文字。您实际上并没有确保它们是专门围绕有`public`问题的。我不确定你可以在 Java 中的单行上放多少，但如果你有一个任意字符串，然后是 a `public`，然后是单行上的另一个字符串，那么你的正则表达式将匹配，`public`因为它可以找到`"`之前和在它之后。即使这是不可能的，如果您在同一个输入中有两个块注释，那么`public`这两个块注释之间的任何一个都会导致匹配。所以你需要找到一种方法来断言你`public`真的*在里面* `"..."`或`/*...*/`不仅仅是这些文字可以在它左边的任何地方找到。

下一件事：匹配不能重叠。但是您的匹配包括从开头文字到结尾文字的所有内容。因此，如果您这样做`"public public"`，只会导致一场比赛。捕获在这里无法为您提供帮助。通常避免这种情况的技巧是使用环视（不包括在匹配中）。但是（我们稍后会看到）lookbehind 并没有你想象的那么好，因为它不能是任意长度（只有在 .NET 中才有可能）。

现在是最糟糕的。如果您有`"`内部评论怎么办？这应该不算数吧？如果你有`//`或`/*`或`*/`在一个字符串中怎么办？这应该不算数吧？那么`'`inside `"`-strings 和`"`inside `'`-strings 呢？更糟糕的是，`\"`inside `"`-string 呢？因此，为了 100% 的稳健性，您还必须对周围的分隔符进行类似的检查。这通常是正则表达式达到其功能极限的地方，这就是为什么您需要一个适当的解析器来遍历输入字符串并构建整个代码树的原因。

但是假设您在字符串中没有注释文字，并且在注释中没有引号（或者只有匹配的引号，因为它们会构成一个字符串，而且我们也不希望`public`在字符串中）。所以我们基本上假设每个有问题的文字都正确匹配，并且它们从不嵌套。在这种情况下，您可以使用前瞻来检查您是在其中一个文字内部还是外部（实际上是多个前瞻）。我很快就会谈到这一点。

但是还剩下一件事。什么不起作用`(?<!//).*public.*`？为此，`(?<!//)`匹配任何单个位置就足够了。例如，如果您刚刚输入`// public`，引擎会在字符串开头（字符串开头的左侧）尝试否定的lookbehind，会发现 no `//`，然后使用`.*`to 消耗`//`和空间，然后 match `public`。你真正想要的是`(?<!//.*)public`. 这将从 的起始位置开始向后看，`public`并一直向左看当前行。但是......这是一个可变长度的lookbehind，仅受.NET支持。

但是让我们看看如何确保我们真的在字符串**之外**。我们可以使用前瞻来一直查看输入的末尾，并检查途中是否有偶数个引号。

```
public(?=[^"]*("[^"]*"[^"]*)*$) 
```

现在，如果我们真的很努力，我们也可以在字符串中忽略转义的引号：

```
public(?=[^"]*("(?:[^"\\]|\\.)*"[^"]*)*$) 
```

因此，一旦我们遇到 a`"`我们将接受非引号、非反斜杠字符或反斜杠字符以及它后面的任何内容（也允许转义反斜杠字符，因此`"a string\\"`我们不会将关闭`"`视为被转义）。我们可以将它与多行模式 ( `re.M`) 一起使用，以避免一直走到输入的末尾（因为行尾就足够了）：

```
public(?=[^"\r\n]*("(?:[^"\r\n\\]|\\.)*"[^"\r\n]*)*$) 
```

（`re.M`对于以下所有模式都是隐含的）

这是它寻找单引号字符串的内容：

```
public(?=[^'\r\n]*('(?:[^'\r\n\\]|\\.)*'[^'\r\n]*)*$) 
```

对于块注释，它更容易一些，因为我们只需要寻找`/*`或字符串的结尾（这次真的是整个字符串的结尾），而不会`*/`在途中遇到。这是通过对每个位置进行负前瞻来完成的，直到搜索结束：

```
public(?=(?:(?![*]/)[\s\S])*(?:/[*]|\Z)) 
```

但正如我所说，我们现在被单行注释难住了。但无论如何，我们可以将最后三个正则表达式合并为一个，因为前瞻实际上并没有提前正则表达式引擎在目标字符串上的位置：

```
public(?=[^"\r\n]*("(?:[^"\r\n\\]|\\.)*"[^"\r\n]*)*$)(?=[^'\r\n]*('(?:[^'\r\n\\]|\\.)*'[^'\r\n]*)*$)(?=(?:(?![*]/)[\s\S])*(?:/[*]|\Z)) 
```

现在那些单行注释呢？模拟可变长度lookbehinds的技巧通常是反转字符串和模式 - 这使得lookbehind成为一个lookahead：

```
cilbup(?!.*//) 
```

当然，这意味着我们也必须反转所有其他模式。好消息是，如果我们不关心转义，它们看起来完全一样（因为引号和块注释都是对称的）。因此，您可以在反向输入上运行此模式：

```
cilbup(?=[^"\r\n]*("[^"\r\n]*"[^"\r\n]*)*$)(?=[^'\r\n]*('[^'\r\n]*'[^'\r\n]*)*$)(?=(?:(?![*]/)[\s\S])*(?:/[*]|\Z))(?!.*//) 
```

然后，您可以使用`inputLength -foundMatchPosition - foundMatchLength`.

现在逃跑怎么办？这现在很烦人，因为如果引号*后面跟着*反斜杠，我们必须跳过引号。由于一些回溯问题，我们需要在五个地方解决这个问题。三次，在使用非引号字符时（因为我们`"\`现在也需要允许。两次，在使用引号字符时（使用负前瞻来确保它们后面没有反斜杠）。让我们看看双引号：

```
cilbup(?=(?:[^"\r\n]|"\\)*(?:"(?!\\)(?:[^"\r\n]|"\\)*"(?!\\)(?:[^"\r\n]|"\\)*)*$) 
```

（它看起来很可怕，但如果你将它与忽略转义的模式进行比较，你会注意到一些差异。）

因此将其合并到上述模式中：

```
cilbup(?=(?:[^"\r\n]|"\\)*(?:"(?!\\)(?:[^"\r\n]|"\\)*"(?!\\)(?:[^"\r\n]|"\\)*)*$)(?=(?:[^'\r\n]|'\\)*(?:'(?!\\)(?:[^'\r\n]|'\\)*'(?!\\)(?:[^'\r\n]|'\\)*)*$)(?=(?:(?![*]/)[\s\S])*(?:/[*]|\Z))(?!.*//) 
```

因此，这实际上可能适用于许多情况。但正如你所见，它很糟糕，几乎无法阅读，而且绝对无法维护。

有什么注意事项？字符串中没有注释文字，其他类型的字符串中没有字符串文字，注释中没有字符串文字。另外，我们有四个独立的前瞻，这可能需要一些时间（至少我认为我有一个无效的大部分回溯）。

无论如何，我相信这与正则表达式一样接近。

**编辑：**

我刚刚意识到我忘记了`public`不能成为更长文字一部分的条件。你包括了空格，但如果它是输入中的第一件事呢？最简单的方法是使用`\b`. 匹配单词字符和非单词字符之间的位置（不包括周围的字符）。但是，Java 标识符可能包含任何 Unicode 字母或数字，我不确定 Python`\b`是否支持 Unicode。此外，Java 标识符可能包含`$`. 无论如何，这会破坏它。环视救援！与其断言每一边都有一个空格字符，不如断言没有非空格字符。因为我们需要负面的环视，我们将获得不包括这些字符免费的优势：

```
(?<!\S)cilbup(?!\S)(?=(?:[^"\r\n]|"\\)*(?:"(?!\\)(?:[^"\r\n]|"\\)*"(?!\\)(?:[^"\r\n]|"\\)*)*$)(?=(?:[^'\r\n]|'\\)*(?:'(?!\\)(?:[^'\r\n]|'\\)*'(?!\\)(?:[^'\r\n]|'\\)*)*$)(?=(?:(?![*]/)[\s\S])*(?:/[*]|\Z))(?!.*//) 
```

而且因为仅仅从向右滚动这段代码片段无法完全理解这个正则表达式有多么可笑，这里它处于自由空间模式 ( `re.X`) 并带有一些注释：

```
(?<!\S)      # make sure there is no trailing non-whitespace character
cilbup       # public
(?!\S)       # make sure there is no leading non-whitespace character
(?=          # lookahead (effectively lookbehind!) to ensure we are not inside a
             # string
  (?:[^"\r\n]|"\\)*
             # consume everything except for line breaks and quotes, unless the
             # quote is followed by a backslash (preceded in the actual input)
  (?:        # subpattern that matches two (unescaped) quotes
    "(?!\\)  # a quote that is not followed by a backslash
    (?:[^"\r\n]|"\\)*
             # we've seen that before
    "(?!\\)  # a quote that is not followed by a backslash
    (?:[^"\r\n]|"\\)*
             # we've seen that before
  )*         # end of subpattern - repeat 0 or more times (ensures even no. of ")
  $          # end of line (start of line in actual input)
)            # end of double-quote lookahead
(?=(?:[^'\r\n]|'\\)*(?:'(?!\\)(?:[^'\r\n]|'\\)*'(?!\\)(?:[^'\r\n]|'\\)*)*$)
             # the same horrible bastard again for single quotes
(?=          # lookahead (effectively lookbehind) for block comments
  (?:        # subgroup to consume anything except */
    (?![*]/) # make sure there is no */ coming up
    [\s\S]   # consume an arbitrary character
  )*         # repeat
  (?:/[*]|\Z)# require to find either /* or the end of the string
)            # end of lookahead for block comments
(?!.*//)     # make sure there is no // on this line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:10:27.543

您是否考虑过使用该方法将所有注释以及单引号和双引号字符串文字替换为空字符串`re sub()`。然后只需对要查找的单词的结果文件进行简单的搜索/匹配/查找？

这至少会给你单词所在的行号。您也许可以使用该信息来编辑原始文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T18:56:28.283

您可以使用在注释或双引号字符串之外[`pyparsing`](http://pypi.python.org/pypi/pyparsing/)查找关键字：`public`

```
from pyparsing import Keyword, javaStyleComment, dblQuotedString

keyword = "public"
expr = Keyword(keyword).ignore(javaStyleComment | dblQuotedString) 
```

### 例子

```
for [token], start, end in expr.scanString(r"""{keyword} should match
    /*
    {keyword} should not match "
    */
    // this {keyword} also shouldn't match
    "neither this \" {keyword}"
    but this {keyword} will
    re{keyword} is ignored
    '{keyword}' - also match (only double quoted strings are ignored)
    """.format(keyword=keyword)):
    assert token == keyword and len(keyword) == (end - start)
    print("Found at %d" % start) 
```

### 输出

```
Found at 0
Found at 146
Found at 187 
```

要忽略单引号字符串，您可以使用`quotedString`代替`dblQuotedString`.

要仅使用正则表达式，请参阅[`regex-negation`SO 上的标记，](https://stackoverflow.com/questions/tagged/regex-negation)例如，[正则表达式以匹配不包含单词的字符串？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)或者使用更少的正则表达式功能 正则[表达式：通过排除匹配，没有前瞻 - 有可能吗？](https://stackoverflow.com/q/466053/4279). 简单的方法是使用正匹配并跳过匹配的注释、引用的字符串。结果是其余的比赛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:08:11.083

它找到了相反的结果，因为这正是你所要求的。:)

我不知道在一个正则表达式中将它们全部匹配的方法（尽管理论上应该是可能的，因为常规语言在补码和交叉点下是封闭的）。但是您绝对可以搜索所有公共实例，然后删除与您的“坏”正则表达式之一匹配的任何实例。例如，尝试`set.difference`在`match.start`和的`match.end`属性上使用`re.finditer`。

# c++ - 迭代一组指针

> ID：13814210
> 
> 赞同：0
> 
> 时间：2012-12-11T05:31:55.430
> 
> 标签：c++

在我当前的项目中，我有以下类型的集合：

```
typedef set<ItemPtr>            ItemSet; 
```

其中 ItemPtr 是此类：

```
class ItemPtr
{
    private:
    Item    *ptr;

    public:
    ItemPtr(Item *ptr) : ptr(ptr) { }
    Item* getPtr() const { return ptr; }
}; 
```

以及以下套装：

```
ItemSet bookList;
ItemSet movieList;
ItemSet musicAlbumList; 
```

它们都是包含在一个名为 Library 的类中的集合。这些集合中的每一个都包含 ItemPtr 的实例，其中 ItemPtr 的每个实例都包含一个指向 Book、Movie 或 MusicAlbum 实例的指针。这些中的每一个都是从名为 Item 的类派生的类。Book 的一个实例，包含作者、标题、页数和该书共有的一组关键字。我有这样的功能：

```
const ItemSet* Library::itemsForKeyword(const string& keyword)
{
    return NULL;  //need to put code in here
} 
```

需要返回每个集合中在其关键字列表中具有参数的所有项目。我不确定如何遍历每个集合，并访问它的关键字，然后将它们与上述函数的参数进行比较。我怎么能做这样的比较？

这是我的项目类：

```
class Item
{
    public:
    string mTitle;
    string mArtist;
    Item(const string& title, const string& artist);
    Item();
    virtual ostream &print(std::ostream &os) const
    {
        os << "author: \t" << mArtist << endl;
        os << "title: \t" << mTitle << endl;
        return os;
    }
    virtual ~Item();
    set<string>  keywordsList;
    void addKeywords(string keyword);
}; 
```

这是 addKeywords 函数：

```
void Item::addKeywords(string keyword)
{
keywordsList.insert(keyword);
} 
```

到目前为止，这是我在编写我需要的函数时所获得的：

```
const ItemSet* Library::itemsForKeyword(const string& keyword)
{
ItemSet temp;

for(it=bookList.begin();it!=bookList.end();it++){
    if(it->getPtr()->keywordsList)

}

return &temp;
} 
```

我知道通过用我的迭代器引用 getPtr，它使我可以访问关键字列表，但从那时起，我不知道如何检查列表以将其与传入的关键字进行比较。我的计划是，在比较并找到匹配项之后，将实例存储在 temp 中，然后将 temp 与包含该关键字的所有项目一起传回。感谢您迄今为止的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:40:52.210

就简单的迭代而言，有几种方法可以做到：

在 C++11 之前：

```
const ItemSet* item_set = // ...
for (ItemSet::const_iterator it = item_set->begin(); it != item_set->end(); ++it) {
   const ItemPtr item = *it;
   // ...
} 
```

在 C++11 之后（使用自动）：

```
const ItemSet* item_set = // ...
for (auto it = item_set->cbegin(); it != item_set->cend(); ++it) {
  const ItemPtr item = *it;
} 
```

在 C++11 之后（使用 ranged-for）：

```
const ItemSet* item_set = // ...
for (auto item : *item_set) {
   // ...
} 
```

至于处理每个项目，您首先需要向我们展示项目的代码以及您自己的一些尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:45:29.663

使用 std::set::find 检查关键字是否存在于集合中 [http://www.cplusplus.com/reference/set/set/find/](http://www.cplusplus.com/reference/set/set/find/)

注意：在您的整个帖子中，您都在谈论在列表中查找关键字。这不是您正在使用的列表。您正在使用一组。

# jquery - ASP.Net MVC Jquery AJAX 调用确实在 viewsource 中呈现 html

> ID：13814214
> 
> 赞同：1
> 
> 时间：2012-12-11T05:32:18.547
> 
> 标签：jquery, ajax, asp.net-mvc, html-rendering

我正在使用以下 jQuery 来填充级联下拉列表 -

```
<script type="text/javascript">
    $(document).ready(function () {

  $("#ddlBrand1").change(function () {

  $.getJSON("URL", { id: idBrand },
        function (carModelData) {
            $("#ddlModel1").removeAttr('disabled');
            var select = $("#ddlModel1");
            select.empty();

            select.append($('<option/>', { value: '', text: "---Select Model---" }));
            $.each(carModelData, function (index, itemData) {
                select.append($('<option/>').val(itemData.Value).html(itemData.Text ));
            });
        });
  }); 
```

它正确绑定了下拉列表，但问题是它不会生成 HTML，当我查看视图源时，下拉列表值在那里不可用。

我将选定的下拉值保留在 viewbag 中，回发后，我再次填写相关下拉列表。我正在尝试像回发之前一样设置选定的下拉列表，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:44:02.853

而不是`options.append($("<option />").val(item.ImageFolderID).text(item.Name));`你会想要使用：

`options.append($("<option />").val(item.ImageFolderID).html(item.Name));`

为下拉选项设置 html() 而不是 text() 将允许它存在于生成的源中。

**编辑**

因为要清除`select`集合，所以需要再次对元素运行 jQuery 选择。与其将其保存在变量中（通常很有帮助），不如在进行更改后更新内容。

您可能想尝试更多类似的东西：

```
//Use this to clear the select & add the default first option:
$('#dd1Model1').find('option').remove().end().append('<option value="">---Select Model---</option>').val('');
//Use this to populate the select
$.each(carModelData, function(index, itemData) {
   $('#dd1Model1').append('<option value="' + itemData.Value + '">' + itemData.Text + '</option>').val(itemData.Value);
});
//Use this to select the first option by default
$('#dd1Model1 option:eq(0)').attr('selected', 'selected'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:42:00.367

保罗，你在哪里调用这个函数？我认为您需要在 document.ready 函数中调用它。

您还需要将模型与 selected 值绑定。这样它将在 html 中可用。没有回发，一旦您发送数据，就没有会话管理。响应将是基于您从控制器创建的模型的新页面。

我怀疑脚本在回复后或在您的回复中没有执行。请验证。因此，由于 ajax 加载或脚本未执行，html 不包含值。请确保您提供的脚本正在运行。

请用准备好的文件更新问题。

**编辑**

```
$("#ddlBrand1").change(function () { //this will trigger only when ddlBrand1 changes

  $.getJSON("URL", { id: idBrand },
        function (carModelData) {
             // check this line of code executes ?
             // alert(carModelData) may expected to return some thing 
             //  other than null
            $("#ddlModel1").removeAttr('disabled');
              // makes ddlModel1 active
            var select = $("#ddlModel1");
            select.empty();
              // clears the items of #ddlModel1  
            select.append($('<option/>', { value: '', text: "---Select Model---" }));
              // adds new --Select-- (you can give value as 0)
            $.each(carModelData, function (index, itemData) {
                select.append($('<option/>').val(itemData.Value).html(itemData.Text ));
            });
             // this will loops the JSON result from the server and
                 adds the option (items)  
        });
  }); 
```

**故障排除技巧**

```
1.This function will call only when 'ddlBrand1' changes. For this to
    happen ddlBrand1 needs to have more than one option.
2\. Check whether getJSON returns a proper value.
3\. Verify the url,parameters and the result (here carModelData). Alert it.
4\. Also verify the response from server is not null. 
       You need to verify the controller, action etc. An error occurred in controller
    also leads to same issue.
5\. Refer this below  and add .error,.sucess,.complete 
```

> jQuery 1.5 中的 Promise 接口还允许 jQuery 的 Ajax 方法，包括 $.getJSON()，在单个请求上链接多个 .success()、.complete() 和 .error() 回调，甚至可以在之后分配这些回调请求可能已完成。如果请求已经完成，则立即触发回调。单击此处[url](http://api.jquery.com/jQuery.getJSON/)

# linux - 在哪里设置更长的 curl 参数列表阈值以避免“参数列表太长”错误的选项

> ID：13814216
> 
> 赞同：9
> 
> 时间：2012-12-11T05:32:36.390
> 
> 标签：linux, curl

外壳代码是： `#!/bin/sh body="............a lot of thing................"; curl -Ss -d"${body}" "xx.xx.com"`

但无法通过curl运行和发送，错误为：/usr/bin/curl: Argument list too long

可能是 $body 太长了。我想知道是否有任何选项可以设置 curl 以发送更长的帖子？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-11T05:36:16.203

将您的身体数据存储在文件中。并使用

```
 curl -d @<filename> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-17T18:55:02.370

如果我将它存储在一个文件中，我让它闭嘴。

```
curl -o fn URLETC 
```

# iphone - 断言失败错误

> ID：13814218
> 
> 赞同：1
> 
> 时间：2012-12-11T05:32:58.803
> 
> 标签：iphone, objective-c, ios

```
username=@"sri";
CalendarViewController *calendarViewController=[[CalendarViewController alloc]initWithNibName:@"CalendarViewController" bundle:nil AndUserName:username];

[self.navigationController pushViewController:calendarViewController animated:YES]; 
```

> -[UITextFieldLabel setTextColor:], /SourceCache/UIKit_Sim/UIKit-1448.89/UILabel.m:314 2012-12-11 11:00:59.257 TIMESHEET_MANAGER[553:207] 中的断言失败***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序, 原因：'无效参数不满足：颜色'

***在第一次抛出时调用堆栈：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:38:39.843

检查您的课程中是否有`setTextColor`方法。它期待一个`UIColor`对象，但其他东西被传递给该方法。检查并纠正它。那应该解决这个问题。

# java - 将整数转换为双精度数时遇到问题

> ID：13814220
> 
> 赞同：-3
> 
> 时间：2012-12-11T05:33:06.650
> 
> 标签：java, casting, integer, double

我试图让这个程序用数组 {1,2} 调用函数 arrayAvg 并返回平均值的两倍（这将是 1.5）。

这就是我的代码目前的样子。有人知道我哪里出错了吗？：X

```
import java.util.*;

public class Main
{
    public static double arrayAvg(int[] array){

        int total = 0;
        int count = 1;
        double average = 0.0;

        for(int item : array){
            total=total+item;count=count+1;
        }
        double dTotal = (double)total;
        double dCount = (double)count;
        average = (dTotal/dCount);
        return average;
    }

    public static void main(String args[]){

        int[] input = {1,2};
        double result = arrayAvg(input);
        System.out.println(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:41:01.687

将 count初始化**为 0 而不是 1**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:15:59.303

为什么需要计数？你基本上需要数组中的值来划分它。只需使用 arry.length，这将返回数组中元素的数量并将其用于除法

```
int len = array.length;
double dTotal = (double) total;
double dCount = (double) len;
average = (dTotal / dCount);
return average; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T05:41:12.437

你的判断逻辑`count`是错误的。它应该从 0 而不是 1 开始。

此外，您可以简单地获取数组长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T05:57:35.680

实际上你的逻辑有问题，你已经初始化了

```
int count = 1; 
```

这是错误的，您应该使用 0 初始化该变量，如下所示

```
int count = 0; 
```

下面是修改后的代码

```
public class Main {
    public static double arrayAvg(int[] array) {
        int total = 0;
        int count = 0;
        double average = 0.0;
        for (int item : array) {
            total = total + item;
            count = count + 1;
        }
        double dTotal = (double) total;
        double dCount = (double) count;
        average = (dTotal / dCount);
        return average;
    }

    public static void main(String args[]) {
        int[] input = { 1, 2 };
        double result = arrayAvg(input);
        System.out.println(result);
    }
} 
```

**输出**

```
1.5 
```

# regex - Emacs 正则表达式替换

> ID：13814221
> 
> 赞同：1
> 
> 时间：2012-12-11T05:33:09.763
> 
> 标签：regex, emacs, replace

在我的乳胶文件中，我定义了

```
\newcommand{\replace}[2]{\textcolor{red}{\sout{#1} }\textcolor{blue}{{#2}}} 
```

只是为了突出变化。所以在我的论文草稿中，出现了很多

```
\replace{old text}{new text} 
```

现在论文被接受了，我想得到一个干净的版本。如何使用 emacs 正则表达式替换将它们全部更改为

```
new text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:52:51.723

一个非常简单的方法是修改您的替换命令，使其仅打印新文本：

```
\newcommand{\replace}[2]{#2} 
```

* * *

否则，我会使用如下的键盘宏来执行此操作：

```
C-s           ;; isearch-forward
\             ;; self-insert-command
replace{      ;; self-insert-command * 8
RET           ;; newline
<left>        ;; backward-char
ESC <C-right> ;; forward-sexp
C-SPC         ;; set-mark-command
C-r           ;; isearch-backward
\             ;; self-insert-command
replace       ;; self-insert-command * 7
RET           ;; newline
C-w           ;; kill-region
2*C-SPC       ;; set-mark-command
ESC <C-right> ;; forward-sexp
DEL           ;; delete-backward-char
C-u C-SPC     ;; set-mark-command
C-d           ;; delete-char 
```

这个键盘宏背后的逻辑是你搜索`\replace{`命令，然后使用`forward-sexp`和`backward-sexp`移动平衡的“大括号”对。

**编辑**：请注意，绑定`forward-sexp`传统上写为`C-M-<right>`，但这样的按键可能会被您的窗口管理器拦截（至少对于 Linux 机器来说这是一种非常常见的行为）。因此，通常更容易键入`ESC``C-<right>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:28:23.383

我将使用具有以下模式的命令`query-replace-regexp`（`M-x query-replace-regexp`或）：`C-M-%`

```
\\replace{.+?}{\(.+?\)} 
```

和以下替换字符串：

```
\1 
```

请注意花括号中的问号，它使搜索变得懒惰（非贪婪），这意味着它匹配尽可能少的字符。

# javascript - Open BlueDragon 中的相对/绝对 CFC 路径

> ID：13814223
> 
> 赞同：0
> 
> 时间：2012-12-11T05:33:27.670
> 
> 标签：javascript, coldfusion, cfc, openbd

我正在尝试将现有的 ColdFusion 代码库从 Adob​​e CF8 迁移到 OpenBD。我的文件包括这样的内容：

```
/cfc/one.cfc
/cfc/two.cfc

/app/page.cfm 
```

在 CF8 中，我有一个从“cfc”到“/cfc”的映射，在 page.cfm 中我有：

```
<cfajaxproxy cfc="cfc.one" jsclassname="oneCfc">
<cfajaxproxy cfc="cfc.two" jsclassname="twoCfc"> 
```

然后在 Javascript 中，我可以使用以下命令调用 CFC：

```
var c = new oneCfc(); 
```

……生活很美好。

* * *

但是，在 Open BD (v2.0.3b) 下，我似乎无法从 Javascript 调用 CFC 函数。代理像以前一样声明，我可以在 Javascript 中创建对象，但是当我尝试调用一个函数时，我的浏览器开发工具中出现以下错误：

```
POST http://127.0.0.1:8080/app/cfc/one.cfc 404 (Not Found) 
```

当它尝试调用该函数时，它似乎在 Javascript 中使用相对路径，即使它已经创建了对象。

根据 OpenBD，CFC 是有效的（我可以浏览到`./cfc/one.cfc?wsdl`，并且可以使用`./cfc/one.cfc?method=getData`等调用函数）。我是否在 OpenBD 中定义了映射似乎并不重要。

似乎可行的一种解决方法是让 CFC 与调用 CFM 文件具有相同的功能，但是当我想重用来自许多不同页面的 CFC 代码时，这不是一个很好的解决方案。

有没有人在 OpenBD 下工作的其他目录中找到 CFC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:03:45.990

供将来参考：这个问题在 2013 年 3 月上旬发布的 OpenBD 3.0 中（或多或少）得到了解决。

在 3.0 中，创建 AJAX 代理 .js 文件的代码被[修改](http://websvn.openbd.org/websvn/diff.php?repname=OpenBD&path=%2Ftrunk%2Fsrc%2Fcom%2Fnaryx%2Ftagfusion%2Fcfm%2Ftag%2Fcfajaxproxy%2FcfAJAXPROXY.java&rev=1971)为包含以下行：

```
javascript.append( " this.remoteCFC = '" );
javascript.append( CFC.replace('.', '/') );
javascript.append( ".cfc';\r\n" ); 
```

虽然它仍然不考虑任何服务器端映射，但它至少允许您引用不是当前 .cfm 页面的子路径：

```
<cfajaxproxy cfc=".cfc.one" jsclassname="cfcOne"> 
```

(note the leading `.`, which is replaced with a `/` by OpenBD. In previous versions of OpenBD this would generate an error)

# wpf - 具有动态列的 wpf 网格

> ID：13814224
> 
> 赞同：9
> 
> 时间：2012-12-11T05:33:28.413
> 
> 标签：wpf, mvvm, grid, multiple-columns

我有一个希望绑定到 WPF 网格的集合。

我面临的问题是列数是动态的并且取决于集合。这是一个简单的模型：

```
public interface IRows
{
    string Message{get;}
    IColumns[] Columns{get;}
}

public interface IColumns
{
    string Header {get;}
    AcknowledgementState AcknowledgementState{get;}
}

public interface IViewModel
{
    ObservableCollection<IRows> Rows {get;}
} 
```

我希望我的视图绑定到包含列集合的行集合。

我的 Columns 集合包含一个应该由图像表示的枚举（3 种可能性中的 1 种）。它还包含一个 Message 属性，该属性只应显示在一列中（静态的，只是一些文本信息）。它还包含一个标题字符串，该字符串应显示为该列的标题。

![我要显示的链接](../Images/71bae4d193cf22b3d18160c298ca8214.png)

请注意，列数是可变的（此时标题设置为确认，但这将更改为表示动态数据）。

**更新：这是在实施 Rachel 的建议之后**

```
 <ItemsControl
 ItemsSource="{Binding Items, Converter={StaticResource PresentationConverter}}">
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <Grid ShowGridLines="true"
         local:GridHelpers.RowCount="{Binding RowCount}"
         local:GridHelpers.ColumnCount="{Binding ColumnCount}" />
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemContainerStyle>
    <Style>
      <Setter Property="Grid.Row" Value="{Binding RowIndex}"/>
      <Setter Property="Grid.Column" Value="{Binding ColumnIndex}"/>
    </Style>
  </ItemsControl.ItemContainerStyle>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <ContentControl Content="{Binding}">
        <ContentControl.Resources>
          <DataTemplate DataType="{x:Type UI:MessageEntity}">
            <TextBox Text="{Binding Message}"></TextBox>
          </DataTemplate>
          <DataTemplate DataType="{x:Type UI:StateEntity}">
            <TextBox Text="{Binding State}"></TextBox>
          </DataTemplate>
        </ContentControl.Resources>
      </ContentControl>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这几乎给了我现在想要的东西。我只坚持应该为标题做些什么。欢迎任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T16:43:22.583

`ItemsControls`您可以为此使用嵌套

这是一个基本示例：

```
<!-- Bind Rows using the default StackPanel for the ItemsPanel -->
<ItemsControl ItemsSource="{Binding Rows}">
    <!-- Set the Template for each row to a TextBlock and another ItemsControl -->
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <!-- Need to set Width of name TextBlock so items line up correctly -->
                <TextBlock Width="200" Text="{Binding Name}" />

                <ItemsControl ItemsSource="{Binding Columns}">
                    <!-- Use a horizontal StackPanel to display columns -->
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:16:06.333

使用网格方法可能会使事情变得比应有的更复杂。您是否尝试过更改列表视图的模板，或者为此目的使用 DataGrid？

例如，看看这个项目： http: [//www.codeproject.com/Articles/25058/ListView-Layout-Manager](http://www.codeproject.com/Articles/25058/ListView-Layout-Manager)

或者这个： http: [//www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView](http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView)

如果您使用 Grid，我相信您必须在后面添加大量代码来管理列和行的数量、它们的大小、单元格内容......而 ListView/DataGrid 将让您通过动态执行此操作模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T00:45:16.470

使用代码创建网格，如[http://msdn.microsoft.com/en-us/library/system.windows.controls.grid(v=vs.90).aspx#feedback](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid(v=vs.90).aspx#feedback)

创建一个 ColumnDefinition 类型的属性，（并使用属性更改）来创建列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T12:25:18.190

还可以选择使用动态对象来创建列。这有点费力，但结果非常有效，而且解决方案通常非常灵活。

这将向您展示动态对象的基础知识 将 [DynamicObject 绑定到具有自动列生成的 DataGrid？](https://stackoverflow.com/questions/2473739/binding-dynamicobject-to-a-datagrid-with-automatic-column-generation)

我在使用嵌套对象、具有对象的列然后尝试将单元格内容绑定到对象时遇到了一些麻烦。

这是我提出的一个问题，举了一个如何做到这一点的例子

[绑定到 XAML 中 WPF DataGridCell 内容的问题](https://stackoverflow.com/questions/12409606/problems-binding-to-a-the-content-of-a-wpf-datagridcell-in-xaml/12511046#12511046)

# html - 仅当跨度位于没有“文件夹”类的范围内时，如何才能使我的 CSS 工作？

> ID：13814226
> 
> 赞同：1
> 
> 时间：2012-12-11T05:33:37.860
> 
> 标签：html, css, css-selectors

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:39:25.023

你应该可以在`:not()`这里使用...

```
ul li a:not(.folder) span {
    cursor: pointer;
} 
```

由于您也有`<span>`元素出现在内部`<li>`但外部`<a>`，您需要稍微修改选择器......

```
ul li > span, ul li > a:not(.folder) > span {
    cursor: pointer;
} 
```

或者（或者如果您需要支持不理解的浏览器`:not()`），只需覆盖它：

```
ul li span {
    cursor: pointer;
}

ul li a.folder span {
    cursor: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:40:26.300

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:19:47.197

还添加此 CSS：

```
ul li a span{
cursor: default; 
```

}

检查它在[http://fiddle.jshell.net/5w2SX/](http://fiddle.jshell.net/5w2SX/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-11T05:42:40.290

下面的 CSS 适用于所有浏览器

```
.folder a {
 cursor: default !important;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-11T05:42:56.853

```
ul li a span {
    cursor: pointer;
}

ul li a.folder span {
    cursor: default;
} 
```

第一部分会将元素“ul li a span”上的光标转换为指针。

第二行定义了例外，所有具有类文件夹的都将具有默认光标。

# javascript - 带有 div 的 fancybox 2

> ID：13814227
> 
> 赞同：0
> 
> 时间：2012-12-11T05:33:41.120
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我以为我在使用带有 div 包裹的 nivo 滑块的fancybox 2 时遇到了麻烦，但是经过一些测试，我发现我在使用带有 div 的 facybox 2 时遇到了麻烦。所以我会重新组织我的问题。为了更清楚，我将在下面发布我的代码：

对于 CSS：

```
<style>
  #content{
    background: red;
  }
  #maximize{ width: 24px; height: 24px; }
</style> 
```

对于 html：

```
<a href='#content' id="maximize"> max </a>
<div id="content"> </div> 
```

对于 JS：

```
$('#maximize').click(function() {
$('#maximize').fancybox({
     'href' : '#content'
   });
}); 
```

如果我单击最大按钮，它会按预期工作。但是，如果我关闭了fancybox，弹出框就消失了，原来id=“content”的div也消失了。这不是预期的。我希望内容变成原来的样子，但不要消失。

其他问题：如何更改弹出的花式框的大小？我想让花式盒子更大。

我希望我的问题足够清楚。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:37:48.363

你实际上并不需要：

```
$('#maximize').click(function() {
   $('#maximize').fancybox({
     'href' : '#content'
   });
}); 
```

...但只有这个：

```
$('#maximize').fancybox({
    // API options here
}); 
```

...因为`.fancybox()`已经将事件绑定`click`到 selector ，否则是多余的 ....选项`#maximize`也是如此，因为已经从链接中的属性中获取。`'href' : '#content'``href``href`

另一方面，fancybox 将始终隐藏打开的`inline`内容，因为它将是它的预期状态（在fancybox 中显示已经可见的东西不是多余的吗？）...无论如何，您可以使用回调使其再次可见`afterClose`喜欢 ：

```
$('#maximize').fancybox({
    afterClose: function() {
        $("#content").show();
    }
}); 
```

关于第二个问题，使用`width`和`height`选项以及`fitToView`和`autoSize`设置您喜欢的盒子尺寸，例如：

```
$('#maximize').fancybox({
    fitToView: false, // avoid the adjusting size to viewport
    autoSize: false, // avoid set size based on content
    width: 420, // or whatever
    height: 320,
    afterClose: function() {
        $("#content").show();
    }
});​ 
```

查看**[工作演示](http://jsfiddle.net/F8kaS/)**

# android - Android :- 使应用程序不可共享

> ID：13814229
> 
> 赞同：0
> 
> 时间：2012-12-11T05:33:52.073
> 
> 标签：android

我想做一个必须非常安全的应用程序。因此，如果我在手机中安装 apk，它应该只能在该手机中使用。共享 apk 时它不应该工作。任何人都可以帮助我实现这一点。

我这边的一个想法是使用算法使用设备mac地址生成密码，因此密码不适用于两个不同的设备登录。有没有办法在android中获取MAC地址（或设备独有的东西）来自java？.期待替代解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:36:59.077

如果您通过[Google Play 商店](https://play.google.com/store)分发应用程序，您可以使用 Google Play[应用程序许可](http://developer.android.com/google/play/licensing/index.html)。

您可以阅读Android 开发者博客上的[识别应用安装](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)，了解如何唯一识别设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:23:23.013

我用IMEI号码实现。所以我的apk是根据IMEI号码设计的。所以它会检查给定的IMEI是否与设备IMEI匹配，然后才会启动新的Activity，否则它会退出。

```
TextView tx = (TextView) findViewById(R.id.tx);
    String ts = Context.TELEPHONY_SERVICE;
    TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(ts);
    String imei = mTelephonyMgr.getDeviceId();
    if (imei.equals("<what we given inthe source>")) {
        // Launch the activity
    } else {
        // show an alert dialog and exit
    } 
```

# sql - 亚型不相交

> ID：13814231
> 
> 赞同：1
> 
> 时间：2012-12-11T05:33:59.997
> 
> 标签：sql, oracle10g

我浏览了论坛，但我似乎无法找到我正在寻找的确切内容。我有一个超类型、员工和三个引用员工主键 ID 的子类型。雇员的子类型必须是不相交的。我的问题出现在我不明白在哪里设置约束来实现这一点。

```
CREATE TABLE Employee(
ID  INT,
PRIMARY KEY(ID));

CREATE TABLE Manager(
ID      INT,
Salary  INT NOT NULL,
PRIMARY KEY(ID),
FOREIGN KEY(ID) REFERENCES Employee(ID));

CREATE TABLE Server(
ID      INT,
Tips    INT     NOT NULL,
PRIMARY KEY(ID),
FOREIGN KEY(ID) REFERENCES Employee(ID));

CREATE TABLE Hostess(
ID          INT,
hourly_sal  INT     NOT NULL,
PRIMARY KEY(ID),
FOREIGN KEY(ID) REFERENCES Employee(ID)); 
```

我想通过相交值的视图创建约束，然后将视图的条目限制为 null 的约束，如下所示：

```
CREATE VIEW EMPLOYEE_DISJOINT AS
((SELECT ID FROM Server)INTERSECT (SELECT ID FROM Hostess))
UNION
((SELECT ID FROM Hostess) INTERSECT (SELECT ID FROM Manager))
UNION
((SELECT ID FROM Server) INTERSECT (SELECT ID FROM Manager));

ALTER VIEW EMPLOYEE_DISJOINT
ADD CONSTRAINT disjoint CHECK(ID = NULL); 
```

试图在视图上创建一个约束，要求 Employee 中的所有主键对于一个且只有一个员工子类型是唯一的。有一个更好的方法吗？虽然这种方法似乎应该有效，但我收到以下错误：

```
ADD CONSTRAINT disjoint CHECK(ID = NULL)
                  *

ERROR at line 2:
ORA-00922: missing or invalid option 
```

请帮助或指出我可能找到它的方向！万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:43:26.833

您*可以*使用物化视图并添加`CHECK (ID=NULL)`约束，但更简单的方法可能是在 Employee 表上有一个鉴别器列，例如`employee_type`使用有效值`('Manager', 'Server', 'Hostess')`。

# java - Scala / Java - 未在指定目录中创建文件

> ID：13814232
> 
> 赞同：1
> 
> 时间：2012-12-11T05:34:01.703
> 
> 标签：java, file, scala, io, directory

这可能是一个非常基本的问题，但我尝试了各种选项，但没有成功，因此请求帮助。我想在指定目录中创建一个文件。如果文件已经存在，我想将数据附加到它。以下是我尝试过的：

```
 var DirectoryName: String = "LogFiles"
    var dir: File = new File(DirectoryName);  
    dir.mkdir();

    var ActorID: String = "1"  
    var FileName: String = DirectoryName + File.separator + "Actor_" + ActorID + ".log"
    val FileObj: File = new File(FileName)

//   FileObj.getParentFile().mkdirs();
//   FileObj.createNewFile();

    var FileWriterObj: FileWriter = null
    var FileExistsFlag = 0

    if (!FileObj.exists())
    {    
     FileWriterObj = new FileWriter(FileObj.getName())
    }
    else
    {
      FileWriterObj = new FileWriter(FileObj.getName(), true)
      FileExistsFlag = 1
    }

    var writer = new PrintWriter(FileWriterObj)

    if(FileExistsFlag == 0)
        writer.write("new file")
    else
    writer.append("appending to old file") 
```

互联网搜索要求使用以下内容：

```
FileObj.getParentFile().mkdirs();
FileObj.createNewFile(); 
```

但它在目录内创建空文件并在目录外创建新文件并附加到它。而且很少有帖子表明不需要使用 createNewFile() 来创建文件。

我尝试提供各种路径格式，如下所示：

```
var DirectoryName: String = "../LogFiles"
var DirectoryName: String = "/home/ms/Desktop/Project/LogFiles" 
```

但它仍然不会在目录中创建文件。你能指出我错过了什么吗？

操作系统：Ubuntu 12.04

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T05:44:16.560

您应该使用 FileObj.getAbsolutePath，而不是 FileObj.getName。getName 只返回文件的名称，这解释了为什么它总是放在当前目录中。

空文件问题可以通过在函数末尾调用 writer.close() 来解决。我认为没有必要使用 createNewFile

# mysql - MYSQL时间戳差48小时

> ID：13814236
> 
> 赞同：0
> 
> 时间：2012-12-11T05:34:13.747
> 
> 标签：mysql, timestamp

我有以下查询： SELECT TIMESTAMPDIFF(HOUR, timestam, NOW()) AS HoursDifference

此返回时差例如 0、1、2、3。

我需要帮助编写一个 SQL 查询，该查询将花费这一小时并将其从 48 中减去，给出 48、47、46 或 45 的答案。

假设它给出了这个输出：

`HoursDifference`

```
0
1
2
8 
```

如何获得以下输出？：

`HoursDifference`

```
48
47
46
40 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:39:47.443

```
SELECT  (48 - TIMESTAMPDIFF(HOUR, timestam, NOW())) AS HoursDifference 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:39:54.617

你是这样问的吗

```
SELECT (48 - TIMESTAMPDIFF(HOUR, timestam, NOW())) AS HoursDifference 
```

# python - 如何在 Python / Flask 中干净利落地做 slug？

> ID：13814237
> 
> 赞同：1
> 
> 时间：2012-12-11T05:34:13.337
> 
> 标签：python, web-services, mongodb, flask, slug

我在 Python / Flask 中有一个针对 MongoDB 的简单 Web 服务：[https ://github.com/rjurney/Collecting-Data/blob/master/src/python/web/index.py](https://github.com/rjurney/Collecting-Data/blob/master/src/python/web/index.py)

它一遍又一遍地重复@app.route 代码，就像这样：

```
@app.route("/email/<message_id>")
def email(message_id):
  email = emaildb.find_one({"message_id": message_id})
  print email
  return render_template('partials/email.html', email=email)

# Enable /emails and /emails/ to serve the last 20 emaildb in our inbox unless otherwise specified
default_offsets={'offset1': 0, 'offset2': 0 + config.EMAIL_RANGE}
@app.route('/', defaults=default_offsets)
@app.route('/emails', defaults=default_offsets)
@app.route('/emails/', defaults=default_offsets)
@app.route("/emails/<int:offset1>/<int:offset2>")
def list_emaildb(offset1, offset2):
  offset1 = int(offset1)
  offset2 = int(offset2)
  emails = emaildb.find()[offset1:offset2] # Uses a MongoDB cursor
  nav_offsets = get_offsets(offset1, offset2, config.EMAIL_RANGE)
  data = {'emails': emails, 'nav_offsets': nav_offsets, 'nav_path': '/emails/'}
  return render_template('partials/emails.html', data=data)

default_search={'offset1': 0, 'offset2': 0 + config.EMAIL_RANGE, 'query': False}
@app.route("/emails/search", defaults=default_search)
@app.route("/emails/search/", defaults=default_search)
@app.route("/emails/search/<string:query>", defaults=default_search)
@app.route("/emails/search/<string:query>/<int:offset1>/<int:offset2>")
def search_email(query, offset1, offset2):
  if query == False:
    query = request.args.get('query')
    return redirect('/emails/search/' + query + '/' + str(offset1) + '/' + str(offset2))
  doc_count = offset2 - offset1
  results = elastic.search(query, {'from': offset1, 'size': doc_count}, indexes=["email"])
  emails = process_results(results)
  nav_offsets = get_offsets(offset1, offset2, config.EMAIL_RANGE)
  data = {'emails': emails, 'nav_offsets': nav_offsets, 'nav_path': '/emails/search/', 'query': query}
  return render_template('partials/emails.html', data=data) 
```

这很丑陋，冒犯了我。这是重复的垃圾。我怎样才能使这个蛞蝓处理更清洁，这样它就不会为每个控制器重复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T06:42:04.203

像这样的东西怎么样：

```
@app.route('/')
@app.route('/emails')
@app.route('/emails/')
@app.route("/emails/<int:offset1>/<int:offset2>")
def list_emaildb(offset1=0, offset2=config.EMAIL_RANGE):
   ... 
```

顺便说一句，不确定是否需要，因为如果您确实有第二个`@app.route('/emails')`，Flask 应该重定向`/emails`到。`/emails/`但也许你也需要`/emails`（取决于你的需要）所以我把它留在那里。

# python - 使用python的CGI表单提交按钮

> ID：13814241
> 
> 赞同：3
> 
> 时间：2012-12-11T05:34:48.717
> 
> 标签：python, cgi

我正在尝试创建一个 cgi 表单，它允许用户输入一个单词，然后它将获取该单词并将其发送到下一页（另一个 cgi）。我知道如何使用 .html 文件进行操作，但是在使用 python/cgi 进行操作时我迷失了方向。

这是我需要做的，但它是在 html 中。

```
<html>
<h1>Please enter a keyword of your choice</h1>
<form action="next.cgi" method="get">
Keyword: <input type="text" keyword="keyword">  <br />
<input type="submit" value="Submit" />
</form>
</html> 
```

有谁知道如何使用 cgi 创建提交按钮？这是我到目前为止所拥有的。

```
import cgi
import cgitb
cgitb.enable()

form = cgi.FieldStorage()

keyword = form.getvalue('keyword') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T06:55:05.703

要从 Python cgi 页面显示 html，您需要使用 print 语句。

这是使用您的代码的示例。

```
#!/home/python
import cgi
import cgitb
cgitb.enable()

print 'Content-type: text/html\r\n\r'
print '<html>'
print '<h1>Please enter a keyword of your choice</h1>'
print '<form action="next.cgi" method="get">'
print 'Keyword: <input type="text" name="keyword">  <br />'
print '<input type="submit" value="Submit" />'
print '</form>'
print '</html>' 
```

然后在 next.cgi 页面上，您可以获得表单提交的值。就像是：

```
#!/home/python
import cgi
import cgitb
cgitb.enable()

form = cgi.FieldStorage()

keyword = form.getvalue('keyword')

print 'Content-type: text/html\r\n\r'
print '<html>'
print keyword
print '</html>' 
```

# codeigniter - 如何在 codegnighter 中调用和使用 Rest 完整服务

> ID：13814242
> 
> 赞同：0
> 
> 时间：2012-12-11T05:34:54.053
> 
> 标签：codeigniter, rest

实际上，我正在研究 codegnighter，我想在项目中的数据库位置使用 Restful xml 服务，但我不知道 codegnighter 是否有任何默认方法或函数来获取 xml 或 restful 服务响应。

请帮帮我谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:47:08.840

[Phil Sturgeon 的 REST_Controller](https://github.com/philsturgeon/codeigniter-restserver/blob/master/application/libraries/REST_Controller.php)是一个很好的起点。

# performance - 就性能而言，安装的 JRE 对基于 Dojo 的应用程序有什么影响吗？

> ID：13814244
> 
> 赞同：0
> 
> 时间：2012-12-11T05:35:02.593
> 
> 标签：performance, browser, dojo

我有一个基于 DOJO 的应用程序，在某些工作站上存在一些性能问题，而不是全部。

我们正在尝试找出原因，但由于行为不一致，因此很难确定性能问题的原因。

有些机器的代码在大多数情况下都可以正常工作，但是有些机器会遇到卡住的问题。

注意：我们无权访问报告问题的客户端计算机。

所以我们正在研究的一件事是：在机器上安装了 JRE。

请告诉我。

另外，如果您有任何建议我可以在哪里看，请提出建议。

谢谢尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:16:48.503

除非您在 Node.js 下运行 Dojo，否则理论上您将需要某种浏览器或其他 JavaScript 容器来运行 Dojo 应用程序。如果我们假设这是一个基于浏览器的应用程序，那么 Dojo 正在浏览器的 JavaScript 引擎内部运行。

因此，JRE 似乎不太可能影响浏览器的性能，除非您还在应用程序中运行 Java 小程序。

您可能想看看总体上可能会减慢这些工作站的速度。

# jquery - 在 onChange 函数后，默认事件未显示在 Fullcalendar 中

> ID：13814245
> 
> 赞同：0
> 
> 时间：2012-12-11T05:35:08.333
> 
> 标签：jquery, joomla, fullcalendar

请检查代码以供参考

```
<script type='text/javascript'>

    $(document).ready(function() {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        $('#calendar').fullCalendar({

            editable: true,

            eventDrop: function(calEvent,dayDelta,minuteDelta,allDay,revetFunc) {
                var stDate = $.fullCalendar.formatDate(calEvent.start, 'dd-MM-yyyyy');
                $.post('event_update.php',{'allday':allDay, 'event':calEvent.id, 'start':stDate}, function(response){
                    if(response.length > 0){
                       alert(response);
                       revertFunc();
                    }
            });
            },

            loading: function(bool) {
                if (bool) $('#loading').show();
                else $('#loading').hide();
            }

        });

        $('#project').change(function() {
            var filter = $('#project').val();
            $('#calendar').fullCalendar('removeEvents');
            $('#calendar').fullCalendar('addEventSource', 'json-events.php?filter='+filter);
            $('#calendar').fullCalendar('rerenderEvents');
        });

    });

</script> 
```

方案 1：

在执行 onChange 函数之前，完整的日历将显示所有事件。

方案 2：

执行 onchange 功能（事件过滤器）后，如果用户更改过滤器选项，它将显示事件。默认情况下不显示任何事件。请告诉我如何解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:02:39.453

您的日历最初没有事件源。

消除

```
$('#calendar').fullCalendar('addEventSource', 'json-events.php?filter='+filter); 
```

而是将其放入初始化中：

```
events: json-events.php?filter='+filter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:31:00.347

如果您希望日历最初显示所有事件（场景 1??），则在初始化 fullcalendar 时需要有一个 events 参数（或者手动调用更改事件）。在发生更改事件之前，不会调用您的更改过滤器，因此当页面加载时，日历将为空。

```
$('#calendar').fullCalendar({
    ...
    events: json-events.php?filter='+filter
 }); 
```

on change 事件应该可以工作，但是 AFIK 你可以摆脱 rerenderEvents，因为 addEventSource 应该处理这个问题。

如果您想更改过滤器参数而不每次都删除和添加事件源，请参阅[此先前的答案](https://stackoverflow.com/a/13675373/1195949)

# mysql - 将新的 MySql 服务器实例启动到内存中的 Bash 脚本

> ID：13814247
> 
> 赞同：0
> 
> 时间：2012-12-11T05:35:20.597
> 
> 标签：mysql, linux, bash, shell, scripting

如果我在 RAM 内存中设置 mysql 实例，单元测试的运行速度会快几倍，但由于这是手动过程，我需要一些时间来执行此操作，并且我需要在少数服务器上执行此操作。新的 mysql 实例应该在端口 3307 上运行，如果它是空闲的，否则返回错误。

所以，我首先需要检查一些服务是否已经在这个端口上监听，我为此添加了代码，但是在一些服务器上它没有显示在 3307 端口上运行的进程，即使有这样的进程。我需要帮助来改进这个脚本。我对shell编程没有太多经验。

```
#!/bin/bash

STAT=`netstat -na | grep 3308 | awk '{print $6}'`
if [ "$STAT" = "LISTEN" ];
then
    echo "There is already process that listen on port 3307"
fi

# Create ramdisk
mkdir -p /mnt/ramdisk
mount -t tmpfs -o size=1G tmpfs /mnt/ramdisk
chown mysql:mysql /mnt/ramdisk

port=3307

distribution=$(lsb_release -i | cut -f2)

if [ $distribution == 'Debian' ]
then
    mkdir /var/lib/mysql2
    chown -R mysql.mysql /var/lib/mysql2/
    mkdir /var/log/mysql2
    chown -R mysql.mysql /var/log/mysql2
    cp -R /etc/mysql/ /etc/mysql2
    cd /etc/mysql2/
    sed -i "s/3306/$port/g" my.cnf
    sed -i "s/mysqld.sock/mysqld2.sock/g" my.cnf
    sed -i "s/mysqld.pid/mysqld2.pid/g" my.cnf
    sed -i "s/var\/lib\/mysql/var\/lib\/mysql2/g" my.cnf
    sed -i "s/var\/log\/mysql/var\/log\/mysql2/g" my.cnf
    mysql_install_db --user=mysql --datadir=/mnt/ramdisk
    mysqld_safe --defaults-file=/etc/mysql2/my.cnf &
elif [ $distribution == 'CentOS' ]
then
    cp /etc/my.cnf /etc/my2.cnf
    cd /etc
    sed -i "s/3306/$port/g" my2.cnf
    sed -i "s/mysqld.sock/mysqld2.sock/g" my2.cnf
    sed -i "s/mysqld.pid/mysqld2.pid/g" my2.cnf
    sed -i "s/var\/lib\/mysql/var\/lib\/mysql2/g" my2.cnf
    sed -i "s/var\/log\/mysql/var\/log\/mysql2/g" my2.cnf
    mysql_install_db --user=mysql --datadir=/mnt/ramdisk
    mysqld_safe --defaults-file=/etc/my2.cnf &
else
    exit 13
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:17:25.423

忽略您在测试中使用 3308 来检查端口是否正在侦听的事实，您可能想要使用 netcat，它只是尝试连接：

```
if nc -z localhost "$port"
then
  echo "Port $port is in use"
  exit 1
fi 
```

您可以类似地使用`lsof -i TCP:"$port" -s TCP:LISTEN`which 可能具有打印侦听命令（如果有的话）的理想副作用。nc/lsof 与解析 netstat 相比的优势在于您不能解析错误（例如，如果应用程序侦听 UDP 端口 13307，您的情况就会中断）。

您可能希望添加`set -e`为第二行。如果其中一个命令失败（例如，由于缺少文件或权限），这将使 bash 中止，而不是毫无意义地继续执行下一个命令并可能破坏某些东西。

您还可以在一个 sed 命令中使用多个表达式，并为 s 使用不同的分隔符以避免过度转义：

```
sed -i -e 's/mysqld.pid/mysqld2.pid/g' \
       -e 's:/var/lib/mysql:/var/lib/mysql2/:g' \
       file 
```

一般来说，您可能还想`sed -i '1i# Autogenerated file, do not edit' my.cnf`在第一行添加注释，这样人们就不会修改它并覆盖他们的更改。

# python - Pika 中“queue_declare”的结果对象文档

> ID：13814249
> 
> 赞同：2
> 
> 时间：2012-12-11T05:35:26.097
> 
> 标签：python, rabbitmq, pika

在以下教程中：[http://www.rabbitmq.com/tutorials/tutorial-three-python.html](http://www.rabbitmq.com/tutorials/tutorial-three-python.html)，有以下代码。

```
 result = channel.queue_declare(exclusive=True)
   queue_name = result.method.queue 
```

Pika 的“结果”对象记录在哪里？我想知道我可以从中获得的一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:41:13.473

我忘记了昨晚显而易见的事情。Python 通常是自我记录的，尤其是使用“dir”函数。在 python 内部运行 this，然后`result.__class__`在结果对象上运行 " " 表明这是 Pika 中的 METHOD 对象。

```
>>> r
<METHOD(['frame_type=1', 'channel_number=1', 'method=<Exchange.DeclareOk>'])>
>>> r.__class__
<class 'pika.frame.Method'>
>>> dir(r)
['INDEX', 'NAME', '__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_marshal', 'channel_number', 'frame_type', 'marshal', 'method'] 
```

一些谷歌搜索将我带到这些文档：[https ://pika.readthedocs.org/en/latest/frame.html#method](https://pika.readthedocs.org/en/latest/frame.html#method)

很遗憾...

```
This class level documentation is not intended for use by those using Pika in their applications. This documentation is for those who are extending Pika or otherwise working on the driver itself. 
```

因此，RabbitMQ 网站上的这个特定示例似乎使用了 Pika 的未记录功能。结果，我最终只是在我的应用程序中生成了我自己的唯一名称。

# shopify - 如何在 Shopify API 中获取“捕获金额”和“退款金额”

> ID：13814252
> 
> 赞同：2
> 
> 时间：2012-12-11T05:35:44.507
> 
> 标签：shopify

我无法找到授权后捕获的金额。

此外，当我取消订单并部分退款时，我也没有收到退款的金额。

在`[Orders API][1]`这些交易中，我只找到产品的净额、运费、税额、折扣额，但我看不到`Captured amount`或`Refunded amount`

有什么方法可以获取`Captured amount`或`Refunded amount`使用 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:12:36.413

查看[Transactions API](https://help.shopify.com/api/reference/transaction)以获取此类信息。

# java - 在向量中添加日期类型的“事件”

> ID：13814253
> 
> 赞同：0
> 
> 时间：2012-12-11T05:36:00.690
> 
> 标签：java, date, vector

由于我输入的日期，我无法添加事件。我不确定它应该是哪种模式。

```
Event h1 = new Event(Tue Dec 13 00:00:00 CST 2022, "New Year's Day", "New Year's Day", "Holiday");
vEvents.add(h1); 
```

这是事件类

```
public Event(Date d, String t, String de, String ty){
        this.date = new Date(d.getTime());
        this.title = t;
        this.desc = de;
        this.type = ty;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:39:04.090

这个：

```
Tue Dec 13 00:00:00 CST 2022 
```

不是一个`Date`。它甚至不是有效的 Java——它没有`String`被任何形式的封装，并且会导致编译错误。

如果您希望通过特定的一天，请查看[`Calendar`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)课程，或者更好的是[Joda Time](https://github.com/JodaOrg/joda-time)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:40:23.523

您不应该发送`Date`像`String`（Tue Dec 13 00:00:00 CST 2022）这样的对象，而是获取一个`Calendar`实例，在那里设置日期并`Date`从那里发送。

小例子：

```
Calendar c = Calendar.getInstance();
c.set(Calendar.YEAR, 2022);
c.set(Calendar.MONTH, Calendar.DECEMBER);
c.set(Calendar.DATE, 13);
Event h1 = new Event(c.getTime(), "New Year's Day", "New Year's Day", "Holiday");
vEvents.add(h1); 
```

为了不重写所有`Calendar`代码，您可以创建一个实用方法来获取`Date`实例：

```
public class Utils {

    public static Date getDate(int day, int month, int year) {
        Calendar c = Calendar.getInstance();
        c.set(Calendar.YEAR, year);
        c.set(Calendar.MONTH, month - 1);
        c.set(Calendar.DATE, day);
        return c.getTime();
    }
}

//now calling this utility method in your code
Event h1 = new Event(Utils.getDate(13, 12, 2022), "New Year's Day", "New Year's Day", "Holiday");
vEvents.add(h1); 
```

作为更高级（和现实世界的应用程序）的解决方案，您应该按照 Makoto 的回答中所述使用 Joda Time。

# c# - 是否应该使用 Linq？

> ID：13814259
> 
> 赞同：-5
> 
> 时间：2012-12-11T05:37:10.797
> 
> 标签：c#, .net, linq, architecture, linq-to-entities

我正在设计我的项目架构。在我们的团队争论是否使用 Linq。

我在谷歌上浏览了 linq，我发现这个[链接](http://social.msdn.microsoft.com/Forums/en-NZ/linqtosql/thread/cd952b8e-4bc6-4be9-87d3-cec7fbe7a0d8)给出了 linq 的简短优点和缺点。

从我们项目的角度来看，有 3 个关键点。

1.  DBML 并发问题
2.  小数据集构建查询所需的时间比执行的时间长
3.  连接非常慢

我正在谈论 Linq to Entity。所有这些都是与 Linq 相关的问题，根据我的项目要求，这是至关重要的问题，因为我的项目很大。所以性能是非常重要的关键因素。

我们可以解决这些 linq 问题吗？如果是，如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T06:14:30.140

我阅读了该帖子中的一些回复，我必须同意和不同意其中的很多。我发现使用 linq 的最重要因素是开发时间的快速周转。SQL 查询中不再有拼写错误。不要浪费时间创建复杂的 SQL 查询。linq to entity 和 linq to sql 也有区别。你没有考虑到这一点。我建议你阅读它。提示：去 linq 到实体。

回答您的问题。

1.  我没有将并发问题与 linq（与实体）联系起来。这就是你实现它的方式。如果您需要（批量）更新的原始速度，您可以随时使用 ADO.NET。

2.  如果您仔细构建您的 linq 查询，您将只提取您需要的数据。如果您担心 linq 在构建查询时会影响性能，您可以创建已编译的 linq 查询。

3.  如果您创建一个包含所有关系的适当模型，则连接不会很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:24:55.640

与往常一样，这个问题的答案是视情况而定。这些天的方向绝对是[亲 ORM](http://en.wikipedia.org/wiki/List_of_object-relational_mapping_software)。虽然您肯定可以通过存储过程或直接 sql 命令对性能和原子记录更新进行更多控制，但以我个人的经验，这些好处被您花费在维护/更新模式和过程上的时间量所抵消。对于敏捷团队来说，这可能是一个很大的减速。使用强类型 ORM 工具（如 Entity Framework 或 N-Hibernate）的另一个主要好处是，您可以防止代码与数据库模式和存储过程严重偏离。这可能会导致一些非常大的问题。

一般来说，我会在使用 ORM 工具时出错，然后在必要时使用存储过程。

要回答您的具体问题，请使用实体框架作为具体示例：

1.  Entity Framework 4 有一些工具可以帮助处理[OptimisticConcurrencyExceptions](http://www.asp.net/web-forms/tutorials/continuing-with-ef/handling-concurrency-with-the-entity-framework-in-an-asp-net-web-application)。您可以尝试自己解决它或将异常抛出堆栈。
2.  这可能是一个微优化。一般来说，实体框架非常快。在遇到障碍之前，您更有可能处理 I/O 问题。
3.  如果您对数据库进行大量往返或延迟加载，则连接可能会很慢。Entity Framework 还支持预先[加载](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)，因此所有事情都可以在单个查询中完成。

最终，如果归根结底，您总是可以在需要时使用存储过程。当我有很多需要排他行锁的并发操作时，我会这样做。

我看到 EntityFramework 的一个缺点是有时使用 Postgres 会出现问题，但有非 Visual Studio 工具可以提供帮助。

# xslt - 如何通过 XSL 迭代兄弟节点？

> ID：13814261
> 
> 赞同：0
> 
> 时间：2012-12-11T05:37:36.330
> 
> 标签：xslt

我有一个看起来像的 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<siteMap>
    <siteMapNode>
        <siteMapNode url="/personal/" >
            <siteMapNode url="/personal/abc/" title="abc" >
                <siteMapNode url="/personal/abc/xyz" title="abc" />
                <siteMapNode url="/personal/abc/pqr" title="pqr" />
            </siteMapNode>
             <siteMapNode url="/personal/opq/" title="abc" >
                <siteMapNode url="/personal/opq/xyz" title="abc" />
                <siteMapNode url="/personal/opq/pqr" title="pqr" />
            </siteMapNode>
        </siteMapNode>
        <siteMapNode url="/reasonal/" >
            <siteMapNode url="/reasonal/abc/" title="abc" >
                <siteMapNode url="/reasonal/abc/xyz" title="abc" />
                <siteMapNode url="/reasonal/abc/pqr" title="pqr" />
            </siteMapNode>
             <siteMapNode url="/reasonal/opq/" title="abc" >
                <siteMapNode url="/reasonal/opq/xyz" title="abc" />
                <siteMapNode url="/reasonal/opq/pqr" title="pqr" />
            </siteMapNode>
        </siteMapNode>
    </siteMapNode>
</siteMap> 
```

我想做的是遍历整个 xml 以检查哪个节点与我的 url 匹配，然后遍历它的兄弟节点。例如，检查“/reasonal/opq/pqr”，然后在 li 中获取两者`<siteMapNode url="/reasonal/opq/xyz" title="abc" />`的`<siteMapNode url="/reasonal/opq/pqr" title="pqr" />`标题。

我以前从未写过 xsl。根据到目前为止的学习，我可以循环所有节点并检查 url 匹配，但不知道如何将它的兄弟姐妹包括它的节点放在 li 中。有人可以帮助一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:05:22.743

首先，您可能首先定义一个参数，以便可以将 url 传递给 XSLT

```
<xsl:param name="url" select="'/reasonal/opq/pqr'" /> 
```

在这种情况下，我定义了一个默认值 '/reasonal/opq/pqr' 应该没有参数传递。

然后，要选择具有匹配**url属性的****siteMapNode**元素，您将执行以下操作：

 **```
<xsl:apply-templates select="//siteMapNode[@url=$url]" /> 
```

有几种方法可以获取此匹配**siteMapNode**的兄弟姐妹。如果您想获取包括当前元素在内的所有兄弟姐妹，您可以简单地执行此操作

```
<xsl:apply-templates select="../siteMapNode" mode="list" /> 
```

（注意，mode="list" 是因为你最终会得到两个匹配**siteMapNode**的模板，所以你需要区分它们）。

如果您不想包含当前元素，则可以执行以下任一操作：

```
<xsl:apply-templates select="../siteMapNode[generate-id() != generate-id(current())]" 
     mode="list" />

<xsl:apply-templates select="preceding-sibling::siteMapNode
     |following-sibling::siteMapNode" 
     mode="list" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output indent="yes" omit-xml-declaration="yes"/>
   <xsl:param name="url" select="'/reasonal/opq/pqr'"/>

   <xsl:template match="/">
      <xsl:apply-templates select="//siteMapNode[@url=$url]"/>
   </xsl:template>

   <xsl:template match="siteMapNode">
      <ul>
         <xsl:apply-templates select="../siteMapNode" mode="list"/>
      </ul>
   </xsl:template>

   <xsl:template match="siteMapNode" mode="list">
      <li>
         <a href="{@url}">
            <xsl:value-of select="@title"/>
         </a>
      </li>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<ul>
   <li>
      <a href="/reasonal/opq/xyz">abc</a>
   </li>
   <li>
      <a href="/reasonal/opq/pqr">pqr</a>
    </li>
</ul> 
```**

# jenkins - Sonar 中的违规行为比 Jenkins 更多

> ID：13814262
> 
> 赞同：1
> 
> 时间：2012-12-11T05:37:39.687
> 
> 标签：jenkins, sonarqube

我们在 Jenkins 和 Sonar 中仅使用 FxCop 和 StyleCop 规则。但我们越来越不。声纳仪表板上的违规行为，然后在詹金斯。Jenkins 使用 318 条规则（FxCop 和 Stylecop 组合），而 Sonar 仅使用 130 条规则（FxCop 和 Stylecop 组合）。但我们仍然没有得到更多。Sonar Dashboard 上的违规行为，然后是 Jenkins 上的违规行为。谁能告诉我为什么会这样？

Jenkins 分别显示 FxCop 和 StyleCop 的结果，而 Sonar 合并 FxCop 和 StyleCop 的结果并显示它们。有谁知道我们如何分离结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:30:36.720

为什么您在 Sonar 中遇到更多违规行为可能有多种解释：

*   FxCop 和 StyleCop 规则没有在 Sonar 和 Jenkins 之间配置相同的参数（阈值，...）。这是您实际上应该做的第一件事。

*   也许您还在 Sonar 的质量配置文件中激活了宪兵规则？（如果您使用默认的“声纳方式”配置文件，就是这种情况）

*   您可能还有许多其他 Sonar 违规（不是来自 FxCop 等外部工具），从检测到的重复到设计问题。

为了回答您的最后一个问题，Sonar UI 目前无法根据生成它们的工具来区分违规行为。对于 Sonar 用户来说，最重要的是获取整个违规列表，无论生成它们的工具是什么。

# web-applications - 是否有任何网络技术可以让我创建类似的可视化？

> ID：13814265
> 
> 赞同：1
> 
> 时间：2012-12-11T05:38:15.413
> 
> 标签：web-applications, d3.js, visualization, gnuplot, data-visualization

我想创建一个时间线。下面附上图片： ![在此处输入图像描述](../Images/f3b717b394ee9580bc3c88eb0f199803.png)

显示我想要可视化的内容。我想要一个时间线，它以开始和停止时间作为输入事件。如果事件是一种类型，则线用一种颜色着色，如果它是另一个特定事件，则另一种颜色。

例如：

```
starttime  |  event
-----------------------
8AM        |   cold
11AM       |   hot
12:30PM    |   cold
1PM        |   hot
1:45PM     |   cold
4PM        |   hot 
```

如果这种可视化技术的确切名称是什么？我在哪里可以在网页上动态找到/创建一个？我简要地查看了 d3，但最初我没有看到任何允许在混合条形图之外进行这种可视化的东西。我也考虑过 gnu plot，但不确定如何在事件发生时将条形翻转并重复模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:45:49.383

好吧，如果你不关心 IE8，你总是可以使用 SVG 或画布。这些都有相当陡峭的学习曲线，但结果很难争论。

巧合的是，您可以使用 HTML、JavaScript 和 CSS 的 Web 三位一体来完成此操作。只需为每个数据段设置一个 div，为每个数据指定一个固定的或百分比，并使用 JavaScript 进行管理。再一次，你必须让你的手在这里“书呆子”，但这是可以做到的。但是，该实现有点超出了快速堆栈溢出答案的范围。

我还使用了一些 jQuery 图形插件，但我不确定它们是否适合您的特定用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:40:58.723

一个 HTML5 之前的解决方案是一堆并排放置的 div，带有渐变或图像（带有重复-x）背景。您的垂直线也可以是 div。简单，跨浏览器，可以在服务器上，但需要一些手动实现。

例如， [http://alignedleft.com/tutorials/d3/drawing-divs/](http://alignedleft.com/tutorials/d3/drawing-divs/)

或者可能是这样的：

[http://trickyscripter.com/examples/after/jsgraphics_e.htm](http://trickyscripter.com/examples/after/jsgraphics_e.htm)

# c++ - 没有类类型

> ID：13814269
> 
> 赞同：2
> 
> 时间：2012-12-11T05:38:29.950
> 
> 标签：c++, class

尝试使用以下方法遍历 C++ 类中的向量：

```
for(vector<Album>::iterator it = a.getAlbumList.begin(); it != a.getAlbumList.end(); it++) 
```

但它给了我错误：

> 错误：'a.AlbumCollection::getAlbumList' 没有类类型

这让我很沮丧，因为我不知道这意味着什么，我试图遵循其他建议但没有任何帮助。我只是一个初学者，所以如果有人可以简单地向我解释这一点，那将非常感谢。

这是课程：
.cpp：[http://pastebin.com/MSCcHjXb](http://pastebin.com/MSCcHjXb)
.h： http: [//pastebin.com/Xq4nqSan](http://pastebin.com/Xq4nqSan)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T05:40:51.500

您（显然）想要*调用*成员函数，因此您的`getAlbumList`代码应该是：

```
for(vector<Album>::iterator it = a.getAlbumList().begin(); 
                            it != a.getAlbumList().end(); 
                            it++) 
```

# javascript - Javascript按JSON对象中的值递增数组中的值

> ID：13814273
> 
> 赞同：0
> 
> 时间：2012-12-11T05:38:40.983
> 
> 标签：javascript, jquery, arrays

我有一个 JSON 对象，其中包含一组键：值。我想首先检查该键是否与数组值匹配，然后是否将值添加到该数组中的相同缓冲区数组中。

这是我的代码，希望能说明我的意思：

```
ws.onmessage = function(evt){
 cities = JSON.parse(evt.data);
            for(var i=0; i<buffer.length; i++) {                
                if(buffer[i][0] == cities.clusters) {
                    buffer[i][1][0]++;
                }
            console.log(buffer);
            }
       }; 
```

这是我的缓冲区数组：

```
var buffer = [['1',[0]],['2',[0]],['3',[0]],['4',[0]]]; 
```

这是从服务器收到的 JSON 输出：

```
{"clusters": {"London": 4, "Atlanta": 5}, "time": "2012-11-22 19:56:25"} 
```

所以我想要的是这次迭代的缓冲区数组变成：

```
 var buffer = [['London',[4]],['New York',[0]],['Atlanta',[5]],['LA',[0]]]; 
```

在每次迭代中，这些数量都会被添加和更新。

我不知道该怎么做，我不认为 for 循环能够做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:49:38.560

我要假装你的缓冲区是这样的：

```
var buffer = [['London',[0]],['New York',[0]],['Atlanta',[0]],['LA',[0]]]; 
```

然后循环变成这样：

```
for (var i = 0, item; item = buffer[i]; ++i) {
    buffer[i][1][0] = cities.clusters[item[0]] || 0;
} 
```

该表达式`cities.clusters[item[0]] || 0`使用相应城市的值，或者`0`如果未定义。

[**演示**](http://jsbin.com/uyisab/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:53:10.087

假设所有评论和编辑，这应该会有所帮助：（[小提琴](http://jsfiddle.net/6Bzy9/)）

```
var data = {} ; // From Webservice

var buffer = [['London',[4]],['New York',[0]],['Atlanta',[5]],['LA',[0]]];

var clusters = data.clusters;

for (var i in clusters) for(var j in buffer) 

     if(buffer[j][i])  buffer[j][i] = cluster[i]; 
```

# haskell - Snap：正确使用 PreRun 钩子

> ID：13814274
> 
> 赞同：0
> 
> 时间：2012-12-11T05:38:45.910
> 
> 标签：haskell, haskell-snap-framework

我无法弄清楚如何在任何模板加载之前运行一个函数。例如：我有一个名为“authenticate”的函数，它返回一个 Maybe 值。我想在加载任何模板之前运行它，然后有条件地重定向。我相信 PreRun 和 OnLoad 钩子应该这样做，但我不知道如何使用它们。

有人可以展示这些钩子的正确用法来实现上述示例吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:52:38.100

PreRun 钩子在 Heist 0.10 中消失了。如果您尝试调用的内容涉及模板处理，那么您可以将其作为编译拼接或加载时拼接。如果它涉及 Web 服务器处理，则在渲染模板之前在 Handler 或 Snap monad 中执行。

# google-apps-script - 使用谷歌应用脚 本将图像文件作为 blob 存储在数据库中

> ID：13814279
> 
> 赞同：0
> 
> 时间：2012-12-11T05:39:08.533
> 
> 标签：google-apps-script, google-cloud-sql

我正在使用谷歌云 SQL 作为数据库....我正在通过 UrlFetch 获取图像内容，然后将 FetchResponse 转换为 blob....但是当我尝试从数据库中获取 blob 数据并尝试将其作为图像上传时它不是在职的....

```
Code : 
 var base = 'https://www.google.com/m8/feeds/'; 
 var fetchArgs = googleOAuth_('contacts', base);
 fetchArgs.method='GET'
 var photoURL==// url for image
 var image=UrlFetchApp.fetch(photoURL,fetchArgs)
 var imageBlob=image.getBlob() 
```

imageBlob 将存储在数据库中，其中 PHOTO 字段在数据库中具有 LONgBLOB 类型

现在我正在尝试获取照片

```
 var conn  = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://"+instance_name+"/"+database_name);
  var stmt=conn.createStatement()
  var query="select PHOTO from user_info"
  var rs=stmt.executeQuery(query)
  rs.next()
  var image=rs.getBlob(1) 
```

现在将此 blob 用于 html 文件，如下所示：

```
<html>
  <body>
    <center>
    <p>This is image</p>
    <img src="data:image/jpeg;base64,"+Base64.encode(image) width="100" height="100"/ >
      <p> This is image</p>
    </center>
  </body>
</html> 
```

它没有显示任何图像，它只是显示图像区域..如果我做错了什么，请告诉我..

实际代码：网络脚本：

```
function doGet() {
 return HtmlService.createTemplateFromFile("image").evaluate();

}

function myFunction(){
  var conn = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://"+instance_name+"/"+database_name);
  var stmt=conn.createStatement()
  var query="select PHOTO from user_info"
  var rs=stmt.executeQuery(query)
  rs.next()
  var image=rs.getBlob(1)
  stmt.close()
  conn.close()
  return image
} 
```

图像.html

```
<html>
  <body>
    <center>
    <p>This is image</p>
    <img src="data:image/jpeg;base64,"+Base64.encode(<?= myFunction()?>) width="100" height="100"/ >
      <p> This is image</p>
    </center>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:25:00.223

HTML 文件有一些不一致的引用，您是否将其用作[模板](https://developers.google.com/apps-script/html_service#PullingData)？此外，正确的 base64 编码函数是[base64Encode](https://developers.google.com/apps-script/class_utilities#base64Encode)。也许这也是一个问题？

`<img src="data:image/jpeg;base64,<!=Utilities.base64Encode(image)?>" width="100" height="100"/ >`

确保您将图像参数传递给模板以进行评估。

完整版应该看起来像 -

```
<html>
  <body>
    <center>
    <p>This is image</p>
    <img src="data:image/jpeg;base64,<!=Utilities.base64Encode(myFunction()?>)" width="100" height="100"/ >
      <p> This is image</p>
    </center>
  </body>
</html> 
```

# python - 将可调用测试转换为集合成员资格测试

> ID：13814281
> 
> 赞同：0
> 
> 时间：2012-12-11T05:39:29.423
> 
> 标签：python, function, collections, coding-style, argparse

什么是最优雅和最 Pythonic 的测试方式，例如：

```
def is_even(n):
  return n % 2 == 0 
```

进入逻辑等效（但语法不同）的测试，例如：

```
if n in even_numbers:
  # assert is_even(n)
  # ... 
```

我可以想到几种创建对象的方法`even_numbers`，但我很想知道是否有我可能忽略的好方法。

* * *

[*注意：*我知道这可能听起来像一个 XY 问题，所以我的用例是关于`choices`kwarg to `argparse.ArgumentParser.add_argument`，以及使用它是否会更好，或者替代可调用的`type`kwarg。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:02:00.210

我会`even_numbers`变成一个容器类型：

```
class EvenNumbers(object):

    # Add other container methods as needed

    def __contains__(self, value):
        return value % 2 == 0

even_numbers = EvenNumbers() 
```

然后，

```
>>> 3 in even_numbers
False
>>> 4 in even_numbers
True 
```

# angularjs - AngularJS 只过滤某些对象

> ID：13814283
> 
> 赞同：17
> 
> 时间：2012-12-11T05:39:30.543
> 
> 标签：angularjs, javascript-framework

我有如下定义的用户对象。

```
$scope.user = [{id: 1, friends:
    [
        {name: 'John', age: 21, sex: 'M'},
        {name: 'Brad', age: 32, sex: 'M'}
    ]
}] 
```

我有以下代码：

```
<input type="text" ng-model="searchText">
<div ng-repeat="friend in user.friends | filter:searchText">
  {{friend.name}} {{friend.age}}
</div> 
```

每当我在这里搜索时，我都会得到姓名、年龄和性别的结果。但我只想搜索姓名和年龄，我不想搜索性别。谁能帮助我如何实现这一目标？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-11T06:34:43.547

如果您可以有两个搜索字段，则可以将对象作为第二个参数传递来实现此目的

```
<div ng-repeat="friend in user.friends | filter:{name:searchNameText, age:searchAgeText}"> 
```

否则，您需要编写自定义过滤器以对两者使用相同的字段，或者将自定义过滤器函数作为文档中描述的第三个参数传递。

[http://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.filter:filter)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-11T13:38:13.890

我不确定这是否是你所追求的。如果你想让一个输入字段匹配多个属性，你需要一个过滤函数来传递给`filter`.

```
$scope.user = {id: 1, friends: [{name: 'John', age: 21, sex: 'M'}, {name: 'Brad', age: 32, sex: 'M'}, {name: 'May', age: 64, sex: 'F'}]};

$scope.searchFilter = function (obj) {
    var re = new RegExp($scope.searchText, 'i');
    return !$scope.searchText || re.test(obj.name) || re.test(obj.age.toString());
}; 
```

这是一个小提琴示例 [http://jsfiddle.net/fredrik/26fZb/1/](http://jsfiddle.net/fredrik/26fZb/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T14:49:53.950

这不是完成您想要的最干净的方法，但它是使用标准 ng-repeat 过滤器完成 OR 过滤器的最简单方法。

**控制器：**

```
$scope.user = [{id: 1, friends:
    [
        {name: 'John', age: 21, sex: 'M'},
        {name: 'Brad', age: 32, sex: 'M'}
    ]
}]

$scope.buildSearchData = buildSearchData;

function buildSearchData(friend){
    return friend.name + ' ' + friend.age;
} 
```

**HTML**

```
<input type="text" ng-model="searchText">
<div ng-repeat="friend in user.friends | filter:{searchData:searchText}"
     ng-init="friend.searchData = buildSearchData(friend)">
  {{friend.name}} {{friend.age}}
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T20:51:02.190

“user.friends 中的朋友 | json | 过滤器：{something:somethingtext}”

[http://docs-angularjs-org-dev.appspot.com/api/ng.filter:json](http://docs-angularjs-org-dev.appspot.com/api/ng.filter:json)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-20T18:13:55.490

另一种可能的方法是创建一个聚合字段，该字段包含您要过滤的所有字段的值，并且仅对其进行过滤。

# c# - 在 RichTextBox 中粘贴图像

> ID：13814287
> 
> 赞同：5
> 
> 时间：2012-12-11T05:39:55.323
> 
> 标签：c#, winforms, richtextbox

我有一个`RichTextBox`，当我尝试在其中粘贴任何图像时，我会粘贴一个图标而不是图像本身。我怎样才能将图像粘贴在其中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:42:23.030

我前段时间做过。您必须在richtextbox 中放置一个Key Down 事件。试试这个：

```
 private void RtbDocKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Modifiers == Keys.Control && e.KeyCode == Keys.V)
        {
            DataFormats.Format df = DataFormats.GetFormat(DataFormats.Bitmap);
            StringCollection strcollect = Clipboard.GetFileDropList();

            Image image= Image.FromFile(strcollect[0]);
            Clipboard.Clear();
            Clipboard.SetImage(image);
            if (Clipboard.ContainsImage())
            {
                rtbBody.Paste(df);
                e.Handled = true;
                Clipboard.Clear();
            }
        } 
```

希望这可以帮助。

# scala - 如何使用 Scala-Macros 获取构造函数参数名称

> ID：13814288
> 
> 赞同：5
> 
> 时间：2012-12-11T05:39:55.040
> 
> 标签：scala, reflection, constructor, macros, scala-macros

有没有办法使用 scala-macros 获取给定构造函数的参数名称？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T12:59:10.283

请注意，`:power`Paul Butcher 回答中的方法使您可以访问内部 API，如果您尝试在宏中执行此操作（或在 REPL 之外的运行时反射中，就此而言），这可能不是必需或不需要的。

因此，例如调用公共反射 API 中提供`isConstructor`的普通旧文件是行不通的——你首先需要确保你有一个. 与. 您当然可以在非 REPL 代码中转换为内部 API，但这是危险且不必要的。以下是更好的解决方案：`Symbol``members``MethodSymbol``tpe`

```
import scala.reflect.runtime.universe._

class Foo(name: String, i: Int) { def this(name: String) = this(name, 0) }

typeOf[Foo].declaration(nme.CONSTRUCTOR).asTerm.alternatives.collect {
  case m: MethodSymbol => m.paramss.map(_.map(_.name))
} 
```

要不就：

```
typeOf[Foo].declarations.collect {
  case m: MethodSymbol if m.isConstructor => m.paramss.map(_.map(_.name))
} 
```

这两个都将为您提供以下信息：

```
List(List(List(name, i)), List(List(name))) 
```

如预期的。我在这里使用了运行时反射来简化示例，但这与`Universe`您从`Context`宏中获得的方式完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:10:54.777

我希望，这份 REPL 成绩单应该能让你继续前进：

```
Welcome to Scala version 2.10.0-RC5 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_09).
Type in expressions to have them evaluated.
Type :help for more information.

scala> :power
** Power User mode enabled - BEEP WHIR GYVE **
** :phase has been set to 'typer'.          **
** scala.tools.nsc._ has been imported      **
** global._, definitions._ also imported    **
** Try  :help, :vals, power.<tab>           **

scala> class Foo(x: Int, y: Float)
defined class Foo

scala> (typeOf[Foo].members find (_.isConstructor)).get.tpe.params map (_.name)
res1: List[$r.intp.global.Symbol#NameType] = List(x, y) 
```

# mysql - 在存储过程中更新和插入操作

> ID：13814291
> 
> 赞同：0
> 
> 时间：2012-12-11T05:40:05.790
> 
> 标签：mysql, stored-procedures

你能告诉我有什么问题吗？我想要一个可以执行更新和插入操作的存储过程。

```
CREATE PROCEDURE `save_user`(IN `sp_aliasName` VARCHAR(100),IN `sp_password` VARCHAR(100), IN `sp_sex` VARCHAR(100), IN `sp_age` INT(11), IN `sp_userGroup` VARCHAR(100),OUT `sp_number_of_user` INT)    
BEGIN
DECLARE temp INT;
SELECT COUNT(user_id) INTO sp_number_of_user  FROM user WHERE aliasName = sp_aliasname;
temp := sp_number_of_user;
IF temp > 0
THEN
UPDATE user SET aliasName=sp_aliasName,password=sp_password,sex=sp_sex,age=sp_age,userGroup=sp_userGroup 
WHERE aliasName = sp_aliasname ;
ELSE
INSERT INTO user (aliasName,password,sex,age,userGroup)
values (sp_aliasName,sp_password,sp_sex,sp_age,sp_userGroup);
END IF;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:06:52.817

我认为你的程序应该是这样的 -

```
CREATE PROCEDURE `save_user`(IN `sp_aliasName` VARCHAR(100),IN `sp_password` VARCHAR(100), IN `sp_sex` VARCHAR(100), IN `sp_age` INT(11), IN `sp_userGroup` VARCHAR(100),OUT `sp_number_of_user` INT)    
BEGIN
  DECLARE temp INT;
  SELECT count(user_id) INTO sp_number_of_user FROM user WHERE aliasName = sp_aliasname;
  SET temp := sp_number_of_user;
  IF temp > 0 THEN
    UPDATE user SET aliasName = sp_aliasName, password = sp_password, sex = sp_sex, age = sp_age, userGroup = sp_userGroup
    WHERE aliasName = sp_aliasname;
  ELSE
    INSERT INTO user (aliasName, password, sex, age, userGroup) VALUES (sp_aliasName, sp_password, sp_sex, sp_age, sp_userGroup);
  END IF;
END 
```

我补充说：

*   INT 类型转 OUT 参数
*   UPDATE 语句的 WHERE 子句（检查此条件）

另外，看看[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)命令，它可能会满足您的需求。

# objective-c - 分屏应用 iPad

> ID：13814295
> 
> 赞同：-4
> 
> 时间：2012-12-11T05:40:24.930
> 
> 标签：objective-c, ios, ipad

> 我想创建一个 iPad 应用程序，其中单个屏幕上有四个窗口。这些窗口应该同时更新（多任务）。我怎么能做到这一点任何建议/帮助都会很明显

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:02:15.137

我将假设您的意思是视图而不是窗口。

首先，确保您没有使界面过于复杂。它应该是直观的，四个不同的同时视图听起来很多（当然，这取决于）。

其次，创建一个 UIViewController。然后，创建四个 UIView 子类，包含您需要的所有属性和对象，将它们布置为子视图，并将逻辑构建到 UIViewController 中，UIViewController 可以作为它们的委托。

我希望这可以帮助您朝着正确的方向开始，但正如其他人所说，这是一个广泛的问题，并且有许多适用的方法。

# mysql - 当mysql中的日期时间列到达当前时间时，如何自动执行程序？

> ID：13814298
> 
> 赞同：0
> 
> 时间：2012-12-11T05:40:27.520
> 
> 标签：mysql, datetime

我想在mysql中设置的日期时间列到达当前时间时执行程序。有没有一种有用的方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:42:52.097

使用 cronjob 在所需时间运行程序。用 php 或任何语言编写程序，处理与数据库的交互。然后使该程序文件以特定时间间隔作为 cronjob 运行

# asp.net-mvc-3 - 我如何在 asp.net mvc 中使用子操作

> ID：13814311
> 
> 赞同：0
> 
> 时间：2012-12-11T05:41:35.877
> 
> 标签：asp.net-mvc-3, kendo-ui

我有一个 kendoUI TabStrip 小部件控件。在其中，我有两个选项卡：产品和支持。

这两个选项卡是两个不同的视图。我已经像这样定义了标签条：

```
<div id="tabs">
    <div>
        <iframe src="../Products/Index"></iframe>
    </div>
    <div>
         <iframe src="../Support/Index"></iframe>
    </div>                      
</div> 
```

在脚本中：

```
$("#tabs").kendoTabstrip({}); 
```

然后带有各自视图页面的选项卡即将到来。但是产品和支持页面不会直接打开。我的意思是，当我在 url 栏中输入时`localhost:4567/Product/Index`，它不会打开页面，只有在我们选择选项卡时才会打开。

我已经为两个控制器定义了这样的动作：

```
[ChildActionOnly]
public ActionResult Index()
{
     return View();
} 
```

然后当我运行主页时，它会得到一个异常，它只会被子操作调用。当我选择选项卡时，它应该成为子操作。我怎样才能纠正这个问题？我没有包括：

```
@Html.action("Index","Products") 
```

如果我需要包含它，我应该在哪里添加它？希望你能理解我的问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:02:19.613

ChildActionOnly 属性确保动作方法只能作为视图中的子方法调用。动作方法不需要具有此属性才能用作子动作，但我们倾向于使用此属性来防止动作方法因用户请求而被调用。定义了动作方法后，我们需要创建在调用动作时将呈现的内容。子动作通常与部分视图相关联，尽管这不是强制性的

所以与其

```
 @Html.action("Index","Products"). 
```

你应该试试

```
@Html.Partial("Products"). 
```

# java - 在 Java 中保持变量的值不变

> ID：13814314
> 
> 赞同：0
> 
> 时间：2012-12-11T05:42:03.153
> 
> 标签：java, minecraft, bukkit

这是我的简单脚本：

```
public void cast(Player caster) {
    Location loc = caster.getTargetBlock(null, 512).getLocation();

    for (int c = 0; c < 2; c++) {
        for (int b = 0; b < 2; b++) {
            for (int a = 0; a < 1; a++) {
                caster.sendMessage("" + loc);
                Block ice = caster.getWorld().getBlockAt(loc.add(a, b, c));
                ice.setTypeId(79);
            }
        }
    }
} 
```

我试图让它`loc`保持静止不变。它在整个 for 循环中一直在变化，我希望防止这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:49:42.150

Loc 很可能有一个内部状态，它每次都在递增而不是重置

```
public void cast(Player caster){
Location loc = caster.getTargetBlock(null, 512).getLocation();

int initalC = 0;
int initalB = 0;
int initalA = 0;
Location staticLoc;
for (int c = initalC; c < 2; c++)
{
    for (int b = initalB; b < 2; b++)
    {
        for (int a = initalA; a < 1; a++)
        {
            if (a == initalA && b == initalB && c == initalC) {
                 staticLoc = caster.getTargetBlock(null, 512).getLocation().add(a, b, c);
            }

            loc = staticLoc;
            caster.sendMessage("" + loc);
            Block ice = caster.getWorld().getBlockAt(staticLoc.add(a, b, c));
            ice.setTypeId(79);
        }
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:19:17.553

找到答案：

```
public void cast(Player caster){
    Location loc = caster.getTargetBlock(null, 512).getLocation();
    for (int c = -3; c < 3; c++)
        for (int b = -1; b < 5; b++)
            for (int a = -3; a < 3; a++) {
                Block ice = caster.getWorld().getBlockAt(loc.add(a, b, c));
                ice.setTypeId(79);
                loc = loc.subtract(a, b, c);
            }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T19:14:56.067

我知道这个问题已经得到解答，但我希望提出一种更有效的方法。从位置中添加和减去是非常低效的，尤其是在嵌套循环中执行此操作时。

Location 对象有一个`clone()`方法，它返回一个相同的 Location 但*不是*对原始位置的引用。所以真的，你需要做的就是：

```
public void cast(Player caster) {
    Location loc = caster.getTargetBlock(null, 512).getLocation();

    for (int c = 0; c < 2; c++) {
        for (int b = 0; b < 2; b++) {
            for (int a = 0; a < 1; a++) {
                caster.sendMessage("" + loc);
                caster.getWorld().getBlockAt(loc.clone().add(a, b, c)).setTypeId(79);
           }
        }
    }
} 
```

如果性能是一个问题，我什至会考虑将 getWorld() 缓存在 for 循环之外的局部变量中。

# javascript - 使用 jQuery DatePicker 进行 LiveValidation

> ID：13814315
> 
> 赞同：1
> 
> 时间：2012-12-11T05:42:06.583
> 
> 标签：javascript, validation, livevalidation

我目前在使用 jQuery UI 日期选择器的字段上使用[LiveValidation](http://livevalidation.com)库。

```
var expiry = new LiveValidation('expiry_date');
expiry.add( Validate.Presence, { failureMessage: "Date Required." } ); 
```

不幸的是，选择日期后，`LiveValidation`仍然认为该字段为空并显示验证错误。

如果我在该字段内单击并单击离开，则该字段有效。

关于让 LiveValidation 检测日期字段中实际存在内容的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-17T12:19:50.940

在字段上定义 js Datepicker 时，提一下
`onClose: function () { this.focus(); }`，它会自动被`LiveValidation`.

```
$('#expiry_date').datepicker({
    dateFormat: 'dd/mm/yy',                 
    onClose: function () { this.focus(); }
}); 
```

# java - 找不到元素“bean”的声明

> ID：13814321
> 
> 赞同：29
> 
> 时间：2012-12-11T05:42:40.967
> 
> 标签：java, spring, activemq, message-queue

我有弹簧罐，`spring-3.2.0.RC1.jar`并试图从[这里](http://icodingclub.blogspot.com/2011/07/introduction-of-spring-jms-with.html)`Apache ActiveMQ` `helloWorld`给出的教程中实现程序。xml配置文件为：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns:jms="http://www.springframework.org/schema/jms"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.springframework.org/schema/beans"
    xsi:schemalocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/jms 
    http://www.springframework.org/schema/jms/spring-jms.xsd">

    <bean class="org.apache.activemq.command.ActiveMQQueue" id="destination">
        <constructor-arg value="TEST.Q1"></constructor-arg>
    </bean>

    <bean class="org.apache.activemq.ActiveMQConnectionFactory" id="connectionFactory"
        p:brokerurl="tcp://localhost:8161"></bean>

    <bean class="com.jms.helloworld.listner.MessageListenerImpl" id="simpleMessageListener">
        <bean
            class="org.springframework.jms.listener.DefaultMessageListenerContainer"
            id="jmsContainer">
            <property name="connectionFactory" ref="connectionFactory"></property>
            <property name="destination" ref="destination"></property>
            <property name="messageListener" ref="simpleMessageListener"></property>
        </bean>
    </bean>
</beans> 
```

**主要的：**

```
public static void main(String[] args) throws JMSException {
        System.out.println("LISTNER STARTED");
        ApplicationContext context =  new FileSystemXmlApplicationContext("src/com/jms/helloworld/config/JMSConfig.xml");
    }

**Exception on console**

LISTNER STARTED
log4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Exception in thread "main" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 10 in XML document from file [/home/neal/workspace/ActiveMQListener/src/com/jms/helloworld/config/JMSConfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element 'beans'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:140)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:84)
    at com.jms.helloworld.test.TestJMSListner.main(TestJMSListner.java:15)
Caused by: org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 61; cvc-elt.1: Cannot find the declaration of element 'beans'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:387)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:321)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1920)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:709)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:602)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3080)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:899)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:239)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:288)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 14 more 
```

我不知道豆子出了什么问题。到目前为止，其他问题中的任何建议都无济于事。有什么帮助吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-11T06:12:37.520

试试这个，假设你在 Spring 3.1：

```
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd"> 
```

*用您使用的主要*Spring 版本替换`3.1`最后一行。含义：即使有 Spring 版本，也没有XSD 。*`3.1.1``3.1.1`*

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-06T07:06:27.983

在解决我的问题的另一个线程上找到它......正在使用互联网连接较少的网络。

在这种情况下，从 url 复制 xsd 文件并将其放在 beans.xml 文件旁边并更改 xsi:schemaLocation 如下：

```
 <beans xmlns="http://www.springframework.org/schema/beans" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans 
spring-beans-3.1.xsd"> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-03T07:32:56.917

添加此代码..它帮助了我

```
<?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns:context="http://www.springframework.org/schema/context" 
         xmlns:aop="http://www.springframework.org/schema/aop" 
         xsi:schemaLocation="
         http://www.springframework.org/schema/beans 
           classpath:/org/springframework/beans/factory/xml/spring-beans-3.0.xsd 
         http://www.springframework.org/schema/context 
         classpath:/org/springframework/context/config/spring-context-3.0.xsd
        http://www.springframework.org/schema/aop 
        classpath:/org/springframework/aop/config/spring-aop-3.0.xsd
         ">      
     </beans> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-16T21:52:51.943

此错误找不到元素“bean”的声明，但出于完全不同的原因

原来我的互联网连接不是很可靠，所以我决定先检查这个网址

[http://www.springframework.org/schema/context/spring-context-4.0.xsd](http://www.springframework.org/schema/context/spring-context-4.0.xsd)

一旦我看到 xsd 成功打开，我清理了 Eclipse(IDE) 项目并且错误消失了

如果您尝试此步骤但仍然收到错误，请检查 Spring 版本，使其与另一个答案中提到的匹配

```
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-**[MAYOR.MINOR]**.xsd"> 
```

将最后一行的 [MAYOR.MINOR] 替换为您正在使用的任何 major.minor Spring 版本

对于 Spring 4.0 [http://www.springframework.org/schema/context/spring-context-4.0.xsd](http://www.springframework.org/schema/context/spring-context-4.0.xsd)

对于 Sprint 3.1 [http://www.springframework.org/schema/beans](http://www.springframework.org/schema/beans) spring-beans-3.1.xsd

所有的上下文都在这里 [http://www.springframework.org/schema/context/](http://www.springframework.org/schema/context/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-15T16:35:21.027

我遇到了这个问题，根本原因是在 xsi:schemaLocation 中的 www.springframework.org/schema/beans 引用之后出现空白（如下图所示），即

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="
http://www.springframework.org/schema/beans....
http://www.springframework.org/schema/beans/spring-beans-4.2.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-4.2.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-27T09:20:50.857

尝试使用这个 - Spring 4.0。在职的

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context" 
       xsi:schemaLocation="http://www.springframework.org/schema/beans                                               http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context 
       http://www.springframework.org/schema/context/spring-context.xsd"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-02T06:52:28.157

确保构建路径中所有 spring jar 文件的版本与 xml 文件中提到的版本相同。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-05T13:30:46.593

对我来说，问题是我的文件编码...我使用 powershell 编写 xml 文件，这不是 UTF-8 ...看来 spring 需要 UTF8，因为一旦我更改了编码（使用记事本++），它就会再次工作没有任何错误

现在我在我的powershellscript中使用以下行以UTF-8输出xml文件： [IO.File]::WriteAllLines($fname_dataloader_xml_config_file, $dataloader_configfile)

而不是使用重定向运算符 > 来创建我的文件

注意：我没有在我的 beans 标记中放置任何 xml 参数，它可以工作

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-01T12:56:20.180

对我来说，问题是 spring 无法下载[http://www.springframework.org/schema/beans/spring-beans.xsd](http://www.springframework.org/schema/beans/spring-beans.xsd)或[http://www.springframework.org/schema/context/spring-context。 xsd](http://www.springframework.org/schema/context/spring-context.xsd)

但是我能够从我的浏览器访问那些，因为它正在使用我的机器代理。所以我只是将两个 xsd 的内容复制到名为 spring-beans.xsd 和 spring-context.xsd 的文件中，并用文件名替换了 http url，它对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-28T14:38:46.360

我遇到了和你一样的情况。我的解决方案如下：

1.  重新配置文件：Spring 配置文件（不使用 XSD 命名空间声明）。 [![2.](../Images/7999030befb03c3e0026dc3a15bbcb68.png)](https://i.stack.imgur.com/UYVMz.png) -> 主要目的是没有标签名称（bean，...）
2.  使用您要使用的类创建标签。 [![在此处输入图像描述](../Images/70d0cd0e45c0ae927994e20f87b70729.png)](https://i.stack.imgur.com/B73HU.png) ---快乐编码---

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-25T16:17:37.093

尝试使用这个：

```
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd"> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-27T10:30:10.960

我使用以下代码解决了这个问题。

```
<? xml version="1.0" encoding="UTF-8 ?>

    <beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:jee="http://www.springframework.org/schema/jee" 
    xmlns:context="http://www.springframework.org/schema/context" 
    xsi:schemaLocation=" http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/jee 
    http://www.springframework.org/schema/jee/spring-jee-3.0.xsd 
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 

</Beans> 
```

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2016-10-12T15:00:54.990

使用它来解决您的问题：

```
<context:annotation-config/> 
```*

# python - 如何在scrapy中使用Itempipeline将项目保存在数据库中

> ID：13814329
> 
> 赞同：1
> 
> 时间：2012-12-11T05:43:26.083
> 
> 标签：python, django

`parse_items`我的蜘蛛中有这段代码

```
 def parse_items(self, response):

        hxs = HtmlXPathSelector(response)
        sites = hxs.select("//li[@class='mod-result-entry  ']")
        items = []

        for site in sites[:2]:
            item = MyItem()
            item['title'] = myfilter(site.select('dl/a').select("string()").extract())
            item['company'] = myfilter(site.select('dl/h2/em').select("string()").extract())
            items.append(item)
        return items 
```

现在我想使用 Django 模型将项目保存在数据库中。一种工作正常的方法，我像这样简单地使用

```
item = MYapp.MyDjangoItem()
item.title = myfilter(site.select('dl/a').select("string()").extract())
item.save() 
```

现在这工作正常

现在我想知道这种方法可以很好地保存在数据库中。

我的意思是为什么我们需要在 scrapy 中描述的 itempipeline 东西。这有什么好处吗。

开火，例如，这是我的管道

```
class MyPipeline(object):

    def __init__(self):
        self.ids_seen = set()

    def process_item(self, item, spider):
       Myitem = Myapp.DjamgoItem()
       Myitem.title = item['title']
       MyItem.save() 
```

这样好吗

另外，我的代码将如何调用此管道。我对此感到困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:51:13.873

管道可用于清理常见值。如果您只有一种类型的对象，这将特别有用。通过管道保存您的 django 模型实例很好，scrapy 文档中的示例通过将 JsonWriter 添加到管道来执行相同的操作。（这在现实生活中是不必要的，因为有内置功能）

*把想法大声说出来：*

但是，当您创建多个对象时，您可能希望区分您的处理。因为蜘蛛作为参数传递给 process_item 函数，这很容易，但是（imo），这往往会变得相当冗长：

```
class MyPipeline(object):
    def process_item(self, item, spider):
       if spider == 'A':
           if item.somefield:
               #... etc
       elif spider == 'B':
           #... etc 
```

就我个人而言，我喜欢 Django 中表单清理背后的想法（通过以“clean_”开头的字段名称检查现有函数）。为了在 scrapy 中实现类似的功能，我扩展了 Item 类：

```
class ExtendedItem(Item):
    def _process(self):
        [getattr(self, func)() for func in dir(self) if func.split('_')[-1] in self.fields and callable(getattr(self, func))] 
```

因此，现在您可以执行以下操作：

```
class Book(ExtendedItem):
    title = Field()

    def _process_title(self):
        title = self['title'].lower()
        self.update(title=title) 
```

在这种情况下，您可以使用管道调用 item._process() 。

*免责声明*

[不久前我在github.com](https://github.com/scrapy/scrapy/issues/197)上提出了这个想法。可能有更好的实现（代码方面）。

# python - 用字典替换字符串，用标点符号替换

> ID：13814330
> 
> 赞同：2
> 
> 时间：2012-12-11T05:43:29.203
> 
> 标签：python, dictionary, replace, punctuation

我正在尝试编写一个函数 process(s,d) 来使用字典将字符串中的缩写替换为它们的完整含义。其中 s 是字符串输入，d 是字典。例如：

```
>>>d = {'ASAP':'as soon as possible'}
>>>s = "I will do this ASAP.  Regards, X"
>>>process(s,d)
>>>"I will do this as soon as possible.  Regards, X" 
```

我尝试使用 split 函数来分隔字符串并将每个部分与字典进行比较。

```
def process(s):
    return ''.join(d[ch] if ch in d else ch for ch in s) 
```

但是，它会返回相同的字符串。我怀疑代码不起作用，因为原始字符串中 ASAP 后面的句号。如果是这样，我如何忽略标点符号并尽快更换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:32:39.920

这是一种使用单个正则表达式的方法：

```
In [24]: d = {'ASAP':'as soon as possible', 'AFAIK': 'as far as I know'}

In [25]: s = 'I will do this ASAP, AFAIK.  Regards, X'

In [26]: re.sub(r'\b' + '|'.join(d.keys()) + r'\b', lambda m: d[m.group(0)], s)
Out[26]: 'I will do this as soon as possible, as far as I know.  Regards, X' 
```

与基于 的版本不同`str.replace()`，这会观察单词边界，因此不会替换碰巧出现在其他单词中间的缩写（例如，“fetch”中的“etc”）。

此外，与迄今为止提出的大多数（全部？）其他解决方案不同，它只迭代输入字符串一次，而不管字典中有多少搜索词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:49:16.457

你可以这样做：

```
def process(s,d):
    for key in d:
        s = s.replace(key,d[key])
    return s 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T06:43:02.393

这是一个可行的解决方案：使用[re.split()](http://docs.python.org/2/library/re.html#re.split)，并按单词边界拆分（保留间隙字符）：

```
''.join( d.get( word, word ) for word in re.split( '(\W+)', s ) ) 
```

此代码与 Vaughn 或 Sheena 的答案的一个显着区别是，此代码利用了字典的 O(1) 查找时间，而他们的解决方案则查看字典中的每个键。这意味着当`s`时间很短且`d`很大时，他们的代码将需要更长的时间才能运行。此外，部分单词仍将在其解决方案中被替换：如果`d = { "lol": "laugh out loud" }`和`s="lollipop"`他们的解决方案将错误地产生`"laugh out loudlipop"`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T05:48:33.337

使用正则表达式：

```
re.sub(pattern,replacement,s) 
```

在您的应用程序中：

```
ret = s
for key in d:
    ret = re.sub(r'\b'+key+r'\b',d[key],ret)
return ret 
```

\b 匹配单词的开头或结尾。感谢保罗的评论

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T05:48:28.983

不要按空格分割，而是使用：

```
split("\W") 
```

它将被任何不是单词一部分的字符分割。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T16:14:36.277

```
 python 3.2

    [s.replace(i,v) for i,v in d.items()] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T06:11:47.360

这也是字符串替换（+1 到@VaughnCato）。这使用该`reduce`函数遍历您的字典，用值替换字符串中键的任何实例。`s`在这种情况下是累加器，它在每次迭代时都会减少（即馈送到替换函数），保持所有过去的替换（同样，根据上面@PaulMcGuire 的观点，这会替换以最长开始并以最短结束的键）。

```
In [1]: d = {'ASAP':'as soon as possible', 'AFAIK': 'as far as I know'}

In [2]: s = 'I will do this ASAP, AFAIK.  Regards, X'

In [3]: reduce(lambda x, y: x.replace(y, d[y]), sorted(d, key=lambda i: len(i), reverse=True), s)
Out[3]: 'I will do this as soon as possible, as far as I know.  Regards, X' 
```

至于为什么你的函数没有返回你所期望的——当你迭代时`s`，你实际上是在迭代字符串的**字符**——而不是单词。您的版本可以通过迭代来调整`s.split()`（这将是一个单词列表），但是您会遇到标点符号导致单词与您的字典不匹配的问题。`string`您可以通过导入并从每个单词中删除来使其匹配`string.punctuation`，但这将从最终字符串中删除标点符号（因此，如果替换不起作用，则正则表达式可能是最佳选择）。

# ruby - Rails 升级设计

> ID：13814332
> 
> 赞同：1
> 
> 时间：2012-12-11T05:43:37.033
> 
> 标签：ruby, devise, gem, upgrade

我是 RoR 的新手，我不知道如何卸载 gem。我安装了一个我不想要的设计版本。我已经运行了迁移和 devise_install，所以想知道我是否只需要删除我的应用程序中的文件，然后运行 ​​gem 删除，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:22:26.377

在您的 Gemfile 中，您应该能够设置要升级到的设计版本：

```
gem 'devise', '~> x.x.x' 
```

然后运行`bundle update devise`以更新您的 rails repo 中的 gem。

您应该能够重新运行`rake generate devise:install`，它将再次创建必要的文件。任何冲突都将打印到控制台，您可以删除必要的文件并再次重新运行任务。

# javascript - 谷歌地图自动完成功能不起作用

> ID：13814334
> 
> 赞同：3
> 
> 时间：2012-12-11T05:43:52.127
> 
> 标签：javascript, html, google-maps-api-3

我想获得谷歌地图的自动完成行为，但我没有得到它显示这个的确切原因

**未捕获的类型错误：无法读取未定义的属性“自动完成”**

我在哪里用这个

```
 var addressValue = document.getElementById('geoFenceAddress');
  alert(addressValue);
  var autocomplete = new google.maps.places.Autocomplete(addressValue);
  autocomplete.bindTo('bounds', geoFenceAddress); 
```

我有一个 id 为“ **geoFenceAddress** ”的元素，实际上警报正在显示这个**[Object HTMLInputElement]**。

我不明白我在哪里缺乏，请阐明一下......

:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T06:13:42.603

您需要在加载 API 时添加地点库。

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script> 
```

# javascript - 在提交到我的支付门户之前，如何正确地将已通过 if...else 调整的 JavaScript 值传递回我的网页？

> ID：13814335
> 
> 赞同：0
> 
> 时间：2012-12-11T05:43:51.473
> 
> 标签：javascript, jquery, html, forms, variables

我有一个在线支付表格，我的客户可以使用它通过托管支付门户向我付款。如果客户使用借记卡付款，则不会产生额外费用。但是，如果客户通过信用卡付款，则需额外支付 2.5% 的管理费。我创建了一个遵循相同结构的基本表单，并使用弹出窗口来显示它们持有正确的值。我遇到的问题是，当我尝试将该值传递给支付门户时，我得到了一个“故障 8”代码。我试图与支付解决方案的提供商解决问题，但他们的帮助不大，我不热衷于升级到他们的“高级计划”和另外 12 个月的麻烦。

基本形式是：

```
<HTML> <HEAD> <TITLE>Test Input</TITLE>

<SCRIPT LANGUAGE="JavaScript">

function cardHandlingFee (form) {   var Notes = form.Notes.value;   var amountPaid = form.amountPaid.value;     var clientname = form.clientname.value;     var CustomerEmail = form.CustomerEmail.value;   var percent = 0.025;    var CreditCardCharge;   var totalCharge;

if ( Notes == "Debit Card" )    {       TransactionAmount = amountPaid;         alert ("You typed: " + TransactionAmount);  }   else    {       CreditCardCharge = amountPaid * percent;                totalCharge = parseFloat(amountPaid) + parseFloat(CreditCardCharge);        TransactionAmount = totalCharge.toFixed(2);         alert ("You typed: " + TransactionAmount);  } }

</SCRIPT> </HEAD> <BODY>

<form id="contactform" action="https://(PAYMENT-SOLUTION DETAILS)" method="POST" name="confirm">Enter something in the box: <BR> <p class="padding:2px"> <select id="CardType" name="Notes" required> <option value="Credit Card">Credit Card</option> <option value="Debit Card">Debit Card</option> </select></p>

<p class="padding:2px"><input id="amountPaid" type="number" name="amountPaid" min="0" max="9999" step="0.01" size="4" /> <script type='text/javascript'>
      quote = 'This is the quote of the day!';
      document.contactForm.TransactionAmount.value = TransactionAmount;
      alert(document.contactForm.TransactionAmount.value);
    </script>

<p class="padding:2px">Clients full name*<br /><input type="text" name="clientname" value="" /></p>

<p class="padding:2px">Your email address*<br /><input type="email" name="CustomerEmail" value="" /></p>

<input type="submit" onClick="cardHandlingFee(this.form);" value="Submit Card" />

<input type="hidden" name="CustomerID" value="(CLIENT CUS ID)" /> <input type="hidden" id="TransactionAmount" name="TransactionAmount" /> <input type="hidden" name="TransactionCurrency" value="826" /> <input type="hidden" name="RedirectorSuccess" value="http://(CLIENT SITE)/success" /> <input type="hidden" name="RedirectorFailed" value="http://(CLIENT SITE/failed" /> </FORM>

</BODY> </HTML> 
```

对于用这种方法或其他方法解决问题的任何帮助，我将不胜感激。这是在我的 WordPress 网站中。我尝试过 Jquery、Jscript、.innerHTML，但我现在很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:58:31.980

据我所知，你快到了。您只需在`if(){...} else{...}`结构之后立即添加以下行：

```
form.TransactionAmount.value = TransactionAmount; 
```

另一件事，如`form.Notes`选择菜单，`form.Notes.value`仅适用于某些浏览器。您应该进行以下更改。

```
//var Notes = form.Notes.value;
var Notes = form.Notes[form.Notes.selectedIndex].value; 
```

# javascript - 添加和删 除用户名的功能

> ID：13814337
> 
> 赞同：0
> 
> 时间：2012-12-11T05:43:54.477
> 
> 标签：javascript, jquery, asp.net, signalr

在我的聊天应用程序项目中，每当有新用户连接到服务器时，我都会尝试向所有用户广播用户名。并在用户离开服务器时删除用户名。以下是我通过教程尝试过的代码。（请检查`file.js`未显示所需输出的文件）

**Chat.cs** ( *Working* ) --> 实现 SignalR 的 "Hub" 类

```
public class Chat : Hub 
{ 
    /* showing only related content */
    static ConcurrentDictionary<string, User> _users = new ConcurrentDictionary<string, User>();

    public override Task OnDisconnected()
    {            
        var user = _users[Context.ConnectionId]; //user as ConnectionId
        User removedUser; //new class object
        _users.TryRemove(Context.ConnectionId, out removedUser);
        return Clients.All.leave(user, DateTime.Now.ToString()); //dynamic expression
    }

    public void Joined()
    {
        User user = new User(Context.ConnectionId, Clients.Caller.username);
        _users.TryAdd(user.ConnectionID, user);
        Clients.All.joins(user.ConnectionID, user.Name, DateTime.Now); //dynamic expression
    }
} 
```

**User.cs**（*工作*）

```
public class User
{
    public User(string ConnID, string Username)
    {
        Name = Username;
        ConnectionID = ConnID;
    }
    public string Name { get; set; }
    public string ConnectionID { get; set; }
} 
```

**file.js**（*不工作*）

```
var chatUsername = window.prompt("Enter Username:", "");  //username
var chat = $.connection.chat;  //connection
//
chat.client.joins = function (ConnectionId, name, Date) {
    ConnectionId = 1; /* given value to just test */
    name = chatUsername;
};

chat.client.leave = function (user, date) {
    user = "";  //making the string empty so that the disconnected user value will be lost.
};

//Here is the connection which calls the "Joined" function of the server (Chat.cs) 
```

我应该在`file.js`函数（***加入***和***离开***）中写什么，这样我才能得到我上面提到的预期结果。在问这里之前，我已经浏览了这个**[网站](http://thewayofcode.wordpress.com/2012/07/24/chatr-just-another-chat-application-using-signalr/)**，它正在做同样的事情，但包括我不想包括的其他 javascript 文件（knockout.js 和 json）。（因为我是 jquery 的新手）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:53:41.897

为了将 UserNames 传递给客户端，您可以使用您的字典，并在您加入的服务器端方法中，您可以将 SignalR 行更改为：

```
Clients.All.joins(_users.Values); //dynamic expression 
```

那么连接的客户端版本将是：

```
chat.client.joins = function (users) {
    for(var i = users.length - 1; i >= 0; i--) {
        alert("User Name: " + users[i].Name + "\nUser Connection ID: " + users[i].ConnectionID);
    }
}; 
```

当然，您可以以不同于提醒用户信息的方式处理用户信息，但这就是如何处理数据的要点。最后，我建议不要将连接 ID 传递给所有人，因为第三方很容易劫持它。

# regex - 我需要一个只接受带空格的文本字符的正则表达式

> ID：13814340
> 
> 赞同：11
> 
> 时间：2012-12-11T05:44:13.417
> 
> 标签：regex, validation

我的 asp 页面中有一个文本框，我需要验证它以允许用户仅输入来自 AZ、az... 的文本字符，但单词之间**允许有空格。**

我尝试了以下但它不起作用（不允许空格）::

```
^[a-zA-Z]*$ 
```

我可以更改它以使其允许空格吗？？？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-11T05:47:03.970

试试这个，对于正则表达式

```
^[a-zA-Z ]*$ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T05:49:37.360

您可以将 RegEx 字符 \s 添加到正则表达式中，允许使用空格、空格和换行符：

```
^[a-zA-Z\s]*$ 
```

或者，就像其他海报所说的那样，使用空格，只允许空格：

```
^[a-zA-Z ]*$ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T05:47:11.630

只需在括号之间添加一个空格。

```
^[a-zA-Z ]*$ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T05:47:57.660

您可以将空格添加到字符类：

```
^[a-zA-Z ]*$ 
```

（只有空格）或

```
^[a-zA-Z\s]*$ 
```

（所有空格 - 空格、制表符、换行符...）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T05:48:43.753

您可以使用以下内容来允许空格：

```
^[a-zA-Z\s]*$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-20T20:23:37.530

您还可以执行以下操作以允许大小写字母

```
/(^[a-z ]+$)/i 
```

i -> 不区分大小写的匹配（忽略 [a-zA-Z] 的大小写）

# javascript - 如何在 jQuery / JavaScript 中增加 slimscroll bar 的宽度

> ID：13814344
> 
> 赞同：0
> 
> 时间：2012-12-11T05:44:38.053
> 
> 标签：javascript, jquery

我们如何在 jQuery / javascript 中增加 slimScroll 条的宽度...目前，它仅在用户播放该框时显示，并且一旦用户离开适合 slimScroll 条的框，它就会变得不可见...

我们使用了**属性 "railVisible: true"**。

但是滚动条一会儿就消失了，不知道如何增加停留时间....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:50:32.290

玩下面的css ...它会工作

```
::-webkit-scrollbar
{
width: 3px;//increase this value
height: 9px; 
}

::-webkit-scrollbar-button:start:decrement, #doc ::-webkit-scrollbar-button:end:increment
{
display: block;
height: 0;
background-color: transparent;
}
::-webkit-scrollbar-track-piece
{
background-color: #FAFAFA;
-webkit-border-radius: 0;
-webkit-border-bottom-right-radius: 8px;
-webkit-border-bottom-left-radius: 8px;
}

  ::-webkit-scrollbar-thumb:vertical
{
height: 50px;
background-color: #999;
-webkit-border-radius: 8px;
}
 ::-webkit-scrollbar-thumb:horizontal
{
width: 50px;
background-color: #999;
-webkit-border-radius: 8px;
} 
```

# http - Spring 3.0 安全 http GET 登录

> ID：13814346
> 
> 赞同：0
> 
> 时间：2012-12-11T05:44:52.767
> 
> 标签：http, get, spring-security

我有以下 spring 安全配置，**如何更改它登录以基于 http GET 而不是 POST 工作**，以便登录 url 类似于： *http://localhost/myapp/j_security_check?j_username=scott&j_password=tiger&landing=一些.html*

```
 <http auto-config="true" lowercase-comparisons="false">
    <intercept-url pattern="/images/**" filters="none"/>
    <intercept-url pattern="/styles/**" filters="none"/>
    <intercept-url pattern="/scripts/**" filters="none"/>
    <!--  Temp Below for testing reports -->
    <intercept-url pattern="/admin/**" access="ROLE_ADMIN"/>
    <intercept-url pattern="/passwordHint*" access="ROLE_ANONYMOUS,ROLE_ADMIN,ROLE_USER"/>
    <intercept-url pattern="/signup*" access="ROLE_ANONYMOUS,ROLE_ADMIN,ROLE_USER"/>
    <intercept-url pattern="/unauthorized*" access="ROLE_ANONYMOUS,ROLE_ADMIN,ROLE_USER"/>
    <intercept-url pattern="/**/*.action*" access="ROLE_ADMIN,ROLE_USER"/> 
    <logout success-handler-ref="logoutHandler" invalidate-session="true" logout-url="/logout"/>
    <form-login login-page="/login" authentication-success-handler-ref="authSuccessHandler" 
                authentication-failure-handler-ref="authFailureHandler" authentication-failure-url="/login?error=true"
                login-processing-url="/j_security_check"/>
    <remember-me user-service-ref="userDao" key="e37f4b31-0c45-11dd-bd0b-0800200c9a66"/>        
</http> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:16:25.430

我最终引入了带有 jquery 提交表单的附加静态 jsp 页面到 j_security_check

```
<script type="text/javascript">
$(function() {
    function getUrlParams() {
        var params = {};
        window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(str, key, value) {
            params[key] = value;
        });

        return params;
    }
    $('#j_username').val(getUrlParams()['user']);
    $('#j_password').val(getUrlParams()['password']);
    $('#urlLoginForm').submit();
});
</script>

</head>

<form method="post" id="urlLoginForm" action="<c:url value='/j_security_check'/>">
<input type="hidden" id="j_username" name="j_username" /> 
<input type="hidden" id="j_password" name="j_password" />
</form> 
```

# matlab - 我可以将我的（基于 Matlab 的）神经网络导出到 PHP 吗？

> ID：13814353
> 
> 赞同：2
> 
> 时间：2012-12-11T05:45:29.520
> 
> 标签：matlab, neural-network

我在 Matlab 中训练了一个神经网络（使用神经网络工具箱）。现在我想将计算的权重和偏差导出到另一个平台（PHP），以便用它们进行计算。有没有办法创建一个函数或方程来做到这一点？

我发现了这个相关的问题：[Equation that compute a Neural Network in Matlab](https://stackoverflow.com/questions/8837600/equation-that-compute-a-neural-network-in-matlab)。

有没有办法做我想做的并将我的 NN（29 个输入，10 个隐藏层，1 个输出）的结果移植到 PHP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:32:37.187

是的，`net`另一个问题中还引用的属性是简单的矩阵：

```
W1=net.IW{1,1};
W2=net.LW{2,1};
b1=net.b{1,1};
b2=net.b{2,1}; 
```

因此，您可以将它们以逗号分隔值的形式写入文件。

```
csvwrite('W1.csv',W1) 
```

然后，在 PHP 中读取这些数据并根据需要转换或使用它。

```
<?php

if (($handle = fopen("test.csv", "r")) !== FALSE) {
    $data = fgetcsv($handle, 1000, ",");
}
?> 
```

然后，要处理权重，您可以通过替换 tansig 函数来使用另一个问题中的公式，该函数根据以下公式计算：

```
n = 2/(1+exp(-2*n))-1 
```

这在数学上等价于`tanh(N)`

它也[存在于php](http://php.net/manual/en/function.tanh.php)中。

来源：[http ://dali.feld.cvut.cz/ucebna/matlab/toolbox/nnet/tansig.html](http://dali.feld.cvut.cz/ucebna/matlab/toolbox/nnet/tansig.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:54:46.777

转移所有这些非常简单。你会需要：

1.  编写矩阵乘法的代码，这是一对非常简单的 for 循环。
2.  其次，根据[Matlab 文档](http://www.mathworks.com/help/nnet/ref/tansig.html)tansig(n) = 2/(1+exp(-2*n))-1 观察。我很确定 PHP 有 exp （如果没有，它有一个非常简单的多项式展开，你可以自己编写）
3.  阅读、理解和应用 Jasper van den Bosch 对您问题的出色回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T15:26:52.153

因此解决方案变为（在纠正所有错误部分之后）

这里我在 Matlab 中给出了一个解决方案，但是如果你有 tanh() 函数，你可以很容易地将它转换为任何编程语言。对于 PHP，存在 tanh() 函数：[php tanh()](http://php.net/manual/en/function.tanh.php)。它仅用于显示网络对象中的字段和您需要的操作。

*   假设您有一个训练有素的 ann（网络对象）要导出
*   假设训练出来的ann的名字是trained_ann

这是用于导出和测试的脚本。测试脚本将原始网络结果与 my_ann_evaluation() 结果进行比较

```
% Export IT
exported_ann_structure = my_ann_exporter(trained_ann);

% Run and Compare 
% Works only for single INPUT vector
% Please extend it to MATRIX version by yourself
input = [12 3 5 100];
res1 = trained_ann(input')';
res2 = my_ann_evaluation(exported_ann_structure, input')'; 
```

您需要以下两个功能的地方

*首先 my_ann_exporter*：

```
function [ my_ann_structure ] = my_ann_exporter(trained_netw)
% Just for extracting as Structure object
my_ann_structure.input_ymax = trained_netw.inputs{1}.processSettings{1}.ymax;
my_ann_structure.input_ymin = trained_netw.inputs{1}.processSettings{1}.ymin;
my_ann_structure.input_xmax = trained_netw.inputs{1}.processSettings{1}.xmax;
my_ann_structure.input_xmin = trained_netw.inputs{1}.processSettings{1}.xmin;

my_ann_structure.IW = trained_netw.IW{1};
my_ann_structure.b1 = trained_netw.b{1};
my_ann_structure.LW = trained_netw.LW{2};
my_ann_structure.b2 = trained_netw.b{2};

my_ann_structure.output_ymax = trained_netw.outputs{2}.processSettings{1}.ymax;
my_ann_structure.output_ymin = trained_netw.outputs{2}.processSettings{1}.ymin;
my_ann_structure.output_xmax = trained_netw.outputs{2}.processSettings{1}.xmax;
my_ann_structure.output_xmin = trained_netw.outputs{2}.processSettings{1}.xmin;
end 
```

*第二个 my_ann_evaluation：*

```
function [ res ] = my_ann_evaluation(my_ann_structure, input)
% Works with only single INPUT vector
% Matrix version can be implemented

ymax = my_ann_structure.input_ymax;
ymin = my_ann_structure.input_ymin;
xmax = my_ann_structure.input_xmax;
xmin = my_ann_structure.input_xmin;
input_preprocessed = (ymax-ymin) * (input-xmin) ./ (xmax-xmin) + ymin;

% Pass it through the ANN matrix multiplication
y1 = tanh(my_ann_structure.IW * input_preprocessed + my_ann_structure.b1);

y2 = my_ann_structure.LW * y1 + my_ann_structure.b2;

ymax = my_ann_structure.output_ymax;
ymin = my_ann_structure.output_ymin;
xmax = my_ann_structure.output_xmax;
xmin = my_ann_structure.output_xmin;
res = (y2-ymin) .* (xmax-xmin) /(ymax-ymin) + xmin;
end 
```

# mysql - 主键生成 MySQL Hibernate

> ID：13814357
> 
> 赞同：1
> 
> 时间：2012-12-11T05:46:01.757
> 
> 标签：mysql, oracle, primary-key, sequence, distributed

我有一个跨 2 个实例部署的应用程序。

数据库：MySQL
ORM：休眠

但是，我需要实现类似 Oracle 序列的行为。由于 MySQL 没有，我只是创建了一个带有 AUTO_INCREMENT 的表和一个从中返回值的方法。它是线程安全的，所以当我在 1 台服务器上部署这个应用程序时它不是问题。但是，我认为这种线程安全的行为不会在多个 JVM 中成立。在这种情况下该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:20:07.730

跨多个 JVM 使用是安全的。MySQL 发出每个 ID 一次。在 ResultSet 上使用`getGeneratedKeys()`以检索生成的 ID。

# tomcat - 使用 visualvm 分析 Tomcat Web 应用程序

> ID：13814359
> 
> 赞同：3
> 
> 时间：2012-12-11T05:46:15.390
> 
> 标签：tomcat, web, cxf, profile, visualvm

我正在尝试使用 VisualVM 分析我在 Tomcat 上运行的 Web 应用程序。顺便说一下，我正在使用 Eclipse IDE。我不明白的一件事是，当我在 Tomcat 上启动我的 Web 应用程序，然后开始分析内存使用情况时，我只能从包 org.apache.** 中看到几个类。我想当我查看 Tomcat 的执行日志时，已经实例化了更多的类。

此外，我的 Web 应用程序实际上是使用 Apache CXF 前端开发的 Web 服务。在部署的时候，我可以从日志中看到，Apache CXF 的一些组件已经被实例化了。但是，我在分析结果中找不到任何与 CXF 相关的类。

只有当我启动 Web 客户端发送请求并返回响应时，我才能在分析结果中看到许多与 CXF 相关的类。我怀疑在客户端请求之前应该已经为我的 Web 服务实例化了对象。

一切对我来说仍然很不清楚。非常感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:44:30.977

最好从 CPU 采样开始，如果你不知道代码的哪一部分是慢的。一旦您更好地了解（基于采样结果）正在发生的事情，您就可以只分析您的 Tomcat 服务器的一部分。请参阅[使用 VisualVM 进行分析，第 1 部分](https://blogs.oracle.com/nbprofiler/entry/profiling_with_visualvm_part_1)和[使用 VisualVM 进行分析，第 2 部分](https://blogs.oracle.com/nbprofiler/entry/profiling_with_visualvm_part_2)，以获取有关分析以及如何设置分析根和检测过滤器的更多信息。

# objective-c - 为什么 Instruments 在以下代码中显示了如此多的泄漏？

> ID：13814360
> 
> 赞同：0
> 
> 时间：2012-12-11T05:46:25.687
> 
> 标签：objective-c, memory-leaks, instruments

```
- (NSArray *) makeKeyValueArray: (NSArray *) arr
{
    NSMutableArray *result = [[NSMutableArray alloc] init];
    for(int i = 0; i < [arr count]; i++)
    {
        [result addObject:[[KeyValue alloc] initWithData:[arr objectAtIndex:i] :[arr objectAtIndex:i]]];
    }
    return result;
} 
```

Instruments 在上面的代码中显示了 188 个泄漏，这是为什么呢？谁能给我解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T05:53:57.123

```
- (NSArray *) makeKeyValueArray: (NSArray *) arr
{
    NSMutableArray *result = [[NSMutableArray alloc] init];
    for(int i = 0; i < [arr count]; i++)
    {
        id obj = [[KeyValue alloc] initWithData:[arr objectAtIndex:i] :[arr objectAtIndex:i]]; // obj reference count is now 1, you are the owner
        [result addObject:obj]; //reference count is now 2, the array is also an owner as well as you.
        [obj release];// reference count is now 1, you are not the owner anymore
    }
    return [result autorelease];
} 
```

查看[基本内存管理规则](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)

> 您必须放弃您拥有的对象的所有权

# mysql - rake db:create 和 db:migrate 工作但应用程序挂起

> ID：13814363
> 
> 赞同：0
> 
> 时间：2012-12-11T05:46:32.207
> 
> 标签：mysql, ruby-on-rails, web-applications, amazon-web-services

我是 ruby​​ on rails 和 amazon aws 的新手，遇到了这个问题：我可以使用以下命令从命令行连接到我的数据库：

```
mysql -h aaynj18bcvo3e.clqvrttlitbb.us-east-1.rds.amazonaws.com -P 3306 -u ebroot -p 
```

也可以成功db:create 和db:migrate。问题是当我尝试连接到 localhost:3000/users/new 时，我的应用程序挂起。但是，当我访问 localhost:3000/ 时，我可以看到默认的 rails HTML 页面。

我能够验证我创建的数据库和表现在确实存在。

此时，我什至没有尝试部署应用程序，我只想在处于开发模式时能够连接到远程数据库。

请帮忙 - 谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:09:00.500

当您访问“ localhost:3000 ”时，它会显示有关您的数据库的所有信息。如果屏幕上有一个rails图标，则数据库连接成功，否则不会...

这是了解数据库配置以及是否连接的简单方法...

# javascript - 用于读取地图数组的 Javascript 代码

> ID：13814365
> 
> 赞同：0
> 
> 时间：2012-12-11T05:46:44.033
> 
> 标签：javascript, jsp, jstl, jsp-tags

下面是嵌入在 Java Script 中的 jsp 代码：

```
//This object comes from Java code to Jsp Code.    
var msgs = [{name=rajasekhar, langId=en, bShow=true}, {name=sekhar, langId=de,bShow=false},{name=valli, langId=en, bShow=false}];

<script type="text/javascript">
var langSectState = new Array();

 <c:forEach var="msg" items="${msgs}">
    <c:set var="langId" value="${msg['langId']}"/>

    langSectState ["${langId}"] = ${msg['bShow']};  //JS

 </c:forEach>
</script> 
```

MoreInfo：上面的代码它从msgs中提取langId，bShow并将值存储在Array中。

在我的服务器配置更改后，这无法正常工作。因此，我必须将此代码更改为完整的 Java 脚本。

任何人都可以在 Java Script 中建议等效的代码吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:01:43.333

我不确定您是否真的需要覆盖此数组中的值（例如，您有两个带有 langId="en" 的对象）。但是您的代码如下所示。

```
<script type="text/javascript">
var msgs = [{name:"rajasekhar", langId:"en", bShow:true}, {name:"sekhar", langId:"de",bShow:false},{name:"valli", langId:"en", bShow:false}];
var langSectState = new Array();

for(var it in msgs)
{
    var langId = msgs[it]['langId'];
    langSectState[langId] = msgs[it]['bShow'];
}

for(var it in langSectState)
{
    console.log(it+":"+langSectState[it]);
}

</script> 
```

请注意，console.log 循环仅用于测试目的

# c++ - 如何将数据解压缩到动态分配的内存位置

> ID：13814368
> 
> 赞同：2
> 
> 时间：2012-12-11T05:46:47.543
> 
> 标签：c++, boost, gzip, iostream, boost-iostreams

基本上我试图将一些源解压缩到数据指针指向的动态分配内存。我有以下代码，我可以看到`copy()`正在工作，但数据指向的内存是全部`0s`。有谁知道为什么？

```
void *data = new float[1000000]();
std::ostringstream dest;
dest.rdbuf()->pubsetbuf((char *)data,1000000*4);
boost::iostreams::array_source source( some source );
boost::iostreams::filtering_istreambuf in;
boost::iostreams::filtering_ostreambuf out;
in.push( ios::gzip_decompressor() );
in.push( source );
out.push( dest );
boost::iostreams::copy( in, out ); 
```

注意这里的 data 必须是一个 void 指针，我必须使用 new 运算符，因为数据大小会根据另一个指标而变化。

编辑：我在这里找到了答案：[设置标准流使用的内部缓冲区（pubsetbuf）](https://stackoverflow.com/questions/1494182/setting-the-internal-buffer-used-by-a-standard-stream-pubsetbuf)

# c# - 使用asp.net在页面加载中发送请求时加载图像不起作用

> ID：13814375
> 
> 赞同：0
> 
> 时间：2012-12-11T05:47:19.000
> 
> 标签：c#, httpwebrequest, httpresponse, animated-gif

我在securetrans.aspx页面中插入了gif图像，并在securetrans.aspx.cs页面页面加载中编写了支付网关请求代码，这里的问题是加载图像根本没有显示在整个请求中并且页面是空的，直到回应来了。搜了好几遍都找不到，希望有大佬帮帮我。。

提前致谢...

我的**securetrans.aspx.cs**代码是

```
protected void Page_Load(object sender, EventArgs e)
{

string Url = "https://paymentpagetosendrequest";
        string Method = "post";
        string FormName = "form1";

NameValueCollection FormFields = new NameValueCollection();
 FormFields.Add("account_id", "5880");
        FormFields.Add("reference_no", Session["UserID"].ToString());
        FormFields.Add("amount", Session["Amount"].ToString());

FormFields.Add("return_url", "http://responsepage");
 for (int i = 0; i < FormFields.Keys.Count; i++)
        {
            Response.Write(string.Format("<input name=\"{0}\" type=\"hidden\" value=\"{1}\">", FormFields.Keys[i], FormFields[FormFields.Keys[i]]));
        }
} 
```

和**securetrans.aspx**

```
Loading... Please Wait!!!

You will be Redirected to Secured Transaction Page....

(Please don't press back or refresh button.)

<asp:Image runat="server" ImageUrl="images/Loader.gif" ID="img" AlternateText="Loader" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:54:38.377

除非您专门对其进行编码以在其他代码之前在页面加载中发送响应（这将导致另一个问题，即您无法在响应中添加更多内容以进行显示），因为当您运行浏览器的代码时什么都不会显示，我认为您正在尝试执行诸如显示处理 img 之类的操作，我建议您使用一些 jQuery 插件，例如 blockUI： http: [//www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

编辑：

好的，我假设用户通过重定向或其他方式访问您的页面，因此您没有任何按钮，那么我建议您在发送重定向之前在该页面上添加 blockUI，以便用户可以看到加载消息。或者您可以构建第三个页面，用户将首先被重定向到该页面，该页面除了加载消息和一个 html 头元 http-equiv="REFRESH" 之外什么都没有，它实际上将他们引导到您的页面，以便他们可以见加载图像。在这里检查一下：http: [//www.instant-web-site-tools.com/html-redirect.html](http://www.instant-web-site-tools.com/html-redirect.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:18:35.667

您需要为此使用一些 JS，因为页面中的控件仅在页面加载后才会呈现

在此处尝试[DEMO](http://www.aspsnippets.com/demos/289/)并在此处尝试[CODE](http://www.aspsnippets.com/Articles/Display-loading-image-while-PostBack-calls-in-ASPNet.aspx)。

```
function ShowProgress() {
    setTimeout(function () {
        var modal = $('<div />');
        modal.addClass("modal");
        $('body').append(modal);
        var loading = $(".loading");
        loading.show();
        var top = Math.max($(window).height() / 2 - loading[0].offsetHeight / 2, 0);
        var left = Math.max($(window).width() / 2 - loading[0].offsetWidth / 2, 0);
        loading.css({ top: top, left: left });
    }, 200);
}
$('form').live("submit", function () {
    ShowProgress();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T06:42:57.313

您可以将以下代码放入页面加载事件中：

```
 string script = "$(document).ready(function () { $('[id*=form1]').load(); });";
 ClientScript.RegisterStartupScript(this.GetType(), "load", script, true); 
```

其中“form1”是表单标签的名称。

# php - 从连接表中选择 - 不完整的表

> ID：13814378
> 
> 赞同：0
> 
> 时间：2012-12-11T05:47:46.723
> 
> 标签：php, mysql, join

我有两个表：“cat_page”和“pages”。“cat_page”表是类别和其中包含的页面的关联。“页面”表包含有关页面的数据。我允许用户在页面上投票，其中 total_votes 是“页面”中的一列。

我正在尝试创建一个查询，我可以在其中选择一个类别中还没有任何投票的所有页面。我无法超越的部分是“cat_page”中有很多页面在“pages”中没有关联的行。如果我输入：

```
AND pages.total_votes > 0 
```

在下面的注释部分中，我将只选择 pages.total_votes = 0 的页面，而不是任何 cat_page.page 在“页面”中没有关联页面的页面。

任何帮助表示赞赏。

```
$data = array($lastcat);
$STH = $DBH->prepare("SELECT cat_page.page FROM cat_page
LEFT JOIN pages ON cat_page.page = pages.page
WHERE cat_page.cat_id = ?
/// unsure what to do here
"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:52:05.660

当您执行左外连接时，不存在的列将出现 NULL

```
AND (pages.toatl_votes IS NULL OR pages.total_votes = 0) 
```

应该可以解决您的问题。大于 NULL 为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:54:31.957

我认为您遇到的问题是您在 cat_page 上使用了左连接，但您可能应该选择右连接。

```
SELECT cat_page.page FROM cat_page
RIGHT JOIN pages ON cat_page.page = pages.page
WHERE cat_page.cat_id = ? and page.total_votes = 0 
```

希望有帮助。

# c# - ServerManager 如何找到给定站点的状态

> ID：13814382
> 
> 赞同：3
> 
> 时间：2012-12-11T05:48:22.747
> 
> 标签：c#, iis, configuration, iis-7.5, servermanager

我正在尝试使用 Servermanager 读取站点的状态。基本上这就是我所拥有的，

```
var serverManager = new ServerManager(siteInstance.Server.ConfigPath);
    var site = serverManager.Sites.FirstOrDefault(x => x.Id == Convert.ToInt64(siteInstance.IisIdentifier));
    return site.State.ToString(); 
```

我能够毫无问题地读取配置文件和站点详细信息。但是该站点的状态要么是给我下面的 COM 错误，要么给出的状态不能反映 IIS 中站点的实际状态。

```
The object identifier does not represent a valid object. (Exception from HRESULT: 0x800710D8) 
```

据我了解，配置文件仅包含站点信息。它不指示哪些 IIS 服务器正在从配置中读取。那么 ServerManager 是如何知道要查看哪个 IIS 来查找站点的运行状态的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:42:36.153

您获取站点的原因是因为您试图从站点配置文件中读取状态，该配置文件不包含站点的状态。相反，您应该做的是直接连接到 IIS 服务器，如下所示：

```
ServerManager manager= ServerManager.OpenRemote("testserver");
var site = manager.Sites.First();
var status = site.State.ToString() ; 
```

请参阅下面我的帖子以获取完整详细信息：以 [编程方式从 IIS 获取站点状态，返回 COM 错误](https://stackoverflow.com/questions/13718128/programmtically-get-site-status-from-iis-gets-back-com-error/13850708#13850708)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:57:20.843

结帐这个网站..我用谷歌搜索了 Execption 加上错误代码，我认为这应该有助于让你指出正确的方向

[对象标识符不代表有效对象。（来自 HRESULT 的异常：0x800710D8）](http://www.dotnetscraps.com/dotnetscraps/post/The-object-identifier-does-not-represent-a-valid-object-%28Exception-from-HRESULT-0x800710D8%29.aspx)

如果文章没有解决问题或问题，请尝试以下操作.. 也粘贴您的 .config 文件的片段。

检查 IIS 管理器中的 ApplicationPool 以验证您是否拥有 DefaultAppPool。即使您不使用它，IIS 有时仍然需要它来实现某些自动化。

查看 system32\inetsrv\config\applicationHost.config 或通过您的 IIS 管理 UI。

前任：

```
<applicationPools>  
        <add name="DefaultAppPool" />  
      <add name="Classic .NET AppPool" managedPipelineMode="Classic" />         <applicationPoolDefaults>    
          <processModel identityType="ApplicationPoolIdentity" />                     </applicationPoolDefaults>
</applicationPools> 
```

# xslt-1.0 - 将相同的节点分组为单个父节点

> ID：13814388
> 
> 赞同：0
> 
> 时间：2012-12-11T05:48:41.807
> 
> 标签：xslt-1.0, xslt-2.0

我有如下 XML 内容：

```
<details>
      <name>Name 1</name>
      <name>Name 2</name>
      <name>Name 3</name>
      <address>Address 1</address>
      <address>Address 2</address>
      <address>Address 3</address>
      <address>Address 4</address>
  ....
</details> 
```

我想得到如下输出：

```
<details>
 <names>      
      <name>Name 1</name>
      <name>Name 2</name>
      <name>Name 3</name>
 </names>
 <addresses>
     <address>Address 1</address>
     <address>Address 2</address>
     <address>Address 3</address>
     <address>Address 4</address>
 </addresses> 
```

...

我尝试使用以下 XSL，但没有得到所需的输出：

```
 <xsl:template match="address">
    <addresses>
        <xsl:for-each select="*">
            <xsl:apply-templates/>
        </xsl:for-each>
    </addresses>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:11:53.950

你知道元素的子元素的名称和数量`details`吗？在这种情况下，使用就足够了

```
<xsl:template match="details">
  <xsl:copy>
   <names>
     <xsl:copy-of select="name"/>
   </names>
   <addresses>
     <xsl:copy-of select="address"/>
   </addresses>
 </xsl:copy>
</xsl:template>

<xsl:output indent="yes"/> 
```

如果您不知道子元素的名称和数量，您可以按名称进行分组，尽管生成包装元素名称的复数可能会很困难（即名称 -> 名称但地址 -> 地址）：

```
<xsl:template match="details">
  <xsl:copy>
    <xsl:for-each-group select="*" group-by="local-name(.)">
     <xsl:element name="{if (ends-with(current-grouping-key(), 's') then concat(current-grouping-key(), 'es') else concat(current-grouping-key(), 's')}">
       <xsl:copy-of select="current-group()"/>
     </xsl:element>
   </xsl:for-each-group>
 </xsl:copy>
</xsl:template>

<xsl:output indent="yes"/> 
```

那应该给你一个想法。

# javascript - onclick=a(); 和有什么区别？和 javascript:onclick="a();" 在内联javascript调用中？

ID：13814391

赞同：1

时间：2012-12-11T05:48:52.183

标签：javascript, javascript-events

# php - 洗牌我的阵列

> ID：13814393
> 
> 赞同：-1
> 
> 时间：2012-12-11T05:48:58.763
> 
> 标签：php, arrays, shuffle

我在洗牌时遇到了麻烦，希望有人可以指导我吗？

我有这个数组：（这个数组是从随机关联函数产生的）

```
Array
(
    [1] => Array
        (
            [boo] => hello
            [yeah] => world
        )    
) 
```

我正在使用这个洗牌关联功能：

```
function shuffle_assoc($list) { 
  if (!is_array($list)) return $list; 

  $keys = array_keys($list); 
  shuffle($keys); 
  $random = array(); 
  foreach ($keys as $key) { 
    $random[] = $list[$key]; 
  }
  return $random; 
}

$test = shuffle_assoc($array);

echo "<pre>";
print_r($test);
echo "</pre>"; 
```

然后我得到这个：

```
Array
(
    [0] => Array
        (
            [boo] => hello // I'm trying to switch
            [yeah] => world // these two values
        )    
) 
```

随机播放功能不会切换`[boo]`并且`[yeah]`

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:21:12.290

I found a solution.

$test = shuffle_assoc(array_shift($array));

`array_shift()` brings the first element so it'll go from

```
Array
(
    [1] => Array
        (
            [boo] => hello
            [yeah] => world
        )    
) 
```

to

```
Array
(
            [boo] => hello
            [yeah] => world
) 
```

Notice how [1] is gone now

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:03:16.790

您需要跳过数组的第一级。

```
$array = array(1 => array('boo' => 'hello', 'yeah' => 'world', 'foo' => 'bar'));
function shuffle_assoc($list) {
    foreach ($list as $idx => &$sub_array) { // we actually loop over the numeric indexes since that's the first level
        $keys = array_keys($sub_array);
        $vals = array_values($sub_array);
        shuffle($vals);
        $sub_array = array_combine($keys, $vals);
    }
    return $list;
}
$new_arr = shuffle_assoc($array);
var_export($new_arr); 
```

输出

```
array (
  1 => 
  array (
    'boo' => 'bar',
    'yeah' => 'hello',
    'foo' => 'world',
  ),
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:06:09.890

看起来你传入的数组实际上是一个数组数组，有 1 个元素。您应该在`$array[1]`.

此外，在 中`shuffle_assoc`，该语句`$random[] = $list[$key]`不保留键值，因此结果数组将仅包含原始数组的值。将该行代码更改为`$random[$key] = $list[$key]`应该修复该功能。下面是一些对我有用的代码。

```
<?php
$array = array("boo" => "hello", "yeah" => "world");
function shuffle_assoc($list) { 
  if (!is_array($list)) return $list; 

  $keys = array_keys($list); 
  shuffle($keys); 
  $random = array(); 
  foreach ($keys as $key) { 
    $random[$key] = $list[$key]; 
  }
  return $random; 
}

$test = shuffle_assoc($array);

print_r($test);
?> 
```

# php - 无法使用 PHP 模拟 XSS 注入

> ID：13814394
> 
> 赞同：0
> 
> 时间：2012-12-11T05:49:04.490
> 
> 标签：php, xss, code-injection

我正在测试将代码注入用户输入的字段，以防止 XSS。

好的 - 更新：我在下面编写了可重现的代码。我输入以下注入，文本字段重定向，但 textarea 没有。我还可以看到，在我的原始表单上，由于回显后面的一些附加属性（例如 size="100px"），它不会重定向。但本质上它显示了漏洞。为什么不使用 textarea 字段？

输入字段：

```
<script type='text/javascript'>
window.location = 'http://www.example.com/'
</script>'"; 
```

代码：

```
<?
$descr='';
$title='';
if (isset($_POST['descr'])){
    $descr = $_POST['descr'];
}
if (isset($_POST['title'])){
    $title = $_POST['title'];
}
?>
<form method=post action=<? echo $_SERVER['PHP_SELF']?> enctype='multipart/form-data'>
    Title: <input  type="text" name='title'><? echo $title ?></input>
    Description: <textarea name='descr'><? echo $descr ?></textarea>
    <input type=submit name='save' value='Save Post'>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:09:03.223

通过脱离上下文查看特定的代码，没有什么明显的。我们不知道这里分配了什么 $title 或 $descr。据我们所知，变量是使用[strip_tags](http://php.net/strip-tags)或[htmlentities](http://php.net/htmlentities)初始化的。

例如，对我来说，该输出看起来像是通过 strip_tags 运行的。

```
$title = strip_tags($_POST['title'])

<input type=text name='title' value= '<? echo $title ?>'" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:07:03.907

不要在输入字段或文本区域中显示用户输入，浏览器不允许从该位置运行。接下来试试：

```
<div>
<? echo $descr ?>
</div> 
```

# android - 如何在android中获取listview高度？

> ID：13814396
> 
> 赞同：10
> 
> 时间：2012-12-11T05:49:21.290
> 
> 标签：android, android-listview

我需要使用自定义 ListVAdapter 找到 android ListView 的高度。每个 ListView 项目可以有不同的高度。我已经尝试了我在这里找到的以下代码：

```
public static void setListViewHeightBasedOnChildren(ListView listView) {

        ListAdapter listAdapter = listView.getAdapter(); 
        if (listAdapter == null) {
            return;
        }

        int totalHeight = 0;
        for (int i = 0; i < listAdapter.getCount(); i++) {
            View listItem = listAdapter.getView(i, null, listView);
            listItem.measure(0, MeasureSpec.UNSPECIFIED);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listView.getLayoutParams();
        params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        listView.setLayoutParams(params);
        listView.requestLayout();
    } 
```

但它没有给出实际高度；它为所有列表项提供相同的高度。是否可以使用不同高度的列表项找到 ListView 高度？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T17:23:24.840

```
private int getTotalHeightofListView() {

    ListAdapter LvAdapter = lv.getAdapter();
    int listviewElementsheight = 0;
    for (int i = 0; i < mAdapter.getCount(); i++) {
        View mView = mAdapter.getView(i, null, lv);
        mView.measure(
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        listviewElementsheight += mView.getMeasuredHeight();
    }
    return listviewElementsheight;
} 
```

试试这个代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T23:10:34.223

当您调用 时`measure(0, MeasureSpec.UNSPECIFIED)`，您是在告诉视图布局系统使用无限宽度，因此例如`TextViews`可能只流到单行。尝试传递列表视图的宽度：

```
public static void setListViewHeightBasedOnChildren(ListView listView) {
    ListAdapter listAdapter = listView.getAdapter(); 
    int totalHeight = 0;
    int listWidth = listView.getMeasuredWidth();
    for (int i = 0; i < listAdapter.getCount(); i++) {
        View listItem = listAdapter.getView(i, null, listView);
        listItem.measure(
            MeasureSpec.makeMeasureSpec(width, MeasureSpec.EXACTLY),
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
        totalHeight += listItem.getMeasuredHeight();
    }
    // ...update list height
} 
```

您还需要确保`onMeasure`在列表视图上调用它之后调用它，否则`listView.getMeasuredWidth()`将返回 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T20:07:32.867

您可以使用 getHeight()：

```
System.out.println("height of list view..."+listview.getHeight()); 
```

或者按照这个[答案](https://stackoverflow.com/questions/12411060/get-listview-height-after-setadapter/12423623#12423623)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-25T07:43:03.500

基于@jeevamuthu 代码。

```
public static int getLVHeight(ListView listView) {
    ListAdapter adapter = listView.getAdapter();
    int height = 0;
    int count = adapter.getCount();
    for (int i = 0; i < count; i++) {
        View view = adapter.getView(i, null, listView);
        view.measure(
                View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED),
                View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
        height += view.getMeasuredHeight();
    }
    height += listView.getDividerHeight() * (count - 1);
    return height;
} 
```

# iphone - socket断开时调用哪个方法

> ID：13814398
> 
> 赞同：0
> 
> 时间：2012-12-11T05:49:23.647
> 
> 标签：iphone, ios, nsstream

任何人都可以知道在 NSStreamDelegate 中自动断开套接字时调用哪个方法吗？因为当套接字断开连接时，它会再次调用`- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent`方法，所以会产生很多问题。谁能告诉我如何处理套接字断开连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:18:14.563

调用的方法又是`- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent`。由您来检测发生了哪种事件，并以适当的方式做出反应。

例如，考虑 Apple 文档中的以下示例：

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)streamEvent {
    switch(streamEvent) {
      case NSStreamEventHasBytesAvailable:;
      // whatever...
      break;
      case NSStreamEventEndEncountered:;
        [self processIncomingBytes];
        if (stream == ostream) {
            // When the output stream is closed, no more writing will succeed and
            // will abandon the processing of any pending requests and further
            // incoming bytes.
           [self invalidate];
        }
        break;
      case NSStreamEventErrorOccurred:;
        NSLog(@"HTTPServer stream error: %@", [stream streamError]);
        break;
      default:
        break;
    }
} 
```

# iphone - 在 xcode 4.5 中将 iphone xib 转换为 ipad

> ID：13814407
> 
> 赞同：1
> 
> 时间：2012-12-11T05:49:51.307
> 
> 标签：iphone, objective-c, ipad

我的 iPhone 项目已完成，但现在我必须将其转换为通用版本。所以我想知道在 Xcode 4.5 中将 iPhone xib 转换为 iPad xib 的最佳和快速方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:03:13.050

要将您的应用程序转换为通用应用程序，请执行以下步骤：

1.  创建特定于 iPad 的新 xib 文件
2.  在您的代码中加载特定的 xib 文件，即应用检查设备是 iPad 还是 iPhone，然后加载特定的 xib 文件。检查看起来像这样：

    ```
     if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
     // load iPhone xib and write code
     }
    else
    {
     // load iPad xib and write code
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:00:20.140

1.  您可以使用自动布局仅使用 1 xib
2.  您可以制作多个 xib 并根据当前使用的设备加载 iPhone 或 iPad

最简单的方法可能是 2 号。只需在具有相同接口的另一个 xib 上进行与 iPhone 相同的连接即可。

[这](http://useyourloaf.com/blog/2010/04/07/converting-to-a-universal-app-part-i.html)是一个如何使您的应用程序通用的示例。

# windows-phone-7 - windows phone 7 应用程序中如何切换到另一个页面作为主页

> ID：13814412
> 
> 赞同：0
> 
> 时间：2012-12-11T05:50:40.807
> 
> 标签：windows-phone-7

我正在为 Windows Phone 7 制作课程时间表应用程序。我有两个时间表视图。一个完整的视图显示一周中的所有课程，另一个是日视图，其中根据星期几显示其内容。我如何根据用户在设置页面中的选择默认加载这些不同页面之一。我尝试在 MainPage 类构造函数中使用导航服务。

```
NavigateService.Navigate(new Uri("/Today.xaml",UriKind.Relative)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:44:36.503

在**“MainPage.xaml”的****属性**中，转到**“事件”**选项卡。找到**“已加载”**事件并双击它。您会发现自己在**“MainPage.xaml.cs”**中创建了一个方法：

 ******```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
{
     //Some code may already be written       
} 
```

现在，根据您在设置页面中保存的状态，您可以在**“MainPage_Loaded”**方法中使用条件语句：

```
if(condition1)
{
    NavigateService.Navigate(new Uri("/Today.xaml",UriKind.Relative));
}
else if(condition2)
{
    // Navigate to a different Uri
} 
```

这会将用户直接导航到下一页。

在那之后，我相信如果按下后退按钮而不是转到上一页，您会希望应用程序退出。为此，您必须将以下代码放入刚刚导航到的页面的**“已加载”方法中：**

```
while (NavigationService.BackStack.Any())
{
    NavigationService.RemoveBackEntry();
} 
```

这将清除应用程序的 BackStack 并在按下后退按钮时允许应用程序退出。******

# mysql - 如何从 shell 脚本自动登录 MySQL？

> ID：13814413
> 
> 赞同：30
> 
> 时间：2012-12-11T05:50:48.607
> 
> 标签：mysql, bash, shell

我有一个带有密码的用户的 MySQL 服务器。我想在不指定密码的情况下在 shell 脚本中执行一些 SQL 查询，如下所示：

`config.sh`：

```
MYSQL_ROOT="root"
MYSQL_PASS="password" 
```

`mysql.sh`：

```
source config.sh
mysql -u$MYSQL_ROOT -p$MYSQL_PASS -e "SHOW DATABASES" 
```

如何在不指定`-p`and`-u`参数等的情况下简化整个过程以执行 SQL 查询？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-11T05:55:09.717

# 编写这些选项的替代方法。

你可以写

```
mysql -u "$MYSQL_ROOT" -p"$MYSQL_PASS" -e "SHOW DATABASES" 
```

> `--password=`如果给出 [password is]，则or`-p`和其后的密码之间不能有空格。如果未指定密码选项，则默认为不发送密码。

将空字符串作为单独的参数传递。不过，您在下面的评论表明客户仍会要求输入密码。可能它将空参数解释为数据库名称而不是密码。因此，您可以尝试以下方法：

```
mysql --user="$MYSQL_ROOT" --password="$MYSQL_PASS" -e "SHOW DATABASES" 
```

# .my.cnf 文件

但即使有办法，我仍然建议您改用`~/.my.cnf`文件。命令行上的参数可能包含在由 生成的进程列表中`ps -A -ocmd`，因此其他用户可以看到它们。`.my.cnf`另一方面，该文件可以（并且应该）只能由您（使用`chmod 0600 ~/.my.cnf`）读取，并将自动使用。让该文件包含以下几行：

```
[client]
user=root
password= 
```

然后一个简单的`mysql -e "SHOW DATABASES"`就足够了，因为客户端将从该文件中获取其凭据。

见[6.1.2.1。密码安全的最终用户指南，了解](http://dev.mysql.com/doc/refman/5.6/en/password-security-user.html)您可以提供密码的各种方式，以及它们各自的优缺点。见[4.2.3.3。使用选项文件](http://dev.mysql.com/doc/refman/5.6/en/option-files.html)获取有关此`.my.cnf`文件的一般信息

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-31T17:35:50.660

正如 MvG 所建议的（在 MySQL 手册[4.2.2 连接](http://dev.mysql.com/doc/refman/5.5/en/connecting.html)和[6.1.2.1 安全指南](http://dev.mysql.com/doc/refman/5.5/en/password-security-user.html)中推荐），您应该使用文件。命令行上的密码可能不安全，因为 ps 可能会将其显示给其他用户。该文件不必是 .my.cnf，可以是临时文件中脚本的临时选项文件：

```
OPTFILE="$(mktemp -q --tmpdir "${inname}.XXXXXX")$"
trap 'rm -f "$OPTFILE"' EXIT
chmod 0600 "$OPTFILE"
cat >"$OPTFILE" <<EOF
[client]
password="${MYSQL_PASS}"
EOF
mysql --user="$MYSQL_ROOT" --defaults-extra-file="$OPTFILE" -e "SHOW DATABASES" 
```

第一行创建一个安全的临时文件，然后放置选项然后使用它。陷阱将保护您形成 OPTFILE，以防中断。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-11T06:00:27.010

试试这个：

```
if [ $MYSQL_PASS ]
then
  mysql -u "$MYSQL_ROOT" -p"$MYSQL_PASS" -e "SHOW DATABASES"
else
  mysql -u "$MYSQL_ROOT" -e "SHOW DATABASES"
fi 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-01-21T01:10:20.333

## 这是一个小 bash 脚本，您可以使用它来非常快速地获取 shell

它会打开一个外壳，以便您可以手动执行查询。很方便。

```
 #!/bin/bash
  DB_USER='your_db_username'
  DB_PASS='your_password'
  DB='database_name'
  echo 'logging into db $DB as $DB_USER'
  mysql -u "$DB_USER" --password="$DB_PASS" --database="$DB" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-07T16:19:38.493

要使用 Debian GNU/Linux 发行版（如 Ubuntu、Xubuntu、Linux Mint、gNewSense 等）自动登录 MySQL，您只需使用`/etc/mysql/debian.cnf`包含有效超级用户凭据的现有文件即可。

因此，您可以尝试使用以下简单命令自动登录：

```
sudo mysql --defaults-file=/etc/mysql/debian.cnf 
```

如果可行，为避免记住上述命令，您还可以创建一些 Bash 别名。您可以在用户终端中粘贴这些命令：

```
echo ''                                                                       >> ~/.bashrc
echo "# Auto-login in MySQL"                                                  >> ~/.bashrc
echo "# From https://stackoverflow.com/a/33584904/3451846"                    >> ~/.bashrc
echo "alias mysql='sudo mysql --defaults-file=/etc/mysql/debian.cnf'"         >> ~/.bashrc
echo "alias mysqldump='sudo mysqldump --defaults-file=/etc/mysql/debian.cnf'" >> ~/.bashrc
. ~/.bashrc 
```

然后只需键入以下内容即可自动登录：

```
mysql 
```

# java - 多线程变量访问

> ID：13814416
> 
> 赞同：2
> 
> 时间：2012-12-11T05:51:03.700
> 
> 标签：java, android, multithreading

我正在运行两个单独的线程（Android SDK）一个主线程和另一个计算数字输入传感器上状态变化的数量。我希望访问主线程中的状态更改计数以将数据发送到其他地方。我是否能够挂起传感器线程，使用 getter 传递值，然后恢复线程？我还想在采样后重置计数器（使用设置器？）。

实现这一点的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:20:38.127

您应该使用 synchronized 关键字，这可以保证您的代码和平只被一个线程同时访问。这是一个包含更多详细信息的链接，描述了与您类似的用例：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:35:15.180

这类似于生产者消费者问题。您可以有一个单一长度的阻塞队列。

**主线程——消费者**

**其他线程（计算状态变化）--producer**

*解决生产者消费者问题的Java API：* **BlockingQueue**

读取其他线程中的值，并将其放入 BlockingQueue(size 1)。主线程将检查队列并读取值。读取值后，“其他线程”可以再次输入新值。这将保证您的值被主线程读取然后重置。

API：[http ://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:11:10.457

如果计数是`int`，您可以从主线程访问它而不会出现问题。

# java - java中可以使用设备文件COMn进行串行通信吗

> ID：13814420
> 
> 赞同：0
> 
> 时间：2012-12-11T05:51:26.237
> 
> 标签：java, windows, serial-communication

我正在寻找一种在不更改我的 java 安装的情况下与 USB 调制解调器进行串行通信的方法。它必须在linux和windows上。

在 linux 上，我可以使用 bash 读写 /dev/ttyUSB1。在 Windows 上，我尝试将 FileInputStream+FileOutputStream 设置为名为“COM3”的设备文件。我可以制作 FileInputStream 或 FileOutputStream。不是都。

有没有办法在java中使用文件api进行串行通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:57:50.857

RxTx 库是“标准”：[http](http://rxtx.qbang.org/wiki/index.php/Main_Page) ://rxtx.qbang.org/wiki/index.php/Main_Page并且在所有平台上运行良好。我认为这是在 Windows 上使用 Java 进行串行 IO 的唯一方法。Linux 系统之所以有效，是因为它使用了透明的驱动程序。

甚至我也发现了这个适用于 Windows 的文件名约定：**\\.\COM3**（我从来没有使用过这个......）

# ios - 如何使用 GraphicContext 在 Objective C 中获得锥形线刷效果

> ID：13814421
> 
> 赞同：4
> 
> 时间：2012-12-11T05:51:34.177
> 
> 标签：ios, drawing, cgrect, brush

我正在做一个书法应用程序，并想修改下面的代码，以便当用户结束笔触时，线条会逐渐变细并变细，就像使用真正的书法笔（轻弹效果）一样。我知道 touchesEnded 可能是执行此操作的更好方法，但是我只是想知道在 Xcode for Objective C 的 UIKit 中使用 CGRect 或 GraphicsContext 以编程方式在笔画结束时以编程方式制作此轻弹的最佳方法是什么。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
mouseSwiped = YES;

UITouch *touch = [touches anyObject];
currentPoint = [touch locationInView:self.view];

UIGraphicsBeginImageContext(CGSizeMake(320, 568));
[drawImage.image drawInRect:CGRectMake(0, 0, 320, 568)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0, 0, 0, 1);
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextStrokePath(UIGraphicsGetCurrentContext());

[drawImage setFrame:CGRectMake(0, 0, 320, 568)];
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
lastPoint = currentPoint;

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
//what code do I put here to get the flick effect - what CGGetContext Parameter
//may be applicable or what programming technique may help with this.     

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:12:45.923

这可能过于简化，但它应该引导你朝着正确的方向前进。我将只制作一个三角形，但您最终可以添加贝塞尔曲线以使效果更逼真。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
//what code do I put here to get the flick effect - what CGGetContext Parameter
//may be applicable or what programming technique may help with this. 

    UIGraphicsBeginImageContext(CGSizeMake(320, 568));
    [drawImage.image drawInRect:CGRectMake(0, 0, 320, 568)];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 5.0);
    CGContextSetRGBFillColor(context, 0, 0, 0, 1);
    CGContextBeginPath(context);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(context, currentPoint.x, currentPoint.y);
    CGContextClosePath(context);
    CGContextStrokePath(context);

    //Normalized directionality
    float lineLength = sqrt((currentPoint.x - lastPoint.x)*(currentPoint.x - lastPoint.x) + (currentPoint.y - lastPoint.y)*(currentPoint.y - lastPoint.y));
    float dx = (currentPoint.x - lastPoint.x)/lineLength;
    float dy = (currentPoint.y - lastPoint.y)/lineLength;

    //Now make a triangle
    CGContextBeginPath(context);

    //2.5 is from 1/2 of your line width (5)
    CGContextMoveToPoint(context, currentPoint.x + 2.5*dy, currentPoint.y - 2.5*dx);

    //This 10 is completely arbitrary, the length your taper is going to be.
    //Ideally this will be proportional to your last line segment length, longer if their finger is moving faster...
    CGContextAddLineToPoint(context, currentPoint.x + 10*dx, currentPoint.y + 10*dy);

    //Now the last tip of the triangle
    CGContextMoveToPoint(context, currentPoint.x - 2.5*dy, currentPoint.y + 2.5*dx);
    CGContextClosePath(context);
    CGContextFillPath(context);

    [drawImage setFrame:CGRectMake(0, 0, 320, 568)];
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

现在，为了使这个更酷，您可以添加人正在绘制的曲线的计算，并在他们弯曲的方向创建带有贝塞尔曲线的“三角形”锥度。计算起来真的很有趣。

# c# - 如何使用 System.DirectoryServices.ActiveDirectory.Domain 类获取域别名

> ID：13814423
> 
> 赞同：5
> 
> 时间：2012-12-11T05:51:43.103
> 
> 标签：c#, active-directory, alias, domain-name

我们有一个全名域名，例如**long-domainname.com**；此域名替换为别名**short**。可以使用 检索此别名`netapi32.dll`，如下所示：

```
[DllImport("Netapi32.dll")]
static extern int NetApiBufferFree(IntPtr Buffer);

// Returns the domain name the computer is joined to, or "" if not joined.
public static string GetJoinedDomain()
{
    int result = 0;
    string domain = null;
    IntPtr pDomain = IntPtr.Zero;
    NetJoinStatus status = NetJoinStatus.NetSetupUnknownStatus;
    try
    {
        result = NetGetJoinInformation(null, out pDomain, out status);
        if (result == ErrorSuccess &&
            status == NetJoinStatus.NetSetupDomainName)
        {
            domain = Marshal.PtrToStringAuto(pDomain);
        }
    }
    finally
    {
        if (pDomain != IntPtr.Zero) NetApiBufferFree(pDomain);
    }
    if (domain == null) domain = "";
    return domain;
} 
```

此方法返回**排序**值。但是使用`System.DirectoryServices.ActiveDirectory.Domain`该类及其`Name`属性，我得到**了 long-domainname.com**值。在调试模式下搜索属性，我找不到任何**短**值字段或属性。`System.DirectoryServices.ActiveDirectory.Domain`上课可以吗？或者可能有其他类的`System.DirectoryServices`命名空间？如何在不导入外部 *.dll 的情况下获取**短**域名值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T06:07:10.360

```
private string GetNetbiosDomainName(string dnsDomainName)
    {
        string netbiosDomainName = string.Empty;

        DirectoryEntry rootDSE = new DirectoryEntry("LDAP://RootDSE");

        string configurationNamingContext = rootDSE.Properties["configurationNamingContext"][0].ToString();

        DirectoryEntry searchRoot = new DirectoryEntry("LDAP://cn=Partitions," + configurationNamingContext);

        DirectorySearcher searcher = new DirectorySearcher(searchRoot);
        searcher.SearchScope = SearchScope.OneLevel;
        searcher.PropertiesToLoad.Add("netbiosname");
        searcher.Filter = string.Format("(&(objectcategory=Crossref)(dnsRoot={0})(netBIOSName=*))", dnsDomainName);

        SearchResult result = searcher.FindOne();

        if (result != null)
        {
            netbiosDomainName = result.Properties["netbiosname"][0].ToString();
        }

        return netbiosDomainName;
    } 
```

# python - Python Linux dmidecode，如何通过解析获取硬件信息？

> ID：13814428
> 
> 赞同：4
> 
> 时间：2012-12-11T05:52:07.357
> 
> 标签：python, linux

我正在使用 Fedora 17 64bit，安装了[dmidecode](http://linux.die.net/man/8/dmidecode)和[python-dmidecode](http://www.ohloh.net/p/python-dmidecode)，在搜索有关如何使用 python-dmidecode 的文档时，我还没有找到任何东西。我在浏览源代码时找到了一个示例，但没有别的。任何熟悉这个模块以及如何在 python 中访问它的人？您可以参考我的任何文档都会有所帮助。

我正在尝试获取 Fedora 17 中的硬件规格：

**在使用管理命名空间的 C# 中，我能够获得以下所有内容：** ***在 Linux 中是否可以通过 Python 获得相同的内容？***

```
BIOS
 - Name

Motherboard
 - Manufacturer
 - Model

CPU
 - Name
 - Architecture
 - NumberOfCores
 - CurrentClockSpeed

Memory
 - Name
 - Manufacturer
 - MemoryType
 - Speed
 - DeviceLocator
 - Capacity
 - Model

Video
 - Name
 - VideoProcessor
 - AdapterRam
 - VideoMemoryType
 - VideoArchitecture
 - VideoMode

Network
 - Name
 - ProductName
 - Manufacturer
 - PhysicalAdapter

HardDrive
 - Index
 - Description
 - InterfaceType
 - Manufacturer
 - Model
 - Size
 - Partitions 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T19:30:56.847

想通了，通过使用以下我们可以获得我需要的所有数据：

```
import dmidecode

def getBIOS():
    for v in dmidecode.bios().values():
        if type(v) == dict and v['dmi_type'] == 0:
            BIOSdict["Name"] = str((v['data']['Vendor']))
            BIOSdict["BuildNumber"] = str((v['data']['Version']))
            BIOSdict["SoftwareElementID"] = str((v['data']['BIOS Revision'])) 
```

我们迭代`dmidecode.bios().values()`查找每个数据字段。我们可以通过参考下表来了解使用哪个函数。这也位于此[链接](https://manpages.ubuntu.com/manpages/cosmic/man8/dmidecode.8.html)。

然后我们检查类型`'v'`以确保它是 a `dictionary` *（这就是我在我的例子中使用的）*并且我们检查`'dmi_type`' 是我们正在搜索的正确代码。

例如：

```
 Type   Information
       ----------------------------------------
          0   BIOS
          1   System
          2   Base Board
          3   Chassis
          4   Processor
          5   Memory Controller
          6   Memory Module
          7   Cache
          8   Port Connector
          9   System Slots
         10   On Board Devices
         11   OEM Strings
         12   System Configuration Options
         13   BIOS Language
         14   Group Associations
         15   System Event Log
         16   Physical Memory Array
         17   Memory Device
         18   32-bit Memory Error
         19   Memory Array Mapped Address
         20   Memory Device Mapped Address
         21   Built-in Pointing Device
         22   Portable Battery
         23   System Reset
         24   Hardware Security
         25   System Power Controls
         26   Voltage Probe
         27   Cooling Device
         28   Temperature Probe
         29   Electrical Current Probe
         30   Out-of-band Remote Access
         31   Boot Integrity Services
         32   System Boot
         33   64-bit Memory Error
         34   Management Device
         35   Management Device Component
         36   Management Device Threshold Data
         37   Memory Channel
         38   IPMI Device
         39   Power Supply

       Keyword     Types
       ------------------------------
       bios        0, 13
       system      1, 12, 15, 23, 32
       baseboard   2, 10
       chassis     3
       processor   4
       memory      5, 6, 16, 17
       cache       7
       connector   8
       slot        9 
```

如果我们想获取 BIOS 信息，我们将引用它，`v['dmi_type'] == 0`这将返回一个字典。然后我们可以创建自己的字典（在我的例子中`BIOSdict = []`）并添加键和值，如下所示：

```
BIOSdict["Name"] = str((v['data']['Vendor'])) 
```

# javascript - jQuery .css 不能仅在 Chrome 中工作

> ID：13814436
> 
> 赞同：0
> 
> 时间：2012-12-11T05:53:02.847
> 
> 标签：javascript, jquery, css

与这里的许多帖子相反，我下面的脚本在 Safari 和 Firefox 中运行良好，但在 Chrome 中运行良好。div“#bg-4-1”应该与页面一起加载，z-index 为 -1000，然后，当单击“h3#bubbleh3”时（我知道，命名失控），z-指数变为 4。

这在其他任何地方都非常有效。我已经把整个东西都包起来了，`$(window).load(function()`但这并没有改变任何东西。

这是代码：

```
 <script>
        $(function() {
            $( "#accordion" ).accordion({
                collapsible: true,
                autoHeight: false,
                active: false
            });
            $(document).ready(function() {
                $(".ui-accordion").bind("accordionchange", function(event, ui) {
                  if ($(ui.newHeader).offset() != null) {
                    ui.newHeader, // $ object, activated header
                    $("html, body").animate({scrollTop: ($(ui.newHeader).offset().top)-0}, 500);
                  }
                });
             });
            $("h3#bubbleh3").on("click", function(event, ui) {   
                setTimeout(function() {            
                    if ($("section#bubble").css("display") === "none") {
                       $("#bg4-1").css("z-index", "-1000");
                    } else if ($("section#bubble").css("display") === "block") {
                       $("#bg4-1").css("z-index", "4");
                    }
                }, 350);
            });
            $("h3#mermaidh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#thingstellh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#sumpartsh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#knivesh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#redgreenh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#resurrecth3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
        });
    </script> 
```

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T07:04:45.437

是的，这就是这个[答案](https://stackoverflow.com/a/8201970/1716774)的相同原因。您的方法对非定位元素没有影响，即元素必须是绝对定位、相对定位或固定的。

```
 <script>
        $(function() {
            $( "#accordion" ).accordion({
                collapsible: true,
                autoHeight: false,
                active: false
            });
            $(document).ready(function() {
                 $("#bg4-1").css("display","none");
                $(".ui-accordion").bind("accordionchange", function(event, ui) {
                  if ($(ui.newHeader).offset() != null) {
                    ui.newHeader, // $ object, activated header
                    $("html, body").animate({scrollTop: ($(ui.newHeader).offset().top)-0}, 500);
                  }
                });
             });
            $("h3#bubbleh3").on("click", function(event, ui)
             {   
                setTimeout(function() {            
                    if ($("section#bubble").css("display") === "none") {

                       $("#bg4-1").css("z-index", "-1000");
                       $("#bg4-1").css("display","none");
                    } else if ($("section#bubble").css("display") === "block") {
                         $("#bg4-1").css("display","block");
                       $("#bg4-1").css("z-index", "4");
                    }
                }, 350);
            });
            $("h3#mermaidh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#thingstellh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#sumpartsh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#knivesh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#redgreenh3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
            $("h3#resurrecth3").on("click", function(event, ui) {   
               $("#bg4-1").css("z-index", "-1000");
            });
        }); 
```

只需更改这些行，它在我的 chrome 中工作正常，检查一下。您可以参考[我的博客](http://vivekdragon.wordpress.com/)了解更多关于这些问题的信息。我正在里面写一篇文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:34:05.093

我已经确认这是这里的交易：[z-index not proper rendering on iPad and Google Chrome 22](https://stackoverflow.com/questions/12606155/z-index-not-properly-rendered-on-ipad-and-google-chrome-22)

堆叠上下文。在 Chrome 中，“在文档中的任何位置，任何元素都可以形成堆叠上下文

```
the root element (HTML),
positioned (absolutely or relatively) with a z-index value other than "auto",
elements with an opacity value less than 1\. (See the specification for opacity) 
```

" 在我的例子中，div#bg4-1 位于一个固定的 div 内，因此 kills 能够退到整个页面的后面。Bullocks。

# linux - lftp pget ...不打开多个线程

> ID：13814443
> 
> 赞同：1
> 
> 时间：2012-12-11T05:53:22.010
> 
> 标签：linux, bash, ubuntu, lftp

我正在尝试`lftp`通过 ftp 下载一个非常大的文件。但`pget`据我所知，仅打开一个 TCP 连接`netstat -na`。这是我的命令和调试输出：

脚本：

```
open -u username,password aftp.linksynergy.com
pget -n 5 /36342_2923873_mp.txt.gz -o buy.com.csv.gz 
```

跑：

```
user@db1:/mnt/tmp/lftp_test$ lftp -d -f lfscript
---- Resolving host address...
---- 1 address found: 63.123.248.17
---- Connecting to aftp.linksynergy.com (63.123.248.17) port 21
<--- 220 gcws3002.private.linksynergy.com FTP server (Version wu-2.6.2-9) ready.
---> FEAT
<--- 530 Please login with USER and PASS.
---> AUTH TLS
<--- 500 AUTH command not supported.
---> USER username
<--- 331 Password required for username.
---> PASS *******
<--- 230 User username logged in.
---> FEAT
<--- 500 'FEAT': command not understood.
---> PWD
<--- 257 "/" is current directory.
---> TYPE I
<--- 200 Type set to I.
---> SIZE /36342_2923873_mp.txt.gz
<--- 550 /home/client/username//36342_2923873_mp.txt.gz: not a plain file.
---> MDTM /36342_2923873_mp.txt.gz
<--- 550 //36342_2923873_mp.txt.gz: No such file or directory.
---> PASV
<--- 227 Entering Passive Mode (63,123,248,17,29,90)
---- Connecting data socket to (63.123.248.17) port 7514
---- Data connection established
---> RETR /36342_2923873_mp.txt.gz
<--- 150 Opening BINARY mode data connection for /home/upload/upload_bin/affiliate_download/get_merchandiser_file.pl. 
```

* * *

请注意，多线程下载确实可以在我测试的另一台服务器（用于测试的 apache 镜像站点）上运行，所以我敢打赌，在这种特殊情况下，这只是 FTP 服务器不支持的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T19:48:39.570

你说得很对。从输出中可以看出，服务器不响应 FEAT 命令，该命令用于确定服务器是否支持 REStart 命令（RFC3659 第 5.4 节）。

并行 FTP 下载基于假装从 N 个点重新开始下载，从每个点读取文件的 1/N，然后组合结果。由于服务器不支持 REST，因此客户端无法执行此操作。

# hibernate - 得到 org.hibernate.hql.internal.ast.QuerySyntaxException 错误

> ID：13814451
> 
> 赞同：0
> 
> 时间：2012-12-11T05:54:10.323
> 
> 标签：hibernate, hql, hibernate-mapping

如上所述，我遇到了上面提到的异常。

你能帮忙吗？谢谢

* * *

我查看了各种指南/教程，但它们并没有真正告诉您运行此类示例所需的映射是什么。或者我看到的示例实际上并没有涉及检索数据的任何内容。它主要是关于插入/更新和删除。

**jboss 文档中的一个示例**（http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch16.html）

```
select foo
from Foo foo, Bar bar
where foo.startDate = bar.date 
```

**这是我的 HQL：**

```
sessionFactory.getCurrentSession().createQuery("from Staff staff, Url url where (staff.id = url.id (+))"); 
```

这是我的映射 XML

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="org.flinders.staffdirectory.models.database.Staff" table="teld_summary">
        <id name="id" column="telsumm_id" type="string" />
        <property name="title" column="telsumm_name_title" type="string" />
        <property name="firstname" column="telsumm_preferred_name" type="string" />
        <property name="surname" column="telsumm_surname" type="string" />
        <one-to-one name="url" class="org.flinders.staffdirectory.models.database.Url" />
    </class>

    <class name="org.flinders.staffdirectory.models.database.Url" table="teld_urls">
        <id name="id" column="telurl_id">
            <generator class="foreign">
                <param name="property">staff</param>
            </generator>
        </id>
        <one-to-one name="staff" class="org.flinders.staffdirectory.models.database.Staff" constrained="true" />
        <property name="url" column="url" />
    </class>
</hibernate-mapping> 
```

**我的错误**

```
org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: ) near line 1, column 142 [from org.flinders.staffdirectory.models.database.Staff staff, org.flinders.staffdirectory.models.database.Url url where (staff.id = url.id (+)) and (staff.surnameSearch like 'A%') order by surname, firstname]
    org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:54)
    org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:47)
    org.hibernate.hql.internal.ast.ErrorCounter.throwQueryException(ErrorCounter.java:79)
    org.hibernate.hql.internal.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:276)
    org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:180)
    org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105)
    org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
    org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)
    org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)
    org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1735)
    org.flinders.staffdirectory.dao.StaffDAOImpl.searchForStaff(StaffDAOImpl.java:49)
    org.flinders.staffdirectory.services.SearchServiceImpl.searchForStaff(SearchServiceImpl.java:26)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
    org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    $Proxy13.searchForStaff(Unknown Source)
    org.flinders.staffdirectory.controllers.SearchController.showSearchResults(SearchController.java:33)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:604)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

**我的员工班**

```
package org.flinders.staffdirectory.models.database;

import java.util.Date;

import org.flinders.staffdirectory.models.database.Url;

public class Staff {
    private String id;
    private String title;
    private String firstname;
    private String surname;

    private Url url;

    public String getId() {
        return id;
    }

    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }

    public String getFirstname() {
        return firstname;
    }
    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    public String getSurname() {
        return surname;
    }
    public void setSurname(String surname) {
        this.surname = surname;
    }

    public Url getUrl() {
        return url;
    }
    public void setUrl(Url url) {
        this.url = url;
    }
} 
```

**我的网址类**

```
package org.flinders.staffdirectory.models.database;

import org.flinders.staffdirectory.models.database.Staff;

public class Url {
    private String id;
    private String url;

    private Staff staff;

    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }

    public String getUrl() {
        return url;
    }
    public void setUrl(String url) {
        this.url = url;
    }

    public Staff getStaff() {
        return staff;
    }
    public void setStaff(Staff staff) {
        this.staff = staff;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:42:14.983

如果您尝试进行右连接，请删除 (+) 并尝试

```
sessionFactory.getCurrentSession().createQuery("from Staff staff right join Url url where (staff.id = url.id)"); 
```

# android - VideoView 上的 android.view.WindowLeaked

> ID：13814462
> 
> 赞同：1
> 
> 时间：2012-12-11T05:55:19.420
> 
> 标签：android, android-videoview

我在 android 中使用 VideoView 时遇到错误“android.view.WindowLeaked”。当我运行我的应用程序时 videoview not run 给出消息“视频无法播放”并且 logcat 给出“android.view.WindowLeaked”错误

# asp.net-mvc - 在使用 WebAPI 和完全客户端页面时使用 ASP.Net MVC

> ID：13814463
> 
> 赞同：1
> 
> 时间：2012-12-11T05:55:25.017
> 
> 标签：asp.net-mvc, model-view-controller, rest, asp.net-mvc-4, asp.net-web-api

我们正在构建一个完整的客户端应用程序，其中数据来自通过 ASP.Net WebAPI 交付的 REST API。对于客户端应用程序，使用 MVC 仍然有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:25:43.503

[我认为即使对于单页应用程序](http://en.wikipedia.org/wiki/Single-page_application)(SPA) ，使用 MVC 仍然有优势。一些优点是内置的身份验证/授权、路由、渲染初始页面的方式更加灵活、如果 Web API 和 MVC 在同一个项目中，则消除了 AJAX 的跨域问题等等。

对 SPA 和 ASP.NET MVC 非常了解的人是 John Papa。查看他的[一篇关于可用于 SPA 的新 VS 模板的博客文章](http://www.johnpapa.net/insidespatemplate/)。John Papa 在他的博客上提供了很多关于使用 ASP.NET MVC 开发 SPA 的有用技巧，并且他[在 Pluralsight 上有一个很棒的培训课程](http://pluralsight.com/training/courses/TableOfContents?courseName=spa&highlight=john-papa_spa-m6-basics%2a1#spa-m6-basics)。是的，他将 MVC 与 Web API 结合使用。它们被设计为一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:00:48.137

首先让我们记住 ASP.NET MVC 和 ASP.NET Web API 的用途。ASP.NET MVC 的主要目的是为您提供一个现成的 HTML。另一方面，ASP.NET Web API 的主要目的是为您提供数据。

因此，在我看来，在以下情况下，您可以同时使用 ASP.NET MVC 和 ASP.NET Web API：

1.  已经准备好使用复杂的 ASP.NET MVC 控件并希望重用它。
2.  有一个复杂的逻辑来处理一些数据，因此对于性能问题，最好在服务器端处理它。
3.  您必须使用一些特定的基于服务器的 ASP.NET 功能，例如 Http 处理程序、文件上传等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T07:21:39.967

本质上你不需要 MVC。听起来您想创建一个单页应用程序。您所需要的只是一个 index.html 来加载您的 app.js，然后就可以使用了。

MVC 不会增加任何额外的价值。

即使涉及到复杂的场景，您也可以创建更高级的 Web Api 方法来为您的应用程序提供服务。您不限于开箱即用的基本 CRUD WebApi 方法。

你甚至可以在 api 控制器周围放置 ActionFilters 和 DelegatingHandlers 之类的东西，以处理错误、元数据和各种事情。

# azure - azure webrole 连接本地设备

> ID：13814465
> 
> 赞同：0
> 
> 时间：2012-12-11T05:55:35.473
> 
> 标签：azure, driver, local, webrole

我在 Azure 中开发了一个 webrole 运行，该 webrole 需要从一台设备获取输入。webrole 在本地仿真中运行时可以与本地设备进行良好的通信。但是在 Azure 中部署时，webrole 无法从本地设备获取输入。

顺便说一句，设备的驱动程序是 c++ 32bit dll，但我将它变形为 c#，因为 webrole 是用 c# 编写的。再次，webrole 和设备在本地计算机上通信良好，但是当 webrole 部署在 Azure 上时似乎连接失败。

请指教。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:31:09.533

根据您的描述，您的设备似乎已连接到本地 PC。当您在本地运行时，Web 角色将在您的本地 PC 上运行，因此该设备可用。当您将 webrole 部署到云中时，它无法再看到该设备，因为它不再在您的本地 PC 上运行。

此外，在运行 Web 角色的云 VM 中安装驱动程序也无济于事，因为该设备仍连接到本地 PC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:11:48.907

如果您的设备已插入本地 PC 并通过（例如 USB）与您的应用程序通信，则无法从 azure 使用它。由于您无法从 azure VM 连接本地 USB，也无法将设备运送到 MS 并插入运行您的应用程序的 azure VM。

但如果你真的想要，它是可能的。首先，您需要在设备前面创建一个 Web 服务接口，以便可以通过网络使用它。然后，您可以尝试从 azure 使用三种方法。

1.  使用服务总线中继来公开您的 Web 服务。然后，您的 azure 应用程序可以从云端与此服务通信，然后与您的设备通信。
2.  使用 Windows Azure 连接。我不确定它是否仍然可用，但您可以使用它在您的 PC 和 azure VM 之间创建 IP-sec 连接。然后，您可以使用本地 IP 与您的 Web 服务进行通信。
3.  使用新的 Windows Azure 虚拟网络。我从未尝试过此功能，但它应该可以工作。

所以本质上，你必须通过引入一个网络服务层来打开你的本地设备。

# javascript - 关闭库键事件监听不起作用

> ID：13814466
> 
> 赞同：0
> 
> 时间：2012-12-11T05:55:54.227
> 
> 标签：javascript, google-closure

我尝试使用以下代码使用 google 闭包库来监听关键事件，但代码不起作用。

```
goog.require('goog.events.EventHandler');
goog.require('goog.events.EventType');
goog.require('goog.dom');
goog.require('goog.editor.Command');
goog.require('goog.editor.Field');
goog.require('goog.editor.Field.EventType');

-----------------------below--not worked------------------------------------------

var myField = new goog.editor.Field('editMe');

goog.events.listen(myField, goog.events.EventType.KEYPRESS,
         function(){alert('12')}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-29T13:53:12.050

您必须在相关 DOM 元素上监听事件：

```
goog.events.listen(myField.getElement(), goog.events.EventType.KEYPRESS, function(){alert('12')}); 
```

# javascript - 在 AJAX 响应后使用 JavaScript 重定向到页面

> ID：13814467
> 
> 赞同：0
> 
> 时间：2012-12-11T05:55:55.607
> 
> 标签：javascript, jquery

我面临一个有趣的问题：

目前我有一个按钮，上面写着“打印”，它位于一系列页面的末尾，用户可以在其中输入信息、进行选择并获得独特的结果。

当他们按下此按钮时，表示应用程序状态的数据将通过 JQuery 的[`.post()`](http://api.jquery.com/jQuery.post/). 一旦目标脚本处理该数据并根据唯一 ID 将其存储在数据库中，该 ID 就会被发送回成功处理程序。然后在成功处理程序中使用该 ID 来打开一个新窗口，该窗口将下拉他们发送的数据并以可打印的方式显示它。

```
$.post("api/PrintJob.php", applicationStateJSON, function(response)
{
    window.open("print/?job=" + response.token);

}, "json"); 
```

因为`window.open()`调用不是直接在点击处理程序中，*所以弹出窗口被阻塞是可以理解的*。

我不能简单地使用`window.location.href = ?;`，因为需要维护应用程序的状态，以防用户想要后退一步并进行一些更改等。

目前我唯一的解决方案是在成功处理程序中显示一个辅助按钮，然后启动打印窗口。但是，我更愿意保留当前的感觉并在新选项卡/窗口/弹出窗口/任何可能的情况下打开窗口，而不会被阻止。

也许有一种方法可以在我最初单击打印时将弹出窗口启动为空，然后在数据到达数据库时重新加载它？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:04:24.373

鉴于这种情况，一个选项可能是隐藏第二个按钮并在令牌返回后触发点击。

```
var token;

$('#hiddenbutton').click(function(){
     window.open("print/?job=" + token);
 }):

$.post("api/PrintJob.php", applicationStateJSON, function(response)
{
    token = response.token;
    $('#hiddenbutton').trigger('click');
}, "json"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:07:12.670

我的建议是在第一次点击时打开一个窗口，然后从新打开的窗口发布一个帖子。在新打开的窗口中收到帖子的响应。此响应可用于使用 JS/JQuery 绘制新窗口。

# c# - 以编程方式创建 InstallShield 包

> ID：13814473
> 
> 赞同：2
> 
> 时间：2012-12-11T05:56:30.483
> 
> 标签：c#, .net, installation, installshield

我一直在互联网上搜索使用 c# 创建 InstallShield 设置的方法。我知道有一个“InstallShield 自动化库”可供它使用。但是，到目前为止，我看到的所有示例都只是自动化了构建已经创建的项目的任务。

[使用 c# 安装Shield Automation](http://codecontext.blogspot.in/2012/04/installshield-automation-using-c.html)

但是我需要的是：

1.  我将首先手动创建一个 InstallShield 项目 (.ISM)，指定文件夹结构等详细信息
2.  然后，我想创建一个程序，该程序将使用新版本名称复制 ISM 文件，将文件添加到新创建的项目文件中，然后构建它。

请让我知道它是否可能以及如何进行。

**编辑：**我才知道在安装过程中创建的目录称为功能。所以这个问题可能被解读为“如何向项目文件添加功能并将文件添加到该功能”

**EDIT2**我在这里找到了一种迭代它的方法：http:
[//blogs.flexerasoftware.com/installtalk/2010/12/getting-started-with-installshield-automation-and-c.html](http://blogs.flexerasoftware.com/installtalk/2010/12/getting-started-with-installshield-automation-and-c.html)
也许这可以帮助某人准备答案.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:30:05.473

简单来说，在 MSI 世界中，一个文件属于一个组件。如果安装了与组件关联的功能，则将安装该文件。

因此，您的任务是创建一个组件，将文件添加到其中并将其与功能相关联。

1.  创建 ISWiProject 对象（比如 proj）。
2.  调用 proj.OpenProject 并打开现有项目。
3.  调用 proj.AddComponent 并接收 ISWiComponent 对象（比如 comp）。
4.  设置组件的目标文件夹（使用 comp.Destination 属性）。
5.  调用 comp.AddFile 以指定文件的源位置。
6.  将组件与现有功能相关联。例如，如果您有一个名为 feature1 的功能，请使用以下内容： proj.ISWiFeatures.Item("feature1").AttachComponent(comp)
7.  使用 proj.ProductVersion 根据您的需要更改安装程序版本。

您可以通过自动化界面做很多事情。请参阅此处的文档：http: [//helpnet.installshield.com/installshield16helplib/IHelpAutoISWiProject.htm](http://helpnet.installshield.com/installshield16helplib/IHelpAutoISWiProject.htm)

--贾格

# sql - SQL查询where条件

> ID：13814475
> 
> 赞同：0
> 
> 时间：2012-12-11T05:56:38.213
> 
> 标签：sql, conditional-statements, where

我有一条记录，其中包含以下数据： id=123 ；请求的=杰克逊；验证状态=空；

我希望上面的记录作为以下查询的结果。但是，它返回我 0 行。

```
$sql="SELECT * FROM spr WHERE requested_by IS NOT NULL AND verify_status!='Accept'"; 
```

我想选择“接受”以外的验证状态的所有记录。

我想知道 verify_status!='Accept' 有什么问题吗？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:58:52.793

您需要使用以下命令处理这些行`NULL` `verify_status`：

```
$sql="SELECT * FROM spr WHERE requested_by IS NOT NULL 
       AND (verify_status IS NULL OR verify_status != 'Accept'") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:06:04.373

任何比较`NULL`都是错误的，因此`NULL`必须明确处理字段。

您可以使用或-

`where verify_status is null or verify_status != 'Accept'`

或者，您可以使用`coalesce`转换`NULL`为不同的值

`where coalesce(verify_status, 'xxNULLxx') != 'Accept'`

（请注意，`coalesce`以这种方式使用函数，这样您的查询就不能使用任何位于`verify_status`.

# java - 没有为命名空间 / 和操作名称 CreateTicket 映射的操作

> ID：13814478
> 
> 赞同：0
> 
> 时间：2012-12-11T05:56:59.650
> 
> 标签：java, struts

我收到以下错误，我用谷歌搜索了很多，得到了许多不同类型的解决方案，但无法解决。

我的堆栈跟踪

```
 SEVERE: Could not find action or result
There is no Action mapped for namespace / and action name CreateTicket. - [unknown location]
    at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:186)
    at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:41)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:494)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:873)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:595) 
```

我的 Struts.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <constant name="struts.devMode" value="true" />
    <constant name="struts.multipart.maxSize" value="20480000" />
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />

    <package name="default" extends="struts-default">
        <action name="CreateTicket" class="com.ticketservice.CreateTicket">
            <result name="success">Welcome.jsp</result>
            <result name="error">Login.jsp</result>
        </action>

    </package>
</struts> 
```

我的目录结构

![在此处输入图像描述](../Images/60ea9b296729bf56b7e50f8f4e8ca66e.png)

CreateTicket.java

```
package com.ticketservice;

import com.opensymphony.xwork2.ActionSupport;

public class CreateTicket extends ActionSupport {

    public String execute() {

       return "success";
    }
} 
```

欢迎.jsp

```
<p>done</p> 
```

登录.jsp

```
<p>not done</p> 
```

我创建了这个项目来学习 Struts，所以只想看看 struts.xml 到动作类的映射是如何完成的

我能够成功运行 localhost:8080/TicketSystem/index.html。
但是当我运行 localhost:8080/TicketSystem/CreateTicket.action 时。我得到了上述错误..

请帮我解决它。

问候， 马赫什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:11:10.150

我认为这是因为您尚未定义名称空间。

尝试这个。

`<package name="default" namespace="/" extends="struts-default">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:05:23.113

The reason I was getting this error was my build path. My build path was set to other directory not at `WEB-INF` classes. Doing this change, solved my problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T08:15:28.057

可能是您在 struts.xml 文件中犯了错误。所以这里有几种配置xml文件的方法。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
    <package name="default" extends="struts-default">
        <action name="helloWorld" class="controller.HelloWorld">
            <result name="success">/HelloWorld.jsp</result>

        </action>
    </package>
</struts> 
```

因此，如果您以这种方式执行此操作，只需确保您必须通过操作名称从 jsp 调用操作，您不需要编写会导致错误的 .action。这可能是您问题的理想答案。

我相信这会奏效。

# java - 通过url调用CXF webservice时如何传递参数

> ID：13814483
> 
> 赞同：1
> 
> 时间：2012-12-11T05:57:22.623
> 
> 标签：java, web-services, cxf

我创建了一个 CXF 网络服务示例：

```
@WebService
public interface InterfaceWebService {

    boolean doLogin(@WebParam(name="username")String username,@WebParam(name="password")String password);

} 
```

服务器代码：

```
public class WebServer {

    protected WebServer() throws Exception {
        // START SNIPPET: publish
        System.out.println("Starting Server");
        WebServiceImpl implementor = new WebServiceImpl();
        String address = "http://192.168.0.76:9000/sample";
        Endpoint.publish(address, implementor);
        // END SNIPPET: publish
    }

    public static void main(String args[]) throws Exception {
        new WebServer();
        System.out.println("Server ready...");

        Thread.sleep(5 * 60 * 5000);
        System.out.println("Server exiting");
        System.exit(0);
    }
} 
```

WebServiceImpl 类

```
@WebService(endpointInterface = "com.nextenders.services.InterfaceWebService",
serviceName = "sample")

public class WebServiceImpl  implements InterfaceWebService{    

    @Override
    public boolean doLogin(String username, String password) {
          //Here some business logic call
        return true;
    }

} 
```

现在我正在尝试通过以下网址调用此网络服务：http: **//192.168.0.76 :9000/sample/services/doLogin?username=abc&password=abc**

但我得到了 wsdl xml 结构。但我只需要特定的方法结果！！。我在这里做错了吗？如何在 CXF 网络服务中传递参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:20:03.813

问题已经解决了。我忘记输入服务名称并尝试访问直接方法。

**http://192.168.0.76:9000/sample/services/login_service/doLogin?username=abc&password=abc**

# web-services - 将 wsdl 与 mule 一起使用

> ID：13814486
> 
> 赞同：0
> 
> 时间：2012-12-11T05:57:56.927
> 
> 标签：web-services, wsdl, mule

我在服务器上有一个 Web 服务，它使用另一家公司（例如 A 公司）的 wsdl。

现在，我想在我的 web 服务中使用 mule 架构。我必须启动一个骡服务器。我的请求应该发送如下算法：

我的网络服务 -> mule 服务器 -> 公司 A 的 wsdl

关于回应：

A公司的wsdl -> mule server -> my web service

为此，我使用了“Web 服务代理模式”和“wsdl 重定向”。因此，通过完成这项工作，A 公司的 wsdl 重定向到了 mule 服务器上。我认为我没有正确使用 mule，因为我只是更改了 wsdl 的 url 地址。wsdl中有一部分：

```
<soap:address location=””&gt; 
```

和`<xsd:schema><xsd:import namespace=””&gt;`

这个位置和命名空间是A公司的url地址。当我从wsdl创建存根文件时，这个文件中有A公司的url地址，存根文件中有注释。

配置：

```
<pattern:web-service-proxy name="SOAP2SOAPFlow4"
  inboundAddress="http://localhost:8090/sample"
  outboundAddress="http://companyA.com/test"
  wsdlLocation="http://companyA.com/test.asmx?WSDL" /> 
```

在 Mule 独立 3.3.0 上运行。

我的工作有问题吗？我要改变什么？

# c++ - 将大小 <= N 的所有连续 0 位组翻转为 1s

> ID：13814489
> 
> 赞同：9
> 
> 时间：2012-12-11T05:58:11.187
> 
> 标签：c++, c, bit-manipulation

假设我有一个无符号的 M 位整数（其中 M 是 8、16、32、64 之一），其中包含各种 0 位运行：

...111 000 11 00 1 0000 1 0 1 00000 111...

给定一个数字 N，其中 0 <= N <= M，我想填充整数中所有大小为 <=N 的 0 组。因此，如果对于上述整数，我们给出 N=3，结果将是：

...111 **111** 11 **11** 1 0000 1 **1** 1 00000 111...

请注意，第 4 组和第 5 组零没有翻转，因为它们的大小 > 3。

我将如何使用 C/C++ 编写有效的实现？我想我可以做一些聪明的玩弄，但我不知道从哪里开始。我见过用于传播位模式的乘法，但不是通过这种可变长度检查。出于同样的原因，查找表似乎很痛苦。一个合适的减法 1 可以翻转一系列位，但弄清楚要减去什么看起来很棘手。

编辑：需要明确的是，虽然 M 在编译时是固定的，但 N 可以在运行时变化。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T06:22:26.953

尝试这样的事情：

```
x = ~x;
for (i=0; i<N; i++) x&=x/2;
for (i=0; i<N; i++) x|=x*2;
x = ~x; 
```

非操作是为了解释零在顶部“移入”而不是一的事实。您可以通过手动在顶部添加一个来避免它；然后`&=`and`|=`步骤也会反转。

顺便说一句，如果这确实有效，您可能希望为每个 N 编写一个展开版本，而不是使用那些循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T11:08:28.170

```
x = ~x;
for (j = 1; j <= N/2; j *= 2) x &= (x >> j);
x &= (x >> (N - j + 1));
for (j = 1; j <= N/2; j *= 2) x |= (x << j);
x |= (x << (N - j + 1));
x = ~x; 
```

与 R.. 的解决方案相同的想法，但有点优化。

* * *

为了进一步优化，可以消除第二个循环：

```
t = ~x;
m = x & (t << 1);
for (j = 1; j <= N/2; j *= 2) t &= (t >> j);
t &= (t >> (N - j + 1));
t |= ((m - t) & ~m);
x = ~t; 
```

这里唯一剩余的循环移走位组（与之前的变体完全相同），但不是第二个循环，而是使用简单的按位技巧来恢复比 N 长的组。

* * *

示例（N = 4）：

```
input string  110000100000011
inverted one  001111011111100
loop iter. 1  000111001111100
loop iter. 2  000001000011100
one more iter 000000000001100 
```

第一次循环迭代工作正常，因为每个位组前面至少有一个零位。因此，我们在每个位组之前至少有两个零位。因此，可以在第二次循环迭代中一次移动两位。出于同样的原因，第三次循环迭代可能一次移动 4 位，等等。但是这个例子不需要移动大于 2 位。由于循环已经将位组移动了 3 位，我们必须将它们再移动 N-3=1 位（这由循环后的下一行完成）。

现在较小的位组消失了，但较大的位组由一对位表示。为了重建剩余的组，可以使用第二个循环：

```
starting with 000000000001100
loop iter. 1  000000000011100
loop iter. 2  000000001111100
one more iter 000000011111100
result        111111100000011 
```

或者代替第二个循环，我们可以使用按位技巧：

```
m             010000100000000
t             000000000001100
m-t           010000011110100
(m-t) & ~m    000000011110100
t|((m-t)&~m)  000000011111100
result        111111100000011 
```

`m`标志着每组的开始。`m-t`恢复所有移出的位。下一个操作清除 的未使用位`m`。还需要一项操作来将恢复的位与移位循环之后剩余的位组合。

* * *

基准测试结果（AMD K8，GCC 4.6.3 -O2），秒：

```
N one_loop two_loops unoptimized
1     3.9     4.2       3.3
2     4.6     6.2       5.2
3     4.6     6.2       7.1
4     5.6     7.9       8.9
5     5.6     7.9      11.3
6     5.6     7.9      13.3
15    6.7    10.0      46.6 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T06:36:27.327

**编辑**：对于这个问题，除非相对较大，`R..`否则 ' 的解决方案会更好（在我的机器上，交叉点在附近，但这是使用所有可能的 32 位数字进行测试，这可能不代表预期用途）。所以我赞成该解决方案，但我将我的解决方案留在这里，因为它展示了如何在一个单词中迭代 s 的跨度（或者，对 s 进行小的修改），这可能对其他目的有用。`N``M = 32``N = 18``0``1`

* * *

这是您的示例，标记了范围和前面的 1：

```
111 000 11 00 1 0000 1 0 1 00000 111
  1 000  1 00        1 0 
```

假设我们从这些范围中的每一个中减去“1”：（相对于范围，而不是真正的 1）

```
 0 111  0 11        0 1 
```

并将其添加回原始内容：

```
111 111 11 11 1 0000 1 1 1 00000 111 
```

好的，看起来不错。所以我们需要计算出所有`1`要减去的 s，也就是`0`在每个 size less ≤ N 的范围内最后一个的位置。而要计算出范围的大小，我们还需要找到前面`1`的。

因此，基本上我们需要`0`通过交替搜索 last`0`和 last来找到 s 的所有跨度`1`，注意将尾随位设置为 all `1`s 或 all `0`s。如果范围不是太大，那么我们可以减去最后一个位置的bit，然后`0`再加`1`上最后一个1的位置，这会将`0`span中的所有s变成`1`s。我担心这不是很清楚，所以让我们尝试一些代码。

首先是以下小功能：

```
unsigned int last_one(unsigned int k) { return k & -k; }
unsigned int last_zero(unsigned int k) { return (k + 1) & ~k; } 
```

尝试直到你确信它有效。请注意，它们都返回单个一位，如果没有则返回零`last_{one,zero}`

接下来，跨度有多大？计算 s 会有点痛苦，`0`因为这涉及到寻找位置（不是那么困难，但没有必要）。但我们不在乎实际数字是多少；我们只需要知道它与`N`. 但是我们可以看到，如果最后一个与最后一个（标记）`N`的比率最多为 2 ^N ，则跨度的大小最多为位。`1``0`

所以让我们把所有这些放在一起。

```
unsigned long fill_in_runs(unsigned long val, int N) {
  unsigned long k = val;
  while (k) {
    unsigned long last_zero = (k + 1) & ~k;
    k -= last_zero - 1;
    if (k) {
      unsigned long last_one = k & -k;
      if ((last_one >> N) <= last_zero) 
        val += last_one - last_zero;
      k += last_one - 1;
    } else if (last_zero > (1UL << (M - N - 1)))
      val -= last_zero;
  }
  return val;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T09:40:54.370

我相信下面的代码可以满足您的要求，但您仍然可以优化它，我把它留给您...

```
#define BIT_GROUP   4

int main()
{
    uint32_t i, j, n;
    uint8_t bit_pos, zero_bit_pos, count;

    i = n = 0xaa05;

    printf("%x\n", i);

    while (n)
    {
        if (n & 1)
            printf("1");
        else
            printf("0");

        n >>= 1;
    }
    printf("\n");

    n = i;
    bit_pos = count = 0;
    while(n)
    {
        if(!(n & 1))
        {
            if(count <= BIT_GROUP)
            {
                zero_bit_pos = bit_pos;
                count++;
            }
            else
            {
                zero_bit_pos = 0;
                count = 0;
                j = 0;
            }
            if(count <= BIT_GROUP)
            {
                j = ((1 << count) - 1);
            }
        }
        else
        {
            j <<= ((zero_bit_pos + 1) - count);
            i |= j;
            j = 0;
            zero_bit_pos = 0;
            count = 0;
        }
        bit_pos++;
        n >>= 1;
    }

    n = i;
    while (n)
    {
        if (n & 1)
            printf("1");
        else
            printf("0");

        n >>= 1;
    }
    printf("\n");
    printf("%x\n", i);

    return 0;
} 
```

希望能帮助到你！！！！！！

# php - 如何获得超过 20 个结果，即。60 将google place API 与PHP 一起使用？

> ID：13814494
> 
> 赞同：18
> 
> 时间：2012-12-11T05:58:48.037
> 
> 标签：php, google-places-api

我正在开发一个 google Places API 应用程序，我的目标是获取特定查询的所有可用详细信息。但据我所知，谷歌位置 API 一次只返回 20 个结果。但我需要所有可用的位置详细信息。

如果我多次使用搜索关键字搜索，它总是给出相同的结果。所以我想知道每次使用相同的关键字搜索时有什么方法可以得到不同的结果。

```
 <?php 
        $placeSearchURL = 'https://maps.googleapis.com/maps/api/place/textsearch/json?query=' . $query . '&sensor=true' . '&key=' . API_KEY;

        $placeSearchJSON = file_get_contents($placeSearchURL);
        $dataArray = json_decode($placeSearchJSON);
        $references = array();
        $detailsOfPlaces = array();

        if (isset($dataArray->status)) {
            switch ($dataArray->status) {
                case 'OK' :
                    foreach( $dataArray->results as $details) {
                        $references[] = $details->reference;
                    }
                    break;
                default:
                    echo "Something wrong";
            }
        }

        foreach ($references as $reference) {
            $placeDetailsURL = 'https://maps.googleapis.com/maps/api/place/details/json?reference=' . $reference . '&sensor=true&key=' . API_KEY;
            $placeDetails =file_get_contents($placeDetailsURL);
            $placeDetailsAsArray = json_decode($placeDetails);

            switch ($dataArray->status) {
                case 'OK' :
                    $detailsOfPlace['business_name'] = isset($placeDetailsAsArray->result->name) ? $placeDetailsAsArray->result->name : '';
                    $detailsOfPlace['address'] = isset($placeDetailsAsArray->result->formatted_address) ? $placeDetailsAsArray->result->formatted_address : '';                      

                    $detailsOfPlaces[] = $detailsOfPlace;
                    break;
                default:
                    echo "Something went wrong";
            }
        } 
```

这是我的代码。它为每个查询返回 20 个结果。谁能告诉我应该进行哪些调整才能为每个查询获得 60 个结果。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T06:58:33.003

Google Places API 每次搜索最多可以返回 60 个结果，如果可用拆分为最多 20 个结果的三页。如果有超过 20 个结果可用，您可以通过将 传递给新搜索请求`next_page_token`的参数来访问其他结果。`pagetoken`

有关添加结果的更多信息，请参阅文档中地点搜索页面的[访问添加结果](https://developers.google.com/places/documentation/search#PlaceSearchPaging)部分。

如果您只需要地点位置，您可以使用[Places API 雷达搜索](https://developers.google.com/places/documentation/search#RadarSearchRequests)返回多达 200 个地点位置。

**编辑：** 在您的示例中，您不需要为每个地方发送详细信息请求来访问地名和地址。此信息在初始响应中返回，可以像下面的示例一样访问：

```
foreach($dataArray->results as $place) {
  echo '<p><b>' . $place->name . '</b>, ' . $place->formatted_address . '</p>';
} 
```

您可以查看是否有其他页面可用于附近搜索请求`next_page_token`是否返回。这可以检查如下：

```
if (isset($dataArray->next_page_token)) {
  //get next page
} 
```

如果返回 ，您可以通过将 传递给新搜索请求的参数或将其附加到原始请求的末尾`next_page_token`来获取下一页结果。以下是使用新请求的示例：`next_page_token``pagetoken`

```
$placeSearchURL = 'https://maps.googleapis.com/maps/api/place/textsearch/json?nextpage=' . $dataArray->next_page_token . '&sensor=true' . '&key=' . API_KEY; 
```

正如[文档](https://developers.google.com/places/documentation/search#PlaceSearchPaging)所述：

> *每页结果都必须依次显示。不应将两页或多页搜索结果显示为单个查询的结果。*

`next_page_token`因此，在发布 a 和它变得有效之间有一个短暂的延迟。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T13:37:25.687

正如 Chris Green 在他的回答中所说，您将不得不使用分页来获得 20 多个结果。此外，正如 Chris Green 还指出的那样，您不需要再次调用每个地方的参考地址。我假设您需要更多信息，所以我刚刚创建了 2 个函数来实现 Chris 在他的回复中所说的内容。未经测试，因此可能会出现一些错误，但您可以感觉到。

```
<?php

    function getAllReferences($query, $maxResults= 60, $nextToken = false) {
        $references = array();
        $nextStr = "";
        if ($nextToken)
            $nextStr = "nextpage=$nextToken";
        $placeSearchURL = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=$query&sensor=true&key=".API_KEY."&$nextStr";
        $placeSearchJSON = file_get_contents($placeSearchURL);
        $dataArray = json_decode($placeSearchJSON);
        if (isset($dataArray->status) &&$dataArray->status == "OK") {
            foreach( $dataArray->results as $details) {
                array_push($references, $details->reference);
            }
            if (!empty($dataArray->next_page_token) && count($references) < $maxResults ) {
                $nextArray = getAllReferences($query, $maxResults-20 , $dataArray->next_page_token);
                $references = array_merge($references, $nextArray);

            }
            return $references;
        }
    }

    function getPlaceFromReference($reference) {
        $placeDetailsURL = 'https://maps.googleapis.com/maps/api/place/details/json?reference=' . $reference . '&sensor=true&key='.API_KEY;
        $placeDetailsContent =file_get_contents($placeDetailsURL);
        $placeDetails = json_decode($placeDetailsContent);
        if ($placeDetails->status == "OK")
            return $placeDetails;
        else return false;
    }

    $references = getAllReferences("test");
    if (count($references) == 0)
        echo "no results";
    else {
        foreach ($references as $reference) {
            $placeDetails = getPlaceFromReference($reference);
            print_r($placeDetails);
        }
    } 
```

# tomcat7 - Tomcat 7.0.28 bin 路径中特定文件夹的目录列表

> ID：13814497
> 
> 赞同：2
> 
> 时间：2012-12-11T05:59:02.363
> 
> 标签：tomcat7

我开发了一个项目，其中包含 tomcat bin 路径中的所有文件和文件夹。我需要通过 url 访问位于 tomcat bin 文件夹中的服务器目录，例如“home”。还列出驻留在“主”文件夹中的所有子文件夹和文件，并允许用户下载选项。用户可以下载驻留在“主”文件夹中的任何文件或文件夹。

# asp.net - 应用程序中的服务器错误。无效的对象名称“dbo.Categories”

> ID：13814500
> 
> 赞同：1
> 
> 时间：2012-12-11T05:59:09.067
> 
> 标签：asp.net, visual-studio-2010, entity-framework, c#-4.0

我正在使用 ASP.NET 和实体框架 c# 开发在线购物 Web 应用程序。问题是当我在本地 ASP.NET 开发服务器上测试我的应用程序时，它运行良好，但是当我托管网站时，它给出了以下错误：

> “/samath”应用程序中的服务器错误。无效的对象名称“dbo.Categories”。
> 
> ```
> Description: An unhandled exception occurred during the execution of the current web 
> 
> request. Please review the stack trace for more information about the error and where it originated in the code.
> 
> Exception Details: System.Data.SqlClient.SqlException: Invalid object name 'dbo.Categories'. 
> ```

连接字符串有问题吗？

```
<connectionStrings>
        <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
        <add name="CommerceEntities" connectionString="metadata=res://*/Data_Access.EDM_Commerce.csdl|res://*/Data_Access.EDM_Commerce.ssdl|res://*/Data_Access.EDM_Commerce.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Commerce.mdf;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/>
    </connectionStrings> 
```

得到这个错误：

> 指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:00:46.777

你得到`System.Data.SqlClient.SqlException`这意味着你连接到数据库，因为这个异常是由数据库返回的，很可能你没有在服务器上更新数据库。检查您是否有`dbo.Categories exists`正在连接的数据库。**[您可以在此处](http://www.connectionstrings.com/sql-server-2012)**阅读有关连接字符串的更多信息

# jquery - 手风琴问题

> ID：13814501
> 
> 赞同：1
> 
> 时间：2012-12-11T05:59:16.740
> 
> 标签：jquery, html, slidedown

让我们直截了当地说：理论是一种手风琴，这是一种方式 - 单击手风琴中的标题将向下滑动内容，单击内部的单独 div 将使其父级（标题）向上滑动。我想使用它，因为我更喜欢手风琴，它不会在单击另一个标题时向后滑动。实际上，由于我不太了解 jquery，所以我的理论可能行不通，所以如果有更简单的替代方案，我会使用它们！这是我到目前为止所得到的，但它绝对行不通。我希望这不是太模糊：

```
$('#nav > li > a').click(function() {
    $(this).find(:first-child).slideDown(200); }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:07:14.580

我想这就是你想要的。

有一个[插件](http://tympanus.net/Tutorials/FlexibleSlideToTopAccordion/index.html)

在这种情况下，即使您打开下一个选项卡，手风琴选项卡也不会关闭。

如果你想关闭它试试[这个](http://tympanus.net/Tutorials/FlexibleSlideToTopAccordion/index2.html)

[还要检查本网站](http://vivekdragon.wordpress.com/)中一些有用的插件

如果您需要代码那么这就是我们在其中所做的

```
 function() {

 var instance   = this;

 // open / close item
        this.$items.find('a:first').bind('click.accordion', function( event ) {

            var $item           = $(this).parent();

            // close any opened item if oneOpenedItem is true
            if( instance.options.oneOpenedItem && instance._isOpened() && instance.current!== $item.index() ) {

                instance._toggleItem( instance.$items.eq( instance.current ) );

            }

            // open / close item
            instance._toggleItem( $item );

            return false;

        }); 
```

# asp.net - 集成安全连接问题

> ID：13814502
> 
> 赞同：0
> 
> 时间：2012-12-11T05:59:29.257
> 
> 标签：asp.net, sql, iis

我有一个已部署到生产环境的 asp.net 应用程序。我正在使用集成安全作为我的连接的一部分，它在生产中超时。超时是由于无法连接到数据库。我登录失败。我正在使用 Windows 身份验证，我们正在使用 IIS6。但是，从我的开发机器上它运行得很好。

这是我的连接字符串：add name="blah" connectionString"Data Source=serverName; Initial Catalog=Blah;Integrated Security=True;" providerName="System.Data.SqlClient"

非常感谢任何反馈。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:21:50.870

您需要检查 IIS 中的 AppPool 以哪个用户身份运行。该用户需要 SQL Server 中的权限。出于安全原因，我建议创建一个特定用户。

# android - 在 Android 中读取 json 文件

> ID：13814503
> 
> 赞同：89
> 
> 时间：2012-12-11T05:59:30.670
> 
> 标签：android, json

我有以下 json 文件。我想知道我应该将 json 文件放在我的项目中的哪个位置以及如何读取和存储它。

```
{
"aakash": [
    [  0.070020,0.400684],
    [  0.134198,0.515837],
    [  0.393489,0.731809],
    [  0.281616,0.739490]

],
"anuj": [
    [  1287.836667,-22.104523],
    [  -22.104523,308.689613],
    [  775.712801,-13.047385],
    [  -13.047385,200.067743]
]
} 
```

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-12-11T06:04:27.697

**将该文件放在 assets 中**。

对于在 Android Studio 项目中创建的项目，您需要在主文件夹下创建 assets 文件夹。

将该文件读取为：

```
public String loadJSONFromAsset(Context context) {
        String json = null;
        try {
            InputStream is = context.getAssets().open("file_name.json");

            int size = is.available();

            byte[] buffer = new byte[size];

            is.read(buffer);

            is.close();

            json = new String(buffer, "UTF-8");

        } catch (IOException ex) {
            ex.printStackTrace();
            return null;
        }
        return json;

    } 
```

然后你可以简单地`string`通过这个函数读取这个返回值

```
JSONObject obj = new JSONObject(json_return_by_the_function); 
```

有关 JSON 的更多详细信息，请参阅 [http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

希望你会得到你想要的。

# iphone - iOS 客户端/服务器通信

> ID：13814504
> 
> 赞同：2
> 
> 时间：2012-12-11T05:59:31.740
> 
> 标签：iphone, objective-c, ios

我正在寻找我的 iOS 应用程序以连接到 LAN 上自身的其他实例，并在实例之间发送一些原始数据（只是数字）。目前最好的框架/库是什么？

我已经在 Windows 中使用 winsock 完成了这类事情，但 iOS 是一个完全不同的世界。

你好？只能用 NSStream 完成吗？还有哪些流行的技术？

我的谷歌搜索结果显示了很多自定义包装器，其中大部分可能已经过时了。

我更喜欢使用objective-c库（vs c），但可以采用任何一种方式。

任何指向 tuts 或示例的链接都会很棒！谢谢。

另外，我应该注意iOS上的任何陷阱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:46:24.083

如果您知道 IP 地址，套接字就可以正常工作。如果您需要对等点相互发现，Bonjour 很有用。然后，如果您要发送任何需要格式化的内容，例如数字列表，我建议使用[Protocol Buffers](http://code.google.com/p/protobuf/)。[这是](https://github.com/booyah/protobuf-objc)一个 ObjC 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:08:49.610

如果你已经用winsock 完成了，你可以将你的代码移植到BSD 套接字上。或者，您可以查看 CoreFoundation 的 CFSocket - BSD 套接字的包装器（请参阅[Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreFoundation/Reference/CFSocketRef/Reference/reference.html)）。

# xcode - Mac Store - iTunesConnect 上的无效二进制文件 - 签名无效

> ID：13814506
> 
> 赞同：1
> 
> 时间：2012-12-11T05:59:43.937
> 
> 标签：xcode, macos, app-store-connect, mac-app-store, codesign

iTunesConnect 现在似乎正在拒绝我们的二进制文件（适用于 Mac App Store），并出现以下错误

> **签名无效**- 路径 wetfm.app 中的主应用程序包 wetfm 已签名，但签名无效。codesign 报告了以下错误：
> 
> 密封资源丢失或无效
> 在架构中：i386

在过去的几天里，我一直在研究这个问题，并且几乎尝试了所有方法；的输出`codesign --verify -vvvv wetfm.app`是

> wetfm.app：在磁盘上有效
> wetfm.app：满足其指定要求

从`codesign --display --verbose=4 wet.fm.app`我得到输出标题的完整列表，包括`Authority=3rd Party Developer Application: our company cert`；这似乎表明它已正确签名。

该应用程序正在使用命令行（不是 XCode——使用 Unity3D）构建`codesign -vvvv -s '3rd Party Mac Developer Application: our company...' --entitlements wetfm.entitlements wetfm.app`；然后使用类似的命令对两个插件包和一个框架进行签名。

最后，正在构建包`productbuild --component "wetfm.app" "/Applications" --sign "3rd Party Mac Developer Installer: our company..." wetfmpackage.pkg`- 然后通过 Application Loader 提交（接受它，上传，然后将无效的签名电子邮件发送给我们。）

到目前为止，我已经尝试了以下所有方法：

*   撤销我们所有的开发者证书，在 XCode 中重新生成它们（并单独通过开发者证书站点）
*   删除所有配置文件
*   重新安排签名过程的顺序（首先签署主包，最后签署）
*   签署或不签署子捆绑包（如果不是，稍后会出现其他错误）
*   将“应用程序标识符”添加到权利文件（导致应用程序加载程序拒绝上传）
*   重命名应用程序和 bundleID（从 wet.fm 到 wetfm）
*   尝试上传到 iTunesConnect 上的新（不同）应用程序

据我所知，它似乎在本地被正确签名——如果我能让 codesign 至少输出与通过电子邮件返回的错误消息相同的错误消息，那将非常有用；因为这将使测试显着加快。

如果有人有任何线索或见解，将不胜感激。谢谢！

（环境：10.8.2，一切的最新版本。）

# kineticjs - 删除 KineticJS 中的阴影

> ID：13814507
> 
> 赞同：1
> 
> 时间：2012-12-11T05:59:46.957
> 
> 标签：kineticjs

有没有办法从 Kinetic.Shape 中删除应用的阴影？不幸的是 shape.setShadow(null) 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:01:49.243

将阴影颜色的 alpha 分量设置为 0（例如）：

```
shape.setShadow({color: 'rgba(80, 80, 80, 0)'}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T05:25:54.763

Kinetic.js 现在有一个`setShadowEnabled`方法。

所以，只需调用`shape.setShadowEnabled(false)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T17:28:50.080

```
shape.setShadowColor('transparent'); 
```

# php - 产品的第二个变量

> ID：13814509
> 
> 赞同：0
> 
> 时间：2012-12-11T06:00:05.693
> 
> 标签：php, opencart

我正在使用 Opencart 试图调用一个变量以显示在特色模块中的产品名称下方。这个特色模块显示在首页上。

我已经在数据库中添加了一个新列，并且能够通过管理页面将数据添加到数据库中。通过 PHPmyadmin 验证。

但是，我不能在主页上显示变量。我已经编辑了 catalog/view/theme/*/template/module/featured.tpl 以包含以下代码，但没有成功。如果我删除 isset 它会抛出一个通知：未定义变量：product_description in ... 错误

**添加了以下行**

```
<div class="secondtitle"><?php echo isset($product_description['secondtitle']); ?></a></div> 
```

**前**

```
<div class="name"><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a></div> 
```

**VQmod**

```
<file name="catalog/view/theme/*/template/module/featured.tpl">
        <operation>
            <search position="after"><![CDATA[
            <div class="name"><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a></div>
            ]]></search>
            <add><![CDATA[
            <div class="secondtitle"><?php echo isset($product_description['secondtitle']); ?></a></div>
            ]]></add>
        </operation>
    </file> 
```

谁能指导我如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:41:41.173

设法解决了这个问题，因为我在特色模块上显示第二个标题，我只需要在 features.php 上调用它，瞧，它现在正在显示。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:53:31.930

您需要更具体，很难猜测您在数据库中的何处添加了额外的字段。它在“产品”表中吗？然后，根据您之前的评论，您似乎走在了正确的轨道上。

您需要编辑 model/catalog/product.php 编辑函数 getProduct()

你会看到一个数组被填充，如下所示：

```
'product_id'       => $query->row['product_id'],
'name'             => $query->row['name'],
'description'      => $query->row['description'],
... 
```

在那里添加您的自定义字段：

```
'secondtitle'      => $query->row['secondtitle'] 
```

您能否显示您在数据库中的哪个位置添加此自定义变量？

[编辑：2012-12-13 回应评论 #1]

如果您的自定义字段在 'product_description' 表中，则按照上面的示例编辑 model/catalog/product.php 编辑控制器 features.php，将您的变量添加到 products 数组中。寻找

```
$this->data['products'][] = array(
    'product_id' => $product_info['product_id'],
    'thumb'      => $image, 
    ... 
```

添加您的字段

```
 ...
    'secondtitle'=> $product_info['secondtitle'] 
```

然后在 view features.tpl 在你想要的地方回显它

```
<?php echo $product['secondtitle']; ?> 
```

这行得通，我刚刚测试过。正如我之前所说，您正在做正确的事情，可能只是错过了一两步..

# plugins - 如何在firebreath中提供外部库路径

> ID：13814514
> 
> 赞同：0
> 
> 时间：2012-12-11T06:01:18.587
> 
> 标签：plugins, browser, npapi, firebreath, clutter

我正在使用**Fire Breath**开发基于杂乱的插件。我在 flags.make 文件中给出了包含文件的路径，**并且**.so 库包含在**link.txt**文件中。但我的问题是，当我启动在 bin/project 文件夹下生成的插件 .so 文件时，浏览器会显示安装缺少的插件。我很困惑firebreath中是否还有其他文件需要我们提供外部.so文件路径。请建议。

# ios - UITableView 加边框也在 HeaderView 上加边框

> ID：13814516
> 
> 赞同：2
> 
> 时间：2012-12-11T06:01:31.563
> 
> 标签：ios, uitableview

当我向我的 UITableView 添加边框（使用*CALayer*）时，它还会向`UITableView.tableHeaderView` 但我只需要在表格周围而不是标题周围添加边框。

由于我的表中只有一个部分，所以我尝试通过自定义标题视图

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

但它仍然不起作用。

如何仅设置 tableView 的边框而不是标题视图？

我知道一种可能的解决方案 - 制作一个视图（用于边框）并将其添加到表格视图中，但我不想使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:09:01.827

```
tableView.separatorColor = [UIColor blueColor]; 
```

# windows - 保管箱文件更改

> ID：13814518
> 
> 赞同：0
> 
> 时间：2012-12-11T06:01:42.890
> 
> 标签：windows, api, filesystems, sync, dropbox

我正在使用 Dropbox API 做一个类似 Dropbox 的同步工具，一些更改的文件将被同步到 Dropbox 服务器。然后，我的问题是如何检测同步文件夹的修改，即使在我退出 Dropbox 应用程序后，我可能需要记录修改并在再次登录 Dropbox 后进行自动同步。我认为每次在 Dropbox 启动时扫描整个文件树效率很低。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:23:53.837

如果您知道可以更改哪些文件，则可以将其链接存储在应用程序中的某个位置，当您运行它时，您只需获取该链接，添加授权并检查文件元数据。但是如果你想检查整个文件夹，为了做到这一点，你需要遍历它。遗憾的是没有其他选择。

当您将遍历某些文件夹时，不要忘记使用**hash参数。**您可以在第一次获取元数据时存储每个特定文件/文件夹的哈希值，并在进一步请求时将其作为请求参数放入每个单独的文件或文件夹，从而显着减少 json 响应量。

# ruby-on-rails - Rails SELECT 与 postgres 不同

> ID：13814519
> 
> 赞同：1
> 
> 时间：2012-12-11T06:01:47.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

所以我试图在我的桌子上使用 SELECT Distinct 选项

`Hashlog.select("DISTINCT tag").select("created_at").order("created_at DESC").limit(10)`

```
 1.9.3-p286 :017 > Hashlog.select("DISTINCT tag").select("created_at").order("created_at DESC").limit(10)
      Hashlog Load (0.7ms)  SELECT DISTINCT tag, created_at FROM "hashlogs" ORDER BY created_at DESC LIMIT 10
     => [#<Hashlog tag: "new", created_at: "2012-12-11 04:06:37">, 
     #<Hashlog tag: "now", created_at: "2012-12-11 04:06:33">, 
     #<Hashlog tag: "googleold", created_at: "2012-12-11 04:06:28">, 
     #<Hashlog tag: "google", created_at: "2012-12-11 04:06:26">, 
     #<Hashlog tag: "facebook", created_at: "2012-12-11 04:06:21">, 
     #<Hashlog tag: "facebook", created_at: "2012-12-11 04:06:18">, 
     #<Hashlog tag: "faceboot", created_at: "2012-12-11 04:06:15">] 
```

所以我希望结果只在标签列上是唯一的，但它不会让我按 created_at 排序，除非它通过选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T06:31:59.377

我认为您要做的是为每个标签选择按*最早*（即最小）排序的不同标签值`created_at`。这将是解决由具有多个关联`created_at`值的标签引起的歧义的一种方法。

如果是这种情况，请尝试以下操作：

```
Hashlog.select("tag, min(created_at) as earliest").group("tag").order("earliest DESC").limit(10) 
```

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:26:49.840

我在我的项目中使用了以下代码段

```
Product.select("DISTINCT(products.material_id), products.material_id, products.class_id").where('products.class_id' => current_user.class_id) 
```

# html - HTML / CSS：创建一个水平阻止列表强制 li 元素的宽度

> ID：13814522
> 
> 赞同：0
> 
> 时间：2012-12-11T06:02:02.450
> 
> 标签：html, css, list

我有一个水平列表，这很好。图像如下所示。![在此处输入图像描述](../Images/ce0904697ccb9371ad51491d500d69e1.png) 标题下方的列表是我正在谈论的列表。我想要实现的基本上是你看到每个链接的措辞都在一行中，例如“Mash's Famous Wings” 那么我想要做的是为列表中的所有 li 元素创建一个固定的高度和宽度（对所有人都一样） . 所以这意味着一些词将进入一个新的行。

以Smokey [Bones 菜单子导航](http://smokeybones.com/menu/)为例。

到目前为止，这是我的 CSS：

```
#menunavigation{
position:fixed;
top:100px;
left:50px;
z-index:1; 
color:white; 
}

#menunavigation a {
color:white; 
}

#menunavigation ul{
list-style-type:none;
height:50px;
}

#menunavigation ul li{
display:inline;
max-width:15px;
margin-right:5px; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:14:58.297

尝试使用此代码段更新您的 css 代码。

```
#menunavigation ul li
{
  display:inline-block;
  max-width:15px;
  margin-right:5px; 
} 
```

但是，`display:inline-block`在 IE-7 中不起作用，您需要包含这些额外的行，这是一种仅适用于 IE-7 的 hack。

```
*display:inline;
*zoom:1; 
```

否则，如果您完全支持 IE-7，您可以使用[**条件注释来检测它。**](http://www.quirksmode.org/css/condcom.html)

# ios - ModalViewController 隐藏在视图下

> ID：13814527
> 
> 赞同：2
> 
> 时间：2012-12-11T06:02:53.380
> 
> 标签：ios, viewcontroller, mfmailcomposeviewcontroller, presentmodalviewcontroller, uiwindow

我正在开发照片预览组件。现在我遇到了一个显示modalViewController的问题：当我想显示一个预览视图时，我正在做的是这样的：

```
UIWindow *window = [[[UIApplication sharedApplication] delegate] window];
EKImageViewer *viewer = [[EKImageViewer alloc] initWithFrame:frame];
[window addSubview:viewer];
[window addSubview:viewer.preview];
[window addSubview:viewer.shareBtn];//A UIButton control 
```

关闭预览视图时，我在做什么是这样的：

```
[viewer.shareBtn removeFromSuperview];
[viewer.preview removeFromSuperview];
[viewer removeFromSuperview]; 
```

在预览组件中点击 shareBtn(UIButton) 时，我想显示一个模式视图（MFMailComposeViewController）：

```
MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
controller.mailComposeDelegate = self;
[[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentModalViewController:controller animated:YES]; 
```

发生了一些奇怪的事情：modalViewController 显示在预览组件下。只有当我关闭预览组件时，我才能看到 modalViewController。有什么我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:04:44.217

不要`viewer`在`window`. 相反，添加你的`rootViewController.view.`那应该可以解决这个问题。如果可能，尽量不要添加除`rootViewController`on之外的任何内容`window`。之后要添加的任何内容都可以添加到`rootViewController`.

# cocos2d-x - 如何在 cocos2d-x(android) 中缩放 sprite(CCSprite)？

> ID：13814528
> 
> 赞同：2
> 
> 时间：2012-12-11T06:03:07.420
> 
> 标签：cocos2d-x

我正在尝试将背景精灵（使用较大尺寸的图像资源）缩放到较小的尺寸，但无法做到这一点。

我这样做如下：

```
CCSprite *splashSprite =CCSprite::spriteWithFile("splashscreen.jpg");
 splashSprite->setPosition(ccp(240, 150));
 splashSprite->setScale(0.5f); 
```

但精灵保持其原始大小。不用找了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T13:16:59.133

你可以这样做。有用

```
CCSprite* splashSprite= CCSprite::create("splashscreen.png");
splashSprite->setPosition(ccp(240, 150));
splashSprite->setScale(0.5f);
this->addChild(splashSprite, 0); 
```

# algorithm - 数据结构：时间成本，大 O 表示法

> ID：13814533
> 
> 赞同：0
> 
> 时间：2012-12-11T06:03:18.943
> 
> 标签：algorithm, big-o

> 对于大型问题，具有时间成本`O(2^n)`的算法比具有时间成本的算法快`O(N^2)`

这是对还是错？

我认为如果 C^n, C = constant 并且 C > 1，那么它的增长速度会比 O(N^2) 快。它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:27:53.133

```
Yes, c^n grows faster than n^2, if c>1
if c=1 then c^n =1
if c<1 then c^n "decays"

Proof for c>1
let t(n) = (c^n)/(n^2)
now lim n-> infinity t(n) = (By L'Hospitals Rule) = lim (d/dn c^n) / lim(d/dn n^2)
= lim (d/dn c^n lg n) / lim(d/dn 2n)    
= lim (d/dn c^n lg n * lg n) / lim(d/dn 2)
-> infinity. 
```

因此，根据[http://en.wikipedia.org/wiki/Big_O_notation#Related_asymptotic_notations](http://en.wikipedia.org/wiki/Big_O_notation#Related_asymptotic_notations)中描述的属性，我们说 n^2 增长较慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:26:56.080

> 对于大型问题，时间成本为 O(2 ^n ) 的算法比时间成本为 O(n ² ) 的算法快。

**FALSE**，因为 2 ^n > n ²表示 n > 4，更大意味着更慢。

> 对于 C = 常数且 C > 1，C ^n的增长速度快于 O(n ² )。

**真的**。

[这](http://www.wolframalpha.com/share/clip?f=d41d8cd98f00b204e9800998ecf8427ecetjcrvt7v)是 Wolfram|Alpha 参考。

![在此处输入图像描述](../Images/bab6c3c43f58dcbce08fc5a02db6d408.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T06:44:37.830

这显然是错误的。您可以通过对不同值的反复试验来说服自己相信这一点`N`。

```
2^5 = 32 versus 5^2 = 25
2^6 = 64 versus 6^2 = 36
2^7 = 128 versus 7^2 = 49 
```

如您所见，指数的增长速度比二次的快得多。

为了证明这一说法，我将使用归纳法和基本情况`N=5`。这一步留给读者作为练习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:06:27.683

是的，c^n 比 n^2 增长得更快。

# asynchronous - 具有持久消息/溢出到磁盘的低占用队列/消息传递解决方案

> ID：13814536
> 
> 赞同：0
> 
> 时间：2012-12-11T06:03:35.753
> 
> 标签：asynchronous, queue, jms, messaging

我需要构建一个高度可扩展的系统来捕获点击流量。我希望异步处理数据，以便 HTTP 点击请求可以快速返回。点击流量需要进入数据存储进行报告，但它不需要是实时的。我希望能够通过添加应用程序服务器来扩展此解决方案，以满足需求所需的数量，并以负载均衡器（可能是亚马逊的弹性负载均衡器）为前端。我想到了几种可能性（顺便说一句，平台是 Java）：

1.  将点击数据写入内存队列（例如 BlockingQueue）。另一个线程将排空队列并插入后端数据存储。这种方法将队列大小限制为可用内存，如果节点崩溃，队列上的所有数据都会丢失。我搜索了一个 BlockingQueue 实现，它在队列达到一定大小时溢出到磁盘但没有找到任何东西。

2.  将点击数据写入每个节点的文件系统，文件大小为100MB左右。然后，数据将由后端进程收集并插入数据存储区。使用这种方法，不会出现单点故障，并且数据丢失的可能性很小。例如，如果一个节点遇到错误，它将从负载均衡器中删除。如果后端数据存储不可用，它可以在它再次可用时恢复传输数据文件。将数据放入后端数据存储需要一些时间，但只要所有数据都到达那里，这是可以接受的。

3.  使用消息系统，例如 activemq 或 rabbitmq。除非安装在每个节点上，否则消息传递系统会引入单点故障，这似乎有点矫枉过正。消息传递系统将提供持久消息和一些保证消息只被使用一次的事务。队列的消费者会将数据加载到数据存储中。消息系统可以集群在后端，但需要服务器 n-app 服务器，它可能成为系统中的限制因素，影响 http 请求性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:18:57.090

[Akka.io](http://akka.io/)听起来像是一个很好的框架来完成这项任务。它使用演员模型，并支持远程演员。这意味着它保证每条消息只被使用一次，并允许您跨多个服务器扩展系统。它还支持基于文件的actor邮箱和actor-supervision，因此如果一台服务器崩溃，系统可以恢复，并且未处理的消息不会丢失。有很多公司专业使用它，所以它已经过彻底的实战测试。

# javascript - meteorjs：我正确使用 Email.send() 吗？

> ID：13814537
> 
> 赞同：2
> 
> 时间：2012-12-11T06:03:37.860
> 
> 标签：javascript, email, meteor

```
var SITE_URL = Meteor.absoluteUrl();

function sendEmailNotification(type, sourceUser, recipients, notificationObject) {
    var emailFrom = 'server@example.com';
    var emailSubject = 'MyApp: ';
    var emailBody = '';
    $.each(recipients, function (index, recipient) {
        recipients[index] = recipient + '@example.com';
    });

    switch(type) {
        case 'item_assigned':
            emailSubject += notificationObject.item_title;
            emailBody += '<div style="padding:10px;">';
            emailBody += sourceUser;
            emailBody += ' has assigned you an action item';
            emailBody += '</div>'
            break;
        case 'list_shared':
            emailSubject += notificationObject.list_title;
            emailBody += '<div style="padding:10px;">';
            emailBody += sourceUser;
            emailBody += ' has shared a list with you: ';
            emailBody += '<a href="' + SITE_URL + '#' + notificationObject.list_id + '">' + notificationObject.list_title + '</a>';
            emailBody += '</div>'
            break;
    }
    if (Meteor.isServer) {
        // This function only runs on server
        Email.send({
            from: emailFrom,
            bcc: recipients,
            subject: emailSubject,
            html: emailBody
        });
    }
} 
```

上面的函数位于根目录下的一个 JS 文件中（因此它的代码对客户端和服务器都可用）。但是当我在我的客户端代码中调用它时，什么也没有发生。我的应用程序中包含该`email`软件包。在我的本地机器（Windows 7）上，我没有`MAIL_URL`设置变量。因此，理想情况下，调用该`Email.send()`函数应该在命令提示符下产生一个输出，但实际上没有任何输出。

在我们的生产服务器上，SMTP 已正确设置，其他应用程序能够发送具有相同设置的电子邮件。我已经在`MAIL_URL`那里正确配置了环境变量，但仍然没有发送电子邮件。

有人可以告诉我我的代码是否有问题？有什么我做的不对吗？

PS：我什至尝试像下面的代码一样直接调用 Email.send() ，但仍然没有任何反应。

```
if (Meteor.isServer) {
    Email.send({
        from: 'server@example.com',
        to: 'my-gmail-id@gmail.com',
        subject: 'This is a test email',
        html: '<b>Congrats, it works!</b>'
    });
}

    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:09:35.373

[Meteor's Email](https://stackoverflow.com/questions/13785312/meteors-email-is-undefined/13786520#13786520)的副本几乎是未定义的

请参阅[此拉取请求](https://github.com/meteor/meteor/pull/534)以获取示例代码。

澄清一下：Meteor 不会像那样按顺序执行客户端和服务器代码。您必须更明确地了解客户端与服务器上运行的内容。与其考虑沿 JavaScript 页面的线性执行，不如认为每一段 Meteor 代码都是作为事件的结果运行的。如果某段代码没有运行，那是因为没有触发它的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:47:16.483

我通过使用上面的整个代码创建一个服务器端方法`Meteor.methods`并将其放入其中来解决它。

```
var SITE_URL = Meteor.absoluteUrl();

Meteor.methods({
    sendEmailNotification: function (type, sourceUser, recipients, notificationObject) {
        if (recipients.length > 0) {
            var emailFrom = 'app@example.com';
            var emailSubject = 'MyApp: ';
            var emailBody = '';
            for (var i = 0; i < recipients.length; i++) {
                recipients[i] = recipients[i] + '@example.com';
            }

            switch (type) {
                case 'item_assigned':
                    emailSubject += notificationObject.item_title;
                    emailBody += '<div style="padding:10px;">';
                    emailBody += sourceUser;
                    emailBody += ' has assigned you an action item';
                    emailBody += '</div>'
                    break;
                case 'list_shared':
                    emailSubject += notificationObject.list_title;
                    emailBody += '<div style="padding:10px;">';
                    emailBody += sourceUser;
                    emailBody += ' has shared a list with you: ';
                    emailBody += '<a href="' + SITE_URL + '#' + notificationObject.list_id + '">' + notificationObject.list_title + '</a>';
                    emailBody += '</div>'
                    break;
            }
            Email.send({
                from: emailFrom,
                bcc: recipients,
                subject: emailSubject,
                html: emailBody
            });
        }
    }
}); 
```

要在您的客户端代码中调用上述函数，请使用：

```
Meteor.call('sendEmailNotification', 'list_shared', Meteor.user().username, [sharedUserName], listDetails); 
```

# mongodb - 带有 upsert:true 的 mongodb 更新不像插入

> ID：13814539
> 
> 赞同：4
> 
> 时间：2012-12-11T06:03:47.950
> 
> 标签：mongodb

我正在尝试使用`update`whiwle`upsert`提供我自己的`_id`作为密钥。

事实证明，它仅在我使用时才有效`insert`，如果`upsert:true`随更新提供，则新插入的文档会获得 Mongo 的自动生成的`id`.

见下图：

```
PRIMARY> db.internal.update({_id: "my_id"},{ "value": "xyz"}, {upsert:true})
PRIMARY> db.internal.find()
{ "_id" : ObjectId("50c6cbb21d8b512bc0fe9576"), "value" : "xyz" }
PRIMARY> db.internal.insert({_id: "my_id2", "value": "xyz"})
PRIMARY> db.internal.find()
{ "_id" : ObjectId("50c6cbb21d8b512bc0fe9576"), "value" : "xyz" }
{ "_id" : "my_id2", "value" : "xyz" } 
```

**这是功能还是错误？**

根据我在[Mongo's docs](http://docs.mongodb.org/manual/applications/create/#crud-create-update)中看到的内容，这将起作用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T06:09:51.327

是的，这是一个鲜为人知的问题。诀窍是使用`$set`带有 upsert 的修饰符。然后它将组合您的更新和查询部分以形成更新插入的文档。看：

```
db.internal.update({_id: "my_id"},{"$set": {"value": "xyz"}}, {upsert:true})
db.internal.find()
// { "_id" : "my_id", "value" : "xyz" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:28:14.143

应该注意的是，如果没有 $set/$pull/etc., 修饰符，您只是用第二个参数替换文档。

```
> db.test.update({_id: 'foo'}, {_id: 'foo', value: 'xyz'}, upsert=true)
> db.test.find()
{ "_id" : "foo", "value" : "xyz" }
> db.test.update({_id: 'foo'}, {_id: 'foo', value: 'hello'}, upsert=true)
> db.test.find()
{ "_id" : "foo", "value" : "hello" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:13:00.543

刚刚发现，如果我在数据部分再次提供 _id，除了条件部分，它就可以工作。

例如

```
PRIMARY> db.internal.update({_id: "my_id3"},{ _id: "my_id3", "value": "xyz"}, {upsert:true})
PRIMARY> db.internal.find()
{ "_id" : ObjectId("50c6cbb21d8b512bc0fe9576"), "value" : "xyz" }
{ "_id" : "my_id2", "value" : "xyz" }
{ "_id" : "my_id3", "value" : "xyz" } 
```

但是，这似乎不是预期的 api - 正如您在[文档示例](http://docs.mongodb.org/manual/applications/create/#crud-create-update)中看到`{ _id:7 }`的那样`{ upsert:true }`

```
db.bios.update(
   {
     _id: 7,
     name: { first: 'Ken', last: 'Thompson' }
   },
   {
     $set: {
              birth: new Date('Feb 04, 1943'),
              contribs: [ 'UNIX', 'C', 'B', 'UTF-8' ],
              awards: [
                        {
                          award: 'Turing Award',
                          year: 1983,
                          by: 'ACM'
                        },
                        {
                          award: 'IEEE Richard W. Hamming Medal',
                          year: 1990,
                          by: 'IEEE'
                        },
                        {
                          award: 'National Medal of Technology',
                          year: 1998,
                          by: 'United States'
                        },
                        {
                          award: 'Tsutomu Kanai Award',
                          year: 1999,
                          by: 'IEEE'
                        },
                        {
                          award: 'Japan Prize',
                          year: 2011,
                          by: 'The Japan Prize Foundation'
                        }
             ]
           }
   },
   { upsert: true }
) 
```

# asp.net - 无法从 asp.net 中的 Listview 检索控制

> ID：13814542
> 
> 赞同：0
> 
> 时间：2012-12-11T06:04:13.577
> 
> 标签：asp.net, listview

基本上，我试图将验证控件放入 Listview 中。但是，我无法指定 ControlToValidate = "grpNameTextBox"。

我试着把

`((RequiredFieldValidator)ListView1.FindControl("RequiredFieldValidator1")).ControlToValidate = ((TextBox)ListView1.FindControl("grpNameTextBox")).ID;`

在不同的事件中，但无法做到。

之后，我删除了Validation Control，并放置了简单的Label。然后在“ItemInserting”事件中，我输入了以下代码：

```
protected void ListView1_ItemInserting(object sender, ListViewInsertEventArgs e)
    {
        TextBox t1 = (TextBox)ListView1.FindControl("grpNameTextBox"); // Getting Null Exception here
        if (t1.Text.Trim() == null)
        {
            throw new System.Exception("Field cannot be empty");

        }
    } 
```

但是得到“对象引用未设置为对象的实例”。错误。谁能告诉我，我错在哪里？

.aspx 部分如下：

```
<InsertItemTemplate>
        <tr style="">
            <td>
                <asp:Button ID="InsertButton" runat="server" CommandName="Insert" 
                    Text="Insert"  />
                <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                    Text="Clear" />
            </td>
            <td>
                &nbsp;</td>
            <td>
                <asp:TextBox ID="grpNameTextBox" runat="server" Text='<%# Bind("grpName") %>' />
                <asp:Label ID="lblError" runat="server" Text=""></asp:Label>
            </td>
        </tr>
    </InsertItemTemplate> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:10:56.847

您没有在列表视图中动态生成文本框 ID，因此您可以直接将 controlTovalidate 值赋予 aspx 页面中的“grpNameTextBox”。

将相同的 ValidationGroup 分配给 RequiredFieldValidator 以及 aspx 代码中的 Insert 按钮，无需验证代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:22:58.930

文本框 txt_btn = (TextBox)e.Item.FindControl("grpNameTextBox");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:29:38.813

尝试修改您的代码

```
 protected void ListView1_ItemInserting(object sender, ListViewInsertEventArgs e)
  {
    TextBox t1 = (TextBox)e.Item.FindControl("grpNameTextBox"); 
    if(t1==null) return; // or exception
    Button btn = (Button)e.Item.FindControl("InsertButton");
    RequiredFieldValidator rfv = (RequiredFieldValidator)e.Item.FindControl("rfvId");
        if (rfv != null&& btn!=null)
        {
            rfv.ControlToValidate = t1.ClientID;
            rfv.ValidationGroup = rfv.ClientID + "ValidationGroup";
            btn.ValidationGroup = rfv.ClientID + "ValidationGroup";
        }

  } 
```

# java - 如何在使用 Junit 测试套件从不同机器运行多个类时使用 Ant 将主机名输出到 Test-TestSuite.xml

> ID：13814548
> 
> 赞同：2
> 
> 时间：2012-12-11T06:04:22.707
> 
> 标签：java, ant, junit

我正在使用 Ant 1.7 + Junit 4 + Selenium Grid 2 进行功能测试。

在 Junit 4 中，我使用“@RunWith (Suite.class)”来运行多个类。代码在这里：

```
package com.black;

import org.junit.runner.RunWith;
import org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses({TestGrid.class,TestGrid2.class})
public class TestAll{
} 
```

可以看到，这个TestAll.java 调用了两个类——TestGrid.class 和TestGrid2.class。

TestGrid.class 在一台 Windows 7 (10.1.3.50) 上运行，TestGrid2.class 在另一台 Windows 7 机器 (10.1.3.77) 上运行。

代码在这里：

------------TestGrid.class-------------

```
package com.blackline;

import static org.junit.Assert.assertEquals;

import java.net.URL;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import org.openqa.selenium.*;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;

public class TestGrid {
    private WebDriver driver;
    private String baseUrl;
    int sleepTime = 0;
    @Before
    public void setUp() throws Exception {
        System.out.println("TestGrid.java setUp.");
        //Use Firefox
        DesiredCapabilities capability = DesiredCapabilities.firefox();
        driver = new RemoteWebDriver(new URL("http://10.1.3.50:5555/wd/hub"), capability);

        baseUrl = "http://10.1.3.12/";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
        Capabilities actualCapabilities = ((RemoteWebDriver)driver).getCapabilities(); 
        System.out.println(actualCapabilities); 
    }

    @Test
    public void test01()
    {
        System.out.println(1);
    }
    @Test
    public void test02()
    {
        System.out.println(2);
        assertEquals("a", "b");
    }

  @After
  public void tearDown() throws Exception {
  }

} 
```

----------TestGrid2.java-------------

```
package com.xbosoft.blackline;

import java.net.URL;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import org.openqa.selenium.*;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;
import org.openqa.selenium.support.ui.Select;

public class TestGrid2 {
    private WebDriver driver;
    private String baseUrl;
    int sleepTime = 0;
    @Before
    public void setUp() throws Exception {
        System.out.println("TestGrid2.java setUp.");
        //Use Firefox
        DesiredCapabilities capability = DesiredCapabilities.firefox();
        driver = new RemoteWebDriver(new URL("http://10.1.3.77:5555/wd/hub"), capability);

        baseUrl = "http://10.1.3.12/";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
        Capabilities actualCapabilities = ((RemoteWebDriver)driver).getCapabilities(); 
        System.out.println(actualCapabilities); 
    }

     @Test(timeout=10000)
    public void testSelenium() throws InterruptedException
    {
        driver.get("http://seleniumhq.org/");
        Thread.sleep(sleepTime);
        driver.get("http://seleniumhq.org/projects/");
        Thread.sleep(sleepTime);
        driver.get("http://seleniumhq.org/download/");
        Thread.sleep(sleepTime);
        driver.get("http://seleniumhq.org/docs/");
        Thread.sleep(sleepTime);
        driver.get("http://seleniumhq.org/support/");
        Thread.sleep(sleepTime);
        driver.get("http://seleniumhq.org/");
        Thread.sleep(sleepTime);
        driver.get("http://seleniumhq.org/projects/");
        Thread.sleep(sleepTime);

    }

    @After
    public void tearDown() throws Exception {
    }
} 
```

Ant build.xml中的junit和junitReport部分如下

====================

```
<target name="junit" depends="compile">
    <junit printsummary="yes" fork="true" haltonfailure="false" failureproperty="tests.failed" showoutput="true">
        <classpath>
            <pathelement path="${classes.dir}" />
            <fileset dir="${lib.dir}">
                <include name="*.jar" />
            </fileset>
        </classpath>
        <formatter type="xml" />
        <batchtest todir="${report.dir}">
            <fileset dir="${classes.dir}">
                <include name="**/TestAll.class" />
            </fileset>
        </batchtest>
    </junit>
</target>

<target name="executeRemote">
    <sshexec host="10.1.3.50"
        username="sshuser"
        password="qqqqq"
        trust="true"
        command="D:\bat.bat"/>
</target>

<target name="junitReport" depends="junit">

    <junitreport todir="report">
        <fileset dir="report">
            <include name="TEST-*.xml" />
        </fileset>
        <report styledir="reportstyle" format="frames" todir="report" />
    </junitreport>
    <fail if="tests.failed" />

</target> 
```

===========================

在导出的 HTML 报告中，对于 Hostname 字段，它始终显示为 TestAll.java 所在机器的名称。但它无法获取实际运行脚本的机器的名称。

我不能发图。是这里。 [http://i.stack.imgur.com/d6ZL4.png](http://i.stack.imgur.com/d6ZL4.png)

我检查了 Ant 导出的 TESTS-TestSuites.xml。在这个文件中，它没有远程机器的主机名。

有没有办法将远程机器的主机名输出到这个 TESTS-TestSuites.xml 文件中，然后我可以使用 XSLT 将它们显示到 HTML 报告中？

我想我必须在某处更改 Ant 的源代码？

谢谢！

# jquery - 使用 jquery 使 div 在单击时在容器内移动，（如幻灯片放映）

> ID：13814553
> 
> 赞同：3
> 
> 时间：2012-12-11T06:04:37.090
> 
> 标签：jquery, html

嗨，我是 jquery 的新手，我希望你们中的一个更有经验的人可以帮助我。我有一个容器设置为溢出：隐藏，在里面我有 3 个 div，其中两个是隐藏的，因为它们溢出了。我想让 div 在每次单击容器时都按顺序从右侧滑动。我有第二个 div 在点击时出现，但我不能让第三个移动。每次单击容器时，里面的 div 应该移动 100px，但它不会。请向我解释为什么它没有。这是 JS 小提琴链接-> [http://jsfiddle.net/FSMMA/](http://jsfiddle.net/jack2ky/HBHcC/)

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<style>
    .container{
        width:100px;
    height:100px;
    overflow:hidden;
    position:relative;
}
.one,.two,.three{
    display:inline-block;
    position:relative;
}
    .one{
        width:100px;
        height:100px;
    background-color:green;
}
.two{
    width:100px;
    height:100px;
    background-color:red;
}
.three{
    width:100px;
    height:100px;
    background-color:blue;
}
.boxes{
    width:400px;
}
</style>
</head>

<body>
<script type="text/javascript">
$(document).ready(function(){
    $('.container').click(function(){
        $('.boxes').offset({left :-100})
        });
    });
</script>
<div class="container">
    <div class="boxes">
        <div class="one">
        </div>
        <div class="two">
        </div>
        <div class="three">
        </div>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:56:06.637

你为什么不喜欢 .animate()

```
$(document).ready(function(){
$('.container').click(function(){
    $('.boxes').animate({"left": "-=100px"}, "slow");
    });
}); 
```

并添加这个

```
.boxes{
width:400px;
position:absolute;
 }

.one,.two,.three{
display:inline-block;
position:relative;
float:left; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:12:30.060

你只移动 -100，所以它只移动一个容器，试试下面的代码，它会从之前的值减少 100，所以它移动正常，

```
$(document).ready(function(){
 $('.container').click(function(){
    $('.boxes').offset({left : $('.boxes').offset().left-100})
    });
}); 
```

更新的小提琴：http : [//jsfiddle.net/HBHcC/1/](http://jsfiddle.net/HBHcC/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:44:08.550

要添加到提供的答案...以下将给出幻灯片效果：

```
$(document).ready(function(){

     var pos = 1;

     $('.container').click(function(){

     if(pos < 4) {
         $('.boxes div:nth-child(' + pos + ')').animate({ width: 0 }, 1000);
          pos++;
     }

    });

 });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:58:13.300

老实说，我不确定您的代码为什么不起作用，但我怀疑有其他人可以提供的纯 CSS 修复。也就是说，我摆弄了 CSS *、* JS*和*HTML 并让它工作。

在 HTML 中，我在大多数 div中添加了一个**box类：**

```
<div class="container">
  <div class="boxes">
    <div class="one box"></div>
    <div class="two box"></div>
    <div class="three box"></div>
  </div>
</div>​ 
```

**盒子**类的添加让我可以稍微整理一下 CSS。这与你的问题无关，但我忍不住。:-) 更重要的是，请注意我让盒子向左浮动。

```
.container {
    width: 100px;
    height: 100px;
    overflow: hidden;
    position: relative;
}

.box {
    display: inline-block;
    float: left;
    width: 100px;
    height: 100px;
}

.one {
    background-color:green;
}

.two {
    background-color:red;
}

.three {
    background-color:blue;
}

.boxes {
    width:400px;
}​ 
```

在我的 JavaScript 中，我正在捕获对单个框的点击，而不是对容器的点击。这使我可以检测我们是否在最后一个框上，因为我假设您不希望那个框滚出屏幕。**此外，我没有更改“ boxes** ”div的偏移量，而是更改了左边距。最后，我改用 animate 而不是 offset 有两个原因：首先，我不知道如何让 offset 工作。;-) 其次，如果您愿意，您可以为动画添加延迟以创建滑入效果。

```
$(document).ready(function(){
    $('.box').on("click", function() {
        // Is this the last div, or is there a next one?
        if ($(this).next().length) {            
            var animSpeed = 200;  // Make this 0 for an instant change
            $('.boxes').animate({marginLeft : "-=100"}, animSpeed);
        }        
    });
}); 
```

您可以在[http://jsfiddle.net/HBHcC/11/进行演示](http://jsfiddle.net/HBHcC/11/)

# xml - XML 模式多属性

> ID：13814554
> 
> 赞同：1
> 
> 时间：2012-12-11T06:04:40.927
> 
> 标签：xml, xsd, xml-validation

我正在尝试创建具有不同子元素的必需元素。像这样的示例 XML 文件：

```
<datamodel>
    <info name="user">
        <userRight>add user</userRight>
    </info>
    <info name="admin">
        <role>manager</role>
    </info>
</datamodel> 
```

我目前有以下 xml 架构。

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="datamodel">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="info" maxOccurs="unbounded" minOccurs="0" >
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="userRight" minOccurs="0"/>
              <xs:element type="xs:string" name="role" minOccurs="0"/>
            </xs:sequence>
            <xs:attribute type="xs:string" name="name" use="optional" fixed="user"/>
          </xs:complexType>
        </xs:element>
        <xs:element name="info" maxOccurs="unbounded" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="userRight" minOccurs="0"/>
              <xs:element type="xs:string" name="role" minOccurs="0"/>
            </xs:sequence>
            <xs:attribute type="xs:string" name="name" use="optional" fixed="admin"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

但是，给定的 XML 架构不适用于我拥有的示例 XML 文件。如何修改架构以验证这样的 XML？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:04:45.407

[您可以使用 XML Schema 1.1 和Type Alternative](http://www.ibm.com/developerworks/library/x-xml11pt2/)机制来实现您想要的。它看起来像这样：

```
<xs:element name="info" type="xs:anyType">
    <xs:alternative test="@name='user'" type="userRightType"/>
    <xs:alternative test="@name='admin'" type="roleType"/>
</xs:element> 
```

接下来，找到一个支持 XML Schema 1.1 的 XML Parser。您没有提到您使用哪种语言，但我认为最新的 Xerces2 Java 支持它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T02:42:17.537

或者，您可以使用 Relax NG 而不是 XML Schema，Xerces、Saxon 和大多数库也支持它，并且可以很容易地指定这类东西，例如

```
<?xml version="1.0" encoding="UTF-8"?>
<grammar 
  xmlns="http://relaxng.org/ns/structure/1.0"
  xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
  datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">

  <start>
    <element name="datamodel">
      <oneOrMore>
        <ref name="info" />
      </oneOrMore>
    </element>
  </start>

  <define name="info">
    <element name="info">
      <choice>
        <group>
         <attribute name="name">
           <value>user</value>
         </attribute>
         <oneOrMore>
           <ref name="user-right" />
         </oneOrMore>
        </group>
        <group>
          <attribute name="name">
            <value>admin</value>
          </attribute>
          <oneOrMore>
            <ref name="role" />
          </oneOrMore>
        </group>
      </choice>
    </element>
  </define>

  <define name="role">
    <element name="role">
      <choice>
        <value>admin</value>
        <value>manager</value>
        <value>user</value>
      </choice>
    </element>
  </define>

  <define name="user-right">
    <element name="userRight">
      <choice>
        <value>add user</value>
        <value>delete user</value>
        <value>edit user</value>
      </choice>
    </element>
  </define>
</grammar> 
```

每个都`group`指定`name`具有特定值的属性和特定类型的一个或多个元素，并且这些类型本身被限制为特定值。

就我个人而言，我发现Relax NG 比XML Schema 更自然，它确实允许您指定不能使用XSD 的规则。该教程是关于您需要作为参考的所有内容，它确实非常简单:)

[http://relaxng.org/tutorial-20011203.html](http://relaxng.org/tutorial-20011203.html)

# arrays - 汇编中的数组和循环...代码未输出正确的值

> ID：13814556
> 
> 赞同：0
> 
> 时间：2012-12-11T06:04:49.290
> 
> 标签：arrays, assembly, for-loop, conditional-statements, x86

我有一个包含 10 个值的数组 T，特别是（如果重要的话）并按顺序：2d、5c、5b、d3、9b、9a、48、f1、e8 和 59。
在我的代码中，我试图找到总和、最小值、最大值和平均值。
好吧，我得到了总和和平均值，但由于某种原因，我必须将其除以 2 才能得到正确答案……很奇怪。现在有一次我的 findMin 代码正在工作，（给了我 2d），但现在它不是（只给了 0）。findMax 还给了我一个数组中甚至不存在的值。这是代码：

```
done:   
mov ebx, 0      ;clear for loop counter
mov ecx, 0      ;clear array pointer
mov eax, [T]    ;base case for sum

findSum:
cmp ebx, 10
jge done1       ;if loop count = 10, done
add ecx, 4      ;point to next array value
add eax, [T+ecx]    ;add to register eax
inc ebx
mov sum, eax    ;store sum in var 'sum'
jmp findSum

done1:
;; resets regs for loop counter
mov ebx, 0
mov ecx, 0
mov eax, [T]    ;first val of table is min by default
jmp findMin

findMin:
;; finds the lowest value in table, first value is min by default
cmp ebx, 10     ;while ebx != 10
jge done2       ;else done
add ecx, 4      ;point to next value of array
inc ebx     ;increment loop counter
cmp [T+ecx], eax    ;if value at T is greater than eax(min) 
jge findMin     ;compare next value to min
mov eax, [T+ecx]    ;else value is less than min, assigns to reg eax
mov min, eax    ;assigns it to var min
jmp findMin

done2:
;; resets regs for loop  counter
mov ebx, 0
mov ecx, 0
mov eax, [T]    ;first val of table is max by default
jmp findMax

findMax:
;; finds the highest value in the table, first val is max by default
cmp ebx, 10     ;while ebx != 0
jge findAvg     ; else done
add ecx, 4      ;to point to next value in array
inc ebx     ;increment loop counter
cmp [T+ecx], eax    ;if value at array is less than max(eax)
jle findMax     ;compare next values
mov eax, [T+ecx]    ;else value is greater than max, assign to reg eax
mov max, eax    ;assign to var max
jmp findMax 
```

sum、min、max 都被声明为双字。
您是否看到我必须忽略的原因：
a）总和必须除以 2 才能得到正确的总和？
b) 我的 findMin 和 findMax 段不起作用？（最小值=0 & 最大值=acc）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:04:47.310

您正在处理循环外的第一个元素，但您的计数器仍然从零开始到 10。这意味着，您将处理 11 个元素，第 11 个元素访问内存中数组之后的任何内容。

下次使用调试器来单步调试您的代码，看看它在哪里做了一些意想不到的事情。

请注意，x86 支持有效寻址，其形式`[T+ebx*4]`可以简化您的代码。

# php - WordPress 如何将部分添加到 nav-menus.php？

> ID：13814564
> 
> 赞同：5
> 
> 时间：2012-12-11T06:05:23.983
> 
> 标签：php, plugins, wordpress

我正在构建一个扩展 Wordpress 的自定义菜单的插件，我想将它的新选项放在当前的自定义菜单页面上，但我不知道如何向它添加新部分。

我试图在“nav-menus.php”中添加一个部分，但这似乎没有效果：

```
add_action('admin_init', 'menu_initialize_theme_options'); 

function menu_initialize_theme_options() {  
    add_settings_section(  
        'menu_settings_section',
        'menu Options',                  
        'menu_general_options_callback',
        'nav-menus.php'                            
    );  

    add_settings_field(  
        'test_field',                        
        'Test',                             
        'menu_test_field_callback',  
        'nav-menus.php',                            
        'menu_settings_section',         
        array(                             
            'Activate this setting to TEST.'  
        )  
    );

    register_setting(  
        'nav-menus.php',  
        'test_field'  
    );
}

function menu_test_field_callback($args) {  
    $html = '<input type="checkbox" id="test_field" name="test_field" value="1" ' . checked(1, get_option('test_field'), false) . '/>';
    $html .= '<label for="test_field"> '  . $args[0] . '</label>';  
   echo $html;  
} 
```

我如何将部分添加到此页面？

我真的很希望能够编辑 nav-menus.php 中的当前菜单选项（为每个菜单项添加更多字段），我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:58:29.700

```
add_meta_box( 'metabox-id', 'metabox-title', 'box-callback', 'nav-menus', 'side', 'low' ); 
```

构成第一个和第二个参数。第三个参数需要是您创建框内容的回调函数名称。第四个参数是获取该“导航菜单”页面上的框的关键。第六个可以是“高”、“核心”、“默认”或“低”。

[http://codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)

# iphone - 核心情节如何为特定行数的次要间隔设置背景颜色

> ID：13814566
> 
> 赞同：2
> 
> 时间：2012-12-11T06:05:26.633
> 
> 标签：iphone, objective-c, ios4, core-plot

我是核心情节的新手。

**我有的 ？**

1）Y 轴的主要间隔为 50。范围（0 - 300）所以我的 y 轴从 0、50、100 ... 300 开始。足够公平。

2) 绘制主网格线。

```
CPTMutableLineStyle *yGridLineStyle = [[CPTMutableLineStyle alloc] init];
yGridLineStyle.lineColor = [CPTColor whiteColor];
yGridLineStyle.lineWidth = 0.5;
y.majorGridLineStyle = yGridLineStyle; 
```

网格线以白色显示。

**我需要的？**

1）我希望在图表的背景上显示 3 种不同的颜色。

2) 从 0 到 65 -> 红色。

3) 从 65 - 88 -> 蓝色。

4) 88 以上 -> 绿色。

我怎样才能达到同样的效果？..请指教。

**我试过什么？**

我尝试使用y 轴的**alterBandFills**。例子：

```
y.alternatingBandFills = [NSArray arrayWithObjects:[CPTColor redColor], [CPTColor greenColor], nil]; 
```

但它仅根据主要间隔填充。我无法具体提及它必须从范围开始的哪个小区间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:36:51.660

Core Plot 将这些称为“限制带”。

```
CPTPlotRange *bandRange;
CPTFill *bandFill;

// red
bandRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0)
                                         length:CPTDecimalFromDouble(65.0)];
bandFill = [CPTFill fillWithColor:[CPTColor redColor]];
[y addBackgroundLimitBand:[CPTLimitBand limitBandWithRange:bandRange
                                                      fill:bandFill]];

// blue
bandRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(65.0)
                                         length:CPTDecimalFromDouble(23.0)];
bandFill = [CPTFill fillWithColor:[CPTColor blueColor]];
[y addBackgroundLimitBand:[CPTLimitBand limitBandWithRange:bandRange
                                                      fill:bandFill]];

// green
bandRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(88.0)
                                         length:CPTDecimalFromDouble(212.0)];
bandFill = [CPTFill fillWithColor:[CPTColor greenColor]];
[y addBackgroundLimitBand:[CPTLimitBand limitBandWithRange:bandRange
                                                      fill:bandFill]]; 
```

# asp.net - 数据源参数绑定的下拉列表的设置值

> ID：13814567
> 
> 赞同：0
> 
> 时间：2012-12-11T06:05:30.207
> 
> 标签：asp.net

我在页面上有一些下拉列表，它们从会话变量中获取它们的 SelectedValue。这允许将下拉列表的值保存在多个页面中。

问题是下拉选择的值被用作页面上单独数据源的参数。

如果我尝试在下拉列表数据绑定之前设置下拉列表的值，我会收到异常，因为下拉列表尚未填充。如果我尝试设置下拉列表的值太晚，其他数据源将使用下拉列表的原始值而不是当前值执行。

是否有适当的顺序来处理这些事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:45:43.597

在有时间从下拉列表中获取值之前，不要对数据源进行绑定。向下拉列表的事件添加事件处理程序[`DataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedataboundcontrol.databound.aspx)。在该事件处理程序中，您可以使用下拉列表的选定值绑定数据源。

# python - 使用 PyQt 进行 Web 图像抓取

> ID：13814569
> 
> 赞同：1
> 
> 时间：2012-12-11T06:05:56.053
> 
> 标签：python, pyqt, web-scraping, qtwebkit

我想构建一个网络抓取实用程序，旨在捕获要查看的图像。一些图像包含透明层，因此设计为在特定颜色或纹理背景前查看。对于此类图像，我想截取屏幕截图，但将其裁剪为仅被抓取的图像，以便捕获具有相关背景的图像。

我正在查看 PyQt 的 QtWebKit 模块。对于那些熟悉的人，这个模块是否适合我的需求？或者也许不同的库或实用程序更适合这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:19:33.360

I would suggest looking at PhantomJS ([http://phantomjs.org/](http://phantomjs.org/)). I picture the workflow being to use phantomjs to capture the entire page, as well as capture the data of the image position and size. Then use PIL (or even just GraphicsMagick) to crop the capture page down to just that image.

PhantomJS is programmed in javascript, but you should only need a few lines of JS code to load the page, find the image in it to query the size and position and snap the capture.

EDIT (in response to comment): Sure. You can use jQuery, or other tools of your choice. Here is a short example of phantomjs to open a page and get the size/position of an image in the page:

```
 var page = require('webpage').create();
 page.open(URL, function(status) {
   var img_attr = page.evaluate(function(){
            var el = $("img#SpecialID");
            var result = el.offset();  // Returns top, left
            result.width = el.width();
            result.height = el.height();
            return result;
        });
   console.log(img_attr);  //Obviously, you'd want to write that to disk instead
   page.render(OUTPUT_FILE);
  }); 
```

So, if you fix up the console.log to write a record to disk, and add command line options for URL and OUTPUT_FILE, as well as maybe some error handling, and you will have a handy utility to call from your Python code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:06:54.873

我建议你`spynner`在使用[python](/questions/tagged/python "显示标记为“python”的问题") =)

```
import spynner

browser = spynner.Browser()
browser.load("http://www.wordreference.com")
browser.snapshot( .... )
browser.close() 
```

见[https://github.com/makinacorpus/spynner](https://github.com/makinacorpus/spynner)

# wpf - 将图像转换为base64时图像翻转

> ID：13814570
> 
> 赞同：0
> 
> 时间：2012-12-11T06:05:58.463
> 
> 标签：wpf, base64, bitmapimage, rectangles, imagebrush

我有一个矩形并用图像填充它

```
 <Rectangle Height="95" Fill="{Binding Path=Image,RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay,Converter={StaticResource ConvertBase64toImage}}" Stroke="{x:Null}" x:Name="EditPhotoRectangel">
       <Rectangle.BitmapEffect>
           <DropShadowBitmapEffect ShadowDepth="7" Softness="0.75"/>
       </Rectangle.BitmapEffect>
 </Rectangle> 
```

Image 是一个 base64 字符串，我为它设置了图像。

```
 private string ImageToBase64(System.Drawing.Image image, ImageFormat format)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            // Convert Image to byte[]
            image.Save(ms, format);
            byte[] imageBytes = ms.ToArray();

            // Convert byte[] to Base64 String
            string base64String = Convert.ToBase64String(imageBytes);
            return base64String;
        }
    } 
```

并使用转换器将 Base64 转换为 imagebrush 以填充矩形。

```
 ImageBrush brush = new ImageBrush();
 BitmapImage bitmap = new BitmapImage();
 // convert base64string to byte[].
 byte[] binaryData = System.Convert.FromBase64String((string)value);
 bitmap.BeginInit();
 // Initializes a new non-resizable instance of the MemoryStream class based on the binaryData array.
 bitmap.StreamSource = new MemoryStream(binaryData);
 bitmap.EndInit();
 //set bitmapimage for brush imagesource 
 brush.ImageSource = bitmap;
 return brush; 
```

我的问题是：当我为这个`Rectangle`填充选择一个图像时，我的图像翻转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:48:44.157

这只是一个疯狂的猜测......需要写一个样本来确认......

我注意到您正在使用`System.Drawing.Image`对源位图二进制数据进行编码以及`System.Windows.Media.BitmapImage`对二进制数据进行反序列化。

GDI+ (WinForms) 世界中的编码器/解码器和 WPF (DirectX) 之间的支持肯定存在一些差异......特别是如果您使用`ImageFormat.MemoryBmp`, 或`myimage.RawFormat`（即暴露在 上的属性），您可能会遇到问题`Image`。

碰巧的是，DIB（与设备无关的位图）通常将其扫描线以自下而上的方式存储，即倒置（负步幅）。

因此，这可能与您创建/初始化的方式有关`System.Drawing.Bitmap`，这是整个过程的来源……也许您使用`CopyPixels`了……它指向了像素从下到上排列的数据，反之亦然。

您是否尝试过`.Save`对该传入的物理 BMP 或 JPEG 文件执行操作，`Bitmap`以查看它是否正确（您甚至可以在调试器中执行此操作）。

如果您无法追查此转换失败的原因，那么一些可能的解决方案是：

*   进行必要的转换以将图像翻转回适当的方式或
*   使用不同的`ImageFormat`/以不同的方式创建传入`Bitmap`或
*   当您将 base64 数据反序列化回位图时，`System.Drawing.Image`再次使用该类（因此您在序列化过程的两端使用了相同类型的类），然后将该对象转换为`BitmapImage`对象。

如果您可以提供有关如何创建传入的更多详细信息，`System.Drawing.Bitmap`这将有所帮助，即您是从文件中加载它（它是哪种格式？），或者您创建了一个然后通过`Graphics`上下文绘制到它，或者您使用 CopyPixels 并复制来自某处的原始像素数据（例如，来自通常存储从下到上的扫描线的 DIB）。

一些信息链接：

*   [C#如何写入位图数据。是自下而上还是自上而下？](https://stackoverflow.com/questions/8572260/how-does-c-sharp-write-bitmap-data-is-it-bottom-up-or-top-down)
*   [http://msdn.microsoft.com/en-gb/library/windows/desktop/dd407212(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd407212(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:38:47.853

我用

```
 FlowDirection="LeftToRight" 
```

这对我有用:)

# sharepoint-2010 - 如何在 Sharepoint 2010 webpart 中使用日历‏

> ID：13814571
> 
> 赞同：0
> 
> 时间：2012-12-11T06:05:58.370
> 
> 标签：sharepoint-2010

我是sharepoint的新手。请帮我解决以下问题

我想要文本框旁边的日历图标，当我单击日历图标并选择日期时，它会填充到文本框中。这必须通过使用 Sharepoint 日历来完成。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:14:05.543

您可以使用 SharePoint 的日期时间选取器控件。

请参见下面给出的示例
[http://www.sharepoint-tips.com/2007/10/using-sharepoint-date-control-in-web.html](http://www.sharepoint-tips.com/2007/10/using-sharepoint-date-control-in-web.html)

# c++ - c++ 指针丢失指针引用

> ID：13814577
> 
> 赞同：0
> 
> 时间：2012-12-11T06:06:42.423
> 
> 标签：c++, pointers, runtime-error

我有一个如下所述的课程

```
class Investment
{
private:
    void init(BWAPI::UnitType type1, BWAPI::UpgradeType type2, BWAPI::TechType type3, int numOfItems);
    UpgradeType upgradeType;
    TechType techType;
    UnitType unitType; 
```

我的init方法就是这样

```
void Investment::init(BWAPI::UnitType type1, BWAPI::UpgradeType type2, BWAPI::TechType type3, int numOfItems)
{
    if (type1 != NULL) {

        this->unitType = type1;
        this->type = type1.isBuilding() ? BUILDING_TYPE : UNIT_TYPE;

    } else if (type2 != NULL) {

        this->upgradeType = type2;  
        this->type = UPGRADE_TYPE;

    } else if (type3 != NULL) {

        this->techType = type3; 
        this->type = TECH_TYPE;
    }

    this->numOfItems = numOfItems;
} 
```

我以这种方式得到我的物品（只能是三种可能类型中的一种）

```
const void* Investment::getItem() const
{
    if (unitType != NULL)
        return &unitType;
    else if (upgradeType != NULL)
        return &upgradeType;
    else if (techType != NULL)
        return &techType;

    return NULL;
} 
```

但是当我使用`UnitType* type = (UnitType*) investment->getItem();`指针获取项目时会发生什么失去它的价值

当我调用`type->getName().c_str();`它时返回一个空字符串

为了获得投资，我调用了一个 Stack 方法

```
// I have a stack of type std::vector<T*> stack;

T* getNext() {

    clear();

    for (int i = 0, leni = stack.size(); i < leni; i++) {

        T* t = stack.at(i);

        if (!t->isDone() && !t->isCanceled())
            return t;
    }

    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:17:56.057

`Investment`我认为你可以通过让类持有一个（最好是[smart](http://en.wikipedia.org/wiki/Smart_pointer)）指向`Type`基类的指针来大大简化问题。在这个例子中，我使用了一个在`Investment`析构函数中被删除的原始指针，但[如果](http://en.cppreference.com/w/cpp/memory/unique_ptr)[你](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/scoped_ptr.htm)想将[类型](http://en.cppreference.com/w/cpp/memory/shared_ptr)的生命周期从`Investment`.

```
class InvestmentType { // some public virtual methods };

class UpdgadeType : public InvestmentType { /* Implement InvestmentType methods*/ };
class TechType : public InvestmentType { /* Implement InvestmentType methods*/ };
class UnitType : public InvestmentType { /* Implement InvestmentType methods*/ };

class Investment
{
 private:
    void init(const InvestmentType&  type, int numOfItems) : nItems_(numOfItems), type_(new type) {}
    int nItems_;
    InvestmentType* type_;
    ~Investment() { delete type_; }
 public:
    const InvestmentType* getItem() const { return type_; }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:52:16.347

只是快速浏览一下代码就让我怀疑......使用的类型（即`UpgradeType`，`TechType`和`UnitType`）是指针吗？它看起来不像那样，因为您使用 address-of 运算符在`getItem`.

如果它们*不是*指针，则不能将它们与 进行比较`NULL`，因为非指针*从不* `NULL`。这意味着*总是*`getItem`会返回一个指向变量的指针。*`unitType`*

 *我建议您重新设计，正如 juanchopanza 的回答中所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:19:37.370

由于您无法按照建议进行重构，因此您应该根据您在函数`type`中分配的成员检查需要返回的类型。`init()`我认为这会起作用，但是您没有显示`type`定义的位置：

```
const void* Investment::getItem() const
{
    switch(type)
    {
        case BUILDING_TYPE:
        case UNIT_TYPE:
           return &unitType;
        case UPGRADE_TYPE:
           return &upgradeType;
        case TECH_TYPE:
           return &techType;
    }

    return NULL;
} 
```

然而，这样做意味着调用者`getItem()`必须能够执行适当的向下转换。鉴于您没有明确提供此内容，这将成为代码用户混淆的持续来源。

# 然而：

如果您四处走动`void*`并期望您的类的用户向下转换为正确的类型，这几乎总是表明`C++`. 正确的方法是将其重构为适当的多态类层次结构，正如@juanchopanza 在他的回答中所建议的那样。*

# scala - 玩！框架 - build.sbt 和 Build.scala

> ID：13814578
> 
> 赞同：4
> 
> 时间：2012-12-11T06:06:51.507
> 
> 标签：scala, playframework, sbt

我正在尝试将各种设置与我的 Play 中的构建定义分开！2.1 应用。

我在 build.sbt 中定义了一些设置如下：

```
name := "My Project"
version := 1.0 
```

如何在 Build.scala 中重用这些值？

```
object ApplicationBuild extends Build {

  val main = 
    // Doesn't compile since name and version are SettingKeys, not Strings
    play.Project(name, version).settings(
      // ...
    )

} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T09:22:19.847

如果您需要访问密钥，您可以使用`<<=`代替（例如代替）。在这种情况下，我们希望从全局范围中提取版本和名称。`:=``<+=``+=`

```
val main = play.Project(appName, appVersion, appDependencies).settings(
  version <<= (version in Global)  { v => v} ,
  name <<= (name in Global) { n => n } 
) 
```

虽然由于这是默认范围，但在这种情况下我们可以省略范围。

```
val main = play.Project(appName, appVersion, appDependencies).settings(
  version <<= (version)  { v => v} ,
  name <<= (name) { n => n } 
) 
```

一个更短的版本很简单

```
val main = play.Project(appName, appVersion, appDependencies).settings(
  version <<= version ,
  name <<= name
) 
```

请注意，您的`build.sbt`文件必须放在根目录而不是`project/`目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T01:45:21.493

Build.scala 无法访问您在 build.sbt 中定义的值，但它可以反过来工作。无论您在这里尝试做什么，实际上都只是试图破解 SBT 0.12。

我建议您在 .scala 文件中定义共享设置，即。设置.scala。然后您可以从 Build.scala 和 build.sbt 中引用这些共享设置。

**设置.scala**

```
object Settings {
  appName:= "My Project"
  appVersion:= 1.0
} 
```

**构建.scala**

```
object ApplicationBuild extends Build {
  val main = play.Project(appName, appVersion, appDependencies)...
} 
```

**构建.sbt**

```
name := Settings.appName
version := Settings.appVersion 
```

当然，如果您将 Play 2.2 与 SBT 0.13 一起使用，情况会有所不同。:)

让我知道这是否有意义并让您感觉更清洁。

# mongodb - 有没有办法以更好的格式查看 mongo 结果？

> ID：13814581
> 
> 赞同：2
> 
> 时间：2012-12-11T06:07:01.407
> 
> 标签：mongodb

有没有办法以更好的格式查看 mongo 结果，就像我们在 sql 中使用 \G 一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T06:21:02.737

没有办法像在 MySQL 的 \G 中看到的那样启用垂直打印。在上下文中，视图不太有用，因为 MongoDB 是一个文档存储，可以有嵌套文档等。

您可以通过在查询中添加 a 以漂亮的打印方式打印出查询的结果`.pretty()`：

```
db.test.find().pretty() 
```

这将在扩展的文档视图中返回结果，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T08:33:05.270

除了@Andre 解决方案，如果您只想获得一个元素。您可以使用 findOne 功能。它漂亮地打印了该文档。

```
db.test.findOne() 
```

您也可以在光标上使用 toArray。虽然它是一个记忆猪，但对于少数结果来说，它的打印效果很好，

```
db.test.find({...}).toArray() 
```

# asp.net-mvc - Razor 与 aspx 相比有什么好处？

> ID：13814589
> 
> 赞同：2
> 
> 时间：2012-12-11T06:07:36.103
> 
> 标签：asp.net-mvc, razor, template-engine

大约一年以来，我一直在研究 MVC aspx。但不能去剃刀。我知道 aspx 和 razor 之间存在语法差异。但无法理解其中的好处。如果它只是一种替代方案，那么为什么需要精确实施呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:24:22.550

检查出来非常有趣的[剃刀与 aspx](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T06:12:10.980

> **可单元测试**：新的视图引擎实现将支持单元测试视图的能力（不需要控制器或 Web 服务器，并且可以托管在任何单元测试项目中——不需要特殊的应用程序域）。
> [Razor/CSHTML - 对我们拥有的任何好处？](https://stackoverflow.com/questions/3423732/razor-cshtml-any-benefit-over-what-we-have)

# mcrypt - 在 CENTOS 5.8 x86_64 上安装 mCrypt

> ID：13814591
> 
> 赞同：1
> 
> 时间：2012-12-11T06:07:38.800
> 
> 标签：mcrypt

安装时遇到一些问题，并认为我会再次发布。我尝试 yum install php-mcrypt* 或 yum install php-mcrypt，它说没有可用的软件包。

我尝试使用 su -c 'rpm -Uvh [http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-7.noarch.rpm](http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-7.noarch.rpm) ' 安装 EPL，它说“传输失败”。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:16:58.633

因此，您是否按照[Fedora](http://fedoraproject.org/wiki/EPEL/FAQ#How_can_I_install_the_packages_from_the_EPEL_software_repository.3F)提供的有关如何安装该存储库的说明进行操作，以便您可以访问它？故障排除是从 yum clean all 开始（您需要 sudo 访问权限），然后是 yum list php-mcrypt？如果是这样并且没有返回结果，您需要检查您的服务器以确保其配置正确，您甚至可以 ping download.fedoraproject.org 吗？你能用卷发达到它吗？过去我不太确定为什么传输会因您提供的错误而失败，我们需要在您运行命令时查看完整输出（我假设您确实拥有正确的 sudo 权限？）如果您只是想拉下该 rpm，您总能找到它并运行 wget，然后使用 RPM 本身手动安装。

虽然这将为您提供 RPM（如果您可以访问主机），但它会带来问题，您如何升级 RPM 并知道何时升级？如果我们自动化系统，这个 RPM 会在新版本发布时更新吗？我们如何跟踪哪个版本应该在哪个服务器上运行？我们如何防止配置漂移？虽然这些问题是相当高的水平，但重要的是要考虑它们。我建议您首先查看您的 /etc/yum.repos.d/ 目录以查看已存在哪些 repo 文件，并探索这些文件中包含的 repos（这将允许您查看它们的结构以确定您是否需要 RPM只是在不同的目录中），既可以作为学习经验，也可以作为了解 repo 文件组织方式的一种方式。在您进行审核时[有关配置 Yum 和 Yum repos 的 Fedora 文档](http://docs.fedoraproject.org/en-US/Fedora/12/html/Deployment_Guide/sec-Configuring_Yum_and_Yum_Repositories.html)，或您的发行版的文档。这应该允许您正确确定此 RPM 来自哪个 repo，添加一个 repo 文件，该文件将使您能够保留相关更新，然后通过 YUM 安装 RPM。

# html - HTML - 文本和图像之间的不间断空格

> ID：13814592
> 
> 赞同：16
> 
> 时间：2012-12-11T06:07:49.430
> 
> 标签：html

所以我有一个菜单，其中每个（多行）项在菜单项的最后一个单词之后都有一个图像 rightarrow.png。问题是有时这个箭头会自己进入换行符，我想阻止这种情况发生。我试过

```
Blah blah&nbsp;<img src="rightarrow.png" /> 
```

但在某些情况下，它看起来仍然像

```
Blah blah
> 
```

这让我疯狂。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T06:11:38.420

将所有文本放入一个元素中，然后将图像放入另一个包装器中。添加`white-space:nowrap`到他们的父母。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T07:42:12.517

这是适用于浏览情况的方法：

```
Blah <nobr>blah <img src="rightarrow.png" /></nobr> 
```

出于某种奇怪的原因，该`nobr`标签从未达到 HTML 规范，但这并不妨碍它工作。如果您只需要遵守规范，请改用 clumsier CSS：

```
Blah <span style="white-space: nowrap">blah <img src="rightarrow.png" /></span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T06:22:10.710

检查这个[BIN](http://jsbin.com/evecud/1/edit)。我在假设这是你需要的之后做了这个。

HTML

```
 <ul>
<li><p>Menu 1</p> <img src="http://www.eurotunnel.com/uploadedImages/commercial/back-steps-icon-arrow.png" align="right"/></li>
<li><p>Menu 2</p> <img src="http://www.eurotunnel.com/uploadedImages/commercial/back-steps-icon-arrow.png" align="right"/></li>
<li><p>Menu 3</p> <img src="http://www.eurotunnel.com/uploadedImages/commercial/back-steps-icon-arrow.png" align="right"/></li>
<li><p>Menu 4</p> <img src="http://www.eurotunnel.com/uploadedImages/commercial/back-steps-icon-arrow.png" align="right"/></li>
  </ul> 
```

CSS

```
ul{ list-style-type:none;}
ul li{ float:left; padding:10px; width:100px;}
img{ width:20px;height:20px; float:left;}
p{ float:left; margin:0px; } 
```

[在这里](http://vivekdragon.wordpress.com/)查看更多详情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-12T18:59:56.303

为图像添加`position: absolute;`规则；如果您不为其添加左/右定位，它将显示为内联。

# javascript - 谷歌地图：根据数组值添加不同的图像标记

> ID：13814593
> 
> 赞同：-3
> 
> 时间：2012-12-11T06:08:00.883
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在执行以下操作以将标记添加到数组中的谷歌地图。

我的问题是指我试图设置的函数的结尾`marker.icon = imageUnlikely;`我试图让标记成为图像而不是标准的谷歌地图标记，但它不起作用。如果我添加`icon: imageUnlikely`到`marker`对象中，图像会正确显示。

有任何想法吗？

```
var imageUnlikely = new google.maps.MarkerImage('/BeachApp/maps/Unlikely.PNG', new google.maps.Size(15, 14));

function SetupMarkers(map, locations) {
var shapeNoUpdate = {
coord: [0, 0, 218, 200],
type: 'rect'
};

var shapeWithUpdate = {
coord: [1, 1, 1, 20, 55, 20, 55, 1],
type: 'poly'
};

for (var i = 0; i < locations.length; i++) {

    var beach = locations[i];

    var beachId = beach[7];

    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);

    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,   
        shape: shapeNoUpdate,
        title: beach[0] + ' - pollution ' + beach[4],
        beachId: beachId,        
        arrayIndex: i

    });

    if (beach[4] == 'Unlikely') {
        marker.icon = imageUnlikely;
    } 

}
}

SetupMarkers(map4, beaches4); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:46:00.947

不要使用未记录的属性（[google.maps.Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)没有任何记录的属性）。使用记录的方法，在本例中为 setIcon()。

示例（未测试）：

```
 if (beach[4] == 'Unlikely') {
    marker.setIcon(imageUnlikely);
 } 
```

# java - 需要一些关于 java.util.list 的说明

> ID：13814595
> 
> 赞同：2
> 
> 时间：2012-12-11T06:08:14.080
> 
> 标签：java, list, memory-leaks

需要对`java.util.list`. 我正在使用 eclipse 进行开发。
我写了这段代码

```
public static void main(String[] asdf){
        List<Integer> lst = new ArrayList<Integer>();
        for(int i=0;i<10000;i++){
            lst.add(i);
        }

        System.out.println(lst.size());

        for(int i=0;i<10000;i++){
            if((i%50)==0){
                lst.remove(i);
            }           
        }
        System.out.println(lst.size());

    } 
```

但是当我运行这段代码时，它给出了异常

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 9850, Size: 9803
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.remove(ArrayList.java:445)
    at com.ilex.reports.action.rpt.CNSReports.main(CNSReports.java:301) 
```

还有一点需要注意的是 ![在此处输入图像描述](../Images/c22afb0657989735c1907b5aa722065e.png)

然后我对代码进行了一次更改，即仅将第二个循环迭代到 5000 并且效果很好

![在此处输入图像描述](../Images/829462ae4954bc27b14d095e051ce1ef.png)

**问题是** 为什么要给出 IndexOutOfBoundsException ？

那是什么 modCoutn ？

如果是的话，这件事是否会成为内存泄漏的原因如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T06:10:19.430

从列表中删除元素会使其更小。您的第二个循环一直运行到 10000，但到那里时列表将缩小到小于 10000。

事实上，如果您的意图是删除所有 50 的倍数，您可以从 10000 向后循环到 0，步长为 50 并避免这个问题，并且更快。

```
for (int i=9950; i>=0; i-=50){
    lst.remove(i);
} 
```

请注意，如果您的意图是删除 50 的倍数，则您当前的方法将不起作用，因为在第一次删除每个索引处的值是索引的不变量之后，不再成立。

modCount 是一个内部变量，ArrayList 使用它来检测它是否参考了它上面的任何迭代器而改变。它基本上计算了对列表的所有修改。Iterator 保持自己的计数，并检查它是否与 List 保持同步。

您的代码不会导致任何内存泄漏。如果仍然引用不再使用的对象，那么在 java 内存“泄漏”中，它们不能被垃圾收集。但是由于示例中的所有内容都在方法范围之外传递，因此一旦离开方法，所有内容都可以被 gc'd。（由于它是主要方法，vm 也会停止运行并释放它的内存）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T06:17:13.387

列表不是数组，即使 an*由*数组`ArrayList`支持。

 *```
intArray[i] = null; 
```

不一样

```
arrayList.remove(i); 
```

在第二个中（使用`ArrayList`），您实际上是`i+1`在向下移动所有元素，从而减小列表的大小。

如果您需要从正在执行迭代的列表中删除元素，您可以使用[`Iterator`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)：

```
Iterator<Integer> iterator = list.iterator();
int i = 0;
while (iterator.hasNext()) {
    iterator.next(); // consume current item
    if ((i++ % 50) == 0) {
        iterator.remove();
    }
} 
```

或者你可以使用这个 hacky hack

```
for(int i=0, len=lst.size();i<len;i++){
    if((i%50)==0){
        lst.remove(i);
        len--;  // decrease size of upper bound check
    }           
}

// or better...
for (int len=lst.size() - 1, i=len - (len % 50); i>=0; i-=50){
   lst.remove(i);
} 
```

...但迭代器解决方案是~~你应该如何处理这种情况~~通常如何通过一个`Collection`.

`modCount`每次您`add`或您的( )中的`remove`元素时都会增加。这很重要，因为当您迭代元素时，您不想“错过”或让其他东西在中途改变您的元素。（在多线程应用程序中尤其如此。）因此，如果某些进程在使用迭代器时修改了您的，您将收到警告，表明您的列表自迭代器创建以来已更改。（参见[List.iterator()](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#iterator%28%29)）`List``ArrayList``ArrayList`[`ConcurrentModificationException`](http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html)

最后，对于您的最后一个问题，您不应该担心内存泄漏和`ArrayList`，除非您的列表中的元素在其他地方被引用。在 Java 中，只要一个对象没有被任何其他对象引用，它就成为[垃圾回收](http://javarevisited.blogspot.ca/2011/04/garbage-collection-in-java.html)的候选对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T06:12:56.503

当您删除列表中的元素时，您的列表大小会变小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T06:14:40.793

```
 List<Integer> removeElements = new ArrayList<Integer>(); 
 for(int i=0;i<10000;i++){
            if((i%50)==0){
                removeElements.add(lst.get(i));
            }           
        }

 lst.removeAll(removeElements); 
```

这是更安全的方法

关于内存泄漏：

在这里您不必担心内存泄漏，因为当引用卡住的时间超过所需时间并且没有收集垃圾时会发生内存泄漏。这通常是由于**静态引用**而发生的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T06:15:50.953

你可能想要这样做：

```
for(int i=0;i<10000;i++){
        if((i%50)==0){
            lst.remove(Integer.valueof(i));
        }           
    } 
```

List 有 2 个删除方法，按索引和按对象。您的列表包含对象，您在其中添加了一些“int i”（原始），但编译器将其替换为自动装箱：

```
Integer.valueof(i) 
```

因此，当您删除时，您不是按对象删除，而是按索引删除。

例如，您有列表：{3, 2, 1}

你打电话时：

*   remove(0), list become: {2, 1} // 按 id 删除
*   remove(1), list become: {3, 1} // 按 id 删除
*   remove(Integer.valueof(1)), list become: {3, 2} // 按对象删除

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T17:28:10.143

第一点：在这部分代码中，您将删除列表中的元素，请参见：

```
for(int i=0;i<10000;i++){
            if((i%50)==0){
                lst.remove(i);
            }           
        } 
```

这就是为什么您的列表大小正在减少并且您收到该错误的原因，即`java.lang.IndexOutOfBoundsException`

第二点： modCount 看起来像 eclipse 的内部计数列表。第三点：随着列表大小的减少，这不会成为内存泄漏的原因。

希望这会帮助你。*

# node.js - 在 Node.js + Express 中记录错误的任何实际稳定方法？

> ID：13814597
> 
> 赞同：5
> 
> 时间：2012-12-11T06:08:40.563
> 
> 标签：node.js, express

所以，我一直在安静地看着这个。从 Node.js 0.8.15 开始，`Event: 'uncaughtException'`http [:](http://nodejs.org/api/process.html#process_event_uncaughtexception) //nodejs.org/api/process.html#process_event_uncaughtexception说：

```
Don't use it, use domains instead. If you do use it, restart your application after every unhandled exception! 
```

[http://nodejs.org/api/domain.html](http://nodejs.org/api/domain.html)上的域说：

```
Stability: 1 - Experimental 
```

（他们也拒绝为我工作——我的应用程序仍然崩溃）

我要做的就是不让我的 Node.js + Express 应用程序崩溃。

任何人成功地将所有错误记录到文件（预期和意外的语法错误）并且不让 Node.js 崩溃的任何实际方式？

我听过很多理论上的答案，任何有效的实际代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T18:32:01.073

我遇到过类似的情况，并且一直在使用未捕获的异常。它可能并不漂亮，但通过一些额外的工具，我认为你最终可以得到一个不错的结果。

## 使用 Forever 和 Winston

### 让它崩溃

如果您只想让您的应用程序保持正常运行，可以考虑[从 NodeJits 中永久](https://github.com/nodejitsu/forever)使用。你可以设置一个阈值，它应该重启你的应用程序的次数，以防你遇到一个讨厌的错误并且它不会继续存在。在发生未捕获的异常时不允许您的应用程序循环可能会使应用程序处于无效状态并导致更多异常。为什么不让它崩溃并永远为您重新启动它。

### 退出前记录

要捕获并记录错误，请尝试使用[winston](https://github.com/flatiron/winston)捕获并记录未捕获的异常，然后退出。请参阅其自述文件中关于使用 Winston 处理未捕获异常的部分，该部分解释了如何处理这种确切情况。如果 winston 正在记录到一个文件，您可以参考它并查看您的应用程序崩溃的频率以及原因。

### 结果

结合这两者，您应该能够设置一个可以参考的未捕获异常日志文件，让您的应用程序在大多数情况下保持正常运行，并避免忽略可能使您的应用程序处于无效状态的异常。

亚历克斯

# javascript - 使用 YouTube JS API 检索当前视频的 TITLE

> ID：13814598
> 
> 赞同：2
> 
> 时间：2012-12-11T06:08:41.663
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

我使用 YouTube Javascript API 创建了一个 YouTube 播放器，它加载了我创建的播放列表。

由于视频是无镶边的，因此不显示控件或视频信息。我希望拉出当前播放视频的标题并将其显示在下面。我可以使用 ytplayer.getDuration() 和 ytplayer.getCurrentTime() 等信息提取当前时间位置和当前视频持续时间等信息。

想知道“ytplayer.getTitle()”之类的东西是否可能存在但没有记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-21T09:37:44.213

有可能，对于仍在寻找这个问题的答案的每个人来说，都有一个 javascript 函数：

```
player.getVideoData().title 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T07:37:18.560

您无法从 ytplayer 对象获取标题，因为它实际上只是播放器控件的接口。但是您可以添加对视频源的快速调用（可能作为 onPlayerReady 函数的一部分，但它实际上可以在任何地方）。例如，使用 jQuery，这只需要：

```
$.get('http://gdata.youtube.com/feeds/api/videos/[videoid]?v=2&alt=json',function(data) {
       title=data.entry.title.$t;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-29T23:05:27.533

如果您使用 getVideoData 方法，您将可以访问标题。查看代码片段，我尝试了这个并将下面的行打印到控制台。

```
console.log(player.getVideoData().title);
Necrotic Flesh - Prenatal Decomposed 
```

# testing - 使用 Grails Build Test Data Plugin 创建对象而不保存它

> ID：13814601
> 
> 赞同：2
> 
> 时间：2012-12-11T06:08:49.540
> 
> 标签：testing, grails

我需要创建一个传递所有约束的对象实例，而不保存它。

Build Test Data 'build' 方法保存实例。

插件是否有可选参数或其他方法来获取“相同”对象而不保存它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T06:50:06.240

是的，只需调用`buildWithoutSave`而不是`build`.

# unity3d - 如何在Unity3d中的Texture2D上设置Aspect中的图像

> ID：13814602
> 
> 赞同：0
> 
> 时间：2012-12-11T06:08:53.137
> 
> 标签：unity3d, texture2d

嗨，我是 Unity 中的新蜜蜂，我正在开发一个应用程序，我想在其中加载我的图像在纹理上的纵横比适合率。我知道我可以使用 ScaleMode.ScaleToFit 来实现这一点，但我没有在 Texture 2d 中获得这个属性。我正在这样做。

```
Texture2D tex = Resources.Load("ImageTargetTextures/WhatTheBuck/MYPicture") as Texture2D; 
video.mIconPlane.renderer.material.mainTexture = tex; 
video.mIconPlane.transform.rotation=Quaternion.AngleAxis(180, Vector3.up); 
video.mIconPlane.transform.localScale = ScaleMode.ScaleToFit; 
```

Video 是我的 VideoClass 的对象，mIconPlane 是 Video Class 中的公共游戏对象。这对我来说会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:19:18.663

您可以从类的一个公共属性中获取以像素为单位的图像大小`Texture2D`（现在可以确切地知道是什么）。然后，只需设置`new Vector3 (textureWidth/someValue, textureHeigth/someValue,1)`为`video.mIconPlane.transform.localScale`. `someValue`- 是使您的游戏对象大小随心所欲的一些数字。这取决于`Camera`大小。

# python - selenium webdriver python - 如果自定义编写的 python 代码中存在错误，则使 selenium 测试用例失败

> ID：13814604
> 
> 赞同：3
> 
> 时间：2012-12-11T06:08:58.980
> 
> 标签：python, selenium, exception-handling, webdriver, selenium-webdriver

我有一个使用 selenium IDE 导出到 python 的 selenium webdriver 测试用例。然后想添加一些额外的功能，所以在 selenium 测试用例之间插入了自定义代码。

现在的问题是 - 如果我犯了错误或自定义编写的 python 代码返回错误 - selenium 测试用例仍然继续执行

而如果出现此类错误，我希望停止执行 selenium 测试用例。通过简单的谷歌搜索复制了下面的场景，然后是使用shutil模块的日志移动代码

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re
import os, shutil

class SeleniumException(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Chrome()
        self.driver.implicitly_wait(30)
        self.base_url = "https://www.google.co.in/"
        self.verificationErrors = []

        self.attachment = 1
        self.file_source_location = "F:\\python_test\\logfiles\\"
        self.file_move_location = "F:\\logfiles_back\\"

    def test_selenium_exception(self):
        driver = self.driver
        driver.get(self.base_url + "/")
        driver.find_element_by_id("gbqfq").clear()
        driver.find_element_by_id("gbqfq").send_keys("Check this out")
        if self.attachment:
            try:
                for contents in os.listdir(self.file_source_location):
                    src_file = os.path.join(self.file_source_location, contents)
                    dst_file = os.path.join(self.file_move_location, contents)
                    shutil.move(src_file, dst_file)
                print'files_moved_success'
                driver.find_element_by_link_text("check out - definition of check out by the Free Online Dictionary ...").click()
            except Exception as e:
                print e

    def is_element_present(self, how, what):
        try: self.driver.find_element(by=how, value=what)
        except NoSuchElementException, e: return False
        return True

    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
    unittest.main() 
```

在此代码中 - 如果从 logfiles 到 logfiles_back 的移动由于路径错误等原因而失败...等 catch 块被执行，我希望 selenium 测试用例退出报告错误

现在发生的是它报告错误并完成测试用例的执行

如何使这成为可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T06:23:00.197

如果要引发实际触发的异常，可以`raise`自行调用，这将引发最后一个活动异常：

```
try:
    for contents in os.listdir(self.file_source_location):
        src_file = os.path.join(self.file_source_location, contents)
        dst_file = os.path.join(self.file_move_location, contents)
        shutil.move(src_file, dst_file)
    print'files_moved_success'
    driver.find_element_by_link_text("check out - definition of check out by the Free Online Dictionary ...").click()
except Exception as e:
    print e
    raise # Raise the exception that brought you here 
```

如果您不想要回溯而只想退出，您也可以在`sys.exit(1)`之后调用（或您想要使用的任何错误代码）`print e`：

```
import sys
# ...
try:
    for contents in os.listdir(self.file_source_location):
        src_file = os.path.join(self.file_source_location, contents)
        dst_file = os.path.join(self.file_move_location, contents)
        shutil.move(src_file, dst_file)
    print'files_moved_success'
    driver.find_element_by_link_text("check out - definition of check out by the Free Online Dictionary ...").click()
except Exception as e:
    print e
    sys.exit(1) 
```

# graphics - 如何使用 Direct2D 有效地将像素写入屏幕

> ID：13814610
> 
> 赞同：2
> 
> 时间：2012-12-11T06:09:36.443
> 
> 标签：graphics, microsoft-metro, directx, direct2d

我有一个像素数组 (m_pixels)，我想使用 Direct2D 将其渲染到屏幕上。该数组包含 10,000 个元素（100 行，每行 100 个像素）。下面的代码循环遍历像素并将它们作为 10x10 矩形绘制到屏幕上。有没有更有效的方法来执行这个操作？如何为像素/图像添加高斯模糊效果？

```
m_d2dContext->BeginDraw();
m_d2dContext->Clear(ColorF(0.0f, 0.0f, 0.0f));

// Render m_pixels
// m_pixels is updated by the solver directly before render
auto rect = D2D1_RECT_F();
ComPtr<ID2D1SolidColorBrush> pBlackBrush;
DX::ThrowIfFailed(m_d2dContext->CreateSolidColorBrush(ColorF(1.0f, 0.0f, 0.0f),&pBlackBrush));

for (int i=0; i<10000; i++){
    //Update the color
    pBlackBrush->SetColor(D2D1::ColorF(m_pixels[i]*3, m_pixels[i], m_pixels[i]));
    //Update the rectangle size
    rect.top = 10*floor(i/100);
    rect.left = 10*floor(i%100);
    rect.bottom = 10*floor(i/100) + 10;
    rect.right = 10*floor(i%100) + 10;
    //Set the rectangle color
    m_d2dContext->FillRectangle(rect, pBlackBrush.Get());
}

HRESULT hr = m_d2dContext->EndDraw(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:33:27.133

尝试使用`ID2D1RenderTarget::CreateBitmap()`和`ID2D1RenderTarget::DrawBitmap()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-02T21:40:06.283

> 如何为像素/图像添加高斯模糊效果？

在 Direct2D 中有用于简单位图处理的[效果](https://msdn.microsoft.com/en-us/library/windows/desktop/hh973240.aspx)(ID2D1Effect)。你*可以*自己写[看起来比较复杂]，或者使用其中一种[内置效果](https://msdn.microsoft.com/en-us/library/windows/desktop/hh706316.aspx)[比较简单]。其中之一是[高斯模糊](https://msdn.microsoft.com/en-us/library/windows/desktop/hh706338.aspx)。

# php - PHP 和 ActiveRecord：如何用一个控制器处理多个表

> ID：13814612
> 
> 赞同：0
> 
> 时间：2012-12-11T06:09:39.403
> 
> 标签：php, mysql, rails-activerecord

我正在玩 PHP 的 Active Record（来自 composer/packagist 的 php-activerecord）。

我正在构建一个应用程序，一旦用户使用他的用户名注册一个新表，就会创建一个应用程序。

假设有 1000 个用户将注册到我的应用程序，将创建 1000 个表，但所有表都将具有相同的类型（结构？），我应该改用一个表并将所有内容都放入吗？

如果创建 1000 个选项卡，我需要创建 1000 个模型吗？有没有办法告诉活动记录用一个模型处理所有相同类型的表？

如果我让你感到困惑，请告诉我，我会尽力解释得更好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:25:30.290

我们可以在一个模型中处理多个表。将逻辑相关的查询放到同一个模型中是一种很好的做法。主要问题为什么需要 1000 个表为什么不创建 1000 行？

# python - wxPython，试图从一个sizer中删除所有按钮，总是留下一个

> ID：13814616
> 
> 赞同：6
> 
> 时间：2012-12-11T06:10:03.637
> 
> 标签：python, wxpython

我有以下代码将 6 个按钮添加到 BoxSizer

```
for word in words:
    btn = wx.Button(self, label=word)
    btn.Bind(wx.EVT_BUTTON, self.onWordSelect) 
```

在我的`onWordSelect`方法中，我试图删除我在 Sizer 上创建的所有按钮，以便我可以重新创建新按钮。我的问题是所有按钮都被删除了，除了最后一个。

这是我删除按钮的代码：

```
for child in self.sizer.GetChildren():
    self.sizer.Remove(child.Window)
    self.sizer.Layout() 
```

检查`len(self.sizer.GetChildren())`时返回`0`，但最后一个按钮仍然在屏幕上可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T07:16:17.163

从[http://wxpython.org/docs/api/wx.Sizer-class.html#Remove](http://wxpython.org/docs/api/wx.Sizer-class.html#Remove)：

> 由于历史原因，不推荐使用 wx.Window 参数调用此方法，因为它无法销毁窗口，因为它归其父窗口所有。您应该改用分离。

您从 sizer 中删除了元素，但它们仍然存在，被打印在另一个上：在循环中添加一行到`destroy`or`hide`他们，它应该是好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:01:33.017

在对文档进行了一些深入研究之后，我发现删除所有控件的最简单方法是使用`self.sizer.DeleteWindows()`而不是在循环中单独删除每个按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T03:21:23.373

为了清楚克雷默的破坏评论，这是我解决我遇到的问题的方法：

```
class myFrame(wx.Frame):
    def__init__(self, title):
        #make the FlexGridSizer specifying only the columns, not the rows
        #make a panel
        #create widgets with the panel as the parent
        #add widgets to the sizer
        self.addLastRow()
        #set the sizer, call layout, etc...

    def addLastRow(self):
        lastBtn = wx.Button(self.myScrolledPanel, -1,"Add New Row", style=wx.BU_EXACTFIT)
        numBlanks = self.numTotalColumns-1
        for i in range(numBlanks):
            self.myFlexGridSizer.AddF(wx.StaticText(self.myScrolledPanel, -1, ''), wx.SizerFlags(0))
        self.myFlexGridSizer.AddF(lastBtn, wx.SizerFlags(0))
        self.Bind(wx.EVT_BUTTON, self.AddNewRowElements, addButton)

    def removeLastRow(self):
        myFlexGridItems = self.myFlexGridSizer.GetChildren()
        for i in range(self.numTotalColumns):
            myFlexGridItems[len(myFlexGridItems)-1].GetWindow().Destroy()

    def AddNewRowElements(self, event):
        self.removeLastRow()
        #add elements
        self.addLastRow()
        self.myFlexGridSizer.Layout() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T16:57:43.480

除了 kraymer 的回答之外，还有一个切换日志的示例。谢谢，克雷默！

```
def onToggleLog(self, e):

    self.showlog = not self.showlog

    if self.showlog:
        self.sizer.Add(self.log, 1, wx.EXPAND)
        self.log.Show()

    else:
        self.sizer.Detach(self.log)
        self.log.Hide()

    self.sizer.Layout() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-18T05:02:54.203

可以这样做：

```
buf = []
for word in words:
    btn = wx.Button(self, label=word)
    btn.Bind(wx.EVT_BUTTON, self.onWordSelect)
    buf.append(btn)
......
for n,i in enumerate(buf):
    self.sizer.Hide(buf[n])
    self.sizer.Remove(buf[n])
    self.sizer.Layout() 
```

# r - 将表格列表转换为矩阵

> ID：13814619
> 
> 赞同：2
> 
> 时间：2012-12-11T06:10:19.613
> 
> 标签：r, list, matrix

我有一个包含 270 个表的列表。每个表有 3 列和 22 行，看起来像这样：

```
 1         2         3
lx      -0.206628 -0.148405 -0.159344    
ly       0.017395  0.043114  0.027263    
lz      -0.044009  0.005597 -0.016906
... 
```

我需要将这些表中的每一个合并到一个巨大的 270x66 矩阵中，其中行是每个表，列是表列中的值。我试过使用`lapply`,`as.matrix`和`data.matrix`. 是否有某种组合可以解决问题？还是我应该先将表格转换为向量，然后再转换为矩阵？我知道循环通常是不鼓励的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T06:14:51.327

您可以使用创建一个向量`unlist`，然后创建一个新矩阵：

```
matrix(unlist(mylist), nrow = length(mylist), byrow = TRUE) 
```

一个例子：

```
mylist <- rep(list(matrix(1:9, 3)), 3)
matrix(unlist(mylist), nrow = length(mylist), byrow = TRUE)
# 
#       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
# [1,]    1    2    3    4    5    6    7    8    9
# [2,]    1    2    3    4    5    6    7    8    9
# [3,]    1    2    3    4    5    6    7    8    9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T07:21:06.680

我认为这也可以：

```
#create a list like you discussed
LIST <- lapply(1:270,  function(i) matrix(1:66, ncol =3))

do.call(rbind, lapply(LIST, c)) 
```

它通过`lapply`ing`c`告诉 a`matrix`成为 a的函数来工作`vector`。然后我们`do.call`一起递归地使用`rbind`它。

# ios - gdb 远程返回错误 e08

> ID：13814620
> 
> 赞同：4
> 
> 时间：2012-12-11T06:10:20.600
> 
> 标签：ios, oauth, gdb, remote-debugging

我正在开发一个使用 OAuth-Consumer 库的 iphone 应用程序，我当前的调试器 id 是 LLDB，它使用以下方法生成签名

```
-(NSString *)signClearText:(NSString *)text withSecret:(NSString *)secret
{
 //it generates base64EncodedData and then returns it as a string
 return base64EncodedResult;//this is line is executed successfully

}//when it reaches this line it again goes to the return statement and there app      crashes
 //with the gdb error 
```

如果我在 return 语句之前使用 NSLog，它会成功打印 base64EncodeResult 的值。

我尝试了不同的调试器 GDB，但应用程序仍然崩溃并出现错误“无法访问位置 0xYYYYYYY 的内存”

当我尝试 none debugger 时，应用程序不会崩溃，但会停止进一步执行...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:13:56.910

如果局部变量的缓冲区溢出，它可能会破坏堆栈帧。如果发生这种情况，您可以覆盖堆栈的返回地址，以便应用程序返回到无效地址。

# javascript - How can I get the dimensions of a multidimensional Javascript array?

> ID：13814621
> 
> 赞同：6
> 
> 时间：2012-12-11T06:10:23.387
> 
> 标签：javascript, arrays

Often, there are situations where I need to determine whether a Javascript array is rectangular (and get the dimensions of the array). In this case, I mean determining whether every element of the array is an array with the same length. How can I do this?

```
function getArrayDimensions(theArray){
    //if the array's dimensions are 3x3, return [3, 3], and do the same for arrays of any dimension
    //if the array is not rectangular, return false
} 
```

Additionally, how can this function be generalized to multidimensional arrays (2x5x7, 3x7x8x8, etc.)?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T02:50:23.463

This recursive function returns all dimensions of a given array or false if one or more dimensions are not straight (i.e. different sizes between array items). It uses a helper function to determine whether two simple arrays are the same (read the function comments before using it).

```
// pre: a !== b, each item is a scalar
function array_equals(a, b)
{
  return a.length === b.length && a.every(function(value, index) {
    return value === b[index];
  });
};

function getdim(arr)
{
  if (/*!(arr instanceof Array) || */!arr.length) {
    return []; // current array has no dimension
  }
  var dim = arr.reduce(function(result, current) {
    // check each element of arr against the first element
    // to make sure it has the same dimensions
    return array_equals(result, getdim(current)) ? result : false;
  }, getdim(arr[0]));

  // dim is either false or an array
  return dim && [arr.length].concat(dim);
}

console.log(getdim(123)); // []
console.log(getdim([1])); // [1]
console.log(getdim([1, 2])); // [2]
console.log(getdim([1, [2]])); // false
console.log(getdim([[1, 2], [3]])); // false
console.log(getdim([[1, 2],[1, 2]])); // [2, 2]
console.log(getdim([[1, 2],[1, 2],[1, 2]])); // [3, 2]

console.log(getdim([[[1, 2, 3],[1, 2, 4]],[[2, 1, 3],[4, 4, 6]]])); // [2, 2, 3]

console.log(getdim([[[1, 2, 3], [1, 2, 4]], [[2, 1], [4, 4]]])); // false
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T06:39:27.867

Here is a simple recursive function to do that. Wrote it very quickly, so may prone to errors.

This function returns the lengths of each dimensions. If it contains sub-arrays of different lengths, this function returns false.

This function works for different dimensions.

For example, passing a 2d array of 2x3 will return `[2, 3]`, a 3d array of 2x3x4 will return `[2, 3, 4]`. The dimension (i.e. *n* d) can be obtained by checking the length of the returned array.

```
// Array dimension checker
// Returns:
//   false when array dimensions are different
//   an Array when is rectangular 0d (i.e. an object) or >=1d
function arrayDimension(a) {
    // Make sure it is an array
    if (a instanceof Array) {
        // First element is an array
        var sublength = arrayDimension(a[0]);
        if (sublength === false) {
            // Dimension is different
            return false;
        } else {
            // Compare every element to make sure they are of the same dimensions
            for (var i = 1; i < a.length; i++) {
                var _sublength = arrayDimension(a[i]);
                // HACK: compare arrays...
                if (_sublength === false || sublength.join(",") != _sublength.join(",")) {
                    // If the dimension is different (i.e. not rectangular)
                    return false;
                }
            }
            // OK now it is "rectangular" (could you call 3d "rectangular"?)
            return [a.length].concat(sublength);
        }
    } else {
        // Not an array
        return [];
    }
} 
```

[Demo](http://jsfiddle.net/alvinhochun/xZwXA/) (Check the javaScript console :) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T06:14:31.000

How about using `Array.every`.

Example:

```
var firstLen = ar[0].length;

var isRectangular = ar.every(function(item) {
return item.length == firstLen;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T06:17:28.533

```
function isRectangular(arr){
    for(x in arr){
        if(arr[x+1].length != arr[x].length)
            return false;
    }
    return true;
} 
```

And for more dimensions:

```
function isPrismatic(arr){
    for(x in arr){
        if(typeof arr[x] == "object" && arr[x+1].length == arr[x].length)
            return isPrismatic(arr[x]);
        else if(arr[x].length != arr[x+1].length)
            return false;
    } return true;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T06:36:25.327

The simple implementation is to check that all the internal arrays have the same length as the outer array:

```
function isSquare(arr) {
  var len = arr.length;

  for (var i=0; i<len; i++) {

    if (arr[i].length != len) {
      return false;
    }
  }
  return true;
} 
```

so:

```
isSquare([[1,2],[3,4]]);   // true
isSquare([[1,2],[3,4,5]]); // false 
```

### Edit

If you want "rectangular" arrays where each of the member arrays are the same length but not necessarily the same length as the outer array:

```
function isRectangleArray(arr) {
  var len = arr[0].length;

  for (var i=0, iLen=arr.length; i<iLen; i++) {

    if (arr[i].length != len) {
      return false;
    }
  }
  return true;
} 
```

I'm not sure how you define a multi–dimensional "rectangular" array other than to say they must all have the same length. You can do that by having a function that loops over the members and if it's an array of arrays, recursively call itself until it gets an array of not arrays, then calls an `isRectangularArray` like function and passes the length to check against.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-07T13:33:07.343

I did it this way, if you know the possible dimensions this is so much lighter :

```
//If i want to test if 2x2 or 3x3
if (typeof(array[0][0][0]) == "undefined")
{
  //stuff for array 3x3
}
else
{
  //stuff for array 2x2
} 
```

# regex - Perl Regex 用于注释掉具有多层嵌套的不相关代码

> ID：13814625
> 
> 赞同：-2
> 
> 时间：2012-12-11T06:10:44.103
> 
> 标签：regex, perl, tags, comments, depth

我正在尝试注释掉该类型的所有预处理指令：

```
if LABEL
  do something
else
  do something else
end 
```

您必须向脚本提供标签列表，以便它只注释掉包含感兴趣的“if”语句的行以及语句的“else”部分下的所有代码（如果有的话 - 可能有也可能没有一个“其他”）。
请注意，可能还有其他类型的预处理指令（均以关键字“end”结尾），这增加了多层嵌套时的难度。因此，我们必须确保删除与每个“if LABEL_OF_INTEREST”相关联的正确 else/end。
为了注释掉一行，使用#。

为了让事情更清楚，让我们举个例子，其中只有“if”语句中的代码必须保留，其余的需要注释掉。这是输入：

```
if STATEMENT_TO_KEEP  
   do somthing useful  
   do somthing else useful  
   while A < 1
      if STATEMENT_TO_IGNORE  
          do somthing useful  
          do somthing else useful  
      else  
          do nothing  
          do nothing  
      end  
   end
else  
   do nothing  
   do nothing        
end  
if STATEMENT_TO_KEEP  
   do somthing useful  
   do somthing else useful
end 
```

预期的结果是：

```
 #if STATEMENT_TO_KEEP  
   do somthing useful  
   do somthing else useful  
   while A < 1
      if STATEMENT_TO_IGNORE  
          do somthing useful  
          do somthing else useful  
      else  
          do nothing  
          do nothing  
      end  
   end
  #else  
  #   do nothing  
  #   do nothing        
  #end 
#if STATEMENT_TO_KEEP  
   do somthing useful  
   do somthing else useful
#end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:17:13.417

```
use strict;
use warnings;

my $state = 0;                       # print out when this is 0
while (<>) {
  if (!s/^(\s*if)/#$1/) {            # when you find and if, comment out
    if (!$state and /^\s*else/) {    # turn off printing from else blocks
      $state = 1;
      s/^/#/;                        # and comment out 'else'
    }   
    if ($state) {
      s/^/#/;                        # check flag, and comment out if set
      if (/^\s*end\s*$/) {
        $state = 0;                  # clear flag upon an end
      }   
    }   
  }
  print;                             # actual print
} 
```

# javascript - JS压缩器重命名变量时如何通过eval()设置变量？

> ID：13814628
> 
> 赞同：2
> 
> 时间：2012-12-11T06:10:55.320
> 
> 标签：javascript, compression

我有一个执行以下操作的 JS 文件：

```
var value = localStorage.getItem(somekey);
if ( !value )
{
  eval("value = String(" + somevariablename + ");");
} 
```

此脚本尝试从本地存储中检索值。如果本地存储中不存在该值，它将设置为使用先前定义的变量值的评估。在这种情况下， eval 对我来说是必需的，因为必须将 的值`value`设置为变量名的字符串值。我不知道有什么其他方法可以解决这个问题。

问题是大多数优秀的 JS 压缩器都提供了一种自动重命名变量名以节省空间的方法。我最终得到这样的结果：

```
var f=localStorage.getItem(e);
if(!f){eval("value = String("+e+");")} 
```

所以问题是我的变量被重命名了，但压缩器不知道要更改 eval 字符串中变量的名称。我从未见过足够聪明的压缩机来解决这个问题。

在构建环境中以自动化方式处理此问题的最佳方法是什么？进入并手动更改 eval 中的变量名称非常耗时，因为在我的情况下，这样的代码经常出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:19:58.143

Do not use eval to create variable on the fly.

You can simply catch the global object, and then any property created on it is a variable on the global scope anyway...

window["value"] = "something";

And then by creating your variable this way, you do not have to use eval to get the variable names since you are creating them with a string.

# wpf - 像 GIS 软件一样在 wpf 应用程序中应用变换

> ID：13814630
> 
> 赞同：0
> 
> 时间：2012-12-11T06:11:01.717
> 
> 标签：wpf, transform, gis, shapes

我正在尝试编写一个 WPF 应用程序来在画布上呈现 shapefile，而不使用任何 GIS SDK。直到渲染成功完成。在尝试应用缩放变换时，我发现画布上的所有形状在放大时都会变大。对于点特征（在画布上显示为椭圆形状）和 TextBlocks，大小应该保持不变，只有位置应该相对变化. 请指导我如何实现这一要求。

对于点功能，我的代码如下：

```
private Geometry CreateEllipseGeometry(double size, Point centerPoint)
    {
        EllipseGeometry geom = new EllipseGeometry();

        geom.RadiusX = size;
        geom.RadiusY = size;
        geom.Center = centerPoint;

        geom.Transform = this.viewTransform;

        return geom;
    } 
```

这里 viewTransform 是一个变换组，它有两个孩子，一个是 scaletransform，另一个是 translatetransform。

我在这个网站上找到了一篇文章（[Prevent WPF TextBlock from expand text due to LayoutTransform](https://stackoverflow.com/questions/12117743/prevent-wpf-textblock-from-expanding-text-due-to-layouttransform)），描述了如何防止文本块扩展。该解决方案说将逆变换绑定到文本块。这里我的文本块是动态创建的。所以请告诉我如何将逆变换动态绑定到文本块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:26:54.377

我在没有使用任何 API 的情况下在 WPF 中完成了确切的工作。在点要素的情况下，您可以将点的**Transform**属性设置为 TranslateTransform（大概包含在您的 viewTransform 中），因此在平移地图时，所有点要素都会随着其他要素的移动而正确移动。但在缩放的情况下，我清除所有点和文本块，并在给定 viewTransform 的情况下重新计算它们的坐标。

# javascript - 选择标签的 document.getElementById 在 IE 中给出对象错误

> ID：13814631
> 
> 赞同：4
> 
> 时间：2012-12-11T06:11:01.603
> 
> 标签：javascript, internet-explorer

我的 HTML 和 Internet Explorer 中有一个`select`标记，当从 JavaScript 函数调用它时会发生错误。

这是 html 创建选择框-

```
 <select id="item1" name="Item 1" onchange ="fn();">  
    <option value="0">Please select gender</option>    
    <option value="1">Male</option> 
    <option value="2">Female</option>  
 </select> 
```

select-的onchange事件的功能

```
function fn()
{   
    var s = document.getElementById('item1');  
    if(s!= null)  
    {  
       alert('not null')  //if object not == null  
    }  
} 
```

这是我在 IE 中遇到的错误 -

```
Message: Object expected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:26:34.487

如果它已经触发了函数，为什么还要得到 domNode？`onChange`如果 domNode 会`null`（不存在） ，难道根本不会被解雇吗？

这个怎么样：

**HTML**

```
 <select id="item1" name="item1" onchange ="fn(e);">  
       <option value="0">Please select gender</option>    
       <option value="1">Male</option> 
       <option value="2">Female</option>  
    </select> 
```

**JS**

```
 function fn(event) {
       // FF, Safari etc..
       if(event.target) {  
           alert('fn() fired by ' + event.target.id)
       }
       // IE
       else if(event.srcElement) {
           alert('fn() fired by ' + event.srcElement.id)
       }
    } 
```

# asp.net - 是否可以在多个 Web 服务器之间共享 System.Runtime.Caching 缓存对象？

> ID：13814637
> 
> 赞同：5
> 
> 时间：2012-12-11T06:11:25.947
> 
> 标签：asp.net, .net, caching, distributed-caching

这个问题：

[是否可以在多个 Web 服务器之间共享 HttpRuntime.Cache？](https://stackoverflow.com/questions/4144410/is-it-possible-to-share-httpruntime-cache-between-multiple-web-servers)

..与[http://msdn.microsoft.com/en-us/library/system.web.caching.aspx有关](http://msdn.microsoft.com/en-us/library/system.web.caching.aspx)

..我想我知道答案，但为了每个人的利益，使用更新的：

[http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx)

现实可行吗？或者使用 memcached / AppFabric / redis / xyz 会更好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T07:45:19.677

HttpRuntime.Cache 在进程内运行（即在服务器内存中），不能在多个 Web 服务器之间共享。您可以使用自定义提供程序扩展上述 System.Runtime.Caching，以使用 SQL Server 或专用服务器等平台集中缓存。

推荐的多 Web 服务器缓存策略肯定取决于环境。

在规模较低的情况下，使用 SQL Server 是 .NET 开发人员可能熟悉的快速选项。另一种选择是使用 Web 服务（例如 WCF）来集中缓存数据调用。

在高端，您提到了该领域的领导者：memcached、AppFabric、Redis 等。如果这些已经在您的环境中设置和/或您熟悉它们，那么只要您有多个 Web 服务器，我肯定会看到使用它们（大或小）。

我建议至少检查一下 Redis。它是所提到的组中较新的类别，但它是轻量级的、快速的，并且除了键/值存储之外，它还具有其他非常适合分布式系统的功能，例如发布/订阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-28T10:47:37.893

.Net 的 System.Runtime.Caching api 提供了抽象类[ObjectCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache.aspx)，它提供了访问对象缓存的基本方法和属性。.Net 中提供的这个抽象类的唯一实现是[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)，它是一个进程内缓存，不能在多个 Web 服务器之间共享

但是，您可以自己扩展 ObjectCache 类以合并分布式缓存的功能。

或者对于开箱即用的解决方案，您可以使用分布式缓存解决方案，该解决方案提供 ObjectCache 的分布式缓存实现。 [NCache](http://www.alachisoft.com/ncache/)是提供 ObjectCache 实现的分布式缓存解决方案之一，如此处[所述](http://www.alachisoft.com/ncache/dot-net-support.html)

> NCache 为 .NET 4.0 Cache 开发了一个提供程序，该提供程序可实现极其快速且高度可扩展的 .NET 分布式缓存。这允许使用 .NET 4.0 缓存的应用程序现在可以扩展到多服务器环境，并消除任何数据库瓶颈。您可以将 NCache 合并为 .NET 分布式缓存，而无需对应用程序进行任何代码更改。您只需更改配置文件以使用 NCache。

# graph - 在 Networkx 和 Graphviz 中为特定节点着色

> ID：13814640
> 
> 赞同：18
> 
> 时间：2012-12-11T06:12:09.887
> 
> 标签：graph, numpy, graphviz, networkx, graph-visualization

我正在编写一个程序来从距离矩阵中绘制图形。它工作正常。现在我希望某个节点和某个边缘具有我选择的特定颜色。我怎么做？

该程序是在 Python 中并使用 Networkx 和 Graphviz

```
import networkx as nx
import numpy as np
import pickle
from random import randint

p_file = open('pickles/distance')
Dist = pickle.load(p_file)
p_file.close()
p_file = open('pickles/names')
Names = pickle.load(p_file)
p_file.close()

dt = [('len', float)]
A = np.array(Dist)*5
A = A.view(dt)

G = nx.from_numpy_matrix(A)
G = nx.relabel_nodes(G, dict(zip(range(len(G.nodes())),Names)))    

G = nx.to_agraph(G)
G.node_attr.update(ndcolor="red", node="DC", style="filled")
G.edge_attr.update(color="none")
G.draw('P1.png', format='png', prog='neato') 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-11T15:26:09.283

由于您使用 Graphviz 进行绘图，因此您需要使用 Graphviz 理解的属性。见[https://graphviz.gitlab.io/_pages/doc/info/attrs.html](https://graphviz.gitlab.io/_pages/doc/info/attrs.html)

```
import networkx as nx
from networkx.drawing.nx_agraph import to_agraph

G = nx.Graph()

G.add_node(1,color='red',style='filled',fillcolor='blue',shape='square')
G.add_node(2,color='blue',style='filled')
G.add_edge(1,2,color='green')
G.nodes[2]['shape']='circle'
G.nodes[2]['fillcolor']='red'

A = to_agraph(G)
A.layout()
A.draw('color.png')
print(A.to_string()) 
```

给

```
strict graph {
    graph [bb="0,0,107.21,46.639"];
    node [label="\N"];
    1    [color=red,
        fillcolor=blue,
        height=0.5,
        pos="18,28.639",
        shape=square,
        style=filled,
        width=0.5];
    2    [color=blue,
        fillcolor=red,
        height=0.5,
        pos="89.21,18",
        shape=circle,
        style=filled,
        width=0.5];
    1 -- 2   [color=green,
        pos="36.338,25.899 47.053,24.298 60.519,22.286 71.18,20.694"];
} 
```

![在此处输入图像描述](../Images/9b3f85519a4ed2c740d03461a9fb89e1.png)

# java-me - 禁用命令菜单滚动 LWUIT J2me

> ID：13814643
> 
> 赞同：2
> 
> 时间：2012-12-11T06:12:19.183
> 
> 标签：java-me, lwuit

我有一个表单并添加了四个命令。当用户单击菜单选项时，它会显示可滚动的命令菜单（对话框中的菜单栏）。让命令菜单可滚动对我的应用程序来说不是用户友好的。

如何禁用命令菜单滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:19:27.043

得到了解决方案......它有点棘手（你需要编辑 LWUIT lib 的 MenuBar.java 源文件）

在 createCommandList 方法中添加以下行

```
 // Add  your menu list rendered   
    l.setRenderer(new JMenuListRenderer());
    l.setSmoothScrolling(false);
    l.setScrollVisible(false);
    // specify the height you want ( you can make it configurable as well) 
    l.setPreferredH(getCommandCount()*30); 
    l.setPreferredW(Display.getInstance().getDisplayWidth()/2); 
```

并将主题的**menuPrefSizeBool**设置为 true。

# android - 自定义警报框

> ID：13814644
> 
> 赞同：1
> 
> 时间：2012-12-11T06:12:20.547
> 
> 标签：android

我想要一个完全自定义的警报框，简而言之，我想要我的背景图像，我的自定义按钮和我的自定义消息，目前我使用的是默认警报框，只有我的消息，但我希望它是完全自定义的警报框正如我之前所说

请帮助我，如果可能的话，请分享一个示例代码片段:)

目前的代码是这样的： -

```
AlertDialog.Builder alertDialogBuilder3 = new AlertDialog.Builder(context);
                alertDialogBuilder3.setTitle("Location Check");
                alertDialogBuilder3
                .setMessage("Do you want to cancel loading?")
                .setCancelable(false)
                .setPositiveButton("Ok",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {

                        LAtestTab.this.finish();
                    }
                })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, just close
                        // the dialog box and do nothing
                        dialog.cancel();
                    }
                });
                ;

                AlertDialog alertDialog3 = alertDialogBuilder3.create();

                alertDialog3.show(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T06:24:43.550

这是Java代码....

```
exit.setOnClickListener(new OnClickListener() 
{   
     @Override
     public void onClick(View arg0) 
    {
            final Dialog dialog1 = new Dialog(CatchTheCatActivity.this);
            dialog1.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog1.setContentView(R.layout.custom_alert);

            Button yes = (Button) dialog1.findViewById(R.id.button1);
            Button no = (Button) dialog1.findViewById(R.id.button2);

            yes.setOnClickListener(new OnClickListener()
            {
                @Override
                public void onClick(View v) 
                {
                    finish();   
                }
            });
            no.setOnClickListener(new OnClickListener()
            {
                @Override
                public void onClick(View v) 
                {
                        dialog1.dismiss();  

                }
            });
            dialog1.show();
   }
}); 
```

这是 XML 文件... (custom_alert)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="110dp"
    android:background="@drawable/bg"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" android:gravity="center">

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            android:src="@drawable/textmessage" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:gravity="center|bottom" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/yes_button"/>

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:background="@drawable/no_button" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T06:18:18.693

参考这个链接

[http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

[http://android-er.blogspot.in/2011/06/custom-alertdialog.html](http://android-er.blogspot.in/2011/06/custom-alertdialog.html)

您可以直接从 Layout Inflater 创建您的视图，您只需要使用您的布局 XML 文件的名称和文件中布局的 ID。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/dialog_layout_root"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:padding="10dp"
 > 
```

然后您可以使用以下内容在构建器上设置布局：

```
LayoutInflater inflater = getLayoutInflater();
View dialoglayout = inflater.inflate(R.layout.dialog_layout, (ViewGroup) getCurrentFocus());
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setView(dialoglayout); 
```

# php - 如何从数组中获取facebook用户喜欢的书籍

> ID：13814649
> 
> 赞同：0
> 
> 时间：2012-12-11T06:12:37.423
> 
> 标签：php, arrays, facebook, facebook-php-sdk

我使用 Facebook PHP SDK 来获取用户喜欢的书籍。

```
$books = $facebook->api('/me/books'); 
```

解码 JSON 后，我得到如下输出数组：

```
Array ( 
[data] => Array ( 
[0] => Array ( [category] => Book [name] => Steve Jobs by Walter Isaacson [id] => 152707268157952 [created_time] => 2012-12-05T15:10:14+0000 ) 
[1] => Array ( [category] => Book [name] => Restful Web Services [id] => 106832016007551 [created_time] => 2012-12-10T10:26:45+0000 ) 
[2] => Array ( [category] => Book [name] => DOS for Dummies [id] => 112172905468817 [created_time] => 2012-12-05T15:10:14+0000 )
....
....
....
) 
```

现在我要做的是分离 [name] 并为书名创建一个新数组。这样做的循环应该是什么？

**编辑：** 首先我正在检查数组是否为空，不知道下一步该做什么。我正在尝试这样的事情：

```
foreach($books['data'] as $booksliked){
    if(!empty($booksliked['data'])) {
        foreach($booksliked['data']['name'] as $blikesData){
        //Not sure what to put here 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:18:34.467

下面应该工作

```
<?php
$books_from_fb = $facebook->api('/me/books');
$books = array();
foreach ($books_from_fb['data'] as $book_arr) {
    $books[] = $book_arr['name'];
} 
```

# ios - 如何从应用程序启用/禁用推送通知？

> ID：13814651
> 
> 赞同：27
> 
> 时间：2012-12-11T06:12:46.833
> 
> 标签：ios, xcode, push-notification, unusernotificationcenter, remote-notifications

在我的应用程序中，我想从我的应用程序本身的设置页面启用/禁用推送通知。有人可以建议我一个解决方案来从应用程序打开/关闭通知中心的应用程序状态吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-11T06:15:28.447

您可以使用以下代码注册和取消注册远程通知。

使用以下代码注册 RemoteNotification ..意味着启用通知

```
//-- Set Notification
if ([[UIApplication sharedApplication]respondsToSelector:@selector(isRegisteredForRemoteNotifications)])
{
    // For iOS 8 and above
    [[UIApplication sharedApplication] registerUserNotificationSettings:[UIUserNotificationSettings settingsForTypes:(UIUserNotificationTypeSound | UIUserNotificationTypeAlert | UIUserNotificationTypeBadge) categories:nil]];

    [[UIApplication sharedApplication] registerForRemoteNotifications];
}
else
{
    // For iOS < 8
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
     (UIUserNotificationTypeBadge | UIUserNotificationTypeSound | UIUserNotificationTypeAlert)];
} 
```

并使用以下代码禁用它。

```
[[UIApplication sharedApplication] unregisterForRemoteNotifications]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-06-21T09:57:11.047

**斯威夫特 4**

启用推送通知（从应用程序设置）：

```
if #available(iOS 10.0, *) {

   // SETUP FOR NOTIFICATION FOR iOS >= 10.0
   let center  = UNUserNotificationCenter.current()
   center.delegate = self
   center.requestAuthorization(options: [.sound, .alert, .badge]) { (granted, error) in
         if error == nil{
            DispatchQueue.main.async(execute: {
               UIApplication.shared.registerForRemoteNotifications()
            }) 
         }
   }

} else {

   // SETUP FOR NOTIFICATION FOR iOS < 10.0

   let settings = UIUserNotificationSettings(types: [.sound, .alert, .badge], categories: nil)
   UIApplication.shared.registerUserNotificationSettings(settings)

   // This is an asynchronous method to retrieve a Device Token
   // Callbacks are in AppDelegate.swift
   // Success = didRegisterForRemoteNotificationsWithDeviceToken
   // Fail = didFailToRegisterForRemoteNotificationsWithError
    UIApplication.shared.registerForRemoteNotifications()
} 
```

处理推送通知的委托方法

```
@available(iOS 10.0, *)
func userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse, withCompletionHandler completionHandler: @escaping () -> Void) {

}

@available(iOS 10.0, *)
func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void) {

}

func application(_ application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data) {
    // ...register device token with our Time Entry API server via REST
}

func application(_ application: UIApplication, didFailToRegisterForRemoteNotificationsWithError error: Error) {
    //print("DidFaildRegistration : Device token for push notifications: FAIL -- ")
    //print(error.localizedDescription)
} 
```

禁用推送通知：

```
UIApplication.shared.unregisterForRemoteNotifications() 
```

*   Apple 关于[推送通知的文档](https://developer.apple.com/library/content/technotes/tn2265/_index.html)

# ios - 自定义 UINavigationBar 适用于模拟器，但不适用于已发布版本

> ID：13814654
> 
> 赞同：3
> 
> 时间：2012-12-11T06:13:03.370
> 
> 标签：ios, xcode, uinavigationcontroller, uinavigationbar, testflight

我希望能够深入了解过去几个小时我一直在努力解决的问题。我有一个自定义 UINavigationBar 正在`application:DidFinishLaunchingWithOptions`通过调用以下方法进行配置：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavBar"] forBarMetrics:UIBarMetricsDefault]; 
```

当我在 XCode 中运行我的应用程序时（无论是在模拟器中还是在插入计算机的实际设备上），效果都很好，并且显示了我的自定义背景。但是，当我在 TestFlight 上运行应用程序的发布版本时，会显示标准的浅蓝色导航栏。在弄乱了`setBackgroundImage`方法的放置但没有运气之后，我开始相信它与“调试”与“发布”设置的差异有关，但我不知道这些设置会在哪里导致这个导航栏问题。

对此问题的任何帮助或见解（或我将如何调试它）将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T06:37:54.373

正如我在评论中提到的，当您遇到类似问题时，您应该检查图像的名称并确保它不区分大小写。您可能已经添加了一个带有名称的图像，`navBar`但您`NavBar`在项目中使用的是 as。这就是这个问题的原因。模拟器不区分大小写，但设备是。

要么将代码更改为，

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navBar"] forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:28:11.883

在设备中，图像名称被视为区分大小写。您还需要为它提供扩展名。

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"NavBar.**png**"] forBarMetrics:UIBarMetricsDefault]; 
```

因此，请检查确切的名称和扩展名。

# asp.net - AuthorizeAttribute 的自定义验证使流程保持运行

> ID：13814661
> 
> 赞同：0
> 
> 时间：2012-12-11T06:13:52.417
> 
> 标签：asp.net, asp.net-mvc

我有以下自定义验证器：

```
public class CAuthorize : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        //if ajax request set status code and end responcse
        if (filterContext.HttpContext.Request.IsAjaxRequest())
        {
            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true; 
            filterContext.HttpContext.Response.Write(/*some data*/);                        
            filterContext.HttpContext.Response.End();
        }
        else
        {
            base.HandleUnauthorizedRequest(filterContext);
        }
    }

} 
```

和以下动作

```
 [HttpPost]
    [CAuthorize]
    public ActionResult Comment(Comment comment_obj)
    {
        if (ModelState.IsValid)
        {
            this.tblSomthing.comments.Add(comment_obj);
            this.db.SaveChanges();
        }
        return /*some view*/
    } 
```

为什么当验证器失败时执行操作并保存数据库记录但响应正确（验证器中设置的响应）我只想在验证器失败时停止执行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:22:44.847

你知道一个动作需要返回一个视图才能让用户看到某种形式的输出吗？在控制器中使用`Response.Write`or`Response.End`什么都不做。

无论如何，您拥有的是一个属性，而不是验证器。如果它是一个验证器，它将在视图中使用的模型内，应用于属性。

# scala - Scala - 具有特征的泛型参数的类型推断

> ID：13814664
> 
> 赞同：0
> 
> 时间：2012-12-11T06:14:05.503
> 
> 标签：scala, generics, type-inference, traits

我正在使用 Scala 开发一个小型渲染引擎来学习该语言。引擎的架构强烈基于特征，因此我可以根据需要添加和删除管道的一部分。一些特征是：

（**更新**：更正了一些类型信息）

```
trait Composable { val parent:DisplayObject with Composite = null }
trait Composite extends Composable { val children:ArrayBuffer[DisplayObject with Composable] = ArrayBuffer() }
trait Position { var x = 0.0d; var y = 0.0d }
... 
```

`DisplayObject`是一个用于组成这些特征的空类。

我的管道中的一个步骤是展平每个对象的层次结构。我的第一个镜头是：（**更新**：我添加了身体）

```
def flatten(root:DisplayObject with Composite) : ArrayBuffer[DisplayObject] =
{
    def traverse(composite:Composite, acc:ArrayBuffer[DisplayObject])
    {
      acc += composite
      for(composable <- composite.children)
      {
        composable match {
          case com:Composite => traverse(com, acc)
          case _ => acc += composable
        }
      }
    }

    val flat = new ArrayBuffer[DisplayObject]
    traverse(root, flat)
    flat
  }
} 
```

这很好，但是，当我调用这个函数时，我丢失了很多类型信息：

```
val root = new DisplayObject with Position with Composite
root.children += new DisplayObject with Composable with Position
val list = flatten(root) 
```

的类型`list`是现在`List[DisplayObject]`。我丢失了位置信息。所以我考虑将泛型添加到组合中：（**更新**：添加正文）

```
 def genericFlatten[T](root:T with Composite) : ArrayBuffer[T] =
  {
    def traverse(composite:T with Composite, acc:ArrayBuffer[T])
    {
      acc += composite
      for(composable <- composite.children)
      {
        composable match {
          case com:T with Composite => traverse(com, acc)
          case composable:T with Composable => acc += composable
        }
      }
    }

    val flat = new ArrayBuffer[T]
    traverse(root, flat)
    flat
  } 
```

但是，调用它会给我一个奇怪的结果：返回列表的类型是 now `List[DisplayObject with Position with Composite]`，这是错误的，因为树的某些子节点（叶子）将不具有 Composite 特征。我期待类型 T 被推断为`DisplayObject with Position`. 不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:48:24.810

我可能错了，但我对类型推断器的作用有一定的误解：如果你不指定类型，类型推断器会尝试找出它，但它不会替换你自己定义的类型。

让我们拍摄你的第一张照片：

```
def flatten(root:DisplayObject with Composite) : List[DisplayObject] 
```

在这里设置返回类型。此方法将始终返回 a`List[DisplayObject]`并且绝对没有什么可推断的。签名完美无缺。

让我们拍摄第二张照片：

```
def flatten[T](root:T with Composite) : List[T] 
```

再次，没有类型推断。有泛型参数，泛型值会被编译器检查。你可以用Java编写这个方法，它根本没有类型推断

* * *

如果我正确解释了您的答案，您希望在`children`不丢失类型的情况下展平列表中的元素。但是，如果我们查看 Composite 特征：

```
trait Composite extends Composable { 
        val children:ArrayBuffer[Composable] = new ArrayBuffer[Composable] 
} 
```

这里我们有一个`val children`具有类型的`ArrayBuffer[Composable]`，更具体地说，它具有`ArrayBuffer[T]`带有泛型参数的类型`T = Composable`。这是您在声明和静态类型编程语言（如 Scala 或 Java）中强制执行的编译类型，在程序执行期间不允许更改。

这是理解您的问题的关键点：尝试在 Java 中考虑它。如果您有 a `List<Object>`，则可以将其放入 Integer 中，但这不会将您`List<Object>`变成`List<Integer>`. 让我们打破将孩子添加到两行的代码。

```
val firstChildren:DisplayObject with Position = new DisplayObject with Position
root.children += firstChildren 
```

在这里，一旦您的`firstChildren`val 超出范围，您将丢失其类型信息。如果您通过 root.children 访问它，您将不会知道它是 a`DisplayObject with Position`而只是 a `Composable`。此外 firstChildren 是一个 DisplayObject

* * *

**免责声明：**

**你想要做的不是微不足道的，因为 Composable 和 Composite 类有一个循环引用。我一直在打破它以提供一些简单的工作代码，但我必须警告你，在你能够很好地掌握类型系统之前，你需要一定的 Scala 经验。**

您需要以某种方式将有关子项类型的信息保留在父项上，并将有关父项的信息保留在子项上。因此，您需要两个类型参数。

```
 trait Composable[K,T<:Composite[K,T]] {
    val parent:T
  }

  trait Composite[K,T<:Composite[K,T]] extends Composable[K,T] {
    val children:ArrayBuffer[K] = new ArrayBuffer[K]
  }

  trait Position { val x = 0.0d; val y = 0.0d }

  class DisplayObject

  def flatten[K,T<:Composite[K,T]](root:DisplayObject with Composite[K,T]) : List[K] =
  {
    root.children.toList
  }
  class ComposableDisplayObjectWithPosition extends DisplayObject with Position with        Composite[DisplayObject with Position,ComposableDisplayObjectWithPosition]{
      // dangerous
      val parent = this
    }

  def main(args:Array[String]){

    val root = new ComposableDisplayObjectWithPosition
    root.children += new DisplayObject with Position
    val list:List[DisplayObject with Position] = flatten(root)
    println(list)
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:07:28.330

*免责声明：我不是 Scala 专家，下面的论点是通用的（请原谅你的双关语）。*

签名的`func(param:T with X)`意思是，如果 的实参`func`是 类型`A`，那么就需要`A<:T` *和* `A<:X`。这些要求是完全不同的。

类型系统中没有`without`。如果`T`是通用的，则不会推断为`A without X`，没有这样的事情。`T`被推断为`A`，因为它是满足 的~~唯一~~最简单和最有用的方法`A<:T`。`A<:X`单独检查。

如果你传到`DisplayObject with Position with Composite`，`flatten`你就回来`DisplayObject with Position with Composite`。如果你通过`Foo with Bar with Composite`了，你也会拿回来。你不能减去`Composite`，因为没有`without`. 我不知道为什么有人愿意。我无法想象额外的类型信息会受到伤害的情况。

# jquery - 向同一行中的输入字段添加值

> ID：13814666
> 
> 赞同：0
> 
> 时间：2012-12-11T06:14:15.063
> 
> 标签：jquery, ajax

我有一个表，其中有多个行，输入字段具有相同的名称

```
<tr>
    <td>
        <input type=text name=icode[] id=icode>
    </td>
    <td>
        <input type=text name=description[] id=description>
    </td>
    <td>
        <input type=text name=rprice[] id=rprice>
    </td>
    <td>
        <input type=text name=discount[] id=discount>
    </td>
    <td>
        <input type=text name=fprice[] id=fprice>
    </td>
</tr> 
```

现在使用 on focusout 函数我想从数据库中填充 description 和 rprice 的值。但我无法为同一行执行此操作。在浏览时我发现了这段代码

```
 $(_this).parents('tr').find('#description').val(obj.description); 
```

但它会更新所有行和特定行。

所以基本上当我在第 2 行的 icode 中键入 1 时，我希望仅更新第 2 行的描述和 rprice，而不是所有行。

我发布了一个示例代码供参考：http: [//jsfiddle.net/nA7RL/](http://jsfiddle.net/nA7RL/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:28:04.893

使用父级而不是父级：

```
$(_this).parent().parent('tr').find('#description').val(obj.description); 
```

来自 jquery：[http ://api.jquery.com/parents/](http://api.jquery.com/parents/)

.parents() 和 .parent() 方法是相似的，只是后者只在 DOM 树上向上移动一层。

在您的情况下， parents 方法将转到更高级别的 tr，并且从那里， find 方法正在定位所有现有的描述字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:36:49.487

元素的`ID`必须是唯一的。如果您有重复的 ID，它们将不起作用。改为使用`class`。

**HTML**

```
<table>
    <tr>
        <td>
            <input type="text" name="icode[]" class="icode">
        </td>
        <td>
            <input type="text" name="description[]" class="description">
        </td>
        <td>
            <input type="text" name="rprice[]" class="rprice">
        </td>
        <td>
            <input type="text" name="discount[]" class="discount">
        </td>
        <td>
            <input type="text" name="fprice[]" class="fprice">
        </td>
    </tr>
    <tr>
        <td>
            <input type="text" name="icode[]" class="icode">
        </td>
        <td>
            <input type="text" name="description[]" class="description">
        </td>
        <td>
            <input type="text" name="rprice[]" class="rprice">
        </td>
        <td>
            <input type="text" name="discount[]" class="discount">
        </td>
        <td>
            <input type="text" name="fprice[]" class="fprice">
        </td>
    </tr>
</table>
​ 
```

**Javascript**

```
$('.icode').on('change', function() {
    $(this).parents('tr').find('.description').val($(this).val());
}); 
```

**[演示](http://jsfiddle.net/hqqSk/)**

# java - 返回 Array[] 或返回 null Java

> ID：13814669
> 
> 赞同：-8
> 
> 时间：2012-12-11T06:14:30.873
> 
> 标签：java

这是我正在研究的一种方法。它需要返回结果的 Array[] 或返回 null。但是，当我尝试对其进行测试时，我收到了 NullPointerException 错误。在过去的几个小时里，我一直在寻找，却一无所获。对受苦学生的任何帮助将不胜感激。

```
public Item[] searchByName(String name) {

    String n = name;
    ArrayList<Item> sortName = new ArrayList<Item>();
    Item[] matchArr;
    boolean noResult = false;

    for(int j = 0; j < itemInventory.size(); j++){
        if(itemInventory.get(j).getName().equalsIgnoreCase(n) == true)
            sortName.add(itemInventory.get(j));
        else
            noResult = true;
    }
    matchArr = new Item[sortName.size()];
    for(int j = 0; j < sortName.size(); j++){
        matchArr[j] = sortName.get(j);
    }
    if(noResult == true)
        return null;

    else
        return matchArr;

} 
```

//修订版 //itemInventory 是一个被清点和排序的对象的 ArrayList。

```
public Item[] searchByName(String name) {

    String n = name;
    ArrayList<Item> sortName = new ArrayList<Item>();
    Item[] matchName;

    for(int j = 0; j < itemInventory.size() ; j++){
        if(itemInventory.get(j) != null){
            if(itemInventory.get(j).getName().equalsIgnoreCase(n) == true){
                sortName.add(itemInventory.get(j));
                System.out.println(j + " Is a match");
            }
        }               
    }

    if(sortName.size() == 0)
        return null;
    else{
        matchName = sortName.toArray(new Item[sortName.size()]);
        return matchName;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:27:08.993

这条线可能`itemInventory.get(j).getName().equalsIgnoreCase(n) == true`会导致 NPE。确保`itemInventory.get(j)`不是`null`在您获得名称之前：

```
if(itemInventory.get(j)!=null) //only then get the name
    if(itemInventory.get(j).getName().equalsIgnoreCase(n)) 
```

# jquery - 如何明确触发 jquery datepicker onselect 事件？

> ID：13814673
> 
> 赞同：0
> 
> 时间：2012-12-11T06:14:56.533
> 
> 标签：jquery, ajax, datepicker, jquery-ui-datepicker

我们可以在页面加载上明确触发 Jquery 日期选择器在选择事件上吗？

我正在日期选择器中预先填充日期，所以我想根据预先填充的日期触发 ajax 调用。

谢谢！

# asp.net - html链接中的FTP用户名和密码

> ID：13814676
> 
> 赞同：0
> 
> 时间：2012-12-11T06:15:08.940
> 
> 标签：asp.net, web, ftp

我在这里发布这个问题之前只是通过谷歌搜索，但我对我的谷歌结果不满意。我希望有人可以在这里帮助我。

我有一个电子商务网站。所有图像都存储在不同的 ftp 服务器中。我需要在我的网页上显示所有图像。当页面加载时，它会询问 FTP 用户名和密码。我可以通过在 FTP URL 中提供用户名和密码来避免它。但我不认为它是安全的。我网站的每个用户都可以访问我的密码。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:29:14.043

您确实应该创建一个 FTP 帐户，该帐户**只能**访问 FTP 服务器上包含图像的文件夹。尽快这样做。

为了获得更好的整体解决方案，请将图像同步到您的网络服务器，或者编写一个 HTTP 处理程序，该处理程序将在服务器端获取图像并将字节流式传输到客户端，就像图像在您的服务器上一样。看看[System.Net.FtpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest%28v=vs.110%29.aspx)的第二种解决方案。

如果您对 Web 服务器上的磁盘具有写入权限，则可以实现解决方案的两个部分。因此，如果第一次获取图像，请在将其发送到客户端之前将其写入磁盘。下次请求时，只需将请求重定向到磁盘上的图像（或动态更改该`<img>`产品标签的 URL）。这样，随着时间的推移，您可以在 Web 服务器上构建图像缓存。当然，您需要能够在更新图像时使缓存无效。

# javascript - 我如何识别对同一页面的 ajax 调用

> ID：13814679
> 
> 赞同：0
> 
> 时间：2012-12-11T06:15:27.177
> 
> 标签：javascript, ajax, jquery

```
$(document).ready(function(){
    var temp='getUser';
    $.ajax ({
                type:'GET';
                url: 'listdetails.php?ud=temp';

                success:function(data)
                        {
                            alert(data);
                        }

           }); 
```

});

通过使用这个 jquery，我正在调用同一页面“listdetails.php”（即：这个 jquery 在 listdetails.php 中）。这是我在页面开头输入的代码

```
if($_GET['ud'] =="getUser")
{

    echo "ok";
} 
```

当我加载页面时，它显示错误“注意：未定义索引：第 8 行 C:\wamp\www\listdetails.php 中的 ud”

即：变量ud未定义。我怎样才能避免这个错误。我想，如果条件只需要在页面请求是ajax时检查，是否可以检查页面请求是ajax？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:17:40.047

利用`isset`

```
if(isset($_GET['ud']) && $_GET['ud'] =="getUser")
{

    echo "ok";
} 
```

要专门检查 AJAX 请求，请尝试

`if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')`

但是 HTTP 标头很容易被欺骗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:59:57.820

您肯定不会进入 $_GET 的 if 循环，因为 ajax 的 url 没有正确制作。我写了下面的代码，检查一下

```
var temp='getUser';
$.ajax ({
        type:'GET',
        url: 'listdetails.php?ud='+temp, // your code --- url: 'listdetails.php?ud=temp';

        success:function(data)
        {
              alert(data);
        }

}); 
```

# c++ - cocos2d-x 如何重复一个 NPOT 图像

> ID：13814682
> 
> 赞同：3
> 
> 时间：2012-12-11T06:15:42.277
> 
> 标签：c++, cocos2d-x

我想要一个背景图像repeat-x，但不想改变图像的宽度和高度。

```
 CCSize s = CCDirector::sharedDirector()->getWinSize();
    CCSprite* sprite = CCSprite::create("sprite.png"); // the image size is 256 * 224, so the height is non power of 2.
    CCRect spriteRect = sprite->getTextureRect();
    spriteRect.size.width = s.width;
    pSkyBg->setTextureRect(skyRect);

    ccTexParams tp = { GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
    sprite->getTexture()->setTexParameters(&tp);

    sprite->setPosition((ccp(0, s.height)));
    sprite->setAnchorPoint(ccp(0, 1));
    addChild(sprite, 0); 
```

有一些错误。谁能帮我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:35:55.460

图像的高度和宽度必须是 2 的幂。显然 224 不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T10:42:25.260

它与 2 图像的幂完美配合。

这是我的代码：

```
CCTexture2D *texture = CCTextureCache::sharedTextureCache()->addImage("purty_wood.png");
ccTexParams tp = { GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};
texture->setTexParameters(&tp);
CCSprite *background = CCSprite::createWithTexture(texture, CCRectMake(0, 0, visibleSize.width, visibleSize.height));
background->setPosition( ccp( visibleSize.width/2, visibleSize.height/2 ) );
this->addChild(background, 1); 
```

# android - 如何创建一个服务来监控与 CPU 状态、内存使用等相关的数据

> ID：13814685
> 
> 赞同：3
> 
> 时间：2012-12-11T06:15:46.883
> 
> 标签：android, memory, cpu

我想知道我们是否可以创建一个后台应用程序（非 UI）来监视与系统 CPU 状态、内存使用情况、磁盘空间、使用 android 中的服务/BR 安装的应用程序相关的数据。我知道它在 iOS 中是不可能的，但不确定 android。市场上有许多具有这些功能的前台（带有 UI）应用程序。

请让我知道它是否可能，如果是的话如何？

# android - LoadedApk.forgetReceiverDispatcher() 中的 IllegalArgumentException

> ID：13814687
> 
> 赞同：4
> 
> 时间：2012-12-11T06:15:54.303
> 
> 标签：android, apk

我在 android 市场上有一个 Android 应用程序，我收到以下错误报告，我使用过 webView、缩放控件，这些都工作正常，当我在 OS 2.2、2.3、4.04、4.1、4.2 上测试它时。我不知道这种崩溃何时发生，无论是在缩放控制上还是在从市场上加载 .apk 文件时。我收到了来自多个用户的这些错误报告，请让我知道这是什么问题以及如何解决此问题，

提前致谢。

```
java.lang.IllegalArgumentException: Receiver not registered: android.widget.ZoomButtonsController$1@43335900
at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:628)
at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1178)
at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:361)
at android.widget.ZoomButtonsController.setVisible(ZoomButtonsController.java:405)
at android.widget.ZoomButtonsController$2.handleMessage(ZoomButtonsController.java:179)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T11:34:43.880

我遇到了同样的问题，并成功使用了这个解决方法： [ViewFlipper : Receiver not registered](https://stackoverflow.com/questions/8050730/viewflipper-receiver-not-registered/8208874#8208874)

您基本上应该创建自己的`ViewFlipper`子类，并覆盖它的`onDetachedFromWindow`功能以停止翻转而不是粉碎。比在您的布局中使用该子类。

# http-headers - 标头已在 Magento 联系表单中发送错误

> ID：13814688
> 
> 赞同：0
> 
> 时间：2012-12-11T06:15:57.760
> 
> 标签：http-headers, magento-1.7, contact-form

我在页脚的固定 div 中显示联系人，以便它显示在所有页面上。确实如此。当我单击“联系人”按钮时，它将通过 AJAX 加载联系表单。为此，我在 Magento 默认联系人模块的 indexController 中创建了一个新操作。在该操作中，我正在回显一个块，该块调用我用来在所有页面上显示的自定义表单。

```
public function quickcontactAction(){
    echo $this->getLayout()->createBlock('core/template')->setTemplate('contacts/formquick.phtml')->toHtml();           
} 
```

所以在contacts模块的模板中基本上有两个文件，form.phtml和formquick.phtml。从页脚我调用调用formquick.phtml 文件的动作，该文件调用indexController.php 的post 动作方法。现在我的问题是，当我尝试从页脚中的固定 div 提交表单时，它会生成一个系统日志，上面写着标题已经发送。

```
HEADERS ALREADY SENT: <pre>[0] C:\Program Files\EasyPHP-5.3.8.0\www\magento\app\code\core\Mage\Core\Controller\Response\Http.php:52
[1] C:\Program Files\EasyPHP-5.3.8.0\www\magento\lib\Zend\Controller\Response\Abstract.php:766
[2] C:\Program Files\EasyPHP-5.3.8.0\www\magento\app\code\core\Mage\Core\Controller\Response\Http.php:83
[3] C:\Program Files\EasyPHP-5.3.8.0\www\magento\app\code\core\Mage\Core\Controller\Varien\Front.php:188
[4] C:\Program Files\EasyPHP-5.3.8.0\www\magento\app\code\core\Mage\Core\Model\App.php:354
[5] C:\Program Files\EasyPHP-5.3.8.0\www\magento\app\Mage.php:683
[6] C:\Program Files\EasyPHP-5.3.8.0\www\magento\index.php:81
</pre> 
```

我感觉到与整个联系表格循环有关，但无法弄清楚如何解决。同样在提交表单后，它会重定向到联系页面，因为它是在控制器中设置的，但我希望它保持在同一页面上。有人可以指导我吗？我只需要通过 AJAX 加载不同的联系表格。如果有更好的方法，那也没关系。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:05:14.313

我自己解决了。我在我的控制器动作中回显一个块。所以删除了它，而是像这样渲染布局

```
public function quickcontactAction(){
    $this->loadLayout()->renderLayout();
} 
```

并在我的 contacts.xml 中添加了一个名为联系人表单文件的新块。

# asp.net-mvc-3 - 如何在按钮单击中更新数据库表？

> ID：13814692
> 
> 赞同：3
> 
> 时间：2012-12-11T06:16:02.263
> 
> 标签：asp.net-mvc-3, jquery, ado.net

我正在使用 ADO.Net Connectivity 开发 MVC3，然后我正在使用 jQuery 更新 div

这是我的代码

**控制器**

```
public ActionResult GetData()
{
 return this.Json(_db.MYMOVIELISTs, JsonRequestBehavior.AllowGet);
}
public void Insert(string Id)
{
    var movieToInsert = new MYMOVIELIST { Title = "Ben", Director = "LEMe", ID = Id };
    // Save new movie to DB
    _db.AddToMYMOVIELISTs(movieToInsert);
    _db.SaveChanges();
} 
```

**客户端**

```
function insertCallback(result) {
    readData();
}
function readData() {
    info.empty();
    $.ajax({
        type: "GET",
        url: 'Home/GetData',
        async: false,
        success: function (data) {
            for (var i = 0; i < data.length; i++) {
                var panel = $("<div class='panel' ></div>")
                var d = data[i];
                panel.append("ID: " + d.ID + "</br>");
                panel.append("Title: " + d.Title + "</br>");
                panel.append("Director: " + d.Director + "</br>");
                panel.append("<hr>");
                panel.data("info", d);
                panel.appendTo(info);
            }
        }
    });
}
$("#btnAdd").click(function () {
    $.post("Home/Insert", $("form").serialize(), insertCallback);
}); 
```

这很好用，我的问题是我想在“保存”按钮单击中更新数据库表。我试图调用`_db.SaveChanges();`保存按钮单击而不是`Insert`它没有添加`movieToInsert`到表，这里我想知道以后如何保存数据库，这里有什么做错了，或者有没有最好的数据库连接方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:17:07.287

您正在序列化一个表单，所以最终您可能想要下面...它将您的序列化表单绑定到电影模型/实体：

```
[AcceptVerbs("POST")]
public void Insert(MovieEntity movie) 
```

至于数据库实践，我建议阅读与 ASP.NET MVC 相关的存储库模式和依赖注入。

# javascript - Javascript表单验证不适用于任何字段

> ID：13814693
> 
> 赞同：0
> 
> 时间：2012-12-11T06:16:11.683
> 
> 标签：javascript, forms, validation

下面是使用 JavaScript 进行的表单验证，但它不起作用。

```
function validate()
{
    var n=document.frm.name.value();
    if(!n.match(/^[a-zA-Z]+$/))
    {
    alert("Enter valid Name");
    document.frm.name.value="";
    document.frm.name.focus();
    return false;
    }

    var b=document.frm.mob.value();
    if(!b.match(/^[0-9]+$/) || b.length<10 || b.length>10)
    {
    alert("Enter valid Name");
    document.frm.mob.value="";
    document.frm.mob.focus();
    return false;   
    }

    var y=document.frm.nn.value();
    if(y==null || y=="")
    {
    alert("Enter valid Name");
    document.frm.nn.value="";
    document.frm.nn.focus();
    return false;   
    }

    var z=document.frm.email.value();
    if(!z.match(/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/))
    {
    alert("Enter valid Name");
    document.frm.email.value="";
    document.frm.email.focus();
    return false;   
    }
}

<body>
<form name="frm" action="#" method="post" onsubmit="return validate()">
Name :<input type="text" name="name"/>
Mobile No:<input type="text" name="mob" />
Not Null :<input type="text" name="nn"/>
Email Id:<input type="text" name="email"/>
<input type="submit" name="submit" value="submit"/>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:20:51.963

First off, don't name your fields with reserved words (like "name")

Second, value is a property, not a method, so,

```
var b=document.frm.mob.value; 
```

(without the brackets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:48:31.003

**与其在onsubmit**事件的表单标签中调用函数**validate()**，不如在提交按钮中使用它

 **```
<input type="submit" name="submit" value="submit" onClick="return validate()" /> 
```

它将更好地工作并根据需要输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:33:20.973

请将 return false 放在函数之外。

```
 var b=document.frm.mob.value;
        if(!b.match(/^[0-9]+$/) || b.length<10 || b.length>10)
        {
        alert("Enter valid Name");
        document.frm.mob.value="";
        document.frm.mob.focus();     
        }

        var y=document.frm.nn.value;
        if(y==null || y=="")
        {
        alert("Enter valid Name");
    document.frm.nn.value="";
    document.frm.nn.focus();

    }

    var z=document.frm.email.value();
    if(!z.match(/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/))
    {
    alert("Enter valid Name");
    document.frm.email.value="";
    document.frm.email.focus();

    }
    return false;  
} 
```**

# activerecord - 跨多个表的 ActiveRecord 条件。

> ID：13814694
> 
> 赞同：0
> 
> 时间：2012-12-11T06:16:15.227
> 
> 标签：activerecord, join, conditional-statements

我正在尝试从我的数据库中检索汽车，其中每辆车都有制造商，并且可以有多种款式。

例如，福特嘉年华是双门轿车、轿车和掀背车。

我已经在我的模型中设置了我的关系，但现在我想创建一个查询来返回结果。查询构造将取决于提供的参数。

这是我到目前为止所拥有的

```
条件 = {}
条件[:manufacturer_id] = params[:manufacturer_id] 除非 params[:manufacturer_id].blank? # 这行得通！
条件[:style_id] = "style_id IN (?)", params[:style_ids] 除非 params[:style_ids].blank? #这打破了它:(

汽车 = Car.find(:all, :conditions=> 条件)
返回渲染：json =>汽车

```

返回的错误 `PG::Error: ERROR: column cars.style_ids does not exit`当然是因为 style_id 在名为`cars_styles`. 有没有办法告诉 ActiveRecord 在条件内查找哪个表？

这里的关键是我只想有一个控制器方法，它获取现有的参数，然后创建正确的查询。所以如果我没有manufacturer_id，它只会查询样式，反之亦然。当然，我稍后也会添加其他参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:10:40.470

我最终用这样的范围查询来做到这一点

```
范围 :from_manufacturer, lambda{|manu|{:joins => :manufacturer, :conditions => "manufacturers.id = #{manu}" }}
    范围 :from_style, lambda{|style|{:joins => :style, :conditions => "styles.id = #{style}"}}
    def self.get_cars（参数）
        范围=自我
        [:manufacturer,:style].each 做 |s|

            scope = scope.send("from_#{s}", params[s]) if params[s].present?

         结尾
        范围
    结尾

```

效果很好！

# c++ - 用有符号的长长结果减去无符号长长？

> ID：13814695
> 
> 赞同：4
> 
> 时间：2012-12-11T06:16:24.897
> 
> 标签：c++, c++11

假设我有这两种类型：

```
typedef unsigned long long uint64;
typedef signed long long sint64; 
```

我有这些变量：

```
uint64 a = ...;
uint64 b = ...;
sint64 c; 
```

我想从 a 中减去 b 并将结果分配给 c，很明显，如果差异的绝对值大于 2^63，它将包裹（或未定义），这是可以的。但是对于绝对差异小于 2^63 的情况，我希望结果是正确的。

以下三种方式：

```
c = a - b; // sign conversion warning ignored

c = sint64(a - b);

c = sint64(a) - sint64(b); 
```

它们中的哪一个可以保证按标准工作？（以及为什么/如何？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T06:31:12.823

这三个都不起作用。如果差为负（无论绝对值如何），第一个失败，第二个与第一个相同，如果任一操作数太大，第三个失败。

没有分支就不可能实现。

```
c = b < a? a - b : - static_cast< sint64 >( b - a ); 
```

从根本上说，`unsigned`类型使用没有任何符号位的模运算。他们不知道他们环绕，并且语言规范没有用负数识别环绕。此外，分配一个超出有符号整数变量范围的值会导致实现定义的、可能无意义的结果（整数溢出）。

考虑一台没有硬件来在本机负整数和二进制补码之间进行转换的机器。不过，它可以使用按位否定和本机二进制补码加法来执行二进制补码减法。（也许很奇怪，但这正是 C 和 C++ 目前所需要的。）然后，该语言将其留给程序员来转换负值。唯一的方法是否定一个正值，这要求计算的差异为正。所以……</p>

最好的解决方案是首先避免任何将负数表示为大正数的尝试。

**编辑：**我之前忘记了演员表，这会产生一个很大的无符号值，相当于其他解决方案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:17:51.100

Potatoswatter 的回答可能是最务实的解决方案，但“没有分支就不可能实现”对我来说就像是红布对公牛。如果您的假设系统实现了类似的未定义的溢出/强制转换操作，那么*我的*假设系统通过杀死小狗来实现分支。

所以我并不完全熟悉标准会说什么，但是这个怎么样：

```
sint64 c,d,r;
c = a >> 1;
d = b >> 1;
r = (c-d) * 2;
c = a & 1;
d = b & 1;
r += c - d; 
```

我以相当冗长的方式编写了它，因此各个操作都很清楚，但留下了一些隐含的强制转换。有什么未定义的吗？

Steve Jessop 正确地指出，在差值正好是 2^63-1 的情况下，这确实会失败，因为在减去 1 之前乘法会溢出。

所以这是一个*更丑陋*的版本，它应该涵盖所有下溢/上溢条件：

```
sint64 c,d,r,ov;
c = a >> 1;
d = b >> 1;
ov = a >> 63;
r = (c-d-ov) * 2;
c = a & 1;
d = b & 1;
r += ov + ov + c - d; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:24:44.090

> 如果差值的绝对值大于 2^63，那么它将包裹（或未定义），这是可以的。但是对于绝对差异小于 2^63 的情况，我希望结果是正确的。

然后，假设采用传统架构，您建议的所有三个符号都可以工作。显着的区别是，当差异不可表示时，第三个`sint64(a) - sint64(b)`调用未定义的行为，而前两个保证回绕（无符号算术溢出保证回绕，从无符号到有符号的转换是实现定义的，而有符号算术溢出未定义）。

# python - 如何在 Python 中交换元音和辅音

> ID：13814699
> 
> 赞同：2
> 
> 时间：2012-12-11T06:16:35.357
> 
> 标签：python, exchange-server, decode

我想做一个函数，它将以下列方式解码一个单词：第一个元音与最后一个元音交换，第二个与倒数第二个等交换。我想对辅音做同样的事情。最后它将返回解码后的单词。

这是我的元音代码的开头：

```
def decode(w):
    for i in range(len(w)):
        for j in range(len(w[::-1])):
            if (i[0] in 'aeiouy' and j[0] in 'aeiouy'):
                s[i],s[j]=s[j],s[i]
    return w 
```

问题是我不知道如何交换这封信。

例如：给了我一个词：'saturday' 而我的函数给了我'dyratsua'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T07:01:12.950

```
word = 'aerodynamic'

vowels = 'aeiouy'

is_vowel = [x in vowels for x in word]
word_vowels = [x for x in word if x in vowels]
word_consonants = [x for x in word if x not in vowels]

word_vowels.reverse()
word_consonants.reverse()

new_word = [word_vowels.pop(0) if x else word_consonants.pop(0) for x in is_vowel] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:47:39.697

这是你可以用元音实现你想要的一种方法（虽然它有点复杂 - 其他人会有更好的方法）。它的作用是首先从您的单词 ( `w`) 创建一个列表，原因是列表是可变的，因此可以在我们的迭代过程中进行修改。该`vowels`列表保存所有元音的索引位置。这`cutoff`是一个奇怪的部分 - 我们将使用它本身的反面`zip`进入`vowel`列表，它看起来像这样：

```
In [28]: zip(vowels, vowels[::-1])
Out[28]: [(1, 7), (3, 6), (6, 3), (7, 1)] 
```

所以我们有我们想要切换的索引位置，但正如你在中间元组之后看到的那样，我们只需将字母交换回来。因此我们必须表明我们不想使用整个`zip`ped 列表，所以我们在中间将其切断（因为奇数个元音将意味着中间元音用它自己替换它自己）。从那里开始，您就像以前一样 - 交换字母，但这次您使用的是可变列表。最后，将所有内容连接成一个字符串。

```
In [29]: word = 'saturday'

In [30]: vowels = [index for index, c in enumerate(word) if c in 'aeiouy']

In [31]: w = [c for c in word]

In [32]: cutoff = int(round(len(vowels)/2.0))

In [33]: for i1, i2 in zip(vowels, vowels[::-1])[:cutoff]:
   ....:     w[i1], w[i2] = w[i2], w[i1]
   ....:     
   ....:     

In [34]: ''.join(w)
Out[34]: 'sytardua' 
```

# java - UTF-8 | 提交表单时出现特殊字符问题 | java.io.CharConversionException

> ID：13814700
> 
> 赞同：2
> 
> 时间：2012-12-11T06:16:36.760
> 
> 标签：java, jakarta-ee, special-characters, server-side, web.xml

我有一个表单，其中有文本框和提交按钮。我正在使用 burp 工具更改表单中提交的值以测试我的服务器端验证。

服务器端验证工作正常，除非`%`从 burp 工具输入了一个字符，否则在输入`%`字符时服务器显示以下异常。

```
2012-12-11 11:37:07,860 WARN  [org.apache.tomcat.util.http.Parameters] (ajp-0.0.0.0-8109-19) Parameters: Character decoding failed. Parameter skipped.
java.io.CharConversionException: EOF
                at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:83)
                at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:49)
                at org.apache.tomcat.util.http.Parameters.urlDecode(Parameters.java:429)
                at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:412)
                at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:363)
                at org.apache.catalina.connector.Request.parseParameters(Request.java:2562)
                at org.apache.catalina.connector.Request.getParameter(Request.java:1060)
                at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:355)
                at org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:118)
                at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
                at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
                at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
                at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
                at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
                at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
                at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
                at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
                at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
                at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
                at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
                at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
                at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
                at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:436)
                at org.apache.coyote.ajp.AjpProtocol$AjpConnectionHandler.process(AjpProtocol.java:384)
                at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
                at java.lang.Thread.run(Thread.java:662) 
```

当我提交带有 % 字符的表单时，它会正确地将其更改为 %25，但是我该如何处理这个服务器端呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:15:08.793

您遇到的问题是解码器在以`%`符号开头时需要一个有效的、可解码的参数。提交表单时，输入参数`%`正确编码为`%25`，当您使用 Burp 编辑此请求时，据我所知，此编码不会发生。Burp 自愿向您的服务器发送`%`符号，并且您的服务器端验证假定这是编码值的开始，但任何解码都失败，因为它基本上是一个损坏的参数。

我最好的猜测是不要单独发送 %-values（即不附带数值）。就像在空引用上调用方法一样。有些事情是行不通的。我想说您尝试检查百分比符号是否被您自己的输入验证批准或拒绝，但只要它首先通过解码，就必须对其进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T13:58:59.917

如果您仔细检查堆栈跟踪，所有涉及的类（将 HTTP 文本解析为 Java 请求对象）都来自框架，并且**用户无法控制它**。

现在这背后的**基本前提**是：服务器将始终假定它接收到的数据**始终是 URL 编码**的，因此它总是会尝试解码。

如果解码失败，这意味着 HTTP 协议的基本原则没有得到遵守，因此直接拒绝了请求，而没有给用户处理它的机会。

所以恕我直言，您无法处理这种情况，因为服务器自己正确地处理了它。

**编辑：**

上面@Ravi 提出的一种解决方案*看起来*可以解决问题。我尝试了相同的代码，但我永远无法捕捉到异常！

深入挖掘，很清楚为什么`java.io.CharConversionException`不能在任何用户定义的代码中处理异常 ()。

虽然`java.io.CharConversionException`被抛出，但它从未在调用层次结构中传播。这就是为什么，

在堆栈跟踪中

```
 at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:83)
        at org.apache.tomcat.util.buf.UDecoder.convert(UDecoder.java:49)
        at org.apache.tomcat.util.http.Parameters.urlDecode(Parameters.java:429)
        at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:412) 
```

查看类中方法的**来源**（代码取自[grepcode](http://grepcode.com/file/repository.springsource.com/org.apache.coyote/com.springsource.org.apache.coyote/6.0.18/org/apache/tomcat/util/http/Parameters.java#Parameters.processParameters%28byte%5B%5D,int,int,java.lang.String%29)）`processParameters()``org.apache.tomcat.util.http.Parameters`

```
public void processParameters( byte bytes[], int start, int len, 
                                   String enc ) {
        int end=start+len;
        int pos=start;

        if( debug>0 ) 
            log( "Bytes: " + new String( bytes, start, len ));

        do {
            boolean noEq=false;
            int valStart=-1;
            int valEnd=-1;

            int nameStart=pos;
            int nameEnd=ByteChunk.indexOf(bytes, nameStart, end, '=' );
            // Workaround for a&b&c encoding
            int nameEnd2=ByteChunk.indexOf(bytes, nameStart, end, '&' );
            if( (nameEnd2!=-1 ) &&
                ( nameEnd==-1 || nameEnd > nameEnd2) ) {
                nameEnd=nameEnd2;
                noEq=true;
                valStart=nameEnd;
                valEnd=nameEnd;
                if( debug>0) log("no equal " + nameStart + " " + nameEnd + " " + new String(bytes, nameStart, nameEnd-nameStart) );
            }
            if( nameEnd== -1 ) 
                nameEnd=end;

            if( ! noEq ) {
                valStart= (nameEnd < end) ? nameEnd+1 : end;
                valEnd=ByteChunk.indexOf(bytes, valStart, end, '&');
                if( valEnd== -1 ) valEnd = (valStart < end) ? end : valStart;
            }

            pos=valEnd+1;

            if( nameEnd<=nameStart ) {
                log.warn("Parameters: Invalid chunk ignored.");
                continue;
                // invalid chunk - it's better to ignore
            }
            tmpName.setBytes( bytes, nameStart, nameEnd-nameStart );
            tmpValue.setBytes( bytes, valStart, valEnd-valStart );

            try {
                addParam( urlDecode(tmpName, enc), urlDecode(tmpValue, enc) );
            } catch (IOException e) {
                // Exception during character decoding: skip parameter
                log.warn("Parameters: Character decoding failed. " + 
                         "Parameter skipped.", e);
            }

            tmpName.recycle();
            tmpValue.recycle();

        } while( pos<end );
    } 
```

该方法中有一个do-while循环，用于解析所有的请求参数。查看方法中循环末尾的**try-catch 块。**有一条评论说

```
// Exception during character decoding: skip parameter 
```

所以即使抛出异常但它**没有传播**。其记录为警告消息，参数值设置为空。所以很明显，**您将永远无法捕获该异常**( `java.io.CharConversionException`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T07:32:05.553

通过这个测试（在应该是 URL 编码的数据中包括一个原始的“%”），您正在测试您的应用程序是否适当地拒绝了格式错误的输入。没有错。

如果要使用 burp 推送数据，则需要对其进行编码，这意味着您需要在需要 '%' 的地方放入 '%25'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T15:02:40.600

考虑到要求您对输入进行编码是安全的，其他答案是正确的，因为所有浏览器也会这样做，并且理想情况下您永远不会收到未编码的纯`%`字符。

但是，话虽如此，如果您仍然坚持看到错误页面；可以编写一个自定义过滤器来捕获它`CharConversionException`并向客户端发送错误页面或将请求转发到相同的 URI 但具有`errorMessage`属性集，以便以不同的方式处理请求。

这是通过一个名为`useErrorPage`.

**编辑**：根据@Santosh 共享的源代码，这表明`CharConversionException`Tomcat 实际上正在抑制我已经修改了过滤器以注入参数验证并检查所有请求参数以获取可以通过过滤器参数配置的禁止字符列表名为`forbiddenChars`.

*将此过滤器放在 web.xml 中 DisplayTag 的 ResponseOverrideFilter 上方，以确保它拦截所有内容。当涉及到过滤器时，排序可能会产生副作用。*

我想借此机会强调**Servlet 过滤器**是一个非常强大的概念，它可以让您以任何您喜欢的方式预先或后处理任何请求。大多数 Web 框架（如 MVC 的 Struts 2）都使用过滤器作为它们的入口点。

所以，几乎没有什么是你不能用过滤器做的。只要确保您将它们用于正确的目的，例如业务逻辑显然不应该去那里，尽管应用程序范围的身份验证可以。

**IOException 过滤器**

```
public class CharConversionExpFilter implements Filter {

    private char[] forbiddenChars;  // ADDED
    private FilterConfig filterConfig;

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        this.filterConfig = filterConfig;
        forbiddenChars = filterConfig.getInitParameter("forbiddenChars")
                               .replace(",", "").toCharArray(); // ADDED
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        String requestURI = ((HttpServletRequest) request).getRequestURI();
        try {
            validateParameters((HttpServletRequest) request);  // ADDED
            chain.doFilter(request, response);
        } catch (IOException e) {
            if (e instanceof CharConversionException) {
                if ("true".equalsIgnoreCase(filterConfig.getInitParameter("useErrorPage"))) {
                    if (response instanceof HttpServletResponse) {
                        ((HttpServletResponse) response).sendError(400,
                        "The request cannot be fulfilled due to bad input.\nError:" + e.getMessage());
                    }
                } else {
                    request.setAttribute("errorMessage", e.getMessage());
                    filterConfig.getServletContext().getRequestDispatcher(requestURI).forward(request, response);
                }
            }
        }
    }

    // ADDED
    private void validateParameters(HttpServletRequest request) throws CharConversionException {
        Enumeration<String> parameterNames = request.getParameterNames();
        while (parameterNames.hasMoreElements()) {
            String parameter = request.getParameter(parameterNames.nextElement());
            if (parameter != null && parameter.length() > 0) {
                for (char forbidChar : forbiddenChars) {
                    if (parameter.indexOf(forbidChar) != -1) {
                        throw new CharConversionException(
                                String.format(
                                        "Parameter: [%s] contains the forbidden character [%c]",
                                        parameter, forbidChar));
                    }
                }
            }
        }
    }

    @Override
    public void destroy() {}
} 
```

**web.xml**

```
<filter>
  <filter-name>CharConversionExpFilter</filter-name>
  <filter-class>servlet.filter.CharConversionExpFilter</filter-class>
  <init-param>
    <param-name>useErrorPage</param-name>
    <param-value>true</param-value>
  </init-param>
  <init-param> <!-- ADDED -->
    <param-name>forbiddenChars</param-name>
    <param-value>%,*,?,#,$</param-value> <!-- filtering wildcards and EL chars -->
  </init-param>
</filter>

<filter-mapping>
  <filter-name>CharConversionExpFilter</filter-name>
  <url-pattern>/*</url-pattern> <!-- * = ALL; "/servlet-name" if required -->
</filter-mapping>

<error-page>
  <error-code>400</error-code>
  <location>/errorPage.jsp</location> <!-- isErrorPage = true; use "exception" obj -->
</error-page> 
```

希望这可以为您提供足够的指导，以根据您的需要制定解决方案。（**注意**：语法高亮被`<url-pattern>/*`错误地解释为多行 Java 注释的开头。请忽略它。）

# java - 如何更改 jdesktoppane 默认背景图像？

> ID：13814704
> 
> 赞同：10
> 
> 时间：2012-12-11T06:16:49.223
> 
> 标签：java, swing, netbeans-7, jinternalframe, jdesktoppane

如何使用 java netbeans 在 MDI（多文档界面）中更改 jdesktoppane 背景图像？意味着我将 jdesktoppane 添加到 java MDI，所以现在我想更改我在 java MDI 中使用的那个 jdesktoppane 的默认背景图像。有什么简单的方法吗？

检查附加的快照链接，您可能会更好地理解我想要的问题。

[http://i50.tinypic.com/iml1e9.jpg](http://i50.tinypic.com/iml1e9.jpg)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T07:42:48.037

+1 对 MadProgrammers 的评论。

只需覆盖`JDesktopPane` `paintComponent(..)`并调用`drawImage(Image img,int x,int y,ImageObserver io)`即可绘制图像。

不要忘记尊重*油漆链*并`super.paintComponent(g)`在覆盖`paintComponent(..)`方法中作为第一个调用调用

这是一个例子：

![在此处输入图像描述](../Images/cc38e8596202068680c39759758a4940.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.SwingUtilities;

public class JInternalFrameDemo {

    private JDesktopPane jdpDesktop;
    private static int openFrameCount = 0;
    private BufferedImage img;

    public JInternalFrameDemo() {
        JFrame frame = new JFrame("JInternalFrame Usage Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        try {
            img = ImageIO.read(new URL("http://images1.wikia.nocookie.net/__cb20120817224359/villains/images/6/6a/Nine-Tailed_Fox_(Naruto).jpg"));
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        // A specialized layered pane to be used with JInternalFrames
        jdpDesktop = new JDesktopPane() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);
                grphcs.drawImage(img, 0, 0, null);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(img.getWidth(), img.getHeight());
            }
        };

        createFrame(); // Create first window

        frame.setContentPane(jdpDesktop);

        frame.setJMenuBar(createMenuBar());

        // Make dragging faster by setting drag mode to Outline
        jdpDesktop.putClientProperty("JDesktopPane.dragMode", "outline");

        frame.pack();
        frame.setVisible(true);
    }

    protected JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("Frame");
        menu.setMnemonic(KeyEvent.VK_N);
        JMenuItem menuItem = new JMenuItem("New IFrame");
        menuItem.setMnemonic(KeyEvent.VK_N);
        menuItem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                createFrame();
            }
        });
        menu.add(menuItem);
        menuBar.add(menu);
        return menuBar;
    }

    protected void createFrame() {
        MyInternalFrame frame = new MyInternalFrame();
        frame.setVisible(true);
        // Every JInternalFrame must be added to content pane using JDesktopPane
        jdpDesktop.add(frame);
        try {
            frame.setSelected(true);
        } catch (java.beans.PropertyVetoException e) {
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JInternalFrameDemo();
            }
        });
    }

    class MyInternalFrame extends JInternalFrame {

        static final int xPosition = 30, yPosition = 30;

        public MyInternalFrame() {
            super("IFrame #" + (++openFrameCount), true, // resizable
                    true, // closable
                    true, // maximizable
                    true);// iconifiable
            setSize(300, 300);
            // Set the window's location.
            setLocation(xPosition * openFrameCount, yPosition
                    * openFrameCount);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-18T08:42:33.277

我在一个单独的函数中解决它来创建一个桌面对象。

代码如下

```
private JDesktopPane intializeDesktop(JDesktopPane mydesktop,String imagePath,int scalx,int scaly) {

        // A specialized layered pane to be used with JInternalFrames
        mydesktop = new JDesktopPane() {
            ImageIcon icon = new ImageIcon(imagePath);
            Image image = icon.getImage();

            Image newimage = image.getScaledInstance(scalx, scaly, Image.SCALE_SMOOTH);

            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.drawImage(newimage, 0, 0, this);
            }
        };

        return mydesktop;
    } 
```

# ios - 使用 ios facebook SDK 3.1 在墙上发布

> ID：13814706
> 
> 赞同：1
> 
> 时间：2012-12-11T06:17:11.627
> 
> 标签：ios, facebook-ios-sdk

在我的 ios 应用程序中，我想使用 facebookSDK 3.1 在用户墙上发布。此外，如果可能，我想避免使用权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:55:21.163

[使用来自http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)的 GraphAPI

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               kAppId, @"app_id",
                               @"http://developers.facebook.com/docs/reference/dialogs/", @"link",
                               @"http://fbrell.com/f8.jpg", @"picture",
                               @"Facebook Dialogs", @"name",
                               @"Reference Documentation", @"caption",
                               @"Dialogs provide a simple, consistent interface for apps to interact with users.", @"description",
                               @"Facebook Dialogs are so easy!",  @"message",
                               nil];

[_facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

# dhtmlx - DHTMLX 冻结网格在 IE 中不起作用

> ID：13814711
> 
> 赞同：1
> 
> 时间：2012-12-11T06:17:32.683
> 
> 标签：dhtmlx

当冻结应用于 dhtmlxgrid 时，标题会根据拆分值重复。

应用拆分前

```
code    desc          Qtytype    w1    w2
Part A  Part A desc   Demand     100  200 
```

应用拆分后，网格在 IE 中看起来像

```
code    desc          Qtytype    code    desc    Qtytype  w1  w2
Part A  Part A desc   Demand     100     200      300     400 500 
```

请告知如何在 IE 中阻止标题重复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:55:32.700

在初始化之前使用 SplitAt。并尝试加载 Header 和 Detail dhtmlx ajax 同步调用。，

# java - C ++中的JNI JVM无法使用分配的堆内存

> ID：13814718
> 
> 赞同：0
> 
> 时间：2012-12-11T06:18:48.960
> 
> 标签：java, c++, java-native-interface

```
i am calling java code in c++ using jni ,i alloted 60GB as max heap memory ,but while running its using less memory because of that its taking much time . 
```

我正在使用 windows7 操作系统，VS2008。

我使用控制台运行java，它正在使用分配的内存，并且做得很快，你能帮我解决这个问题吗？

更新说明：

我们有一个内存密集型 Java 应用程序，我们尝试了以下两种方式。

1.来自使用 JNI 的 c++ 应用程序。

2.直接通过命令提示符执行。

在这两种情况下，我们都为 jvm 分配了 60GB 的堆内存大小。我们发现上述两种执行方法有以下区别。

1.c++应用使用JNI达到40GB内存。（执行慢）

2.通过命令提示符执行达到约60GB内存。（快速执行）

内存使用量不同的原因可能是什么？

## JVM初始化：

```
JavaVMInitArgs vm_args;
 JavaVMOption options[3];

 options[0].optionString = "-Djava.class.path=c:\\Application\\bin-7.0\\morpher\\app.jar;";
 options[1].optionString = "-Xms1024m";
 options[2].optionString = "-Xmx50000m";

 vm_args.version = JNI_VERSION_1_6;
 vm_args.nOptions = 3;
 vm_args.options = options;
 vm_args.ignoreUnrecognized = 0;
 JNI_GetDefaultJavaVMInitArgs(&vm_args);
 int ret = JNI_CreateJavaVM(jvm, (void**)&env, &vm_args); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:44:32.457

不可能以这种方式回答你的问题，但我可以告诉你。

*   您可以非常快速地分配堆，每秒 400+ MB 非常小的对象。对于大型物体来说要快得多。
*   你可能会发现增加你的 eden 大小会通过减少触发的 GC 数量来提高分配对象的速率。
*   可能让你慢下来的是堆集合。我建议增加你的伊甸园大小，但也通过将大量数据放置在带有 ByteBuffers 和内存映射文件的本机内存中来减少你的堆。
*   您可以在几秒钟或更短的时间内附加 500 GB 的内存映射文件。
*   如果您正在创建数以亿计或数百万个对象，则值得重新考虑您的设计以减少对象数量，例如使用基于列的表而不是基于行的表。（你可能只有几十列，但几百万行和创建几十个数组比创建几百万个对象要快）

# iphone - 我可以获得iOS UIPasteboard的所有名称吗？

> ID：13814719
> 
> 赞同：3
> 
> 时间：2012-12-11T06:18:49.190
> 
> 标签：iphone, objective-c, ios, uipasteboard

要实例化 UIPasteboard，需要一个名称。但我想知道 UIPasteboard 的所有名称。有没有办法知道 UIPasteboard 的所有名称？

例如，如果已经知道粘贴板的名称，则以下就足够了。

```
UIPasteboard* pb = [UIPasteboard pasteboardWithName:[NSString stringWithFormat:@"NameOfPasteboard"]; 
```

但名称可能是动态生成的带前缀的字符串。在这种情况下，我想知道所有具有相同前缀的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:22:45.483

要以跨应用程序的方式将 UIPasteBoard 与任何通用内容类型一起使用，不需要名称，而是调用`+[UIPasteBoard generalPasteboard]`，它返回的粘贴板接受您在复制粘贴操作中提供的大多数任何类型的内容。如果您想使用需要名称的初始化程序，请传入`UIPasteboardNameGeneral`以达到与上述相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:25:39.557

您可以使用一个公共粘贴板访问`[UIPasteBoard generalPasteboard]`。这是普通的共享粘贴板，可让您在应用程序之间复制和粘贴内容。

还有命名的粘贴板。没有 API 可以获取现有粘贴板的名称。命名粘贴板就像私有粘贴板。它们可以在应用程序之间共享，但每个应用程序必须就名称达成一致，或者名称可以从一个应用程序发送到另一个应用程序。例如，这可以在用于从另一个应用程序启动一个应用程序的 URL 上完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:27:38.137

```
textViewer.text = [UIPasteboard generalPasteboard].string; 
```

一个例子。

此外，您需要已经有了粘贴板的名称才能使用需要它的粘贴板。

# c# - 如何在类库项目中包含一个小型示例应用程序？

> ID：13814722
> 
> 赞同：0
> 
> 时间：2012-12-11T06:18:55.967
> 
> 标签：c#, wpf, visual-studio-2010

我编写了一个包含 WPF 控件的类库。我认为以包含控件的小应用程序的形式记录功能是一个好主意。

我很难配置项目。

-- 我应该把它做成一个Windows应用程序吗？但是我需要签名。

-- 如果我把它变成一个类库，那么我就不能设置一个启动对象。

-- 我做两个项目吗？一个用于库，一个用于演示应用程序。

什么是“批准”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T07:02:22.897

您*需要*一个 Windows 应用程序来演示实际使用中的控件。根本没有办法解决这个问题。类库不能自行执行。所以为图书馆制作一个，就像你已经拥有的那样，一个用于演示应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:07:28.440

我认为最好的解决方案（我相信最正确的解决方案）是制作单独的 Windows 应用程序。它将演示您的控件的使用，并且不会使库过载

# .net - how to set parent of folderBrowser or SHBrowseForFolder so dialog shows on top of form - Visual C++?

> ID：13814725
> 
> 赞同：0
> 
> 时间：2012-12-11T06:19:28.340
> 
> 标签：.net, windows, visual-c++

I have a form and I am trying to open a folder browser dialog that is positioned on top of the form and not in the center of the screen. (Windows 7, Visual Studio Express 2012)

the form name is "form"

I have tried the following with a FolderBrowserDialog:

```
browseFolderDialog = gcnew FolderBrowserDialog();
DialogResult result = browseFolderDialog->ShowDialog(form); 
```

I have also tried using SHBrowseForFolder providing the handle of the form as hwnd:

```
System::String^ BrowseUtility::getFolder(System::Windows::Forms::Form^ form)
{
    //HWND hwnd = GetForegroundWindow();

    System::Windows::Forms::Control ^ctrl1 = form; // Form derives from Control
    System::IntPtr wrappedHandle = form->Handle;
    void *windowHandle1 = wrappedHandle.ToPointer();
    HWND hwnd = reinterpret_cast<HWND>(windowHandle1);

    System::String^ result = L"-1";
    TCHAR szFolder[MAX_PATH];
    if (GetFolderSelection(hwnd, szFolder, TEXT("Please select a folder.")))
    {
        result = gcnew System::String(szFolder);
    }
    return result;
}

BOOL BrowseUtility::GetFolderSelection(HWND hWnd, LPTSTR szBuf, LPCTSTR szTitle)
{
    LPITEMIDLIST pidl     = NULL;
    BROWSEINFO   bi       = { 0 };
    BOOL         bResult  = FALSE;

    bi.hwndOwner      = hWnd;
    bi.pszDisplayName = szBuf;
    bi.pidlRoot       = NULL;
    bi.lpszTitle      = szTitle;
    bi.ulFlags        = BIF_RETURNONLYFSDIRS | BIF_USENEWUI;

    if ((pidl = SHBrowseForFolder(&bi)) != NULL)
    {
        bResult = SHGetPathFromIDList(pidl, szBuf);
        CoTaskMemFree(pidl);
    }

    return bResult;
} 
```

Note I have even tried providing hWnd as HWND hwnd = GetForegroundWindow();

The folder browser still shows in the center of the screen.

Any ideas would be a help - I know this can't be that hard

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:58:37.170

感谢我需要使用回调来处理 setWindowPos 的建议

以下是我想出的有效的课程：

自定义文件夹浏览器

标题：

```
#ifndef _CUSTOMFOLDERBROWSER_H_
#define _CUSTOMFOLDERBROWSER_H_
class CustomFolderBrowser
{
  public: CustomFolderBrowser(void);
  public: System::Windows::Forms::DialogResult showDialog(System::Windows::Forms::Form^ form);
  public: System::String^ getSelectedFolder(void);
};
#endif 
```

cpp文件：

```
#include "CustomFolderBrowser.h"
#include <shlobj.h>
#include <Windows.h>
#pragma comment(lib, "User32.lib")
#pragma comment(lib, "ole32.lib")
#pragma comment(lib, "shell32.lib")

int x;
int y;
int w;
int h;

TCHAR result[MAX_PATH];

int CALLBACK Folder_Browse_Callback (HWND hwnd, UINT uMsg, LPARAM lp, LPARAM pData);

CustomFolderBrowser::CustomFolderBrowser () {}

System::Windows::Forms::DialogResult CustomFolderBrowser::showDialog(System::Windows::Forms::Form^ form)
{
    x = form->Bounds.X;
    y = form->Bounds.Y;
    w = form->Bounds.Width;
    h = form->Bounds.Height;

    System::IntPtr wrappedHandle = form->Handle;
    void *windowHandle1 = wrappedHandle.ToPointer();
    HWND hwnd = reinterpret_cast<HWND>(windowHandle1);

    LPITEMIDLIST pidl     = NULL;
    BROWSEINFO   bi       = { 0 };
    BOOL         bResult  = FALSE;

    bi.hwndOwner      = hwnd;
    bi.pszDisplayName = result;
    bi.pidlRoot       = NULL;
    bi.lpszTitle      = TEXT("Please select a folder.");
    bi.ulFlags        = BIF_RETURNONLYFSDIRS | BIF_USENEWUI;
    bi.lpfn = Folder_Browse_Callback;
    bi.lParam = (LPARAM)this;

    if ((pidl = SHBrowseForFolder(&bi)) != NULL)
    {
        bResult = SHGetPathFromIDList(pidl, result);
        CoTaskMemFree(pidl);
    }

    if (bResult)
        return System::Windows::Forms::DialogResult::OK;
    return System::Windows::Forms::DialogResult::Cancel;
}

System::String^ CustomFolderBrowser::getSelectedFolder(void)
{
    return gcnew System::String(result);
}

int CALLBACK Folder_Browse_Callback (HWND hwnd, UINT uMsg, LPARAM lp, LPARAM pData)
{
    if(uMsg == BFFM_INITIALIZED)
    {
        RECT desktopRect;
        HWND hDesktop=::GetDesktopWindow();
        ::GetWindowRect(hDesktop, &desktopRect);
        RECT dialogRect;
        ::GetWindowRect(hwnd, &dialogRect);
        int wDialog = dialogRect.right - dialogRect.left;
        int hDialog = dialogRect.bottom - dialogRect.top;
        double xoff = (w - wDialog)/2.0;
        double yoff = (h - hDialog)/2.0;
        int xDialog = x + (int)xoff;
        int yDialog = y + (int)yoff;
        if(xDialog < 0)
            xDialog = 0;
        if(xDialog + wDialog > desktopRect.right)
            xDialog = desktopRect.right - wDialog;
        if(yDialog + hDialog > desktopRect.bottom)
            yDialog = desktopRect.bottom - hDialog;
        if(yDialog < 0)
            yDialog = 0;
        ::SetWindowPos(hwnd, NULL, xDialog, yDialog, 0, 0, SWP_NOSIZE | SWP_NOZORDER | SWP_SHOWWINDOW);
    }
    return 0;
} 
```

然后我显示对话框

```
CustomFolderBrowser* bu = new CustomFolderBrowser();
DialogResult result = bu->showDialog(form);
if(result == DialogResult::OK)
{
    label->Text = bu->getSelectedFolder();
} 
```

谢谢你的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:46:36.553

我看了一下 Winforms 中的 C# 解决方案，并想出了以下 c++ 解决方案

课堂中心WinDialog

标题：

```
#pragma once
ref class CenterWinDialog :
public System::IDisposable
{
public: static int mTries;
public: static System::Windows::Forms::Form^ mOwner;
public:
    CenterWinDialog(System::Windows::Forms::Form^ form);
public:
    void findDialog(void);
delegate void FindDelegate();
~CenterWinDialog() 
{
    mTries = -1;
    this->!CenterWinDialog(); 
}
!CenterWinDialog() {}
}; 
```

cp:

```
#include "CenterWinDialog.h"
#include <Windows.h>
#pragma comment(lib, "User32.lib")

using namespace System;
using namespace System::Drawing;
using namespace System::Windows::Forms;
using namespace System::Runtime::InteropServices;

BOOL CALLBACK EnumThreadWndProc(HWND hwnd, LPARAM lParam)
{
    TCHAR s[260];
    GetClassName(hwnd, s, 260);
    String^ name = gcnew String(s);
    if (name != "#32770") return true;

    System::Drawing::Rectangle^ frmRect = gcnew System::Drawing::Rectangle(
        CenterWinDialog::mOwner->Location, CenterWinDialog::mOwner->Size);
    RECT dlgRect;
    GetWindowRect(hwnd, &dlgRect);
    RECT dskRect;
    HWND hDesktop = GetDesktopWindow();
    GetWindowRect(hDesktop, &dskRect);

    int wdlg = dlgRect.right - dlgRect.left;
    int hdlg = dlgRect.bottom - dlgRect.top;
    int xdlg = frmRect->X + (frmRect->Width - wdlg)/2;;
    int ydlg = frmRect->Y + (frmRect->Height - hdlg)/2;;
    if(xdlg < 0)
        xdlg = 0;
    if(xdlg + wdlg > dskRect.right)
        xdlg = dskRect.right - wdlg;
    if(ydlg + hdlg > dskRect.bottom)
        ydlg = dskRect.bottom - hdlg;
    if(ydlg < 0)
        ydlg = 0;

    MoveWindow(hwnd, xdlg, ydlg, wdlg, hdlg, true);
    return false;
}

CenterWinDialog::CenterWinDialog(Form^ owner) 
{
    mTries = 0;
    mOwner = owner;
    FindDelegate^ action = gcnew FindDelegate(this, &CenterWinDialog::findDialog);
    owner->BeginInvoke(action);
}

void CenterWinDialog::findDialog() 
{
    if (CenterWinDialog::mTries < 0) return;
    if (EnumThreadWindows(GetCurrentThreadId(), EnumThreadWndProc, NULL)) 
    {
        FindDelegate^ action = gcnew FindDelegate(this, &CenterWinDialog::findDialog);
        if (++CenterWinDialog::mTries < 10) 
            CenterWinDialog::mOwner->BeginInvoke(action);
    }
} 
```

典型用法：

```
FolderBrowserDialog^ fbd = gcnew FolderBrowserDialog();
gcnew CenterWinDialog(form);
DialogResult result = fbd->ShowDialog();
if(result == DialogResult::OK)
{
    label->Text = fbd->SelectedPath;
} 
```

# java - check event of panel in the main java class

> ID：13814727
> 
> 赞同：0
> 
> 时间：2012-12-11T06:19:30.417
> 
> 标签：java, swing, jframe, jpanel

I want to check the event of panel class which is being added on the `JFrame` class. In this sample program there is a button on a panel.

I want to monitor the click event of the button from the source frame.

```
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

class test extends JFrame implements ActionListener {
    test() {
        Container cp = this.getContentPane();
        JButton b1 = new JButton("add");
        cp.add(b1);
        b1.addActionListener(this);
    }

    public void actionPerformed(ActionEvent ae) {
        if (ae.getActionCommand().equals("add")) {
            panel1 frm = new panel1();
            cp.add(frm);
        }
    }

    public static void main(String args[]) {
        test t1 = new test();
        t1.show(true);
    } 
}

class panel1 extends JPanel {
    panel1() {
        JButton b1 = new JButton("ok");
        add(b1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:37:28.520

您需要以`JButton`某种方式使“外部”世界可用。

就个人而言，我不愿意让按钮本身可用，相反，我会允许外部世界附加一个`ActionListener`...

```
public class Test extends JFrame implements ActionListener {
    public Test() {
        Container cp = this.getContentPane();
        JButton b1 = new JButton("add");
        cp.add(b1);
        b1.addActionListener(this);
    }

    public void actionPerformed(ActionEvent ae) {
        if (ae.getActionCommand().equals("add")) {
            TestPane frm = new TestPane();
            frm.addActionListener(...); // Add your new action listener here
            cp.add(frm);
        }
    }

    public static void main(String args[]) {
        test t1 = new test();
        t1.show(true);
    } 
}

public class TestPane extends JPanel {
    private JButton b1;
    public TestPane() {
        b1 = new JButton("ok");
        add(b1);
    }

    public void addActionListener(ActionListener listener) {
        b1.addActionListener(listener);
    }

    public void removeActionListener(ActionListener listener) {
        b1.removeActionListener(listener);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:55:24.553

无论您放入框架中，它都只是放入框架的中心。因此，请使用 BorderLayout 使其可见，如下所示

```
公共无效actionPerformed（ActionEvent ae）{
        if (ae.getActionCommand().equals("add")) {
            System.out.println("in actionPerformed");
            面板 1 frm = 新面板 1();
          // this.removeAll();
            add(frm,BorderLayout.NORTH);
            this.validate();
        }
    }

```

# actionscript-3 - how to retrieve data from database using flex code

> ID：13814730
> 
> 赞同：2
> 
> 时间：2012-12-11T06:19:34.283
> 
> 标签：actionscript-3, apache-flex, flex4.6

I want to display the values coming from database in a datagrid using flex. Here is my code. I am using webservice. I have database values from `application1_initializeHandler()` method. How to fetch these values into onResult() method and perform databinding? I want code for `onResult()` function and data binding. Please help..

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" initialize="application1_initializeHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
            import mx.rpc.AsyncResponder;
            import mx.rpc.AsyncToken;
            import mx.rpc.events.FaultEvent;
            import mx.rpc.events.ResultEvent;

            protected function application1_initializeHandler(event:FlexEvent):void
            {
                AreasOfWestBengal.loadWSDL();
                var s:String = "SELECT * FROM [CSFTestNew].[dbo].[AreasOfWestBengal]";
                var t:AsyncToken = AreasOfWestBengal.GetRec("[AreasOfWestBengal]", s, "1", "SQLExpress");
                t.addResponder(new AsyncResponder(onResult, onFault, t));
            }

            protected function onResult(event:ResultEvent, token:Object=null):void
            {

            }

            protected function onFault(event:FaultEvent, token:Object=null):void
            {
                trace(event.fault.toString());
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <s:WebService id="AreasOfWestBengal" wsdl="https://www.geoviewer8.com/gv8webservices/CSF_NewGVOConfig/GVOConfig.asmx?wsdl"/>
    </fx:Declarations>
    <mx:DataGrid x="197" y="83" width="348" height="216">
        <mx:columns>
            <mx:DataGridColumn headerText="Areas" dataField="Areas"/>
            <mx:DataGridColumn headerText="SubAreas" dataField="SubAreas"/>
        </mx:columns>
    </mx:DataGrid>  

</s:Application> 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:04:57.220

*一种解决方案是为您的mx:DataGrid*设置一个数据提供程序（如*ArrayCollection*）作为它的*dataProvider*属性 - 有关示例 ，请参见[此处的将](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_6.html "将数据传递给 DataGrid 控件")[*数据传递到 DataGrid 控件部分。*](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_6.html "将数据传递给 DataGrid 控件")**[](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_6.html "将数据传递给 DataGrid 控件")**

 ***现在，当您的*onResult*函数执行时，您可能希望首先清除您的数据提供者（从*DataGrid*中删除任何行） - 如果数据源是*ArrayCollection*，您将使用*removeAll*方法。[*现在从ResultEvent*](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/events/ResultEvent.html "结果事件")参数获取实际的 Web 服务调用结果（在您的代码中，它是`event.result`）。您需要知道此结果值的数据类型（它应该是某种列表数据结构），以便弄清楚如何将其元素作为网格行添加到*DataGrid 的*数据提供程序中。例如，如果您的数据提供者是[*ArrayCollection*](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ArrayCollection.html#methodSummary "数组集合")，您可以将 的每个元素添加`event.result`到此*ArrayCollection*使用它的*addItem*方法。如果`event.result`实现*IList接口，您可以使用**ArrayCollection的**addAll*方法将所有行添加到数据提供程序中。确保作为行添加到数据提供程序中的对象符合您的*mx:DataGridColumns* - 即这些对象需要具有*Areas*和*SubAreas*属性，以便它们的值将显示在这些列中。

 ***这是[来自 Adob ​​e 的特定于](http://livedocs.adobe.com/flex/3/html/help.html?content=data_access_3.html "使用 mx:DataGrid 的 Flex Web 服务")[Web 服务的*DataGrid*](http://livedocs.adobe.com/flex/3/html/help.html?content=data_access_3.html "使用 mx:DataGrid 的 Flex Web 服务")示例。

```
protected function onResult(event:ResultEvent, token:Object=null):void
{
     // Assuming the grid's data provider is an ArrayCollection

     // (1) clear existing table rows
     dataProvider.removeAll();

     // (2) add the new rows from event.result into dataProvider 
     // using dataProvider.addAll(event.result) if possible or one at a time
     // using dataProvider.addItem(...)
     dataProvider.addAll(event.result);

     // An alternative to the above would be to replace the dataProvider 
     // of your grid with event.result if it is a compatible data type
     //       AreasOfWestBengal.dataProvider = event.result;
} 
```******

# android - DrawLine googlemaps not working, first timer on GoogleMaps Android

> ID：13814731
> 
> 赞同：0
> 
> 时间：2012-12-11T06:19:46.640
> 
> 标签：android, google-maps

I am trying to draw a line between 2 geopoints on a google map. I am able to place markers, but not draw a line between them. I know I am missing something trivial.

```
//subscribedToMap is a MapView
subscribedToMap.getOverlays().add(new PathMarker(journey.getSourceGPSX(),
                    journey.getSourceGPSY(),
                    journey.getDestinationGPSX(),
                    journey.getDestinationGPSY())) ;
subscribedToMap.invalidate();

public class PathMarker extends Overlay {
    private Double slat, slng, dlat, dlng;

    public PathMarker(Double slat, Double slng, Double dlat, Double dlng) {
        super();
        this.slat = slat;
        this.slng = slng;
        this.dlat = dlat;
        this.dlng = dlng;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        canvas.drawLine(slat.intValue(), slng.intValue(), dlat.intValue(),
                dlng.intValue(), new Paint());
        super.draw(canvas, mapView, shadow);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) {
        return (super.onTouchEvent(event, mapView));
    }
} 
```

Edit : I even tried

```
 public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);

    Paint   mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);

    GeoPoint gP1 = new GeoPoint(19240000,-99120000);
    GeoPoint gP2 = new GeoPoint(37423157, -122085008);

    Point p1 = new Point();
    Point p2 = new Point();
    Path path = new Path();

    projection.toPixels(gP1, p1);
    projection.toPixels(gP2, p2);

    path.moveTo(p2.x, p2.y);
    path.lineTo(p1.x,p1.y);

    canvas.drawPath(path, mPaint);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:30:04.367

微不足道的错误，没有正确创建 GeoPoints

```
GeoPoint gP1 = new GeoPoint((int)(slat * 1E6),(int) (slng * 1E6));
GeoPoint gP2 = new GeoPoint((int)(dlat * 1E6),(int) (dlng * 1E6)); 
```

# objective-c - NS_OPTIONS matches

> ID：13814733
> 
> 赞同：20
> 
> 时间：2012-12-11T06:19:51.107
> 
> 标签：objective-c, ios

I am trying to implement the following typedef

```
typedef NS_OPTIONS (NSInteger, MyCellCorners) {
    MyCellCornerTopLeft,
    MyCellCornerTopRight,
    MyCellCornerBottomLeft,
    MyCellCornerBottomRight,
}; 
```

and correctly assign a value with

```
MyCellCorners cellCorners = (MyCellCornerTopLeft | MyCellCornerTopRight); 
```

when drawing my cell, how can I check which of the options match so I can correctly draw it.

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-11T06:21:59.077

Use bit masking:

```
typedef NS_OPTIONS (NSInteger, MyCellCorners) {
    MyCellCornerTopLeft = 1 << 0,
    MyCellCornerTopRight = 1 << 1,
    MyCellCornerBottomLeft = 1 << 2,
    MyCellCornerBottomRight = 1 << 3,
};

MyCellCorners cellCorners = MyCellCornerTopLeft | MyCellCornerTopRight;

if (cellCorners & MyCellCornerTopLeft) {
    // top left corner set
}

if (etc...) {

} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-04-27T00:43:43.283

检查此值的正确方法是先将这些值按位与，然后检查是否与所需值相等。

```
MyCellCorners cellCorners = MyCellCornerTopLeft | MyCellCornerTopRight;

if ((cellCorners & MyCellCornerTopLeft) == MyCellCornerTopLeft) {
    // top left corner set
} 
```

以下参考资料解释了为什么这是正确的，并提供了对枚举类型的其他见解。

参考：[检查位掩码中的值](http://sam.dods.co/blog/2014/02/01/checking-for-a-value-in-a-bit-mask/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-13T11:31:52.770

我同意 NSWill 的观点。我最近遇到了类似的错误比较问题。

正确的 if 语句应该是：

```
if ((cellCorners & MyCellCornerTopLeft) == MyCellCornerTopLeft){ 
```

# javascript - Jquery Isotope plugin: Generating random sized images

> ID：13814738
> 
> 赞同：0
> 
> 时间：2012-12-11T06:20:19.383
> 
> 标签：javascript, jquery, jquery-masonry, jquery-isotope

I am using the Jquery Isotope plugin with divs that have a back ground image and that are a particular size:

```
.frontpageimage {
    height: 200px;
    width: 200px;
    background-image: url('tile1.jpg');
} 
```

This works fine. But I want to throw something in there that randomly selects and image and makes it bigger then the others, so I created this:

```
$('#isotopecontainer .isotope-item:nth-child(2)').find('.frontpageimage').addClass('frontpageimagehigh');

.frontpageimagehigh {
    height: 420px;
    width: 200px;
} 
```

(note: currently it is hard coded to select the 2nd image - will work on the randomisation later.)

Trouble is if I insert the above code above where Isotope is called it doesnt work.

If I insert the above code after Isotope is called, it works but the images overlap - ie: the image changes size after Isotope has rendered them.

Does anyone know how to perhaps add this to the existing isotope script? Or would anyone have any suggestions for me? Please let me know if clarification is needed.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:17:01.327

好的，所以我发现添加我自己的类来代替 isotope-item 并调整我的 JQuery 以及将其移回同位素调用之上就可以了：

```
$('#isotopecontainer .item:nth-child(2)').find('.frontpageimage').addClass('frontpageimagehigh');

<div class="item isotope-item"... 
```

希望这可以帮助某人。如果您需要更多信息，请给我留言

# javascript - Prototype AJAX request being sent as OPTIONS rather than GET; results in 501 error

> ID：13814739
> 
> 赞同：8
> 
> 时间：2012-12-11T06:20:27.563
> 
> 标签：javascript, ajax, http-headers, prototypejs

I'm attempting to access a web service with Prototype/AJAX and am running into an error I can't figure out: it seems that when I make a request to a server my request is interpreted as an OPTIONS rather than a GET request (and in turn throws a 501 - not implemented error since the server only allows GET requests, based on what I understand from `Access-Control-Request-Method:`). Am I missing something in my AJAX/request formulation that may be causing this error? I've read a bit into CORS/preflighted requests [here](https://developer.mozilla.org/en-US/docs/HTTP_access_control#Preflighted_requests) but I'm unsure how it could apply when my code looks compliant...

Here's the relevant AJAX request:

```
function fetchMetar() {
var station_id = $("station_input").value;

    new Ajax.Request(REQUEST_ADDRESS, {
        method: "get",
        parameters: {stationString: station_id},
        onSuccess: displayMetar,
        onFailure: function() {
            $("errors").update("an error occurred");
        }
    });
} 
```

and here's the error and relevant request info I get from Chrome:

```
Request URL:http://weather.aero/dataserver_current/httpparam?
 dataSource=metars&requestType=retrieve&format=xml&hoursBeforeNow=3
 &mostRecent=true&stationString=&stationString=KSBA
Request Method:OPTIONS
Status Code:501 Not Implemented
Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:origin, x-prototype-version, x-requested-with, accept
Access-Control-Request-Method:GET
Connection:keep-alive
Host:weather.aero
Origin:http://domain.com
Referer:http://domain.com/.../...html 
```

What could I be overlooking here? Why does Chrome say the request is being sent as OPTIONS rather than GET? When Chrome spits out the `Access-Control-Request-Headers:` information, are these exclusively the only headers allowed in the request?

Thanks!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T17:39:57.350

花费太多时间寻找对原型的正确修复......最后，我们在[伟大的 kourge (Wilson Lee) 文章中](http://kourge.net/node/131)有一个非侵入性的解决方案！这是一段摘录：

> 大多数主要的 Ajax 框架都喜欢在您实例化的 Ajax 请求上设置自定义 HTTP 标头；最流行的标头是 X-Requested-With: XMLHttpRequest。因此，您的请求被提升为预检请求并失败。如果您的请求是跨域请求，则**修复是防止您的 JavaScript 框架设置这些自定义标头。**如果您的 URL 被认为是远程的，jQuery 已经通过不设置自定义标头巧妙地避免了无意的预检请求。如果您使用其他框架，则必须手动阻止这种情况。

它可以很简单：

```
new Ajax.Request('http://www.external-domain.net/my_api.php?getParameterKey=getParameterValue', {
            method:'post',
            contentType:"application/x-www-form-urlencoded",
            postBody:'key=' + value,
            onSuccess: function(response) {
                // process response
            },
            onCreate: function(response) { // here comes the fix
                var t = response.transport; 
                t.setRequestHeader = t.setRequestHeader.wrap(function(original, k, v) { 
                    if (/^(accept|accept-language|content-language)$/i.test(k)) 
                        return original(k, v); 
                    if (/^content-type$/i.test(k) && 
                        /^(application\/x-www-form-urlencoded|multipart\/form-data|text\/plain)(;.+)?$/i.test(v)) 
                        return original(k, v); 
                    return; 
                }); 
            } 
        }); 
```

如果您发现此解决方案有任何缺点/改进，我们欢迎您分享 :)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T19:24:20.980

实际上它是[preflight request](https://developer.mozilla.org/en-US/docs/HTTP_access_control#Preflighted_requests)，因为 Prototype 在请求中添加了自定义标头[X-Requested-With, X-Prototype-Version](http://api.prototypejs.org/ajax/)。由于这些标头浏览器发送第一个`OPTIONS`请求。[XHR 规范](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method)说：

> 对于使用 HTTP GET 方法的非同源请求，当设置了 Accept 和 Accept-Language 以外的标头时，会发出预检请求。

如何解决这个问题呢？我只能看到尽快解决这个问题的一种可能性：完全覆盖方法`Ajax.Request#setRequestHeaders()`，例如在 Prototype.js 之后插入这个脚本：

```
Ajax.Request.prototype.setRequestHeaders = function() {
  var headers = {
    // These two custom headers cause preflight request:
    //'X-Requested-With': 'XMLHttpRequest',
    //'X-Prototype-Version': Prototype.Version,
    'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'
  };

  if (this.method == 'post') {
    headers['Content-Type'] = this.options.contentType +
      (this.options.encoding ? '; charset=' + this.options.encoding : '');

    /* Force "Connection: close" for older Mozilla browsers to work
     * around a bug where XMLHttpRequest sends an incorrect
     * Content-length header. See Mozilla Bugzilla #246651.
     */
    if (this.transport.overrideMimeType &&
        (navigator.userAgent.match(/Gecko\/(\d{4})/) || [0,2005])[1] < 2005)
          headers['Connection'] = 'close';
  }

  if (typeof this.options.requestHeaders == 'object') {
    var extras = this.options.requestHeaders;

    if (Object.isFunction(extras.push))
      for (var i = 0, length = extras.length; i < length; i += 2)
        headers[extras[i]] = extras[i+1];
    else
      $H(extras).each(function(pair) { headers[pair.key] = pair.value; });
  }

  for (var name in headers)
    this.transport.setRequestHeader(name, headers[name]);
} 
```

此补丁从任何 AJAX 请求中删除自定义标头。如果您仍然需要这些标头用于非 CORS 请求，则可能会添加更多逻辑，这将有可能在选项中禁用这些标头`new Ajax.Request()`（我将在此处跳过此变体以缩短答案）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-02T10:48:18.673

实际上，使用 Prototype.js V1.7 更容易：

```
Ajax.Responders.register({
    onCreate:function(r){
        r.options.requestHeaders={
        'X-Prototype-Version':null,
        'X-Requested-With':null
        };
    }
}); 
```

如果其值为 null，Prototype.js 会丢弃任何预定义的标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:29:16.950

我从来没有使用过 Prototype，我不确定我会有多少用处。但是我快速浏览了文档，并没有看到对方法和参数的任何支持。

所以试试：

```
new Ajax.Request(REQUEST_ADDRESS+"?stationString="+station_id, {
    onSuccess: displayMetar,
    onFailure: function() {
        $("errors").update("an error occurred");
    }
}); 
```

此外，我刚刚注意到您示例中的 stationString 应该在引号中，假设它不是变量。

# android - [PhoneGap]如何保存会话？

> ID：13814740
> 
> 赞同：0
> 
> 时间：2012-12-11T06:20:39.620
> 
> 标签：android, cordova

我是使用phonegap的新手。
谁能告诉我：如何在 phonegap 中保留会话（或使用其他任何东西来保留信息）？

就像什么`Asp.net do :Session["user"]="jack"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:10:50.313

[Lawnchair](http://brian.io/lawnchair/)与 Phonegap 很好地结合在一起，为持久的客户端存储提供了一个很好的接口。虽然 Ram kiran 是对的，但您也可以使用 Phonegap 存储 API。

# javascript - 在这里使用工厂方法模式有什么好处

> ID：13814742
> 
> 赞同：-1
> 
> 时间：2012-12-11T06:20:40.997
> 
> 标签：javascript, design-patterns

我正在从这个[http://code.google.com/p/jslibs/wiki/JavascriptTips](http://code.google.com/p/jslibs/wiki/JavascriptTips)网站学习`Javascript`技巧。

我是来看的`Factory method pattern`。他们展示了以下示例

```
Complex = new function() {

        function Complex(a, b) {
                // ...
        }

        this.fromCartesian = function(real, mag) {

                return new Complex(real, imag);
        }

        this.fromPolar = function(rho, theta) {

                return new Complex(rho * Math.cos(theta), rho * Math.sin(theta));
        }
}

var c = Complex.fromPolar(1, Math.pi); // Same as fromCartesian(-1, 0); 
```

但我无法猜测为什么实际上这被称为`Factory method pattern`. 我想知道这个`Factory method pattern`和使用它的好处，尤其是知道在哪里使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:38:12.900

工厂模式可以描述为创建类实例的函数（就像真正的工厂生产汽车或玩具等）。在您的示例中，Complex 是可以通过两种方式创建实例的工厂：笛卡尔或极坐标。

工厂模式在许多场景中都很有用，包括：

*   工厂维护创建实例所需的信息（例如序列号，或者通常更复杂的东西）
*   工厂在其生命周期内维护实例（例如资源池）。

# joomla2.5 - adding a new component to Joomla 2.5.8 giving error

> ID：13814747
> 
> 赞同：1
> 
> 时间：2012-12-11T06:21:02.400
> 
> 标签：joomla2.5

I have tried to add a new component to Joomla 2.5.8 and getting the following error:

> Error loading component: com_mycomp, 1
> 
> Error loading component:com_mycomp, 1
> 
> Error loading component: com_mycomp, 1

The following steps I have done :

1.  created a folder com_mycomp under components. and created a file `mycomp.php` under com_mycomp.
2.  created a folder com_mycomp under `administrator/components/` and a file `admin.mycomp.php` under com_mycomp.

Accessed the url :

```
http://localhost/joomla/index.php?option=com_mycomp 
```

> Error loading component: com_mycomp, 1

Any idea how to resolve it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T15:58:34.577

IT 接缝只在文件系统中添加此组件。您必须将此组件添加到数据库中，表中#__extensions 类型为组件。只需在此表中获取一些组件行并将其粘贴并仅使用您的组件名称更改名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:19:19.550

这里可能会出现一些问题：

1.  在进行“手动”安装时，您应该使用 Joomla! `Extensions Manager`到`Discover`您手动安装的扩展（这适用于组件、模块、插件和模板）。

2.  您需要的最少文件（和目录）是入口点文件 ( `mycomp.php`) 和清单文件 ( `mycomp.xml`)，以提供基本菜单元素等，如[本文所述](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_01)。

# android - Automatic scrolling of contents of a text view in scroll in a circular fashion Android

> ID：13814750
> 
> 赞同：0
> 
> 时间：2012-12-11T06:21:19.977
> 
> 标签：android, android-intent, android-gui

I'm building an application that takes data and appends the data in a `textview`. I want the text to be rotating in a vertical style(just as automatic horizontal scrolling ,but I need it to be in vertical style). Can anyone help me in this? Eg ihave 5 data i would have arranged it in this fashion and the text view layout can show only 5 lines at a time the following should be in vertical style

1 data1
2 data2
3 data3
4 data4
5 data5

**when next data comes data 6 :**
1 data1
2 data2
3 data3
4 data4
5 data5
6 data6

**i should show it as :**
6 data6
1 data1
2 data2
3 data3
4 data4
5 data5

it should be rotating
5 data5
6 data6
1 data1
2 data2
3 data3
4 data4

like this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:34:12.783

我不清楚你想说什么，但如果你想让你`TextView`垂直滚动试试这个

在文本视图的 XML 中

```
android:scrollbars="vertical" 
```

在 JAVA 中

```
t.setMovementMethod(new ScrollingMovementMethod()); 
```

是`TextView`

# jakarta-ee - Is there jbossconf like folder in Tomcat?

> ID：13814752
> 
> 赞同：1
> 
> 时间：2012-12-11T06:21:57.673
> 
> 标签：jakarta-ee

I am trying to migrate a web app from Jboss to Tomcat server. The webapp is dependent on the spring container and nothing else. In the context config file, I am referring to some of the property files as follows:

```
<entry key="passwordFile" value="jbossconf:passwords.xml"/> 
```

Here the jbossconf refers to the configuration folder present in **$jboss_home/server/conf** folder.

When I am trying to move this web app to Tomcat, I need to use

```
<entry key="passwordFile" value="classpath:passwords.xml"/> 
```

Is there any way to define a variable in tomcat like "tomcatconf" and make tomcat look for the configuration files inside this folder. Something like

```
<entry key="passwordFile" value="tomcatconf:passwords.xml"/> 
```

The reason I am trying to do so is to avoid the mixing up of configuration files and the class files inside the same directory in my web app. If i put the configuration files inside classpath, then all the class files and the config files will be placed under **WEB-INF/classes** which I feel is not a good practice.

Alternate approach/suggestions for implementing this is most welcome.

Thanks, Vishwa

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:35:43.110

如果tomcat不在同一台机器上，您可以使用环境变量来定义配置目录的根目录，这样您就可以迁移应用程序而无需更改任何代码

# java - Write txt file with 2d array java

> ID：13814755
> 
> 赞同：0
> 
> 时间：2012-12-11T06:22:01.630
> 
> 标签：java, arrays, file

Well, I need to create a txt file with this output, but I'm struggling to do that, So I'm asking some suggestions on how i do that, I'm thinking of doing a 2d array of char,is this the better way? Thanks anyway.

Output:

```
 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1  
                     6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6  
                     3 0 3 8 5 9 6 0 3 2 0 4 8 5 4 3 9 6 8 4 5 0 4 3 4 3 2 4 9 8 5 4 9 6 4 5  
                     3 0 3 8 5 9 6 0 3 2 0 4 8 5 4 3 9 6 8 4 5 0 4 3 4 3 2 4 9 8 5 4 9 6 4 5  
                     0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  
----------------------------------------------------------------------------------------------  
Reference            A T G C T G C A A T G C A T G C A A C G T A C T A G A T C A T A C T T A  
IFTTM3-1-111_H04_004 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . C .  
MT-04PI-F1_E07_001   C A . . 1C. . . . C C . . . . . . . . . . G . . . . . . . . . T . . . .  
                             2T 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:32:43.340

不清楚下部是什么意思，但是对于数字矩阵，有一个单行解决方案（虽然效率低下）

```
 int[][] a = { { 1, 1, 1, 1, 1 }, { 2, 2, 2, 2, 2 } };
    System.out.println(java.util.Arrays.deepToString(a).replace("], ", "\n").replaceAll("[\\[,\\]]", "")); 
```

输出

```
1 1 1 1 1
2 2 2 2 2 
```

如果您想自己迭代 2d，那么只需转到 java.utl.Arrays.deepToString(int[]) src，复制粘贴代码并根据需要进行修复。

**顺便说一句**，我们可以将数组中的许多东西用作参考。例如，如果您不确定如何编写好的 equals() 或 hashCode()，请转到相应的 Arrays 方法，您将知道如何编写。看看作者是谁：Josh Bloch、Neal Gafter、John Rose。

# javascript - 如何在 JSON 字符串中包含 javascript？

> ID：13814763
> 
> 赞同：0
> 
> 时间：2012-12-11T06:22:32.643
> 
> 标签：javascript, jquery, json, methods

行。不确定这是个好主意。我正在构建一个模板，它将 JSON 配置传递给组装模板的 Javascript 文件。

对于链接，我需要包含一些如何在我的 JSON 配置中构建它们的逻辑。我不得不这样称呼：

```
path.href.replace( /.*view=/, "" ) + ".cfm?id="+content.vcard.adresses[1]["iln/gln"] 
```

在我的配置 JSON 中：

```
<ul data-template="true" data-config='{  
    "type":"listview",
    "link":"path.href.replace( /.*view=/, '' ) + '.cfm?id='+content.vcard.adresses[1]['iln/gln']",
    "iconpos":"right"
    }'></ul> 
```

由于引号混乱而无法工作，因此 JSON 是有效的，但是将其包裹在单引号中会使 HTML 混乱。

**问题**：
有没有办法在不破坏 HTML 的情况下通过它？由于它是一个模板，我希望尽可能保持 javascript 逻辑干净 = 不要为每个模板实例添加自定义方法。所以我想在这里保留方法调用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:26:48.667

`&#39;`您可以使用HTML 实体转义引号：

```
<ul data-template="true" data-config='{  
    "type":"listview",
    "link":"path.href.replace( /.*view=/, &#39;&#39; ) + &#39;.cfm?id=&#39;+content.vcard.adresses[1][&#39;iln/gln&#39;]",
    "iconpos":"right"
    }'></ul> 
```

这是一个演示：http: [//jsfiddle.net/fVLPd/](http://jsfiddle.net/fVLPd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:37:13.303

考虑使用`JSON.stringify`从对象构建整个 JSON 字符串。比您不必担心不正确编码的引号或尝试以其他方式对引号进行编码。

如果您生成模板服务器端 - 为您的服务器端语言使用 JSON 编码器...

# c - 获取 RHEL6 内核代码

> ID：13814767
> 
> 赞同：2
> 
> 时间：2012-12-11T06:23:18.567
> 
> 标签：c, linux, networking, linux-kernel, rhel

我想更改一些用于网络堆栈测试的内核源文件，那么有没有办法获取 RHEL6 企业版的内核源代码以及如何应用更改来获得结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T06:33:59.553

[在这里](ftp://ftp.redhat.com/pub/redhat/linux/enterprise/)从redhat ftp，你可能会得到你想要的。

示例：[kernel-2.6.32-220.17.1.el6.src.rpm](ftp://ftp.redhat.com/pub/redhat/linux/enterprise/6Server/en/os/SRPMS/kernel-2.6.32-220.17.1.el6.src.rpm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T15:16:56.170

[ftp://ftp.redhat.com/pub/redhat/linux/enterprise/6Server/en/os/SRPMS/](ftp://ftp.redhat.com/pub/redhat/linux/enterprise/6Server/en/os/SRPMS/)

使用 CTRL + F 查找您要查找的内核版本

# php - 如何在 iis 服务器上启用 mod_rewrite

> ID：13814768
> 
> 赞同：3
> 
> 时间：2012-12-11T06:23:21.350
> 
> 标签：php, iis, iis-7, url-rewriting

我发现我的服务器上没有启用 mod_rewrite 功能（_SERVER["SERVER_SOFTWARE"] -Microsoft-IIS/7.0），架构 x86 。如何启用 mod_rewrite。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T17:39:27.907

The answer that worked for me was to install the [Microsoft URL Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite) module and then create a web.config file in the root of the site with this in it (the rules):

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="Security Rule" stopProcessing="true">
          <match url="^(.*)$" ignoreCase="false" />
          <conditions logicalGrouping="MatchAny">
            <add input="{QUERY_STRING}" pattern="mosConfig_[a-zA-Z_]{1,21}(=|\%3D)" ignoreCase="false" />
            <add input="{QUERY_STRING}" pattern="base64_encode.*\(.*\)" ignoreCase="false" />
            <add input="{QUERY_STRING}" pattern="(\&lt;|%3C).*script.*(\>|%3E)" />
            <add input="{QUERY_STRING}" pattern="GLOBALS(=|\[|\%[0-9A-Z]{0,2})" ignoreCase="false" />
            <add input="{QUERY_STRING}" pattern="_REQUEST(=|\[|\%[0-9A-Z]{0,2})" ignoreCase="false" />
          </conditions>
          <action type="CustomResponse" url="index.php" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
        </rule>
        <rule name="SEO Rule">
          <match url="(.*)" ignoreCase="false" />
          <conditions logicalGrouping="MatchAll">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" pattern="" ignoreCase="false" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" pattern="" ignoreCase="false" />
            <add input="{URL}" negate="true" pattern="^/index.php" ignoreCase="false" />
            <add input="{URL}" pattern="(/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$" />
          </conditions>
          <action type="Rewrite" url="index.php" />
        </rule>
      </rules>
    </rewrite>
 </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:06:30.823

如果您在商业托管服务提供商处托管，他们很可能会安装[Microsoft URL Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)模块。这为您提供了与 Apache mod_rewrite 模块类似的功能。

要测试是否安装了此模块`web.config`，请使用以下内容在您的网站根目录中创建一个名为的文件，然后尝试查找`http://www.domain.com/google`您`domain.com`网站的域。如果您被重定向到 google.com，则您的主机安装了 URL 重写模块。

网络配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <clear />
                <rule name="Redirect to google.com" stopProcessing="true">
                    <match url="^google$" />
                    <action type="Redirect" url="http://www.google.com/" appendQueryString="false" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:27:17.293

1) 找到 httpd.conf （通常这个文件可以在名为 conf 、 config 的文件夹中找到或类似的东西）

2) 找到并取消注释 LoadModule rewrite_module modules/mod_rewrite.so 行

3) 找到 DocumentRoot “C:/path/to/my/root” 的行，在那里你会找到类似的内容

确保这两个大括号内的内容看起来像

选项全部

允许覆盖所有

4) 现在一切都完成了，重新启动 Apache 服务器，一切顺利

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T16:35:35.477

没有适用于 Windows 操作系统的免费版 mod_rewrite for LINUX。我发现的唯一方法是使用 URL REWRITE 在 IIS 上导入一个 .htaccess 文件，该 URL 在 Web 平台安装程序上免费提供。

安装 URL REWRITE 组件后，按照以下链接中的步骤导入 .htaccess 文件并创建其 Wi​​ndows 等效文件 web.config 文件。

[http://www.iis.net/learn/extensions/url-rewrite-module/importing-apache-modrewrite-rules](http://www.iis.net/learn/extensions/url-rewrite-module/importing-apache-modrewrite-rules)

干杯。

# ios - 透明的 GPUImageView？

> ID：13814772
> 
> 赞同：7
> 
> 时间：2012-12-11T06:23:31.803
> 
> 标签：ios, gpuimage

我在我的 iOS 应用程序中使用 GPUImageView。我希望 GPUImageView 具有透明背景。我试过 setBackground:[UIColor clearColor] 它不起作用。任何解决方法？

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T23:06:21.363

我发现你需要设置这两个以获得透明背景。两者都不能单独工作。

```
strengthPreviewImageView.backgroundColor = [UIColor clearColor];
[strengthPreviewImageView setBackgroundColorRed:0 green:0 blue:0 alpha:0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T14:45:59.893

...您是否尝试过 GPUImageView 标头中的方法？

```
- (void)setBackgroundColorRed:(GLfloat)redComponent green:(GLfloat)greenComponent blue:(GLfloat)blueComponent alpha:(GLfloat)alphaComponent; 
```

# load-data-infile - Google Cloud SQL：LOAD DATA INFILE 的替代方案

> ID：13814775
> 
> 赞同：4
> 
> 时间：2012-12-11T06:23:43.083
> 
> 标签：load-data-infile, google-cloud-sql

我在 Google App Engine 工作，我们有一个 Python 脚本，可以在 Google Cloud SQL 中转储数据。我们必须转储的数据集之一是巨大的。我们每天一次转储大约 15 万行数据。

我知道 Google Cloud SQL 不支持`LOAD DATA INFILE`，我通常会使用它。我的问题是，是否有替代方法`LOAD DATA INFILE`可以用来加快数据转储的过程。

正常插入数据，不带`LOAD DATA INFILE`，大约需要 5 分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-15T17:52:12.073

正如[另一个问题的评论中](https://stackoverflow.com/questions/26010199/importing-data-to-google-cloud-sql-via-csv#comment40814273_26010199)所述，`LOAD DATA LOCAL INFILE`App Engine 支持。

[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)解释了如何使用这个语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:21:38.060

您可以采取的措施来获得更好的批量导入性能：

*   创建一个 .sql 文件并[进行导入](https://developers.google.com/cloud-sql/docs/import_export#importing)
*   确保插入语句一次执行多于一行。一个好的经验法则是每个 INSERT 一个兆字节。
*   切换到[异步复制](https://developers.google.com/cloud-sql/faq#replication)
*   从 App Engine 应用程序导入。该应用程序将与您的 Cloud SQL 实例托管在一起，从而大大减少了网络延迟。

# sql - SQL字符串比较忽略空格

> ID：13814776
> 
> 赞同：2
> 
> 时间：2012-12-11T06:23:51.843
> 
> 标签：sql, ms-access

我在一个表中有一个类似于**“Supervision Charges”**的字符串，而在另一个表中的字符串类似于**“Super Vision Charges”**，两个字符串相同但一个有额外的空格，我如何使用该字符串获取第二个表的行第一张桌子，

我认为如果我们**忽略****SQL 查询**中的**空格**，那么它可以完成，但是，我不知道这种类型的查询。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T06:34:44.217

也许是这样的

```
WHERE REPLACE (column, ' ', '') LIKE 'SupervisionCharges' 
```**

# android - Android电子邮件中的预填充收件人？

> ID：13814777
> 
> 赞同：1
> 
> 时间：2012-12-11T06:24:01.703
> 
> 标签：android, email, gmail

我正在制作一个应用程序，用户将单击“联系我们”部分，它将打开内置的 Gmail 应用程序，并且我有代码可以在邮件中预填充主题和消息正文。

我希望代码预先填充我们添加收件人的“收件人：”部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T20:28:01.733

这对我不起作用，但这确实

```
Intent intent = new Intent(Intent.ACTION_VIEW);
Uri data = Uri.parse("mailto:?to="+emailaddress+"&subject=" + subject + "&body=" + body);   
intent.setData(data);
startActivity(intent); 
```

希望这对其他人有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:28:25.147

在您用于填充主题和消息的意图中，添加以下内容：

```
intent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[] { "youremail@domain.com" }); 
```

检查文档[`EXTRA_EMAIL`](http://developer.android.com/reference/android/content/Intent.html#EXTRA_EMAIL)

# c# - PHP与程序通信

> ID：13814779
> 
> 赞同：0
> 
> 时间：2012-12-11T06:24:17.023
> 
> 标签：c#, java, php, mysql, json

我目前正在计划一个我想从事的项目。这些是步骤：

1.  用户访问网站并搜索名称
2.  PHP 向 C# 或 Java 程序发送命令
3.  程序将 JSON 数据发送回网站
4.  PHP 将数据保存到 MySQL 并向用户显示数据

我正在尝试研究我需要做些什么来完成这项工作。我只需要关于要学习什么的建议。如何让 PHP 和程序通信？我应该研究servlet吗？任何有关执行更有效步骤的建议，例如让程序查询数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:31:17.987

通过数据库执行此操作。制作一个 java 线程调度程序，每次都对数据库表进行降神。现在，每当 PHP 收到请求时，它将使用新标志将该请求插入到数据库中，现在感知数据库的 Java 线程将从数据库中选择请求并处理该请求，处理后将响应放入数据库中，现在 PHP 可以选择该响应并发回给用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:40:08.940

就个人而言，对于您的情况，我更喜欢 Web 服务。您可以为 C# 或 Java 设计一个 Web-Service 方法，这些机制为您的 PHP 应用程序（或其他应用程序）提供了一个平台。PHP 应用程序只调用 Web 服务方法。WS 方法执行搜索并返回结果。然后你可以处理结果并做任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:44:54.820

也许您可以使用 PHP 中的 shell_exec 与 C# 或 Java 进行通信

请阅读[PHP 手册](http://php.net/manual/en/function.shell-exec.php)以使用 shell_exec

# nfc - NFC（近场通信）技术是开源的吗？

> ID：13814780
> 
> 赞同：-2
> 
> 时间：2012-12-11T06:24:22.817
> 
> 标签：nfc, wireless

我想知道什么具体被认为是 NFC 技术，以及是否有任何开源实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:33:39.613

没有开源技术之类的东西。开源涉及一些实现。技术本身是标准化和开放的。任何人都可以以任何他喜欢的方式实现它，开源或闭源，只要它符合规范。

# android - 按排序顺序显示联系人ContactsContract.Contacts of Content Resolver

> ID：13814786
> 
> 赞同：17
> 
> 时间：2012-12-11T06:24:46.500
> 
> 标签：android, android-contentresolver

我的目的是在 android中**按排序顺序**显示联系人。`content resolver`

为此，我正在写：

```
Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID+ " = ?", new String[] { id }, null); 
```

它需要查询方法中的最后一个参数不应该为空，以便对元素进行排序`Name`。我必须将哪部分代码替换为空参数才能实现按名称排序？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-11T06:36:04.050

要根据名称对结果进行排序，请使用`Phone.DISPLAY_NAME`常量`ASC`作为方法的最后一个参数`query`。这样做：

```
 Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                   null, 
                   ContactsContract.CommonDataKinds.Phone.CONTACT_ID+ " = ?",
                   new String[] { id },
                   ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME+" ASC"); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-06-30T11:52:31.707

您可以使用`Upper()`小写和大写联系人姓名进行排序。

```
ContentResolver cr = getContentResolver();

Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
        null, null,  "upper("+ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + ") ASC"); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-16T15:52:05.023

在 API 级别 11 及更高版本上使用[SORT_KEY_PRIMARY](https://developer.android.com/reference/android/provider/ContactsContract.ContactNameColumns.html#SORT_KEY_PRIMARY)或[SORT_KEY_ALTERNATIVE](https://developer.android.com/reference/android/provider/ContactsContract.ContactNameColumns.html#SORT_KEY_ALTERNATIVE)会更好。

```
Cursor cursor = getContentResolver().query(
    ContactsContract.Contacts.CONTENT_URI,
    null, null, null,
    ContactsContract.Contacts.SORT_KEY_PRIMARY + " ASC"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-07T18:53:45.557

**ContentResolver.query()**方法接受许多参数，但要对内容提供程序记录进行排序，您必须编辑此方法的**最后一个参数**。

[![在此处输入图像描述](../Images/afd7eb6bfdea3cc0e41da01f4f28369b.png)](https://i.stack.imgur.com/mVteE.png)

它应该是这样的：

`Cursor cursor=getContentProvider().query(.......,"DISPLAY_NAME ASC")`

这将按联系人姓名的升序排列联系人。

*注意：*此参数应为字符串数据类型。

# ruby-on-rails - 客户端表单验证不适用于关联

> ID：13814790
> 
> 赞同：2
> 
> 时间：2012-12-11T06:24:53.427
> 
> 标签：ruby-on-rails

1.  我有两个模型部门和地址，它们相互关联，但是当我使用客户端表单验证时，地址模型字段没有得到验证。未生成用于验证关联模型的 javascript。
2.  **部门型号**

    ```
    class Department < ActiveRecord::Base   
        attr_accessible :agency_head, :agency_head_rank, :department_type_id, :fax, :name,
                        :phone, :address_attributes
        validates :name , :length => { :minimum => 2 } , :presence => true
        validates :department_type_id , :agency_head,:agency_head_rank,:phone,:fax, :presence => true

        belongs_to :department_type
        belongs_to :address, :class_name => "Address", :foreign_key => "address_id"   
        accepts_nested_attributes_for :address,:allow_destroy => true
    end 
    ```

3.  **地址模型**

    ```
    class Address < ActiveRecord::Base   
        attr_accessible :state, :street1, :street2, :town, :zipcode, :county   
        validate :street1 ,:street2,:town,:state,:county,:zipcode ,:presence => true   
        has_one :department  
    end 
    ```

4.  **浏览页面**

    ```
     <h1 id="form-title">Add New Department</h1>

            <%=form_for @department ,:validate=>true do |f|%>   
    <div    id="respond">
                <% if @department.errors.any? %>
                <div id="error_explanation">
                    <h2><%= pluralize(@department.errors.count, "error") %> prohibited this post from being saved:</h2>

                    <ul>
                        <% @department.errors.full_messages.each do |msg| %>
                        <li>
                            <%= msg %>
                        </li>
                        <% end %>
                    </ul>
                </div>
                <% end %>

                <p class="comment-form-author">
                    <label for="Department Name">Department&nbsp;Name</label><span class="required">*</span>
                    <%= f.text_field :name, :size => 30, 'aria-required' => 'true'  %>
                </p>
                <p class="comment-form-author">
                    <label for="Department Type">Department&nbsp;Type</label>
                    <%= f.collection_select :department_type_id, @dept_types, :id, :name, :prompt => true %>
                </p>

                <%= f.fields_for :address, @department.address ,:validate=> true do |addr| %>
                <p class="comment-form-author">
                    <label for="Street1">Street 1</label>
                    <%= addr.text_field :street1 , :size => 30, 'aria-required' => 'true'  %>
                </p>
                <p class="comment-form-author">
                    <label for="Street 2">Street 2</label>
                    <%= addr.text_field :street2, :size => 30, 'aria-required' => 'true'  %>
                </p>
                <p class="comment-form-author">
                    <label for="Town">Town</label>
                    <%= addr.text_field :town, :size => 30, 'aria-required' => 'true'  %>
                </p>

                <p class="comment-form-author">
                    <label for="State">State</label>
                    <%= addr.text_field :state, :size => 30, 'aria-required' => 'true'  %>
                </p>
                <p class="comment-form-author">
                    <label for="State">County</label>
                    <%= addr.text_field :county, :size => 30, 'aria-required' => 'true'  %>
                </p>

                <p class="comment-form-author">
                    <label for="Zip Code">Zip Code</label>
                    <%= addr.text_field :zipcode, :size => 30, 'aria-required' => 'true'  %>
                </p>

                <% end %>

                <p class="comment-form-author">
                    <label for="agency head">Agency Head</label><span class="required">*</span>
                    <%= f.text_field :agency_head, :size => 30, 'aria-required' => 'true'  %>
                </p>
                <p class="comment-form-author">
                    <label for="agency head rank">Agency Head Rank</label><span class="required">*</span>
                    <%= f.text_field :agency_head_rank, :size => 30, 'aria-required' => 'true'  %>
                </p>

                <p class="comment-form-author">
                    <label for="phone">Phone</label><span class="required">*</span>
                    <%= f.text_field :phone, :size => 30, 'aria-required' => 'true'  %>
                </p>
                <p class="comment-form-author">
                    <label for="fax">Fax</label><span class="required">*</span>
                    <%= f.text_field :fax, :size => 30, 'aria-required' => 'true'  %>
                </p>
                            </div>
                        <div class="spacer">
                <br/>
                <center>
                    <%= f.button " Submit ", :id => 'my_login_form_button' %>
                </center>           </div>          <% end %>       </div> </div>   </div> </div> </div> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:06:50.623

您可以使用 Jquery validate 来验证您的表单。这比手动操作要容易得多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T13:27:37.010

**我发现我的错误在地址模型中使用了这个。**

验证 :street1 ,:street2,:town,:state,:county,:zipcode ,:presence => true

# continuous-integration - 内部代码的工件存储库点

> ID：13814795
> 
> 赞同：1
> 
> 时间：2012-12-11T06:24:59.713
> 
> 标签：continuous-integration, nexus, artifactory, continuous-deployment, continuous-delivery

想象一下，对于基于云的解决方案，大部分已部署代码是在内部开发的。我的问题是，将 Artifact Repository 用于内部代码有什么意义，您总是可以直接从源代码构建任何版本？

换句话说，将时间花在构建服务器上以简化从代码构建所需的工件版本而不是添加像 Nexus 这样的工件存储库以将构建工件提供给部署不是更有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:53:32.397

理论上是的，如果你能确定的话

*   检查进入工件的所有内容，例如源、数据文件
*   可以完美还原用于构建工件的确切环境（操作系统、编译器、链接器、工具）（虚拟机快照）
*   什么都没有忘记

**编辑** 实际上，正如 Mark O'Conner 指出的那样，即使这样，两个构建通常也不会相同，因为它们通常包括时间戳和校验和，具体取决于前者。您将不得不在构建期间以某种方式手动修复这些问题，或者以某种方式在构建计算机上准确地重现时间和时间。

否则，您可能会面临无法（完全）重建某个 Artifact 的情况。我更喜欢将所有内容发布到安全的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:49:35.780

《[持续交付](http://martinfowler.com/delivery.html)》一书将多次构建二进制文件的做法称为反模式：

> 这种反模式违反了两个重要原则。首先是保持部署管道的效率，以便团队尽快获得反馈。重新编译违反了这一原则，因为它需要时间，尤其是在大型系统中。第二个原则是始终建立在已知健全的基础之上。部署到生产环境中的二进制文件应该与通过验收测试过程的二进制文件完全相同——事实上，在许多管道实现中，通过在创建二进制文件时*存储二进制文件的哈希值*并验证在该过程的每个后续阶段，二进制文件都是相同的。

通过哈希的二进制相等性检查对于高度监管域中的审计目的也可能很重要。

# batch-file - 批量质数

> ID：13814797
> 
> 赞同：1
> 
> 时间：2012-12-11T06:25:12.613
> 
> 标签：batch-file

我一直在使用批处理文件进行一个小项目，但遇到了问题。据我所知，没有办法检查某个变量是否是素数，如果我错了，请告诉我如何操作，否则，谁能想到我的解决方法可以使用（例如检查一个数字是否等于 txt 文件中素数列表中的一个数字或其他）。谢谢^^（另外值得注意的是我对批处理文件不是很了解，所以请原谅我可能提出的任何白痴..）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T12:44:49.653

如果您有一个素数文本文件，每行 1 个（显然超过了一些限制），那么解决方案很简单 - 只需使用 FINDSTR。

假设您有一个包含数字的 NUMBER 变量，那么

```
>nul findstr /x %NUMBER% "primes.txt" && (
    REM prime actions go here
    echo %NUMBER% is prime
) || (
    REM not prime actions go here
    echo %NUMBER% is NOT prime
) 
```

**更新**

这是一个本机批处理脚本，可以测试批处理支持的任何有效整数（带符号的 32 位整数）以查看它是否为素数。性能比我想象的要好得多。

```
::testPrime  Number
::
::  Computes whether Number is a prime or not.
::  The result is printed to stdout.
::
::  ERRORLEVEL is also set to indicate the result:
::    0 = Prime
::    1 = Not Prime
::    2 = Error
::
::  Number = Any valid integral expression supported by SET /A
::
@echo off
if "%~1"=="test" (
  setlocal enableDelayedExpansion
  for /l %%N in (3 2 0x7fffffff) do (
    set /a "test1=num %% %%N, test2=%%N*%%N"
    if !test1! equ 0 exit 1
    if !test2! gtr !num! exit 0
  )
)

setlocal disableDelayedExpansion
2>nul set /a "num=%~1" || (
  >&2 echo invalid number: %1
  exit /b 2
)
if %num% leq 1 (
  echo %num% is NOT prime
  exit /b 1
)
if %num% leq 3 (
  echo %num% is prime
  exit /b 0
)
2>nul set /a "1/(num %% 2)" || (
  echo %num% is NOT prime
  exit /b 1
)
(
  cmd /c "%~f0" test
) && (
  echo %num% is prime
  exit /b 0
) || (
  echo %num% is NOT prime
  exit /b 1
)
exit /b 
```

测试实际上分为两部分，其中第二部分实际上是在一个新的 CMD 实例中运行。第二部分实际上出现在脚本的顶部。这样做是出于性能原因。这是我可以在不终止批处理脚本的情况下立即跳出 FOR /L 循环的唯一方法。

您可以轻松地将代码与脚本集成。例如：

```
@echo off
::----------------------------------------------------
:: This 2nd part of :testPrime must be at top of script
::
if "%~1"=="test" (
  setlocal enableDelayedExpansion
  for /l %%N in (3 2 0x7fffffff) do (
    set /a "test1=num %% %%N, test2=%%N*%%N"
    if !test1! equ 0 exit 1
    if !test2! gtr !num! exit 0
  )
)
:: End of 2nd part of :testPrime
::-----------------------------------------------------
:: Your code goes here
:: I'll just call the test with some representative values
::
setlocal disableDelayedExpansion
for %%N in (
  1 2 3 4 100001 100003 5000009 5000011 0x7fffffff-2 0x7fffffff
) do  >nul call :testPrime %%N && (
  rem prime number actions go here
  echo %%N is prime!
) || (
  rem non-prime number actions go here
  echo                           Not prime (%%N^)
)
exit /b

::----------------------------------------------------
:: Here is the 1st part of :testPrime
::
:testPrime
2>nul set /a "num=%~1" || (
  >&2 echo invalid number: %1
  exit /b 2
)
if %num% leq 1 (
  echo %num% is NOT prime
  exit /b 1
)
if %num% leq 3 (
  echo %num% is prime
  exit /b 0
)
2>nul set /a "1/(num %% 2)" || (
  echo %num% is NOT prime
  exit /b 1
)
(
  cmd /c "%~f0" test
) && (
  echo %num% is prime
  exit /b 0
) || (
  echo %num% is NOT prime
  exit /b 1
)
exit /b 
```

上面的输出如下所示：

```
 Not prime (1)
2 is prime!
3 is prime!
                          Not prime (4)
                          Not prime (100001)
100003 is prime!
                          Not prime (5000009)
5000011 is prime!
                          Not prime (0x7fffffff-2)
0x7fffffff is prime! 
```

最后，只是为了恶心，我写了一个变体，列出了下一个素数 >= 或 <= 给定的数字。

```
::nextPrime [/less]  Num
::
::  List the minimum prime number >= Num
::
::  The /L option lists the maximum prime number <= Num
::
::  The ERRORLEVEL is set to the found prime number
::
::  Num = Any valid integral expression supported by SET /A
::
@echo off
setlocal enableDelayedExpansion
if "%~1"=="test" (
  for /l %%N in (3 2 0x7fffffff) do (
    set /a "test1=%2 %% %%N, test2=%%N*%%N"
    if !test1! equ 0 exit 1
    if !test2! gtr %2 exit 0
  )
)
if "%~1"=="prev" (
  if !num! lss 2 exit 0
  set /a "test=num%%2"
  if !test! equ 0 set /a num-=1
  for /l %%N in (!num! -2 2) do cmd /c "%~f0" test %%N && exit %%N
  exit 0
)
if "%~1"=="next" (
  if !num! lss 2 exit 2
  set /a "test=!num!%%2"
  if !test! equ 0 set /a num+=1
  for /l %%N in (!num! 2 0x7fffffff) do cmd /c "%~f0" test %%N && exit %%N
  exit 0
)
set "cmd=next"
if /i "%~1" equ "/L" (
  set "cmd=prev"
  shift /1
)
2>nul set /a "num=%~1" || exit /b 0
cmd /c "%~f0" %cmd% || echo !errorlevel! 
```

这是一个使用输出的演示：

```
D:\test>nextPrime 10000000
10000019

D:\test>nextPrime /l 10000000
9999991 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T09:01:01.267

所有这些脚本对我来说似乎都非常大（而且不必要）。

一个更简单的方法是使用......我相信我正在寻找的术语是模数或模数表达式（我认为模数是复数或模数）。

```
@echo off & setlocal enabledelayedexpansion

:a
cls
set /p num=Type a number to be checked: 
cls
set num2=%num%-1

if %num% leq 2 goto yes
for /l %%i in (2,1,%num2%) do (
    set rem=%num% %% %%i
    if %rem% neq 0 goto no
)

:yes
echo %num% is a prime number.
pause
goto a

:no
echo %num% is not a prime number.
pause
goto a 
```

基本上，它获取一个用户定义的变量，并在除以一个数字时检查余数 (rem) 是否为 0。

这种方式有点慢，但代码最短。您可以通过`if`在`for`语句检查数字在除以 2 时是否有余数。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-11T22:21:04.353

另一个primer lister，这个不使用文件，如果你有耐心的话可以达到64,000,000。在环境变量中保留一个素数除数列表。如果我有一个批处理整数平方根例程，我可以让它更快。

```
@echo off
::batch prime list up to 64M by Antoni Gual
:: does not use files!!

setlocal enabledelayedexpansion
set bitmap=
set n=Y
set /a test=3,npri=3
echo 1th prime is 2 & echo 2th prime is 3 

:nextpri
set /a test+=2,index=0,div=3
if %test% LSS 8000 set bitmap=%bitmap%%n%
if %test% gtr 64000000 exit /b 

:nextest
if "!bitmap:~%index%,1!"=="N" goto nextdiv
set /a resi=!test!%%!div!
if %resi% equ 0 set n=N& goto nextpri

:nextdiv
set /a index+=1, div+=2
set /a div2=div*div 
if %div2% gtr %test% (
set n=Y
echo %npri%th prime is %test% 
set /a npri+=1 
goto nextpri)
goto nextest 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:27:42.267

以下脚本不执行素数测试。相反，它会生成一个特定范围内的素数（在这种特殊情况下是硬编码的 1000）。您可以生成一次列表，然后在您的脚本中使用它：

```
@echo off
echo 2
echo 3
echo 2 > primenos.txt
echo 3 >> primenos.txt
set current=3

:numbercalc
set tim=3
set /a max=%current%/5

:try
set /a t=%current%/%tim%
set /a u=%t%*%tim%
if %u% EQU %current% goto noprime
set /a tim+=2
if %tim% GTR %max% goto endtry
goto try

:endtry
echo %current%
echo %current% >> primenos.txt

:noprime
set /a current+=2
if %current% GTR 1000 goto end
goto numbercalc

:end
pause 
```

取自[这里](http://answers.yahoo.com/question/index?qid=20100322071750AA4WkaJ)...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-07T17:19:29.097

```
 @echo off
::PRIMES

set multiple2=1
set add=1
set counter=1
color f0
set /p range=Computer primes 0-?:
set /a limit=(range/2)+1
set ut=3
mkdir prime0-%range%
cd prime0-%range%
echo >>2
:opipe
echo >>%ut%
set /a ut=ut+2
if %ut% GEQ %range% goto next
goto opipe

:next
set /a multiple2=multiple2+2
if %multiple2% GEQ %limit% goto end
set /a add=add+2
set /a multiple=multiple2

:process
set /a multiple=multiple+add
del %multiple%
if %multiple% GEQ %range% goto next
goto process

:end
CD ..
echo 2 >>ALLprime0-%range%.txt

:offx
set /a counter=counter+2
if exist prime0-%range%\%counter% echo %counter% >>ALLprime0-%range%.txt
if %counter% GEQ %range% goto down
goto offx
:down 

echo Computation Succesful
pause
exit

::RMDIR /S /Q prime0-%range% 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-20T18:08:32.653

这是我做的。它可以找到最多 214748 的所有素数，但它准确而快速，并将结果输出到一个名为“pn.txt”的文件，并将当前数字输出到“cn.txt”（这是为了让我知道它的限制是什么）：

```
(@echo off)&((set n=3)&((set tn=%n%)&((set d=2)&((set d2=)&((set m=100)&((echo.prime-numbers>pn.txt)&((echo. >>pn.txt)&((echo.1>>pn.txt)&((echo.2>>pn.txt)&((echo.1)&((echo.2)&(goto a))))))))))))

:a
(echo.%n%cn.txt)&((set tn=%n%)&(set tn=%n:~-1%))
(if %tn%==2 ((set /a n=%n%+1)&((set d=2%d2%)&(goto a))))&((if %tn%==4 ((set /a n=%n%+1)&((set d=2%d2%)&(goto a))))&((if %tn%==6 ((set /a n=%n%+1)&((set d=2%d2%)&(gotoa))))&((if %tn%==8 ((set /a n=%n%+1)&((set d=2%d2%)&(goto a))))&((if %tn%==0 ((set /a n=%n%+1)&((set d=2%d2%)&(goto a))))&(goto b)))))

:b
((set /a tn=%d%*%d%)&(if /i %tn% equ %n% ((set /a n=%n%+1)&((set d=2%d2%)&(goto a)))))&((if /i %tn% gtr %n% ((set tn=%n%)&((set l=%d%)&((if /i %n% equ 10000 (set d2=0))&((if /i %n% equ 100000 set (d2=00))&((set d=2%d2%)&((set m=100%d2%)&(goto d)))))))&((set /a d=%d%+1)&(goto b))

:d
(title verifing %n% at %d%)&(set tn=%n%)
set /a tn=%tn%*%m%
set /a tn=%tn%/%d%
set tn=%tn:~-2%
(if /i %tn% equ 00%d2% ((set /a n=%n%+1)&((set d=2%d2%)&(goto a))))&(((set /a tn=%n%-1)&(if %d%==%tn% ((echo.%n%)&((echo.%n%>pn.txt)&(((set /a n=%n%+1)&((set d=2%d2%)&(goto a)))))))&(if %d%==%l% ((echo.%n%)&((echo.%n%>pn.txt)&((set /a n=%n%+1)&((set d=2%d2%)&(goto a)))))))&((set /a d=%d%+1)&(goto d))) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T07:26:30.230

假设您有一个带有素数的文本文件（每个数字在一行中），您可以这样做：

```
@echo off
if "%1"=="" (echo Syntax: %~nx0 number & exit /b 2)
for /F "tokens=*" %%p in (primes.txt) do (
    if %%p EQU %1 (
        echo %1 is prime!
        exit /b 0
    )
)
echo %1 is not prime!
exit /b 1 
```

示例调用：`isprime.cmd 2`会给你`2 is prime!`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-25T08:33:16.290

请原谅我打了一匹死马。这是一种完全不同的纯批处理生成素数的方法，它优于我发现的所有其他方法。

它基于在我们正在检查的窗口周围保留先前找到的素数的倍数的列表。列表中未找到的数字是素数。为了保留列表，我使用 @composite=next_increment 形式的环境变量。它使用单循环，比其他算法中使用的嵌套双循环快得多，降级速度也慢。不幸的是，需要 FOR 和辅助 subrputine 来克服在环境中重复键的可能性，因为有时多个不同的素数会发生冲突。

顺便说一句，这个想法来自 Knuth 的 TAOCP 第 3 卷第 617 页中的一个练习者。

```
:: prime table using rotating multiples stored in environment
@echo off
setlocal enabledelayedexpansion 
mode con cols=90
set @25=-10
set /a num=7,inc1=4,cnt=0,inc2=0,num1=0, maxprime=10000
set lin=    0:
call:line 2 & call:line 3 & call:line 5

:nextnum

if defined @%num% ( 
       for %%i in (!@%num%!) do (
     if %%i lss 0  (set /a num1=%num%-%%i,"inc2=-%%i<<1") else (set /a num1=%num%+%%i,"inc2=-(%%i>>1)")
     call :aux !num1! !inc2!
       )
     set @%num%=
) else (
   call :line %num%
   set /a num1= num * num 
   if %inc1% equ 4 (set/a "inc2=num<<2") else (set /a "inc2=-(num<<1)")
   if !num1! leq %maxprime%   set @!num1!=!inc2! 
)
set /a num+=inc1, inc1=6-inc1
if %num% lss %maxprime% goto nextnum
echo %lin%
pause  & goto:eof

:aux 
 if %1 leq %maxprime%  set @%1=%2 !@%1!
goto:eof   

:line        formats output in 10 right aligned columns
set num2=       %1
set lin=%lin%%num2:~-8%
set /a cnt+=1,res1=(cnt%%10)
if %res1% neq 0 goto:eof
echo %lin% 
set cnt1=    %cnt%
set lin=%cnt1:~-5%:
goto:eof 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-15T12:48:39.827

```
@echo off

:top
set /p number=number:
set /a check=1

:work
set /a check=%check%+1
set /a result=%number%/%check%
set /a abc=%result%+1

if %abc% LSS %check% goto end

SET /a modulo=%number% %% %check%
IF %modulo%==0 (goto factor
) ELSE (goto notfactor
)

:factor
echo %check%
set /a other= %number%/%check%
echo %other%
echo.
goto work
:notfactor
goto work

:end 
echo If you see 2 numbers this its a prime otherwise its composit
echo.
echo i am too lazy to code it further and have already spend way too much time trying to make this
pause
cls
goto top 
```

如果有的话，这也将告诉主要因素。

# java - 替换Java2D中的图像像素

> ID：13814802
> 
> 赞同：1
> 
> 时间：2012-12-11T06:25:34.780
> 
> 标签：java, java-2d

我正在尝试从我的源图像（PNG 格式）中替换一些像素。但我最终得到了一些令人困惑的结果。基本上我用黑色和白色替换特定的 RGB 值。这是我的代码，

```
import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import javax.imageio.ImageIO;

public class ChangePixel
{
public static void main(String args[]) throws IOException
{
    File file = new File(System.getProperty("user.dir"), "D4635.png");
    FileInputStream fis = new FileInputStream(file);
    BufferedImage image = ImageIO.read(fis);

    int[] replaceColors = new int[2];
    replaceColors[0] = Color.BLACK.getRGB();
    replaceColors[1] = Color.WHITE.getRGB();
    Color src = new Color(133, 101, 51);
    int srcRGBvalue = src.getRGB();

    changeAlg2(image, srcRGBvalue, replaceColors);
}

private static void changeAlg2(BufferedImage image, int srcRGBvalue, int[] replaceColors) throws IOException
{
    for (int width = 0; width < image.getWidth(); width++)
    {
        for (int height = 0; height < image.getHeight(); height++)
        {
            if (image.getRGB(width, height) == srcRGBvalue)
            {
                image.setRGB(width, height, ((width + height) % 2 == 0 ? replaceColors[0] : replaceColors[1]));
            }
        }
    }

    File file = new File(System.getProperty("user.dir"), "107.png");
    ImageIO.write(image, "png", file);
}
} 
```

它将我的源像素更改为黑色和其他颜色，而不是白色。请告诉我，这里出了什么问题。

由于这是我的第一篇文章，我无法附上我的图片。带来不便敬请谅解。

编辑：我已经在站点中上传了源图像和输出图像。这是网址，来源：[http](http://s20.postimage.org/d7zdt7kwt/D4635.png) ://s20.postimage.org/d7zdt7kwt/D4635.png 输出：[http](http://s20.postimage.org/kdr4vntzx/107.png) ://s20.postimage.org/kdr4vntzx/107.png 预期输出：黑色像素之后，白色像素有来。

编辑：根据**Jan Dvorak**的建议解决了代码，

```
import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import javax.imageio.ImageIO;

public class ChangePixel
{
public static void main(String args[]) throws IOException
{
    File file = new File(System.getProperty("user.dir"), "D12014.gif");
    FileInputStream fis = new FileInputStream(file);
    BufferedImage image = ImageIO.read(fis);

    Color src = new Color(223, 170, 66);
    int srcRGBvalue = src.getRGB();
    int[] replaceColors = new int[2];
    replaceColors[0] = Color.MAGENTA.getRGB();
    replaceColors[1] = Color.CYAN.getRGB();

    changeAlg2(image, srcRGBvalue, replaceColors);
}

private static void changeAlg2(BufferedImage image, int srcRGBvalue, int[] replaceColors) throws IOException
{
    BufferedImage image2 = new BufferedImage(image.getWidth(), image.getHeight(), BufferedImage.TYPE_INT_RGB);
    for (int width = 0; width < image.getWidth(); width++)
    {
        for (int height = 0; height < image.getHeight(); height++)
        {
            if (image.getRGB(width, height) == srcRGBvalue)
            {
                image2.setRGB(width, height, ((width + height) % 2 == 0 ? replaceColors[0] : replaceColors[1]));
            }
            else
            {
                image2.setRGB(width, height, image.getRGB(width, height));
            }
        }
    }

    File file = new File(System.getProperty("user.dir"), "110.gif");
    ImageIO.write(image2, "gif", file);
}
} 
```

问候拉贾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:14:49.900

由于您要添加原始图像调色板中不存在的颜色，因此您尝试设置的像素将被裁剪为调色板中最接近的颜色。您需要设置新的颜色模式。转换为 24bpp RGB（真彩色）或使用新颜色扩展调色板。

似乎无法修改现有`BufferedImage` `ColorModel`缓冲区或分配新缓冲区，但您可以创建一个新缓冲区并将数据复制到那里。`BufferedImage`用相同的方法创建一个新的也`Raster`可以（只有在位深度不变的情况下？）。

如果您不介意，您可以随时创建真彩色图像。尝试：

```
{
    BufferedImage old = image;
    image = new BufferedImage(
        old.getWidth(),
        old.getHeight(),
        BufferedImage.TYPE_INT_RGB
    );
    image.setData(old.getRaster());
} // old is no longer needed 
```

API 参考：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)

您可以尝试检测图像是否已经是真彩色 ( `image.getColorModel() instanceof ???`) 以避免在不需要时复制缓冲区。

您可以尝试扩展现有的调色板。如果这是不可能的（没有调色板开始或没有足够的空间），你必须回退到 RGB。

看：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html（getColorModel](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)和构造函数采用 ColorModel 和类型）
[http://docs.oracle.com/ javase/1.4.2/docs/api/java/awt/image/IndexColorModel.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/IndexColorModel.html)（getMapSize、getRGBs和对应的构造函数）

从看到您的实际调色板，您将需要某种重复数据删除逻辑，因为您的调色板已经是 256 字节——PNG 调色板的最大大小。请注意，您不应使用比图像中的颜色更大的调色板来保存图像（尤其是当您想稍后添加新颜色时）。您的原始文件可以使用 2 色调色板保存，节省 762 字节。

请注意，将图像存储为索引而不是具有相同颜色数量的真彩色，您不会获得太多收益。原因是字节流（调色板 = 每像素 1 个字节，真彩色 = 每像素 3 或 4 个字节）无论如何都是无损压缩的（使用 DEFLATE）。索引可以为您节省几个字节（或丢失几个字节，如果调色板很大），但它不会将文件大小减少到三分之一。

# oracle - 20亿数据的物化视图刷新

> ID：13814805
> 
> 赞同：-1
> 
> 时间：2012-12-11T06:26:22.180
> 
> 标签：oracle, olap

我有一个包含 200gb 记录（22 亿数据）和强大硬件（16 cpu 32 gb ram）Oracle 的庞大数据库。我需要在这些维度上查询这些庞大的数据。每小时有 200.000 条新记录添加到我的事实表中

时间-->年、月、日、小时
业务1--> 4级
业务2--> 3级
用户--> 100万

business1 和 business2 在同一个最低级别匹配，称为 ad_variation
1 service_record 表（20 亿数据）

service_record 包括时间戳、订阅者 ID、ad_variation_id 中的时间

为了查询这些庞大的系统，我使用了 62 个物化视图，但系统有时会出现诸如`12008: ORA-12008: error in materialized view refresh path`.

我的系统
service_record（20 亿数据）
|
my_cube ( service_record group by time , ad_variation_id,subscriber ) (5亿数据)
|
business1_hour 所有级别（my_cube group by trunc(time,hour) , business1_levels ,subscriber）（2 亿 - 6 亿数据）
|
business2_hour_all level(my_cube group by trunc(time,hour) , business2_levels ,subscriber) (200million - 600 百万数据)
|
business2_day 所有级别（business1_hour group by trunc（time,day），business1_levels，subscriber）（3000万-5000万数据）
|
business2_day_all level(business2_hour group by trunc(time,day), business2_levels,subscriber) (3000万-5000万数据)
|
time_levels

有谁可以向我提供如何改进或解决刷新问题？

甲骨文版本：10g

服务记录表：

创建表 SERVICE_RECORD 并行 16 存储（初始 1M 下一个 10M）按范围分区（服务时间）（每日分区）作为 select s.id, s.servicetime, s.advariationId, s.blindId, s.action from tap_prod.service_Record s where s .servicetime > to_date('01/01/2012','dd/MM/yyyy');

我的主要数据组：
CREATE materialized VIEW tap_cube
parallel 16 storage (initial 1M next 10M)
partition by range( service_time )
(daily partition )
按需快速构建即时刷新
AS
SELECT TRUNC (sr.servicetime,'HH') as service_time,
sr.advariationid AS ad_variation_id,
sr.blindid ASblind_id,
COUNT (sr.blindid) AS total_impr,
SUM (sr.action) AS total_action , count(sr.action) as col1 ,
count(*) as col2
FROM service_record sr
group by TRUNC (sr.servicetime,'HH'), sr.advariationid, sr.blindid;

我的business1逻辑表：

业务一级：

创建物化视图 cube_ty_1_adv_1_time_4
并行 16 存储（初始 10M 下一个 100M）
按范围分区（service_time）
（daily_partition
）
按需快速构建即时刷新
SELECT
CAST
(mycube.service_time AS TIMESTAMP) AS service_time,
ADV.broker_id as entity_id,
blind_id,
SUM (total_impr) as total_impr,count(total_impr) col3 ,
SUM (total_action) as total_action , count(total_action) as col1 , count(*) as col2
FROM tap_cube mycube, dim_advertisement adv
WHERE mycube.ad_variation_id = adv.ad_variation_id
group by CAST ( mycube.service_time AS TIMESTAMP)，ADV.broker_id，blind_id；

业务1维级别：

CREATE table
dim_advertisement
AS
SELECT bro.id AS broker_id,
adver.id AS advertiser_id,
camp.id AS campaign_id,
adv.id AS Advertisement_id,
ad.id AS ad_variation_id
FROM
tap_prod.advertisement adv,
tap_prod.ad_variation ad,
tap_prod.campaign camp,
tap_prod.advertiser adver,
tap_prod.broker bro
WHERE
bro.id = adver.brokerid
and camp.advertiserid = adver.id
AND camp.id = adv.campaignid
and ad.advertisementid = adv.id;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:28:32.490

一般建议：

1.  密切关注您的 PGA 和缓冲区缓存建议，以获得正确的平衡。
2.  我见过的 Oracle 数据仓库性能不佳的最常见原因是 I/O 吞吐量不佳。你没有提到你的读/写带宽，但你应该知道并引用它。
3.  至少有 3 种 MV 刷新机制——MV 日志、直接路径日志和分区更改跟踪。它们非常不同，使用的那些取决于您的数据加载机制。让我们了解更多有关这方面的信息。
4.  62 MV 比我以前看过的还要多。如果您的 MV 在一个事务中全部刷新，那么如果不打开 10046 式跟踪或使用 AWR 等工具，您将难以监控和诊断它。根据我的经验，MV 刷新并非一直是最有效的过程，值得关注汇总表的手动维护以提高性能。

# smarty - 包含一个带有变量的 tpl 文件 (Smarty)

> ID：13814806
> 
> 赞同：5
> 
> 时间：2012-12-11T06:26:24.427
> 
> 标签：smarty

我有一个“links.tpl”文件，其中包含许多变量的行，如下所示

```
{assign var=link_main value="index.php"}    
{assign var=link_login value="?a=login"} 
```

但是当我在 home.tpl 中包含这个文件时， 不包含`{include file="file.tpl"}` 变量 `{$link_main}, {$link_login}`

我把 `{assign var=link_main value="index.php"}` 它放在 home.tpl 中，它可以工作，但不是来自包含的文件

我尝试添加`scope=global`到变量和父项以包含但没有发生任何事情

我尝试了过去几个小时寻找解决方案，感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:02:23.597

你在做什么应该工作。在我的 Mac 上测试：

文件 test/testInclude.tpl

```
{assign var='assignedVar' value='foo' scope='global'}

assignedVar in child is {$assignedVar}

<br/> 
```

文件测试/test.tpl

```
{include file='test/testInclude.tpl'}

{if isset($assignedVar)}
    assignedVar is set in parent {$assignedVar}
{else}
    assignedVar is not set in parent
{/if}

<br/> 
```

输出

```
 assignedVar in child is foo 
   assignedVar is set in parent foo 
```

这真的应该工作 - 如果没有，那么你的 Smarty 实例会发生一些非常奇怪的事情。难道是模板被缓存而不是在变量更改时重新生成？

显然你应该弄清楚出了什么问题，但如果一切都失败了，你也可以使用替代[捕获](http://www.smarty.net/docs/en/language.function.capture.tpl)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-11T11:41:59.450

`scope='global'`仅适用于 smarty 3，不适用于 smarty 2。

# iphone - 将动态内容单元格值放入数组 iphone

> ID：13814810
> 
> 赞同：0
> 
> 时间：2012-12-11T06:26:46.513
> 
> 标签：iphone, objective-c, ios, cocoa-touch, tableview

我有一个`UITableView`动态填充从其他来源获取数据的内容。现在，我想将该动态单元格内容放入`NSArray`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T06:30:46.800

您以错误的方式看待这个问题。您从另一个来源获取数据。这些数据应该组织成你需要的任何格式。然后，您使用该数据填充表。

您不会从表视图创建数组。表格视图显示数据（通常以数组的形式组织）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:38:21.503

您从哪个数组获取数据以填充表格视图单元格，全局使用该数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:39:21.590

只需更新您用于填充表格的可变数组，然后通过以下代码重新加载表格

```
[your_Table reloadData]; //and delegates will do the rest for you. 
```

# jquery - jQuery Colorbox：无法通过 ajax 加载单个 ID（不是整个页面）

> ID：13814819
> 
> 赞同：0
> 
> 时间：2012-12-11T06:27:24.240
> 
> 标签：jquery, ajax, colorbox

我正在尝试加载一个`#submit-text-form`通过 jQuery colorbox 命名的表单。但是，colorbox 最终会加载原始链接所针对的整个页面。我按照[此处](https://stackoverflow.com/questions/9025937/colorbox-load-specific-div-from-iframe)的说明进行操作，但它仍在加载整页。关于我可能做错了什么的任何想法？

```
$(function(){
$('#submit-link').colorbox({
opacity: 0.3,
transition: 'fade',
href: $("#submit-link").attr('href') + "#submit-text-form",
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:04:53.197

试试这个：

```
$(function(){
$('#submit-link').colorbox({
opacity: 0.3,
transition: 'fade',
href: $("#submit-link").attr('href') + " #submit-text-form",
});
}) 
```

您的选择器之前需要有一个空格`" #submit-text-form`。Colorbox 使用 jQuery 的 load() 方法进行 ajax 处理，因此它的工作方式相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:06:54.933

当您直接从浏览器打开应该在颜色框中显示的页面时，您应该只看到里面的页面。如果没有，仍然必须加载整个页面并显示其中的一部分，使用 ajax 获取数据，成功时使用 DOM 选择器获取所需的部分，然后在颜色框中显示它。

像这样：

```
$.get($("#submit-link").attr('href'), 
    function(response) {
        //Load the AJAX response into a jQuery variable
        var $html = $(response);
        //Get the portion which you need to show inside the colorbox
        $html.find('#submit-text-form').colorbox({ opacity: 0.3, transition: 'fade');
        //Append it to body. (I didn't use colorbox before.)
        $('body').append($html);
}); 
```

**注意**：我没有测试它，我之前没有使用过colorbox，但这是你想要的我想的方式。

# android - 如何在android中拖动PopupWindow？

> ID：13814830
> 
> 赞同：2
> 
> 时间：2012-12-11T06:28:04.047
> 
> 标签：android, popupwindow

现在我写了一个拖动函数，当再次拖动它会从原来的位置移动。

当我按下PopupWindow的按钮并移动时，它可以实现整个PopupWindow的移动。初始化是 Gravity.BOTTOM 的位置。

第一次是因为窗口在这个位置。所以这个举动是对的。但是第二次，当点击按钮开始移动时，它突然跳到第一个位置然后移动。

这是什么问题？

```
private void createPopup()
{
    LayoutInflater flater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
    View view = flater.inflate(R.layout.pop, null);

    view.findViewById(R.id.button2).setOnTouchListener(new OnTouchListener()
    {
        public boolean onTouch(View v, MotionEvent event)
        {
            int action = event.getAction();
            switch(action)
            {
                case MotionEvent.ACTION_DOWN:
                    lastX = (int)event.getRawX();
                    lastY = (int)event.getRawY();
                    break;

                case MotionEvent.ACTION_MOVE:
                    int dx = (int)event.getRawX() - lastX;
                    int dy = (int)event.getRawY() - lastY;
                    popup.update(dx, dy, -1, -1);

                    break;

            }
            return true;
        }
    });

    popup = new PopupWindow(view, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    popup.setFocusable(false);
    popup.setTouchable(true);
    popup.setOutsideTouchable(true);
    //popup.showAsDropDown(findViewById(R.id.ding), 100, 100);
    popup.showAtLocation(findViewById(R.id.button1), Gravity.BOTTOM, 0, 0);

    //
    popup.update();
} 
```

# android - 在android中创建一个纸质的折叠视图

> ID：13814837
> 
> 赞同：3
> 
> 时间：2012-12-11T06:28:32.457
> 
> 标签：android, textview

![折角](../Images/b009c76c3dc223756f22792f4b4cd510.png)

这就是我想为我的文本视图做的。我有一个 9 补丁图像![这里](../Images/ae3f49dd0f264c9fbcb58b01ea3639a2.png)。但我不知道如何将此 png 图像转换为 textview 的折叠角背景。你们中的许多人可能遇到过这个问题并想出了一个解决方案。所以，请分享你是如何解决你的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:41:07.583

这里是你的解决方案：

```
 <TextView
    android:id="@+id/yourTextViewWidget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/your_9_patch_image"
    android:paddingLeft="10dip"
    android:paddingRight="10dip"
    android:text="Testing News" /> 
```

让我在这里解释一下：将 9 补丁图像设置为 textview 的背景并将填充放置到 textview 将为您的 textview 创建上面的图像，如背景。

# jquery - 使用zend框架将值从数据库传递到jquery

> ID：13814839
> 
> 赞同：1
> 
> 时间：2012-12-11T06:28:41.900
> 
> 标签：jquery, google-maps, zend-framework

我的页面中有这个谷歌地图的代码..我想更改经度和纬度的值..它应该来自我的数据库..我将如何完成它？

```
$(function() { 
    demo.add(function() {
        $('#gmap').gmap({'center': '47.660937,9.569803', 'zoom': 10,'disableDefaultUI':true, 'callback': function() {
            var self = this;
            self.addMarker({'position': this.get('map').getCenter() }).click(function() {});    
                    }});
    }).load();
}); 
```

这是我如何从数据库中声明我的变量的时候..

```
$propertyId = $this->_getParam('propertyId', null);

            $propDetail = $propertyDb->getProperty($sessionOutlet, $propertyId);

            $this->view->description = $propDetail[0]['Description'];
            $this->view->propertyname = $propDetail[0]['PropertyName'];
            $this->view->longitude = $propDetail[0]['Longitude'];
            $this->view->latitude = $propDetail[0]['Latitude']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:34:07.890

关于 ZEND 的 JS 变量声明，您可以在 JS 代码中插入 PHP 变量，如下所示：

```
var longitude = <?php echo $this->longitude; ?>; // for number
var description = "<?php echo $this->description; ?>"; // for string 
```

您还可以使用内联条件：

```
var myVar = "<?php echo (isset($this->myVar)) ? $this->myVar : 'Not defined' ; ?>" 
```

# xslt - 如何通过模板 xslt 从子节点获取祖父节点的属性？

> ID：13814841
> 
> 赞同：2
> 
> 时间：2012-12-11T06:28:53.750
> 
> 标签：xslt

XML:

```
<Grandparent>
  <Parent>
    <Children id ="1">
      <Info>
        <Name>
          <label name ="chname" />
        </Name>
      </Info>
    </Children>
    <Children name ="2">
      <Info>
        <Name>
          <label name="chname" />
        </Name>
      </Info>
    </Children>
    <Children id ="3">
      <Info>
        <Name>
          <label name="chname" />
        </Name>
      </Info>
    </Children>
  </Parent>
</Grandparent> 
```

XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />  

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="label">
  <label id="../../../preceding-sibling::Children/@id">
    <xsl:apply-templates select="@*|node()"/>
  </label>
</xsl:template>

</xsl:stylesheet> 
```

预期输出：

```
<Grandparent>
      <Parent>
        <Children id ="1">
          <Info>
            <Name>
              <label id="1" name ="chname" />
            </Name>
          </Info>
        </Children>
        <Children name ="2">
          <Info>
            <Name>
              <label id="2" name="chname" />
            </Name>
          </Info>
        </Children>
        <Children id ="3">
          <Info>
            <Name>
              <label id="3" name="chname" />
            </Name>
          </Info>
        </Children>
      </Parent>
    </Grandparent> 
```

我通过模板将属性 id 添加到“标签”标签。如何从 Children 节点获取属性“id”？这是我的代码

```
<label id="../../../preceding-sibling::Children/@id"> 
```

它不起作用。我在这里错过了什么吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T07:27:43.600

如果您想将 Xpath 表达式的结果作为属性，则需要使用属性值模板，因此您应该将其编写为

```
<label id="{../../../preceding-sibling::Children/@id}"> 
```

花括号表示它是要计算的表达式，而不是要按字面输出的字符串。

但是，我认为在这种情况下表达是错误的。您实际上应该这样做：

```
<label id="{../../../@id}"> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />  

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="label">
  <label id="{../../../@id}">
    <xsl:apply-templates select="@*|node()"/>
  </label>
</xsl:template>

</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<Grandparent>
   <Parent>
      <Children id="1">
         <Info>
            <Name>
               <label id="1" name="chname"/>
            </Name>
         </Info>
      </Children>
      <Children name="2">
         <Info>
            <Name>
               <label id="" name="chname"/>
            </Name>
         </Info>
      </Children>
      <Children id="3">
         <Info>
            <Name>
               <label id="3" name="chname"/>
            </Name>
         </Info>
      </Children>
   </Parent>
</Grandparent> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T07:25:23.180

您可以使用[AVT](https://www.w3.org/TR/xslt-10/#attribute-value-templates)：

```
<label id="{../../../@id}"> 
```

# php - 我可以用系统函数名称（在一个类中）定义我自己的函数吗？

> ID：13814842
> 
> 赞同：2
> 
> 时间：2012-12-11T06:28:56.063
> 
> 标签：php

PHP 对这段代码没有任何问题：

```
 interface IDateTimeProvider
    {
        public function date($format);
        public function time();
    }

    class DateTimeProvider implements IDateTimeProvider
    {
        public function date($format)
        {
            return date($format);
        }
        public function time()
        {
            return time();
        }
    } 
```

date() 和 time() 函数是在该类中定义的......所以只要我将它保存在一个类中，我就可以使用预先存在的 PHP 函数命名我的函数，如 date()、time() 或 ob_start ()?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:34:49.443

`date`是的，在类中有名称为,等的函数没有任何问题`time`，因为它们不会与那些具有相同名称的预定义函数冲突。

[甚至可以在不同的命名](http://php.net/namespaces)空间中拥有同名的类（如 C# 中的命名空间或 Java 中的包等）。

您也可以使用命名空间来定义具有该名称的函数。例如：

```
namespace myNamespace;

function time() //function defined in 'myNamespace'
{
    return \time(); // native function time();
} 
```

**注意：**在使用命名空间访问“默认”命名空间中定义的函数和类时，您需要`\`在这些函数和类前面添加（例如，、、`\stdClass`等`\time()`）`\strpos()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:34:56.963

您可以在班级内进行，因为他们的真实姓名在内存中会像`IDateTimeProvider::date`. 这称为*包装*。

如果你想让它们脱离一个类，你必须使用这样的命名空间：

```
namespace MyNamespace;
function time(){
    return \time();
 } 
```

在另一个文件中，您将使用它`\MyNamespace\time();`

对于给定的函数，它是毫无用处的，我会记得 DateTime 存在于 PHP 中，并且比时间戳和他的生态系统强大得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:35:51.203

**是**的，你可以！

您是否尝试过运行您的代码？

[这](http://codepad.org/H2QJSFsz)是您的代码的键盘示例，它工作正常

# r - 使用线型跳过某些线型

> ID：13814848
> 
> 赞同：0
> 
> 时间：2012-12-11T06:29:43.117
> 
> 标签：r, ggplot2

在[linetype scale](http://docs.ggplot2.org/current/scale_linetype.html)中，如何跳过图表的某些值？值 2 和 3 在我看来太相似了，所以我想跳过其中一个，而是使用 0、1、2 和 4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T06:48:50.450

您可以使用`scale_linetype_manual()`和设置值。

```
 df=data.frame(x=rnorm(100),y=rnorm(100),group=rep(c("a","b","c","d"),each=25))

 ggplot(df,aes(x,y,group=group))+
   geom_line(aes(linetype=group))+
   scale_linetype_manual(values=c(6,1,2,4)) 
```

# c# - 图像未正确渲染

> ID：13814849
> 
> 赞同：1
> 
> 时间：2012-12-11T06:29:44.760
> 
> 标签：c#, asp.net-mvc, image-processing, bytearray, wkhtmltoimage

我正在使用 WkhtmlToImage 将网页呈现为图像。当我从命令行运行它时，一切都很好。但是，当我从从我的网络应用程序启动的进程运行它时，它不会。

我已经验证我使用的论点是相同的。我能看到的唯一区别是，当我从命令行运行它时，我将文件保存到磁盘，而当我从 Web 应用程序执行它时，我使用 stdOut 并返回字节数组。有谁知道为什么会这样？我在用`11.0-rc2`

```
//taken from the Rotativa library - https://github.com/webgio/Rotativa/

private static byte[] Convert(string wkhtmltopdfPath, string switches, string html)
{
// switches:
//     "-q"  - silent output, only errors - no progress messages
//     " -"  - switch output to stdout
//     "- -" - switch input to stdin and output to stdout
switches = "-q " + switches + " -";

// generate PDF from given HTML string, not from URL
if (!string.IsNullOrEmpty(html))
{
    switches += " -";
    html = SpecialCharsEncode(html);
}

var proc = new Process
               {
                   StartInfo = new ProcessStartInfo
                                   {
                                       FileName = Path.Combine(wkhtmltopdfPath, "wkhtmltoimage.exe"),
                                       Arguments = switches,
                                       UseShellExecute = false,
                                       RedirectStandardOutput = true,
                                       RedirectStandardError = true,
                                       RedirectStandardInput = true,
                                       WorkingDirectory = wkhtmltopdfPath,
                                       CreateNoWindow = true
                                   }
               };
proc.Start();

// generate PDF from given HTML string, not from URL
if (!string.IsNullOrEmpty(html))
{
    using (var sIn = proc.StandardInput)
    {
        sIn.WriteLine(html);
    }
}

var ms = new MemoryStream();
using (var sOut = proc.StandardOutput.BaseStream)
{
    byte[] buffer = new byte[4096];
    int read;

    while ((read = sOut.Read(buffer, 0, buffer.Length)) > 0)
    {
        ms.Write(buffer, 0, read);
    }
}

string error = proc.StandardError.ReadToEnd();

if (ms.Length == 0)
{
    throw new Exception(error);
}

proc.WaitForExit();

return ms.ToArray();
} 
```

![在此处输入图像描述](../Images/d632b7f1ccc96b15aa7fdb1317023463.png)

**更新**我发现在 Windows 中使用 stdOut 时，这是库的一个已知问题。如果有人有任何想法，我会全力以赴。

[http://code.google.com/p/wkhtmltopdf/issues/detail?id=335&q=wkhtmltoimage%20stdout](http://code.google.com/p/wkhtmltopdf/issues/detail?id=335&q=wkhtmltoimage%20stdout) [http://code.google.com/p/wkhtmltopdf/issues/detail?id=998&q=wkhtmltoimage%20stdout](http://code.google.com/p/wkhtmltopdf/issues/detail?id=998&q=wkhtmltoimage%20stdout)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:04:59.940

您最好在`wkhtmltoimage.exe`进程中使用 I/O 文件而不是 I/O 流：

```
public static byte[] Convert(string wkhtmltopdfPath, string switches, string html)
{
    using (var tempFiles = new TempFileCollection())
    {
        var input = tempFiles.AddExtension("htm");
        var output = tempFiles.AddExtension("jpg");
        File.WriteAllText(input, html);

        switches += string.Format(" -f jpeg {0} {1}", input, output);
        var psi = new ProcessStartInfo(Path.Combine(wkhtmltopdfPath, "wkhtmltoimage.exe"))
        {
            UseShellExecute = false,
            CreateNoWindow = true,
            Arguments = switches
        };
        using (var process = Process.Start(psi))
        {
            process.WaitForExit((int)TimeSpan.FromSeconds(30).TotalMilliseconds);
        }

        return File.ReadAllBytes(output);
    }
} 
```

接着：

```
byte[] result = Convert(
    @"c:\Program Files (x86)\wkhtmltopdf", 
    "",
    File.ReadAllText("test.htm")
) 
```

# joomla2.5 - 它可以显示来自另一个站点的不同类别吗？

> ID：13814851
> 
> 赞同：0
> 
> 时间：2012-12-11T06:30:05.220
> 
> 标签：joomla2.5

我在一家报纸工作，我想知道是否可以显示来自另一个网站的不同类别，并显示在我的网站上。这个网站由 Joomla 2.5 创建，我希望有人理解这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:57:24.587

由于您的站点是 Joomla 站点，您可以编写自定义扩展，或者更简单地使用[Jumi 扩展](http://2glux.com/projects/jumi)，这样您就可以直接在需要从其他站点获取内容的文章或页面中编写 PHP 代码。

然后根据您对其他站点的了解，有不同的方法。如果它提供 API 或 RSS 提要，您可以使用它来提取您需要的内容（例如，使用 PHP 字符串函数根据需要对其进行修改）。如果其他站点没有通过 Web 服务提供内容的明显方式，请尝试[PHP curl](http://php.net/manual/en/book.curl.php)，您可以再次在显示内容之前对其进行修改。也请查看此页面：[如何使用 CURL 解析页面中的实际 HTML？](https://stackoverflow.com/questions/3409264/how-to-parse-actual-html-from-page-using-curl)

正如 Arunu 所说，如果您不需要修改其他站点的内容，iFrame 也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:50:29.363

您希望做的事情可以使用 RSS 提要或 i-frame 来完成。但从您的问题来看，不清楚哪个网站正在使用 joomla。

# c# - 在触发按钮单击事件时存储 Html Table 的数据

> ID：13814852
> 
> 赞同：-1
> 
> 时间：2012-12-11T06:30:29.997
> 
> 标签：c#, asp.net, .net

我陷入了一种情况，网站在**ASP.NET 1.1中运行**

我正在加载一个包含一些数据的页面。在页面中有一个 Html 表。 **在每一行中，我在一个中加载状态（活动/非活动），在另一个中加载消息。**

单击时有一个保存按钮，它应该将状态和消息保存到数据库。

由于数据在**Html 表中，因此单击按钮时我会丢失数据。**

我尝试了一种将页面加载时的状态和消息保存在全局 Javascript 变量中的选项。但是当单击按钮时，我也会松开它。

存储数据的 JS 代码：

```
// To store all active or inactive feature values.
var arrType = [];
var interiorValues = [arrType];
var exteriorValues = [];
var mechanicalValues = [];
var standardValues = [];

function StoreChromeVallue()
{
    var $jDecode = jQuery.noConflict();
    var table = document.getElementById('dlInterior');

    for (var i = 1, row; row = table.rows[i]; i++)
    {
        for (var j = 0, col; col = row.cells[j]; j++) 
        {
            var imagePath = $jDecode(row.cells[0]).find('img:first').attr('src');

            if(imagePath == "../icon_active1.gif")
            {
                arrType.push("active");
            }
            else if(imagePath == "../icon_deleted1.gif")
            {
                arrType.push("deleted");
            }
            else
            {
                arrType.push("active");
            }

            var featureValue = $jDecode(row.cells[1]).text();
            arrType.push(featureValue);

            arrType.push("Interior");

            interiorValues.push(arrType);
        }
    }
    alert(interiorValues[5][0]);
} 
```

存储数据的 HTML 表

```
<TABLE id="dlInteriors" Width="300" Runat="server" CellSpacing="0" CellPadding="0">
    <TR>
        <TD id="interiortd" vAlign="top" width="350" runat="server"></TD>
    </TR>
</TABLE> 
```

**行是在页面加载时动态添加的。**

请指导我如何继续进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:44:25.597

回发时，您无法轻松获取 HTML 页面中的所有值/字符串。您可以使用 Request.params[""] 在回发中获取输入、选择等表单字段。

但是您可以**尝试使用隐藏变量**（这是您的 HTML 表字符串值的替代视图状态）

**您存储的时间和内容/如何存储/如何在回发中访问。**

您可以针对上述问题尝试以下步骤。

1.  在提交表单之前，触发一个 javascript 函数“saveTableValues()”，它循环您的 HTML 表格并为每一行创建对象 (var)。
2.  准备一个 javascript 对象数组（只需将项目推入每个循环）
3.  将其转换为**[JSON](http://www.json.org/)**字符串并将整个 JSON 字符串分配给隐藏字段
4.  回发 // 只在 JS 中返回 true
5.  在后面的代码中尝试使用 Request.Params[""] 或像 hdnField.Text 这样的普通方式访问，如果它是服务器端控制
6.  在代码行为中，使用**[JavaScript 序列化](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)**器 或**[JSON.Net](http://james.newtonking.com/pages/json-net.aspx)**将 JSON 字符串转换为某个集合。在这里推荐 JSON.Net

这可能对你有帮助。！

**编辑：**

***由于您的网站在 1.1 中运行，因此不确定这些序列化程序 dll 是否会对您有所帮助。因此，您尝试使用 XML 格式而不是 JSON。不确定 1.1 框架是否存在 JSON 序列化程序 dll***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:33:00.407

使用 Jquery 获取行值。然后将数据存储到隐藏字段中。这边走：

```
<script type="text/javascript">

     function getTableValues() {

         var tds = $('#dlInteriors tr td')

         jQuery.each(tds, function () {
             var url = $(this).children('img:first').attr('src');
             var text = $(this).text();
             if (url)
                 $('#hidValuesStatus').val($('#hidValuesStatus').val() + ',' + url);
             if (text)
                 $('#hidValuesMessages').val($('#hidValuesMessages').val() + ',' + text);
         });

     }

 </script> 
```

在您的 asp:button 的事件“OnClientClick”上调用 javascript 函数

```
<TABLE id="dlInteriors" Width="300" Runat="server" CellSpacing="0" CellPadding="0">
    <TR>
        <TD id="interiortd" vAlign="top" width="350" runat="server"><img src="icon_active1.gif" /></TD>
        <TD id="TD2" vAlign="top" width="350" runat="server">message1</TD>
    </TR>
    <TR>
         <TD id="TD1" vAlign="top" width="350" runat="server"><img src="icon_deleted1.gif" /></TD>
        <TD id="TD3" vAlign="top" width="350" runat="server">message2</TD>
    </TR>
</TABLE>
<asp:Button runat="server" ID="btnSubmit" OnClientClick="javascript:getTableValues()" Text="SUBMIT" />
<input type="hidden" id="hidValuesMessages" runat="server" />
<input type="hidden" id="hidValuesStatus" runat="server"/> 
```

并在后面的代码中从隐藏字段中获取数据：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    If IsPostBack Then
        If Not IsNothing(Request.Form("hidValuesMessages")) Then

            Dim str As String = Request("hidValuesMessages")

        End If

        If Not IsNothing(Request.Form("hidValuesStatus")) Then

            Dim str2 As String = Request("hidValuesStatus")
        End If
    End If

End Sub 
```

拆分字符串并获取最终值。

希望这可以帮助！

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:46:59.027

创建表以在这样的服务器上运行

`<table id="users" runat="server">`

并且您将能够使用 HtmlTable 类访问它，如果需要，从表行动态创建一个 DataTable 并将其保存在会话中。看看[http://msdn.microsoft.com/en-us/li](http://msdn.microsoft.com/en-us/li)

# selenium - 用户模拟 - 浏览器自动化

> ID：13814859
> 
> 赞同：-1
> 
> 时间：2012-12-11T06:31:17.533
> 
> 标签：selenium, language-agnostic, browser-automation

我有一个网站，用户应该每天执行以下任务：

*   使用用户名/密码登录
*   从过滤器中选择日期
*   单击一个链接，他们可以下载一个 csv 文件，然后将其导入数据库。

当然我不能改变网站，但我想自动化这个。

我正在测试 Selenium，但我应该建立一个完整的环境来创建一个可扩展的导入过程，我可以在其中一起启动多个过程。

我的想法是设置一个服务器，它将：

*   模拟浏览器
*   登录本网站
*   执行操作，包括选择、单击和等待指令
*   将 csv 流保存到文件中
*   导入到 sql sb

什么是一个好的框架或服务开始？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:10:46.407

[这](http://code.google.com/p/selenium/wiki/GettingStarted)应该是一个阅读的好地方。

# java - JTable 上的 JPopupMenu -> 获取创建菜单的单元格

> ID：13814861
> 
> 赞同：4
> 
> 时间：2012-12-11T06:31:37.300
> 
> 标签：java, swing, jtable, jpopupmenu

我有一种情况，我在右键单击 JTable 时创建了一个弹出菜单。创建弹出菜单的标准方法：

```
aJTable.setComponentPopupMenu(rightClickMenu); 
```

现在，在注册的操作中，我无法找出右键单击哪个单元格以显示该弹出菜单。

```
rightClickMenuItem.addActionListener(new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent e) {
        // Work out what cell was right clicked to generate the menu
    }

}); 
```

关于你如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T09:53:04.090

令人惊讶的事实：在安装了 componentPopupMenu 后，mouseListener 永远不会看到作为 popupTrigger 的 mouseEvent（原因是显示 componentPopup 是由 BasicLookAndFeel 安装的 AWTEventListener 全局处理的，并且该侦听器会使用该事件）。

唯一可以看到该触发器的 mousePosition 的地方是 getPopupLocation(MouseEvent)，因此获取它的唯一可靠方法（用于执行与位置相关的配置/操作）是 @Mad 建议覆盖该方法并将值存储在某处以后使用。

下面的代码片段使用 clientProperty 作为存储位置：

```
final JTable table = new JTable(new AncientSwingTeam()) {

    @Override
    public Point getPopupLocation(MouseEvent event) {
        setPopupTriggerLocation(event);
        return super.getPopupLocation(event);
    }

    protected void setPopupTriggerLocation(MouseEvent event) {
        putClientProperty("popupTriggerLocation", 
                event != null ? event.getPoint() : null);
    }
};
JPopupMenu popup = new JPopupMenu();
Action action = new AbstractAction("show trigger location") {

    @Override
    public void actionPerformed(ActionEvent e) {
        JPopupMenu parent = (JPopupMenu) SwingUtilities.getAncestorOfClass(
                JPopupMenu.class, (Component) e.getSource());
        JTable invoker = (JTable) parent.getInvoker();
        Point p = (Point) invoker.getClientProperty("popupTriggerLocation");
        String output = p != null ? "row/col: " 
             + invoker.rowAtPoint(p) + "/" + invoker.columnAtPoint(p) : null; 
        System.out.println(output);
    }
};
popup.add(action);
popup.add("dummy2");
table.setComponentPopupMenu(popup); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T03:38:36.650

@MadProgrammer 对 getPopupLocation 的建议看起来很有希望，但我不知道如何在表格和 actionEvent 之间获取信息......

我通过确保在您右键单击该行时选择该行来解决这个问题 - >因为弹出菜单阻止选择该行，您可以添加一个鼠标侦听器，以确保无论单击什么都选择该行（左或右）被按下。

```
aTable.addMouseListener(new MouseAdapter() {
    @Override
    public void mousePressed(MouseEvent e) {
        int r = aTable.rowAtPoint(e.getPoint());
        if (r >= 0 && r < clt.getRowCount()) {
            aTable.setRowSelectionInterval(r, r);
        } else {
            aTable.clearSelection();
        }
    }
}); 
```

这意味着在rightClickMenuItem的动作监听器中，可以抓取表格选中的单元格/行

```
rightClickMenuItem.addActionListener(new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent e) {
        aTable.get details about the selected one....
    }
}); 
```

太容易了！感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:08:12.173

JTable 有方法

```
int row = rowAtPoint(p);
int col = columnAtPoint(p); 
```

所以传递 MouseEvent 的点并使用这些值

添加一个`MouseListener`并将最后一个右键单击点存储在某处。

# java - java.sql.SQLException: ORA-06550: 从 java 代码调用过程后

> ID：13814864
> 
> 赞同：3
> 
> 时间：2012-12-11T06:32:08.203
> 
> 标签：java, sql, oracle

嗨，我在调用存储过程时遇到问题。当我试图从我的以下 java 代码中调用我的程序时

```
connection = ConnectionManager.getInstance().getConnection(dataBaseURL, serverName, portNumber, sid, username, password);

callable = connection.prepareCall("{call SCHEMA_RESTORE.restore()}");

callable.executeUpdate();
.................................. 
```

我收到了这个异常

```
Exception in thread "main" java.sql.SQLException: ORA-06550: line 1, column 7:

PLS-00201: identifier 'SCHEMA_RESTORE.RESTORE' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored

at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)
at oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)
at oracle.jdbc.ttc7.Oall7.receive(Oall7.java:573)
at oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1891)
at oracle.jdbc.ttc7.TTC7Protocol.parseExecuteFetch(TTC7Protocol.java:1093)
at oracle.jdbc.driver.OracleStatement.executeNonQuery(OracleStatement.java:2047)
at oracle.jdbc.driver.OracleStatement.doExecuteOther(OracleStatement.java:1940)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2709)
at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:589)
at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:656) 
```

我的程序是

```
CREATE OR REPLACE PACKAGE BODY SCHEMA_RESTORE IS 
  PROCEDURE backup (pbRecreateBackupTable IN BOOLEAN DEFAULT FALSE)
    IS
      TableAlreadyExists EXCEPTION;
      PRAGMA EXCEPTION_INIT (TableAlreadyExists, -955);
      nCount NUMBER;
      CURSOR cTables IS SELECT tbls.table_name tbl, SUBSTR(tbls.table_name,4) name FROM user_tables tbls, FT_T_TBDF tbdf
        WHERE tbls.table_name NOT LIKE gsPrefix || '%' AND tbls.table_name NOT LIKE 'FT_CFG%' AND tbls.table_name NOT IN ('FT_WF_APEV','FT_WF_WFTJ','FT_WF_WFTN','FT_WF_WFNP','FT_WF_WFNV','FT_WF_WFIO','FT_WF_WFGV','FT_WF_WFND','FT_WF_WFDF','EXCEPTIONS','TESTDSFP') and tbls.table_name NOT LIKE 'FT_LOG%'
          AND tbdf.tbl_id(+) = SUBSTR(tbls.table_name,-4) AND tbdf.tbl_desc NOT LIKE '%Note: This table is obsolete%';
BEGIN

        RAISE;
    END;
  END LOOP; 
EXCEPTION
  WHEN OTHERS THEN
    RAISE;
END backup; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T07:27:35.127

错误消息说找不到 SCHEMA_RESTORE.RESTORE。有几个可能的原因：

*   包（和过程）位于不同的模式中，例如，您将其编译为用户 A，但试图将它们称为用户 B。
*   您没有从包中执行过程的访问权限。因此它变得不可见。
*   您已经在包体中定义了该过程，但尚未在包头中声明它。

我可以看到的另一个问题是括号。如果调用不带参数的过程，则应省略前括号：

```
{ call SCHEMA_RESTORE.restore } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-07T01:32:51.543

当您在一个用户中创建一个程序并在另一个用户中连接数据库时，它就会出现。要解决这个问题，试试这个

```
GRANT EXECUTE ON procedureName TO username 
```

否则使用您使用的正确用户名连接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T06:43:28.680

程序编译成功了吗？还要检查您是否可以通过架构下的某个编辑器（PL/SQL dev？）看到它

或者您可以使用它来查看它是否存在 -

```
SELECT * FROM DBA_OBJECTS WHERE object_name = '%your proc name%'; 
```

# webbrowser-control - Java 脚本未在 WP8 HTML 应用程序的网络浏览器上运行

> ID：13814865
> 
> 赞同：0
> 
> 时间：2012-12-11T06:32:08.110
> 
> 标签：webbrowser-control, windows-phone

我正在开发`WP HTML5`应用程序。我已经为它创建了一组 HTML、js 和 css。

在我导航到作为项目资产添加的 HTML 页面之前，IsScriptEnabled 标志设置为 true。

js 没有从 index.html 页面执行，我正在导航到。设置为 true 时，相同的 js 执行会在 iOS 和 Android 上正确执行。

可能的原因是什么。

在导航到页面之前必须做的任何事情（除了启用脚本）？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:43:13.650

该`IsScriptEnabled`标志不会启用/禁用 JS，但它允许 JS 调用应用程序，反之亦然。

因此，我假设您正在导航到的页面的 OnLoad 中有一些 JS。如果你用一个简单的代码替换你的代码`document.writeLine("test")`，那行得通吗？如果它确实有效，我会假设 IE 的 JS 引擎（再次）不兼容。

你也可以听[window.onError](http://dev.opera.com/articles/view/better-error-handling-with-window-onerror/)

# java - 试图将从 web 服务返回的数组项传递给 android 中的微调器。但它返回 null

> ID：13814867
> 
> 赞同：1
> 
> 时间：2012-12-11T06:32:32.633
> 
> 标签：java, android, asp.net, web-services, android-ksoap2

嗨，我试图将从 aspx webservice 返回的项目数组传递给 android 中的微调器。但它返回null。我想知道我做错了什么。我之前确实尝试过返回一组字符串，并且它适用于相同的连接，任何帮助将不胜感激。

我的安卓代码如下：

```
package com.example.fp1_webservicedropdown;

import android.R.string;
import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

import org.ksoap2.*;

import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.*;

public class MainActivity extends Activity {
    TextView result;
    Spinner spinnerC;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        spinnerC=(Spinner) findViewById(R.id.spinner1);
        result = (TextView) findViewById(R.id.textView2);

        final String NAMESPACE = "http://sample.com/";
        final String METHOD_NAME = "GetCustomerList";
        final String SOAP_ACTION = "http://sample.com/GetCustomerList";
        final String URL = "http://mylocalip/HelloWorldNew/Service1.asmx";

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
        //Request.addProperty("a", "32");
        //Request.addProperty("b", "12");
        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);
        AndroidHttpTransport aht = new AndroidHttpTransport(URL);

        try {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive) soapEnvelope
                    .getResponse();

            result.setText("The web service returned "
                    + resultString.toString());

            //---------- result To Spinner Code -----------------------//

            String[] toSpinner = new String[]{resultString.toString()};
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item,  toSpinner );
                adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                spinnerC.setAdapter(adapter);

              //---------- result To Spinner Code ends here -----------------------//       
        } catch (Exception e) {

            e.printStackTrace();

        }
    }
} 
```

我的网络服务代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Collections;

namespace HelloWorldNew
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
     [WebService(Namespace = "http://sample.com/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

        [WebMethod]
        public ArrayList GetCustomerList()
        {
            ArrayList list = new ArrayList();
            list.Add("Shean");
            list.Add("Yo");
            return list;
        }

    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:53:57.093

SoapPrimitive 类定义：

> 用于封装原始类型（在 XML 序列化中由字符串表示）的类。基本上，SoapPrimitive 类封装了“未知”的原始类型（类似于封装未知复杂类型的 SoapObject）。例如，新的 SoapPrimitive (classMap.xsd, "float", "12.3") ...

您正在返回一个 ArrayList 并且它不是 Primitive 类型。

尝试使用 SoapObject，而不是 SoapPrimitive。

```
SoapObject response = (SoapObject) soapEnvelope.getResponse(); 
```

然后用于`response.getProperyCount()`获取项目数。

```
 int intPropertyCount = response.getPropertyCount(); 
```

然后在再次将每个属性转换为 SoapObject 后，使用 toString() 方法。如下：

```
for (int i = 0; i < intPropertyCount; i++) {
    SoapObject responseChild = (SoapObject) response.getProperty(i);
    result.setText(responseChild.toString());
    // You can add all strings in a list and give ArrayAdapter<String> for Spinner
} 
```

我希望这能解决你的问题。

# network-programming - Go - net.LookupAddr 不执行

> ID：13814868
> 
> 赞同：1
> 
> 时间：2012-12-11T06:32:36.230
> 
> 标签：network-programming, go

在我添加接受输入地址的功能之前，一切正常。

在将 IP 地址分成 3 段并将其交给`getHostName`函数后，程序在调用函数后跳过“函数的全部/包含” `net.LookupAddr(ip)`。

```
package main

import (
    "fmt"
    "net"
    "strconv"
    "strings"
)

func getHostName(h chan string, ipAdresse string, n int) {
    ip := ipAdresse + strconv.Itoa(n)

    addr, ok := net.LookupAddr(ip)
    fmt.Println(ok)

    if ok == nil {
        h <- ip + " - " + addr[0]
    } else {
        fmt.Println(ok)
    }
}

func printer(n chan string) {
    msg := <-n
    fmt.Println(msg)
}

func main() {
    fmt.Println("Please enter your local IP-Adresse e.g 192.168.1.1")

    var ipAdresse_user string
    fmt.Scanln(&ipAdresse_user)

    ipsegment := strings.SplitAfter(ipAdresse_user, ".")
    ipadresse_3 := ipsegment[0] + ipsegment[1] + ipsegment[2]

    host := make(chan string)

    for i := 0; i < 55; i++ {

        go getHostName(host, ipadresse_3, i)
        go printer(host)
    }

    fmt.Println("Finish - Network Scan")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:06:44.373

我的错误是我必须使用例如 Scanln 来阻止主要功能。没有它，程序会在 goroutine 执行之前终止。

# cakephp - window.reload 在获取响应之前重新加载

> ID：13814872
> 
> 赞同：1
> 
> 时间：2012-12-11T06:33:19.987
> 
> 标签：cakephp, jquery-mobile, backbone.js

我正在使用带有backbonejs的jqueryMobile。任务：带有电子邮件和密码字段的登录表单。填写表格并使用 3 个链接重定向到相同的表格：

*   更新个人信息
*   更改密码
*   登出

问题：单击注销时，我希望将其重定向回登录表单（同一页面）并显示消息-“已成功注销”。

我做了什么：在 view.js 中：

```
$('#logoutClick').click(function() {
        console.log("hi");
        this.collection = new Fan();
        this.collection.logoutFan();
        window.location.reload(true);
    }); 
```

在 myController(of cakephp) 中：

```
public function mobile_logout() {
    $status = true;
    $event = array();
    $data = array();

    $this->Auth->logout();
    $this->Session->setFlash('Successfully Logged out', 'flash_failure');
    $this->Session->delete('Auth.Fan');

    $this->set('status',$status);
    $this->set('output',$data);
    $this->render('/Layouts/json/mobile',false);
} 
```

现在，当我单击注销时，页面被重定向但消息未呈现。（我猜页面在获取响应之前重新加载）。当我检查 chrome 中的元素时，我可以看到 logout.json 没有可用的预览（来自控制器的 json 响应不存在）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:37:24.773

不要重新加载。使用重定向：window.location = 'yourloginpage?msg=success';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:21:06.787

由于 jQuery mobile 模拟一个大网页，因此您无法引用其他页面。使用：

```
window.location.reload(true); 
```

打开一个新视图，jQM 再次开始工作（它下载所有头文件等）。它的工作方式类似于带有 rel="external" 的链接

如果您想让 jQM 在这种情况下继续工作，您必须将所有标题添加到您的 html 文件中，并且您应该知道您不能引用上一页，因为它已从 DOM 中删除。

我做了一些不同的方式。它并不完美:) 尝试使用 . 重定向到另一个页面`$.mobile.changePage("./newpage.html)`。在这个新页面中添加事件`pageinit`并重定向回起始页面。

# html - 是否可以在不破坏页面、保留格式和支持超链接的情况下将我自己的 HTML 转换为 PDF？

> ID：13814875
> 
> 赞同：6
> 
> 时间：2012-12-11T06:33:24.693
> 
> 标签：html, css, formatting, pdf-generation, page-break

我已经在 Stackoverflow 上搜索了很多问题，但我真的没有考虑问题和答案是否符合我的需求。DocRaptor 真的不是一个好的应用程序，因为它会破坏页面并且它无法识别扩展的拉丁字母，如`à, é, ã,`等。

我使用了许多基于 Web 的 HTML 到 PDF 转换器的应用程序，它对我不起作用，因为它们没有保留格式和超链接。

我使用了 Mac 的捕获应用程序，如 W3Capture 和 Layouts。
**1)**布局将整个 HTML 和 CSS 页面捕获为 PDF ***，而不会破坏页面***并保留格式。但是，它不支持超链接，因为它将页面捕获为 PDF，行为类似于 PNG。

**2)** W3captures 支持超链接，转换 HTML/CSS 页面，但它破坏了页面并且实际上不保留格式。

我还测试了 TextEdit，它可以导出为 PDF，但是当它导出为 PDF 时，它会破坏页面。iWork 和 Word 中的页面也可以做到这一点。

我真的很沮丧。

***是否可以在不破坏页面、保留格式和支持超链接的情况***下将自己的 HTML 页面转换为 PDF ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:59:29.293

我认为您可以在 Chrome 中打开 html 文件。然后打印成pdf格式。然后它将起作用。

也就是说，当您打印它时，您选择“另存为 pdf”而不是您的打印机。

# ruby-on-rails - Rails - 不想在 sql o/p 中使用时区

> ID：13814876
> 
> 赞同：0
> 
> 时间：2012-12-11T06:33:29.180
> 
> 标签：ruby-on-rails, ruby

我在 PGSQL 上有一个 Rails 应用程序，并且有一个出生日期列（没有时区的时间戳）。

我使用“选择”来获取员工数据并将其作为 JSON 返回，但 DOB 总是返回时区，例如“dob”：“1992-06-18T20:00:00-04:00”。

我尝试使用 to_char(emp.dob, 'YYYY-MM-DD HH24:MI:SS')，但没有效果。

有人知道如何让 o/p 不包含 TZ 信息吗？

像：1992-06-18 20:00:00

谢谢

编辑：在这里找到类似问题的解决方案： [rails dates with json](https://stackoverflow.com/questions/2937740/rails-dates-with-json)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:43:29.140

使用本地化方法并键入以下内容：

`<%= l emp.dob, :format => :long %>`

有几个预定义的选项来显示文本（:long、:short 等）你可以[在这里](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)阅读更多。

# android - 在android多屏支持中设置方向和纵横比

> ID：13814880
> 
> 赞同：0
> 
> 时间：2012-12-11T06:34:11.130
> 
> 标签：android

我发现有 4 个方面可以改变 android 应用程序以支持多屏幕。

1.屏幕尺寸 2.屏幕密度 3.方向（纵向/横向） 4.纵横比（长/不长）

我对屏幕尺寸、密度和方向有清晰的认识。但我不知道如何识别纵横比。是否有必要为方向和纵横比显式创建文件夹？请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:45:05.893

参考这个问题

[多种屏幕分辨率/纵横比（游戏）](https://stackoverflow.com/questions/7061258/multiple-screen-resolutions-aspect-ratios-games)

并且还从 doc 中读到了这个东西

> 从用户的角度来看屏幕的方向。这是 **横向或纵向**，**这意味着屏幕的纵横比**分别是宽或高。
> 
> 请注意，不仅不同的设备在默认情况下以不同的方向运行，而且当用户旋转设备时，方向可能会在运行时发生变化。

**横向屏幕资源（宽高比）。**

**纵向屏幕资源（高纵横比）。**

# ruby - 为什么“puts”返回一个空行，而不是“puts []”？

> ID：13814882
> 
> 赞同：2
> 
> 时间：2012-12-11T06:34:22.620
> 
> 标签：ruby, arrays, io, puts

我正在阅读[Ruby 教程](http://pine.fm/LearnToProgram/?Chapter=07)，并了解到代码

```
puts 'start'
puts
puts 'end' 
```

将输出三行，但下面的代码

```
puts 'start'
puts []
puts 'end' 
```

只会输出两个。所述的原因是 []~~不是一个对象~~（编辑：“不指向任何东西”），所以`puts`不能用它做任何事情，但为什么在第一种情况下也不是这样？

我试图找到一个官方页面`puts`来解决这个问题，[这个](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts)没有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T06:36:05.623

> 陈述的原因是 [] 不是对象

哪里说的？

`puts`对数组有特殊处理。当您将数组传递给它时，它会在新行上打印每个元素。您将一个包含零元素的数组传递给它，它会打印零行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T06:35:30.420

`puts`使用数组将每个元素打印一行。没有元素，没有线条。

编辑：我刚才所说的记录在您的链接中：

> 如果使用数组参数调用，则将每个元素写入新行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T06:37:27.233

```
puts arr 
```

就好像

```
arr.each { |e| puts e } 
```

你可以自己做这样的事情：

```
def p(s)
  if s.respond_to? 'each'
    s.each { |e| p e }
  else
    puts s
  end
end

p 'hello' # prints line with 'hello'
p [] # prints nothing
p [1, 2] # prints 2 lines with 1 and 2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T06:38:27.337

您共享的链接指出：

> 如果使用数组参数调用，则将每个元素写入新行。

```
puts [] 
```

意味着，您正在`puts`使用空数组调用。即没有要打印的元素。这就是发生的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T07:32:13.683

不带参数的 Put 具有特殊行为 - 即打印新行。在所有其他情况下，它将所有参数视为一个数组，并使用 #to_s 将这些参数映射到字符串，并在新行上输出每个字符串。这就是为什么调用时没有输出的原因`puts []`。如果你想在输出中有一个新行，你可以不`puts`带参数调用（它是 obvjous），或者使用带有空数组的 splat 运算符，如下所示`puts *[]`：

您可以编写自己的实现`puts`以更好地理解事物。

```
 def my_puts(*args)
    STDOUT.write("args is #{args.inspect}\n")
    if args.empty?
      STDOUT.write("\n")
    else
      args.each { |arg| STDOUT.write("#{arg.to_s}\n") }
    end
  end

1.9.3p194 :039 > my_puts
args is []

 => 1 
1.9.3p194 :040 > my_puts []
args is [[]]
[]
 => [[]] 
1.9.3p194 :041 > my_puts *[]
args is []

 => 1 
1.9.3p194 :042 > my_puts 1,2,3
args is [1, 2, 3]
1
2
3
 => [1, 2, 3] 
1.9.3p194 :043 > my_puts [1,2,3]
args is [[1, 2, 3]]
[1, 2, 3]
 => [[1, 2, 3]] 
1.9.3p194 :044 > my_puts *[1,2,3]
args is [1, 2, 3]
1
2
3
 => [1, 2, 3] 
```

# sql - 查询以将问题与来自两个不同表的选项结合起来？

> ID：13814889
> 
> 赞同：2
> 
> 时间：2012-12-11T06:34:56.547
> 
> 标签：sql, sql-server

我有两个数据库表：

`Definitions`表具有以下列：

```
Id, Category 
```

样本数据：

```
1, What is capital of USA ?
2, Who broke my glass ? 
```

`Options`表具有以下列：

```
Id, DefinitionId, Value 
```

样本数据：

```
1, 1, New York
2, 1, Melbourne
3, 1, Lahore
4, 2, Boss
5, 2, My brother
6, 2, Your girlfriend 
```

请指导我如何使用所有选项查询所有问题，我需要如下数据：

```
"", 1, What is capital of USA ?
1,1, New York
2,1, Melbourne
3, 1, Lahore

"", 2,Who broke my glass ?
4, 2, Boss
5, 2, My brother
6, 2, Your girlfriend 
```

请指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:42:40.153

为此，请`UNION ALL`像这样使用：

```
SELECT '' ID, DefinitionId, Category AS value FROM Definitions WHERE ID = 1
UNION ALL
SELECT Id, DefinitionId, Value FROM Options WEHRE DefentionID = 1; 
```

**请注意：**最`JOIN`好像这样的两个表：

```
SELECT 
  d.Id,
  o.Id,
  o.Value
FROM Definitions d
INNER JOIN Options o ON d.ID = o.DefinitionId
WHERE d.Id = 1; 
```

并且不要考虑在 SQL 中进行这种格式化；

**更新：**要获得所有问题，请尝试以下操作：

```
SELECT '' ID, ID AS DefinitionId, Category AS value FROM Definitions 
UNION ALL
SELECT Id, DefinitionId, Value FROM Options
ORDER BY DEFINITIONID, ID; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/5a355/7)

这会给你：

```
| ID | DEFINITIONID |                    VALUE |
------------------------------------------------
|  0 |            1 | What is capital of USA ? |
|  1 |            1 |                 New York |
|  2 |            1 |                Melbourne |
|  3 |            1 |                   Lahore |
|  0 |            2 |     Who broke my glass ? |
|  4 |            2 |                     Boss |
|  5 |            2 |               My brother |
|  6 |            2 |          Your girlfriend | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:46:40.867

要按照您的要求显示数据，您还可以在 Excel 中使用诸如数据透视表之类的东西，并将您的数据库作为源。这也适用于 Sql Server Analysis Services。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:50:49.130

```
SELECT ' ',D.ID,D.category from Definitions D where D.Id = 1
UNION 
SELECT C.ID,C.DefinitionId,C.Value from options C where C.DefinitionId=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:55:54.367

```
SELECT  NULL,D.Id,D.Category
FROM    Definitions D
UNION
SELECT  O.Id,O.DefinitionId,O.Value
FROM    Options O
ORDER BY 2,1 
```

# java - jarInputStream.getManifest() 为空

> ID：13814891
> 
> 赞同：1
> 
> 时间：2012-12-11T06:35:30.617
> 
> 标签：java, reflection, jar, reflections

当我将 jar 文件上传到 servlet 并尝试读取其清单时。jarStream.getManifest() 返回 null..

JarInputStream jarInputStream = new JarInputStream(inputStream);

**清单 mf = jarInputStream.getManifest();**

虽然当我阅读为 JarFile 提供绝对路径时同一个 jar，但我得到了 jar 的清单。

我需要在运行时读取 jar 文件的清单 .. 上传时..

任何建议都非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:04:26.850

通过使用 ant 脚本打包 jar 以向清单提供自定义属性，有助于成功获取清单。

以前我使用 eclipse>export>java>java 存档来打包 jar，其中清单是默认的，编辑这个导出的 jar 的清单似乎是问题的原因。

感谢@EJP 和@Burkhard 对我的查询的快速回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:38:47.413

你用的是java 1.4吗？看看这个[错误 4338238](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4338238)

# r - R 数据重新排列

> ID：13814899
> 
> 赞同：1
> 
> 时间：2012-12-11T06:36:18.387
> 
> 标签：r

请让我知道可以重新排列数据的“R代码”

```
AA 100 NA
BB 200 300
CC 300 NA
DD 100 400 
```

至

```
AA 100 0   0   0
BB 0   200 300 0
CC 0   0   300 0
DD 100 0   0   400 
```

或者

```
 100 200 300 400
AA 1   0   0   0
BB 0   1   1   0
CC 0   0   1   0
DD 1   0   0   1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T07:27:41.087

```
df <- read.table(text = "AA 100 NA
BB 200 300
CC 300 NA
DD 100 400")

table(data.frame(letters = df[,1], numbers = unlist(df[,-1])))
#        numbers
# letters 100 200 300 400
#      AA   1   0   0   0
#      BB   0   1   1   0
#      CC   0   0   1   0
#      DD   1   0   0   1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T07:07:16.067

```
# SAMPLE DATA
myDF <- structure(list(V2 = c(100L, 200L, 300L, 100L), V3 = c(NA, 300L, NA, 400L)), .Names = c("V2", "V3"), class = "data.frame", row.names = c("AA", "BB", "CC", "DD")) 
```

假设`myDf`是您的原始数据框

```
# create columns sequence
Columns <- seq(100, 400, by=100)

newMat <- sapply(Columns, function(c) rowSums(c==myDF, na.rm=T))

# assign names
colnames(newMat) <- Columns

newMat  
#      100 200 300 400
#   AA   1   0   0   0
#   BB   0   1   1   0
#   CC   0   0   1   0
#   DD   1   0   0   1 
```

* * *

### 解释：

`c == myDF`给出 TRUE/FALSE 值的矩阵.
如果您对 T/F 进行算术运算，它们将被视为 1/0
。因此，我们可以`rowSum()`对每一行 AA、BB 等取
，这将告诉我们每行等于 c 的次数。

我们使用`sapply`迭代每个列值，100、200 等
`lapply`为我们返回一个列表
`sapply`，获取该列表并将其简化为一个漂亮的矩阵。

然后我们清理名称以使事情变得漂亮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:58:13.947

要获取这些值，还可以使用 reshape2 包：

```
DF <- read.table(text = "AA 100 NA
 BB 200 300
 CC 300 NA
 DD 100 400")

library(reshape2)
dfm <- melt(DF, id = "V1")

dcast(dfm, V1 ~ factor(value), fill = 0)[, -6]
  V1 100 200 300 400
1 AA 100   0   0   0
2 BB   0 200 300   0
3 CC   0   0 300   0
4 DD 100   0   0 400 
```

dcast() 中的最后一列被删除，因为 NA 是 dfm$value 中的一个值，并且占据了转换数据帧中的最后一列。

# python - 是否有好的库可以快速进行非负矩阵分解（NMF）？

> ID：13814907
> 
> 赞同：4
> 
> 时间：2012-12-11T06:36:51.677
> 
> 标签：python, c++, pca, matrix-factorization, nmf

我有一个稀疏矩阵，其形状为**570000*3000**。我试过[nima](http://nimfa.biolab.si/)做 NMF（使用默认的 nmf 方法，并设置`max_iter`为 65）。但是，我发现 nimfa 非常慢。有没有人使用更快的库来做 NMF？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-11T06:49:15.963

我以前用过[`libNMF`](http://www.univie.ac.at/rlcta/software/)。它是用 C 语言编写的，速度非常快。有一篇[论文](http://www.cai.sk/ojs/index.php/cai/article/view/161/136)记录了算法和代码。

该论文还列出了 NMF 的几个替代包（使用多种不同的语言（我已在此处复制以供将来参考）。

*   数学作品 [3, 33]
    *   MATLAB
    *   [http://www.mathworks.com/access/helpdesk/help/toolbox/stats/nnmf](http://www.mathworks.com/access/helpdesk/help/toolbox/stats/nnmf)。
*   杰吉尔 [5]
    *   MATLAB
    *   [http://www.cmpe.boun.edu.tr/~cemgil/bnmf](http://www.cmpe.boun.edu.tr/~cemgil/bnmf)
*   Cichocki 等人。[6]
    *   MATLAB
    *   [http://www.bsp.brain.riken.jp/ICALAB/nmflab](http://www.bsp.brain.riken.jp/ICALAB/nmflab)。
*   Cichocki 等人。[7]
    *   MATLAB
    *   [http://eu.wiley.com/WileyCDA/WileyTitle/productCd-0470746661.html](http://eu.wiley.com/WileyCDA/WileyTitle/productCd-0470746661.html)
*   汉森等人。[14]
    *   MATLAB
    *   [http://isp.imm.dtu.dk/toolbox/nmf/index.html](http://isp.imm.dtu.dk/toolbox/nmf/index.html)
*   霍尔 [16]
    *   MATLAB
    *   [http://www.cs.helsinki.fi/u/phoyer/software.html](http://www.cs.helsinki.fi/u/phoyer/software.html)
*   金等人。[19]
    *   MATLAB
    *   [http://userweb.cs.utexas.edu/users/dmkim/Source/software/nnma/index.html](http://userweb.cs.utexas.edu/users/dmkim/Source/software/nnma/index.html)
*   林 [25]
    *   MATLAB/Python
    *   [http://www.csie.ntu.edu.tw/~cjlin/nmf/index.html](http://www.csie.ntu.edu.tw/~cjlin/nmf/index.html)
*   施密特等人。[30]
    *   MATLAB
    *   [http://mikkelschmidt.dk/index.php?id=2](http://mikkelschmidt.dk/index.php?id=2)
*   高茹 [10]
    *   R
    *   [http://cran.r-project.org/web/packages/NMF/index.html](http://cran.r-project.org/web/packages/NMF/index.html)
*   刘[26]
    *   R
    *   [http://cran.r-project.org/web/packages/NMFN/index.html](http://cran.r-project.org/web/packages/NMFN/index.html)
*   巴滕贝格等人。[2](http://www.cai.sk/ojs/index.php/cai/article/view/161/136)
    *   Python
    *   [http://www.eecs.berkeley.edu/~ericb](http://www.eecs.berkeley.edu/~ericb)
*   施密特等人。[31]
    *   Python
    *   [http://www.procoders.net/?p=409](http://www.procoders.net/?p=409)
*   迪隆等人。[8]
    *   C++
    *   [http://www.kyb.mpg.de/bs/people/suvrit/work/progs/nnma.html](http://www.kyb.mpg.de/bs/people/suvrit/work/progs/nnma.html)
*   格林等人。[13]
    *   C++
    *   [http://mlg.ucd.ie/nmf](http://mlg.ucd.ie/nmf)
*   帕塔克等人。[28]
    *   C++
    *   [http://www.insight-journal.org/browse/publication/152](http://www.insight-journal.org/browse/publication/152)
*   王等人。[34]
    *   C++
    *   [http://www.biomedcentral.com/1471-2105/7/175](http://www.biomedcentral.com/1471-2105/7/175)

免责声明：我没有尝试过任何其他软件包（除了 MATLAB 的）。

# windows-phone-7 - WP7背景音乐播放

> ID：13814908
> 
> 赞同：2
> 
> 时间：2012-12-11T06:37:06.350
> 
> 标签：windows-phone-7

在我的 WP7 应用程序中，我希望 2 个音乐文件在后台运行。我正在使用 MediaElement 来执行此操作。我面临两个问题。

1.  如何在后台播放？
2.  如何循环播放背景音乐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:11:17.890

我就是这样做的。添加以下内容：

```
<MediaElement x:Name="meSong" /> 
```

这是在构造函数中添加的：

```
meSong.MediaEnded += new RoutedEventHandler(meSong_MediaEnded); 
```

这就是我在歌曲结束后循环播放歌曲的方式：

```
private void meSong_MediaEnded(object sender, RoutedEventArgs e)
{
    meSong.Position = TimeSpan.Zero;
    meSong.Play();
} 
```

这就是我设置歌曲的方式：

```
private void SetSong(string selectedSong)
{
    if (ViewModel.IsMusicOn)
    {
        try
        {
            meSong.Stop();

            meSong.Source = new Uri(string.Format("Media/Sounds/{0}.wav", selectedSong), UriKind.Relative);
            meSong.Position = new TimeSpan(0);
            meSong.Volume = 0.5;
        }
        catch (Exception)
        {
            // nothing for now
        }
    }
} 
```

这就是你显然开始你的音乐的方式：

```
meSong.Play(); 
```

# android - 如何从数据库中获取值来绘制条形图？

> ID：13814917
> 
> 赞同：0
> 
> 时间：2012-12-11T06:38:19.830
> 
> 标签：android, sqlite, bar-chart, achartengine

嗨，我是 android 新手，我正在开发一个应用程序来使用 achartengine 显示前 10 个旅游目的地。问题是我正在使用生成的随机值来绘制图表。我需要的是连接使用 sqlite 数据浏览器创建的数据库来绘制图形。我正在按照以下教程绘制图表[http://www.youtube.com/watch?v=E9fozQ5NlSo](http://www.youtube.com/watch?v=E9fozQ5NlSo)。但是我没有找到很多关于如何连接数据库来绘制条形图的教程。请张贴以上任何链接。

```
package flu.solutions.travelsense;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import org.achartengine.ChartFactory;
import org.achartengine.chart.BarChart.Type;
import org.achartengine.model.CategorySeries;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.renderer.SimpleSeriesRenderer;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYMultipleSeriesRenderer.Orientation;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;  
import android.view.Menu;
public class ChartActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        XYMultipleSeriesRenderer renderer = getBarDemoRenderer();
        setChartSettings(renderer);
        Intent intent = ChartFactory.getBarChartIntent(this, getBarDemoDataset(), renderer, Type.DEFAULT);
        startActivity(intent);
    }

    public Intent createIntent() 

     {

    String[] titles = new String[] { "Top 10 Destinations", " " };
    List<double[]> values = new ArrayList<double[]>();
    values.add(new double[] { 8, 6, 4, 6, 7, 7, 9, 5, 7, 8, 8 });
    values.add(new double[] {});

    int[] colors = new int[] { Color.RED, Color.BLACK};

    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
    renderer.setOrientation(Orientation.HORIZONTAL);

    setChartSettings(renderer);

    renderer.setXLabels(1);
    renderer.setYLabels(10);

    renderer.addXTextLabel(1, "Bangalore");
    renderer.addXTextLabel(2, "Mysore");
    renderer.addXTextLabel(3, "Chennai");
    renderer.addXTextLabel(4, "Delhi");
    renderer.addXTextLabel(5, "Kolkatta");
    renderer.addXTextLabel(6, "Kashmir");
    renderer.addXTextLabel(7, "Hyderabad");
    renderer.addXTextLabel(8, "Mumbai");
    renderer.addXTextLabel(9, "Kerala");
    renderer.addXTextLabel(10, "Gujarat");

    int length = renderer.getSeriesRendererCount();
    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
      seriesRenderer.setDisplayChartValues(false);
      }

    return ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
    }

    public XYMultipleSeriesRenderer getBarDemoRenderer() {
        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
        renderer.setAxisTitleTextSize(16);
        renderer.setChartTitleTextSize(20);
        renderer.setLabelsTextSize(15);
        renderer.setLegendTextSize(15);
        renderer.setMargins(new int[] {20, 30, 15, 0});
        SimpleSeriesRenderer r = new SimpleSeriesRenderer();
        r.setColor(Color.BLUE);
        renderer.addSeriesRenderer(r);
        r = new SimpleSeriesRenderer();
        r.setColor(Color.GREEN);
        renderer.addSeriesRenderer(r);
        return renderer;
      }

     private XYMultipleSeriesDataset getBarDemoDataset() {
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        final int nr = 10;
        Random r = new Random();
        int SERIES_NR = 2;
        for (int i = 0; i < SERIES_NR; i++) {
          CategorySeries series = new CategorySeries("Demo series " + (i + 1));
          for (int k = 0; k < nr; k++) {
            series.add(100 + r.nextInt() % 100);
          }
          dataset.addSeries(series.toXYSeries());
        }
        return dataset;
      }

    private void setChartSettings(XYMultipleSeriesRenderer renderer) {
        renderer.setChartTitle("Chart demo");
        renderer.setXTitle("x values");
        renderer.setYTitle("y values");
        renderer.setXAxisMin(0);
        renderer.setXAxisMax(5);
        renderer.setYAxisMin(0);
        renderer.setYAxisMax(250);
      }
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_chart, menu);
        return true;
    }
      } 
```

你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:56:48.277

首先告诉我你的数据库在哪里 1> 它是你的应用程序本地的 2> 它在服务器中（有多种访问方式：你可以发送 http 请求以从服务器获取数据） 3> 数据库在您手机中的另一个应用程序，您可以使用内容提供程序访问数据。

试试这个代码

```
public class DataBaseHelper extends SQLiteOpenHelper {
    private Context mycontext;

    //private String DB_PATH = mycontext.getApplicationContext().getPackageName()+"/databases/";
    private static String DB_NAME = "(datbasename).sqlite";//the extension may be .sqlite or .db
    public SQLiteDatabase myDataBase;
    /*private String DB_PATH = "/data/data/"
                        + mycontext.getApplicationContext().getPackageName()
                        + "/databases/";*/

    public DataBaseHelper(Context context) throws IOException {
        super(context,DB_NAME,null,1);
        this.mycontext=context;
        boolean dbexist = checkdatabase();
        if (dbexist) {
            //System.out.println("Database exists");
            opendatabase(); 
        } else {
            System.out.println("Database doesn't exist");
            createdatabase();
        }
    }

    public void createdatabase() throws IOException {
        boolean dbexist = checkdatabase();
        if(dbexist) {
            //System.out.println(" Database exists.");
        } else {
            this.getReadableDatabase();
            try {
                copydatabase();
            } catch(IOException e) {
                throw new Error("Error copying database");
            }
        }
    }   

    private boolean checkdatabase() {
        //SQLiteDatabase checkdb = null;
        boolean checkdb = false;
        try {
            String myPath = DB_PATH + DB_NAME;
            File dbfile = new File(myPath);
            //checkdb = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);
            checkdb = dbfile.exists();
        } catch(SQLiteException e) {
            System.out.println("Database doesn't exist");
        }
        return checkdb;
    }

    private void copydatabase() throws IOException {
        //Open your local db as the input stream
        InputStream myinput = mycontext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outfilename = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myoutput = new FileOutputStream("/data/data/(packagename)/databases   /(datbasename).sqlite");

        // transfer byte to inputfile to outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myinput.read(buffer))>0) {
            myoutput.write(buffer,0,length);
        }

        //Close the streams
        myoutput.flush();
        myoutput.close();
        myinput.close();
    }

    public void opendatabase() throws SQLException {
        //Open the database
        String mypath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(mypath, null, SQLiteDatabase.OPEN_READWRITE);
    }

    public synchronized void close() {
        if(myDataBase != null) {
            myDataBase.close();
        }
        super.close();
    }

} 
```

用于从资产文件夹中读取数据库..

# ruby-on-rails - Errno::ENOEXEC 异常

> ID：13814919
> 
> 赞同：0
> 
> 时间：2012-12-11T06:38:23.943
> 
> 标签：ruby-on-rails, ruby, windows

我正在开发 2.0.2 rails 应用程序。现在，当我从 Windows pc 执行命令时，`rake db:migate`它会给出`Errno::ENOEXEC in SystemsController#index`.

有没有其他方法可以从 windows pc 上的 rails 应用程序执行系统命令？

这是错误：

```
Errno::ENOEXEC in SystemsController#index

Exec format error - rake db:migrate

RAILS_ROOT: E:/RoR/ibt/InstantRails-2.0-win/rails_apps/config
Application Trace | Framework Trace | Full Trace

E:/RoR/ibt/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.0.2/lib/active_support/core_ext/kernel/agnostics.rb:7:in ``' ``
E:/RoR/ibt/InstantRails-2.0-win/ruby/lib/ruby/gems/1.8/gems/activesupport-2.0.2/lib/active_support/core_ext/kernel/agnostics.rb:7:in ``'`
app/controllers/systems_controller.rb:24:in `index' 
```

我正在使用 ruby​​ 控制台：

```
irb(main):001:0> system('dir')
Volume in drive E has no label.
Volume Serial Number is 522C-BDB1

 Directory of E:\RoR\ibt\InstantRails-2.0-win\rails_apps\config

 11/29/2012  03:11 PM    <DIR>          .
 11/29/2012  03:11 PM    <DIR>          ..
 11/29/2012  02:41 PM    <DIR>          app
 11/29/2012  02:42 PM    <DIR>          config

 => true
 irb(main):002:0> system('rake db:migrate')
 => false
 irb(main):003:0> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:59:23.807

我通过从 rake 所在的批处理文件中运行 rake 文件解决了这个问题。

```
irb(main):001:0> system('dir')
Volume in drive E has no label.
Volume Serial Number is 522C-BDB1

Directory of E:\RoR\ibt\InstantRails-2.0-win\rails_apps\config

11/29/2012  03:11 PM    <DIR>          .
11/29/2012  03:11 PM    <DIR>          ..
11/29/2012  02:41 PM    <DIR>          app
11/29/2012  02:42 PM    <DIR>          config

=> true
irb(main):002:0> system('rake db:migrate')
=> false 
```

在控制器文件中

```
system("#{RAILS_ROOT}/../../ruby/bin/rake.bat db:migrate") 
```

给出结果

```
 == 99 AddFieldtoSystemAssoziations: migrating =================================
 == 99 AddFieldtoSystemAssoziations: migrated (0.0391s) ======================== 
```

# android - Android 应用在 3G 网络下不工作，但在 WIFI 下工作

> ID：13814922
> 
> 赞同：3
> 
> 时间：2012-12-11T06:38:35.677
> 
> 标签：android, web-services, 3g

我正在做一个希伯来语应用程序，该应用程序从服务器接收一些数据。该应用程序在 wifi 网络上完美运行，但是当它在 3G 网络中时，服务器没有响应。

我检查了内置 android 浏览器中的响应，我收到“502 错误”（坏网关）。但该应用程序可以在具有相同 3g 网络的另一部手机上运行。

我对服务器的 http 请求在后台工作，而不是在 UI 线程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:51:34.950

我在三星 S3 mini 设备上遇到了类似的问题。你有任何用例 GSON 库吗？我认为这与它有关

应用程序正在其他 4 台设备上运行，但仅在 S3mini 上失败！

# python - 从 Super 继承 Python 类 args

> ID：13814923
> 
> 赞同：0
> 
> 时间：2012-12-11T06:38:36.963
> 
> 标签：python, class, inheritance

我想`collection`从类继承 arg `Base`。如何？

```
class Base(object):
    def __init__(self, collection=None, classname=None):
        self.__collection__ = collection or self.__class__.__name__

class Thing(Base):
    def __init__(self, **kwargs):
        super(Thing, self).__init__()
        self.__dict__.update(kwargs)

t = Thing(collection='foobar')
t.__collection__

>>> 'Thing' 
```

:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:51:07.287

我通常不使用`super()`. 我改为`__init__`直接调用该函数。就像是：

```
class Base(object):
    def __init__(self, collection=None, classname=None):
        self.__collection__ = collection or self.__class__.__name__

class Thing(Base):
    def __init__(self, **kwargs):
        #super(Thing, self).__init__()
        Base.__init__(self, **kwargs)
        #self.__dict__.update(kwargs)

t = Thing(collection='foobar')
print(t.__collection__) 
```

应该产生你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:50:38.080

不要在实例变量的开头使用双下划线，并且避免在开头和结尾使用它们，因为双下划线在python中有特殊的含义。

如果实例变量的标识符以双下划线开头，则它是“名称错位”以避免子类的名称空间中的冲突，因此`self.__collections`实际上变为`self._Base__collections`. 实例变量标识符开头和结尾的双下划线保留用于特殊方法和特殊名称（例如`__add__`or `__class__`）。

实例变量应该以字母（例如`collections`）或单个下划线开头，以表示它们是私有的（例如`_collections`）

无论如何，在您的示例中，您正在设置一个`collection`不存在的属性。如果您`self.collection`在`Base`类中命名该属性，它将正常工作。

说清楚：

```
>>> class Base(object):
...     def __init__(self, collection=None):
...             self.__collection__ = collection or self.__class__.__name__
... 
>>> class Thing(Base):
...     def __init__(self, **kwargs):
...             super(Thing, self).__init__()
...             self.__dict__.update(kwargs)
... 
>>> t = Thing(collection=3)   __dict__.update creates a new instance attribute
>>> t.__collection__
'Thing'
>>> t.collection   # here it is
3
>>> t = Thing(**{'__collection__': 7})   #UGLY! Do not do this!!!
>>> t.__collection__
7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:50:47.957

你只需要将'转发'`kwargs`到你的基类'`__init__()`方法：

```
class Thing(Base):
    def __init__(self, **kwargs):
        super(Thing, self).__init__(**kwargs)
        self.__dict__.update(kwargs)

t = Thing(collection='foobar')
assert t.__collection__ == 'foobar'
assert t.__dict__.get('collection') == 'foobar' 
```

您只是`Base.__init__()`使用默认参数调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:50:50.423

你在找`super(Thing, self).__init__(**kwargs)`吗？这会将关键字参数传递给超类`__init__`。

# android - 电话上 NETWORK_PROVIDER 的 getLastKnownLocation 返回 null

> ID：13814928
> 
> 赞同：5
> 
> 时间：2012-12-11T06:39:02.513
> 
> 标签：android, location

好的，我花了很多时间搜索和阅读，而不仅仅是这个网站。大多数线程处理 GPS 或试图让它在模拟器中工作。developer.android.com 上的文档只解释了一点。我不能让一件简单的事情工作。像大多数有这个问题的人一样，我只想从网络提供商那里获得最后一个已知位置，即使在我使用谷歌地图（使用网络提供商，因为 GPS 已关闭）并且它向我显示之后，它也不会得到它距离只有 1/8 到 1/4 英里。好的，所以“提供者”（手机信号塔/wi-fi，如果打开的话）正在修复谷歌地图。我尝试了我的应用程序，但无法获得最后一个已知位置。我什至没有尝试在地图中显示它，我让它在按下按钮以获取位置后将经纬度坐标打印到屏幕上。该文档没有说明必须从同一活动中制作的最后一个位置。它说它将返回指定提供商的最后一个已知位置。我正在指定 NETWORK_PROVIDER，文档中说它是手机信号塔和 wi-fi。（是的，我已经在清单中涵盖了这一点。）

有谁知道这是如何工作的？我还没有看到一个很好的解释，即使在谷歌网站上也是如此。如果你不能告诉我，我很沮丧。这显然是我正在做（或没有）做的事情，所以除了我自己之外，我不会责怪任何人/任何人，除了文档对于我的需要来说太短了。

更新：我现在正在使用位置侦听器并获取位置，我假设是最后一个位置。能够在不通过位置侦听器启动位置更新的情况下获取最后一个位置似乎是合乎逻辑的，但我没有，现在我使用了位置侦听器。

现在我的问题是我无法更改位置。我的代码现在什么都不做，除了尝试通过侦听器获取位置更新，并且还接受按下按钮以获取最后一个已知位置。谷歌地图会告诉我我在哪里，但我一直在我的代码中得到一个 20 英里外的位置。我有一种感觉，我实际上可能会获得一个新位置，但我可能错误地使用了最终/静态声明，这使我无法在需要时存储和使用该位置。我的清单具有 internet 和 fine_location 权限，并且活动的 xml 工作正常 - 它只提供一个按钮来打开/关闭实时搜索位置，一个用于手动检索 lastknownlocation 的按钮，以及一个用于显示纬度和经度的文本视图。

```
public class RMain extends Activity {

public boolean islivesearchon;
public static double netlistentime = 0 * 60 * 1000; // minutes * 60 sec/min * 1000 for milliseconds
public static double netlistendistance = 0 * 1609.344; // miles * conversion to meters
public static double gpslistentime = 30 * 60 * 1000; // minutes * 60 sec/min * 1000 for milliseconds
public static double gpslistendistance = 0 * 1609.344; // miles * conversion to meters

private static Location currentlocation;
private LocationManager locationManager;
private LocationListener locationListener;
public static Criteria criteria;
public TextView latview;
public TextView longview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_rmain);

    latview = (TextView) findViewById(R.id.display_latitude);
    longview = (TextView) findViewById(R.id.display_longitude);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    // setup bestProvider
    criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    String bestprovider = locationManager.getBestProvider(criteria, true);

    // get an initial current location
    currentlocation = locationManager.getLastKnownLocation(bestprovider);
    latview.setText(Double.toString(currentlocation.getLatitude()));
    longview.setText(Double.toString(currentlocation.getLongitude()));

    // Define locationListener interface
    locationListener = new LocListener();

    // React to LiveSearch toggle button press
    final Button livesearch = (Button) findViewById(R.id.button_livesearch);
    livesearch.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            TextView livesearchview = (TextView) findViewById(R.id.button_livesearch);
            boolean isNetEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
            boolean isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

            if(islivesearchon) {
                locationManager.removeUpdates(locationListener);
                islivesearchon = false;
                livesearchview.setText("Live Search is OFF");
            }
            else {
                // ideally should check for !isProviderEnabled first, then provide option for turning it on
                if(isNetEnabled) {
                    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, (long) netlistentime, (float) netlistendistance, locationListener);
                    islivesearchon = true;
                    livesearchview.setText("Live Search is ON");
                }
                // ideally should check for !isProviderEnabled first, then provide option for turning it on
                if(isGpsEnabled) {
                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, (long) gpslistentime, (float) gpslistendistance, locationListener);
                    islivesearchon = true;
                    livesearchview.setText("Live Search is ON");
                }
            }
        }
    });

    // Respond to Get Location button click to get last known location
    final Button getlocation = (Button) findViewById(R.id.button_getlocation);
    getlocation.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            String bestprovider = locationManager.getBestProvider(criteria, true);
            Location lastlocation = locationManager.getLastKnownLocation(bestprovider);

            latview.setText(Double.toString(lastlocation.getLatitude()));
            longview.setText(Double.toString(lastlocation.getLongitude()));
        }
    });

}

private class LocListener implements LocationListener {

    @Override
    public void onLocationChanged(Location latestlocation) {
      // Called when a new location is found by the network location provider.
        currentlocation.set(latestlocation);
        latview.setText(Double.toString(currentlocation.getLatitude()));
        longview.setText(Double.toString(currentlocation.getLongitude()));
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {}

    @Override
    public void onProviderEnabled(String provider) {}

    @Override
    public void onProviderDisabled(String provider) {}
}; 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T06:57:08.300

尝试检查这个......一旦你`onLocationChange`被调用，之后你可以使用最后一个已知位置获得旧值。

```
 locationManager = (LocationManager)this.getSystemService(LOCATION_SERVICE);

        location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {

            old_latitude=location.getLatitude();
            old_longitude=location.getLongitude();
            Log.d("old","lat :  "+old_latitude);
            Log.d("old","long :  "+old_longitude);

            this.onLocationChanged(location);
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T06:45:31.413

当服务在设置>位置和安全>通过网络的位置被禁用时，它返回'null'

所以这种情况经常发生。

# c# - 在网格视图上对项目进行分组

> ID：13814935
> 
> 赞同：4
> 
> 时间：2012-12-11T06:39:33.183
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有警报模型对象，其中有一个重复集合，其中包含警报应该重复的天数。我想在按星期几分组的网格视图中显示警报（如星期一、星期二等）。

我将所有这些警报添加到集合“警报”中

对于警报中的每个警报，我再次在警报的重复集合中为每一天创建警报，并将它们全部添加到集合“TotalAlarms”中。

```
foreach (Alarm alarm in this.Config.Alarms)
        {
            foreach (DayOfWeek day in alarm.Repeat)
            {
                this.tempAlarm = this.CopyAlarm(alarm);

                tempAlarm.DayOfWeek = day;                 

                TotalAlarms.Add(tempAlarm);
            }
        } 
```

并且正在使用 linq 对警报模型的 DayOfWeek 属性进行分组，该属性指示警报应该在哪一天响起。

```
var result = from t in _ViewModel.TotalAlarms
                     group t by  t.DayOfWeek into q                        
                     orderby q.Key
                     select q; 
```

并将此结果添加到 groupedItemsViewSource（绑定到网格视图的 itemsource）

```
groupedItemsViewSource.Source = result; 
```

对于网格视图的标题，将其绑定到“Key”

```
<TextBlock Text="{Binding Key}" Style="{StaticResource TitleTextStyle}" FontSize="20" HorizontalAlignment="Stretch" VerticalAlignment="Center" Width="100" Height="30" Margin="5"/> 
```

此方法仅显示有警报的星期几。就像警报设置为星期五和星期六一样，组标题中只显示星期五和星期六。

我想要的是显示为组标题的所有日子，如果那天没有警报，那么它可以是空的。但是组标题应该显示所有天。

我真的很难想出一种方法来做到这一点。如果有人有任何想法，请在这里帮助我......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:56:22.497

看看这篇文章： [http ://code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603](http://code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603)

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868244(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868244(v=win.10).aspx)

推送通知，可以是定期或特殊条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:43:12.733

我终于自己想出了答案。它有点凌乱和丑陋，但它有效。我现在使用 7 个网格视图而不是一个。但它仍然不显示标题，除非网格视图中有数据项。因此，如果网格视图集合为空，那么我将一些空对象添加到绑定网格视图的集合中，然后我减小网格视图的高度，以便不显示空项目而只显示标题。

这是一个网格视图的示例代码。

```
 emptyAlarmsList = new ObservableCollection<Alarm>();
        emptyAlarmsList.Add(new Alarm());

        var sundayAlarms = from t in _ViewModel.TotalAlarms
                           where t.DayOfWeek == DayOfWeek.Sunday
                           group t by t.DayOfWeek into g
                           orderby g.Key
                           select g;

        if (sundayAlarms.Count() == 0)
        {
            var sundayEmptyAlarms = from t in this.emptyAlarmsList                                   
                               group t by t.DayOfWeek into g
                               orderby g.Key
                               select g;
            SundayAlarmsView.Source = sundayEmptyAlarms;
            itemGridView1.VerticalAlignment = Windows.UI.Xaml.VerticalAlignment.Top;
            itemGridView1.Height = 100;
        }
        else
            SundayAlarmsView.Source = sundayAlarms; 
```

以及一个网格视图的 XAMl 代码

```
 <CollectionViewSource
        x:Name="SundayAlarmsView"            
        IsSourceGrouped="true"
        />
            <GridView
        x:Name="itemGridView1"
        AutomationProperties.AutomationId="ItemGridView1"
        AutomationProperties.Name="Grouped Items"            
        Grid.Column="0"
        Margin="0,-3,0,0"
        Padding="116,0,40,46"
        SelectionMode= "Extended"
        ItemsSource="{Binding Source={StaticResource SundayAlarmsView}}"
        ItemTemplate="{StaticResource AlarmListTemplate}"
        SelectionChanged="Alarm_SelectionChanged">

                <GridView.ItemContainerStyle>
                    <Style
                TargetType="GridViewItem">
                        <Setter
                    Property="Height"
                    Value="150" />
                        <Setter
                    Property="Width"
                    Value="250" />
                        <Setter
                    Property="Margin"
                    Value="10,10" />
                    </Style>
                </GridView.ItemContainerStyle>

                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>

                                <TextBlock Text="Sunday" Style="{StaticResource TitleTextStyle}" FontSize="20" HorizontalAlignment="Stretch" VerticalAlignment="Center" Width="100" Height="30" Margin="5"/>

                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>
                        <GroupStyle.Panel>
                            <ItemsPanelTemplate>
                                <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
                            </ItemsPanelTemplate>
                        </GroupStyle.Panel>
                    </GroupStyle>
                </GridView.GroupStyle>
            </GridView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-27T12:54:49.023

我将这个用于我的项目

注意：我想按我的表的字段之一分组

我的模型是：

```
 public class Item : INotifyPropertyChanged
    {
        public Item()
        {
        }
        public event PropertyChangedEventHandler PropertyChanged;
        private string _name;
        public string name { set { _name = value; OnPropertyChanged("name"); } get { return _name; } }
        private string _color;
        public string color { set { _color = value; OnPropertyChanged("color"); } get { return _color; } }
        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }

    } 
```

在 xaml gridview 中是：

```
<GridView x:Name="gr" SelectionChanged="gr_SelectionChanged"  ItemsSource="{Binding Source={StaticResource CollectionViewSource}}" Margin="-400,30,0,0" SelectionMode="Multiple" SelectedValuePath="{Binding selectedItemFalg, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <ItemsWrapGrid Orientation="Horizontal" Width="500" />
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal"  Background="#FFD7EDF2" Margin="0,0,0,0" Width="80">
                            <TextBlock Text="{Binding name}" Foreground="#FF00455A"  Margin="5,5,0,0"  Height="30" />
                            <TextBlock Text="-" Foreground="#FF00455A"  Margin="5,5,0,0"  Height="30" />
                            <TextBlock Text="{Binding color}" Foreground="#FF00455A"  Margin="5,5,0,0"  Height="30" />
                        </StackPanel>
                    </DataTemplate>
                </GridView.ItemTemplate>
                <GridView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <Grid Background="Blue" Margin="10">
                                    <TextBlock Text='{Binding Key}' Foreground="Black" FontSize="25" Margin="5" Width="80"/>
                                </Grid>
                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>
                    </GroupStyle>
                </GridView.GroupStyle>
            </GridView> 
```

在 viewModel 中需要这段代码：

```
 public  class date_for_my_page
    {
       public date_for_my_page()
       {
           Item item = new Item();
           item.color = "black1";
           item.name = "A";
           Collection.Add(item);
           item = new Item();
           item.color = "black2";
           item.name = "A";
           Collection.Add(item);
           item = new Item();
           item.color = "black3";
           item.name = "A";
           Collection.Add(item);
           item = new Item();
           item.color = "black4";
           item.name = "A";
           Collection.Add(item);
           item = new Item();
           item.color = "black5";
           item.name = "A";
           Collection.Add(item);
           item = new Item();
           item.color = "blue1";
           item.name = "B";
           Collection.Add(item);
           item = new Item();
           item.color = "blue2";
           item.name = "B";
           Collection.Add(item);
           item = new Item();
           item.color = "blue3";
           item.name = "B";
           Collection.Add(item);
           item = new Item();
           item.color = "Red1";
           item.name = "C";
           Collection.Add(item);
           item = new Item();
           item.color = "Red2";
           item.name = "C";
           Collection.Add(item);
       }
        private ItemCollection _Collection = new ItemCollection();

        public ItemCollection Collection
        {
            get
            {
                return this._Collection;
            }
        }

        internal List<GroupInfoList<object>> GetGroupsByCategory()
        {
            List<GroupInfoList<object>> groups = new List<GroupInfoList<object>>();

            var query = from item in Collection
                        orderby ((Item)item).name
                        group item by ((Item)item).name into g
                        select new { GroupName = g.Key, Items = g };
            foreach (var g in query)
            {
                GroupInfoList<object> info = new GroupInfoList<object>();
                info.Key = g.GroupName;
                foreach (var item in g.Items)
                {
                    info.Add(item);
                }
                groups.Add(info);
            }

            return groups;

        }

    }
   public class ItemCollection : IEnumerable<Object>
   {
       private System.Collections.ObjectModel.ObservableCollection<Item> itemCollection = new System.Collections.ObjectModel.ObservableCollection<Item>();

       public IEnumerator<Object> GetEnumerator()
       {
           return itemCollection.GetEnumerator();
       }

       System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
       {
           return GetEnumerator();
       }

       public void Add(Item item)
       {
           itemCollection.Add(item);
       }
   }
   public class GroupInfoList<T> : List<object>
   {

       public object Key { get; set; }

       public new IEnumerator<object> GetEnumerator()
       {
           return (System.Collections.Generic.IEnumerator<object>)base.GetEnumerator();
       }
   } 
```

最后我想将我的排序数据绑定到我的 gridView

```
date_for_my_page _date = new date_for_my_page();
List<GroupInfoList<object>> sort_data = _date.GetGroupsByCategory();
CollectionViewSource.Source = sort_data; 
```

输出将显示：

[![在此处输入图像描述](../Images/3110d048b5e134c34adfa8a7c4e11b45.png)](https://i.stack.imgur.com/ba7XF.png) 希望这对所有人都有帮助。

# bash - 机器数据不是每 15 秒显示一次输出

> ID：13814941
> 
> 赞同：0
> 
> 时间：2012-12-11T06:40:12.780
> 
> 标签：bash, sh, iostat

以下脚本旨在例如每 15 秒输出一次“vmstat”，但由于某种原因，它仅在有活动或我终止脚本时才执行此操作，在其他情况下它只是坐在那里。

```
#!/bin/bash
#!/bin/sh

ps -ef | grep -v grep | grep "vmstat 15" | awk '{ print $2 }' | xargs kill

ps -ef | grep -v grep | grep "iostat 15" | awk '{ print $2 }' | xargs kill

ps -ef | grep -v grep | grep "mpstat 15" | awk '{ print $2 }' | xargs kill

today=`date +%Y-%m-%d.%H:%M:%S`

find /var/log/ -name data_collection -type d -exec mv /var/log/data_collection /home/Beer/"data_collection_${today}" \;

mkdir -p /var/log/data_collection

vmstat 15 | /home/Beer/./addtimestamp.pl > /var/log/data_collection/vm_stat &
iostat 15 | /home/Beer/./addtimestamp.pl > /var/log/data_collection/ios_stat &
mpstat 15 | /home/Beer/./addtimestamp.pl > /var/log/data_collection/mp_stat & 
```

我猜最后的“&”符号与此有关，我这样做只是为了可以一次执行每个命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T09:31:05.663

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

addtimestamp.pl 中有什么？可能是它正在缓冲输入，而不是每次读取内容时都刷新。——迭戈·巴施

@DiegoBasch 完全正确，我只是添加了一个 '$|=1;' 现在到 Perl 脚本，它开始工作，基本上将它设置为行缓冲区。生病添加答案。- 我是我

# php - PHP/jQuery - jQuery 插件 + PHP Foreach 只返回一个工作结果？| Twitter Bootstrap 的 X-Editable

> ID：13814942
> 
> 赞同：0
> 
> 时间：2012-12-11T06:40:37.757
> 
> 标签：php, jquery, twitter-bootstrap

有一个名为 X-Editable 的插件，我将它集成到 Bootstrap 中以单击更改 Ajax 请求。我已经全部设置好了，并且设置好了，但我的问题是我在一个 foreach 循环中使用它来从我的数据库中回显我的用户，但它只是使第一行可编辑。[屏幕](http://puu.sh/1zFbc)

这是我的 PHP Foreach，

```
<?php foreach($rows as $row):  $userid = $row['id'];  ?> 
<tr> 
<td><?php echo $row['id']; ?></td> 
<td><?php echo htmlentities($row['username']); ?></td> 
<td><a href="#" id="username" data-type="text" data-pk="1" data-url="/post"><?php echo   htmlentities($row['email']); ?>     </a></td>
<td><?php echo preg_replace('/([0-9]+\.[0-9]+\.[0-9]+)\.[0-9]+/', '\\1.**',$row['ip']); ?></td> 
<td><?php echo htmlentities($row['timestamp'); ?></td>

<?php endforeach; ?> 
```

这是我如何使 id “用户名” 可编辑，

```
<script type="text/javascript">
$('#username').editable();
</script> 
```

插件的文档可以在[这里找到](http://vitalets.github.com/x-editable/docs.html)

抱歉，如果我显示缺乏信息，但我认为这是一个非常普遍的问题，为什么插件只能使第一个结果可编辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:52:18.563

ID 必须是唯一的，将 id="username" 更改为 class="username"，然后执行

```
$('.username').editable(); 
```

或者做

```
<?php echo "username-".$userid; ?> 
```

接着

```
$('[id^=username]').editable(); 
```

# ios - 如何使用 `didOutputSampleBuffer` 中的 `AVCapturesession` 播放音频缓冲区

> ID：13814943
> 
> 赞同：2
> 
> 时间：2012-12-11T06:40:40.717
> 
> 标签：ios, avfoundation, playback, avcapturesession

我一直在尝试播放在`didOutputSampleBuffer`委托中作为原始数据接收的音频。处理原始数据的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T08:28:17.823

查看 Apple 的以下示例代码：[AVCaptureTtoAudioUnitOSX](http://developer.apple.com/library/ios/#samplecode/AVCaptureToAudioUnit/Introduction/Intro.html)

在那里您可以看到如何正确处理原始音频数据并将其传递给`AudioUnit`.

基本原理如下：

1.  获取有关格式的`SampleBuffer`信息`AudioStreamBasicDescription`

    首先获取`CMFormatDescriptionRef`with`CMSampleBufferGetFormatDescription`
    然后获取`AudioStreamBasicDescription`with`CMAudioFormatDescriptionGetStreamBasicDescription`
    现在您可以获取有关采样率、每通道位数、每帧通道和每包帧数的信息

2.  获取`AudioBufferList`带有实际音频数据的

    使用 CoreAudio 的公共实用程序或检查此[邮件列表](http://prod.lists.apple.com/archives/quicktime-api/2013/Apr/msg00015.html)条目以了解正确的方法。
    该函数称为`CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer`。第三个参数是`bufferListOut`您`AudioBufferList`想要的并将传递给例如 AudioUnit 或任何您需要的参数。

3.  获取实际的原始数据

    `AudioBufferList`包含其中的`AudioBuffers`每一个都包含数据

    ```
    struct AudioBuffer {
     UInt32 mNumberChannels;
     UInt32 mDataByteSize;
     void   *mData;
    }; 
    ```

这应该让你继续前进。查看 Apple 的示例代码以获取更多信息。

# sql-server - 具有多个键列的非聚集索引的 btree 结构是什么？

> ID：13814945
> 
> 赞同：1
> 
> 时间：2012-12-11T06:40:52.297
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

如果索引中有两个键列，SQL Server 是否会创建两个或一个 btree？

例如

```
CREATE NONCLUSTERED INDEX IX_SAMPLE
ON dbo.SAMPLE(NAME, DEPTNAME) 
```

如果我们在索引中包含列怎么办？是一样的结构吗？

# android - 如何使用 Graph api 在多个朋友墙上发帖？

> ID：13814949
> 
> 赞同：2
> 
> 时间：2012-12-11T06:41:07.583
> 
> 标签：android

我有我所有朋友的 facebook id。所以我只想在他们的墙上张贴（信息和图片）。

是否有可能做到这一点？

我使用以下代码在墙上发布

```
 String res=     UrltoValue.getValuefromUrl("https://graph.facebook.com/"+Login.facebookid+"/feed?access_token="+accesstoken+"&method="+"post"+"&message="+strFullMessage.replaceAll(" ", "%20")+"&source="+imageUrl); 
```

我可以使用循环在多个朋友墙上发帖吗？

我读到这样做是垃圾邮件。有没有应用程序做这种要求？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:35:40.513

这是创建延迟的示例代码

首先在类级别创建一个计数器变量

```
public int  counter = 0; 
```

然后使用此代码创建一个可重复的计数器

```
 final int postCount = 100;

    new Timer().schedule(new TimerTask() {

    @Override
    public void run() {
        //Send message here ;

        counter +=1;
        if(counter>=postCount){
            cancel();//stops the timer
        }

    }
}, 1000,3000); 
```

第一个参数（1000）是定时器的启动延迟（以毫秒为单位），第二个参数（3000）用于设置每个重复运行动作之间的后续延迟。

# css - 活动菜单CSS不起作用

> ID：13814950
> 
> 赞同：0
> 
> 时间：2012-12-11T06:41:22.157
> 
> 标签：css, menu

CSS

```
#menu2
{
background: black;
float: left;
list-style: none;
margin: 0;
padding: 0;
width: 220px;
}
#menu2 li
{
margin: 0;
padding: 0;
}
#menu2 a
{
border-bottom: 1px solid #393939;
color: #ccc;
display: block;
margin: 0;
padding: 9px 16px;
text-decoration: none;
}

#menu2 a:hover
{
background: black url("../images/select.png") left center no-repeat;
color: #fff;
padding: 9px 16px;
}

#menu2 a:active
{
background: red;
color: #fff;
padding: 9px 16px;
} 
```

jQuery

```
<script type="text/javascript">

    $(document).ready(function() {
        $("#menu2 li a").click(function() {
            $(".active").removeClass("active");
            $(this).addClass('active');
        });
    });
</script> 
```

HTML

```
 <ul id="menu2">
            <li><a href="Clientlist.aspx">Home</a></li>
            <li><a href="company.aspx">About us</a></li>
            <li><a href="CreateInvoice.aspx">Contacts</a></li>
        </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:43:22.057

把这个`#menu2 a:active`换成这个`#menu2 a.active`

**像这样**

**替换这个**

```
#menu2 a:active
{
background: red;
color: #fff;
padding: 9px 16px;
} 
```

**进入这个**

```
#menu2 a.active
{
background: red;
color: #fff;
padding: 9px 16px;
} 
```

**[演示](http://jsfiddle.net/mkgaJ/)**

**[主动导航更多信息](http://css-tricks.com/snippets/jquery/add-active-navigation-class-based-on-url/)**

# java - 将二维数组从一种方法传递到另一种方法

> ID：13814954
> 
> 赞同：1
> 
> 时间：2012-12-11T06:41:37.587
> 
> 标签：java, arrays, parameters

编程语言：Java

编辑：Vim

我一直在尝试做一个包含二维数组的任务。我一直在苦苦挣扎，因为这是我第二次使用任何类型的数组。无论如何，我只是有一些问题，我希望这里有人可以为我解决。

1）这就是您将双数组传递给另一个方法的方式吗？

这是我的布尔数组：

```
boolean[][] TempGrid = new boolean[GRIDSIZE][GRIDSIZE]; 
```

这就是我一直试图通过它的方式。

```
countNeighbors(TempGrid[][]); 
```

这是接受数组的方法：

```
 public static int countNeighbors ( final boolean[][] grid, final int row, final int col ) 
```

但是，当我编译时，我收到一条错误消息：

```
error: '.class' expected
     countNeighbors(TempGrid[][]);
                                ^
1 error 
```

我对 .class 错误进行了一些研究，例如：

- [http://www.dreamincode.net/forums/topic/70299-class-expected-error/](http://www.daniweb.com/software-development/java/threads/213357/pass-2-dimensional-array-into-method)

- [http://stackoverflow.com/questions/12309220/class-error-in-java-applet](http://www.daniweb.com/software-development/java/threads/213357/pass-2-dimensional-array-into-method)

- [http://www.daniweb.com/software-development/java/threads/213357/pass-2-dimensional-array-into-method](http://www.daniweb.com/software-development/java/threads/213357/pass-2-dimensional-array-into-method)

和各种其他网站/论坛。他们提出的解决方案要么不起作用，要么导致我的程序出现更多问题。

顺便说一句，这是整个方法：

```
 public static void genNextGrid ( boolean[][] grid )
{

     boolean[][] TempGrid = new boolean[GRIDSIZE][GRIDSIZE];

     TempGrid[GRIDSIZE][GRIDSIZE] = grid[GRIDSIZE][GRIDSIZE];

     countNeighbors(TempGrid);

    for(int row = 1; row < 18; row++)
{

        countNeighbors(row);

        for(int col = 1; col < 18; col++)
{

            countNeighbors(col);

            if(n == 3)
            {
                TempGrid[row][col] = true;
            }
            else if(n == 2 || n == 3)
            TempGrid[row][col] = true;
            }
            else
            {
                TempGrid[row][col] = false;
            }

        }
    }

} 
```

我试图从中删除`[][]`，`countNeighbors(TempGrid[][]);`所以它看起来像：

```
countNeighbors(TempGrid); 
```

但给了我3个错误

```
 error: method countNeighbors in class Life cannot be applied to given types;
     countNeighbors(TempGrid);
     ^
 required: boolean[][],int,int
found: boolean[][]
reason: actual and formal argument lists differ in length

error: method countNeighbors in class Life cannot be applied to given types;
        countNeighbors(row);
        ^
required: boolean[][],int,int
found: int
reason: actual and formal argument lists differ in length

 error: method countNeighbors in class Life cannot be applied to given types;
            countNeighbors(col);
            ^
  required: boolean[][],int,int
 found: int
 reason: actual and formal argument lists differ in length 
```

-提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:44:53.210

是的，第二种方式是正确的方式，即

```
 countNeighbors(TempGrid); 
```

你后来的错误是说你所需的参数数量不匹配，因为

```
public static int countNeighbors ( final boolean[][] grid, final int row, final int col ) 
```

该`countNeighbors`方法需要 3 个参数，而您只传递了 1 个。验证您需要传递给此方法的内容，或者如果不需要，则删除它们。它还返回 a `int`，您需要将其分配回某物以供进一步使用。我设想它是变量`n`，您打算将其用于。

您需要将最内层循环中的方法调用为

```
for(int row = 1; row < 18; row++) {
    for(int col = 1; col < 18; col++) {
        n = countNeighbors(TempGrid,row,col);
        ...

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:44:42.520

声明变量时只需要 [][] 。之后只使用名称（即 TempGrid）

因此，如果您的方法采用 2D 数组并命名为 foo，则：`foo(TempGrid)`将对 TempGrid 的引用传递给 foo。

在 Java 中，一切都是对象，因此您的方法必须在类中声明。

恕我直言，您的方法应如下所示：

```
public static void genNextGrid ( boolean[][] grid )
    {

        boolean[][] TempGrid = new boolean[GRIDSIZE][GRIDSIZE];

        TempGrid = grid;

        for(int row = 1; row < 18; row++)
        {

            for(int col = 1; col < 18; col++)
            {

                int n = countNeighbors(TempGrid, row, col);

                if(n == 3)
                {
                    TempGrid[row][col] = true;
                }
                else if(n == 2 || n == 3)
                    TempGrid[row][col] = true;
                else
                {
                    TempGrid[row][col] = false;
                }
            }

        }
    } 
```

# sitecore - 获取与 Sitecore 中的 URL 匹配的项目

> ID：13814955
> 
> 赞同：6
> 
> 时间：2012-12-11T06:41:46.990
> 
> 标签：sitecore

在我正在构建的站点中，我试图使用引用来验证 AJAX 请求来自正确的 URL。

为此，我想让 Sitecore 将 URL 解析为项目。例如，

`http://www.mysite.com/abc/def`

可能会解析为路径中的项目

`sitecore/Content/MySite/Home/abc/def`

在我的代码中推荐的解决方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T21:58:40.113

感谢所有的答案，但他们都没有做我需要的一切。这对我有用。

```
var url = new Uri(...);

// Obtain a SiteContext for the host and virtual path
var siteContext = SiteContextFactory.GetSiteContext(url.Host, url.PathAndQuery);

// Get the path to the Home item
var homePath = siteContext.StartPath;
if (!homePath.EndsWith("/"))
    homePath += "/";

// Get the path to the item, removing virtual path if any
var itemPath = MainUtil.DecodeName(url.AbsolutePath);
if (itemPath.StartsWith(siteContext.VirtualFolder))
    itemPath = itemPath.Remove(0,siteContext.VirtualFolder.Length);

// Obtain the item
var fullPath = homePath + itemPath;
var item = siteContext.Database.GetItem(fullPath); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-24T15:17:08.287

这个答案更适合其他访问这个 SO 问题的访问者。对于 Sitecore 8，您可以这样做：

```
new Sitecore.Data.ItemResolvers.ContentItemPathResolver().ResolveItem(<string path>) 
```

where`<string path>`就像 sitecore 能够为您生成的任何本地路径（或相对 url，如果您愿意的话）字符串。`Item`当使用显示名称值而不是项目名称时（如果您有一个多语言站点，可能会出现这种情况），这对于实际从数据库中检索相应的内容非常方便。

在我的情况下，我使用它来显示一个有效的面包屑，其中父路径确实添加了上下文语言项版本，但请求的页面没有要呈现的上下文语言版本。`Sitecore.Context.Database.GetItem(<string path>)`无法解析基于显示名称的路径，而 ResolveItem 方法确实...搜索了一天以寻找关于这种情况的好答案。

*现在问自己，为什么这个用得不多……？对于拥有一棵大树的站点来说，这可能是一个昂贵的查询。这是你自己要考虑的事情。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:28:53.023

并没有真正得到您想要做的事情（使用您的 AJAX 请求等），但是如果您想`http://www.mysite.com/abc/def`解析该项目`sitecore/content/MySite/Home/abc/def`，您需要`<site>`像这样在 web.config 中配置您的：

```
<site name="MySite" hostName="www.mysite.com" rootPath="/sitecore/content/MySite" startItem="/Home" *other attributes here* /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T09:04:25.520

您可以使用该方法`ItemManager.GetItem(itemPath, language, version, database, securityCheck)`根据其（完整）路径解析项目。

# android - 在 Google Play 中从服务器 RPC:s-7:AEC-0 检索信息时出错？

> ID：13814958
> 
> 赞同：40
> 
> 时间：2012-12-11T06:42:02.577
> 
> 标签：android

我让我的测试帐户在我的设备中同步并准备测试应用程序。

当我即将在我的应用程序中购买产品时，谷歌播放会在输入信用卡详细信息后提示我继续。

在设备中输入卡的详细信息后，显示错误为

> 从服务器检索信息时出错 [RPC:s-7:AEC-0]

我正在使用 Google Play 版本 3.10.9

而且我已经尝试卸载谷歌播放的更新删除我的帐户并重新启动设备但没有使用一次又一次发现相同的错误任何人都可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-11T07:15:51.057

检查您是否使用的是最新版本的 Google Play。

***或者***

按照以下步骤。

RPC:AEC:0 错误被称为 CPU/RAM/Device/Identity 故障。

摆脱此错误的唯一可能方法是，

转到设置>应用程序> Play商店>清除数据和清除缓存。

转到帐户>谷歌>删除帐户。

重启设备。

再次设置>帐户>谷歌>登录。

参考[这个](http://forums.androidcentral.com/google-nexus-7-tablet-forum/224884-google-play-error-solution-rpc-s-5-aec-0-a-2.html)链接

***或者***

如果上述方法均无效，则恢复出厂设置是最后一个工作选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T00:35:22.037

我也有这个问题......原来我的信用卡信息需要更新到我的新到期日期。

这些说明来自我手机上的故障排除。

在计算机（不是平板电脑或手机）上登录您的[Google 电子钱包](http://wallet.google.com/manage)，点击付款方式，然后进行编辑以编辑信息。希望它也适合你！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-12T11:06:30.337

当我在我的 KitKat 上遇到同样的问题时，这对我有用。从设备中删除您的帐户（设置 > 帐户 > Google > 删除帐户）

删除以下数据：设置 > 应用程序 > 所有 > 下载 > 删除数据。设置>应用程序>所有> Play商店>删除数据。设置>应用程序>所有>谷歌服务框架（或者如果他们有英文：谷歌服务框架）>删除数据。

再次登录，它已为我修复。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-19T07:31:53.520

我在 android**中使用应用内购买**时遇到了类似的错误。我的错误是我在实例化购买时使用了错误的购买 ID。

```
public static final String PRODUCT_ID_ASTRO_Match = "android.test.product";//wrong id not in play store dev console 
```

将其替换为：

```
public static final String PRODUCT_ID_ASTRO_Match = "android.test.purchased"; 
```

它奏效了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-16T13:24:36.567

在 BlueStacks 模拟器上为我工作了以下解决方案

转到“<strong>设置”->“<strong>应用程序”->“<strong>管理应用程序”并选择“<strong>全部”</p>

转到“<strong>Google Play 服务框架”并选择“<strong>清除数据”和“<strong>清除缓存”以删除所有数据。

转到“<strong>Google Play 商店”并选择“<strong>清除数据”和“<strong>清除缓存”以删除有关 Google Play 商店的所有数据。

转到“<strong>设置”->“<strong>帐户”->“<strong>Google”->选择“<strong>您的帐户”</p>

转到“<strong>菜单”并选择“<strong>删除帐户”。

现在“<strong>重新启动”您的移动设备。

转到“<strong>菜单”和“<strong>添加您的帐户”。

并尝试执行更新或下载。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T10:08:13.903

我遇到了同样的问题 - 在我将应用程序上传到 Play 控制台后的大约 3 小时内，它自行解决了。[根据谷歌](http://developer.android.com/training/in-app-billing/test-iab-app.html)：

> 警告：上传 APK for Google Play 后可能需要 2-3 小时才能识别您更新的 APK 版本。如果您在上传的 APK 被 Google Play 识别之前尝试测试您的应用程序，您的应用程序将收到一条“已取消购买”响应，并显示错误消息“此版本的应用程序未启用应用内结算。

虽然消息不一样，但我怀疑根本原因是一样的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-27T03:55:38.120

作为最后的手段，如果所有其他建议都失败了，请备份所有数据并恢复出厂设置。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-04T11:03:20.340

`Error while retrieving information from server. [RPC:S-5:AEC-0]`经过这些步骤后，同样的问题得到了解决：

1.  通过网络更改您的 Google 帐户的密码。
2.  等待`Sign-in error`设备上的通知。
3.  输入新密码，问题应该消失了。

实际上，这对我有帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-06T02:55:34.333

检查测试设备上的应用程序和 Google Play 开发者控制台是否真正匹配。

我可能有一些特殊情况，但它可能会对某人有所帮助：首先，我已将一个包上传到 Google Play，该包是我使用 ant 构建脚本创建的。其次，在测试设备上，我调试了相同的应用程序（或者我认为是这样）。我收到*“从服务器检索信息时出错。[RPC:S-7:AEC-0]”*，并且 logcat 显示：

> 解组时找不到类：com.google.android.finsky.billing.lightpurchase.PurchaseParams，e：java.lang.ClassNotFoundException：com.google.android.finsky.billing.lightpurchase.PurchaseParams

问题是在 ant 脚本中，我有`aapt`修改包名的命令。但是，Eclipse 不运行该命令，因此 Google Play 中的应用程序与测试设备之间的包名称不匹配。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-08T15:46:01.080

此错误也可能是由于您的 google 帐户已经链接了 Google Wallet/Google Checkout 帐户。现有帐户不能使用，例如它是商家帐户。我花了 20 分钟才弄清楚。将新的 Google 帐户添加到您的设备，然后重新启动。在 Google Play 中切换到您的新帐户。购买您的应用程序/书籍/电影。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-06-08T01:51:58.787

致电您的银行并要求他们激活您的卡以使用互联网。这就是帮助我的原因。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-06-11T18:51:25.897

如果您在阿根廷等国家/地区，您应该致电您的银行并确认您的卡已获得国际购买授权。该国家/地区的某些信用卡（例如预付信用卡）仅被授权用于国内购买和在邻国购买。他们确实在网上工作，但必须从邻国购买。这意味着您可能会收到此消息，因为您的卡有效但被拒绝。我知道，因为这件事今天发生在我身上。希望这有助于其他人了解他们的系统告诉他们什么。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-09-26T12:56:08.707

由于我的谷歌帐户中从未有付费应用程序，我认为它与信用卡无关，也与谷歌服务中的缓存无关。

对我有用的技巧：

1.  来回更改 Android 日期一次（手动）。
2.  重新同步我的谷歌帐户（手动）。
3.  转到 Play 应用程序并下载。这次一切正常。

我确实注意到闲置 2-3 小时也会自行修复。

# drupal - 过期标头不起作用drupal

> ID：13814965
> 
> 赞同：1
> 
> 时间：2012-12-11T06:42:42.700
> 
> 标签：drupal, mod-expires, expires-header

我在 .htaccess 文件中设置过期标头，如下所示

ExpiresActive On
ExpiresDefault A1209600

它适用于文档根目录中的所有文件，但我有一个单独的已安装驱动器，用作 drupal 文件系统（私有），我在其中存储我的 jcarousel 图像，对于这些图像，过期标头不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:46:43.037

您的私有文件系统将拥有由 Drupal 创建的自己的 .htaccess 文件。尝试在那里添加相同的行。

```
SetHandler Drupal_Security_Do_Not_Remove_See_SA_2006_006
Deny from all
Options None
Options +FollowSymLinks    

ExpiresActive On 
ExpiresDefault A1209600 
```

# node.js - 从集合中移除骨干网

> ID：13814971
> 
> 赞同：3
> 
> 时间：2012-12-11T06:43:25.360
> 
> 标签：node.js, backbone.js

我有一个收藏品，但我无法从中删除特定型号。

使用 fetch() 从服务器中提取集合，然后我用数据填充视图。该集合仅包含一个 ID 列表。获取后的集合如下所示：

```
d {**length: 9**, models: Array[9], _byId: Object, _byCid: Object, _ioEvents: Object…}
_byCid: Object
_byId: Object
_callbacks: Object
_ioEvents: Object
addRoom: function () { [native code] }
joinRoom: function () { [native code] }
length: 9
models: Array[9]
0: d
_callbacks: Object
_escapedAttributes: Object
_pending: Object
_previousAttributes: Object
_silent: Object
attributes: Object
**_id: "50c6cf36ece4f5f327000006"**
__proto__: Object
changed: Object
cid: "c3"
collection: d
__proto__: x
1: d
2: d
3: d
4: d
5: d
6: d
7: d
8: d
length: 9
__proto__: Array[0]
removeRoom: function () { [native code] }
__proto__: x 
```

现在，当我从集合中删除模型时，我会这样做

```
// called from the collection class so this = collection
this.remove({_id:data._id}); 
```

什么都没有发生，没有错误，什么都没有。当我记录集合时，它具有完全相同的数据。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T07:20:40.340

这不是如何`Collection#remove`工作的。来自[精美手册](http://backbonejs.org/#Collection-remove)：

> **消除** `collection.remove(models, [options])`
> 
> 从集合中删除一个模型（或模型数组）。

这是一个对象：

```
{_id: data._id} 
```

不是模型。即使您没有[`model`](http://backbonejs.org/#Collection-model)为您的集合指定属性，该集合仍将包含`Backbone.Model`实例。因此，您必须将您的模型转换`data._id`为模型，然后将该模型交给`remove`：

```
var m = collection.where({ _id: data._id})[0];
collection.remove(m); 
```

理想情况下，您会为您的收藏创建一个模型“类”，以便您可以设置[`idAttribute`](http://backbonejs.org/#Model-idAttribute)：

```
var M = Backbone.Model.extend({ idAttribute: '_id' });
var C = Backbone.Collection.extend({ model: M }); 
```

然后您可以使用[`Collection#get`](http://backbonejs.org/#Collection-get)以下方式查找模型`_id`：

```
var m = collection.get(data._id);
collection.remove(m); 
```

# visual-studio-2010 - 在 Visual C++ 2010 中设置 x64

> ID：13814980
> 
> 赞同：1
> 
> 时间：2012-12-11T06:43:59.037
> 
> 标签：visual-studio-2010, windows-7-x64, winapi

我正在尝试使用 Visual Studion 2010 学习 x64 程序集。

我正在关注这个视频教程：[x64 Assembly and C++ Tutorial 1: Getting into x64 ASM from C++](http://www.youtube.com/watch?v=guru397zg2g&feature=share&list=PL0C5C980A28FEE68D)

正如它所说，我安装了 Visual Studio 2010、Windows 7 SDK 3.5（ISO 安装）并编辑了配置。

但是当我编译代码时，出现以下错误：

```
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\masm.targets(49,5): error MSB3721: The command "ml64.exe /c /nologo /Zi /Fo"x64\Debug\asm.obj" /W3 /errorReport:prompt  /Taasm.asm" exited with code 1. 
```

这是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T02:38:20.253

Look at the assembler output above that line, or build the .asm file by itself.

You should see warnings generated by the assembler eg. "somefile.asm(564): warning A6004: procedure argument or local not referenced :"

Deal with those warnings. The "exited with code 1" is not very explanatory.

# xslt - Umbraco xsltSearch 如何排除结果中显示的 umbracoRedirect 项目

> ID：13814985
> 
> 赞同：1
> 
> 时间：2012-12-11T06:44:30.087
> 
> 标签：xslt, umbraco

如何排除已使用“umbracoRedirect”重定向到其他页面的页面，使其不会显示在 xsltSearch 结果中？

```
<xsl:variable name="possibleNodes" select="$items/descendant-or-self::*[
     @isDoc
     and string(umbracoNaviHide) != '1'
     and name() != 'ImageGalleryPhoto'
     and string(umbracoRedirect) != '1' <!-- How to hide umbracoRedirect from search ?? -->
     and count(attribute::id)=1
     and (umbraco.library:IsProtected(@id, @path) = false()
     or umbraco.library:HasAccess(@id, @path) = true())
]"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:54:30.913

除了将逻辑放在 XSLT 中，更好的方法是首先防止具有属性 umbracoRedirect 的项目（以及任何其他非必需项目）被索引。这样你就不必在你的宏中计算出逻辑。

如果你使用一个事件，你可以捕获一个被索引的项目，如果它有属性集，你可以取消这个过程。

```
void indexer_GatheringNodeData(object sender, IndexingNodeDataEventArgs e)
{
    if (e.IndexType == IndexTypes.Content)
    {
        var node = e.Node;
        var redirectElement = node.Element("umbracoRedirect");

        if (redirectElement != null && redirectElement.Value == "1")
            return;
    }
} 
```

事件处理程序的实现方式在最近几个版本中发生了非常轻微的变化，因此值得查看文档以了解您的特定版本的更改。有关标准方法[的示例](http://our.umbraco.org/wiki/reference/api-cheatsheet/using-applicationbase-to-register-events/event-examples)，请参见此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:33:16.497

感谢 Umbraco 论坛上的 Chriztian Steinmeier：

```
<xsl:variable name="possibleNodes" select="
        $items//*[@isDoc]
        [not(umbracoNaviHide = 1)]
        [not(self::ImageGalleryPhoto)]
        [not(normalize-space(umbracoRedirect))]
        [not(umbraco.library:IsProtected(@id, @path)) or umbraco.library:HasAccess(@id, @path)]
" /> 
```

# php - CURLOPT_RETURNTRANSFER 不返回响应

> ID：13814988
> 
> 赞同：0
> 
> 时间：2012-12-11T06:44:45.187
> 
> 标签：php, apache, curl, instagram

我试图查询 Instagram API，但 CURLOPT_RETURNTRANSFER 似乎没有按预期的方式工作。CURLOPT_RETURNTRANSFER 已设置为 true，但我没有得到响应，我得到的只是一个布尔值。从我读到的 CURLOPT_RETURNTRANSFER 到 true 我在下面这样做了。请指教。谢谢

```
public function __construct($uri) {
    $this->handler = curl_init($uri);
           $this->_setOptions();
}

protected function _setOptions() {
    curl_setopt($this->handler, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($this->handler, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($this->handler, CURLOPT_USERAGENT, self::DEFAULT_USER_AGENT);

}

public function getResponse() {
    $response = curl_exec($this->handler);
    curl_close($this->handler);
    return $response;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-27T19:58:47.323

您可以通过如下编写函数来解决它：

```
protected function _setOptions() {
    curl_setopt($this->handler, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($this->handler, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($this->handler, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($this->handler, CURLOPT_USERAGENT, self::DEFAULT_USER_AGENT);
} 
```

这样可以避免检查 ssl 协议。

作为一个额外的选项，您可以设置**CURLOPT_SSL_VERIFYHOST**：

```
curl_setopt($this->handler, CURLOPT_SSL_VERIFYHOST, 0); 
```

建议在生产环境中始终在安全的 SSL 条件下工作，如[文档](http://php.net/manual/en/function.curl-setopt.php)中所述，应将 CURLOPT_SSL_VERIFYHOST 设置为 2 以确保安全的 SSL 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:14:19.273

立即使用`print_r(curl_getinfo($this->handler));`以`curl_exec($this->handler);`找出问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:04:28.883

你是在调用 new ClassName('http://someurl.com') 之后调用 getResponse() 方法吗？

尝试这个

```
$x = new ClassName('http://www.google.com');
var_export($x->getResponse(); 
```

编辑：您也可以调用添加错误输出方法来查看是否发生了一些 curl 错误

```
public function last_error() {
    echo curl_error($this->handler);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:56:48.963

你的布尔值是假的吗？

如果它是假的，你一定有一个错误。

在 curl_exec 行之后添加以下内容：

```
if(curl_errno($this->handler)) 
{
   echo curl_error($this->handler);
} 
```

# php - php字符串爆炸成特定数组

> ID：13814991
> 
> 赞同：0
> 
> 时间：2012-12-11T06:44:54.990
> 
> 标签：php

以下是保存联系信息的字符串。该字符串是动态的，即有时新字段，例如：手机号码可能会添加或旧字段说：电话号码可能会删除。

```
 <?php $str = 
                                "tel: (123) 123-4567
                                fax : (234) 127-1234
                                email : abc@a.a";
                                $newStr =  explode(':', $str);
                                echo '<pre>'; print_r($newStr); 
                              ?> 
```

代码的输出是：

```
 Array
                            (
                                [0] => tel
                                [1] =>  (123) 123-4567
                                                                fax 
                                [2] =>  (234) 127-1234
                                                                email 
                                [3] =>  abc@a.a
                            ) 
```

但所需的输出格式如下：

```
 Array
                            (
                                [tel] => (123) 123-4567
                                [fax] =>  (234) 127-1234            
                                [email] =>  abc@a.a
                            ) 
```

我尝试以多种方式爆炸它......但没有奏效。请指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T06:48:37.800

```
$txt = 
                            "tel: (123) 123-4567
                            fax : (234) 127-1234
                            email : abc@a.a";
$arr = array();
$lines = explode("\n",$txt);
foreach($lines as $line){
    $keys = explode(":",$line);
    $key = trim($keys[0]);
    $item = trim($keys[1]);
    $arr[$key] = $item;
}
print_r($arr); 
```

[**密码键盘**](http://codepad.org/LH72eUd3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T07:01:41.973

[这是使用正则表达式](http://www.regular-expressions.info)的更短的方法。

```
preg_match_all('/(\w+)\s*:\s*(.*)/', $str, $matches);
$newStr = array_combine($matches[1], $matches[2]);

print_r($newStr); 
```

结果：

```
Array
(
    [tel] => (123) 123-4567
    [fax] => (234) 127-1234
    [email] => abc@a.a
) 
```

[这里的例子](http://codepad.viper-7.com/G5LQEe)

但是，此示例假定每个数据对位于您提供的字符串中的单独行上，并且“键”不包含空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:53:23.397

使用带有分隔符“:”和“\n”（换行符）的 preg_split：

```
$newStr = preg_split("\n|:", $str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T06:47:56.607

```
foreach( $newStr as $key=>$value){
      echo $key;
      echo $value;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T06:50:36.677

```
<?php
    $str = 
    "tel: (123) 123-4567
    fax : (234) 127-1234
    email : abc@a.a";

$contacts = array();
$rows = explode("\n", $str);
foreach($rows as $row) {
    list($type, $val) = explode(':', $row);
    $contacts[trim($type)] = trim($val);
}
var_export($contacts); 
```

返回

```
array (
  'tel' => '(123) 123-4567',
  'fax' => '(234) 127-1234',
  'email' => 'abc@a.a',
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T07:00:36.890

```
$str =
    "tel: (123) 123-4567
    fax : (234) 127-1234
    email : abc@a.a";

$array = array();
foreach (preg_split('~([\r]?[\n])~', $str) as $row)
{
    $rowItems = explode(':', $row);
    if (count($rowItems) === 2)
        $array[trim($rowItems[0])] = trim($rowItems[1]);
} 
```

您必须使用 preg_split 因为每个系统上可能有不同的行尾。字符串也有可能无效，因此您应该处理它（foreach 循环中的条件）

# vba - 将批处理文件命令放入 VBA Excel

> ID：13814994
> 
> 赞同：0
> 
> 时间：2012-12-11T06:45:05.780
> 
> 标签：vba, excel, batch-file

这是批处理文件代码：

```
@echo off >summary.txt (
    for %%F in (*chkpackage.log) do findstr /l %1 "%%F" nul||echo %%  F:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A:N/A) 
```

这是调用批处理文件的 VBA Excel 中的代码：

```
FileSet = Sheet1.Range("C13")
txtFpath = Sheet1.Range("C7").Value
FilePath = txtFpath & "\res.bat"

ChDrive "D"
RSP = Shell(Environ$("COMSPEC"), vbNormalFocus)
Application.Wait Now + TimeValue("00:00:03")
SendKeys "CD " & txtFpath & "{ENTER}", True
Application.Wait Now + TimeValue("00:00:03")
SendKeys "start " & FilePath & " " & FileSet & "{ENTER}", True
Application.Wait Now + TimeValue("00:00:03")
SendKeys "exit " & "{ENTER}", True
Application.Wait Now + TimeValue("00:00:03")
SendKeys "exit " & "{ENTER}", True 
```

但我不想使用批处理文件。我想将其更改为在 VBA 上使用的命令。所以我只能使用 VBA 并运行命令行，而不是使用 VBA 来调用批处理和命令行。

简单的解释是我想将该命令放在批处理文件中到 Excel-VBA 并通过使用 VBA 调用`cmd`和自动输入该命令来运行它以`cmd`喜欢该`Sendkeys`代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T07:43:16.070

您可以添加对`Microsoft Scripting Runtime`（**工具 - >** VBA IDE 中的引用）的引用，它提供[FileSystemObject](http://msdn.microsoft.com/en-us/library/z9ty6h50%28v=VS.84%29.aspx)并允许您执行以下操作：

```
Dim fso As New FileSystemObject
Dim fle As Variant
For Each fle In fso.GetFolder(txtFpath).Files
    'processing here
Next 
```

[您可以使用Like](http://msdn.microsoft.com/en-us/library/swf8kaxw.aspx)运算符将文件限制为特定模式：

```
For Each fle In fso.GetFolder(txtFpath).Files
    If fle.Name Like "*chkpackage.log" Then
        'processing here
    End If
Next 
```

您可以使用[OpenAsTextStream](http://msdn.microsoft.com/en-us/library/hwfw5c59%28v=vs.84%29.aspx)方法获取 TextStream 对象，并使用**ReadAll**方法读取文件内容：

```
For Each fle In fso.GetFolder(txtFpath).Files
    If fle.Name Like "*chkpackage.log" Then
        Dim txt As TextStream, contents As String
        Set txt = fle.OpenAsTextStream(ForReading)
        contents = txt.ReadAll
        txt.Close

        'process contents of file here
    End If
Next 
```

您可以`Split(contents, vbCrLf)`在解析之前使用将内容拆分为行数组（使用`vbLf`或者`vbCr`如果行分隔符是 Unix/Mac 而不是 Windows）。

或者，您可以使用该`ReadLine`方法逐行读取文件。您需要检查该`AtEndOfStream`属性以确保您没有尝试读取文件末尾：

```
'Within the For Each loop
Dim txt As TextStream, currentLine As String
Set txt = fle.OpenAsTextStream(ForReading)
Do While Not txt.AtEndOfStream
    currentLine = txt.ReadLine

    'process current line here
Loop
txt.Close 
```

# java - Eclipse Super CSV 无法正确识别方法

> ID：13814997
> 
> 赞同：1
> 
> 时间：2012-12-11T06:45:11.067
> 
> 标签：java, eclipse, supercsv

我刚刚在一个我刚刚上交并且工作得很好的项目中使用了超级 csv。我的构建路径中有 jar，一切都像第一个项目一样。那么我的问题在哪里，在第一个项目中，我使用了

```
void write(Object... columns) throws IOException; 
```

方法，它工作得很好。我输入了不同的值，行 int，int，long，long，long，long，long，long 是我第一次输入的，它工作得很好。 ..

现在在我的第二个项目中，在相同的工作空间中，eclipse 识别相同的方法

```
void write(Object[] columns) throws IOException; 
```

我真的不知道如何解决这个问题，任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:34:10.690

我相信 Rekin 是在正确的轨道上。

如果您的项目的编译器合规性低于 1.5，那么[var-arg](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)方法将失去其在 Eclipse 中的可变参数功能，并且会在它们真正实现时出现（作为数组）。

这可能是 Java 初学者需要了解的关于 var-args 的关键信息——它们实际上只是一种简化将数组传递给方法的便捷方式。您仍在传入一个数组，如果您不提供任何 var-args，那么您传入的数组实际上是`null`.

Super CSV 是为 Java 1.5 编译的，因此您不应该将它与较旧的 JDK 一起使用。修复此问题（右键单击您的项目，它位于 Java Compiler 下）应该会恢复 Eclipse 中的 var-arg 表示法。

# caching - 内存地址的格式

> ID：13814998
> 
> 赞同：0
> 
> 时间：2012-12-11T06:45:13.503
> 
> 标签：caching, mapping, cpu-architecture

我不太明白如何格式化内存缓存地址。例如：

> 一个直接映射缓存由 256 个插槽组成。主存储器包含 32K 块，每块 16 个字。缓存的访问时间为 10 ns，填充一个缓存槽所需的时间为 200 ns。不使用加载；即当在缓存中没有找到访问的字时，将整个块带入缓存，然后通过缓存访问该字。最初，缓存是空的。注意：当提到内存时，1K = 1024。

由此我知道，对于直接映射缓存，格式的字宽将是 5 位，因为 2^4 可以容纳 16 个字，插槽大小也将是 2^8，因为我们给出的缓存是 256 个插槽。

我如何获得标签字段的宽度？此外，这将如何改变集合关联映射和关联映射？