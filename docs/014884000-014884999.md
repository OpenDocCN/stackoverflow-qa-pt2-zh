# StackOverflow 问答 14884000-14884999

# windows - 使用 PowerShell 创建 AppPool 不设置 AppPool Identity

> ID：14884013
> 
> 赞同：17
> 
> 时间：2013-02-14T21:05:10.023
> 
> 标签：windows, iis, powershell, application-pool

我正在尝试使用 PowerShell 在 IIS 中创建应用程序池。在网上搜索后，我创建了以下测试脚本：

```
Import-Module WebAdministration

$siteName = "TestAppPool"
$userAccountName = "Domain\UserName"
$userAccountPassword = "MyPassword"

if(!(Test-Path ("IIS:\AppPools\" + $siteName)))
{
     $appPool = New-Item ("IIS:\AppPools\" + $siteName)

     #Display Default AppPool Settings
     "AppPool = " + $appPool
     "UserName = " + $appPool.processModel.userName
     "Password = " + $appPool.processModel.password
     "Runtime = " + $appPool.managedRuntimeVersion

     $appPool.processModel.userName = $userAccountName
     $appPool.processModel.password = $userAccountPassword
     $appPool.managedRuntimeVersion = "v4.0"
     $appPool | Set-Item

     #Display Updated AppPool Settings
     "AppPool = " +$appPool
     "UserName = " + $appPool.processModel.userName
     "Password = " + $appPool.processModel.password
     "Runtime = " + $appPool.managedRuntimeVersion
} 
```

当我运行脚本时，用户名和密码不会更新为我设置的值。

这是两个打印块的结果

```
#Display Default AppPool Settings
AppPool = Microsoft.IIs.PowerShell.Framework.ConfigurationElement
UserName = 
Password = 
Runtime = v2.0

#Display Updated AppPool Settings
AppPool = Microsoft.IIs.PowerShell.Framework.ConfigurationElement
UserName = 
Password = 
Runtime = v2.0 
```

在 IIS 中查看，应用程序池显示 .Net 框架已更新，但身份仍设置为 ApplicationPoolIdentity。它应该是域\用户名。

![在此处输入图像描述](../Images/88a6054bea7770f2141783d96ec43a53.png)

我是机器上的管理员，我在管理员模式下运行 PowerShell。关于我可能缺少什么以使其正常工作的任何想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-14T22:32:24.783

您需要更改流程模型身份类型以接受用户帐户而不是默认的 ApplicationPoolIdentity，这可以按如下方式完成：

```
Set-ItemProperty -Path IIS:\AppPools\TestAppPool -Name processmodel.identityType -Value 3
Set-ItemProperty -Path IIS:\AppPools\TestAppPool -Name processmodel.username -Value Domain\UserName
Set-ItemProperty -Path IIS:\AppPools\TestAppPool -Name processmodel.password -Value MyPassword 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-26T20:15:32.077

我在需要将 appPool 设置为之后遇到了这个问题`NetworkService`，对于其他需要这样做的人来说，这里是 IIS 7.5 将你的 appPool 设置为的语法`NetworkService`

```
$pool = get-item("IIS:\AppPools\YOURAPPPOOLNAME");
$pool | Set-ItemProperty -Name "ProcessModel.IdentityType" -Value 2 
```

**注意：在 IIS 7.5 中，`NetworkService`从值 3 切换到值 2。**

更多信息`Process Model`可以在这里找到：[http ://www.iis.net/configreference/system.applicationhost/applicationpools/add/processmodel](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/processmodel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-16T18:22:26.633

以上从未对我有用，这确实：

```
import-module webadministration
$pool = Get-Item "IIS:\AppPools\apppoolname"
$pool.processmodel.identityType = 3
$pool.processmodel.username  = "username"
$pool.processmodel.password = "password"
$pool | set-item 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-10T18:52:19.120

我在设置身份时遇到了类似的问题。最后，我检查了将密码设置为：

```
Get-ItemProperty $appPool -name "processmodel.password" 
```

并且只看到了部分密码。原来我在密码字符串参数中使用了双引号，而密码以 '$' 开头，这导致它被解析为变量。

我将双引号更改为单引号，它起作用了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T23:05:49.417

在我的环境中，这些答案对我不起作用。我正在尝试使用 MSA 作为我的应用程序池的身份。我可以在控制台中运行所有命令（@musaab-al-okaidi 的答案）而不会出现任何错误，但经过进一步检查，没有用户名与应用程序池相关联。

我最终`applicationHost.config`直接修改了文件（首先进行备份！）为应用程序池添加正确的身份。

对于那些不知道的人，applicationHost.config 可以在以下位置找到：`c:\Windows32\inetsrv\config`

在`applicationHost.config`文件中，查找您的应用程序池条目，并添加一个“用户名”属性，如下所示：

```
<system.applicationHost>
    <applicationPools>
        <add name="someAppPool" autoStart="true" managedRuntimeVersion="4.0" startMode="AlwaysRunning">
            <processModel identityType="SpecificUser" userName="domain\username$" idleTimeout="00:00:00" />
        </add>
    </applicationPools>
</system.applicationHost> 
```

您也可以以类似的方式设置密码（由于我使用的是 MSA，因此无需在此处设置密码，因为 MSA 在 AD 中“管理”并安装在 IIS 框上）。

我还停止/启动了 IIS 服务器，以确保加载了新配置。

希望这会有所帮助。

# mediaelement.js - mediaelement.js - 视频缩放选项（例如“适合”或“填充”）

> ID：14884015
> 
> 赞同：5
> 
> 时间：2013-02-14T21:05:17.023
> 
> 标签：mediaelement.js

有谁知道**在**MEJS 播放器中缩放视频的方法，以便播放器本身可以处理任何信箱或列箱？类似于 JWPlayer 的“适合”和“填充”选项。

本质上，我有一个住在包装器中的播放器，我根据用户的屏幕分辨率调整包装器的大小。像这样：

```
<div id="video_dims_wrapper" style="width: 1280px; height: 720px;">
    <video id="video_player" width="1280" height="720" controls="controls" preload="none" autoplay="autoplay" style="width: 100%; height: 100%;">           

        <source type="video/mp4" src="my_video.mp4" />
        <source type="video/webm" src="my_video.webm" />

        //Flash fallback removed for brevity

    </video>
</div> 
```

然后我只调整 #video_dims_wrapper 的大小，并相应地调整包含在其中的 MEJS 元素（由于宽度：100%；高度：100%；样式声明）。

如果所有视频都具有相同的宽高比（在这种情况下为 16:9），这将很有效，但如果恰好有一个不同宽高比的视频，那么它不会**在**播放器中调整大小，而是缩放整个播放器尺寸向上。

我想要发生的是播放器始终保持 16:9 的纵横比，并且视频会缩放以适应播放器，并且播放器会根据需要对视频进行信箱或列框。

有人遇到这个吗？有什么解决办法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-18T12:38:33.757

我尝试在 Wordpress 环境中做同样的事情。很抱歉挖掘了这个，但我花了很长时间。但是在查看 mediaelement.js 的源代码时，我发现了这个属性：

// 通过 JS 而不是 CSS 设置尺寸 setDimensions: true; //（是默认属性）。

我只是在 init 时将其切换为 false （所以我没有编辑源文件）。并用css做造型。瞧！奇迹般有效 ：）。只能说这个时髦的脚本记录得很糟糕！当然，我在分销商网站上搜索了这样的房产并在谷歌上搜索了时间......但从未发现任何地方报道过。

希望我可以帮助某人；）。只是为了搜索引擎，我搜索了这些标签： Wordpress video letterbox embed flash fallback mediaelement.js wp-mediaelement.js

# python - 如何在 Python 3 中计算移动平均线？

> ID：14884017
> 
> 赞同：11
> 
> 时间：2013-02-14T21:05:19.097
> 
> 标签：python, python-3.x

假设我有一个清单：

```
y = ['1', '2', '3', '4','5','6','7','8','9','10'] 
```

我想创建一个计算移动 n 天平均值的函数。所以如果`n`是 5，我希望我的代码计算第一个 1-5，将其相加并找到平均值，即 3.0，然后继续 2-6，计算平均值，即 4.0，然后 3- 7、4-8、5-9、6-10。

我不想计算前n-1天，所以从第n天开始，它会计算前几天。

```
def moving_average(x:'list of prices', n):
    for num in range(len(x)+1):
        print(x[num-n:num]) 
```

这似乎打印出我想要的：

```
[]
[]
[]
[]
[]

['1', '2', '3', '4', '5']

['2', '3', '4', '5', '6']

['3', '4', '5', '6', '7']

['4', '5', '6', '7', '8']

['5', '6', '7', '8', '9']

['6', '7', '8', '9', '10'] 
```

但是，我不知道如何计算这些列表中的数字。有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-14T21:07:58.073

在旧版本的 Python 文档中有一个很棒的滑动窗口生成器，带有[`itertools`示例](http://docs.python.org/release/2.3.5/lib/itertools-example.html)：

```
from itertools import islice

def window(seq, n=2):
    "Returns a sliding window (of width n) over data from the iterable"
    "   s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   "
    it = iter(seq)
    result = tuple(islice(it, n))
    if len(result) == n:
        yield result    
    for elem in it:
        result = result[1:] + (elem,)
        yield result 
```

使用移动平均线是微不足道的：

```
from __future__ import division  # For Python 2

def moving_averages(values, size):
    for selection in window(values, size):
        yield sum(selection) / size 
```

针对您的输入运行此命令（将字符串映射为整数）给出：

```
>>> y= ['1', '2', '3', '4','5','6','7','8','9','10']
>>> for avg in moving_averages(map(int, y), 5):
...     print(avg)
... 
3.0
4.0
5.0
6.0
7.0
8.0 
```

要返回“不完整”集合的第一次迭代，只需稍微扩展`None`函数：`n - 1``moving_averages`

```
def moving_averages(values, size):
    for _ in range(size - 1):
        yield None
    for selection in window(values, size):
        yield sum(selection) / size 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T18:15:14.937

虽然我喜欢[Martijn](https://stackoverflow.com/a/14884062/923794)对此的回答，比如乔治，但我想知道通过使用运行求和而不是`sum()`一遍又一遍地对几乎相同的数字应用是否会更快。

`None`在加速阶段将值作为默认值的想法也很有趣。事实上，对于移动平均线，可能有很多不同的场景。让我们将平均值的计算分为三个阶段：

1.  Ramp Up：开始迭代，其中当前迭代计数 < 窗口大小
2.  稳步进展：我们有确切的窗口大小的元素可用于计算法线`average := sum(x[iteration_counter-window_size:iteration_counter])/window_size`
3.  Ramp Down：在输入数据的末尾，我们可以返回另一个`window_size - 1`“平均”数字。

这是一个接受的函数

*   任意迭代（生成器很好）作为数据的输入
*   任意窗口大小 >= 1
*   在 Ramp Up/Down 阶段打开/关闭值生成的参数
*   这些阶段的回调函数以控制值的生成方式。这可用于不断提供默认值（例如`None`）或提供部分平均值

这是代码：

```
from collections import deque 

def moving_averages(data, size, rampUp=True, rampDown=True):
    """Slide a window of <size> elements over <data> to calc an average

    First and last <size-1> iterations when window is not yet completely
    filled with data, or the window empties due to exhausted <data>, the
    average is computed with just the available data (but still divided
    by <size>).
    Set rampUp/rampDown to False in order to not provide any values during
    those start and end <size-1> iterations.
    Set rampUp/rampDown to functions to provide arbitrary partial average
    numbers during those phases. The callback will get the currently
    available input data in a deque. Do not modify that data.
    """
    d = deque()
    running_sum = 0.0

    data = iter(data)
    # rampUp
    for count in range(1, size):
        try:
            val = next(data)
        except StopIteration:
            break
        running_sum += val
        d.append(val)
        #print("up: running sum:" + str(running_sum) + "  count: " + str(count) + "  deque: " + str(d))
        if rampUp:
            if callable(rampUp):
                yield rampUp(d)
            else:
                yield running_sum / size

    # steady
    exhausted_early = True
    for val in data:
        exhausted_early = False
        running_sum += val
        #print("st: running sum:" + str(running_sum) + "  deque: " + str(d))
        yield running_sum / size
        d.append(val)
        running_sum -= d.popleft()

    # rampDown
    if rampDown:
        if exhausted_early:
            running_sum -= d.popleft()
        for (count) in range(min(len(d), size-1), 0, -1):
            #print("dn: running sum:" + str(running_sum) + "  deque: " + str(d))
            if callable(rampDown):
                yield rampDown(d)
            else:
                yield running_sum / size
            running_sum -= d.popleft() 
```

它似乎比 Martijn 的版本要快一些——不过，后者要优雅得多。这是测试代码：

```
print("")
print("Timeit")
print("-" * 80)

from itertools import islice
def window(seq, n=2):
    "Returns a sliding window (of width n) over data from the iterable"
    "   s -> (s0,s1,...s[n-1]), (s1,s2,...,sn), ...                   "
    it = iter(seq)
    result = tuple(islice(it, n))
    if len(result) == n:
        yield result    
    for elem in it:
        result = result[1:] + (elem,)
        yield result

# Martijn's version:
def moving_averages_SO(values, size):
    for selection in window(values, size):
        yield sum(selection) / size

import timeit
problems = [int(i) for i in (10, 100, 1000, 10000, 1e5, 1e6, 1e7)]
for problem_size in problems:
    print("{:12s}".format(str(problem_size)), end="")

    so = timeit.repeat("list(moving_averages_SO(range("+str(problem_size)+"), 5))", number=1*max(problems)//problem_size,
                       setup="from __main__ import moving_averages_SO")
    print("{:12.3f} ".format(min(so)), end="")

    my = timeit.repeat("list(moving_averages(range("+str(problem_size)+"), 5, False, False))", number=1*max(problems)//problem_size,
                       setup="from __main__ import moving_averages")
    print("{:12.3f} ".format(min(my)), end="")

    print("") 
```

和输出：

```
Timeit
--------------------------------------------------------------------------------
10                 7.242        7.656 
100                5.816        5.500 
1000               5.787        5.244 
10000              5.782        5.180 
100000             5.746        5.137 
1000000            5.745        5.198 
10000000           5.764        5.186 
```

现在可以用这个函数调用来解决原来的问题：

```
print(list(moving_averages(range(1,11), 5,
                           rampUp=lambda _: None,
                           rampDown=False))) 
```

输出：

```
[None, None, None, None, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T22:04:03.567

一种避免重新计算中间和的方法..

```
list=range(0,12)
def runs(v):
 global runningsum
 runningsum+=v
 return(runningsum)
runningsum=0
runsumlist=[ runs(v) for v in list ]
result = [ (runsumlist[k] - runsumlist[k-5])/5 for k in range(0,len(list)+1)] 
```

打印结果

```
[2,3,4,5,6,7,8,9] 
```

* * *

让它运行（int（v））..然后..repr（runsumlist [k]-runsumlist [k-5]）/ 5）如果你想随身携带数字一个字符串..

* * *

没有全局的 Alt：

```
list = [float[x] for x in range(0,12)]
nave = 5
movingave = sum(list[:nave]/nave)
for i in range(len(list)-nave):movingave.append(movingave[-1]+(list[i+nave]-list[i])/nave)
print movingave 
```

即使您输入的值是整数，也要确保进行浮动数学运算

```
[2.0,3.0,4.0,5.0,6.0,7.0,8.0,9,0] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T21:07:40.763

使用`sum`和`map`函数。

```
print(sum(map(int, x[num-n:num]))) 
```

Python 3 中的`map`函数基本上是这个的*惰性*版本：

```
[int(i) for i in x[num-n:num]] 
```

我相信你可以猜到这个`sum`函数的作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-26T14:59:58.190

还有另一种扩展`itertools`配方的解决方案`pairwise()`。您可以将此扩展为`nwise()`，它为您提供滑动窗口（如果可迭代是生成器，则可以使用）：

```
def nwise(iterable, n):
    ts = it.tee(iterable, n)
    for c, t in enumerate(ts):
        next(it.islice(t, c, c), None)
    return zip(*ts)

def moving_averages_nw(iterable, n):
    yield from (sum(x)/n for x in nwise(iterable, n))

>>> list(moving_averages_nw(range(1, 11), 5))
[3.0, 4.0, 5.0, 6.0, 7.0, 8.0] 
```

虽然短期的设置成本相对较高，`iterable`但数据集越长，这种成本的影响就越小。这使用`sum()`但代码相当优雅：

```
Timeit              MP           cfi         *****
--------------------------------------------------------------------------------
10                 4.658        4.959        7.351 
100                5.144        4.070        4.234 
1000               5.312        4.020        3.977 
10000              5.317        4.031        3.966 
100000             5.508        4.115        4.087 
1000000            5.526        4.263        4.202 
10000000           5.632        4.326        4.242 
```

# php - JavaScript 分页

> ID：14884023
> 
> 赞同：0
> 
> 时间：2013-02-14T21:05:33.540
> 
> 标签：php, pagination

我有java和一切设置，但它不是分页。它显示分页页面链接，但不限制它。这是我所拥有的：

```
 <div class="pagination-holder clearfix" style="float: right;">
<div id="compact-pagination" ></div></div>
</div>
<div class="pagination-holder clearfix" style="float: right;">
<div id="compact-pagination" style="float: right;"></div></div>
<div id="compact-pagination" style="float: right;"></div>
<SCRIPT type="text/javascript">
$(function() {
$('#compact-pagination').pagination({
    edges: 2,
    currentPage: 1,
    hrefText: "#page-",
    prevText: "Prev",
    nextText: "Next",
    items: <?  echo $count; ?>,
    itemsOnPage: 2,
    cssStyle: 'compact-theme'
    });
});
</SCRIPT> 
```

然后我的php在这里。

那为什么不限制呢？

链接： http: [//flaviusmatis.github.com/simplePagination.js/](http://flaviusmatis.github.com/simplePagination.js/)

php：

```
<?php   $sql = "SELECT
        *
    FROM
        users
    ORDER BY user_id";

$result = mysql_query($sql);

if(!$result)
{
echo 'The category could not be displayed, please try again later.' .  mysql_error();
}
else
{
if(mysql_num_rows($result) == 0)
{header('/');
    echo 'This category does not exist.';
}
else
{
    //display category data
    while($row = mysql_fetch_assoc($result))
    {
   ?>

 <ul class="memberlist">
        <li>  <div id="memberlist" style="float: left; width: 300px; margin-left: 11px; margin-top: 10px; margin-bottom: 10px; border: 1px solid #CCC; border-radius:7px; background-color:#666;padding:5px 5px 5px 5px;">
<div id="memberlist_top">
    <div id="memberlist_avatar">
        <img src="<?php echo $row['avatar'] ?>" style="border: 1px solid #CBCBCB; padding: 3px; width: 100px; height: 100px;" />
    </div>
    <div id="memberlist_top_right">
        <p id="memberlist_username"><a href="/index.php?page=user&id=<?php echo $row['user_id'] ?>"><?php echo $row['user_name'] ?></a></p>
        <p style="text-align: center;"><img src="<?php echo$row['site_rank_image']?>"</p>
        <p style="text-align: center;" id="ml_rep"> Reputation: 0 </p>
        <p id="ml_posts">Post count: <?php echo $row['post'] ?></p>
    </div>
    <div class="clearfix" style="height: 5px;">&nbsp;</div>
</div>
<div id="memberlist_bottom">
    <p id="ml_bottom_p"><img src="template/images/layout/icon.png" style="vertical-align: middle" /> Date Registered: <span id="ml_bottom_span"><?php echo date(" F j, Y, g:i A", strtotime($row['user_date']))?> </span></p>
    <p id="ml_bottom_p"><img src="template/images/layout/icon.png" style="vertical-align: middle" /> Last online: <span id="ml_bottom_span"><?php echo date(" F j, Y, g:i A", strtotime($row['dt']))?> </span></p>
    <p id="ml_bottom_p" style="width: 284px; height: 30px; overflow-x: hidden; cursor: pointer;" title="Coming Soon"><img src="template/images/layout/icon.png" style="vertical-align: middle;" /> Last Activity: <span id="ml_bottom_span" style="text-decoration: underline;">Coming Soon</span></p>
    <p id="ml_bottom_p"><img src="template/images/layout/icon.png" style="vertical-align: middle" /> Is online now: <span id="ml_bottom_span"> <? if($row

['online'] == 1) {  // checks to see if the user allows their email to be shown, where '1' means they allow it to be shown
echo'Yes';
} else {
echo'No'; // if they allow it, it displays their email
} ?> </span></p>
</div>
</div> </li>
</ul>   
<? }}}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:35:37.143

如何使用

第 1 步：**与 JQuery 一起**，在您的页面中包含 jquery.simplePagination.js ：

```
<script type="text/javascript" src="path_to/jquery.js"></script> 
```

# android - Android：如何使用具有嵌套可绘制资源的视图状态？

> ID：14884030
> 
> 赞同：0
> 
> 时间：2013-02-14T21:06:14.673
> 
> 标签：android, android-resources

我正在尝试创建复杂的可绘制对象，其中一张图片随着主视图状态的变化而变化。我当前的资源看起来像这样

```
<transition xmlns:android="http://schemas.android.com/apk/res/android">
    <item >
        <layer-list>
            <item>
                <selector>
                    <item android:state_activated="true" android:drawable="@drawable/img_activated_icon" />
                    <item android:drawable="@drawable/img_default_icon" />
                </selector>
... 
```

接下来，我将它用作 ImageView 的 src。整个可绘制对象渲染得很好，但选择器忽略了 ImageView 上的 setActive() 调用并始终显示“默认”图标。

我究竟做错了什么？

**UPD**

所以，这里是所需的可绘制层次结构：

```
layer-list
  transition
    background1
    background2
  image 
```

在这种情况下，我无法激活过渡动画，因此我将过渡移至上层：

```
transition
  layer-list
    background1
    image   
  layer-list
    background2
    image   (the same image!) 
```

那么，如何实现第一个布局并能够控制过渡和更改图像的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:48:21.213

所以基本上你希望能够手动控制可绘制对象，并让它们对状态变化做出反应。据我所知，尝试在 a 上设置假状态（按下/聚焦/等）是**不好的**`View`做法，因此我建议您不要尝试这样做。我以前没有这样做过，但我不明白为什么不能这样做。`LevelList`我的想法是`StateList`为此按钮/图像创建一个s 。

这`LevelList`将使您可以控制按钮/图像具有的“主题”，具体取决于您将其设置为 using 的级别`setLevel()`。每个级别都将指向一个“主题” `StateList`，该“主题”对于所有不同的状态（按下/聚焦/等）都有不同的“主题”可绘制对象。

[http://developer.android.com/guide/topics/resources/drawable-resource.html#LevelList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LevelList) [http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

```
<level-list xmlns:android="http://schemas.android.com/apk/res/android">   
    <item android:maxLevel="0" android:drawable="@drawable/state_list_icon_default" />   
    <item android:maxLevel="1" android:drawable="@drawable/state_list_icon_another_style_1" />   
    <item android:maxLevel="2" android:drawable="@drawable/state_list_icon_another_style_2" />    
</level-list> 
```

您`state_list_icon_default`将拥有默认的可绘制对象，如下所示（取决于您想要绘制可绘制对象的状态）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/img_default_icon_pressed" />
    <item android:state_enabled="true" android:state_focused="true" android:drawable="@drawable/img_default_icon_focused" /> 
    <item android:state_enabled="false" android:state_focused="true" android:drawable="@drawable/img_default_icon_disabled_focused" />
    <item android:state_enabled="false" android:drawable="@drawable/img_default_icon_disabled" />
    <item android:drawable="@drawable/img_default_icon"/> 
</selector> 
```

这里有一些教程可以看到更深入的实现。

[http://iserveandroid.blogspot.com/2010/10/progress-bar-implementation-using-level.html](http://iserveandroid.blogspot.com/2010/10/progress-bar-implementation-using-level.html) [http://sermojohn.wordpress.com/2012/02/04/using-a-state-list-drawable -作为按钮背景图像/](http://sermojohn.wordpress.com/2012/02/04/using-a-state-list-drawable-as-a-button-background-image/)

# c++ - 自动跟踪插槽生命周期的信号库

> ID：14884031
> 
> 赞同：3
> 
> 时间：2013-02-14T21:06:18.277
> 
> 标签：c++, api, signals, signals-slots

我需要一个信号/插槽 c++ 库，它具有一个特定功能，即当带有插槽的对象被销毁时，信号会自动断开插槽。

Boost::signals2 仅为使用 boost::shared_ptr 创建的对象提供此功能，我想在任何地方继续使用 std::shared_ptr。有一个选项可以使其与 std::shared_ptr 一起使用，但它需要编写一些专门的模板并且没有信息它应该如何，通常我宁愿避免它（除非互联网上的某个地方有代码，但是我找不到它）。

我知道 Qt 信号具有此功能，但是 Qt 太大而无法在每个项目中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:23:40.413

根据 Boost 文档（在 1.48.0 中检查），Boost 中已经存在必要的模板特化，因此`std::shared_ptr`智能指针应该可以开箱即用地使用信号 2（通过）。`std::weak_ptr``std``slot::track_foreign`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T21:22:31.700

我建议看看 sigslot 库——http: [//sigslot.sourceforge.net](http://sigslot.sourceforge.net)

这是一个简单的机制，不需要预处理器（如 Qt 的信号）并提供已删除插槽的自动断开连接。

# git - 删除实时站点并从 repo 中提取新代码

> ID：14884037
> 
> 赞同：0
> 
> 时间：2013-02-14T21:06:35.480
> 
> 标签：git

我有一个本地开发环境和一个实时服务器。在我的主目录中的同一台服务器上，我有一个 git 存储库。迄今为止，我一直在通过 FTP 一次一个地移动文件。`Yuck`.

当我通过 SSH 连接到服务器并发出拉取请求时，我遇到了一堆合并冲突。既然我知道我提交并推送到 repo 的内容只是我想要的所有内容，有没有办法清除生产服务器上当前的内容并从 repo 中提取所有内容？

我不关心任何旧的提交历史等 - 我只是希望有一种方法可以在有限的情况下做到这一点，或者希望没有停机时间。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:10:27.227

`git fetch --all`
`git reset --hard origin/master`

但请注意，这将覆盖生产服务器中的本地文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:10:52.617

在实时服务器上做

```
git reset --hard master 
```

这将重置为上次良好的推送状态。

要重置为远程仓库的状态，请使用`origin/master`而不是`master`.

# windows - 关联 App Store 应用程序和桌面应用程序的方法

> ID：14884040
> 
> 赞同：2
> 
> 时间：2013-02-14T21:06:44.830
> 
> 标签：windows, winapi, windows-8, windows-runtime, windows-store-apps

我正在开发一款适用于 Windows 8 的产品，该产品需要执行一些低级任务、显示一些 UI 并与外部服务器通信。我绝对需要一个 Windows 服务来完成低级任务。同时，我想为 UI 使用 Windows App Store 应用程序的酷炫功能，如推送通知、动态磁贴等。在这个设计中，我的服务和我的应用程序都将与我的外部服务器进行通信。

流程类似于：我的 Windows 服务向我的服务器发送一些信息，然后服务器向我的 App Store 应用程序发送推送通知。

我知道在这种情况下部署并不好，但现在让我们把它放在一边。我的问题：服务器如何知道服务和应用程序在同一台机器上，并因此链接在一起？即当我的 Windows 服务向服务器发送信息时，服务器如何知道将推送通知发送到何处？我需要某种共享的、唯一的、识别信息。

我看到很多关于 App Store 应用程序和桌面应用程序之间缺乏进程间通信的讨论（通常本质上令人沮丧）。就我而言，我有两个选择：

1.  在服务和应用程序中生成完全相同的唯一标识符。这似乎不太可能，因为应用程序似乎无法访问很多特定于系统的信息。我很想被证明我错了。

2.  在服务器或应用程序中生成唯一标识符并将其传递给其他组件。执行此操作的潜在方法：

    *   在应用程序中创建标识符，将其保存到文件中，然后从服务中访问该文件。
    *   某种本地套接字解决方案（我读过这不起作用，但没有尝试过）

当然，选项 2 似乎可能违反 Windows 8 应用程序[认证要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)，特别是：

> Windows 应用商店应用不得通过本地机制（包括文件和注册表项）与本地桌面应用程序或服务进行通信。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:00:17.427

我不是律师，但如果它说“通过本地机制”，那么您仍然可以通过云服务进行通信，只要安装这两个应用程序对于在应用程序中具有某些功能是不必要的，或者如果您没有意思是在商店中发布应用程序。

您可以在文档文件夹中保存某种令牌，或者如果您的桌面应用程序可以以适当的权限运行 - 它可以访问 Windows 应用商店应用程序的本地数据文件夹以同步令牌以用于与 Web 服务通信。

也许只是要求用户在两个应用程序之间复制和粘贴令牌？

# php - yii 扩展 egmap 对文本更改的地理编码

> ID：14884041
> 
> 赞同：0
> 
> 时间：2013-02-14T21:06:46.980
> 
> 标签：php, google-maps-api-3, yii, yii-extensions

我正在使用[http://www.yiiframework.com/extension/egmap/](http://www.yiiframework.com/extension/egmap/)来实现谷歌地图。问题是我有一个地址字段。如果用户键入地址，我希望我的标记平移到新位置。这怎么可能使用这个扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:49:34.587

[http://www.ramirezcobos.com/2011/02/05/a-reverse-geolocator-tool-with-egmap-2-0-extension/（egmap](http://www.ramirezcobos.com/2011/02/05/a-reverse-geolocator-tool-with-egmap-2-0-extension/)作者的博客）

或者看看`EGMapGeocodedAddress`专门的方法`reverseGeocode`

# android - android onDraw不画png

> ID：14884047
> 
> 赞同：1
> 
> 时间：2013-02-14T21:07:12.563
> 
> 标签：android

我有一个名为 Preview 的类，它作为子项添加到我的一个 FrameLayouts 中。这是 Preview 的 onDraw 方法。指纹.png 在我的可绘制文件夹中，并且

```
 protected void onDraw(Canvas canvas) {
    System.out.println("on draw");

    Resources res = getResources();
    fingerprint = res.getDrawable(R.drawable.fingerprint);
    fingerprint.draw(canvas);
    //fingerprintScaled.draw(canvas);

} 
```

“绘制”打印，但指纹图像未渲染。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:03:26.403

它不绘图的原因是因为您调用 draw 错误。在受保护的 void onDraw(Canvas canvas) 中做这样的事情（除了不要在 onDraw 中解码东西）

```
Bitmap fingerprint = BitmapFactory.decodeResource(context.getResources(),R.drawable.icon_resource);

canvas.drawBitmap (fingerPrint, aMatrix, paintToDraw); 
```

这应该正确绘制您的位图。

# visual-studio-2010 - OpenCV：使用具有 SURF 功能的彩色帧时的问题

> ID：14884049
> 
> 赞同：2
> 
> 时间：2013-02-14T21:07:13.880
> 
> 标签：visual-studio-2010, opencv, tracking, detection, surf

我正在尝试使用此代码，以便可以使用彩色帧/图像实现 SURF，然后使用[Kalman_Color_Object_Track](http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_Motion_Tracking.htm)此处的代码使用卡尔曼滤波器的颜色值跟踪检测到的对象。所以，这些是我打算做的步骤，但我被卡住了，因为这个 SURF 检测代码不接受/使用彩色图像：

1.  “book1.png”是彩色图像
2.  从传入帧中检测到图像周围的矩形后，将 Mat 结构更改为 IplImage，因为 Kalman_Color_Object_Track 代码在 C++ 中

    dest_image=cvCloneImage(&(IplImage)image);

    mat_frame=cvCloneImage(&(IplImage)frame);

3.  调用`Kalman_Color_Object_Track( mat_frame,dest_image,30);`方法。

**问题**：（A）如何使此代码工作，以便可以提取和检测彩色图像的 SURF 特征？(B) 我不确定应该在函数签名中传递什么，`Kalman_Color_Object_Track()`以及 (C) 应该在对象检测模块的哪个位置调用它？

```
 #include <stdio.h>
     #include <iostream>
     #include "opencv2/core/core.hpp"
     #include "opencv2/features2d/features2d.hpp"
     #include "opencv2/highgui/highgui.hpp"
     #include "opencv2/imgproc/imgproc.hpp"
     #include "opencv2/calib3d/calib3d.hpp"

    using namespace cv;
    IplImage *mat_dest_image=0;
    IplImage *mat_frame=0;
/* Object Detection and recognition from video*/

   int main()
    {
       Mat object = imread( "book1.png", );

        if( !object.data )
        {
            std::cout<< "Error reading object " << std::endl;
            return -1;
        }

        //Detect the keypoints using SURF Detector
        int minHessian = 500;

        SurfFeatureDetector detector( minHessian );
        std::vector<KeyPoint> kp_object;

        detector.detect( object, kp_object );

        //Calculate descriptors (feature vectors)
        SurfDescriptorExtractor extractor;
        Mat des_object;

        extractor.compute( object, kp_object, des_object );

        FlannBasedMatcher matcher;

        namedWindow("Good Matches");
    namedWindow("Tracking");

        std::vector<Point2f> obj_corners(4);

        //Get the corners from the object
        obj_corners[0] = cvPoint(0,0);
        obj_corners[1] = cvPoint( object.cols, 0 );
        obj_corners[2] = cvPoint( object.cols, object.rows );
        obj_corners[3] = cvPoint( 0, object.rows );

        char key = 'a';
        int framecount = 0;
           VideoCapture cap("booksvideo.avi");

           for(; ;)

       {
           Mat frame;
            cap >> frame;
            imshow("Good Matches", frame);

            Mat des_image, img_matches;
            std::vector<KeyPoint> kp_image;
            std::vector<vector<DMatch > > matches;
            std::vector<DMatch > good_matches;
            std::vector<Point2f> obj;
            std::vector<Point2f> scene;
            std::vector<Point2f> scene_corners(4);
            Mat H;
            Mat image;

            //cvtColor(frame, image, CV_RGB2GRAY);

            detector.detect( image, kp_image );
            extractor.compute( image, kp_image, des_image );

            matcher.knnMatch(des_object, des_image, matches, 2);

            for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++) //THIS  LOOP IS SENSITIVE TO SEGFAULTS
            {
                if((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
                {
                    good_matches.push_back(matches[i][0]);
                }
            }

            //Draw only "good" matches
            drawMatches( object, kp_object, image, kp_image, good_matches, img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

            if (good_matches.size() >= 4)
            {
                for( int i = 0; i < good_matches.size(); i++ )
                {
                    //Get the keypoints from the good matches
                    obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
                    scene.push_back( kp_image[ good_matches[i].trainIdx ].pt );
                }

                H = findHomography( obj, scene, CV_RANSAC );

                perspectiveTransform( obj_corners, scene_corners, H);

                //Draw lines between the corners (the mapped object in the scene image )
                line( img_matches, scene_corners[0] + Point2f( object.cols, 0), scene_corners[1] + Point2f( object.cols, 0), Scalar(0, 255, 0), 4 );
                line( img_matches, scene_corners[1] + Point2f( object.cols, 0), scene_corners[2] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
                line( img_matches, scene_corners[2] + Point2f( object.cols, 0), scene_corners[3] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
                line( img_matches, scene_corners[3] + Point2f( object.cols, 0), scene_corners[0] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
    mat_dest_image=cvCloneImage(&(IplImage)image);
    mat_frame=cvCloneImage(&(IplImage)frame);

    Kalman_Color_Object_Track( ); // The tracking method
            }

            //Show detected matches
            imshow( "Good Matches", img_matches );
            for( int i = 0; i < good_matches.size(); i++ )
    { printf( "-- Good Match [%d] Keypoint 1: %d  -- Keypoint 2: %d  \n", i,    good_matches[i].queryIdx, good_matches[i].trainIdx ); }
            waitKey(0);

       }
        return 0;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:06:01.950

[本文](http://www.science.uva.nl/research/publications/2010/vandeSandeTPAMI2010/vandeSandeTPAMI2010-EvaluatingColorDescriptors.pdf)通过独立计算每个通道的梯度直方图来实现彩色图像的 SIFT 描述符。或许您可以对 SURF 功能尝试相同的方法。

# app-store-connect - iTunesConnect，销售和趋势，单位

> ID：14884055
> 
> 赞同：2
> 
> 时间：2013-02-14T21:07:29.003
> 
> 标签：app-store-connect

iTunesConnect 销售和趋势报告中的单位是否一直汇总？例如，如果我一周展示 100 个单位，下周展示 150 个单位，我是一直有 250 次下载，还是一直只有 150 次？如果是后者，单位减少的原因是什么？卸载？

谢谢！

# java - JSF 如何在我的应用程序中显示 pom.xml 版本？

> ID：14884059
> 
> 赞同：2
> 
> 时间：2013-02-14T21:07:50.253
> 
> 标签：java, jsf, maven

我正在尝试在 JSF 中重写旧版应用程序，而其他已重写的应用程序已在页脚中发布了 maven 版本。

我试图弄清楚他们是如何做到的，到目前为止，这就是我发现他们正在做的事情：

页脚.xhtml

```
<h:outputText id="fullBuildString" value="#{ApplicationInfo.fullBuildString}" /> 
```

ApplicationInfoBacking.java

```
public class ApplicationInfoBacking {

    private String             buildTime;
    private String             iteration;
    private String             version;
    private String             inception;
    private String             fullBuildString;

    @PostConstruct
    public void init() {
        fullBuildString = generateFullBuildString();
    }

    public String getBuildTime() {
        return buildTime;
    }

    public void setBuildTime(final String buildTime) {
        this.buildTime = buildTime;
    }

    public String getIteration() {
        return iteration;
    }

    public void setIteration(final String iteration) {
        this.iteration = iteration;
    }

    public String getVersion() {
        return version;
    }

    public void setVersion(final String version) {
        this.version = version;
    }

    public String getInception() {
        return inception;
    }

    public void setInception(final String inception) {
        this.inception = inception;
    }

    /**
     * @return ApplicationName vVersion (Iteration) BuildTime
     */
    public String getFullBuildString() {
        return fullBuildString;
    }

    public String generateFullBuildString() {

        if ((version == null) || "".equals(version.trim())) {
            version = "Unknown version";
        }

        if ((iteration == null) || "".equals(iteration.trim())) {
            iteration = "Unknown iteration";
        }

        if ((buildTime == null) || "".equals(buildTime.trim())) {
            buildTime = "Unknown build time";
        }

        final StringBuilder build = new StringBuilder();
        build.append("v. ").append(version);

        if (!Phase.PRODUCTION.equals(PlatformUtil.getPhase()) && !Phase.BETA.equals(PlatformUtil.getPhase())) {
            build.append(" (").append(iteration).append(")");
            build.append(" ").append(buildTime);
        }

        return build.toString();
        }
} 
```

面孔-config.xml

```
<managed-bean>
        <managed-bean-name>ApplicationInfo</managed-bean-name>
        <managed-bean-class>path.to.class.ApplicationInfoBacking</managed-bean-class>
        <managed-bean-scope>application</managed-bean-scope>
        <managed-property>
            <property-name>buildTime</property-name>
            <value>#{initParam.buildTime}</value>
        </managed-property>
        <managed-property>
            <property-name>iteration</property-name>
            <value>#{initParam.iteration}</value>
        </managed-property>
        <managed-property>
            <property-name>version</property-name>
            <value>#{initParam.version}</value>
        </managed-property>
        <managed-property>
            <property-name>inception</property-name>
            <value>#{initParam.inception}</value>
        </managed-property>
    </managed-bean> 
```

web.xml

```
<context-param>
        <param-name>buildTime</param-name>
        <param-value>${buildNumber}</param-value>
    </context-param>
    <context-param>
        <param-name>iteration</param-name>
        <param-value>${iteration}</param-value>
    </context-param>
    <context-param>
        <param-name>version</param-name>
        <param-value>${pom.version}</param-value>
    </context-param> 
```

这是我加载应用程序时实际显示的内容：

```
v. ${pom.version} 
```

由于某种原因，`${pom.version}`没有得到解释。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T13:00:03.937

看起来他们正在使用 buildnumber 插件：http: [//mojo.codehaus.org/buildnumber-maven-plugin/](http://mojo.codehaus.org/buildnumber-maven-plugin/)

您需要将其添加到您的 web 模块中，然后通过 pom.xml 中的资源部分启用 web.xml 过滤 - 我认为 faces-config 不需要更改。我不知道你可以使用 initParam。如果你不能，你仍然可以直接过滤 faces-config，以防你的 IDE 不喜欢过滤 web.xml

“pom.version”可能无法正常工作，因为它已被弃用？尝试使用 project.version

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:20:19.150

有来自不同属性文件的 maven pom 键

在应用程序启动时读取属性文件并将其放入应用程序范围的 bean

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T22:43:02.270

pom.version 没有被解释，因为在运行时没有 pom 之类的东西。仅当 Maven 读取 pom 并创建模型时，pom.xml 才会在构建时作为项目设置的 Java 对象树存在于内存中。在运行时 Maven 没有运行所以 pom.version 没有价值。也不推荐使用 pom.* .. 它应该是 project.*

为了做你想做的事，请使用另一个答案中提出的解决方案..

# actionscript-3 - 如何使用自定义组件在 flex 中制作三角形按钮？

> ID：14884061
> 
> 赞同：0
> 
> 时间：2013-02-14T21:07:57.457
> 
> 标签：actionscript-3, apache-flex

我需要一个三角形的按钮。

如何在flex中制作像三角形按钮一样的自定义组件？

我应该重写什么类？更新显示列表（）？或 layoutChrom()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:53:34.350

根据您希望按钮的复杂程度，您可能可以使用这样的过程逃脱[-](http://www.patrickhansen.com/blog/2010/07/16/custom-spark-button-skin-using-fx-gmxml/)除了使三角形外部的颜色对于“单击”和“未单击”状态相同。仅更改所选状态的三角形内的颜色。

如果您需要更复杂的东西，您可以从[this](https://stackoverflow.com/questions/1291050/flex-custom-button-component)或[this](http://livedocs.adobe.com/flex/3/html/help.html?content=intro_3.html)开始以获得指导。

# javascript - 使用 ajax 和动态更新在 highchart 上放置 2 行

> ID：14884065
> 
> 赞同：0
> 
> 时间：2013-02-14T21:08:09.843
> 
> 标签：javascript, ajax, highcharts, dynamic-data

我正在尝试使用带有动态（定期）更新的 ajax 在 Highchart 上添加第二行。第一行使用 ajax 可以正常工作。我认为问题在于传入数据的格式，还有我如何为每一行 *拆分数据。*

我可以控制 ajax 数据的格式，因此它可以以几乎任何形式发布，但它适用于第一行。

这是每个请求收到的 ajax 数据：

```
[Date.parse("2013/02/14 14:29:00 -0000"),  51, 216510] 
```

这将为第一行在**51**创建一个点，但不会为第二行创建一个点，该点应该在**216510**。

以下是我正在使用的 javascript：

```
 var chart; // global

    /**
     * Request data from the server, add it to the graph and set a timeout to request again
     */
    function requestData() {

        $.ajax({
            url: '/htbin/count_since_total', 
            success: function(point) {
                var series = chart.series[0],
                shift = series.data.length > 30; // shift if the series is longer than 300 (drop oldest point)

                // add the point
                chart.series[0].addPoint(eval(point), true, shift);

                // call it again after one second
                setTimeout(requestData, 1000);  
            },
            cache: false
        });
    }

    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                events: {
                    load: requestData
                }
            },
            title: {
                text: 'time'
            },
            xAxis: {
                type: 'datetime'
            },
        yAxis: [{ // Primary yAxis

            title: {text: 'count'},
            opposite: false

        }, { // Secondary yAxis

            title: {text: 'Total'},
            opposite: true
        }],

            series: [{
                yAxis: 0,
                name: 'number',
                data: []
            },{
                yAxis: 1,
                name: 'Total',
                data: []
            }],

        });     
    }); 
```

编辑 1：不工作，没有建议更改的第二行。我认为传入的数据格式不正确或接收后需要处理。此外，数据如何分配到正确的行？

```
 series: [{
                yAxis: 0,
                name: 'number',
                data: []
            },{
                yAxis: 1,
                name: 'Total',
                data: []
            }], 
```

---------结束编辑1 ----------------

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:13:19.697

在您的`success`-action/function 中，您只是在更新`series[0]`.

如果你想在第二行添加一个点，你也必须添加一个点`series[1]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:00:06.400

添加一个`for`循环为每个系列执行相同的操作。

```
success: function(point) {
    for(var i = 0, length = chart.series.length; i < length; i++) {
        var serie = chart.series[i],

        // shift if the series is longer than 300 (drop oldest point)
        var shift = serie.data.length > 30;

        // add the point
        serie.addPoint(eval(point), true, shift);

    }

    // call it again after one second
    setTimeout(requestData, 1000);  
} 
```

# html - 如何使用 geoJSON 坐标（或数据）在 HTML5 画布上绘制交互式地图

> ID：14884066
> 
> 赞同：1
> 
> 时间：2013-02-14T21:08:12.107
> 
> 标签：html, canvas, map, geojson

我正在开发一个类似于[Google Analytics](http://www.google.com/analytics/)的类似仪表板的 Web 应用程序，其中不同的数据集以不同的格式显示，包括地图。

要求是地图应该具有可点击区域，以便加载特定于该区域的数据，并且这些区域应该具有悬停效果，[就像这个一样](http://download.ysatech.com/HTML5_Interactive_Map/InteractiveMapPoint.aspx)。我不想使用谷歌地图 API，但我对图书馆持开放态度。

现在，我有 geoJSON 中的地图数据（见下面的片段），这让我想到了我的问题，如何使用 geoJSON 数据在 HTML5 画布中绘制地图？我知道这个问题有多笼统，因为我真的不知道从哪里开始。所以我非常需要有人牵着我的手给我指路。请尽可能详细地保留您的答案。谢谢。

```
 {
    "type": "FeatureCollection", 
    "features": [{ "type": "Feature", "id": 0, 
    "properties": { "OBJECTID_1": 29, "OBJECTID": 29, "COUNTY_NAM": "BARINGO", "COUNTY_COD": 30, "Shape_Leng": 5.81571392065, "Shape_Area": 0.88451236881 }, 
    "geometry": { "type": "Polygon", "coordinates": [ [ [ 36.028686523000033, 1.276123047000056 ], [ 36.036499023000033, 1.263916016000053 ], [ 36.039306641000053, 1.259887695000032 ],............[ 36.028686523000033, 1.276123047000056 ] ] ] } }
    ]
    } 
```

我的研究使我找到了诸如 openlayers、leaflet 和 d3 之类的库。这些都很棒，但伴随着显着的学习曲线。我不反对学习，但我想要最简单的解决方案来完成这个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:53:28.587

您需要一个 javascript 映射包。开源选择包括 openlayers 和传单。Google 会为您找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T12:11:41.850

使用 Smallworld.js 完成您的任务。

```
$('.map').smallworld({
    geojson: data
}); 
```

// 或者…</p>

```
Smallworld.defaults.geojson = data;
$('.map').smallworld(); 
```

见 [ [http://mikefowler.me/smallworld.js][1]](http://mikefowler.me/smallworld.js][1])

# xcode - 如何从 /Library/Application Support/ 文件夹中读取？

> ID：14884073
> 
> 赞同：1
> 
> 时间：2013-02-14T21:08:46.507
> 
> 标签：xcode, macos, cocoa, readfile

我正在制作一个 OX Cocoa 应用程序，我希望能够在按下按钮时使用该应用程序读取和写入文本文件。这些文本文件应保存在 /Library/Application Support/AppName 但我无法让我的应用程序从那里读取任何内容。它可以写入文件夹，但不能读取其中写入的内容，即使我可以在 finder 中看到该文件。

这是我使用成功写入文件夹的代码。

```
 NSString *text = editor.string;
    NSString *path = @"/Library/Application Support/";

    NSMutableString *mu = [[NSMutableString stringWithString:path] init];
    [mu insertString:FileName.stringValue atIndex:mu.length];
    [mu insertString:@".txt" atIndex:mu.length];

    path = [mu copy];
    [text writeToFile:path atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

这是我正在使用（但失败）从文本文件中读取的代码。

```
 NSArray *path = [[NSBundle mainBundle] pathsForResourcesOfType:@"txt" inDirectory:@"/Library/Application Support/"];
    NSString *output = @"";

    NSMutableString *mu = [[NSMutableString stringWithString:output] init];

    for (int i = 0; i < [path count]; i++) {
        NSString *text = [NSString stringWithContentsOfFile:path[i] encoding:NSUTF8StringEncoding error:NULL];
        [mu insertString:text atIndex:mu.length];
        [mu insertString:@"\n" atIndex:mu.length];
    }

    [textView setString:mu]; 
```

任何关于我可以纠正的提示都会非常有帮助，我有点卡在这里。

**编辑**：使用您的输入，我已将代码更新为：

```
 NSString *fileLocation = @"~/Library/Application Support/";
    NSArray *text = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:fileLocation error:nil];
    NSString *output = @"";
    NSMutableString *mu = [[NSMutableString stringWithString:output] init];

    for (int i = 0; i < [text count]; i++) {
        [mu insertString:text[i] atIndex:mu.length];
        [mu insertString:@"\n" atIndex:mu.length];
    }
    [textView setString:mu]; 
```

但是文件中的文本仍然没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:53:22.857

当您对应用进行沙箱处理时，大多数硬编码路径都会失败。即使你摆脱了这个，或者你不打算沙盒这个应用程序，这是一个值得摆脱的坏习惯。

此外，你确定你想要`/Library`而不是`~/Library`？前者通常不是用户可写的。后者位于用户的主目录（或沙盒时您的容器）中。

要获取 Application Support 目录，或 Caches 目录，或任何其他您可能想要在其中创建内容并稍后从中检索它们的目录，[请向文件管理器索取它](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/URLForDirectory%3ainDomain%3aappropriateForURL%3acreate%3aerror%3a)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:39:49.817

/Library/Application Support 不在您的捆绑包中。您使用的路径`[[NSBundle mainBundle] pathsForResourcesOfType:…]`仅对访问应用程序内部的文件有用（构建应用程序时包含的图像、声音等）。

您想用来`[[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:error]`获取应用程序外部目录中的文件列表。

[Matt Gallagher 在Cocoa With Love](http://www.cocoawithlove.com/2010/05/finding-or-creating-application-support.html "可可与爱")中提供了一个很好的容错方法来定位应用程序支持目录的路径示例。我建议在硬编码 /Library/Application Support 路径时使用它。

```
NSError *error = nil;
NSArray *text = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:fileLocation error:&error];
if (!text) {
    NSLog( @"Error reading contents of application support folder at %@.\n%@", applicationSupportFolder, [error userInfo] );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:41:01.413

您正在尝试使用 NSBundle 从应用程序的主包中获取路径。但是该文件不在捆绑包中，您应该手动指定路径。您可以对路径进行硬编码，将以前编写的路径存储在某处，或者使用 NSFileManager 获取目录内容并对其进行分析。例如，`-[NSFileManager contentsOfDirectoryAtPath:error:]`。

# internet-explorer-8 - highstock ie8 错误

> ID：14884076
> 
> 赞同：1
> 
> 时间：2013-02-14T21:09:11.823
> 
> 标签：internet-explorer-8, highcharts, highstock

使用 IE8 使用 Highstock 时出错

```
An Error has occurred in the script on this page
Line: 8
Char: 56
Error: Invalid procedure call or argument
Code: 0
URL: js/highstock.js 
```

它适用于所有其他浏览器。这是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:17:58.607

Sebastian Bochan 在上面的评论中回答了这个问题。

“图表在现代浏览器中工作但在 IE6、7 和 8 中失败的最常见原因是配置选项中的杂散逗号。杂散逗号是 JavaScript 中对象或数组的最后一项之后的逗号。这些将静默传递在现代浏览器中，但在旧版 IE 中导致 JavaScript 错误。例如："

```
var chart = new Highcharts.Chart({
chart: {
    renderTo: 'container'
},
xAxis: {
    type: 'datetime'
},
series: [{
    data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
    pointStart: Date.UTC(2012, 0, 1),
    pointInterval: 24 * 3600 * 1000,
}]
}); 
```

因此，请检查所有图表设置是否存在任何可能的偏差。如果没有找到，请尝试我所做的，逐个注释掉设置，直到它正常运行。

# google-places-api - Google 放置 Api Key

> ID：14884078
> 
> 赞同：8
> 
> 时间：2013-02-14T21:09:14.733
> 
> 标签：google-places-api, api-key

我在这里搜索了与同一主题相关的其他问题，但找不到明确的答案。

我的问题似乎与其他许多问题一样，因为我无法从 Google Places Api 获得回复。

我正在从 iphone 应用程序中尝试，是的，代码是正确的，我已经检查过了，绝望中只好使用 Google Places 上的文档提供的示例来清除代码以发出请求。

尝试将 url 放入浏览器，无论哪种浏览器，总是相同的响应。

```
{
     "html_attributions" : [],
     "results"  : [],
     "status"  : "REQUEST DENIED"
} 
```

我尝试制作新密钥，结果相同，是的，还列出了应用程序的标识符。

在能够使用密钥之前是否有时间框架。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-16T10:09:11.397

这是我是如何做到的

1）您需要使用您的谷歌帐户登录

2)将出现[Google APi 控制台](http://code.google.com/apis/console)

3）看截图![这里](../Images/1c6f584b87506ebbf5ae4e739bd25706.png)

4）你会在那里找到服务，点击它你可以选择你想使用的API

5）然后转到API Access，如图所示， ![这个截图](../Images/db528a7e010ab0c0e518ee76828308b7.png)您可以获得您的Google API Key。

谢谢

**建议 - 使用您自己的 Google API 密钥**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T05:34:51.170

我猜您的请求 URL 中可能需要“传感器”参数。

只需在 URL 中设置 'sensor=false&' 并尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T20:03:17.030

为了使用 google place API，您需要在[https://console.developers.google.com](https://console.developers.google.com)上执行以下步骤：

你需要去你的项目。

1：根据您的客户端激活 Google Places API：iOS、Android 或 Web。

2：然后转到左侧的凭据部分。

3：生成一个SERVER密钥。

将该密钥插入您的 google place api 调用中。例子：

[https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=cruise&key=SERVERKEY](https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-33.8670522,151.1957362&radius=500&types=food&name=cruise&key=SERVERKEY)

它是一个简单的 GET Rest 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-27T12:43:07.077

而不是这个网址：[https ://maps.googleapis.com/maps/api/place/search/json?location=-74.006605,40.714623&radius=5000&types=bar|police&name=&sensor=false&key=Api_key](https://maps.googleapis.com/maps/api/place/search/json?location=-74.006605,40.714623&radius=5000&types=bar|police&name=&sensor=false&key=Api_key)

用这个

网址：（[https://maps.googleapis.com/maps/api/place/search/json?location=-74.006605,%2040.714623&radius=5000&types=bar|police&name=&sensor=false&key=Api_key](https://maps.googleapis.com/maps/api/place/search/json?location=-74.006605,%2040.714623&radius=5000&types=bar|police&name=&sensor=false&key=Api_key)）

%20 用于空间

# iphone - Facebook share kit ios

> ID：14884085
> 
> 赞同：0
> 
> 时间：2013-02-14T21:09:37.147
> 
> 标签：iphone, ios, xcode, facebook, sharekit

I have implemented Facebook share kit to my app and it works as intended, but if the user installed Facebook official iPhone app it messes up my app because it logins through Facebook iPhone app instead of share kit default login. Is there way to make share kit ignore Facebook official iPhone app?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:51:59.573

No, there is no such method. You just have to use the latest Facebook API provided by the Apple. That may solve your problem of not detecting the login from app.

# php - PHP 字符串只能包含 0 1 和空格

> ID：14884101
> 
> 赞同：0
> 
> 时间：2013-02-14T21:10:32.607
> 
> 标签：php, regex

我目前正在编写一个 PHP 脚本，我需要检查一个字符串。如果字符串包含 0 1 和空格以外的其他字符，那么我想返回一个错误。如果字符串仅包含 0 1 和空格，则继续执行代码。

该字符串是用户提交的，因此它可能很长。

我曾尝试在网上搜索解决方案，但我找不到我正在寻找的确切内容。

但我有一种感觉，我将使用正则表达式来解决我的问题。我找到了以下代码：

```
if(preg_match('/^[0-1]$/', $txt_string) == 1) {

    return "Ok";

} else {

    return "Error";

} 
```

但这里的问题是，当我插入多个数字时，它似乎失败了。

/莫顿。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:11:34.833

您忘记了量词，`[0-1]`实际上等效于`[01]`. 此外，您似乎忘记在角色类中包含空格。如果您希望它们匹配，您可以添加它。

所以，你的正则表达式应该是：

```
'/^[01 ]+$/' 
```

# c# - 在运行时知道类型变量

> ID：14884105
> 
> 赞同：1
> 
> 时间：2013-02-14T21:10:42.050
> 
> 标签：c#

我想确定参数变量的类型是 Guid。

```
public ActionResult Edit(Guid id)
{
   // if id != Guid print error
} 
```

我想这是一个非常基本的问题，但我被困在这里。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:11:44.680

在这种情况下，传入的值**不可能不是**GUID。

该[`GUID`结构](http://msdn.microsoft.com/en-gb/library/system.guid.aspx)是一种值类型 - 它不能被继承。这意味着编译器将接受作为此方法的参数的唯一类型是`GUID`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:11:35.090

它总是会的。编译器确保它。

将参数写入 as`Guid id`意味着只能将类型的实例`Guid`或 can 的子类型`Guid`传递给方法。任何传递任何其他类型参数的尝试都将导致编译器错误或运行时异常（如果您尝试通过反射调用该方法）。

正如其他人指出的那样，`Guid`is a`struct`并且不能有子类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:17:41.803

正如其他人所说，在这种特定情况下您实际上并不需要，因为编译将确保它。

但是，一般情况下，您会希望使用`GetType()`并`typeof`执行此检查。

```
if (id.GetType() != typeof(System.Guid))
{
    // Print Error
} 
```

# c++ - 实现加权图

> ID：14884109
> 
> 赞同：1
> 
> 时间：2013-02-14T21:11:02.527
> 
> 标签：c++, graph

假设我有以下邻接矩阵：

```
 A B C D
A 0 9 0 5
B 9 0 0 0 
C 0 0 0 2
D 5 0 2 0 
```

这将如何实施？我意识到我可以使用二维数组来表示顶点之间的加权边，但我不确定如何表示顶点。

```
int edges[4][4];
string vertices[4]; 
```

这是这样做的方法吗？顶点数组中的索引对应于边数组中的行索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:18:25.597

您可以使用二维`std::map`

使用这种方法可以让矩阵在你想要的时候增长和缩小。

```
#include <map>
#include <string>
#include <iostream>

int main()
{
    std::map<std::string, std::map<std::string, int>> vertices;

    vertices["A"]["A"] = 0; vertices["A"]["B"] = 9; vertices["A"]["C"] = 0; vertices["A"]["D"] = 5;
    vertices["B"]["A"] = 9; vertices["B"]["B"] = 0; vertices["B"]["C"] = 0; vertices["B"]["D"] = 0;
    vertices["C"]["A"] = 0; vertices["C"]["B"] = 0; vertices["C"]["C"] = 0; vertices["C"]["D"] = 2;
    vertices["D"]["A"] = 5; vertices["D"]["B"] = 0; vertices["D"]["C"] = 2; vertices["D"]["D"] = 0;

    std::cout << vertices["A"]["A"] << std::endl;
    std::cout << vertices["A"]["B"] << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:17:18.637

将邻接矩阵的索引作为顶点是常见的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:29:53.290

如果图中有固定数量的顶点。您可以将顶点声明为枚举并使用枚举的顶点名称直接索引数组。我认为它使映射更加清晰。

```
enum VERTEX
{
    A = 0,
    B,
    C,
    D,
    LAST = D
};

int edge[LAST+1][LAST+1];
edge[A][A] = 0;
edge[A][B] = edge[B][A] = 9;
edge[A][C] = edge[C][A] = 0;
// etc. 
```

通过允许您使用数组而没有任何查找损失，同时保持事情易于理解，这使事情变得简单和快速。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T21:24:56.120

对于大多数意图和目的，将图表示为附属列表通常更有效：

```
std::vector< std::list<int> > graph; 
```

所以 graph[i] 是 i 的所有相邻顶点。优点是在处理图时，我们通常希望遍历 i 的邻居。此外，对于大型稀疏图，空间复杂度要低得多。当然，这也可以扩展到包括权重，例如：

```
std::vector< std::list<std::pair< int, int> > > graph; 
```

或者对于更复杂的类型，定义一个类型 Vertex...

编辑：如果您需要索引作为字符串，这可以通过选择 std::map 而不是 std::vector 轻松完成：

```
std::map< std::string, std::list<std::pair< std::string /*vertex*/, int/*weight*/> > > graph; 
```

但是从您的原始帖子看来，您只想将索引映射到顶点名称，在这种情况下，我会使用第一个解决方案，但也要保持顶点名称映射到索引：

```
std::vector< std::pair< std::string/*name*/, std::list<std::pair< int /*index*/, int/*weight*/> > > > graph; 
```

# php - 创建在后台运行的 php cli 进程

> ID：14884117
> 
> 赞同：0
> 
> 时间：2013-02-14T21:11:31.400
> 
> 标签：php, bash, shell, command-line-interface, sh

我希望使用一个 shell 脚本运行 10 个 php CLI 进程（并行）。但是，我试图找出创建后如何将进程发送到后台。

我正在尝试这样的事情。任何帮助将不胜感激。（只是流程，不是真正的 shell 脚本）

`for loop 1 to 10
php -q /home/xxx/xxx.php & // I want to send this to background one created. because it runs indefintely depending on the task it needs to do.
end for`

对不起，我很难做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:56:38.533

直接回答你的问题，

```
#!/bin/bash
for i in {1..10}
do
    php -q /home/xxx/xxx.php &
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:25:04.390

尝试将 Supervisord 用于这样的脚本。它有一个简单的配置文件，您只需要设置脚本路径和进程数。

# html - html 防止滚动也可以防止 html5 输入类型范围

> ID：14884119
> 
> 赞同：0
> 
> 时间：2013-02-14T21:11:34.190
> 
> 标签：html, html-input

我有一个 html 网络应用程序，我正在添加滑块，如下所示：

```
<form oninput="output1.value=slider1.value">
  <input type="range" name="slider1" value="50"/>
  <output name="output1" for="slider1">50</output>
</form> 
```

在网络和设备上运行良好。

现在，当我添加 preventdefault 代码以停止页面滚动时，它会中断：

```
document.addEventListener( 'touchmove' , function(e) {e.preventDefault()} , false ); 
```

现在，如果这是我自己的控件，我可以修复它，但我想要 html5 滑块的默认行为，我怎样才能恢复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:32:23.073

不确定这可能是重复的，但以防万一：

```
function stopScrolling( touchEvent ) {
    if ((touchEvent.target.id != "pastGenSlider") && (touchEvent.target.id != "curGenSlider"))
        touchEvent.preventDefault(); 
}
document.addEventListener( 'touchmove' , stopScrolling , false ); 
```

只需检查元素具有的 id，如果它是您想要允许它处理的东西，就让它通过/不要调用 preventDefault();

# wpf - xaml 将列表框项的值绑定到是否为

> ID：14884123
> 
> 赞同：0
> 
> 时间：2013-02-14T21:11:41.203
> 
> 标签：wpf, xaml, syncfusion

我正在 VS 2012 中构建一个 WPF 应用程序，它使用 Code First Entity Framework 以及存储库和 MVVM 模式。

我有两个类：EntityType 和 LicenseType。

EntityType 由以下内容指定：

```
 private int _id;
    private string _name;
    private string _description;
    private List<LicenseType> _licenseTypes = new List<LicenseType>(); 
```

LicenseType 声明为：

```
 private int _id;
    private string _name;
    private string _description; 
```

并且为这些私有字段声明了公共属性。

我将 ObservableCollection 绑定到 CheckedListBox（Syncfusion 产品）。

没问题。

在它下面，我将另一个 CheckedListBox 绑定到 ObservableCollection。

再次，没问题。

我不能做的是根据特定的 LicenseType 是否在 EntityType.LicenseTypes 的集合中，将 LicenseType 列表框中 CheckListBoxItem 的 IsSelected 属性设置为 true（从而“选中”复选框）。

这是我的 CheckedListBox 的代码：

```
 <syncfusion:CheckListBox x:Name="lstAllLicenseTypes" ItemsSource="{Binding   AllLicenseTypes}" DisplayMemberPath="Name" >
           <syncfusion:CheckListBox.ItemContainerStyle>
                <Style TargetType="syncfusion:CheckListBoxItem">
                    <Setter Property="IsSelected" Value="{Binding ????}"/>
                </Style>
            </syncfusion:CheckListBox.ItemContainerStyle>
        </syncfusion:CheckListBox> 
```

我尝试了两种方法，第一种是遍历每个 LicenseType 列表框项，检查是否存在与 EntityType 的 LicenseType 集合的关联，并尝试设置绑定到 XAML 的属性值：

私人无效ListEntityTypes_OnSelectionChanged（对象发件人，SelectionChangedEventArgs e）{ var thisEntity =（EntityType）listEntityTypes.SelectedItems [0];

```
 foreach (object t in lstAllLicenseTypes.Items)
        {
            bool hasAssociation = _vmEntityTypes.EntityHasAssociationWithThisLicenseType(thisEntity,(LicenseType) t);
            if (hasAssociation)
            {
                _vmEntityTypes.CurrentEntityIsAssociatedWithCurrentLicenseType = true;
            }
            else
            {
                _vmEntityTypes.CurrentEntityIsAssociatedWithCurrentLicenseType = false;
            }
        }

    } 
```

这里的目的是绑定到属性“CurrentEntityIsAssociatedWithCurrentLicenseType”。这没有用。我认为它不起作用，因为对于 CheckedListBox 中的每个项目，属性值都已更新，因此最后它是错误的，因此没有检查任何项目。

另一种方法与上面类似，但我试图手动“检查”列表框项目，但是我永远无法将 LicenseType 转换回 CheckListItem。

一般来说，我的弱项是处理与其他数据集合相关的记录集合，并构建一个允许用户清楚地添加和关联不同表的界面。

任何帮助都会很棒，

谢谢！保罗

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T23:06:52.447

使用转换器。将 IsChecked 绑定到包装列表 (EntityType.LicenseTypes) 的属性，然后使用返回布尔值的 IValueConverter。将 CheckedListBoxItem 的 LicenseType 作为 ConverterParameter 传递。

在 EntityType 类上实现 IPropertyNofity。

当 EntityType.LicenseTypes 列表更改时，在包装的属性上使用 PropertyNotify，并且 isChecked 将更新。

伪代码：

```
public class EntityType : INotifyPropertyChanged
{
    ...
    public List<LicenseType> LicenseTypes
    { 
        get { return _licenseTypes; }
        set
        {
            _licenseTypes = value;
            OnNotifyPropertyChanged("LicenseTypes");
        }
    }

}

public class ListToCheckedConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter ...
    {
        var list = (List<LicenseType>)value;
        var type = (LicenseType)parameter;
        return list.Contains(type);
    }
    ...
} 
```

XAML：

```
 <syncfusion:CheckListBox x:Name="lstAllLicenseTypes" ItemsSource="{Binding   AllLicenseTypes}" DisplayMemberPath="Name" >
       <syncfusion:CheckListBox.ItemContainerStyle>
            <Style TargetType="syncfusion:CheckListBoxItem">
                <Setter Property="IsSelected" 
                    Value="{Binding Path=LicenseTypes, 
                            Converter = ListToCheckedConverter,
                            ConverterParameter = Header}"/>
            </Style>
        </syncfusion:CheckListBox.ItemContainerStyle>
    </syncfusion:CheckListBox> 
```

# c# - ASP.NET 错误处理问题

> ID：14884125
> 
> 赞同：1
> 
> 时间：2013-02-14T21:11:54.563
> 
> 标签：c#, asp.net

我是 ASP.NET 的新手，我有一个非常基本的站点，我只想获取所有应用程序错误并将它们通过电子邮件发送给我，同时为用户提供一个错误页面。我阅读了很多关于这个主题的内容，似乎有很多信息。以下是我想出的，但我在保持会话中的异常时遇到问题，因此我可以通过电子邮件将其发送给我。

我不断`NullReferenceException was unhandled by user code`从 Error.aspx.cs 文件中获得关于 ex.Message 的信息。

有什么想法吗？

Global.asax.cs-

```
void Application_Error(object sender, EventArgs e)
{
    Exception ex = Server.GetLastError();

    HttpContext.Current.Response.Redirect("~/Error.aspx");
} 
```

错误.aspx.cs-

```
public partial class Error : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            Exception ex = (Exception)Session["Exception"];
            this.SendEmail(ex);
            Session.Remove("Exception");
        }
    }

    private void SendEmail(Exception ex)
    {
        string body = "An exception occured at "
                    + DateTime.Now.ToLongTimeString()
                    + " on " + DateTime.Now.ToLongDateString()
                    + "<br />" + ex.Message; //ERROR HERE
        MailMessage msg = new MailMessage("from@email.com", "to@email.com");
        msg.Subject = "Exception in Portal Website";
        msg.Body = body;
        msg.IsBodyHtml = true;
        SmtpClient client = new SmtpClient("localhost");
        client.Send(msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:21:58.900

你的问题是你从来没有设置`Session["Exception"]`，所以在你的`Error.aspx`,`Exception ex`总是会为空......然后做`ex.Message`会抛出`NullReferenceException`. 即使您解决了该问题并进行了适当的设置`Session["Exception"]`，您所做的也并不理想。

1.  您可以从该`Application_Error`功能发送电子邮件。

2.  您的`Response.Redirect`（[MSDN 条目](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.100%29.aspx)）将导致另一个异常（ThreadAbortException）

3.  您应该考虑实施[ELMAH](http://code.google.com/p/elmah/)。它很容易实现并且可以做你想做的一切。

但是，如果您只想修复代码，只需将发送电子邮件逻辑移动到 `Application_Error`，然后您就不必担心`Session`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:19:22.207

我在类似实例中所做的是抛出所有异常，然后在您的 global.asax 中使用 Application_Error 方法执行您需要处理错误消息的任何工作。

```
 void Application_Error(object sender, EventArgs e) 
    {
        // Code that runs when an unhandled error occurs
        string exception;
            Exception ex = Server.GetLastError();
            if (ex.InnerException != null)
            {
                Exception innerException = ex.InnerException;
                exception = ex.InnerException.Message;
            }
            else
            {
                exception = ex.Message;
            }

        //Send email here       

            //redirect to error page

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:19:09.357

我没有看到您将异常对象推送到会话，为什么不将 SendEmail 方法移动到 global.ascx 和 SendEmail 然后将用户重定向到错误页面。[有像ELMAH](http://code.google.com/p/elmah/)这样的第三方插件，可以通过简单的配置为您轻松完成所有这些工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T21:52:33.413

我也有类似的情况。我要去看看 ELMAH，但我的项目对开源项目有很大的限制，你可能会。糟透了成为我！

在这种情况下，我建议为您可以直接从 Global.asax 调用的消息创建一个日志记录函数。就像是：

```
 void Application_Error(object sender, EventArgs e)
 {
      Exception ex = Server.GetLastError();
      LogException(ex);
      HttpContext.Current.Response.Redirect("~/Error.aspx");
 }

 //Somewhere Else
 void LogException(Exception ex)
 {
      WriteExceptionToEndOfTextFile(ex);
      SendEmail();
 } 
```

这样，如果有人决定要抑制我们的异常，他们仍然可以正确处理异常。

# c - 使用 gcc 命令行从 .c 文件构建 .so 文件

> ID：14884126
> 
> 赞同：198
> 
> 时间：2013-02-14T21:11:53.870
> 
> 标签：c, linux, gcc, shared-libraries

我正在尝试为 Linux 动态库（.so 文件）创建一个 hello world 项目。所以我有一个文件hello.c：

```
#include <stdio.h>
void hello()
{
    printf("Hello world!\n");
} 
```

如何`hello()`从命令行使用 gcc 创建导出的 .so 文件？

* * *

## 回答 #1

> 赞同：367
> 
> 时间：2013-02-14T21:14:47.120

要生成共享库，您首先需要使用`-fPIC`（位置无关代码）标志编译您的 C 代码。

```
gcc -c -fPIC hello.c -o hello.o 
```

这将生成一个目标文件 (.o)，现在您使用它并创建 .so 文件：

```
gcc hello.o -shared -o libhello.so 
```

**编辑**：评论中的建议：

您可以使用

```
gcc -shared -o libhello.so -fPIC hello.c 
```

一步完成。——[乔纳森·莱弗勒](https://stackoverflow.com/users/15168/jonathan-leffler)

我还建议在您的命令中添加`-Wall`以获取所有警告并`-g`获取调试信息。`gcc`——[巴西尔·斯塔林克维奇](https://stackoverflow.com/users/841108/basile-starynkevitch)

# php - foreach 循环重复数组中的最后一项

> ID：14884131
> 
> 赞同：5
> 
> 时间：2013-02-14T21:12:06.297
> 
> 标签：php, arrays, loops, foreach

我正在尝试编写一个 foreach 循环，它将通过邮件为每个数组元素发送单独的报告，但它只输出最后一个元素。我已经尝试过很多方式来写这篇文章，以至于我想我开始重复自己了。请帮忙。

```
$items = array(1 => 1, 2 => 2, 3 => 3, 7 => 4, 8 => 5,9 => 6, 17 => 8, 18 => 338, 19 => 50, 23 => 52, 11 => 7, 16 => 44,  4 => 11, 5 => 22, 6 => 33);

foreach ($items as $id => $number) {
//I am querying a pervasive database here
$wtdVar = $dbx->getOne('SELECT SUM(sales) FROM table WHERE date1 >= '.$wkstart3.' AND date2 <= '.$today3.' AND category <> \'ABC\' AND number = '.$number);

if (DB::isError($wtdVar)) {
    echo '<div class="error">Error: - '.$wtdVar->getDebugInfo().'</div>';
}

//get the goal for the week so far, use date variables with 2 at the end for postgres queries
$wtdgoal = $db->getOne("SELECT SUM(goal) FROM table2 WHERE id = $id AND gdate BETWEEN '$wkstart2' AND '$today2'");
if (DB::isError($wtdgoal)) {
    echo '<div class="error">Error: - '.$wtdgoal->getDebugInfo().'</div>';}
} 
```

数组中有 15 项，报表的电子邮件工作正常，但报表中的数据是最后一项 15x。有更多的数据，并且有一个静态变量，其中我有数组元素它可以完美地工作，但我需要它循环，因为我必须在很多地方使用这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-02T07:47:43.143

您需要设置数组以包含所有检索到的值。

```
$wtdVars = array();
$wtdgoals = array();

foreach ($items as $id => $number) {
    //I am querying a pervasive database here
    $wtdVar = $dbx->getOne('SELECT SUM(sales) FROM table WHERE date1 >= '.$wkstart3.' AND date2 <= '.$today3.' AND category <> \'ABC\' AND number = '.$number);

    $wtdVars[] = $wtdVar;

    if (DB::isError($wtdVar)) {
        echo '<div class="error">Error: - '.$wtdVar->getDebugInfo().'</div>';
    }

    //get the goal for the week so far, use date variables with 2 at the end for postgres queries
    $wtdgoal = $db->getOne("SELECT SUM(goal) FROM table2 WHERE id = $id AND gdate BETWEEN '$wkstart2' AND '$today2'");

    $wtdgoals[] = $wtdgoal;

    if (DB::isError($wtdgoal)) {
        echo '<div class="error">Error: - '.$wtdgoal->getDebugInfo().'</div>';
    }
} 
```

然后大概在您的报告中，您有一个循环，该循环一直使用`$wtdVar`或`$wtdgoal`- 相反，这应该使用`$wtdVars[$i]`，`$wtdgoals[$i]`where`$i`是一个从零开始的变量，随着报告中循环的每次迭代而递增。

# php - 实现一个聊天网络应用程序

> ID：14884132
> 
> 赞同：1
> 
> 时间：2013-02-14T21:12:15.777
> 
> 标签：php, web-applications, push-notification, chat, real-time

我需要开发一个具有聊天功能的 Web 应用程序，我想知道是否有任何复杂的方法可以创建一个带有推送引擎的实时 Web 应用程序。

我知道 jQuery，我可以创建一个聊天 Web 应用程序，它在客户端检查每个时期的新消息并显示它们，但我不喜欢这个解决方案，我想知道是否有更好的解决方案方法来做到这一点。

在我的研究中，我发现了[Ajax Push Engine](http://www.ape-project.org/)项目的存在，它看起来像我需要的，但是当我在他们的网站上导航时，我发现它做得不是很好而且不知何故不完整，所以我想知道 API 是否足够稳定如果没有其他解决方案，请放入生产环境中？

抱歉，如果我写得很长，任何**帮助/提示/链接/建议**都将受到欢迎:)

**编辑**

我想指定我在服务器端使用 PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:16:11.040

这是 NodeJs 中的一个实现。

[http://dhotson.tumblr.com/post/271733389/a-simple-chat-server-in-node-js](http://dhotson.tumblr.com/post/271733389/a-simple-chat-server-in-node-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:22:59.540

我最近（2012 年）在 ASP.NET MVC3 中开发了一个应用程序，我使用[SignalR](http://signalr.net/)在服务器和客户端之间进行实时消息传递。在[他们自己的网站上](http://signalr.net/)，他们这样描述 SignalR：

> ASP.NET SignalR 是一个面向 ASP.NET 开发人员的新库，它可以非常简单地将实时 Web 功能添加到您的应用程序中。什么是“实时网络”功能？它是让您的服务器端代码实时将内容推送到连接的客户端的能力。

...他们给出了以下示例，说明您可以将 SignalR 用于什么用途：

> SignalR 可用于向您的 ASP.NET 应用程序添加任何类型的“实时”Web 功能。*虽然聊天经常被用作示例*，但您可以做更多的事情。任何时候用户刷新网页以查看新数据，或页面实现 Ajax 长轮询以检索新数据，都可以使用 SignalR。

此外，根据我的经验，我相信它的设置非常简单，易于使用，并且有一个很好的[github 页面](https://github.com/SignalR/SignalR)，其中包含编写良好的文档，可以让你立即开始。我可以强烈推荐它:)

# javascript - javascript代码中的标签？

> ID：14884134
> 
> 赞同：-2
> 
> 时间：2013-02-14T21:12:25.940
> 
> 标签：javascript, jquery

我正在使用从网上搜索到的名为[Apprise](http://thrivingkings.com/read/Apprise-The-attractive-alert-alternative-for-jQuery)的插件。到目前为止，它已经很好地满足了我的需要。但是，我想通知 facebook 登录插件，为此我需要以下代码：

```
<fb:login-button scope='email,publish_stream'>
Login
</fb:login-button>  

<script type='text/javascript' src='http://connect.facebook.net/en_US/all.js'></script>
<script>
window.fbAsyncInit = function() {
    FB.init({
        appId: '123456789',
        cookie: true,
        xfbml: true,
        oauth: true
    });
    FB.Event.subscribe('auth.login', function(response) {
        window.location = '/fb_redirect.php';
    });
    FB.Event.subscribe('auth.logout', function(response) {
        window.location.reload();
    });
    };
    (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
        '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    }()); 
```

任何你想被告知的事情都可以通过把

```
apprise(); 
```

在 JavaScript 中。但是，将`<script></script>`标签放在 JS 代码中 ( `apprise();`) 会导致各种混乱，因为不清楚 JS 代码的结束位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:17:28.880

适用于`<script>`块和内联 Javascript 的方法是`\uxxxx`，其中`xxxx`是十六进制字符代码。

*   `<`-`\u003c`
*   `>`-`\u003e`
*   `"`-`\u0022`
*   `'`-`\u0027`
*   `\`-`\u005c`
*   `&`-`\u0026`

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/YE3N4/)]]]

HTML：

```
<div onClick="alert('Hello \u0022>')">click me</div>

<script>
    var s = 'Hello \u003c/script\u003e';
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:14:55.427

如果我正确阅读您的问题，您需要分解关闭脚本标记：

```
var test = '...... </scr'+'ipt>......'; 
```

[JavaScript 字符串中的脚本标记](https://stackoverflow.com/questions/1659749/script-tag-in-javascript-string)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:15:16.640

尝试分解标签：

```
apprise('<scri' + 'pt>alert("hello");</sc' + 'ript>'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T23:04:03.590

您只需要转义`/`字符：

*坏*,异常

```
<script>
    var html = "<script></script>";
</script> 
```

*好的*

```
<script>
    var html = "<script><\/script>";
</script> 
```

# java - I/O 完成端口和标准输出处理

> ID：14884135
> 
> 赞同：0
> 
> 时间：2013-02-14T21:12:26.643
> 
> 标签：java, jna, iocp

我正在为进程管理库使用 I/O 完成端口（是的，这是有原因的）。您可以在这里找到我所说的内容的来源：[https](https://github.com/jcommon/process/blob/master/src/main/java/jcommon/process/platform/win32/Win32ProcessLauncher.java) ://github.com/jcommon/process/blob/master/src/main/java/jcommon/process/platform/win32/Win32ProcessLauncher.java （采取查看第 559 和 1137 行——是的，该类需要重构和清理）。

我正在启动一个子进程并使用命名管道（不是匿名管道 b/c 我需要异步、重叠的 ReadFile()/WriteFile()）来处理子进程的 stdout 和 stderr。这主要是实际工作。在测试中，我启动了 1000 个并发进程并监控它们的输出，确保它们发出正确的信息。通常，要么全部 1,000 个工作正常，要么其中 998 个工作正常，剩下的几个有问题。

这两个进程表明并非所有消息都被接收。我知道消息正在输出，但是该进程的处理 GetQueuedCompletionStatus() 的线程从读取中返回，并带有 ERROR_BROKEN_PIPE。

预期的行为是操作系统（或 C 库）将在进程退出时刷新标准输出缓冲区上的任何剩余字节。然后，我希望这些字节在出现管道损坏错误之前排队到我的 iocp 中。相反，这些字节似乎消失了，读取以 ERROR_BROKEN_PIPE 完成——在我的代码中，这导致它启动子进程的拆卸。

我编写了一个简单的应用程序来测试和找出行为（[https://github.com/jcommon/process/blob/master/src/test/c/stdout-1.c](https://github.com/jcommon/process/blob/master/src/test/c/stdout-1.c)）。此应用程序禁用 stdout 上的缓冲，因此应立即有效地刷新所有写入。在我的测试中使用该程序会产生与启动“cmd.exe /c echo hi”相同的问题。无论如何，当进程退出时，应用程序（或操作系统？）不应该刷新标准输出上的任何剩余字节吗？

源代码是 Java，使用直接映射的 JNA，但 C/C++ 工程师应该很容易理解。

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T16:51:56.803

您确定非零 ioSize 不会发生损坏的管道错误吗？如果 ioSize 不为零，那么您应该处理读取的数据并注意文件现在已关闭。

执行此操作的我的 C++ 代码基本上忽略`ERROR_BROKEN_PIPE`并`ERROR_HANDLE_EOF`只是等待下一次读取尝试失败并出现上述错误之一，或者当前读取完成并读取零字节。有问题的代码适用于文件和管道，在运行您描述的那种测试时，我从未见过您描述的问题。

# python - 在 matplotlib 中绘制数据后调整标记的颜色、大小和类型

> ID：14884138
> 
> 赞同：3
> 
> 时间：2013-02-14T21:12:47.303
> 
> 标签：python, matplotlib, traits

我绘制了一堆散点然后重绘画布：

```
self.display_points = ax.scatter(x,y)
wx.CallAfter(self.display.canvas.draw) 
```

我有一个包含颜色的对象。如果用户从 GUI 更改了此项，我希望能够更改点的颜色而无需重新绘制数据。

```
def _color_changed(self):
    if hasattr(self, '_display_points'): 
        self._display_points.set_facecolors(self.color)
        wx.CallAfter(self.display.canvas.draw) 
```

这是如何为标记的大小和标记的类型完成的......即。应该`X`改变`_display_points.set_X`每个绘制的组件。是否可以在某个地方找到这些属性？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T00:08:23.113

`scatter`返回一个[`PathCollection`](http://matplotlib.org/api/collections_api.html#matplotlib.collections.PathCollection)对象，你可以看到它有一个相对有限的 api 用于事后设置。类`Collection`族交换了以后更新的能力以获得更有效的绘图。

如果您没有使用 scatter 分别设置每个点的大小和颜色的能力，那么最好使用

```
self.display_points, = ax.plot(x, y, marker='o', linestyle='none') 
```

这会给你一个`Line2D`对象，看起来和你的散点图一样。 `Line2D`有一个更灵活的[api](http://matplotlib.org/api/artist_api.html#matplotlib.lines.Line2D)，其中包括`set_marker`和`set_markersize`.

# silverlight-5.0 - 为什么我在 Silverlight 5 中添加项目引用时出现黄色感叹号？

> ID：14884139
> 
> 赞同：2
> 
> 时间：2013-02-14T21:12:48.593
> 
> 标签：silverlight-5.0

我将一个类库项目添加到 Silverlight 业务应用程序项目中。类库项目包含将在解决方案中使用的实体。我在解决方案的客户端和 Web 项目中都添加了对库的引用，但是，尽管它似乎有效，但在 Web 项目中，它用黄色感叹号显示引用。（！）有谁知道这是什么以及它的含义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-01T20:40:26.080

确保在所有项目中都以相同的 .NET Framework 版本为目标。单击项目上的属性。在侧选项卡上选择“应用程序”。验证所有项目中的目标框架匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:13:46.237

Visual Studio 可能没有正确刷新 (!) 符号。尝试重建您的解决方案并重新打开 VS。

此外，请确保通过“项目”选项卡而不是“浏览”将引用添加到输出文件夹中的 dll。

# asp.net - 通过 ReportViewer 导出大型 SSRS 报告时出错

> ID：14884146
> 
> 赞同：0
> 
> 时间：2013-02-14T21:13:05.397
> 
> 标签：asp.net, asp.net-mvc-3, ssrs-2008, reportviewer, connection-timeout

我有一个 MVC3 应用程序，它使用 Microsoft ReportViewer Web 控件提供 SQL Server 2008 报告。通常一切正常，除非将大型报告导出为 PDF。

在导出的 2 分钟后，我收到以下服务器错误：

```
Exception Details: System.Web.HttpException: Request timed out 
```

深入挖掘错误，SQL 报告服务器日志非常有用：

```
Error: "RsException: A client has disconnected from Report Server"
Error Code: 800708CA: No connection available 
```

所以，我的猜测是 ReportViewer 连接超时是某处的配置设置，但我不知道在哪里。我们已经查看了[此处提到](http://blogs.msdn.com/b/mariae/archive/2009/09/24/troubleshooting-timeout-errors-in-reporting-services.aspx)的所有配置设置，但没有任何效果 - 超时总是发生在导出后 2 分钟！

不幸的是，我没有很多 SSRS 配置知识，实际托管服务器的公司（客户的 IT 部门）也没有。所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:26:39.070

提交这个答案，因为它有效。

也许在[此处](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.100%29.aspx)查看 web.config 文件的`executionTimeout`设置。默认值为 110 秒。

# mysql - 如何使用 ASP.NET VB 简单地创建到远程 mySQL 数据库的连接

> ID：14884159
> 
> 赞同：0
> 
> 时间：2013-02-14T21:14:15.413
> 
> 标签：mysql, .net, webforms

我已经在网上搜索了几天，我想做的就是连接到数据库，添加记录，然后关闭连接。就是这样，我不需要提取任何数据或填充任何列表或表格。只需添加一条记录。

使用经典的 asp，我可以闭上眼睛做到这一点……但这似乎是我遇到过的最困难的事情。它是一个远程 mySQL 数据库。

我在.net 中使用webforms，脚本已完成，已将所有表单条目加载到变量中，准备好在我设法连接到数据库时放入我的SQL 语句中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:20:17.283

我认为您需要在 web.config 中创建一个连接字符串，如下所示：

```
Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
```

采用：

```
<connectionStrings>
    <add name="MyRemoteDb"
      connectionString="Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;" />
  </connectionStrings> 
```

参考。 [http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

# c# - 在 aspx 中创建具有继承的部分类，无需重新编译

> ID：14884165
> 
> 赞同：1
> 
> 时间：2013-02-14T21:14:46.587
> 
> 标签：c#, asp.net, vb.net

我对 C#/VB 作为一种 Web 编码语言真的很陌生，所以如果这是初级的，请尽早道歉

我有一个供应商 .NET 解决方案，我需要添加一个 .aspx 页面，我已经设法做到了，但是缺少后端 .vb 文件代码放置的 HTML 项（我们有未编译的代码以及网站代码）

例如，未编译的 Report.aspx

```
 <%@ Page Language="vb" AutoEventWireup="false" Inherits="jobber.VU.Report"
 CodeFile="Report.aspx.vb" %>

 <%@ Register TagPrefix="VU" Namespace="jobber.VU.Controls"  %> 
```

编译

```
 <%@ page language="vb" autoeventwireup="false" inherits="jobber.VU.Report, 
  App_Web_report.aspx.cdcab7d2" enableEventValidation="false" %>

 <%@ Register TagPrefix="VU" Namespace="jobber.VU.Controls"  %> 
```

VB后端

```
Namespace jobber.VU
    Partial Class Report
        Inherits ActionBase

    End Class
End Namespace 
```

如何在 ASPX 页面中复制它？

我试过这个

```
 <%@ page language="vb" AutoEventWireup="false" Debug="true" %>
 <%@ Register TagPrefix="VU" Namespace="jobber.VU.Controls"  %>
 <%@ Import Namespace="jobber.VU.ActionBase"  %>
 <VU:metatags id="headers1" format="none" runat="server"></VU:metatags> 
```

并且 VU.Controls 恢复正常，但 ActionBase 类没有执行

我也尝试过`<script runat=server`，但从未成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:09:58.923

您可以从同一页面继承多个页面。因此，如果您想复制“jobber.VU.Report 页面”的功能，只需添加一个新页面并从中继承即可。

# c# - 如何使用多个条件 + OR 进行 linq 连接

> ID：14884169
> 
> 赞同：2
> 
> 时间：2013-02-14T21:14:56.923
> 
> 标签：c#, linq

我想知道如何使用多个条件和 OR 进行 linq 连接。

例子：

```
var i = (from d in context.Table1
         join b in context.Table2
         on new {r1 = d.col1, r2 = d.col2}
         equals new {r1 = b.col1, r2 = b.col2}
         || b.col3.ToLower() equals "xyz"
         into bd
         from k in bd.DefaultIfEmpty() 
```

手术室部分正在爆炸。

SQL 示例：

```
SELECT * FROM Table1 T1
LEFT JOIN Table2 T2 ON (T1.Col1 = T2.Col1 AND T1.Col2 =T2.Col2) 
                     OR (T1.Col1 = T2.Col1 AND T2.Col2 = 'XYZ') 
```

解释：

T1.Col1 必须匹配 T2.COl1 - 需要加入

然后

T1.Col2 必须匹配 T2.Col2 除非 T2.COl2 = "XYZ" 然后只加入 Col1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:40:39.047

尝试将“join”移动到 ANSI 82 的“Where”子句中：

```
var i = (from d in context.Table1
         from b in context.Table2
         where (b == null)
               || (d.col1 = b.col1 && d.col2 == b.col2 ) 
               || (b.col3.ToLower() == "xyz") 
```

# c# - 使用 Windows.Automation，我可以通过正则表达式找到 AutomationElement 吗？

> ID：14884173
> 
> 赞同：1
> 
> 时间：2013-02-14T21:14:59.077
> 
> 标签：c#, windows, automation, ui-automation, automationelement

我有一个对象树，它在表父级中有行对象。我正在尝试将所有这些行放入`AutomationElementCollection`

```
AutomationElementCollection asdf = ParentTableObj.FindAll
     (
     TreeScope.Children,
     new PropertyCondition
          (
          AutomationElement.NameProperty,
          "I want to use regex here"
          )
     ); 
```

所有行都`AutomationElement.NameProperty`包含字符串“行”。但是，它们是该字符串的变体 - 例如“Row1”、“Row2”、“TopRow”……

似乎我可能遗漏了一些东西，因为该`FindAll`方法允许您定义`TreeScope`并找到与提供的参数`AutomationElement`匹配的any 。`Condition`我只是希望我的条件不受限制，因为我已经可以通过`TreeScope`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-16T18:18:06.613

```
//Example :
AutomationElement element = FindFirstDescendant( 
    AutomationElement.FromHandle(windows_hWnd), 
    (ele)=>Regex.IsMatch( ele.Current.Name, pattern)
);

//The generic method to find a descendant element:
public static AutomationElement FindFirstDescendant(AutomationElement element, Func<AutomationElement, bool> condition) {
    var walker = TreeWalker.ControlViewWalker;
    element = walker.GetFirstChild(element);
    while (element != null) {
        if (condition(element))
            return element;
        var subElement = FindFirstDescendant(element, condition);
        if (subElement != null)
            return subElement;
        element = walker.GetNextSibling(element);
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T02:55:09.393

[正如文档所述](http://msdn.microsoft.com/en-us/library/system.windows.automation.propertyconditionflags.aspx)，您可以要求进行不区分大小写的比较。没有“正则表达式”标志。您将不得不手动进行过滤。

# html - css active 的复杂情况也可以在 IE 中工作（里面的 jsfiddle）

> ID：14884176
> 
> 赞同：0
> 
> 时间：2013-02-14T21:15:12.070
> 
> 标签：html, css, internet-explorer, hover

我正在尝试制作一个由多层组成的按钮。最后一层应该是可点击层，点击应该控制前一层的颜色。

这适用于除 IE 和“活动”之外的所有 4 种主要浏览器。我如何让它在 IE 中工作？

jsfiddle在这里-> [http://jsfiddle.net/4vaY6/197/](http://jsfiddle.net/4vaY6/197/)

我这样做是因为我希望整个区域都是可点击的，它不应该有盲点。

```
<div class = "div1">
    <div class = "div2">        
    </div>
</div>

.div2
{
width: 100%;
height: 100%;
background-color: black;
}

.div1
{
position: absolute;
width: 350px;
height: 100px;
}
.div1:hover .div2 {background-color:yellow;}        
.div1:active .div2 {background-color: grey;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:58:35.683

根据[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)：

> IE 8-10（也可能是旧版本）有一个小错误：在嵌套元素上单击鼠标不会触发 :active。

IE7 的情况更糟。

您可以使用 JavaScript 来模拟 :active 行为：

代替

```
.div1:hover .div2 {background-color:yellow;}        
.div1:active .div2 {background-color: grey;} 
```

和

```
.hover {background-color: yellow;}
.active {background-color: grey;} 
```

并添加以下内容（如果您使用 jQuery）：

```
<script type="text/javascript">
$('.div1').hover(function(){
    $('.div2').toggleClass('hover');
});

$('.div1').mousedown(function(){
    $('.div2').addClass('active');
}).mouseup(function(){
    $('.div2').removeClass('active');
});
</script> 
```

或者，如果您使用 MooTools：

```
<script type="text/javascript">
$$('.div1').addEvents({
    'mouseenter': function() { $$('.div2').addClass('hover'); },
    'mouseleave': function() { $$('.div2').removeClass('hover'); },
    'mousedown': function() { $$('.div2').addClass('active'); },
    'mouseup': function() { $$('.div2').removeClass('active'); },
});
</script> 
```

jsFiddle：http: [//jsfiddle.net/4vaY6/201/](http://jsfiddle.net/4vaY6/201/)

# c# - 线和标记 有数据源吗？

> ID：14884179
> 
> 赞同：0
> 
> 时间：2013-02-14T21:15:35.647
> 
> 标签：c#, wpf, datasource, linegraph, dynamic-data-display

我正在使用 DynamicDataDisplay 来绘制我的实时信号。我想在我的图表上同时显示标记和线条，所以我认为我应该使用`LineAndMarker<MarkerPointsGraph>`; 当 xy 数据更新时，我的逻辑是只更新日期源，而不是添加更多的图形线。在那种情况下，如果数据很大并且更新很快，我仍然可以获得性能。我的问题是：我没有看到 DataSource 域`LineAndMarker<MarkerPointsGraph>`，所以我不知道如何更新数据？这是我使用的示例，`LineGraph`而不是`LineAndMarker<MarkerPointsGraph>`; 但`LineGraph`似乎没有处理标记。

```
for (int i = 0; i < _nColorChannels; i++)
{
    if (_dataX[i].Length == _dataY[i].Length)
    {
        EnumerableDataSource<int> xOneCh = new EnumerableDataSource<int>(_dataX[i]);
        xOneCh.SetXMapping(xVal => xVal);
        EnumerableDataSource<int> yOneCh = new EnumerableDataSource<int>(_dataY[i]);
        yOneCh.SetYMapping(yVal => yVal);
        CompositeDataSource ds = new CompositeDataSource(xOneCh, yOneCh);

        Action UpdateData = delegate()
        {
            ((LineGraph)plotter.Children.ElementAt(startIndex + i)).DataSource = ds;

        };

        this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal,
                               UpdateData);
    }
} 
```

任何建议表示赞赏。谢谢你。缺口

一点更新：似乎`MarkerPointsGraph`有 DataSource，但我如何创建`MarkerPointsGraph`可以的实例`AddLineGraph()`？类似于如何`LineGraph`创建版本：

```
LineGraph lg = new LineGraph();
lg = plotter.AddLineGraph(dsOneCh, _lineprofileColor[i], marker, "Data"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:14:38.917

像这样的东西：

```
if (_dataX[i].Length == _dataY[i].Length)
                    {
                        EnumerableDataSource<int> xOneCh = new EnumerableDataSource<int>(_dataX[i]);
                        xOneCh.SetXMapping(xVal => xVal);
                        EnumerableDataSource<int> yOneCh = new EnumerableDataSource<int>(_dataY[i]);
                        yOneCh.SetYMapping(yVal => yVal);
                        CompositeDataSource ds = new CompositeDataSource(xOneCh, yOneCh);

                        Action UpdateData = delegate()
                        {

                            ((PointsGraphBase)plotter.Children.ElementAt(startIndex + i + 1)).DataSource = ds; 

                        };

                    this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, UpdateData);
                } 
```

投射到`PointsGraphBase`

# spring - org.hibernate.exception.GenericJDBCException：无法打开连接

> ID：14884180
> 
> 赞同：1
> 
> 时间：2013-02-14T21:15:37.970
> 
> 标签：spring, hibernate

我使用 Spring 3.2.0 和相同版本的 Spring security 和 Oracle 10g。最近，我将 Hibernate 从 3.2.5 升级到了[4.2.0.CR1](http://sourceforge.net/projects/hibernate/files/hibernate4/4.2.0.CR1/hibernate-release-4.2.0.CR1.zip/download)。在此更新中，Tomcat 控制台上会出现以下警告。

```
WARN [http-apr-8080-exec-11] (JdbcServicesImpl.java:169) - HHH000342: Could not obtain connection to query metadata : invalid arguments in call
WARN [http-apr-8080-exec-23] (SqlExceptionHelper.java:143) - SQL Error: 17433, SQLState: null 
ERROR [http-apr-8080-exec-23] (SqlExceptionHelper.java:144) - invalid arguments in callarguments in call 
```

尝试运行应用程序时会导致以下异常。

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Could not open connection
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:927)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:152)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.multipart.support.MultipartFilter.doFilterInternal(MultipartFilter.java:119)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at filter.NoCacheFilter.doFilter(NoCacheFilter.java:102)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:50)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:144)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Could not open connection
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:428)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:334)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at $Proxy373.getUserName(Unknown Source)
    at controller.HomeController.showForm(HomeController.java:31)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
    ... 70 more
Caused by: org.hibernate.exception.GenericJDBCException: Could not open connection
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:54)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:221)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:157)
    at org.hibernate.internal.SessionImpl.connection(SessionImpl.java:546)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:342)
    ... 90 more
Caused by: java.sql.SQLException: invalid arguments in call
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:113)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:147)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:209)
    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:236)
    at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:454)
    at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:802)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:190)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:173)
    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:164)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:149)
    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:128)
    at org.hibernate.service.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:141)
 WARN [http-apr-8080-exec-37] (SqlExceptionHelper.java:143) - SQL Error: 17433, SQLState: null
ERROR [http-apr-8080-exec-37] (SqlExceptionHelper.java:144) - invalid arguments in call
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:292)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:214)
    ... 93 more 
```

* * *

我的整个`application-context.xml`文件如下。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <context:annotation-config/>

    <bean id="dataSource"
          class="org.springframework.jdbc.datasource.DriverManagerDataSource"
          p:driverClassName="oracle.jdbc.OracleDriver"
          p:url="jdbc:oracle:thin:@localhost:1521:xe"
          p:username="wagafashiondb"
          p:password="root" />

        <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
          <property name="dataSource" ref="dataSource" />

      <property name="annotatedClasses">
        <list>                
            <!--Entity classes like, <value>Fully qualified class name</value>-->
        </list>
    </property>

      <property name="hibernateProperties">
        <value>
          hibernate.dialect=org.hibernate.dialect.Oracle10gDialect
        </value>        
      </property>
    </bean>

    <bean id="transactionManager"
          class="org.springframework.orm.hibernate4.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory" />

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <!--Bean registration-->

    <bean id="filterMultipartResolver"
          p:resolveLazily="true"
          p:maxUploadSize="10000000000"
          class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/>
</beans> 
```

由于我还没有使用`EntityManager`，因此我在此文件中列出了当前正在使用的所有实体类。

我`Oracle thin-10.2.0.5.0`在类路径上有驱动程序。

在 Google 上搜索，我对此文件进行了必要的更改，例如，

```
org.springframework.orm.hibernate3.HibernateTransactionManager 
```

已被替换为

```
org.springframework.orm.hibernate4.HibernateTransactionManager 
```

和

```
org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean 
```

已被替换为

```
org.springframework.orm.hibernate4.LocalSessionFactoryBean 
```

* * *

在我的`web.xml`档案中，

```
org.springframework.orm.hibernate3.support.OpenSessionInViewFilter 
```

已被替换为

```
org.springframework.orm.hibernate4.support.OpenSessionInViewFilter 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T10:17:37.580

最初，我在类路径中添加了所有 jar 文件，这些文件与我下载的 zip 文件一起提供。

我已经删除了所有这些，只是添加了文件夹中可用的 jar 文件，`lib/required`应用程序像往常一样成功运行。

为了验证 Hibernate 版本，我使用了这种方法，

```
System.out.println("Version - "+org.hibernate.Version.getVersionString()); 
```

我可以在 Tomcat 控制台上看到 - 版本 -`4.2.0.CR1`因此应用程序现在正在使用更新版本的 Hibernate 运行，即`4.2.0.CR1`.

[`org.hibernate.Version.getVersionString());`在我使用的以前版本的 Hibernate 中不可用 - `3.2.5`。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T00:39:09.647

我遇到了类似的错误，这是因为 spring-security.xml 中的服务器地址错误

# symfony - 学说查询构建器限制和偏移

> ID：14884183
> 
> 赞同：28
> 
> 时间：2013-02-14T21:15:55.847
> 
> 标签：symfony, orm, doctrine-orm

我是一个 symfony 初学者，我想用这个框架做一个博客。我使用存储库通过这种方法获取主页文章：

```
public function getHomeArticles($offset = null, $limit = null)
{
    $qb = $this->createQueryBuilder('a')
               ->leftJoin('a.comments', 'c')
               ->addSelect('c')
               ->addOrderBy('a.created', 'DESC');

    if (false === is_null($offset))
        $qb->setFirstResult($offset);

    if (false === is_null($limit))
        $qb->setMaxResults($limit);

    return $qb->getQuery()
              ->getResult();
} 
```

所以在我的数据库中我有 10 篇文章。在我的 BlogController 我使用：

```
$blog = $em->getRepository('TestBlogBundle:Article')
                ->getHomeArticles(3,4); 
```

有了这个，我想要 4 篇文章。但作为回报，我也有一篇文章。

问题是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-15T01:04:06.517

如果您的查询包含 fetch-joined 集合，这是一个[已知问题](https://groups.google.com/forum/?fromgroups=#!topic/doctrine-user/BGH9a8zFFn0)，需要小心使用。`setFirstResult()``setMaxResults()`

如关于[First 和 Max Result Items](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#first-and-max-result-items-dql-query-only)所述：

> 如果您的查询包含指定结果限制方法的 fetch-joined 集合，则无法按预期工作。Set Max Results 限制了数据库结果行的数量，但是在 fetch-joined 集合的情况下，一个根实体可能出现在许多行中，有效地水合少于指定数量的结果。

相反，您可以：

1.  延迟加载

2.  使用[分页器](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/pagination.html#pagination)（如@Marco 所述）

3.  利用[`Doctrine\Common\Collections\Collection::slice()`](https://github.com/doctrine/collections/blob/v1.0/lib/Doctrine/Common/Collections/Collection.php#L231-L242)

# php - 出现意外的语法错误

> ID：14884186
> 
> 赞同：0
> 
> 时间：2013-02-14T21:16:20.380
> 
> 标签：php, syntax-error

试图创建一个表单并从教程站点获取它......在我看来，我有正确数量的括号。应该少吗？无法弄清楚这个错误。

**语法错误，第 68 行出现意外的 '{' ../contact.php**

```
<?php
    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];
    $from = 'From: Bunch'; 
    $to = 'me@hotmail.com'; 
    $subject = 'Hi There!';

    $body = "From: $name\n E-Mail: $email\n Message:\n $message";

if ($_POST['submit']) {
    if ($name != '' && $email != '') {           
        if (mail ($to, $subject, $body, $from)) { 
            echo '<p>Your message has been sent!</p>';
        } else { 
            echo '<p>Something went wrong, go back and try again!</p>'; 
        } else {
            echo '<p>You need to fill in all required fields!!</p>';
        }

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T21:17:44.437

你有两个`else`子句，这是一个语法错误。

```
if (...) {
  ...
} else if (...) { 
   ...
} else if (...) {
  ...
} else {  <--only ONE allowed
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:20:36.000

[Marc B 的回答](https://stackoverflow.com/a/14884205/28071)是肯定的，但我认为你会这样做：

```
if ($_POST['submit']) {
    if ($name != '' && $email != '') {           
        if (mail ($to, $subject, $body, $from)) { 
            echo '<p>Your message has been sent!</p>';
        } else { # from "if (mail ($to, $subject, $body, $from)) {"
            echo '<p>Something went wrong, go back and try again!</p>'; 
        }
    } else { # from "if ($name != '' && $email != '') {"
            echo '<p>You need to fill in all required fields!!</p>';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:27:59.090

改变

```
if ($name != '' && $email != '') {           
        if (mail ($to, $subject, $body, $from)) { 
            echo '<p>Your message has been sent!</p>';
        } else { 
            echo '<p>Something went wrong, go back and try again!</p>'; 
        } else {
            echo '<p>You need to fill in all required fields!!</p>';
        }

    } 
```

至

```
if ($name != '' && $email != '') {           
        if (mail ($to, $subject, $body, $from)) { 
            echo '<p>Your message has been sent!</p>';
        } else { 
            echo '<p>Something went wrong, go back and try again!</p>'; 
        } 

    }else {
            echo '<p>You need to fill in all required fields!!</p>';
        } 
```

# python - 如何检测用户是否输入了任何数据作为控制台输入

> ID：14884193
> 
> 赞同：2
> 
> 时间：2013-02-14T21:16:46.840
> 
> 标签：python, python-2.7, twisted, user-input

有没有办法找出用户是否在终端窗口中输入了任何数据而不必使用阻塞`stdin`。

我正在使用twisted python 实现一个聊天客户端，客户端代码应该显示来自其他连接客户端的消息。一旦客户端输入一条消息并按回车键，我希望它运行一个事件驱动循环，将消息发送到服务器，然后将其广播给其他所有客户端。

简而言之，我正在尝试寻找一种方法来检测用户何时按下 ENTER 或在终端中输入一些文本而不必阻止程序。

更新：到目前为止的客户端代码..

```
class MyClientProtocol( protocol.Protocol ):
    def sendData( self ):
            message = raw_input( 'Enter Message: ' )
            if message and ( message != "quit()" ):
                logging.debug( " ...Sending %s ...", message )
                self.transport.write( str( message ) )
            else:
                self.transport.loseConnection()

    def connectionMade( self ):
        print "Connection made to server!"

    def dataReceived( self, msg ):
        print msg
        self.sendData()

class MyClientFactory( protocol.ClientFactory ):
    protocol = MyClientProtocol
    clientConnectionLost = clientConnectionFailed = lambda self, connector, reason: reactor.stop()

reactor.connectTCP( HOST, PORT, MyClientFactory() )
reactor.run() 
```

此代码目前仅在从服务器接收到某些内容后才接受用户输入，因为我正在调用`sendData`。`dataReceived`关于如何让这个拾取用户输入的数据以及继续从服务器获取数据的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:35:46.767

如果你已经在使用 Twisted，他们有插件可以将几乎*任何东西*挂接到事件循环中。

但是对于`stdin`，你甚至不需要插件；它是内置的。其中一个库存示例甚至可以准确显示您正在尝试做的事情。就是那个名字[`stdin.py`](http://twistedmatrix.com/documents/12.3.0/core/examples/stdin.py)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:21:53.180

我最近也玩过这个。我所做的只是启动一个单独的线程（使用[`threading`](http://docs.python.org/2/library/threading.html)模块）等待用户输入，并且主线程正在接收和打印广播消息，例如：

```
def collect_input():
   while True:
      msg = raw_input()
      handle(msg) # you'll need to implement this

# in client code
import threading
t = threading.Thread(target=collect_input)
t.start() 
```

我不确定这是否是一个好主意，但这是我想到的第一个想法，而且似乎奏效了。

注意：我没有使用`Twisted`，只是`sockets`。正如您从[另一个答案](https://stackoverflow.com/a/14884476/1258041)中看到的那样，您不需要使用 Twisted 来实现它。

# java - 完成数组的第一个元素

> ID：14884203
> 
> 赞同：2
> 
> 时间：2013-02-14T21:17:28.403
> 
> 标签：java, arrays, final, finalize

说，我有一个类，其中包含一个整数数组。

```
Integer[] numbers; 
```

另外，我有一些简单的构造函数来初始化我的数组：

```
public Program()
{
    numbers = new Integer[11];
    numbers[0] = null;
} 
```

如您所见，我有一个`11`元素数组。

关键是我永远不会用 index 改变第一个`0`。

有没有办法完成我的数组的第一个元素，所以它不能改变？

就像`final`变量一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:21:04.117

不，你不能用数组来做到这一点。事实上，无法将数组元素设为只读是在可以从外部修改数据的情况下使用数组的一个主要缺点。

保护数组元素的唯一方法是将数组封装在一个类中，该类将在执行修改之前检查元素和索引：

```
public class ArrayWithFixedFirst {
    private final Integer[] numbers = new Integer[11];
    public Integer get(int index) {
        return numbers[index];
    }
    public void set(int index, Integer value) {
        if (index == 0) throw new IllegalArgumentException();
        numbers[index] = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:22:03.643

我不相信有一种方法可以指定不能重新分配数组的第一个元素。

我认为你最好的选择是为数组创建一个包装类，然后忽略任何重新分配第一个元素的尝试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:25:46.457

通过封装，您可以允许/禁止数组修改。

```
public void updateArray(int position,int value){

if(position > 0 && position < numbers.length){

    numbers[position] = value;

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T21:21:57.297

您不能强制数组不可​​修改。另一种方法是使用`Collections.unmodifiableList`. 但是整个列表因此将是不可修改的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T21:22:59.360

有趣的问题，但我不得不说不。Java 数组不允许您只完成一个元素。您可以通过编写自定义包装器来获得相同的功能，但这引出了一个问题，为什么？我不知道您要使用什么应用程序，但我建议包装一个十元素数组并将您的索引减一，并为第零个索引返回 null

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T21:23:11.667

我不知道你为什么要这样做，但是像这样：

```
class NoFirstArray extends ArrayList {
    public NoFirstArray(int size,Object initialValue) {
       super(size);
       super.set(0,initialValue);
    }
    public void set(Integer i, Object value) {
        if(i == 0) throw RuntimeException();
        super.set(i,value);
    }
    public void remove(int i) {
        if(i == 0) throw RuntimeException();
        super.remove(i);
    }
} 
```

# java - 求未知数列的总和

> ID：14884206
> 
> 赞同：-1
> 
> 时间：2013-02-14T21:17:46.690
> 
> 标签：java, eclipse, swing, matrix

如果我不知道该列中的数字但我必须使用 JOptionPane 给出数字，我如何找出矩阵的列的总和？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:19:54.113

假设`double[] numbers`是十进制数的列表。

```
double[] numbers = new double[10]; // 10 doubles
double sum = 0.0;
for (int i = 0; i < numbers.length; ++i)
{
    sum += numbers[i];
} 
```

要从 JOptionPane 中获取数字，请使用`Double.parseDouble()`将 String 转换为 double。

```
String input = JOptionPane.showInputDialog("Enter a number");
double d = Double.parseDouble(input); 
```

# mysql - MySQL JDBC驱动程序连接字符串？

> ID：14884208
> 
> 赞同：1
> 
> 时间：2013-02-14T21:18:18.310
> 
> 标签：mysql, jdbc, cobol

如何使用 JDBC 驱动程序连接到 MySQL 数据库？这适用于 Cobol，使用 Percobol 软件。

```
 DO-CONNECT.
     STRING "jdbc:mysql://gpiw.be/db;"
      DELIMITED BY SIZE
      "user=user_db;"
      DELIMITED BY SIZE
      "password=*********"
      DELIMITED BY SIZE
      INTO JdbcString
     EXEC SQL
      CONNECT
       TO :JdbcString
       DRIVER "com.mysql.jdbc.Driver"
     END-EXEC
    . 
```

怎么了？

资料来源： [http ://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html) [http://www.easysoft.com/developer/interfaces/odbc/sqlstate_status_return_codes.html #28000](http://www.easysoft.com/developer/interfaces/odbc/sqlstate_status_return_codes.html#28000)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:44:11.950

找到了解决方案：

```
 DO-CONNECT.
     STRING "jdbc:mysql://***ip****/***database**?"
      DELIMITED BY SIZE
      "user=****username****&"
      DELIMITED BY SIZE
      "password=****password******"
      DELIMITED BY SIZE
      INTO JdbcString
     EXEC SQL
      CONNECT
       TO :JdbcString
       DRIVER "com.mysql.jdbc.Driver"
     END-EXEC
    . 
```

# php - 在 PHP 中过滤数组

> ID：14884213
> 
> 赞同：0
> 
> 时间：2013-02-14T21:18:37.853
> 
> 标签：php

我正在尝试使用 lambda 语法在 PHP 中使用数组过滤器函数编写排序/过滤器脚本。

这实现了我想要做的，但它看起来可以优化：

```
$offersReceivedProcessedByItem = array();
  foreach ($this->currentSessionUser->items as $item) {
    $receivedOffersOnItem = array();
    foreach ($offersReceived as $offerReceived) {
     if ($offerReceived->item->id === $item->id) {
       $receivedOffersOnItem[$offerReceived->id] = $offerReceived;
     }
    }
  offersReceivedProcessedByItem[$item->id] = $receivedOffersOnItem;
} 
```

（对于用户拥有的每个项目，通过 offerReceived 数组进行过滤，如果它具有相同的 id，则将其添加到新数组中，如果这有意义吗？！）。

这是我正在尝试的：

```
$offersReceivedProcessedByItem = array();
foreach ($this->currentSessionUser->items as $item) {
   $receivedOffersOnItem = array_filter($item->offers, function($offer){
     return $offer->item->id === $item->id;
   });
   $offersReceivedProcessedByItem[$item->id] = $receivedOffersOnItem;
} 
```

但是我得到 $item 是未定义的，我希望它是封闭的范围，所以我尝试将 $item 作为另一个参数传递，但后来我得到'缺少参数 2'。

我使用 Fuel 中内置的关系方法进行了尝试，但是 PHP 占用了太多内存并且失败了。

有什么帮助吗？我怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:27:49.857

闭包对它创建的环境一无所知，除非你告诉它

```
$receivedOffersOnItem = array_filter($item->offers, function($offer) use($item){
   return $offer->item->id === $item->id;
}); 
```

注意`use`- 语句

手册链接[http://php.net/functions.anonymous#example-119](http://php.net/functions.anonymous#example-119)

# python - 从文本文件中读取向量

> ID：14884214
> 
> 赞同：0
> 
> 时间：2013-02-14T21:18:41.803
> 
> 标签：python, numpy

我有一个带有一堆数字的文本文件，其中每 32 个条目包含换行符。我想使用 Numpy 读取这个文件 aa 列向量。如何使用`numpy.loadtxt`和忽略换行符，使生成的数组大小为 1024x1 而不是 32x32？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:22:30.383

只需使用`loadtxt`和`reshape`（或`ravel`）结果数组。

# c# - 用于检索所有用户的 ASP.NET MVC Active Directory 代码在部署到 IIS 7 时停止工作

> ID：14884215
> 
> 赞同：1
> 
> 时间：2013-02-14T21:18:56.793
> 
> 标签：c#, asp.net-mvc-3, iis-7, active-directory

我有一个 Intranet ASP.NET MVC3 Web 应用程序，它使用带有 .NET Framework 4 的 Windows 身份验证。我的所有代码都在对用户进行身份验证。我将 Windows 身份验证用于基线身份验证，然后将 Active Directory 用户链接到 SQL Server 2008 中表中的用户，以获得特定于我的应用程序的其他用户属性。所有这些工作正常。

在网站的某个部分，管理员可以选择 Active Directory 用户以添加到 SQL 用户表（见上文）并输入他们的网站特定属性（IsAdmin、ShoeSize 等）。在此屏幕上，我填充了一个下拉列表，用于从我创建的自定义对象中检索所有 Active Directory，该对象仅包含 Active Directory 用户的用户名和全名属性。这是此代码：

```
 public IQueryable<ActiveDirectoryUser> ActiveDirectoryUsers
            {
                get
                {
                    // get list of users in the Active Directory
                    DirectoryEntry dirEntry = new DirectoryEntry("WinNT://" + Environment.UserDomainName);
                    List<DirectoryEntry> activeDirectoryUsers = dirEntry.Children.Cast<DirectoryEntry>()
                        .Where(c => c.SchemaClassName == "User").ToList();

                    // populate a custom class I have to hold the active directory user's username and full name property values
                    return activeDirectoryUsers
                        .Where(u => !string.IsNullOrEmpty(u.Properties["FullName"].Value.ToString()))
                        .Select(u => new ActiveDirectoryUser()
                        {
                            NetworkId = String.Format(@"{0}\{1}", Environment.UserDomainName, u.Properties["Name"].Value),
                            FullName = u.Properties["FullName"].Value.ToString()
                        }).AsQueryable();
                }
            } 
```

出于某种原因，当 Web 应用程序部署到 IIS 7 时，此代码不会返回任何结果。但是，当在 Visual Studio 中从 IIS Express 运行站点时，这可以完美运行。关于为什么会发生这种情况的任何想法？我一直在寻找 IIS 设置作为罪魁祸首，但没有发现任何有用的东西。我是否需要更改检索 Active Directory 用户的方式？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T02:18:53.383

这个问题最终是 Eric J. 答案的组合，以及我获取 Active Directory 条目的代码的更改。我发现 DirectoryEntry 方法可以重载以获取用户名和密码以用于权限（例如，您不必依赖 IIS 运行的任何帐户。这是代码：

```
 List<SearchResult> searchResults;

                // use login account to access active directory (otherwise it will use the IIS user account, which does not have permissions)
                using (DirectoryEntry root = new DirectoryEntry("LDAP://CN=Users,DC=test,DC=example,DC=com", "usernameCredential", "passwordCredential"))
                using (DirectorySearcher searcher = new DirectorySearcher(root, "(&amp;(objectCategory=person)(objectClass=user))"))
                using (SearchResultCollection results = searcher.FindAll())
                {
                    searchResults = results.Cast<SearchResult>().ToList();
                }

                // get the active directory users name and username
                return searchResults
                    .Select(u => new ActiveDirectoryUser()
                    {
                        NetworkId = String.Format(@"{0}\{1}", this._domainName, u.Properties["sAMAccountName"][0]),
                        FullName = (string) u.Properties["cn"][0]
                    }).AsQueryable(); 
```

这允许我获取 Active Directory 条目，但只有那些是用户和人员对象。然后我使用 LINQ 将其映射到我的自定义模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:22:20.970

在 Visual Studio 下的 IIS Express 中运行时，您拥有比在 IIS 7 的默认安全上下文中运行更高的权限集。

您必须准确了解以这种方式查询 Active Directory 所需的权限，并确保您的应用在 IIS 7 下运行的应用程序池具有该权限。请注意*仅*授予此操作所需的权限，并确保在继续之前仔细查看授予这些权限的含义。

# entity-framework - 在实体框架中使用我自己的域模型对象和 .edmx

> ID：14884216
> 
> 赞同：7
> 
> 时间：2013-02-14T21:19:01.523
> 
> 标签：entity-framework, domain-driven-design, poco

我有一个域模型架构，其中我的域/业务对象是基于问题域创建的，并且独立于物理数据模型或持久性结构的任何知识。到目前为止，我走上了正轨，因为这是完全可以接受的*，而且*通常情况下域模型和数据模型之间存在阻抗不匹配。DBA 创建了数据库来获取*他们*需要的数据，但它并没有封装应用程序的整个域模型或设计。

结果 - 我有*自己的*一组域模型对象。然而，所有需要持久化的字段*确实*存在于我的域模型中的某个或另一个位置，但不一定以我自动生成的 .edmx POCO 实体具有它们的形状存在。所以我有所有的数据，只是它的形状并不像创建自动生成的 POCO 实体的表那样*完美。*

我看过一些关于这个主题的帖子，比如[将 POCO 实体转换为业务实体](https://stackoverflow.com/questions/5688141/converting-poco-entity-to-business-entity)和[Entity Framework 4 with Existing Domain Model](https://stackoverflow.com/questions/3002179/entity-framework-4-with-existing-domain-model)，它们做出如下声明：

> “在实体数据模型中创建与域类同名的实体。实体属性也应该与域类中的名称和类型相同”

什么！？没办法，为什么我必须将我的域模型重塑为*完全*按照数据库中的数据模型/表结构建模的 POCO？例如 - 在我有 5 个给定属性的情况下，2 个可能在“A”类中，3 个在“B”类中，而自动生成的 POCO 类在其自己的“A”类中具有全部 5 个。

这就是重点，我想要分离我的对象模型和数据模型，但仍然使用像 EF 5.0 这样的 ORM 在它们之间进行映射。我不想在数据模型中创建和塑造这样命名的类和属性。

现在我在 EF 5.0 中的 .edmx 正在为我生成 POCO 类，但我的问题是如何分解这些并将所有内容重新连接到*包含*所有这些数据但只是形状不同的域对象？

**顺便说一句，使用 Code First 方法提出的任何解决方案都不是一个选项，因此*请*不要提供此选项。**我需要一些使用 EF5 的指导或教程（最好）（如果可能，因为 EF4 示例总是从 ObjectContext 继承 POCO）并将我自己的业务对象连接到 .edmx。

感谢任何帮助或指导，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:11:00.417

这听起来就像实体框架的用例。我在这里做一些假设。首先，当您发表此声明时：

“我有一个域模型架构，其中我的域/业务对象是基于问题域创建的，并且独立于物理数据模型或持久性结构的任何知识。”

你的意思是这个域是在 EF 设计器中创建的？但是你说：

“但是，所有需要持久化的字段确实存在于我的域模型中的某个地方或另一个地方，但不一定以我自动生成的 .edmx POCO 实体具有它们的形状存在。”

这听起来像我的第一个假设是不正确的。

接下来，您首先关闭代码？如果您的域模型/业务对象是基于代码的，并且您希望将它们持久保存到关系数据库中，那么这正是代码优先的用例。您有了代码，现在您需要创建 DbContext 并将其映射到您的物理模型。

但是，您对此不屑一顾……所以有些想法：

如果您有一个基于代码的业务对象的域模型，并且您有一个用于其他事情的 EDMX，我认为您会想要创建一个存储库层，该存储库层使用自动映射器或手动投影之类的东西来查询您的实体并返回您的业务对象.

如果您有一个基于代码的业务对象的域模型，并且您有一个 EDMX，除了持久化您的业务对象之外，它不用于其他用途，我会说您需要在 EDMX 中表达您的域，然后将其映射到您现有的数据库中. 这确实是 ORM 的用例。拥有两个域模型并从一个模型映射到另一个模型，其中一个模型与您的域匹配，一个与您的数据库匹配，这增加了一个额外的不需要的管道层。

上面的后一种方法在 EF 用语中称为“模型优先”。有几篇关于它的文章，尽管其中大部分只是从模型中生成数据库。您不会执行该步骤，而是将实体映射到现有数据库。

基本步骤是“从数据库更新”而不选择任何 db 对象（或将创建实体）。或者，您可以在设计器中使用现有的 .edmx（听起来就像您拥有的那样）并修改实体以匹配您的业务领域。或者只是删除 EDMX 模型中的所有实体，根据需要创建实体，然后将它们全部映射。

这是我使用 EF 设计器引入模型存储的地方（唯一的方法是允许它生成实体），然后删除实体以允许存储信息保留，方法是在询问时单击“否”如果你想删除表信息。

[http://screencast.com/t/8eiPg2kcp](http://screencast.com/t/8eiPg2kcp)

我没有向其中添加 POCO 生成器，但如果我这样做了，它会将设计器中的实体生成为 POCO 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:47:44.313

上面引用的声明并不是建议您重写域对象以匹配您的 pocos，而是建议您更新 edmx 以匹配您的域模型。

在您的示例中，您可以在 edmx 中创建一个实体，该实体映射两个表中的所有 5 个属性，EF 将管理与单个生成的 Poco 到您的表的映射。

当然，这意味着您将拥有重复的域对象和 pocos，这意味着您在与 EF 交互时必须手动将域对象转换为 pocos，

或者您可以将您的域数据对象定义为接口并提供 pocos 的部分实现，这些实现基本上将每个 poco 标识为域对象的具体实现。

可能还有其他几种方法可以给这只特定的猫换皮，但我认为您不能提供预定义的 c# 对象以在 edmx 中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:55:05.977

一种方法可能是选择 ViewModel（适合您的特定业务逻辑）并自动将上下文中的一些数据映射到其中，就像[https://stackoverflow.com/a/8588843/201648](https://stackoverflow.com/a/8588843/201648)一样。这用于`AutoMapper`将实体属性从 EF 上下文映射到 ViewModel。这不会为您做所有事情，但它可能会让生活变得更轻松。如果您对这种自动发生的方式不满意，您可以配置 AutoMapper 以稍微不同的方式做事（请参阅投影）- [https://github.com/AutoMapper/AutoMapper/wiki/Projection](https://github.com/AutoMapper/AutoMapper/wiki/Projection)

[您可能已经知道这一点，但也可以使用 t4 - http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)从您的 EDMX 自动生成 POCO 。如果您定义模板来生成分部类，那么您可以拥有另一个具有该 POCO 的自定义属性的分部类。这样，您可以自动填充大多数属性，但也可以使用上下文/存储库中的自定义规则填充其他自定义属性。这消除了生成这些数据的大量单调性，然后您可以专注于使用上述技术重塑数据。

如果您对两者都非常不满意，您总是可以映射一个存储过程来自动获取您想要的确切字段名称，而无需四处寻找。这当然会影响您处理数据的方式，但我之前已经完成了优化目的/已经存在的过程完全符合我的要求。请参阅[http://msdn.microsoft.com/en-us/data/gg699321.aspx](http://msdn.microsoft.com/en-us/data/gg699321.aspx)

# python - 在列表列表中搜索最大的一列

> ID：14884220
> 
> 赞同：3
> 
> 时间：2013-02-14T21:19:09.340
> 
> 标签：python, list, max

我有一个列表，`list = [(1,2,5), (2,8,7),(3,6,9)]`我想找到第三列的最大数字，所以我尝试了：

```
zipped = zip(*list)
print max(zipped[2]) 
```

但它没有显示最大的数字。有谁知道为什么和解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T21:26:27.450

适用于所有较新的 Python：

```
>>> li = [(1,2,5), (2,8,7),(3,6,9)]
>>> max(l[2] for l in li)
9 
```

如果您有文字：

```
>>> li = [('1','2','5'), ('2','8','7'),('3','6','9')]
>>> max(int(l[2]) for l in li)
9 
```

即使源是迭代器/生成器也可以工作。这是在 Py3.3 上，其中 zip 返回一个迭代器：

```
>>> gli=(e for e in li)
>>> max(int(l[2]) for l in gli)
9
>>> max(int(l[2]) for l in zip(*li))
9 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T21:20:34.910

在 python2.7 上为我工作。

```
>>> l = [(1,2,5),(2,8,7),(3,6,9)]
>>> zip(*l)
[(1, 2, 3), (2, 8, 6), (5, 7, 9)]
>>> max(zip(*l)[2])
9 
```

* * *

另外一个选项：

```
max(l,key=lambda x:x[2])[2] 
```

或者，如果您愿意`itemgetter`：

```
from operator import itemgetter
max(l,key=itemgetter(2))[2] 
```

`zip`这在内存方面可能更有效，它将在不再返回 a 的python3.x 上工作`list`。

这里的关键是它允许您获取最大的完整元组（最大的由第三个元素确定），然后如果需要，您只需从那里拉出正确的元素。

# android - 如何从活跃的活动到达不活跃的活动？

> ID：14884222
> 
> 赞同：0
> 
> 时间：2013-02-14T21:19:14.713
> 
> 标签：android, layout

假设有两个活动，分别称为 A 和 B，并且

A：活动活动，（用户可以看到布局）

B：不活跃的活动（看不到）

但我想从我的活跃活动中获得不活跃的活动。非活动活动有一个计时器和一些字符串。布局必须嵌套。

如果我够到它，计时器会工作吗？

![图表](../Images/af9cd37f84acfdbe3d99e5b8caf4d845.png)

# serialization - Protobuf 网。基于反序列化

> ID：14884229
> 
> 赞同：2
> 
> 时间：2013-02-14T21:19:44.390
> 
> 标签：serialization, protobuf-net

假设我们有以下三个类：

```
[ProtoContract]
[ProtoInclude(10, typeof(FirstType))]
[ProtoInclude(20, typeof(SecondType))]
public class Base
{
    [ProtoMember(1)]
    public int ClassId {get;set;}
}

public class FirstClass : Base
{
    ...
}

public class SecondClass : Base
{
   ...
} 
```

并且类 ID（在基类中）和匹配的子类的类型之间存在关系。例如，

```
var obj1 = new FirstClass() {ClassId = 1}
var obj2 = new SecondClass() {ClassId = 2} 
```

现在让我们假设我们已经序列化了这些对象。问题是：有没有什么好的方法可以通过查看 ClassId 字段来反序列化基于类 ID 值的序列化 protobuf？即，如果序列化的 protobuf 中的 classId 的值为 1，则使用 FirstClass 反序列化剩余的流字节。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:42:06.253

如果您正在使用 ProtoInclude，那么 protobuf-net 已经在处理要使用的子类：这就是 ProtoInclude 的全部*要点*。在某些情况下，无法使用继承，在这种情况下，可以通过 ProtoReader 或使用仅读取该属性的第二个模型来读取原始流，然后重置源并再次读取。这里有一个例子：[https ://stackoverflow.com/a/14572685/23354](https://stackoverflow.com/a/14572685/23354)

# c# - 每 500 毫秒循环一次，没有延迟

> ID：14884231
> 
> 赞同：-2
> 
> 时间：2013-02-14T21:19:46.703
> 
> 标签：c#, loops, lag, milliseconds

如何在 WinForms 应用程序中执行此操作？我用 System.Windows.Forms.Timer 尝试过，但是当我最小化应用程序时，我无法再次最大化它。它落后于应用程序。我将 .Interval 属性用作 500。

编辑：代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            System.Windows.Forms.Timer Loop = new System.Windows.Forms.Timer();
            Loop.Interval = 500;
            Loop.Tick += new EventHandler(UpdateUI);
            Loop.Start();
        }

        void UpdateUI(object sender, EventArgs e)
        {
            //ADD TO LIST ON USER INTERFACE
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:22:11.417

该类[`Timer`指定](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)为`Interval`毫秒。因此，您的值 500 表示间隔为半秒。请改为指定 50。

此外，您不能保证每 50 毫秒准确地触发一次计时器。只有大约 50 毫秒。

您应该保留对计时器对象的引用。

```
public partial class Form1 : Form
{
    Timer loop;

    public Form1()
    {
        InitializeComponent();
        this.loop = new System.Windows.Forms.Timer();
        loop.Interval = 50;
        loop.Tick += new EventHandler(UpdateUI);
        loop.Start();
    }

    void UpdateUI(object sender, EventArgs e)
    {
        //ADD TO LIST ON USER INTERFACE
    }
} 
```

# c# - MVC4 中的 Lambda 表达式错误

> ID：14884232
> 
> 赞同：1
> 
> 时间：2013-02-14T21:19:47.853
> 
> 标签：c#, asp.net-mvc, lambda

首先，我想向你们所有人道歉，因为我知道这个问题已经被问过很多次了。但我对 MVC 或 .NET 或 Lambda 表达式本身了解不多。我正在做一个小项目，但我遇到了 Lambda 表达式错误，如下所示 ![在此处输入图像描述](../Images/4433488c3e9ef70a42bc0cd6e7dedd9f.png)

**编辑** **下面是控制器代码**

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MVC4Trial.Models;
using Kendo.Mvc.UI;
using Kendo.Mvc.Extensions;

namespace MVC4Trial.Controllers
{
    public partial class CallTrackController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }
        public ActionResult Remote_Data()
        {
            return View("AjaxBinding");
        }

        public ActionResult vwCallDetails([DataSourceRequest] DataSourceRequest request)
        {

            return Json(GetCallDetailsFn().ToDataSourceResult(request));
        }

        private static IEnumerable<CallDetails> GetCallDetailsFn()
        {
            var callData = new CallTrackClassDataContext();
            return callData.CallDetails.Select(calldetail => new CallDetails
            {
                CCCID = calldetail.CCCID,
                Mp3_Url = calldetail.Mp3_Url,
                Index = calldetail.Index,
                Target_Number = calldetail.Target_Number,
                Duration = calldetail.Duration,
                LocalTime = calldetail.LocalTime,
                Site_Name___Address = calldetail.Site_Name___Address,
                Ad_Source_Name = calldetail.Ad_Source_Name,
                Tracking_Number = calldetail.Tracking_Number,
                Caller_Number = calldetail.Caller_Number,
                Available_Feature = calldetail.Available_Feature

            });
        }

     }
} 
```

我想学习如何解决这个错误。我在这里想念什么？我需要对我的模型/视图/任何其他文件进行任何类型的更改吗？感谢阅读和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:23:26.580

有什么问题`Duration`。它带有红色下划线，表示它在类中不存在，或者其他一些问题导致它无法被识别。由于此处存在错误，因此 lambda 表达式无法正确处理，只有这样 Visual Studio 才会识别出错误。本质上，报告的错误掩盖了真正的问题。修复`Duration`或删除它，lambda 表达式就可以了。

尽管如此，你所做的事情并没有多大意义。`callData.CallDetails` *已经*返回了一个实例`CallDetails`（或者至少应该返回，或者您应该更改名称），因此使用从实例`Select`返回`CallDetails`填充的实例`CallDetails`是多余的。

**更新**

抱歉没有更清楚。我的最后一条评论真的取决于我看不到的代码中到底发生了什么。所以有两种可能的情况：

1)`callData.CallDetails`是 的一个实例`CallDetails`。如果是这种情况，那么使用`Select`就是浪费时间和代码，因为您所做的只是将一个实例转换`CallDetails`为另一个实例。只是做`return callData.CallDetails;`会有同样的效果。

2 )`callData.CallDetails`不是. *_* `CallDetails`如果是这种情况，那么您应该简单地重命名`CallDetails`成员`callData`以避免首先引起我评论的那种混淆。

FWIW：如果您真的需要将其他类型映射到这样的实例`CallDetails`，您应该查看[AutoMapper](http://automapper.org/)。编写此代码不仅重复且耗时，而且还会使自己更容易出错。例如，如果您稍后更改 的定义`CallDetails`怎么办？您现在必须像这样跟踪每个显式映射并对其进行更改，而使用 AutoMapper，您可能只需更改定义即可完成。

# knockout.js - 在 foreach 循环中赋值

> ID：14884233
> 
> 赞同：0
> 
> 时间：2013-02-14T21:19:50.457
> 
> 标签：knockout.js

想象一个按姓名排序的联系人数组。这个数组可以像这样输出：

```
<ul data-bind="foreach: contacts>
    <li data-bind="text: name"></li>
</ul> 
```

我想做的是为每个具有不同起始字母的 li 指定一个标题，例如显示 A、B、D ...

```
- A
- Anderson
- Andrews
- B
- Bellamy
- D
- Davidson
- Davis 
```

在普通的编程语言中，我会定义一个包含名称第一个字母的变量，并在 foreach 循环中检查它是否不同。如果是这种情况，则显示标题。

我应该如何使用 knockout.js 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:36:58.207

这是一种坚持淘汰模式的方法。首先，您将创建一个计算的 observable，将您的数组映射到一个按字母分组的新数组。

```
self.contactsByLetter = ko.computed(function () {
    var result = [],
        currentLetter, currentGroup;
    ko.utils.arrayForEach(self.contacts(), function (contact) {
        if (contact.name[0] !== currentLetter) {
            currentLetter = contact.name[0];
            currentGroup = {
                letter: currentLetter,
                contacts: []
            }
            result.push(currentGroup);
        }
        currentGroup.contacts.push(contact);
    })
    return result;
}); 
```

那么您的 HTML 将只需要两个循环。

```
<ul data-bind="foreach: contactsByLetter">
    <li class="heading" data-bind="text: letter"></li>
    <!--ko foreach: contacts-->
    <li data-bind="text: name"></li>
    <!--/ko-->
</ul> 
```

jsFiddle：http: [//jsfiddle.net/mbest/ZcQT4/](http://jsfiddle.net/mbest/ZcQT4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:32:22.907

不确定这是否是更清洁的方式，但您可以使用固定数组来存储字母，然后在视图模型上使用方法来仅返回以第 n 个字母开头的项目 - 即

```
<ul data-bind="foreach: letters">
    <li data-bind="text: $data">
        <ul data-bind="foreach: $parent.contactsStartingWith($data)">
             <li data-bind="text: name"></li>
        </ul>
    </li>
</ul> 
```

其中*contactsStartingWith*可以定义为：

```
function(start) {
    return ko.utils.arrayFilter(contacts(), function(it) { return it.name()[0].toUpperCase() == start } );
} 
```

...并且*字母*数组可以很容易地提取为：

```
viewModel.letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""); 
```

（关于使用数组的淘汰工具的一些有用参考：[http](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html) ://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html ）

# node.js - 如何在 TTL 达到 0 时自动更新 EXPIRE

> ID：14884235
> 
> 赞同：2
> 
> 时间：2013-02-14T21:19:59.227
> 
> 标签：node.js, redis

我正在构建一个应用程序，我需要三个记分牌，我正在使用排序集和列表实现这些记分牌。该应用程序在 node.js 上运行，使用 redis 客户端的 node_redis ( [https://github.com/mranney/node_redis](https://github.com/mranney/node_redis) ) 模块。

第一个记分牌是我使用列表的“最新分数” `LPUSH`。第二个是我在`ZADD`命令中使用排序列表的历史最高分。

我在执行“本周的高分”时遇到了麻烦。我在想我应该使用另一个排序列表使用`ZADD`一个`EXPIRE`集合一周。一切正常，但在列表第一次过期后，它将继续永远添加到新列表中。

是否有 redis 命令可以自动续订过期？（我已经寻找了几个小时的答案，但答案似乎是否定的）。我得出的结论是，我需要以编程方式执行此操作。在使用 set 的函数调用期间，我可以检查是否`TTL`为 -1 并在那里重置它。这是最佳实践吗？我在某处错过了一个聪明的把戏吗？我需要关注额外的数据库请求吗？

- 编辑 -

我已经在推特上回复了这个问题[https://twitter.com/redsmin/status/302177241167691777](https://twitter.com/redsmin/status/302177241167691777)

建议的解决方案（如果我理解正确的话）是将`EXPIREAT`命令与每个命令一起使用`ZADD`

```
expireat myscoreboard {{timestamp of the end of the week}} 
zadd myscoreboard 1 "one" 
```

这对我来说“感觉”是对的，但我是 redis 的新手，所以希望能就这项技术或任何其他解决问题的方法进行一些讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T20:16:10.413

这取决于您如何定义“一周”。有几种使用方法，例如：

1.  “过去 7 天”
2.  “一年中的一周”
3.  “这周从周日开始，到周六结束”

最简单的实现是 2 和 3。您指定一个集合，其中包括在其键名中的开始日期/时间，使用一周的过期时间。然后，您只需在客户端确定您想要哪一天并获取数据。

例如 zadd scoreboard:weekly:03:March:2013 1 "bob"

然后在接下来的一周，您的键名将是 zadd scoreboard:weekly:10:March:2013 1 "bob"

当您第一次创建密钥时，您设置了过期时间，仅此而已。无需每次都重新设置。伪代码如下：

if (ttl scoreboard:weekly:03:March:2013) == 0: expire scoreboard:weekly:03:March:2013 604800

这样您只需设置一次过期时间，自动过期，并且可以轻松拉出每周记分牌。

您可以使用相同的方法实现滚动周，但您需要转到每日密钥名称并计算要获取的密钥，然后合并它们。您可以使用 zunionstore 执行此操作。

# delphi - 如何将 TMemo 组件中的多行添加到 MS Access 数据库？

> ID：14884238
> 
> 赞同：3
> 
> 时间：2013-02-14T21:20:05.937
> 
> 标签：delphi, ms-access, delphi-2010, memo, tadoquery

我有一个 ADO 数据库，其中有一个名为 的表`t_codemeaning`，下面是表结构：

```
t_codemeaning
  codemenaing_code AS Text
  codemenaing_title AS Text
  codemenaing_description AS Text 
```

我在我的`ADOQuery1`.

我单击带有此 Delphi 脚本的按钮：

```
ADOQuery1.edit;
ADOQuery1codemeaning_title.value := edit1.text;  
ADOQuery1codemeaning_description.value := memo1.lines.text;  
ADOQuery1.post; 
```

当我在备忘录中添加单行时，一切都很好。

但是当我在 memo1 中添加很多多行文本时，它会显示一个错误：

> **多步操作产生错误。检查每个状态值。**

如何解决这个问题？

* * *

我的最后一个进展是，我创建了一个新的字符串变量 aValue 并将 memo1.lines.text 添加到其中：

```
 aValue:=memo1.lines.text;
  aValue := StringReplace(StringReplace(aValue, '#10', '', [rfReplaceAll]), '#13', '', [rfReplaceAll]); 
```

我将 ADOQuery1codemeaning_description.value .... 的脚本更改为：

```
ADOQuery1codemeaning_description.value := aValue; 
```

仍然有同样的错误......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T21:56:04.973

在 DB 中定义您的`description`字段（而不是），然后从 中删除所有持久字段，然后再次添加它们，使类型为.`Memo``Text``ADOQuery1``ADOQuery1codemeaning_description``ftMemo`

无需逃避或更换`CRLF`。

# c++ - 函数在类中不起作用 - 函数调用缺少参数列表

> ID：14884247
> 
> 赞同：0
> 
> 时间：2013-02-14T21:20:34.070
> 
> 标签：c++, windows, hook, keylogger

我已经构建了一个有效的键盘记录器，现在我想将它移到课堂上，这样我就可以随时重复使用它，甚至可以在不同的语言（如 c#）上重复使用它，但是我遇到了错误，因为相同的代码在课堂内不起作用。

## main.cpp（工作）

```
LRESULT CALLBACK KeyboardProc(int nCode, WPARAM wParam, LPARAM lParam);

void main()
{
    HINSTANCE h_instance = GetModuleHandle(NULL);
    SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardProc, h_instance, 0); // Works here
}

LRESULT CALLBACK KeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    // Populate typedChars
    return NULL;
} 
```

## KeyboardHook.cpp（不工作）

```
class KeyboardHook
{
    stringstream typedChars;

    LRESULT CALLBACK KeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
    {
        // Populate typedChars
        return NULL;
    }

    KeyboardHook()
    {
        HINSTANCE h_instance = GetModuleHandle(NULL);
        SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardProc, h_instance, 0); // Does not work
    }

public:
    std::string Get()
    {
        return typedChars.str();
    }

    void Clear()
    {
        typedChars.str(std::string());
        typedChars.clear();
    }
}; 
```

## 错误

```
C3867: 'KeyboardHook::KeyboardProc': function call missing argument list; use '&KeyboardHook::KeyboardProc' to create a pointer to member 
```

所以我将其修改为`SetWindowsHookEx(WH_KEYBOARD_LL, &KeyboardProc, h_instance, 0);`，现在发生了不同的错误

```
C2276: '&' : illegal operation on bound member function expression 
```

我也试过但没有成功：

```
SetWindowsHookEx(WH_KEYBOARD_LL, (LRESULT)&KeyboardProc, h_instance, 0);
SetWindowsHookEx(WH_KEYBOARD_LL, (LRESULT)KeyboardProc, h_instance, 0);
SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardHook::KeyboardProc, h_instance, 0);
SetWindowsHookEx(WH_KEYBOARD_LL, &KeyboardHook::KeyboardProc, h_instance, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:30:18.703

假设`SetWindowsHookEx`应该采用函数指针（我永远无法理解[可怕的 Windows API 文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644990%28v=vs.85%29.aspx)），您需要将指向成员函数的指针绑定到应该调用它的对象。如果你想将它绑定到指向的对象`this`（即`KeyboardHook`你当时正在创建的对象），试试这个：

```
using std::placeholders;
SetWindowsHookEx(WH_KEYBOARD_LL,
  std::bind(&KeyboardHook::KeyboardProc, this, _1, _2, _3),
  h_instance, 0); 
```

或者，`KeyboardProc`可以声明为静态成员函数，但这意味着它将无法使用该`typedChars`成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:29:28.877

您必须定义`KeyboardProc`为静态成员

```
static LRESULT CALLBACK KeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
{
...
} 
```

如果它必须并且可以在没有对象的情况下调用。

# c++ - 实现插入排序时出现分段错误

> ID：14884253
> 
> 赞同：0
> 
> 时间：2013-02-14T21:20:47.017
> 
> 标签：c++, segmentation-fault, insertion-sort

```
#include <iostream>

using namespace std;

int main(){
    int a[6] = {5, 2, 4, 6, 1, 3}; // create an array of size 6
    int j, key = 0;
    for (int i = 1; i < 6; i++) {
        key = a[i];
        j = i - 1;
        while ((j >= 0) && (a[j] > key)) {
            a[j + 1] = a[j];
            j -= 1;
        }
        a[j + 1] = key;
    }
    for (int l = 0; l < 6; l++) { 
        cout << a[l];
    }
    return 0;
} 
```

我正在尝试使用代码符合的数组测试我的插入排序代码，但是当我尝试执行 a.out 文件时，它给了我“分段错误”，我查找了分段错误，这基本上是我们的错误正在尝试访问禁止的内存位置，但是，**我想知道我的代码中的错误到底在哪里。**另外，如果我摆脱

```
for (int l = 0; l < 6; l++) { 
    cout << a[l];
} 
```

没有发现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:27:51.867

您的变量`j`未初始化，因此在您第一次访问`a[j]`. 这会导致分段错误。（`int j,key =0;`仅设置`key`为`0`但不设置`j`。）

总是用 编译你的代码`-Wall`，这会告诉你未初始化变量的使用。（更正：我的 gcc 4.7 没有捕捉到它。多么蹩脚。）

（删除打印时错误消失的原因是您打开了编译器优化：编译器然后注意到您从未对计算值和数组做任何实际操作，只是将所有内容都扔进垃圾箱并给您一个空的程序。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:17:41.497

排序是 stl 中的算法之一。你真的应该像使用 std::sort

```
std::sort( a, a+6 ); 
```

PS：j在行中使用前被初始化

```
j = i - 1; 
```

所以这不是坠机的原因。

# powershell - 从 PowerShell 打开 Notepad++

> ID：14884255
> 
> 赞同：54
> 
> 时间：2013-02-14T21:20:53.157
> 
> 标签：powershell, notepad++

如何从 Powershell 命令行在 Notepad++ 中打开文件？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-14T23:08:51.650

在 powershell 中，我可以简单地使用 start 并获得一般结果

用notepad++打开一个python文件就是我所做的。

```
Start notepad++ ex1.py 
```

假设您与 .py 文件位于同一目录中，这将启动 notepad++ 并加载文件 ex1.py。您可以通过添加完整路径名来更改它

```
start notepad++ c:\users\you\desktop\files\ex1.py 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T21:24:37.463

因为默认路径包含空格，所以必须引用 exe 的路径。但是，因为 PowerShell 也是一种脚本语言。一个字符串本身被简单地评估为一个字符串，例如：

```
C:\ PS> 'Hello world'
Hello world 
```

因此，您必须告诉 PowerShell 您要调用由字符串命名的命令。为此，您使用呼叫运算符，`&`例如：

```
C:\ PS> & 'C:\Program Files (x86)\Notepad++\notepad++.exe' 
```

或者如果记事本++ 在您的路径中：

```
 C:\ PS> notepad++ 
```

或者如果您与 exe 位于同一目录中：

```
 C:\ PS> .\notepad++ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-20T15:15:58.120

使用 Notepad++ 打开并在当前路径中创建一个新的空文件

```
start notepad++ newFile.txt 
```

使用现有文件打开 Notepad++

```
start notepad++ apples.txt 
```

指定路径并打开多个文件

```
start notepad++ fruits/apples.txt, fruits/oranges.txt, package.json 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-05T05:49:05.383

推断先前的答案并将它们捆绑在一个整洁的蝴蝶结中：如果要打开路径或名称中包含空格的文件：

```
. 'C:\Program Files (x86)\Notepad++\notepad++.exe' 'C:\Temp\File With Spaces.txt' 
```

或者

```
& 'C:\Program Files (x86)\Notepad++\notepad++.exe' 'C:\Temp\File With Spaces.txt' 
```

也可以将其设置为别名：

```
Set-Alias -Value 'C:\Program Files (x86)\Notepad++\notepad++.exe' -Name 'NotePad'
$FileWithSpaces = 'C:\T e m p\File With Spaces.txt'
NotePad $FileWithSpaces 
```

此处的第一行可以复制到您的 $Profile .ps1 文件中（其中一个），因此您无需在每个新的 PS 实例中继续使用 Set-Alias。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-24T13:05:56.187

我知道这是一个老问题，但我偶然发现了一些解决方法，而且非常简单。如果您通过[Chocolatey](https://chocolatey.org/install)安装和维护 Notepad++ （想想 apt-get for Windows，但构建在 NuGet 之上），那么您将获得一个可以从命令行调用的 shim。

```
cinst notepad++ 
```

即使您已经安装了现有的记事本，您仍然可以从 Chocolatey“安装”它，它会拉入现有安装并维护它。

我尽可能多地使用 Chocolatey，因为您可以一口气更新所有内容。

之后，从 PowerShell 中编辑内容变得轻而易举。就像我的 PowerShell 配置文件一样：

```
notepad++ $PROFILE 
```

希望这对某人或几个人有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-24T17:09:01.353

就我而言，我想以文件作为参数启动 Notepad++，并以管理员身份打开。我想打开其中一个 PowerShell 配置文件。我不得不使用以下命令变体：

```
start-process -Verb runas -filepath "C:\Program Files (x86)\Notepad++\notepad++.exe"  "`"$($PROFILE.AllUsersAllHosts)`"" 
```

所有其他变体都不起作用，我认为是由于要打开的文件路径中有空格。所以，你必须逃避`"`as：

```
"He said `"This is fun.`"" 
```

# c# - 有没有办法在一个 LINQ 查询中做到这一点？

> ID：14884260
> 
> 赞同：-1
> 
> 时间：2013-02-14T21:21:45.137
> 
> 标签：c#, linq

我在想这可能与`.Where()`.

```
public void RemoveExpiredEntries(List<CartEntry> entries)
{
    foreach (var entry in entries.Where(x => x.IsExpired()))
    {
        entry.Item.QuantityInCarts -= entry.Quantity;
    }
    entries.RemoveAll(x => x.IsExpired());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:31:54.110

枚举时不能修改集合。因此不能应用 LINQ 表达式。

LIN*Q* 旨在支持查询，根据定义，查询不会修改其源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:31:47.633

我看不到一个（可读的）解决方案，你可以用一个语句来做到这一点。您正在做的不是“查询”，而是对已经使用`Where`.

我可能会做以下事情：

```
var expiredEntries =  entries.Where(x => x.IsExpired()).ToArray();
foreach (var entry in expiredEntries)
{
    entry.Item.QuantityInCarts -= entry.Quantity;
}
entries.RemoveAll(expiredEntries ); 
```

或者

```
foreach (var entry in entries.Where(x => x.IsExpired()).ToArray())
{
    entry.Item.QuantityInCarts -= entry.Quantity;
    // remove works here, because it created an array with expired items.
    entries.Remove(entry);
} 
```

这两者实际上与你正在做的事情并没有太大的不同。替换`foreach`with`.ForEach`看起来更像 linq，但并没有太大改变。

* * *

您还可以考虑将原子操作“RemoveEntry”**封装在一个包含和管理列表的类中：**

```
class Cart
{
    List<CartEntry> entries;

    public void RemoveEntry(CartEntry entry)
    {
        entry.Item.QuantityInCarts -= entry.Quantity;
        entries.Remove(entry);
    }

    public void RemoveExpiredEntries()
    {
      foreach (var entry in entries.Where(x => x.IsExpired()).ToArray())
      {
          RemoveEntry(entry);
      }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:28:49.270

只有这样我才能看到你用一行来做，但这不是最好的阅读方式。

```
public void RemoveExpiredEnties(List<CartEntries> entries)
    {
        (entries.Where(e => e.IsExpired).ToList()).ForEach(item => entries.Remove(item));
    } 
```

# python - 如何使用 twisted 来构建这个应用程序？

> ID：14884268
> 
> 赞同：1
> 
> 时间：2013-02-14T21:22:14.117
> 
> 标签：python, wxpython, twisted

我的情况是，我需要拆开一个 GUI 应用程序（用 wx 编写并经过扭曲，在 MS Windows 上运行），取出核心逻辑并将其作为 cron 作业部署在没有 GUI 环境的 linux 服务器上。

我已经用 threading.timer 替换了一些 wx.CallLater 和 wx.CallAfter。显然它不起作用。原始代码在多线程环境中表现不佳。这可能是因为一些底层库不是线程安全的。线程也可能不会以与扭曲相同的方式调度作业。

所以这是 GUI 应用程序的典型工作流程：

1.  用户切换按钮以启动实时数据读取器（用 C 编写）

2.  切换按钮变为绿色后，表示阅读器已启动并正在运行。用户继续在不同的实时数据类型之间切换

3.  当新的数据集准备好时，用户将开始使用应用程序中的其他功能。

我的问题：

1.  如何使用 twisted 重新创建上述工作流程？twisted 中的哪些工具允许我等待步骤 2 中提到的实时数据读取器准备就绪？

2.  一切都会在主线程中“发生”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:18:01.880

> 如何使用 twisted 重新创建上述工作流程？twisted 中的哪些工具允许我等待步骤 2 中提到的实时数据读取器准备就绪？

`reactor.callLater`- [http://twistedmatrix.com/documents/current/core/howto/time.html](http://twistedmatrix.com/documents/current/core/howto/time.html)

> 一切都会在主线程中“发生”吗？

是的 - [http://twistedmatrix.com/documents/current/core/howto/reactor-basics.html](http://twistedmatrix.com/documents/current/core/howto/reactor-basics.html)

# swagger - 如何在 OAuth API 中使用 swagger？

> ID：14884274
> 
> 赞同：20
> 
> 时间：2013-02-14T21:22:19.503
> 
> 标签：swagger

是否可以将 swagger 用作使用 OAuth2 的 API 的文档/测试工具？我在 swagger 网站（或其他任何地方）上看不到任何东西。我见过的每种用法都使用 API 密钥、HTTP 基本或 cookie。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T14:51:14.423

我一直在沿着同样的路线工作。Swagger 将接受任何标头或 URL 定义的 api 密钥或令牌。向 api 和应用程序添加验证助手是一种标准方法。

Oauth 确实需要 HTML 审查和/或登录才能启动握手认证过程。这意味着 swagger api 需要支持 Web 界面才能进行标准登录和范围接受。将 oauth 滚动到 swagger 会导致一些逻辑循环，从长远来看不容易支持。

我们正在探索的另一种方法是让 api 为许多不同的 oauth 提供者处理和存储访问令牌的选项；GitHub、推特和脸书。这也可能导致登录循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-10T22:43:54.650

迟到了，但 oAuth 支持现在在[swagger-core](https://github.com/wordnik/swagger-core/tree/1.3-RC1)的 1.3.0-RC1 中。支持 oAuth 的 javascript 库昨天在[swagger-js](https://github.com/wordnik/swagger-js)中发布。最后，[swagger-ui](https://github.com/wordnik/swagger-ui/tree/develop-2.0)处于开发阶段，很快就会有 oAuth 隐式和服务器流。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-13T13:54:01.190

@fehguy 引用的博客文章[http://developers-blog.helloreverb.com/enabling-oauth-with-swagger/](http://developers-blog.helloreverb.com/enabling-oauth-with-swagger/)显示了一个 java 代码示例，用于在 swagger 生成的 json 中包含授权数据，但是我的问题是它应该包含在带有 Spring、JAXRS 和 CXF 的应用程序中。我在 CXF + JAXRS 示例中没有找到它：[https ://github.com/swagger-api/swagger-core/tree/master/samples/java-jaxrs-cxf](https://github.com/swagger-api/swagger-core/tree/master/samples/java-jaxrs-cxf)

然而，寻找更多和陷阱！

[https://github.com/swagger-api/swagger-core/blob/master/samples/java-jersey-spring/src/main/resources/beans-asset-ws.xml](https://github.com/swagger-api/swagger-core/blob/master/samples/java-jersey-spring/src/main/resources/beans-asset-ws.xml)

必须包含一个带有名为 Bootstrap 的类（扩展 HttpServlet）和一个静态块的 Bean！

意见：也许它会更“弹簧友好”，由 SwaggerConfig Scanner 在 Rest 类中从注释加载，而不是 servlet 中的静态块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T12:29:44.690

```
@Configuration
public class SwaggerConfiguration {

    @Bean
    @DependsOn("jaxRsServer") //org.apache.cxf.endpoint.Server bean
    public ServletContextInitializer initializer() {
        return new ServletContextInitializer() {
            @Override
            public void onStartup(ServletContext servletContext) throws ServletException {
                BeanConfig scanner = (BeanConfig) ScannerFactory.getScanner();
                Swagger swagger = scanner.getSwagger();
                servletContext.setAttribute("swagger", swagger);
            }
        };
    }

    @Bean
    public Feature swaggerFeature() {
        XSwagger2Feature feature = new XSwagger2Feature();

        return feature;
    }

    @Bean
    public FilterRegistrationBean swaggerApiFilter() {
        ApiOriginFilter filter = new ApiOriginFilter();

        FilterRegistrationBean registrationBean = new FilterRegistrationBean();
        registrationBean.setFilter(filter);
        registrationBean.setOrder(Ordered.HIGHEST_PRECEDENCE);

        return registrationBean;
    }

    public static class XSwagger2Feature extends Swagger2Feature {

        @Override
        protected void addSwaggerResource(Server server) {
            super.addSwaggerResource(server);

            BeanConfig scanner = (BeanConfig) ScannerFactory.getScanner();
            Swagger swagger = scanner.getSwagger();
            swagger.securityDefinition("api_key", new ApiKeyAuthDefinition("api_key", In.HEADER));
            swagger.securityDefinition("petstore_auth", 
              new OAuth2Definition()
                .implicit("http://petstore.swagger.io/api/oauth/dialog")
                .scope("read:pets", "read your pets")
                .scope("write:pets", "modify pets in your account"));
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-14T18:54:29.053

来自 mashery 的[IOdocs](http://developer.mashery.com/iodocs)似乎支持 OAuth，但它与 swagger（redis、node 等）有很大不同。它在[github](https://github.com/mashery/iodocs)上可用。

# ios - 应用程序的 URL shemes

> ID：14884276
> 
> 赞同：0
> 
> 时间：2013-02-14T21:22:21.390
> 
> 标签：ios, objective-c, xcode, url-scheme

我想从我的应用程序中打开 Facebook 和 Twitter 应用程序。我发现非常简单的方法，例如：

```
NSURL *url = [NSURL URLWithString:@"fb://profile"];
[[UIApplication sharedApplication] openURL:url]; 
```

还有很多其他的 url 用于打开 Facebook 的不同页面。如何检查 iPhone 上是否存在 Facebook 应用程序？如果应用程序未安装在设备上会怎样？现在我尝试在 iOS 模拟器上使用这种方法，但什么也没发生。这是iOS模拟器的错误吗？只有明天我才有机会检查设备。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:25:35.967

您可以`canOpenURL`使用`UIApplication`.

[http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/canOpenURL](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/canOpenURL)：

还！您可以为您想要的 facebook 页面传递值。这个 Stack Overflow 包含一个指向所有变体的 wiki 的链接： [从其他 iOS 应用程序启动 Facebook 和 Twitter 应用程序](https://stackoverflow.com/questions/5304811/launching-facebook-and-twitter-application-from-other-ios-app)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T21:29:34.833

如果您知道其他应用程序正在使用的 URL 方案（例如`fb://`Facebook 应用程序），您可以首先询问您的`UIApplication`对象是否可以首先打开此类 URL，使用`canOpenURL:`. 例如，您可以使用它来决定是否显示链接，或者是否将用户引导至 Safari（使用普通 Web URL）。

据我所知，由于第三方应用程序无法安装在模拟器上，因此测试与它们的兼容性的唯一方法是在实际设备上。

# grails - grails地图中的排序未显示在gsp中

> ID：14884278
> 
> 赞同：0
> 
> 时间：2013-02-14T21:22:32.980
> 
> 标签：grails, groovy

在将地图传递给 gsp 之前，尝试根据控制器中的一个字段对地图进行排序，并且它看起来在控制器中工作正常，但是 gsp 页面似乎以没有特定顺序的方式随机抓取项目。

控制器代码。尝试订购将显示的提示。

```
 def show(Long id) {
    def reportInstance = Report.get(id)
    reportInstance.prompts = reportInstance.prompts.sort{it.displaySequence}
    [reportInstance: reportInstance]
} 
```

如果我把它放在 println 语句中，它会在控制台中显示它已排序。

它正在使用的域对象：

```
class Report {

    Long id
    String name
    String department
    String description
    String summary
    Date activityDate

    static hasMany = [prompts:Prompt]

    static mapping = {
            sort "id"
           version false
           table 'reports'
           columns{
                   id column: 'id'
                   name column: 'name'
                   department column: 'department'
                   description column: 'description'
                   summary column: 'summary'
                   activityDate column: 'activity_date'
           }
           id generator:'sequence', params:[sequence:'reports_id_sequence']
    }

    static constraints = {
           name(nullable: false, maxSize: 60)
           department(nullable: false, maxSize: 60)
           description(nullable: true, maxSize: 120)
           summary(nullable: true, maxSize: 500)
           activityDate(nullable: false)

    }

    String toString() {
        "${name}"
    } 
```

这是相关 gsp 页面的片段。

```
<g:if test="${reportInstance?.prompts}">
    <li class="fieldcontain">
        <h3 class="property-label">Prompts</h3>
        <br>
        <table id="prompts">
            <thead>
                <tr>
                    <th>${message(code: 'prompt.name.label', default: 'Name')}</th>
                    <th>${message(code: 'prompt.description.label', default: 'Description')}</th>
                    <th>${message(code: 'prompt.required.label', default: 'Required')}</th>
                    <th>${message(code: 'prompt.displaySeqno.label', default: 'Display Order')}</th>
                </tr>
            </thead>
            <tbody>
                <g:each in="${reportInstance.prompts}" status="i" var="prompt">
                    <tr class="${(i % 2) == 0 ? 'even' : 'odd'}" onclick='window.location = "${createLink(controller: "prompt", action: "edit", id: prompt.id)}"'>
                        <td>${fieldValue(bean: prompt, field: "name")}</td>
                        <td>${fieldValue(bean: prompt, field: "description")}</td>
                        <td>${prompt.required}</td>
                        <td class="displaySeqno">${prompt.displaySeqno}</td>
                    </tr>
                </g:each>
            </tbody>
        </table>
    </li>
</g:if> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:31:26.960

在您的`Report`域类`prompts`中是 a `Set`，而不是 a `List`，因此您不能那样对其进行排序。您需要在模型中单独传递排序列表：

```
def show(Long id) {
    def reportInstance = Report.get(id)
    [reportInstance: reportInstance,
     prompts:reportInstance.prompts.sort{it.displaySequence}]
} 
```

并在普惠制中使用它

```
<g:each in="${prompts}" status="i" var="prompt"> 
```

或者只是通过`reportInstance`并在 GSP 中进行排序

```
<g:each in="${reportInstance.prompts.sort{it.displaySequence}}"
    status="i" var="prompt"> 
```

# c# - 如何有效地限制结果，然后将结果与 linq / lambda 表达式连接起来？

> ID：14884291
> 
> 赞同：5
> 
> 时间：2013-02-14T21:23:10.803
> 
> 标签：c#, lambda, concat

我正在创建一项服务，以使用户可以轻松地从[IANA 协议注册表](http://www.iana.org/protocols)中选择协议。

正如您可能想象的那样，在注册表中搜索该术语会`http`获得很多点击率。由于`amt-soap-http`用户选择的频率比直接选择的频率要低得多`http`，所以我决定最好先提取所有以开头的内容`http`，然后将其与剩余的结果连接起来。

下面的 lambda 表达式是该思考过程的结果：

```
var records = this._ianaRegistryService.GetAllLike(term).ToList();
var results = records.Where(r => r.Name.StartsWith(term))
                     .OrderBy(r => r.Name)
                     .Concat(records.Where(r => !r.Name.StartsWith(term))
                                    .OrderBy(r => r.Name))
                     .Take(MaxResultSize); 
```

不幸的是，我觉得我对结果的迭代次数超过了必要的次数。除了过早的优化考虑之外，是否存在比上述更有效的 lambda 表达式组合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:32:45.663

两步排序可能更有效：

```
var results = records.OrderBy(r => r.Name.StartsWith(term) ? 1 : 2)
                     .ThenBy(r => r.Name)
                     .Take(MaxResultSize); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T18:25:08.457

使用评论来解释我正在尝试做的事情变得越来越难。所以我会发布另一个答案。假设我想首先根据其偶数或奇数对随机整数列表进行排序，然后按数字顺序（`StartsWith`用模拟`mod 2`）。

这是测试用例：*action2*与其他答案相同。

如果您运行此代码，您会发现我的建议 ( `action1`) 快了两倍。

```
void Test()
{
    Random rnd = new Random();
    List<int> records = new List<int>();
    for(int i=0;i<2000000;i++)
    {
        records.Add(rnd.Next());
    }

    Action action1 = () =>
    {
        var res1 = records.GroupBy(r => r % 2)
                    .OrderBy(x => x.Key)
                    .Select(x => x.OrderBy(y => y))
                    .SelectMany(x => x)
                    .ToList();
    };

    Action action2 = () =>
    {
        var res2 = records.OrderBy(x => x % 2).ThenBy(x => x).ToList();
    };

    //Avoid counting JIT
    action1();
    action2();

    var sw = Stopwatch.StartNew();
    action1();
    long t1 = sw.ElapsedMilliseconds;

    sw.Restart();
    action2();
    long t2 = sw.ElapsedMilliseconds;

    Console.WriteLine(t1 + " " + t2);
} 
```

# css - Twitter Bootstrap 响应式设计——如何设计自己的非框架元素

> ID：14884292
> 
> 赞同：0
> 
> 时间：2013-02-14T21:23:11.037
> 
> 标签：css, responsive-design

我正在使用具有[响应式设计](http://twitter.github.com/bootstrap/scaffolding.html#responsive)的 Twitter Bootstrap ，因此几乎在任何设备/屏幕尺寸或密度上，所有 Bootstrap 元素的尺寸/字体大小都适合屏幕尺寸。

但是，我自己的非框架元素呢？我应该如何设计它们以遵循响应式设计并看起来相同？例如——图像。它应该有什么尺寸以及如何设计它，以便在台式电脑和手机上看起来都一样？

我遇到了 250x250px 图像的问题。在我的台式计算机上的移动网站模拟器上，它占据了屏幕的一半以上（模拟器假定模拟设备的屏幕尺寸中等）。但是当我在我的 Galaxy Nexus 上打开这个页面时（具有巨大的 XHDPI 屏幕密度），250x250px 的图像看起来很小。

尺寸不是唯一的问题。如何设置上述图像的边距/填充。因此页面在许多设备上看起来都完全相同。如果我在我的台式电脑/全高清屏幕上显示该图像，我有近 2000 像素的宽度。在纵向模式下的 Galaxy Nexus 上，我可以使用不到 1000 像素的宽度。

*我是 CSS 的中级或初学者，在移动开发/响应式设计方面完全无知（初学者），所以这个问题可能看起来很愚蠢。对不起！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:34:52.460

只需使用基于视口自动调整所有内容的元标记：

```
<meta content="width=device-width, initial-scale=1.0" name="viewport"> 
```

将上面的行放在`<head>`标签上，边距、填充和文本应该看起来不错。

图像也应该是成比例的，但是对于像大背景图像这样的东西`body`，`div`你需要改变 bootstrap-responsive.css 文件来引入“正确”的图像。因此，您可能需要台式机和大型笔记本电脑的大背景图像，平板电脑的不同位置的中等尺寸图像，以及智能手机的无缝图案图像。只需查找文件的@media 部分并添加/编辑 css。

# c - 在 C 中构建格式字符串

> ID：14884296
> 
> 赞同：1
> 
> 时间：2013-02-14T21:23:19.980
> 
> 标签：c, file-io, format

我有一个名为 FOO 的结构，它将填充来自具有列数据的文件中的数据：

```
JohnDoe 30 60 90 120
JaneDoe 20 40 80 160
... 
```

* * *

```
typedef struct FOO {
char *name;
int  *data;
size_t datasize;

} FOO; 
```

...以及一个名为 fillFOO(FILE *fp) 的函数，该函数为该结构分配空间并用文件中的数据填充该结构。我一直在尝试像

```
formatString = myFormatStringBuilder(); 
```

然后以相当钝的方式将 formatString 传递给 sscanf：

```
fscanf(fi, formatString, pointerToA_FOO->name, pointerToA_FOO->data[0], 
       pointerToA_FOO->data[1], ...); /* Argh! There has to be an easier way...*/ 
```

有没有更简单/更清洁的方式来读取这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:42:08.493

更容易/更清洁？这条线根本不应该工作：

```
fscanf(fi, formatString, pointerToA_FOO->name, pointerToA_FOO->data[0], ... 
```

因为可变参数应该是左值。

此外，如果总是有 5 列，那么您根本不需要`myFormatStringBuilder()`：

```
FOO* f = malloc(sizeof(FOO));
f->name = malloc(100); // or whatever
f->data = malloc(4*sizeof(int));
fscanf(fi, "%s %u %u %u %u", f->name, &f->data[0], 
         &f->data[1], &f->data[2], &f->data[3]); 
```

**编辑**：好的，所以不同文件的列数不同。[你可以做的是：首先通过读取第一行（即getline](http://linux.die.net/man/3/getline)）并计算空格数来找出文件中有多少列，然后 malloc 那而不是`4`，然后对于每一行：`fscanf(fi, "%s", f->name);`和`for(int i=0; i<spaces; ++i) { fscanf(fi, "%u", &f->data[i]); }`

# php - 处理 SQL 请求时不正确的 DIV 格式

> ID：14884298
> 
> 赞同：0
> 
> 时间：2013-02-14T21:23:28.473
> 
> 标签：php, mysql, pdo

我目前正在使用包含以下表结构的数据库：

```
round | current
===============
P     | 0
1     | 1
2     | 0
3     | 0
4     | 0
A     | 0 
```

我一直在尝试编写 PHP 代码，该代码将为当前为 1 的每一行输出“一个点亮的圆圈”。因此，对于上表，1 会亮起，因为 current 为 1 - 其他轮的其余部分将由灰色圆圈表示。

我在这里包含了一个示例：http: [//i.imgur.com/GYvUdii.png](http://i.imgur.com/GYvUdii.png)

然而，我现在遇到的困难是我的代码正在输出这个：http: [//i.imgur.com/Q41kBnM.png](http://i.imgur.com/Q41kBnM.png)当它只意味着像上面那样返回单行时。

我在这里包含了 HTML 输出：http: [//jsfiddle.net/pn8BW/](http://jsfiddle.net/pn8BW/)

这是我现在使用的 PHP/MySQL。希望能得到一些帮助，因为我已经工作了一个小时:-(:

```
<?php
        $sql = "SELECT * from ts_rounds";
        $result = $pdo->query($sql);
$circleSize = array ('circle_small', 'circle');
$rounds = '';
foreach ($result as $row) {

    switch ($row['round']) {
        case 'P':
            $rounds .=   '<div id="r0" class="'.$circleSize[$row['current']].'"><h3>P</h3></div>';
        case '1':
            $rounds .=   '<div id="r1" class="'.$circleSize[$row['current']].'"><h3>1</h3></div>';
        case '2':
            $rounds .=   '<div id="r2" class="'.$circleSize[$row['current']].'"><h3>2</h3></div>';
        case '3':
            $rounds .=   '<div id="r3" class="'.$circleSize[$row['current']].'"><h3>3</h3></div>';
        case '4':
            $rounds .=   '<div id="r4" class="'.$circleSize[$row['current']].'"><h3>4</h3></div>';
        case 'A':
            $rounds .=   '<div id="r5" class="'.$circleSize[$row['current']].'"><h3>A</h3></div>';
    }
}
echo $rounds;
        ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:28:26.973

您忘记`break;`了`switch`：

```
case 'P':
    $rounds .=   '<div id="r0" class="'.$circleSize[$row['current']].'"><h3>P</h3></div>';
    break; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:30:12.607

我认为您需要`break;`在您的每个后续条件测试之前进行`switch`，例如。

```
 case 'P':
        $rounds .=   ... ;
        break;
    case '1':
        $rounds .=   ... ;
        break; 
```

没有 a `break;`，逻辑流程将“通过”到下一个动作。

# regex - 正则表达式从谷歌搜索中提取 url

> ID：14884299
> 
> 赞同：0
> 
> 时间：2013-02-14T21:23:28.903
> 
> 标签：regex, perl, url, html-parsing

我需要从谷歌搜索中提取一个网址，我试试这个：

```
if($google =~ /<h3 class="r"><a href="(.*)"/i){
print "$1\n$2\n$3\n$4\n$5\n$6\n$7\n$8\n$9\n$10";
} 
```

但是这是错的吗，请帮助我;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:41:28.050

```
while($google =~ /<h3 class="r"><a href="(.*?)"/ig)
{
  print "$1\n";
} 
```

请注意，您需要设置`~//g`（全局搜索）才能在 while 循环中进入下一个机器。也使用`(.*?)`代替`(.*)`，否则您将拥有 1 美元的整个页面，直到页面上的最后报价

# c# - 从 Progress 4GL 访问 C# COM 对象

> ID：14884300
> 
> 赞同：0
> 
> 时间：2013-02-14T21:23:31.137
> 
> 标签：c#, com, progress-4gl

这个问题之前已经被问过：

[从自己的 C# Dll in Progress 4GL 创建 COM-Object](https://stackoverflow.com/questions/11688009/create-com-object-from-own-c-sharp-dll-in-progress-4gl)

该链接上的问题仅得到部分回答，而我正处于同一停止点。

鉴于链接中的示例，有没有人让它工作，如果是，如何？
我已经了解了链接问题中的人。基于 .Net 的 COM 对象已正确注册并被 Progress 4GL 识别，但在尝试访问时，会出现“参数数量无效”错误。COM 对象方法由 Progress COM 对象查看器正确报告，因此它应该是可访问的。

Progress 这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:40:14.800

事实证明毕竟有答案；我在那里提供了它，但问题是 OP 在他的方法调用中使用了两个冒号而不是一个冒号。进行一项更改，代码就可以工作了。

# jakarta-ee - apache tile - 如何覆盖子模板中的属性

> ID：14884304
> 
> 赞同：1
> 
> 时间：2013-02-14T21:23:52.910
> 
> 标签：jakarta-ee, attributes, tiles

问题是如何覆盖图块子模板中的属性。

我有两个模板：base 和 child。这是基本布局的一部分 - HTML 头：

```
<title>
    <tiles:insertAttribute name="title" />
    lyricsBase: <c:out value="${jukebox.name}" />
</title> 
```

这是我的tiles.xml：

```
<definition name="t.base" template="/WEB-INF/tiles/base.jsp">
    <put-attribute name="title" value="SomeTitle"/>
</definition>
[...]
<definition name="t.song" extends="t.base">
    <put-attribute name="body" value="/WEB-INF/jsp/song.jsp"/>
    <put-attribute name="title" value="song.title"/>
</definition> 
```

当我运行我的页面时，我得到以下 HTML 标题：`song.title lyricsBase: xxx`. 我应该在子视图中放入什么代码来覆盖该`title`属性？例如，我正在尝试将其设为 ${song.title}

```
<tiles:putAttribute name="title" value="${song.title}" /> 
```

...但它不起作用。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:58:39.773

您不应该使用 value 属性，而是使用 expression 属性。在tiles3中，我遇到了put属性的字符串值问题，而没有级联是真的......这假设tiles3（尽管大多数适用于大多数tiles 2）。

以下未经测试：

```
<definition name="t.base" template="/WEB-INF/tiles/base.jsp">
    <put-attribute name="title" cascade="true" value="SomeTitle"/>
</definition>
[...]
<definition name="t.song" extends="t.base">
    <put-attribute name="body" value="/WEB-INF/jsp/song.jsp"/>
    <put-attribute name="title"  cascade="true" expression="EL:song.title"/>
</definition> 
```

然后`<tiles:insertAttribute name="title" />`应该在您的模板中按预期工作。

# javascript - 显示范围算法？

> ID：14884306
> 
> 赞同：1
> 
> 时间：2013-02-14T21:24:00.010
> 
> 标签：javascript, algorithm, graphics, rendering, three.js

哦，伟大而知识渊博的堆栈溢出，我谦虚地请求您的伟大思想的帮助......

我正在使用三个 js 库，我需要实现一个“显示范围”按钮。它会将相机移动到一个位置，使得世界上的所有物体都在相机视图中可见（当然它们没有被阻挡）。

我可以找到世界上所有物体的边界框，比如它们是 w0x,w0y,w0z 和 w1x,w1y,w1z

考虑到这些限制，我如何放置相机以便清楚地看到盒子的边缘？

显然，必须选择一个“侧面”来查看......我已经用谷歌搜索了一种算法，但无济于事！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:58:04.440

所以假设你选择了一张脸。并且您正在选择一个相机位置，以便相机的视线平行于其中一个轴。

假设脸部有一定的宽度“w”，假设您的相机具有水平视野“a”。您要弄清楚的是距离相机应该看到整个宽度的脸部中心的距离“d”。

如果你把它画出来，你会发现你基本上有一个等腰三角形，它的底边长为 w，顶点处的角为 a。

![等腰三角形](../Images/0e7048c3d231fbb0834baf6b0d328012.png)

不仅如此，顶角的角平分线形成两个相同的直角三角形，它的长度（到底边）是我们需要计算的距离。

Trig 告诉我们，角的切线是三角形的对边和相邻边的比率。所以

```
tan(a/2) = (w/2) / d 
```

简化为：

```
d = w / 2*tan(a/2) 
```

因此，如果您将相机放置在与您的边界框面之一的轴对齐距离处，那么您只需要沿选择的轴移动 d 距离。

一些警告，请确保您使用弧度作为 javascript trig 函数输入。此外，您可能需要再次计算您的面部高度和相机的垂直视野，如果您的面部不是方形的，则选择更远的距离。

如果您想从任意角度拟合边界框，您可以使用相同的想法 - 但首先您必须找到投影到垂直于相机视线的平面上的场景的（对齐的）边界框

# sql-server - SQL Server 中的 IsDate 函数是否将 201301 视为 YYYYMM 或 YYMMDD？

> ID：14884307
> 
> 赞同：5
> 
> 时间：2013-02-14T21:24:09.207
> 
> 标签：我在sql-server-2012, sql-server-2008下标记了这个问题，因为用户在, sql-server, sql-server-2008, sql-server-2012

### 有人在 Microsoft Connect 上报告了此错误：

我在 Microsoft Connection 网站上遇到了以下错误报告。用户报告该功能正在验证涉及*2012 年*[*`IsDate (Transact-SQL)`*](http://msdn.microsoft.com/en-us/library/ms187347.aspx)期间的格式的期间，但自*2013*年初以来停止工作。*`YYYYMM`*

 **[***ISDate() 从 2013 年开始返回不同的结果***](https://connect.microsoft.com/SQLServer/feedback/details/779223/isdate-returns-different-results-beginning-in-2013)

用户报告以下作为输入数据。我已经列出了用户的期望和 SQL Server 的输出。

```
SELECT  ISDATE(201201)      AS CheckDate1   --Expected: 1; Actual: 1
    ,   ISDATE(201301)      AS CheckDate2   --Expected: 1; Actual: 0
    ,   ISDATE(201401)      AS CheckDate3   --Expected: 1; Actual: 0
    ,   ISDATE(20130101)    AS CheckDate4   --Expected: 1; Actual: 1 
```

### 阅读 MSDN 文档：

我在 MSDN 网站上阅读了有关[*`ISDATE (Transact-SQL)`*](http://msdn.microsoft.com/en-us/library/ms187347%28v=sql.110%29.aspx). 该文档说明了以下定义，但找不到任何可以*`YYYYMM`*验证该函数正在验证的示例。

```
Returns 1 if the expression is a valid date, time, or datetime value; 
otherwise, 0. 
```

在关于数据类型[*datetime (Transact-SQL)*](http://msdn.microsoft.com/en-us/library/ms187819.aspx)的定义中，我找不到任何暗示**`YYYYMM`**是有效日期格式的东西。用户指定的值也不是[*datetime2*](http://msdn.microsoft.com/en-us/library/bb677335.aspx)格式。

我编写了以下脚本以了解发生了什么。

### 查询试图找出发生了什么：

```
DECLARE @StartAt    INT;
DECLARE @EndAt      INT;

SET @StartAt    = 200000;
SET @EndAt      = 201312;

;WITH Numbers AS 
(
    SELECT @StartAt AS n
    UNION ALL
    SELECT n + 1 FROM Numbers WHERE n < @EndAt
)
SELECT  n           AS Number
    ,   ISDATE(n)   AS IsValidDate 
FROM    Numbers 
WHERE   ISDATE(n) <> 0
OPTION (MAXRECURSION 10000); 
```

### 以上查询结果：

上述查询在*2012 年*的每一天返回*366*行。这是 2 月至 3 月之间数据的快照。IsDate 认为值 200229 是有效的，但不是 200230，这让我认为 IsDate 正在处理这些格式值，而**不是**像用户期望的那样。***`YYMMDD`*****`YYYYMM`****

 ***```
Number  IsValidDate
------  -----------
200227        1
200228        1
200229        1
200301        1
200302        1
200303        1 
```

### 问题：

*   我是否正确*IsDate*将上述值视为**`YYMMDD`**而不是**`YYYYMM`**？

*   如果**`YYMMDD`**确实是函数试图评估的格式，它代表哪个世纪。它是否代表年份**`1920`**或**`2020`**其他值？还是没关系？

*   我用下面提到的那些替换了上述查询中的开始和结束值。我还列出了在这些范围之间找到的有效行数。为什么以**00**到**09**结尾的年份不返回任何行？

### 多次尝试：

```
Start   End     Rows
------  ------  ----
000000  001231     0
010000  011231     0
020000  021231     0
030000  031231     0
040000  041231     0
050000  051231     0
060000  061231     0
070000  071231     0
080000  081231     0
090000  091231     0
100000  101231   365
110000  111231   365
120000  121231   366
...
...
980000  981231   365
990000  991231   365 
```

### 我用来运行上述查询的 SQL Server 版本：

[我在sql-server-2012](/questions/tagged/sql-server-2012 "显示标记为“sql-server-2012”的问题")版本上运行了上述查询。我在[sql-server-2008下标记了这个问题，因为用户在](/questions/tagged/sql-server-2008 "显示标记为“sql-server-2008”的问题")*Microsoft Connect*网站上的那个版本下报告了这个问题。

```
Microsoft SQL Server 2012 - 11.0.2316.0 (X64) 
Apr  6 2012 03:20:55 
Copyright (c) Microsoft Corporation
Enterprise Edition (64-bit) on Windows NT 6.1 <X64> 
(Build 7601: Service Pack 1) (Hypervisor) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:34:41.217

isdate 所做的只是检查字符串是否可以转换为日期

他们很幸运 12 是一个有效的月份

以此为例

```
SELECT ISDATE('201201'),ISDATE('201301'),ISDATE('199901') 
```

如您所见， 1999 也返回 0

当然，您可以享受这样的乐趣

```
SELECT ISDATE(CONVERT(DATETIME,0)),ISDATE(CONVERT(DATETIME,'')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:56:26.187

1.  [ISDATE](http://msdn.microsoft.com/en-us/library/ms187347.aspx)将六个字符的字符串解释为`yymmdd`.

2.  它取决于配置的[截止服务器配置选项](http://msdn.microsoft.com/en-us/library/ms191004.aspx)。默认是`2049`，所以以`< 50`* 结尾的年份是`20xx`，年份`>= 50`是`19xx`。

3.  您的测试代码正在处理整数，并且在作为参数传递给`isdate`没有前导零时隐式转换为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:35:36.220

根据您的结果，例如`201201`或被`201301`解释为`YYMMDD`。（然后认为第 13 个月的日期无效。）*****

# jquery - 当父 LI 有类时从点击功能中排除

> ID：14884309
> 
> 赞同：0
> 
> 时间：2013-02-14T21:24:09.847
> 
> 标签：jquery

我正在尝试向 A 元素添加单击功能，除非父 LI 具有某个类（.current）

以下似乎不起作用：

```
$('ul li:not(.current) a').click(function (e) { 
```

这是一个jsFiddle：

[http://jsfiddle.net/WvPE7/](http://jsfiddle.net/WvPE7/)

我不希望为“ul li.current a”执行点击功能 - 只是“ul li a”（没有.current）

当然我错过了一些非常简单的东西......任何帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:29:27.610

您应该添加一个小条件而不是使用`:not('.current')`.

```
if ($(this).parent().hasClass('current')) return; 
```

当您运行时，事件是绑定`$('ul li:not(.current) a')`的，此时，没有 li 具有当前类。

**演示：http:** [//jsfiddle.net/WvPE7/5/](http://jsfiddle.net/WvPE7/5/)

**完整代码：**

```
$('ul li a').click(function (e) {
    e.preventDefault();

    if ($(this).parent().hasClass('current')) return;

    $('p').hide();
    $('li').removeClass('current');
    $(this).parent().addClass('current');
    var myClass = $(this).attr('class');
    $('p.' + myClass).fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:34:41.760

您可以使用以下`.on()`方法通过简单的委托来做到这一点：

```
$('ul').on('click', 'li:not(.current) a', function(e) {
    // ...
}); 
```

`.on()` [您可以在此处](http://api.jquery.com/on/)了解更多信息。

* * *

这是在行动：http: [//jsfiddle.net/WvPE7/7/](http://jsfiddle.net/WvPE7/7/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T21:26:19.063

转动

```
$('ul li:not(.current) a').click(function (e) { 
```

进入

```
$('ul').on('click', 'li:not(.current) a', function (e) { 
```

# gwt - 使用 gwt 将实体对象从服务器序列化到客户端时客户端 PersistenceCapable NoClassDefFoundError

> ID：14884315
> 
> 赞同：0
> 
> 时间：2013-02-14T21:24:35.417
> 
> 标签：gwt, jpa, openjpa

我正在使用 apache open JPA 在服务器端访问我的数据库。我试图从我的 gwt 客户端调用服务器以检索实体对象，但此请求总是失败并显示错误消息：NoClassDefFoundError org/apache/openjpa/enhance/PersistenceCapable。

我尝试在 gwt.xml 文件中定义我的增强实体类，但没有帮助：

```
<set-configuration-property name="rpc.enhancedClasses" value="com.jobsin.domain.SystemUser,com.jobsin.domain.Keyword,com.jobsin.domain.Job">/ 
```

我的服务器功能：

```
public  SystemUser getCurrentUser() 
throws InvalidUser{

    HttpServletRequest httpServletRequest = this.getThreadLocalRequest();
    HttpSession session =  httpServletRequest.getSession();
    SystemUser user=null;

    Cookie[] cookies = httpServletRequest.getCookies();
    SocialNetworkCookie cookie = network.generateCookieObject();
    if(!cookie.init(cookies)){
        session.invalidate();
        throw new InvalidUser(); // no user was connected, user need to login
    }

    //try get user details from db
    EntityManager em = factory.createEntityManager();
    SystemUserDAOImpl userdao = new  SystemUserDAOImpl(em);
    user = userdao.findUserByNetworkId(cookie.getMemberId());
         //make user detach
    em.close();

    return user;
} 
```

系统用户类：

```
@Entity
public class SystemUser implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = -1673271845552139219L;

    @Id
    @GeneratedValue
    private long id; 

    @NotNull
    private String firstName;

    @NotNull
    private String lastName;

    @NotNull
    @Column(unique=true)
    private String email;

    @Temporal(TemporalType.TIMESTAMP) 
    private Date lastSearch;

    @ManyToMany(cascade = CascadeType.ALL)
    private Set<Job> jobs = new HashSet<Job>();

    @ManyToMany(cascade = CascadeType.ALL)
    private Set<Keyword> keywords = new HashSet<Keyword>();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:18:52.260

最简单的解决方案是将 OpenJPA 二进制文件添加到 GWT 客户端类路径。

# javascript - Javascript 中的对象和变量

> ID：14884316
> 
> 赞同：0
> 
> 时间：2013-02-14T21:24:37.843
> 
> 标签：javascript

好的，想象一下我有以下对象

```
var House= function(){
    var color = "#0000FF";
} 
```

然后我添加以下方法：

```
House.prototype.drawHouse = function(){
    document.write("House " + this.color);
    // ^^ How do I reference the color property of the object?
} 
```

从 drawHouse 方法中引用颜色属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T21:26:51.583

你不能。

`var color`是一个局部变量，其可见范围仅受匿名函数体的限制。

您需要像这样实现它：

```
var House= function(){
    this.color = "#0000FF";
} 
```

之后，您将能够`this.color`通过`drawHouse()`

# java - 处理 dl 查询中的数据值限制

> ID：14884319
> 
> 赞同：0
> 
> 时间：2013-02-14T21:24:43.670
> 
> 标签：java, semantic-web, owl, dlquery, owl-api

我正在尝试使用 OWL API 运行 DL 查询，使用 DL 查询示例（[http://sourceforge.net/p/owlapi/code/ci/aef6981535f07a2d0d44c394b9f4d5415f36025a/tree/contract/src/test/java/org/coode /owlapi/examples/DLQueryExample.java](http://sourceforge.net/p/owlapi/code/ci/aef6981535f07a2d0d44c394b9f4d5415f36025a/tree/contract/src/test/java/org/coode/owlapi/examples/DLQueryExample.java) )

hasExperience some (Experience and hasYearsOfExperience some int[>=1])

这运行良好并在 Protege 中显示预期结果，但在 Java 中返回以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: Prefix not registered for prefix name: :
    at org.semanticweb.owlapi.util.DefaultPrefixManager.getIRI(DefaultPrefixManager.java:199)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.getIRI(ManchesterOWLSyntaxEditorParser.java:3112)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.getOWLDatatype(ManchesterOWLSyntaxEditorParser.java:563)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseDataRangePrimary(ManchesterOWLSyntaxEditorParser.java:1032)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseDataUnionOf(ManchesterOWLSyntaxEditorParser.java:1013)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseDataIntersectionOf(ManchesterOWLSyntaxEditorParser.java:995)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseDataRange(ManchesterOWLSyntaxEditorParser.java:988)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseDataRestriction(ManchesterOWLSyntaxEditorParser.java:908)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseNonNaryClassExpression(ManchesterOWLSyntaxEditorParser.java:787)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseUnion(ManchesterOWLSyntaxEditorParser.java:688)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseIntersection(ManchesterOWLSyntaxEditorParser.java:663)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseNestedClassExpression(ManchesterOWLSyntaxEditorParser.java:1212)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseObjectRestriction(ManchesterOWLSyntaxEditorParser.java:819)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseNonNaryClassExpression(ManchesterOWLSyntaxEditorParser.java:783)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseUnion(ManchesterOWLSyntaxEditorParser.java:688)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseIntersection(ManchesterOWLSyntaxEditorParser.java:663)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseNestedClassExpression(ManchesterOWLSyntaxEditorParser.java:1212)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseObjectRestriction(ManchesterOWLSyntaxEditorParser.java:819)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseNonNaryClassExpression(ManchesterOWLSyntaxEditorParser.java:783)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseUnion(ManchesterOWLSyntaxEditorParser.java:688)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseIntersection(ManchesterOWLSyntaxEditorParser.java:663)
    at org.coode.owlapi.manchesterowlsyntax.ManchesterOWLSyntaxEditorParser.parseClassExpression(ManchesterOWLSyntaxEditorParser.java:650)
    at org.coode.owlapi.examples.DLQueryParser.parseClassExpression(DLQueryManager.java:413)
    at org.coode.owlapi.examples.DLQueryEngine.getInstances(DLQueryManager.java:324)
    at org.coode.owlapi.examples.DLQueryManager.getInstances(DLQueryManager.java:127) 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:38:17.887

问题似乎来自您处理前缀的方式，而不是来自 DL 查询。

确保您的默认前缀存在：您可以查看 .owl 文件的顶部，其中声明了前缀映射。

在您的代码中，您也应该有类似的内容：

```
String base = "http://example.com/";
PrefixManager pm = new DefaultPrefixManager(base); 
```

您还可以查看[文档](http://sourceforge.net/p/owlapi/code/ci/aef6981535f07a2d0d44c394b9f4d5415f36025a/tree/contract/src/test/java/org/coode/owlapi/examples/Examples.java)以了解有关前缀的更多信息。

# json - 使用 JSON 将网格 (obj+mtl) 加载到 WebGL

> ID：14884320
> 
> 赞同：1
> 
> 时间：2013-02-14T21:24:45.520
> 
> 标签：json, webgl, render

我开始学习 WebGL，但我对图形完全没有经验。

我需要将一个完整的网格加载到 WebGL（Dabrovic Sponza 来自：[http](http://graphics.cs.williams.edu/data/meshes.xml) ://graphics.cs.williams.edu/data/meshes.xml ）。从今天开始，我加载的唯一类型的模型是简单的 JSON，通过：

```
function loadModel(){
    var request=new XMLHttpRequest();
    request.open("GET", "sponza.json");
    request.onreadystatechange=function (){
        if(request.readyState==4)
            handleLoadedModel(JSON.parse(request.responseText));
    }
    request.send();   
} 
```

现在我有这些文件：

![在此处输入图像描述](../Images/db6f4aaaee588e27f5a78122f5daba2c.png)

到目前为止我所做的是：

我使用在线找到的此脚本将 obj 转换为 JSON

```
 function loadObj(url)
    {
        var req = new XMLHttpRequest();
        req.onreadystatechange = function () { processLoadObj(req) };
        req.open("GET", url, true);
        req.send(null);
    }

    function processLoadObj(req)
    {
        if (req.readyState == 4) {
            doLoadObj(req.responseText);
        }
    }

    function doLoadObj(text)
    {
        vertexArray = [ ];
        normalArray = [ ];
        textureArray = [ ];
        indexArray = [ ];

        var vertex = [ ];
        var normal = [ ];
        var texture = [ ];
        var facemap = { };
        var index = 0;

        var lines = text.split("\n");
        for (var lineIndex in lines) {
            var line = lines[lineIndex].replace(/[ \t]+/g, " ").replace(/\s\s*$/, "");

            // ignore comments
            if (line[0] == "#")
                continue;

            var array = line.split(" ");
            if (array[0] == "v") {
                // vertex
                vertex.push(parseFloat(array[1]));
                vertex.push(parseFloat(array[2]));
                vertex.push(parseFloat(array[3]));
            }
            else if (array[0] == "vt") {
                // normal
                texture.push(parseFloat(array[1]));
                texture.push(parseFloat(array[2]));
            }
            else if (array[0] == "vn") {
                // normal
                normal.push(parseFloat(array[1]));
                normal.push(parseFloat(array[2]));
                normal.push(parseFloat(array[3]));
            }
            else if (array[0] == "f") {
                // face
                if (array.length != 4) {
                    //obj.ctx.console.log("*** Error: face '"+line+"' not handled");
                    continue;
                }

                for (var i = 1; i < 4; ++i) {
                    if (!(array[i] in facemap)) {
                        // add a new entry to the map and arrays
                        var f = array[i].split("/");
                        var vtx, nor, tex;

                        if (f.length == 1) {
                            vtx = parseInt(f[0]) - 1;
                            nor = vtx;
                            tex = vtx;
                        }
                        else if (f.length = 3) {
                            vtx = parseInt(f[0]) - 1;
                            tex = parseInt(f[1]) - 1;
                            nor = parseInt(f[2]) - 1;
                        }
                        else {
                            //obj.ctx.console.log("*** Error: did not understand face '"+array[i]+"'");
                            return null;
                        }

                        // do the vertices
                        var x = 0;
                        var y = 0;
                        var z = 0;
                        if (vtx * 3 + 2 < vertex.length) {
                            x = vertex[vtx*3];
                            y = vertex[vtx*3+1];
                            z = vertex[vtx*3+2];
                        }
                        vertexArray.push(x);
                        vertexArray.push(y);
                        vertexArray.push(z);

                        // do the textures
                        x = 0;
                        y = 0;
                        if (tex * 2 + 1 < texture.length) {
                            x = texture[tex*2];
                            y = texture[tex*2+1];
                        }
                        textureArray.push(x);
                        textureArray.push(y);

                        // do the normals
                        x = 0;
                        y = 0;
                        z = 1;
                        if (nor * 3 + 2 < normal.length) {
                            x = normal[nor*3];
                            y = normal[nor*3+1];
                            z = normal[nor*3+2];
                        }
                        normalArray.push(x);
                        normalArray.push(y);
                        normalArray.push(z);

                        facemap[array[i]] = index++;
                    }

                    indexArray.push(facemap[array[i]]);
                }
            }
        }

        result = {};
        result["vertexPositions"] = vertexArray;
        result["vertexNormals"] = normalArray;
        result["vertexTextureCoords"] = textureArray;
        result["indices"] = indexArray;;

        document.write(JSON.stringify(result));

    }
    </script>
    </head>

    <body onload="loadObj('model.obj');">
    </body> 
```

然后将所有信息放入缓冲区（1个用于文本坐标，1个用于顶点，1个用于法线，1个用于索引）

最后对所有东西都使用了单一的纹理。

结果远远超出了 dabrovic sponza（谷歌图片上的随机图片显示了我想要的），我该如何使用那些 jpg 文件和 .mtl ？

我什至不确切知道 mtl 文件是什么，而且我对这些东西完全没有经验，这是我的第一次尝试，所以请耐心等待！

另外，如果我的英语不好，对不起！

编辑：另外，使用随机模型加载器加载网格时，我发现并非所有顶点都正确转换（例如，我没有地板）。此外，如果我对所有部分（柱状柱）都使用纹理，则将其渲染为完全透明……也许我的转换器不好。我有机会写一个像样的转换器吗？我在哪里可以找到这样做的文档？再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:08:49.357

显然，您的 OBJ 转换器忽略了 MTL 文件中包含的材料定义。你嫁给这种格式了吗？也许在搅拌机中加载并作为 collada 重新出口？

# azure - 在 Azure 暂存中测试子域

> ID：14884321
> 
> 赞同：3
> 
> 时间：2013-02-14T21:24:46.737
> 
> 标签：azure, asp.net-mvc-4, subdomain, azure-web-roles

我刚刚向托管在 Azure Web 角色中的 MVC 应用程序添加了一个新区域，该应用程序使用[属性路由](http://attributerouting.net/#subdomains)来命中具有子域前缀的路由的子域控制器。在 azure 模拟器上这很好用，我可以使用我的开发 url 访问正确的控制器（我在主机文件中有记录）

主机文件记录： `127.0.0.1 domain.com portal.domain.com`

工作子域路由： `http://portal.domain.com:81/SubController/SubAction`

如何在暂存环境中继续测试它？目前我正在使用 3 个月的免费试用期，并且我知道在开始付款之前我无法添加 CNAME 或 A 记录，但我仍有 2 个月的试用期，只是希望应用程序能够正常工作。它不必看起来很漂亮我不在乎子域网址是否如下所示：

```
 http://portal.8c72d21eg2c14636s0542f181024e72a.cloudapp.net/ 
```

这当前抛出：

```
 [Fiddler] DNS Lookup for "portal.8c72d21eg2c14636s0542f181024e72a.cloudapp.net" failed. No such host is known 
```

有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:36:29.113

首先，正如您已经指出的，CNAME 对`Cloud Services`.

其次，我强烈建议将`production`环境用于测试/暂存目的，尤其是在开发/测试时。`staging`云服务和环境之间的唯一区别`production`是您获得了`fixed/stable`生产环境的域名（即`mygreatapp.cloudapp.net`），而每次部署时您总是获得一个不同的类似 GUID 的域（即`8c72d21eg2c14636s0542f181024e72a.cloudapp.net`）。除此之外，一切都是一样的——计费、网络、资源，一切。

鉴于具体情况，您了解每次将新版本（如果您删除旧的暂存）部署到暂存时都必须创建一个新的 CNAME，因为您将获得一个类似 GUID 的新域。

因此，创建您的云服务，将您的域 CNAME 到它的域，部署到`production`插槽并从此过上幸福的生活；）

# sql-server-2008 - 使用动态 SQL 和游标在临时表中创建列

> ID：14884326
> 
> 赞同：0
> 
> 时间：2013-02-14T21:25:12.313
> 
> 标签：sql-server-2008, cursor, dynamic-sql

我正在使用 SQL Server 2008，我正在尝试根据用户的选择创建一个临时表。

```
declare @x nvarchar(max), @mgchk int, @sgchk int, @ssgchk int, @seasonchk int, @vendorchk int, @storeid varchar(10), @trsfrom date, @trsto date

set @trsfrom = '1/1/12'
set @trsto = '1/1/13'
set @mgchk = 1
set @sgchk = 1
set @ssgchk = 1
set @seasonchk = 1
set @vendorchk = 1

set @x = 'create table ##aa ('

if @mgchk = 1
    set @x = @x + 'MainGroup varchar(20),'
if @sgchk = 1
    set @x = @x + 'SubGroup varchar(20),'
if @ssgchk = 1
    set @x = @x + 'SubSubGroup varchar(20),'
if @seasonchk = 1
    set @x = @x + 'Season varchar(20),'
if @vendorchk = 1
    set @x = @x + 'VendorID varchar(20),'

declare storecr Cursor scroll for
select distinct storeid from RPTrs where TRSDate between @trsfrom and @trsto
open storecr 
fetch next from storecr 
into @storeid 
while @@FETCH_STATUS = 0 begin
set @x = @x + @storeid + ' decimal(15,2),'
fetch next from storecr 
into @storeid 
end 
close storecr 
deallocate storecr

set @x = @x + 'Total decimal(15,2))'

execute sp_executesql @x

select * from ##aa 
```

但是，当我运行它时出现这些错误：

> *消息 102，级别 15，状态 1，第 1 行
> '01' 附近的语法不正确。
> 消息 208，级别 16，状态 0，第 47 行
> 无效的对象名称“##aa”。*

最终输出应基于在@trsfrom 和@trsto 日期范围之间进行交易的商店数量。因此，如果在那段时间有 3 家商店进行销售，我要查找的结果是（01、02 和 03 是商店名称）：

```
MainGroup | SubGroup | SubSubGroup | Season | Vendor | 01 | 02 | 03 | Total
----------------------------------------------------------------------------
          |          |             |        |        |    |    |    | 
```

RPTrs 中的 StoreID 字段是 varchar(5) 如果这是问题。但商店栏将显示日期范围之间的销售额。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:39:24.377

想通了问题。我的光标内的集合丢失了 [ ]

```
set @x = @x + '[' + @storeid +']' + ' decimal(15,2),' 
```

# java - 如何让浏览器停止包装我的实体数据 标签？

> ID：14884330
> 
> 赞同：1
> 
> 时间：2013-02-14T21:25:50.573
> 
> 标签：java, google-chrome, safari, jax-rs, resteasy

我正在尝试编写一个自定义`ExceptionMapper`并且我想返回`text/plain`，但是`Response`返回的或者链中的某些东西坚持用`<pre></pre>`标签包装我的内容。

这是我尝试过的，我尝试过没有设置`MediaType`：

```
final Response.ResponseBuilder rb = Response.status(500);
rb.entity(e.getCause().getMessage());
return rb.build(); 
```

我也尝试过设置`MediaType.TEXT_PLAIN_TYPE`：

```
final Response.ResponseBuilder rb = Response.status(500);
rb.type(MediaType.TEXT_PLAIN_TYPE);
rb.entity(e.getCause().getMessage());
return rb.build(); 
```

在这两种情况下，我都会收到用 HTML 包装的异常消息：

```
<html>
   <head></head>
   <body>
     <pre style="word-wrap: break-word; white-space: pre-wrap;">
          com.google.appengine.api.oauth.InvalidOAuthParametersException:
     </pre>
   </body>
   <style type="text/css"></style>  
</html> 
```

我认为这可能是包装内容的浏览器，我在 Chrome 和 Safari 中得到了完全围绕纯文本输出包装的相同 HTML 块，但是当我使用`curl`.

```
[jhr@Blackintosh] [~]
curl http://funny-pages.appspot.com/image/all
com.google.appengine.api.oauth.InvalidOAuthParametersException: 
```

**我该怎么做才能让它在浏览器中显示未修饰的内容？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:50:47.383

只要`curl`给你一个纯文本，很明显 HTML 包装来自谷歌浏览器。可以（应该）在客户端配置此行为。如果您想确保您的客户始终获得纯文本文件 - 将其作为[MIME 附件](http://en.wikipedia.org/wiki/MIME)发送。在这种情况下，Chrome 会保存一个文件，用户必须使用一些纯文本查看器打开它。

# php - android和两个php web服务器之间的通信

> ID：14884341
> 
> 赞同：-1
> 
> 时间：2013-02-14T21:26:41.467
> 
> 标签：php

我有**两个 php web 服务器**，其中一个与客户端（android）通信，我想知道如何轻松地在两个服务器之间进行通信，**这意味着我如何重定向从 android 传输的数据**，（在Web 服务）到第一个 Web 服务器，**到另一个 Web 服务器**

只是我想提一下，我成功地将数据从 android 发送到第一个 web 服务器，所以要清楚我的问题是一旦第一个 web 服务器收到来自 android 的数据，就***自动将数据从第一个 web 服务器传输到第二个 web 服务器，而无需人工干预。***
希望你能帮助我你的想法，我很抱歉我的英语。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:29:56.770

在第一个（代理）上使用 PHP 中的 cURL 库向第二个服务器发出请求。

查看[PHP cURL 手册](http://php.net/manual/en/book.curl.php)。另请参见下面的示例。在此示例中，我向`JSON`服务器发送一个请求以进行身份​​验证。您可以轻松地调整它以发送`POST`请求或您需要的任何其他内容：

```
<?php

$fld = array(
    'registration_ids' => array('1234'),
    'data' => array('header' => 'abc', 'message' => 'def'));
$hdr = array(
    'Content-Type: application/json',
    'Authorization: key=ghi');

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, 'http://example.com:9777');
curl_setopt($ch, CURLOPT_PORT, 9777);
curl_setopt($ch, CURLOPT_HTTPHEADER, $hdr);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fld));

$response = curl_exec($ch);
curl_close($ch); 
```

# javascript - jQuery和“this”管理？如何避免变量冲突？

> ID：14884342
> 
> 赞同：16
> 
> 时间：2013-02-14T21:26:42.293
> 
> 标签：javascript, jquery

在编写复杂的 jQuery/javascript 时，如何在`this`不重新定义`this`之前定义的变量的情况下管理使用？您是否有经验法则或个人偏好来命名`this`变量（随着嵌套变得更深）？

有时我希望更高范围的变量可用于嵌套函数/回调，但有时我希望有一个干净的石板/范围；有没有一种不用担心变量冲突的好方法来调用函数/回调？如果是这样，您使用什么技术？

* * *

一些超级愚蠢的测试代码：

```
$(document).ready(function() {

    console.warn('start');

    var $this = $(this),

    $dog = $('#dog'),

    billy = function() {

        console.log('BILLY!', 'THIS:', $this, ' | ', 'DOG:', $dog);

        var $this = $(this);

        console.log('BILLY!', 'THIS:', $this, ' | ', 'DOG:', $dog);

    };

             // (#1)
    billy(); // BILLY! THIS: undefined | DOG: jQuery(p#dog)
             // BILLY! THIS: jQuery(Window /demos/this/) | DOG: jQuery(p#dog)

    console.log('THIS:', $this, ' | ', 'DOG:', $dog); // THIS: jQuery(Document /demos/this/) | DOG: jQuery(p#dog)

             // (#2)
    billy(); // BILLY! THIS: undefined | DOG: jQuery(p#dog)
             // BILLY! THIS:  jQuery(Window /demos/this/) | DOG: jQuery(p#dog)

    $('#foo').slideUp(function() {

                                                          // (#3)
        console.log('THIS:', $this, ' | ', 'DOG:', $dog); // BILLY! THIS: undefined | DOG: jQuery(p#dog)

        var $this = $(this); // (#10)

                                                          // (#4)
        console.log('THIS:', $this, ' | ', 'DOG:', $dog); // BILLY! THIS: jQuery(Window /demos/this/) | DOG: jQuery(p#dog)

    });

    $('#clickme').click(function() {

                                                          // (#5)
        console.log('THIS:', $this, ' | ', 'DOG:', $dog); // THIS: undefined | DOG: jQuery(p#dog)

        var $this = $(this);

                                                          // (#6)
        console.log('THIS:', $this, ' | ', 'DOG:', $dog); // THIS: jQuery(button#clickme) | DOG: jQuery(p#dog)

        $('#what').animate({
            opacity : 0.25,
            left    : '+=50',
            height  : 'toggle'
        }, 500, function() {

                                                              // (#7)
            console.log('THIS:', $this, ' | ', 'DOG:', $dog); // THIS: undefined | DOG: jQuery(p#dog)

            var $this = $(this);

                                                              // (#8)
            console.log('THIS:', $this, ' | ', 'DOG:', $dog); // THIS: jQuery(div#what) | DOG: jQuery(p#dog)

        });

    });

             // (#9)
    billy(); // THIS: undefined | DOG: jQuery(p#dog)
             // THIS: jQuery(div#foo) | DOG: jQuery(p#dog)

    console.warn('finish');

}); 
```

[可以在此处 (jsbin.com) 找到完整的演示页面](http://jsbin.com/oyegag/3)。

**注意：**如您所见，我已用数字（#XX）“标记”注释以方便参考。

* * *

## 观察1：

**标记（#1）**

```
BILLY! THIS: undefined | DOG: jQuery(p#dog) 
```

**反问：**为什么`$this`未定义，但`$dog`可以访问？

**答：**因为`var`那个范围内是重新定义的`$this`；只是我试图`$this`在该范围内定义之前记录。

如果我注释掉`var $this = $(this);`，那么**标记 (#1)**将返回：

```
BILLY! THIS: jQuery(Document index2.html) | DOG: jQuery(p#dog)
BILLY! THIS: jQuery(Document index2.html) | DOG: jQuery(p#dog) 
```

相同的逻辑适用于**标记 (#2)、(#3)、(#4)、(#5)、(#6)、(#7) 和 (#8)**。

基于这个观察（如果我在这里错了，请纠正我）我假设我可以放在`var $this = $(this);`函数的底部，并且当前范围会知道我想使用当前范围`$this`（即使它不是尚未定义），而不是父母的`$this`（即使它已**定义**）。

### `$this`避免冲突的可能解决方案：

如果想要`$(this)`在其他闭包/函数/回调的外部/内部缓存并避免冲突，那么应该使用不同的变量标签，例如这些（例如）：

```
var $$ = $(this);
var $this2 = $(this);
var $t = $(this);
var $that = $(this); 
```

### 问题：

上面的解决方案是如何避免`$this`碰撞？如果不是，您最喜欢的技术是什么？

* * *

## 观察 2：

**标记（#9）**

```
THIS: undefined | DOG: jQuery(p#dog) 
```

...`$this`由于上述原因未定义，但是：

```
THIS: jQuery(div#foo) | DOG: jQuery(p#dog) 
```

……`$this`就是现在`$('#foo')`！

### 问题）：

究竟为什么会这样？

是因为通过**标记 (#10)**`$this`重新定义了吗？

 **（嗯，我觉得我需要谷歌“javascript中的垃圾收集”。）

同样，在编写复杂的 jquery/javascript 时，避免这种类型的变量冲突的最佳方法是什么？

* * *

*我希望这些不是可怕的问题。提前感谢您花时间帮助我。:)*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T21:34:36.823

您实际上遇到了变量提升问题：

```
billy = function() {

    console.log('BILLY!', 'THIS:', $this, ' | ', 'DOG:', $dog);

    var $this = $(this);

    console.log('BILLY!', 'THIS:', $this, ' | ', 'DOG:', $dog);

}; 
```

实际上在运行时是这样解释的：

```
billy = function() {

    var $this;

    console.log('BILLY!', 'THIS:', $this, ' | ', 'DOG:', $dog); // $this hasn't been set to anything yet...

    $this = $(this);

    console.log('BILLY!', 'THIS:', $this, ' | ', 'DOG:', $dog);

}; 
```

JavaScript 将变量和函数声明提升到范围块的顶部，以便您可以在手动声明它们之前引用它们。*当人们从范围块之外*引用同名的变量时，这会给人们带来麻烦，正如您在示例中清楚地看到的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T21:30:38.560

您刚刚遇到了作用域和 JavaScript 的乐趣。很多人喜欢做的一件事是，如果您需要在回调中访问当前范围，请将其定义为 self，如下所示：

```
var $ = require('jquery')
  , database = require('database')

$.on('click', function(action) {
  var self = this;
  database.connect(function() {
    database.putSync(self.action.button);
  });
}); 
```

请注意，当调用“连接”时，“this”的范围会重置为回调的范围，而不是点击处理程序的范围，这就是您将范围存储在可访问变量中的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T21:37:47.437

`var $this`您在内部范围内重新声明时看到的行为称为[提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)。这就是为什么你应该`var`在每个范围的开头为你在该范围内需要的任何变量始终使用一个语句的原因之一——并不是说它是*必要*的，它只是更清楚，因为它做同样的事情并且变量名更容易定位。

至于必须在深度嵌套的范围内使用变量..这可能表明出现问题（嵌套过多、单一职责等）。如果您需要大量使用某些构造，请考虑将它们添加到对象的范围内，而不是给它们以 . 结尾的名称`2`。至少你应该给他们描述性的名字（我通常只`$this = $(this)`在一个范围内使用，这是为了避免`$()`重复调用）。 `self`通常用于在其自身范围内的函数定义中引用当前对象。

```
var Dog = function (boy, dog) {
    this.boy = boy;
    this.dog = dog;
    this.$clickme = $("#clickme");
}

Dog.prototype.bind = function () {
    var self = this;

    self.$clickme.on('click', function() {
        var $this = $(this);
        console.log('THIS:', $this, ' | ', 'DOG:', self.dog);

        $('#what').animate({
            opacity : 0.25,
            left    : '+=50',
            height  : 'toggle'
        }, 500, function() {
            var $this = $(this);
            console.log('CLICKME:', self.$clickme, ' | ', 'DOG:', self.dog);
        });
    });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T09:57:35.933

其他人已经指出了您在示例中遇到的吊装问题。我仍然认为值得一提的是 jQuery 的代理功能。

它超级方便！您不必执行类似的操作`var self = this;`，这在嵌套多个范围时会给您带来麻烦。

[jQuery 代理文档](http://api.jquery.com/jQuery.proxy/)

使用代理，您可以委托`this`给您的函数，如果您将面向对象的 javascript 与 jQuery 结合使用，这将非常有用：

```
$(document).ready(function () { 
  var $dog = $('#dog');
  // without proxy
  $('.billy').click(function () {
      // $(this) refers to the node that has been clicked 
      $(this).css('color', 'green');
  });

  // with proxy
  $('.billy').click($.proxy(function () {
     // $(this) refers to $dog
     $(this).css('backgroundColor', 'red');
  }, $dog));
}); 
```

此处的工作示例：[jsFiddle jQuery 代理使用](http://jsfiddle.net/EEXEB/1/)

如果您确实需要`this`在函数中并排引用您的引用，我建议将它们全部加载到一个数组中，这样您就不必担心命名它们，并且您还可以记录嵌套级别：

```
$(document).ready(function () { 
  var thisStack = [];
  thisStack.push($('#dog'));

  $('.billy').click(function () {
    thisStack.push($this);
    // thisStack[0] refers to $('#dog')
    // thisStack[1] refers to $(this)

    ... more code ...

    thisStack.pop(); // get rid of $(this), leaving scope
  });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T21:38:26.207

如上所说。一种流行的方法是将变量 self 分配给 'this' 另一种方法是将您希望函数所在的范围作为最后一个参数发送：

```
this.on('change', function() {
 //this is now the scope outside the callback function.
}, this) 
```**

# r - R 中的惰性求值 – 分配是否受影响？

> ID：14884343
> 
> 赞同：21
> 
> 时间：2013-02-14T21:26:47.360
> 
> 标签：r, lazy-evaluation, assign

我读[了这个关于重命名对象的基本问题](https://stackoverflow.com/questions/2717757/how-do-i-rename-an-r-object)和@Shane 的回答，指出我懒惰的评估。现在我想知道是否`assign`也懒惰地评估。就像这里：

```
assign("someNewName",someOldObject)
rm(someOldObject) 
```

我对此感到疑惑的原因是以下用例：假设我有 10K+ R 个对象，每个对象都有两个名为`originalName`and的属性`additionalName`。现在我想编写一个函数，可以有效地让用户从一个名称切换到另一个名称，而不会丢失这两个属性。大概是这样...

编辑：根据@Hadley 的输入，我更改了我的代码。

```
switchObjectName <- function(x) {
  n1 <- attributes(x)$originalName
  n2 <- attributes(x)$additionalName
  objName <- deparse(substitute(x))
  if(objName == n1) {
    delayedAssign(n2,x,assign.env=.GlobalEnv)
  } else {
    delayedAssign(n1,x,assign.env=.GlobalEnv)
  }
  rm(list=c(objName),envir=.GlobalEnv)    
} 
```

这很好用，但我很难得到`rm`正确的陈述。我试过`rm(objName,envir=.GlobalEnv)`但无法让它工作，尽管 objName 绝对是一个字符，因为它是`deparse(substitute(x)`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-17T10:32:06.653

R 语言通常具有*值语义*。该分配`x <- y`意味着`x`并且`y`将是同一对象的独立副本（更新将是独立的）`y`。`x`一个天真的实现`x <- y`总是会为其分配内存`x`并完全复制`y`到其中。相反，GNU-R 使用写时复制机制，它会将复制推迟到实际发生更新，这样可以节省内存/执行时间，以防万一它没有发生。R 用户不必知道这种优化，它是完全透明的（除了一些罕见的情况，如内存不足错误）。这种机制适用于写成`x <- y`和`assign("x", y)`同等的作业。

*惰性求值*是语言设计的一部分，对 R 用户/程序员可见。作为参数传递给函数的表达式，例如在`foo(ls())`传递的表达式 is`ls()`中，仅在被调用函数的实现需要时才被延迟评估。

`delayedAssign`是一个低级函数，对 R 用户/程序员可见，但它实际上仅用于包的延迟加载，不应在用户程序中使用。`delayedAssign`允许指定一个表达式来计算变量的值；仅当/当第一次读取变量时，计算才会延迟发生。

因此，要回答这个问题，R 中的赋值总是“惰性”的，因为它使用了写时复制机制。赋值右侧的计算也可以是惰性的（使用`delayedAssign`），但用户程序不应该需要/使用它。

我认为对于变量的“重命名”，没有必要使用`delayedAssign`（因为不计算右侧）。它只会使情况变得更加复杂，并且由于必须进行簿记，因此可能会产生性能开销`delayedAssign`。如果我必须重命名变量，我只会使用普通赋值。

为了代码清晰，我也会尽可能避免从环境中删除变量，甚至从函数分配到全局环境中，例如，我只会创建一个新列表并将新绑定（变量）插入其中。

提到了写时复制机制，在 GNU-R 中的当前实现中，任何所描述的解决方案都可能导致内存复制，如果没有重命名变量，这将是不必要的。在 R 级别无法避免这种情况。

# r - 用空参数列表识别所有函数

> ID：14884346
> 
> 赞同：1
> 
> 时间：2013-02-14T21:27:00.863
> 
> 标签：r

如何找到`base`具有给定形式参数签名的所有函数（在当前工作环境中可用，因此加上加载的包）？

这是因为我试图找到一个例子来回答这个问题：[如果 function(x) 可以工作，我们为什么需要 function()？](https://stackoverflow.com/questions/14883925/if-functionx-can-work-why-would-we-need-function)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:27:00.863

所需件数：

*   所有函数的特征向量：`apropos("^",mode="function")`
*   函数没有参数吗？`length(formals(x))==0`
*   抓取由字符向量命名的对象`lapply( x, get )`

感谢@RichieCotton 的[apropos](https://stackoverflow.com/a/6982537/636656)和 @hadley 的`is.primitive`.

```
allFxnNames <- apropos("^",mode="function")
emptyFormals <- function(x) length(formals(x))==0 && !is.primitive(x)
allFxns <- lapply( allFxnNames, get )
whichEmpty <- sapply(allFxns, emptyFormals)
allFxnNames[whichEmpty] 
```

这会找到所有没有形式参数的非原始函数：

> “警报”、“closeAllConnections”、“颜色”、“颜色”、“贡献者”、“Cstack_info”、“日期”、“defaultPrototype”、“default.stringsAsFactors”、“dev.cur”、“dev.list”、 “dev_packages”、“element_blank”、“empty.dump”、“.First”、“.First.sys”、“flush.console”、“frame”、“getAllConnections”、“getCConverterDescriptions”、“getCConverterStatus”、“geterrmessage” "、"get_ll_TOL"、"get_ll_warn"、"getLoadedDLLs"、"getNumCConverters"、"get_path"、"get_Polypath"、"get_PolypathRule"、"get_ReplCRS_warn"、"getRversion"、"getTaskCallbackNames”、“getwd”、“graphics.off”、“has_devel”、“iconvlist”、“is_false”、“is.R”、“is_true”、“Java”、“l10n_info”、“last_plot”、“licence” 、“许可证”、“loadedNamespaces”、“loaded_pa​​ckages”、“loadingNamespaceInfo”、“memory.profile”、“newEmptyObject”、“.NotYetImplemented”、“.OptRequireMethods”、“plot.new”、“progress_none”、“rc.状态”、“Rdoc”、“recordPlot”、“恢复”、“.rs.activateGraphicsDevice”、“.rs.createUUID”、“.rs.defaultLibPathIsWriteable”、“.rs.defaultUserLibraryPath”、“.rs.disableQuartz”、 “.rs.helprIsActive"、".rs.iconvcommon"、".rs.initGraphicsDevice"、".rs.knitrChunkOptions"、".rs.listJsonRpcHandlers"、".rs.packages.initialize"、".rs.rpc.check_for_package_updates"、" .rs.rpc.get_cran_mirrors”、“.rs.rpc.get_package_install_context”、“.rs.rpc.iconvlist”、“.rs.rpc.init_default_user_library”、“.rs.rpc.list_objects”、“.rs.rpc。 list_packages”、“.rs.rpc.remove_all_objects”、“.rs.setHelprLoadHook”、“.rs.sweaveChunkOptions”、“RStudioGD”、“RStudio.version”、“.rs.uniqueLibraryPaths”、“.rs.updatePackageEvents”、 “.rs.writeableLibraryPaths”、“Rtangle”、“R.Version”、“RweaveLatex”、“搜索”、“搜索路径”、“sessionData”、“.standard_regexps”、“stderr”、“stdin”、“stdout”、“sys.calls”、“Sys.Date”、“sys.frames”、“Sys.getpid ", "Sys.info", "Sys.localeconv", "sys.nframe", "sys.on.exit", "sys.parents", "sys.status", "System", "Sys.time", “Sys.timezone”、“tempdir”、“test”、“theme_get”、“waiver”sys.nframe”、“sys.on.exit”、“sys.parents”、“sys.status”、“System”、“Sys.time”、“Sys.timezone”、“tempdir”、“test”、“ theme_get", "弃权"sys.nframe”、“sys.on.exit”、“sys.parents”、“sys.status”、“System”、“Sys.time”、“Sys.timezone”、“tempdir”、“test”、“ theme_get", "弃权"

# ruby - 理解 Ruby 类：“未定义方法 `<' for true:TrueClass”

> ID：14884351
> 
> 赞同：-1
> 
> 时间：2013-02-14T21:27:44.563
> 
> 标签：ruby, methods, quicksort

我正在关注 Coursera 上的课程，并且正在尝试在 Ruby 中实现快速排序算法。我对 OOP 的语言和概念非常陌生。

我创建了两个函数：一个是调用分区例程的 quickSort 函数（根据作为数组的第一个元素的枢轴将数组拆分为两个子数组）。

最终，我会将这两个方法放在一个类 Array 下，但现在我认为这样就可以了。

我尝试在数组（a = [5, 4, 3, 2, 1]）上运行它，但遇到以下错误：

```
A2.rb:16:in `partition': undefined method `<' for true:TrueClass (NoMethodError)
    from A2.rb:15:in `each'
    from A2.rb:15:in `partition'
    from A2.rb:33:in `quickSort' 
```

这是我的代码：

```
 def partition(array, left_idx, right_idx)
      num_comp = array.length - 1
      p = array[left_idx]
      i = left_idx + 1
      j = left_idx + 1
      puts "#{left_idx}, #{right_idx}, #{array[j]} #{j}"
      puts "pivot = #{p}"
      for j in (left_idx + 1..right_idx)
        if (left_idx < j < right_idx and left_idx < i < right_idx)
          if (array[j] > p)
            j = j + 1
          else 
            array[i], array[j] = array[j], array[i]
            i = i + 1
            j = j + 1
          end
        end
      end
      #swap pivot and rightmost value in subarray that contains < p
      array[1], array[i] = array[i], array[1]
      pivot_idx = i
      return array, num_comp, pivot_idx
    end

    def quickSort(array, start_idx, end_idx)
      array_n, num_comp, pivot_idx = partition(array, start_idx, end_idx)
      left_array = array_n[start_idx..pivot_idx - 1]
      right_array = array_n[pivot_idx + 1..end_idx]
      if (left_array.length > 1) 
        array_n = quickSort(array_n, start_idx, pivot_idx - 1)
      end
      if (right_array.length > 1)
        array_n = quickSort(array_n, pivot_idx + 1, end_idx)
      end
      return array
    end

    #a = Array.new()
    a = [5, 4, 3, 2, 1]
    quickSort(a, 0, 4)
    print "Array"
    puts a 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:32:26.490

```
left_idx < j < right_idx 
```

你不能这样做。

left_idx < j 首先解析为“True”

然后表达式变为 true < right_idx 并且 < 是无效的运算符..

将表达式更改为 if left_idx < j && j < right_idx

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:32:01.657

你不可以做这个：

```
left_idx < j < right_idx and left_idx < i < right_idx 
```

您需要建立条件：

```
((j > left_idx) && (j < left_idx)) && (etc) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:32:32.610

问题在于这一行：

```
if (left_idx < j < right_idx and left_idx < i < right_idx) 
```

这是有效的数学，但无效的 Ruby（在大多数其他编程语言中也是无效的）。你想要的是：

```
if (left_idx < j and j < right_idx and left_idx < i and i < right_idx) 
```

正在发生的事情是 Ruby 将“<”解释为一种方法。因此，原行变为：

```
if ((left_idx.<(j)).<(right_idx)) and ((left_idx.<(i)).<(right_idx)) 
```

在您的情况下， (left_idx.<(j)) 的结果是“真”。所以它然后尝试在“true”类上调用 <，它不存在，导致你得到错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T21:48:00.147

问题是这一行：

```
(left_idx < j < right_idx and left_idx < i < right_idx) 
```

`left < middle < right`可能是人们通常用数学写的，但在 Ruby 中，`<`并没有什么特别之处——它只是一种方法。具体来说，一个返回布尔值的方法。的结果`left_idx < j`始终为真或假，然后您尝试与`right_idx`该值进行比较。显然，这没有任何意义。

你可以把那行写成

```
left_idx < j && j < right_idx #... 
```

或者

```
(left_idx..right_idx).include? j && (left_idx..right_idx).include? i 
```

或者

```
([i,j].all? {|v| (left_idx..right_idx).include? v}) 
```

编写快速排序的一种更惯用的方式是

```
def quicksort(arr)
   pivot, *rest = arr
   left,right = rest.partition{|v| v<pivot}.map{|a| if !a.empty? then quicksort(a) else a end}
   left.push(pivot) + right
end 
```

这可能还可以做得更好。请注意，这不是就地快速排序，但您的似乎也不是。

# jquery - 通过 jquery 禁用文本框

> ID：14884357
> 
> 赞同：2
> 
> 时间：2013-02-14T21:28:09.397
> 
> 标签：jquery, asp.net

我正在尝试使用 jquery 禁用文本框：

```
$('#<%=txtFrom.ClientID %>').attr('disabled', true); 
```

它看起来像 disabled: ![图片](../Images/0e6ab815bba221414ebc839e81f18f5d.png)，但实际上不是，我可以在那里写。为什么？

**更新：**通过在代码中添加输入来修复：

```
$('#<%=txtFrom.ClientID %> input').attr('disabled', true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:17:51.257

你需要这样做：

```
$('#YOUR_ELEMENT_ID').attr("disabled", "disabled"); 
```

# python - 在 python 中调用存储过程时出现不正确的字符串值警告

> ID：14884358
> 
> 赞同：4
> 
> 时间：2013-02-14T21:28:16.987
> 
> 标签：python, mysql, stored-procedures, utf-8, mysql-python

我有一个数据库，它有一个存储过程，我在我的 python 脚本中调用它。
直到昨天没有问题。
但是昨天我的数据库服务器出现问题并恢复了数据库。
现在我从相同的代码中得到这个警告：

```
Warning: Incorrect string value: '\xD9\x88\xD8\xB2\xDB\x8C...' for column 'title' at row 1 
```

我检查了 DB 中的一些编码：
在`INFORMATION_SCHEMA.COLUMNS`：

```
+--------------+--------------------+
| COLUMN_NAME  | CHARACTER_SET_NAME |
+--------------+--------------------+
| title        | utf8               |
+--------------+--------------------+ 
```

数据库排序规则：`latin1_swedish_ci`
表排序规则：`utf8_general_ci`
列排序规则：`utf8_general_ci`
服务器字符集：（`UTF-8 Unicode (utf8)`
都和以前一样！！）

我正在使用这个连接：

```
self.con=mdb.connect(host=self.host, user=self.user, passwd=self.passwd, db=self.dbname,use_unicode=True, charset="utf8"); 
```

变量`title`是unicode。

**我试过：**

*   更改表格并重新`utf8_general_ci`设置`title`列
*   在调用`SET NAMES utf8` 过程之前调用。
*   删除和重新创建存储过程

没有工作！！！:-(

* * *

我`insert`在一个带有 Unicode 内容的临时表上执行了一个查询，它在没有警告的情况下工作！！！

* * *

问题是什么？
我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T22:04:41.637

问题解决了！
我添加 `CHARACTER SET utf8`到我的存储过程的 VARCHAR 参数并解决了问题：

```
..., IN `title` VARCHAR(255) CHARSET utf8,... 
```

但是我想知道为什么在恢复数据库之前没有问题！！！？？？

# performance - VS2012 中非常慢的实体框架模型设计器

> ID：14884360
> 
> 赞同：4
> 
> 时间：2013-02-14T21:28:19.250
> 
> 标签：performance, entity-framework, visual-studio-2012, entity-framework-5

我最近将一个使用实体框架的项目从 VS2010 和 EF4 升级到 VS2012 和 EF5。该模型源自具有良好架构的现有数据库，具有大约 70 个实体类型、20 个函数导入和 10 个复杂类型（用于返回存储过程结果）。

在 VS2010 EF4 中，将 60 个实体及其所有关联线放在一个图表中变得越来越笨拙。但是 VS2010 的性能很好，我不记得 IDE 有任何明显的延迟。

在 VS2012 EF5 中，我最终从数据库中重新导入了模型，因为构建不断指示 EDMX 中的错误（在 VS2010/EF4 中未报告）。大约 70 个表来自数据库中的 8 个不同模式，因此我将新模型拆分为每个模式的单独图表，并按模式为实体着色。然后我在每个图表中的每个实体上使用“包含相关”，以便与模式相关的所有表都包含在图表中（以便可视化关联）。从理论上讲，这是对 VS2010/EF4 IDE 的重大改进，因为我现在可以更轻松地在图表中查找和使用实体。

除了它在 VS2012/EF5 中的速度非常慢。应该很快的任务会导致等待光标数秒。像简单地改变实体的填充颜色这样的事情会导致大约 5 秒的等待。在图表上选择 10 个实体并更改填充颜色会导致等待 20-30 秒（近似值）。简单地在图表上拖动实体以将其移动几个像素也会导致与对实体属性进行任何更改类似的延迟。基本上，我所做的任何事情都会导致我的拇指转动，这很快就会导致浪费大量时间。

我正在通过远程桌面访问的虚拟机上的 Windows 8 Professional 下运行带有更新 1 的 VS2012。VM 运行在具有 8 ~3GHz 内核、16GB 内存和硬件 RAID5 的 Windows Server 2012 系统上。VS2012 VM 拥有 4 个 CPU 内核和 4GB 内存。服务器大部分是空闲的，有大量可用内存，因此 VM 应该非常快。相比之下，VS2010 在我桌面上的 Virtual Box 中的 Windows XP Pro 下运行，具有 2 个 3GHz 内核和 3GB 内存。加上我的桌面比服务器有更多的处理器和内存争用，所以 VS2012/EF5 理论上应该快得多。

如果它有所作为，我在两种环境中都安装了 ReSharper（2012 年的 v6 和 2012 年的 v7）。

我做了一些实验，用谷歌搜索了很多，但发现的很少。是不是已知比VS2010慢很多？我的安装、配置或项目/模型是否有可能导致这种情况？我有哪些选择可以让它更快？这是非常缓慢且非常低效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T16:51:21.467

尝试安装 Visual Studio 2012 Update 4。

如果性能没有提高，请尝试禁用 ReSharper 一段时间以再次测试性能。

问候

# android - Android spinner 在 oncreate 中报告 null 值

> ID：14884361
> 
> 赞同：0
> 
> 时间：2013-02-14T21:28:19.950
> 
> 标签：android, spinner, oncreate

我的 onCreate 中有这段代码，如果我取消注释 sortMode(position) 行，我会得到一个空指针异常。日志工作得很好，这对我来说似乎很奇怪。我究竟做错了什么？

我希望它在选择微调器上的选项时调用 sortMode() 。

```
 sort_spinner = (Spinner) findViewById(R.id.sort_spinner);
    sort_spinner
    .setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView adapter, View v,
                int position, long lng) {
            Log.i("position ", position + "");
            //sortMode(position);
        }

        @Override
        public void onNothingSelected(AdapterView arg0) {
            // do something else
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:49:20.607

我正在从菜单项转换为微调器，却忘记取出这段代码：

```
menuSortBy.setTitle(R.string.sort_by_score); 
```

一旦我删除它，它就起作用了。

# android - Android：重复列表视图

> ID：14884363
> 
> 赞同：0
> 
> 时间：2013-02-14T21:28:22.353
> 
> 标签：android, listview

我正在尝试创建一个列表视图来垂直显示图像。当用户滚动到列表末尾时，我想知道是否有办法在列表视图中重复图像。例如，如果列表有 3 个图像，在向下滚动到第三个和最后一个图像后，相同的图像应该再次以 1,2,3 的顺序重复。所以请给观众一个循环重复的效果。除了列表视图还有其他选择吗？

感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:45:31.780

您可以使用自定义适配器来实现该效果。

CommonsWare 制作了一个，如果您愿意，您可以重复使用：[cwac-endless](https://github.com/commonsguy/cwac-endless)

如果您想自己创建它，您当然也可以这样做。在您的适配器内部，您需要做的是`Integer.MAX_VALUE`从`getCount()`方法返回。

然后在您的`getView()`使用模数中将较大的数字“转换”为您实际拥有的项目数量范围内的一个。即，如果您有一组图像 id，您可以在 getView() 中执行以下操作：

```
mImgView.setImageResource(imgs[pos % 3]); 
```

实际上，您可以在 getItem() 而不是 getView() 内部进行模数，这可能是一个更好的主意。

# jquery - Kendo UI Mobile - 在 JQuery 中移除时，CSS 属性会在视图转换时重置

> ID：14884372
> 
> 赞同：1
> 
> 时间：2013-02-14T21:28:58.610
> 
> 标签：jquery, css, kendo-ui

目前，我正在通过在我的 css 文件中应用以下 css 规则来处理我的 kendo 移动网络应用程序的无样式内容的闪烁：

```
[data-role="content"]
    { 
    visibility: hidden;
    } 
```

这将我的所有内容隐藏在我的剑道视图中，然后在 JQuery“加载”事件中，我删除了上面的 css 属性：

```
$(window).bind("load", function () {
    // flicker of unstyled content
    $("[data-role=\"content\"]").css("visibility", "visible");
}); 
```

一切正常，我对此没有任何问题，除非使用剑道的视图转换。

当我使用`slide:left`过渡时，我的 css 文件中定义的原始`visibility: hidden;`文件被重新应用，导致一切都不可见。

发生这种情况是否有原因，特别是剑道以及它如何处理视图和转换？我知道我可以手动`visibility: hidden;`为每个`data-role="content"`元素添加一个类，然后在 jquery 的“加载”事件处理程序中删除该类，但我希望我的解决方案少一些“硬编码”。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T07:32:11.570

由于此消息最近已被赞成，我将提供我处理无样式内容闪烁的方式。它没有让我失望..

1.) 向单页应用程序的主页添加一个类：

```
<style>
    .m-hide-unstyled-content {
        visibility: hidden;
    }
</style> 
```

2.) 在单页应用程序的主页面中创建一个全局函数：

```
<script>
        function removeFlickerOfUnstyledContentClass() {
            // flicker of unstyled content fix
            $(".m-hide-unstyled-content).removeClass("m-hide-unstyled-content");
        }
</script> 
```

3.) 对于每个视图，确保手动添加`data-role="content"`div 标签，同时应用我们在上面创建的类：

```
<div class="m-hide-unstyled-content" data-role="content">
    ...
</div> 
```

4.) 最后，在每个视图函数的末尾调用我们在步骤 2 中创建的`data-init`函数：

```
<div data-role="view" data-init="initMyView">
    ...
</div>

<script>
    function initMyView(event) {
        ...
        removeFlickerOfUnstyledContentClass();
    }
</script> 
```

使用此设置，您将永远不会遇到那些令人讨厌的无样式内容闪烁！希望这可以帮助一些人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T21:56:23.277

我可以通过将 display:none 设置为闪烁的元素来绕过闪烁。然后根据需要使用 CSS 或 JS 显示它们。也许是 onHide 或 onShow。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:18:36.523

data-role=content 属性是在视图初始化时设置的——因此您的加载事件处理程序不会影响所有视图（除非您手动设置了 data-role=content）。

您可以考虑隐藏应用程序容器。

# python - 列表字典的最大值/最小值

> ID：14884376
> 
> 赞同：4
> 
> 时间：2013-02-14T21:29:04.640
> 
> 标签：python

我有一个字典，将 id_ 映射到数据值列表，如下所示`dic = {id_ : [v1, v2, v3, v4]}`：我正在尝试遍历字典中的每个值并检索列表映射的某个索引的最大值/最小值。

我想做的是这样的：

```
maximum = max([data[0], ??) for id_, data in self.dic.items()]) 
```

...但显然这行不通。是否可以像上面那样在一行中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T21:32:21.213

你需要像这样使用它：

```
maximum = max(data[0] for data in dic.values()) 
```

因为你没有使用你的`keys`，所以只需使用`dict.values()`来获取值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:41:17.613

使用[*生成器表达式*](http://docs.python.org/2/reference/expressions.html#generator-expressions)和[**`max()`**](http://docs.python.org/2/library/functions.html#max)：

```
In [10]: index = 0

In [11]: dictA = { 1 : [22, 31, 14], 2 : [9, 4, 3], 3 : [77, 15, 23]}

In [12]: max(l[index] for l in dictA.itervalues())
Out[12]: 77 
```

注意：[`itervalues()`](http://docs.python.org/2/library/stdtypes.html#dict.itervalues)返回字典值的[*迭代器*](http://docs.python.org/2/library/stdtypes.html#iterator-types)而不进行*复制*，因此比[`values()`](http://docs.python.org/2/library/stdtypes.html#dict.values)（在 Python < 3 中）更有效。

# sql - 按具有产品数量的子节点过滤

> ID：14884379
> 
> 赞同：0
> 
> 时间：2013-02-14T21:29:13.010
> 
> 标签：sql

以下 SQL 代码工作正常，但我无法选择/过滤类别。带来所有类别。

举个例子，

```
Cars (20) (root)
---> Blue cars (12)
----------> Ford (2)
----------> Bmw (9)
----------> Dodge (1)
---> Red cars (9)
----------> Xxxx (9)
---> Black cars (1)
----------> Yy (1) 
```

如何仅选择蓝色汽车的类别。（带子节点）

我如何更改这个可以完成的 sql 代码？

我希望结果如下。（如果我选择蓝色汽车类别）

```
---> blue cars (12)
----------> ford (2)
----------> bmw (9)
----------> dodge (1) 
```

这是sql代码...

```
SELECT 
parent.cid,
parent.title,
(SELECT COUNT(parent2.cid) FROM categories AS parent2 WHERE parent.lft > parent2.lft AND parent.rgt < parent2.rgt) AS depth,
COUNT(products.cat_id) AS total

FROM categories AS node,
categories AS parent,
products

WHERE 

node.lft BETWEEN parent.lft AND parent.rgt 

AND node.cid = products.cat_id

GROUP BY parent.cid having depth <= 5
ORDER BY parent.lft 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:45:54.390

我认为你一直在想这个 - 获取子树是关于嵌套集的简单化操作

```
SELECT *
FROM categories
WHERE lft BETWEEN bluecarleftvalue AND bluecarrightvalue
ORDER BY lft ASC 
```

# excel - Excel VBA 宏：通过引用复制单元格

> ID：14884381
> 
> 赞同：1
> 
> 时间：2013-02-14T21:29:13.767
> 
> 标签：excel, vba

我正在 Excel 中创建一个宏，以将数据从一个工作表复制到同一工作簿中的另一个工作表。目前，代码的运行方式如下：

```
Dim sourceSheet As Worksheet
Dim destSheet As Worksheet
Dim numCases As Integer
Dim i As Integer

numCases = 10
Set destSheet = ThisWorkbook.Sheets("Raw_Data")
Set sourceSheet = ThisWorkbook.Sheets("Formatted_Data")

For i = 1 To numCases
    destSheet.Cells(i,1).Value = sourceSheet.Cells(1,i).Value
Next 
```

此代码正常工作，因为它将值从一张纸复制到另一张纸并将其放置在正确的单元格中。问题是我需要将单元格作为参考值填充回工作表“Raw_Data”。换句话说，当我在“Formatted_Data”中选择一个单元格时，我需要公式栏显示类似：'Raw_Data'!C1 但我得到的只是数值。有什么方法可以执行复制，或设置值并维护参考？

谢谢，

巴雷特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:32:37.487

代替

`destSheet.Cells(i,1).Value = sourceSheet.Cells(1,i).Value`

和

`sourceSheet.Cells(1,i).Formula = "=" & destSheet.Name & "!" & destSheet.Cells(i,1).Address(False,False)`

# c++ - 访问 gtkmm ComboBoxText 中的字段

> ID：14884382
> 
> 赞同：0
> 
> 时间：2013-02-14T21:29:14.967
> 
> 标签：c++, user-interface, textbox, gtkmm

我在程序中的实例`get_active`上使用文本函数时遇到了一些麻烦。`ComboBoxText`我得到的错误是

```
(out:4258): GLib-CRITICAL **: g_utf8_collate: assertion `str2 != NULL' failed. 
```

我的使用方式可能会遇到哪些问题`ComboBoxText`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T02:57:35.830

如果在组合中未选择任何内容，您将从`get_active_text()`. 您稍后可能会在空字符串不是合法值的地方使用该字符串。

# android - 从 Android 中触摸事件选择的路径创建图像

> ID：14884391
> 
> 赞同：0
> 
> 时间：2013-02-14T21:29:50.583
> 
> 标签：android

我正在尝试从用户使用触摸事件在屏幕上创建的任何内容创建图像。我不想将整个画布存储为位图。我只想存储用户绘制的图形。我希望将路径存储为位图。

请帮忙。

```
public class DoodleEngine extends View {
private Paint paint = new Paint();
private Path path = new Path();

public DoodleEngine(Context context, AttributeSet attrs) {
super(context, attrs);

paint.setAntiAlias(true);
paint.setStrokeWidth(6f);
paint.setColor(Color.GREEN);
paint.setStyle(Paint.Style.STROKE);
paint.setStrokeJoin(Paint.Join.ROUND);
}

@Override
protected void onDraw(Canvas canvas) {

  canvas.drawPath(path, paint);

}

@Override
public boolean onTouchEvent(MotionEvent event) {
float eventX = event.getX();
float eventY = event.getY();

switch (event.getAction()) {
case MotionEvent.ACTION_DOWN:

  path.reset();
  invalidate();
  path.moveTo(eventX, eventY);
  return true;
case MotionEvent.ACTION_MOVE:
  path.lineTo(eventX, eventY);

  break;
case MotionEvent.ACTION_UP:
  // nothing to do
  break;
default:
  return false;
}

// Schedules a repaint.
invalidate();
return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:38:29.943

试试这个方法...

*   使用 创建 Bitmap 的实例[`Bitmap.createBitmap()`](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.util.DisplayMetrics,%20int,%20int,%20android.graphics.Bitmap.Config%29)，您可能需要为其计算一些尺寸。

*   `Canvas(Bitmap)`使用构造函数创建一个指向该位图的画布实例

*   **仅**绘制通往新画布的路径

*   使用位图

# r - 估计替换 NA 的值

> ID：14884394
> 
> 赞同：-1
> 
> 时间：2013-02-14T21:30:00.193
> 
> 标签：r, statistics, plyr, lm

我有一个由多个时间序列组成的数据集，我想计算这些时间序列内的估计值以替换 NA 值。我对 ddply() 和 lm() 很熟悉，但我对这个有点麻烦....

这是一个数据帧中的前 5 个站点

```
x <- read.table( text="
LOC     YEAR    JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC
A       1980    0   0   0   8   104 NA  534 399 202 20  0   0
A       1981    0   0   0   45  121 387 454 309 135 29  0   0
A       1982    0   0   6   25  123 346 459 423 223 11  0   0
A       1983    0   0   0   20  88  294 474 424 296 38  3   0
A       1984    0   0   0   28  192 340 385 339 122 3   0   0
A       1985    0   0   12  40  142 327 407 445 198 13  0   0
A       1986    0   0   0   59  147 290 381 362 176 10  0   0
A       1987    0   0   0   12  83  288 408 395 112 12  0   0
A       1988    0   0   0   8   116 309 393 392 152 11  2   0
A       1989    0   0   7   69  238 366 442 402 158 23  0   0
A       1990    0   1   0   38  186 527 397 298 225 11  0   0
A       1991    0   0   5   15  201 378 374 364 137 25  0   0
A       1992    0   0   0   31  96  284 457 381 212 28  0   0
A       1993    0   0   0   40  149 400 510 425 174 24  0   0
A       1994    0   0   12  37  172 502 524 474 209 49  5   0
A       1995    0   0   14  21  157 340 447 457 220 8   0   0
A       1996    0   3   0   36  361 457 482 378 160 46  0   0
A       1997    0   0   3   19  141 357 481 429 272 51  0   0
A       1998    0   0   9   6   197 438 553 396 323 60  0   0
A       1999    0   0   0   22  147 323 456 465 215 18  0   0
A       2000    0   0   0   53  305 387 503 436 278 53  0   0
A       2001    0   0   0   27  212 416 553 432 246 23  2   0
A       2002    0   0   3   63  192 483 469 499 224 37  1   0
A       2003    0   0   0   32  NA  357 494 480 NA  54  22  0
A       2004    0   0   19  18  222 358 398 318 146 15  0   0
A       2005    0   0   0   4   157 376 472 376 287 46  1   0
A       2006    0   0   5   64  269 435 496 NA  107 29  1   0
A       2007    0   0   3   6   87  336 396 444 264 83  0   0
A       2008    0   0   2   11  181 487 417 399 130 26  0   0
A       2009    0   2   0   32  189 394 509 441 174 50  0   0
A       2010    0   0   4   32  154 490 401 465 299 21  0   0
B       1980    0   0   0   6   108 530 581 411 199 10  0   0
B       1981    0   0   0   55  101 412 451 330 149 25  0   0
B       1982    0   0   6   26  116 346 502 483 244 10  0   0
B       1983    0   0   0   11  93  295 514 488 320 40  0   0
B       1984    0   0   0   31  200 334 402 347 NA  8   0   0
B       1985    0   0   9   40  151 318 431 456 209 16  0   0
B       1986    0   0   3   59  150 298 409 410 179 8   0   0
B       1987    0   0   NA  13  87  315 456 403 137 12  0   0
B       1988    0   0   0   12  NA  327 303 NA  NA  NA  NA  NA
B       1989    NA  0   NA  62  248 366 445 443 187 22  0   0
B       1990    0   0   1   31  171 568 439 321 248 16  0   0
B       1991    0   0   3   27  227 368 361 361 143 15  0   0
B       1992    0   0   0   34  75  268 432 395 224 9   0   0
B       1993    0   NA  0   28  144 411 519 421 169 16  0   0
B       1994    0   0   4   25  139 484 520 485 210 NA  NA  NA
B       1995    NA  NA  7   NA  146 NA  NA  491 219 NA  0   NA
B       1996    NA  NA  0   NA  NA  440 507 NA  NA  50  NA  NA
B       1997    NA  NA  NA  2   NA  266 483 412 252 43  0   0
B       1998    0   0   5   9   208 430 558 417 354 66  0   0
B       1999    NA  0   0   24  111 303 NA  432 206 29  0   0
B       2000    0   0   0   72  338 417 553 468 300 47  0   0
B       2001    NA  0   1   38  215 459 626 481 250 37  6   0
B       2002    0   0   13  84  208 433 528 525 NA  NA  3   0
B       2003    0   0   2   48  220 385 580 483 257 61  12  NA
B       2004    0   0   16  22  231 372 413 352 199 11  0   NA
B       2005    NA  0   0   13  167 NA  529 400 288 49  0   0
B       2006    0   0   6   89  279 459 535 403 100 31  0   0
B       2007    0   0   4   27  68  338 406 452 293 87  0   0
B       2008    0   0   0   31  188 503 439 399 107 28  0   0
B       2009    0   0   NA  21  162 394 468 387 138 33  0   0
B       2010    0   0   0   17  134 439 NA  429 210 13  0   0
C       1987    NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  0   0
C       1988    0   0   3   19  228 382 435 422 213 17  16  0
C       1989    0   1   17  100 332 432 543 459 208 66  0   0
C       1990    0   0   2   54  243 615 414 318 255 27  2   0
C       1991    0   0   2   41  304 539 505 513 NA  100 0   0
C       1992    0   0   0   83  157 368 531 452 300 67  0   0
C       1993    0   0   2   79  211 448 572 498 215 75  0   0
C       1994    1   0   21  46  194 580 618 541 257 66  7   0
C       1995    0   0   36  54  224 437 551 532 273 31  2   0
C       1996    0   7   1   70  436 511 550 432 216 62  1   0
C       1997    0   0   11  27  177 412 556 501 336 74  0   0
C       1998    0   0   21  25  308 572 638 475 407 87  0   0
C       1999    0   1   3   58  218 417 536 542 288 55  0   0
C       2000    0   0   0   110 396 446 610 540 380 80  0   0
C       2001    0   0   3   67  290 533 648 533 335 72  12  0
C       2002    0   0   9   161 296 563 534 597 297 62  3   0
C       2003    0   0   3   91  249 435 571 566 NA  100 29  0
C       2004    0   0   26  49  308 416 467 391 212 24  0   0
C       2005    0   0   0   22  197 468 557 NA  355 70  1   0
C       2006    0   0   13  117 NA  488 557 NA  141 36  6   0
C       2007    0   0   6   22  113 376 445 463 292 98  0   0
C       2008    0   0   NA  41  240 554 443 430 NA  57  2   0
C       2009    0   NA  13  62  252 480 530 478 216 61  0   0
C       2010    0   0   1   32  212 525 399 489 309 34  0   0
D       2007    NA  NA  NA  NA  NA  NA  285 NA  213 34  0   NA
D       2008    0   0   0   11  121 NA  301 275 85  29  0   0
D       2009    0   NA  1   23  103 346 NA  389 106 29  0   0
D       2010    0   0   4   6   96  435 323 367 255 14  0   0
E       1980    0   0   2   36  188 583 654 503 279 52  0   0
E       1981    0   0   4   58  NA  455 NA  NA  226 NA  1   1
E       1982    0   3   25  NA  NA  445 553 552 357 49  0   NA
E       1983    0   0   0   58  202 397 549 534 384 90  7   0
E       1984    0   0   3   65  278 407 453 447 226 29  3   0
E       1985    0   0   21  82  237 384 492 534 278 NA  NA  0
E       1986    0   6   7   109 219 354 466 458 258 NA  NA  0
E       1987    0   0   0   42  142 344 475 475 195 56  4   NA
E       1988    0   0   1   23  209 NA  NA  458 247 39  13  0
E       1989    0   3   34  131 314 459 539 478 241 79  0   0
E       1990    0   1   6   74  268 618 444 359 294 43  10  0
E       1991    0   0   15  57  285 439 434 445 193 81  0   0
E       1992    0   0   1   70  143 424 547 473 297 55  0   0
E       1993    0   0   0   67  187 413 582 440 271 103 0   0
E       1994    0   0   10  66  239 585 592 556 284 67  9   0
E       1995    0   0   17  56  205 413 546 531 293 51  0   0
E       1996    0   9   0   73  412 550 580 476 250 88  3   0
E       1997    0   0   14  37  198 433 574 502 369 90  0   0
E       1998    0   0   21  11  332 542 664 473 423 91  0   0
E       1999    0   0   2   94  231 435 562 571 313 63  0   0
E       2000    0   0   9   139 419 437 601 534 361 76  0   0
E       2001    0   0   2   64  285 493 629 521 308 40  10  0
E       2002    0   0   13  131 277 528 524 549 281 72  3   0
E       2003    0   0   3   90  250 420 523 520 NA  86  21  0
E       2004    0   0   35  35  NA  404 470 384 215 34  0   0
E       2005    0   0   0   26  198 452 544 441 391 87  3   0
E       2006    0   0   8   123 NA  489 573 NA  194 74  5   0
E       2007    0   0   12  18  121 389 450 524 346 134 0   0
E       2008    0   0   8   49  239 596 501 488 213 48  0   0
E       2009    0   NA  4   38  260 487 534 499 223 77  0   0
E       2010    0   0   7   36  212 564 454 533 367 38  0   0

 ", header = T) 
```

开始...

我需要删除数据少于 7 年的任何位置，整个数据集有几百个位置......

然后

用正确的每月位置平均值替换任何 NA

我正在尝试计算各个电台的月平均值并将它们与该电台月相关联

我被困在这里...

```
xFix <- melt(x, id.vars = c("LOC", "YEAR"), measure.vars = c("JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"), variable.name = "Month", value.name = "CLDD") 
```

任何帮助是极大的赞赏...

太感谢了。杰西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:10:04.347

来自东南

这是一个建议。

首先，计算每个 LOC 的行数，并检查是否有 7 行或更多行。这用于子集 x。

```
cnt <- table(x$LOC) >= 7 
```

然后 cnt 用于删除行数不足的 LOC。这将创建一个新的数据帧 tmp。

```
tmp <- x[x$LOC %in% names(cnt)[cnt], ] 
```

下一个命令相当复杂。by 用于沿 LOC 的值将函数应用于数据帧的每个子集。由于只有月份列是感兴趣的，因此使用月份.abb 只选择这些列。命令 lapply 用于将以下函数应用于数据框子集的每一列：将所有 NA 替换为列的平均值。

函数 as.data.frame 和 do.call(rbind, ...) 是获取数据帧所必需的。

```
res <- do.call(rbind, by(tmp[, toupper(month.abb)], 
                     tmp$LOC[drop = TRUE], 
                     FUN = function(y) 
                        as.data.frame(lapply(y, function(z)
                                       replace(z, is.na(z), mean(z, na.rm = TRUE)))))) 
```

在最后一步中，将前两列与结果合并。

```
cbind(tmp[c("LOC", "YEAR")], res) 
```

完毕。

# android - 如何获取当前的 GoogleMap 缩放级别？

> ID：14884398
> 
> 赞同：23
> 
> 时间：2013-02-14T21:30:13.750
> 
> 标签：android, google-maps

在 GoogleMap android API v2 上，如何获取当前地图缩放级别？在 API v1 上，曾经有`float MapView.getZoomLevel()`，但在我使用的 API 版本上似乎没有类似的东西，谷歌推荐。

我曾想过使用类变量通过缩放按钮单击侦听器手动保存缩放级别，但这并不能解决捏型缩放的问题。

为什么我需要当前的缩放级别？我将地图范围限制为某个矩形，并希望任何会离开该矩形的移动反弹回来。此动画需要我使用缩放级别，因为没有它，将使用默认的最大缩放级别。我真正想要的是保持移动尝试之前使用的缩放级别。

```
protected void recenterMap() {
    map.getMinZoomLevel();
    if(MAP_BOUNDS.contains(map.getCameraPosition().target) == false) {
        CameraPosition cameraPosition = new CameraPosition.Builder()
        .target(MAP_CENTER)      
        .zoom(current_zoom)
        .build();     

        map.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));
    } else {
        MAP_CENTER = map.getCameraPosition().target;
    }
} 
```

请注意，该变量`current_zoom`是我需要定义的。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-02-14T21:45:53.057

对于 Android，尝试获取当前的 CameraPosition，并从中获取缩放。
我相信它是：

```
map.getCameraPosition().zoom 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-14T21:33:28.033

应该是（在 v2 API 上）

```
map.getZoom(); 
```

如果没有，请尝试`document.getElementById("zoom").innerHTML`

# sql - 列出用户在每个数据库上的 db_owner 权限

> ID：14884408
> 
> 赞同：4
> 
> 时间：2013-02-14T21:31:03.810
> 
> 标签：sql, tsql

我有一个用户 John.Smith，我想知道他也有`db_owner`什么数据库以及他没有什么数据库`db_owner`。有我可以运行的脚本吗？我们有很多数据库，当我查看用户地图时，我觉得我可能看多了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T23:20:24.020

你可以使用类似的东西：

```
CREATE TABLE ##DBOwners
(
    DBName SYSNAME,
    Username SYSNAME,
    Rolename NVARCHAR(50),
    IsOwner BIT
);

EXEC sp_MSforeachdb
    '
        USE [?];
        INSERT INTO ##DBOwners
            SELECT
                DB_NAME(),
                dp.name,
                dp2.name,
                CASE 
                    WHEN dp2.name = ''db_owner'' THEN 1
                    ELSE 0
                END AS ''db_owner''
            FROM
                sys.database_principals AS dp
            LEFT JOIN
                sys.database_role_members AS rm
                    ON
                        rm.member_principal_id = dp.principal_id
            LEFT JOIN
                sys.database_principals AS dp2
                    ON
                        rm.role_principal_id = dp2.principal_id
            WHERE
                dp.type <> ''R''
    '

SELECT * FROM ##DBOwners WHERE Username = 'John.Smith'
DROP TABLE ##DBOwners; 
```

它通过使用存储过程 sp_MSforeachdb 收集有关所有数据库的信息并将结果保存在全局临时表中。

# ruby-on-rails - Rails 使用单独的表格扩展模型

> ID：14884411
> 
> 赞同：0
> 
> 时间：2013-02-14T21:31:44.450
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

所以我基本上有 3 个应用程序需要捆绑在一起（通过使用引擎）。一个公共网站、一个销售点和一个经理（管理另外两个）。我想创建一个“产品”模型，其中包含与葡萄酒无关的所有产品细节。然后我想要一个扩展 Product 的“Wine”模型。在数据库中，我有两张表……产品和葡萄酒。wines 表将仅具有特定于 wine 的属性和将其链接到相应产品表条目的 product_id。

我知道如何在*没有*一个模型扩展另一个模型的情况下执行此操作（通过 belongs_to 和 has_*），但我不明白如何将其作为模型扩展。

使用 Rails 3.2.11

**产品.rb**

```
class Product < ActiveRecord::Base
    ...stuff goes in here
end 
```

**Wine.rb**

```
class Wine < Product
    ...how do I ensure that the products table attributes and the wines table attributes are separately updated/created/etc.????
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:37:36.767

citier gem 支持多表继承，就像您描述的那样[。](https://github.com/PeterHamilton/citier)

[本文](http://techspry.com/ruby_and_rails/multiple-table-inheritance-in-rails-3/)还有一个关于如何在没有 gem 的情况下设置多表继承的教程。

# c# - C# ASP.NET 应用程序正则表达式

> ID：14884413
> 
> 赞同：3
> 
> 时间：2013-02-14T21:31:56.533
> 
> 标签：c#, asp.net, regex

对于 C#、ASP.NET 应用程序 - 这应该很简单，但我无法弄清楚这个正则表达式，我需要一个文本框*无法*作为值提交的字符串列表，我必须忽略大小写。

示例 - 无论大小写如何，我都需要我的正则表达式来*拒绝*以下字符串 - abc、def、ghi

我什至无法让正则表达式拒绝*其中一个*。我尝试了以下方式 -

> ```
> [RegularExpression(@"(\W|^)(?i)!ABC(?-i)(\W|$)", ErrorMessage = "REJECTED!")]
> public string Letters { get; set; } 
> ```

那是行不通的！似乎拒绝一切。有人知道它应该是什么样子吗？我怎样才能拒绝所有这些？

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:38:24.923

又快又脏，但试一试（假设我正确理解了这个问题！）

```
^(?i)(?!(ABC|DEF|GHI)(?-i)).*$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:39:38.463

如果您只想忽略字符串，请使用此

```
^(?i)(?!.*(?:abc|def|ghi)) 
```

如果要忽略单词，请在模式周围使用单词边界

```
^(?i)(?!.*\b(?:abc|def|ghi)\b) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T21:57:33.560

在标准正则表达式语法中，这将是`^(?!abc$)(?!def$).*`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T21:58:01.170

这将检测 abc、def 和 ghi

```
(?i)(abc|def|ghi) 
```

包含在`^`并且`$`只匹配那些而不匹配其他（例如不会匹配*wxabcyz*）

```
^(?i)(abc|def|ghi)$ 
```

最后，如果您想匹配“这是一些 abc 随机文本”之类的内容并拒绝它，请执行此操作

```
(?i)\b(abc|def|ghi)\b 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T21:59:36.690

```
^((?!abc)|(?!def)|(?!ghi).)*$ 
```

就是这样。

顺便说一句，我建议您使用以下资源，您还没有。

[正则表达式 pal](http://regexpal.com/) 和正则表达式[.info](http://www.regular-expressions.info/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-16T15:20:17.067

```
^(?i)(?!(ABC|DEF|GHI)(?-i)).*$ 
```

# java - Java 图像导入显示

> ID：14884426
> 
> 赞同：2
> 
> 时间：2013-02-14T21:32:29.053
> 
> 标签：java

我无法理解我是否正确阅读了我的图像。我的代码带有随机的比尔盖茨图片：

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;

public class ReadingImage {

    public static void main(String[] args) {    
        //readImage("billgates.jpg");

        BufferedImage img = null;
        try {
            img = ImageIO.read(new File("billgates.jpg"));
        } catch (IOException e) {

        }

    }
} 
```

问题是 doc（mac 用户）上弹出一个 java 图标，但没有窗口或任何东西显示它。

能不能把图片保存成数组，按需显示，即有显示功能吗？我不记得上面的代码实际上要求显示图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:39:01.413

实际上，您在这里没有显示任何内容，只是从文件中加载图像。

如果要使用 Swing，可以使用 ImageIcon 显示图像，例如在 JLabel 中。请参阅[Oracle 的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)。

此外，您真的不想在 catch(IOException e) 块中放置任何内容。至少放一些代码来打印错误。默默地忽略异常几乎总是一件非常糟糕的事情：

```
try {
    img = ImageIO.read(new File("billgates.jpg"));
} catch (IOException e) {
    System.err.println(e); // print error
} 
```

# mysql - 用于多对多关系的数据库表的键

> ID：14884427
> 
> 赞同：0
> 
> 时间：2013-02-14T21:32:29.963
> 
> 标签：mysql, sql, database

刚收到一个我想问的基本数据库问题：

如果我有两个表来形成多对多关系，那么我在两个表之间包含另一个表以通过创建一对多关系来停止这种关系，我创建的新表中的字段是否必须都是主键和外键还是应该只是外键？

例如

课程表：

```
CourseId (PK auto)  CourseNo  CourseName
1                   2343      ICT
2                   4030      Maths 
```

Course_Module 表：（这是我要问的表是否应该是 PK 和 FK）：

```
CourseId (FK course)  ModuleId (FK Module)
1                     3
1                     2
2                     1
2                     2 
```

模块表：

```
ModuleId (PK auto)  ModuleNo  ModuleName
1                   344       Algebra
2                   223       Statistics
3                   303       Systems Stratergy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:38:43.650

它们必须是复合 PK（即 courseId 和 ModuleId）以及外键，因为您需要 courseId 和 ModuleId 的组合是唯一的，并且您还需要参照完整性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:38:01.093

通常他们都是。在您的情况下`CourseId`，`ModuleId`应该在表中形成一个复合主键`Course_Module`，同时仍单独用作外键。您提供的示例数据在该表中具有唯一的行，这对我来说是决定点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:38:40.393

您不必在每个表上**都**指定一个主节点。但是可能会对性能产生影响，因此在这种情况下，我建议您将主键指定为两个字段。

另请注意，您不必将字段指定为外键，并且在某些 MySQL 引擎上，您实际上没有使用外键的选项。

# ruby-on-rails - 管理作为可标记行为的标签列表？

> ID：14884431
> 
> 赞同：0
> 
> 时间：2013-02-14T21:32:30.567
> 
> 标签：ruby-on-rails, ruby, acts-as-taggable-on

我目前在一个项目中使用acts-as-taggable-on。

我可以通过使用 Model.tag_count 为用户提供仅使用现有标签标记新对象的选择。但客户希望能够从管理面板管理可用标签列表。这是可行的吗？除了将它们附加到特定模型之外，还有什么方法可以创建新的可用标签？如果不是，您会推荐哪些其他标记 gem/plugin 作为可以支持此行为的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:54:49.130

您可以创建一个名为 Tags 的新表/模型，其中包含一个名为 的列（属性）`name`。此表中的每条记录将是一个不同的标签。然后，您可以创建一个表单，客户端可以通过提交带有标签名称的表单来创建新标签。

您可以使用基本的 CRUD 操作来处理标签管理 - 主要是`create`和`destroy`.

# c - 我在哪里可以假设空字符将在 C 中自动添加？

> ID：14884434
> 
> 赞同：1
> 
> 时间：2013-02-14T21:32:44.840
> 
> 标签：c, string, null

我知道这两个实例会自动添加空终止符：

```
char test[100] = "Null terminator will follow me"; 
```

和

```
/*...String already initialised*/
sprintf(test,"Null terminator will follow me"); 
```

但是在常规 C 使用中还会发生这种情况吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T21:40:14.873

首先，`NULL`是一个扩展为空*指针*常量的宏；使用该术语来指代空*字符*最多会导致混淆，最坏的情况是不正确的代码。

C 字符串以空字符 结束`'\0'`，有时称为“NUL”。这是 C 标准对“字符串”一词的定义的一部分：

> 字符串是由第一个空字符终止并包括第一个空字符的连续*字符*序列。

*几乎*任何字符串文字（由字符分隔`"`）都隐含地包含一个空终止符——即使还有一个明确的终止符。例如：

```
 "abc\0def" 
```

引用一个包含以下内容的数组：

```
 { 'a', 'b', 'c', '\0', 'd', 'e', 'f', '\0' } 
```

一个例外是当字符串文字用作与文字长度完全相同的数组的初始值设定项时：

```
 char nonterminated[5] = "12345"; 
```

（C++ 没有这种特殊情况，并且使上述声明非法。）

*如果*您正确使用它们，其中声明的大多数`str*()`函数`<string.h>`都会为您提供正确的以 null 结尾的字符串。（该函数是一个[明显的例外](http://the-flat-trantor-society.blogspot.com/2012/03/no-strncpy-is-not-safer-strcpy.html)；我建议避免使用它。）*`strncpy()`*

 *任何文档说它处理“字符串”的函数都将需要或产生一个正确的以空值结尾的字符串（假设函数及其文档都是正确的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T21:36:04.457

双引号表示终止空字符。如果你写

```
char mystr[5] = {'A', 'B', 'C', 'D', 'E'}; 
```

不会有终止。但是，请注意，如果你写

```
char mystr[5] = {'A', 'B', 'C'}; 
```

该字符串也将以空值结尾，因为初始值设定项之外的元素将隐式设置为 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T21:36:40.203

每当您在 C 中使用“这是一个字符串”表示法时，它表示指向字符数组的指针，其中最后一个字符是 '\0'。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-14T05:48:08.087

许多库定义的函数提供了自动添加空终止符的功能，给出了这些函数的示例

```
main()
{
char string[100];
scanf("%s",string);  //here,the function scanf automatically terminates the entered string with a null character('\0').
} 
```

或者

```
main()
{
 char string[100];
 gets(string); //gets function also terminates automatically the function with a null character('\0'). 
```

但是如果迭代地使用**getchar()**、**getche()**等函数来读取字符串，它们不会自动将终止的空字符放在字符串的末尾。我们必须明确地说出来。给定的一段代码说明了这种情况

```
//iterative use of getchar function to read string
main()
{
  char string[100],ch;
  int loc=0;
  printf("enter a line of text");
  while((ch=getchar())!='\n'))
        string[loc++]=ch; 

  line[loc]='\0';  //null character is added explicitly
  printf("the text entered is %s",string);

} 
```

此外，所有**字符串文字**都会自动以空字符终止，因此我们不需要明确说明。

例如——“你好”

我们在给定的字符串中看到 5 个字符，但它实际上包含 6 个字符。最后一个字符是'\0'。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T21:37:18.947

1) 每个字符串文字都隐含地获取空终止符。

2) 许多 C 库函数会自动为 null 终止结果。例如， sprintf 函数将打印所有参数，然后附加一个空终止符。c 库中的字符串复制函数通常做同样的事情。*

# php - 在其他任何事情之前自动为所有页面加载 config.php 文件

> ID：14884439
> 
> 赞同：17
> 
> 时间：2013-02-14T21:33:11.840
> 
> 标签：php, include, webserver, configuration-files

有谁知道如何设置可以先为所有页面自动加载特定文件的东西？

例如，如果我有一个`config.php`文件，并且我希望任何人访问我网站上的页面时都可以加载该文件。

在这里，我将有一些配置信息需要在其他任何事情之前加载。

我不想为此在另一个 php 文件中包含任何内容，我只希望每次在其他任何事情之前自动加载它。基本上是一个通用的包含。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-14T21:35:51.177

您想使用[auto_prepend_file](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)。在您的 php.ini 或 .htaccess 文件中将此指令设置为您的`config.php`文件路径，任何访问的 PHP 文件都会自动将配置文件的内容添加到它前面。

对于`.htaccess`：

```
php_value auto_prepend_file /full/path/to/file/config.php 
```

请记住，这只适用于 PHP 作为 Apache 模块运行的服务器。如果 PHP 作为 CGI 运行，您需要在文件中添加编辑`php.ini`或将其放入`.user.ini`文件中，仅不包含该`php_value`部分。

在`Nginx`您可以将此行添加到服务器配置中`location ~ \.php$`

```
fastcgi_param PHP_VALUE "auto_prepend_file=/full/path/to/file/config.php"; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-14T21:53:56.993

使用`require`控制结构。将它放在每个 php 文件的顶部，在任何代码之前，但在`"<?php"`标签之后。

[http://php.net/manual/en/function.require.php](http://php.net/manual/en/function.require.php)

# php - 为什么这个 xmlreader 代码不起作用？

> ID：14884440
> 
> 赞同：2
> 
> 时间：2013-02-14T21:33:13.540
> 
> 标签：php, xml, xml-parsing, xmlreader

我有一个看起来像这样的文件：

```
 <ExternalPage about="http://animation.about.com/">
       <d:Title>About.com: Animation Guide</d:Title>
       <d:Description>Keep up with developments in online animation for all skill levels.     Download tools, and seek inspiration from online work.</d:Description>
       <topic>Top/Arts/Animation</topic>
    </ExternalPage>
    <ExternalPage about="http://www.toonhound.com/">
       <d:Title>Toonhound</d:Title>
       <d:Description>British cartoon, animation and comic strip creations - links, reviews  and news from the UK.</d:Description>
       <topic>Top/Arts/Animation</topic>
    </ExternalPage> 
```

等等

我正在尝试获取“关于”网址，以及嵌套的标题和描述。我试过下面的代码，但我得到的只是一堆破折号......

```
$reader = new XMLReader();

if (!$reader->open("dbpedia/links/xml.xml")) {
die("Failed to open 'xml.xml'");
}
$num=0;
while($reader->read() && $num<200) {
if ($reader->nodeType == XMLReader::ELEMENT && $reader->name == 'ExternalPage') {
$url = $reader->getAttribute('about');

while ($xml->nodeType !== XMLReader::END_ELEMENT ){
$reader->read();

 if ($reader->nodeType == XMLReader::ELEMENT && $reader->name == 'd:Title') {
 $title=$xmlReader->value;
 }
elseif ($reader->nodeType == XMLReader::ELEMENT && $reader->name == 'd:Description') {
$desc=$xmlReader->value;
}
}

}
$num++;echo $url."-".$title."-".$desc."<br />";
}
$reader->close(); 
```

我是 xmlreader 的新手，所以如果有人能弄清楚我做错了什么，我将不胜感激。

注意：我使用 xmlreader 是因为该文件很大（数百万行）。

编辑：文件的开头如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<RDF xmlns:r="http://www.w3.org/TR/RDF/" xmlns:d="http://purl.org/dc/elements/1.0/"       xmlns="http://dmoz.org/rdf/">
  <!-- Generated at 2013-02-10 00:03:45 EST from DMOZ 2.0 -->
  <Topic r:id="">
<catid>1</catid>
  </Topic>
<Topic r:id="Top/Arts">
    <catid>381773</catid>
  </Topic>
  <Topic r:id="Top/Arts/Animation">
  <catid>423945</catid>
<link1 r:resource="http://www.awn.com/"></link1>
<link r:resource="http://animation.about.com/"></link>
<link r:resource="http://www.toonhound.com/"></link>
<link r:resource="http://enculturation.gmu.edu/2_1/pisters.html"></link>
<link r:resource="http://www.digitalmediafx.com/Features/animationhistory.html"></link>
<link r:resource="http://www.spark-online.com/august00/media/romano.html"></link>
<link r:resource="http://www.animated-divots.net/"></link>
</Topic>
<ExternalPage about="http://www.awn.com/">
<d:Title>Animation World Network</d:Title>
<d:Description>Provides information resources to the international animation community. Features include searchable database archives, monthly magazine, web animation guide, the Animation Village, discussion forums and other useful resources.</d:Description>
<priority>1</priority>
<topic>Top/Arts/Animation</topic>
</ExternalPage> 
```

ETC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:18:18.770

提出可工作的纯 XMLReader 代码需要时间和适当的调试。同时尝试这种混合方法：

```
$xmlR = new XMLReader;
$xmlR->open('dbpedia/links/xml.xml');

//Skip until <ExternalPage> node
while ($xmlR->read() && $xmlR->name !== 'ExternalPage');

$loadedNS_f = false;
while ($xmlR->name === 'ExternalPage')
{
    //Read the entire parent tag with children
    $sxmlNode = new SimpleXMLElement($xmlR->readOuterXML());

    //collect all namespaces in node recursively once; assuming all nodes are similar
    if (!$loadedNS_f) {
        $tagNS = $sxmlNode->getNamespaces(true);
        $loadedNS_f = true; 
    }
    $URL = (string) $sxmlNode['about'];
    $dNS = $sxmlNode->children($tagNS['d']);
    $Title = (string) $dNS->Title;
    $Desc = (string) $dNS->Description;
    $Topic = (string)$sxmlNode->topic;

    var_dump($URL, $Title, $Desc, $Topic);

    // Jump to next <ExternalPage> tag
    $xmlR->next('ExternalPage');
}

$xmlR->close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:11:54.583

它不适合您的原因是因为您只读取了`d:Title`元素的开始标签并且没有任何价值：

```
if ($reader->nodeType == XMLReader::ELEMENT && $reader->name == 'd:Title') {
    $title=$xmlReader->value;
} 
```

您可能想要获取该 DOM 元素的 nodeValue，但这不是`$xmlReader->value`将返回的内容。知道这一点，有多种方法可以解决这个问题：

1.  展开节点 ( [`XMLReader::expand()`](http://php.net/XMLReader.expand)) 并获得`nodeValue`（快速示例）：

    ```
    $title = $reader->expand()->nodeValue; 
    ```

2.  处理您自己的所有`XMLReader::TEXT (3)` 和/或`XMLReader::CDATA (4)`子节点（通过查看来确定节点是否是子节点[`XMLReader::$depth`](http://php.net/class.xmlreader.php#xmlreader.props.depth)）。

在任何情况下，为了简化您的代码，您都可以考虑直接提供您需要的东西，例如通过自己创建一组您自己的函数或扩展 XMLReader 类：

```
class MyXMLReader extends XMLReader
{
    public function readToNextElement()
    {
        while (
            $result = $this->read()
            and $this->nodeType !== self::ELEMENT
        ) ;
        return $result;
    }

    public function readToNext($localname)
    {
        while (
            $result = $this->readToNextElement()
            and $this->localName !== $localname
        ) ;
        return $result;
    }

    public function readToNextChildElement($depth)
    {
        // if the current element is the parent and
        // empty there are no children to go into
        if ($this->depth == $depth && $this->isEmptyElement) {
            return false;
        }

        while ($result = $this->read()) {
            if ($this->depth <= $depth) return false;
            if ($this->nodeType === self::ELEMENT) break;
        }

        return $result;
    }

    public function getNodeValue($default = NULL)
    {
        $node = $this->expand();
        return $node ? $node->nodeValue : $default;
    }
} 
```

然后，您可以使用这个扩展类来进行处理：

```
$reader = new MyXMLReader();
$reader->open($uri);

$num = 0;
while ($reader->readToNext('ExternalPage') and $num < 200) {
    $url = $reader->getAttribute('about');

    $depth = $reader->depth;
    $title = $desc = '';

    while ($reader->readToNextChildElement($depth)) {
        switch ($reader->localName) {
            case 'Title':
                $title = $reader->getNodeValue();
                break;
            case 'Description':
                $desc = trim($reader->getNodeValue());
                break;
        }
    }

    $num++;
    echo "#", $num, ": ", $url, " - ", $title, " - ", $desc, "<br />\n";
} 
```

如您所见，这极大地提高了您的代码的可读性。此外，如果您没看错的话，您也不需要每次都在意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:16:28.663

这是获取该属性的另一种方法：

```
$string = file_get_contents($filename);
$xml = new SimpleXMLElement($string);
$result = $xml->xpath('/RDF/ExternalPage[*]/@about');
var_dump($result); 
```

# ruby-on-rails - 如何命名作为形容词或介词的 Rails 资源？

> ID：14884441
> 
> 赞同：1
> 
> 时间：2013-02-14T21:33:15.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rails-activerecord, activeresource

我正在教孩子们如何在 Rails 中做一个特定的应用程序，它需要一个关于某人对别人负责的资源。例如，这里有 2 个模型：

```
class User < ActiveRecord::Base
  attr_accessible :name
  has_many :responsible_fors, class_name: 'ResponsibleFor', foreign_key: 'responsible_by_ user_id'
  has_many :responsible_for_people, through: :responsible_fors
  has_many :responsible_bys, class_name: 'ResponsibleFor', foreign_key: 'responsible_for_user_id'
  has_many :responsible_by_people, through: :responsible_bys
end
class ResponsibleFor < ActiveRecord::Base
  attr_accessible :relationship, :responsible_by_id, :responsible_for_id
  belongs_to :responsible_by, class_name: 'User'
  belongs_to :responsible_for, class_name: 'User'
end 
```

我没有在上面测试过这个特定的代码，但这个概念对我来说很有意义......虽然`responsible`和`responsible for`分别是形容词和介词，而不是 Rails 中的资源应该是的名词。有一个更好的方法吗？Rails 的多元化或其他操作会以其他方式扰乱它吗？有更好的名词吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:59:15.373

我不认为你会对 Rails 和复数有任何问题：

```
1.9.3p385 :023 > "responsible_for".pluralize
=> "responsible_fors" 
1.9.3p385 :024 > _.singularize
=> "responsible_for" 
```

也就是说，我会选择：

```
class User < ActiveRecord::Base
  has_many :responsibilities
  has_many :stakeholders, through: :responsibilities
  has_many :responsible_parties, through: responsibilities
end

class Responsibility < ActiveRecord::Base
  attr_accessible :relationship, :stakeholder_user_id, :responsible_party_user_id
  belongs_to :stakeholder
  belongs_to :responsible_party
end 
```

我不确定这段代码是否运行（如果它运行我会感到震惊），但这是我用来命名的。

# javascript - 在 IE9 中使用 window.location.replace 时出错

> ID：14884442
> 
> 赞同：0
> 
> 时间：2013-02-14T21:33:16.567
> 
> 标签：javascript, asp.net, windows-7, internet-explorer-9

我将一个 asp.net 应用程序复制到我的 Windows 7 (Internet Explorer 9)。它运行正常，但在尝试运行此 javascript 命令时出错：**window.location.replace**

代码：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

        <HTML>

            <HEAD>
                <SCRIPT language="javascript">      
                var Key = 0 ;
                function LogoutFunction()
                {           
                    var myLoadPage = location.href;                     

                    if ( Key==0 )
                      {
                      window.location.replace("Logout.aspx");             
                      //window.location.href = "Logout.aspx";                 }                                 
                }

function KeyPressed()
        {
            Key = window.event.keyCode ;
        } 
```

IE9 上的消息错误是： **“Microsoft JScript 中的运行时错误”**

不管我使用 Location.replace 还是 location.href，在这两种情况下我都会遇到同样的错误。

有人见过类似的案例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:02:05.130

尝试

```
document.location.pathname = "logout.aspx" 
```

# android - 如何将叠加层添加到 MapFragment？

> ID：14884443
> 
> 赞同：2
> 
> 时间：2013-02-14T21:33:16.790
> 
> 标签：android, android-fragments, overlay, google-maps-android-api-2

我正在尝试在我的程序中向 Google Maps 地图添加自定义叠加层，但在使用片段时我无法找到这样做的方法。

我能找到的所有示例和指南都在使用`MapView`，并且覆盖层可以像添加一样简单`myMapView.getOverlays().add(myOverlay)`。

但是，在使用片段而不是 MapView 时，我找不到类似的方法。我有一个 的句柄`GoogleMap`，它似乎不包含`.getOverlays()`，而且我在片段本身上也没有那么成功。

那么，我可以和/或在哪里可以找到一种类似的方法来将覆盖添加到 a`MapFragment`而不是`MapView`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:02:44.947

在谷歌地图 v2 中，它不称为叠加层，而是称为多边形。您可以通过调用`GoogleMap.addPolygon(PolygonOptions option)`Where GoogleMap 被您的 GoogleMap 对象的名称替换来向地图添加一个。 [这里有一些关于 PolyOptions 的信息](http://developer.android.com/reference/com/google/android/gms/maps/model/PolygonOptions.html)，这样你就可以添加点，不管有多少点，然后它会根据这些点制作一个多边形。或者对于非建筑物和仅线，使用折线选项

Heres [Googlemap](http://developer.android.com/reference/com/google/android/gms/maps/model/PolygonOptions.html) API 供您参考。

希望这可以帮助

**编辑 ：**

画一个圆圈有点复杂，因为它涉及抗锯齿和一点点歌舞。

为了您的方便，我找到[了这个 StackOverflow 答案](https://stackoverflow.com/questions/13991301/android-maps-api-v2-draw-circle)，其中包含一些关于如何完成它的代码。

# c - 聊天服务器套接字

> ID：14884450
> 
> 赞同：0
> 
> 时间：2013-02-14T21:34:01.200
> 
> 标签：c, sockets, chat

我正在尝试在 C 中创建一个线程聊天服务器，但无法弄清楚如何不将消息回显给用户。我希望能够连接两个或多个客户端并通过我的服务器相互聊天。

我哪里错了：

```
#include<stdio.h>
#include<string.h>  //strlen
#include<stdlib.h>  //strlen
#include<sys/socket.h>
#include<arpa/inet.h>   //inet_addr
#include<unistd.h>  //write
#include<pthread.h> //for threading , link with lpthread
#include<errno.h>

void *connectionHandler(void * soc_desc);

typedef struct { 
    int reader;
    int writer;
}args;

int main(int arc, char* argv[]){

    int *new_socket;
    int socFD;
    int client_sock;
    struct sockaddr_in serveraddr;
    struct sockaddr_in clientaddr;
    args t1args, t2args;
    int listenFd;
    //socklen_t clientSize= size(struct sockaddr_in);
    int c;
    int acceptFD;
    int client_sockets[2];

    socFD=socket(AF_INET, SOCK_STREAM, 0);

    puts("Socket created");

    bzero((char*) &serveraddr, sizeof(serveraddr));

    serveraddr.sin_family= AF_INET;

    serveraddr.sin_addr.s_addr=INADDR_ANY;

    serveraddr.sin_port= htons(2000);

    bind(socFD, (struct sockaddr*) &serveraddr, sizeof(serveraddr));

    puts("bind done");

    listen(socFD, 3);

    puts("Waiting for incoming connections...");
    c= sizeof(struct sockaddr_in);

    while((client_sock=accept(socFD, (struct sockaddr *)&clientaddr,(socklen_t *)&c)))
    {

        printf("%d", client_sock);
        puts("IN WHILE LOOP");

        pthread_t t1;
        new_socket= malloc(1);
        *new_socket=client_sock;

        if(pthread_create(&t1, NULL, connectionHandler, (void *)new_socket)<0){
                perror("Could not create thread");
                return -1;
        }
    }

    if(client_sock < 0)
    {
        perror("accept failed");
        return -1;
    }

        return 0;
}

void *connectionHandler(void * soc_desc)
{
    //Get the socket descriptor
//      args *temp= (args*)soc_desc; 
        int sock= *(int*)soc_desc;
        int read_size;
        char *message , client_message[2000];
        char buff[80];
/*
        while(1){
             bzero(buff,sizeof(buff));
             recv(temp->reader,buff,sizeof(buff),0);
             send(temp->writer,buff,sizeof(buff),0);

        }*/
    //Receive a message from client
        while( (read_size = recv(sock , client_message , 2000 , 0)) >0 )
        {
            //Send the message back to client
            write(sock, client_message ,strlen(client_message));
        }

        if(read_size == 0)
        {
            puts("Client disconnected");
            fflush(stdout);
        }
        else if(read_size == -1)
        {
            perror("recv failed");
        }

        //Free the socket pointer
        free(soc_desc);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:36:29.663

[http://beej.us/guide/bgnet/html/single/bgnet.html](http://beej.us/guide/bgnet/html/single/bgnet.html)

我在 3 年前用 C 进行了套接字编程，这就是我所遵循的。帮了我很多。

# git - Git 分支差异到一个新的提交

> ID：14884452
> 
> 赞同：16
> 
> 时间：2013-02-14T21:34:13.380
> 
> 标签：git, github

所以假设我有一个主分支，我们称之为'master'。我做了一个分支，称为“新功能”。我在这个分支中做了很多提交，所以我可以及时回到过去，但是在开发这个功能时我已经做了很多来回的工作，所以提交日志非常混乱。

例如，如果我要查看 git diff master..new-feature 。

如果我只想在“master”上创建一个新的新提交，其中包括两个分支之间的所有更改，那么最有效的方法是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-14T22:17:39.540

```
git checkout master
git merge --squash new-feature
git commit 
```

提交消息将开始显示正在合并/压缩的提交的整个列表，但您当然可以将其编辑为您想要的任何内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T13:25:54.070

另一个可能对您更有效的选择是生成一个补丁文件，`git diff --patch > "patch filename"`然后使用`git apply "patch file name"`.

git-diff 的手册页（尤其是“使用 -p 生成补丁”）： [http ://www.kernel.org/pub/software/scm/git/docs/git-diff.html](http://www.kernel.org/pub/software/scm/git/docs/git-diff.html)

git-apply 的手册页：http: [//www.kernel.org/pub/software/scm/git/docs/git-apply.html](http://www.kernel.org/pub/software/scm/git/docs/git-apply.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:40:22.097

您可以为此使用交互式变基：`git rebase --interactive`. 然后只需使用壁球选项。它仅使用来自提交的更新，但不创建提交。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T21:45:11.477

使用 git rebase --interactive HEAD~（但是有很多提交想要压缩）。例如，git rebase --interactive HEAD~5。这将加载您最近的 5 次提交并打开一个带有消息的编辑器窗口。每条消息的开头都会有“pick”。转到最后一条消息，将“pick”更改为“squash”并退出。将打开一个新窗口，询问提交消息。这将是 squash 提交的新提交消息。退出，它会将所有的提交压缩成一个新的提交。

这里有一个例子： [https ://ariejan.net/2011/07/05/git-squash-your-latests-commits-into-one](https://ariejan.net/2011/07/05/git-squash-your-latests-commits-into-one)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T21:43:32.083

您可以提交功能分支中的所有内容，然后合并到 master 接受“他们的”所有更改。

这是一个 Stack Overflow 问题，对如何做到这一点有一个很好的答案： [是否有“git merge -s ours”的“他们的”版本？](https://stackoverflow.com/questions/173919/git-merge-s-ours-what-about-their)

# events - RX 和 CancelEventArg

> ID：14884453
> 
> 赞同：0
> 
> 时间：2013-02-14T21:34:13.930
> 
> 标签：events, system.reactive

RX 是否有等效的 CancelEventArg？我在我的存储库中更新了在保存之前触发的事件。我检索 InvocationList 并遍历每个 EventHandler 以检查取消标志是否设置为中止保存。我是 RX 新手，通过观看有关 Observable 与事件的 RX 研讨会[http://channel9.msdn.com/Series/Rx-Workshop/Rx-Workshop-Observables-versus-Events](http://channel9.msdn.com/Series/Rx-Workshop/Rx-Workshop-Observables-versus-Events) 我想知道如何替换 EventHandler使用主题并知道其中一个订阅者是否取消了事件。

如果我无法将事件转换为主题，有没有办法为 EventHandler 获取 Observable 并在 OnNext 中从 EventHandler 调用中访问发送者和 CancelEventArgs？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T08:34:31.937

使用 Observable.FromEvent 您可以访问事件参数，例如这里：

```
IObservable<Key> keyPress = 
    Observable.FromEvent<KeyEventArgs>(Application.Current.RootVisual, "KeyUp")
        .Select(ev => ev.EventArgs.Key); 
```

因此，您应该能够在事件 args 中设置任何属性的值。

请注意，这里有一个设计问题：取消是您在正常情况下应该已经小心处理的事情，但是混合可取消事件和异步执行路径可能会在以后变成维护噩梦。在这里使用生产者-消费者模式，并将其视为一种单向通信：您对事件做出反应，您不应该更改它。如果您需要更改它，请使用过滤器（通过 Rx 实用程序方法）。

# tridion - Tridion 2009 SP1：如何为定期发布安排内容页面？

> ID：14884465
> 
> 赞同：4
> 
> 时间：2013-02-14T21:35:04.167
> 
> 标签：tridion, tridion2009

我需要使用 Tridion 2009 SP1 每周自动发布两次 xml 页面。根据我与 SDL 支持团队的讨论，没有可用的开箱即用功能。我也在这里看到了 2011 年的解决方案，但没有看到 2009 SP1。你能帮我一些设置自动发布的指示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:32:26.623

正如您所发现的，没有办法开箱即用。最简单的方法是使用 powershell 或 .net 编写一个小脚本，该脚本使用 TOM 通过 Interop 调用发布操作，并使用您的 CMS 或发布服务器上的 Windows 任务计划程序来安排它。您也可以编写一个 Windows 服务，但这可能是矫枉过正。

如果您迁移到 2011 或 2013，您最好使用 Core Service 而不是 TOM。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T23:20:51.430

发布页面的 VBScript 文件实际上只有几行代码。我现在无法对此进行测试，但是使用 Tridion 对象模型文档（提示：这是一个 CHM 文件），您应该能够修复我在此遗漏的任何内容：

```
Dim pageId, targetId
Dim tdse, page
pageId = "tcm:12-12-64"
targetId = "tcm:0-1-65537"
set tdse = CreateObject("TDS.TDSE")
tdse.initialize()
set page = tdse.GetObject(pageId, 1)
call page.Publish(targetId, false, false, false) 
```

将其保存在 .vbs 文件中，您可以使用 .vbs 执行该文件`cscript filename.vbs`。运行脚本的用户*必须*是有效的 Tridion 用户，具有足够的权限将页面发布到该目标。如果您使用的是 LDAP，那么运行脚本的用户必须是有效的*模拟*用户，并且您需要`tdse.Impersonate(ValidUserName)`在创建 TDSE 对象后调用。

此外，`pageId`值`targetId`应与您的页面和目标的 TCM Uris 匹配。

# php - 从 url 复制后不精确的图像复制

> ID：14884468
> 
> 赞同：0
> 
> 时间：2013-02-14T21:35:15.863
> 
> 标签：php, file-upload, file-get-contents

我正在使用带有以下代码的函数将图像从 url 复制到我的 web 目录，但我不知道为什么有些图像没有 100% 复制。

这是我的网页目录中错误图像的副本[http://www.aligatoor.pl/uploads/deals/2632b3802e8ed7abe83788dab605bbf7.jpg](http://www.aligatoor.pl/uploads/deals/2632b3802e8ed7abe83788dab605bbf7.jpg)

这里是原始图像[http://infobuzer.pl/img/r4d3k/voucher/50e35a84c9038.jpg](http://infobuzer.pl/img/r4d3k/voucher/50e35a84c9038.jpg)

```
function upload_file($file_path)
{
    $deal_img_data=file_get_contents($file_path);

    $file_name=md5($file_path).".jpg";

    if(!file_exists($file_name))
    {
        $file=fopen($file_name,"w+");

        fwrite($file,$deal_img_data);
    }
} 
```

我也尝试过使用 CURL，但它仍然无法正确复制一些图像。

卷曲代码：

```
$ch = curl_init ($url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
$raw=curl_exec($ch);
curl_close ($ch);
$saveto=md5($url).".jpg";
if(file_exists($saveto)){
    unlink($saveto);
}
$fp = fopen($saveto,'x');
fwrite($fp, $raw);
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:44:13.623

我不确切知道您的问题的原因是什么，但我在文件处理方面遇到了类似的问题，我使用这种方法解决了它：

```
 if( $handle =fopen($filename, "wb+") ){
    if(flock($handle, LOCK_EX))
    {
      fseek($handle, 0); 
      ftruncate($handle, 0); 

      fwrite($handle, $newcontent);

      fflush($handle); 
      flock($handle, LOCK_UN); 
    }
    fclose($handle); 
  } 
```

[群（）](http://php.net/manual/en/function.flock.php)

编辑：为了处理图像，最好使用[imagejpeg()](http://php.net/manual/en/function.imagejpeg.php)和[imagecreatefromjpeg()](http://php.net/manual/en/function.imagecreatefromjpeg.php)等图像函数，以获得更好的安全性和准确的结果。

例子：

```
 $im = @imagecreatefromjpeg($image);
  if(is_bool($im)){
   die("Invalid Image detected!");
  }
  else{

    if(!imagejpeg($im, $newpath)){
     die("Image not saved!");
    }
    else{
     die("Image saved!");
    }  
  } 
```

Edit2：添加这个而不是使用 file_get_contents()

```
<?php

$handle = fopen($file_path, "rb");
$deal_img_data = stream_get_contents($handle);
fclose($handle);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:41:28.400

你的功能工作正常

只需删除旧图像并尝试重新下载即可。

还添加：

```
fclose($file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T00:05:50.877

我找到了方法，所以如果有人和我有类似的问题，他可以尝试使用这个功能：

```
function grab_image($url){
    $ch = curl_init ($url);
    $saveto = md5($url).".jpg";
    $fp = fopen($saveto,'wb');
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_exec($ch);
    curl_close($ch);
    fclose($fp);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-14T21:42:11.060

尝试在函数开头添加 set_time_limit(0)

# asp.net - 如何在没有 aspnet_regiis.exe 的情况下加密 DBconnection 字符串？

> ID：14884469
> 
> 赞同：0
> 
> 时间：2013-02-14T21:35:27.527
> 
> 标签：asp.net, web-config, connection-string

我有一个 web.config 文件，其中已经包含现有应用程序的加密数据库条目；没有使用的会被注释掉。

我想添加一个新的连接字符串（用于本地主机上的数据库），以便我可以在本地开发。应用程序要求对连接字符串进行加密。

据我了解，有必要使用 aspnet_regiis.exe 加密整个文件或 web.config 文件的整个部分。但是，我不想加密已经加密的字符串。

最初，当我查看密钥时，它看起来像是简单的 Base64 编码。因此，我尝试使用在线转换器将我的 DBconnection 字符串转换为 Base64，但这不能正常工作 - 生成的连接字符串仍然给我一个错误，而且它也比 webconfig 中的其他字符串短得多。这让我相信 DBconnection 字符串不仅仅是从原始字符串进行的简单 Base64 转换。

问题：如何将单个字符串转换为 ASP.NET dbconnection 加密？aspnet_regiis.exe 可以加密单个参数吗？

子问题：ASP.NET 对其连接字符串使用什么形式的加密？它是用 Base64 编码的，但我认为这不是直接的转换。

# function - Matlab - 将递归函数转换为迭代函数

> ID：14884470
> 
> 赞同：2
> 
> 时间：2013-02-14T21:35:28.390
> 
> 标签：function, matlab, loops, recursion, if-statement

我知道它在 Java 和 C++ 等中是可能的，但这在 Matlab 中可能吗？我最近发现 Matlab 没有捷径，`value++`而是他们必须使用`value = value+1`，所以我想知道是否可以将此函数转换为迭代函数。我不知道从哪里开始。如果是这样，它是否不如递归函数有益？

```
 function [lines] = recurse(R,C, lines, T_l, count, directions)
    [rows, columns] = size(lines);
    if((R < 2 || C < 2) || (R > rows-1 || C > columns - 1) || count>500)
        count= count+1;
        return;
    end
    count= count+1;
    direction = directions(R,C);
            if(direction >= 68 || direction <=-68)                                          
                if(lines(R-1,C) > T_l)
                    lines(R-1,C) = 0;
                    lines = recurse(R-1,C, lines, T_l, count, directions);
                end
                if(lines(R+1,C) > T_l)
                    lines(R+1,C) = 0;
                    lines = recurse(R+1,C, lines, T_l, count, directions);
                end
            elseif (direction <= -23 && direction >-68)                                     
                if(lines(R+1,C+1) > T_l)
                    lines(R+1,C+1) = 0;
                    lines = recurse(R+1,C+1, lines, T_l, count, directions);
                end
                if(lines(R-1,C-1) > T_l)
                    lines(R-1,C-1) = 0;
                    lines = recurse(R-1,C-1, lines, T_l, count, directions);
                end
            elseif (direction >= 23 && direction < 68)                                      
                if(lines(R+1,C-1) > T_l)
                    lines(R+1,C-1) = 0;
                    lines = recurse(R+1,C-1, lines, T_l, count, directions);
                end
                if(lines(R-1,C+1) > T_l)
                    lines(R-1,C+1) = 0;                                                     
                    lines = recurse(R-1,C+1, lines, T_l, count, directions);
                end
            else                                                                            
                if(lines(R,C+1) > T_l)
                    lines(R,C+1) = 0;                                                           
                    lines = recurse(R,C+1, lines, T_l, count, directions);
                end
                if(lines(R,C-1) > T_l)
                    lines(R,C-1) = 0;
                    lines = recurse(R,C-1, lines, T_l, count, directions);
                end
            end
    lines(R,C) = 255;
    return; 
```

基本上，我目前有一个递归调用第二个函数的函数。我希望将这个递归函数合并到作为迭代命令集调用它的函数中。我很确定它会更慢，但速度对我来说不是问题，我很想看看循环是如何工作的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:33:53.590

您可以`value++`使用 完成[`operator`](http://www.mathworks.com/help/symbolic/mupad_ref/operator.html) （尽管您将需要符号工具箱）。

`operator(symb, f, T, prio)`定义`symb`类型为`T`(Prefix | Postfix | Binary | Nary) 的新运算符符号，优先级`prio`。该函数`f`使用 new 运算符计算表达式。

给定运算符符号“++”，例如，使用评估函数`f`，解析器将根据运算符的类型构建以下表达式，其中：

**前缀**：输入 ++x 结果为 f(x)。

**后缀**：输入 x++ 结果为 f(x)。

**二进制**：输入 x ++ y ++ z 结果为 f(f(x, y), z)。

**Nary** : 输入 x ++ y ++ z 结果为 f(x, y, z))。

[在 matlab 的文档](http://www.mathworks.com/help/symbolic/mupad_ref/operator.html)中查看更多信息。

# ios6 - iOS6苹果地图 - 是否有可能获得可见街道列表及其随附的经纬度

> ID：14884473
> 
> 赞同：0
> 
> 时间：2013-02-14T21:35:39.087
> 
> 标签：ios6, geolocation, maps

我什至不知道这是否可能。在特定缩放级别查看 Apple 地图时，某些街道是可见的。是否可以获得所有可见街道的列表，以及所有方向变化的纬度和经度？我想如果一个人得到街道的起点和街道的终点（地址），我想一个人可以获得地理位置的“路线”并能够绘制一条折线，我想这是一种方式获取地理位置列表。但是，我不知道如何获得所有可见街道的列表。理想情况下，我希望能够最终以编程方式确定街道交叉口的地理位置。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:21:34.933

您无法通过 api 获得的街道矢量。
一些国家已经公布了他们的街道数据。然后您可以在`OpenStreetMap` Apple 使用的数据来自购买 TeleAtlas 的 TomTom 中找到它们。你可以从他们那里获得测试数据，但对于一个真正的项目来说，它真的很昂贵，所以这对于一个应用程序来说毫无意义。唯一使用该数据的应用程序来自 TomTom 本身。

# c++ - 如何在不使用 makefile 的情况下链接目标文件和库

> ID：14884474
> 
> 赞同：0
> 
> 时间：2013-02-14T21:35:42.197
> 
> 标签：c++, compilation, makefile, libraries, object-files

我希望能够在不使用 makefile 的情况下编译 c++ 源文件。这是我的问题的原型......我有以下`.cpp`文件

```
// special libraries to include
#include "acado.h"  
#include "auxiliary_functions.c" 
/* -------------------------- */
// Create objects for special classes 
   ACADOvariables acadoVariables; 
   ACADOworkspace acadoWorkspace;

int main(){
    // perform task A_1
    // perform task A_2 
    // Tasks A_1 and A_2 depend on the specially included headers
    return 0;
} 
```

在同一个目录中，我有以下makefile，可以让我`.cpp`成功编译文件

```
LDLIBS = -lm 
CXXFLAGS = -O3 -finline-functions -I. -I./qpoases/INCLUDE -I./qpoases/SRC
CFLAGS = -O3
CC     = g++

OBJECTS = \
    ./qpoases/SRC/QProblemB.o       \
    ./qpoases/SRC/Bounds.o          \
    ./qpoases/SRC/Constraints.o     \
    ./qpoases/SRC/SubjectTo.o       \
    ./qpoases/SRC/Indexlist.o       \
    ./qpoases/SRC/CyclingManager.o  \
    ./qpoases/SRC/Utils.o           \
    ./qpoases/SRC/MessageHandling.o \
    ./qpoases/solver.o              \
    integrator.o                    \
    condensing.o                    \
    gauss_newton_method.o 

.PHONY: all
all: test libacado_exported_rti.a

test: ${OBJECTS} test.o

./qpoases/solver.o    : ./qpoases/solver.hpp
integrator.o          : acado.h
condensing.o          : acado.h
gauss_newton_method.o : acado.h   ./qpoases/solver.hpp
test.o                : acado.h   ./qpoases/solver.hpp

libacado_exported_rti.a: ${OBJECTS}
    ar r $@ $?

${OBJECTS} : ./qpoases/solver.hpp

.PHONY : clean
clean :
    -rm -f *.o *.a ./qpoases/SRC/*.o ./qpoases/SRC/*.a test 
```

现在，出于我的目的，我想从`.cpp`文件目录中删除这个 makefile。同时，我希望能够编译`.cpp`文件...

知道 makefile 引用的目标文件和库将位于它们各自的目录中......

所以，我想做的就是在`.cpp`没有makefile的情况下编译文件。

是否可以为给定的情况做这样的事情？...如果是，您的建议非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:34:25.533

假设您的 main() 函数在 test.cpp 中，并且您想要名为“test”的可执行文件，您可以直接从您将调用 make 的目录调用编译器：

```
 g++ test.cpp -O3 -finline-functions -I. -I./qpoases/INCLUDE -I./qpoases/SRC -lm -o test ./qpoases/SRC/QProblemB.o ./qpoases/SRC/Bounds.o ./qpoases/SRC/Constraints.o ./qpoases/SRC/SubjectTo.o ./qpoases/SRC/Indexlist.o ./qpoases/SRC/CyclingManager.o ./qpoases/SRC/Utils.o ./qpoases/SRC/MessageHandling.o ./qpoases/solver.o integrator.o condensing.o gauss_newton_method.o 
```

# javascript - Ember.js：如何查找没有属性集的记录？

> ID：14884478
> 
> 赞同：2
> 
> 时间：2013-02-14T21:35:54.917
> 
> 标签：javascript, ember.js

我有一堆“属于”其他记录的记录。（不同的模型，只是典型的 1-n 关系。）如何在我的模型上调用 find 来查找所有没有属于关联的那些？

就像是：

```
App.Thing = DS.Model.extend({
 other: DS.belongsTo( 'App.Other' ),
 someattr: DS.attr('string')
});

App.Thing.find({ other: null }); 
```

**编辑：**

louiscoquio 的解决方案对我不起作用。所以我想我可以在控制器中过滤。

这是我尝试这样做的方法：

```
App.ThingsAsideController = Ember.ArrayController.extend({
  unassigned: function() {
   return this.filterProperty('other');
  }.property('content.@each')
}); 
```

`someattr`如果我过滤但我无法过滤关系，这很好用。

我想问题是：belongsTo 关联的属性名称是什么？

**编辑**，一些有效的东西：

这行得通，但我对此很不满意：

```
 App.ThingsAsideController = Ember.ArrayController.extend({
   unassigned: function() {
     return this.filter(function(item, index, enumerable){

       var belongsToOther = false;

       var otherThings = App.OtherThing.find();
       otherThings.forEach( function( otherThing ){
         otherThing.get('things').forEach( function( otherThingThing ) {
            if( otherThingThing.id === item.id ) {
              belongsToOther = true;
            }
         });
       });

       return !belongsToOther;
    }); 
```

我一直在阅读 ember-data 源，但我不知道如何查询记录的所属关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:58:20.560

您可以使用类[`filter`](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/store.js#L821-L863)可用的方法`DS.Model`：

```
var filteredThings = App.Thing.filter(function(thing) {
  return thing.get('other') === null;
}); 
```

它返回一个数组，其中包含您传递的回调`App.Thing`中返回的所有内容。`true`

正如文档所说：

> 它返回一个实时 RecordArray，当新记录加载到存储中或在本地创建时，该记录保持最新。

# java - 将java中的图像旋转指定角度

> ID：14884480
> 
> 赞同：2
> 
> 时间：2013-02-14T21:35:56.270
> 
> 标签：java, image, rotation, graphics2d

这是在给定坐标处绘制形状的函数：

```
public void drawTank(int x,int y){
   int h = 50;
   int w = 50;

   graphic.setColor(Color.darkGray);
   graphic.drawRect(x, y, h, w);
   graphic.fillRect(x, y, h, w);
   graphic.setColor(Color.GRAY);
   graphic.drawRect(x+50, y+20, 35, 10);
   graphic.fillRect(x+50, y+20, 35, 10);
} 
```

我想在上面的函数中再添加一个变量，称为“角度”，以便图像也旋转指定的角度（drawTank（int x，int y，int angle）。

**更新了示例**

我试图做的是我初始化了 Graphics2D 并分别更改了我的代码：

```
g2D.setColor(Color.darkGray);
g2D.drawRect(x, y, h, w);
g2D.fillRect(x, y, h, w);
g2D.setColor(Color.red);
g2D.drawRect(x+50, y+20, 35, 10);
g2D.fillRect(x+50, y+20, 35, 10);
g2D.rotate((Math.toRadians(angle))); 
```

但是，这实际上并没有做任何事情。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T23:00:42.717

优先级很重要...

在您的第二个示例中，您将在绘制完所有内容后应用旋转。这不是图形的工作方式。您需要先应用转换，然后接下来的所有内容都将使用该转换。

![在此处输入图像描述](../Images/fe34cddcdbf42b6384f24dbac797a0f5.png)

```
public class TestRotateImage {

    public static void main(String[] args) {
        new TestRotateImage();
    }

    public TestRotateImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JSlider slider;
        private Rectangle rectangle;

        public TestPane() {
            setLayout(new BorderLayout());
            rectangle = new Rectangle(0, 0, 100, 100);
            slider = new JSlider();
            slider.setMinimum(0);
            slider.setMaximum(360);
            slider.setMinorTickSpacing(5);
            slider.setMajorTickSpacing(10);
            slider.setValue(0);
            add(slider, BorderLayout.SOUTH);
            slider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    repaint();
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        public double getAngle() {

            return Math.toRadians(slider.getValue());

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();

            g2d.setColor(Color.RED);
            g2d.drawLine(getWidth() / 2, 0, getWidth() / 2, getHeight());
            g2d.drawLine(0, getHeight() / 2, getWidth(), getHeight() / 2);

            g2d.setColor(Color.BLACK);
            int x = (getWidth() - rectangle.width) / 2;
            int y = (getHeight() - rectangle.height) / 2;
            AffineTransform at = new AffineTransform();
            at.setToRotation(getAngle(), x + (rectangle.width / 2), y + (rectangle.height / 2));
            at.translate(x, y);
            g2d.setTransform(at);
            g2d.draw(rectangle);
            g2d.dispose();

        }

    }

} 
```

您可能想查看[转换形状、文本和图像](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html)以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:51:56.020

这是蛮力的方法。看看 Java.lang.Math 和 java.awt.Graphics （你已经有一个实例）有了这个，你可以使用 draw polygon 函数来计算你的矩形的点，你可以使用 sin 和 cos Java.lang.Math 中的函数

真的，您只需要以这种方式计算两个点，因为您的起点将是您计算两个相邻坐标的 90 度顶点。从那里开始，只需对您拥有的点和维度值进行一些加法和减法，即可将最后一个点小猫角移到您的起点。

我会为你解决这个问题，并编写一些示例代码，但那会给你留下什么乐趣呢？

# android - 错误：将“title”的可见性更改为“default”或将 Bookinfo.title 替换为 getter

> ID：14884482
> 
> 赞同：0
> 
> 时间：2013-02-14T21:35:59.777
> 
> 标签：android, android-intent, visibility, fragment

我在 Bookinfo.title、Bookinfo.author 和 Book.isbn 变量的片段中遇到了这个错误。我不知道为什么。在尝试纠正它时，所有文档只是给了我另一个错误。至于 Bookinf，它还有另一个由 getter 和 setter 组成的类。我在 BookDetailsFragment 类中的 Fragment 一词上出现错误。错误提示将 @SuppressLint 'NewApi' 添加到 BookDetailsFragment。任何帮助将不胜感激，谢谢。

这是我的 BookDetailsFragment 代码：

```
import android.app.Fragment;

public class BookDetailsFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {

    //View view = inflater.inflate(R.layout.book_details, container, false);
    View view = inflater.inflate(R.layout.book_details, null);

    System.out.println("BookDetailsActivity executed");

    //Defines the TextViews in R.layout.book_details
    TextView bkTitle = (TextView)view.findViewById(R.id.bookTitle);
    TextView bkAuth = (TextView)view.findViewById(R.id.bookAuthor);
    TextView bkIsbn = (TextView)view.findViewById(R.id.bookISBN);

    //Retrieve the bundle object passed from BuyFragTab
    Bundle b = getArguments();

    //Getting the item's clicked position and setting corresponding details

    bkTitle.setText("Title:    " + Bookinfo.title[b.getInt("position")]);
    bkAuth.setText("Author:    " + Bookinfo.author[b.getInt("position")]);
    bkIsbn.setText("ISBN:      " + Bookinfo.isbn[b.getInt("position")]);

    return view;
    }

} 
```

这是 Bookinfo 类代码：

```
package com.skipster.BookBarter;

public class Bookinfo {
private String title;
private String author;
private String isbn;

public Bookinfo(String title, String author, String isbn) {
    this.title = title;
    this.author = author;
    this.isbn = isbn;

            // TODO Auto-generated constructor stub
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public String getAuthor() {
        return author;
    }
    public void setAuthor(String author) {
        this.author = author;
    }
    public String getIsbn() {
        return isbn;
    }
    public void setIsbn(String isbn) {
        this.isbn = isbn;
    }

    //returns all the previous variables to the program that made the call
    @Override
    public String toString() {
        return title + " " + author + " " + isbn;
    }
} 
```

这是 BookDetailsActivity 的代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.app.FragmentManager;
import android.app.FragmentTransaction;

public class BookDetailsActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //setting the layout for this activity
    setContentView(R.layout.book_details_activity_layout);

    //get fragment manager for fragment related operations
    FragmentManager fm = getFragmentManager();

    //get fragment transaction object, which can add, move or replace a fragmnt
    FragmentTransaction ft = fm.beginTransaction();

    //instantiating the fragment BookDetailsFragment
    BookDetailsFragment detailsFragment = new BookDetailsFragment();

    //creating a bundle object to pass the data (clicked item's position)
    //from this activity to fragment
    Bundle b = new Bundle();

    //setting the data to the bundle object from the Intent
    b.putInt("position", getIntent().getIntExtra("position", 0));
    System.out.println("the bundle passed" + b);

    //setting the bundle object to the fragment
    detailsFragment.setArguments(b);

    //adding the fragment to the fragment transaction
    ft.add(R.id.book_details_fragment_container, detailsFragment);

    //add the fragment transaction to backstack
    ft.addToBackStack(null);

    //Executing the transaction
    ft.commit();
}
} 
```

这是启动意图的 onClickListener 的代码：

```
bookLV.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id){

        String selectTitle, selectAuthor, selectIsbn = null;

        //When item is clicked, show it's detailed view
        Bookinfo bkRecs = (Bookinfo)parent.getItemAtPosition(position);

        //Creating an intent object to start BookDetailsActivity
        Intent bkIntent = new Intent("com.skipster.BookBarter.BOOKDETAILSACTIVITY");

        //Setting data (the clicked item's position to the intent
        bkIntent.putExtra("position", position);

        System.out.println("Data loaded for intent");
        //Start the activity
        startActivity(bkIntent);

        System.out.println("Intent activity started");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:45:21.970

在 API 11 中添加了 Fragment 类。看起来您的 minSDK 版本比这更旧。如果您想在较旧的 SDK 中使用 Fragments，您应该使用支持库，它为您提供对 Fragments 的支持。

支持库参考：http: [//developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

# c - 子进程无法从管道（父进程）获取任何值

> ID：14884483
> 
> 赞同：0
> 
> 时间：2013-02-14T21:36:01.140
> 
> 标签：c, pipe

```
#include <stdio.h>
#include <string.h>
#include <sys/time.h>
#include <sys/wait.h>
#include <signal.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
//Functions Prototype
void dadstuff(int [], int);
void kidstuff(int,char*, int [3][2]);

#define NUM 3;
int main(int argc, char *argv[])
{
    int m = rand()%100 + 1;
    int fd [3][2];
    char token[] = "GO_AHEAD\n";
    char readbuffer[80];
    //printf("%d\n",m);
    if ( argc != 2 ) /* argc should be 2 for correct execution */
    {
        /* We print argv[0] assuming it is the program name */
        printf( "usage: [filename]\n");
    }else
    {
        int val = NUM;
        int i, dad, kidid[val];
        char *name = "dad";

        for(i =0; i<val; i++)
        {
            if(-1 == (dad = kidid[i] = fork()))
            {
                printf("Could not produce kid # %d\n", i+1);
                //exit(99);
            }
            if(!dad)
                break;
        }

        if(dad)
        {
            dadstuff(kidid,i);
            pid_t pid;
            int status;

            for(i =0; i<val; i++)
            {
                if(-1 == pipe(fd[i]))
                {
                    fprintf(stderr, "pipe(): Failed to create piple\n");
                    exit(1);
                }
                printf("\nbefore");
                printf("\n");
                //close(fd[i][0]); //close up input side
                write(fd[i][1], token, strlen(token));

                //Waiting for all child to ends before processing in parent
                waitpid(kidid[i], &status, 0);
                printf("\nChild%d, my id is: %d end with status %d\n", i+1, kidid[i],status);
            }
            printf("\nParent: Good bye!\n");
            printf("\n");
        }
        else
        {
            kidstuff(i, argv[1], fd);
            if(i==0) name = "child1";
            if(i==1) name = "child2";
            if(i==2) name = "child3";

            exit(m);
        }
    }
    //return 0;
}
//Parent function
void dadstuff(int kid[], int n)
{
    printf("\nI am the father of the followings: ");
    while (n != 0)
    {
        if(n == 1)
            printf("and ");
        printf( "%d ", kid[--n]);
        //printf("%d----", n);
    }
    printf("\n");
}
//Child 1 to 3 function
void child1(char *fileName)
{
    //do something
}
void child2()
{
    //do something
}
void child3(char *fileName)
{
    //do something
}
void kidstuff(int i, char *fileName, int fd[3][2])
{
    //close(fd[i][1]); //close up output side
    char readbuffer[80];
    int nbytes = 0;

    printf("\nI am kid %d and my id is: %d\n", i+1, getpid());
    //child 1
    if(i+1 == 1)
    {
        //HOW COME PIPE WASN'T RETURNING ANYTHING??
        nbytes = read(fd[i][0],readbuffer,sizeof(readbuffer));

        printf("\n");
        printf("buffer: %s", readbuffer);

        while(readbuffer!="GO_AHEAD")
        {
            nbytes = read(fd[i][0],readbuffer,sizeof(readbuffer));
            printf("buffer: %s", readbuffer);
            printf("\n");
            sleep(1);
        }
        child1(fileName);
    }

    //child 2
    if(i+1 == 2)
    {
        child2();
    }
    //child 3
    if(i+1 == 3)
    {
        child3(fileName);
    }

} 
```

我正在尝试将一个字符串从父进程传递给 3 个子进程。但是由于某种原因，所有子进程都没有从管道中得到任何东西。我做错什么了吗？就像我在子函数中打印读取缓冲区一样，我看不到我从父进程传入的字符串。

有人知道为什么吗？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:47:30.553

在 fork 之后在父进程中创建一个管道。那是行不通的：孩子既看不到父母对`fd`数组的写入结果，也没有继承管道的文件描述符。

首先要解决的是：`pipe`在 fork 之前创建一个。有很多注意事项，例如，如果父级正在写入，而子级正在读取，则子级应该`close`继承管道的*写入*端才能检测 EOF。

# c# - 为 openfile 对话框设置默认文件夹

> ID：14884484
> 
> 赞同：1
> 
> 时间：2013-02-14T21:36:01.517
> 
> 标签：c#, .net, openfiledialog

我有一个`OpenFileDialog`，我正在尝试设置默认文件夹。最初我将其设置为`Environment.GetFolderPath(Environment.SpecialFolder.Personal) + @"\\new_folder1"`并且效果很好。但是我将其更改为`Environment.GetFolderPath(Environment.SpecialFolder.Personal) + @"\\new_folder2"`它仍然会在 new_folder1 中弹出。当我调试它时，对话框`InitialDirectory`是 new_folder2。我删除了 new_folder1，但对话框在启动时仍会查找它。现在我的代码中的任何地方都没有对 new_folder1 的引用。

关于可能发生什么的任何想法？

编辑：这是我设置初始代码的代码`OpenFileDialog`：

```
 OpenFileDialog dlg = new OpenFileDialog();
 dlg.Filter = "XML files (*.xml)|*.xml";
 String pathDefault = Environment.GetFolderPath(Environment.SpecialFolder.Personal) + @"\\new_folder2";
 dlg.InitialDirectory = pathDefault; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:38:30.643

你正在使用`@"\\...."`. 要么摆脱 @ 或更改`\\`为`\`。

或者，尝试：

```
Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Personal),"new_folder2") 
```

# python-2.7 - 是否有可能同时具有一对多和多对多关系的模型？

> ID：14884485
> 
> 赞同：1
> 
> 时间：2013-02-14T21:36:02.190
> 
> 标签：python-2.7, sqlalchemy, flask, jinja2, flask-sqlalchemy

我有一个系统，我将拥有可由一名或多名教师教授的产品（课程）。这些讲师还可以*创建*产品，在这种情况下，他们应该可以通过作为其开发人员的产品进行访问。但是，我还希望能够访问*所有*可用于该产品的讲师。

我不确定如何设置 SQLAlchemy 模型，以便我可以只`Product.developer`为`Product.instructors`.

模型.py

```
from app import db

instructors = db.Table('instructors',
    db.Column('instructor_id', db.Integer, db.ForeignKey('instructor.id')),
    db.Column('product_id', db.Integer, db.ForeignKey('product.id'))
)    

class Instructor(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    name = db.Column(db.String(64))
    #courses qualified for etc

class Product(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    courseName = db.Column(db.String(64))
    developer = db.relationship('Instructor', secondary=instructors,
        backref=db.backref('developed', lazy='dynamic'))
    instructors = db.relationship('Instructor', secondary=instructors,
        backref=db.backref('products', lazy='dynamic'))

    def __repr__(self):
        return '<Category> %r>' % (self.courseName) 
```

视图.py

```
from flask import render_template, flash, redirect
from app import app, models

@app.route('/product/<courseName>')
def show_product(courseName):
    product = models.Product.query.filter_by(courseName=courseName).first_or_404()
    return render_template('show-product.html', product=product) 
```

模板：show-product.html

```
<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}
<br><b>Course Name:</b> {{product.courseName}}
<br><b>Curriculum developer:</b> 
    {% for developer in product.developer %}
        {{developer.name}}
    {% endfor %}
<br><b>Lead Instructor:</b> 
<br><b>Certified Instructors:</b> 
    {% for instructor in product.instructors %}
        {{instructor.name}}&nbsp;
    {% endfor %} 

{% endblock %}`enter code here` 
```

这是我正在运行以在数据库中输入值的代码。

```
#!flask/bin/python
from app import db, models

instruct1 = models.Instructor(name="instructor1")
db.session.add(instruct1)
db.session.commit()

instruct2 = models.Instructor(name="instructor2")
db.session.add(instruct2)
db.session.commit()

dev = models.Instructor(name="developer")
db.session.add(dev)
db.session.commit()

prod = models.Product(courseName = "test")

prod.instructors = [instruct1]
prod.instructors.append(instruct2)

prod.developer = [dev]

print "Instructors:"
for instructor in prod.instructors:
    print instructor.name

print "Developer"
for i in prod.developer:
    print i.name

db.session.add(prod)
db.session.commit() 
```

这是输出：

```
Instructors:
instructor1
instructor2
Developer
developer 
```

但是当我查看网页时，我看到：

```
Course Name: test 
Curriculum developer: instructor1 instructor2 developer 
Lead Instructor: 
Certified Instructors: instructor1  instructor2  developer 
```

更新：谢谢doobeh！我更新了我的代码[http://bpaste.net/show/o8PtsY3Kvu8bxKnDEo24/](http://bpaste.net/show/o8PtsY3Kvu8bxKnDEo24/)但是当我运行 python 代码时出现错误“在关系'Product.instructors'上创建反向引用'产品'时出错：映射器上存在该名称的属性'映射器|讲师|讲师'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:56:42.767

如果您正确创建开发人员关系，听起来您的问题将会消失。目前，您已经从您正在使用的多对多关系中复制了这种关系。因此，您的开发人员被添加到与讲师相同的堆栈中 - 您没有立即看到它的原因是因为您直到再次打印出列表之后才将其提交到数据库。一旦您将这些列表提交到数据库并重新查询，您将获得您在模板中看到的倍数。

我认为如果您将`Product`模型更改为：

```
class Product(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    courseName = db.Column(db.String(64))

    developer_id = db.Column(db.Integer, db.ForeignKey='instructor.id'))
    developer = db.relationship('Instructor', backref='develops')

    instructors = db.relationship('Instructor', secondary=instructors,
        backref=db.backref('products', lazy='dynamic'))

    def __repr__(self):
        return '<Category> %r>' % (self.courseName) 
```

它会按您的预期工作（未经测试的代码！）。由于您现在只存储一个开发人员`Product`，因此您无需迭代这些值，或者在添加它们时传入列表/附加。

为了更清楚地说明为什么不能使用相同的字段进行多个多对多联接，让我们分解 SQL 级别上发生的事情。

您的 M2M 连接表`instructors`有两个字段，`instructor_id`和 `product_id`. 然后，您创建三个讲师：

```
id:1    instructor1
id:2    instructor2
id:3    developer 
```

然后你创建一个产品：

```
id:1    product 
```

如果我将前两位讲师添加到该产品中，`instructors` 链接表将存储如下信息：

```
product_id      instructor_id
1               1
1               2 
```

然后将开发人员添加到同一个表中：

```
product_id      instructor_id
1               1
1               2
1               3 
```

因此，当您说“给我这个产品的所有讲师”时，SQLAlchemy 会询问模型，“嘿，我这里有一个关系表明产品与`instructors`表格中的讲师相关联，所以给我所有的讲师产品 id 为 1"，当然您会得到三个结果，而不仅仅是您期望的两个结果，而且当您询问开发人员时，您会得到相同的三个结果，因为它使用相同的链接。

如果您想创建两个多对多连接，您只需要创建第二个名为`developers`或类似的链接表，它只保存与该关系相关的信息。但是，在这种情况下，因为您只需要一个开发人员链接到一个产品，您可以只使用一个简单`ForeignKey`的来映射该关系。

# unit-testing - 使用 JUnit 在 DVS 上测试 ILOG JRules 的优缺点是什么？

> ID：14884493
> 
> 赞同：0
> 
> 时间：2013-02-14T21:36:34.090
> 
> 标签：unit-testing, junit, jrules

我是 IBM 规则设计器的新手。我已经编写了一些规则集，现在我想测试它们。谁能帮助我理解为什么或何时使用 DVS 以及何时使用 JUnit 进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:06:15.273

目前我只在培训中使用 DVS，但我可以告诉你我的观点：
**DVS 的优点：**
- BI 用户可以创建新测试（使用 excels 文件）并在 RTS 上执行它们。
**DVS 的缺点：**
- 它是 BOM 侵入性的，例如，您必须在 BOM 中指定 DVS 文件中不需要的每个属性。
- 第一次设置它可能有很多时间，例如要使用特定的日期格式，场景错误不容易理解（这不是你的junit测试代码）等等。个人

，我建议你当您负责填充场景数据时使用 Junit，对于较大的测试，您可以将 csv 文件与 junit 一起使用。如果 BI 用户必须进行测试，并且必须在需要时查看结果，则使用 DVS。

# node.js - 在 CoffeeScript 中使用 child_process.send 时缺少消息

> ID：14884495
> 
> 赞同：3
> 
> 时间：2013-02-14T21:36:51.253
> 
> 标签：node.js, process, coffeescript

我刚开始使用咖啡脚本，我喜欢它，但我遇到了一个令人沮丧的问题。当我在 javascript 中重现进程和分叉子进程之间发送和接收消息的基本版本时，我得到了预期的结果。到目前为止，一切都很好。

------------ app2.js -----------------

```
var child = require('child_process');
var forked = child.fork("./child2.js");

forked.on('message', function (msg) {
    console.log("parent recieved ", msg);
});

forked.send({hello:'world'}); 
```

---------- child2.js --------------------------------

```
process.on('message', function(m) {
    console.log("child received ", m);
});

process.send({foo:'bar'}); 
```

-------------- 节点 app2.js 的输出 -----

```
child received  { hello: 'world' }
parent recieved  { foo: 'bar' } 
```

然而，当我在咖啡脚本中重现该示例时，我只让父进程接收到来自子进程的消息；显然，子进程没有收到来自父进程的消息。

------------app.coffee ----------------------------

```
cp = require('child_process')
n = cp.fork("./child.coffee")

n.on 'message', (m) =>
    console.log 'PARENT recieved', m

n.send {foo:'hello from the parent process'} 
```

---------- child.coffee ---------------

```
process.on 'message', (m) =>
    console.log 'CHILD received ', m

console.log "Child process running"

process.send {bar:'hello from the child process'} 
```

--------------------咖啡app.coffee的输出----

```
Child process running
PARENT recieved { bar: 'hello from the child process' } 
```

查看已编译的 javascript，我看到（如预期的那样）编译 coffeescript 的结果与原始 javascript 代码基本相同，只是包装在一个调用 this 的函数中。问题必须是范围之一，但我看不出如何解决它。毫无疑问，这对大师们来说是微不足道的，而且我已经束手无策了，所以我想我会问一下，以防有人好心给我指路。

达林·里德博士。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T04:12:11.763

不幸的是，这不像范围界定问题那么简单。问题是你的 fork 命令，在 JS 的情况下会启动一个新`node`进程，而在 CoffeeScript 的情况下会启动一个新的`coffee`进程。

如果没有大量时间狩猎，我不能肯定地说，但问题是它们的启动/编译时间不同，或者与此相关的东西。

```
// Changing this line
n.send {foo:'hello from the parent process'}

// to this works for me
setTimeout (-> n.send {foo:'hello from the parent process'}), 300 
```

我认为对您来说最简单的解决方案是在您`'ready'`从子进程中获得一些初始事件之前，不要向孩子发送任何消息。所以你可以让你`child.coffee`发送一些初始消息，告诉父进程它最终编译并完全加载。

# drupal - Drupal 7 数据库 API '干净' 代码

> ID：14884496
> 
> 赞同：2
> 
> 时间：2013-02-14T21:36:55.647
> 
> 标签：drupal

此代码将几个表连接在一起，然后进行联合。这是我为 Drupal 7 站点编写的一个模块。

```
$query1 = db_select('field_data_field_short_title', 's');
$query1->join('node', 'n', 'n.nid = s.entity_id');
$query1->join('field_data_field_a_z', 'a', 'a.entity_id = n.nid');

$query1->addField('s', 'field_short_title_value');
$query1->addField('n', 'nid');
$query1->addField('a', 'field_a_z_value');

$query2 = db_select('field_data_field_short_title_alternative', 'h');
$query2->join('node', 'o', 'o.nid = h.entity_id');
$query2->join('field_data_field_a_z', 'z', 'z.entity_id = o.nid');

$query2->addField('h', 'field_short_title_alternative_value');
$query2->addField('o', 'nid');
$query2->addField('z', 'field_a_z_value');

$query1->union($query2);

$result = $query1->execute(); 
```

通过查看使用 Drupal 的数据库 API 的其他示例，我觉得可能有一种“更简洁”的编写方式。我的代码中有很多重复。有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T00:49:42.553

在我看来很好。不过，您可能想查看[EntityFieldQuery](http://api.drupal.org/api/drupal/includes!entity.inc/class/EntityFieldQuery/7)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T13:59:41.843

如果查询不是动态生成的，您应该考虑只在 db_query 中编写 sql。db_select 有更多的开销。

# java - Java：Apache Mina IoAcceptor 无法在 linux 中解除绑定

> ID：14884501
> 
> 赞同：1
> 
> 时间：2013-02-14T21:37:15.200
> 
> 标签：java, linux, io, port, mina

所以我正在运行一个带有实例的webapp

> org.apache.mina.common.IoAcceptor

实例化如下：

```
IoAcceptor acceptor = new SocketAcceptor();
SocketAcceptorConfig config = (SocketAcceptorConfig) acceptor.getDefaultConfig();
config.setReuseAddress(true);
config.getFilterChain().addLast("codec", new ProtocolCodecFilter(newFIXProtocolCodecFactory()));
acceptor.bind(new InetSocketAddress(port), clientHandler); 
```

好吧，一切都很顺利——我们在与远程客户交谈的同时，整天都在郁金香的田野上接受连接。

问题是尝试断开连接时。

到目前为止，我正在尝试一个简单的，

> 接受者.unbindAll();

这在 Windows 中似乎工作正常，但是当我部署到在 linux 上运行的 Tomcat 服务器时，即使理论上我应该断开连接，端口似乎也在监听。（netstat 和我无法打开此端口的套接字都确认）

我相信我有同样的问题：http: [//objectmix.com/apache/717994-unbind-not-working.html](http://objectmix.com/apache/717994-unbind-not-working.html)

这当然是一个实例：http: [//xkcd.com/979/](http://xkcd.com/979/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T02:24:02.583

根据[他们自己的测试套件](https://www.java2s.com/Open-Source/Java/Net/mina-2.0.0/org/apache/mina/transport/AbstractBindTest.java.htm)， unbind() 应该可以工作。但是，我发现我需要更加有力地让它在 Android 上可靠地工作。YMMV。

```
acceptor.setCloseOnDeactivation(true);
for (IoSession ss : acceptor.getManagedSessions().values()) {
  ss.close(true);
}
acceptor.unbind();
acceptor.dispose(); 
```

我几乎不记得告诉你我看到了什么就继续前进，但 DenverCoder9 的回声让我回想起。

# sql - SQL - 如何从表中检索多行，然后获取该信息并将其转储到不同表的新行中

> ID：14884504
> 
> 赞同：0
> 
> 时间：2013-02-14T21:37:19.703
> 
> 标签：sql, database, insert-into

我想根据 typeID 号从一个表中获取行，并使用来自第一个表查询的数据和一些静态变量的混合数据将新行插入到另一个表中。

有没有简单的方法可以做到这一点？

代码编辑：（我无法让它工作 - 得到一个 MIssing Expression 错误）

```
Insert into tableOne
(pk_col, Custom_int_col, Data_from_other_col)
Select  default,111,security_resource_id
From security_resource sr
Where sr.company_id = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:43:54.077

就像是

```
Insert SomeTable(SomeCol1, SomeCol2,SomeCol29)
Select 'SomeText', SomeCol3,963.45 From SomeOtherTable Where SomeKey = 876 
```

还有一种味道叫`select into`。无法准确了解语法，因为您从未提及您使用的是哪个 DBMS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:48:01.417

是的

```
 INSERT INTO yourTable
    (column1,column2)
    SELECT '' ,column FROM SecondTa 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:48:13.483

如果第二个表不存在，您可以使用`create table as`或创建它`select into`，具体取决于您使用的数据库。

例如：

```
select col1, 123 as value
into NewTable
from t
where flag = 0 
```

在某些数据库中，语法为：

```
create table as
    select col1, 123 as value
    from t
    where flag = 0 
```

对于第二张桌子已经存在的情况，托尼已经回答了这个问题。

# wcf - WCF 和 Telerik.OpenAccess

> ID：14884505
> 
> 赞同：0
> 
> 时间：2013-02-14T21:37:19.650
> 
> 标签：wcf, telerik

由于某种原因，当我尝试将 Web 服务（自定义）添加到引用 Telerik.OpenAccess 的站点并尝试重用自定义 Web 服务中的类时 1）我无法使用 Web 服务，除非我删除此引用 2）当我能够重用这些类时，然后将 Telerik.OpenAccess 引用添加回来，因为这个引用，webservcie 中的任何内容都不会序列化，Web 服务确实可以在没有 Telerik.OpenAccess 引用的其他站点上工作。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:44:42.090

事实证明，如果我只包含 WCF 服务所需的库，一切都很好，不是最好的解决方案，但至少它可以工作。从长远来看，我认为这是一个糟糕的解决方案，并且不认为我的项目中的引用应该影响任何服务引用，除非该引用包含在服务引用本身中。

# c# - 默认等效于 DBNull.Value

> ID：14884509
> 
> 赞同：2
> 
> 时间：2013-02-14T21:37:39.063
> 
> 标签：c#, sql, null, default

我正在尝试将默认值传递给 c# 中的 SQL Server。

此代码传递 null。有没有办法通过默认值？

```
foreach (SqlParameter Parameter in command.Parameters)
{
    if (Convert.ToString(Parameter.Value) == "")
    {
        Parameter.Value = DBNull.Value;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:51:01.680

要么不添加参数，要么添加参数但将值设置为`null`( ***not*** `DBNull.Value` )。两者具有相同的效果：不传递参数，因此使用默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:45:28.063

您可以在 SQL-Server 中设置参数默认值（存储过程...）

```
(@parm varchar(5) = null)
AS
Begin... 
```

然后根本不要从 C# 传递参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:11:00.353

这是另一种解决方案——它似乎在存储过程中搜索参数默认值（字面意思是在变量声明中搜索赋值的模式），并返回找到的任何默认值。所以...您可以从您的 c# 应用程序调用*此*过程以获取所有默认值，将它们分配给本地 C# 变量，然后在您调用其他过程时使用它们。

[http://www.codeproject.com/Articles/12939/Figure-Out-the-Default-Values-of-Stored-Procedure](http://www.codeproject.com/Articles/12939/Figure-Out-the-Default-Values-of-Stored-Procedure)

以下是如何在表本身上找到默认值：（您可能需要从返回值中去掉括号）

```
SELECT COLUMN_DEFAULT, replace(replace(COLUMN_DEFAULT,'(',''),')','') as DefaultWithNoParenthesis
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'WHATEVER' 
```

祝你好运！

# jquery - 此显示/隐藏功能不适用于 MultiSelect 元素

> ID：14884511
> 
> 赞同：0
> 
> 时间：2013-02-14T21:37:46.547
> 
> 标签：jquery, show-hide, multi-select

此 Show/Hide 函数可与 Select 元素一起正常工作，但当我将它们更改为 MultiSelect 元素（multiple="multiple"）和/或在元素名称中添加方括号（将 MultiSelect 表单元素提交到 db 所必需的）时，它会停止工作）。如何更改它以使其与 MultiSelect 元素一起使用？

此处提供了一个工作示例：http: [//jsfiddle.net/chayacooper/yaq5F/8/](http://jsfiddle.net/chayacooper/yaq5F/8/)

*JS*

```
$(document).ready(function () {
    $("#row1, #row2").hide();
    if ($("[name=item1]").val() === "Null" || $("[name=item1]").val() === "") {
        $("#row1").show();
    } else {
        $("#row2").show()
    };
}); 
```

*HTML*

```
<div id=row1 style="font-weight:bold">Row 1 - Nothing selected</div>
<div id=row2 style="font-weight:bold; display:none;">Row 2 - Something selected</div>

<select name=item1 class="field">
<option value="Null">Select</option>
<option value=1>Option 1</option>
<option value=2>Option 2</option>
<option value=3>Option 3</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:48:10.677

使用该`multiple`选项时，返回值是一个数组，而不是字符串，因为您可以通过按住控制键来选择多个值。

您可能想用类似的东西检查值`$.inArray("Null", $(".field").val())`

* * *

为了将来参考，看看返回的值是什么确实很有帮助。一个简单`console.log($(".field").val())`的就是我所做的一切，看看发生了什么。

# css - SASS 将变量组合成单位

> ID：14884515
> 
> 赞同：2
> 
> 时间：2013-02-14T21:38:10.327
> 
> 标签：css, sass

如何将 SASS 中的两个变量组合成一个单元？设置如下：

```
$font-size: 16;
$font-unit: px;

$base-font-size: {$font-size}{$font-unit} !default;

@if unit($base-font-size) != 'px' { @warn "Parameter must resolve to a value in pixel units."; } 
```

这会引发编译错误：Invalid CSS after ... expected expression ... was

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:41:27.553

试试这个：

```
$font-size: 16;
$font-unit: 1px;

$base-font-size: $font-size * $font-unit !default;

@if unit($base-font-size) != px { @warn "Parameter must resolve to a value in pixel units."; } 
```

# sql - 根据月份将一行拆分为多行

> ID：14884516
> 
> 赞同：1
> 
> 时间：2013-02-14T21:38:14.267
> 
> 标签：sql, sql-server, unpivot

我有一个格式如下表的表格，我想将其拆分，以便有一个用于月份和年份的列，即。2014 年 1 月，然后是另一列成本。如此有效地将每一行分成12个不同的行，但我一生都无法弄清楚如何处理它。任何帮助将不胜感激

```
 CREATE TABLE dbo.Line14(
    ItemID int IDENTITY(1,1) NOT NULL,
    Detail nvarchar(max) NULL,
    Type nvarchar(255) NULL,
    Cat nvarchar(255) NULL,
    Jan_14 money NULL,
    Feb_14 money NULL,
    Mar_14 money NULL,
    Apr_14 money NULL,
    May_14 money NULL,
    Jun_14 money NULL,
    Jul_14 money NULL,
    Aug_14 money NULL,
    Sep_14 money NULL,
    Oct_14 money NULL,
    Nov_14 money NULL,
    Dec_14 money NULL
) ON PRIMARY TEXTIMAGE_ON PRIMARY
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:47:53.287

您应该能够使用[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)将数据从列转换为行的函数：

```
select itemid,
  detail,
  type,
  cat,
  Month,
  2014 as Year,
  value
from Line14
unpivot
(
  value
  for Month in (Jan_14, Feb_14, Mar_14, Apr_14,
                May_14, Jun_14, Jul_14, Aug_14,
                Sep_14, Oct_14, Nov_14, Dec_14)
) unpiv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!6/b4b6a/1)。

结果将与此类似：

```
| ITEMID | DETAIL | TYPE |  CAT |  MONTH | YEAR | VALUE |
---------------------------------------------------------
|      1 |   Test |    C | blah | Jan_14 | 2014 |    10 |
|      1 |   Test |    C | blah | Feb_14 | 2014 |    12 |
|      1 |   Test |    C | blah | Mar_14 | 2014 |    45 |
|      1 |   Test |    C | blah | Apr_14 | 2014 |    56 |
|      1 |   Test |    C | blah | May_14 | 2014 |    89 |
|      1 |   Test |    C | blah | Jun_14 | 2014 |    78 |
|      1 |   Test |    C | blah | Jul_14 | 2014 |    96 |
|      1 |   Test |    C | blah | Aug_14 | 2014 |    35 |
|      1 |   Test |    C | blah | Sep_14 | 2014 |    55 |
|      1 |   Test |    C | blah | Oct_14 | 2014 |    30 |
|      1 |   Test |    C | blah | Nov_14 | 2014 |    99 |
|      1 |   Test |    C | blah | Dec_14 | 2014 |   120 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:44:33.163

按照您的描述构建新表 - 然后编写 12`insert as select`条语句，获取每个月的货币价值并对月值进行硬编码。

# rest - Pentaho Web 服务是否完整？

> ID：14884517
> 
> 赞同：2
> 
> 时间：2013-02-14T21:38:18.447
> 
> 标签：rest, olap, pentaho, mondrian, saiku

我想为 Pentaho（蒙德里安）和我在 Windows 8 平板电脑（Javascript）上的应用程序之间的通信构建 RESTful 网络服务，我发现这个网站[http://code.google.com/p/pentaho-cws/](http://code.google.com/p/pentaho-cws/)但是当我尝试使用这个项目中的代码，它似乎还没有完成。有人试过吗？如果它有效，你如何尝试？还是这个项目不完整？是否还在开发中？

如果您有任何有效的方法来为 Pentaho (Mondrian) 构建 Web 服务，请给我一个建议。

我听说 Saiku 有一个 REST Web 服务。这可以帮助我完成这一步吗？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:15:29.883

Saiku Web 服务可能确实是要走的路。它有一个有据可查的（通过发音）API，它是每个 Saiku 安装的一部分。

例如，在[http://demo.analytical-labs.com/](http://demo.analytical-labs.com/)上运行的 Saiku具有[Web 服务文档](http://demo.analytical-labs.com/saiku/serverdocs/)和[所有 REST 资源的列表](http://demo.analytical-labs.com/saiku/serverdocs/rest.html)。

如果 man 目标是运行 MDX 查询（没有查询模型），那么 Mondrian 的 XMLA 接口可能是更简单的选择：[http ://business-intelligence.phi-integration.com/2008/04/testing-mondrian- as-xmla-provider.html](http://business-intelligence.phi-integration.com/2008/04/testing-mondrian-as-xmla-provider.html)。

# html - 一个 div 可以有多个类（Twitter Bootstrap）

> ID：14884523
> 
> 赞同：92
> 
> 时间：2013-02-14T21:38:30.100
> 
> 标签：html, css, twitter-bootstrap

一个 div 标签可以有两个类吗？

我正在使用 twitter 引导程序，并且有两个我想使用的预定义类。

一个是`active`我想`dropdown-toggle`在导航栏中使用的类。

在不覆盖 css 的情况下，在 html 中处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-02-14T21:40:31.340

当然，一个 div 可以有任意多的类（这通常与引导程序和 HTML 有关）：

```
<div class="active dropdown-toggle"></div> 
```

只需按空格分隔类即可。

**另外：**请记住，一些引导类应该用于相同的东西，但在不同的情况下（例如[对齐类](https://getbootstrap.com/docs/3.3/css/#type-alignment)，您可能想要左对齐、右对齐**或**居中对齐的东西，但它必须**只是其中**之一）并且您不应该一起使用它们，否则你会得到一个意想不到的结果，基本上会发生的是具有最高[特异性](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity)的类将是应用的类（或者如果它们具有相同的那么它将是最后定义的类在 CSS 上）。所以你最好避免做这样的事情：

```
<p class="text-center text-left">Some text</p> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-14T21:42:13.107

当然，div 可以有多个类，并且对于一些 Bootstrap 组件，您通常需要有多个类才能让它们按您希望的方式运行。当然，在引导程序之外也可以应用多个类。您所要做的就是用空格分隔每个班级。

下面的例子：

```
<label class="checkbox inline">
   <input type="checkbox" id="inlineCheckbox1" value="option1"> 1
</label> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-17T01:04:20.117

您可以向一个元素添加尽可能多的类，但每个元素只能添加一个 id。

```
<div id="unique" class="class1 class2 class3 class4"></div> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-14T21:42:55.653

用空格分隔类。

```
<button class="btn btn-success dropdown-toggle active" data-toggle="dropdown">Success <span class="caret"></span></button> 
```

**演示：http: [//jsfiddle.net/wNfcg/](http://jsfiddle.net/wNfcg/)**

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-14T21:41:47.267

我不确定您是否专门询问引导程序，即这两个类是否可以一起使用，或者您是否只是一般性地询问？

您可以根据需要将任意数量的类应用于元素，只需用空格分隔类名

```
<div class="active dropdown-toggle"></div> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-06-10T20:20:35.320

是的，div 可以根据需要选择任意数量的课程。使用空间将一个与另一个分开。

```
 <div class="active dropdown-toggle custom-class">Example of multiple classses</div> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-03-30T09:37:25.967

一个 div 可以使用引导程序或不使用引导程序来容纳多个类

`<div class="active dropdown-toggle my-class">Multiple Classes</div>`
对于应用多个类，只需按空格分隔类。

看看这个链接你会发现很多例子
[http://getbootstrap.com/css/](http://getbootstrap.com/css/)
[http://css-tricks.com/un-bloat-css-by-using-multiple-classes/](http://css-tricks.com/un-bloat-css-by-using-multiple-classes/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-07-22T04:21:41.660

您可以有多个 css`class`选择器：

例如：

```
<div class="col-md-4 a-class-name">
</div> 
```

但只有一个`id`：

```
<div id = "btn1 btn">  <!-- this is wrong -->
</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-17T00:55:01.623

空间用于制作多个类：

```
<div class="一二三">

</div>

```

# linux - 如何从在 centos 中作为服务运行的进程访问环境变量？

> ID：14884527
> 
> 赞同：0
> 
> 时间：2013-02-14T21:38:41.747
> 
> 标签：linux, service, environment

我们已经开始通过创建 /etc/init.d/[appname] 脚本并使用以下内容执行它来将我们的 EC2 应用程序作为服务运行：

服务 [appname] 开始|停止|重新启动

但是，这样做时，我们的应用程序无法访问环境变量。一个进程如何作为服务访问环境变量启动？或者，相反，我们如何设置环境变量以便它们可以被作为服务运行的进程访问？具体来说，我们依靠这些变量来了解我们在什么环境中运行......这很高兴知道......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:05:01.037

程序可以使用[environ](http://linux.about.com/library/cmd/blcmdl5_environ.htm)变量或更通常的[getenv(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/getenv.3.html)库函数来访问其环境变量。

[您可以使用/proc](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)文件系统查询某些进程 1234 的环境，特别是通过`/proc/1234/environ`（请注意条目以空结尾，因此请阅读手册页）。

其中的启动脚本`/etc/init.d/`通常是 shell 脚本，因此您可以在这些脚本`export FOO=var`中设置环境变量。（您需要将该行添加到脚本本身中，或者添加到从该初始化脚本执行该操作的文件中）。`FOO``var``export``source`

另请参阅[此问题](https://stackoverflow.com/q/4732200/841108)。

# ios - 目标C中线程安全初始化器的这两种实现之间的区别

> ID：14884529
> 
> 赞同：3
> 
> 时间：2013-02-14T21:38:44.817
> 
> 标签：ios, objective-c, thread-safety, nspredicate, synchronized

所以我有一个单例，我试图理解这两种实现之间的区别：从功能上讲，我尝试用它们运行我的代码，它们都可以工作

但是，我注意到在第一个实现中没有调用 [self alloc]，而是调用 [super alloc]。我对此有点困惑。它似乎有效，但似乎有点神奇，所以我想知道是否有人可以澄清

第一种方式：

```
 +(id)getSingleton
 {

    static dispatch_once_t pred;
    dispatch_once(&pred, ^{
    locMgrSingleton = [[super alloc] init];

        });

     return locMgrSingleton;

 } 
```

其他方式

```
 +(id)getSingleton
 {
     @synchronized(self)
     {
         if (locMgrSingleton == nil)
         {
             locMgrSingleton = [[self alloc]init];
             NSLog(@"Created a new locMgrSingleton");
         }
         else
        {
            NSLog(@"locMgrSingleton exists");
         }

     }

     return locMgrSingleton;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:53:53.653

使用`[self alloc]`vs`[super alloc]`没有区别，除非该类也覆盖`+alloc`. 也就是说，它应该调用`[self alloc]`. 我敢打赌它正在调用`super`，因为这可能是改编自覆盖`+alloc`以返回单例的实现。

`self`在任何情况下，除了vs之外，这两种模式之间的区别`super`在我对[另一个问题](https://stackoverflow.com/questions/9119042/why-does-apple-recommend-to-use-dispatch-once-for-implementing-the-singleton-pat/9119089#9119089)的回答中进行了解释，但简而言之，`dispatch_once()`这是执行此操作的现代方式。它比 快`@synchronized`，并且具有更多的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:55:02.023

正如在例如[http://cocoasamurai.blogspot.fi/2011/04/singletons-your-doing-them-wrong.html](http://cocoasamurai.blogspot.fi/2011/04/singletons-your-doing-them-wrong.html)上所说，这个`dispatch_once`调用似乎比`@synchronized(self)`.

至于为什么`[super alloc]`而不是`[self alloc]`，我看不出它有什么理由专门适用于该`dispatch_once`版本而不适用于其他版本。在静态方法中，`self`仅引用类本身（`super`及其直接超类），我将其视为编写实际类名的简写，仅此而已。

不过我只用过`[self alloc]`，因为无论如何我都写了当前类的名称，而不是它的超类。不知道具体调用是否`[super alloc]`具有任何特殊意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-30T04:57:51.573

在类方法中，`self`指向类本身。在您的两个实现中`[self alloc]`，`[MySingleton alloc]`和`[super alloc]`在语义上都是等效的——除非您出于某种奇怪的原因 override `+alloc`。

您可能希望`[super alloc]`在其他人身上使用的一个原因是当您`+alloc`使用编译器指令在声明中明确标记不可用时：

`+(instancetype) alloc __attribute__((unavailable("alloc not available")));`

或者

`+(instancetype) alloc NS_UNAVAILABLE;`

否则，当您尝试使用单例类的实例时，编译器将引发错误`+alloc`——这通常是您想要的，除非您`+alloc`在 dispatch_once 中共享单例实例。

# c# - 如果我们不通过单元测试验证私有方法是否被调用，我们如何验证它们是否被调用？

> ID：14884531
> 
> 赞同：8
> 
> 时间：2013-02-14T21:39:07.393
> 
> 标签：c#, testing, moq, mstest

我讨厌再次提出这个问题，但我真的很想了解如何通过我的测试来保护某些东西。

我有一个公共方法（如下），它在调用另一个实际执行某些操作的方法之前调用一个私有方法。我想确保不会删除对私有方法的调用，因为这可能是灾难性的。我已经做了一些研究，[这里](https://stackoverflow.com/a/1980143/279516)，[这里](https://stackoverflow.com/a/6847545/279516)和[这里](https://stackoverflow.com/a/10093115/279516)，他们都说不要测试私有方法。我想我可以理解，但是**我该如何防止删除这行代码**呢？

可以看到，public方法返回void，所以我无法测试public方法调用的结果。我有直接测试的单元测试`ApplicationShouldBeInstalled()`。

```
public void InstallApplications()
{
    foreach (App app in this._apps)
    {
        // This is the line of code that can't be removed. How can I make
        // sure it doesn't get removed?
        if (!ApplicationShouldBeInstalled(app)) { continue; }

        // This simply can't run unless it passes the above call.
        CommonUtility.Container.Resolve<IAppInstaller>().InstallApplication(this, app);
    }                       
} 
```

**编辑 - 根据 JerKimball 的回答，我同意了。**

基本上，我只使用一个 Mock 对象（来自 Moq），然后验证它的方法是否被调用了预期的次数。

```
[TestMethod()]
public void ApplicationShouldBeInstalledTest_UseCase13()
{
    var mockAppInstaller = new Mock<IAppInstaller>();
    mockAppInstaller.Setup(m => m.InstallApplication(It.IsAny<ApplicationServer>(),
        It.IsAny<Application>()));
    CommonUtility.Container.RegisterInstance<IAppInstaller>(mockAppInstaller.Object);

    // Actual test code here

    appServer.InstallApplications();
    mockAppInstaller.Verify(x => x.InstallApplication(It.IsAny<ApplicationServer>(),
        It.IsAny<Application>()), Times.Never());
} 
```

我不能放过这个；那个编辑很丑。即使我必须创建一个实际的模拟类，这种方法也更干净：

模拟实现：

```
public class MockAppInstaller : IAppInstaller
{
    public bool Invoked { get; set; }

    public void InstallApplication(ApplicationServer server, Application app)
    {
        this.Invoked = true;
    }
} 
```

测试方法：

```
[TestMethod()]
public void ApplicationShouldBeInstalledTest_UseCase14()
{
    MockAppInstaller mockAppInstaller = new MockAppInstaller();
    CommonUtility.Container.RegisterInstance<IAppInstaller>(mockAppInstaller);

    // Actual test code here

    appServer.InstallApplications();
    Assert.AreEqual(true, mockAppInstaller.Invoked);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:43:49.380

> 我想确保不会删除对私有方法的调用，因为这可能是灾难性的。

这听起来应该很容易。灾难很容易被发现。所以运行一个调用公共方法的测试，并检查是否发生了任何灾难性的事情。防止灾难的私有方法中的代码实际上是运行公共方法的*可见*副作用......而它是由于私有方法调用而导致的事实是*实现细节*。

因此，在这种情况下，您基本上应该创建一个*不应*`InstallApplications`安装的应用程序（无论出于何种原因），并在您调用它时验证它*是否未*安装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T21:51:28.890

这是一个可能的选择......当然，这非常简单，但它可能适用于您的情况，只需稍作改动；

假设它`App`看起来像：

```
public class App 
{
    public virtual bool CanBeInstalled {get; set;}
} 
```

`ApplicationShouldBeInstalled`看起来像：

```
private bool ApplicationShouldBeInstalled(App app) { return app.CanBeInstalled; } 
```

您可以编写一个“通过预期操作确认”的单元测试，如下所示：

```
void Main()
{
    var sut = new ThingToTest();    

    var mockApp = new Mock<App>();
    var wasCanBeInstalledChecked = false;
    mockApp
       .SetupGet(app => app.CanBeInstalled)
       .Callback(() => wasCanBeInstalledChecked = true);

    // of course, whatever you'd do here to get an app into this class
    sut.AddApp(mockApp.Object);

    sut.InstallApplications();
    Debug.Assert(wasCanBeInstalledChecked == true);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:51:20.327

即使公开此方法也不能让您看到它是否被调用。通过将其公开，您可以对其进行测试，但仅此而已。

`if`如果您以常规方式使用该语句，您的代码会更清晰。那些现在正在删除这条线的程序员甚至会清楚它的目的

```
public void InstallApplications()
{
    foreach (App app in this._apps)
    {
        if (ApplicationShouldBeInstalled(app)) {
            CommonUtility.Container
                .Resolve<IAppInstaller>()
                .InstallApplication(this, app);
        }
    }                       
} 
```

* * *

你也可以让这个方法在调用时增加一个计数器。然后单元测试可以测试这个计数器。

注意：您可以制作此计数器`internal`并使用`InternalsVisibleToAttribute`.

**更新**

下面是这个计数器的实现方式：

```
public int ApplicationShouldBeInstalled_Count { get; private set; }

public bool ApplicationShouldBeInstalled(App app)
{
    ApplicationShouldBeInstalled_Count++;
    ...
} 
```

然后测试

```
var sut = new MyInstallerClass();
int oldCount = sut.ApplicationShouldBeInstalled_Count;
sut.InstallApplications();
int newCount = sut.ApplicationShouldBeInstalled_Count;

Assert.AreEqual(oldCount + sut.Apps.Count, newCount); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T22:05:13.870

```
public void InstallApplications()
{
    foreach (App app in this._apps.ThatShouldBeInstalled)
    {
        CommonUtility.Container.Resolve<IAppInstaller>().InstallApplication(this, app);
    }                       
} 
```

只是想我会在混合中加入一些横向思维......

小心地把它拿出来，防止它被无意地拿出来。:)

# javascript - jQuery mouseenter 事件无法控制地触发

> ID：14884532
> 
> 赞同：0
> 
> 时间：2013-02-14T21:39:15.127
> 
> 标签：javascript, jquery

我想知道是否有人以前遇到过这个问题，或者可以告诉我我的代码有什么问题。

我在 mouseenter 上有一个按钮，可以加宽和更改文本。在 mouseleave 时，它​​会恢复到原来的状态。

[我在这里设置了一个jsfiddle。](http://jsfiddle.net/rurabe/Esvag/1/)这是相关代码（缩写）：

```
var labelChanger = function (off, on) {
  $el.off('mouseenter').off('mouseleave');
  $el.mouseenter(function (e) {
      e.stopPropagation();
      changeContent(on);
      $(this).animate({'width': '70%'}, 50);
  }).mouseleave(function (e) {
      e.stopPropagation();
      changeContent(off);
      $(this).animate({'width': '50%'}, 50);
  });
}; 
```

它工作正常，但是发生了一件奇怪的事情，如果鼠标从顶部或底部进入盒子，它可能会进入鼠标的任何移动都会触发 mouseenter 事件的状态（大约 25% 的时间会发生这种情况。 ) 你可以看到它被元素“闪烁”触发，我在它下面添加了一个日志。

但如果鼠标从侧面进入，它是稳定的，会按预期动作。

有人知道为什么吗？？？我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:44:00.563

当您修改跨度的内容时，大小的变化（由文本长度的变化引起）导致鼠标快速“离开”和“重新进入”跨度。鼠标进入/退出事件从跨度冒泡到包装器，触发脚本再次更改它并重新启动链。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:58:22.940

使用时`off()`，您也应该使用`on()`，而 mouseenter 的问题是事件冒泡，并且在插入新内容时，该新内容上的 mouseenter 冒泡，触发新事件等。尝试类似：

```
var labelChanger = function (off, on) {
    $el.off('mouseenter').off('mouseleave');
    $el.on({
        mouseenter: function (e) {
            if (e.target == this) {
                changeContent(on);
                $(this).animate({'width': '70%'}, 50);
            }
        },
        mouseleave(function (e) {
            changeContent(off);
            $(this).animate({'width': '50%'}, 50);
        }
    });
}; 
```

[**小提琴**](http://jsfiddle.net/Esvag/3/)

# zend-framework - Zend Gdata SSL 总是需要？

> ID：14884535
> 
> 赞同：0
> 
> 时间：2013-02-14T21:39:22.743
> 
> 标签：zend-framework, ssl, zend-gdata

我一直在尝试 Zend Framework 1.12 Gdata 库。我尝试了一些来自互联网的随机代码片段，但我的应用程序不断将所需的 SSL 安装返回到我的服务器 (localhost)。我想知道使用 Gdata 库是否总是需要 SSL 证书？如果是这样，那就差不多了。有人能告诉我更多关于这个主题的信息吗……在网上找不到真正的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T06:24:59.197

我想你必须通过进入 php.ini 文件来删除下一行的注释。

扩展=php_openssl.dll

它可能会解决您的问题。

# forms - 将 jquery-mobile 表单数据发送到电子邮件地址

> ID：14884538
> 
> 赞同：1
> 
> 时间：2013-02-14T21:39:40.687
> 
> 标签：forms, email, jquery-mobile, submit-button

我是编程新手。我使用 jquery-mobile + phonegap 为 Android 手机构建了一个多页表单。表格看起来和工作都很好，但我现在似乎走到了死胡同。

我希望提交按钮将（最好是格式化的数据）发送到特定的电子邮件地址，但我不确定如何执行此操作。Jquery-mobile 文档解释了如何获取或发布到一个 url，但我真的只想将它发送给一两个收件人。

如果我在请求 url 的地方放置一个 mailto:name@dom.com 语句，它会在本地电子邮件客户端中以一个长字符串显示信息。

我会给出代码示例，但此时这只是我不理解的过程，并且不确定它是否可以轻松完成。

任何有用的建议将不胜感激，因为我已经用尽了我的研究资源但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:47:45.243

那么您需要先将您的表单提交到服务器端脚本，然后从那里发送您的电子邮件。

在`PHP`服务器端，您可以使用它[`mail()`](http://php.net/manual/en/function.mail.php)来实现这一点。更好的选择 - [PHPMailer](http://phpmailer.worxware.com)。

在客户端上，您只能使用`mailto:`.

# css - CSS 背景不透明度问题

> ID：14884539
> 
> 赞同：0
> 
> 时间：2013-02-14T21:39:46.760
> 
> 标签：css, background, background-color

我的文字后面有一个白色背景。我已经使用 CSS 重新定位，如所述。我希望背景的不透明度为 0.3，但它会影响前景，即使在 html 中它处于不同的分界线中。我是 css 方面的新手，期待有更多专业知识的人的回应。

部分html是：

```
...
<p><span>Fri</span><span>When Announced</span></p>
<p><span>Sat</span><span>Open</span></p>

</div>

<div class=...
<img src="img/cross.png" alt="Cross" width="340" height="465"/>
</div>

<div id="bkgrnd"></div>

<div id="clear"></div>

</section> 
```

...

CSS是：

```
 #bkgrnd{
    background-color:#fff;
    border:1px solid #000;
    box-shadow:#332315 .3em .4em .2em;
    opacity: 0.3;
    width:750px;
    height:526px;
    margin-left:89px;
    margin-top:-55px;
    z-index:-2;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:43:37.753

为了不继承不透明度，您需要使用 RGBa（alpha 通道）而不是不透明度。

见：[http ://www.css3.info/introduction-opacity-rgba/](http://www.css3.info/introduction-opacity-rgba/)

请注意，旧版浏览器不支持 alpha 通道。您可能需要进行 CSS 后备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:45:26.860

使用`opacity`将影响任何子元素。您应该改为`rgba`在您的背景属性上使用，如下所示：

```
background-color: rgba(255, 255, 255, 0.3); 
```

这将应用`background-color`不透明度为 30% 的白色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T21:47:07.667

查看这篇关于使用 RGBa 代替 opacity 取消继承的文章：

[http://acidmartin.wordpress.com/2010/11/21/using-rgba-to-prevent-the-css-opacity-inheritance-from-parent-to-child-elements/](http://acidmartin.wordpress.com/2010/11/21/using-rgba-to-prevent-the-css-opacity-inheritance-from-parent-to-child-elements/)

这篇文章解释了如何处理 IE 5-8 的 RGBa 变通方法

# regex - Notepad++ v6.3 的正则表达式“全部替换”

> ID：14884541
> 
> 赞同：1
> 
> 时间：2013-02-14T21:39:46.763
> 
> 标签：regex, replace, notepad++

初学者，对 RegEx 和 Notepad++ 相对缺乏经验。我要做的是替换这两个防火墙会话中的策略编号以外的所有内容。请注意，我有一个 700 多行长的列表，所以我想一次性替换所有内容，只留下每行的保单编号。

```
id 1978781/s23,vsys 0,flag 00200440/4000/0003,policy 4332,time 5972, dip 0 module 0
id 1997645/s23,vsys 0,flag 00200440/4000/0003,policy 30562,time 6283, dip 0 module 0 
```

有成千上万个不同的保单号码，所以简单的搜索是行不通的。

我希望我的线条在替换后看起来像这样。

```
4332
30562 
```

在为这个问题尝试学习 RegEx 两个小时后，我意识到这比我预期的要复杂得多，我需要花时间学习它，因为它是一个非常强大的工具。这真的可以节省很多时间，不幸的是我现在没有。我期待更多地了解 RegEx，并感谢您能给我的任何帮助或指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:48:08.077

鉴于这些线条看起来总是一样的，您可以使用以下内容

```
^.+policy (\d+).+$ 
```

替换为：`$1`

点是通配符，因此`.+`表示在“策略”一词之前找到所有内容。然后找到一组数字（`\d+`用于查找数字）并保存它们（这就是括号在许多正则表达式引擎中的用途）。然后找到所有字符直到行尾。

`^`字符表示行首。表示行`$`尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T21:43:26.917

您可以尝试以下方法：

寻找：

```
^.*policy ([0-9]+).*$ 
```

用。。。来代替：

```
\1 
```

**为什么这行得通？**

点匹配任何字符，星表示它前面的字符的“零个或多个”。这意味着`.*`匹配*一切*。

您想要的是匹配政策前后的所有内容并将其删除，并仅保留政策编号，因此在您的*所有*匹配器之间查找字符串“policy xxxxx”，其中 xxxxx 是数字。

正则表达式中用括号括起来的每个术语都将保存以用于替换。我在数字匹配器周围加上括号，`[0-9]+`然后将替换部分中匹配的内容与`\1`. 如果您的正则表达式包含多个带括号的部分，您可以使用`\1`, `\2`, `\3`...

正则表达式非常强大，您应该阅读有关它们的教程以了解它们可以提供什么。

# asp.net - 表文本框在回发时失去价值

> ID：14884547
> 
> 赞同：0
> 
> 时间：2013-02-14T21:40:12.480
> 
> 标签：asp.net, vb.net

我在网上找到了一些代码，可以动态地将新行添加到表中[http://geekswithblogs.net/dotNETvinz/archive/2009/06/29/faq-dynamically-adding-rows-in-asp-table-on -按钮点击.aspx](http://geekswithblogs.net/dotNETvinz/archive/2009/06/29/faq-dynamically-adding-rows-in-asp-table-on-button-click.aspx)。该行被添加，所有以前的数据都消失了。从评论看来，很多人都有这个问题。

ASPX

```
 <asp:UpdatePanel ID="upMaterial" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Button1" EventName ="Click" />
    </Triggers>
    <ContentTemplate>
        <asp:Table ID="tbMaterials" runat="server" GridLines="Both" Visible="false">
            <asp:TableRow>
                <asp:TableCell>Qty</asp:TableCell>
                <asp:TableCell>Material</asp:TableCell>
                <asp:TableCell>Cost</asp:TableCell>
                <asp:TableCell>Price</asp:TableCell>
                <asp:TableCell>Total</asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Button ID="Button1" runat="server" Text="Button" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

VB

```
Public Class _Default
Inherits System.Web.UI.Page
Private numOfRows As Integer = 1

Protected Sub Page_Load(sender As Object, e As EventArgs)
    If Not Page.IsPostBack Then
        ViewState("RowsCount") = 1
    End If
End Sub

Protected Sub addRow(sender As Object, e As EventArgs) Handles Button1.Click
    'adds the column row once we know the header row is there
    If ViewState("RowsCount") IsNot Nothing Then
        tbMaterials.Visible = True
        numOfRows = Convert.ToInt32(ViewState("RowsCount").ToString)
        GenerateTable(numOfRows)
    End If
End Sub

Private Sub GenerateTable(rowsCount As Integer)
    'Creat the Table and Add it to the Page

    Dim table As Table = tbMaterials

    'The number of Columns to be generated
    Const colsCount As Integer = 5
    'You can changed the value of 3 based on you requirements

    ' Now iterate through the table and add your controls
    For i As Integer = 0 To rowsCount - 1
        Dim row As New TableRow()

        For j As Integer = 0 To colsCount - 1
            Dim cell As New TableCell()
            Dim tb As New TextBox()

            ' Set a unique ID for each TextBox added
            tb.ID = "TextBoxRow_" + i.ToString + "Col_" + j.ToString
            ' Add the control to the TableCell
            cell.Controls.Add(tb)
            ' Add the TableCell to the TableRow
            row.Cells.Add(cell)
        Next

        ' And finally, add the TableRow to the Table
        table.Rows.Add(row)
    Next
    'Set Previous Data on PostBacks
    SetPreviousData(rowsCount, colsCount)
    'Sore the current Rows Count in ViewState
    rowsCount += 1
    ViewState("RowsCount") = rowsCount
End Sub
Private Sub SetPreviousData(rowsCount As Integer, colsCount As Integer)
    Dim table As Table = tbMaterials
    If table IsNot Nothing Then
        For i As Integer = 0 To rowsCount - 1
            For j As Integer = 0 To colsCount - 1
                'Extracting the Dynamic Controls from the Table
                Dim tb As TextBox = DirectCast(table.Rows(i).Cells(j).FindControl("TextBoxRow_" + i.ToString + "Col_" + j.ToString), TextBox)
                'Use Request objects for getting the previous data of the dynamic textbox
                tb.Text = Request.Form("TextBoxRow_" + i.ToString + "Col_" + j.ToString)
            Next
        Next
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:32:31.340

如果您用于获取表单变量的 ID 与您在 tb.Text = Request.Form("TextBoxRow_" + i.ToString + "Col_" + j.ToString）。因为我们不能将 id 用于请求变量。

# wordpress - wp_enqueue_script 不会让加载脚本文件

> ID：14884552
> 
> 赞同：0
> 
> 时间：2013-02-14T21:40:29.460
> 
> 标签：wordpress, twitter-bootstrap, wordpress-thesis-theme

我使用 wp_enqueue_script() 通过 google CDN 将 jQuery 加载到我的 WordPress 网站：

```
function my_jquery_enqueue(){  
  wp_deregister_script('jquery');
  wp_register_script('jquery', "http" . ($_SERVER['SERVER_PORT'] == 443 ? "s" : "") . "://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js", false, null);
  wp_enqueue_script('jquery');    
}
if (!is_admin()) add_action('wp_enqueue_scripts', 'my_jquery_enqueue',11); 
```

现在我需要使用 wp_enqueue_script 来加载 twitter-bootstrap 的脚本文件，以便我可以使用它，但由于某种原因它没有加载到我的主题中。

```
function my_twitterBootstrap_js(){   
    wp_enqueue_script('twitter-bootstrap-js', 'http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js', array('jQuery'));
}
add_action('wp_enqueue_scripts', 'my_twitterBootstrap_js'); 
```

顺便说一句，我使用的是论文 1.8.5 主题。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:32:52.240

我看到您正在尝试在管理员端加载此脚本。那是对的吗？[如果是这样，请使用](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)：admin_enqueue_scripts。

如果您不想在管理员上加载它，请在上面的代码中删除 !is_admin() 。

# combobox - 为什么 Resharper 认为这些枚举从未使用过？

> ID：14884559
> 
> 赞同：5
> 
> 时间：2013-02-14T21:41:12.127
> 
> 标签：combobox, enums, resharper, datasource, automated-refactoring

我有这些枚举：

```
 private enum FontSizeType
    {
        XSmall, //9
        Small,  //12 
        Medium, //18
        Large,  //24
        XLarge, //36
        XXLarge //47
    }

    private enum AlignOptions
    {
        Left,
        Center,
        Right
    }

    private enum ValueType
    {
        Text,
        Barcode
    } 
```

Resharper 的检查告诉我所有这些“从未使用过枚举成员 'XSmall' [等]”

然而，我在组合框中使用它们，如下所示：

```
 comboBoxType1.DataSource = Enum.GetNames(typeof(ValueType)); 
```

...那么为什么 Resharper 被愚弄了？或者是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T07:46:19.050

ReSharper 不会检测隐式用法。您可以使用 [UsedImplicitly] 告诉它您的类型成员被隐式使用，然后它应该停止抱怨。

为了在您的代码中使用 UsedImplicitlyAttribute，您应该包含对 JetBrains.Annotations.dll 的引用或在您的项目中包含一些复制粘贴的源代码，请参阅[http://www.jetbrains.com/resharper/webhelp/Code_Analysis__Annotations_in_Source_Code.html](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__Annotations_in_Source_Code.html)详情。

您应该在每个枚举值上添加 [UsedImplicitly]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-11T17:38:20.990

您也可以使用此指令禁用投诉本身： `[SuppressMessage("ReSharper", "UnusedMember.Global")] public enum ComplianceStatus { Notcompliant, Unknown, Warning, Compliant, Pendingrestart, Pendinglogoff }`

# haskell - 链接 GHC 中的单独项目

> ID：14884561
> 
> 赞同：5
> 
> 时间：2013-02-14T21:41:25.813
> 
> 标签：haskell, ghc

好的，这应该很简单，但似乎无法弄清楚。我有两个项目，ProjectA 和 ProjectB。ProjectB 依赖于旧项目 ProjectA。现在我想构建 ProjectB。而且我现在不想更改 ProjectA 的目录结构。问题是，我总是将 -outputdir bin 与 ProjectA 一起使用。

项目A 看起来像这样：

```
ProjectA/
  bin/
    (*.o, *.hi in proper paths, sometimes also *.p_o and *.p_hi)
  Foo/
    ModuleX.hs
  ModuleA.hs
  ModuleB.hs 
```

现在我有一个与 ProjectB 不同的文件夹，它有自己单独的 -outputdir。我只需要链接到旧的项目对象文件（无需重新编译 ProjectA 文件）。我意识到我可能会阴谋化 ProjectA ......但是没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:33:30.943

“简单的方法”是使用 Cabal。一旦你安装了项目 A，你就再也不用担心它到底到底存储在哪里了。GHC 只会找到它。

如果您不想这样做，请尝试使用`-i`切换到 GHC 来告诉您要搜索哪些文件夹来搜索您的编译内容。

[http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/separate-compilation.html](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/separate-compilation.html)

# iphone - 卷积函数 vDSP_imgfir 返回 0 值

> ID：14884564
> 
> 赞同：1
> 
> 时间：2013-02-14T21:41:30.647
> 
> 标签：iphone, image-processing, accelerate-framework, vdsp

我正在尝试在 iphone (iOS 5.1) 上使用 Accelerate 框架来进行矩阵卷积。但是，当我运行该功能

```
 double *dst = calloc(2*3,sizeof(double));
    double A[6*7]={1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};
    double B[5*5]={2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2};
    vDSP_imgfirD(A, 6, 7, B, dst, 5, 5); 
```

我只是在结果指针上得到 0。任何猜测为什么会发生这种情况？我没有发现任何类似的问题。

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:41:07.443

我认为您缺少对卷积的一些理解。我建议在维基百科上查找它。当您将矩阵与内核进行卷积时，结果是另一个与原始矩阵大小相同的矩阵。上面，当您的输入矩阵为 42 个元素时，dst 仅分配 6 个元素。dst 也应该是 42 个元素。

对于卷积，我建议您查看 vImageConvolve_Planar8 或 vImageConvolve_PlanarF。它的构建要好得多，并且可以处理许多角落边缘场景。

希望这可以帮助

# ios - UITableViewCells 笔尖在我滚动时显示默认值

> ID：14884566
> 
> 赞同：0
> 
> 时间：2013-02-14T21:41:36.700
> 
> 标签：ios, uitableview, xib, nib

我创建了一个 UITableViewCell 笔尖，我正在加载到我的 tableview 中，但是当我滚动表格时发生了一些奇怪的事情，如果我向下滚动进来的新单元格会显示一瞬间的默认值，然后如果我滚动up 同样的事情也在顶部发生。

下面的代码根据 myObj 提供的数据决定加载哪个 nib，希望这是可以理解的

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (indexPath.section == 0) {
        // Set cell height
        [self tableView:tableView heightForRowAtIndexPath:indexPath];

        //call obj array with all of the values from my sorting algorithum
        SearchResultItem *myObj = (searchResultItem*)[dataArrayOfObjects objectAtIndex:indexPath.row];

        // This gets the year string ready  ----->

        // Create Year string
        NSString *yearRangeString = [[NSString alloc] init];

        // do some special stuff here with the years
        if ((myObj.yearStart < 1) && (myObj.yearFinish < 1)){
            //            yearRangeLabel.text = @"";
            yearRangeString = @"";
        }
        if ((myObj.yearStart < 1) && (myObj.yearFinish > 1)){
            //            yearRangeLabel.text = [NSString stringWithFormat:@"upto %i", myObj.yearFinish];
            yearRangeString = [NSString stringWithFormat:@"upto %i", myObj.yearFinish];
        }
        if ((myObj.yearStart > 1) && (myObj.yearFinish < 1)){
            //            yearRangeLabel.text = [NSString stringWithFormat:@"from %i", myObj.yearStart];
            yearRangeString = [NSString stringWithFormat:@"from %i", myObj.yearStart];
        }
        if ((myObj.yearStart > 1) && (myObj.yearFinish > 1)){
            //            yearRangeLabel.text = [NSString stringWithFormat:@"%i to %i",myObj.yearStart, myObj.yearFinish];
            yearRangeString = [NSString stringWithFormat:@"%i to %i",myObj.yearStart, myObj.yearFinish];
        }

        // adjust year string is (submodel) is avalible or not
        if (([yearSelectedString isEqualToString:@"all"]) && ([sModelSelectedString isEqualToString:@"all"])) {
            yearRangeString = [NSString stringWithFormat:@"(%@) %@", myObj.subModel, yearRangeString];
            yearRangeLabel.text = yearRangeString;
        }
        else if ((![yearSelectedString isEqualToString:@"all"]) && ([sModelSelectedString isEqualToString:@"aSearchResultItemll"])) {
            yearRangeString = [NSString stringWithFormat:@"(%@)", myObj.subModel];
            yearRangeLabel.text = yearRangeString;
        }
        else if (([yearSelectedString isEqualToString:@"all"]) && (![sModelSelectedString isEqualToString:@"all"])) {
            yearRangeString = [NSString stringWithFormat:@"%@", yearRangeString];
            yearRangeLabel.text = yearRangeString;
        }
        else if ((![yearSelectedString isEqualToString:@"all"]) && (![sModelSelectedString isEqualToString:@"all"])) {
            yearRangeLabel.text = nil;
        }

    // check year string if too large use B nibs ----->

        // Get yearRangeString width to see if you need to use a yearRangeLabel with second line
        CGSize yearStringSize = [yearRangeString sizeWithFont:[UIFont fontWithName:@"Helvetica" size:15] constrainedToSize:CGSizeMake(226, 21) lineBreakMode:NSLineBreakByWordWrapping ];

        // NSLog(@"width = %f, height = %f", yearStringSize.width, yearStringSize.height);

     // Get rest of nibs ready ----->

        // Set custom cell to display
        // check to see if there is a description, if there is choose the correct tableviewcell

        if (([myObj.note isEqualToString:@""]) && (([sModelSelectedString isEqualToString:@"all"]) || ([yearSelectedString isEqualToString:@"all"])) && (yearStringSize.width <= 100.00)) {

            // Configure the cell using custom cell
            [[NSBundle mainBundle] loadNibNamed:@"auSearchCell" owner:self options:nil];

            // Set up the different labels in each cell
            descriptionLabel.text = myObj.sDescription;
            iDLabel.text = [NSString stringWithFormat:@"%i", myObj.mID];
            cLabel.text = myObj.cDesc;
            INLabel.text = [NSString stringWithFormat:@"%i", myObj.ssID];

            cell = automativeSearchCell;
        }

        /// other if statments for different types of cells

         //Disclosure Indicator
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    return cell;
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:51:47.283

看起来你有几个问题。您不应该调用 heightForRowAtIndexPath:，它是由表视图调用的。您应该根据索引路径在那里设置您需要的任何高度。看起来您每次都将一个普通的 UITableViewCell 出队，然后如果字符串太长则切换到另一个单元格。您应该首先检查字符串大小，然后将正确的单元格出列。此外，看起来你每 t1me 都在加载笔尖，因为你的字符串太长了。相反，您应该只注册您的 nib（也许在 viewDidLoad 中），然后使用 dequeueReusableCellWithIdentifier:forIndexPath: 方法而不是您正在使用的旧方法。该方法始终保证使单元格出列，因此不需要 if cell == nil 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:44:35.700

您应该检查您的 UITableViewCell *cell 对象是否为零（即，是否有任何要出列的内容）。如果是这样，分配一个新的。

# javascript - Adobe 套接字对象不适用于代理

> ID：14884567
> 
> 赞同：2
> 
> 时间：2013-02-14T21:41:37.807
> 
> 标签：javascript, adobe-indesign, extendscript

试图让 Adob​​e 的`Socket`对象启动并运行。我有这个代码：

```
var reply = "";
var conn = new Socket;

// access Adobe’s home page
if (conn.open("www.adobe.com:80")) 
{
    // send a HTTP GET request
    conn.write ("GET /index.html HTTP/1.0\n\n");
    // and read the server’s reply
    reply = conn.read(999999);
    conn.close();

    alert(reply.toString());
}
else 
{ 
    alert(conn.error);
} 
```

它不起作用。`conn.error`被解雇了，所以我知道问题出在`conn.open`. 这是我收到的错误消息：

![无法连接到 www.adobe.com:80](../Images/872282d1d635d35ed3a68e6488abd77f.png)

也尝试了许多其他网站；没有任何效果。但是，如果我切换`www.adobe.com:80`到`localhost:8080`，一切都会按预期进行。

## 编辑

我肯定将其缩小为代理问题。但是我不知道该怎么做，如果我必须修复我的脚本，或者我是否必须与 IT 交谈以了解允许代理连接。

这是我的代码所在的位置：

```
if (conn.open("proxyserver.com:port")) 
{
    conn.write ("CONNECT www.adobe.com:443 HTTP/1.0\n\n");
    reply = conn.read(999999);
    alert(reply.toString());
} 
```

这让我得到以下信息：

![HTTP/1.0 200 连接已建立](../Images/438881d38ba6d8a413d1b8fc4afea7d1.png)

但除此之外，我无能为力。我只能做443端口（我认为是https）；端口 80 不适用于任何站点。我认为这更像是一个代理问题而不是脚本问题。但是，当我使用端口 443 并获得连接时，我不知道如何处理该连接。之后我尝试发送一个 GET 请求，它返回空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:48:11.430

确保您的防火墙没有阻止对代理服务器的访问——特定端口也可能需要打开。

或者，也许代理没有设置为使用端口 80？如果使用443端口，那不就是SSL吗？你需要证书吗？您的代理似乎只接受 SSL 连接。

也许尝试使用 ipaddress 而不是域名： `192.150.14.12:80`是 adobe pdf 提供的。

# css - Zend Framework 2 导航菜单 Twitter Bootstrap 集成

> ID：14884572
> 
> 赞同：11
> 
> 时间：2013-02-14T21:41:53.493
> 
> 标签：css, twitter-bootstrap, zend-framework2

我目前正在从数据库中构建一个菜单，并且代码效果很好。但是，我现在想使用 twitter 引导程序设置菜单样式，这就是我遇到问题的地方。有谁知道将 zend 框架 2 导航菜单与 twitter 引导程序集成的方法？如果有人感兴趣，生成的菜单如下所示。

```
<ul class="nav">
<li>
    <a href="/view-page/home">Home</a>
    <ul>
        <li>
            <a href="/view-page/coupons">Coupons</a>
            <ul>
                <li>
                    <a href="/view-page/printable-coupons">Printable Coupons</a>
                    <ul>
                        <li>
                            <a href="/view-page/cut-these-coupons">Cut these here coupons</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</li>
<li class="active">
    <a href="/view-page/about-us">About Us</a>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-15T09:42:00.757

您可以根据需要使用部分生成导航。

要在模板中显示导航：

```
<?php $partial = array('application/navigation/topnav.phtml', 'default') ?>
<?php $this->navigation('navigation')->menu()->setPartial($partial) ?>
<?php echo $this->navigation('navigation')->menu()->render() ?> 
```

您的导航部分应该是这样的：

应用程序/导航/topnav.phtml

```
 <ul class="nav">
    <?php $count = 0 ?>
    <?php foreach ($this->container as $page): ?>
        <?php /* @var $page Zend\Navigation\Page\Mvc */ ?>
        <?php // when using partials we need to manually check for ACL conditions ?>
        <?php if( ! $page->isVisible() || !$this->navigation()->accept($page)) continue; ?>
        <?php $hasChildren = $page->hasPages() ?>
        <?php if( ! $hasChildren): ?>
        <li <?php if($page->isActive()) echo 'class="active"'?>>
            <a class="nav-header" href="<?php echo $page->getHref() ?>">
                <?php echo $this->translate($page->getLabel()) ?>
            </a>
        </li>
        <?php else: ?>
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                <span><?php echo $this->translate($page->getLabel()) ?></span>
            </a>

            <ul class="dropdown-menu" id="page_<?php echo $count ?>">
            <?php foreach($page->getPages() as $child): ?>
                <?php // when using partials we need to manually check for ACL conditions ?>
                <?php if( ! $child->isVisible() || !$this->navigation()->accept($child)) continue; ?>
                <li>
                    <a href="<?php echo $child->getHref() ?>">
                        <?php echo $this->translate($child->getLabel()) ?>
                    </a>
                </li>
            <?php endforeach ?>
            </ul>
         </li>   
        <?php endif ?>
        <?php $count++ ?>
    <?php endforeach ?>
</ul> 
```

显然，这是一个简单的示例，不会处理任意数量的导航级别，并且您需要添加一些额外的类名等以使其与 Bootstrap 完美配合，但您明白了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-16T21:24:53.400

对于新的 Bootstrap 3，将其用作局部视图；

```
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="<?php echo $this->url('home') ?>"><img src="<?php echo $this->basePath('img/logo.png') ?>" alt="Title App"/>&nbsp;TitleText</a>
    </div>
    <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
        <?php foreach ($this->container as $page) { ?>
            <?php /* @var $page Zend\Navigation\Page\Mvc */ ?>
            <?php // when using partials we need to manually check for ACL conditions ?>
            <?php if (!$page->isVisible() || !$this->navigation()->accept($page)) { continue; } ?>
            <?php $hasChildren = $page->hasPages(); ?>
            <?php if (!$hasChildren) { ?>
                <li>
                    <a href="<?php echo $page->getHref() ?>">
                        <?php echo $this->translate($page->getLabel()) ?>
                    </a>
                </li>
            <?php } else { ?>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><?php echo $this->translate($page->getLabel()) ?> <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <?php foreach ($page->getPages() as $child) { ?>
                        <?php // when using partials we need to manually check for ACL conditions ?>
                        <?php if(!$child->isVisible() || !$this->navigation()->accept($child)) { continue; } ?>
                        <li>
                            <a href="<?php echo $child->getHref() ?>">
                                <?php echo $this->translate($child->getLabel()) ?>
                            </a>
                        </li>
                    <?php } ?>
                </ul>
            </li>
            <?php } ?>
        <?php } ?>
    </ul>
    </div>
</div>
</nav> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T20:57:11.983

试试下面的代码；您的导航部分应该是这样的：

应用程序/部分/topnav.phtml

```
<div class="navbar navbar-inverse navbar-fixed-bottom">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <ul class="nav" id="menu">    
        <?php $count = 0; ?>
        <?php foreach ($this->container as $page): ?>
            <?php //var_dump($page); exit;?>
            <?php /* @var $page Zend\Navigation\Page\Mvc */ ?>
            <?php // when using partials we need to manually check for ACL conditions ?>
            <?php if( ! $page->isVisible() || !$this->navigation()->accept($page)) continue; ?>
            <?php $hasChildren = $page->hasPages() ?>
            <?php if( ! $hasChildren): ?>
          <li>
                <a class="nav-header" href="<?php echo $page->getHref() ?>">
                  <?php echo $this->translate($page->getLabel()) ?>
                </a>
          </li>
            <?php else: ?>
                <a class="dropdown-toggle" data-toggle="dropdown" href="#page_<?php echo $count; ?>">
                    <span><?php echo $this->translate($page->getLabel()) ?></span>
                </a>
                <ul class="dropdown-menu" id="page_<?php echo $count; ?>">
                <?php foreach($page->getPages() as $child): ?>
                    <?php // when using partials we need to manually check for ACL conditions ?>
                    <?php if( ! $child->isVisible() || !$this->navigation()->accept($child)) continue; ?>
                    <li>
                        <a href="<?php echo $child->getHref() ?>">
                            <?php echo $this->translate($child->getLabel()) ?>
                        </a>
                    </li>
                <?php endforeach ?>
                </ul>
            <?php endif ?>
            <?php $count++; ?>
        <?php endforeach ?>
      </ul>
        <form class="navbar-search pull-right" action="">
          <input type="text" class="search-query span2" placeholder="Search">
        </form>
      </div><!-- /.nav-collapse -->
    </div><!-- /.container -->
  </div><!-- /.navbar-inner -->
</div><!-- /.navbar --> 
```

要在模板中显示导航：

```
 <div class="nav-collapse">
      <?php 
          echo $this->navigation('navigation')
          ->menu()
          ->setMinDepth(0)
          ->setMaxDepth(0)
          ->setUlClass('nav')
          ->setPartial(array('partial/topnav.phtml', 'Application'));
      ?>
    </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-04T16:35:58.250

要将外观与 zend nav-bar 集成，请更改以下内容：

`<ul class="nav">`

为了这：

`<ul class="nav navbar-nav">`

# matlab - 在 Matlab GUI 中动态更新文本

> ID：14884574
> 
> 赞同：2
> 
> 时间：2013-02-14T21:42:03.343
> 
> 标签：matlab

我认为我想做的事情应该很简单，基本上我有一个以百分比显示值的编辑框和另一个我想更新以显示原始值的编辑框。我尝试在 edit1（百分比）回调下使用以下代码：

```
currentKey = str2num(get(gcf,'CurrentKey'));
percent = str2num(get(handles.edit1,'String'));
if ~isnan(currentKey) && ~isnan(percent) && 0<=percent && percent<=100
    set(handles.edit2,'String',num2str(2*percent))
end 
```

但是，如果我第一次单击第一个之外，它只会更新第二个编辑框。有人知道我应该做什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:49:15.373

我认为这个链接应该可以帮助你：

[如何使我输入到编辑文本框中的文本动态更新？](http://www.mathworks.com/support/solutions/en/data/1-2KHBV9/index.html)

> 解决方案：
> 
> 此增强功能已包含在版本 2011a (R2011a) 中。对于以前的产品版本，请阅读以下任何可能的解决方法：
> 
> 这是 MATLAB 中编辑框 UICONTROL 的预期行为。
> 
> 您可以尝试使用“keypressfcn”来获取键盘输入。随附的两个文件演示了实时文本更新的能力。当您在上方的编辑框中输入文本时，文本将在您输入时复制到其下方的编辑框中。
> 
> 1.  请下载以下两个文件：test_keypressfcn.m test_keypressfcn.fig
> 2.  执行程序。
> 3.  将出现一个 GUI。在 GUI 中显示的上部编辑框中输入文本。
> 4.  当您在上部编辑框中输入 test 时，观察下部编辑框中的文本会动态或实时更新。
> 
> 请注意，这仅适用于在编辑框中连续输入的文本。如果您在已在编辑框中输入的单词之间键入，则 gui 将无法按预期执行。您将需要实现类似于本示例中的逻辑以获得所需的行为。

# php - 如何添加到 PHP ActiveRecord has_many 关联？

> ID：14884576
> 
> 赞同：2
> 
> 时间：2013-02-14T21:42:05.463
> 
> 标签：php, phpactiverecord

使用[PHP ActiveRecord](http://www.phpactiverecord.org/)时，您有以下模型：

```
class Message extends ActiveRecord\Model {
    static $belongs_to = array(
        array("user")
    );
}

class User extends ActiveRecord\Model {    
    static $has_one = array(
        array("message")
    );    
} 
```

然后，您可以添加与以下内容的关联：

```
$message = $user->create_message(); 
```

当你有`has_many`关系时：

```
class User extends ActiveRecord\Model {    
    static $has_many = array(
        array("messages")
    );    
} 
```

以前的不起作用。我能找到添加到关联的唯一工作方式如下：

```
$message = new Message();
$message->user_id = $user->id;
$message->save(); 
```

这对我来说就像一个丑陋的杂物。我希望类似以下的工作：

```
$message = new Message();
$message->user = $user;
$message->save(); 
```

或者：

```
$message = new Message();
$user->messages[] = $message;
$user->save(); 
```

这些都不起作用。`has_many`添加与 PHP ActiveRecord 关联的正确方法是什么？

# jquery - 使用链接更改 Nicescroll 位置

> ID：14884583
> 
> 赞同：2
> 
> 时间：2013-02-14T21:42:12.507
> 
> 标签：jquery, hyperlink, click

我在我的网页上使用 Nicescroll 插件 (3.0.0) 并且滚动工作正常。

现在由 Nicescroll “滚动”的 div 非常大，所以我希望能够通过单击 href 链接将我的 div 滚动到特定位置。

Nicescoll 插件有可能吗？

可滚动 div 中的不同区域具有特定的 ID。链接也被识别，根据点击的链接，我需要找到相应区域的 Y 位置，然后让 nicescroll 内容滚动到这个位置。

基本上，问题是要知道是否可以通过单击外部元素来更改 nicescroll 内容的位置。预先感谢您的帮助。本

# regex - 为什么这个正则表达式有效？

> ID：14884588
> 
> 赞同：3
> 
> 时间：2013-02-14T21:42:34.993
> 
> 标签：regex

好的，我完全了解*为什么*这个正则表达式有效。我正在使用的文本是这样的：

```
<html>
  <body>
    hello
    <img src="withalt" alt="hi"/>asdf
    <img src="noalt" />fdsa<a href="asdf">asdf</a>
    <img src="withalt2" alt="blah" />
  </body>
</html> 
```

使用以下正则表达式（在 php 中测试，但我假设它适用于所有 perl 正则表达式），它将返回所有不包含 alt 标签的 img 标签：

```
/<img(?:(?!alt=).)*?>/
Returns:
<img src="noalt" /> 
```

因此，基于此，我认为简单地删除 no backreference 将返回相同的结果：

```
/<img(?!alt=).*?>/
Returns:
<img src="withalt" alt="hi"/>
<img src="noalt" />
<img src="withalt2" alt="blah" /> 
```

如您所见，它只返回所有图像标签。然后让事情变得更加混乱，删除 ? （据我所知，只是一个通配符）* 返回到最后一个 >

```
/<img(?!alt=).*>/
Returns:
<img src="withalt" alt="hi"/>
<img src="noalt" />fdsa<a href="asdf">asdf</a>
<img src="withalt2" alt="blah" /> 
```

所以有人愿意通知我，或者至少给我指出这里发生的事情的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:56:09.947

```
/<img(?:(?!alt=).)*?>/ 
```

此正则表达式对其匹配的每个字符应用*负*`img`前瞻。因此，一旦找到`alt=`，它就会停止。所以，它只会匹配`img`没有`alt`属性的标签。

```
/<img(?!alt=).*?>/ 
```

*此正*则表达式仅在`img`. 因此，它会匹配所有标签，直到第一个标签后面没有跟随的`>`所有标签，无论是否出现在字符串后面的任何位置。将涵盖在`img``alt=``alt=``.*?`

```
/<img(?!alt=).*>/ 
```

这与前一个相同，但它匹配直到最后一个的所有内容`>`，因为它使用`greedy matching`. 但我不知道你为什么得到那个输出。你应该得到一切，直到最后`>`一次`</html>`。

* * *

现在忘记那里发生的一切，并转向`HTML Parser`, 来解析`HTML`. 它们专为此任务而设计。所以，不要费心使用正则表达式，因为你不能通过正则表达式解析每一种 HTML。

# java - 在 PartView 中正确调整 GridLayout 的大小

> ID：14884592
> 
> 赞同：0
> 
> 时间：2013-02-14T21:42:52.930
> 
> 标签：java, swt, eclipse-rcp

我在网格中有一个图像，当 PartView 调整大小时它会缩放。如果 BarsView 开始时的高度小于 64 高（画布的大小），则图像的底部部分会在初始大小以下被截断。如果它开始时大于调整后的大小，则 minivitals 不会按应有的方式缩小。调整大小后，我如何才能使布局看起来像我以该大小打开程序时的样子？

程序以正常大小打开时的屏幕截图：

![正常尺寸开始](../Images/cb7342768e8e8852e59dff4a948f32c9.png)

以正常尺寸打开后收缩（注意浓度条被推离屏幕底部）：

![在此处输入图像描述](../Images/4c68ff0376810b7662bc1656e3bb1484.png)

以较小的尺寸打开：

![在此处输入图像描述](../Images/9645198d929331017f87bc16fe34fb50.png)

以较小的尺寸打开然后扩大：

![在此处输入图像描述](../Images/36d6afb9a982b05e2d738002e08c7b5a.png)

在调整大小之间重新启动具有预期的效果，除了需要重新启动部分。

```
public class BarsView extends ViewPart {
    private PageBook book;
    public void createPartControl(Composite parent) {   
        book = new PageBook(parent, SWT.NONE);
        book.setLayout(new FillLayout());
        Composite page = new BarsPageView(book, view);
        book.showPage(page);
    }
    private class BarsPageView extends Composite {
        public BarsPageView(Composite parent, GameView view) {
        super(parent, SWT.NONE);
        this.setLayout(new GridLayout(3, false));

        // This is a wrapper around a StyledText
        entry = new StormFrontEntry(this, view);
        GridData entryData = new GridData(SWT.FILL, SWT.BEGINNING, true, false);
        entryData.heightHint = 22;
        entry.getWidget().setLayoutData(entryData); // getWidget() returns the StyledText

        // This is a Composite containing a Canvas
        status = new StormFrontStatus(this, view);
        status.setLayoutData(new GridData(SWT.CENTER, SWT.BEGINNING, false, false));

        // This is defined below                
        GridData compassData = new GridData(SWT.CENTER, SWT.CENTER, false, false, 1, 2);
        compassData.heightHint = 64;
        compass = new WarlockCompass(this, SWT.NONE, theme, compassData);
        compass.setLayoutData(compassData);

        minivitals = new StormFrontDialogControl(this, SWT.NONE);
        GridData mvData = new GridData(SWT.FILL, SWT.FILL, true, true, 2, 1);
        minivitals.setLayoutData(mvData);
    }
}

public class WarlockCompass extends Canvas {
    public WarlockCompass (final Composite parent, int style, CompassTheme theme, GridData layoutData) {
        super(parent, style);
        addPaintListener(new PaintListener() {
            public void paintControl(PaintEvent e) {
                drawCompass(e.gc);
            }
        });
        parent.addListener(SWT.Resize, new Listener() {
            @Override
            public void handleEvent(Event event) {
                // I cut out the calculations for this
                layoutData.heightHint = height;
                WarlockCompass.this.setSize(width, height);
            }
        });
    }
    private void drawCompass (GC gc) {
        // Cut out the calculations to scale the image to fix the canvas
        gc.drawImage(scaledImage, 0, 0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:48:31.497

```
 // This is defined below                
    GridData compassData = new GridData(SWT.CENTER, SWT.CENTER, false, false, 1, 2);
    compassData.heightHint = 64;
    compass = new WarlockCompass(this, SWT.NONE, theme, compassData);
    compass.setLayoutData(compassData); 
```

本来应该：

```
 // This is defined below                
    GridData compassData = new GridData(SWT.CENTER, SWT.CENTER, false, true, 1, 2);
    compassData.heightHint = 64;
    compass = new WarlockCompass(this, SWT.NONE, theme, compassData);
    compass.setLayoutData(compassData); 
```

更改该标志使其正确调整大小。

# javascript - HTML - 加载页面时的警报框

> ID：14884596
> 
> 赞同：7
> 
> 时间：2013-02-14T21:43:07.353
> 
> 标签：javascript, html, alert, messagebox

我正在使用 HTML 代码，我不想显示警报消息或警报框，我不知道它叫什么，而是带有“确定”按钮的消息。

我想在页面加载时显示此警报。

我该怎么做呢？

以及如何使用警报框中的标题来做到这一点？

我需要 JavaScript 吗？如果没有，如何在没有 javascript 的情况下做到这一点？

乔纳森

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T21:44:32.653

是的，你需要 JavaScript。最简单的方法是将其放在 HTML 页面的底部：

```
<script type="text/javascript">
alert("Hello world");
</script> 
```

还有更多首选的方法，比如使用 jQuery 的 ready 函数，但是这种方法会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T21:45:09.567

你需要一点点Javascript。

```
<script type="text/javascript">
window.onload = function(){ 
                alert("Hi there");
                }
</script> 
```

这与亚当的回答略有不同。有效的区别在于，当浏览器认为页面已完全加载时，此警报会发出警报，而 Adam 会在浏览器扫描`<script>`文本中的部分标签时发出警报。例如，不同之处在于图像可能会继续并行加载一段时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-16T08:12:00.023

您可以使用多种方法，一种在脚本或正文的简单函数调用中使用 Javascript window.onload 函数，如上述解决方案，您也可以使用 jQuery 来执行此操作，但它只是对 Javascript 的修改。 .只需通过粘贴将 Jquery 添加到您的标题中

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> 
```

到你的 head 部分并打开另一个脚本标签，当 DOM 准备好时，你会在其中显示警报，即`

```
<script>
    $("document").ready( function () {
        alert("Hello, world");
    }); 
</script> 
```

`

这使用 Jquery 来运行该功能，但由于 jQuery 是一个 Javascript 框架，它包含 Javascript 代码，因此 Javascript 警报功能..希望这有助于...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T21:52:48.030

如果您使用 jqueryui（或其他工具集），这就是您的方式

[http://codepen.io/anon/pen/jeLhJ](http://codepen.io/anon/pen/jeLhJ)

**html**

```
<div id="hw" title="Empty the recycle bin?">The new way</div> 
```

**javascript**

```
$('#hw').dialog({
    close:function(){
        alert('the old way')
    }
}) 
```

**更新：如何通过指向 cdn 来包含 jqueryui**

```
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.9.0.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-09T08:16:23.823

为了发出警报，只需在页脚中的 javascript 代码下方。

```
<script> 
 $(document).ready(function(){
    alert('Hi');
 });
</script> 
```

您还需要加载 jquery min 文件。请将此脚本插入标题中。

```
<script type='text/javascript' src='https://code.jquery.com/jquery-1.12.0.min.js'></script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-27T10:30:26.783

```
<script type="text/javascript">
    window.alert("My name is George. Welcome!")
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-06T11:15:48.470

```
<script> 
    $(document).ready(function(){
        alert('Hi');
    });
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-16T10:49:11.710

你可以试试这个。

```
$(document).ready(function(){      
  alert();
     $('#rep‌​ortVariablesTable tbody').append( '<tr><td>lll</td><td>lll</td></tr>');
}); 
```

# php - 使用 CodeIgniter 中 valid_email 方法中的正则表达式来路由包含电子邮件的 URL 以进行电子邮件验证

> ID：14884597
> 
> 赞同：2
> 
> 时间：2013-02-14T21:43:15.680
> 
> 标签：php, regex, codeigniter, url-routing

我为验证用户而创建的电子邮件验证链接如下：

```
site_url/user@example.com/hash_to_verify 
```

我正在尝试将上述 URL 路由到我的注册控制器中的 activate_user 方法。我尝试在 CodeIgniter 的 valid_email 方法中使用相同的正则表达式，但它似乎不起作用（不路由到 activate_user 方法）：

```
$route['registration/(/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/ix)/(:any)'] = 'registration/activate_user/$1'; 
```

1）我的路线哪里出错了？

2) 以这种方式格式化我的 URL 是否可以用于验证电子邮件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:02:03.973

```
$route['registration/(/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/ix)/(:any)'] 
```

应该：

```
$route['registration/([\w+-]+)(\.[\w+-]+)*@([a-zA-Z\d-]+\.)+[a-zA-Z]{2,6}/(:any)'] 
```

整个字符串是一个没有分隔符或修饰符的正则表达式。您正在放置分隔符、修饰符，并且还在使用`^`and `$`。

我简化了正则表达式，但是电子邮件验证不应该通过 URL 完成。相反，您的控制器应该检查该段并对其执行验证。如果不匹配重定向重新注册或输出错误信息，否则继续注册。

顺便说一句，验证电子邮件地址时不要重新发明轮子。`filter_var()`PHP 通过该函数内置了验证。

例子：

```
$email = 'joe@example.com';

if (filter_var($email, FILTER_VALIDATE_EMAIL)) 
{
    echo 'valid';
} 
```

# firebase - Firebase 做地理空间吗？

> ID：14884601
> 
> 赞同：10
> 
> 时间：2013-02-14T21:43:33.613
> 
> 标签：firebase

我想将 Firebase 改造为现有应用。现有应用程序使用 CouchDB 和 GeoCouch 来确保客户端仅检索“靠近”用户的数据。

Firebase 是否/将支持这种类型的功能，或者这是我需要自己做的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-07T13:53:29.700

对于那些仍然通过 Google 搜索来到这里的人，Firebase 现在支持这一点。查看此博文了解更多详情[https://www.firebase.com/blog/2014-06-23-geofire-two-point-oh.html](https://www.firebase.com/blog/2014-06-23-geofire-two-point-oh.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T22:46:02.250

我们不直接支持地理空间查询。目前，您需要自行将此功能添加到您的应用中。其他在 Firebase 中存储地理数据的用户非常幸运地对数据进行了非规范化并使用 geohashes 作为键。Geohashes 让您可以通过截断密钥来“搜索”附近的区域。看看这里的描述：[http ://en.wikipedia.org/wiki/Geohash](http://en.wikipedia.org/wiki/Geohash)

# visual-studio - 在 Visual Studio 中，使用 Windows Azure 存储，“记住帐户密钥”保存在哪里？

> ID：14884605
> 
> 赞同：7
> 
> 时间：2013-02-14T21:43:52.460
> 
> 标签：visual-studio, azure, visual-studio-2012, azure-storage, azure-sdk-.net

最近我重新格式化了我的电脑，它以前安装了 Visual Studio。

在 Visual Studio 中，在服务器资源管理器 -> Windows Azure 存储下，在重新格式化之前，我为 Azure 中的一项托管服务配置了一个存储帐户。 **当我配置它时，“记住我的帐户密钥”被选中。**

*重新格式化后*，这个帐户不见了，正如预期的那样。但是，当我去重新配置帐户时，我注意到它会自动使用有效密钥填充“帐户密钥”字段。

**Visual Studio 如何记住此选项？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:42:39.610

据我所知，您的订阅信息保存在硬盘上的 XML 文件中：

C:\Users\\Documents\Visual Studio 2012\Settings\Windows Azure Connections.xml

如果您还原了此文件，它将拥有代表您连接到 Azure 并直接获取存储帐户列表所需的一切。一旦拥有与订阅 ID 关联的指纹信息，它就会使用管理 API 直接连接到管理门户。

# c - ABI 是 C 标准的一部分吗？

> ID：14884615
> 
> 赞同：3
> 
> 时间：2013-02-14T21:44:40.940
> 
> 标签：c, abi

在我看来，C 库几乎从来没有混合使用不同版本或（有时）甚至不同编译器编译的库的问题，而且许多语言似乎能够直接或以最小的努力与 C 库交互。

这都是因为 ABI 是标准的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T21:51:22.770

ABI 未编入语言标准。您可以获取任何 C 标准草案的副本以自己查看。

ABI 不在标准中是有充分理由的。无论如何，该标准无法预见可以实现 C 编译器的所有硬件和操作系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T21:48:03.723

ABI 绝对不是标准的。至少，不在 C 标准中。每个操作系统或工具链都指定了这些内容，但语言本身没有。例如，尝试在 Linux 机器上运行 Windows 程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T21:53:53.357

ABI 由操作系统和/或工具链定义，而不是由标准定义。例如，它定义了参数如何传递给函数调用。stackframe 具有什么布局或如何调用系统调用。

大多数语言能够与 C 库交互的原因很可能是因为大多数操作系统（或多或少）是用 C 编写的，将 C 库公开为 API 并基于此定义 ABI。如果用某种语言编写的库想要连接特定的操作系统，它必须能够连接该操作系统的 ABI。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T21:54:32.357

ABI 不是 C 标准的一部分。但是，一直在努力使 ABI 标准化。引用“ [Linux系统编程](http://shop.oreilly.com/product/9780596009588.do)”：

> 尽管为跨多个操作系统的给定架构（特别是 Unix 系统上的 i386）定义单个 ABI 已经进行了多次尝试，但这些努力并没有取得多大成功。相反，操作系统（包括 Linux）倾向于定义它们自己认为合适的 ABI。

# c - For循环只运行一次

> ID：14884632
> 
> 赞同：-3
> 
> 时间：2013-02-14T21:45:39.560
> 
> 标签：c

```
int input;
int factorial;
int half;

printf("Enter the number you wish to calculate: ");
scanf("%d", &input);    

for(x=1; x<input; x++);
{
    half = input - 1;
    factorial = input * half;
}

printf("%d\n", factorial);

return 0; 
```

它运行一次，给我输入数字*（输入数字 - 1），考试，输入是 5 它给出 20。我做错了什么阻止它继续运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T21:48:05.243

你有一个`;`在for循环之后。删除它，你会没事的：

```
for(x=1; x<input; x++) {
 // your stuff
} 
```

如其他答案中所述，您仍然必须修复循环中的另一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T21:50:11.423

> 我究竟做错了什么？

你做错了很多事情：

*   命名一个变量`half`是错误的，除非你给它分配一个真正一半的值
*   您的循环不使用之前的阶乘值
*   你总是乘以`input`，`input-1`从不改变`input`
*   您没有初始化`factorial`为`1`

PS 您的循环运行为空的事实是您最不麻烦的事情。

PPS 要做到这一点，请考虑如何在纸上做到这一点：从 开始`1`，然后继续将先前的结果乘以从`2`到的数字`input`。现在编写与 C 程序相同的算法：`factorial`用作中间结果，并`x`从循环中用作“和之间的当前`1`数字`input`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T21:48:35.953

您不会`input`在循环中进行更改，因此您的代码归结为（对于您的示例输入 5）：

```
for (i = 1; i < 5; i++) {
   half = 5 - 1;
   factorial = 5 * 4;
} 
```

阶乘 5 ( `5!`) 将是 5 * 4 * 3 * 2 * 1，应该是：

```
factorial = 1;
for (i = input; i > 1; i--) {
   factorial = factorial * i;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T21:49:43.417

您的循环每次都使用相同的值（`input`和`half`）

尝试

```
factorial = 1;
for(x=2; x<=input; x++)
{
    factorial *= x;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T21:50:48.783

你实际上并没有改变状态，所以你应该只得到`input * (input - 1)`. 为什么？嗯，`half`永远*都是*`input - 1`，永远不会`input`改变。同时，*每次*您单步执行循环时，都会将 的值`factorial`简单地分配给该产品。

 *我想你的意图是

```
factorial = 1;
// no sense in starting from 1, factorial already is 1
for(x = 2; 
    // using <= so as to *include* the original input value.
    x <= input; x++)
{
    // the same things a factorial = factorial * x
    factorial *= x;
} 
```

顺便说一句：您也可能希望补偿负面因素。*

# java - 我们是否应该创建一个单例的 Web 服务客户端 @WebServiceClient

> ID：14884634
> 
> 赞同：1
> 
> 时间：2013-02-14T21:45:50.890
> 
> 标签：java, soap

我的应用程序需要调用 SOAP 服务并且是一个多线程应用程序。我已经使用 cxf-codegen-plugin 生成了 Web 服务客户端。现在，如果使用生成的客户端调用 SOAP 服务， `new AddWSService().getAddWS().add(x,y);` 是否总是会影响创建新客户端的性能？我是否需要考虑缓存客户端实例？

# php - 为什么双重哈希字符串（encrpyt）不好？

> ID：14884638
> 
> 赞同：1
> 
> 时间：2013-02-14T21:46:18.457
> 
> 标签：php, encryption

我在另一个网站上听说做类似的事情是个坏主意：

```
$string = "hello";
sha1(hash("sha512", $string)); 
```

...就我而言，这是一个好主意！为什么不是？（我不太明白其他网站上的解释）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:50:27.867

多次散列没有错。在许多情况下，这实际上是一个好主意。

1.  你想减慢蛮力攻击。
2.  您有一个充满散列密码的数据库，这些密码使用损坏的散列方案。例如，从 MD5 升级到 SHA1。
3.  您正在实施挑战/响应方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:50:34.527

您粘贴的示例很糟糕，因为您使用 160 位哈希对 512 位哈希进行哈希处理。

# ios - 无论我使用哪个主机，都无法访问主机

> ID：14884643
> 
> 赞同：1
> 
> 时间：2013-02-14T21:46:42.817
> 
> 标签：ios, connection, host, reachability

这种情况 (NSLog(@"A gateway to the host server is down."); 总是出于某种原因运行。

我在幕后使用 Apple Reachability 类。我试图插入其他主机但没有运气请帮忙。

提前致谢。

这是代码

```
@implementation ConnectionManager
@synthesize internetActive, hostActive;

-(id)init {
self = [super init];
if(self) {

}
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:@"NetworkReachabilityChangedNotification" object:nil];

internetReachable = [Reachability reachabilityForInternetConnection];
[internetReachable startNotifier];

hostReachable = [Reachability reachabilityWithHostName:@"www.google.com"];
[hostReachable startNotifier];

return self;
}

- (void) checkNetworkStatus:(NSNotification *)notice
{
NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
switch (internetStatus)

{
    case NotReachable:
    {
        NSLog(@"The internet is down.");
        self.internetActive = NO;

        break;

    }
    case ReachableViaWiFi:
    {
        NSLog(@"The internet is working via WIFI.");
        self.internetActive = YES;

        break;

    }
    case ReachableViaWWAN:
    {
        NSLog(@"The internet is working via WWAN.");
        self.internetActive = YES;

        break;

    }
}

NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
switch (hostStatus)

{
    case NotReachable:
    {
        NSLog(@"A gateway to the host server is down.");
        self.hostActive = NO;

        break;

    }
    case ReachableViaWiFi:
    {
        NSLog(@"A gateway to the host server is working via WIFI.");
        self.hostActive = YES;

        break;

    }
    case ReachableViaWWAN:
    {
        NSLog(@"A gateway to the host server is working via WWAN.");
        self.hostActive = YES;

        break;

    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:15:30.190

由于您没有提到`internetReachable`显示相同的错误，我假设您能够连接到互联网并且该部分工作正常。对于`hostReachable`部件，您可以尝试将其更改为：

改变

```
[Reachability reachabilityWithHostName:@"www.google.com"]; 
```

至

```
[Reachability reachabilityWithHostName:@"http://www.google.com"]; 
```

# ios - 如何确定某个名称的文件是否存在于我的 iOS 文档目录中

> ID：14884647
> 
> 赞同：0
> 
> 时间：2013-02-14T21:46:59.990
> 
> 标签：ios, caching, path

我正在尝试在 iPhone 文档目录中下载和缓存数据。我希望能够检查文件是否存在，如果存在则用本地数据填充我的 UITableViewCell，如果不存在则远程加载数据。

这是我用来下载数据的代码。

```
 NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *path = [paths objectAtIndex:0];
    operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"Successfully downloaded file to %@", path);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"The Error Is: %@", error);
    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:51:31.027

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *pathToMyFile = [path stringByAppendingPathComponent:@"myDataFile"];
if ([fileManager fileExistsAtPath:pathToMyFile]) {
    // file exists
}
else {
    // file doesn't exist
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:09:33.470

您想要文档目录吗？使用此代码：

```
NSString* documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"FILENAME"];
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
    // file exists
}
else {
    // file doesn't exist
} 
```

注意：您可能需要检查 AFNetworking 是否在文档路径中创建了一个目录来存储它下载的任何内容。这些库通常会创建自己的目录。

# shell - 合并第一列有科学记数法数据的文件以及如何使用uniq

> ID：14884651
> 
> 赞同：1
> 
> 时间：2013-02-14T21:47:19.447
> 
> 标签：shell, uniq

关于使用命令的两个问题`uniq`，请帮忙。

# 第一个问题

假设我有两个文件；

```
$ cat 1.dat
0.1 1.23
0.2 1.45
0.3 1.67

$ cat 2.dat
0.3 1.67
0.4 1.78
0.5 1.89 
```

使用`cat 1.dat 2.dat | sort -n | uniq > 3.dat`，我可以将两个文件合并为一个。结果是：

```
0.1 1.23
0.2 1.45
0.3 1.67
0.4 1.78
0.5 1.89 
```

但如果我有一个科学记数法`1.dat`，

```
$ cat 1.dat
1e-1 1.23
0.2 1.45
0.3 1.67 
```

结果将是：

```
0.2 1.45
0.3 1.67
0.4 1.78
0.5 1.89
1e-1 1.23 
```

这不是我想要的，我怎么能让`uniq`理解`1e-1`是一个数字，而不是一个字符串。

# 第二个问题

同上，但这次，让第二个文件`2.dat`的第一行稍有不同（从`0.3 1.67`到`0.3 1.57`）

```
$ cat 2.dat
0.3 1.57
0.4 1.78
0.5 1.89 
```

那么结果将是：

```
0.1 1.23
0.2 1.45
0.3 1.67
0.3 1.57
0.4 1.78
0.5 1.89 
```

我的问题是，我如何`uniq`仅根据第一个文件中的值使用并仅从第一列中找到重复项，以便结果仍然是：

```
0.1 1.23
0.2 1.45
0.3 1.67
0.4 1.78
0.5 1.89 
```

谢谢

# 更复杂的测试用例

```
$ cat 1.dat
1e-6 -1.23
0.2 -1.45
110.7 1.55
0.3 1.67e-3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:01:28.527

**仅第一部分：**

`cat 1.dat 2.dat | sort -g -u`

```
1e-1 1.23
0.2 1.45
0.3 1.67
0.4 1.78
0.5 1.89 
```

`man sort`

```
 -g, --general-numeric-sort
          compare according to general numerical value

 -u, --unique
          with -c, check for strict ordering; without -c, output only the first of an equal run 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T22:07:50.953

one awk (gnu awk) one-liner 解决你的两个问题

```
 awk '{a[$1*1];b[$1*1]=$0}END{asorti(a);for(i=1;i<=length(a);i++)print b[a[i]];}' file2 file1 
```

使用数据进行测试：注意，我将 file1设为**unsorted**并`1.57`在 file2 中，如您所愿：

```
kent$  head *
==> file1 <==
0.3 1.67
0.2 1.45
1e-1 1.23

==> file2 <==
0.3 1.57
0.4 1.78
0.5 1.89

kent$  awk '{a[$1*1];b[$1*1]=$0}END{asorti(a);for(i=1;i<=length(a);i++)print b[a[i]];}' file2 file1
1e-1 1.23
0.2 1.45
0.3 1.67
0.4 1.78
0.5 1.89 
```

**编辑**

显示`0.1`而不是`1e-1`：

```
kent$  awk '{a[$1*1];b[$1*1]=$2}END{asorti(a);for(i=1;i<=length(a);i++)print a[i],b[a[i]];}' file2 file1
0.1 1.23
0.2 1.45
0.3 1.67
0.4 1.78
0.5 1.89 
```

**编辑 2**

对于精度，awk 默认 (OFMT) 是`%.6g`您可以更改的。但是如果你想按行显示不同的精度，我们需要一点技巧：

（我在file1中添加了1e-9）

```
kent$  awk '{id=sprintf("%.9f",$1*1);sub(/0*$/,"",id);a[id];b[id]=$2}END{asorti(a);for(i=1;i<=length(a);i++)print a[i],b[a[i]];}'  file2 file1 
0.000000001 1.23
0.2 1.45
0.3 1.67
0.4 1.78
0.5 1.89 
```

如果要为所有行显示相同的数字精度：

```
kent$  awk '{id=sprintf("%.9f",$1*1);a[id];b[id]=$2}END{asorti(a);for(i=1;i<=length(a);i++)print a[i],b[a[i]];}'  file2 file1 
0.000000001 1.23
0.200000000 1.45
0.300000000 1.67
0.400000000 1.78
0.500000000 1.89 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T22:15:40.247

为了将科学记数法更改为十进制，我使用了 python

```
#!/usr/bin/env python

import sys
import glob

infiles = []

for a in sys.argv:
    infiles.extend(glob.glob(a))

for f in infiles[1:]:
    with open(f) as fd:
        for line in fd:
            data = map(float, line.strip().split())
            print data[0], data[1] 
```

输出：

```
$ ./sn.py 1.dat 2.dat
0.1 1.23
0.2 1.45
0.3 1.67
0.3 1.67
0.4 1.78
0.5 1.89 
```

# algorithm - 二维盒子堆叠没有高度限制的重复项

> ID：14884656
> 
> 赞同：2
> 
> 时间：2013-02-14T21:47:37.127
> 
> 标签：algorithm, dynamic-programming

我一直在尝试解决这个问题的 2D 变体：[Box stacking problem](https://stackoverflow.com/questions/2329492/box-stacking-problem)

问题是，与原来的不同，同一个盒子的多个实例是不允许的。当然，您仍然可以旋转 2D 矩形。

还有一个高度限制，所以塔必须小于或等于这个限制。

一个盒子在另一个盒子下面的底部必须大于或等于（严格来说不是更大）它。

我一直在尝试应用 LIS 算法，并且似乎处理了其他限制，但我想不出如何解释无重复规则。

所以我的主要问题是，如果你试图最大化堆栈的高度并将其保持在限制以下，你如何解释无重复规则？谢谢

**编辑：**

我意识到，如果您像为 3-D 变体一样为每个项目创建两个可能的旋转，那么这个问题将变得非常类似于 0-1 背包问题。由于必须使用此排序列表的子集来构建最佳塔，因此**我们**必须选择要使用的塔。但是，我仍然不知道如何确保没有重复。解决这个问题有什么帮助吗？谢谢

**编辑2：**

我找到了这个链接：[http](http://courses.csail.mit.edu/6.006/fall10/handouts/recitation11-19.pdf) ://courses.csail.mit.edu/6.006/fall10/handouts/recitation11-19.pdf 第4页描述了如何解决单实例3D最大高度版本，但是我认为这会不适用于高度限制版本，因为它返回每次调用的最大高度。也许这可以修改以适应高度限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:42:43.293

好的，所以我发现解决方案只是 0-1 样式，但在意识到顺序并不重要后使用布尔表，因为任何一组 2D 矩形都可以分类到遵守限制的塔中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T01:07:36.467

任何一组 2D 矩形都不一定会被分类成遵守高度限制的塔。即使可以，您仍然需要决定对特定盒子使用哪个方向（旋转它以使底座最大，如果合适，可以使更宽的矩形堆叠在顶部，但不会那么高。）

允许矩形的多个实例的非 0/1 版本通过动态编程解决，方法是创建两个矩形，以不同方式旋转，对矩形数组进行排序（强制偏序，因此如果矩形 i，具有指定的旋转, 可以适合矩形 j 的顶部，具有指定的旋转，然后 i 必须小于 j)，然后计算 i=0...n 可以通过以第 i 个框结束的塔达到的最大高度指定的旋转。

部分顺序是必需的。在 0/1 情况下，不允许多个矩形/框，似乎您必须生成所有矩形/框的所有可能旋转的集合，对每个矩形/框进行排序并计算其最大高度，这不违反任何条件，例如通过动态编程，然后跟踪所有子集上可能的最高堆栈高度（请注意，有可能的子集的指数数量，如在旅行商问题的动态规划解决方案中，远小于一组可能排序的阶乘数。）特别是解决方案[http://courses.csail.mit.edu/6.006/fall10/handouts/recitation11-19.pdf](http://courses.csail.mit.edu/6.006/fall10/handouts/recitation11-19.pdf)看起来不正确：如果 i < j 但是方向为 x 的框 i 可以放在方向为 y 的框 j 的顶部，那么在方向为 x 的框 i 中结束的最高塔可能包含方向为 y 的框 j，当H(i,R) 的计算与公式相矛盾。

请注意，在 0/1 情况下，创建重复项的策略似乎也失败了，因为是否可以将第 j 个框放在第 i 个框的顶部不仅取决于 i，还取决于 i 下面是否有第 j 个框的旋转版本在堆栈中。因此，您似乎需要存储不包含任何可能的盒子子集的最高堆栈，在这种情况下，我们将返回为每个盒子子集计算最高堆栈。

# ruby - 无法理解“-F”的实际用法 " 切换到 ruby

> ID：14884669
> 
> 赞同：0
> 
> 时间：2013-02-14T21:48:02.657
> 
> 标签：ruby, ruby-1.9.3

# 来自文档：

*`-Fpattern split() pattern for autosplit (-a)`*

```
@ubuntu:~$ ruby -an -F -e 'puts $_;puts $_.split; puts $F[3] if /^a/'
a fdrvo hhl vgtl bbnn                             
a fdrvo hhl vgtl bbnn
a
fdrvo
hhl
vgtl
bbnn
vgtl

@ubuntu:~$ ruby -an -e 'puts $_;puts $_.split; puts $F[3] if /^a/'
aaas kgkb hv njjj jlh
aaas kgkb hv njjj jlh
aaas
kgkb
hv
njjj
jlh
njjj 
```

由于两个代码的输出相同，因此无法理解`-F<pat>`在 ruby​​ 中的实际使用。有人能帮我一下吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:28:48.493

试试这个：

```
@ubuntu:~$ ruby -a -n -Fp -e 'puts $_;puts $F[3]'
apf drvoph hlpvg tlpbbpnn
apf drvoph hlpvg tlpbbpnn
vg tl

@ubuntu:~$ ruby -a -n -e 'puts $_;puts $F[3]'
apf drvoph hlpvg tlpbbpnn
apf drvoph hlpvg tlpbbpnn
tlpbbpnn 
```

('p' in this case)之后的模式`-F`用作分隔符而不是空格。

# azure - Azure VM - 终结点不起作用

> ID：14884675
> 
> 赞同：5
> 
> 时间：2013-02-14T21:48:32.517
> 
> 标签：azure, endpoint, azure-virtual-machine

我有两个端点 3389 和 80 的 VM。它已经正常工作了大约 1 周。

昨天我无法远程访问它，无法通过端口 80 访问它的服务。我重新启动它 - 没有帮助。我决定删除并重新创建端点，这很有帮助。VM 工作了几个小时，然后我遇到了同样的问题。我再次重新创建了端点。

看起来这是 Azure 问题。有没有人遇到过同样的问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:00:38.803

首先，您使用的是什么操作系统？

然后，如果它是 Linux - 它应该可以工作，那么特定的 VM 实例可能会出现一些问题。

如果是 Windows，除了 Endpoints 之外，您还必须为要从外部访问的端口添加本地防火墙规则。

我从来没有遇到过你的问题，但我总是调整 Windows 机器的防火墙（特别是端口 80，默认情况下允许端口 3389）。

一般来说应该没有问题，但我们都知道这项服务仍然存在，`Preview`并且可能存在与特定数据中心相关的一些问题。因此，如果客户遇到虚拟机服务问题，我经常建议尝试在另一个数据中心创建虚拟机。如果您尝试西欧，请去北欧尝试一下。如果您使用美国中南部，请尝试美国北部等。

# imacros - 我在网站上使用 i-macro 在网站上执行不同的操作

> ID：14884676
> 
> 赞同：0
> 
> 时间：2013-02-14T21:48:33.143
> 
> 标签：imacros

我希望 i-macro 做这样的事情：

1 - 转到特定的 url，例如：[http](http://www.xyz.com) ://www.xyz.com 2 - 如果加载 url 时出错，则执行此操作

标签 POS=1 TYPE=IMG ATTR=SRC: [http://www.xyz.com](http://www.xyz.com)

3 - 否则加载页面

我的问题是我怎样才能完成这项任务

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:35:25.157

由于 imacros 中没有 IF 语句，因此您需要使用 javascript（例如）。代码是这样的：

```
var ret=iimPlay("code:url goto=http://xyz.com");
if (ret<0){
iimPlay("code:TAG POS=1 TYPE=IMG ATTR=SRC:http://www.xyz.com");
}
else{
iimPlay("code:refresh");
} 
```

将其保存为 js 文件并在 firefox imacros 中运行。

# javascript - 如何为 windows8 应用程序制作加载动画

> ID：14884677
> 
> 赞同：0
> 
> 时间：2013-02-14T21:48:34.333
> 
> 标签：javascript, animation, windows-8, loading

我有一个通过 javascript、css 和 html 制作的 windows8 应用程序，它显示一个 rss 提要。有时，加载此提要可能需要 2-10 秒，这对我来说不是问题，但对于需要该应用程序的人来说，他们想知道它正在加载而不是冻结。我有一个动画加载动画 (GIF)，但我不知道如何在 rss 加载它时显示它。有任何想法吗？谢谢你的时间。

这是主要的javascript，

```
(function () {
"use strict";

  WinJS.Binding.optimizeBindingReferences = true;

  var app = WinJS.Application;
  var activation = Windows.ApplicationModel.Activation;
  var articlesList;

  app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }

        articlesList = new WinJS.Binding.List();
        var publicMembers = { ItemList: articlesList };
        WinJS.Namespace.define("C9Data", publicMembers);

        args.setPromise(WinJS.UI.processAll().then(downloadC9BlogFeed));
      }
  };

  function downloadC9BlogFeed() {
    WinJS.xhr({ url: "http://channel9.msdn.com/coding4fun/articles/RSS" }).then(function (rss) {  // this is where it is calling the RSS
      var items = rss.responseXML.querySelectorAll("item");

      for (var n = 0; n < items.length; n++) {
        var article = {};
        article.title = items[n].querySelector("title").textContent;
        var thumbs = items[n].querySelectorAll("thumbnail");
        if (thumbs.length > 1) {
          article.thumbnail = thumbs[1].attributes.getNamedItem("url").textContent;
          article.content = items[n].textContent;
          articlesList.push(article);
        }
      }
    });
  }

  app.oncheckpoint = function (args) {
    // TODO: This application is about to be suspended. Save any state
    // that needs to persist across suspensions here. You might use the
    // WinJS.Application.sessionState object, which is automatically
    // saved and restored across suspension. If you need to complete an
    // asynchronous operation before your application is suspended, call
    // args.setPromise().
  };

  app.start();
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:17:07.583

@mleroy 已经描述了加载它的正确方法。伪代码（CoffeeScript）：

```
downloadC9BlogFeed = () ->
  listView.style.display = 'none'
  placeholderAnimation.style.display = 'block'
  WinJS.xhr(url)
  .then (rss) ->
    items = rss.responseXML.querySelectorAll("item")
    items.forEach (item) ->
       [process the item without having to use items[n] multiple times]
  .then () ->
    placeholderAnimation.style.display = 'none'
    listView.style.display = 'block' 
```

# java - Java 时间计算

> ID：14884680
> 
> 赞同：1
> 
> 时间：2013-02-14T21:48:31.800
> 
> 标签：java

所以我的方法接收一个 24 小时格式的时间（“HH:MM:SS”）并返回一个字符串差时间。如果是当地时间下午 2:00，我应该能够发送它“16:30:00”（下午 4:30）并获得输出“2 小时 30 分钟”。但是代码有一些问题，我只是一个初学者，我需要帮助来修复它。

问题是如果时间是下午 4:40，我发送它“17:00:00”（下午 5:00）它会返回消息：12 小时 20 分钟而不是 0 小时 20 分钟。另一个问题是，如果我在当前时间发送它，它将返回“12 小时”，而不是应该返回的 24 小时。

请记住，我只是 java 的初学者，数学真的不是我的事，所以非常感谢任何帮助。谢谢。

```
private static String timeUntil(String distanceTime) {
String returnMsg = null;
try {
    SimpleDateFormat sdfDate = new SimpleDateFormat("hh:mm:ss");
    Date now = new Date();
    java.text.DateFormat df = new java.text.SimpleDateFormat("hh:mm:ss");
    Date date1 = df.parse(sdfDate.format(now));
    Date date2 = df.parse(distanceTime);
    long diff = date2.getTime() - date1.getTime();
    int timeInSeconds = (int) (diff / 1000);
    int hours, minutes;

    hours = timeInSeconds / 3600;
    timeInSeconds = timeInSeconds - (hours * 3600);
    minutes = timeInSeconds / 60;

    if (hours >= 0) {
    returnMsg = hours + " hours" +
            "\n" + minutes + " mins";
    } else {
    returnMsg = minutes + " mins";
    }
} catch (Exception e) {
    e.printStackTrace();
}
return returnMsg;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T21:58:48.597

在您的日期格式中，`hh`用于*12*小时时间。使用*24*小时时间`HH`：

 *```
new SimpleDateFormat("HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T23:16:55.523

这是一个更健壮并使用 Java 更现代的日期函数的示例。我可以逐点逐条说明您在示例中可以做得更好的所有事情，但有时给您一个好的示例并让您从其他人的代码中收集到最好的代码更容易。

```
import java.util.Calendar;

public class testSpace {
     public static void main (String ... args){
            System.out.println(timeUntil("00:12:12"));      
    }

    private static String timeUntil(String distanceTime){

        String[] times = distanceTime.split(":");

        Calendar now = Calendar.getInstance();

        Calendar then = Calendar.getInstance();
        then.set(Calendar.SECOND, Integer.parseInt(times[2]));
        then.set(Calendar.MINUTE, Integer.parseInt(times[1]));
        then.set(Calendar.HOUR, Integer.parseInt(times[0]) % 12);
        then.set(Calendar.AM_PM,  (Integer.parseInt(times[0]) >= 12 ) ? Calendar.PM : Calendar.AM);

        boolean isFuture = (then.getTimeInMillis() > now.getTimeInMillis());

        long interval = (isFuture)
            ? then.getTimeInMillis() - now.getTimeInMillis()
            : now.getTimeInMillis() - then.getTimeInMillis();

        return ((isFuture) ? "" : "-") + millToTime(interval);
    }

    public static long MILLISECOND_PER_HOUR = 1000*60*60;
    public static long MILLISECOND_PER_MIN = 1000*60;
    public static long MILLISECOND_PER_SECOND = 1000;

    public static String millToTime(long mill){
        long hours  = mill / MILLISECOND_PER_HOUR;
        long mins   = (mill % MILLISECOND_PER_HOUR) / MILLISECOND_PER_MIN;
        long sec    = ((mill % MILLISECOND_PER_HOUR) % MILLISECOND_PER_MIN) / MILLISECOND_PER_SECOND;
        return String.format("%d:%d:%d", hours, mins, sec);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:23:11.987

代码审查意见...

1.  大多数 Date 类的方法已被弃用。您应该考虑使用日历 (GregorianCalendar) 而不是日期。

2.  你的变量名通常没有意义——你必须知道变量的用途才能知道它的意义。如果您使用更好的变量名称，您的代码将更易于维护。df 可以重命名为“格式”或“日期格式”。

3.  您“现在”创建一个日期对象，然后将其传递给您的 df DateFormat 实例，然后通过您的 sdfDate 实例将其转换回日期。这是不必要的。将其替换为`Date date1 = new Date();`并删除`Date now = new Date();`. 同样，我发现在单位之间转换时很难诊断错误，因此您应该更改`diff`以指示它是毫秒，例如`diff_ms`. 并且您应该保持名称一致 - 您从“不同”( `diff`) 更改为“timeInSeconds”。它们都应该是“timeInXxx”或“diff_xx”。`distanceTime`参数应该重命名为`futureTime`

4.  你做了一堆数学来确定两次之间的差异，但是有一些库会为你做这件事。谷歌“两个日期之间的java差异”并找到很多答案。

5.  您的代码始终假定第二次发生在“现在”之后。这应该包含在方法顶部的注释中。

6.  当您实例化 date1 和 date2 时，它们可能都在同一天。尝试在创建对象后立即调试或至少将对象打印到标准输出，以查看是否是这种情况。这是你真正想要的吗？

7.  您的代码不处理闰年。

8.  与其自己处理所有的时间转换，不如寻找一个为您完成转换的库？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T22:41:31.930

这是您的固定代码。我已将日期格式更改为 HH:mm:ss 以及您的计算逻辑。试试看，让我们知道

```
private static String timeUntil(String distanceTime) {
    String returnMsg = null;
    try {
        SimpleDateFormat sdfDate = new SimpleDateFormat("HH:mm:ss");
        Date now = new Date();
        java.text.DateFormat df = new java.text.SimpleDateFormat("HH:mm:ss");
        Date date1 = df.parse(sdfDate.format(now));
        Date date2 = df.parse(distanceTime);
        long diff = date2.getTime() - date1.getTime();
        int timeInSeconds = (int) (diff / 1000);
        int hours, minutes;

        hours = timeInSeconds / 3600;
        timeInSeconds = timeInSeconds - (hours * 3600);
        minutes = timeInSeconds / 60;

        if (hours != 0) {
        returnMsg = hours + " hours" +
                "\n" + minutes + " mins";
        } else {
        returnMsg = minutes + " mins";
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return returnMsg;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-23T22:17:14.663*

# ios6 - 如何在第 4 代 iPod Touch 上拍摄视频版本的屏幕截图？

> ID：14884683
> 
> 赞同：0
> 
> 时间：2013-02-14T21:48:49.153
> 
> 标签：ios6, screenshot, ipod-touch

我想创建自己在 iPod 上进行应用演示的视频，如何创建屏幕截图的视频版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:52:43.803

不幸的是，没有办法拍摄屏幕视频。每次更改屏幕时，您都可以只截取屏幕截图，或者编辑照片以显示您所做的更改。苹果绝对应该创造一种方法来制作屏幕视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T22:25:07.477

没有办法截取视频。但是您始终可以通过同时按下主页按钮和锁定按钮来拍摄视频。祝你好运！

# python - 从使用绑定变量的数据库查询创建熊猫数据框

> ID：14884686
> 
> 赞同：5
> 
> 时间：2013-02-14T21:48:54.083
> 
> 标签：python, sql, database, oracle, pandas

我正在使用 Oracle 数据库。我可以做到这一点：

```
 import pandas as pd
    import pandas.io.sql as psql
    import cx_Oracle as odb
    conn = odb.connect(_user +'/'+ _pass +'@'+ _dbenv)

    sqlStr = "SELECT * FROM customers"
    df = psql.frame_query(sqlStr, conn) 
```

但我不知道如何处理绑定变量，如下所示：

```
 sqlStr = """SELECT * FROM customers 
                WHERE id BETWEEN :v1 AND :v2
             """ 
```

我尝试了这些变化：

```
 params  = (1234, 5678)
   params2 = {"v1":1234, "v2":5678}

   df = psql.frame_query((sqlStr,params), conn)
   df = psql.frame_query((sqlStr,params2), conn)
   df = psql.frame_query(sqlStr,params, conn)
   df = psql.frame_query(sqlStr,params2, conn) 
```

以下作品：

```
 curs = conn.cursor()
   curs.execute(sqlStr, params)
   df = pd.DataFrame(curs.fetchall())
   df.columns = [rec[0] for rec in curs.description] 
```

但这个解决方案只是......不雅。如果可以的话，我想在不创建光标对象的情况下执行此操作。有没有办法只使用熊猫来完成整个事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-30T03:17:29.147

尝试使用`pandas.io.sql.read_sql_query`. 我使用了 pandas 0.20.1 版，我使用了它，它成功了：

```
import pandas as pd
import pandas.io.sql as psql
import cx_Oracle as odb
conn = odb.connect(_user +'/'+ _pass +'@'+ _dbenv)

sqlStr = """SELECT * FROM customers 
            WHERE id BETWEEN :v1 AND :v2
"""
pars = {"v1":1234, "v2":5678}
df = psql.frame_query(sqlStr, conn, params=pars) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:58:03.157

据我所知，pandas 期望 SQL 字符串在传递之前完全形成。考虑到这一点，我会（并且总是）使用字符串插值：

```
params = (1234, 5678)
sqlStr = """
SELECT * FROM customers 
WHERE id BETWEEN %d AND %d
""" % params
print(sqlStr) 
```

这使

```
SELECT * FROM customers 
WHERE id BETWEEN 1234 AND 5678 
```

所以这应该`psql.frame_query`很好。（根据我对 postgres、mysql 和 sql server 的经验，它确实如此）。

# excel - NormSInv VBA excel

> ID：14884694
> 
> 赞同：0
> 
> 时间：2013-02-14T21:49:28.627
> 
> 标签：excel, vba

我有以下代码，它不断给我错误“应用程序定义或对象定义错误。我实际上尝试了该行的一些变体：WS2.Cells(i, 9) = Application.WorksheetFunction.NormSInv(Sheets(" sheet2").Range(i, 7).Value) - Application.WorksheetFunction.NormSInv(Sheets("Sheet2").Range(i, 8).Value) 但每个都给我一个不同的错误。有没有人用这个以前的功能？

代码示例：

```
Sub dPrime()
Dim i As Long
Dim WS2 As Worksheet
Set WS2 = Worksheets("Sheet2")
For i = 2 To Sheets("sheet2").Range("G" & Rows.Count).End(xlUp).Row
     WS2.Cells(i, 9) = Application.WorksheetFunction.NormSInv(Sheets("sheet2").Range(i,     7).Value) - Application.WorksheetFunction.NormSInv(Sheets("Sheet2").Range(i, 8).Value)

Next i
End Sub 
```

数据示例：

```
 0.583333333    0.5
 0.083333333    0.75
 0.25           0.75
 0.416666667    0.75
 0.083333333    0.833333333
 0.416666667    0.75
 0.25           0.5
 0.416666667    0.833333333
 0.583333333    0.833333333
 0.25           0.9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:02:18.820

当您从第 7 列和第 8 列检索值时，您正在使用`Range`应该使用的位置。`Cells`

**更改代码：**

`Sheets("sheet2").Range(i, 7).Value`

**到**

`Sheets("sheet2").Cells(i, 7).Value`

也是如此`Range(i, 8).Value`。调试此类不明显问题的一种好方法是尽可能创建单独的变量，以*准确*查看问题所在并将其隔离。像这样：

```
Sub dPrime()
    Dim i As Long
    Dim WS2 As Worksheet
    Set WS2 = Worksheets("Sheet2")

    Dim firstCellVal As String
    Dim secondCellVal As String
    Dim firstNormsResult As Double
    Dim secondNormsResult As Double

    firstCellVal = Sheets("sheet2").Cells(i, 7).Value   'add breakpoint here and start stepping through
    secondCellVal = Sheets("sheet2").Cells(i, 8).Value
    firstNormsResult = Application.WorksheetFunction.NormSInv(firstCellVal)
    secondNormsResult = Application.WorksheetFunction.NormSInv(secondCellVal)

    For i = 2 To Sheets("sheet2").Range("G" & Rows.Count).End(xlUp).Row
     WS2.Cells(i, 9) = firstNormsResult - secondNormsResult
    Next i

End Sub 
```

# iis - Powershell 获取在远程 Windows 2000 服务器上的 IIS 下运行的站点列表？

> ID：14884696
> 
> 赞同：0
> 
> 时间：2013-02-14T21:49:50.353
> 
> 标签：iis, powershell

我有一个旧的 Windows 2000 服务器，它托管了几个网站。我想记录站点信息，以便将它们移动到新的 Windows 2008 R2 服务器。

我可以使用 Get-Item IIS:\sites 命令在较新的服务器上获取我想要的信息。

获取项目 IIS:\Sites

那么如何使用 Powershell 从旧的 Win2K 服务器获取这些信息呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:52:00.360

不幸的是，您无法使用 WebAdministration 模块从 Win2k 框中枚举网站，无论是否远程。但是，总是有[WMI 查询。](http://msdn.microsoft.com/en-us/library/ms525265%28v=vs.90%29.aspx)

如果您对迁移感兴趣，我会查看[WebDeploy](http://www.iis.net/downloads/microsoft/web-deploy) ，它有很好的文档记录。

# visual-studio-2010 - 用 C 编码时的 Visual C++ 代码完成

> ID：14884703
> 
> 赞同：0
> 
> 时间：2013-02-14T21:50:30.920
> 
> 标签：visual-studio-2010, visual-studio, visual-c++

当我使用 Visual C++ 制作 C++ 程序时，当我指定一个命名空间时，我会看到自动完成弹出窗口`std::`

当我使用这个 IDE 在 C 中编码时，我想要一个类似的功能，但是由于 C 没有命名空间，所以在我键入时自动完成不会自动弹出，除非我点击`Ctrl+J`.

`#include`它仅在我想使用该指令包含文件时弹出。

有没有办法为 C 启用此功能，或者 IDE 完全没有它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T10:22:50.227

试试**Visual Assist** X。它可以处理 // 代码的代码`C`自动完成`C++`。`C#`

# ruby-on-rails - 如何让 Rails build 和 fields_for 只创建新记录而不包括现有记录？

> ID：14884704
> 
> 赞同：32
> 
> 时间：2013-02-14T21:50:43.577
> 
> 标签：ruby-on-rails

我正在使用`build`、`fields_for`和`accepts_nested_attributes_for`在与新注册相同的表单上创建新注册说明（有许多注册说明）。伟大的。

问题：在现有注册的编辑表单上，我希望创建另一个新的注册说明，但我不想看到每个现有注册说明的字段。

我有这个

```
class Registration < ActiveRecord::Base
  attr_accessible :foo, :bar, :registration_notes_attributes
  has_many :registration_notes
  accepts_nested_attributes_for :registration_notes
end 
```

还有这个

```
class RegistrationsController < ApplicationController
  def edit
    @registration = Registration.find(params[:id])
    @registration.registration_notes.build
  end
end 
```

在我看来，我正在这样做：

```
<%= form_for @registration do |r| %>
  <%= r.text_field :foo %>
  <%= r.text_field :bar %>
  <%= r.fields_for :registration_notes do |n| %>
    <%= n.text_area :content %>
  <% end %>
<% end %> 
```

*它正在为新的注册说明（好）和*该注册的每个现有注册说明（不，谢谢）创建一个空白文本区域。

有没有办法只为该注册创建一个新的注释，而不管现有的？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-14T22:14:29.530

**编辑**：我之前的回答（见下文）困扰着我，因为它不是很好（它仍然`registration_notes`不必要地循环遍历所有其他的）。在阅读了更多 API 之后，获得 OP 想要的行为的最佳方法是替换：

```
<%= r.fields_for :registration_notes do |n| %> 
```

和：

```
<%= r.fields_for :registration_notes, @registration.registration_notes.build do |n| %> 
```

`fields_for`可选地接受第二个参数，它是传递给构建器的特定对象（[参见 API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)），它是内联构建的。在控制器中而不是在表单中创建和传递新注释实际上可能更好（只是将逻辑移出视图）。

* * *

*原始答案（我是如此接近）：*

澄清一下，您希望您的编辑表单包含一个新的嵌套注册说明（并忽略任何其他现有的）？我没有对此进行测试，但是您应该可以通过替换来做到这一点：

```
 <%= r.fields_for :registration_notes do |n| %> 
```

和：

```
 <%= r.fields_for @registration.registration_notes.build do |n| %> 
```

**编辑**：好的，通过我自己的快速测试不起作用，但你可以这样做：

```
<%= r.fields_for :registration_notes do |n| %>
  <%= n.text_area :content if n.object.id.nil? %>
<% end %> 
```

这只会在注册说明的 id 为 nil 时添加文本区域（即尚未保存）。

另外，我实际上首先对此进行了测试，并且确实有效；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T22:04:50.530

如果你想在你的编辑操作上创建一个新的注册表单，你可以实例化一个新的 registration_note 对象。现在，您的表单适用于现有的注册对象。

我相信这就是你想要的：

```
class RegistrationsController < ApplicationController
  def edit
    @new_registration_note = RegistrationNote.new
    @registration = Registration.find(params[:id])
    @registration.registration_notes.build
  end
end 
```

在您看来，您应该传递一个引用注册记录 id 的隐藏参数：

```
<%= form_for @new_registration_note do |r| %>
  <%= r.hidden_field :registration_id, :value => @registration.id  %>
  <%= r.text_area :content  %>
<% end %> 
```

现在，您可以创建**属于** `@registration`. 确保您的`registration_notes`表格中有一个列指向注册。您可以在此处阅读有关关联的更多信息：http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-10T17:20:23.930

非常感谢您的帮助，正如我在帖子中所说的那样，“Zaid Crouch”（我不知道如何引用用户呵呵）的方法的唯一问题是，如果表单有错误字段，则表单页面重新加载后会变得清晰和繁荣，您的表单中不会填写任何内容，您能想象如果您的表单是 20 或 30 个字段，那当然会是糟糕的用户体验

这是我适用于验证模型的解决方案：

```
class Registration < ActiveRecord::Base
  attr_accessible :foo, :bar, :registration_notes_attributes
  has_many :registration_notes
  has_one :new_registration, class_name: 'RegistrationNote'
  accepts_nested_attributes_for :new_registration
end

class RegistrationsController < ApplicationController
  def edit
   @registration = Registration.find(params[:id])
   @registration.build_new_registration
  end
end

<%= form_for @registration do |r| %>
  <%= r.text_field :foo %>
  <%= r.text_field :bar %>
  <%= r.fields_for :new_registration do |n| %>
    <%= n.text_area :content %>
  <% end %>
<% end %> 
```

我在我的示例中使用 simple_form，如果您想看到与验证和事务相同的工作，请查看此处的完整帖子：http: [//elh.mx/ruby/using-simple_form-for-nested-attributes-models -in-a-has_many-relation-for-only-new-records/](http://elh.mx/ruby/using-simple_form-for-nested-attributes-models-in-a-has_many-relation-for-only-new-records/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-13T11:32:59.610

正如 Heriberto Perez 正确指出的那样，如果其中一个字段出现验证错误，最受好评的答案中的解决方案将简单地丢弃所有内容。

我的方法与 Heriberto 的方法类似，但还是有点不同：

模型：

```
class Registration < ActiveRecord::Base
  has_many :registration_notes
  accepts_nested_attributes_for :registration_notes

  # Because 0 is never 1 this association will never return any records.
  # Above all this association don't return any existing persisted records.
  has_many :new_registration_notes, -> { where('0 = 1') }
                                  , class_name: 'RegistrationNote'
  accepts_nested_attributes_for :new_registration_notes
end 
```

控制器：

```
class RegistrationsController < ApplicationController
  before_action :set_registration

  def edit        
    @registration.new_registration_notes.build
  end

  private

  def set_registration
    @registration = Registration.find(params[:id])
  end

  def new_registration_params
    params.require(:registration).permit(new_registrations_attributes: [:content])
  end
end 
```

看法：

```
<%= form_for @registration do |r| %>
  <%= r.text_field :foo %>
  <%= r.text_field :bar %>
  <%= r.fields_for :new_registration_notes do |n| %>
    <%= n.text_area :content %>
  <% end %>
<% end %> 
```

# php - 如何找到发货的最佳仓库位置？

> ID：14884710
> 
> 赞同：1
> 
> 时间：2013-02-14T21:50:56.753
> 
> 标签：php, mysql, geolocation

我有以下问题要解决。我们希望从美国各地的多个仓库运送产品。让我们假设这些仓库的产品总是有库存。当有人下订单时，我想选择最好的仓库发货，以最大限度地减少运输成本和运输时间。

什么是自动测量可能仓库和送货地址之间的距离并选择离客户最近的仓库的好的解决方案？我正在寻找更理论的答案，但如果有帮助，目标平台是基于 PHP + MySQL 的在线商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:55:20.147

一个选项 - 查找具有每个邮政编码的地理位置的服务。然后使用半正弦或大圆距离计算来查看哪个位置更近。

另一种选择 - 蛮力。创建一个将仓库链接到目标邮政编码的表 - 然后填充它并查询正确的仓库。我可能更喜欢这个，因为运输成本可能不是简单的距离计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:59:15.730

因为您是在公路上旅行，所以您不能简单地使用算法来计算两个 GPS 点的直线距离。

如果您将大量货物发送到数量有限的目的地，您可以手动创建距离数据库。

如果这些是前往很多目的地的少量货物，请使用[Google Maps API](https://developers.google.com/maps/)或查看[OpenStreetMap](http://wiki.openstreetmap.org/wiki/Routing)以获取类似信息。

# javascript - 谷歌电子表格脚本。只为一张纸工作

> ID：14884717
> 
> 赞同：0
> 
> 时间：2013-02-14T21:51:20.743
> 
> 标签：javascript, google-apps-script, google-sheets

我有在网上找到的这段代码，它可以根据需要工作，但如果你想调用它们，它适用于我的所有工作表或底部的选项卡。我想让它工作

```
function onEdit(event) 
{
    var sheet = event.source.getActiveSheet();
    var eventRange = event.source.getActiveRange();
    var eventColumn = eventRange.getLastColumn();

    if (eventColumn == 1) 
    {
      var stampRange = eventRange.offset(0,10);
      stampRange.setValue(new Date());

    }
} 
```

这是原始代码，我尝试在下面的第 4 行添加，但我无法让它工作。我没有使用 javascript 的经验，但我需要你的帮助，因为我正在尽力而为。谢谢你。

`if(sheet.match(/*.13/)){`

这是我添加的行。根据我在网上的阅读，该脚本仅在工作表名称以 13 结尾时才有效。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T01:48:37.777

You've got the right idea, but `sheet` is a Sheet Object, while `.match()` is a String method. Use the `Sheet.getSheetName()` method to get the name of the sheet (the words on the tab).

In an `onEdit()`, you usually want to bail out without investing much processing time, so you should put the test for the sheet name as early as possible.

If you want to match `"Sheet13"` exactly, you should test for just that - because your regex will also match "Apollo13" and "a13a", for example.

```
function onEdit(event) 
{
    var sheetName = event.source.getActiveSheet().getSheetName();

    if (sheetName.match(/.13/) == null)
      // These aren't the droids you're looking for...
      return;

    var eventRange = event.source.getActiveRange();
    var eventColumn = eventRange.getLastColumn();

    if (eventColumn == 1) 
    {
      var stampRange = eventRange.offset(0,10);
      stampRange.setValue(new Date());

    }
} 
```

# jquery - JSON 和 jQuery 交换 json

> ID：14884719
> 
> 赞同：1
> 
> 时间：2013-02-14T21:51:23.013
> 
> 标签：jquery, html, json

我有一个用户可以输入的输入字段。我试图弄清楚如何使对 json 的调用成为动态的。所以如果这个人输入了printer1，它将使用printer1.json。如果他们输入keyboard5，它将加载keyboard5 json。

这是我的html

```
<input type="text" value="" class="call-json edit-device" /> 
```

这是我的 jQuery

```
 $.getJSON('json/printer1.json', function (data) {

        var items = [];
        $.each(data[0].attributes['edgebox.stat.prop.type'], function (key, val) {
            items.push(val);
        });
        displaySortLabel(items, "type-details");

        var items = [];
        $.each(data[0].attributes['edgebox.stat.prop.serial.number'], function (key, val) {
            items.push(val);
        });
        displaySortLabel(items, "serial-number-details"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:57:36.583

您可以收听该`keyup`事件。

```
var timeout = '';
$('.call-json').keyup(function(){
    clearTimeout(timeout);
    var val = this.value;
    timeout = setTimeout(function(){
        $.getJSON('json/'+val+'.json', function (data) {
           // ...
        });       
    }, 80);
}) 
```

# c# - 连接到 WAMP 服务器

> ID：14884720
> 
> 赞同：2
> 
> 时间：2013-02-14T21:51:23.153
> 
> 标签：c#, wcf, visual-studio, wamp

我最终试图通过 WAMP 服务器上的 C#（使用 Visual Studio）访问 mysql 数据库。我在 localhost:81 上运行 WAMP 服务器，并尝试使用以下命令连接到服务器：

```
string address = "http://localhost:81";
HostProxy = new ServiceHost(typeof(Server), new Uri(address)); 
```

但是我得到了一个，所以我按照[这里](http://blogs.msdn.com/b/amitlale/archive/2007/01/29/addressaccessdeniedexception-cause-and-solution.aspx)`AddressAccessDeniedException`的说明保留了地址。

但现在我得到了一个，`AddressAlreadyInUseException`因为地址被保留了。

我以管理员身份运行 Visual Studio。我已经检查过 WAMP 服务器正在运行，它确实在运行。

# objective-c - XCode 在没有 UI 的 iPhone 应用程序的错误测试中使用 scanf()

> ID：14884726
> 
> 赞同：1
> 
> 时间：2013-02-14T21:51:46.693
> 
> 标签：objective-c, c, xcode, console, scanf

我创建了一个在后端处理大量逻辑的对象。为了能够与这个对象进行交互，我最终将创建一个 UIViewController 和漂亮的 UI，它将向它发送它认为合适的方法调用。然而，在那之前，我想在一个真实的环境中对逻辑进行错误测试。

是否可以在 XCode 的控制台中使用 scanf() 来获取键盘输入？

我曾尝试调用 scanf() 但似乎应用程序只是跳过调用并保留所需的变量输入，因为它的声明值创建了一个无限循环。

我的代码：

```
int active = 1;

do 
{
    int x, y;
    printf("Enter X Coordinate: ");
    scanf("%d", &x);
    printf("\n");
    printf("Enter Y Coordinate: ");
    scanf("%d", &y);
    printf("\n");

    //Obj-C object method calls 

    //if meets condition: active--;
} 
while (active); 
```

有任何想法吗？甚至有可能我正在尝试做什么？

我正在通过 XCode 的模拟器而不是终端运行代码（如果这是问题所在，好吧，但如果你认为通过终端而不是模拟器运行比保持你自己的意见更好）*。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:12:27.630

您不能`scanf()`与 iOS 应用程序一起使用。

或者你可以让你输入

1.  从文件中读取。
2.  使用调试器
3.  制作一个快速的 GUI
4.  在命令行应用程序中测试您的后端

# javascript - 在 ExtJs 中为多个控制器绑定事件

> ID：14884731
> 
> 赞同：5
> 
> 时间：2013-02-14T21:52:10.800
> 
> 标签：javascript, extjs, dom-events, extjs4.1

我已经组装了一个大小适中的应用程序，并且正在分解代码以减少维护行的总数以及性能调整。让我发布此问题的用例是，我在菜单中嵌入了一个按钮，该按钮调用（或需要调用）显示表单的控制器上的方法。目前这是使用对特定按钮控件的直接引用、创建面板并将该面板放在我的视口中来实现的。

问题在：[ExtJS 4.1 Call One Controller From another](https://stackoverflow.com/questions/12065926/extjs-4-1-call-one-controller-from-another)开始解决响应结束时的最佳实践问题，但并没有真正解决可以复制或扩展以涵盖更复杂实现的基本案例（其中是我的问题的目的。）

给定两个控制器：

### 一个“主菜单”控制器。

```
// controller/Menu.js
Ext.define("App.controller.Menu", {
    extend: "Ext.app.Controller",
    init: function () {
        this.control({
            "viewport > mainmenu > button": function (ctl, evt) {
            }
        });
    }
}); 
```

### 用户帐户控制器

```
// controller/User.js
Ext.define("App.controller.User", {
    extend: "Ext.app.Controller",
    stores: ["User"],
    views: ["user.Edit", "user.List"],
    init: function () {
    }
}); 
```

### 问题

在两个控制器之间实现交叉连接以正确委派响应“创建新帐户”菜单按钮上的单击事件的责任的（最佳）方法是什么？

### 一种可能的解决方案

使用 componentquery，我可以使用标记属性*轻松*缩小主菜单视图中按钮的焦点，以便用户控制器直接响应事件：

```
// controller/User.js
"viewport > mainmenu > button [tag=user.create]": function () {} 
```

### 未知的替代品

或者我可以通过对象图筛选我的方式来从菜单控制器中找到对用户控制器的引用并以这种方式调用它。

```
// controller/Menu.js
// switch on tag case "user.create"
App.controller.User.createUserForm() 
```

### 真正的问题

所有这些导致的问题是这里“最可接受”的解决方案是什么。可以想象使用第三个中介控制器将请求从控件“路由”到控制器，但我认为这与框架的其余部分试图做的事情背道而驰。使用这两种方法中的任何一种的变体目前都有效，但是感觉都不是完全干净和可靠的；或最终可长期维护（因为代码传播得相当快。）此外，我们想到要进入原始事件，但我们在那里遇到了同样的可维护性问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:01:03.260

一些短线：

我不明白的一件事是，Sencha Touch 有路​​由但没有事件总线，而 ExtJS 有事件总线但没有路由......（还有更多 MVC 实现不同的点）无论如何，因为我大部分时间都在使用 ExtJS我创建自定义路由来填补这个空白的时间。也许 sencha 会在版本 5 中添加这个。

*   **最简单快捷的解决方案：**使用控制器的 来从您`getController()`的`Ext.app.Application`菜单控制器调用负责的控制器。
*   **（imo）最佳解决方案：**为自己编写一个路由器，每个控制器注册它的路由并使用两者；路由和事件总线。如果您的应用程序具有多个开发团队使用的共享组件，这将非常方便。

# c# - 为地图查看器添加多个复选框

> ID：14884735
> 
> 赞同：0
> 
> 时间：2013-02-14T21:52:40.947
> 
> 标签：c#, winforms, dynamic

我创建了一个结构列表，每个结构都有一些属性。我的意图是使用一个基本的 10x10 地图来练习/学习为我正在为其开发工具的游戏编写 A* 搜索算法。我的地图结构基本上是一个 Tile 对象数组，每个对象都具有以下属性：

```
 public struct Tile
    {
        public int x { get; set; }
        public int y { get; set; }
        public int cost { get; set; }
        public bool walkable { get; set; }
    } 
```

我也有一个节点结构，虽然它与这个问题无关，真的，我会发布它，以防有人对我大喊大叫：

```
 public struct Node
    {
        public int x { get; set; }
        public int y { get; set; }
        public int total { get; set; }
        public int cost { get; set; }
        public Tile parent { get; set; }
    } 
```

我的表单加载事件看起来像这样：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        CheckBox[] chbs = new CheckBox[100];
        for (int x = 0; x < 10; x++)
        {
            for (int y = 0; y < 10; y++)
            {
                Map = new Structs.Tile[100];
                Map[x + y].x = x;
                Map[x + y].y = y;
                Map[x + y].cost = 100;
                Map[x + y].walkable = true;
                //MessageBox.Show(Convert.ToString(Map[x + y].x) + " : " + Convert.ToString(Map[x + y].y));
                if ( x == 5 )
                {
                    if (y == 4 | y == 5 | y == 6)
                    {
                        Map[x + y].walkable = false;
                    }
                }
            }
        }
        int i = 0;
        foreach (Structs.Tile tile in Map)
        {
            CheckBox chb = new CheckBox();
            chb.Location = new Point(tile.x * 20, tile.y * 20);
            chb.Text = "";
            chbs[i] = chb;
            i++;
        }
        this.Controls.AddRange(chbs);
    } 
```

我事先声明了这一点，通过这个类在全球范围内使用：

```
Structs.Tile[] Map; 
```

问题是，为什么这只添加了 2 个复选框？对于位于 X: 0, Y: 0, X: 1, Y: 1 的位置，似乎将它们添加到大约正确的位置，但没有添加其他位置？我已经将表格扩大到荒谬的尺寸，但仍然没有。我完全被它弄糊涂了。

结果如下，乘数分别设置为 2：

![显示问题的测试程序屏幕截图](../Images/bddef4a0880ef8b55081f78d2cb01821.png)

我相信我已经正确设置了它，但我无法弄清楚它为什么不起作用。我可以理解表格是否冻结，但事实并非如此，并且将值设置为愚蠢的高值（100+）并没有任何区别。WinForms 中的偏移量表明乘数需要大约为 12...

像往常一样，任何建议都非常受欢迎。我也会尽快在这里回答一些问题，因为我从你们这些了不起的人那里学到了很多东西！

谢谢！

修改后的表单加载：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        int ind = 0;
        CheckBox[] chbs = new CheckBox[100];
        Map = new Structs.Tile[100];
        for (int x = 1; x < 11; x++)
        {
            for (int y = 1; y < 11; y++)
            {
                Map[ind].x = x;
                Map[ind].y = y;
                Map[ind].cost = 100;
                Map[ind].walkable = true;
                //MessageBox.Show(Convert.ToString(Map[x + y].x) + " : " + Convert.ToString(Map[x + y].y));
                if ( x == 5 )
                {
                    if (y == 4 | y == 5 | y == 6)
                    {
                        Map[ind].walkable = false;
                    }
                }
                ind++;
            }
        }
        int i = 0;
        foreach (Structs.Tile tile in Map)
        {
            CheckBox chb = new CheckBox();
            chb.Location = new Point(tile.x * 12, tile.y * 12);
            chb.Text = "";
            chbs[i] = chb;
            i++;
        }
        this.Controls.AddRange(chbs);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:10:43.153

答案是我每次进入血腥循环时都在重置数组。呸，这下太晚了！

感谢所有看过/考虑过的人！

# html - CSS填充同时保持定义的大小？

> ID：14884739
> 
> 赞同：1
> 
> 时间：2013-02-14T21:52:52.060
> 
> 标签：html, css, padding

根据标准，在 CSS 中向 HTML 元素添加填充将使元素按定义的数量增长。例如：

```
.elem {
  width: 100px;
  height: 100px;
  padding: 20px;
} 
```

将向 .elem 的边添加 20 像素，导致*实际*宽度和高度总计为 140 像素。

由于这在网页设计中实际上是非常不切实际的（必须计算并跟踪结果大小），我想知道是否可以反过来做。我设置了一个填充，内部文本区域反而缩小了。所以元素保持在 100*100px，内部有 20px 的填充，我不必担心在试验填充时会弄乱我的设计。

这可能吗？也许通过一种编译成 CSS 的语言（还没有研究那么多）？也许还有一个更小的问题：为什么它首先会以这种方式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:55:18.373

使用`box-sizing`：

```
elemSelector {
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

该属性的值声明元素的声明大小将包括`border`和`padding`。

参考：

*   [`box-sizing`在：'CSS 基本用户界面模块第 3 级（CSS UI）'](http://dev.w3.org/csswg/css3-ui/#box-sizing)。
*   [`box-sizing`在 MDN 上](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:01:47.247

目前不可能执行您所追求的。在尝试定义 css 'width' 值之前，您必须考虑总宽度的填充。有关这方面的更多信息，请参阅[CSS 盒子模型](http://www.w3schools.com/css/css_boxmodel.asp)。这是保证在所有支持 Web 的设备（CSS3 兼容和不兼容）中正确调整大小的唯一方法。

# c# - DropDownListFor 报告类型不匹配

> ID：14884741
> 
> 赞同：0
> 
> 时间：2013-02-14T21:52:55.103
> 
> 标签：c#, asp.net, asp.net-mvc

模型：

```
 [Required(ErrorMessage = "You must assign this user a role")]
    [Display(Name = "Role")]
    public string UserRole { get; set; }

    public IEnumerable<System.Web.Mvc.SelectListItem> UserRoles { get; set; } 
```

控制器：

```
 public ActionResult CreateNewUser()
    {
        CreateNewUserModel model = new CreateNewUserModel();
        model.UserRoles = new []
        {
            new SelectListItem{Value="Administrator", Text="Administrator"},
            new SelectListItem{Value="User", Text="User"}
        };
        //model.UserRole = "Administrator";
        return View(model);
    } 
```

看法：

```
 @Html.DropDownListFor(x => x.UserRole, Model.UserRoles,"Select a role")
    @Html.ValidationMessageFor(x=>x.UserRole) 
```

加载创建新用户的页面时，我有一个异常说明`UserRole must be of type IEnumerable<SelectList>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:00:14.030

尝试改变：

```
model.UserRoles = new []
    {
        new SelectListItem{Value="Administrator", Text="Administrator"},
        new SelectListItem{Value="User", Text="User"}
    }; 
```

至：

```
model.UserRoles = List<SelectListItem>
    {
        new SelectListItem{Value="Administrator", Text="Administrator"},
        new SelectListItem{Value="User", Text="User"}
    }; 
```

# java - 在具有未知元素的矩阵中查找列的平均值

> ID：14884743
> 
> 赞同：0
> 
> 时间：2013-02-14T21:53:05.770
> 
> 标签：java, eclipse, matrix

任何人都可以帮我处理我的代码吗？我必须找到矩阵中每一列的平均值，但我不知道我的代码有什么问题，因为它不起作用。这是我的代码：（顺便说一句，它没有显示错误，我不得不输入数字使用 JOptionPane，感谢您的帮助）

```
import javax.swing.JOptionPane;
public class Matrix {
    private static final int String = 0;

    public static void main(String[] args) {
        double[] numbers = new double[10]; // 10 doubles
        double sum = 0.0;

        for (int i = 0; i < numbers.length; ++i) {    
            sum += numbers[i];
            String input = JOptionPane.showInputDialog("Enter a number");
            double d = Double.parseDouble(input);
            double avg = 0.0;
            avg = sum/numbers[i];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:54:20.470

您永远不会为`numbers`数组分配任何数字，因此它们都默认为 0。

尝试：

```
numbers[i] = Double.parseDouble(input);
double avg = 0.0;
sum += numbers[i];
avg = sum / (i + 1); // (i + 1) is the number of inputted numbers 
```

# c# - 创建没有设计器的 winform 用户控件

> ID：14884745
> 
> 赞同：4
> 
> 时间：2013-02-14T21:53:14.447
> 
> 标签：c#, winforms

如何创建没有 GUI 或设计器附件的 WinForms 用户控件？一个例子就像 Timer Control，你把它放到你的表单上，它停靠在底部，但没有任何 GUI 控件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:58:07.393

你需要使用`System.ComponentModel.Component`as `base class`。

例子 ：

```
class Class1 : System.ComponentModel.Component
{

} 
```

![Class1 是一个组件！](../Images/40b78b7d46c4919ce5fd01f29c5f4689.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:55:02.420

创建一个继承自 System.Windows.Forms.Control 的类。这应该将图标从正常的“类”图标更改为解决方案资源管理器中的“组件”图标。如果创建一个类并从 TextBox 或 Timer 继承，您可以看到这种效果

# clojure - Clojure 宏和引号

> ID：14884746
> 
> 赞同：3
> 
> 时间：2013-02-14T21:53:12.727
> 
> 标签：clojure

我正在尝试“获取”clojure 宏并`are`根据现有`are`宏编写宏的调整版本。我想要的调整是有签名`[argv expr args]`而不是`[argv expr & args]` 所以我试过了

```
(defmacro are2 [argv expr args] `(clojure.test/are ~arg ~expr ~@args)) 
```

哪种有效，除了它需要一个未引用的列表：

```
(are2 [input] (= 0 input) (1 2 3)) 
```

我宁愿期待一个引用列表：

```
(are2 [input] (= 0 input) '(1 2 3)) 
```

但这会导致：

```
Unable to resolve symbol: quote in this context. 
```

如果我尝试

```
(are2 [input] (= 0 input) (list 1 2 3)) 
```

而是将`list`其本身作为测试用例进行处理。

我有什么不明白/我怎样才能超越我的宏中的报价

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T22:20:02.767

`'(1 2 3)`正在扩展到`(quote (1 2 3))`其中有一个额外的`quote`符号和一个太多级别的列表，您可以使用 macroexpand-1 看到：

```
user> (macroexpand-1 '(are2 [input] (= 0 input) '(1 2 3)))
(clojure.test/are [input] (= 0 input) quote (1 2 3)) 
```

您可以通过首先将其包装为 int 并休息来从列表中删除报价

```
 user> (defmacro are2 [argv expr args] 
          `(clojure.test/are ~argv ~expr ~@(first (rest args))))
#'user/are2
user> (macroexpand-1 '(are2 [input] (= 0 input) '(1 2 3)))
(clojure.test/are [input] (= 0 input) 1 2 3) 
```

然后作为测试运行：

```
user> (are2 [input] (= 0 input) '(1 2 3)

FAIL in clojure.lang.PersistentList$EmptyList@1 (NO_SOURCE_FILE:1)
expected: (= 0 1)
  actual: (not (= 0 1))

FAIL in clojure.lang.PersistentList$EmptyList@1 (NO_SOURCE_FILE:1)
expected: (= 0 2)
  actual: (not (= 0 2))

FAIL in clojure.lang.PersistentList$EmptyList@1 (NO_SOURCE_FILE:1)
expected: (= 0 3)
  actual: (not (= 0 3))
false 
```

# c# - 雅虎 smtp 发送电子邮件时出错

> ID：14884747
> 
> 赞同：0
> 
> 时间：2013-02-14T21:53:19.537
> 
> 标签：c#

[我通过这篇文章](http://help.yahoo.com/kb/index?locale=en_JO&y=PROD_MAIL_ML&page=content&id=SLN4666)将我的 Outlook 2010 配置 为从 yahoo.com 发送和接收电子邮件，它运行良好，没有任何问题。

我开发了一个小应用程序来通过我的应用程序发送我的电子邮件，但它给了我错误：

```
"unable to read data from the transport connection:an exist connection was 
 forcibly closed by the remote host." 
```

我的代码：

```
 try
        {

            SmtpClient smtp = new SmtpClient("smtp.mail.yahoo.com", 465);
            smtp.UseDefaultCredentials = true;
            smtp.EnableSsl = true;
            smtp.Credentials = new System.Net.NetworkCredential("myid", "mypass");

            smtp.DeliveryMethod = SmtpDeliveryMethod.Network;

            MailMessage mailMessage = new MailMessage();
            mailMessage.From = new System.Net.Mail.MailAddress("myid@yahoo.com", "blabla");
            mailMessage.To.Add(new System.Net.Mail.MailAddress("xxx@live.com", "xxx@live.com"));
            mailMessage.Subject = "test";
            mailMessage.Body = "test";
            mailMessage.IsBodyHtml = false;

            mailMessage.SubjectEncoding = System.Text.Encoding.UTF8;
            mailMessage.BodyEncoding = System.Text.Encoding.UTF8;

            mailMessage.Priority = MailPriority.High;

            smtp.Send(mailMessage);

            Console.WriteLine("hooooooooooraaaaaaaaaaaaaaa");
            Console.ReadKey();
        }
        catch (Exception err)
        {

            Console.WriteLine(err.InnerException.Message);
            Console.ReadKey();
            return;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:57:57.583

[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.usedefaultcredentials.aspx)

> 某些 SMTP 服务器要求在服务器代表客户端发送电子邮件之前对客户端进行身份验证。如果服务器请求此 SmtpClient 对象应使用当前登录用户的默认凭据进行身份验证，则将此属性设置为 true。对于客户端应用程序，这是大多数情况下所需的行为。

向`UseDefaultCredentials = true`SMTP 服务器发送当前登录用户（即 Windows 用户）的凭据，而不是您定义的凭据。尝试`UseDefaultCredentials = false`

# jquery - PJAX javascript独立无法在ajax加载后执行jQuery

> ID：14884749
> 
> 赞同：0
> 
> 时间：2013-02-14T21:53:28.053
> 
> 标签：jquery, pjax

我正在使用在这里找到的独立版本的 PJAX：[https ://github.com/thybag/PJAX-Standalone](https://github.com/thybag/PJAX-Standalone)

它工作得很好，jQuery-PJAX 对我不起作用，因此是独立使用。现在，问题是什么；

将内容加载到我的 id 为 div 的完成后，`pageContent`里面的内容具有 jQuery 样式的元素。这些元素不会呈现，因为 jQuery 在完成时不会被触发。

有什么方法可以做到这一点？[这个 SO 主题](https://stackoverflow.com/questions/5358003/run-jquery-ready-block-again-after-ajax-loaded)有助于 jQuery 版本。我想知道是否有任何方法可以在独立版本中实现这一点？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T23:07:41.817

Assuming your trying to get a bit of code to run every time a page is loaded in by PJAX, you're best bet is probably to make use of either the complete or success callback.

Something like:

```
pjax.connect({
    'container': 'pageContent',
    'complete': function(e){ 
        // Whatever jQuery code you want to apply to #pageContent here
        $("#pageContent").find('a').addClass("link");
    },
}); 
```

# c - 当我的系统缺少 GTK 头文件时，编译后的 c 程序如何执行？

> ID：14884750
> 
> 赞同：1
> 
> 时间：2013-02-14T21:53:32.313
> 
> 标签：c, gtk

我正在尝试编译一个需要 GTK 头文件的简单 ANSI C 程序。

我知道在使用 GCC 编译时如何将源代码与 gtk.h 链接。

我的问题是考虑到 GTK 头文件丢失，我的系统上如何运行诸如 gedit (GTK lib) 之类的应用程序？据推测，Gedit 是在具有 GTK 库的系统上编译的。但是为什么 Gedit 在执行过程中不需要我系统上的头文件呢？

作为编译程序的 Java 程序员，类文件总是必须与主可执行文件一起打包。我还需要在目标系统上安装 JVM。

感谢您的有用回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T21:56:13.657

> 但是为什么 Gedit 在执行过程中不需要我系统上的头文件呢？

**只有在预处理阶段**才需要头文件。一旦预处理器完成了它们，编译器甚至不会看到它们。显然，目标系统也不需要它们来执行（同样不需要 .c 文件）。

您可能正在考虑图书馆，**您是对的**。确实：如果一个程序是动态链接的，而目标环境没有必要的库，在正确的地方，正确的版本**，它就不会运行**。确保它可以在大多数系统上运行的一种方法是静态链接内容，但这也会使您的可执行文件膨胀并减少对内存的使用。

> 我还需要在目标系统上安装 JVM。

好吧，对于 C 来说，不需要这样的东西，因为一旦你编译它，你就会得到**本机代码**。本机代码与您从 java 获得的中间内容（字节码）非常不同。不需要像解释器这样的东西：你只需将二进制文件提供给 CPU，它就会完成它的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T21:54:55.923

可执行文件需要的头文件中的所有内容在编译时都内置到可执行文件中。在 C 中，头文件只是在引用然后编译时直接包含在源文件中。

# php - 如何将 apache 上的某些文件限制为经过身份验证的用户？

> ID：14884753
> 
> 赞同：0
> 
> 时间：2013-02-14T21:53:39.950
> 
> 标签：php, apache, security, authentication, post

在使用普通的、基于 cookie 的身份验证且密码存储在 cookie 中的站点中，有没有办法只为已经登录的用户提供文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:58:42.153

简短的回答：没有。

长答案：您可以编写一个经过身份验证的应用程序，用户必须登录，然后应用程序管理标题的编译以及用户访问给定文件的其他内容。例如，如果您的用户需要下载 PDF 或其他内容，您可以发送 pdf 标题，然后发送二进制数据；他们将无法看到您正在提供的服务器上的文件。缺点是这比从文件系统或 CDN 推送文件要慢。

另外，不要将密码存储在 cookie 中。创建一个哈希或您可以再次访问和验证的东西，但是 cookie 中的密码只是一个坏主意；那些家伙是明文！

# audio - 媒体时间线应用程序如何在后台工作？

> ID：14884763
> 
> 赞同：1
> 
> 时间：2013-02-14T21:54:01.043
> 
> 标签：audio, media, midi

有许多基于时间的应用程序示例，它们以非常精细的分辨率和准确性发送事件或执行复杂的处理。想想 MIDI 音序应用程序、音频和视频编辑应用程序。

所以我很好奇，在它们的核心层面上，这些应用程序如何从编程的角度准确地完成它们所做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:33:43.823

MIDI 和媒体播放在本质上完全不同，并且以不同的方式处理。

对于 MIDI，需要处理的数据非常少。创建一个具有高优先级的线程来处理 MIDI I/O。这就是所有需要的。

对于音频，准确性不是问题，但延迟才是问题。声音接口上有一个缓冲区，播放音频的软件会定期写入该缓冲区。对于典型的媒体播放器，此缓冲区可存储大约 300 毫秒的音频。该软件只是将 PCM 编码的音频波形写入缓冲区。声音接口不断地从这个缓冲区中读取并以恒定的速率播放。

对于低延迟音频应用程序，此缓冲区大小可以非常小，处理低至 5 或 10 毫秒的音频。生成音频数据的软件必须再次由具有高优先级的线程处理，并且通常具有许多优化以使其在软件的其余部分（效果和其他）无法跟上的情况下保持运行。缓冲区欠载很常见。特殊驱动程序通常用于跳过信号链中不需要的软件。ASIO 和 DirectX 在 Windows 上很常见。Windows Vista/7 和 OSX 都将它们的音频 API 称为“核心音频”，并提供低延迟特性而无需特殊驱动程序。

视频是完全不同的野兽。在可能的情况下，视频解码由硬件处理。这就是手机等慢速设备能够播放 720p 视频的方式。如果硬件可以处理编解码器，则软件只需要将数据发送给它。在不支持编解码器的情况下，视频必须在慢得多的软件中解码。即使在现代 PC 上，软件解码也经常导致视频断断续续或滞后。

音频到视频的同步也是一个问题。我对此了解不多，但据我了解，音频是主时钟，视频与之同步。您不能简单地开始播放并期望时间可以解决，因为不同的声音接口对于 44.1kHz（或任何其他采样率）有不同的想法。您可以通过同时在两个不同的设备上播放相同的音频并随着时间的推移聆听它们逐渐分离来证明这一点。

# php - 将开发中的composer包存放在vendor目录下，如何设置autoloader？

> ID：14884765
> 
> 赞同：0
> 
> 时间：2013-02-14T21:54:08.153
> 
> 标签：php, laravel, composer-php, laravel-4

我正在开发一个包，我想在发布之前将它存储在供应商目录中。

因此，一旦通过 composer 安装 Basset 的服务提供者的路径是 `/siteroot/vendor/jasonlewis/basset/src/Basset/BassetServiceProvider.php`

哪个作曲家在它的自动加载器中映射得很好，现在如果我的在 `/siteroot/vendor/hailwood/databaseconfigloader/src/DatabaseConfigLoader/DatabaseConfigLoaderServiceProvider.php`

我需要向 composer.json 文件添加什么以使其正确生成自动加载映射？

我可以手动编辑 autoload_namespaces.php 文件以添加映射 `'Hailwood\\DatabaseConfigLoader' => $vendorDir . '/hailwood/databaseconfigloader/src/'`
并且可以工作，但是当我进行作曲家更新时显然会被覆盖，我尝试添加

```
"psr-0": {
            "Hailwood\\DatabaseConfigLoader": "src/"
         } 
```

到`composer.json`但那个输出`'Hailwood\\DatabaseConfigLoader' => $baseDir . '/src/',`不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:27:01.870

在状态下，您不尊重 PSR-0。所以你有两个解决方案：

### 尊重 PSR-0

您必须将代码放入`/siteroot/vendor/hailwood/databaseconfigloader/src/Hailwood/DatabaseConfigLoader/DatabaseConfigLoaderServiceProvider.php`. 之后，只需执行以下操作：

```
"psr-0":
{
    "Hailwood\\DatabaseConfigLoader": "vendor/hailwood/databaseconfigloader/src/"
} 
```

### 使用*类映射*自动加载

你试一试 ：

```
"classmap": ["vendor/hailwood/databaseconfigloader/src/"] 
```

# javascript - Node.js 中的函数作用域和回调

> ID：14884767
> 
> 赞同：0
> 
> 时间：2013-02-14T21:54:14.057
> 
> 标签：javascript, node.js

所以我必须`share`循环计算一些。在该循环的每次迭代中，我都必须`rent`从数组中调用一个变量。所以我`calculate`从数据库的东西中分离了功能。

```
var calculate = function() {
    while(count < 100) {
        var share = 50;
        var shareArray = [];

        for(var i = 0; i < 100; i++) {

            var pension = share*2; // mathematical stuff
            // Gets a rent from a database and returns it in a callback
            getRent(modules, share, function(rent) {
                share = rent*foo; // some fancy mathematical stuff going on here
                // I need to get the share variable above out of its function scope
            });
                    // I need the share variable right here
            shareArray.push(share);     // the value of share will be for i = 0: 50, i= 1: 50 ...
                                        // This is not what i want, i need the share value from getRent()
        }
        count++;
    }
} 
```

现在您可能会看到，我遇到了以下麻烦。因为我在 node.js 中工作，所以`rent`从模块数组中获取变量的唯一方法是通过这个名为`getRent()`. 问题是，我需要`share`这一步之后的值，但在`getRent()`. 有什么办法我可以做到这一点？

这是`getRent()`- 功能：

```
var getRent = function(modules, share, callback) {
        // Searching for a fitting rent in the modules array
        // Just assume this is happening here
        callback(rent);
}; 
```

所以问题是：我怎样才能“返回” `share`：

```
getRent(modules, share, function(rent) {
                    share = rent*foo; // some fancy mathematical stuff going on here
                    // I need to get the share variable above out of its function scope
}); 
```

以任何方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:54:06.767

如果`getRent`是异步的，则无法同步获取结果。从根本上说，在它最终返回之前，您不知道`getRent`最终将提供给它的回调的值。所以这不是功能范围的问题，而是时间问题。您只需要等待`getRent`执行它的操作，然后才能获得`rent`. 您需要重构代码，使其`calculate`也是异步的。

就像是：

```
// Refactor calculate to be async:
function calculate(cb) {
    var data = [];
    for ( var i=0; i<100; i++ ) {
        getRent(function (rent) {
            data.push(rent);
            if ( data.length === 100 ) cb(data);
        });
    }
}

// And then use it async:
calculate(function (data) {
    // data array arrives here with 100 elements
}); 
```

上面的答案可能类似于您使用 vanilla JS 实现它的方式。从长远来看，使用`async`miggs 建议的库可能是一个好主意。但就像我说的那样，如果你使用 vanilla JS 或`async`lib，那么你将不得不在这段代码和调用它的代码中重构异步性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:31:15.780

您想使用库 ( ) 的[`whilst`](https://github.com/caolan/async#whilst)方法来简化它：[`async`](https://github.com/caolan/async)`npm install async`

```
var count = 0;
var shareArray = [];

async.whilst(
    function () { 
        return count < 100; 
    },
    function (next) {
        count++;
        getRent(function(rent) {
            // What does modules do anyway??
            // Dont know where foo comes from...
            shareArray.push(rent*foo); // some fancy mathematical stuff going on here
            next();
        });
    },
    function (err) {
        console.log(shareArray);
        // Do sth. with shareArray
    }
); 
```

如果您可以并行请求所有 100 个调用，您也可以使用该[`parallel`](https://github.com/caolan/async#parallel)功能。

# ruby-on-rails - 我将如何解决这个 Gemfile 冲突

> ID：14884769
> 
> 赞同：0
> 
> 时间：2013-02-14T21:54:17.923
> 
> 标签：ruby-on-rails, gem, bundler

曾经使用过 Rails，但对我遇到的这个问题有点困惑。

我有两个用于 xpath 的依赖项，一个用于 0.1.4，一个用于 1.0

如果我只运行以下命令，则会出错：

```
Thu Feb 14$ rspec spec/requests/static_pages_spec.rb 
/Users/jt/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find xpath (~> 1.0.0) amongst ... 
```

但预先捆绑执行有效。

```
$bundle exec rspec spec/requests/static_pages_spec.rb 
```

我很好奇如何通过我的 Gemfile 解决这个 xpath 问题。我认为这是 bundler 应该处理的类型。我知道这`bundle exec`应该是正常的，但我宁愿不必使用它。

我没有理解什么，我该如何解决？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:56:48.980

在 Gemfile 中，您可以通过附加版本号来强制 gem 的版本。如果您需要最高 1.0.0 的版本，那么您可以编写

```
gem "mygem", "~> 1.0.0" 
```

[您可以在bundler 站点](http://gembundler.com/gemfile.html)中获得有关如何管理 gem 版本的更多信息。

# css - 将 Sprite 图像放在锚标记的右侧？

> ID：14884770
> 
> 赞同：3
> 
> 时间：2013-02-14T21:54:14.113
> 
> 标签：css, css-sprites

我有 css 精灵图像。它工作正常，但问题是我想要锚标记文本的图像右侧。但它显示在左侧。精灵图像在这里。

[http://jstiles.com/temp/1360875952/ctrls/css-sprite.png](http://jstiles.com/temp/1360875952/ctrls/css-sprite.png)

预期结果：

```
[Mylinktext]<MyImagehere> 
```

我得到的实际结果是

```
<MyImagehere>[Mylinktext] 
```

我不想在伪类之后使用。因为它在 IE7 浏览器中也不起作用。我的代码如下。

```
.ctrls
    {
        font-family:Arial;
        font-weight:bold;
        font-size:16px;
        color:black;
        background-image: url(images/ctrlsprite.png);
        //background-image: url(images/css-sprite.png);
        background-repeat:no-repeat;
        text-decoration:none;
        display: inline-block;
        padding-left:30px;  
    }
    .ctrls:hover
    {
        background-position: 0px -252px;
        text-decoration:underline;      
    }
    a.magenta
    {
        background-position:0px -144px;
    } 
```

和 HTML

```
<div>
    <p>Magenta</p>
    <a href="#" class="ctrls magenta">Et Movet</a>
</div> 
```

如何将图像放置在文本的右侧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T22:25:00.937

在标签`<span>`中的文本右侧添加一个怎么样？[演示](http://jsfiddle.net/FloydPink/YHaDw/)`anchor`

**HTML**

```
<div>
    <p>Magenta</p> <a href="#" class="ctrls magenta">Et Movet <span class="icon"></span></a>
</div> 
```

**CSS**

```
.ctrls {
    font-family:Arial;
    font-weight:bold;
    font-size:16px;
    color:black;
    text-decoration:none;
}
.ctrls:hover {
    text-decoration:underline;
}
.ctrls .icon {
    display: inline-block;
    background-image: url(http://jstiles.com/temp/1360875952/ctrls/css-sprite.png);
    background-repeat:no-repeat;
    width: 16px;
    height: 16px;
    background-position:0px -144px;
}
.ctrls:hover .icon {
    background-position: 0px -252px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:01:53.920

当我尝试您的代码时，结果似乎如您所愿：[Mylinktext]<MyImagehere>。我可能错过了一些东西。尝试并解释什么，并将尝试帮助您。

就个人而言，我不会使用精灵。相反，我会为每种颜色制作一张图像（我发现这更容易使用），或者更好的是，使用我想要的字符制作字体（参考： http: [//mashable.com/2011/11/17/free- font-creation-tools/](http://mashable.com/2011/11/17/free-font-creation-tools/) ; 我没有尝试过任何程序，所以我不知道它们有多好）然后使用@font-face规则（参考：[http ://www.w3schools.com/ cssref/css3_pr_font-face_rule.asp](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)）。

# mysql - 如何计算联接表上的行数

> ID：14884777
> 
> 赞同：7
> 
> 时间：2013-02-14T21:54:42.827
> 
> 标签：mysql, join, count

我有 2 个表 - 一个主（称为组）和详细信息（称为用户）

我想返回每个主行以供后续显示，但我只想计算有多少详细行与主行匹配

我的查询不能正常工作——它只返回主表中的第一行

```
$query_string = '
    SELECT groups.userGroupID, userGroup,
           count(users.userGroupID) AS howMany
    FROM groups_table AS groups
    JOIN users_table AS users ON users.userGroupID = groups.userGroupID
    ORDER BY groups.userGroupID
'; 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T21:56:40.517

通过以下方式忘记您的群组：

```
SELECT groups.userGroupID, userGroup,
       count(users.userGroupID) AS howMany
FROM groups_table AS groups
LEFT JOIN users_table AS users ON users.userGroupID = groups.userGroupID
GROUP BY groups.userGroupID
ORDER BY groups.userGroupID 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-11-01T09:59:54.550

这对我有用，希望它可以帮助其他寻找相同答案的人

```
SELECT COUNT(howMany) AS fo2
FROM(
 SELECT groups.userGroupID, userGroup,
 users.userGroupID AS howMany
 FROM groups_table AS groups
 JOIN users_table AS users ON users.userGroupID = groups.userGroupID
 ORDER BY groups.userGroupID) AS myCount 
```

# asp.net-mvc - DataCacheClient 与 dataCacheClients 的 AppFabric 配置问题

> ID：14884788
> 
> 赞同：0
> 
> 时间：2013-02-14T21:55:28.090
> 
> 标签：asp.net-mvc, configuration, appfabric, appfabric-cache

我试图让 AppFabric 在我的 Asp.net 应用程序中工作，如果我使用 c# 代码进行配置，一切正常。但是我很难让它从 web.config 工作。如果我在 web.config 中有以下内容，

```
<section name="dataCacheClient"
            type="Microsoft.ApplicationServer.Caching.DataCacheClientSection,
        Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0, 
        Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            /> 
```

和

```
 <dataCacheClient>
  <hosts>
    <host name="localhost" cachePort="22233" />
  </hosts>
</dataCacheClient> 
```

那么我的代码不会抛出异常，但是放入默认缓存实际上并没有将任何内容放入缓存，字节数为 0。

如果我将 web.config 更改为

```
<section name="dataCacheClients"
            type="Microsoft.ApplicationServer.Caching.DataCacheClientSection,
        Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0, 
        Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            /> 
```

注意它是带有“s”的“ **dataCacheClients** ”和

```
 <dataCacheClients>
<dataCacheClient name="default">
  <hosts>
    <host name="localhost" cachePort="22233" />
  </hosts>
</dataCacheClient> 
```

我有异常

```
ErrorCode<ERRCA0021>:SubStatus<ES0001>:Server collection cannot be empty 
```

有人可以帮助指出我在这里缺少的东西。

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:46:53.487

您的第一个示例是正确的，只需添加参数：allowLocation="true" allowDefinition="Everywhere"。

```
<section name="dataCacheClient"
         type="Microsoft.ApplicationServer.Caching.DataCacheClientSection,
               Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0, 
               Culture=neutral, PublicKeyToken=31bf3856ad364e35"
         allowLocation="true"
         allowDefinition="Everywhere"/> 
```

# c++ - 我可以在编译时判断 Boost.Phoenix lambda 的一组特定输入类型是否有效？

> ID：14884789
> 
> 赞同：2
> 
> 时间：2013-02-14T21:56:01.227
> 
> 标签：c++, boost, lambda, boost-phoenix

假设我有一个 Boost.Phoenix lambda 表达式，如下所示：

```
_1 * 4.5 + (3.0 / _2) 
```

有没有一种好方法可以在编译时检测 lambda 表达式是否有效，给定与 arguments 相关的类型列表`_1`，`_2`等等？我在想我想用它`enable_if`来确定 lambda 是否支持输入类型。如果是这样，将直接调用 lambda，而如果不是，我想生成一个无操作。伪代码将是这样的：

```
template <typename F, typename A1, typename A2>
enable_if<F::is_supported<A1, A2>, result_of<F(A1,A2)>::type >::type func(F func, A1 arg1, A2 arg2)
{
    func(A1, A2);
}

template <typename F, typename A1, typename A2>
disable_if<F::is_supported<A1, A2> >::type func(F func, A1 arg1, A2 arg2)
{
} 
```

我只是不确定如何`is_supported`实施，或者是否有可能。我没有使用 C++11；我会假设只有 C++03（因为 Phoenix 需要它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:53:42.237

我认为凤凰城不可能像今天这样。为了支持这种使用，`enable_if`几乎必须在 Phoenix 在 eval 调用链中进行的每个函数调用上使用，在每个级别，甚至在 Phoenix 所依赖的其他库中。我知道 Phoenix 不是这样写的，很难想象在 Phoenix、Proto 和它们所依赖的所有库都用纯 C++11 重写之前，对代码进行任何数量的黑客攻击都能做到这一点。即便如此，所有潜在错误都出现在 SFINAE 内容中需要非常小心。

我只是没有看到它发生，对不起。

# parallel-processing - 推荐一个具有明显加速和其中最重要概念的 OpenMP 程序进行演讲

> ID：14884790
> 
> 赞同：0
> 
> 时间：2013-02-14T21:56:03.177
> 
> 标签：parallel-processing, openmp

我将有一个关于 OpenMP 的讲座，我想用 OpenMP lively 编写一个程序。您建议哪个程序具有最重要的 OpenMP 概念并具有显着的加速？我想要一个很棒的程序示例，请帮助我，你们是 OpenMP 方面的专家，你们知道我正在寻找一个输出良好的技术和有趣的示例。

我想写两个生动的程序，第一个是为了更好地说明最重要的 OpenMP 概念并具有令人印象深刻的加速，第二个是每个人都必须同时编写代码的动手实践

我的听众可能很业余

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:08:04.520

就我个人而言，我不会说 OpenMP 最令人印象深刻的方面是您可以使用它编写的代码的可扩展性。我想说一个更令人印象深刻的方面是人们可以轻松地采用现有的串行程序，并且只需几个 OpenMP 指令，就可以将其变成具有令人满意的可扩展性的并行程序。

因此，我建议您采用听众感兴趣的任何程序（或任何程序的一部分），最好是您的听众熟悉的程序，并将其并行化，然后在您的演讲中，正如您所说的那样*生动。*如果一位讲师可以向我展示，例如，在 8 个内核上用 5 分钟编码和重新编译实现 4 倍的加速，我会印象深刻。这就引出了各种有趣的话题，关于为什么你不能（总是，很容易地）在 8 个内核上获得 8 倍的加速。

当然，像所有舞台魔术师一样，你必须仔细选择你的例子并排练，以确保你确实获得了足够令人印象深刻的加速来支持你的论点。

就我个人而言，在这样的演示中使用*令人尴尬的并行*程序会很尴尬。观众中更有洞察力的成员可能会被激起做出回应，例如`meh`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T05:26:30.773

(1) 矩阵乘法

也许这是最简单的例子（尽管矩阵加法会更简单）。

(2) 曼德布洛特

[http://en.wikipedia.org/wiki/Mandelbrot_set](http://en.wikipedia.org/wiki/Mandelbrot_set)

Mandelbrot 也是令人尴尬的并行，OpenMP 可以实现不错的加速。您甚至可以使用图形将其可视化。Mandelbrot 也是一个有趣的例子，因为它存在工作负载不平衡。您可能会看到基于调度策略（例如`schedule(dynamic,1)`vs. `schedule(static)`）和不同线程库（例如 Cilk Plus 或 TBB）的不同加速。

(3) 几个数学内核

例如，FFT（非递归版本）也是令人尴尬的并行化。

看看“OmpSCR”基准： http: [//sourceforge.net/projects/ompscr/](http://sourceforge.net/projects/ompscr/)这个套件有简单的 OpenMP 示例。

# intuit-partner-platform - IPP 客户对象为非应税对象

> ID：14884793
> 
> 赞同：1
> 
> 时间：2013-02-14T21:56:10.570
> 
> 标签：intuit-partner-platform

寻找澄清/最终答案：

参考问题：[https ://idnforums.intuit.com/messageview.aspx?catid=87&threadid=16477](https://idnforums.intuit.com/messageview.aspx?catid=87&threadid=16477)

```
What's the proper way to edit a customer and make them non-taxable? 

If you set SalesTaxCodeId to "0" you get: 
Error validating Sales Tax Code ID:Invalid integer. 

If you set SalesTaxCodeId to "" the customer becomes taxable. 

If you omit SalesTaxCodeId, the customer becomes taxable. 

The docs say "If the field value is null, the job is not taxable. ", but that doesn't seem to be the case. 

We have been setting SalesTaxCodeId to "" in the past, but it looks like this no longer works. Code is attached. 

What's the right way? 

Paul 
```

有人注意到这个问题是一个错误，保罗指出它已经被修复。澄清一下，为了将客户设置为非应税客户，SalesTaxCodeId / SalesTaxCodeName 必须为空字段吗？

前任。

`...
<SalesTaxCodeId />
<SalesTaxCodeName />
...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:30:17.463

根据文档：

QBO 仅支持是否应税的客户或职位，因此如果该字段为“1”，则该职位应税。如果字段值为空，则该职位不征税。所有其他值均无效。请注意，如果您指定了 TaxAmt 和 TaxRate，即使您没有直接指定，SalesTaxCodeId 也将为“1”。

> **要使 SalesTaxCodeId 不征税，TaxAmt 和 TaxRate 必须为空。**

谢谢，
杰瑞德

# php - 为什么提交按钮不能同时发送到 PHP 和 jQuery？

> ID：14884794
> 
> 赞同：0
> 
> 时间：2013-02-14T21:56:12.863
> 
> 标签：php, jquery

我有这个代码。

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <form action = "" method = "POST" id = "form">
        <img src = "circle.gif" id="loading" style="display:none; "/>
        <input type="text" name = "text2">
        <input type="submit" name="submit2" value="Send">
    </form>
<?
if (isset($_POST['submit2'])){
    echo $_POST['text2'];
}
?>
    <script>
        $('#form').submit(function(e) {
            $('#loading').show();
            return false;
        });
    </script>
</body>
</html> 
```

我想将**使用 PHP**写入文本框中的值存储在我的数据库中，并且在保存它的同时，我想使用 jQuery 显示一个 gif，一旦加载了页面，就应该删除这个 gif。

然后，如果我什么都不评论，提交按钮时会出现 gif 但回显失败。

如果我评论 jQuery 脚本，PHP 会回显所写的值。

如果我评论 PHP 脚本，则会显示 gif，但当然没有回显...

我怎么能按我的要求做。我知道我的完整脚本直到只显示 gif，但没有这个我无法继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:24:03.393

您可以实现您想要的行为，但您需要通过向服务器提交 AJAX 请求然后处理返回值来实现。所以基本上你会将此ajax请求添加到表单的单击或提交事件中，并通过javascript处理行为和请求。

也许是这样的：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <form action = "formSubmitHandler.php" method = "POST" id = "form">
        <img src = "circle.gif" id="loading" style="display:none; "/>
        <input type="text" name = "text2">
        <input type="submit" name="submit2" value="Send">
    </form>
    <script>
        $(document).ready(function(){
            $('#form').submit(function(){
                // Show the loading icon before the processing begins
                $('#loading').show();

                // Send the query/form details to the server
                jQuery.ajax({
                    data: $(this).serialize(),
                    url: this.action,
                    type: this.method,
                    success: function(results) {
                        // Now that the processing has finished, you 
                        // can hide the loading icon
                        $('#loading').hide();
                        // perhaps display some other message etc
                    }
                })
                return false;
            });
        });
    </script>
</body>
</html> 
```

# php - 如何在 cakephp 中使用缓存

> ID：14884799
> 
> 赞同：2
> 
> 时间：2013-02-14T21:56:23.413
> 
> 标签：php, cakephp, caching

我在 cakephp 中有一个站点，并且为它配置了缓存。在 bootstrap.php 中，我像 cakephp 网站中的指南一样编写了这一行：

```
Cache::config('default', array('engine' => 'File'));

Cache::config('short', array(
    'engine' => 'File',
    'duration' => '+1 hours',
    'path' => CACHE,
    'prefix' => 'cake_short_'
));

// long
Cache::config('long', array(
    'engine' => 'File',
    'duration' => '+1 week',
    'probability' => 100,
    'path' => CACHE . 'long' . DS,
)); 
```

在我的控制器中，我想缓存一些多次调用的查询，如下所示：

```
class User extends AppModel {

    public function get($alias) {
        $result = Cache::read('get_users', 'longterm');
        if (!$result) {
            $result = $this->find('all', array('conditions' =>array( 'alias' => $alias)));
            Cache::write('get_users', $result, 'longterm');
        }
        return $result;
    }
} 
```

我想知道使用参数（别名）缓存查询是否有效，还是只缓存不带参数的查询更好？

```
$result = $this->find('all', array('order' =>'id')); 
```

因为我的疑问是：缓存带参数的查询有用吗？是一种让网站速度更高效的好方法吗？

# javascript - 密码输入屏蔽延迟，javascript/jquery中的android样式

> ID：14884801
> 
> 赞同：0
> 
> 时间：2013-02-14T21:56:23.320
> 
> 标签：javascript, jquery

首先让我说我的任务已经完成。但我试图了解它是如何工作的，有一件事让我感到困惑。换句话说，我偶然发现了答案。

我的任务很简单：在输入框中，通过在延迟后将每个字符更改为 * 来屏蔽用户键入的输入。这就是安卓手机处理屏蔽输入的方式，与 iPhone 略有不同。

我使用了 jQuery/javascript 和正则表达式的组合。我的工作代码：

```
$('.room_input').focus(function () {
    currentFocus = $(this);
});

$('.key').click(function () {
    setTimeout(function () {
        currentFocus.val(currentFocus.val().replace(/[^\*]/, '*'));
    }, 2000);
}); 
```

这很简单，而且效果很好。每按一次键，2 秒后变为 *。*每个键都有自己的计时器*。但是有一件主要的事情我不明白。当来自 setTimeout 的回调触发时，上面的代码似乎会将文本框的*全部*内容设置为 *。因为上面的“replace”用任何不是*的字符替换了值的全部内容。

但事实并非如此。每个键在单击后 2 秒后发生变化（应该如此）。这是为什么？我在想它可能是正则表达式 - 它只会改变它找到的第一个匹配项吗？我只是回答了我自己的问题吗？

更新：我做到了。这是正则表达式。它只替换字符串中*第一个*匹配的字符。我在想这可能与单线程问题有关......像往常一样，我让一个问题比它更困难。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:30:35.397

是的，你是对的。

每次按键都会添加一个字符，然后启动一个计时器，该计时器稍后会将第一个非星号变为星号。它比你想象的要简单得多。

# objective-c - Objective-C 中的复数

> ID：14884811
> 
> 赞同：0
> 
> 时间：2013-02-14T21:57:00.407
> 
> 标签：objective-c, complex-numbers

我可以在 Objective-C 中直接使用复数吗？这就像复双 b=3+5*I, a=sqrt(b)。或者我必须建立自己的关于操作方法的类？

# sql - 链接服务器远程登录的权限

> ID：14884813
> 
> 赞同：1
> 
> 时间：2013-02-14T21:57:25.443
> 
> 标签：sql, linked-server

我正在尝试使用链接服务器连接 2 个数据库（不在同一服务器或域上）。下面是我正在运行以连接 2 的查询。

我的问题是，如果我指定@rmtuser = 'sa'，我就可以正常连接。但是，如果我将 @rmtuser 切换为“RemoteIntegrationUser”，我会收到一条错误消息，提示无法连接。（错误 18456）

我已经验证我可以使用“RemoteIntegrationUser”帐户通过 SSMS 直接连接到“远程”服务器，并且连接得很好。

为了能够处理这些传入连接，“远程”服务器上是否必须有一些特殊权限“远程集成用户”？

```
Exec sp_dropserver 'RemoteDB', 'droplogins'
go

EXEC master.dbo.sp_addlinkedserver 
@server = N'RemoteDB'
   ,@srvproduct = 'OLE DB Provider for SQL'
   ,@provider = N'SQLNCLI'
   ,@datasrc = '111.2222.33.44'
   ,@catalog = 'myremotedb'

EXEC master.dbo.sp_addlinkedsrvlogin 
@rmtsrvname = N'RemoteDB'
   ,@useself = false
   ,@locallogin = 'LocalIntegrationUser'
   ,@rmtuser = N'RemoteIntegrationUser'
   ,@rmtpassword = N'************'
go 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:27:49.467

由于您要链接 2 个 SQL Server，请尝试将 @srvproduct 定义为`N'SQL Server'`. 我不确定位于不同域上的实例是否允许这样做。您可能还想`@locallogin = NULL`在定义链接服务器登录时尝试设置：

```
EXEC master.dbo.sp_addlinkedserver
     @server = N'<server name/ip>'
    ,@srvproduct=N'SQL Server'

EXEC master.dbo.sp_addlinkedsrvlogin 
     @rmtsrvname = N'<server name or ip>'
    ,@locallogin = NULL
    ,@useself = N'False'
    ,@rmtuser = N'RemoteIntegrationUser'
    ,@rmtpassword = N'************'
GO 
```

除此之外，RemoteIntegrationUser 是否具有连接到 myremotedb 数据库的权限？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:04:29.790

**打脸**

谈一谈只见树木不见森林。不知何故，我最终使用了错误的密码。发誓我使用的是正确的，但不是。再次证明，人机关系中最薄弱的环节不是计算机。

# powershell - 在 Powershell 中合并结果

> ID：14884816
> 
> 赞同：0
> 
> 时间：2013-02-14T21:57:29.670
> 
> 标签：powershell

我有一个从 Active Directory 获取信息的 powershell 函数。它将发送一封电子邮件，电子邮件的正文将包含与该电子邮件地址关联的任何组。正如您在下面看到的，test@email.com 被列出了两次。与其向 test@email.com 发送 2 封电子邮件，我更愿意在正文中发送一封包含两个组的电子邮件。我怎样才能做到这一点？谢谢

```
email               group
test@email.com      number1
test@email.com      number2
notet@email.com     number1
hello@email.com     number3

(Get-ADUser -Identity lbono –Properties MemberOf | Select MemberOf).MemberOf | Get-ADGroup -Properties ManagedBy | Select Name, ManagedBy, Distinguishedname, GroupCategory |

Where-Object {
$_.Distinguishedname -notlike "*Unity*" -and $_.Distinguishedname -notlike "*DynastyGroups*" -and $_.name -notlike "*Technical Library*" }|
ForEach-Object {
If ($_.ManagedBy) {
$result = New-Object PSObject
Add-Member -input $result NoteProperty 'Group Name' $_.Name
Add-Member -input $result NoteProperty 'Managed By' ((Get-ADUser -Identity $_.ManagedBy).givenName + ' ' + ((Get-ADUser -Identity $_.ManagedBy).surName))
Add-Member -input $result NoteProperty 'Email' (Get-ADUser -Identity $_.ManagedBy -Properties mail).Mail
Add-Member -input $result NoteProperty 'Group Type' $_.GroupCategory
Write-Output $result
}

} | select 'Group Name','Managed By','Email','Group Type' | sort 'Managed By' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:09:06.077

我认为这是 Group-Object cmdlet 的完美用例。显示如何利用它的片段：

```
@'
email,group
test@email.com,number1
test@email.com,number2
notet@email.com,number1
hello@email.com,number3
'@ | ConvertFrom-Csv | Group-Object email | foreach {
    "To: {0} Body: {1}" -f 
        $_.Name, 
        (($_.Group | foreach { $_.group }) -join ', ')
} 
```

替代方案：使用哈希表：

```
$mails = @{}
@'
email,group
test@email.com,number1
test@email.com,number2
notet@email.com,number1
hello@email.com,number3
'@ | ConvertFrom-Csv | ForEach-Object {
    if ($mails.ContainsKey($_.email)) {
        $mails."$($_.email)" += ", $($_.group)"
    } else {
        $mails."$($_.email)" = $_.group
    }
}

$mails.GetEnumerator() | ForEach-Object {
    "To: {0} Body: {1}" -f $_.Key, $_.Value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:14:27.283

由于没有指定任何内容，我假设您的函数`My-Function`返回一个对象数组，每个电子邮件+组组合一个对象。另外，我假设 Email 和 Group 存储在名为`email`and的属性中`group`。

```
My-Function | Group-Object Email | % { 
    New-Object psobject -Property @{
        Email = $_.Name
        Groups = ($_.Group | select -ExpandProperty Group)
    }
} 
```

# twitter - Twitter消息末尾的奇怪斜线

> ID：14884819
> 
> 赞同：9
> 
> 时间：2013-02-14T21:57:36.997
> 
> 标签：twitter, trailing-slash

我正在使用以下代码显示一个页面，其中的 Twitter 框已经填充了一条消息：

```
<a href="http://www.twitter.com/share.php?url=http://myurl.com&text=myMessage" target="_blank">Click me</a> 
```

但是，在页面上，我在 Twitter 框中得到了这个：

```
myMessage/ 
```

注意尾部的斜杠。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T14:09:11.050

我们已经找到了一种解决方法，您可以将 source=webclient 参数添加到 Twitter 地址的 END 中，这一点至关重要。执行此操作时，Twitter 不再添加尾部斜杠。然而，鉴于 Twitter 喜欢改变他们的格式和代码，不能保证这将永远有效:-)

例如...

```
<a href="https://twitter.com/intent/tweet?text=http://www.rsc.org%2FEducation%2FEiC%2Fissues%2F2013January%2F50th%2Delement%2Dtin%2Easp&amp;source=webclient" target="_blank">Twitter this</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-22T09:37:30.033

不，解决方案更简单。对您的网址进行 URL 编码：

```
https://twitter.com/intent/tweet?text=myMessage&url=http%3A%2F%2Fmyurl.com 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-22T19:12:36.820

在您的 URL 中添加一个尾部斜杠，这应该会消失。它对我有用。

从此更改 URL：

```
http://www.twitter.com/share?url=http://myurl.com&text=myMessage 
```

对此：

```
http://www.twitter.com/share?url=http://myurl.com/&text=myMessage 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-17T22:43:47.573

正如 Twitter 文档所声称的（[twitter 原始参考](https://dev.twitter.com/web/tweet-button/web-intent)）：

> 具有 HTTP 或 HTTPS 方案、URL 编码的**完全限定URL。**

完全限定的 URL 需要有尾部斜杠。来自相同的文档：

> 示例值：http:%3A%2F%2Fexample.com%2F

请注意，示例`%2F`末尾有 HTML 编码`/`字符。Twitter 尝试通过`/`自动附加来创建正确的 URL。

将你的`url`GET 参数设置`http://myurl.com/`为去掉斜杠

# javascript - html 中的 if-else 语句

> ID：14884821
> 
> 赞同：-1
> 
> 时间：2013-02-14T21:57:42.403
> 
> 标签：javascript, html

我需要对我购买的这个网站做一些小改动。我有它的 HTML 代码，而且我对 HTML 有一些了解，但对 JavaScript 或 CSS 不了解。有人可以告诉我将代码放入其中一个脚本以使其像

```
if (on pageA)
   print this text
else
   print other text 
```

我知道这个网站不喜欢问这样的问题，但我已经尝试先在 w3 Schools 上找到答案。只是似乎我必须在此之前学习所有 JavaScript 知识才能理解何时我只需要知道这一小段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:03:25.043

假设“Page A”是“PageA.html”，你的 HTML 应该是这样的......

```
<script>

if (window.location.href.indexOf("PageA") != -1)
   alert("You are on Page A")
else
   alert("You are not on Page A")

</script> 
```

Javascript 是一门科学和一门专业，如果你想要专业的结果，请雇用一个。:)

# php - 使用 PDO 连接到 Sphinx

> ID：14884829
> 
> 赞同：3
> 
> 时间：2013-02-14T21:58:17.287
> 
> 标签：php, mysql, pdo, sphinx

我正在尝试使用 PDO 连接到 Sphinx，但它不起作用，我收到此错误：
`SQLSTATE[HY000] [2054] Server sent charset unknown to the client. Please, report to the developers`

这是我的连接方式：

```
$pdo = new PDO("mysql:host=xxxxxx;port=9306;", "", ""); 
```

我曾经用普通的mysql来做这件事，而且以前可以工作，但现在由于某种原因它不能工作。

这曾经有效（现在它没有，甚至没有给出错误）：

```
$sql = mysql_connect("xxxxxx:9306", "", ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:28:51.393

好的，我修好了。

我所做的是将php从降级`5.4.11`到`5.4.3`

# c# - 如何获取路线数据值

> ID：14884833
> 
> 赞同：0
> 
> 时间：2013-02-14T21:58:25.023
> 
> 标签：c#, asp.net-mvc

我需要授权属性来确保经过身份验证的用户可以在安全区域访问以管理他的并且只有他的数据。

我正在考虑检索`httpContext.User.Identity.Name`并将其与从数据库中检索到的用户名相匹配。

这基本上是好的（安全）方法吗？或者它可以在头脑中更安全地完成？

所以，我的控制器装饰有自定义属性

```
[UserAccountAuthorizeAttribute]
public ActionResult Edit(string username)
{
    return View();
} 
```

我正在覆盖`AuthorizeAttribute`但在调试模式下在下一行得到空值

```
var rd = httpContext.Request.RequestContext.RouteData;
var username = rd.Values["username"]; // null 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:25:00.570

您不应该将用户名放在查询字符串中。

如果您使用的是内置的 ASP.NET Membership 提供程序，您的操作将如下所示。

```
 [Authorize]
    public ActionResult Edit()
    {
        var userId = (Guid)Membership.GetUser().ProviderUserKey;

        var someService = new MyService();
        var someData = someService.GetSomeDataByUserId(userId);
        //...
    } 
```

# javascript - 构建新的 Cocos2d javascript 项目失败

> ID：14884834
> 
> 赞同：0
> 
> 时间：2013-02-14T21:58:33.173
> 
> 标签：javascript, cocos2d-iphone

我刚刚安装了 cocos2d-iphone 并安装了 XCode 模板，如此[处](https://github.com/cocos2d/cocos2d-iphone/wiki/cocos2d-and-JavaScript)所述。我创建了一个新的“带有 JavaScript 的 Cocos2d OSX”项目。现在，当我尝试运行新项目时，我得到一个构建错误`jsb_core.mm`，抱怨`jsb_opengl_registration.h`找不到。我试过谷歌`jsb_opengl_registration.h`，但没有任何结果。

有没有人知道如何处理这个？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:20:53.513

事实证明，jsb lib 绑定​​模板 templates/Xcode4_templates/lib_jsbindings.xctemplate/TemplateInfo.plist 有点落后。该问题已在[https://github.com/cocos2d/cocos2d-iphone/commit/32fe67c6f31684dd3a235f6dfb5e64f49ce2edfc](https://github.com/cocos2d/cocos2d-iphone/commit/32fe67c6f31684dd3a235f6dfb5e64f49ce2edfc)中解决，因此再次获取并安装模板可以解决问题。

# javascript - 选中复选框后切换要查看的按钮，如果未选中则消失

> ID：14884839
> 
> 赞同：0
> 
> 时间：2013-02-14T21:58:42.633
> 
> 标签：javascript, jquery, jquery-ui, button, checkbox

下面我有我用 PHP 构建的特定应用程序的代码。我的工作是用户界面，我一直在寻找有关如何使其工作的代码。

使用此表单，它使用最新更新的 Jquery UI 来样式化按钮和复选框。我需要在选中复选框时显示该按钮，并在未选中时消失。

还没有找到任何适用于此的代码，这让我快疯了，落后于我。

```
<form name="purpose" method="post" action="" >
    <div id="radiosetPURPOSE">
        <input type="checkbox" id="radio1" name="homework" value="homework" ><label for="radio1" style="font-size: 13pt; width: 130px; height: 40px;">Homework</label>
        <input type="checkbox" id="radio2" name="computer" value="computer" ><label for="radio2" style="font-size: 13pt; width: 130px; height: 40px;">Computer</label>
    </div>
    <br />
    <div id="radiosetPURPOSE2">
        <input type="checkbox" id="radio3" name="books" value="books" ><label for="radio3" style="font-size: 13pt; width: 130px; height: 40px;">Books</label>
        <input type="checkbox" id="radio4" name="reading" value="reading" ><label for="radio4" style="font-size: 13pt; width: 130px; height: 40px;">Reading</label>                     
    </div>
    <br />
        <div id="radiosetPURPOSE3">
        <input type="checkbox" id="radio5" name="tutoring" value="tutoring" ><label for="radio5" style="font-size: 13pt; width: 130px; height: 40px;">Tutoring</label>                     
    </div>
    <br  /><br  /><br  /><br  />
        <div id="btnCheckin" style="display:none">   
        <button id="btnCheckinBtn" style="font-size: 18pt; width: 175px; height: 75px;">Check In</button>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:15:41.177

似乎我误读了您的问题，并且您希望在*选中任何复选框*时启用该按钮。

这将查看是否在with name中勾选了*任何*复选框。`form``purpose`

```
$("input:checkbox").change(function() {    
  $("#btnCheckin").toggle(!!$('form[name="purpose"] > input:checkbox:checked').length))
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:27:17.353

如果我正确阅读了您的要求，您需要检查是否选中了任何复选框以显示按钮，如果未选中所有复选框，则隐藏它？

这可能发生在单击或键盘操作上，因此您需要检查更改事件。将其包装在一个文档就绪处理程序中，包括 jQuery 并且您已设置。

```
$('input:checkbox').change(function () {
    if ($('input[type=checkbox]:checked').length > 0) {
        $('#btnCheckin').show();
    } else {
        $('#btnCheckin').hide();
    }
}); 
```

这是您的标记的小提琴：http: [//jsfiddle.net/GGdtw/](http://jsfiddle.net/GGdtw/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T22:05:50.927

当您单击复选框时，检查它是选中还是未选中，并基于此启用或禁用按钮。（使用 jQuery）

```
<script>
    $(document).ready(function() {

        $("#checkbox").click(function() {
            if (("#checkbox").is(":checked")) {
                //button show (.show())
            else {
                //disable the button (.hide())
            }
        });
    });
</script> 
```

此外，摆脱`"display: none;"`按钮样式。

小提琴：http: [//jsfiddle.net/mbYby/](http://jsfiddle.net/mbYby/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T22:17:16.383

您还可以使用 jQuery '.toggle()'：

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

# javascript - 多个 not() DOM 选择器

> ID：14884843
> 
> 赞同：5
> 
> 时间：2013-02-14T21:58:55.180
> 
> 标签：javascript, jquery, css, dom, selector

我想选择一个带有两个 not 子句的特定节点，但到目前为止我没有成功。我需要做的是，选择一个元素，其 div 包含字符串 0008，但它不是 10008，而且它**也不**包含标签“style”，所以，理论上它应该像这样工作：

```
document.querySelectorAll(" div[id*='0008']:not([id='10008'][style])") 
```

但是，正如您可能怀疑的那样，它不是那样工作的。

```
document.querySelectorAll(" div[id*='0008']:not([id='10008'])")
document.querySelectorAll(" div[id*='0008']:not([style])") 
```

当然，它们都可以完美地单独工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T22:08:15.510

> 不是 10008，也不是……</p>

这不是您当前选择器检查的内容，它测试它是否没有（ id 和 style 属性）。改用这个：

```
div[id*='0008']:not([id='10008']):not([style]) 
```

您的原始解决方案也不是有效的选择器，因为[`:not()`可能只包含一个*简单的选择器*](http://www.w3.org/TR/selectors/#negation)，而您有两个。然而，像 jQuery 的 sizzle 引擎这样的选择器库可能[支持它们](http://api.jquery.com/not-selector/)。因此，对于 jQuery，以下内容也可以使用：

```
div[id*='0008']:not([id='10008'],[style]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T22:06:36.817

[***jsFiddle 演示***](http://jsfiddle.net/NBMeQ/)

从逻辑上讲，您试图排除与两个不需要的选择器中的任何一个匹配的元素，而不是同时匹配它们的元素。在 jQuery 中，[多重选择器](http://api.jquery.com/multiple-selector/)（然后将匹配所有不需要的元素，然后被否定）只是一个逗号分隔的列表。因此，您只需这样做：

```
$("div[id*='0008']:not([id='10008'],[style])") 
```

来自[jQuery 文档](http://api.jquery.com/not-selector/)（因为这个问题被标记为 jQuery）：

> 内部接受所有选择器`:not()`，例如：`:not(div a)`和`:not(div,a)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:06:50.113

我只是这样做：

```
var elems = $('div[id*="0008"]').filter(function() {
    return !this.hasAttribute("style") && this.id == '10008';
}); 
```

我不认为我真的明白这一点，但这会过滤掉：

```
<div id="10008" style="color: black">10008</div> 
```

但不是：

```
<div id="10008">10008</div> 
```

ID 当然是唯一的，并且可能有一个真实世界的用例，但它似乎仍然是一个边缘情况，你通常会以其他方式处理，因为一旦你过滤掉了 ID，你为什么要这样做还需要匹配样式标签吗？

# apache-camel - 为骆驼配置全局错误处理程序？

> ID：14884844
> 
> 赞同：8
> 
> 时间：2013-02-14T21:59:13.290
> 
> 标签：apache-camel

我正在尝试为我的骆驼上下文中所有路由抛出的所有异常配置一个异常处理程序。我的方法如下，没有运气：

1.  实例化默认的骆驼上下文
2.  从 spring 上下文中检索 RouteDefinition 列表
3.  通过调用 ctx.addRouteDefinitions() 将这些定义添加到骆驼上下文
4.  从 java dsl 定义的 RotueBuilder (ctx.addRoutes(new MyErrorHandlerRouteBuilder()) 添加我的异常处理程序路由
5.  启动骆驼上下文

此时，spring 中定义的路由内抛出的异常由 DefaultErrorHandler 处理，而不是我要定义的那个。这是我的错误处理路由定义的样子

```
public class MyErrorHandlerRouteBuilder extends RouteBuilder {
@Override
public void configure() throws Exception {
    onException(Exception.class)
        .routeId("errorHandlerRoute")
        .handled(true)
        .process(new Processor() {

            @Override
            public void process(Exchange exchange) throws Exception {
                Throwable caused = exchange.getProperty(Exchange.EXCEPTION_CAUGHT, Throwable.class);
                // do some custom processing of the exception
            }
        })
        .stop();
} 
```

我还能尝试什么，或者我哪里出错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T07:11:31.783

创建一个抽象基类并在 configure 方法中定义您的全局错误处理程序。然后在你的路由类中扩展这个基类，并在它们的配置方法中首先调用 super.configure()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-24T21:38:26.440

对于未来的读者，这是我用于骆驼错误处理的解决方案（这都是 java 配置，但它将作为 spring xml 工作）：

## 1) 设置一个`DeadLetterChannelBuilder`Bean

```
@Bean
public DeadLetterChannelBuilder myErrorHandler() {
    DeadLetterChannelBuilder deadLetterChannelBuilder = new DeadLetterChannelBuilder();
    deadLetterChannelBuilder.setDeadLetterUri("direct:error");
    deadLetterChannelBuilder.setRedeliveryPolicy(new RedeliveryPolicy().disableRedelivery());
    deadLetterChannelBuilder.useOriginalMessage();
    return deadLetterChannelBuilder;
} 
```

现在这个 bean 将负责拾取错误并将它们定向到`direct:error`URI。

## 2）设置您的错误处理路线

您将需要一个路由来侦听 URI `direct:error`，因为这是您的错误现在被路由的地方。

```
@Override
public void configure() throws Exception {
    from("direct:error")
            .to("log:error")
            .end();
} 
```

正如您现在所看到的，您的所有错误都被路由到上述路由，您可以灵活地在全局范围内实现复杂的错误处理逻辑。

## 3）将您的全局错误处理程序注入您的路线

您仍然需要将错误处理 bean 注入到每个路由中。我希望骆驼会自动处理这个问题，但我还没有找到办法。尽管使用这种方法，代码重复/开销很小。

```
@Override
public void configure() throws Exception {
    errorHandler(myErrorHandler)
    from("myStartingUri")
            .to("myEndDestination")
            .end();
} 
```

查看基于 springs xml 的配置的文档，我认为您需要输入`<route errorHandlerRef="myErrorHandler">`路由定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T23:13:52.087

错误处理程序是 Java DSL 中特定的路由构建器。您需要为每个路由构建器创建一个。或者在您的情况下，您需要在 Spring DSL 中定义它（因为您似乎在 Spring 中定义了路由）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-07T10:01:45.013

在从应用程序上下文中检索您的 XML 路由作为资源并将它们加载到骆驼上下文后，您将拥有一个 RoutesDefinition 对象，您可以尝试像这样操作

```
Resource xmlRoutes = applicationContext.getResource("path/to/xml/routes");
RoutesDefinition routeDefinitions = camelContext.loadRoutesDefinition(xmlRoute.getInputStream());
for (RouteDefinition routeDefinition : routeDefinitions.getRoutes()) {
    routeDefinition
        .onException(Exception.class)
        .handled(true)
        // do some custom processing of the exception 
```

# java - 截断双精度数或将额外的 0 添加到小数点 - Java

> ID：14884847
> 
> 赞同：0
> 
> 时间：2013-02-14T21:59:16.147
> 
> 标签：java, formatting, double, truncate

这可能是重复的，但我找不到任何适用于我的代码的答案。

我正在尝试截断 Java 中方法（用于计算费用）的结果。然后我尝试将结果写入文本文件，但它并没有像应有的那样显示。这是我得到的，也是我希望它返回的：

1.  费用的结果是 8.4，它应该返回 8.40
2.  费用的结果是 8.0，它应该返回 8.00

等等......请有什么建议吗？

这是我的方法的全部代码：

```
public Double calculateFee(Parcel pcl) {    
    // Get type of parcel (E, S or X)
    String typeOfParcel = pcl.getParcelID().substring(0,1);
    // Formula for calculating fee
    Double fee = (double) 1 + Math.floor(pcl.getVolume()/28000) + (pcl.getDays()-1);

    // apply a discount to parcels of type "S"
    if (typeOfParcel.equalsIgnoreCase("S")) {
        fee = fee * 0.9;
    }

    // apply a discount to parcels of type "X"
    else if (typeOfParcel.equalsIgnoreCase("X")) {
        fee = fee * 0.8; 
    } 

    // This is what I tried:
    // Tried also using #.##, but no result
    DecimalFormat decim = new DecimalFormat("0.00");
    fee = Double.parseDouble(decim.format(fee));

    return fee;     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:02:41.723

一种方法是使用 String.format()。

```
 Double fee = 8.0;
  String formattedDouble = String.format("%.2f", fee ); 
```

请注意， Double 不保存其值的格式化表示。

有关格式字符串的其他详细信息可[在此处](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:09:55.647

这里的问题不在于您的格式错误。您正在使用以下格式格式化您的双精度：

```
decim.format(fee); 
```

然后，您将此字符串解析为 Double，因此会丢失格式：

```
Double.parseDouble(... 
```

只返回一个字符串而不是一个 Double，并且不要使用 Double.parseDouble。

# java - 有没有办法将 POST 作为 GET 转发？

> ID：14884849
> 
> 赞同：1
> 
> 时间：2013-02-14T21:59:27.143
> 
> 标签：java, servlets, http-post, forwarding

我知道前锋会保留一切，包括方法。但是有没有办法将 POST 作为 GET 转发？

即有没有办法让下面的转发变成一个 GET 以便我们转发到的页面可以访问我的会话属性？

```
 @Override
  protected void doPost(final HttpServletRequest req,
          final HttpServletResponse resp) throws ServletException, IOException {
      ...
      req.setAttribute("session", session);
      req.getRequestDispatcher("/myPage.jsp").forward(req, resp);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:15:51.770

请参阅[**HttpServletRequestWrapper**](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequestWrapper.html)。

您包装请求以便 getMethod() 返回，`GET`然后将包装的请求传递给您的请求调度程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:36:52.063

该页面可以毫无问题地访问会话和请求属性，因为它在您转发时是单个请求。

我看不到你的问题。

# c# - 检查字符串列表中是否存在字符串数组

> ID：14884850
> 
> 赞同：1
> 
> 时间：2013-02-14T21:59:33.710
> 
> 标签：c#, arrays, string, list

我有一个字符串数组列表。我通过迭代创建了一个新的字符串数组并尝试将其放入列表中，但是当我使用包含函数时它不会检查它是否存在，而是插入重复项。

```
List<string[]> possibleColumnValues = new List<string[]>();

while(true){

  string[] rArr = new string[5];
  //some code to populate the string goes here

  if (!possibleColumnValues.Contains(rArr){
  {
      possibleColumnValues.Add(rArr);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T22:13:41.533

```
private static bool AllElementInList(List<string[]> list, string[] arr)
{
    return list.Select(ar2 => arr.All(ar2.Contains)).FirstOrDefault();
} 
```

将其用作：

```
 List<string[]> list = new List<string[]>();
        string[] arr;

        bool flag = AllElementInList(list, arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:10:55.100

您可以使用 Sequence equal 方法来比较两个字符串数组。

来自 C# 语言中 System.Linq 的 SequenceEqual 扩展，您可以在一个语句中测试两个集合的相等性。

[序列相等](http://www.dotnetperls.com/sequenceequal)

但它的性能比替代实现差得多。

或实现您自己的 Equals 函数

[List.Contains 方法](http://msdn.microsoft.com/en-us/library/bhkz42b3.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T22:07:00.910

仍然不是很有效，但应该可以解决问题：

```
if (!possibleColumnValues.Any(rArr.SequenceEqual))
{
    possibleColumnValues.Add(rArr);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T22:09:30.877

该`Contains`方法依赖`Equals`于其元素的方法来查看它是否包含特定值。数组不会覆盖 的默认实现，`Equals`因此`Contains`如果数组是对同一对象的引用（默认行为），则只会认为数组等于列表中已有的数组`Equals`。

要解决此问题，您可以使用`Enumerable.Any()`扩展方法和`SequenceEqual`扩展方法：

```
if (!possibleColumnValues.Any(item.SequenceEqual))
{
    possibleColumnValues.Add(rArr);
} 
```

# python - Python 2.7.3 errno 13 使用有效uid打开777权限文件

> ID：14884855
> 
> 赞同：1
> 
> 时间：2013-02-14T21:59:38.087
> 
> 标签：python, file-permissions, errno

我在 Linux 中的 2770 目录中有一个具有 777 权限的文件。作为 root，我以交互方式启动 Python 并尝试将有效 UID 设置为没有 root 权限的用户（我的常规用户帐户，UID 1010）以访问文件，但我得到 Errno 13

操作系统：Linux (RHEL6U3)
Python：2.7.3
父目录权限：2770（root 拥有，用户 UID 在组中）
文件权限：777 (-rwxrwxrwx)

根父目录：

```
[root@server / ]#  ls -AFlhd test
64K drwxrwxrwx  4 root FSTEST    2.1K Feb 14 20:42 test/ 
```

父目录：

```
[root@server /test ]#  ls -AFlhd t1
64K drwxrws---  4 root FSTEST    2.1K Feb 14 20:42 t1/ 
```

文件：

```
[root@server /test/t1]#  ls -AFlh 06.dd
-rwxrwxrwx 1 root   root             1.0G Feb 14 19:34 06.dd* 
```

如何产生问题：

```
[root@server /test/t1]#  python
Python 2.7.3 (default, Jan 22 2013, 16:23:20) 
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.

>>> import os
>>> print(os.getresuid(),os.getresgid())
((0, 0, 0), (0, 0, 0))

>>> os.stat("06.dd")
posix.stat_result(st_mode=33279, st_ino=1064458, st_dev=64513L, st_nlink=1, st_uid=0, st_gid=0, st_size=1073741824, st_atime=1360875706, st_mtime=1360870449, st_ctime=1360875600)

>>> fp = open("06.dd")
>>> fp.close()
>>> os.seteuid(1010)
>>> print(os.getresuid(),os.getresgid())
((0, 1010, 0), (0, 0, 0))

>>> fp = open("06.dd")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 13] Permission denied: '06.dd' 
```

所以这是不寻常的部分......如果我将父目录的权限更改为 777，则`fp=open("06.dd")`可以使用`os.seteuid(1010)`！

甚至更奇怪的部分：如果我 su 到我的用户并以这种方式交互地运行 Python，它也可以正常工作，而无需将文件设置为 777！

```
[root@server /test/t1]#  su - user ; cd /test/t1/
[user@server /test/t1 ]$ python
Python 2.7.3 (default, Jan 22 2013, 16:23:20) 
[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> print(os.getresuid(),os.getresgid())
((1010, 1010, 1010), (1000, 1000, 1000))

>>> os.stat("06.dd")
posix.stat_result(st_mode=33279, st_ino=1064458, st_dev=64513L, st_nlink=1, st_uid=0, st_gid=0, st_size=1073741824, st_atime=1360875706, st_mtime=1360870449, st_ctime=1360875600)

>>> fp = open("06.dd")
>>> fp.close() 
```

这是怎么回事？在这一点上，我完全糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:12:32.953

您不是 的所有者`t1`，因此所有者权限不适用于您。

在第一种情况下，您的有效组不是`FSTEST`组，因此组权限也不适用于您。在第二种情况下，您的有效组就是`FSTEST`组，因为 su 足够聪明地设置您的有效组以及您的有效用户（它们是单独的系统调用）。尝试使用

```
os.setegid(1000)
os.seteuid(1010)
fp = open("06.dd") 
```

# c# - WPF - 首次运行时清除应用程序中的参数值

> ID：14884856
> 
> 赞同：0
> 
> 时间：2013-02-14T21:59:44.843
> 
> 标签：c#, .net, wpf

我正在使用 WPF 开发应用程序。在用户安装并启动应用程序后，如果参数的值为空，我会在用户范围的应用程序设置中保存一些参数。

```
if (Properties.Settings.Default.appKey == string.Empty)
{
    Properties.Settings.Default.appKey = "some random key"
    Properties.Settings.Default.Save();
} 
```

问题是，如果用户卸载应用程序然后再次安装，参数的值将保留。

是否有可能知道我的应用程序是否第一次运行以清除值并再次设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:20:09.727

您可以使用其他 bool 属性“FirstTimeUse”作为用户范围，默认值 = True 并在运行时检查它，如果为真，您知道这是第一次使用。然后将其设置为 false 并保存设置文件。下次启动您的应用程序时，您知道它之前已经启动过。

```
if(Settings.Default.FirstTimeUse)
        {
            //clean the values here

            Settings.Default.FirstTimeUse = false;
            Settings.Default.Save();
        } 
```

# vba - 调用从 VB.NET 代码返回 UDT 的 Access Interop 函数会引发错误

> ID：14884861
> 
> 赞同：1
> 
> 时间：2013-02-14T22:00:01.483
> 
> 标签：vba, ms-access, com, interop

我有一个 Microsoft Access 2000 数据库。有一个声明了类型的模块：

```
Type MyTestType
    Something As String
End Type 
```

还有一个函数返回上述类型：

```
Function MyTestFunction() As MyTestType    
    Dim a As MyTestType        
    MyTestFunction = a    
End Function 
```

我正在尝试使用 VB.NET 从 .NET 4.0 控制台应用程序自动调用该函数。我有一个方法如下：

```
Sub ProcessAccessFunction()
    Dim access As New ApplicationClass()

    Try
        access.OpenCurrentDatabase("c:\MyTestFolder\MyTestDatabase.mdb", False)
        Dim result = access.Run("MyTestFunction")
    Finally
        access.Quit(AcQuitOption.acQuitSaveNone)
    End Try
End Sub 
```

但是，我收到一条错误消息，提示“该值不在预期范围内”。我需要做什么才能在我的 VB.NET 应用程序中成功接收对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:50:35.943

用户定义类型在 VBA 中非常有限。
例如，在 Access 本身中，您不能这样做：

```
?TypeName(Application.Run("MyTestTypeFunction")) 
```

您将收到*运行时错误“5”：无效的过程调用或参数*。
UDF 的可见性非常有限，以至于外部世界根本看不到它。
`Application.Run`使用 OLE 自动化执行函数调用。由于您的 UDF 仅在您的数据库范围内为人所知，而不是在任何地方导出，因此外部世界没有可用的类型信息，并且`Application.Run`在访问本身和从 .Net 调用时使用它会失败。

如果你的函数只是返回一个字符串，它会完美地工作。

# c# - 从计算机网络名称中获取用户名

> ID：14884867
> 
> 赞同：0
> 
> 时间：2013-02-14T22:00:34.640
> 
> 标签：c#, active-directory

我有一个 ips 列表，用于获取这些 ips 的计算机名称。我想知道 C# 中是否有将计算机名称与登录用户绑定到该计算机的方法，反之亦然。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:12:33.463

我从未找到枚举所有已登录用户、快速切换或终端服务器的方法，但您可以使用 WMI 并查询进程（Win32_Process）以获取 explorer.exe 进程的所有者。这将告诉您谁主动登录到本地计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:05:24.650

您需要枚举每台机器上的会话并选择一个（或多个）您喜欢的。请注意，它需要框管理员权限（即以域管理员身份运行）。有关详细信息，请参阅[C# - 登录会话列表](https://stackoverflow.com/questions/994652/c-sharp-list-of-logon-sessions)。

请注意，结果将是多对多映射。

# ruby-on-rails-3 - Nginx+Wordpress+Rails 以 wp 作为子目录

> ID：14884868
> 
> 赞同：0
> 
> 时间：2013-02-14T22:00:43.677
> 
> 标签：ruby-on-rails-3, wordpress, nginx

我的这个环境几乎可以工作，但是永久链接和图像不起作用。

我的站点部署在 /var/www/staging-site/current/public；我的 Wordpress 博客部署在 /var/deployer/www/blog；

```
http {
   server {
        listen  80;
        server_name www.mysite.com;
        access_log  logs/nosubdomain.access.log;
        return 301 $scheme://mysite.com$request_uri;
    }

    server {
        listen       80;
        server_name  mysite.com *.mysite.com;
        #charset koi8-r;

        access_log  logs/subdomain.access.log;
        root /var/www/staging-site/current/public;

        location / {
            passenger_enabled on;
            rails_env staging;
                root /var/www/staging-site/current/public;
        }

        location /blog/ {
           root          /home/deployer/www;
           fastcgi_index  index.php;

           if (!-e $request_filename) {
             rewrite  ^(.*)$  /blog/index.php?q=$1  last;
           }
           fastcgi_param  SCRIPT_FILENAME    /home/deployer/www$fastcgi_script_name;
           fastcgi_pass   localhost:9000;  # port to FastCGI
           break;
        }

        location ~* ^/assets/{
                root /var/www/staging-site/current/public;
                expires max;
                add_header Cache-Control public;
                break;
        }
} 
```

我希望 www.mysite.com 显示我的网站，并希望 www.mysite.com/blog 显示 wordpress 博客。它可以工作，但链接不起作用。例如[http://mysite.com/blog/wp-content/uploads/2012/04/bname-268x300.jpg&w=150&h=150&zc=1&q=90](http://mysite.com/blog/wp-content/uploads/2012/04/bname-268x300.jpg&w=150&h=150&zc=1&q=90)不显示图像，即存在，它显示了根博客。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:36:00.667

我同意有关您的 URI 中的斜杠和更改`try_files`...上的属性的评论。

[这](https://stackoverflow.com/questions/14860932/nginx-wordpress/14861286#14861286)是我的 WordPress 博客的 nginx 配置。其中的一部分可以插入到 nginx 配置中的任何位置块中。

如果这没有帮助，请告诉我。

# windows - Windows Phone 中是否提供 Android 广播侦听器类型 API？

> ID：14884871
> 
> 赞同：0
> 
> 时间：2013-02-14T22:00:53.650
> 
> 标签：windows, windows-phone-7, windows-phone-8, windows-phone

我一直在寻找类似于 Android 中的 BroadcastListener 的 API。我想收听收到的短信并用我的应用程序逻辑对其做出反应。这可能吗？如果不完全像这样，那么还有其他选择吗？我做了一些研究，发现了[SmsInterceptor](http://msdn.microsoft.com/en-US/library/windowsphone/develop/windows.phone.networking.networkoperators.smsinterceptor%28v=vs.105%29.aspx) API。但这不能在代码中使用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:00:58.050

目前没有可供开发人员使用的选项。

正如您所提到的，您正在寻找 SmsInterceptor API，但它不是您可以在代码中使用的东西，因为不允许在提交到 Windows Phone Store 的应用程序中使用为此所需的 ID_CAP。

SmsInterceptor API 可能是为 OEM 和运营商添加的，以便在他们的应用程序中实现，但没有关于其使用的文档。即使要克服这一点，Microsoft 也会自动扫描提交到商店的所有应用程序，并且会使任何包含不受支持的 API 的应用程序失败。

# ios - JSONModel 属性协议声明错误？

> ID：14884872
> 
> 赞同：4
> 
> 时间：2013-02-14T22:00:58.967
> 
> 标签：ios, xcode, json, jsonmodel

我在通过[JSONModel 库读取 JSON 时遇到问题](https://github.com/icanzilb/JSONModel)

```
{"images":[{"id":1,"name":"name1","img":"3423","note":"note1"},{"id":2,"name":"name2","img":"rew","note":"note2"},{"id":3,"name":"name3","img":"dsfs","note":"note3"},{"id":4,"name":"name4","img":"cxvxc","note":"note4"},{"id":5,"name":"name5","img":"erwe","note":"note5"}]} 
```

类模型是

```
#import "JSONModel.h"

@protocol ImagesModel @end

@interface ImagesModel : JSONModel
@property int id;
@property (strong, nonatomic) NSString* name;
@property (strong, nonatomic) UIImage* img;
@property (strong, nonatomic) NSString* note;
@end 
```

我得到了这个错误

```
 Terminating app due to uncaught exception 'Bad property protocol declaration', reason: '<ImagesModel> is not allowed JSONModel property protocol, and not a JSONModel class.' 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:43:24.353

我可以看到您粘贴的代码有两个问题。

你的模型很好，但它是一个项目的模型 - 即。这是您将用于加载单个图像的模型 - 不是一次加载所有图像。因此，您需要一个模型来描述您拥有一组图像，以及另一个模型（您拥有的模型）来描述每个图像对象。

第二个问题是您的属性之一是 UIImage 对象，但您在 JSON 提要中传递字符串。

因此，要让您的示例正常工作，您需要：

```
#import "JSONModel.h"

//define the single image object protocol
@protocol ImageModel @end

//define the single image model
@interface ImageModel : JSONModel
@property int id;
@property (strong, nonatomic) NSString* name;
@property (strong, nonatomic) NSString* img;
@property (strong, nonatomic) NSString* note;
@end

@implementation ImageModel
@end

//define the top-level model for the collection of images
@interface Images : JSONModel
@property (strong, nonatomic) NSArray<ImageModel>* images;
@end 
```

然后读取您的 JSON 字符串并创建一个图像模型：

```
NSError* err = nil;
Images* imagesCollection = [[Images alloc] initWithString:JSONstring error:&err]; 
```

然后 imagesCollection.images 中的每个元素都是一个**ImageModel**实例。

瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T09:18:48.120

我认为您没有在`.m`文件中实现此类。因此，当`JsonModel`内部执行该`NSClassFromString()`方法时，它会崩溃。

# r - 在散点图中以不同的方式着色/填充一个点

> ID：14884874
> 
> 赞同：2
> 
> 时间：2013-02-14T22:01:05.377
> 
> 标签：r, col

我正在使用基本 R 图形制作包含数千个数据点的散点图。其中一个点具有最高的“y”值。我想填补这一点，让它看起来不一样。在过去，我已经通过以下方式之一完成了这项工作。当然，当时的点数很少，因此我能够轻松管理它。现在我有〜3000分。有任何想法吗？

```
col=c{'black','black','black','red','black','black'}
pch=c(16,16,16,17,16,16) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:06:53.483

选项 1：确定最大值并制作颜色矢量

```
set.seed(47)
n <- 1e4
xx <- runif(n)
yy <- rexp(n)
colors <- rep("black", n)
colors[which.max(yy)] <- "red"
plot(xx, yy, col = colors, pch = 16) 
```

选项 2：分别绘制最大值。这可能更容易，特别是如果您想调整更多特性而不仅仅是颜色。

```
plot(xx, yy, pch = 16)
points(xx[which.max(yy)], yy[which.max(yy)], col = "red", pch = 17, cex = 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:09:52.427

我认为这样做可能会更快一些：

```
plot(xx, yy, col=(yy==max(yy)), pch=19) 
```

这将创建一个向量`TRUE`和`FALSE`将被强制转换为`1`s 和`0`s 的值，因此您可能必须将 a 附加`+1`到该语句以避免使用白色：

```
plot(xx, yy, col=(yy==max(yy))+1, pch=19) 
```

# javascript - 防止窗口调整大小行为

> ID：14884875
> 
> 赞同：-2
> 
> 时间：2013-02-14T22:01:06.613
> 
> 标签：javascript, jquery, html, css

*   我用百分比写了一个CSS。
*   我想保留百分比

当浏览器窗口重新调整大小时，如何防止布局更改？

我的意思是我不希望百分比仅在浏览器窗口调整大小时生效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:04:57.247

如果您想使用百分比，但不让它们基于窗口，则必须将它们包装在一个固定`width`（或至少`max-width`）块中：

```
<div id="container">
    <div id="column-left">
    </div>
    <div id="column-right">
    </div>
</div> 
```

```
#container {
    width: 1000px;
}

#column-left {
    width: 30%;
}

#column-right {
    width: 70%;
} 
```

演示：[http ://cssdesk.com/3gJNj](http://cssdesk.com/3gJNj)

# html - 使用伪选择器 ::after

> ID：14884884
> 
> 赞同：0
> 
> 时间：2013-02-14T22:01:38.300
> 
> 标签：html, css

所以我将两张图片并排放置。

我一左一右浮动，我想用伪选择器::after 清除浮动

下面的文本只会在图像之间移动。

我总是遇到 ::after 选择器的问题，它并不总是对我有用。任何指示或建议将不胜感激。

编辑：忘记添加 ::after 代码

CSS

```
div#product > img:first-child {
    float: left; 
    margin-left: 55px;
    margin-bottom: 20px;
}
#product img {
    float: right; 
    margin-right: 55px;
    margin-bottom: 20px;
}
img::after {
    clear:both;
} 
```

HTML

```
<div id="product">
            <img src="#" width="240" >
            <img src="#" width="240" >
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:11:21.140

```
img:after {
    content: ' ';
    display: block;
    clear: both;
} 
```

# node.js - heroku 使用玉器出错

> ID：14884889
> 
> 赞同：1
> 
> 时间：2013-02-14T22:02:02.843
> 
> 标签：node.js, heroku, pug

调用函数时出现错误`render`[此应用在 Heroku 上运行]

web.js：

```
var async   = require('async');
var express = require('express');
var util    = require('util');

// create an express webserver
var app = express.createServer(
  express.logger(),
  express.static(__dirname + '/public'),
  express.bodyParser(),
  express.cookieParser(),
  // set this to a secret value to encrypt session cookies
  express.session({ secret: process.env.SESSION_SECRET || 'secret123' }),
);

app.set('views', __dirname + 'views');
app.set('view engine', 'jade');

// listen to the PORT given to us in the environment
var port = process.env.PORT || 3000;

app.listen(port, function() {
  console.log("Listening on " + port);
});

app.get('/', function ( req, res ) {
    res.render('ok', { title : 'ok' });
}); 
```

好的。玉：

```
!!! 5
  html(lang='en')  
    head
      title= title   
    body 
      div#navigation 
```

包.json：

```
{
  "name":    "package",
  "version": "0.0.1",

  "description": "Facebook integration, Node.js",

  "dependencies": {
    "express": "latest",
    "jade":"0.17.0"
  },

  "engines": {
    "node": "0.8.19",
    "npm" : "1.2.10"
  }
} 
```

错误：

```
TypeError: Cannot read property '0' of undefined
    at new View (/app/node_modules/express/lib/view.js:41:65)
    at Function.app.render (/app/node_modules/express/lib/application.js:486:12)
    at ServerResponse.res.render (/app/node_modules/express/lib/response.js:753:7)
    at /app/web.js:32:9
    at callbacks (/app/node_modules/express/lib/router/index.js:161:37)
    at param (/app/node_modules/express/lib/router/index.js:135:11)
    at pass (/app/node_modules/express/lib/router/index.js:142:5)
    at Router._dispatch (/app/node_modules/express/lib/router/index.js:170:5)
    at Object.router (/app/node_modules/express/lib/router/index.js:33:10)
    at next (/app/node_modules/express/node_modules/connect/lib/proto.js:199:15) 
```

如果我替换`res.render('ok', {title : 'ok'});`为`res.end('some text');`完美。

有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:45:31.267

最新版本的 Express 似乎使用 app.engine() 而不是 app.set('view engine') ( [doc](http://expressjs.com/api.html#app.engine) )

```
app.engine('jade', require('jade').__express); 
```

您可以查看[此函数源](https://github.com/visionmedia/express/blob/master/lib/application.js#L138)的更多详细信息。

这可能会解决您的问题。

此外，将“/”添加到您的视图路径（或将其删除，因为它是express[的默认值）](https://github.com/visionmedia/express/blob/master/lib/application.js#L82)

编辑：我检查了是否在某处使用了“查看引擎”设置，[并且](https://github.com/visionmedia/express/blob/master/lib/application.js#L485)正如本杰明所说，我不明白为什么你的电话`app.set('view engine')`不起作用。

编辑 2：我只是尝试运行您的代码，但有几个失败点。这是在我的本地计算机上工作的固定 web.js 文件：

```
var express = require('express');
var util    = require('util');

// create an express webserver
var app = express(
  express.logger(),
  express.static(__dirname + '/public'),
  express.bodyParser(),
  express.cookieParser(),
  // set this to a secret value to encrypt session cookies
  express.session({ secret: process.env.SESSION_SECRET || 'secret123' })
);

app.set('views', __dirname + '/views');
app.set('view engine', 'jade');

// listen to the PORT given to us in the environment
var port = process.env.PORT || 3000;

app.listen(port, function() {
  console.log("Listening on " + port);
});

app.get('/', function ( req, res ) {
    res.render('ok', { title : 'ok' });
}); 
```

变更日志：

*   删除`require('async')`，因为它未使用且不在 package.json 中
*   使用 express() 而不是已弃用的 '.createServer'
*   `/`在视图目录路径设置中添加了缺少的内容
*   `express.session`通话后去掉逗号

待办事项： - 删除文件中的`html`缩进`ok.jade`。

# com - 使用 COM 处理 Notes 对象，内存泄漏

> ID：14884892
> 
> 赞同：1
> 
> 时间：2013-02-14T22:02:18.490
> 
> 标签：com, memory-leaks, lotus-notes, lotus-domino, lotus

我使用 C# 与 Domino COM 交互。我正在使用 Lotus Notes 8.5.2。视觉工作室 2008，Windows 7 SP1。

我正在尝试防止 Lotus 出现此错误：

```
LSXBE: ************************************
LSXBE: ****** Out of Backend Memory *******
LSXBE: ************************************ 
```

以下代码将 NSF 中的每个 NotesDocument 复制到另一个 NSF。从具有 SELECT @All 选择查询的 NotesView 获取 UNID 后，代码使用一次复制一条消息

```
NotesDocument ndoc = nd.GetDocumentByUNID(nve.UniversalID);         
ndoc.CopyToDatabase(nd2); 
```

给定一个 10 GB 的源 NSF，我的应用程序使用的内存量（我相信是私有字节）稳步增长到大约 450 MB。ANTS Memory Profiler 表明几乎所有内存都分配给非托管内存，即 COM。

1.  我可以通过处理 Notes 对象来减少内存消耗吗？我还没有看到释放 NotesSession、NotesDatabase、NotesDocument 等的方法。有没有办法释放内存？

我尝试了在每 5000 个文档之后调用 GC.Collect() 和 GC.WaitForPendingFinalizers() 的代码版本，它消除了具有 16 GB RAM 的机器上的“后端内存不足”错误。即使复制完成，我将包含以下代码的对象设置为 null 并调用垃圾回收，内存利用率仍保持在 450 MB 左右。

我还尝试将复制代码放在它自己的线程中，然后在线程完成后进行垃圾收集。那没有帮助。

1.  如果没有针对 Notes 对象的处置方法，我还能如何降低内存利用率？

代码 C#

```
//Establish session
NotesSession ns = new Domino.NotesSessionClass();
ns.Initialize("");

//Open source NSF
NotesDatabase nd = ns.GetDatabase("", "test.nsf", false);
//Open destination NSF.
//Assume that all design elements of nd2 are identical to those of nd
NotesDatabase nd2 = ns.GetDatabase("", "test2.nsf", false);

//Create view that returns all documents.
NotesView nView2 = nd.GetView("$All");
nd.CreateView("All-DR", "SELECT @ALL", nView2, false);
NotesView nView = NotesConnectionDatabase.GetView("All-DR");

//Loop through entries in the new view
NotesViewEntry nvec = nView.AllEntries;
nve = nvec.GetFirstEntry();

for (int j = 1; j <= intEntryCount; j++)
{
     if (j == 1)
     {
          nve = nvec.GetFirstEntry();
     }
     else
     {
          nve = nvec.GetNextEntry(nve);
     }

     //Copy document to second database.
     NotesDocument ndoc = nd.GetDocumentByUNID(nve.UniversalID);         
     ndoc.CopyToDatabase(nd2);
 }
 //End loop.
 //All documents are copied. 
```

我有这些想法，没有一个是吸引人的：

1.  每次调用 CopyToDatabase 后调用垃圾回收。鉴于我相信我正在处理 COM 中的内存泄漏，我不认为这会起作用。我也希望它能够降低我的应用程序的速度。

2.  试试 C++ API。我不知道那里是否存在问题。

3.  这是一种非常笨拙的方式......构建一个新的经理应用程序。获取列表 UNID 并将它们写入文本文件。湾。启动复制应用程序。C。复制应用程序从文本文件中复制一部分记录。d。复制应用程序终止，释放其内存。e. 管理器应用程序启动一个新的复制应用程序进程。F。根据需要重复 c - e。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:14:45.687

我不相信 Domino COM 类本身会泄漏。如果他们这样做了，Lotus 将提供一个 recycle() 方法，就像他们在 Java 类中所做的那样。但在这些类的背后是整个 Notes 运行时，它确实为缓存分配了大量内存，所以如果您看到内存增加也就不足为奇了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T20:13:26.057

您是否尝试过使用`SetProcessWorkingSetSize()`传递参数 -1 和 -1 的显式命令？有时 .NET COM 对象在显式调用之前不会释放内存。[本文](http://www.itwriting.com/dotnetmem.php)更详细地讨论了这一点。

[我在这篇 SO 帖子中](https://stackoverflow.com/questions/16367328/memory-leak-in-threaded-com-object-with-python)遇到了类似的问题，这解决了这个问题。

# windows-8 - when_any 是如何工作的？

> ID：14884897
> 
> 赞同：1
> 
> 时间：2013-02-14T22:02:52.270
> 
> 标签：windows-8, c++-cx, ppl

我有一个`std::vector< concurrency::task<void> >`可能会或可能不会按顺序加载的任务列表。我接到了`concurrency::when_any`电话，但不知道如何使用它的足够信息。

我遇到了[这个使用调用 (ScenarioInput1.xaml.cpp:100) 的 microsoft 示例](http://code.msdn.microsoft.com/windowsapps/Windows-8-Asynchronous-08009a0d/sourcecode?fileId=62668&pathId=1464804857)，但我不了解 pair 参数，以及如何使其适应我的返回值。

**编辑：**我正在尝试做的事情：

```
struct TaskInfo {
  unsigned int                    uniqueId;
  concurrency::task<unsigned int> task;
};
typedef std::vector< TaskInfo > TaskList;
typedef std::vector< unsigned int > TaskReturns;

// Somewhere inside a class, tasks and finished are member variable.
TaskList tasks;
bool finished = false;

// Inside a member function of the same class as above
// Populate the tasks

concurrency::when_any( tasks.begin(), tasks.end() ).then([this](std::vector<unsigned int> ids){
  for( std::vector<unsigned int>::iterator list=ids.begin; list != ids.end(); ++ids ) {
    // a mutex lock would happen here
    for( TaskList::iterator allTasks = tasks.begin(); allTasks != tasks.end(); ++allTasks ) {
      if ( *list == allTasks->uniqueId ) { tasks.erase( allTasks ); break; }
    }
    // mutex unlock
    if ( tasks.size() == 0 ) { finished = true; break }
  }
}

// In another member function
if ( finished ) doOtherThings(); 
```

如果我想做的事情没有经过深思熟虑或效率不高，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T23:25:51.327

这是任务的“选择”组合。您有一个延续 (then)、一个连接 (when_all) 和选择 (when_any)。 [文档说](http://msdn.microsoft.com/en-us/library/windows/apps/hh749973.aspx)...

> 当作为参数提供的任何任务成功完成时，创建一个将成功完成的任务。

有关详细信息，请参阅[C++中的](http://msdn.microsoft.com/en-us/library/windows/apps/hh780559.aspx)[任务类](http://msdn.microsoft.com/en-us/library/windows/apps/hh750113.aspx)和异步编程。 [更多讨论和示例](http://msdn.microsoft.com/en-us/magazine/hh781020.aspx)。

举个例子：

```
task<string> tasks[] = {t1, t2, t3};
auto taskResult =  when_all (begin(tasks), end(tasks))
    .then([](std::vector<string> results) { 
```

……相当于……

```
(t1 && t2 && t3).then 
```

然而 ...

```
task<string> tasks[] = {t1, t2, t3};
auto taskResult = when_any (begin(tasks), end(tasks))
    .then([](string result) { 
```

……相当于……

```
(t1 || t2 || t3).then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:53:15.397

Hans Passant 提供了[这个链接](http://msdn.microsoft.com/en-us/library/hh749973.aspx)，告诉我`when_any( ... ).then([]( <params> )`需要是 type `std::pair<returnType, size_t index>`。

# php - 使用flush（）替换最后一行而不是在php中新建一个

> ID：14884902
> 
> 赞同：1
> 
> 时间：2013-02-14T22:03:27.653
> 
> 标签：php, foreach, sleep, flush

可以说我的 php 代码类似于下面。. .

```
$range = range(0, 5);
foreach ($range as $times) {
if (ob_get_level() == 0) ob_start();
for ($i = 0; $i<1; $i++){
echo "<br>example ".$times;
echo str_pad('',4096)."\n";   
ob_flush();
flush();
sleep(1.2);
}
ob_end_flush();
} 
```

它显示的是什么。. .

```
example1
example2
example3
example4
example5 
```

在显示下一行之前它会等待很短的时间，我不想一次显示所有五个，我想用下一个替换 example1，等等所有五个这在 php 中可能吗？欢迎任何答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:25:22.143

您需要使用 javascript 替换页面上已有的元素：

```
<p id="ob">1</p>
<?php
$range = range(0, 5);
foreach ($range as $times) {
    if (ob_get_level() == 0) ob_start();
    for ($i = 0; $i<1; $i++){
        echo "<script>document.getElementById('ob').innerHTML ='example$times';</script>";
        echo str_pad('',4096)."\n";
        ob_flush();
        flush();
        sleep(1.2);
    }
    ob_end_flush();
}
?> 
```

或者更好的方法是使用 AJAX 轮询服务器以获取下一个值。

```
<?php
if(isset($_GET['poll'])){
    echo $_GET['poll']+1;
    die;
}
?>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
var value = 0;
function poll(){
    setTimeout(function(){
        $.ajax({ url: "./test.php?poll="+value,cache: false,
        success: function(data){
            value = data;
            $("#ob").html('example'+value);
            //Next poll
            poll();
        }});
    }, 1200);
}

$(document).ready(function(){
    poll();
});
</script>
<p id="ob">example0</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T22:08:24.497

假设您正在输出 html，您应该在客户端使用 javascript 执行此操作。

php 的替代方法是显示一行并让页面重新加载以显示下一行。不必要的复杂和资源浪费。

请注意，php 无法修改已发送到浏览器的 html。

# arrays - 如何找出matlab中输出之间最小的值？

> ID：14884906
> 
> 赞同：1
> 
> 时间：2013-02-14T22:03:36.980
> 
> 标签：arrays, matlab, comparison

例如 ：

```
S1=3
S2=6
S3=10 
```

我想确定哪个 S# 最小。

我尝试了以下方法：

```
s=[S1 S2 S3] 

Low=min(s) 
```

但是，这仅显示最小输出是**什么**，但不能确定**哪个**S 是最小的。什么代码允许我这样做？

另外，我可以确定**s**中的哪个数组是最小的吗？（第 1 次第 2 次或第 3 次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:07:14.917

```
x = [2 4 5 1]
[V I] = min(x) 
```

我返回索引。

# firefox-addon - 使用内容脚本的 Firefox 扩展 DOM 操作

> ID：14884917
> 
> 赞同：1
> 
> 时间：2013-02-14T22:04:42.013
> 
> 标签：firefox-addon, firefox-addon-sdk

我想对当前网页的 dom 进行更改

```
tabs.activeTab.attach({  
                contentScript:
window.content.document.body.length); // is showing undefined 
```

所以我无法遍历所有 dom 元素并对它们进行更改。当我直接尝试编写标签时，我遇到了安全异常

请建议我一种访问窗口对象的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:07:00.117

您的示例也不适用于我，但该`contentScript`属性仅采用字符串或数组，因此您需要执行以下操作：

```
var tabs = require('tabs');
tabs.activeTab.attach({
  contentScript: 'console.log(window.content.document.body.toString());'
}); 
```

`document.querySelectorAll`您应该能够从那里修改 DOM，但除非您包含 jQuery，否则使用原始 DOM 元素节点会有点困难。

# c# - 使用 IList 的下拉菜单需要 Guid

> ID：14884918
> 
> 赞同：0
> 
> 时间：2013-02-14T22:04:40.143
> 
> 标签：c#, asp.net-mvc

我在访问使用 Guid 参数生成 .ToList() 的服务时遇到了一些问题

```
 public IList<Info> GetBusinessLocations(Guid businessId)
    {
        using (var db = new DealerContext())
        {
            return GetDealerDetails(
                db.Details
                  .Join(db.BusinessLocations,
                  x => x.BusinessId,
                  y => y.BusinessId, (x, y) => x)
                  .Where(d => d.BusinessId == businessId), db)
                  .ToList();
        }
    } 
```

我尝试使用 guid 作为参数编写 ActionResult，但我继续收到错误消息，即“参数字典包含参数 'businessId' 的空条目”

```
 public ActionResult Create(Guid businessId)
    {

        ViewBag.Locations = new SelectList(ServiceBus.GetBusinessLocations(businessId), "BusinessId", "LocationName");

        return View(IdGenerator());
    }

 private static Data.Models.Business IdGenerator()
    {
        var model = new Models.Business
        {
            BusinessId = Guid.NewGuid()
        };
        return (model);
    } 
```

在我看来，我只是将下拉列表称为

```
@Html.DropDownListFor(m =>m.BusinessId, (IEnumerable<SelectListItem>)ViewBag.Locations,"Select your Businesses Location") 
```

如果有人能提供一些见解，我将不胜感激。我很难在 SO 上找到类似的场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T16:47:55.923

我最终对这段代码进行了很多更改，所以我用我的修复来结束这个问题。希望该方法可以帮助其他人。

服务查询

```
public IList<DealerInfo> GetBusinessLocations(Guid? locationId)
         {
        using (var db = new DealerContext())
             {
            var query = db.DealerDetails
                .Join(db.DealerValidations,
                    d=>new {bizId=d.BusinessId,lId=d.LocationId},
                    dv=>new {bizId=dv.BusinessID,lId= dv.LocationID},
                    (d,dv)=>d);

            if (locationId.HasValue)
                query = query.Where(d => d.LocationId == locationId.Value);

            return GetDealerDetails(query)
                .OrderBy(d =>d.DealerName)
                .ToList();
        }
    } 
```

控制器动作

```
 public ActionResult GetLocations(Guid? id)
    {
        IList<DealerInfo> locations;

        locations = Service.GetBusinessLocations(id);

        ViewData["LocationId"] = new SelectList(locations, "LocationId", "DealerName", "(Select)");

        return PartialView("_DealerDropDown");
    } 
```

局部视图

```
<div class="editor-field" id="locationdropdown">
    @Html.DropDownList("LocationId", ViewData["LocationId"] as SelectList, "(Select)", new { onchange = "onLocationSelected()", id="querydrop" })

</div> 
```

我知道这对我的特定问题非常具体，但希望在类似情况下的人可能会发现这很有用。

# c# - 从您打算测试的类继承是否总是次优的？

> ID：14884921
> 
> 赞同：1
> 
> 时间：2013-02-14T22:04:57.603
> 
> 标签：c#, unit-testing, design-patterns, inheritance, mocking

所以，我一直在阅读有效地使用旧代码。它很棒，涵盖了许多很酷的技术，这些技术也可以“安全”地用于未经测试的代码。

我最喜欢的部分之一是建议在存在麻烦的依赖项时扩展您打算测试的类。例如

```
class FooBar
{
  public List<Foo> ReadFoos()
  {
    var s=new SqlConnection(Config.SomeConntectionStirng);
    s.Read("Foo")....
  }
} 
```

被重构为

```
class FooBar
{
  public List<Foo> ReadFoos()
  {
    var s=MyConnection();
    s.Read("Foo")....
  }
  protected virtual IConnection MyConnection()
  {
    return new SqlConnection(Config.SomeConnectionString);   
  }
} 
```

然后为了测试它，你会像这样继承它：

```
class TestableFooBar : FooBar
{
  protected override IConnection MyConnection()
  {
    return new MockConnection();
  }
} 
```

并在扩展类上进行测试。

现在，我的问题。可以这样做并且以后不重构吗？我这么说的主要原因是因为这对于一些通常难以单元测试而不会使调用 API 更难使用的代码很有用。在公共 API 上，您肯定希望它尽可能简单。那么，按设计保留这样的事情是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T22:31:35.557

从设计的角度来看，“提取和覆盖”可能不是您*选择*完成的地方，但它归结为更改现有代码与添加新功能的预算。虽然您可能也不热衷于更改公共 API，但有一些技术可以保留 API，同时还允许更适当的依赖注入。我相信这本书讨论了一种这样的技术，它是一个默认构造函数，它提供对重载的依赖（下面的示例），另一种可以简单地使用依赖注入容器。

```
public class Foo
{
     IDependency dependency;

     public Foo() // preserves API
          : this(new Dependency())
     {
     }

     internal Foo(IDependency dependency) 
     {
         this.dependency = dependency;
     } 
```

注意：在此示例中，我将第二个构造函数标记为内部，但您可以将其保留为公共，特别是如果您希望程序集之外的类可以选择提供该依赖项。为了简单的可测试性，我喜欢 internal 修饰符，因为我会通过“InternalsVisibleTo”程序集属性将内部暴露给我的单元测试项目。这使您可以保持 API 干净，但也可以对诸如此类的技术以及内部辅助类具有最大的可测试性。

# excel - 将 Excel VBA 单行宏应用于单元格区域

> ID：14884927
> 
> 赞同：0
> 
> 时间：2013-02-14T22:05:31.567
> 
> 标签：excel, vba

有人可以解释一下如何让这个宏在整个列上运行而不是单行单元格吗？即检查每个单独单元格的值，并在其所在行的相应单元格中执行所需的计算和输出。

```
Sub Calculate_Costs()
If Cells(2, 7) = "One Man" And Cells(2, 6) >= Cells(2, 5) Then
Cells(2, 8) = 6.5 + ((Cells(2, 6) - 20) * 0.23)
ElseIf Cells(2, 7) = "One Man" And Cells(2, 6) < Cells(2, 5) Then
Cells(2, 8) = 6.5 + ((Cells(2, 5) - 20) * 0.23)
ElseIf Cells(2, 7) = "Two Man" And Cells(2, 6) >= Cells(2, 5) Then
Cells(2, 8) = 38 + ((Cells(2, 6) - 50) * 0.38)
ElseIf Cells(2, 7) = "Two Man" And Cells(2, 6) < Cells(2, 5) Then
Cells(2, 8) = 38 + ((Cells(2, 5) - 50) * 0.38)
Else
Cells(2, 14) = "This is not working"
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:40:23.347

就像是：

```
Dim row As Integer
row = 1
While Cells(row, 7) <> ""
    //Your original code here but with 2 replaced with row
    row = row + 1
Wend 
```

循环遍历第 7 列中的所有行，直到找到一个空白单元格。

# .net - 锚定和组重复

> ID：14884929
> 
> 赞同：0
> 
> 时间：2013-02-14T22:05:40.547
> 
> 标签：.net, regex

考虑这个正则表达式：

```
(?:([A-Z][0-9a-z]*)+?) 
```

当应用于字符串“A1BaaC2d”时，它给了我 3 个组：“A1”、“Baa”和“C2d”

但是，当我应用开始和结束字符串锚点时，即 ^(?:([AZ][0-9a-z]*)+?)$ 它不再正常工作。我猜这是一个参考问题（因此我尝试过的额外分组是非捕获和原子的）。但我无法完全解决。如何获取我的组并验证总字符串没有任何前导或尾随字符。

仅供参考，这是一个 .net 正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T03:27:36.987

让我们将其简化为要点：

```
([A-Z][0-9a-z]*)+ 
```

（我去掉了外部的非捕获组，因为它对结果没有影响，我暂时`?`从量词中删除了。）你得到的是一个带有一个捕获组的正则表达式。由于量词的原因，该组中的子表达式必须至少匹配一次，`+`但量词默认情况下是贪婪的，因此它实际上匹配您的输入三次。这是细分：

```
Match 1 = A1BaaC2d
Group 1 = C2d
Capture 1 = A1
Capture 2 = Baa
Capture 3 = C2d 
```

（“第 1 组”指的是该组捕获的*最终*值。在大多数正则表达式风格/工具中，这就是您可以获得的所有信息；.NET 的独特之处在于它还允许您分解所有中间捕获。）

但是，您使用了非贪婪版本的量词`+?`：

```
 ([A-Z][0-9a-z]*)+? 
```

它仍然必须`[A-Z][0-9a-z]*`至少匹配（并捕获）一次，但现在它会停在那里，除非有什么东西迫使它继续。什么都没有，所以你得到三个单独的*Matches*，每个包含一个*Capture*：

```
Match 1 = A1
Group 1 = A1
Capture 1 = A1

Match 1 = Baa
Group 1 = Baa
Capture 1 = Baa

Match 1 = C2d
Group 1 = C2d
Capture 1 = C2d 
```

然后你添加了锚点：

```
^([A-Z][0-9a-z]*)+?$ 
```

现在，每个匹配项必须从字符串的开头开始并在字符串的结尾结束。为了实现这一点，正则表达式引擎覆盖了 的非贪婪`+?`，并且您回到了一个匹配三个 Capture 的状态：

```
Match 1 = A1BaaC2d
Group 1 = C2d
Capture 1 = A1
Capture 2 = Baa
Capture 3 = C2d 
```

下面是我用来生成此输出的代码的最终版本。请注意，您实际上并不需要使用非贪婪的正则表达式；`^([A-Z][0-9a-z]*)+$`也可以。

```
static void Main()
{
  string source = "A1BaaC2d";
  Regex r = new Regex(@"^([A-Z][0-9a-z]*)+?$");
  foreach (Match m in r.Matches(source))
  {
    int x = 1;
    Console.WriteLine(@"Match {0} = {1}", x++, m.Value);
    Console.WriteLine(@"Group 1 = {0}", m.Groups[1]);
    int y = 1;
    foreach (Capture c in m.Groups[1].Captures)
    {
      Console.WriteLine(@"Capture {0} = {1}", y++, c.Value);
    }
    Console.WriteLine();
  }
} 
```

# c# - 随机填充数组，不重复

> ID：14884934
> 
> 赞同：0
> 
> 时间：2013-02-14T22:06:07.927
> 
> 标签：c#, recursion, repeat

我试图用 1-10 的随机数填充一个数组，不重复。我尝试用递归来做到这一点。我正在尝试使用递归和不使用（这里两者都有，两种方式都没有运气）。我有两个代码，两者都不起作用：

1：

```
static int reco(int arr,int[] times)
{
    Random rnd = new Random();
    arr = rnd.Next(1, 11);
    return times[arr] > 0 ? reco(arr, times) : arr;
}

static void Main(string[] args)
{
    int i = 0;
    int[] arr = new int[10];
    int[] times = new int[11];
    Random rnd = new Random();

    for (i = 0; i < 10; i++)
    {
        arr[i] = rnd.Next(1, 11);
        times[arr[i]]++;

        if (times[arr[i]] > 0)
            arr[i] = reco(arr[i], times);
    } 
```

* * *

2：

```
static int reco(int arr,int[] times)
{
    Random rnd = new Random();
    arr = rnd.Next(1, 11);
    if (times[arr] > 0)
        return reco(arr, times);
    else
        return arr;
}
static void Main(string[] args)
{
    int i = 0;
    int[] arr = new int[10];
    int[] times = new int[11];
    Random rnd = new Random();
    for (i = 0; i < 10; i++)
    {
        arr[i] = rnd.Next(1, 11);

        if (times[arr[i]] > 0)
            arr[i] = reco(arr[i], times);

        times[arr[i]]++;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T22:23:05.187

如果你只想要 1 到 10 之间的随机数，你可以`Enumerable.Range`随机使用和排序。

```
var ran = new Random();
int[] randomArray = Enumerable.Range(1, 10).OrderBy(x => ran.Next()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T22:23:18.403

在特定范围内生成唯一的“随机”数字，例如：

```
List<int> theList = Enumerable.Range(0, 10).ToList();
theList.Shuffle(); 
```

示例输出：

```
[1,5,4,8,2,9,6,3,7,0] 
```

随机播放函数（来源：[随机化 List<T>](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)）：

```
public static void Shuffle<T>(this IList<T> list)  
{  
    Random rng = new Random();  
    int n = list.Count;  
    while (n > 1) {  
        n--;  
        int k = rng.Next(n + 1);  
        T value = list[k];  
        list[k] = list[n];  
        list[n] = value;  
    }  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T22:51:54.617

既然您使用的是 C#，并且您知道数组中的随机数，为什么不直接创建一个数组，然后随机化位置呢？这是一个例子：

```
using System.Linq;

//......

Random rand = new Random();
int[] randomNumbers = new int[10] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
randomNumbers.OrderBy(num => rand.Next()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T22:20:35.077

```
 static void Main()
    {
        int[] arr = new int[10];
        List<int> numbers = Enumerable.Range(1, 10).ToList();
        Random rnd = new Random();
        for (int i = 0; i < 10; i++)
        {
            int index = rnd.Next(0, numbers.Count - 1);
            arr[i] = numbers[index];
            numbers.RemoveAt(index);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T22:26:06.607

你可以这样做。递归版本留作原始海报的练习，因为这个问题听起来像是一个家庭作业：

```
int[] arr = new int[10];

// Fill the array with values 1 to 10:
for (int i = 0; i < arr.Length; i++)
{
    arr[i] = i + 1;
}

// Switch pairs of values for unbiased uniform random distribution:
Random rnd = new Random();
for (int i = 0; i < arr.Length - 1; i++)
{
    int j = rnd.Next(i, arr.Length);

    int temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
} 
```

这使用了Eric Lippert 在下面的评论中提出的[Fisher-Yates (Knuth) 洗牌。](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#The_modern_algorithm)

# c# - 静态只读变量初始化

> ID：14884935
> 
> 赞同：2
> 
> 时间：2013-02-14T22:06:20.347
> 
> 标签：c#, static, static-members

我有一些在应用程序生命周期内不会改变的字典对象。我打算使用静态只读变量，任何人都可以提供以下几点输入。

1.  **直接初始化为静态只读**属性和使用私有只读静态变量备份的 GET 运算符的静态属性之间的区别。

2.  使用它们是否有任何风险，因为我在网上阅读过不使用**公共静态**变量。这是否适用于这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:15:58.033

> 我有一些在应用程序生命周期内不会改变的字典对象。

当您标记 Dictionary 类型的变量时`readonly`，您可以防止将您分配的字典替换为另一个字典。您*不会*将该字典设置为只读，因为一旦调用者拿到该字典，他就可以自由地以任何他想要的方式进行更改，将其擦干净，或设置不正确的值（错误地，毫无疑问）。如果您需要将 Dictionary 设为只读，请考虑[从此 answer](https://stackoverflow.com/a/1269311/335858)借用只读包装器的实现。

通常，在变量之上添加属性或具有`{get;private set;}`自动属性的唯一优点`readonly static`是您能够在 setter 中执行额外检查，或在 getter 中添加一些代码（例如，收集访问统计信息或用于记录）。通过反射访问该领域也有影响。看起来您并没有这样做，因此公开只读变量听起来很合适，并且不会带来额外的风险。

**编辑：（**关于使用反射）当您通过反射访问对象数据时，您必须指定您访问的是属性`Xyz`还是字段`Xyz`。相反，当您编写 C# 程序时，您编写`SomeClass.Xyz`，编译器会确定它是适合您的属性还是字段。如果您创建了一个公开字段的类`Xyz`，然后决定将其替换为属性，则只需重新编译*直接*`Xyz`引用的代码即可。但是，如果您编写了一些通过反射 API 访问的代码，则需要重写该代码，因为编译器将无法为您捕获更改。`Xyz` *`Xyz`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:07:41.840

由于作为字段，它们在静态构造函数运行后无法更改，因此在不可变性和线程安全性方面没有理由将静态只读属性包装起来。

但是请注意，有时需要字段上的属性 - 数据绑定就是一个示例，反射的使用也是如此（如果您对其中一个进行标准化可能会更容易）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T22:13:48.583

我建议尽可能使用属性。没有真正的性能损失，这是拥有公共领域最常说的原因。主要好处是您可以将自己与未来的实施细节更改隔离开来。如果您使用该字段，则您编译的调用者每次都与访问字段相关联。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T22:39:18.403

公共静态只读字段和公共静态属性之间几乎没有区别。该属性确实在一定程度上保护了访问，但如果您所做的只是返回值，那么两者并没有真正的不同。

```
// access between these two is almost identical
public class Foo
{
    public readonly static IDictionary<string, int> bar =
        new Dictionary<string, int>();
    public static IDictionary<string, int> Bar
    {
         get { return bar; }
    }
} 
```

您将遇到的问题是，即使该字段已被标记为`readonly`它仍然是可变的。什么是阻止某人调用`Foo.Bar.Clear();` 为了解决这个问题，您可以创建一个副本并返回它，或者您可以找到使用只读字典实现。

```
public class Foo
{
    private readonly static IDictionary<string, int> bar =
        new Dictionary<string, int>();
    public static IDictionary<string, int> Bar
    {
        // now any calls like Foo.Bar.Clear(); will not clear Foo.bar
        get { return new Dictionary<string, int>(bar); }
    }
} 
```

然后，如果您确实需要添加或删除项目，`Foo.Bar`您可以创建函数来限制底层对象的修改方式。

```
public static void AddItem(string key, int value)
{ }
public static void RemoveItem(string key)
{ } 
```

即使您使用实现，如果字典的or是可变的`ReadonlyDictionary`，您仍然可能会遇到修改问题。`TKey``TValue`

总的来说，您所看到的避免使用公共静态变量的原因在这里仍然适用。`Foo.Bar`您正在引入一个静态依赖项，只要重用使用的代码，该依赖项就会被拖拽。除非您正在静态访问的对象是不可变的并且是只读的，否则可能会发生许多不可预见的副作用。

您最好在组合根目录创建对象的单个实例并将其传递给需要依赖项的对象。

```
public void CompRoot()
{
     var bar = new ReadonlyDictionary(
         ... initialize with desired values ...
          // also this object is not in .NET but there
          // are many available on the net
     );

     var obj = new UsesBarDependency(bar);
}

public class UsesBarDependency
{
     private readonly ReadonlyDictionary bar;

     public UsesBarDependency(ReadonlyDictionary bar)
     {
          if (bar == null)
              throw new ArgumentNullException("bar");
          this.bar = bar;
     }

     public void Func()
     {
         // use to access the dependency
         this.bar 
         // over
         Foo.Bar
     }
 } 
```

这样做允许用户`UsesBarDependency`向对象提供任何内容`ReadonlyDictionary`，而不是被迫使用静态`Foo.Bar`依赖项。*

# css-selectors - 缺少 CSS3 选择器：包含

> ID：14884950
> 
> 赞同：1
> 
> 时间：2013-02-14T22:07:41.087
> 
> 标签：css-selectors, jsoup

我在从包含单词“FooBar”的 Web 文档中选择链接时遇到问题。

我尝试`A:contains('FooBar')`了选择器测试，但它在我基于 CSS3 选择器的 jsoup 应用程序中不起作用。

选择器测试：[http ://www.w3schools.com/jquery/trysel.asp?filename=trysel_basic&jqsel=p.intro,%23choose](http://www.w3schools.com/jquery/trysel.asp?filename=trysel_basic&jqsel=p.intro,%23choose)

似乎 CSS3 不支持：包含 [http://www.w3.org/TR/2009/PR-css3-selectors-20091215/#content-selectors](http://www.w3.org/TR/2009/PR-css3-selectors-20091215/#content-selectors)

CSS3 中 :contains 的任何替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:16:45.480

我相信它`:contains`已从 CSS3 规范中删除，并且目前没有浏览器支持它。

如果你想选择一个`href`包含“FooBar”的锚元素，你可以使用这样的东西：

```
a[href*="FooBar"] {
  // your styles here
} 
```

此选择器适用于任何属性，并且在所有主要浏览器中都受支持，包括 IE7+。

见[演示](http://jsfiddle.net/zaknotzak/3Jf9Q/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:36:51.753

[jQuery](http://jquery.com)（更具体地说是[Sizzle](http://sizzlejs.com/)）使用自己的自定义选择器扩展了 CSS 选择器。`:contains`是一个自定义选择器。

# c++ - float 与 int 比较是否需要额外的时间？

> ID：14884952
> 
> 赞同：0
> 
> 时间：2013-02-14T22:07:46.017
> 
> 标签：c++, performance, floating-point, type-conversion

如果你有一个浮点数`double num_float = 5.0;`和以下两个条件。

```
if(num_float > 3)
{
    //...
}

if(num_float > 3.0)
{
    //...
} 
```

**Q：**前一种比较会因为转换`3`成浮点数比较慢，还是真的没有区别？

显然，我假设时间延迟充其量可以忽略不计，但在 while(1) 循环中，我认为从长远来看，可能会丢失相当多的时间（如果它真的更慢的话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T22:12:11.590

由于[“as-if”规则](https://stackoverflow.com/questions/2306587/as-if-in-language-standards)，允许编译器在编译时将文字转换为浮点值。如果这会产生更好的代码，那么好的编译器就会这样做。

为了针对您的编译器和目标平台明确回答您的问题，您需要检查编译器发出的内容以及它的执行方式。但是，如果任何主流编译器都没有将这两个 if 语句中的任何一个转换为最有效的代码，我会感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T22:35:12.580

如果该值是一个常量，那么应该没有任何区别，因为编译器会将常量转换为浮点数作为编译的一部分[除非编译器决定使用“将浮点数与整数比较”指令]。

如果该值是一个整数 VARIABLE，那么将有一条额外的指令将整数值转换为浮点数 [再次强调，除非编译器可以使用“将浮点数与整数比较”指令]。

增加整个过程的时间（如果有的话）很大程度上取决于处理器、浮点指令的工作方式等。

与性能真正重要的任何事情一样，衡量替代方案。最好在不止一种类型的硬件上（例如，如果是 PC，AMD 和 Intel 处理器），然后决定哪个是更好的选择。否则，您可能会发现自己在调整代码以使其在您的硬件上运行良好，但在其他一些硬件上则更糟。这不是一个好的优化——除非你曾经运行的唯一机器是你自己的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T22:55:26.650

注意：这将需要对您的目标硬件重复。下面的代码只是很好地展示了所说的内容。

* * *

[有常数](http://gcc.godbolt.org/#%7B%22version%22%3A3%2C%22filterAsm%22%3A%7B%22labels%22%3Atrue%2C%22directives%22%3Atrue%2C%22commentOnly%22%3Atrue%7D%2C%22compilers%22%3A%5B%7B%22source%22%3A%22bool%20with_int(const%20double%20num_float)%20%7B%5Cn%20%20return%20num_float%20%3E%203%3B%5Cn%7D%5Cn%5Cnbool%20with_float(const%20double%20num_float)%20%7B%5Cn%20%20return%20num_float%20%3E%203.0%3B%5Cn%7D%5Cn%22%2C%22compiler%22%3A%22%2Fusr%2Fbin%2Fclang%2B%2B%22%2C%22options%22%3A%22-O3%20-march%3Dnative%22%7D%5D%7D)：

```
bool with_int(const double num_float) {
  return num_float > 3;
}

bool with_float(const double num_float) {
  return num_float > 3.0;
} 
```

g++ 4.7.2（`-O3 -march=native`）：

```
with_int(double):
  ucomisd       .LC0(%rip), %xmm0
  seta  %al
  ret
with_float(double):
  ucomisd       .LC0(%rip), %xmm0
  seta  %al
  ret
.LC0:
  .long 0
  .long 1074266112 
```

铿锵 3.0 ( `-O3 -march=native`):

```
.LCPI0_0:
  .quad 4613937818241073152     # double 3.000000e+00
with_int(double):                           # @with_int(double)
  ucomisd       .LCPI0_0(%rip), %xmm0
  seta  %al
  ret

.LCPI1_0:
  .quad 4613937818241073152     # double 3.000000e+00
with_float(double):                        # @with_float(double)
  ucomisd       .LCPI1_0(%rip), %xmm0
  seta  %al
  ret 
```

结论：如果与常数比较，没有区别。

* * *

[带变量](http://gcc.godbolt.org/#%7B%22version%22%3A3%2C%22filterAsm%22%3A%7B%22labels%22%3Atrue%2C%22directives%22%3Atrue%2C%22commentOnly%22%3Atrue%7D%2C%22compilers%22%3A%5B%7B%22source%22%3A%22bool%20with_int(const%20double%20a%2C%20const%20int%20b)%20%7B%5Cn%20%20return%20a%20%3E%20b%3B%5Cn%7D%5Cn%5Cnbool%20with_float(const%20double%20a%2C%20const%20float%20b)%20%7B%5Cn%20%20return%20a%20%3E%20b%3B%5Cn%7D%5Cn%22%2C%22compiler%22%3A%22%2Fusr%2Fbin%2Fg%2B%2B-4.7%22%2C%22options%22%3A%22-O3%20-march%3Dnative%22%7D%5D%7D)：

```
bool with_int(const double a, const int b) {
  return a > b;
}

bool with_float(const double a, const float b) {
  return a > b;
} 
```

g++ 4.7.2（`-O3 -march=native`）：

```
with_int(double, int):
  cvtsi2sd      %edi, %xmm1
  ucomisd       %xmm1, %xmm0
  seta  %al
  ret
with_float(double, float):
  unpcklps      %xmm1, %xmm1
  cvtps2pd      %xmm1, %xmm1
  ucomisd       %xmm1, %xmm0
  seta  %al
  ret 
```

铿锵 3.0 ( `-O3 -march=native`):

```
with_int(double, int):                          # @with_int(double, int)
  cvtsi2sd      %edi, %xmm1
  ucomisd       %xmm1, %xmm0
  seta  %al
  ret

with_float(double, float):                       # @with_float(double, float)
  cvtss2sd      %xmm1, %xmm1
  ucomisd       %xmm1, %xmm0
  seta  %al
  ret 
```

结论：在与变量进行比较时，发出的指令会有所不同，正如[Mats Peterson 的回答](https://stackoverflow.com/a/14885347/1067887)已经解释的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T22:23:23.020

Q：前一种比较是不是因为3转为浮点数比较慢，还是真的没有区别？

A）只需将其指定为整数。一些芯片有一个在运行时比较整数的特殊指令，但这并不重要，因为编译器会选择最好的。在某些情况下，它可能会在编译时根据目标体系结构将其转换为 3.0。在其他情况下，它将保留为 int。但是因为你特别想要 3 然后指定 '3'

显然，我假设时间延迟充其量可以忽略不计，但在 while(1) 循环中，我认为从长远来看，可能会丢失相当多的时间（如果它真的更慢的话）。

A）编译器不会对这样的代码做任何奇怪的事情。它会选择最好的东西，所以不应该有时间延迟。使用数字常量，编译器可以自由地做最好的事情，不管它看起来如何，只要它产生相同的结果。但是，您根本不想在 while 循环中复合这种类型的比较。而是使用整数循环计数器。浮点循环计数器会慢得多。如果您必须使用浮点数作为循环计数器，则更喜欢单点 32 位数据类型并尽可能少地进行比较。

例如，您可以将问题分解为多个循环。

```
int x = 0;
float y = 0;
float finc = 0.1;
int total = 1000;
int num_times = total / finc;
num_times -= 2;// safety
// Run the loop in a safe zone using integer compares
while (x < num_times) {
  // Do stuff
  y += finc;
  x++;
}
// Now complete the loop using float compares
while (y < total) {
  y+= finc;
} 
```

这将大大提高比较速度。

# postgresql - 使用 JPA (EclipseLink) 和自定义转换器将 postgreSQL 枚举映射到 Java 枚举

> ID：14884955
> 
> 赞同：3
> 
> 时间：2013-02-14T22:07:57.000
> 
> 标签：postgresql, jpa, enums, eclipselink

我正在尝试使用 JPA（`EclipseLink`提供程序）将 postgreSQL`ENUM`类型映射到 Java 枚举类型（反之亦然）。

我知道我可以`varchar`使用注释轻松地将 Java 枚举映射到我的 postgreSQL 数据库中的类型，`@Enumerated`但我想将它映射到 postgreSQL `ENUM`tpye 中。我想我必须使用自定义的 EclipseLink 转换器来做到这一点。

所以，我开始实现 a`org.eclipse.persistence.mappings.converters.Converter`但我不知道如何实现 the `convertObjectValueToDataValue`， the`initialize`和`isMutable`方法......

有人可以解释一下如何实现这些方法吗？

现在，我的课是这个：

```
public class EnumConverter implements Converter {

private static final long serialVersionUID = 1L;

public Object convertDataValueToObjectValue(Object object, Session session) {

    if(object instanceof PGobject){
        return LangageEnum.valueOf(LangageEnum.class, ((PGobject)object).getValue());           
    }

    return null;
}

public Object convertObjectValueToDataValue(Object object, Session session) {
    // WHAT HERE...?
    // I tried to play with PGObject witout success...
    return object;
}

public void initialize(DatabaseMapping arg0, Session arg1) {
    // WHAT INITIALIZATION HERE...?
}

public boolean isMutable() {
    // TRUE OR FALSE AND WHY...?
    return false;
}

}

@Converter(name="langageConverter", converterClass=EnumConverter.class)
@Convert(value="langageConverter")
private LangageEnum langage; 
```

感谢您的解释，我用 Google 搜索了 EclipseLink 的自定义转换器，但这次 Google 不是我的朋友。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T11:51:49.920

好的，我在另一个项目中使用基本的 SELECT 语句进行了一些测试，我看到我的 postgreSQL`ENUM`类型返回为`PGObject`值设置为我的值`ENUM`（在我的情况下`FR`，`EN`或`DE`）和我的枚举名称的类型。

`ENUM`例如：如果我在 pg 中创建以下内容：

```
CREATE TYPE langage AS ENUM ('FR', 'EN', 'DE'); 
```

我将收到`PGObject`value`FR`或`EN`or`DE`和 type `langage`。

因此，当我想将 Java 对象转换为我的`ENUM`时，我只需创建一个自定义 EclipseLink`Converter`并在以下位置返回一个`PGObject`这样的`convertObjectValueToDataValue`：

```
public class EnumConverter implements Converter {

private static final long serialVersionUID = 1L;

private static Logger logger = Logger.getLogger(EnumConverter.class);

public Object convertDataValueToObjectValue(Object object, Session session) {

    if(object instanceof PGobject){
        return LangageEnum.valueOf(LangageEnum.class, ((PGobject)object).getValue());           
    }

    return null;
}

public Object convertObjectValueToDataValue(Object object, Session session) {

    if(object instanceof LangageEnum){

        PGobject pg = new PGobject();

        try {
            pg.setValue(((LangageEnum)object).name());
            pg.setType("langage");
        } catch (SQLException e) {
            logger.log(Level.FATAL, e);
        }

        return pg;
    }

    return object;
}

public void initialize(DatabaseMapping dm, Session session) {
    dm.getField().setSqlType(Types.OTHER);
}

public boolean isMutable() {
    return true;
}

} 
```

效果很好。

希望这可以帮助。

# ssl - 同时使用 SSL 加密和 NTLM 身份验证的 HttpClient 4.2.3 失败

> ID：14884956
> 
> 赞同：2
> 
> 时间：2013-02-14T22:07:57.837
> 
> 标签：ssl, sharepoint-2010, httpclient, liferay-6, ntlm

我正在尝试通过 Liferay 6.1 portlet 中的 HTTPClient 4.2.3 对 Sharepoint 2010 进行 REST 调用。

我已将证书导入本地 MAC 的 JVM cacerts，并尝试将 cacerts 作为密钥库加载。

我的代码是：

```
String opsCalendarURL1 = "https://hostname/sites/team-sites/operations/_vti_bin/owssvr.dll?";
String opsCalendarURL2 = "Cmd=Display&List={6E460908-D470-4F8A-AF76-CC279E25E0B1}&XMLDATA=TRUE";
String opsCalenderURLEncoded = opsCalendarURL1 + URLEncoder.encode( opsCalendarURL2 , "UTF8" );

System.out.println(opsCalenderURLEncoded);
DefaultHttpClient httpclient = new DefaultHttpClient();

try {
   // SSL
   KeyStore trustStore  = KeyStore.getInstance(KeyStore.getDefaultType());
   FileInputStream instream = new FileInputStream(new File("/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/security/cacerts"));
   try {
    trustStore.load(instream, "changeit".toCharArray());
   } finally {
       try { instream.close(); } catch (Exception ignore) {}
   }

   SSLSocketFactory socketFactory = new SSLSocketFactory(trustStore);
   Scheme sch = new Scheme("https", 443, socketFactory);
   httpclient.getConnectionManager().getSchemeRegistry().register(sch);
   System.out.println("----------------------------------------");

   HttpHost targetHost = new HttpHost("hostname", 443, "https");
   httpclient.getCredentialsProvider().setCredentials(
    AuthScope.ANY,
    new NTCredentials("username", "password","machine","domain"));

   HttpGet httpget = new HttpGet(opsCalenderURLEncoded);

   System.out.println("executing request: " + httpget.getRequestLine());
   System.out.println("to target: " + targetHost);

   HttpResponse response2 = httpclient.execute(targetHost, httpget);
   HttpEntity entity = response2.getEntity();

   System.out.println("----------------------------------------");
   System.out.println(response2.getStatusLine());
   System.out.println(response2.getProtocolVersion());
   if (entity != null) {
     System.out.println("Response content length: " + entity.getContentLength());
   }
   EntityUtils.consume(entity);
  } finally {
    httpclient.getConnectionManager().shutdown();
} 
```

我总是得到的响应是：HTTP/1.1 401 Unauthorized

我没有在电报日志中看到 SSL 握手，并得到 401 未经授权的响应。我已经尝试了具有相同结果的示例代码的各种组合。

注意 - 我已经使用 FireFox 和 CURL 来做同样的事情，我在这里以编程方式尝试做同样的事情，而且效果很好。所以服务器似乎设置正确。CURL 详细日志显示 SSL 握手首先发生，NTLM 成功作为下一步。

如果需要，我可以附上电线日志。

非常感谢您的时间！

我感谢任何帮助和指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:29:31.040

问题似乎出在使用 NTLM v2 和 Windows 2008 R2 的 IIS 7.5 和 HTTPClient 上。

我切换到 Java HTTPURLConnection 并且效果很好。

[在此处使用相同代码发布有关另一个问题的详细信息](https://stackoverflow.com/questions/14990869/java-http-call-to-sharepoint-2010-odata-fails)

# android - Android 用图像保存 EditText

> ID：14884959
> 
> 赞同：0
> 
> 时间：2013-02-14T22:08:16.163
> 
> 标签：android, image, save, android-edittext

现在我有一个简单的应用程序，可以拍照并将其保存到文件夹中。我试图找出一种方法让用户回答有关每张图片的问题（我只会使用 EditTexts）。有没有办法将这些 EditTexts 与图像连接起来，这样当我在另一个页面上打开图像时，我可以单击一个按钮来查看与该图像一起输入的信息？我对如何编写其他所有内容有一个想法，只是不保留与图像关联的编辑文本。任何想法将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:11:22.987

也许您可以在图像旁边创建一个与图像文件同名但扩展名不同的数据文件。

因此，如果您要保存一个名为的图像，`img1.png`则在它旁边保存另一个文件，`img1.txt`该文件包含您从 EditText(s) 收集的数据。你如何格式化这个数据文件将取决于你必须存储多少数据，以及数据需要表示什么样的结构（如果有的话）

然后，当您加载 png 以显示它时，您还需要加载共享相同名称的 txt 文件，并将其中包含的数据填充到某个 TextView 或您的 ImageView 附近的其他内容中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:12:35.167

有很多方法可以做到这一点。您可以使用哈希图，其中 String 是他们输入的数据，int 是图像的 resourceID。对于持久存储，我推荐一个 SQLite 数据库，它将字符串存储在一个列中，将关联的图像存储在另一个列中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:15:22.380

几个选项：

1.  保存带有图像的文件.. 给它相同的名称，但 .txt 或其他东西。该文件可能应该存储在[getFilesDir](http://developer.android.com/reference/android/content/Context.html#getFilesDir%28%29) () 返回的位置。或者，您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。
2.  使用 sqlite 数据库
3.  保存在图像的 exif 数据中。使用带有 setAttribute/getAttribute的[ExifInterface类来保存值。](http://developer.android.com/reference/android/media/ExifInterface.html#setAttribute%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T22:11:41.940

使用数据库。制作一个表格，将图像与您想要的数据相关联。当您显示图片时，从数据库中读取该图片的信息并将其显示出来。要么将图像直接存储在数据库中，要么将它们存储在文件夹中，并使用文件名作为数据库表中的主键。

# scheme - 如何将矢量转换为方案中的列表

> ID：14884963
> 
> 赞同：2
> 
> 时间：2013-02-14T22:08:32.613
> 
> 标签：scheme

如何将矢量转换为方案中的列表？vector 上几乎没有什么程序。

```
 '#(1 2) 
```

列表中有类似 car 或 cdr 的东西吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T22:24:56.187

也许你的意思是，这个？

```
(apply string-append
       (map number->string
            (vector->list '#(1 2))))
=> "12" 
```

**更新**

哎呀，你刚刚改变了问题。然后就简单多了：

```
(vector->list '#(1 2))
=> '(1 2) 
```

# php - 欺骗黑客认为加密是 md5 是一个好/聪明的主意吗？

> ID：14884964
> 
> 赞同：2
> 
> 时间：2013-02-14T22:08:37.373
> 
> 标签：php, encryption, cryptography

```
$clear_text = "hello";
$salt_ = sha1("758hF4H7gJi98U6o");
$salt = substr($salt_, 0, 12);
$hash = substr(hash("sha512", $clear_text), 0, 20).$salt; 
```

如您所见，`$hash`生成一个 32 个字符的字符串，使其看起来与 md5 相同。所以黑客会试图解密这个*md5 哈希*，而实际上它不是那样的！这会很狡猾吗？这是个好主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T22:18:02.173

不要试图发明自己的加密，使用标准化的散列算法，如 bcrypt、scrypt 或 PBKDF2。

请参阅：

*   [https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords)
*   [https://security.stackexchange.com/questions/18197/why-shouldnt-we-roll-our-own](https://security.stackexchange.com/questions/18197/why-shouldnt-we-roll-our-own)

安全中有一个原则叫做[Kirckhoff 原则](http://en.wikipedia.org/wiki/Kerckhoffs%27s_principle)，其中一条规则是“它不能被要求保密，它必须能够在不方便的情况下落入敌人手中” 建议攻击者可以访问你的机器并且能够转储您的源文件以及您的数据库，他不会花费很长时间来发现您的算法。

现在从那里你自己的滚动算法并没有真正提供任何额外的保护，免受普通 sha512+salt 的影响。无论有没有你的算法，他攻击散列的速度都是一样的。这意味着一旦找到算法，您的方案就没有用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:30:16.970

```
$salt_ = sha1("758hF4H7gJi98U6o"); 
```

散列熵不能提供更好的熵。请参阅[什么应该用作盐？](https://security.stackexchange.com/questions/8015/what-should-be-used-as-a-salt). 总结：编码一个唯一且不可预测的值。

```
$hash = substr(hash("sha512", $clear_text), 0, 20).$salt; 
```

您应该使用哈希的多次迭代。请参阅[如何安全地散列密码](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords)。总结：PBKDF2、BCrypt、SCrypt 提供了这个。

> 这会不会很狡猾

不，如果您的代码也被阅读，那基本上是无关紧要的。

> 这是个好主意吗

对于将来不得不维护它的任何人来说，这更有可能是一种滋扰。从表面上看，这可能不是一个*坏*主意，因为更改哈希格式可能会使某些人感到困惑，但您可以在阅读[The valid role of obscurity](https://security.stackexchange.com/questions/2430/the-valid-role-of-obscurity)时考虑这一点。如果您要更改哈希格式，请花费精力对其进行加密，以便在没有加密密钥的情况下无法对其进行攻击。寻找钥匙的努力可能是相同的，但它会是一个更容易捍卫的决定。

# python - 如果列表中的元素至少有一个 1 值，则将 +1 添加到 Count=0。Python

> ID：14884967
> 
> 赞同：-2
> 
> 时间：2013-02-14T22:08:59.307
> 
> 标签：python, list, count, add

```
count_element_has_1 = 0
count_all_0 = 0   

my_list = [[0,0,1],[1,1,0,1],[0,0,0,0]] 
```

我想检查列表中的每个元素是否至少有 1，然后将 +1 添加到 count_element_has_1，如果它们都是 0，则将 +1 添加到 count_all_0

所以在这种情况下，它看起来像

```
count_element_has_1 = 2
count_all_0 = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:11:40.813

```
for lst in my_list:
    if 1 in lst:
       count_element_has_1 += 1
    elif lst.count(0) == len(lst):
       count_all_0 += 1 
```

根据列表，第二个条件可能会更好地执行以下操作：

```
elif all(x==0 for x in lst):
    count_all_0 += 1 
```

因为这允许短路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:24:16.310

您可以使用该`sum`函数，并结合列表推导。

如果列表可以包含除and以外的*其他*数字，请尝试以下操作：`0``1`

```
count_has_1 = sum(1 for element in my_list if 1 in element)
count_all_0 = sum(1 for element in my_list if all(e == 0 for e in element)) 
```

如果您*确定*列表*仅* `0`包含and `1`，您也可以这样做：

```
count_has_1 = sum(map(any, my_list))
count_all_0 = len(my_list) - count_has_1 
```

`1`第一行是使用 Python 将and解释`0`为`True`and的事实，`False`反之亦然，首先将每个子列表映射到是否有任何值为真，例如`[0,1,0] -> True`，然后总结得到的布尔值列表，例如`[True, False, True] -> 2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:17:14.877

您可以使用`collections.Counter()`,`O(N^2)`复杂性：

```
In [22]: lis=[[0,0,1],[1,1,0,1],[0,0,0,0]]

In [23]: from collections import Counter

In [24]: count_element_has_1 = 0

In [25]: count_all_0 = 0

In [26]: for x in lis:
    c=Counter(x)
    if c[0]==len(x):
        count_all_0 +=1
    elif c[1]>0:    
        count_element_has_1 +=1
   ....:         

In [27]: count_element_has_1
Out[27]: 2

In [28]: count_all_0
Out[28]: 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T00:16:25.440

```
my_list = [[0,0,1],[1,1,0,1],[0,0,0,0],[4,0,88]]
#
count_has_1 = sum(1 in sub for sub in my_list)
print count_has_1 # prints 2
#
count_all_0 = sum(not any(sub) for sub in my_list)
print count_all_0 # prints 1 
```

.

如果子列表中只有 0 和 1，那么统计这两个类别是没有用的：

```
my_list = [[0,0,1],[1,1,0,1],[0,0,0,0]]
#
count_has_non0 = sum(map(any,my_list))
print count_has_non0 # prints 2
#
print len(my_list) - count_has_1  # prints 1 
```

# c++ - 验证我对指针的理解

> ID：14884971
> 
> 赞同：0
> 
> 时间：2013-02-14T22:09:26.030
> 
> 标签：c++

我只是想确定我是否理解指针的属性。所以，如果我有这样的事情：

```
#include <iostream>
using namespace std;

class Person
{
public:
  Person(){myBook = new Book(4);}
  void printPerson()
  {
    int i =0;
    while(i<n)
    {
        cout<<myBook[i].n<<endl;
        i++;
    }
  }

private:
   Book *myBook;
   int n;
};

class Book
{
public:
  Book(int num)
  {
      int n =0;
  }  
  int n;
  }; 
```

由于 Person 类的实例是一个指针，所以当我尝试创建一个复制构造函数和赋值 operator= 时，我必须为新的 Person 对象分配一个新的 Book。我对吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T22:15:31.637

这里有一个错误：

```
Person(){myBook = new Book(4);} 
```

分配一个 Book 对象`num=4`，如果您要分配 4 个 Book 元素，请执行以下操作：

```
Person(){myBook = new Book[4];} 
```

否则当您`myBook[i]`在 while 循环中访问时是未定义的行为：

```
while(i<n)
{
   cout<<myBook[i].n<<endl;
               ^^^ ouch
   i++;
} 
```

> 由于 Person 类的实例是一个指针，所以当我尝试创建一个复制构造函数和赋值 operator= 时，我必须为新的 Person 对象分配一个新的 Book。我对吗？

是的，请确保您遵循[三原则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

*其他建议是，如果可以的话，使用[std::vector](http://en.cppreference.com/w/cpp/container/vector)代替动态数组，使用智能指针代替原始指针。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:14:25.307

（在假设下，您的意思是书的实例，而不是人的实例）

为了制作一个人的深层副本，您还需要创建一个新的书籍实例。使用深拷贝可以让您破坏原始人物及其书籍，同时保留副本和复制的书籍。

有一些用例，您实际上希望两个人都指向同一个书对象。

在这种情况下，您需要使用诸如共享指针之类的东西来跟踪有多少指针指向书本。

编辑以清除它：如果您有不止一个人拥有同一本书，并且您对该人有一个有效的析构函数：

```
class Person {
public:
  ~Person() {
    delete m_pbook;
  }
protected:
  Book *m_pbook;
}

class Book {
  int foo;
}

Person a = new Person();  // book pointer is something like 0x12345678
Person b = new Person(a); // book pointer is identical 0x12345678

// delete a yields
delete a; // memory in 0x12345678 is freed up
b->book;  // AccessViolation / Segmentation Fault, the memory in 0x12345678 does not belong to your program any more. 
```

# node.js - Nodejs、Mongoose、Jquery 小部件

> ID：14884973
> 
> 赞同：1
> 
> 时间：2013-02-14T22:09:32.553
> 
> 标签：node.js, widget, mongoose

嗨，我想知道是否有一个 nodejs 模块，它允许结合 mongoose 作为数据源创建简单的小部件，以创建漂亮的 JQuery 库（例如 dojo 或 YUI）小部件。

例如，当我设置我的架构时，最好做一些类似的事情（注意代码不可运行只是伪）

```
var carSchema = {
  carname: "String",
  registration: "String",
  mileage: "Number"}

methodCallback  = function() {
  car.find({}, ....) {
    return results;
  }
}

model.register("car", carSchema);

res.send(model.createWidget("listview", options, methodCallback())); 
```

其中 createWidgets 从我在回调中返回的结果返回 html 列表视图代码和汽车分页。如果它与 REST 集成会很好，所以如果我从列表视图中删除一个项目，那么它会在与另一个方法的连接上执行此操作。

基本上，我想尝试消除在客户端开发中填充、删除、更新小部件的所有困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:18:25.227

> “消除在客户端开发中填充、删除、更新小部件的所有困难。”

似乎不太现实，因为您总是必须根据需要指定一些特定的 CURD 逻辑。

对于纯前端部分，您可以尝试 AngularJS，它提供了易于使用的 RESTful CURD 服务[http://docs.angularjs.org/tutorial/step_11](http://docs.angularjs.org/tutorial/step_11)

如果您进入更庞大的全栈 javascript 框架（可能不是 Nodejs、Mongoose、Jquery 小部件），wakanda [http://www.wakanda.org/features/studio](http://www.wakanda.org/features/studio)可能有您正在寻找的东西，因为它提供了一些小部件集成数据源。

# algorithm - 随机唯一对

> ID：14884975
> 
> 赞同：1
> 
> 时间：2013-02-14T22:09:48.470
> 
> 标签：algorithm

我有一个包含 100 个项目的列表。我想将这些物品随机配对。这些对必须是唯一的，因此总共有 4950 种可能性（100 选择 2）。

在所有 4950 对中，我希望随机选择 1000 对。但关键是，我希望每个项目（100 个项目中的）总体上出现相同的次数（这里是 20 次）。

我试过几次用代码来实现它。当我尝试选择较少数量的配对时效果很好，但每次尝试全部 1000 对时，我都会陷入循环。

有人对方法有想法吗？如果我改变我希望选择的对数（例如，1500 对而不是 1000 个随机对）怎么办？

我的尝试（用 VBA 编写）：

```
Dim City1(4951) As Integer
Dim City2(4951) As Integer

Dim CityCounter(101) As Integer
Dim PairCounter(4951) As Integer

Dim i As Integer 
Dim j As Integer
Dim k As Integer
i = 1

While i < 101
    CityCounter(i) = 0
    i = i + 1
Wend

i = 1
While i < 4951
    PairCounter(i) = 0
    i = i + 1
Wend

i = 1
j = 1

While j < 101

    k = j + 1

    While k < 101
        City1(i) = j
        City2(i) = k

        k = k + 1
        i = i + 1       
    Wend

    j = j + 1

Wend

Dim temp As Integer

i = 1
While i < 1001

    temp = Random(1,4950)

    While ((PairCounter(temp) = 1) Or (CityCounter( (City1(temp)) ) = 20) Or (CityCounter( (City2(temp)) ) = 20))
        temp = Random(1,4950)
    Wend

    PairCounter(temp) = 1
    CityCounter( (City1(temp)) ) = (CityCounter( (City1(temp)) ) + 1)
    CityCounter( (City2(temp)) ) = (CityCounter( (City2(temp)) ) + 1)
    i = i + 1

Wend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T14:50:21.700

这是旧线程，但我一直在寻找类似的东西，最后自己做了。

该算法不是 100% 随机的（在对不成功的随机试验有点“厌倦”之后开始系统筛选表格 :) - 无论如何对我来说 - “足够随机”）但运行速度相当快，并返回所需的表格（不幸并非总是如此，但是...）通常每第二次或第三次使用一次（如果每个项目有您需要的配对数量，请查看 A1）。这是要在 Excel 环境中运行的 VBA 代码。输出从 A1 单元格开始定向到当前工作表。

```
Option Explicit
Public generalmax%, oldgeneralmax%, generalmin%, alloweddiff%, i&
Public outtable() As Integer
Const maxpair = 100, upperlimit = 20

Sub generate_random_unique_pairs()
'by Kaper 2015.02 for stackoverflow.com/questions/14884975
Dim x%, y%, counter%
Randomize
ReDim outtable(1 To maxpair + 1, 1 To maxpair + 1)
Range("A1").Resize(maxpair + 1, maxpair + 1).ClearContents
alloweddiff = 1
Do
  i = i + 1
  If counter > (0.5 * upperlimit) Then 'try some systematic approach
    For x = 1 To maxpair - 1 ' top-left or:' To 1 Step -1 ' bottom-right
      For y = x + 1 To maxpair
        Call test_and_fill(x, y, counter)
      Next y
    Next x
    If counter > 0 Then
      alloweddiff = alloweddiff + 1
      counter = 0
    End If
  End If
  ' mostly used - random mode
  x = WorksheetFunction.RandBetween(1, maxpair - 1)
  y = WorksheetFunction.RandBetween(x + 1, maxpair)
  counter = counter + 1
  Call test_and_fill(x, y, counter)
  If counter = 0 Then alloweddiff = WorksheetFunction.Max(alloweddiff, 1)
  If i > (2.5 * upperlimit) Then Exit Do
Loop Until generalmin = upperlimit
Range("A1").Resize(maxpair + 1, maxpair + 1).Value = outtable
Range("A1").Value = generalmin
Application.StatusBar = ""
End Sub

Sub test_and_fill(x%, y%, ByRef counter%)
Dim temprowx%, temprowy%, tempcolx%, tempcoly%, tempmax%, j%
tempcolx = outtable(1, x + 1)
tempcoly = outtable(1, y + 1)
temprowx = outtable(x + 1, 1)
temprowy = outtable(y + 1, 1)
tempmax = 1+ WorksheetFunction.Max(tempcolx, tempcoly, temprowx, temprowy)
If tempmax <= (generalmin + alloweddiff) And tempmax <= upperlimit And outtable(y + 1, x + 1) = 0 Then
  counter = 0
  outtable(y + 1, x + 1) = 1
  outtable(x + 1, y + 1) = 1
  outtable(x + 1, 1) = 1 + outtable(x + 1, 1)
  outtable(y + 1, 1) = 1 + outtable(y + 1, 1)
  outtable(1, x + 1) = 1 + outtable(1, x + 1)
  outtable(1, y + 1) = 1 + outtable(1, y + 1)
  generalmax = WorksheetFunction.Max(generalmax, outtable(x + 1, 1), outtable(y + 1, 1), outtable(1, x + 1), outtable(1, y + 1))
  generalmin = outtable(x + 1, 1)
  For j = 1 To maxpair
    If outtable(j + 1, 1) < generalmin Then generalmin = outtable(j + 1, 1)
    If outtable(1, j + 1) < generalmin Then generalmin = outtable(1, j + 1)
  Next j
  If generalmax > oldgeneralmax Then
    oldgeneralmax = generalmax
    Application.StatusBar = "Working on pairs " & generalmax & "Total progress (non-linear): " & Format(1# * generalmax / upperlimit, "0%")
  End If
  alloweddiff = alloweddiff - 1
  i = 0
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:21:02.587

拿一个列表，打乱它，然后将每两个元素标记为一对。将这些对添加到对列表中。确保对列表进行排序。

打乱对的列表，并将每对添加到“分段”对列表中。检查它是否在对列表中。如果它在对列表中，请争夺并重新开始。如果您获得了没有任何重复的整个列表，请将暂存的配对列表添加到配对列表中并重新开始本段。

由于这涉及到最后一个不确定的步骤，我不确定它会有多慢，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:20:35.533

有一个数组`appeared[]`来跟踪每个项目已经出现在答案中的次数。假设每个元素必须出现`k`次数。遍历数组，当当前元素的`appeared`值小于`k`时，从该元素中为它选择一个随机对，该元素的出现次数也少于`k`。添加该对以回答并增加两者的出现次数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T22:55:36.317

*   创建一个二维 100*100 布尔矩阵，全部为 False
*   在这 10K 个布尔值中，将其中的 1K 个设置为 true，并具有以下约束：
*   对角线应该保持空白
*   任何行或列都不应有超过 20 个真值
*   最后，每一行和每一列都应该有 20 个 True 值。

现在，有 X=Y 对角对称。只需添加以下约束：

*   对角线一侧的三角形应保持空白
*   在上述约束中，应合并/添加对行和列的限制

# python - 在字典上映射函数

> ID：14884977
> 
> 赞同：1
> 
> 时间：2013-02-14T22:09:53.200
> 
> 标签：python

如何将函数映射到字典中的某些值并更新字典中的这些值？

```
dic1 = { 1 : [1, 2, 3, 4], 2 : [2, 3, 5, 5], 3 : [6, 3, 7, 2] ... }
map(func, (data[col] for data in dic1.itervalues())) 
```

这就是我正在寻找的东西，但我需要一种方法将新的 func(val) 重新插入到字典中的每个相应插槽中。该函数工作正常，并打印它返回应用了函数的所有正确索引值，但我想不出更新字典的好方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:11:55.670

您不想`map`用于更新任何类型的序列；那不是它的用途。`map`用于生成新序列：

```
dict2 = dict(map(func, dict1.iteritems())) 
```

当然`func`，必须采取`(key, old_value)`并返回`(key, new_value)`才能按原样工作。如果它只是返回，比如说，`new_value`你需要以某种方式将它包装起来。但在这一点上，你可能最好使用字典理解而不是`map`调用和`dict`构造函数：

```
dict2 = {key: func(value) for key, value in dict1.itervalues()} 
```

如果你想使用`map`，并且你想改变，你*可以*通过创建一个更新事物的函数来做到这一点，如下所示：

```
def func_wrapped(d, key):
    d[key] = func(d[key])
map(partial(func_wrapped, d), dict1) 
```

（如果你真的想要，这甚至可以通过使用`partial`with来完成。）`d.__setitem__`

但这是一件愚蠢的事情。一方面，这意味着您正在构建一个值列表，只是为了将它们丢弃。（或者，在 Python 3 中，除非您编写一些迭代迭代器的代码，否则您实际上并没有做*任何事情*`map`。）但更重要的是，您无缘无故地让事情变得更加困难。如果您不需要就地修改内容，请不要这样做。如果您确实需要就地修改内容，请使用`for`循环。

PS，我并不是说这是一个愚蠢的*问题*。还有其他语言*确实*具有`map`类似的变异函数，因此在 C++ 中做这件事不会是一件愚蠢的事情。它只是不是*pythonic*，如果不问你就不会知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:17:33.140

您的函数可以改变列表：

```
>>> d = {1:[1],2:[2],3:[3]}
>>> def func(lst):
...     lst.append(lst[0])
...     return lst
... 
>>> x = map(func,d.values())
>>> x
[[1, 1], [2, 2], [3, 3]]
>>> d
{1: [1, 1], 2: [2, 2], 3: [3, 3]} 
```

但是，请注意，这确实不是惯用的 Python，仅应考虑用于教学/教育目的……通常，如果一个函数改变了它的参数，让它返回是有礼貌的`None`。

# c# - 在 goto 语句的范围内没有这样的标签“Label_05C0”

> ID：14884981
> 
> 赞同：2
> 
> 时间：2013-02-14T22:10:03.563
> 
> 标签：c#, asp.net, label, goto

如何修复错误？

> 错误 23 在 goto 语句 H:\calismalarim\v2\Version 2\ro.ascx.cs 582 17 Version 2 范围内没有此类标签“Label_05C0”

```
if (this.PriceID == "")
{
    this.ddlSelectedPrices.Visible = false;
    this.lnkClosePrices.Visible = false;
    this.lblClosePrices.Visible = false;
    DataTable table2 = new DataTable();
    table2.Columns.Add("PriceID", Type.GetType("System.Int32"));
    table2.Columns.Add("PriceName", Type.GetType("System.String"));
    table2.Columns.Add("Count", Type.GetType("System.Int32"));
    int num3 = 1;
    while (str != "")
    {
        ds.Tables[0].DefaultView.RowFilter = str + " and " + this.method_6(Conversions.ToString(num3));
    Label_0547:
        if (ds.Tables[0].DefaultView.Count > 0)
        {
            table2.Rows.Add(new object[] { num3, this.method_5(Conversions.ToString(num3)), ds.Tables[0].DefaultView.Count });
        }
        num3++;
        if (num3 <= 12)
        {
            continue;
        }
        this.dlPrices.DataSource = table2;
        this.dlPrices.DataBind();
        if (this.dlPrices.Items.Count > 0)
        {
            this.divPrices.Visible = true;
            this.dlPrices.Visible = true;
            this.lblPrices.Visible = true;
        }
        return;
    Label_05C0:
        ds.Tables[0].DefaultView.RowFilter = this.method_6(Conversions.ToString(num3));
        goto Label_0547;
        int zz21z1a = 0;
    }
    goto Label_05C0;
    int zzz1f = 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T22:13:39.073

标签在`while`循环范围内，但您尝试在循环*之外*调用它。

你不能那样做。

要么确保您的标签与您的 goto 处于[相同的词法范围内](http://msdn.microsoft.com/en-gb/library/13940fs2.aspx)，要么更改您的代码 - 功能很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-15T03:32:08.770

如果您在 IL 级别修改代码，这可以工作。例如，用假的 goto 语句编译它，然后在 DNSPY 中编辑代码并修改 goto。你可以用这种方式做各种奇怪而美妙的事情。

并不是说这是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T22:31:33.427

```
Label_05C0:
            ds.Tables[0].DefaultView.RowFilter = this.method_6(Conversions.ToString(num3));
            goto Label_0547;
            int zz21z1a = 0;
        }
        goto Label_05C0;
        int zzz1f = 0; 
```

标签位于 while 循环的一侧，因此它仅存在于 while 语句的范围内。你正试图跳回那里......

使用 goto 很少是一个好主意。混合块结构代码和 goto 完全是一个坏主意。

Ps 你怎么期待那些 int zzz... 行被调用，你期待他们做什么？

你确定 goto 是一个不错的选择吗？

# outlook - MS Outlook 正文中的电子邮件地址

> ID：14884993
> 
> 赞同：0
> 
> 时间：2013-02-14T22:11:16.870
> 
> 标签：outlook, outlook-2010

在 MS Outlook 中，如果我在电子邮件的**正文中键入以下内容**

me@you.com Outlook 将假定这是一个电子邮件地址并在其周围放置一个 mailto:

但如果我输入

that'sMyDog@you.com Outlook 会将其视为文本。Outlook 中是否有设置来转义单引号或任何可以使 O'brien 之类的名称与 Obrien 一样的名称？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:15:14.747

Outlook 使用尖括号强制 URL，例如

```
<www.example.com/address containing spaces> 
```

然而，即使这似乎也不适用于电子邮件地址中的撇号。您需要做的是转义撇号：十六进制为`'`hex 27，因此可以转义为：

```
<that%27sMyDog@you.com> 
```

无论您是否以编程方式执行此操作，如果是这样，您所使用的语言中应该有一个 URL 编码类型函数可以为您执行此操作。

# ms-access - MS Access 和谷歌信息图形

> ID：14884996
> 
> 赞同：0
> 
> 时间：2013-02-14T22:11:36.353
> 
> 标签：ms-access, vba

我正在尝试使用 google info graphics APi 让表单/报告显示图像。所以我只是在寻找如何在表单上显示 URL 图像。或者，我很乐意将图像复制到本地驱动器，然后从那里显示图像。

这是有关 API 的一些信息，非常漂亮[https://google-developers.appspot.com/chart/infographics/docs/qr_codes?hl=en](https://google-developers.appspot.com/chart/infographics/docs/qr_codes?hl=en)

我真正追求的是一种生成 QR 并将它们添加到报告中的方法。因此，如果有人知道一个好的 QR 插件，我将非常乐意探索该选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:18:14.890

您可以在 MS Access 中使用 Web 浏览器控件。

![网页浏览器](../Images/e21895a061c42485d39f9d1f62b81c12.png)

```
Private Sub Command1_Click()
   Me.WebBrowser0.ControlSource = "=""https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=Hello%20world&choe=UTF-8"""
End Sub 
```

更多： http: [//office.microsoft.com/en-ie/access-help/add-web-browsing-to-a-form-HA101631434.aspx](http://office.microsoft.com/en-ie/access-help/add-web-browsing-to-a-form-HA101631434.aspx)