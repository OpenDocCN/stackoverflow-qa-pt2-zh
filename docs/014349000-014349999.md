# StackOverflow 问答 14349000-14349999

# c++ - 双重释放或损坏错误 - valgrind

> ID：14349000
> 
> 赞同：0
> 
> 时间：2013-01-15T23:40:47.773
> 
> 标签：c++, gdb, free, valgrind

`main`当函数尝试多次运行某个类（Rock）并出现`double free or corruption`glibc 错误时，我的程序退出。

Valgrind 返回：

```
==18672== Conditional jump or move depends on uninitialised value(s)
==18672==    at 0x56F8554: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<unsigned long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, unsigned long) const (in /usr/lib64/libstdc++.so.6.0.17)
==18672==    by 0x56F876C: std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::do_put(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, unsigned long) const (in /usr/lib64/libstdc++.so.6.0.17)
==18672==    by 0x56FB945: std::ostream& std::ostream::_M_insert<unsigned long>(unsigned long) (in /usr/lib64/libstdc++.so.6.0.17)
==18672==    by 0x431515: Rock::saveClustering(std::set<Attribution, std::less<Attribution>, std::allocator<Attribution> >) (rock.cpp:1406)
==18672==    by 0x430C66: Rock::startRock() (rock.cpp:1321)
==18672==    by 0x45DABC: main (main.cpp:207)
==18672==  Uninitialised value was created by a stack allocation
==18672==    at 0x42FF39: Rock::getFinalList(std::vector<Rock::BestLabel, std::allocator<Rock::BestLabel> >&) (rock.cpp:1139)
==18672== 
==18672== 
==18672== HEAP SUMMARY:
==18672==     in use at exit: 292 bytes in 11 blocks
==18672==   total heap usage: 86,558 allocs, 86,547 frees, 21,133,326 bytes allocated
==18672== 
==18672== 292 (52 direct, 240 indirect) bytes in 1 blocks are definitely lost in loss record 11 of 11
==18672==    at 0x4C2BCFB: malloc (vg_replace_malloc.c:270)
==18672==    by 0x5F7FC94: nss_parse_service_list (in /lib64/libc-2.15.so)
==18672==    by 0x5F80173: __nss_database_lookup (in /lib64/libc-2.15.so)
==18672==    by 0xC1C15DB: ???
==18672==    by 0x5F3592B: getpwuid_r@@GLIBC_2.2.5 (in /lib64/libc-2.15.so)
==18672==    by 0x5050638: pqGetpwuid (in /opt/postgres_home/lib/libpq.so.5.3)
==18672==    by 0x503C3BD: pqGetHomeDirectory (in /opt/postgres_home/lib/libpq.so.5.3)
==18672==    by 0x503CCD4: getPgPassFilename (in /opt/postgres_home/lib/libpq.so.5.3)
==18672==    by 0x503F78A: PasswordFromFile (in /opt/postgres_home/lib/libpq.so.5.3)
==18672==    by 0x503FAAB: connectOptions2 (in /opt/postgres_home/lib/libpq.so.5.3)
==18672==    by 0x503FD77: PQconnectStart (in /opt/postgres_home/lib/libpq.so.5.3)
==18672==    by 0x503FDA5: PQconnectdb (in /opt/postgres_home/lib/libpq.so.5.3)
==18672== 
==18672== LEAK SUMMARY:
==18672==    definitely lost: 52 bytes in 1 blocks
==18672==    indirectly lost: 240 bytes in 10 blocks
==18672==      possibly lost: 0 bytes in 0 blocks
==18672==    still reachable: 0 bytes in 0 blocks
==18672==         suppressed: 0 bytes in 0 blocks 
```

我不习惯瓦尔格林。`postgres`它是否说在数据库访问方面存在未释放的未初始化内存？我用来获取数据的方法是：

```
void Comum::fetchDB ( string sql_statement )
{
    string conn_str ( "dbname=" + getDbName() + " user=" + getDbUser() );
    pqxx::connection conn (conn_str);
    pqxx::work txn (conn);              // ex: domain = "voice"
    pqxx::result r = txn.exec (sql_statement);

    if ( r.size () == 0 ) {
        std::cerr << "No records found for '" << domain << "'." << endl;
        exit (12);
    }

    txn.commit ();

    for (unsigned int u = 0; u != getNrFields (); ++u) {
        vector <string> v;
        v.reserve (r.size());
        db_fetched.push_back (v);
    }

    for (unsigned int rownum = 0; rownum != r.size(); ++rownum) {
        const pqxx::result::tuple row = r[rownum];

        for (unsigned int colnum = 0; colnum != row.size(); ++colnum) {
            const pqxx::result::field f = row[colnum];
            db_fetched [colnum].push_back( f.c_str() );
        }
    }
    conn.disconnect();
} 
```

关于 Valgrind 输出的第一行，`Conditional jump or move depends on unitialized value(s)`方法`saveClustering`如下：

```
void Rock::saveClustering (const set<Attribution> result)
{
    string rock_dir = "rock";
    string parent_dir = "output";
    string dir = parent_dir + "/" + rock_dir;

    // Create directory.
    createDir (parent_dir);
    createDir (dir);

    // Build filename.
    string filename;

    map<unsigned int, AttType>::const_iterator citype = att_type.begin();
    while (citype != att_type.end()) {
        filename += citype->second.getName();
        if (++citype != att_type.end()) {
            filename += "-";
        }
    }

    filename = parent_dir + "/" + rock_dir + "/" + filename + "-" + currentDateTime() + ".txt";
    ofstream myfile(filename.c_str());

    if (myfile.is_open()) {
        for ( set<Attribution>::const_iterator ci = result.begin();ci != result.end(); ++ci ) {
            myfile << ci->id << "\t";

            for (vector<unsigned int>::const_iterator enci = ci->encodings.begin(); enci != ci->encodings.end(); ++enci) {
                myfile << *enci << "\t";
            }

            myfile << ci->type << "\t" << ci->assignment << endl;  // 1406 LINE
        }
        myfile << endl;
        myfile.close();

    } else {
        cerr << "It was not possible to save decoder filename " << filename << endl;
        cerr << "Press any key <ENTER> to continue.";
    }
} 
```

我只是看不出有什么问题，也无法提供一个小的可行程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:31:23.270

输出中有两个单独的问题`valgrind`。

第一个是使用未初始化的内存，它告诉你是在堆栈上创建`rock.cpp`的`1139`

```
==18672==    at 0x42FF39: Rock::getFinalList(std::vector<Rock::BestLabel, std::allocator<Rock::BestLabel> >&) (rock.cpp:1139) 
```

查看该行并初始化变量。

第二个问题是内存泄漏，显然来自 Postgres API。这几乎肯定不是你崩溃的原因。

这些看起来都不像导致双重释放错误的原因，这很可能是由于未在您的类中实现正确的复制构造函数或复制赋值运算符造成的。

# javafx-2 - OnMouseEvent (JavaFX2) 未捕获双击

> ID：14349001
> 
> 赞同：1
> 
> 时间：2013-01-15T23:41:03.057
> 
> 标签：javafx-2

双击被捕获为单击:(

在 fxml 文件中：

```
<Button fx:id="A_button" onMouseClicked="#buttonAClicked"> 
```

在控制器中

```
private void buttonAClicked(MouseEvent mouseEvent) {
    if (mouseEvent.getButton().equals(MouseButton.PRIMARY)) {
        if (mouseEvent.getClickCount() == 2) {
            System.out.println("Double clicked A_button");
        }
        if (mouseEvent.getClickCount() == 1) {
            System.out.println("Single clicked A_button");
        }
    }
} 
```

不幸的是，我发现双击没有被捕获 - 只有单击。在调试器中，点击次数为 1。

**更新：** 由于我无法弄清楚为什么它在 JavaFX 2.2.3-b05 上对我不起作用，所以我做了一个解决方法并消除了双击的需要。我在 UI 中添加了一个“加载”按钮。现在用户必须单击并按下加载按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:38:57.163

它已在 JavaFX 2.2 中修复，请参阅[http://javafx-jira.kenai.com/browse/RT-19346](http://javafx-jira.kenai.com/browse/RT-19346)

请注意，双击您将收到两个事件：

*   鼠标点击 getClickCount() == 1
*   鼠标点击 getClickCount() == 2

例如，如果您运行下面的代码并双击按钮输出将是：

```
clicks: 1
clicks: 2 
```

代码（用 2.2.4 测试）：

```
public class DoubleClicks extends Application {
    @Override public void start(Stage stage) {
        Button btn = new Button();
        btn.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                System.out.println("clicks: " + event.getClickCount());
            }
        });

        stage.setScene(new Scene(new Group(btn), 300, 250));
        stage.setTitle(VersionInfo.getRuntimeVersion());
        stage.show();
    }

    public static void main(String[] args) { launch(); }
} 
```

# java - 正则表达式模式和匹配器问题

> ID：14349002
> 
> 赞同：0
> 
> 时间：2013-01-15T23:41:09.427
> 
> 标签：java, regex

我不明白为什么我的正则表达式模式似乎不起作用。这是一个例子：

```
String token = "23030G40KT";

Pattern p = Pattern
                .compile("(\\d{3}|VRB)|(\\d{2,3})|(G\\d{2,3})?|(KT|MPS|KMH)");
Matcher m = p.matcher(token);

while(m.find()){
    System.out.println(m.group());
} 
```

打印出来：

```
230
30
G40 
```

（以下两个空白行未在此处显示）

我想打印：

```
230
30
G40
KT 
```

没有空行。我需要改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T23:46:09.530

您可以删除`?`量词：

```
Pattern.compile("(\\d{3}|VRB)|(\\d{2,3})|(G\\d{2,3})|(KT|MPS|KMH)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T23:47:49.603

其他答案（例如@Reimus's）很好地描述了您原来的正则表达式不起作用的原因。但是，我想帮助您进一步简化它。您的正则表达式看起来很复杂，但如果您将其分解，实际上非常简单。

让我们谈谈您的原始正则表达式的作用：

`\\d{3}`- 三位小数

`|`- 或者

`VRB`- “VRB”

`|`- 或者

`\\d{2,3}`- 2 或 3 位小数

`|`- 或者

`G\\d{2,3}`- "G" 后跟 2 或 3 位小数

`|`- 或者

`(KT|MPS|KMH)`- “KT”或“MPS”或“KMH”

所以基本上你只是有一堆东西或者在一起。其中一些是多余的（例如“3 位小数”和“2 或 3 位小数”）。将它们组合在一起，您可以获得更少的案例，而无需分组。

您可以使用这个更简单的正则表达式获得相同的结果：

```
Pattern.compile("G?\\d{2,3}|KT|MPS|KMH|VRB"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T23:50:16.690

@Reimeus 答案的附录，这是正确的答案。

如果正则表达式引擎遵循 POSIX，它总是会寻找最左边、最长的匹配。注：最长。

但是 Java 的正则表达式不是 posix：当您像在此处那样使用交替时，它将在*找到匹配项的第一个交替处*停止（并且所有交替都从左到右进行评估）。

例如，如果您尝试匹配正则表达式：

```
cat|catflap 
```

反对输入：

```
catflap 
```

Java 的正则表达式引擎将匹配`cat`. POSIX 正则表达式引擎将匹配`catflap`.

并且 POSIX 正则表达式引擎是罕见的。

在您的交替中，`(G\d{2,3})?` *确实*匹配（空字符串！）因此，甚至不考虑下一个交替。

以下两个空行也与该交替匹配。请注意，在空匹配的情况下，正则表达式引擎将在输入中移动一个字符（否则您将获得无限循环！）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T23:51:18.730

我宁愿做类似的事情

```
String token = "23030G40KT";
Pattern p = Pattern.compile("(\\d{3}|VRB)(\\d{2,3})(G\\d{2,3})?(KT|MPS|KMH)");
Matcher m = p.matcher(token);

if(m.matches()) {
    for (int i = 1; i <= m.groupCount(); ++i) {
        System.out.println(m.group(i));
    }
} 
```

# c# - C# Socket 打印到网络打印机 - 不打印

> ID：14349009
> 
> 赞同：0
> 
> 时间：2013-01-15T23:42:10.243
> 
> 标签：c#, sockets

我正在尝试模拟将原始数据发送到条形码打印机。由于我没有，我只是将一些文本发送到我网络上的佳能喷墨打印机。问题是当代码执行时没有任何反应。我从之前的帖子中得到了这个代码（谢谢）。你能看到我可能遗漏或做错的任何事情吗？谢谢。

```
namespace ConsoleAppTest
{
    class Program
    {
        static void Main(string[] args)
        {
            string text = "^XA" +
            "^FO335,22,^CI0^A0,14,14^FR^FDConta^FS" +
            "^FO368,22,^CI0^A0,14,14^FR^FDins^FS" +
            "^PQ1" + "^XZ";
            PrintToZebra zPrintToIP = new PrintToZebra("192.168.1.101",80, text);
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;

namespace PMIConsoleAppTest
{
class PrintToZebra
{
    public string printerIP { get; set; }
    public int printerPort { get; set; }
    public string myZPL { get; set; }
    private EndPoint ep { get; set; }
    private Socket sock { get; set; }
    private NetworkStream ns { get; set; }

    public PrintToZebra()
    {
        printerIP = "";
        printerPort = 0;
        myZPL = "";
    }

    public PrintToZebra(string anIP, int aPort, string aZPL)
    {
        printerIP = anIP;
        printerPort = aPort;
        myZPL = aZPL;
        printToIP();
    }

    public void printToIP()
    {
        ep = new IPEndPoint(IPAddress.Parse(printerIP), printerPort);
        sock = new Socket(ep.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

        try
        {
            sock.Connect(ep);
            ns = new NetworkStream(sock);
            byte[] toSend = Encoding.ASCII.GetBytes(myZPL);
            ns.BeginWrite(toSend, 0, toSend.Length, OnWriteComplete, null);
            ns.Flush();
        }
        catch (Exception ex)
        {
            //Console.WriteLine(ex.ToString());
            sock.Shutdown(SocketShutdown.Both);
            sock.Close();
        }
    }

    private void OnWriteComplete(IAsyncResult ar)
    {
        NetworkStream thisNS = ns;
        thisNS.EndWrite(ar);
        sock.Shutdown(SocketShutdown.Both);
        sock.Close();
    }

}
} 
```

# java - 为什么我不能将 'int' 作为 ArrayList 的类型？

> ID：14349011
> 
> 赞同：43
> 
> 时间：2013-01-15T23:42:21.010
> 
> 标签：java, arraylist, integer

我想声明一个`ArrayList`type `int`。

为什么以下给我一个错误：

```
ArrayList<int> list1 = new ArrayList<int>(); 
```

但以下工作：

```
ArrayList<Integer> list1 = new ArrayList<Integer>(); 
```

?

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-15T23:46:14.310

`ArrayList`只能引用类型，不能引用原语。`Integer`是一个类，而不是一个基元。

当您声明时`ArrayList<Integer> list1 = new ArrayList<Integer>()`，您正在创建一个`ArrayList`将存储`Integer`类型而不是`int`原语的。

如果您想了解原始类型和引用类型之间的区别，请查看[http://pages.cs.wisc.edu/~hasti/cs302/examples/primitiveVsRef.html](http://pages.cs.wisc.edu/~hasti/cs302/examples/primitiveVsRef.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-15T23:43:27.283

因为`int`是*原始类型*。只有*引用类型*可以用作泛型参数。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-16T00:09:40.570

简短的回答是泛型（like `ArrayList<Integer>`）不接受原始类型（`int`），只接受对象（`Integer`）。

这是因为类似的类`ArrayList`是使用对象实现的。由于每个类都继承自 Object，因此编译器可以插入其他类。但是原始类型（如`int`）不继承自 Object，因为它们不是类。因此，Sun/Oracle 开设了`Integer`课程来帮助解决这个问题。

所以，简而言之：`int`不是一个`Object`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-05T20:25:31.197

上面的所有答案都回答了为什么，但这个问题的根源是原始数据类型的频繁自动装箱和拆箱。IntBuffer 或 ChadBuffer 已经解决了这个问题，或者您将原始类型命名为它已经存在于 nio 文件夹中。下次如果你想使用原始 ArrayList 不要使用 List 而是使用 IntBuffer

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T23:45:10.987

`int`是一个`primitive`。它不是一个`Object`.

有关更多详细信息，请参阅此[链接](http://%20http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html,)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-01T15:18:52.957

int 是原始数据类型，但 Integer 是一个类，因此 arrayList 数组只能将引用类型作为其参数，而不是原始类型

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-09T10:14:28.710

int 不是 Object，因此如果列表类型为 int，则无法完成列表的实现。

# javascript - 将函数参数传递给 getElementById "id"

> ID：14349012
> 
> 赞同：4
> 
> 时间：2013-01-15T23:42:21.977
> 
> 标签：javascript, function, arguments, getelementbyid

它是一个 js 函数，当您从选择框中选择适当的值时，它会显示各种文本输入形式。

```
function arata_formular(formular) {
            document.getElementById("formular").style.visibility = "visible";
            if(document.getElementById("formular").style.display == "none" ) {
                document.getElementById("formular").style.display = "inline";
            }
            else {
                document.getElementById("formular").style.display = "visible";
            }
        } 
```

但没有按预期工作。虽然它有一个论点，不管我将传递到那里（假设 arata_formular(entropy) 它仍然会寻找“公式”id而不是“熵”。我怎样才能插入“内联”？

不幸的是，我不能在这个或其他框架上使用 jquery。我必须只使用 javascript。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T23:43:33.207

只是摆脱引号。

```
function arata_formular(formular) {
    var el = document.getElementById( formular );

    el.style.visibility = "visible";
    el.style.display = el.style.display === "none" ? "inline" : "visible";
} 
```

* * *

## 或者

* * *

```
function arata_formular(formular) {
    document.getElementById( formular ).style = {
        visibility: "visible",
        display: el.style.display === "none" ? "inline" : "visible"
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T23:46:48.833

`formular`是一个变量，但您像字符串一样使用它。此外，您应该缓存它：

```
function arata_formular(formular) {
        var el = document.getElementById(formular);
        el.style.visibility = "visible";
        if(el.style.display == "none" ) {
            el.style.display = "inline";
        }
        else {
            el.style.display = "visible";
        }
        return el;//in case you want to use the element
} 
```

# php - Zend比较操作风格

> ID：14349016
> 
> 赞同：2
> 
> 时间：2013-01-15T23:42:30.317
> 
> 标签：php, zend-framework, comparison

这可能不是一个重要的问题，但它在任何时候（经常）遇到它都会困扰我，所以我需要让我的头脑休息一下。请多多包涵。

我更习惯于看到和使用这样的比较操作：

```
if($some_var ==NULL){} 
```

但是 Zend 文档（只有在 zend 中我才注意到这一点）总是反转操作数：

```
if(NULL ==$some_var){} 
```

我不是计算机科学家，所以我想知道这些操作数的顺序是否重要。zend 文档选择反向样式是否有区别或原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:49:03.663

结果是一样的。这种方法的优点是如果程序员不小心输入了一个等于而不是二，会发生什么：

```
if ($some_var = NULL) // this will perform an assignment instead of a comparison

if (NULL = $some_var) // this will give you a parse error 
```

所以它有助于防止这些类型的编码错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T23:50:08.123

出于一个原因，我更喜欢使用 Zend 风格。如果您不小心键入`=`而不是，`==`否则`===`您将收到错误消息。在变量优先格式中，您将默默地将该值分配给您的变量。

# iphone - 如何在 PhoneGap 中检测 iPhone5？

> ID：14349027
> 
> 赞同：0
> 
> 时间：2013-01-15T23:43:28.260
> 
> 标签：iphone, cordova

有没有一种简单的方法可以检测我的应用程序是否在 iPhone5 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:19:39.797

您可能想使用 PhoneGap 的内置 device.model 部分

[http://docs.phonegap.com/en/2.3.0/cordova_device_device.model.md.html#device.model](http://docs.phonegap.com/en/2.3.0/cordova_device_device.model.md.html#device.model)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T23:43:28.260

为什么是的，有...

```
function isIphone5() {
  return device.name.match(/iPhone/i) != null && 
    window.innerWidth == 568 || window.innerHeight == 568;
} 
```

# android - 使用按钮或单选组替代 Android 操作栏

> ID：14349033
> 
> 赞同：1
> 
> 时间：2013-01-15T23:43:48.517
> 
> 标签：android

我想在顶部创建一个简单的菜单类型操作栏。我喜欢使用按钮，但需要在选定链接上更改并保持颜色或图像。或者，单选按钮可以用作操作栏的替代品吗？我希望它看起来像此屏幕截图链接上的菜单选项卡： [在此处查看链接](http://1.bp.blogspot.com/-oWNA6kVaMEY/TkuaZXH-H-I/AAAAAAAAAJE/5GAf3VE_TFw/s1600/diet_assistant2.png)谢谢！

# c# - 如何在 LINQ to SQL 中编写和优化具有一对多关系的三表连接？

> ID：14349035
> 
> 赞同：0
> 
> 时间：2013-01-15T23:43:55.517
> 
> 标签：c#, sql-server, linq-to-sql

## 理想的班级结构

一个游戏有很多玩家，每个玩家都有很多统计数据。换句话说，每个都`List<Game>`包含 a`List<Player>`并且每个都`Player`包含 a `List<Statistic>`。

```
Game -> Player1 -> Statistic1
                   ....
                   Statistic30
        ....
        Player10 -> Statistic1
                    ....
                    Statistic30 
```

## 基本表架构

```
Game
----
GameId (int)
Region (nvarchar(4))

Player
------
GameId (int)
Region (nvarchar(4))
AccountId (int)

Statistic
---------
GameId (int)
Region (nvarchar(4))
AccountId (int) 
```

## 我的尝试

```
var b = (from g in db.Games
         select new GameDTO()
         {
             GameId = g.GameId,
             Players = (from p in db.PlayerGames
                        where p.GameId == g.GameId && p.Region.Equals(g.Region)
                        select new PlayerGameDTO()
                        {
                            AccountId = p.AccountId,
                            GameId = p.GameId,
                            Region = p.Region,
                            Statistics = (from r in db.Statistics
                                          where r.AccountId == p.AccountId && r.GameId == p.GameId && r.Region.Equals(p.Region)
                                        select r).ToList()
                        }).ToList()
         }); 
```

该解决方案（显然）不使用`Join`，主要是因为我不确定如何以`Join`正确的顺序执行 s 以获得所需的结果。

我应该提一下，我们每天汇总约 10 万新游戏、约 100 万玩家和约 3000 万统计数据。当前查询每秒可以选择约 1.4 个游戏，并使用 99% 的超线程四核 CPU。

如果有什么不清楚的地方，请随时要求澄清。

## 更新#1

```
var d = (from g in db.Games
         join p in db.PlayerGames on new { g.GameId, g.Region } equals new { p.GameId, p.Region }
         join r in db.Statistics on new { p.GameId, p.Region, p.AccountId } equals new { r.GameId, r.Region, r.AccountId }
         select new StatisticsDTO()
         {
             GameId = r.GameId, 
             AccountId = r.AccountId, 
             StatType = r.StatType,
             Value = r.Value
         }); 
```

这么简单的事情就是每秒产生约 9K（比原来快 22 倍）行。SQL Server 显然正在使用约 90% 的 CPU 完成所有工作。但是，我留下的是一维查询，而不是嵌套对象。

如果您对此更新有任何建议，我很想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:13:35.873

首先尝试一个简单的 linq join。

> ```
> Game
> ----
> GameId (int)
> Region (nvarchar(4))
> 
> Player
> ------
> GameId (int)
> Region (nvarchar(4))
> AccountId (int)
> 
> Statistic
> ---------
> GameId (int)
> Region (nvarchar(4))
> AccountId (int) 
> ```

```
var b = (from t in db.Games
         join t1 in t.Player on t.GameId equals t1.GameId
         join t2 in t.Statistic on t.GameId equals t2.GameId
         select new PlayerGameDTO
         {
            AccountId = t1.AccountId,
            GameId = t1.GameId,
            Region = t1.Region,
            //RawStats <-- what are you trying to do here?
            //RawStats = (from r in db.RawStats
            //where r.AccountId == p.AccountId && r.GameId == p.GameId && r.Region.Equals(p.Region) select r).ToList()
         }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:57:26.453

听起来让您的数据库处理其中的一些工作负载可能更合适，特别是如果您只是运行查询而不是写入数据库。考虑在您的数据库中创建一个实现连接的视图。然后您可以查询视图并避免加入您的客户端计算机。您仍然可以使用实体数据模型和 LINQ 对视图运行查询。使用这种方法，您应该会看到相当不错的性能提升。

```
//Possible SQL for creating the view
CREATE VIEW vw_GameData AS 
SELECT g.GameId, g.Region, p.AccountId, etc...
FROM Game g JOIN Player p ON (g.GameId = p.GameId AND g.Region = p.Region)
JOIN Statistic s ON (s.GameId = p.GameId AND s.RegionId = p.RegionId AND s.AccountId = p.AccountId) 
```

# c++ - 如何保持打开控制台？

> ID：14349036
> 
> 赞同：0
> 
> 时间：2013-01-15T23:43:56.223
> 
> 标签：c++, c, console

我试过这个：

```
main() {
    int a;
    cout << "Enter a number: ";
    cin >> a;
    cout << a;
    cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    return 0;
} 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:49:48.060

最简单的方法是简单地放置：

```
system("PAUSE"); 
```

无论您希望暂停在哪里（在您的情况下，在上面的行中返回 0；）

然而，由于许多安全问题，大多数人会认为使用`system`是不好的做法。相反，请尝试使用：

```
cin.get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:15:36.910

您无需修改​​源代码即可执行此操作。当您使用 exit() 或 abort() 从其他地方退出程序时，这往往很烦人。大多数 IDE 都可以选择保持控制台打开。您是否有机会使用 Dev-C++？它有一个暂停控制台的选项。您可以在环境设置中找到该选项。除非您使用的是 Bloodshed 的过时版本的 Dev-C++。如果是这样，您应该更新到 Orwell 版本： http: [//orwelldevcpp.blogspot.com](http://orwelldevcpp.blogspot.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:14:53.650

我一直很喜欢使用：

```
std::cout << "Paused. Press Enter to continue.";
std::cout.flush();
std::cin.ignore(100000, '\n'); 
```

# emacs - 如何在emacs中的缓冲区之间复制整行？

> ID：14349041
> 
> 赞同：2
> 
> 时间：2013-01-15T23:44:32.567
> 
> 标签：emacs

我想从缓冲区 A 复制一整行 - 到 -> 缓冲区 B。

与您在 Ediff 会话中执行此操作的方式相同。您只需按 A 或 B 即可复制整行。

但是我不在 ediff 中，因为两个文件不同。

有没有快速的方法呢？

还是键盘宏是最好的选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T00:43:52.583

除非您对学习 emacs-lisp 感兴趣，否则键盘宏绝对是最佳选择。

这是`C-h l`录制此宏的损失

> Cx ( Ca C-SPC Cn Mw Cx o Ca Cy Cu - 1 Cx o Cx )

这是转储为文本 ( `edit-last-kbd-macro`)的宏

```
;; Keyboard Macro Editor.  Press C-c C-c to finish; press C-x k RET to cancel.
;; Original keys: C-a C-SPC C-n M-w C-x o C-a C-y C-u -1 C-x o

Command: last-kbd-macro
Key: none

Macro:

C-a         ;; le::beginning-of-line
C-SPC           ;; set-mark-command
C-n         ;; next-line
M-w         ;; le::kill-ring-save
C-x o           ;; other-window
C-a         ;; le::beginning-of-line
C-y         ;; yank
C-u -1 C-x o        ;; other-window 
```

以下是将宏绑定到 init 文件中的键的代码：

```
(global-set-key (kbd "C-c c") [?\C-a ?\C-  ?\C-n ?\M-w ?\C-x ?o ?\C-a ?\C-y ?\C-u ?- ?1 ?\C-x ?o]) 
```

# jquery - 我可以将事件用作 if 语句条件吗

> ID：14349052
> 
> 赞同：0
> 
> 时间：2013-01-15T23:45:45.557
> 
> 标签：jquery

是否可以使用事件作为条件？如果我想说当表格单元格上的事件是 onclick 时这样做：

```
if($(this).bind(onclick)){} 
```

这个对吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:48:23.343

事件发生时触发。如果单击表格单元格，则会`click`触发事件。您不能将它们用作`if`语句中的条件，但是如果您想在某个事件发生时做某事，那就是事件处理程序的用途。

例如，这会将事件的事件处理程序绑定`click`到执行代码时出现的所有表格单元格（`<td>`元素）（在 DOM 就绪时）：

```
$(document).ready(function() {
    $('td').on('click', function(e) {
        console.log('table cell clicked');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:50:47.357

它是合法的 javascript，但不是很有用。它永远不会做任何事情，因为 if 语句的主体是空的。另外，因为`.bind()`返回的是 jQuery 对象，所以条件永远为真。因此，尽管 javascript 是合法的并且在这个意义上是“正确的”，但它对任何事情都不是很有用。

# java - 完成所有调用的 Intent

> ID：14349053
> 
> 赞同：0
> 
> 时间：2013-01-15T23:45:49.800
> 
> 标签：java, android

我有两个活动，一个是活动的，另一个是暂停的，我想关闭/完成所有这两个活动并开始另一个意图。我在活动活动中尝试了这个：

```
finish();
Intent intent = new Intent(getApplicationContext(), Init.class);
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent); 
```

然后我试图关闭 Init 类中的程序，它出现在我之前暂停的活动中。我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:53:37.080

`finish()`在启动最新意图并使用这些标志之前尝试调用不调用

```
Intent intent = new Intent(getApplicationContext(), Init.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

# python - 默认情况下使matplotlib图看起来像R？

> ID：14349055
> 
> 赞同：60
> 
> 时间：2013-01-15T23:45:53.873
> 
> 标签：python, r, matplotlib, plot, pandas

在绘制默认值方面，有没有办法使`matplotlib`行为与 R 相同或几乎像 R？例如 R 对待它的轴与`matplotlib`. 以下直方图 ![在此处输入图像描述](../Images/31b7b2fbcdac90d576ad14d770917f5c.png)

具有带有向外刻度的“浮动轴”，这样就没有内部刻度（与 不同`matplotlib`），并且轴不会“靠近”原点。此外，直方图可以“溢出”到未由刻度标记的值 - 例如，x 轴以 3 结束，但直方图略微超出它。对于 中的所有直方图，如何自动实现这一点`matplotlib`？

相关问题：散点图和折线图在 R 中具有不同的默认轴设置，例如： ![在此处输入图像描述](../Images/e0b88f680b5057b76faa305a8ff48779.png)

不再有内壁虱，壁虱朝外。此外，刻度在原点（y 轴和 x 轴在轴的左下角交叉处）之后开始，并且刻度在轴结束之前稍微结束。这样，最低 x 轴刻度和最低 y 轴刻度的标签就不能真正交叉，因为它们之间有一个空间，这使绘图看起来非常优雅干净。请注意，轴刻度标签和刻度本身之间也有相当大的空间。

此外，默认情况下，未标记的 x 或 y 轴上没有刻度，这意味着与右侧标记的 y 轴平行的左侧 y 轴没有刻度，x 轴也是如此，再次从地块中消除混乱。

有没有办法让 matplotlib 看起来像这样？通常默认情况下看起来与默认 R 图一样多？我很喜欢`matplotlib`，但我认为 R 默认值/开箱即用的绘图行为确实让事情变得正确，并且它的默认设置很少导致重叠的刻度标签、混乱或压扁的数据，所以我希望默认值是尽可能的那样。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-16T00:57:14.217

### 1年后编辑：

有了`seaborn`，下面的例子就变成了：

```
import numpy as np
import matplotlib.pyplot as plt
import seaborn
seaborn.set(style='ticks')
# Data to be represented
X = np.random.randn(256)

# Actual plotting
fig = plt.figure(figsize=(8,6), dpi=72, facecolor="white")
axes = plt.subplot(111)
heights, positions, patches = axes.hist(X, color='white')
seaborn.despine(ax=axes, offset=10, trim=True)
fig.tight_layout()
plt.show() 
```

很容易。

### 原帖：

这篇博文是我迄今为止看到的最好的。 [http://messymind.net/making-matplotlib-look-like-ggplot/](http://messymind.net/making-matplotlib-look-like-ggplot/)

它不像您在大多数“入门”类型的示例中看到的那样关注您的标准 R 图。相反，它试图模仿 ggplot2 的风格，这似乎几乎被普遍认为是时尚和精心设计的。

要获得像您在条形图中看到的轴刺，请尝试遵循此处的前几个示例之一：[http ://www.loria.fr/~rougier/coding/gallery/](http://www.loria.fr/%7Erougier/coding/gallery/)

最后，要使轴刻度线指向外部，您可以编辑`matplotlibrc`文件以说出`xtick.direction : out`和`ytick.direction : out`.

将这些概念结合在一起，我们会得到这样的结果：

```
import numpy as np
import matplotlib
import matplotlib.pyplot as plt
# Data to be represented
X = np.random.randn(256)

# Actual plotting
fig = plt.figure(figsize=(8,6), dpi=72, facecolor="white")
axes = plt.subplot(111)
heights, positions, patches = axes.hist(X, color='white')

axes.spines['right'].set_color('none')
axes.spines['top'].set_color('none')
axes.xaxis.set_ticks_position('bottom')

# was: axes.spines['bottom'].set_position(('data',1.1*X.min()))
axes.spines['bottom'].set_position(('axes', -0.05))
axes.yaxis.set_ticks_position('left')
axes.spines['left'].set_position(('axes', -0.05))

axes.set_xlim([np.floor(positions.min()), np.ceil(positions.max())])
axes.set_ylim([0,70])
axes.xaxis.grid(False)
axes.yaxis.grid(False)
fig.tight_layout()
plt.show() 
```

可以通过多种方式指定脊椎的位置。如果您在 IPython 中运行上面的代码，那么您可以`axes.spines['bottom'].set_position?`查看所有选项。

![python中的R样式条形图](../Images/f0473acbd04d4b3693e7e891f0120f6c.png)

是的。这不是微不足道的，但你可以接近。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-01-19T18:56:42.090

matplotlib >= 1.4 支持[样式](https://github.com/matplotlib/matplotlib/blob/master/doc/users/style_sheets.rst)（并且内置了 ggplot-style）：

```
In [1]: import matplotlib as mpl

In [2]: import matplotlib.pyplot as plt

In [3]: import numpy as np

In [4]: mpl.style.available
Out[4]: [u'dark_background', u'grayscale', u'ggplot']

In [5]: mpl.style.use('ggplot')

In [6]: plt.hist(np.random.randn(100000))
Out[6]: 
... 
```

![在此处输入图像描述](../Images/347f4ed93999d77b4bf08c88ccaf2ae9.png)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-01-16T04:49:32.503

######

编辑 2013 年 10 月 14 日：有关信息，ggplot 现在已为 python 实现（基于 matplotlib）。

有关更多信息和示例，请参阅此[博客](http://blog.yhathq.com/posts/ggplot-for-python.html)或直接转到项目的[github 页面](https://github.com/yhat/ggplot)。

######

据我所知，matplotlib 中没有内置的解决方案可以直接为您的图形提供与使用 R 制作的图形相似的外观。

一些包，如[mpltools](http://tonysyu.github.com/mpltools/index.html)，使用 Matplotlib 的 rc 参数添加了对样式表的支持，并且可以帮助您获得 ggplot 外观（请参阅[ggplot 样式](http://tonysyu.github.com/mpltools/auto_examples/style/plot_ggplot.html)以获取示例）。

但是，由于一切都可以在 matplotlib 中进行调整，因此您可能更容易直接开发自己的函数来实现您想要的。例如，下面是一个片段，可让您轻松自定义任何 matplotlib 图的轴。

```
def customaxis(ax, c_left='k', c_bottom='k', c_right='none', c_top='none',
               lw=3, size=20, pad=8):

    for c_spine, spine in zip([c_left, c_bottom, c_right, c_top],
                              ['left', 'bottom', 'right', 'top']):
        if c_spine != 'none':
            ax.spines[spine].set_color(c_spine)
            ax.spines[spine].set_linewidth(lw)
        else:
            ax.spines[spine].set_color('none')
    if (c_bottom == 'none') & (c_top == 'none'): # no bottom and no top
        ax.xaxis.set_ticks_position('none')
    elif (c_bottom != 'none') & (c_top != 'none'): # bottom and top
        ax.tick_params(axis='x', direction='out', width=lw, length=7,
                      color=c_bottom, labelsize=size, pad=pad)
    elif (c_bottom != 'none') & (c_top == 'none'): # bottom but not top
        ax.xaxis.set_ticks_position('bottom')
        ax.tick_params(axis='x', direction='out', width=lw, length=7,
                       color=c_bottom, labelsize=size, pad=pad)
    elif (c_bottom == 'none') & (c_top != 'none'): # no bottom but top
        ax.xaxis.set_ticks_position('top')
        ax.tick_params(axis='x', direction='out', width=lw, length=7,
                       color=c_top, labelsize=size, pad=pad)
    if (c_left == 'none') & (c_right == 'none'): # no left and no right
        ax.yaxis.set_ticks_position('none')
    elif (c_left != 'none') & (c_right != 'none'): # left and right
        ax.tick_params(axis='y', direction='out', width=lw, length=7,
                       color=c_left, labelsize=size, pad=pad)
    elif (c_left != 'none') & (c_right == 'none'): # left but not right
        ax.yaxis.set_ticks_position('left')
        ax.tick_params(axis='y', direction='out', width=lw, length=7,
                       color=c_left, labelsize=size, pad=pad)
    elif (c_left == 'none') & (c_right != 'none'): # no left but right
        ax.yaxis.set_ticks_position('right')
        ax.tick_params(axis='y', direction='out', width=lw, length=7,
                       color=c_right, labelsize=size, pad=pad) 
```

**编辑：**对于非接触式脊椎，请参阅下面的函数，该函数会导致脊椎位移 10 分（取自matplotlib 网站上的[此示例）。](http://matplotlib.org/examples/pylab_examples/spine_placement_demo.html)

```
def adjust_spines(ax,spines):
    for loc, spine in ax.spines.items():
        if loc in spines:
            spine.set_position(('outward',10)) # outward by 10 points
            spine.set_smart_bounds(True)
        else:
            spine.set_color('none') # don't draw spine 
```

例如，下面的代码和两个图显示了 matplotib 的默认输出（左侧），以及调用函数时的输出（右侧）：

```
import numpy as np
import matplotlib.pyplot as plt

fig,(ax1,ax2) = plt.subplots(figsize=(8,5), ncols=2)
ax1.plot(np.random.rand(20), np.random.rand(20), 'ok')
ax2.plot(np.random.rand(20), np.random.rand(20), 'ok')

customaxis(ax2) # remove top and right spines, ticks out
adjust_spines(ax2, ['left', 'bottom']) # non touching spines

plt.show() 
```

![图片](../Images/62d64f30ecf86d0ea952e1985a17739e.png)

当然，您需要时间来确定必须在 matplotlib 中调整哪些参数以使您的图看起来与 R 的图完全一样，但我不确定现在还有其他选择。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-16T00:44:17.643

我会查看[Bokeh](https://github.com/ContinuumIO/Bokeh/)，它旨在“在 R 中提供与 ggplot 相当的引人注目的 Python”。[这里的](http://htmlpreview.github.com/?https://github.com/ContinuumIO/Bokeh/blob/master/tests/cdx/bokeh-facets.html)例子

编辑：还可以查看[Seaborn](http://stanford.edu/~mwaskom/software/seaborn/)，它试图重现 ggplot2 的视觉风格和语法。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-07T04:37:48.500

这是您可能有兴趣阅读的博客文章：

**为 Pandas GSoC2012 绘图**

[http://pandasplotting.blogspot.com/](http://pandasplotting.blogspot.com/)

> 决定尝试实现一个 ggplot2 类型的绘图接口...尚不确定要实现多少 ggplot2 功能...

作者 fork pandas 并为 pandas 构建了很多 ggplot2 风格的语法。

![密度图](../Images/b32198c9c9059af333725321780db398.png)

```
plot = rplot.RPlot(tips_data, x='total_bill', y='tip')
plot.add(rplot.TrellisGrid(['sex', 'smoker']))
plot.add(rplot.GeomHistogram())
plot.render(plt.gcf()) 
```

熊猫叉在这里：[https ://github.com/orbitfold/pandas](https://github.com/orbitfold/pandas)

似乎制作受 R 影响的图形的代码位于一个名为的文件中，该文件`rplot.py`可以在 repo 的一个分支中找到。

```
class GeomScatter(Layer):
    """
    An efficient scatter plot, use this instead of GeomPoint for speed.
    """

class GeomHistogram(Layer):
    """
    An efficient histogram, use this instead of GeomBar for speed.
    """ 
```

分支链接：

[https://github.com/orbitfold/pandas/blob/rplot/pandas/tools/rplot.py](https://github.com/orbitfold/pandas/blob/rplot/pandas/tools/rplot.py)

我认为这真的很酷，但我不知道这个项目是否正在维护。最后一次提交是在不久前。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-06T02:19:43.313

[在 matplotlibrc 中设置脊椎](https://stackoverflow.com/questions/3439344/setting-spines-in-matplotlibrc)解释了为什么不能简单地编辑 Matplotlib 默认值来生成 R 风格的直方图。对于散点图， matplotlib和matplotlib[中的 R 样式数据轴缓冲区](https://stackoverflow.com/questions/13485623/r-style-data-axis-buffer-in-matplotlib)[，如何绘制从轴向外指向的 R 样式轴刻度？](https://stackoverflow.com/questions/6260055/in-matplotlib-how-do-you-draw-r-style-axis-ticks-that-point-outward-from-the-ax)显示一些可以更改的默认值，以提供更多 R-ish 外观。在其他一些答案的基础上，假设`hist()`您`Axes`使用`facecolor='none'`.

```
def Rify(axes):
    '''
    Produce R-style Axes properties
    '''
    xticks = axes.get_xticks() 
    yticks = axes.get_yticks()

    #remove right and upper spines
    axes.spines['right'].set_color('none') 
    axes.spines['top'].set_color('none')

    #make the background transparent
    axes.set_axis_bgcolor('none')

    #allow space between bottom and left spines and Axes
    axes.spines['bottom'].set_position(('axes', -0.05))
    axes.spines['left'].set_position(('axes', -0.05))

    #allow plot to extend beyond spines
    axes.spines['bottom'].set_bounds(xticks[0], xticks[-2])
    axes.spines['left'].set_bounds(yticks[0], yticks[-2])

    #set tick parameters to be more R-like
    axes.tick_params(direction='out', top=False, right=False, length=10, pad=12, width=1, labelsize='medium')

    #set x and y ticks to include all but the last tick
    axes.set_xticks(xticks[:-1])
    axes.set_yticks(yticks[:-1])

    return axes 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-21T22:03:26.853

*Seaborn*可视化库可以做到这一点。例如，要重现 R 直方图的样式，请使用：

```
sns.despine(offset=10, trim=True) 
```

如[https://seaborn.pydata.org/tutorial/aesthetics.html#removing-axes-spines](https://seaborn.pydata.org/tutorial/aesthetics.html#removing-axes-spines)

[![在此处输入图像描述](../Images/29d7432ff375f99620abe093a29639ba.png)](https://i.stack.imgur.com/06gH4.png)

要重现 R 散点图的样式，请使用：

```
sns.set_style("ticks") 
```

如[https://seaborn.pydata.org/tutorial/aesthetics.html#seaborn-figure-styles所示](https://seaborn.pydata.org/tutorial/aesthetics.html#seaborn-figure-styles)

[![在此处输入图像描述](../Images/099982aa68b59be872e179a348acb1e3.png)](https://i.stack.imgur.com/LYrpE.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-21T13:42:40.760

`import matplotlib.pyplot as plt plt.style.use('ggplot')`

在这里做一些情节，并享受它

# jquery - address_picker-rails gem 移除样式

> ID：14349066
> 
> 赞同：0
> 
> 时间：2013-01-15T23:46:48.007
> 
> 标签：jquery, ruby-on-rails, google-maps

当我在我的 application.js 文件中包含 //= require address_picker-rails 时，它似乎删除了其他 jquery 对象的样式，例如我的日期选择器。它有一个透明的背景。

我并没有真正跟上 jquery 的速度，所以在任何地方它可能会重置我应该查看的 CSS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:37:12.370

将它移动到其他 //jquery 对象的上方/下方

# c++ - std::ios_base::Init::Init() 和 std::string::assign(std::string const&) 上的 SIGILL

> ID：14349068
> 
> 赞同：1
> 
> 时间：2013-01-15T23:46:49.567
> 
> 标签：c++, linux, embedded, powerpc

使用嵌入式 linux 交叉编译 Ubuntu 机器上的代码以在 COMX-p2020 模块上运行。我假设我丢失或有一些编译器设置不正确，这导致了非法指令。这是我的编译器标志。

```
CPPFLAGS = -MD -MP -w -g $(DEFINES) $(INCLUDES) -pthread -mcpu=powerpc 
```

这是 gdb 的输出。

```
Program received signal SIGILL, Illegal instruction.
0x0ff1d3f4 in std::ios_base::Init::Init() () from /usr/lib/libstdc++.so.6
(gdb) bt
#0  0x0ff1d3f4 in std::ios_base::Init::Init() () from /usr/lib/libstdc++.so.6
#1  0x100d3074 in __static_initialization_and_destruction_0 (__initialize_p=1,__priority=65535) at /opt/Freescale/CodeWarrior_PA_10.0/Cross_Tools/freescale-4.4/bin/../lib/gcc/powerpc-linux-gnu/4.4.1/../../../../powerpc-linux-gnu/include/c++/4.4.1/iostream:72
#2  0x100d30d0 in global constructors keyed to outDmxData() () at ../Luminaire/Mac Source/VArtnetManager.cpp:769
#3  0x100def88 in __do_global_ctors_aux ()
#4  0x10001a58 in _init ()
#5  0x100deed8 in __libc_csu_init ()
#6  0x0fc1d684 in generic_start_main () from /lib/libc.so.6
#7  0x0fc1d8b0 in __libc_start_main () from /lib/libc.so.6
#8  0x00000000 in ?? () 
```

它永远不会到达 main，看起来它正在尝试分配一个全局变量并在初始化期间阻塞。这是有问题的全球。

```
unsigned char outDmxData[kNumDmxBuses][513]; 
```

然后我开始剥离代码以确保我可以让它运行。我可以使用相同的编译器设置编译并成功运行一个简单的 hello world，没有问题。然后我开始慢慢添加对象，直到遇到这个。

```
Program received signal SIGILL, Illegal instruction.
0x0ff6b680 in std::string::assign(std::string const&) ()
from /usr/lib/libstdc++.so.6
(gdb) bt
#0  0x0ff6b680 in std::string::assign(std::string const&) () from /usr/lib/libstdc++.so.6
#1  0x0ff6b6e4 in std::string::operator=(std::string const&) () from /usr/lib/libstdc++.so.6
#2  0x10008014 in VxQueue::InitQueue (this=0x10052038) at ../Common/SystemObjects/VxQueue.cpp:114
#3  0x10007a6c in VxQueue::VxQueue (this=0x10052038,queueName=0x1001d580 "DestoryedObjects") at ../Common/SystemObjects/VxQueue.cpp:40
#4  0x10004aa4 in VxMessageManager::CreateQueueContext (this=0x10052008,queueName=0x1001d580 "DestoryedObjects") at ../Common/SystemObjects/VxMessageManager.cpp:209
#5  0x10004750 in VxMessageManager::VxMessageManager (this=0x10052008) at ../Common/SystemObjects/VxMessageManager.cpp:187
#6  0x10003fa0 in VxMessageManager::CreateSharedMessageManager () at ../Common/SystemObjects/VxMessageManager.cpp:36
#7  0x10001714 in main () at ../Luminaire_gcc/main.cpp:68 
```

有问题的行看起来像这样。

```
// set default queue name
char queueName[32];
snprintf(queueName, sizeof(queueName), "queue_%04d", m_queueId);
m_queueName = std::string(queueName); // <- error in question 
```

**编辑**

这是 std::ios_base::Init::Init() 的反汇编。看起来 .long 是它遇到问题的指令。将在几个中发布 std::string 。

```
 0x0ff1d3dc <+76>:    stw     r28,48(r1)
   0x0ff1d3e0 <+80>:    lwz     r24,-32768(r30)
   0x0ff1d3e4 <+84>:    stw     r31,60(r1)
   0x0ff1d3e8 <+88>:    cmpwi   cr7,r24,0
   0x0ff1d3ec <+92>:    beq-    cr7,0xff1d870 <_ZNSt8ios_base4InitC1Ev+1248>
   0x0ff1d3f0 <+96>:    lwz     r27,-32764(r30)
=> 0x0ff1d3f4 <+100>:   .long 0x7c2004ac
   0x0ff1d3f8 <+104>:   lwarx   r28,0,r27
   0x0ff1d3fc <+108>:   addi    r9,r28,1
   0x0ff1d400 <+112>:   stwcx.  r9,0,r27
   0x0ff1d404 <+116>:   bne-    0xff1d3f8 <_ZNSt8ios_base4InitC1Ev+104> 
```

std::string 问题看起来是一样的。我猜`.long 0x7c2004ac`这意味着它不知道指令是什么？

```
 0x0ff6b528 <+72>:    lwz     r0,-32760(r30)
   0x0ff6b52c <+76>:    cmpwi   cr7,r0,0
   0x0ff6b530 <+80>:    beq-    cr7,0xff6b564 <_ZNSsD1Ev+132>
   0x0ff6b534 <+84>:    addi    r10,r3,8
=> 0x0ff6b538 <+88>:    .long 0x7c2004ac
   0x0ff6b53c <+92>:    lwarx   r9,0,r10
   0x0ff6b540 <+96>:    addi    r11,r9,-1
   0x0ff6b544 <+100>:   stwcx.  r11,0,r10
   0x0ff6b548 <+104>:   bne-    0xff6b53c <_ZNSsD1Ev+92> 
```

**编辑**

对不起，长度。边走边记录这对我更有利。看起来 0x7c2004ac 转换为 PPC_INST_LWSYNC。这让我看到这篇文章[http://gcc.gnu.org/ml/gcc-patches/2006-11/msg01238.html](http://gcc.gnu.org/ml/gcc-patches/2006-11/msg01238.html)这听起来像是我的确切问题（lwsync 在 e500 处理器上不起作用）。下一个问题是，我时间紧迫，而且我使用的工具链是与开发工具包一起打包的。所以我不知道有一种方法可以快速修补这个问题，而无需试图弄清楚如何从头开始构建工具链，我知道这不会是一项快速的任务，至少对我来说......我想我可以联系供应商，但他们过去一直没有回应，通常由我来解决他们的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:25:43.117

使用 gdb 命令`disassemble`查看第 0 帧中的指令是什么，然后确定这是否是您的硬件平台的合法指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:19:47.970

最后通过切换到不同的工具链解决了我的问题。我使用的是 Codewarrior 10.0.2 附带的工具链，这导致了我的问题。然后我使用 crosstools-ng 1.17.0 和 powerpc-e500v2-linux-gnuspe 示例来构建一个新的工具链。我遇到了一个问题，crosstools-ng 无法使用`[ERROR] configure: error: python is missing or unusable`. 我确实安装了python，所以不确定为什么会出现错误。我自己已经在交叉编译 gdb，所以只需在 menuconfig（调试设施->gdb）中禁用它。我还必须通过编译器升级禁用内核上的 -Werror。

另外，我在编译我的二进制文件时为 mpcu 选项指定了 e500mc。

```
CPPFLAGS = -MD -MP -w -g $(DEFINES) $(INCLUDES) -pthread -mcpu=e500mc 
```

感谢乔纳森为我指明了正确的方向。希望这可以帮助某人比我更快地调试类似问题。

# c# - 使用 Windbg 在内存转储中查找调用的目标线程

> ID：14349073
> 
> 赞同：4
> 
> 时间：2013-01-15T23:46:57.213
> 
> 标签：c#, multithreading, windbg, invoke, method-invocation

**背景**

客户报告 C# 应用程序出现挂起。在应用程序挂起时，我有一个内存转储。内存转储显示主 UI 线程显示进度表单和多个后台线程正在运行。后台线程之一正在尝试将 Control.Invoke 回主线程以更新表单。CLR 堆栈如下所示：

```
System.Threading.WaitHandle.WaitOneNative(Microsoft.Win32.SafeHandles.SafeWaitHandle, UInt32, Boolean, Boolean) 
System.Threading.WaitHandle.WaitOne(Int64, Boolean) 
System.Threading.WaitHandle.WaitOne(Int32, Boolean) 
System.Windows.Forms.Control.WaitForWaitHandle(System.Threading.WaitHandle) 
System.Windows.Forms.Control.MarshaledInvoke(System.Windows.Forms.Control, System.Delegate, System.Object[], Boolean) 
System.Windows.Forms.Control.Invoke(System.Delegate, System.Object[]) 
profdata.com.Library.frmAsyncExec.SetMessageText(System.String) 
profdata.com.Library.frmAsyncExec.SetMessage(System.String, System.String) 
profdata.com.Library.frmAsyncExec.DoAsyncProcess(System.Object) 
System.Threading.ThreadHelper.ThreadStart_Context(System.Object) 
System.Threading.ExecutionContext.runTryCode(System.Object) 
System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object) 
System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object) 
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object) 
System.Threading.ThreadHelper.ThreadStart(System.Object) 
```

UI 线程处于模态循环并等待消息：

```
System.Windows.Forms.UnsafeNativeMethods.WaitMessage() 
System.Windows.Forms.Application+ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32, Int32, Int32) 
System.Windows.Forms.Application+ThreadContext.RunMessageLoopInner(Int32, System.Windows.Forms.ApplicationContext) 
System.Windows.Forms.Application+ThreadContext.RunMessageLoop(Int32, System.Windows.Forms.ApplicationContext) 
System.Windows.Forms.Application.RunDialog(System.Windows.Forms.Form) 
System.Windows.Forms.Form.ShowDialog(System.Windows.Forms.IWin32Window) 
profdata.com.Library.frmAppletBaseForm.ShowDialog(System.Windows.Forms.IWin32Window) 
profdata.com.Library.frmAsyncExec.ExecuteProcess(System.Windows.Forms.IWin32Window) 
```

我验证了消息队列中唯一的消息（我可以看到）是绘制消息。消息 15 对应于 WM_PAINT：

```
0:000> !dso
OS Thread Id: 0x126c (0)
ESP/REG  Object   Name
ebx      01a688d0 System.Windows.Forms.Application+ThreadContext
esi      01a6eb9c System.Windows.Forms.Application+ComponentManager+ComponentHashtableEntry
edi      1b0c05e0 System.Collections.Hashtable+HashtableEnumerator
0036e244 1b08430c System.Windows.Forms.NativeMethods+MSG[]

0:000> !da 1b08430c 
Name: System.Windows.Forms.NativeMethods+MSG[]
MethodTable: 67e0592c
EEClass: 67be89b8
Size: 40(0x28) bytes
Array: Rank 1, Number of elements 1, Type VALUETYPE
Element Methodtable: 67e059dc

0:000> !dumpvc 67e059dc 1b084314
Name: System.Windows.Forms.NativeMethods+MSG
MethodTable 67e059dc
EEClass: 67bbd880
Size: 36(0x24) bytes
 (C:\Windows\assembly\GAC_MSIL\System.Windows.Forms\2.0.0.0__b77a5c561934e089\System.Windows.Forms.dll)
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
691b35f0  4002ba0        0        System.IntPtr  1 instance    b02ee hwnd
691b2f74  4002ba1        4         System.Int32  1 instance       15 message
691b35f0  4002ba2        8        System.IntPtr  1 instance        0 wParam
691b35f0  4002ba3        c        System.IntPtr  1 instance        0 lParam
691b2f74  4002ba4       10         System.Int32  1 instance 264314085 time
691b2f74  4002ba5       14         System.Int32  1 instance      188 pt_x
691b2f74  4002ba6       18         System.Int32  1 instance      386 pt_y 
```

我知道 Control.MarshaledInvoke 是作为已知消息的 PostMessage 实现的：

```
private object MarshaledInvoke(Control caller, Delegate method, object[] args, bool synchronous)
{
    ...
    System.Windows.Forms.UnsafeNativeMethods.PostMessage(new HandleRef(this, this.Handle), threadCallbackMessage, IntPtr.Zero, IntPtr.Zero);
    ...
} 
```

[MSDN 对PostMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)这么说：

> 在与创建指定窗口的线程关联的消息队列中放置（发布）一条消息，并在不等待线程处理消息的情况下返回。

我怀疑这是后台线程访问已知会导致应用程序挂起的 UI 对象的经典案例。我很清楚这是一件坏事。

由于有多个后台线程，我想确定哪个后台线程搞砸了。

**问题**

是否可以使用内存转储中的信息来确定调用 Control.Invoke 的目标线程？

**工作至今**

我得到了后台线程的堆栈对象的转储：

```
0:000> ~20s
0:020> !dso
OS Thread Id: 0x5d8 (20)
ESP/REG  Object   Name
ecx      01a2b2d0 System.Runtime.Remoting.Contexts.Context
0c42e49c 1b083e20 System.Threading.ManualResetEvent
0c42e524 01a2006c System.Collections.Hashtable
0c42e560 1b083e38 Microsoft.Win32.SafeHandles.SafeWaitHandle
0c42e5fc 1b044128 System.Windows.Forms.PropertyStore
0c42e608 1b060b68 System.Collections.Queue
0c42e610 1b083de0 System.Windows.Forms.Control+ThreadMethodEntry
0c42e65c 1b043b30 profdata.com.DailyReporting.frmDRAsyncExec
0c42e66c 1b083cb0 System.Object[]    (System.Object[])
0c42e670 1b083c90 profdata.com.Library.frmAsyncExec+SetMessageDelegate
0c42e674 1b083cc4 System.Windows.Forms.Control+MultithreadSafeCallScope
0c42e694 1b043b30 profdata.com.DailyReporting.frmDRAsyncExec 
```

我试过寻找 ThreadMethodEntry 和 Context 对象，但我不确定我在寻找什么：

```
0:020> !do 1b083de0 
Name: System.Windows.Forms.Control+ThreadMethodEntry
MethodTable: 67e05380
EEClass: 67be8454
Size: 52(0x34) bytes
 (C:\Windows\assembly\GAC_MSIL\System.Windows.Forms\2.0.0.0__b77a5c561934e089\System.Windows.Forms.dll)
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
67dff750  40011b9        4 ...ows.Forms.Control  0 instance 1b043b30 caller
67dff750  40011ba        8 ...ows.Forms.Control  0 instance 1b043b30 marshaler
691b118c  40011bb        c      System.Delegate  0 instance 1b083c90 method
691844f8  40011bc       10      System.Object[]  0 instance 1b083cb0 args
691b0944  40011bd       14        System.Object  0 instance 00000000 retVal
691b0ebc  40011be       18     System.Exception  0 instance 00000000 exception
691847f4  40011bf       2c       System.Boolean  1 instance        1 synchronous
691847f4  40011c0       2d       System.Boolean  1 instance        0 isCompleted
69197b54  40011c1       1c ....ManualResetEvent  0 instance 1b083e20 resetEvent
691b0944  40011c2       20        System.Object  0 instance 1b083e14 invokeSyncObject
691ada1c  40011c3       24 ....ExecutionContext  0 instance 1b083cd0 executionContext
691aa00c  40011c4       28 ...ronizationContext  0 instance 00000000 syncContext

0:020> !do 01a2b2d0 
Name: System.Runtime.Remoting.Contexts.Context
MethodTable: 691a210c
EEClass: 68fcf620
Size: 60(0x3c) bytes
 (C:\Windows\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll)
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
691844f8  4001f60        4      System.Object[]  0 instance 01a2b3a0 _ctxProps
691a219c  4001f61        8 ...micPropertyHolder  0 instance 00000000 _dphCtx
691a75b4  4001f62        c ...em.LocalDataStore  0 instance 00000000 _localDataStore
69196f18  4001f63       10 ...ging.IMessageSink  0 instance 00000000 _serverContextChain
69196f18  4001f64       14 ...ging.IMessageSink  0 instance 00000000 _clientContextChain
691b1508  4001f65       18     System.AppDomain  0 instance 01a01298 _appDomain
691844f8  4001f66       1c      System.Object[]  0 instance 00000000 _ctxStatics
691b35f0  4001f67       20        System.IntPtr  1 instance   551520 _internalContext
691b2f74  4001f68       24         System.Int32  1 instance        0 _ctxID
691b2f74  4001f69       28         System.Int32  1 instance        3 _ctxFlags
691b2f74  4001f6a       2c         System.Int32  1 instance        1 _numCtxProps
691b2f74  4001f6b       30         System.Int32  1 instance        0 _ctxStaticsCurrentBucket
691b2f74  4001f6c       34         System.Int32  1 instance        0 _ctxStaticsFreeIndex
691a219c  4001f6d      654 ...micPropertyHolder  0   shared   static _dphGlobal
    >> Domain:Value  00557ff8:01a2b068 <<
69189944  4001f6e      658 ...LocalDataStoreMgr  0   shared   static _localDataStoreMgr
    >> Domain:Value  00557ff8:01a2b07c <<
691b2f74  4001f6f      b40         System.Int32  1   shared   static _ctxIDCounter
    >> Domain:Value  00557ff8:0 << 
```

或者也许有一种更原生的方法，涉及找到窗口句柄与特定线程的关联，但如果是这样，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:22:17.550

您需要在 ThreadMethodEntry 中转储在 UI 线程上执行的委托（方法字段）。其他成员只是在那里，以便 UI 线程知道将回调发送到哪个控件以及它在哪个同步上下文中执行。

还有一些标志可以检查是否需要调用，如果调用确实失败了，还有一个异常字段，如果调用是通过 Invoke 调用完成的，则可以将其编组回调用者。您可以放心地忽略那里的其他内容。

更多信息当您手头只有一个委托实例时如何找出调用了哪个方法，您可以在这里找到：http: [//geekswithblogs.net/akraus1/archive/2012/05/20/149699.aspx](http://geekswithblogs.net/akraus1/archive/2012/05/20/149699.aspx)

由于您的回调甚至没有执行，您还应该查看其他线程。这种神秘的挂​​起经常与 WM_SETTING_CHANGE 窗口消息一起发生，其中非 UI 线程试图调用您的控件（请参阅[http://ikriv.com/dev/dotnet/MysteriousHang.html#BeginInvokeDance](http://ikriv.com/dev/dotnet/MysteriousHang.html#BeginInvokeDance)）。

# ios - HTML 内容预加载到应用程序中，然后从 Internet 更新

> ID：14349074
> 
> 赞同：0
> 
> 时间：2013-01-15T23:47:05.150
> 
> 标签：ios, objective-c, caching, uiwebview

标题说（相当）全部：我想分发一个应用程序，其中一些 HTML 页面预加载到本地 Documents 文件夹中（它们反映了互联网上可用的迷你移动网站的内容）；然后，当页面内容更新时，应用程序中的本地 HTML 文件也应该更新，以便用户在不连接互联网时也可以浏览更新的信息。

该应用程序必须从第一次启动开始工作，这要归功于预加载的页面，然后定期自我更新（我不需要检查单个文件的修改日期/时间，在本地复制时检查和更新它们就足够了超过 x 天）。

问题：我想我可以做到这一切，但我问自己是否有一些框架/类可以自动完成，因为这听起来很痛苦:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:07:15.877

考虑使用[ASIHTTPRequest](https://github.com/pokeb/asi-http-request/tree)。看看这个[SO question](https://stackoverflow.com/questions/6696151/how-to-cache-a-whole-web-page-with-images-in-ios)。

具体来说，您可能想查看 ASIWebPageRequest：

> 下载完整的网页，包括图像和样式表等外部资源。即使没有网络连接，任何大小的页面都可以无限期地缓存，并显示在 UIWebview / WebView 中。

我也将[AFNetworking](http://afnetworking.com/)用于我自己的个人项目，它让我的生活轻松了 10 倍。在[AFNetworking 常见问题](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)页面上，有一个关于离线查看缓存机制的问题。它提到`NSURLCache`在 iOS 5 中引入了对缓存到磁盘以供离线使用的支持 - 但仅适用于`http`. 如果需要缓存`https`，请考虑使用[SDURLCache](https://github.com/steipete/SDURLCache)。

这是关于 iOS 网络缓存的简短[附加资源。](https://devcenter.heroku.com/articles/ios-network-caching-http-headers)阅读标题为***iOS 网络缓存的部分***

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T00:01:54.883

如果您正在考虑使用相当于浏览器缓存的方式预先弹出您的 iOS 应用程序，那么 [https://github.com/rs/SDURLCache](https://github.com/rs/SDURLCache)可能值得研究。

它与现有的 NSURLConnection 框架（例如 AFNetworking）挂钩，您只需在 NSURLRequest 中设置正确的缓存策略。

鉴于它的开源，您应该能够弄清楚如何将数据放置在哪里，以便它加载它而不是第一次从服务器获取，然后只需指定您希望缓存何时清除自身以便从服务器获取它？

# python - 将向量化与 numpy 用于 Bellman-Ford 算法

> ID：14349084
> 
> 赞同：2
> 
> 时间：2013-01-15T23:48:04.877
> 
> 标签：python, numpy, bellman-ford

我一直在尝试编写 Bellman Ford 算法以在图中找到最短路径，虽然我有一个可行的解决方案，但它运行得不是很快，我相信如果我可以更快使用 numpy 而不是我目前的方法。

这是我使用 for 循环的解决方案：

```
import os                    
file = open(os.path.dirname(os.path.realpath(__file__)) + "/g_small.txt")

vertices, edges = map(lambda x: int(x), file.readline().replace("\n", "").split(" "))

adjacency_list = [[] for k in xrange(vertices)]
for line in file.readlines():
    tail, head, weight = line.split(" ")
    adjacency_list[int(head)-1].append({"from" : int(tail), "weight" : int(weight)})

n = vertices

shortest_paths = []
s=2

cache = [[0 for k in xrange(vertices)] for j in xrange(vertices)]
cache[0][s] = 0

for v in range(0, vertices):
    if v != s:
    cache[0][v] = float("inf")

# this can be done with numpy I think?
for i in range(1, vertices):
    for v in range(0, vertices):
        adjacent_nodes = adjacency_list[v]

        least_adjacent_cost = float("inf")
        for node in adjacent_nodes:
            adjacent_cost = cache[i-1][node["from"]-1] + node["weight"]
            if adjacent_cost < least_adjacent_cost:
                least_adjacent_cost = adjacent_cost

        cache[i][v] = min(cache[i-1][v], least_adjacent_cost)

shortest_paths.append([s, cache[vertices-1]])

for path in shortest_paths:
    print(str(path[1]))

shortest_path = min(reduce(lambda x, y: x + y, map(lambda x: x[1], shortest_paths)))  
print("Shortest Path: " + str(shortest_path)) 
```

输入文件如下所示 -> [https://github.com/mneedham/algorithms2/blob/master/shortestpath/g_small.txt](https://github.com/mneedham/algorithms2/blob/master/shortestpath/g_small.txt)

除了大约一半的嵌套循环之外，这几乎是无趣的。我尝试使用 numpy 对其进行矢量化，但考虑到矩阵/二维数组在每次迭代中都会发生变化，我不太确定该怎么做。

如果有人对我需要做的事情或什至要阅读的内容有任何想法，那将在我的道路上对我有所帮助，那就太棒了。

===================

我写了一个更新版本来考虑 Jaime 的评论：

```
s=0

def initialise_cache(vertices, s):
    cache = [0 for k in xrange(vertices)]
    cache[s] = 0

    for v in range(0, vertices):
        if v != s:
            cache[v] = float("inf")
    return cache    

cache = initialise_cache(vertices, s)

for i in range(1, vertices):
    previous_cache = deepcopy(cache)
    cache = initialise_cache(vertices, s)
    for v in range(0, vertices):
        adjacent_nodes = adjacency_list[v]

    least_adjacent_cost = float("inf")
    for node in adjacent_nodes:
        adjacent_cost = previous_cache[node["from"]-1] + node["weight"]
        if adjacent_cost < least_adjacent_cost:
            least_adjacent_cost = adjacent_cost

    cache[v] = min(previous_cache[v], least_adjacent_cost) 
```

=================

这次使用矢量化的另一个新版本：

```
def initialise_cache(vertices, s):
    cache = empty(vertices)
    cache[:] = float("inf")
    cache[s] = 0
    return cache    

adjacency_matrix = zeros((vertices, vertices))
adjacency_matrix[:] = float("inf")
for line in file.readlines():
    tail, head, weight = line.split(" ")
    adjacency_matrix[int(head)-1][int(tail)-1] = int(weight)    

n = vertices
shortest_paths = []
s=2

cache = initialise_cache(vertices, s)
for i in range(1, vertices):
    previous_cache = cache
    combined = (previous_cache.T + adjacency_matrix).min(axis=1)
    cache = minimum(previous_cache, combined)

shortest_paths.append([s, cache]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:53:32.993

在遵循 Jaime 的建议后，我得到了以下矢量化代码：

```
def initialise_cache(vertices, s):
    cache = empty(vertices)
    cache[:] = float("inf")
    cache[s] = 0
    return cache    

adjacency_matrix = zeros((vertices, vertices))
adjacency_matrix[:] = float("inf")
for line in file.readlines():
    tail, head, weight = line.split(" ")
    adjacency_matrix[int(head)-1][int(tail)-1] = int(weight)    

n = vertices
shortest_paths = []
s=2

cache = initialise_cache(vertices, s)
for i in range(1, vertices):
    previous_cache = cache
    combined = (previous_cache.T + adjacency_matrix).min(axis=1)
    cache = minimum(previous_cache, combined)

shortest_paths.append([s, cache]) 
```

# php - 如何检查 mysql 数据库中是否不存在电子邮件和公司名称

> ID：14349088
> 
> 赞同：-1
> 
> 时间：2013-01-15T23:48:27.793
> 
> 标签：php

我想知道是否有人可以提供帮助（对不起，我知道这个主题之前已经提出过）

我有一个注册表单，我想确保在提交之前公司和电子邮件地址不存在。

我很感激任何帮助。

哦，我的表名是 R_TABLE，字段是 COMPANY 哦，我的表名是 U_TABLE，字段是 EMAIL

```
 <?
    session_start();
    //ignore this -->$email = $_POST['email'] ;

    //error_reporting(E_ALL); 
    //ini_set("display_errors", 1); 

    //Connect to Database
    include('includes/dbconn.php');
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml">
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
   <title>Sign Up Form</title>
   <link rel="shortcut icon" href="favicon.ico" />

   <link href="eps.css" rel="stylesheet" type="text/css" />
   <div class="header2">
   </div>

   //VALIDATES FIELDS

     <script language="javascript">

     function validateForm()
     {

 var x=document.forms["form1"]["email"].value;
 var atpos=x.indexOf("@");
 var dotpos=x.lastIndexOf(".");
 if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
 {
    alert("Not a valid e-mail address");
    return false;
 } 
if (document.forms["form1"]["email"].value != document.forms["form1"]  ["email2"].value) {
    alert("Email addresses do not match");
    return false;
 }

    {
    var x=document.forms["form1"]["companyName"].value;
    if (x==null || x=="")
    {
    alert("Please enter your company name.");
    return false;
    }

    }
    }

    </script>

    </head>

    <body background="images/background.gif" repeat >
    <table width="1101" border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
    <td>
    <br/> <br/>

 <p align="center" class="SignUpText">Sign Up Form</p>
     <table width="600" border="0" align="center" cellpadding="0" cellspacing="0" class="TableBorder">
     <tr>
     <td>
     <form id="form1" name="form1" method="post" action="signup.php" onSubmit="return validateForm();">
    <input name="a" type="hidden" id="a" value="signup" />
    <input name="group" type="hidden" id="group" />

    <table width="100%" border="0" align="center" cellpadding="5" cellspacing="0" class="MainText">
    <tr>
    <td colspan="4" class="auto-style4" style="height: 40px"><strong>
<span class="auto-style5">Personal Information</span><br/>
    </tr>

     //COMPANY NAME

    <tr>
    <td width="25%">Company Name</td>
    <td style="width: 2%">*</td>
    <td width="25%"><label>

 <input name="companyName" type="text" class="auto-style3" id="companyName" size="35" /></label></td>

     <td style="width: 2%"><a href="#" class="hintanchor" onMouseover="showhint('Please enter your registered company name.', this, event, '150px')">?</a></td>

      //EMAIL

      <td>
  <input name="email" type="text" class="auto-style3" id="email" size="40" /></td>
      <tr>
      <td>Re-enter Email Address</td>
      <td style="width: 2%">*</td>
      <td>
  <input name="email2" type="text" class="auto-style3" id="email2" size="40" />    </td>

      //SUBMIT

      <tr>
      <td colspan="4"><div align="center">
      <input type="submit" name="Submit" value="Sign Up" />
      </div>
      </td>
      </tr>
      </table>
      </form>
      </td>
      </tr>
      </table>

Here is part of the class that adds new users, the email actually is added to contactEmail field , company is added to companyname within the database which I need to check if it doesn't already have the email and company name stored

function addmember($companyname,  $licencenumber,$companyNumber,$vatNumber,$address1,$address2,$address3,$town,$county,$postcode,$firstname,$surname,$email,$phone,$training,$norepairs,$logo,$repairtype,$repairgroup,$mode)
{

    $ref = "REP";
    $licencenumber = "TEST";

    $query = "INSERT INTO r_table VALUES ";
    $query.= "(NULL,";
    $query.= "\"$ref\",";
    $query.= "\"$companyname\",";
    $query.= "\"$licencenumber\",";
    $query.= "\"$companyNumber\",";
    $query.= "\"$vatNumber\",";
    $query.= "\"$address1\",";
    $query.= "\"$address2\",";
    $query.= "\"$address3\",";
    $query.= "\"$town\",";
    $query.= "\"$county\",";
    $query.= "\"$postcode\",";
    $query.= "\"$firstname\",";
    $query.= "\"$surname\",";
    $query.= "\"$email\",";
    $query.= "\"$phone\",";
    $query.= "\"$training\",";
    $query.= "\"$norepairs\",";
    $query.= "\"$logo\",";
    $query.= "\"$repairtype\",";
    $query.= "\"$repairgroup\",";
    $query.= "NOW(),";
    $query.= "NOW(),";
    $query.= "$mode)";

    $result = mysql_query($query);

    $insertid = mysql_insert_id();
    $ref = "REP".$insertid;
    $licencenumber = "test".$insertid;

    $query = "UPDATE r_table SET ref = \"$ref\", licenseNumber=\"$licencenumber\" WHERE id = ".$insertid;

    $result = mysql_query($query);

    echo mysql_error();

    if (!$result)
        echo mysql_error();
    else
        return $ref; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:26:45.500

您可以执行如下所示的一件事：

```
$query = "select * from `tablename` where `fieldname` = 'value'";
$result = mysql_query($query) or die(mysql_error());
$num_result = mysql_num_rows($result);
if($num_result > 0){
    //Value exist for field already
 } 
```

这里`mysql_num_rows`返回`number of rows of result of query`。所以使用这个你可以检查公司和电子邮件是否已经存在。

# objective-c - 为所有导航栏 (UINavigationBar) iOS 5.1+ 设置按钮和外观

> ID：14349094
> 
> 赞同：0
> 
> 时间：2013-01-15T23:49:05.233
> 
> 标签：objective-c, ios5, uinavigationcontroller, uinavigationbar, uibarbuttonitem

我试图设置一个按钮，以便它出现在每个具有导航栏的视图上。使用 AppDelegate 上的外观代理设置所有视图的外观不是问题

`[[UINavigationBar appearance] setTintColor:[UIColors grayColor]];`

我试图继承 UINavigationController，然后在情节提要上设置导航控制器。在`viewDidLoad`我尝试过的方法上：

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"right"
                                                                         style:UIBarButtonItemStyleBordered target:self action:nil]; 
```

但是按钮没有出现。

如果我这样做：

```
self.navigationBar.topItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"right"
                                                                         style:UIBarButtonItemStyleBordered target:self action:nil]; 
```

该按钮会显示，但在您进入下一个屏幕后会消失。

我正在尝试这样做，所以我不必在`viewDidLoad`每个视图控制器的所有方法上设置左右按钮。是否可以使用 UINavigationController 的子类来设置导航栏的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:18:48.233

Apple 告诉我们不要继承 UINavigationController：

> 此类不用于子类化。相反，在您希望应用程序的用户界面反映内容的分层性质的情况下，您可以按原样使用它的实例。

这来自文档的 XCode 版本。在线版本[放宽了一点](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/cl/UINavigationController)，将建议替换为：

> 此类通常按原样使用，但在 iOS 6 及更高版本中可能是子类。

如何使用修改后的 viewDidLoad 创建 UIViewController 的自定义子类并将所有自定义 VC 建立在此基础上？

# javascript - 如果它已经具有按钮 onclick 的功能，如何在按钮单击时添加事件监听器

> ID：14349096
> 
> 赞同：0
> 
> 时间：2013-01-15T23:49:11.323
> 
> 标签：javascript

```
<div class="add-gift-message">
  <input type="checkbox" id="allow_gift_options" value="1">
  <label>Add Gift Message</label>
</div>
<div class="buttons-set form-buttons btn-only" id="billing-buttons-container">
  <input type="button" class="button" onclick="AddEventHandler();"><span>Continue</span>
</div> 
```

谁能告诉我如何在按钮的 onclick 上添加侦听器，但它已经在按钮 onclick 上具有功能以及如何检查按钮 onclick 功能上的复选框我在这里提供 jsfiddel 请提前帮助我感谢回复 [http:// jsfiddle.net/jWUB4/15/](http://jsfiddle.net/jWUB4/15/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:54:31.447

我会试一试：

```
var button = document.getElementsByTagName('button')[0];

button.onclick = function(e) {
    fireFirst(e);
    fireSecond(e);
    etc....
}

// first function to fire when button is clicked...
function fireFirst(e)
{
    // code goes here
}

// second function to fire when button is clicked...
function fireSecond(e)
{
    // code goes here
} 
```

基本上，您有一个包装函数，其中包含单击按钮时要触发的所有其他函数。

# php - PHP - 回声“数组”错误

> ID：14349100
> 
> 赞同：1
> 
> 时间：2013-01-15T23:49:38.617
> 
> 标签：php, arrays

很抱歉含糊不清，但我有一个 PHP 脚本，它从数据库中提取数据并显示它，但是它不是输出数据库的内容，而是输出它们是结果的次数的“数组”。

（无法再次工作，脚本[在这里](http://pastebin.com/g6bZfjk3)上传），脚本的输出也在[这里](http://jackcarlin.com/dayz/backend/qTop.php)。）谢谢 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:50:43.763

使用`print_r($array);`或`var_dump($array);`查看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T23:50:32.007

你试过了吗`printr`？`var_dump`

您需要将数组中的列或值指定为`echo`.

```
echo $rows[unique_id]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T23:52:50.943

`$row`是一个数组，其中包含所有记录字段。采用

```
echo $rows['unique_id']; 
```

反而。

并且[不要使用mysql扩展](http://php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T23:51:42.723

顾名思义，`mysql_fetch_array()`返回一个数组。你可能想要：

```
 echo $rows['unique_id']; 
```

# java - 为什么可以将 JFrame 类型转换为 JPanel？

> ID：14349101
> 
> 赞同：3
> 
> 时间：2013-01-15T23:49:42.550
> 
> 标签：java, inheritance, interface, casting, polymorphism

这是一个例子：

```
// set up frame, panel
JFrame container = new JFrame("Game Example");
panel = (JPanel)container.getContentPane(); 
```

我检查了Java API，两个类都实现了相同的接口，那么多态是为什么？

还是因为这两个类都是通过继承从 Component 类继承而来的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T23:51:10.943

就是 contentPane 通常***是***一个 JPanel。打印出对象的类名，自己看看。

```
System.out.println(container.getContentPane().getClass().getName()); 
```

请注意，您实际上***并不是***“将 JFrame 类型转换为 JPanel”。JFrame 的 contentPane 不是 JFrame 本身，几乎不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T23:52:27.393

语法隐含的优先级是：

```
panel = (JPanel)(container.getContentPane()); 
```

不是

```
panel = ((JPanel)container).getContentPane(); 
```

`Component`显然，除了扩展两者之外，还要注意extend `Object`。

# git - 使用 github 从另一个 repo 继承测试

> ID：14349110
> 
> 赞同：0
> 
> 时间：2013-01-15T23:50:23.283
> 
> 标签：git, github

我正在为骨干编写一个插件，并希望它始终通过最新版本的骨干测试（加上我自己的一些测试）。如何使用 git/github 在我的测试运行程序中始终引用最新的主干测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:21:46.790

您应该将主干存储库添加为项目的[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)。

# asp.net - 在 facebook 中以编程方式为 url 发表评论

> ID：14349116
> 
> 赞同：0
> 
> 时间：2013-01-15T23:50:57.123
> 
> 标签：asp.net, facebook, api, facebook-graph-api, oauth

有没有办法在 facebook 中以编程方式对给定的 url 发表评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:03:13.673

我不确定您是否可以通过简单地在 url 中传递一个变量来做到这一点，但您可能有兴趣从他们的[开发人员部分](http://developers.facebook.com/docs/reference/plugins/comments/)了解更多信息。对于[open graph](http://ogp.me/)，我在 Facebook 开发者网站上看到您只能实现 LIKES 而不能实现评论。

# regex - Grep 仅匹配多个分隔字符串

> ID：14349125
> 
> 赞同：0
> 
> 时间：2013-01-15T23:51:36.840
> 
> 标签：regex, string, grep

我有一个包含这种格式的行的文件：

```
fieldA=value1, fieldB=value2, fieldC=value3, fieldD=value4, fieldE=value5 
```

我对 fieldA、fieldB、fieldD 感兴趣。但是， fieldC 可能存在也可能不存在，因此我不能使用类似的东西：

```
grep "field" * | awk -F"," '{print $1, $2, $4}' 
```

我的最终目标是在一行中得到这样的输出：

```
fieldA=value1, fieldB=value2, fieldD=value4 
```

我尝试使用`grep -E`，但它以不同的行输出这些字段，并且字段之间的关联中断。

```
grep -o -E "field1_=\w*|field2_=\w*|field3_=\w*" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:20:56.423

如果您知道 A、B、D grep 和 xargs 的字段名称，就可以完成这项工作。（ awk/sed 肯定可以做到）

```
grep -Po "fieldA=[^,]*|fieldB=[^,]*|fieldD=[^,]*" file|xargs -n3 
```

这给了你：

```
fieldA=value1 fieldB=value2 fieldD=value4 
```

如果你想在输出中使用逗号：

```
grep -Po "fieldA=[^,]*,|fieldB=[^,]*,|fieldD=[^,]*" file|xargs -n3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:07:43.740

`sed`解决方案可以接受吗？

```
sed 's/^\([^ ]* [^ ]*\).*\(fieldD=[^,]*\).*/\1 \2/' filename 
```

# javascript - jQuery：鼠标悬停使图像可见，其 id 中的最后 4 个数字与触发器相同

> ID：14349129
> 
> 赞同：0
> 
> 时间：2013-01-15T23:51:58.077
> 
> 标签：javascript, jquery

我目前在一个网站上工作并遇到以下问题：

在网站上，我有 ID 为“dot0001”、“dot0002”、“dot0003”等的小点（图像）。我还有隐藏图像（可见性：隐藏），ID 为“info0001”、“info00002”、“info0003”等。

我正在寻找一个 jQuery 解决方案。我需要的是允许以下事件的代码：

当用户将鼠标移到“dot0001”上时，图像“info0001”变得可见，当他们离开“dot0001”时，“info0001”又变得不可见。同样适用于 "dot0002"-"info0002" 、 "dot0003"-"info0003" 等。因此只有具有相应 4 位数字的信息图像可见。

我给了它无数次尝试，但一无所获，甚至没有粘贴我的代码的意义。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:57:01.853

像这样的东西应该可以工作（尽管未经测试）：

```
$('[id^="dot"]').on({
    mouseenter: function(e) {
        var infoId = this.id.replace('dot', 'info');
        $('#' + infoId).show();
    },
    mouseleave: function(e) {
        var infoId = this.id.replace('dot', 'info');
        $('#' + infoId).hide();
    }
}); 
```

它使用[`attribute-starts-with`](http://api.jquery.com/attribute-starts-with-selector/)选择器选择所有`id`以“点”开头的元素，然后将事件处理程序绑定到它们。事件处理函数本身只需用“info”替换“点”部分`id`以形成正确的新元素，然后根据需要显示或隐藏元素。

不要忘记将该代码包装在[`DOM ready`](http://api.jquery.com/ready/)事件处理程序中，以便在元素实际存在时执行，否则它将无法工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:00:54.047

获取 id 以“点”开头的所有元素，并在鼠标悬停/移出时显示/隐藏相关的“信息”：

```
$("[id^=dot]").hover(
  function(){
    $("#info" + this.id.substring(3)).css({"visibility":"visible"});
  },
  function(){
    $("#info" + this.id.substring(3)).css({"visibility":"hidden"});
  }
); 
```

[http://jsfiddle.net/EGBnR/](http://jsfiddle.net/EGBnR/)

# ruby-on-rails - Rails 3 Flash 通知样式

> ID：14349131
> 
> 赞同：2
> 
> 时间：2013-01-15T23:52:12.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-on-rails-3.2

我使用 twitter bootstrap 来设计我的应用程序。

这是我用于定义 Flash 信息的控制器操作：

```
def generate_rating_set
  redirect_to "/", :flash => { :notice => "New Set Successfully Created." }
end 
```

在我看来

```
<div class="alert alert-success"><%= flash[:notice] %></div> 
```

和我的 CSS

```
.alert {
   font-weight: bold;
   -moz-border-radius: 4px 4px 4px 4px;
   -webkit-border-radius: 4px 4px 4px 4px;
   border-radius: 4px 4px 4px 4px;
   margin-bottom: 18px;
   padding: 12px 25px 12px 24px;
   -moz-box-shadow: 3px 3px 1px 1px #CCCCCC;
   -webkit-box-shadow: 3px 3px 1px 1px #CCCCCC;
   box-shadow: 3px 3px 1px 1px #CCCCCC;
}
.alert-success {
   background-color: #66E167;
   border-color: #D6E9C6;
   width: 280px;
   color: black;
   padding-top: 20px;
} 
```

Flash 消息按预期显示，但始终显示 css 样式。如何隐藏样式以仅在显示 Flash 消息时显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T23:54:12.530

```
<% if flash[:notice] -%>
  <div class = "alert alert-success"><%= flash[:notice] %></div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T23:56:32.027

这是我用来显示我的 Flash 消息的助手：

```
def show_flash(options = {})
    output = ActiveSupport::SafeBuffer.new

    [:alert, :notice].each do |message|
        output << content_tag(:p, class: [message, options[:class]], tabindex: '0') do
            flash[message]
        end if flash[message].present?

        flash[message] = nil
     end

     output
end 
```

关键是，如果没有，您不想显示 Flash 消息的容器。

# php - 从 Jquery 调用 PHP var

> ID：14349134
> 
> 赞同：0
> 
> 时间：2013-01-15T23:52:28.393
> 
> 标签：php, jquery, html

我在 PHP 中有一个变量叫做`$total = $db['total'];`

现在我想在 Jquery 中获取它，所以我这样做了

```
<script>
$(function() {               
  console.log("<?php echo $total; ?>");

});

</script> 
```

但我得到一些废话，比如`console.log("<div style="border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;">`throws error uncaught syntaxError: Unexpected identifier。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:06:55.547

代替

```
console.log("<?php echo $total; ?>"); 
```

利用

```
console.log(<?php echo json_encode($total); ?>); 
```

因为在`$total`交给 JavaScript 之前需要对 的值进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:08:33.797

您`most likely`的 php 语法有错误！我很确定，但是嘿，你的变量中实际上有那个字符串的可能性很小，所以我选择了最有可能的安全路径。

对字符串的简单谷歌搜索：

> `<div style="border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;">`

给你一吨有错误的网站，所以我猜这就是你的问题。除此之外，但我想你已经知道这一点，你必须小心你回显的 php 字符串不是`break`JS 字符串。

那么如何解决这个问题呢？好吧，我的第一个猜测是该变量`$total`实际上并不存在，所以先检查一下。这当然只是猜测，因为我还没有看到你的 php 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:15:51.193

有点杂乱无章，至少不优雅，但上次我遇到这样的问题时我很困惑，我最终用 php 将值写入隐藏元素，然后在 jquery 中读取它们。

不漂亮，但它奏效了。我实际上不得不处理一个数组，所以把整个东西都扔到了一张桌子上。

# assembly - distorm64 将 bx 与 ebx 混淆

> ID：14349135
> 
> 赞同：0
> 
> 时间：2013-01-15T23:52:32.237
> 
> 标签：assembly, x86, x86-64, nasm

我有以下代码用distorm64解码字节0x66 0x5b 0xc3（pop ebx / ret）（代码取自[这个](http://code.google.com/p/distorm/source/browse/trunk/examples/win32/main.cpp)例子）

```
 // Holds the result of the decoding.
    _DecodeResult res;
    // Decoded instruction information.
    _DecodedInst decodedInstructions[MAX_INSTRUCTIONS];
    // next is used for instruction's offset synchronization.
    // decodedInstructionsCount holds the count of filled instructions' array by the decoder.
    unsigned int decodedInstructionsCount = 0, i, next;

    // Default decoding mode is 32 bits, could be set by command line.
    _DecodeType dt;
    if(!x64)
        dt = Decode32Bits;
    else
        dt = Decode64Bits;

    // Default offset for buffer is 0, could be set in command line.
    _OffsetType offset = 0;
    char* errch = NULL;
    char tempBuf[500];

    // Decode the buffer at given offset (virtual address).
    while (1) 
    {
        // If you get an unresolved external symbol linker error for the following line,
        // change the SUPPORT_64BIT_OFFSET in distorm.h.
        res = distorm_decode(offset, (const unsigned char*)byteCodeBuffer, byteCodeBufferSize, dt, decodedInstructions, MAX_INSTRUCTIONS, &decodedInstructionsCount);
        if (res == DECRES_INPUTERR) 
        {
            // Null buffer? Decode type not 16/32/64?
            printf("Input error, halting!");
            return EXIT_FAILURE;
        }

        for (i = 0; i < decodedInstructionsCount; i++) 
        {
#ifdef SUPPORT_64BIT_OFFSET
            sprintf_s(tempBuf, 500, "%0*I64x (%02d) %-24s %s%s%s\n", dt != Decode64Bits ? 8 : 16, decodedInstructions[i].offset, decodedInstructions[i].size, (char*)decodedInstructions[i].instructionHex.p, (char*)decodedInstructions[i].mnemonic.p, decodedInstructions[i].operands.length != 0 ? " " : "", (char*)decodedInstructions[i].operands.p);
            outputText.append(tempBuf);
#else
            printf("%08x (%02d) %-24s %s%s%s\n", decodedInstructions[i].offset, decodedInstructions[i].size, (char*)decodedInstructions[i].instructionHex.p, (char*)decodedInstructions[i].mnemonic.p, decodedInstructions[i].operands.length != 0 ? " " : "", (char*)decodedInstructions[i].operands.p);
#endif
        }

        if (res == DECRES_SUCCESS) break; // All instructions were decoded.
        else if (decodedInstructionsCount == 0) break;

        // Synchronize:
        next = (unsigned long)(decodedInstructions[decodedInstructionsCount-1].offset - offset);
        next += decodedInstructions[decodedInstructionsCount-1].size;
        // Advance ptr and recalc offset.
        byteCodeBuffer += next;
        byteCodeBufferSize -= next;
        offset += next;
    }
    return EXIT_SUCCESS; 
```

结果是

```
00000000 (02) 665b                     POP BX
00000002 (01) c3                       RET 
```

这是错误的，因为寄存器不是 BX 而是 EBX。

如果我尝试编译（使用 nasm）“pop bx / ret”序列，我得到 0x5b 0xc3 并且 distorm 将其转换为

```
00000000 (01) 5b                       POP EBX
00000001 (01) c3                       RET 
```

这同样是错误的（不是 EBX，但应该返回 BX！）

我哪里错了？这是一个distorm64错误还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:05:50.290

当处理器处于 32 位模式时，66 5b 是 POP BX（并且在 64 位模式下操作码无效，因为在 64 位模式下只能推送和弹出“整个”64 位寄存器）。如果您使用 32 位反汇编程序反汇编 16 位代码，那么您可能会得到错误的结果。

请注意，66 前缀“切换”一条指令的 32/16 位标志，因此如果您有 32 位代码，66 会将下一条指令转换为 16 位指令，如果您有 16 位代码，它将其转换为 32 位指令。

所以我只能假设对于您的代码处于什么模式存在一些混淆 - 并且反汇编程序正在将 16 位代码解释为 32 位代码，或者类似 thiat。

# macos - sudo nginx -t 密码问题

> ID：14349138
> 
> 赞同：1
> 
> 时间：2013-01-15T23:52:46.637
> 
> 标签：macos, nginx, terminal, sudo

我安装了 nginx，当我运行以下命令时...

```
sudo nginx -t 
```

我得到以下

```
Password:
Sorry, try again.
Password:
sudo: nginx: command not found 
```

我不记得曾经设置过密码并浏览过我会使用的密码。有没有办法找出要使用或重置的密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:46:26.893

`sudo`使用您的登录密码。在上面的代码片段中，您第二次做对了。

该错误`sudo: nginx: command not found`表明 nginx 要么未安装，要么未安装在您认为的位置。

# ruby-on-rails - 如何根据 DB 中的用户定义数据为状态机创建动态定义

> ID：14349141
> 
> 赞同：2
> 
> 时间：2013-01-15T23:53:07.797
> 
> 标签：ruby-on-rails, state-machine, state-machine-workflow

我正在尝试编写一个应用程序，允许用户使用[状态机 gem](https://github.com/pluginaweek/state_machine)管理工作流，但我不确定如何继续允许用户使用状态机 gem 为 ruby​​ 定义自己的状态机。

在 gem 文档的[动态定义](https://github.com/pluginaweek/state_machine#static--dynamic-definitions)部分中，它说我应该能够通过用数据源替换下面这样的代码来做到这一点。

```
 def transitions
    [
      {:parked => :idling, :on => :ignite},
      {:idling => :first_gear, :first_gear => :second_gear, :on => :shift_up}
      # ...
    ]
  end 
```

我不知道该怎么做。如何定义数据库中的转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T01:02:25.673

因为`transitions`它只是一种方法，你可以以任何你想要的方式实现它。这是一种可能的方法。

我假设您正在使用 ActiveRecord。

定义一个转换模型和一个关联的转换表，其中包含所有字符串的 to、from 和 on 列。然后您可以开始定义转换，例如：

```
Transition.create(:from => "parked", :to => "idling", :on => "ignite") 
```

然后在您的转换方法中：

```
def transitions
  transitions_data = []
  Transition.all.each do |transition|
    transitions_data << { transition.from.to_sym => transition.to.to_sym, :on => transition.on.to_sym }  
  end
  transitions_data
end 
```

然后，您可以使用链接的文档中的其他代码来动态创建状态机。

这只是一个例子，可以进一步优化。我会把那部分留给你。希望这会给你一个好的开始。

# encryption - 卡在 MD5 上，有没有办法让它更安全？

> ID：14349142
> 
> 赞同：1
> 
> 时间：2013-01-15T23:53:08.120
> 
> 标签：encryption, passwords, md5

我现在工作的网站使用第三方计费公司来处理用户注册，因此所有用户名和密码都输入到计费者的站点中，然后计费者将用户名和用户现在加密的密码写入一个我们服务器上的“成员”数据库。

问题是计费者（以及我收集的许多人）使用我一遍又一遍地阅读的 MD5 加密密码是不安全的。但是，由于加密是在账单端处理的，而且他们只提供 MD5，我想知道我是否可以做些什么来使密码更安全？

在我写这篇文章的时候，我在想，“如果记账员正在加密密码，我可能无法增加更多的安全性”，因为记账员的部分工作是处理会员问题，例如丢失密码和其他问题。

那么......有没有办法为计费者存储在我们数据库中的密码增加更多安全性，还是我们只是利用我们都知道的不安全标准来冒险？我们在短期内被这个计费器困住了，更糟糕的是，我联系了另一个非常有名的计费器，他们也使用 MD5。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:03:57.137

Md5 在技术上是一种哈希算法，而不是加密算法。不同之处在于您不能取消散列哈希字符串（理论上，md5 很弱，因为这被证明是错误的）。如果您有适当的密钥，您可以撤消加密。

你最大的担忧是什么？您是否担心有人在您和计费者之间传输密码时截获密码，或者您是否担心有人打开数据库？

如果您担心有人闯入您的数据库并使用密码获取您的表，那么您绝对可以提高安全性。您可以使用现代算法和您自己的私钥对条目进行加密，然后再将它们持久化。在使用 md5 值之前，在拉出数据库时不要将密钥存储在服务器上并取消加密。

您也可以使用一些现代强哈希算法对他们给您的 md5 值（并使用盐）进行哈希处理。这意味着如果有人拿到你的表，他们将不得不取消哈希你的哈希，然后取消哈希 md5。大概您会使用强哈希，而第一步是不可能的。与往常一样，请注意安全性，因为您肯定应该自己编写一些东西，否则您会遇到错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:13:48.553

不幸的是，在这个阶段，您对计费器无能为力。很难知道您正在尝试缓解哪些威胁。如果您担心计费器和您的机器之间的通信被监控，那么 SSL 或 SSH 应该会有所帮助。如果您担心攻击者会侵入您的数据库并窃取密码，那么使用不同的方案来存储密码会有所帮助。

您可以坚持使用 MD5 并添加盐。请检查您的账单是否正在对他们的密码进行盐渍化，如果不是，您真的需要摆脱它们。他们的数据库将容易受到[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)查找的影响。

> 彩虹表是用于反转加密哈希函数的预计算表，通常用于破解密码哈希

您可以使用收到的 MD5 并使用更好的密码哈希算法（假设您不需要保留原始 MD5）。一个例子是[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)。请注意，SHA1、SHA-256 等虽然更好的散列算法在密码散列方面并不出色。原因是 SHA 设计得很快。您希望密码散列相对较慢。对于合法用户来说，等待 20 毫秒来验证正确的密码根本不是时间，但对于攻击者来说，这会*大大*降低他们暴力破解密码的能力。

> bcrypt 是 Niels Provos 和 David Mazières 基于 Blowfish 密码设计的密码密钥派生函数，并于 1999 年在 USENIX 上提出。 [1] 除了加入盐来防止彩虹表攻击之外，bcrypt 还是一个自适应函数：随着时间的推移，可以增加迭代次数以使其变慢，因此即使在计算能力增加的情况下，它仍然可以抵抗暴力搜索攻击。

本质上，bcrypt 有一个很好的散列算法，需要一个盐，并让您指定散列算法在其上运行的次数。例如，您可以从 100 轮开始。在计算能力增加的两年内，您可以将其增加到 150。

# java - 为什么HashMap值多次执行后返回null和string值？

> ID：14349146
> 
> 赞同：0
> 
> 时间：2013-01-15T23:53:21.860
> 
> 标签：java, hashmap

这是我的代码：

```
package AbstractClassesTwo;

class X {
    private int n;

    public X(int n){
        this.n = n;
    }

    public String toString(){
        return "[" + n + " ]";
    }

    public boolean equals (Object obj){
        boolean b = false;
        if(obj instanceof X){
            X x = (X)obj;
            b = this.n == x.n;
        }

        return b;
    }

    public int hashCode(){
        return n;
    }

} 
```

和驱动程序类：

```
package AbstractClassesTwo;

import java.util.HashMap;

public class UseX {

    public static void main (String[] args){

        X x1 = new X(1);
        X x2 = new X(2);

        String s1 = "1 ett one";
        String s2 = "2 två two";

        HashMap<X, String> t = new HashMap<X, String>();
        t.put(x1, s1);
        t.put(x1, s2);

        int i = (int) (2 * Math.random() + 1);
        X n = new X(i);
        String s = (String)t.get(n);

        System.out.println(n + ": " + s);

    }
} 
```

`" 2 två two"`值 s在多次执行时返回 null 值和字符串 values( )？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T23:55:41.073

```
t.put(x1, s1);
t.put(x1, s2);
      ^^ 
```

不应该是这样`x2`吗？每当你寻找一个`new X(2)`，你就会得到`null`。

# algorithm - 查找元素之间距离最大的对象子数组

> ID：14349147
> 
> 赞同：2
> 
> 时间：2013-01-15T23:53:26.690
> 
> 标签：algorithm, math

设一个对象数组 [a, b, c, d, ...] 和一个函数 distance(x, y)，它给出一个数值，显示对象 x 和 y 的“不同”程度。

我正在寻找一种算法来找到长度为 n 的数组的子集，以最大化该子集元素之间的最小差异。

当然，我不能简单地按照与其他元素的最小差异对数组进行排序并取 n 最高的条目，因为删除一个元素可以很好地改变距离。例如，如果 a=b，则删除 a 意味着 b 与另一个元素的最小距离将发生巨大变化。

到目前为止，我能找到的唯一解决方案是迭代地删除最小距离最小的元素，并在每次迭代时重新计算距离，直到只剩下 n 个元素，或者反之亦然，迭代地挑选新元素，重新计算距离，添加新的选择或根据距离最小值替换现有的选择。

有谁知道没有这些迭代我怎么能得到相同的结果？

PS：这是一个例子，矩阵显示了每个元素之间的“距离”......

```
   A B C D
一 - 1 3 2
b 1 - 4 2
c 3 4 - 5
d 2 2 5 -

```

如果我们只保留 2 个元素，那就是 c 和 d；如果我们保留 3，那将是 a 或 b、c 和 d。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:41:44.317

这个问题是[NP-hard](http://en.wikipedia.org/wiki/NP-hard)，所以没有人知道解决它的有效（多项式时间）算法。

这是一个简单的草图，它是 NP-hard，通过从[CLIQUE](http://en.wikipedia.org/wiki/Clique_problem)减少。

假设我们有一个图 G 和数字*n*形式的 CLIQUE 实例，并且我们想知道 G 中是否存在大小为*n*的团。构造一个距离矩阵*d*使得*d* ( *i* , *j* ) = 1 如果顶点*i*和*j*在 G 中连接，否则为 0。*然后找到一个大小为n*的 G 顶点的子集，它使元素之间的最小距离（你的问题）最大化。如果该子集中顶点之间的最小距离为 1，则 G 有一个大小为*n*的团；否则它不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:52:17.607

正如 Gareth 所说，这是一个 NP-hard 问题，但是已经有很多研究来解决这类问题，因此已经找到了比蛮力更好的方法。不幸的是，这是一个很大的领域，您可能会永远花时间研究解决方案的可能实现。

但是，如果您对解决此问题的启发式方法感兴趣，我建议您研究 Ant Colony Optimization ( [ACO](http://en.wikipedia.org/wiki/Ant_colony_optimization_algorithms) )，它已被证明在寻找图中的最佳路径方面相当有效。

# python - Matlpotlib 的情节非常缓慢

> ID：14349148
> 
> 赞同：4
> 
> 时间：2013-01-15T23:53:30.883
> 
> 标签：python, matplotlib

任何人都可以帮助如何优化python中的**绘图功能吗？**我使用**Matplotlib**绘制财务数据。这里是绘制 OHLC 数据的小函数。如果我添加指标或其他数据，时间会显着增加。

```
import numpy as np
import datetime
from matplotlib.collections import LineCollection
from pylab import *
import urllib2

def test_plot(OHLCV):

    bar_width = 1.3
    date_offset = 0.5
    fig = figure(figsize=(50, 20), facecolor='w')
    ax = fig.add_subplot(1, 1, 1)
    labels = ax.get_xmajorticklabels()
    setp(labels, rotation=0)

    month = MonthLocator()
    day   = DayLocator()
    timeFmt = DateFormatter('%Y-%m-%d')

    colormap = OHLCV[:,1] < OHLCV[:,4]
    color = np.zeros(colormap.__len__(), dtype = np.dtype('|S5'))
    color[:] = 'red'
    color[np.where(colormap)] = 'green'
    dates = date2num( OHLCV[:,0])

    lines_hl = LineCollection( zip(zip(dates, OHLCV[:,2]), zip(dates, OHLCV[:,3])))
    lines_hl.set_color(color)
    lines_hl.set_linewidth(bar_width)
    lines_op = LineCollection( zip(zip((np.array(dates) - date_offset).tolist(), OHLCV[:,1]), zip((np.array(dates)).tolist(), parsed_table[:,1])))
    lines_op.set_color(color)
    lines_op.set_linewidth(bar_width)
    lines_cl = LineCollection( zip(zip((np.array(dates) + date_offset).tolist(), OHLCV[:,4]), zip((np.array(dates)).tolist(), parsed_table[:,4])))
    lines_cl.set_color(color)
    lines_cl.set_linewidth(bar_width)
    ax.add_collection(lines_hl,  autolim=True)
    ax.add_collection(lines_cl,  autolim=True)
    ax.add_collection(lines_op,  autolim=True)

    ax.xaxis.set_major_locator(month)
    ax.xaxis.set_major_formatter(timeFmt)
    ax.xaxis.set_minor_locator(day)

    ax.autoscale_view()

    ax.xaxis.grid(True, 'major')
    ax.grid(True)

    ax.set_title('EOD test plot')
    ax.set_xlabel('Date')
    ax.set_ylabel('Price , $')
    fig.savefig('test.png', dpi = 50, bbox_inches='tight')
    close()

if __name__=='__main__':

    data_table = urllib2.urlopen(r"http://ichart.finance.yahoo.com/table.csv?s=IBM&a=00&b=1&c=2012&d=00&e=15&f=2013&g=d&ignore=.csv").readlines()[1:][::-1]
    parsed_table = []
    #Format:  Date, Open, High, Low, Close, Volume
    dtype = (lambda x: datetime.datetime.strptime(x, '%Y-%m-%d').date(),float, float, float, float, int)

    for row in data_table:

        field = row.strip().split(',')[:-1]
        data_tmp = [i(j) for i,j in zip(dtype, field)]
        parsed_table.append(data_tmp)

    parsed_table = np.array(parsed_table)

    import time
    bf = time.time()
    count = 100
    for i in xrange(count):
        test_plot(parsed_table)
    print('Plot time: %s' %(time.time() - bf) / count) 
```

结果是这样的**。**每个图的平均执行时间约为 2.6 秒。**R**中的图表 要快得多，但我没有测量性能，我不想使用**Rpy**，所以我相信我的代码效率低下。 ![在此处输入图像描述](../Images/22f433edaa34e7deafb891075b4c9877.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T01:53:07.617

此解决方案重用`Figure`实例并异步保存绘图。您可以将其更改为具有与处理器一样多的图形，异步执行许多绘图，并且它应该会加快速度。实际上，这需要大约 1 秒的时间，低于我机器上的 2.6 秒。

```
import numpy as np
import datetime
import urllib2
import time
import multiprocessing as mp
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
from pylab import *
from matplotlib.collections import LineCollection

class AsyncPlotter():
    def __init__(self, processes=mp.cpu_count()):
        self.manager = mp.Manager()
        self.nc = self.manager.Value('i', 0)
        self.pids = []
        self.processes = processes

    def async_plotter(self, nc, fig, filename, processes):
        while nc.value >= processes:
            time.sleep(0.1)
        nc.value += 1
        print "Plotting " + filename
        fig.savefig(filename)
        plt.close(fig)
        nc.value -= 1

    def save(self, fig, filename):
        p = mp.Process(target=self.async_plotter,
                       args=(self.nc, fig, filename, self.processes))
        p.start()
        self.pids.append(p)

    def join(self):
        for p in self.pids:
            p.join()

class FinanceChart():
    def __init__(self, async_plotter):
        self.async_plotter = async_plotter
        self.bar_width = 1.3
        self.date_offset = 0.5
        self.fig = plt.figure(figsize=(50, 20), facecolor='w')
        self.ax = self.fig.add_subplot(1, 1, 1)
        self.labels = self.ax.get_xmajorticklabels()
        setp(self.labels, rotation=0)
        line_hl = LineCollection(([[(734881,1), (734882,5), (734883,9), (734889,5)]]))
        line_op = LineCollection(([[(734881,1), (734882,5), (734883,9), (734889,5)]]))
        line_cl = LineCollection(([[(734881,1), (734882,5), (734883,9), (734889,5)]]))

        self.lines_hl = self.ax.add_collection(line_hl,  autolim=True)
        self.lines_op = self.ax.add_collection(line_cl,  autolim=True)
        self.lines_cl = self.ax.add_collection(line_op,  autolim=True)

        self.ax.set_title('EOD test plot')
        self.ax.set_xlabel('Date')
        self.ax.set_ylabel('Price , $')

        month = MonthLocator()
        day   = DayLocator()
        timeFmt = DateFormatter('%Y-%m-%d')
        self.ax.xaxis.set_major_locator(month)
        self.ax.xaxis.set_major_formatter(timeFmt)
        self.ax.xaxis.set_minor_locator(day)

    def test_plot(self, OHLCV, i):
        colormap = OHLCV[:,1] < OHLCV[:,4]
        color = np.zeros(colormap.__len__(), dtype = np.dtype('|S5'))
        color[:] = 'red'
        color[np.where(colormap)] = 'green'
        dates = date2num( OHLCV[:,0])
        date_array = np.array(dates)
        xmin = min(dates)
        xmax = max(dates)
        ymin = min(OHLCV[:,1])
        ymax = max(OHLCV[:,1])

        self.lines_hl.set_segments( zip(zip(dates, OHLCV[:,2]), zip(dates, OHLCV[:,3])))
        self.lines_hl.set_color(color)
        self.lines_hl.set_linewidth(self.bar_width)
        self.lines_op.set_segments( zip(zip((date_array - self.date_offset).tolist(), OHLCV[:,1]), zip(date_array.tolist(), OHLCV[:,1])))
        self.lines_op.set_color(color)
        self.lines_op.set_linewidth(self.bar_width)
        self.lines_cl.set_segments( zip(zip((date_array + self.date_offset).tolist(), OHLCV[:,4]), zip(date_array.tolist(), OHLCV[:,4])))
        self.lines_cl.set_color(color)
        self.lines_cl.set_linewidth(self.bar_width)

        self.ax.set_xlim(xmin,xmax)
        self.ax.set_ylim(ymin,ymax)

        self.ax.xaxis.grid(True, 'major')
        self.ax.grid(True)
        self.async_plotter.save(self.fig, '%04i.png'%i)

if __name__=='__main__':
    print "Starting"
    data_table = urllib2.urlopen(r"http://ichart.finance.yahoo.com/table.csv?s=IBM&a=00&b=1&c=2012&d=00&e=15&f=2013&g=d&ignore=.csv").readlines()[1:][::-1]
    parsed_table = []
    #Format:  Date, Open, High, Low, Close, Volume
    dtype = (lambda x: datetime.datetime.strptime(x, '%Y-%m-%d').date(),float, float, float, float, int)

    for row in data_table:
        field = row.strip().split(',')[:-1]
        data_tmp = [i(j) for i,j in zip(dtype, field)]
        parsed_table.append(data_tmp)

    parsed_table = np.array(parsed_table)
    import time
    bf = time.time()
    count = 10

    a = AsyncPlotter()
    _chart = FinanceChart(a)

    print "Done with startup tasks"
    for i in xrange(count):
        _chart.test_plot(parsed_table, i)

a.join()
print('Plot time: %.2f' %(float(time.time() - bf) / float(count))) 
```

# javascript - 试图显示 facebook 用户的未知 id 的照片？

> ID：14349151
> 
> 赞同：0
> 
> 时间：2013-01-15T23:53:42.977
> 
> 标签：javascript, jquery, facebook, facebook-graph-api

嗨 是否可以显示用户的照片。例如，来自 ( [https://developers.facebook.com/docs/reference/api/using-pictures/](https://developers.facebook.com/docs/reference/api/using-pictures/) )

使用graph api，可以显示照片

```
<img src="https://graph.facebook.com/mike.shaver/picture"/> 
```

有什么办法可以说，

```
<img src="https://graph.facebook.com/VISITOR/picture"/> 
```

我不确定这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:03:15.327

不，你不能这样做。FBML 曾经是可能的，但该方法已被弃用并且不再起作用。

您必须有权访问用户 ID 才能显示此数据。为了让用户 id 显示他的基本信息（例如个人资料图片），您必须向用户请求[基本权限](https://developers.facebook.com/docs/reference/api/permissions/)。

# php - 将图像浮动到 2 列中，而无需在 html 中明确定义列

> ID：14349152
> 
> 赞同：0
> 
> 时间：2013-01-15T23:53:44.790
> 
> 标签：php, css

我有一个 php 脚本，它查询数据库中的图像，然后使用 foreach 循环将图像输出到屏幕上。所有图像的宽度相同，但高度不同。我想在 2 列中显示这些图像。foreach 循环意味着我无法在 html 中明确定义两列并将图像放入列中。正如我现在在网站上所拥有的那样，每个图像都向左浮动，但这会在不同高度的图像之间产生尴尬的垂直空间。

不确定我是否解释得很好，[所以这里有一个 jsfiddle，它显示了我现在拥有的东西以及我希望它看起来像什么。](http://jsfiddle.net/R8jBb/)在这里，我对每个项目进行了编码，使其看起来正确，但是当它上线时，我不会知道每个图像的高度或能够更改它。

如果有办法将两列直接放在 html 中，它需要像这样输出图像，这对于列中的循环来说是违反直觉的：

1 2

3 4

不是

1 3

2 4

理想情况下，我不需要使用一些奇怪的 php 或 javascript 解决方法，而是能够只编辑图像框的 css

```
.img_box {
  float: left;
  width: $img-width;
  max-height: 600px;
  padding: 0px 0px 0px 20px;
  margin-top: 20px;
}
.rate_img {
  width:$img-width;
} 
```

从数据库中提取图像信息后的php

```
foreach ($result as $row) {
    echo '
     <div class="img_box">
        <a href="' . $row['file_loc'] . '"rel="lightbox[main]" title="' . $row['name'] . '" >
            <img src="' . $row['file_loc'] . '" class="rate_img" />
        </a>
     </div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:59:31.213

我认为仅在 html 和 css 中无法获得您想要的效果。

要填充可用的空白空间，您需要使用 javascript 之类的东西，例如查看[jQuery Masonry 插件](http://masonry.desandro.com/)（可能还有 jQuery-less 选项......）。

# svn - 尝试使用 closeonoid 更新 tortoiseSVN

> ID：14349154
> 
> 赞同：0
> 
> 时间：2013-01-15T23:54:03.833
> 
> 标签：svn, tortoisesvn, exe

因此一直在尝试使用此代码/.exe 自动更新 SVN：

@echo 关闭

"C:\Progrm Files\TortoiseSVN\bin\TortoiseProc.exe" /command:update /path:"C:/SVN/Company/Products" /closeoned:2

不幸的是，我不断收到此错误消息：C:\WINDOWS\system32\cmd.exe-updateSVN.exe NTVDM CPU 遇到了非法指令。CS:1210 IP:0101 OP:65 63 68 6f 20 选择“关闭”以终止应用程序。

据我所知，这应该是相当基本的，有人知道如何解决这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:49:42.743

咳咳：

> C:\WINDOWS\system32\cmd.exe-updateSVN.exe

你意识到无论是 TortoiseSVN 还是任何“干净”的 Subversion 客户端都没有安装任何具有该名称的东西，尤其是不在`system32`目录中？

我会先用一两个病毒扫描程序分析那个 exe 文件，然后再删除它。

因为该错误`The NTVDM CPU has encountered an illegal instruction`意味着某些 16 位代码无法运行 - 而 Subversion 和 TortoiseSVN 都是纯 32 位甚至 64 位应用程序，**绝对没有 16 位代码**。

这确实表明您的系统有问题，而不是您尝试运行的命令或您传递的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:55:56.757

从修正语法中的错别字开始

> 要在命令结束时自动关闭进度对话框而不使用永久设置，您可以传递**/closeonend**参数。

为了纠正这种情况，只需使用命令行 lient 来更新工作副本（它可以使用 TortoiseSVN 1.7.* 从 TSVN-installer 安装或单独安装）

# ruby-on-rails - #new_with_session 中的设计 + Omniauth + Heroku 未定义方法

> ID：14349156
> 
> 赞同：0
> 
> 时间：2013-01-15T23:54:21.843
> 
> 标签：ruby-on-rails, ruby, heroku, devise, omniauth

社交登录在开发中运行良好，但一旦推送到 heroku，我就会`NoMethodError (undefined method `each' for nil:NilClass)`进入`new`.

从我的用户模型：

```
def self.new_with_session(params, session)
  if session["devise.user_attributes"]
    new(session["devise.user_attributes"], without_protection: true) do |user|
      user.attributes = params
      user.valid?
    end
  else
    super
  end
end 
```

我在调试中遇到了障碍。有什么想法吗？调试思路？类似的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:46:42.617

解决了！问题实际上出在acts_as_taggable_on gem 上。由于`session["devise.user_attributes"]`包含了所有`User`属性，当它到达其中一个“acts_as_taggable”时，比如在我的情况下是“技能”或“兴趣”，宝石魔法似乎将其变成了多参数或嵌套参数属性，然后 rails 尝试循环值 - 在我的情况下是 nil 。所以，如果`"skills"=>nil`存在，我会得到一个`undefined method each for nil`错误。

我还没有深入检查 gems 的源代码来确认问题出在哪里，但我相信 rails 中的错误来自[https://github.com/rails/rails/blob中的第 25 或 27 行/master/activerecord/lib/active_record/attribute_assignment.rb](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/attribute_assignment.rb)。

简单的解决方案是添加`session["devise.user_attributes"].delete_if { |k,v| v.blank? }`到我的`new_with_session`方法中。

```
def self.new_with_session(params, session)
  if session["devise.user_attributes"]
    session = session["devise.user_attributes"].delete_if { |k,v| v.blank? }
    new(session, without_protection: true) do |user|
      user.attributes = params
      user.valid?
    end
  else
    super
  end
end 
```

# wxpython - wxPython 保持 wx.Frame 正方形？

> ID：14349157
> 
> 赞同：2
> 
> 时间：2013-01-15T23:54:30.240
> 
> 标签：wxpython

我想保留一个框架正方形（如棋盘）。它可以调整大小。这是我尝试过的。它使框架保持正方形，但不会减小大小。它只会增加大小。

```
import wx

class MainWindow (wx.Frame):
    def __init__ (self):
        wx.Frame.__init__(self, None)
        self.Bind(wx.EVT_SIZE, self.OnSize)
        self.Show()

    def OnSize (self, event):
        w,h = self.GetClientSize()
        size = max(w,h)
        self.SetClientSize((size,size))

if __name__ == '__main__':
    app = wx.PySimpleApp()
    win = MainWindow()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:33:53.400

（根据 RobinDunn 的建议从我的评论中复制）

问题是它`max(w, h)`总是会返回最大的数字。因此，如果您在水平方向减小尺寸，则垂直尺寸将超过水平尺寸。所以理想情况下，您会想知道 中发生了什么变化`OnSize`，这样您就可以推断出用户意图是什么（增加或减少），并`min/max`相应地使用。一个想法是将之前的尺寸存储在框架上，这样您就可以比较新的和之前的尺寸。

这个想法类似于下面的代码。请注意，它的边缘仍然很粗糙，但它应该为您提供一个起点。

```
import wx

class MainWindow(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)
        self._size = self.ClientSize
        self.Bind(wx.EVT_SIZE, self.OnSize)
        self.Show()

    def OnSize(self, event):
        if self._size[0] != self.ClientSize[0]:
            self._size = self.ClientSize[0], self.ClientSize[0]
        elif self._size[1] != self.ClientSize[1]:
            self._size = self.ClientSize[1], self.ClientSize[1]

        if self._size != self.ClientSize:
            self.ClientSize = self._size

if __name__ == '__main__':
    app = wx.PySimpleApp()
    win = MainWindow()
    app.MainLoop() 
```

# c - 从改变指针地址的函数返回，地址保持不变

> ID：14349162
> 
> 赞同：4
> 
> 时间：2013-01-15T23:54:34.567
> 
> 标签：c, visual-studio

我编写了一个更复杂的程序，但我将问题缩小到以下问题：为什么这个程序打印的是垃圾而不是 hzllo？我使用调试器跟踪了 temp 和 p 的值和内存地址，它正确地从 foo 函数返回，并且由于我不理解打印垃圾的原因。

```
void foo(char **str) {
    char temp[79];
    strcpy_s(temp,79,*str);
    *(temp + 1) = 'z';

    *str = temp;    

}

void main() {

    char *p = (char*) malloc(79 * sizeof(char));
    p = "hello";
    foo(&p);

    printf("%s", p);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T23:56:36.063

`temp`是一个局部变量，当您退出时它会超出范围`foo`。因此`p`是一个悬空指针，您的程序具有未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T23:58:57.837

改变

```
char temp[79];        # allocated on the stack, vanishes on return 
```

...至...

```
static char temp[79]; # has a longer lifetime 
```

此外，您不需要`malloc(3)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T00:00:33.913

```
void foo(char **str) {
    // Bad: "temp" doesn't exist when the function returns
    char temp[79];
    strcpy_s(temp,79,*str);
    *(temp + 1) = 'z';

    *str = temp;    

}

void main() {

    char *p = (char*) malloc(79 * sizeof(char));
    p = "hello";
    foo(&p);

    printf("%s", p);
} 
```

这个更好：

```
void foo(char **str) {
    // This should change the pointer ... to something valid outside the function
    *str = (*str) + 1;        
} 
```

# scala - case 类中的 var 成员会影响 case 类的相等性吗？

> ID：14349165
> 
> 赞同：8
> 
> 时间：2013-01-15T23:54:44.027
> 
> 标签：scala, equality, case-class, algebraic-data-types

我在我的代码中大量使用案例类，回复案例类的基本相等定义以正确运行。然后现在我发现我需要将另一个字段成员添加到案例类中。

1.  那么如果我`var`在案例类中添加一个字段成员，它会弄乱案例类的相等属性吗？
2.  如果 1 是，那么如果我只更改`var`一次字段值，之后，不会发生任何重新分配，在 case 类进入任何集合或进行相等比较之前，这仍然会弄乱相等行为吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T02:10:34.967

案例类相等性仅基于其主要构造函数属性，无论它们是`var`还是`val`（是的，您可以`var`通过显式覆盖案例类构造函数 args 拥有`var`的隐含来实现它们。）在 a 的主体中添加属性*不会*影响编译器生成的方法。`val``case class` *`equals(other: Any)`*

 *见证：

```
package rrs.scribble

object  CCVarEq
{
  case class CC1(i: Int, j: Float, var k: Double)

  case class CC2(i: Int, j: Float, var k: Double) {
    var l = math.Pi
  }

  def show {
    val cc11 = CC1(1, 2.0f, 3.0)
    val cc12 = CC1(1, 2.0f, 3.0)

    val cc21 = CC2(1, 2.0f, 3.0); cc21.l = math.E
    val cc22 = CC2(1, 2.0f, 3.0)

    printf("cc11 == cc12: %s%n", cc11 == cc12); cc12.k = math.Pi * math.E
    printf("cc11 == cc12: %s%n", cc11 == cc12)

    printf("cc21 == cc22: %s%n", cc21 == cc22)
  }
} 
```

在 REPL 中：

```
scala> import rrs.scribble.CCVarEq._
import rrs.scribble.CCVarEq._

scala> show
cc11 == cc12: true
cc11 == cc12: false
cc21 == cc22: true 
```

jamie 关于并发的所有观点也是有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T00:03:36.630

没那么简单。您在一个线程上更新案例类 var，而另一个线程正在执行相等检查。除非 var 是 volatile，否则在执行相等性检查之前，对 var 的更改可能不会传播到其他线程。所以你可能有竞争条件。不管这种情况只发生一次还是多次。

一旦未定义到该点，值是否要更改？如果是这样，请使用惰性 val。它有一个同步问题，可能会减慢高性能代码，但否则会满足您的用例。*

# width - Flexslider 幻灯片宽度问题

> ID：14349167
> 
> 赞同：7
> 
> 时间：2013-01-15T23:54:51.030
> 
> 标签：width, loading, flexslider

我在使用 flexslider 时遇到了一个奇怪的问题。幻灯片 LI 未获得正确的宽度，因此无法显示所有幻灯片。这仅在第一页加载时发生。一旦我切换到另一个选项卡并切换回来，一切看起来都很好。也许是 JS 加载问题？！

截图：[这里](http://s3.imgimg.de/uploads/flexslider775fc38ajpg.jpg)

flexslider.css

```
.flexslider {margin: 0; padding: 0;}
.flexslider .slides > li {text-align: center; display: none; -webkit-backface-visibility: hidden;} /* Hide the slides before the JS is loaded. Avoids image jumping */
.flexslider .slides li.flex-active-slide img {text-align:center; width: auto; -webkit-border-radius: 6px; -moz-border-radius: 6px; -o-border-radius: 6px; border-radius: 6px; box-shadow: 0 1px 4px rgba(0,0,0,.2); -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.2); -moz-box-shadow: 0 1px 4px rgba(0,0,0,.2); -o-box-shadow: 0 1px 4px rgba(0,0,0,.2); } 
```

JS

```
$(window).load(function() {
    $('.flexslider').flexslider({
        controlNav: true,
        directionNav: true
    }); 
}); 
```

我也用 $(document).ready(function() 试过了，但仍然是同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T14:34:24.183

好吧，维尔纳。

我最终得到了你的解决方案。很遗憾。

这是另一种方法。

```
/* SLIDERS in content */
$('.flexslider').flexslider({
    animation: "slide", 
    start: function(slider){
        $('.flexslider').resize();
    }
}); 
```

我选择不使用上面的代码的原因是当幻灯片更新到正确的宽度时有一个延迟并且做了一点跳跃。

如果有人有更清洁的解决方案 - 请告诉我。我正在使用最新的 flexslider - 这个问题似乎只是有时会发生。但是当它发生时……啊。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T11:11:10.993

我有同样的问题。

在会话中首次加载时，Flexslider 获取滑块容器的宽度，如果它不明确，则其值为 0px。然后幻灯片的宽度为 0px，您看不到它们。

为避免此问题足以修复滑块容器中的宽度，在我的情况下为 604px：

```
<div class="flexslider" style="width: 604px">
    <ul class="slides">
        <li>
            <img id="slide1" />
        </li>
        <li>
            <img id="slide2" />
        </li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-01T11:21:09.397

我在使用 flexi 滑块时遇到了同样的问题。

尝试了上述解决方案，但它对我不起作用。

我尝试使用以下代码更新 css 作为此问题的转机。

```
.flexslider .slides {
zoom: 1.1 !important;
} 
```

它解决了这个问题。你可以试试这个代码，让我知道它是否对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T00:17:56.570

我通过删除`minItems`我的 flexslider 调用解决了这个问题。似乎可以使用`maxItems`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T00:14:17.903

下面的代码/顺序可能会有所帮助；好吧，至少我已经成功了。

```
<script src="js/jquery-1.8.3.min.js"></script>
<script src="js/jquery.easing.js"></script>
<script defer src="js/jquery.flexslider-min.js"></script>
<script>
$(document).ready(function(){
    $('.flexslider').flexslider({
        controlNav: true,
        directionNav: true,
     });
}); 
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-11T11:27:46.533

我发现了它为什么这样做，这很简单。

**这是因为CSS！在滑块的 ul 上。**

去掉 ul.slides 上的填充和边距

```
.slides{
    padding:0;
    margin:0;
} 
```

在我这样做之后，每次调整大小在所有浏览器和移动设备上都很完美。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-03T14:52:56.503

对我来说，问题是标记。我有这个：

```
<div class='carousel-slides'>
  <div class='carousel-slide'></div>
  <div class='carousel-slide'></div>
</div> 
```

* * *

```
$('.carousel-slides', context).flexslider({
  selector: '.carousel-slide'
}); 
```

...但似乎需要将它应用于每张幻灯片上的内部 div，这很荒谬。

```
<div class='carousel-slides'>
  <div class='carousel-slide'>
    <div class='carousel-slide-inner'></div>
  </div>
  <div class='carousel-slide'>
    <div class='carousel-slide-inner'></div>
  </div>
</div> 
```

* * *

```
$('.carousel-slides', context).flexslider({
  selector: '.carousel-slide > .carousel-slide-inner'
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-20T09:21:32.717

也许另一个答案有点晚了，但是在尝试了这里和其他论坛的所有答案之后，我最终得到了自己的解决方案，与其他人类似，但至少我觉得它非常连贯和干净。

我在移动环境中遇到了问题，其中滑块位于一个选项卡内，一旦单击标题就会打开。内容在 中`display:none`，这会导致 flexslider (v. 2.5) 出现问题，即无法确定包含的幻灯片的正确宽度。

所以我纠正了我的css并通过可见性和不透明度将容器隐藏起来。

html样本

```
<dd class="tab-container with-slider">
    <div class="flexslider">
       <ul class="slides">
          <li>whatever </li>
       </ul>
    </div>
</dd> 
```

CSS：

```
/*all other containers behave well with display none/block so I leave them with normal behavior*/
 .parent dd.tab-container {  
        display: none; position: relative; 
 }
/*container with flexslider inside uses visibility and opacity to be hidden*/  
.parent dd.tab-container.with-slider{ 
     display: block; 
     height: 0px; 
     visibility: hidden; 
     opacity: 0;
 } 
.parent.accordion-open dd.tab-container.with-slider{ 
     height: auto; 
     visibility: visible; 
     opacity: 1;
 } 
```

Js 是从基本示例直截了当的，仅此而已。

```
$j('.myTabOpener').click(function () {  
    var mySlider = $j(this).find('.flexslider');
    mySlider.flexslider({
        animation: "slide",
        animationLoop: false,
        itemWidth: 210,
        itemMargin: 5,
        minItems: getGridSize(), 
        maxItems: getGridSize()
    });  
}); 
```

# jsf - 使用视图范围 bean 进行数据交换

> ID：14349168
> 
> 赞同：3
> 
> 时间：2013-01-15T23:54:54.177
> 
> 标签：jsf, primefaces, scope

试图使用视图范围的 bean 来解决我的问题。请原谅我发帖的长度。我有一个视图：page1.xhtml 使用 bean 和提交表单的 commandButton，通过 action 属性调用同一个 bean 的方法。

该方法的返回值导致导航规则“导航”到 page2.xhtml。因此，我的理解是，一旦导航将请求流带到 page2.xhtml，page1.xhtml 使用的名为“player”的 bean 就会超出范围。毕竟，每个视图都使用一个名为“播放器”的视图范围 bean。我需要传达一个名为 id 的参数。所以 page1.xhtml 有一个元素作为 commandButton 的子元素，用于“提交”page1。

Page2.xhtml 使用以下构造，因为我希望在渲染 page2.xhtml 之前加载视图范围的 bean：

```
<ui:define name="metadata">
   <f:metadata>
     <f:viewParam name="id" value="#{player.id}" />
    <!--  this should cause bean to be loaded before it's needed for initial rendering -->
    <f:event type="preRenderView" listener="#{player.initFromId}"/>
  </f:metadata>
</ui:define> 
```

在 player.initFromId 方法中，我将 FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap(); 返回的地图的键和值转储到标准输出。

我看到了什么？[我从这个清单中删除了大部分客户端保存的视图状态 :-)] 大多数键是完全限定的 UI 组件名称，按预期使用组件层次结构命名。好的。典型的 POST nv 对...

**最后我的问题**：我假设 key: id 是否正确，因为 f:param 元素作为 commandButton 的子元素导致 commandButton 的 impl 代码将 key+value 推送到请求参数映射中？我希望如此，但我不喜欢假设太多。几乎总是让我陷入更深的麻烦。

但是 f:viewParam 不会导致 player.setId() 方法在 player.initFromId() 之前被调用 - 通过 preRenderView 事件。player.initFromId() 被调用但**不是setter？？**

我希望我的假设是正确的，因为我无法想象通过不同视图/页面（在本例中为 page2.xhtml）调用的代码来使用 UI 组件字段名称是设计目标。这将紧密耦合每个页面的实现，使外部化的导航规则实际上毫无意义。我还假设使用 f:viewParam 和 f:param 的目标是提供最小的耦合（仅在声明级别 - page1 声明它提供参数，page2 声明需要参数 - 协议留给框架）。

```
Player.initFromId - key:id, value:37
Player.initFromId - key:javax.faces.ViewState, value:H4sIAAAAAA[....]YQfAAA=
Player.initFromId - key:javax.faces.partial.ajax, value:true
Player.initFromId - key:javax.faces.partial.execute, value:@all
Player.initFromId - key:javax.faces.partial.render, value:registrationForm:regPage
Player.initFromId - key:javax.faces.source, value:registrationForm:SubmitButton
Player.initFromId - key:registrationForm, value:registrationForm
Player.initFromId - key:registrationForm:SubmitButton, value:registrationForm:SubmitButton
Player.initFromId - key:registrationForm:firstName, value:Bob
Player.initFromId - key:registrationForm:j_idt18:carriers, value:Sprint
Player.initFromId - key:registrationForm:j_idt18:city, value:Sparta-test4
Player.initFromId - key:registrationForm:j_idt18:dob_input, value:
[ many other UI components key+value pairs omitted] 
```

来自 page1.xhtml：

```
<p:commandButton tabindex="0" id="SubmitButton" value="Register" 
    action="#{player.register}" update="regPage" >
   <!--  this needs to be set after the register() method completes. is that so? -->
    <f:param name="id" value="#{player.id}"/>
</p:commandButton> 
```

非常感谢您花时间阅读这篇过多​​的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:11:46.290

您似乎正在通过前锋导航。前锋基本上在渲染响应阶段创建一个新视图。`<f:viewParam>`不会在转发的请求上运行。它仅在初始请求上运行（最初由客户端触发）。您需要通过重定向而不是转发进行导航，以便指示客户端触发全新的 GET 请求，从而触发所有`<f:viewParam>`工作。您可以通过向`faces-redirect=true`导航结果添加参数来实现这一点，如下所示：

```
return "page2?faces-redirect=true"; 
```

但是，这会丢失当前请求的所有请求参数。因此，您需要将其显式添加到导航结果中：

```
return "page2?faces-redirect=true&id=" + id; 
```

# iphone - 传递类型 ID 真的需要吗？

> ID：14349176
> 
> 赞同：1
> 
> 时间：2013-01-15T23:55:24.360
> 
> 标签：iphone, ios, xcode, passbook

有很多网站，如 passsource.com 和 api.passdock.com，可让您自定义和下载 pkpass 文件，该文件可以添加到 iOS 6 上的存折中。所有这些在 JSON 中都有自己的 Pass Type ID 作为 passTypeIdentifier 键. 我的问题是这个。如果您可以在线构建并分发它们而不需要一个，为什么您必须设置一个通行证类型 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:44:40.670

为什么需要 Pass ID 和 Apple 开发者帐户才能在商业上分发通行证，这是有充分理由的。查看此答案以获取详细说明（以及对上述服务之一的小吐槽）。[在运行时创建证书和通行证类型 ID](https://stackoverflow.com/questions/14201853/create-certificate-and-pass-type-id-at-runtime/14219196#14219196)

# wpf - 为什么这个图像转换器不起作用？

> ID：14349182
> 
> 赞同：0
> 
> 时间：2013-01-15T23:55:57.230
> 
> 标签：wpf, image

我只是在 WPF 中玩图像，我编写了一个示例应用程序，它从硬盘加载图像，并且应该将每行中的前 100 个像素更改为红色。但它并没有这样做，而是生成的 iage 到处都有小红线。我相信代码中的某个地方，h 和 w 已更改，因此步幅不正确。但我找不到问题出在哪里。任何帮助appriciated。

代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TestImageProcessing
{
using System.IO;
using System.Runtime.InteropServices;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Imaging;

class TransformImage
{
    public static BitmapSource Transform(BitmapImage input)
    {
        var red = new PixelColor() { Blue = 0, Green = 0, Red =255, Alpha =128 };
        var inputPixels = GetPixels(input);
        var outPixel = new PixelColor[inputPixels.GetLength(0), inputPixels.GetLength(1)];

        var output = new WriteableBitmap(input.PixelWidth, input.PixelHeight, input.DpiX, input.DpiY, input.Format, input.Palette);
        for (int h = 0; h < input.PixelHeight; h++)
        {
            for (int w = 0; w < input.PixelWidth; w++)
            {

               if (h < 100)
               {
                   outPixel[w, h] = red;
               }
               else
               {
                   outPixel[w, h] = inputPixels[w, h];
               }

            }
        }

        PutPixels(output, outPixel);
        return output;
    }
    [StructLayout(LayoutKind.Sequential)]
    public struct PixelColor
    {
        public byte Blue;
        public byte Green;
        public byte Red;
        public byte Alpha;
    }

    public static void PutPixels(WriteableBitmap bitmap, PixelColor[,] pixels)
    {
        int width = pixels.GetLength(0);
        int height = pixels.GetLength(1);
        bitmap.WritePixels(new Int32Rect(0, 0, width, height), pixels, width * 4, 0);
    }
    public static PixelColor[,] GetPixels(BitmapSource source)
    {
        if (source.Format != PixelFormats.Bgra32)
        {
            source = new FormatConvertedBitmap(source, PixelFormats.Bgra32, null, 0);
        }
       PixelColor[,] pixels = new PixelColor[source.PixelWidth, source.PixelHeight];

        int stride = source.PixelWidth * ((source.Format.BitsPerPixel + 7) / 8);
        GCHandle pinnedPixels = GCHandle.Alloc(pixels, GCHandleType.Pinned);
        source.CopyPixels(
          new Int32Rect(0, 0, source.PixelWidth, source.PixelHeight),
          pinnedPixels.AddrOfPinnedObject(),
          pixels.GetLength(0) * pixels.GetLength(1) * 4,
              stride);
        pinnedPixels.Free();
        return pixels;

    }
}
} 
```

他上面的部分代码来自这篇文章：[Finding specific pixel colors of a BitmapImage](https://stackoverflow.com/questions/1176910/finding-specific-pixel-colors-of-a-bitmapimage)

MainWindow.xaml：

```
<Window x:Class="TestImageProcessing.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="550" Width="725">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition Height="30px"/>
    </Grid.RowDefinitions>

    <Image x:Name="InImage" Grid.Row="0" VerticalAlignment="Top" Stretch="Uniform" />
    <Image x:Name="OutImage" Grid.Row="1" VerticalAlignment="Top" Stretch="Uniform" />
    <Button x:Name="Process" Content="Button"  Grid.Row="2"   Width="75" Click="Process_Click"/>

</Grid>
</Window> 
```

MainWindow.xaml.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace TestImageProcessing
{

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Process_Click(object sender, RoutedEventArgs e)
    {
        BitmapImage input= new BitmapImage(new Uri(@"C:\tmp\test.jpg"));
       InImage.Source=input;
        OutImage.Source = TransformImage.Transform(input);

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:44:39.210

您在**Transform方法中创建的****WriteableBitmap**的像素格式应该是**PixelFormats.Bgra32**，但您使用的是**输入**参数的像素格式。

* * *

******如果要将像素存储在二维矩阵中，第一维表示行数，**第二**维是**列**数，因此您应该以这种方式声明像素矩阵：

```
PixelColor[,] pixels = new PixelColor[Height, Width]; 
```

请注意，您需要交换*width*和*height*。

* * *

**已移除**（不正确）******

# ruby - 名称中的颜色代码

> ID：14349183
> 
> 赞同：0
> 
> 时间：2013-01-15T23:56:03.323
> 
> 标签：ruby

在 C# 中，您可以从其名称中获取颜色代码：`Color.FromName("Red")`.

Ruby中有类似的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T23:58:23.560

```
$ gem install color
$ irb
> require 'color/css'
> Color::CSS["blue"]
=> RGB [#0000ff] 
> Color::CSS["blue"].html
=> "#0000ff" 
```

但这还不是全部！

```
> Color::CSS["blue"].pdf_fill
=> "0.000 0.000 1.000 rg" 
> Color::CSS["blue"].to_cmyk
=> CMYK [100.00%, 100.00%, 0.00%, 0.00%] 
```

# android - 是否有可以访问 Android、iOS 和 Windows Phone 的短信内容的跨平台框架？

> ID：14349185
> 
> 赞同：1
> 
> 时间：2013-01-15T23:56:11.840
> 
> 标签：android, ios, windows-phone-7, xamarin.ios, cross-platform

我们想要一种简单的方法来收集从一个人发送给另一个人的短信示例。我浏览了很多框架文档，例如 Phonegap，看看我是否可以访问短信内容，而 Monotouch 似乎是唯一一个“可能”能够在 Android 和 iOS 上执行此操作的文档（http://androidapi. xamarin.com/?link=T:Android.Telephony.SmsManager）。

我是一名 Android 开发人员，可以在 Android 上轻松做到这一点，但我不知道 iOS 或 WP7 的第一件事，所以我想我可以从这些类型的设备中提取数据，以某种方式解析它（比如混淆私有数据）并将其发送到我们的服务。

它不需要有漂亮的用户界面，甚至不需要是一个应用程序。它可能是一个以某种方式访问​​底层提供商的网页。

贾里德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:57:54.597

这在标准 iOS 上是不可能的。看到这个stackoverflow问题：[How to read sms message on iOS?](https://stackoverflow.com/questions/4653615/how-to-read-sms-message-on-ios)

# javascript - 在滚动时将 div 保持在固定的 x 或 y 位置 - 只是测试

> ID：14349192
> 
> 赞同：1
> 
> 时间：2013-01-15T23:56:38.617
> 
> 标签：javascript, jquery, html, css, jquery-jscrollpane

我正在使用 jQuery 和 CSS 创建时间线界面。我正在使用 jScrollPane 来滚动它。我有

*   `parent`div 包含所有 div 并在其上应用 jScrollPane
*   `header`div 应该在垂直滚动时固定，但在水平滚动时滚动并且
*   `leftpane`div应该在水平滚动时固定，但在垂直滚动时滚动

示例图像

![示例图像](../Images/a54ad0f15d82585d395e8408d8939685.png)

JSFiddle 链接：http: [//jsfiddle.net/gACZ8/4/](http://jsfiddle.net/gACZ8/4/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:18:13.380

您可以使用[jscrollpane 事件](http://jscrollpane.kelvinluck.com/events.html)。

演示：http: [//jsfiddle.net/gACZ8/10/](http://jsfiddle.net/gACZ8/10/)

```
$(document).ready(function() {
  $('#parent')
    .bind('jsp-scroll-y',
      function(event, scrollPositionY, isAtTop, isAtBottom) {
        $(".header").css("top", scrollPositionY);
      }
    )
    .bind('jsp-scroll-x',
      function(event, scrollPositionX, isAtLeft, isAtRight) {
        $(".lefter").css("left", scrollPositionX);
      }
    )
    .jScrollPane();
}); 
```

此外，您应该添加`position:relative`到两个 div（以在不移动其他块的情况下将它们移动到顶部/左侧）和`z-index`标题（使其溢出侧边栏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:20:20.473

[http://jsfiddle.net/gACZ8/11/](http://jsfiddle.net/gACZ8/11/)

您需要查看 `.jspPane`jsScroll 创建的 div 的滚动位置，并偏移 div 的位置。

```
$(document).ready(function() {
  $('#parent').jScrollPane();
  $('#parent').on('scroll', function(){
    var jspPane=$(this).find('.jspPane');
    $('.lefter').css('left', 0-parseFloat(jspPane.css('left')));
    $('.header').css('top', 0-parseFloat(jspPane.css('top')));
  });
}); 
```

请注意，您的 header 和 leftcol 需要绝对定位，否则它们将与它们一起推送页面内容，这意味着您的页面必须具有避免这些 div 的边距，并且您需要注意 z-indexes。

**编辑**

或使用 jscrollpane 事件（请参阅其他答案）。我以前从未使用过jscrollpane！

# ruby-on-rails - 如何预填充模型错误的输入字段？

> ID：14349193
> 
> 赞同：1
> 
> 时间：2013-01-15T23:56:47.160
> 
> 标签：ruby-on-rails, ruby

我已经`resources :campaigns`在 routes.rb 中定义了。

如果我`form_for @campaign`在 /campaigns/new.html.erb (campaigns#new) 中创建一个，创建适当的字段，然后在将模型保存在 中时提交它`campaigns#create`，如果我将浏览器重定向回`campaigns#new`，则表单字段显示为空.

我记得有一些技巧，但我似乎无法谷歌它，因为我在命名方面很弱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:59:20.797

在您的创建操作中，而不是重定向只是呈现“新”页面，以便在呈现表单时设置您的 @campaign 值。

# ruby - 如何对带有“2.1.2.5”之类的数字的字符串数组进行排序？

> ID：14349197
> 
> 赞同：-3
> 
> 时间：2013-01-15T23:57:40.277
> 
> 标签：ruby, string, integer

我有一个字符串数组：

```
arr = ["2.1", "2.2", "2.2.1", "2.2.10", "2.2.2", "2.10"] 
```

如果我使用`arr.sort`，结果是：

```
["2.1", "2.10", "2.2", "2.2.1", "2.2.10", "2.2.2"] 
```

我需要：

```
["2.1", "2.2", "2.2.1", "2.2.2", "2.2.10", "2.10"] 
```

如何正确排序？

**问题2：**

如何对“2.1a”或“0.9b”等“alpha”或“beta”类型的字符进行排序

**问题 3：**

如果我有一个字段类型为字符串的活动记录数组，其中包含这样的数字，那么在模型中设置是否`default_scope :order => ...`真实`sort_by{|a| a.split('.').map &:to_i }`

*或者*

在模型中创建我的方法，例如

```
def my_sort
  #sorting
end 
```

为了这：

```
Block.all.my_sort 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:02:31.210

```
arr.sort_by{|a| a.split('.').map &:to_i } 
```

这将：

1.  `split`每个字符串成组件。
2.  将它们中的每一个都更改为整数 ( `map &:to_i`)。
3.  相互比较这些数组。

# java - 当值超过 150 时，int 值不相等？

> ID：14349200
> 
> 赞同：2
> 
> 时间：2013-01-15T23:58:02.180
> 
> 标签：java, autoboxing

代码看起来像

```
public void option() {
    seeTasks = tasks.getTasks();
        for (int i = 0; i < seeTasks.size(); i++) {
            for (int b = 0; b < seeBoxes.size(); b++) {
               System.out.println("see Tasks: " + seeTasks.get(i) + 
                           " see Boxes " + seeBoxes.get(b));
            if(seeTasks.get(i) == seeBoxes.get(b)) {
                option.add(seeTasks.get(i));
            }
        }
    }
    System.out.println(option);
} 
```

如果的值 低于 150 ，则`if`语句`seeTaks.get(i)`不会通过。这怎么可能？`seeTasks.get(i)`如下所示，370 不包括在内。如果我将 110 更改为 150，它将无法通过。

`println`'s 的输出是：

```
see Tasks: 50 see Boxes 50
see Tasks: 50 see Boxes 110
see Tasks: 50 see Boxes 150
see Tasks: 50 see Boxes 210
see Tasks: 50 see Boxes 270
see Tasks: 50 see Boxes 310
see Tasks: 50 see Boxes 370
see Tasks: 50 see Boxes 430
see Tasks: 110 see Boxes 50 
see Tasks: 110 see Boxes 110
see Tasks: 110 see Boxes 150
see Tasks: 110 see Boxes 210
see Tasks: 110 see Boxes 270
see Tasks: 110 see Boxes 310
see Tasks: 110 see Boxes 370
see Tasks: 110 see Boxes 430
see Tasks: 370 see Boxes 50
see Tasks: 370 see Boxes 110
see Tasks: 370 see Boxes 150
see Tasks: 370 see Boxes 210
see Tasks: 370 see Boxes 270
see Tasks: 370 see Boxes 310
see Tasks: 370 see Boxes 370
see Tasks: 370 see Boxes 430
[50, 110] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T00:01:15.297

我猜测

```
seeTasks.get(i) 
```

和

```
seeBoxes.get(b) 
```

两者都返回一个`Integer`. 然后对于低于 128 的值，`Integer`缓存返回相同的实例，但对于较大的值，则返回新实例。使用`equals()`.

# iphone - 使用旧的 Facebook sdk 发布图片

> ID：14349211
> 
> 赞同：0
> 
> 时间：2013-01-15T23:59:33.710
> 
> 标签：iphone, ios, facebook, api, sdk

我想将我的 iPhone 应用程序中的图像直接发布到我的墙上。不使用图像 url，使用实际的 UIImage 或 NSData。

在最近的 FacebookSDK 上，我可以发布如下：

`[FBRequestConnection startWithGraphPath:@"me/photos" parameters:params ..`

并将图像的 NSData 传入`params`

但对于旧版本`FBConect.h`，我可以有类似的选择吗？到目前为止，我所知道的是将图像 url 作为参数字典的一部分传递。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:56:58.503

您可以像这样在您的 Facebook 时间线墙上发布图像可能对您有所帮助首先您需要获得在您的`ViewDidLoad`方法中将照片发布到墙上的权限，例如：-

```
NSArray* permissions = [NSArray arrayWithObjects:@"publish_stream", @"user_photos", nil];
[facebook authorize:permissions]; 
```

现在在您的按钮单击或您的逻辑上发布图像：-

```
-(IBAction)ActionPostWallPhoto
{

     NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                           ImageView.image, @"picture",
                                           nil];

    [facebook requestWithGraphPath:@"me/photos"
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self];

} 
```

# c# - 如何在不创建实例的情况下从另一个表单访问最小化表单？

> ID：14349219
> 
> 赞同：1
> 
> 时间：2013-01-16T00:00:35.833
> 
> 标签：c#, .net, winforms

在我的 winforms 应用程序中，我多次使用来自另一个表单的 form.ActiveForm。这是因为我不想要表单的新实例，而只是将表单放在前面或以不同方式设置它的组件。但是我注意到，当我最小化表单时，form.ActiveForm 返回 NullReferenceException。我该怎么做才能访问这个最小化的表单？好像没有什么方法。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:05:18.743

将最小化的表单作为一个字段存储在您的主表单中，并以这种方式访问​​它。如果表单被最小化，则它不是“活动的”。但是，使用该字段，您仍然可以访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:20:03.307

使用[Application.OpenForms](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)找到正确类型的表单：

```
foreach (var f in Application.OpenForms)
{
    if (f is MyForm)
    {
        // do something...
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:11:24.387

保存对最小化表单的引用。如果您愿意，可以通过创建公共属性将其存储在第二种形式中：

```
public MyForm myForm; 
```

然后设置它：

```
MyForm frm = new MyForm();
frm.myForm = (first form reference here); 
```

然后第二种形式可以直接使用第一种形式引用`myForm`。

# php - 即使通过 JS 加载到 div 也将表单信息传递到另一个页面

> ID：14349221
> 
> 赞同：0
> 
> 时间：2013-01-16T00:01:02.877
> 
> 标签：php, jquery, forms, html

所以我正在回收我从其他网站获得的一个很好的简单电子邮件联系表：

```
<form method="post" action="javascript:loadContent('#bodyContent','/wp-content/themes/GenomeStudios2013/sendmail.php');"> <!--javascript:loadContent('#rightColumn', 'sendmail.php');-->
                    <h1>Contact Us</h1>
                    <br /><br />
                    <p><font color="red">*</font>Name:</p>
                    <p><input name="name" type="text" cols="30" /></p>
                    <br />
                    <p><font color="red">*</font>Email:</p>
                    <p><input name="email" type="text" cols="30" /></p>
                    <br />
                    <p>Contact Topic:</p>
                    <select name="topic">
                        <option value="Feedback">Feedback</option>
                        <option value="Bug Report">Bug Report</option>
                        <option value="Press">Press</option>
                        <option value="Complaint">Complaint</option>
                        <option value="Suggestion">Suggestion</option>
                        <option value="Business">Business</option>
                        <option value="Job Information">Job Information</option>
                    </select>
                    <br /><br />
                    <p><font color="red">*</font>Message:</p>
                    <p><textarea name="messageBox" cols="30" rows="5"></textarea></p>
                    <br />
                    <p>Would you like to recieve a reply?</p>
                    <p>Yes:<input type="radio" name="reply" value="yes"/> No:<input type="radio" name="reply" value="no"/></p>
                    <br />
                    <p><input type="submit" name="submitButton" value="Send" /></p> 
```

但是我现在尝试将结果页面加载到加载该页面的 div 中，而不是重新加载整个页面。但是，这不允许表单将字段信息传递到第二页进行处理。

我已经测试过了，我得到的只是一封空白的电子邮件。

即使javascript正在加载它而不是整页加载，有没有办法将该信息传递到第二页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:07:34.530

loadContent - 不是本机 js 函数，您需要检查是否从该站点复制了具有“loadContent”函数的脚本

但是，我看到你使用 WP，那么我建议使用 cforms-plagin 它具有 GPL 并且易于用于创建表单

# ember.js - ember.js 的推荐错误报告

> ID：14349223
> 
> 赞同：5
> 
> 时间：2013-01-16T00:01:09.463
> 
> 标签：ember.js

ember.js 社区对报告 Ember 应用程序崩溃的建议是什么？我正在寻找 Rails 中的 exception_notifier gem 的等效项，以便在用户遇到错误时通知我。

这篇[Stack Overflow 帖子](https://stackoverflow.com/questions/8528005/are-there-any-tools-for-automatically-reporting-errors-from-client-side-javascri)推荐了通用的 javascript 错误处理解决方案，包括：

*   处理好`window.onerror`自己
*   使用`window.onerror`为您处理的托管服务，例如[Airbrake.io](https://airbrake.io)或[Muscula](http://www.muscula.com/)

我希望有某种 Mixin 可以为您提供所有这些错误处理代码，并提供更丰富的错误消息（例如发生错误时的当前路由等）。这还存在吗？如果没有，人们正在做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T00:19:48.590

像 Rails gem 这样的任何错误报告都将依赖于某种服务器后端来处理错误，例如向管理员发送电子邮件等。Rails 将有一个专门用于此类事情的整个 gem 是有道理的，因为 Rails 正在拥有整个堆栈跟踪、会话和各种其他方便（/必要）用于调试问题的变量，但对于前端应用程序（例如 Ember），所有错误信息都在客户端，因此，所有后端逻辑都会公开一个 API，您的 Ember 应用程序可以与之通信，该 API 将转发您从应用程序发送给它的任何信息，并将其发送到您的电子邮件，或者您想用它做什么。

要在 Ember 中执行此操作，您可以指定`Ember.onerror`函数：

```
Ember.onerror = function(error) {
  caught = error; 
  Em.$.ajax('/report-error', 'POST', {
     stack: error.stack,
     otherInformation: 'whatever app state you want to provide'
  });
}; 
```

这将接收抛出的 JavaScript`Error`对象，该对象可能具有也可能不具有包含堆栈跟踪的非标准`stack`属性，您可以在要发送的任何其他特定于应用程序的状态中发送到服务器，尽管您会可能希望保持简单，以免导致其他错误并最终陷入来自地狱的疯狂错误循环。

# facebook - 使用Javascript进行身份验证，使用PHP进行离线发布

> ID：14349225
> 
> 赞同：0
> 
> 时间：2013-01-16T00:01:27.183
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk, token

我在不推荐使用offline_access 权限后写这篇文章，所以我希望能得到一些帮助来解决我的问题。我也是 Facebook Graph API 的新手。

我创建了一个测试页面，可以使用 JS SDK 进行身份验证、请求特定权限、检查这些权限等...

但是，我想知道的是如何从 Javascript 会话变量（即令牌）中提取数据并将它们存储在数据库中，该数据库可以通过 PHP 来扩展令牌并用于离线使用。

我会给你我的场景。我正在考虑一个人们上传图片的网站。他们使用 Facebook 在我的网站上创建一个帐户。当人们对图像进行投票时，积分就会增加。当用户累积一定数量的积分时，例如 1,000 - 我想在照片所有者的墙上发布更新，例如“John Doe 在 example.com 上刚刚超过 1,000 积分”。

显然，该动作是由第三人称事件触发的，因此我没有有效的短期令牌可以发布到 John Doe 的墙上。

我唯一的想法是在授权抽象 PHP 文件后执行 AJAX 调用，该文件将存储 user_id 和令牌，该抽象文件将处理将详细信息存储在数据库中并向图形发送 cURL 调用以延长令牌，然后更新数据库中的令牌。

这真的是最好的方法吗？

另外，为什么“长寿”代币有 60 天的限制？如果 John Doe 在 3 个月内没有访问我的网站怎么办，但是他的猫骑着独角兽的照片慢慢地获得了积分，当它达到里程碑时，还有什么比发布更能让 John Doe 重新访问我的网站的方法在他的墙上，他现在得到了 1000 分。

提前感谢大家的想法，HPC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:39:11.090

1.根据您关于如何通过 JavaScript API 向 PHP 提供用户 ID 和令牌值设置的第一个问题，您可以在用户登录到您的应用程序后刷新页面，以便 PHP 可以拥有这些值并执行必要的操作。
2.关于您的第二个问题，关于如何重新吸引未在长期令牌有效期内登录的用户，我建议您使用[apprequest](http://developers.facebook.com/docs/channels/)或[Notification API](https://developers.facebook.com/docs/concepts/notifications/)重新与他互动并询问他访问您的网站以了解他最近的成就。

# c# - 在 windows phone 中将数据从一个视图传递到另一个视图

> ID：14349228
> 
> 赞同：0
> 
> 时间：2013-01-16T00:01:38.043
> 
> 标签：c#, xaml, windows-phone-7

我有一个充满 JSON 数据的列表框。现在，当我按下该列表框中的某个项目时，我应该转到有关该项目的详细信息页面。我的列表框有这个代码。

```
<ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="0,5,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="350"/>
                                    </Grid.ColumnDefinitions>
                                    <Image Source="{Binding imgurl}" MaxHeight="110" MaxWidth="110" />
                                    <TextBlock Grid.Column="1" Text="{Binding title}" TextWrapping="Wrap" Margin="10,0,2,0" FontSize="20" />
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate> 
```

现在为了导航，我在`PhoneList_SelectionChanged`.

```
NavigationService.Navigate(new Uri("/Views/NewsDetail.xaml", UriKind.Relative)); 
```

我知道我可以使用将值传递给这个 URI`?value1=testtest` 但我现在的问题是我可以将这些值传递给 URI 吗？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:23:22.530

在选择更改事件中，您必须知道您选择的对象。代码结构如下：

```
PhoneModel model = PhoneList.SelectedItem as PhoneModel;
NavigationService.Navigate(new Uri("/Views/NewsDetail.xaml?value1="+model.title, UriKind.Relative)); 
```

PhoneModel 是您绑定到 listBox 的项目列表的模型。上面的代码片段在导航中发送标题。您必须将其替换为您的要求。

要在导航中发送多个参数，您必须遵循以下模式：

```
PhoneModel model = PhoneList.SelectedItem as PhoneModel;
NavigationService.Navigate(new Uri("/Views/NewsDetail.xaml?value1="+model.title+"&value2="+model.imgurl, UriKind.Relative)); 
```

# python - 当 locals() 存在时，是否有一个 python 语法检查器可以忽略“分配给但从未使用”？

> ID：14349239
> 
> 赞同：3
> 
> 时间：2013-01-16T00:02:48.433
> 
> 标签：python, vim, syntax, pyflakes

假设我有代码

```
def foo():
    bar = 1
    wibble = 3
    return locals() 
```

我当前的语法检查器（带有 syntastic.vim 的 flake8）将在两个变量上抛出“分配给但从未使用”错误。然而 locals() 暗示了一些事情，如果不是明确的，它们实际上正在被使用。

```
def foo():
    bar = 1
    wibble = 3 # <-- I still want this to throw as it is definitely not being used
    return bar 
```

是否有任何 python 检查器或自定义设置将是 locals() 感知和宽松的？

编辑：

这是 vim/syntastic/flake8 的快速而肮脏的解决方案，它将抑制 .vimrc 中的警告

```
"Ignore unused variable warnings whenever locals() is being used in a file                                                              
function! LocalsWarningSuppress()                                              
    if ( search("locals()",'nw') > 0)                                          
        let g:syntastic_python_checker='flake8 --ignore=W806'                  
    else                                                                       
        let g:syntastic_python_checker='flake8'                                
    endif                                                                      
endfunction 

au BufWritePre **/(filter_pattern)*py call LocalsWarningSuppress() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:56:37.590

不，即使[`pylint`](https://www.pylint.org/)是我所知道的最强大和最挑剔的 Python linter 也不够聪明，无法检测到这种情况。但如果是这样，它可能会抱怨你一开始就在使用`locals()`。:)

另一方面，与 pyflakes 不同，pylint 确实支持[魔术注释](https://pylint.readthedocs.io/en/latest/technical_reference/features.html#messages-control-options)以忽略特定问题。但我必须警告您，pylint 开箱即用非常挑剔（因此很慢），因此您需要提前几分钟将其[检查清单](http://pylint-messages.wikidot.com/all-messages)缩减为您真正关心的事情。

在字符串格式化的特定情况下，有一张[作为 wontfix 关闭的票](https://github.com/PyCQA/pylint/issues/641)*用于*改进此行为。pylint 开发人员似乎不想将其作为一项功能来实现。

# wso2 - WSO2 ESB 4.0.3 - 从 4.0.* 存储库安装数据服务功能时出错

> ID：14349240
> 
> 赞同：2
> 
> 时间：2013-01-16T00:02:59.620
> 
> 标签：wso2, wso2esb, wso2dss

我下载了 WSO2 ESB 4.0.3 并将其解压缩到我的 MAC book PRO 和 MAC OSX 10.7.5 上。我通过管理 UI 添加了以下存储库。

[http://dist.wso2.org/p2/carbon/releases/4.0.3/](http://dist.wso2.org/p2/carbon/releases/4.0.3/)

我搜索了数据服务功能并尝试安装它。我无法安装数据服务功能 4.0.2。它在 WSO2 控制台上给了我以下错误。

```
 [2013-01-15 16:01:13,157]  INFO - HTTPSender Unable to sendViaPost to url[https://17.209.23.156:9443/services/ProvisioningAdminService]
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:863)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:820)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
    at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
    at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:449)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:276)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.wso2.carbon.component.mgt.stub.ProvisioningAdminServiceStub.reviewProvisioningAction(ProvisioningAdminServiceStub.java:537)
    at org.wso2.carbon.component.mgt.ui.ProvisioningAdminClient.reviewInstallFeaturesAction(ProvisioningAdminClient.java:79)
    at org.apache.jsp.component_002dmgt.review_005finstall_005faction_002dajaxprocessor_jsp._jspService(review_005finstall_005faction_002dajaxprocessor_jsp.java:137)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
    at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
[2013-01-15 16:01:13,164] ERROR - ProvisioningAdminClient Error occured while reviewing provisioning action
org.apache.axis2.AxisFault: Read timed out
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:197)
    at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:449)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:276)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.wso2.carbon.component.mgt.stub.ProvisioningAdminServiceStub.reviewProvisioningAction(ProvisioningAdminServiceStub.java:537)
    at org.wso2.carbon.component.mgt.ui.ProvisioningAdminClient.reviewInstallFeaturesAction(ProvisioningAdminClient.java:79)
    at org.apache.jsp.component_002dmgt.review_005finstall_005faction_002dajaxprocessor_jsp._jspService(review_005finstall_005faction_002dajaxprocessor_jsp.java:137)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
    at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:863)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:820)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
    at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
    ... 44 more 
```

我在以下存储库中遇到同样的错误。

[http://dist.wso2.org/p2/carbon/releases/4.0.2/](http://dist.wso2.org/p2/carbon/releases/4.0.2/) [http://dist.wso2.org/p2/carbon/releases/4.0.1/](http://dist.wso2.org/p2/carbon/releases/4.0.1/)

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:48:24.277

请下载[WSO2 ESB 4.5.1并使用](http://wso2.com/products/enterprise-service-bus/)[http://dist.wso2.org/p2/carbon/releases/4.0.2/](http://dist.wso2.org/p2/carbon/releases/4.0.2/)存储库安装数据服务 4.0.2 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:17:14.520

WSO2 ESB 4.0.3 基于 Carbon 3.2.3。您不能将 Carbon 4.x p2 存储库中的功能安装到 Carbon 3.x，因为它们不兼容。C4 在一年后从 3.2.3 发布。如果您真的需要新的数据服务功能，我建议将 ESB 升级到[4.5.x](http://wso2.com/products/enterprise-service-bus/)。

# jquery - jQuery获取计算的CSS值

> ID：14349246
> 
> 赞同：4
> 
> 时间：2013-01-16T00:03:46.173
> 
> 标签：jquery, css, attr

我有一个循环，每次迭代都会将 margin-top 减少 182px。我想获取 margin-top 的值，以便告诉它何时停止运行，但是当我尝试在控制台中运行它时，它返回“未定义”请告知如何更改它以获得实际值。

这是我正在使用的，我正在使用 attr() 因为它需要获取的值是内联样式：

```
$marginTop = $('.emp-wrap').attr("style"); 
```

其余代码如下

```
// if statements to move carousel up
$carouselNum = $('.carousella').length;

$marginTop = $('.emp-wrap').attr("style");

if($carouselNum  > 1){
//     // function empMove, the '-=' allows the -margin-top to run every time. Without this it will set the margin-top to the same value every loop
    function empMove() { $('.emp-wrap').css('margin-top', '-=182')};

    setInterval(empMove, 20000);
}
else if($carousel < 1){
    // do something
}
else{
    // do something
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:05:38.870

试试这个：

```
$marginTop = $('.emp-wrap').css("margin-top"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:05:57.700

```
$marginTop = $('.emp-wrap').css("margin-top"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:12:44.133

使用以下

```
$('.emp-wrap').css("margin-top"); 
```

此外，您可以使用 parseInt 仅获取整数值

```
parseInt($(".testclass").css("margin-top")); 
```

见：http: [//jsfiddle.net/kEVq7/](http://jsfiddle.net/kEVq7/)

# asp.net-mvc-3 - 将单个值从视图传递到控制器的最佳方法

> ID：14349248
> 
> 赞同：0
> 
> 时间：2013-01-16T00:03:55.170
> 
> 标签：asp.net-mvc-3

我有一个发布单个值的表单，但我似乎无法将它发送给控制器。我已验证该值存在于表单中，但它以 null 形式到达控制器。这是表格帖子：

```
 <%Html.BeginForm("SaveRecord", "NewApplicant", FormMethod.Post, new { id = Model.PersonModel.ApplicantID } ); %>
                <%: Html.Hidden("NewId", Model.PersonModel.ApplicantID) %>
                <input type="submit" class="SKButton" value="Save" title="Save this new application as a unique record." />
            <% Html.EndForm(); %> 
```

这是控制器动作：

```
 public ActionResult SaveRecord(NewApplicantViewModel model)
    {

        int NewAppId = model.PersonModel.ApplicantID; 
```

我也试过：

```
 public ActionResult SaveRecord(int NewId)
    {

        model.PersonModel.ApplicantID = NewId; 
```

这些必须是一个简单的修复，我想在模型中传递 id，不想使用 ajax。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:06:27.817

尝试使用：

```
<%: Html.HiddenFor(model => model.PersonModel.ApplicantID) %> 
```

# sql - 电话数据库主键问题

> ID：14349252
> 
> 赞同：2
> 
> 时间：2013-01-16T00:04:14.703
> 
> 标签：sql, database, primary-key, composite-key

我正在设计一个数据库来保存手机、SIM 卡、手机-SIM 配对以及手机-SIM 配对历史。一部手机一次只能与一张 SIM 卡配对。

我的问题是试图考虑一个唯一标识电话-SIM 配对的主键。我目前有一个 IMEI 和 ICCID 的 *comp(ound|osite) 密钥，但这将依赖于用户不添加会破坏一个电话一个 SIM 规则的新条目。

我可以使用验证在设备-SIM 配对表上强制执行此规则，但这是不好的做法吗？

提前致谢。

*我这样说是因为我目前正在努力记住复合键和复合键之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:29:43.343

如果您想要在同一张表中的配对历史。然后身份主键将完成这项工作

毕竟我可以把我的sim卡从phone1移到phone2，然后再移回phone1。

这有点调皮，因为重新键入表格可能会将您带入另一个宇宙……有一个隐含的假设，即 pair_id 在时间维度上增加。可以通过对表进行 CRUD 访问的任何东西破坏的东西。

您可以添加一个日期时间 date_paired，但如果我很快交换我的模拟人生......两张桌子的好时机，我认为当前和历史。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T03:16:05.533

> 我的问题是试图考虑一个唯一标识电话-SIM 配对的主键。我目前有一个 IMEI 和 ICCID 的 *comp(ound|osite) 密钥，但这将依赖于用户不添加会破坏一个电话一个 SIM 规则的新条目。

好吧，您并没有说要求是一部手机对一张 SIM 卡。*您说，“一部手机一次*只能与一张 SIM 卡配对”。（强调补充。）

这对列 IMEI 和 ICCID*听起来*像是这个表的一个很好的候选键。（我相信你的话；我对手机和 SIM 卡了解不多。）如果你首先允许用户输入数据，你必须有一些业务流程——可能在应用程序代码中实现，或者SQL——允许更新，无论规则是“一部手机/一张 SIM”还是“一次一部手机/一张 SIM”。

为什么？这些值很难正确输入。

在放置*真正的*候选键*后*添加代理 ID 号没有任何问题。*在没有*放置*真正的*候选键的情况下添加代理 ID 号有很多错误。

# asp.net-web-api - Asp.net Web Api 的基本项目模板？

> ID：14349255
> 
> 赞同：25
> 
> 时间：2013-01-16T00:04:28.120
> 
> 标签：asp.net-web-api

我想知道是否有一个“基本的”asp.net web api 模板。我只看到一个“web api”项目，它带来了一些东西，不确定我是否需要所有这些东西。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-16T00:29:35.547

您可以：

1) 创建一个新的*MVC4 项目 > 选择 Web API 模板*- 但是，正如您所指出的，这会带来很多东西，包括 Modernizer、jQuery、Knockout 等

2) 创建一个新的*ASP.NET 空 Web 应用程序*并从 Nuget 安装 Web API 网络主机：

```
PM> Install-Package Microsoft.AspNet.WebApi 
```

然后，您将得到一个非常干净、基本的项目，其中仅包含必要的 DLL。

3) 如果您想自托管 Web API（不做 ASP.NET MVC4 项目），您可以创建一个*新的控制台应用程序*并从 Nuget 安装 Web API 自托管：

```
PM> Install-Package Microsoft.AspNet.WebApi.SelfHost 
```

这对于轻量级服务来说是完美的，但显然您不再托管在 IIS 中，因此还有其他发布/部署注意事项。您可以在此处阅读有关自托管的更多信息 -> [http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-30T06:36:15.267

对于**VS 2015**中的**Mvc 5**，我选择**空项目**模板并**检查 WebApi**部分。它给了我一个干净的项目，只安装了 WebApi 引用。

 ******[![在此处输入图像描述](../Images/9d945dc4c87774eca01fa495e589869d.png)](https://i.stack.imgur.com/z3ilB.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-27T17:33:20.483

我的建议是[Empty ASP.NET Web API Project Template](http://visualstudiogallery.msdn.microsoft.com/a989a149-4bc3-4292-ac8a-5101ee1722d7)，它是一个 VS 扩展。

[在这篇代码项目文章](http://www.codeproject.com/Articles/615805/Creating-a-Clean-Minimal-Footprint-ASP-NET-WebAPI)中有一个很好的演示。

我使用它没有任何问题，它确实比默认的 WebAPI 模板更轻。******

# pdo - pdo连接错误

> ID：14349257
> 
> 赞同：0
> 
> 时间：2013-01-16T00:04:35.407
> 
> 标签：pdo

```
<?php
$config['db'] = array (
'host'                  =>  'localhost'
'username'                  =>  'root'
'password'                  =>  ''  
'dbname'                    =>  'phplogin'
);

$db = new PDO("mysql:host={$config['db']['host']};dbname={$config['db']['dbname']}",
          $config['db']['username'], $config['db']['password']);

?> 
```

收到错误：“解析错误：语法错误，意外的 ''username'' (T_CONSTANT_ENCAPSED_STRING)，在第 4 行的 C:\webroot\wamp\www\index.php 中需要 ')'”

我的问题是：您能否*突出显示*或评论我必须插入信息的行，**例如**本地主机、数据库名称、表、根目录、“”等。此外，如果您看到需要进行的任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:39:23.307

当您收到错误时，您可以通过查看错误消息找到错误 T_CONSTANT_ENCAPSED_STRING 解析器令牌错误是由于意外引用而发生的，因此您所要做的就是查看您的代码以注意您没有逗号数组声明如 Johnny000 所述。您总是必须查看错误消息并解释其含义。在我看来，这就是编码 101。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:31:16.170

该错误是因为您忘记将数组值与`,`

这里是正确的代码

```
<?php
$config['db'] = array (
'host'                      =>  'YOURHOST',
'username'                  =>  'YOURUSERNAME',
'password'                  =>  'YOURPASSWORD',
'dbname'                    =>  'YOURTABLE'
);

$db = new PDO("mysql:host={$config['db']['host']};dbname={$config['db']['dbname']}",
          $config['db']['username'], $config['db']['password']);

?> 
```

# sql - 应该将主键聚集索引列添加到非聚集索引中吗？

> ID：14349260
> 
> 赞同：1
> 
> 时间：2013-01-16T00:04:39.073
> 
> 标签：sql, sql-server, sql-server-2008, indexing

好的，这是一个非聚集索引功能

![在此处输入图像描述](../Images/ef039d9d100b6065a662768aa6142706.png)

现在您可以看到 Id 是作为主键和聚集的身份列。我可以将它包含到索引列中并将索引标记为唯一，或者不将其包含到索引本身并将其添加为包含列。

应该选择哪一个，为什么？谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T00:09:15.553

聚簇键会自动包含在非聚簇索引中，无论您是否显式包含它。换句话说 - 不要包含它，除非您需要使用一个谓词来过滤聚集键，然后是几个其他列（按此顺序） - 在这种情况下，强制它作为第一列可能是有意义的，否则它将作为最后一列物理存储。

# c# - “else if()”与 C# 中的多个“if()”

> ID：14349261
> 
> 赞同：21
> 
> 时间：2013-01-16T00:04:39.590
> 
> 标签：c#

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-16T00:05:18.820

如果`DoSomething`设置`x`为 2，那么它们会有所不同。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-16T00:27:06.483

```
[STAThread]
public static void Main()
{
    Int32 x = 1;

    if (x == 1)
        Console.WriteLine("1");
    else if (x == 2)
        Console.WriteLine("2");
} 
```

结果是：

```
.method public hidebysig static void Main() cil managed
{
    .custom instance void [mscorlib]System.STAThreadAttribute::.ctor()
    .entrypoint
    .maxstack 2
    .locals init (
        [0] int32 x)
    L_0000: ldc.i4.1 
    L_0001: stloc.0 
    L_0002: ldloc.0 
    L_0003: ldc.i4.1 
    L_0004: bne.un.s L_0011
    L_0006: ldstr "1"
    L_000b: call void [mscorlib]System.Console::WriteLine(string)
    L_0010: ret 
    L_0011: ldloc.0 
    L_0012: ldc.i4.2 
    L_0013: bne.un.s L_001f
    L_0015: ldstr "2"
    L_001a: call void [mscorlib]System.Console::WriteLine(string)
    L_001f: ret 
} 
```

尽管：

```
[STAThread]
public static void Main()
{
    Int32 x = 1;

    if (x == 1)
        Console.WriteLine("1");

    if (x == 2)
        Console.WriteLine("2");
} 
```

结果是：

```
.method public hidebysig static void Main() cil managed
{
    .custom instance void [mscorlib]System.STAThreadAttribute::.ctor()
    .entrypoint
    .maxstack 2
    .locals init (
        [0] int32 x)
    L_0000: ldc.i4.1 
    L_0001: stloc.0 
    L_0002: ldloc.0 
    L_0003: ldc.i4.1 
    L_0004: bne.un.s L_0010
    L_0006: ldstr "1"
    L_000b: call void [mscorlib]System.Console::WriteLine(string)
    L_0010: ldloc.0 
    L_0011: ldc.i4.2 
    L_0012: bne.un.s L_001e
    L_0014: ldstr "2"
    L_0019: call void [mscorlib]System.Console::WriteLine(string)
    L_001e: ret 
} 
```

IL 代码有点不同，主要区别如下：

```
Approach One: L_0004: bne.un.s L_0011 -> L_0011: ldloc.0 with L_0010: ret 
Approach Two: L_0004: bne.un.s L_0010 -> L_0010: ldloc.0 with no ret in between 
```

当您使用 else 语句时，与第一种方法一样，只有满足条件的第一个分支才会运行。另一方面......使用第二种方法处理每张支票，并且每张符合条件的支票都将被遵循和处理。这是主要的区别。

这就是为什么在第一种方法的 IL 代码中，您在调用 Console.WriteLine 之后有一个“ret”指令，而在第二种方法中它不存在。在第一种情况下，可以在通过检查后立即退出该方法，因为`x`将不再执行检查...在第二种方法中，您必须依次遵循所有这些方法，这就是为什么 ret 只出现在末尾方法，没有“捷径”到最后。

对于我的测试，我使用了一个`Console.WriteLine()`调用...但可以肯定的是，如果`DoSomething()`涉及`x`变量的值更改，则差异在代码行为中绝对更重要。假设我们将 x 作为私有静态成员（初始值始终为 1）而不是局部变量，并且：

```
public void DoSomething()
{
    ++m_X;
} 
```

在第一种方法中，即使由于第一次检查而在调用`m_X`后假定值为 2 `DoSomething()`，else 也会使方法退出并且`DoSomethingElse()`永远不会被调用。在第二种方法中，两种方法都将被调用。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-16T01:52:06.137

请注意，C# 中没有`else if`构造。您的第一个代码示例与以下内容完全相同：

```
if (x == 1)
    DoSomething();
else 
{
    if (x == 2)
        DoSomethingElse();
} 
```

由于 中只有一条语句`else`，大括号可以省略，为了提高可读性，`if`通常与前面的语句写在同一行`else`。编写多个“ `else if`”语句相当于进一步嵌套：

```
if (x == 1)
    DoSomething();
else 
{
    if (x == 2)
        DoSomethingElse();
    else
    {
        if (x == 3)
            YetSomethingElse();
        else
        {
            if (x == 4)
               ReallyDifferent();
        }
    }
} 
```

上式可以写成：

```
if (x == 1)
    DoSomething();
else if (x == 2)
    DoSomethingElse();
else if (x == 3)
    YetSomethingElse();
else if (x == 4)
    ReallyDifferent(); 
```

从这里，你可以看到链接“ `else if`”并且`if`可以产生不同的结果。在“ `else if`”的情况下，将执行满足条件的第一个分支，之后不再进行进一步检查。在链式`if`语句的情况下，执行所有满足其条件的分支。

这里的主要区别是分支的执行导致后续条件变为真。例如：

```
 var x = 1;

   if (x == 1)
       x = 2;
   else if (x == 2)
       x = 3; 
```

VS

```
 var x = 1;

   if (x == 1)
       x = 2;

   if (x == 2)
       x = 3; 
```

在第一种情况下，`x == 2`，而在第二种情况下`x == 3`。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-09-25T10:48:18.733

*当你这样编码时*

```
// approach two
if (x == 1)
    DoSomething();
if (x == 2)
    DoSomethingElse(); 
```

**每次条件检查。**

*但是当你这样编码时*

```
if (x == 1)
    DoSomething();
else if (x == 2)
    DoSomethingElse(); 
```

**如果第一个条件为真，则它不会检查下一个 else if 条件，从而减少不必要的编译**。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-16T00:06:45.623

使用`else`语句时，只会运行其中一个分支（即第一个，满足`if`条件）。`if`甚至不会估计所有其他条件：

```
// approach one
int x = 1;
if (x == 1)
    DoSomething(); //only this will be run, even if `DoSomething` changes `x` to 2
else if (x == 2)
    DoSomethingElse(); 
```

而当您不使用它时，它们中的每一个都可能会运行（取决于每个条件），即它们中的每一个都被一一估计：

```
// approach two
int x = 1;
if (x == 1)
    DoSomething();//this is run, as `x` == 1
if (x == 2)
    DoSomethingElse();//if `DoSomething` changes `x` to 2, this is run as well 
```

因此，IL 可能会有所不同。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-08-08T20:05:12.923

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-16T00:15:47.830

没有关于性能的答案？

所以如果 x=1 那么你在第一种情况下只做一次检查，在第二种情况下你做 2 次检查，所以第一种情况更快。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-16T00:06:17.927

如果 x 发生变化（在 Do Seomthing 和 DoSomethingElse 中），那么第一个语句将只执行一个语句。在第二个示例中，将检查每个语句（当然，除非编译器将其优化为跳转表以进行数字比较）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-01-16T00:44:06.680

当你使用 multiple`else if`时，它​​会执行满足的条件。如果还有剩余的情况，它们将被跳过。当您有多个`if`时，它将检查每个语句。所以这更像是一个性能问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-01-16T00:06:40.400

如果`x`被多个线程修改，则可能`DoSomething()`会`DoSomethingElse()`使用第二种方法调用

# c# - 许多表的多个外键

> ID：14349262
> 
> 赞同：1
> 
> 时间：2013-01-16T00:04:40.337
> 
> 标签：c#, entity-framework

我有以下课程：

```
public class Project
{
    public int ID { get; set; }
    public string Name { get; set; }
    ...
    // Navigation
    public virtual IEnumerable<Task> Tasks { get; set; }
    //public virtual IEnumerable<Message> Messages { get; set; } // ???
}

public class Task
{
    public int ID { get; set; }
    public int ProjectID { get; set; }
    public string Name { get; set; }
    ...
    // Navigation
    //public virtual IEnumerable<Message> Messages { get; set; } // ???
}

public class Message
{
    public int ID { get; set; }
    public string Comment { get; set; }
    ...
    // Foreign Keys ??
} 
```

基本上：

*   **项目**将有许多**任务**
*   **项目**会有很多**Message**
*   **任务**会有很多**消息**
*   每条**消息**都属于一个**项目**或**任务**

我将如何编写数据库以及编写 EF 代码来实现这一点？我希望能够使用 Linq 语法，例如。`List<Message> messages = project.Messages.ToList();`

我找到了这种[替代设计](https://stackoverflow.com/a/4050811/459021)，但不确定导航属性的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:59:18.123

我认为你几乎在那里。你能试试这个吗？

```
public class Project
{
    public int ID { get; set; }
    public string Name { get; set; }
    ...
    // Navigation
    public virtual IEnumerable<Task> Tasks { get; set; }
    public virtual IEnumerable<Message> Messages { get; set; }
}

public class Task
{
    public int ID { get; set; }
    public int ProjectID { get; set; }
    public string Name { get; set; }
    ...
    // Navigation
    public virtual IEnumerable<Message> Messages { get; set; }
}

public class Message
{
    public int ID { get; set; }
    public string Comment { get; set; }
    ...
    public int? ProjectId {get;set;}
    public int? TaskId {get;set;}

    public virtual Project {get;set;}
    public virtual Task {get;set;}
} 
```

# javascript - 创建一个 chrome 扩展，它将页面上突出显示的文本插入到 popup.html 中的文本区域中

> ID：14349263
> 
> 赞同：10
> 
> 时间：2013-01-16T00:04:45.157
> 
> 标签：javascript, google-chrome-extension, selection

我花了几个小时在网上搜索解决方案。我想做的是获取页面上突出显示的文本并将其传输到 chrome 扩展的 popup.html 中的文本区域。我想知道是否有人可以向我提供可以执行此操作的扩展的建议源代码。

这是我看过的最相关的线程，我认为最有帮助 - 查询是相似的。[弹出窗口中获取选定文本的按钮 - Chrome 扩展](https://stackoverflow.com/questions/3767429/button-in-popup-that-get-selected-text-chrome-extension)

我尝试复制代码并将其作为扩展程序运行，它没有获得突出显示的文本。想知道是否有人有任何建议以及如何解决这个问题。非常感谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-16T04:37:51.343

  就像您链接的问题的答案一样，您将需要使用[Message Passing](http://developer.chrome.com/extensions/messaging.html)和[Content Scripts](http://developer.chrome.com/extensions/content_scripts.html)。不过，该代码已有 2 年多的历史了，并且使用了折旧的方法，例如`onRequest`和`getSelected`. 一些简单的修改应该足以将其更新为新的 api。

弹出窗口.html

```
<!DOCTYPE html> 
<html>
  <head>
    <script src="jquery-1.8.3.min.js"></script>
    <script src="popup.js"></script>
    <style>
      body { width: 300px; }
      textarea { width: 250px; height: 100px;}
    </style>
  </head>
  <body>
    <textarea id="text"> </textarea>
    <button id="paste">Paste Selection</button>
  </body>
</html> 
```

popup.js（以免有任何内联代码）

```
$(function(){
  $('#paste').click(function(){pasteSelection();});
});
function pasteSelection() {
  chrome.tabs.query({active:true, windowId: chrome.windows.WINDOW_ID_CURRENT}, 
  function(tab) {
    chrome.tabs.sendMessage(tab[0].id, {method: "getSelection"}, 
    function(response){
      var text = document.getElementById('text'); 
      text.innerHTML = response.data;
    });
  });
} 
```

选择.js

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
  if (request.method == "getSelection")
    sendResponse({data: window.getSelection().toString()});
  else
    sendResponse({}); // snub them.
}); 
```

清单.json

```
{
 "name": "Selected Text",
 "version": "0.1",
 "description": "Selected Text",
 "manifest_version": 2,
 "browser_action": {
   "default_title": "Selected Text",
   "default_icon": "online.png",
   "default_popup": "popup.html" 
 },
 "permissions": [
   "tabs",
   "<all_urls>"
 ],
 "content_scripts": [
   {
     "matches": ["<all_urls>"],
     "js": ["selection.js"],
     "run_at": "document_start",
     "all_frames": true
   }
 ]
} 
```

[这](https://dl.dropbox.com/u/12636410/blah.7z)是源文件的链接。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-16T03:14:28.197

popup.js

```
chrome.tabs.executeScript( {
  code: "window.getSelection().toString();"
}, function(selection) {
  alert(selection[0]);
}); 
```

清单.json

```
"permissions": [
    "activeTab",
], 
```

看看这个简单的扩展[https://github.com/kelly-apollo/zdic](https://github.com/kelly-apollo/zdic)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-18T20:46:24.453

参考下面的 BeardFist 答案

此外，在 popup.html 中，您可以使用 CDN 版本：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

并在清单文件中添加这一行：

```
 "content_security_policy": "script-src 'self' 'unsafe-eval' https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js; object-src 'self'", 
```

# javascript - 如何将文本框（不是文本框的值）传递给 Javascript 验证函数

> ID：14349264
> 
> 赞同：1
> 
> 时间：2013-01-16T00:04:49.437
> 
> 标签：javascript, html, function, validation, textbox

我有一个 HTML 格式的注册表单。我想使用 JavaScript 验证它。我想将文本框（而不是值）传递给 JavaScript，这样我就不必多次编写`document.getElementById("Textname").value`。我希望我的 JavaScript 函数获取 HTML 活动控件，或者将控件传递给函数。

我的 HTML 代码：

```
<i>table>
    <tr><td>
     First Name</td>><td><input type="text" id="fname" runat="server"  /></td></tr>
    <tr><td>last Name</td>><td><input type="text" id="lname" runat="server"  /></td></tr>
    <tr><td>Phone</td>><td><input type="text" id="phone" runat="server" /></td></tr>
    <tr><td>email</td>><td><input type="text" id="email" runat="server" /></td></tr>
    <tr><td>password</td>><td><input type="password" id="pass" runat="server" /></td></tr>
    <tr><td>image</td>><td><input type="file" id="image" runat="server" /></td></tr>
    <tr><td rowspan="2">Sex</td>><td>Male<input type="radio" id="male"  runat="server" value="male" /></td></tr>
    <tr><td colspan=".5">female<input type="radio" runat="server" id="female" /></td></tr>
    <tr><td>submit</td>><td><input type="submit" id="submit" runat="server"  value="SUBMIT"/></td></tr>
    <tr><td>reset</td>><td><input type="reset" id="res" runat="server" /></td></tr>
    <tr><td><button id="save" runat="server" value="save" ></button></td></tr>
    </table><i/> 
```

JavaScript 代码：

```
function cont(textbox) 
{

    var name=document.getelementbyId(textbox).value;
    var illegalChars = /[\(\)\<\>\,\;\:\\\"\[\]]/;
    var regletter = /[a-zA-z]/;
    if (uname == "")
    {
        alert("please enter ");
        document.getelementbyid(textbox)style.background = "grey";
        document.getElementById(textbox).focus;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:10:48.497

您可以将其存储到 var 中，这样您就不必`document.getElementById`多次使用。

```
var element = document.getElementById(textbox);
var name = element.value;
var illegalChars = /[\(\)\<\>\,\;\:\\\"\[\]]/;
var regletter = /[a-zA-z]/;
if (uname == "") // are you sure it's `uname` and not `name` ?
 {
    alert("please enter ");
    element.background = "grey";
    element.focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:17:00.700

在不检查您提供的代码的有效性的情况下，解决方案相当简单：

```
function cont(textbox) 
{

    var name = textbox.value;
    var illegalChars = /[\(\)\<\>\,\;\:\\\"\[\]]/;
    var regletter = /[a-zA-z]/;
    if (uname == "") {
        alert("please enter ");
        textbox.style.background = "grey";
        textbox.focus;
    }
    // ...
}

// execute the function
cont(document.getElementById('Textname')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:24:18.100

得到了答案。为避免使用重复代码，请使用**“this”。'this'**指的是当前控件。下面是一个使用它的小例子。

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript" >
        function chk(a) { 

            alert(a.value);

        }

    </script>
    <title></title>
</head>
<body>
    <form id="f1" method="post" action="Default.aspx" >
    <input type="text" id="num1"  onblur="chk(this)"  />
    </form>
</body>
</html> 
```

# c++ - 在调试会话期间获取有关匿名异常的数据

> ID：14349266
> 
> 赞同：1
> 
> 时间：2013-01-16T00:04:58.187
> 
> 标签：c++, visual-studio

所以，这就是我遇到的问题。

```
void * something = ???;
void (*fun)(void*) = ???;

try
{
    fun(something);
}
catch (...)
{
    assert(false);
} 
```

我的任务是确定断言被解雇的原因。不幸的是，我无法更改上面的代码。此外，这是在多线程环境中，并且在程序关闭期间。执行 try/catch 的部分在现实世界的代码中非常有目的地解锁。当我尝试单步执行程序时，它突然消失在我身上……我什至无法进行正确的 fun() 调用，更不用说进入它了。

我唯一的办法似乎是在 catch(...) 中放置一个断点并检查那里的任何内容。不幸的是，这并没有告诉我什么，因为我不知道真正的乐趣是什么，也不知道什么是什么。

在这一点上，我唯一的希望是我能以某种方式让 Visual Studio 调试器告诉我是什么`...`，如果我能找出它被抛出的位置，我会非常高兴。它至少不在自动列表中……可能在其他地方吗？有什么办法可以让我在这里取得进步还是我搞砸了？我感觉被搞砸了...

====

更新：有一个外部程序在没有及时关闭时杀死了我的。这就是为什么踩踏使它消失的原因。与线程无关。

一旦我意识到我能够按照建议打开异常。不幸的是，没有地方可以抛出一个......这是访问冲突。被存储的函数会以某种方式受到冲击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:17:31.853

尝试使用在引发异常时中断执行的 Visual Studio 功能。转到 Visual Studio 主菜单 Debug -> Exceptions 并勾选所有异常。

这样，当你的异常被抛出时，Visual Studio 就会停止，你就会知道它是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:17:18.267

您可以直接进入菜单：**Debug|Exceptions**并标记您怀疑抛出的异常吗？如果您可以步进/附加到应该可能的正在运行的程序。这将导致调试器在抛出特定异常时中断。

我通常在 Debug|Exceptions 对话框中标记整个子树“ **Win32 Exceptions ”。**我假设您的程序不会抛出并默默地忽略其他（Win32）异常（在这种情况下，您会有很多“错误”警报）。

我希望这会有所帮助。

# javascript - Javascript 在 IE 中不起作用，在其他一切中都可以正常工作

> ID：14349268
> 
> 赞同：0
> 
> 时间：2013-01-16T00:05:16.060
> 
> 标签：javascript, toggle

我是 JavaScript 新手，并尝试整理一个**常见问题解答部分**，将显示的答案数量限制为一次仅 1 个。JavaScript 在这里（也位于[http://indulge.cc/indulge.js](http://indulge.cc/indulge.js)）。对于整个直播网站，请查看[http://www.indulge.cc](http://www.indulge.cc)。您会在 FF、Chrome、Safari 等中看到常见问题解答位有效，但在 IE 中不起作用。不知道我错过了什么。句法？

```
function showonlyone(shownanswer)
{
    var faqswitcher = document.getElementsByTagName('div');
    for (var x=0; x<faqswitcher.length; x++)
    {
        name = faqswitcher[x].getAttribute('class');
        if (name == 'faqswitcher')
        {
            if (faqswitcher[x].id == shownanswer)
            {
                if (faqswitcher[x].style.display == 'block')
                {
                    faqswitcher[x].style.display = 'none';
                }
                else 
                {
                    faqswitcher[x].style.display = 'block';
                }
            }
            else 
            {
                faqswitcher[x].style.display = 'none';
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:46:39.843

通过查询 className 属性来获取类属性，而不是在属性之后。

名称 = faqswitcher[x].className;

它在其他浏览器中也能正常工作，而旧版 IE 需要它。

# actionscript-3 - AS3 代码 - 声音不播放

> ID：14349269
> 
> 赞同：0
> 
> 时间：2013-01-16T00:05:16.373
> 
> 标签：actionscript-3, flash, audio, mp3

我正在尝试使用外部 mp3 文件在 as3 代码中播放声音。

所以这是我正在使用的代码：

```
 private function playSound():void
    {
        trace("loading sound");
        var mySound:Sound = new Sound();
        mySound.addEventListener(IOErrorEvent.IO_ERROR, handleIOError);
        mySound.load(new URLRequest("Menu.mp3"));
        mySound.play();
        trace("playing sound");
    }

    private function handleIOError(evt:IOErrorEvent):void
    {
        //handle error if needed
    } 
```

音乐根本不播放。

出现“加载声音”和“播放声音”的痕迹，因此代码正在运行。

mp3 文件 Menu.mp3 与用于运行项目的 .fla 文件位于同一文件夹中。这是正确的目录吗？我试着移动它，但仍然无法播放声音。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:59:22.157

我有一些建议可能会有所帮助：

1.  将 mySound 声明为类级别属性。垃圾收集器可能会过早地处理变量，因为它是本地的。

2.  mySound.play() 返回一个 SoundChannel 对象。尝试将其存储在类级别属性中。

3.  在加载声音之前，为 Event.COMPLETE 的声音添加一个事件侦听器。尝试在此事件发生后播放声音。实际上，您可能正试图在声音加载之前播放它。

```
    私有变量 mySound：声音；
    私人 var mySoundChannel:SoundChannel;

    私有函数 playSound():void
    {
        我的声音 = 新声音（）；
        mySound.addEventListener(IOErrorEvent.IO_ERROR, handleIOError);
        mySound.addEventListener(Event.COMPLETE, handleLoadCompletion);
        mySound.load(new URLRequest("Menu.mp3"));
    }

    私有函数handleLoadCompletion(evt:Event):void
    {
        mySoundChannel = mySound.play();
    }

    私有函数句柄IOError(evt:IOErrorEvent):void
    {
        //如果需要，处理错误
    }

```

**编辑：**
查看[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#load%28%29)后，我认为建议 3 没有必要。

# android - 配置 ejabberd 以用作游戏服务器

> ID：14349273
> 
> 赞同：3
> 
> 时间：2013-01-16T00:05:18.993
> 
> 标签：android, xmpp, ejabberd, smack

我已经设置了一个我只想用作游戏服务器的 ejabberd 服务器。

**关于安全性，我需要注意哪些事项**以及需要哪些步骤才能开始将其用作游戏服务器？当然，我只想启用**本地用户之间的通信，可能无法从其他服务器与 JID 进行通信**。

如何禁用 IRC 和服务器到服务器等功能？这必须在 中完成，对`ejabberd.cfg`吧？我是否必须将这些段落注释掉或填写空括号以供他们选择？

我定义了以下访问控制列表：

```
[{acl, admin, {user, "admin", "localhost"}},
 {acl, admin, {user, "admin", "***.***.***.***"}},
 {acl, local, {server, "localhost"}},
 {acl, local, {server, "***.***.***.***"}}]. 
```

关于访问权限，以下定义是否可以，或者我应该禁用除 PubSub 之外的所有通信渠道？

```
[{access, c2s, [{deny, blocked}, {allow, all}]},
 {access, pubsub_createnode, [{allow, all}]},
 {access, s2s_shaper, [{fast, all}]},
 {access, c2s_shaper, [{none, admin}, {normal, all}]},
 {access, muc, [{allow, all}]},
 {access, max_user_sessions, [{2, all}]},
 {access, configure, [{allow, admin}]},
 {access, muc_admin, [{allow, admin}]},
 {access, max_user_offline_messages,
  [{5000, admin}, {100, all}]},
 {access, announce, [{allow, admin}]},
 {access, register, [{deny, all}]},
 {access, local, [{allow, local}]}]. 
```

之后，我可以通过客户端库（例如`smack`/`asmack`还是我需要 BOSH、HTTP 轮询等）访问服务器？XMPP 端口通常在移动设备上打开吗？

**上面这些安全考虑对我来说是最重要的，因为我不想运行有潜在安全风险的游戏服务器。**但除此之外，我还不能真正让 PubSub 运行。

在客户端，在 Android 应用程序中，我使用 asmack 库和以下代码来启动新的 XMPP 会话并发送消息：

```
private void startXMPP() {
    new Thread(new Runnable() {
        public void run() {
            try {
                org.jivesoftware.smackx.ConfigureProviderManager.configureProviderManager();
                ConnectionConfiguration xmppConfig = new ConnectionConfiguration("123.123.123.123");
                xmppConfig.setDebuggerEnabled(true);
                if (Build.VERSION.SDK_INT >= 14) {
                    xmppConfig.setTruststoreType("AndroidCAStore");
                    xmppConfig.setTruststorePassword(null);
                    xmppConfig.setTruststorePath(null);
                    xmppConfig.setSendPresence(true);
                    xmppConfig.setSecurityMode(SecurityMode.disabled);
                }
                else {
                    xmppConfig.setTruststoreType("BKS");
                    String path = System.getProperty("javax.net.ssl.trustStore");
                    if (path == null) {
                        path = "/system/etc/security/cacerts.bks";
                    }
                    xmppConfig.setTruststorePath(path);
                }
                SASLAuthentication.supportSASLMechanism("PLAIN", 0);
                XMPPConnection xmpp = new XMPPConnection(xmppConfig);
                xmpp.connect();
                xmpp.login("john", "password");
                PubSubManager xmppPubsub = new PubSubManager(xmpp);
                ConfigureForm form = new ConfigureForm(FormType.submit);
                form.setPersistentItems(false);
                form.setDeliverPayloads(true);
                form.setAccessModel(AccessModel.open);
                form.setPublishModel(PublishModel.open);
                form.setSubscribe(true);
                LeafNode xmppNode;                  
                try {
                    xmppNode = (LeafNode) xmppPubsub.createNode("TESTNODE", form);
                }
                catch (XMPPException e) {
                    xmppNode = (LeafNode) xmppPubsub.getNode("TESTNODE");
                }
                SimplePayload payload = new SimplePayload("book", "pubsub:test:book", "");
                xmppNode.addItemEventListener(new ItemEventCoordinator<Item>());
                xmppNode.subscribe("john@123.123.123.123");
                xmppNode.publish(new PayloadItem<SimplePayload>(payload));
            }
            catch (Exception e) {
                System.out.println("XMPP Connection failed!");
                e.printStackTrace();
            }
        }
    }).start();
} 
```

不幸的是，这不起作用。你明白为什么吗？由于我启用了调试，我可以在 LogCat 中看到以下错误消息：

```
<iq from='pubsub.123.123.123.123' to='john@123.123.123.123/Smack' id='Jf****6' type='result'><pubsub xmlns='http://jabber.org/protocol/pubsub'><subscription jid='john@123.123.123.123' subscription='subscribed' subid='53******B2'/></pubsub></iq>

<iq id="Je4Mf-7" to="pubsub.123.123.123.123" type="set"><pubsub xmlns="http://jabber.org/protocol/pubsub"><publish node='TESTNODE'><item></item></publish></pubsub></iq>

<iq from='pubsub.123.123.123.123' to='john@123.123.123.123/Smack' type='error' id='Jf****7'><pubsub xmlns='http://jabber.org/protocol/pubsub'><publish node='TESTNODE'><item/></publish></pubsub><error code='400' type='modify'><bad-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/><payload-required xmlns='http://jabber.org/protocol/pubsub#errors'/></error></iq> 
```

**编辑：**

我没有`home/server/username/whatever`按照文档中的描述将 PubSub 节点名称设置为。但至少节点的创建是有效的，不是吗？我不想要这种格式的名称，因为我需要诸如“game234234”之类的名称，以便所有参与用户都可以加入该 PubSub 节点。

此外，似乎有尝试联系`pubsub.***.***.***.***`不存在，因为我还没有创建 subdomain `pubsub`。这是问题的原因吗？PubSub 是否只能通过该子域使用？我不知道为该子域设置什么，并且宁愿仅在没有子域的 IP 上使用 PubSub。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:26:30.330

由于您尚未指定实际有效负载，因此您的**publish()命令出现错误。**理想情况下，由于您创建了无效的有效负载，因此应该引发异常，但这似乎是您从服务器获得的错误的来源。

改变

```
SimplePayload payload = new SimplePayload("book", "pubsub:test:book", ""); 
```

至：

```
SimplePayload payload = new SimplePayload("book", "pubsub:test:book", "<book xmlns='pubsub:test:book'>Romeo and Juliet</book>"); 
```

它应该成功发布。

现在还有几个其他问题需要解决。

*   您正在 run 方法中创建连接，该方法在**publish()**之后结束，因此您的连接超出范围并符合 GC 条件。

*   在创建之前尝试做一个**getNode()**。按照您当前的顺序，在您的代码第一次运行后，您将始终遇到异常情况。您应该先简单地执行**getNode()**，然后在引发异常时创建一个，或者您可以通过先执行**discoverNodes()**来确定节点是否存在来完全避免异常。

至于您关于**pubsub**子域的观点。这是许多（可能是所有）XMPP 服务器（包括 ejabberd）中 pubsub 的常用子域。您不必创建它，因为 pubsub 模块已经这样做了。它确实已经存在，因为您已经收到了它的回复。

# android - 按钮单击时显示 ListView

> ID：14349275
> 
> 赞同：0
> 
> 时间：2013-01-16T00:05:28.543
> 
> 标签：android, mysql, button, android-intent, android-listview

我是android新手，希望有人可以在这里帮助我。我有一个活动学院和一个按钮。

这是我的 XML 布局browse_faculty：

```
<Button
    android:onClick="searchFSTEHandler"
    android:id="@+id/bFSTE"
    android:layout_width="220dp"
    android:layout_height="80dp"
    android:layout_alignLeft="@+id/bFBE"
    android:layout_below="@+id/bFBE"
    android:layout_marginTop="20dp"
    android:text="@string/fste" /> 
```

这是我的显示按钮的教师活动：我使用 Intent 来查看 ListView

```
public class Faculty extends Activity{

    @Override
    protected void onCreate(Bundle BrowseFaculty) {
        // TODO Auto-generated method stub
        super.onCreate(BrowseFaculty);
        setContentView(R.layout.browse_faculty);
    }

    //on the XML,this is the "searchFSTEHandler" i want to use to show ListView
    public void searchFSTEHandler(View target){
        Intent courseList = new Intent(this, HttpActivity.class);
        startActivity(courseList);
    }
} 
```

下面是“HttpActivity”类，是显示我的 ListView 的类。该类读取一个 php 文件，该文件从 MySQL 服务器获取数据并转换为 JSON 数据，然后将其解析为数组列表。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.ListActivity;
import android.widget.ArrayAdapter;

public class HttpActivity extends ListActivity {

public String f1 = "FSTE";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.faculty_course);

    new getHttp().execute();

    getHttp test =new getHttp();

    String strJsonData = test.doInBackground(f1);

    // Convert String JSON data to Java class
    ArrayList<Courses> arrayCourse= test.parseJsonData(strJsonData);

    //Create an ArrayAdapter which shows the ArrayList data
    this.setListAdapter(new ArrayAdapter<Courses>(this,android.R.layout.simple_list_item_1,arrayCourse));

}

private class getHttp extends AsyncTask<String, Void, String> {

  public getHttp() { 

  }

  @Override
    protected String doInBackground(String... faculty) {

    InputStream is = null;
    try {
        URL url = new URL("http://10.0.2.2/sqlWebService.php?faculty=FSTE");
        URLConnection con = url.openConnection();
        con.setConnectTimeout(10000);
        con.setReadTimeout(10000);
        is = con.getInputStream();

        BufferedReader br = new BufferedReader(
                new InputStreamReader(is));
        StringBuffer sb = new StringBuffer();
        String str;
        while ((str = br.readLine()) != null) {
            sb.append(str);
        }
        return sb.toString();

    } catch (IOException e) {
        e.printStackTrace();
        return "";

    } finally {
        try {
            if (is != null)
                is.close();
        } catch (IOException e2) {
            e2.printStackTrace();
        }
    }

}

//------------------------------------------------------  
  private ArrayList<Courses> parseJsonData(String strJson) {
        ArrayList<Courses> Course = new ArrayList<Courses>();

        try {
            // Generate JSONArray object by JSON String data
            JSONArray arr = new JSONArray(strJson);

            //from the JSONArray, get one element (row) of JSONData
            for (int i = 0; i < arr.length(); i++) {

                //Get JSON Object which is one element of the array
                JSONObject ob = arr.getJSONObject(i);

                Courses exam = new Courses();
                //get the value by key, and set to exam class
                exam.setCode(ob.optString("code"));

                //save exam class to exam array list
                Course.add(exam);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return Course;
    }

 }

 } 
```

当我单击按钮时应用程序崩溃并给出错误：“android.os.NetworkOnMainThreadException”

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:23:53.857

您遇到的问题是您尝试执行的网络操作不能也不应该在主 UI 线程上执行。这样做会导致**ANR (Android Not Responding)**，这正是您刚刚遇到的错误。您想要做的是将您的代码移动到一个单独的线程，或者移动到一个**`AsyncTask`**将在不同线程的后台执行此操作的**`doInBackground()`**方法，该方法无法访问您在主 UI 线程上的视图。例如，

```
private class ExampleOperation extends AsyncTask<String, Void, String> {

    public ExampleOperation() { //ctor }

    @Override
    protected void onPreExecute() {
        //things that you want to initialize and maybe show dialog to user.
    }

    @Override
    protected String doInBackground(String... params) {
       //this is where you perform that network related operation.  
    }

    @Override
    protected void onPostExecute(String result) {
       //this is where get the results from the network related task.
    }

    @Override
    protected void onProgressUpdate(Void... values) {
       //you can update your progressbar if any; otherwise omit method.
    }

} 
```

然后你所要做的就是在你想使用它的地方调用 AsyncTask：`new ExampleOperation().execute();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:09:04.240

您不能在主线程中进行 HTTP 调用，它们花费的时间太长并且会使 UI 无响应。您需要在 AsyncTask 中执行此操作。

# java - HttpServletRequest 属性和参数“丢失”？使用 1.6 JavaEE 规范？

> ID：14349285
> 
> 赞同：3
> 
> 时间：2013-01-16T00:06:30.100
> 
> 标签：java, servlets

我们的代码 - 没有改变，在 JavaEE1.4 中的行为与 1.6 中关于 HttpServletRequest 属性和参数的行为不同。然而，这种不同的行为并不（总是）一致。我们还使用 BEA Weblogic 10（与仍然有效的版本 8 相比）。

例如：在某些情况下，当我们执行“request.setAttribute(name, value)”并稍后执行“request.getAttribute(name)”时 - 请求中似乎根本没有这样的“名称” - 如如果我们从未设置它。我已经在 8v3 和 Ja11 中通过我们的 Eclipse 调试器运行了这个，我确实在 8v3 中看到了这个属性，但在 Ja11 中找不到它，这与代码的行为方式是一致的。

我们的代码至少在一种情况下始终失败，其中“name”和“value”的值都被定义为“public final static String;”。

我已经通过“request.getPathInfo”获取我需要的信息来围绕这个特定的实例行进行编码，但是我怀疑在我们的代码中的其他地方发生了相同或类似的问题 - 但在另一个这样的实例中，它完全是零星的在调试模式下（甚至在放置 Sysout 语句）时，我无法重新创建它，因此无法捕获问题所在的行。在另一种情况下，也是我无法明确捕获的情况-我相信即使该“名称”确实存在于带有数据的jsp表单上，也没有返回任何内容的request.getParameter(name)。

（请注意，我在某种程度上简化了我们的代码实际上的样子，因为我们有一个完整的 RequestContext 类，它实现了可序列化并封装了 HttpServlet 的一个请求周期的所有相关数据和方法 - 即 HttpServletRequest、HttpServletResponse、HttpSession、HttpServlet

无论如何，我听说 Java Servlet 规范在 1.6 中发生了一些变化——但它是否在某个地方明确说明了这些差异是什么，或者我真的必须在它旁边拉起 1.4 规范并自己进行比较？？？

诚然，我并不精通 HttpServeltRequest，但这段代码多年来一直运行良好 - 很难相信像 get/setAttribute 和 getParameter 这样基本/常见的东西会改变......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:12:24.560

Servlet 不是线程安全的，并且不会根据请求重新创建。所有请求都由同一个 servlet 对象提供服务。您是否将变量存储在 servlet 类的公共静态最终字段中？

# python - 在 matplotlib 图形窗口（带有 imshow）中，如何删除、隐藏或重新定义鼠标的显示位置？

> ID：14349289
> 
> 赞同：12
> 
> 时间：2013-01-16T00:06:43.040
> 
> 标签：python, matplotlib, ipython

我将 ipython 与 matplotlib 一起使用，并以这种方式显示图像：

（开始于：ipython --pylab）

```
figure()  
im = zeros([256,256]) #just a stand-in for my real images   
imshow(im) 
```

现在，当我将光标移到图像上时，我看到鼠标的位置显示在图形窗口的左下角。显示的数字是 x = 列号，y = 行号。这是非常面向情节而不是面向图像的。我可以修改显示的数字吗？

1.  我的第一选择是显示 x = 行号*标量，y = 列号*标量
2.  我的第二个选择是显示 x = 行号，y = 列号
3.  我的第三个选择是根本不显示鼠标位置的数字

我可以做这些事情吗？我什至不知道该叫什么鼠标悬停测试显示小部件。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T04:55:40.403

您可以通过简单地重新分配对象来在每个轴的基础上非常简单地执行此操作`format_coord`，`Axes`如[示例](http://matplotlib.org/examples/api/image_zcoord.html)中所示。

`format_coord`是任何接受 2 个参数 (x,y) 并返回一个字符串（然后显示在图上）的函数。

如果您不想显示，只需执行以下操作：

```
ax.format_coord = lambda x, y: '' 
```

如果您只想要行和列（不检查）

```
scale_val = 1
ax.format_coord = lambda x, y: 'r=%d,c=%d' % (scale_val * int(x + .5), 
                                             scale_val * int(y + .5)) 
```

如果你想在你制作的*每个*iimage 上执行此操作，只需定义包装函数

```
def imshow(img, scale_val=1, ax=None, *args, **kwargs):
    if ax is None:
         ax = plt.gca()
    im = ax.imshow(img, *args, **kwargs)
    ax.format_coord = lambda x, y: 'r=%d,c=%d' % (scale_val * int(x + .5), 
                                             scale_val * int(y + .5))
    ax.figure.canvas.draw()
    return im 
```

在没有太多测试的情况下，我认为应该或多或少地替代`plt.imshow`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T01:46:55.567

是的你可以。但这比你想象的要难。

您看到的鼠标跟踪标签是通过调用 matplotlib.axes.Axes.format_coord 生成的，以响应鼠标跟踪。您必须创建自己的 Axes 类（覆盖 format_coord 以执行您希望它执行的操作），然后指示 matplotlib 使用它来代替默认值。

具体来说：

### 制作自己的 Axes 子类

```
from matplotlib.axes import Axes
class MyRectilinearAxes(Axes):
    name = 'MyRectilinearAxes'
    def format_coord(self, x, y):
        # Massage your data here -- good place for scalar multiplication
        if x is None:
            xs = '???'
        else:
            xs = self.format_xdata(x * .5)
        if y is None:
            ys = '???'
        else:
            ys = self.format_ydata(y * .5)
        # Format your label here -- I transposed x and y labels
        return 'x=%s y=%s' % (ys, xs) 
```

### 注册您的 Axes 子类

```
from matplotlib.projections import projection_registry
projection_registry.register(MyRectilinearAxes) 
```

### 创建一个图形并使用您的自定义轴

```
figure()
subplot(111, projection="MyRectilinearAxes") 
```

### 像以前一样绘制数据

```
im = zeros([256,256]) #just a stand-in for my real images
imshow(im) 
```

# sql - 转换为 ACCDB 后，Access 2013 链接到 SQL 表失败

> ID：14349299
> 
> 赞同：1
> 
> 时间：2013-01-16T00:07:46.967
> 
> 标签：sql, ms-access

我有一个旧的 Access dB，目前是 2000 - 2003 .MDB 格式。转换为 .ACCDB 后，以下代码无法附加 SQL 服务器表。通过代码重新附加 SQL 表时，我收到以下错误：**对象无效或不再设置。**它在**cat.Tables.Append tbl**行上失败。在 Access 2013 中运行 .MDB 格式 dB 可以正常工作，但在转换为 2007 格式后，它会失败。我知道我可以将其保留为 MDB 文件，但我想进行转换以避免将来出现问题。我在没有帮助的情况下尝试了不同的连接字符串设置。

缩写代码：

```
Dim tbl As New ADOX.Table, cat As New ADOX.Catalog
Dim cnn As New ADODB.Connection
Dim ProviderString As String

Set cat.ActiveConnection = CurrentProject.Connection    
ProviderString = "ODBC;" & _
    "Provider=SQLOLEDB;" & _
    "Driver=SQL Server;" & _
    "Server=" & sServerName & ";" & _
    "database=" & sDatabaseName & ";" & _
    "UID=" & gbldbLogin & ";" & _
    "PWD=" & gbldbPassword

    TableName = "MyTableName"

    DoCmd.DeleteObject acTable, TableName

    tbl.Name = TableName
    Set tbl.ParentCatalog = cat
    tbl.Properties("Jet OLEDB:Link Provider String") = ProviderString
    tbl.Properties("Jet OLEDB:Remote Table Name") = TableName
    tbl.Properties("Jet OLEDB:Create Link") = True
    tbl.Properties("Jet OLEDB:Cache Link Name/Password") = True
    cat.Tables.Append tbl
    Set tbl = Nothing 
```

# java - 爪哇。文本区域中的 GUI WindowBuilder 滚动条不起作用

> ID：14349301
> 
> 赞同：0
> 
> 时间：2013-01-16T00:07:52.517
> 
> 标签：java, class, user-interface, textarea, scrollbar

我不知道为什么我的文本区域中的滚动条不起作用。我在互联网上找到了很多解决方案，但没有一个对我有帮助。

```
textArea1 = new JTextArea();
textArea1.setBounds(13, 28, 182, 199);
panel.add(textArea1);

JScrollBar scrollBar = new JScrollBar();
scrollBar.setBounds(205, 1, 17, 242);
panel.add(scrollBar); 
```

我发现不能是面板的布局绝对，如果我将它更改为组布局相同。怎么了？你可以帮帮我吗？谢谢你。

更新：

```
package lt.kvk.i3_2.kalasnikovas_stanislovas;

import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.BorderLayout;
import javax.swing.JTextPane;
import javax.swing.DropMode;
import javax.swing.JFormattedTextField;
import java.awt.Component;
import javax.swing.Box;
import java.awt.Dimension;
import javax.swing.JTextField;
import javax.swing.JTextArea;
import javax.swing.UIManager;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.Toolkit;
import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JMenuItem;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.ImageIcon;
import javax.swing.JDesktopPane;
import java.awt.SystemColor;
import java.awt.Font;
import javax.swing.border.BevelBorder;
import javax.swing.border.EtchedBorder;
import javax.swing.JScrollBar;
import java.awt.Color;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.Scanner;

import javax.swing.JLabel;
import javax.swing.JToolBar;

public class KDVizualizuotas {

    private JFrame frmInformacijaApieMuzikos;
    private JTextField txtStilius;
    private JTextArea textArea1;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    KDVizualizuotas window = new KDVizualizuotas();
                    window.frmInformacijaApieMuzikos.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public KDVizualizuotas() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frmInformacijaApieMuzikos = new JFrame();
        frmInformacijaApieMuzikos.setResizable(false);
        frmInformacijaApieMuzikos.setIconImage(Toolkit.getDefaultToolkit().getImage(KDVizualizuotas.class.getResource("/lt/kvk/i3_2/kalasnikovas_stanislovas/resources/Sidebar-Music-Blue-icon.png")));
        frmInformacijaApieMuzikos.setTitle("Muzikos stiliai");
        frmInformacijaApieMuzikos.setBounds(100, 100, 262, 368);
        frmInformacijaApieMuzikos.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        txtStilius = new JTextField();
        txtStilius.setBounds(10, 34, 128, 20);
        txtStilius.setColumns(10);

        JButton btnIekoti = new JButton("Ie\u0161koti");
        btnIekoti.setBounds(146, 36, 89, 19);
        btnIekoti.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
        //      textArea1.append(txtStilius.getText()+"\n");
        //      txtStilius.getText();

                 Scanner input = new Scanner(System.in);
                    try {
                        FileReader fr = new FileReader("src/lt/kvk/i3_2/kalasnikovas_stanislovas/Stiliai.txt");
                        BufferedReader br = new BufferedReader(fr);
                        String stiliuSarasas;
                        while((stiliuSarasas = br.readLine()) != null) {
                            System.out.println(stiliuSarasas);
                            textArea1.append(stiliuSarasas+"\n");
                            }
                        fr.close();
                        }
                    catch (IOException e) {
                        System.out.println("Error:" + e.toString());
                    }

            }
        });

        JPanel panel = new JPanel();
        panel.setBounds(10, 65, 224, 243);
        panel.setBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null));
        panel.setBackground(SystemColor.text);

        JLabel lblveskiteMuzikosStili = new JLabel("\u012Eveskite muzikos stili\u0173:");
        lblveskiteMuzikosStili.setBounds(10, 14, 222, 14);
        frmInformacijaApieMuzikos.getContentPane().setLayout(null);
        panel.setLayout(null);
        frmInformacijaApieMuzikos.getContentPane().add(panel);

        JLabel lblInformacijaApieMuzikos = new JLabel("Informacija apie muzikos stili\u0173:");
        lblInformacijaApieMuzikos.setBounds(12, 3, 190, 14);
        panel.add(lblInformacijaApieMuzikos);

        textArea1 = new JTextArea();
        textArea1.setBounds(13, 28, 182, 199);
        panel.add(textArea1);

        JScrollBar scrollBar = new JScrollBar();
        scrollBar.setBounds(205, 1, 17, 242);
        panel.add(scrollBar);
        frmInformacijaApieMuzikos.getContentPane().add(txtStilius);
        frmInformacijaApieMuzikos.getContentPane().add(btnIekoti);
        frmInformacijaApieMuzikos.getContentPane().add(lblveskiteMuzikosStili);

        JMenuBar menuBar = new JMenuBar();
        frmInformacijaApieMuzikos.setJMenuBar(menuBar);

        JMenu mnFile = new JMenu("File");
        menuBar.add(mnFile);

        JMenuItem mntmExit = new JMenuItem("Exit");
        mntmExit.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                System.exit(0);             
            }

        });
        mntmExit.setIcon(new ImageIcon(KDVizualizuotas.class.getResource("/lt/kvk/i3_2/kalasnikovas_stanislovas/resources/exitas.png")));
        mnFile.add(mntmExit);

        JMenu mnEdit = new JMenu("Edit");
        menuBar.add(mnEdit);

        JMenu mnHelp = new JMenu("Help");
        menuBar.add(mnHelp);

        JMenuItem mntmHelp = new JMenuItem("Help");
        mnHelp.add(mntmHelp);

        JMenu mnAbout = new JMenu("About");
        menuBar.add(mnAbout);

        JMenuItem mntmAbout = new JMenuItem("About");
        mntmAbout.setIcon(new ImageIcon(KDVizualizuotas.class.getResource("/lt/kvk/i3_2/kalasnikovas_stanislovas/resources/questionmark.png")));
        mnAbout.add(mntmAbout);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:17:57.300

您需要将要包含在滚动窗格中的组件添加到其中。

您可以通过`JScrollPane`的构造函数或`JScrollPane#setViewportView`方法执行此操作

![在此处输入图像描述](../Images/6c0782f7654c5448d07f2388db9861e8.png)

```
public class ScrollPaneTest {

  public static void main(String[] args) {
    new ScrollPaneTest();
  }

  public ScrollPaneTest() {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        try {
          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ex) {
        }

        JPanel bigPane = new JPanel();
        bigPane.setBackground(Color.BLUE);
        // This is not recommended, but is used for demonstration purposes
        bigPane.setPreferredSize(new Dimension(1024, 768)); 

        JScrollPane scrollPane = new JScrollPane(bigPane);
        scrollPane.setPreferredSize(new Dimension(400, 400));

        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(scrollPane);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
      }
    });
  }
} 
```

**更新了正确的布局**

您应该避免`null`或绝对布局，它们只会在长期错误中伤害您。

您还可以找到[How to use Scroll Panes](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html) of use

![在此处输入图像描述](../Images/0906e7eeea6667a38428bcdd5d673214.png)

```
public class BadLayout {

  public static void main(String[] args) {
    new BadLayout();
  }

  public BadLayout() {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        try {
          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ex) {
        }

        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new TestPane());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

      }
    });
  }

  public class TestPane extends JPanel {

    private JTextField searchField;
    private JButton searchButton;
    private JTextArea searchResults;

    public TestPane() {
      setLayout(new BorderLayout());

      searchResults = new JTextArea();
      searchResults.setLineWrap(true);
      searchResults.setWrapStyleWord(true);
      JScrollPane scrollPane = new JScrollPane(searchResults);

      JPanel results = new JPanel(new BorderLayout());
      results.setBorder(new EmptyBorder(4, 8, 8, 8));
      results.add(scrollPane);
      add(results);

      JPanel search = new JPanel(new GridBagLayout());
      search.setBorder(new EmptyBorder(8, 8, 4, 8));
      searchField = new JTextField(12);
      searchButton = new JButton("Search");

      GridBagConstraints gbc = new GridBagConstraints();
      gbc.gridx = 0;
      gbc.gridy = 0;
      gbc.fill = GridBagConstraints.HORIZONTAL;
      gbc.weightx = 1;
      gbc.insets = new Insets(0, 0, 0, 4);
      search.add(searchField, gbc);

      gbc.insets = new Insets(0, 0, 0, 0);
      gbc.gridx++;
      gbc.fill = GridBagConstraints.NONE;
      gbc.weightx = 0;
      search.add(searchButton, gbc);

      add(search, BorderLayout.NORTH);
    }

    @Override
    public Dimension getPreferredSize() {
      return new Dimension(200, 400);
    }
  }  
} 
```

# opengl - 致命错误：GL/glfw.h：不存在这样的文件或目录

> ID：14349309
> 
> 赞同：3
> 
> 时间：2013-01-16T00:08:26.560
> 
> 标签：opengl, compilation, mingw

我在 MinGW 上安装了 GLFW，并按照 GLFW 网站上关于如何使用 Opengl 编写代码的教程（[http://www.glfw.org/GLFWUsersGuide277.pdf](http://www.glfw.org/GLFWUsersGuide277.pdf)）。然后，当我尝试编译代码 MinGW 回复时（致命错误：gl\glfw.h：不存在此类文件或目录，编译终止）。

这是我编译的网站代码

```
#include <GL/glfw.h>
#include <stdlib.h>
int main(void)
{
int running = GL_TRUE;
// Initialize GLFW
if( !glfwInit() )
{
 exit( EXIT_FAILURE );
}
// Open an OpenGL window
if( !glfwOpenWindow( 300,300, 0,0,0,0,0,0, GLFW_WINDOW ) )
{
glfwTerminate();
exit( EXIT_FAILURE );
}
// Main loop
while( running )
{
// OpenGL rendering goes here...
glClear( GL_COLOR_BUFFER_BIT );
// Swap front and back rendering buffers
glfwSwapBuffers();
// Check if ESC key was pressed or window was closed
running = !glfwGetKey( GLFW_KEY_ESC ) &&
glfwGetWindowParam( GLFW_OPENED );
}
// Close window and terminate GLFW
glfwTerminate();
// Exit program
exit( EXIT_SUCCESS );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-06T15:57:43.970

我不知道如何在[MinGW](http://www.mingw.org/)上做到这一点。

但是对于那些通过在 debian 系统上搜索相同错误而发现这个问题的人来说，您需要*用于 OpenGL、窗口和输入（开发文件）的可移植库*：

```
apt-get install libglfw-dev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:58:03.767

> 我在 MinGW 上安装了 GLFW

显然，您的安装中出现了问题。您究竟是如何安装 GLFW 的？您从下载开始采取的具体步骤是什么？

# c++ - 扭曲图像的正确可视化

> ID：14349310
> 
> 赞同：0
> 
> 时间：2013-01-16T00:08:31.993
> 
> 标签：c++, image-processing, opencv, distortion

我正在尝试在 C++ 和 OpenCV 中实现图像变形。我的代码如下：

```
Mat input = imread("Lena.jpg",CV_LOAD_IMAGE_GRAYSCALE);    
Mat out;
double xo, yo;
input.convertTo(input, CV_32FC1);
copyMakeBorder(input, input, 3, 3, 3, 3, 0);

int height = input.rows;
int width = input.cols;

out = Mat(height, width, input.type());

for(int j = 0; j < height; j++){
    for(int i =0; i < width; i++){
        xo = (8.0 * sin(2.0 * PI * j / 128.0));
        yo = (8.0 * sin(2.0 * PI * i / 128.0));
        out.at<float>(j,i) = (float)input.at<float>(((int)(j+yo+height)%height),((int)(i+xo+width)%width));

    }
}
normalize(out, out,0,255,NORM_MINMAX,CV_8UC1);

imshow("output", out); 
```

这将产生以下图像： ![扭曲的图像](../Images/01ac5f20a48f7fb57496b3fc71a06857.png)

由于清晰可见，边界附近的值非零。谁能告诉我如何获得如下图所示的黑色边框，而不是从我的代码中获得的工件？

![需要黑色边框](../Images/0999c34452afad4f655cd8a3a077b81a.png)

应该只考虑该图像的黑色边框，即图像应该是波浪形的（正弦曲线）但没有伪影。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:19:51.087

这里：

```
 xo = (8.0 * sin(2.0 * PI * j / 128.0));
    yo = (8.0 * sin(2.0 * PI * i / 128.0));
    out.at<float>(j,i) = (float)input.at<float>(((int)(j+yo+height)%height),((int)(i+xo+width)%width)); 
```

您计算源像素的位置，但您使用宽度/高度的 mod 以确保它在图像内。这导致像素在边缘环绕。相反，您需要将图像外部的任何像素设置为黑色（或者，如果您的源图像有黑色边框，则夹到边缘）。

由于您已经有了边框，因此您可以夹住坐标，如下所示：

```
int ix = min(width-1, max(0, (int) (i + xo)));
int iy = min(height-1, max(0, (int) (j + yo)));
out.at<float>(j,i) = (float)input.at<float>(iy,ix); 
```

# ruby - 如何使用部分字符串搜索数组并返回索引？

> ID：14349318
> 
> 赞同：9
> 
> 时间：2013-01-16T00:09:18.787
> 
> 标签：ruby, arrays, string, indexing

我想使用部分字符串搜索数组，然后获取找到该字符串的索引。例如：

```
a = ["This is line 1", "We have line 2 here", "and finally line 3", "potato"]
a.index("potato") # this returns 3
a.index("We have") # this returns nil 
```

using`a.grep`将返回完整的字符串， using`a.any?`将返回正确的真/假语句，但都不返回找到匹配项的索引，或者至少我不知道该怎么做。

我正在编写一段代码，该代码读取文件，查找特定标头，然后返回该标头的索引，以便可以将其用作将来搜索的偏移量。如果不从特定索引开始搜索，我的其他搜索将得到误报。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T00:13:15.820

使用块。

```
a.index{|s| s.include?("We have")} 
```

或者

```
a.index{|s| s =~ /We have/} 
```

# javascript - 为什么这个 JS 函数有问题？Firefox 可以，但 Chrome 不行

> ID：14349319
> 
> 赞同：0
> 
> 时间：2013-01-16T00:09:32.790
> 
> 标签：javascript, jquery

嗨，我一直在编写一个小 Js 函数来操作某些 div 和元素。在 Firefox 上它运行良好，但在 Chrome 中不起作用并停止所有 Javascript。我根本没有发现什么是错的。你能好心告诉我吗？Cookies 已经过测试并且工作正常。使用 Jquery。谢谢！

```
function RememberMe(addr, bycookie = false)
{
    // Cookie name
    cookiename = "LBETS";

    // Should we reset?
    reset = false;
    changed = false;

    // See if button pressed
    if($(".star_"+ addr).hasClass("active"))
    {
        $('#recent_tx').addClass("table-striped");
        $(".star_"+ addr).removeClass("active");
        reset = true;
    } else {
        $(".favstar").removeClass("active");
    }

    // Iterate rows
    $('#recent_tx tr').each(function(){
        if($(this).hasClass(addr))
        {
            if(reset)
            {
                $(this).removeClass('warning');
            } else {
                $(this).addClass('warning');
                changed = true;
            }
        } else {
            $(this).removeClass('warning');
        }
    })

    // Change class
    if(changed)
    {
        $('#recent_tx').removeClass("table-striped");
        $(".star_"+ addr).addClass("active");
        setCookie(cookiename, addr, 20*365);
    }

    // Reset 
    if(reset)
    {
        delCookie(cookiename);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T00:12:40.287

无效的语法：

```
function RememberMe(addr, bycookie = false) 
```

您不能在函数签名中分配默认值。

Firefox 的 JS 引擎允许这种语法，并且它很可能以某种形式出现在 ECMAScript 6 中。

# jquery-mobile - flot.axislabels：如何选择标签的颜色？

> ID：14349321
> 
> 赞同：4
> 
> 时间：2013-01-16T00:09:36.330
> 
> 标签：jquery-mobile, flot, axis-labels

我正在使用带有插件“jquery.flot.axislabels.js”的flot，但除了自述文件之外我找不到其他文档。所以一般的问题是“我在哪里可以找到一些完整的文档？” 更具体的是：“如何设置标签的颜色？” 一些属性可用，例如“axisLabelFontSizePixels”、“axisLabelFontFamily”等……所以我尝试了“axisLabelColor”和“axisLabelFontColor”，但没有任何结果。

根据这个，我也尝试使用 CSS：http: [//people.mozilla.com/~mcote/flot-axislabels/example/](http://people.mozilla.com/~mcote/flot-axislabels/example/) 但它也不起作用。也许 CSS 正在使用旧版本的axislabel.js。

理想情况下，我会避免使用 CSS 执行此操作，我想如果我们能够选择字体，我们就能够选择颜色。但我找不到我必须使用的语法......

如果有人知道什么，我会很高兴阅读它:-) 谢谢和问候，S。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T01:18:58.593

从查看源代码来看，插件似乎没有在两种操作模式中提供该选项：

1.) 使用画布绘制标签 - 无法设置颜色（仅字体系列和大小）。如果您对 JavaScript 很方便，那么添加颜色不会太难。（您可能正在使用此选项，因为它解释了您的 CSS 不起作用的原因。）

2.) 使用 HTML DIV 绘制标签。这就是您的链接示例所做的。在其中，作者通过内联 CSS 标记指定颜色。在你的阴谋电话之后，我将如何做到这一点以保持一切：

```
 $('.yaxisLabel').css('color','red');
  $('.y2axisLabel').css('color','orange');
  $('.y3axisLabel').css('color','green');
  $('.y4axisLabel').css('color','purple'); 
```

[这里](http://jsfiddle.net/CxhhT/)的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-01T19:04:05.697

我发现只添加`!important`针对由 flot 生成的类更简单。对于目标轴，您可以针对`.yaxisLabel`或`.xaxisLabel`，或针对整个目标`.flot-text`。

```
.flot-text {
    color: rgba(255, 255, 255, 0.3) !important
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-11T15:15:55.210

我知道这个问题有一个公认的答案，但只是想分享一下我最终是如何让它工作的。

Flot 版本：Flot 0.8.3

我必须显式设置`axisLabelUseCanvas:false`然后编写一些 jQuery 代码：

`$('.flot-tick-label').css('color','red');`

我们走了，经过几个小时的挫折，它终于变红了！

希望这可以帮助迷失在 Flot 中的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T00:26:30.590

我必须`axisLabelUseCanvas:false`明确设置并使用`$('.axisLabels').css('color','red');` 使它们变红

# php - 包含带参数的 PHP 文件

> ID：14349322
> 
> 赞同：0
> 
> 时间：2013-01-16T00:09:37.433
> 
> 标签：php

这里是PHP新手，很抱歉给您带来困扰。

我想问一些事情，如果我想包含一个 php 页面，我可以使用参数来定义我将要调用的页面吗？

假设我必须在模板页面中包含标题部分。每个页面都有不同的标题，将表示为图像。所以，

`<?php @include('title.php',<image title>); ?>`我可以在我的 template.php中调用一些东西吗？

所以包含将返回带有特定图像的标题页来表示标题。

感谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:13:09.143

包含的页面将看到当前范围的所有变量。

```
$title = 'image title';
include('title.php'); 
```

然后在您的 title.php 文件中，该变量就在那里。

```
echo '<h1>'.$title.'</h1>'; 
```

建议在使用前检查变量 isset() 是否。像这样。

```
if(isset($title))
{
    echo '<h1>'.$title.'</h1>';
}
else
{
    // handle an error
} 
```

**编辑：**

或者，如果您想使用函数调用方法。最好使函数特定于包含文件执行的活动。

```
function do_title($title)
{
     include('title.php');  // note: $title will be a local variable
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:12:44.570

不确定这是否是您要查找的内容，但您可以创建一个函数来包含该文件并传递一个变量。

```
function includeFile($file, $param) {
    echo $param;
    include_once($file);
}

includeFile('title.php', "title"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:20:40.080

包含的页面将已经可以访问在包含之前定义的那些变量。如果您需要包含特定变量，我建议在要包含的页面上定义这些变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T00:13:42.240

在您包含的文件中，您可以这样做：

```
<?php
return function($title) {
    do_title_things($title);
    do_other_things();
};

function do_title_things($title) {
    // ...
}

function do_other_things() {
    // ...
} 
```

然后，您可以这样传递参数：

```
$callback = include('myfile.php');
$callback('new title'); 
```

另一个更常用的模式是为要传入的变量创建一个新的范围：

```
function include_with_vars($file, $params) {
    extract($params);
    include($file);
}

include_with_vars('myfile.php', array(
    'title' => 'my title'
)); 
```

# ubuntu - 我可以在 ubuntu 12.10 中关闭终端区分大小写吗

> ID：14349324
> 
> 赞同：2
> 
> 时间：2013-01-16T00:09:59.583
> 
> 标签：ubuntu

Ubuntu 的终端使用区分大小写的自动完成，正如我认为 Linux 所期望的那样。

但我认为使用不区分大小写的名称通常会更方便，以免在开始名称时必须准确，并且可能值得额外的误报。是否有可能改变这种行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T00:14:03.013

您可以将此[`readline`](http://www.gnu.org/software/bash/manual/html_node/Readline-Init-File-Syntax.html)设置放入您的`~/.bashrc`：

```
bind 'set completion-ignore-case on' 
```

* * *

您需要重新启动终端资源`~/.bashrc`。（或`source ~/.bashrc`手动运行）

# html - 用颜色填充表格单元格

> ID：14349326
> 
> 赞同：3
> 
> 时间：2013-01-16T00:10:16.777
> 
> 标签：html, css, html-table

我在 HTML 中构建三个不对称的表格，如下所示：

```
 <table id="d1">
       <tr>
         <th colspan="2">ATIS-GESTEL</th>
       </tr>
       <tr>
         <td class="label">Petición:</td>
         <td class="value">171601792</td>
       </tr>
     </table>

     <table id="d2">
       <tr>
         <th colspan="2">FACILITADOR-SAC</th>
       </tr>
       <tr>
         <td class="label">OT:</td>
         <td class="value">171601792</td>
       </tr>
     </table>

    <table id="d3">
       <tr>
         <th colspan="2">SAC</th>
       </tr>
       <tr>
         <td class="label">Ticket:</td>
         <td class="value"></td>
       </tr>
     </table> 
```

我必须用 CSS 设置一些属性的样式，包括给`<td>`带有类“值”的 's 一个黄色背景色。嗯，背景颜色确实发生了变化，但是那里有一点空间，比如边框。它没有完全填满。以防万一，这是CSS：

```
body {
    font-family:Georgia, "Times New Roman", Times, serif;
    font-size:12px;
    color:#666666;
    text-align:left; 
}

td {
  padding-top: 0px;
  padding-left: 0px;
  padding-bottom: 0px;
  padding-right: 0px;
}
#container {
   width: 800px;
   height: 600px;
   border:1px solid #333333;
}

#header {
   padding-left: 7px;
}

#d1 {
   float: left;
   margin-left: 15px;
   margin-right: 15px;
   border: 1px solid #333333;

}

#d1 tr td.value{
  width: 100px;
  height: 15px;
  background-color: #FFFF66;
}

#d2 {
   float: left;
   margin-left: 15px;
   margin-right: 15px;
   border: 1px solid #333333;
   width: 150px;
   height: 40px;
}

#d2 tr td.value{
  width: 100px; 
```

有人能告诉我为什么会出现那个边框，以及如何完全填充单元格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:13:48.833

添加`border-collapse:collapse`到`<table>`的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:16:35.267

也许边框间距也可能是一个问题。将其设置为零。

```
table.mytable {
border-spacing: 0;
} 
```

# c - 在 C 中使用 char 指针的二维数组

> ID：14349327
> 
> 赞同：2
> 
> 时间：2013-01-16T00:10:33.603
> 
> 标签：c, pointers, char, segmentation-fault

我想读取一个文件并将每一行写入char数组。由于我不知道行数，因此我认为最有效的方法是使用 char 指针的二维数组。但是我得到分段错误。

我的问题可能与这个问题重复： [2D array of char pointers --> Segmentation fault？](https://stackoverflow.com/questions/6807617/2d-array-of-char-pointers-segmentation-fault)

但我想不出 C 的正确语法，所以我无法尝试。

这是我的代码：

```
 FILE *file = fopen ( filename, "r" );
   if ( file != NULL )
   {
        char line [ 128 ]; /* or other suitable maximum line size */
        char **new_line;
        int i = 0;
    while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
    {
        strcpy(new_line[i], line);
        i++;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:16:04.450

未分配内存`new_line`导致分段错误。

如果您知道行数，则可以将其声明为本地数组本身。在这种情况下，您的访问方法将正常工作。

```
#define MAX_LINES 20
#define MAX_CHARS 128
...
char new_line[MAX_LINES][MAX_CHARS] = {0};
... 
```

您的问题是您不知道最大行数。所以你选择了双指针。在这种情况下，您需要首先`malloc`使用一些`n`行数，然后您需要继续使用`realloc`以增加缓冲区大小。

```
#define MAX_CHARS 128
#define N_NO_OF_LINES 10
...
char line[MAX_CHARS] = {0};
char **new_line = NULL;
int noOfLines = 0;
int lineCount = 0;

new_line = malloc(sizeof(char*) * N_NO_OF_LINES);
noOfLines = N_NO_OF_LINES;

while (fgets (line, sizeof line, file) != NULL) /* read a line */
{
    if (lineCount >= noOfLines)
    {
        new_line = realloc(new_line, (sizeof(char*)*(noOfLines+N_NO_OF_LINES)));
        noOfLines += N_NO_OF_LINES;
    }

    new_line[lineCount] = strdup(line);
    lineCount++;
} 
```

注意：注意空检查`malloc`和`realloc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:19:04.497

new_line 未初始化为有效的内存块。

大致：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main() {
    FILE *file = fopen ( "test.txt", "r" );
    if ( file != NULL )
    {
#define MAXLINES 128
#define MAXLINELEN 100
       char line [ MAXLINELEN ]; /* or other suitable maximum line size */
       char **new_line = (char **)malloc(sizeof(char *) * MAXLINES);
       int i = 0;

        if (!new_line) exit(-1);

        while ( i < MAXLINES && (fgets ( line, sizeof line, file ) != NULL )) /* read a line */
        {
            new_line[i] = strdup(line);
            i++;
        }
        printf("read %d lines\n", i);
    }
    exit(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:19:26.127

您需要为字符串分配空间。Malloc 返回一个具有您想要的大小的内存槽，但不允许内存重新分配。为此，您有[realloc](http://pubs.opengroup.org/onlinepubs/009696899/functions/realloc.html)。

使用 malloc，您最终会得到一个固定大小的表，就像您只声明它具有静态但稍后初始化一样（好吧，我有点反对这句话，因为 malloc 远不止于此，但对于这个目的可以安全地说出来）。

Realloc 会这样做，重新分配内存，但如果你没有正确使用 i ，它可能会非常危险。而且，在我看来，这不是最正确的方法。

当你想保存一些你不知道大小的东西时，动态结构是要走的路。您可以使用“类似链接列表”的数据结构，这样您就可以拥有任意数量的单词，然后将该列表转换为数组。

我会用这样的东西：

```
typedef struct _words{ //Structure to the dynamic insertion of words
  char *word;
  struct _words *next;
}words;

words *last;          //Easier implementation for this case. Not always the best solution

words *init(){        //Is good practice to start with an empty structure for reference passing 
  words *new = malloc(sizeof(words));
  if(new == NULL) exit(0);
  new->next = NULL;   //A good end/next reference
  return new;
}

void insertWord(char *word){
  words *new = malloc (sizeof(words));
  if(new == NULL) exit(0);
  new->word = malloc(strlen(word)*sizeof(char));
  if(new->word == NULL) exit(0);
  new->next = NULL;   //Or new->next = last->next; wich is also null. 
  last->next = new;
  last = new;
}

int main(){           //Or the name of your function
 FILE *file = fopen ( filename, "r" );
 words *list = init();
 last = list;
   if ( file != NULL )
   {
        char line [ 128 ]; /* or other suitable maximum line size */
        int i = 0;
    while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
    {
        insertWord(line);
        i++;
    }

    //Here, you already have all the words in your dynamic structure. You can now save them into an array

    char **array = malloc(i*sizeof(char*));   //i is the number of words.
    if(array == NULL) exit(0);
    word *aux = list->next;
    if(aux != NULL){
     for(int j=0;j<i && aux != NULL;j++){
         array[j] = malloc(strlen(aux->word)*sizeof(char));
         if(array[j] == NULL) exit(0);
         strcpy(array[j], aux->word);
         aux = aux->next;                     // jump to the next word
     }
    }
  ...
} 
```

我认为这可能有效，但我没有尝试过。只是为了让您了解如何实现动态结构。

它错过了释放并且不是实际的堆栈，即使是关闭的。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T00:12:47.343

您没有为`new_line`数组分配任何内存。你需要类似的东西：

```
char **new_line = malloc(sizeof(char *) * MAX_LINES); 
```

然后对于每一行，不要使用`strcpy`，它将复制到垃圾指针（未初始化的`new_line`数组）中。你可能想要[`strdup(3)`](http://www.manpagez.com/man/3/strdup/)：

```
new_line[i] = strdup(line); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T00:13:43.557

您声明`new_line`为指向 的指针`char *`，但它从未初始化，因此它指向一些无效的内存地址。当您写入该地址时，您会收到错误消息。

您可能想要分配内存，将其分配给`new_line`，然后您可以将字符串复制到其中。

# spring - Spring Social .NET OAuth 混淆

> ID：14349328
> 
> 赞同：0
> 
> 时间：2013-01-16T00:10:37.997
> 
> 标签：spring, sharepoint-2010, twitter, twitter-oauth, spring.net

我最初发布了一个关于使 SharePoint 2010 计时器作业能够访问 twitter API 并选择 Spring Social .NET api 并遇到另一个障碍的问题。

我无法让 OAuth 握手或“跳舞”工作。

我有与我的帐户相关联的使用者密钥和秘密，以及访问令牌和秘密，但是每当我尝试初始化 TwitterServiceProvider 对象时，每当我尝试查询时都会收到 401 错误。

提供的控制台/mvc 和 wp7.1 示例并没有提供太多关于如何让此代码（应该在没有人为参与的情况下运行）工作的见解。

有没有人有这方面的好资源？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:00:10.523

如果您已经拥有访问令牌值和秘密，则可以执行以下操作：

```
ITwitter twitter = new TwitterTemplate("consumerKey", "consumerSecret", "accessTokenValue", "accessTokenSecret");
// twitterApi.UserOperations.GetUserProfile(); 
```

相当于：

```
TwitterServiceProvider serviceProvider = new TwitterServiceProvider("consumerKey", "consumerSecret");
ITwitter twitterApi = serviceProvider.GetApi("accessTokenValue", "accessTokenSecret");
// twitterApi.UserOperations.GetUserProfile(); 
```

你如何获得访问令牌的秘密和价值？

# vim - 我可以用 vim 替换 Qt4 编辑器 QTextEdit 吗？

> ID：14349334
> 
> 赞同：1
> 
> 时间：2013-01-16T00:12:12.397
> 
> 标签：vim, qt4, editor

我正在制作 GUI，主要是为了我自己。而且问题是主流的文本编辑器是QTextEdit，我最喜欢用vim作为编辑器。

我正在谈论的这个地方必须在 GUI 中，我不能只将其设为文本文件。

有没有办法可以在 Qt4 GUI 中使用“vim”或任何其他独立编辑器作为 QTextEdit 的插件替换？也许一些库可以作为 QWidget 和独立的 unix 样式编辑器之间的转换器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:16:51.677

AFAIK，Vim 不能作为库使用。[但是你可以从GVim 的这个 QT 移植中](https://bitbucket.org/equalsraf/vim-qt/wiki/Home)获得灵感。

# ruby-on-rails - 路由时出错

> ID：14349346
> 
> 赞同：0
> 
> 时间：2013-01-16T00:13:02.600
> 
> 标签：ruby-on-rails

我定义了一些静态页面以及一些控制器（用户和使用症状）的路由。当我导航到 localhost:3000/users/1 或 localhost:3000/users/1/usymptoms/new 时，一切都很好。一旦我完成了有关症状/新的表格的填写，我就会将 usymptoms 控制器重定向到 @users。这工作正常。

在模型文件中，关联的是用户有很多usymptoms，usymptoms属于用户。

但是，现在我的静态页面无法访问。例如，当我导航到 /learn 时，我收到以下错误：

**没有路线匹配 {:action=>"new", :controller=>"usymptoms", :user_id=>nil}**

我是新来的轨道。你能帮我找出错误吗？

我在下面提供了我的路由文件和“rake routes”的输出。

我的 routes.rb 文件

```
root to: 'static_pages#home'
match '/about',   to: 'static_pages#about'
match '/contact', to: 'static_pages#contact'
match '/learn',   to: 'static_pages#learn'

match '/signup',  to: 'users#new'
match '/signin',  to: 'sessions#new'
match '/signout', to: 'sessions#destroy', via: :delete

resources :users do
  resources :usymptoms
end

resources :sessions, only: [:new, :create, :destroy] 
```

======

# rake 路由的输出

```
 root        /                                            static_pages#home
             about        /about(.:format)                             static_pages#about
           contact        /contact(.:format)                           static_pages#contact
             learn        /learn(.:format)                             static_pages#learn
            signup        /signup(.:format)                            users#new
            signin        /signin(.:format)                            sessions#new
           signout DELETE /signout(.:format)                           sessions#destroy
    user_usymptoms GET    /users/:user_id/usymptoms(.:format)          usymptoms#index
                   POST   /users/:user_id/usymptoms(.:format)          usymptoms#create
 new_user_usymptom GET    /users/:user_id/usymptoms/new(.:format)      usymptoms#new
edit_user_usymptom GET    /users/:user_id/usymptoms/:id/edit(.:format) usymptoms#edit
     user_usymptom GET    /users/:user_id/usymptoms/:id(.:format)      usymptoms#show
                   PUT    /users/:user_id/usymptoms/:id(.:format)      usymptoms#update
                   DELETE /users/:user_id/usymptoms/:id(.:format)      usymptoms#destroy
             users GET    /users(.:format)                             users#index
                   POST   /users(.:format)                             users#create
          new_user GET    /users/new(.:format)                         users#new
         edit_user GET    /users/:id/edit(.:format)                    users#edit
              user GET    /users/:id(.:format)                         users#show
                   PUT    /users/:id(.:format)                         users#update
                   DELETE /users/:id(.:format)                         users#destroy
          sessions POST   /sessions(.:format)                          sessions#create
       new_session GET    /sessions/new(.:format)                      sessions#new
           session DELETE /sessions/:id(.:format)                      sessions#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:25:56.277

您必须在某处具有以下链接：`new_user_usymptom_path(@user)`，但`@user`由于`nil`某种原因，因此出现错误。

# ember.js - EmberJS - RequireJS - 如何将视图/模板连接到子视图的出口

> ID：14349347
> 
> 赞同：1
> 
> 时间：2013-01-16T00:13:04.427
> 
> 标签：ember.js, requirejs

由于 EmberJS 发展得非常快，这又是一个问题 :)

[编辑]
我正在使用来自 github 的 EmberJS。这是我正在使用的版本
[https://github.com/emberjs/ember.js/tree/c87ad9fc13f7883e7b898c9fb9b1630cb2fc9bf1](https://github.com/emberjs/ember.js/tree/c87ad9fc13f7883e7b898c9fb9b1630cb2fc9bf1)
[/EDIT]

这个问题是 [EmberJS 的后续 - Manually bind controller to view](https://stackoverflow.com/questions/14228528/emberjs-manually-bind-controller-to-view)
但是你不需要阅读它来理解下面的问题。

我有一个 EmberJS 应用程序，我正在使用 requireJS 为路由器路由到的应用程序部分加载我的控制器和视图。

我的主要 index.html 有一个`{{outlet}}`将添加 ApplicationView 的位置。
我的 ApplicationView 有 3 个子视图 - 标题、菜单和容器 - 如下

```
require
(
    [
        'app/app',
        'app/common/views/menu',
        'ember'
    ],
    /**
     * Main application view
     *
     * @param App
     */
    function (App)
    {
        App.ApplicationView = Ember.ContainerView.extend
        ({
            childViews   : ['headerView', 'menuView', 'containerView'],
            headerView   : App.HeaderView,
            menuView     : App.MenuView,
            containerView: App.ContainerView
        });
    }
); 
```

我的 ContainerView 如下

```
require
(
    [
        'app/app',
        'text!app/common/templates/container.hbs',
        'ember'
    ],
    /**
     * View to clear completed tasks
     *
     * @param App
     * @param template
     */
    function( App, template )
    {
        App.ContainerView = Ember.View.extend
        ({
            template: Ember.Handlebars.compile( template ),
            what: 'container view'
        })
    }
); 
```

和它的模板是这样的
[编辑]
模板在它自己的文件app/common/templates/container.hbs中。我不想在 html
[/EDIT]中定义带有 script 标签的模板

```
<div id="container" class="container">
    my main content !!!
    {{outlet}}
</div> 
```

现在我有一条路线，我想将模板/视图渲染到容器主出口（我也尝试命名出口）。

我想在我的路线上有这样的东西。请注意，控制器和视图之前没有加载，现在将在执行函数之前由 requireJS 加载。

```
define
(
    [
        'app/app',
        'app/library/controllers/library',
        'app/library/views/main',
        'ember'
    ],
    function (App)
    {
        App.LibraryRoute = Ember.Route.extend
        ({
            setupControllers: function(controller, model)
            {
                this.set('controller', this.container.lookup('controller:library') );
            },

            renderTemplates : function()
            {   
                this.render
                (   'library',
                    {
                    //  can I specify the view like so? 
                    //  It seems not as the container view is not part of the active views. 
                    //  can I specify the view like so?How to add it to the activeViews?
                    //  into: 'container',

                    //  I also tried to do
                    //  outlet: 'container'
                    //  with the outlet in the container template beeing named container, this doesn't work either
                        controller: this.controller
                    }
                );

//                This is what I am aiming for in the future, meaning loading resources only if the user is navigating to those
/*                require
                 (
                 [
                     'app/library/controllers/library',
                     'app/library/views/main',
                     'app/library/models/library'
                 ],
                 function()
                 {
                    // render template / view
                 )*/
            }
        })
    }
); 
```

LibraryView 是这样的

```
require
(
    [
        'app/app',
        'text!app/library/templates/main.hbs',
        'ember'
    ],
    /**
     * View to clear completed tasks
     *
     * @param App
     * @param template
     */
    function( App, template )
    {
        App.LibraryView = Ember.View.extend
        ({
            template: Ember.Handlebars.compile( template ),
            what :'library view'
        });
    }
); 
```

这个视图的控制器是这样的

```
require
(
    [
        'app/app',
        'ember'
    ],
    /**
     * Library controller
     */
    function(App)
    {
        App.LibraryController = Ember.ArrayController.extend
        ({
            needs: 'menu',
            content: []
        });
    }
) 
```

问题可以恢复到这个
如何将视图/模板连接到子视图的出口（在应用程序初始化之前或之后加载，DOM 加载）？

[我在这里https://github.com/zeflasher/ember-require-js](https://github.com/zeflasher/ember-require-js)在 GitHub 上创建了一个存储库，供您检查代码并可能帮助我解决此问题。

非常感谢您提供的任何帮助！！！干杯，泽维尔

[编辑 #4]
我想知道我的问题是否与其中一个错误有关，因为我正在指定我的模板
[https://github.com/emberjs/ember.js/commit/712e2b62f79577b84630a99e80c043f751a67fe4](https://github.com/emberjs/ember.js/commit/712e2b62f79577b84630a99e80c043f751a67fe4)
[https://github.com/emberjs/ ember.js/commit/9bcc0cd87c587affc0e60030b2dac1174f820dbf](https://github.com/emberjs/ember.js/commit/9bcc0cd87c587affc0e60030b2dac1174f820dbf)
[/EDIT #4]

[编辑 #5]
更新了 github 项目以使用 ember commit ea6922f（撰写本文时已有 4 天）
仍然没有工作提出更多问题 :)
[/EDIT #5]

[编辑#6]
我已经更新了 github repo。
现在，当应用程序是具有插座的普通视图时，一个分支（working-no-containerview）在插座中呈现我的视图。

主分支是非工作示例（容器模板/视图出口中没有呈现任何内容）。我虽然尝试连接插座时子视图不是 _activeViews 的一部分，但它会失败，所以我什至尝试使用 ApplicationView 中的以下代码将我的子“容器”视图添加到活动视图中

```
require
(
    [
        'app/app',
        'app/common/views/menu',
        'ember'
    ],
    /**
     * Main application view
     *
     * @param App
     */
    function (App)
    {
        App.ApplicationView = Ember.ContainerView.extend
        ({
            childViews   : ['headerView', 'menuView', 'containerView'],
            headerView   : App.HeaderView,
            menuView     : App.MenuView,
            containerView: App.ContainerView,
            init: function()
            {
                App.__container__.lookup('router:main')._connectActiveView('container', App.__container__.lookup('view:container'));

                this._super();
            }
        });
        return App.ApplicationView;
    }
); 
```

将它添加到activeViews，但仍然无法正常工作，并补充说在框架中深入到有这么简单的工作（在我的情况下仍然没有）看起来非常错误，所以我真的认为我错过了这里必不可少的东西。
[/编辑#6]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:25:33.920

这不是错误。ContainerViews 根本不呈现模板。请参阅[Ember.ContainerView的 api 文档](http://emberjs.com/api/classes/Ember.ContainerView.html)

> 容器视图上的模板、模板名称、默认模板、布局、布局名称或默认布局属性不会导致模板或布局被呈现。Ember.ContainerView 的 DOM 表示的 HTML 内容将只是其子视图的呈现 HTML。

如果你想在模板中渲染一个插座，你可以在 Ember.View 的子类中完成，没有任何问题。但如上所述，这不适用于 ContainerView，也不适用于 CollectionView，因为这是 Ember.ContainerView 的子类。

我还评论了您的问题：[https](https://github.com/emberjs/ember.js/issues/1795#issuecomment-12453015) ://github.com/emberjs/ember.js/issues/1795#issuecomment-12453015 ，我认为您可以自己关闭它。

最好的问候，迈克

# django - 如何使用 Django 在 Pisa Document xhtml2pdf 中包含 Google Chart

> ID：14349350
> 
> 赞同：2
> 
> 时间：2013-01-16T00:13:11.120
> 
> 标签：django, pisa

我正在尝试将下面的 Google Chart url 嵌入到 Pisa xhtml2pdf PDF 中，但似乎无法使其工作。

[http://chart.apis.google.com/chart?cht=bvs&chd=t:425.9,550.6&chs=400x125&chds=0,600&chl=Aug%2009%7CSep%2009&chco=8BC542&chbh=32,24](http://chart.apis.google.com/chart?cht=bvs&chd=t:425.9,550.6&chs=400x125&chds=0,600&chl=Aug%2009%7CSep%2009&chco=8BC542&chbh=32,24)

我希望这篇[文章](https://stackoverflow.com/questions/4000951/using-an-image-url-for-link-callback-in-the-pisa-html-to-pdf-library)能解决我的问题，但没有运气。

我正在使用以下代码（取自上述帖子）

```
html = render_to_string('reporting/pdf.html', keys,
                        context_instance=RequestContext(request))
result = StringIO.StringIO()
pdf = pisa.pisaDocument(
        StringIO.StringIO(html.encode('ascii', 'xmlcharrefreplace')),
        result, link_callback=link_callback)
return HttpResponse(result.getvalue(), mimetype='application/pdf') 
```

和

```
def link_callback(uri, rel):
    if uri.find('chart.apis.google.com') != -1:
        return uri
    if uri.find('mydomain.com') != -1:
        return uri
    return os.path.join(settings.MEDIA_ROOT, uri.replace(settings.MEDIA_URL, "")) 
```

当我从**mydomain.com**嵌入图像时它可以工作，但在尝试链接到**chart.apis.google.com时我什么也没得到**

这有效：

> `<img src="http://mydomain.com/foo.jpg>`

这已破了：

> `<img src="http://chart.apis.google.com/chart?cht=bvs&chd=t:425.9,550.6&chs=400x125&chds=0,600&chl=Aug%2009|">`

任何帮助将不胜感激。干杯。

# php - jsfiddle中用于jquery完全匹配的工作代码

> ID：14349352
> 
> 赞同：-2
> 
> 时间：2013-01-16T00:13:18.427
> 
> 标签：php, javascript, jquery, ajax, match

首先，我想说 jsfiddle 中的代码完全符合我的预期。但是，当我尝试将其插入我的页面时，它不起作用。我在用

```
 get.ajax 
```

用 php 移动 html 一个 mysql 数据到一个名为 #latest-divs 的 div 中。我有一个表格

```
 input#search 
```

当 .bind('input property...) 时获取 val() 并检查 .bind('input property...) 的子 div 中是否存在完全匹配的按钮`#latest-divs`。我将这些子元素称为 #latestblock 如果存在完全匹配，则应该执行该事件，正如我上面提到的，它在 jsfiddle 中有效，但在我的网站上消失了。我已经尝试了我能想到的一切：

*   加载到php文件中*   从头部加载*   从身体加载*   加载和不加载“CDATA”*   更改我的 jquery 版本我的网站是 codefault (dot) org。jsfiddle 链接是[http://jsfiddle.net/gAnyM/10/](http://jsfiddle.net/gAnyM/10/)。截至目前，我正在从 script/latest-topics.php 加载第二部分（div 的随机定位），从 index.php 加载 head 中的第一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:17:44.937

你确定你有它里面：

```
$(document).ready( function() {
  // code here
}); 
```

?

在绑定事物之前，dom 需要准备好

jsfiddle 会自动为你添加这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:27:48.090

尝试另一种活动

```
$('input#search').bind('change keyup', function() 
```

# linux - 了解linux服务器进程日志

> ID：14349354
> 
> 赞同：1
> 
> 时间：2013-01-16T00:13:29.510
> 
> 标签：linux, apache, logging, process, webserver

所以我从服务器管理员那里得到了这个小片段，说我的脚本是导致服务器过载的原因。我不太明白这个日志是如何说明的。

有人可以解释这个输出的实际含义吗？

没有人 227949 6.2 45.4 21198032 11187052 ？S 08:40 0:19 _ /usr/local/apache/bin/httpd -k start -DSSL

用户 232019 4.1 0.1 150748 25872 ? 08:41 0:11 | _ /usr/bin/php /home/user/public_html/results.php

**我从中得到的只是：**
用户 processid **__ *_* __** ****___** ****_ *_* __** ? S ***_* __****_* __ 进程位置（apache/php）文件正在使用*****

 *****那是正确的吗？有人可以填空解释什么是什么。什么是 S ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:21:17.773

您的系统管理员告诉您的是 results.php 中的某些内容正在使用资源。`top`他可能已经能够与类似或这样的工具一起推测这一点，`htop`以便他可以“实时”观察过程。交叉引用了 PID（进程 ID）和中提琴，他可以评估您的文件`results.php`使用的资源比“正常”或“预期”更多。但从日志本身，您可以看到的只是用户运行了一个编号的进程`232019`以及该进程“是什么”。他需要日志来告诉他 PID`232019`是什么以及为什么说 ID 正在消耗资源。Apache 日志是为错误报告而设计的，而不是用于监控内核进程及其性能。

所以简而言之，我相信故障排除一定是这样的：

hmmmmm 服务器很慢

好的，我会看看`HTOP`

`HTOP`说 PID`232019`正在盯住 CPU 并吃掉内存

嗯嗯 想知道 PID 到底`232019`是什么？- 我只能看到 apache 正在运行它。最好在日志中查看。

在日志文件中搜索`232019`.

啊，它是...results.php。罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:22:56.820

这是提供的输出 py`ps au`或`ps aux`，列是：

`USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND`

[https://superuser.com/questions/117913/ps-aux-output-meaning](https://superuser.com/questions/117913/ps-aux-output-meaning)有解释，或者看看`man ps`。

状态`S`的意思是“睡眠”，对于一个进程来说，这是一个很正常的状态。这个输出并不能真正帮助你追踪问题。你现在只是问题出在`results.php`，所以你必须更仔细地调查。我冒昧地猜测并说这个脚本做了一些可能需要很长时间的数据处理。*****

# c++ - Visual c++ 2008 express 创建库

> ID：14349363
> 
> 赞同：0
> 
> 时间：2013-01-16T00:14:23.573
> 
> 标签：c++, static-libraries, static-linking, visual-c++-2008-express

我知道很多人都问过这个问题，但是按照建议的事情似乎对我没有用。所以我想我会寻求帮助，因为我显然错过了一些东西。

在过去的几天里，我一直在编写一些使用 boost 库的代码，这些代码允许我打开文本文件，将文本转换为可用的数据格式，并在完成后将数据另存为文本文件。我专门构建它以可扩展以处理不同的数据类型（特别是我制作的任何对象或类），以便我可以在我的项目中将其作为库链接到其他库。

但是，即使在将其编译成一个库并将该库的目录添加到“其他包含目录”之后，每当我尝试在库中包含一个头文件时，我都会收到一个未解决的外部错误。我还尝试将它的直接路径放在 Additional Dependencies 下（以及只是库名称以及在 Additional Include Directories 和 Additional Library Directories 中设置的目录路径。我也只尝试了其中一个在时间，它仍然失败）。

有什么我想念的吗？如何编译我想在新项目中重用并链接到它的代码，而无需每次都将 cpp 和 h 文件复制到我的解决方案中？DLL 会更好/更轻松地工作吗？如果是这样，我将如何将其编译为 dll 并链接到它？

感谢您阅读这堵文字墙。你能提供的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:45:17.030

行。虽然这不是我想要的确切解决方案，但我设法解决了这个问题。对于遇到此问题的任何人，有一个精彩的教程解释了如何制作和使用 DLL 文件（至少在 Windows 上，没有任何计算机使用备用操作系统设置来测试 DLL）。你可以在这里找到它。

[http://programmingexamples.wikidot.com/blog:1](http://programmingexamples.wikidot.com/blog:1)

问题的要点是您还需要保留 .h 文件的副本以方便包含在您的项目中。（我所做的是在我的 C 驱动器上创建一个目录，其中包含我正在制作的库，并且我有一个用于 .lib 文件的文件夹和一个用于 .h 文件的文件夹。）要么直接导入 .h 文件进入您的项目目录或将其添加到您的项目属性（C++ -> General -> Additional Include Directories ）。确保您链接到目录，而不是文件本身。在链接器中，您需要将 .lib 文件添加到附加依赖项部分（链接器 -> 输入 -> 附加依赖项）。你可以把整个路径放在这里，或者你可以只放文件名，然后告诉程序在哪里可以找到它所在的目录（将目录的路径添加到 Linker -> General ->

希望这可以帮助那些设法错过其他人似乎本能地理解的东西的人：P

# symfony - Doctrine2 - 没有关系的子查询连接

> ID：14349366
> 
> 赞同：3
> 
> 时间：2013-01-16T00:14:55.407
> 
> 标签：symfony, doctrine-orm, dql, query-builder

好的，这就是问题所在。

我有一个名为 HelpDocuments 的实体和一个名为 LogEntry 的实体。

用户可以关闭帮助文档。发生这种情况时，我会创建一个具有以下属性的 LogEntry：

*   事件 - 例如：helpDocument.dismiss
*   entity_id - 例如：11
*   entityDiscriminator - 例如：HelpDocument

在我实现自己的鉴别器逻辑时，HelpDocument 和 LogEntry 之间没有创建任何关系。

所以我想要实现的是查询所有没有被解雇的 HelpDocuments。我可以用 sql 做到这一点，左外子查询连接如下：

```
SELECT HelpDocument.*, temp.*
FROM HelpDocument
LEFT OUTER JOIN(
    SELECT LogEntry.entity_id
    FROM LogEntry
    WHERE LogEntry.entityDiscriminator = 'HelpDocument'
    AND LogEntry.event = 'helpDocument.dismiss'
    AND LogEntry.entity_id = 11
) as temp ON HelpDocument.id = temp.entity_id
WHERE temp.entity_id IS NULL; 
```

我的问题是，鉴于没有定义关系，我如何将其转换为 DQL？

* * *

**更新的解决方案：**

所以解决方案是不使用 LEFT OUTER JOIN，因为它们在 Doctrine2 中不存在/没有意义。最后我不得不做一个子查询连接：

```
/**
 * Filter by User Dismissed
 *
 * @param $qb
 * @param $route
 * @return mixed
 */
public function filterQueryByUserDismissed(QueryBuilder $qb, $args)
{
    $args = array_merge(array(
        "user" => null,
        "dismissed" => false
    ), $args);

    /** @var $dismissedQB QueryBuilder */
    $dismissedQB = $this->_em->createQueryBuilder();

    /*
    This line is important. We select an alternative attribute rather than
    letting Doctrine select le.id
    */
    $dismissedQB->select('le.entityId')
                ->from('\Mlf\AppBundle\Entity\UserEntityEventLog', 'le')
                ->where('le.entityDiscriminator = :entityDiscriminator')
                ->andWhere('le.event = :event')
                ->andWhere('le.user = :userId');

    $function = (true === $args['dismissed']) ? "in" : "notIn";
    $expr = $qb->expr()->$function($this->classAlias.'.id', $dismissedQB->getDQL());

    /** @var $qb QueryBuilder */
    $qb->andWhere($expr)
       ->setParameter("entityDiscriminator", HelpDocument::getDiscriminator())
       ->setParameter("event", HelpDocumentEvents::HELPDOCUMENT_DISMISS)
       ->setParameter("userId", $args["user"]);

//  exit($result = $qb->getQuery()->getSQL());

    return $qb;
} 
```

此 DQL 查询产生以下 SQL：

```
SELECT h0_.id AS id0
FROM HelpDocument h0_ 
WHERE (
    h0_.id NOT IN (
        SELECT l1_.entity_id 
        FROM LogEntry l1_ 
        WHERE l1_.entityDiscriminator = 'helpDocument' 
        AND l1_.event = 'helpDocument.dismiss' 
        AND l1_.user_id = 1
    )
) 
```

耶！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-07T09:20:17.240

我看到了你的解决方案，我做了一个小的改动，这将是一个巨大的性能改进。特别是如果你有超过几千行。

```
public function filterQueryByUserDismissed(QueryBuilder $qb, $args)
{
  $args = array_merge(array(
    "user" => null,
    "dismissed" => false
  ), $args);

  /** @var $dismissedQB QueryBuilder */
  $dismissedQB = $this->_em->createQueryBuilder();

  /*
  This line is important. We select an alternative attribute rather than
  letting Doctrine select le.id
  */
  $dismissedQB->select('le.entityId')
            ->from('\Mlf\AppBundle\Entity\UserEntityEventLog', 'le')
            ->where('le.entityDiscriminator = :entityDiscriminator')
            ->andWhere('le.event = :event')
            ->andWhere('le.user = :userId');

  // ---- My changes below
  // Get an array with the ids
  $dismissedIdsMap = $dismissedQB->getQuery()->getResults();
  $dismissedIds = array_map(
        function($a){
            return $a['entityId'];
        },
        $dismissedIdsMap);

  $function = (true === $args['dismissed']) ? "in" : "notIn";
  $expr = $qb->expr()->$function($this->classAlias.'.id', $dismissedIds);
  // ---- My changes above

  /** @var $qb QueryBuilder */
  $qb->andWhere($expr)
   ->setParameter("entityDiscriminator", HelpDocument::getDiscriminator())
   ->setParameter("event", HelpDocumentEvents::HELPDOCUMENT_DISMISS)
   ->setParameter("userId", $args["user"]);

  //  exit($result = $qb->getQuery()->getSQL());

  return $qb;
} 
```

上面的代码使用了两个查询。如果您使用一个查询，MySQL 将从您的子查询创建一个临时视图，然后使用主查询查询该视图。创建此视图需要大量开销。通过两个查询，您将在*PHP 内存*中保留“视图” ，这将大大减少开销。

# c# - 确定 View 是否呈现为 Partial

> ID：14349367
> 
> 赞同：2
> 
> 时间：2013-01-16T00:14:57.473
> 
> 标签：c#, asp.net-mvc-3, razor, partial-views

有没有办法确定视图是否呈现为部分视图？

我希望通过捕捉这个来扩展我正在编写的部分的重用......并在必要时为视图分配适当的布局。

目前我只是将它呈现在一个 div 中，但我也可以看到我们将它用作模式并且可能它是自己的页面。

（模态应该不需要任何改变，所以不用担心）

编辑：澄清我在问什么。

我想知道是否有任何方法可以确定由...渲染的视图之间的区别

`/path/to/controller`

和

`Html.Partial("/path/to/view.cshtml")`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-07T19:34:57.717

为什么不@if (Layout==null)？我仍然会为“自己的”页面推荐另一个视图并在那里设置布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:17:01.623

在您看来（假设 Razor 语法）：

```
@if(typeof(this) == Controller.PartialView)) //code 
```

或者

```
@if(this is Controller.PartialView) //code 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T18:35:14.410

基于@Pheonixblade9 的回复和其他答案的缺乏，目前看来这是不可能的。我最终只是`Model`将视图绑定为`bool`并在渲染视图/部分时传递这个值。

# c# - 使用 LINQ 和实体框架获取延迟加载的子集合的计数

> ID：14349368
> 
> 赞同：1
> 
> 时间：2013-01-16T00:15:05.270
> 
> 标签：c#, linq, entity-framework

我有一门课，例如：

```
public class Category
{
    public int CategoryId { get; set; }
    [Required]
    public string Name { get; set; }
    [NotMapped]
    public int ProductCount { get; set; }
    public virtual IEnumerable<Product> Products { get; set; }
} 
```

我有一个查询，目前看起来像这样：

```
context.Categories.SortBy(sortByExpression).Skip(startRowIndex).Take(maximumRows) 
```

我需要在我的类别网格中包含 ProductCount 字段。是否可以扩展此 LINQ 查询以在不读取整个 Product 集合的情况下为我提供 ProductCount 属性？我可以使用良好的旧 SQL 在子查询中执行此操作，但使用 LINQ 时我很难过。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T12:40:14.713

您的问题还不够清楚，但如果我理解得很好，您希望结果中的新列，例如 productCount 并且您使用如下 SQL 查询完成了它：

```
SELECT c.*, , (SELECT COUNT(*) FROM Products p WHERE p.categoryId = c.id) AS productCount FROM
Categories c
WHERE <Conditions> 
```

现在您希望能够使用 linq 做到这一点（如果您的问题确实如此），您可以按以下方式进行：

```
List<Category> categoryList = (from c in context.Categories let pCount = c.Products.Count() select
new { categoryId = c.CategoryId, CategoryName = c.Name, productCount = pCount})
.OrderBy([sortByExpression]).Skip([startRowIndex]).Take([maximumRows]).ToList(); 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:19:50.330

这大致是您要查找的内容吗：

```
context.Categories.SortBy(sortByExpression).Skip(startRowIndex).Take(maximumRows)
    .Select(c => new { c.CategoryId, c.Name, ProductCount = c.Products.Count() }); 
```

还是我误解了你的问题？

*更新了代码*

# vb.net - 为可滚动组件添加边框

> ID：14349374
> 
> 赞同：2
> 
> 时间：2013-01-16T00:15:36.220
> 
> 标签：vb.net

我从中派生了一个组件，`System.Windows.Forms.ScrollableControl`但添加边框属性时遇到问题。我试过`CreateParams`但没有成功，也许我错过了什么？

```
Protected Overrides ReadOnly Property CreateParams() As System.Windows.Forms.CreateParams
    Get
        Dim params As CreateParams = MyBase.CreateParams
        params.Style = params.Style Or &H800000 ' Turn on WS_BORDER
        Return params
    End Get
End Property

 'disable scroll bars, this part also disables my border
Protected Overrides Sub DefWndProc(ByRef m As Message)
    If m.Msg <> 131 Then
        MyBase.DefWndProc(m)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:25:53.383

看起来你想要一个真/假的边框属性：

```
Protected Overrides ReadOnly Property CreateParams() As CreateParams
  Get
    Dim params As CreateParams = MyBase.CreateParams
    If _Border Then
      params.Style = params.Style Or &H800000 ' Turn on WS_BORDER
    End If
    Return params
  End Get
End Property

Private _Border As Boolean = False

Property Border() As Boolean
  Get
    Return _Border
  End Get
  Set(ByVal value As Boolean)
    _Border = value
    Me.RecreateHandle()
    Me.Invalidate()
  End Set
End Property 
```

Bob Powell 有一篇关于此的文章：[向控件添加标准边框](https://web.archive.org/web/20141224180731/http://bobpowell.net/addborder.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:23:13.380

好的，解决了没有滚动条和漂亮的标准边框属性一起:) 这是代码，以防万一有人需要：

# 区域“禁用滚动条”

```
<DllImport("user32.dll")> _
Private Shared Function ShowScrollBar(ByVal hWnd As IntPtr, ByVal wBar As Integer, ByVal bShow As Integer) As Integer
End Function

Protected Overrides Sub DefWndProc(ByRef m As Message)
    If m.Msg = 131 Then

        ShowScrollBar(m.HWnd, 3, 0)

    End If

    MyBase.DefWndProc(m)
End Sub 
```

# 结束区域

# javascript - 每个元素的 id 显示未定义或 0 未分配不同的 id

> ID：14349382
> 
> 赞同：0
> 
> 时间：2013-01-16T00:16:17.107
> 
> 标签：javascript, jquery

我正在尝试为列表中的每个链接分配一个 ID，如下所示，

```
for (var j = start; j < stop; j++) { 
    link = linkBase + json[j].relatedItemId;

    $('#citations').append('<li><a href="' + link + '" id="num" + j>' + 
        json[j].title + '</a></li>'); 
        alert($('a').attr('id'));
} 
```

它一直给我未定义或0？我应该在 for 循环之外使用 $.each 吗？

我试图将 for 循环用于两个目的，但也许这不是一个好主意？

*****编辑*******

 **如果我将我的 for 循环放在一个函数中，例如，

```
// Loop function for each section
var loopSection = function(start, stop) {

// Http setup for all links
var linkBase = "http://www.sciencebase.gov/catalog/item/";

// Link for citation information
var link = "";

for (var j = start; j < stop; j++) { 
    link = linkBase + json[j].relatedItemId;

    var $anchor = $("<a>", {
        href: link, 
        id: "id" + j, 
        text: json[j].title
    })   

    // .parent() will get the <li> that was just created and append to the first citation 
    element                                              
    $anchor.appendTo("<li>").parent().appendTo("#citations");
    }
} 
```

我无法从函数外部访问 id

```
$('#citations').on('click', function (e) {
    e.preventDefault();

    var print = ($(this).attr('id'));

    alert(print);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:26:36.977

这种形式更干净：

```
for (var j = start; j < stop; j++) { 
    link = linkBase + json[j].relatedItemId;

    $("<a>", {
        href: link, 
        id:'num' + j, 
        text: json[j].title
    }).appendTo("<li>")
      .parent()               // get the <li> we just made
      .appendTo("#citations");
} 
```

如果您想引用您创建的锚标记，请执行以下操作：

```
for (var j = start; j < stop; j++) { 
    link = linkBase + json[j].relatedItemId;

    var $anchor = $("<a>", {
        href: link, 
        id:'num' + j, 
        text: json[j].title
    });

    $anchor.appendTo("<li>").parent().appendTo("#citations");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:30:15.343

您的代码中有语法错误 (id="num" + j..)

但是，您应该通过代码执行此操作（避免语法错误并提供更好的性能）

```
for (var j = start; j < stop; j++)
{
    var link = linkBase + json[j].relatedItemId;

    $('#citations').append($(document.createElement('li'))
                           .append($(document.createElement('a'))
                                   .attr('href', link)
                                   .attr('id', 'num' + j)
                                   .html(json[j].title)));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:42:22.743

同意 Schmiddty 的回答，但是为了完整起见

```
for (var j = 0; j < 10; j++) {
  var link = "someLink.htm";
  $('#citations').append('<li><a href="' + link + '" id="num' + j + '">'+ 'click here' + '</a></li>'); 
  alert($('#citations a:last').attr('id'));
} 
```

我只是更改了您的变量以使其在[此小提琴](http://jsfiddle.net/kentcoast/9r9wL/)上作为演示自行工作**

# php - PHP：如何使用 preg_match 获得这个符号？

> ID：14349384
> 
> 赞同：-2
> 
> 时间：2013-01-16T00:16:26.173
> 
> 标签：php, regex, preg-match

> **可能重复：**
> [正则表达式有条件地用超链接替换 ​​Twitter 主题标签](https://stackoverflow.com/questions/4277070/regex-to-conditionally-replace-twitter-hashtags-with-hyperlinks)

我试图在符号后得到这个词`#`

所以下面的字符串，应该都返回`stack_overflow`

```
#stack_overflow
hello #stack_overflow
blahblahblah#stack_overflow 
```

图案会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:17:31.503

`\w`匹配“单词”字符，因此：

```
'/#\w+/' 
```

`\w`包括小写和大写字母`a`、`z`数字和下划线。如果您需要更多，请使用字符集。

然后，如果你把它放在一个组中，你就可以捕获它。[这是一个演示。](http://codepad.viper-7.com/93bMmx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:25:03.300

试试这个代码：

```
$content = '#stack_overflow
            hello #stack_overflow
            blahblahblah#stack_overflow';
preg_match_all('/\#(?P<name>[a-z_]+?)/Uim', $content, $matches, PREG_SET_ORDER);

foreach ($matches as $match) {
    var_dump($match['name']);
} 
```

那会让你

```
string(14) "stack_overflow"
string(14) "stack_overflow"
string(14) "stack_overflow" 
```

# ruby-on-rails - 在到期前使 用omniauth 刷新LinkedIn 令牌

> ID：14349385
> 
> 赞同：1
> 
> 时间：2013-01-16T00:16:27.070
> 
> 标签：ruby-on-rails, omniauth, linkedin

我有一个 Rails (3.2.11) 应用程序，允许用户发布更新到他们的 LinkedIn 个人资料。我目前正在使用`omniauth-linkedin`gem 来捕获初始用户身份验证，并使用`linkedin`gem 来发布更新。我遇到的问题是 LinkedIn 访问令牌在 60 天后过期，但根据他们的[文档](http://developer.linkedin.com/documents/authentication#handling)，可以在过期之前刷新令牌，而无需用户重新授权应用程序。

我查看了 LinkedIn[提示和技巧](https://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token)、[身份验证概述](http://developer.linkedin.com/documents/authentication)以及 StackOverflow 上的大量帖子——this 、[this](https://stackoverflow.com/questions/13586713/refresh-linkedin-user-access-token-without-user-intervention)和[this只是几个示例——](https://stackoverflow.com/questions/13411938/linkedin-api-how-to-refresh-access-tokens-from-a-console-application)[但](https://stackoverflow.com/questions/8858082/linkedin-grant-access-screen-showing-even-though-user-already-authenticated)我仍然找不到任何答案。

在用户授权应用程序（通过`omniauth-linkedin`）后，我保存`access_token`并`secret`从 LinkedIn 返回给我。我需要弄清楚如何使用仍然有效`access_token`的来刷新它并将到期日期再延长 60 天。

我尝试使用来自 LinkedIn 的身份验证端点（`tokens.access_token`当前有效的令牌在哪里）：

```
url = "https//www.linkedin.com/uas/oauth/authenticate?oauth_token=" + tokens.access_token
result = RestClient.post(url, {oauth_callback: "http://localhost:3000/users/auth/linkedin/callback"}) 
```

但我得到一个`undefined method 'request_uri' for #<URI::Generic:0x1b144d20>`例外。

我尝试使用 OAuth::Consumer 客户端（当前有效的令牌在哪里`tokens.access_token`并且是）：`tokens.token_secret`

```
configuration = { site: 'https://api.linkedin.com', authorize_path: '/uas/oauth/authenticate',
                  request_token_path: '/uas/oauth/requestToken', access_token_path: '/uas/oauth/accessToken' }
consumer = OAuth::Consumer.new(ENV['LINKEDIN_APP_ID'], ENV['LINKEDIN_SECRET'], configuration)
access_token = OAuth::AccessToken.new(consumer, tokens.access_token, tokens.token_secret) 
```

但这只是给了我同样的`access_token`和`secret`。

最后，我希望能够利用现有的`omniauth-linkedin`gem 功能来处理这个刷新，知道这是否可能吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:33:22.987

在您的第二种方法中（使用 OAuth::Consumer 客户端并传入您现有的访问令牌和机密）应该为您刷新令牌。正如文档所述，只要当前用户登录到 LinkedIn.com 并且当前访问令牌尚未过期，就会刷新令牌。

这并不一定意味着你会得到一个新的令牌。你可能会得到和以前一样的。关键区别在于令牌的生命周期应为 60 天。您可以通过检查**oauth_expires_in**参数的值来验证这一点。它应该设置为 5184000。

这篇博文详细介绍了刷新令牌：[https ://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token](https://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token)

# java - 在 AppEngine 中分离服务和前端会导致延迟

> ID：14349393
> 
> 赞同：4
> 
> 时间：2013-01-16T00:17:02.330
> 
> 标签：java, google-app-engine, web-applications, architecture, latency

我有一组 Java AppEngine 应用程序，其结构如下：

*   休息服务
*   网页前端

这两个组件托管在 2 个单独的 AppEngine 实例（付费）上，这是设计应用程序的标准方式，对我来说很有意义，因为我也从其他客户端（移动应用程序等）访问 REST 服务，所以我会喜欢把它分开。

我遇到的问题是，即使我直接访问 REST 服务（从浏览器或移动应用程序获取）响应总是很好，但从我的 AppEngine 前端访问 REST 服务时，响应时间有时非常不稳定。

我运行了一堆测试，虽然从浏览器到 REST 服务执行 GET 总是相当快地返回，但从我的 AppEngine 前端到 REST 服务的调用可能会从与从浏览器返回的速度一样快到花费 > 10 秒（导致超时等）通常响应时间不那么合理（秒而不是 100 毫秒）。

如果总体上存在延迟，我可以理解平均而言，一切都需要几乎相同的时间来获得响应，但我不明白的是从其他任何地方调用服务和**从**AppEngine 实例调用它之间的区别。

我不得不说这并不总是发生，好几个星期，然后有一些非常糟糕的日子（今天不算是[全面停电](http://i.imgur.com/2mGV0.png)），尽管总的来说我对应用程序感到非常高兴-engine，有时让我怀疑我在这个平台上投资是否犯了一个错误。

我正在寻找解释：**当排队从 AppEngine 实例传出的这种非常标准的 http 请求时，这是某种固有的 AppEngine 限制吗？**

此外，我一直在考虑可能的解决方法 - 也许我应该将服务托管到与前端相同的实例中，但我真的不想这样做，我将它作为最后的手段。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:33:01.197

我可以看到 2 个原因

1.外部访问您的 REST 服务，缓存被优化，因为客户端是各种版本的浏览器。内部访问 REST 服务的前端应用程序可能没有实现非常好的缓存机制。

2.AppEngine是否对内部流量收费？如果不是，那么这可能是给予外部 IP 优先于内部 IP 的原因？

# ruby-on-rails - 如何在循环中分配哈希数组？

> ID：14349395
> 
> 赞同：0
> 
> 时间：2013-01-16T00:17:12.833
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我正在尝试将 ActiveRecord 对象中的 MySQL 时间戳转换为另一种时间戳格式。我的方法采用一个 ActiveRecord 记录数组并返回一个哈希数组，其中包含带有格式化时间戳的时间戳字段：

```
def convert_mysql_timestamps(records)
    ary = []
    hash = {}
    records.each_with_index do |record, i|
      record.attributes.each do |field, value|
        if time_columns.include?(field) and value then
          hash[field] = value.strftime("%Y-%m-%dT%H:%M:%S%z")
        else
          hash[field] = value
        end
      end
      ary[i] = {}
      ary[i] = hash
    end
    ary
  end 
```

但是，在`ary[i] = hash`分配时，所有`ary`元素都设置为散列。

有没有更好的方法来转换记录的时间戳字段？（我不需要将记录保存回数据库。）另外，如何让数组捕获记录的每个单独的哈希表示？

输入：

```
[#<Vehicle id: 15001, approved_at: "2011-03-28 10:16:31", entry_date: "2011-03-28 10:16:31">, #<Vehicle id: 15002, approved_at: "2011-03-28 10:16:31", entry_date: "2011-03-28 10:16:31">] 
```

期望的输出：

```
[{"id"=>15001, "approved_at"=>"2011-03-28T10:16:31-0700", "entry_date"=>"2011-03-28T10:16:31-0700"}, {"id"=>15002, "approved_at"=>"2011-03-28T10:16:31-0700", "entry_date"=>"2011-03-28T10:16:31-0700"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:17:01.160

问题是您正在创建一个哈希：

```
def convert_mysql_timestamps(records)
  ary = []
  hash = {}
  #... 
```

然后尝试为每条记录重复使用。您可能希望每次`each_with_index`迭代都有一个新的哈希：

```
 def convert_mysql_timestamps(records)
    ary = []
    records.each_with_index do |record, i|
      hash = { }
      record.attributes.each do |field, value|
        #...
      end
      ary[i] = hash
    end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:23:41.137

您可以使用`map`它 - 当您想要以一种格式获取数组并以另一种格式生成相同大小的数组时，它始终是一个不错的选择。就是这样：

```
def convert_mysql_timestamps(records)
  records.map do |record|
    Hash[records.attributes.map{|k, v| [k, convert_mysql_timestamp(v)] }]
  end
end

def convert_mysql_timestamp(field, value)
  return value unless time_columns.include?(field) && value
  value.strftime("%Y-%m-%dT%H:%M:%S%z")
end 
```

它是这样工作的：

*   `Hash[array_of_pairs]`将键值对数组 - 像`[["foo", 2], ["bar", 3], ...]`- 变成像`{"foo" => 2, "bar" => 3, ...}`.

*   `map`为集合中的每个项目调用其块，并将块的每个返回值收集到一个新数组中，然后返回。内部创建键值对数组，外部`attributes.map`将所有哈希收集到返回的数组中。`Hash[...]``records.map`

我建议阅读[Enumerable](http://ruby-doc.org/core-1.9.3/Enumerable.html)中的方法，因为那里有很多类似`map`的东西。你会发现你几乎不需要在你的循环中使用索引，尽管如果你来自另一种语言并且`for`到处都有循环，那么你很难改掉这个习惯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:49:25.630

我不确定你`time_columns`是什么，但假设它们是`Time`类，你可以简化部分，如`value.is_a?(Time)`.

```
def convert_mysql_timestamps(records)

 records.collect do |record|
   # assuming records are from a Rails model, I am using #attributes 
   # to loop through all fields in a record 
                    # then inject values in this hash -> ({}), 
                    # which is in the block, named attributes
   record.attributes.inject({}) do |attributes, (column_name, value)|
     # if it is Time, convert it to iso8601 (slightly different from your format, 
     # but if this is also acceptable, your code can be simpler)
     attributes[column_name] = (value.is_a?(Time) ? value.iso8601 : value)
     attributes
   end
 end

end 
```

# html - HTML 断开的链接

> ID：14349396
> 
> 赞同：0
> 
> 时间：2013-01-16T00:17:16.077
> 
> 标签：html

出于某种原因，几个小时前我在我们的网站上工作，突然链接停止工作。我们也在更新后端。这些 html 文件甚至无法在我的计算机上本地运行。源中的链接是正确的。有什么问题？

```
<div id="links">
                <ul class="leftNav">
                    <li class="leftLink"><a href="home.html" >Home</a></li>
                    <li class="leftLink"><a href="howitworks.html" >How It Works</a></li>
                </ul>
                <ul class="rightNav">
                    <li class="rightLink"><a href="signup.html">Sign Up</a></li>
                    <li class="rightLink"><a href="http://bit.ly/SJNLot">Donate</a></li>
                </ul>
            </div><!-- end links -->
            <div id="social">
                <ul id="socialList">
                    <li><a id="twitter" href="http://bit.ly/SBBKAi" target="_blank">Twitter</a></li>
                    <li><a id="facebook" href="http://on.fb.me/SBBEZj" target="_blank">facebook</a></li>
                </ul>
            </div><!-- end social --> 
```

它与我的文档类型有关吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
"http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

# django - Django per-view 缓存是否添加 HTTP 标头？

> ID：14349400
> 
> 赞同：0
> 
> 时间：2013-01-16T00:17:26.743
> 
> 标签：django, caching, cache-control

在每个站点缓存的情况下，添加了一些标头：Last-Modified、Cache-Control 等。请参阅[Django per-site cache](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#the-per-site-cache)。

我想知道 Django 是否也将它们添加到按视图缓存中。如果没有，是否有直接的方法告诉 Django 添加它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:22:52.843

是的，它只是将 UpdateCacheMiddleware 和 FetchFromCacheMiddleware 应用于特定视图。

# ios - 从左到右的核心动画

> ID：14349404
> 
> 赞同：1
> 
> 时间：2013-01-16T00:17:55.610
> 
> 标签：ios, objective-c, cocoa-touch, core-animation

我正在构建一个 IOS 应用程序。

我正在尝试做以下核心动画

文本 1 出现在中心 然后由文本 2 替换，方法是让文本 2 从左到右移动以替换文本 1 然后让文本 3 从左到右移动以替换文本 2 然后让文本 4 从左到右移动以替换文本3.

每个文本基本上都跳进去替换文本1、2、3。所以每个文本都冲进去替换前面的文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:43:09.660

您没有提及您使用的是 UILabels 还是 CATextLayers。这是使用 CATextLayers 的一种方法：

首先创建要设置动画的图层并将其添加到图层树中。我在 viewDidLoad 中做到了：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  _strings = @[@"Hello world", @"Goodbye cruel world", @"Hello again", @"And again, goodbye!"];

  _textLayer = [CATextLayer layer];
  [_textLayer setString:[_strings objectAtIndex:0]];
  [_textLayer setBounds:CGRectMake(0.0f, 0.0f, 400.0f, 50.0f)];
  [_textLayer setPosition:[[self view] center]];
  [_textLayer setForegroundColor:[[UIColor orangeColor] CGColor]];
  [_textLayer setAlignmentMode:kCAAlignmentCenter];

  [[[self view] layer] addSublayer:_textLayer];
} 
```

然后，将一个按钮连接到此插座。对于文本层的“字符串”属性的每次更改，您都会看到从左到右的推送动画。

```
- (IBAction)didTapChangeText:(id)sender
{
  NSInteger index = arc4random() % [_strings count];

  CATransition *transition = [CATransition animation];
  [transition setType:kCATransitionPush];
  [transition setSubtype:kCATransitionFromLeft];

  // Tell Core Animation which property you want to use the
  // transition animation for. In this case 'string'
  [_textLayer addAnimation:transition forKey:@"string"];

  // Trigger the animation by setting the string property
  [_textLayer setString:[_strings objectAtIndex:index]];
} 
```

根据您的描述，这应该可以为您提供所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:35:17.120

您好，您可以使用 UIView 的 animateWithDuration:delay:options:animations:completion 方法来执行这些动画。只需将它们嵌套在完成块中即可将它们链接在一起。我认为它们仅适用于 iOS 3.2 及更高版本。

```
UILabel *labelText2;  // Can be set up in Interface Builder, linked as IBOutlet
CGRect rectLabel2 = labelText2.frame;
rectLabel2.center = labelText2.superview.center;

[UIView animateWithDuration:1.0f delay:0.0f options:nil animations:^(){
  labelText2.frame = rectLabel2;  // Animates labelText2 to the center of its container view
} completion:^(BOOL finished) {

  // Continue with other animation using another UIView animateWithDuration block...
  UILabel *labelText3; // Setup in Interface Builder on the left outside of the container view
  CGrect rectLabel3 = labelText3.frame;
  rectLabel3.center = labelText3.superview.center;

  [UIView animateWithDuration:1.0f delay:0.0f options:nil animations:^(){
    labelText3.frame = rectLabel3;

  } completion:^(BOOL finishedInside) {
    // Nest in Label4, Label5 etc...
  }];
}]; 
```

更多信息在这里 [http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)

# java - 在 IntelliJ IDEA 中设计一个 JFrame

> ID：14349413
> 
> 赞同：4
> 
> 时间：2013-01-16T00:18:43.757
> 
> 标签：java, forms, user-interface, intellij-idea, jframe

尝试 IntelliJ IDEA，但我终生无法弄清楚如何设计 JFrame。在 Eclipse 中，WindowBuilder 将创建一个新的 JFrame 子类并生成 Java 源代码。我已更改 IDEA 的设置以生成 java 源代码，但 IDEA 似乎喜欢生成 JPanel 并将它们设置为 JFrame 实例的根窗格。我是在看什么东西还是这是一个设计选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:19:10.530

这是一种设计选择，您需要编写自己的代码来创建顶级框架，然后您可以将在 GUI 设计器中创建的面板添加到其中。同样影响无法设计 JMenu 和状态栏。

如果您正在为 IDEA（和其他 IDE）寻找更高级的 GUI 设计器，请查看[JFormDesigner](http://www.formdev.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-17T13:23:21.820

做这个：

*   右键单击 com.something（你的包名）-> 新建 -> Swing UI Designer -> GUI 表单

# php - PDO 检查结果是否存在并呈现字母菜单

> ID：14349415
> 
> 赞同：0
> 
> 时间：2013-01-16T00:18:52.120
> 
> 标签：php, pdo

我想检查查询是否带来结果。现在我为我的查询做一个行计数。如果行数 > 则 0 我再次创建一个新查询来获取查询的所有结果。当我在 az 的范围内创建一个字母查询循环（即`WHERE name LIKE "a%"`）时，它将导致 52 个查询来完成任务，这在 imo 中有点过分了。你将如何面对这样的任务？结果我想呈现一个带有字母顺序链接的菜单。

```
A
----
Apple Link
Annanas Link

B
----
Banana Link

etc. 
```

也许还有另一种方法可以在一个查询中做到这一点，并以某种方式分解结果字母，因为我需要为每个字母呈现一个新的引入菜单点。我希望你有一些有用的指针来调整我的表现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:27:47.977

您不能一次选择所有内容并按列排序吗？

```
SELECT * FROM your_table ORDER BY column_name ASC 
```

然后，如果有行，您可以循环并比较第一个字母以确定您所在的字母：

```
$stmt->execute();
if ($stmt->rowCount()) {
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        $value = $row['column_name'];
        $first_letter = $value[0];
    }       
} 
```

一旦你有了第一个字母，你就可以对这个值做任何你想做的事情

要扩展此答案，您可以使用类似这样的方法来回显带有标题的值：

```
// initialize this variable
$current_letter = '';

// if you get results
if ($stmt->rowCount()) {
    // loop through each row
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        // when you loop, get the value
        $value = $row['column_name'];
        // if the value does not have the current letter you are on:
        if ($current_letter != $value[0]) {
            // echo a header for the new letter
            echo "<h2>" . $value[0] . "</h2>";
            // set the new letter to the current letter
            $current_letter = $value[0];
            // echo the actual value
            echo $value . "<br />";
        } else {
            // the value falls under our current letter, echo it
            echo $value . "<br />";
        }
    }
} 
```

# c# - 如何在不涉及 Visual Studio 的情况下编译 C# 解决方案？

> ID：14349419
> 
> 赞同：0
> 
> 时间：2013-01-16T00:19:10.620
> 
> 标签：c#, asp.net, visual-studio-2010, batch-file, aspnet-compiler

我是一个根本不特别喜欢 Visual Studio 的人，我更愿意使用我高度配置的 gvim 来编辑代码，而不是被隔离在 IDE 中。

因此，我的目标是找到一种方法来为 Web 应用程序编译 C# 代码，而不需要我只需要偶尔使用的臃肿的 >2gb 怪物。

目前，我可以使用以下批处理脚本编译现有代码：http: [//www.codeproject.com/Questions/495608/howplustopluspublishplussiteplususingplusaspnet_co](http://www.codeproject.com/Questions/495608/howplustopluspublishplussiteplususingplusaspnet_co)

问题在于需要项目文件和解决方案文件。有没有办法隔离这些是如何生成的（如果我可以获得 Visual Studio 使用的现有脚本，我可以在自动化脚本中使用远程机器的副本）或自己生成它们？

或者，有没有办法为较小的项目和个别形式绕过它们？不幸的是，我对 aspnet_compiler 的了解有限。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T00:26:58.227

命名空间是你的`Microsoft.Build`朋友！

示例：制作一个 csproj：

```
var pathToLibs = @"..\..\..\libs\";

Engine engine=new Engine();
engine.BinPath=RuntimeEnvironment.GetRuntimeDirectory();

Project project=engine.CreateNewProject();    
project.AddNewImport(@"$(MSBuildBinPath)\Microsoft.CSharp.targets", null);

BuildPropertyGroup props=project.AddNewPropertyGroup(false);
props.AddNewProperty("AssemblyName", "myassembly");
props.AddNewProperty("OutputType", "Library");

BuildItemGroup items=project.AddNewItemGroup();    
var asmRef = items.AddNewItem("Reference", "SomLibFile");
asmRef.SetMetadata("HintPath", Path.Combine(pathToLibs, @"SomeLibFile.dll"));
items.AddNewItem("Compile", "somefile.cs");

project.Save(@"c:\temp\myproject.csproj"); 
```

从解决方案（.sln 文件）生成“元项目”文件：

```
var foo = SolutionWrapperProject.Generate(
   @"path.to.my.sln", 
    "4.0", 
    null); 
```

*翻找，翻找*啊哈——我知道我有这个；实际构建生成的元项目/解决方案文件的项目的示例：

```
var solutionProjects = 
    from buildLevel in Enumerable.Range(0, 10)
    let buildLevelType = "BuildLevel" + buildLevel
    let buildLevelItems = slnProj.GetItems(buildLevelType)
    from buildLevelItem in buildLevelItems
    let include = buildLevelItem.EvaluatedInclude
    where !(include.Contains("UnitTests") || include.Contains("Unit Tests"))            
    select new { Include=include, Project = pc.LoadProject(Path.Combine(basePath, include))};

foreach (var projectPair in solutionProjects)
{
    var project = projectPair.Project;
    string.Format("OutDir={0}", project.ExpandString("$(OutDir)")).Dump();
    string.Format("OutputPath={0}", project.ExpandString("$(OutputPath)")).Dump();
    continue;
    var include = projectPair.Include;
    var outputPath = outputDir;
    project.SetProperty("OutputPath", outputPath);
    var projectLogger = new BasicFileLogger();    
    var tempProjectLogPath = Path.GetTempFileName();
    projectLogger.Parameters = tempProjectLogPath ;

    Console.WriteLine("Building project:" + project.DirectoryPath);
    var buildOk = project.Build("Build", new[]{projectLogger});
    if(buildOk)
    {
        Console.WriteLine("Project build success!");
    } 
    else
    {
        var logDump = File.ReadAllText(tempProjectLogPath);
        logDump.Dump();
        throw new Exception("Build failed");
    }
} 
```

# php - 返回超过 1 行的子查询

> ID：14349421
> 
> 赞同：1
> 
> 时间：2013-01-16T00:19:14.793
> 
> 标签：php, mysql, sql, select

嗨，我想做的是通过一个查询从一个表中获取一些客户详细信息以及另一表中的所有项目。我的子查询的当前问题是它将返回超过 1 行并导致错误。有没有办法解决这个问题，或者我应该使用 2 个单独的查询？

我想在查询中使用 PDO fetchAll() 来返回他们的名字和姓氏以及包含所有项目的子数组。

所以结果可以通过 $result['First Name'], $result['First Name'], $result['product'][0], $result['product'][1], $result[ '产品'][3] 等

当前声明：

```
SELECT `First Name`, `Last Name`, 

(SELECT `items`.`Product Name` from items 
inner join customers on `customers`.`Customer No` = `items`.`Customer No` 
WHERE `customers`.`Customer No` = '6') 

AS product from customers where `Customer No` = '6' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:22:47.473

尝试加入他们，

```
SELECT  a.`First Name`, 
        a.`Last Name`, 
        b.`Product Name`
FROM    customers a
        INNER JOIN items b
            ON a.`Customer No` = b.`Customer No` 
WHERE   a.`Customer No` = '6' 
```

由于连接定义的类型，此查询将仅返回`customers`在表上至少有一个匹配项： 。但是，如果您仍然希望客户记录显示/检索它是否在 table 上具有匹配值，请更改为（*OUTER join*）`item``INNER JOIN``Items``INNER JOIN``LEFT JOIN`

 *要了解有关联接的更多信息，请访问以下文章，

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:23:50.890

如果你只想返回一行，你可以添加一个 LIMIT 1。但我认为这不是你想要的。

如果要返回与客户关联的所有项目，可以使用 LEFT JOIN，如下所示：

```
SELECT c.`First Name`
     , c.`Last Name`
     , i.`Product Name` AS product
  FROM customers c
  LEFT
  JOIN items i
    ON i.`Customer No` = c.`Customer No`
 WHERE c.`Customer No` = '6' 
```

注意：这`LEFT JOIN`将返回来自客户的所有行，以及来自项目的任何匹配行。如果有一个客户在项目故事中没有任何行，则该`product`列将为 NULL。如果您想排除没有任何商品的客户（如果您不想返回一行），请删除该`LEFT`关键字。关键字的缺失`LEFT`相当于指定了不必要的关键字`INNER`)。

* * *

要从客户表中获取单行以及一个相关项目，那么您在 SELECT 列表中使用子查询的方法可能是有效的。

但是您不需要在该子查询中执行 JOIN 操作，您可以引用外部查询中的值（使其成为相关子查询）。这里的关键是向子查询添加一个 LIMIT 1 以确保它返回不超过 1 行。

```
SELECT `First Name`
     , `Last Name`
     , ( SELECT `items`.`Product Name` 
           FROM `items`
          WHERE `items`.`Customer No` = `customers`.`Customer No`
          ORDER BY `items`.`Product Name` 
          LIMIT 1
       ) AS product  
  FROM customers 
 WHERE `Customer No` = '6' 
```

ORDER BY 不是必需的，但它使结果集具有确定性。也就是说，在没有 ORDER BY 的情况下，MySQL 可以自由地返回满足谓词的任何行。随后的运行可能会返回不同的结果。这没有什么问题，但如果你不期待它可能会出乎意料。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:13:43.690

我认为不可能在一行中返回一个数组，但是您可以做的是使用`group_concat`将这些值加入到一个字符串中，然后您可以稍后将其分解：

```
SELECT `customers`.`First Name`, `customers`.`Last Name`,
GROUP_CONCAT(`items`.`Product Name` SEPARATOR '$^$') AS `Products` 
FROM customers 
JOIN items 
ON `customers`.`Customer No` = `items`.`Customer No` 
WHERE `customers`.`Customer No` = 6 
GROUP BY `Customer No`

$products=explode("$^$",$result[0]['products']); 
```

的默认分隔符在使用 explode`group_concat`时`,`可能非常危险，因此我们使用`SEPARATOR '$^$'`添加一堆不太可能出现的随机字符来代替。*

# android - 无法将完全签名的 apk 文件安装到 hero live 设备 2.3 版

> ID：14349424
> 
> 赞同：0
> 
> 时间：2013-01-16T00:19:29.633
> 
> 标签：android, apk, adb, dalvik

我已经把自己的屁股踢了 3 个小时，试图让它发挥作用......

无法在我的 htc hero 上安装完全签名的 apk 文件。目标版本最低：3，目标：15 英雄正在运行 9

我正在使用 htc 同步实用程序进行安装，并已成功安装其他 3rd 方 apk 文件。

可调试标签已被删除。

错误信息：安装失败。请检查文件并确保手机有足够的空间进行安装。这不是错字，它说的是“手机”

我尝试了许多不同的清单配置，但结果都一样。有大约 100 毫克内存和 2 GB 的 SD 可用。apk 文件大约 10k，并已签名。

我在 adb/eclipse 上从设备运行任何构建都没有问题。

我整个下午都在尝试处理多个文件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:48:36.690

首先在设置中启用从未知来源安装应用程序。然后有几种方法可以继续：

*   将 .apk 移动到设备的 sd 卡并使用文件管理器
*   通过电子邮件将 .apk 作为附件发送并在设备上打开
*   将 .apk 放入 Dropbox 或 Google Drive 或其他文件共享服务，然后在设备上打开 .apk。

# python - python中的装饰器让我很困惑

> ID：14349426
> 
> 赞同：0
> 
> 时间：2013-01-16T00:19:36.873
> 
> 标签：python, decorator, python-decorators

我有一个简单的装饰器，输出让我很困惑。

```
def deco(func):
   def kdeco():
      print("before myfunc() called.")
      func()
      print("  after myfunc() called.")
   return kdeco

@deco
def myfunc():
   print(" myfunc() called.")

myfunc()

before myfunc() called.
 myfunc( deco(myfunc)()) called.
  after myfunc() called.

deco(myfunc)()

before myfunc() called.
before myfunc() called.
 myfunc() called.
  after myfunc() called.
  after myfunc() called. 
```

我知道 myfunc() 的输出，但是 deco(myfunc)() 的输出让我很困惑，为什么 deco(myfunc)() 的输出不能是下面的任何一个？

状态一：

```
before myfunc() called.
before myfunc() called.
 myfunc() called.
 myfunc() called.
  after myfunc() called.
  after myfunc() called. 
```

状态二：

```
before myfunc() called.
 myfunc( deco(myfunc)()) called.
  after myfunc() called.
before myfunc() called.
 myfunc( deco(myfunc)()) called.
  after myfunc() called. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:26:30.520

`myfunc`本身已经被你的装饰器包裹了。名称`myfunc`不再指向原始方法，它现在指向的返回值`deco(myfunc)`：

```
>>> def deco(func):
...    def kdeco():
...       print("before myfunc() called.")
...       func()
...       print("  after myfunc() called.")
...    return kdeco
... 
>>> @deco
... def myfunc():
...    print(" myfunc() called.")
... 
>>> myfunc
<function kdeco at 0x10068cb18> 
```

这是因为`@decorator`语法与以下内容相同：

```
def myfunc():
    # body of function
myfunc = deco(myfunc) 
```

所以`myfunc`已经在生产线`before ..`，然后`.. called`，然后`after ..`。现在你再把它包*起来*。包装器打印`before ..`，调用包装器`myfunc`（本身已经包装），它打印`before ..`，然后`.. called`，然后`after ..`，然后包装器打印`after ..`。

在图表中：

```
call wrapped myfunc():
    kdeco: "before .."
    call original myfunc()
        original myfunc: ".. called"
    kdeco: "after .."

call deco(myfunc)():
    kdeco: "before .."
    call wrapped myfunc():
        kdeco: "before .."
        call original myfunc()
            original myfunc: ".. called"
        kdeco: "after .."
    kdeco: "after .." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:24:36.180

装饰函数只被调用一次，因此它不能声称被调用了两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T00:26:48.930

装饰器实际上只是您可以手动执行的操作的捷径。这段代码：

```
@deco
def myfunc():
    print(" myfunc() called.") 
```

相当于：

```
def myfunc():
    print(" myfunc() called.")
myfunc = deco(myfunc) 
```

为了讨论这个问题，假设原件仍然可用`original_myfunc`（尽管实际上它不是）。

所以，当你这样做时：

```
deco(myfunc)() 
```

你最终调用的是：

```
deco(deco(original_myfunc))() 
```

如果你追溯它，应该很明显为什么它会打印你所期望的。但无论如何，让我们做这个练习。

首先，您调用`deco(original_myfunc)`，它会执行以下操作：

```
def kdeco():
   print("before myfunc() called.")
   original_myfunc()
   print("  after myfunc() called.") 
```

返回 kdeco

这样就返回了一个打印“之前”的函数，调用`original_myfunc`，然后打印“之后”。

现在我们再次传递`deco(original_myfunc)`给`deco`它，它会这样做：

```
def kdeco():
   print("before myfunc() called.")
   deco(original_myfunc)()
   print("  after myfunc() called.")
return kdeco 
```

因此，它返回一个打印“之前”的函数，然后调用`deco(original_myfunc)`——它本身打印“之前”，调用`original_myfunc`并打印“之后”——然后打印“之后”。

这就是为什么你得到你所做的输出。

# html - 如何通过 CSS 将背景图像设置为按钮？

> ID：14349427
> 
> 赞同：0
> 
> 时间：2013-01-16T00:19:47.880
> 
> 标签：html, css, button, input, background

我有以下 HTML：

```
<button id='addEVENT' class='normal b-all'></button> 
```

这个CSS：

```
#addEVENT { 
    width:50px;
    height:25px;
    background:#EEEEEE url('icons/444444/pencil.png') no-repeat fixed center;
} 
```

'normal' 类调整字体样式，'b-all' 添加边框以替换丑陋的默认边框。颜色显示但不是图像，我尝试了许多 CSS 变体但无济于事。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:23:29.723

该路径`icons/444444/pencil.png`是相对于 CSS 文件的位置的。假设 CSS 在里面`css/`，这意味着你指向`css/icons/444444/pencil.png`.

如果这不正确，请相应地修改路径（例如`../icons/444444/pencil.png`）。

# php - 在本地 mysql 数据库中缓存 SOAP Web 服务

> ID：14349437
> 
> 赞同：1
> 
> 时间：2013-01-16T00:20:08.297
> 
> 标签：php, mysql, web-services, soap

我正在检索多个soap xml 文件（来自同一服务器）并创建了一个简单的php 应用程序来显示、搜索和添加soap xml 数据中的购物车列表。

有很多数据，即使我限制它，响应时间仍然太慢，无法有效地用于实时获取和设置数据（10 秒+）

所以，我正在考虑获取每个相关的肥皂提要，并每天自动将数据添加到 mysql 数据库中。然后直接使用数据库。在提交订单时，我将更新soap web 服务中的相关订单数据。

这是正确的方法吗？有没有其他选择？如何执行数据库的自动更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:41:19.847

您将生成 Web 服务的镜像。具有优点（更好的性能）和缺点（不是实时数据）。如果你问我，**我不会这样做，**因为它违背了面向服务环境的原则。

如果您想缓存 SOAP 服务器的响应，您和 SOAP 服务器之间的 HTTP 代理将是最透明的方法。它会缓存响应，但您的应用程序仍然认为它是实时数据（并且可以保持不变）

此外，我会尝试加快 SOAP 通信。例如，您可以使用类似`socket_select()`方法的技术同时发送多个请求。

# spring - 如何绕过重置会话的到期

> ID：14349439
> 
> 赞同：5
> 
> 时间：2013-01-16T00:20:32.090
> 
> 标签：spring, spring-mvc, session-variables

我有一个网页，在登录后，您基本上会坐在一个页面上并做几件导致 AJAX 请求的事情。

由于 AJAX 请求与普通 HTTP 请求没有什么不同，因此它们在到达服务器时会根据需要延长会话的到期时间。

我对此没有任何问题，因为只有在用户与服务器交互时才应该扩展用户的会话，这是有道理的。

由于用户基本上停留在这一页上，我希望能够在他们的会话过期时通知他们，而不是让他们在超时发生后尝试通过任何操作访问服务器时找出困难的方法。

因此，我被要求实现类似于我在银行网站上经常看到的东西，`alert`在用户会话到期之前会出现一个弹出窗口 ( )。我不需要它在之前出现，但是“一旦”它过期（或者在它发生后尽可能接近），所以用户不能在页面上做任何事情并且不小心被重定向到登录页面。

我最初的想法是轮询服务器并每 30 秒左右检查一次。问题在于 AJAX 请求会重置会话的到期时间（即 30 分钟），从而使使用此轮询的点无效。

当然，一个“解决方案”是在 Javascript 中处理这个问题——当接收到正常操作的 AJAX 请求时，重置一个计时器。此计时器将在设置后 30 分钟运行。而且我知道这不会太难，因为我可以将它附加到 jQuery 的全局 AJAX 处理程序，以便它在每次成功的 AJAX 调用后重置计时器，但我似乎不适合跟踪会话时间出在两个地方。我宁愿“浪费”资源并经常进行 AJAX 调用。我只是不希望用户不得不做一些事情来找出他们的会话何时到期 - 如果他们离开他们的计算机 31 分钟，我希望在他们回来时有一条消息说他们的会话已经过期并且他们会被重定向。

从我浏览的许多文章/解释中，我真的找不到任何适用于我的情况的东西。我见过使用 Spring Security 的东西，但不幸的是我们没有使用它，因为我们不使用普通的用户名/密码方案，并且无法弄清楚如何自定义它来工作。

我已经看到了“过滤器”或“拦截”这些术语，但我不确定我是否可以使用它们，因为它似乎是一个安全问题。

所以基本上，我正在寻找一种能够在会话过期时进行 HTTP 请求检查的方法，而无需重置其过期时间。我基本上只需要基于此（我可以弄清楚）以某种形式的真/假来回应。

我真的很想在服务器上保留这种处理，并允许在会话超时时进行轮询，因此 HTTP 请求需要能够查看会话的当前状态并进行分析，但不能重置超时。

如果有帮助，我的会话声明如下：

```
@Component
@Scope(value = "session", proxyMode = ScopedProxyMode.TARGET_CLASS)
public class UserDataSession { 
```

我的控制器像这样使用它：

```
@Autowired
private UserDataSession userDataSession; 
```

有没有办法绕过请求映射中会话到期的重置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:22:14.067

您可以发出不发送任何 cookie 或 jsession id 的 ajax 请求，因此服务器认为它是一个新会话，并且不会扩展实际会话。您还需要以另一种方式将 jsession id 传递给服务器，以便服务器可以查找会话以查看它是否需要过期。

以下是阻止 cookie 的一些想法： [防止 cookie 在 AJAX 请求上发送](https://stackoverflow.com/questions/2829201/prevent-cookies-from-being-sent-on-ajax-request)

# java - 使用 J2ME 接收 SMS 消息

> ID：14349440
> 
> 赞同：1
> 
> 时间：2013-01-16T00:20:36.747
> 
> 标签：java, multithreading, java-me, sms, lwuit

想知道我是否可以在以下方面获得帮助。我正在创建一个 J2ME 应用程序，它发送/接收用于登录的短信。

因此，用户在某些文本字段中提供他们的用户名和密码，并发送一条短信以检查提供的详细信息是否正确。一条短信被发送回发件人，其中包含关于是否允许登录的真/假。

现在我被困住了。我可以发送带有登录详细信息的短信，也可以向发件人发回一条消息，但我想显示一个对话框，请等到收到消息。我可能需要使用线程/睡眠等，但不完全确定如何

大部分发送和接收代码与[这里类似](http://jimmod.com/blog/2011/02/jimmys-blog-send-receiving-on-specific-port-with-j2me-application/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:44:40.390

当您收到消息时，您需要执行可以关闭的静态对话框。

```
 Display.getInstance().callSerially(new Runnable() {

                public void run() {
                     progressDialog = new Dialog(); // progressDialog while be static 
                     Label msg= new Label("Wait");
                     progressDialog.addComponent(msg);
                }
            }); 
```

# java - 与更改每个版本的外部 API 一起工作的 Java 代码的良好组织是什么？

> ID：14349442
> 
> 赞同：3
> 
> 时间：2013-01-16T00:20:50.790
> 
> 标签：java

具体来说，我使用了一个 JSON RPC API。API 版本之间的规范可能会有所不同，但当我连接时，我总能知道它是什么版本。我有大约 30 个使用可用 JSON RPC 方法的包装器方法。

你是否在任何你看到改变的地方插入 switch 语句？或者编写全新的方法以使其更易于管理，即使大多数 API 的功能没有改变并且您的代码也不必改变？

**编辑**：我忘了提到我希望我的代码可以使用这个 API 的**多个版本**，即。我不能只更新我的代码以使用 2.0 版，因为我可能想在提供此服务的另一台服务器上使用它，该服务器的版本为 1.8。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T00:25:27.720

我会将外部 API 隐藏在您自己的内部接口后面，然后有处理外部 API 特定版本的实现。

换句话说，在您和外部 API 之间添加另一层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:24:43.093

听起来像是一份继承权的工作。

每个版本都可以有一个基类或接口和子类。如果有帮助，您甚至可以对子类进行子类化，例如，如果有一个仅更改一种方法的点发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:32:13.643

您可以使用数据访问对象的相同思想来组织您的代码。什么数据访问对象是一个单独的类，它具有查询数据库并从中检索数据的方法。例如，如果您有一个名为 Person 的类，并且人员类需要访问数据库以获取电话号码、名字、姓氏等数据。它可以使用此 DAO（数据访问对象的缩写）来获取这些值。它的好处是，假设您的老板要求您将数据库从 MySQL 更改为 MongoDB。然后，您不必更改 Person 类中的任何单个代码，只需修改 DAO 类以使用 MongoDB 而不是 MySQL。我的建议是创建一个为您正在使用的外部 API 构建的类，并使您的应用程序中的所有类都使用该类与外部 API 进行交互。每当 API 更新时，您只需要修改（修复）这个类，而不必触及任何其他类。我希望你明白我的意思 =)

# mongodb - 我可以在我的 mongodb 文档中禁用 ObjectId 吗？

> ID：14349443
> 
> 赞同：2
> 
> 时间：2013-01-16T00:20:51.683
> 
> 标签：mongodb

我有大量数据记录，并且每个记录在我的域中都有唯一的 id。那么我可以在 mongodb 的插入文档中禁用（不保存）ObjectID 吗？这将占用大量磁盘空间...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T00:44:20.383

该`_id`字段是强制性的，您需要为每个文档提供一个唯一值，但它不必是 ObjectID。您可以改用整数值来节省空间，但您需要确保每个文档的值是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T05:32:51.587

使用您域中的唯一 ID 作为 _id .. 如果您没有提及 _id 。Mongo 自动分配 ObjectId。ObjectId 的类型是 ObjectID。

# mysql - MySql 查询特定状态并将城市与返回的结果分开

> ID：14349445
> 
> 赞同：0
> 
> 时间：2013-01-16T00:21:01.447
> 
> 标签：mysql, sql

我在mysql表中有以下数据：

```
Spring Texas
Corpus Christi Texas
Orange California
Los Angeles California 
```

数据的右边永远是州名。我想运行一个仅显示加利福尼亚城市的 sql 查询，并将 $city 设置为返回字符串的城市名称部分的数组。有些城市有空间，如洛杉矶，有些则没有。

实现此目的的最佳方法是什么，以确保我只获得加利福尼亚城市，并且只有分配给 $city 的城市部分

像这样的东西，但从 sql 的角度来看，这是最好的方法吗？

```
Select
   terms.name
From
  terms
Where
  terms.name Like '%Texas%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:24:42.030

尝试标准化数据。

如果不能，请设置一个带有州名的表格。

```
SELECT c.col,
  TRIM(SUBSTR(c.col, 1, LENGTH(c.col) - LENGTH(c.state))) AS city,
  c.state AS state
FROM (SELECT a.col,
    CASE
      WHEN b.state IS NULL
        THEN SUBSTRING_INDEX(a.state, ' ', -1)
      ELSE b.state
    END AS state
  FROM
    (SELECT col,
      CASE
        WHEN LENGTH(col) - LENGTH(REPLACE(col, ' ', '')) + 1 = 2
          THEN SUBSTRING_INDEX(col, ' ', -1)
        WHEN LENGTH(col) - LENGTH(REPLACE(col, ' ', '')) + 1 > 2
          THEN SUBSTRING_INDEX(col, ' ', -2)
        ELSE NULL
      END AS state
    FROM bad_data) a
  LEFT JOIN state_names b ON b.state = a.state) c 
```

**结果**

```
| 色彩 | 城市 | 状态 |
-------------------------------------------------- ----
| 德克萨斯州春季 | 弹簧 | 德州 |
| 德克萨斯州科珀斯克里斯蒂 | 科珀斯克里斯蒂 | 德州 |
| 橙色加利福尼亚 | 橙色 | 加利福尼亚 |
| 纽约纽约 | 纽约 | 纽约 |
```

## [查看演示](http://sqlfiddle.com/#!2/d4e9b/1)

如果你不能建立一个表，那么这个查询应该这样做：

```
SELECT c.col,
  TRIM(SUBSTR(c.col, 1, LENGTH(c.col) - LENGTH(c.state))) AS city,
  c.state AS state
FROM (SELECT a.col,
    CASE
      WHEN b.state IS NULL
        THEN SUBSTRING_INDEX(a.state, ' ', -1)
      ELSE b.state
    END AS state
  FROM
    (SELECT col,
      CASE
        WHEN LENGTH(col) - LENGTH(REPLACE(col, ' ', '')) + 1 = 2
          THEN SUBSTRING_INDEX(col, ' ', -1)
        WHEN LENGTH(col) - LENGTH(REPLACE(col, ' ', '')) + 1 > 2
          THEN SUBSTRING_INDEX(col, ' ', -2)
        ELSE NULL
      END AS state
    FROM bad_data) a
  LEFT JOIN (SELECT 'Alabama' AS state 
                  UNION ALL 
                  SELECT 'Arizona' 
                  UNION ALL 
                  SELECT 'Arkansas' 
                  UNION ALL 
                  SELECT 'California' 
                  UNION ALL 
                  SELECT 'Colorado' 
                  UNION ALL 
                  SELECT 'Connecticut' 
                  UNION ALL 
                  SELECT 'Delaware' 
                  UNION ALL 
                  SELECT 'Florida' 
                  UNION ALL 
                  SELECT 'Georgia' 
                  UNION ALL 
                  SELECT 'Guam' 
                  UNION ALL 
                  SELECT 'Hawaii' 
                  UNION ALL 
                  SELECT 'Idaho' 
                  UNION ALL 
                  SELECT 'Illinois' 
                  UNION ALL 
                  SELECT 'Indiana' 
                  UNION ALL 
                  SELECT 'Iowa' 
                  UNION ALL 
                  SELECT 'Kansas' 
                  UNION ALL 
                  SELECT 'Kentucky' 
                  UNION ALL 
                  SELECT 'Louisiana' 
                  UNION ALL 
                  SELECT 'Maine' 
                  UNION ALL 
                  SELECT 'Maryland' 
                  UNION ALL 
                  SELECT 'Massachusetts' 
                  UNION ALL 
                  SELECT 'Michigan' 
                  UNION ALL 
                  SELECT 'Minnesota' 
                  UNION ALL 
                  SELECT 'Mississippi' 
                  UNION ALL 
                  SELECT 'Missouri' 
                  UNION ALL 
                  SELECT 'Montana' 
                  UNION ALL 
                  SELECT 'Nebraska' 
                  UNION ALL 
                  SELECT 'Nevada' 
                  UNION ALL 
                  SELECT 'New Hampshire' 
                  UNION ALL 
                  SELECT 'New Jersey' 
                  UNION ALL 
                  SELECT 'New Mexico' 
                  UNION ALL 
                  SELECT 'New York' 
                  UNION ALL 
                  SELECT 'North Carolina' 
                  UNION ALL 
                  SELECT 'North Dakota' 
                  UNION ALL 
                  SELECT 'Ohio' 
                  UNION ALL 
                  SELECT 'Oklahoma' 
                  UNION ALL 
                  SELECT 'Oregon' 
                  UNION ALL 
                  SELECT 'Pennsylvania' 
                  UNION ALL 
                  SELECT 'Puerto Rico' 
                  UNION ALL 
                  SELECT 'Rhode Island' 
                  UNION ALL 
                  SELECT 'South Carolina' 
                  UNION ALL 
                  SELECT 'South Dakota' 
                  UNION ALL 
                  SELECT 'Tennessee' 
                  UNION ALL 
                  SELECT 'Texas' 
                  UNION ALL 
                  SELECT 'Utah' 
                  UNION ALL 
                  SELECT 'Vermont' 
                  UNION ALL 
                  SELECT 'Virginia' 
                  UNION ALL 
                  SELECT 'Washington' 
                  UNION ALL 
                  SELECT 'West Virginia' 
                  UNION ALL 
                  SELECT 'Wisconsin' 
                  UNION ALL 
                  SELECT 'Wyoming') b ON b.state = a.state) c 
```

# sql - 使用带 null 的算术表达式

> ID：14349448
> 
> 赞同：0
> 
> 时间：2013-01-16T00:21:31.717
> 
> 标签：sql, oracle, oracle10g

我编写了一个从特定表中选择列的 sql 语句。但是，我遇到的问题是能够在中间名列中显示数据，我不希望这种情况发生。

我不太确定在哪里添加 null 关键字，因为任何组合都会导致大量错误消息。

尝试使用 select 进行空值和算术运算。

我使用的语句是：

```
SELECT First_Name, Surname, Middle_Name as null,
 Price_Per_Unit, Vat, Quantity, Discount, Total_Cost,
 (Price_Per_Unit * Quantity) + Vat + Discount AS Total_Cost FROM Invoices 
```

帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:51:09.973

无需从表中选择 Middle_Name，只需将 NULL 放入该列（假设您需要在输出中有一个中间名列，并且您只是强制它始终为空）。

```
SELECT INV.First_Name, INV.Surname, NULL AS MiddleName,
 INV.Price_Per_Unit, INV.Vat, INV.Quantity,    INV.Discount, INV.Total_Cost,
 (INV.Price_Per_Unit * INV.Quantity) + INV.Vat + INV.Discount AS Total_Cost FROM Invoices INV 
```

# javascript - 如何在 HTML5/Javascript/Canvas 手机游戏中添加屏幕虚拟键盘？

> ID：14349449
> 
> 赞同：2
> 
> 时间：2013-01-16T00:21:41.213
> 
> 标签：javascript, html, canvas, keyboard, mobile-application

我正在使用 HTML5 和画布来设计一个需要键盘输入元素的游戏。我不想使用设备的键盘，而是想制作一个自定义键盘，在游戏过程中将其“固定”到屏幕/画布上。我看过[NETTUT 的](http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-keyboard-with-css-and-jquery/)CSS/JS/HTML5 键盘示例。我很想在该示例中重新创建类似 IOS 的界面。但是，我对集成到画布中的键盘感兴趣（换句话说，没有 CSS）。那可能吗？如果是这样，我使用哪些不同的方法来绘制键盘并使用 javascript 在画布内为其提供功能？缩放也是一个问题。我对 HTML5/CSS 非常熟悉，但我是 Javascript 的新手，所以请彻底打破它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-07T13:49:36.033

我在我的库项目（visual-js 游戏引擎）中执行此操作，请将此帖子[Virtual keyboar in canvas2d](https://www.linkedin.com/pulse/visual-js-09-virtual-keyboard-mobile-desktop-usage-nikola-lukic)。

现场示例：[托管在 jsfiddle](http://jsfiddle.net/zlatnaspirala/0u5j1ap8/)

可以实现的问题（制作简单的复制粘贴不是纯天然的）。在 v-js ge 中，您可以绘制自定义 canvas2d 代码。我建议你看看：

[键盘.js](https://bitbucket.org/nikola_l/visual-js/src/66a41e88cfc203bc9d202ef93902b5b76353d289/project/program_instance/lib/events/keyboard.js?at=master&fileviewer=file-view-default)

这是想法。使用 (x,y,w,h) 创建对象并在单击事件计算方法中创建 'is it clicked in object bounds' 。最好的方法是将它全部（obj's）放入数组中，然后在点击事件中检查谁的 obj 的 reseive 点击。

例如，该对象的绘制可以是：

```
if (obj.visible == true) {
 ctx.fillRect( obj.x , obj.y , obj.w , obj.h )
 ctx.fillText( obj.TEXT ,  obj.x -obj.w/2 , obj.y  ) // dont use height for ipad/iphone
 //  set up middle positon of text 
} 
```

您可以将 samo 模型对象用于键盘元素以及画布中的文本框元素。（*我不谈论 html 标签*）

在你的游戏中，一些动作已经完成，你需要为每个角色创建一个带有一个字符的 uniq 对象（“A”、“SHIFT”、“ENTER”等......）为每个 obj 定位。绘制所有键盘 obj 的。

' 现在您需要一些标志来了解当前的 ACTIVE_ELEMENT （游戏中的任何参数）。

**当您附加字符（一些特殊字符）时，存在一个大问题，**它们有一些文本格式变形。我问但没有答案（我稍后会发布这个问题）。

在这个代码块中是该问题的解决方案（我不能简单地传递当前键码的值）看起来像硬编码，但它只是我的解决方案：

```
ROOT.CAPTURE_CHAR = "";
ROOT.CLEAR_CAPTURE_ON_PRESS_ENTER = true;
ROOT.LAST_CAPTURE_CHAR = "";
ROOT.ENTER_PRESSED = false;
ROOT.SHIFT_PRESSED = false;
ROOT.ACTION_ON_KEY_DOWN = function(){}; 
```

...

```
//@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@
// SPECIAL FOR TEXTBOX
//@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@
SYS.DEBUG.LOG("KEYBOARD-->> Show users types : " + e.keyCode );         
var keynum;
if(window.event){ keynum = e.keyCode;}else{if(e.which){ keynum = e.which;}}
//console.log(String.fromCharCode(keynum));

if (e.keyCode == 16){
ROOT.SHIFT_PRESSED = true;
}

if (e.keyCode == 8) {
SYS.DEBUG.LOG("textbox delete last char!");         
ROOT.CAPTURE_CHAR = remove_last( ROOT.CAPTURE_CHAR );

}
else if(e.keyCode == 13){
ROOT.ENTER_PRESSED = true;
}
else {

if (ROOT.SHIFT_PRESSED == false) {

   if (e.keyCode == 189) {
    ROOT.CAPTURE_CHAR+="_";
    ROOT.LAST_CAPTURE_CHAR ="_";
  }
  else if (e.keyCode == 187) {
    ROOT.CAPTURE_CHAR+="+";
    ROOT.LAST_CAPTURE_CHAR ="+";
  }
  else if (e.keyCode == 187) {
    ROOT.CAPTURE_CHAR+="+";
    ROOT.LAST_CAPTURE_CHAR ="+";
  }
  else if (e.keyCode == 188) {
    ROOT.CAPTURE_CHAR+=",";
    ROOT.LAST_CAPTURE_CHAR =",";
  }
  else if (e.keyCode == 190) {
    ROOT.CAPTURE_CHAR+=".";
    ROOT.LAST_CAPTURE_CHAR =".";
  }
  else if (e.keyCode == 191) {
    ROOT.CAPTURE_CHAR+="/";
    ROOT.LAST_CAPTURE_CHAR ="/";
  }
  else if (e.keyCode == 186) {
    ROOT.CAPTURE_CHAR+=";";
    ROOT.LAST_CAPTURE_CHAR =";";
  }
  else if (e.keyCode == 222) {
    ROOT.CAPTURE_CHAR+="'";
    ROOT.LAST_CAPTURE_CHAR ="'";
  }
  else if (e.keyCode == 220) {
    ROOT.CAPTURE_CHAR+= "\\";
    ROOT.LAST_CAPTURE_CHAR ='\\';
  }
  else if (e.keyCode == 219) {
    ROOT.CAPTURE_CHAR+='[';
    ROOT.LAST_CAPTURE_CHAR ='[';
  }
  else if (e.keyCode == 221) {
    ROOT.CAPTURE_CHAR+=']';
    ROOT.LAST_CAPTURE_CHAR =']';
  }
  else{

    ROOT.CAPTURE_CHAR+=(String.fromCharCode(keynum).toLowerCase());
    ROOT.LAST_CAPTURE_CHAR = (String.fromCharCode(keynum).toLowerCase());

  }

}
else {

  if (e.keyCode == 50) {
    ROOT.CAPTURE_CHAR+="@";
    ROOT.LAST_CAPTURE_CHAR ="@";
  }
  else if (e.keyCode == 49) {
    ROOT.CAPTURE_CHAR+="!";
    ROOT.LAST_CAPTURE_CHAR ="!";
  }
  else if (e.keyCode == 51) {
    ROOT.CAPTURE_CHAR+="#";
    ROOT.LAST_CAPTURE_CHAR ="#";
  }
  else if (e.keyCode == 52) {
    ROOT.CAPTURE_CHAR+="$";
    ROOT.LAST_CAPTURE_CHAR ="$";
  }
  else if (e.keyCode == 53) {
    ROOT.CAPTURE_CHAR+="%";
    ROOT.LAST_CAPTURE_CHAR ="%";
  }
  else if (e.keyCode == 54) {
    ROOT.CAPTURE_CHAR+="^";
    ROOT.LAST_CAPTURE_CHAR ="^";
  }
  else if (e.keyCode == 55) {
    ROOT.CAPTURE_CHAR+="&";
    ROOT.LAST_CAPTURE_CHAR ="&";
  }
  else if (e.keyCode == 56) {
    ROOT.CAPTURE_CHAR+="*";
    ROOT.LAST_CAPTURE_CHAR ="*";
  }
  else if (e.keyCode == 57) {
    ROOT.CAPTURE_CHAR+="(";
    ROOT.LAST_CAPTURE_CHAR ="(";
  }
  else if (e.keyCode == 48) {
    ROOT.CAPTURE_CHAR+=")";
    ROOT.LAST_CAPTURE_CHAR =")";
  }
  else if (e.keyCode == 189) {
    ROOT.CAPTURE_CHAR+="_";
    ROOT.LAST_CAPTURE_CHAR ="_";
  }
  else if (e.keyCode == 187) {
    ROOT.CAPTURE_CHAR+="+";
    ROOT.LAST_CAPTURE_CHAR ="+";
  }
  else if (e.keyCode == 187) {
    ROOT.CAPTURE_CHAR+="+";
    ROOT.LAST_CAPTURE_CHAR ="+";
  }
  else if (e.keyCode == 188) {
    ROOT.CAPTURE_CHAR+="<";
    ROOT.LAST_CAPTURE_CHAR ="<";
  }
  else if (e.keyCode == 190) {
    ROOT.CAPTURE_CHAR+=">";
    ROOT.LAST_CAPTURE_CHAR =">";
  }
  else if (e.keyCode == 191) {
    ROOT.CAPTURE_CHAR+="?";
    ROOT.LAST_CAPTURE_CHAR ="?";
  }
  else if (e.keyCode == 186) {
    ROOT.CAPTURE_CHAR+=":";
    ROOT.LAST_CAPTURE_CHAR =":";
  }
  else if (e.keyCode == 222) {
    ROOT.CAPTURE_CHAR+='"';
    ROOT.LAST_CAPTURE_CHAR ='"';
  }
  else if (e.keyCode == 220) {
    ROOT.CAPTURE_CHAR+='|';
    ROOT.LAST_CAPTURE_CHAR ='|';
  }
  else if (e.keyCode == 219) {
    ROOT.CAPTURE_CHAR+='{';
    ROOT.LAST_CAPTURE_CHAR ='{';
  }
  else if (e.keyCode == 221) {
    ROOT.CAPTURE_CHAR+='}';
    ROOT.LAST_CAPTURE_CHAR ='}';
  }

  else {

    ROOT.CAPTURE_CHAR+=(String.fromCharCode(keynum).toUpperCase());
    ROOT.LAST_CAPTURE_CHAR = (String.fromCharCode(keynum).toUpperCase());

  }

}

}

ROOT.ACTION_ON_KEY_DOWN();

//@@@@@@@@@@@@@@@@@@@@@@@@@

if (typeof ROOT.TARGET_MODUL != 'undefined' && typeof ROOT.TARGET != 'undefined' ) {

      ROOT.CAPTURE_CHAR = ROOT.CAPTURE_CHAR.replace(/[^\x00-\x7F]/g, "");
      ROOT.CAPTURE_CHAR = ROOT.CAPTURE_CHAR.replace(/[^A-Za-z 0-9 \.,\?""!#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]*/g, '');

   window[ROOT.PROGRAM_NAME].ENGINE.MODULES.ACCESS(ROOT.TARGET_MODUL).GAME_OBJECTS.ACCESS(ROOT.TARGET).TEXTBOX.TEXT = ROOT.CAPTURE_CHAR;
    if (ROOT.ENTER_PRESSED == true) {

        window[ROOT.PROGRAM_NAME].ENGINE.MODULES.ACCESS(ROOT.TARGET_MODUL).GAME_OBJECTS.ACCESS(ROOT.TARGET).TEXTBOX.ON_PRESS_ENTER();

         if ( ROOT.CLEAR_CAPTURE_ON_PRESS_ENTER == true ) 
         {

             ROOT.CAPTURE_CHAR = '';

         }
    }
}
ROOT.ENTER_PRESSED = false;
//local_go.TEXTBOX.TEXT =  ROOT_EVENTS.ROOT_ENGINE.KEYBOARD.CAPTURE_CHAR;
//@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@ 
```

# asp.net - customErrors 401 捕获

> ID：14349451
> 
> 赞同：0
> 
> 时间：2013-01-16T00:21:46.587
> 
> 标签：asp.net, web-config, http-status-code-401, custom-errors

我一直在搜索 Stack Overflow 和各种论坛，但我无法理解在 ASP.net 和 IIS 中捕获 HTTP 错误的过程。

此时我已经通过 web.config 配置了`customErrors`404 和 401 错误的重定向。放置在`system.web`元素内部。

```
<customErrors defaultRedirect="~/Errors/default.aspx" mode="RemoteOnly">
    <error statusCode="401" redirect="~/Errors/401.aspx" />
    <error statusCode="404" redirect="~/Errors/404.aspx" />
</customErrors>

<system.webServer>
    <httpErrors existingResponse="PassThrough" />
  </system.webServer> 
```

但是，通用 IIS 错误页面显示错误：如下所示。![在此处输入图像描述](../Images/ea011136a868a2d1aac11db0fd068d71.png)

缺少什么？状态码/

# php - 使用不同的列名插入到 mysql 和 postgresql

> ID：14349452
> 
> 赞同：0
> 
> 时间：2013-01-16T00:22:03.703
> 
> 标签：php, mysql, database, postgresql, pdo

我将我的应用程序从 mysql 移植到 postgresql。在这样做的过程中，在大多数情况下更改为使用下划线作为单词分隔符的驼峰式列名。有一对夫妇的骆驼案刚刚被移除。

我现在需要插入这两个数据库。数据、列数等都是相同的，只是列名略有不同。我可以使用 PDO 来切换数据库驱动程序并插入，但我喜欢这样做而不需要为插入编写两个单独的 sql 语句。是否有一种通用方法将列名映射到数组键或填充某个类并将其传递给 PDO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:32:18.353

```
$column_names[] = array('someName'=>'some_name');
$column_names[] = array('someOtherName'=>'some_other_name');
$column_names[] = array('someOtherNameAgain'=>'some_other_name_again');

foreach($column_names as $mysql=>$post_ogre)
{
   //decide which one you want to use here
} 
```

类似的东西应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:59:13.367

`INFORMATION_SCHEMA.COLUMNS`您可以通过查看两个数据库都支持的表来自动创建列名关联表。

首先，对 MySQL 运行它：

```
SELECT
    column_name,
    ordinal_position,
    data_type
FROM information_schema.columns
WHERE table_schema = 'mysql_dbname'
  AND table_name = 'mytable' 
```

然后，对 PostgreSQL 运行几乎相同的查询：

```
SELECT
    column_name,
    ordinal_position,
    data_type
FROM information_schema.columns
WHERE table_schema = 'public'
  AND table_name = 'mytable' 
```

现在，从两边来看`column_name`，`ordinal_position`您可以轻松地在新旧列名之间创建映射表（假设 Postgres 名称对您来说是主要的）。您可以单独为每个表执行此操作，也可以一次执行所有操作（只需删除 table_name 约束）。

知道映射后，当您需要在任何针对 MySQL 的 SQL 语句中使用列名时，您必须通过此映射替换它。

# mfc - mfc 应用程序中的粗体文本

> ID：14349453
> 
> 赞同：0
> 
> 时间：2013-01-16T00:22:03.367
> 
> 标签：mfc, bold

当我在工具栏上标记粗体图标时，如何在 mfc 应用程序中像在 Word Office 中一样加粗文本，使我在进入对话框窗口之前的文本变为粗体？我为新文本和工具栏图标创建了对话框窗口，现在我在将文本加粗时遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:27:56.683

Word 在所有者绘制的窗口中显示文本。它使用 API 来绘制文本。当您查看 API 时，您会看到字体名称、大小、粗体等选项。具体细节取决于您用于绘制文本的 API。

就您而言，很难说，因为您确实没有提供足够的细节。您要加粗的是哪种窗口？窗口是所有者绘制的吗？

如果是自绘的，修改绘制它的代码。如果不是，它是一个 MFC 窗口吗？如果是这样，请考虑更改`Font`属性。[（问题MFC：Changing font of a List control](https://stackoverflow.com/questions/271845/mfc-changing-font-of-a-list-control)中有一个示例。

如果这还不够具体，那么你真的需要写一个更好的问题。

# git - Github：这个带有子模块的工作流程对吗？可以更好吗？

> ID：14349454
> 
> 赞同：0
> 
> 时间：2013-01-16T00:22:14.660
> 
> 标签：git, version-control, process, git-submodules

我有一个使用 lib B 的项目 A

*   项目 A <-- 主存储库
    *   一些子文件夹
        *   lib B <-- 子模块
*   lib B <--主存储库

现在两者都在源代码控制中，它们是 github 存储库。

*   现在lib B没有完成，我只是在项目A中添加我需要的东西，因为我总是在子模块中编辑lib B，我添加了这个而不是主存储库，因为在git for windows中你只被允许只有其中之一。
*   现在我从子模块推送到 lib B
*   我从 git 中删除 lib B 作为子模块
*   添加 lib B 作为主存储库，现在我拉。
*   然后我将 lib B 作为子模块添加到 git
*   重新开始！

我真的认为这个过程很糟糕，可以改进但不知道如何......欢迎任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:20:38.023

对于子模块，我只会在命令行中使用 git，就像它被设计为使用一样。这样，您所拥有的只是其中包含一个子模块的顶级存储库，您只需从这两个地方推拉。

# asp.net - 如何从数据库中获取数据到 MVC4 中的视图？

> ID：14349455
> 
> 赞同：-2
> 
> 时间：2013-01-16T00:22:16.150
> 
> 标签：asp.net, .net, asp.net-mvc-4

我不明白如何使数据在不同页面之间工作。我有我的数据库和视图，但是如何制作一个 DataTable 填充以放入 HTML UL ou TABLE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:27:34.773

这就是控制器和视图模型的用武之地。您的控制器应该与存储库（或它的抽象）交互以获取所需的数据，并实例化和填充视图模型。视图模型与获取数据的位置/方式无关。

然后，您的视图会使用视图模型。如果做得好，视图和视图模型将包含很少或没有逻辑，当然也没有直接的数据访问逻辑。

我强烈建议下载一个或多个[示例 MVC 项目](http://www.asp.net/mvc/samples)并单步执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:28:07.713

在这个论坛上正确回答您的问题需要很长时间。你真的需要对 MVC 做一些研究，我建议从[ASPNET MVC 站点](http://www.asp.net/mvc)上的教程开始，尤其是本[教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:10:44.483

我知道了。

我必须创建一些可以处理集合的变量。就我而言，我在模型中创建了一个数据表

```
namespace sjnj.Models
{
    public class GameViewModel
    {
           [Display(Name = "Lista dos jogos")]
           public DataTable selectListajogo { get; set; }
    }
} 
```

然后，在控制器中，我建立正常的数据库连接并提供它，在调用视图时返回数据。

```
GameViewModel selectJogo = new sjnj.Models.GameViewModel();

//a lot of code here...

selectJogo.selectListajogo.Rows.Add(dtBuscajogo.Rows[i]["id"], dtBuscajogo.Rows[i]["nome"]);

//a lot of code here...

return View("Insert", (GameViewModel)selectJogo); 
```

然后在视图上循环调用 Model.selectListaJogo。

# lotus-notes - 如何在 Lotus Notes 中的本地数据库上运行计划代理

> ID：14349456
> 
> 赞同：2
> 
> 时间：2013-01-16T00:22:25.923
> 
> 标签：lotus-notes, lotus, agent

莲花 8.5.3

我需要做的是启动一个外部进程来响应符合特定条件的传入电子邮件。

规则无法做到这一点。很公平，看起来代理可以。

好的，所以设置一个带有代理的 LotusScript 来做我需要的，用 Run--> perfect 测试它

现在让它通过电子邮件运行。很简单，对吧？

好的，几个小时后的谷歌 fu，我们有一些可能的问题。

首先，发现它必须是本地代理才能访问客户端文件以启动进程。通过运行一个简单的移动操作（不需要本地访问）来测试其他一切是否正常。这行得通，所以它是一个访问问题。

将其设置为本地代理 --> 它永远不会被调用。

接下来发现本地代理无法响应传入的电子邮件。当然，让我们设置一个 5 分钟的时间表。不去。

接下来，确保属性中的“启用计划的本地代理”并重新启动。不去。代理根本没有被调用，

接下来，了解要运行本地代理，它必须位于本地数据库中。

而且......这就是我停滞不前的地方。似乎没有多少谷歌能够为我回答这个问题。什么是本地数据库？我试着去我的存档文件夹，然后点击“创建->代理”在那里创建一个代理（它是本地的，对吗？）但这也不起作用。

那么，如何创建一个接收电子邮件的本地数据库，并从中创建一个作用于本地文件系统的代理？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:49:55.140

本地数据库是驻留在用户计算机上的数据库。在这种情况下，它将是服务器数据库的*副本*。

解决方案是在用户的计算机上创建一个副本（*File -> Replication -> New Replica...*），并使其以所需的时间间隔与服务器复制。如果有很多用户，这可能是一件更大的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:41:49.980

听起来您希望代理在用户的邮件文件中运行。如果是这种情况并且您有一台 Domino 服务器，请将其设置为在服务器上运行，在用户的邮件文件中。邮件也可以在用户邮件文件的服务器副本中接收。

# ruby-on-rails - 如何运行 bash 命令并在 resque worker 中处理其输出？

> ID：14349461
> 
> 赞同：0
> 
> 时间：2013-01-16T00:23:01.403
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, resque, ruby-1.9.3

我有一个 resque 工作人员，它在运行 bash 命令后立即停止所有处理。这是我的工人：

```
class ProductJsonSaver
  @queue = :products

  def self.perform(id)
    product = Product.find(id)
    json = `phantomjs #{Rails.root}/lib/product_scrape.js`
    product_json = JSON.parse(json)
    p "Procesing is done"
    p "Product JSON: #{product_json}"
    product.update_attributes({:processed => true})
  end
end 
```

如果我跑

```
Resque.enqueue(ProductJsonSaver, 1) 
```

我可以看到工作人员运行 bash 命令，我看到了 bash 命令的输出，但之后看不到打印语句，产品的已处理属性不会更新。resque-web 也没有将进程显示为失败。事实上，只需`ProductJsonSaver.perform(1)`从 rails 控制台运行即可。

这是 Resque 的错误吗？

基本要素：Rails 3.2.11、OSX、ruby-1.9.3、resque 1.23.0

**编辑**代码使问题更清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:16:42.153

该原始代码实际上是在保存数据还是只是正确地放置了您的“处理完成”字符串？

您的线路：

```
json = `cat #{Rails.root}/data/#{id}.json` 
```

是不是真的什么都没做。与最后一行一样，您只是将您在第一行中获取的 Product 传递给它。另外，为什么要在最后一行设置一个变量，而不是允许从您在 Product 上调用的类方法自然返回。

你也应该像这样阅读文件......

```
# in top of class 
require 'file' 

# in resque process method
File.open("#{Rails.root}/data/#{@id}.json", 'r') {|f| f.read} 
```

或者通过将其包装在中来自动将其解析为 JSON 对象

```
 # in top of class 
 require 'json'  
 # in resque process method
 JSON.parse(File.open("#{Rails.root}/data/#{@id}.json", 'r') {|f| f.read}) 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:54:37.770

很抱歉误报。也许这对其他人有帮助。我有较旧的 resque 工作人员没有退出，但运行的是较旧的代码库。因此，每次我排队工作时，都会有一位年长的工人接受并运行。

> $ ps -ef | grep [r]esque

并杀死 -9 进行救援！

# android - 如何将文本右对齐

> ID：14349463
> 
> 赞同：0
> 
> 时间：2013-01-16T00:23:18.313
> 
> 标签：android

我试图弄清楚如何将其对齐`dashboardNewsItemDate`到右侧，而不是左侧。目前它立即显示在`dashboardNewsItemHeadline`. 我认为将它放在 a`TableRow`中可以实现`android:layout_gravity="right"`我想要的功能，但事实证明这是错误的。

```
<TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:layout_gravity="center">
    <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="New Text"
                android:id="@+id/dashboardNewsItemHeadline" android:layout_gravity="left"
                />
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="New Text"
                android:id="@+id/dashboardNewsItemDate" android:layout_gravity="right" android:autoText="false"/>
    </TableRow>
</TableLayout> 
```

最后，我的目标是内容，所以要像这样显示......

```
My news title                       Mar 3
-----------------------------------------
This is a bit of a longer news      Jul 2
title and it wraps 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:13:10.320

有一个神奇的属性可以解决你的问题：

```
android:stretchColumns="*" 
```

将此属性添加到您的`TableLayout`：

```
<TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_gravity="center"
        android:stretchColumns="*">
    <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="New Text"
                android:id="@+id/dashboardNewsItemHeadline" android:layout_gravity="left"
                />
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="New Text"
                android:id="@+id/dashboardNewsItemDate" android:layout_gravity="right" android:autoText="false"/>
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:38:31.640

你很接近，为你的 TextViews 尝试常规的“gravity”而不是“layout_gravity”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:55:47.980

最后`layout_width="wrap_content"`一个 TextView 中的`gravity="right"`. 将其更改为`fill_parent`or `match_parent`，它应该可以工作。

# django - 日期时间在没有服务器重启的情况下不更新被指定为默认参数

> ID：14349467
> 
> 赞同：0
> 
> 时间：2013-01-16T00:23:44.710
> 
> 标签：django

我遇到的另一个奇怪的行为，并不确定它为什么会发生......

我不会完全写出我在做什么，基本上我对 2 种情况有一个看法：默认情况下，搜索采用今天的日期，如果没有指定，则默认情况下，第二个是我指定我想查看的日期并获得查询...

所以这里是 urls.py：

```
 url(r'^$', index),
    url(r'^(?P<month>\d{1,2})/(?P<day>\d{1,2})/(?P<change>prev|next)/$', index), 
```

这是views.py：

```
def index(request, month = date.today().month, day = date.today().day, change=None):
    # apply next / previous change
    if change in ("next", "prev"):
        now, mdelta = date(date.today().year, int(month), int(day)), timedelta(days=1)
        if change == "next":   mod = mdelta
        elif change == "prev": mod = -mdelta

        month, day = (now+mod).timetuple()[1:3]

    someData= SomeModel.objects.filter(
        date__exact = date(date.today().year, int(month), int(day))
    )

    return render_to_response('someapp_index.html',RequestContext(request,{'next':request.path, 'someData':someData, 'month': month, 'day':day})) 
```

**发生的事情是，由于某种原因，当 24 小时过去和第二天到来时， someData 没有更新到第二天。因此，例如，如果今天是 15 和 24 小时过去，并且已经是 16 ，那么您希望刷新时 someData 将在 1 月 16 日之前过滤，但实际上它仍然会被 15 过滤，因为从我开始的那一刻起月份和日期保持不变或重新启动 uwsgi 服务器.... ?!?!?!?!?**

我尝试将这些 date.today().dat/month 作为变量传递到 url 文件中，它具有完全相同的效果....

*我是唯一一个有这个问题的人吗？它不应该发生，或者它应该表现得像这样，你不能放 date.today() 对象？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:29:49.600

```
def index(request, month = date.today().month, day = date.today().day, change=None):
                                ^^^^^^ called upon init   ^^^^^^ 
```

是的，您的月/日值是在服务器初始化时初始化的。

`None`如果您想要默认值，请将它们设置为，`date.today()`如果它们是，则在您的视图中调用`None`。

`date.today()`作为参数传递给函数将强制对其进行评估。这与向函数传递一个特定值相同。

改成

```
def index(request, month=None, day=None, change=None):
      if month is None:
          month = date.today().month 
```

# c++ - 对于任意 Foo，“x = new(Foo)”是否与“x = new Foo”相同？

> ID：14349470
> 
> 赞同：8
> 
> 时间：2013-01-16T00:24:02.160
> 
> 标签：c++, syntax, new-operator

我正在查看一些遗留代码并遇到了`x=new(Foo);`（注意提供的类型周围的括号）。我测试了变化，它似乎与`x=new Foo;`

Foo 是一个非 POD 数据结构。一些外部内存泄漏程序正在标记该行 - 它正在为 CORBA out 参数分配内存，因此调用者应该负责删除，但这是多层间接的单独问题。

我的分析是否正确，风格是否可接受？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T00:28:48.057

这是正确的，但风格至少是不寻常的。

有时允许在完整类型名称周围使用括号，但在这种情况下是无关的。这就像在不需要的表达式周围加上括号。也许最接近的类比是

```
return( 0 ); /* looks like a function, but isn't */ 
```

令人困惑的是，`sizeof`运算符需要括号，在传递类型名称时而不是在传递表达式时。我个人认为这是一种不一致，并且不会选择将其传播到语言的其他部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T00:44:51.187

如果类型的名称有括号，则必须将其括在括号中。也可以包含其他类型。

需要括号的示例：

```
new int(*[10])();    // parser error: parsed as (new int) (*[10]) ()
new (int (*[10])()); // OK: allocates an array of 10 pointers to functions 
```

来自[cppreference.com：新表达式](http://en.cppreference.com/w/cpp/language/new)

# java - ActionBarSherlock 片段和标签

> ID：14349471
> 
> 赞同：0
> 
> 时间：2013-01-16T00:24:02.997
> 
> 标签：java, android, actionbarsherlock

我是 Android 开发的新手，但我想从它开始。我目前遇到问题，我搜索了几个小时，但找不到解决方案。

目前我使用了这个教程： [http ://arvid-g.de/12/android-4-actionbar-with-tabs-example](http://arvid-g.de/12/android-4-actionbar-with-tabs-example)

我用 ActionBarSherlock 实现了它，它按预期工作，但我希望在切换选项卡之后切换回已经初始化的选项卡，它不会重新初始化，它们应该打开相同的视图。

我如何意识到这一点？如果有一个例子来说明它是如何实现的，那将更容易理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:52:42.817

如果我理解正确，应用程序的每个选项卡都是一个片段，要在初始化后切换回选项卡的状态，您必须在返回片段后“恢复”片段的状态。

这个stackoverflow问题强调了如何恢复片段的状态：[android片段-当另一个片段被推到片段上时如何保存片段中的视图状态](https://stackoverflow.com/questions/6787071/android-fragment-how-to-save-states-of-views-in-a-fragment-when-another-fragmen)

当然，所有这些都记录在 Fragment 指南中：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

如果您有更多问题，请告诉我

# python - Django：使用 ManyToManyField 遍历两个 for 循环

> ID：14349473
> 
> 赞同：0
> 
> 时间：2013-01-16T00:24:17.437
> 
> 标签：python, django, templates

大家好，我在这方面苦苦挣扎，谷歌搜索过这一硬核。

我正在开发一个图片库，该图片库输出了每个专辑，当单击屏幕叠加层时会显示图片库。已经在 javascript 中完成了在画廊中显示每个图像的艰苦工作，所以我只需要由以下给出的图像路径：

```
{{ images.content }} 
```

以下是我在 django 项目中使用的文件。

这方面的帮助会很棒。

管理.py

```
from django.db import models

PHOTO_PATH = 'media_gallery'

class Gallerys(models.Model):
    title = models.CharField(max_length=30, help_text='Title of the image maximum 30 characters.')
    slug = models.SlugField(unique_for_date='date', help_text='This is automatic, used in the URL.')
    date = models.DateTimeField()

    class Meta:
        verbose_name_plural = "Image Galleries"
        ordering = ('-date',)

    def __unicode__(self):
        return self.title

class Images(models.Model):
    title = models.CharField(max_length=30, help_text='Title of the image maximum 30 characters.')
    content = models.FileField(upload_to=PHOTO_PATH,blank=False, help_text='Ensure the image size is small and it\'s aspect ratio is 16:9.')
    gallery = models.ManyToManyField(Gallerys)
    date = models.DateTimeField()

    class Meta:
        verbose_name_plural = "Images"
        ordering = ('-date',)

    def __unicode__(self):
        return self.title

import models
from django.contrib import admin

class ImagesAdmin(admin.ModelAdmin):
    list_display = ('title', 'date')

class GallerysAdmin(admin.ModelAdmin):
    list_display = ('title', 'date', 'slug')

admin.site.register(models.Images, ImagesAdmin)
admin.site.register(models.Gallerys,GallerysAdmin) 
```

视图.py

```
from django.http import HttpResponse
from notices.models import Notices
from django.shortcuts import get_object_or_404
from django.shortcuts import render_to_response
from gallery.models import *
from navigation.models import *

# when the galleries page is requested, all image galleries are listed by date created with the latest first,
# each gallery displayed contains a javascript tag containing an index of images separated by ';'
def galleries(request):
    gallery = Gallerys.objects.all()
    images = Images.objects.all()

    return render_to_response('galleries.html', {'Galleries': gallery, 'Images': images}) 
```

画廊.html

```
 {% for galleries in Galleries %}
            <h1>{{ galleries.title }}</h1>
            {% for images in galleries.gallery.all %}
                <h2>{{ images.content }}</h2>
            {% empty %}
                none
            {% endfor %}
        {% endfor %} 
```

当我迭代时：

```
<h2>{{ images.content }}</h2> 
```

我什么都没得到，我哪里出错了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:37:20.483

`gallery`对象中没有调用属性`Galleries`。

使用默认的反向 m2m 访问器`images_set`

```
{% for images in galleries.images_set.all %}

{% endfor %} 
```

# vbscript - 为什么 WScript.StdOut.Write 方法在 VBS 和 JScript 中的行为不同？

> ID：14349474
> 
> 赞同：6
> 
> 时间：2013-01-16T00:24:25.997
> 
> 标签：vbscript, jscript, wsh, windows-scripting

我在 VBS 和 JScript 中有两个小程序：

**VBScript.vbs：**

```
For i=0 To 255
   WScript.StdOut.Write Chr(i)
Next 
```

**JScript.js：**

```
for ( var i=0; i <= 255; ++i )
   WScript.StdOut.Write(String.fromCharCode(i)); 
```

当我在命令提示符中执行它们时，它们会显示不同的结果：

```
C:>cscript /nologo VBScript.vbs
 ☺☻♥♦♣
♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]
^_`abcdefghijklmnopqrstuvwxyz{|}~⌂??'ƒ".┼╬^%S<O?Z??''""--~Ts>o?zY ¡¢£¤¥¦§¨©ª«¬­®
¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþ
ÿ

C:>cscript /nologo JScript.js
 ☺☻♥♦♣
♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]
^_`abcdefghijklmnopqrstuvwxyz{|}~⌂???????????????????????????????? ¡¢£¤¥¦§¨©ª«¬­
®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüý
þÿ 
```

可以解释以前的输出，因为 JScript 的 fromCharCode 方法与 VBScript 的 Chr 函数存在一些操作差异。但是，如果尝试将输出重定向到磁盘文件，结果会大不相同：

```
C:>cscript /nologo VBScript.vbs > VBScript.txt

C:>cscript /nologo JScript.js > JScript.txt
C:\JScript.js(2, 4) Microsoft JScript runtime error: Invalid procedure call or argument

C:>dir *.txt

15/01/2013  05:48 p.m.               128 JScript.txt
15/01/2013  05:48 p.m.               256 VBScript.txt 
```

在这种情况下，两个程序*在相同的条件下使用**相同的*WSH 方法，所以我不明白为什么 VBS 正确生成了 256 个字符的文件，但 JScript 发出错误并只生成前 128 个字符。

 *这里会发生什么？有没有办法在 JScript 中正确生成具有 256 个不同字符的相同文件？TIA

安东尼奥

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:31:46.223

第一的，

你的代码逻辑不一样。

对**VBScript.vbs**`ZERO(0)`的计数开始于**JScript.js**从`ONE(1)`.

更改 JScript 中的增量运算符以使它们相同：

```
for ( var i=0; i <= 255; i++ )
    WScript.StdOut.Write(String.fromCharCode(i)); 
```

第二，

您使用的函数不一样，因为它们都在每个字符上下文中返回不同的结果。

该`Chr()`函数返回 ASCII 字符，

而该`fromCharCode()`函数返回每个字符可能有 1 到 4 个字节的 Unicode 字符。

因此，`Å`ASCII 集中的`Å`字符与 Unicode 集中的字符不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T09:08:16.260

关于@OpenTechnologist 所说的，您如何使用`ChrW()`而不是`Chr()`在VBScript 中，因为这将更接近fromCharCode() 的本质，即输出Unicode。*

# javascript - 按下 ENTER 键时表单未发布到服务器

> ID：14349479
> 
> 赞同：1
> 
> 时间：2013-01-16T00:24:42.280
> 
> 标签：javascript, jquery, html

我有一个显示用户名的简单 DIV：

```
<div id="firstNameChange" title="Click to edit" style="vertical-align:top; display:inline-block; float:left;"><?=$firstName?></div> 
```

当用户用鼠标单击 div 时，它会变成一个表单：

```
<form method="post" action="" >
  <div id="firstNameChange" title="Click to edit" style="vertical-align:top; display:inline-block; float:left;"><?=$firstName?></div>
  <input type="hidden" name="firstName" id="firstName" value="<?=$firstName?>"/>
  <input type="submit" name="submitFirstName" id="saveFirstName" class="ui-icon ui-icon-disk" style="border:none; display:none; background-color:transparent; float:right; vertical-align:top;" />
</form> 
```

使用 jQuery：

```
$("#firstNameChange").click(function() { 
    //check if there are any existing input elements
    if ($(this).children('input').length == 0) {
        $("#saveFirstName").css("display", "inline");
        //variable that contains input HTML to replace
        var inputbox = "<input type='text' class='inputbox' name='firstName' value=\""+$(this).text()+"\">";    
        //insert the HTML intp the div
        $(this).html(inputbox);
        //automatically give focus to the input box     
        $(".inputbox").focus();
        //maintain the input when it changes back to a div
        $(".inputbox").blur(function() {
            var value = $(this).val();
            $("#firstName").val(value);
            $("#firstNameChange").text(value);
        });
    }               
}); 
```

问题是表单仅在用鼠标单击提交按钮时才发回服务器。如果用户要按键盘上的回车键，它不会回发。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:42:25.990

找到了答案。我删除了隐藏元素，一切正常。感谢大家的支持！

# internet-explorer - ASP.NET MVC 一些数据注释验证显示在 IE 中的页面加载

> ID：14349481
> 
> 赞同：0
> 
> 时间：2013-01-16T00:24:45.333
> 
> 标签：internet-explorer, validation, asp.net-mvc-4, data-annotations

我对 IE 和 ASP.NET MVC 4 数据注释有一个非常奇怪的问题。

其中一些似乎仅在 IE 中（8/7 标准模式下的 9 和 9）在初始页面加载时显示其服务器端错误消息。受影响的似乎是一些 StringLength 和 RegularExpression，但并非所有我都有其他数据注释，例如必需的，它们没有显示它们的消息。

我已经自定义了如何在客户端插入验证消息，因此它们肯定是服务器端错误。

有谁知道为什么会发生这种情况？我完全糊涂了。

我曾尝试在我的操作方法中调用 ModelState.Clear() 但这似乎无法解决问题..

我正在使用 PRG 模式，但呈现我的表单的 G 部分是子操作，这可能是问题吗？

回应评论的代码：

```
 public ActionResult MyForm()
    {
        var cp = GetComponentPresentation();

        var model = new MyFormModel(cp);
        model.ComponentId = cp.Component.Id;
        LoadModel(model);
        return PresentationView(model);
    }

    private void LoadModel(MyFormModel model)
    {
        string titleTypesTcmId = ConfigHelper.TitleTypesKeywordId.FormatWith(ConfigHelper.PublicationId);
        model.TitleKeywords = TaxonomyService.GetTaxonomyKeywordChildrenNames(titleTypesTcmId)
                                .Select(x => new SelectListItem() { Text = x, Value = x }).ToList();
    } 
```

View Html 是 250 行，我没有时间匿名。所以这里是一个似乎未能通过验证的文本框的片段。

```
<div class="row">
    @using (Html.BeginForm("MyForm", "MyFormController", FormMethod.Post, new { id = "MyForm", @class = "form ajax", data_ajax_error=Html.GetPlainTextValue(Model.Component, "error_message") }))
    {
            <input type="hidden" name="ComponentId" value="@Model.Component.Id"/>
            <fieldset class="paddingright">
               <legend>Your Details</legend>
               <div class="row field">
                   @Html.LabelForRequired(m => m.NationalInsuranceNumber, Html.Resource("Labels_Form_NINumber"))
                   @Html.TextBoxFor(m => m.NationalInsuranceNumber, new { placeholder=Html.Resource("Placeholder_Form_NINumber") })
                   @Html.ValidationMessageFor(m => m.NationalInsuranceNumber, null, new { @class = "error"})
                </div>
                <!-- SNIP -->
                <div class="submit-container no-js-hidden">
                   <button type="submit" value="Step2" class="btn-green customsubmit" name="FormButton">
                       <span class="content">Next step &gt;</span>
                   </button>
                </div>
             </fieldset>
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:07:10.313

不管我怎么想，这实际上是客户端的事情。

这是由于我的 IE 占位符后备脚本触发了文本框上的“更改”，导致在加载验证脚本时触发验证，这导致了一些非常奇怪的结果。

# php - 使用 LinkedIn API 的 PHP OAuth

> ID：14349483
> 
> 赞同：3
> 
> 时间：2013-01-16T00:25:14.783
> 
> 标签：php, oauth, pecl

我在使用 PHP 的 PECL OAuth 模块向 LinkedIn 共享 API 发出请求时遇到问题。我已经用谷歌搜索了我的价值，但我找不到任何例子。

我的 PHP 代码：

```
$linkedin_oauth = new OAuth($linkedin_consumer_key,$linkedin_consumer_secret,OAUTH_SIG_METHOD_HMACSHA1, OAUTH_AUTH_TYPE_FORM);
  $linkedin_oauth->setToken($linkedin_data->linkedin_token, $linkedin_data->linkedin_consumer_secret);
  $linkedin_oauth->setAuthType(OAUTH_AUTH_TYPE_FORM);

  $body = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
  $body .= "<share>";
  $body .= "<comment>83% of employers will use social media to hire: 78% LinkedIn, 55% Facebook, 45% Twitter [SF Biz Times] http://bit.ly/cCpeOD</comment>";
  $body .= "<content>";
  $body .= "<title>Survey: Social networks top hiring tool - San Francisco Business Times</title>";
  $body .= "<submitted-url>http://sanfrancisco.bizjournals.com/sanfrancisco/stories/2010/06/28/daily34.html</submitted-url>";
  $body .= "<submitted-image-url>http://images.bizjournals.com/travel/cityscapes/thumbs/sm_sanfrancisco.jpg</submitted-image-url>";
  $body .= "</content>";
  $body .= "<visibility>";
  $body .= "<code>anyone</code>";
  $body .= "</visibility>";
  $body .= "</share>";

$headers = array('Content-Type' => 'text/xml');
  $linkedin_oauth->fetch("http://api.linkedin.com/v1/people/~/shares", $body, OAUTH_HTTP_METHOD_POST, $headers);
  $linkedin_share_response = $linkedin_oauth->getLastResponse(); 
```

但这会导致异常：

```
Invalid auth/bad request (got a 401, expected HTTP/1.1 20X or a redirect) 
```

我的标题看起来像：

```
OAuth oauth_consumer_key="<KEY_REMOVED>",oauth_signature_method="HMAC-SHA1",oauth_nonce="12581672284fa32618a44a31.27944550",oauth_timestamp="1336092184",oauth_version="1.0",oauth_token="<TOKEN_REMOVED>",oauth_signature="Qqt5zQKITSvk7OyrdWdFLaR%2F9ns%3D 
```

有谁知道这里发生了什么？无论我做什么，响应始终是 401。

当我用 GET 调用替换 call 时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T11:17:16.223

网上似乎没有很多关于这些东西的信息，但这似乎对我有用。如果您使用 OAuth2.0 访问令牌，这应该可以工作。插入并插入您的变量，如果您有任何问题，请告诉我。

```
$params = array(
    'oauth2_access_token'   => $oauth2_access_token
);

$url = 'https://api.linkedin.com/v1/people/~/shares?' . http_build_query($params);

$xml_content = '<?xml version="1.0" encoding="UTF-8"?><share><content><title>' . $title . '</title><submitted-url>' . $link . '</submitted-url><submitted-image-url>' . $image . '</submitted-image-url></content><visibility><code>anyone</code></visibility></share>';

$context = stream_context_create(array(
    'http' => array(
        'method'    => 'POST',
        'content'   => $xml_content,
        'header'    => "Content-type: application/xml"
    )
));

$stream = fopen($url, 'rb', false, $context);

if ($stream) {
    $metaData = stream_get_meta_data($stream);
    $response = stream_get_contents($stream);
    fclose($stream);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:01:50.547

检查您注册的 OAuth 应用程序中的返回 URL。它必须是您的脚本的 URL。

# ember.js - Ember.js 路由器 v2 和注入控制器

> ID：14349485
> 
> 赞同：3
> 
> 时间：2013-01-16T00:25:37.273
> 
> 标签：ember.js

在旧的 V1 路由器中，所有控制器都被注入到路由器中，因此可以这样做：

```
foo = App.get('router').get('applicationController').get('bar'); 
```

在新的 V2 路由器中，我似乎无法做到：

```
router = App.get('router') 
```

这有改变吗？

预期的设计模式是否发生了变化？我一直都做错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T00:32:44.373

今天，您可以通过以下方式从您的路由（和路由操作）访问控制器：

```
this.controllerFor('posts') 
```

在您的控制器中，您声明对其他控制器的依赖关系：

```
App.Post = Ember.ObjectController.extend({
  needs: ['posts']
}); 
```

然后，在您的控制器内部，您还可以使用`this.controllerFor`.

仅供参考，我们计划让 this.get('controllers.posts') 在使用的​​控制器内工作`needs`，这将直接在模板内使用依赖控制器。

# scala - 使用 FakeApplication 的测试意外冻结 Play 2.1-RC2

> ID：14349487
> 
> 赞同：2
> 
> 时间：2013-01-16T00:25:50.927
> 
> 标签：scala, playframework-2.1

我有一个像这样的简单测试：

```
 "xxx" should {
    "xxx" in running(FakeApplication()) {
    route(
      FakeRequest(GET, "/xxx/xxxx")
    ) must beLike {
    case Some(result) => {
      "" must_== ""
    }
  } 
```

测试总是在测试快结束时冻结：

```
...
[info] Total for test controllers.XxxTest
[info] Finished in 0.001 seconds
[info] 1 tests, 0 failures, 0 errors 
```

所以我退出测试Ctrl+C...

有什么想法吗？

* * *

JVM 1.7.0_11
Scala 2.10.0
播放 2.1-RC2
Mac OSX 10.8.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:42:57.580

临时措施

在您的 Build.scala（或 Build.sbt）中添加以下代码段：

```
sbt.Keys.fork in Test := false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:32:45.630

似乎他们重新启用了测试分叉（请参阅[https://github.com/playframework/Play20/pull/654](https://github.com/playframework/Play20/pull/654)）。所以你需要将 sbt 升级到 0.12.2-RC2，只需输入

```
sbt.version=0.12.2-RC2 
```

进入你的`build.properties`.

# mysql - 如何获取按日期范围列在不同行中的mysql结果？

> ID：14349495
> 
> 赞同：0
> 
> 时间：2013-01-16T00:26:32.877
> 
> 标签：mysql

我在页面上正确显示数据时遇到了困难。我正在运行一个帐单报告查询，该报告搜索所有未结帐单，我想将它们显示在一个页面上，未结余额按余额的年龄显示。因此，如果客户 ABC 在过去一年中有 10 张发票，其中一些有未结余额，我想在 0-30 / 30-60 / 60-90 / 和 90+ 天的列中显示这些余额。这是我所拥有的...

```
 $sql17 = "SELECT $mysql_billing.primary_key, $mysql_billing.a_name, $mysql_billing.invoicedate, $mysql_billing.finaltotal, $mysql_billing_dates.paidtotal,
 ($mysql_billing.finaltotal - $mysql_billing_dates.paidtotal) AS total
 FROM
   (SELECT $mysql_billing.primary_key, $mysql_billing.a_name, $mysql_billing.login_username, $mysql_billing.invoicedate,
   SUM($mysql_billing.custotal) AS finaltotal 
   FROM $mysql_billing where $today >= invoicedate AND $start_search_prev180_date <= invoicedate AND custotal != payments GROUP BY login_username) $mysql_billing 
 LEFT JOIN 
   (SELECT $mysql_billing_dates.id, $mysql_billing_dates.username, 
   SUM($mysql_billing_dates.amount) AS paidtotal 
   FROM $mysql_billing_dates where complete != 'yes' GROUP BY username) $mysql_billing_dates 
 ON ($mysql_billing.login_username = $mysql_billing_dates.username) 
 GROUP BY a_name ORDER BY a_name ASC"; 
```

这似乎打印出结果，但是如何根据超过 1 个日期变量将结果放入不同的列中？我必须做 4 个单独的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:13:59.437

您的 SQL Fiddle 很接近，但您的一些连接不正确。

```
SELECT 
  billing.a_name, 
  billing.finaltotal, 
  billing_dates.paidtotal,
  (billing.finaltotal - billing_dates.paidtotal) AS total,
   billing.TimePeriod
FROM
   (SELECT 
      a_name, 
      login_username, 
      SUM(custotal) AS finaltotal,
      CASE 
        WHEN invoicedate > DATE_SUB(CURDATE(),INTERVAL 30 DAY) THEN '30'
        WHEN invoicedate > DATE_SUB(CURDATE(),INTERVAL 60 DAY) THEN '60'
        WHEN invoicedate > DATE_SUB(CURDATE(),INTERVAL 90 DAY) THEN '90'
        ELSE '90+'
      END AS TimePeriod

    FROM billing 
    where CURDATE() >= invoicedate 
      AND CAST(20120601 AS DATETIME) <= invoicedate 
    GROUP BY login_username) billing 
 LEFT JOIN 
   (SELECT 
      username, 
      SUM(amount) AS paidtotal 
    FROM billing_dates
    GROUP BY username) billing_dates 
   ON (billing.a_name = billing_dates.username) 
ORDER BY a_name ASC; 
```

这是更新的[Fiddle](http://sqlfiddle.com/#!2/dc83cc/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:36:27.607

我建议为客户选择所有未结清的发票，然后使用代码将它们组织到每个时间段的列表中。

为此使用单个查询可能会更快，并且很容易在程序中对结果进行分类。

然后，您只需为每个列表选择一个元素即可在报告中生成行。

# api - Magento 出口订单到 3PL 肥皂 api 问题

> ID：14349504
> 
> 赞同：4
> 
> 时间：2013-01-16T00:27:12.017
> 
> 标签：api, magento, soap

升级后我一直在为客户端重新实现此脚本，但我被卡住了（也许大脑被炸了）。其中大部分与您无关。我遇到问题的部分在这里：

```
try

         {

            $customer_exists = $client->call($sess_id, 'sales_order.info', $ShippedOrderId);
         }

         catch (exception $e)

         {

            echo 'Exception: ' . $e . "<br/>";

         } 
```

它抛出以下异常：

“异常：SoapFault 异常：[100] 请求的订单不存在。在 /home/ab71714/public_html/exporter/importer-sftp.php:140 堆栈跟踪：#0 /home/ab71714/public_html/exporter/importer-sftp.php (140): SoapClient->__call('call', Array) #1 /home/ab71714/public_html/exporter/importer-sftp.php(140): SoapClient->call('9cafc83722b06f2...', 'sales_order. inf...', '100015822') #2 {main}"

整个事情都在跟随。非常感谢任何帮助！

```
 <?php 

   ini_set('error_reporting', E_ALL); 

   ini_set('display_errors', 1); 

var_dump(extension_loaded('ssh2'));
   // URL to Magento SOAP API

   $client = new SoapClient('http://animalnecessity.com/api/soap?wsdl'); 

   $apiuser = ''; 

   $apikey = ''; 

   // FTP info

   $ftp_server = 'ftp.3plworldwide.com';

   $ftp_user_name = '';

   $ftp_user_pass = '';

   // Address to mail report to

   $mail_to = '';

   $mail_content = "Checking for 3PL shipping import files on " . date('m/d/Y') . "\n\n";

   /*** Begin FTP ***/

   // Set up SFTP connection

   $conn_id = ssh2_connect($ftp_server, 22);

   $login_result = ssh2_auth_password($conn_id, $ftp_user_name, $ftp_user_pass);

   $sftp = ssh2_sftp($conn_id);

   // Check connection results

   if ((!$conn_id) || (!$login_result)) { 

       $mail_content .= "SFTP connection has failed.\n";

       $mail_content .= "Attempted to connect to $ftp_server under user '$ftp_user_name', password '$ftp_user_pass'.\n\n"; 

   } else {

       $mail_content .= "Successfully connected to $ftp_server with an SFTP secure connection, under user '$ftp_user_name', password '$ftp_user_pass'.\n\n"; 

   }

   // Download the files in the SHIPMENTS folder

   $download = true;

   $dirHandle = opendir("ssh2.sftp://$sftp/SHIPMENTS/");

   if ($dirHandle)

   {

      $filelist = '';

      $downarray = array();

      while (false !== ($file = readdir($dirHandle)))

      {

         if (strpos($file, 'OCU_SHP_') !== false)

         {

            // Choose only shipment files up to 7 days back

            $datetag = substr($file, 8, 6);

            $year = substr($datetag, 0, 2);

            $month = substr($datetag, 2, 2);

            $day = substr($datetag, 4, 2);

            if (!is_numeric($year)) { continue; }

            $datestamp = mktime(0, 0, 0, $month, $day, $year);

            if ($datestamp > strtotime('-7 days'))

            {

               $fileName = 'SHIPMENTS/' . $file;

               // Remote stream

               if (!$remoteStream = @fopen("ssh2.sftp://$sftp/$fileName", 'r'))

               {

                  $mail_content .= "Unable to open remote file: $fileName\n";

                  $download = false;

               } 

               // Local stream

               if (!$localStream = @fopen("./$fileName", 'w'))

               {

                  $mail_content .= "Unable to open local file for writing: ./$fileName\n";

                  $download = false;

               }

               // Write from our remote stream to our local stream

               $read = 0;

               $fileSize = filesize("ssh2.sftp://$sftp/$fileName");

               while ($read < $fileSize && ($buffer = fread($remoteStream, $fileSize - $read)))

               {

                  // Increase our bytes read

                  $read += strlen($buffer);

                  // Write to our local file

                  if (fwrite($localStream, $buffer) === FALSE)

                  {

                      $mail_content .= "Unable to write to local file: /localdir/$fileName\n";

                      $download = false;

                  }

               }

               // Close our streams

               fclose($localStream);

               fclose($remoteStream);

               // Update file lists for mail content and imports

               $filelist .= $file . "\n";

               array_push($downarray, './SHIPMENTS/' . $file);

            }

         } 

      }

   }

   // check download status

   if (!$download) { 

       $mail_content .= "Some file download(s) failed.\n\n";

   }

   else

   {

      $mail_content .= "Successfully downloaded all of the following files from $ftp_server:\n\n";

      $mail_content .= $filelist . "\n";

   }

   /*** End FTP ***/

   /*** Begin Import ***/

   // Read data from downloaded files into array

   $lines = array();

   foreach ($downarray as $file)

   {

      $linesnew = file($file);

      $lines = array_merge($lines, $linesnew);

   }

   var_dump($lines);

   // Connect to Magento Web Services API

   $sess_id = $client->login($apiuser, $apikey); 

   $mail_content .= "Importing the following shipments:\n\n===\n\n";

   $dupecount = 0;

   $importcount = 0;

   $result = $client->call($sess_id, 'sales_order.list');
      echo ($result[1]["order_id"]);

      //var_dump($result);

   foreach ($lines as $line)

   {

      set_time_limit(60);

      $fields = explode("\t", $line);

      $ShippedOrderId = $fields[0];
        echo $ShippedOrderId . "<br/>";
      if (strlen($ShippedOrderId) == 4) { $ShippedOrderId = '10000' . $ShippedOrderId; }

      if (is_numeric($ShippedOrderId))

      {

         // Check if customer exists

         $customer_exists = null;

         try

         {

            $customer_exists = $client->call($sess_id, 'sales_order.info', $ShippedOrderId);
         }

         catch (exception $e)

         {

            echo 'Exception: ' . $e . "<br/>";

         }

         if (($customer_exists != null) && ($customer_exists != ''))

         { 

            echo 'In with ' . $ShippedOrderId . "<br/>";

            $order_info = $client->call($sess_id, 'sales_order.info', $ShippedOrderId);

             ?><pre><?php print_r($order_info); ?></pre><?php 

            // Skip order if already completed or shipped

            if (($order_info['status'] != 'processing') && ($order_info['status'] != 'pending'))

            {

               $dupecount++;

               continue;

            }

            $comment = '<b><br>*** Order has shipped. ***</b><br/><br/>' . 

                       '<b>3PL order number:</b> ' .  $fields[1] . '<br/>' . 

                       '<b>Weight:</b> ' .  $fields[2] . '<br/>' . 

                       '<b>Shipped via:</b> ' .  $fields[3] . '<br/>' . 

                       '<b>Tracking number:</b> ' .  $fields[4] . '<br/>' . 

                       '<b>Ship date:</b> ' .  $fields[5] . '<br/>' . 

                       '<b>Postage:</b> ' .  $fields[6] . '<br/>' . 

                       '<b>Fulfillment:</b> ' .  $fields[7] . '<br/>' . 

                       '<b>Per packslip:</b> ' .  $fields[8];

            // Make shipment and add tracking number

            if ($fields[3] == 'UPS-RESIDENTIAL') { $shippedby = 'ups'; $shipname = 'UPS Ground'; }

            elseif ($fields[3] == 'UPS-2') { $shippedby = 'ups'; $shipname = 'UPS 2nd Day Air'; }

            elseif ($fields[3] == 'UPS-OVERNIGHT') { $shippedby = 'ups'; $shipname = 'UPS Next Day Air Saver'; }

            elseif ($fields[3] == 'USPS-PRI') { $shippedby = 'usps'; $shipname = 'USPS Priority'; }

            elseif ($fields[3] == 'CANADA') { $shippedby = 'custom'; $shipname = 'MSI Canada (Standard) '; }

            elseif ($fields[3] == 'MSITRACK') { $shippedby = 'custom'; $shipname = 'MSI Canada (Express)'; }

            else { $shippedby = 'custom'; }

            // Attempt to create the order, notify on failure

            try { $newShipmentId = $client->call($sess_id, 'sales_order_shipment.create', array($ShippedOrderId, array(), $comment, true, false, $shippedby, $shipname, $fields[4])); }

            catch (Exception $e) { echo 'Shipment creation failed on order '. $ShippedOrderId . ': ', $e->getMessage(); }

            // Add comment to order with all the info

            $client->call($sess_id, 'sales_order.addComment', array($ShippedOrderId, 'complete',  $comment,  false));

            $mail_content .= $line . "\n";

            $importcount++;

         }

      }

   }

   $mail_content .= "\n===\n\n";

   $mail_content .= $dupecount . " shipments already in cart.\n\n" . $importcount . " new shipments imported on " . date('m/d/Y') . " at " . date('g:ia', strtotime('+1 hour')) . " EST.\n\n";

   // Close API session

   $client->endSession($sess_id);

   mail($mail_to, 'Magento Shipping Import for ' . date('m/d/Y'), $mail_content);

   mail($mail_to2, 'Magento Shipping Import for ' . date('m/d/Y'), $mail_content);

   mail($mail_to3, 'Magento Shipping Import for ' . date('m/d/Y'), $mail_content);

   mail($mail_to4, 'Magento Shipping Import for ' . date('m/d/Y'), $mail_content);

   //mail($mail_to5, 'Magento Shipping Import for ' . date('m/d/Y'), $mail_content);

?>

<pre><?php echo $mail_content; ?></pre> 
```

当我在循环中回显 $shippedOrderId 时，我得到了这个（示例）：

“订单号为：字符串（9）“100015822”异常：SoapFault 异常：[100] 请求的订单不存在。在 /home/ab71714/public_html/exporter/importer-sftp.php:140 堆栈跟踪：#0 /home /ab71714/public_html/exporter/importer-sftp.php(140): SoapClient->__call('call', Array) #1 /home/ab71714/public_html/exporter/importer-sftp.php(140): SoapClient-> call('0f128ddbbbfc007...', 'sales_order.inf...', '100015822') #2 {main} 订单号为：string(9) "100015842" 异常：SoapFault 异常：[100] 未请求订单存在。在 /home/ab71714/public_html/exporter/importer-sftp.php:140 堆栈跟踪：#0 /home/ab71714/public_html/exporter/importer-sftp.php(140)：SoapClient->__call('call' , 数组) #1 /home/ab71714/public_html/exporter/importer-sftp.php(140): SoapClient->call('0f128ddbbbfc007...', 'sales_order.inf...', '100015842') #2 {main} 订单号为：string(9) "100015878" "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:19:55.800

这就是您的调用 (/app/code/core/Mage/Sales/Model/Order/Api.php) ：

```
public function info($orderIncrementId) 
```

确保在设置 $shippedOrderId 时使用增量 ID：

```
$ShippedOrderId = $order->getIncrementId(); 
```

看来您连接成功了，您的 API 有一个错误，即订单不存在。不太确定还会导致什么问题。如果这不起作用，请尝试调试 session_id 和客户端参数。

# android - 新版本的 android 应用程序与 eclipse

> ID：14349505
> 
> 赞同：0
> 
> 时间：2013-01-16T00:27:17.947
> 
> 标签：android, eclipse, version

我已经在 Google Play 上制作并发布了一个应用程序。

现在，我需要上传它的新版本……但我需要在同一个包上使用“新版本代码”……如何使用 Eclipse 来做到这一点？

我希望我足够清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:28:59.983

在您的 AndroidManifest.xml 中，增加`versionCode`.

```
android:versionCode="1" 
```

# .net - 单元测试在 Run All 但在 Run Selected Tests with all selected 时失败

> ID：14349512
> 
> 赞同：43
> 
> 时间：2013-01-16T00:28:06.590
> 
> 标签：.net, unit-testing, exception-handling, visual-studio-2012

我有一些奇怪的行为。如果我在测试资源管理器中单击“全部运行”，那么我的 1 个单元测试将失败，但如果我选择所有测试并单击“运行选定的测试”，则单元测试通过。

失败的测试引发了反射错误：`System.Reflection.TargetException: Non-static method requires a target.`在我正在测试的 dll 代码中定义的类型上。这个类似乎没有什么奇怪的——在 dll 中定义了许多其他类，反射很满意。我在下面包含了测试堆栈跟踪。

注意这是一个复杂的测试 - 它从 .xlsx 文件中读取输入和预期答案，使用 xlsx 中的数据填充 LocalDb，使用 LocalDB 中的数据执行计算，然后将计算出的值与预期值进行比较。但是，正如我所说的那样，当我运行所有测试（使用全选>运行选定测试）时它正在工作并且工作。

Run All 有什么不同？任何见解将不胜感激。

我尝试过干净和重建，但没有运气。捕获和记录反射错误表明 GetValue 调用正在为我尝试在该类型上访问的每个属性抛出 - 但仅在由“全部运行”运行且仅在这一类型上运行时？（如果我发现错误，那么所有 GetValues 在所有其他类型上都成功）。

堆栈跟踪

```
Test Name:  IT_CheckCashOnly1DepositOutputValues
Test FullName:  Lib.AE.Tests.Integration.CalculationTests.IT_CheckCashOnly1DepositOutputValues
Test Source:    c:\netreturn.co.za\Main\NetReturn\Lib.AE.Tests\IntegrationTests\CalculationTest.cs : line 23
Test Outcome:   Failed
Test Duration:  0:00:00.1661906

Result Message: 
Test method Lib.AE.Tests.Integration.CalculationTests.IT_CheckCashOnly1DepositOutputValues threw exception: 
System.Reflection.TargetException: Non-static method requires a target.
Result StackTrace:  
at System.Reflection.RuntimeMethodInfo.CheckConsistency(Object target)
at System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, BindingFlags invokeAttr, Binder binder, Object[] index, CultureInfo culture)
at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index)
at Lib.AE.Xlsx.XlsxHelper.Compare[T](T expected, T calculated, ExcelWorksheet ws, Int32 r, Int32 colStart, Boolean& valid) in c:\netreturn.co.za\Main\NetReturn\Lib.AE\Xlsx\XlsxHelper.cs:line 101
at Lib.AE.Xlsx.XlsxWorkSheet_SharePNL.CompareXlsx(ExcelPackage pck, List`1 expectedXlsx, ValuationCalculation calc) in c:\netreturn.co.za\Main\NetReturn\Lib.AE\Xlsx\XlsxSharePNL.cs:line 143
at Lib.AE.Tests.Integration.CalculationTests.CheckCalculationResults(String xlsxDocToLoad, WorkSheets testingScenarios) in c:\netreturn.co.za\Main\NetReturn\Lib.AE.Tests\IntegrationTests\CalculationTest.cs:line 64
at Lib.AE.Tests.Integration.CalculationTests.IT_CheckCashOnly1DepositOutputValues() in c:\netreturn.co.za\Main\NetReturn\Lib.AE.Tests\IntegrationTests\CalculationTest.cs:line 23 
```

* * *

## **解决方案**

所以这原来是（a）我的问题 - 我的单元测试与另一个单元测试共享状态和（b）订单问题。请注意，TestExplorer 将以哪个顺序运行您的测试并不明显。我创建了一个新的 UnitTestProject，其中包含 2 个 UnitTest .cs 文件和三个 TestMethod，即：

单元测试1.cs

```
 [TestMethod]
    public void ONE_AAA() {}

    [TestMethod]
    public void ONE_BBB() {}

    [TestMethod]
    public void ONE_CCC() {} 
```

单元测试2.cs

```
 [TestMethod]
    public void TWO_CCC() {}

    [TestMethod]
    public void TWO_BBB() {}

    [TestMethod]
    public void TWO_AAA() {} 
```

然后通过两种方法运行这些测试，即 (1) Run All (2) Select all 和 Run Selected Tests，并记录 TestExplorer 启动测试的顺序。运行选定测试的结果相当不直观：

```
-- Run All
2013-01-16 11:53:47.4062 INFO TestInitialize: ONE_AAA
2013-01-16 11:53:47.4122 INFO TestCleanup: ONE_AAA
2013-01-16 11:53:47.4122 INFO TestInitialize: ONE_BBB
2013-01-16 11:53:47.4122 INFO TestCleanup: ONE_BBB
2013-01-16 11:53:47.4122 INFO TestInitialize: ONE_CCC
2013-01-16 11:53:47.4282 INFO TestCleanup: ONE_CCC
2013-01-16 11:53:47.4282 INFO TestInitialize: TWO_CCC
2013-01-16 11:53:47.4282 INFO TestCleanup: TWO_CCC
2013-01-16 11:53:47.4282 INFO TestInitialize: TWO_BBB
2013-01-16 11:53:47.4282 INFO TestCleanup: TWO_BBB
2013-01-16 11:53:47.4282 INFO TestInitialize: TWO_AAA
2013-01-16 11:53:47.4282 INFO TestCleanup: TWO_AAA

-- Select All > Run Selected
2013-01-16 11:55:26.0139 INFO TestInitialize: TWO_BBB
2013-01-16 11:55:26.0139 INFO TestCleanup: TWO_BBB
2013-01-16 11:55:26.0249 INFO TestInitialize: ONE_BBB
2013-01-16 11:55:26.0249 INFO TestCleanup: ONE_BBB
2013-01-16 11:55:26.0249 INFO TestInitialize: TWO_AAA
2013-01-16 11:55:26.0249 INFO TestCleanup: TWO_AAA
2013-01-16 11:55:26.0249 INFO TestInitialize: TWO_CCC
2013-01-16 11:55:26.0249 INFO TestCleanup: TWO_CCC
2013-01-16 11:55:26.0249 INFO TestInitialize: ONE_CCC
2013-01-16 11:55:26.0249 INFO TestCleanup: ONE_CCC
2013-01-16 11:55:26.0249 INFO TestInitialize: ONE_AAA
2013-01-16 11:55:26.0249 INFO TestCleanup: ONE_AAA 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T01:18:36.517

我过去曾因运行多个单元测试而陷入困境，因为测试运行的顺序可能不是它们在测试类中声明的顺序，实际上可能是测试方法名称的顺序。例如，如果我有

```
[Test]
public void PreviousTest()
{
}

[Test]
public void LaterTest()
{
} 
```

然后在按字母顺序排列时`LaterTest`首先运行，因为它的名称出现在之前`PreviousTest`。

如果您的所有测试都是完全独立的，这无关紧要，但是如果它们正在修改共享资源，那么如果您期望`LaterTest`' 的更改不会`PreviousTest`因为它被声明为第二个而产生任何影响，那么您可能会遇到异常行为。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-24T10:51:40.770

确保您的成员在设置范围内被初始化，否则它们可以被重用。

```
[TestFixture]
public class RegistrationInteractorTests
{
    private  IRegistrationService _registrationService;
    private  IRegistrationValidationService _registrationValidationService;
  ......

    [SetUp]
    public void Init()
    {
        _registrationService = A.Fake<IRegistrationService>();
        _registrationValidationService = A.Fake<IRegistrationValidationService>();
    } 
```

……

}

// 错误的方式是这样的：

```
 [TestFixture]
    public class RegistrationInteractorTests
    {
        protected readonly IRegistrationService _registrationService = A.Fake<IRegistrationService>();

        protected readonly IRegistrationValidationService _registrationValidationService =
            A.Fake<IRegistrationValidationService>();

        [SetUp]
        public void Init()
        {

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-20T08:45:26.793

我们试图调查这个问题一周了。确保所有测试项目都使用相同版本的 DLL，尤其是 Nuget 包。

问题是，当您执行“全部运行”时，所有 TEST 项目中使用的所有库都放在一个文件夹中（类似这样`MyApp\TestResults\Deploy_user1 2018-11-20 15_52_15\Out`）。并且由于这些 Dll 库发生冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T00:33:13.623

您的`[TestInitialize]`方法在每次测试之前运行。从中删除任何依赖于单个测试的代码并将其放入单独的测试中。

# jquery - 如何使 Ctrl+B 在内容可编辑的 div 中从选定的测试中添加和删除粗体？

> ID：14349525
> 
> 赞同：1
> 
> 时间：2013-01-16T00:29:55.733
> 
> 标签：jquery, html

我可以毫无问题地进行编辑，但 Ctrl+B 不起作用。有没有跨浏览器的解决方案？

我不想切换到可编辑的 iframe

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:31:38.440

我找到了最简单的方法，只是使 a did 可编辑，并且 ctrl+b 工作抽象了我实现它的跨浏览器

```
<html>
<body>
<script src="jquery-1.9.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#button').click(function() {
            alert($("#editable").html());
        });
    });
</script>

<div id="editable" contenteditable="true" style="width:400px;height:400px;border:1px;border-style:solid;margin:3px;">

</div>
<button id="button">focus</button>
</body>
</html> 
```

# python - 使用 Tkinter 创建游戏板

> ID：14349526
> 
> 赞同：7
> 
> 时间：2013-01-16T00:30:09.037
> 
> 标签：python, user-interface, grid, tkinter

我正在尝试用**[Python(2.7)构建一个简单的](http://www.python.org/)****[连接四游戏](https://en.wikipedia.org/wiki/Connect_Four)**

我创建了一个板，它由一个简单的多维 Python 列表组成。
我的董事会列表如下所示：

```
board = [
    [_,_,_,_,_,_,_,_,_,_],
    [_,_,_,_,_,_,_,_,_,_],
    [_,_,_,_,_,_,_,_,_,_],
    [_,_,_,_,_,_,_,_,_,_],
    [_,_,_,_,_,_,_,_,_,_],
    [_,_,_,_,_,_,_,_,_,_],
    [_,_,_,_,O,_,_,_,_,_],
    [_,_,_,_,X,_,_,_,_,_],
    [_,_,_,_,X,O,_,_,_,_],
    [_,_,_,_,X,O,_,_,_,_],
] 
```

如果 X 是**Player1**而 O 是**Player2**（或计算机）。

现在，我为**GUI**创建了一些基本代码，如下所示：

```
# Connect 4 Game
import Tkinter

screen = Tkinter.Tk()
screen.title("My First Game")

#Create a board
board = Tkinter.Canvas(screen,width=500,height=500)
board.pack()

screen.mainloop() 
```

**问题：**如何创建板的可视化表示，以便每个列表都有一个矩形？另外，有没有办法检测，何时单击矩形并替换相应的列表值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T00:51:03.370

我创建了一个标签板并根据单击的颜色为它们着色：

```
import Tkinter as tk

board = [ [None]*10 for _ in range(10) ]

counter = 0

root = tk.Tk()

def on_click(i,j,event):
    global counter
    color = "red" if counter%2 else "black"
    event.widget.config(bg=color)
    board[i][j] = color
    counter += 1

for i,row in enumerate(board):
    for j,column in enumerate(row):
        L = tk.Label(root,text='    ',bg='grey')
        L.grid(row=i,column=j)
        L.bind('<Button-1>',lambda e,i=i,j=j: on_click(i,j,e))

root.mainloop() 
```

这不会进行任何验证（例如，确保单击的元素位于底部）。使用类而不是全局数据也会更好，但这对于感兴趣的编码器来说是一个练习:)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T00:42:59.907

您可能想要创建一个[Buttons](http://effbot.org/tkinterbook/button.htm)网格。您可以根据 中的值设置它们的样式`board`，并分配一个回调以`board`在单击时更新。

# tfs - TFS 2010 构建失败，因为它无法加载 Microsoft.VisualStudio.QualityTools.Plugins.CodeCoverage 版本 11.0

> ID：14349528
> 
> 赞同：5
> 
> 时间：2013-01-16T00:30:28.087
> 
> 标签：tfs, tfsbuild

我的 TFS 2010 构建莫名其妙地失败了。单元测试**通过**，**没有警告或错误**。构建完全运行，从开始到结束，但部分成功。我花了一段时间才发现任何错误——我必须下载测试结果，然后单击顶部标有“测试运行错误”的链接。错误是：

```
Error   01/14/2013 1:31:47 AM   The diagnostic data adapter 'Microsoft.VisualStudio.TestTools.CodeCoverage.CoveragePlugIn, Microsoft.VisualStudio.QualityTools.Plugins.CodeCoverage, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' on agent 'BuildServer3' threw an exception during type loading, construction, or initialization: System.IO.FileLoadException: Could not load file or assembly 'Microsoft.VisualStudio.QualityTools.Plugins.CodeCoverage, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'Microsoft.VisualStudio.QualityTools.Plugins.CodeCoverage, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMarkHandle stackMark, Boolean loadTypeFromPartialName, ObjectHandleOnStack type)
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, Boolean loadTypeFromPartialName)
   at System.RuntimeType.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark)
   at System.Type.GetType(String typeName, Boolean throwOnError)
   at Microsoft.VisualStudio.TestTools.DataCollection.ExecutionPluginManager.LoadAndInitDataCollectorAsync(TestRun testRun, String collectorTypeName, Dictionary`2 dataCollectorCache) 
```

这是来自 Visual Studio 2012 解决方案，构建服务器运行 Visual Studio 2010 ......所以我猜这就是它失败的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T00:30:28.087

我解决了这个问题。

我`CodeCoverage.testsettings`在构建过程中创建了一个文件来测量代码覆盖率……但我在 Visual Studio 2012 中创建了该文件。我使用我最喜欢的文本编辑器在文件中找到了这个条目：

```
<DataCollector uri="datacollector://microsoft/CodeCoverage/1.0" assemblyQualifiedName="Microsoft.VisualStudio.TestTools.CodeCoverage.CoveragePlugIn, Microsoft.VisualStudio.QualityTools.Plugins.CodeCoverage, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" friendlyName="Code Coverage (Visual Studio 2010)"> 
```

我在那里看到了 11.0.0.0 的版本（它一定是由 Visual Studio 2012 生成的）。我刚刚使用我的文本编辑器将其更改为 10.0.0.0：

```
<DataCollector uri="datacollector://microsoft/CodeCoverage/1.0" assemblyQualifiedName="Microsoft.VisualStudio.TestTools.CodeCoverage.CoveragePlugIn, Microsoft.VisualStudio.QualityTools.Plugins.CodeCoverage, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" friendlyName="Code Coverage (Visual Studio 2010)"> 
```

构建现在按预期工作。

# jquery - JQuery Waypoints - 具有相同 ID 的 div 的多个触发器

> ID：14349536
> 
> 赞同：0
> 
> 时间：2013-01-16T00:32:10.653
> 
> 标签：jquery, jquery-waypoints

我正在使用[http://imakewebthings.com/jquery-waypoints](http://imakewebthings.com/jquery-waypoints)。

我希望每次 id="project" 的 div 到达视口顶部时都会触发它。具有此 ID 的 div 不止一个，但它仅适用于第一个 div，之后不适用。

我真的不想使用类，因为它会混淆我代码的其他区域。

```
$('#project').waypoint(function() {
alert('Hello world');
}); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:40:23.267

jQuery 假定 id 选择器是唯一的，因此只返回它找到的第一个匹配项。

因此，两种可能的解决方案可能是：

*   使用类
*   或使用不同的 ID，如`uniqueid-1`, `uniqueid-2`,`uniqueid-3`等...然后使用属性选择器匹配 id 中的子字符串，`$('[id^=uniqueid]')`

# html - ie8 div 垂直向下

> ID：14349540
> 
> 赞同：1
> 
> 时间：2013-01-16T00:32:23.213
> 
> 标签：html, css, twitter-bootstrap

在 ie8 中，整个 div 完全下降，但我希望这个 div 水平对齐......你能告诉我如何解决这个问题

即使在小提琴中它也会下降 [http://jsfiddle.net/VXXPC/2/embedded/result/](http://jsfiddle.net/VXXPC/2/embedded/result/)

它在 chrome 中完美运行 [http://www.defie.co/testing/twitter-bootstrap-558bc52/docs/examples/marketing-alternate.html](http://www.defie.co/testing/twitter-bootstrap-558bc52/docs/examples/marketing-alternate.html)

```
<div class="span3" style="width: 516px;">
                <h4 class="taxInformation">Tax Information</h4>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Seller Permit No</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Tax Rate</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Tax District</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Federal ID No</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <h4 class="accountingContactInfo">Accounting Contact Info</h4>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Name</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Email</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Phone</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Credit Limit</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <h4 class="bankInfo">Bank Info</h4>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Bank Name</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Telephone</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Account No</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Bank Contact</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Terms</label>
                    <div class="controls">
                      <input type="text" id="inputEmail">
                    </div>
                </div>
                <h4 class="bankInfo">Notes</h4>
                <div class="control-group">
                      <textarea style="width: 380px;" rows="3" cols="50"></textarea>
                </div>
                <div style="margin-left: 95px;">
                  <input style="width: 108px;" name="Finish" value="Save File" class="checkout-button saveFileButton" type="submit">
                  <input name="Finish" value="Delete" class="checkout-button deleteButton" type="submit" style="width: 107px;padding-left: 0px;padding-right: 0px;">
                </div>

              </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:41:34.187

之后有一个 float 元素和一个 inline-block 元素。试着让它们都浮起来。

```
.redButton {
clear: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:51:25.527

尝试减小 的宽度`div.span3`。

例如

```
<div class="span3" style="width: 456px;"> 
```

避免在 HTML 中使用内联样式，`width`在`height`CSS 中设置这些属性。顺便说一句，如果窗口宽度调整到小于 1000px，这个 DIV 仍然会垂直向下。

# c++ - 封装几何单位的类：弧度/度

> ID：14349545
> 
> 赞同：0
> 
> 时间：2013-01-16T00:33:15.070
> 
> 标签：c++, objective-c, c, geometry

在计算天文计算的几何时做了一堆编码。生成的代码有点难看，因为事情一直在转换为弧度和从弧度转换。类的一大优点是能够封装诸如单元之类的东西。所以Money就是一个很好的例子。虽然，一般来说，在 Money 类中，您往往会看到不可变的实现，因为一旦我们赚了一笔钱，我们就在附加单位，然后如果我们想改变钱，我们将用期望的目标单位。

有大量关于从弧度转换为度数和宏的帖子。这不是我要问的。我问有没有其他人考虑过做一个像 GeometricValue 这样的类，可能里面有一个 GeometricUnit，可以是弧度或度数的枚举。但是，在这种情况下，我认为我想做的是这样的：

```
GeometricMeasure elevationAngle = [[GoemetricMeasure alloc] initWithValue:30 andUnits:GeometricUnits.Degrees]; 
```

但是几行之后我可以这样做：

```
double radians = [elevationAngle asRadians]; 
```

您可以想象的另一件事是自动转换。我不得不说，当野蛮人在 C++ 运行的顶峰时期疯狂时，运算符重载的论点是愚蠢的，因为人们可以做愚蠢的事情并且复制转换器也很危险，我认为是荒谬的。能够做如下等式会很有意义：

```
acos(sin(elevationAngle) + sin(hourAngle)) 
```

并让代码自动将每个度量转换为所需的操作单位（弧度）。其他人认为这值得考虑吗？还是已经朝这个方向做了一些事情（我找不到）？

谢谢。

# c# - WPF 文件关联问题

> ID：14349546
> 
> 赞同：1
> 
> 时间：2013-01-16T00:33:21.230
> 
> 标签：c#, .net, visual-studio, installshield

我有一个要为其创建文件关联的应用程序。这是一个 WPF 应用程序，我在 Visual Studio 2012 中有一个使用 InstallShield 2012 LE 构建的安装程序。

我已经通过 Install Shield 项目中的“文件扩展名”屏幕添加了关联，但它似乎不适用于已知的文件类型。如果我添加一个随机扩展名，然后在匹配的文件上右键单击->“打开方式”，则该应用程序将出现在列表中，但对于已知的文件类型，它不存在。

查看注册表，似乎需要将 regkey 放在`HKEY_CURRENT_USER->SOFTWARE->CLASSES->".FILEEXTENSION"->OpenWithProgids`.

Install shield 确实`ProgID`在注册表中为应用程序创建了正确的条目，但似乎没有任何地方可以告诉它创建丢失的密钥，除非手动将其添加到注册表中。

在 MS 从 VS 中删除他们自己的安装项目之前，您曾经能够选择扩展和所需的动词。

我只是错过了设置它的正确位置，还是需要根据需要手动添加注册表项？

# jquery - :text、:radio、:checkbox 等选择器在 1.9.0 中是否仍被弃用？

> ID：14349548
> 
> 赞同：3
> 
> 时间：2013-01-16T00:33:26.530
> 
> 标签：jquery, jquery-selectors, deprecated

我已经停止使用`:text`，`:radio`因为它们[在 1.8 中已被弃用](http://bugs.jquery.com/ticket/9400)。但是，我注意到从 1.9.0 开始，[不再有任何迹象](http://api.jquery.com/radio-selector/)表明它们已被弃用。[这](https://github.com/jquery/sizzle/blob/3e40b5d6055c192925a28efbd6c4abf5c784508e/sizzle.js#L1316)是 1.9.0 中包含的相关 Sizzle 代码。

此外，[在文档中搜索“已弃用”](http://api.jquery.com/?s=deprecated)并没有表明它们已弃用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:42:42.910

文档中没有提及`:text`或`:radio`在 1.9 中已弃用。我也没有看到任何提及它们在开发源代码中被弃用。

根据以下资源，可以安全地假设它们没有被弃用：

*   [发行说明 1.8](http://api.jquery.com/category/version/1.8/)
*   [弃用列表 1.8](http://api.jquery.com/category/deprecated/deprecated-1.8/)
*   [发行说明 1.9](http://api.jquery.com/category/version/1.9/)

# actionscript-3 - 我重新启动游戏的代码出了什么问题

> ID：14349549
> 
> 赞同：0
> 
> 时间：2013-01-16T00:33:35.983
> 
> 标签：actionscript-3, restart

我正在为一个学校项目在 AS3 中制作游戏，但我一直在重新启动游戏。游戏结束后，有一个最终画面，然后您可以返回菜单。这一切都很顺利，但是当我再次尝试播放时，它会说：

```
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
at flash.display::DisplayObjectContainer/setChildIndex()
at MethodInfo-277() 
```

我对此进行了调试，然后进入下一个代码块：

```
 if (bringToFront==1){

                    setChildIndex(player,numChildren - 1);
                    setChildIndex(foppeLeft, numChildren - 1);
                    setChildIndex(foppeIdle, numChildren - 1);
                    setChildIndex(foppeRight, numChildren - 1);
                    setChildIndex(foppeDown, numChildren - 1);
                    setChildIndex(foppeUp, numChildren - 1);
                    setChildIndex(foppeTalent, numChildren - 1);
                    setChildIndex(abeIdle, numChildren - 1);
                    setChildIndex(abeUp, numChildren - 1);
                    setChildIndex(abeDown, numChildren - 1);
                    setChildIndex(abeLeft, numChildren - 1);
                    setChildIndex(abeRight, numChildren - 1);
                    setChildIndex(abeSkateIdle, numChildren -1);
                    setChildIndex(abeSkateUp, numChildren - 1);
                    setChildIndex(abeSkateDown, numChildren - 1);
                    setChildIndex(abeSkateLeft, numChildren - 1);
                    setChildIndex(abeSkateRight, numChildren - 1);
                    setChildIndex(abeSkateOn, numChildren-  1);
                    setChildIndex(abeSkateOff, numChildren - 1);
                    setChildIndex(marcoIdle, numChildren - 1);
                    setChildIndex(marcoDown, numChildren - 1);
                    setChildIndex(marcoUp, numChildren - 1);
                    setChildIndex(marcoLeft, numChildren - 1);
                    setChildIndex(marcoRight, numChildren - 1);
                    setChildIndex(marcoJumpUp, numChildren - 1);
                    setChildIndex(marcoJumpIdle, numChildren - 1);
                    setChildIndex(marcoJumpDown, numChildren - 1);
                    setChildIndex(marcoJumpRight, numChildren - 1);
                    setChildIndex(marcoJumpLeft,numChildren - 1);
                    setChildIndex(hudIngame,numChildren - 1);
                    setChildIndex(time,numChildren - 1);
                    setChildIndex(c1000PuP, numChildren - 1);
                    setChildIndex(univePuP, numChildren - 1);
                    setChildIndex(rabobankPuP, numChildren - 1);
                    setChildIndex(frieslandPuP, numChildren - 1);
                    setChildIndex(jakoPuP, numChildren - 1);

                    bringToFront=0;

                } 
```

通过删除所有这些，它确实不再给出错误，但在我的游戏中，我从 a`tileSheet`和数组构建了关卡。当我进入下一个级别时，它不会加载瓷砖；它显示了第一级，但代码适用于第二级。

（请原谅我混乱的代码；我是新手。）

代码是 2000+ 行，所以我不会发布，但我会发布一些可能会清除它的部分。

当你到达终点时，会发生这种情况：

```
 for (var mapEnd in mapsEndArr){
            if (player.hitTestObject(mapsEndArr[mapEnd])){
                if (oneRound==0){
                oneRound=1;
                player.x=0;
                }
            }
        }

        if (oneRound==1){
            //Making sure the arrows & pick up points get deleted when going to another map.

            if (foppeAction == true){

                for (var drawClueEnd in clueArray){
                    removeChild( clueArray[drawClueEnd] );
                }

                if (c1000PuPDrawn==true){
                    c1000PuP.visible=false;
                }

                if (univePuPDrawn==true){
                    univePuP.visible=false;
                }

                if (rabobankPuPDrawn==true){
                    rabobankPuP.visible=false;
                }

                if (frieslandPuPDrawn==true){
                    frieslandPuP.visible=false;
                }

                if (jakoPuPDrawn==true){
                    jakoPuP.visible=false;
                }
                foppeAction = false;
                freeze=0;

            }
            mapNumberY=0;
            mapNumberX=0;   

            mapsUpArr.splice(0, mapsUpArr.length);
            mapsDownArr.splice(0, mapsDownArr.length);
            mapsLeftArr.splice(0, mapsLeftArr.length);
            mapsRightArr.splice(0, mapsRightArr.length);
            wallArrayS.splice(0, wallArrayS.length);
            wallArray.splice(0, wallArray.length);
            iceArray.splice(0, iceArray.length);
            iceBorderArray.splice(0, iceBorderArray.length);
            clueArray.splice(0, clueArray.length);
            pickUpPoint.splice(0, pickUpPoint.length);

            c1000PuPDrawn=false;
            univePuPDrawn=false;
            rabobankPuPDrawn=false;
            frieslandPuPDrawn=false;
            jakoPuPDrawn=false;

            hudBars = new HudBars();
            hudBars.x = 0;
            hudBars.y = 0;
            addChild(hudBars);

            dispatchEvent( new NavigationEvent( NavigationEvent.FINAL ) );

            if (points==0){
                DocumentClass.endScreen.pointsText.text=("Je hebt geen logo's verzamelt.");
            }

            if (points>0 && points<5){
                DocumentClass.endScreen.pointsText.text=("Je hebt "+ points.toString() +"logo('s) verzamelt.");
            }

            if (points==5){
                DocumentClass.endScreen.pointsText.text=("Je hebt alle logo's verzamelt!");
            }

            points=0;

            //Removing all the childs and eventlisteners to clean stuff up in the cleanup function.
            cleanup();

            oneRound=2;

        } 
```

和清理：

```
 function cleanup():void
        {
            removeEventListener(Event.ADDED_TO_STAGE, addedToStageHandler);
            removeEventListener(MouseEvent.MOUSE_DOWN, menuButtonClicked)
            removeEventListener(KeyboardEvent.KEY_DOWN, downKey);
            removeEventListener(KeyboardEvent.KEY_UP, upKey);
            removeEventListener(Event.ENTER_FRAME, loop);
            removeEventListener(Event.ENTER_FRAME, pauseLoop);

            for (var deleteChilds in deleteChildArr){
                removeChild(deleteChildArr[deleteChilds]);
            }

            setToNull();

        }

    }

    function setToNull():void
    {

    myGame=null;

    time=null;

    } 
```

我对此感到有些困惑，试图将所有内容设置为空，但我有一种感觉，它没有发生。有什么想法吗？当您退出最终屏幕时，此代码在某些时候也设置为 null：

```
 public function finalScreen():void
    {
        endScreen = new EndScreen();
        endScreen.addEventListener( NavigationEvent.MENU, onRequestMenu );
        endScreen.x = 0;
        endScreen.y = 0;
        addChild(endScreen);

        playScreen=null;

    } 
```

我希望任何这些都可能导致有价值的答案。我用不同的术语进行了一些谷歌搜索，我发现我的游戏仍然认为有一些电影剪辑需要设置在前面，但是因为它们被设置为空而无法访问？

是否可以像第一次玩一样清除所有内容然后开始新游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:16:38.207

在删除或更改索引之前，您必须检查孩子现在是否在父母中：

```
if (this.contains(player))    
    setChildIndex(player,numChildren - 1); 
```

# google-app-engine - 使用 Go 完成常见的 App Engine 处理程序任务

> ID：14349551
> 
> 赞同：7
> 
> 时间：2013-01-16T00:34:02.813
> 
> 标签：google-app-engine, go

这是一个最佳实践问题，可能没有一个正确答案。似乎我的大多数处理程序都需要执行一些常见的初始化作业，然后才能开始处理特定于处理程序的工作。示例包括用户身份验证、检测语言环境和加载翻译后的字符串、检查 memcached 值等等。

在内部处理其中一些任务似乎是合理的`init`，但大多数都需要`Http.Request`或`appengine.Context`. 据我所知，这留下了三个选择：

1.  最后实现`ServeHTTP`并添加执行自定义初始化函数的能力。问题是，我将无法使用实现自己的`ServeHTTP`.

2.  使用多路复用器的分叉版本（不太理想）。

3.  `startHandler`在整个应用程序的每个处理程序的开头放置一个函数。看起来很麻烦，尽管我认为它可以清楚地说明正在发生的事情，而不是在`ServeHTTP`.

处理所有处理程序共有的工作的首选方法是什么？我错过了另一种方法吗？

* * *

这是 minikomi 的答案中概述的方法的完整 App Engine 示例。[访问Jeff Wendling 的教程](http://shadynasty.biz/blog/2012/08/07/painless-web-handlers-in-go/)也很值得。

```
package app                                                                                                                                                                                                                                     

import (
    "fmt" 
    "log" 
    "net/http" 

    "appengine" 
    "appengine/datastore" 

    "github.com/gorilla/context" 
    "github.com/gorilla/mux" 
)

type Config struct {
    DefaultLocale string 
    DefaultTimezone string 
}

type ContextKey int 

const (
    SiteConfig ContextKey = iota 
    // ... 
)

type InitHandler func(http.ResponseWriter, *http.Request, appengine.Context)

func (h InitHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    // All handler initialisation tasks go here 
    c := appengine.NewContext(r)
    k := datastore.NewKey(c, "Config", "site:config", 0, nil)
    config := new(Config)
    if err := datastore.Get(c, k, config); err != nil {
        log.Fatal("Couldn't read config from datastore: %s\n", err.Error())
    }
    context.Set(r, SiteConfig, config)

    // Finally, call the handler itself 
    h(w, r, c)
}

func init () {
    r := mux.NewRouter()
    r.Handle("/", InitHandler(home))  // Note: NOT r.HandleFunc!
    http.Handle("/", r)
}

func home(w http.ResponseWriter, r *http.Request, c appengine.Context) {
    site := context.Get(r, SiteConfig).(*Config)
    fmt.Fprintf(w, "Locale: %s, timezone: %s.", site.DefaultLocale, site.DefaultTimezone)
} 
```

让我有一阵子的是需要使用`router.Handle`而不是`router.HandleFunc`. 假设数据存储中有适当的实体，输出如下所示：

```
Locale: en_US, timezone: UTC. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T08:47:00.767

您可以创建一个 (func) 类型，它具有`ServeHTTP`满足您需要的所有功能，然后在内部调用原始函数，然后将您的处理程序转换为该类型：

```
package main

import (
        "fmt"
        "log"
        "net/http"
)

type wrappedHandler func(w http.ResponseWriter, r *http.Request)

func (h wrappedHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
        log.Println("Do Other GAE Stuff")
        h(w, r)
}

func handler(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, "Hi!")
}

func main() {
        http.Handle("/", wrappedHandler(handler))
        http.ListenAndServe(":8080", nil)
} 
```

如果您想将某些内容传递给`handler()`func，您可以将其添加到签名中，例如：

```
type wrappedHandler func(w http.ResponseWriter, r *http.Request, conn *db.Connection)

func (h wrappedHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
        conn := db.CreateConnection();
        h(w, r, conn)
}

func handler(w http.ResponseWriter, r *http.Request, conn *db.Connection) {
        data := conn.AllTheData()
        fmt.Fprintf(w, data)
} 
```

# javascript - 在 MVC4 中，如何在 Razor 文件中创建脚本包

> ID：14349553
> 
> 赞同：5
> 
> 时间：2013-01-16T00:34:18.587
> 
> 标签：javascript, asp.net-mvc-4, bundle

我正在设置我的 MVC4 应用程序以使用内置的 ASP.Net 捆绑（从 Squishit 转换）。我已经设置了 BundleConfig 类，一切正常，但是对于 Razor 文件仅引用一个 JavaScript 文件的情况，我认为不需要涉及该配置文件。我宁愿将脚本添加到我的 Razor 'Scripts' 部分的 BundleTable 中，然后在此处渲染它。这样，如果我不得不更改 BundleConfig 文件而不是更改 BundleConfig 文件，我可以很容易地发布到生产环境中进行小的更改。这就是我所拥有的：

```
@section Scripts
{
    @{   
        const string bundle = "~/bundles/{myVirtualBundlePath}";
        BundleTable.Bundles.Add(new ScriptBundle(bundle)
            .Include("{myActualJavaScriptFilePath}"));
        Scripts.Render(bundle);
    }
} 
```

虽然这构建正常，但对该捆绑文件的引用永远不会输出到 HTML。

我是否需要获取对 BundleConfig 使用的特定 BundleCollection 的引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T05:55:08.993

我的（有效）之间的唯一区别是我在脚本块之外添加了包。如果这不起作用，请确保它在主捆绑启动中起作用，这可能是其他一些问题。

```
@{ BundleTable.Bundles.Add(new ScriptBundle("~/Scripts/Plugins/highcharts")
                           .Include("~/Scripts/Plugins/highcharts.js")); }
@section Scripts
{    
    @Scripts.Render("~/Scripts/Plugins/highcharts")
    @Scripts.Render("~/Scripts/Views/Charts/transportDelayCharts")
} 
```

# c# - 在自托管 WebApi 中获取 HttpRequest 上下文

> ID：14349557
> 
> 赞同：5
> 
> 时间：2013-01-16T00:35:04.047
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

如何从自托管的 MVC WebAPI 访问查询字符串？

使用 NRE 调用以下命令失败，因为 Current 为空（又名 null）

```
System.Web.HttpContext.Current.Request["myQuery"] 
```

我需要访问控制器之外的当前上下文，因为我想通过控制我的对象实例化。DI。例如。

```
 container
            .RegisterType<MyObject>(
                new InjectionFactory(
                    uc =>
                        new MyObject(
                            System.Web.HttpContext.Current.Request["myParam"]) //This failed.
                    )); 
```

`container.Resolve<MyObject>()`由于上述 NRE，从 ControllerApi 代码内部调用失败。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T01:38:52.713

您不应该真正`System.Web.HttpContext.Current`在 Web API 中使用。它仅在使用 Web 主机时有效，并且实际上仅出于遗留原因。上下文信息隐藏在`HttpRequestMessage.Properties`集合中。

Web API 提高可测试性的方法之一是消除其对静态属性的依赖。

有一些方法可以处理实例解析和传递参数。看到这个问题[Unity Application Block, How pass a parameter to Injection Factory?](https://stackoverflow.com/questions/4343492/unity-application-block-how-pass-a-parameter-to-injection-factory)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T01:28:37.487

HttpContext.Current 在自托管项目中不可用

请参阅：[HttpSelfHostServer 和 HttpContext.Current](https://stackoverflow.com/questions/11347807/httpselfhostserver-and-httpcontext-current)

# jquery - jquery if 语句格式化

> ID：14349562
> 
> 赞同：-1
> 
> 时间：2013-01-16T00:35:21.057
> 
> 标签：jquery, if-statement

我有一个 jquery if 语句，它不能按应有的方式工作，我认为它很接近，但似乎不太想工作：

我希望它遵循以下内容：如果它是一个 ios 设备，我希望它做一件事，如果它是一个高度大于 500 像素但小于 830 像素的窗口，那么做另一件事，如果这两者都不是做第三件事

```
var deviceAgent = navigator.userAgent.toLowerCase();
var agentID = deviceAgent.match(/(iphone|ipod|ipad)/);

if(agentID) {
    $("#about_container").css({
        height: $(window).height() + 500
    });
    $("#about_main_header_container").css({
        paddingBottom: (($(window).height() - $("#about_content_total").outerHeight(true)) /2) - 50
    });
    $("#services_wrapper").css({
        height: $(window).height() + 190
    });
    $("#services_main_header_container").css({
        paddingBottom: (($(window).height() - $("#services_container").outerHeight(true)) /2) - 10
    });
}
else if ($(window).height() > 500, $(window).height() < 830) {
$("#about_container").css({
    height: 830
});    
$("#services_wrapper").css({
    height: 830
});
$("#services_main_header_container").css({
    paddingBottom: 160
});
$("#about_main_header_container").css({
    paddingBottom: 130
});
}
else {
    $("#about_container").css({
        height: $(window).height() - 65
    });
    $("#about_main_header_container").css({
        paddingBottom: (($(window).height() - $("#about_content_total").outerHeight(true)) /2) - 175
    });
    $("#services_wrapper").css({
        height: $(window).height() - 100
    });
    $("#services_main_header_container").css({
        paddingBottom: (($(window).height() - $("#services_container").outerHeight(true)) /2) - 175
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:37:20.973

```
else if ($(window).height() > 500, $(window).height() < 830) 
```

不对，应该是：

```
else if ($(window).height() > 500 && $(window).height() < 830) 
```

在 javascript 中，`a,b`只会返回`b`.

# python - 如何从 Python 日志记录模块获得非阻塞/实时行为？（输出到 PyQt QTextBrowser）

> ID：14349563
> 
> 赞同：10
> 
> 时间：2013-01-16T00:35:27.333
> 
> 标签：python, logging, pyqt, nonblocking, qtextbrowser

**描述**：我编写了一个自定义日志处理程序，用于捕获日志事件并将它们写入 QTextBrowser 对象（工作示例代码如下所示）。

**问题**：按下按钮调用`someProcess()`。这会将两个字符串写入`logger`对象。但是，字符串仅在`someProcess()`返回后出现。

**问题**：如何让记录的字符串立即/实时显示在 QTextBrowser 对象中？（即一旦`logger`调用输出方法）

```
from PyQt4 import QtCore, QtGui
import sys
import time
import logging
logger = logging.getLogger(__name__)

class ConsoleWindowLogHandler(logging.Handler):
    def __init__(self, textBox):
        super(ConsoleWindowLogHandler, self).__init__()
        self.textBox = textBox

    def emit(self, logRecord):
        self.textBox.append(str(logRecord.getMessage()))

def someProcess():
    logger.error("line1")
    time.sleep(5)
    logger.error("line2")

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    window = QtGui.QWidget()
    textBox = QtGui.QTextBrowser()
    button = QtGui.QPushButton()
    button.clicked.connect(someProcess)
    vertLayout = QtGui.QVBoxLayout()
    vertLayout.addWidget(textBox)
    vertLayout.addWidget(button)
    window.setLayout(vertLayout)
    window.show()
    consoleHandler = ConsoleWindowLogHandler(textBox)
    logger.addHandler(consoleHandler)
    sys.exit(app.exec_()) 
```

**编辑**：感谢@abarnert 的回答，我设法使用QThread 编写了这段工作代码。`QThread`为了`someProcess`在后台线程中运行某些功能，我进行了子类化。对于信号，我不得不求助于旧式 Signal and Slots（我不确定如何在新式中做到这一点）。我创建了一个虚拟 QObject 以便能够从日志处理程序发出信号。

```
from PyQt4 import QtCore, QtGui
import sys
import time
import logging
logger = logging.getLogger(__name__)

#------------------------------------------------------------------------------
class ConsoleWindowLogHandler(logging.Handler):
    def __init__(self, sigEmitter):
        super(ConsoleWindowLogHandler, self).__init__()
        self.sigEmitter = sigEmitter

    def emit(self, logRecord):
        message = str(logRecord.getMessage())
        self.sigEmitter.emit(QtCore.SIGNAL("logMsg(QString)"), message)

#------------------------------------------------------------------------------
class Window(QtGui.QWidget):
    def __init__(self):
        super(Window, self).__init__()

        # Layout
        textBox = QtGui.QTextBrowser()
        self.button = QtGui.QPushButton()
        vertLayout = QtGui.QVBoxLayout()
        vertLayout.addWidget(textBox)
        vertLayout.addWidget(self.button)
        self.setLayout(vertLayout)

        # Connect button
        self.button.clicked.connect(self.buttonPressed)

        # Thread
        self.bee = Worker(self.someProcess, ())
        self.bee.finished.connect(self.restoreUi)
        self.bee.terminated.connect(self.restoreUi)

        # Console handler
        dummyEmitter = QtCore.QObject()
        self.connect(dummyEmitter, QtCore.SIGNAL("logMsg(QString)"),
                     textBox.append)
        consoleHandler = ConsoleWindowLogHandler(dummyEmitter)
        logger.addHandler(consoleHandler)

    def buttonPressed(self):
        self.button.setEnabled(False)
        self.bee.start()

    def someProcess(self):
        logger.error("starting")
        for i in xrange(10):
            logger.error("line%d" % i)
            time.sleep(2)

    def restoreUi(self):
        self.button.setEnabled(True)

#------------------------------------------------------------------------------
class Worker(QtCore.QThread):
    def __init__(self, func, args):
        super(Worker, self).__init__()
        self.func = func
        self.args = args

    def run(self):
        self.func(*self.args)

#------------------------------------------------------------------------------
if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T00:37:40.157

这里真正的问题是你通过在主线程中休眠来阻塞整个 GUI 5 秒钟。您不能这样做，或者不会显示更新，用户将无法与您的应用程序交互等。日志记录问题只是该主要问题的次要结果。

如果你的真实程序从第三方模块调用一些代码需要 5 秒或者做一些阻塞，它会遇到完全相同的问题。

一般来说，有两种方法可以在不阻塞 GUI（或其他基于事件循环的）应用程序的情况下进行缓慢的阻塞操作：

1.  在后台线程中完成工作。根据您的 GUI 框架，您通常不能从后台线程直接调用 GUI 上的函数或修改其对象；相反，您必须使用某种机制将消息发布到事件循环。在 Qt 中，您通常通过信号槽机制来执行此操作。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/13420931/pyqt-modify-gui-from-another-thread)。

2.  将作业分解为快速返回的非阻塞或仅保证非常短期阻塞的作业，每个作业在返回之前安排下一个。（对于一些 GUI 框架，您可以通过调用类似的东西`safeYield`或递归地调用事件循环来执行等效的内联操作，但您不能使用 Qt 来执行此操作。）

鉴于这`someProcess`是一些您无法修改的外部代码，它要么需要几秒钟才能完成，要么会阻塞，因此您不能使用选项 2。因此，选项 1 是：在后台线程中运行它。

幸运的是，这很容易。Qt 有办法做到这一点，但 Python 的方法更简单：

```
t = threading.Thread(target=someProcess)
t.start() 
```

现在，您需要进行更改，以便它发送一个信号以在主线程中完成`ConsoleWindowLogHandler.emit`，而不是直接修改。`textBox`有关所有详细信息，请参阅[线程和 QObjects](http://qt-project.org/doc/qt-4.8/threads-qobject.html)，以及一些很好的示例。

更具体地说：Mandelbrot 示例使用的 a`RenderThread`实际上并不绘制任何东西，而是发送一个`renderedImage`信号；`MandelbrotWidget`然后有一个插槽`updatePixmap`，它连接到`renderedImage`信号。同样，您的日志处理程序实际上不会更新文本框，而是发送一个`gotLogMessage`信号；那么您将拥有一个连接到该信号的插槽`LogTextWidget`。`updateLog`当然，对于您的简单情况，您可以将它们放在一个类中，只要您使用信号槽连接而不是直接方法调用将两侧连接起来。

您可能想在关机期间保留`t`在某个地方`join`，或者设置`t.daemon = True`.

无论哪种方式，如果您想知道何时`someProcess`完成，您需要在完成后使用其他方式与主线程进行通信——同样，对于 Qt，通常的答案是发送信号。这也可以让您从`someProcess`. 而且您无需进行修改`someProcess`即可执行此操作；只需定义一个调用`someProcess`并发出其结果信号的包装函数，然后从后台线程调用该包装函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-31T19:10:15.993

Build on top of @Gilead's code and @Cecil's suggestions, I update the code by changing the old-style to new-style signal/slot and changing the `QTextBrowser` to `QTextEdit`.

```
import sys
import time
import logging
from qtpy.QtCore import QObject, Signal, QThread
from qtpy.QtWidgets import QWidget, QTextEdit, QPushButton, QVBoxLayout

logger = logging.getLogger(__name__)

class ConsoleWindowLogHandler(logging.Handler, QObject):
    sigLog = Signal(str)
    def __init__(self):
        logging.Handler.__init__(self)
        QObject.__init__(self)

    def emit(self, logRecord):
        message = str(logRecord.getMessage())
        self.sigLog.emit(message)

class Window(QWidget):
    def __init__(self):
        super(Window, self).__init__()

        # Layout
        textBox = QTextEdit()
        textBox.setReadOnly(True)
        self.button = QPushButton('Click')
        vertLayout = QVBoxLayout()
        vertLayout.addWidget(textBox)
        vertLayout.addWidget(self.button)
        self.setLayout(vertLayout)

        # Connect button
        #self.button.clicked.connect(self.someProcess) # blocking
        self.button.clicked.connect(self.buttonPressed)

        # Thread
        self.bee = Worker(self.someProcess, ())
        self.bee.finished.connect(self.restoreUi)
        self.bee.terminated.connect(self.restoreUi)

        # Console handler
        consoleHandler = ConsoleWindowLogHandler()
        consoleHandler.sigLog.connect(textBox.append)
        logger.addHandler(consoleHandler)

    def buttonPressed(self):
        self.button.setEnabled(False)
        self.bee.start()

    def someProcess(self):
        logger.error("starting")
        for i in range(10):
            logger.error("line%d" % i)
            time.sleep(2)

    def restoreUi(self):
        self.button.setEnabled(True)

class Worker(QThread):
    def __init__(self, func, args):
        super(Worker, self).__init__()
        self.func = func
        self.args = args

    def run(self):
        self.func(*self.args)

def main():
    from qtpy.QtWidgets import QApplication
    app = QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T08:15:06.570

这是另一种方法。在这个例子中，我通过继承和`StreamHandler`向写入缓冲区的记录器添加 a ：当处理程序遇到非空字符串时，将发出信号并在槽中捕获信号。`QObject``StringIO``bufferMessage``on_bufferMessage`

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import logging, StringIO, time

from PyQt4 import QtCore, QtGui

class logBuffer(QtCore.QObject, StringIO.StringIO):
    bufferMessage = QtCore.pyqtSignal(str)

    def __init__(self, *args, **kwargs):
        QtCore.QObject.__init__(self)
        StringIO.StringIO.__init__(self, *args, **kwargs)

    def write(self, message):
        if message:
            self.bufferMessage.emit(unicode(message))

        StringIO.StringIO.write(self, message)

class myThread(QtCore.QThread):
    def __init__(self, parent=None):
        super(myThread, self).__init__(parent)
        self.iteration = None

    def start(self):
        self.iteration = 3

        return super(myThread, self).start()

    def run(self):        
        while self.iteration:
            logging.info("Hello from thread {0}! {1}".format(0, self.iteration))
            self.iteration -= 1

            time.sleep(3)

class myThread1(QtCore.QThread):
    def __init__(self, parent=None):
        super(myThread1, self).__init__(parent)
        self.iteration = None
        self.logger = logging.getLogger(__name__)

    def start(self):
        self.iteration = 3

        return super(myThread1, self).start()

    def run(self):        
        time.sleep(1)
        while self.iteration:
            self.logger.info("Hello from thread {0}! {1}".format(1, self.iteration))
            self.iteration -= 1

            time.sleep(3)

class myWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.pushButton = QtGui.QPushButton(self)
        self.pushButton.setText("Send Log Message")
        self.pushButton.clicked.connect(self.on_pushButton_clicked)

        self.pushButtonThread = QtGui.QPushButton(self)
        self.pushButtonThread.setText("Start Threading")
        self.pushButtonThread.clicked.connect(self.on_pushButtonThread_clicked)

        self.lineEdit = QtGui.QLineEdit(self)
        self.lineEdit.setText("Hello!")

        self.label = QtGui.QLabel(self)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.lineEdit)
        self.layout.addWidget(self.pushButton)
        self.layout.addWidget(self.pushButtonThread)
        self.layout.addWidget(self.label)

        self.logBuffer = logBuffer()
        self.logBuffer.bufferMessage.connect(self.on_logBuffer_bufferMessage)

        logFormatter = logging.Formatter('%(levelname)s: %(message)s')

        logHandler = logging.StreamHandler(self.logBuffer)
        logHandler.setFormatter(logFormatter)

        self.logger = logging.getLogger()
        self.logger.setLevel(logging.INFO)
        self.logger.addHandler(logHandler)

        self.thread = myThread(self)
        self.thread1 = myThread1(self)

    @QtCore.pyqtSlot()
    def on_pushButtonThread_clicked(self):
        self.thread.start()
        self.thread1.start()

    @QtCore.pyqtSlot(str)
    def on_logBuffer_bufferMessage(self, message):
        self.label.setText(message)

    @QtCore.pyqtSlot()
    def on_pushButton_clicked(self):
        message = self.lineEdit.text()
        self.logger.info(message if message else "No new messages")

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

这种方法最好的一点是，您可以记录来自主应用程序的模块/线程的消息，而不必保留对记录器的任何引用，例如，通过调用`logging.log(logging.INFO, logging_message)`或`logging.info(logging_message)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-12T08:17:59.057

翻译 JoeXinfa 对 PyQt5 的回答：

```
import sys
import time
import logging
from PyQt5.QtCore import QObject, pyqtSignal, QThread
from PyQt5.QtWidgets import QWidget, QTextEdit, QPushButton, QVBoxLayout, QApplication

logger = logging.getLogger(__name__)

class ConsoleWindowLogHandler(logging.Handler, QObject):
    sigLog = pyqtSignal(str)
    def __init__(self):
        logging.Handler.__init__(self)
        QObject.__init__(self)

    def emit(self, logRecord):
        message = str(logRecord.getMessage())
        self.sigLog.emit(message)

class Window(QWidget):
    def __init__(self):
        super(Window, self).__init__()

        # Layout
        textBox = QTextEdit()
        textBox.setReadOnly(True)
        self.button = QPushButton('Click')
        vertLayout = QVBoxLayout()
        vertLayout.addWidget(textBox)
        vertLayout.addWidget(self.button)
        self.setLayout(vertLayout)

        # Connect button
        #self.button.clicked.connect(self.someProcess) # blocking
        self.button.clicked.connect(self.buttonPressed)

        # Thread
        self.bee = Worker(self.someProcess, ())
        self.bee.finished.connect(self.restoreUi)
        self.bee.terminate()

        # Console handler
        consoleHandler = ConsoleWindowLogHandler()
        consoleHandler.sigLog.connect(textBox.append)
        logger.addHandler(consoleHandler)

    def buttonPressed(self):
        self.button.setEnabled(False)
        self.bee.start()

    def someProcess(self):
        logger.error("starting")
        for i in range(10):
            logger.error("line%d" % i)
            time.sleep(2)

    def restoreUi(self):
        self.button.setEnabled(True)

class Worker(QThread):
    def __init__(self, func, args):
        super(Worker, self).__init__()
        self.func = func
        self.args = args

    def run(self):
        self.func(*self.args)

def main():
    app = QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

# c# - 使用 asp.net 设置一个简单的 web 服务

> ID：14349566
> 
> 赞同：0
> 
> 时间：2013-01-16T00:35:45.200
> 
> 标签：c#, asp.net, .net

我正在尝试使用 asp.net 设置一个简单的 web 服务。这是我的文件后面的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace MyFirstWebServiceApplication
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
     [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        }

        [WebMethod]
        public String MyFirstWebMethod(String firstName, String lastName)
        {
            //return "How are you " + firstName + " " + lastName + "?";
            return String.Format("How are you {0} {1}?", firstName, lastName);
        }
    }
} 
```

解决方案成功构建。但是，当我运行它，然后尝试调用它时，它不显示预期的 XML，只显示以下消息

> 此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

这是我得到的截图 [http://i45.tinypic.com/2roixvr.png](http://i45.tinypic.com/2roixvr.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:20:18.627

用 Firefox 运行它，然后按 ctrl+shift+J，你会得到错误控制台，从中找到错误。

# eclipse - Eclipse LogCat 窗口不显示

> ID：14349567
> 
> 赞同：2
> 
> 时间：2013-01-16T00:35:58.250
> 
> 标签：eclipse, eclipse-adt

我刚刚在运行 Mountain Lion 的 Mac 上安装了 Eclipse 3.8。我打开了 LogCat 窗口并点击了最小化，它去了某个地方......

现在，当我点击 Window>Show View>Other>LogCat 时，我的屏幕会闪烁，但没有 LogCat android 或任何我能看到的表明它隐藏在某处的东西。我尝试重新启动 Eclipse 无济于事。

这是我的 Eclipse 环境的屏幕截图。

窗口隐藏的任何想法？

![截屏](../Images/30a98ac008a95a10c8d0b102f74ef0f8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-13T08:39:09.883

```
window > open perspective > other > DDMS 
```

在您的右上角`ECLIPSE`会弹出一个名为 DDMS 的小图标。单击它，您将看到一行图标，包括`logcat`. 将该东西拖到 Eclipse 的左下角并单击其中一个图标，然后单击恢复（右上角）。

田田！！！！您的 logcat 和其他视图又回来了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T16:36:22.260

好吧，我仍然不确定 LogCat 窗口在原始窗口中的位置。但是，我可以通过打开一个新窗口并转到 Window>Show View>Other>LogCat 来查看 LogCat。

# javascript - 尝试使用 jquery 提交表单，不起作用

> ID：14349569
> 
> 赞同：0
> 
> 时间：2013-01-16T00:36:15.097
> 
> 标签：javascript, jquery, dom

我正在尝试使用 jquery 将表单数据发布到新窗口。但我失败了。

我的源代码是这样的

```
<!doctype html>
<html>
 <head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js" > </script>
  <script type="text/javascript">
        function submit_with_jquery(){
     var $form = $("<form></form>");
     var $input = $("<input name='imgInput' />");
     $form.prop("target", "photo_top")
        .prop("method", "post")
        .prop("action", "/common/board/photoViewWindow.jsp")
        .append($input)
        .bind("submit", 
            function(){ 
                window.open('','photo_pop','width=720,height=530,toolbar=no,resizable=no,scrollbars=no,left=50,top=50'); 
            } )
        .submit();
    }
  </script>
 </head>
 <body>
        <input type="button" onclick="submit_with_jquery()" value="submit with jquery" />
 </body>
</html> 
```

（*我编辑并将 attr 更改为 prop，但是）它只显示`about:blank`...

然后，我尝试了这段代码并成功了。

```
<!doctype html>
<html>
 <head>
  <script type="text/javascript">
    function submit_with_tag(){
     window.open('','photo_pop','width=720,height=530,toolbar=no,resizable=no,scrollbars=no,left=50,top=50');
    }      </script>
 </head>
 <body>
    <form id="tagForm" action="/common/board/photoViewWindow.jsp" target="photo_pop" onSubmit="submit_with_tag()">
        <input name="imgInput" type="hidden"/>
        <input type="submit" value="submit with tag"/>
    </form>
     </body>
</html> 
```

我认为它的工作原理相同，但 jQuery 代码不是。为什么我的第一个代码不起作用？我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:48:39.413

你`target`的是`"photo_top"`，你打开的窗口叫什么名字`'photo_pop'`？

除此之外，Ajax 可能是比您手动构建表单元素仅提交它们的第一种方法更好的选择。

# scala - 获取脚本文件名并打印它

> ID：14349571
> 
> 赞同：2
> 
> 时间：2013-01-16T00:36:28.070
> 
> 标签：scala

我想知道是否有某种方法可以以编程方式获取脚本文件名并将其打印到控制台，例如在 php 中它是 SCRIPT_NAME 在批处理中它是 %0 在其他一些语言中它是 arg[0]

如果不编写一些复杂的例程，这在 scala 中是可能的还是如此有限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T04:46:13.720

如果您正在使用执行 scala 脚本`scala <scriptname>`，则可以获得如下名称：

```
//Filename: temp.scala
println("Hello there")  //valid statment
val name=System.getProperty("sun.java.command").split(" ")(1)
println("name: " + name) 
```

给我输出：

```
C:\Users\plastygrove\Desktop\tmp>scala temp.scala
Hello there
name: temp.scala 
```

编辑：忘了提一下，代码来自这篇文章：[http](http://rosettacode.org/wiki/ScriptName#Java) ://rosettacode.org/wiki/ScriptName#Java 这篇文章中指出：[如何在 Scala 中获取当前脚本或类名？](https://stackoverflow.com/q/8129185/1287554)

# c# - 如何对实体框架中的列求和

> ID：14349573
> 
> 赞同：15
> 
> 时间：2013-01-16T00:36:53.203
> 
> 标签：c#, entity-framework-4

我正在尝试汇总一列并明智地获取详细信息成员

我的表格数据是

```
id   membername     cost
1   a               100
2   aa              100
3   a               100
4   aa                0
5   b               100 
```

* * *

在实体框架中，我尝试对成本列求和并得到这样的结果

```
membername             totalcost
a                      200
aa                     100
b                      100 
```

那么我正在这样做

```
var result = from o in db.pruchasemasters.Where(d => d.memberid == d.membertable.id && d.entrydate >= thisMonthStart && d.entrydate <= thisMonthEnd)
                     group o by new { o.membertable.members } into purchasegroup
                     select new
                     {
                         membername = purchasegroup.Key,
                         total = purchasegroup.Sum(s => s.price)
                     }; 
```

我如何阅读结果，我的代码是否正确？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-17T21:11:17.017

像这样的东西会起作用

```
 var result = db.pruchasemasters.GroupBy(o => o.membername)
                   .Select(g => new { membername = g.Key, total = g.Sum(i => i.cost) });

    foreach (var group in result)
    {
        Console.WriteLine("Membername = {0} Totalcost={1}", group.membername, group.total);
    } 
```

# jquery - 粘性 jquery 选择的选项

> ID：14349576
> 
> 赞同：0
> 
> 时间：2013-01-16T00:37:07.923
> 
> 标签：jquery

我有一个页面显示用户信息，如地址、电话、姓名等，但电话字段是一个选择选项，我可以在其中进行选择（电话，
对于每个用户，我都有一个选择选项：

```
<select class="smpullinput" id="middle_column_type<? echo $idtable; ?>">
    <option id="Phone" value="Phone">Phone</option>
    <option id="Office" value="Office">Office</option>
    <option id="Cellphone" value="Cellphone">Cellphone</option>
</select> 
//$idtable its just an ID 
```

然后我使用简单的 jquery 显示数据：

```
var idtable = <?=$idtable?>;
$('#middle_column_type'+idtable).change(function() {

    if( $('#middle_column_type'+idtable).val()=="Phone" )
        {                            
          $("#disp_p"+idtable).html(varp).show();
        }

     if( $('#middle_column_type'+idtable).val()=="Office" )
        {
          $("#disp_o"+idtable).html(varo).show();
        }       

     if( $('#middle_column_type'+idtable).val()=="Cellphone" )
        {
          $("#disp_c"+idtable).html(varc).show();
        }               
}); 
```

我使用 span 来显示电话。我现在想要的是有一个“粘性”选择选项，如果我在任何用户中将选择框更改为手机，其他用户都会获得新选项，我知道为了做到这一点，我需要使用我的 class=" smpullinput”（在我的情况下）我尝试了一些不起作用的东西。不确定我是否足够清楚？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:55:39.617

尝试添加`$(".smpullinput").not(this).val(this.value);`，演示：http: [//jsfiddle.net/BTheR/](http://jsfiddle.net/BTheR/)

# java - 创建填充其父级的摆动按钮

> ID：14349577
> 
> 赞同：-1
> 
> 时间：2013-01-16T00:37:14.157
> 
> 标签：java, swing, layout, layout-manager, windowbuilder

我在 Eclipse Indigo 中使用 WindowBuilder 来处理不同的布局。基本上，我只是想彻底了解每种方法的工作原理以及哪些方法最适合不同的场景。下面的代码有效，但是我想调整一些东西，但我不确定如何获得我想要的效果。

```
public class Dashboard extends JFrame {

private JPanel contentPane;

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Dashboard frame = new Dashboard();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public Dashboard() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 602, 372);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    JPanel drawingPanel = new JPanel();
    drawingPanel.setBounds(6, 6, 487, 251);
    contentPane.add(drawingPanel);
    drawingPanel.setLayout(null);

    JScrollPane propertiesScrollPane = new JScrollPane();
    propertiesScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER);
    propertiesScrollPane.setBounds(6, 264, 487, 80);
    contentPane.add(propertiesScrollPane);

    JPanel selectionPanel = new JPanel();
    propertiesScrollPane.setViewportView(selectionPanel);
    selectionPanel.setLayout(new BoxLayout(selectionPanel, BoxLayout.X_AXIS));

    JPanel surfacesPanel = new JPanel();
    selectionPanel.add(surfacesPanel);
    surfacesPanel.setBorder(new BevelBorder(BevelBorder.RAISED, null, null, null, null));
    surfacesPanel.setLayout(new BoxLayout(surfacesPanel, BoxLayout.Y_AXIS));

    JCheckBox surfaceCheck = new JCheckBox("Visible");
    surfaceCheck.setHorizontalAlignment(SwingConstants.CENTER);
    surfacesPanel.add(surfaceCheck);

    JButton surfaceButton = new JButton("Surfaces");
    surfacesPanel.add(surfaceButton);

    JPanel spacesPanel = new JPanel();
    selectionPanel.add(spacesPanel);
    spacesPanel.setBorder(new BevelBorder(BevelBorder.RAISED, null, null, null, null));
    spacesPanel.setLayout(new BoxLayout(spacesPanel, BoxLayout.Y_AXIS));

    JCheckBox spacesCheck = new JCheckBox("Visible");
    spacesCheck.setHorizontalAlignment(SwingConstants.CENTER);
    spacesPanel.add(spacesCheck);

    JButton spacesButton = new JButton("Spaces");
    spacesPanel.add(spacesButton);

    JScrollPane scrollPane_1 = new JScrollPane();
    scrollPane_1.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
    scrollPane_1.setBounds(504, 6, 92, 251);
    contentPane.add(scrollPane_1);

    JLabel logoLabel = new JLabel("Logo Here");
    LogoLabel.setHorizontalAlignment(SwingConstants.CENTER);
    LogoLabel.setBounds(505, 264, 91, 80);
    contentPane.add(logoLabel);
}
} 
```

具体来说：

我希望 selectionPanel 锚定在左下角，propertiesPanel 锚定在右上角，logoLabel 锚定在右下角，drawingPanel 锚定在左上角。这个想法是，当主窗体调整大小时，滚动面板和标签应该准确地保持在它们相对于父窗体边缘的位置，而绘图面板应该水平和垂直调整大小，以便它占用所有剩余空间顶部框架的大小无关紧要。徽标不应在任何维度上调整大小，而 selectionPanel 应在 x 维度上调整大小，属性窗口应在 y 维度上调整大小。最后，我希望表面和空间面板内的按钮占据面板内的最大空间。也就是说，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:13:58.603

请参阅[此答案](https://stackoverflow.com/a/7181197/418556)，其中显示了将按钮拉伸到父容器大小的两种方法。

![](../Images/c058125e61cbffae7a1f5014b1bc0aa9.png)

# c++ - OpenCV 捆绑调整

> ID：14349582
> 
> 赞同：3
> 
> 时间：2013-01-16T00:37:57.867
> 
> 标签：c++, opencv, bundle, adjustment

我正在尝试使用 OpenCV Bundle Adjustment：LevMarqSparse::bundleAdjust 不幸的是，输出似乎完全错误：

```
Iteration: 0, normError: 4.30244e+46 (3.64614e+44)
decreasing lambda to 0.024556
Iteration: 1, normError: 2.72985e+31 (2.31343e+29)
decreasing lambda to 0.0024556
Iteration: 2, normError: 8.00302e+25 (6.78222e+23)
move failed: lambda = 0.024556, e2 = 2.62043e+40 (2.2207e+38) > 8.00302e+25(6.78222e+23)
move failed: lambda = 0.24556, e2 = 7.31034e+40 (6.1952e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556, e2 = 1.59706e+40 (1.35344e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 24.556, e2 = 1.33882e+40 (1.13459e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 245.56, e2 = 1.31518e+40 (1.11456e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2455.6, e2 = 1.31283e+40 (1.11257e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 24556, e2 = 1.3126e+40 (1.11237e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 245560, e2 = 1.31257e+40 (1.11235e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+06, e2 = 1.31257e+40 (1.11235e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+07, e2 = 1.31257e+40 (1.11235e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+08, e2 = 1.31257e+40 (1.11235e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+09, e2 = 1.31257e+40 (1.11235e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+10, e2 = 1.3125e+40 (1.11229e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+11, e2 = 1.31102e+40 (1.11103e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+12, e2 = 1.3103e+40 (1.11042e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+13, e2 = 1.31471e+40 (1.11416e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+14, e2 = 1.29156e+40 (1.09454e+38) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+15, e2 = 1.15709e+40 (9.80585e+37) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+16, e2 = 3.81423e+39 (3.2324e+37) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+17, e2 = 6.59182e+36 (5.58629e+34) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+18, e2 = 8.07694e+34 (6.84487e+32) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+19, e2 = 7.73149e+52 (6.55211e+50) > 8.00302e+25 (6.78222e+23)
move failed: lambda = 2.4556e+20, e2 = 2.061e+40 (1.74661e+38) > 8.00302e+25 (6.78222e+23)
decreasing lambda to 2.4556e+19 
```

如果我手动重新投影我对关键点的第一次猜测，我会得到每个关键点之间的总（总和）欧几里德距离（以像素（误差）为单位）169.541 和它的三角点的重投影。调用 LevMarqSparse::bundleAdjust 后的相同错误检查给出了 5.50025e+12 的错误。

有人可以指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T21:10:37.760

通常，当捆绑调整发生类似情况时，至少很可能出现以下错误之一：

1.  2D投影对3D点来说不是正确的，因此一个3D点被重投影到错误的2D投影上，因此重投影误差会很大。2D 投影和 3D 点之间的索引可能发生了一些问题。
2.  您使用的相机与 OpenCV 要求的坐标系不同。想象一下大约 180° 的旋转或反向运动，3D 点将被投影到某个地方，但肯定不会在正确的 2D 位置上。因此，也许尝试采用逆相机矩阵。如果 P 是您的 4x4 齐次投影矩阵之一，则采用 P.inv() 而不是 P。

这将有助于获得平均重投影误差。总和不是很有意义，因为我们不知道重建中有多少 3D 点和 2D 投影。

# javascript - 用一个变量检查 多个输入字段

> ID：14349587
> 
> 赞同：2
> 
> 时间：2013-01-16T00:38:33.377
> 
> 标签：javascript, html

我有很多输入框，我需要创建一个条件来检查它们是否都是空的，如何在 javascript 中使用单个变量执行此操作。这就是我所拥有的，但它只检查 1 个框

```
function boxes() {

    var box_a = document.getElementById('box_a');

         if(box_a==="")   {
            alert("box not filled")
               return false;
          } 

 <input type="text" id="box_a"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:43:12.057

试试这样：

```
var textinputs = document.querySelectorAll('input[type=text]');

var empty = [].filter.call( textinputs, function( el ) {
   return !el.value
});

if ( textinputs.length == empty.length ) {
  // all text inputs are empty
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T00:47:01.787

如果您真的指的是页面上的所有输入，您可以使用`getElementsByTagName`：

```
function boxes() {
    var anyFilled = false;

    var boxes = document.getElementsByTagName('input');

    for(var i = 0; i < boxes.length; i++) {
        if(boxes[i].value !== "") {
            anyFilled = true;
            break;
        }
    }

    if(anyFilled)
        alert('An input has a value');
} 
```

# tdd - 正确测试附加到 $scope 的 Promise

> ID：14349590
> 
> 赞同：4
> 
> 时间：2013-01-16T00:38:42.233
> 
> 标签：tdd, angularjs, jasmine

根据 angular.js 来源：

> $q promises 被模板引擎以角度识别，这意味着在模板中，您可以将附加到范围的 promises 视为结果值。

所以，我有一个从后端获取类别列表的控制器，

```
function myController($scope, $categoryService) {
...
  $scope.categoriesList = categoryService.search().then(function(response) {
    return response;
  }
...
} 
```

在我的模板中，我有一个选择：

```
<select multiple ng-model="categories" ng-options="category.name for category in categoriesList"></select> 
```

在浏览器中“工作”（选择显示填充列表）

*但是*你如何测试这个？

我有以下规格：

```
it('populates the categoriesList from the categoryService', inject(function(categoryService, $q, $controller, $rootScope) {
  var $scope = $rootScope.$new();
  var catList = [{id:1, name:"Animal"},{id:2, name:"Vegetable"}];
  var deferred = $q.defer()
  spyOn(categoryService, 'search').andReturn(deferred.promise);

  $controller(myController, {'$scope': $scope});
  expect(categoryService.search).toHaveBeenCalled(); // PASSES

  deferred.resolve(catList);
  $scope.$digest();

  expect($scope.categoriesList).toEqual(catList); // FAILS, returns the promise instead
})); 
```

如果我像这样重写我的初始化程序

```
...then(function(response) {
  $scope.categoriesList = response;
} 
```

我的测试会通过，但是我没有将承诺分配给范围，模板引擎也没有为我解决承诺。在我看来，第一个实现是框架的意图，但它是不可测试的。第二种实现是可测试的，但不是将数据附加到范围的预期方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:58:04.973

当你说

```
$scope.categoriesList = categoryService.search().then(function(response) {
  return response;
} 
```

`$scope.categoriesList`未分配`response`；相反，它被分配了一个*新*的承诺，它*解析*为`response`（如您的测试所示）。由于最初的承诺已经解决为`response`，你可以有：

```
$scope.categoriesList = categoryService.search() 
```

文档的意思是，您可以`$scope.categoriesList`像这样分配给一个承诺，并且视图会将*表达式*视为`categoriesList`它解析为的值（在这种情况下，`response`） - 它实际上并不采用该值并将其分配给范围.

[更新]

如果您正在测试控制器，而不是 categoryService 本身，我会完全放弃承诺——可能是这样的：

```
it('populates the categoriesList from the categoryService', inject(function(categoryService, $controller, $rootScope) {
  var $scope = $rootScope.$new();
  var catList = [{id:1, name:"Animal"},{id:2, name:"Vegetable"}];
  spyOn(categoryService, 'search').andReturn(catList);

  $controller(myController, {'$scope': $scope});
  expect(categoryService.search).toHaveBeenCalled();

  $scope.$digest();

  expect($scope.categoriesList).toEqual(catList);
})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T19:00:48.213

我遇到了同样的问题，最终在我的测试中这样做：

```
it("leaves a 'countries' promise that resolves to countries in the scope", function() {
  var value = null;
  scope.countries.then(function(v) {
    value = v;
  });
  scope.$apply();
  expect(value).toEqual([{ Code: "SE", Name: "Sweden" }]);
}); 
```

国家而不是类别，但相同的技术应该适用于您的情况。

（我省略了创建范围变量并使用 $httpBackend 设置 GET 期望的 beforeEach，但它们当然是必需的。）

# java - 扩展注解的接口

> ID：14349591
> 
> 赞同：0
> 
> 时间：2013-01-16T00:38:47.957
> 
> 标签：java

我看到了一些代码，我试图理解它。在下面的代码中，一个接口扩展了一个注解。我不明白为什么这是可能的。让接口扩展注释有什么意义？如何使用扩展注解的接口？谢谢！

```
public interface TheScope extends javax.inject.Scope {
    ...
}

public ScopeClazz implements TheScope {
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:54:05.350

根据 Java[注释类型规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6)：

> 除非在此明确修改，否则适用于普通接口声明的所有规则都适用于注释类型声明。
> 
> 例如，注解类型与普通类和接口类型共享相同的命名空间；和注解类型声明在接口声明合法的地方都是合法的，并且具有相同的范围和可访问性。

因此，您可以像实现接口一样实现注释类型。唯一的区别是你不能用另一个注解来扩展一个注解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:47:33.283

javax.inject.Scope 也是一个接口（还有什么？！）见[http://docs.oracle.com/javaee/6/api/javax/inject/Scope.html](http://docs.oracle.com/javaee/6/api/javax/inject/Scope.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:21:19.673

除了可用作注解之外，[注解类型也是普通接口](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6)。这在运行时读取注解时很有用，因为注解可以表示为注解类型的实例。

作为这种实现选择的副作用，您可以像任何其他接口一样扩展或实现它们。这完全独立于使用这种类型作为注解。由于这意味着同一类型将用于两种不同的事物（作为注释类型和普通接口），因此这种用法可能会违反关注点分离，并且不常见。但是，从语言的角度来看，语义清晰且不危险，因此几乎没有理由要求编译器防止这种极端情况的发生。

# php - Javascript不适用于复选框

> ID：14349599
> 
> 赞同：0
> 
> 时间：2013-01-16T00:39:29.330
> 
> 标签：php, javascript, jquery, checkbox, console

我的网站中有一组复选框，它们运行下面发布的 javascript。问题是，当我从复选框中选择一种颜色时，它不会执行任何操作，并且我在 Chrome 控制台中看到以下错误：

```
GET ../store/indexMain.php?color=Khaki 500 (Internal Server Error) jquery-1.7.2.min.js:4
send jquery-1.7.2.min.js:4
f.extend.ajax jquery-1.7.2.min.js:4
f.fn.extend.load jquery-1.7.2.min.js:4
(anonymous function) www.tahara.es:68
f.event.dispatch jquery-1.7.2.min.js:3
h.handle.i 
```

这是js：

```
<script type="text/javascript">
    //http://jsbin.com/ujuse/1/edit
$(function() {
    $("input[type='checkbox']").on('change', function() {
        var boxes = [];
        // You could save a little time and space by doing this:
        var name = this.name;
        // critical change on next line
        $("input[type='checkbox'][name='"+this.name+"']:checked").each(function() {
            boxes.push(this.value);
        });
        if (boxes.length) {
            $(".loadingItems").fadeIn(300);
            // Change the name here as well
            $(".indexMain").load('indexMain.php?'+this.name+'=' + boxes.join("+"),
            function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });

        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php', function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });
        }
    });
}); 
```

从 indexMain.php 添加 PHP

```
<?php
$colors = $_GET['color'];
if ($colors != '')
 {
            $colors = explode(' ', $colors);
            $parameters = join(', ', array_fill(0, count($colors), '?'));
            $items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 IN ({$parameters})");
            $items ->execute($colors);
            $count = $items -> rowCount();

}
else 
{

        $items = $con -> prepare("SELECT * FROM item_descr ORDER BY date DESC");
        $items -> execute();
        $count = $items -> rowCount();

}

$row_count = 0;
echo "<div>Showing ".$count."items</div>";
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{

?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:45:20.233

问题不在于javascript，而在于您的服务器端。

```
$(".indexMain").load('indexMain.php?'+this.name+'=' + boxes.join("+"), function() {
    $(".indexMain").fadeIn('slow');
    $(".loadingItems").fadeOut(300);
}); 
```

您尝试从服务器加载某些内容，服务器以 500 响应。检查您的服务器日志，看看有什么问题

# android - Android 4.2 如何让手机和平板更新分开？

> ID：14349601
> 
> 赞同：0
> 
> 时间：2013-01-16T00:39:47.993
> 
> 标签：android, android-layout

高密度电话设备现在支持平板电脑尺寸和电话。我在市场上有一个应用程序，我需要更新手机项目以支持 4.2，但它覆盖了平板电脑版本 4.2 它们都具有相同的包名称。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:42:51.920

如果它们具有相同的包名称，则必须[按照为不同屏幕尺寸创建多个 APK 的步骤来覆盖它们](http://developer.android.com/training/multiple-apks/screensize.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:44:30.287

在您的清单中，您可以添加一个您不想支持更大屏幕尺寸的声明。

```
 <supports-screens
                android:smallScreens="true"
                android:normalScreens="true"
                android:largeScreens="true"
                android:xlargeScreens="false"
                android:anyDensity="true"
              /> 
```

# scala - 无法用于理解来映射未来内的列表

> ID：14349603
> 
> 赞同：42
> 
> 时间：2013-01-16T00:39:49.303
> 
> 标签：scala, future

我有这个问题，我每次都必须解决。我无法使用 for 理解来映射 Future 中包含的内容。

例子：

```
import scala.concurrent.ExecutionContext.Implicits.global
import scala.concurrent.Future

val f = Future( List("A", "B", "C") )
for {
  list <- f
  e <- list
} yield (e -> 1) 
```

这给了我错误：

```
 error: type mismatch;
 found   : List[(String, Int)]
 required: scala.concurrent.Future[?]
              e <- list
                ^ 
```

但如果我这样做，它工作正常：

```
f.map( _.map( (_ -> 1) ) ) 
```

我是否应该无法通过使用 for 理解来做到这一点，它在我的另一个示例中起作用的原因是我不使用平面地图吗？我正在使用 Scala 2.10.0。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-16T02:18:09.033

好吧，当您在一个单一的理解中拥有多个生成器时，您正在*扁平化*生成的类型。也就是说`List[List[T]]`，你得到的不是 a ，而是 a `List[T]`：

```
scala> val list = List(1, 2, 3)
list: List[Int] = List(1, 2, 3)

scala> for (a <- list) yield for (b <- list) yield (a, b)
res0: List[List[(Int, Int)]] = List(List((1,1), (1,2), (1,3)), List((2,1
), (2,2), (2,3)), List((3,1), (3,2), (3,3)))

scala> for (a <- list; b <- list) yield (a, b)
res1: List[(Int, Int)] = List((1,1), (1,2), (1,3), (2,1), (2,2), (2,3),
(3,1), (3,2), (3,3)) 
```

现在，您将如何展平 a `Future[List[T]]`？它不能是 a `Future[T]`，因为您将获得多个`T`，并且 a `Future`（与 a 相对`List`）只能存储其中一个。顺便说一句，同样的问题发生`Option`在：

```
scala> for (a <- Some(3); b <- list) yield (a, b)
<console>:9: error: type mismatch;
 found   : List[(Int, Int)]
 required: Option[?]
              for (a <- Some(3); b <- list) yield (a, b)
                                   ^ 
```

最简单的方法是简单地嵌套多个 for 理解：

```
scala> for {
     |   list <- f
     | } yield for {
     |   e <- list
     | } yield (e -> 1)
res3: scala.concurrent.Future[List[(String, Int)]] = scala.concurrent.im
pl.Promise$DefaultPromise@4f498585 
```

回想起来，这个限制应该是非常明显的。问题是几乎所有的例子都使用了集合，而所有的集合都是 just `GenTraversableOnce`，所以它们可以自由混合。除此之外，Scala 备受批评的`CanBuildFrom`机制使得可以混合任意集合并获取特定类型，而不是`GenTraversableOnce`.

而且，为了使事情更加模糊，`Option`可以将其转换为`Iterable`，这使得可以将选项与集合结合起来，只要选项不是最先出现的。

但在我看来，混淆的主要来源是在教授理解力时没有人提到过这个限制。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T00:44:03.650

嗯，我想我明白了。我需要在未来包装，因为 for 理解添加了一个平面图。

这有效：

```
for {
  list <- f
  e <- Future( list )
} yield (e -> 1) 
```

* * *

当我在上面添加时，我还没有看到任何答案。但是，要对此进行扩展，可以在一个理解范围内进行工作。不确定是否值得未来的开销（编辑：通过使用成功应该没有开销）。

```
for {
  list1 <- f
  list2 <- Future.successful( list1.map( _ -> 1) )
  list3 <- Future.successful( list2.filter( _._2 == 1 ) )
} yield list3 
```

* * *

**半年后的补充。**

解决此问题的另一种方法是简单地使用赋值`=`，而不是`<-`当您有其他类型而不是初始映射返回类型时。

使用分配时，该行不会得到平面映射。您现在可以自由地执行返回不同类型的显式映射（或其他转换）。

如果您有多个转换，其中一个步骤的返回类型与其他步骤不同，但您仍希望使用 for-comprehension 语法，这将很有用，因为它使您的代码更具可读性。

```
import scala.concurrent.ExecutionContext.Implicits.global
import scala.concurrent.Future

val f = Future( List("A", "B", "C") )
def longRunning( l:List[(String, Int)] ) = Future.successful( l.map(_._2) )

for {
  list <- f
  e = list.map( _ -> 1 )
  s <- longRunning( e )
} yield s 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-16T01:26:45.040

您的原始版本无法编译，因为`List`它们`Future`是不同的单子。要了解为什么这是一个问题，请考虑它对以下内容的影响：

```
f.flatMap(list => list.map(e => e -> 1)) 
```

显然`list.map(_ -> 1)`是一个`(String, Int)`对列表，所以我们的参数`flatMap`是一个将字符串列表映射到这些对列表的函数。但是我们需要一些将字符串列表映射到`Future`某种类型的东西。所以这不会编译。

您的答案中的版本确实可以编译，但它不能满足您的要求。它对此进行了反糖：

```
f.flatMap(list => Future(list).map(e => e -> 1)) 
```

这次类型排成一行，但我们没有做任何有趣的事情——我们只是将值从 中取出`Future`，将其放回 a`Future`中，然后映射结果。所以`Future[(List[String], Int)]`当我们想要一个`Future[List[(String, Int)]]`.

您正在做的是一种具有两个（不同）嵌套 monad 的双重映射操作，这不是`for`-comprehension 可以帮助您解决的问题。幸运的是`f.map(_.map(_ -> 1))`，它完全符合您的要求，并且简洁明了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T07:56:51.057

我发现这种形式比串行映射或串行产量更具可读性：

```
for (vs <- future(data);
     xs = for (x <- vs) yield g(x)
) yield xs 
```

以元组映射为代价：

```
f.map((_, xs)).map(_._2) 
```

或更准确地说：

```
f.map((vs: List[Int]) => (vs, for (x <- vs) yield g(x))).map(_._2) 
```

# ruby-on-rails-3 - 获取has_many中所有孩子的名字，：通过

> ID：14349608
> 
> 赞同：0
> 
> 时间：2013-01-16T00:40:22.957
> 
> 标签：ruby-on-rails-3, has-many-through

我有这段代码返回一个 ID 数组，例如`[1, 2, 3]`：

```
<% @articles.each do |a| %>
  <%= a.brand_ids %>
<% end %> 
```

`Article`并且`Brand`有`has_many, :through`关系。我将如何返回每个品牌的名称列表而不是 ID？`a.brands.name`返回`Brand`。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:50:20.837

使用`pluck`：

```
article = Article.find(17)
article.brands.pluck(:name) 
```

# php - 使用 .htaccess，如何在不与其他 RewriteRules 冲突的情况下强制使用 HTTPS？

> ID：14349611
> 
> 赞同：0
> 
> 时间：2013-01-16T00:40:28.717
> 
> 标签：php, .htaccess

我的 .htaccess 文件中有几个重定向指令，我将对根文件夹的所有调用重定向到 /Site 文件夹，它工作正常。

```
Options +FollowSymLinks
RewriteEngine On

# Redirect index in root to index in Site folder
RewriteRule ^index\.php$  /Site/index.php [PT]
RewriteCond %{REQUEST_URI} !^/Site
RewriteRule ^(/?)(.*) /Site/$2 
```

我现在需要的是在所有页面上强制 https，当我添加以下指令时，它不起作用，我相信它进入了无限循环：

```
#RewriteCond %{HTTPS} off
#RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

什么是使这项工作的正确指令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:35:41.580

我通过在 RewriteEngine On 之后添加以下内容解决了这个问题

```
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

由于某些原因

```
#RewriteCond %{HTTPS} off 
```

不工作

# powershell - Powershell - 自定义模块的输出不可用

> ID：14349612
> 
> 赞同：2
> 
> 时间：2013-01-16T00:40:30.677
> 
> 标签：powershell, pipeline, output, cmdlets

我如何使用自定义模块的输出来放入变量，最好是对象。

这是问题所在。导入自定义模块并运行 cmdlet 后，它始终输出相同的信息，并拒绝存储在变量中或放入管道中。尝试放入管道或变量只会重现原始输出并忽略变量或管道符号。

例子：

```
PS C:\> Get-FCoEPorts -HbaIndex 0
Port List

Index   NodeWWN                         PortWWN                         FCID

-----   -------                         -------                         ----

 0      10:00:A0:36:9F:0B:3E:E9         20:00:A0:36:9F:0B:3E:E9                     0x4A0680

 1      20:A8:00:0D:EC:96:EA:01         00:FC:0E:00:A8:00:80:00                 0x36A00120

 ...

 93*    10:00:A0:36:9F:0B:3E:E9         20:3E:A0:36:9F:0B:3E:E9                 0x4A0764

 94     20:A8:00:0D:EC:96:EA:01         00:FC:0E:00:A8:00:80:00                 0x36A03F20

* - Virtual Ports. 
```

所以这是预期的输出，但尝试这个：

```
$a = Get-FCoEPorts -HbaIndex 0 
```

或这个：

```
(Get-FCoEPorts -HbaIndex 0).PortWWN 
```

或这个：

```
$getports = Get-FCoEPorts -HbaIndex 0 | select -expand PortWWN 
```

每个命令给出的结果与顶部显示的相同，并且尝试使用引用的变量会导致没有输出......就像 PowerShell 忽略除`Get-IntelFCoEPorts`. 这是我正在使用的代码的问题，还是模块背后的代码有问题？

我使用此模块的目标是将 PortWWN 编号放入一个数组或对象中，当我需要删除它们时，我可以引用并使用它来循环遍历它们。

我向开发人员询问了他模块的更新版本，但新版本产生了相同的结果。我想在我再纠缠他之前确保我的代码是正确的。

更新：我尝试输出到一个没有运气的文件。该文件为空。我还尝试像这样开始和停止成绩单：

```
C:\> $ErrorActionPreference="SilentlyContinue"
PS C:\> Stop-Transcript | out-null
PS C:\> $ErrorActionPreference = "Continue"
PS C:\> Start-Transcript -path C:\Users\Administrator\Desktop\output.txt -append
Transcript started, output file is C:\Users\Administrator\Desktop\output.txt
PS C:\> Get-IntelFCoEPorts -HbaIndex 0
    Index   NodeWWN                         PortWWN                         FCID

-----   -------                         -------                         ----

 0      10:00:A0:36:9F:0B:3E:E9         20:00:A0:36:9F:0B:3E:E9                     0x4A0680

 1      20:A8:00:0D:EC:96:EA:01         00:FC:0E:00:A8:00:80:00                 0x36A00120

 ...

 93*    10:00:A0:36:9F:0B:3E:E9         20:3E:A0:36:9F:0B:3E:E9                 0x4A0764

 94     20:A8:00:0D:EC:96:EA:01         00:FC:0E:00:A8:00:80:00                 0x36A03F20

* - Virtual Ports.
PS C:\> Stop-Transcript
Transcript stopped, output file is C:\Users\Administrator\Desktop\output.txt 
```

输出是这样的：

```
PS C:\> Stop-Transcript
Transcript started, output file is C:\Users\Administrator\Desktop\output.txt
PS C:\> Get-IntelFCoEPorts -HbaIndex 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:19:28.233

看起来开发人员可能正在格式化他们自己的输出。要么，要么他们正在使用 Write-Host。我怀疑前者，但在任何一种情况下，执行他们想要的操作的规定方法是输出对象而不通过 Format-* 或 Write-Host 运行它们。如果他们想要一个漂亮的默认格式化显示，那么他们需要创建一个格式文件`.ps1xml`并使用`Update-FormatData`或使用文件`FormatsToProcess`中的模块字段`.psd1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:34:44.977

由于 cmdlet 没有返回任何值，正如您使用“$a is null”注释所证明的那样，我相信他们正在使用 Write-Host 来输出结果。如果他们在输出结果之前使用 Format-Table，您将收到一个包含 a`FormatStartData`和其他 formatdata 对象的数组。

为了让您能够保存和管道结果，如果脚本 cmdlet 或 WriteObject（我认为是），如果他们使用二进制 cmdlet（.dll 模块），他们需要使用 Write-Output。总结一下：他们应该更新他们的模块。

# ios - 核心图 Y 轴标签最初不显示，但随后显示

> ID：14349614
> 
> 赞同：1
> 
> 时间：2013-01-16T00:40:40.420
> 
> 标签：ios, objective-c, core-plot

注意：这与另一个类似名称的问题不同。

尽管设置了所有值，但我的 Y 轴标签及其水平次要网格线未显示在初始显示上。如果我点击一些数据点（这会触发显示新数据），那么标签会突然出现，并且还会出现旧数据集（初始）。

我无法弄清楚我已经尝试过：

```
[graph display];
[y display]; 
```

我已经抓住了 y 轴的位置，它始终在屏幕上，并且对于后续模式（显示时）是相同的

这似乎是一个渲染错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:59:06.490

自 1.1 版本以来，这可能已得到修复。使用 Mercurial 提取最新代码并尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:59:56.977

好的，我修复了它，这不是 Core plot 版本的问题，这是因为图表的第一次绘制是在 viewDidLoad 中完成的，它需要在 viewDidAppear 中

# html - InputText PrimeFaces 未应用 maxlength

> ID：14349620
> 
> 赞同：7
> 
> 时间：2013-01-16T00:41:31.730
> 
> 标签：html, jsf-2, primefaces, primefaces-mobile

我正在使用 PrimeFaces 3.4 和 PrimeFaces Mobile 0.9.3。我在 inputText 属性中指定了 maxlength，但它没有在 HTML 中呈现。我的代码：

```
<p:inputText id="price" value="#{bean.price}" styleClass="r-align" 
type="number" maxlength="9" validator="priceValidator"/> 
```

后来我发现当我从标签中删除“类型”属性时，最大长度有效。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T02:51:25.327

这仅仅是因为[HTML5](http://www.w3.org/TR/html-markup/input.number.html)[元素](http://www.w3.org/TR/html-markup/input.number.html)`maxlength`不支持属性，因此可以合理地假设 PrimeFaces 渲染器不会发出它。[`<input type="number">`](http://www.w3.org/TR/html-markup/input.number.html)

相反，您应该使用`min`和`max`属性。从理论上讲，您应该设置为

```
<p:inputText type="number" max="999999999" /> 
```

但是，这对我不起作用。它没有完全呈现`max`（也没有`min`）属性。这又可能是 PrimeFaces 组件中的疏忽。您最好的办法是将[其作为问题报告给 PrimeFaces 人员](http://code.google.com/p/primefaces/issues/list)。

同时，您可以通过提供这样的自定义渲染器来解决此问题，该渲染器基本上将`min`and`max`属性添加到 pass thru 属性列表中：

```
package com.example;

import java.io.IOException;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;

import org.primefaces.component.inputtext.InputTextRenderer;

public class MyInputTextRenderer extends InputTextRenderer {

    @Override
    protected void renderPassThruAttributes(FacesContext facesContext, UIComponent component, String[] attrs) throws IOException {
        String[] newAttrs = new String[attrs.length + 2];
        System.arraycopy(attrs, 0, newAttrs, 0, attrs.length);
        newAttrs[newAttrs.length - 2] = "min";
        newAttrs[newAttrs.length - 1] = "max";
        super.renderPassThruAttributes(facesContext, component, newAttrs);
    }

} 
```

您可以通过如下注册来运行它：

```
<render-kit>
    <renderer>
        <component-family>org.primefaces.component</component-family>
        <renderer-type>org.primefaces.component.InputTextRenderer</renderer-type>
        <renderer-class>com.example.MyInputTextRenderer</renderer-class>
    </renderer>
</render-kit> 
```

请注意，在即将到来的 JSF 2.2 中将原生支持通过自定义 JSF 组件属性，其中允许 HTML5`data-*`属性自由。

### 也可以看看：

*   [如何让JSF通过HTML属性](https://stackoverflow.com/questions/10484337/how-to-let-jsf-pass-through-html-attributes/10498902#10498902)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-26T16:09:25.270

您必须使用“maxValue”解决方法：

例如，如果您的最大长度是：8，那么您应该将最大值设置为：99999999，这是一个 8 位数字。

```
<p:inputNumber value="#{configBean.dependenciaUtils.selected.numTelefonoDependencia}"
                                       required="true"
                                       requiredMessage="Must put a value"
                                       maxlength="8"    
                                       maxValue="99999999"
                                       thousandSeparator=""
                                       decimalPlaces="0"
                                       /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-18T05:52:21.383

```
<p:inputNumber maxlength="6" 
               maxValue="999999" 
               padControl="false" 
               thousandSeparator=""></p:inputNumber> 
```

设置`maxlength`和`MaxValue`设置 Primefaces inputnumber 的最大长度

# mysql - 如何使用 MySQL 插入多个值

> ID：14349621
> 
> 赞同：1
> 
> 时间：2013-01-16T00:41:34.110
> 
> 标签：mysql

可能没有办法做到这一点，但我想我会问并让它休息。

我正在使用存储过程将数据插入表中。然后，我需要使用第二个过程将多个值插入到第二个关联表中。第二个表可以有零个或多个值，并将使用第一个插入的 last_insert_id。我想从过程一中调用过程二，这不是问题，但是，当我不知道会有多少值时，如何将我的值插入到第二个表中？

我可以使用应用程序代码轻松地做到这一点，但要求是使用程序。有没有办法将一组值（可以这么说）传递到过程一中，以便在第二个过程插入中使用？

从我的应用程序代码返回的数组看起来像这样（甚至可能是空的）：

```
Array(
  [0] => 4
  [1] => 10
  [2] => 3
) 
```

如果我知道**总是**有 x 个值，我可以简单地这样做：

```
INSERT INTO table2(col1,col2)
VALUES(v1,v2), (v3,v4), (v5,v6) 
```

如果我正在使用一个过程并且不知道要插入多少个值，我如何将这些值*打包*到 table2 中？他们必须通过程序 1 并传递给程序 2。我只是不确定如何执行此操作，或者即使可以完成。

# c# - 在 C# Winforms 中的 DataGridViewCell 内绘制一个实心圆或矩形

> ID：14349624
> 
> 赞同：9
> 
> 时间：2013-01-16T00:41:40.310
> 
> 标签：c#, winforms, datagridview, draw, geometry

我想在 a 的中心画一个实心小圆圈`DataGridViewCell`。矩形也可以解决问题。我想我必须在 CellPainting 事件中这样做。

我试过这个：

```
if (e.RowIndex >= 0 && e.ColumnIndex >= 0)
        {                
            if (dgv_Cuotas.Columns[e.ColumnIndex].Name == "Seleccionar" && Convert.ToBoolean(dgv_Cuotas.Rows[e.RowIndex].Cells["pagada"].Value) == true)
            {
                e.CellStyle.BackColor = Color.LightGray; ;
                e.PaintBackground(e.ClipBounds, true);
                e.Handled = true;
            }
        } 
```

![在此处输入图像描述](../Images/6ccda25c9d2768cb3916c6265625b11d.png)

它绘制了整个单元格，我只想要一个小圆圈或矩形，如下图所示：

![在此处输入图像描述](../Images/3994b8e6fa26c0c48cb92ebc2f8d07ea.png)

我怎样才能做到这一点？~~使用 DataGridViewImageCell 不是一个选项，因为我遇到了格式错误。我只是可以将 DataGridViewCheckBoxCell 更改为 DataGridViewTextboxCell。~~

**编辑：** 我可以将其更改为 DataGridViewImageCell！不知道之前发生了什么，但我仍然无法在那里加载图像。我只是得到一个带有红十字的白色方块（没有图像图标）。这是我的代码：

```
dgv_Cuotas.Rows[row.Index].Cells["Seleccionar"] = new DataGridViewImageCell();
dgv_Cuotas.Rows[row.Index].Cells["Seleccionar"].Value = Properties.Resources.punto_verde;
dgv_Cuotas.Rows[row.Index].Cells["Seleccionar"].Style.ForeColor = Color.White;
dgv_Cuotas.Rows[row.Index].Cells["Seleccionar"].Style.SelectionForeColor = Color.White; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-30T06:42:27.520

感谢您的提问和回答@Andres。

请查看我的回复：（例如）我有一个包含 2 列的数据网格视图。在第一列中，我想在第 2 列中显示一个颜色圈，它的颜色是写（颜色名称）。为此，我的代码是：

```
for (int i = 1; i <= 5; i++)
    Dgv.Rows.Add();
Dgv[1, 0].Value = "Red";
Dgv[1, 1].Value = "Blue";
Dgv[1, 2].Value = "Yellow";
Dgv[1, 3].Value = "Green";
Dgv[1, 4].Value = "Black"; 
```

为了创建一个圆圈，我编写了这个类代码：

```
public static class GraphicsExtensions
{
    public static void FillCircle(this Graphics g, Brush brush, float centerX, float centerY, float radius)
    {
        g.FillEllipse(brush, centerX - radius, centerY - radius, radius + radius, radius + radius);
    }
} 
```

在我的 datagridview 的 CellPainting 事件中，编写以下代码：

```
private void Dgv_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
{
    if (e.ColumnIndex == 0 && e.RowIndex > -1)
    {
        Brush Brs= new SolidBrush(Color.FromName(Dgv[1, e.RowIndex].Value.ToString()));
        GraphicsExtensions.FillCircle(e.Graphics, Brs, e.CellBounds.Location.X + 5, e.CellBounds.Location.Y + 10, 5);
        e.Handled = true;                
    }
} 
```

结果是具有 2 列的 datagridview：

第 1 列：6 个圆圈，6 种特定颜色

第 2 列：6 个颜色名称

谢谢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T15:51:02.830

我终于解决了。我在相同的位置绘制了一个与复选框大小相同的填充矩形。

我做了以下事情：

首先，我将 DataGridViewCheckBoxCell 更改为 DataGridViewTextBoxCell 以隐藏复选框。

```
DataGridViewTextBoxCell blank_cell = new DataGridViewTextBoxCell();
dgv_Cuotas.Rows[row.Index].Cells["Seleccionar"] = blank_cell;
dgv_Cuotas.Rows[row.Index].Cells["Seleccionar"].Style.ForeColor = Color.Transparent;
dgv_Cuotas.Rows[row.Index].Cells["Seleccionar"].Style.SelectionForeColor = Color.Transparent; 
```

一定要选择透明的前景色，以免在单元格中看到“假”。

之后，我只是使用 cellpainting 事件在单元格中绘制矩形：

```
if (dgv_Cuotas.Columns[e.ColumnIndex].Name == "Seleccionar" && Convert.ToDecimal(dgv_Cuotas.Rows[e.RowIndex].Cells["Restante"].Value) == 0)
            {
                Color c1 = Color.FromArgb(255, 113, 255, 0);
                Color c2 = Color.FromArgb(255, 2, 143, 17);

                LinearGradientBrush br = new LinearGradientBrush(e.CellBounds, c1, c2, 90, true);
                ColorBlend cb = new ColorBlend();
                cb.Positions = new[] { 0, (float)1 };
                cb.Colors = new[] { c1, c2 };
                br.InterpolationColors = cb;

                Rectangle rect = new Rectangle(e.CellBounds.Location.X + 4, e.CellBounds.Location.Y + 4, 13, 13);

                e.Graphics.FillRectangle(br, rect);
                e.PaintContent(rect);
                e.Handled = true;
            } 
```

您可以像我一样通过更改 Location.X 和 Location.Y 值来获得所需的位置。

![在此处输入图像描述](../Images/7df1841a682c195e0eff43b39256dd85.png) 希望对某人有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T01:26:06.990

查看 DataGridView 模板以便以这种方式自定义列。这会给你更大的控制权。

这可能会有所帮助： [http ://csharp.net-informations.com/datagridview/csharp-datagridview-template.htm](http://csharp.net-informations.com/datagridview/csharp-datagridview-template.htm)

# php - php cookie和浏览器不向服务器发送cookie

> ID：14349631
> 
> 赞同：0
> 
> 时间：2013-01-16T00:43:08.297
> 
> 标签：php, cookies

所以我有一个问题，这不起作用..名为“Main”的cookie文件存在于浏览器缓存中，但是当我尝试下面的代码时，什么都没有收集到。

```
 if (isset($_COOKIE["Main"])){
 $user_cookie = $_COOKIE["Main"];
 } 
```

进一步挖掘显示我有另一个 cookie 用于同一个域名，它是 wikibridge 的一部分......

两个 cookie 具有相同的内容.. 用户名“John”完全一致。

当我尝试

```
var_dump($_COOKIE); exit; 
```

我得到了一堆数组数据，这些数据是从我的浏览器发回的 cookie 中收集的，但似乎我的浏览器 firefox 没有发送“主要”cookie backm，它只发送了一堆其他 cookie，它们都是同一个域名的一部分。

因此，尽管 $_COOKIE["Main"] 存在，但它永远不会被发送回服务器以供 php 获取它的内容。

帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:51:03.637

没有发送相同域的 cookie 有几个可能的原因。

首先，我会检查 cookie 是否设置为仅针对 https 请求发送的安全 cookie。

其次，我会检查 cookie 是否具有设置为活动的特定路径，并且您的请求不是该路径的一部分。

# c# - 查找 3D 列表中的所有相邻项目

> ID：14349633
> 
> 赞同：0
> 
> 时间：2013-01-16T00:43:15.717
> 
> 标签：c#

我有一个 3D 列表（3 个嵌套列表），对于列表中的每个项目，我需要找到相邻的项目。目前，我正在为每个相邻项目创建一个数组，并将其存储在每个项目中。这是相当资源密集型的，所以我希望稍微简化一下。

我正在考虑使用这种方法：

```
for (int i = 0; i < 8; i++)
{
    switch (i)
    {
        case (0):
            mapCell neighbor = myMap.Depth[z].Rows[x].Columns[y - 1];
        case (1):
            mapCell neighbor = myMap.Depth[z].Rows[x].Columns[y + 1];
        case (2):
            mapCell neighbor = myMap.Depth[z].Rows[x - 1].Columns[y];
        case (3):
            mapCell neighbor = myMap.Depth[z].Rows[x + 1].Columns[y];
        case (4):
            mapCell neighbor = myMap.Depth[z].Rows[x + 1].Columns[y + 1];
        case (5):
            mapCell neighbor = myMap.Depth[z].Rows[x + 1].Columns[y - 1];
        case (6):
            mapCell neighbor = myMap.Depth[z].Rows[x - 1].Columns[y + 1];
        case (7):
            mapCell neighbor = myMap.Depth[z].Rows[x - 1].Columns[y - 1];
    }

    // do some stuff with the neighbor here
} 
```

就性能而言，这比我现在拥有的要好得多，但我想知道是否有更简单的方法来实现这一点？看起来有点乱，我真的觉得有一种方法可以在 1 行中做到这一点，但我就是无法弄清楚数学。

**编辑**：对不起，我可能遗漏了一些重要的细节。与“邻居”变量一起使用的代码已被忽略，因为它很长并且对解决方案没有帮助。我不需要维护“邻居”变量的列表（这就是我目前正在做的事情，它使用了太多的内存（大约 400 兆）。我只需要一种快速的方法来查看每个项目，找到每个相邻的 8 个项目，一次对它们做一些事情，然后移动到下一个节点。上面的代码可以通过它们，但感觉不是最优化的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:34:27.823

看起来您实际上是在 3D 数据结构中给定深度的 2D 数组中找到邻居。即，您忽略了相邻深度的邻居。

您的方法可能非常有效。您可以找到一些涉及更少打字的更奇特的方式，例如[this answer](https://stackoverflow.com/a/5640901/177018) to a similar question on SO，但我怀疑它会更快。

显然，您还需要在代码中包含一些检查，以处理不会有 8 个邻居的边缘项目。

```
private void DoSomethingWithNeighbours(int x, int y, int z)
{
    foreach (var neighbout in this.GetNeighbours(x, y, z)
    {
        // ...
    }
}

private IEnumerable<Item> GetNeighbours(int x, int y, int z)
{
    if (x > 0)
    {
        if (y > 0)
        {
            yield return myMap.Depth[z].Rows[x - 1].Columns[y - 1];
        }

        yield return myMap.Depth[z].Rows[x - 1].Columns[y];

        if (y < ColumnCount - 1)
        {
            yield return myMap.Depth[z].Rows[x - 1].Columns[y + 1];
        }
    }

    if (y > 0)
    {
        yield return myMap.Depth[z].Rows[x].Columns[y - 1];
    }

    if (y < ColumnCount - 1)
    {
        yield return myMap.Depth[z].Rows[x].Columns[y + 1];
    }

    if (x < RowCount - 1)
    {
        if (y > 0)
        {
            yield return myMap.Depth[z].Rows[x + 1].Columns[y - 1];
        }

        yield return myMap.Depth[z].Rows[x + 1].Columns[y];

        if (y < ColumnCount - 1)
        {
            yield return myMap.Depth[z].Rows[x + 1].Columns[y + 1];
        }
    }
} 
```

或者以下更简洁的替代方案，只有边际性能成本：

```
private IEnumerable<int> GetNeighbours2(int x, int y, int z)
{
    for (int i = x - 1; i <= x + 1; ++i)
    {
        for (int j = y - 1; j <= y + 1; ++j)
        {
            if (i >= 0 && i < Rows && j >= 0 && j < Cols && !(i == x && j == y))
            {
                yield return myMap.Depth[z].Rows[i].Columns[j];
            }
        }
    }
} 
```

# python - 经典问题：如何向表中插入数据：books、authors、book_author？

> ID：14349635
> 
> 赞同：0
> 
> 时间：2013-01-16T00:43:27.287
> 
> 标签：python, sql, sqlalchemy

我想要3张桌子：

*   书籍（id，标题，自动增量（id））
*   作者（id，名称，自动增量（id））
*   book_author(book_id, author_id)

我想在一个事务中完成所有事情，以确保只有在所有表中一切正常时，数据才会插入到表中。

要插入任何东西，`book_author`我需要我没有的 id。

我是不是该：

1.  向表中插入数据`books`，进行选择以获取 ID，
2.  向表中插入数据`author`，进行选择以获取 ID，
3.  插入`id`两个`book_author`

?

或者也许我应该在插入时使用触发器？但它是一种使触发器依赖于两个插入的方法吗？

我会有所帮助，我可以说我正在尝试使用 python 和 sqlalchemy。

* * *

第二个问题也许这很重要....如果某些数据库不支持自动增量怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:53:10.027

SQLAlchemy 对象关系 API 为您完成所有工作：添加记录、事务支持、自动递增列值。因此，您无需为每个对象保存 id 并为每个关系创建记录。用示例展示这一点的最佳方式：

```
from sqlalchemy import *
from sqlalchemy import create_engine, orm
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relationship

__author__ = 'vvlad'

metadata = MetaData()
Base = declarative_base()
Base.metadata = metadata

"""many-to-many relationship table"""
author_book = Table(
    'author_book', Base.metadata,
    Column('author_id',String(11),ForeignKey('author.id')),
    Column('book_id',Integer,ForeignKey('book.id')),
)

class Author(Base):
    __tablename__ = 'author'
    """SQLAlchemy's Sequence(name) for Column allows to have database agnostic autoincrement"""
    id = Column(Integer, Sequence('author_seq'), primary_key=True)
    name = Column(String(length=255))
    def __repr__(self):
        return "%s(name=\"%s\",id=\"%s\")" % (self.__class__.__name__,self.name,self.id)

class Book(Base):
    __tablename__ = 'book'

    id = Column(Integer, Sequence('book_seq'),primary_key=True)
    name = Column(String(length=255))
    """Defines many-to-many relations"""
    authors = relationship(Author,secondary=author_book,backref="books",collection_class=list)

    def __repr__(self):
        return "%s(name=\"%s\",id=\"%s\")" % (self.__class__.__name__,self.name,self.id)

db = create_engine('sqlite:////temp/test_books.db',echo=True)

#making sure we are working with a fresh database
metadata.drop_all(db)
metadata.create_all(db)

sm = orm.sessionmaker(bind=db, autoflush=True, autocommit=True, expire_on_commit=True)
session = orm.scoped_session(sm)

"""associating authors with book"""
b1 = Book(name="Essential SQLAlchemy")
a1 = Author(name="Rick Copeland")
"""associating book with author"""
a1.books.append(b1)
b2 = Book(name="The Difference Engine")
gibson = Author(name="William Gibson")
b2.authors.append(gibson)
b2.authors.append(Author(name="Bruce Sterling"))

b3 = Book(name="Pattern Recognition")
b3.authors.append(gibson)
try:
    #here your transaction start
    #adding objects to session. SQLAlchemy will add all related objects into session too
    session.add(b2)
    session.add(a1)

    session.add(b3)
    #closing transaction
    session.commit()
#remember to put specific exceptions instead of broad exception clause
except:
    """if something went wrong - rolls back session (transaction)"""
    session.rollback()

print "Book info"
b3 = session.query(Book).filter(Book.name=="Essential SQLAlchemy").one()
print b3
for author in b3.authors:
    print author

aname = "William Gibson"
print "Books of author %s" % aname
for book in session.query(Book).join(author_book).join(Author).filter(Author.name==aname).all():
    print book
    for author in book.authors:
        print author 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:47:58.620

如果您有大量记录保存到表中，则在使用 SELECT 语句创建记录后查找记录的 ID 可能会出现问题。使用触发器将允许您轻松引用最后插入的记录。这是一个[教程](http://www.roseindia.net/sql/trigger/mysql-trigger-after-insert.shtml)。

触发器还将帮助您自动增加表的 ID 字段。[你可以在这里](https://stackoverflow.com/questions/2401959/use-trigger-for-auto-increment)看到一个例子。

# java - Swing对象的静态赋值可以吗？

> ID：14349637
> 
> 赞同：1
> 
> 时间：2013-01-16T00:43:28.337
> 
> 标签：java, swing, thread-safety, invokelater

例如：这可以在 MyPane 类中使用吗？

```
public class MyPane extends JRootPane{
    public static JCheckBox Debug= new JCheckBox("Debug");
....
} 
```

Swing会有问题吗？我们应该总是把这些赋值放在invokeLater 中吗？谢谢。

# c++ - 映射比稀疏向量更好？

> ID：14349640
> 
> 赞同：0
> 
> 时间：2013-01-16T00:43:48.807
> 
> 标签：c++, memory, map, vector

我有 2 个对象：

```
vector<string> v(999999);
map<int, string> m; 
```

我需要存储一些索引字符串对，尽管它非常稀疏（比如只有 20 对）。我想知道**vector是否比****map**占用更多的内存？如果是这样，向量占用了多少内存？为什么在这种情况下使用向量不好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:44:47.183

是的，向量在实践中至少会占用`999999 * (sizeof(string) + C) + sizeof(vector)`字节（`C`任何动态分配都是由 自动执行的`string`）。`map`会有开销，但绝对不会接近 999999 的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:53:32.147

如果查找时间*绝对*关键，我想你可以使用向量，因为它在向量上是常数，有效的指针算术，因为你已经知道索引，但随着地图上的大小（O（log n））增长。但是，对于这种权衡，情况确实很糟糕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T05:10:20.237

对于大约 20 个元素，创建具有 10^6 个元素的向量是没有意义的。使用地图将有更好的内存占用，甚至可能比矢量更快。您还可以考虑使用包含`std::pair<int,std::string>`键/值对的向量的混合方法，并对向量进行线性搜索（20 个元素**非常少**，足够少，您可以将成本视为常数，并且更简单的算法可能会补偿额外的操作数）。

# html - Chrome 不显示 html5 视频但播放音频

> ID：14349657
> 
> 赞同：4
> 
> 时间：2013-01-16T00:45:49.060
> 
> 标签：html, google-chrome, html5-video

显然我的 HTML 页面有问题，或者 chrome 中存在错误。（我严重怀疑后者）但是它确实可以在 FF 18 和 Safari 602 中播放

我的页面如下所示，

**404.php**

```
<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<title>chrisrjones.com - 404 - File Not Found</title>
<body>
Nope.

<br />

<!-- first try HTML5 playback: if serving as XML, expand `controls` to `controls="controls"` and autoplay likewise       -->
<!-- warning: playback does not work on iPad/iPhone if you include the poster attribute! fixed in iOS4                   -->

<video width="274" height="256" autoplay>
    <!-- MP4 must be first for iPad! -->
  <source src="../files/ahah-mp4-2.mov" type="video/mp4">
  <source src="../files/ahah.webm" type="video/webm"> <!-- Chrome10+, Ffx4+, Opera10.6+ -->
  <source src="../files/ahah.ogv" type="video/ogv"> <!-- Firefox3.6+ / Opera 10.5+ -->
  Your browser does not support the video tag.
  <!-- fallback to Flash: -->
  <!-- source: http://helpx.adobe.com/flash/kb/object-tag-syntax-flash-professional.html -->

</video>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:11:22.757

文件[http://chrisrjones.com/files/ahah-mp4-2.mov](http://chrisrjones.com/files/ahah-mp4-2.mov)以 MIME 类型发送：video/quicktime。

尝试使用 MIME 类型发送它：video/mp4。

并将视频编码为 H.264。

如果它在 Internet Explorer 中不起作用，那是因为视频不是用 H.264 编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:55:47.523

无论出于何种原因，如果启用视频标签的“控制”功能，视频在 OS X 上以 chrome 显示。到目前为止，唯一不显示视频文件的浏览器是适用于 OS X 的 chrome 版本 24.0.1312.52。我下载了最新的适用于 Windows 7 的 Chrome 的普通副本和显示的视频文件。

现在我要做的就是弄清楚为什么视频文件没有在 Internet Exploder 中*播放*

# c# - 使用 LINQ 按字符串名称选择属性

> ID：14349659
> 
> 赞同：3
> 
> 时间：2013-01-16T00:46:21.417
> 
> 标签：c#, .net, linq, list

我有一段非常简单的代码：

```
var list = new List<MyType>();
list = MyItems.Where(x => x.Name.ToLower().Contains(e.Text.ToLower())).ToList();
for (int i = itemOffset; i < endOffset; i++)
{
    combo.Items.Add(new ComboItem(list[i].Name, list[i].Id.ToString()));
} 
```

我想要做的是使它成为一个通用函数，它接受任何类型的列表并接受两个字符串作为属性。（在这种情况下，我们正在查看的两个属性是 Name 和 Id。

```
private void MakeCombo<T>(Combo combo, IEnumerable<T> lst, string Field1, string Field2)
{
    var list = list = lst.Where(x => x.Field1.ToLower().Contains(searchText.ToLower())).ToList(); //How make this to work???

    for (int i = itemOffset; i < endOffset; i++)
    {
        combo.Items.Add(new ComboItem(list[i].Field1, list[i].Field2.ToString())); //How make this to work???
    }
} 
```

现在，我不明白如何通过字符串名称（Field1 和 Field2）访问通用列表的属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T05:30:56.120

如果您没有能力创建接口并确保序列中的所有项目都实现该接口（如[this other answer](https://stackoverflow.com/a/14349713/1159478)所示），则解决此问题的一种方法是使用委托。通过传入两个函数，每个函数都将 a`T`作为输入，并返回 a `string`or`object`作为输出，您可以模仿该功能：

```
private void MakeCombo<T>(Combo combo, IEnumerable<T> sequence
    , Func<T, string> field1Selector, Func<T, object> field2Selector)
{
    var foundItems = sequence.Where(item => field1Selector(item).ToLower()
        .Contains(searchText.ToLower()));

    foreach(var item in foundItems)
    {
        combo.Items.Add(new ComboItem(field1Selector(item), field2Selector(item).ToString()));
    }
} 
```

从调用方来看，它可能看起来像这样（以您的第一个代码片段为例：

```
MakeCombo(combo, list, item => item.Name, item => item.Id); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T00:51:28.737

您将不得不使用反射：

```
typeof(x).GetField("Field1", BindingFlags.Public).GetValue() 
```

您可以对这两个对象执行此操作并比较值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T01:04:22.347

```
private void MakeCombo<T>(Combo combo, IEnumerable<T> list)
{
    Type type = typeof(T);
    List<T> comboList = list.Where(x => ((String)type.GetField("Field1", (BindingFlags.Public | BindingFlags.Instance)).GetValue(x)).ToLower().Contains(m_SearchText.ToLower()));

    for (Int32 i = m_ItemOffset; i < m_OffsetEnd; ++i)
        combo.Items.Add(new ComboItem((String)type.GetField("Field1", (BindingFlags.Public | BindingFlags.Instance)).GetValue(list[i]), (String)type.GetField("Field2", (BindingFlags.Public | BindingFlags.Instance)).GetValue(list[i])));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T00:51:45.283

如果您可以定义一个接口，描述所有可用的字段，并使适合此方法的每种类型都实现该接口，它会看起来像这样（并且 IMO 会比按名称访问字段更好）：

```
public interface IFields
{
    string Prop1 { get; set; }
    string Prop2 { get; set; }
}

public static void DoSmth<T>(List<T> items) where T : IFields
{
    foreach (T t in items)
    {
        Console.WriteLine(t.Prop1);
        Console.WriteLine(t.Prop2);
    }
} 
```

# ant - maven 插件的 Clover maxAggregatedStatements

> ID：14349665
> 
> 赞同：0
> 
> 时间：2013-01-16T00:46:59.517
> 
> 标签：ant, maven-2, clover

我目前正在尝试在我的项目声纳配置中配置一些方法排除（被排除的方法与我的问题无关）。我已经通过 maven 插件配置了三叶草。

根据我的研究，我发现作为定义 ant 上下文的一部分，除了要匹配的正则表达式方法签名之外，还有许多可用的选项。我特别感兴趣的是参数“maxAggregatedStatements”。

maven 插件是否存在此功能？到目前为止，我所有的搜索都没有产生任何结果，所以目前我只能在方法签名上进行匹配。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T20:53:34.193

目前（Clover 3.2.0）在 maven-clover2-plugin 中没有这样的选项。报告了一个功能请求，因此您可以在此处跟踪进度：[https](https://jira.atlassian.com/browse/CLOV-1173) ://jira.atlassian.com/browse/CLOV-1173 - 它在路线图上，计划于 2014 年进行。

作为一种解决方法，您可以使用自定义报告描述符。看

[https://docs.atlassian.com/maven-clover2-plugin/latest/clover-mojo.html#reportDescriptor](https://docs.atlassian.com/maven-clover2-plugin/latest/clover-mojo.html#reportDescriptor)

和

[https://confluence.atlassian.com/display/CLOVER/Creating+custom+reports](https://confluence.atlassian.com/display/CLOVER/Creating+custom+reports)

# python - python 3中的正则表达式和详细

> ID：14349668
> 
> 赞同：0
> 
> 时间：2013-01-16T00:47:10.143
> 
> 标签：python, regex

我正在阅读关于正则表达式的[Dive into Python 3 ，特别是使用 re.VERBOSE。](http://getpython3.com/diveintopython3/regular-expressions.html)我尝试搜索一个字符串，但它总是返回“无”。例如：

```
import re
pattern = '''
testing
'''

print(re.search(pattern, 'test', re.VERBOSE)) 
```

我原以为这应该返回 None 以外的东西，因为字符“test”的模式存在于“testing”中。我也曾想过，如果它是这样的：

```
pattern = '''
^testing$
''' 
```

那么如果我搜索相同的字符串，我会得到 None 的返回值是有道理的。但是，无论如何，我似乎总是得到 None 的返回值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:51:10.490

您将模式和文本搜索混合在一起。

您正在寻找`testing`text `test`，而后者还不够长。:-)

如果你颠倒了这两个（模式`test`，文本`testing`）的事情工作：

```
>>> import re
>>> pattern = '''
... test
... '''
>>> print(re.search(pattern, 'testing', re.VERBOSE))
<_sre.SRE_Match object at 0x1062f4c60> 
```

# java - 为什么 Intellij-IDEA 会忽略我的 tomcat/conf/server.xml 上下文标签？

> ID：14349669
> 
> 赞同：21
> 
> 时间：2013-01-16T00:47:12.583
> 
> 标签：java, tomcat, intellij-idea

在我的 $TOMCAT_HOME/conf/server.xml 我把它放在底部附近：

```
...

 <Context path="/staticdir" docBase="/filesystem/path/to/static/dir"/>                                

      </Host>
    </Engine>
  </Service>
</Server> 
```

我这样做是因为我的文件系统上有文件，当您转到 localhost:8080/staticdir 时，我希望 tomcat 提供这些文件

但是当我在 Intellij-IDEA 中启动应用程序时，tomcat 日志显示：

> 使用 CATALINA_BASE：“C:\Users\me.IntelliJIdea11\system\tomcat\Unnamed_Product_2”

如果我进入我的文件系统上的那个目录并查看 conf/server.xml 文件，它没有`Context`我放在那里的标签。为什么 intellij 修改它，我该如何防止它？

我觉得我应该对我的 $TOMCAT_HOME/conf/context.xml 文件进行此更改，但我无法找到如何在其中进行此更改的示例。如果有人可以给我看一个例子，我会认为这是一个答案，因为我注意到 intellij 不会修改该文件。

* * *

我找到了一种解决方法。

[![在此处输入图像描述](../Images/f16fdc91e10952553ff410ff123003ea.png)](https://i.stack.imgur.com/vKdfE.png)

但我真的不喜欢这样，因为当新用户第一次尝试运行该应用程序时，我无法想象一种方法来检测他们是否错误地执行了这一步。

这是我的tomcat配置的图片：

[![在此处输入图像描述](../Images/9f2306806f2f755a5c403279c2fd07c2.png)](https://i.stack.imgur.com/FOiZX.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-23T19:07:27.363

默认情况下，IntelliJ IDEA 会修改`CATALINA_BASE`环境，以便 Tomcat 使用调整后的配置文件直接从工件输出位置部署应用程序，但是可以[覆盖此行为](http://img547.imageshack.us/img547/8798/20130123222718.png)并手动配置所有内容（通过更改要进入的工件输出`webapps`或通过更改服务器配置以与 IDEA 相同的方式，从标准工件输出进行部署）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-15T14:18:09.127

我在 Tomcat/IntelliJ 中需要 ROOT 上下文，所以在 Host 标签的 server.xml 中，添加特定的 Context ：

```
<Context path="" docBase="C:\intranet\app\tomcat\webapps\ROOT\" reloadable="true" /> 
```

在 IntelliJ 11.1.5 中，在服务器选项卡面板中的“部署在 Tomcat 实例中配置的应用程序”复选框中，IntelliJ 将 server.xml 复制到文件夹部署中：

```
C:\Users\{Username}\.IntelliJIdea11\system\tomcat\Unnamed_Product_2\conf" 
```

现在我可以访问根域中的资源，例如 crossdomain.xml ：

```
http://localhost:8080/crossdomain.xml 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-29T19:19:37.933

在“启动/连接”选项卡中添加如下“传递环境变量”部分中提到的数据。重新启动，就是这样。

```
Name           Value
------------   -----
CATLINA_BASE   {Tomcat Installation directory} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-06T11:24:50.613

我复制了服务器，发现我的日志文件存储在错误的位置。

所以对于“Tomcat prod”，它实际上是在使用`catalina.base=".../preprod/..."`

我最终编辑`projects/.idea/workspace.xml`了在我安装 IntelliJ 的位置旁边

# sql-server-2005 - 为什么我的 SQL Server 审核触发器会扰乱 Access 的 OBDC 调用/刷新？

> ID：14349671
> 
> 赞同：4
> 
> 时间：2013-01-16T00:47:18.550
> 
> 标签：sql-server-2005, triggers, odbc, ms-access-2007, audit

我已经在我的一个表上实现了一个审计触发器，它基本上将旧记录和新记录复制到一个名为 ..._Audit 的表中，以及日期和用户。我会在下面发布我的脚本。

问题是，当我在 Access 中插入一条新记录时，它会刷新并显示表中的第一条记录。下面是一个示例 - 我添加了前三个记录，然后刷新，然后我添加了三个完全相同的数据添加它们之后，我应该看到具有相同数据和递增 ID 的记录，但它们却抓住了第一个表中的三条记录为最后三条记录。

```
 P_SubtaskID  PresetID_FK P_SubtaskName            DateDay DateMonth
 148          17          a new subtask            1       7
 149          17          a new subtask            1       7
 150          17          a new subtask            1       7
 8            5           Receive, sign and save   25      10
 9            5           Electronic lodgement     30      10
 10           1           Review                   12      7 
```

在我点击刷新后，这些记录会显示它们应该显示的内容：

```
 P_SubtaskID  PresetID_FK P_SubtaskName            DateDay DateMonth
 148          17          a new subtask            1       7
 149          17          a new subtask            1       7
 150          17          a new subtask            1       7
 151          17          a new subtask            25      10
 152          17          a new subtask            30      10
 153          17          a new subtask            12      7 
```

这是有问题的，因为当用户添加记录然后保存它时，它会显示完全不相关的记录。如果他们对此幻影进行更改，则会影响该记录 - 这很容易导致错误地更新/删除记录等。不好！

所以这是我创建审计表及其相关触发器的脚本：

```
USE [ClientDatabase]
 GO

 SET ANSI_NULLS ON
 GO
 SET QUOTED_IDENTIFIER ON
 GO

 DROP TABLE [dbo].[AutoTaskPresets_Subtasks_Audit]
 GO

 CREATE TABLE [dbo].[AutoTaskPresets_Subtasks_Audit](
    SessionID int identity(1,1) not null,
    [P_SubtaskID] [int] NULL,
    [PresetID_FK] [int] NULL,
    [P_SubtaskName] [nvarchar](255) NULL,
    [DateDay] [int] NULL,
    [DateMonth] [int] NULL,
    [DatePeriod] [int] NULL,
    [StaffName_FK] [nvarchar](255) NOT NULL,
    Action nchar(10) null,
    RowType nchar(10) null,
    ChangedDate datetime not null default getdate(),
    ChangedBy sysname not null default user_name()
 )
 GO

 CREATE Trigger [dbo].[DeleteAutoTaskPresets_Subtasks] ON [dbo].
     [AutoTaskPresets_Subtasks] FOR DELETE AS  

 BEGIN  
     SET NOCOUNT ON
     INSERT dbo.AutoTaskPresets_Subtasks_Audit(
        [P_SubtaskID],
        [PresetID_FK],
        [P_SubtaskName],
        [DateDay],
        [DateMonth],
        [DatePeriod],
        [StaffName_FK],
        Action,
        RowType)
     SELECT
        [P_SubtaskID],
        [PresetID_FK],
        [P_SubtaskName],
        [DateDay],
        [DateMonth],
        [DatePeriod],
        [StaffName_FK],
        'Deleted',
        'Old'
    FROM Deleted
 END
 GO

 CREATE Trigger [dbo].[InsertAutoTaskPresets_Subtasks]
    ON [dbo].[AutoTaskPresets_Subtasks] FOR INSERT AS  
 BEGIN  
     SET NOCOUNT ON
     INSERT dbo.AutoTaskPresets_Subtasks_Audit(
        [P_SubtaskID],
        [PresetID_FK],
        [P_SubtaskName],
    [DateDay],
        [DateMonth],
        [DatePeriod],
        [StaffName_FK],
        Action,
        RowType)
     SELECT
        [P_SubtaskID],
        [PresetID_FK],
        [P_SubtaskName],
        [DateDay],
        [DateMonth],
        [DatePeriod],
        [StaffName_FK],
        'Inserted',
        'New'
    FROM Inserted

 END
 GO

 CREATE Trigger [dbo].[UpdateAutoTaskPresets_Subtasks]
ON [dbo].[AutoTaskPresets_Subtasks] FOR UPDATE AS  
 BEGIN  
     SET NOCOUNT ON
     INSERT dbo.AutoTaskPresets_Subtasks_Audit(
        [P_SubtaskID],
    [PresetID_FK],
    [P_SubtaskName],
    [DateDay],
    [DateMonth],
    [DatePeriod],
    [StaffName_FK],
    [Action],
    RowType)
     SELECT
    [P_SubtaskID],
    [PresetID_FK],
    [P_SubtaskName],
    [DateDay],
    [DateMonth],
    [DatePeriod],
    [StaffName_FK],
    'Updated',
    'Old'
 FROM Deleted

     INSERT dbo.AutoTAskPresets_Subtasks_Audit(
    [P_SubtaskID],
    [PresetID_FK],
    [P_SubtaskName],
    [DateDay],
    [DateMonth],
    [DatePeriod],
    [StaffName_FK],
    [Action],
    RowType)
     SELECT
    [P_SubtaskID],
    [PresetID_FK],
    [P_SubtaskName],
    [DateDay],
    [DateMonth],
    [DatePeriod],
    [StaffName_FK],
    'Updated',
    'New'
FROM Inserted

 END
 GO 
```

我很困惑为什么会这样。我能想到的可能只是一个时间问题，尽管目前触发器在我认为是首选的操作之后运行。

我相信这是我的触发器，因为当我删除它们时，它工作正常。我的数据库也从未出现过这样的错误。

我正在使用带有与 MS Access 2007 客户端的 ODBC 连接的 SQL Server 2005。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T02:05:58.707

正如 Nikola 所解释的，这个问题与 @@identity 的使用有关。这需要最后一个记录条目的标识值，所以当我进行插入时，触发器会插入到不同的表中。这导致@@identity 的值不同，这正是 MS Access 似乎错误地依赖的值。为了解决这个问题，我需要在运行触发器之前保存 @@identity 值，然后恢复它。如下所示的插入触发器：

```
 CREATE Trigger [dbo].[InsertAutoTaskPresets_Subtasks]
    ON [dbo].[AutoTaskPresets_Subtasks] FOR INSERT AS  
 BEGIN  
     SET NOCOUNT ON

     declare @id int
     set @id = @@identity

     INSERT dbo.AutoTaskPresets_Subtasks_Audit(
        [P_SubtaskID],
        [PresetID_FK],
        [P_SubtaskName],
    [DateDay],
        [DateMonth],
        [DatePeriod],
        [StaffName_FK],
        Action,
        RowType)
     SELECT
        [P_SubtaskID],
        [PresetID_FK],
        [P_SubtaskName],
        [DateDay],
        [DateMonth],
        [DatePeriod],
        [StaffName_FK],
        'Inserted',
        'New'
    FROM Inserted

DECLARE @SQL varchar(8000)
SET @sql = 'SELECT IDENTITY(INT, ' + CAST(@id as varchar) + ', 1)
         AS ident INTO #Tmp'
EXEC(@sql)

 END
 GO 
```

遗憾的是，Access 似乎是以这种方式构建的，依赖于不是 100% 准确的东西。

最后，我只在插入触发器上实现了这个，即使其他触发器使用插入操作。经过一些简短的测试后，这似乎没问题。我现在已经在我的所有可以由普通用户编辑的表格上推出了这个脚本，所以不久我就会知道这是否会导致问题。

# jquery-templates - jquery模板每隔n个项目创建一个新行

> ID：14349672
> 
> 赞同：1
> 
> 时间：2013-01-16T00:47:18.970
> 
> 标签：jquery-templates

来自服务器的数据结构如下：

```
 var projects= [
        { 
          name: 'project 1', 
          hours: 1,
        },
        { 
          name: 'project 1', 
          hours: 2,
        },
        { 
          name: 'project 1', 
          hours: 3,
        },
        { 
          name: 'project 1', 
          hours: 4,
        },
        { 
          name: 'project 1', 
          hours: 5,
        },
        { 
          name: 'project 1', 
          hours: 6,
        },
        { 
          name: 'project 1', 
          hours: 7,
        },
        { 
          name: 'project 2', 
          hours: 1,
        },
        { 
          name: 'project 2', 
          hours: 2,
        },
        { 
          name: 'project 2', 
          hours: 3,
        },
        { 
          name: 'project 2', 
          hours: 4,
        },
        { 
          name: 'project 2', 
          hours: 5,
        },
        { 
          name: 'project 2', 
          hours: 6,
        },
        { 
          name: 'project 2', 
          hours: 7,
        }
    ]; 
```

使用 jquery 模板，我如何创建一个每 7 项包含一个新行的表？

我想格式化

```
 <table>
    <tr>
<td>project 1
    <td>hours 1</td>
    <td>hours 2</td>
    <td>hours 3</td>
    <td>hours 4</td>
    <td>hours 5</td>
    <td>hours 6</td>
    <td>hours 7</td>
    </tr>
    <tr>
    <td>project 2</td>
    <td>hours 1</td>
    <td>hours 2</td>
    <td>hours 3</td>
    <td>hours 4</td>
    <td>hours 5</td>
    <td>hours 6</td>
    <td>hours 7</td>
    </tr>
    </table> 
```

# javascript - 如何使用 unescape() 在变量中包含 html 自定义字符

> ID：14349675
> 
> 赞同：0
> 
> 时间：2013-01-16T00:47:34.133
> 
> 标签：javascript, jquery

我的菜单上有咖啡馆这个词。我想要它是咖啡馆

我一直在玩 Js 的 escape 和 unescape ，我不能让它做我认为它可以做的事情：

```
$(document).ready(function(){
        var newcafe = unescape('&eacute;');
        text = $(".cafe-menu-item").text().replace('cafe', 'caf' + newcafe);
        $(".cafe-menu-item").text(text);
    }); 
```

如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:16:27.457

理想情况下，只需在代码中使用文字 é。

如果您不能或不想这样做，请使用 Unicode 转义序列：

```
var newcafe = "caf\u00e9"; 
```

JavaScript 不是 HTML。如果可以避免的话，最好不要尝试在其中插入 HTML 语法。

编辑：您的示例代码错过了`var`您的`text`变量。

# php - 重写没有文件名的htaccess

> ID：14349677
> 
> 赞同：0
> 
> 时间：2013-01-16T00:48:11.427
> 
> 标签：php, .htaccess, rewrite

我想对这些地址进行重写，我在互联网上检查过，找不到适合这个的东西。所以我需要“http://www.xxx.com/ecommerce/automated/?city=london”

转换为“http://www.xxx.com/ecommerce/automated/London/”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:48:20.717

尝试这个：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*)/ index.php?city=$1
RewriteRule (.*) index.php?city=$1 
```

它假设您使用的 URL 如下：

`http://www.xxx.com/ecommerce/automated/index.php?city=london`

请注意将“index.php”添加到您的原始 URL。

# intuit-partner-platform - 在 Intuit Marketplace 上发布应用程序

> ID：14349679
> 
> 赞同：0
> 
> 时间：2013-01-16T00:48:34.343
> 
> 标签：intuit-partner-platform

我正在尝试在 Intuit Marketplace 上发布此应用程序：

[http://www.jmawebtechstore.com/nopcommerce-quickbooks-online-connex](http://www.jmawebtechstore.com/nopcommerce-quickbooks-online-connex)

我的应用在 nopCommerce 的管理员中有一个设置页面，用户将订单导出到 QBO。我只需要连接到 QuickBooks 选项。在市场的发布选项卡中，创建 Intuit 连接是否适合我？我是否需要在网站的根目录中创建一个 MVC 页面以允许用户同步订单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:46:17.163

Joseph，
此处列出了 Intuit Anywhere 应用程序和在 Intuit 应用中心上市的要求：[https ://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0080_FAQ](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0080_FAQ)

问候，
杰瑞德

# php - .htaccess 与自定义请求 URI 处理程序和 sef 链接

> ID：14349680
> 
> 赞同：0
> 
> 时间：2013-01-16T00:48:36.420
> 
> 标签：php, seo

目前我像这样使用seo。

```
PHP: domain.com/index.php?page=account&do=forgotpassword
.htaccess: domain.com/account/forgotpassword.html 
```

但是，我想为它编写自己的处理程序，或者使用任何其他现有的处理程序来执行以下操作。

```
Handler: Check request URI, convert it back to normal.
--- Request URI: domain.com/?/account/forgotpassword.html
--- Converts to: domain.com/index.php?page=account&do=forgotpassword
.htaccess: RewriteRule (.*)$ ?/$1 
```

1.  PHP 是否支持这样的处理程序？如果是这样，您能否提供一个链接，我可以在其中看到此类处理程序？（例如 Code Igniter's，如果它存在的话。）

2.  它对SEO方面有什么影响吗？（例如，谷歌忽略/喜欢链接）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:56:11.863

1.  PHP没有内置它。但是框架通常有自己的*路由*（这就是它的名称）库：[http ://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

2.  Google 不关心重写 url:`.htacess`或 php 的内容，因为从客户的角度来看绝对没有区别。

# facebook-graph-api - Windows 8 应用程序中的 Facebook 源对话框

> ID：14349682
> 
> 赞同：1
> 
> 时间：2013-01-16T00:48:36.943
> 
> 标签：facebook-graph-api, windows-8, microsoft-metro, facebook-javascript-sdk, winjs

我正在尝试做一个共享链接的 Windows 8 应用程序...

我已经有一个访问令牌。如何打开提要对话框？

我正在使用以下代码：

```
 var facebookURL =
    "https://www.facebook.com/dialog/feed" +
    "?display=popup" +
    "&app_id=" + FBI.appID +
    "&access_token=" + FBI.auth.getAccessToken() +
    "&link=http://apps.microsoft.com/windows/app/archery-master/172c7273-10a8-4519-8a66-68ec4dae12f1" +
    "&picture=http://wscont1.apps.microsoft.com/winstore/1x/0a119429-8795-4e0b-9f1a-d55bb5e8c2b1/Icon.70730.png" +
    "&name=Archery%20Master" +
    "&caption=I%20have%20a%20new%20best%20score" +
    "&description=My%20best%20score%20was%20300%20points" +
    "&redirect_uri=" + FBI.auth.callbackURL;

var startURI = new Windows.Foundation.Uri(facebookURL);
var endURI = new Windows.Foundation.Uri(FBI.auth.callbackURL);

Windows.Security.Authentication.Web.WebAuthenticationBroker.authenticateAsync(
    Windows.Security.Authentication.Web.WebAuthenticationOptions.dafault, startURI, endURI)
    .done(function (result) {
        switch (result.responseStatus) {
            case Windows.Security.Authentication.Web.WebAuthenticationStatus.errorHttp:

                break;
            case Windows.Security.Authentication.Web.WebAuthenticationStatus.success:

                break;
            default:

                break;
        }

    }, function (err) {

    }); 
```

但是，我有以下错误：

`API Error Code: 110`

`API Error Description: Invalid user id`

`Error Message: Missing user cookie (to validate session user)`

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T04:00:15.563

在 Windows 应用商店应用程序中共享的最佳模式是使用[Share Source 合同](http://msdn.microsoft.com/en-us/library/windows/apps/hh758315.aspx)。这允许您的应用程序选择要共享的内容，同时让用户选择在何处/如何共享它（例如 - 与哪个应用程序共享）。

在您的应用程序中实现与特定提供商共享的缺点是 MySpace 现象。如果您正在编写的社交网络没有超过您的应用程序，会发生什么？现在，您的应用程序中已经有了需要维护的代码，但这些代码对您的用户的价值有限。出于同样的原因，如果出现了新的社交网络，您将希望将代码添加到您的应用程序以共享给它。

使用共享源合约通过允许用户选择接收共享数据的应用程序来解决这两个问题。如果他们希望与 Facebook 分享，他们可以选择支持该网络的应用程序。如果他们更喜欢 Twitter，他们可以分享。

除非有一些真正令人信服的理由不这样做，否则我建议您查看 Share Source 合同。您可以编写更少的代码，并为用户提供更大的灵活性，并且您的应用程序将按照 Windows 应用商店应用程序的用户所期望的方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:33:15.113

尝试删除行 access_token。

```
var facebookURL =
"https://www.facebook.com/dialog/feed" +
"?display=popup" +
"&app_id=" + FBI.appID +
//"&access_token=" + FBI.auth.getAccessToken() +
"&link=http://apps.microsoft.com/windows/app/archery-master/172c7273-10a8-4519-8a66-68ec4dae12f1" +
"&picture=http://wscont1.apps.microsoft.com/winstore/1x/0a119429-8795-4e0b-9f1a-d55bb5e8c2b1/Icon.70730.png" +
"&name=Archery%20Master" +
"&caption=I%20have%20a%20new%20best%20score" +
"&description=My%20best%20score%20was%20300%20points" +
"&redirect_uri=" + FBI.auth.callbackURL; 
```

我试过你的代码，没有 access_token 行，似乎可以显示对话框。

希望能帮助到你。

# php - 清理用户输入，安全吗？

> ID：14349684
> 
> 赞同：1
> 
> 时间：2013-01-16T00:48:48.617
> 
> 标签：php, security

我想知道清理提供给 PHP 脚本的数据的最安全方法，这是我想出的功能，您认为使用它是否足够安全？

```
function santatizeName($data)
{
    $data = filter_var($data, FILTER_SANITIZE_STRING); 
    $data = preg_replace('/[^a-z]/i','',$data); //Removes everything but letters.
    $data = ucfirst($data); //Capatilizes first letter.

    return $data;
} 
```

希望得到您的反馈，这是 PHP 安全的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:05:27.547

考虑到在大多数字段中使用所有字符的业务需求，尤其是在姓名字段中（想想 O'Hara 先生、Smith-Meyer 夫人和 Möller 先生），输入卫生的概念实际上对字符串是徒劳的，并且鉴于事实几乎任何角色在其他情况下都是危险的。您应该在字符串数据更改上下文时（例如当您将其放入数据库查询、shell 命令或输入到动态生成的 HTML/CSS/JS/whatever 中时）正确地转义/编码您的字符串数据。使用安全的 API 进行 DB 访问，例如准备好的语句，而不是通过字符串连接构造 SQL。

话虽如此，您可能会发现[OWASP PHP 过滤器](https://www.owasp.org/index.php/OWASP_PHP_Filters)或[OWASP ESAPI for PHP](https://code.google.com/p/owasp-esapi-php/)很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T00:57:00.437

您可能需要查看以下有关清理过滤器的 php 文档。

[http://php.net/manual/en/filter.filters.sanitize.php](http://php.net/manual/en/filter.filters.sanitize.php)

和

[http://php.net/manual/en/ref.filter.php](http://php.net/manual/en/ref.filter.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:00:39.647

查看[http://htmlpurifier.org/](http://htmlpurifier.org/)虽然它不仅仅是消毒。

# scipy - 在 Mac OS X Lion 10.7.5 上安装 Scipy

> ID：14349685
> 
> 赞同：1
> 
> 时间：2013-01-16T00:48:52.003
> 
> 标签：scipy

尽管我听说过很多关于人们在 Mac OS X Lion 上安装 numpy、scipy 和 matplotlib 时遇到问题的故事，但直到今天我才遇到任何问题。我最近更新了我的系统并尝试安装最新版本的 NumPy 和 SciPy。NumPy 安装顺利，测试按预期运行，但是 scipy 安装似乎不完整。每次我尝试导入 scipy.stats 我都会收到以下错误：

```
In [1]: import scipy.stats
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-1-b66176eb2d0a> in <module>()
----> 1 import scipy.stats

    /Library/Python/2.7/site-packages/scipy/stats/__init__.py in <module>()
    326 """
    327 
--> 328 from stats import *
    329 from distributions import *
    330 from rv import *

/Library/Python/2.7/site-packages/scipy/stats/stats.py in <module>()
    191 # Scipy imports.
    192 from numpy import array, asarray, dot, ma, zeros, sum
--> 193 import scipy.special as special
    194 import scipy.linalg as linalg
    195 import numpy as np

/Library/Python/2.7/site-packages/scipy/special/__init__.py in <module>()
    525 """
    526 
--> 527 from _ufuncs import *
    528 from _ufuncs_cxx import *
    529 

ImportError: dlopen(/Library/Python/2.7/site-packages/scipy/special/_ufuncs.so, 2): no     suitable image found.  Did find:
    /Library/Python/2.7/site-packages/scipy/special/_ufuncs.so: mach-o, but wrong   architecture 
```

我正在使用 github 上最新版本的 numpy 和 scipy。出于某种原因，_ufuncs.so 的 x86_64 版本似乎没有被构建。我已经尝试了所有我能想到的编译器标志 ARCHFLAGS="-arch i386 -arch x86_64" LDFLAGS="-arch i386 -arch x86_64" FFLAGS="-m64 -ff2c"

无论我做什么，我都会得到同样的错误。有什么建议吗？

**UPDATE** 所以我认为我已经找到了问题，我将在 scipy 分发列表上进行跟进：

scipy 构建时创建的大多数库都是通用文件，这意味着它们同时支持 i386 和 x86_64。问题是使用 gfortran 编译的文件仅编译为 i386。

```
> find . -name *.so | xargs -I {} lipo -info {}
Architectures in the fat file: ./build/lib.macosx-10.7-intel-2.7/scipy/cluster/_hierarchy_wrap.so are: i386 x86_64 
Architectures in the fat file: ./build/lib.macosx-10.7-intel-2.7/scipy/cluster/_vq.so are: i386 x86_64 
Non-fat file: ./build/lib.macosx-10.7-intel-2.7/scipy/fftpack/_fftpack.so is architecture: i386 
```

我检查了我的环境，没有发现任何可疑之处。正如 SciPy Mac OS X 页面上指定的那样。我只导出：CC=gcc-4.2 CXX=g++-4.2 FFLAGS=-ff2c

我刚刚安装在另一个系统上，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:40:07.840

[这里](https://stackoverflow.com/questions/13478555/installing-scipy-on-mountain-lion/13616923#13616923)已经回答了一个类似的问题，我同意它 - 在 vi​​rtualenv 中安装是最好的方法。OS X 本身依赖于某些 Python 库的特定版本，有时在主 Python 解释器中安装附加包有点棘手（例如，我在使用 matplotlib 时遇到了麻烦）。

安装 virtualenv 非常简单，正如[这篇博](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)文中所解释的那样，归结为安装 virtualenv(wrapper)

```
pip install virtualenv virtualenvwrapper 
```

采购它并创造一个你将要工作的新环境

```
source /usr/local/share/python/virtualenvwrapper.sh
mkvirtualenv system
workon system 
```

您现在可以从 Cheese shop 安装您需要的任何东西。将`source`and`workon`命令添加到您的`.bashrc`文件中，以便自动选择此环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:39:34.260

[ScipySuperpack](http://fonnesbeck.github.com/ScipySuperpack/)修复了所有问题。

```
$ curl -o install_superpack.sh https://raw.github.com/fonnesbeck/ScipySuperpack/master/install_superpack.sh
$ sh install_superpack.sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:32:52.377

最后，我删除了我所有的 GNU 编译器 C、C++ 和 GFortran。然后重新安装 2.5.1 版本。然后我设置环境变量：

```
CC=gcc-4.2
CXX=g++-4.2 
FFLAGS=-ff2c
ARCHFLAGS="-arch i386 -arch x86_64" 
```

之后，我构建了 Scipy，瞧！通用二进制文件出现：

```
[16:29:27] junebug:fftpack> lipo -info _fftpack.so 
Architectures in the fat file: _fftpack.so are: i386 x86_64 
```

我不确定我的 GNU 编译器的路径有什么问题，但我认为问题可能是因为我安装了多个版本。

# javascript - 替换 jQuery .closest() 选择器

> ID：14349686
> 
> 赞同：0
> 
> 时间：2013-01-16T00:49:05.300
> 
> 标签：javascript, jquery

[jQuery Closest Selector](http://api.jquery.com/closest/)是否有替代选择器。我注意到它在 1.7 中已弃用并在 1.8 中删除。我目前在我的 JavaScript 中使用了很多它，我很想知道是否有类似的东西可以有效地使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T00:51:48.043

它没有被弃用。只是返回数组的内部方法。来自 jQuery 文档：

> 此签名（仅！）在 jQuery 1.7 中已弃用，并在 jQuery 1.8 中删除。它主要是供内部使用或由插件作者使用。

`closest`顺便说一句，这应该与（在一个元素上）表现相同：

```
$el.parents( selector ).eq(0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T00:51:57.363

仅`.closest( selectors [, context ] )`删除了方法签名。其他一切都很好！

# facebook - Google Analytics 社交跟踪 Facebook 推荐人

> ID：14349691
> 
> 赞同：1
> 
> 时间：2013-01-16T00:50:18.703
> 
> 标签：facebook, google-analytics, referrer

我了解 Google Analytic 的高级细分可用于跟踪来自 Facebook 的推荐。我正在创建自己的跟踪系统，并希望模拟此推荐跟踪功能。我假设谷歌分析是基于javascript的，它会使用'document.referrer'来实现这一点。但是，不会从基于 https 的连接（即 facebook）跟踪 document.referrer。所以我的问题是：

Google Analytics 如何跟踪 Facebook 产生的流量？如何使用 javascript 模拟这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:19:27.343

据我所知，当用户将 http 移动到 https 时，IE 会阻止引荐来源网址。

[http://support.microsoft.com/kb/178066/en-us?fr=1](http://support.microsoft.com/kb/178066/en-us?fr=1)

因此，如果您在 https 协议上托管您的跟踪代码，也许它可以工作。

# objective-c - 模拟模态窗口以允许在模态窗口之外点击

> ID：14349694
> 
> 赞同：1
> 
> 时间：2013-01-16T00:50:21.617
> 
> 标签：objective-c, ipad

我正在使用拆分视图控制器并在主窗格中点击按钮时显示模式窗口。当用户在窗口边界之外点击时，我需要能够关闭窗口。

我目前正在使用 presentViewController，我读过它不允许在窗口外点击。

我想我需要自己展示一个视图控制器并设置一个手势识别器来处理从那里关闭...问题是，我不知道在哪里/如何展示视图控制器或将手势识别器附加到哪里一个 SVC。

我像这样设置我的视图控制器：

```
SearchViewController *searchViewController = [[SearchViewController alloc] initWithStyle:UITableViewStylePlain];

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:searchViewController];

[navController setNavigationBarHidden:NO]; 
```

从那里我不知道如何在不使用 presentViewController 的情况下使视图控制器出现。我尝试了以下（分别）：

```
[[self navigationController] addChildViewController:navController];

[self.view.window.rootViewController addChildViewController:navController];

[self.presentingViewController addChildViewController:navController];

[self.presentingViewController.presentingViewController addChildViewController:navController]; 
```

如何展示我的导航控制器，以及将手势识别器添加到哪个视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:22:48.690

UIPopoverViewController 将起作用。

或者，您可以将子视图控制器添加到您的 RootViewController。. （查看 UIViewController 包含的生命周期处理）。

基本上就是在你的根视图控制器中：

```
- (void) presentSemiModalViewController 
{
   //Tint-out the background or blur it with some effect        

    _semiModalViewController = viewController;
    //Choose the frame you'd like to use here, and an animation you'd like to use to present it
    [self.view addSubView:_semiModalViewController.view];
    [_semiModelViewController willMoveToParentViewController self];

} 
```

如果 RootViewController 不是您的（例如 UINavigationController），您可以使用类别，但要保留 _semiModalViewController，您需要使用关联引用（即在类别中添加“属性”以在使用时存储模态 VC ）。有关这方面的信息，请参见此处：[关联参考信息](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)

PS：您可能想为我的“半模态”选择一个更好的名称，但您明白了；）

# c++ - 如何直接从谷歌地图批量下载大量高分辨率卫星图像？

> ID：14349696
> 
> 赞同：1
> 
> 时间：2013-01-16T00:50:29.323
> 
> 标签：c++, python, google-maps, shell, url

我正在帮助一位从事卫星图像分析项目的教授，我们需要将 800 张图像拼接在一起，以 8000x8000 分辨率从谷歌地图中的每张图像，可以一张一张地下载它们，但是我相信必须有一个编写批处理脚本的方法。

在这里我想问一下如何使用 shell 或 python 脚本来实现这一点，以及如何通过 google maps url 下载图像？

以下是网址的示例：

```
https://maps.google.com.au/maps/myplaces?ll=-33.071009,149.554911&spn=0.027691,0.066047&ctz=-660&t=k&z=15 
```

但是我无法从中分析图像直接下载链接。

**更新：**

实际上，我解决了这个问题，但是由于谷歌的意图，我不会发布这样做的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:16:20.107

你试过[谷歌静态地图 API](https://developers.google.com/maps/documentation/staticmaps/)吗？

您会收到 25 000 个免费请求，但您被限制为 640x640，因此您需要以更高的缩放级别执行约 160 个请求。

我建议这样[下载图像：通过 urllib 和 python 下载图片](https://stackoverflow.com/questions/3042757/downloading-a-picture-via-urllib-and-python)

开头的网址：[http ://maps.googleapis.com/maps/api/staticmap?center=-33.071009,149.554911&zoom=15&​​size=640x640&sensor=false&maptype=satellite](http://maps.googleapis.com/maps/api/staticmap?center=-33.071009,149.554911&zoom=15&size=640x640&sensor=false&maptype=satellite)

![静态地图](../Images/40fa86aaa57bbd6bbdb1738de6ff8625.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T08:58:16.600

很久没有解决这个问题了，抱歉耽搁了。

[我在这里](https://github.com/tomriddle1234/googlemap-batch-downloader)将我的代码发布到 github 上，请按你喜欢的方式加星或分叉 :)

这个想法是使用一个非常高分辨率的虚拟网络浏览器来加载谷歌地图页面，然后进行页面捕获。缺点是每张图片周围都会有google符号，解决方法是对每张图片的分辨率进行过采样，然后使用拼接技术将它们粘在一起。

# asynchronous - EJB 3.0 - 使用 CMT 的事务独立 EJB 调用序列

> ID：14349697
> 
> 赞同：1
> 
> 时间：2013-01-16T00:50:30.413
> 
> 标签：asynchronous, transactions, ejb, ejb-3.0, message-driven-bean

有一个 MDB 和一系列无状态 EJB 来处理消息（WAS 7.0、Java EE 5、EJB 3.0、JPA）。

序列（使用 CMT）：

*   MDB 接受消息
*   MDB 使用消息详细信息持久化实体
*   MDB 调用 EJB 1 传递实体 ID，
*   EJB1 对消息进行处理，这取决于 EJB1 调用是否成功
*   传递 ID 的 EJB2 或 EJB5
*   EJB2 做了它的一部分......

依此类推，直到最后一个 EJB（运行时间为几分钟）。

所有这些都发生在一个事务中：因此，如果在 EJB4 中抛出了一些东西 - 该事务中之前发生的所有事情都将被回滚。我尝试将 REQUIRES_NEW 用于所有后续调用，但似乎先前调用中的更改对于后续调用不可见。此外，事务变得很长，有时甚至超时。

我想有单独的，独立的交易：

*   接收和持久消息
*   EJB1中的B处理
*   EJB2 中的 C 处理

.... 因此，如果 EJB2 执行失败，则消息应保留在 DB 中，并且 EJB1 中的执行结果也应保留。

所以主要问题是，使用 CMT - 是否可以为序列进行*简短*且*独立*的交易？

多一点

*   源自 MDB 的事务能否独立于对 EJB1 的调用结果提交？此外——在调用 EJB1 之前提交..？
*   在对具有 REQUIRES_NEW 属性的 EJB1 方法的调用中，对 MDB 内的实体所做的更改是否可以看到？
*   除了 BTM 或 WorkManager 之外，还有其他方法可以实现目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:26:14.050

REQUIRES_NEW 应该没有任何问题。

如果你有这个：

```
@EJB(..)
EJB1 ejb1;
@EJB(..)
EJB2 ejb2;

public void onMessage(Message message) {
    Thing thing = getThingFromMessage(message);

    persistThingStuff(thing);
    ejb1.doThingStuffWithRequiresNew(thing);
    ejb2.doThingStuffWithRequiresNew(thing);
} 
```

这应该只是工作（tm）有一个警告。

如果ejb2 抛出异常，ejb1 的工作将被提交，但persistThingStuff 将回滚。

但是，如果您执行以下操作：

```
public void onMessage(Message message) {
    Thing thing = getThingFromMessage(message);

    persistThingStuff(thing);
    ejb1.doThingStuffWithRequiresNew(thing);
    try {
        ejb2.doThingStuffWithRequiresNew(thing);
    } catch (Throwable t) {
        youBetterLogThis();
    }
} 
```

这应该可以防止任何异常破坏 MDB 的工作，但是如果 EJB2 长时间运行，则 MDB 完成的任何工作仍处于挂起状态并处于打开的事务中，等待它。

为了解决很多这些问题，我们有一个实用的 EJB 函数：

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public <T extends Runnable> T runInTransaction(T runner) {
    runner.run();
    return runner;
} 
```

那么我们不一定要为此标注具体的方法。

```
@EJB(...)
UtilEJB utilEjb;

public void onMessage(Message message) {
    final Thing thing = getThingFromMessage(message);

    utilEjb.runInTransaction(new Runnable() {
        public void run() {
            persistThingStuff(thing);
        }
    });
    ejb1.doThingStuffWithRequiresNew(thing);
    try {
        ejb2.doThingStuffWithRequiresNew(thing);
    } catch (Throwable t) {
        youBetterLogThis();
    }
} 
```

这将立即提交 MDB 工作，甚至在 EJB1 之前。

# ruby - 将 SSPI 与 Ruby TinyTDS 一起使用 - 可能吗？

> ID：14349698
> 
> 赞同：3
> 
> 时间：2013-01-16T00:50:32.063
> 
> 标签：ruby, sql-server, sspi, tiny-tds

在尝试使用 Ruby 连接到 SQLServer 数据库后，我终于发现了[TinyTDS](https://github.com/rails-sqlserver/tiny_tds)，它太棒了。

但是，它需要用户名和密码才能与数据库通信。在过去的 C# 测试中，我们使用 SSPI 来提供此功能，以便任何测试人员都可以获取脚本并运行它，并且它将使用他们的 Windows 身份验证详细信息。

我找不到使用 TDS 的方法（开始怀疑当前版本不可能）并希望有人可能证明我错了，或者有其他建议？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:09:37.900

找到了解决方案。

我安装的 tiny-tds 是 0.51 版。

最新版本具有 SSPI，因此要做到这一点：

```
gem install tiny_tds --version ">= 0.6.0.rc1" 
```

这无需指定用户名/密码并默认使用 SSPI。

举个例子：

```
require  'tiny_tds'

    sql = "SELECT name from sys.databases"
    client = TinyTds::Client.new(:dataserver => "myserver", :database => "mydatabase")
    result = client.execute(sql)
    results = result.each(:symbolize_keys => true, :as => :array, :cache_rows => true, :empty_sets => true) do |rowset| end
    #THIS IS TO OUTPUT IT TO THE CONSOLE
    for i in (0..result.fields.length)
      printf("%14s", result.fields[i])
    end
    for j in (0...result.affected_rows)
      puts ""
      for i in (0...result.fields.length)
        printf("%14s",results[j].at(i))
      end
    end 
```

将打印出数据库名称列表，使用 SSPI 访问数据库。

# c++ - 强制保留参数为 nullptr 的 C++ 标记

> ID：14349700
> 
> 赞同：0
> 
> 时间：2013-01-16T00:50:45.247
> 
> 标签：c++, c++11

我有一个功能`func(int a, char b, void *ptr)`。第三个参数保留供内部使用，它应该是`nullptr`当前版本的 a。有没有办法在函数原型而不是定义中强制执行此操作（检查并返回 EINVAL）？通过“更好的方式”，我的意思是某种新的 C++11 特性可以实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T01:00:26.323

您可以将第三个参数的类型从更改`void*`为`nullptr_t`( `#include <cstddef>`)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T00:54:15.223

看起来您正在寻找[默认参数值](http://www.learncpp.com/cpp-tutorial/77-default-parameters/)。制作你的原型`func (int a, char b, void *ptr = nullptr)`，Bob 就是你的叔叔。

# windows-phone-7 - 在后台代理 wp7 中创建平铺数据

> ID：14349710
> 
> 赞同：0
> 
> 时间：2013-01-16T00:51:31.003
> 
> 标签：windows-phone-7, background-process, live-tile, writablebitmap

在后台代理中创建更新动态磁贴所需的位图的好方法是什么？在 UI 线程中，您使用 writeableBitmap 类，但这在非 ui 线程中不起作用。后台代理中有很多图块示例，但它们都使用以前在 UI 中创建的位图。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:12:20.583

> 这在非 ui 线程中不起作用

WriteableBitmap 不需要 UI，它只需要一个 Dispatcher。后台代理有。

[有关示例，请参阅此答案](https://stackoverflow.com/a/13658385/126995)。

# transactions - Febelfin CODA（账户编码报表）2.3 仅在比利时使用？

> ID：14349711
> 
> 赞同：6
> 
> 时间：2013-01-15T13:13:58.633
> 
> 标签：transactions, swift-mt, coda-format

我的任务是编写一些代码来解释来自（不同）（比利时）银行的 CODA 文件。

CODA 文件代表 Coded Statement of Account 文件，并且似乎是文本文件的比利时名称，该文件对特定银行账户上发生的每笔银行交易都有一行。

这包括 SEPA 直接借记交易信息。

我们合作的前 2 家银行是比利时（Fortis 和 ING），我收到了这些文件如何从它们中编码的规范。

我似乎找不到这些文件的英文名称。如果这真的只是比利时的标准，我会感到惊讶。我正在寻找更多关于如果我们尝试将我们的代码与法国或英国银行挂钩会发生什么的信息

*   **有没有人可以指出我需要搜索的标准名称？**
*   **甚至有一个国际标准吗？**
*   **对于程序员：是否有任何 c# 或 .NET 程序集可以用来轻松解释这些 CODA (2.3) 文件？我想避免自己编写这个关键库。**

我发现存在 mt940 (SWIFT) 之类的东西，但这些文件看起来和我的不一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:19:39.507

这是比利时银行家和股票经纪公司协会 (Febelfin)[的英文官方 CODA 规范。](http://www.febelfin.be/sites/default/files/Standard-CODA-2.3-EN_0.pdf)

你不太可能找到一个 C# 库来处理这个问题——银行因拥有铁器时代的系统而臭名昭著。也许如果您想要 Cobol 或 Fortran 实现，您会找到一些东西；）

该文件讨论了本地交易的 SEPA，显然是国际交易的 SWIFT。SWIFT 是所有国际交易的事实上的银行电汇格式。SWIFT 在大多数语言中都有多种现代实现，尽管它很简单，可以以您想要的任何方式实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-27T22:43:27.083

Mvision，我找不到你的联系方式，我还没有足够的声誉发表评论。

您是否找到或编写了一个库/类来解释 CODA 语句？您能否分享它或分享一些关于您如何编写它的见解？将不胜感激！

同时该标准已更新至 v2.4（从 v2.3 和 v2.3a），您可以在其中找到英文[规范](https://www.febelfin.be/sites/default/files/files/standard-coda-2.4-en.pdf)和荷兰文[规范](https://www.febelfin.be/sites/default/files/Payments/Standard-CODA-23-NL.pdf)。

它们在末尾包含 v2.4 的变更日志，这是 v2.3a 的变更日志：

> 新增类别代码 435 和 436，删除类别代码 052

我发现 Python 中的一些现有实现与 CODA 最高 v2.2 兼容，应该能够将其移植到 C#：[https ://www.odoo.com/apps/modules?author=Noviat](https://www.odoo.com/apps/modules?author=Noviat)

# android - 在 Scrollview 的底部创建一个 RelativeLayout

> ID：14349716
> 
> 赞同：0
> 
> 时间：2013-01-16T00:52:02.490
> 
> 标签：android, android-relativelayout

我在 Scrollview 中有一个 TableLayout，我想在 ScrollView=>TableLayout 的底部设置一个 FIXED RelativeLayout。使用该 XML 代码，我总是在 TableLayout 上方使用 RelativeLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:glowpad="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/classement_layout"
    android:background="#000000">

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        android:scrollbarFadeDuration="1000"
        android:id="@+id/scroll_table"
        android:scrollbarSize="12dip" >

        <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/tableLayout1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:shrinkColumns="*"
            android:stretchColumns="*"
            android:background="#000000" >

        </TableLayout>

    </ScrollView>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="80dp"
        android:layout_alignBottom="@+id/scroll_table"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true" >

       <ImageView
           android:id="@+id/imageView1"
           android:layout_width="20dp"
           android:layout_height="20dp"
           android:layout_alignParentLeft="true"
           android:layout_alignParentTop="true"
           android:layout_marginLeft="22dp"
           android:src="@drawable/green" />

       <TextView
           android:id="@+id/textView1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentTop="true"
           android:layout_toRightOf="@+id/imageView1"
           android:text="Qualification pour la ligue des champions" 
           android:textColor="#ffffff"/>

       <ImageView
           android:id="@+id/imageView2"
           android:layout_width="20dp"
           android:layout_height="20dp"
           android:layout_alignLeft="@+id/imageView1"
           android:layout_centerVertical="true"
           android:src="@drawable/blue" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:58:03.313

只需将您的表格布局封装在另一个相对布局中，然后将您的“页脚”相对布局放在表格布局下方，并使用页脚上的 layout_below 属性将其保持在表格布局之下

```
<ScrollView>
<RelativeLayout
   stuff...>

      <TableLayout
         stuff.../>

      <RelativeLayout
         android:layout_below="@+id/TableLayout"
         stuff...></RelativeLayout>

</RelativeLayout>
</ScrollView> 
```

为了始终将“页脚”RelativeLayout 放在底部，只需像这样放置它：

```
<ScrollView>
<RelativeLayout
   stuff...>

      <TableLayout
         stuff.../>

</RelativeLayout>
</ScrollView>

<RelativeLayout
    android:layout_below="@+id/ScrollView"
 stuff...></RelativeLayout> 
```

# c++ - MAT通道的平均值

> ID：14349717
> 
> 赞同：0
> 
> 时间：2013-01-16T00:52:08.853
> 
> 标签：c++, image-processing, opencv, computer-vision

我想获得 MAT 和 MatND 变量的平均值，只是为了估计清晰度和亮度。然而，我一直面临着我所遇到的模糊价值观的真正问题。我尽了最大的努力，但仍然感到困惑。我真的不知道，如果我在做正确的事。

```
 calcHist(&src_yuv,1,channels,Mat(),hist,1,histSize,ranges,true,false);
    Size d = hist.size();
    rows = d.height;
    cols = d.width;
    for(int k=0;k<hbins;k++)
    {
     for(int l=0;l<sbins;l++)
     {
       total = total + hist.at<float>(k,l);
     }
    }
    brightness = total/(rows*cols); 
```

在这里，我试图计算 src_yuv 的亮度通道的直方图，它是 YUV 格式的，并取平均值。我做对了吗？如果我更改 <' '> 中的数据类型，从 uchar 到 long int，最终会得到不同的值，这是可以理解的。但我不知道哪个是正确的数据类型。此外，我应该在 hbins、sbins 还是 rows、cols 中循环它？请帮我。我坚持了很长时间。

```
 Laplacian(src_gray,dst,ddepth,kernel_size,scale,delta,BORDER_DEFAULT);
     Size s = dst.size();
     rows = s.height;
     cols = s.width;
     total = 0;
     max =  0;
     for(int k=0;k<rows;k++)
     {
       for(int l=0;l<cols;l++)
       {
          total = total + dst.at<>(k,l);
       }
     }
     average = total/(rows*cols); 
```

在上述情况下计算平均值的确切方法是什么？你能帮帮我吗？我尝试了不同的数据类型，从 in 开始用于 mat，long int 用于总和平均值。它是一个灰度图像，结果是拉普拉斯卷积图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:13:53.710

在 calcHist 之前将输入 src_yuv 转换为 BGR，您将使用相同的代码获得所需的输出。

编辑：对于 YUV：-

```
out = imread("Lena.jpg");
out.convertTo(out, CV_RGB2YCrCb);
MatND hist;
int hbins = 30, sbins = 32;
int histSize[] = {hbins, sbins};
float hranges[] = { 0, 180 };
float sranges[] = { 0, 256 };
 int channels[] = {0,1,2};
const float* ranges[] = { hranges, sranges };
calcHist( &out, 1, channels, Mat(), 
         hist, 2, histSize, ranges,
         true, 
         false );
Size d = hist.size();
int rows = d.height;
int cols = d.width;
float total;
float brightness;
for(int k=0;k<hbins;k++)
{
    for(int l=0;l<sbins;l++)
    {
        total = total + hist.at<float>(k,l);
    }
}
brightness = total/(rows*cols); 
```

这使我的亮度为 246.895

# c - 将本地数组的元素作为传递值传递给另一个函数时出现分段错误

> ID：14349719
> 
> 赞同：1
> 
> 时间：2013-01-16T00:52:20.337
> 
> 标签：c

```
#include<stdio.h>
void gradescounter(int[], int);

int main(void){
   int indexnum;
   int grade[indexnum];

   /* processing phase */

   printf( "Please enter the index number: ");
   scanf( "%d", &indexnum);

   gradescounter(grade[indexnum], indexnum);
} 
```

当我输入数字时，我遇到分段错误错误。有人能告诉我哪里错了吗？另外，当我使用 gcc 编译时，有一个警告，传递 'gradescounter' 的参数 1 会在没有强制转换的情况下从整数生成指针，为什么会这样？谢谢大家可以帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:54:32.053

1.  `indexnum``grade`使用它创建数组时未初始化。您可能应该在那里使用已知值。

2.  您正在将 an 传递`int`给期望的函数`int[]`（这只是 的语法糖`int *`）。这就是问题所在 - 要么 pass `grade`，要么将函数更改为 just `int`，以正确者为准。

3.  `main`可能应该在`return`某处发表声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:56:58.367

我同意卡尔·诺鲁姆

请参阅下面的代码

```
#include <stdio.h>
void gradescounter(int*, int);

int main(void){

   int indexnum;
   int grade[]={1,2,3,4,5,6,7,8,9};

   /* processing phase */

   printf( "Please enter the index number: ");
   scanf( "%d", &indexnum);

   gradescounter(grade, indexnum);

   return 0;
}

void gradescounter(int *array, int index){

    if(index > -1 && index < 9)
        printf("The number entered is : %d\n",array[index]);
else 
        printf("Please enter the index number in the range of 0 and 8\n");    
} 
```

# php - 致命错误：在 /Applications/XAMPP/xamppfiles/htdocs/connect/includes/functions.php 中的非对象上调用成员函数 prepare()

> ID：14349723
> 
> 赞同：-1
> 
> 时间：2013-01-16T00:53:07.033
> 
> 标签：php, sql, object, pdo

> **可能重复：**
> [范围错误 - 在非对象上调用成员函数 prepare()](https://stackoverflow.com/questions/4910796/scope-error-call-to-a-member-function-prepare-on-a-non-object)

大约 2 或 3 个月前，我在我的 Windows PC 上编写了这段代码。它运行..现在我在我的 Mac 上下载了 xampp，我收到以下错误：

**致命错误：在第 39 行的 /Applications/XAMPP/xamppfiles/htdocs/connect/includes/functions.php 中的非对象上调用成员函数 prepare()**

```
// Connect to the database
    try {
        $pdo = new PDO('mysql:host=localhost;dbname=mo33', 'root', '');
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    }catch (PDOException $e){
        $error = "There was an issue connecting to the database: \n" + $e->getMessage();
        include 'html/error.html.php';
        exit();
    }

function renderTimeline(){

        try {
            $sql = 'SELECT user_publications.id, user.firstname, user.lastname, user.thumbnail, article, date_added
                    FROM user_publications INNER JOIN user 
            ON user_id = user.id 
            ORDER BY user_publications.id DESC';
            $s = $pdo->prepare($sql);   ---------------------------LINE 39--------------- 
            $result = $pdo->query($sql);
        }catch(PDOException $e){
            $output = 'There was an error while finding posts in the database..: ' . $e->getMessage();
            include 'html/error.html.php';
            exit();
        }

        while($row = $result->fetch()) {
            $user_publications[] = array(
        'id'=>$row['id'], 
        'name'=>$row['firstname'] + " " + $row['lastname'], 
        'thumbnail'=>$row['thumbnail'], 
        'article'=>$row['article'], 
        'date'=>$row['date_added']);
        }
        foreach ($user_publications as $post) {
            renderUserPublication($post['id'], $post['name'], $post['thumbnail'], $post['article'], $post['date']);
        }

        return;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:09:37.593

像这样传递对象你的函数

```
function renderTimeline($pdo){ 
```

在你的代码中

```
$pdo = new pdo();
renderTimeline($pdo); 
```

# java - 将输入发送到标准输入并在 Java 中获取完整输出 - Festival TTS

> ID：14349727
> 
> 赞同：1
> 
> 时间：2013-01-16T00:53:43.163
> 
> 标签：java, linux, terminal, text-to-speech, festival

我正在尝试使用 Java Runtime.getRuntime().exec(String) 命令运行 Festival，然后使用 OutputStreamWriter 将一些命令写入进程的输出流。

这很好用，我可以做这样的事情：

```
Process p = Runtime.getRuntime().exec("festival");
Writer w = new OutputStreamWriter(p.getOutputStream());
w.append("(SayText \"Hello World\")");
w.flush(); 
```

显然，我可以告诉它的方式是它通过扬声器说出文本。

我真正困难的是从终端中看到的文本输出。我正在尝试运行一些其他输出文本的命令（例如（voice.list）），大概是到stdout。

例如，我尝试通过以下方式使用 BufferedReader：

```
BufferedReader reader = new BufferedReader (new InputStreamReader(p.getInputStream()));
w.append("(voice.list)");
w.flush();

String output = "";
String line = reader.readLine();
System.out.println(line);

while ((line = reader.readLine()) != null)
{
  System.out.println("Reading: " + line);
  output += line;
} 
```

（System.out.println 仅用于调试，如果我能够让它工作，我会以更简洁的方式完成整个工作。）

无论我尝试什么代码，我都无法从 Festival 获得任何输出。我可以从其他命令中获取输出。EG 我也尝试过这段代码[http://en.allexperts.com/q/Java-1046/2008/2/Runtime-getRuntime-exec-cmd.htm](http://en.allexperts.com/q/Java-1046/2008/2/Runtime-getRuntime-exec-cmd.htm)它适用于许多其他命令（如`ls`）但不适用于 Festival .

有什么知道我将如何使它工作的吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:35:28.567

Festival 可能会在 stderr 而不是 stdout 上输出它的文本。尝试更换

```
p.getInputStream() 
```

和

```
p.getErrorStream() 
```

# function - 将结构作为参数传递给函数

> ID：14349729
> 
> 赞同：0
> 
> 时间：2013-01-16T00:53:49.217
> 
> 标签：function, pointers, parameters, struct, arguments

我是 C++ 编程的初学者，我想知道如何使用 cin 将结构作为参数传递给函数。

代码的想法是从用户输入结构的名称，并将该名称传递给函数。这是我一直在玩的东西：

```
 class myPrintSpool
    {
    public:
        myPrintSpool();
        void addToPrintSpool(struct file1);
    private:
        int printSpoolSize();
        myPrintSpool *printSpoolHead;
    };

    struct file1
   {
        string fileName;
        int filePriority;
        file1* next;

   };

    int main()
    {
        myPrintSpool myPrintSpool; 
        myPrintSpool.addToPrintSpool(file1);
    return 0; 
    } 
```

这是能够建造的。但是，我想要更多的东西：

```
 class myPrintSpool
    {
    public:
        myPrintSpool();
        void addToPrintSpool(struct fileName);
    private:
        int printSpoolSize();
        myPrintSpool *printSpoolHead;
    };

    struct file1
   {
        string fileName;
        int filePriority;
        file1* next;

   };

    int main()
    {
        string fileName; 
        cout << "What is the name of the file you would like to add to the linked list?"; 
        cin >> fileName; 

        myPrintSpool myPrintSpool; 
        myPrintSpool.addToPrintSpool(fileName);
    return 0; 
    } 
```

任何人都可以帮助我如何去做吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T00:58:51.753

一般来说，这种元编程在 C++ 中是非常先进的。*原因是，与解释语言不同，源文件*中存在的大部分内容在文件编译时都会丢失。在可执行文件中，字符串`file1`可能根本不显示！（我相信它取决于实现）。

相反，我建议进行某种查找。例如，您可以将在 fileName 中传入的字符串与每个结构的 进行比较`fileName`，或者，您可以将任何键与您的结构相关联。例如，如果您创建了 a`std::map<string, baseStruct*>`并从 继承了所有结构（例如 file1、file2、...）`baseStruct`，那么您可以在映射中查找与传入字符串关联的结构。继承很重要，因为您需要多态性才能将不同类型的结构插入到映射中。

我们可以讨论许多其他更高级的主题，但这是总体思路。进行某种查找而不是尝试在运行时从字符串实例化类型是最简单的。[这](http://www.cs.sjsu.edu/~pearce/modules/lectures/oop/types/reflection/prototype.htm)是一种更严格、更易于维护的方法来做基本相同的事情。

编辑：如果你的意思是你只有一种名为'file1'的结构并且你想实例化它并将它传递给addToPrintSpool，这与我之前的答案不同（例如，如果你想要多个名为file1的结构和 file2 并想推断要使用哪个结构。从字符串中动态找出*类型*很难，但在*已知类型*的实例中设置字符串很简单。）

要实例化和使用您的实例，`file1`可以这样做：

```
//In myPrintSpool, use this method signature.
//You are passing in an object of type file1 named aFile;
//note that this object is _copied_ from someFile in your
//main function to a variable called aFile here.
void addToPrintSpool(file1 aFile);
...
int main()
{
    string fileName; 
    cout << "What is the name of the file you would like to add to the linked list?"; 
    cin >> fileName; 

    //Instantiate a file1 object named someFile, which has all default fields.
    file1 someFile;
    //Set the filename of aFile to be the name you read into the (local) fileName var.
    someFile.fileName = fileName;

    myPrintSpool myPrintSpool; 
    //Pass someFile by value into addToPrintSpool
    myPrintSpool.addToPrintSpool(someFile);
    return 0; 
} 
```

# file - 从文件中截断 NUL 字节

> ID：14349733
> 
> 赞同：1
> 
> 时间：2013-01-16T00:54:33.400
> 
> 标签：file, bash

我有大约 500 个带有尾随 NUL 字节的文件，可能是用

```
truncate -s 8M <file> 
```

我怎样才能切断零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:59:04.703

这个 perl 脚本应该这样做：

```
for f in *; do
    perl -e '$/=undef;$_=<>;s|\0+$||;print;' < $f > $f_fixed
done 
```

这会将所有 NUL 保留在文件中，最后删除任何 NUL，并将结果保存到`<original filename>_fixed`.

脚本解释： `$/=undef`告诉perl对整个文件进行操作，而不是把它分成几行；`$_=<>`加载文件；`s|\0+||`删除加载文件“字符串”末尾的任何 NUL 字符串；并`print`输出结果。其余的是标准 Bash 文件重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:17:38.287

如果文件是“文本”文件而不是“二进制”文件，你可以简单地做

```
strings a.txt > b.txt 
```

[**参考**](http://linux.die.net/man/1/strings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:32:30.573

使用[tr](http://en.wikipedia.org/wiki/Tr_%28Unix%29)：

```
cat $input_file | tr -d '\0' > $output_file 
```

注意`$input_file`和`$output_file`必须不同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T01:55:54.943

对于这种特殊情况，实际上没有任何 Unix 工具。这是一个 Python (3) 脚本：

```
import sys

for fn in sys.argv[1:]:
    with open(fn, 'rb') as f:
        contents = f.read()
    with open(fn, 'wb') as f:
        f.write(contents.rstrip(b'\0')) 
```

运行为：

```
python retruncate.py file1 file2 files* etc... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T01:40:37.750

按照@Eevee 的建议，您实际上可以避免截断8M 以下的文件。在您的循环中使用以下条件，并且`truncate`如果您不将任何后缀附加到 size 参数，将假定字节为默认值，这不会填充 8M 以下的文件：

```
for file in $(ls -c1 directory); do
    # ... 

    SIZE=$(stat -c%s $file)
    LIMIT=$((8 * 1024 * 1024))
    if [ "$SIZE" -lt "$LIMIT" ]; then
        truncate -s $SIZE $file
    else 
        truncate -s 8M $file
    fi

    # ...
done 
```

# c# - 在运行时设置 ConnectionString

> ID：14349734
> 
> 赞同：4
> 
> 时间：2013-01-16T00:54:35.750
> 
> 标签：c#, connection-string

我是 C# 编程的初学者。

我需要编辑/设置/更改我存储在我的连接字符串，`app.config`我正在使用 VS 数据库向导来创建查询。

如果你能写代码，那就太好了:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T01:20:19.153

这样的事情应该让你开始：

```
using System.Configuration;

var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
var connectionStrings = config.ConnectionStrings;
foreach (var connectionString in connectionStrings.ConnectionStrings)
{
    // change connection details
}
config.Save(ConfigurationSaveMode.Modified); 
```

# x86 - 为什么要将 EAX、ESP 和指令 sub、push 和 pop 汇编成 ASCII 字符？

> ID：14349735
> 
> 赞同：-5
> 
> 时间：2013-01-16T00:54:42.340
> 
> 标签：x86, ascii

为什么要将 EAX、ESP 和指令 sub、push 和 pop 汇编成 ASCII 字符？

例如：

'%' 表示“和 EAX”

'-' 表示“子 EAX”

'P' 表示“推 EAX”

'X' 表示“流行 EAX”

'T' 表示“推 ESP”

'\' 表示“流行 ESP”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:18:58.587

如果我没看错问题：因为它们是操作码，恰好与 ASCII 表中的那些字符相同。

查看：[http](http://ref.x86asm.net/coder32.html) ://ref.x86asm.net/coder32.html 并转到 AND eAX，您会注意到在左侧的深灰色列中，它表示该助记符的操作码是 25（十六进制）。

如果您然后查看 ASCII 表（例如[http://www.asciitable.com/](http://www.asciitable.com/)），并查看 25 hex 是什么字符，它将是`%`.

关于为什么提出这个问题的进一步猜测：在某些情况下，可能需要能够提供可键入 ASCII 的程序。第一个可能类似于 EICAR 防病毒测试字符串：

```
X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H* 
```

其中，如果输入记事本，保存为COM文件（如eicar.com），然后运行，它会打印`EICAR-STANDARD-ANTIVIRUS-TEST-FILE!`。这使得粘贴到程序、电子邮件等中变得相当简单，以确保防病毒软件正常工作。

另一个用途是为基于缓冲区溢出的攻击编写 shellcode，同样是为了便于键入和转义。如果您想了解更多详细信息，我会咨询[http://projectshellcode.com/?q=node/12](http://projectshellcode.com/?q=node/12)之类的内容以了解此过程的概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:08:21.560

这是因为它们共享编码。

# javascript - 如何计算我的页面上有多少个相同 id 的跨度？

> ID：14349737
> 
> 赞同：0
> 
> 时间：2013-01-16T00:54:55.880
> 
> 标签：javascript, jquery

我有这个 html 代码：

```
<span id="post"></span>
<span id="post"></span>
<span id="post"></span>
<span id="post"></span>
<span id="post"></span>
<span id="post"></span>
<span id="post"></span>
<span id="post"></span>
<span id="post"></span>
<span id="post"></span> 
```

`id="post"`我想计算我的页面中有多少跨度。当我尝试使用时`.length`，`alert`我得到`1` 了这样做的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:56:08.867

您可能想要使用`class`而不是`id`.

喜欢：

```
<span class="post"></span>
<span class="post"></span>
<span class="post"></span>
<span class="post"></span>
<span class="post"></span>
<span class="post"></span>
<span class="post"></span>
<span class="post"></span>
<span class="post"></span>
<span class="post"></span> 
```

和

```
alert($('span.post').length); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T00:57:52.327

ID 必须是唯一的。尝试改用类。然后你可以这样做：

```
alert(document.getElementsByClass("post").length);

// or jQuery
alert($(".post").size()); 
```

这会给你正确的跨度数量。

# magento - 如何在 Magento 中分析 cron 任务

> ID：14349738
> 
> 赞同：1
> 
> 时间：2013-01-16T00:55:08.667
> 
> 标签：magento, cron, profiler

我在 Magento 中有一个 cron 任务，我需要对其进行分析以确定内存使用问题。该脚本在夜间运行，并在半小时左右后由于消耗所有可用内存而崩溃。

我需要分析脚本以确定哪些函数消耗了太多内存。

我曾尝试使用[Aoe_Profiler](http://www.fabrizio-branca.de/magento-profiler.html)，但在尝试分析 cron 任务时，无处可查看输出，因为 cron 任务不调用 MVC，因此无法呈现分析器的视图块。

如何在 Magento 中分析 cron 任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:55:08.667

我们在从命令行运行和调试/测试 cron 脚本时不时使用的“技巧”是将`cron.php`位于 Magento 应用程序的根文件夹中的脚本复制到代表您希望执行的 cron 任务的新脚本中，例如`xyz_cron_task.php`。

该脚本的底部是一个`try/catch`块：

```
try {
    Mage::getConfig()->init()->loadEventObservers('crontab');
    Mage::app()->addEventArea('crontab');
    Mage::dispatchEvent('default');
} catch (Exception $e) {
    Mage::printException($e);
} 
```

这可以更改如下，只运行您感兴趣的 cron 任务：

```
try {
    Mage::getModel('your_module/cron')->yourCronTask();
} catch (Exception $e) {
    Mage::printException($e);
} 
```

现在可以从命令行或浏览器执行 cron 任务。您可以访问该页面`http://yourdomain/xyz_cron_task.php`，然后将执行 cron 任务（尽管您还不会看到任何有趣的东西）。

要使分析工作（假设您已经在管理部分启用了分析），请在之后添加以下代码`require 'app/Mage.php';`：

```
Varien_Profiler::enable(); // This enables profiling
Mage::setIsDeveloperMode(true); // This allows you to see exceptions etc, but not stricly required. 
```

这将启用分析，但您仍然不会看到分析器输出，因为没有视图模型来渲染它。

您可以通过在块中添加一行来输出分析器块`try/catch`，如下所示：

```
try {
    Mage::getModel('harmony/cron')->importProductsAndStock();

    // The following line outputs the profiler block.
    echo Mage::app()->getLayout()->createBlock("core/profiler")->toHtml();
} catch (Exception $e) {
    Mage::printException($e);
} 
```

您现在应该看到分析器输出如下（假设您使用的是[Aoe_Profiler](http://www.fabrizio-branca.de/magento-profiler.html)扩展）：

![在此处输入图像描述](../Images/84763ef5f268e3241284fa6d05a3ebd6.png)

现在您可以根据需要`Varien_Profiler::start()/stop()`为您的 cron 任务添加适当的代码。

快乐的剖析！

# kendo-ui - KendoMobile ui 模板不渲染 css 如何在视图中使用 kendo stylng 渲染模板？

> ID：14349746
> 
> 赞同：2
> 
> 时间：2013-01-16T00:55:48.760
> 
> 标签：kendo-ui

基本上，模板不会使用 ScrollView 渲染，`kendo.render(template, response)`但可以使用`content = template(response)`- 但是这在视图中没有样式 - 请参阅下面的评论

如何在视图中使用 kendo stylign 渲染模板？

来自 api 调用的 BTW 响应是 JSON：

{"event_id":"5","stamp":"2013-01-24 06:00:00","type":"事件类型","loc":"位置","状态":"1" }

```
<!-- eventDetail view -------------------------------------------------------------------------------------------------->
    <div data-role="view" id="view-eventDetail" data-show="getEventDetailData" data-title="eventDetail">
        <header data-role="header">
            <div data-role="navbar">
                <span data-role="view-title"></span>
                <a data-align="right" data-role="button" class="nav-button" href="#view-myEvents">Back</a>
            </div>
        </header>
        <div id="eventDetail" data-role="page"></div>
    </div>

    <script id="eventDetail-template" type="text/x-kendo-template">
        --><form id="addEventForm"><p>
        <input name="event_type" id="event_type" data-min="true" type="text" value="#= type #" />
        </p>
        <p>         
        <input name="event_loc" id="event_loc" data-min="true" type="text" value="#= loc #" />
        </p>
        <p>         
        <input name="event_date_time" id="event_date_time" data-min="true" type="datetime" value="#= stamp#" />
        </p>
        <p>
        Share this
        <input data-role="switch" id="event_share" data-min="true" checked="checked" value="1"/></p>
        <p>
        <input type="button" id="eventCancelButton" style="width:30%" data-role="button" data-min="true" value="Cancel" />
        <input type="submit" id="eventDoneButton" style="width:30%" data-role="button"  data-min="true" value="Done" />
        </p></form><!--
    </script>

    <script>

        //eventDetail engine
        function getEventDetailData(e) {
            $.ajax({
                url: 'http://localhost/mpt/website/api/event_details.php?',
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: { userID: 2, eventID: e.view.params.id },

                success: function(response) {

                    console.log(response);

                    var template = kendo.template($("#eventDetail-template").html()),
                    content = template(response);//works but no kendo css
                    //content = kendo.render(template, response);not working

                    $("#eventDetail")
                    .kendoMobileScrollView()
                    .data("kendoMobileScrollView")
                    .content("<!--" + content + "-->");
                }
            });
        }</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:47:18.223

`km-button`在小部件初始化之前，不会添加小部件类（如）。

`template()`and函数只是将模板作为字符串返回，`render()`并替换了数据（将 #=foo# 替换为 foo 属性的值），但不会初始化所有小部件。事实上，如果它想烧写它只是返回一个文本字符串，而不是 DOM 元素，它不会初始化小部件。小部件的初始化通常由使用模板的父小部件完成。

* * *

`render()`在您的情况下不起作用，因为它的第二个参数应该是一个数组。它所做的只是对数组中的每个项目调用一次给定的模板函数并连接结果。如果您改为这样做：

```
var content = kendo.render(template, [response]); // wrap response in an array 
```

它将返回与`template(response)`. 它只是提供了一种将相同模板一次应用于许多项目的方法。

* * *

通常，当您创建一个小部件时，在您调用的情况下，`.kendoMobileScrollView()`您希望它也将该元素的任何 HTML 内容转换为小部件，但看起来 ScrollView 小部件并没有这样做。我认为它的意图可能是只显示静态内容页面，而不是其他小部件。

* * *

文档中没有列出一个 Kendo 方法，`kendo.mobile.init(contents);`您可以使用它来将模板字符串转换为小部件。当我在 jsFiddle 中尝试它时，它给我带来了一些错误，但你可以尝试类似：

```
var content = template(response); // apply response to template
var contentElements = $(content); // turn the string into DOM elements
kendo.mobile.init(contentElements); // turn elements into widgets (this throws error for me)
$("#eventDetail").html(contentElements); // add contents to the desired element
$("#eventDetail").kendoMobileScrollView(); // create the scroll view 
```

* * *

另外，模板末端的 end 和 begin 注释位是什么？我不明白为什么需要这些。删除它们可能会更好。

* * *

ScrollView 小部件应该将一系列`<div>`元素作为其子元素。然后，当您在控件上向左/向右滑动时，它会在它们之间翻页。我没有看到您在任何地方添加一系列`<div>`s 。

# php - “此页面有重定向循环”的可能原因是什么？

> ID：14349748
> 
> 赞同：0
> 
> 时间：2013-01-16T00:55:53.017
> 
> 标签：php, yii

我在一个页面中添加了这个脚本，当用户应该购买该项目时，它需要重定向页面

```
if($servertime >= $itemtime && $model->isActive()){
    header("Location: ". $redirectpage);
    exit();
} 
```

错误只发生在早上，我不知道是什么导致了错误，当我检查错误日志时，我只能看到一个巨大的 yii 转储，上面有这个可读的文字说

```
Unable to resolve request 
```

有任何想法吗 ？

# c++ - ifstream 读取文件...需要帮助

> ID：14349750
> 
> 赞同：-2
> 
> 时间：2013-01-16T00:56:03.923
> 
> 标签：c++, ifstream

抱歉最后一个帖子没有回复；我去睡觉了，忘记发布完整的代码；虽然我仍然很抱歉没有回答。

问题在于函数“bool readFile()”，如果第二次使用，我的程序会崩溃。

我不知道如何修复此崩溃，希望能帮助我编辑我的代码。

谢谢。

```
#include "basic.h"
#include "file.h"
#include "initialize.h"
#include "macros.h"
#include "values.h"
#include <map>
#include <string>
#include <fstream>
#include <iostream>
#include <winbase.h>
#include <iomanip>
#include <locale>
#include <sstream>

#pragma region Global Variables

EXTERN_C IMAGE_DOS_HEADER __ImageBase;

static enum StringValue { evS1, evS2, evS3, evS4, evS5, evS6, evS7, evS8, evS9, evS10, evS11, evS12, evS13, evS14, evS15, evS16, evS17, evS18, evS19, evS20, evS21, evS22, evS23, evS24, evS25, evS26, evS27, evS28, evS29, evS30, evS31, evS32, evS33, evS34, evS35, evS36, evS37, evS38, evS39, evS40, evS41, evS42, evS43, evS44, evS45};

static std::map<std::string, StringValue> s_mapStringValues;

static char Input[_MAX_PATH];

string Line[4];

int Temporary;

#pragma endregion

string retrievePath()
{
    LPTSTR strDLLPath1 = new TCHAR[_MAX_PATH];
    ::GetModuleFileName((HINSTANCE)&__ImageBase, strDLLPath1, _MAX_PATH);
    string::size_type pos = string(strDLLPath1).find_last_of("\\/");
    std:: string strRet = string(strDLLPath1).substr(0, pos);
    return strRet;
}

void initializeKeys()
{
    s_mapStringValues["0"] = evS1;
    s_mapStringValues["1"] = evS2;
    s_mapStringValues["2"] = evS3;
    s_mapStringValues["3"] = evS4;
    s_mapStringValues["4"] = evS5;
    s_mapStringValues["5"] = evS6;
    s_mapStringValues["6"] = evS7;
    s_mapStringValues["7"] = evS8;
    s_mapStringValues["8"] = evS9;
    s_mapStringValues["9"] = evS10;

    s_mapStringValues["A"] = evS11;
    s_mapStringValues["B"] = evS12;
    s_mapStringValues["C"] = evS13;
    s_mapStringValues["D"] = evS14;
    s_mapStringValues["E"] = evS15;
    s_mapStringValues["F"] = evS16;
    s_mapStringValues["G"] = evS17;
    s_mapStringValues["H"] = evS18;
    s_mapStringValues["I"] = evS19;
    s_mapStringValues["J"] = evS20;

    s_mapStringValues["K"] = evS21;
    s_mapStringValues["L"] = evS22;
    s_mapStringValues["M"] = evS23;
    s_mapStringValues["N"] = evS24;
    s_mapStringValues["O"] = evS25;
    s_mapStringValues["P"] = evS26;
    s_mapStringValues["Q"] = evS27;
    s_mapStringValues["R"] = evS28;
    s_mapStringValues["S"] = evS29;
    s_mapStringValues["T"] = evS30;

    s_mapStringValues["U"] = evS31;
    s_mapStringValues["V"] = evS32;
    s_mapStringValues["W"] = evS33;
    s_mapStringValues["X"] = evS34;
    s_mapStringValues["Y"] = evS35;
    s_mapStringValues["Z"] = evS36;

    s_mapStringValues["SHIFT"] = evS37;
    s_mapStringValues["CTRL"] = evS38;
    s_mapStringValues["ALT"] = evS39;
    s_mapStringValues["PAGE UP"] = evS40;
    s_mapStringValues["PAGE DOWN"] = evS41;
    s_mapStringValues["END"] = evS42;
    s_mapStringValues["HOME"] = evS43;
    s_mapStringValues["INS"] = evS44;
    s_mapStringValues["DEL"] = evS45;
}

void mapKeys()
{
    switch(s_mapStringValues[Input])
    {
      case evS1:
          Temporary = 0x30;
        break;
      case evS2:
          Temporary = 0x31;
        break;
      case evS3:
          Temporary = 0x32;
        break;
      case evS4:
          Temporary = 0x33;
        break;
      case evS5:
          Temporary = 0x34;
        break;
      case evS6:
          Temporary = 0x35;
        break;
      case evS7:
          Temporary = 0x36;
        break;
      case evS8:
          Temporary = 0x37;
        break;
      case evS9:
          Temporary = 0x38;
        break;
      case evS10:
          Temporary = 0x39;
        break;
      case evS11:
          Temporary = 0x41;
        break;
      case evS12:
          Temporary = 0x42;
        break;
      case evS13:
          Temporary = 0x43;
        break;
      case evS14:
          Temporary = 0x44;
        break;
      case evS15:
          Temporary = 0x45;
        break;
      case evS16:
          Temporary = 0x46;
        break;
      case evS17:
          Temporary = 0x47;
        break;
      case evS18:
          Temporary = 0x48;
        break;
      case evS19:
          Temporary = 0x49;
        break;
      case evS20:
          Temporary = 0x4A;
        break;
      case evS21:
          Temporary = 0x4B;
        break;
      case evS22:
          Temporary = 0x4C;
        break;
      case evS23:
          Temporary = 0x4D;
        break;
      case evS24:
          Temporary = 0x4E;
        break;
      case evS25:
          Temporary = 0x4F;
        break;
      case evS26:
          Temporary = 0x50;
        break;
      case evS27:
          Temporary = 0x51;
        break;
      case evS28:
          Temporary = 0x52;
        break;
      case evS29:
          Temporary = 0x53;
        break;
      case evS30:
          Temporary = 0x54;
        break;
      case evS31:
          Temporary = 0x55;
        break;
      case evS32:
          Temporary = 0x56;
        break;
      case evS33:
          Temporary = 0x57;
        break;
      case evS34:
          Temporary = 0x58;
        break;
      case evS35:
          Temporary = 0x59;
        break;
      case evS36:
          Temporary = 0x5A;
        break;
      case evS37:
          Temporary = 0x10;
        break;
      case evS38:
          Temporary = 0x11;
        break;
      case evS39:
          Temporary = 0x12;
        break;
      case evS40:
          Temporary = 0x21;
        break;
      case evS41:
          Temporary = 0x22;
        break;
      case evS42:
          Temporary = 0x23;
        break;
      case evS43:
          Temporary = 0x24;
        break;
      case evS44:
          Temporary = 0x2D;
        break;
      case evS45:
          Temporary = 0x2E;
        break;
      default:
        break;
    }
}

bool readFile()
{
    int lineCounter = 0;

    string fileLine;

    string configurationLocation = retrievePath() + "\\configuration";

    ifstream configurationFile;

    configurationFile.open(configurationLocation + ".config");

    if (!configurationFile)
    {
        return false;
    }
    else
    {
        while (getline(configurationFile, fileLine))
        {
            Line[lineCounter] = fileLine;
            DebugPrintA(Line[lineCounter].c_str());
            lineCounter++;
        }
    }
    configurationFile.close();
    return true;
}

bool assignKeys()
{
    if (Line[0] != "attack:")
    {
        string Line0 = Line[0].substr(Line[0].find(':') + 1);

        int TempLine0 = Line0.size();

        for (int a = 0; a <= TempLine0; a++)
        {
            Input[a] = Line0[a];
        }

        mapKeys();

        keys[attackKey] = Temporary;
    }
    else
    {
        keys[attackKey] = NULL;
    }

    if (Line[1] != "range:")
    {
        string Line1 = Line[1].substr(Line[1].find(':') + 1);

        if (Line1 == "melee")
        {
            rangeX = 0;
            rangeY = 0;
        }
        else
        {
            rangeX = 30;
            rangeY = 0;
        }
    }
    else
    {
        rangeX = 0;
        rangeY = 0;
    }

    if (Line[2] != "health: ;")
    {
        string Line2Temp = Line[2];

        string Line2 = Line[2].substr(Line[2].find(':') + 1);

        int Index1 = Line2.find(';');

        if (Index1 > 0)
        {
            Line2 = Line2.substr(0, Index1);
            healthValue = atoi(Line2.c_str());
        }

        string Line22 = Line2Temp.substr(Line2Temp.find(';') + 1);

        int TempLine2 = Line22.size();

        for (int a = 0; a <= TempLine2; a++)
        {
            Input[a] = Line22[a];
        }

        mapKeys();

        keys[healthKey] = Temporary;
    }
    else
    {
        keys[healthKey] = NULL;
    }

    if (Line[3] != "mana: ;")
    {
        string Line3Temp = Line[3];

        string Line3 = Line[3].substr(Line[3].find(':') + 1);

        int Index2 = Line3.find(';');

        if (Index2 > 0)
        {
            Line3 = Line3.substr(0, Index2);
            manaValue = atoi(Line3.c_str());
        }

        string Line33 = Line3Temp.substr(Line3Temp.find(';') + 1);

        int TempLine3 = Line33.size();

        for (int a = 0; a <= TempLine3; a++)
        {
            Input[a] = Line33[a];
        }

        mapKeys();

        keys[manaKey] = Temporary;
    }
    else
    {
        keys[manaKey] = NULL;
    }

    if (Line[4] != "delay:")
    {
        string Line4 = Line[4].substr(Line[4].find(':') + 1);

        kamiDelay = atoi(Line4.c_str());
    }
    else
    {
        kamiDelay = 500;
    }

    if (keys[attackKey] != NULL && keys[healthKey] != NULL && keys[manaKey] != NULL)
    {
        Line[0].clear();
        Line[1].clear();
        Line[2].clear();
        Line[3].clear();
        Line[4].clear();
        return true;
    }
    else
    {
        Line[0].clear();
        Line[1].clear();
        Line[2].clear();
        Line[3].clear();
        Line[4].clear();
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:10:33.790

在您的`assignKeys()`功能中，您访问`Line[4]`. 但是`Line`数组只有4个元素，所以只能安全`Line[0]`访问`Line[3]`。访问`Line[4]`可能会使您的程序崩溃。

此外，如果您的配置文件超过 4 行，则`Line[lineCounter] = fileLine;`in 中的语句`readFile()`将访问`Line`超出范围的数组元素。所以你也必须在`while`循环中添加一些边界检查。

更好的选择可能是使用`std::vector<std::string>`. 然后你可以简单地在循环中`push_back(...)`的元素。在访问它的任何元素之前，您必须检查向量的大小。`while``readFile()``assignKeys()`

# arduino - 重入代码？

> ID：14349755
> 
> 赞同：1
> 
> 时间：2013-01-16T00:56:31.160
> 
> 标签：arduino

我正在使用[Wire 库](http://arduino.cc/en/Reference/Wire)将一些数据从[屏蔽](http://www.arduino.cc/en/Main/ArduinoShields)移动到 Arduino。

屏蔽*总是*输出 36 个字节（GPS 设备），但 Arduino 看到两个数据传输加起来总共 36 个字节。每次传输的计数并不总是相同，但总是总共 36 个字节。`setup()`每次数据进入时都会重新运行该例程。

就好像图书馆正在重新进入 Arduino 应用程序并把它搞砸。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T08:01:42.217

如果`setUp()`每次数据进入时都在运行（您确定吗？），那么这意味着 Arduino 出于某种原因正在重置/重新启动。您如何为 GPS 防护罩供电？如果它使 Arduino 的电源出现故障（可能消耗太多电流），那么这可能会导致复位。也可能是您的代码占用了太多内存。我先看看电源问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T12:29:55.267

如果您使用`Wire.available`，请注意它不保证它会返回发送的字节数。您将需要反复调用它，直到它返回零。

[请参阅Arduino 文档](http://arduino.cc/en/Reference/WireRead)中的示例。

# java - Java - 读取 PHP 网页生成的数据时出错

> ID：14349764
> 
> 赞同：0
> 
> 时间：2013-01-16T00:57:05.637
> 
> 标签：java, php, urlconnection

全部。

我正在测试我的 Java 代码以从 PHP 网页获取天气数据（http://www.agroclimate.org/howard/GDD/getFAWNDailyData.php?loc=490&frommonth=6&fromday=26&fromyear=2009&tomonth=7&today=7&toyear=2009 ）。

我的代码在我的计算机（win7、jre6 和 jre7）上运行良好。当我在网络浏览器（explorer9，chrome）中访问上述链接时，浏览器会下载“getFAWNDailyData.php”页面本身，而不是运行它。

我的问题是代码在其他具有类似规格的计算机（win7、jre6 和 jre7）上不起作用。该代码试图读取 php 页面源本身，而不是页面生成的数据。而且，它的网络浏览器（explorer9、chrome）也像我的一样下载页面本身。

我找不到两台计算机之间的任何区别，并且无法在其他计算机上生成错误。

你能提供任何我可以检查的线索吗？

这是我的代码；

```
try {
    url = new URL(
            "http://www.agroclimate.org/howard/GDD/getFAWNDailyData.php?loc=490&frommonth=6&fromday=26&fromyear=2009&tomonth=7&today=7&toyear=2009");

    URLConnection urlConn = url.openConnection();

    InputStream is = urlConn.getInputStream();
    InputStreamReader reader = new InputStreamReader(is);
    BufferedReader bf = new BufferedReader(reader);

    int lines = 0;
    int wind_count = 0, airtemp_count = 0;

    // et starts from the 2nd line
    String firstLine = bf.readLine(); // firstLine is "DATETIME,ET"
    System.out.print("\n" + "-----" + firstLine + "\n");

    String year = "", month = "", day = "", WindCount = "", AirTempCount = "";
    int monthNum = 0;
    String line = bf.readLine();
    System.out.print("\n" + "-----" + line + "\n");

    StringTokenizer st = new StringTokenizer(line, ",");
    if (st.hasMoreTokens()) {
        year = st.nextToken();
    }
    if (st.hasMoreTokens()) {
        month = st.nextToken();
        String[] values = month.split(" ");
        day = values[0].substring(1);
        year = values[2].replace('"', ' ');
        year = year.trim();
        month = values[1].trim();
        monthNum = getMonthValue(month);
    }

    System.out.println("year---:[" + year + "]");
    System.out.println("month---:[" + month + "]");
    System.out.println("day---:[" + day + "]");
} catch (MalformedURLException me) {
    me.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    if (is != null)
        try {
            is.close();
        } catch (IOException e) {
            ;
        }
} 
```

谢谢。

# java - java Scanner 类的 nextLine() 问题

> ID：14349767
> 
> 赞同：0
> 
> 时间：2013-01-16T00:57:17.340
> 
> 标签：java

```
import java.util.Scanner;

public class b {

    public static void main(String[] args){

        Scanner keyboard = new Scanner(System.in);
        String[] lines = new String[5];

        lines[0] = keyboard.nextLine();
        lines[1] = keyboard.nextLine();
        lines[2] = keyboard.nextLine();
        lines[3] = keyboard.nextLine();
        lines[4] = keyboard.nextLine();

        for (int i = 0; i < lines.length; i++) {
            System.out.println(lines[i]);
        }
    }
} 
```

为什么上面的代码不允许我存储以下内容：

```
Hello there
How are you
My name is
Bill Gates
What is yours? 
```

我得到的输出是：

```
Hello there
How are you
My name is

Process completed. 
```

我知道原语和 nextInt() 存在问题，但我认为 nextLine() 应该解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:03:37.607

当我运行它时，我得到了这个：

```
Hello there
How are you
My name is
Bill Gates
What is yours? 
```

正如预期的那样。

检查您没有运行旧版本的程序。还要从命令行测试您的应用程序以排除任何`IDE`格式问题。

# ios5 - ios : ios 应用程序中不同屏幕上的相同 ui 控件

> ID：14349768
> 
> 赞同：1
> 
> 时间：2013-01-16T00:57:24.983
> 
> 标签：ios5, uibutton

我对 iOS 开发相当陌生。我的要求是我正在设计一个包含 5 个屏幕的应用程序。我有一组 UI 控件（1 个 UIImageView 5 个 UIButtons 就像每个屏幕的标签栏），它们对所有屏幕都是通用的。单击按钮时，仅视图的下半部分需要更改相关细节，而按钮保持不变（类似于窗口中的选项卡控件）。

有没有办法实现这个设计？我可以在多个屏幕之间共享 UI 控件而无需重复代码吗？或者有没有办法在单击按钮时仅更改屏幕的下半部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:25:24.627

你可以有一个单独的类来创建你的 UIControls，然后为每个视图控制器调用适当的方法来获取你想要的 UIControls。

```
@interface UIControlMaker : NSObject{

    id controlmakerDelegate; // This is so that you can send messages to the viewcontrollers 
}
@property (nonatomic,retain) id controlmakerDelegate; // Release it in dealloc method

- (id)initWithDelegate:(id)delegate;
- (UIView *)createCommonUIControls; 
```

在实现文件中

```
@implementation UIControlMaker

@synthesize controlmakerDelegate;

- (id)initWithDelegate:(id)delegate{

    if(self = [super init]){
        [self setControlMakerDelegate:delegate];
        return self;
    }else
        return nil;
}

- (UIView *)createCommonUIControls{

      UIView *uicontrolsHolder = [[UIView alloc] initWithFrame:CGRectMake(2,40,320,50)];

      // Create as many uicontrols as you want. It'd be better if you have a separate class to create them

     // Let's create a button for the menuItem
    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0 , 0, 50, 35)];
    button.backgroundColor = [UIColor clearColor];
    [button setTitle:@"Button 1" forState:UIControlStateNormal];
    [button addTarget:controlmakerDelegate action:@selector(buttonOnClick) forControlEvents:UIControlEventTouchUpInside];

      [uicontrolsHolder addView:button];
      [button release];

      // Add more uicontrols here

      retun [uicontrolsHolder autorelease];
} 
```

然后在您的视图控制器中创建一个 UIControlMaker 实例并调用 createCommonUIControls 方法，该方法将返回一个您可以添加到您的视图控制器的视图。希望这很清楚。

# numpy - numpy和scipy中的指数衰减曲线拟合

> ID：14349771
> 
> 赞同：6
> 
> 时间：2013-01-16T00:57:31.173
> 
> 标签：numpy, scipy, curve-fitting, least-squares, exponential

我在将曲线拟合到某些数据时遇到了一些麻烦，但无法弄清楚我哪里出错了。

在过去，我使用**numpy.linalg.lstsq**来完成指数函数，使用**scipy.optimize.curve_fit**来完成 sigmoid 函数。这一次，我希望创建一个脚本，让我指定各种函数、确定参数并测试它们与数据的匹配度。在执行此操作时，我注意到 Scipy`leastsq`和 Numpy`lstsq`似乎为相同的数据集和相同的函数提供了不同的答案。该函数很简单`y = e^(l*x)`，并且受到约束，使得`y=1`在`x=0`。

Excel 趋势线与 Numpy`lstsq`结果一致，但由于 Scipy`leastsq`能够采用任何功能，因此最好找出问题所在。

```
import scipy.optimize as optimize
import numpy as np
import matplotlib.pyplot as plt

## Sampled data
x = np.array([0, 14, 37, 975, 2013, 2095, 2147])
y = np.array([1.0, 0.764317544, 0.647136491, 0.070803763, 0.003630962,     0.001485394,     0.000495131])

# function
fp = lambda p, x: np.exp(p*x)

# error function
e = lambda p, x, y: (fp(p, x) - y)

# using scipy least squares
l1, s =  optimize.leastsq(e, -0.004, args=(x,y))
print l1
# [-0.0132281]

# using numpy least squares
l2 = np.linalg.lstsq(np.vstack([x, np.zeros(len(x))]).T,np.log(y))[0][0]
print l2
# -0.00313461628963 (same answer as Excel trend line)

# smooth x for plotting
x_ = np.arange(0, x[-1], 0.2)

plt.figure()
plt.plot(x, y, 'rx', x_, fp(l1, x_), 'b-', x_, fp(l2, x_), 'g-')
plt.show() 
```

# 编辑 - 附加信息

上面的 MWE 包括数据集的一个小样本。拟合实际数据时，**scipy.optimize.curve_fit**曲线的 R^2 为 0.82，而与 Excel 计算的**numpy.linalg.lstsq**曲线的 R^2 为 0.41。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T04:32:08.327

您正在最小化不同的误差函数。

使用时`numpy.linalg.lstsq`，最小化的误差函数为

```
np.sum((np.log(y) - p * x)**2) 
```

同时`scipy.optimize.leastsq`最小化函数

```
np.sum((y - np.exp(p * x))**2) 
```

第一种情况需要因变量和自变量之间的线性依赖关系，但解是已知的，而第二种情况可以处理任何依赖关系，但依赖于迭代方法。

在单独的说明中，~~我现在无法对其进行测试，但是~~在使用时`numpy.linalg.lstsq`，我不需要`vstack`一行零，以下也可以：

```
l2 = np.linalg.lstsq(x[:, None], np.log(y))[0][0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T01:03:25.993

稍微解释一下 Jaime 的观点，数据的任何非线性变换都会导致不同的误差函数，从而导致不同的解决方案。这些将导致拟合参数的不同置信区间。因此，您可以使用三个可能的标准来做出决定：您想要最小化哪个错误，您希望对哪些参数更有信心，最后，如果您使用拟合来预测某个值，哪种方法会在有趣的情况下产生更少的错误预测值。稍微分析一下并在 Excel 中进行分析表明，数据中不同种类的噪声（例如，如果噪声函数缩放幅度、影响时间常数或相加）会导致不同的解决方案选择。

我还要补充一点，虽然这个技巧“适用”于指数衰减到 0，但它不能用于更一般（和常见）的阻尼指数（上升或下降）到不能假定为 0 的值的情况.

# php - 如何允许用户添加另一个提交到 php 文件的输入行

> ID：14349775
> 
> 赞同：1
> 
> 时间：2013-01-16T00:58:03.500
> 
> 标签：php, jquery

我做了一个简单的 GPA（平均绩点）计算器，我只是在玩一些东西，真的很想知道如何允许用户随意添加行。我能找到的最好的例子是在这个网站上：http: [//gpacalculator.net/high-school-gpa-calculator/](http://gpacalculator.net/high-school-gpa-calculator/)

我想我可能会理解当用户单击按钮时，jquery 函数可以添加一行，但我如何获得它，所以每次有人添加一行时输入元素的名称都是不同的。php 文件如何知道 $_POST['someName'] 的名称。

所以简而言之：如何使用 jquery 添加一行，然后将该表单提交到 php 文件，使其与预制行不同。

以防万一您需要知道，我将发送到 php 文件的值存储在变量中。然后将它们输入到计算 GPA 的公式中。

编辑这里是表代码：

```
<table>
    <form id = "myform" name = "myform" method = "POST" action = "">
        <tr> 
            <th> Grade in test </th> 
            <th> Weight of grade </th> <br />
         </tr>
        <tr> <td><input type = "text" name = "grade1" /> </td> <td> <input type = "text" name = "weight1"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade2" /> </td> <td> <input type = "text" name = "weight2"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade3" /> </td> <td> <input type = "text" name = "weight3"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade4" /> </td> <td> <input type = "text" name = "weight4"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade5" /> </td> <td> <input type = "text" name = "weight5"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade6" /> </td> <td> <input type = "text" name = "weight6"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade7" /> </td> <td> <input type = "text" name = "weight7"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade8" /> </td> <td> <input type = "text" name = "weight8"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade9" /> </td> <td> <input type = "text" name = "weight9"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade10" /> </td> <td> <input type = "text" name = "weight10"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade11" /> </td> <td> <input type = "text" name = "weight11"  /> </td> </tr>
        <tr> <td><input type = "text" name = "grade12" /> </td> <td> <input type = "text" name = "weight12"  /> </td> </tr>

<tr> 
  <td> <div id = "submitButton">
          <input type = "submit" value = "SUBMIT"  style = " font-family:'HelveticaNeue-Light', 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, 'Lucida Grande', sans-serif; padding: 10px;border: none; color: white; background-color: #0499ff; width: 100%; font-size: 13px; border-radius: 5px;""/></div></td> <td> <input type = "reset"  /> </td></tr>

    </form>
    </table>
     <div id = "results2"></div>
</div> 
```

然后将 PHP 文件中的代码缩减为初始变量：

```
/* GRADES VARS */
$grade1 = $_POST['grade1'];
$grade2 = $_POST['grade2'];
$grade3 = $_POST['grade3'];
$grade4 = $_POST['grade4'];
$grade5 = $_POST['grade5'];
$grade6 = $_POST['grade6'];
$grade7 = $_POST['grade7'];
$grade8 = $_POST['grade8'];
$grade9 = $_POST['grade9'];
$grade10 = $_POST['grade10'];
$grade11 = $_POST['grade11'];
$grade12 = $_POST['grade12'];

/* GRADE WEIGHT VARS */
$weight1 = $_POST['weight1'];
$weight2 = $_POST['weight2'];
$weight3 = $_POST['weight3'];
$weight4 = $_POST['weight4'];
$weight5 = $_POST['weight5'];
$weight6 = $_POST['weight6'];
$weight7 = $_POST['weight7'];
$weight8 = $_POST['weight8'];
$weight9 = $_POST['weight9'];
$weight10 = $_POST['weight10'];
$weight11 = $_POST['weight11'];
$weight12 = $_POST['weight12']; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T01:06:49.533

所以基本上你需要使用字段名作为一个数组所以举这个例子：

```
<input type="text" name="someName[]" value="0" />
<input type="text" name="someName[]" value="2" />
<input type="text" name="someName[]" value="4" />
<input type="text" name="someName[]" value="6" /> 
```

当您执行提交并将值发布到服务器时，您将能够使用 PHP 作为数组访问它们，如下所示：

```
echo $_POST['someName'][0]; // outputs 0
echo $_POST['someName'][1]; // outputs 2
echo $_POST['someName'][2]; // outputs 4
echo $_POST['someName'][3]; // outputs 6 
```

现在，由于您不知道有多少行，您可以遍历它：

```
foreach($_POST['someName'] as $someName){
    echo $someName; //will output the value 0/2/4/6 depending on the iteration
} 
```

使用 javascript 添加按钮时，您只需要确保名称相同并带有括号：

```
$('#addButton').click(function(){
    $('.container').append('<input type="text" name="someName[]" value="someNumber" />');
}); 
```

只要您拥有它并且输入位于可以提交的表单标签内，这将起作用。

**根据您添加到初始答案中的代码进行编辑**，我建议您利用 PHP 中的数组。

因此，假设您使用我上面解释的输入（顺便说一下，这可以用于任何可以发布到后端的 HTML 元素 [复选框、输入、文本区域、选择等...]）。你可以这样做：

```
$grades = array();
foreach($_POST['grade'] as $g){
    $grades[] = $g; // add grade from each input to the array
}

// then you can manipulate the data through looping through it.
foreach($grades as $grade){
    // do something here with each grade...whether it be manipulating it
    // or adding it another array with some changes whatever.
} 
```

这应该允许你清理你的代码，你可以对你的权重做同样的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T01:04:55.123

::::::::查看代码后编辑:::::::::

你用你的代码来解决这一切都是错的。但是，如果您想使用现有代码使其正常工作，请尝试以下操作：

改变

```
<tr> <td><input type = "text" name = "grade12" /> </td> <td> <input type = "text" name = "weight12"  /> </td> </tr> 
```

到

```
<tr id="last"> <td><input type = "text" name = "grade12" /> </td> <td> <input type = "text" name = "weight12"  /> </td> </tr> 
```

那么jQuery看起来像这样：

```
$("#add-button").click(function() {
      $('#last').append("<tr><td><input type = \"text\" name = \"customgrades[\]\" /> </td> <td> <input type = \"text\" name = \"customweight[\]\"  /> </td> </tr>");
    }); 
```

然后做一个按钮或链接添加成绩

提交表单后，在 php 方面

```
$_REQUEST[customgrades];
$_REQUEST[customweight]; 
```

或者，如果您在互联网上的精英朋友想要责备您使用 $_REQUEST，即使在此应用程序中您没有理由不能使用它，您也可以使用：

```
$_POST[customgrades];
$_POST[customweight]; 
```

这两个变量将保存具有相关数据的数组。

# vim - 如何从 Vim 脚本文件手动执行组合键？

> ID：14349779
> 
> 赞同：6
> 
> 时间：2013-01-16T00:58:34.023
> 
> 标签：vim

假设我想`<C-e>`从 Vim 脚本中运行五次组合键。那可能吗？如果是这样，它是如何完成的？

* * *

具体来说，我需要这个，因为我想映射一个键以将视口在一个方向上轻推屏幕高度的四分之一。为此，我需要以某种方式将该功能`winheight(".")`与组合键结合起来。`<C-e>`

**注意：** 我知道我可以更改`'scroll'`设置行数`<C-u>`和`<C-d>`滚动的选项，但是该组合键也会移动光标。此外，我不知道如何设置`'scroll'`选项以滚动窗口高度的一部分，除了当我将其设置为 0 时它滚动窗口高度的一半。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T01:46:14.867

对于简单的命令，`:norm[al][!]`就足够了。例如，要拉出一行：

```
norm! yy 
```

对于特殊字符，使用`:exe[cute] "norm[al][!]"`. 例如，要做`5<C-e>`：

```
exe "norm! 5\<C-e>" 
```

使用`exe`，可以使用多个参数插入其他代码：

```
exe "norm!" winheight(".")/4 "\<C-e>" 
```

但是，参数是用空格连接的，然后按字面意思解释。为避免这种情况，请使用`.`连接参数。因此，为了达到预期的效果：

```
exe "norm!" winheight(".")/4 . "\<C-e>" 
```

请参阅`:help norm`和`:help exe`了解更多信息。

# python - 寻找吉他弦wav文件

> ID：14349781
> 
> 赞同：-4
> 
> 时间：2013-01-16T00:58:48.773
> 
> 标签：python, audio, signal-processing, guitar

我在 python 示例中看到了几个对名为“dist_gtr_6.wav”的吉他弦的 wav 文件的引用。

我正在研究音高估计，想知道这个和其他字符串伴奏文件是否可供下载。

这是一个参考：

[如何找到吉他弦音的基频？](https://stackoverflow.com/questions/5044289/how-to-find-the-fundamental-frequency-of-a-guitar-string-sound)

找到这个 wav 文件的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:01:34.583

我不这么认为，至少在法律上是这样。根据我的研究，该文件包含在此商业软件包中：

[http://www.wavesgtr.com/html/product_gtr3.html](http://www.wavesgtr.com/html/product_gtr3.html)

你可以在[这里](http://www.wavesgtr.com/html/buy.html)买到。

# php - Slidejs+php没有幻灯片的开始+如何创建分页参考

> ID：14349783
> 
> 赞同：1
> 
> 时间：2013-01-16T00:58:51.780
> 
> 标签：php, jquery, slideshow

我尝试将 slidejs 实现到页面。即使图像加载正确并且节目似乎开始了（我对初始幻灯片的淡入淡出效果），它也不会进入下一张。此外，我如何在分页部分为图像的动态获取创建正确的索引？这是 HTML/php 代码：

```
<div id="products">
<div class="slides_container">
 <div><img src="{$current_sale.images.default.detail.src}" alt="{$current_sale.Product.Brand.name} {$current_sale.Product.name}" /></div>
 {foreach from=$current_sale.images key=name item=images name=images}
  {if $name == 'default' || $images.mini.size != $current_sale.images.default.mini.size}
   <div><img src="{$images.mini.src}"/></div>
  {/if}
{/foreach}
</div>
<ul class="pagination2" >
{foreach from=$current_sale.images key=name item=images name=images}
 {if $name == 'default' || $images.mini.size != $current_sale.images.default.mini.size}
  <li><a href="#"><img src="{$images.mini.src}" /></a></li>
 {/if}
{/foreach}
</ul>
</div>
</div> 
```

这里是 js（在 document.ready 函数中实现）：

```
$('#products').slides({
preload: true,
effect: 'slide, fade',
.
.
. 
```

# string - 可以随机生成的简单文本/字符串互易密码 DSL？

> ID：14349787
> 
> 赞同：1
> 
> 时间：2013-01-16T00:59:17.703
> 
> 标签：string, dsl, encryption

只是玩玩，有没有 DSL

*   可以随机生成
*   操作文本或字符串并恢复它们
*   像倒数密码一样工作。例如，如果生成的函数是`F()`，对于每一个字符串`s1`，你可以得到加扰的字符串`s2 = F(s1)`。然后`G()`可以推导出另一个反转`F()`，即`G(s2) = s1`。
*   `F()`并且`G()`可以相同或不同。

还有几个额外的问题：

*   任何编程语言都可以自动推导出逆向函数？

*   并确保生成的函数`F()`是可逆的？

或者我可以从哪里开始的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:29:09.580

一个很好的起点是用于分组密码的 Feistel 网络构建。从本质上讲，它是一个从函数构建迭代分组密码的基本框架。对函数的要求很少——它只需要一个根据密钥修改一条消息的函数。无论功能是什么，密码都将起作用；但是，函数的性质会影响密码的安全性。

[http://en.wikipedia.org/wiki/Feistel_cipher](http://en.wikipedia.org/wiki/Feistel_cipher)

要回答您的其他一些问题：

> 任何编程语言都可以自动推导出逆向函数？

一般不会。特别是因为许多（大多数！）函数根本不可逆。

> 并确保生成的函数 F() 是可逆的？

使用Feistel网络建设将保证这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:00:23.490

回答我自己的问题：

[http://en.wikipedia.org/wiki/Reversible_computing](http://en.wikipedia.org/wiki/Reversible_computing)

[http://strangepaths.com/reversible-computation/2008/01/20/en/](http://strangepaths.com/reversible-computation/2008/01/20/en/)

看起来它主要是理论上的 CS，所以这种 DSL 还没有被发明出来。

到目前为止prolog可以做可逆功能

# javascript - 手风琴中的下拉菜单，想要在不改变手风琴面板的情况下进行选择

> ID：14349789
> 
> 赞同：0
> 
> 时间：2013-01-16T00:59:22.460
> 
> 标签：javascript, jquery, html, drop-down-menu, accordion

我在手风琴内有一个下拉菜单（在它的外部）。我希望能够在任何下拉菜单上进行选择，而无需将手风琴更改为该下拉菜单所在的面板。

![截屏](../Images/9707ec68cb09112304d4c4c50e129e03.png)

完整文件[下载 - 保管箱](https://www.dropbox.com/sh/5s35a6jmbeya9jz/tzK31YNk6z)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:13:44.430

我创建了一个[jsfiddle](http://jsfiddle.net/fuLxu/)。

我已将您的元素更改`id`为`class`您的`<select>`元素并将其放入：

```
$('.selectOne').click(function(){
    return false;
}); 
```

希望能帮助到你。

# java - 为什么在我的 JTable 的条件单元格渲染器中出现混合结果？

> ID：14349792
> 
> 赞同：2
> 
> 时间：2013-01-16T00:59:35.923
> 
> 标签：java, swing, jtable, tablecellrenderer

我一直在关注教程，学习有关 JTable 渲染器/编辑器的全部内容，但我在尝试制作一个条件渲染器时遇到了困难，该渲染器旨在根据一组条件以不同颜色显示单元格。

这是我整理的 SSCCE：

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import javax.swing.AbstractCellEditor;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableColumnModel;

public class Demo2 extends javax.swing.JFrame {

    public Demo2() {
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(300, 300);
        this.getContentPane().setLayout(new java.awt.GridLayout(1, 1));
        Object[] colunas = {"Col 0"};
        Object[][] dados = {{"A"},{"B"},{"C"},{"D"}};
        JTable tbl = new JTable(dados,colunas);
        TableColumnModel tcm = tbl.getColumnModel();
        tcm.getColumn(0).setCellRenderer(new CustomCellRenderer());
        JScrollPane sp = new JScrollPane(tbl);
        this.add(sp);
    }

    class CustomCellRenderer extends DefaultTableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable jtable, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            Component c = super.getTableCellRendererComponent(jtable, value, isSelected, hasFocus, row, column);
            if (value.toString().equals("B")) {
                c.setForeground(Color.GREEN);
                c.setFont(c.getFont().deriveFont(Font.BOLD));
            } else if (value.toString().equals("D")) {
                c.setForeground(Color.BLUE);
                c.setFont(c.getFont().deriveFont(Font.BOLD));
            }
            return this;
        }
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Demo2().setVisible(true);
            }
        });
    }

} 
```

正如我所料，第二个单元格具有绿色前景并且是粗体，而第四个单元格也是蓝色和粗体。但是，其他单元格似乎也受到了前景色变化的影响。

![在此处输入图像描述](../Images/e5424f3cc5dbd3c658b2f0dabbcc5177.png)

使用断点进行调试，我看到它只在正确的行中执行 setForeground，尽管它执行了两次，这是出乎意料的。

此外，如果我将最后一个单元格从“D”更改为“DD”，那么每个单元格的前景都会变为绿色。

我认为我缺少有关渲染器的一些基本知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:04:35.950

当不需要加粗字体或将颜色更改回默认值时，您在哪里“取消加粗”字体？请记住，这不是自动完成的，而是您的代码需要专门执行此操作。我认为您需要有更多的 else 块才能响应所有情况。

IE，

```
 @Override
    public Component getTableCellRendererComponent(JTable jtable, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        Component c = super.getTableCellRendererComponent(jtable, value, isSelected, hasFocus, row, column);
        if (value.toString().equals("B")) {
            c.setForeground(Color.GREEN);
            c.setFont(c.getFont().deriveFont(Font.BOLD));
        } else if (value.toString().equals("D")) {
            c.setForeground(Color.BLUE);
            c.setFont(c.getFont().deriveFont(Font.BOLD));
        } else {
           c.setForeground(null);
           c.setFont(c.getFont().deriveFont(Font.PLAIN));
        }
        return this;
    } 
```

JTable 单元不像单个组件，而是组件的渲染*图像*。把它们看作是用饼干刀制作的。如果您更改了一个单元格的切割器并且不将其更改回来，则所有后续单元格都将受到影响。

# c - 用 VS2012 编写的 C 程序可以使用 Win7/8/2008R2/2012，但不能使用 2003/XP/32 位？

> ID：14349793
> 
> 赞同：10
> 
> 时间：2013-01-16T01:00:09.407
> 
> 标签：c, visual-c++

我必须首先说我是一个编程菜鸟。我不了解 IDE 的所有编译器选项或细微差别，不是很远。但我正在努力自学更多关于本机编程语言的知识。（我对 C# 很满意，但我发现这比 C 容易得多。**）**

今天，我用C写了这个小程序。它是一个控制台/命令行程序。我使用了 Visual Studio 2012，我的开发机器在 Windows 7 和 8、64 位之间切换。首先，我所做的是创建一个新的 VC++ 项目，然后我选择了一个空白项目。然后我创建了一个新的 app.c 文件。当您在 Windows 资源管理器中浏览文件属性时，我还创建了一个 *.rc 文件来为可执行文件提供一些额外的属性，例如“文件版本”和“公司名称”。然后我转到项目的属性，选择配置属性 -> C/C++ -> 代码生成并将运行时库更改为“多线程 (/MT)，这样我就不必分发 msvcr100.dll 文件连同我的可执行文件。

在 app.c 文件中，我放置了以下代码：

```
#include <stdio.h>
#include <string.h>
#include <Windows.h>
#include <WtsApi32.h>
#pragma comment(lib, "WtsApi32.lib")

void main(int argc, char *argv[])
{
    char *helpMsg = "blah";
    char *hostName, *connState = "";
    char *addrFamily = "";
    HANDLE hHost = NULL;

    ...stuff and so forth and so on...
} 
```

然后我构建/编译了程序，可执行文件在 Windows 7、8、Server 2008R2、Server 2012 上运行良好，所有 64 位。但是当我尝试在 Server 2003 上运行程序时（我猜也是 WinXP 等），我看到了 Windows 对话框：

“Foo.exe 不是有效的 Win32 应用程序。”

所以我的问题是，我是否缺少一些明显/简单的东西可以让这个可执行文件也可以在我缺少的早期 XP/2003/32bit 平台上工作？我不相信我在我的程序中使用了任何 64 位专有功能。但我认为，因为我确实选择了“空白项目”而不是“Win32 控制台应用程序”，所以我可能会遗漏一些设置。

编辑：这是针对我的 exe 运行时的 dumpbin.exe /headers 输出：

```
Microsoft (R) COFF/PE Dumper Version 11.00.50727.1
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file C:\users\me\Release\foo.exe

PE signature found

File Type: EXECUTABLE IMAGE

FILE HEADER VALUES
         14C machine (x86)
           5 number of sections
    50F604BC time date stamp Tue Jan 15 19:39:08 2013
           0 file pointer to symbol table
           0 number of symbols
          E0 size of optional header
         102 characteristics
               Executable
               32 bit word machine

OPTIONAL HEADER VALUES
         10B magic # (PE32)
       11.00 linker version
        7800 size of code
        A200 size of initialized data
           0 size of uninitialized data
        16A7 entry point (004016A7) _mainCRTStartup
        1000 base of code
        9000 base of data
      400000 image base (00400000 to 00414FFF)
        1000 section alignment
         200 file alignment
        6.00 operating system version
        0.00 image version
        6.00 subsystem version
           0 Win32 version
       15000 size of image
         400 size of headers
           0 checksum
           3 subsystem (Windows CUI)
        8140 DLL characteristics
               Dynamic base
               NX compatible
               Terminal Server Aware
      100000 size of stack reserve
        1000 size of stack commit
      100000 size of heap reserve
        1000 size of heap commit
           0 loader flags
          10 number of directories
           0 [       0] RVA [size] of Export Directory
        D374 [      3C] RVA [size] of Import Directory
       11000 [     538] RVA [size] of Resource Directory
           0 [       0] RVA [size] of Exception Directory
           0 [       0] RVA [size] of Certificates Directory
       12000 [     C04] RVA [size] of Base Relocation Directory
        9160 [      38] RVA [size] of Debug Directory
           0 [       0] RVA [size] of Architecture Directory
           0 [       0] RVA [size] of Global Pointer Directory
           0 [       0] RVA [size] of Thread Storage Directory
        CF98 [      40] RVA [size] of Load Configuration Directory
           0 [       0] RVA [size] of Bound Import Directory
        9000 [     118] RVA [size] of Import Address Table Directory
           0 [       0] RVA [size] of Delay Import Directory
           0 [       0] RVA [size] of COM Descriptor Directory
           0 [       0] RVA [size] of Reserved Directory

SECTION HEADER #1
.text name
7670 virtual size
1000 virtual address (00401000 to 0040866F)
7800 size of raw data
 400 file pointer to raw data (00000400 to 00007BFF)
   0 file pointer to relocation table
   0 file pointer to line numbers
   0 number of relocations
   0 number of line numbers
60000020 flags
     Code
     Execute Read

SECTION HEADER #2
.rdata name
49E2 virtual size
9000 virtual address (00409000 to 0040D9E1)
4A00 size of raw data
7C00 file pointer to raw data (00007C00 to 0000C5FF)
   0 file pointer to relocation table
   0 file pointer to line numbers
   0 number of relocations
   0 number of line numbers
40000040 flags
     Initialized Data
     Read Only

Debug Directories

    Time Type       Size      RVA  Pointer
-------- ------ -------- -------- --------
50F604BC cv           61 0000CFE0     BBE0    Format: RSDS, {582D0FF2-59C1-4633-AF2A-E4A4AD6BFA2C}, 1, C:\Users\me\Release\users.pdb
50F604BC feat         10 0000D044     BC44    Counts: Pre-VC++ 11.00=0, C/C++=116, /GS=116, /sdl=0

SECTION HEADER #3
.data name
2C04 virtual size
E000 virtual address (0040E000 to 00410C03)
 E00 size of raw data
C600 file pointer to raw data (0000C600 to 0000D3FF)
   0 file pointer to relocation table
   0 file pointer to line numbers
   0 number of relocations
   0 number of line numbers
C0000040 flags
     Initialized Data
     Read Write

SECTION HEADER #4
.rsrc name
 538 virtual size
11000 virtual address (00411000 to 00411537)
 600 size of raw data
D400 file pointer to raw data (0000D400 to 0000D9FF)
   0 file pointer to relocation table
   0 file pointer to line numbers
   0 number of relocations
   0 number of line numbers
 40000040 flags
     Initialized Data
     Read Only

 SECTION HEADER #5
.reloc name
235C virtual size
12000 virtual address (00412000 to 0041435B)
2400 size of raw data
DA00 file pointer to raw data (0000DA00 to 0000FDFF)
   0 file pointer to relocation table
   0 file pointer to line numbers
   0 number of relocations
   0 number of line numbers
 42000040 flags
     Initialized Data
     Discardable
     Read Only

Summary

    3000 .data
    5000 .rdata
    3000 .reloc
    1000 .rsrc
    8000 .text 
```

我也试过去项目属性 - >链接器 - >系统：最低要求版本并将其更改为 5.00 和 1.00 或其他任何内容，但它没有效果。dumpbin.exe 仍将操作系统版本报告为 6.00。我什至在 exe 上使用了 editbin.exe /version 5.00 并且没有报告任何错误……但 dumpbin.exe 仍然报告操作系统版本为 6.00。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T01:34:28.357

VS2012 最初发布时不支持 XP/2003。更新后的 CRT 和运行时支持库使用了太多在这些操作系统上不可用的 Windows api 函数。委婉地说，这在其客户中引起了不小的轰动，他们重新设计了库以动态绑定到这些功能，并沿着它们缺少的功能蹒跚而行。这在[Update 1](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)中可用，您需要使用 Project + Properties, General, [Platform Toolset = v110_xp](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx)来构建使用这些库的程序。

请注意它如何更改链接器设置，重要的是，链接器 > 系统 > 最低要求版本 =“5.01”。这确保了可执行文件被标记为与 XP 子系统版本兼容。您还将针对 SDK 版本 7.1 进行构建，这是最后一个仍与 XP 兼容的版本。

当您使用默认工具集 (v110) 时，您的目标是子系统 6.00 和 SDK 版本 8。版本 6.00 是最后一个主要内核版本，从 Vista 开始。

简要概述了用于让您（非常粗略地）了解 XP 版本中缺少的新 api 函数：

*   FlsAlloc, FlsFree, FlsGetValue, FlsSetValue : 安全的线程本地存储
*   InitializeCriticalSectionEx、CreateSemaphoreEx：安全
*   SetThreadStackGuarantee：稳定性
*   CreateThreadPoolTimer, SetThreadPoolTimer, WaitForThreadPoolTimerCallbacks, CloseThreadPoolTimer : 更便宜的计时器
*   CreateThreadPoolWait, SetThreadPoolWait, CloseThreadPoolWait : 更便宜的等待？
*   FlushProcessWriteBuffers、GetCurrentProcessorNumber、GetLogicalProcessorInformation：线程
*   FreeLibraryWhenCallbackReturns：稳定性？
*   CreateSymbolicLink : 功能
*   InitOnceExecuteOnce ：未知
*   SetDefaultDllDirectories：未知
*   EnumLocalesEx、CompareStringEx、GetDateFormatEx、GetLocalInfoEx、GetTimeFormatEx、GetUserDefaultLocaleName、IsValidLocaleName、LCMapStringEx：更好的语言环境支持

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T15:38:05.137

我自己想通了。（但感谢 Hans 引导我朝着正确的方向前进。）出于某种原因，即使使用 Update 1，甚至在将我的工具集设置为 v110_xp*并*在链接器选项中将所需的最低版本设置为 5.01 之后，结果`dumpbin app.exe /headers`仍然报告最低操作系统版本为 6.0。

所以我只是跑了

```
editbin.exe app.exe /SUBSYSTEM:CONSOLE,5.01 /OSVERSION:5.1 
```

现在可执行文件在旧操作系统上运行良好。我认为 Visual Studio 中的某个地方可能仍然存在一些错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T16:42:59.200

[MSVC 团队博客](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx?PageIndex=2 "MSVC 团队博客")说，当通过 v110_xp 平台工具集从命令行使用 MSBuild 或 DEVENV 时，无需进行其他更改。此信息不正确/不完整。/SUBSYSTEM 链接器参数和关联的“最低要求版本”也必须适当设置。

[/ENTRY](http://msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.71%29.aspx "入口")的 MSDN 文档指出，如果未指定 /SUBSYSTEM 参数，则自动确定 SUBSYSTEM 和 ENTRY POINT。我的预感是，当这种情况发生时，SUBSYSTEM 的“最低要求版本”参数也会被自动覆盖。

v110_xp 工具集自动指定 SUBSYSTEM 的 MRV（“5.1”（WindowsXP）），但不指定 SUBSYSTEM。因此，MRV 将被覆盖，例如，被“6.0”的链接器覆盖。运行该应用程序将导致 WindowsXP 显示错误消息，指出该应用程序“不是有效的 Win32 应用程序”。

# .htaccess - 重定向正在添加添加到 html 文件的尾部斜杠

> ID：14349794
> 
> 赞同：1
> 
> 时间：2013-01-16T01:00:10.077
> 
> 标签：.htaccess

我的 .htaccess 文件中有以下重定向。当使用不带斜杠的 URL 时，代码正常工作，但添加斜杠时，它会重定向到文件，然后添加斜杠导致 404 错误。

重定向匹配 301 ^/fishing/saltwater/?$ [http://www.mydomain.com/fishing/saltwater.html](http://www.mydomain.com/fishing/saltwater.html)

```
/fishing/saltwater redirects to /fishing/saltwater.html 
```

但

```
/fishing/saltwater/ redirects to /fishing/saltwater.html/ 
```

# c# - 如何将流附加到文件中？

> ID：14349798
> 
> 赞同：0
> 
> 时间：2013-01-16T01:00:35.910
> 
> 标签：c#, c#-4.0, windows-8, windows-runtime

我有一个从 HTTP 获得的流。

我想保存收到的每个数据包并将其附加到文件的末尾：“myData.dat”

我在下面编写了代码，每次数据包到达时它都会运行。

```
private async void FrameReady( object sender, IBuffer DataBuffer )
{
    InMemoryRandomAccessStream stream = new InMemoryRandomAccessStream();
    await stream.WriteAsync( DataBuffer );
    stream.Seek( 0 );
    using ( Stream file = await ApplicationData.Current.LocalFolder.OpenStreamForWriteAsync( "myData.dat", CreationCollisionOption.OpenIfExists ) )
    {
        file.Seek( 0, SeekOrigin.End );
        var dataReader = new Windows.Storage.Streams.DataReader( stream );
        byte [] buffer = new byte [DataBuffer.Length];
        dataReader.ReadBytes( buffer );
        await file.WriteAsync( buffer, 0, (int)DataBuffer.Length );
    }
} 
```

但是，在运行代码时，它在这一行失败：

```
dataReader.ReadBytes( buffer ); 
```

错误信息是：

> 该操作试图访问有效范围之外的数据（HRESULT 异常：0x8000000B）

不知道为什么会这样？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T13:42:24.133

我在 ReadBytes 函数中遇到了类似的问题。

我正在使用以下解决方法，这可能对某人有所帮助。

```
private async Task<uint> ProcessBulkIn(Task<DataReader> task)
{
    byte[] rawData;
    DataReader b = await task;
    uint length = b.UnconsumedBufferLength;
    IBuffer iBuf = b.ReadBuffer(length);
    rawData = iBuf.ToArray();
    return length;
} 
```

您需要在 IBuffer 上包含 ToArray 函数的命名空间。

```
using System.Runtime.InteropServices.WindowsRuntime; 
```

# php - 如何在没有先加载 LatLong 的情况下使下面的谷歌地图代码加载城市、州？

> ID：14349800
> 
> 赞同：0
> 
> 时间：2013-01-16T01:00:54.317
> 
> 标签：php, javascript

下面的代码将显示用户从网站上一页选择的城市、州。但是，地图首先加载 LatLong 位置，然后打开城市、州。如何消除 LatLong 变量使其不加载？只想展示城市、州。

```
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0; padding: 0 }
        #map_canvas { height: 100% }
    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY&sensor=false"></script>
    <script type="text/javascript">
        var geocoder;
        var map;
        var marker;

        function initialize() {
            var latlng = new google.maps.LatLng(-34.397, 150.644);
            var mapOptions = {
                zoom: 8,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
            geocoder = new google.maps.Geocoder();
            marker = new google.maps.Marker({
                map: map,
                draggable: true
            });

            showAddress('"<?php echo $_SESSION['city_name']; ?>"');
        }

        function showAddress(address) {
            geocoder.geocode({'address': address}, function(results, status) {
                if (status != google.maps.GeocoderStatus.OK) {
                    return;
                }
                if (results.length > 1) {
                    alert('Multiple addresses found; showing first one ...');
                }
                $.each(results, function(i, item) {
                    var location = new google.maps.LatLng(item.geometry.location.lat(), item.geometry.location.lng());
                    marker.setPosition(location);
                    map.setCenter(location);
                    return false;
                });
            });
        }
    </script>
</head>
<body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:20:41.757

您知道您总能找到您正在寻找的特定城市的经纬度，并缩放到正确的水平以适应该区域的视野。我就是这样使用它的。

或者您可以使用地理编码器结果将值发送到 latlang 所以您需要在初始化地图之前调用 geocoder.geocode()

使用代码中已有的行：

```
var location = new google.maps.LatLng(item.geometry.location.lat(), item.geometry.location.lng()); 
```

然后把它放在后面：

```
var latlng = location; 
```

然后使用 latlng 来初始化地图所以你的代码应该是这样的：

```
<script type="text/javascript">
    var geocoder;
    var map;
    var marker;

    function initialize() {

        /*Go through the following to understand what I'm trying to get at.*/
        var address = "<?php echo $_SESSION['city_name']; ?>";
        geocoder = new google.maps.Geocoder(); // This was removed from below. Compare with your code.
        geocoder.geocode( { 'address': address}, function(results, status) {

            if (status == google.maps.GeocoderStatus.OK) {
            var latlang = results[0].geometry.location; } 

            else { alert("The location cannot be mapped"); }
        });

        /* Up until here. */

        var mapOptions = {
            zoom: 8,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        marker = new google.maps.Marker({
            map: map,
            draggable: true
        });

        showAddress('"<?php echo $_SESSION['city_name']; ?>"');
    }

    function showAddress(address) {
        geocoder.geocode({'address': address}, function(results, status) {
            if (status != google.maps.GeocoderStatus.OK) {
                return;
            }
            if (results.length > 1) {
                alert('Multiple addresses found; showing first one ...');
            }
            $.each(results, function(i, item) {
                var location = new google.maps.LatLng(item.geometry.location.lat(), item.geometry.location.lng());
                marker.setPosition(location);
                map.setCenter(location);
                return false;
            });
        });
    }
</script> 
```

这应该有效。

# iphone - iOS / Obj-C UIScrollView 和 PageControl 不起作用

> ID：14349803
> 
> 赞同：3
> 
> 时间：2013-01-16T01:01:21.510
> 
> 标签：iphone, ios, objective-c, uiscrollview, uipagecontrol

我正在尝试按照本网站上的指南使用 UIPageControl 实现 UIScrollView：http: [//www.iosdevnotes.com/2011/03/uiscrollview-paging/](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/) 与指南相反，我在情节提要项目中实现这一点，并使用 XCode4.5.2。除了指南中的代码，我在@interface的开头添加了，在实现中的viewDidLoad方法里面，我添加了scrollView.delegate = self。

仅将指南中描述的代码和 IB 对象添加到我的应用程序中，当我在 iPhone 上测试它时，它根本不允许我滚动。我唯一能做的滚动是通过在 UIPageControl 上滑动手指，这会使 PageControl 中的“白点”向我滑动的方向移动一个点，并且 ScrollView 中没有可见的变化。在指南中，我们为 scrollView 中的视图的背景添加了不同的颜色——这些颜色都没有出现。

我尝试通过将 NSLogs 放入我的代码中进行调试，以查看应用程序可以使用哪些方法。添加一个 NSLog (@"View did load"); 就在 [super viewDidLoad] 之后；在主视图控制器顶部的 viewDidLoad 方法中不会向终端输出任何内容。这是否意味着我的应用无法正常加载？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:12:46.323

你有多个页面添加到滚动视图吗？如果您只有一页内容，则默认关闭滚动。确保调用 loadScrollView 方法并添加以下内容：

```
scrollView.pagingEnabled=YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:01:24.977

如果您有兴趣，我创建了这个类以使用滚动视图进行分页

[https://github.com/andrealufino/ALScrollViewPaging](https://github.com/andrealufino/ALScrollViewPaging)

# visual-studio-2010 - ms access 2010和vs2010如何连接

> ID：14349807
> 
> 赞同：0
> 
> 时间：2013-01-16T01:02:06.343
> 
> 标签：visual-studio-2010, ms-access

`cmd.ExecuteNonQuery()`程序连续崩溃

```
Public Class Form1
    Dim conn As New OleDb.OleDbConnection
    Private Sub RefreshData()
        If Not conn.State = ConnectionState.Open Then
            'open connection
            conn.Open()
        End If

        Dim da As New OleDb.OleDbDataAdapter("SELECT Oznaka as [Oznaka], " & _
                                             "ReN as [ReN], RmN " & _
                                             " FROM Tabela ORDER BY Oznaka", conn)
        Dim dt As New DataTable
        'fill data to datatable
        da.Fill(dt)

        'offer data in data table into datagridview
        Me.DataGridView1.DataSource = dt

        'close connection
        conn.Close()
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim cmd As New OleDb.OleDbCommand
        If Not conn.State = ConnectionState.Open Then
            'open connection if it is not yet open
            conn.Open()
        End If

        cmd.Connection = conn
        'check whether add new or update
        If Me.txtOznaka.Tag & "" = "" Then
            'add new
            'add data to table
            cmd.CommandText = "INSERT INTO Tabela(Oznaka, ReN, RmN) " & _
                                " VALUES('" & Me.txtOznaka.Text & "','" & Me.txtReN.Text & "','" & _
                                Me.txtRmN.Text & "'')"

            cmd.ExecuteNonQuery()
        Else
            'update data in table
            cmd.CommandText = "UPDATE Tabela " & _
                        " SET Oznaka=" & Me.txtOznaka.Text & _
                        ", ReN='" & Me.txtReN.Text & "'" & _
                        ", RmN='" & Me.txtRmN.Text & "'" & _
                                   " WHERE Oznaka=" & Me.txtOznaka.Tag
            cmd.ExecuteNonQuery()

        End If
        'refresh data in list
        RefreshData()
        'clear form
        'Me.btnClear.PerformClick()

        'close connection
        conn.Close()

    End Sub

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        conn = New OleDb.OleDbConnection
        conn.ConnectionString = "Provider=Microsoft.Jet.Oledb.4.0; Data Source=" & Application.StartupPath & "\baza.mdb"
        '
        'get data into list
        Me.RefreshData()
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:06:37.757

崩溃时您是否正在运行`INSERT`或查询？`UPDATE`

如果是 `INSERT`查询，可能是因为SQL字符串`'`末尾多了一个：

```
... Me.txtRmN.Text & "'')"

                       ^
                       here! 
```

如果是`UPDATE`查询：如果`Oznaka`是字符串列，请将值放在引号中：

```
" SET Oznaka='" & Me.txtOznaka.Text & "'" & _ 
```

代替

```
" SET Oznaka=" & Me.txtOznaka.Text & _ 
```

**对于这两个问题，一个更好的解决方案是：在查询中使用 SQL 参数而不是连接字符串。**

以下是一些入门示例：

*   [插入事务和参数？](https://stackoverflow.com/questions/2386588/insert-with-transaction-and-parameters)
*   [将参数中的 NULL 传递给存储过程中的 DateTime 字段](https://stackoverflow.com/questions/5182032/pass-a-null-in-a-parameter-to-a-datetime-field-in-a-stored-procedure)

# html - 在 CSS 中缩放背景

> ID：14349808
> 
> 赞同：1
> 
> 时间：2013-01-16T01:02:16.157
> 
> 标签：html, css, background

这并不完全是在 CSS 中为网站制作背景图像，因此暂时不要将其标记为重复。

我需要复制以下背景，但在 CSS 中。我在网站上实现了各种渐变，但这更像是屏幕边缘的变暗，我不知道如何实现，尤其是在 CSS 中。如果有一个很好的方法可以用图像做到这一点，请告诉我。

![背景示例](../Images/3443bff22d31f802b3eea15e0f87c31e.png)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:10:45.547

您可以尝试插入[http://jsfiddle.net/46JxH/](http://jsfiddle.net/46JxH/)[`box-shadow`](http://css-tricks.com/snippets/css/css-box-shadow/)

```
box-shadow:inset -70px 0 200px -30px rgba(0,0,0,.75); 
```

或背景图片[`background-size`](https://developer.mozilla.org/ru/docs/CSS/background-size)：100% 100%;。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:10:54.227

如果您将使用图像，您可以尝试`CSS3` **background-size:cover**

```
html { 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

[**你可以在这里**](http://css-tricks.com/perfect-full-page-background-image/)阅读更多[](http://css-tricks.com/perfect-full-page-background-image/)

# javascript - haml 和 javascript

> ID：14349809
> 
> 赞同：1
> 
> 时间：2013-01-16T01:02:21.330
> 
> 标签：javascript, ruby-on-rails, haml

我有一个 show.html.haml 文件，它在我的控制器中调用 display.js 我有一个变量 @category

我将如何在视图使用的 display.js 文件中使用@category？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:34:29.490

好吧，我想我只需要休息一下；这里：

```
= javascript_tag do
    var category = '#{@category}'

= javascript_include_tag "your_javascripts.js" 
```

# ruby-on-rails - 用 sql 创建 id 和 timestamp 列？

> ID：14349811
> 
> 赞同：1
> 
> 时间：2013-01-16T01:02:23.553
> 
> 标签：ruby-on-rails

我正在尝试使用 seed.rb 文件中的一些 sql 语句为 Rails 应用程序播种。提供了 12 个值，但是该表有 15 列。额外的三列是 Rails 默认包含的自动生成的 id、created_at 和更新的列。如果我以下列方式在 seed.rb 文件中运行自定义 sql 语句......

```
connection = ActiveRecord::Base.connection()
query = "random sql"
connection.execute(query) 
```

Rails 不会像我那样为我创建这些列

```
Employee.create!(name: "Joe") 
```

当我在seed.rb中运行sql语句时，是否有向rails指示我需要填充值的id和timestamp列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:08:20.933

不，因为 Rails 无法知道你是否`"random sql"`创建了任何记录来填充 ids/timestamps。

当你`connection.execute`独自一人时，你已经放弃了你的 ORM 并屈服于 SQL 的诱惑。

如果您可以使用 ActiveRecord 做到这一点，那就这样做吧！如果不是，那么，这就是为什么 Rails 允许您使用 SQL（但再想一想。您*真的*不能用 Ruby 编写它吗？）。

# python - 在 Python 中只打印一定数量的字符

> ID：14349814
> 
> 赞同：0
> 
> 时间：2013-01-16T01:02:27.080
> 
> 标签：python, string

> **可能重复：**
> [在 Python 中按块（n）迭代迭代器？](https://stackoverflow.com/questions/8991506/iterate-an-iterator-by-chunks-of-n-in-python)

假设我有一个 492 个字符的字符串存储在一个变量中。我如何打印出前 50 个字符，然后转到下一行，然后打印出下一个 50，最后打印一行 42 个字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T01:03:52.873

```
chars_per_line = 50
for i in range(0, len(s), chars_per_line):
    print s[i:i+chars_per_line] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T01:05:45.337

```
for line in mystring.splitlines():
    print line[:50] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:16:16.423

```
In [363]: mystr = "A"*492

In [364]: print '\n'.join(mystr[i*width:(i+1)*width] for i in range(int(math.ceil(float(len(mystr))/width))))
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T02:46:35.067

正如@Martijn Pieters 暗示的那样，如果您有办法[通过 chunks (of n) 迭代迭代器](https://stackoverflow.com/questions/8991506/iterate-an-iterator-by-chunks-of-n-in-python)，这将非常容易。如果你读到这个问题，你*确实*有办法做到这一点。

因此，鉴于[itertools 食谱](http://docs.python.org/2/library/itertools.html#recipes)`grouper`的实现（或您从其他问题中喜欢的任何其他内容）：

```
lines = [''.join(group) for group in grouper(50, my_string, '')] 
```

或者，如果您只想打印它们：

```
for group in grouper(50, my_string, ''):
    print ''.join(group) 
```

一旦你知道它的`grouper`存在，我认为这比 Joel Cornett 的答案更简单。请注意，他在第一个版本中不起作用，必须修复；这几乎是不可能出错的。任何消除栅栏错误可能性的方法通常都更好；这就是为什么我们有`for`-`in`循环而`enumerate`不是 C 风格的`for`循环，等等。

这是在行动：

```
>>> my_string='1234567890'*49+'12'
>>> print my_string
123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012
>>> # That was ugly…
>>> for group in grouper(50, my_string, ''):
...     print ''.join(group)
12345678901234567890123456789012345678901234567890
12345678901234567890123456789012345678901234567890
12345678901234567890123456789012345678901234567890
12345678901234567890123456789012345678901234567890
12345678901234567890123456789012345678901234567890
12345678901234567890123456789012345678901234567890
12345678901234567890123456789012345678901234567890
12345678901234567890123456789012345678901234567890
12345678901234567890123456789012345678901234567890
123456789012345678901234567890123456789012
>>> # Pretty! 
```

# node.js - Node.js (Socket.io) - 如果用户正在切换页面，我不想运行断开连接

> ID：14349816
> 
> 赞同：1
> 
> 时间：2013-01-16T01:02:39.527
> 
> 标签：node.js

目前，每当用户切换页面时，此代码块都会立即运行：

```
// when the user disconnects.. perform this
socket.on('disconnect', function(){
    delete SiteRooms[socket.username];
    io.sockets.emit('updateusers', usernames);
    io.sockets.emit('updateroomusers', SiteRooms);
}); 
```

如果用户只是在我的网站上切换页面，我不想运行它，有什么方法可以做到这一点吗？

我正在考虑一个计时器，也许将其设置为 50 秒 - 如果当时不存在，也许将其设置为 30 秒：然后断开连接。但我不知道这是否是一个好的解决方案，也不知道如何为其编写实际代码..

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:38:44.843

The event firing is correct. When a user switches pages, the whole execution context of that page ends, and any scripts are stopped. This includes the client code for Socket.IO.

You have a couple choices. One choice is to load your page content with AJAX. This isn't always ideal... it depends on what your site does and how it is built.

Another option is to build in that delay yourself. Wherever you keep your user data, just add a property to that object that holds a timeout for however many seconds you'd like. If the user reconnects, clear the timeout before it fires.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:33:03.620

您可以通过更改页面内容的脚本来更改链接。我没有经验，但我认为 JADE 有助于做这样的事情。您在 github 上有一些示例：

[https://github.com/visionmedia/jade](https://github.com/visionmedia/jade)

我认为更换积木可能是您的解决方案。

# jquery - 构建 jQuery 时发出咕噜声，警告

> ID：14349818
> 
> 赞同：1
> 
> 时间：2013-01-16T01:02:52.910
> 
> 标签：jquery, module, gruntjs

尝试使用 Grunt 构建 jQuery 时收到以下警告：

`"Warning: You need to run this command from the toplevel of the working tree. Use --force to continue."`

我的项目的结构是这样的，我从 jquery 文件夹中运行 grunt：

/myProject /components /jquery

如果我将几个文件夹转到 /myProject 并运行，`grunt`我会得到：

`"Warning: Task "default" not found. Use --force to continue."`

跑步`grunt --gruntfile components/jquery/Gruntfile.js`也没什么好处。

我究竟做错了什么？

我已经安装了 grunt-cli v0.1.6 + grunt v0.4.0rc5。我还安装了所有 jquery npm 依赖项。

# android - 使用 asyncTask 刷新地图错误

> ID：14349819
> 
> 赞同：1
> 
> 时间：2013-01-16T01:02:54.817
> 
> 标签：android, google-maps, android-asynctask, handle

我正在尝试使用从网络服务器获得的一些坐标刷新地图。这是我的异步任务：

```
public class GetUsersAsyncTask extends AsyncTask<String, Void, String>
{

    HttpResponse response = null;
    InputStream is = null;
    AndroidHttpClient httpclient;
    String responseString = null;

    @SuppressLint("NewApi")
    @Override
    protected String doInBackground(String... url) {

        try{
            Log.i("entrabackground",""+(++ae));
        httpclient = AndroidHttpClient.newInstance("Android");
        Log.i("!!","upa upa");
        HttpUriRequest request = new HttpGet(mUrl+eventid);
        Log.i("!!","taaa beemmm");
        request.addHeader("Accept","application/json");
        Log.i("!!","oh pahhh");

    response = httpclient.execute(request);

    } catch (ClientProtocolException e1) {
            Log.i("erro1","Erro");
        e1.printStackTrace();
    } catch (IOException e1) {
        Log.i("erro2","Erro");
        e1.printStackTrace();
    }
        httpclient.close();

    try {
        if( String.valueOf(response.getEntity()) == "null")
        {
            responseString= "null";
            Log.i("null", responseString.toString());
        }
        else
        {
            is = response.getEntity().getContent();
            responseString = convertStreamToString(is);
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Log.i("saibackgroud",""+(++ao));

    return responseString;
}

@Override
protected void onPostExecute(String responseString) {
    //super.onPostExecute(responseString);
    //Do anything with response..
    //Toast.makeText(getApplicationContext(),                 responseString,Toast.LENGTH_SHORT).show();

    Log.i("entrapost",""+(++ai));
    try 
    {
        json = new JSONObject(responseString.trim());
        //Toast.makeText(getApplicationContext(), json.toString(), Toast.LENGTH_SHORT).show();
    }                   
    catch (JSONException e) {
            e.printStackTrace();
    }
    try{
        Log.i("faz isto",""+(++au));
        users_locations = json.getJSONArray("user");
        userdraw.removeOverlay(item);
        mapView.invalidate();

    user_name=users_locations.getJSONObject(0).getString("name");
    user_lat=users_locations.getJSONObject(0).getDouble("latitude");
    user_lng=users_locations.getJSONObject(0).getDouble("longitude");
    userpoint = new GeoPoint((int) (user_lat * 1E6), (int) (user_lng * 1E6));
    item = new OverlayItem(userpoint,null,null);
    //Get the new Drawable
    //Set its bounds
    usermarker.setBounds(-usermarker.getIntrinsicWidth()/2,-   usermarker.getIntrinsicHeight(),usermarker.getIntrinsicWidth()/2,0);
    //Set the new marker
    item.setMarker(usermarker);
    userdraw.addOverlay(item);      
    mc.animateTo(userpoint);
    mapView.invalidate();
    Log.i("userslocations",user_name+" "+user_lat+" "+user_lng);

    }catch (JSONException e) {
         Toast.makeText(getApplicationContext(), "Connection Lost", Toast.LENGTH_SHORT).show();
         e.printStackTrace();
     } 
```

此 asyncTask 从处理程序中调用：

```
handler = new Handler();
      runnable = new Runnable() {
       @Override
       public void run() {
          Log.i("url",mUrl+eventid);
          /* do what you need to do */
          //call asynctask
          GetUsersAsyncTask getusers = new GetUsersAsyncTask();
          getusers.execute(mUrl+eventid).toString();

          /* and here comes the "trick" */
          //10 seconds delay
          handler.postDelayed(this, 30000);
       }
    };
    runnable.run(); 
```

PostExecution 任务的某个点发生错误，我不知道为什么。好像开启了`json = new JSONObject(responseString.trim());`

这是我的 LogCat：

> 01-16 00:44:37.005：E/AndroidRuntime(8625)：未捕获的处理程序：线程主因未捕获的异常而退出 01-16 00:44:37.105：E/AndroidRuntime(8625)：java.lang.NullPointerException 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 com.example.su2.EventMap$GetUsersAsyncTask.onPostExecute(EventMap.java:273) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 com .example.su2.EventMap$GetUsersAsyncTask.onPostExecute(EventMap.java:1) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 android.os.AsyncTask.finish(AsyncTask.java:417) 01- 16 00:44:37.105: E/AndroidRuntime(8625): 在 android.os.AsyncTask.access$300(AsyncTask.java:127) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 android.os .AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 android.os.Handler。dispatchMessage(Handler.java:99) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 android.os.Looper.loop(Looper.java:123) 01-16 00:44:37.105: E/ AndroidRuntime(8625): 在 android.app.ActivityThread.main(ActivityThread.java:4370) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 java.lang.reflect.Method.invokeNative(Native Method) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 java.lang.reflect.Method.invoke(Method.java:521) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 01-16 00:44:37.105: E/AndroidRuntime(8625): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:626) 01-16 00:44:37.105: E/AndroidRuntime(8625): 在 dalvik.system.NativeStart.main(Native Method) 01-16 00:44:37.285: E/SemcCheckin(8625): 获取崩溃转储级别：java.io.FileNotFoundException：/data/semc-checkin/crashdump

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:48:59.673

你确定**responseString**不为空。

如果它为*null*，则调用**responseString.trim()**将导致*java.lang.NullPointerException*，如上面的堆栈跟踪所示。

# excel - 如何同步多个 Excel 输入单元格

> ID：14349821
> 
> 赞同：3
> 
> 时间：2013-01-16T01:03:02.623
> 
> 标签：excel, excel-2010, circular-dependency, vba

[早在 2010 年就有人提出并回答了](https://stackoverflow.com/q/4146716/1982048)这个问题，但是当我按照可敬的 Buggabill 先生的指示然后运行宏（通过编辑目标单元格）时，Excel 立即崩溃。代码如下所示：

```
Private Sub Worksheet_Change(ByVal target As Range)
    If target.Address = "$A$1" Then
        ActiveWorkbook.Worksheets("Sheet2").Range(target.Address).Value = target.Value
    End If
End Sub 
```

我在 Sheet1 下创建了一个版本的宏（将目标值推送到 Sheet2 上的 A1），在 Sheet2 下创建了另一个版本的宏（相反）。只有一个宏就可以正常工作，但我的目的是能够在任一工作表上输入一个值并将新值传播到两个输入单元格中。Excel 崩溃是因为它是循环引用，对吧？有没有解决的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T01:05:50.630

我怀疑这不是循环引用，而是堆栈溢出；）

您可能会考虑在执行宏时关闭事件。

```
Application.EnableEvents = False
...
Application.EnableEvents = True 
```

这样，当您将值戳到另一张纸上时，不会调用其他事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:07:02.110

如果在第一个里面，只需添加另一个。

```
Private Sub Worksheet_Change(ByVal target As Range)
    If target.Address = "$A$1" Then
        If ActiveWorkbook.Worksheets("Sheet2").Range(target.Address).Value <> target.Value
            ActiveWorkbook.Worksheets("Sheet2").Range(target.Address).Value = target.Value
        End If
    End If
End Sub 
```

这应该会阻止它在两个值已经匹配时尝试执行。在进行更新之前，它会检查它们是否相同。

# javascript - window.opener 没有改变

> ID：14349827
> 
> 赞同：2
> 
> 时间：2013-01-16T01:03:56.697
> 
> 标签：javascript, asp.net

我正在使用 javascript 打开一个弹出窗口。

弹出窗口包含的代码在关闭时会修改开启窗口上的一些值。

像这样的东西......

> window.opener.jQuery('#txtFee').trigger('change');

仅使用一个窗口时，此逻辑效果很好。但是有个bug...

有两个窗口可以打开这个弹出窗口。如果我从一个窗口打开弹出窗口并保持弹出窗口打开，然后我从另一个窗口打开弹出窗口，弹出窗口将被刷新，但 window.opener 仍然引用我用来打开弹出窗口的第一个窗口。有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:25:27.173

从打开弹出窗口的两个窗口中，您可以将`onbeforeunload`和/或`onunload`事件绑定到弹出窗口。

```
var popWindow = window.open(url, name, options, replace);
popWindow.focus();

popWindow.onbeforeunload = function()
{
    $('#txtFee').trigger('change'); //DO WHATEVER YOU WANT HERE
    console.log("onbeforeunload fired from ", popWindow.name);
}

popWindow.onunload = function()
{
    console.log("onunload fired from ", popWindow.name);
} 
```

# arrays - 是否可以从 Pascal 中的数组创建数组？

> ID：14349828
> 
> 赞同：1
> 
> 时间：2013-01-16T01:03:56.623
> 
> 标签：arrays, pascal

我有一个名为 Files 的字符串数组，以及一个 for 循环中的布尔函数 IsGood(Files[i])。如何使用 IF 创建 GoodFiles 数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:15:19.123

假设我对你的理解正确，如果你真的必须有一个数组，你首先必须遍历你的 Files 数组，在每个数组上调用 IsGood，并计算你有多少好的数组，分配数组，然后再次循环，这个时间将好的存储到数组中。

但是，还有另一种数据结构 TStringList，您可以方便地将其用于以下用途：

```
GoodList := TStringList.Create;
for i := 0 to length(Files) - 1 do
  if IsGood(Files[i]) then
    GoodList.Add(Files[i]); 
```

# iphone - 在内存警告或应用程序进入后台之前，自动释放池中的内存不会被释放

> ID：14349830
> 
> 赞同：1
> 
> 时间：2013-01-16T01:04:08.083
> 
> 标签：iphone, ios5, memory-management

我有一个关于我正在开发的应用程序中的自动释放池和内存释放的问题。如果有人需要查看代码，我可以发布它。

首先，我在这个应用程序中使用了 ARC，现在基本上我在启动时分配了大量内存（用于介绍动画的图像），并且它们占用的内存似乎没有正确释放，直到我收到出于某种原因的内存警告，或者如果我进入后台并重新进入应用程序的前台。

我一直在监控代码和仪器中分配的内存量，所以这个问题似乎不是误报。我知道我正确地处理了图像内存，因为我清楚地将 UIImageView.animationImages 属性设置为 nil 并将 UIImageView 设置为 nil 并在动画完成后从内存中释放它的父视图控制器。基本上，与它有关的所有内容都设置为 nil 或 removedFromSuperview 以确保 ARC 知道它应该被释放。

有什么办法可以清除这个自动释放的内存池，类似于进入应用程序后台或收到内存警告的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:50:27.363

弄清楚了，我为介绍动画分配的 UIImages 是通过 imageNamed: 方法缓存的，因此即使在它们被自动释放一段时间后也会保留。

为了解决这个问题，我使用了不缓存图像的 imageWithContentsOfFile: 方法。

# java - 新上传的文件和Tomcat？

> ID：14349834
> 
> 赞同：1
> 
> 时间：2013-01-16T01:04:54.467
> 
> 标签：java, jakarta-ee, tomcat, servlets, file-upload

我有一个用于上传图片的简单 servlet，用户选择一张图片，servlet 完成其工作，然后将其写入*上传*目录。我的项目布局：

```
project
    ├───static
    │   ├───img
    │   └───js
    ├───upload
    └───WEB-INF
        └───lib 
```

上传图片后，用户被重定向到它的位置：

```
http://localhost:8080/upload/[image MD5 hash].png 
```

上传代码运行良好，但即使图像存在，Tomcat 在请求 url 时也会返回 404 错误：

```
> wget http://localhost:8080/upload/f5d1da2cadf3bd1c1b9196ec522a5d73.png
SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc
syswgetrc = C:\GnuWin32/etc/wgetrc
--2013-01-16 03:45:33--  http://localhost:8080/upload/f5d1da2cadf3bd1c1b9196ec522a5d73.png
Resolving localhost... 127.0.0.1, ::1
Connecting to localhost|127.0.0.1|:8080... connected.
HTTP request sent, awaiting response... 404 Not Found
2013-01-16 03:45:33 ERROR 404: Not Found.
> 
```

单击`update classes and resources`我的 IDE Intellij 后，它可以工作：

```
> wget http://localhost:8080/upload/f5d1da2cadf3bd1c1b9196ec522a5d73.png
SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc
syswgetrc = C:\GnuWin32/etc/wgetrc
--2013-01-16 03:48:11--  http://localhost:8080/upload/f5d1da2cadf3bd1c1b9196ec522a5d73.png
Resolving localhost... 127.0.0.1, ::1
Connecting to localhost|127.0.0.1|:8080... connected.
HTTP request sent, awaiting response... 200 OK
Length: 11666 (11K) [image/png]
Saving to: `f5d1da2cadf3bd1c1b9196ec522a5d73.png'

100%[==========================================================>] 11,666      --.-K/s   in 0s

2013-01-16 03:48:11 (72.9 MB/s) - `f5d1da2cadf3bd1c1b9196ec522a5d73.png' saved [11666/11666]
> 
```

第二件事是当我手动删除这个图像时，我仍然可以下载它（Tomcat 是否会进行某种兑现？）：

```
> del f5d1da2cadf3bd1c1b9196ec522a5d73.png
> wget http://localhost:8080/upload/f5d1da2cadf3bd1c1b9196ec522a5d73.png
SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc
syswgetrc = C:\GnuWin32/etc/wgetrc
--2013-01-16 04:12:25--  http://localhost:8080/upload/f5d1da2cadf3bd1c1b9196ec522a5d73.png
Resolving localhost... 127.0.0.1, ::1
Connecting to localhost|127.0.0.1|:8080... connected.
HTTP request sent, awaiting response... 200 OK
Length: 11666 (11K) [image/png]
Saving to: `f5d1da2cadf3bd1c1b9196ec522a5d73.png'

100%[==========================================================>] 11,666      --.-K/s   in 0s

2013-01-16 04:12:25 (93.2 MB/s) - `f5d1da2cadf3bd1c1b9196ec522a5d73.png' saved [11666/11666]
> 
```

我的*web.xml*文件：

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/static/*</url-pattern>
    <url-pattern>/upload/*</url-pattern>
</servlet-mapping> 
```

有人可以告诉我问题出在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:20:24.030

这不是处理文件上传的正确方法。您不应将上传的文件存储在部署文件夹中。您当然也不应该将容器特定的默认 servlet 映射到 webapp 自己的`web.xml`. 您应该将上传的文件存储在本地磁盘文件系统上其他位置的固定非部署相关文件夹中，通过`<Context>`Tomcat 中的新文件发布它。例如

```
<Context docBase="/var/webapp/upload" path="/upload" /> 
```

### 也可以看看：

*   [刷新页面后上传的图片才可用](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:37:46.543

在开发中部署时，您的资源将部署在开发资源而不是工作区中，当您在工作区中删除时，必须重新部署以更改开发资源

对不起，用我的英语，

# unit-testing - 播放 2 - FakeApplication 的 inMemoryDatabase() 精度

> ID：14349841
> 
> 赞同：1
> 
> 时间：2013-01-16T01:05:31.007
> 
> 标签：unit-testing, playframework, playframework-2.0, in-memory-database

为了使用内存数据库启动基于虚假应用程序的测试，Play Framework 2 提倡这样做：

```
FakeApplication(additionalConfiguration = inMemoryDatabase()) 
```

`additionalConfiguration = inMemoryDatabase()`如果`application.conf`已经声明了一个专用于测试的内存数据库（h2），是否有必要精确？

我猜这个额外的配置会强制为每个假应用程序重新声明一个干净的内存数据库，而不是对所有套件测试使用相同的内存数据库。因此涉及对每个人的完全隔离，避免我们重新定义`setUp()`和`tearDown()`管理它的方法。

有什么用？

# mysql - 如何解决困境：从旧 magento 系统导出订单导入新 magento，重叠 ID

> ID：14349842
> 
> 赞同：2
> 
> 时间：2013-01-16T01:05:37.790
> 
> 标签：mysql, sql, magento, oauth, import

不幸的是，在从 Magento 1.5 升级到 1.7 的过程中，我们不得不重新安装 Magento（不要问），现在我需要将所有旧订单信息放入实时升级中。我研究了几种情况。首先是识别它们对应的数据库中的表并将这些表迁移过来，但我有三个问题。一：我已经做了一点，因为 1.5 和 1.7 之间的差异导致了几个小时的调试乐趣。二：我无法具体弄清楚哪些该死的表需要更新（将只是替换所有 sales_ 表）。第三：自从升级以来，其他订单已经下达，并且如您所知，重新开始订单 ID，我不希望这些条目被替换。

我的另一种选择是尝试构建一个像这样的扩展：http: [//www.magentocommerce.com/magento-connect/dataflow-batch-import-export-orders-to-csv-xml.html](http://www.magentocommerce.com/magento-connect/dataflow-batch-import-export-orders-to-csv-xml.html)。我已经开始了，但是我已经卡在 oAuth 过程中了。

在我浪费时间之前，我想要一些建议。进行此过程的最佳方法是什么？

更新 1-17

我已经在适用的表上尝试了 UNION 查询，但我当然收到错误“#1062 - 键 'PRIMARY' 的重复条目 '1'”，因为有几个主键。是否有查询来增加新订单的主键以在旧订单的 ID 之后跟随？我尝试通过 UPDATE `sales_flat_invoice_grid` SET `increment_id`= ( `increment_id`+6150) 或类似方法在各个列中执行此操作，但是 ID 映射到其他表上的 ID！请帮忙！恐怕我得告诉老板我们需要购买那个扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:42:11.270

继续上面的评论^^

嗯 .. 如果是这样的话，我过去完成导出/导入的方式（参见我的帖子在[这里](https://stackoverflow.com/questions/13239007/export-magento-data-to-1-7-from-1-3)）是使用 MySQL Workbench EER 建模工具为自己创建一个订单存储系统的图表。一开始我只会选择一个表，然后 MySQL 会告诉你还有哪些表与该表相关联。我重复这个过程，以便在我的 EER 图中，我没有不必要的表格，也没有遗漏表格。我最终得到了理解流程所需的确切表格数量。

接下来，对您的 1.7 设置执行相同操作……然后进行比较。您将需要生成一个 SQL 查询，该查询不仅会将 1.5 订单插入 1.7 数据库，而且您可能需要创建自己的链接表以防使用 ID，您可能需要通过以下方式将 X 链接到 Y Z 的方式。它很混乱，有点令人困惑，但我花了 3 周时间编写了一个 SQL/PHP 脚本，它提取了 1) 产品数据、2) 类别数据、3) 客户数据和 4) 订单数据。我还为管理员后端用户和偏好写了一篇。这是在我发现上述工具之前。

**编辑** 我可能会添加，该扩展名只需 200.00 美元。你的雇主要花费多少开发时间来开发你的出路？根据您的每小时费用（我知道我收取的费用，200 美元会很便宜）获得延期可能更有意义。

# ios - 在 iOS 和 OSX 上使用 unsigned int 和 unsigned long 编译 NSLog 而不会发出警告

> ID：14349844
> 
> 赞同：8
> 
> 时间：2013-01-16T01:05:45.680
> 
> 标签：ios, xcode, macos

在 iOS`NSUInteger`上是`unsigned int`，在 OSX 上是`unsigned long`. 我怎样才能做出像这样的打印声明

```
 NSLog(@"Array has %d elements.",[array count]); 
```

在没有警告的情况下在两个平台上编译？我当然可以使用一个`#ifdef #else #endif`构造，但这会添加 4 行代码。我还可以将返回值转换为无符号整数。有更短的解决方案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T01:09:12.427

一个演员到两者中的较大者怎么样？

```
NSLog(@"Array has %ld elements.",(unsigned long)[array count]); 
```

iOS 中没有警告，我认为这在 OSX 中是无操作的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-07T10:47:41.850

一个演员到两者中的较大者怎么样？

```
NSLog(@"Array has %ld elements.",(unsigned long)[array count]);
No warning in iOS, and I think it's a no-op in OSX. 
```

# wpf - VirtualizingStackPanel 中基于 WPF 4.0 像素的滚动

> ID：14349848
> 
> 赞同：2
> 
> 时间：2013-01-16T01:06:03.153
> 
> 标签：wpf, ui-virtualization

我有以下 XAML 片段：

```
<ItemsControl ItemsSource="..." ItemTemplate="..." VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Standard" ScrollViewer.CanContentScroll="True">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Vertical" utils:VirtualizingStackPanelAttachedProperties.IsPixelBasedScrollingEnabled="True"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.Template>
        <ControlTemplate>
            <Border BorderThickness="..." Padding="..." BorderBrush="..." Background="..." SnapsToDevicePixels="True">
               <ScrollViewer Padding="..." Focusable="False">
                   <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
               </ScrollViewer>
            </Border>
        </ControlTemplate>
    </ItemsControl.Template>
</ItemsControl> 
```

如您所见，我有 ScrollViewer.CanContentScroll="True" 和 utils:VirtualizingStackPanelAttachedProperties.IsPixelBasedScrollingEnabled="True" （这是一个附加属性，将 IsPixelBased 内部属性设置为 true，如此处所建议[）](https://stackoverflow.com/questions/1977929/wpf-listbox-with-a-listbox-ui-virtualization-and-scrolling)。

这在 Windows XP 中按预期工作，其中滚动是细粒度的、基于像素的。
但是，这在滚动仍然基于项目的 Windows 7 中无法按预期工作，这与未将上述附加属性设置为 True 时在 Windows XP 中相同。
我可以在 Windows 7 中获得基于像素的滚动的唯一方法是将 CanContentScroll 设置为 False，但这会关闭虚拟化。

知道为什么会这样吗？是不是在 Windows XP 中，虚拟化虽然已启用但并没有真正起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:24:40.597

很可能内部属性被设置回 false。正如 CLR 4.5 中的链接中提到的，您可以将 ScrollUnit 设置为像素。所以也许你在那个系统上有 Clr 4.5，因为它没有被设置为像素，所以 IsPixelBased 被设置回来。您可以更改附加的行为以设置 ScrollUnit（如果存在）。

# android - 以编程方式为 viewflipper 创建子视图

> ID：14349850
> 
> 赞同：1
> 
> 时间：2013-01-16T01:06:15.587
> 
> 标签：android, view, viewflipper

我已经尝试使用 xml 作为 viewflipper 的所有子视图的容器来使 viewflipper 工作，就像这样。

```
<ViewFlipper
android:layout_margin="6dip"
android:id="@+id/view_flipper"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center">
    <TextView
    android:layout_height="wrap_content"
     android:layout_width="wrap_content"
    android:textStyle="bold"
    android:textColor="#00ff00"
    android:textSize="14sp"
    android:text="A dog limps into a saloon and says...">
    </TextView>
    </LinearLayout>

    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center">
    <TextView
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:textStyle="bold"
    android:textColor="#00ff00"
    android:textSize="14sp"
    android:text="I'm looking for the man who shot my paw!">
    </TextView>

    </LinearLayout>
</ViewFlipper> 
```

现在，我需要在游戏的Create 上创建那些子视图。我正在尝试创建一个仅在屏幕上显示 5x5 的 100x100 地图。这 100 x 100 包含将通过 viewflipper 仅显示 5x5 的图像，当用户滑动屏幕时，将显示另一组 5x5 图像。因此，我需要制作一个动态视图鳍状肢。有任何想法吗？另外，我打算通过加速度计做这个动画。有任何想法吗？

# binary - 来自 binary_to_term 的“Rest”二进制文件

> ID：14349851
> 
> 赞同：3
> 
> 时间：2013-01-16T01:06:18.583
> 
> 标签：binary, erlang, bert-rpc

我想用tcp来捕捉BERT编码的消息，我有点困惑。binary_to_term(X) 只解码第一项，没有给我剩下的二进制文件，也没有说明它使用了多少。使用 term_to_binary(X) 进行编码以查看其大小不是一个选项，因为 BERT 编码方法不同（例如，它将所有整数编码为长整数）。

那么，我该如何解码这些消息呢？唯一有效的选项是传递二进制大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:49:54.797

在术语本身之前发送编码术语的大小。你甚至可以使用 {packet, 2} 选项来读取这样的数据包。

# objective-c - 如何在不提供绝对路径的情况下获取 Xcode 中资源文件夹的路径？

> ID：14349854
> 
> 赞同：1
> 
> 时间：2013-01-16T01:06:44.777
> 
> 标签：objective-c, xcode, macos, cocoa

我有这段代码：

```
NSPasteboard *pboard = [NSPasteboard pasteboardWithName:NSDragPboard];
[pboard declareTypes:[NSArray arrayWithObject:NSURLPboardType] owner:nil];
[pboard writeObjects:[NSArray arrayWithObject:[NSURL fileURLWithPath:@"/Users/dw/Desktop/macapp/Menulet/logo.png"]]]; 
```

而且我不想使用绝对路径，但是当我尝试仅使用“logo.png”时，会出现以下错误：

```
NSURLs written to the pasteboard via NSPasteboardWriting must be absolute URLs.  NSURL 'logo.png -- file://localhost/Users/dw/Library/Developer/Xcode/DerivedData/Menulet-bvwpfkjlcufhxubvaxubgnubtfgi/Build/Products/Debug/' is not an absolute URL. 
```

反正有没有硬编码它？logo.png 目前在我的 Xcode 资源文件夹中。

**编辑：** 我怎样才能获得目录路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T01:08:21.997

这应该是诀窍：

```
[[NSBundle mainBundle] pathForResource:@"logo" ofType:@"png"] 
```

文档[在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)。

# knockout.js - 动态视图模型

> ID：14349860
> 
> 赞同：1
> 
> 时间：2013-01-16T01:07:19.917
> 
> 标签：knockout.js, knockout-mapping-plugin

如何从通过 Ajax 返回的 JS 对象构建动态视图模型？

在创建可观察对象和可观察数组时，视图不包含任何数据，除非每次获取后绑定，导致多次绑定警报。

我的JS

```
var SummaryData = {
  Summary: {
    Count: 4
  }
};

var DetailsData = {
  Status: [{
    Name: "One",
    Type: 1
  }, {
    Name: "Two",
    Type: 1
  }, {
    Name: "Three",
    Type: 0,
    Taco: "True"
  }]
};
var self = this;
self.Summary = new ko.observableArray([]);
self.Details = ko.observable();
self.Load = function () {

$.ajax({
      url: "/echo/json/",
      data: SummaryData,
      type: "GET",
      success: function (data) {
        // Map the returned JSON to the View Model  
        self.Summary = ko.mapping.fromJS(data.Summary);
      }
})
$.ajax({
      url: "/echo/json/",
      data: DetailsData,
      type: "GET",
      success: function (data) {
        // Map the returned JSON to the View Model  
        self.Details = ko.mapping.fromJS(data.Status);
      }
}) 
```

我的 HTML：

```
<span data-bind="text: Summary.Count"></span>
<table data-bind="foreach: Details">
    <tr>
        <td data-bind="text: Name"></td>
        <td><button data-bind="click: $root.Clicked"></button></td>
    </tr>
</table> 
```

[http://jsfiddle.net/atwoodkevin/q8EKP/40/](http://jsfiddle.net/atwoodkevin/q8EKP/40/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:27:17.920

关键是初始化可观察对象并明智地使用绑定（例如`with`、`if`和`foreach`），在可观察对象中设置非空值之前不会绑定子元素。当您通过 AJAX 获取数据时，设置 observables（使用 () 形式），而不是重新定义。映射直接数组（即未嵌入对象中）的处理方式可能略有不同，通过调用`ko.mapping`空数组进行初始化，然后使用更新映射`ko.mapping.fromJS(data.Status, self.Details)`

另外两点：

既然你传入`View.Load()`了`ko.applyBindings`那个，你必须从那个方法返回你的 ViewModel。

您的`Clicked`处理程序应该在 ViewModel 中。

--

这是一个正常工作的小提琴：http: [//jsfiddle.net/jearles/q8EKP/43/](http://jsfiddle.net/jearles/q8EKP/43/)

# php - 无法从 php 中的 XML 检索数据

> ID：14349863
> 
> 赞同：-1
> 
> 时间：2013-01-16T01:07:38.847
> 
> 标签：php, xml, data-retrieval

```
<?xml version="1.0" encoding="windows-1252" standalone="no"?>
<Xmd_toc REPOSITORY_FORMAT="1.0" PRXML_VER="2.0" PUBLICATION="HeadLine" PUBLICATION_DESCRIPTION="" ISSUE_DATE="15/12/2012" RELEASE_NO="WEB_2012_12_15_DoublePages" LANGUAGE="English">
    <Head_np>
        <Meta PAGES_NUMBER="80" SOURCE_TYPE="PDF" SOURCE_RESOLUTION="216" IMAGES_RESOLUTION="150" PAGE_THUMBNAIL_RESOLUTION="142" PAGE_PREVIEW_RESOLUTION="30" DEFAULT_IMG_EXT="png" DEFAULT_PREVIEW_IMG_EXT="png" BASE_HREF="HeadLine/2012/12/15" PDF_DESTINATION_MAPPED="OLV0_Page_0001" TITLE_SNP_EXT="png" AD_SNP_EXT="jpg" IMAGE_SNP_EXT="jpg" MULTI_LAYER_PAGE_IMG="true">
            <Publisher XMD_VER="2.6.238.11" ACROBAT_VER="8.14" PUBLISHER="Olive" PROFILE_ID="HeadLine.ini">
                <PublishDate>Fri, 14 Dec 2012 19:18:14 UTC</PublishDate>
                <PublishSWFCompatible>false</PublishSWFCompatible>
            </Publisher>
            <Resolutions>
                <Resolution DEFAULT="true">142</Resolution>
            </Resolutions>
            <LayerResolutions>
                <Resolution DEFAULT="true" GRAPHIC_IMG_EXT="jpg">142</Resolution>
            </LayerResolutions>
        </Meta>
        <Link SOURCE="WEB_2012_12_15_DoublePages.pdf"/>
        <DataFiles>
            <Files TYPE="DOC_PDF" PRESENT="1"/>
            <Files TYPE="PAGE_PDF" PRESENT="0"/>
            <Files TYPE="DOC_IMG" PRESENT="0"/>
            <Files TYPE="PAGE_IMG" PRESENT="0"/>
            <Files TYPE="PAGE_VIEW_IMG" PRESENT="1"/>
            <Files TYPE="PAGE_PREVIEW_IMG" PRESENT="1"/>
            <Files TYPE="PRIMITIVE_IMG" PRESENT="1"/>
            <Files TYPE="SNIPPET_IMG" PRESENT="1"/>
        </DataFiles>
    </Head_np>
    <Body_np>
        <Section NAME="Cover">
            <Page PAGE_NO="1" NAME="" ID="Pg001" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/1/Pg001">
                <Entity ENTITY_TYPE="Article" PAGE_NO="1" NAME="Main News" ID="Ar00100" HREF="/1/Ar00100" SIZE="Small" IMAGES_RESOLUTION="150"/>
            </Page>
            <Page PAGE_NO="2" NAME="" ID="Pg002" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/2/Pg002"/>
            <Page PAGE_NO="3" NAME="" ID="Pg003" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/3/Pg003"/>
            <Page PAGE_NO="4" NAME="" ID="Pg004" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/4/Pg004"/>
            <Page PAGE_NO="5" NAME="" ID="Pg005" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/5/Pg005"/>
            <Page PAGE_NO="6" NAME="" ID="Pg006" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/6/Pg006">
                <Entity ENTITY_TYPE="Article" PAGE_NO="6" NAME="Local News" ID="Ar00600" HREF="/6/Ar00600" SIZE="Small" IMAGES_RESOLUTION="150"/>
            </Page>
            <Page PAGE_NO="7" NAME="" ID="Pg007" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/7/Pg007"/>
            <Page PAGE_NO="8" NAME="" ID="Pg008" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/8/Pg008"/>
            <Page PAGE_NO="9" NAME="" ID="Pg009" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/9/Pg009"/>
            <Page PAGE_NO="10" NAME="" ID="Pg010" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/10/Pg010"/>
            <Page PAGE_NO="11" NAME="" ID="Pg011" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/11/Pg011"/>
            <Page PAGE_NO="12" NAME="" ID="Pg012" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/12/Pg012"/>
            <Page PAGE_NO="13" NAME="" ID="Pg013" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/13/Pg013"/>
            <Page PAGE_NO="14" NAME="" ID="Pg014" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/14/Pg014"/>
            <Page PAGE_NO="15" NAME="" ID="Pg015" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/15/Pg015"/>
            <Page PAGE_NO="16" NAME="" ID="Pg016" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/16/Pg016"/>
            <Page PAGE_NO="17" NAME="" ID="Pg017" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/17/Pg017"/>
            <Page PAGE_NO="18" NAME="" ID="Pg018" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/18/Pg018"/>
            <Page PAGE_NO="19" NAME="" ID="Pg019" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/19/Pg019"/>
            <Page PAGE_NO="20" NAME="" ID="Pg020" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/20/Pg020"/>
            <Page PAGE_NO="21" NAME="" ID="Pg021" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/21/Pg021"/>
            <Page PAGE_NO="22" NAME="" ID="Pg022" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/22/Pg022"/>
            <Page PAGE_NO="23" NAME="" ID="Pg023" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/23/Pg023"/>
            <Page PAGE_NO="24" NAME="" ID="Pg024" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/24/Pg024"/>
            <Page PAGE_NO="25" NAME="" ID="Pg025" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/25/Pg025"/>
            <Page PAGE_NO="26" NAME="" ID="Pg026" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/26/Pg026"/>
            <Page PAGE_NO="27" NAME="" ID="Pg027" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/27/Pg027"/>
            <Page PAGE_NO="28" NAME="" ID="Pg028" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/28/Pg028"/>
            <Page PAGE_NO="29" NAME="" ID="Pg029" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/29/Pg029"/>
            <Page PAGE_NO="30" NAME="" ID="Pg030" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/30/Pg030"/>
            <Page PAGE_NO="31" NAME="" ID="Pg031" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/31/Pg031"/>
            <Page PAGE_NO="32" NAME="" ID="Pg032" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/32/Pg032"/>
            <Page PAGE_NO="33" NAME="" ID="Pg033" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/33/Pg033"/>
            <Page PAGE_NO="34" NAME="" ID="Pg034" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/34/Pg034"/>
            <Page PAGE_NO="35" NAME="" ID="Pg035" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/35/Pg035"/>
            <Page PAGE_NO="36" NAME="" ID="Pg036" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/36/Pg036"/>
            <Page PAGE_NO="37" NAME="" ID="Pg037" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/37/Pg037"/>
            <Page PAGE_NO="38" NAME="" ID="Pg038" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/38/Pg038"/>
            <Page PAGE_NO="39" NAME="" ID="Pg039" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/39/Pg039"/>
            <Page PAGE_NO="40" NAME="" ID="Pg040" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/40/Pg040"/>
            <Page PAGE_NO="41" NAME="" ID="Pg041" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/41/Pg041"/>
            <Page PAGE_NO="42" NAME="" ID="Pg042" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/42/Pg042"/>
            <Page PAGE_NO="43" NAME="" ID="Pg043" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/43/Pg043"/>
            <Page PAGE_NO="44" NAME="" ID="Pg044" PAGE_TYPE="Double_First" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 3243 1901" HREF="/44/Pg044"/>
            <Page PAGE_NO="45" NAME="" ID="Pg045" PAGE_TYPE="Double_Second" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="-1621 0 1621 1901" HREF="/45/Pg045"/>
            <Page PAGE_NO="46" NAME="" ID="Pg046" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/46/Pg046"/>
            <Page PAGE_NO="47" NAME="" ID="Pg047" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/47/Pg047"/>
            <Page PAGE_NO="48" NAME="" ID="Pg048" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/48/Pg048">
                <Entity ENTITY_TYPE="Article" PAGE_NO="48" NAME="China &amp; International" ID="Ar04800" HREF="/48/Ar04800" SIZE="Small" IMAGES_RESOLUTION="150"/>
            </Page>
            <Page PAGE_NO="49" NAME="" ID="Pg049" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/49/Pg049">
                <Entity ENTITY_TYPE="Article" PAGE_NO="49" NAME="Finance" ID="Ar04900" HREF="/49/Ar04900" SIZE="Small" IMAGES_RESOLUTION="150"/>
            </Page>
            <Page PAGE_NO="50" NAME="" ID="Pg050" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/50/Pg050">
                <Entity ENTITY_TYPE="Article" PAGE_NO="50" NAME="Property" ID="Ar05000" HREF="/50/Ar05000" SIZE="Small" IMAGES_RESOLUTION="150"/>
            </Page>
            <Page PAGE_NO="51" NAME="" ID="Pg051" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/51/Pg051"/>
            <Page PAGE_NO="52" NAME="" ID="Pg052" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/52/Pg052">
                <Entity ENTITY_TYPE="Article" PAGE_NO="52" NAME="Sports" ID="Ar05200" HREF="/52/Ar05200" SIZE="Small" IMAGES_RESOLUTION="150"/>
            </Page>
            <Page PAGE_NO="53" NAME="" ID="Pg053" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/53/Pg053"/>
            <Page PAGE_NO="54" NAME="" ID="Pg054" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/54/Pg054"/>
            <Page PAGE_NO="55" NAME="" ID="Pg055" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/55/Pg055"/>
            <Page PAGE_NO="56" NAME="" ID="Pg056" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/56/Pg056"/>
            <Page PAGE_NO="57" NAME="" ID="Pg057" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/57/Pg057"/>
            <Page PAGE_NO="58" NAME="" ID="Pg058" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/58/Pg058"/>
            <Page PAGE_NO="59" NAME="" ID="Pg059" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/59/Pg059"/>
            <Page PAGE_NO="60" NAME="" ID="Pg060" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/60/Pg060">
                <Entity ENTITY_TYPE="Article" PAGE_NO="60" NAME="Feature" ID="Ar06000" HREF="/60/Ar06000" SIZE="Small" IMAGES_RESOLUTION="150"/>
            </Page>
            <Page PAGE_NO="61" NAME="" ID="Pg061" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/61/Pg061"/>
            <Page PAGE_NO="62" NAME="" ID="Pg062" PAGE_TYPE="Double_First" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 3243 1901" HREF="/62/Pg062"/>
            <Page PAGE_NO="63" NAME="" ID="Pg063" PAGE_TYPE="Double_Second" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="-1621 0 1621 1901" HREF="/63/Pg063"/>
            <Page PAGE_NO="64" NAME="" ID="Pg064" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/64/Pg064"/>
            <Page PAGE_NO="65" NAME="" ID="Pg065" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/65/Pg065"/>
            <Page PAGE_NO="66" NAME="" ID="Pg066" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/66/Pg066"/>
            <Page PAGE_NO="67" NAME="" ID="Pg067" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/67/Pg067"/>
            <Page PAGE_NO="68" NAME="" ID="Pg068" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/68/Pg068">
                <Entity ENTITY_TYPE="Article" PAGE_NO="68" NAME="Entertainment" ID="Ar06800" HREF="/68/Ar06800" SIZE="Small" IMAGES_RESOLUTION="150"/>
            </Page>
            <Page PAGE_NO="69" NAME="" ID="Pg069" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/69/Pg069"/>
            <Page PAGE_NO="70" NAME="" ID="Pg070" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/70/Pg070"/>
            <Page PAGE_NO="71" NAME="" ID="Pg071" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/71/Pg071"/>
            <Page PAGE_NO="72" NAME="" ID="Pg072" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/72/Pg072"/>
            <Page PAGE_NO="73" NAME="" ID="Pg073" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/73/Pg073"/>
            <Page PAGE_NO="74" NAME="" ID="Pg074" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/74/Pg074"/>
            <Page PAGE_NO="75" NAME="" ID="Pg075" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/75/Pg075"/>
            <Page PAGE_NO="76" NAME="" ID="Pg076" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/76/Pg076"/>
            <Page PAGE_NO="77" NAME="" ID="Pg077" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/77/Pg077"/>
            <Page PAGE_NO="78" NAME="" ID="Pg078" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/78/Pg078"/>
            <Page PAGE_NO="79" NAME="" ID="Pg079" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/79/Pg079"/>
            <Page PAGE_NO="80" NAME="" ID="Pg080" PAGE_TYPE="Single" PAGE_WIDTH="1622" PAGE_HEIGHT="1902" CROP_BOX="0 0 1621 1901" MEDIA_BOX="0 0 1621 1901" HREF="/80/Pg080"/>
        </Section>
    </Body_np>
</Xmd_toc> 
```

我用这段代码来获取里面的 page_no 和 Name 但不起作用，为什么？谢谢

```
foreach($xml->children() as $Page){
      echo $Page->Entity['PAGE_NO'];
      echo "<br />";
      echo $Page->Entity['NAME'];
      echo "<br />";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:53:56.943

您需要跳过根元素（`$xml`已经隐含）和`<Body_Np>`您的`<Section>`，然后才能遍历`<Page>`条目：

```
foreach ($xml->Body_np[0]->Section[0]->children() as $Page) { 
```

如有疑问，请使用[`print_r`](http://php.net/print_r).

# perl - 为什么 NET::FTP 上传文件这么慢

> ID：14349866
> 
> 赞同：5
> 
> 时间：2013-01-16T01:08:05.933
> 
> 标签：perl, ftp

我的问题是关于使用 perl 将本地文件 ftp 到 ftp 服务器。问题是为什么上传速度这么慢。这是代码：

```
use strict;
use warning;

use NET::FTP;

my $ftpserver = "10.110.143.9";
my $usr       = "John";
my $passwd    = "John";

sub main {
    my $ftp = Net::FTP->new( $ftpserver, Timeout => 200 ) or print "Can't connect ftpserver" sleep 5;
    my $rc = $ftp->login( $usr, $passwd );
    unless ($rc) {
        print("login failed!");
        return 1;
    }
    print("login success");
    $ftp->binary();
    $ftp->put("d:\\2012.txt");
    $ftp->quit;
    return 0;
} 
```

30mb 的上传时间约为 5 分钟，而在同一台机器上使用另一个 ftp 客户端只需 10 秒左右。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T01:37:12.830

您应该启用`PassiveMode`，并使用`BlockSize`（它曾经是减速的来源`Net::FTP`），如下所示：

```
my $ftp = new Net::FTP(
    $ftpserver,
    Timeout => 200,
    Passive => 1,
    BlockSize => 8192,
); 
```

尝试增加（或减少）`BlockSize`2 倍，看看它是否改变了任何东西。

# actionscript-3 - 1009 错误 Flash 游戏 CS4 AS3

> ID：14349867
> 
> 赞同：0
> 
> 时间：2013-01-16T01:08:17.927
> 
> 标签：actionscript-3, flash

我正在编写一个 Flash 游戏，其中球击中一个影片剪辑对象，这会将用户带到一个新场景。我有 3 个主要方法：movePaddle、moveBall 和 changeFrame。

它工作正常，但是当我执行 changeFrame 方法（球击中影片剪辑）转到新帧时，我得到一整页的 1009 错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。
> `at FlashGameNEW_fla::MainTimeline/changeFrame()`
> 
> TypeError：错误 #1009：无法访问空对象引用的属性或方法。
> `at FlashGameNEW_fla::MainTimeline/movePaddle()`
> 
> TypeError：错误 #1009：无法访问空对象引用的属性或方法。
> `at FlashGameNEW_fla::MainTimeline/moveBall()`

这重复了很多次。

任何帮助将不胜感激。谢谢。

编辑：下面的代码

```
function beginCode():void{

mcPaddle.addEventListener(Event.ENTER_FRAME, movePaddle);
mcBall.addEventListener(Event.ENTER_FRAME, moveBall);
mcBall.addEventListener(Event.ENTER_FRAME, changeFrame);
}

function movePaddle(event:Event):void{

mcPaddle.x = mouseX - mcPaddle.width / 2;

if(mouseX < mcPaddle.width / 2){
    //Keep the paddle on stage
    mcPaddle.x = 0;
}

if(mouseX > stage.stageWidth - mcPaddle.width / 2){

    mcPaddle.x = stage.stageWidth - mcPaddle.width;
}
}

function changeFrame(event:Event):void{
if (mcBall.hitTestObject(Northcote)) {  
    this.gotoAndPlay(3);  
              }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:07:28.913

问题是您在第 3 帧中没有 mcPaddle 和 mcBall 的实例（例如，它们现在没有创建，稍后会创建）。检查现有实例：

```
function movePaddle(event:Event):void {    
    if (!mcPaddle)
        return;

    mcPaddle.x = mouseX - mcPaddle.width / 2;

    if(mouseX < mcPaddle.width / 2){
        //Keep the paddle on stage
        mcPaddle.x = 0;
    }

    if(mouseX > stage.stageWidth - mcPaddle.width / 2) {    
        mcPaddle.x = stage.stageWidth - mcPaddle.width;
    }
}

function changeFrame(event:Event):void{
    if (mcBall && Northcote && mcBall.hitTestObject(Northcote)) {  
        this.gotoAndPlay(3);  
    }    
} 
```

# r - 以编程方式关闭由 `View(x)` 创建的窗口

> ID：14349868
> 
> 赞同：29
> 
> 时间：2013-01-16T01:08:20.377
> 
> 标签：r

我正在使用 R 查看数据框`View`：

```
my_df <- data.frame(a=1:10, b=letters[1:10])
View(my_df) 
```

**我现在想以编程方式关闭生成的窗口（而不是单击 X 按钮）。**

我该怎么做？`graphics.off`不起作用，因为它不是图形设备。查看`View`代码，内部函数`dataviewer`用于显示窗口，但我不确定它在后台使用什么（tcltk？）所以不知道如何关闭窗口。

* * *

关于我为什么想要这个的一些评论。

我基本上是在脚本中执行用户检查步骤，询问用户数据帧的片段和相应的图像是否一起出现。它是这样的：

```
for (i in 1:heaps) {

    1\. View(a snippet of a big dataframe)
    2\. show an image

    3\. readline('Is this OK? [Y/N]: ') (store the i for which it's not OK)

    4\. close the image window (graphics.off()), close the View(..) window.
} 
```

我基本上想减少凝视图像和数据框片段并输入 Y 或 N 的用户交互，因此他们不必为`i`循环中的每个手动关闭数据框窗口。

（我自己已经完成了这个验证，并且正在处理 200 个`View(snippet)`我懒得关闭 D: 的窗口。另外，已经注意到打开窗口会从提示中窃取键盘焦点，所以我输入 Y/ N没有我想要的那么快。但我只需要这样做一次，所以现在就可以了。我很好奇这个问题的答案，下一次）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T12:48:51.393

完成您所追求的一种方法是利用该`system`功能。例如，您可以确定窗口 ID/名称，然后发出关闭命令，如下所示：

```
system('(sleep 10; wmctrl -c "Data: my_df") &') 
```

上述命令将等待 10 秒，然后向窗口管理器发出命令以关闭任何名为**"Data: my_df"**的窗口。这两个命令被包裹在括号中。这在 bash中称为**复合命令。**整个**复合命令**是背景的，'&'。

我测试了以下内容并且它有效：

```
# sample1.R
my_df <- data.frame(a=1:10, b=letters[1:10])
system('(sleep 10; wmctrl -c "Data: my_df") &')
View(my_df) 
```

实现此目的的另一种方法是这样的：

```
# sample2.R
my_df <- data.frame(a=1:10, b=letters[1:10])
View(my_df)
system('read -p "Press [Enter] key to start backup..."')
my_df2 <- data.frame(a=1:10, b=letters[1:10])
View(my_df2)
system('read -p "Press [Enter] key to start backup..."') 
```

我像这样运行这些：

```
R CMD BATCH sample2.R 
```

**注意：**命令的提示`read -p`没有显示在我的终端中，但您可以在 R 中打印重复的提示消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-31T12:01:24.163

如果你想关闭所有打开的“查看”窗口，基于 slm 的答案：

```
CloseViews <- function(){
    cmd <- paste0('wmctrl -c "Data:" -v')
    ok <- TRUE
    while(ok){
        out <- suppressWarnings(system(cmd,intern=TRUE,ignore.stderr=TRUE))
        Sys.sleep(0.2)
        ok <- is.null(attr(out,"status"))
        print(ok)
    }
} 
```

然后`CloseViews()`是诀窍，我发现在交互工作时特别有用。

# iphone - 取 CGFloat 的绝对值

> ID：14349874
> 
> 赞同：37
> 
> 时间：2013-01-16T01:08:43.713
> 
> 标签：iphone, ios, objective-c, ipad

我怎样才能做到这一点？我尝试了 abs() 但它只适用于 int。有内置的方法吗？

```
CGFloat flo = -123;
abs(flo) 
```

这返回 0

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-16T01:12:16.557

使用 fabs()

```
CGFloat f = -123.4f;
CGFloat g = fabs(f); 
```

`CGFloat`被定义为`double`在 64 位机器上和`float`在 32 位机器上。如果您同时针对 64 位和 32 位，则此答案会变得更加复杂，但仍然正确。

您想使用`fabs()`它是因为它适用于`double`大于`float`. 在 32 位上，仅当您采用 a或的绝对值时，才可以将`fabs()`(which is a ) 的返回值分配给`double`a `CGFloat`(which is a ) 。如果您尝试存储大数的绝对值，则可能会溢出 32 位。简而言之，64 位很好，在 32 位上不要混用，你会没事的。`float``CGFloat``float``CGFloat``double``double``CGFloat`

该`ABS()`宏显然会对某些编译器产生副作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-09T03:55:47.707

对于 64/32 位系统

```
#if CGFLOAT_IS_DOUBLE
    CGFloat g = fabs(flo);
#else
    CGFloat g = fabsf(flo);
#endif 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-10T04:50:14.313

我通常只使用 ABS 宏，据我所知，无论您使用哪个系统或使用哪个原语，它都可以工作。

```
CGFloat x = -1.1;
double y = -2.1;
NSInteger z = -5;

x = ABS(x);
y = ABS(y);
z = ABS(z); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-09T11:36:58.820

小补充：

```
CGFloat g = fabs(f); 
```

这将导致强制转换警告，因为 fabs() 返回一个双精度值。要返回浮点值，您需要使用 fabsf()。

```
CGFloat g = fabsf(f); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-18T18:55:46.307

`fabs`已贬值。的签名`abs`现在与此签名通用

```
/// Returns the absolute value of the given number.
///
/// The absolute value of `x` must be representable in the same type. In
/// particular, the absolute value of a signed, fixed-width integer type's
/// minimum cannot be represented.
///
///     let x = Int8.min
///     // x == -128
///     let y = abs(x)
///     // Overflow error
///
/// - Parameter x: A signed number.
/// - Returns: The absolute value of `x`.
@inlinable public func abs<T>(_ x: T) -> T where T : Comparable, T : SignedNumeric 
```

# session - XMPP 多个选项卡同步发送的消息

> ID：14349875
> 
> 赞同：1
> 
> 时间：2013-01-16T01:08:52.487
> 
> 标签：session, xmpp, openfire, strophe

我正在使用 Strophe.js 在网站中实现 Openfire 聊天客户端。我设法获得多个会话和多个窗口重新加载页面并重新连接。现在我在恢复聊天记录方面遇到了挑战。但是当用户打开我们网站的两个选项卡时，我遇到的第一个问题会创建两个具有不同资源 ID 的 xmpp 会话，但现在说 a@example.com/tab1 向朋友发送了一条消息，这应该在 tab2 中同步

例如，如果您从 gtalk 发送聊天消息，用户发送的消息将被更新并显示在 gmail 聊天窗口中。

任何人都有任何想法。非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:20:39.987

多个资源的路由逻辑取决于服务器实现。GTalk 服务器将发送到**裸 Jid**的消息路由到所有连接的资源。许多其他服务器（也包括 Openfire）将消息发送到裸 Jids 到**最可用的资源**，这是具有最高优先级的资源。

如果您的每个选项卡都有自己的资源，那么我建议将消息​​发送到每个资源（**完整的 jid**）手册。您可以在状态下获得订阅联系人的所有连接资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T13:56:35.010

就在这里。看看 XEP-0280：消息碳（[http://xmpp.org/extensions/xep-0280.html](http://xmpp.org/extensions/xep-0280.html)）

您的客户端和服务器都必须支持它才能完全工作。

来源：[https ://superuser.com/questions/866785/is-there-a-way-to-sync-xmpp-messages-across-different-devices-with-standard-xmp](https://superuser.com/questions/866785/is-there-a-way-to-sync-xmpp-messages-across-different-devices-with-standard-xmp)

# c++ - C++ 中的静态全局变量

> ID：14349877
> 
> 赞同：48
> 
> 时间：2013-01-16T01:08:58.970
> 
> 标签：c++, variables, pointers, static, global

我想通过 malloc 方法制作一个整数数组。我希望这个数组是全局的，可以在我的程序中的任何地方使用。我将代码放在一个看起来像这样的头文件中：

```
static int *pieces; 
```

然后我有一个函数，用我想要的数字填充它。该函数位于命名空间中，并且命名空间在其自己的 .cpp 文件中实现。但是，我将头文件导入 main.c 并从创建数组的命名空间调用函数，如：

```
pieces = malloc(sizeof(int) * 128); 
```

但是当我尝试在 main 中访问数组中的数字时（在调用创建我的数组的函数之后），它崩溃并说没有初始化碎片。但是在我拥有的函数中，我可以创建它并很好地操纵其中的数字。我的印象是，通过使片段成为静态变量，只要任何地方的某个函数发生更改（或设置它），就会影响任何地方的变量的使用。基本上我想说的是为什么片段在main中出现未设置，即使我将它设置在我调用的函数中？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-16T01:13:26.563

`Static`是一个具有多种含义的关键字，在这种特殊情况下，它意味着**不是全局**的（释义）

这意味着每个**`.cpp`文件都有自己**的变量副本。因此，当您在 中初始化时`main.cpp`，**它仅在 中初始化`main.cpp`**。其他文件仍未初始化。

解决这个问题的第一件事是删除关键字`static`。这将导致“多重定义问题”。要解决此问题，您应该在文件中定义变量，`.cpp`然后在头文件中将其 extern 声明。

* * *

编辑：您只是为其分配内存，**不算作初始化**。分配后需要将内存初始化为0。

您可以使用`new int[128]()`而不是更冗长的`malloc`语法，这也会[执行初始化](https://stackoverflow.com/a/7546745/1520364)吗？或者你可以走简单的路（这就是它的用途）并使用[`std::vector`](http://www.cplusplus.com/reference/vector/vector/)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-16T01:16:17.470

关键是这样的：

```
static int *pieces; 
```

你说你把它放在你的标题中。这不是导出符号的方法。任何包含标头的文件都将获得自己的静态版本的未初始化指针，称为`pieces`.

相反，你把它放在你的标题中：

```
extern int *pieces;

extern int init_pieces(); 
```

在源文件中，您可以这样做：

```
static const size_t num_pieces = 128;

int *pieces = 0;

int init_pieces()
{
    pieces = malloc( num_pieces * sizeof(int) );
    return pieces != NULL;
} 
```

现在，当您包含标头时，您的源文件将知道`pieces`从其他地方获取，并等待链接器确定在哪里。我还为数组建议了一个“init”函数。但是，我没有放入“释放”功能。

请注意，这都是 C，而不是 C++。如果你使用的是 C++，你真的应该使用`new`或者更好，使用`vector`.

此外，在 C++ 中使用静态时，请注意：[C++ 静态初始化顺序](https://stackoverflow.com/questions/1005685/c-static-initialization-order)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-10-19T07:40:17.847

在 C++17 标准中，您可以使用`inline`说明符而不是静态。对于变量，这意味着每个对象单元都会有一个变量的副本，但链接器只会选择其中一个。或者，如[cppreference](https://en.cppreference.com/w/cpp/language/inline)所述：

> 内联函数或内联变量 (C++17 起) 具有以下属性：
> 
> 1) 只要每个定义出现在不同的翻译单元中，并且（对于非静态内联函数和变量（C+ +17)) 所有定义都是相同的。例如，内联函数或内联变量 (C++17 起) 可以在多个源文件中 #include 的头文件中定义。
> 
> 2) 内联函数或变量的定义（C++17 起）必须存在于访问它的翻译单元中（不一定在访问点之前）。
> 
> 3) 具有外部链接（例如未声明为静态）的内联函数或变量（C++17 起）具有以下附加属性：
> 
> ```
> 1) It must be declared inline in every translation unit.
> 
> 2) It has the same address in every translation unit. 
> ```

支持（[来源](https://en.cppreference.com/w/cpp/compiler_support#C.2B.2B17_features)）：

*   MSVC 自版本 19.12 (VS 2017 15.5)
*   海湾合作委员会 7
*   铿锵声 3.9
*   国际商会 18.0

在这种情况下，这意味着您可以更换

```
static int *pieces; 
```

和

```
inline int *pieces; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-18T20:20:28.103

对于各种架构上的高性能代码，您可能需要 malloc-y 分配而不是通用 new。那是因为你会用类似 mymalloc() 的东西来包装它，然后使用依赖于架构的函数，比如那些实现正确对齐以避免缓存未命中的函数，以及执行硬件制造商提供的其他漂亮事情，比如 IBM (Bluegene) 或英特尔（MIC）。所有这些优化的分配例程都有 malloc 类型的框架。

# java - 优化大文件的扫描仪性能

> ID：14349880
> 
> 赞同：1
> 
> 时间：2013-01-16T01:09:05.087
> 
> 标签：java, performance, optimization, split, buffer

我用 Java 编写了一个程序，使用 a`Scanner`从每行中获取由空格分隔的两个元素，以将其放入存储在`ArrayList`. 它工作得很好，但是当涉及到 10000 行的输入时，它会变得很长。我阅读了一些主题和网站（例如[this](http://www.cpe.ku.ac.th/~jim/java-io.html)），告诉`BufferedReader`我会比`Scanner`但我在尝试时没有看到任何改进。

以下是我迄今为止用来解析输入的每一行的行：

```
 String charsetName = "UTF-8";
  Scanner scanner = new Scanner(new BufferedInputStream(System.in), charsetName); 
```

然后我在调用的行数期间运行了一个循环：

```
 String[] mid = scanner.nextLine().split(" "); 
```

所以我试图用以下方式替换`Scanner`：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
String[] base = reader.readLine().split(" "); 
```

它没有改变任何东西（两种情况下 12000 行 8 秒）

我是否朝着正确的方向前进以使程序更快地运行？还是问题来自使用循环遍历每一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:42:40.147

我使用以下代码读取了一个**280,000 行**的文件（每行由两个单词组成，用空格分隔）并将它们拆分为一个空格。**花了 0.105 秒**。所以我想更多地了解你正在解析的行以及你正在用它做什么。请粘贴更多代码。

```
 public static void main(String args[]) throws Exception {

    Date start = new Date();

    BufferedReader b = new BufferedReader(new FileReader("aa.txt"));
    String line;
    while ((line = b.readLine())!=null) {
      String[] splat = line.split(" ");
    }
    b.close();

    Date end = new Date();
    System.out.println("Took " + (end.getTime() - start.getTime()) / 1000.0 + " seconds");
  } 
```

我修改了上面的代码，将每个 splat 数组添加到数组列表中（不确定你为什么要这样做，但我猜这就是你想要做的，从你的 OP）。代码减慢到 0.244 秒。仍然不到一秒钟。请提供更多信息。

**补充 - 完整代码**（编译`javac Julien.java`）。*请记住将 aa.txt 替换为您的文件名。*

```
import java.util.*;
import java.io.*;

public class Julien {

  public static void main(String args[]) throws Exception {

    Date start = new Date();
//    List arrl = new ArrayList();
    BufferedReader b = new BufferedReader(new FileReader("aa.txt"));
    String line;
    while ((line = b.readLine())!=null) {
      String[] splat = line.split(" ");
//      arrl.add(splat);
    }
    b.close();
    Date end = new Date();
    System.out.println("Took " + (end.getTime() - start.getTime()) / 1000.0 + " seconds");
  }
} 
```

# c - 读取虚拟磁盘 MBR 的方法

> ID：14349888
> 
> 赞同：0
> 
> 时间：2013-01-16T01:09:40.637
> 
> 标签：c, linux, disk-partitioning, mbr

我正在尝试构建我自己的 C 程序，它基本上就像 fdisk vdisk 'p' 命令一样工作。我只想能够读取磁盘的前 512 个字节，查找分区的开头（0x1BE），然后读取分区类型、名称、大小等。我不确定如何实际读取这些值。我已经使用 read() linux 函数读取 512 个字节，但是当我尝试以任何方式显示/查看它们时，什么都没有显示。我究竟做错了什么？

```
int main(int argc, char *argv[]) {
    int bytes_read;
    char mbr[512];
    int file;
    if(argc == 1) {
        // Print some help info
        printf ("Here is some help info: \n\n");
    } else if(argc < 3) {
        printf("File: %s\n\n", argv[1]);
        file = open(argv[1], O_RDONLY);
        lseek(bytes_read, 0, 0);
        //First get the MBR
        bytes_read = read(file, mbr, 512);
        printf("MBR=%s\n\nbytes_read=%d\n\n", mbr, bytes_read);
    } else {
        printf ("Incorrect usage: fdisk <disk>\n\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:23:41.280

不要尝试使用`printf`二进制数据。如果您的二进制数据以`NUL`(ASCII 0) 开头，那么 printf 将假定您有一个空字符串。您可以`write()`用来写出任意数据（它需要一个缓冲区和长度），例如：

```
#include <unistd.h>

write(STDOUT_FILENO, mbr, 512) 
```

...但即使这样也不一定会*显示*任何有用的信息，因为您的终端可能会尝试解释输出中的控制字符。最好的办法是将输出通过管道传输到`xxd`or之类的东西`od`，这两者都会产生其输入数据的十六进制转储。

例如，我本地驱动器的前 512 个字节都是`NUL`. 在您的代码中使用`write()`（并删除它`lseek`）会导致`NUL`输出 512 个字节。尝试将磁盘以外的其他内容传递给您的代码，例如：

```
myexe /etc/passwd 
```

[这里](https://en.wikipedia.org/wiki/Master_boot_record)记录了标准 DOS MBR 的结构，建议您可以从以下数据结构开始：

```
struct _partition {
        uint8_t         status;
        uint8_t         chs_start[3];
        uint8_t         part_type;
        uint8_t         chs_end[3];
        uint32_t        lba_start;
        uint32_t        sectors;
}; 
```

并像这样填充它：

```
 fd = open(target, O_RDONLY);
        lseek(fd, 446, SEEK_SET);
        for (i=0; i<4; i++) {
                struct _partition p;

                bytes_read = read(fd, &p, sizeof(struct _partition));

                // assume this prints information to stdout or something.
                print_part(i, &p);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:23:44.900

摆脱`lseek`. 您的编译器现在应该发出警告，因为您正在向它传递一个`bytes_read`尚未初始化的参数 ( )。

完成后，您需要做一些事情来显示内容；现在，您没有任何东西可以使用您读取的数据。

# regex - 如何使用正则表达式提取 json 字段？

> ID：14349889
> 
> 赞同：14
> 
> 时间：2013-01-16T01:10:06.147
> 
> 标签：regex, json, text, replace, editpad

初学者正则表达式问题。我在一个文本文件中有几行 JSON，每行都有稍微不同的字段，但是如果有的话，我想为每行提取 3 个字段，而忽略其他所有内容。我将如何使用正则表达式（在编辑板或其他任何地方）来做到这一点？

**例子：**

```
"url":"http://www.netcharles.com/orwell/essays.htm",
"domain":"netcharles.com",
"title":"Orwell Essays & Journalism Section - Charles' George Orwell Links",
"tags":["orwell","writing","literature","journalism","essays","politics","essay","reference","language","toread"],
"index":2931,
"time_created":1345419323,
"num_saves":24 
```

我想提取 URL,TITLE,TAGS,

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-16T01:43:11.600

```
/"(url|title|tags)":"((\\"|[^"])*)"/i 
```

我想这就是你所要求的。我将立即提供一个解释。此正则表达式（由`/` - 您可能不必将它们放在编辑板中分隔）匹配：

```
" 
```

一个字面量`"`。

```
(url|title|tags) 
```

三个文字字符串“url”、“title”或“tags”中的任何一个 - 在正则表达式中，默认情况下，括号用于创建组，管道字符用于交替 - 就像逻辑“或”。要匹配这些文字字符，您必须转义它们。

```
":" 
```

另一个文字字符串。

```
( 
```

另一组的开始。（第 2 组）

```
 ( 
```

另一组 (3)

```
 \\" 
```

文字字符串`\"`- 你必须转义反斜杠，否则它将被解释为转义下一个字符，你永远不知道会做什么。

```
 | 
```

或者...

```
 [^"] 
```

除双引号外的任何单个字符 方括号表示字符类/集，或要匹配的字符列表。任何给定的类都与字符串中的一个字符完全匹配。`^`在类的开头使用克拉 ( ) 会否定它，导致匹配器匹配类中不包含的任何内容。

```
 ) 
```

第三组结束...

```
 * 
```

星号导致前面的正则表达式（在本例中为第 3 组）重复零次或多次，在本例中导致匹配器匹配任何可能在 JSON 字符串的双引号内的内容。

```
)" 
```

第 2 组的结尾和文字`"`.

我在这里做了一些不明显的事情，可能会派上用场：

1.  第 2 组 - 当使用[反向](http://www.regular-expressions.info/brackets.html)引用取消引用时- 将是分配给该字段的实际字符串。这在获取实际值时很有用。
2.  表达式末尾的 i 使其不区分大小写。
3.  组 1 包含捕获字段的名称。

编辑：所以我看到标签是一个数组。当我有机会考虑它时，我将在这里更新正则表达式。

您的新正则表达式是：

```
/"(url|title|tags)":("(\\"|[^"])*"|\[("(\\"|[^"])*"(,"(\\"|[^"])*")*)?\])/i 
```

我在这里所做的只是将我一直使用的字符串正则表达式 ( `"((\\"|[^"])*)"`) 替换为用于查找数组的正则表达式 ( `\[("(\\"|[^"])*"(,"(\\"|[^"])*")*)?\]`)。没有那么容易阅读，是吗？好吧，用我们的 String Regex 代替 letter `S`，我们可以将其重写为：

```
\[(S(,S)*)?\] 
```

它匹配一个文字左括号（因此是反斜杠），可选地后跟一个逗号分隔的字符串列表和一个右括号。我在这里介绍的唯一新概念是问号 ( `?`)，它本身就是一种重复。通常称为“使前面的表达式可选”，也可以认为是 0 或 1 匹配。

使用我们相同`S`的符号，这是整个肮脏的正则表达式：

```
/"(url|title|tags)":(S|\[(S(,S)*)?\])/i 
```

如果它有助于看到它在行动中，这里是[它的行动视图。](http://regexr.com?33dtg)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-01T11:50:20.557

这个问题有点老了，但我在我的电脑上浏览了一下，发现了那个表达。我通过他作为 GIST，可能对其他人有用。

编辑：

```
# Expression was tested with PHP and Ruby
# This regular expression finds a key-value pair in JSON formatted strings
# Match 1: Key
# Match 2: Value
# https://regex101.com/r/zR2vU9/4
# http://rubular.com/r/KpF3suIL10

(?:\"|\')(?<key>[^"]*)(?:\"|\')(?=:)(?:\:\s*)(?:\"|\')?(?<value>true|false|[0-9a-zA-Z\+\-\,\.\$]*)

# test document
[
  {
    "_id": "56af331efbeca6240c61b2ca",
    "index": 120000,
    "guid": "bedb2018-c017-429E-b520-696ea3666692",
    "isActive": false,
    "balance": "$2,202,350",
    "object": {
        "name": "am",
        "lastname": "lang"
    }
  }
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-12T15:19:12.300

请尝试以下表达式：

```
/"(url|title|tags)":("([^""]+)"|\[[^[]+])/gm 
```

解释：

第一捕获组 (url|title|tags)：这是交替捕获字符 'url'、'title' 和 'tags' 字面意思（区分大小写）。

第二捕获组 ("([^""]+)"|[[^[]+]):

*   第一种选择 "([^""]+)" 匹配 " 和 " 中的所有单词，包括 " 和 "
*   2nd Alternative [[^[]+] 匹配 [ and ] 中的所有单词，包括 [ and ]

我在[这里测试过](https://regex101.com/r/cgBu0h/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T23:06:16.067

我调整了正则表达式以在我自己的库中使用 JSON。我在下面详细介绍了算法行为。

首先，对 JSON 对象进行字符串化。然后，您需要存储匹配子字符串的开始和长度。例如：

```
"matched".search("ch") // yields 3 
```

对于 JSON 字符串，它的工作原理完全相同（除非您明确搜索逗号和大括号，在这种情况下，我建议您在执行正则表达式之前先对 JSON 对象进行一些转换（例如：、{、}）。

接下来，您需要重构 JSON 对象。我编写的算法通过从匹配索引递归地向后检测 JSON 语法来做到这一点。例如，伪代码可能如下所示：

```
find the next key preceding the match index, call this theKey
then find the number of all occurrences of this key preceding theKey, call this theNumber
using the number of occurrences of all keys with same name as theKey up to position of theKey, traverse the object until keys named theKey has been discovered theNumber times
return this object called parentChain 
```

有了这些信息，就可以使用正则表达式来过滤 JSON 对象以返回键、值和父对象链。

[您可以在http://json.spiritway.co/](http://json.spiritway.co/)看到我编写的库和代码

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-30T17:17:50.007

为什么它必须是正则表达式对象？

在这里，我们可以先使用一个 Hash 对象，然后再去搜索它。

```
mh = {"url":"http://www.netcharles.com/orwell/essays.htm","domain":"netcharles.com","title":"Orwell Essays & Journalism Section - Charles' George Orwell Links","tags":["orwell","writing","literature","journalism","essays","politics","essay","reference","language","toread"],"index":2931,"time_created":1345419323,"num_saves":24} 
```

其输出将是

```
=> {:url=>"http://www.netcharles.com/orwell/essays.htm", :domain=>"netcharles.com", :title=>"Orwell Essays & Journalism Section - Charles' George Orwell Links", :tags=>["orwell", "writing", "literature", "journalism", "essays", "politics", "essay", "reference", "language", "toread"], :index=>2931, :time_created=>1345419323, :num_saves=>24} 
```

并不是说我想避免使用正则表达式，但是您不认为在获得要进一步搜索的数据之前一次更容易地采取一步吗？只是MHO。

```
mh.values_at(:url, :title, :tags) 
```

输出：

```
["http://www.netcharles.com/orwell/essays.htm", "Orwell Essays & Journalism Section - Charles' George Orwell Links", ["orwell", "writing", "literature", "journalism", "essays", "politics", "essay", "reference", "language", "toread"]] 
```

采用 FrankieTheKneeman 给您的模式：

```
pattern = /"(url|title|tags)":"((\\"|[^"])*)"/i 
```

我们可以通过将 mh 哈希转换为 json 对象来搜索它。

```
/#{pattern}/.match(mh.to_json) 
```

输出：

```
=> #<MatchData "\"url\":\"http://www.netcharles.com/orwell/essays.htm\"" 1:"url" 2:"http://www.netcharles.com/orwell/essays.htm" 3:"m"> 
```

当然，这一切都是在 Ruby 中完成的，这不是您拥有的标签，但我希望与之相关。

但是哎呀！看起来我们不能用这种模式一次完成所有三个，所以我一次只做一个。

```
pattern = /"(title)":"((\\"|[^"])*)"/i

/#{pattern}/.match(mh.to_json)

#<MatchData "\"title\":\"Orwell Essays & Journalism Section - Charles' George Orwell Links\"" 1:"title" 2:"Orwell Essays & Journalism Section - Charles' George Orwell Links" 3:"s">

pattern = /"(tags)":"((\\"|[^"])*)"/i

/#{pattern}/.match(mh.to_json)

=> nil 
```

对不起最后一个。它必须以不同的方式处理。

# macros - AutoHotKey 宏 - 窗口焦点困难

> ID：14349890
> 
> 赞同：1
> 
> 时间：2013-01-16T01:10:06.390
> 
> 标签：macros, autohotkey

上一个问题： 我正在玩一个基本上是 Hangman 的在线 Flash 游戏。输入字母的唯一方法是在游戏中的屏幕键盘上单击它们。我想编写某种宏，将键盘按下与鼠标位置映射，这样我就可以在键盘上键入字母并让鼠标点击相应的屏幕键盘字母。我在戴尔笔记本电脑上运行 Windows 7。有没有办法做到这一点？有什么程序可以帮助解决这个问题吗？如果有帮助，我有一些 Java 编程经验。

更新：我正在使用 AutoHotKey 编写宏。这是我所拥有的：

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
; #Warn  ; Enable warnings to assist with detecting common errors.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.
LAlt & a::
IfWinExist Bearville - Mozilla Firefox
{
    WinActivate
}
DllCall("mouse_event", "UInt", 0x01, "UInt", 460, "UInt", 560) ; move 
DllCall("mouse_event", "UInt", 0x02) ; left button down
DllCall("mouse_event", "UInt", 0x04) ; left button up
sleep 250
DllCall("mouse_event", "UInt", 0x01, "UInt", -460, "UInt", -560) ; move 
return
LAlt & b::
IfWinExist Bearville - Mozilla Firefox
{
    WinActivate
}
DllCall("mouse_event", "UInt", 0x01, "UInt", 500, "UInt", 560) ; move 
DllCall("mouse_event", "UInt", 0x02) ; left button down
DllCall("mouse_event", "UInt", 0x04) ; left button up
sleep 250
DllCall("mouse_event", "UInt", 0x01, "UInt", -500, "UInt", -560) ; move 
return 
```

等等。如果窗口未激活，请激活它。将指针从左上角移动到屏幕上字母的位置，鼠标左键上下，等待250毫秒（因为没有延迟导致点击不注册），然后将指针移回起始位置. 这适用于一个字母，但是如果我随后尝试输入另一个字母，则只要按下左 alt 键，窗口就会失去焦点。完成输入热键会使窗口激活，但指针似乎没有移动或单击，并且窗口再次失去焦点。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:29:25.737

如果出于某种原因您使用 DllCalls 而不是发送，这可能不起作用，但我会为这种类型的应用程序编写一个热键，该热键启动一个循环，直到按下另一个热键，然后使用输入来监听任何键入的字符以单击。

像这样的东西：

```
LAlt & a::
IfWinExist Bearville - Mozilla Firefox
{
    WinActivate
}
flag = 1
while flag
{
    Input, inval, B L1, {Space}
    IfInString, errorlevel, EndKey
    {
        flag = 0
    } else {
        x, y = locationForChar(inval)
        ;I'd reccomened a switch or if statement chain
        Send {Click %x%, %y%}
    }
} 
```

这应该在按下“LAlt & a”热键后开始读取所有输入，并在按下空格键后终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T07:55:31.300

如果虚拟键盘有固定位置，可以用这个...

```
a::MouseClick, left, 150,150
b::MouseClick, left, 250,250 
```

只需使用 autoHotKey Window Spy 即可找到准确的鼠标坐标。虽然你需要这样做 26 次，但它既简单又直接，不会导致任何注意力不集中的问题。

# bash - 在 Raspberry Pi 上添加时间？

> ID：14349892
> 
> 赞同：0
> 
> 时间：2013-01-16T01:10:35.193
> 
> 标签：bash, time, clock, raspberry-pi

我在我的 Raspberry Pi 上运行一个应用程序，它在 shell 脚本中包含以下行，

```
sleep 1800 
```

然后我想到 Raspberry Pi 没有办法保持时间。我该如何添加驱动程序和/或应用程序来获得时间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T01:14:02.120

Raspberry 当然有一种保持时间的方法 - 与其他所有 CPU 一样，也有可用的计时器，可以根据 CPU 和其他时钟在短期内保持一定程度的精度。

*但是，树莓派在掉电时*无法保持实时，这可能是您的想法。如果您需要有真实世界的时间，请在启动时使用 NTP 将 Linux 的时钟系统同步到实时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T21:44:04.640

事实上，根据[Yann Ramin 的回答](https://stackoverflow.com/a/14349927/341929)，Raspberry Pi 保持时间的唯一方法是在启动时与 NTP 同步，并且没有可以添加的驱动程序或应用程序来获取时间。

尽管如此，如果您需要在离线时记录或保持时间，您可能需要添加一个**实时时钟**芯片，例如

*   **DS1307**模块 —*[将基于 DS1307 的实时时钟添加到 Raspberry Pi 的](http://learn.adafruit.com/adding-a-real-time-clock-to-raspberry-pi/overview)*教程
*   或其他**[Raspberry Pi RTC](http://www.hobbytronics.co.uk/raspberry-pi-real-time-clock)**，*基于 DS1302 模块*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T09:18:16.183

将 RTC (realTimeClock) 添加到 pi。我使用了一个名为 ds1302 的 rtc，它可以通过 3 gpios 轻松连接到 pi。我为这个时钟创建了一个 python 脚本。将它连接到 3 个 gpios（一个 clk、一个 I/O 和 rst）它将像这样设置 rtc 时钟： rtc.py -set YYYYMMDDHHMMSS 获取当前的 rtc 时钟：rtc.py -get。并设置系统时间：rtc.py -ss。将命令 rtc.py -ss 设置为 /etc/rc.local 运行脚本，系统时间将在从 rtc 启动时设置。如果是整数。在使用 ds1302。给我一个 rtc.py 脚本的 holla，然后我会在 github 上发布它！

# css - 链接不会留在导航栏内

> ID：14349893
> 
> 赞同：0
> 
> 时间：2013-01-16T01:10:37.503
> 
> 标签：css, navbar

链接超出了导航栏，因为它太高了（我认为），我希望这些项目彼此分开。

```
#navbar {
    height: 21px;
    width: 100%;
    top: 200px;
    text-align: center;
    font-size: 20px;
} 
```

哦，这是 HTML：

```
<div id="navbar">
          {block:AskEnabled}
          <div class="navitem"><a href="/ask">{AskLabel}</a></div class>
          {/block:AskEnabled}
          {block:SubmissionsEnabled}
          <div class="navitem"><a href="/submit">{SubmitLabel}</a></div class>
          {/block:SubmissionsEnabled}
           <div class="navitem"><a href="{text:Link 1 Path}">{text:Link 1}</a></div class><div class="navitem"><a href="{text:Link 2 Path}">{text:Link 2}</a></div class><div class="navitem"><a href="{text:Link 3 Path}">{text:Link 3}</a></div class>

          </div id="navbar"> 
```

忽略括号中的东西，比如 AskLabel 和 div 类 navitem，我把它去掉了：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:23:08.043

因为您的链接在`div`s 中，它们是块元素，所以每个 .s 之间有一个分页符`div`。您需要在元素上使用类似 a`span`或 set的东西。`display: inline``navitem` `div`

见例子：http: [//jsfiddle.net/7dPkQ/3/](http://jsfiddle.net/7dPkQ/3/)

编辑澄清：`span`s 默认情况下已`display: inline`设置。`div`s 默认已`display: block`设置。`inline`在您的示例中，如果链接包含在元素中，它们将并排放置。另见[http://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

# android - 一次两个列表视图，带有半滑动viewpager android

> ID：14349894
> 
> 赞同：5
> 
> 时间：2013-01-16T01:10:40.937
> 
> 标签：android, listview, slider, android-viewpager

可以滑动屏幕的一半viewpager吗？

我的最终目标是一次显示两个列表视图，在第一页幻灯片之后，左侧列表将是前一个列表。所以像下面这样..

清单 1，清单 2

清单 2，清单 3

清单 3，清单 4

有什么解决办法吗？

谢谢![在此处输入图像描述](../Images/903b0ca3eb2d816850434c8f6b5d3155.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:10:02.887

好的，我将对此进行尝试。我完成了（我认为）你想要做的事情。我的应用程序有 3 个 ListView，每个列表都包含从在线资源获取的不同内容，并`ViewPager`使用自定义适配器和`ListViews`. 然后将自定义适配器分配给 a`fragment`上的 a `PagerAdapter`。我从 Google 资源中复制了很多代码，并将尝试概述我所做的事情。

首先，我在`ViewPager`MainActivity 的布局中添加了一个

**活动主.xml：**

```
<android.support.v4.view.ViewPager 
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">
    <!-- add a PagerTitleStrip -->
    <android.support.v4.view.PagerTitleStrip 
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"/>
</android.support.v4.view.ViewPager> 
```

然后，我创建了一个单独的`ListView`布局，可用于我的自定义适配器：

**列表视图.xml**

```
<ListView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="#E6E6E6"
    android:background="#E6E6E6"
    tools:context=".MainActivity" /> 
```

完成这些设置后，我开始了我的活动。其余的发生在**MainActivity.java**中：

首先，列出一些变量：

```
public class MainActivity extends FragmentActivity implements OnNavigationListener {

    // your pager adapter
    SectionsPagerAdapter mSectionsPagerAdapter;
    ViewPager mViewPager;

    // your custom adapters (look this up on your own if you do not understand)
    ArrayList<ListEntry> listOneArrayList = null;
    ArrayList<ListEntry> listTwoArrayList = null;   
    CustomAdapterListOne customAdapterListOne = null;
    CustomAdapterListTwo customAdapterListTwo = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // more on that in the next block...
    }
} 
```

现在，让我们`onCreate()`开始创作吧！

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // set up your pager adapter
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
    mViewPager = (ViewPager) findViewById(R.id.viewpager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // if you want to set a default view:
    mViewPager.setCurrentItem(0);   

    // now, run some AsyncTasks to load up our lists
    // I use AsyncTasks because I fetch my data from a server
    new generateListOne().execute();
    new generateListTwo().execute();

}

/*
 * Get the entries and create a list adapter
 */
private class generateListOne extends AsyncTask<String, Void, Object> {     
    @Override
    protected Object doInBackground(String... args) {
        listOneArrayList = new ArrayList<ListEntry>();
        // this is where I would do all of my networking stuff
        // and populate my arraylist
        return null;
    }

    @Override
    protected void onPostExecute(Object result) {
        // you have to create a new xml layout for 'listview_row' to use here v
        customAdapterListOne = new CustomAdapterListOne(self, R.layout.listview_row, listOneArrayList);
        /** Very important! This is where you specify where the list goes: **/
        // * Note: Fragment pages start at 0!
        ListSectionFragment fragment = (ListSectionFragment) getSupportFragmentManager().findFragmentByTag(
            "android:switcher:"+R.id.viewpager+":0"); // <- this is where you specify where the list goes       
        if (fragment != null) {                 // <- Could be null if not instantiated yet
            if(fragment.getView() != null) {
                customAdapterListOne.notifyDataSetChanged();
                fragment.updateListOneDisplay(customAdapterListOne);
            }
        }           
    }       
} 
```

我不打算写出 generateListTwo()，但希望你能从 generateListOne() 中理解这个概念。 **密切关注** `onPostExecute()`. 现在，我们必须写出`FragmentPagerAdapter`和我们的`ListSection Fragment`. 此外，我们必须包括我们的自定义列表适配器。所有这些内容如下：

```
/*
 * Your Custom Adapter Class
 */    
private class CustomAdapterListOne extends ArrayAdapter<ListEntry> {
    /*
     * Read up on the rest of this for custom adapter if you 
     * are unfamilar. There are plenty of resources.. 
     * 
     * I am not going to type it all out.
     */
}

/*
 * SectionsPagerAdapter class for FragmentPagerAdapter title
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {
    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new ListSectionFragment();
        Bundle args = new Bundle();
        args.putInt(ListSectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;            
    }

    @Override
    public int getCount() {
        // make sure this is correct
        int yourNumberOfLists = 5;
        return yourNumberOfLists;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return "First List";
            case 1: return "Second List";
            //case 2: etc..

        }
        return null;
    }

    public boolean onInterceptTouchEvent(MotionEvent event) {
        return false;
    }
}

/*
 * ListSectionFragment class for ListFragment(s)
 */
public static class ListSectionFragment extends ListFragment {

    public static final String ARG_SECTION_NUMBER = "section_number";
    public static int CURRENT_SECTION = 0;

    static ListSectionFragment newInstance(int num) {
        ListSectionFragment fragment = new ListSectionFragment();
        Bundle args = new Bundle();
        fragment.setArguments(args);
        return fragment;        
    }

    public void updateListOneDisplay(ArrayAdapter<ListEntry> listOneAdapter) {
        setListAdapter(listOneAdapter);
    }

    public void updateListTwoDisplay(ArrayAdapter<ListEntry> listTwoAdapter) {
        setListAdapter(listTwoAdapter);
    }

    // etc..

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        Bundle args = getArguments();
        CURRENT_SECTION = args.getInt(ARG_SECTION_NUMBER);
        // note, we are using your listview here v
        View view = inflater.inflate(R.layout.listview, container, false);
        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // and just for kicks:
        Log.i(TAG, "Item clicked: " + position);
    }

} 
```

不要忘记你最后一次`}`结束`MainActivity.java`课程。希望这对某人有所帮助，我知道我花了很长时间才弄清楚。此代码提供的效果类似于 Android Place 应用程序的效果。

编辑：我忘了提及列表何时加载。当列表获得焦点时，它还会加载上一个和下一个列表。这使得可以过渡到它并让它已经准备就绪。例如：

您转到列表 2 并加载列表 1 和列表 3。然后，您转到列表 3（它过渡平稳，因为它已经加载），并加载了列表 4 和列表 2。这可确保当您转换到新列表时，它已经加载或正在生成过程中。

# points - 点到平滑曲线的列表（翼型）

> ID：14349899
> 
> 赞同：1
> 
> 时间：2013-01-16T01:11:17.513
> 
> 标签：points, solidworks

我有一个从图形数字化软件中获得的 200 个点的列表，我想将其转换为平滑曲线，然后转换为 Solidworks。

我的点形成一个椭圆（更精确的翼型形状），所以我在 Matlab 中尝试过的命令没有圆形曲线。

我的问题是： * 获得不一定通过所有点的平滑曲线，平滑是作案手法。* 能够有一条椭圆曲线 * 不知何故能够将此曲线导出到 Solidwords

如果有人知道正确的软件、命令行或任何可以让我入门的东西，我将非常感激。

魔方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:19:01.753

我以前用过 Solid Works。这是一个非常强大的工具。应该有某种方法可以通过这些点绘制曲线样条，例如三次样条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:59:01.090

如果您使用的是标准（ish）机翼，那么您可以使用各种工具来绘制点，而无需使用图形数字化软件。

例如，Javafoil 就是其中之一。即使你知道你的翼型的特性，你也可以用它来给你一个平滑的点集。

同样，如果您的翼型是 naca 4 系列，那么这些由一组方程控制。

但我认为你想要一个更复杂的翼型。让我知道我是否可以再提供帮助。

# android - Eclipse / IntelliJ Android 编译器与命令行的解释

> ID：14349902
> 
> 赞同：2
> 
> 时间：2013-01-16T01:11:41.630
> 
> 标签：android, eclipse, intellij-idea, android-maven-plugin

因此，我在尝试退出适用于 Android 的 Eclipse 和/或 IntelliJ IDE 编译器时遇到了问题。这是具有相同问题的相关问题。

[Android-Maven-Plugin v3.4.0 构建应用时找不到可绘制资源](https://stackoverflow.com/questions/13248258/android-maven-plugin-v3-4-0-cannot-find-drawable-resources-when-building-app)

我想知道是否有人可以解释使用 IDE 构建 Android 应用程序与命令（在本例中为 Android Maven）的区别，以及为什么 IDE 编译器在生成 Android 应用程序时慷慨，而编译器之类的命令在最小的警告或错误。

# ios - 我们能找到iDevice型号吗？

> ID：14349903
> 
> 赞同：0
> 
> 时间：2013-01-16T01:11:50.310
> 
> 标签：ios

我们可以像中所示那样检索 iDevice 模型吗

**设置->常规->关于->型号 = MD662F** ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:23:30.590

抱歉不行。[`UIDevice`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-SW1)有一个“模型”属性，但只会返回@“iPhone”和@“iPod touch”等。

```
UIDevice *currentDevice = [UIDevice currentDevice];
NSString *model = [currentDevice model];
NSLog(@"Device Model: %@", model); 
```

# c++ - 如何在 Qt 正则表达式中匹配连字符

> ID：14349904
> 
> 赞同：2
> 
> 时间：2013-01-16T01:11:50.803
> 
> 标签：c++, regex, qt

Windows 7 SP1
MSVS 2010
Qt 4.8.4

我正在试验 Qt [Syntax Highlighter Example](http://doc.qt.digia.com/qt/richtext-syntaxhighlighter.html)。

我有一个应用程序需要突出显示以连字符开头的单词。所以我修改了这段代码片段的正则表达式：

```
classFormat.setFontWeight(QFont::Bold);
classFormat.setForeground(Qt::darkMagenta);
rule.pattern = QRegExp("\\bQ[A-Za-z]+\\b");
rule.format = classFormat;
highlightingRules.append(rule); 
```

突出显示以 Q 开头的单词。我将其更改为：

```
rule.pattern = QRegExp("\\b-[A-Za-z]+\\b"); 
```

什么也没有发生。

我试试

```
rule.pattern = QRegExp("\\b\\-[A-Za-z]+\\b"); 
```

没有。

出于好奇，我尝试

```
rule.pattern = QRegExp("\\b[-A-Za-z]+\\b"); 
```

如果我开始输入连字符，则连字符不会突出显示，并且每个其他 alpha 都会突出显示。根据[如何将连字符与正则表达式匹配？](https://stackoverflow.com/questions/4068629/how-to-match-hyphens-with-regular-expression)这应该是犹太教的。

问题：如何编写正则表达式来突出以连字符开头的单词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:17:34.800

问题是连字符`-`被认为*不是单词的一部分*。这意味着，*单词边界断言* `\b`将在连字符和实际单词之间匹配。换句话说：*没有以连字符开头的单词。*

要解决此问题，请将连字符放在**之前** `\b`，表示您要匹配“一个连字符，后跟一个由字母组成的单词”。您甚至可以删除第一个`\b`，因为`[a-zA-Z]+`无论如何都是一个词：

```
rule.pattern = QRegExp("-[A-Za-z]+\\b"); 
```

# php - 使用内置函数检查 array1 的任何值是否包含在 array2 中？PHP

> ID：14349907
> 
> 赞同：1
> 
> 时间：2013-01-16T01:12:20.460
> 
> 标签：php, arrays

我尝试了 in_array 和 array_search。即使两个值都包含在搜索的数组中，我也得到了错误的值。不言而喻，但我还是要说，如果你从 'marmotte' 中删除`$search_this_array`，函数仍然返回 false。

这不是紧急情况，因为我可以使用 in_array() 两次来获得结果。但是，如果没有内置的方法可以立即执行此操作，我会感到惊讶……也许数组相交？

```
$search_this_array = array('bug','dog','cat','marmotte');
$search_with_array = array('bug','marmotte');
if(in_array($search_with_array,$search_this_array) == true) echo '
in_array = ==true
';
else echo '
in_array === false
';
if(array_search($search_with_array,$search_this_array) == true) echo '
array_search===true
';
else echo '
array_search === false
'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:13:53.793

你自己说的：[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)

```
<?php
$array1 = array("a" => "green", "red", "blue");
$array2 = array("b" => "green", "yellow", "red");
$result = array_intersect($array1, $array2);
print_r($result);
?> 
```

上面的示例将输出：

```
Array
(
    [a] => green
    [0] => red
) 
```

# php - 在 PHP 中删除后重新加载页面

> ID：14349909
> 
> 赞同：3
> 
> 时间：2013-01-16T01:12:25.910
> 
> 标签：php

我做了这个函数来从表中删除记录。删除操作完成后，页面显示所有数据（包括删除的数据），但是，我需要刷新或重新加载页面才能看到删除行后的结果。如何在以下代码中完成？提前谢谢！！

```
 public function deletedata(){

        if(isset($_GET['del_id'])){

            $delete_id = $_GET['del_id'];

            $query ="DELETE FROM tbl_data WHERE project_id ='".$delete_id."' ";

            $this->databaseObject->getConnection()->query($query);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:14:25.013

通常您会使用该`header`功能重新加载页面。

像这样的东西应该工作：`header('Location: '.$_SERVER['REQUEST_URI']);`

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

或者，根据您的代码结构，您可以简单地在检索记录的代码之前调用删除代码。这样您就可以避免重新加载页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T01:18:32.063

正如 launcek 的替代方案中所提到的，可能不需要重新加载页面。只需在呈现 HTML 之前执行任何必要的记录删除。

```
<?php

$delete_id=isset($_GET['del_id'])&&is_numeric($_GET['del_id'])?$_GET['del_id']:false;
if ($delete_id) {
  $query ="DELETE FROM tbl_data WHERE project_id ='".$delete_id."' ";
  $this->databaseObject->getConnection()->query($query);
}
$query ="SELECT * FROM tbl_data WHERE 1;";
$this->databaseObject->getConnection()->query($query);

?>
<html>

// some php/html to loop through the query and display records

</html> 
```

这假设您的 ID 是数字。如果没有，我强烈建议在将变量引入数据库之前检查/转义变量。

# c++ - c++ - find_if 条件？

> ID：14349910
> 
> 赞同：2
> 
> 时间：2013-01-16T01:12:37.060
> 
> 标签：c++

您如何检查是否`find_if`找到匹配项？当我尝试下面的代码时：

```
SparseMatrix& SparseMatrix::operator+=(const SparseMatrix &other)
{
    vector<Node>::iterator itThis;
    for (vector<Node>::const_iterator itOther = other._matrix.begin(); itOther != other._matrix.end(); ++itOther)
    {
        itThis = find_if(_matrix.begin(), _matrix.end(), position_finder(*itOther));

        if(*itThis)
        {
            itThis->value += itOther->value;
        } else
        {
            _matrix.push_back(*itOther);
        }
    }

    return *this;
} 
```

我得到`if(*itThis)`：

```
could not convert ‘itThis.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = Node*, _Container = std::vector<Node>, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = Node&]()’ from ‘Node’ to ‘bool’ 
```

我知道这`itThis`是一个常数，所以我不能改变它的值，但我想知道是否有匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T01:14:02.533

来自[http://en.cppreference.com/w/cpp/algorithm/find_if](http://en.cppreference.com/w/cpp/algorithm/find_if)：

> `find_if( InputIt first, InputIt last, UnaryPredicate p )`
> 
> ...
> 
> **返回值**
> 
> 迭代到满足条件的第一个元素，或者`last`如果没有找到这样的元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T01:14:10.420

find_if 将迭代器返回到容器中的任一元素或返回到`end()`，请参阅[参考](http://en.cppreference.com/w/cpp/algorithm/find)

你可以`itThis` 比较`_matrix.end()`

```
if( itThis != _matrix.end())
{
}
else
{
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T01:14:53.317

如果未找到项目，则`find_if`返回等于 的迭代器`_matrix.end()`。

```
if (itThis == _matrix.end()) { ... } 
```

# ruby-on-rails - 什么时候执行 before_filter？

> ID：14349912
> 
> 赞同：1
> 
> 时间：2013-01-16T01:13:01.247
> 
> 标签：ruby-on-rails

> **可能重复：**
> [ActiveRecord 回调和验证的顺序是什么？](https://stackoverflow.com/questions/10969673/what-is-the-order-of-activerecord-callbacks-and-validations)

我来自Java背景。我认为 Rails 中很**奇怪**的一件事是，您可以在类下设置**回调函数，例如属性**，例如`before_filter`.

```
class SomeController < ActionController::Base
  before_filter Proc.new {.....}
end 
```

我真的不明白它是如何工作的。我发现[这篇文章](https://stackoverflow.com/questions/12174704/how-does-rails-implement-before-filter)解释了`before_filter`。我了解逻辑流程，这只是一种方法。但是我仍然不明白什么时候会`before_filter`执行设置回调链。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T02:12:06.037

`before_filter`不是 Ruby 功能，它是*Ruby on Rails*（Web 框架）提供的类方法，您可以在控制器中使用它来执行一段代码，然后再在控制器中执行任何操作。

那么，Ruby on Rails 是如何做到这一点的呢？

当您在 Ruby 中定义一个类时，您实际上是在执行代码，请在 irb 中尝试：

```
class Hello
  puts "defining hello..."

  def greet
    puts "Hello there"
  end
end 
```

当您定义类时，您会看到“定义你好...”被打印在终端中。你没有实例化任何对象，你只是定义了一个类，但是你可以在定义一个类的过程中执行任何代码。

你知道你可以定义“类方法”和“实例方法”，有趣的是你可以在定义类的同时调用你的类方法：

```
class MyClass
  def self.add_component(component)
    # Here @@components is a class variable
    @@components ||= []        # set the variable to an empty array if not already set.
    @@components << component  # add the component to the array
  end

  add_component(:mouse)
  add_component(:keyboard)
  add_component(:screen)

  def components
    @@components # The @@ gets you the class variable
  end
end

MyClass.new.components
=> [:mouse, :keyboard, :screen] 
```

`def self.add_component`定义了一个类方法，您可以在定义类的同时调用该方法。在此示例`add_component`中，将键盘添加到类变量中的列表中，并且`def components`实例方法（在此类的实例上调用）访问此类变量。类方法可以在父类中定义，并且它的工作方式相同。这个例子可能有点奇怪。

让我们再举一个例子。

```
class RubyOnSlugsController
  def self.before_filter(callback)
    @@callbacks ||= []
    @@callbacks << callback
  end

  def execute_callbacks
    @@callbacks.each { |callback| callback.call() }
    return "callbacks executed"
  end
end

class MyController < RubyOnSlugsController
  before_filter Proc.new { puts "I'm a before filter!" }
  before_filter Proc.new { puts "2 + 2 is #{2 + 2}" }
end

controller = MyController.new
controller.execute_callbacks 
```

将输出：

```
I'm a before filter!
2 + 2 is 4
=> "callbacks executed" 
```

Ruby on Rails 做了类似的事情（但更复杂）`before_filter`，它确保你用它定义的所有回调在你的普通控制器方法之前被调用。

我希望这可以为您解决一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T01:33:54.503

`before_filter`当您的控制器文件被加载（即当您的服务器启动时）时，该方法本身就会运行。这意味着一旦定义了类，就会设置回调链。

至于它设置的回调，控制器有一个[`process`](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/abstract_controller/base.rb#L112)方法，该方法采用动作的名称（例如，“索引”），并在[`process_action`](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/abstract_controller/base.rb#L166). [回调模块使用运行回调](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/abstract_controller/callbacks.rb#L16)的实现覆盖此方法。

# php - 404 Page Not Found 找不到您请求的页面。- CodeIgniter

> ID：14349914
> 
> 赞同：0
> 
> 时间：2013-01-16T01:13:16.107
> 
> 标签：php, mysql, codeigniter

大家好，我尝试使用 CodeIgniter 1.7.1 我已经完成了逐步安装，但它显示错误 **404 Page Not Found** The page you request was not found。

这是我使用的代码

**控制器 home.php**

```
class Home extends Controller {
       function __construct()
       {
        parent:: __construct();
        //$this->output->enable_profiler();
        $this->load->library('DX_Auth'); 

    } 
```

**模型 homemodel.php**

```
class HomeModel extends Model {

    function __construct()
    {
        // Call the Model constructor
        parent::Model();

    } 
```

**.htaccess**

```
RewriteCond $1 !^(index\.php|assets|xcache|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

我使用本地主机“XAMPP”

请帮我

**和主 index.php**

```
<?php

    error_reporting(E_ALL);

    $system_folder = "system";

    $application_folder = "application";

if (strpos($system_folder, '/') === FALSE)
{
    if (function_exists('realpath') AND @realpath(dirname(__FILE__)) !== FALSE)
    {
        $system_folder = realpath(dirname(__FILE__)).'/'.$system_folder;
    }
}
else
{
    // Swap directory separators to Unix style for consistency
    $system_folder = str_replace("\\", "/", $system_folder); 
}

define('EXT', '.'.pathinfo(__FILE__, PATHINFO_EXTENSION));
define('FCPATH', __FILE__);
define('SELF', pathinfo(__FILE__, PATHINFO_BASENAME));
define('BASEPATH', $system_folder.'/');

if (is_dir($application_folder))
{
    define('APPPATH', $application_folder.'/');
}
else
{
    if ($application_folder == '')
    {
        $application_folder = 'application';
    }

    define('APPPATH', BASEPATH.$application_folder.'/');
}

/*
|---------------------------------------------------------------
| LOAD THE FRONT CONTROLLER
|---------------------------------------------------------------
|
| And away we go...
|
*/
require_once BASEPATH.'codeigniter/CodeIgniter'.EXT;

/* End of file index.php */
/* Location: ./index.php */ 
```

**服务器错误致命错误：在第 21 行的 /hermes/bosoraweb075/b2180/ipg.djsaifnycom/paly/system/application/controllers/home.php 中找不到类“Memcache”**

```
function index()
{
    $data['memcache'] = new Memcache;
    $data['memcache']->pconnect('localhost', 11211) or $memcache = false;
    //$this->output->cache(60);
    $this->load->model('dx_auth/UserModel', 'user');
    $this->load->model('homemodel');
    $data['title'] = "Home";

    if($this->dx_auth->is_logged_in())
    {
        $query = $this->user->get_user_by_id($this->session->userdata('DX_user_id'));
        //now we get personalized

        $row = $query->row();
        $data['feedFilter'] = $row->feed_filter;
        $data['feedView'] = $row->feed_view;
        if($data['feedFilter'] == 'tagged')
        {
            $data['feedList'] = null;
            $data['feedList'] = $data['memcache']->get('feed' . $data['feedFilter'] . $row->feed_view);
            if($data['feedList'] == null)
            {           
                $data['albums'] = $this->homemodel->getTagged();
            }
        } else {
            $data['feedList'] = null;
            $data['feedList'] = $data['memcache']->get('feed' . $data['feedFilter'] . $row->feed_view);
            if($data['feedList'] == null)
            {
                $data['albums'] = $this->homemodel->getFeedNoUser();
            }
        }
        //$this->output->enable_profiler();
        $this->template->write('title', 'Home');
        $this->template->write_view('content', 'home/index', $data, TRUE);
        $this->template->render();

    } else {
        $data['feedFilter'] = 'all';
        $this->load->helper('cookie');
        if(get_cookie('unravel_feedView'))
        {
            $data['feedView'] = 0;
        } else {
            $data['feedView'] = 1;
        }

        //this would be generic feed here
        $data['feedList'] = null;
        $data['feedList'] = $data['memcache']->get('feed' . $data['feedFilter'] . $data['feedView']);
        if($data['feedList'] == null)
        {
            $data['albums'] = $this->homemodel->getFeedNoUser();
        }
        $this->template->write('title', 'Home');
        $this->template->write_view('content', 'home/index', $data, TRUE);
        $this->template->render();
    }

    //$this->load->view('home/index', $data);
    //$this->output->enable_profiler(TRUE);
} 
```

**该行是** ***$data['memcache'] = new Memcache;***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:27:05.813

也许 .htaccess 不在正确的目录中。您可能想检查它，应该在您的项目目录中。如果是这样，

把它放在你的 .htaccess 文件中

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:38:47.797

您可能还想检查您的`httpd.conf`文件，看看是否允许 apache“尊重”您的 .htaccess 文件。搜索`AllowOverride`命令并将其从`AllowOverride None`（默认）更改为`AllowOverride All`.

**另外：**不要忘记之后重新启动 httpd 服务器。

# javascript - 如何使用 JavaScript/jQuery 跟踪页面上滚动点的 div

> ID：14349918
> 
> 赞同：1
> 
> 时间：2013-01-16T01:13:33.040
> 
> 标签：javascript, jquery, html, scroll

我正在寻找一个非常快速的解决 div 滚动问题的方法。

我有一组 div，比如论坛帖子，它们一个一个叠放。当页面向下或向上滚动时，我想知道其中一个 div 何时命中页面上的任意点。

我尝试的一种方法是为每个项目添加一个 onScroll 事件，但随着项目数量的增长，页面确实开始滞后。

有人知道更有效的方法吗？谢谢/w

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:07:49.753

好吧，我对这一切都很陌生，所以可能有人应该纠正我:)

我建议

*   缓存帖子位置
*   缓存当前
*   使用二分查找

演示：http: [//jsfiddle.net/zYe8M/](http://jsfiddle.net/zYe8M/)

```
<div class="post"></div>
<div class="post"></div>
<div class="post"></div> 
```

...

```
var posts = $(".post"), // our elements
    postsPos = [], // caсhe for positions
    postsCur = -1, // cache for current
    targetOffset = 50; // position from top of window where you want to make post current

// filling postsPos with positions
posts.each(function(){
    postsPos.push($(this).offset().top);
});

// on window scroll
$(window).bind("scroll", function(){
  // get target post number
  var targ = postsPos.binarySearch($(window).scrollTop() + targetOffset);
  // only if we scrolled to another post
  if (targ != postsCur) {
    // set new cur
    postsCur = targ;
    // moving cur class
    posts.removeClass("cur").eq(targ).addClass("cur");
  }
});

// binary search with little tuning on return to get nearest from bottom
Array.prototype.binarySearch = function(find) {
  var low = 0, high = this.length - 1,
      i, comparison;
  while (low <= high) {
    i = Math.floor((low + high) / 2);
    if (this[i] < find) { low = i + 1; continue; };
    if (this[i] > find) { high = i - 1; continue; };
    return i;
  }
  return this[i] > find ? i-1 : i;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:44:26.593

您不应该将滚动事件绑定到所有 div，而只能绑定到所有 div `window`。然后，您应该通过简单计算元素偏移值来检查其中一个 div 是否与目标点重叠。

```
$(window).scroll(function(event)
{
    var isCaptured = capture();
    console.log(isCaptured);
});

function capture()
{
    var c = $('.box'); //this is the divs
    var t = $('#target'); //this is the target element
    var cPos = c.offset(); var tPos = t.offset();

    var overlapY = (cPos.top <= tPos.top + t.height() && cPos.top + c.height() >= tPos.top);
    var overlapX = (cPos.left <= tPos.left + t.width() && cPos.left + c.width() >= tPos.left);
    return overlapY && overlapX;
} 
```

`$('#target')`您可以将顶部和左侧 (X, Y) 偏移值直接传递给函数，而不是元素。

好吧，这是一个肮脏的[**演示**](http://jsfiddle.net/YCH2y/)。

# scheme - how to access the keys in a multidimensional hash table in scheme?

> ID：14349926
> 
> 赞同：4
> 
> 时间：2013-01-16T01:13:59.707
> 
> 标签：scheme, hashtable, chicken-scheme

I have a hash table in Chicken Scheme the hash table has keys with values corresponding to those keys are hashes with corresponding values of hashes again. The keys of the "inner hashes" have corresponding values which are strings. (For Those familiar with, say, Ruby, setting the relevant portion of the hash might look like

```
the_hash[group_name][section_name][part_name] = some_text 
```

or to read the string:

```
a_string = the_hash[group_name][section_name][part_name] 
```

, for example.)

At the point where I read the string, I need to know what the `group_name`, `section_name`, and `part_name` are and I need to be able to perform certain actions based on the values of each of the strings and the `for-each` and `map` features of Scheme do not seem to be sufficient because only one of the three key/sub-key strings seems available at any given moment. I do not know what patterns the respective strings might hold. A web search turned up no work able solution. At the same time, I am relatively new to Scheme and may not be as familiar as I should. Can Anyone point Me in the direction of a solution?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:34:30.997

Scheme doesn't have built-in support for multidimensional hashes, but with the right abstractions you can build your own implementation:

```
; create a new multidimensional hash table
(define (make-multi-hash)
  (make-hash-table))

; set a value given a non-empty sequence of keys
(define (multi-hash-set! hash-table value . keys)
  (let loop ((hash hash-table)
             (keys keys))
    (cond ((null? (cdr keys))
           (hash-table-set! hash (car keys) value))
          (else
           (if (not (hash-table-exists? hash (car keys)))
             (hash-table-set! hash (car keys) (make-multi-hash)))
           (loop (hash-table-ref hash (car keys)) (cdr keys))))))

; retrieve a value given a non-empty sequence of keys
(define (multi-hash-ref hash-table . keys)
  (foldl (lambda (k h) (hash-table-ref h k))
         hash-table
         keys)) 
```

Use it like this:

```
(define h (make-multi-hash))
(multi-hash-set! h 42 'a 'b 'c)
(multi-hash-ref h 'a 'b 'c)
=> 42 
```

Using the above procedures as a starting point surely you can implement the required functionality. Also notice that Chicken Scheme provides a lot of [procedures](http://wiki.call-cc.org/man/4/Unit%20srfi-69) for dealing with "normal" hash tables, some of them will be useful, as this implementation uses ordinary hash tables under the hood.

# c++ - 单通道平均值

> ID：14349932
> 
> 赞同：3
> 
> 时间：2013-01-16T01:14:22.010
> 
> 标签：c++, image-processing, opencv, computer-vision

我将图像从 rgb 转换为 YUV。现在我想单独找到亮度通道的平均值。您能告诉我如何实现这一目标吗？此外，有没有办法确定图像包含多少个通道？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T01:45:38.487

你可以这样做：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <stdio.h>

using namespace cv;

int main(void)
{
    vector<Mat> channels;
    Mat img = imread("Documents/forest.jpg");
    split(img, channels);
    Scalar m = mean(channels[0]);
    printf("%f\n", m[0]);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T01:23:24.953

Image.channels() 将为您提供任何图像中的通道数。请参阅 OpenCV 文档。

可以访问多个通道，如下所示：

```
 img.at<Vec3b>(i,j)[0] //Y
        img.at<Vec3b>(i,j)[1] //U
        img.at<Vec3b>(i,j)[2] //V 
```

# ruby-on-rails - rails 获取多态类的所有关联类

> ID：14349934
> 
> 赞同：7
> 
> 时间：2013-01-16T01:14:32.267
> 
> 标签：ruby-on-rails, polymorphic-associations

我有一个像这样的多态关联（改编自guides.rubyonrails.com）：

```
class Picture < ActiveRecord::Base
  belongs_to :imageable, :polymorphic => true
end

class Employee < ActiveRecord::Base
  has_many :pictures, :as => :imageable
end

class Product < ActiveRecord::Base
  has_many :pictures, :as => :imageable

  has_many :employees
end 
```

有没有办法获得所有可能的 :imageable_types**仅给定图片模型**？

例如，要在 Product 模型中获取 has_many :quotes 类，您可以：

```
Product.reflect_on_association(:employees).klass 
```

得到：# => 员工

现在我想做类似的事情：

```
Picture.reflect_on_association(:imageable).klass 
```

这显然会引发异常，但我想得到类似：# => [Employee, Product]

有没有办法做到这一点？（没有尝试所有模型来查看它们是否包含 has_many :pictures）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:45:20.287

如果不查看所有模型，我找不到这样做的方法，所以我只是调整了这个解决方案：[https ://stackoverflow.com/a/2315469/1440599](https://stackoverflow.com/a/2315469/1440599)

# installation - 如何在基于明智安装的卸载期间停止正在运行的进程？

> ID：14349936
> 
> 赞同：-1
> 
> 时间：2013-01-16T01:14:49.580
> 
> 标签：installation, wise

当我unwsied一个项目时，如果项目的主程序正在运行，那么卸载除主程序之外的所有floders和文件。

如果主程序正在运行，我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:34:12.550

使用批处理文件终止进程，例如：

```
taskkill /IM programname.exe 
```

它将提示用户是否确定或询问他们是否要保存更改。用于 `/F`强制进程关闭。

# ubuntu - ubuntu 中 ft2build.h 的作用是什么？

> ID：14349946
> 
> 赞同：-2
> 
> 时间：2013-01-16T01:15:32.403
> 
> 标签：ubuntu

我的ubuntu是12.10。当我阅读其他一些代码时，我找到了头文件 ft2build.h。我在 usr/include/. 谁能告诉我它的功能？或者我们什么时候需要使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:19:21.297

如果您尝试打开文件，它会在顶部显示：

> 构建 FreeType 2 库的宏。

# node.js - 授权握手后 node.js/socket.io 的间歇性响应

> ID：14349947
> 
> 赞同：0
> 
> 时间：2013-01-16T01:15:57.283
> 
> 标签：node.js, cakephp, socket.io

好的，我在 windows xp 64 位下安装了带有 cakePHP 的 WAMP。我正在使用带有最新节点 8.17 和套接字 io 版本 .9.13 的 websocket PHP 插件。我的同事似乎都不知道问题出在哪里，我已经被困了两个星期。我能够缩小问题的范围，但我不知道如何解决它。

在我的 cakephp 插件向套接字 io 服务器发出请求后，我可以捕获授权握手请求，但是根据套接字 io 协议，响应正文应包含握手 id、心跳间隔、超时间隔等......有时我会得到正确的响应但是大多数时候（如 90%）我会得到一个空正文响应，但标题返回 200 ok 响应，这会在我的应用程序中引发错误。有没有办法可以得到一致的结果。我更乐意发布调试信息，这样您就可以看到我在说什么。我在某处读到它可能是 gzip 压缩问题，但我相信套接字 io 更新已得到修复。任何帮助将非常感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:00:04.530

问题出在 mgcrea/cake_websocket 插件的第 80 行。出于某种原因，尽管它发出了正确的请求，但它在间歇性响应中收到了它。当我覆盖它时，它就解决了问题。

# wordpress - 网站图片不显示在 iPad 上

> ID：14349948
> 
> 赞同：0
> 
> 时间：2013-01-16T01:16:01.087
> 
> 标签：wordpress, ipad

我对网页设计相当陌生，但由于这样的网站而管理至今。我的最新网站（一个 Wordpress Twenty11 儿童主题）在我的 chrome、firefox 等电脑上看起来很棒，但是当我在我的 ipad 上查看它时，所有图像都显示为带有灰色边框的框：页眉、页脚和帖子中的图像不展示。但是使用 css（作为背景）放置的图像和来自我的 NextGen 画廊的图像工作正常。我正在学习如何使用媒体样式，所以我想也许就是这样，所以我将它们全部删除并刷新了网站，但没有任何区别。任何帮助深表感谢！ [http://viperformance.ca/viperformance](http://viperformance.ca/viperformance) （仍在测试，这就是为什么新站点在另一个文件夹中）

我感到很困惑。

PS。我确实有一些闪存文件，我知道它们不会工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:17:47.010

您将图像指向`localhost`

尝试检查浏览器上的源代码......它有这样的东西`http://localhost/viperformance/wp-content/themes/VIPCustom/images/facebook.png`

如果您在 php 文件中有它...将所有图像更改`src`为这样的内容

`<img src="<?php bloginfo('template_url'); ?>/images/facebook.png" />`

# ruby-on-rails-3 - 在 has_many, :through 关系中获取兄弟姐妹记录

> ID：14349953
> 
> 赞同：1
> 
> 时间：2013-01-16T01:16:37.080
> 
> 标签：ruby-on-rails-3, has-many-through

鉴于这种`has_many, :through`情况：

**文章.rb**

```
class Article < ActiveRecord::Base
  attr_accessible :body, :issue, :name, :id, :brand_ids

  has_many :publications
  has_many :docs, :through => :publications
  has_many :silos
  has_many :brands, :through => :silos
end 
```

**品牌.rb**

```
class Brand < ActiveRecord::Base
  attr_accessible :name, :logo1, :logo2, :colour1, :colour2

  has_many :users
  has_many :prices, :dependent => :destroy
  has_many :silos
  has_many :articles, :through => :silos
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable
  attr_accessor :current_password
  attr_accessible :name, :password, :password_confirmation, :current_password, :email, :remember_me, :brand_id
  belongs_to :brand
end 
```

我将如何编写范围、方法或助手来获取与当前用户`Article`共享的记录？`Brand`这些方面的东西：

```
class Article < ActiveRecord::Base
  scope :branded_articles, lambda { |user| where('brand_ids = ?', user.brand) }
end 
```

**编辑**

这样的事情应该有效，对吧？我只是无法弄清楚语法。

```
Article.all.brands.find(1) #should find all articles available to a brand with an ID of 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:50:44.253

解决方案非常简单：

```
@articles = current_user.brand.articles 
```

运气好的话可以帮助别人。

# css - 在同一行的不同类中创建不同的 div

> ID：14349965
> 
> 赞同：1
> 
> 时间：2013-01-16T01:17:52.787
> 
> 标签：css, drupal, cck

我有这样的事情：

```
<div class="wrapper" style="display:block;">
  <div class="field1">
    <div class="label">Label1</div>
    <div class="item">Item 1</div>
  </div>

  <div class="field2">
    <div class="label">Label2</div>
    <div class="item">Item2</div>
  </div>

  <div class="field3">
    <div class="label">Label3</div>
    <div class="item">Item3</div>
  </div>

  ... more fields ...
</div> 
```

如何通过 CSS 在同一行中将我的显示显示为“Item1 Item2 Item3”？我可以通过“display:none;”隐藏标签。我正在使用 Drupal 7 和 CCK 字段，所以我认为结构有点固定。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:21:21.837

如果我理解正确，你有一个必须设置为 display:block 的包装器，但在其中你希望每个 div 在同一行。

在这种情况下，这个 CSS 应该为你做：

```
.field1, .field2, .field3 {
  display: inline-block;
} 
```

这是在[JS Fiddle](http://jsfiddle.net/jjQdT/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:16:41.420

如果你想把所有东西都放在一行上，你应该使用`span`s。

具体来说，如果你想

> 项目 1 项目 2 项目 3

然后使用

```
<span class="field1">
    <span class="label">Label1</span>
    <span class="item">Item 1</span>
</span>
<!-- ... --> 
```

此外，您不需要引号：`<span class=field1></span>`很好。

希望这可以帮助！

# mysql - Objective-c MySQL 中的西里尔字母 NSString

> ID：14349971
> 
> 赞同：1
> 
> 时间：2013-01-16T01:18:53.787
> 
> 标签：mysql, objective-c

我正在使用 mySql 目标 c 库：[http](http://www.karlkraft.com/index.php/2010/09/17/mysql-for-iphone-and-osx/) : //www.karlkraft.com/index.php/2010/09/17/mysql-for-iphone-and-osx/ 并尝试在 LIKE 语句中使用西里尔符号：

```
NSString *cmd = [NSString stringWithFormat:@"select id,qrId,name,surname from users where name like '%%%@%%'",_nameField.text];
    userFetch = [MysqlFetch fetchWithCommand:cmd onConnection:myConnection]; 
```

它适用于英文字符，但在 _nameField.text 中使用西里尔符号我收到此错误： ***由于未捕获的异常“MysqlException”而终止应用程序，原因：“无法执行 mysql_stmt_bind_result() 错误 #1064：您的 SQL 中有错误句法; 检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''%–∞%' 附近使用正确的语法

在 MysqlFetch.m 中，我的命令被转换为 UT8String，这会导致 mysql_stmt_prepare 出现异常：

```
if (mysql_stmt_prepare(myStatement, [s UTF8String],[s length])) {
  [MysqlException raiseConnection:connection
                       withFormat:@"Could not perform mysql_stmt_bind_result() Error #%d:%s"
   ,mysql_errno(connection.connection),
   mysql_error(connection.connection)];
} 
```

我可以使用 MysqlInsert 使用 cyrylic NSStrings 进行插入。它不会导致异常，因为没有字段值（可能包含西里尔符号），只有字段名称：

```
NSArray *keys = [rowData allKeys];

NSMutableString *cmd = [NSMutableString string];
[cmd appendFormat:@"INSERT INTO %@ ( ",table];
BOOL firstAdd=YES;
for (NSString *columnName in keys) {
  if (firstAdd) {
    [cmd appendFormat:@" %@ ",[columnName mysqlEscapeInConnection:connection]];
    firstAdd=NO;
  } else {
    [cmd appendFormat:@", %@ ",[columnName mysqlEscapeInConnection:connection]];
  }
}

[cmd appendFormat:@" ) values ( ",table];

firstAdd=YES;
for (NSString *columnName in keys) {
  if (firstAdd) {
    [cmd appendString:@" ? "];
    firstAdd=NO;
  } else {
    [cmd appendString:@", ? "];
  }
}
[cmd appendFormat:@" ) "];

MYSQL_STMT *myStatement = mysql_stmt_init(connection.connection);

if (mysql_stmt_prepare(myStatement, [cmd UTF8String],[cmd length])) {
  [MysqlException raiseConnection:connection withFormat: @"mysql_stmt_prepare failed %@ %s",cmd, mysql_stmt_error(myStatement)];
} 
```

稍后添加值：

```
NSObject *object = [rowData objectForKey:key];
  if ([object isKindOfClass:[NSString class]]) {
    NSString *s = (NSString *)object;
    const char *ch = [s UTF8String];
    binding[x].is_null= 0;
    binding[x].buffer_type = MYSQL_TYPE_STRING; 
    binding[x].buffer = (void *)ch;
    binding[x].buffer_length= strlen(ch);        
  } 
```

可能有太多的文字和简单的问题：如何将西里尔文 NSString 转换为与 MysqlUpdate 一起使用？

# objective-c - NSDictionaries 和嵌套 JSON

> ID：14349981
> 
> 赞同：1
> 
> 时间：2013-01-16T01:19:29.887
> 
> 标签：objective-c, json, nsdictionary

我能够从 JSON 文件创建 NSDictionary 没问题，我需要知道的是如何做嵌套的 JSON 字符串？请参阅示例：

```
{
 "data": [
  {
     "id": "270639882984792_306265986160413",
     "from": {
        "category": "Non-profit organization",
        "name": "My Facebook Page",
        "id": "270639882984792"
     }, 
```

所以这是一个巨大的 JSON 文件的一部分，但是我该如何设置它，以便我可以从“from”键中调用“name”键 - 我知道如何从“data”中调用“id”键关键，但我想要的是更深的层次。

提前致谢：-）

编辑 - 这是我开始处理的一些 iOS 代码：

```
NSDictionary *items = [json objectForKey:@"data"];

NSArray *items2 = [items objectForKey:@"from"];
// NSDictionary *item = [items objectAtIndex:1];

NSMutableArray *story = [NSMutableArray array];

for (NSDictionary *item in items2 )
{

    if([item objectForKey:@"name"] || [item objectForKey:@"name"] != nil || [[item objectForKey:@"name"] length]>0){
        [story addObject:[item objectForKey:@"name"]];
    }

    NSLog(@"ITEM - %@", [item objectForKey:@"name"]);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:24:33.533

试试这个：

```
NSDictionary* data= json[@"data"];
NSDictionary* from= [data[0] objectForKey: @"from"];
NSString* name= from[@"name"]; 
```

如果您只想要名称就可以了，如果您需要所有数据，我建议创建一个能够为每个字典条目保存值的对象。您可以像我展示的那样访问“id”和“category”，只是使用不同的键。

# java - 添加 Windows 注册表项不起作用

> ID：14349983
> 
> 赞同：0
> 
> 时间：2013-01-16T01:19:36.340
> 
> 标签：java, registry

我正在尝试添加一个注册表项，该注册表项将允许我的程序在我的计算机启动时启动。它似乎不起作用。这是我的代码：

```
String[] execArgs = new String [2];

if ( os.indexOf( "windows" ) > -1 ) {
    File source = Methods.getJar(); //This method simply returns the full path to the running jar file.
    URL url=null;
    url=source.toURL();  
    File f = new File( URLDecoder.decode( url.getFile(), "UTF-8" ) );
    String userDir = System.getProperty("user.home");
    String path ="" ;

    if ( os.indexOf( "7" ) > -1 ) {
        path = (userDir+"/AppData/Roaming/Microsoft/");
    }

    if ( os.indexOf( "vista" ) > -1 ){
        path = (userDir+"/AppData/Roaming/Microsoft/");
    }

    if ( os.indexOf( "xp" ) > -1 ){
        path = (userDir+"/Start Menu/Programs/Startup/");
    }

    path = path.replaceAll("%20"," ");
    System.out.println("Will copy file to " +path);
    File targetDir = new File(path);
    FileUtils.copyFileToDirectory(f, targetDir);//Copy the file to appdata/roaming dir.
    String filename = source.getName();
    int last = filename.lastIndexOf("\\");
    filename = filename.substring(last + 1);
    String fullPath = path+filename;
    int l1 = filename.lastIndexOf(".");
    String fileText = filename.substring(0,l1);
    execArgs[0] = fileText;
    execArgs[1] = fullPath;
    new WinReg().exec(execArgs);  //Add a reg key to add to startup using WinReg class.
} 
```

这是我的`WinReg`课：

```
package test;
import java.text.MessageFormat;  

public class WinReg {  
    static final String REG_ADD_CMD = "cmd /c reg add \"HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Run\" /v \"{0}\" /d \"{1}\" /t REG_EXPAND_SZ";  

    void exec(String[] args)throws Exception {  
        if (args.length != 2)  
            throw new IllegalArgumentException("\n\nUsage: java SetEnv {key} {value}\n\n");  

        String key = args[0];  
        String value = args[1];  

        String cmdLine = MessageFormat.format(REG_ADD_CMD, new Object[] { key, value });  
        System.out.println(cmdLine); //get the final cmd that will be run
        Runtime.getRuntime().exec(cmdLine);  
    }  
} 
```

打印时`cmdLine`我得到这个：

```
cmd /c reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\Curren
tVersion\Run" /v "Test" /d "C:\Users\CJ/AppData/Roaming/Microsoft/Test.jar" /t R
EG_EXPAND_SZ 
```

我尝试手动运行此命令，但无法弄清楚它返回的语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:02:22.317

原因`cmd /c`不能像现在那样工作是因为如果命令有空格，你必须把它放在引号里。如果要使用`cmd /c`，由于嵌套引号，很难正确格式化：

```
rem Does not work:
cmd /c "reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Run" /v "Test" /d "C:\Users\CJ/AppData/Roaming/Microsoft/Test.jar" /t REG_EXPAND_SZ" 
```

一组在另一组中的引号使解释器感到困惑。

但是，`cmd /c`没有必要：直接运行命令——

```
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Run" /v "Test" /d "C:\Users\CJ/AppData/Roaming/Microsoft/Test.jar" /t REG_EXPAND_SZ 
```

Java 运行该命令就像您在命令行中键入它一样。因此，只需像在命令行上一样键入它，就像上面的第二个代码片段一样！

# wav - 如何以编程方式确定 WAV 文件的采样率和比特率？

> ID：14349988
> 
> 赞同：0
> 
> 时间：2013-01-16T01:20:05.537
> 
> 标签：wav

用户将 WAV 文件上传到我的服务。我需要以编程方式了解 WAV 文件的比特率和采样率。

我该怎么做？最好在 Windows 上，尽管 Unix 工具也可以。命令行工具会很方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:29:37.647

[从http://sox.sourceforge.net/](http://sox.sourceforge.net/)下载 Sox

跑：

```
sox --info filename.wav 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T01:43:16.500

请参阅[媒体](http://mediainfo.sourceforge.net/)信息。该工具提供图形用户界面、命令行界面和库 (.dll/.so/.dylib)。我更喜欢使用图书馆。

如果你想尝试 CLI，这里有一个命令行示例。

```
MediaInfo.exe "--Inform=Audio;" --Output=XML "test.wav" --logfile=result.xml 
```

然后我得到了一个result.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<Mediainfo version="0.7.61">
<File>
<track type="General">
<Complete_name>test.wav</Complete_name>
<Format>Wave</Format>
<File_size>14.2 KiB</File_size>
<Duration>659ms</Duration>
<Overall_bit_rate>177 Kbps</Overall_bit_rate>
</track>

<track type="Audio">
<ID>0</ID>
<Format>PCM</Format>
<Format_settings__Endianness>Little</Format_settings__Endianness>
<Codec_ID>1</Codec_ID>
<Duration>659ms</Duration>
<Bit_rate>176.4 Kbps</Bit_rate>
<Channel_s_>1 channel</Channel_s_>
<Sampling_rate>22.05 KHz</Sampling_rate>
<Bit_depth>8 bits</Bit_depth>
<Stream_size>14.2 KiB (100%)</Stream_size>
</track>

</File>
</Mediainfo> 
```

只需解析这个文件并找到字符串`<Sampling_rate>22.05 KHz</Sampling_rate>`。

# cakephp-1.3 - 调用未定义的方法 App::link()

> ID：14349993
> 
> 赞同：0
> 
> 时间：2013-01-16T01:20:42.827
> 
> 标签：cakephp-1.3

我用这个视图得到一个“调用未定义的方法 App::link()”：

```
<?php echo $this->link('Forum index', array('controller' => 'forum', 'action' => 'index')); ?> »
<?php echo $this->link($forumName, array('controller' => 'forum', 'action' => 'view', $forumId)); ?> 
```

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:32:10.407

你试过`$this->Html->link()`吗？

`$this`在视图中使用不多。最常见的是`$this->Html->`或`$this->Form->`

# windows - 如何避免导致 GUI 对话框的 cmd 错误？

> ID：14349998
> 
> 赞同：0
> 
> 时间：2013-01-16T01:21:48.707
> 
> 标签：windows, cmd

在我的 cmd 批处理文件中，如何避免操作系统错误导致这样的 GUI 对话框

[http://img221.imageshack.us/img221/4792/betachriswindowedbetare.png](http://img221.imageshack.us/img221/4792/betachriswindowedbetare.png)

?

这会阻止我使用例如关闭框。我希望向控制台报告所有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:03:08.390

> 如何避免导致 GUI 对话框的 cmd 错误？

简而言之：你不能。

Windows 基本上支持两种类型的（用户模式）应用程序类型：控制台（模式）或窗口（图形）。

但是，这里没有强制执行。每个控制台模式应用程序都可能有 GUI 元素（例如，在出现错误的情况下弹出一个消息框），每个 GUI 应用程序都可以启动一个控制台并在那里发出一些东西（参见[AllocConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx) Win32 函数）。

因此，除非您从批处理文件中调用的每个应用程序/命令

*   是一个不显示某种 GUI 的控制台应用程序

或者

*   是一个 GUI 应用程序，但具有使其在批处理文件/命令行环境中“表现”的特定选项

没有办法保证你所寻求的。