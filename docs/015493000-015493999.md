# StackOverflow 问答 15493000-15493999

# android - 对 Android 应用程序图形源路径感到困惑

> ID：15493007
> 
> 赞同：0
> 
> 时间：2013-03-19T06:37:18.350
> 
> 标签：android, adt

我已经开发了一个应用程序并负责维护它，这意味着学习 Eclipse ADT 环境。近 20 年的 web 开发经验给了我一些安慰，但这无疑是一种全新的体验。

在“图形布局”窗口中显示的屏幕之一中，图形源在“属性”面板中显示为：

```
Src  @drawable/ordo_search 
```

`ordo_search`，显然是 PNG 图形的名称，`drawable`似乎是文件夹。但是有 4 个文件夹保存这个应用程序的图形，都以单词开头`drawable`。他们是：

*   可绘制的
*   可绘制的 hdpi
*   可绘制的大 mdpi
*   可绘制-sw600dp-hdpi

通过更改此特定图像并查看图形布局中出现的更改，我确定此图形位于名为`drawable-sw600dp-hdpi`. 在应用程序的其他区域，我以相同的方式确定从 4 个文件夹中的任何一个中提取图形，但在所有情况下，属性源路径都读取相同：`@drawable`

在某处，该`@drawable`属性被告知该图形所在位置的绝对路径，这就是我需要找到的：我将在哪里找到并编辑该图形或任何图形的路径？

显然我只是开始了解环境，所以如果你愿意的话，请多多包涵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:48:32.770

无法获取路径

由于设备的 dpi 不同，此路径因设备而异，它可以指向您定义的 4 个文件夹中的任何一个。如果您想要可绘制的图像，您可以使用代码通过代码获取它`getResources().getDrawable(R.drawable.yourdrawablename);`

这将返回您的可绘制对象，您可以使用它显示在`ImageView`您想要的位置或任何位置。

# asp.net-mvc - 调用下拉列表选择的值作为@html.action 路由值

> ID：15493018
> 
> 赞同：3
> 
> 时间：2013-03-19T06:38:17.673
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html.actionlink

如何将下拉列表选定值调用为@html.action 路由值。我在我的 MVC3 剃须刀中使用以下代码。我必须动态调用“eventid”作为下拉列表选择值。

```
@Html.Action("FirmPassForum", "Conference", new { eventId = 69 }) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T06:42:59.130

您不能这样做，因为 Html.Action 助手在服务器上呈现，而下拉选择可能会在客户端上更改。一种可能性是使用 AJAX 调用。所以基本上你可以订阅`.change()`下拉事件并向某些控制器操作发送 AJAX 调用，该操作将返回部分视图并更新 DOM。

首先将其放入容器中：

```
<div id="container">
    @Html.Action("FirmPassForum", "Conference", new { eventId = 69 })
</div> 
```

进而：

```
<script type="text/javascript">
    $(function() {
        $('#id-of-your-dropdown').change(function() {
            var eventId = $(this).val();
            $.ajax({
                url: '@Url.Action("FirmPassForum", "Conference")',
                type: 'GET',
                data: { eventId: eventId },
                cache: false,
                success: function(result) {
                    $('#container').html(result);
                }
            });
        });
    });
</script> 
```

**为了**使您的操作起作用，`FirmPassForum`不应使用以下属性装饰：**`[ChildActionOnly]`**

 **```
public ActionResult FirmPassForum(int eventId)
{
    MyViewModel model = ...
    return PartialView(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T13:24:04.387

你也可以用这个

```
`//var url = '@Url.Action("ActionName", "Controller")';

$.post("/Controller/ActionName?para1=" + data, function (result) {
    $("#" + data).html(result);
    ............. Your code
});` 
```**

# mysql - MYSQL CONSOLE 中的触发器

> ID：15493025
> 
> 赞同：3
> 
> 时间：2013-03-19T06:39:22.767
> 
> 标签：mysql, database, stored-procedures, console, phpmyadmin

我正在努力`phpmyadmin`。要编写我正在使用的触发器`mysql console`。
它在启动时效果很好。但是一旦我编写一个触发器并且它成功执行，那么每次在任何查询之后我都必须给出`delimiter`（|）来执行查询。
我无法理解为什么我必须在简单的选择查询之后放置分隔符？分隔符用于触发仪式。
我在写触发器时遗漏了什么吗？例如：

在触发器之后，我正在编写选择语句而不是我必须将其编写为：

```
select * from tableName;| 
```

如果我不使用`|`它不会执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:39:09.303

试试这个 ：

```
DELIMITER $$

DROP TRIGGER IF EXISTS `myTriggerName`$$

CREATE TRIGGER `myTriggerName` AFTER DELETE ON `myTableName` FOR EACH ROW BEGIN

...........
............
.............

END$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:17:38.387

创建触发器后，您需要将分隔符改回';'

请参阅手册中的示例：

[http://dev.mysql.com/doc/refman/5.6/en/stored-programs-defining.html](http://dev.mysql.com/doc/refman/5.6/en/stored-programs-defining.html)

```
delimiter //

... your trigger here ...

delimiter ; <-- change the delimiter back 
```

# ajax - 想要在文本字段上按回车键时执行功能

> ID：15493028
> 
> 赞同：0
> 
> 时间：2013-03-19T06:39:25.903
> 
> 标签：ajax, forms, text

我有这个 HTML：

```
<form id="form1" name="form1" method="post" action="">
  <input name="PtName"   type="text" id="PtName" />
  <input name="Button" type="button" id="button"  onclick="search_p()" value="Check" />
        </form> 
```

serach_p() 是函数：

```
<script type="text/javascript">
function search_p(){
         $.ajax({
      url: 'srchpt.php',
      type: 'POST',
      data: { PtName: $('#PtName').val()},
      success: function(data){
        $(".myresult").html(data);
      }
    })
}
</script> 
```

我想当我在 PtName 文本中按 enter 键时执行相同的 search_p() 函数我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:42:59.033

`onsubmit`在您的表单上指定一个：

```
<form ... onsubmit="search_p(); return false"> 
```

并将`type`您的按钮更改为`submit`：

```
<input name="Button" type="submit" id="button" value="Check" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:47:07.533

您可以使用以下 jquery 函数来执行此操作：

```
$("#PtName").keyup(function (e) {
    if (e.keyCode == 13) {
        // call function
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T06:52:29.670

**Javascript：** 在 javascript 中输入以下函数

```
function enterPressed(event) {
    var key;

    if (window.event) {
        key = window.event.keyCode; //IE
    } else {
        key = event.which; //firefox
    }

    if (key == 13) {
        yourFunction();
       // do whatever you want after enter pressed event. I have called a javascript function
    }
} 
```

**HTML：**

```
<input type="text" onkeypress="javascript:enterPressed(event)"> 
```

对于必需的文本字段放置`onkeypress`事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T06:54:32.713

在表单的提交事件上调用您的函数：-

```
<html>
    <head>
        <script type="text/javascript">
            function search_p(){
                $.ajax({
                    url: 'srchpt.php',
                    type: 'POST',
                    data: { PtName: $('#PtName').val()},
                    success: function(data){
                        $(".myresult").html(data);
                    }
                })
            }
        </script>
    </head>
    <body>
        <form id="form1" name="form1" method="post" action="" onsubmit="search_p()" >
            <input name="PtName"   type="text" id="PtName" />
            <input name="Button" type="button" id="button"  onclick="search_p()" value="Check" />
        </form>
    </body> 
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T09:49:46.740

我想要一个文本区域，它会在**shift+enter**上换行，并且在**Enter**上会提交： [这似乎回答了我的查询](https://stackoverflow.com/a/18779374/10229006)

# android - 如何在小于 14 的 android mediaplayer api 版本中添加授权标头

> ID：15493033
> 
> 赞同：1
> 
> 时间：2013-03-19T06:39:51.127
> 
> 标签：android, android-mediaplayer, android-source, google-tv

我无法让它工作，因为我需要将授权标头传递给我的 HTTPS 流，并且由于它是一个 google tv 应用程序，因此使用 setDataSource(context, uri, headers) 的 api 级别不高达 14。我尝试了这篇文章中提到的方法[How do I include http headers with MediaPlayer setDataSource?](https://stackoverflow.com/questions/8959300/how-do-i-include-http-headers-with-mediaplayer-setdatasource) 通过使用反射。但是，我收到这样的错误日志：

![日志](../Images/27b969d6e09637dc767fe61828240839.png)

任何评论或帮助将不胜感激。附上我用来设置数据源的异步任务的源代码。请忽略 suppressLint("newAPI") 行。

![设置数据源任务](../Images/2b760d7803f9ceb6fac742982ca51121.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:13:50.167

TL;DR - Google TV 的媒体播放器实施不支持 HTTPS

所以这里是关于 HTTPS 和 Google TV 上的媒体播放器的有趣之处。由于某些原因我不会在这里讨论，谷歌电视媒体播放器中对 HTTPS 的支持被禁用 - 因此是“BLOCKED” - 我知道这可能会让你的努力感到沮丧 - 我只是信使。如果您对此有强烈的感觉，我会鼓励您在 Google TV 问题跟踪器上提交错误。

# windows-phone-8 - Windows Phone 8 中的异常

> ID：15493035
> 
> 赞同：1
> 
> 时间：2013-03-19T06:40:04.433
> 
> 标签：windows-phone-8

我将一个类库从 windows phone 7 转换为 windows phone 8 版本。但是在运行时，我收到异常“System.Windows.ni.dll 中发生'System.Windows.Markup.XamlParseException' 类型的第一次机会异常” XAML 解析器异常正在发生。初始化库中的用户控件时发生上述异常，代码如下。

```
<UserControl x:Class="WindowsPhone.LogicClient"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="480" d:DesignWidth="480">
    <Grid x:Name="LayoutRoot">       
        <controls:Pivot Name="OPivot">
            <controls:Pivot.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}" DoubleTap="TextBlock_DoubleTap"/>
                </DataTemplate>
            </controls:Pivot.HeaderTemplate>
        </controls:Pivot>        
    </Grid>
</UserControl> 
```

请注意在 windows phone 7.1 源码中没有这样的例外

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:57:07.177

我把你的代码放在测试应用程序中，它只需要改变我需要做的转换：

```
xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls" 
```

到

```
xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone" 
```

并检查您是否不会错过在您的 App Manifest 中启用任何必需的功能

# php - 需要关于对类中的复杂方法进行 PHP 单元测试的建议

> ID：15493039
> 
> 赞同：1
> 
> 时间：2013-03-19T06:40:23.280
> 
> 标签：php, unit-testing, phpunit

我是单元测试的初学者，并且难以测试 PHP 类中的算法（在实际实现中可由 cron 执行），该类中的函数没有参数以及依赖于数据源的其他类，例如这个：

```
class Mailing_System_Algo {     

    function __construct()
    {

        //Run the mailing system method    

        $this->execute_mailing_system();

    }

    function execute_mailing_system()
    {           

        $Class_Data_Source = new Data_Source;
        $groups = $Class_Data_Source->get_groups();

        //Proceed only if groups are defined
        if (!(empty($groups))) {
            //rest of the algo codes here-very long and lots of loops and if statements

        }
    }   

} 
```

我想把算法函数当作一个黑匣子来对待，这样我在做测试时就不会改变他们代码上的任何东西。但是，如果 execute_mailing_system 将在类被实例化的那一刻立即运行，我如何通过向它们提供输入来开始测试它们呢？

假设我想检查算法是否会在有或没有组的情况下执行，我如何在我的单元测试代码中为 $groups 提供输入？

这就是我的测试用例的样子：

```
class WP_Test_Mailing_System_Algo extends WP_UnitTestCase {

/**
 * Run a simple test to ensure that the tests are running
 */

function test_tests() {
            //no problem here
    $this->assertTrue( true );
}

function test_if_algo_wont_run_if_no_groups_provided {

            //Instantiate, but won't this algo run the construct function rightaway?
    $Mailing_System_Algo = new Mailing_System_Algo;

            //rest of the test codes here
            //how can I access or do detailed testing of execute_mailing_system() function and test if it won't run if groups are null or empty.
            //The function does not have any arguments

} 
```

}

当然，我会写很多测试，但我目前坚持这个。这是我需要执行的第一个测试。但是我对如何开始这样做有疑问。我相信一旦我掌握了正确的技术，其余的测试就会很简单。我将不胜感激您的任何意见和帮助..谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:55:09.073

代码有两个缺陷会妨碍测试：

1.  [构造函数做真正的工作](http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/)
2.  [硬编码的依赖](http://sebastian-bergmann.de/archives/885-Stubbing-Hard-Coded-Dependencies.html)

您可以通过将类更改为

```
class Mailing_System_Algo 
{     
    public function __construct()
    {
        // constructors should not do work
    }

    public function execute_mailing_system(Data_Source $Class_Data_Source)
    {           
        $groups = $Class_Data_Source->get_groups();

        //Proceed only if groups are defined
        if (!(empty($groups))) {
            //rest of the algo codes here-very long and lots of loops and if statements
        }
    }   
} 
```

这样，您可以用 Mock 或 Stub 替换您`Data_Source`的[，](http://www.phpunit.de/manual/current/en/test-doubles.html)返回定义的测试值。

如果这不是一个选项，请查看 Test Helper 扩展：

*   [https://github.com/sebastianbergmann/php-test-helpers](https://github.com/sebastianbergmann/php-test-helpers) ¹

特别是看一下`set_new_overload()`，它可用于注册一个回调，该回调会在执行 new 运算符时自动调用。

* * *

¹ [Test-Helper 扩展被](https://twitter.com/s_bergmann/status/457816903881588736)https://github.com/krakjoe/uopz[取代](https://github.com/krakjoe/uopz)

# asp.net-mvc - 根据 MVC 中的条件在表中动态创建行

> ID：15493040
> 
> 赞同：1
> 
> 时间：2013-03-19T06:40:31.500
> 
> 标签：asp.net-mvc

我通过控制器将一组控件（复选框、单选按钮等）作为列表传递到其相应的视图。这是我想要实现的目标。

1.  表中的每一行应该有 3 列。
2.  如果对象的数量超过 3 个，则应在表中创建一个新行。

我正在使用 MVC 4 执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:52:02.813

这是你可以在 mvc 中做到的方式：

模型：

```
 public class Class1
    {
          public string numbers { get; set; }
    } 
```

控制器代码：

```
 public ActionResult About()
        {
            ViewBag.Message = "Your app description page.";
            //Sample1--load array data using linq
            List<Class1> model = new List<Class1>();
            int[] numbersdata = { 5, 4, 1, 3, 9, 8, 6, 7, 2, 0, 15, 14, 11, 13, 19, 18, 16, 17, 12, 10 };

            var lowNums = from n in numbersdata where n > 5 select n;

            foreach (var x in lowNums)
            {
                model.Add(new Class1()
                {
                    numbers = x.ToString()
                });
            }
            return View(model);
        } 
```

看法 ：

```
@model IEnumerable<MvcApplication1.Models.Class1>
@using (Html.BeginForm())
{
    <table width="960px">
        <tr>
            @{
    int crow = 1;
    foreach (var item in Model)
    {
                <td style="border: 1px solid black;" width="600px">
                    <ul style="list-style: none;">
                        <li>
                            @Html.TextBox("txt")
                        </li>

                    </ul>
                </td>
        if (crow % 3 == 0)
        {                                                    
                <tr>
                    <td style="width: 285px; height: 50px">
                    </td>
                </tr>
        }
        crow++;
        }
     }
        </tr>
    </table>
} 
```

# android - 如何以编程方式将自定义帧添加到图像

> ID：15493044
> 
> 赞同：4
> 
> 时间：2013-03-19T06:40:42.890
> 
> 标签：android, frames, image-editing

我想创建一个应用程序，我需要在其中添加框架到图像。我不知道重新分级这个。我有一个链接，框架被添加到图像中。任何人都可以帮助我。

这是[链接](https://play.google.com/store/apps/details?id=air.com.befunky.BeFunkyPhotoEditor&hl=en)

@提前致谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T07:03:00.353

**编辑：**画廊`OnItemClickListener`

```
gallery.setOnItemClickListener(new OnItemClickListener() {
        Bitmap frame = null, out = null;

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
           Bitmap urImage = BitmapFactory.decodeResource(getResources(),
                    R.drawable.urBackgroundImageID);//edit
            frame = BitmapFactory.decodeResource(getResources(),
                    frames[arg2]);
            out = combineImages(frame, urImage);
            imageView.setImageBitmap(out); //add "out" for ur ImageView
        }
    }); 
```

`frames[]`是可绘制的数组，即不同的帧

以下方法将动态组合两个图像

```
public Bitmap combineImages(Bitmap frame, Bitmap image) {

    Bitmap cs = null;
    Bitmap rs = null;

    rs = Bitmap.createScaledBitmap(frame, image.getWidth(),
            image.getHeight(), true);

    cs = Bitmap.createBitmap(rs.getWidth(), rs.getHeight(),
            Bitmap.Config.RGB_565);

    Canvas comboImage = new Canvas(cs);

    comboImage.drawBitmap(image, 0, 0, null);
    comboImage.drawBitmap(rs, 0, 0, null);

    if (rs != null) {
        rs.recycle();
        rs = null;
    }
    Runtime.getRuntime().gc();

    return cs;
} 
```

您可以尝试不同的整数值

```
comboImage.drawBitmap(image, 0, 0, null);
comboImage.drawBitmap(rs, 0, 0, null); 
```

我放在那里`0`以获得图像上所需的帧位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T06:57:33.363

有很多方法。一种非常简单的方法是，您可以在 View 的 onDraw 方法中在图像上绘制自定义框架，然后在 Bitmap 中绘制视图。还有另一种方法，将帧像素数据写入图像像素数据，然后将新图像与帧组合，您可以使用 openCV 或其他第三方库来解码图像。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-12-19T04:45:28.563

```
 <FrameLayout
         android:id="@+id/frame"
         android:layout_width="120dp"
        android:layout_height="120dp"
        android:foreground="@drawable/your frame...">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_margin="10dp"
        android:layout_gravity="center"
        android:src="@drawable/ic_launcher" />
    </FrameLayout> 
```

# ios6 - ios 6 InApp Purchase SKPaymentTransaction 不起作用的方法

> ID：15493047
> 
> 赞同：1
> 
> 时间：2013-03-19T06:41:10.023
> 
> 标签：ios6, in-app-purchase, in-app-billing, storekit, xcode4.6

我正在使用以下代码：

但错误是：开关案例在案例SKPaymentTransactionStateRestored的保护范围内：也案例SKPaymentTransactionStateFailed：和
默认值：

有人解决这个问题吗？

先感谢您。

```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {

    for (SKPaymentTransaction *transaction in transactions)
 {
        switch (transaction.transactionState)

        {
            case SKPaymentTransactionStatePurchasing:
                                 //[self completeTransaction:transaction];
                // show wait view here
                statusLabel.text = @"Processing...";
                break;

            case SKPaymentTransactionStatePurchased:

                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                // remove wait view and unlock feature 2
                statusLabel.text = @"Done!";
                UIAlertView *tmp = [[UIAlertView alloc]
                                    initWithTitle:@"Complete"
                                    message:@"You have unlocked Feature 2!"
                                    delegate:self
                                    cancelButtonTitle:nil
                                    otherButtonTitles:@"Ok", nil];
                [tmp show];

                NSError *error = nil;
                [SFHFKeychainUtils storeUsername:@"IAPNoob01" andPassword:@"whatever" forServiceName:kStoredData updateExisting:YES error:&error];

                // apply purchase action  - hide lock overlay and
                [feature2Btn setBackgroundImage:nil forState:UIControlStateNormal];

                // do other thing to enable the features

                break;

   case SKPaymentTransactionStateRestored: //ERROR:- Switch case is in protected scope

                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

                // remove wait view here
                statusLabel.text = @"";

                break;

 case SKPaymentTransactionStateFailed: //ERROR:- Switch case is in protected scope

                if (transaction.error.code != SKErrorPaymentCancelled)
            //    [self failedTransaction:transaction];
                {
                    NSLog(@"Error payment cancelled");
                }
                [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
                // remove wait view here
                statusLabel.text = @"Purchase Error!";
                break;

          default:  //ERROR:- Switch case is in protected scope

                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:43:01.983

`{`你应该用和括起来`}`。

例子：

```
 switch (transaction.transactionState)
    {
        case SKPaymentTransactionStatePurchasing:
            {
                //[self completeTransaction:transaction];
                // show wait view here
                statusLabel.text = @"Processing...";
                break;
            }
        case SKPaymentTransactionStateFailed:
            {
                // another case contents
                break;
            }
    } 
```

# java - android中的java空指针异常

> ID：15493055
> 
> 赞同：0
> 
> 时间：2013-03-19T06:41:52.020
> 
> 标签：java, android, nullpointerexception

在我的主要活动中：

```
count=count+1;
//the problem seems to be in this line of code below
String fileName=f.getFileName(count).toString();
// the method below invokes a method from another class. it works fine so please ignore
helloTxt.setText(readText.readTxt(fileName)); 
```

f 是 FileName 类的对象，我从中获取文件名：

```
public class FileName {

    String file;
    public String getFileName(int count) {
        // TODO Auto-generated method stub

        if (count==1)
        {
            file.equals("textone");
        }

        if(count==2)
        {
            file.equals("texttwo");
        }
        return file;

    }

    } 
```

原木猫：

```
03-19 12:02:00.554: D/AndroidRuntime(5550): Shutting down VM
03-19 12:02:00.554: W/dalvikvm(5550): threadid=1: thread exiting with uncaught exception (group=0x418342a0)
03-19 12:02:00.562: E/AndroidRuntime(5550): FATAL EXCEPTION: main
03-19 12:02:00.562: E/AndroidRuntime(5550): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testflashfile/com.example.testflashfile.MainActivity}: java.lang.NullPointerException
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.os.Looper.loop(Looper.java:137)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.app.ActivityThread.main(ActivityThread.java:4895)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at java.lang.reflect.Method.invokeNative(Native Method)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at java.lang.reflect.Method.invoke(Method.java:511)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at dalvik.system.NativeStart.main(Native Method)
03-19 12:02:00.562: E/AndroidRuntime(5550): Caused by: java.lang.NullPointerException
03-19 12:02:00.562: E/AndroidRuntime(5550):     at com.example.testflashfile.FileName.getFileName(FileName.java:11)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at com.example.testflashfile.MainActivity.onCreate(MainActivity.java:48)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.app.Activity.performCreate(Activity.java:5163)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-19 12:02:00.562: E/AndroidRuntime(5550):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
03-19 12:02:00.562: E/AndroidRuntime(5550):     ... 11 more
03-19 12:02:11.164: I/Process(5550): Sending signal. PID: 5550 SIG: 9 
```

所有活动都列在清单中。因此，非常感谢任何可以解决此问题的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:44:01.563

代替

```
file.equals("textone"); 
```

和

```
file = "textone"; 
```

和

```
file.equals("texttwo"); 
```

和

```
file = "texttwo"; 
```

您正在为字符串文件获取 NPE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T06:44:32.570

代替

```
file.equals("textone");
file.equals("texttwo"); 
```

利用

```
file = "textone";
file = "texttwo"; 
```

在使用方法之前，您应该采取一些步骤。见[`API`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)。

请参阅方法的文档[`equals`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)：

> 将此字符串与指定对象进行比较。

它不分配值。分配一个值使用`=`运算符。

> 以及为什么抛出`NullPointerException`：

默认情况下，类的实例字段被初始化为其默认值。引用类型分配有 default `null`。并且在`file.equals("textone");`执行之前，`file`变量被分配`null`并导致NPE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T06:44:05.263

这意味着您正在访问一个空值

```
file.equals("textone"); 
```

首先，您需要使用字符串初始化文件

```
file = "textone";
file = "texttwo"; 
```

equals 用于比较而不是用于分配

这里文件为空

# java - Min Heapify 方法- 最小堆算法

> ID：15493056
> 
> 赞同：5
> 
> 时间：2013-03-19T06:41:54.460
> 
> 标签：java, algorithm, heap, min-heap

我正在尝试建立一个最小堆。**我已经完成了插入、删除、交换、上堆、下堆，它工作正常。**

但是，我正在尝试为 Min-Heapify 编写一个方法。

**这是我的输入：{20,14,9,6,4,5,1}**

我期望的输出是最小堆：{1,5,4,20,9,6,14} 但我得到的是：{14,6,9,20,4,5,1} 这是对面的。

这是我的代码：

```
public void minHeapify(int parentIndex)
    {
        int left = getLeft(parentIndex);
        int right = getRight(parentIndex);
        int smallest = parentIndex;
        if(_size >right && _heapArray[left]<_heapArray[parentIndex])
        {
            smallest = left;
        }

        if(_size>left && _heapArray[right]<_heapArray[parentIndex])
        {
            smallest = right;
        }
        if(smallest !=parentIndex)
        {
            replace(parentIndex, smallest);
            minHeapify(smallest);
        }
    } 
```

我遵循了 MAX-Heapify 的这个伪代码

```
Heapify (A, i)
l ← left [i]
r ← right [i]
if l ≤ heap-size [A] and A[l] > A[i]
then largest ← l
else largest ← i
if r ≤ heap-size [A] and A[i] > A[largest]
then largest ← r
if largest  ≠ i
then exchange A[i] ↔ A[largest]
Heapify (A, largest) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T06:51:53.917

应该检查左孩子的部分有一个错字。线

```
if(_size >right && _heapArray[left]<_heapArray[parentIndex]) 
```

应该

```
if(_size >left && _heapArray[left]<_heapArray[parentIndex]) 
```

右边有一个类似的错字（看起来你把`left`and换`right`错了地方），但也有一个更严重的逻辑错误。以下行：

```
if(_size>left && _heapArray[right]<_heapArray[parentIndex]) 
```

实际上应该是（纠正错字和逻辑错误）：

```
if(_size>right && _heapArray[right]<_heapArray[smallest]) 
```

因为您需要选择`left`或中较小的那个`right`。如果您只检查`_heapArray[right]<_heapArray[parentIndex]`，那么只要右孩子小于父母，即使左孩子小于右孩子，您也会将父母与右孩子交换。

顺便说一句，您也可以检查`heapArray[smallest]`而不是`heapArray[parentIndex]`左侧，因为您初始化`smallest`为`parentIndex`较早。

# sql - 'SDFSDFJDH' 附近的语法不正确。插入语句中出现额外的 ' 时的 t-sql

> ID：15493057
> 
> 赞同：-1
> 
> 时间：2013-03-19T06:41:55.293
> 
> 标签：sql, sql-server-2008, tsql, sql-insert

当我尝试在 DataType 为 NVARCHAR(MAX) 的字段中插入任​​何数据并且数据包含一些“'”时，每次都会出错...

请建议。

我想在这里插入，因为**昨天我去了 Roshan 的生日**

这是我的查询

```
INSERT INTO TEST1242 VALUES(1,'Yesterday i went Roshan's b'day') 
```

错误：

```
Incorrect syntax near 's'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:42:55.147

如果您直接在 RDBMS 上运行它，则需要将单引号加倍，

```
INSERT INTO TEST1242 VALUES(1,'Yesterday i went Roshan''s b''day') 
```

但如果在应用程序级别，最好参数化该值以避免来自`SQL Injection`.

# google-drive-api - 存储来自 Google OAuth 2.0 的访问令牌以从应用程序帐户访问驱动器数据

> ID：15493062
> 
> 赞同：8
> 
> 时间：2013-03-19T06:42:20.710
> 
> 标签：google-drive-api, google-api-python-client

我可以 使用 python 为 Google Drive执行[quickstart.py 。](https://developers.google.com/drive/quickstart-python)但是我们如何存储令牌并再次使用它 - 再次为同一个用户而不提示用户。在 Google 驱动器上发送文件请求时，我可以通过某种方式将用户映射到访问令牌。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T15:14:26.593

有许多不同`Storage`的类型提供`google-api-python-client`，[其中一些](https://developers.google.com/api-client-library/python/guide/aaa_oauth#storage)是有[据可查](https://developers.google.com/api-client-library/python/platforms/google_app_engine#Storage)[的](https://developers.google.com/api-client-library/python/platforms/django#Storage) 。

一些例子：

# oauth2client.file.Storage：

```
from oauth2client.file import Storage
...
storage = Storage('a_credentials_file')
storage.put(credentials)
...
credentials = storage.get() 
```

# oauth2client.keyring_storage.Storage：

```
from oauth2client.keyring_storage import Storage
...
storage = Storage('application name', 'user name')
storage.put(credentials)
...
credentials = storage.get() 
```

# oauth2client.appengine.StorageByKeyName：

```
from oauth2client.keyring_storage import StorageByKeyName
from oauth2client.keyring_storage import CredentialsNDBModel
...
storage = StorageByKeyName(CredentialsNDBModel, some_user_id, 'credentials')
storage.put(credentials)
...
credentials = storage.get() 
```

# oauth2client.django_orm.Storage：

```
from django.contrib.auth.models import User
from oauth2client.django_orm import Storage
from your_project.your_app.models import CredentialsModel
...
user = # A User object usually obtained from request.
storage = Storage(CredentialsModel, 'id', user, 'credential')
credential = storage.get()
...
storage.put(credential) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-03T21:13:47.647

我认为您应该感谢 bossylobster 以获得更完整的答案，但根据您的评论，这正是我的设置，我使用 Storage 类扩充了 quickstart.py：

```
#!/usr/bin/python                                                                                                                         
import httplib2
import pprint

from apiclient.discovery import build
from apiclient.http import MediaFileUpload
from oauth2client.client import OAuth2WebServerFlow
from oauth2client.file import Storage

# Copy your credentials from the console                                                                                                  
CLIENT_ID = 'PASTE_YOUR_ID'
CLIENT_SECRET = 'PASTE_YOUR_SECRET'

# Check https://developers.google.com/drive/scopes for all available scopes                                                               
OAUTH_SCOPE = 'https://www.googleapis.com/auth/drive'

# Redirect URI for installed apps                                                                                                         
REDIRECT_URI = 'urn:ietf:wg:oauth:2.0:oob'

# Create a credential storage object.  You pick the filename.
storage = Storage('a_credentials_file')

# Attempt to load existing credentials.  Null is returned if it fails.
credentials = storage.get()

# Only attempt to get new credentials if the load failed.
if not credentials:

    # Run through the OAuth flow and retrieve credentials                                                                                 
    flow = OAuth2WebServerFlow(CLIENT_ID, CLIENT_SECRET, OAUTH_SCOPE, REDIRECT_URI)

    authorize_url = flow.step1_get_authorize_url()
    print 'Go to the following link in your browser: ' + authorize_url
    code = raw_input('Enter verification code: ').strip()

    credentials = flow.step2_exchange(code)
    storage.put(credentials)

# Create an httplib2.Http object and authorize it with our credentials                                                                    
http = httplib2.Http()
http = credentials.authorize(http)
drive_service = build('drive', 'v2', http=http)

# Use 'drive_service' for all of the API calls 
```

# php - PHP从用户那里获取数据并搜索多个列

> ID：15493064
> 
> 赞同：1
> 
> 时间：2013-03-19T06:42:25.860
> 
> 标签：php, mysql, duplicate-removal

我有一个名为
group(group_name, admin_name);的数据库表

我设计了一个用于搜索组的表单（一个简单的文本框和一个搜索按钮）

现在的查询是，无论用户在 TextBox 中输入什么，它都应该在整个表中搜索字符串并返回值（即组名和管理员名）

我只能对单个列执行此操作
$text = // 用户输入的字符串；

```
SELECT * FROM `group` WHERE `group_name` LIKE '%$text%'; (For group_name column)
SELECT * FROM `group` WHERE `admin_name` LIKE '%$text%'; (For admin_name column) 
```

我想为两者都这样做....
我在两列中都使用它

`SELECT * FROM` `group` `WHERE` `group_name` `LIKE '%$text%' or` `admin_name` `LIKE '%$text%';`

在这里我得到重复的值
我想让它像一个搜索引擎
请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:45:00.963

尝试-

```
SELECT DISTINCT * FROM `group` WHERE `group_name` LIKE '%$text%' or `admin_name` LIKE '%$text%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:45:58.683

您可以使用 distinct 并将它们分组在哪里

```
SELECT DISTINCT *
FROM group
WHERE (group_name LIKE '%$text%'
    or admin_name LIKE '%$text%'); 
```

# sql - 如何使用 TSQL 在 While 循环中增加 NVarchar 值？

> ID：15493065
> 
> 赞同：3
> 
> 时间：2013-03-19T06:42:25.997
> 
> 标签：sql, sql-server, tsql

我正在尝试增加这样的变量的 nvarchar 值；

```
 declare @i int
    set @i = 0
    -- I want a book `@BookSerialNo`  to be increment like e.g abcde-1, abcde-2 
    set @BookSerialNo = CAST(@BookSerialNo +'-' + @i as nvarchar(50));
    WHILE(@i<>@Quantity)
        BEGIN
            INSERT INTO Library.BookDetail
            (
                BookId,
                BookSerialNo,
                CreatedBy,
                CreateDate,
                UpdateDate,
                Updateby
            )
            VALUES
            (
                @BookId,
                @BookSerialNo,
                @CreatedBy,
                @CreatedDate,
                @UpdatedDate,
                @UpdatedBy
            )
            SET @i = @i+1;
        END 
```

所以，我的问题是，
**如何`@BookSerialNo`在循环中增加每个时间的值？**
我想要它，例如'abcdef-1'，'abcdef-2'，'abcdef-3'，我只想在'-'之后包含数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T06:58:17.263

试试这个..

```
 set @BookSerialNo = @BookSerialNo +'-0';
    WHILE(@i<>@Quantity)
        BEGIN
            INSERT INTO Library.BookDetail
            (
                BookId,
                BookSerialNo,
                CreatedBy,
                CreateDate,
                UpdateDate,
                Updateby
            )
            VALUES
            (
                @BookId,
                @BookSerialNo,
                @CreatedBy,
                @CreatedDate,
                @UpdatedDate,
                @UpdatedBy
            )
            SET @i = @i+1;
            --increment the serialno also
            SET @BookSerialNo = SUBSTRING(@BookSerialNo, 0, CHARINDEX('-',@BookSerialNo)+1);  
            set @BookSerialNo = @BookSerialNo + CAST (@i as nvarchar(50));
        END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T06:43:37.237

只是移动`set`里面`while`？

```
WHILE(@i<>@Quantity)
    BEGIN
    set @BookSerialNo = cast(@BookSerialNo as nvarchar(50)) +'-' + 
                        cast(@i as nvarchar(50));
    ....
    SET @i = @i+1;
    END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T06:56:03.097

假设 @BookSerialNo 数据类型是 nvarchar

```
Try this

WHILE(@i<>@Quantity)
BEGIN
    set @BookSerialNo = @BookSerialNo +'-' + CONVERT(NVARCHAR(50),@i);
    ....
    SET @i = @i+1;
END 
```

# javascript - 如何将我的文本溢出转换为列？

> ID：15493067
> 
> 赞同：0
> 
> 时间：2013-03-19T06:42:31.340
> 
> 标签：javascript, html, css, multiple-columns, dynamic-columns

我需要强制我的文本溢出到设置的 div 高度内的新列中。

这就是它目前正在做的事情：http: [//i.imgur.com/huvk0si.png](http://i.imgur.com/huvk0si.png)

这就是我需要它做的。（这是在 Photoshop 中模拟的） [http://i.imgur.com/nCgCFGy.jpg](http://i.imgur.com/nCgCFGy.jpg)

这是html

```
<div class="data">
<div class="stackleft" id="p1_stack"></div>
<div class="stackright" id="p2_stack"></div>
</div> 
```

这是JavaScript

```
function drawStack(isFinal){
var stackLength = Oscore[currentPlayer].stack.length;
var temp = "";
var tot = 0;
for(var i=0;i<stackLength;i++){
    var val = Oscore[currentPlayer].stack[i];
    temp += val + "<br>";
    tot += val;
}
//if(!isFinal){
    //temp = '<div class="workingScore">'+scoreTemp+'</div><br>' + temp;
//}
var writeSore = document.form1.game.value - tot;
writeit(writeSore,currentPlayer + "_score");
writeit(temp,currentPlayer + "_stack");
} 
```

任何帮助将不胜感激提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:58:23.863

我认为您正在寻找：

1.  多列 CSS 布局 -[查看支持的浏览器](http://caniuse.com/#search=column)
2.  CSS Regions - 目前仍然是一个工作草案并且没有被广泛支持但是有一个[由 Adob​​e 创建的 polyfill](https://github.com/adobe-webplatform/css-regions-polyfill)

看起来您正在处理智能手机浏览器。因此，只要您不关心 IE，就可以在 Safari 和 Chrome 中支持这些功能

# javascript - 如何将此javascript代码转换为jquery？

> ID：15493073
> 
> 赞同：-1
> 
> 时间：2013-03-19T06:42:53.517
> 
> 标签：javascript, jquery

我有一个这样的javascript代码：

```
function share22() {
    if(!isOneChecked('choice')) {
        alert('Please select the file..');
        return false;
        }
       document.getElementById('share_popup').style.display="block";
       } 
```

我想将此对话框转换为简单的 jquery，以便我可以编辑标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:44:44.913

尝试这个

```
 function share22() {
      if(!isOneChecked('choice')) {
       alert('Please select the file..');
       return false;
      }
      $("#share_popup").css("display", "block");
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T06:47:07.513

考虑`if(!isOneChecked('choice')) {`检查复选框是否选中

```
 function share22() {
     if ($(".choice").is(":not(:checked)")){
       alert('Please select the file..');
       return false;
     }
     $('#share_popup').show();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T06:45:14.367

```
function share22() {
    if(!isOneChecked('choice')) {
        alert('Please select the file..');
        return false;
        }
       $('#share_popup').css("display","block");
       } 
```

# javascript - JQuery/JavaScript 在 IE7 中不起作用

> ID：15493084
> 
> 赞同：0
> 
> 时间：2013-03-19T06:43:22.063
> 
> 标签：javascript, jquery, asp.net-mvc-3

下面的脚本不在 IE7 中运行，但在 Chrome 和 Firefox 中运行。一旦用户点击更改密码，在 IE 中什么也不会发生。

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function () {
    $("#closebtn").click(function () {
        $("#dlg").hide('800', "swing", function () { $("#bkg").fadeOut("500"); });
    });

    $("#opn").click(function () {
        if (document.getElementById('bkg').style.visibility == 'hidden') {
            document.getElementById('bkg').style.visibility = '';
            $("#bkg").hide();
        }
        if (document.getElementById('dlg').style.visibility == 'hidden') {
            document.getElementById('dlg').style.visibility = '';
            $("#dlg").hide();
        }
        $("#bkg").fadeIn(500, "linear", function () { $("#dlg").show(800, "swing"); });
        return false;
    });

});
</script>

  <div id="Accountdisplay">
    @using (Html.BeginForm("Accountdetail", "Home", FormMethod.Get))
     {

     <table align="left" cellspacing="10" cellpadding="5">
     <tr><td class="editor-label" >
      User Name:
     </td><td>
      @Html.DisplayFor(model => model.UserName)
      </td></tr>
      <tr>
   <td class="editor-label">
   Email Id:
</td>
<td>
  @Html.DisplayFor(model => model.Email_Id)
  </td></tr>
  <tr>
   <td class="editor-label">
  Division:
   </td>
   <td>
   @Html.DisplayFor(model=>model.Division)
</td></tr>
<tr>
<td class="editor-label">
User Type:
</td>
<td>
@Html.DisplayFor(model=>model.User_Type)
</td></tr>
<tr><td>

<a href="#" id="opn" rel="nofollow">Change Password</a>

  @*<div >
   @Html.ActionLink("[Change Password]",null,"Home",new {id="opn",style =    
  "color:white"})
</div>*@
</td></tr>

</table>

}
</div>

<div class="blockbkg" id="bkg" style="visibility: hidden;">
<div class="cont" id="dlg" style="visibility: hidden;">
  <div class="closebtn" title="Close" id="closebtn"></div>
  @using (Html.BeginForm("Logon", "Home", FormMethod.Post))
  {
   <table>
   <tr>
   <td>
    @Html.LabelFor(model => model.Password) 
   </td>
    <td>@Html.TextBoxFor(model => model.UserName, new { Style =         
   "width:65%;height:25px;font-size:1.05em" }) </td>
   </tr>

   <tr>
   <td>
    @Html.LabelFor(model => model.Confirm_Password) 
   </td>
   <td>@Html.TextBoxFor(model => model.Confirm_Password, new { Style = "width:65%;height:25px;font-size:1.05em" }) </td>
   </tr>

   </table>   

  }
 </div>
 </div>

       my css:
          #Accountdisplay 
          {
       background-color:Gray;
         color:Black;
        width:50%;
         border:1px solid black;
        height:80%;
          padding: 20px;
           margin-left:200px;
          margin-top:10px;
            }
          .blockbkg {
           background-color: black;

          background-color: rgba(0,0,0,0.90);
          width: 100%;
          min-height: 100%;
           overflow: hidden;
  position: absolute;
  position: fixed;
  top: 0;
  left: 0;
  color: white;
}
.cont {
  background-color:Green;
  color:White;
  font-size: 16px;
  border: 1px solid gray;
  padding: 20px;
  display:block;
  position: absolute;
  top: 10%;
  left: 35%;

  width: 300px;
  height: 300px;

}
.closebtn 
  {
  width: 20px;
  height: 20px;
  padding: 5px;
  margin: 2px;
  float: right;
  top: 0;

  background-color:Gray;
  display: block;
   }

        .closebtn:hover 
        {
        cursor: pointer;
          } 
```

在这里，我也添加了我的 CSS。我仍然找不到为什么它在 IE 7 中不起作用，我应该更改 IE 版本并检查吗？？？？提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:01:56.237

抱歉...我无法添加评论...：/

jquery-script-tag 位于哪里？在头内还是在身体某处？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:13:06.100

我看不出究竟是什么问题，但是这段代码很奇怪，应该更改为完全使用 jQuery。

```
$("#opn").click(function () {
    /*
    if (document.getElementById('bkg').style.visibility == 'hidden') {
        document.getElementById('bkg').style.visibility = '';
        $("#bkg").hide();
    }
    if (document.getElementById('dlg').style.visibility == 'hidden') {
        document.getElementById('dlg').style.visibility = '';
        $("#dlg").hide();
    }
    */
    $("#bkg,#dlg").css("visibility", "").hide(); // does the same thing as above

    $("#bkg").fadeIn(500, "linear", function () { $("#dlg").show(800, "swing"); });
    return false;
}); 
```

另一方面，除非你真的需要`bgk`并且`dlg`在页面加载时有布局，但不可见，你应该改用`display:none;`它，它是用来切换元素可见性的东西（通过`hide`和也是）。`show``fadeOut``fadeIn`

# android - 如何在 Android 的 Fragment 中创建 TabWidget

> ID：15493087
> 
> 赞同：0
> 
> 时间：2013-03-19T06:43:27.987
> 
> 标签：android, android-fragments

![在此处输入图像描述](../Images/ccf6732020016fa7b86ab684fb000055.png)我需要在 Fragment 中创建一个 TabWidget。它应该看起来像所附图像中的那样。每个选项卡的内容应该在一个单独的片段中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:59:58.100

我想你只需要访问[developer.android](http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)

# mysql - 如何在 MySQL/iReport 中使用多列中的连接获得所需的输出？

> ID：15493093
> 
> 赞同：1
> 
> 时间：2013-03-19T06:43:39.263
> 
> 标签：mysql, jasper-reports, ireport

我在 MySQL 中执行了一个查询，例如 -

```
SELECT  
p.patient_id, p.name, pt.testresult, pt.reffby, t.testname , rf.refrange  
FROM patient AS p  
LEFT JOIN patienttest pt ON p.patient_id = pt.patient_id  
LEFT JOIN test t ON pt.testcode = t.testcode  
LEFT JOIN referencerange rf ON t.test_id = rf.test_id  
WHERE p.patient_id = 10  
AND pt.parent_id = 2 ; 
```

我得到了这样的结果 -

```
+------------+------------+------------+--------+-----------+---------------------+  
| patient_id | name       | testresult | reffby | testname  | refrange            |  
+------------+------------+------------+--------+-----------+---------------------+ 
|         10 | Rex Desuza | -ve        | self   | A:G RATIO | 15-20 for children  |
|         10 | Rex Desuza | -ve        | self   | A:G RATIO | 30-60 for adults    |
|         10 | Rex Desuza | -ve        | self   | A:G RATIO | 100 - 200 for women |
|         10 | Rex Desuza | -ve        | self   | ALBUMIN   | 20-30 for men       |
|         10 | Rex Desuza | -ve        | self   | ALBUMIN   | 30-60 for adults    |
|         10 | Rex Desuza | -ve        | self   | ALBUMIN   | 100 - 200 for women |
+------------+------------+------------+--------+-----------+---------------------+ 
```

但我不希望列中的重复值（列中的唯一值在我的报告中显示），即像这种格式 -

```
+------------+------------+------------+--------+-----------+---------------------+
| patient_id | name       | testresult | reffby | testname  | refrange            |
+------------+------------+------------+--------+-----------+---------------------+
|         10 | Rex Desuza | -ve        | self   | A:G RATIO | 15-20 for children  |
|            |            |            |        |           | 30-60 for adults    |
|            |            |            |        |           | 100 - 200 for women |
|            |            | -ve        |        | ALBUMIN   | 20-30 for men       |
|            |            |            |        |           | 30-60 for adults    |
|            |            |            |        |           | 100 - 200 for women |
+------------+------------+------------+--------+-----------+---------------------+ 
```

我必须以上述格式显示此结果。请告诉我该怎么做？

如果在服务器上不可能，那么请告诉我如何通过*iReport*实现这种格式？

如果我取消选中文本字段的复选框“打印重复值”属性，则不会为“ALBUMIN”测试显示测试结果“-ve”，因为它与“A:G Ratio”测试结果相同。而且我想显示两个测试的测试结果，即使它们相同。请简要介绍如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:51:59.857

在 Ireport 中，您可以很容易地做到这一点，您只需取消选中文本字段的“打印重复值”复选框属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:17:30.200

这是一个有点普遍的要求。[这篇文章](http://community.jaspersoft.com/questions/535420/suppress-repeated-columns)显示了非常相似的东西。

关键思想是这样的：

1.  创建一个群组`patient_id`
2.  在+上创建一个`result_and_name`在 iReport（而不是 SQL）中调用的组。`testresult``testname`
3.  不要显示任一组的页眉或页脚。
4.  时显示所有字段值`$V{patient_id_COUNT} == 1`。
5.  仅以`refrange`其他方式显示，除了：
6.  显示字段`testresult`、`testname`和`refrange`何时`$V{result_and_name_COUNT} == 1`

第 4、5 和 6 行是使用 Print When 表达式完成的。

警告：您的查询不显示排序，但需要排序才能使其有意义。

# java - Eclemma 说 4 个分支中的 1 个没有被覆盖，但它是哪个分支？

> ID：15493094
> 
> 赞同：26
> 
> 时间：2013-03-19T06:43:43.400
> 
> 标签：java, eclipse, code-coverage, eclemma

有没有一种简单的方法可以告诉我缺少哪个分支？即我有一些这样的代码：

```
if (x || y) {
    // do stuff
} 
```

在突出显示的报道中，Eclipse 中有一个黄点，上面写着：

> 错过了 4 个分支中的 1 个

但我想知道缺少哪个分支。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T06:55:14.523

可以`x`和`y`是什么？

*   `true || true` 为**真**（由于 JVM 优化而未涵盖：如果第一个条件为`true`，则由于短路评估而不会评估第二个条件）
*   `false || true`是**真的**
*   `true || false`是**真的**
*   `false || false`是**假的**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-05-11T10:02:35.830

有一个非常简单的解决方法 - 只需**将每个逻辑谓词放在单独的行上**，如下所示：

```
if (x 
    || y) {
    System.out.println("BRANCH: " + x + ", " + y);
    // Do stuff
} 
```

现在，当您运行分析时，标记应直接指向丢失的分支。添加覆盖率后，您可以以正确的方式重新格式化您的代码。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-05-11T16:50:51.827

Eclemma 的父母 jacoco 的 github 存储库上的[一个](http://eclemma.org/jacoco/)未[解决问题](https://github.com/jacoco/jacoco/issues/87)表明，这样的功能实际上有点难以包含。

但是，即使没有 Eclemma 功能，如果目标只是找出在特定情况下遗漏的分支，您也可以检测代码以进行跟踪。最简单的例子是老式的打印语句：

```
if (x || y) {
    System.out.println("BRANCH: " + x + ", " + y);
    // Do stuff
} 
```

然后查看输出并查看您实际点击了哪些分支（例如`java ... | grep "BRANCH:" | sort | uniq`）。（我知道，不是很令人满意。）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-12T04:05:43.647

答案是`true|| true`没有被覆盖。

这是因为一旦 JVM 发现第一个条件为真，它就不会运行第二个条件（已优化），这意味着这部分代码永远不会运行。

正如 Maroun 所说，4 个分支中有 3 个将允许条件通过。如果您仍然担心代码覆盖率，您可以将条件重构为 a`&&`而不是 a `||`。

`(x || y)`相同`(!(!x && !y))`，这将允许您测试所有条件，因为现在只有三个分支。

条件的原始形式经常出现在保护语句中：

```
if (obj == null || obj.hasError())
{
    throw new RuntimeException();
} 
```

这将永远不允许您检查`obj`is `null`AND 是否有错误，因为它会抛出空指针异常。

如果代码覆盖率很重要，那么只需使用这种形式：

```
if (!(obj != null && !obj.hasError()))
{
    throw new RuntimeException();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T08:02:55.230

块内的嵌套语句`if`或扩展您的`x`或`y`谓词的语句可能存在隐式分支。

阅读： [http ://emma.sourceforge.net/faq.html#q.fractional.examples](http://emma.sourceforge.net/faq.html#q.fractional.examples)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-15T16:17:30.393

以下表达式的结果是什么？

*   `true || true` 是**真的**
*   `true || false`是**真的**
*   `false || true`是**真的**
*   `false || false`是**假的**

如果您在第一种和第二种情况下注意到第一个参数为**TRUE**，则​​无需检查第二个参数。

*   `true && true` 是**真的**
*   `true && false`是**假的**
*   `false && true`是**假的**
*   `false && false`是**假的**

或者，如果您看到使用**AND**运算符的场景，如果第一个参数为**FALSE** ，则您永远不需要检查第二个参数。

因此，您永远无法检查 4 个分支中的 1 个分支。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-12-02T01:27:59.590

为了获得全面覆盖，避免编译器的隐式选择，您必须将 if 语句重写为两个

```
if (x) {
    // do stuff
} else if (y) {
    // do the same stuff
} 
```

这将得到全面覆盖，但会被正确标记为冗余代码。看到问题后，我宁愿忍受黄线，也不愿将这种混乱的结构添加到代码中。

# php - 使用 php api (keith palmer) 向 Quickbooks Online 添加发票

> ID：15493095
> 
> 赞同：1
> 
> 时间：2013-03-19T06:43:45.177
> 
> 标签：php, quickbooks, quickbooks-online

我正在尝试使用 keith palmer php api 通过我的应用程序向 quickbook 添加发票

我能够添加客户，列出发票并从中做很多事情..

但是当我尝试使用基本示例添加发票时，它不会被创建..

这是我的代码片段

```
 <?php

        $Invoice = new QuickBooks_IPP_Object_Invoice();
        $Header = new QuickBooks_IPP_Object_Header();

        $Header->setTxnDate('2013-03-20');
        $Header->setCustomerId('{QBO-2}');

        $Header->setTotalAmt(101);

        $Invoice->addHeader($Header);

        $Line = new QuickBooks_IPP_Object_Line();
        $Line->setDesc('Invoice desp comes here');
        $Line->setTaxable('false');
        $Line->setItemId('{QBO-2}');
        $Line->setAmount(101);

        $Invoice->addLine($Line);

        print_r($Invoice->asIDSXML());

        print_r('Request [' . $IPP->lastRequest() . ']');
        print_r("<br/><br/>");
        print_r('Response [' . $IPP->lastResponse() . ']');
        print_r("<br/><br/>");

?> 
```

print_r($Invoice->asIDSXML()) 给我看这个

```
<Invoice>
    <Header>
        <TxnDate>2013-03-20</TxnDate>
        <CustomerId idDomain="QBO">2</CustomerId>
        <TotalAmt>101.00</TotalAmt>
    </Header>
    <Line>
        <Desc>test input invoice descp comes here</Desc>
        <Amount>101</Amount>
        <Taxable>false</Taxable>
        <ItemId idDomain="QBO">2</ItemId>
    </Line>
</Invoice> 
```

print_r('Request [' . $IPP->lastRequest() . ']') 给我看这个

```
Request [GET https://qbo.intuit.com/qbo1/rest/user/v2/666328865?oauth_consumer_key=qyprdorhgMjAeQswpCnBBuFUt5NGlv&oauth_nonce=GCRwB&oauth_signature=FKjWjA8VSwtxKvn%2ByGb1LaYd7Kw%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1363757537&oauth_token=qyprdmoCHU437qAutsaqwMzki7izqqjl7cioaZO4uTxkykse&oauth_version=1.0 HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Content-Length: 0

] 
```

print_r('Response [' . $IPP->lastResponse() . ']') 告诉我这个

```
Response [HTTP/1.1 200 OK
Date: Wed, 20 Mar 2013 05:32:17 GMT
Server: Apache
Set-Cookie: qboeuid=10.129.32.5.1363757537351379; path=/; expires=Thu, 20-Mar-14 05:32:17 GMT; domain=.intuit.com
Cache-Control: private
Expires: Wed, 31 Dec 1969 16:00:00 PST
Set-Cookie: JSESSIONID=3BC45AC1AAA82F57D777FF1DAB2F9729.c1-pprdqboas30d; Path=/; Secure; HttpOnly
Content-Encoding: gzip
Content-Length: 290
Content-Type: application/xml;charset=UTF-8

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><qbo:QboUser xmlns="http://www.intuit.com/sb/cdm/v2" xmlns:qbp="http://www.intuit.com/sb/cdm/qbopayroll/v1" xmlns:qbo="http://www.intuit.com/sb/cdm/qbo"><qbo:LoginName>jeffery@netconnectweb.com</qbo:LoginName><qbo:Ticket>V1-48-Q0czg6etf4a8rhn9mxnc5a</qbo:Ticket><qbo:AgentId>666328880</qbo:AgentId><qbo:CurrentCompany><qbo:CompanyId>666328865</qbo:CompanyId><qbo:BaseURI>https://sg.qbo.intuit.com/qbo37</qbo:BaseURI></qbo:CurrentCompany></qbo:QboUser>] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:40:36.180

我的问题是我没有为此添加相应的服务对象以使其生效，下面给出的代码片段现在可以完美运行....

```
<?php

    $InvoiceService = new QuickBooks_IPP_Service_Invoice();
    $Invoice = new QuickBooks_IPP_Object_Invoice();
    $Header = new QuickBooks_IPP_Object_Header();

    $Header->setTxnDate('2013-03-20');
    $Header->setCustomerId('{QBO-2}');
    $Header->setTotalAmt(101);

    $Invoice->addHeader($Header);

    $Line = new QuickBooks_IPP_Object_Line();
    $Line->setDesc('Invoice desp comes here');
    $Line->setTaxable('false');
    $Line->setItemId('{QBO-2}');
    $Line->setAmount(101);

    $Invoice->addLine($Line);

    print_r($Invoice->asIDSXML());

    $resp = $InvoiceService->add($Context, $realmID, $Invoice);

    pr('New invoice is [' . $resp . ']' . "\n");

    print_r('Request [' . $IPP->lastRequest() . ']');
    print_r("<br/><br/>");
    print_r('Response [' . $IPP->lastResponse() . ']');
    print_r("<br/><br/>");

?> 
```

# c# - 迁移到 MVVMLight 后的 MEF ReflectionTypeLoadException

> ID：15493107
> 
> 赞同：0
> 
> 时间：2013-03-19T06:44:18.723
> 
> 标签：c#, mef, mvvm-light

我有一个使用 MEF 从库中获取类的应用程序。我定义了接口 ISapphirePlugin，两个库都有实现这个接口的类，它们应该在应用程序启动时加载。在我迁移到 MVVM Light 之前，一切正常，但由于 MVVM Light 库也在我的应用程序目录中，所以我的 MEF 代码失败了。所有库都与我的可执行文件位于同一文件夹中。

```
var catalog = new DirectoryCatalog(".");
var container = new CompositionContainer(catalog);
IEnumerable<ISapphirePlugin> modules = container.GetExportedValues<ISapphirePlugin>(); 
```

抛出一个 ReflectionTypeLoadException，加载器异常说：

> 无法加载文件或程序集“Microsoft.Practices.ServiceLocation，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。系统找不到指定的文件。":"Microsoft.Practices.ServiceLocation, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"}

有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:53:10.220

我认为 MVVMLight 现在需要 CommonServiceLocation nuget 包。这可能会有所帮助：[Microsoft.Practices.ServiceLocation 来自哪里？](https://stackoverflow.com/questions/3992072/where-does-microsoft-practices-servicelocation-come-from)

# c# - ASP.NET C# Sql 加入时间范围而不重复【asp.net清理】

> ID：15493112
> 
> 赞同：0
> 
> 时间：2013-03-19T06:44:35.247
> 
> 标签：c#, asp.net, sql, sql-server

我有以下两张表

**工商管理硕士**

```
+--------+----------+------------+--------------+------------------+------------+
|mbaId   |  Channel | Product    |  ProgDate    |   ProgStartTime  |ProgEndTime |
+--------+----------+ -----------+--------------+------------------+------------+
|12      |    AA    |     SS     |  01/04/2011  |    16:00:00      |  20:00:00  |
|13      |    AA    |     SS     |  01/04/2011  |    16:00:00      |  20:00:00  |
|14      |    AA    |     SS     |  01/04/2011  |    16:00:00      |  20:00:00  | 
|15      |    AA    |     SS     |  01/04/2011  |    17:00:00      |  18:00:00  |
+--------+----------+------------+--------------+------------------+------------+ 
```

**地图**

```
+----------+--------+---------------+-------------------+---------+----+
|mapId     |Channel | Product       |ProgDate           |  AdvTime|    |        
+----------+--------+---------------+-------------------+---------+----+    
|8         | AA     | SS            | 01/04/2011        | 19:35:14| 30 |
|9         | AA     | SS            | 01/04/2011        | 18:40:19| 27 |
|10        | AA     | SS            | 01/04/2011        | 19:36:58| 35 |
|11        | AA     | SS            | 01/04/2011        | 17:47:13| 28 |
+----------+--------+---------------+-------------------+---------+----+ 
```

**我需要以下输出**

```
+-----------+-------+-------+-------------+---------+--------------+-----------+-----+
| mapId     |Channel|Product| ProgDate    | AdvTime |ProgStartTime |ProgEndTime|mbaid| 
+-----------+-------+-------+-------------+---------+--------------+-----------+-----+
|  8        | AA    | SS    | 01/04/2011  | 19:35:14|16:00:00      | 20:00:00  |  12 |  
|  9        | AA    | SS    | 01/04/2011  | 18:40:19|16:00:00      | 20:00:00  |  13 | 
|  10       | AA    | SS    | 01/04/2011  | 19:36:58|16:00:00      | 20:00:00  |  14 | 
|  11       | AA    | SS    | 01/04/2011  | 17:47:13|16:00:00      | 17:00:00  |  15 | 
+-----------+-------+-------+-------------+---------+--------------+-----------+-----+ 
```

**我使用下面的代码**

```
select *
from MBA2 as mba
  inner join Map2 as map on(map.Channel=mba.Channel and map.Product=mba.Product)
    where(
    (MBA.ProgStartTime < MBA.ProgEndTime
      and MBA.ProgStartTime <=
        case when datediff(mi, MBA.ProgStartTime, MBA.ProgEndTime) <= 60
          then dateadd(mi, 5, Map.AdvTime)
          else Map.AdvTime
          end
      and MBA.ProgEndTime >=
        case when datediff(mi, MBA.ProgStartTime, MBA.ProgEndTime) <= 60
          then dateadd(mi, -5, Map.AdvTime)
          else Map.AdvTime
          end) or
    (MBA.ProgStartTime > MBA.ProgEndTime
      and (MBA.ProgStartTime <=
        case when 1440 - datediff(mi, MBA.ProgEndTime, MBA.ProgStartTime) <= 60
          then dateadd(mi, 5, Map.AdvTime)
          else Map.AdvTime
          end
      or MBA.ProgEndTime >=
        case when 1440 - datediff(mi, MBA.ProgEndTime, MBA.ProgStartTime) <= 60
          then dateadd(mi, -5, Map.AdvTime)
          else Map.AdvTime
          end)))
order by advtime asc 
```

但是我得到了重复值，即 19:35:14 的值与 12,13 和 14 的 16:00:00 到 20:00:00 的范围匹配。我需要 MAP 中的一个值匹配 MBA 中的一个值。

所以我使用下面的代码将数据添加到数据集中并在 MAPID 中查找重复项

```
if (repeatID.Contains(int.Parse(dr["mapID"].ToString())))
        {
            duplicateID.Add(int.Parse(dr["mapID"].ToString()));

        }

        else
        {
            DataRow dr1 = dt.NewRow();
            dr1[0] = int.Parse(dr["mapID"].ToString());

            dr1[10] = int.Parse(dr["mbaID"].ToString());

            dr1[1] = (dr["Channel"].ToString());

            dr1[2] = (dr["Product"].ToString());

            dr1[3] = (dr["ProgDate"].ToString());

            dr1[4] = (dr["AdvTime"].ToString());

            dr1[5] = (dr["Progstarttime"].ToString());

            dr1[6] = (dr["Progendtime"].ToString());

            dr1[7] = (dr["Channel"].ToString());

            dr1[8] = (dr["Product"].ToString());

            dr1[9] = (dr["ProgDate"].ToString());

            dt.Rows.Add(dr1);

        }

        repeatID.Add(int.Parse(dr["mapID"].ToString()));

       i = i + 1;
    }
    sCon.Close();
} 
```

并删除重复的 id 行。然后使用下面的查询来显示没有重复的数据并再次显示到数据表中。它返回数据表中没有重复的 mapid，但带有 MBAID Dulicates。

```
using (SqlConnection sCon = new SqlConnection(connec))
        {

            foreach (int id in duplicateID)
            {

                for (int i = 0; i < dt.Rows.Count; i++)
                {
                    DataRow ddr = dt.Rows[i];
                    if (ddr["mapID"].ToString() == id.ToString())
                        ddr.Delete();
                }

                sCon.Open();
                {
                    SqlCommand cmd = new SqlCommand(@"select Distinct top 1 mp.Id as mapid, mb.Id as mbaid, mp.Channel, mp.Product, mp.ProgDate, mp.AdvTime, mb.Channel,  mb.ProgStartTime,mb.ProgEndTime,mb.progdate, convert(time, dateadd(minute, datediff(minute, mb.progStartTime, mb.progEndTime), 0)) as timeDiff 
from MBA22 as mb
  inner join Map22 as mp on(mp.Channel=mb.Channel and mp.Product=mb.Product and mb.ProgDate=mp.ProgDate )
    where(
    (mb.ProgStartTime < mb.ProgEndTime
      and mb.ProgStartTime <=
        case when datediff(mi, mb.ProgStartTime, mb.ProgEndTime) <= 60
          then dateadd(mi, 5, mp.AdvTime)
          else mp.AdvTime
          end
      and mb.ProgEndTime >=
        case when datediff(mi, mb.ProgStartTime, mb.ProgEndTime) <= 60
          then dateadd(mi, -5, mp.AdvTime)
          else mp.AdvTime
          end) or
    (mb.ProgStartTime > mb.ProgEndTime
      and (mb.ProgStartTime <=
        case when 1440 - datediff(mi, mb.ProgEndTime, mb.ProgStartTime) <= 60
          then dateadd(mi, 5, mp.AdvTime)
          else mp.AdvTime
          end
      or mb.ProgEndTime >=
        case when 1440 - datediff(mi, mb.ProgEndTime, mb.ProgStartTime) <= 60
          then dateadd(mi, -5, mp.AdvTime)
          else mp.AdvTime
          end)))
and mp.Id = '" + id + "'  order by  timeDiff asc", sCon);
                    cmd.CommandTimeout = 0;
                    SqlDataReader dr = cmd.ExecuteReader(); 
```

请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:51:32.293

尝试此查询相应地工作，但有风险，因为根据您的需要 1 记录映射到另一个表，因此应正确维护序列，否则您将得到错误的记录

```
select 
    t2.mapId, 
    t1.Channel, 
    t1.Product, 
    t1.ProgDate, 
    t2.AdvTime,
    t1.ProgStartTime, 
    t1.ProgEndTime, 
    t1.mbaid
FROM 
    (select 
         ROW_NUMBER() OVER(order by mbaid) as rId, * 
    from 
         mba
    ) t1, 
    (select 
         ROW_NUMBER() OVER(order by mapid) as rId, * 
    from 
         map
    ) t2
WHERE 
    t1.rId = t2.rId;a 
```

[**小提琴**](http://sqlfiddle.com/#!6/ad925/6)

**[行号](http://msdn.microsoft.com/en-IN/library/ms186734.aspx)**

# ios - 具有图像视图和按钮的单元格被重用

> ID：15493116
> 
> 赞同：1
> 
> 时间：2013-03-19T06:44:45.870
> 
> 标签：ios, uitableview

我有一个包含许多单元格的表格视图。在第一个单元格中，我放置了一个`UIImageView`来保存图片，并在它旁边放置一个按钮，该按钮将打开一个 popOver。我的问题是：为什么尽管检查（cell == nil）而其他单元工作正常，但该单元仍被重用。

代码如下。

PS这只是以编程方式不使用情节提要和xib。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
                         {
  cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if (indexPath.section == 0)
    {

        if(indexPath.row==0)
        {

            if(self.imageView==nil)

           {            
           self.imageView  = [[UIImageView alloc] initWithFrame:CGRectMake(30, 2, 50, 40)];

            self.imageView.image = [UIImage imageNamed:@"user.png"];

            self.imageView.backgroundColor=[UIColor blackColor];

           }

            [cell.contentView addSubview:self.imageView];

             if(self.chooseImage==nil)
            {

            self.chooseImage = [[UIButton alloc]initWithFrame:CGRectMake(270, 10, 80, 30)];

            [self.chooseImage addTarget:self action:@selector(chooseImage:) forControlEvents:UIControlEventTouchUpInside];

            self.chooseImage.backgroundColor = [UIColor blackColor];

            [self.chooseImage setTitle:@"CHOOSE" forState:UIControlStateNormal];
            }

            [cell.contentView addSubview:self.chooseImage];

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:48:46.803

首先在代码中添加方法末尾`return cell;`并使用以下代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
     {
          cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        if(self.imageView==nil)

           {            
           self.imageView  = [[UIImageView alloc] initWithFrame:CGRectMake(30, 2, 50, 40)];

            self.imageView.image = [UIImage imageNamed:@"user.png"];

            self.imageView.backgroundColor=[UIColor blackColor];

           }
            [cell.contentView addSubview:self.imageView];
           if(self.chooseImage==nil)
            {

            self.chooseImage = [[UIButton alloc]initWithFrame:CGRectMake(270, 10, 80, 30)];

            [self.chooseImage addTarget:self action:@selector(chooseImage:) forControlEvents:UIControlEventTouchUpInside];

            self.chooseImage.backgroundColor = [UIColor blackColor];

            [self.chooseImage setTitle:@"CHOOSE" forState:UIControlStateNormal];
            }

            [cell.contentView addSubview:self.chooseImage];

    }

   return cell; // this line is not in your code so add this line.

} 
```

# java - 错误代码：1048

> ID：15493121
> 
> 赞同：0
> 
> 时间：2013-03-19T06:45:08.337
> 
> 标签：java, mysql

RandomID 不能为空：

我有一个生成随机数的函数 RandomGen .. ItkTInventory 是我使用主样本详细信息表单创建 CRUD 时创建的数据库 java 文件。在执行保存按钮操作时，我想将生成的随机数插入到 mysql 中的数据库中。

```
private void saveButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    RandomGen rand = new RandomGen();
    ItkTInventory inventory = new ItkTInventory();
    inventory.setSRandomID(rand.randomCode());
    try {
        entityManager.getTransaction().commit();
        entityManager.getTransaction().begin();
    } catch (RollbackException rex) {
        rex.printStackTrace();
        entityManager.getTransaction().begin();
        List<barcode.ItkTInventory> merged = new ArrayList<barcode.ItkTInventory>(list.size());
        for (barcode.ItkTInventory i : list) {
            merged.add(entityManager.merge(i));
        }
        list.clear();
        list.addAll(merged);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:47:37.993

发生此错误是因为您试图将空值插入非空字段。调试您的程序并确保 RandomID 值不为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:49:01.030

在这里，您尝试将声明为 not null 的 null 值放入数据库中。

`SOLUTION:`删除数据库中的非空值或不保存空值

# wso2 - WSO2ESB has Bug According to this Configuration

> ID：15493129
> 
> 赞同：0
> 
> 时间：2013-03-19T06:45:36.547
> 
> 标签：wso2, wso2esb, wso2carbon, wso2dss

i am using 4.6.0 WSO2ESB as per my configuration its working some scenarios but giving unkonow faults is it a fulfilled tool. i tried in many ways this below scenarios is i am passing wrong value which primary key dependant but WSO2 esb unable to handle this even i tried all the properties .if any one knows about WSO2 enough well help me i am struck past too many days about this small issue my insertion is working but if any primary key violation error is thier in WSO2DSS ESb unable to send it to fault sequence i added

```
 <property name="FORCE_ERROR_ON_SOAP_FAULT" value="true" scope="default" type="STRING"/> 
```

eventhough its giving like this error in EsB when dss is off mode its passing to fault sequence correctly my error is why it will occuerss

[201

```
3-03-19 12:01:27,099] ERROR - NativeWorkerPool Uncaught exception
org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxParsingException: Illegal processing instruction target ("xml"); xml (case insensitive) is reserved by the specs.
 at [row,col {unknown-source}]: [1,167]
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:296)
    at org.apache.axiom.om.impl.llom.OMDocumentImpl.buildNext(OMDocumentImpl.java:135)
    at org.apache.axiom.om.impl.llom.OMNodeImpl.getNextOMSibling(OMNodeImpl.java:122)
    at org.apache.axiom.om.impl.llom.OMElementImpl.getNextOMSibling(OMElementImpl.java:343)
    at org.apache.axiom.om.impl.traverse.OMChildrenIterator.getNextNode(OMChildrenIterator.java:36)
    at org.apache.axiom.om.impl.traverse.OMAbstractIterator.hasNext(OMAbstractIterator.java:58)
    at org.jaxen.util.DescendantAxisIterator.hasNext(DescendantAxisIterator.java:101)
    at org.jaxen.expr.DefaultStep.evaluate(DefaultStep.java:152)
    at org.jaxen.expr.DefaultLocationPath.evaluate(DefaultLocationPath.java:140)
    at org.jaxen.expr.DefaultAbsoluteLocationPath.evaluate(DefaultAbsoluteLocationPath.java:113)
    at org.jaxen.expr.DefaultXPathExpr.asList(DefaultXPathExpr.java:102)
    at org.jaxen.BaseXPath.selectNodesForContext(BaseXPath.java:674)
    at org.jaxen.BaseXPath.selectNodes(BaseXPath.java:213)
    at org.jaxen.BaseXPath.evaluate(BaseXPath.java:172)
    at org.apache.synapse.util.xpath.SynapseXPath.stringValueOf(SynapseXPath.java:297)
    at org.apache.synapse.mediators.builtin.PropertyMediator.getResultValue(PropertyMediator.java:299)
    at org.apache.synapse.mediators.builtin.PropertyMediator.mediate(PropertyMediator.java:95)
    at org.apache.synapse.mediators.AbstractListMediator.mediate(AbstractListMediator.java:71)
    at org.apache.synapse.mediators.base.SequenceMediator.mediate(SequenceMediator.java:114)
    at org.apache.synapse.core.axis2.Axis2SynapseEnvironment.injectMessage(Axis2SynapseEnvironment.java:223)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.handleMessage(SynapseCallbackReceiver.java:443)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.receive(SynapseCallbackReceiver.java:166)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:180)
    at org.apache.synapse.transport.passthru.ClientWorker.run(ClientWorker.java:217)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: com.ctc.wstx.exc.WstxParsingException: Illegal processing instruction target ("xml"); xml (case insensitive) is reserved by the specs.
 at [row,col {unknown-source}]: [1,167]
    at com.ctc.wstx.sr.StreamScanner.constructWfcException(StreamScanner.java:606)
    at com.ctc.wstx.sr.StreamScanner.throwParseError(StreamScanner.java:479)
    at com.ctc.wstx.sr.BasicStreamReader.readPIPrimary(BasicStreamReader.java:3903)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2037)
    at com.ctc.wstx.sr.BasicStreamReader.closeContentTree(BasicStreamReader.java:2886)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2629)
    at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1062)
    at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)
    at org.apache.axiom.util.stax.dialect.DisallowDoctypeDeclStreamReaderWrapper.next(DisallowDoctypeDeclStreamReaderWrapper.java:34)
    at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:681)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)
    ... 27 more
[2013-03-19 12:02:22,573]  INFO - CarbonAuthenticationUtil 'admin@carbon.super [-1234]' logged in at [2013-03-19 12:02:22,572+0530]
[2013-03-19 12:02:27,101]  WARN - SourceHandler Connection time out after request is read: 127.0.0.1:58904->127.0.0.1:828 
```

for my other configuartions like Proxy reff is

[https://stackoverflow.com/questions/15474647/how-we-can-resolve-this-issue-in-wso2esb-or-wso2dss](https://stackoverflow.com/questions/15474647/how-we-can-resolve-this-issue-in-wso2esb-or-wso2dss) [How can i handle this in Wso2ESB which is not passing Respone to Client](https://stackoverflow.com/questions/15471178/how-can-i-handle-this-in-wso2esb-which-is-not-passing-respone-to-client)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:06:12.150

I hope you are using DSS in this integration too. In your Data Service can you disable streaming and try again. to do so uncheck "enable streaming" at the Data Service configuration.

[http://docs.wso2.org/wiki/display/DSS301/RDBMS](http://docs.wso2.org/wiki/display/DSS301/RDBMS)

(refer 2nd image).

# spring-batch - 如何从 PreparedStatementSetter 的 setValues() 方法中获取字符串

> ID：15493140
> 
> 赞同：1
> 
> 时间：2013-03-19T06:46:16.247
> 
> 标签：spring-batch

我想从我的字符串的`setValues()`方法中获取一个字符串。我想将其用于. 有人可以帮助我实现这一目标。下面是我的课：`ItemPreparedStatementSetter``SQL``String``setSql()``ItemWriter``PreparedStatementSetter`

```
public class PreparedStatementSetter implements
    ItemPreparedStatementSetter<Object>{

public static final int INT = 4;
public static final int STRING = 12;

public void setValues(Object item, PreparedStatement ps)
        throws SQLException{

    @SuppressWarnings({ "rawtypes", "unchecked" })
    Map<String, Object> map = (LinkedHashMap) item;
    int i = 0;
    String columnType;
    String sql="";
    String final_sql;

    try {
        sql=generateSql();

    } catch (ParserConfigurationException e) {

        e.printStackTrace();
    } catch (SAXException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }

    int len=map.size();

    for(int k=0 ; k<len ; k++)
    {
        sql=sql+","+"?";
    }
    sql=sql+")";

    // i want to use this final_sql string in setsql() method of itemwriter

    final_sql=sql.replaceFirst("," , " ");

    for (Map.Entry<String, Object> entry : map.entrySet()) {

        i++;
        columnType = entry.getKey().substring(0,
                (entry.getKey().indexOf("_")));

        switch (Integer.parseInt(columnType)) {
            case INT: {
                    ps.setInt(i, (Integer) (entry.getValue()));
                    break;
            }
            case STRING: {
                    ps.setString(i, (String) (entry.getValue()));
                    break;
            }
        }
    }
}

private String generateSql()
throws ParserConfigurationException, SAXException, IOException
{       
    String sql="";
    Insert insert;
    String table="";
    try 
    {
        File is = new File("C:/Users/AMDecalog.Trainees/workspace/SpringJobExecuter/config/input1.xml");
        JAXBContext context = JAXBContext.newInstance(Insert.class);
        Unmarshaller unmarshaller = context.createUnmarshaller();
        insert = (Insert) unmarshaller.unmarshal(is);               
        Insert in = insert;
        List<String> into = in.getInto().getTablename();

        for(String s : into)
        {
            table = table+s;
            System.out.println(table);
        }

        sql = "insert into" + " " + table + " " + "values(";
        System.out.println(sql);
    } 
    catch (JAXBException e)
    {
        e.printStackTrace();
    }
    return sql;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T15:20:08.790

好的，您没有以正确的方式实现 PreparedStatementSetter。

您所要做的就是在 ItemWriter 配置或 itemWriter 实现中声明您的 SQL。

我假设您使用的是 JdbcBatchItemWriter：

```
public class MyItemWrtier extends  JdbcBatchItemWriter<MyDomainObj> implements InitializingBean{

@Override
public void afterPropertiesSet() throws Exception {
        // set the SQL

    String SQL= "UPDATE MYTABLE WHERE FIELD1 = ? AND FIELD2 = ?"

    super.setSql(SQL);

}
} 
```

现在，你的批处理配置应该像这样声明这个 writer。

```
 <bean id="myItemWriter" class="xxx.yyy.MyItemWriter">
    <property name="dataSource" ref="dataSourceIemt" />
    <property name="itemPreparedStatementSetter" ref="myPreparedStatementSetter" />
</bean> 
```

最后，

```
@Component("myPreparedStatementSetter")
public class MyPreparedStatementSetter implements ItemPreparedStatementSetter<MyDomainObj> {

public void setValues(MyDomainObj obj, PreparedStatement ps) throws SQLException {
    ps.setString(1, obj.getsometing());
    ps.setString(2, obj.getsometingElse());

}
} 
```

希望很清楚。

问候

# linq - DataTable.RowFilter 使用列表结果？

> ID：15493142
> 
> 赞同：0
> 
> 时间：2013-03-19T06:46:21.713
> 
> 标签：linq, datagridview, ado.net, datatable

我需要保留原始 DataTable 并根据列表值对其进行过滤。我试图隐藏与列表不匹配的行，但它不能立即工作。我不想将列表复制到另一个 dataTable 并将我的 dataGridView 绑定到，因为我与原始 DataTable 绑定的太多了。过滤仅适用于少数条件，但列表仅包含所需的值。有没有 LINQ 解决方案？请只使用 C#。这就是我得到我的清单的方式。还有另一个 dataGridView 包含我需要过滤的数据表的主键。它的键保存在一个组合框中。

```
DataTable MainTable = MainDataSet.Tables["MyTable"];

DataTable lookupTable = lookupDataSet.Tables["MyLookupTable"];

var List = (from x in lookupTable.AsEnumerable()
            where x.Field<string>("kAutoInc") == comboBox.SelectedValue.ToString()
            select x.Field<int>("Pct")).ToList();

var a = MainTable.AsEnumerable().Where(r =>
                  List .Any(id => id == r.Field<int>("Pct"))); 
```

这给了我 int 30、40、50、60 的值...

DataGridView 有一个匹配的列“Pct”，我需要过滤仅包含这些值的行。我知道这看起来很容易，但我似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:19:23.160

请改用 DataView。

```
dataview dv=new dataview(datatable);  
dv.filter=string.format("column1={0}","value1"); 
```

像那样。

# android - android：位置代码示例崩溃

> ID：15493145
> 
> 赞同：0
> 
> 时间：2013-03-19T06:46:31.443
> 
> 标签：android

我已经从 [https://code.google.com/p/android-protips-location/下载了位置的示例代码](https://code.google.com/p/android-protips-location/)

我试图运行它来查看，但它总是在应用程序启动后崩溃。我检查了清单，但没有发现任何问题。上面的示例代码有没有人遇到过类似的问题。

这是崩溃日志。

> 03-19 12:06:05.456: D/AndroidRuntime(9185): 关闭 VM 03-19 12:06:05.456: W/dalvikvm(9185): threadid=1: 线程退出未捕获异常 (group=0x414e62a0) 03 -19 12:06:05.503: E/AndroidRuntime(9185): 致命异常: main 03-19 12:06:05.503: E/AndroidRuntime(9185): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com.radioactiveyak .location_best_practices/com.radioactiveyak.location_best_practices.UI.PlaceActivity}：java.lang.ClassNotFoundException：com.radioactiveyak.location_best_practices.UI.PlaceActivity 03-19 12:06:05.503：E/AndroidRuntime(9185)：在 android.app。 ActivityThread.performLaunchActivity(ActivityThread.java:2021) 03-19 12:06:05.503: E/AndroidRuntime(9185): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122) 03-19 12:06:05.503:E/AndroidRuntime(9185): 在 android.app.ActivityThread.access$600(ActivityThread.java:140) 03-19 12:06:05.503: E/AndroidRuntime(9185): 在 android.app.ActivityThread$H.handleMessage( ActivityThread.java:1228) 03-19 12:06:05.503: E/AndroidRuntime(9185): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-19 12:06:05.503: E/AndroidRuntime( 9185): 在 android.os.Looper.loop(Looper.java:137) 03-19 12:06:05.503: E/AndroidRuntime(9185): 在 android.app.ActivityThread.main(ActivityThread.java:4895) 03 -19 12:06:05.503: E/AndroidRuntime(9185): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-19 12:06:05.503: E/AndroidRuntime(9185): 在 java.lang。 reflect.Method.invoke(Method.java:511) 03-19 12:06:05.503: E/AndroidRuntime(9185): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:994）03-19 12:06:05.503：E/AndroidRuntime（9185）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:761）03-19 12:06： 05.503: E/AndroidRuntime(9185): at dalvik.system.NativeStart.main(Native Method) 03-19 12:06:05.503: E/AndroidRuntime(9185): 引起：java.lang.ClassNotFoundException: com.radioactiveyak。 location_best_practices.UI.PlaceActivity 03-19 12:06:05.503: E/AndroidRuntime(9185): 在 dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61) 03-19 12:06:05.503: E/AndroidRuntime(9185) ): at java.lang.ClassLoader.loadClass(ClassLoader.java:501) 03-19 12:06:05.503: E/AndroidRuntime(9185): at java.lang.ClassLoader.loadClass(ClassLoader.java:461) 03- 19 12：06：05.503：E/AndroidRuntime（9185）：在 android.app.Instrumentation.newActivity（Instrumentation.java：1068) 03-19 12:06:05.503: E/AndroidRuntime(9185): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2012) 03-19 12:06:05.503: E/AndroidRuntime(9185):. .. 还有 11 个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:52:59.833

您是否尝试过项目 -> 清洁？您是否必须在位置清单中添加权限？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T11:36:57.953

我遇到过同样的问题。我通过以下方式解决了它：项目属性 - > Java构建路径 - >订单和导出选项卡然后我把复选标记放在“android-support-v4.jar”上

# ios - 将两个 UIImage 放在一个 UIScrollView 中

> ID：15493147
> 
> 赞同：0
> 
> 时间：2013-03-19T06:46:37.290
> 
> 标签：ios, uiscrollview, uiimage

我的任务是创建一个图像查看器，就像宜家的目录查看器一样。这完全超出了我的技能，但毕竟我必须尝试一下。我曾经能够像 iPhone 的 Photo App 一样使用 UIScrollView 创建照片查看器，但 IKEA 的目录应用程序要复杂得多，因为每个目录都有不同的部分（标题页、展开页、封底页）。我的照片查看器代码无法做到这一点，因为它只需要简单的 UIImages 数组。我必须将它们分成几个部分。

为了实现这一点，首先我必须寻找将两个 UIImage 放入一个 UIScrollView 的方法，以使这两个页面作为一个展开（两个相对页面）可缩放的 UIScrollView。而我们的“网络服务”只提供了一系列页面......
有没有办法实现这一点？我已经四处搜索，但所有这些都是关于“标记”两个 UIImage 的情况，而不是将它们并排作为一个 UIImage。我是否必须从两个 UIImage 创建一个 UIImage，然后将其放入 UIScrollView？

我知道这是一个相当简单和菜鸟的问题，但我真的不知道从哪里开始。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:49:51.217

如果要制作照片查看器，则必须参考[SDWebImage](https://github.com/rs/SDWebImage)。这将通过延迟加载缓存 UIIamge。使用它的示例代码。这会对你有很大帮助。

一切顺利 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:59:42.703

要将 UIImages 嵌套在 UIScrollView 中，您应该创建 2 个 UIImageViews，确定所需的框架尺寸，然后`[self.scrollView addSubview:myImageView];`为每个 UIImageView 调用。例如：

```
UIImage *image1 = [UIImage imageNamed:@"image1"];
UIImage *image2 = [UIImage imageNamed:@"image2"];

UIImageView *imageView1 = [[UIImageView alloc] initWithImage:image1];
// put your specific frame values here
imageView1.frame = CGRectMake(100.0f,100.0f,200.0f,200.0f);

UIImageView *imageView2 = [[UIImageView alloc] initWithImage:image2];
// put your specific frame values here
imageView2.frame = CGRectMake(300.0f,100.0f,200.0f,200.0f);

// This is a property tied to your scrollView, either created in code or in Interface Builder
[self.scrollView addSubview:imageView1];
[self.scrollView addSubview:imageView2]; 
```

# iphone - 本地通知问题

> ID：15493154
> 
> 赞同：0
> 
> 时间：2013-03-19T06:47:05.310
> 
> 标签：iphone, xcode, cocoa, uilocalnotification

流程完成后，我将发送本地通知，并且效果很好。

这是我的 didReceiveLocalNotification 代码：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification{

    CounterViewController *counterVC = [CounterViewController sharedInstance];
    [counterVC notificationArrived];
} 
```

但是当 iPhone 被锁定时，这些行不会被调用……我该怎么做才能让它们在后台运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:55:37.640

有两种接收本地通知的方法，一种是您已经实现，它在应用程序运行时调用，第二种是在应用程序运行时调用的 didFinishLaunchingWithOptions 中，您添加了一些代码来接收本地通知.....

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

// Override point for customization after application launch.

// Add the view controller's view to the window and display.

application.applicationIconBadgeNumber = 0;

// Handle launching from a notification
UILocalNotification *localNotif =
[launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
if (localNotif) {
    NSLog(@"Recieved Notification %@",localNotif);
}

return YES; 
```

}

# web-services - Cannot find Axis 1.4 for Download

> ID：15493160
> 
> 赞同：11
> 
> 时间：2013-03-19T06:47:15.873
> 
> 标签：web-services, axis

I was hoping to download Apache Axis from this location [http://www.apache.org/dyn/closer.cgi/ws/axis/1_4](http://www.apache.org/dyn/closer.cgi/ws/axis/1_4)

but it turns out that all the mirrors listed there show me

```
Not Found

The requested URL /mirror/ws/axis/1_4 was not found on this server. 
```

Is the library no longer available for download?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-19T06:47:15.873

Visit the backup site mirror. i.e [http://www.us.apache.org/dist/ws/](http://www.us.apache.org/dist/ws/)

and click on the "older releases" link i.e. [http://archive.apache.org/dist/ws](http://archive.apache.org/dist/ws) and browse to the axis/1.4 folder.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T06:59:24.160

The Following Link takes you to the download page for the apache axis 1.4 distribution
vist the link [http://archive.apache.org/dist/ws/axis/1_4/](http://archive.apache.org/dist/ws/axis/1_4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T18:06:45.990

For Downloading Axis 1.4 Final click on given link

[http://mirror.metrocast.net/apache/axis/axis/java/1.4/](http://mirror.metrocast.net/apache/axis/axis/java/1.4/)

# php - 为什么 forEachRow 函数不会影响 dhtmx 网格中的第二页或下一页？

> ID：15493163
> 
> 赞同：0
> 
> 时间：2013-03-19T06:47:20.427
> 
> 标签：php, javascript, ajax, dhtmlx

我厌倦了在加载自身时格式化网格行。我的目标是在加载具有某些条件的内容时将行设为 ro。它在第一页工作正常，但在网格的下一页不会发生。我的详细代码如下。有哪位知道原因的请分享给我。

```
 mygrid.loadXML("xml/get_data.php?juid=" + juid,function(){

      mygrid.forEachRow(function(id){

       if (mygrid.cellById(id,22).getValue()==1) 
          {
                mygrid.setRowTextStyle(id,"color: red");
                mygrid.setRowExcellType(id,"ro");
          }

      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:14:12.267

你需要这个事件：

```
mygrid.attachEvent("onPaging", function(count)
{
   someFunction();
});

function someFunction()
{
   mygrid.forEachRow(function(id){

      if (mygrid.cellById(id,22).getValue()==1) 
      {
            mygrid.setRowTextStyle(id,"color: red");
            mygrid.setRowExcellType(id,"ro");
      }

   });
} 
```

# android - 我们可以将 noHistory=true 应用于 android manifest 文件中的完整应用程序吗

> ID：15493172
> 
> 赞同：0
> 
> 时间：2013-03-19T06:48:01.237
> 
> 标签：android, android-activity, android-manifest

在我的应用程序中，我有 6 个页面，当用户单击后退按钮时，上一个屏幕不应该显示，（以前的活动不应该保存），所以我暂时写 `android:noHistory="true"`了，对于清单文件中的每个活动，因为有 6 个活动，我重复相同的命令 6 次。

但是我们可以`android:noHistory="true"`通过在标签处写入来应用到android清单文件中的完整应用程序`<application>`，这样我们就可以只编写一次命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:00:06.217

由于 noHistory 属性仅适用于活动标签，并且除了活动应用程序包含服务和广播接收器的注册之外，您不能在清单文件中的任何单个位置添加它以将所有活动引用到该值。

# ruby-on-rails - 如果第一次出现，Rails 元素

> ID：15493179
> 
> 赞同：1
> 
> 时间：2013-03-19T06:48:28.617
> 
> 标签：ruby-on-rails, ruby

我有一个带有 :mark, :text 的模型帖子

我的帖子有一个列表

```
<% @posts.each do |p| %>
  # todo
  <% if p.mark? %>
    <%= p.mark %> <%= sweet_thing(p.text) %>
  <% else %>
    <%= sweet_thing(p.text) %>
  <% end %>
<% end %> 
```

我需要显示 p.mark 名称而不是 #todo 哪里 p.mark 第一次出现。最终的txt示例：

奥迪

奥迪，文字-文字-文字-文字。

奥迪，文字-文字-文字-文字。

奥迪，文字-文字-文字-文字。

福特

福特，文字-文字-文字-文字。

福特，文字-文字-文字-文字。

福特，文字-文字-文字-文字。

福特，文字-文字-文字-文字。

更新

我的 txt 在控制器中渲染

```
 def txt_receiver
    @posts = Post.where("created_at >= ?", 7.days.ago.utc).find(:all, order: "mark, LOWER(post)")
    render "txt_for_newspapper", formats: ["text"]
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:54:22.413

一个明显的解决方案是跟踪看到的标记。

```
<% seen_marks = {} %>
<% @posts.each do |p| %>
  <% unless seen_marks[p.mark] %>
    <%= p.mark %>
    <% seen_marks[p.mark] = true %>
  <% end %>

  # rest of your code

<% end %> 
```

更好的解决方案（我认为）包括按标记对帖子进行分组，然后分组输出。但我不确定它是否符合你关于缺失标记的逻辑。

```
<% @posts.group_by(&:mark).each do |mark, posts| %>
  <%= mark %>

  <% posts.each do |p| %>
    <%= p.mark if mark %> <%= sweet_thing(p.text) %>
  <% end %>
<% end %> 
```

# java - 加密已经压缩的文件

> ID：15493183
> 
> 赞同：1
> 
> 时间：2013-03-19T06:48:41.670
> 
> 标签：java, encryption

有没有办法可以为已经压缩的文件生成密码？我想我很清楚该文件已经被压缩了。我想要的只是选择文件并使其受密码保护。

任何帮助将不胜感激。谢谢

# html - 在 HTML5 中创建流程图

> ID：15493185
> 
> 赞同：0
> 
> 时间：2013-03-19T06:48:47.253
> 
> 标签：html, html5-canvas

我想使用带有网格布局的 HTML5 创建流程图

详细信息： - 必须能够将 5 个元素拖动到工作表（事件、条件、动作、数据、结束） - 元素可以相互连接（从元素拖动线到元素） - 条件元素具有真/假连接器 - 元素必须对齐网格 - 必须可以调整元素大小并给它们命名 - 应该像 MS Visio 一样工作（易于学习）

我可以像上面提到的那样一步一步地完成。

目前我能够拖动对象。

现在下一步是我想连接这两个对象

它类似于图表布局。

悬停时如何显示每个对象的连接器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:10:22.867

要通过将线从一个对象拖到另一个对象来连接两个对象，请尝试此..

```
var X,Y,temp=0;//Global Varaibles

canvas.addEventListener('mousedown',function(evt){

X = evt.clientX;
Y = evt.clientY;
temp = 1;
},false);

canvas.addeventListener('mouseup',function(evt){
temp=0;
},false);

canvas.addEventListener('mousemove',function(evt){
if(temp == 1)
{
context.clearRect(0,0,canvas.width,canvas.height);
//re draw all the objects
context.beginPath();
context.strokeStyle = '#000000';
context.moveTo(X,Y);
context.lineTo(evt.clientX,evt.clientY);
context.stroke();
context.closePath();
}
},false); 
```

请参阅小提琴中的演示：[Jsfiddle Demo](http://jsfiddle.net/MrL7p/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:12:07.250

您让用户将 5 个元素拖到面板/画布上的方式，因此您应该让用户将连接器拖到面板/画布上的方式相同。

显而易见的选择是，一个垂直连接器和一个水平连接器，总共最多 7 个元素。5 个用于基本对象，2 个用于连接器。

您可能还需要一种允许用户设置垂直连接器的连接器高度的方法。

以及一种设置水平连接器宽度的方法。

如果一切顺利，那么您也可以添加对角线连接器，如果您选择这样做，则从西北到东南以及从东北到西南。

# jquery - 尝试在点击时切换动画

> ID：15493187
> 
> 赞同：1
> 
> 时间：2013-03-19T06:48:59.707
> 
> 标签：jquery

我试图在单击时展开一个框，一旦再次单击它，我想将其缩小回正常状态。这是我当前的代码。

```
$(".box").click(function() {
    $(this).toggle(function() {
        $(this).animate({
            width: "200px",
            height: "200px"
            }, "slow" );
        }, function () {
        $(this).animate({
            width: "50px",
            height: "50px"
            }, "slow" );
        });
}); 
```

原始大小为 50 像素，我希望它在 50 像素和 200 像素之间来回切换。使用此代码，当单击该框时，该框就会消失。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:59:31.417

那是因为您使用的是 jQuery 1.9+ 并且没有 jQuery[`.toggle()`](http://api.jquery.com/toggle-event/)事件方法，jQuery 使用[`.toggle()`](http://api.jquery.com/toggle/)显示效果方法并隐藏您的元素。`.toggle()`event 方法在 jQuery 1.7 中被弃用，并在 jQuery 1.9 中被删除。

```
$(".box").click(function() {
    var $this = $(this),
        val = $this.height() == 200 ? '50px' : '200px';
    $this.stop().animate({
        width: val,
        height: val
    }, "slow");
}); 
```

[http://jsfiddle.net/q9UMA/](http://jsfiddle.net/q9UMA/)

# java - @BeforeClass 与静态{}

> ID：15493189
> 
> 赞同：24
> 
> 时间：2013-03-19T06:49:02.080
> 
> 标签：java, junit

我正在使用 JUnit 编写一些测试用例。我需要初始化一些静态变量，这些变量将用于该类中的所有测试用例。

为此，我可以使用

1.  静态初始化程序块或
2.  静态方法`@BeforeClass`

使用一个比另一个有什么优势？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-02-20T12:36:32.830

`@BeforeClass`初始化程序或`static`初始化程序有非常不同的语义。

静态初始化程序由 JVM 调用，而不是由 JUnit 调用。如果在静态初始化程序中抛出异常，测试框架可能无法捕获和报告异常。此外，与方法相比，静态初始化程序的调用时间没有明确定义`@BeforeClass`。**每个类加载器**在第一次实际*使用*时仅运行一次，例如访问静态属性、静态方法或其构造函数之一。有时，可能很难弄清楚这将是什么时候。（如果你不使用继承：你可能有一天或某个同事会重构你的测试用例。如果不是今天，选择静态初始化器可能会在未来引入令人讨厌的错误。）

另一方面，`@BeforeClass`在每个类的测试运行之前运行。如果一个类要接受不同的测试，例如由于基于继承的测试，`static`初始化程序将只在使用这个类的第一个测试时运行。这意味着您使您的测试订单依赖于您永远不想要的东西。

请注意，这两个选项之间的语义差异大于使用`@Before`或测试构造函数之间的差异。作为最后一个论点，请考虑注释的文献价值。它使您的意图更具可读性。

此规则的唯一例外是不可变常量。这些应该在他们的声明中初始化，以保持您的代码简洁并尊重[编译时间常数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html)。但是，如果您的值是可变的，则根本不应该使用`static`值。同样，在测试中更改的可变值会为您的测试引入顺序依赖性，这是要避免的。

TL;DR：使用`@BeforeClass`！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T12:20:08.677

[在决定是否使用静态初始化块](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)或时，可以考虑以下几点[`@BeforeClass`](http://junit.org/javadoc/latest/org/junit/BeforeClass.html)：

1.  `@BeforeClass`是 的对手[`@AfterClass`](http://junit.org/javadoc/latest/org/junit/AfterClass.html)。因此，如果您进行需要稍后清理的初始化（例如打开外部资源），最好（从语义的角度）使用带注释的方法。
2.  如果您进行可能引发检查异常的复杂初始化，使用起来会更舒服`@BeforeClass`，因为您不必捕获并将其包装到未经检查的异常中。
3.  如果您想使用具有复杂初始化的[常量语义](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)( `private static final String VARIABLE`)，您将别无选择，只能使用静态初始化块或静态方法。

SO上有一个相关的帖子：[单元测试-在JUnit 4 Java中使用@BeforeClass和使用实例或静态变量有什么区别？](https://stackoverflow.com/questions/17060392/whats-the-difference-between-using-beforeclass-and-using-instance-or-static-va)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T06:51:34.250

如果两者兼而有之`static`，`final`那么您只有一个选择：静态初始化程序。

编译器将阻止您从方法内部写入最终字段，无论是否静态。

编辑：好的，你已经从你的问题中删除了“最终”这个词。在这种情况下，它几乎没有什么区别。静态初始化器将运行一次；@BeforeClass 方法也是如此。只需选择您认为更具可读性的一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T06:53:49.053

这不是完全相同的行为。 `@BeforeClass`每次运行测试时运行，静态初始化器仅在加载类时运行一次。如果您的测试运行程序使用相同的类加载器，那么在 的情况下`@BeforeClass`，您将重新运行静态变量的初始化。这取决于你想在这里实现什么。

# iphone - 在 UILabel 中添加这些符号

> ID：15493191
> 
> 赞同：0
> 
> 时间：2013-03-19T06:49:06.007
> 
> 标签：iphone, ios, objective-c, uilabel

我有一个`UILabel`通过解析为其分配文本的文本。其中的文本`UILabel`将采用`1234567890`格式，但我希望它为`(123) 456-7890` .

我该怎么做。有什么办法吗

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:57:32.487

```
 NSString *s = @"1234567890";
    NSMutableString *mu = [NSMutableString stringWithString:s];
    [mu insertString:@"(" atIndex:0];
    [mu insertString:@")" atIndex:4];
    [mu insertString:@" " atIndex:5];
    [mu insertString:@"-" atIndex:9];
     NSLog(@" s == %@ ", mu);
yourlable.text = mu; 
```

# java - 为什么要在 Java 中编写自定义异常类

> ID：15493192
> 
> 赞同：9
> 
> 时间：2013-03-19T06:49:09.693
> 
> 标签：java, oop, exception

编写自定义异常类的目的是什么，而大多数情况下它的作用是相同的。例如，[NullPointerException](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/NullPointerException.java)：

```
class NullPointerException extends RuntimeException {
      private static final long serialVersionUID = 5162710183389028792L;

      public NullPointerException() {
          super();
      }

      public NullPointerException(String s) {
          super(s);
      }
} 
```

这是我见过和创建的大多数异常类的基本模板。

我能想到的一个目的是处理这些异常。但是这不能基于异常消息吗？大多数情况下，我们为每种异常类型编写单个处理代码。我知道这有“例外”。

但是还有什么更多的吗？这不是在重复自己，只有类名发生变化吗？

还有任何 JDK 异常类有比这更多的代码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T06:52:43.977

我能想到几个原因：

*   拥有多个异常类允许程序员在他们的`catch`子句中具体化，并且只捕获他们关心的异常并知道如何处理。
*   异常类可以携带有关导致异常的错误的信息。例如，[`ArrayIndexOutOfBoundsException`](http://docs.oracle.com/javase/6/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)携带有问题的数组索引，SQL 异常往往携带特定于数据库的错误代码和消息。
*   异常规范——列出异常*类*——可用于在编译时检查正确性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T07:39:50.333

好吧，简单地说，如果你不需要特殊的异常类，你就不应该做一个。如果你这样做了，那么你就做一个。它真的没有魔法。

如果您正在创建一个库，那么您当然应该从使用该库的开发人员的角度考虑（即使只是您）：您的库是否出于特定原因抛出异常*以及*库用户是否可能想要特别抓住这些，因为他们可以切实地对此做一些事情（仅仅记录是不够的，IMO）。

标准异常类的示例：方法的调用者可能希望转换[`IndexOutOfBoundsException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IndexOutOfBoundsException.html)为`null`返回值，同时让其他异常正常传播。

如果您希望以默认方式处理自定义异常，请扩展正确的现有异常类，例如[`IOException`](http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html). 然后，当您想在那里做一些特定的事情时，您可以捕获您的特定 IO 异常，但*也*[`IOException`](http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html)可以在不需要特殊处理时像其他任何事情一样处理它（不能做任何有用的恢复）。

如果你有一个完全自定义的异常，它不应该被超类 catch 捕获，它总是应该有特定的 catch 块，那么你[`Exception`](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html)直接扩展。

我认为很少需要扩展[`RuntimeException`](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)，因为如果它意味着要被捕获的异常应该是[`Exception`](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html)子类，并且如果它是为了结束程序或只是生成日志输出，那么它应该被[`RuntimeException`](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)自定义消息字符串的默认实现所覆盖.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:14:11.660

您需要让您的客户端代码知道代码的哪一部分发生了确切的异常。所以你需要让异常语义和区别于其他代码块。

这个怎么做：

1.  定义新的异常类，所以类名告诉发生了什么
2.  定义一个统一的/通用的异常类，它包含`code`或`message`其他信息。罐头告诉你会发生`code`什么。

总而言之，做一些事情让你的异常有一些意义/语义，并让它的客户知道到底发生了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-10T17:33:12.163

1.  我们将可以自由地在我们的 Exception 类中添加更多方法来帮助客户，例如 rootCauseOfException()、description()、solution()、suggestions() 等。可以参考以下链接：
    [https ://stackoverflow.com/a /22698673](https://stackoverflow.com/a/22698673)

2.  如果您的项目具有相互依赖的模块，那么您也可以在相同的依赖层次结构中维护异常层次结构，这样如果您在基础层捕获单个异常，则将捕获所有相互依赖的模块异常。

3.  您还可以在发送到客户端之前屏蔽一些敏感数据，如 ip、端口等。如果不使用自定义异常，则某些敏感数据可能会泄露给 slient。

4.  您可以提供自己的异常消息，客户端可以轻松理解，而不是有时可能难以理解的 java 异常消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T06:51:47.840

基本上就是以不同的方式处理不同的异常。比如说，您可能希望对 ArrayIndexOutOfBoundsException 执行一些与 NumberFormatException 不同的操作。

或更清楚地

```
}catch (ArrayIndexOutOfBoundsException ex){
//operation 1
}catch (NumberFormatException ex){
//operation 2
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T06:53:36.757

主要目的是识别自定义/应用程序特定的错误。您还可以在那里提供一些其他方法。例如，我们有返回自定义消息的自定义异常，并且还从堆栈跟踪中提取原因和位置。

# r - 访问R中的矩阵

> ID：15493202
> 
> 赞同：0
> 
> 时间：2013-03-19T06:50:12.433
> 
> 标签：r, matrix

我在 R 中有一个矩阵，如下所示：

```
 YITEMREVENUE    XCARTADD XCARTUNIQADD XCARTADDTOTALRS
YITEMREVENUE         1.0000000000 -0.02630016 -0.01811156    0.0008988723      
XCARTADD            -0.0263001551  1.00000000   0.02955307   -0.0438881639   
XCARTUNIQADD        -0.0181115638  0.02955307   1.00000000    0.0917359285  
XCARTADDTOTALRS      0.0008988723 -0.04388816   0.09173593    1.0000000000 
```

我只想列出带有负值的列的名称。我的输出应该如下所示：

```
YITEMREVENUE -  XCARTADD XCARTUNIQADD  
XCARTADD     -  YITEMREVENUE XCARTADDTOTALRS  
XCARTUNIQADD -  YITEMREVENUE   
XCARTADDTOTALRS - XCARTADD 
```

在R中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:55:40.840

如果您的数据位于名为 的数据框中`m`，则可以使用以下内容：

```
lapply(m, function(v) {rownames(m)[v<0]}) 
```

如果您的数据位于名为 m 的矩阵中，则可以使用：

```
apply(m, 2,function(v) {rownames(m)[v<0]}) 
```

在这两种情况下，您都会得到这样的列表：

```
$YITEMREVENUE
[1] "XCARTADD"     "XCARTUNIQADD"

$XCARTADD
[1] "YITEMREVENUE"    "XCARTADDTOTALRS"

$XCARTUNIQADD
[1] "YITEMREVENUE"

$XCARTADDTOTALRS
[1] "XCARTADD" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:00:30.400

我首先将矩阵转换为 data.frame，在代码中这将是：

```
# Some example data
dat = matrix(runif(9) - 0.5, 3, 3)
dimnames(dat) = list(LETTERS[1:3], LETTERS[1:3])
> dat
           A          B           C
A  0.1216529  0.3501861  0.47473598
B -0.4720577  0.4887181 -0.41118597
C  0.4406510 -0.2516563  0.02344829

# Cast to data.frame
library(reshape)
df = melt(dat)
df
 X1 X2       value
1  A  A  0.12165293
2  B  A -0.47205771
3  C  A  0.44065104
4  A  B  0.35018605
5  B  B  0.48871810
6  C  B -0.25165634
7  A  C  0.47473598
8  B  C -0.41118597
9  C  C  0.02344829

# And find the combinations of row-columns which have < 0
df[df$value < 0, c("X1","X2")]
  X1 X2
2  B  A
6  C  B
8  B  C 
```

# php - PHP 有什么影响 - cgi.fix_pathinfo = 1 - 在 webserver (wp) 上的 php.ini 中

> ID：15493207
> 
> 赞同：5
> 
> 时间：2013-03-19T06:50:40.797
> 
> 标签：php, wordpress, ini

在我的服务器上，主机提供了一些替代的 PHP.ini 配置。

唯一具有扩展邮编（我需要）的描述为：

> zip_cgi.fix_pathinfo
> 
> 经验丰富的用户的高级设置：cgi.fix_pathinfo = 1 和 Extension Zip 已启用

我主要将该网站用于 wordpress ，但我想知道这可能产生的影响（或意义）是什么。

来自：[http ://www.php.net/manual/en/ini.core.php#ini.cgi.fix-pathinfo](http://www.php.net/manual/en/ini.core.php#ini.cgi.fix-pathinfo)

> 为 CGI 提供真正的 PATH_INFO/PATH_TRANSLATED 支持。PHP 以前的行为是将 PATH_TRANSLATED 设置为 SCRIPT_FILENAME，并且不了解 PATH_INFO 是什么。有关 PATH_INFO 的更多信息，请参阅 CGI 规范。将此设置为 1 将导致 PHP CGI 修复其路径以符合规范。设置为零会导致 PHP 像以前一样运行。默认情况下它是打开的。您应该修复您的脚本以使用 SCRIPT_FILENAME 而不是 PATH_TRANSLATED。

谷歌搜索只给我提供了模糊的结果，以及直接询问主机（呼叫中心的女孩不太了解，技术人员没有响应..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:41:10.467

似乎 ZIP 扩展期望 URL 作为 PATH_INFO 变量传递。PHP 的 CGI 和 FastCGI 实现没有可用的 PATH_INFO，因此当尝试传递 URI 时，PHP 会失败。一种解决方法是将 cgi.fix_pathinfo 设置为 true。

# javascript - 获取影响元素的所有类的列表，包括派生类

> ID：15493208
> 
> 赞同：1
> 
> 时间：2013-03-19T06:50:41.470
> 
> 标签：javascript, jquery

我想获取影响当前元素的所有样式表规则的列表。类似于萤火虫或原生检查元素所做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:14:44.860

Brothercake.com/site/resources/scripts/cssutilities

# iphone - 如何使我的 uitextfield 的某个区域不可编辑？

> ID：15493209
> 
> 赞同：0
> 
> 时间：2013-03-19T06:50:44.670
> 
> 标签：iphone, ios, objective-c, xcode, uitextfield

我在 uitextfield 顶部插入了一个图像。一个像您在大多数登录屏幕中看到的小图像。问题是用户可以在该区域输入。如何使该区域不可编辑。这样用户只能在之后输入那个图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:58:38.743

似乎该方法`- (CGRect)editingRectForBounds:(CGRect)bounds`是您正在寻找的[UITextField 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)：

> 您不应直接调用此方法。如果要为文本提供不同的编辑矩形，可以覆盖此方法并返回该矩形。默认情况下，此方法返回文本字段中未被任何覆盖视图占用的区域。

# css - 在网格过滤器字段名称将更改为斜体

> ID：15493212
> 
> 赞同：3
> 
> 时间：2013-03-19T06:51:04.600
> 
> 标签：css, kendo-grid, kendo-treeview

我有带复选框的剑道网格和树视图。在我的应用程序网格中，根据复选框选择进行过滤。我的要求是当我们选中树视图中的复选框时，然后过滤网格，过滤网格后过滤的列标题将更改为“斜体”。我的树视图代码是

```
 var tree = $("#treeview").kendoTreeView({
                  checkboxes: {
             checkChildren: true
              }, 

 dataSource: [{
     id: 1,
     text: "My Project",
     expanded: true,
     spriteCssClass: "rootfolder",
     items: [{
         id: 2,
         text: "OrderID",
         expanded: true,
         spriteCssClass: "folder",
         items: [{
             id: 3,
             text: "10248"
         }, {
             id: 4,
             text: "10249"
         }, {
             id: 5,
             text: "10250"
         }, {
             id: 6,
             text: "10251"
         }, {
             id: 7,
             text: "10252"
         }]
     }

     ]
 }]
      }).data("kendoTreeView"); 
```

我的小提琴是[http://jsfiddle.net/RHh67/79/](http://jsfiddle.net/RHh67/79/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:34:04.250

I worked a lot and have found one solution for your code,

with one line of CSS :)

```
.k-filterable a.k-grid-filter.k-state-active ~ .k-link{font-style:italic;} 
```

here is updated fiddle link: [http://jsfiddle.net/RHh67/81/](http://jsfiddle.net/RHh67/81/)

Enojy :)

Not sure of cross-browser compatibility, but works fine.

# spring - 不同应用服务器上的 DAO

> ID：15493214
> 
> 赞同：6
> 
> 时间：2013-03-19T06:51:09.280
> 
> 标签：spring, hibernate, spring-mvc, firewall

我正在开发一个基于 Spring MVC 和 Hibernate 的新应用程序来进行数据访问。我希望数据访问层在单独的应用程序服务器上运行，最好是 JBOSS。

我希望数据访问层在防火墙后面运行。

我怎样才能做到这一点？

现在我担心在这种情况下休眠延迟初始化。Hibernate 延迟初始化真的会有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:21:08.660

在 UI 中，使用`REST`Web 服务从应用程序服务器（托管 DAO 和事务服务）获取数据。用注释实体类**`@Proxy(lazy=false)`**以避免实体的延迟加载。对于服务器验证客户端（Web 应用程序查询防火墙后面的业务层），使用客户端身份证书，您可以使用`Bouncy Castle CMS`API 来验证身份、信任和消息完整性。如果您在网络中有 SSL 卸载程序，请在`http(s)`标头中使用分离的签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:46:58.973

这种方法可能会有一些性能损失 - IO 将成为瓶颈。但是，Spring Remoting 允许您轻松实现这一点。

*   为你的 DAO 创建一个接口。
*   落实具体落实。
*   使用spring remoting导出接口。
*   注入接口 - 从您的应用程序的角度来看，它只是实现接口的东西。它不关心调用是否被发送到远程服务器。

实现这一点的机制称为 DynamicProxies - Java SE 功能。DynamicProxies 允许您提供一个类，该类在运行时响应接口上的方法调用。在这种情况下，方法调用被分派到远程服务器上的相应方法。

服务层和 DAO 层服务器都应该位于同一域的防火墙后面。

# java - 如何在 GroupLayout Java 中设置 Jframe 背景图像

> ID：15493219
> 
> 赞同：2
> 
> 时间：2013-03-19T06:51:40.797
> 
> 标签：java, swing, jframe, grouplayout

我正在尝试为我的框架设置背景图像，但它不起作用。我试过这个链接：

[在 JFrame 中设置背景图像](https://stackoverflow.com/questions/1064977/setting-background-images-in-jframe)

编码：

```
setContentPane(new JLabel(new ImageIcon(ImageIO.read(new File("/Images/about.png"))))); 
```

我尝试将上面的代码添加到我的 Contentpane 但它不起作用。

```
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                MainMenu frame = new MainMenu();
                frame.setVisible(true);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public MainMenu() {
    setIconImage(Toolkit.getDefaultToolkit().getImage(MainMenu.class.getResource("/Images/bug-red.png")));
    setTitle("Automated Bug Fixing");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 712, 458);

            contentPane = new JPanel();

    //contentPane.setBackground(new Color(220, 220, 220));
    contentPane.setForeground(new Color(32, 178, 170));
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
            *setContentPane(new JLabel(new ImageIcon(ImageIO.read(new File("/Images/about.png")))));* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:03:28.263

基本概念看起来不错。

您遇到问题的唯一可能原因是图像不存在。

看起来您正在尝试引用应该存在于 Jar 上下文中的图像

代替

```
ImageIO.read(new File("/Images/about.png")) 
```

尝试

```
ImageIO.read(getClass().getResource("/Images/about.png")) 
```

反而。

另外，不要吞下异常，确保至少记录所有异常

![在此处输入图像描述](../Images/fe12d905505aee7be43b07c21dacd17c.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.HeadlessException;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class BackgroundFrameImage {

    public static void main(String[] args) {
        new BackgroundFrameImage();
    }

    public BackgroundFrameImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                try {
                    JLabel label = new JLabel(new ImageIcon(ImageIO.read(...))));

                    JFrame frame = new JFrame("Testing");
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setContentPane(label);
                    frame.setLayout(new BorderLayout());
                    JLabel text = new JLabel("Hello from the foreground");
                    text.setForeground(Color.WHITE);
                    text.setHorizontalAlignment(JLabel.CENTER);
                    frame.add(text);
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);
                } catch (IOException | HeadlessException exp) {
                    exp.printStackTrace();
                }
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:02:00.520

我知道问题可能出在

```
setContentPane(new JLabel(new ImageIcon(ImageIO.read(new File("/Images/about.png"))))); 
```

尝试删除文件路径中的前导斜杠，因为这可能会因操作系统而异：

```
setContentPane(new JLabel(new ImageIcon(ImageIO.read(new File("Images/about.png"))))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:03:09.590

将所有内容放在IPanel 上，并将IPanel 放在JFrame 上。根据需要进行调整以满足您的需求。

```
public class IPanel extends JPanel {
private static final long serialVersionUID = 1L;
private Image             imageOrg         = null;
private Image             image            = null;
{
    addComponentListener(new ComponentAdapter() {
        @Override
        public void componentResized(final ComponentEvent e) {
            final int w = IPanel.this.getWidth();
            final int h = IPanel.this.getHeight();
            image = w > 0 && h > 0 ? imageOrg.getScaledInstance(w, h, Image.SCALE_SMOOTH) : imageOrg;
            IPanel.this.repaint();
        }
    });
}

public IPanel(final Image i) {
    imageOrg = i;
    image = i;
}

@Override
public void paintComponent(final Graphics g) {
    super.paintComponent(g);
    if (image != null)
        g.drawImage(image, 0, 0, null);
}
} 
```

例子：

```
 final JPanel j = new IPanel(image);
    j.setLayout(new FlowLayout());
    j.add(new JButton("YoYo"));
    j.add(new JButton("MaMa"));
    j.add(new JLabel(icon)); 
```

产生：

![在此处输入图像描述](../Images/4c12056154817dc1d13dee14f77014eb.png)

# java - Apache solr 如何索引不同的文件

> ID：15493231
> 
> 赞同：0
> 
> 时间：2013-03-19T06:52:43.180
> 
> 标签：java, solr, lucene

我研究了 Apache lucene，发现在我们使用 field.store.Yes 或 store 字段存储字段之前，我们无法检索当前命中的特定字段。

现在在 Apache solr 中，我们只使用以下命令来发布数据以进行索引

java -Durl=http://"localhost":8080/solr/update -jar post.jar *.xml

现在我的问题是 solr 是否解析 xml 文件中的每个文件并存储它，或者它是否简单地索引整个文件而不存储。

经过一番搜索，我了解了 schema.xml，它指定是否存储字段。

现在我想知道如何为**桌面应用程序**做同样的事情，这样我就不需要为每一行指定 store.filed.yes。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:55:03.417

答案完全取决于 Solr schema.xml 的内容。Solr 将只存储该文件中定义的字段，并且该文件中的字段定义指定您引用的 Lucene 参数。如果一个字段没有在`<field/>`or`<dynamicField/>`元素中被调用，Solr 会记录一个错误；它根本不会存储或索引它。因此，您必须允许架构中的所有字段。

Solr 还可以在其其他配置文件中定义“更新请求处理器”以执行额外的数据预处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:39:48.997

根据您对@bmargulies 提供的答案的评论，对于桌面应用程序，您可以使用[EmbeddedSolr或直接使用](http://wiki.apache.org/solr/EmbeddedSolr)[Lucene](http://lucene.apache.org)管理您的索引。在两者之间，我会推荐 EmbeddedSolr，因为 Solr 是 Lucene 的最佳实践实现。

# java - 从 RAD 启动 websphere 服务器挂起在“服务器 server1 为电子商务打开”

> ID：15493233
> 
> 赞同：1
> 
> 时间：2013-03-19T06:52:46.927
> 
> 标签：java, websphere, rad

我最近设置了 RAD 并尝试*启动 websphere server*。

在日志中，它挂在以下行并在超时后终止：

```
Server server1 open for e-business 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:06:37.437

Thanks for the help.

In my case, I did following configuration which solved the issue and server started.

Double click on the server (in the servers tab). In **Server connection types and administrative ports** select **Automatically determine connection settings** and save the changes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:00:48.920

您的工作区[文件夹/名称可能是问题所在。](http://www-01.ibm.com/support/docview.wss?uid=swg21460336)

WAS 安装本身。当将其移至 C:\was8 时，一切都开始正常工作。默认将其放入 c:\Program Files... 并且挂在 23%

一个。请使用 websphere jre 替换 sun 热点 vm 来启动 eclipse，如下 eclipse.ini 中的设置

```
-vm
D:/IBM/WebSphere/AppServer/java/bin/javaw.exe 
```

湾。请确保 websphere 路径或 eclipse 工作空间中没有特殊字符（如 23%）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-19T10:02:00.643

将 jar com.ibm.ws.orb_8.5.0.jar 从 C:\IBM\WebSphere\AppServer\runtimes 复制到 C:\development\endorsed 并在 eclipse.ini 中仅添加 JVM 参数（在 -vmargs 下）-Djava。 endorsed.dirs=C:\development\endorsed

# spring - 使用 Spring Security 成功登录后如何正确更新登录日期时间？

> ID：15493237
> 
> 赞同：8
> 
> 时间：2013-03-19T06:52:53.050
> 
> 标签：spring, spring-mvc, spring-security

我正在使用 Spring 3.2.0 和相同版本的 Spring 安全性。成功登录后，用户将被重定向到受保护的页面之一，如下所示。

```
public final class LoginSuccessHandler implements AuthenticationSuccessHandler
{
    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException
    {
        Set<String> roles = AuthorityUtils.authorityListToSet(authentication.getAuthorities());
        if (roles.contains("ROLE_ADMIN"))
        {
            response.sendRedirect("admin_side/Home.htm");
            return;
        }
    }
} 
```

我正在使用休眠。如何在成功登录时更新数据库中的登录日期时间（上次登录）？我在登录页面上有一个提交按钮，其`POST`请求似乎没有映射到其相应登录控制器中的方法。登录表单的操作实际上映射到 Servlet - `j_spring_security_check`。

* * *

整个`spring-security.xml`文件如下，如果需要的话。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/Login.htm*" security="none"></http>    

    <http auto-config='true'>
    <!--<remember-me key="myAppKey"/>-->
        <session-management session-fixation-protection="newSession">
            <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
        </session-management>

        <intercept-url pattern="/admin_side/**" access="ROLE_ADMIN" requires-channel="any"/>
        <form-login login-page="/" default-target-url="/admin_side/Home.htm" authentication-failure-url="/LoginFailed.htm" authentication-success-handler-ref="loginSuccessHandler"/>
        <logout logout-success-url="/Login.htm" invalidate-session="true" delete-cookies="JSESSIONID"/>
    </http>

    <authentication-manager>
       <authentication-provider>
            <jdbc-user-service data-source-ref="dataSource"
               users-by-username-query="select email_id, password, enabled from user_table where lower(email_id)=lower(?)"
               authorities-by-username-query="select ut.email_id, ur.authority from user_table ut, user_roles ur where ut.user_id=ur.user_id and lower(ut.email_id)=lower(?)"/>
       </authentication-provider>
    </authentication-manager>

    <beans:bean id="loginSuccessHandler" class="loginsuccesshandler.LoginSuccessHandler"/>

    <global-method-security>
        <protect-pointcut expression="execution(* dao.*.*(..))" access="ROLE_ADMIN"/>
    </global-method-security>

    <!--<global-method-security secured-annotations="enabled" />-->
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-19T07:10:06.843

另一种方法是为[`AuthenticationSuccessEvent`](http://static.springsource.org/spring-security/site/docs/3.2.x/apidocs/org/springframework/security/authentication/event/AuthenticationSuccessEvent.html).

```
 @Service
    public class UserService implements
                             ApplicationListener<AuthenticationSuccessEvent> {

        @Override
        public void onApplicationEvent(AuthenticationSuccessEvent event) {
           String userName = ((UserDetails) event.getAuthentication().
                                                  getPrincipal()).getUsername();
           User user = this.userDao.findByLogin(userName);
           user.setLastLoginDate(new Date());
        }
   } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T09:51:42.603

为什么不直接在身份验证成功处理程序中执行此操作？

```
public final class LoginSuccessHandler implements AuthenticationSuccessHandler
{
    @Autowired
    private UserService userService;

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException
    {
        String userName = authentication.getPrincipal().getName();
        this.userService.updateLastLoginDateForUserByName(userName);

        Set<String> roles = AuthorityUtils.authorityListToSet(authentication.getAuthorities());
        if (roles.contains("ROLE_ADMIN"))
        {
            response.sendRedirect("admin_side/Home.htm");
            return;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T15:44:28.277

您还可以子类化 spring`AuthenticationProvider`接口并将其注入到`<authentication-manager />`元素中。

课程将类似于

```
public class AuthenticationProvider extends DaoAuthenticationProvider {

    // inject whatever tou want

    @Override
    public Authentication authenticate(Authentication authentication)
                throws AuthenticationException {
            return super.authenticate(authentication);

            // do what ever you want here
    }

} 
```

（假设您正在使用`DaoAuthenticationProvider`）

然后你只需要注册bean

```
<bean class="x.y.z.AuthenticationProvider" id="myAuthProvider" scope="singleton" />
<authentication-manager>
   <authentication-provider ref="myAuthProvider">
        <jdbc-user-service data-source-ref="dataSource"
           users-by-username-query="select email_id, password, enabled from user_table where lower(email_id)=lower(?)"
           authorities-by-username-query="select ut.email_id, ur.authority from user_table ut, user_roles ur where ut.user_id=ur.user_id and lower(ut.email_id)=lower(?)"/>
   </authentication-provider>
</authentication-manager> 
```

（不要相信代码的正确性，我是即时写的。它只是为了展示我的想法。）

斯特凡诺

# c# - C# 执行 Powershell

> ID：15493242
> 
> 赞同：0
> 
> 时间：2013-03-19T06:53:01.833
> 
> 标签：c#, powershell

所以不久前我写了一个 Powershell 脚本，它可以解析 IIS 日志，然后做一些事情（电子邮件、创建报告和其他漂亮的事情）。好吧，我正在努力从 C# 控制台应用程序中执行它。在我发布我的代码之前，我只想澄清一件事，我想尽量远离日志解析器来解析这个日志原因有很多原因，但特别是一个，当你可以根据自己的喜好编写其他东西时，为什么还要使用它； ）。所以这是我的代码

PS脚本：

```
 $t1 =(get-date).AddMinutes(-10)
    $t2 =$t1.ToUniversalTime().ToString("HH:mm:ss")
    $IISLogPath = "C:\inetpub\logs\LogFiles\W3SVC1\"+"u_ex"+(get-date).AddDays(-3).ToString("yyMMdd")+".log" 
    $IISLogFileRaw = [System.IO.File]::ReadAllLines($IISLogPath) 
    $headers = $IISLogFileRaw[3].split(" ") 
    $headers = $headers | where {$_ -ne "#Fields:"} 
    $IISLogFileCSV = Import-Csv -Delimiter " " -Header $headers -Path $IISLogPath 
    $IISLogFileCSV = $IISLogFileCSV | where {$_.date -notlike "#*"} 
    $tape = $IISLogFileCSV | Format-Table time,s-ip,cs-uri-stem |  Out-Host 
```

到目前为止的 C# 应用程序：

```
 Runspace runSpace = RunspaceFactory.CreateRunspace();
        runSpace.Open();
        Pipeline pipeline = runSpace.CreatePipeline();
        pipeline.Commands.AddScript(@"D:\PS-Scripts\IIS\IISLogScan.ps1");
        Collection<PSObject> results = pipeline.Invoke();
        foreach (PSObject obj in results)
        {
            Console.WriteLine(results);

        }
        Console.ReadLine(); 
```

现在，当我运行我的应用程序时，它只是坐着，不显示任何东西，我设置了断点，它说我的 foreach 中没有任何东西可以显示，我完全挂断了，因为运行我的 ps1 脚本它运行良好并显示了很多行。任何人都可以提供的任何见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:10:33.777

尝试更改 .ps1 文件：

```
$global:tape =$IISLogFileCSV | Format-Table time,s-ip,cs-uri-stem 
```

并在 C# 中

```
pipeline.Commands.AddScript(@"D:\PS-Scripts\IIS\IISLogScan.ps1");
pipeline.Commands.AddScript("$tape");
pipeline.Commands.AddScript("out-string"); 
```

或在 .ps1 中：

```
$tape =$IISLogFileCSV | Format-Table time,s-ip,cs-uri-stem
$tape 
```

并在 C# 中

```
pipeline.Commands.AddScript(@"D:\PS-Scripts\IIS\IISLogScan.ps1");
pipeline.Commands.AddScript("out-string"); 
```

# android - 过滤器菜单的项目根据变量的值而变化

> ID：15493251
> 
> 赞同：0
> 
> 时间：2013-03-19T06:53:43.587
> 
> 标签：android, android-intent, android-actionbar, android-spinner, android-menu

我正在开发一个应用程序，其目的是根据单击的按钮在列表视图中显示数据库中的一些内容。它是这样工作的：我有一个带有 9 个不同按钮的主要活动（例如：“餐厅”“快餐”“咖啡店”等），每次用户单击其中一个按钮时，它都会打开一个相同的活动（称为ResultListViewActivity），但每次都有不同的内容（餐馆列表、快餐等）。
因此，只有一个活动可以显示内容，但列表视图本身的内容会根据单击的按钮而有所不同。

现在这可行，我想在我的 ResultListViewActivity 中添加一个过滤器菜单，以为用户添加更多选项。问题是，这个菜单应该根据点击的按钮而有所不同。例如，如果用户在 Main Activity 中单击“Restaurants”，它应该打开 ResultListViewActivity，其中包含“亚洲美食”、“法国美食”等项目的菜单，但如果他单击咖啡店，它将是“茶馆”“咖啡厅”等，每个项目都有特定的方法。

这是我组织此代码的想法：
![在此处输入图像描述](../Images/579b43910618b27449d56f5a0f4f38d5.png)

这个想法是有一个名为 myVariable 的变量，在单击按钮时设置其值（例如：单击 button1，myVariable=1），将此变量发送到我的 ResultListViewActivity，然后用“if”语句编写 9 个情况。
在每种情况下，我都会将项目添加到我的菜单中并定义这些项目应该做什么。

我的问题是：我认为这应该可行，但我也知道可能需要做一些更直接或更轻松的事情来避免编写 9 种情况。我愿意按照上面解释的方式编写我的代码，但我担心我的 android 初学者水平让我无法知道一些更有效的方法。

ps：要访问项目，我可能会使用我的操作栏或微调器中名为“过滤器”的子菜单，如果它不可能的话（我的屏幕底部已经有一个操作栏，不确定我是否可以打开另一个操作栏最佳）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:16:19.443

您可以创建 9 种不同的菜单并将其中一种添加到 myVariable 中。说 myVariable 是一个整数

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    switch (myVariable)
    {
        case 1: 
            getMenuInflater().inflate(R.menu.activity_restaurant, menu);
            break;

        case 2:
            ........

        .....
    }

    return super.onCreateOptionsMenu(menu);
} 
```

# web-services - 错误运行服务器辅助网络场框架 2.2

> ID：15493255
> 
> 赞同：1
> 
> 时间：2013-03-19T06:53:58.963
> 
> 标签：web-services, web-farm, web-farm-framework

它的错误信息：

```
Failed to run operation 'ProvisionPlatform'.  Failed to run method 'Microsoft.Web.Farm.GetInstalledProductsRemoteMethod' on server '10.10.10.155'.  Exception in response stream.  InternetOpenUrl returned 0x80072EE7: Unknown error 12007\.  Exception in response stream.  InternetOpenUrl returned 0x80072EE7: Unknown error 12007.

Failed to run operation 'Repair'.  Failed to run method 'Microsoft.Web.Farm.GetInstalledProductsRemoteMethod' on server '10.10.10.155'.  Exception in response stream.  InternetOpenUrl returned 0x80072EE7: Unknown error 12007\.  Exception in response stream.  InternetOpenUrl returned 0x80072EE7: Unknown error 12007.

Server marked 'Unhealthy' due to failure to run operation 'Repair' 
```

这张图片我的服务器：

[http://www.upanh.com/slider/?e=malihu&s=upload&start=cvs73j6y6ez](http://www.upanh.com/slider/?e=malihu&s=upload&start=cvs73j6y6ez)

帮我 ！！！！！！！

# android - 如何在 Eclipse 中使用 Maven 调试 Android 系统应用程序

> ID：15493259
> 
> 赞同：0
> 
> 时间：2013-03-19T06:54:15.020
> 
> 标签：android, eclipse, debugging, maven

我正在为 android 设备创建一些系统应用程序。我正在使用 maven 构建系统应用程序并将其推送到`/system/app/`并验证该应用程序。但是我无法通过 eclipse 调试系统应用程序，因为我正在使用 maven 构建它并手动推送。有没有办法通过eclipse创建系统应用程序并调试应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:59:42.723

[Eclipse 的 Maven 集成](http://maven.apache.org/eclipse-plugin.html)

# fortran - 双精度的数量级

> ID：15493263
> 
> 赞同：2
> 
> 时间：2013-03-19T06:54:27.797
> 
> 标签：fortran, double-precision

对于两个理论上相等的双精度数之间的减法，我应该期望什么数量级的差异？

我有两个双精度数组。预计它们在理论上是相同的。它们都是通过两种完全不同的方法计算的，因此它们之间存在一些数值差异。我逐个元素地检查了它们，我的最大差异是 6.5557799910909154E-008。我的老板说，对于双精度来说，这是一个非常大的差异，但我认为如果差异是 E-008 的数量级，那就可以了。

谢谢你，普拉迪普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:15:20.247

[双精度浮点](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)具有以下格式

*   符号位：1位
*   指数宽度：11 位
*   有效位精度：53 位（显式存储 52 位）

> 这给出了 15 - 17 位有效十进制数字的精度。如果将最多 15 位有效小数的十进制字符串转换为 IEEE 754 双精度，然后再转换回相同的有效小数位数，则最终字符串应与原始字符串匹配；如果 IEEE 754 双精度转换为具有至少 17 位有效小数的十进制字符串，然后再转换回双精度，则最终数字必须与原始数字匹配。

[单精度浮点](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)具有以下格式

*   符号位：1位
*   指数宽度：8位
*   有效精度：24（23 显式存储）

> 这给出了 6 到 9 位有效小数位的精度（如果将具有最多 6 个有效小数位的十进制字符串转换为 IEEE 754 单精度，然后转换回相同的有效小数位数，则最终字符串应与原始字符串匹配；和如果将 IEEE 754 单精度转换为具有至少 9 位有效小数的十进制字符串，然后再转换回单精度，则最终数字必须与原始数字匹配。

您遇到的最大差异表明精度损失类似于转换为单精度。

你知道这两种方法哪个更准确吗？主要区别是计算速度和精度之间的权衡，还是其中一种算法在数值上不太稳定？输入的精度是多少？如果您的输入不是那么精确，则 8 位小数的精度差异可能无关紧要……或者这可能意味着在行星轨道上丢失了火星。

# image-processing - 用于检测颜色的图像识别库

> ID：15493268
> 
> 赞同：0
> 
> 时间：2013-03-19T06:54:47.670
> 
> 标签：image-processing

我正在寻找一个可以帮助提取头发颜色、肤色、上衣颜色、牛仔裤等内容的库。有什么建议吗？理想情况下是 Java Lib。所以本质上，给定一个图像，输出上述颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:10:36.597

有[ImageJ](http://rsbweb.nih.gov/ij/)，它号称是

```
world's fastest pure Java image processing program 
```

它可以用作另一个应用程序中的库。它的架构并不出色，但它可以完成基本的图像处理任务。

另一个不错的选择： http: [//marvinproject.sourceforge.net/en/index.html](http://marvinproject.sourceforge.net/en/index.html)

# phpstorm - 在 phpStorm 6.0 中添加外部项目目录以保持工作区文件与代码分离？

> ID：15493271
> 
> 赞同：5
> 
> 时间：2013-03-19T06:54:55.377
> 
> 标签：phpstorm

我试图在我的 php 项目中保留单独的工作区目录和代码目录，并努力理解/找到如何实现这一点。几次修改后，我尝试了 phpStorm，发现它没有提供这样的功能。

我只是想知道 phpstorm 6.0 是否有这个功能还是缺少它？如果可能，请帮助我。

**解决问题**

File > Settings >[Directories] +[Add Content Root] 添加外部目录

假设您已经创建了与代码分开的项目。某些工具可能无法按预期工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T20:40:57.997

这适用于使用 sshfs 的 linux，对 windows 用户感到抱歉。

我已经在我的电脑
**/mnt/remote_code/code/**

中创建了这个文件夹结构，我 必须像这样从服务器挂载代码
**sshfs user@server:/var/www/server_code/ /mnt/remote_code/code/**

来自服务器的代码将挂载在**代码**文件夹中
在 PS 我打开这个目录：**/mnt/remote_code/**

因此，这意味着 PS 将创建此文件夹**/mnt/remote_code/.idea**（索引并保存所有项目和 ide 设置），并保持**代码**文件夹（其中包含远程代码）不变。

希望对您有所帮助。
问候。

# java - Java 轮询网络连接

> ID：15493272
> 
> 赞同：4
> 
> 时间：2013-03-19T06:54:59.010
> 
> 标签：java, polling, serversocket

我正在用 Java 编写一个程序，我在一个线程上打开了 256 个网络连接。每当套接字上有任何数据时，我都应该读取它并进行处理。目前，我正在使用以下方法：

```
while true
do
   iterate over all network connections
   do
         if non-blocking read on socket says there is data
         then
               read data
               process it
         endif
   done
   sleep for 10 milli-seconds
done 
```

有没有更好的方法在 Java 上做同样的事情？我知道 C/C++ 中有一个 poll 方法。但是在谷歌搜索之后，我没有得到关于 Java 轮询的具体想法。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:22:59.797

[java.nio](http://docs.oracle.com/javase/7/docs/api/java/nio/package-summary.html)包听起来很适合您想要做的事情。它提供了执行异步 IO 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:30:52.647

看看[http://netty.io/](http://netty.io/)（这是一个在 java 上构建网络应用程序的非阻塞框架）。 [https://community.jboss.org/wiki/NettyExampleOfPingPongUsingObject](https://community.jboss.org/wiki/NettyExampleOfPingPongUsingObject) - netty 上的“你好世界”。

# android - 手机找不到 Sensor.TYPE_LINEAR_ACCELERATION 的传感器

> ID：15493273
> 
> 赞同：1
> 
> 时间：2013-03-19T06:55:01.200
> 
> 标签：android, accelerometer, android-sensors

我正在尝试在我的 android 应用程序上使用线性加速度融合传感器。但是，它找不到 Sensor.TYPE_LINEAR_ACCELERATION 的传感器。

我执行这些调用：

```
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
mLinearAcceleration = mSensorManager.getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION); 
```

在上面之后，定义了 mAccelerometer，但 mLinearAcceleration 为空。我知道 TYPE_LINEAR_ACCELERATION 直到 API 级别 9 才添加，但我认为我至少在 API 级别 9 中运行。这是我的清单文件的片段：

```
<uses-sdk
android:minSdkVersion="9"
android:targetSdkVersion="17" /> 
```

所以我相信我在正确的 API 级别下工作。

但是，当我尝试列出所有可用的传感器时，我没有找到所有应该可用于此 API 级别的传感器。

当我打电话...

```
List<Sensor> l = mSensorManager.getSensorList(Sensor.TYPE_ALL);
for(Sensor s : l)
    System.out.println(s.getName()); 
```

我明白了

```
Goldfish 3-axis Accelerometer
Goldfish 3-axis Magnetic field sensor
Goldfish Orientation sensor
Goldfish Temperature sensor
Goldfish Proximity sensor 
```

这些都不是线性加速度，一个是方向，一个不推荐使用的传感器。看来我的传感器运行起来好像它们来自 API 级别 9 之前，但我不知道为什么会这样。我的项目中是否有一些字段可能会强制应用程序充当旧 API？（AndroidManifest.xml 文件中支持的最低 API 字段除外，该字段已设置为 9）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:57:25.430

把它放在你的清单中

```
<uses-permission android:name=”android.permission.SET_ORIENTATION” /> 
```

用于访问您的加速度计

尝试这个：

```
 /* put this into your activity class */
  private SensorManager mSensorManager;
  private float mAccel; // acceleration apart from gravity
  private float mAccelCurrent; // current acceleration including gravity
  private float mAccelLast; // last acceleration including gravity

  private final SensorEventListener mSensorListener = new SensorEventListener() {
public void onSensorChanged(SensorEvent se) {
  float x = se.values[0];
  float y = se.values[1];
  float z = se.values[2];
  mAccelLast = mAccelCurrent;
  mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));
  float delta = mAccelCurrent - mAccelLast;
  mAccel = mAccel * 0.9f + delta; // perform low-cut filter
}

public void onAccuracyChanged(Sensor sensor, int accuracy) {
    }
  };

  @Override
  protected void onResume() {
    super.onResume();
    mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
  }

  @Override
  protected void onPause() {
    mSensorManager.unregisterListener(mSensorListener);
    super.onPause();
  } 
```

和这个：

```
 /* do this in onCreate */
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
mAccel = 0.00f;
mAccelCurrent = SensorManager.GRAVITY_EARTH;
mAccelLast = SensorManager.GRAVITY_EARTH; 
```

# jsf - 浏览器后退按钮导航

> ID：15493276
> 
> 赞同：2
> 
> 时间：2013-03-19T06:55:05.627
> 
> 标签：jsf

每当单击浏览器后退时，它不能导航到上一页，而是导航到某个默认页面。它是如何使用 JSF 完成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T08:59:21.403

单击浏览器后退按钮从浏览器缓存请求结果页面。这是客户端活动。它不会向您的服务器发送请求以获取某些默认页面（在您的情况下）。

请参考这篇文章来[编写一个过滤器来指示浏览器不缓存动态 JSF 页面](https://stackoverflow.com/questions/8185245/redirect-side-effects-when-using-browser-back-button)。

你也可以[参考这个](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers/2068407#2068407)了解更多细节。

您可以尝试通过编写客户端代码来检测用户是否单击了浏览器后退按钮。

请参阅此帖子以[检测后退按钮单击](https://stackoverflow.com/questions/6359327/detect-back-button-click-in-browser)。

如果您尝试更改浏览器后退按钮的行为，则表明您的应用程序存在某种缺陷。

# javascript - 在带有分隔符的单击 jquery 上附加字符串

> ID：15493277
> 
> 赞同：0
> 
> 时间：2013-03-19T06:55:08.220
> 
> 标签：javascript, jquery, concatenation

我有两个文本框，每个文本框都有一个按钮。单击按钮时，必须附加字符串。假设我点击了第一个按钮，它将保存在一个字符串中，然后我点击第二个按钮，第二个字符串应该附加到第一个。

```
<input type="text" id="name_1"> <input type="button" id="button_1" value="add">
<input type="text" id="name_2"> <input type="button" id="button_2" value="add">

    <br>
<input type="submit">

$('[id^="button_"]').on("click", function() {
    name = $('#name_'+$(this).attr('id').split('_')[1]).val();
    alert(name);
}); 
```

这里的部分工作演示：[jsfiddle](http://jsfiddle.net/M7S53/)

示例：john_david 其中 john 是第一个字符串，david 是第二个字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:01:26.450

我想你正在寻找这个：-

```
$('[id^="button_"]').on("click", function() {
    var name = "";
    $('[id^="button_"]').each(function(){
        name = name+$('#name_'+$(this).attr('id').split('_')[1]).val();
    });
    alert(name);
}); 
```

见[演示](http://jsfiddle.net/M7S53/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:58:25.177

您需要在该变量发生字符串时使用`name`变量。`global``click``append`

**`[FIDDLE](http://jsfiddle.net/M7S53/4/)`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:12:36.273

试试这个 ：

```
var name = "";
$('[id^="button_"]').on("click", function() {
    if(name == ""){ name = name+$(this).prev("input").val(); }
    else{ name = name+"_"+$(this).prev("input").val(); }
    alert(name);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:44:36.903

```
$('[id^="button_"]').on("click", function() {
  name = $('#name_'+$(this).attr('id').split('_')[1]).val();
  alert(name);
});
$('[type="submit"]').on("click", function() {
  name = $('#name_1').val() + $('#name_2').val();
  alert(name);
}); 
```

# android - 为什么大型 Android Activity 单元测试会失败？

> ID：15493279
> 
> 赞同：6
> 
> 时间：2013-03-19T06:55:11.917
> 
> 标签：android, unit-testing, junit

我正在尝试为具有很多测试方法的 Activity 创建单元测试。但是在大约 31 次测试之后，应用程序被终止，因为堆内存不足。

```
1152 E SurfaceFlinger   createSurface() failed, generateId = -12
1152 W WindowManager    OutOfResourcesException creating surface
1152 I WindowManager    Out of memory for surface!  Looking for leaks...
1152 W WindowManager    No leaked surfaces; killing applicatons!
1152 W ActivityManager  Killing processes Free memory at adjustment 1 
```

我用 40 个相同的简单测试用例进行了单元测试，只是为了找出问题所在。但感觉 GC 速度不够快，无法在测试期间清理内存。

这是我的泄漏测试测试用例：

```
package my.app;

import android.os.Debug;
import android.test.ActivityInstrumentationTestCase2;
import android.util.Log;

public class leakTest extends
        ActivityInstrumentationTestCase2<TestActivityAndroid> {

    String TAG = "leakTest";

    TestActivityAndroid mActivity = null;

    public leakTest() {
        super(TestActivityAndroid.class);
    }

    protected void setUp() throws Exception {
        super.setUp();
        setActivityInitialTouchMode(false);

        mActivity = getActivity();
    }

    protected void tearDown() throws Exception {
        super.tearDown();
    }

    private void printHeapSize() {
        Log.e(TAG,
                "NativeHeapAllocatedSize = "
                        + Debug.getNativeHeapAllocatedSize());
        Log.e(TAG, "NativeHeapFreeSize = " + Debug.getNativeHeapFreeSize());
        Log.e(TAG, "NativeHeapSIZE = " + Debug.getNativeHeapSize());
    }

    public void test_1() {
        assertNotNull(mActivity);
    }

    public void test_2() {
        assertNotNull(mActivity);
    }

    public void test_3() {
        assertNotNull(mActivity);
    }

    public void test_4() {
        assertNotNull(mActivity);
    }

    public void test_5() {
        assertNotNull(mActivity);
    }

    public void test_6() {
        assertNotNull(mActivity);
    }

    public void test_7() {
        assertNotNull(mActivity);
    }

    public void test_8() {
        assertNotNull(mActivity);
    }

    public void test_9() {
        assertNotNull(mActivity);
    }

    public void test_10() {
        assertNotNull(mActivity);
    }

    public void test_11() {
        assertNotNull(mActivity);
    }

    public void test_12() {
        assertNotNull(mActivity);
    }

    public void test_13() {
        assertNotNull(mActivity);
    }

    public void test_14() {
        assertNotNull(mActivity);
    }

    public void test_15() {
        assertNotNull(mActivity);
    }

    public void test_16() {
        assertNotNull(mActivity);
    }

    public void test_17() {
        assertNotNull(mActivity);
    }

    public void test_18() {
        assertNotNull(mActivity);
    }

    public void test_19() {
        assertNotNull(mActivity);
    }

    public void test_20() {
        assertNotNull(mActivity);
    }

    public void test_21() {
        assertNotNull(mActivity);
    }

    public void test_22() {
        assertNotNull(mActivity);
    }

    public void test_23() {
        assertNotNull(mActivity);
    }

    public void test_24() {
        assertNotNull(mActivity);
    }

    public void test_25() {
        assertNotNull(mActivity);
    }

    public void test_26() {
        assertNotNull(mActivity);
    }

    public void test_27() {
        assertNotNull(mActivity);
    }

    public void test_28() {
        assertNotNull(mActivity);
    }

    public void test_29() {
        assertNotNull(mActivity);
    }

    public void test_30() {
        assertNotNull(mActivity);
    }

    public void test_31() {
        assertNotNull(mActivity);
    }

    public void test_32() {
        assertNotNull(mActivity);
    }

    public void test_33() {
        assertNotNull(mActivity);
    }

    public void test_34() {
        assertNotNull(mActivity);
    }

    public void test_35() {
        assertNotNull(mActivity);
    }

    public void test_36() {
        assertNotNull(mActivity);
    }

    public void test_37() {
        assertNotNull(mActivity);
    }

    public void test_38() {
        assertNotNull(mActivity);
    }

    public void test_39() {
        assertNotNull(mActivity);
    }

    public void test_40() {
        assertNotNull(mActivity);
    }
} 
```

扩展 Activity 的测试活动：

```
package my.app;

import android.app.Activity;

import android.os.Bundle;

public class TestActivityAndroid extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
} 
```

这是本机可用空间降至 30kB 以下并且应用程序被终止时的内存使用情况。

```
 Applications Memory Usage (kB): Uptime: 3804373 Realtime: 3804373

** MEMINFO in pid 7315 [my.app] **
                    native   dalvik    other    total
            size:     4048     3271      N/A     7319
       allocated:     3942     2306      N/A     6248
            free:      105      965      N/A     1070
           (Pss):      844     1590     1806     4240   
  (shared dirty):     1404     4120     2288     7812
    (priv dirty):      736      672      992     2400    Objects
           Views:        0        ViewRoots:        0
     AppContexts:        0       Activities:        0
          Assets:        2    AssetManagers:        2    
   Local Binders:       11    Proxy Binders:       10 
Death Recipients:        0      
OpenSSL Sockets:         0    
SQL
            heap:        0       memoryUsed:        0 
pageCacheOverflo:        0  largestMemAlloc:        0
     Asset Allocations
    zip:/data/app/my.app-1.apk:/resources.arsc: 1K 
```

有人有更好的解决方案，即在 tearDown() 中睡眠 2 秒吗？我不喜欢 tearDown() 里面的睡眠。而且因为我们的测试套件中有大约 100 个测试，所以 2 秒将是一个巨大的延迟。

我希望有人可以帮助我，如果我的问题不清楚，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:25:33.097

为什么每次单元测试后都需要做一次 gc？

如果是因为您想要一个干净的测试环境，那么请忍受 2 秒的延迟。tearDown 至少进行 2 次 gc 和一些最终确定。它为您的下一次测试留下了一个干净的环境。如果您通读 android 源代码，有几条注释表明在测试结束时调用 tearDown 的迫切需要。

如果您的测试不需要干净的环境，则将它们组合起来。话虽如此，在后台运行 200 秒的进程对于测试将为您提供的保护付出的代价很小。

我们对当前大型项目的自动化测试大约需要 5 分钟才能运行。我从来没有注意到，因为我们已经自动化了我们的系统，以便在初始签入时运行测试，并在测试失败时退回提交。

他们失败了几次，我真的很震惊，因为我更改的代码搞砸了应用程序的其他部分。通过我们的自动化测试，我们至少节省了数周甚至数月的维护和调试应用程序的时间。

# ruby-on-rails - 如何更新此正则表达式以确保字符串结尾或开头没有 _(下划线)

> ID：15493281
> 
> 赞同：0
> 
> 时间：2013-03-19T06:55:26.860
> 
> 标签：ruby-on-rails, regex

这是我拥有的正则表达式，我需要确保字符串不以下划线开头或结尾，下划线可能出现在两者之间。

```
/^[a-zA-Z0-9_.-]+$/ 
```

我试过了

```
(?!_) 
```

但似乎不起作用

允许的字符串：

```
abcd
abcd_123 
```

不允许的字符串：

```
abcd_
_abcd_123 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:59:24.493

你可以用相反的方式处理这个问题，

*检查所有匹配开始和结束下划线*的那些，如下所示：

```
/^_|_$/

^_         #starts with underscore
|          #OR
_$         #ends with underscore 
```

然后消除那些匹配的。上面的正则表达式更容易阅读。

检查：[http ://www.rubular.com/r/H3Axvol13b](http://www.rubular.com/r/H3Axvol13b)

或者您可以尝试更长的正则表达式：

```
/^[a-zA-Z0-9.-][a-zA-Z0-9_.-]*[a-zA-Z0-9.-]$|^[a-zA-Z0-9.-]+$|^[a-zA-Z0-9.-][a-zA-Z0-9.-]$/

^[a-zA-Z0-9.-]     #starts with a-z, or A-Z, or 0-9, or . -
[a-zA-Z0-9_.-]*    #anything that can occur and the underscore
[a-zA-Z0-9.-]$     #ends with a-z, or A-Z, or 0-9, or . -
|                  #OR
^[a-zA-Z0-9.-]$    #for one-letter words
|                  #OR
^[a-zA-Z0-9.-][a-zA-Z0-9.-]$      #for two letter words 
```

检查： [http ://www.rubular.com/r/FdtCqW6haG](http://www.rubular.com/r/FdtCqW6haG)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:35:02.507

不是太难！

```
/^[^_].*[^_]$/ 
```

“除行首的下划线 ( ) 之外的任何字符，然后是`^[^_]`任何字符 ( `.*`)，然后是行尾 ( ) 之前除下划线之外的任何字符`[^_]$`。”

这确实需要至少两个字符来验证字符串。如果要允许一个字符行：

```
/^[^_](.*[^_]|)$/ 
```

“除了下划线以外的任何内容开始行，然后是一些字符加上行尾之前的非下划线字符，或者只是一个直接的行尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T06:58:20.523

```
/^[a-zA-Z0-9.-][a-zA-Z0-9_.-]+[a-zA-Z0-9.-]$/ 
```

试试这个

**说明：**
在第一部分，`[a-zA-Z0-9.-]`正则表达式只允许大小写字母、数字、点和连字符。
在下一节中`[a-zA-Z0-9_.-]+`，正则表达式查找单个或多个字符，这些字符是小写或大写字母、数字点、连字符或下划线。
最后一部分 ,`[a-zA-Z0-9.-]`与限制输入以下划线结尾的第一部分相同。

# iphone - 向 Google 地方信息添加新地点

> ID：15493283
> 
> 赞同：2
> 
> 时间：2013-03-19T06:55:40.290
> 
> 标签：iphone, ios, json

我是IOS的新手。我必须向 Google 地方信息添加新地点。我已引用此链接[https://developers.google.com/places/documentation/actions](https://developers.google.com/places/documentation/actions)在按钮单击时添加位置，但我对为此传递参数感到困惑。

我的编码行是这样来获取的：

```
NSString *lat =@"-33.8669710";
NSString *longt =@"151.1957362";
gKey = @"my api key";

NSString *placeString  = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/add/json?sensor=false&key=%@HTTP/1.1Host:maps.googleapis.com {\"location\":{\"lat\":%@,\"lng\":%@},\"accuracy\": 50,\"name\":\"Gimmy Pet Store!\",\"types\":[\"pet_store\"],\"language\":\"en-AU\"}",gKey,lat,longt];

placeString = [placeString  stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"Main Place Url: %@",placeString);
NSURL *placeURL = [NSURL URLWithString:placeString];

NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:placeURL];

[request setHTTPMethod:@"POST"];

NSURLConnection *placesConn =[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:20:23.670

我对我的代码进行了以下更改，最后它成功执行了......

```
//for setting Parameters to post the url.just change tag values to below line...

NSString *str1 = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><PlaceAddRequest><location><lat>your latitude</lat><lng>your longitude</lng></location><accuracy>50</accuracy><name>place name</name><type>supported type</type><language>en-US</language></PlaceAddRequest>"];
NSLog(@"str1=====%@",str1);

NSString *str2 = [str1 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSData *requestdata = [NSData dataWithBytes:[str2 UTF8String] length:[str2 length]];
NSString *postLength = [NSString stringWithFormat:@"%d", [requestdata length]];

//requesting main url to add new place to google places
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/add/xml?sensor=false&key=your api key"]];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];

[request setHTTPMethod:@"POST"];
[request setHTTPBody:[NSData dataWithBytes:[str1 UTF8String] length:[str1 length]]];

//NSURLConnection *placesConn =[[NSURLConnection alloc] initWithRequest:request delegate:self];
NSData *returndata = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnstr = [[[NSString alloc] initWithData:returndata encoding:NSUTF8StringEncoding] autorelease];
NSLog(@"returnstr: %@",returnstr); 
```

& 然后我解码了返回响应，我的状态为 OK......:)

任何人都可以使用上面的代码......如果有任何帮助需要你一定可以问...... :)

# javascript - 理解javascript继承和node.js util继承函数示例

> ID：15493285
> 
> 赞同：10
> 
> 时间：2013-03-19T06:55:41.027
> 
> 标签：javascript, node.js, oop, inheritance

我有两个模块：**apirequest.js**和**feed.js。**当我调用`feed.start()`apirequest**时**，我得到`TypeError: Object #<Feed> has no method 'start'`. 为什么是这样？不`util.inherits(Feed, APIRequest);`继承 APIRequest 的属性？

**apirequest.js**

```
var EventEmitter = require('events').EventEmitter;
var util = require('util');

function APIRequest(endpoint) { } 

APIRequest.prototype.start = function() { }

util.inherits(APIRequest, EventEmitter);

module.exports = APIRequest; 
```

**饲料.js**

```
var util = require('util');
var APIRequest = require('../lib/api_request');

function Feed(endpoint) {
  APIRequest.call(this, endpoint);
}

util.inherits(Feed, APIRequest);

var feed = new Feed(endpoint);

feed.start(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T07:10:10.733

问题是顺序：

```
APIRequest.prototype.start = function() { }
util.inherits(APIRequest, EventEmitter); <-- *overwrites* APIRequest.prototype 
```

如果您交换这些行，它将起作用：

```
util.inherits(APIRequest, EventEmitter);
APIRequest.prototype.start = function() { } 
```

# linux-kernel - 如何找到 /dev/console 连接的物理设备？

> ID：15493287
> 
> 赞同：14
> 
> 时间：2013-03-19T06:55:42.557
> 
> 标签：linux-kernel, linux-device-driver, embedded-linux, tty

有一个设备文件`/dev/console`叫. 当我使用串行控制台启动时，它会连接到我的 UART 端口。但是当我在禁用串行控制台的情况下启动时，似乎连接到其他地方，那里总是连接到同一个物理设备，即. 是否有任何指示（如或中的内容）显示此类信息？我在那里尝试过，但没有找到我想要的。我开始追踪 Linux 内核源代码以澄清它们之间的关系。谁能给我一些提示？何时、何地、如何以及如何确定连接的物理设备？`(major,minor)``(5,1)``/dev/ttyS0``/dev/console``/dev/ttyS0``UART0``/proc``/sys``/dev/console`

编辑：最新发现是：

1.  由内核参数`/dev/console`配置，`console=`而内核参数又被用于`getty`打开`stdin/stdout/stderr`。如果`console=`指定 no，`/dev/null`则打开为`stdin/stdout/stderr`. 但我不确定它们是否与 完全相同`/dev/console`，这意味着`/dev/console`它的 I/O 可以连接到不同的物理设备。
2.  如果 USB HID 键盘已插入且未配置为 UART ，`/dev/console`则可以读取。`console=`因此`/dev/console`==`/dev/null`似乎没有什么意义。需要更多调查。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T07:26:08.727

我想`/sys/devices/virtual/tty/console/active`这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T00:04:54.130

来自[http://man7.org/linux/man-pages/man4/console.4.html](http://man7.org/linux/man-pages/man4/console.4.html)：“当前控制台也由 /dev/console 或 /dev/tty0 寻址，主要编号为 4 和次要的字符设备0号。”

我希望这就是你要找的。

# c# - c#.net application With DotNetOpenAuth google

> ID：15493290
> 
> 赞同：2
> 
> 时间：2013-03-19T06:55:55.763
> 
> 标签：c#, oauth, dotnetopenauth, google-oauth

我已成功通过 Google OAuth API 进行身份验证。第一次正确运行。对于第二次访问相同的内容，我收到以下错误：

**“发送直接消息或获取响应时发生错误。”**

堆栈跟踪：

```
 [WebException: The remote server returned an error: (400) Bad Request.]
   System.Net.HttpWebRequest.GetResponse() +6038435
   DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request, DirectWebRequestOptions options) +410

[ProtocolException: Error occurred while sending a direct message or getting the response.]
   DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request, DirectWebRequestOptions options) +1618
   DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request) +73
   DotNetOpenAuth.Messaging.Channel.GetDirectResponse(HttpWebRequest webRequest) +82
   DotNetOpenAuth.Messaging.Channel.RequestCore(IDirectedProtocolMessage request) +357
   DotNetOpenAuth.Messaging.Channel.Request(IDirectedProtocolMessage requestMessage) +158
   DotNetOpenAuth.OAuth2.ClientBase.UpdateAuthorizationWithResponse(IAuthorizationState authorizationState, EndUserAuthorizationSuccessAuthCodeResponse authorizationSuccess) +319
   DotNetOpenAuth.OAuth2.WebServerClient.ProcessUserAuthorization(HttpRequestInfo request) +885 
```

对于方法

```
private IAuthorizationState GetAuthorization(WebServerClient client)
{
    String accesstoken = "";

    IAuthorizationState state = AuthState;

    if (state != null)
    {
        return state;
    }

    state = client.ProcessUserAuthorization(new HttpRequestInfo(HttpContext.Current.Request));        

    if (state != null && (!string.IsNullOrEmpty(state.AccessToken) 
        || !string.IsNullOrEmpty(state.RefreshToken)))
    {
        accesstoken = state.AccessToken;
        HttpContext.Current.Session["AUTH_STATE"] = _state = state;      
        return null;
    }

    string scope = TasksService.Scopes.TasksReadonly.GetStringValue();
    OutgoingWebResponse response = client.PrepareRequestUserAuthorization(new[] { 
            scope, 
            "https://www.googleapis.com/auth/userinfo.profile", 
            "https://www.googleapis.com/auth/userinfo.email" 
        });

    response.Send();
    return null;
}

private IAuthorizationState AuthState
{
    get
    {
        return _state ?? HttpContext.Current.Session["AUTH_STATE"] as IAuthorizationState;
    }
} 
```

在行中

```
 state = client.ProcessUserAuthorization(new HttpRequestInfo(HttpContext.Current.Request)); 
```

等待有价值的回复和评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:39:32.913

请检查您是否只调用了一次 client.ProcessUserAuthorization。从具有相同参数的第二次调用开始，它可能会继续“发送直接消息或获取响应”错误。

# android - 如何创建下拉菜单，如屏幕截图所示

> ID：15493295
> 
> 赞同：0
> 
> 时间：2013-03-19T06:56:13.813
> 
> 标签：android

现在我正在使用微调器，但微调器的外观不同。我想在屏幕上显示下拉列表 ![在此处输入图像描述](../Images/7cdad35f8c78f13b34b5d10bf47b81de.png) 请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:00:45.197

如果可以以默认方式完成，为什么要这样实现。

这里仍然是一个创建快速操作对话框的详细示例： [如何在 Android](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)或[NewQuickAction](https://github.com/lorensiuswlt/NewQuickAction)中创建 QuickAction 对话框。

**更新：**

您可以使用本机[PopupMenu](http://developer.android.com/reference/android/widget/PopupMenu.html)来显示与上述相同的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:34:46.870

我认为以下两个链接都可能对您有所帮助：

[https://github.com/lorensiuswlt/NewQuickAction](https://github.com/lorensiuswlt/NewQuickAction)

[https://github.com/lorensiuswlt/NewQuickAction3D](https://github.com/lorensiuswlt/NewQuickAction3D)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:14:49.770

如果你想创建这样你需要使用对话框..它将显示为你想要的。将向下箭头视为一个按钮。并且项目显示为列表视图。

```
 public class MainActivity extends Activity  {
      Button dialogButton;
       Dialog dialog;
String[] gender={"Male","Female"};
  @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
      {
       dialogButton=(Button) findViewById(R.id.dialog_button);
        dialogButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
 Toast.makeText(getApplicationContext(), "Button clicked",Toast.LENGTH_SHORT).show();   
            showDialogMatch();
        }
    });

protected void showDialogMatch() {
    // TODO Auto-generated method stub
    dialog=new Dialog(this);

    dialog = new Dialog(this,android.R.style.Theme_Translucent_NoTitleBar);
    dialog.setContentView(R.layout.match_type_dialog);
     LayoutParams lp=dialog.getWindow().getAttributes();    
     lp.x=260;lp.y=350;lp.width=280;lp.height=280;lp.gravity=Gravity.BOTTOM | Gravity.LEFT;
    lp.dimAmount=0;            
    lp.flags=LayoutParams.FLAG_LAYOUT_NO_LIMITS | LayoutParams.FLAG_NOT_TOUCH_MODAL;
    dialog.show();
    ListView lvview=(ListView) dialog.findViewById(R.id.listView1);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,gender);
    lvview.setAdapter(adapter); 
```

}

而你的 match_type_dialog xml 是这样的

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@drawable/switch_base">

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

# parsing - 逐行解析批处理

> ID：15493297
> 
> 赞同：0
> 
> 时间：2013-03-19T06:56:26.097
> 
> 标签：parsing, variables, batch-file, return, trim

我正在尝试解析另一个函数的输出，该函数是逐行输出的。为了理解该函数，它返回几行参数和数字，如“ `top=123456789`”或“ `low=123456789`”（不带引号） -

我现在尝试用

```
for /F "delims=" %%a in ('%%I ^| findstr top') do set updir=%%1
set "updir=%1:~4%" 
echo. %updir% 
```

我试图通过修剪已知关键字（如 top）来获得纯数字，然后需要将其设置为 var 以将（`%~1% ???`）返回到调用函数（其他批处理文件）。

有人可以帮我吗？舒尔最好从“=”修剪。

更新：

这是从我链接的脚本中返回行的代码。我尝试了几种方法来解析返回，但我似乎是盲人或太愚蠢，看不到，一切都变得很奇怪。

```
for /f "delims=" %%I in ('cscript /nologo /e:jscript "%~f0" "%URL%"') do (
rem process the HTML line-by-line

org echo(%%I

try1 (echo %%I|findstr top

try2 for /F "delims=" %%a in ('%%I ^| findstr top') do set updir=%%a
try2 echo. %updir%

try3 for /F "delims=" %%a in ('%%I') do findstr top
try3 echo. %2%

) 
```

也没有用

```
for /F "tokens=1,2delims==" %%a in ('%%I') do if %1 == top set updir=%%b
echo %updir% 
```

我尝试了下面的两个 delim 版本（too the tokens/delims 版本），但我没有做对。

更新解决方案：

对于那些在这里阅读问题的人一些额外的评论：

```
rem trim whitespace from beginning and end of line
for /f "tokens=*" %%x in ("%%~I") do set "line=%%x"

rem test that trimmed line matches "variable=number" 
```

`to find a single item like e.g. "top" you have to add "to" or adjust whole first token`
回声！线！| findstr /i "^ `to`[az] *=[0-9]* " >NUL && (

```
rem test was successful.  Scrape number.
for /f "tokens=2 delims==" %%x in ("%%I") do set "value=%%x"
echo !value!
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:20:23.647

这符合您的需求吗？

```
for /F "delims=" %%a in ('type file.txt ^| findstr "top low"') do set /a %%a 

set top
set low
echo %top%, %low% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:01:26.033

试试这个：

```
for /F "tokens=2delims==" %%a in ('findstr top file.txt') do set "updir=%%a"
echo.%updir% 
```

根据您的评论，我的新代码：

```
@echo off &setlocal enabledelayedexpansion
set "string=%%I"
set "string=!string:*top=!"
for /f "delims== " %%z in ("!string!") do set "string=%%z"
echo !string! 
```

.. 输出：

> 123456789

编辑2：`"`添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T23:35:24.703

如果您只想跳过所有行，直到找到与“text=numerals”匹配的行，然后刮掉该行的数字部分，您需要做的就是：

```
for /f "delims=" %%I in ('cscript /nologo /e:jscript "%~f0" "%URL%"') do (

    rem trim whitespace from beginning and end of line
    for /f "tokens=*" %%x in ("%%~I") do set "line=%%x"

    rem test that trimmed line matches "variable=number"
    echo !line! | findstr /i "^[a-z]*=[0-9]*$" >NUL && (

        rem test was successful.  Scrape number.
        for /f "tokens=2 delims==" %%x in ("%%I") do set "value=%%x"
    )
) 
```

反正我觉得是对的。我没有测试它。

但我怀疑这不会按您的意愿工作，因为[您正在抓取的](https://stackoverflow.com/a/15419314/1683264)内容可能包括 HTML 标签。除非您粘贴示例页面的 HTML 源代码，并解释您希望从该源示例中抓取的内容，否则我们可能无法帮助您抓取 HTML。

# ios - 它何时将方向更改为默认方向？

> ID：15493298
> 
> 赞同：0
> 
> 时间：2013-03-19T06:56:30.647
> 
> 标签：ios, objective-c, screen-orientation

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我的应用程序只支持横向右方向，它只有一个视图控制器。我设置了唯一可用的方向修改`myProject-info.plist`。

我试图理解为什么当我只支持横向右方向时，此代码会在纵向模式下为视图输出日志。

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    UIView *videoView = self.videoPreviewView;
    NSLog(@"Video frame: %@", NSStringFromCGRect(videoView.frame));
} 
```

控制台输出：

```
Video frame: {{0, 0}, {320, 568}} 
```

我正在使用`AVCaptureVideoPreviewLayer`，我需要设置它的框架，但是当我这样做时，`viewWillAppear:`我得到了纵向值，但`orientation`值是横向的。

**当方向更改为横向时，是否会触发事件或类似事件？**

**应用程序何时将方向更改为默认方向？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:37:57.090

进入 xCode，然后单击屏幕顶部的项目名称（下方有一个 xcode LOGO）。然后显示 iPhone/Ipad 开发信息并选择您希望用户可用的方向:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:52:39.157

如果添加该行：

> [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged) name:UIDeviceOrientationDidChangeNotification object:nil];

那么它会在`-(void)orientationChanged;`每次改变方向时调用该方法。然后，您可以执行以下操作：

```
-(void)orientationChanged {
    if (UIDeviceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation) {
        //device is portrait;
    }
    else {
        //device is landscape;
    }
} 
```

然后，您可以使用它来确定视图的布局并根据方向进行设置。

编辑：您还可以检查状态栏的方向返回的方向是否等于 UIDeviceOrientationLandscapeLeft/LandscapeRight/Portrait/PortraitUpsideDown。

# javascript - 将 y 轴上的数字转换为千 d3.js 的 K 字符串

> ID：15493303
> 
> 赞同：18
> 
> 时间：2013-03-19T06:57:03.710
> 
> 标签：javascript, d3.js

我正在使用 d3.js 图表来绘制 y 轴和 x 轴。它工作正常，但是你可以说 y 轴上的值范围是 0 到 10000，我希望如果数字大于千，它会附带 K。
如果数字是 1000，它将显示 1K，对于 15000，它将显示y 轴刻度为 15K。

怎么做？我无法`y.domain`为字符串值操作和范围函数。

```
var y = d3.scale.linear().range([ height, 0 ]);
y.domain([
  0,
  d3.max(cities, function(c) { return d3.max(c.values, function(v) { return v.count; }); })
]); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-19T13:30:47.707

从[API Reference](https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md)中，我们看到`d3.formatPrefix`

```
var prefix = d3.formatPrefix(1.21e9);
console.log(prefix.symbol); // "G"
console.log(prefix.scale(1.21e9)); // 1.21 
```

我们可以这样使用

```
var yAxis = d3.svg.axis()
    .scale(y)
    .ticks(5)
    .tickFormat(function (d) {
        var prefix = d3.formatPrefix(d);
        return prefix.scale(d) + prefix.symbol;
    })
    .orient("left"); 
```

但是，如果这正是您的意思，我们可以简化使用`d3.format("s")`

```
var yAxis = d3.svg.axis()
    .scale(y)
    .ticks(5)
    .tickFormat(d3.format("s"))
    .orient("left"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T08:28:18.447

您正在寻找`tickFormat`轴对象。

```
var svgContainer = d3.select("body").append("svg")
    .attr("width", 800)
    .attr("height", 100);

//Create the Scale we will use for the Axis
var axisScale = d3.scale.linear()
    .domain([0, 2000])
    .range([0, 600]);

//Create the Axis
var xAxis = d3.svg.axis()
    .scale(axisScale)
    .tickFormat(function (d) {
      if ((d / 1000) >= 1) {
        d = d / 1000 + "K";
      }
      return d;
    });

var xAxisGroup = svgContainer.append("g")
    .call(xAxis); 
```

在这里检查：http: [//jsfiddle.net/3CmV6/2/](http://jsfiddle.net/3CmV6/2/)

这将为您提供您想要的，但我建议您查看 robermorales 的建议以使用`d3.format('s')`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-19T11:03:32.453

这就是我实施的

```
var yAxis = d3.svg.axis().scale(y).ticks(5).
tickFormat(function (d) {
    var array = ['','k','M','G','T','P'];
    var i=0;
    while (d > 1000)
    {
        i++;
        d = d/1000;
    }

    d = d+' '+array[i];

    return d;}).
orient("left"); 
```

它可以工作超过一千...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-14T13:43:17.697

简洁的方法：

```
var myTickFormat = function (d) {//Logic to reduce big numbers
  var limits = [1000000000000000, 1000000000000, 1000000000, 1000000, 1000];
  var shorteners = ['Q','T','B','M','K'];
  for(var i in limits) {
    if(d > limits[i]) {
      return (d/limits[i]).toFixed() + shorteners[i];
    }
  }
  return d;
};

spenderRowChart
    .xAxis().ticks(3)
    .tickFormat(myTickFormat); 
```

**这将返回`1K`，返回`1000`1M `1,000,000`，依此类推。**
注意：超过千万亿，您可能想通过[Number.MAX_SAFE_INTEGER](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-22T08:54:15.713

尝试这个

```
 axis: {
                y: {
                    tick: {
                        format: d3.format("$.2s")
                    }
                }
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T08:53:06.753

如果您想编辑刻度上的标签，您可以使用[tickFormat](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickFormat)函数。

例如，您的 y 轴函数看起来像这样：

```
var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat(function(tickVal) {
        return tickVal >= 1000 ? tickVal/1000 + "K" : tickVal;
    }); 
```

然后你只需要调用它。假设您有一个名为 svg 的变量引用您的 svg 图表：

```
svg.append("g)
    .call(yAxis); 
```

为了让事情更清楚一点，我根据[本教程创建了](http://alignedleft.com/tutorials/d3/axes/)[这个 jsfiddle](http://jsfiddle.net/GAQAv/)，如果值大于或等于 1000，则适用于以上面描述的方式显示轴刻度标签。如果你运行它几次你会看到如何处理不同的轴值。

# java - SQLDataException：试图从“VARCHAR”类型的数据值中获取“VARBINARY”类型的数据值

> ID：15493307
> 
> 赞同：0
> 
> 时间：2013-03-19T06:57:17.710
> 
> 标签：java, hibernate, jakarta-ee

我正在尝试在以下 Hibernate 查询中设置参数的值：

```
public List<Transactions> getTransactions(long cardNum, String type) {
    Query q1 = factory.getCurrentSession().createQuery("FROM bank.persistence.entity.Transactions WHERE PK_CRED_CARD_ID=:CardID AND TRANSACTION_TYPE=:trType");
    q1.setParameter("CardID", cardNum);
    q1.setParameter("trType", type);
    return q1.list();
} 
```

但是我收到以下错误，问题似乎出在 String 类型的值上：

```
java.sql.SQLDataException: An attempt was made to get a data value of type 'VARBINARY' from a data value of type 'VARCHAR'. 
```

这是 Transactions 实体类：

```
package bank.persistence.entity;

import java.io.Serializable;
import java.util.Date;
import javax.persistence.*;

@Entity
public class Transactions implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int ID;

    @Column(name = "TRANSACTION_TYPE")
    private String transType;

    @Column(name = "AMOUNT")
    private float amt;

    @Column(name = "DESCRIPTION")
    private String desr;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "TRANSACTION_DATE")
    private Date tranDate;

    @ManyToOne
    @JoinColumn(name = "PK_ACCT_ID")
    private Account account;

    @ManyToOne
    @JoinColumn(name = "PK_CRED_CARD_ID")
    private CreditCard credCard;

    // getter and setter for all attributes

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:59:10.523

我认为您在实体和数据库中提供的数据类型是不同的。使它们都相同。在实体中使其为`String`

```
@Column(name = "TRANSACTION_TYPE" type="String") 
```

我认为其中一个 cardNum ，类型为 null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:01:06.017

由于它的 HQL，您的查询是否应该是这样的：-

```
Query q1 = factory.getCurrentSession().createQuery("FROM bank.persistence.entity.Transactions T 
WHERE T.credCard.id=:CardID AND T.transType=:trType"); 
```

您需要提供映射到列的变量。不是直接的列名。我假设`CreditCard`表中的 ID 列是 id。如果没有，请将其更改为相关的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T02:35:29.847

如果所有类型都很好，则检查您在 setParameter() 中设置的值是否为空，在这种情况下，休眠将引发此错误。

# java - 带有装箱/加宽的 Java 方法重载

> ID：15493313
> 
> 赞同：1
> 
> 时间：2013-03-19T06:57:35.687
> 
> 标签：java, overloading, scjp

我正在研究 Java Se 7 OCA，但无法弄清楚为什么下面的代码无法编译。main 方法中的 aMethod 调用给出了编译错误，说明方法不明确。在这个重载方法示例中，加宽和装箱之间的优先级规则似乎发生了冲突。

```
public class Overloading {
public static void main(String[] args) {
    Byte i = 5;
    byte k = 5;
    aMethod(i, k);
}

static void aMethod(byte i, Byte k) {
    System.out.println("Inside 1");
}

static void aMethod(byte i, int k) {
    System.out.println("Inside 2");
}

static void aMethod(Byte i, Byte k) {
    System.out.println("Inside 3 ");
}
} 
```

错误是“ **The method aMethod(byte, Byte) is ambiguous for the type Overloading** ”。当我注释掉第一种方法时，第二种方法会出现相同的错误。

我的想法是：第一种方法需要拆箱和装箱第二种方法需要拆箱和扩大第三种方法只需要装箱。所以它必须是第三种方法，因为它需要最少的转换，并且它们都有拳击转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:10:29.947

问题在于所有这些方法：

```
static void aMethod(byte i, Byte k) {
    System.out.println("Inside 1");
}

static void aMethod(byte i, int k) {
    System.out.println("Inside 2");
}

static void aMethod(Byte i, Byte k) {
    System.out.println("Inside 3 ");
} 
```

Java 不知道，它应该在线调用哪一个：

```
 aMethod(i, k); 
```

根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)规范`i`，您的参数可以通过各种方式进行转换：`k`

`i`可以`unboxed`到`byte`(5.1.8) 或保留为`Byte`(5.1.1) -> 2 个变体

`k`可以`boxed`进入`Byte`(5.1.7) 或扩大到`int`类型 (5.1.2) -> 2 个变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:05:00.517

这个类你有两个相等的方法

```
static void aMethod(Byte i, Byte k) {
    System.out.println("Inside 3 ");
}

static void aMethod(byte i, Byte k) {
    System.out.println("Inside 1");
} 
```

字节自动转换字节，所以编译错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:17:05.553

实际上不是定义，而是调用是模棱两可的。因为，默认情况下，java 中的所有整数都是 int。即使您说 byte b =5，对于任何操作，5 都会在内部转换为 int。但是由于引用是字节，在您的情况下，它可以选择调用方法 2 和 3。所以编译器无法理解要调用什么。

所以`aMethod(i, (Byte)k)`应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T06:48:27.400

在 Java 中方法重载时应牢记以下几点：

1.  如果未找到完全匹配，则原始类型的扩展使用紧接的下一个更广泛的类型方法参数。

2.  如果单独使用装箱和 var-args 与方法重载兼容。

3.  一种包装类型不能扩展到另一种。例如，Integer 不能扩展为 Long。

4.  加宽后拳击是行不通的。例如，不能将 int 传递给 Long。

5.  如果将装箱参数传递给 Object 类型引用，则装箱后加宽仅在一种情况下有效。一个 int 可以通过 Integer 传递给一个 Object。

6.  Var-args 可以与加宽或装箱结合使用，但要小心。

在上面的代码中，传递给 aMethod 的参数应该进行适当的类型转换，因为 Java 中的中间结果在 int 表达式中转换为 int。

# c# - System.Net.WebException：操作已在 HttpWebResponse 上超时

> ID：15493321
> 
> 赞同：3
> 
> 时间：2013-03-19T06:58:22.603
> 
> 标签：c#, .net

当我向多个客户端发送短信时，它会给出错误操作超时并且错误出现在 HttpWebResponse

我试过 myReq.Timeout = 50000; myReq.ReadWriteTimeout = 50000;

但在第 150 行给出相同的错误错误
`Line 148: myReq.Timeout = 50000;
Line 149: myReq.ReadWriteTimeout = 50000;
Line 150: HttpWebResponse myResp = (HttpWebResponse)myReq.GetResponse();
Line 151: System.IO.StreamReader respStreamReader = new System.IO.StreamReader(myResp.GetResponseStream());
Line 152: string responseString = respStreamReader.ReadToEnd();`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T07:11:04.487

这很可能是问题所在：

```
HttpWebResponse myResp = (HttpWebResponse)myReq.GetResponse(); 
```

`WebResponse`implements `IDisposable`，所以你应该`using`为它使用一个语句（以及`StreamReader`你从流中创建的）。如果您保持`WebResponse`打开状态，它将占用从连接池到该主机的连接，并且您可能会以这种方式结束超时。固定代码如下所示：

```
string responseString;
using (var response = myReq.GetResponse())
{
    using (var reader = new StreamReader(response.GetResponseStream())
    {
        responseString = reader.ReadToEnd();
    }
} 
```

即使抛出异常，这也会关闭流和响应，因此您将始终及时清理资源（在这种情况下将连接释放回池）。

# android - Android 布局：使用边距/填充或嵌套布局？

> ID：15493325
> 
> 赞同：2
> 
> 时间：2013-03-19T06:58:29.353
> 
> 标签：android, android-layout

我正在尝试在 Android 中完成布局，但无法弄清楚如何去做。基本上我试图让它看起来像这样：

```
+-----------------------------------------+
|           Text #1                       |
| img1 img2 Text #2                  img3 |
+-----------------------------------------+ 
```

正如我试图说明的那样，文本#1 和文本#2 应该对齐。我正在考虑两种不同的方法：

```
+-----------------------------------------+
|<- margin->Text #1                       |
+-----------------------------------------+
| img1 img2 Text #2                  img3 |
+-----------------------------------------+ 
```

或者

```
+----------+-------+----------------------+
|          |Text #1|                      |
|          +-------+
| img1 img2|Text #2|                 img3 |
+----------+-------+----------------------+ 
```

我更喜欢后者，但带有 Text #1/#2 的 LinearLayout 会折叠，因此 Text #2 不可见。

两种解决方案都嵌套在 RelativeLayout 中。我尝试将包含左侧部分的 LinearLayout 的重力设置为“left”，将 img3 设置为“right”，但显然只能将重力分配给周围的 RelativeLayout 对吗？至少我不能使用重力来正确对齐。

如果我微弱的图纸有意义，任何人都可以指导我选择正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:27:28.770

`WEIGHTSUM`您可以使用属性进一步划分这 3 个线性布局

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="80dip"
    android:orientation="horizontal">

    <ImageView            
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitXY"
        android:src="@drawable/img2"/>

    <ImageView            
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitXY"
        android:src="@drawable/img2"/>
</LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="80dip"
        android:orientation="vertical" 
        android:weightSum="1">

        <TextView
            android:id="@+id/direzione"
            android:layout_width="wrap_content"
            android:layout_height="0dip"
            android:layout_weight="0.5"                
            android:text="Text View 1"
            android:textColor="#000000"/>

        <TextView
            android:id="@+id/direzione_value"
            android:layout_width="wrap_content"
            android:layout_height="0dip"
            android:layout_weight="0.5" 
            android:text="Text View 2"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

       <ImageView            
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitXY"
        android:src="@drawable/img2"/>
    </LinearLayout> 
```

![在此处输入图像描述](../Images/29df209e06b1f6c84d2ff76d6a6b2000.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:52:41.427

我会在里面使用相对布局：

```
linearLayout : parentBottom + vertical orientation
  tv1
  tv2
img2: parentBottom + leftOf layout
img1: parentBottom + leftOf img2
img3 : parentBottom + rightOf layout 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:19:50.017

我使用 weightSum 和方向根据您的需要创建布局

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/homeTableLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:weightSum="10"
         >

        <LinearLayout
             android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:weightSum="10"
        android:layout_weight="2"
            >
     <ImageView
         android:layout_height="50dip" 
         android:layout_width="0dip"
         android:background="@android:color/holo_blue_dark"
         android:layout_weight="5"
         />
     <ImageView
         android:layout_height="50dip" 
         android:layout_width="0dip"
         android:background="@android:color/holo_green_dark"
         android:layout_weight="5"
         />
     </LinearLayout>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/homeTableLayout"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:layout_weight="3"
         >
         <TextView
              android:layout_width="fill_parent"
              android:layout_height="25dip"
              android:text="testing"
              android:background="@android:color/holo_orange_dark"
             />
         <TextView
              android:layout_width="fill_parent"
              android:layout_height="25dip"
              android:text="testing"
              android:background="@android:color/holo_purple"
             />

     </LinearLayout>

     <LinearLayout
             android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
       android:layout_weight="5"
            >
     <ImageView
         android:layout_height="50dip" 
         android:layout_width="fill_parent"
         android:background="@android:color/holo_blue_dark"

         />

     </LinearLayout>
    </LinearLayout> 
```

下面是线框。根据您的需要更改它：

![在此处输入图像描述](../Images/6f0225bd97a37179b0c4530934496f0b.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:20:23.330

试试这个

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="68dp"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/imageView1"
    android:layout_marginLeft="19dp"
    android:layout_toRightOf="@+id/imageView1"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView2"
    android:layout_alignTop="@+id/imageView2"
    android:layout_marginLeft="34dp"
    android:layout_toRightOf="@+id/imageView2"
    android:text="Large Text"
    android:gravity="center"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignRight="@+id/textView1"
    android:layout_marginBottom="16dp"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/textView1"
    android:src="@drawable/ic_launcher" /> 
```

如果不工作请亲密

# c# - 将 ExceptionFilterAttribute 限制为一个特定的 MVC 区域

> ID：15493327
> 
> 赞同：3
> 
> 时间：2013-03-19T06:58:40.837
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-areas, filterattribute

在我的项目中，我有不同的区域。我添加了一个**ExceptionFilterAttribute**来处理错误（自定义）。我不想手动将此属性添加到所有控制器，我想将此属性注册到特定区域，因此 ExceptionFilterAttribute 将自动工作该区域中的所有控制器

有什么建议么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:05:07.047

无法将操作过滤器应用于区域。您可以编写自定义异常过滤器属性，然后将其应用为全局操作过滤器：

```
public class AdminAreaHandleErrorAttribute: HandleErrorAttribute
{
    public override void OnException(ExceptionContext filterContext)
    {
        var area = filterContext.RouteData.Values["area"] as string;
        if (string.Equals(area, "Admin", StringComparison.InvariantCultureIgnoreCase))
        {
            base.OnException(filterContext);
        }
    }
} 
```

然后注册为全局过滤器：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new AdminAreaHandleError());
} 
```

# .htaccess - htaccess 从变量 URL 重定向到干净的 URL

> ID：15493328
> 
> 赞同：0
> 
> 时间：2013-03-19T06:58:44.517
> 
> 标签：.htaccess, variables, redirect

我有一个站点，其 URL 看起来都来自 index.php 页面。这是几年前为数据库编写的第一次尝试。

www.domain.com/index.php?p=page1 www.domain.com/index.php?p=page2

我已更改为 wordpress 站点，并希望将访问该页面的任何人重定向到新的 url。如

www.domain.com/page1 www.domain.com/cat/page2

我有这样写的重定向，但它只是将每个重定向到主页。

```
Redirect 301 /index.php?p=page2 http://www.domain.com/page_newname_2/ 
```

感谢您的帮助，我已经搜索过，似乎找不到接近或有意义的答案。

-布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:08:27.017

使用 Wordpress 将旧页面重定向到新帖子页面！

如果是这样，请转到插件，添加新的，输入重定向。John Godley 的第一个插件将满足您的需求。

[插件重定向](http://urbangiraffe.com/plugins/redirection/)的手动下载页面

安装后你会在 Tools -> Redirection 找到它

# function - 删除 wordpress 博客中的页脚文本

> ID：15493331
> 
> 赞同：0
> 
> 时间：2013-03-19T06:58:58.653
> 
> 标签：function, wordpress

我创建了测试博客，发现页脚消息如下

```
Proudly powered by WordPress . 
```

如何在不编辑核心文件的情况下删除这些页脚消息，博客中有删除页脚的选项。

或者，如果有任何其他自定义函数来删除页脚消息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:06:54.887

您可以从模板编辑它

goto `Appearance`->`Editor`并`Footer`从右侧选择并删除

`<?php printf( __( 'Proudly powered by %s', 'twentytwelve' ), 'WordPress' ); ?>`行或编辑它

# java - 使用 ETL 或 Java Freamework 导入/导出数据

> ID：15493332
> 
> 赞同：2
> 
> 时间：2013-03-19T06:59:00.133
> 
> 标签：java, import, export, kettle

我们想在我们的 java webapp 中添加导入/导出数据的能力（使用 Spring 和 Hibernate 实现）。我们的 webapp 包含分层数据以及从文件加载的 LOB 数据。要求是将数据导出到 XML/二进制文件中，将所有内容捆绑在一个 ZIP 文件中，然后将其导入到我们应用程序的另一个实例中。

您对我应该使用哪些框架来实现这个（如果有的话）有任何经验或建议吗？

我教过使用 Pentaho 的数据集成（Kettle），但我认为测试和维护它会很困难，所以我正在寻找任何其他的 Java 框架，以便在两者之间进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:02:51.617

如果您使用的是 Oracle，那么我建议您使用[SQL Developer的](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)[数据泵](http://docs.oracle.com/cd/E11882_01/server.112/e16536/dp_api.htm)功能来执行此操作。这将更加可靠和直接，然后尝试自己实现一些东西，根据我的经验，最好使用数据库的本机迁移功能。

我有一些使用 Kettle 的经验，如果您需要进行一些转换，即实际的 ETL，作为迁移的一部分，这可能是一个不错的选择，尽管正如您所说，它更难测试。

编辑：如果您需要将这部分设置为整个环境设置，那么我建议您将其与[Puppet](https://puppetlabs.com/)或[Chef](http://www.opscode.com/chef/)结合使用，它们可以引导整个环境，包括应用服务器、属性文件、数据库脚本等。

# javascript - scrollHeight + 60 对我不起作用 javascript/jquery

> ID：15493341
> 
> 赞同：0
> 
> 时间：2013-03-19T06:59:33.157
> 
> 标签：javascript, jquery

到目前为止我有这个代码：

```
interestedP.animate({'max-height': (interestedP[0].scrollHeight + 60 + 'px')}, "slow"); 
```

它也可以在没有“px”的情况下工作，但 +60 永远无法解决。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:02:30.213

尝试

```
interestedP.animate({'max-height': (interestedP[0].scrollHeight + 60) + 'px'}, "slow"); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/C7Npf/)

# python - 让 Emacs 使用 rst-mode 编辑 Python 文档字符串

> ID：15493342
> 
> 赞同：13
> 
> 时间：2013-03-19T06:59:32.800
> 
> 标签：python, emacs, restructuredtext

如何让 Emacs`rst-mode`在 Python 文件的文档字符串中使用？我隐约记得在文件的某些区域内可以使用不同的模式，但我不记得它是如何完成的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T07:31:12.140

支持它的 Emacs 包是`mmm-mode`. 确保已安装，然后像这样的代码作为 Emacs 启动的一部分应该这样做：

```
(require 'mmm-mode)
(setq mmm-global-mode 'maybe)
(mmm-add-classes
 '((python-rst
    :submode rst-mode
    :front "^ *[ru]?\"\"\"[^\"]*$"
    :back "^ *\"\"\""
    :include-front t
    :include-back t
    :end-not-begin t)))
(mmm-add-mode-ext-class 'python-mode nil 'python-rst) 
```

我用一些 Python 程序对此进行了测试，它似乎工作正常。

请注意，这将为每个三引号字符串切换到 rst 模式，而不仅仅是函数定义开头的字符串。您可能可以将其限制为仅使用更复杂的前正则表达式的函数定义开头的那些，但我不完全确定如何处理它，因为我认为默认情况下 mmm 模式定义一次匹配一行。

**编辑**：我的原始版本会在单行文档字符串的位置将 Emacs 置于 rst 模式，然后将其保持在该模式直到下一个文档字符串的开始。如果在同一行与文档字符串的开头有另一个双引号，则此版本避免将 Emacs 置于 rst 模式，这仍然不完美，但应该更接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T08:11:18.447

您会发现另一个设置来检查文档字符串本身是否是一个语句。这避免了在其他heredoc中拥有第一名。

[https://github.com/jorgenschaefer/elpy/issues/498](https://github.com/jorgenschaefer/elpy/issues/498)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T12:16:26.097

就编辑目的而言，缩小到文档字符串并激活 rst-mode 应该是要走的路。

python-mode el 提供了 py--docstring-p，它可能很容易适应 python.el

比起将整个事情绑定到某个空闲计时器，会进行缩小/切换。

保留一些表达式，它关闭 rst 模式并扩大。

# javascript - 当值由 javascript 设置时，.Net Page.IsValid 总是返回 false

> ID：15493349
> 
> 赞同：0
> 
> 时间：2013-03-19T06:59:57.747
> 
> 标签：javascript, jquery, asp.net

在我的 .Net 页面中，我在文本框上使用验证。在某些文本框中，我通过 javascript 设置值。但是当我点击提交按钮时，它会安全地传递给浏览器，但在服务器端 Page.IsValid 为假，当浏览器再次出现响应时，验证器错误消息开始显示。我不知道这里有什么问题。

**用于设置 TextBox 值**

```
$("input[id*='txtPPIAPrice']").val('0');
$("input[id*='txtPPICPrice']").val('0') ;
$("input[id*='txtPPFAPrice']").val('0');
$("input[id*='txtPPFCPrice']").val('0'); 
```

**在服务器端使用此检查**

```
if (Page.IsValid)
{
    //My code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:20:04.167

> 如果网页中有必填字段验证器，则需要将 validateaiongroup 属性设置为每个RequiredValidator。

然后您的代码将如下所示

```
Page.Validate("validategroupname");
if(Page.IsValid == true){
 // Put your code here
} 
```

我希望它对你有帮助。

# android - 在android中如何用三个按钮创建页脚？

> ID：15493354
> 
> 赞同：1
> 
> 时间：2013-03-19T07:00:31.500
> 
> 标签：android, android-layout

伙计们，我需要用三个按钮制作一个页脚，这样左右按钮应该从左右占据屏幕的 25%，而居中的图像应该占据屏幕的 50%，并且它们之间不留任何空间.

如果有人可以提供帮助，那就太好了。

我想发布所需页脚的图像，但我不允许共享图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:45:36.700

这里是：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

    <LinearLayout android:layout_width="match_parent" android:layout_height="wrap_content" android:weightSum="4" android:layout_alignParentBottom="true">
        <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" android:text="hello"/>
        <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="2" android:text="hello"/>
        <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" android:text="hello"/>
    </LinearLayout>
    </RelativeLayout> 
```

这是它的外观：

![在此处输入图像描述](../Images/97d6b0a0468033306af5013503b23a15.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T08:02:10.940

如果您想在所有活动中自定义底栏，那么您需要在所有活动中包含布局。我认为下面的代码可能会对您有所帮助：

1.  在布局目录中创建bottomlayout.xml 并在其中复制以下代码并使用适当的图像。

    ```
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:background="@android:color:black"
        android:gravity="center_horizontal" >

        <ImageButton
            android:id="@+id/btn_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="2dp"
            android:background="@drawable/img1" />

        <ImageButton
            android:id="@+id/btn_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/img2" />

        <ImageButton
            android:id="@+id/btn_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:layout_marginTop="2dp"
            android:background="@drawable/img3" />

    </LinearLayout> 
    ```

2.  在底部的所有活动中包含上述 xml，例如：

    < LinearLayout android:id="@+id/bottombar" android:layout_width="wrap_content" android:layout_height="50dp" android:layout_alignParentBottom="true" android:layout_alignParentLeft="true" android:layout_alignParentRight="true" android:背景="@android:color:black" android:gravity="center_horizo​​ntal" >

3.  在 .xml 布局文件中包含 bottonlayout 的所有 .Java 文件中编写下面的代码。

    ```
    ImageButton btn1=(ImageButton)findViewById(R.id.btn_1);
    ImageButton btn2=(ImageButton)findViewById(R.id.btn_2);
    ImageButton btn3=(ImageButton)findViewById(R.id.btn_3);

    btn1.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            // Your Code Here....
        }
    });

    btn2.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            // Your Code Here....
        }
    });

    btn3.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            // Your Code Here....
        }
    }); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:56:15.223

编写布局 XML 如下。

```
 <LinearLayout  
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="4">
    <Button android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:text="25%"
    android:layout_weight="1"/>
    <Button android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:text="50%"
    android:layout_weight="2"/>
    <Button android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:text="25%"
    android:layout_weight="1"/>
</LinearLayout> 
```

线性布局应放置在相对布局中，以使其与父底部对齐。

```
 android:layout_alignParentBottom="true" 
```

所以你的最终布局将类似于以下

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     >
    <!-- Root element should wrap to parent size. -->

    <!-- Your view xml codes. -->

    <!--Bottom bar layout should be in root element. Parent should be Relative layout so that we can always align to parent bottom-->
    <LinearLayout  
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:weightSum="4">"
        <Button android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:text="25%"
        android:layout_weight="1"/>
        <Button android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:text="50%"
        android:layout_weight="2"/>
        <Button android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:text="25%"
        android:layout_weight="1"/>
    </LinearLayout>

</RelativeLayout> 
```

希望这能解决您的问题。

# servlets - JQGrid 中的按钮

> ID：15493358
> 
> 赞同：0
> 
> 时间：2013-03-19T07:00:54.770
> 
> 标签：servlets, jqgrid

我在 JQGrid 中添加了多个按钮。我想在单击每个按钮时显示不同的数据集。所以如何在 Servlet 中检查单击了哪个按钮。

```
 //jsp page

      .navButtonAdd('#page',{
                        caption:"By Source IP",
                        buttonicon: "ui-icon-calculator",
                        onClickButton: function(){
                            $('#jQGrid').jqGrid('getGridParam',     
              {postData:{KeyName:"IP"}}).trigger('JQGridServlet',[{page:1}]);   
                            },
                        id:"IP",
                        }

 //Servlet Page
 String KeyName=request.getParameter("KeyName");
            System.out.println(KeyName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:18:04.090

`postData`在您的按钮事件集中，在 jqGrid 中设置一个参数并要求它重新加载。这个额外的参数会告诉您的服务器端代码更改数据集。

例如：按钮事件代码：

```
...
$('#gridName').jqGrid('setGridParam', { postData: { KeyName: KeyValue}}).trigger('reloadGrid', [{ page: 1}]);
.... 
```

控制器/小服务程序：

```
public ActionResult SearchGetGridData(string sidx, string sord, int page, int rows, bool _search, string filters, string KeyName)
{
 if (KeyName == someValue { //change datasets, etc... 
```

# android - 如何在 Android 中转换这种类型的日期格式

> ID：15493360
> 
> 赞同：0
> 
> 时间：2013-03-19T07:01:04.120
> 
> 标签：android, date

我收到这种类型的 Date`Wed, 14 Nov 2012 19:26:23 +0000`作为`String`.

我曾尝试将其转换为`Wed, 14 Nov 2012`使用不同的方式，例如使用`SimpleDateFormat`更改日期格式的类型，但出现解析错误。

我将如何转换这种类型，以便`Date`在转换后，我只会
得到.`Wed, 14 Nov 2012``Date`

谢谢。

我尝试过的代码：

```
String stringDate="Wed, 14 Nov 2012 19:26:23 +0000";
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/mm/dd HH:MM:SS");
Date parseDate = sdf.parse(stringDate);
String conDateinString = sdf.format(date1);
String lastDate=DateFormat.format("EEE, dd MMM yyyy", new Date(Long.parseLong(conDateinString))).toString(); 
```

stringDate--我要解析的第一个日期。
conDateinString -- 以字符串格式转换的日期。
lastDate -- 我试图获取的最后日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:10:19.593

使用这种格式`SimpleDateFormat`：

```
String t = "Wed, 14 Nov 2012 19:26:23 +0000";

// To parse input string
SimpleDateFormat from = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss +0000", Locale.US);

// To format output string
SimpleDateFormat to = new SimpleDateFormat("EEE, dd MMM yyyy", Locale.US);

System.out.println(to.format(from.parse(t))); 
```

此代码的输出将是：

```
Wed, 14 Nov 2012 
```

# android - 来自图像的连续实时流

> ID：15493377
> 
> 赞同：1
> 
> 时间：2013-03-19T07:02:02.133
> 
> 标签：android, ios, encoding, video-streaming, video-codecs

我想做一个应用程序，它是由相机连续生成的实时流（HTTP Live Streaming）图像（例如保存到磁盘的 tiff 文件）。首先，我想用 FFMPEG（[保持 FFMPEG 运行并等待新的图像文件进行编码和流式传输](https://stackoverflow.com/questions/15383560/keep-ffmpeg-running-and-waiting-for-new-image-files-to-encode-and-stream)）来做到这一点，不幸的是，这是不可能的，因为 FFMPEG 一旦遍历了转换位置中的所有可用图像并且不会继续等待，它将停止我的相机生成新图像。

我现在正在考虑编写自己的应用程序来执行此操作。请您推荐实现此目的的最佳方法，使用的编码器（x264？），分段器等，或任何常用的编解码器/协议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:32:25.313

如果您需要流式传输，为什么不试一试 VLC。

VLC 可以很好地流式传输，我在 Windows 平台上做过，并且已经跨平台使用它。

# c# - DataAdapter 更新字段

> ID：15493378
> 
> 赞同：1
> 
> 时间：2013-03-19T07:02:02.943
> 
> 标签：c#, asp.net, sql

我正在尝试从 gridview 更新我的表格，下面的代码显示我没有错误但我的表格没有更新，我的错误是什么想法？

**新更新**了页面加载，加载语句有效，我能够将数据填充到我的 datagridview 中，但我仍然无法通过单击按钮更新我的数据库。问题仍然存在，没有错误抛出。但没有更新

```
 void LoadStatement()
    {
        using (SqlConnection conn = new SqlConnection(sqlConn))
        {
            conn.Open();

            using (SqlDataAdapter da = new SqlDataAdapter(sqlSelect, sqlConn))
            {
                dtbl = new DataTable();
                da.Fill(dtbl);

                dgv1.DataSource = dtbl;
            }
        }

    }

  private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            conn.Open();
            string updCommand = "Update Salary set Salary = "+ds.Tables[0].Rows[0]["Salary"].ToString()+"";
            SqlCommand sqlcmdUpd = new SqlCommand(updCommand, conn);

            da.UpdateCommand = sqlcmdUpd;

            sqlcmdUpd.ExecuteNonQuery();    

            SqlCommandBuilder cmb = new SqlCommandBuilder(da);

            da.Update(ds,sTable);

            lblErrorMsg.Text = "Updated";

        }
        catch (Exception ex)
        {
            lblErrorMsg.Text = ex.Message.ToString();
        }
        finally
        {
            if (conn.State == ConnectionState.Open)
            {
                conn.Close();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:41:01.547

您只使用 1 张桌子吗？

我认为您不需要所有这些代码。尝试这个：

```
try
{
    conn.Open();
    SqlCommandBuilder cmb = new SqlCommandBuilder(da);

    da.Update(ds,sTable);

    lblErrorMsg.Text = "Updated";
} 
```

DataGrid 上的任何更改都应正确保存到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:13:02.323

**永远不要这样编码！**

始终使用[`parameterized queries`](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html). 此代码对[`SQL Injection`](http://en.wikipedia.org/wiki/SQL_injection)攻击开放。

```
string updCommand = "Update Salary set Salary = @Salary";
SqlCommand sqlcmdUpd = new SqlCommand(updCommand, conn);
sqlcmdUpd.Parameters.AddWithValue("@Salary", ds.Tables[0].Rows[0]["Salary"].ToString());
sqlcmdUpd.ExecuteNonQuery(); 
```

这段代码看起来不错。`ds.Tables[0].Rows[0]["Salary"].ToString()`再次检查您的变量，请调试您的代码并查看所有变量是否是您想要的。

尝试使用您的`DataAdapter`喜欢；

```
DataAdapter da = new DataAdapter(sqlcmdUpd);
DataTable dt = new DataTable();
da.Fill(dt); 
```

# javascript - javascript vs ruby 图像解析速度

> ID：15493379
> 
> 赞同：1
> 
> 时间：2013-03-19T07:02:18.327
> 
> 标签：javascript, ruby-on-rails, ruby, performance

使用 javascript 与使用 ruby​​ 解析网页中的图像 url 之间是否存在显着的速度差异？

对于 javascript，我会查找所有 img 标签，然后使用 ajax 将数据发送到后端。

对于红宝石，我只会使用 nokogiri。

# mysql - 我的架构中有 300 多个表，我需要运行截断命令

> ID：15493383
> 
> 赞同：0
> 
> 时间：2013-03-19T07:02:37.567
> 
> 标签：mysql

我的架构中有 300 多个表，我需要运行截断命令吗？这怎么可能我需要知道所有外键并按照依赖关系的顺序对表进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:04:20.613

```
mysql -Nse 'show tables' DATABASE_NAME | while read table; do mysql -e "truncate table $table" DATABASE_NAME; done 
```

# selenium - 如何在黄瓜测试用例中使用 selenium web 驱动程序安装 firefox 的附加组件

> ID：15493392
> 
> 赞同：4
> 
> 时间：2013-03-19T07:03:04.273
> 
> 标签：selenium, cucumber, capybara

我必须在需要安装 firefox-add-on 的地方编写脚本，命名为“aqqin”。我该怎么做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:26:57.130

您可以通过创建自定义配置文件并将其传递给驱动程序来添加插件。

```
FirefoxProfile profile = new FirefoxProfile();
File extension = new File("<path>"/aqqin.xpi");
profile.addExtension(extension);

WebDriver driver = new FirefoxDriver(profile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:36:23.690

带有红宝石代码的硒：

```
RSpec.configure do |config|
    profile = Selenium::WebDriver::Firefox::Profile.new
    profile.assume_untrusted_certificate_issuer = true
    #profile.add_extension "/usr/lib/firefox-addons/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}"
    Capybara.register_driver :selenium do |app|
        Capybara::Selenium::Driver.new(app, {:browser => :firefox, :profile => "default"} )
        #Capybara::Selenium::Driver.new(app, {:browser => :firefox, :profile => profile} )
    end 
end 
```

# java - 如何使用 Selenium WebDriver 在网页上选择 2 个元素中的任何一个？

> ID：15493393
> 
> 赞同：0
> 
> 时间：2013-03-19T07:03:08.090
> 
> 标签：java, selenium

我正在一个可能有也可能没有特定元素的网页上运行测试。程序如下：我填写了表格，然后点击“搜索”按钮。当浏览器打开一个新的 url 时，我需要选择一个 element_1，但如果它不存在我必须选择 element_2。

```
WebElement element = driver.findElement(By.xpath("//....")) || driver.findElement(By.xpath("//..."));
element.click(); 
```

// 这个不行，有没有别的办法？没有try and catch就可以了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:42:33.237

使用 driver.findElement() 会进行隐式等待。因此，即使出现 secondElement - 测试也会等待一段时间。相反，在 WebDriverWait 中使用 findElements() 可能是一个更好的解决方案。

```
 WebDriverWait wait = new WebDriverWait(driver, 10);
    // Wait for one element to be available
    wait.until(new Predicate<WebDriver>() {
        @Override public boolean apply(WebDriver driver) {
            return driver.findElements(By.cssSelector("xpath1")).size() > 0
                    || driver.findElements(By.cssSelector("xpath2")).size() > 0;
        }
    });
    // Get the element
    WebElement e = null;
    if (driver.findElements(By.cssSelector("xpath1")).size() > 0)
        e = driver.findElements(By.cssSelector("xpath1")).get(0);
    else if (driver.findElements(By.cssSelector("xpath2")).size() > 0)
        e = driver.findElements(By.cssSelector("xpath1")).get(0);

    if (e != null)
        e.click(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T07:11:14.427

您可以尝试这样的事情，是的，它正在使用 try 和 catch 块，但这是一个将遵循的过程，因为除了 isDisplayed()、isEnabled() 和 isSelected() 之外没有特殊的方法 isPresent() 并且出了什么问题无论如何都用try和catch块处理异常？

```
boolean isElement1Present = true;

try{       
      driver.findElement(By.xpath("xpathExpression1"));    
}catch (NoSuchElementException e){
    isElement1Present = false;
}

if(isElement1Present == false)
     driver.findElement(By.xpath("xpathExpression2")); 
```

或者使用下面的代码可以避免 try 和 catch 块。

```
List<WebElement> elements = driver.findElements(By.xpath("xpathExpression1"));   

if (elements.size() == 0) {
    System.out.println("Element is not present"); 
} else {
    System.out.println("Element is present");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:06:50.543

这可能会帮助你

```
 WebElement element = null;

try{
    element = driver.findElement(By.xpath("//path1/...."));
}catch(NoSuchElementException ex){
    try{
        element = driver.findElement(By.xpath("//path2/...."));
    }catch(NoSuchElementException ex2){}
} 

if(element!=null) element.click(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T01:16:06.607

实际上没有明确的方法。您可以使用`WATIR`. 如果您对`Ruby`. 否则，您只需尝试并抓住。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-23T20:48:17.497

我认为这里更好的方法是使用 CSS3 选择器，它可以[使用逗号对选择器进行分组](http://www.w3.org/TR/css3-selectors/#grouping)：

为蟒蛇道歉：

```
element = WebDriverWait(driver, 2).until(
    EC.presence_of_element_located((By.CSS_SELECTOR, "tr.entry , div.not-found"))
) 
```

假设网页将显示一个`<div class="not-found">`以防万一没有找到。或显示结果`<tr class="entry">`

# samba - 如何在 twiki 中链接 samba 文件链接？

> ID：15493395
> 
> 赞同：0
> 
> 时间：2013-03-19T07:03:17.523
> 
> 标签：samba, twiki

我有一个使用 samba 共享文件的服务器。假设 ip 地址是 1.1.1.1，所以我们可以使用 \1.1.1.1\ 在这个 samba 服务器中找到文件现在我已经构建了一个 twiki 系统。我想在 twiki 主题中创建一些链接以直接链接到那些samba 服务器上的文件，但似乎 [[\1.1.1.1\somefile]] 找不到文件。那么我该如何编写这些 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T19:10:12.217

您需要挂载共享或通过 Python 中的[pysmb](http://miketeo.net/wp/index.php/projects/pysmb)等 API 访问共享。虽然这不太可能，但如果您使用的语言知道 SMB 协议，您可以通过链接直接使用它。

# c# - 自定义 [Compare()] 属性以通过数据注释比较类的两个属性

> ID：15493396
> 
> 赞同：0
> 
> 时间：2013-03-19T07:03:24.950
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, attributes, data-annotations

我想推出几个不同的客户`[Compare()]`属性以在 MVC4 应用程序中使用。我遇到的问题是`public string OtherPropertyDisplayName { get; internal set; }`微软实施的部分。他们如何获取信息以填充该字段？我假设它是通过反射......而且我的反射 foo 很弱所以有人对此有指示吗？

我之前已经制作了自己的自定义属性，但从来没有需要了解“其他”领域的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:25:58.510

这是您的操作方法：[使用数据注释进行属性匹配](http://www.dotnetguy.co.uk/post/2010/01/09/property-matching-with-data-annotations/)

本质上，它们定义`Match`了属性而不是`Compare`，但这只是同一事物的不同词，只需使用该示例来查看它们的作用并在您的情况下做同样的事情。这一点都不难。

祝你好运，如果这有帮助，请告诉我。

# javascript - 如何使用 javascript 设置 http 标头

> ID：15493399
> 
> 赞同：0
> 
> 时间：2013-03-19T07:03:28.270
> 
> 标签：javascript, xmlhttprequest

我想从 api 获取数据。现在输出为文本。api不接受标准身份验证，标头必须包含2个字段用户名=12345密码=12345有人可以发布一个简单的javascript来做到这一点吗？

# iphone - 读取视频文件时更新 UI

> ID：15493405
> 
> 赞同：0
> 
> 时间：2013-03-19T07:03:39.223
> 
> 标签：iphone, ios, objective-c, ios5, ios4

我正在阅读视频文件并对其进行处理。它的代码基于[this](https://stackoverflow.com/questions/13992251/ios-read-a-video-file-frame-by-frame-image-processing-then-save-as-new-video) question中的代码。

```
 AVURLAsset * asset = [AVURLAsset URLAssetWithURL:url options:nil];
 [asset loadValuesAsynchronouslyForKeys:[NSArray arrayWithObject:@"tracks"] completionHandler:
 ^{
     dispatch_async(dispatch_get_main_queue(),
                    ^{
                        AVAssetTrack * videoTrack = nil;
                        NSArray * tracks = [asset tracksWithMediaType:AVMediaTypeVideo];
                        if ([tracks count] == 1)
                        {
                            //some code here

                            [movieReader startReading];

                            while ([movieReader status] == AVAssetReaderStatusReading)
                            {
                             // reading the video code here
                            }
                         }
                      });
   }); 
```

我需要在处理每个帧时更新 UI，以指示处理帧的进度。我在 while 循环内的 UI 上插入了一个按钮，但是，只有在整个视频处理完成后，UI 才会更新。事实上，在完成处理程序块中执行的任何 UI 更新都只会在整个处理之后发生。关于如何做的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:46:06.687

您的主线程被该`while`循环阻塞。您需要做的是`NSTimer`在主线程的运行循环上安排一次重复（例如，每 1/60 秒），其操作方法调用`[movieReader status]`并更新进度。

# iphone - 将图像保存在 NSUserDefault 中并进入其他 ViewController

> ID：15493409
> 
> 赞同：1
> 
> 时间：2013-03-19T07:03:59.063
> 
> 标签：iphone, ios, objective-c, xcode

我在我的第一个视图控制器中将图像保存在 nsuserdefaulf 中，我从 imagepicker 获取图像

```
[[NSUserDefaults standardUserDefaults] setObject:UIImagePNGRepresentation(image)            forKey:@"image"]; 
```

我在下一个 viewController 中得到这个图像，就像这样

```
 NSData* imageData = [[NSUserDefaults standardUserDefaults] objectForKey:@"image"];
 UIImage* image = [UIImage imageWithData:imageData]; 
```

但是当我传递此图像以供使用时，它给了我错误，但是当我使用这样的图像时，它就起作用了。（ bg.png 保存在项目中）

```
UIImage *image = [UIImage imageNamed:@"bg.png"]; 
```

我的代码有什么问题。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:20:48.280

Zohaib，您的代码中存在转换问题。
首先在“NSDATA”中转换你的图像，然后添加到“NSUserDefaults”

> NSData *data = [NSData dataWithData:UIImageJPEGRepresentation(image);

然后你可以取回数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:17:25.253

当您从选择器中选择图像时，将调用此方法

所以，`UIImage *imgGotFromPicker;`在 .h 文件中声明这个

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {

    imgGotFromPicker = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

推送时将此图像发送到其他视图控制器。

在第二个视图控制器中：

```
@property(nonatomic, strong) UIImage *imgfromView;  in .h

@synthesize imgfromView = _imgfromView;  in .m 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T06:16:29.063

要保存图像并在任何其他视图中获取它，您可以使用以下方法：

保存方式：

```
[[NSUserDefaults standardUserDefaults] setObject:UIImagePNGRepresentation(image); 
```

检索方式：

```
NSData* imageData = [[NSUserDefaults standardUserDefaults] objectForKey:key];
UIImage* image = [UIImage imageWithData:imageData]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:11:37.347

如果您的应用中有此图像，您是否应该保存图像名称？店铺 ：

```
[[NSUserDefaults standardUserDefaults] setObject:@"bg.png"forKey:@"image"]; 
```

然后在其他视图中使用此代码

读

```
UIImage *image = [UIImage imageNamed:[myUserDefaults valueForKey: @"image"]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T07:37:47.330

您将 NSData 直接保存到 NSUserDefaults 中。这不是执行此操作的正确过程。您需要使用 NSKeyedArchiver 和 NSKeyedUnarchiver 从 NSUserDefaults 保存和检索数据。所以请试试这个：

[NSKeyedArchiver 和 NSKeyedUnarchiver](https://stackoverflow.com/questions/471830/why-nsuserdefaults-failed-to-save-nsmutabledictionary-in-iphone-sdk)

此链接将帮助您保存和检索数据。您还需要实现这两种方法：

```
-(void)encodeWithCoder:(NSCoder *)encoder
{

}

-(id)initWithCoder:(NSCoder *)decoder
 {

  return self;
} 
```

# mysql - 如何使用我的 sql 表中的连接从两个表中获取数据

> ID：15493411
> 
> 赞同：-5
> 
> 时间：2013-03-19T07:04:11.480
> 
> 标签：mysql, join

我想从两个表中获取数据`join`，我的表是

**myLearning**具有以下给定字段：

> 用户名、内容 ID、添加日期、状态

和**目录**表

> 类别、描述、标题、content_ID

我需要从两个表中以这种格式输出

> user_Name,description,title 其中 content_ID =?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:06:05.937

```
SELECT  a.user_name, b.description, b.title
FROM    myLearning a
        INNER JOIN catalog b
            ON a.content_ID = b.content_ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:06:30.823

实际上非常基本：

```
select * from myLearning, catalog where myLearning.content_ID = catalog.content_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:08:04.570

试试这个：

```
 SELECT ml.user_name,cat.description,cat.title 
  FROM mylearning as ml
  LEFT JOIN catalog cat ON cat.content_id=ml.content_id 
```

希望它会有所帮助！

# azure-storage - Windows Azure CDN 不提供 gzip 压缩的资产，即使在两次上传资产后，一个是 gzip 压缩的，另一个是纯压缩的

> ID：15493417
> 
> 赞同：2
> 
> 时间：2013-03-19T07:04:55.197
> 
> 标签：azure-storage, cdn, azure-cdn

我在stackoverflow上遇到了很多关于windows azure CDN无法提供gzip压缩资产的问题。我还浏览了某些链接，这些链接说可以做到。我很困惑，所以想在这里发布一个问题。

我有一个 Rails 应用程序，它从 Windows Azure CDN 提供所有资产。一切正常，但 CDN 无法提供压缩内容。这是一个链接[，该链接](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/e2fac591-bba0-49e1-9adf-988525e22cbc/)建议将文件上传两次，一个是普通的，另一个是 gzip 压缩的，作为解决此问题的方法。我按照说明进行了操作。以下是链接的内容：

```
 The feature in our backlog (as Jason Sherron points out) is the ability of the
    Windows Azure CDN to autonomously create a compressed version of your content to    serve 
    in response to a request for gzip encoding. Unless and until we get to implement that, 
    you'll have to upload content twice, once in each desire encoding. 
```

如果我不在 CDN 上托管，标头都设置得很好并且效果很好。有没有人有解决这个问题的方法？这可以做到吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T00:30:37.210

您需要将文件的 Content-Encoding 设置为 gzip

此外，这是一个重要的问题，您不能提供带有 .gz 扩展名的 gzip 文件，因为 Chrome 和 Firefox 假定它是一个常规的 gzip 下载文件并且不解压缩它。

因此，您需要更改扩展名，例如脚本文件的 .jsgzip 而不是 .js.gz

# ios - IOS视频通话

> ID：15493421
> 
> 赞同：0
> 
> 时间：2013-03-19T07:05:13.717
> 
> 标签：ios, video, call

如何从应用程序进行视频通话。

有没有示例或教程，

我正在努力解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:09:14.130

对于视频通话，有一个可用的开源库。这被称为[linphone](https://www.linphone.org/eng/download/git.html)。这么棒的图书馆。我也在我们的一个项目中使用了这个库，它工作得很好。

希望这会帮助你。

祝一切顺利 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-27T15:10:58.460

我刚刚开发了一个 ios 项目，通过 WebRTC 和 Firebase 进行视频通话。

包括在模拟器上测试和在真机上运行。

[https://github.com/congtung10t2/VideoCallWebRTCFirebase](https://github.com/congtung10t2/VideoCallWebRTCFirebase)

# sql-server - 如何修复或解决违反 PRIMARY KEY 约束的问题

> ID：15493424
> 
> 赞同：0
> 
> 时间：2013-03-19T07:05:28.800
> 
> 标签：sql-server

我正在开发通过 SQL Server 2012 的 ac# 程序。我想建立患者状态变化的历史记录。也就是说，每次患者取消/更改任何医疗保健提供者时，都必须更新它。

我想用患者编号的主键保留这些更改的历史记录。因此，我的问题是： **有什么办法可以解决或绕过违反 PK 的问题？**

> 违反主键约束“PK_patient_member_status”。无法在对象“dbo.member_patient_member_status_history”中插入重复键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:08:38.567

您不能输入重复的主键，而是**为 Patient History 创建一个新表**，外键作为患者的键。该表将具有`1:M`（一对多关系）。您将能够输入多个历史记录或跟踪特定记录的更改。

```
That table will keep the changed fields for example:

Patient Table:

ID       NAME          Address
1        ABC             XYZ
2        DEF             PQR

Patient History 
ID       NAME          ADDRESS       FKPatientID
1        ABC            XYZ1           1
2        ABC2           YXZ2           1 
```

在上面的历史表中，它正在跟踪对主表的更改。您还可以记录`UpdatedAt`(DateTime) 和`UpdatedBy`, (UserID)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:08:11.573

一个主键只能有一条记录。要修复，要么放松约束，要么扩大约束，通过向主键添加更多列。

带有患者编号主键的历史日志听起来像是无效的数据库设计。历史日志不能真正有主键，因为你找不到一个列或组合必须是唯一的。在患者编号或插入日期上使用普通键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:10:45.347

听起来你想做的是有一个状态变化的审计表。我建议按照设计，因为一个人可以进行多项更改，您不要将他们的患者编号作为此审核表中的主键。

您可能会考虑将具有主键的单独审计表作为标识列（尽管在极端情况下您可能希望密切关注记录的增长/数量）或 UNIQUEIDENTIFIER 列，因此主键是 GUID。

由于通过查询获取特定患者的状态更改非常重要，因此您可能需要考虑在审计/状态更改表中针对患者编号定义[索引。](http://msdn.microsoft.com/en-us/library/ms189280.aspx)

HTH，弥敦道

# java - 如何重命名 Java .class 文件？

> ID：15493425
> 
> 赞同：2
> 
> 时间：2013-03-19T07:05:33.053
> 
> 标签：java, android, decompiling

我正在调试一个使用预编译 jar 的程序。我想记录对某个类中函数的调用。思路是将原类文件 Xxx.class 重命名为 Xxx0.class 并将原类名定义为：

```
class Xxx extends Xxx0 {
    void func() {
        Log.d(...);
        super.func();
    }
} 
```

有任何想法吗？

（我确实尝试过反编译器：反编译代码中有奇怪的控制结构，反编译器可能不会为该程序生成正确的代码。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:09:29.780

不能只重命名一个类文件，因为不仅是类名在加载时用于计算类文件名，而且类名也存储在类文件中，而且必须匹配请求的课程。

因此，如果你想重命名一个类，你需要在源代码中这样做并重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:55:15.660

我确实重命名了类文件，但这是一个漫长而无聊的故事。就我而言，这是一个 Android 应用程序，您可能需要将您的类转换为 Android 应用程序以重复我所做的 :)。顺序是：

1.  使用 apktool 反编译 apk。你会得到你的子目录*yourApkName* /smali/ *packageName* / 那里有你的类的反编译源。
2.  将类及其子类复制到一个新文件中，例如*Stuff.smali*变为*Xtuff.smali*并且*Stuff$Useless.smali*变为*Xtuff$Useless.smali*
3.  在文本编辑器中打开这些新文件，我使用了 gedit。
4.  替换那里所有出现的完整类路径，例如 Lfoo/bar/baz/qux/Stuff 变为 Lfoo/bar/baz/qux/Xtuff；最好查看您正在执行的每个替换，但很可能您将替换所有替换（注意：您确实替换了 Lfoo/bar/baz/qux/Stuff$Data 之类的字符串，但不要替换 Lfoo/bar/baz 之类的字符串/qux/StuffData)
5.  用“Xtuff”替换所有（或不是所有）类名“Stuff”的出现；在这种情况下，您很可能不会替换所有匹配项。在此步骤中，您需要了解自己在做什么。
6.  （保存原始 apk 并）使用 apktool 重建 apk，使用 -f 标志：`apktool b -f AppName AppName.apk`
7.  从新的 apk 中提取 classes.dex（在第 6 步获得）；我使用了午夜指挥官，它将压缩档案（包括 dex 和 jar）显示为目录
8.  将 dex 转换为 jar: `~/Downloads/dex2jar-0.0.9.13/d2j-jar2dex.sh classes.jar`，得到 classes-dex2jar.jar
9.  将新的（重命名的）类提取到 Eclipse 项目（Xtuff.class、Xtuff$Useless 等），从顶级重命名的类派生类（`class Stuff extends Xtuff`），编译，得到新的 Stuff.class。（如果您现在可以调试，则可以开始调试并跳过以下步骤。）
10.  将classes-dex2jar.jar复制到classes-X.jar，将第9步得到的类文件（包括嵌套类）添加到classes-X.jar
11.  将 classes-X.jar 转换为 classes.dex
12.  把这个新的 classes.dex 放到原来的 apk
13.  签署apk：`jarsigner -verbose -keystore ./my.keystore ./AppName.apk mykey`
14.  删除原始应用程序，安装修改后的apk。

很明显，专用工具会使这个长序列更容易执行。

PS 当然，这种方法不适用于生产代码。

PPS 这不是一个通用案例：如果您的类包含静态工厂方法，则所需的修改变得更加棘手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:21:28.160

如果要重命名没有源 java 文件的类 ant，请执行以下步骤：

**i) 首先在 jd（java 反编译器）中打开文件，然后保存（Ctrl+S）源文件。
ii）重命名java文件（F2）以及java文件中的类名。
iii) 再次将 java 文件（使用任何 java 编译器）编译为 .class 文件。** 

这将解决您的问题。
试试这个，如果有任何问题，请告诉我。

**注意：**如果您遇到 java 反编译器的问题，请尝试使用其他版本的 JD。
[请访问这里下载最新的京东](http://java.decompiler.free.fr/?q=jdgui)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:41:08.193

Java 类文件不应随意重命名。当您这样做时，您编辑的类文件将由于错误而永远无法再次使用。这是因为类文件的名称对应于您的 java 类名称。

有了它，您需要做的就是在 Eclipse 中使用 .class 查看器，复制 .class 文件中显示的 java 代码。制作另一个 .java 文件并用您想要的文件名重命名类名。编译您的.java 文件并找到相应的.class。

现在，您已经成功重命名了 .class。

但是，也有缺点。只需确保将更改反映到其他受影响的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T08:45:10.727

我会使用[ASM](http://asm.ow2.org/)之类的字节码操作库并更改[类访问者](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/ClassVisitor.html#visit%28int,%20int,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)中的名称。

*但是，我不确定您是否仍需要更新对其他类型中的类型的引用，即使您提供了自己的替代方法 - 合成访问器是否会转换为子类型？*

如果目的是记录日志，则没有比替换类型更复杂的方法：使用[AOP](http://eclipse.org/aspectj/)或上面的字节码操作来检测方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T07:14:29.920

您无法更改 .class 文件的名称，因为它与 java 的公共类链接（相同）。仍然如果您更改了 .class 文件的名称，那么您还需要更改类的名称，否则会导致错误。

一旦编译完成（.java 到 .class），它就会转换为字节码，因此如果您更改了类文件的名称，您将无法直接更改字节码，但您可以使用反编译器（反射）再次将您的 .class 文件转换为 .java )，然后将公共类名更改为更改后的文件名，再次构建并使用它。

您可以获得许多可用的反编译器，它们可以轻松地将 .class 转换为 .java，并且 80%​​ 相同。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-20T06:57:27.030

这是面向方面编程的经典任务。例如，请参阅[面向方面的 Android 开发 - 工具集成](http://deansserver.co.uk/~dean/2011/07/18/aspect-oriented-android-development-tool-integration/)。

# html - 在 html 页面中添加字符集

> ID：15493427
> 
> 赞同：0
> 
> 时间：2013-03-19T07:05:42.663
> 
> 标签：html

我正在尝试创建一个 html 页面，我想在该页面上显示法语字符集中的一些字符：

> 小写：à â æ çé è ê î ô œ ù û
> 大写：À Â É È

我不确定如何将整个字符集添加到我的 html 代码中。到目前为止，我还没有在网络上找到任何易于理解的资源。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:07:24.977

我很确定将以下内容添加到您`<head>`将启用正确显示您所追求的字符集：

```
<meta charset='utf-8'> 
```

或者

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

对于差异（或缺乏差异），请参阅此 SO question an answer（注意：HTML5 doctype）：
[<meta charset="utf-8"> vs <meta http-equiv="Content-Type">](https://stackoverflow.com/questions/4696499/meta-charset-utf-8-vs-meta-http-equiv-content-type)

**例子：**

```
<html>
    <head>
        <!-- Head content -->

        <meta charset='utf-8'>

        <!-- More head content -->
    </head>
    <body>
        <p>Your content here</p>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T09:41:10.957

你是对的，但是让我指出一个事实，那就是使用 HTTP 声明总是更可取的，因为它们是具有最高优先级的声明。这意味着同时拥有 HTTP 标头和文档来服务 Content-type（使用 Pragma 或 Meta 指令）只是浪费字节。

欲了解更多信息，请阅读此处。 [http://www.w3.org/International/questions/qa-html-encoding-declarations](http://www.w3.org/International/questions/qa-html-encoding-declarations)

# ruby-on-rails - 关于编写控制器动作测试的问题

> ID：15493428
> 
> 赞同：0
> 
> 时间：2013-03-19T07:05:45.283
> 
> 标签：ruby-on-rails, testing

我的会话控制器

```
def create
    auth = request.env["omniauth.auth"]
    person=Person.find_by_provider_and_uid(auth.provider,auth.uid) || Person.create_with_omniauth(auth)
    session[:user_id] = person.id
    redirect_to root_path
  end

  def failure
    redirect_to signin_path , alert: "Authentication failed, please try again." 
  end 
```

我在 session_controller_test.rb 中写了一个测试失败动作的测试

```
 it "failure should redirect to signin_path" do
     get :failure
     assert_redirected_to :action => 'new'   
     assert_response :redirect 
 end 
```

但是 simplecov 代码覆盖工具不接受这个测试成功。Simplecov 将此失败操作显示为缺少测试。如何为**故障**操作编写控制器测试。没有人对此提出任何想法吗？下图是覆盖率报告的屏幕截图。

![在此处输入图像描述](../Images/f9d8c0d7023b76dd4f998049e9d7b5dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:37:42.370

**尝试在assert_redirect_to**语句中指定控制器名称（希望是**会话），如下所示。**

 **```
assert_redirected_to :action => "new", :controller => "sessions" 
```**

# iphone - 如何在 cocos2d-iphone 中的一段时间后停止动画？

> ID：15493430
> 
> 赞同：0
> 
> 时间：2013-03-19T07:06:01.357
> 
> 标签：iphone, animation, cocos2d-iphone

代码 ：：

```
if (CGRectIntersectsRect(food.sprite.boundingBox, playerRect)) {
    [food.sprite stopAllActions]; 

    [walkAnimFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:

    [NSString stringWithFormat:@"newpackman2.png", 0]]];

    [walkAnimFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:

    [NSString stringWithFormat:@"newpackman3.png", 1]]];

    walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.2f];

    self.walkAction = [CCRepeatForever actionWithAction: [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];

    self.walkAction.tag = 1;
    [chef runAction:_walkAction];
} 
```

它工作正常，当对象与厨师相撞但连续运行时它会启动动画。
我想在 3-4 秒后停止动画。
我用过**`[sprite stopActionByTag:1]`**，但它对我不起作用，一旦启动它就不会暂停。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:13:32.997

例如，您可以创建停止所有动画的动作块并调用那里的`stopAllActions`方法

```
CCSprite *sprite = ...;

CCCallBlock *block = [CCCallBlock actionWithBlock:^{
            [sprite stopAllActions];
        }]; 
```

并使用 CCDelayTime 进行一些延迟

```
CCDelayTime *time = [CCDelayTime actionWithDuration:4];

[sprite runAction:[CCSequence actions:time, block, nil]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:12:18.983

在 Cocos2d 中，stopAllActions 停止添加到同一节点的所有动作。如果没有停止，则表示您引用了错误的节点。确保在右侧精灵上调用了 stopAllActions。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:14:50.250

```
CCDelayTime *time = [CCDelayTime actionWithDuration:10];// After 10 mile seconds

[sprite runAction:[CCSequence actions:time, block, nil]]; 
```

# android - 找不到从方法 com.android.navigation.MainActivity.onClick 引用的类 'org.restlet.resource.ClientResource'

> ID：15493435
> 
> 赞同：0
> 
> 时间：2013-03-19T07:06:24.667
> 
> 标签：android, build

我在 logcat 窗口中收到此错误。我已在构建路径中添加了所有外部 .jar 文件。但我不确定为什么在运行 android 项目时会抛出这个问题。请让我知道如何解决这个问题。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    text1 = (EditText) findViewById(R.id.editText1);
    text2 = (EditText) findViewById(R.id.editText2);

}
public void onClick(View view) throws Exception {
double lat;
    double lon;
    String url = BASE_URL + "sites/" + SITE_ID + "/stations/" + STATION_MAC + "/";
    ClientResource itsClient = new ClientResource(url);
    itsClient.setChallengeResponse(ChallengeScheme.HTTP_BASIC, USERNAME, PASSWORD);
    // Retrieve and parse the JSON representation
    JsonRepresentation jsonRep = new JsonRepresentation(itsClient.get());
    JSONObject jsonObj = jsonRep.getJsonObject();
    // Output results
    lat=jsonObj.getJSONObject("loc").getDouble("lat");
    lon=jsonObj.getJSONObject("loc").getDouble("lng");
    switch (view.getId()) {
    case R.id.button1:

        String lats = Double.toString(lat);
        text1.setText(lats);
        String lons = Double.toString(lon);
        text2.setText(lons);
        break;
    }
} 
```

谢谢！

# javascript - 如何获取当前函数名称，它被定义为对象的一部分？

> ID：15493437
> 
> 赞同：3
> 
> 时间：2013-03-19T07:06:44.440
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, jquery-plugins

有没有办法获取当前函数名称，它被定义为对象的一部分？我知道有这种方法可以在其独立函数的位置获取函数名称。

**函数定义：**

```
function funName(){} 
```

**获取函数名：**

```
var myName = arguments.callee.toString();
   myName = myName.substr('function '.length);
   myName = myName.substr(0, myName.indexOf('(')); 
```

**但是当它定义为：**

```
myobj.prototype.funcName = function(){} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:07:16.763

当您使用匿名函数时，我想到的唯一想法是使用辅助函数之类的东西，

*   抛出一个虚拟错误
*   抓住它
*   解析`stacktrace`
*   返回一个包含解析信息的对象

如果它用于调试，这可能是合格的，但我会限制在生产环境中使用它，因为我真的不知道是否抛出错误，解析它们。真是个好主意。

*哦，作为一个注释，你不应该使用`arguments.callee`，因为这是不好的做法，甚至在`ECMAScript 5's`严格模式下被禁止
你可以简单地命名你的函数表达式*

[MDN arguments.callee:](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee#Example.3A_Using_arguments.callee_in_an_anonymous_recursive_function)

> 注意：你应该避免使用 arguments.callee() 并且只给每个函数（表达式）一个名字。
> 警告：ECMAScript 第 5 版禁止在严格模式下使用 arguments.callee()。

这就是我第一次尝试时想出的，*我只在最新版本上测试过，`IE` `Firefox` `Chrome`所以你可能需要调整代码*

```
var stackTest = function () {
    console.log(getStack(0).fn); //stackTest
}

function getStack(n) {
    var stacks = [];
    try {
        throw new Error("Test")
    } catch (e) {
        var stack = e.stack.split("\n");
        for (var i = 0, j = stack.length; i < j; i++) {
            var current = stack[i].match(/^(?:\s*at? ?)?(.+?)(?:@| )\(?(.*?):[^\/](\d*):?(\d*)?/)
            if (current == null) {
                continue
            }
            var entry = {
                fn: current[1] || "anonymous",
                file: current[2] || "unknown",
                line: ~~current[3],
                column: ~~current[4],
                time: new Date().getTime()
            }
            if ("getStack" !== entry.fn) stacks.push(entry);
        }
    } finally {
        return "number" === typeof n ? stacks[n] : stacks;
    }
}
stackTest(); 
```

这是一个示例输出，使用对象的原型函数

```
function test() {}
test.prototype.anotherTest = function () {
    console.log(getStack(0).fn);
  //Chrome:      "test.anotherTest"
  //Firefox:     "test.prototype.anotherTest"
  //IE:          "anotherTest"
}
var instance = new test();
instance.anotherTest(); 
```

还有一个关于[JSBin](http://jsbin.com/erowew/2/edit)的例子：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:32:51.767

```
for(var k in myobj.prototype){
    console.log(k) 
```

}

# javascript - 空标签元素和 :visible?

> ID：15493447
> 
> 赞同：3
> 
> 时间：2013-03-19T07:07:38.053
> 
> 标签：javascript, jquery

我正在使用最新的 jquery 版本。(1.9.1)

我有一个空`span`元素：

```
<!DOCTYPE html>
 <html>

    <head>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <meta charset=utf-8 />
        <title>JS Bin</title>
    </head>

    <body> <span class="c"></span>

    </body>
    <script type='text/javascript'>
        alert($(".c:visible").length);
    </script>

</html> 
```

*   Chrome（最新版本）警报`0`
*   FF（最新版本）警报`1`
*   即（8）警报`0`

为什么它不在`1`chrome 上发出警报？该元素未隐藏。

*我可以通过使用过滤器来解决这个问题并吐出所有`!display:none`但想知道我是否做错了什么*

[http://jsbin.com/urihov/2/edit](http://jsbin.com/urihov/2/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:23:56.173

@inser 是对的，span 是一个内联元素，只有在它有内容时才会获得布局，从而获得其内容的宽度和高度——在这种情况下，宽度和高度为 0，因此如果添加此 css 规则，则对

```
.c {
  display: block;
} 
```

您将看到警报现在显示为 1，因为您现在已强制它成为块元素，从而继承其父级的宽度并获得布局。

希望能帮助到你，

干杯

# android - 为什么无法在设备 android 上获取当前位置？

> ID：15493449
> 
> 赞同：0
> 
> 时间：2013-03-19T07:07:49.117
> 
> 标签：android

我编码为：

```
 Criteria cri = new Criteria();
   LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
   String tower = locationManager.getBestProvider(cri, false);
   Location location = locationManager.getLastKnownLocation(tower); 
```

我的设备 android 已打开 wifi、gps（启用互联网），但 location=null。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:14:42.387

试试这个，要获取当前位置，请使用以下代码。

```
 String location;
        LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        if (mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER))
            location = LocationManager.PASSIVE_PROVIDER;
        else
            location = LocationManager.GPS_PROVIDER;
        LocationListener mlocListener = new MyLocationListener();
        mlocManager.requestLocationUpdates(location, 0, 0, mlocListener);
        mlocManager.requestLocationUpdates(location, 0, 1, mlocListener);
        Location locate = mlocManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (locate != null) {
            lati = locate.getLatitude();
            longi = locate.getLongitude();

        } else {
            locate = mlocManager
                    .getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);
            if (locate != null) {
                lati = locate.getLatitude();
                longi = locate.getLongitude();

            }
        } 
```

MyLocationListener 类

```
 public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location loc) {
        lati = loc.getLatitude();
        longi = loc.getLongitude();

    }

    public void onProviderDisabled(String provider) {

    }

    public void onProviderEnabled(String provider) {

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    public MainActivity getLocationCordinates() {
        MainActivity location_Gps = new MainActivity();
        return location_Gps;
    }
} 
```

在您的添加以下权限`manifest.xml`

```
 <uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:14:28.187

尝试使用：

```
Criteria cri = new Criteria();
cri.setAccuracy(Criteria.ACCURACY_FINE);
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
String tower = locationManager.getBestProvider(cri, false);
Location location = locationManager.getLastKnownLocation(tower); 
```

# javascript - 使用 JavaScript 进行地理定位

> ID：15493450
> 
> 赞同：1
> 
> 时间：2013-03-19T07:07:58.940
> 
> 标签：javascript, geolocation, usability

我正在建立一个具有地理定位功能的网站。它显示了用户周围的兴趣点。一切正常，但可用性应该更流畅。最后我有一个按钮。如果用户单击该按钮，它将打开一个带有 POI 的新网站。因此，我有两个关键问题：

*   1）我应该什么时候向浏览器（使用javascript）询问纬度和经度？

*   1a）我是否应该在我的布局中的每个页面中分别实现这个我永久拥有这些信息？我可以加载一个javascript，它在每个页面上以隐藏的形式加载数据。如果按下按钮，表单将作为 post 或 get 发送。

*   1b）如果单击按钮，则空白页面加载javascript以获取位置并在POI-Page之后调用。可能需要更长的时间才能从服务器加载两个页面，其中包含 javascript。

*   2) 将地理数据传递到网站的地理定位有什么共同点？（两者都对我有用）

*   2a) 在 url 中使用 GET

*   2b）通过（隐藏）表单使用POST？

我期待收到您关于最佳实践的意见。先感谢您！

# android - Android中的数据库SQLite问题？

> ID：15493451
> 
> 赞同：0
> 
> 时间：2013-03-19T07:08:00.747
> 
> 标签：android, sql, sqlite

我想将运费与小计进行比较并计算运费。我成功地得到了结果。我得到查询，然后在 Execute SQL 中执行该代码。我得到了正确答案。但

我在检索数据时遇到了一些问题。我每次只得到第一个位置值的结果。

下面我提到了我的代码。给我解决方案。

```
String Query ="select ROUND(delivarycharge) from pincodedetails where ROUND(subtotal)
<= ( select ROUND(subtotal)  from pincodedetails where ROUND(subtotal) >= "+price+" 
and resturantID="+selArgs+" limit 1) and resturantID ="+selArgs+" and ROUND(subtotal) 
>= ( select ROUND(subtotal) from pincodedetails where ROUND(subtotal) <= "+price+" 
and resturantID="+selArgs+" limit 1)  order by ROUND(subtotal) LIMIT 1"; 
```

**数据库助手类：**

```
double deliverycharge= 0;
if (mCursor.moveToFirst()) {
    // Got first result
    deliverycharge= mCursor.getDouble(0);
}
return deliverycharge; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:15:20.207

您应该更改您的代码以检索到类似的内容：

```
Vector<String> temp = new Vector<String>;
cursor.moveToFirst();
do {

    deliverycharge= mCursor.getDouble(0);
    temp.add()                  
} while (cursor.moveToNext());
return temp; 
```

因此，您将返回一个包含所有字符串的向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:26:30.227

尝试这个

```
String Query ="select ROUND(delivarycharge) as roundcharge from pincodedetails where ROUND(subtotal) <=( select ROUND(subtotal)  from pincodedetails where ROUND(subtotal)>="+price+" and resturantID="+selArgs+" limit 1) and resturantID="+selArgs+" and ROUND(subtotal) >=( select ROUND(subtotal) from pincodedetails where ROUND(subtotal)<="+price+" and resturantID="+selArgs+" limit 1)  order by ROUND(subtotal) LIMIT 1"; 
```

你需要作为“你想要的任何名字”

# zend-framework - zend密码确认密码匹配不起作用

> ID：15493452
> 
> 赞同：1
> 
> 时间：2013-03-19T07:08:04.203
> 
> 标签：zend-framework

下面的代码段不会提醒“密码不匹配”消息。

```
$password = new Zend_Form_Element_Password('password');
$password->setDecorators($elementDecoration);
$password->setLabel('Password')
    ->addFilter('StripTags')
    ->addFilter('StringTrim'); 
```

/* 密码确认 - 只需将令牌部分设置为密码字段名称 */

```
$confirmPswd = new Zend_Form_Element_Password('conf_password');
$confirmPswd->setDecorators($elementDecoration);
$confirmPswd->setLabel('Confirm Password:');
$confirmPswd->setLabel('Confirm Password:');
$confirmPswd->setAttrib('size', 35);
$confirmPswd->setRequired(true);
$confirmPswd->addValidator('Identical', false, array('token' => 'password'));
$confirmPswd->addErrorMessage('The passwords do not match'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:02:39.120

我在电子邮件地址上使用相同的验证器。要将其添加到表单中，我使用以下代码：

```
$this->addElement('text', 'confirm_email',
            array(
                'label'=>'Confirm Email Address',
                'required'=>true,
                'filters'=>array('StringTrim'),
                'validators'=>array(array('EmailAddress'),
                                    array('NotEmpty', true, array('messages'=>'Confirm email address is required.')),
                                    array('Identical', false, array('token'=>'email', 'messages'=>'The email addresses provided do not match.'))),

        'class'=>'thirdCol')); 
```

我使用 flash messenger 来显示错误

```
foreach ($form->getErrors() as $error) {
                $this->flashMessenger->addMessage($error);
            } 
```

如果您在提交表单时尝试获取 javascript 警报，我认为您必须自己编写代码。在您的表单中，使用类似

```
$this->setAttrib('onsubmit', 'return checkRegistration();'); 
```

并让 checkRegistration 函数成为对某些控制器/操作的 ajax 调用，该控制器/操作返回要警告的错误。如果您要返回 json 或类似的东西

```
$this->getHelper('layout')->disableLayout();
$this->_helper->viewRenderer->setNoRender(true); 
```

将禁用布局和视图，因此返回的所有内容都是您回显的内容。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:16:53.333

检查以下 URL 以获取确认密码。

[http://blog.justin.kelly.org.au/creating-a-simple-password-confirmation-field/](http://blog.justin.kelly.org.au/creating-a-simple-password-confirmation-field/)

这对你很有帮助。

另请检查以下链接：

[http://www.stoimen.com/blog/2011/11/23/how-to-setup-different-error-messages-for-each-zend-form-element-validator/](http://www.stoimen.com/blog/2011/11/23/how-to-setup-different-error-messages-for-each-zend-form-element-validator/)

还要检查这个：

[从控制器设置 Zend\Form 错误消息](https://stackoverflow.com/questions/12896624/set-zend-form-error-messages-from-controller)

# c# - FileOpenPicker PickSingleFileAsync 抛出 UnauthorizedAccessException

> ID：15493455
> 
> 赞同：3
> 
> 时间：2013-03-19T07:08:08.917
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

以下代码几乎是来自[FileOpenPicker](http://msdn.microsoft.com/library/windows/apps/BR207847?cs-save-lang=1&cs-lang=csharp#code-snippet-1)类的 MSDN 示例的逐字记录。

```
FileOpenPicker picker = new FileOpenPicker();
picker.ViewMode = PickerViewMode.Thumbnail;
picker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
picker.FileTypeFilter.Add(".png");
picker.FileTypeFilter.Add(".jpg");
picker.FileTypeFilter.Add(".jpeg");

StorageFile file = await picker.PickSingleFileAsync(); 
```

当我从按钮触发它时，我从最后一行得到以下异常：

> System.UnauthorizedAccessException
> 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

我认为 FileOpenPicker 在这种用法中的想法是我不需要向用户询问访问权限或指定任何功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:01:29.887

我在调用之前设置了一个断点`PickSingleFileAsync()`。事实证明，在边框内按下 TextBlock 时会触发两个点击事件（两者都具有相同的 Tapped 事件处理程序）。

第一次调用按预期工作，但随后的调用导致 UnauthorizedAccessException 并且会在选择器显示后立即发生。

# ios - 移除模态 uinavigationcontroller 的圆角

> ID：15493458
> 
> 赞同：2
> 
> 时间：2013-03-19T07:08:26.393
> 
> 标签：ios, ipad, uinavigationcontroller, presentmodalviewcontroller

我正在模态地展示一个 UINavigationController。

```
_navigationController.modalPresentationStyle = UIModalPresentationFormSheet; 
```

我想显示带有圆角的模态控制器。我试过这个：[删除uiviewcontroller的view ipad的圆角](https://stackoverflow.com/questions/14977120/remove-rounded-corner-for-uiviewcontrollers-view-ipad)

它与 UIViewControllers 一起工作正常。对于 UINavigationController，我尝试将导航控制器视图的角半径设置为 0。同时设置 UINavigationController 内所有 UIViewController 的 UIView 的角半径。但没有任何工作。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T09:37:30.987

**VC.m**

```
 #import <QuartzCore/QuartzCore.h>

-(void)viewWillAppear:(BOOL)animated
{
    [self.navigationItem setTitle:@"Navigationbar without corner"];

    self.navigationController.view.layer.cornerRadius = 0;
} 
```

这是上面代码的结果

![在此处输入图像描述](../Images/385fc3b7002c90667e53b9d123321389.png)

# c# - WPF Datagrid行高以匹配Datagrid高度而不滚动

> ID：15493467
> 
> 赞同：0
> 
> 时间：2013-03-19T07:09:01.340
> 
> 标签：c#, wpf, datagrid, wpfdatagrid

我有一个用户控件，它有一个带有自定义 DataTemplate 的 Datagrid，如下所示：-

```
<UserControl x:Class="POCSurveySystem.UI.Windows.QuestionListing"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" >
<UserControl.Resources>
    <Style x:Key="RadioButtonItemStyle" TargetType="{x:Type ListBoxItem}">
        <Setter Property="Margin" Value="0,0,5,0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Border BorderThickness="0" Background="Transparent">
                        <!-- Note: IsChecked is bound to IsSelected-->
                        <RadioButton 
                    Focusable="False" 
                    IsHitTestVisible="False" 
                    IsChecked="{TemplateBinding IsSelected}">
                            <ContentPresenter />
                        </RadioButton>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <ItemsPanelTemplate x:Key="HorizontalItemsPanel">
        <VirtualizingStackPanel 
    Orientation="Horizontal" />
    </ItemsPanelTemplate>
</UserControl.Resources>
<Grid Background="AliceBlue">
    <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition Height="30"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="23" />
    </Grid.RowDefinitions>

    <StackPanel Orientation="Horizontal" Grid.Row="1">
        <Label Name="GroupQuestionHeader" FontSize="14" FontWeight="Bold" FontFamily="Times New Roman" HorizontalAlignment="Left" />
        <Label Name="PageCount" FontSize="10" FontFamily="Times New Roman" HorizontalAlignment="Right"></Label>
    </StackPanel>

    <DockPanel Grid.Row="2" VerticalAlignment="Stretch">
        <DataGrid VerticalScrollBarVisibility="Disabled" VerticalAlignment="Stretch" AutoGenerateColumns="False" HorizontalAlignment="Left" Name="dataGridQuestion" CanUserReorderColumns="False" CanUserSortColumns="False" CanUserResizeColumns="False" CanUserAddRows="False" GridLinesVisibility="All" HorizontalGridLinesBrush="#FFDEDEDE" Height="400" MaxHeight="400">
            <DataGrid.CellStyle>
                <Style TargetType="DataGridCell">
                    <!--<Setter Property="Padding" Value="5" />-->
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type DataGridCell}">
                                <Border Padding="{TemplateBinding Padding}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                    <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Foreground" Value="Black" />
                            <Setter Property="BorderBrush" Value="{x:Null}" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.CellStyle>

            <DataGrid.Columns>

                <DataGridTemplateColumn Header="Question" Width="2*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock TextWrapping="Wrap" Text="{Binding QuestionContent, Mode=OneWay}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="We fully Comply | We partly Comply | We do not Comply" Width="1*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <!--<ListBox 
                            BorderThickness="0" 
                            SelectedValue="{Binding MyDataListSelectedValue}" 
                            ItemContainerStyle="{StaticResource RadioButtonItemStyle}" 
                            ItemsPanel="{StaticResource HorizontalItemsPanel}" Name="OptionsRadioButtonGroup" HorizontalContentAlignment="Left"
                                Cursor="Hand" HorizontalAlignment="Left">
                                <ListBoxItem Width="90" Name="AGR"/>
                                <ListBoxItem Width="90" Name="PGR"/>
                                <ListBoxItem Name="DNR"/>
                            </ListBox>-->
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
    <StackPanel Orientation="Horizontal" Grid.Row="3">
        <Button Content="Next Page" Height="23" HorizontalAlignment="Left" Name="btnNext" VerticalAlignment="Top" Width="75" Click="btnNext_Click"  Margin="5,0,0,0" />
        <Button Content="Submit" Height="23" HorizontalAlignment="Left" Margin="86,0,0,0" Name="btnSubmit" VerticalAlignment="Top" Width="75" Visibility="Hidden" Click="btnSubmit_Click" />
    </StackPanel>

</Grid> 
```

但是，datagridview 不会随着数据行的增长而收缩/拉伸。我试图硬编码 dataGridQuestion.MinRowHeight = 100 但这不是我想要的，因为 datagrid 列中的 Textblock 可能会有所不同。

问题：如何避免在datagrid行的最后一行之后出现如下图中的灰色区域？我使用 dataGridQuestion.MinRowHeight = dataGridQuestion.Height / DataEntityList.Count 进行了测试，但它仍然存在..

随着数据绑定行的减少/增加，如何使 Datagrid 缩小和扩大？

![数据网格行最后一行下方的灰色区域](../Images/39b33bb2aaa8af0687ea90fc891675f3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:29:53.500

您需要更改行定义

```
 <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="30"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="23" />
        </Grid.RowDefinitions> 
```

这将使数据网格适合内容，并且不会显示额外的空间。

然后，如果你想让你的行更大，只需在 DataGrid 中设置 MinRowHeight="200"。

或者，

考虑使用 ItemsControl 而不是 DataGrid，因为您可以更好地控制它。

# c - 删除链表时输出错误

> ID：15493468
> 
> 赞同：1
> 
> 时间：2013-03-19T07:09:02.717
> 
> 标签：c, recursion, linked-list

```
ccarrill@ubuntu:~/C$ ./ccarri7lab9
q: quit the program
i: inserts an integer value
d: deletes an integer value
c: checks if an integer value is in the list
e: deletes all integers from the list
l: lists the items in the list (small to big)
r: lists the items in reverse order (big to small)

Please make a choice: i
Enter the value you want to insert: 3
Please make another choice: i
Enter the value you want to insert: 4
Please make another choice: i
Enter the value you want to insert: 5
Please make another choice: l //lists integers
3 4 5 
Please make another choice: e //deletes list
Please make another choice: l //lists integers
137904144 137904160 0     // output
Please make another choice: q 
```

除了我的删除列表功能外，一切正常。由于某种原因，它在应该释放每个节点时输出垃圾（从而释放整个链表）。每个函数都必须递归完成（这是一个赋值）。

```
void deleteList(node* head)
{
    if(head)
    {
        deleteList(head->next);
        free(head);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:10:52.813

删除整个列表后，您需要将`head`指针设置为`NULL`. 否则它会悬空，当您尝试打印列表时会导致[未定义的行为。](http://en.wikipedia.org/wiki/Undefined_behavior)

为了能够在内部执行此操作`deleteList()`，您需要将函数更改`head`为双指针 ( `node**`)。

# c++ - 复制构造函数或赋值运算符或两者都在这里调用？

> ID：15493471
> 
> 赞同：2
> 
> 时间：2013-03-19T07:09:23.690
> 
> 标签：c++

考虑以下陈述：-

```
Class A a = b;//Where is b is existing object of class A. 
```

A类同时具有复制构造函数和赋值运算符重载（实现）。那么在这种情况下，将调用上述语句，复制构造函数或赋值运算符或两者？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:10:57.377

这称为**[复制初始化](http://www.gotw.ca/gotw/036.htm)**。

复制初始化定义为：

```
T t2 = t1; 
```

根据*类型*的`t1`两种情况是可能的：

> **如果`t1`不是*类型* `T`：**

*   它尝试使用隐式转换序列转换`t1`为*类型，并且* `T`
*   然后`t2`通过调用复制构造函数将创建的对象复制到其中。

> **如果`t1`是*类型* `T`：**

*   它通过调用复制构造函数复制`t1`到。`t2`

请注意，虽然复制构造函数调用可能会通过**[复制](http://en.wikipedia.org/wiki/Copy_elision)****省略**被省略。

* * *

这里不涉及任务。仅当您将已构造的对象分配给另一个时，才会发生分配。您的代码语句在一个语句中涉及构造和赋值，因此本身没有赋值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T07:38:33.890

在这种情况下，复制构造函数被调用。因为“A 类”类对象“a”是复制已构建的“A 类”对象 b 的值而构建的。

不可能调用作用于两个已创建对象的赋值运算符。

# safari - Safari 6 PDF 工具栏在悬停时不可见

> ID：15493474
> 
> 赞同：1
> 
> 时间：2013-03-19T07:09:37.877
> 
> 标签：safari

我们有一个以 PDF 格式显示报告的 Web 应用程序。我们只是将 PDF 嵌入到 iframe 中，一切正常。

但是，当在 Safari 6.0 中打开相同的报告时，它不会显示小工具栏（其中指定了下载、在预览中打开、放大、缩小选项）。

如果我右键单击 --> 在新选项卡中打开 PDF --> 转到页面底部 --> 将鼠标悬停在页面中间，则此工具栏在 safari 6.0 中可用。

Safari 6.0 中使用的 PDF 查看器是“Webkit built in PDF”。

我的问题是为什么当我在单独的选项卡中而不是在我的应用程序中打开 PDF 文档时工具栏会出现。（即当它嵌入到 IFRAME 中时）

更多信息：这是 IE 8 中源元素的外观：

```
<iframe width="100%" height="100%" id="iframeReport" src="http://localhost/Report.aspx?DailySummary&PROCESSINGDATE=03%2f07%2f2013&rc%3aParameters=Collapsed&rc%3aJavaScript=False&rc%3aToolbar=True&rs%3aFormat=PDF&rc%3aArea=Report&rc%3aLinkTarget=_self&File=test.pdf" style="width: 100%; height: 100%;"/> 
```

这是源代码在 Safari 中的样子：

```
<iframe id="iframeReport" height="100%" width="100%" style="height: 100%;  width: 100%;" src="http://localhost/Reports.aspx?DailySummary&amp;PROCESSINGDATE=03%2f07%2f2013&amp;rc%3aParameters=Collapsed&amp;rc%3aJavaScript=False&amp;rc%3aToolbar=True&amp;rs%3aFormat=PDF&amp;rc%3aArea=Report&amp;rc%3aLinkTarget=_self&amp;File=test.pdf">
#document
<html>
<body marginwidth="0" marginheight="0" style="background-color: rgb(38,38,38)"><embed width="100%" height="100%" name="plugin" src="http://localhost/Reports.aspx?DailySummary&amp;PROCESSINGDATE=03%2f07%2f2013&amp;rc%3aParameters=Collapsed&amp;rc%3aJavaScript=False&amp;rc%3aToolbar=True&amp;rs%3aFormat=PDF&amp;rc%3aArea=Report&amp;rc%3aLinkTarget=_self&amp;File=test.pdf" type="application/pdf">
</body>
</html>
</iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:11:57.197

这是 Safari 中的一个错误，我在一年前向 Apple 报告了这个问题，他们知道这一点。

# jsp - 从另一个jsp访问jsp中的静态变量

> ID：15493475
> 
> 赞同：1
> 
> 时间：2013-03-19T07:09:40.907
> 
> 标签：jsp, static-variables

我有两个不同的 jsp（如 A.jsp 和 B.jsp），它们没有关系（如包含等）。

在 A.jsp 中，我有一个名为 isAccess 的静态布尔值。我可以从 B.jsp 访问 A.isAccess 吗？

如果是，请告诉我正确的方向。

# java - 如何将 javascript 对象传递给 GWT 方法并解析结果

> ID：15493476
> 
> 赞同：3
> 
> 时间：2013-03-19T07:09:49.567
> 
> 标签：java, javascript, gwt, jsni

我有这个 GWT 方法：

```
public static native JavaScriptObject getJsValue() /*-{
    var res = $wnd.product; 
    return res;
}-*/; 
```

这是 HTML/JS 部分：

```
<script type="text/javascript" language="javascript">
    var product = products({id:1}).first(); 
</script> 
<!-- GWT -->
<script type="text/javascript" language="javascript" src="app/app.nocache.js"></script> 
```

该对象`product`在 Firebug 中如下所示：

```
Object { id=1, categoryid=0, name="Sample Product", more...} 
```

然后，

```
Object obj = getJsValue();  // what cast? 
```

但是，如何解析结果值以获取产品 ID 等字段值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T10:42:20.483

如果我正确理解了这个问题，我会使用覆盖类型，例如：

```
public class ProductJso extends JavaScriptObject {
  protected ProductJso() {}
  public final native int getId() /*-{ 
    return this.id;
  }-*/;
  public final native int getCategoryId() /*-{
    return this.categoryid;
  }-*/;
  public final native String getName() /*-{
    return this.name;
  }-*/;
  // And so on...
} 
```

然后修改你`JSNI`返回实际`JSO`类型

```
public static native ProductJso getJsValue() /*-{
  return $wnd.product; 
}-*/; 
```

您明白了，另请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay?hl=it#example-json](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay?hl=it#example-json)

# ios - 更改配置文件到期日期

> ID：15493478
> 
> 赞同：1
> 
> 时间：2013-03-19T07:09:57.697
> 
> 标签：ios, provisioning-profile

有没有办法手动设置配置文件的过期。我的意思是在创建配置文件后，我需要在两周后使配置文件过期。那可能吗？此外，临时配置文件的到期时间是多少？

# asp.net - 在 ASP.NET 网络场中使用 Stateserver 会话

> ID：15493481
> 
> 赞同：0
> 
> 时间：2013-03-19T07:10:05.033
> 
> 标签：asp.net, session, session-state, web-farm, stateserver

我创建了一个在线购物网站，该网站将部署在网络农场上。因此，我决定使用 ASP.NET 提供的 Stateserver 会话管理。现在，我有一个登录页面。用户成功登录后，我将他重定向到目录页面，他随后可以将书籍添加到他的购物车中。

据我了解，Session是以键​​值对的形式存储的。所以，如果我为特定用户创建一个会话（比如他的名字是“abc”），那么我会做这样的事情：

```
Session["abc"]=tmp; //where tmp is a "List" of items that "abc" has added to the cart 
```

现在在他被重定向到另一个页面后，我如何检索这个会话？根据我的阅读，我必须写：

```
temp=Session["abc"] 
```

如何将此用户名作为参数发送到另一个页面。由于这是在网络场上，因此客户端可以针对每个请求连接到不同的服务器，并且可能有多个客户端同时登录。因此，如果我使用他们各自的用户名作为键为他们创建一个会话，当他们浏览不同的页面时，我如何检索他们的会话？

我认为我不了解会话 ID 的确切工作原理，所以如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:30:34.863

如果您没有使用粘性会话（意味着一旦创建会话，您的负载均衡器将始终将请求保持在同一个框），那么您需要确保在 web.config 中将 OutOfProc 状态提供程序配置为指向运行 ASP.NET 状态服务的服务器的 IP 地址 - 默认情况下，它指向 localhost -

此外，您需要确保您放入 Session 中的所有内容都是可序列化的（即使用 [Serializable] 属性装饰您的类）

根据我的经验，我总是看到在负载均衡器上打开粘性会话，因为这是最简单的方法。如果不使用粘性会话，那么我可能会使用 SQL 状态提供程序或其他东西（可以更快地进行反序列化的其他产品）来处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:30:04.090

> 如何将此用户名作为参数发送到另一个页面。

你不需要*发送它*。[Session](http://msdn.microsoft.com/en-us/library/ms178581.aspx)对象不是页面响应的一部分，它位于服务器端。因此，您可以在页面 A 上设置它，并能够使用您提供的相同代码在页面 B 上检索它：

```
Session["abc"]=tmp; 
```

和

```
temp=Session["abc"] 
```

> 因此，如果我使用他们各自的用户名作为键为他们创建一个会话，当他们浏览不同的页面时，我如何检索他们的会话？

您可以使用在会话中存储对象时使用的相同密钥来检索它。事实上，您可以为所有用户使用相同的密钥。例如：

```
username=Session["username"] 
```

**注意：** .Net 将使用分配给每个用户的唯一标识符（用户的 SessionId）检索每个对象的正确实例。但是，这对您的代码是透明的。

[这个问题](https://stackoverflow.com/questions/686873/allowing-session-in-a-web-farm-is-stateserver-good-enough)列出了使用 StateServer Session 时的一些问题

# android - android中EditText的焦点

> ID：15493485
> 
> 赞同：0
> 
> 时间：2013-03-19T07:10:24.387
> 
> 标签：android, android-edittext, autofocus

我的应用程序中有三个屏幕，每个屏幕有 3 个 editText。我的问题是，当这些活动启动时，默认情况下光标会转到第一个编辑文本并且键盘会弹出。

我想要的是，当用户点击编辑框时，只有键盘应该弹出。

提前致谢，

苏迪尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:16:16.427

首先在您的 xml 文件中测试您可能在编辑文本中将这一行`<requestFocus />`删除，这是一些可以帮助您的 [示例示例链接](https://stackoverflow.com/questions/1555109/stop-edittext-from-gaining-focus-at-activity-startup?answertab=oldest#tab-top)

```
<EditText
   android:id="@+id/name"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   >

   <-- remove this line /// <requestFocus /> 
</EditText> 
```

也将其添加到您的活动中

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:12:32.227

在您的 layout.xml 中，删除此行（在 EditText 的底部）：

```
 <requestFocus /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:16:54.990

最好的解决方案是：（在清单文件中）

```
 <activity android:name=".MainActivity" 

        android:windowSoftInputMode="stateHidden" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:18:48.730

试试这个，添加`windowSoftInputMode`所有活动，它将避免键盘弹出。当你触摸`EditText`那个时间只出现

```
 android:windowSoftInputMode="stateHidden|adjustPan" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T07:20:08.763

将此代码放入您的 oncreate() 方法中。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    getWindow().setSoftInputMode(
                WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
        } 
```

# android - 如何在 Camera.Parameters.setColorEffect 中设置红色

> ID：15493488
> 
> 赞同：0
> 
> 时间：2013-03-19T07:10:40.250
> 
> 标签：android, video-capture

是否可以在中设置*红色、绿色*叠加`Camera.Parameters.setColorEffect`？如何？？我只看到以下效果。

```
EFFECT_MONO
EFFECT_AQUA 
```

等等

但我想放一些颜色，比如红色、绿色等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:24:19.157

使用这种[方法](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedColorEffects%28%29)，您可以检查仅存在这种颜色：

```
Camera.Parameters.EFFECT_AQUA
Camera.Parameters.EFFECT_BLACKBOARD
Camera.Parameters.EFFECT_MONO
Camera.Parameters.EFFECT_NEGATIVE
Camera.Parameters.EFFECT_NONE
Camera.Parameters.EFFECT_POSTERIZE
Camera.Parameters.EFFECT_SEPIA
Camera.Parameters.EFFECT_SOLARIZE
Camera.Parameters.EFFECT_WHITEBOARD 
```

# javascript - 不使用 Activex 控件的 Windows 用户名

> ID：15493490
> 
> 赞同：0
> 
> 时间：2013-03-19T07:10:43.800
> 
> 标签：javascript, activex, windows-authentication, activexobject

我正在开发一个应该从 Windows 获取用户名的内部站点。我目前正在使用 ActiveX 控件执行此操作。但我想听听是否有其他可能的选择来做同样的事情。因为 activeX 控件不适用于 Firefox 和 Chrome。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:21:36.727

有一些方法可以做到这一点。

1.  强制IE使用activex
2.  使用具有系统访问权限的 Java 小程序
3.  使用具有系统访问权限的浏览器插件

可悲的是没有其他方法。呲牙咧嘴。

# dll - “缺少 DLL”Visual Studio 2012？

> ID：15493493
> 
> 赞同：2
> 
> 时间：2013-03-19T07:10:48.940
> 
> 标签：dll, windows-8, visual-studio-2012, regsvr32

当我启动 Visual Studio 2012 时`atl110.DLL`缺少问题显示。我`atl110.Dll`从互联网下载并运行命令`regsvr32.exe atl110.dll`

模块“atl110.dll”可能与您运行的 Winbdows 版本不兼容。检查模块是否与regsvr32.exe`x86 (32-bit)`或版本兼容。`x64 (64-bit)`显示错误消息我的操作系统是 Windows 8。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T06:58:25.157

下载

[http://www.dll-files.com/dllindex/dll-files.shtml?atl110](http://www.dll-files.com/dllindex/dll-files.shtml?atl110)

并复制到`windows/system32`

# openstack - openstack 的 localrc 设置

> ID：15493495
> 
> 赞同：2
> 
> 时间：2013-03-19T07:10:55.247
> 
> 标签：openstack, devstack

谁能告诉localrc文件的确切配置来进行openstack的单节点安装。我推荐了很多网站，也尝试过安装一次，但不知何故不成功。我尝试使用以下配置：-

```
disable_service n-net
enable_service q-svc
enable_service q-agt
enable_service q-dhcp
enable_service q-l3
enable_service q-meta
enable_service quantum 
```

这是对的吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T19:41:07.163

这似乎没有错，但不完整。不确定您是否仍在寻找答案，但这是我用于单节点 devstack（加上 Quantum）环境的内容：

```
ADMIN_PASSWORD=your_pass
MYSQL_PASSWORD=your_pass
RABBIT_PASSWORD=your_pass
SERVICE_PASSWORD=your_pass
SERVICE_TOKEN=your_pass
HOST_IP=x.x.x.x

DEST=/opt/stack  #installation folder
LOGFILE=stack.sh.log

RECLONE=yes

FLAT_INTERFACE=br100

VOLUME_BACKING_FILE_SIZE=5120M

ENABLED_SERVICES+=,swift 
SWIFT_HASH=66a3d6b56c1f479c8b4e71ab5c2000f6

disable_service n-net   #This disables Nova network, so it's possible to use Quantum services below:
enable_service q-svc
enable_service q-agt
enable_service q-dhcp
enable_service q-l3
enable_service q-meta
enable_service quantum
enable_service tempest  #Optional, to enable tempest configuration as part of devstack

KEYSTONE_CATALOG_BACKEND=sql

API_RATE_LIMIT=False  #If you're interested in using tempest 
```

基本上使用了这个[http://devstack.org/localrc.html](http://devstack.org/localrc.html)，它还将详细说明其他设置。您是否得到任何可以在此处更新的特定输出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:32:00.210

看看这个链接，但我认为把 multihost=False ，如果你没有运行多个节点。

[http://networkstatic.net/openstack-folsom-quantum-devstack-installation-tutorial/](http://networkstatic.net/openstack-folsom-quantum-devstack-installation-tutorial/)

# ruby - 如何使用输入文件名通过 Rake 生成输出文件名？

> ID：15493501
> 
> 赞同：2
> 
> 时间：2013-03-19T07:11:22.280
> 
> 标签：ruby, scripting, rake

我有一些我想使用 Ruby 编码的输入文件。编码的输出应该根据输入文件的文件名匹配一些模式。为了不手动执行此操作，我想使用 Rake 作为自动化的帮助。此外，我不想为每个输入文件指定一个任务。

我尝试了一些 FileList “魔术”，但没有成功。这是代码：

```
desc 'Create all output from specified input'
task :encode do
  FileList['input/*.txt'].each {|input| file "output/output_#{input}" => input}
end 
```

任何人都可以帮忙吗？我没有在网上找到任何关于多个输出文件作为依赖项的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:39:16.633

我会考虑使用 Rake 的`rule`任务，它允许基于正则表达式规则动态定义任务。有关详细信息，请参阅[rakefile rdoc](http://rake.rubyforge.org/files/doc/rakefile_rdoc.html)页面，但这里有一个示例：

```
# creates the 'output' directory on demand
directory "output"

# define a task rule covering all the output files
rule %r{output/output_} => ['output', proc {|task_name| "input/#{task_name.sub('output/output_', '')}.txt"}] do |t|
  # replace this with your encoding logic
  sh "echo 'file #{t.source}' > #{t.name}"
end

# define a top-level 'encode' task which depends on all the 'output/output_*' tasks
task :encode => Dir['input/*.txt'].map {|x| "output/output_#{File.basename(x).sub('.txt', '')}"} 
```

然后您应该能够`rake encode`在文件匹配的目录中运行`input/*`，并将输出文件放在`output/output_*`.

# android - 使用字符串变量的 findViewById 函数

> ID：15493502
> 
> 赞同：2
> 
> 时间：2013-03-19T07:11:26.753
> 
> 标签：android

我目前面临一个问题，是否可以`findViewById()`像这样使用“”功能？

```
String[] names{ "a", "b"};
findViewById(R.drawable.names[0]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:14:35.563

编辑：你知道，你只能调用`findViewById`类型`R.id`。因此，您的代码必然会失败，因为您在`R.drawable`类型上调用它。

试试`getIdentifier()`。[文档](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

```
int resourceId = getResources().getIdentifier(names[0], "drawable", getPackageName());
findViewById(resourceId); 
```

注意：Android 文档说：

> 不鼓励使用此功能。按标识符检索资源比按名称检索资源效率更高。

在这种情况下，如果您定义一个数组`int`，并且其中包含`drawable`资源的 id，可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:15:18.390

**不**，您不能这样做，但是可以解决此问题。尝试这样的事情： -

```
String[] names{ "a", "b"};
int drawableId = this.getResources().getIdentifier(names[0], "drawable", this.getPackageName());
findViewById(drawableId); 
```

Activity在哪里`this`，写出来只是为了澄清。

如果您想要一个`String`in **strings.xml**或`identifier`一个 UI 元素，请替换“drawable”

```
int resourceId = this.getResources().getIdentifier("nameOfResource", "id", this.getPackageName()); 
```

我必须警告你，这种获取标识符的方式真的很慢，只在需要的地方使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:15:58.483

findViewById() 接受 int 而不是字符串。所以你可以使用like..

```
int[] txtViewIdsform1;
txtViewIdsform1 = new int[] { R.drawable.txt_phone1, R.drawable.txt_phone2,
                R.drawable.txt_fax, R.drawable.txt_contact_name, R.drawable.txt_contact_ph}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:16:33.617

不，这不能做

你可以用其他方式来做，比如

```
int[] ids={R.drawable.a,R.drawable.b};
findViewById(ids[0]); 
```

# javascript - 使用 jQuery 进行 Javascript 验证

> ID：15493507
> 
> 赞同：-4
> 
> 时间：2013-03-19T07:11:45.037
> 
> 标签：javascript, jquery, html

我的 html 有这样的东西：

```
<html>
<table class="MyTable" id="idMyTable">
<tr>
<td>
<select class="mySelect">
<option>A</option>
<option>B</option>
</select>
</td>
<td>
<input type="text" class="myInput"/>
</td>
<tr>
<tr>
<td>
<select class="mySelect">
<option>A</option>
<option>B</option>
</select>
</td>
<td>
<input type="text" class="myInput"/>
</td>
<tr>
</table>
<input type="button" value="Check" onclick="validate()"/>
</html> 
```

在 validate 方法中，我想检查用户是否选择了 B 选项，那么相应的输入字段不能为空。如何使用 jQuery 做到这一点？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:18:39.327

你可以这样做：

```
$(".mySelect").each(function(){
    if($(this)[0].selectedIndex > 0)
    {
        if($(this).closest(".myInput").val() == '')
        {
            alert("this input is not valid");
            return false
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:21:09.750

请先添加这样的选项以正确评估值..

```
<select class="mySelect">
<option value="A">A</option>
<option value="B">B</option>
</select> 
```

> ```
> And here is the logic goes under validation method 
> ```

```
$(".mySelect").each(function(){
  if($(this).val() == "B")
  {
    if($.trim($(this).closest("myInput").val()) == '')
   {
       // Validation logic here
   }
  }
}); 
```

如果您不想要上面提供的具有值的选项，请使用 jQuery 检查选​​项的选定文本。

# jenkins - Jenkins：在 perforce 中控制工作空间位置

> ID：15493514
> 
> 赞同：3
> 
> 时间：2013-03-19T07:12:17.253
> 
> 标签：jenkins, perforce

我正在尝试编写一份 Jenkins 作业以在多个平台上进行编译。为此，我需要创建的客户端不是在默认位置 (C:\Jenkins\workspace\MY_JOB)，而是在网络位置 (\somecomputer\somewhere.)

我试图取消单击“让 Jenkins 创建工作区”并自己创建工作区。但是，它失败了。我在日志中看到：

```
"C:\Program Files\Perforce\p4.exe" workspace -o MY_JOB-230942967 
```

我不知道这个数字是什么，为什么 perforce 插件会在那里添加它，以及我可以做些什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-22T13:21:35.397

打开作业配置的源代码管理位上的“高级”设置部分，然后查找

从属的客户端名称格式

默认情况下，它是 ${basename}-${hash}。删除哈希部分，你应该很高兴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T07:41:23.630

您需要为要使用 jenkins 构建的每个项目正确配置 perforce 工作区名称和路径。`p4`在此之前，我建议使用or为这个映射设置一个 perforce 工作区（即客户端）`p4v`。

1.  转到 Jenkins 网页，然后选择要更改的项目
2.  在左侧窗格中选择配置。
3.  在源代码管理下，确保`Perforce`选中 、`P4PORT`、`username`和`password`也是有效的。
4.  对于`Workspace (client)`，输入一个有效的工作区名称，也就是您传递给`p4 client`命令的客户端名称。如果您检查的话，詹金斯会为您创建一个不存在的`Let Jenkins Create Workspace`
5.  选择. `View Map`_`Client View Type`
6.  输入正确的 perforce 映射，就像您在`p4 client`. 例如，要将仓库位置映射`//depot/branch1`到客户端中的某个路径，该路径`Z:\workspace1\somedir\branch1`的客户`myclient1`端根设置为`Z:\workspace1`，您需要添加以下行：

    ```
    //depot/branch1/... //myclient1/somedir/branch1 
    ```

# iphone - 将一个 NSDictionary 的内容复制到另一个 NSDictionary

> ID：15493516
> 
> 赞同：1
> 
> 时间：2013-03-19T07:12:24.130
> 
> 标签：iphone, objective-c, nsdictionary

我有一个包含以下内容的 plist 文件：

```
<plist>
 <dict>
  <key>Rows</key>
   <array>
        <dict>
            <key>Asia</key>
            <string>India</string>
            <array>
                 <dict>
                      <key>Description</key>
                      <string>Country</string>
                 </dict>
            </array>
        </dict>
        <dict>
            <key>Europe</key>
            <string>Germany</string>
            <array>
                 <dict>
                      <key>Germany</key>
                      <string>Berlin</string>
                      <array>
                           <dict>
                                <key>Description</key>
                                <string>State</string>
                           </dict>
                      </array>
                 </dict>
            </array>
        </dict>
   </array> 
```

我将此内容存储在 NSDictionary 中。从这里有什么方法可以让我只获得关键是 "description" 的那些对象。我找不到任何解决方案，因为键“描述”没有固定位置，这意味着 plist 中可以有任意数量的子级别。但是这个键将永远是最后一个子级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:45:02.110

您需要通过字典进行递归，并获取每个具有描述键的列表。像这样的东西（未经测试）：

```
NSDictionary *rootLevel = //dictionary from plist
NSArray *dictionariesWithKey = [self dictionariesWithDescriptionKeyFromDictionary:rootLevel];

- (NSArray *)dictionariesWithDescriptionKeyFromDictionary:(NSDictionary *)dict
{
    NSMutableArray *dictionaries = [NSMutableArray array];
    [dict enumerateKeysAndObjectsUsingBlock:^(NSString *key, id val, BOOL *stop) {

        if ([key isEqualToString:@"description"])
            [dictionaries addObject:dict];
        else if ([val isKindOfClass:[NSDictionary class]])
            [dictionaries addObjectsFromArray:[self dictionariesWithDescriptionKeyFromDictionary:val]];
    }];
    return dictionaries;
} 
```

# iphone - 摇动时在背景中播放歌曲

> ID：15493520
> 
> 赞同：0
> 
> 时间：2013-03-19T07:12:40.857
> 
> 标签：iphone, ios5, shake

当有人摇动设备时，我希望该应用程序开始在后台播放歌曲。当应用程序进入前台时，歌曲应该停止播放。我知道我们可以在后台播放歌曲，但我不知道如何在应用程序处于后台时开始播放歌曲。我是 Iphone 新手，所以请任何人都可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:16:42.307

这是不可能的（只要我们谈论将通过 App Store 出售的应用程序），因为后台进程非常有限。

# javascript - 如何计算持续时间？

> ID：15493521
> 
> 赞同：28
> 
> 时间：2013-03-19T07:12:41.837
> 
> 标签：javascript, jquery, jquery-mobile

我正在开发一个基于 Web 的应用程序来从系统日期时间捕获开始时间和结束时间，但我的主要问题是我不知道如何获取停机时间的开始时间和结束时间之间的持续时间。

```
 //Function to get current start time
  var startTime = setInterval(function () { start() }, 1000);

  function start() {
    var startDate = new Date();
    var timeStart = startDate.toLocaleTimeString();
  $("#setCount").html(timeStart);
 } 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-19T07:17:10.010

你是这个意思吗：

```
var date1 = new Date();
var date2 = new Date();
var diff = date2 - date1; //milliseconds interval 
```

**更新**

检查[JSFiddle](http://jsfiddle.net/hVwX7/1/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-19T11:11:44.487

**更新：**

如果你想向用户显示时差，就会这样做。但如果是出于任何开发目的，以下功能将使您的生活变得轻松。[`Serigo's`](https://stackoverflow.com/users/1540859/sergio) [`method`](https://stackoverflow.com/a/15493589/405398)

* * *

只是想让您了解此控制台实用程序功能。

将此行放在应用程序初始化代码的顶部`console.time('appLifeTime');`

把这个放在你觉得你的应用程序结束的地方。`console.timeEnd('appLifeTime');`

```
console.time('appLifeTime');

setTimeout(function delay(){
  console.timeEnd('appLifeTime');
}, 1500); 
```

上面的代码段将打印，`appLifeTime: 1500.583ms`.

AFAIK，`console.time & console.timeEnd`适用于 firefox（带有 firebug）和 webkit 浏览器（chrome、safari）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-19T07:16:55.327

要简单地测量经过的时间，请使用`Date.getTime()`which 输出自 unix 纪元以来的当前时间（以毫秒为单位）。

您可以从另一个值中减去一个毫秒值以获得持续时间。

例子：

```
var startTime = new Date().getTime();

setTimeout(function () {
  var endTime = new Date().getTime();
  console.log("duration [ms] = " + (endTime-startTime));
}, 1500); 
```

输出当然是：（`duration [ms] = 1500`或更少或更多毫秒）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-09T07:59:39.597

我有这个函数来显示两个日期之间的时间距离：

```
export const timeDistance = (date1, date2) => {
  let distance = Math.abs(date1 - date2);
  const hours = Math.floor(distance / 3600000);
  distance -= hours * 3600000;
  const minutes = Math.floor(distance / 60000);
  distance -= minutes * 60000;
  const seconds = Math.floor(distance / 1000);
  return `${hours}:${('0' + minutes).slice(-2)}:${('0' + seconds).slice(-2)}`;
}; 
```

小时格式的输出`h:mm:ss`可以任意增长。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T07:15:00.977

使用这个漂亮的 jQuery 插件：[http ://timeago.yarp.com/](http://timeago.yarp.com/)

> Timeago 是一个 jQuery 插件，可以轻松支持自动更新模糊时间戳（例如“4 分钟前”或“大约 1 天前”）。下载、查看示例并尽情享受。
> 
> 您大约一分钟前打开了此页面。（这将每分钟更新一次。等待它。）
> 
> 此页面最后一次修改是 13 天前。
> 
> 瑞安出生于 34 年前。

# sparql - SPARQL 简单查询

> ID：15493523
> 
> 赞同：1
> 
> 时间：2013-03-19T07:12:46.597
> 
> 标签：sparql, ontology, owl

我已经为电子邮件制作了一个本体。我想做一个查询来测试，但相信我，我忘记了如何写一个简单的！谁能帮我？考虑到这些：电子邮件有主题，发件人，收件人，内容我想这样写：从发件人=桑扎的内容中选择*，

如何用 SPARQL 编写它？可能是： SELECT * ?Content WHERE ?Sender: Sanaz 任何人都可以重写它吗？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:13:18.677

它应该看起来像这样：

```
SELECT ?content
WHERE {
  ?email  <http://www.example.org/sender>  "Sanza" .
  ?email <http://www.example.org/content>  ?content .
} 
```

您可以在那里找到更多示例：http: [//jena.apache.org/tutorials/sparql_basic_patterns.html](http://jena.apache.org/tutorials/sparql_basic_patterns.html)

# storyboard - 点击显示/隐藏 UIToolbar

> ID：15493529
> 
> 赞同：2
> 
> 时间：2013-03-19T07:13:31.713
> 
> 标签：storyboard, uitoolbar, viewcontroller, viewdidload, uitapgesturerecognizer

我正在为类似书本的应用程序使用具有不同视图的故事板。在每个视图中，我都想要一个带有点击时出现的按钮的工具栏，让用户可以选择返回主视图。我通过 UITapGestureRecognizer 实现了这一点。但是，使用当前代码，当我转到视图时，我的工具栏不会隐藏。当我点击它时，它会像我想要的那样消失。如何切换以使工具栏默认隐藏，然后点击它出现？

这是我的代码：

```
@implementation secondViewController 

- (void)toggleNavBar:(UITapGestureRecognizer *)gesture {
BOOL barsHidden = self.topBar.hidden;
self.topBar.hidden = !barsHidden;
}

- (void)viewDidLoad
{
[super viewDidLoad];
 UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self    
action:@selector(toggleNavBar:)];
[self.view addGestureRecognizer:gesture];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:50:26.933

当您的视图像这样加载时隐藏**UIToolBar**

```
- (void)viewDidLoad  
{  
 [super viewDidLoad];  
 UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(toggleNavBar:)];   
 [self.view addGestureRecognizer:gesture];
 self.topBar.hidden = YES;
} 
```

# android - 如何在不更改包名称的情况下更新我的 BB10 应用程序

> ID：15493533
> 
> 赞同：1
> 
> 时间：2013-03-19T07:13:52.047
> 
> 标签：android, blackberry-10, blackberry-android

我在这里使用我的 android 项目为 bb 10 创建 .bar 文件，每次我需要更改包名称时都会遇到一个问题，因为只有在 bb10 设备中，构建才会被替换。但是在这里，如果我继续更改包名称，如何将应用程序替换为下一个版本，因为设备会将其视为新应用程序。但是我希望在 BB Appworld 上进行新更新时替换旧版本。

有人对此有解决方案吗？

# ios - IOS消息应用数据

> ID：15493535
> 
> 赞同：0
> 
> 时间：2013-03-19T07:14:11.827
> 
> 标签：ios, sms, message

我正在为 IOS 开发一个消息传递应用程序。因此，为此，我想从 IOS 中的默认消息应用程序访问和修改消息。

那么，我怎样才能像访问照片和联系人一样访问消息应用程序的数据呢？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:15:32.020

您**无法**从默认消息应用程序访问消息。这不是 Apple 为开发人员提供的特权。

有关更多信息，请查看此链接：

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/SystemMessaging_TopicsForIOS/Articles/SendinganSMSMessage.html#//apple_ref/doc/uid/TP40010416-SW1](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/SystemMessaging_TopicsForIOS/Articles/SendinganSMSMessage.html#//apple_ref/doc/uid/TP40010416-SW1)

# ios - 无法识别的选择器错误。

> ID：15493542
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:14:30.927
> 
> 标签：ios, uiview, unrecognized-selector

我正在尝试将 UIColor 发送到 UIView 的子类。我收到一个无法识别的选择器错误。

```
-[Subclass fillView]: unrecognized selector sent to instance 0x2006f880 
```

（子类是我项目中的一个类，但我不知道它与fillView有什么关系。

这是导致问题的行。

```
view.fillView.fillColor = fillColor; 
```

子类有一个在 drawRect 方法中使用的属性

```
@property (strong, nonatomic) UIColor *fillColor;

CGContextSetFillColorWithColor(context, _fillColor.CGColor); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:18:57.710

你的代码

```
view.fillView.fillColor = fillColor; 
```

相当于

```
[[view fillView] setFillColor:fillColor]; 
```

因此，无论“视图”类是什么（它似乎属于“子类”类），它都不会响应方法 fillView。该错误与fillColor无关。您的代码在调用 setFillColor 之前就崩溃了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:35:15.517

在您的情况下 view.fillView.fillColor 将不起作用。
如果您真的想将颜色设置为视图的背景，请试试这个

```
[self.view setBackgroundColor:[UIColor redColor]]; 
```

希望这会有所帮助。

# php - codeigniter 自动加载自定义库不起作用

> ID：15493545
> 
> 赞同：0
> 
> 时间：2013-03-19T07:14:40.530
> 
> 标签：php, codeigniter

我有自定义库

```
class Test extends CI_Controller {
    public function __construct(){
        parent::__construct();
    }

    public function abc(){
        //some code
    }
} 
```

当我将此库添加到自动加载时，出现以下错误

> 致命错误：第 495 行 C:\xampp\htdocs...\system\core\Loader.php 中允许的内存大小为 134217728 字节已用尽（试图分配 261904 字节）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:51:27.560

您扩展 CI_Controller

在您的图书馆中，您不会扩展任何东西。除非您想编辑或更改其他库（助手等）

[http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:51:45.690

要么你在那个库中有一个循环，要么只是一个分配大量内存的操作，比如将大量数据插入到数组中。如果您无法优化库中的操作，您可能需要在 php 中增加允许的内存大小

ini_set('memory_limit', '512M');

# spring - 即使驱动程序类名和休眠方言的值错误，Spring Hibernate 集成示例也会执行

> ID：15493546
> 
> 赞同：0
> 
> 时间：2013-03-19T07:14:41.330
> 
> 标签：spring, hibernate, hsqldb

在这篇关于 Spring 的教程中

[http://www.dzone.com/tutorials/java/spring/spring-hibernate-integration-1.html](http://www.dzone.com/tutorials/java/spring/spring-hibernate-integration-1.html)

当使用 MySQL 代替 HSQL 时，Spring Bean 配置文件包括数据源 URL、密码、用户名和

```
 driverclassname and hibernate Dialect are changed to MySQL values accordingly. 
```

示例成功执行。但即使当

```
 driverclassname and hibernate Dialect are changed back to HSQL values, 
```

即使这样，这个程序也会执行......

它不应该显示错误吗？我正在使用 Spring 工具套件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:24:58.610

实际上，HSQL 数据库是嵌入在您的示例中的内存数据库。因此，如果您提供了正确的信息并成功地针对`mysql`数据库执行了代码，那么没有什么可以禁止您使用另一个数据库执行相同的代码，尤其是`HSQL DB`.

此外，了解这一点后，您可以使用 HSQL DB 进行自动化集成测试，因为它执行速度很快。

# java - GWT：刷新页面会导致整个 Web 应用程序重新启动。我应该在哪里保存状态？

> ID：15493552
> 
> 赞同：2
> 
> 时间：2013-03-19T07:14:53.700
> 
> 标签：java, gwt

我对 GWT 很陌生。我最近遇到的一个问题是关于重新加载网页。

假设我的网络应用有两个页面 A 和 B。页面 A 是登录页面。登录后，用户将被带到 B 页面。如果用户在 B 页面上按下重新加载按钮，则整个 Web 应用程序将重新启动（将再次调用 EntryPoint 的 onModuleLoad）。尽管我使用历史记录将浏览器保持在页面 B 上，但所有保持状态的对象都被重新创建，因此页面 B 将无法加载（例如用户登录信息等）。

我确信这对于 GWT 开发人员来说是一个非常常见的问题。有人可以告诉我：

```
1\. How to keep some of the objects in GWT while reloading page? 
2\. Is there anyway to just reload a page rather than the whole web app? 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:23:13.320

Try [https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces). In case you really need to store something you might use Cookies, HTML5 storage, or use some server-side storage which you access via RPC.

# apache - URL 指向路由器管理页面

> ID：15493553
> 
> 赞同：0
> 
> 时间：2013-03-19T07:14:58.947
> 
> 标签：apache, router

我正在使用 no-ip 服务进行动态 DNS 和端口转发，当我输入 URL 时，显示路由器管理页面而不是 Web 服务器。我正在使用华为 HG655b 路由器和 Apache Web 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:23:23.587

路由器可能无法允许传入请求在端口 80 上通过它。不幸的是，我无法确切说明该怎么做，因为路由器的手册非常基础。但请查看是否有允许您执行以下操作的设置：

*   禁止从您的网络外部访问管理页面
*   更改提供管理页面的端口

# scala - scala 日志记录函数名称

> ID：15493556
> 
> 赞同：4
> 
> 时间：2013-03-19T07:15:04.470
> 
> 标签：scala, logging

在我的日志条目中，我想记录调用 log 方法的函数名称。

这是为了能够自动按函数名称过滤日志条目。这可能吗？有任何图书馆吗？现有库的任何扩展？

换句话说，是否可以提取执行上下文当前在运行时执行的 scala 函数的名称？

第二个问题：我知道这可能牵强，但理想情况下，包含日志调用的最接近的封闭命名函数是首选，而不是 scala 为其生成神秘名称的实际匿名函数。后者很难从日志中读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:20:09.283

这是您可以使用的**hack 。**它遍历当前堆栈跟踪以找到第一个非匿名函数。

```
def printStackFrame() {
  /* Get current stack trace. The first frame is this method call. */
  val st = new RuntimeException().getStackTrace.view.drop(1)

  // st take(5) foreach println /* Print a few frames of interest */

  val name =
    st.map(ste => ste.getClassName + "." + ste.getMethodName)
      .dropWhile(_.matches(""".*anonfun\$\d*\.apply\$mcV\$sp$"""))
      .apply(0)

  println(name)
} 
```

你可以像这样使用它：

```
class MyClass {
  def mydef() {
    printStackFrame()
  }

  def myhof(f: () => Unit) {
    f()
  }
}

val mc = new MyClass
mc.mydef() // Main$$anon$1$MyClass.mydef
mc.myhof(mc.mydef) // Main$$anon$1$MyClass.mydef
mc.myhof(() => {printStackFrame()}) // Main$$anon$1$MyClass.myhof 
```

明显的缺点是它的脆弱性。我完全不确定上面的单个正则表达式是否足以忽略所有匿名或其他不感兴趣的函数。即便如此，也不能保证命名模式在未来的 Scala 版本中不会改变。

# php - 从服务器向所有设备发送推送通知

> ID：15493560
> 
> 赞同：0
> 
> 时间：2013-03-19T07:15:18.833
> 
> 标签：php, mysql, objective-c, for-loop, push-notification

我想向所有设备发送推送通知。我通过将所有设备令牌保存在我的数据库中来做到这一点。然后`loop`将我的消息发送到所有设备。

这是我将设备令牌发送到服务器的代码：

```
NSString *deviceTokenString = [[[deviceToken description]
                           stringByReplacingOccurrencesOfString: @"<" withString: @""]
                          stringByReplacingOccurrencesOfString: @">" withString: @""];

NSString *devicedeviceTokenForRealNow = deviceTokenString;

deviceTokenString = [deviceTokenString stringByReplacingOccurrencesOfString:@" " withString:@"+"];

NSString *strURL = [NSString stringWithFormat:@"http://website/DeviceToken.php?devicetoken=%@",deviceTokenString];
NSLog(@"%@", strURL);
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

NSLog(@"%@", strResult);

NSLog(@"%@", devicedeviceTokenForRealNow); 
```

这是我的PHP代码：

```
<?PHP

if($_POST['message']){

///COUNT THE NUMBER OF DEVICES THAT IS IN THE DATABASE TO USE IN LOOP

    $con = mysql_connect(localhost,load2unet_root,hzXC3rUm) or die(mysql_error());
    mysql_select_db(load2unet_db,$con) or die(mysql_error());

    $sql = "SELECT COUNT(DeviceID) FROM DeviceToken";
    $res = mysql_query($sql,$con) or die(mysql_error());

    $row = mysql_fetch_array($res);

    $hello .= "\"" . $row["COUNT(DeviceID)"] . "\"";

    while($row = mysql_fetch_array($res)){
        $hello .= " , \"" . $row["COUNT(DeviceID)"] . "\"";

    }

/// USE LOOP TO SEND THE PUSH NOTIFICATION TO ALL DEVICES

for ($i=1; $i<=$hello; $i++){

    $con = mysql_connect($DB_HostName,$DB_User,$DB_Pass) or die(mysql_error());
    mysql_select_db($DB_Name,$con) or die(mysql_error());

    $sql = "SELECT DeviceToken FROM $DB_Table WHERE DeviceID = $i;";
    $res = mysql_query($sql,$con) or die(mysql_error());

    $row = mysql_fetch_array($res);

    //$result .= "\"" . $row["DeviceToken"] . "\"";
    $deviceToken .= "" . $row["DeviceToken"] . "";
    while($row = mysql_fetch_array($res)){
        $deviceToken .= "" . $row["DeviceToken"] . "";

    }

$message = stripslashes($_POST['message']);

$payload = '{
                "aps" : 

                    { "alert" : "'.$message.'",
                      "badge" : 1,
                      "sound" : "bingbong.aiff"
                    } 
            }';

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'no');
stream_context_set_option($ctx, 'ssl', 'passphrase', 'no');
$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx);
if(!$fp){
    //print "Failed to connect $err $errstrn";
    return;
} else {
    //print "Notifications sent!";
}

$devArray = array();
$devArray[] = $deviceToken;

foreach($devArray as $deviceToken){
    $msg = chr(0) . pack("n",32) . pack('H*', str_replace(' ', '', $deviceToken)) . pack        ("n",strlen($payload)) . $payload;
    //print "sending message :" . $payload . "n";
    fwrite($fp, $msg);
}
fclose($fp);
print "This is the Device Token Sent Each Time".$deviceToken."\n";

} 
```

}

使用此代码，我已经尝试过 `for ($i=1; $i<=1; $i++)`并且有效。但不是为了`for ($i=1; $i<=6; $i++)`？

有人可以帮忙吗？任何帮助将不胜感激！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:29:24.010

试试[ApnsPHP](https://github.com/duccio/ApnsPHP)库，

这里还有一个 push many 演示 [sample_push_many.php](https://github.com/duccio/ApnsPHP/blob/master/sample_push_many.php)

希望这可以帮到你。

谢谢

# matlab - wav 文件的长度（以毫秒为单位）

> ID：15493564
> 
> 赞同：1
> 
> 时间：2013-03-19T07:15:27.663
> 
> 标签：matlab

我知道你可以这样做：

```
[w,fs] = wavread('file.wav');
length = length(w)/fs; 
```

但是我正在尝试减少文件开头和结尾的噪音，并通过遍历样本块中的波形矩阵然后将该块中的最大样本与阈值进行比较来获得大量记录的持续时间，如果它大于该阈值然后开始测量，当它小于阈值时停止测量。

这是我的尝试：

```
w = w(:,1);
thold = max(w) * .04;
nwindows = 1000;
counter = 0;
start = true;
for i = 1:nwindows:length(w)
  if (max(w(i:min(i+49,length(w)))) > thold)
      counter = counter + 1;
  elseif (max(w(i:min(i+49,length(w)))) < thold && start == true)
      break;
  end
end

result = counter/fs; 
```

现在只需要弄清楚如何从计数器中获得毫秒数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:26:08.260

根据您的代码片段，计数器是您要查找的 wav 文件中的索引。要转换为 ms，我们需要使用 wav 文件采样率：

```
 timeInSec = counter/fs; 
```

# iphone - 如何在 iphone 中制作像 pop 这样的动画而不是 push

> ID：15493570
> 
> 赞同：1
> 
> 时间：2013-03-19T07:15:48.657
> 
> 标签：iphone, ios, xcode

我正在使用以下代码：

```
FirstView * fir=[[FirstView alloc]init];
[self.navigationController pushViewController:fir animated:NO]; 
```

我想做一个像popview控制器这样的动画。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:19:58.300

```
-(void)ButtonAction:(id)sender{
  [self SwipeRight:self.navigationController.view];  // <--calling method
  //[self.navigationController pushViewController:viewcontrollerobject animated:NO];
  // or pop // 
}

    -(void)SwipeRight:(UIView *)view{

        CATransition* transition = [CATransition animation];
        [transition setDuration:0.3];
        transition.type = kCATransitionPush;
        transition.subtype = kCATransitionFromRight;
        [transition setFillMode:kCAFillModeBoth];
        [transition setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
        [view.layer addAnimation:transition forKey:kCATransition]; 
    }

    -(void)SwipeLeft:(UIView *)view{
        CATransition* transition = [CATransition animation];
        [transition setDuration:0.3];
        transition.type = kCATransitionPush;
        transition.subtype = kCATransitionFromLeft;
        [transition setFillMode:kCAFillModeBoth];
        [transition setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
        [view.layer addAnimation:transition forKey:kCATransition]; 
    } 
```

# c# - 使用 microsoft word interop 的 Word 自动化，用于没有交互式用户的 Web 应用程序

> ID：15493573
> 
> 赞同：0
> 
> 时间：2013-03-19T07:15:59.783
> 
> 标签：c#, .net, com, office-interop

我知道 Microsoft 不建议在服务器端使用 word 自动化（[指向 Office 服务器端自动化的注意事项的链接](http://support.microsoft.com/kb/257757)）。

我仍然看到使用单词自动化的一些优点，例如使用模板并允许我的客户更改它（纯文本）而无需更改任何编码。

我的问题：当没有交互式用户时，我找不到执行单词自动化功能的方法（我使用的是虚拟专用服务器，我必须使用远程连接）。如果我不连接到服务器，自动化这个词就不起作用。

我阅读了我能找到的关于这个主题的内容，我想分享我设法解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:15:59.783

此解决方案适用于 Word Automation 在有交互式用户的情况下工作。下面的步骤是从交互式用户更改为特定用户，因此没有义务连接到服务器以允许自动化一词工作。

1.  我在服务器上创建了一个新用户，设置了密码并赋予它管理员权限。
2.  单击开始，单击运行，然后键入 DCOMCNFG。
3.  在组件服务-> 计算机-> 我的电脑-> DCOM 配置 ==> 右键单击​​ Microsoft Word 97-2003。选择属性。
4.  在安全选项卡中，转到编辑并添加您创建的用户。
5.  在身份中选择“此用户”输入您创建的用户和密码。

我希望你们中的一些人会发现它有帮助。

# android - 在 android 设备中安装 APK 期间没有应用程序可以执行此操作

> ID：15493576
> 
> 赞同：0
> 
> 时间：2013-03-19T07:16:08.830
> 
> 标签：android, apk, failed-installation

我想在我的 android 设备中安装我的应用程序的 APK 文件。

旧的 APK 文件正在正确安装，但是当我尝试安装最新的应用程序文件时，它显示错误，例如“没有应用程序可以执行此操作”。

我已经从我的设备上卸载了旧的应用程序。

我尝试在安装失败后更改版本名称和版本代码，但它也显示相同的错误。

此 APK 文件已正确安装在其他设备中。

谁能告诉我真正的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:08:25.667

在对我的应用程序进行一些更改后，当我用文件名 + .apk 重命名我的文件时，我得到了结果

它对我有用。

*文件名.apk*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:32:58.793

处理执行 apk 安装操作的包安装程序似乎在设备上丢失或禁用。

# vb.net - 在 vb.net 2010 中创建报告时获取额外的空白页

> ID：15493577
> 
> 赞同：1
> 
> 时间：2013-03-19T07:16:09.277
> 
> 标签：vb.net, visual-studio-2010, reporting, localreport

我使用 .rdlc 文件创建了一份报告。

输出是单页生成的，但是当我进入打印预览或给出打印命令时，它会显示报告的第一页和一个没有单行的附加空白页。我应该怎么做才能解决这个错误？

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-09T13:21:38.133

检查页眉、正文和页脚的数学。这些需要小于总页面宽度和高度减去边距。如果你甚至超过 .001，它会在你导出时踢出一个空白页

# firefox - Twitter Bootstrap 在 Firefox 中不显示图标

> ID：15493579
> 
> 赞同：1
> 
> 时间：2013-03-19T07:16:16.733
> 
> 标签：firefox, twitter-bootstrap

再会！！！当我开发网站时，我使用了 twitter bootstrap css 框架。我创建带有引导图标的按钮，但 Firefox 不显示它。

请帮我解决问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T00:59:23.143

Firefox 不允许跨域字体。您需要为字体文件设置 Access-Control-Allow-Origin 标头。查看[此链接](http://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default)了解更多详情。如果您使用的是 rails，则可以使用[此 gem](https://github.com/rubymaverick/font_assets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:11:57.297

如果没有代码示例，很难知道真正的问题是什么，但我可以提供一些使用在 Firefox（和其他浏览器）中工作的 Bootstrap 的带有图标的按钮示例。

一个示例删除按钮（使用带有“btn”类的链接）：

```
<a href="#" class="btn btn-danger">
   <i class="icon-trash"></i> Delete
</a> 
```

示例删除按钮（使用“按钮”元素）：

```
<button class="btn btn-primary" type="button">
  <i class="icon-trash"></i> Delete
</button> 
```

更多信息：http: [//twitter.github.com/bootstrap/base-css.html#buttons](http://twitter.github.com/bootstrap/base-css.html#buttons)

# r - 通过比较 2 个现有列然后删除后者，在 R 的数据框中创建新列

> ID：15493588
> 
> 赞同：2
> 
> 时间：2013-03-19T07:17:08.410
> 
> 标签：r, matrix, dataframe

我还有一个问题，在过去的几个小时里我一直试图解决这个问题，但没有成功。它涉及 R 中的一些数据集操作。想象一下，我有以下示例数据集：

```
a,b,v,r
1,3,1,0
2,5,1,1
3,6,0,1
1,5,1,0
2,4,1,1
3,6,0,1 
```

我需要通过以下规则比较列 [v,r] 的值来创建第三列（例如 m）。如果 v = 1，r = 0，则 m = 0。如果 v = 1，r = 1，则 m = 1；如果 v = 0，r = 1，则 m = 2。[v,r] 永远不能取值 (0,0)。

我想知道如何创建第三列并在一行中删除列 v,r。谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T07:23:47.483

使用`data.table`（1.8.8）：

```
DT <- data.table(DF)
DT[, `:=`(m = (!v) * 1 + r, v = NULL, r=NULL)]
#    a b m
# 1: 1 3 0
# 2: 2 5 1
# 3: 3 6 2
# 4: 1 5 0
# 5: 2 4 1
# 6: 3 6 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T07:31:22.960

这不是一行（所以不像@Arun的`data.table`解决方案那样活泼），但这是一种使用`within`and的方法`ifelse`：

```
within(mydf, {
  m <- ifelse(v == 1 & r == 0, 0, ifelse(v == 1 & r == 1, 1, 2))
  rm(v, r)
})
#   a b m
# 1 1 3 0
# 2 2 5 1
# 3 3 6 2
# 4 1 5 0
# 5 2 4 1
# 6 3 6 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T07:36:32.673

`transform`从`base`包中使用

```
DF <- read.csv(textConnection("a,b,v,r\n1,3,1,0\n2,5,1,1\n3,6,0,1\n1,5,1,0\n2,4,1,1\n3,6,0,1"), header = TRUE)

transform(DF, m = (!v) * 1 + r, v = NULL, r = NULL)
##   a b m
## 1 1 3 0
## 2 2 5 1
## 3 3 6 2
## 4 1 5 0
## 5 2 4 1
## 6 3 6 2 
```

# elasticsearch - 更新 API 中的 elasticsearch python 脚本插件

> ID：15493590
> 
> 赞同：1
> 
> 时间：2013-03-19T07:17:09.987
> 
> 标签：elasticsearch

我正在尝试在 elasticsearch 中运行一个简单的更新脚本。它似乎适用于 mvel，但不适用于 python。

```
curl -XPOST 'localhost:9200/index1/type1/1/_update?pretty=true' 
-d '{"script" : "ctx._source.myfield=\"item\""}'
{
  "ok" : true,
  "_index" : "index1",
  "_type" : "type1",
  "_id" : "1",
  "_version" : 7
}

curl -XPOST 'localhost:9200/index1/type1/1/_update?pretty=true' 
-d '{"script" : "ctx._source.myfield=\"item\"","lang":"python"}'
{
  "error" : "ElasticSearchIllegalArgumentException[failed to execute script]; nested: NullPointerException; ",
  "status" : 400
} 
```

我的 ES 版本是 0.20.4

我的 elasticsearch-lang-python 插件是 1.1.0（我也试过 1.2.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:04:36.870

它看起来像python插件中[的一个错误](https://github.com/elasticsearch/elasticsearch-lang-python/issues/4)。您可以添加空参数列表作为解决方法：

```
curl -XPOST 'localhost:9200/index1/type1/1/_update?pretty=true' -d '{
    "script": "ctx[\"_source\"][\"myfield\"]=\"foo\"",
    "lang": "python",
    "params": {}
}' 
```

# facebook - 如何使用 php curl 获取有效的 fb access_token？

> ID：15493595
> 
> 赞同：0
> 
> 时间：2013-03-19T07:17:40.807
> 
> 标签：facebook, facebook-graph-api

我正在开发一个需要使用 curl 的用户访问令牌的项目。用户将输入他的用户名和密码。他将使用 curl 登录到 facebook。登录部分有效。我还获得了一个包含管道的令牌，例如：xxxxxxx|xxxxxxxxxxxxxxxxx，但我希望将访问令牌发布到登录的用户墙。

我正在使用的代码是：

```
// your facebook credentials
$username = "xxxxxxxxxxxxxxxx";
$password = "xxxxxxxx";

// access to facebook home page (to get the cookies)
$curl = curl_init ();
curl_setopt ( $curl, CURLOPT_URL, "http://www.facebook.com" );
curl_setopt ( $curl, CURLOPT_FOLLOWLOCATION, 1 );
curl_setopt ( $curl, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt ( $curl, CURLOPT_ENCODING, "" );
curl_setopt ( $curl, CURLOPT_COOKIEJAR, getcwd () . '/cookies_facebook.cookie' );
curl_setopt ( $curl, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2) Gecko/20100115 Firefox/3.6 (.NET CLR 3.5.30729)" );
$curlData = curl_exec ( $curl );
curl_close ( $curl );

// do get some parameters for login to facebook
$charsetTest = substr ( $curlData, strpos ( $curlData, "name=\"charset_test\"" ) );
$charsetTest = substr ( $charsetTest, strpos ( $charsetTest, "value=" ) + 7 );
$charsetTest = substr ( $charsetTest, 0, strpos ( $charsetTest, "\"" ) );

$locale = substr ( $curlData, strpos ( $curlData, "name=\"locale\"" ) );
$locale = substr ( $locale, strpos ( $locale, "value=" ) + 7 );
$locale = substr ( $locale, 0, strpos ( $locale, "\"" ) );

$lsd = substr ( $curlData, strpos ( $curlData, "name=\"locale\"" ) );
$lsd = substr ( $lsd, strpos ( $lsd, "value=" ) + 7 );
$lsd = substr ( $lsd, 0, strpos ( $lsd, "\"" ) );

// do login to facebook
$curl = curl_init ();
curl_setopt ( $curl, CURLOPT_URL, "https://login.facebook.com/login.php?login_attempt=1" );
curl_setopt ( $curl, CURLOPT_FOLLOWLOCATION, 1 );
curl_setopt ( $curl, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt ( $curl, CURLOPT_POST, 1 );
curl_setopt ( $curl, CURLOPT_SSL_VERIFYPEER, false );
curl_setopt ( $curl, CURLOPT_POSTFIELDS, "charset_test=" . $charsetTest . "&locale=" . $locale . "&non_com_login=&email=" . $username . "&pass=" . $password . "&charset_test=" . $charsetTest . "&lsd=" . $lsd );
curl_setopt ( $curl, CURLOPT_ENCODING, "" );
curl_setopt ( $curl, CURLOPT_COOKIEFILE, getcwd () . '/cookies_facebook.cookie' );
curl_setopt ( $curl, CURLOPT_COOKIEJAR, getcwd () . '/cookies_facebook.cookie' );
curl_setopt ( $curl, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.2) Gecko/20100115 Firefox/3.6 (.NET CLR 3.5.30729)" );

$url = "https://graph.facebook.com/oauth/access_token";
$postString = "client_id=XXXXXXXX&client_secret=XXXXXXXXXXXXXXX&type=client_cred";

curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_FAILONERROR, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $postString);
$access_token = str_replace( "access_token=", "", curl_exec($curl) );

echo $access_token; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:32:27.033

为什么使用卷曲？你不能使用PHPSDK？它更容易...

但是我认为您错过了权限参数。

[http://developers.facebook.com/docs/reference/login/](http://developers.facebook.com/docs/reference/login/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:36:26.543

[SDK PHP 库（您可以在此处](https://github.com/facebook/facebook-php-sdk)找到更新版本）也使用 cURL。我们是否有机会重新发明轮子？

# c# - Windows 应用程序突然终止

> ID：15493596
> 
> 赞同：0
> 
> 时间：2013-03-19T07:17:42.883
> 
> 标签：c#

嗨，我的 Windows 应用程序突然停止工作并在 Windows 7 操作系统上出现错误。

“一个问题导致程序停止正常工作。Windows 将关闭程序并通知您是否有可用的解决方案。”

甚至错误日志也没有写入我的错误日志文件中。

我已经尝试并 Catch 阻止我的每个功能..

为什么？？

# c# - 连接到局域网上的mysql数据库

> ID：15493598
> 
> 赞同：0
> 
> 时间：2013-03-19T07:17:58.247
> 
> 标签：c#

我需要在 LAN 上运行我的 c# 应用程序。数据库托管在我朋友的笔记本电脑上，使用 xampp 中的 mysql。

在我的连接类中，此方法返回连接字符串。

```
 public string DBgetConnectionString()
    {
        return "server=172.22.45.157;Database=smartlearningdb;Userid=root;Password=;";
    } 
```

但是，它无法打开连接。**如果我使用`server=localhost`，我的笔记本电脑上有数据库的本地副本，它可以工作。**另外，如果我在浏览器中输入 172.22.45.157/phpmyadmin，我可以访问他笔记本电脑上的数据库。

我想要的是让数据库只在他的电脑上，让每个人都能在局域网中运行应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:24:48.223

您需要在数据库中启用远程连接。

添加这个ip或者添加符号%

像这样：

```
mysql> update db set Host='172.22.45.157' where Db='smartlearningdb'; 
```

`mysql> update user set Host='172.22.45.157' where user='root';`

在 phpmyadmin 中： ![phpmyadmin](../Images/c20b7f350b5415d25b7cba3eb43d8871.png)

# ios6 - INApp购买（ios 6）如何创建kStoredData@“com.emirbytes.IAPNoobService”

> ID：15493600
> 
> 赞同：0
> 
> 时间：2013-03-19T07:18:12.613
> 
> 标签：ios6, in-app-purchase, in-app-billing, iphone-5, xcode4.6

我们正在使用 InApp 购买教程“ [http://xcodenoobies.blogspot.in/2012/04/implementing-inapp-purchase-in-xcode.html](http://xcodenoobies.blogspot.in/2012/04/implementing-inapp-purchase-in-xcode.html) ”。我们不知道如何创建 kStoredData @"com.emirbytes.IAPNoobService "

告诉我如何创建：-- kStoredData @"com.emirbytes.IAPNoobService"

有人解决这个问题吗？

先感谢您。

我们正在使用以下代码：-

@implementation 视图控制器

@synthesize feature2Btn, featureLabel, statusLabel;

# 定义 kStoredData @"com.emirbytes.IAPNoobService"

-(BOOL)IAPItemPurchased {

```
// check userdefaults key

NSError *error = nil;
NSString *password = [SFHFKeychainUtils getPasswordForUsername:@"IAPNoob01" andServiceName:kStoredData error:&error];

if ([password isEqualToString:@"whatever"]) return YES; else return NO; 
```

}

-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{

```
// remove wait view here
statusLabel.text = @"";

SKProduct *validProduct = nil;
int count = [response.products count];

if (count>0) {
    validProduct = [response.products objectAtIndex:0];

    SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"com.emirbytes.IAPNoob.01"];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment];

} else {
    UIAlertView *tmp = [[UIAlertView alloc] 
                        initWithTitle:@"Not Available" 
                        message:@"No products to purchase"
                        delegate:self 
                        cancelButtonTitle:nil 
                        otherButtonTitles:@"Ok", nil]; 
    [tmp show];
    [tmp release];
} 
```

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

```
if (alertView==askToPurchase) {
    if (buttonIndex==0) {
        // user tapped YES, but we need to check if IAP is enabled or not.
        if ([SKPaymentQueue canMakePayments]) { 

            SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:
            [NSSet setWithObject:@"com.emirbytes.IAPNoob.01"]];

            request.delegate = self;  
            [request start];  

        } else {
            UIAlertView *tmp = [[UIAlertView alloc] 
                                initWithTitle:@"Prohibited" 
                                message:@"Parental Control is enabled, cannot make a purchase!"
                                delegate:self 
                                cancelButtonTitle:nil 
                                otherButtonTitles:@"Ok", nil]; 
            [tmp show];
            [tmp release];
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:14:23.513

要创建 kStoreDate 数据，您需要 iTunes 连接登录，然后您必须从应用程序的应用内购买选项卡添加它！

这是展示如何创建 kStoreDate 的最佳教程，在这里检查与[应用内购买的完全集成](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

# c - 从地址构造 C 中的指针

> ID：15493601
> 
> 赞同：1
> 
> 时间：2013-03-19T07:18:14.620
> 
> 标签：c, pointers, mpi

我最初从另一个处理器获得一个指针的地址，我需要一个指向该地址处项目的指针。不要太担心 MPI_Recv，只要知道我正在从另一个处理器获取信息。所以我有：

```
MPI_Recv(&a, sizeof(int), MPI_INT, 0, 1, MPI_COMM_WORLD, &status);  

c = a;
printf("%d",c[0]); 
```

为什么这会给我一个分段错误？在设置 c = a 之前，我也尝试为 c 分配内存，它仍然会出现段错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:19:38.160

每个进程都有自己独立的[虚拟地址空间](http://en.wikipedia.org/wiki/Virtual_address_space)。来自一个进程的指针在另一个进程的上下文中是没有意义的。

你有几个选择：

1.  使用[线程](http://en.wikipedia.org/wiki/Thread_%28computing%29)而不是进程。
2.  使用[共享内存](http://en.wikipedia.org/wiki/Shared_memory)。
3.  发送实际数据而不仅仅是一个指针。

如果您的进程可以驻留在不同的计算机上，则只有最后一个选项是可行的。

# iphone - 当iphone键盘出现时，如何在中心显示我的活动文本字段？

> ID：15493602
> 
> 赞同：-3
> 
> 时间：2013-03-19T07:18:25.193
> 
> 标签：iphone, ios, objective-c, keyboard, uitextfield

除了顶部的文本字段，当我开始输入时，iphone 键盘会隐藏所有剩余的文本字段。如何在键盘上方显示活动的文本字段，然后在键盘隐藏时将其恢复正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:23:11.233

注意`UIKeyboardWillShowNotification`和`UIKeyboardWillHideNotification`。与这些通知一起传递的`NSNotification`对象将具有 userInfo 字典，其中包含有关键盘完成动画后将具有的帧的信息。根据这些通知调整您的布局，以防止您想要的东西被键盘覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:23:19.123

在将所有文本字段放入滚动视图之前使用以下代码。

```
 #define kOFFSET_FOR_KEYBOARD 80.0

-(void)keyboardWillShow {
    // Animate the current view out of the way
    if (self.view.frame.origin.y >= 0)
    {
        [self setViewMovedUp:YES];
    }
    else if (self.view.frame.origin.y < 0)
    {
        [self setViewMovedUp:NO];
    }
}

-(void)keyboardWillHide {
    if (self.view.frame.origin.y >= 0)
    {
        [self setViewMovedUp:YES];
    }
    else if (self.view.frame.origin.y < 0)
    {
        [self setViewMovedUp:NO];
    }
}

-(void)textFieldDidBeginEditing:(UITextField *)sender
{
    if ([sender isEqual:mailTf])
    {
        //move the main view, so that the keyboard does not hide it.
        if  (self.view.frame.origin.y >= 0)
        {
            [self setViewMovedUp:YES];
        }
    }
}

//method to move the view up/down whenever the keyboard is shown/dismissed
-(void)setViewMovedUp:(BOOL)movedUp
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3]; // if you want to slide up the view

    CGRect rect = self.view.frame;
    if (movedUp)
    {
        // 1\. move the view's origin up so that the text field that will be hidden come above the keyboard 
        // 2\. increase the size of the view so that the area behind the keyboard is covered up.
        rect.origin.y -= kOFFSET_FOR_KEYBOARD;
        rect.size.height += kOFFSET_FOR_KEYBOARD;
    }
    else
    {
        // revert back to the normal state.
        rect.origin.y += kOFFSET_FOR_KEYBOARD;
        rect.size.height -= kOFFSET_FOR_KEYBOARD;
    }
    self.view.frame = rect;

    [UIView commitAnimations];
}

- (void)viewWillAppear:(BOOL)animated
{
    // register for keyboard notifications
    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillShow)
                                             name:UIKeyboardWillShowNotification
                                           object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillHide)
                                             name:UIKeyboardWillHideNotification
                                           object:nil];
}

- (void)viewWillDisappear:(BOOL)animated
{
    // unregister for keyboard notifications while not visible.
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                             name:UIKeyboardWillShowNotification
                                           object:nil];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                             name:UIKeyboardWillHideNotification
                                           object:nil];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:24:43.747

放入`UITextField`并`UIScrollView`使用如下`contentOffSet`属性`UIScrollView`：

```
-(BOOL) textFieldShouldBeginEditing:(UITextField *)textField
{
    if (textField == txt1) //
    {
       [txt1 becomesFirstResponder];
       scrMainView.contentOffset = CGPointMake(0, 20);
    }

    else if (textField == txt2) //
    {
       [txt1 resignFirstResponder];
       [txt2 becomesFirstResponder];
       scrMainView.contentOffset = CGPointMake(0, 60);
    }
    //And so on..
    return YES;
} 
```

希望，你会得到答案。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:21:11.690

您必须在视图顶部使用滚动视图，并根据您选择的文本字段实现数学 contentOffset 设置。您选择的文本字段可以从委托方法中获得，偏移量的计算可以通过文本字段框架完成

# c# - 如何将控制台应用程序转换为 Windows 服务？

> ID：15493603
> 
> 赞同：2
> 
> 时间：2013-03-19T07:18:31.357
> 
> 标签：c#, windows-services, console-application

如何将 C# 中的控制台应用程序转换为 Windows 服务？有模板可以做到吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T07:32:15.090

在您的代码内部，您可以使用 Environment.UserInteractive 属性来确定您处于控制台/服务中的哪种模式。

例子：

```
static class Program
{
    static void Main(params string[] args)
    {
        var service = new Service1();

        if (!Environment.UserInteractive)
        {
            var servicesToRun = new ServiceBase[] { service };
            ServiceBase.Run(servicesToRun);
            return;
        }

        Console.WriteLine("Running as a Console Application");
        Console.WriteLine(" 1\. Run Service");
        Console.WriteLine(" 2\. Other Option");
        Console.WriteLine(" 3\. Exit");
        Console.Write("Enter Option: ");

        var input = Console.ReadLine();

        switch (input)
        {
            case "1":
                service.Start(args);
                Console.WriteLine("Running Service - Press Enter To Exit");
                Console.ReadLine();
                break;
            case "2":
                break;
        }
        Console.WriteLine("Closing");
    }
}

public partial class Service1 : ServiceBase
{
    public Service1() { InitializeComponent(); }
    public void Start(string[] args) { OnStart(args); }
    protected override void OnStart(string[] args) { }
    protected override void OnStop() { }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:22:18.323

当我在调试模式下构建以简化调试时，我经常让我的 Windows 服务作为控制台应用程序运行。

在您的情况下，最直接的方法可能是创建一个新的 Windows 服务以具有正确的主入口点结构和正确的引用，然后将您的控制台应用程序代码集成到该结构中。

必须重写从控制台读取/写入。

如果您必须阅读用户输入，请考虑使用其他方法将该输入提供给服务。如果您将输出写入控制台，请将其写入日志。我个人会推荐 NLog。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-19T08:08:45.640

项目的常规属性-> 将类型更改为类库。
您可以删除主函数，因为它不会被调用

# winapi - 如何强制窗口在 Win32 中绘制？

> ID：15493608
> 
> 赞同：1
> 
> 时间：2013-03-19T07:18:49.203
> 
> 标签：winapi, draw

作为由 WndProc() 处理的消息调用的某个函数的一部分，我的窗口无效。但是，在我的功能继续之前，我需要立即重绘窗口的内容。有没有办法从我的外部函数调用 WndProc(hWnd, WM_CREATE, NULL, NULL) 或类似的东西？

# java - 从流式 URL 读取 JSON 数据？

> ID：15493613
> 
> 赞同：1
> 
> 时间：2013-03-19T07:19:34.280
> 
> 标签：java, url, streaming

我正在尝试从流式 URL 使用 JSON 数据

代码片段如下

```
 HttpClient httpclient = new DefaultHttpClient();
   HttpResponse response = httpclient.execute(new HttpGet(url));

   if(response.getEntity().isStreaming() ){
     while (true) {
       BufferedHttpEntity _entity = new BufferedHttpEntity(response.getEntity());
       InputStream _stream = _entity.getContent();
       JSONObject _interaction = new JSONObject(_stream.toString());
       System.out.println(_interaction.toString());
    }
} 
```

请指导我在没有任何外部库的情况下使用它

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:35:11.563

您可以使用 DataContractJsonSerializer 在此处查看更多信息：http: [//msdn.microsoft.com/en-us/library/bb412179.aspx](http://msdn.microsoft.com/en-us/library/bb412179.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:02:48.390

我不知道“没有外部库”是什么意思，因为没有它有点难。

google 模块 gson ( [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/) ) 非常易于使用：

```
String jsonString = "your json string";
Gson gson = new Gson();
YourClass obj = gson.fromJson(jsonString, YourClass.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T02:40:18.277

使用缓冲阅读器破解它

```
 HttpClient httpclient = new 
        HttpResponse response = httpclient.execute(new HttpGet(url));

        if(response.getEntity().isStreaming() ){
                HttpEntity _entity = response.getEntity();
                BufferedReader reader = new BufferedReader(new InputStreamReader(_entity.getContent(),"utf-8"),8);
                String line = null;
                while ((line = reader.readLine()) != null) {
                    System.out.println( line.toString());
                }
                _entity.getContent().close();                   
        } 
```

这解决了我的问题。

# jakarta-ee - java.lang.ClassNotFoundException：org.apache.derby.iapi.services.property.PropertyUtil

> ID：15493618
> 
> 赞同：1
> 
> 时间：2013-03-19T07:19:59.753
> 
> 标签：jakarta-ee, netbeans, glassfish, derby, classnotfoundexception

当我在 Netbeans 中创建 Java Web 应用程序并尝试部署和运行它时，会引发以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/derby/iapi/services/property/PropertyUtil
    at org.apache.derby.impl.drda.NetworkServerControlImpl.getPropertyInfo(Unknown Source)
    at org.apache.derby.impl.drda.NetworkServerControlImpl.<init>(Unknown Source)
    at org.apache.derby.drda.NetworkServerControl.main(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.apache.derby.iapi.services.property.PropertyUtil
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 3 more 
```

清理和构建工作正常。早些时候，我曾经在我现在遇到问题的机器上成功部署和运行另一个 Java Web 应用程序。

我使用的是 Netbeans 7.1。我尝试升级到 Netbeans 7.3，但这并没有解决问题。我还尝试将 MySQL Connector/J JAR 文件放在`/lib`Glassfish 的文件夹中，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:09:26.117

获得 Derby 类的 ClassNotFoundException 有两个基本原因：

1.  您在 CLASSPATH 中缺少一个 Derby jar。例如，您可能已将 derbynet.jar 放在 CLASSPATH 中，但没有 derby.jar。
2.  您的 CLASSPATH 中有多个 Derby jar 副本，并且版本不兼容。例如，您的类路径中可能有两个不同的 Derby.jar 类，而旧的与新的不兼容。

三件事可以使这更加复杂：

1.  Derby 的 jar 文件经常捆绑到其他包中。例如，我认为 Glassfish 本身捆绑了 Derby 的副本，因此与 Glassfish 捆绑的 Derby 版本与您与应用程序打包的版本之间可能存在冲突
2.  对于现代版本的 Java，Java 虚拟机本身将在启动时“自动加载”Derby JDBC 驱动程序，这意味着有时 Derby 已在您打算加载之前就已加载，这会使您控制所使用的 Derby 版本的能力变得复杂使用。
3.  Java-EE 类路径规则很复杂，应用程序的运行类路径由每个应用程序的类路径位置、应用程序服务器提供的类路径位置和系统类路径位置构成。

Derby 'sysinfo' 工具旨在帮助诊断 CLASSPATH 问题，因此您可以尝试使用它来更全面地了解在您的类路径中找到了哪些 Derby jar 副本。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:54:45.240

唯一的问题是在那台机器上，**有人删除了 Java。**:(

# python - 如何在 Eclipse Pydev 中删除错误“错误”标记

> ID：15493622
> 
> 赞同：0
> 
> 时间：2013-03-19T07:20:18.457
> 
> 标签：python, eclipse, pydev

环境：Windows 7 (Python 2.7)

这是问题所在：
![在此处输入图像描述](../Images/f2aba97d5a4b79fc41b359cea3421cde.png)

奇怪的是，这个脚本可以正常运行。我只想删除烦人的错误标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:46:55.027

[我在这里](https://stackoverflow.com/questions/2112715/how-do-i-fix-pydev-undefined-variable-from-import-errors)和[这里](https://stackoverflow.com/questions/2143549/undefined-variable-from-import-when-using-wxpython-in-pydev/3743861#3743861)发现了类似的问题。结合给出的几个答案后，Eclipse 现在可以正常工作了：

1.  [将文件夹 'Lib' 的名称更改为 'lib' (C:\Python27\lib)](https://stackoverflow.com/a/7240776/1035859)
2.  在 Window -> Preferences -> Pydev -> Interpreter - Python 中，在 PYTHONPATH 中添加 PIL 文件夹。点击`Apply`, `OK`, 重启 Eclipse... 世界又美丽了

# c# - SQLite：没有这样的表

> ID：15493625
> 
> 赞同：4
> 
> 时间：2013-03-19T07:20:27.333
> 
> 标签：c#, sqlite, sqlite-net

我断断续续地`SQLiteException`声称“没有这样的表：HomepageSection”。它始终是同一张表，但停止应用程序并重新启动它，问题就消失了。如果数据库丢失，有时会发生这种情况，有时会在数据库存在时发生。

这些表是在打开数据库文件时使用[sqlite-net](https://github.com/praeclarum/sqlite-net)的`SQLiteAsyncConnection.CreateTableAsync`方法创建的（是的，在此异常发生之前它们会被等待）。

我正在连接到正确的数据库文件，我已经检查了多次。我直接在 SQLite 浏览器中打开从连接对象获得的路径，但`HomepageSection`表不存在。

引发以下`SQLiteException`查询：`insert OR REPLACE into "HomepageSection"("Title","Version","Id","Updated") values (?,?,?,?)`（SQLite.cs，Prepare2()，第 2951 行）

据称创建表的行没有抛出异常：

```
await _connection.CreateTableAsync<HomepageSection>(); 
```

解决这个问题的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T18:36:54.573

我遇到了同样类型的间歇性错误。我进行了以下更改，到目前为止，还没有客户报告新的错误。

我在连接字符串中关闭了 sqlite 自动创建数据库。

```
connectionString="Data Source=default.db3; Foreign Keys=true; FailIfMissing=True;" 
```

打开 FailIfMissing 后，我收到了无法打开数据库而不是没有这样的表的报告。似乎 sqlite 无法打开我的 db3 文件，因此它创建了一个没有表的新数据库。它必须在内存中创建它，因为我在驱动器上找不到任何新的 db 文件。

为了纠正这个问题，我使用单例模式只建立一个连接并在应用程序的整个生命周期中保持打开状态。还有其他方法可以做到这一点，但我对单例有更多的经验。这不是完整的课程代码，只是让您入门的几个部分。

```
public static SQLite Instance
{
  get
  {
    if (instance == null) 
      {
        instance = new SQLite();
        mySQLiteConn = new SQLiteConnection(ConnectionString);
        mySQLiteConn.Open();
      }
      return instance;
  }
}

public void Execute(string SQL)
{
  using (SQLiteCommand myCommand = new SQLiteCommand(SQL, mySQLiteConn))
  {
    myCommand.ExecuteNonQuery().ToString();
  }
} 
```

所以要执行插入，你会这样做：

```
SQLite.Instance.Execute("Insert .....;"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T12:33:51.610

我有一个类似的问题。我所做的只是创建表（没有查询，没有别的），并通过直接查看数据库来查看表是否真的被创建。在这里，您可以了解您的数据结构是否存在问题。您已经完成了大多数事情，但如果未创建表，您应该调查原因。

在我的情况下，我在`int`和`string`（id 字段和主键）之间有些混淆，而且我也忘记为一对一连接创建一个 id 属性。大多数情况下，异常并不能提供信息，但您应该始终捕获异常并找到内部异常。有时他们可以给你一个提示。

# php - 在 Wordpress 博客上获取空白页

> ID：15493629
> 
> 赞同：1
> 
> 时间：2013-03-19T07:20:38.253
> 
> 标签：php, wordpress, nginx

我有一个 Wordpress 博客，在我将 PHP 5.3 更新到 5.5 之前它运行良好。现在整个博客都是空白的。我无法查看管理页面甚至登录页面。我在谷歌上搜索了很多后尝试修复它，但它仍然无法正常工作。

我经历了这些解决方案：

*   [http://www.hongkiat.com/blog/common-wordpress-errors-with-solutions/](http://www.hongkiat.com/blog/common-wordpress-errors-with-solutions/)
*   [http://www.velvetblues.com/web-development-blog/my-wordpress-blog-is-blank/](http://www.velvetblues.com/web-development-blog/my-wordpress-blog-is-blank/)

如这些解决方案中所述，主要原因是主题错误或插件。所以我将我的插件文件夹更改为 plugins_temp 但仍然得到那个空白页。然后我将我的主题文件夹更改为 theme_temp ，但我仍然遇到了同样的问题。

在我在这里提交的第一个链接中，有这个解决方案`# 3 Warning: Cannot modify Header information`，他们提出了一个解决方案，即 wp-config.php 在 php '?>' 结束标记之后将有一个空行。我查看了我的 wp-config.php 并且没有结束标记“？>”。所以我添加了没有空行的标签，但仍然没有解决空白页问题。

我在不同的子域上有另一个 PHP 网站，它运行良好。在我博客的根文件夹中有 readme.html，当我使用这个 url (myblog/readme.html) 时，该文件会显示在浏览器上，因此只有没有 PHP 文件被呈现。

最后，我确实尝试安装一个全新的 Wordpress 站点，但是当我去 install.php 时，没有任何文件被执行。

我正在使用 php5-fpm、Ubuntu 12.04 和 NginX。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:32:51.070

您是否尝试打开调试模式？

您在*wp-config.php*中执行此操作。

找到`define('WP_DEBUG', false);`并将其设置为 true。

我会尝试的另一件事是制作一些简单的 php 文件并测试它是否有效。就像是：

```
<?php

echo "test";

?> 
```

**更新：**

由于您可能对 php 本身有问题，请检查 stackoverflow [php not working with nginx on ubuntu](https://stackoverflow.com/questions/5059194/php-not-working-with-nginx-on-ubuntu)上的这个问题：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T01:27:32.680

## 一些常见的解决方案

1.  **定义（'WP_DEBUG'，假）；设置为 TRUE** - wordpress 关闭错误报告，这就是你得到白屏的原因。打开它会显示错误消息。
2.  **错误报告（E_ALL）；ini_set('display_errors', '1');** - 如果上述解决方案不起作用，您可以手动将其添加到您的 wp-config 或崩溃的模板文件中。
3.  如果其他一切都失败了，那么您可以尝试使用**die('runs until here') 之**类的东西来跟踪代码。这是一种非常费力的方法，但它肯定会指出问题所在。我这样做过一次，后来发现白屏是由**超出内存限制**错误引起的。解决方案 1 和 2 看不到这种错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:26:39.993

检查您的错误日志，很可能其中一个已安装的插件与 PHP 5.5 不兼容尝试找出哪一个，并通过 wordpress 数据库或文件系统禁用它： [http ://www.ostraining.com/blog/wordpress/禁用-a-wordpress-plugin/](http://www.ostraining.com/blog/wordpress/disable-a-wordpress-plugin/)

# c# - 逗号分隔列表中的分隔符和自由文本字段

> ID：15493632
> 
> 赞同：0
> 
> 时间：2013-03-19T07:21:02.413
> 
> 标签：c#, .net, string

我有这个列表，我用它来分隔参数，这些参数稍后用作输入中的命令。

问题是其中一个字段是自由文本，可供用户写入。我如何确保格式化自由文本或使用用户不会意外使用的分隔符？现在我使用逗号分隔命令，但我担心用户会写一个逗号并弄乱解决方案。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:43:09.547

您可以选择一个深奥/不可能键入的字符作为分隔符，也可以使用转义字符。

IE：

```
command|parameter, string  <- Esoteric character 
```

或者

```
command,parameter\, string <- Escape character 
```

就个人而言，我会选择一个深奥的字符，因为您仍然可以使用简单的 String.Split 函数。您始终可以检查用户的输入，以确保他们没有包含带有您用作分隔符的字符的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:35:40.443

你可以使用正则表达式。这是一个很棒的教程[http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

然后，您可以执行以下操作来验证用户输入：

```
var stringToTest = "abcd";
Regex testRegex = new Regex("[^0-9]");
var isMatch = textRegex.IsMatch(strNumber); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:42:45.167

[CSV 文件的 MIME 标准](https://www.rfc-editor.org/rfc/rfc4180)解释了如何正确构建可能包含逗号的 CSV 文件：

1.  用双引号将值括起来
2.  如果值中有双引号，请将它们加倍

例如，假设您要构建具有以下值的 CSV 文件：

```
Hello
Well, does this work?
I guess this "kinda" work 
```

那么结果将是：

```
"Hello","Well, does this work?","I guess this ""kinda"" work" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T07:27:28.147

我最终得到的解决方案看起来像这样，它使用三个深奥的字符来最小化与用户输入混淆的风险。

```
return string.Format("true|~|eventEdit|~|{0}|~|{1}|~|{2}|~|{3}|~|{4}", variable,         variable, variable, variable, variable);

string[] stringSeparators = new string[] { "|~|" };
string[] parameters = PlanningTypeIcon.CommandArgument.ToString().Split(stringSeparators,    StringSplitOptions.None); 
```

# android - Android上的通知管理器问题

> ID：15493633
> 
> 赞同：2
> 
> 时间：2013-03-19T07:21:07.647
> 
> 标签：android, notifications, notify, notificationmanager

我正在尝试使用按钮进行通知，但不推荐使用 Notification 和 setLatestEventInfo。

两个错误：

1.构造函数 Notification(int, CharSequence, long) 被弃用`Notification notify = new Notification(android.R.drawable.stat_notify_more, "Hello all", System.currentTimeMillis());`

2.Notification`setLatestEventInfo(Context, CharSequence, CharSequence, PendingIntent)`类型中的方法不适用于参数`(Context, CharSequence, CharSequence, Intent) notify.setLatestEventInfo(context, title, details, intent);`

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener() {   
        @Override
        public void onClick(View v) {
            NotificationManager ns = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
            Notification notify = new Notification(android.R.drawable.stat_notify_more, "Hello all", System.currentTimeMillis());
            Context context = MainActivity.this;
            CharSequence title ="you have be notified";
            CharSequence details = "Continue your work";
            Intent intent = new Intent(context,MainActivity.class);
            PendingIntent pending = PendingIntent.getActivity(context, 0, intent, 0);
            notify.setLatestEventInfo(context, title, details, intent);
            ns.notify(0,notify);

        }
    });
} 
```

API级别：

```
 android:minSdkVersion="11"
       android:targetSdkVersion="17" 
```

什么是替代方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T07:32:10.137

**1\. 构造函数在 api 级别 11 中被弃用。**所以你应该使用`Notification.Builder`.

*例如*

```
Notification notification = new Notification.Builder(mContext)
     .setContentTitle("New mail from " + sender.toString())
     .setContentText(subject)
     .setSmallIcon(R.drawable.new_mail)
     .setLargeIcon(aBitmap)
     .build(); 
```

**2.在您的代码中，您传递的是意图而不是在 setLatestEventInfo 中挂起**

```
....
Intent intent = new Intent(context,MainActivity.class);
        PendingIntent pending = PendingIntent.getActivity(context, 0, intent, 0);
        notify.setLatestEventInfo(context, title, details, pending);
        ns.notify(0,notify);
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:32:08.763

```
notificationManager =
    (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
   myNotification = new Notification(R.drawable.icon,
     "Notification!",
     System.currentTimeMillis());
   Context context = getApplicationContext();
   String notificationTitle = "Exercise of Notification!";
   String notificationText = "http://niravranpara.blogspot.com/";
   Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(myBlog));
   PendingIntent pendingIntent
     = PendingIntent.getActivity(AndroidNotification.this,
       0, myIntent,
       Intent.FLAG_ACTIVITY_NEW_TASK);
   myNotification.defaults |= Notification.DEFAULT_SOUND;
   myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
   myNotification.setLatestEventInfo(context,
      notificationTitle,
      notificationText,
      pendingIntent);
   notificationManager.notify(MY_NOTIFICATION_ID, myNotification);

  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:37:49.020

这些构造函数和方法已被弃用。因此您应该改用通知生成器。

`Notification noti = new Notification.Builder(mContext) .setContentTitle("New mail from " + sender.toString()) .setContentText(subject)
.setSmallIcon(R.drawable.new_mail) .setLargeIcon(aBitmap) .build();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-13T09:40:15.267

而不是`System.currentTimeMillis()` 尝试`java.lang.System.currentTimeMillis()`

# hibernate - 休眠中的延迟初始化

> ID：15493640
> 
> 赞同：2
> 
> 时间：2013-03-19T07:21:30.630
> 
> 标签：hibernate, lazy-initialization

我正在尝试学习 Hibernate，我通过了**`hibernate lazy initialization`**. 我有一些关于**`lazy initialization.`**

首先，什么叫惰性初始化，它是做什么的？其次，我应该什么时候去？接下来，我在博客中说，使用它可以提高性能，我只需要知道如何。那么，使用它有什么缺点吗？任何人都可以帮助我理解这一点**`lazy initialization`**吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T07:32:29.260

延迟获取（或初始化）与*急切*获取相反。延迟抓取，休眠中的默认设置，意味着当从数据库中加载一条记录时，不加载一对多关系的子行。例如

```
@Entity
@Table(name = "COMPANY")
public class Company {
...
@OneToMany(fetch = FetchType.LAZY)
private Set<Employee> employees = new HashSet<Employee>(); 
```

请求公司记录不会返回（设置）员工，必须在另一个查询中请求。

好处

*   表现。仅在需要（和请求）时才加载员工。受益于 CPU、内存、带宽......（Java 端和 SQL 服务器端）。

缺点

*   当还需要员工时，必须执行单独的查询。

请注意，必须在同一会话期间执行对雇员的查询（否则著名的*LazyInitializationException*将不受欢迎）。

[此页面](http://java.dzone.com/articles/lazyeager-loading-using)包含有趣的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T07:27:11.980

延迟初始化意味着延迟加载。

短短几句话——

> 当你第一次需要一个对象时初始化它，它可以为你提供高性能，因为不需要的对象不会被加载。”

例如 - 假设您需要有一个连接多个表的记录。如果您一次获取所有内容，则将比仅获取主表花费更长的时间。使用延迟加载将仅在需要时获取其余信息。所以它实际上是`efficient-loading`在某些场景中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-18T07:17:39.097

延迟设置决定是否在加载父对象时加载子对象。您需要设置父类的各个休眠映射文件。`Lazy = true`（表示不加载子对象）默认情况下子对象的延迟加载为true。这确保子对象不会被加载，除非它们通过调用`getChild()`父对象的方法在应用程序中显式调用。`getChild()`在这种情况下，当在父对象上实际调用时，hibernate 会发出一个新的数据库调用来加载子对象。但在某些情况下，您确实需要在加载父对象时加载子对象。当从数据库加载父级时，只需设置`lazy=false`和休眠将加载子级。示例`lazy=true`（默认）如果不经常需要，可以将 User 类的地址子级设为惰性。`lazy=false`但是，当您处理在线书店的图书时，您可能需要为 Book 父级加载 Author 对象。

# c# - 如何加载导航属性的属性？

> ID：15493641
> 
> 赞同：0
> 
> 时间：2013-03-19T07:21:31.460
> 
> 标签：c#, entity-framework, lazy-loading

我正在尝试使用急切加载导航属性来创建查询。有没有办法加载导航属性的属性？当我尝试下面的代码时，我得到一个“序列不包含元素”异常。

```
 var viewModel = new InstructorIndexData();
        viewModel.Instructors = db.Instructors.Include(i => i.OfficeAssignment)
            .Include(i=>i.Assignments) 
             .Include(i => i.Students)
             .Include (i=>i.Enrollments )
            .Include(i => i.Courses.Select(c => c.Department))
            .OrderBy(i => i.LastName);

        viewModel.Courses = viewModel.Instructors.Where(i => i.InstructorID == id).Single().Courses;
        viewModel.Enrollments = viewModel.Courses.Where(x => x.CourseID == courseID).Where( e=>e.Enrollments.First().InstructorFullName == "Kim Abercrombie").Single().Enrollments; 
```

但是，当我使用：

```
 viewModel.Enrollments = viewModel.Courses.Where(x => x.CourseID == courseID).Single().Enrollments; 
```

它很好地填充了我的 viewModel.Enrollment 属性。有没有办法在 linq 查询中访问这种类型的复杂属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:19:46.530

> 有没有办法加载导航属性的属性？

看起来您已经知道如何预先加载多个级别：

```
viewModel.Instructors = db.Instructors.Include(i => i.OfficeAssignment)
        .Include(i=>i.Assignments) 
         .Include(i => i.Students)
         .Include (i=>i.Enrollments )
        .Include(i => i.Courses.Select(c => c.Department))
        .OrderBy(i => i.LastName); 
```

这是您可能遇到异常的地方（或者可能是您的其他用途`.Single()`）：

```
viewModel.Enrollments = viewModel.Courses
   .Where(x => x.CourseID == courseID)
   .Where( e=>e.Enrollments.First().InstructorFullName == "Kim Abercrombie")
   .Single().Enrollments; 
```

从[文档](http://msdn.microsoft.com/en-us/library/bb156472.aspx)中`.Single()`

> 返回序列的唯一元素，如果序列中不完全有一个元素，则抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T06:46:09.017

这是我解决它的方法。var selectTemp = viewModel.Courses.Where(x => x.CourseID == courseID).Single().Enrollments;

```
 var selectedTeacher = from t in selectTemp where t.InstructorFullName == teacher select t;

            viewModel.Enrollments = selectedTeacher; 
```

# jquery - 轻巧的jQuery插件

> ID：15493644
> 
> 赞同：0
> 
> 时间：2013-03-19T07:21:37.463
> 
> 标签：jquery, flippy

我是 jquery 的新手，我有兴趣使用 Flipy 插件来移动图片。我去了网站 [http://blog.guilhemmarty.com/flippy/](http://blog.guilhemmarty.com/flippy/)。

在这个例子中我发现了这个

```
$("#myFlippyBox").flippy({
content:"Hi !",
direction:"TOP",
duration:"750",
onStart:function(){
    alert("Let's flip");
},
onFinish:function(){
    alert("ok, it's flipped :)");
}
}); 
```

我想在我的代码中使用它。我制作了一个 id 为 myFlippyBox 的 div，并为其分配了宽度和高度。在js上我写了这段代码

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js">   </script>
<script type="text/javascript" src="js/jquery.flippy.min.js"></script>
<script>
   $(document).ready(function(){

$("#myFlippyBox").click({
$(this).flippy({
content:"Hi !",
direction:"TOP",
duration:"750",
onStart:function(){
    alert("Let's flip");
},
onFinish:function(){
    alert("ok, it's flipped :)");
} 
});
});

});

</script>
 </head>

 <body>

 <div id="myFlippyBox" height ="200px" width="200px">
    Test message
 </div>

 </body>

 </html> 
```

它给了我错误并且对我不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:04:30.590

[.click()](http://api.jquery.com/click/)需要一个函数作为参数，你在哪里传递`$("#myFlippyBox").click({...});`而不是`$("#myFlippyBox").click(function(){...});`

尝试

```
$(document).ready(function() {
    $("#myFlippyBox").click(function() {
        $(this).flippy({
            content : "Hi !",
            direction : "TOP",
            duration : "750",
            onStart : function() {
                alert("Let's flip");
            },
            onFinish : function() {
                alert("ok, it's flipped :)");
            }
        });
    });
}); 
```

# java - 在java中的动态字符串中对当前时间戳的所有出现进行子串化

> ID：15493645
> 
> 赞同：-4
> 
> 时间：2013-03-19T07:21:44.883
> 
> 标签：java

我有一个动态的字符串，即

> [一些文本] [当前时间戳] [更多文本] [一些文本] [当前时间戳] [更多文本]

当字符串长度不断变化时，我如何子串/替换所有出现的当前时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:25:45.763

您可以使用`String.replaceAll(String regex, String replacement)`或`String.replaceFirst(String regex, String replacement)`。

例如：

```
String text = "Pmaingi12345123312OtherTextAndSomeother124123"
text.replaceFirst("regex", "change to this text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:25:53.570

您可以使用类[`replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll)的方法`String`。

```
public String replaceAll(String regex, String replacement) 
```

> 用给定的替换替换此字符串中与给定正则表达式匹配的每个子字符串。

在`given regular expression`您的情况下，将是当前时间戳。并且`replacement`可以是空字符串。`""`或者任何你想替换的东西。

# mysql - 查询以获取数据库日志文件大小

> ID：15493648
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:22:09.560
> 
> 标签：mysql, sql, oracle, db2, sap-iq

我需要所有数据库的查询，例如`SQL`，，等`Oracle`，`MySql`以获取 SQl 服务器的日志文件大小。

```
SELECT * FROM sys.database_files 
```

谁能帮我找到所有数据库的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:31:28.523

在 Oracle 日志文件大小可以在这里检查：

```
select * from v$log; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:01:00.517

在 DB2 中，（事务）日志文件大小可以从

```
select name, varchar(value, 32) 
  from SYSIBMADM.DBCFG 
  where name = 'logfilsiz' 
```

你得到

```
NAME                             2
-------------------------------- --------------------------------
logfilsiz                        4096
  1 record(s) selected. 
```

这意味着 4096 页 4096KB ~= 16 MB

# jruby - pg_ext 在 jruby (rvm) 上抛出“针对无效 ruby 运行时初始化的 C 扩展”

> ID：15493653
> 
> 赞同：2
> 
> 时间：2013-03-19T07:22:30.233
> 
> 标签：jruby, pg, ruby-c-extension

我有一个在 Ruby-1.9.3-p392 上工作的项目，我尝试用 Jruby 加载它（jruby-head 与 rvm 一起安装，目前是 jruby 1.7.4.dev (1.9.3p392)）

所有 rake 任务都失败并出现以下跟踪

```
捆绑执行 rake -T
耙中止！
加载错误：pg_ext -- java.lang.RuntimeException：针对无效的 ruby​​ 运行时初始化 C 扩展
org/jruby/RubyKernel.java:1028:in `require'
/home/dmitry/.rvm/gems/jruby-head/gems/pg-0.14.1/lib/pg.rb:4:in `(root)'
org/jruby/RubyKernel.java:1028:in `require'
/home/dmitry/.rvm/gems/jruby-head/gems/bundler-1.3.4/lib/bundler/runtime.rb:1:in `(root)'
org/jruby/RubyArray.java:1614:在“每个”中
/home/dmitry/.rvm/gems/jruby-head/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
org/jruby/RubyArray.java:1614:在“每个”中
/home/dmitry/.rvm/gems/jruby-head/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `require'
/home/dmitry/.rvm/gems/jruby-head/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
/home/dmitry/.rvm/gems/jruby-head/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
org/jruby/RubyKernel.java:1028:in `require'
/home/dmitry/Work/crossArts/config/application.rb:13:in `(root)'
org/jruby/RubyKernel.java:1047:in `load'
/home/dmitry/Work/crossArts/Rakefile:1:in `(root)'
/home/dmitry/Work/crossArts/Rakefile:5:in `(root)'
org/jruby/RubyKernel.java:1047:in `load'
org/jruby/RubyKernel.java:1067:in `eval'
/home/dmitry/.rvm/gems/jruby-head/bin/ruby_noexec_wrapper:14:in `(root)'

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T20:17:01.357

尝试将 gem 'activerecord-jdbcpostgresql-adapter' 添加到您的 Gemfile 中。这就是我为 puma 2.0.1 和 JRuby 1.7.4 上的 rails 应用程序所做的，它的运行就像一个冠军。

# visual-c++ - 通过 installshield 脚本添加新的环境系统变量

> ID：15493654
> 
> 赞同：1
> 
> 时间：2013-03-19T07:22:33.710
> 
> 标签：visual-c++, batch-file, installshield

我想通过 installshield 脚本（5.5）添加或创建一个新的系统环境变量。任何人都可以帮助我如何在 Windows 7 和 XP 中通过 installshield 脚本添加新的环境变量？

# php - 使用具有大值的 sprintf 附加零

> ID：15493655
> 
> 赞同：2
> 
> 时间：2013-03-19T07:22:41.133
> 
> 标签：php, printf

我需要将多个零附加到一个整数值，这个零的数量可能最多 20 个。

```
 echo sprintf("%020d",'123456789101112'); 
```

但我得到了结果

```
 00000000002147483647 
```

这是错误的，我需要得到 00000123456789101112，有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:25:32.740

你可以使用[str_pad](http://hu2.php.net/manual/en/function.str-pad.php)：

```
$value = "123456789101112";
echo str_pad($value, 20, '0', STR_PAD_LEFT); 
```

**输出**

```
00000123456789101112 
```

# sql - 通过 SQL 语句将行列数据转换为行

> ID：15493658
> 
> 赞同：0
> 
> 时间：2013-03-19T07:22:58.147
> 
> 标签：sql, oracle11g

我目前在这里使用 oracle 11g 是我面临的问题。我有一个 SQL 语句显示如下：

```
 SELECT A.LM_PERSON_ID
 ,A.LM_GRADE
 ,C.COURSE_STR
 ,Decode (A.LM_GRADE,'001','1','002','2','003','3') AS JOB_GRADE

 FROM PS_LM_PERSON_JOB A
,PS_LM_LPLN_LRN B 
,PS_LM_LPLN_DTL C 
,PS_LM_ENRLMT D
,PS_LM_CI_TBL E 

WHERE A.LM_EMPL_RCD='0'
AND A.LM_EFFSEQ=(SELECT Max(A1.LM_EFFSEQ) FROM PS_LM_PERSON_JOB A1 
WHERE A.LM_PERSON_ID=A1.LM_PERSON_ID AND A.EFFDT=A1.EFFDT 
AND A.LM_EMPL_RCD=A1.LM_EMPL_RCD)
AND A.LM_ACTIVE='Y'
AND A.EFFDT=(SELECT Max(A2.EFFDT) FROM PS_LM_PERSON_JOB A2 
WHERE A.LM_PERSON_ID=A2.LM_PERSON_ID AND A.LM_EMPL_RCD=A2.LM_EMPL_RCD 
AND A.LM_EFFSEQ=A2.LM_EFFSEQ) 
AND A.LM_PERSON_ID=B.LM_PERSON_ID (+)  
AND B.LM_LPLN_ID=C.LM_LPLN_ID (+) 
AND B.LM_PERSON_ID=C.LM_PERSON_ID (+)
AND C.LM_ENRLMT_ID=D.LM_ENRLMT_ID (+)  
AND D.LM_CI_ID=E.LM_CI_ID (+)
AND E.EFFDT=(SELECT Max(E1.EFFDT) FROM PS_LM_CI_TBL E1 WHERE E.LM_CI_ID=E1.LM_CI_ID)

ORDER BY A.LM_PERSON_ID 
```

我想要的输出是：

```
 JOB GRADE   COURSE_STR.A    COURSE_STR.B    COURSE_STR.C 
    1              5               3               1
    2              4               2               2
    3              1               1               1 
```

有人可以分享你是如何做到的吗？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:02:03.243

看看[PIVOT](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html "枢")运算符，看看它是否能解决您的问题。

如果您提供了更多信息，我可以尝试编写您的查询。也许一个没有转换的查询结果的简单示例就足够了。

**编辑 ：**

让我们想象一下测试表：

```
CREATE TABLE pivot_test (
  job_grade            NUMBER,
  course_str    VARCHAR2(1)
);

INSERT INTO pivot_test VALUES (1, 'A');
INSERT INTO pivot_test VALUES (1, 'B');
INSERT INTO pivot_test VALUES (1, 'C');
INSERT INTO pivot_test VALUES (1, 'A');
INSERT INTO pivot_test VALUES (1, 'C');
INSERT INTO pivot_test VALUES (2, 'A');
INSERT INTO pivot_test VALUES (2, 'B');
INSERT INTO pivot_test VALUES (2, 'C');
INSERT INTO pivot_test VALUES (2, 'A');
INSERT INTO pivot_test VALUES (3, 'A');
INSERT INTO pivot_test VALUES (3, 'A');
INSERT INTO pivot_test VALUES (3, 'A');
INSERT INTO pivot_test VALUES (3, 'A');
INSERT INTO pivot_test VALUES (3, 'A');
INSERT INTO pivot_test VALUES (3, 'B');
INSERT INTO pivot_test VALUES (3, 'B');
INSERT INTO pivot_test VALUES (3, 'A');
COMMIT; 
```

我们的测试数据如下所示：

```
select * from pivot_test;

 JOB_GRADE COURSE_STR
---------- ----------
         1 A
         1 B
         1 C
         1 A
         1 C
         2 A
         2 B
         2 C
         2 A
         3 A
         3 A
         3 A
         3 A
         3 A
         3 B
         3 B
         3 A

17 rows selected 
```

现在我们应用 PIVOT 操作，并获得结果：

```
SQL> SELECT *
  2        FROM pivot_test
  3        PIVOT(COUNT(course_str) FOR course_str IN('A' AS "COURSE_STR.A",
  4                                                  'B' AS "COURSE_STR.B",
  5                                                  'C' AS "COURSE_STR.C"));

 JOB_GRADE COURSE_STR.A COURSE_STR.B COURSE_STR.C
---------- ------------ ------------ ------------
         1            2            1            2
         2            2            1            1
         3            6            2            0

SQL> 
```

我使用 COUNT() 作为聚合函数，但它可以是 SUM()、MAX() 等。

希望这可以帮助

# c++ - MySQL Connector/C BAD ACCESS crash（另一种情况）

> ID：15493661
> 
> 赞同：2
> 
> 时间：2013-03-19T07:23:18.323
> 
> 标签：c++, exc-bad-access, mysql-connector, xcode4.6

对于这样一个菜鸟问题，我很抱歉，但是在编译最简单的程序以连接到 MySQL 数据库并在那里执行“SELECT”命令时，我无法用我的 Xcode (4.6.1) 赢得战斗。

该程序来自 MySQL Connector/C++ 的“examples”目录：

```
/* Standard C++ includes */
#include <stdlib.h>
#include <iostream>
#include <sstream>
#include <stdexcept>

#include "mysql_connection.h"
#include "mysql_driver.h"

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>

std::string url;
std::string user;
std::string pass;
std::string database;

/**
 * Usage example for Driver, Connection, (simple) Statement, ResultSet
 */
int main(int argc, const char **argv)
{
    sql::Driver *driver;
    std::auto_ptr< sql::Connection > con;

    url = "tcp://127.0.0.1:3306";
    user = "john";
    pass = "john";
    database = "cunda_sales";

    try {
        driver = sql::mysql::get_driver_instance();

        /* Using the Driver to create a connection */
        con.reset(driver->connect(url, user, pass));
        con->setSchema(database);

        sql::Statement* stmt = con->createStatement();
        stmt->execute("INSERT INTO ru (store_name) values ('Test is successful')");
    } catch (sql::SQLException &e) {
        return EXIT_FAILURE;
    } catch (std::runtime_error &e) {
        return EXIT_FAILURE;
    }

    return EXIT_SUCCESS;
} 
```

在 Xcode 中运行该程序后，我收到程序编译成功的消息，但在调用时它停止运行：

```
driver->connect(url, user, pass) 
```

给我一个错误

```
EXC_BAD_ACCESS (code=13, address=0x0) 
```

这里描述了几乎相同的情况：[here on this site](https://stackoverflow.com/questions/14570347/mysql-connector-c-bad-access-crash "https://stackoverflow.com/questions/14570347/mysql-connector-c-bad-access-crash")

我重复了这些人所遵循的所有步骤，但我对那个错误无能为力。我还尝试使用以下命令在终端中编译程序：

```
c++ -o test -I /usr/local/boost_1_53_0 -lmysqlcppconn main.cpp 
```

一切正常，但不是在 Xcode 中。

在[这个线程](https://stackoverflow.com/questions/14570347/mysql-connector-c-bad-access-crash "https://stackoverflow.com/questions/14570347/mysql-connector-c-bad-access-crash")中找到了解决方案，但对于我的愚蠢感到抱歉，我只是不知道我需要在我的 Xcode 中/使用我的 Xcode 做什么才能使其以正确的方式编译程序来工作。

伙计们在那里写道，问题出在 -stdlib=libc++ 标志中，Xcode 使用该标志来编译代码。那么我应该怎么做才能避免这个错误呢？从 Xcode 编译器中删除该标志或使用另一个编译器？或者我应该只需要用这个标志重新编译 MySQL 连接器/C++？

请解释我最终的解决方案。谢谢！

# mysql - 未创建数据库表

> ID：15493662
> 
> 赞同：5
> 
> 时间：2013-03-19T07:23:18.840
> 
> 标签：mysql, phpmyadmin, mysql-workbench

我正在为我当地的商业列表设计一个 sql 数据库。我正在使用 mySQL WorkBench 来设计数据库，但是我在无法创建数据库中的一个表时遇到了一些问题。

这就是数据库设计的样子

![在此处输入图像描述](../Images/dd73c22c9f6a77cabf4ce87242030673.png)

我遇到的问题是 BusinessHours，我发现它有点令人困惑，因为我想将它与 BusinessDirectory 的 Foregin 键（每个 businessDirectory 有很多 BusinessHours）“一对多”关联起来，这样你就可以代表一周中的 7 天. 希望这是有道理的。

这是使用mySQL工作台生成的sql

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Members`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Members` ;

CREATE  TABLE IF NOT EXISTS `mydb`.`Members` (
  `idMembers` INT NOT NULL AUTO_INCREMENT ,
  `firstName` VARCHAR(45) NOT NULL ,
  `lastName` VARCHAR(45) NOT NULL ,
  `email` VARCHAR(45) NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`idMembers`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`BusinessDirectory`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`BusinessDirectory` ;

CREATE  TABLE IF NOT EXISTS `mydb`.`BusinessDirectory` (
  `idBusinessDirectory` INT NOT NULL ,
  `businessName` VARCHAR(45) NOT NULL ,
  `businessDescription` VARCHAR(1000) NULL ,
  `businessLogo` VARCHAR(45) NULL ,
  `idMembers` INT NULL ,
  `directoryCategory` VARCHAR(45) NULL ,
  PRIMARY KEY (`idBusinessDirectory`) ,
  INDEX `idMembers_idx` (`idMembers` ASC) ,
  CONSTRAINT `idMembers`
    FOREIGN KEY (`idMembers` )
    REFERENCES `mydb`.`Members` (`idMembers` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`BusinessAddress`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`BusinessAddress` ;

CREATE  TABLE IF NOT EXISTS `mydb`.`BusinessAddress` (
  `idBusinessDirectory` INT NOT NULL ,
  `addressNumber` VARCHAR(5) NULL ,
  `addressAreaName` VARCHAR(45) NULL ,
  `addressLat` FLOAT(10,6) NULL ,
  `addressLong` FLOAT(10,6) NULL ,
  PRIMARY KEY (`idBusinessDirectory`) ,
  CONSTRAINT `idBusinessDirectory`
    FOREIGN KEY (`idBusinessDirectory` )
    REFERENCES `mydb`.`BusinessDirectory` (`idBusinessDirectory` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`BusinessHours`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`BusinessHours` ;

CREATE  TABLE IF NOT EXISTS `mydb`.`BusinessHours` (
  `idBusinessDirectory` INT NOT NULL ,
  `dayOfWeek` INT NULL ,
  `openingTime` TIME NULL ,
  `closingTime` TIME NULL ,
  PRIMARY KEY (`idBusinessDirectory`) ,
  CONSTRAINT `idBusinessDirectory`
    FOREIGN KEY (`idBusinessDirectory` )
    REFERENCES `mydb`.`BusinessDirectory` (`idBusinessDirectory` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

USE `mydb` ;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

所以我希望有人能帮我弄清楚为什么我无法将 BusinessHours 表添加到我的数据库中。

这是两个屏幕截图，显示了我在 phpMyAdmin 中收到的错误消息

![在此处输入图像描述](../Images/682b949badba3d547087363006464ca3.png)

![在此处输入图像描述](../Images/872b1ac8f8eef502bf879c3845e50584.png)

任何帮助，将不胜感激

最终更新的 sql；

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Members`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Members` ;

CREATE  TABLE IF NOT EXISTS `mydb`.`Members` (
  `idMembers` INT NOT NULL AUTO_INCREMENT ,
  `firstName` VARCHAR(45) NOT NULL ,
  `lastName` VARCHAR(45) NOT NULL ,
  `email` VARCHAR(45) NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`idMembers`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`BusinessDirectory`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`BusinessDirectory` ;

CREATE  TABLE IF NOT EXISTS `mydb`.`BusinessDirectory` (
  `idBusinessDirectory` INT NOT NULL ,
  `businessName` VARCHAR(45) NOT NULL ,
  `businessDescription` VARCHAR(1000) NULL ,
  `businessLogo` VARCHAR(45) NULL ,
  `idMembers` INT NULL ,
  `directoryCategory` VARCHAR(45) NULL ,
  PRIMARY KEY (`idBusinessDirectory`) ,
  INDEX `idMembers_idx` (`idMembers` ASC) ,
  CONSTRAINT `idMembers`
    FOREIGN KEY (`idMembers` )
    REFERENCES `mydb`.`Members` (`idMembers` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`BusinessAddress`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`BusinessAddress` ;

CREATE  TABLE IF NOT EXISTS `mydb`.`BusinessAddress` (
  `idBusinessDirectory_BusinessAddress` INT NOT NULL ,
  `addressNumber` VARCHAR(5) NULL ,
  `addressAreaName` VARCHAR(45) NULL ,
  `addressLat` FLOAT(10,6) NULL ,
  `addressLong` FLOAT(10,6) NULL ,
  PRIMARY KEY (`idBusinessDirectory_BusinessAddress`) ,
  CONSTRAINT `idBusinessDirectory_BusinessAddress`
    FOREIGN KEY (`idBusinessDirectory_BusinessAddress` )
    REFERENCES `mydb`.`BusinessDirectory` (`idBusinessDirectory` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`BusinessHours`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`BusinessHours` ;

CREATE  TABLE IF NOT EXISTS `mydb`.`BusinessHours` (
  `idBusinessDirectory_BusinessHours` INT NOT NULL ,
  `dayOfWeek` INT NULL ,
  `openingTime` TIME NULL ,
  `closingTime` TIME NULL ,
  PRIMARY KEY (`idBusinessDirectory_BusinessHours`) ,
  CONSTRAINT `idBusinessDirectory_BusinessHours`
    FOREIGN KEY (`idBusinessDirectory_BusinessHours` )
    REFERENCES `mydb`.`BusinessDirectory` (`idBusinessDirectory` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

USE `mydb` ;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

这就是 Foregin 键选项卡的外观

![在此处输入图像描述](../Images/fc82cc04351d18d756671e78c4c7607b.png)

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:29:47.583

外键的约束名称`idBusinessDirectory`在表`BusinessHours`和中重复`BusinessAddress`。

为约束赋予不同的名称。

**更新**

遵循正确的 FK 命名约定，这样就不会出现此类错误，并且仅通过约束的名称我们就可以知道约束中涉及的表。

```
fk_[referencing table name]_[referenced table name]_[referencing field name] 
```

所以在你的情况下，约束将是

编辑用这个更新你的代码

```
BusinessAddress Table

CONSTRAINT `fk_BusinessAddress_BusinessDirectory_idBusinessDirectory`
FOREIGN KEY (`idBusinessDirectory` )
REFERENCES `mydb`.`BusinessDirectory` (`idBusinessDirectory` )
ON DELETE NO ACTION
ON UPDATE NO ACTION)

BusinessHours Table

CONSTRAINT `fk_BusinessHours_BusinessDirectory_idBusinessDirectory`
FOREIGN KEY (`idBusinessDirectory` )
REFERENCES `mydb`.`BusinessDirectory` (`idBusinessDirectory` )
ON DELETE NO ACTION
ON UPDATE NO ACTION) 
```

你所有的约束都存储在这个`INFORMATION_SCHEMA.KEY_COLUMN_USAGE`INNODB

[**参考**](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

希望能帮助到你。

# c++ - 跟踪/跟踪在不同寄存器/内存位置传递的值？

> ID：15493664
> 
> 赞同：3
> 
> 时间：2013-03-19T07:23:21.617
> 
> 标签：c++, debugging, assembly, encryption, reverse-engineering

在 Ollydbg 中，我有一个正在调试的程序的指令地址，它具有特定的值。该值在许多循环中传递。有没有什么方法可以让我“跟踪”该值，而无需手动单步执行每个循环并尝试跟踪值被转移到的位置？对于 15000 多个指令循环，我根本无法手动执行此操作。

我最终试图将它追踪到一个加密函数，此时它应该消失，我会知道我已经达到了这个程序中的加密。如果有某种方法我可以“自动跟随”它并在程序完全消失时暂停它，那么它应该会引导我使用我的加密功能。

我怀疑这样的事情是可能的，但我认为问它不会有坏处。

如果需要，我的操作系统是 Windows 7 x86。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:36:30.477

我没有使用过或听说过的调试器，可以让你像那样“跟踪”。

关于唯一的选择是编写某种调试器插件（如果调试器支持）或特殊程序来驱动调试器中的执行，逐条指令，并查看值的去向，到哪个寄存器，到哪些其他内存位置等。它可能不会从内存和寄存器中完全“消失”。而且它可能太慢而无法实用。

如果你有可用的源代码，我想你没有，你可能会更好地进行代码审查，但是你会知道那个函数在哪里并且不会问这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:03:12.830

静态分析可以更好地处理您的任务。

另一方面，还有[拍美](http://www.openrce.org/downloads/details/208/PaiMei)，它的代码跟踪和数据流分析模块。

它的工作原理是设置成千上万个断点（在扫雷示例中为 50k），然后记录它们被击中的时间以及设置的上下文。您可能需要运行几次，最好在每次执行期间更改您正在跟踪的值（它是输入吗？）。是的，这是非常暴力的方法，对于大文件可能会变得非常慢。

# iphone - 不兼容的指针类型将“CC3MeshNode *”发送到“CCNode *”类型的参数

> ID：15493671
> 
> 赞同：0
> 
> 时间：2013-03-19T07:23:59.017
> 
> 标签：iphone, objective-c, cocos3d

我是 cocos2d/3d 的新手，我想绘制圆柱体，但为了理解功能，我试图借助[此](http://www.cocos2d-iphone.org/forum/topic/14993)链接在 cocos3d 中加载三角形的网格节点，但我收到警告不兼容的指针类型发送“CC3MeshNode *”到“CCNode *”类型的参数和应用程序崩溃并出现以下错误。

请原谅我的英语。

2013-03-19 12:43:49.195 LipAgumentation[982:d503]-[CC3MeshNode _setZOrder:]：无法识别的选择器发送到实例 0xc44cce0

2013-03-19 12:43:49.203 LipAgumentation [982:d503] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[CC3MeshNode _setZOrder:]：无法识别的选择器发送到实例 0xc44cce0”

```
*** Call stack at first throw:
(
0   CoreFoundation                      0x019335a9 __exceptionPreprocess + 185
1   libobjc.A.dylib                     0x0161b313 objc_exception_throw + 44
2   CoreFoundation                      0x019350bb -[NSObject(NSObject)     
 doesNotRecognizeSelector:] + 187
3   CoreFoundation                      0x018a4966 ___forwarding___ + 966
4   CoreFoundation                      0x018a4522 _CF_forwarding_prep_0 + 50
5   LipAgumentation                     0x0003d574 -[CCNode insertChild:z:] + 532
6   LipAgumentation                     0x0003cb25 -[CCNode addChild:z:tag:] + 501
7   LipAgumentation                     0x0003ce39 -[CCNode addChild:] + 313
8   LipAgumentation                     0x0020754d -[LipAgumentationLayer  
LoadMeshOfATriangle] + 1405
9   LipAgumentation                     0x00206fbd -[LipAgumentationLayer LipsEffect] + 45
10  LipAgumentation                     0x00206d3f __42-[LipAgumentationLayer  
initializeControls]_block_invoke_0 + 47
11  LipAgumentation                     0x00023b70 -[NSObject(CCBlocksAdditions)  
ccCallbackBlockWithSender:] + 48
12  CoreFoundation                      0x018a3c7d __invoking___ + 29
13  CoreFoundation                      0x018a3b51 -[NSInvocation invoke] + 145
14  LipAgumentation                     0x0003678f -[CCMenuItem activate] + 79
15  LipAgumentation                     0x00036ff0 -[CCMenuItemLabel activate] + 160
16  LipAgumentation                     0x00033e94 -[CCMenu ccTouchEnded:withEvent:] + 292
17  LipAgumentation                     0x00089c3a -[CCTouchDispatcher  
touches:withEvent:withTouchType:] + 1482
18  LipAgumentation                     0x0008a783 -[CCTouchDispatcher  
touchesEnded:withEvent:] + 115
19  LipAgumentation                     0x0008c53e -[EAGLView touchesEnded:withEvent:] + 110
20  UIKit                               0x009a3ded -[UIWindow _sendTouchesForEvent:] + 567
21  UIKit                               0x00984c37 -[UIApplication sendEvent:] + 447
22  UIKit                               0x00989f2e _UIApplicationHandleEvent + 7576
23  GraphicsServices                    0x02248992 PurpleEventCallback + 1550
24  CoreFoundation                      0x01914944  
__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
25  CoreFoundation                      0x01874cf7 __CFRunLoopDoSource1 + 215
26  CoreFoundation                      0x01871f83 __CFRunLoopRun + 979
27  CoreFoundation                      0x01871840 CFRunLoopRunSpecific + 208
28  CoreFoundation                      0x01871761 CFRunLoopRunInMode + 97
29  GraphicsServices                    0x022471c4 GSEventRunModal + 217
30  GraphicsServices                    0x02247289 GSEventRun + 115
31  UIKit                               0x0098dc93 UIApplicationMain + 1160
32  LipAgumentation                     0x00205ed6 main + 134
33  LipAgumentation                     0x00002bb5 start + 53
) 
```

终止称为抛出异常

这是我绘制三角形的代码

```
 static float arr_location[] = {-1.0,0.0,0.0,  1.0,0.0,0.0,  0.0,1.0,0.0};
static float arr_normal[] = {0.0,0.0,1.0, 0.0,0.0,1.0, 0.0,0.0,1.0};
static ushort arr_indice[] = {0,1,2};
static float arr_texture[] = {1.0,0.0, 0.0,0.0, 0.0,1.0};

CC3VertexLocations *locationDemo = 
           [[CC3VertexLocations vertexArrayWithName:@"demoLocation"] autorelease];
locationDemo.drawingMode = GL_TRIANGLES;
[locationDemo setVertexCount:3];
[locationDemo setVertices:arr_location];

CC3VertexNormals *demonormal = 
        [[CC3VertexNormals vertexArrayWithName:@"demoNormal"] autorelease];
[demonormal setVertexCount:3];
[demonormal setVertices:arr_normal];

CC3VertexIndices *demoIndices = [CC3VertexIndices vertexArrayWithName: @"demoIndicies"];
demoIndices.drawingMode = GL_TRIANGLES;
[demoIndices setVertexCount:3];
[demoIndices setVertices:arr_indice];

CC3Texture *demoTex;
demoTex = [[CC3Texture textureFromFile:@"2.jpg"] autorelease];

CC3VertexTextureCoordinates *demoTexture = 
       [CC3VertexTextureCoordinates vertexArrayWithName:@"demoTexture"];
[demoIndices setVertexCount:3];
[demoIndices setVertices:arr_texture];

[demoTexture alignWithTexture:demoTex];

CC3VertexArrayMesh *demoMeshModel = 
    [[CC3VertexArrayMesh meshWithName:@"demoMeshModel"] autorelease];
demoMeshModel.vertexLocations = locationDemo;
demoMeshModel.vertexNormals = normal;
demoMeshModel.vertexIndices = demoIndices;
demoMeshModel.vertexTextureCoordinates = demoTexture;

CC3MeshNode* demoMesh = [CC3MeshNode nodeWithName:@"demoMeshNode"];
demoMesh.mesh = demoMeshModel;
demoMesh.material = [CC3Material shiny];
demoMesh.material.name = [NSString stringWithFormat: @"demoMeshNode"];
demoMesh.material.diffuseColor = CCC4FMake(1.0, 1.0, 1.0, 1.0);
[demoMesh.material setTexture:demoTex];

[self addChild:demoMesh]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:28:55.917

我已阅读[http://brenwill.com/docs/cocos3d/0.6.2/api/interface_c_c3_node.html](http://brenwill.com/docs/cocos3d/0.6.2/api/interface_c_c3_node.html)文档，您必须使用`CC3Node`基类才能使用`CC3MeshNode`.

我很确定“self”是一种`CCNode`类型，而不是`CC3Node`预期的基类。

# json - 解压 Gzip JSON 响应

> ID：15493673
> 
> 赞同：1
> 
> 时间：2013-03-19T07:24:00.070
> 
> 标签：json, node.js, zlib, unzip, gunzip

我正在从 Web 服务获得 GZIP 类型的压缩响应。谁能帮我解压缩或解码响应。

任何有关这方面的帮助都会非常有帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:59:27.103

看起来好像您想使用 Express 和`express.compress`中间件。这将确定浏览器是否支持 gzip 和/或 deflate，因此您不必这样做。

一个简单的设置可能如下所示：

```
var express = require('express');
var app     = express();

app.use(express.compress());
app.get('/', function(req, res) {
  res.send({ app_id: 'A3000990' });
});
app.listen(3000); 
```

如果您的数据是 JSON 字符串，您必须自己设置正确的内容类型标头：

```
res.setHeader('Content-Type', 'application/json');
res.send(data); 
```

# ios - 使用 UIImageView alloc 同时移动多个图像的性能不佳问题

> ID：15493675
> 
> 赞同：0
> 
> 时间：2013-03-19T07:24:11.470
> 
> 标签：ios, objective-c

所以这是我遇到的问题，我的应用程序有几个图像（50x50 ~ 150x150）存储在 NSMutableArray 中，每个图像在由触发的 for 循环中从 x1,y1 移动到 x1+i,y1+i (i+=1)每 0.02 秒调用一次计时器。它在模拟器上运行流畅，但 iphone，我该怎么办？有没有不使用 Cocos2d 或 OpenGL 的有效方法？

```
enter code here

for (int i=0; i <10; i++)             
{ 
    imgImageView = [imgImageArray objectAtIndex:i];
    imgImageView.center = CGPointMake(current_x+1, current_y+1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:37:32.253

使用 UIView 动画方法。这就是他们的目的。例如： [+ [UIView animateWithDuration:animations:]](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3a)

# java - System.nanoTime() 是否保证返回唯一值？

> ID：15493676
> 
> 赞同：10
> 
> 时间：2013-03-19T07:24:14.090
> 
> 标签：java, file, time, temporary-files

我有一个多线程 Java 程序，可以在几秒钟内创建数百个临时文件。这些文件被放置`/tmp`并使用`System.nanoTime()`.

文件名是否保证唯一？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T07:25:44.757

不，不能保证每次调用`System.nanoTime()`都会返回一个唯一值。

使用[`File.createTempFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String,%20java.io.File%29)或[`Files.createTempFile()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#createTempFile%28java.nio.file.Path,%20java.lang.String,%20java.lang.String,%20java.nio.file.attribute.FileAttribute...%29)代替。它们就是为此目的而设计的，将为您生成唯一的文件名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T07:27:06.323

如果您需要临时文件的唯一文件名，请使用[File.createTempFile(prefix, suffix, directory)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String,%20java.io.File%29)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T07:28:53.090

## 至于你原来的问题

不，不是。您的线程可以在多 CPU/核心系统上同时并行运行，因此无法保证唯一值。

另外，`nanoTime()`仅与底层时钟一样准确。这意味着，对 nanoTime 的两次连续调用可能会返回相同的值。

引用[API](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29%20API)：“不保证值的变化频率。”

## 解决方案

您应该使用`File.createTempFile()`并让 Java 处理临时文件的唯一性。

```
// create temp file in /tmp with prefix  tmpfile and suffix .txt
File file = File.createTempFile("tmpfile", ".txt", new File("/tmp"));

// deletes file when the virtual machine terminate
file.deleteOnExit(); 
```

您甚至可以使用线程 id 或类似前缀的东西来保持这些 temFiles 分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T07:34:14.487

如果你在一台每纳秒可以创建多个文件的机器上运行你的线程系统，你可能/将会发生名称冲突。

对此的解决方案可能是存储一个静态“索引计数器”，您可以使用它来添加/附加到文件名。

例如，您的文件名可能是`System.nanoTime() + "x" + SomeClassName.index()`该`index()`方法返回索引值的位置，同时也会增加它。（您可以通过`index()`返回 a`String`或将值转换为 1 来放弃“x”）。

每次程序重新启动时“索引计数器”是否重置为 0 都没关系（我真的怀疑 JVM 实例可以在一纳秒内启动）。

只要确保使`index()`方法线程安全。

编辑：

我的解决方案为您提供了一种生成唯一文件名的方法。我正在使用类似的解决方案（使用“System.currentTimeMillis()”而不是`System.nanoTime()`）为在数据库中具有临时表示的变量生成唯一 ID，它的工作原理就像一个魅力（使用前缀，它还允许批量删除数据库中的某些条目，而不仅仅是清空数据库）。

如果您对文件名本身不感兴趣，而只对拥有/使用临时文件感兴趣，我会选择 NPE 的解决方案。

# php - 将数组 [1] 打印到数组 [n]

> ID：15493681
> 
> 赞同：-2
> 
> 时间：2013-03-19T07:24:39.217
> 
> 标签：php, html

我有一个像博客这样的帖子，我想改变第一个单词的颜色。例如，我有类似的标题`Test Post`，我只想更改 的颜色`Test`而不更改 的颜色`Post`。

我有一个代码：

```
 <?php
   $title = get_the_title();
   $title_array = explode(' ', $title);
 ?>
 <h2>
   <span class="yellow">
     <?php echo $title_array[0] ?>
   </span>
     <?php echo $title_array[1] ?>
 </h2> 
```

代码生成的HTML：

```
<h2><strong><a href="http://credexpert/test-post/" title="Permalink to test post raam naam" rel="bookmark"><span class="yellow"> test</span> Array</a></strong></h2> 
```

代码工作正常，但是当标题很长时问题就来了，假设标题是`Test Post for Content Box`

有没有办法用短代码打印剩余的数组`array[1] to array[n]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:26:00.693

您可以循环执行此操作

1，要么通过[**`for`**](http://php.net/manual/en/control-structures.for.php)循环

```
for($a = 0; $a<count($array);$a++)
{
 echo $title_array[$a] ;

} 
```

2，或者[**`foreach`**](http://php.net/manual/en/control-structures.foreach.php)像循环一样

```
foreeach($title_array as $item){
   echo $item;
} 
```

3，或[**`while`**](http://php.net/manual/en/control-structures.while.php)循环

```
$a= 0;
while($a<count($title_array)){
  echo $title_array[$a] ;
  $a++;
} 
```

4，或通过递归

哇哇哇，我认为以上三种方法就足够了

正如@Voitcus 告诉你应该在行尾使用分号它的好习惯，这并不意味着我们应该在循环之后使用它（在某些情况下除外）或者如果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:28:09.877

首先，你忘了在 s`;`的末尾加分号`echo`。

你可以使用

```
$title_array = explode(' ', $title,2); 
```

这将导致您得到两个字符串：第一个是第一个单词，另一个是其余的。

请参阅[手册中的爆炸](http://www.php.net/manual/en/function.explode.php)。

# php - 使用 javascript 验证 HTML 表单（未知错误），然后将其定向到 php 文件

> ID：15493683
> 
> 赞同：0
> 
> 时间：2013-03-19T07:24:43.283
> 
> 标签：php, javascript, html, mysql, client-side

我正在帮助制作移动应用程序。我通过查看程序上的类似脚本来提供帮助。有用于注册的表单和用于验证的 javascript 在其中可以正常工作，但是当我尝试制作密码更改表单时，它并不能全部工作。

这是 pengaturan.html 中的 html 表单

```
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<link rel="stylesheet" type="text/css" href="css/style1.css" />

<script src="jq/proses/script.js"></script>
<script src="jq/proses/set_ip.js"></script>
<script src="jq/proses/newpass/newpass.js"></script>

<title>edc - e diabet consult</title>
</head>
<body>
<h1 align="center">Pengaturan</h1>

<p align="left" class="navigation">

<a href="settings.html" class="back">
<img src="ico/kembali.png">
</a>

</p>

<form id="form_pengaturan">

<p align="center">

<strong>Password lama:</strong><br />
<input type="password" name="pass" /><br />

<strong>Password baru:</strong><br />
<input type="password" name="newpass" /><br />

<strong>Konfirmasi password baru:</strong><br />
<input type="password" name="confnewpass" /><br /><br/>

<input type="button" value="Simpan" onclick="cek_pass()" id="simpan" class="button"></button> 
<input type="reset" value="Reset" class="button"/>

</p>
</form>
</body>
</html> 
```

这是处理 newpass.js 中的 onclick 函数的 javascript

```
var urlini = seturl();
var part= 'newpass/';
//alert("panggil newlog js!");

//Save data into db
function cek_pass() {
    //alert("masuk func cek!"); 
    pass =  ($("#pass").val()); 
    newpass =  /^([-a-z0-9_-])+$/i.test($("#newpass").val());
    confnewpass =  /^([-a-z0-9_-])+$/i.test($("#confnewpass").val());

    var form_reg =  $("input").val();
    if(form_reg == "")
    {
        alert("Semua data harus diisi.");
    }
    else if($("#newpass, #confnewpass").val().length  < 5 || $("#newpass, #confnewpass").val().length > 15)
    {
        alert("Terdapat kesalahan atau data kosong pada pengisian data.\nPastikan password Anda lebih dari 5 dan kurang dari 15 karakter.");
    }
    else if( !pass || !newpass || !confnewpass || $("#newpass").val() != $("#confnewpass").val())
    {
        alert("Terdapat kesalahan atau data kosong pada pengisian data.\nPastikan password Anda sesuai.");
    }
    else
    {
        $.post(urlini+part+'cek',
        $('#form_pengaturan').serialize(),function(msg){
        if(msg == '0')
        {
            alert("Password yang anda masukkan tidak benar!");
        }
        else if(msg == '1')
        {
            alert("Data berhasil disimpan!");
            window.location="index.html";
        }
    });
    }

} 
```

这是在 set_ip.js 中处理服务器更改地址的 javascript

```
//where the set the domain name
var ip = 'localhost';
var urlnya = 'http://'+ip+'/diabet_console/';
function seturl()
{    
    return urlnya;
} 
```

你能告诉我哪里错了吗？因为 javascript : newpass.js 无法正常工作......请帮助我......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:29:41.623

添加`return false`

```
if(form_reg == "")
    {
        alert("Semua data harus diisi.");
        return false   
    }
    else if($("#newpass, #confnewpass").val().length  < 5 || $("#newpass, #confnewpass").val().length > 15)
    {
        alert("Terdapat kesalahan atau data kosong pada pengisian data.\nPastikan password Anda lebih dari 5 dan kurang dari 15 karakter.");
       return false;
    }
    else if( !pass || !newpass || !confnewpass || $("#newpass").val() != $("#confnewpass").val())
    {
        alert("Terdapat kesalahan atau data kosong pada pengisian data.\nPastikan password Anda sesuai.");
        return false;
    } 
```

# java - JFrame：固定宽度但动态高度

> ID：15493689
> 
> 赞同：0
> 
> 时间：2013-03-19T07:25:06.333
> 
> 标签：java, swing, user-interface, jframe, dimension

有没有办法将 JFrame 的宽度设置为固定，但 JFrame 的高度是动态的？例如，

```
width = 1200 
Height = will be based on number of elements 
```

换句话说

```
width = 1200 
Height = pack() 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:46:44.563

对宽度使用常量，对高度使用变量，然后使用[常规的 setPreferredSize 方法](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-02T00:56:08.577

您可能不需要这个，但对于未来查看此线程的人，您可以声明一个宽度常量，并设置框架的最小和最大尺寸。

```
setMinimumSize(new Dimension(WIDTH, 0));
setMaximumSize(new Dimension(WIDTH, Integer.MAX_VALUE));
setResizable(false); 
```

对 pack() 的后续调用将强制执行宽度，但允许动态计算高度。

# c - 尝试复制共享内存地址时出现分段错误

> ID：15493691
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:25:14.537
> 
> 标签：c, segmentation-fault

问题已移动，因为它的回答格式不正确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:30:21.950

验证您的 shmget() 和 shmat() 结果。可能他们正在返回 -1 并且您试图访问无效的内存位置。

# php - ajax php文件上传和php页面检索文件失败

> ID：15493694
> 
> 赞同：2
> 
> 时间：2013-03-19T07:25:41.507
> 
> 标签：php, ajax

HTML：

```
<form id="imageform" method="post" enctype="multipart/form-data" >
    Upload image <input type="file" name="photoimg" id="photoimg" />
</form>
<div id='preview'></div> 
```

JavaScript：

```
$('#photoimg').change(function() {
    $("#preview").html('');
    $("#preview").html('<img src="loader.gif" alt="Uploading...."/>');

    var data = new FormData();
    jQuery.each($('#photoimg')[0].files, function(i, file) {
        data.append('file-' + i, file);
    });

    $.ajax({
        url: 'ajaximage.php',
        data: data,
        contentType: false,
        processData: false,
        type: 'POST',
        success: function(data) {}
    });
}); 
```

PHP：

```
print_r($_FILES); 
```

需要帮助来解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:21:15.933

您不能通过`AJAX`. 你可以使用这个 ajax**[表单插件](http://jquery.malsup.com/form/)**

### **[`Example`](http://jquery.malsup.com/form/#file-upload)**

# android - android 有用的库，用于下载文件和显示照片浏览器库

> ID：15493699
> 
> 赞同：0
> 
> 时间：2013-03-19T07:25:55.050
> 
> 标签：android

我是安卓新手。我将这些库用于我的 iOS 项目，对于简化一些常见任务最有用。Android开发有类似的对应库吗？

MWPhotoBrowser - [https://github.com/mwaterfall/MWPhotoBrowser](https://github.com/mwaterfall/MWPhotoBrowser)

SDWebImage - [https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

MBProgressHUD - [https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

ASIHTTPRequest - [http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:33:00.707

假设您要显示来自服务器的图像。

您打算在 android 中执行哪些常见任务？

您可以使用延迟加载从服务器显示图像。[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。使用缓存。

您也可以尝试通用图像加载器。[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。异步加载图像。将图像缓存到 sdcard。

要从服务器获取图像，您可以使用 AsyncTask。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。如果您需要长时间运行的操作，请不要使用 asynctask。

对于长时间运行的后台操作，请使用服务。[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)。

AsyncTask 有一个替代方案，称为 Robospice。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。

在您的情况下，您可以使用 Universal Image Loader 从服务器显示图像。

要发出 http 请求，您可以使用 Apache HTTP。[http://hc.apache.org/downloads.cgi](http://hc.apache.org/downloads.cgi)。下载 jar 将其添加到您的项目中。

[http://www.edumobile.org/android/android-beginner-tutorials/downloading-an-image-from-the-server-and-displaying-it-on-screen](http://www.edumobile.org/android/android-beginner-tutorials/downloading-an-image-from-the-server-and-displaying-it-on-screen)。使用 http get 请求从服务器下载图像的示例

# web-services - 什么是/如何为任何服务器设置页面错误/秒的阈值？

> ID：15493700
> 
> 赞同：0
> 
> 时间：2013-03-19T07:25:55.390
> 
> 标签：web-services, web-applications, operating-system

目前我正在处理服务器上的页面错误问题。我正在用我的工具获得一些读数。有些读数非常高`400 pagefaults/sec`，有些读数低`30 or 40 pagefaults/sec`。

在这种情况下，我需要检查一些页面错误的阈值。它是主要或次要或无效类型的阈值。我用谷歌搜索了这个问题，但无法获得相同的信息。

如何根据每秒读数设置这样的阈值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:46:17.217

如果你直接限制每秒页面错误的数量（我很确定没有控制），你会让代码运行得更慢，慢得多，我怀疑这就是你想要的。

如果页面错误率太高，则意味着您的服务器没有足够的 RAM，这会导致它使用虚拟/磁盘内存。它也可能是内存泄漏的迹象。您应该研究这一点，而不是试图降低页面错误率。观察到的比率不是原因，而是结果，您应该确定原因并解决它。

# java - 使用 Eclipse 从 Python 或 Java 调用 C++ 库

> ID：15493707
> 
> 赞同：1
> 
> 时间：2013-03-19T07:26:20.470
> 
> 标签：java, c++, python, eclipse

我正在尝试使用 Eclipse 在 Python 或 Java 中调用一个用 C++ 编写的名为 VFML ( [http://www.cs.washington.edu/dm/vfml/ ) 的库。](http://www.cs.washington.edu/dm/vfml/)我是 Python 新手，没有用 C 语言编程。是否有任何方法可以做到这一点，不需要 C++ 编程知识，因为学习语言需要时间。任何关于如何做到这一点的教程或指南也会有所帮助。

我使用 Eclipse 来运行 Python 模块和 Java 类。如果有人知道是否可以使用 Java 或 Python 在 Eclipse 中调用 C++ 库，那就太好了。谢谢你。

编辑1：

感谢所有的答案。我误认为 VFML 是用 C++ 编写的。正如所指出的，它是 C 语言。似乎给出的大多数答案都暗示了对 C 语言的某种理解，以便在 Python 甚至 Java 中调用库。我听说过 SWIG。任何想法如果这将是可行的，因为没有任何 C 语言知识我什至不知道我是否能让库正常工作。另一个问题是 SWIG 是否有任何 Eclipse 插件，因为我在 Eclipse 中同时使用 Python 和 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:32:20.090

要使用 Java 调用 c++ dll 方法，您可以使用 Java Native Access 库。它真的很容易使用。您需要做的就是创建界面并且您可以使用它。

例如，让您拥有带有 dll 的 imageine，`GetSystemIp(out char[] ip)`此方法的界面将如下所示：

```
import com.sun.jna.Library;
import com.sun.jna.Native;

public interface DllLibrary extends Library {
    DllLibrary INSTANCE = (DllLibrary)
        Native.loadLibrary(dllPath, DllLibrary.class);
    int GetSystemIp(String ip);

} 
```

你可以这样使用它：

```
String ip;
int rc = DllLibrary.INSTANCE.GetSystemIp(String ip); 
```

更多信息可以在[jna 站点](https://github.com/twall/jna)和[wiki 页面](http://en.wikipedia.org/wiki/Java_Native_Access)上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:06:33.160

您不能在 Python 或 Java 中直接调用 C++；您必须编写一些桥接代码。鉴于 Python 和 Java 中的外部接口是 C，这个桥接代码可能或多或少复杂：字符串是 char*，这意味着所有的内存管理问题，并且报告错误通常需要调用接口级别来创建目标语言的例外。

Python 的接口代码相当简单，除了这些问题，但它仍然需要相当好的 C++ 知识才能在 Python 对象上有效地使用 RAII。Java 的接口 (JNI) 非常复杂，即使是最简单的操作以及所有常见的资源管理，都需要多次调用 Java。

# ios - 如何确定个人账户的公司

> ID：15493711
> 
> 赞同：1
> 
> 时间：2013-03-19T07:26:40.280
> 
> 标签：ios, app-store, app-store-connect

我需要知道，如果我从我的个人开发者帐户发布应用程序，它将在商店中显示什么名称。

我不记得我第一次提交的公司名称。

![在此处输入图像描述](../Images/e5a6d47a9f3fa85967e01bfc95360bbf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:32:34.427

如果您使用您的个人开发者帐户发布应用程序，那么它将与您的“名字姓氏”一起发布并显示。

此外，公司名称不会显示，但版权，您在iTunesConnect帐户中创建应用程序时提到的版权将显示在应用程序商店中。希望有帮助。

# c# - 内联编辑在gridview中显示错误的行进行编辑

> ID：15493716
> 
> 赞同：0
> 
> 时间：2013-03-19T07:27:01.263
> 
> 标签：c#, javascript, asp.net

我有一个嵌套的gridview，在我对嵌套的gridview 进行分页并单击编辑后，它会显示第一个gridview 页面的行值。这是我编辑的代码。

```
 protected void GridView2_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView gvTemp = (GridView)sender;
    gvUniqueID = gvTemp.UniqueID;
    gvEditIndex = e.NewEditIndex;
    GridView1.DataBind();
} 
```

# vb.net - Windows 启动时启动应用程序

> ID：15493719
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:27:10.607
> 
> 标签：vb.net

我搜索并使用互联网上的代码来执行此操作，但没有完成我正在使用此代码

```
Dim appstartup_path As String = Path.GetDirectoryName(Application.StartupPath)
    Dim regKey As Microsoft.Win32.RegistryKey
    regKey = Registry.LocalMachine.OpenSubKey("HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run", True)

    If CheckBox2.Checked = True Then

        regKey.SetValue("my_app", "app_path")
        regKey.Close()

    Else

        regKey.DeleteValue("my_app", False)

    End If 
```

但是没有设置对象引用的错误......！那么这是正确的方法吗？

或者还有什么解决办法

天呐……！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:35:03.287

我现在无法对此进行测试，但在我看来，这条线

```
regKey = Registry.LocalMachine.OpenSubKey("HKEY_LOCAL_MACHINE\SOFTWARE\... 
```

包含一个冗余`HKEY_LOCAL_MACHINE`条目。`Registry.LocalMachine`已经代表`HKEY_LOCAL_MACHINE`文件夹。您希望选择的任何子文件夹都不应包含它。

```
regKey = Registry.LocalMachine.OpenSubKey("SOFTWARE\Microsoft... 
```

应该管用。

# javascript - 如何在成功时继续调用 Jquery

> ID：15493726
> 
> 赞同：2
> 
> 时间：2013-03-19T07:27:32.687
> 
> 标签：javascript, jquery

我想调用 web 服务，直到我得到所需的输出。这是我正在使用的代码。

```
$.ajax(
{
    type: "POST",
        url: "../WebService/myservice.asmx/GetStatus",
        data: "{'myparameter': '" + value + "'}",
        contentType: "application/json;charset=utf-8",
        dataType: "json",
        async: true,
        cache: false,
        success: function (response) {
                 return response.d;
                 },
        error: function (x, e) {
                alert("The call to the server side failed. " + x.responseText);
                }
}); 
```

该网络服务将返回结果。我希望在结果完成之前 jquery 调用应该每 1 秒执行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:32:58.033

试试这个：

```
function ajaxCall() {
    $.ajax({
        ...
        success: function (response) {
            //got desired output?
            /*logic*/
            //no?
            setTimeOut(ajaxCall, 1000);
        },
        error: function() {
            setTimeOut(ajaxCall, 1000);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:36:28.107

这是一个[好的开始](https://stackoverflow.com/questions/4542863/jquery-ajax-call-with-timer)

这个想法是将您的代码封装到一个方法中，然后使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)调用它：

```
setInterval(ajaxCall, 1000); 
```

例如：

```
function ajaxCall(){
  $.ajax(
  {
      type: "POST",
          url: "../WebService/myservice.asmx/GetStatus",
          data: "{'myparameter': '" + value + "'}",
          contentType: "application/json;charset=utf-8",
          dataType: "json",
          async: true,
          cache: false,
          success: function (response) {
                   return response.d;
                   setInterval(ajaxCall, 1000); //call itself
                   },
          error: function (x, e) {
                  alert("The call to the server side failed. " + x.responseText);
                  setInterval(ajaxCall, 1000); //try again
                  }
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:28:11.650

使用 jQuery 的`Deferred`/`promise`机制的变体：

```
// interval in ms, use retries = 0 for unlimited retries
function poll(url, data, interval, retries) {
    var result = $.Deferred(), retryCount = 0;

    (function repeat() {
        $.ajax({
            type: "POST",
            url: url,
            data: data,
            contentType: "application/json; Charset=utf-8",
            dataType: "json",
            async: true,
            cache: false
        })
        .then(function (response) {
            if (response.d === "success") {
                result.resolve(response);
            }
        })
        .fail(function (x, e) {
            if (retries === ++retryCount) {
                result.reject("Maximum number of retries reached (" + url + ")");
            } else {
                setTimeout(repeat, interval);
            }
        });
    })();

    return result.promise();
} 
```

用法：

```
poll(
    "../WebService/myservice.asmx/GetStatus",
    {myparameter: value}, 1000, 100
)
.then(function (response) {
    // ...
})
.fail(function (error) {
    alert(error);
    // ...
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T07:32:10.700

将您的 ajax 请求包装在一个命名函数中，您可以在需要发出另一个请求时调用该函数。在成功回调中检查结果，如果对结果不满意，请设置超时以在一秒钟内再次调用该函数。

像这样的东西：

```
(function Fetch (){
   $.ajax({
        type: "POST",
        url: "../WebService/myservice.asmx/GetStatus",
        data: "{'myparameter': '" + value + "'}",
        contentType: "application/json;charset=utf-8",
        dataType: "json",
        async: true,
        cache: false,
        success: function (response) {
            if (response != "completed") {
                setTimeout(Fetch, 1000);
            } else {
                // Do something when completed 
            }
        },
        error: function (x, e) {
            alert("The call to the server side failed. " + x.responseText);
        }
   });
})(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T07:48:46.513

正如前面的评论所解释的，如果您希望它每秒（或一段时间）调用一次。您可以使用`setTimeout()`（函数内部）或`setInterval()`（外部）。但是，如果您想继续尝试直到获得所需的代码，则最好在函数内部使用循环：

```
function startRequest() {
    while(1){
        $.ajax(
        {
            type: "POST",
                url: "../WebService/myservice.asmx/GetStatus",
                data: "{'myparameter': '" + value + "'}",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                async: true,
                cache: false,
                success: function (response) {
                         return response.d;
                         i=0;
                         break;
                         },
                error: function (x, e) {
                        alert("The call to the server side failed. " + x.responseText);
                        }
        });
    }
} 
```

# winapi - firefox/chrome如何绘制滚动条？

> ID：15493731
> 
> 赞同：5
> 
> 时间：2013-03-19T07:27:49.957
> 
> 标签：winapi, user-interface, scrollbar

chrome 或 firefox 中的 Scrollbas 没有句柄。它们是无句柄控件，但它们确实与系统默认滚动条具有相同的外观和行为。由此，我们可以推断出这些浏览器使用了windows主题API，比如DrawThemeBackground，来绘制滚动条。

然而，DrawThemeBackground 等 API 是 GDI，chrome/firefox 使用skia/cario 来渲染整个画布。我的问题是他们如何结合这两种技术？

伪代码：

```
WM_PAINT:
    prepare canvas;
    draw the canvas with skia/cario;
    bitblt to the dc;
    draw the theme-related handless control;(???)
    bitblt to the dc or directly draw to the dc;(???) 
```

过程和上面的一样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T07:59:53.990

**火狐**

实际上 cairo 具有从 cairo 表面获取 DC 的功能。示例代码：

```
VOID OnPaint(HWND hwnd, HDC hdc)
{
    RECT rc;
    ::GetClientRect(hwnd, &rc);
    //draw one line
    cairo_surface_t* surface = cairo_win32_surface_create(hdc);
    cairo_t* cr = cairo_create(surface);
    cairo_set_source_rgb(cr, 0xff, 0, 0);
    cairo_set_line_width(cr, 1);
    cairo_move_to(cr, 0, 0);
    cairo_line_to(cr, rc.right, rc.bottom);
    cairo_stroke(cr);
    cairo_destroy(cr);

    //draw the theme background
    HDC hdcNew = cairo_win32_surface_get_dc(surface);
    HTHEME hTheme = OpenThemeData(NULL, L"SCROLLBAR");
    RECT rcArrow;
    SetRect(&rcArrow, 30, 30, 45, 45);
    DrawThemeBackground(hTheme, hdcNew, SBP_ARROWBTN, ABS_DOWNDISABLED, &rcArrow, NULL);
    cairo_surface_destroy(surface);
} 
```

`gfxWindowsNativeDrawing::BeginNativeDrawing()`最后打电话`HDC gfxWindowsSurface::GetDCWithClip(gfxContext *ctx)`给cairo win32。

**铬合金**

Skia 不提供从skia canvas 到hdc 的转换功能，但是项目chrome 为skia 添加了一个扩展并实现了这个功能。

在skia/ext/bitmap_platform_device_win.cc：

```
HDC BitmapPlatformDevice::BitmapPlatformDeviceData::GetBitmapDC() {
} 
```

它从画布内部位图创建一个内存 dc。

因此，在绘画时，您是否需要使用原生 dc 或一般的 cairo/skia 画布不再重要。

示例代码：

```
void TestChromeExt(HWND hwnd, HDC hdc)
{
    RECT rc;
    GetClientRect(hwnd, &rc);
    skia::BitmapPlatformDevice* pBmpDevice = skia::BitmapPlatformDevice::Create(rc.right, rc.bottom, true);
    skia::PlatformCanvas *pCanvas = new skia::PlatformCanvas(pBmpDevice);
    pCanvas->clear(SK_ColorWHITE);
    SkPaint paint;
    paint.setColor(SK_ColorRED);
    paint.setStrokeWidth(3);
    paint.setStyle(SkPaint::kStroke_Style);
    pCanvas->drawLine(0, 0, rc.right, rc.bottom, paint);
    HDC memdc = skia::BeginPlatformPaint(pCanvas);
    RECT rcArrow;
    SetRect(&rcArrow, 100, 200, 120, 220);
    DrawThemeBackground(OpenThemeData(NULL, L"SCROLLBAR"), memdc, SBP_ARROWBTN, ABS_DOWNDISABLED, &rcArrow, NULL);
    skia::EndPlatformPaint(pCanvas);
    skia::DrawToNativeContext(pCanvas, hdc, 0, 0, &rc);
} 
```

对于 Windows，为确保原生外观，当启用视觉样式时，这些浏览器将使用`DrawThemeBackground`. 但是，当视觉样式被禁用时（经典模式为一种），它们将用于`DrawFrameControl`绘制控件。

# javascript - Javascript/Jquery-通过父子关系将数组绑定到Html Grid并按排序列排序

> ID：15493735
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:28:08.700
> 
> 标签：javascript, jquery

在父子关系中绑定 Html Grid 中的数组并按排序列排序

```
Unformatted array:   var data = [
{ index : 1,  parent : null,sort:0 },
{ index : 2,  parent : null ,sort:1},
{ index : 3,  parent : 2 , sort:0},
{ index : 4,  parent : null,sort:2},
{ index : 5,  parent : 4,sort:0 },
{ index : 6,  parent : 5 ,sort:0},
{ index : 7,  parent : 5 ,sort:1},
{ index : 8,  parent : 6 ,sort:0},
{ index : 9,  parent : 2 ,sort:2},
{ index : 10, parent : 2 ,sort:1},
];

if data binds looks like this ,Example
 Parent 1
 Child 12
 Child 1.1
 Subchild 1.1.2
 Subchild 1.1.1
 Subchild 1.2.2
 Subchild 1.2.1 
```

结果应该如下

```
formatted array: var data = [
{ index : 1,  parent : null,sort:0 },
{ index : 2,  parent : null ,sort:1},
{ index : 3,  parent : 2 , sort:0},
{ index : 10, parent : 2 ,sort:1},
{ index : 9,  parent : 2 ,sort:2},
{ index : 4,  parent : null,sort:2},
{ index : 5,  parent : 4,sort:0 },
{ index : 6,  parent : 5 ,sort:0},
{ index : 8,  parent : 6 ,sort:0},
{ index : 7,  parent : 5 ,sort:1},
]; 
```

我想像这样绑定 -->

```
 Parent 1
    --> Child 1.1
       --> Subchild 1.1.1
          --> Subchild 1.1.2
    --> Child 12
         --> Subchild 1.2.1
           --> Subchild 1.2.2 
```

以下是我现在使用的解决方案，如果数组有大数据，则需要更多时间来绑定网格

```
 function Ordering(Data,successCallBack) {
    var Grid= [];
    var parentdata=[];
    $.each(Data, function (key, value) {
         if (value.parent== null) {
            parentdata.push(value);
          }
    });

    $.each(parentdata, function (key, value) {
        child(Requirements, value, Grid, function    (Order) {
              successCallBack(Order);
        });
    });

}
function child(data, parentdata, Grid, successCallBack) {
    Grid.push(parentdata);
    $.each(data, function (key, value) {
        if (parentdata== value.parent) {
            child(data, value, Grid, function () { });
        }
    });
    if (Grid.length == Grid.length) {
        successCallBack(Grid);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:33:03.880

目前尚不清楚您的订购要求到底是什么。但是您需要创建自己的比较函数，类似于：

```
var newOrder = [];
function myCompare(a, b){
    if (a.sort != b.sort){
        return (a.sort < b.sort ? -1 : 1)
    }
    if (data[a.parent].sort != data[b.parent].sort){
        return (data[a.parent].sort < data[b.parent].sort ? -1 : 1)
    }
    return 0;
}
for (var i in data){
    newOrder[i] = data[i];
}
newOrder.sort(myCompare); 
```

顺便说一句，您有一个错误：`sort`每个对象中有两个属性。

编辑：好的，我想我现在明白你想要什么了。[这是我的解决方案的 JSFiddle](http://jsfiddle.net/PdQ8h/7/)。

```
var newData = [];

var top = {};

function doSort() {
    for (var i in data) {
        var child = data[i];
        if (child.parent) {
            var parent = data[child.parent-1];
        } else {
            var parent = top;
        }
        if (parent.children === undefined){
            parent.children = [];
        }
        parent.children[parent.children.length] = child;
    }
    recurse(top);
}

function recurse(parentObject) {
    var position = newData.length;
    if (parentObject !== top) {
        newData[position] = parentObject;
    }
    if (parentObject.children !== undefined) {
        parentObject.children.sort(myCompare);
        for (var i in parentObject.children) {
            var child = parentObject.children[i];
            recurse(child);
            if (parentObject === top) {
                // do nothing, it's the top container
            } else if (child.parent) {
                child.parent = position + 1;
            } else {
                // leave as null
            }
        }
    }
}

function myCompare(a, b) {
    if (a.sort != b.sort) {
        return (a.sort < b.sort ? -1 : 1);
    }
    return 0;
}

doSort(); 
```

# java - 运行应用程序时抛出 JVM 外部错误

> ID：15493737
> 
> 赞同：0
> 
> 时间：2013-03-19T07:28:15.323
> 
> 标签：java, jvm-crash, worldwind

我正在开发基于 Eclipse 中 World Wind Java SDK 的应用程序。就像两周前一样，每次尝试运行应用程序时，我都会开始抛出这样的错误：

> Java 运行时环境检测到一个致命错误：
> 
> EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x1a97d42a, pid=4136, tid=4888 JRE 版本：6.0_31-b05 Java VM：Java HotSpot(TM) 客户端 VM（20.6-b01 混合模式 windows-x86）有问题的框架：C [ig4icd32。 dll+0x3d42a]
> 
> 包含更多信息的错误报告文件保存为：
> C:\thesis\100GreatP\eclipse_ws\test\hs_err_pid4136.log
> 
> 如果您想提交错误报告，请访问：
> [url]http://java.sun.com/webapps/bugreport/crash.jsp[/url] 崩溃发生在 Java 虚拟机之外的本地代码中。请参阅有问题的框架以了解报告错误的位置。

有趣的是，只有当我试图在应用程序启动时显示我新制作的图层时才会发生这种情况：

```
wwd.getModel().getLayers().add(GreatPlacesIcons);
wwd.addSelectListener(GreatPlacesIcons);
layers = new LayerViewDockable(wwd,"layers"); 
```

一旦我对上面的这些代码行发表评论，应用程序就会正确启动。有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:17:24.350

所以最后我解决了我的问题。问题出在代码和 Eclipse 之外，问题出在定义 JVM 环境变量 CLASSPATH 之一。我已经从日志文件中找出了它，这是它的提取：

> VM 参数：jvm_args：-Dfile.encoding=Cp1252 java_command：org.cnstar.wiki.app.GreatPlaces 启动器类型：SUN_STANDARD
> 
> 环境变量：JAVA_HOME=C:\Program Files\Java\jre6 CLASSPATH=.;C:\Program Files\Java\jre7\lib; PATH=C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:/Program Files/Java/jre6/lib/i386;

变量类路径指向 jre7，但是，自从我几天前卸载 Java 7 以来，它不再是那样了。当我运行我的应用程序时，它自动失败了。所以我去了（Windows XP）开始->控制面板->系统->高级->环境变量并更改变量CLASSPATH，使其指向jre6。

# sql - 连接数不定

> ID：15493738
> 
> 赞同：1
> 
> 时间：2013-03-19T07:28:19.407
> 
> 标签：sql, sql-server, dynamic, join

我正在尝试无限次加入自己的表。列是：

```
+----------+---------+         +--------+--------+--------+---+-----+-----+-----+
| ClientID |  Data   |         | Client |  Data  | Client | * | Cli |  *  | ... |
+----------+---------+         +--------+--------+--------+---+-----+-----+-----+
|  7       | *data*  |         |    7   | *data* |    8   | * |  9  |  *  |     |
|  7       | *data*  |         |    7   | *data* |    8   | * |  9  |  *  |     |
|  8       | *data*  |    ->   |    7   | *data* |    8   | * |  9  |  *  |     |
|  9       | *data*  |         |    7   | *data* |   ...  | * | ... |     |     |
|  ...     |  ...    |         |   ...  |   ...  |        | * |     |     |     |
+--------------------+         +--------+--------+--------+--+-----+------+-----+ 
```

我不知道不同客户的数量，我需要完全加入的表。我尽量不使用动态 SQL，我怀疑这是最简单的方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:02:05.837

也许

```
select distinct clientid, 
stuff((select ','+DATA 'data()'
from [table] t1
where t1.clientid=t2.clientid
for xml path('')),1,1,'')
from [table] t2 
```

# sql - 如何将datagrid中输入的记录保存到sql数据库

> ID：15493739
> 
> 赞同：1
> 
> 时间：2013-03-19T07:28:21.680
> 
> 标签：sql, vb.net, datagrid, visual-studio-2003

我的系统概念是这样的。我完成了使用内连接显示来自不同表的列。

我发现很难，因为我认为您一次只能在 sql 中使用插入命令到一个表。

但我的数据网格显示从不同表调用的不同列。

我的 sql 语法的结构是怎样的？并在 vb.net 2003 上调用存储过程

感谢任何人的任何想法

这是我的 SQL 存储过程

```
CREATE PROCEDURE AddToOfficeEquipmentProfile AS

INSERT INTO dbo.tblOfficeEquipmentProfile(OE_ID
                                        , Report_ID
                                        , OE_Category
                                        , OE_SubCategory
                                        , OE_Name
                                        , OE_User
                                        , OE_Brand
                                        , OE_Model
                                        , OE_Specs
                                        , OE_SerialNo
                                        , OE_PropertyNo
                                        , OE_Static_IP
                                        , OE_Vendor
                                        , OE_PurchaseDate
                                        , OE_WarrantyInclusiveYear
                                        , OE_WarrantyStatus
                                        , OE_Status
                                        , OE_Dept_Code
                                        , OE_Location_Code
                                        , OE_Remarks)
VALUES
  (DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT)
GO 
```

这是我的 VB 代码

```
Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim Command As SqlCommand = New SqlCommand
    Command.Connection = sqlconn
    Command.CommandText = "AddToOfficeEquipmentProfile"
    Command.CommandType = CommandType.StoredProcedure

    Dim sAdapter As SqlDataAdapter = New SqlDataAdapter(Command)
    Dim DataSet As DataSet = New DataSet(Command.CommandText)

    sAdapter.Fill(DataSet)
    DataGrid1.DataSource = DataSet.Tables(0)
    MsgBox(MsgBoxStyle.OKOnly, "YOU HAVE SUCCESSFULLY ADDED RECORDS TO THE TABLE") 
```

它返回指向的错误

```
 sAdapter.Fill(DataSet) 
```

这是我下面的第二个代码，不需要存储过程

```
 Dim adapter As New SqlDataAdapter
    Dim sql As String

    sql = "INSERT INTO tblOfficeEquipmentProfile(OE_ID, Report_ID, OE_Category, OE_SubCategory, OE_Name, OE_User, OE_Brand, OE_Model, OE_Specs, OE_SerialNo, OE_PropertyNo, OE_Static_IP, OE_Vendor, OE_PurchaseDate, OE_WarrantyInclusiveYear, OE_WarrantyStatus, OE_Status, OE_Dept_Code, OE_Location_Code, OE_Remarks)VALUES(DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT)"
    Try
        sqlconn.Open()
        adapter.InsertCommand = New SqlCommand(sql, sqlconn)
        adapter.InsertCommand.ExecuteNonQuery()
        MsgBox("Row inserted !! ")
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try 
```

但仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:02:45.050

你的代码太长了，我的意思是..

```
 Try
                    con = New OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\notifdb.accdb")
                    Dim command As String
                    command = "INSERT INTO NFTB (NOTIF, EMP_NO, EMP_NAME, [POSITION]) VALUES (@NOTIF, @EMP_NO, @EMP_NAME, @POSITION)"
                    con.Open()
                    Dim cmd As OleDbCommand
                    cmd = New OleDbCommand(command, con)
                    cmd.Parameters.AddWithValue("@NOTIF", NOTIFTextBox.Text)
                    cmd.Parameters.AddWithValue("@EMP_NO", EMP_NOTextBox.Text)
                    cmd.Parameters.AddWithValue("@EMP_NAME", EMP_NAMETextBox.Text)
                    cmd.Parameters.AddWithValue("@POSITION", POSITIONTextBox.Text)
                    cmd.ExecuteNonQuery()
                Catch exceptionObject As Exception
                    MessageBox.Show(exceptionObject.Message)
                Finally
                    con.Close()
                End Try 
```

我刚刚说了插入代码，除此之外你必须自己做。而且 SQL 永远不会有默认值，您必须将列名的值更改为某些内容，然后向其添加参数，即表单中将输入到数据库的文本框或字段。

# c# - Windows 窗体窗口始终聚焦？

> ID：15493744
> 
> 赞同：0
> 
> 时间：2013-03-19T07:28:52.503
> 
> 标签：c#, .net, winforms, window, form-control

我知道已经有一些关于这个的话题了。如果我单击记事本或任何程序，它不会在其中输入任何数据，而只会在我的 Windows 窗体文本框中输入数据，我需要的是让 Windows 窗体窗口始终集中含义。

我发现这段代码可以解释更多

```
 //Delegates for safe multi-threading.
    delegate void DelegateGetFocus();
    private DelegateGetFocus m_getFocus;
    Thread newThread;

    public MemberLogin()
    {

        m_getFocus = new DelegateGetFocus(this.getFocus);  
        InitializeComponent();
        spawnThread(keepFocus);
        toggleFocusButton.Text = "OFF";
        timer1.Interval = 2000;
        textBox1.Select();
    }

    //test focus stuff
    //Spawns a new Thread.
    private void spawnThread(ThreadStart ts)
    {
        try
        {
            newThread = new Thread(ts);
            newThread.Start();
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message, "Exception!", MessageBoxButtons.OK,
                MessageBoxIcon.Error);
        }
    }

    //Continuously call getFocus.
    private void keepFocus()
    {
        while (true)
        {
            getFocus();
        }
    }

    //Keeps Form on top and gives focus.
    private void getFocus()
    {
        //If we need to invoke this call from another thread.
        if (this.InvokeRequired)
        {
            this.Invoke(m_getFocus, new object[] { });
        }
        //Otherwise, we're safe.
        else
        {
            //having this seemed to have kept my windows onTop at all times even when off 
           // this.TopMost = true;
            this.TopMost = true;
            this.Activate();
            this.textBox1.Select();
            this.textBox1.Focus();

        }
    } 
```

此代码似乎仅在我的项目打开时才能正常工作，这意味着当我的 Visual Studio 项目关闭时，窗口位于最顶部但没有焦点，这意味着我可以在其他程序中键入。我发现奇怪的是，记事本和我的文本框都有闪烁的线条，告诉你在哪里写文本。如果我从 Visual Studio 项目运行我的应用程序，一切正常，当我尝试单击其他窗口时，它不会让我访问我想要的。

所以我有点困惑为什么它只能在打开的项目中正常工作

另请注意，只要打开项目，即使我制作的 .exe 和其他副本也能正常工作，我会关闭项目解决方案，并且程序会执行我上面解释的操作。

只是做了一些更多的测试，它似乎只有在这个进程运行 vhost.exe 时才能正常工作，这是 Visual Studio 托管进程。我在设置中禁用了它，当我从 VS 启动时它工作正常但是当我只运行 bin 文件夹中的 exe 时，我仍然得到奇怪的结果

**编辑**

这是我用我的结果制作的快速视频[http://www.youtube.com/watch?v=1ozpHSRGnMo](http://www.youtube.com/watch?v=1ozpHSRGnMo)

**新编辑**

我为解决这个问题所做的就是通过这样做将我的应用程序设置为全屏模式，这样用户就可以在不先关闭这个窗口的情况下点击其他窗口

```
this.FormBorderStyle = FormBorderStyle.None;
this.WindowState = FormWindowState.Maximized; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T17:10:08.580

确实，您无法阻止其他窗口获得焦点，但是您可以在它们获得焦点的第二秒从它们那里获得焦点；）

```
private void timer1_Tick(object sender, EventArgs e)
{
    if (!this.Focused)
    {
        this.Activate();
    }
} 
```

只需创建一个计时器，从一开始就启用它，使滴答间隔尽可能小，并将上面的代码作为滴答事件。

希望这可以帮助

对不起英语不好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:43:26.997

您的代码看起来不错，应该可以正常工作，您可以尝试以下 URL 中建议的内容吗...不过只是一个建议，而不是使用

```
this.TopMost = true; 
```

[http://www.c-sharpcorner.com/uploadfile/kirtan007/make-form-stay-always-on-top-of-every-window/](http://www.c-sharpcorner.com/uploadfile/kirtan007/make-form-stay-always-on-top-of-every-window/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T06:51:08.597

您不能创建可以阻止其他程序获得焦点的 Windows 窗体应用程序。Windows 本身不允许这样做。解决此问题的唯一方法是在全屏模式下创建一个`OpenGL`或应用程序。`DirectX`这将阻止用户查看任何其他应用程序。但即使这样，用户也可以`Alt+Tab`返回到其他应用程序。

# java - 当复合组件放置在 PrimeFaces p:dialog 中时，不会调用 encodeAll 方法

> ID：15493746
> 
> 赞同：3
> 
> 时间：2013-03-19T07:28:54.737
> 
> 标签：java, jsf-2, primefaces, dialog, composite-component

我已经测试了 Balusc 的 inputDate 组件：在 PrimeFaces 对话框中[具有多个输入字段的复合组件。](http://balusc.blogspot.ro/2013/01/composite-component-with-multiple-input.html)该`encodeAll`方法根本没有被调用，选择框也没有被初始化。复合组件在放置在文章中所示的表单中时可以正常工作。

为什么`encodeAll`在对话框中不起作用，如何解决？

**编辑 1**

我使用 Mojarra 2.1.13 和 PrimeFaces 3.4.2。

**编辑 2** 这是我真实项目中的一个示例。我使用您的组件来了解复合组件。我有一个视图帐户，带有一个数据表和一个工具栏。按添加应该会打开一个带有自定义向导的对话框。对话框有自己的形式，但不显示向导。

`accounts.xhtml`

```
<h:form id="form">
    <ui:include src="/WEB-INF/flows/accounts/accountsTable.xhtml" />    
</h:form>
<ui:include src="/WEB-INF/flows/accounts/mainDialog4.xhtml" /> 
```

`accountsTable.xhtml`

```
<p:dataTable id="accounts" ... />  

<p:toolbar>
    <p:toolbarGroup align="left">
        <p:commandButton value="Add"
            action="#{accountsBean.initializeEntity}"
            process="@this" update=":actionsDialog4"
            oncomplete="actionsDialogWidget4.show()">
            <f:setPropertyActionListener value="#{2}"
                target="#{accountsBean.operation}" />
            <f:setPropertyActionListener value="accountsBean"
                target="#{sessionScope.beanName}" />
        </p:commandButton>
    </p:toolbarGroup>
 </p:toolbar> 
```

`mainDialog4.xhtml`

```
<p:dialog id="actionsDialog4" widgetVar="actionsDialogWidget4" dynamic="true"
    modal="true">       
    <h:form>
    <costom:actionWizard name="wizard" widgetVar="wiz" bean="#{accountsBean}" header="#{accountsBean.entityHeader}" />
    </h:form>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:45:59.367

这是由于 PrimeFaces[`CoreRenderer`](http://grepcode.com/file/repository.primefaces.org/org.primefaces/primefaces/3.3/org/primefaces/renderkit/CoreRenderer.java/)没有调用方法，而是单独调用`UIComponent#encodeAll()`。因此，当它被声明为 PrimeFaces 组件的直接子组件时，它总是会失败，但当它被声明为标准 JSF 组件的直接子组件时，它会起作用。`renderChildren()``encodeBegin()``encodeChildren()``encodeEnd()`

如果您执行工作`encodeBegin()`而不是`encodeAll()`，那么它应该可以工作。我已经相应地更新了复合组件文章。

在不相关的说明中，`<p:dialog>`应该有自己的形式。

# google-maps - 没有使用经纬度获得正确的地址

> ID：15493748
> 
> 赞同：0
> 
> 时间：2013-03-19T07:28:59.113
> 
> 标签：google-maps

我去了[http://maps.google.co.in/](http://maps.google.co.in/)，在那里我在搜索栏中输入了**墨西哥附近的餐馆**，我按 Enter，它显示了餐厅列表，例如，我点击了第一个餐厅' `La Palapa Restaurant`'，然后点击`more`然后点击`Send`，它打开一个框架然后我点击框架中的链接`La Palapa Restaurant`。从那个链接我得到纬度-经度`&ll=25.958045,-98.349609&spn=21.866133,43.022461`。我使用这个 latitude-longitude 获得了不同的地址`25.958045,-98.349609`，在那个框架中我有另一个地址。地址不匹配。我通过这两个站点确认地址。 [http://www.findlatitudeandlongitude.com/find-address-from-latitude-and-longitude.php](http://www.findlatitudeandlongitude.com/find-address-from-latitude-and-longitude.php)和[http://itouchmap.com/latlong.html](http://itouchmap.com/latlong.html). 请指导我，如何解决这个问题。是否需要转换这些经纬度以获得正确的地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:22:03.220

iframe-URL 的参数不包含有关标记（地点）的任何信息，ll 参数例如定义地图的中心（参见[http://www.seomoz.org/ugc/everything-you-never -wanted-to-know-about-google-maps-parameters](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)），因此您不能使用它们来获取与该地点相关的任何详细信息。

这个特定地方的 LatLng 是`20.599526,-105.238832`

要以编程方式获取地点[的详细信息，请请求地点服务](https://developers.google.com/places/documentation/search#TextSearchRequests)

# php - 如何一键将一个列表框值传递给另一个列表框

> ID：15493751
> 
> 赞同：0
> 
> 时间：2013-03-19T07:29:39.933
> 
> 标签：php, javascript, html, mysql, listbox

我正在使用 php 和 mysql 构建在线商店应用程序。我做了一个列表框，可以用来列出主要类别。一旦我们选择了主要类别，子类别应该会下来。我们如何在不按下按钮或重新加载页面的情况下完成这项任务。

列表框的代码

```
<select name="category" id="inputarealistproduct" onfocus="getsubcat();">
        <option> Select category</option>
    <?php 
        $query="select id, categories_name from categories where parent_id=0";
        $result=mysql_query($query);
        while(list($id, $name)=mysql_fetch_row($result)) 
        {
            echo "<option value=\"".$id."\">".$name."</option>";            
        }
    ?></select> 
```

桌子设计是

id categories_name parent_id categories_sort

请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:37:02.910

试试这个：Jquery + Ajax

```
 $('#inputarealistproduct').change(function () {
      var product =  $('#inputarealistproduct').val();
       $.ajax({
            url : 'url of your page where you ececute query',
            type : 'GET',
            data : {
                item : product
            },
            success : function (resp) {
                if (resp.status) {
                    // manipulate your response data here.
                } else {
                    show_message('error', resp.msg);
                }
            }
        });

    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:38:01.517

我建议您在第一个列表框上实现 onchange 事件，以便它使用该类别的子类别填充另一个列表框：

```
<select name="category" id="inputarealistproduct" onfocus="getsubcat();" onchange="GetSubCategories()">
        <option> Select category</option>
    <?php 
        $query="select id, categories_name from categories where parent_id=0";
        $result=mysql_query($query);
        while(list($id, $name)=mysql_fetch_row($result)) 
        {
            echo "<option value=\"".$id."\">".$name."</option>";            
        }
    ?></select>
<div id="result"></result> 
```

在js中：

```
function GetSubCategories(){
   var categoryId = document.getElementById("inputarealistproduct").value;

   $.ajax({
            url : 'process.php',
            type : 'GET',
            data : "category=" + categoryId ,
            success : function (resp) {
                if (resp.status) {
                    $("#result").html(data);
                } 
            }
        });
} 
```

在 process.php 中：

```
<?php
$category = $_GET["category"];
// change the query so that the column names match your subcategory table
$query="select id, sub_categories_name from subcategories where category_id=". $category;
$result=mysql_query($query);
?>

<select name="subcategory" id="subcategory">
            <option>Select sub category</option>
        <?php while(list($id, $name)=mysql_fetch_row($result)) 
            {
                echo "<option value=\"".$id."\">".$name."</option>";            
            }
        ?>
</select> 
```

# php - Yii主键增加2

> ID：15493755
> 
> 赞同：0
> 
> 时间：2013-03-19T07:29:51.163
> 
> 标签：php, insert, yii, primary-key

注意到奇怪的事情。在我的数据库中，所有表都只有**奇数主键**。

```
 id  |  value
  1  |  10
  3  |  15
  5  |  NULL
  7  |  1 
```

在其他 Yii 网站上一切正常。

通过不同方法添加到不同表中的行：

```
$model = new Tbl1;
$model->value = 10;
$model->save(); 
```

和

```
$command = Yii::app()->db->createCommand();
$sql = 'INSERT INTO `tbl2` SET `value` = 10';
$command->setText($sql);
$command->execute(); 
```

这很奇怪，是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T07:36:00.557

在您的数据库服务器（可能是 MySQL）中检查`auto_increment_increment`和`auto_increment_offset`变量。

将这些设置为**`1`**.

* * *

[此处](http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html)列出了有关进一步命令和操作的信息。

# iphone - 为 iPhone 中的非消耗性产品恢复 inApp

> ID：15493761
> 
> 赞同：4
> 
> 时间：2013-03-19T07:30:15.473
> 
> 标签：iphone, ios, in-app-purchase

是否必须在 UI 中添加恢复按钮以恢复非消耗品的应用内购买。

有没有办法像在愤怒的小鸟和其他应用程序/游戏中那样自动完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:32:31.827

是的，原因是因为它是非消耗品，这是有道理的，因为删除并重新安装应用程序会使用户失去购买，因此您需要包含一个恢复非消耗品的选项：

请在[此处参考以下链接](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html#//apple_ref/doc/uid/TP40008267-CH3-SW2)

**个人经验**

在我的一款游戏中，我将应用内购买集成到安装的非消耗性 IAP 中，苹果拒绝了我的应用并插入一个恢复按钮用于恢复购买，现在应用正在审核中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T07:38:42.380

正如 Apple 在[应用内购买指南](https://developer.apple.com/in-app-purchase/In-App-Purchase-Guidelines.pdf)中提到的：

**设计您的应用内购买商店**

您的应用内购买商店应该有吸引力、易于理解且易于使用。遵循这些设计指南可帮助您实现这一目标：

提供“检查库存”按钮，允许用户检查他们可能丢失的物品或他们已经在另一台设备上购买的物品。请记住，自动启动以前购买的恢复（这将提示用户输入他们的 iTunes Store 密码）可能会让您的用户感到困惑。

在代码中，调用`restoreCompletedTransactions()`方法来实现这一点。

# visual-c++ - 大系统中的dll替换

> ID：15493764
> 
> 赞同：1
> 
> 时间：2013-03-19T07:30:29.147
> 
> 标签：visual-c++, dll

更改 dll 时，我必须将其放在系统加载到内存的目录中。问题是每次改完都要关闭系统，换个新的dll，然后启动系统。大约需要 15/20 分钟，这非常长。

谁能告诉我如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:43:30.687

当您想要快速切换 DLL 版本时，请将 DLL 与可执行文件放在同一目录中，或者在项目设置 -> 配置属性 -> 调试 -> 环境中提供切换 DLL 的目录的路径。然后你不必弄乱你的 Windows 系统目录。

但是，微软[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)声明：

> 如果内存中已经加载了具有相同模块名称的 DLL，则系统在解析到加载的 DLL 之前只检查重定向和清单，无论它位于哪个目录。系统不会搜索 DLL。

如果[AlwaysUnloadDLL](http://www.pctools.com/guides/registry/detail/667/)适合您，您可以尝试。

# javascript - 如何获取父/包装对象的引用？

> ID：15493768
> 
> 赞同：1
> 
> 时间：2013-03-19T07:30:42.933
> 
> 标签：javascript

我有以下对象。

```
ou.map : {
   settings : {
   },

   basePath : './path/';
   marker_setting : {
     img   :  this.basePath + 'image.png';
   },

   fun : function() {
      alert ( this.maker_setting.img  );
      //alert ( this.basePath + this.maker_setting.img ); Right now, I am using this where this.maker_setting.img is simply 'image.png'
   }

} 
```

在这里， value of`ou.map.marker_setting.img`出来是`undefinedimage.png`，但我希望它是`./path/image.png`。我怎样才能做到这一点？

**编辑**
我也愿意改变完整的方法。我想要的只是一个具有marker_setting 和basePath 的命名空间和一个可以使用marker_setting 中的属性的主要方法。

另外，我尝试了所有这些

```
img   :  this.basePath + 'image.png';
img   :  basePath + 'image.png';
img   :  ou.map.basePath + 'image.png'; 
```

没有一个，这些都给出了期望的输出。让我知道是否需要任何其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:37:00.473

的值`this`取决于执行上述代码的方式和位置，即`ou.map`在您的案例中定义对象的上下文。

例如：

```
function foo() {
   ou.map = {
      // here this would be 'x'
   }
}

foo.call('x'); // means the value of "this" inside foo() will be 'x' 
```

# php - 有没有办法告诉 curl 不使用缓存

> ID：15493769
> 
> 赞同：31
> 
> 时间：2013-03-19T07:30:44.870
> 
> 标签：php, curl

我正在尝试找出 url 的文件大小：

```
$url1 = 'www.google.com';
$curl1 = curl_init();
curl_setopt($curl1, CURLOPT_URL, $url1); 
curl_setopt($curl1, CURLOPT_RETURNTRANSFER, TRUE);
curl_exec($curl1);
$file_size = curl_getinfo($curl1, CURLINFO_SIZE_DOWNLOAD ); 
$file_size_kb = $file_size / 1000;
echo $file_size_kb; 
```

输出是`43331`。我认为它太低了，因为我有谷歌缓存。这是真的吗？我还在其他一些计算 url 大小的网站上测试了 google，它的大小是原来的两倍。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-19T07:34:07.773

你可以用`CURLOPT_FRESH_CONNECT`这个。从[`curl_setopt`](http://www.php.net/manual/en/function.curl-setopt.php)

> **CURLOPT_FRESH_CONNECT** TRUE 强制使用新连接而不是缓存连接。

```
curl_setopt($curl1, CURLOPT_FRESH_CONNECT, TRUE); 
```

* * *

根据[RFC 7234 - 超文本传输​​协议 (HTTP/1.1)：缓存](https://www.rfc-editor.org/rfc/rfc7234)和[5.2。缓存控制](https://www.rfc-editor.org/rfc/rfc7234#section-5.2)

> “Cache-Control”标头字段用于为请求/响应链中的缓存指定指令。

[5.2.1。请求缓存控制指令](https://www.rfc-editor.org/rfc/rfc7234#section-5.2.1)定义了几个指令来控制响应缓存的使用。其中之一是

> **5.2.1.4。无缓存**
> 
> “no-cache”请求指令指示缓存不得使用存储的响应来满足请求，而无需在源服务器上成功验证。

所以设置一个适当的标题

```
curl_setopt($curl1, CURLOPT_HTTPHEADER, array("Cache-Control: no-cache")); 
```

应确保将返回有效且最新的响应。我了解，如果服务器上的验证允许这样做，这仍可能导致缓存响应。

* * *

但是，[5.2.2.1。must-revalidate](https://www.rfc-editor.org/rfc/rfc7234#section-5.2.2.1)是服务器给出的[响应缓存控制指令以及对请求的响应](https://www.rfc-editor.org/rfc/rfc7234#section-5.2.2)

> [...] 当且仅当未能验证对表示的请求可能导致不正确的操作（例如静默未执行的金融交易）时，服务器才应该使用 must-revalidate 指令。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-19T07:34:33.130

curl_setopt($curl1, CURLOPT_FRESH_CONNECT, 1); // 不要使用 url 的缓存版本

```
CURLOPT_FRESH_CONNECT TRUE to force use of a new connection instead of a cached one. 
```

[在这里](http://www.php.net/manual/en/function.curl-setopt.php#82300)查看示例

你可以设置标题

```
$headers = array( 
                 "Cache-Control: no-cache", 
                ); 
curl_setopt($curl1, CURLOPT_HTTPHEADER, $headers); 
```

此链接可能对您有所帮助[http://www.php.net/manual/en/function.curl-setopt.php#96903](http://www.php.net/manual/en/function.curl-setopt.php#96903)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-13T23:15:49.547

避免缓存的最佳方法是将时间或任何其他随机元素应用于 url，如下所示：
`$url .= '?ts=' . time();`

所以例如，而不是让
`http://example.com/content.php`
你
`http://example.com/content.php?ts=1212434353`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-19T07:35:03.983

您可以通过设置来告诉`CURL`使用新数据`CURLOPT_FRESH_CONNECT``TRUE`

您可以在此处阅读有关`CURL`功能的更多信息：

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-19T07:52:39.073

使用**CURLOPT_FRESH_CONNECT** - TRUE 强制使用新连接而不是缓存连接。

**例子：**

```
<?php
    function check_url($url) {
        $c = curl_init();
        curl_setopt($c, CURLOPT_URL, $url);
        curl_setopt($c, CURLOPT_HEADER, 1); // get the header
        curl_setopt($c, CURLOPT_NOBODY, 1); // and *only* get the header
        curl_setopt($c, CURLOPT_RETURNTRANSFER, 1); // get the response as a string from curl_exec(), rather than echoing it
        curl_setopt($c, CURLOPT_FRESH_CONNECT, 1); // don't use a cached version of the url
        if (!curl_exec($c)) { return false; }

        $httpcode = curl_getinfo($c, CURLINFO_HTTP_CODE);
        return ($httpcode < 400);
    }
?> 
```

有关 curl 的更多详细信息，请查看[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

这可以帮助你。

# java - 了解实体映射到数据库视图的删除或更新

> ID：15493773
> 
> 赞同：2
> 
> 时间：2013-03-19T07:30:56.587
> 
> 标签：java, hibernate, jpa, oracle10g, jpa-2.0

我对使用 Hibernate 从数据库视图中更新或删除行有疑问

我在实体中有以下内容

```
@Entity
@Table(name = "V_EMPLOYEES")
..... 
```

`V_EMPLOYEES`是用于连接两个表的数据库视图

在 DAO 类中，我删除了一行

```
entityManager.remove(entityManager.merge(employees)); 
```

基于以上，我可以成功删除基于主键的行。

当我在 Entity 类中映射了一个视图时，如何成功地从表中删除一行？因为根据 Hibernate FAQ - [视图就像任何其他表一样（除了您可能无法更新或插入视图）](https://community.jboss.org/wiki/HibernateFAQ-CommonProblems#Does_Hibernate_support_database_views)

任何输入或见解都是非常可观的。

我的休眠版本`4.1.0 Final`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:33:58.167

哦，其实有个很好的问题，对于某些可以插入甚至删除视图中的数据的数据库，例如 Mysql。但是视图应该有一些特殊的功能，例如视图应该包括来自 1 个表的所有列。该操作是否可以工作取决于数据库引擎是否休眠。

# linux - “排序文件名| uniq”不适用于大文件

> ID：15493774
> 
> 赞同：3
> 
> 时间：2013-03-19T07:30:58.550
> 
> 标签：linux, bash, shell, terminal, command-line-interface

我可以从小文本文件中删除重复条目，但不能从大文本文件中删除。
我有一个 4MB 的文件。
文件的开头如下所示：

```
aa
aah
aahed
aahed
aahing
aahing
aahs
aahs
aal
aalii
aalii
aaliis
aaliis
... 
```

我想删除重复项。
例如，“aahed”出现两次，我只希望它出现一次。

无论我尝试过哪种单线，大名单都不会改变。

如果输入： **sort big_list.txt | 独特 | 少见**
：

```
aa
aah
aahed
aahed   <-- didn't get rid of it
aahing
aahing   <-- didn't get rid of it
aahs
aahs   <-- didn't get rid of it
aal
... 
```

但是，如果我从这个文本文件的顶部复制一小块单词并在小块数据上重新运行命令，它会达到预期的效果。

这些程序是否因为文件太大而拒绝排序？我不认为 4MB 很大。它不会输出警告或任何东西。

我很快就编写了自己的“uniq”程序，它也有同样的行为。它适用于列表的一小部分，但对 4MB 文本文件没有任何作用。我的问题是什么？

**编辑：** 这是一个十六进制转储：

```
00000000  61 61 0a 61 61 68 0a 61  61 68 65 64 0a 61 61 68  |aa.aah.aahed.aah|
00000010  65 64 0d 0a 61 61 68 69  6e 67 0a 61 61 68 69 6e  |ed..aahing.aahin|
00000020  67 0d 0a 61 61 68 73 0a  61 61 68 73 0d 0a 61 61  |g..aahs.aahs..aa|
00000030  6c 0a 61 61 6c 69 69 0a  61 61 6c 69 69 0d 0a 61  |l.aalii.aalii..a|
00000040  61 6c 69 69 73 0a 61 61  6c 69 69 73 0d 0a 61 61  |aliis.aaliis..aa| 
```

* * *

```
61 61 68 65 64 0a
a  a  h  e  d  \r

61 61 68 65 64 0d
a  a  h  e  d  \n 
```

**已解决：不同的行分隔符**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:32:42.757

[sort(1)](http://linux.about.com/library/cmd/blcmdl1_sort.htm)命令接受`-u`键唯一性选项。

只需使用

```
 sort -u big_list.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T11:12:44.683

您可以标准化行分隔符（将 CR+LF 转换为 LF）：

```
sed 's/\r//' big_list.txt | sort -u 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T02:26:59.667

回答[max taldykin](https://stackoverflow.com/users/147057/)关于以下内容的问题`awk '!_[$0]++' file`：

`awk '!_[$0]++' file`是相同的

```
awk '!seen[$0]++' file 
```

, 这与

```
awk '!seen[$0]++ { print; }' file 
```

， 意思是

```
awk '
    {
        if (!seen[$0]) {
            print;
        }
        seen[$0]++;
    }' file 
```

这里的重点：

1.  `$0`表示当前*记录*，通常是当前行
2.  在`awk`中，*动作*部分是可选的，默认动作是`{ print; }`
3.  在*算术*上下文中，未初始化的 var 是`0`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T07:35:29.650

除了`sort -u` 你还可以使用`awk '!_[$0]++' yourfile`

# xsl-fo - 如何仅在页面的某些部分具有 column-count="2" (XSL-FO)

> ID：15493782
> 
> 赞同：9
> 
> 时间：2013-03-19T07:31:42.350
> 
> 标签：xsl-fo

我希望 column-count="2" 仅在页面的某些部分中具有。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE fo:root [
    <!ENTITY nbsp "&#160;">
     ]>
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <fo:layout-master-set>
       <fo:simple-page-master master-name="A4"
            page-width="21cm" 
            page-height="29.7cm" >
       <fo:region-body 
            margin-bottom="1.5cm" 
            margin-right="2cm" 
            margin-left="2cm" 
            margin-top="1.5cm"
            column-count="2"/>
   </fo:simple-page-master>
   <fo:simple-page-master master-name="NOCOLUMN"
            page-width="21cm" 
            page-height="29.7cm" >
       <fo:region-body 
            margin-bottom="1.5cm" 
            margin-right="2cm" 
            margin-left="2cm" 
            margin-top="1.5cm"/>
   </fo:simple-page-master>
 </fo:layout-master-set>

<fo:bookmark-tree>
  <fo:bookmark internal-destination="sec0">
    <fo:bookmark-title>Adding Fonts to FOP</fo:bookmark-title>
  </fo:bookmark>

  <fo:bookmark internal-destination="sec1">
    <fo:bookmark-title>Adding additional Type 1 fonts</fo:bookmark-title>

    <fo:bookmark internal-destination="sec1-1">
      <fo:bookmark-title>Generating a font metrics file</fo:bookmark-title>
    </fo:bookmark>
    <fo:bookmark internal-destination="sec1-2">
      <fo:bookmark-title>Register the fonts within FOP</fo:bookmark-title>
    </fo:bookmark>
  </fo:bookmark>

  <fo:bookmark internal-destination="sec2">
    <fo:bookmark-title>Adding additional TrueType fonts</fo:bookmark-title>

    <fo:bookmark internal-destination="sec2-1">
      <fo:bookmark-title>Generating a font metrics file</fo:bookmark-title>
    </fo:bookmark>
    <fo:bookmark internal-destination="sec2-2">
      <fo:bookmark-title>TrueType collections</fo:bookmark-title>
    </fo:bookmark>
    <fo:bookmark internal-destination="sec2-3">
      <fo:bookmark-title>Register the fonts within FOP</fo:bookmark-title>
    </fo:bookmark>

  </fo:bookmark>

 <fo:bookmark internal-destination="sec3">
    <fo:bookmark-title>Embedding fonts in the PDF</fo:bookmark-title>
  </fo:bookmark>

 <fo:bookmark internal-destination="sec4">
    <fo:bookmark-title>Example embedding MSGothic</fo:bookmark-title>

   <fo:bookmark internal-destination="sec4-1">
      <fo:bookmark-title>Setup CLASSPATH</fo:bookmark-title>
   </fo:bookmark>

   <fo:bookmark internal-destination="sec4-2">
      <fo:bookmark-title>Create the metrics file</fo:bookmark-title>
   </fo:bookmark>

   <fo:bookmark internal-destination="sec4-3">
      <fo:bookmark-title>Edit msgothic.xml</fo:bookmark-title>
   </fo:bookmark>

   <fo:bookmark internal-destination="sec4-4">
      <fo:bookmark-title>Register the font with FOP</fo:bookmark-title>
   </fo:bookmark>
 </fo:bookmark>

 <fo:bookmark internal-destination="sec5">
    <fo:bookmark-title>Japanese Examples</fo:bookmark-title>
 </fo:bookmark>
</fo:bookmark-tree>

 <fo:page-sequence master-reference="NOCOLUMN">

  <fo:flow flow-name="xsl-region-body">
   <fo:wrapper  font-family="Times" font-size="12pt" text-align="justify">
   <fo:block id="sec0"
             text-align="center"
             font-family="Helvetica"
             font-weight="bold"
             font-size="18pt"
             color="#0050B2" space-after.optimum="6pt">
       Adding Fonts to FOP
   </fo:block>

   <fo:block space-after.optimum="6pt">
     When building PDF files, FOP normally supports only the base 14 font
     package defined in the Adobe PDF specification. That includes the
     following fonts: Helvetica, Times, Courier, Symbol and ZapfDingbats.
   </fo:block>

   <fo:block space-after.optimum="6pt">
     Font support in FOP can be extended by the addition of font metric
     files (written in XML) created from Adobe Type 1 fonts and Truetype
     fonts. No other font types (Type 3, etc.) are supported at this time.
   </fo:block>
 </fo:wrapper>
   </fo:flow>

</fo:page-sequence>
<fo:page-sequence master-reference="A4">

  <fo:flow flow-name="xsl-region-body">
    <fo:wrapper  font-family="Times" font-size="12pt" text-align="justify">
   <fo:block id="sec1"
             font-family="Helvetica"
             font-weight="bold"
             font-size="14pt"
             color="#0050B2"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
     Adding additional Type 1 fonts
   </fo:block>

   <fo:block space-after.optimum="6pt" >
     As mentioned above you need an XML file containing font metrics to
     be able to use an additional font. FOP contains a tool that can generate
     such a font metrics file from a PFM file, which normally comes with the
     font file.
   </fo:block>

   <fo:block id="sec1-1"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt" >
     Generating a font metrics file
   </fo:block>

   <fo:block space-after.optimum="6pt" >
      Run the class <fo:inline font-family="Courier">org.apache.fop.fonts.apps.PFMReader</fo:inline>
       to generate the XML file.
      <fo:block font-family="Courier" font-size="10pt"
                space-before.optimum="6pt" space-after.optimum="6pt" margin-left="6pt" text-align="start">
        java org.apache.fop.fonts.apps.PFMReader pfm-file xml-file
      </fo:block>
   </fo:block>

   <fo:block space-after.optimum="6pt" margin-left="6pt">
     Note: The tool will construct some values (FontBBox, StemV and ItalicAngle) based
     on assumptions and calculations which are only an approximation to the real values.
     FontBBox and Italic Angle can be found in the human-readable part of the PFB file.
     The PFMReader tool does not yet interpret PFB files, so if you want to be correct,
     you may have to adjust the values in the XML file manually. The constructed values
     however appear to have no visible influence.
   </fo:block>

   <fo:block id="sec1-2"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt" >
      Register the fonts within FOP
   </fo:block>

   <fo:block space-after.optimum="6pt">
     Edit conf/userconfig.xml and add entries for the font if the fonts section, ie:
     <fo:block font-family="Courier" font-size="10pt"
      space-before.optimum="6pt"
      white-space-collapse="false" margin-left="6pt" text-align="start">
<![CDATA[
<font metrics-file="cyberbit.xml" kerning="yes" embed-file="C:\WINNT\Fonts\Cyberbit.ttf">
  <font-triplet name="Cyberbit" style="normal" weight="normal">
</font>]]></fo:block>
   </fo:block>

   <fo:block id="sec2"
             font-family="Helvetica"
             font-weight="bold"
             font-size="14pt"
             color="#0050B2"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
     Adding additional TrueType fonts
   </fo:block>

   <fo:block space-after.optimum="6pt">
     Adding Truetype fonts is almost identical to the process of adding type 1 fonts.
     The main difference is in the first step.
   </fo:block>

   <fo:block id="sec2-1"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt" >
     Generating a font metrics file
   </fo:block>

   <fo:block space-after.optimum="6pt">
     As mentioned above you need an XML file containing font metrics to be able to use
     an additional font. FOP contains a tool that can generate such a font metrics file
     from your truetype font file.
   </fo:block>

   <fo:block space-after.optimum="6pt">
     Create metrics for the fontfile. We'll use MS Gothic as an example:

      <fo:block  font-family="Courier" font-size="10pt"
                space-before.optimum="6pt" space-after.optimum="6pt" margin-left="6pt" text-align="start">
        java org.apache.fop.fonts.apps.TTFReader C:\WINNT\Fonts\msgothic.ttf msgothic.xml
      </fo:block>
   </fo:block>

   <fo:block id="sec2-2"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt" >
     TrueType collections
   </fo:block>

   <fo:block space-after.optimum="6pt">
     TrueType collections (.ttc files) contains more than one font. To create metrics
     for a ttc file you must specify the font in the collection with the -ttcname
     option to TTFReader.
   </fo:block>

   <fo:block space-after.optimum="6pt">
     To get a list of the fonts in a collection, just start the TTFReader as if it
     were a normal truetype file (without the -ttcname option). It will then display
     all the font names and exit with an Exception.
   </fo:block>

   <fo:block space-after.optimum="6pt">
     Example on generating metrics for a .ttc file:
      <fo:block font-family="Courier" font-size="10pt"
                space-before.optimum="6pt" space-after.optimum="6pt" margin-left="6pt" text-align="start">
        java org.apache.fop.fonts.apps.TTFReader -ttcname "MS Mincho" msmincho.ttc msminch.xml
      </fo:block>
   </fo:block>

   <fo:block id="sec2-3"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt" >
     Register the fonts within FOP
   </fo:block>

   <fo:block space-after.optimum="6pt">
     Same as for <fo:basic-link internal-destination="sec1-2" color="blue">
     <fo:inline text-decoration="underline">Type&nbsp;1&nbsp;fonts</fo:inline></fo:basic-link>.
   </fo:block>

   <fo:block id="sec3"
             font-family="Helvetica"
             font-weight="bold"
             font-size="14pt"
             color="#0050B2"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
     Embedding fonts
   </fo:block>

   <fo:block space-after.optimum="6pt">
     Font embedding is enabled in the userconfig.xml file. Start Fop with -c userconfig.xml
   </fo:block>

   <fo:block id="sec4"
             font-family="Helvetica"
             font-weight="bold"
             font-size="14pt"
             color="#0050B2"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
     Example embedding MSGothic
   </fo:block>

  <fo:block space-after.optimum="6pt">
    This example will use the Microsoft Gothic TrueType font. This is the font used to render this examples
    given in the last section of this file. If you don't have it installed,
    you can download an installer at <fo:basic-link color="blue"
      external-destination="ftp://ftp.cc.monash.edu.au/pub/nihongo/ie3lpkja.exe">
      <fo:inline text-decoration="underline">ftp://ftp.cc.monash.edu.au/pub/nihongo/ie3lpkja.exe</fo:inline>
    </fo:basic-link>.
  </fo:block>

   <fo:block id="sec4-1"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
    Setup your classpath to run FOP:
   </fo:block>
     <fo:block font-family="Courier" font-size="10pt"
      space-before.optimum="6pt"
      white-space-collapse="false" margin-left="6pt" text-align="start">
C:\Fop-0.18.1> set CLASSPATH=fop.jar;lib\xerces-1.2.3.jar;lib\xalan-2.0.0.jar;lib\batik.jar
     </fo:block>

   <fo:block id="sec4-2"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
    Create the metrics file:
</fo:block>

     <fo:block font-family="Courier" font-size="10pt"
      space-before.optimum="6pt"
      white-space-collapse="false" margin-left="6pt" text-align="start">
C:\Fop-0.18.1> java org.apache.fop.fonts.apps.TTFReader c:\WINNT\Fonts\msgothic.ttf msgothic.xml
TTF Reader v1.1.1

Reading /home/camk/cjkv/msgothic.ttf...

Number of glyphs in font: 13104
Postscript format 3
Creating xml font file...

Creating CID encoded metrics
Writing xml font file msgothic.xml...

This font contains no embedding license restrictions

     </fo:block>

   <fo:block id="sec4-3"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
    Edit the msgothic.xml file and set the <fo:inline font-family="Courier">font-name</fo:inline>
    to "MSGothic".
  </fo:block>

   <fo:block id="sec4-4"
             font-family="Helvetica"
             font-weight="bold"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
      Edit conf/userconfig.xml and add the following to the &lt;fonts&gt; section:
   </fo:block>

   <fo:block font-family="Courier" font-size="10pt"
      space-before.optimum="6pt"
      white-space-collapse="false" margin-left="6pt" text-align="start">
<![CDATA[
<font metrics-file="msgothic.xml" kerning="yes"
     embed-file="C:\WINNT\Fonts\msgothic.ttf">
  <font-triplet name="MSGothic" style="normal" weight="normal"/>
</font>
]]>
    </fo:block>

  <fo:block space-after.optimum="6pt">
    Now you can use MSGothic in your .fo files by setting font-family="MSGothic". You'll need to
    start FOP specifying the config file as in this example:
     <fo:block font-family="Courier" font-size="10pt"
      space-before.optimum="6pt"
      white-space-collapse="false" margin-left="6pt" text-align="start"
>java -jar fop.jar -c conf/userconfig.xml -fo myfo.fo -pdf mypdf.pdf</fo:block>
   </fo:block>

   <fo:block id="sec5"
             font-family="Helvetica"
             font-weight="bold"
             font-size="14pt"
             color="#0050B2"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
      Examples from <fo:basic-link color="blue" external-destination="http://www.csse.monash.edu.au/~jwb/j_jmdict.html">
       <fo:inline text-decoration="underline">JMDict</fo:inline></fo:basic-link> Japanese glossary:
   </fo:block>

</fo:wrapper>
   <fo:table table-layout="fixed" width="100%">
      <fo:table-column column-width="50mm"/>
      <fo:table-column column-width="50mm"/>
      <fo:table-column column-width="50mm"/>
      <fo:table-header>
        <fo:table-row>
          <fo:table-cell ><fo:block font-weight="bold" font-family="Helvetica">Japanese (kanji or kanadzukai)</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block font-weight="bold" font-family="Helvetica">English</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block font-weight="bold" font-family="Helvetica">German</fo:block></fo:table-cell>
        </fo:table-row>
      </fo:table-header>
      <fo:table-body>
        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">うん</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>"yeah" or "uh huh"</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block></fo:block></fo:table-cell>
        </fo:table-row>

        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">アウタースペース</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>outer space</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block></fo:block></fo:table-cell>
        </fo:table-row>

        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">スペースクラフト</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>spacecraft</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block></fo:block></fo:table-cell>
        </fo:table-row>

        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">スペースシャトル</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>space shuttle</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block></fo:block></fo:table-cell>
        </fo:table-row>

        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">著わす&lt;/fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>"to write", "to publish"</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>veröffentlichen</fo:block></fo:table-cell>
        </fo:table-row>

        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">電子出版</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>electronic publishing</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block></fo:block></fo:table-cell>
        </fo:table-row>
        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">五輪</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>the Olympics</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>Olympische Spiele</fo:block></fo:table-cell>
        </fo:table-row>

        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">空港</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>airport</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>Flughafen</fo:block></fo:table-cell>
        </fo:table-row>
        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">チューリッヒ</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>Zurich</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>Z&#252;rich</fo:block></fo:table-cell>
        </fo:table-row>

        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">コロラド</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>Colorado</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block></fo:block></fo:table-cell>
        </fo:table-row>

        <fo:table-row>
          <fo:table-cell ><fo:block font-family="MSGothic">コロラドスプリングス</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block>Colorado Springs</fo:block></fo:table-cell>
          <fo:table-cell ><fo:block></fo:block></fo:table-cell>
        </fo:table-row>

      </fo:table-body>
    </fo:table>

</fo:flow>

</fo:page-sequence>
</fo:root> 
```

例如，这里的前两个块应该有一个列，而另一个块应该跨越两列。当我使用两个 simple-page-master 时，两列转到下一页，在第一页留下空间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T16:25:13.260

您可以在整个过程中使用“A4”布局（具有两列的布局）。对于跨越两列的块，您必须添加

```
 span="all" 
```

到格式化对象。见[http://cnx.org/content/m43650/latest/](http://cnx.org/content/m43650/latest/)。这适用于您的示例。

```
<fo:page-sequence master-reference="A4"> 
  <fo:flow flow-name="xsl-region-body">
   <fo:wrapper  font-family="Times" font-size="12pt" text-align="justify">
   <fo:block id="sec0"
             text-align="center"
             font-family="Helvetica"
             font-weight="bold"
             font-size="18pt"
             color="#0050B2" space-after.optimum="6pt"
             span="all">
       Adding Fonts to FOP
   </fo:block>

   <fo:block space-after.optimum="6pt" span="all">
     When building PDF files, FOP normally supports only the base 14 font
     package defined in the Adobe PDF specification. That includes the
     following fonts: Helvetica, Times, Courier, Symbol and ZapfDingbats.
   </fo:block>

   <fo:block space-after.optimum="6pt" span="all">
     Font support in FOP can be extended by the addition of font metric
     files (written in XML) created from Adobe Type 1 fonts and Truetype
     fonts. No other font types (Type 3, etc.) are supported at this time.
   </fo:block>

   <fo:block id="sec1"
             font-family="Helvetica"
             font-weight="bold"
             font-size="14pt"
             color="#0050B2"
             space-after.optimum="6pt"
             space-before.optimum="12pt">
     Adding additional Type 1 fonts
   </fo:block>

   <fo:block space-after.optimum="6pt" >
     As mentioned above you need an XML file containing font metrics to
     be able to use an additional font. FOP contains a tool that can generate
     such a font metrics file from a PFM file, which normally comes with the
     font file.
   </fo:block> 
```

# dns - Route53 w/ S3 - www 的 DNS 问题。（桶在裸域上）

> ID：15493783
> 
> 赞同：2
> 
> 时间：2013-03-19T07:32:02.403
> 
> 标签：dns, amazon-s3, subdomain, cname, amazon-route53

我目前正在使用裸域来作为亚马逊 S3 网络托管服务的别名（Route53 和 S3 之间的新功能连接），但我在获取 www 时遇到了一些麻烦。重定向/显示存储桶。我试过：使用 CNAME 访问 www。-> 裸体和 *. -> 裸（正常方式） 对存储桶使用 CNAME 别名 对裸域使用 CNAME 别名（在同一区域中） 使用 A 为存储桶别名 使用 A 为裸域别名（在同一区域中）

每个结果要么是 404，要么是试图找到 www.mydomain.com 的存储桶，这显然不存在。我很可能过于焦虑并偶然发现了正确的问题，但没有等待足够长的时间，但在过去的几个小时里我一直在这样做，所以我认为考虑到我一直在清除我的 DNS，它应该已经完成​​了。使用 CNAME 方法的正常方式给了我 www.mydomain.com 存储桶错误。此外，我不太确定这个“别名”到底是什么。什么是正确的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:10:22.733

您是否使用了 Amazon Web Services 博客 - [Amazon S3 的根域网站托管中的说明](http://aws.typepad.com/aws/2012/12/root-domain-website-hosting-for-amazon-s3.html)？

顺便说一句，您不需要特别使用 Route53 来使用裸域重定向，像 GoDaddy 这样的一些 DNS 注册商甚至提供到根域的域重定向。

而且你总是可以使用像[wwwizer 的免费裸域重定向](http://wwwizer.com/naked-domain-redirect)这样的服务，这将非常容易地完成。

但是，如果您仍想使用 AWS 内置的新功能，请继续阅读。

* * *

我假设您在站点的 Route53 托管区域站点中已经有一条 CNAME 记录，类似于以下内容：

```
NAME                   TYPE    VALUE
www.mydomainname.com   CNAME   www.mydomainname.com.s3-website-us-east-1.amazonaws.com 
```

而且我还假设记录指向一个名为的存储桶的端点，`www.mydomainname.com`并配置为服务于静态站点。

您还需要创建另一个`mydomainname.com`没有 的存储桶`www`，并配置“将所有请求重定向到另一个主机名”选项以将请求转发到包含您的资源的另一个存储桶。

现在回到您的 Route53 托管区域，创建一条 A 记录，将其标记为 ALIAS，然后会出现一个下拉列表，让您为裸域的存储桶选择 S3 端点。

我有这个设置在我自己的服务器上工作，所以希望你不需要任何特殊步骤。

# php - PHP json_decode() 输出：对象与数组？

> ID：15493788
> 
> 赞同：4
> 
> 时间：2013-03-19T07:32:13.817
> 
> 标签：php, benchmarking, json

对于函数`json_decode()`，有 2 个输出选项，JSON 对象或数组。

```
$obj = json_decode($json_string, false); 
```

或者

```
$array = json_decode($json_string, true); 
```

哪种类型的性能更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:32:13.817

对于函数`json_decode()`，人们可能会在将结果输出为对象或关联数组之间纠结。在这里，我进行了基准测试。

使用的代码（`$json_string`Google Maps V3 Geocoding API 的 JSON 输出在哪里）：

```
// object
$start_time = microtime(true);
$json = json_decode($json_string, false);
echo '(' . $json->results[0]->geometry->location->lat . ',' . $json->results[0]->geometry->location->lng . ')' . PHP_EOL;
$end_time = microtime(true);
echo 'JSON Object: ' . round($end_time - $start_time, 6) . 's' . PHP_EOL;

// array
$start_time = microtime(true);
$json = json_decode($json_string, true);
echo  '(' . $json['results'][0]['geometry']['location']['lat'] . ',' . $json['results'][0]['geometry']['location']['lng'] . ')' . PHP_EOL;
$end_time = microtime(true);
echo 'JSON Array: ' . round($end_time - $start_time, 6) . 's' . PHP_EOL; 
```

我发现 Array 比 Object 快 30% ~ 50%。

# php - PHP mail（）方法和响应回调不起作用

> ID：15493796
> 
> 赞同：4
> 
> 时间：2013-03-19T07:32:30.103
> 
> 标签：php, ajax, response, jquery-callback

下面的脚本是为了向注册者发送电子邮件并`success`在邮寄时回复页面以执行某些操作，不知何故，如果我添加了 php`mail()`方法，回调响应将不再起作用，电子邮件已成功发送到邮箱但我没有运气要获得`success`警报，一旦我删除该`mail()`方法，成功警报就会再次弹出，我得到了一些关于 Json.response 没有形成的提示，但我真的不知道它是如何工作的，任何人都可以帮忙，什么我想要的只是发送邮件并获得“成功”回调？

**请求.php**

```
if(empty($fname) || strlen($fname) < 3){
    $message['error']['fname'] = 'Full name is required';
}
if(empty($contact)){
    $message['error']['contact'] = 'Contact number is required';
}

if(!isset($message['error'])){

    $create = "//sql for insertion";

    if($create){
    //problem is here
    $to = $email;
    $subject = "Email Validation";
    $message = "http://www.sitename.com/activate.php?token=".$activate_code;
    $from = "post@mail.com";
    $headers = "From:" . $from;

    if(mail($to,$subject,$message,$headers)){
        $message['success'] = "success";
    }

    }

    }
}
echo json_encode($message); 
```

谢谢。

**更新：**

最后通过在`$message`vs上发现的冲突解决了`$message['success']`，我改成`$message`了别的东西。

感谢查看我的帖子。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-19T07:33:53.787

您必须将内容类型设置为 json：

```
header("Content-Type: application/json");
echo json_encode($message); 
```

# javascript - iframe 延迟调整大小

> ID：15493811
> 
> 赞同：4
> 
> 时间：2013-03-19T07:33:16.467
> 
> 标签：javascript, iframe

我使用此代码自动调整 iframe 的大小[http://sonspring.com/journal/jquery-iframe-sizing](http://sonspring.com/journal/jquery-iframe-sizing)。工作得很好，但是昨天当我将搜索引擎用作 iframe 时出现了一个问题，因为结果需要 0.5 到 1 秒才能显示出来，自动调整大小无法正确调整窗口大小，所以我认为我需要将脚本延迟 0.5 秒。我怎样才能做到这一点 ？

这是来自 iframe.js 的代码

```
$(document).ready(function()
{
    // Set specific variable to represent all iframe tags.
    var iFrames = document.getElementsByTagName('iframe');

    // Resize heights.
    function iResize()
    {
        // Iterate through all iframes in the page.
        for (var i = 0, j = iFrames.length; i < j; i++)
        {
            // Set inline style to equal the body height of the iframed content.
            iFrames[i].style.height = iFrames   [i].contentWindow.document.body.offsetHeight + 'px';
        }
    }

    // Check if browser is Safari or Opera.
    if ($.browser.safari || $.browser.opera)
    {
        // Start timer when loaded.
        $('iframe').load(function()
            {
                setTimeout(iResize, 0);
            }
        );

        // Safari and Opera need a kick-start.
        for (var i = 0, j = iFrames.length; i < j; i++)
        {
            var iSource = iFrames[i].src;
            iFrames[i].src = '';
            iFrames[i].src = iSource;
        }
    }
    else
    {
        // For other good browsers.
        $('iframe').load(function()
            {
                // Set inline style to equal the body height of the iframed content.
                this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
            }
        );
    }
}
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:49:43.970

很难在没有看到您的 html 的情况下准确回答。您可以调整`setTimout(iResize, 500);`哪个将在 0.5 秒后检查。

或者，这是我在调整单个 iframe 大小时使用的。

它将继续每 50 毫秒检查一次，以查看 body 元素是否已加载。

```
function resizeIframe(iframe){
    var doc = iframe.contentDocument ||  iframe.contentWindow.document;
    if(doc.body){
        iframe.height =0;
        iframe.height = doc.body.scrollHeight + 30;
    }
    else{
         if(delay)clearTimeout(delay)
          delay = setTimeout(function(){resize(iframe)},50);
    }
};

var delay, iframe = document.getElementById('iFrame'); 

resizeIframe(iframe); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T23:59:12.160

您需要使用 mutationObserver 来检测页面中的更改并触发 iFrame 的调整大小。

在 GitHub 上签出这个项目，它将为你做这件事。

[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)

# android - 所有下载的数据库

> ID：15493813
> 
> 赞同：1
> 
> 时间：2013-03-19T07:33:27.943
> 
> 标签：android, sql, database

每个 Android 设备都包含一个应用程序“下载”。在那里，我们可以看到所有最近下载的带有源域的文件以及特定下载的状态。

问题是下载列表存储在哪里？我知道这是一种 SQL DB。如何从我的应用程序访问此数据库？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:14:08.753

> 每个 Android 设备都包含一个应用程序“下载”。

不，仅适用于 Android 2.3 及更高版本。

> 问题是下载列表存储在哪里？

在“下载”应用的内部存储部分中。

> 如何从我的应用程序访问此数据库？

你没有。对于您自己的下载，用于`DownloadManager.Query`检查您的下载状态。有关下载的数据不会共享给其他应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:35:01.873

不知道下载列表存储在哪里。但下载的文件通常可以在内部闪存中名为 Downloads 的目录中找到。

# c# - 在C#中将Datatable数据绑定到checkedListBox

> ID：15493815
> 
> 赞同：0
> 
> 时间：2013-03-19T07:33:39.450
> 
> 标签：c#, winforms

如何将数据表绑定到checkedlistbox？我尝试使用此代码，但数据源属性未初始化

```
CheckedListBox cb = new CheckedListBox();
checkedListBox1.DataBindings = dbFunctions.getTable("pr_fetchLocal'" + editypeId + "'");

((ListBox)cb).DataSource = dtfetchSub;
((ListBox)cb).DisplayMember = "name";
((ListBox)cb).ValueMember = "Id";
cb.Show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:49:54.580

只需像这样将表绑定到 DataSource 属性。

```
cd.DataSource = dbFunctions.getTable("pr_fetchLocal'" + editypeId + "'"); 
```

似乎 editTypeId 是一个字符串（我猜是基于 ' ' ），所以这里是为 SQL 注入打开的。您可能想研究如何在 ADO.NET 中传递参数 :)

# c# - 试图在我的表 user_objective 中插入数据但无法这样做。创建的表中没有值。标签返回“0 值插入”

> ID：15493817
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:33:42.770
> 
> 标签：c#, sql, visual-studio-2010

```
 protected void LinkButtonContacts_Click(object sender, EventArgs e)
    {
        string obj1 = TextBox6.Text.Trim();
        string obj2 = TextBox7.Text.Trim();
        string obj3 = TextBox8.Text.Trim();
        string queryUpdate = "Update User_Objectives SET Objective1= @Objective1 , Objective2=@Objective2 ,Objective3=@Objective3 WHERE Email='useremail'";
        SqlConnection con = new SqlConnection();
        con.ConnectionString = @"Data Source=.\SQLEXPRESS;Initial Catalog=resume;Integrated Security=True";
        SqlCommand cmd = new SqlCommand(queryUpdate, con);
        cmd.Parameters.AddWithValue("@Objective1", TextBox6.Text);
        cmd.Parameters.AddWithValue("@Objective2", TextBox7.Text);
        cmd.Parameters.AddWithValue("@Objective3",TextBox8.Text );
        int added = 0;
        try
        {
            con.Open();
            added = cmd.ExecuteNonQuery();
            Label1.Text = added + "record inserted";
        }
        catch (Exception err)
        {
            Label1.Text = "error inserting record";
            Label1.Text = Label1.Text + err.Message;
        }
        finally
        {
            con.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:40:29.360

您的代码中有几件事：

*   首先，您正在尝试`Update`记录，而不是`INSERT`.
*   2nd 您正在根据`useremail`传入的 where 子句更新记录。您的变量`added`应该影响行数，但您的查询没有找到任何要根据搜索参数更新的记录。

目前在你的 where 子句中你有`WHERE Email='useremail'`. 您传递的是字符串文字，而是传递您希望在表中更新的电子邮件地址。您可以为此使用额外的 SqlParameter ，就像您使用其余参数一样。

# entity-framework - 0..1 同一模型的基数

> ID：15493818
> 
> 赞同：0
> 
> 时间：2013-03-19T07:33:47.750
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我有一个任务模型，并且希望每个任务都可以有 0 或 1 个顶级任务：

```
public class Task
{
    public int Id { get; set; }
    public int TopTaskId { get; set; }
    public virtual Task TopTask { get; set; }
} 
```

到目前为止还好吗？

我的 OnModelCreating 方法会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:46:11.007

你不需要一个。`int?`如果您想拥有 0 或 1 个关系，您确实需要创建 TopTaskId （FK 在数据库中可以为空）。

# wpf - 将视图模型与模型相结合

> ID：15493823
> 
> 赞同：3
> 
> 时间：2013-03-19T07:34:12.270
> 
> 标签：wpf, mvvm

好的，这里还有一点需要思考。

MVVM 声明 Model 与 ViewModel 无关。因此，ViewModel 公开了要绑定的 View 的属性。

Microsoft 代码分析规则告诉我向模型中的公共变量添加一个属性。

> 警告：CA1051：Microsoft.Design：因为字段“Employee.name”在其声明类型之外是可见的，将其可访问性更改为私有并添加一个与该字段当前具有相同可访问性的属性，以提供对其的访问。

现在它的 2 个重复属性，我宁愿让它干燥，所以我在考虑合并 ViewModel 和 View。这里还有一件事，Model 是一个 POCO，并且不会有 INotifyPropertyChanged，所以让 VM 知道 Model 值的变化是另一个问题。我使用了很多基于 IList 的绑定

会不会有我忽略的未来问题？

*编辑：我忘了提，我看了[如何正确定义模型到视图模型的关系？](https://stackoverflow.com/questions/10550571/how-to-correctly-define-model-to-viewmodel-relation), 我们软件中的另一件事是我们有一个单独的实体来填充 IList，它是一个 SERVICE/UTILITY 程序集。EmployeeViewModel 位于一个单独的 VIEW 程序集中。所以我将无法返回 ILIst。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:38:21.573

不要这样做。我知道这听起来像是你不需要的很多额外的东西，但随着你的应用程序变得越来越复杂，它会得到回报。我发现绑定一个支持属性通知的 ViewModel 是绝对必要的，它可以让我以视图可以轻松使用的方式呈现数据，而无需绑定到模型中的表示 - ViewModel 根据需要在两者之间进行转换.

如果您没有这些层，那么将来对事物的更改，特别是一旦您通过一定程度的复杂性将变得非常困难。

现在，您是否听取微软关于在模型上使用公共属性而不是公共字段的建议取决于您，但是如果您以后需要在 getter 和 setter 中添加一些逻辑，这是一个好习惯。一开始，自动属性可以很好地替代简单的公共字段，这样您就不必在实际需要一个支持字段之前声明一个支持字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:37:14.267

> *这里还有一件事，Model 是 POCO，并且不会有 INotifyPropertyChanged，所以让 VM 知道 Model 值的变化是另一个问题*

由于（我假设）模型可以从任何地方更改，您唯一的其他选择是拥有 2 个 INPC - 一个用于 Model-ViewModel，一个用于 ViewModel-View。

我个人不喜欢这种做法。太多的流程和重构问题（除非您使用反射 - 这是更多的代码和查找，但高度可维护）只需尝试使用部分类分别物理分离模型和视图模型。例如 Employee.cs 和 Employee.ViewModel.cs。并将它们分组 - 看起来更好

模型需要是可移植的，[INPC](http://msdn.microsoft.com/en-IN/library/system.componentmodel.inotifypropertychanged.aspx)与可移植类库很好，因此您可以跨各种目标重用代码

# java - 树形图和字节[]

> ID：15493825
> 
> 赞同：1
> 
> 时间：2013-03-19T07:34:17.427
> 
> 标签：java, collections

我有一个类，它的成员是`byte[]`我需要把类的`TreeMap`对象`key`作为这个类的对象。以下是我写的，但`put`没有`get`按预期工作。

```
import java.io.IOException;
import java.nio.ByteBuffer;
import java.util.Arrays;    

public class XTObject Comparable<XTObject>{
    public byte[] data; 
    public XTObject(){

    }
    public XTObject(final byte[] in) {
        this.data = in;
    }   

    @Override
  public boolean equals(final Object obj) {
        if (this == obj)
      return true;
   if (obj == null)
      return false;
   if (getClass() != obj.getClass())
      return false;
   XTObject other = (XTObject) obj;
   if (!Arrays.equals(data, other.data))
      return false;
   return true;
    }
    @Override
  public int hashCode() {
        return Arrays.hashCode(data);       
    }
    @Override
    public int compareTo(XTObject o) {
        ByteBuffer left = ByteBuffer.wrap(this.data);
        ByteBuffer right = ByteBuffer.wrap(o.data);
        return left.compareTo(right);

    }

} 
```

我猜 Put 工作正常，但`get`给出了空指针异常。我是java新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:42:49.217

您应该确保`data`在构造过程中始终初始化该成员，或者确保您处理潜在的空值。
如果数据成员未初始化，您将`NullPointerExecption`在`equals`,`hashCode`和`compareTo`方法中暴露。
TreeMap是一个[SortedMap](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html) [，](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)将使用 compareTo 方法对地图元素进行排序。

# mysql - 分组依据和联系人行，默认值除外

> ID：15493826
> 
> 赞同：1
> 
> 时间：2013-03-19T07:34:20.290
> 
> 标签：mysql, sql

```
╔════════╦═══════════╦═══════╗
║ MSG_ID ║ RANDOM_ID ║  MSG  ║
╠════════╬═══════════╬═══════╣
║      1 ║        22 ║ apple ║
║      2 ║        22 ║ bag   ║
║      3 ║         0 ║ cat   ║
║      4 ║         0 ║ dog   ║
║      5 ║         0 ║ egg   ║
║      6 ║        21 ║ fish  ║
║      7 ║        21 ║ hen   ║
║      8 ║        20 ║ glass ║
╚════════╩═══════════╩═══════╝ 
```

结果要求：

```
╔═══════════╦═══════════╗
║ RANDOM_ID ║    MSG    ║
╠═══════════╬═══════════╣
║        22 ║ apple bag ║
║         0 ║ cat       ║
║         0 ║ dog       ║
║         0 ║ egg       ║
║        21 ║ fish hen  ║
║        20 ║ glass     ║
╚═══════════╩═══════════╝ 
```

我希望它按 random_id 分组，但对于 random_Id=0 我不希望它被分组。任何建议将不胜感激。

```
Select  random_id as a, 
        (
            Select group_concat( message ORDER BY random_id ASC SEPARATOR ' ')
            from messagemaster 
            where  flag = 0  AND random_id=a
            group by random_id 
            order by random_id 
        ) as msg
from    messagemaster
where   flag = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:38:05.557

```
SELECT  Random_ID, GROUP_CONCAT(msg SEPARATOR ' ') Msg
FROM    TableName
WHERE   Random_ID <> 0
GROUP   BY Random_ID
UNION
SELECT  Random_ID, Msg
FROM    TableName
WHERE   Random_ID = 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/fc10a/8)
*   [SQLFiddle Demo（*保留顺序*）](http://www.sqlfiddle.com/#!2/fc10a/9)

# delphi - sql文件参数和模板

> ID：15493827
> 
> 赞同：1
> 
> 时间：2013-03-19T07:34:21.460
> 
> 标签：delphi

在使用 SQL 和数据库时，我使用 SQl 语句，例如**“select * from Mytablename”** ，我将简短语句存储在文本文件中。DELPHI 中是否有任何内置函数允许我用我必须在具体查询中使用的实际值替换单词**“myTablename ”？**

猜想有很多参数/字符串我想从 sql 模板交换到真正的 SQL 语句

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:41:11.630

```
StringReplace('select * from Mytablename','Mytablename','NewTablename',[]) 
```

# javascript - 悬停并在鼠标悬停时显示阴影的 Web 按钮

> ID：15493828
> 
> 赞同：0
> 
> 时间：2013-03-19T07:34:25.483
> 
> 标签：javascript, jquery, html, widget

我想知道如何拥有一个具有某些功能的按钮（单击它只是链接到另一个页面）。

1）按钮是一个没有文字的图像按钮

2）当用户将鼠标悬停在按钮上时，我希望它向上平滑地动画，所以它在它以前的位置上方浮动一点（可能是 20 像素？）

3）当按钮悬停时，它应该在其基线上投下一个小阴影。我的意思是阴影，而不是阴影边界 - 一个阴影，好像正午的太阳在上方，在地面上投射出一个向下的椭圆形阴影。

本质上，我希望有一个具有非常美感的按钮。javascript 或 jquery 解决方案将是完美的。

提前致谢！

（我应该提到我已经为此搜索了很多，但是描述按钮功能的最佳术语是“悬停”，我得到了与鼠标“悬停”实现相关的所有结果，而不是实际可见的按钮“悬停”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:46:30.800

这是使用 css 的过渡和盒子悲伤的基本示例。您可以使用边距和过渡为按钮向上设置动画。

html

```
<button></button> 
```

css

```
button {
    display: block;
    margin-top: 20px;
    height: 40px;
    width: 60px;
    color black;
    -webkit-transition: all 200ms linear;
    -moz-transition: all 200ms linear;
    transition: all 200ms linear;
    border: none;
    background-image: url('your image');
}
button:hover {
    margin-top: 0px;
    -moz-box-shadow: 0px 0px 4px 1px grey;
    -webkit-box-shadow: 0px 0px 4px 1px grey;
    box-shadow: 0px 0px 4px 1px  grey;
} 
```

小提琴[http://jsfiddle.net/caknopal/mmr4F/](http://jsfiddle.net/caknopal/mmr4F/)

对于 js，您可以使用 jquery animate 为按钮设置动画。

css

```
button.hover {
    -moz-box-shadow: 0px 0px 4px 1px grey;
    -webkit-box-shadow: 0px 0px 4px 1px grey;
    box-shadow: 0px 0px 4px 1px  grey;
} 
```

js

```
$('button').on('mouseover', function(){
    $(this).animate({'margin-top':0}, 200);
    $(this).addClass('hover');
});
$('button').on('mouseout', function(){
    $(this).animate({'margin-top':20}, 200);
    $(this).removeClass('hover');
}); 
```

小提琴[http://jsfiddle.net/caknopal/mmr4F/3/](http://jsfiddle.net/caknopal/mmr4F/3/)

# express - 使用 Express.io 进行路由转发

> ID：15493830
> 
> 赞同：4
> 
> 时间：2013-03-19T07:34:45.517
> 
> 标签：express, socket.io

我尝试使用 Express.io 转发路线，但它不起作用，我阅读了 Github 上的文档，我完全按照他们说的做了。不知道问题出在哪里...

```
app.post('/signin', function(req, res) {
    me.pseudo = req.body.pseudo;
    me.email = req.body.email;
    me.gravatar = "http://www.gravatar.com/avatar/" + md5(me.email) + "?s=140";
    users.push(me);
    req.io.route('hello'); //error here
});

app.io.route('hello', function(req) {
   console.log('Done !'); 
}); 
```

错误：

```
TypeError: Cannot call method 'route' of undefined
    at /Users/anthonycluse/Sites/Tchat-Express/app.js:78:12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-28T21:06:45.363

我不能代表 app.io，但通常当您需要在路由之间共享相同的函数时，您可以
**a) 将错误处理程序设为单独的函数并从多个路由调用它：**

```
function handleError(req, res) {
  //handle error
}

app.post('/foo', function(req, res) {
  //if conditions are met, else
  handleError(req, res); 
}); 
```

**b）通过制作一个模块进一步抽象：**

```
//user.js
module.exports = {
  signin: function(req, res) {},
  signinError: function(req, res) {},
}; 
```

路由代码

```
//routes.js
var user = require('../modules/user');

app.post('/signin', function(req, res) {
  //validate signin
  //else
  user.signinError(req, res);
});

app.post('/signin-no-error', user.signin); 
```

# mustache - 如何在mustache js中使用for循环与if else结合

> ID：15493833
> 
> 赞同：2
> 
> 时间：2013-03-19T07:34:53.100
> 
> 标签：mustache

link.href 是 json 中的一个 url，我想把它展示给 html。首先，我在 jquery 中循环链接并找到`link.href`它的链接`link.rel = 'next'`

```
 var feed = data.feed;
  var links = feed.link || [];

  for (var i = 0; i < links.length; i++) {
    var link = links[i];
      if (link.rel == 'next'){
        link.href = true;
      }
  };

  var template = $('#test-tpl').html();
  var html = Mustache.to_html(template, feed);
  $('.folders').html(html); 
```

然后我在我的 HTML 中使用它但不工作但 link.href 没有显示。

```
{{#link.href}}
{{link.href}}
{{/link.href}} 
```

# javascript - 如何使用 jquery 或 javascript 在 gridview 中获取 DataKey 值？请在回答前阅读代码

> ID：15493841
> 
> 赞同：0
> 
> 时间：2013-03-19T07:35:22.900
> 
> 标签：javascript, jquery, asp.net, button, gridview

我有一个gridview，我正在动态添加两个按钮“**编辑和删除**”（通过代码）。这是我的 HTML 代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" CellPadding="4"
                BorderWidth="1px" ForeColor="#333333" GridLines="None">
                <AlternatingRowStyle BackColor="White" />
                <FooterStyle BackColor="#990000" ForeColor="White" Font-Bold="True" />
                <HeaderStyle Height="30px" BackColor="#990000" Font-Bold="True" ForeColor="White" />
                <PagerStyle ForeColor="#333333" HorizontalAlign="Center" BackColor="#E2E2E2" />
                <RowStyle CssClass="test" BackColor="#E2E2E2" Height="25px" BorderWidth="1px" ForeColor="#333333" />
                <SelectedRowStyle BackColor="#E2E2E2" Font-Bold="True" ForeColor="Navy" />
                <SortedAscendingCellStyle BackColor="#FDF5AC" />
                <SortedAscendingHeaderStyle BackColor="#4D0000" />
                <SortedDescendingCellStyle BackColor="#FCF6C0" />
                <SortedDescendingHeaderStyle BackColor="#820000" />
            </asp:GridView> 
```

这是我的代码背后的代码::

```
 private void BindData(DataTable dtColumns)
{
    GridView1.Columns.Clear();
    String Query = "";
    DataTable dtSearchItems = (DataTable)ViewState["dtSearchItems"];
    String PrimaryKey = "";
    if (ViewState["PrimaryKey"] != null)
    {
        PrimaryKey = ViewState["PrimaryKey"].ToString();
    }
    if (dtColumns != null)
    {
        String Columns = "";
        if (dtColumns.Rows.Count > 0)
        {
            foreach (DataRow dr in dtColumns.Rows)
            {
                Columns += dr["OrignalColumn"].ToString() + ",";
            }
            Columns = Columns.TrimEnd(',');
            Query = "Select " + PrimaryKey + " , " + Columns + " from " + TableName + " where 1 = 1 ";
        }
        else
        {
            Query = "Select *," + PrimaryKey + " from " + TableName + " where 1 = 1 ";
        }
    }
    else
    {
        Query = "Select *," + PrimaryKey + " from " + TableName + " where 1 = 1 ";
    }
    if (dtSearchItems != null)
    {
        if (dtSearchItems.Rows.Count > 0)
        {
            foreach (DataRow dr in dtSearchItems.Rows)
            {
                Query += " " + dr["AndOr"].ToString() + " " + dr["ColumnName"].ToString() + " " + ClsStaticSearch.ReturnOperationSymbol(dr["Operation"].ToString(), dr["Value"].ToString());
            }
        }
        else
        {
            Query = Query;
        }
    }

    DataTable dtOutPutResult = new DataTable();
    SqlConnection con = new SqlConnection();
    con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["cn"].ConnectionString;
    SqlCommand cmd = new SqlCommand(Query, con);

    if (con.State == ConnectionState.Closed) con.Open();
    dtOutPutResult.Load(cmd.ExecuteReader());
    GridView1.DataKeyNames = new string[] { PrimaryKey };

    if (dtOutPutResult.Rows.Count > 0)
    {
        foreach (DataColumn dcDtOutPutResult in dtOutPutResult.Columns)
        {
            foreach (DataRow drDtColumns in dtColumns.Rows)
            {
                if (drDtColumns["OrignalColumn"].ToString() == dcDtOutPutResult.ColumnName)
                {
                    BoundField bfield = new BoundField();
                    bfield.DataField = dcDtOutPutResult.ColumnName;
                    bfield.HeaderText = drDtColumns["DisplayColumn"].ToString();
                    GridView1.Columns.Add(bfield);
                }
            }
        }

        TemplateField t = new TemplateField();
        DynamicTemplate mt = new DynamicTemplate(ListItemType.Item);

        Button btnEdit = new Button();
        btnEdit.ID = "btnEdit";
        btnEdit.Visible = true;
        btnEdit.OnClientClick = "return confirm_Edit();";
        btnEdit.Text = " Submit";
        btnEdit.CssClass = "button";
        btnEdit.Style.Add("margin-right", "5px");
        mt.AddControl(btnEdit, "Text", "Edit");

        Button btnDelete = new Button();
        btnDelete.ID = "btnDelete";
        btnDelete.OnClientClick = "return confirm_delete();";
        btnDelete.Visible = true;
        btnDelete.Text = " Submit";
        btnDelete.CssClass = "button";
        mt.AddControl(btnDelete, "Text", "Delete");

        t.ItemTemplate = mt;
        t.HeaderText = "Activity";
        GridView1.Columns.Add(t);
        GridView1.DataSource = dtOutPutResult;
        GridView1.DataBind();
        lblMessage.Visible = false;
    }
    else
    {
        GridView1.DataSource = dtOutPutResult;
        GridView1.DataBind();
        lblMessage.Visible = true;
        lblMessage.Style.Add("Color", "Red");
        lblMessage.Text = "No Record Found.";
    }
    cmd.Dispose();
} 
```

我想做的是::

我想为高级搜索创建一个通用模块，这几乎是完整的，现在我想做的是：**我也想向网格添加编辑和删除功能。为此，我只需要通过 javascript 或 jquery 获取每个按钮单击的网格的 DataKey 值，**因为如果页面被回发，按钮将不可见。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T08:17:27.153

**对于这种情况，使用隐藏字段来获取值是非常常见的解决方案**

```
<asp:TemplateField>
   <ItemTemplate>
     <asp:HiddenField ID="key" runat="server" Value='<%#Eval("ID") %>' />
   </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField>
  <ItemTemplate>
    <a href="#" id="getID">Read data key</a>
  </ItemTemplate>
</asp:TemplateField> 
```

**脚本**

```
<script type="text/javascript">
    $(document).ready(function() {
        $("table[id*=gridviewid] a[id*=getID]").click(function() {
            alert($(this).closest("tr").find("input[type=hidden][id*=key]").val());
        });
    });
</script> 
```

如果您觉得这很乏味，您可以在下面找到类似的问题和解决方案：

[使用 jQuery](http://shawpnendu.blogspot.in/2010/10/jquery-to-read-datakeynames-value-of.html)

[鼠标悬停](http://www.sitepoint.com/forums/showthread.php?639927-Get-DataKeyNames-Value-in-GridView-OnMouseOver)

[代码项目篇](http://www.codeproject.com/Questions/510800/howplusiplusgetplusgridplusviewplusdatakeyplusvalu)

[获取选定的行数据键 - stackoverflow](https://stackoverflow.com/questions/228549/get-gridview-selected-row-datakey-in-javascript)

# java - jersey.api.MessageException 消息正文编写器和 MIME 媒体类型 text/xml 未找到

> ID：15493847
> 
> 赞同：3
> 
> 时间：2013-03-19T07:35:36.797
> 
> 标签：java, web-services, jaxb, jersey

数据是一个名为“QueryResponse”的对象，它又拥有一个名为“Todos”的对象列表。

我收到此错误：

```
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message  body writer for Java class java.util.ArrayList, and Java type java.util.List<de.vogella.jersey.todo.model.Todo>, and MIME media type text/xml was not found 
```

我有这个球衣获取方法：

```
@GET
@Produces({"application/xml", "application/json"})
public QueryResponse getTodos() {

 List todos = new ArrayList();
 todos.addAll(TodoDao.instance.getModel().values());
 return  new QueryResponse(todos);
} 
```

这就是 QueryResponse 对象：

```
@XmlRootElement

public class QueryResponse {
@XmlElementWrapper(name = "Todos")
@XmlElement(name = "Todo")
private List<Todo> todolist;
public QueryResponse(List<Todo> todolist)
{
    this.todolist = todolist;
}

public void setTodolist(List<Todo> todolist)
{
    this.todolist = todolist;
}
public List<Todo> getTodolist( )
{
    return this.todolist;
}
} 
```

这是 Todo 类：

```
public class Todo
{

  private int id;
  private String summary;
  private String Description;

  public Todo()
 {
 }

  public Todo(int id, String summary)
 {
   this.id = id;
   this.summary = summary;
 }
 public int getId() {
   return this.id;
 }
 public void setId(int userID) {
   this.id = userID;
 }
 public String getSummary() {
   return this.summary;
 }
 public void setSummary(String summary) {
   this.summary = summary;
 }
 public String getDescription() {
   return this.Description;
 }
 public void setDescription(String description) {
    this.Description = description;
 }
} 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:16:26.777

请执行下列操作：

1.  `public void getTodolist(List<Todo> todolist)`使用以下注释进行注释 ：`@XmlElementRef`
2.  使用以下注释注释您的 QueryResponse：`@XmlSeeAlso({Todo.class})`

# java - Java游戏：基于int字段临时绘制图像

> ID：15493848
> 
> 赞同：0
> 
> 时间：2013-03-19T07:35:37.697
> 
> 标签：java, android

我是新手`Java`，正在为`Android`.

我的游戏中有一个分数计数器，当计数器达到某个数字时，我希望屏幕上闪烁一条消息，让玩家知道他们已经达到了 2 级，等等。

I的所有其他元素`nextLevel`都能够轻松实现，因为这些更新的元素应该在任何给定级别保留其更改。但是，一旦玩家超过适当的分数阈值，我对如何在几秒钟内绘制这个“2 级”图像感到困惑。

我尝试使用这样的布尔值`nextLevel`：

```
if (nextLevel) {
    if (levelStart < 70) {
        paint5.setAlpha(255 - (levelStart * 4));
        paint7.setAlpha(255 - (levelStart * 4));
        g.drawString(String.valueOf(scoremult), g.getWidth() / 2, g.getHeight() / 2 - 100,
                paint5);
        g.drawString("x", (g.getWidth() / 2) - 40, g.getHeight() / 2 - 100, paint7);
        levelStart++;
    } else {
        levelStart = 0;
    }
} 
```

但是因为`nextLevel`在玩家在关卡中的整个过程中都保持真实，所以信息会一遍又一遍地绘制和淡化。我想要的是类似于事件触发器的东西，一旦超过阈值，无论程序中发生什么其他情况，绘制循环都会运行直到完成。

以下是第二级的实现方式：

```
if ((score >= 50) && (score < 125)) {
    level = 1.2;
    scoremult = 2;
    recentinterval = 27;
    nextlevel = true;
} 
```

有什么建议么？

# java - 将数组从java传递到php

> ID：15493850
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:35:39.947
> 
> 标签：java, php

我知道如何使用 http get 方法调用将变量值从 java 传递给 php。但我不知道如何通过 get 调用将数组从 java 传递给 php。任何帮助将不胜感激。

```
HttpGet httpGet = new HttpGet("http://localhost/browserHistory.php?mobile_number="+mob+"&arr="+myArray);
  HttpClient client = new DefaultHttpClient();
  client.execute(httpGet); 
```

我正在尝试像这样阅读php：

```
 $history = $_GET["arr"];
    $result = count($history);
    echo ""+$result; 
```

结果总是打印 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:39:02.307

HTTP 允许您发送文本。您需要用文本表示数组。这意味着您必须以某种方式对其进行编码。

如果您从 HTML 表单发送数据，它将被编码为`application/x-www-form-urlencoded`. 以该格式表示数据数组的常用方法是为数据的多个组件赋予相同的名称。PHP 允许表示更复杂的数据结构，但代价是失去了这种简单性。它添加了名称必须`[]`以`%5B%5D`.

```
example.php?foo%5B%5D=1&foo%5B%5D=2 
```

然后，这会为您提供一个数据数组`$_GET['foo'][]`。

或者，您可以序列化为另一种数据格式，并对其进行编码。[JSON](http://json.org)是一种流行的选择。

JSON 中的相同数据将是：

```
[1,2] 
```

使用 JSON 库生成它，不要通过将字符串混合在一起来构建 JSON。

然后，您可以对其进行编码`application/x-www-form-urlencoded`以获得：

```
example.com?foo=%5B1%2C2%5D 
```

并在 PHP 中对其进行解码：

```
$array = json_decode($_GET['foo']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:39:58.833

您可以将正文包含在`GET`请求中（`HTTP`规范并未明确禁止），但这不是一个好的方法 -`GET`并不意味着用于将数据发送到服务器。

因此，请考虑`POST`改用，或者，如果数组很小，则将其序列化并发布到查询字符串中。

`POST`在 Android 中发送：

```
String data[] = { "String1", "String2" };
JSONArray arr = new JSONArray(Arrays.asList(data));

DefaultHttpClient httpclient = new DefaultHttpClient();

// Put correct URL of your web service.
HttpPost post = new HttpPost("http://example.com");

post.setEntity(new StringEntity(arr.toString()));

HttpResponse response = httpclient.execute(post); 
```

# exception - Sitecore 管道错误

> ID：15493852
> 
> 赞同：2
> 
> 时间：2013-03-19T07:35:50.027
> 
> 标签：exception, sitecore, sitecore6

有没有人在 Sitecore 中看到过这个错误？

```
 Could not get pipeline: hasPresentation (domain: )

[InvalidOperationException: Could not get pipeline: hasPresentation (domain: )]
Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args, String pipelineDomain, Boolean failIfNotExists) +460
Sitecore.Pipelines.HasPresentation.HasPresentationPipeline.Run(Item item) +149
Sitecore.Shell.Applications.WebEdit.WebEditRibbonForm.RenderTreecrumbGo(HtmlTextWriter output, Item item) +147
Sitecore.Shell.Applications.WebEdit.WebEditRibbonForm.RenderTreecrumb(Item item) +233
Sitecore.Shell.Applications.WebEdit.WebEditRibbonForm.OnLoad(EventArgs e) +1103 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T07:59:50.173

查看[https://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/webConfig/660_121015.aspx](https://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/webConfig/660_121015.aspx)上的信息，`HasPresentation`管道是在**Sitecore CMS 6.6.0 rev 中引入的。121015（更新 1）**。

当找不到管道时会抛出您遇到的异常。看起来您的**Sitecore.Kernel.dll**版本与您的配置版本不匹配。

您是否尝试升级**Sitecore**版本？哪个版本的**Sitecore** dll 在您的 Web 应用程序的**bin目录中？**

# camera - 从 2D 图像到 3D 模型

> ID：15493854
> 
> 赞同：0
> 
> 时间：2013-03-19T07:35:59.727
> 
> 标签：camera, camera-matrix

我有一个 2D 图像和一个 3D cad 模型。我有相机矩阵 P，其中 P = k [R -RC]。如何从相机通过像素坐标 [uv] 看到的视图重新计算 3D 模型 [XYZ]？在此先感谢您的帮助。

# php - php+mysql图片幻灯片

> ID：15493864
> 
> 赞同：-2
> 
> 时间：2013-03-19T07:36:32.177
> 
> 标签：php, mysql

我创建了一个名为 movie 的数据库，并且有一个名为 test_image 的表（id int autoincrement，name varchar(30)，image blob）。数据是在 php 代码的帮助下插入的。现在我已经在以下代码的帮助下显示了图像：

* * *

```
<?php
$host="yourhostname";
$user="username";
$pass="password";
$db="movie";

// just so we know it is broken
error_reporting(E_ALL);

//connect to the db
$link = mysql_connect("$host", "$user", "$pass") or die("Could not connect: " . mysql_error());

// select our database
mysql_select_db("$db") or die(mysql_error());

// get the image from the db
$sql = "SELECT image FROM test_image;";

// the result of the query
$result = mysql_query("$sql") or die("Invalid query: " . mysql_error());

// set the header for the image
header("Content-type: image/jpeg");

echo mysql_result($result, 0);

// close the db link
mysql_close($link); 
```

?>

* * *

如果我想在数据库中显示图像的幻灯片，它现在只显示一张图像我必须进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:50:00.490

您的代码中缺少一些内容

mysqli

```
<?
//no more mysql_ means start using mysqli
$mysqli = new mysqli('host', 'username', 'password', 'database'); //connect
$query = "SELECT image FROM test_image"; // your query
$result = $mysqli->query($query); // Fetch Result
//now do something with that result
foreach ($result as $row){
   echo "<img src=\"$row['image']\">";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:16:03.300

现在我已经包含了用于图像幻灯片的 js。我已经像这样编辑了我的代码：

```
<?php
include "file_constants.php";//in this file connection is established with db
header('Content-Type: text/html; charset=utf-8');
$sql="SELECT * FROM test_image;";
$result=mysqli_query($con,$sql) or die("invalid query ".mysqli_error());
$array=array();
while($row=mysqli_fetch_array($result))
{
$array[]=$row['image'];
}
 ?>

           <html>
           <body>

    <title>Slideshow</title>
    <h1>Slideshow of images stored in mysql</h1>
    <script language="javascript">
        var delay=1000; 
        var curindex=0;

        var randomimages=["$array[0]","$array[1]","$array[2]","$array[3]","$array[4]","$array[5]"];

        var preload=[],img,curindex,tempindex;

        for (var n=0;n<randomimages.length;n++)
        {
            img=new Image();
            img.src=randomimages[n];
            preload.push(img);
        }

        document.write('<img name="defaultimage" src="'+randomimages[Math.floor(Math.random()*(randomimages.length))]+'">');

        function rotateimage()
        {
            if (curindex==(tempindex=Math.floor(Math.random()*(randomimages.length))))
            {
                curindex=curindex==0 ? 1 : curindex-1;
            } else
            {
                curindex=tempindex;
            }

            document.images.defaultimage.src=randomimages[curindex];
        }

        window.setInterval(rotateimage,delay);
    </script>
</body>
     </html> 
```

* * *

但是这段代码不显示图像......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T07:43:09.970

简单步行抛出结果集：

```
while($row = mysql_fetch_assoc($result)){
    echo $row[0];
} 
```

请注意您使用过时的功能。请使用 mysqli ( [http://php.net/manual/de/book.mysqli.php](http://php.net/manual/de/book.mysqli.php) )

# xslt - 如何自动选择下一个块 xsl:fo

> ID：15493869
> 
> 赞同：0
> 
> 时间：2013-03-19T07:36:41.173
> 
> 标签：xslt, foreach, selector

如何在不列出“xsl:for-each select="name|lastname|third"”的情况下自动选择下一个块？

XSL：

```
<fo:table>
       <fo:table-body>
          <xsl:for-each select="table">
         <fo:table-row>
           <xsl:for-each select="name|lastname|third">
            <fo:table-cell>
               <fo:block><xsl:value-of select="."/></fo:block>
            </fo:table-cell>
           </xsl:for-each>
         </fo:table-row>
           </xsl:for-each>
       </fo:table-body>
</fo:table> 
```

XML:

```
 <table>
        <name>Name</name>
        <lastname>Lastname</lastname>
        <third>Third</third>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:08:26.723

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"   xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">

<table>
  <table-body>
    <xsl:for-each select="table/child::*">
      <table-row>

          <table-cell>
            <block>
              <xsl:value-of select="current()"/>
            </block>
          </table-cell>

      </table-row>
    </xsl:for-each>
  </table-body>
</table>

</xsl:template>
</xsl:stylesheet> 
```

输出：

```
<?xml version="1.0" encoding="utf-8"?>
<table>
<table-body>
<table-row>
  <table-cell>
    <block>Name</block>
  </table-cell>
</table-row>
<table-row>
  <table-cell>
    <block>Lastname</block>
  </table-cell>
</table-row>
<table-row>
  <table-cell>
    <block>Third</block>
  </table-cell>
</table-row>
</table-body>
</table> 
```

# android - 如何在没有 Activity 的情况下在服务中显示文本或图形？

> ID：15493872
> 
> 赞同：1
> 
> 时间：2013-03-19T07:36:51.770
> 
> 标签：android

我有一个`Service`which `BroadcastReceiver`，并希望在收到一些消息时显示文本。

这`Service`类似于电视遥控器，所以我不想使用通知或 Toast。我想在右上角显示输入的数字，就像传统电视一样。

[Network Meter](https://play.google.com/store/apps/details?id=com.ckideas.networkmeter)可以在后台绘制网络速度图，所以这在技术上应该是可行的。但是，我不知道如何开始。

任何帮助都是可观的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:02:38.700

您可以尝试使用 WindowManager。

```
WindowManager wm = (WindowManager) mContext.getSystemService("window");
WindowManager.LayoutParams params = new WindowManager.LayoutParams();
params.type = WindowManager.LayoutParams.TYPE_PHONE;
params.format = PixelFormat.RGBA_8888;
params.flags = LayoutParams.FLAG_NOT_TOUCH_MODAL 
                | LayoutParams.FLAG_NOT_FOCUSABLE
                | LayoutParams.FLAG_NOT_TOUCHABLE;
params.gravity = Gravity.LEFT | Gravity.TOP;
params.x = 20;
params.y = 20;
params.width = 40;
params.height = 40;

wm.addView(yourView, params); 
```

# javascript - 如何在 GridView 中选择和检查 DropDownList 的变化？

> ID：15493873
> 
> 赞同：1
> 
> 时间：2013-03-19T07:36:52.890
> 
> 标签：javascript, jquery, asp.net, gridview

我在 GridiView 中有一个 ASP.NET GridView 控件和 DropDownList 控件，如下所示：

```
<asp:GridView ID="GridView1" runat="server">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server">
                </asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateField>
     </Columns>
</asp:GridView> 
```

我想使用 jQuery/JavaScript 来获取 DropDownList 元素并检测项目更改，如下所示：

```
$(function() {
    $("#<%= DropDownList1.ClientID %>").change(function() {
        if ($("#<%= DropDownList1.ClientID %>").find('option:selected').text() == "1") {
            alert('1');
        } else {
            alert('2');
        }
    });
}); 
```

我的问题是，如何在 GridView 中选择 DropDownList，然后检查更改？

请指教。提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:38:26.930

使用[类选择器](http://api.jquery.com/class-selector/)将 css 分配给带有类`class`的下拉列表和事件`bind`

*html*

```
<asp:GridView ID="GridView1" runat="server" >
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server" CssClass="ddlclass">
                </asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateField>
     </Columns>
</asp:GridView> 
```

*Javascript*

```
$(function() {
    $(".ddlclass").change(function() {
        if ($(this).find('option:selected').text() == "1") {
            alert('1');
        } else {
            alert('2');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:42:42.040

正如你所尝试的那样使用有点困难

```
 $("input[id*=DropDownList1]")

$(function() {
     $("input[id*=DropDownList1]").change(function() {
        if ($(this).find('option:selected').text() == "1") {
            alert('1');
        } else {
            alert('2');
        }
    });
}); 
```

**但请确保您没有任何控件 ID，例如`DropDownList1`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:42:02.233

尝试使用`.find()`：

```
$(function() {
   $("#GridView1").find("[id^='DropDownList']").change(function() {
      if ($('option:selected',this).text() == "1") {
          alert('1');
      } else {
          alert('2');
      }
   });
}); 
```

我不在`.net`环境中工作，所以它完全是猜测，可能有用。

注意：*`The above line only work if your ids are starting with DropDownList`。*

# c# - (C#) 检测 Windows 操作系统的类型（非本地化）

> ID：15493877
> 
> 赞同：0
> 
> 时间：2013-03-19T07:37:02.257
> 
> 标签：c#, windows

我需要检测安装了什么类型（*版本*）的 Windows 操作系统。我的意思是，例如：“家庭”、“企业”或“专业”。请不要问为什么（我已经与需求向导进行了艰苦的斗争）。

现在的问题是 Windows 类型似乎是本地化的，我需要一种方法在 switch 语句中使用它们来执行不同的行为。

现在我这样做：

```
_os = (from x in new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem").Get().OfType<ManagementObject>()
       select x.GetPropertyValue("Caption")).First().ToString().Trim();
switch (_os)
{   
    case "Microsoft Windows XP Professional":
        {
            // Do professional stuff...
            break;
        }
    case "Microsoft Windows 7 Professional":
    case "Microsoft Windows 7 Ultimate":
    case "Microsoft Windows 7 Enterprise":
        {
            // Do ultimate enterprisey professional stuff
            break;
        }
    default:
        {
            // File not found
            break;
        }
} 
```

任何人都知道如何做到这一点，以免遇到本地化问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:43:50.890

您可以 P/Invoke [GetProductInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724358%28v=vs.85%29.aspx)本机 API。C# 中的用法和示例[可以在这里找到](http://www.pinvoke.net/default.aspx/kernel32.getproductinfo)

虽然它仅在 Vista 及更高版本中受支持。

这是[一个](http://msdn.microsoft.com/en-us/library/ms724429.aspx)如何在 C++ 中完成的示例，可以很容易地 P/Invoked

对于 XP，恐怕没有任何方法可以以非本地化的方式获取此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:40:45.200

在 Codeproject 上有一篇不错的文章（带有 dll）来做到这一点：

[获取操作系统版本信息 - 即使是 Windows 8！](http://www.codeproject.com/Articles/73000/Getting-Operating-System-Version-Info-Even-for-Win)

他的奶酪来自：

[使用 C# 确定 Windows 版本和版本](http://www.csharp411.com/determine-windows-version-and-edition-with-c/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:42:44.970

请参阅类中的`OperatingSystemSKU`属性[`Win32_OperatingSystem`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239%28v=vs.85%29.aspx)，这是`uint`基于 - 的枚举。

# javascript - Node.js：文件读取并将字符串作为数组放入数组

> ID：15493879
> 
> 赞同：1
> 
> 时间：2013-03-19T07:37:05.997
> 
> 标签：javascript, arrays, string, file, node.js

我正在做一些项目，我需要读取一些文件并将拆分的（使用 \n - 新行）字符串作为数组放入数组中。这意味着读取文件的输出`fs.readFileSync(filepath, 'utf8').split('\n');` 是字符串，我需要将其转换为数组，但是有问题，因为我不知道如何。有一些输入数据的例子：

```
[[164,17567,160,[]],[166,8675,103,[]],
[[164,17567,160,[]],[166,8675,103,[]],
[[164,17567,160,[]],[166,8675,103,[]],
[[164,17567,160,[]],[166,8675,103,[]] 
```

我试图将它与for循环一起使用，但我无法以某种方式将它从字符串转换为数组，输出变成这样：

```
"[[164,17567,160,[]],[166,8675,103,[]]",
"[[164,17567,160,[]],[166,8675,103,[]]",
"[[164,17567,160,[]],[166,8675,103,[]]",
"[[164,17567,160,[]],[166,8675,103,[]]" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T08:04:56.043

我建议你继续用换行符分割，然后重新组合成一个没有换行符的字符串，最后使用 JSON.parse 解析。

```
var lines = fs.readFileSync(filepath, 'utf8').split('\n');
var rawData = '';
for (var l in lines){
    var line = lines[l];
    rawdata += line;
}
var data = JSON.parse('[' + rawdata + ']'); 
```

然而！看起来（除非是拼写错误）每一行都有一个额外的方括号。这些必须在解析之前删除，如果您可以控制它，最好从源数据中删除:)

此外，要使其成为有效的 JSON，您必须将整个内容包装在“[]”中，如上所示。

# jsp - 使用哪个 JSTL 参数来替换：InetAddress.getLocalHost().getHostName()

> ID：15493881
> 
> 赞同：1
> 
> 时间：2013-03-19T07:37:13.720
> 
> 标签：jsp, jstl

所以我试图在我接管的一个应用程序中摆脱一些脚本。其中之一是：`<%=InetAddress.getLocalHost().getHostName()%>`

但是，我无法找到给出相同结果的 JSTL 标记。我想`${pageContext.request.serverName}`会做的伎俩。

但前者在 localhost 上运行时给出计算机名称，而后者返回 localhost

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T09:08:53.163

前者给出计算机名称；后者给出了客户端在 URL 中使用的名称。

# ios - 需要有关 Objective-c 属性概念的帮助

> ID：15493882
> 
> 赞同：5
> 
> 时间：2013-03-19T07:37:14.220
> 
> 标签：ios, objective-c

我正在阅读[Apple Doc](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)以了解属性实例变量，但有点困惑

来自苹果文档：

> 大多数属性都由实例变量支持 默认情况下，读写属性将由实例变量支持，该实例变量将再次由编译器自动合成。
> 
> 实例变量是一个存在并在对象生命周期内保持其值的变量。用于实例变量的内存在第一次创建对象时分配（通过 alloc），并在对象被释放时释放。
> 
> 除非您另外指定，否则合成的实例变量与属性具有相同的名称，但带有下划线前缀。例如，对于名为 firstName 的属性，合成的实例变量将称为 _firstName。
> 
> ***尽管对象使用访问器方法或点语法访问自己的属性是最佳实践，但可以直接从类实现中的任何实例方法访问实例变量。下划线前缀清楚地表明您正在访问实例变量，而不是例如局部变量：***

如果使用访问器方法或点语法是最佳实践，那么为什么要使用用户 _ivarPropertyName？

为什么使用 ivar 来呈现属性？它有什么好处？当苹果说“使用访问器方法或点语法是最佳实践”时

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:47:21.900

`@property`声明一个属性的存在（描述它的接口），但没有指定该属性的实现。但是属性需要将其内容存储在*某个地方*。默认情况下，编译器会为此合成一个*ivar*（以及匹配的 setter 和 getter）。所以通常你可以忽略*ivar*的存在而只使用*点语法*。

我遵循 Apple 的建议并尽量避免直接使用*ivars*。但有时你想在不调用它的 getter 的情况下访问一个属性。我的代码中最常见的例外是延迟初始化的只读属性：

```
@interface MyObject : NSObject
@property ( nonatomic, readonly ) id someProperty ;
@end

@implementation MyObject
@synthesize someProperty = _someProperty ; // required; compiler will not auto-synthesize ivars for readonly properties

-(id)someProperty
{
    if ( !_someProperty )
    {
        _someProperty = ... create property here
    }

    return _someProperty ;
}

@end 
```

此外，您可能不想在您的`-dealloc`方法中为某个属性调用 getter……例如，计时器属性。为避免在 中创建计时器`-dealloc`，请直接访问 ivar：

```
-(void)dealloc
{
    [ _myTimer invalidate ] ; // don't use self.myTimer here, that would create a timer even though we're going away...
} 
```

可能还有更多用例。对于大多数属性，您甚至不需要使用 ivar，只需使用`<value> = self.property`and `self.property = <new value>`。

**编辑：**

*此外，通过消息调度（使用点访问器语法*或 getter）访问属性与直接访问*ivar 相比*，会产生一些额外的开销，但在几乎所有情况下都没有区别。

# scala - 如何使用 Lift web 获取自动完成文本框的值

> ID：15493883
> 
> 赞同：1
> 
> 时间：2013-03-19T07:37:27.960
> 
> 标签：scala, lift

我正在使用 Lift web 框架。

我正在实现一个自动完成的文本框。当我在框中输入一些值时，会打开一个下拉列表。如果我从该列表中选择一个值，则只有这样我才能访问文本框的值。如果我自己写一个值，那么我会得到一个空值。

我的代码：

```
var friend_name=""
"#bdayReminder" #> AutoComplete("",
        getAllName _,
        value => takeAction(value),
        List("minChars" -> "3"))

  private def takeAction(str: String) {
    friend_name = str

  } 
```

请提出解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:28:22.010

免责声明：我是以下库的作者。

我认为[lift-combobox](https://github.com/brianhsu/lift-combobox)可以实现您想要的，因为它具有让用户即时创造价值的功能。它使用[select2](http://ivaynberg.github.com/select2/) jQuery 插件，因此您将对下拉菜单有一个很好的外观和感觉。

例如，如果你需要获取用户创建的值，它会简单如下，注意我们通常使用`Option[T]`来表示该值可能不呈现，例如，用户可能没有在下拉菜单中选择任何项目全部：

```
var friend_name: Option[String] = None
val friendsMenu = new ComboBox(
  default = None,
  allowCreate = true
) {

  // This is where you build your combox suggestion
  override def onSearching(term: String): List[ComboItem] = {
    val names = List(
      ComboItem("f1", "Brian"), ComboItem("f2", "Alice"),
      ComboItem("f3", "Luke"), ComboItem("f4", "Smith"),
      ComboItem("f5", "Brandon")
    )

    names.filter(_.text.contains(term))
  }

  override def onItemSelected(selected: Option[ComboItem]): JsCmd = {
    friend_name = selected
    // The returned JsCmd will be executed on client side.
    Alert("You selected:" + selected)
  }

  // What you want to do if user added an item that
  // does not exist when allowCreate = true.
  override def onItemAdded(text: String): JsCmd = {
    friend_name = Some(text)
  }
}

"#bdayReminder" #> friendsMenu.combobox 
```

# ruby-on-rails - Rails 中同一页面上同一对象类的不同实例的多个表单

> ID：15493887
> 
> 赞同：2
> 
> 时间：2013-03-19T07:37:44.797
> 
> 标签：ruby-on-rails, forms

我有一个包含许多帖子的页面，每个帖子都有一个评论列表。列表末尾是供用户添加评论的表单。一次只能提交一条评论。

我可以逃脱类似的事情：

```
form for @comment
...
form for @comment 
```

还是我需要特别确保每个表格都针对一个单独的对象？IE

```
form for @comment1
...
for for @comment2 
```

如果是后者，如何让主页的控制器为页面上的每个帖子创建一个评论对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:11:58.433

你需要这样的东西

```
<% @posts.each do |post| %>

...

  <%= form_for post.comments.build do |f| %>
    <%= f.hidden_field :post_id %>
    ...
  <% end %>
<% end %> 
```

或者，如果您在路线中使用嵌套资源

```
<% @posts.each do |post| %>

...

  <%= form_for [post, Comment.new] do |f| %>
    ...
  <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:41:34.063

为此，您可以使用[嵌套模型表单。](http://railscasts.com/episodes/196-nested-model-form-part-1)

# javascript - 需要修改此 jquery 弹出菜单脚本以使用 ajax

> ID：15493891
> 
> 赞同：0
> 
> 时间：2013-03-19T07:37:59.727
> 
> 标签：javascript, jquery, ajax

我正在使用以下脚本： http: [//pop.seaofclouds.com/](http://pop.seaofclouds.com/)

问题是，如果您多次调用脚本，它会导致弹出窗口中的弹出窗口的级联效果与您调用脚本的次数一样多。

我试图弄清楚如何在已经设置弹出窗口时阻止它执行。这是脚本：

```
//
//  pop! for jQuery
//  v0.2 requires jQuery v1.2 or later
//  
//  Licensed under the MIT:
//  http://www.opensource.org/licenses/mit-license.php
//  
//  Copyright 2007,2008 SEAOFCLOUDS [http://seaofclouds.com]
//

(function($) {

  $.pop = function(options){

    // inject html wrapper
    function initpops (){
      $(".pop").each(function() {
        var pop_classes = $(this).attr("class");        
        if ( $(this).find('.pop_menu').length) {        
            // do nothing       
        } else {
            $(this).addClass("pop_menu");       
            $(this).wrap("<div class='"+pop_classes+"'></div>");
            $(".pop_menu").attr("class", "pop_menu");
            $(this).before(" \
            <div class='pop_toggle'></div> \
            ");       
        }       

      });
    }
    initpops();

    // assign reverse z-indexes to each pop
    var totalpops = $(".pop").length + 100;
    $(".pop").each(function(i) {
    var popzindex = totalpops - i;
    $(this).css({ zIndex: popzindex });
    });

    // close pops if user clicks outside of pop
    activePop = null;
    function closeInactivePop() {
      $(".pop").each(function (i) {
        if ($(this).hasClass('active') && i!=activePop) {
          $(this).removeClass('active');
          }
      });
      return false;
    }
    $(".pop").mouseover(function() { activePop = $(".pop").index(this); });
    $(".pop").mouseout(function() { activePop = null; });

    $("body").on("click", ".pop", function(){       
     closeInactivePop();
    });
    // toggle that pop
    $("body").on("click", ".pop_toggle", function(){
      $(this).parent(".pop").toggleClass("active");
    });
  }

})(jQuery); 
```

现在，当我在 ajax 调用上加载此脚本时，新的弹出菜单可以工作，但旧的菜单不会对 onclick 事件做出反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:09:19.073

你不应该弄乱插件。它的工作方式与应有的完全一样。更好地向我们展示你如何在你已经拥有的元素上调用它。

我也不喜欢这个插件。更好地使用来自[JqueryUI](http://jqueryui.com/droppable/)的东西 你可以用更简单的方式做这样的事情。

[编辑] 我尝试了你的第一个代码（插件），它对我来说可以正常工作。

[编辑] 好的。我得到它。你打电话给 $.pop(); 多次。你不应该！调用 $.pop(); 将下拉菜单固定到所有具有 class="pop" 的元素。这就是为什么你有这么有趣的堆栈的原因。只需使用 $.pop(); 一次。插件无法连接在页面上动态创建的新元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:38:10.800

从 ajax 调用中删除 pop 并在成功时调用它：

```
 $(".pop").each(function() {
                var pop_classes = $(this).attr("class");        
                if ( $(this).find('.pop_menu').length) {        
                // do nothing       
                } else {
                $(this).addClass("pop_menu");       
                $(this).wrap("<div class='"+pop_classes+"'></div>");
                $(".pop_menu").attr("class", "pop_menu");
                $(this).before(" \
                <div class='pop_toggle'></div> \
                ");       
                }                               
                });     
                // assign reverse z-indexes to each pop
                var totalpops = $(".pop").length + 100;
                $(".pop").each(function(i) {
                var popzindex = totalpops - i;
                $(this).css({ zIndex: popzindex });
                });     
                // close pops if user clicks outside of pop
                activePop = null;
                function closeInactivePop() {
                  $(".pop").each(function (i) {
                    if ($(this).hasClass('active') && i!=activePop) {
                      $(this).removeClass('active');
                      }
                  });
                  return false;
                }
                $(".pop").mouseover(function() { activePop = $(".pop").index(this); });
                $(".pop").mouseout(function() { activePop = null; }); 
```

# jquery - 尝试切换 div 大小

> ID：15493898
> 
> 赞同：0
> 
> 时间：2013-03-19T07:38:27.033
> 
> 标签：jquery

我将所有内容都放入一个 html 文档中，以防万一它可能是导致问题的 css……我有 4 个使用 div 和 css 制作的绿色框。我希望它们在单击时变大——也许只是从 80x80px 到 100x100px 或类似的东西。现在那里的 jQuery 代码是我从别人的问题的答案中获取的代码——我对 jQuery 真的很陌生，并且遇到了很多麻烦。任何帮助，将不胜感激！！

```
<html>
<head>
<title>For testing</title>

<style type="text/css">
#green_box_container {
    float: left;
    padding: 0px;
    margin-left: 345px;
    height: 300px;
    width: 500px;
}

#green_box1 {
    background-color: #070;
    margin: 0px;
    padding: 0px;
    height: 80px;
    width: 80px;
    float: left;
    margin-left: 20px;
}

#green_box2 {
    background-color: #070;
    margin: 0px;
    padding: 0px;
    height: 80px;
    width: 80px;
    float: left;
    margin-left: 20px;
}

#green_box3 {
    background-color: #070;
    margin: 0px;
    padding: 0px;
    height: 80px;
    width: 80px;
    float: left;
    margin-left: 20px;
}

#green_box4 {
    background-color: #070;
    margin: 0px;
    padding: 0px;
    height: 80px;
    width: 80px;
    float: left;
    margin-left: 20px;
}
</style>

<script src="jquery-1.9.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
$("#green_box_container a").click(function() {
    var $this = $(this),
        val = $this.height() == 200 ? '50px' : '200px';
    $this.stop().animate({
        width: val,
        height: val
    }, "slow");
});
});
</script>

</head>

<body>

<div id="green_box_container">
<a href="#"><div id="green_box1"></div></a>
<a href="#"><div id="green_box2"></div></a>
<a href="#"><div id="green_box3"></div></a>
<a href="#"><div id="green_box4"></div></a>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:43:59.737

看起来您想要为（锚点）`div`内部设置动画。`a`为此，您可以简单地将动画功能应用于内部`div`，如下所示：

```
$(document).ready(function () {
    $("#green_box_container a").click(function () {
        var $this = $(this),
            val = $this.height() == 200 ? '50px' : '200px';
        $this.find("div").stop().animate({
            width: val,
            height: val
        }, "slow");
    });
}); 
```

这是一个演示这个想法的小提琴：http: [//jsfiddle.net/bHyHS/](http://jsfiddle.net/bHyHS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:00:46.857

感谢您提供完整的示例。我在本地对此进行了测试，看来您的 jquery 选择器是您遇到问题的地方。

通过说给我 $("#green_box_container a")，您将使用 green_box_container 抓取所有锚标记。然后，您尝试调整锚点的大小，而不是使用锚点标签的实际 div。

要选择 green_box_container 内锚点内的所有 div，您只需向 jquery 选择器添加另一个级别，如下所示：

$("#green_box_container 一个 div")

希望这可以帮助。

# tcl - 如何使用 tcl 屏蔽文件中包含的敏感信息？

> ID：15493899
> 
> 赞同：1
> 
> 时间：2013-03-19T07:38:29.490
> 
> 标签：tcl, password-encryption

我正在尝试实现一个 tcl 脚本，它读取一个文本文件，并屏蔽包含它的所有敏感信息（如密码、IP 地址等）并将输出写入另一个文件。

截至目前，我只是用*** * 或 ##### 替换这些数据，并用正则表达式搜索整个文件以找到我需要屏蔽的内容。但是由于我的文本文件可以是 100K 行或更多的文本，结果证明这是非常低效的。

是否有任何内置的 tcl 函数/命令可以用来更快地执行此操作？是否有任何附加软件包提供额外的选项来帮助完成这项工作？

注意：我使用的是 tcl 8.4（但如果在较新版本的 tcl 中有方法可以做到这一点，请给我指点）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:03:55.703

一般来说，您应该将您的代码放在一个过程中，以便从 Tcl 中获得最佳性能。（您在 8.5 和 8.6 中还有一些相关选项，例如 lambda 术语和类方法，但它们与过程密切相关。）您还应该注意一些其他事情：

*   将您的表达式放在大括号中（`expr {$a + $b}`而不是`expr $a + $b`），因为这样可以实现更有效的编译策略。
*   仔细选择您的频道编码。（如果这样做`fconfigure $chan -translation binary`，该通道将传输*字节*而不是*字符*。但是，`gets`在 8.4 中，在面向字节的通道上效率不是很高。使用`-encoding iso8859-1 -translation lf`将提供大部分好处。）
*   Tcl 很好地进行了通道缓冲。
*   可能值得用不同版本的 Tcl 对您的代码进行基准测试，看看哪个效果最好。如果您不想为了测试而安装多个 Tcl 解释器（次要）麻烦，请尝试使用[*tclkit*构建进行测试。](http://www.patthoyts.tk/tclkit/)

进行面向行的转换的惯用方法是：

```
proc transformFile {sourceFile targetFile RE replacement} {
    # Open for reading
    set fin [open $sourceFile]
    fconfigure $fin -encoding iso8859-1 -translation lf

    # Open for writing
    set fout [open $targetFile w]
    fconfigure $fout -encoding iso8859-1 -translation lf

    # Iterate over the lines, applying the replacement
    while {[gets $fin line] >= 0} {
        regsub -- $RE $line $replacement line
        puts $fout $line
    }

    # All done
    close $fin
    close $fout
} 
```

如果文件足够小，可以轻松放入内存中，则效率更高，因为整个匹配替换循环被提升到 C 级别：

```
proc transformFile {sourceFile targetFile RE replacement} {
    # Open for reading
    set fin [open $sourceFile]
    fconfigure $fin -encoding iso8859-1 -translation lf

    # Open for writing
    set fout [open $targetFile w]
    fconfigure $fout -encoding iso8859-1 -translation lf

    # Apply the replacement over all lines
    regsub -all -line -- $RE [read $fin] $replacement outputlines
    puts $fout $outputlines

    # All done
    close $fin
    close $fout
} 
```

最后，正则表达式不一定是进行字符串匹配的最快方法（例如，`string match`它要快得多，但接受更受限制的模式类型）。将一种样式的替换代码转换为另一种样式并让它真正快速运行并不是 100% 微不足道的（RE 非常灵活）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:08:01.967

一个有 100K 行的文件并不多（除非每行都是 1K 字符长:) 所以我建议你`read`将整个文件放入一个 var 并在该 var 上进行替换：

```
set fd [open file r+]
set buf [read $fd]
set buf [regsub -all $(the-passwd-pattern) $buf ****]
# write it back
seek $fd 0; # This is not safe! See potrzebie's comment for details.
puts -nonewline $fd $buf
close $fd 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T08:18:29.250

特别是对于非常大的文件 - 如前所述 - 这不是将整个文件读入变量的最佳方法。一旦您的系统内存不足，您就无法防止应用程序崩溃。对于以换行符分隔的数据，最简单的解决方案是缓冲一行并进行处理。

只是给你一个例子：

```
# Open old and new file
set old [open "input.txt" r]
set new [open "output.txt" w]
# Configure input channel to provide data separated by line breaks
fconfigure $old -buffering line
# Until the end of the file is reached:
while {[gets $old ln] != -1} {
    # Mask sensitive information on variable ln
    ...
    # Write back line to new file
    puts $new $ln
}
# Close channels
close $old
close $new 
```

我想不出任何更好的方法来处理 Tcl 中的大文件 - 请随时告诉我任何更好的解决方案。但是 Tcl 并不是用来处理大数据文件的。为了获得真正的性能，您可以使用编译而不是脚本编程语言。

**编辑：**`![eof $old]`在while循环中替换。

# jquery - jQuery .each 不会遍历所有后代

> ID：15493900
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:38:33.437
> 
> 标签：jquery, jquery-selectors, each

我已经尝试了几种方法，但就是无法完成。

我正在设计 ul/li 的菜单。我想这样做，如果 a`<li>`具有 href 属性，jQuery 会为其创建一个事件以重定向到该属性存储的站点。但是当没有href时，什么都不会发生。问题是当我单击一些 li 时，同一分支中的那些也得到了事件

```
$("#menu-h > li li").each(function() {

      if($(this).attr("href")) {
           $(this).click(function() {
                window.location = $(this).attr("href");
                return false;
           });
      }
}); 
```

似乎它`each()`不会遍历所有 'li's after `#menu-h > li`，而只会遍历直接后代（子代），所以当我在 li 内部单击更多时，就像`#menu-h > li > li`， $(this) 值存储它的父级的 DOM 元素。是错误选择器的问题，还是我无法遍历所有后代，只能遍历直接后代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:42:47.323

无需遍历每个元素并添加 click 事件处理程序，您可以使用 selector找到所有`li`具有属性的 s 。`href``li[href]`

```
$(function(){
    $("#menu-h li[href]").click(function() {
        if($(this).attr("href")) {
            window.location = $(this).attr("href");
            return false;
        }
    });
}); 
```

更好的解决方案是使用事件委托

```
$("#menu-h").on('click', 'li[href]', function() {
    if($(this).attr("href")) {
        window.location = $(this).attr("href");
        return false;
    }
}); 
```

# android - 将 Google 地图插入我的 Android 应用程序

> ID：15493903
> 
> 赞同：1
> 
> 时间：2013-03-19T07:38:39.160
> 
> 标签：android

您好，我需要我的 Android 应用程序的帮助才能将谷歌地图插入应用程序，但每次我这样做时，应用程序都会崩溃，如果有人可以帮助我找到问题，我将在下面插入我的代码与代码。

Androidmanifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.maret.maps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
    android:minSdkVersion="16"
    android:targetSdkVersion="17" />

    <permission
    android:name="com.maret.toilet.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

    <uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/> 

    <uses-permission android:name="com.maret.toilet.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.maret.toilet.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="***MY_API_KEY****"/>
    </application>

    </manifest> 
```

这是我的 activity_main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="My Location"
    android:onClick="getLocation"
    android:layout_weight="0"
    />

    <fragment
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          class="com.google.android.gms.maps.MapFragment"/>
    </LinearLayout> 
```

这是我的 MainActivity.java

```
 package com.maret.maps;

    import android.app.Activity;
    import android.os.Bundle;

     public class MainActivity extends Activity {

     @Override
     public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);
     }

    } 
```

我的错误日志

```
 03-19 08:41:45.552: E/Trace(641): error opening trace file: 
      No such file or directory    (2)
      03-19 08:41:45.861: D/AndroidRuntime(641): 
      Shutting down VM
      03-19 08:41:45.872: W/dalvikvm(641): 
      threadid=1: thread exiting with uncaught   exception (group=0x40a13300)
      03-19 08:41:45.891: E/AndroidRuntime(641): FATAL EXCEPTION: main
      03-19 08:41:45.891: E/AndroidRuntime(641): 
     java.lang.RuntimeException: Unable to   start activity ComponentInfo{com.maret.toilet/com.maret.toilet.MainActivity}: android.view.InflateException: 
      Binary XML file line #15: Error inflating class fragment
      03-19 08:41:45.891: E/AndroidRuntime(641):    
      at    android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
      03-19 08:41:45.891: E/AndroidRuntime(641):    
      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
      03-19 08:41:45.891: E/AndroidRuntime(641):    
      at android.app.ActivityThread.access$600(ActivityThread.java:130)
     03-19 08:41:45.891: E/AndroidRuntime(641):     
     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
     03-19 08:41:45.891: E/AndroidRuntime(641):     
     at android.os.Handler.dispatchMessage(Handler.java:99)
     03-19 08:41:45.891: E/AndroidRuntime(641):     
     at android.os.Looper.loop(Looper.java:137)
     03-19 08:41:45.891: E/AndroidRuntime(641):     
     at android.app.ActivityThread.main(ActivityThread.java:4745) 
     03-19 08:41:45.891: E/AndroidRuntime(641):     
     at java.lang.reflect.Method.invokeNative(Native Method)
     03-19 08:41:45.891: E/AndroidRuntime(641):     
     at java.lang.reflect.Method.invoke(Method.java:511)
     03-19 08:41:45.891: E/AndroidRuntime(641):     
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
     03-19 08:41:45.891: E/AndroidRuntime(641):     
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
     03-19 08:41:45.891: E/AndroidRuntime(641):     
     at   dalvik.system.NativeStart.main(Native Method)
    03-19 08:41:45.891: E/AndroidRuntime(641): 
    Caused by: android.view.InflateException:    
   Binary XML file line #15: Error inflating   class fragment
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at    android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at    android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at  android.view.LayoutInflater.inflate(LayoutInflater.java:489)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.app.Activity.setContentView(Activity.java:1867)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at com.maret.toilet.MainActivity.onCreate(MainActivity.java:12)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at   android.app.Activity.performCreate(Activity.java:5008)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
   03-19 08:41:45.891: E/AndroidRuntime(641):   ... 11 more
   03-19 08:41:45.891: E/AndroidRuntime(641): 
   Caused by: android.app.Fragment$InstantiationException: 
   Unable to instantiate fragment   com.google.android.gms.maps.MapFragment: 
   make sure class name exists, is public, and has an empty constructor that is public
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at   android.app.Fragment.instantiate(Fragment.java:584)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.app.Fragment.instantiate(Fragment.java:552)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.app.Activity.onCreateView(Activity.java:4656)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
   03-19 08:41:45.891: E/AndroidRuntime(641):   ... 21 more
   03-19 08:41:45.891: E/AndroidRuntime(641): 
   Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.MapFragment
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
   03-19 08:41:45.891: E/AndroidRuntime(641):   
   at android.app.Fragment.instantiate(Fragment.java:574)
   03-19 08:41:45.891: E/AndroidRuntime(641):   ... 24 more 
```

这是新的布局和活动

这是 main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" >

  <fragment
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
</LinearLayout> 
```

*** 这是我的 main.java *** ***

```
 package com.maret.maps;

          import android.os.Bundle;
          import android.app.Activity;
          import android.view.Menu;

         public class Main extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

  } 
```

***这是应用程序崩溃时的新 LOGCAT*** ******

SupportMapFragment 无法转换为 android.app.Fragment 03-21 12:23:04.452: E/AndroidRuntime(958): at android.app.Fragment.instantiate(Fragment.java:577) 03-21 12:23:04.452: E/AndroidRuntime(958): 在 android.app.Fragment.instantiate(Fragment.java:552) 03-21 12:23:04.452: E/AndroidRuntime(958): 在 android.app.Activity.onCreateView(Activity.java :4656) 03-21 12:23:04.452: E/AndroidRuntime(958): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) 03-21 12:23:04.452: E/AndroidRuntime(958): ... 21 更多 03-21 12:23:07.973: I/Process(958): 发送信号。PID：958 SIG：9 在 android.app.Activity.onCreateView(Activity.java:4656) 03-21 12:23:04.452: E/AndroidRuntime(958): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) 03-21 12 :23:04.452: E/AndroidRuntime(958): ... 21 更多 03-21 12:23:07.973: I/Process(958): 发送信号。PID：958 SIG：9 在 android.app.Activity.onCreateView(Activity.java:4656) 03-21 12:23:04.452: E/AndroidRuntime(958): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) 03-21 12 :23:04.452: E/AndroidRuntime(958): ... 21 更多 03-21 12:23:07.973: I/Process(958): 发送信号。PID：958 SIG：9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:46:46.303

这是我写的关于如何在您的应用程序中创建地图片段的博客文章：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

从您的代码看来，您的权限未正确定义，您需要添加以下内容：

```
<permission android:name="com.maret.maps.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
<uses-permission android:name="com.maret.maps.permission.MAPS_RECEIVE"/> 
```

请在崩溃时添加您的 logcat 堆栈跟踪，以便我们更清楚地了解问题所在。

**更新：**

从您收到的错误中：

```
 java.lang.RuntimeException: Unable to   start activity ComponentInfo{com.maret.toilet/com.maret.toilet.MainActivity}: android.view.InflateException: 
 Binary XML file line #15: Error inflating class fragment 
```

似乎您没有`google-play-services`根据需要引用库，这就是片段无法膨胀的原因。`MapFragment`找不到课程。

请查看我在答案开头发布的指南，了解如何正确进行引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T07:41:55.340

您的清单中的应用程序标记缺少此行

```
<uses-library android:name="com.google.android.maps" /> 
```

添加它，它应该修复崩溃

**编辑**：这仅适用于地图 api 版本 1

# php - 保存是否应使用字段 - SQL

> ID：15493904
> 
> 赞同：2
> 
> 时间：2013-03-19T07:38:40.283
> 
> 标签：php, html, sql, forms, phpmyadmin

我正在创建一个新的应用程序，它就像一个表单生成器。如果字段应出现在表单中，管理员可以使用 HTML 复选框进行选择。现在我的数据库中有多个字段和表用于保存数据，但我不知道如何判断每个字段是否应该使用。

**例如。**

```
tbl_users
- firstname
- lastname
- street
- country
- city

tbl_data1
- datafield1
- datafield2
- datafield3

tbl_data2
- checkbox1
- checkbox2
- checkbox3 
```

我正在考虑在某个地方添加一个“1”或“0”，以确定是否应该使用/渲染该字段。保存它的最佳方法是什么？使用“表之间”？

**喜欢：**

```
admin_generated_field
- id             1
- user_id        32
- checkbox       0
- checkbox1      1
- checkbox2      0
- textfield1     1 
```

我希望我的问题有点清楚，我希望有人可以帮助我或者给我一些建议谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:03:40.960

一种方法是为表单中的每个输入添加一个包含一行的表格，如下所示

```
active_elements
-id
-column_name
-visible 
```

然后查询表中的可见元素。如果您使用的是 PDO，它看起来像

```
<?php
$user = 'admin';
$pass = '';
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
$active = $dbh->query('SELECT column_name from active_elements WHERE visible=1')->fetchAll(PDO::FETCH_COLUMN);
?> 
```

最后，在您的表单视图中，您在显示输入之前搜索 $active 数组

```
if(in_array('q1', $active)){
    print "<label for='form[q1]'>Q1:</label><input name='form[q1] type='text' />";
} 
```

再想一想，问问自己：这是一个演示问题，一个访问控制问题，还是两者兼而有之？最低限度，您似乎想在视图层运行此测试，但也许您也想在模型层执行此测试（如果您不使用 MVC 模式，这仅意味着您将测试集成到代码中正在处理表单提交）。

# c++ - 是否有帮助识别链接器错误的工具？

> ID：15493908
> 
> 赞同：7
> 
> 时间：2013-03-19T07:38:58.430
> 
> 标签：c++

C++ 链接错误通常是最难确定的。即使在[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)中，链接器消息也很长、很隐晦并且带有损坏的符号，但最糟糕的是：没有帮助工具可以告诉您错误发生的位置，而且您可能会花费很长的令人沮丧的时间来试图找出问题。是否有任何插件工具可以帮助确定链接器错误？

我对该工具的期望是在错误的行中打开相关的源文件，显示可以找到补救措施的二进制文件和依赖关系图等。

例如，在多重定义符号的情况下，让工具打开在其项目上下文中定义符号的所有位置，并提出解决方案。

# javascript - 使用jquery检查fancybox是否存在rel = group？

> ID：15493912
> 
> 赞同：1
> 
> 时间：2013-03-19T07:39:10.707
> 
> 标签：javascript, jquery, fancybox, concrete5

我的页面中有以下代码：

```
<script type = "text/javascript">
$(document).ready(function() {
    // Fancy LightBox
    $("a[rel=group]").fancybox({
        'transitionIn'      : 'elastic',
        'changeFade'        : 'fast',
        'transitionOut'     : 'elastic',
        'titlePosition'     : 'over',
        'overlayOpacity'    : '0.6',
        'showCloseButton'   : false,
        'overlayColor'      : '#000000',
        'titleFormat'       : function(title, currentOpts) {
                return '<span id="fancybox-title-over">'+ (title.length ? ' &nbsp; ' + title : '') + '</span>';
            }
    });

});
</script> 
```

但是当没有一个元素时，`rel=group`它会使我的 Concrete5 仪表板面板崩溃。有没有办法检查元素是否`rel=group`存在，如果不存在，不要触发代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:46:46.527

尝试

```
if($('a[rel="group"]').length > 0)
{
    $('a[rel="group"]').fancybox({ 
```

# extjs - Sencha Architect 的真实世界项目结构

> ID：15493914
> 
> 赞同：11
> 
> 时间：2013-03-19T07:39:14.267
> 
> 标签：extjs, sencha-architect

我是 Sencha ExtJS 和 Architect MVC 的新手，但我一般了解 MVC 和其他一些 JQuery 库。

我想问在构建现实世界的系统时，在 Architect 2 中布局 Sencha 应用程序结构的正确方法是什么？

例如，我们的应用程序中有以下部门，它们具有不同的功能：

`Accounting, Controlling, Quality Assurance, Customer Services, Human Resources, Logistics, Purchasing, Sales, Records Management ...`

**方法 1：**将它们写在不同的 Sencha Architect 项目中。缝合主布局页面 + 主要区域 + 页眉/页脚 + 侧栏页面。（在我们的例子中使用 MVC.NET）

--- 优点：

*   多个程序员可以在敏捷环境中处理不同的子项目。

*   每个项目都更小，更容易升级或更换。

--- 缺点：

*   我们有不同的 Sencha Architect 项目，例如主要区域、侧栏、页眉、页脚。他们如何相互协作？我们现在只使用 JQuery 在它们之间传递信息，但感觉有点 hacky。

**方法 2：**将它们全部写在一个大型 Sencha Architect 项目中。因此，它在一个包含所有内容的 app.html 页面中启动。

--- 优点：

*   现在项目中的每个组件都可以相互协作。

*   一个真正的单页应用多合一 app.html 看起来不错。

--- 缺点：

*   如果多个程序员在一个 Sencha Architect 项目上工作，那就很难了。

*   这是一个大而复杂的应用程序。虽然它被分为简单的 App、Store、M、V、C 类别，但我们可以在更大的项目中对组件进行名称崩溃。

*   加载速度可能是个问题？我只是在这里猜测，因为我们不知道 Sencha Architect MVC 设计是部分加载相关窗口和组件还是一起加载所有内容。

问题是，如果我们采用第一种方法，我们如何在不同项目之间进行沟通？如果我们采用第二种方法，Sencha Architech 2 是否旨在以这种方式构建现实世界的项目？把所有东西都堆在一个大项目里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T02:53:31.183

首先，我会说你以所有正确的方式思考这个问题。你的优点和缺点是正确的。

其次，我是 Sencha Architect 团队的一名工程师。

我的建议是拥有更松散耦合的单独项目，并且可能通过门户/仪表板应用程序连接。胶水应用程序可以用任何东西编写，包括 Architect 中的 Ext JS。

我这么说的原因很简单，我不喜欢把所有的鸡蛋都放在一个篮子里，如果你已经构建了单页应用程序，你就会知道当它们工作时它们真的会嗡嗡作响。但是，当发生未捕获的 javascript 异常时，它可能会迫使该用户必须进行完全刷新才能回到快乐状态。当然，如果你是完美的，这将永远不会发生：p 谁是完美的？

我构建了 Architect，它实际上是一个非常大的单页应用程序。作为一个团队，我们都尽最大努力使每个系统都能够在尽可能少地依赖任何其他系统的情况下工作。我们使用事件、发布/订阅、适配器和插件模式等...

这些系统在很大程度上被分解为单独的名称空间和目录，就像所有软件一样，它们可以帮助开发人员进行划分。建筑师今天并不完全支持这个想法。但是，通过约定，您可以接近。例如 HRController、HRNewEmployeeForm、HREmployeeGrid

然而，将 HR 作为一个单独的应用程序，假设您的应用程序名称为 HR，则为您提供 HR.EmployeeController、HR.NewEmployeeForm。每个应用程序都是一个单独的项目，还允许开发团队在其部署方式上更加敏捷！！大胜。

其他用户采用了这种方法，其中一个用户使用托管 iframe 方法将他的所有项目绘制在一起 [http://www.sencha.com/forum/showthread.php?243179](http://www.sencha.com/forum/showthread.php?243179)

Asp.Net MVC 是另一种很好的方法，它可能会为您提供一些功能，如用户身份验证等......

希望这会有所帮助！

# iphone - 使用 segue 将 Int 从一个 ViewController 传递到另一个

> ID：15493916
> 
> 赞同：1
> 
> 时间：2013-03-19T07:39:17.040
> 
> 标签：iphone, ios, objective-c, storyboard, segue

我正在尝试将一个 int 从一个 VC 传递给另一个。我正在这样做。

在我的 VC1中，`showDetail`当我调用 prepareForSegue 方法时，我正在做一个 segue。它看起来像这样。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSIndexPath *indexPath = (NSIndexPath *)sender;
    News *news = [arrNews objectAtIndex:indexPath.row];
    NSLog(@"news id is %@",news.new_id);
    if ([segue.identifier isEqualToString:@"showDetail"]) {
        [segue.destinationViewController setNewsId:(int)news.new_id];
    }
} 
```

在日志中，我得到了正确的数字。现在在我的 VC2 中，我已经声明了一个这样的 int 。

```
@property (nonatomic) int newsId; 
```

我的 setMethod 看起来像这样。

```
-(void)setNewsId:(int)newsId{
    NSLog(@"news id is %d",newsId);
    self.newsId = newsId;

} 
```

当我执行时，我进入了一个包含所有大数字的循环。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T07:41:36.617

这段代码可以循环：

```
-(void)setNewsId:(int)newsId{
    NSLog(@"news id is %d",newsId);
    self.newsId = newsId;
} 
```

并且应该是：

```
-(void)setNewsId:(int)newsId{
    NSLog(@"news id is %d",newsId);
    _newsId = newsId;
} 
```

其中 _newsId 是 ivar。

**UPD** 似乎 news.new_id 具有 NSNumber 类型。所以提取整数值

```
[segue.destinationViewController setNewsId:[news.new_id integerValue]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T07:43:35.120

`self.newsId = newsId;`这将调用您的 setter 方法`setNewsId:`。它会导致无限循环。始终直接在 setter 和 getter 中访问实例变量。

```
_newsId = newsId; 
```

你的实际问题是'（int）news.new_id'这个铸造。这给你错误的值尝试为这个值写一个日志。我跳 `news.new_id`是`NSNumber`然后要么将属性设置为`NSNumber`类型，要么如果您只想`int`使用 [news.new_id intValue] 并设置。不要键入 cast。

# html - 由于 Float:left 无法点击提交按钮

> ID：15493923
> 
> 赞同：1
> 
> 时间：2013-03-19T07:39:44.680
> 
> 标签：html, css, layout

标题说明了一切，我有 2 个按钮需要向左浮动，但是当我分配`float:left;`给相应的 css 时，这些按钮会出现“不可点击”，但我无法与它们交互。当我删除它们时，`float:left;`它们确实起作用，但是它们不在我希望它们出现的地方。

我的 FireBug 也没有给出任何错误信息，而且这个问题只发生在谷歌浏览器中。如果有人有任何建议，请与我分享。

这是代码的一部分：

HTML：

```
<div id="php_beam" class="php_beam">
    <form method="post" action="index.php">            
        <!-- PHP Beam Buttons -->
        <input type="submit" name="Previous"    value="Vorige" />
        <input type="submit" name="Next"        value="Volgende" />
     </form>
</div> 
```

CSS：

```
.php_beam
{
    width:              950px;
    height:             20px;
    margin-left:        225px;
    margin-top:         5px;
    float:              left;
} 
```

需要明确的是，我想知道是否有其他解决方案而不是使用`float:left;`，因为这似乎会导致问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:53:17.950

尝试：

```
.php_beam
{
    width:              950px;
    height:             20px;
    margin-left:        225px;
    margin-top:         5px;
}

.php_beam input
{
    float:              left;
} 
```

# c# - Silverlight 中的自定义组合框高度问题

> ID：15493924
> 
> 赞同：0
> 
> 时间：2013-03-19T07:39:50.413
> 
> 标签：c#, wpf, silverlight-4.0, custom-controls, silverlight-5.0

在我的自定义控件中，我遇到了下拉菜单高度的问题。如果组合框项目更多，我想要多次滚动鼠标，因为下拉菜单的高度很小。我想增加下拉菜单的高度。

仅供参考 - 我已经使用 Generic.xaml 文件生成自定义控件，并且控件的行为在 TextBox.cs 文件中定义（继承自文本框类）。

谢谢你..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:42:11.553

您可以使用 ComboBox 的[MaxDropDownHeight](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.combobox.maxdropdownheight%28v=vs.95%29.aspx)属性来设置所需的最大高度，即展开时。

# shell - 作为选项传递时，shell 波浪号扩展不起作用

> ID：15493928
> 
> 赞同：5
> 
> 时间：2013-03-19T07:40:07.120
> 
> 标签：shell, tilde-expansion

我发现波浪号扩展不适用于以下情况：

```
$ set -x

$ ./print_arg.pl destdir=~/test
+ ./print_arg.pl 'destdir=/root/test'
destdir=/root/test

$ ./print_arg.pl dest-dir=~/test
+ ./print_arg.pl 'dest-dir=~/test'
dest-dir=~/test

$ ./print_arg.pl -destdir=~/test
+ ./print_arg.pl '-destdir=~/test'
dest-dir=~/test 
```

print_arg.pl 的内容是

```
#!/usr/bin/perl
print $ARGV[0],"\n"; 
```

根据[Shell 处理顺序](http://www.gnu.org/software/bash/manual/html_node/Shell-Operation.html#Shell-Operation)，Shell 会在“波浪扩展”之前拆分单词。我注意到分词实际上是不同的。结果不同的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:01:21.180

波浪号扩展也发生在 shell 变量赋值中，`destdir=~/test`类似于。`dest-dir=~/test`并且`-destdir=~/test`不要，因为`-`它不是变量名中的有效字符。尽管 shell 没有将其评估`destdir=~/test`为变量赋值（如果`set -k`使用它，它会），但解析器似乎仍在将其视为变量并在 RHS 上执行波浪号扩展。

来自[http://www.gnu.org/software/bash/manual/html_node/Tilde-Expansion.html#Tilde-Expansion](http://www.gnu.org/software/bash/manual/html_node/Tilde-Expansion.html#Tilde-Expansion)：

> 每个变量赋值都会检查紧跟在 ':' 或第一个 '=' 之后的未加引号的波浪号前缀。在这些情况下，也执行波浪号扩展。因此，可以在分配给 PATH、MAILPATH 和 CDPATH 时使用带有波浪号的文件名，并且 shell 分配扩展值。

请注意，使用`-k`选项集，正确的变量分配将被处理并从传递给的参数列表中删除`print_arg.pl`：

```
~ $ set -kx
~ $ ./print_arg.pl destdir=~/bin foo
+ destdir=/Users/clint/bin
+ ./print_arg.pl foo
foo
~ $ ./print_arg.pl dest-dir=~/bin foo
+ ./print_arg.pl 'dest-dir=~/bin' foo
dest-dir=~/bin 
```

# r - 逐步填充数据框

> ID：15493933
> 
> 赞同：-1
> 
> 时间：2013-03-19T07:40:38.683
> 
> 标签：r, dataframe

我正在使用 for 循环对我的数据的特定子集执行操作。在 for 循环的每次迭代结束时，我拥有填充数据框行所需的所有值。

到目前为止我试过

```
df=NULL
for(...){  
//stuff to calculate   
newline=c(allthethingscalculated)  
df=rbind(df,newline)
} 
```

这导致无法使用 '$' 访问数据帧的内容，因为这些行是原子向量。

我还尝试将在每次迭代结束时获得的值附加到已经存在的向量中，当 for 循环结束时，使用从这些向量创建数据帧，但将值附加到相应的向量不起作用，值不是添加。

```
x<-data.frame(a,b,c,d,...) 
```

对此有什么想法吗？

* * *

由于我的 for 循环遍历数据中的 ID，我意识到我可以执行以下操作：

```
uids=unique(data$id)
filler=c(1:length(uids))
df=data.frame(uids,filler,filler,filler,filler,filler,filler,filler,filler,filler)

for(i in uids){
...
df[i,]<-newline
} 
```

我使用*填充*器创建了一个具有正确列数和行数的数据框，所以我不会收到类似“替换长度为 9，替换长度为 1”之类的错误

有一个更好的方法吗？使用这种方法，我仍然需要删除相应行中的*填充值？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:46:40.227

这应该可行，您可以向我们展示您的数据吗？

```
R) x=data.frame(a=rep(1,3),b=rep(2,3),c=rep(3,3))
R) d=c(4,4,4)
R) rbind(x,d)
  a b c
1 1 2 3
2 1 2 3
3 1 2 3
4 4 4 4
R) cbind(x,d)
  a b c d
1 1 2 3 4
2 1 2 3 4
3 1 2 3 4 
```

# air - 如何在 App Store (Mac OSX) 中发布 Adob e AIR 客户端？

> ID：15493935
> 
> 赞同：0
> 
> 时间：2013-03-19T07:40:44.903
> 
> 标签：air, app-store

如何在 App Store (Mac OSX) 中发布 Adob​​e AIR 客户端？（我说的是桌面客户端，而不是 iOS 应用程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:46:31.067

在俄语[http://www.pvsm.ru/adobe/26331](http://www.pvsm.ru/adobe/26331) （+ 最后还有一些其他链接）

# c# - 通过网络发送同步的音频和视频数据

> ID：15493936
> 
> 赞同：0
> 
> 时间：2013-03-19T07:40:53.780
> 
> 标签：c#, video-streaming, directshow, audio-streaming, naudio

我已经通过网络分别发送音频和视频，但我想通过网络发送同步的音频视频数据。如果有人能提供解决方案，我将不胜感激。ps：我使用Naudio 播放音频，使用DirectShow 播放视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:35:45.953

我假设您必须确保的第一点是您在某个固定的时间间隔内生成 RTCP 数据包。RTCP 将 rtp 时间戳与 NTP 映射。这是客户端同步音频和视频所必需的。

# svn - 颠覆基于提交日期回滚源文件

> ID：15493937
> 
> 赞同：2
> 
> 时间：2013-03-19T07:40:54.637
> 
> 标签：svn, tortoisesvn, rollback

我目前的工作陷入了混乱。在特定日期之后开发的知识产权存在所有权问题。一位专业的知识产权律师指示我不要侵犯该知识产权。在我看来，处理此问题的理想方法是丢弃所有签到以及签到附加的所有内容，例如在某个日期之后发表的评论。

在这个阶段，为在此日期之前添加/修改的文件检查 SVN，然后启动一个新的存储库是我知道实现这一目标的唯一方法。显然，这将破坏没有所有权问题的 IP，因为前一段时间的提交日志和更改记录将丢失。

在保留所有权问题之前存在的所有信息的同时，在特定日期之后删除签到的最佳方法是什么。

抱歉，如果这发布在不正确的部分，我找不到更好的部分来发布。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:45:59.180

您想在新创建的存储库中使用`svnadmin dump`then的组合。`svnadmin load`像这样的东西应该工作：

```
svnadmin dump -r 1:last_rev /path/to/old/rep | svnadmin load /path/to/new/rep 
```

`last_rev`最后一个无 IP 问题的修订版在哪里。

# wordpress - 如何在安装了 wordpress 的网站中创建博客页面、显示所有帖子并更改博客帖子 url 结构

> ID：15493942
> 
> 赞同：0
> 
> 时间：2013-03-19T07:41:19.067
> 
> 标签：wordpress, blogs

您好，我对 wordpress 有点陌生。我知道如何在 wordpress 中创建网站和主题。但是当我要为网站创建博客页面时，我可以在博客页面中显示所有帖子，但无法更改 url 结构。例如 yourwebsite.com/blog/postname。如果有任何插件，请告诉我。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T10:35:48.740

经过长时间的研究，我找到了答案。

1 - 创建一个页面，如 www.yourwebsite.com/blog

2 - 设置 -> 固定链接 -> 自定义结构 -> 在 /%postname%/ 之前添加 /blog -> 保存

3 - 设置 -> 阅读 -> 帖子页面 -> 选择你的博客页面（你想在哪里显示你的帖子）

这对我有用。希望它可以帮助你。

# php - 备份 xampp 时出现错误字符集

> ID：15493947
> 
> 赞同：1
> 
> 时间：2013-03-19T07:41:39.927
> 
> 标签：php, mysql

我在本地计算机上使用 XAMPP 作为我的网络服务器。

今天我需要将我的 XAMPP 升级到**1.7.2 的更新版本。**所以我备份了 htdocs 文件夹和**mysql/data**文件夹。安装新版本的 XAMPP 后，我将所有备份文件夹复制到它们的旧目的地。但是当我运行我的一个网站时，它似乎是字符集错误。但是所有的数据库都有一个**utf8_unicode_ci**的排序规则。

你能帮我纠正这个吗？

当我需要升级 XAMPP 时，您能否告诉我备份网站的正确方法是什么？

谢谢

# selenium-webdriver - Selenium Web 驱动程序的报表自动化

> ID：15493949
> 
> 赞同：0
> 
> 时间：2013-03-19T07:41:53.247
> 
> 标签：selenium-webdriver

我们为我们的项目使用 Selenium Webdriver 配置了自动化框架。并使用 Junit 作为测试引擎和 Aapache-ant 来构建和运行 Java 类文件。当脚本使用 Build.xml 从控制台运行时，Ant 会生成 HTML-Junit 报告。

我们目前无法使用 ANT 报告获得所需的详细输出。

我们正在寻求生成 HTML 报告，该报告提供详细的测试结果，并以某种交互式格式显示以阅读和理解结果。例如，报告应满足以下要求： • 总结
1\. 测试用例通过 2\. 测试失败 3\. 测试未执行

• 详细报告显示列 1\. 测试用例 ID 2\. 测试用例描述 [与类/函数名称无关] 3\. 结果/状态

请帮助我们提供您在配置 Selenium Web 驱动程序以满足上述要求方面的宝贵见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:41:35.440

TestNg Xlst 是您的最佳选择。[从“ https://code.google.com/p/testng-xslt/](https://code.google.com/p/testng-xslt/) ”下载 testng-results.xsl并将其放在您的源文件夹中。并在您的 Ant 构建文件中添加一个目标，例如

```
<target name="testng-xslt-report">
        <delete dir="${basedir}/testng-xslt">
        </delete>
        <mkdir dir="${basedir}/testng-xslt">
        </mkdir>
        <xslt in="${basedir}/test-output/testng-results.xml" style="${basedir}/src/testng-results.xsl" out="${basedir}/testng-xslt/index.html">
            <param expression="${basedir}/testng-xslt/" name="testNgXslt.outputDir" />
            <param expression="true" name="testNgXslt.sortTestCaseLinks" />
            <param expression="FAIL,SKIP,PASS,CONF,BY_CLASS" name="testNgXslt.testDetailsFilter" />
            <param expression="true" name="testNgXslt.showRuntimeTotals" />
            <classpath refid="Automation_DataDriven.classpath">
            </classpath>
        </xslt>
    </target> 
```

注意：- 1\. 在执行此操作之前，您应该已经拥有您的报告 xml 文件。因为 TestNg-Xslt 只是将您现有的报告修改为所需的漂亮格式 2\. 将该文件指向 node 的“in”属性，就像我的情况一样，它位于“${basedir}/test-output/”下，所以我写了 3。最后但并非最不重要的一点是，我不确定对于 junit 引擎它是否可以工作（尽管，我已经在注释 1 和 2 中给出了工作范围）。对于 TestNg 它工作正常，所以请告诉我，它是否也适用于 junit 或者你面临的问题。

另外我建议在 Junit 上使用 TesNg。为了了解好处，谷歌是最好的选择。

# javascript - 将对象数组保存为 JSON 时，我需要在 Sample.txt 中使用以下格式，以免遇到解析错误：

> ID：15493952
> 
> 赞同：0
> 
> 时间：2013-03-19T07:41:56.113
> 
> 标签：javascript, json

将对象数组保存为 JSON 时，需要在 Sample.txt 中使用以下格式，以免遇到解析错误：

```
[{"result":"\"21 inches = 21 inches\"","count":1},{"result":"\"32 inches = 32 inches\"","count":2}] 
```

我是 JSON 的新手，并且自过去 4 天以来一直在搜索它。我尝试了不同的方法来存储对象数组，但没有成功。我的第一个也是最简单的尝试是这样的：

```
function createData() {
    //original, single json object
        var dataToSave = {
            "result": '"' + toLength.innerText +'"',
            "count":  counter 
        };

     //save into an array:
     var dataArray = { [] };    //No idea how to go ahead.. 

        var savedData = JSON.stringify(dataToSave);    
        writeToFile(filename, savedData);  //filename is a text file. Inside file, I want to save each json object with , in between. So It can be parsed easily and correctly. 
```

}

```
function readData(data) {
    var dataToRead = JSON.parse(data);

        var message = "Your Saved Conversions : ";

        message += dataToRead.result;

        document.getElementById("savedOutput1").innerText = message; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:44:13.293

要从您的对象制作一个数组，您可以这样做

```
var dataArray = [dataToSave]; 
```

之后要添加其他元素，您可以使用

```
dataArray.push(otherData); 
```

当您阅读它时，由于 data 是一个数组，您不能简单地使用`data.result`. `data[0].result`您必须使用, ... `data[i].result`...访问数组的项目

# eclipse - 从 Eclipse 将工件部署到 Nexus 时出错

> ID：15493954
> 
> 赞同：1
> 
> 时间：2013-03-19T07:42:03.013
> 
> 标签：eclipse, maven, nexus, artifacts

在我们的服务器上安装 Nexus 并设置快照和发布存储库。

更改了我的子模块 maven 项目中顶级项目的 pom.xml 文件，添加了以下几行：

```
 <distributionManagement>
    <snapshotRepository>
        <id>Snapshots</id>
        <url>http://maven:8081/nexus/content/repositories/Snapshots</url>
    </snapshotRepository>
    <repository>
        <id>Releases</id>
        <url>http://maven:8081/nexus/content/repositories/Releases</url>
    </repository>
  </distributionManagement> 
```

我已将 settings.xml 添加到 .m2 目录，其中包含以下内容：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <!--
  <localRepository/>
  <interactiveMode/>
  <usePluginRegistry/>
  <offline/>
  <pluginGroups/>
  -->
  <servers>

    <server>
      <id>Snapshots</id>
      <username>user</username>
      <password>pass</password>

      <privateKey>${user.home}/.ssh/id_dsa</privateKey>
      <passphrase>some_passphrase</passphrase>

      <filePermissions>664</filePermissions>
      <directoryPermissions>775</directoryPermissions>
      <configuration></configuration>

    </server>

  </servers>
  <!--
  <mirrors/>
  <proxies/>
  <profiles/>
  <activeProfiles/>
  -->
</settings> 
```

当我在我的顶级项目上使用 eclipse 的部署目标运行 maven 时，maven 开始构建并同步（上传）到快照存储库。顶级项目被上传，但在第一个子模块构建并开始同步后，我不断得到：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project <my sub module project>: Failed to deploy artifacts: Could not transfer artifact <group id>:<artifact id>:xml:0.0.1-20130318.160312-21 from/to Snapshots (http://maven:8081/nexus/content/repositories/Snapshots): Remotely Closed [id: 0x017ae341, /192.168.10.237:58758 :> maven/192.168.10.36:8081] 
```

奇怪的是，如果我从 Nexus 界面浏览我的 repo，子项目就在那里，带有 xml 和 jar 等。但问题是由于错误 maven 停止并且我的所有其他子项目都没有部署。

有谁知道如何解决这个问题？

**更新：** 如果我使用 distributionManagement-tag 创建单个 Maven 项目，我可以毫无问题地部署到 Nexus。但是当有多个 Maven 项目时，我得到了错误。我试图将 distributionManagement 添加到 child-pom ，但我得到了同样的错误。

poms 在部署到有关 distributionManagement 标签的存储库时应该如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:22:21.017

经过几个小时的调查，我发现了我的问题。我的父 pom.xml 中有一个部分，它将 features.xml 添加到父 repo。

```
<build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
        <plugins>
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-resources-plugin</artifactId>
              <version>${maven-resources-plugin.version}</version>
              <executions>
                 <execution>
                    <id>filter</id>
                    <phase>generate-resources</phase>
                    <goals>
                      <goal>resources</goal>
                    </goals>
                 </execution>
              </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>${build-helper-maven-plugin.version}</version>
                <executions>
                    <execution>
                        <id>attach-artifacts</id>
                        <phase>package</phase>
                        <goals>
                            <goal>attach-artifact</goal>
                        </goals>
                        <configuration>
                            <artifacts>
                                <artifact>
                                    <file>target/classes/features.xml</file>
                                    <type>xml</type>
                                </artifact>
                            </artifacts>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
         </plugins>
   </build> 
```

这导致了“远程关闭”问题。

# android - 是否有任何方法使属性动画器 API 在 3.0 以下的 android 系统中工作

> ID：15493957
> 
> 赞同：2
> 
> 时间：2013-03-19T07:42:28.320
> 
> 标签：android, animation

[android 3.0 引入的property animator](http://developer.android.com/guide/topics/graphics/prop-animation.html) API，在android 2.0 中不能工作。有什么方法可以让property animator API 在android 3.0 以下的系统中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:43:56.327

[NineOldAndroids](http://nineoldandroids.com/)是由传奇人物 Jake Wharton 创建的库，它将 Android 3.0 动画 API 带回了 Android 1.0。它具有一对一的 API 可比性，这意味着您在 Web 上看到的所有示例都可以使用，并且当每个人都不可避免地放弃对 3.0 之前的设备的支持时，您不必进行太多更新。

# android - android : 增强现实支持百万图像识别

> ID：15493959
> 
> 赞同：2
> 
> 时间：2013-03-19T07:42:32.907
> 
> 标签：android, augmented-reality

我正在开发一个进行图像识别的 AR 应用程序。现在我需要我的应用程序来支持数百万张图片。我正在使用vuforia。Vuforia 免费版对支持的图像数量有限制。是否有其他库在图像识别方面做得很好并且支持大量图像识别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:43:01.800

首先，我建议使用任何类型的 SDK 开发一个应该支持数百万张图像的应用程序，这会影响性能。它会大量消耗手机的电池并使应用程序检测图像的速度非常慢。说我建议尝试开发一个增强现实应用程序，该应用程序使用 Metaio SDK for Android 平台检测图像。有关更多信息，请参阅他们的官方网站[http://www.metaio.com](http://www.metaio.com) 。

# java - 使用 Java 在 android 中以编程方式更新版本

> ID：15493962
> 
> 赞同：0
> 
> 时间：2013-03-19T07:42:38.520
> 
> 标签：java, android, start-activity

总是通过阅读您的所有答案来感谢您的帮助，我经常使用堆栈溢出并且它总是很有帮助，如果有人可以帮助我，我现在没有找到解决我的问题的帮助，那就太好了。

我做了一个简单的程序来自动更新我的应用程序。所以下载运行良好，将 apk 带入应用程序会给我一个致命错误。

通过调试错误在

```
startActivity(intent); 
```

代码是：

```
package com.example.updateversion;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);

    // ***************************

    // if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);
    // }
    java.text.DateFormat dateFormat = android.text.format.DateFormat
            .getDateFormat(getApplicationContext());

    // ***************************
    String apkurl = "http://192.168.1.1/ANDROID/helloVersion.zip";// "http://www.vogella.com";
    try {

        URL url = new URL(apkurl);

        HttpURLConnection urlConnection = (HttpURLConnection) url
                .openConnection();
        String PATH = Environment.getExternalStorageDirectory()
                + "/download/";
        try {

            File file = new File(PATH);
            file.mkdirs();

            File outputFile = new File(file, "helloVersion.apk");
            FileOutputStream fos = new FileOutputStream(outputFile);

            InputStream is = new BufferedInputStream(
                    urlConnection.getInputStream());

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = is.read(buffer)) != -1) {
                fos.write(buffer, 0, len1);
            }
            fos.close();
            is.close();

        } finally {
            try {
                urlConnection.disconnect();
            } catch (Exception e) {
            }
        }

        File apkFile = new File(PATH + "helloVersion.apk");
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(apkFile),
                "application/com.example.helloversion");
        startActivity(intent); // here is the problem
    } catch (IOException e) {
        e.printStackTrace();
    }
    return true;
}

} 
```

我的错误是：

```
03-19 08:58:29.792: D/AndroidRuntime(28060): Shutting down VM
03-19 08:58:29.792: W/dalvikvm(28060): threadid=1: thread exiting with uncaught exception (group=0x40a591f8)
03-19 08:58:29.822: E/AndroidRuntime(28060): FATAL EXCEPTION: main
03-19 08:58:29.822: E/AndroidRuntime(28060): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/download/helloVersion.apk typ=application/com.example.helloversion }
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.app.Activity.startActivityForResult(Activity.java:3190)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.app.Activity.startActivity(Activity.java:3297)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at com.example.updateversion.MainActivity.onCreateOptionsMenu(MainActivity.java:87)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.app.Activity.onCreatePanelMenu(Activity.java:2444)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:392)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:743)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:2859)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.os.Handler.handleCallback(Handler.java:605)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.os.Looper.loop(Looper.java:137)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at android.app.ActivityThread.main(ActivityThread.java:4424)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at java.lang.reflect.Method.invokeNative(Native Method)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at java.lang.reflect.Method.invoke(Method.java:511)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-19 08:58:29.822: E/AndroidRuntime(28060):    at dalvik.system.NativeStart.main(Native Method) 
```

我的权限是：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.DELETE_PACKAGES" />
<uses-permission android:name="android.permission.INSTALL_PACKAGES" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:51:21.310

尝试使用：

```
String filepath = "yourfile";
Uri fileLoc = Uri.fromFile(new File(filepath));
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(fileLoc, "application/vnd.android.package-archive");
startActivity(intent); 
```

# c# - ManualResetEvent.set 在 C# 中没有被触发

> ID：15493963
> 
> 赞同：0
> 
> 时间：2013-03-19T07:42:40.073
> 
> 标签：c#, multithreading, silverlight

我正在使用 Visual Web Express 2010。我正在尝试将文件上传到服务器并阻止调用函数并在上传完成后释放它。但是，主线程永远不会被解除阻塞。

```
public partial class MainPage : UserControl
{
    private FileStream fileStream;
    private static String responseStr = "";
    private static ManualResetEvent evt = new ManualResetEvent(false);
    public MainPage()
    {
        InitializeComponent();
        HtmlPage.RegisterScriptableObject("App", this);
    }

    public void sendPhoto()
    {
        uploadFile();
    }

    private void uploadFile()
    {
        uploadDataToServer(url);
        evt.WaitOne();
        postProcess();

    }

    public static void postProcess()
    {
        HtmlPage.Window.Invoke("postProcess2", responseStr);

    }

    void uploadDataToServer(String url)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.ContentType = "multipart/form-data; boundary=---------------------------" + _boundaryNo;
        request.Method = "POST";
        request.BeginGetRequestStream(writeCallback, request);
    }

    private void writeCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        MemoryStream memoryStream = new MemoryStream();
        fileStream.CopyTo(memoryStream);
        if (memoryStream != null)
        {
            memoryStream.Position = 0;
            byte[] img = memoryStream.ToArray();
            Stream postStream = request.EndGetRequestStream(asynchronousResult);
            postStream.Write(img, 0, img.Length);
            request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);

        }
    }

    private void GetResponseCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
        Stream streamResponse = response.GetResponseStream();
        StreamReader streamRead = new StreamReader(streamResponse);
        string responseString = streamRead.ReadToEnd();
        streamRead.Close();
        streamResponse.Close();
        response.Close();
        responseStr = responseString;
        evt.Set();

    }

} 
```

现在，当我`evt.WaitOne()`在uploadFile 中使用时，整个应用程序都在等待并且没有请求发送到服务器，即代码永远不会到达`getResponseCallBack`，因此应用程序永远不会唤醒。但是，如果我不使用`evt.WaitOne()`，那么请求是成功的，但是我无法读取响应文本，因为它是在`writeCallBack()`函数中设置的并且请求是异步的。我应该怎么做才能克服这个问题？

```
我想不通：
1.如果请求是多线程/异步的，为什么evt.WaitOne()让整个app等待，请求没有完成？
2\. 如果请求是单线程的，那么为什么 postProcess() [删除 evt.WaitOne()] 在尝试访问 responseStr [在 getResponseCallBack() 中设置] 时没有得到正确的响应集。

```

[对不起，我是新手，很困惑]。

谢谢。

抱歉，我忘了提一件事，我正在使用`silverlight`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:56:18.643

启动异步操作然后等待它完成是没有意义的。而不是异步`request.BeginGetRequestStream(writeCallback, request);`使用同步`request.GetRequestStream(...)`并使用它的结果。那时不需要 ManualResetEvent。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T04:35:59.440

这是我想出的问题的解决方案：

有些人建议使用`HttpWebRequest.GetRequestStream`并使呼叫同步。但是，silverlight 似乎不允许这种情况发生。此外，在线程和并行处理方面存在许多混淆。

主要问题是我无法`UI thread`从我的回调函数中访问，所以我使用了该`dispatcher`方法，因为它始终确保操作在 UI 线程中执行，所以我的目标得到了实现。下面的伎俩。

```
System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() => { postProcess(); }); 
```

# ios - 在 uiScrollView 之前添加 uiTextView

> ID：15493964
> 
> 赞同：0
> 
> 时间：2013-03-19T07:42:40.900
> 
> 标签：ios, uiscrollview, uitextfield

我希望 textview 像这样在我的 tablecell 内的滚动视图之前，以便滚动视图滚动并且标题保持不变。

```
[Title goes here] - it does not move with the scrollview
---------------------
|                   |
|    ScrollView     |
|                   |
--------------------- 
```

**这是我的代码，textView 出现在滚动视图的后面。**

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MainCell"];
    }

    NSInteger numberOfViews = 10;
    UIScrollView *vwScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 1280, 200)];

    for (int i = 0; i < numberOfViews; i++) {
        CGFloat xOrigin = i * 250;
        UITextView *titleView = [[UITextView alloc]  initWithFrame:CGRectMake(0, 0, 1280, 20)];
        titleView.text = @"Title";
        [titleView setFont:[UIFont fontWithName:@"HelveticaBold" size:32]];

        UIView *awesomeView = [[UIView alloc] initWithFrame:CGRectMake(xOrigin, 0, 250, 180)];
        awesomeView.backgroundColor = [UIColor colorWithRed:0.5/i green:0.5/i/10 blue:0.5 alpha:1];
        [awesomeView.layer setBorderColor:[UIColor whiteColor].CGColor];
        [awesomeView.layer setBorderWidth:10.5f];
        awesomeView.layer.shadowPath = [UIBezierPath bezierPathWithRect:awesomeView.bounds].CGPath;

        [cell.contentView addSubview:titleView];
        [vwScroll addSubview:awesomeView];

    }
    vwScroll.contentSize = CGSizeMake(250 * numberOfViews, 200);

    [cell.contentView addSubview:vwScroll];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:47:13.417

为什么你不能将你的 titleView 的框架设置为，比如说，`(0,0,width,titleHeight)`然后将你的 scrollView 的框架设置为`(0,titleHeight,width,cellHeight-titleHeight)`.

这只会将标题放在单元格的顶部，将其高度设置为您想要的任何内容`titleHeight`，并将 scrollView 放在单元格的底部，将其高度设置为单元格的其余部分。

# javascript - 使用 JavaScript 或 jQuery 定义全局 CSS 类？

> ID：15493965
> 
> 赞同：18
> 
> 时间：2013-03-19T07:42:41.373
> 
> 标签：javascript, jquery, css, html, styles

有没有办法使用 JavaScript 或 jQuery 设置全局类的 CSS？也就是追加`.my_class { foo:bar }`到`<style/>`页面的标签上？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-19T07:59:00.843

纯 javascript -

```
var style=document.createElement('style');
style.type='text/css';
if(style.styleSheet){
    style.styleSheet.cssText='your css styles';
}else{
    style.appendChild(document.createTextNode('your css styles'));
}
document.getElementsByTagName('head')[0].appendChild(style); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-19T07:46:01.247

是的，你可以在 jQuery 中做到这一点：

```
var styleTag = $('<style>.my_class { foo: bar; }</style>')
$('html > head').append(styleTag); 
```

它的工作原理是简单地`<style>`在`<head>`.

# android - Android相机冻结问题

> ID：15493973
> 
> 赞同：1
> 
> 时间：2013-03-19T07:43:03.237
> 
> 标签：android, camera

我已经实现了一个自定义相机应用程序。我已按照[本教程](http://developer.android.com/reference/android/hardware/Camera.html)中说明的步骤进行操作。

在某些设备上，在拍照时，我的应用程序会冻结。

我在 logcat 中收到以下错误消息。

```
E/V4LCameraAdapter(2321): hardware/amlogic/camera/V4LCameraAdapter/V4LCameraAdapter.cpp:834 GetFrame - GetFrame: No buff for Dequeue

E/V4LCameraAdapter(2321): hardware/amlogic/camera/V4LCameraAdapter/V4LCameraAdapter.cpp:993 previewThread - Preview thread get frame fail, need sleep:33333 
```

错误是否特定于设备的硬件？有没有办法从 SDK 设置相机参数以避免`No buff`错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:59:22.677

想通了问题。

显然，这个回调用相机预览的每一帧的数据阻塞了缓冲区。

```
camera.setPreviewCallback(new PreviewCallback() {
      public void onPreviewFrame(byte[] data, Camera arg1) {
    //invalidate surfaceview
}
 }); 
```

删除回调对我有用。

# java - 从向量转换为对象数组

> ID：15493974
> 
> 赞同：0
> 
> 时间：2013-03-19T07:43:08.230
> 
> 标签：java, xml-rpc

实际上正在研究 XML-RPC。我试图在客户端类中执行一个返回对象数组的方法。这是我尝试在客户端类中执行它的方式。

```
Object[] result =  (Object[]) client.execute("getNames" , vector); 
```

而vector表示字符串类型的向量数组，“getNames”表示默认处理程序类中的方法名称：

```
public Object[] getNames(String a, String b, String c) {
        Vector<String> strings = new Vector<String>();
        strings.add(a);
        strings.add(b);
        strings.add(c);
        String [] arrOfString = strings.toArray(new String[strings.size()]);
        return arrOfString ;
    } 
```

运行时出现以下异常：

```
java.lang.ClassCastException: java.util.Vector cannot be cast to [Ljava.lang.Object;
    at org.apache.xmlrpc.demo.SimpleClient.<init>(SimpleClient.java:37)
    at org.apache.xmlrpc.demo.SimpleClient.main(SimpleClient.java:65) 
```

我能做些什么来解决这个铸造问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:45:17.613

您可以在`toArray`方法中简单地使用`Vector`类的`getNames`方法。

```
public Object[] getNames(String a, String b, String c) {
        Vector<String> strings = new Vector<String>();
        strings.add(a);
        strings.add(b);
        strings.add(c);
        return strings.toArray();
} 
```

但是，如果我得到你真正想做的事情，我认为你可以简单地做一些类似的事情：

```
Object[] result =  vector.toArray(); 
```

if`vector`确实是 type `Vector`。

# php - ajaxrequest.open 被 window.location.href 取消

> ID：15493976
> 
> 赞同：0
> 
> 时间：2013-03-19T07:43:10.073
> 
> 标签：php, javascript, ajax

好的，这就是我所拥有的。我有这个投票系统，您可以在其中单击一个按钮，然后使用 ajaxrequest.open() 将文本字段发送到 php 脚本。将数据发送到 php 脚本后，我希望它加载一个新页面。这就是我所拥有的（精简版）

```
var mytext = document.getElementById('textfield').value;
ajaxRequest.open("GET", "vote.php?mytext="+mytext, true);
ajaxRequest.send(null); 
window.location.href = "thanksforvoting.htm"; 
```

所以它将文本字段发送到 vote.php - 只有当我取出 window.location.href 行时才有效。只要该行存在，它就不会执行 ajaxrequest。我想也许它正在取消，因为它正在加载另一个页面。

我想也许我可以只使用 php 'header' 命令，但这似乎不起作用。它没有带我到页面。上面的脚本将我带到页面，但它没有到达 php 脚本。如果我取出 window.location.href php 脚本会运行，但它显然不会将我带到页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:47:06.687

由于 ajax 请求是异步进行的，所以需要使用回调，否则在请求完成之前就会发生重定向。在你的情况下，它会是这样的：

```
var mytext = document.getElementById('textfield').value;
ajaxRequest.onreadystatechange = callback;
ajaxRequest.open("GET", "vote.php?mytext=" + encodeURIComponent(mytext), true);
ajaxRequest.send(null); 

function callback() {
   if (ajaxRequest.readyState === 4 && ajaxRequest.status === 200) {
      window.location.href = "thanksforvoting.htm";
   }
} 
```

MDN 有一个很好的 Ajax[入门指南](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)。

# android - 来自低功耗蓝牙 (BLE) 标签的 RSSI？

> ID：15493978
> 
> 赞同：0
> 
> 时间：2013-03-19T07:43:20.803
> 
> 标签：android, bluetooth, bluetooth-lowenergy, rssi

我正在编写一个应用程序（在 android 上）从蓝牙设备读取 RSSI，以使用 rssi 指纹识别进行位置识别。我有用于从非 BT4.0/BLE 的非配对和可发现蓝牙设备读取 RSSI 的工作代码。我想知道如果我得到一些基于 BLE 的标签（例如stick-n-find），我是否只能通过将自己（准确地说是我的 android 手机）置于 bt-discovery 模式来读取它们的 RSSI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:17:17.883

在 BT Low Energy 中，角色互换了。Stick-n-find 将是广告它的服务名称或其他信息。当您从您的 iOS APP 收到该广告时，您将获得该广告的 RSSI 值。

所以只需执行以下操作：

```
@property (strong, nonatomic) CBCentralManager *CM;

#define SERVICE_ID_STR     "4d1dc300-424d-13e2-a661-0002a55dc51b"

self.CM = [[CBCentralManager alloc] initWithDelegate:self queue:nil];
NSDictionary *scanOptions = [NSDictionary dictionaryWithObject:[NSNumber
   numberWithBool:NO] forKey:CBCentralManagerScanOptionAllowDuplicatesKey];
CBUUID *peripheralUUID = [CBUUID UUIDWithString:@SERVICE_ID_STR];
[self.CM scanForPeripheralsWithServices:[NSArray arrayWithObject:myUUID]
   options:scanOptions]; 
```

然后当它从外围设备听到广告包时，你会得到

```
- (void)centralManager:(CBCentralManager *)central 
    didDiscoverPeripheral:(CBPeripheral *)peripheral 
    advertisementData:(NSDictionary *)advertisementData
    RSSI:(NSNumber *)RSSI { 
```

你在哪里得到RSSI。

如果您只想在第一次听到外围设备时回调 didDiscoverPeripheral，则不要使用 ScanOptions

```
[self.CM scanForPeripheralsWithServices:[NSArray arrayWithObject:myUUID] options:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T18:59:03.793

据我所知，一些 Android 手机制造商可能包含 BLE 支持，但目前 Android 不直接支持（截至 4.2 Jellybean）。有关详细信息，请参阅[问题 33371](https://code.google.com/p/android/issues/detail?id=33371)。

看起来 BLE 可能会出现在[这个 Google Groups 讨论](https://groups.google.com/forum/m/#!msg/android-platform/CYtxCmtZ-WI/aIzBq7KbKVUJ)中的下一个 Android 版本中。

# python - Python iter() 中的 b'' sentinel 是什么意思？

> ID：15493981
> 
> 赞同：6
> 
> 时间：2013-03-19T07:43:26.827
> 
> 标签：python

假设我有一个返回一堆行的过程，我想对其进行迭代：

```
import subprocess

myCmd = ['foo', '--bar', '--baz']
myProcess = subprocess.Popen(myCmd, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
for myLine in iter(myProcess.stdout.readline, b''):
    print myLine 
```

[`iter()`](http://docs.python.org/2/library/functions.html#iter)在这个例子中，我将值传递给它的哨兵参数做`b''`什么？我想我自己理解`''`——我停止在空行上迭代——但我不知道是什么`b''`意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T07:45:35.443

在 python3 中，字符串是一个字节文字。在 python 2 中被忽略。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T08:32:44.337

我会尽力比我目前所读的更精确。（略有修改的版本）

Python 表示法`b'string'`表示支持它的 Python 版本中的字节字符串文字。[Python 2 的PEP 358](http://www.python.org/dev/peps/pep-0358/)引入了该表示法，作为向 unicode 支持迁移的一步。当前[2.6 的 Python 语法没有提到`b`prefix](http://docs.python.org/2.6/reference/lexical_analysis.html#string-literals)而[2.7 的 Python 语法确实提到了`b`prefix](http://docs.python.org/2.7/reference/lexical_analysis.html#string-literals)。但是，PEP 358 是为 Python 2.6 设计的，我见过的所有 Python 2.6 解释器都接受它。

随着向 Python 3 的迁移，字符串文字的*默认值*从*byte*更改为*unicode*。但是，引入该[`__future__`模块](http://docs.python.org/2.6/library/__future__.html)是为了简化迁移。下面说明了字符串文字的效果。

```
Python 2.6.6 (r266:84292, Dec 26 2010, 22:31:48) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 'abc'
'abc'
>>> b'abc'
'abc'
>>> from __future__ import unicode_literals
>>> 'abc'
u'abc'
>>> b'abc'
'abc' 
```

我希望我能激发以下陈述的有效性：

*   *在 Python 3 中，这表示一个字节文字*：是的，但在 Python 2 中至少从 2.6 版开始也是如此。
*   *这个符号在 Python 2 中被忽略*：*如果*你有一个已经支持它的 Python 2 版本并且*除非*你（或你看到的外部代码）导入`__future__` *并且只有*当你不关心与Python 3（*每个人都*应该考虑，并且通常针对第三方软件）。

在我看来，对 OP 问题的最短有效答案是：

*这是字符串文字的前缀，强制字节表示而不是 unicode 表示，在 Python 2.6 中引入，不会更改 Python 2 的 Python 默认值*`from __future__ import`（但如果可以看到，则值得关注）。

# ios - 委托协议/IBOutlet

> ID：15493993
> 
> 赞同：0
> 
> 时间：2013-03-19T07:44:37.733
> 
> 标签：ios, iboutlet, delegation

我基本上有一个带有委托协议的 UIView 子类（RRView）。RRViews 通过插座连接到实现委托协议的视图控制器以及委托。

我向代表询问其他信息的代码是这样实现的。

```
- (void)setDelegate:(id<RRViewDelegate>)delegate {
  if (_delegate != delegate) {
    _delegate = delegate;

    if (_delegate && [_delegate respondsToSelector:@selector(cornersForRRView:)]) {
        self.corners = [_delegate cornersForRRView:self];
    }

    if (_delegate && [_delegate respondsToSelector:@selector(cornerRadiusForRRView:)]) {
        CGFloat maxRadius = floorf(self.bounds.size.height/2);
        CGFloat radius = [_delegate cornerRadiusForRRView:self];
        self.cornerRadius = MIN(radius, maxRadius);
    }

    if (_delegate && [_delegate respondsToSelector:@selector(rotationTypeForRRView:)]) {
        self.type = [_delegate rotationTypeForRRView:self];
    }

    if (_delegate && [_delegate respondsToSelector:@selector(fontSizeForRRView:)]) {
        self.fontSize = [_delegate fontSizeForRRView:self];
        self.textFont = [UIFont fontWithName:self.textFont.fontName size:self.fontSize];
    }
  }
} 
```

我面临的问题是我有一堆 RRView，所以我尝试像这样区分它们，但插座尚未连接。

```
- (UIRectCorner)cornersForRRView:(RRView *)view  {
  if ([view isEqual:self.dimensionsInfoView]) {
    return UIRectCornerTopLeft | UIRectCornerTopRight;
  }
  else if ([view isEqual:self.oneHundredPercentInfoView]) {
    return UIRectCornerTopRight;
  }
  else if ([view isEqual:self.deviceApperanceInfoView]) {
    return UIRectCornerTopLeft;
  }
  else {
    return 0;
 } 
```

}

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:09:14.267

首先，您可以在这里安全地使用指针比较 -`view == self.dimensionsInfoView`而不是`[view isEqual:self.dimensionsInfoView]`. 您想检查引用是否包含相同的对象，而不是检查对象的内部状态。

此外，您不必检查委托是否为`nil`( `_delegate &&`)，这不是 Java，在`nil`委托上调用方法只会返回`NO`。

你的问题的答案很简单。

**选项1：**不要在xib中设置委托`viewDidLoad`，当`IBOutlets`已经连接时，将其设置在控制器中。

**选项 2：**不要在 中调用委托方法`setDelegate`，在其他方法中调用它们，例如`[UIView layoutSubviews]`.

**选项 3：**从委托中删除设置方法并直接在 中调用它们，`viewDidLoad`例如`[self.dimensionsInfoView setFontSize:10.0f]`;`[self.dimensionsInfoView setCorners:... withRadius:...]`

我肯定会选择选项 3。您对代表的处理过于复杂。为什么要为不变的东西调用委托方法？

# apache-flex - Flex 4：Flash Player 11 SWZ 文件缓存

> ID：15493994
> 
> 赞同：0
> 
> 时间：2013-03-19T07:44:50.500
> 
> 标签：apache-flex, flex4, flash-builder, mxml, flash

我使用**Flex 4.1**来创建我的应用程序，并减少 application.swf 的大小，**我将框架链接到 RSL**，这会产生一个小的 swf 文件。正如我所读到的关于 RSL 的内容，客户端将在第一时间下载 SWZ 文件并缓存它们以供使用，**但我遇到了 Flash Player 11 的问题，即 swz 文件没有被缓存并且应用程序每次都下载它们**。所以请指教，这与Flash Player的版本有关吗？

```
 these are the files Names textLayout_1.1.0.604.swz,textLayout.swc,framework_4.1.0.16076.swz,fra mework.swc
  here is how I added the links in the flex-config.xml.

 ===================================================================== ==========

<runtime-shared-library-path>
                <path-element>libs/textLayout.swc</path-element>
                <rsl-url>https://ibill.mobily.com.sa/Libs/textLayout_1.1.0.604.swz</rsl-url>
                <policy-file-url>https://ibill.mobily.com.sa/crossdomain.xml</policy-file-url>
                <rsl-url>textLayout_1.1.0.604.swz</rsl-url>
                <policy-file-url></policy-file-url>
      </runtime-shared-library-path>

<!-- OSMF SWC -->
<runtime-shared-library-path>
                <path-element>libs/osmf.swc</path-element>
                <rsl-url>https://ibill.mobily.com.sa/Libs/osmf_flex.4.0.0.13495.swz</rsl-url>
                <policy-file-url>https://ibill.mobily.com.sa/crossdomain.xml</policy-file-url>
                <rsl-url>osmf_flex.4.0.0.13495.swz</rsl-url>
                <policy-file-url></policy-file-url>
      </runtime-shared-library-path>

<!-- Framework SWC -->
      <runtime-shared-library-path>
                <path-element>libs/framework.swc</path-element>
                <rsl-url>https://ibill.mobily.com.sa/Libs/framework_4.1.0.16076.swz</rsl-url>
                <policy-file-url>https://ibill.mobily.com.sa/crossdomain.xml</policy-file-url>
                <rsl-url>framework_4.1.0.16076.swz</rsl-url>
                <policy-file-url></policy-file-url>
      </runtime-shared-library-path>

<!-- Spark SWC-->
         <runtime-shared-library-path>
                <path-element>libs/spark.swc</path-element>
                <rsl-url>https://ibill.mobily.com.sa/Libs/spark_4.1.0.16076.swz</rsl-url>
                <policy-file-url>https://ibill.mobily.com.sa/crossdomain.xml</policy-file-url>
                <rsl-url>spark_4.1.0.16076.swz</rsl-url>
                <policy-file-url></policy-file-url>
      </runtime-shared-library-path>

<!-- Sparkskins SWC-->
         <runtime-shared-library-path>
                <path-element>libs/sparkskins.swc</path-element>
                <rsl-url>https://ibill.mobily.com.sa/Libs/sparkskins_4.1.0.16076.swz</rsl-url>
                <policy-file-url>https://ibill.mobily.com.sa/crossdomain.xml</policy-file-url>
                <rsl-url>sparkskins_4.1.0.16076.swz</rsl-url>
                <policy-file-url></policy-file-url>
      </runtime-shared-library-path>

      <!-- RPC SWC -->
      <runtime-shared-library-path>
                <path-element>libs/rpc.swc</path-element>
                <rsl-url>https://ibill.mobily.com.sa/Libs/rpc_4.1.0.16076.swz</rsl-url>
                <policy-file-url>https://ibill.mobily.com.sa/crossdomain.xml</policy-file-url>
                <rsl-url>rpc_4.1.0.16076.swz</rsl-url>
                <policy-file-url></policy-file-url>
      </runtime-shared-library-path> 
```

=================================================

提前致谢。

# sql - 在 SQL Server 中组合两个 SP

> ID：15493997
> 
> 赞同：0
> 
> 时间：2013-03-19T07:45:17.403
> 
> 标签：sql, sql-server-2008, stored-procedures, redundancy

我有两个冗余代码的存储过程。SP 将根据从中选择的表而有所不同。我想结合这两个SP。请帮忙。

主要的SP是：

```
CREATE PROCEDURE [dbo].[spGetEmployeesBySearchString]            
-------------
-------------
@OtherListType_ID INT
@manager_employee_number VARCHAR(255)
-------------
-------------
DECLARE @IsGetFullTeamUnderManager bit=0
IF (@OtherListType_ID=3 AND @manager_employee_number IS NOT NULL)
    SET @IsGetFullTeamUnderManager = 1

IF (@IsGetFullTeamUnderManager=1)
BEGIN
    EXEC spFullTeamUnderManager <<Parameters>>
    RETURN
END

SELECT e.a,e.b,e.c,e.d,......
FROM Employee emp
INNER JOIN .....
WHERE .......... 
```

第二个存储过程是：

```
CREATE PROCEDURE [dbo].[spFullTeamUnderManager]            
-------------
-------------
-------------
SELECT e.a,e.b,e.c,e.d,......
FROM dbo.fnFullTeamUnderManager(@manager_employee_number) emp 
INNER JOIN .....
WHERE .......... 
```

在主 SP 中，基于 @OtherListType_ID 的值，我调用了第二个 SP。但是两个存储过程中的 select 语句、连接条件和 where 条件保持不变。我需要删除多余的代码。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:07:17.117

通常，您不能在`FROM`子句中对行集源进行参数化。您可以执行以下操作，并希望优化器足够聪明以正确执行此操作：

```
SELECT e.a,e.b,e.c,e.d,......
FROM (
 SELECT * FROM dbo.fnFullTeamUnderManager(@manager_employee_number) WHERE @IsGetFullTeamUnderManager=1
 UNION ALL
 SELECT * FROM Employee WHERE @IsGetFullTeamUnderManager=0
) emp 
INNER JOIN .....
WHERE .......... 
```

如果函数和`Employee`不共享完全相同的列，您将不得不明确命名公共列而不是使用`SELECT *`- 有些人可能坚持认为您应该这样做，但今天我处于“完成”的心情.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:53:15.680

```
CREATE PROCEDURE [dbo].[spGetEmployeesBySearchString]            
-------------
-------------
@OtherListType_ID INT,
@manager_employee_number VARCHAR(255)
-------------
-------------
DECLARE @IsGetFullTeamUnderManager bit=0
IF (@OtherListType_ID=@FullTeam AND @manager_employee_number IS NOT NULL)
    SET @IsGetFullTeamUnderManager = 1

IF (@IsGetFullTeamUnderManager=1)
BEGIN    
    SELECT e.a,e.b,e.c,e.d,......
    FROM dbo.fnFullTeamUnderManager(@manager_employee_number) emp 
    INNER JOIN .....    
    WHERE ..........    
END

SELECT e.a,e.b,e.c,e.d,......
FROM Employee emp
INNER JOIN .....
WHERE .......... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T08:06:47.857

```
CREATE PROCEDURE [dbo].[spGetEmployeesBySearchString]            
-------------
-------------
@OtherListType_ID INT
@manager_employee_number VARCHAR(255)
-------------
-------------

-- Me
DECLARE @SQL varchar(3000);
DECLARE @TableName varchar(30);
SET @TableName = 'Employee ';

DECLARE @IsGetFullTeamUnderManager bit=0
IF (@OtherListType_ID=3 AND @manager_employee_number IS NOT NULL)
    SET @IsGetFullTeamUnderManager = 1

IF (@IsGetFullTeamUnderManager=1)
BEGIN
    SET @TableName = 'dbo.fnFullTeamUnderManager(' + @manager_employee_number +') ';
END

SET @SQL = 'SELECT e.a,e.b,e.c,e.d
            FROM ' + @TableName + ' emp
            INNER JOIN .....
            WHERE a = ' + convert(varchar(4), @aNumber);

EXEC(@SQL); 
```

**您还应该知道执行动态 sql 语句的更好方法。**

使用`EXEC SP_EXECUTESQL(@SQL)`而不是`EXEC(@SQL)`更有可能促进查询计划重用和提高安全性。此外，使用这种方法可以确保传递给查询的数据值是正确的数据类型。

**更多阅读** [在 SQL Server 中执行动态 SQL 命令](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)