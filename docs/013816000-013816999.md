# StackOverflow 问答 13816000-13816999

# c++ - 在不平滑的情况下以 2 的幂增加图像大小

> ID：13816000
> 
> 赞同：0
> 
> 时间：2012-12-11T08:03:40.463
> 
> 标签：c++, qt, imagemagick, image-resizing

在 C++ 中，或通过 Linux shell 脚本，我如何在没有任何插值的情况下将图像放大 2 次方（例如，将 40x60 图像放大到 80x120），因此它会呈现出清晰的像素化外观，如下图所示。每当我使用 Magick++'s`Image`或 Qt's执行此操作时`QImage`，它都会对生成的图像进行平滑处理。

![像素化图像](../Images/72434b8b8be080835d36b86f45971e81.png)

PS：已经有一个[关于](https://stackoverflow.com/questions/936210/how-to-resize-image-in-c-sharp-without-smoothing)C# 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:06:33.387

您可以使用 OpenCV[`resize()`](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html?highlight=resize#resize)来执行此操作。您应该使用 INTER_NEAREST 插值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:14:06.213

由于您安装了 ImageMagick，因此 shell 脚本友好选项将是`mogrify -scale 200% image.png`这在缩小时使用线性重采样，在放大时使用最近邻。

如果首选 C++，则该`scale`方法的`Image`工作方式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T19:50:05.103

在 Qt 中，如果您使用转换方法的默认参数（[`scaled`即](http://doc.qt.digia.com/qt/qimage.html#scaled).`QImage``Qt::FastTransformation`

# github - git 项目中的 Symfony 供应商

> ID：13816010
> 
> 赞同：1
> 
> 时间：2012-12-11T08:04:12.840
> 
> 标签：github, symfony-2.1, vendor

我有一个 Symfony 项目，它总是在一个 svn 项目中。现在我正在尝试迁移到 git（在 github 上）。

问题是

```
git status 
```

总是告诉我有修改和新的文件/文件夹，我似乎无法提交......

当我

```
git add 
```

这些文件/文件夹，然后提交只会告诉我我没有什么要提交的，并且这些文件/文件夹仍然没有被跟踪？

我的 Symfony 项目中的所有其他内容都已提交并推送文件，它只是 vendor 文件夹中的某些内容，我似乎无法继续。

我怎样才能解决这个问题？

ps：我也无法让作曲家更新我的供应商。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:42:21.387

> 我想这与供应商内部也有 .git 文件夹的事实有关

我确认**嵌套的 git repo**不会很好地响应 git 命令，如果该嵌套的 repo 已经考虑到所述文件已提交。
或者，至少，您应该在该嵌套存储库中添加这些文件（而不是来自父目录）。

但是，在父目录中完成的 git status 应该忽略该嵌套 repo 的内容。请参阅[如何使顶级 git 跟踪另一个子目录 git 下的所有文件](https://stackoverflow.com/questions/3115249/how-to-make-top-level-git-to-track-all-the-files-under-another-sub-directory-git)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:53:03.287

我的最佳做法是完全忽略该目录，并在[每台](http://getcomposer.org)开发机器上使用和`vendors`安装所有供应商捆绑包（因此，您需要将这些文件添加到您的存储库中！）`composer.json``composer.lock`

# c - 按位移位步骤

> ID：13816015
> 
> 赞同：-1
> 
> 时间：2012-12-11T08:04:32.367
> 
> 标签：c, bit-shift

我对按位运算有一些疑问，我们将不胜感激。

1.)

```
i = 0x000a;
printf( "2: %x %x %x\n", i, i << 1, i << 2 );
i = 0x0010;
printf( "3: %x %x %x\n", i, i >> 1, i >> 2 ); 
```

2)

```
unsigned int i = 1;
printf( "1: %x %x %x\n", i, ~i, ~~i );
printf( "2: %x %x \n", i, ( 0x0100 & ( 1 << 8 ) ) >> 8 );
printf( "3: %x %x \n", i, 0x0100 ^ ( 1 << 8 ) );
printf( "4: %x %x \n", i, 0x0100 | ( 1 << 4 ) ); 
```

我有这些问题的答案，但不明白它是如何工作的。任何人都可以逐步解释它们吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:18:00.633

`x<<SOME_VALUE`将 x SOME_VALUE 次的所有位向左移动。因此`0x000a=1010(2)`，当左移 1 位时将变为`10100`or `0x0014`。将此数字再次向左移动会将其乘以 2 或产生 0x0028。右移(>>)的逻辑类似，这里不再解释。我认为这解释了您在评论中的要求。

`~`否定整数的所有位，因此所有 0 位都变为 1，反之亦然。或（在 32 位计算机上）`~0x0001(1(2))`也是如此。双重否定产生输入。`fffffffe``11111111111111111111111111111110(2)`

`&`是按位“与”运算符并且是二元运算符 - 它需要两个操作数，并且当且仅当两个数字在该位置都有 1 时，结果数字在给定位置将具有 1。

`^`or xor 是异或运算符，也是二元运算符。**在这里，当且仅当其中一个**操作数在给定位置有 1 时，您才会有 1 。

最后是'|' 是逻辑或二元运算符，并且在给定位置具有 1 当且仅当它**的至少一个**操作数在该位置具有 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:50:44.440

我可以对您的查询给出的最简单的解释是，

当您将右移运算符应用 n 位时，结果将为 /(2^n)，当您将左移运算符应用 n 位时，结果将为 *(2^n)。

例如，

(10 << 1) 将给出结果 20， (10 >> 1) 将给出结果 5

# extjs - 如何更改 Ext.ProgressBar 的高度

> ID：13816016
> 
> 赞同：2
> 
> 时间：2012-12-11T08:04:35.773
> 
> 标签：extjs, extjs4, extjs4.1

我有一个简单的`Ext.ProgressBar`，需要加倍它的高度，它可以工作但没有缩放进度图像，只是外框。我想好吧，也许它很小并且无法缩放，但它的高度> 800px（sencha原始图像）。

那么如何做到这一点呢？

这是配置

```
{
    xtype: 'progressbar',
    text: 'Some text',
    border: 1,
    height: 40
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:25:59.403

进度条的高度在样式定义中设置。您可以通过更改`.x-progress-bar`css 类来更改高度。在现代浏览器（例如 Chrome）中，您需要做的就是更改`height`属性，因为背景图像被定义为渐变。例子：

```
// height of bar
.x-progress-bar {
    height: 38px;
}
// height of text box
.x-progress-text {
    height: 38px;
    line-height: 38px;
} 
```

工作样本：http: [//jsfiddle.net/D2QYN/2/](http://jsfiddle.net/D2QYN/2/)

另一种方法是将处理程序附加到`render`事件和`height`未垂直缩放的子元素集。示例处理程序：

```
listeners: {
    render: function(sender) {
        var height = sender.bar.parent().getHeight(true); // content height
        sender.bar.setStyle('height', height + 'px');
        sender.textEl.setStyle('height', height + 'px');
        sender.textEl.setStyle('line-height', height + 'px');
    }
} 
```

工作样本：http: [//jsfiddle.net/D2QYN/3/](http://jsfiddle.net/D2QYN/3/)

# facebook - 将 Servlet 部署到 Tomcat 主机

> ID：13816017
> 
> 赞同：1
> 
> 时间：2012-12-11T08:04:38.777
> 
> 标签：facebook, jsp, tomcat, servlets

我创建 Facebook JSP 应用程序。我使用**Restful Java 客户端**Web 服务。并创建了 .java 文件。在这个文件中有 Servlet。但无法将其部署到主机中。我部署了关注

```
WEB-INF  
    -classes  
       -facebook     
               -socialnetworkingservice 
                      -facebookresponse  
                                  ......and many classes     
        -META-INF  
        -org  
          -my  
               -facebook  
                   -client  
                        FacebookClient$FacebookCallbackServlet.class  
                        FacebookClient$FacebookLoginServlet.class      
                        FacebookClient.class

    -lib
          ..lib files
    -web.xml 
```

## web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>FacebookClient$FacebookLoginServlet</servlet-name>
        <servlet-class>org.my.facebook.client.FacebookClient$FacebookLoginServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>FacebookClient$FacebookCallbackServlet</servlet-name>
        <servlet-class>org.my.facebook.client.FacebookClient$FacebookCallbackServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>FacebookClient$FacebookLoginServlet</servlet-name>
        <url-pattern>/FacebookLoginServlet</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>FacebookClient$FacebookCallbackServlet</servlet-name>
        <url-pattern>/FacebookCallbackServlet/</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

META-INf（我觉得不重要）

我编译 localhost 并拥有 (MyFbFriend.war)

我得到这个错误

“未找到

在此服务器上未找到请求的 URL /FacebookLoginServlet。

此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:10:57.247

尝试

```
http://localhost:8080/MyFbFriend/FacebookLoginServlet/ 
```

战争的名称给出了应用程序的上下文

# jquery - Jquery UI功能第一次打开工作但不是第二次

> ID：13816018
> 
> 赞同：1
> 
> 时间：2012-12-11T08:04:49.377
> 
> 标签：jquery, user-interface, dialog

使用 jquery ui 对话框的 Open 属性，我正在初始化两个变量。

```
 $('<div><b><center>'+ text +'</center></b></div>').dialog({
                            title: '<b>User(s) with a similar name</b>', 
                            modal: true,
                            autoOpen: true,
                            height: 400, 
                            width: 400,
                            resizable: false,
                            open: function() {
                                var show_per_page = 5;
                                var number_of_items = $('#all-tabs').children().size(); 
                                alert(number_of_items+' '+show_per_page);
                            },
                            buttons: {
                                "Close": function(){
                                    //alert($(this).attr('class'));
                                    number_of_items = 0;
                                    $(this).dialog('close');
                                    return false;
                                }
                            }
                        }); 
```

但是`$('#all-tabs').children().size()`即使在我使用关闭按钮关闭对话框之后，对话框仍保留 for 返回的值，并且`$('#all-tabs').children().size()`应该不同。我必须刷新页面以重置变量。如何在每次对话框加载时重置变量并重新初始化它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:11:10.367

每次打开对话框时，您的代码都会重新计算子项的数量。我怀疑您只想要可见孩子的数量，在这种情况下尝试以下操作：

```
open: function() {
  var showPerPage = 5;
  var numberOfItems = $('#all-tabs').children(':visible').length; 
  console.log(numberOfItems + ' ' + showPerPage);
} 
```

# php - PHP/AJAX | POST 数据未被获取？

> ID：13816019
> 
> 赞同：0
> 
> 时间：2012-12-11T08:04:53.613
> 
> 标签：php, ajax, twitter-bootstrap

我有一个使用单击来编辑 AJAX POST 请求的插件，我已经编写了所有脚本，但是当我去测试它时，它从未改变我试图修改的数据库值，所以我改变了你的 URL设置为将请求报告到我的谷歌控制台的函数，它返回以下内容，

```
Object {name: "", value: "derp@derpp.com", pk: 23} 
```

这是我尝试 AJAX 的 PHP 脚本，

```
<? $query = " 
    UPDATE users SET email = '".$_POST['value']."' WHERE id = '".$_POST['pk']."'
";      
try 
{
    $stmt = $db->prepare($query); 
    $stmt->execute(); 
} 
catch(PDOException $ex) 
{  
    die("Failed to run query: " . $ex->getMessage()); 
} 
$rows = $stmt->fetchAll();
?> 
```

我的总体问题是 AJAX 没有更改内容，我手动测试了脚本并且一切正常。

**编辑**

我不是手动执行 AJAX 请求，它是从一个名为 X-Editable 的插件中使用的。可以在[此处找到文档](http://vitalets.github.com/x-editable/docs.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:17:51.733

您是否检查过您发送的数据实际上是在发布请求中。我会检查我是否使用了正确的 jquery 发布请求，例如 **$.ajax({ type: 'POST', url: url, data: data, success: success, dataType: dataType });**

仅发送帖子数据无济于事。此外，如果您没有传递任何虚拟值，例如 javascript.getTime 函数，那么使用它是一个好主意，因为有时 xmlhttp 对象不会将其识别为新查询。因此，您的网址应该是“ **url:'dummy='+dt.getTime()+'&var1='+$textbox1.val()** ”希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:20:12.597

如果在 php 中使用 $_POST 函数，则 post 数据类型必须是 application/x-www-urlencoded 。

```
HTTP  /yourURI  HTTP/1.0
Content-Length:xxx
Content-Type:application/x-www-urlencoded
Connection:clsoe

name=&value=derp%40derpp.com&pk=23 
```

无法将对象作为正文发布到服务器...

```
HTTP  /yourURI  HTTP/1.0
Content-Length:xxx
Content-Type:application/json
Connection:clsoe

{name: "", value: "derp@derpp.com", pk: 23} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-11T08:34:24.293

修改后的查询......如果你有一个基于整数的值，它不能被引用；

```
$query = "UPDATE users SET email = '".$_POST['value']."' WHERE id = ".$_POST['pk']; 
```

或使用字符串替换

```
$query = "UPDATE users SET email = '{$_POST['value']}' WHERE id = {$_POST['pk']}"; 
```

# ios - iTunes Sync“MyAppName”安装失败-IPA 文件

> ID：13816021
> 
> 赞同：6
> 
> 时间：2012-12-11T08:05:05.257
> 
> 标签：ios

最近，我提交了我的应用程序并被接受。但是，我构建的功能与应用程序版本不同。然后我联系了应用程序开发人员，他们告诉我如下：

```
"To test that build, "Distribute…" it as an IPA, from the Organizer window in
Xcode. Then install the IPA by dragging it onto the iTunes icon on the dock
and syncing with your device." 
```

现在，我创建了 IPA 并将此文件拖放到 Itunes 上，然后拖放到我的 iphone 上，它显示无法同步错误！我不知道我做错了什么？有什么指导吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T09:06:13.880

尝试从 Organizer 而不是 iTunes 安装 IPA。为此，打开 Organizer from: `Xcode > Window > Organizer`，然后`Applications`在您的设备下选择并单击`+`按钮以添加 IPA。

# sql - 从另一个表的许多行中创建 1 行

> ID：13816029
> 
> 赞同：4
> 
> 时间：2012-12-11T08:05:28.193
> 
> 标签：sql, sql-server, sql-server-2008, join, pivot

我有一个 MSSQL 数据库，它在一个表中包含一个人的生物信息：

```
ID: Name : Age : Sex 
```

在另一个表格中，它保存了他们对以下许多问题的答案：

```
PersonID : QuestionID : Answer 
```

是否可以通过 MSSQLMSE 将所有这些显示到一条记录中，如下所示：

```
ID : Name : Age : Sex : Question1Answer : Question2Answer : Question3Answer : And so on? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T08:54:40.200

试试这个：

```
SELECT ID, name, age, sex, Question1answer, Question2answer
FROM
(
  SELECT 
    p.Id,
    p.Name,
    p.Age,
    p.sex,
    questionanswer = 'Question' + CAST(q.questionid AS VARCHAR(10)) + 'answer',
    q.Answer
  FROM Persons p 
  INNER JOIN Questions q ON p.Id = q.UserID
) t
PIVOT
(
  MAX(Answer)
  FOR questionanswer IN([Question1answer], [Question2answer])
 ) p; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/6c12f/31)

这会给你：

```
| ID |     NAME | AGE | SEX | QUESTION1ANSWER | QUESTION2ANSWER |
-----------------------------------------------------------------
|  1 |    Ahmed |  25 |   M |             Yes |              No |
|  2 | Mohammed |  30 |   M |              No |           Never |
|  3 |     Sara |  25 |   F |              No |           Never | 
```

**但是：**如果您想为每个用户的任意数量的问题动态地执行此操作，您可以这样做：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct 
                        ',' +
                        QUOTENAME('Question' + 
                                  CAST(questionid AS VARCHAR(10)) + 
                                  'answer')
                FROM questions
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'');

SET @query = 'SELECT ID, name, age, sex, ' + @cols +
             ' FROM
              (
                SELECT 
                  p.Id,
                  p.Name,
                  p.Age,
                  p.sex,
                  questionanswer = ''Question'' +
                                   CAST(q.questionid AS VARCHAR(10)) + 
                                   ''answer'',
                  q.Answer
                FROM Persons p 
                INNER JOIN Questions q ON p.Id = q.UserID
              ) t
              PIVOT
              (
                MAX(Answer)
                FOR questionanswer IN( ' + @cols + ') ) p '; 
```

## [SQL Fiddle 动态演示](http://www.sqlfiddle.com/#!3/6c12f/34)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:46:22.847

```
select ID,Name,Age,Sex,
(select top 1 Answer from Questions 
               where PersonId=prerson.id AND QuestionID=1) as Question1Answer,
(select top 1 Answer from Questions 
               where PersonId=prerson.id AND QuestionID=2) as Question2Answer,
(select top 1 Answer from Questions 
               where PersonId=prerson.id AND QuestionID=3) as Question3Answer

from prerson 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:48:12.710

sql server 中的 PIVOT 命令适合转置表结果，请参阅[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.100).aspx)

下面的脚本适用于一组预定义的问题。对于可变数量的列，此链接将有助于[http://blog-mstechnology.blogspot.com/2010/06/t-sql-pivot-operator-with-dynamic.html](http://blog-mstechnology.blogspot.com/2010/06/t-sql-pivot-operator-with-dynamic.html)。

```
 DECLARE @Person TABLE(
    ID INT,
    Name VARCHAR(50),
    Age INT,
    Sex CHAR(1)
)

DECLARE @Questions TABLE(
    ID INT,
    QuestionID INT,
    Question VARCHAR(200),
    Answer VARCHAR(200)

)

INSERT INTO @Person VALUES
(1,'Andrew',56,'M'),
(2,'Marge',65,'F')

INSERT INTO @Questions VALUES
(1,1,'Question1','Andrews Answer 1'),
(1,2,'Question2','Andrews Answer 2'),
(2,1,'Question1','Marge Answer 1'),
(2,3,'Question3','Marge Answer 3')

SELECT ID,Age,Name,Sex,
[1] AS 'Question1Answer',
[2] AS 'Question2Answer',
[3] AS 'Question3Answer'
FROM(
SELECT P.ID,P.Age,P.Name,P.Sex,Q.QuestionID,Q.Answer
    FROM @Person P
    INNER JOIN @Questions Q  ON Q.ID = P.ID
) Source
PIVOT
(
    MAX(Answer)
    FOR QuestionID IN ([1],[2],[3])
)AS PT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:52:45.097

试试这个：

```
SELECT
    ID,
    Name,
    Age,
    Sex,
    [1] AS Question1Answer,
    [2] AS Question1Answer,
    [3] AS Question1Answer
FROM
    (SELECT
    i.ID,
    i.Name,
    i.Age,
    i.Sex,
    q.QuestionId,
    q.Answer
    FROM
    dbo.Info AS i
    INNER JOIN dbo.Questions AS q on q.ID = i.ID) AS m
PIVOT
    (
        MAX(Answer) FOR QuestionId in ([1],[2],[3])
    ) as PivotTable 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T09:27:35.733

我认为这（[此处为 SQL Fiddle](http://sqlfiddle.com/#!3/43198/1)）是您正在寻找的。对于给定的人员 ID；

**注意** `p = Person Table`： `a = Answer Table`和`qId = QuestionId`

```
DECLARE @S VARCHAR(Max)
DECLARE @PersonId INT = 1

SELECT @S=ISNULL(@S+' : ','') + convert(varchar(10), id) +' : '+ name
             +' : '+ convert(varchar(10), age)+' : '+sex
FROM p 
WHERE p.Id = @PersonId

SELECT @S=ISNULL(@S+' : ','') + 
    'Question' + convert(varchar(10), qid) +'Answer : '+ answer

FROM a
WHERE pId = @PersonId

SELECT @S

--Following results is in one line 
--1 : X : 25 : M : Question11Answer : Here is my answer for 11 : 
--Question12Answer : Here is my answer for 12 : 
--Question101Answer : Here is my answer for 101 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T09:33:32.743

试试这个方法：（将数据库的兼容级别设置为90或更高）

```
begin 
Declare @MainSQL nVarchar(Max)
Declare @Param nVarchar(Max)
Declare @QId int
set @Param = ''
Declare curParam Cursor  For select Distinct QuestionID from Questions
open curParam
Fetch next from curParam into @QId 
While @@Fetch_Status = 0
Begin
    set @Param = @Param +'[' +convert(nVarchar,@QId ) + '],'
    Fetch next from curParam into @QId 
End
close curParam;
Deallocate curParam;
set @Param = left(@Param,len(@Param)-1)
Set @MainSQL  = 'Select ID,Name,Age,***
From
(select P.ID,Name,Age,
Q.QuestionID, Q.Answer From Person P Left outer join
Questions Q 
ON P.ID = Q.PersonID) S
Pivot
(Max(Answer) 
For QuestionID in(***)
) as Pvt'
Set @MainSQL  =replace(@MainSQL,'***',@Param);
--print @MainSQL

execute sp_executesql @MainSQL

End 
```

# php - 有用于 php 的 ToStringBuilder 吗？

> ID：13816031
> 
> 赞同：4
> 
> 时间：2012-12-11T08:05:36.467
> 
> 标签：php, tostring

为了[`toString()`](http://php.net/manual/en/exception.tostring.php)在 PHP 中快速编写好方法，我正在寻找类似[`ToStringBuilder`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html)java 类的东西。

**更新**：我不是在问如何使用或实施[`toString()`](http://php.net/manual/en/exception.tostring.php). 我在问一个像[`ToStringBuilder`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html)java这样的强大助手。`ToStringBuilder`可以节省大量时间，因为它可以通过自己的反射找出很多东西（例如集合、数组、嵌套类）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:09:48.517

PHP 并不真正需要`ToStringBuilder`; 在几乎所有情况下，为了调试目的，一个简单的`print_r()`或`var_dump()`将完成转储任何变量（包括对象）的工作。要获得更准确和可重现的表示，您可以使用`var_export()`. 例如：

```
class Test {
    private $x = 'hello';
    protected $y = 'world';
}

$t = new Test;

var_export($t);
var_dump($t);
print_r($t); 
```

输出：

```
Test::__set_state(array(
   'x' => 'hello',
   'y' => 'world',
))

object(Test)#1 (2) {
  ["x":"Test":private]=>
  string(5) "hello"
  ["y":protected]=>
  string(5) "world"
}

Test Object
(
    [x:Test:private] => hello
    [y:protected] => world
) 
```

两者都`var_export()`采用`print_r()`第二个参数来返回字符串表示，而不是打印它们的输出。`var_dump()`没有这个功能，所以你需要另一种方式：

```
ob_start();
var_dump($t);
$s = ob_get_clean();

echo "Object is $s\n"; 
```

也可以看看：[`print_r()`](http://www.php.net/print_r) [`var_dump()`](http://www.php.net/var_dump) [`var_export()`](http://www.php.net/var_export)

**旧答案**

根据我对 Java 实现的理解，这是一个非常简约的 PHP 端口，我发起了：

```
class ToStringBuilder
{
    private $o; // the object to build a string for
    private $h; // a hash of parameters

    public function __construct($obj)
    {
        $this->o = $obj;
        $this->h = array();
    }

    public function append($key, $value)
    {
        $this->h[] = "$key=$value";
        // you could also use this for a full representation of the PHP type
        // "$key=" . var_export($value, true)
        return $this; // make it chainable
    }

    // final serialization
    public function toString()
    {
        return get_class($this->o) . '@' . spl_object_hash($this->o) .
            '[' . join(',', $this->h) . ']';
    }

    // help method to avoid a separate $x = new ToStringBuilder() statement
    public function getInstance($obj)
    {
        return new self($obj);
    }
} 
```

这是您在自己的课程中使用它的方式：

```
class Person
{
    private $name;

    public function __construct($name)
    {
        $this->name = $name;
    }

    public function __toString()
    {
        // use ToStringBuilder to form a respresentation
        return ToStringBuilder::getInstance($this)
            ->append('name', $this->name)
            ->toString();
    }
}

$person = new Person("John Doe");
echo $person;
// Person@00000000708ab57c0000000074a48d4e[name=John Doe] 
```

序列化不是很精确，因为布尔值将用空字符串或`1`. 这可以改进:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:36:18.890

这是一个快速实现，与您链接的类似，但略有不同。输出非常相似[`var_export`](http://php.net/manual/en/function.var-export.php)（但不完全相同）并跨越多行：

```
<?php
class ToStringBuilder{
    private $str;

    public function __construct($my){
        $this->str = get_class($my) . "(\n";
    }

    public static function create($my){
        return new ToStringBuilder($my);
    }

    public function append($name, $var){
        $this->str .= "  " . $name . " => " . str_replace("\n", "\n  ", var_export($var, true)) . ",\n";
        return $this;
    }

    public function __toString(){
        return $this->str . ")";
    }
} 
```

演示：[http ://codepad.org/9FJvpODp](http://codepad.org/9FJvpODp)

* * *

要使用它，请参考以下代码：

```
class Person{
    private $name;
    private $age;
    private $hobbies;

    public function __toString(){
        return strval(ToStringBuilder::create($this)
                      ->append("name", $this->name)
                      ->append("age", $this->age)
                      ->append("hobbies", $this->hobbies)
                     );
    }

    public function __construct($name, $age, $hobbies){
        $this->name = $name;
        $this->age = $age;
        $this->hobbies = $hobbies;
    }
}

echo new Person("hello", 18, array("swimming", "hiking")); 
```

# r - 循环遍历属性向量以生成组合图

> ID：13816033
> 
> 赞同：3
> 
> 时间：2012-12-11T08:05:58.240
> 
> 标签：r, graph, attr, effects

下面是一些代码，它试图计算模型中每个预测变量的边际效应（使用[effects](http://cran.r-project.org/web/packages/effects/)包），然后绘制结果。为此，我正在循环对象的`"term.labels"`属性`glm` `terms`）。

```
library(DAAG)
library(effects)

formula = pres.abs ~ altitude + distance + NoOfPools + NoOfSites + avrain + meanmin + meanmax
summary(logitFrogs <- glm(formula = formula, data = frogs, family = binomial(link = "logit")))

par(mfrow = c(4, 2))
for (predictorName in attr(logitFrogs$terms, "term.labels")) {
    print(predictorName)
    effLogitFrogs <- effect(predictorName, logitFrogs)
    plot(effLogitFrogs)
} 
```

这根本不会产生图像。另一方面，明确说明预测变量名称确实有效：

```
effLogitFrogs <- effect("distance", logitFrogs)
plot(effLogitFrogs) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:47:48.727

尽管您调用了 function `plot()`，但实际上它调用了 function`plot.eff()`并且它是格子图，因此`par()`忽略了参数。一种解决方案是使用函数`allEffects()`然后`plot()`. 这将调用函数`plot.efflist()`。使用此功能，您不需要 for 循环，因为所有绘图都是自动制作的。

```
effLogitFrogs <- allEffects(predictorName, logitFrogs)
plot(effLogitFrogs) 
```

## 编辑 - 带有 for 循环的解决方案

有一个“丑陋”的解决方案可以与`for()`循环一起使用。为此，我们还需要 package `grid`。首先，将行数和列数设为变量（现在它仅适用于 1 或 2 列）。然后 `grid.newpage()`设置`pushViewport()`图形窗口。

预测器名称存储在循环外的向量中。使用函数`pushViewport()`和`popViewport()`所有绘图都放在同一个图形窗口中。

```
 library(lattice)
  library(grid)

  n.col=2
  n.row= 4 
  grid.newpage()      
  pushViewport(viewport(layout = grid.layout(n.row,n.col)))

  predictorName <- attr(logitFrogs$terms, "term.labels")

  for (i in 1:length(predictorName)) {
    print(predictorName[i])
    effLogitFrogs <- effect(predictorName[i], logitFrogs)
    pushViewport(viewport(layout.pos.col=ceiling(i/n.row), layout.pos.row=ifelse(i-n.row<=0,i,i-n.row)))
    p<-plot(effLogitFrogs)
    print(p,newpage=FALSE)
    popViewport(1)
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:23:21.517

添加`print`到您的循环中解决问题。

```
 print(plot(effLogitFrogs)) 
```

`plot`call `plot.eff`，它创建绘图而不打印它。

`allEffects`生成一个类型的对象`eff.list`。当我们尝试绘制这个对象时，它会调用 `plot.efflist`打印绘图的函数，因此无需调用 print 之类的`plot.eff`。

# ajax - JSF 2.0：从渲染组件到托管 bean 故障的 Ajax 调用

> ID：13816035
> 
> 赞同：0
> 
> 时间：2012-12-11T08:06:18.063
> 
> 标签：ajax, jsf-2, listener

我正在使用 JSF2.0，其中我根据该页面上的用户活动使用 ajax 渲染一组组件。这工作正常但是，在组件被渲染后，我正在根据此渲染组件中的用户活动再次执行 ajax 调用这是我的 ajax 调用失败的地方。我在两种情况下都做了相同的实现，但不知道为什么会失败。有人可以帮我找出错误吗？

以下是代码：

第一个ajax调用：

```
 <h:commandLink id="addMultiple" value="Add" >                  
<f:ajax execute="addMultiple" render="additionalField " listener="#{Bean.doAddMultiple}"/>
</h:commandLink> 
```

渲染组件：

```
 <h:panelGroup id = "additionalField"   > 
 <h:outputText  value="New Field:"  rendered="#{Bean.multiple eq 'true'}" />
 <h:inputText style="width:10%" value="#{Bean.Number}"  rendered="#{Bean.multiple eq 'true'}" />
<h:commandButton id="add" value = "Add"  rendered="#{Bean.multiple eq 'true'}">
<f:ajax event="click" execute="add" render="textBoxes" listener="#{Bean.doaddTextboxes}"/>  
</h:commandButton>
</h:panelGroup> 
```

上面的组件渲染得很好。我有相同形式的“textBoxes”组件以及将 AJaxBehaviour 事件作为参数的托管 bean 方法。但是这里的问题是甚至没有触发第二个 AJAX 调用。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:08:53.897

将其更改为`@ViewScoped`，通常 ajax 最好使用 atlesat 完成`@ViewScoped`...导致在每次提交时创建 bean 的新实例...

还要看看这个[JSF - Ajax 调用 - 这段代码有什么问题？](https://stackoverflow.com/questions/4292330/jsf-ajax-call-what-is-it-wrong-on-this-code/4294096#4294096)这[就是@ViewScoped 的好处和陷阱](http://balusc.blogspot.co.il/2010/06/benefits-and-pitfalls-of-viewscoped.html)

另外，看看**BalusC**和**Arjan Tijms**在这里的答案 JSF - [Can @PostConstruct block setter method by using an ajax call?](https://stackoverflow.com/questions/4291849/jsf-can-postconstruct-block-setter-method-by-using-an-ajax-call)

# arrays - 将数组中的值与公差匹配

> ID：13816036
> 
> 赞同：0
> 
> 时间：2012-12-11T08:06:26.050
> 
> 标签：arrays, perl

我正在尝试清除数组中的重复值，我通过“List::MoreUtils uniq/distinct”函数成功地完成了这项工作。

但是，我也想将那些落在给定容差范围内的值计算为重复值，比如 +-5（我认为容差有时也称为“delta”）。

例如，如果 588 是数组中的一个值，但 589 也是如此，因为差异在 5 的容差范围内，则 589 会启动。

如果没有对数组进行一些讨厌/昂贵的交叉检查，有没有一种优雅的方法来做到这一点？

**编辑：** ikegami 在我的问题中引起了我的注意，我有点难以理解这个问题。不过，我想我已经解决了。

```
[500,505,510,515,525,900] 
```

如果您尝试匹配整个数组中的值，您应该得到：

```
[500,510,525,900] 
```

它命中 505，将其视为非唯一，将其从数组中删除，然后由于缺少 505 而将 510 视为新唯一，依此类推。我想这就是我概述我最初问题的方式，但经过反思，它似乎是一个无用且相当随意的数据集。

我真正想要的是以下比赛：

```
[500,900] 
```

它代表一组彼此相差 5 以内的数字，同时也发现了 900 值的巨大差异。这似乎是比前者更有用的信息，而且似乎 perreal 的回答让我很接近。很抱歉造成混乱，非常感谢 ikegami 和 perreal 强迫我澄清。

**编辑 2** 更好的匹配是：

```
[510,900] 
```

510，是所有连续 +-5 值的中位数。

但是，我认识到现在我们严重偏离了我原来的问题，所以我很高兴能回答我的 EDIT 1 澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:03:25.250

这是一个看似复杂的问题，因为数据不仅必须组织成组，而且如果看到属于多个组的新数据点，则必须将这些组组合起来。

该程序似乎可以满足您的需求。它保留了一个数组列表`@buckets`，其中每个元素都包含到目前为止看到的所有值，这些值在彼此`TOLERANCE`之间。扫描此列表以查看每个值是否落在已经存在的最大值和最小值的范围内。该值所属的组的索引存储在 中`memberof`，并且该数组中将始终存在零、一或两个条目。

由 指定的所有组`@memberof`都从 中删除`@buckets`，与新数据值组合在一起，排序并替换为列表中的新组。

最后，`@buckets`数组被转换为中值列表，排序和显示。我曾经`Data::Dump`在将它们聚合到它们的中值之前显示组的内容。

`510, 900`要从列表中生成所需的输出，必须增加`500, 510, 525, 900`for 的值，以便组合相差 15 或更小的值。`TOLERANCE`

```
use strict;
use warnings;

use constant TOLERANCE => 5;

my @data = qw/ 500 505 510 515 525 900 /;

my @buckets;

for my $item (@data) {

  my @memberof;
  for my $i (0 .. $#buckets) {
    if ($item >= $buckets[$i][0] - TOLERANCE and $item <= $buckets[$i][-1] + TOLERANCE) {
      push @memberof, $i;
    }
  }

  my @newbucket = ($item);
  for my $i (reverse @memberof) {
    push @newbucket, @{ splice @buckets, $i, 1 };
  }

  push @buckets, [ sort { $a <=> $b } @newbucket ];
}

use Data::Dump;
dd @buckets;

@buckets = sort { $a <=> $b } map median(@$_), @buckets;
print join(', ', @buckets), "\n";

sub median {

  my $n = @_;
  my $i = $n / 2;

  if ($n % 2) {
    return $_[$i];
  }
  else {
    return ($_[$i-1] + $_[$i]) / 2;
  }
} 
```

**输出**

```
([500, 505, 510, 515], [525], [900])
507.5, 525, 900 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:13:56.573

隔离形成链的样本，每个样本都在下一个的容差范围内，然后从该组中选择一个。

```
sub collapse {
   my $tol = shift;

   my @collapsed;
   while (@_) {
      my @group = shift(@_);
      while (@_ && $group[-1] + $tol >= $_[0]) {
         push @group, shift(@_);
      }

      push @collapsed, choose_from(@group);
   }

   return @collapsed;
}

say join ',', collapse(5 => 500,505,510,515,525,900); 
```

那么你如何选择呢？好吧，你可以返回平均值。

```
use List::Util qw( sum );

sub choose_from {
   return sum(@_)/@_;
}

# Outputs: 507.5,525,900 
```

或者你可以返回中位数。

```
use List::Util qw( sum );

sub choose_from {
   my $median;
   if (@_ % 2 == 0) {
      my $avg = sum(@_)/@_;
      my $diff0 = abs( $_[ @_/2 - 1 ] - $avg );
      my $diff1 = abs( $_[ @_/2 - 0 ] - $avg );
      if ($diff0 <= $diff1) {
         return $_[ @_/2 - 1 ];
      } else {
         return $_[ @_/2 - 0 ];
      }
   } else {
      return $_[ @_/2 ];
   }
}

# Outputs: 505,525,900 
```

# jsp - 在struts中获取bean

> ID：13816040
> 
> 赞同：1
> 
> 时间：2012-12-11T08:06:43.420
> 
> 标签：jsp, struts, jstl

我是 struts 新手，我在当前项目中看到了以下代码

```
<logic:equal name="USER" property="readOnlyRole"  value="false" > 
```

**USER**在`name="USER"`bean 对象中吗？上面的代码意思**`USER.isReadOnlyRole`**对吗？

我想在这里实现一个**OR**条件，我将如何针对上述条件执行此操作。我知道我可以使用`jstl choose`标签。以下代码是否正确替换了上面的代码？

```
<c:choose>
    <c:when test="${USER.isReadOnlyRole == 'false'}">
       False
    </c:when>
    <c:when test="${USER.isReadOnlyRole == 'true'}">
        True
    </c:when>

</c:choose> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:28:55.113

你好桑迪，

```
 <logic:equal name="USER" property="readOnlyRole"  value="false" > 
```

没错，上面的代码检查了***USER bean 的 readOnlyRole 属性的值是否***与***false***相等。

但是，使用 c 标记的第二个代码有很小的变化。只需将 User.isReadOnlyRole 替换为 User.readOnlyRole。应该是`<BEAN NAME>.<PROPERTY NAME>`。您还可以使用*eq*来检查相等，*ne*来检查不相等等（您也可以使用 ==。）

```
<c:choose>
    <c:when test="${USER.readOnlyRole eq false}">
       False
    </c:when>
    <c:when test="${USER.readOnlyRole eq true}">
        True
    </c:when>
</c:choose> 
```

希望能帮助到你。

# android - android: 如何在 achartengine 中设置 pan 的限制？

> ID：13816041
> 
> 赞同：1
> 
> 时间：2012-12-11T08:06:58.480
> 
> 标签：android, achartengine, pie-chart

当启用平移时，我在我的饼图活动中使用图表库 Achartengine 中的饼图，可以将饼图拖动到无穷大，我如何限制它的平移边距。如何实际限制应该启用平移的维度。

任何帮助都将是最重要的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:36:03.660

您只能为 XYCharts 设置平移限制。对于饼图，您不能这样做。

# javascript - 如何检测移动浏览器是否会显示“本机”下拉控件？

> ID：13816043
> 
> 赞同：16
> 
> 时间：2012-12-11T08:07:23.373
> 
> 标签：javascript, browser-feature-detection

我想检查浏览器是否会显示特殊的“本机”样式下拉列表（例如 iPhone 和 iPod），而无需专门检查浏览器名称。是否可以在不按名称查看用户代理的情况下以更通用的方式检查该功能？

我想这样做以确定是否呈现标准或更增强的下拉控件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-24T22:14:01.813

如果没有一个非常糟糕的解决方案，我不相信这实际上是可能的。我敢打赌，最好的方法就是检测设备，因为几乎所有移动浏览器都使用本机 ddl 来显示选项。

这可以通过使用[Modernizr](http://modernizr.com/)的媒体查询和触摸检测来实现：

```
if (Modernizr.touch && Modernizr.mq('only screen and (max-width: 768px)') {
     //it is a mobile / tablet device
} 
```

或者使用常规的 CSS 媒体查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-27T16:15:08.383

我对这个答案有 90% 的把握：不。

您正在寻找检测您是否在一个看起来`weird`但您是`weird`主观定义的浏览器上。用户 Reda 的回答是正确的，但它违反了您的部分问题（不是按名称识别浏览器）。我的观点是，您需要按名称识别浏览器，因为您的限定词是主观的，因此您不会找到针对它的 JS/CSS 测试。

浏览器可以完全控制它们显示的下拉菜单。大多数与他们在这些下拉组件上的 CSS 实现不一致。没有标准说浏览器需要在应用程序级别公开有关下拉列表的任何信息。

要影响您想要的内容，您需要找到您不喜欢其下拉控件的浏览器并将它们列出，并通过 Modernizr 或其他此类技巧来定位它们。不幸的是，这违反了你的问题的意图，所以我认为你的实际问题的答案是......不，对不起。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-27T13:17:02.133

您可以检查外观 css 属性

```
 -webkit-appearance: none;
  -moz-appearance:    none;
   appearance:        none; 
```

如果它不是“无”，那么您的输入具有原生样式。

您可以在此处找到外观的可能值： [https](https://developer.mozilla.org/en-US/docs/Web/CSS/-moz-appearance) ://developer.mozilla.org/en-US/docs/Web/CSS/-moz-appearance和此处[http://trentwalton.com/2010/07/14/ css-webkit-外观/](http://trentwalton.com/2010/07/14/css-webkit-appearance/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T11:48:24.537

我目前正在检查是否存在，`window.orientation`它似乎可以为 android 和 ios 完成这项工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-24T06:03:30.883

当我阅读这个问题时，我想到了一个肮脏的解决方案。只是一个猜测，但也许有帮助：

将您的本机元素放入 HTML 中，并尝试使用该`elementFromPoint`函数在 JavaScript 中获取它。（[MDN链接](https://developer.mozilla.org/de/docs/Web/API/Document/elementFromPoint)）

如果你没有得到任何元素或者返回的元素不是你的原生元素，你就知道它不会显示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-09T21:10:32.283

尝试这样的事情

```
 if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
        $('#SOMEselectpicker').selectpicker('mobile');
    } 
```

# php - PHP 警告 - 无法初始化模块

> ID：13816051
> 
> 赞同：5
> 
> 时间：2012-12-11T08:07:51.330
> 
> 标签：php, module, warnings

我的网页运行速度非常慢，我想检查错误日志，它充满了这个错误 -

```
[11-Dec-2012 09:52:54 Europe/Helsinki] PHP Warning:  PHP Startup: rar: Unable to initialize module
Module compiled with module API=20060613
PHP    compiled with module API=20090626
These options need to match
in Unknown on line 0 
```

它是什么？谁能知道如何解决它？我的网站正在运行 Joomla。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T08:10:40.193

这表明您更新了 PHP 版本，但没有更新扩展。[从http://php.net/downloads.php](http://php.net/downloads.php)下载扩展

# android - android 应用程序在后台工作以获取通知

> ID：13816058
> 
> 赞同：0
> 
> 时间：2012-12-11T08:08:41.730
> 
> 标签：android, mobile, notifications, push-notification

我正在开发一个 android 应用程序，但在应用程序的通知部分有问题。即使用户没有运行应用程序，我也计划在将新公告记录到数据库时推送通知。该场景就像当 facebook 用户将您添加为朋友时收到通知一样。即使用户没有打开 facebook 应用程序，该应用程序也会在后台显示一条通知，提示有人将您添加为朋友。在我的应用程序中，每当将公告添加到数据库时，我都会显示公告。对我来说，问题是如何让我的应用程序在后台工作以检查是否有新添加到数据库的公告。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:11:59.117

您可以将您的应用程序编写为 android 服务..

# php - 使用 php 将 html div 或页面 url 转换为 pdf

> ID：13816061
> 
> 赞同：-1
> 
> 时间：2012-12-11T08:08:58.743
> 
> 标签：php, pdf-generation, dompdf

我有一个这样的 HTML 代码：

```
<div id="invoice"> 
  <div id="invoice-header"> <img alt="Mainlogo_large" class="logo screen" src="http://colosus.com/invoice/images/freeagent_logo.png"> 
    <!-- hCard microformat --> 
    <div class="vcard" id="company-address"> 
      <div class="fn org"><strong>KIOSBAN.COM</strong></div> 
      <div class="adr"> 
        <div class="street-address">Gedung Atlantica Lt.4<br>
          Jl. Kuningan Barat No. 7, Mampang<br> 
        </div> 
        <!-- street-address --> 
        <div class="locality">Indonesia</div> 
        <div id="company-postcode"><span class="region">Jakarta Selatan</span> <span class="postal-code">12710</span></div> 
      </div> 
      <!-- adr --> 
      <div class="email">fajar@kiosban.com</div> 
    <div id="sales-tax-reg-number">Fajar tampan</div> 
    </div> 
    <!-- company-address vcard --> 
  </div> 
  <!-- #invoice-header --> 
  <div id="invoice-info"> 
    <h2>Invoice <strong>INV001</strong></h2> 
    <h3>21 February 2008</h3> 
    <p id="payment-terms">Payment Terms: 30 days</p> 
    <p id="payment-due">Payment due by 21 March 2008</p> 
    <p id="payment-total">£2643.75</p>
  </div> 
  <!-- #invoice-info --> 
  <div class="vcard" id="client-details"> 
    <div class="fn">John Doe</div> 
    <div class="org">Client Company</div> 
    <div class="adr"> 
      <div class="street-address"> Client Street Address<br> 
        Street Address 2<br> 
        Street Address 3<br> 
      </div> 
      <!-- street-address --> 
      <div class="locality">LOCALITY</div> 
      <div id="client-postcode"><span class="region">Region</span> <span class="postal-code">MV2 8SX</span></div> 
      <div id="your-tax-number">SALES TAX: 193528491</div>
    </div> 
    <!-- adr --> 
  </div> 
  <!-- #client-details vcard --> 
  <table id="invoice-amount"> 
    <thead> 
      <tr id="header_row"> 
        <th class="quantity_th">Quantity</th> 
        <th class="left details_th">Details</th> 
        <th class="unitprice_th">Unit Price (£)</th> 
        <th class="salestax_th">VAT</th> 
        <th class="subtotal_th">Net Subtotal (£)</th> 
      </tr> 
    </thead> 
    <tfoot> 
      <tr id="discount_tr"> 
        <td colspan="2">&nbsp;</td> 
        <td colspan="2" class="item_r">10% Discount</td> 
        <td class="item_r">£250.00</td> 
      </tr> 
      <tr id="net_total_tr"> 
        <td colspan="2">&nbsp;</td> 
        <td colspan="2" class="item_r">Net Total</td> 
        <td class="item_r">2250.00</td> 
      </tr> 
      <tr id="vat_tr"> 
        <td colspan="2">&nbsp;</td> 
        <td colspan="2" class="item_r">VAT</td> 
        <td class="item_r">393.75</td> 
      </tr> 
      <tr id="total_tr"> 
        <td colspan="2">&nbsp;</td> 
        <td colspan="2" class="total" id="total_currency"><span class="currency">GBP </span> Total</td> 
        <td class="total">£2643.75</td> 
      </tr> 
    </tfoot> 
    <tbody> 
      <tr class="item odd"> 
        <td class="item_l">1 Day</td> 
        <td class="item_l">Details of project activity to be billed </td> 
        <td class="item_r">500.00</td> 
        <td class="item_r">17.5%</td> 
        <td class="item_r">500.00</td> 
      </tr> 
      <tr class="item"> 
        <td class="item_l">2 Days</td> 
        <td class="item_l">Other Details of project activity to be billed </td> 
        <td class="item_r">1000.00</td> 
        <td class="item_r">17.5%</td> 
        <td class="item_r">1000.00</td> 
      </tr> 
      <tr class="item odd"> 
        <td class="item_l">2 Days</td> 
        <td class="item_l">More d etails of project activity to be billed </td> 
        <td class="item_r">1500.00</td> 
        <td class="item_r">17.5%</td> 
        <td class="item_r">1000.00</td> 
      </tr> 
    </tbody> 
  </table> 
  <!-- invoice-amount --> 
  <div id="invoice-other"> 
    <h2>Other Information</h2> 
    <div id="company-reg-number"><strong>Company Registration Number:</strong> 9273109</div>  
    <div id="contract-number"><strong>Contract/PO:</strong> PO 87227643</div> 
  </div> 
  <!-- invoice-other --> 
  <div id="payment-details"> 
    <h2>Payment Details</h2> 
    <div id="bank_name">Bank Name</div> 
    <div id="sort-code"><strong>Bank/Sort Code:</strong> 32-75-97</div> 
    <div id="account-number"><strong>Account Number:</strong> 28270761</div> 
    <div id="iban"><strong>IBAN:</strong> 973547</div> 
    <div id="bic"><strong>BIC:</strong> 220197</div> 
    <div id="payment-reference"><strong>Payment Reference:</strong> INV001</div> 
  </div> 
  <!-- payment-details --> 
  <div id="comments">Payment should be made by bank transfer or cheque made payable to John Smith.</div> 
  <!-- comments --> 
</div> 
```

我的问题是：如何将内部的 HTML 代码**唯一**元素`<div id='invoice'>bla bla bla</div>`或该页面的指定 url`(ex: localhost/invoice/index.php)`转换为可下载的`pdf`？

我一直在搜索许多 pdf 类库，但找不到解决方案。

谁能给我一个解决方案、想法或可能的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:19:46.117

您可以使用此服务[http://pdfmyurl.com/](http://pdfmyurl.com/)为 url 下载 PDF，例如以这种格式下载它们 - [http://pdfmyurl.com/?url=http://facebook.com](http://pdfmyurl.com/?url=http://facebook.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:57:05.410

我建议使用[Zend_Pdf](http://devzone.zend.com/1064/zend_pdf-tutorial/)，它可以提供一个用作 PDF 模板的页面，您可以执行各种 PDF 内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:17:59.613

试试 TCPDF [http://www.tcpdf.org/](http://www.tcpdf.org/)。它是一个用于生成 pdf 的 php 类。阅读[http://www.tcpdf.org/examples/example_006.phps](http://www.tcpdf.org/examples/example_006.phps)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:32:30.980

试试[mPDF](http://www.mpdf1.com/mpdf/index.php)，它是一个很棒且易于使用的工具。你可以看看这个快速入门教程[smaizys.com](http://www.smaizys.com/php/mpdf-html-to-pdf-introduction/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-09T12:39:34.410

我建议使用 DOMPDF。

```
[https://github.com/dompdf/dompdf][1] 
```

桌子有很大的问题。我分解了我的大型嵌套表并且它有所帮助（在它消耗高达 128M 的内存然后死亡之前——这是我在 php.ini 中的内存限制）但它使表完全混乱并且似乎没有得到图片。表格只是一些基本的东西，带有一些边框样式，可以在各个点添加一些线条；

# django - 在 SQLite 中注释

> ID：13816062
> 
> 赞同：0
> 
> 时间：2012-12-11T08:09:04.593
> 
> 标签：django, sqlite, django-models

我有以下模型：

```
class Model(...):
  date = DateField()
  user = ForeignKey()
  data = ForeignKey()
  time = IntegerField() 
```

我想为每个用户制作单个数据的时间总和，所以我这样做：

```
Model.objects.filter(date=..., data=...).values('user_id').annotate(time=Sum('time')) 
```

但我收到的结果如下：

[{'user_id': 1, 'time': 20},{'user_id': 1, 'time': 10}, {'user_id': 2, 'time': 20}]

所以分组不起作用。我检查了 django 生成的查询，但我不知道为什么 django 也使用日期和数据进行分组，而不仅仅是用户。我做错了什么还是这只是 SQLite 问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:18:13.123

**您应该附加`.order_by()`到您的查询集以清除默认模型排序。**

对于您的代码：

```
(Model.objects.filter(date=…, data=…)
              .values('user_id')
              .annotate(time=Sum('time'))
              .order_by())                        # <---- Here 
```

这在[默认订购文档警告](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#interaction-with-default-ordering-or-order-by)中有完整说明：

> “除非它不太有效。默认的名称排序也将在分组中发挥作用……你应该……清除查询中的任何排序。”

# vim - 重复匹配模式并替换

> ID：13816063
> 
> 赞同：0
> 
> 时间：2012-12-11T08:09:05.390
> 
> 标签：vim

我想重复搜索并替换如下：

例子：

```
set_path 1 -start -from [get_obj { A_1[0] B_2[1] .... Z_n[100] }] 
```

替换为

```
set_path 1 -start -from [get_obj {xyz/A_1[0] xyz/B_2[1]  .... xyz/Z_n[100] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:11:25.047

按 Esc，然后键入：

```
:%s/array/xyz\/array/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:44:29.257

```
:%s/ \(\u\)/ xyz\/\1/g 
```

\1 表示第一个括号中匹配的内容。这意味着将每个空格和一个大写字母替换为 xyz 和大写字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:37:42.840

要使用可变命名的数组名称使其工作，您可以执行以下操作：

```
s:\v([^[ {]+\[[0-9]+\]):xyz/\1:g 
```

*   `\v`打开“非常神奇”的正则表达式，请参阅`:help /magic`.
*   `[^[ {]+`确保匹配唯一**不**以括号、空格或花括号开头的字符串。
*   `\[[0-9]+\]`确保它“看起来”像一个数组引用。

# delphi - 使用 STRING 动态创建表单

> ID：13816068
> 
> 赞同：1
> 
> 时间：2012-12-11T08:09:31.557
> 
> 标签：delphi, lazarus, dynamic-forms

我在设计时创建了 5 个表单。我需要动态创建每个表单的实例并放在一个选项卡上。

我的问题：如果表单名称在一个字符串数组中，我这样调用我的程序：

```
ShowForm(FormName[3]);// To show the 3rd form on a tab page. 
```

**如何为每个表单定义和创建新实例？**

这就是我现在所拥有的：

```
procedure TForm1.ShowFormOnTab(pProcName:String);
var
  NewForm: TfrmSetupItemCategories;//***HERE IS MY PROBLEM***

  NewTab: TTabSheet;
  FormName: String;

begin
  NewTab := TTabSheet.Create(PageControl1);
  NewTab.PageControl:= PageControl1;
  NewTab.Caption:='hi';
  PageControl1.ActivePage :=  NewTab;

  if pProcName='ProcfrmSetupItemCategories' Then
     begin
       NewForm:=TfrmSetupItemCategories.Create(NewTab);
       NewTab.Caption := NewForm.Caption;
     end;
  if pProcName='ProcfrmZones' Then
     begin
       NewForm:=TfrmZones.Create(NewTab);
       NewTab.Caption := NewForm.Caption;
     end;
.
.
.
end; 
```

写着“这***是我的问题***”的那一行是我需要帮助的地方。我不能以这种方式将 NewForm 作为具有第二种形式的变量重用...

注意：我的问题不是标签。相反，它使用相同的变量名创建表单的新实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T08:13:36.513

将 NewForm 变量声明为 TForm：

```
var
  NewForm: TForm;
begin
  NewForm := TMyForm.Create(Tab1); //compiles OK
  NewForm := TMyOtherForm.Create(Tab2); //also compiles OK
end; 
```

我假设 TMyForm 和 TMyOtherForm 都是 TForm 的衍生物。

## 干燥

您还可以使用[类引用](http://docwiki.embarcadero.com/RADStudio/XE3/en/Class_References)变量来减少重复代码，如下所示：

```
procedure TForm1.ShowFormOnTab(pProcName:String);
var
  NewForm: TForm;
  ClassToUse: TFormClass;
  NewTab: TTabSheet;
  FormName: String;

begin
  NewTab := TTabSheet.Create(PageControl1);
  NewTab.PageControl:= PageControl1;
  NewTab.Caption:='hi';
  PageControl1.ActivePage :=  NewTab;

  if pProcName='ProcfrmSetupItemCategories' then
    ClassToUse := TfrmSetupItemCategories
  else if pProcName='ProcfrmZones' then
    ClassToUse := TfrmZones
  else
    ClassToUse := nil;
  if Assigned(ClassToUse) then
  begin
    NewForm := ClassTouse.Create(NewTab);
    NewTab.Caption := NewForm.Caption;
    //if you access custom properties or methods, this is the way:
    if NewForm is TfrmZones then
      TfrmZones(NewForm).ZoneInfo := 'MyInfo';
  end;
end; 
```

## 注册您的课程，然后从字符串创建表单

正如 Rufo 爵士在评论中指出的那样，您甚至可以进一步注册您的课程（我不确定这是否可以在 Lazarus 中完成，该练习取决于您）。

首先，在调用 ShowFormOnTab 方法之前，从类名中注册要实例化的表单类，例如：

```
procedure TMainForm.FormCreate(Sender: TObject);
begin
  RegisterClass(TfrmSetupItemCategories);
  RegisterClass(TfrmZones);
  //and other classes
end; 
```

然后，您可以更改代码以从类名字符串中获取类引用：

```
procedure TForm1.ShowFormOnTab(pProcName:String);
var
  NewForm: TForm;
  ClassToUse: TFormClass;
  ClassNameToUse: string;
  NewTab: TTabSheet;
  FormName: String;

begin
  NewTab := TTabSheet.Create(PageControl1);
  NewTab.PageControl:= PageControl1;
  NewTab.Caption:='hi';
  PageControl1.ActivePage :=  NewTab;
  //get rid of 'Proc' and add the T
  //or even better, pass directly the class name
  ClassNameToUse := 'T' + Copy(pProcName, 5, MaxInt);
  ClassToUse := TFormClass(FindClass(ClassNameToUse));

  if Assigned(ClassToUse) then
  begin
    NewForm := ClassTouse.Create(NewTab);
    NewTab.Caption := NewForm.Caption;
    //if you access custom properties or methods, this is the way:
    if NewForm is TfrmZones then
      TfrmZones(NewForm).ZoneInfo := 'MyInfo';
  end;
end; 
```

这样，代码对于任意数量的类都保持不变。

有关这方面的更多信息，请查看从delphi.about.com 中[的字符串创建 Delphi 表单。](http://delphi.about.com/library/weekly/aa080905a.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:13:43.577

将您的变量声明为祖先类型：

```
var
  NewForm: TForm; 
```

或者

```
var
  NewForm: TCustomForm; 
```

缺点：如果你想调用你自己声明的表单的任何方法，你需要将变量转换为特定的类。

如果您想让编译器在运行时检查 NewForm 实际上是 TMyForm，请使用“软”强制转换：

```
(NewForm as TMyForm).MyMethod; 
```

当您绝对确定 NewForm 是 TMyForm 时（就像您刚刚创建它时一样），您还可以使用“硬”强制转换：

```
TMyForm(NewForm).MyMethod; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:35:14.647

使用已注册的类，在使用的表单的初始化中，您可以将其缩短为

```
Function CreateAndDock(pc:TPageControl;const FormName:String):Boolean;
begin
  Result := false;
  if Assigned(GetClass(FormName)) and GetClass(FormName).InheritsFrom(TCustomForm)   then
  With TFormClass( GetClass(FormName)).Create(pc.Owner) do
    begin
     ManualDock(pc);
     Show;
     Result := true;
    end;
end;

procedure TForm4.Button1Click(Sender: TObject);
begin
   ShowMessage(IntToStr(Integer(CreateAndDock(pagecontrol1,'TDockForm'))));
   ShowMessage(IntToStr(Integer(CreateAndDock(pagecontrol1,'TNotExists'))));
end; 
```

# sql - ')' 附近的 sql 查询错误语法错误

> ID：13816070
> 
> 赞同：2
> 
> 时间：2012-12-11T08:09:34.690
> 
> 标签：sql, sql-server

```
insert into p_article_client_detail_current(article_id,sector_detail_id)
select article_id,2818
from ( select article_id from p_article_client_detail_current
       where sector_detail_id=239 and convert(varchar(11),feed_date,101) >= '12/07/2012'
) 
```

**消息 102，级别 15，状态 1，第 5 行 ')' 附近的语法不正确**

这个查询有什么问题，请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T08:10:47.407

尝试添加表名（例如`T`），如下所示：

```
insert into p_article_client_detail_current(article_id,sector_detail_id)
select article_id,2818
from ( select article_id from p_article_client_detail_current
       where sector_detail_id=239 and convert(varchar(11),feed_date,101) >= '12/07/2012'
) T 
```

如果您不需要嵌套查询，您也可以使用此查询：

```
insert into p_article_client_detail_current(article_id,sector_detail_id)
select article_id,2818
from p_article_client_detail_current
where sector_detail_id=239 
and convert(varchar(11),feed_date,101) >= '12/07/2012' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T08:15:23.783

```
insert into p_article_client_detail_current(article_id,sector_detail_id)
select article_id,2818 from p_article_client_detail_current
where sector_detail_id=239 and convert(varchar(11),feed_date,101) >= '12/07/2012' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-07T06:51:14.677

请为您从中插入数据的源插入别名。

```
insert into p_article_client_detail_current(article_id,sector_detail_id)
select article_id,2818
from ( select article_id from p_article_client_detail_current
       where sector_detail_id=239 and convert(varchar(11),feed_date,101) >= '12/07/2012'
) as tablealias 
```

# jquery - AJAX 回调函数中的数据仅在 IE8 中未定义

> ID：13816072
> 
> 赞同：0
> 
> 时间：2012-12-11T08:09:38.110
> 
> 标签：jquery

我写了一个页面`test.jsp`来学习如何从服务器获取数据。test.jsp 的 JS 代码：

起初我没有添加`{async: false}`选项，但效果不佳。

```
<script type="text/javascript">
    $(document).ready(function(){
        $.get(
            "./tabServlet?t=" + new Date(),
            { async: false },
            function(data) {
                alert(data);
            }
        );
    });
</script> 
```

一个简单 servlet 的关键代码：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException 
{
    PrintWriter out = response.getWriter();
    out.print("12345");
    out.close();
} 
```

问题是在 IE8 中，`alert(data)`显示`undefined`. 相同的代码适用于 Chrome。谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:52:30.993

我在 IE8 中尝试过，效果很好。您可以调试代码并查看代码有什么问题，首先确保返回响应“12345”。

# facebook - 如何调试 Facebook 连接问题？

> ID：13816073
> 
> 赞同：5
> 
> 时间：2012-12-11T08:09:41.443
> 
> 标签：facebook, omniauth, fbconnect

我已经使用 Facebook connect 设置了我的应用程序（使用[Omniauth](https://github.com/intridea/omniauth)），它似乎适用于某些帐户，但对于其他帐户，它会返回臭名昭著的`An error occurred`错误。

这并不是说它偶尔会发生，而是对某些用户来说始终如一。沙盒模式已关闭，APP 密钥等和域显然设置正确，否则总是会抛出错误。如何从一条与那条一样模糊的消息中调试它？

**编辑 2**：

App 域已正确设置，命名空间也是如此。我选择了“带有 Facebook 登录的网站”和“移动网络”，并且 URL 是正确的，而不是 HTTPS（两者都使用相同的 URL）。为了以防万一，我还重置了应用程序密码，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:07:23.767

***尝试以下示例：***

像这样的omniauth_callbacks_controller::process_callback方法

```
# If a user is signed in then he is trying to link a new account
    if user_signed_in?
      if authentication.persisted? # This was a linking operation so send back the user to the account edit page  
        flash[:success] = I18n.t "controllers.omniauth_callbacks.process_callback.success.link_account", 
                                :provider => registration_hash[:provider].capitalize, 
                                :account => registration_hash[:email]
      else
        flash[:error] = I18n.t "controllers.omniauth_callbacks.process_callback.error.link_account", 
                               :provider => registration_hash[:provider].capitalize, 
                               :account => registration_hash[:email],
                               :errors =>authentication.errors
      end  
      redirect_to edit_user_account_path(current_user) 
```

并参考以下位置：[OAuthException (#210) 用户不可见](http://developers.facebook.com/bugs/289828187779861)

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T20:04:29.110

您能否安装 Wireshark 并使用好帐户和坏帐户来回监控流量 - 然后确定差异？

# php - 如何在 php mysql 中使用 unix 时间获取今天的记录

> ID：13816076
> 
> 赞同：2
> 
> 时间：2012-12-11T08:10:10.207
> 
> 标签：php, mysql, datetime, timestamp

我已存储`php time()`到创建字段的数据库表中。那个时间成功存储在我的数据库中。

现在我愿意编写一个查询，它只从该表中获取今天的记录。

我做过这样的事情，但没有工作`strtotime("2012-12-12");`

例如：我已经将这个时间存储在 table 中`1355209509`。所以我想从mysql中检索这个日期的所有记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:17:24.353

您可以使用此查询 -

```
SELECT * FROM <table> WHERE DATE(FROM_UNIXTIME(<unix_time_column>)) = CURDATE() 
```

# ruby-on-rails-3 - 在 Rails 中处理复杂的登录后重定向逻辑

> ID：13816085
> 
> 赞同：1
> 
> 时间：2012-12-11T08:10:42.957
> 
> 标签：ruby-on-rails-3, redirect, login, logic

我有一个 Rails 应用程序，需要在用户登录后根据某些条件将用户重定向到不同的页面（使用 Devise 和 OmniAuth）。这个逻辑可以像这样被伪编码：

```
if the user is an admin
    if no url was specified before login (original_uri)
        - redirect to admin panel
    else
        - redirect to original_uri
else
    if the user filled up his profile data
        if no url was specified before login
            - redirect to user's home page
        else
            if original_uri is allowed (not restricted to that user)
                - redirect to original_uri
            else 
                - redirect to user's home page
    else
        - redirect to profile page 
```

或作为 rspec 集成示例：

```
describe "complex routing" do

  context "user is an admin" do

    let(:user) { create(:admin) }

    context "an original URL was specified before login" do
      it "redirects to the original URL"
    end

    context "no original URL was specified" do
      it "redirects to the admin panel"
    end

  end

  context "user is not an admin" do

    let(:user) { create(:user, :completed_profile => false) }

    context "with complete profile info" do

      before(:each) { user.completed_profile = true }

      context "an original URL was specified before login" do
        it "redirects to original URL if not restricted"
        it "redirects to home page if URL is restricted"
      end

      context "no original URL was specified" do
        it "redirects to home page"    
      end

    end

    context "with incomplete profile" do
      it "redirects to profile page"
    end

  end

end 
```

可以看出，这变得非常复杂并且不是很明显（或易于测试）。此外，将其`before_filter :decide_routing`作为方法调用的想法让我感到畏缩。

什么是一种抽象的好方法，使这个更清晰、可测试并且在未来更易于管理（以防需要添加或更改更多逻辑）？

任何想法都会很棒-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T21:05:15.343

这行吗？

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :authenticate_user!

  protected

  def after_sign_in_path_for(resource)
    # if user is not active, redirect him so he completes registration
    if resource.active?
      super
    else
      # complete_the_effing_registration_path
    end
  end
end 
```

# html - 口音不敏感 好的，我有一个应用程序，其中数据库是 SQL Server，它被定义为不区分大小写和不区分重音。这样，用户对数据库进行的文本搜索非常清晰和快速。这对于放置在应用程序搜索表单上的几个自动完成字段特别有用。但是我刚刚意识到，当您在选择字段上键入要选择的文本的开头时，组合上的默认过滤行为是区分重音的。现在我想知道是否有任何方法可以更改此默认行为，或者我是否应该修改某些形式的数据输入以避免冗长的组合，因为现在对我来说似乎非常不一致，所有应用程序都忽略了除组合框之外的重音敏感性。conn

> ID：13816088
> 
> 赞同：1
> 
> 时间：2012-12-11T08:10:49.603
> 
> 标签：html, combobox, html-select

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:43:05.240

我想你的意思是，如果我们在 HTML 中有以下内容，那么当焦点在控件中时按“A”或“E”会让我们无处可去：

```
<select>
<option>Bar
<option>È
<option>École
<option>Foo
<option>Åland
</select> 
```

恐怕这就是浏览器的行为方式。没有这种行为的规范，但是当按下字母键时，浏览器似乎会移动到以字母开头的项目。他们对这里的字母持非常直白的看法；例如，È、É 和 E 是三个不同的字母。似乎这种行为严格依赖于字母键；例如，在我的键盘上，就像在许多欧洲键盘上一样，先按“´”键，然后按“E”键会产生“é”，但这不会带我进入“École”（这不取决于具体情况字母）。如果我切换到法语键盘设置，我可以到达那里，我可以使用一个键输入“é”。

有一个笨拙的解决方法。用非重音字母替换重音字母，然后组合变音符号：

```
<select>
<option>Bar
<option>E&#x300;
<option>E&#x301;cole
<option>Foo
<option>A&#x30a;land
</select> 
```

问题：并非所有字体都支持组合变音符号。因此，它们可能（在某些旧浏览器上）根本不显示，或者它们可能（即使在新浏览器中）以与基本文本不同的字体显示，从而导致某种排版混乱。不过，也许最严重的问题是现在您*无法*使用键盘上可用的 É 和 Å 等键。所以这可能只有当你期望人们使用像美国键盘这样的东西时才有意义，没有带有变音符号的字母。

# navigation - ZF2 将 BjyAuthorize 与 Zend\Navigation 集成

> ID：13816092
> 
> 赞同：5
> 
> 时间：2012-12-11T08:11:04.693
> 
> 标签：navigation, zend-framework2

我在集成`BjyAuthorize`和 Zend 导航方面遇到问题，不知道如何解决。我尝试了这本[手册](http://akrabat.com/zend-framework-2/integrating-bjyauthorize-with-zendnavigation/)，一切正常。但我预计当我在其中定义守卫时`bjyauthorize.config`，我的导航和守卫配置之间会有反射（被拒绝的控制器或路由不显示导航项）。我的问题是导航项仍然显示，但部分得到正确保护。有什么办法，如何将警卫反映到导航中？我在 Module.php 中的视图助手配置

我的 Application/Module.php 查看助手配置：

```
'mainMenu' => function($sm){
                $nav = $sm->get('navigation')->menu();
                $serviceLocator = $sm->getServiceLocator();
                $acl = $serviceLocator->get('BjyAuthorize\Service\Authorize')->getAcl();
                $role = $serviceLocator->get('BjyAuthorize\Service\Authorize')->getIdentity();
                $nav->setAcl($acl);
                $nav->setRole($role); // Todo replace
                $nav->setUseAcl();
                return $nav->setUlClass('nav')->setTranslatorTextDomain(__NAMESPACE__); 
            } 
```

我在 bjyauthorize.global.php 中的守卫配置

```
'guards' => array(
    'BjyAuthorize\Guard\Controller' => array(
        array('controller' => 'Article\Controller\Article', 'roles' => array('user')),
), 
```

还有我的navigation.global.php

```
return array(
    'navigation' => array(
       'default' => array(
           'articles' => array(
                'label' => 'Articles',
                'route' => 'articles',
            ),
        ),
    )); 
```

我尝试将路由配置更改为模块/控制器/操作，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-19T03:34:03.677

为了帮助任何尝试使用 BjyAuthorize\Guard\Route...

您需要在路由名称前加上前缀`route/`并将其用于资源值。

如果你的配置有这样的守卫......

```
'guards' => array(
    'BjyAuthorize\Guard\Route' => array(
         array('route' => 'zfcadmin/zfcuseradmin/list', 'roles' => array('admin')),
     )
); 
```

你会为你的导航定义这样的东西

```
'navigation' => array(
    'default' => array(
        'admin' => array(
            'label' => 'Admin',
            'route' => 'zfcadmin',
            'pages' => array(
                'users' => array(
                    'resource' => 'route/zfcadmin/zfcuseradmin/list', // route resource ;)
                    'label' => 'Users',
                    'route' => 'zfcadmin/zfcuseradmin/list',
                ),
            ),
        ),
    ),
), 
```

您可以通过将其放置在模块的 onBootstrap 方法中来设置默认 ACL 和角色。

```
$sm   = $e->getApplication()->getServiceManager();
$auth = $sm->get('BjyAuthorize\Service\Authorize');

$acl  = $auth->getAcl();
$role = $auth->getIdentity();
\Zend\View\Helper\Navigation::setDefaultAcl($acl);
\Zend\View\Helper\Navigation::setDefaultRole($role); 
```

我希望这可以帮助那里的人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T12:21:59.580

您没有在导航配置中指定资源。还要确保 $role 是否匹配 bjyauthorize-identity

```
'navigation' => array(
  'default' => array(
     array(
       'label' => 'Registration',
   'resource'   => 'controller/cebEvent.registrationController:add',
   'route' => 'registration/add',
     ),
  ),
), 
```

指定的资源必须与您的警卫配置相匹配：

```
'guards' => array(
    'BjyAuthorize\Guard\Controller' => array(
        array('controller' => 'cebEvent.registrationController','action' => 'add', 'roles' => array('guest','registration_manage')),
    ),
 ), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T08:48:26.100

您可以发布一个使用 Guard\Route 而不是 Controller 的用法示例吗？我在这种情况下的示例路线：

```
'guards' => array(
    'BjyAuthorize\Guard\Route' => array(
        array('route' => 'zfcadmin/sap-targetvalue/index', 'roles' => array('guest', 'user')),
        array('route' => 'zfcadmin/sap-targetvalue/create', 'roles' => array('user')),
    )
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T15:23:48.937

正如 griesi 提到的，您只需要在导航配置中指定资源。

在他的示例中，他将此控制器和操作声明为资源

> 控制器/cebEvent.registrationController：添加

我只想补充一点，这个版本也可以工作（在这种情况下没有动作）

> '资源' => '控制器/游戏\控制器\列表'

也许它对某人有帮助。我认为这永远不会奏效，因为它看起来非常错误；）

# wcf - WCF 服务在本地计算机之外无法访问

> ID：13816093
> 
> 赞同：1
> 
> 时间：2012-12-11T08:11:06.003
> 
> 标签：wcf, deployment

我将 WCF 服务 (.NET 3.5) 部署到 IIS 5.1 (WinXP) 并且可以从本地计算机访问。但是，它不能在本地计算机之外访问。

这是我的 web.config 文件：

```
<system.serviceModel>
  <serviceHostingEnvironment>
    <baseAddressPrefixFilters>
      <add prefix="http://222.22.22.222:8072/"/>
    </baseAddressPrefixFilters>
  </serviceHostingEnvironment>
  <behaviors>
    <serviceBehaviors>
      <behavior name="Parus.ServiceBehavior">
        <serviceMetadata httpGetEnabled="true" httpGetUrl="http://111.1.11.111:8072/AsurReceiveData/Service.svc"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
        <MyInspector />
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <services>
    <service behaviorConfiguration="Parus.ServiceBehavior" name="Parus.Service">
      <endpoint address="http://222.22.22.222:8072/AsurReceiveData/Service.svc" binding="basicHttpBinding" contract="Parus.IService">
      </endpoint>
      <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
    </service>
  </services>
  <extensions>
    <behaviorExtensions>
      <add name="MyInspector" type="Parus.MessageInspectorExtension, Parus, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
    </behaviorExtensions>
  </extensions>
</system.serviceModel> 
```

计算机的本地IP地址为：111.1.11.111:8072。计算机的公网IP地址为：222.22.22.222:8072。

我做了什么？我在 IIS 5.1 中添加了新的 TCP 端口（默认网站属性 -> 网站选项卡 -> 单击高级按钮 -> 单击添加按钮并添加新端口：8072）。

项目 URL 如下所示：

```
http://111.1.11.111:8072/ServiceFolder 
```

该服务如下所示：

```
public class Service : IService
{
    public const string ReplyAction = "http://222.22.22.222:8072/AsurReceiveData/Message_ReplyAction";
    public const string RequestAction = "http://222.22.22.222:8072/AsurReceiveData/Message_RequestAction";

    public Message SetData(Message requestXml)
    {
        using (StreamWriter writer = File.CreateText(@"Path\Body.xml"))
        {
            writer.WriteLine(requestXml.ToString());
        }
        Message response = Message.CreateMessage(MessageVersion.Default, ReplyAction, requestXml.ToString());

        return response;
    }
} 
```

我不确定我是否正确使用本地和公共 IP 地址。也许是别的什么...

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:51:25.763

您的计算机上有防火墙，可以阻止所有来电。您应该关闭防火墙或打开 8072 端口，以便能够从其他计算机与您的 wcf 服务进行通信。

# c# - 在列表中查找两个（或更多）属性的最大值

> ID：13816094
> 
> 赞同：5
> 
> 时间：2012-12-11T08:11:09.103
> 
> 标签：c#, linq, list, max

这个问题已经在 SO 上以一种或另一种方式提出，但不是这样。我刚刚遇到了一个非常基本的问题，我正在寻找一个统计解决方案:-) 我得到了一个具有两个整数属性的对象列表。现在我想找到列表中所有对象的两个属性的最大值。
我想出了三个解决方案：

第一种方法：

```
int max = Math.Max(list.Max(elem => elem.Nr), list.Max(elem => elem.OtherNr)); 
```

第二种方法：

```
public int Max(List<Thing> list)
{
  int maxNr = 0;

  foreach (var elem in list)
  {
    if (elem.Nr > maxNr)
      maxNr = elem.Nr;
    if (elem.OtherNr > maxNr)
      maxNr = elem.OtherNr;
  }

  return maxNr;
} 
```

第三种方法是按两个属性进行排序，然后只取第一个条目并获取一个或另一个属性。

我想找到最快的方法来做到这一点。因此，在所有方法中，我喜欢帖子中的第二种方法（从性能的角度来看）。即使第一个较短，您也必须通过列表两次。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T08:28:59.560

如果您需要超过 2 个属性（这是 的限制`Math.Max`），则使用 LINQ 的替代解决方案：

```
int max = list
  .SelectMany(elem => new[]{ elem.Prop1, elem.Prop2, elem.Prop3 })
  .Max(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T08:14:16.140

如果你这样做

```
int max = list.Max(elem => Math.Max(elem.Nr, elem.OtherNr)); 
```

它仍然是一个单行但只遍历列表一次。我会考虑单行而不是手工写出来可能会略微降低效率。

（另外，你不需要从那里`double`到`int`某个地方的演员吗？）

# hyperlink - 从服务器端生成种子链接

> ID：13816095
> 
> 赞同：0
> 
> 时间：2012-12-11T08:11:09.133
> 
> 标签：hyperlink, bittorrent

我对种子了解不多，至少不足以了解某些网站如何同时提供普通下载链接和种子链接来下载用户上传的文件。

正在生成一个种子链接，这是一种常见且易于实现的东西。我需要安装服务器吗？

我从 Java 源代码制作了一个丑陋的 C# 实现，为了确保我的一些编码变量是正确的，我使用了来自 Lars Warholm 的 NBEncode [。](https://github.com/lars1/NBEncode)

```
 // There are 'args' because I'm using it from command-line. (arg0 is an option not used here)
    // Source file
    args[1] = Directory.GetCurrentDirectory() + args[1];
    // Name to give to the torrent file
    args[2] = Directory.GetCurrentDirectory() + args[2];

    var inFileStream = new FileStream(args[1], FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
    var filename = args[2];

    //BEncoding with NBEencode
    var transform = new BObjectTransform();
    MemoryStream s = new MemoryStream();
    OSS.NBEncode.Entities.BDictionary bod = new OSS.NBEncode.Entities.BDictionary();
    OSS.NBEncode.Entities.BDictionary meta = new OSS.NBEncode.Entities.BDictionary();

    // Preparing the first part of the file by creating BEncoded objects
    string announceURL = "https://www.mysite.com/announce";
    int pieceLength = 512 * 1024;
    bod.Value.Add(new BByteString("name"), new OSS.NBEncode.Entities.BByteString(filename));
    bod.Value.Add(new BByteString("length"), new OSS.NBEncode.Entities.BInteger(inFileStream.Length));
    bod.Value.Add(new BByteString("piece length"), new OSS.NBEncode.Entities.BInteger(pieceLength));
    bod.Value.Add(new BByteString("pieces"), new BByteString(""));
    meta.Value.Add(new BByteString("announce"), new BByteString(announceURL));
    meta.Value.Add(new BByteString("info"), bod);
    byte[] pieces = hashPieces(args[1], pieceLength);
    transform.EncodeObject(meta, s);
    s.Close();

    // Notice that we finish with a dictionary entry of "pieces" with an empty string.
    byte[] trs = s.ToArray();
    s.Close();
    inFileStream.Close();

    // I don't know how to write array of bytes using NBEncode library, so let's continue manually

    // All data has been written a MemoryStreamp, except the byte array with the hash info about each parts of the file

    Stream st = new FileStream(filename + ".torrent", FileMode.Create);
    BinaryWriter bw = new BinaryWriter(st);

    // Let's write these Bencoded variables to the torrent file:
    // The -4 is there to skip the current end of the file created by NBEncode

    for (int i = 0; i < trs.Length - 4; i++)
    {
        bw.BaseStream.WriteByte(trs[i]);
    }

    // We'll add the length of the pieces SHA1 hashes:
    var bt = stringToBytes(pieces.Length.ToString() + ":");

    // Then we'll close the Bencoded dictionary with 'ee'
    var bu = stringToBytes("ee");

    // Let's append this to the end of the file.
    foreach (byte b in bt)
    {
        bw.BaseStream.WriteByte(b);
    }
    foreach (byte b in pieces)
    {
        bw.BaseStream.WriteByte(b);
    }
    foreach (byte b in bu)
    {
        bw.BaseStream.WriteByte(b);
    }
    bw.Close();
    st.Close();                    

    // That's it.
} 
```

使用的功能：

```
 private static byte[] stringToBytes(String str)
    {
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        Byte[] bytes = encoding.GetBytes(str);
        return bytes;
    }

   private static byte[] hashPieces(string file, int pieceLength)
    {

        SHA1 sha1 = new SHA1CryptoServiceProvider();

        StreamReader inn = new StreamReader(file);
        MemoryStream pieces = new MemoryStream();
        byte[] bytes = new byte[pieceLength];
        byte[] digest = new byte[20];
        int pieceByteCount = 0, readCount = inn.BaseStream.Read(bytes, 0, pieceLength);
        while (readCount != 0)
        {
            pieceByteCount += readCount;
            digest = sha1.ComputeHash(bytes, 0, readCount);
            if (pieceByteCount == pieceLength)
            {
                pieceByteCount = 0;
                foreach (byte b in digest)
                {
                    pieces.WriteByte(b);
                }
            }
            readCount = inn.BaseStream.Read(bytes, 0, pieceLength - pieceByteCount);
        }
        inn.Close();

        if (pieceByteCount > 0)
            foreach (byte b in digest)
            {
                pieces.WriteByte(b);
            }
        return pieces.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:17:27.763

这取决于您如何尝试创建它。如果您运行一个网站，并且想从上传的文件中生成 torrent 文件，那么您显然需要服务器端代码。

生成 torrent 文件包括：将您想要的文件添加到 torrent 中，并添加跟踪器信息。一些流行的跟踪器是：

1.  [http://open.tracker.thepiratebay.org/announce](http://open.tracker.thepiratebay.org/announce)
2.  [http://www.torrent-downloads.to:2710/announce](http://www.torrent-downloads.to:2710/announce)

要创建`.torrent`文件，您必须阅读有关文件格式的信息。[在https://stackoverflow.com/a/2033298/384155](https://stackoverflow.com/a/2033298/384155)`.torrent`中给出了一段生成文件的 Java

# navision - 使用 sql server 将 Windows 登录添加到 Dynamics NAV 2009 经典时出现错误消息

> ID：13816099
> 
> 赞同：0
> 
> 时间：2012-12-11T08:11:20.850
> 
> 标签：navision, dynamics-nav

我有一个在 windows 域上创建的用户，并添加到我服务器上的管理员组中。用户可以登录机器，

但是，当我打开工具->安全->Windows 登录并尝试添加用户时，我收到以下消息：“您没有执行当前安全活动所需的 SQL Server 权限”。

如何在 NAV 中设置 Windows 用户？

我使用 Cronus 测试数据库在 Windows 2008 服务器上运行带有 SQL 服务器的 Nav 2009 R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:39:56.183

我发现了问题 - 我必须以管理员身份运行 Dynamics Nav 才能添加用户。

# apache-flex - Flex 4.6 BusyIndi cator 缺失

> ID：13816105
> 
> 赞同：0
> 
> 时间：2012-12-11T08:12:12.850
> 
> 标签：apache-flex, busyindicator

> ```
>  <fx:Declarations>
>   </fx:Declarations>
> 
>   <s:BusyIndicator>
>   </s:BusyIndicator> 
> ```

错误消息是 => 无法将 {} 解析为组件实现。

知道如何解决这个问题吗？

我正在使用 Flex SDK 4.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:10:28.473

[BusyIndi​​cator](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/BusyIndicator.html)是一个仅限移动设备的组件。如果您使用的是 FlashBuilder，请确保您的项目是移动项目。在任何情况下，您都必须确保**mobilecomponents.swc**在类路径中。

如果你想在非移动项目中使用这个组件，我认为你可以简单地将 mobilecomponents.swc 添加到构建路径中，你应该能够使用它。以下是[在 FlashBuilder 中手动将库添加到构建路径的方法](http://help.adobe.com/en_US/flashbuilder/using/WSe4e4b720da9dedb524b8220812e5611f28f-7fef.html#WSe4e4b720da9dedb524b8220812e5611f28f-7fdc)。

这是另一篇关于在 Web 项目中使用移动组件的文章：[http ://www.riagora.com/2011/08/flex-mobile-in-the-browser/](http://www.riagora.com/2011/08/flex-mobile-in-the-browser/)

# html - 带有溢出的基于平铺的布局

> ID：13816112
> 
> 赞同：0
> 
> 时间：2012-12-11T08:12:34.800
> 
> 标签：html, css, overflow

我想为游戏显示基于图块的地图。我目前的方法是拥有一个固定大小的 div 并将绝对定位的较小 div 放置到该外部 div 中。如果地图上给定坐标有东西，我会在该位置设置 div 的背景图片。（见[http://dungeonpilot.com](http://dungeonpilot.com)）

现在我不希望外部 div 的大小是固定的。我希望内部 div 使用整个浏览器空间。我想我可以通过将宽度和高度设置为 100% 来实现这一点。但是，如果我将浏览器窗口变小，以至于某些内部图块不再可见，我希望看到滚动条。但不知何故，外部 div 的溢出设置为自动，文档正文也没有设置。

我必须在哪里以及如何设置溢出属性以获得预期的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:38:19.180

找到了解决方案！申请

```
溢出：滚动；
```

到#masters_view 和#party_view div。告诉我它是否有效。

# node.js - Azure 中使用 Node.js 的长时间运行间隔

> ID：13816113
> 
> 赞同：1
> 
> 时间：2012-12-11T08:12:35.220
> 
> 标签：node.js, azure

我在 Azure 网站上运行 Node.js 应用程序，我试图让计时器无限期地每 30 秒关闭一次。我试过同时使用 setInterval 和[node-cron](https://npmjs.org/package/cron)，但是大约半小时后它们都停止工作了。日志中没有错误，站点保持正常运行，但计时器停止触发。我可以再次启动或重新创建计时器，但它会在半小时后停止工作。

我在免费试用期，我在这里遇到某种帐户限制吗？还是有其他方法我应该这样做，或者有什么方法可以弄清楚是什么让计时器停止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:56:29.007

在网站上托管 Node.js（或者实际上使用对云服务的 node.js powershell 支持）时，您的节点进程由[IISNode](https://github.com/tjanczuk/iisnode)托管。

IISNode 将管理节点进程的生命周期。我猜它会在 30 分钟后故意让你关机。

如果您想要一个持续运行的进程，您需要自己在 Azure 中运行节点。有两种选择：

1.  使用虚拟机（当前处于预览状态），手动将 node.exe 和您的 javascript 复制到虚拟机上，然后手动启动您的应用程序（或作为计划任务或其他方式）。您可以使用 Windows 或 Linux。
2.  使用云服务，并创建一个将节点作为[启动任务](http://msdn.microsoft.com/en-gb/library/windowsazure/gg456327.aspx)启动的 Worker 角色。这也使您能够扩展。

# ios - 将现有的 ios 应用程序转换为通用应用程序

> ID：13816119
> 
> 赞同：0
> 
> 时间：2012-12-11T08:13:08.807
> 
> 标签：ios

我需要有关以下主题的帮助。

我有一个现有的 iPhone 应用程序（我相信它是在考虑“特定设备”的情况下创建的）。现在我想将其转换为“通用”应用程序？可能吗？

最后，在某些地方，也有人建议可以创建单独的 iPhone 和 iPad 应用程序（在复杂应用程序的情况下）。我不确定这是否是我想要的，因为：我希望我的 iPad 和 iPhone 应用程序*共享*一些代码，同时实现“通用”功能。做这个的最好方式是什么？附言。所以总而言之，如果可能的话，我宁愿把它全部放在一个项目中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:41:28.023

Gregory，我认为您在谈论通用应用程序。我建议你，在继续之前你需要谷歌，你会找到很多材料。

简而言之，对于您的情况，您需要分别为 iPhone 和 iPad 准备两个 XIB，并且您必须根据您的设备进行交换。因此，您的代码部分将是相同的，但会改变的是表示部分，即 IB。

有任何问题，请回复我。:)

# c# - 使用 Ajax.BeginForm 在控制器上获取按钮 ID

> ID：13816122
> 
> 赞同：0
> 
> 时间：2012-12-11T08:13:20.700
> 
> 标签：c#, asp.net-mvc-3

**目标：**

我有一个 Ajax.BeginForm 的帖子，我的目标是在控制器上获取按钮 ID。我见过使用 Html.BeginForm 的例子，但我需要一个 Ajax 表单，

**代码：** C# MVC3

看法：

```
@using (Ajax.BeginForm("Save", "Valoration", new AjaxOptions() { HttpMethod = "Post", UpdateTargetId = "HvmDetailTabStrip", OnSuccess = "OnSuccessSaveValoration" }))
{ 
    <div id ="HvmDetailTabStrip">
        @(Html.Partial("_ValorationDetail"))
    </div>
    <button type="submit" style="display:none" id="db1"></button>       
    <button type="submit" style="display:none" id="db2"></button>       
} 
```

控制器：

```
[HttpPost]
public ActionResult Save(ValorationModel model)
{
    if ("db1")    
    {
        var result = ValorationService.Save(ValorationModel);
    }
    else
    {
        // ....
    }         

    return PartialView("_ValorationDetail", ValorationModel);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:05:23.147

您可以像这样获取按钮的值：

```
@using (Ajax.BeginForm("Save", "Valoration", new AjaxOptions() { HttpMethod = "Post", UpdateTargetId = "HvmDetailTabStrip", OnSuccess = "OnSuccessSaveValoration" }))
    { 
        <div id ="HvmDetailTabStrip">
                @(Html.Partial("_ValorationDetail"))
        </div>
        <button type="submit" name="submitButton" value="db1"></button>       
        <button type="submit" name="submitButton" value="db2"></button>       
    } 
```

在您的控制器中，您可以编写：

```
[HttpPost]
    public ActionResult Save(ValorationModel model)
    {
       string buttonValue = Request["submitButton"];

       if(buttonValue == "db1"){
        var result = ValorationService.Save(ValorationModel);
       }else
       {
          ....
       }         

        return PartialView("_ValorationDetail", ValorationModel);
    } 
```

或者，如果您传入方法的参数数量无关紧要，您可以使用以下方法：

```
[HttpPost]
        public ActionResult Save(ValorationModel model, string submitButton)
        {
           if(submitButton == "db1"){
            var result = ValorationService.Save(ValorationModel);
           }else
           {
              ....
           }         

            return PartialView("_ValorationDetail", ValorationModel);
        } 
```

解决问题的其他方法是在这里[ASP.Net MVC - 提交具有相同值的按钮](https://stackoverflow.com/questions/1970504/asp-net-mvc-submit-buttons-with-same-value)

# c# - Axis2 WSDL2Java 使用 .NET 编写的 wsdl 文件

> ID：13816127
> 
> 赞同：0
> 
> 时间：2012-12-11T08:13:44.493
> 
> 标签：c#, java, android, wsdl, axis

我有一个用 .NET 编写的网络服务。我还有一个 android applicaiton 应该与这个 web 服务通信。我想自动生成类而不是编写所有的 HTTP 东西来与这个 web 服务通信。在 Visual Studio 中，您只需右键单击`References`和`Add Service Reference`，瞧，代表 web 服务的类是自动生成的。

我的网络服务是托管的`IIS`，因此这个`WSDL`文件的 URL 是这样的

```
localhost/MyCoolWebService/Service.svc?wsdl 
```

我找到了一个名为 的工具`axis2`，我安装了它并尝试从这个 wsdl 文件中生成一个 java 类。这个过程似乎很简单，但我遇到了一个问题。完成向导然后点击`Finish`生成类后，出现错误：

```
An error occured while completing process
-java.lang.reflect.InvocationTargetException 
```

这没有任何意义，为什么人们不能发出任何好的错误信息？`WSDL`有没有人有从创建的文件中创建java类的经验`C#.NET`？

# vb.net - VB.NET 2012 报告查看器错误

> ID：13816137
> 
> 赞同：-4
> 
> 时间：2012-12-11T08:14:19.410
> 
> 标签：vb.net, report, reportviewer

我在子报表上收到以下错误“子报表**的数据检索失败，请检查日志文件**”。当我运行单独的报告时，它可以正常工作，但是当我将其包含为子报告时，它会给出上述错误。请帮助我谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:02:32.133

当您不在 ReportViewer.LocalReport 对象的 SubreportProcessing 事件处理程序中调用它时，实际文本会下降。

```
Dim tbl As DataTable = GetDataForYourSubReport()
Dim rptDataSource As New ReportDataSource("DataSet1", tbl)
e.DataSources.Add(rptDataSource) 
```

来自报告查看器组件的错误消息特别无用，但没有日志文件，它正在谈论可能存在或不存在的应用程序的日志文件！

我有同样的错误信息，在某些机器上你得到了你描述的错误，但在一些你没有。这是因为 e.ReportPath 在应该包含报告名称的地方为空。

缺少 ReportPath 是旧版本的 Report Viewer DLL 中的一个错误，该版本安装在 GAC 中它中断的机器上（SQL Server 2012 附带的一个错误，其中 e.ReportPath 参数作为无效的）

如果您在 SubreportProcessing 事件处理程序中确实有代码获取“机器特定”行为，请尝试在它中断的机器上下载并安装最新的“Microsoft Report Viewer 2012 运行时”。 [https://www.microsoft.com/en-us/download/details.aspx?id=35747](https://www.microsoft.com/en-us/download/details.aspx?id=35747)

# php - MySQL/PHP：我们如何在准备好的语句中将参数绑定到两个（？）？

> ID：13816138
> 
> 赞同：3
> 
> 时间：2012-12-11T08:14:20.687
> 
> 标签：php, mysqli, prepared-statement

如果这是我的代码：

```
 $mysqli = new mysqli("localhost", "user", "password", "mydb");

    $city = "Some";

    $q = "SELECT District FROM City WHERE (Name=? OR ? IS NULL)";

    if ($stmt = $mysqli->prepare($q)) {

        // How to Bind $city here?
    } 
```

我怎样才能绑定`$city`到两个`?`s？

或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T08:17:36.900

你可以这样做

```
$stmt -> bind_param("for first ?", 'for second ?'); 
```

或尝试喜欢

```
 /* Bind our params */
    $stmt->bind_param('ss', $Name, $city);

    /* Set our params */
    $Name= "hello";
    $city= "city";

    /* Execute the prepared Statement */
    $stmt->execute(); 
```

这些值可以是：

```
i - Integer
d - Decimal
s - String
b - Blob (sent in packets) 
```

# eclipse - 启用在 *.module 扩展文件中搜索 //TODO 标记

> ID：13816144
> 
> 赞同：1
> 
> 时间：2012-12-11T08:14:42.540
> 
> 标签：eclipse, drupal

我想在 drupal 文件“*.module”中使用 // TODO 标签。

1.  我已激活搜索任务标签（内容类型为：“css、html、DTD、XML”）。
2.  *.module 扩展名与 drupal 模块扩展名相关联。
3.  我已经从“任务视图”中检查了搜索过滤的“配置内容”。
4.  php评论的标签是；Fixme、@todo、TODO（默认）。

少了点什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:20:03.867

您可以使用 XTND.US 的 Eclipse IDE 的 Drupal 插件。更新站点：http: [//xtnd.us/downloads/eclipse](http://xtnd.us/downloads/eclipse)

安装并运行此插件后，您应该会在代码中看到**TODO**突出显示，并且 *.module 文件应该以 php 格式打开。所有待办事项都应出现在*Tasks* Eclipse 视图中。

# jquery - 使用jquery监控表中的变化

> ID：13816145
> 
> 赞同：-2
> 
> 时间：2012-12-11T08:14:48.373
> 
> 标签：jquery, html, jquery-ui, jquery-selectors

我有 3 个 Html `table`。第一个在表中有一个`div`内部 a `td`，其他的都是空的。将 div 从一个表拖到另一个表时，我尝试监视\跟踪。我试过了

`$("td").change(function(){});`

但它不起作用。

将 div 从一个表拖到另一个表时是否可以跟踪\监控..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:24:23.863

您可以在此页面访问有关 jquery 的文档：

[jQuery 可拖动](http://jqueryui.com/draggable/#events)

如果您单击查看源代码，您可以找到可用于监控拖动的事件。这里复制了一个代码示例，注意拖动：回调函数：

```
$(function() {
    var $start_counter = $( "#event-start" ),
        $drag_counter = $( "#event-drag" ),
        $stop_counter = $( "#event-stop" ),
        counts = [ 0, 0, 0 ];

    $( "#draggable" ).draggable({
        start: function() {
            counts[ 0 ]++;
            updateCounterStatus( $start_counter, counts[ 0 ] );
        },
        drag: function() {
            counts[ 1 ]++;
            updateCounterStatus( $drag_counter, counts[ 1 ] );
        },
        stop: function() {
            counts[ 2 ]++;
            updateCounterStatus( $stop_counter, counts[ 2 ] );
        }
    });
...
}); 
```

# android - 检测应用是否已通过 Google Play 退款

> ID：13816153
> 
> 赞同：3
> 
> 时间：2012-12-11T08:15:21.417
> 
> 标签：android, google-play

我只是想知道我们是否有办法在（/如果）有问题的应用程序（在实际应用程序上，而不是任何 IAP）发生退款时检测/得到通知。会广播某种事件吗？如果是这样，它是作为退款的广播还是“一般卸载”（`android.intent.action.PACKAGE_REMOVED`）？

我在网上搜索时还没有找到任何东西，但我认为其他人一定在我之前想到了这一点。

提前致谢！

# java - 给定一个 ParameterizedType 和一个类型，我如何重新参数化第一个类型？

> ID：13816161
> 
> 赞同：0
> 
> 时间：2012-12-11T08:15:45.657
> 
> 标签：java, reflection

假设我有 a `Type a`which is a `java.util.TreeSet<T>`，已通过泛型参数化，由于类型擦除，我们看不到。我们还有`Type b`一个 'java.lang.Integer'。我如何构造 a `ParameterizedType`that is a `java.util.TreeSet<java.lang.Integer>`？

或者，如果它更容易，我们可以使用原始`java.util.TreeSet`类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:52:59.130

`ParameterizedType`像这样实现：

```
public class MyParamType implements ParameterizedType {
  private Type rawType;
  private List<Type> paramTypes;

  public MyParamType( Type raw ) {
    this.rawType = raw;
  }

  public void addParamType( Type t ) {
    paramTypes.add(t);
  }

  //for the interface methods, just return what you stored before
} 
```

或多或少地为`Type`. 如果您需要更多`Type`关于非泛型类型实际应该实现什么的提示（它只是一个标记接口），请查看 JDK 源代码或查看调试器中的具体实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:27:14.617

您对自己的问题给出了一半的答案。类型参数（在您的情况下为整数）是仅在编译时存在的擦除。因此，如果您想在`Set<Integer>`开发代码时创建，您可以说：

```
Set<Integer> myset = new TreeSet<Integer>(); 
```

或者如果你是幸运的 Java 7 用户甚至更短：

```
Set<Integer> myset = new TreeSet<>(); 
```

然而，这一行将被编译为纯代码：

```
Set myset = new TreeSet(); 
```

所以，如果你想`TreeSet<Integer>`在运行时创建实例，你只需要创建 plain 实例`TreeSet`，例如 `Class.forName(className).newInstance()`. 在这种情况下，类型参数`Integer`无关紧要。

编辑：我刚刚阅读了您的评论并理解您为什么要问。如果你真的想要，你可以创建`TreeSet`:的子类`class IntegerTreeSet extends TreeSet<Integer>`。`IntegerTreeSet`可以使用反射 API 发现参数类型。

此类可以静态创建（只需在代码中编写）或使用 Javassist 或 CGLIB 等工具动态创建。

# scala - 关于 scala 构造函数超载的后续行动

> ID：13816162
> 
> 赞同：0
> 
> 时间：2012-12-11T08:15:51.450
> 
> 标签：scala, constructor, overriding, case-class

这是[Scala 构造函数重载的后续问题？](https://stackoverflow.com/questions/1095329/scala-constructor-overload)我想要一个案例类构造函数，它在输入的受限形式上运行，因此覆盖，而不是重载构造函数：

```
abstract class Expr

case class RegExpr(regex : Regex) extends Expr {
  override def this(regex : Regex) = {
    if (regex.toString contains "*") 
     throw new Exception("Restricted class of regular expressions: cannot contain Kleene star.")
    else if (regex.toString contains "|")
      throw new Exception("Restricted class of regular expressions: cannot contain disjunction.")
    else this(regex)
  }
} 
```

这不编译；我已经尝试了几个不同的迭代，但它们都回到编译器告诉我它需要'this'，但是找到了'if'。如何获得我想要的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:23:17.073

不需要两个构造函数。只需在类中添加检查，它们将在构建时运行。

```
case class RegExpr(regex: Regex) extends Expr {
   if (regex.toString contains "*") throw ...
   if (regex.toString contains "|") throw ...

} 
```

# c# - 从控制器名称中获取字符串格式的方法列表

> ID：13816166
> 
> 赞同：1
> 
> 时间：2012-12-11T08:16:13.837
> 
> 标签：c#, asp.net-mvc-3

我有以下函数从字符串类型的控制器名称返回操作名称的选择列表：

```
public ActionResult get_all_action(string controllername)
        {
            Type t = Type.GetType(controllername);
            MethodInfo[] mi = t.GetMethods();

            List<SelectListItem> action = new List<SelectListItem>();

            foreach (MethodInfo m in mi)
            {
                if (m.IsPublic)
                    if (typeof(ActionResult).IsAssignableFrom(m.ReturnParameter.ParameterType))
                    {
                        action.Add(new SelectListItem() { Value = m.Name, Text = m.Name });
                    }
            }

            var List = new SelectList(action, "Value", "Text");

            return Json(List, JsonRequestBehavior.AllowGet);
        } 
```

get_all_action() 的参数控制器名称被传递为例如“AccountController”。但异常被抛出

```
MethodInfo[] mi = t.GetMethods(); 
```

作为：

```
Object reference not set to an instance of an object. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:21:25.557

`"AccountController"`不是完整的类型名称；它需要类似于`"YourApp.Whatever.AccountController"`for`GetType()`才能找到它。还值得明确说明它在哪个程序集中，例如：

```
var thisType = GetType();
Type t = thisType.Assembly.GetType(
    thisType.Namespace + "." + controllerName); 
```

（假设我们的意思是相同的程序集/命名空间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:19:01.920

显然`Type.GetType`返回`null`，因为它找不到指定名称的类`AccountController`。您应该使用命名空间指定全名。此外，如果您的控制器类不是来自执行程序集，则必须使用限定程序集名称（如

```
TopNamespace.SubNameSpace.AccountController, MyAssembly 
```

）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:22:57.963

您应该将[**程序集限定名称**](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)指定为`Type.GetType(controllername)`

# apache - 此脚本只能从 localhost 访问

> ID：13816169
> 
> 赞同：0
> 
> 时间：2012-12-11T08:16:59.400
> 
> 标签：apache, mod-rewrite, symfony, routing, virtualhost

我有一个 Symfony2 的工作项目。
默认情况下，我的一个捆绑包运行良好，但是当我激活时，`mod_rewrite`我得到

> 此脚本只能从 localhost 访问

这只发生在这个包上配置的路由上，其他的可以正常工作`mod_rewrite`

这是我的虚拟主机配置

```
<VirtualHost *:80>
    ServerName my_application.my_domain.net
    ServerAdmin xxx@xxx.xxx

    DocumentRoot "/var/www/my_application/web"
    <Directory /var/www/my_application/web/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        Allow from All
        <IfModule mod_rewrite.c>
            RewriteEngine On
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteRule ^(.*)$ /app.php [QSA,L]
        </IfModule>
    </Directory>
</VirtualHost> 
```

那能从哪里来？

* * *

## 更新

**例子**

尝试访问时出现错误

```
my_application.my_domain.net/config/list/produit 
```

如果我禁用`mod_rewrite`我可以访问

```
my_application.my_domain.net/app.php/config/list/produit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:27:29.017

你打的是 app_dev.php 还是 config.php？

默认情况下，这两个都限制来自除本地主机之外的任何地方的连接，并显示完全相同的消息。

# 更新

更新后，我认为问题可能是因为您启用了 MultiViews。MultiViews 可以尝试加载 config.php，即使它只是作为配置引用。尝试删除它，看看它是否有助于改善任何事情。

# content-management-system - 同一语言的多个域的 CMS

> ID：13816180
> 
> 赞同：1
> 
> 时间：2012-12-11T08:17:52.303
> 
> 标签：content-management-system, multiple-domains

我们有一个位于美国的网站（例如 www.example.com）。我们的任务是为英国和澳大利亚的用户创建多个站点。这两个都有不同的域（例如 www.example.co.uk 和 www.example.co.au），这些站点将共享相同的公共页面后端。大约 80% 的内容在所有版本上都是相同的，但会有一些部分，如联系方式、合作伙伴和产品供应不同

**例子**

***美国网站***(www.example.com) 有 4 个页面：

*   家
*   关于
*   产品
*   接触

***英国站点***(www.example.co.uk) 也有相同的页面

*   主页（与美国相同，但横幅图像等略有不同。URL 将是 www.example.co.uk）
*   关于（内容不同，网址应该是www.example.co.uk/about）
*   产品（与美国相同，产品内容差异较小，但 URL 应为 www.example.co.uk/services）
*   联系方式（内容不同，网址应该是www.example.co.uk/contact）

我如何设置英国和澳大利亚版本的网站，它们使用与美国网站相同的后端和大部分相同的内容，但有一些页面差异和不同的域？

任何人都可以推荐一些有助于实现这一目标的优秀 CMS 工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T08:06:36.110

去Typo3！非常有效地支持多域和多语言站点。一旦单个域的开发结束，您甚至不需要开发人员来添加更多域。那就是你不需要为多领域编码，只需要学习一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:17:58.930

据我所知，大多数 CMS 都能够为您提供某种形式的内容共享。

它确实取决于您拥有的内容量，如果您的集合相对较小（例如，您的答案中的 4 页），那么您最好只复制这些页面。如果您正在查看数十、数百或更多文档，那么您应该查看结构合理的方法。

你能提供一些关于文件数量的提示吗？

注意：我为[河马工作](http://onehippo.com)

# c# - 发布网站后，内部 URL 不起作用

> ID：13816187
> 
> 赞同：1
> 
> 时间：2012-12-11T08:18:40.343
> 
> 标签：c#, asp.net, iis-7, umbraco

我用 Umbraco 设计了一个网站。在此之前，我发布了它。一切都很好。但发布后，链接到内部网页不起作用。

发布前：“ [http://localhost:4402/testgroup/testgroup01/testitem01.aspx?nodeId=1400](http://localhost:4402/testgroup/testgroup01/testitem01.aspx?nodeId=1400) ”

发布后：“ [http://localhost/testgroup/testgroup01/testitem01.aspx?nodeId=1400](http://localhost/testgroup/testgroup01/testitem01.aspx?nodeId=1400) ”

我不知道该怎么做.. 请帮助我。

注意：在后面的代码中，在href标签的开头，添加“/..”或“/~”或“~”但不起作用。所有由 HtmlGenericControl 动态创建的“” ![我在 IIS 中的网站名称是 NAMAAD](../Images/dc9d076f1c7eda2665cc7695ee9c3e25.png) ![发布后的错误页面](../Images/28f5651b41bee6f38719963800a70098.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:41:28.493

我找到了！

我在 IIS 中的“站点”节点中创建了一个网站。（已经存在于“默认网站”中）。我为网站提供了一个端口（例如 5050）。

可以解决。

感谢所有试图解决我问题的人。

![你可以看到。](../Images/f6fda4f83b71d10942d2772c1fb0dee2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:37:16.093

尝试在 IIS 的网站高级设置中将绑定设置为：

```
http::4402: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:42:21.923

提供该代码，链接到“.cs”中的页面的方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T09:43:15.480

如果虚拟路径是`/NAMAAD`然后使用`http://localhost/NAMAAD/`作为基础并转到您需要的页面。

此外，我看不到文件夹`testgroup`或`testgroup01`在 中`NAMAAD`，检查您想要的页面到底在哪里。

# mysql - VB脚本中的MySQL OLEDB连接字符串？

> ID：13816188
> 
> 赞同：0
> 
> 时间：2012-12-11T08:18:56.510
> 
> 标签：mysql, vbscript

我需要一个连接字符串来通过在 vB sCRIPT 中使用 OleDB 提供程序来连接 mysql

注意：我已经完成了 ODBC 驱动程序所以只有 Oledb 提供程序字符串是可感知的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:24:32.320

[connectionstrings.com](http://www.connectionstrings.com/mysql#net-framework-data-provider-for-ole-db)几乎拥有您需要的所有连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:34:23.643

请参阅[此答案（更新）](https://stackoverflow.com/a/11105750/603855)，它显示了如何使用 .udl 文件在 GUI 中设置和试验连接字符串（在 connectionstrings.com 进行一些研究之后）。

# python - 如何检查（键，值）对是否在包含大量Python字典的数组中

> ID：13816195
> 
> 赞同：1
> 
> 时间：2012-12-11T08:19:40.917
> 
> 标签：python, arrays, dictionary

我有一个数组：

```
array = [{'a': 1, 'b': 2}, {'a': 3, 'b': 4}, {'a': 5, 'b': 6}] 
```

有什么好方法可以检查键值对 ('a', 5) 是否在此数组中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T08:21:40.037

```
In [61]: any(d.get('a', None) == 5 for d in array)
Out[61]: True 
```

将其包装成一个函数：

```
In [64]: check = lambda arr, (k, v): any(d.get(k, None) == v for d in arr)

In [65]: check(array, ('a', 5))
Out[65]: True

In [66]: check(array, ('z', 5))
Out[66]: False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T08:22:11.617

```
In [88]: array = [{'a': 1, 'b': 2}, {'a': 3, 'b': 4}, {'a': 5, 'b': 6}]

In [89]: if any(d['a'] == 5 for d in array):
   ....:     print True
   ....:
True 
```

或者你可以写类似

```
In [96]: array = [{'a': 1, 'b': 2}, {'a': 3, 'b': 4}, {'a': 5, 'b': 6}]

In [97]: def check_pair(k, v, l):
   ....:     for elem in l:
   ....:         if elem.has_key(k) and elem[k] == v:
   ....:             return True
   ....:     return False
   ....:

In [98]: check_pair('a', 5, array)
Out[98]: True

In [99]: check_pair('a', 11, array)
Out[99]: False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T08:23:01.443

无需遍历字典中的所有元素，您只需按键索引并检查该值是否等于查询的值，但是，您必须遍历数组元素

```
>>> array = [{'a': 1, 'b': 2}, {'a': 3, 'b': 4}, {'a': 5, 'b': 6}]
>>> foo = lambda k, v:any(e.get(k, None) == v for e in array)
>>> foo('a',5)
True
>>> foo('a',6)
False
>>> foo('b',5)
False
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T08:23:33.970

一种更广泛的方法，可以提取所需对所在的确切字典。

```
>>> array = [{'a': 1, 'b': 2}, {'a': 3, 'b': 4}, {'a': 5, 'b': 6}]
>>> for d in array:
    if ('a', 5) in d.items():
        #your code here 
```

你可以提取第一个让你对的字典。

```
desired_dict = [d for d in array if ('a', 5) in d.items()][0] 
```

或它们的列表：

```
desired_dicts = [d for d in array if ('a', 5) in d.items()] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T14:58:11.427

```
 python 3.2

     [(m,n) for i in array for m,n in i.items() if (m,n)==('a',5)] 
```

# ios - 如何获取 UIActivityViewController 的所有 applicationActivity？

> ID：13816196
> 
> 赞同：4
> 
> 时间：2012-12-11T08:19:41.860
> 
> 标签：ios, ios6, uiactivityviewcontroller

我怎样才能在设备`NSArray`中安装所有内容`applicationActivities`？

```
- (id)initWithActivityItems:(NSArray *)activityItems applicationActivities:(NSArray *)applicationActivities; 
```

我想删除一两个项目并显示完整列表的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:27:44.227

[活动字符串列在 UIActivity 类参考UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype)的文档底部。

它们被列为 UIActivityTypePostToFacebook、UIActivityTypePostToTwitter 等。这些实际上是在 UIActivity.h 中定义的字符串。

试试这个：

```
NSLog(@"%@", UIActivityTypePostToFacebook); 
```

然后，您可以比较这些字符串以向用户显示特定于活动类型的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:07:40.287

不知道如何获取所有列表`applicationActivities`。如果要排除某些活动类型，可以使用`excludedActivityTypes`. `UIActivityViewController`根据[文档](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIActivityViewController/excludedActivityTypes)，

> 此属性包含一个字符串数组，每个字符串对应于您在 UIActivity 对象的 activityType 参数中找到的值。您指定的每个字符串都表示您不希望向用户显示的服务。您可能会排除您认为不适合您提供的内容的服务。例如，您可能不想让用户打印特定图像。如果此属性的值为 nil，则不排除任何服务。
> 
> 此属性的此值默认为 nil。

# shopify - Shopify XML Post 中的 PHP

> ID：13816198
> 
> 赞同：4
> 
> 时间：2012-12-11T08:19:48.300
> 
> 标签：shopify

我在使用 PHP 和 Curl 将 XML 数据发布到 Shopify 时遇到问题。我有：

```
$xml = '<?xml version="1.0" encoding="UTF-8"?><variant><id type="integer">260293006</id><fulfillment-service>manual</fulfillment-service><inventory-management>shopify</inventory-management><inventory-policy>deny</inventory-policy><sku>s136</sku><inventory-quantity type="integer">48</inventory-quantity><price>17.95</price></variant>';
$url = 'https://' . $API_KEY . ':' . $PASSWORD . '@' . $STORE_URL . '/admin/variants/#260293006.xml'; 
```

我的代码是：

```
$session = curl_init();
curl_setopt($session, CURLOPT_URL, $url);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
curl_setopt($session, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($session, CURLOPT_MAXREDIRS, 3);
curl_setopt($session, CURLOPT_POST, 1);
curl_setopt($session, CURLOPT_POSTFIELDS, $xml);
curl_setopt($session, CURLOPT_HTTPHEADER, array('Content-Type: text/xml; charset=utf-8'));
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($session);
echo $response;
curl_close($session); 
```

Shopify 页面返回的内容为：

```
<title>Shopify &raquo; Please Log In</title> 
```

我想我可能遗漏了一些明显的东西。一旦我让这个功能工作，其他一切都应该很容易构建。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T07:00:14.763

谢谢大家。基于此反馈，我能够解决问题。大部分问题：

1.  正如用户 457786 建议的那样，不需要 #
2.  它需要是 PUT 方法，而不是 POST，我根据 user-457786 的链接找到了
3.  对 CURL 的其他一些更改：

    ```
    $fp = tmpfile();
    fwrite($fp, $xml);
    fseek($fp, 0); 
    $session = curl_init();
    curl_setopt($session, CURLOPT_URL, $url);
    curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($session, CURLOPT_PUT, true);
    curl_setopt($session, CURLOPT_BINARYTRANSFER, true);
    curl_setopt($session, CURLOPT_INFILE, $fp); // file pointer
    curl_setopt($session, CURLOPT_INFILESIZE, strlen($xml));   
    curl_setopt($session, CURLOPT_HTTPHEADER, array('Content-Type: application/xml'));
    $response = curl_exec($session);
    fclose($fp);
    curl_close($session); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:46:32.687

我认为`#`不需要`$url`，应该是

```
$url = 'https://' . $API_KEY . ':' . $PASSWORD . '@' . $STORE_URL . '/admin/variants/260293006.xml'; 
```

# asp.net-mvc-3 - 如何验证外键列剑道内联网格

> ID：13816199
> 
> 赞同：1
> 
> 时间：2012-12-11T08:19:48.970
> 
> 标签：asp.net-mvc-3, kendo-ui

我有使用外键列的内联编辑网格。在 foreignKey.cshtml 中，我还添加了选项标签（“请选择”）。

意见：

```
columns.ForeignKey(p => p.EmployeeID, (System.Collections.IEnumerable)ViewData["testStatus"], "EmployeeID", "EmployeeName"); 
```

模型：

```
 [Required(ErrorMessage = "Required")]
 [DisplayName("Employee ")]
 [UIHint("GridForeignKey")]
 public int EmployeeID { get; set; } 
```

共享/GridForeignKey.cshtml

```
@(
 Html.Kendo().DropDownList()
        .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
        .BindTo((SelectList)ViewData[ViewData.TemplateInfo.GetFullHtmlFieldName("") + "_Data"])
        .OptionLabel("Select value")

) 
```

我的问题是，我如何验证用户是否选择“请选择”选项并显示所需的消息。谢谢你

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:45:13.710

尝试将 range 属性而不是 required 添加到模型中。您的第一项“请选择”很可能被赋予值 0 或“请选择”，因此所需的属性不会满足您的需求，因为从技术上讲，该输入具有值。

```
[Range(1, int.MaxValue, ErrorMessage = "Please Select A Value")]
public int EmployeeID { get; set; } 
```

假设您还没有选定的值，请尝试将选定的索引添加到下拉列表中。

```
@(
 Html.Kendo().DropDownList()
    .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
    .BindTo((SelectList)ViewData[ViewData.TemplateInfo.GetFullHtmlFieldName("") + "_Data"])
    .OptionLabel("Select value")
    .SelectedIndex(0)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:30:22.853

您是否尝试将 [Required] 数据注释属性添加到您的 Model 属性？如果没有，有什么区别吗？

# json - 处理输入值时出错，通过 JSON 发送

> ID：13816208
> 
> 赞同：3
> 
> 时间：2012-12-11T08:20:23.743
> 
> 标签：json, string, imdb

我有以下代码，它应该获取输入字段的值，将值发送到 imdbapi.org 并处理发回的 JSON。我包含了一个显示输入字段值的元素，但是对于一些字符串，它会切断字符串。看[这个测试用例](http://codepen.io/loredonut/pen/Izqyo)

```
$("form > input#movname").keyup(function() {
    var inputval = encodeURI($("form > input").val());
    $.getJSON('http://imdbapi.org/',
    {
        title: inputval,
        plot: "none",
        limit: "5"
    },
    function(data) {
        var items = [];
        $.each(data, function(key, val) {
            items.push('<li id="'+val.imdb_id+'">');
            items.push('<img src="'+encodeURI(val.poster)+'" />');
            items.push('<strong class="title">'+val.title+'</strong><br />');
            items.push('<div>'+val.rated.replace("_"," ")+'</div>');
            items.push('</li>');
        });
        items.push('<li id="debug">');
        items.push('<img src="src/nocover.png" />');
        items.push('<strong class="title">'+$("form > input").val()+'</strong><br />');
        items.push('</li>');
        var html = items.join('');
        $("#suggestions").html("");
        $('<ol/>', {
            'class': 'moviessuggestions',
            html: html
        }).appendTo('#suggestions');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:23:30.997

看起来`limit`是不必要的（错误用法？），使用

```
{
    title: inputval,
    plot: "none"
} 
```

它工作正常。

# actionscript-3 - 如何更改 Flash as3 中的动态文本？

> ID：13816209
> 
> 赞同：0
> 
> 时间：2012-12-11T08:20:25.977
> 
> 标签：actionscript-3, flash

我是闪光灯的初学者。我从 flash 中的 text_tool 创建了一个文本。我将实例名称**“mytext”**和文本类型设置为动态。现在我想在运行时更改文本。例如：当前文本是**'hello world'**现在当我运行 flash 文件时，我想将文本更改为***'any random text'***。所以我为此使用了以下代码。 `mytext.text = 'any random text';`但在运行时我可以看到任何文本。请帮助我如何更改其文本？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:44:32.767

可能有多种原因，请检查以下内容：

*   如果您的时间轴上有多个帧，并且您`TextField`在所有这些帧上都进行了扩展，那么请确保您已在时间轴`TextField`上的所有帧上提供了实例名称`KeyFrames`。

*   如果您使用一些花哨的字体，请尝试嵌入字体，有时非嵌入字体会产生此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:48:50.210

此外，您可以使用

您的`textfield.appendText();`

祝你工作顺利:)

# objective-c - 应用程序在 iPod 上崩溃

> ID：13816210
> 
> 赞同：3
> 
> 时间：2012-12-11T08:20:28.973
> 
> 标签：objective-c, ios, crash, ios6, xcode4.3

我为 iPhone 创建了一个应用程序。应用程序搜索世界各地的所有水上运动。它是基于 Web 服务的应用程序。

我的应用程序在模拟器上运行顺畅，没有任何崩溃报告，但是当我创建 ipa 文件并在我的 iPod（我没有自己的 iPhone）上启动相同的应用程序时，应用程序在一段时间后崩溃。崩溃的情况不是固定的，所以我认为这是因为内存泄漏或内存警告。

我使用这个函数`didReceiveMemoryWarning`来识别内存警告，但在模拟器上没有调用这个函数。

我的 Xcode 版本是 4.3，不幸的是我将 iPod 的版本更新到了 iOS 6.0，所以我无法通过将 iPod 连接到 Mac 来测试应用程序。我将很快更新我的 Mac 和 Xcode，但还不足以解决/测试这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:35:00.937

您可以使用以下方法从设备获取崩溃日志。检查[how-to-find-crash-logs](http://www.ondemandworld.com/how-to-find-crash-logs/)或[get-crash-reports-logs-from-iphone-ipad](http://osxdaily.com/2012/08/07/get-crash-reports-logs-from-iphone-ipad/)。您可以符号化崩溃日志以找出根本原因。在此处查看此问题以获取有关[Symbolicating iPhone App Crash Reports](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)部分的更多详细信息。一旦你遇到问题，你应该能够解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:24:14.907

试试这个，放置一个临时标签，然后在调用时修改它，`didRecieveMemoryWarning`或者在调用时弹出一个警报视图`didRecieveMemoryWarning`。

此外，使用 Instruments 应用程序运行，这是监控内存使用情况和识别内存泄漏的好方法。还可以尝试 Product -> Analyze 以从 in-Xcode 中查找内存泄漏。Instruments 是 SDK 的一部分，只需在聚光灯下搜索即可。

# mysql - 将别名与其他 MySQL 列值相加

> ID：13816216
> 
> 赞同：2
> 
> 时间：2012-12-11T08:21:27.657
> 
> 标签：mysql, sql

我对这个查询有一个问题；我似乎无法`((total + rec_host) / 2) AS total2`上班。如果不这样做，我将如何执行此程序：

`((((rank_ur + rank_scs + rank_tsk + rank_csb + rank_vfm + rank_orr) / 6) + rec_host ) / 2)`

这是我的查询：

```
 SELECT host_name, 
       SUM(rank_ur) AS cnt1, 
       SUM(rank_scs) AS cnt2,
       SUM(rank_tsk) AS cnt3,
       SUM(rank_csb) AS cnt4,
       SUM(rank_vfm) AS cnt5,
       SUM(rank_orr) AS cnt6,
       SUM(IF(rec_host = 1,1,0)) AS rh1,
       SUM(IF(rec_host = 0,1,0)) AS rh2,
       ((rank_ur + rank_scs + rank_tsk + rank_csb + rank_vfm + rank_orr) / 6) AS total,
       ((total + rec_host) / 2) AS total2
   FROM lhr_reviews 
   GROUP BY host_name
   ORDER BY total 
   DESC LIMIT 0,10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:25:12.613

像这样使用子查询：

```
SELECT 
  host_name, 
  cnt1, 
  cnt2,
  cnt3,
  cnt4,
  cnt5,
  cnt6,
  rh1,
  rh2,
  total,
  ((total + rec_host) / 2) AS total2
FROM
(
   SELECT host_name, 
       rec_host,
       SUM(rank_ur) AS cnt1, 
       SUM(rank_scs) AS cnt2,
       SUM(rank_tsk) AS cnt3,
       SUM(rank_csb) AS cnt4,
       SUM(rank_vfm) AS cnt5,
       SUM(rank_orr) AS cnt6,
       SUM(IF(rec_host = 1,1,0)) AS rh1,
       SUM(IF(rec_host = 0,1,0)) AS rh2,
       ((rank_ur + rank_scs + rank_tsk + 
         rank_csb + rank_vfm + rank_orr
         ) / 6) AS total
   FROM lhr_reviews 
   GROUP BY host_name, rec_host
) t 
ORDER BY total 
DESC LIMIT 0,10; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:30:35.363

你可以做的是：

```
select x.*, ((x.total + rec_host) / 2) AS total2
from (

SELECT host_name, rec_host,
       SUM(rank_ur) AS cnt1, 
       SUM(rank_scs) AS cnt2,
       SUM(rank_tsk) AS cnt3,
       SUM(rank_csb) AS cnt4,
       SUM(rank_vfm) AS cnt5,
       SUM(rank_orr) AS cnt6,
       SUM(IF(rec_host = 1,1,0)) AS rh1,
       SUM(IF(rec_host = 0,1,0)) AS rh2,
       ((rank_ur + rank_scs + rank_tsk + rank_csb + rank_vfm + rank_orr) / 6) AS total
   FROM lhr_reviews 
   GROUP BY host_name
   ORDER BY total 
   DESC LIMIT 0,10
) as x
; 
```

当别名与其他列处于同一级别时，不能将该列用作别名`SELECT`。因此，您可以使用派生查询，它可以让您基本上重命名列和/或命名任何计算列。[在这里查看 Rubens Farias 和 Rob Van Dam 的答案](https://stackoverflow.com/questions/2077475/using-an-alias-in-sql-calculations/2077483#2077483)

PS：将搜索更好的文章来更新答案:)

# java - Java DAO 泛型

> ID：13816224
> 
> 赞同：1
> 
> 时间：2012-12-11T08:22:15.827
> 
> 标签：java, spring, mongodb, generics, dao

我正在使用泛型来构建 DAO。数据库可以是任何数据库。问题是对于每种类型的类都有一个特定的类。例如：

```
public class DAO<T> {

    public void save(T entity) {

     }
}

public class StudentDAO extends DAO<Student> {

} 
```

想象一下我有 1000 张或更多桌子。我需要有 1000 个这样的课程吗？有没有更好的方法来设计这个？

编辑

我正在使用 MongoDB 和 Spring MongoDB 的 NoSQL 数据库。它通过 Spring 具有 Repository 概念，但我仍然会得到 1000 个类。我不能使用 JPA 或 Hibernate。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:40:39.367

是的，肯定有更好的方法。您遇到的是我所说的“每个实体的 DAO 可扩展性问题”。你需要的是一个**可重用的通用 DAO**实现，例如[PerfectJPattern](http://perfectjpattern.sourceforge.net/dp-genericdao.html)

```
 IGenericDao<Long, Customer> myCustomerDao = HibernateDaoFactory.getInstance().createDao(Customer.class);
 // create a Customer
 Customer myCustomer1 = new Customer(/*name=*/"Pedro"); 
 myCustomerDao.create(myCustomer1);
 // find all customers whose name is "Juan"
 List<Customer> myMatches = myCustomerDao.findByExample(new Customer(/*name=*/"Juan")); 
```

这里刚刚发生了什么？你不需要创建一个新的`CustomerDao`但**重用通用的**。除了基本的 CRUD 之外，您甚至可以使用 IGenericReadOnlyDao 来满足 90% 的“查找器`findByExample`”[需求](http://perfectjpattern.sourceforge.net/apidocs/org/perfectjpattern/jee/api/integration/dao/IGenericReadOnlyDao.html#findByExample%28Element,%20java.lang.String...%29)。

如果`findByExample`不能满足您的所有需求，那么您可以选择使用 Spring 级别的通用 DAO，[这里](http://perfectjpattern.sourceforge.net/xref/org/perfectjpattern/jee/integration/dao/spring/Example.html)的示例提供从 SQL 到您的 DAO 接口的直接映射，您不需要提供实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:37:50.953

您不必扩展 DAO 类。我假设 DAO 构造函数有一个参数来检测它应该与哪个实体和哪个表交互。像这样的东西：

```
public DAO(Class<T> type) {
    this.persistentType = type;
} 
```

使用这样的构造函数，无论您需要 Student 实体的 DAO 实例，您都可以像这样初始化它：

```
DAO<Student> studentDao = new DAO<Student>(Student.class); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:33:32.907

你能行的。但我建议你使用[Generic Dao](http://code.google.com/p/hibernate-generic-dao/)项目。它支持本地 Hibernate 和 JPA API，并允许您为您拥有的所有实体创建一个且只有一个 DAO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:27:02.257

考虑 Spring Data ，它将为您生成 DAO 层。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T08:33:25.683

你考虑使用hibernate + spring

# javascript - 代码在 IE9 中不起作用

> ID：13816228
> 
> 赞同：2
> 
> 时间：2012-12-11T08:22:55.023
> 
> 标签：javascript

> **可能重复：**
> [IE9 数组不支持 indexOf](https://stackoverflow.com/questions/7792195/ie9-array-does-not-support-indexof)

我的代码：

```
var arrFruits = ['apple', 'banana', 'carrot', 'dates'];
var position = arrFruits.indexOf( 'carrot' );
position > -1 && arrFruits.splice( position, 1 );
alert( arrFruits ); 
```

上面的代码将结果显示`apple, banana, dates`为`Chrome`. 但它在`IE9`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T08:25:54.393

可能是`.indexOf`不支持的问题。它基本上在 IE9 中受支持，除非某些恶意 doctype 触发它以 IE7/8 模式呈现页面。`Array.indexOf`不支持比方法。

我建议使用 HTML5 文档类型 ( `<!DOCTYPE html>`) 来确保 IE9 正确呈现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T08:27:22.887

直到 IE8 它没有**.indexOf**方法，[你可以像这样添加它](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)，如果你使用的是 IE9[检查](https://stackoverflow.com/questions/5825385/javascript-can-i-detect-ie9-if-its-in-ie7-or-ie8-compatibility-mode)兼容模式

```
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {
        "use strict";
        if (this == null) {
            throw new TypeError();
        }
        var t = Object(this);
        var len = t.length >>> 0;
        if (len === 0) {
            return -1;
        }
        var n = 0;
        if (arguments.length > 1) {
            n = Number(arguments[1]);
            if (n != n) { // shortcut for verifying if it's NaN
                n = 0;
            } else if (n != 0 && n != Infinity && n != -Infinity) {
                n = (n > 0 || -1) * Math.floor(Math.abs(n));
            }
        }
        if (n >= len) {
            return -1;
        }
        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);
        for (; k < len; k++) {
            if (k in t && t[k] === searchElement) {
                return k;
            }
        }
        return -1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:33:08.337

这条线是干什么用的

```
position > -1 && arrFruits.splice( position, 1 ); 
```

它要么评估要么`true`然后`false`你不做任何事情。这可能会导致 IE 中的语法错误，Chrome 和 Firefox 上更宽容的 Javascript 引擎会忽略它。

也许你的意思是`if`发表声明？

```
 if(position > -1) {
     arrFruits.splice( position, 1 ); 
} 
```

# webdriver - 我在 Selenium RC 中使用以下代码生成了随机数，但它在 Webdriver 中不起作用

> ID：13816232
> 
> 赞同：0
> 
> 时间：2012-12-11T08:23:13.083
> 
> 标签：webdriver, selenium-webdriver

对于 Selenium RC 中的随机数生成，我有代码，但它在 Webdriver 中无法正常工作。如果我在 webdriver 中使用下面的代码，它会返回 null。请在 webdriver 中找到以下代码

```
String Randnum = (String) ((JavascriptExecutor) driver).executeScript("var d=new Date().getFullYear()+new Date().getDate().toString()" +
            "+new Date().getDay()" +
            "+new Date().getHours()" +
            "+new Date().getMinutes()" +
            "+new Date().getSeconds()" +
            "+new Date().getMilliseconds()"); 
```

请帮助我解决这个问题......我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:14:29.497

您缺少 return 语句。没有，javascript 将运行但不返回任何内容。

```
String Randnum = (String) ((JavascriptExecutor) driver).executeScript("return new Date().getFullYear() + new Date().getDate().toString() + new Date().getDay() + new Date().getHours() + new Date().getMinutes() + new Date().getSeconds() + new Date().getMilliseconds()"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:22:23.353

为什么你不能用 Java 尝试同样的事情？

```
Calendar currentDate = Calendar.getInstance();
SimpleDateFormat formatter= new SimpleDateFormat("MM_dd_yyyy_hh_mm_ss");
String randomName = formatter.format(currentDate.getTime()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:30:15.020

下面的javascript代码

```
function displayRandum()
{

     var d = new Date().getFullYear()+new Date().getDate().toString() + new Date().getDay() + new Date().getHours()+new Date().getMinutes() + new Date().getSeconds()+new Date().getMilliseconds();
     alert(d);

} 
```

完美运行。您可以尝试在您的 Selenium 代码中，将所有内容都放在一行中（没有额外的“+”和“字符）。

**编辑：（错过了返回声明。看到 Arran 的回复并意识到它）。**

```
function returnRandum()
{

     var d = new Date().getFullYear()+new Date().getDate().toString() + new Date().getDay() + new Date().getHours()+new Date().getMinutes() + new Date().getSeconds()+new Date().getMilliseconds();
     return d;

} 
```

# sql-server - 如何在查询中执行统计计算？

> ID：13816239
> 
> 赞同：1
> 
> 时间：2012-12-11T08:23:42.407
> 
> 标签：sql-server, distribution, statistics

我有一张表，里面装满了浮点值。我需要计算按平均值（[高斯分布](http://en.wikipedia.org/wiki/Gaussian_distribution)）分布分组的结果数量。基本上，它是这样计算的：

```
SELECT COUNT(*), FloatColumn - AVG(FloatColumn) - STDEV(FloatColumn) 
FROM Data 
GROUP BY FloatColumn - AVG(FloatColumn) - STDEV(FloatColumn) 
```

但由于显而易见的原因，SQL Server 给出了这个错误：`Cannot use an aggregate or a subquery in an expression used for the group by list of a GROUP BY clause.`

我的问题是，我能以某种方式将此计算留给 SQL Server 吗？还是我必须用老式的方式来做？检索所有数据，然后自己进行计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:33:30.750

要获取整个集合的聚合，您可以使用空`OVER`子句

```
WITH T(Result)
     AS (SELECT FloatColumn - Avg(FloatColumn) OVER() - Stdev(FloatColumn) OVER ()
         FROM   Data)
SELECT Count(*),
       Result
FROM   T
GROUP  BY Result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:37:05.960

[SQL小提琴](http://sqlfiddle.com/#!6/db484/3)

您可以执行数据的预聚合，并连接回表。

**架构设置**：

```
create table data(floatcolumn float);
insert data values
  (1234.56),
  (134.56),
  (134.56),
  (234.56),
  (1349),
  (900); 
```

**查询 1**：

```
SELECT COUNT(*) C, D.FloatColumn - A
  FROM
    (
    SELECT AVG(FloatColumn) + STDEV(FloatColumn) A
        FROM Data
    ) preagg
CROSS JOIN Data D
GROUP BY FloatColumn - A; 
```

**[结果](http://sqlfiddle.com/#!6/db484/3/0)**：

```
| C |           COLUMN_1 |
--------------------------
| 2 | -1196.876067819572 |
| 1 | -1096.876067819572 |
| 1 |  -431.436067819572 |
| 1 |   -96.876067819572 |
| 1 |    17.563932180428 | 
```

# database - 插入后的 Oracle 触发器

> ID：13816243
> 
> 赞同：1
> 
> 时间：2012-12-11T08:24:00.960
> 
> 标签：database, oracle, triggers

我有一个消息表。在插入消息后，我需要将该插入的 UserID 和 MsgID 插入到 messageRecipient 表中。如果消息被发送到组，则需要将其插入到属于该组的每个用户。这是我所拥有的，但它没有插入到 messageRecipient 表中：

```
create or replace trigger update_messages
after insert on messages referencing new as new old as old  
for each row
declare 
      userID1 int(10);
      msgID1 int(10);
      groupID1 int(10);
begin
      userID1 := :new.ToUserID;
      msgID1 := :new.msgID;
      groupID1 := :new.ToGroupID;

     if inserting then
            if(userID1 <> null)
                then INSERT INTO messageRecipient VALUES(msgID1, userID1);
            elsif(groupID1 <> null)
                THEN INSERT INTO messageRecipient(msgID, userID) SELECT msgID1, userID FROM groupMembership WHERE gID = groupID1;
            end if;
     end if; 
end;
/ 
```

这里到底出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:23:18.180

```
create or replace trigger update_messages
-- after insert on messages referencing new as new old as old  
-- for each row

declare 
    userID1 int(10);
    msgID1 int(10);
    groupID1 int(10);
begin
    userID1 := :new.ToUserID;
    msgID1 := :new.msgID;
    groupID1 := :new.ToGroupID;

     if(userID1 is not null)
            then INSERT INTO messageRecipient VALUES(msgID1, userID1);
        elsif(groupID1 is not null)
            THEN INSERT INTO messageRecipient(msgID, userID) SELECT msgID1, userID FROM groupMembership WHERE gID = groupID1;
        end if;
 end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:35:00.007

与`null`PL/SQL 中的比较将评估为`null`. 条件语句仅在`true`. 检查[here](http://www.techonthenet.com/oracle/isnull.php)以获得一些参考。

更改`userID1 <> null`为`userID1 is not null`和。`groupID1 <> null`_`groupID1 is not null`

此外，您不需要添加`if inserting`，因为此触发器仅适用于插入语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:11:57.757

我建议您需要回答“我如何找出这里出了什么问题”的问题

如果您在逻辑之前添加插入...

```
 INSERT INTO messageRecipient VALUES(msgID1, userID1);

     if inserting then..... 
```

这会告诉您触发器正在触发并且正在获取您的新值

所以一定是比较逻辑不起作用..

如果你有一个 catch all 条件，你可能会引发一个错误，这也可以让你准确地看到问题出在哪里

```
if(userID1 is not null) then 
    INSERT INTO messageRecipient VALUES(msgID1, userID1);
elsif(groupID1 is not null) THEN 
    INSERT INTO messageRecipient(msgID, userID) 
        SELECT msgID1, userID FROM groupMembership WHERE gID = groupID1;
else
    RAISE ERROR HERE
 end if; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:36:45.377

也许您正在检查来自另一个会话的 messageRecipient 表。请记住，触发器是插入消息表的事务的一部分，因此在提交出现之前不会看到任何更改。

# c# - c++ char** 转换 c#

> ID：13816244
> 
> 赞同：1
> 
> 时间：2012-12-11T08:24:10.993
> 
> 标签：c#, c++, marshalling

我有一个 dll 文件，结构定义如下，

```
typedef struct test{
    DWORD NOD;          // Number of the devices ready to work
    char **a;       // Array of 16 byte ASCII strings
    char **b;       // Array of 4 byte ASCII strings
} test; 
```

我想在 c# 中声明这个结构，所以我知道我必须使用 Marshal 但我应该怎么做？

我的 dll 导入功能

```
[DllImport("USMCDLL.dll",CharSet=CharSet.Ansi)]
private static extern UInt32 USMC_Init(ref USMC_Devices str); 
```

我像使用它一样

```
Test DVS = new Test();

public void Init_()
{
    fonk(ref DVS);
} 
```

# objective-c - self.navigationController 和 pushViewController 的问题

> ID：13816245
> 
> 赞同：0
> 
> 时间：2012-12-11T08:24:13.110
> 
> 标签：objective-c, xcode, uitableview

我无法从表格视图推送到详细视图。当我单击 tableview 单元格时，单元格会突出显示但不会推送到详细视图。我正在使用它来转换到详细视图：

```
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

我读过这是一个常见问题，但不知何故无法找到解决方案。我的完整 .m 文件如下。如果有人有任何建议，那就太棒了。谢谢！

```
#import "ViewController.h"
#import "DetailViewController.h"
@interface ViewController ()
@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
self.title = @"title";

[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

NSURL *url = [NSURL URLWithString:@"http://website.com/json.php"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[[NSURLConnection alloc] initWithRequest:request delegate:self];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

news = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
[mainTableView reloadData];
}

- (int)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [news count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

if(cell == nil){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
}

cell.textLabel.text = textForMyLabel;
return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

UIBarButtonItem *newBackButton = [[UIBarButtonItem alloc] initWithTitle: @"Back" style: UIBarButtonItemStyleBordered target: nil action: nil];

[[self navigationItem] setBackBarButtonItem: newBackButton];

DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
detailViewController.title = [[news objectAtIndex:indexPath.row] objectForKey:@"name"];
detailViewController.newsArticle = [news objectAtIndex:indexPath.row];
[self.navigationController pushViewController:detailViewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:37:13.973

您可以使用 UINavigationController 执行推送，如果您的 Controller 是 UINavigationController，上述代码将起作用。由于您尝试集成两个项目，只需检查 RootViewController 是否为 UINavigationController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:33:38.020

你试试：

```
[self presentModalViewController: detailViewController animated:YES]; 
```

# ruby-on-rails - Ruby中的正则表达式不起作用

> ID：13816248
> 
> 赞同：1
> 
> 时间：2012-12-11T08:24:24.263
> 
> 标签：ruby-on-rails, ruby, regex

我有一个字符串，我想从中提取某个部分：

原始字符串：`/abc/d7_t/g-12/jkl/m-n3/pqr/stu/vwx`

期望的结果：`/abc/d7_t/g-12/jkl/`

整个字符串中的字符数可以不同。它有字母、数字、下划线和连字符。我想基本上在第5个“/”之后剪断字符串

我尝试了一些正则表达式，但格式似乎存在一些错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:46:42.767

如果可以接受非正则表达式方法，那么如何：

```
s.split('/').take(n).join('/')+'/' 
```

`s`如果您的字符串在哪里（在您的情况下：）`/abc/d7_t/g-12/jkl/m-n3/pqr/stu/vwx`。

```
def cut_after(s, n)
  s.split('/').take(n).join('/')+'/'
end 
```

然后

```
cut_after("/abc/d7_t/g-12/jkl/m-n3/pqr/stu/vwx", 5) 
```

应该管用。不像正则表达式那样紧凑，但有些人可能会发现它更清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T08:47:24.217

正则表达式将是：`%r(/(?:[^/]+/){4})`. 请注意，在这种情况下，最好使用 %r 文字版本来避免转义斜杠。未转义的斜杠可能是您的格式错误的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:37:25.323

匹配除 '/' 之外的任何字符序列 4 次：-

```
(\/[^\/]+){4}\/ 
```

# css - 包含子浮动的 IE7 浮动问题

> ID：13816253
> 
> 赞同：2
> 
> 时间：2012-12-11T08:25:01.880
> 
> 标签：css, internet-explorer-7, css-float

```
<html>
    <head>
        <title>Float Issue in IE7</title>
        <style type="text/css">
            .right { float: right; }
            .left { float: left; }
            .clear { clear: both; }
        </style>
    </head>
    <body>
        <div class="right">
            <div class="right">Right Text</div>
            <br/><br/>
            <div class="right">Right Text 2</div>
        </div>                        
        <div class="left">Left Text</div>
    <br class="clear" />
</body>
</html> 
```

问题是“左文本”出现在“右文本 2”之后，而不是 IE7 中的“右文本”。

我已经搜索了一个多小时并尝试了很多东西，但无法修复它。

任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:31:14.260

试试这段代码，是你想要的吗？

[演示](http://jsfiddle.net/hXdDu/1/)

```
<html>
    <head>
        <title>Float Issue in IE7</title>
        <style type="text/css">
            .right { float: right; }
            .left { float: left; }
            .clear { clear: both; }
        </style>
    </head>
    <body>

        <div class="right">Right Text</div>
        <br/>
        <div class="left">Left Text</div>
        <br class="clear" />
        <div class="right">Right Text 2</div>                           
    <br class="clear" />
</body>
</html>​ 
```

# php - 处理存储在数据库中的文章中的图像

> ID：13816260
> 
> 赞同：1
> 
> 时间：2012-12-11T08:25:41.143
> 
> 标签：php, mysql

我目前正在使用自定义滚动的 CMS 构建网站。对于我的博客，在默认视图中，我只想完整显示最近的帖子，然后是前 19 篇文章的片段。

我目前为截断帖子选择帖子信息的方法是：

```
SELECT subjectColumn, dateColumn, LEFT(textColumn, 300) AS textColumn,
 CHAR_LENGTH(textColumn) AS length FROM tableName
 WHERE UNIX_TIMESTAMP(dateColumn) < ?
 ORDER BY UNIX_TIMESTAMP(dateColumn) DESC LIMIT ?, ? 
```

-- 是的，我正在使用准备好的查询。

我计划将返回的文本字段的长度与长度字段中的关联值进行比较，并在必要时在末尾附加一个指向全文的链接。

我面临的问题是：如果帖子包含图像怎么办？通过使用 substring 函数，我最终可以修改图像引用，无论是将其存储为图像本身的链接，还是对数据库中另一个表的引用。

我目前有一些解决这个问题的想法：

1.  我可能会简单地加载整个文本，并在截断之前剔除任何图像引用。
2.  我可以在发布之前检查文本结果，并从最后修剪损坏的引用。
3.  我可以加载更少的帖子，并将它们全部显示出来。

如果有人可以提供我可能会忽略的想法，我将不胜感激

# mysql - MySQL连接数和容量

> ID：13816261
> 
> 赞同：0
> 
> 时间：2012-12-11T08:25:45.637
> 
> 标签：mysql

我知道这是非常基本的。但是想明确一些mysql连接的概念。我有以下情况。

*   数据库服务器和 Web 服务器位于不同的位置。
*   Web 服务器正在运行基于文章的网站。
*   文章数据存储在数据库服务器中。
*   Web 服务器每秒传送 100 篇文章/页。

我的问题如下：

*   Web服务器和数据库服务器之间的单一连接可以处理吗？
*   默认情况下会创建多少个连接？
*   如果我假设连接是管道，那么每个连接的 i/o 容量是多少？
*   数据库服务器的内存、处理器、操作系统和连接数之间有什么关系吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:36:54.787

> web服务器和db服务器之间的单一连接可以处理吗？

单个连接可以传递多个请求，但不能同时传递，并且只针对单个客户端进程。因此，最好的扩展方法可能是每个 Web 服务器进程一个连接池，其中线程可以获得已建立的连接来执行它们的请求，并在完成后将连接返回到池中。

> 默认情况下会创建多少个连接？

取决于客户端语言、MySQL 连接器实现、您使用的框架、Web 服务器配置，可能还有很多其他类似的细节。所以最好的办法是简单地查看 MySQL 服务的网络连接列表，例如使用`lsof`or `netstat`。

> 如果我假设连接是管道，那么每个连接的 i/o 容量是多少？

限制因素可能是共享资源，例如两端的网络带宽或处理能力。所以连接的数量不应该对数据传输率有很大的影响。但是，建立连接的开销很大，这就是为什么我建议使用池来减少连接数量的原因。

> 数据库服务器的内存、处理器、操作系统和连接数之间有什么关系吗？

可能是，如果某些应用程序根据这些参数做出选择，但总的来说，我认为这不太可能。

# wordpress - Wordpress - 在菜单过滤器中获取页面 id

> ID：13816264
> 
> 赞同：0
> 
> 时间：2012-12-11T08:26:02.130
> 
> 标签：wordpress, menu, filter

我正在为菜单使用过滤器，并且需要获取菜单中页面的 ID。这就是我所拥有的：

菜单过滤器：

```
add_filter('wp_nav_menu_items', 'custom_menu_function', 10, 2);
```

然后过滤器函数像这样开始：

```
功能 custom_menu_function ( $items, $args ) {

 $dom = 新的 DOMDocument();

        $dom->loadHTML($items);

        $linkNodes = $dom->getElementsByTagName('a');

        $classes= $dom->getElementsByTagName('li');

        $count = $linkNodes->长度；       

        for($i = 0; $i < $count; $i++){

          如何在此处获取每个菜单项的页面 ID，
          不是菜单项的id？

        }

}

```

因此，如果我创建了 id=2 的页面 Test 并且菜单中有 tbhi 项。如何在上面的菜单过滤器中获取它的 id(2)？

我错过了一些基本的东西吗？

肿瘤坏死因子。

# iphone - iPhone：图像文件扩展名与我的应用程序无关

> ID：13816265
> 
> 赞同：3
> 
> 时间：2012-12-11T08:26:07.857
> 
> 标签：iphone, objective-c, ios, image, file-extension

我正在尝试关联我的 iPhone 应用程序以打开图像文件，例如 jpeg 和 png。我是这样做的：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.image</string>
        </array>
    </dict>
</array> 
```

但是这个解决方案不起作用。例如，如果我将*public.image替换为**public.objective-c-source* ，我的应用程序将开始打开 ​​Objective-c 源代码。但是当我使用*public.image*或*public.jpeg*时它不起作用。

你能告诉我我的错误在哪里吗？谢谢你的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:03:28.340

根据[苹果开发者论坛中的这个问题](https://devforums.apple.com/thread/140939?tstart=0)（您需要登录 devforums.apple.com 才能看到此链接），这是不可能的。那里提到的原因如下，

> 不允许，这意味着您将使用 iOS 相机和照片应用程序的默认行为。注册您的应用程序独有的文件类型。

# javascript - SQL Server 2008 日期 - 客户端和服务器端

> ID：13816270
> 
> 赞同：-2
> 
> 时间：2012-12-11T08:26:47.643
> 
> 标签：javascript, sql-server, datetime

我一直在互联网上寻找答案，但我没有找到任何答案。

`gettime()`我必须在我的表中的日期（总是保存，因此它将是服务器的日期格式）和我的 Web 应用程序中的日期之间进行数据比较。我有一个日期选择器，它以这样的格式获取日期`'Sun Nov 11 2012 00:00:00 GMT+0200 (GTB Standard Time)'`。我将日期格式化为使用英文设置 SQL 服务器日期，它可以工作。问题是，例如，如果来自法国的用户安装 Web 应用程序，`gettime()`功能将根据区域设置以另一种格式保存日期。我的问题是：

1.  是否有任何 SQL 函数可以将格式为“Sun Nov 11 2012...”的日期转换为服务器格式（日期类型来自`getdate()`函数的日期类型）？- 如果我将该字符串日期作为我的存储过程的参数发送
2.  你对解决这个问题有什么建议？

非常感谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:30:34.083

`YYYY-MM-DD`一直对我有用 - 使用 transact-sql`convert`函数

[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

```
CONVERT(datetime, MyDateColumn, 127) AS UsingConvertTo_ISO8601_WithTimeZone 
```

`127`成为你想要的格式

# wordpress - 限制帖子标题中的字数

> ID：13816272
> 
> 赞同：2
> 
> 时间：2012-12-11T08:26:58.090
> 
> 标签：wordpress

有没有办法限制帖子标题的字数？

我在互联网上搜索但没有找到。

我所知道的是，只能限制或摘录帖子的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:07:04.510

只需在您想用有限的字词显示标题的地方使用它

```
<?php echo wp_trim_words( get_the_title(), 5 ); ?> 
```

将上面代码中的数字 5 替换为您需要显示的任何数量的单词。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:34:27.210

以下将限制用户可以在*管理区域中输入的**字符*数，即在撰写帖子时。

 *```
add_action( 'admin_head-post.php', 'so_13816272_limit_input_title' );

function so_13816272_limit_input_title(  )
{
    global $current_screen;
    // Not our post type, exit earlier
    if( 'post' != $current_screen->post_type )
        return;
    ?>
    <script type="text/javascript">
        jQuery(document).ready( function($) 
        {
            $('#title').keyup( function() 
            {
                var $this = $(this);
                if($this.val().length > 50)
                    $this.val($this.val().substr(0, 50));           
            });           
        });     
    </script>
    <?php 
} 
```

如果你想做*字数*统计，请参考[这篇文章](http://www.electrictoolbox.com/jquery-count-words-textarea-input/)并将函数改编成上面的代码。*

# unix - awk $(NF-1) 中的语法错误 - 未找到 NF-1 命令

> ID：13816274
> 
> 赞同：1
> 
> 时间：2012-12-11T08:27:01.973
> 
> 标签：unix, awk

```
for INSTANCE in $INSTANCES
do
  ssh weblogic@${SERVER} "egrep \"^$SEARCHHOUR1:$SEARCHMIN1.*DEBUG.*LONG QUERY.* ms.\$|^$SEARCHHOUR2:$SEARCHMIN2.*DEBUG.*LONG QUERY.* ms.\$\" vgprod1/mw.log.$INSTANCE  | awk '{ $(NF-1)>=10000 }' "
done 
```

错误：

```
NF-1: command not found
awk: cmd. line:1: { >=10000 }
awk: cmd. line:1:   ^ syntax error 
```

在 Unix 服务器上执行时出现上述错误。我想我在 AWK 的某些地方缺少反斜杠。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:42:02.923

正如*sarathi*所指出的，您的问题是未引用的`$`。

如果您拆分命令，可能更容易发现：

```
pattern="^$SEARCHHOUR1:$SEARCHMIN1.*DEBUG.*LONG QUERY.* ms.\$|^$SEARCHHOUR2:$SEARCHMIN2.*DEBUG.*LONG QUERY.* ms.\$"

for INSTANCE in $INSTANCES
do
  ssh weblogic@${SERVER} "egrep '$pattern' vgprod1/mw.log.$INSTANCE  | awk '\$(NF-1) > 1000'"
done 
```

另请注意，`egrep '$pattern'`当它用双引号引起来时，它会正确展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:29:52.167

转义`$`标志如下：

`\$`在`awk '{ \$(NF-1)....`

# javascript - if else 语句不起作用？

> ID：13816275
> 
> 赞同：-1
> 
> 时间：2012-12-11T08:27:07.410
> 
> 标签：javascript, conditional-statements, if-statement

有人可以告诉我为什么这不起作用吗？我已经尝试了很多改变结构，但我放什么似乎并不重要，当应用 if else 语句时，它停止工作。

```
 function wordSplit(){
        var sentence = document.getElementById("two").value;
        var userWords=sentence.split(" ");
        while(t<userWords.length){
            alert(userWords[t]);
            t++
        };
        x = 0;
        for (var x = 0; x < userWords.length; x++){
            y = 0;
            for (var y = 0; y < vocab.length; y++){

                if (y<vocab.length) {
                    alert("y is less than vocab")
                };
                else if (vocab[y] == userWords[x]){
                    alert("y is equal to x")
                };
                else if(y<vocab.length) {
                    alert("y is less than vocab 2")
                };
                else if (y == vocab.length){
                    alert(" y is equal to vocab length")
                };
                else if (y == 0)
                {
                    alert("y is equal to zero)
                };

            };

        };
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:28:40.607

您没有关闭上次警报中的引号：

```
alert("y is equal to zero) 
```

另外正如评论所说 - 删除`if/else`.

```
 if (y<vocab.length) {
                alert("y is less than vocab")
            }
            else if (vocab[y] == userWords[x]){
                alert("y is equal to x")
            }
            else if(y<vocab.length) {
                alert("y is less than vocab 2")
            }
            else if (y == vocab.length){
                alert(" y is equal to vocab length")
            }
            else if (y == 0)
            {
                alert("y is equal to zero")
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:30:16.300

这个：

```
 if (y<vocab.length) {
                alert("y is less than vocab")
            };
            else if (vocab[y] == userWords[x]){
                alert("y is equal to x")
            };
            else if(y<vocab.length) {
                alert("y is less than vocab 2")
            };
            else if (y == vocab.length){
                alert(" y is equal to vocab length")
            };
            else if (y == 0)
            {
                alert("y is equal to zero)
            }; 
```

应该是这样（注意分号和结尾的“）：

```
 if (y<vocab.length) {
                alert("y is less than vocab");
            }
            else if (vocab[y] == userWords[x]){
                alert("y is equal to x");
            }
            else if(y<vocab.length) {
                alert("y is less than vocab 2");
            }
            else if (y == vocab.length){
                alert(" y is equal to vocab length");
            }
            else if (y == 0)
            {
                alert("y is equal to zero");
            } 
```

请注意`"`您的最终`if else`警报没有关闭。此外，分号 ( `;`) 不会放在条件语句的末尾。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T08:35:13.510

这是对您的代码的快速编辑，其中包含对预期结果的假设：

```
function wordSplit() {

    var sentence = document.getElementById("two").value;
    var userWords=sentence.split(" ");
    var t = 0;

    while( t < userWords.length) {
        console.log(userWords[t]);
        t++;
    }

    for (var x = 0; x < userWords.length; x++) {
      var y = vocab.indexOf(userWords[x]);
      if (y == -1) {
        console.log(userWords[x] + ' is not found in vabulary list');
      } else {
        console.log(userWords[x] + ' is found in vabulary list');
      }
    }
} 
```

# php - Magento 添加到愿望清单按钮不起作用

> ID：13816278
> 
> 赞同：0
> 
> 时间：2012-12-11T08:27:11.433
> 
> 标签：php, html, internet-explorer, magento, button

我需要将愿望清单链接设为按钮，因此我将 addTo.phtml 中的代码从

```
<li><a href="<?php echo $_wishlistSubmitUrl ?>" onclick="productAddToCartForm.submitLight(this, this.href); return false;" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>

<button type="button" class="button fabriqButton2"><a href="<?php echo $_wishlistSubmitUrl ?>" onclick="productAddToCartForm.submitLight(this, this.href); return false;"><span><span><?php echo __('Add to Wishlist');?></span></span></a></button> 
```

出于某种原因，这适用于 Chrome 和 Firefox，但不适用于 IE。有谁知道如何让它作为一个按钮工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:30:34.487

尽量避免在`<a>`标签内使用`<button>`标签。而是将所有内容移动到按钮的 onclick 并删除`<a>`标签。

```
<button type="button" class="button fabriqButton2" onclick="productAddToCartForm.submitLight(this, '<?php echo $_wishlistSubmitUrl ?>');"><span><span><?php echo __('Add to Wishlist');?></span></span></button> 
```

你的第二个问题：

```
<button type="button" class="button backLink fabriqButton" onclick="setLocation('<?php echo $this->escapeUrl($this->getBackUrl()) ?>');"><span><span><?php echo __('Back');?></span></span></button> 
```

**注意** setLocation 是 Magento 的自定义方法。如果您需要它用于其他项目，您很可能会使用`window.location.href = 'http://www.google.com/'`

# objective-c - .h 实例变量声明

> ID：13816282
> 
> 赞同：1
> 
> 时间：2012-12-11T08:27:26.070
> 
> 标签：objective-c, xcode, controller, declaration

我很难理解为什么在某些教程中两次声明以下文本字段。

在 .h 文件中：

```
# include <UIKit/UIKit.h>

@interface MyViewController : UIViewController {

    UITextField *name;  // <----- What do I need this for? Is it the same as below?
}

@property (nonatomic, strong) IBOutlet UITextField *name;  // <----- Same as this?

@end 
```

起初我以为这就像一个实例变量，但它们只在 .m 文件中声明，对吧？

.m 文件

```
#import "MyViewController.h"

@implementation UIViewController {

    NSString *myString; // <----- This is an instance variable, right?

} 
```

什么是“UITextField *name;” 为了？我不只需要前面有@property 的第二个吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:48:12.043

如果您的目标是 iPhone OS 或 64 位 Mac OS X，那么您不需要为您的属性定义 ivars。看看[Dynamic ivars：解决一个脆弱的基类问题](http://www.cocoawithlove.com/2010/03/dynamic-ivars-solving-fragile-base.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:55:15.520

这是一种老方法，只要使用属性就可以了。如果两者都声明，则必须使用@synthesize 名称；在您的 .m 文件中使 self.name 与名称相同。XCode4.2 自动合成名称 = _name。所以在你的 .m 文件中尽可能使用 self.name 。

当您不想实现 setter 和 getter 时，{} 中的变量仅用于内部或私有。

# wolfram-mathematica - Mathematica 嵌套匿名变量 Arity 函数

> ID：13816284
> 
> 赞同：1
> 
> 时间：2012-12-11T08:27:44.070
> 
> 标签：wolfram-mathematica, anonymous-function, arity

我正在尝试将以下方案代码转换为 Mathematica（版本 8，如果重要的话）：

```
(define (((lift g) . fs) . args)
  (apply g
         (map (lambda (f) (apply f args))
              fs))) 
```

然后，您可以执行以下操作：

```
(let ((add (lift +))
      (square (lift sqr)))
  ((add (square sin) (square cos)) 42))
; returns 1, since sin^2(42) + cos^2(42) = 1 
```

该部分`(add (square sin) (square cos))`创建一个函数`x -> sin^2(x) + cos^2(x)`。

无论如何，我尝试在 Mathematica 中对此进行编码，但我似乎无法走得太远。这是我想写的：

```
lift[g_] := Function[{fs__}, Function[{args__},
            g @@ Map[(# @@ args)&, fs]]] 
```

我想要`fs__`并且`args__`被绑定到它们各自函数的所有参数的列表中。但随后 Mathematica 抱怨“参数规范”`Function`应该是“一个符号或符号列表”。我知道我可以使用`()&`样式匿名函数并使用`##`来获取所有参数，但问题是当我嵌套其中两个匿名函数时，我失去了从内部函数访问外部参数的能力。

如何编写具有可变参数（和命名参数）的匿名函数？还是我应该在 Mathematica 中以另一种方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:51:15.517

我不确定这个函数是否符合您的要求，但您可以`SlotSequence`使用捕获外部函数的 (##)`With`

```
lift[g_] := Function[
  With[{fs = ##},
   Function[
    With[{args = ##},
     g @@ Map[(#[args]) &, List[fs]]]]]] 
```

然后：

```
lift[f][a, b][c, d] 
```

-> f[a[c, d], b[c, d]]

或者，更具可读性：

```
lift[g_] := Function[
  With[{fs = g[##]},
   Through[fs[##]] &]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:24:00.543

nikie 给出了一个很好的答案。我希望这个补充它。

您可以使用 创建临时函数`Module`，它为您提供参数规范的全套模式选项。例如，使用 nikie 的简洁方法：

```
lift1[g_] := Module[{fn}, fn[a__] := Through[g[a][##]] &; fn]

lift1[f][a, b][c, d] 
```

> ```
> f[a[c, d], b[c, d]] 
> ```

在这种特殊情况下，您还可以使用`SubValues`如下规则：

```
lift2[g_][h__] := Through[g[h][##]] &

lift2[f][a, b][c, d] 
```

> ```
> f[a[c, d], b[c, d]] 
> ```

甚至根本没有`Function`：

```
lift3[g_][h__][i__] := Through[ g[h][i] ]

lift3[f][a, b][c, d] 
```

> ```
> f[a[c, d], b[c, d]] 
> ```

# file-upload - multipartdata 和 application/octent-stream 文件上传的区别

> ID：13816285
> 
> 赞同：1
> 
> 时间：2012-12-11T08:27:46.500
> 
> 标签：file-upload, multipartform-data

我知道 application/octent-stream 可以跳过请求中边界混乱的设置。

与 multipartdata 相比，内容类型为 application/octent-stream 的文件上传还有哪些其他优势。

# ajax - 来自本地文件的jQuery ajax POST访问跨域不起作用

> ID：13816286
> 
> 赞同：5
> 
> 时间：2012-12-11T08:27:57.793
> 
> 标签：ajax, jquery, cross-domain, cors

正如标题所说，我正在尝试使用 jQuery AJAX 调用来访问（POST）一个 web url，`http://host:port/...`或者`http://localhost:8080/...`从一个本地 HTML 文件，`c:\home.html`. 我无法让它工作。

我做了谷歌，也在这里看到了几个问题，但我无法让它工作。我需要一些帮助。这是我到目前为止所尝试的。

1.  数据类型：jsonp
2.  跨域：真
3.  在我的回复中设置标题：

```
response.setHeader("Access-Control-Allow-Origin", "*"); 
```

三种浏览器都没有工作 - IE、FF 或 Chrome。请求永远不会到达服务器。这是我看到的一些错误。

1.  如果不使用 jsonp，则不使用传输 (IE)。
2.  NS_BINDING_ABORTED / 在 FF 中加载内容时出错 (NS_ERROR_DOCUMENT_NOT_CACHED)

这是我的代码。我将不胜感激任何帮助。我正在使用`jquery-1.8.2.min.js`.

```
var http_host =  "http://localhost:8080";

function su (pc, p) {
    var suUrl = http_host + "/ps/api/v2/authorize.json";

    $.ajax({
        type: 'POST',
        url: suUrl,
        data: {
            phone_cell: pc,
            password: p,
        },
        dataType: "json",
        crossDomain: true,
        success: osu,
        error: oe
    });
    return false;
}

function osu (d) {
    console.log(d);
}

function oe(xhr, ts, et)     {
    alert("ServerError: " + et);
} 
```

一个例子就是一个完美的指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:40:56.023

我想我的代码被我尝试的所有不同解决方案弄乱了。我终于能够通过设置标题来让它工作（推荐并为其他人工作的解决方案）。为了让它工作，我所要做的就是将以下内容添加到我的 REST 服务响应中。

```
response.setHeader("Access-Control-Allow-Origin", "*"); 
```

更新：

我以为我知道了，但我没有。它不仅仅是设置标题。无论如何，在我的具体情况下。我试图从硬盘驱动器上运行我的应用程序（html、js），特别是在 chrome 上，并尝试访问云上可用的 Web 服务。

这是我最终解决问题的方法。我使用以下参数启动了 chrome。

```
--disable-web-security -–allow-file-access-from-files 
```

就像我之前提到的，这个应用程序实际上是一个桌面应用程序，将作为 Chromium 嵌入式框架的一部分运行。

谢谢各位的意见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:40:37.677

您不能从本地文件发出跨域请求，因为它不在**域**上。您需要托管`C:\home.html`在本地网络服务器实例上才能使其工作。

# camera - 在 libgdx 项目中通过加速、减速等将相机绑定到我的游戏人

> ID：13816288
> 
> 赞同：0
> 
> 时间：2012-12-11T08:28:13.320
> 
> 标签：camera, libgdx

那么，我该怎么做呢？例如，我的人向右走，相机开始以加速度移动到人的坐标，当他停下时 - 相机以减速的方式移动到人的坐标。当然，我可以自己制作，但是有没有图书馆可以帮助我呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:01:25.790

我建议使用通用补间引擎。您可以添加一个短暂的延迟和适当的数学方程来平滑相机转换。

[http://www.aurelienribon.com/blog/projects/universal-tween-engine/](http://www.aurelienribon.com/blog/projects/universal-tween-engine/)

# php - 使用 MySQL 和 PHP 的 SQL 语法错误

> ID：13816293
> 
> 赞同：0
> 
> 时间：2012-12-11T08:28:28.970
> 
> 标签：php, mysql, sql

SQL 语句无效。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 'nmc_cd.CDTitle LIMIT 0 , 30' 附近使用正确的语法

```
'$sql = "SELECT nmc_cd.CDTitle, nmc_cd.CDYear, nmc_cd.CDPrice, nmc_category.catDesc, nmc_publisher.pubName
FROM nmc_cd
NATURAL JOIN nmc_category
NATURAL JOIN nmc_publisher
ORDERBY nmc_cd.CDTitle
LIMIT 0 , 30";' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:30:08.000

由于以下原因，您有语法错误`ORDERBY`：

```
...
NATURAL JOIN nmc_publisher 
ORDERBY nmc_cd.CDTitle LIMIT 0 , 30"
  /\
  Here 
```

不是`ORDER BY`，`ORDERBY`试试这个：

```
SELECT 
  nmc_cd.CDTitle, 
  nmc_cd.CDYear, 
  nmc_cd.CDPrice, 
  nmc_category.catDesc, 
  nmc_publisher.pubName 
FROM nmc_cd 
NATURAL JOIN nmc_category 
NATURAL JOIN nmc_publisher 
ORDER BY nmc_cd.CDTitle LIMIT 0 , 30" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:34:23.867

```
SELECT nmc_cd.CDTitle, nmc_cd.CDYear, nmc_cd.CDPrice, nmc_category.catDesc, nmc_publisher.pubName FROM nmc_cd NATURAL JOIN nmc_category NATURAL JOIN nmc_publisher
ORDER BY nmc_cd.CDTitle LIMIT 0 , 30 
```

`ORDER BY`改为使用`ORDERBY`

# python - 可以scrapy从python中的多个类的标签中找到类

> ID：13816297
> 
> 赞同：1
> 
> 时间：2012-12-11T08:28:42.073
> 
> 标签：python, django, scrapy

我想知道如果我有这个 div 标签

```
<div class="class1 class2 class3" >  some stuff </div> 
```

那么如果我提到这个`//div[@class='class2']`

它会找到它还是只找到单个类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:57:25.977

这已经被问[过](https://stackoverflow.com/questions/1390568/xpath-how-to-match-attributes-that-contain-a-certain-string)，但你应该使用：

```
//*[contains(concat(' ', normalize-space(@class), ' '), ' class2 ')] 
```

*注意有一些用于评估 xpaths的在线[工具](http://xpath.online-toolz.com/tools/xpath-editor.php)*

# c# - c#如何测试对接口的引用

> ID：13816305
> 
> 赞同：2
> 
> 时间：2012-12-11T08:29:00.963
> 
> 标签：c#, unit-testing, interface, moq

我之前问过一个关于如何[在测试方法时设置接口值的](https://stackoverflow.com/questions/13655557/set-value-of-interface-in-testing-a-method)问题 。我已经成功地将 Moq 框架实施到我的项目中，并且测试运行良好。

这是我推荐的示例代码：

```
public void PostEvent(
            eVtCompId inSenderComponentId, 
            eVtEvtId inEventId, 
            long inEventReference, 
            IF_SerializableData inEventData)
{
    if(mEventMap.ContainsKey(inEventId))
    {
        mEventMap[inEventId](inSenderComponentId, inEventReference, inEventData);
    }
} 
```

这里我有 4 个参数：第一个：一个枚举，第二个：另一个枚举，第三个：long，第四个：一个接口。***但是***，我误认为第四个参数（接口）不应该是接口，而是`reference`接口。

所以它应该是这样的：

```
public void PostEvent(
       eVtCompId inSenderComponentId, 
       eVtEvtId inEventId, 
       long inEventReference, 
       ref IF_SerializableData inEventData) 
```

给我的示例起订量测试代码（就是这个）......

```
var serializable = new Mock<IF_SerializableData>();
target.PostEvent(..., serializable.Object); 
```

...不起作用。我已经尝试过`ref serializable.Object`，但它仍然不起作用，因为我收到一个错误，指出 ref 参数期望引用一个变量，而不是一个对象。

关于如何正确测试它的任何提示或示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:53:12.367

您需要将模拟中的`Object`引用复制`serializable`到局部变量中，然后您可以将其作为`ref`.

```
IF_SerializableData localRef = serializable.Object;
target.PostEvent(..., ref localRef); 
```

您不能传递`ref Serializable.Object`，因为它是一个属性 - 另请参阅[是否可以将属性作为“out”或“ref”参数传递？](https://stackoverflow.com/questions/564557/is-it-possible-to-pass-properties-as-out-or-ref-parameters)它很好地讨论了为什么会这样，以及其他链接的来源。

**我的解释**

这最终是因为属性不是变量。读/写属性是一对提供类似变量功能的访问器方法，但至关重要的是，当您`get`使用属性时，您*始终*会获得底层变量的副本——即使该变量具有引用类型。`set``get`

 *所以：

```
public class MyClass {
  private object _property;
  public object Property {
    get { return _property; } //<-- _property reference copied on to stack & returned
                              //    here as a new variable.  Therefore a ref
                              //    on that is effectively meaningless.
                              //    for a ref to be possible you'd need a pointer 
                              //    to the _property variable (in C++ terms)
    set { _property = value; }
  }
} 
```

在这个例子中——如果你*可以*传递`ref MyClass.Property`给一个方法——这将是没有意义的，因为它将传递一个对堆栈上的瞬态变量的引用——即，`Property` `get accessor; it would not be passing the property by reference. So C# doesn't allow it, even though it could, because it would imply that`属性返回的引用的副本可以被方法修改——当它根本做不到。

因此，在您的情况下，为什么我们需要从堆栈中捕获该值并将其复制到局部变量中。现在 - 请注意，为了让该`ref`方法设置的新值出现在您的身上，`Mock<T>`您需要再次将其`Object`属性设置为局部变量值（如果可以的话 - 我不使用 Moq 但我认为它的 Mocks 是不可变的）。

关于 C# 是否应该以这种方式自动处理已经有很多争论`ref Property`（参见前面提到的我链接到的 SO）。在我看来，这类似于`ref Derived`不兼容`ref Base`- 是的，有一种方法可以让语言自动为你处理这个问题，但应该这样做吗？在我看来，没有。我会因此感到沮丧吗？哦，是的，当然 - 但我经常发现它突出了确实应该修复的架构弱点（例如，依赖`ref`或`out`返回值可能更好的参数）。

C# 允许您通过引用传递属性的唯一方法是将 get 和 set 访问器传递给目标方法 - 这根本不兼容`ref`（因为这只是一个内存位置）。

作为品尝者，您必须编写这样的方法：

```
 public static void MyUglyRefMethod(Func<object> refGet, Action<object> refSet)
 {
   var read = refGet();
   var newValue = new object();
   refSet(newValue);
 } 
```

有了这个，我们现在*可以*提供`ref`类似的语义`MyClass`：

```
 MyClass a = new MyClass();
 MyUglyRefMethod(() => a.Property, (newValue) => a.Property = newValue);
 Assert.IsNotNull(a.Property); 
```

但这简直丑得要命。

让一个方法更简单`ref MyClass`，然后它可以直接写入任何属性。*

# php - 注意：未定义的变量：include() Drupal 7 中的节点

> ID：13816306
> 
> 赞同：0
> 
> 时间：2012-12-11T08:29:06.720
> 
> 标签：php, drupal, undefined

我看过，但似乎找不到正确的答案，或者我没有这方面的技能。问题是我收到了这个错误：

```
Notice: Undefined variable: node in include() (line 69 of /home/xwebmedia/public_html/ltr/sites/all/themes/ltr/page.tpl.php). 
```

我正在使用的代码是：

```
<?php
if (count($node->field_adds) != 0)
{
    foreach($node->field_adds['und'] as $key => $value)
    {               
        $nid = $value['nid']; 
        $mywidget = node_view(node_load($nid));
        print drupal_render($mywidget);
    }       
}
?> 
```

事情是一切正常，我在边栏中添加了我的小部件，但我收到了这个错误通知。

我知道我需要在其中定义一个变量，`template.php`但我尝试了一些它不起作用的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:05:07.007

检查 $node 是否已设置。

```
<?php
if (isset($node) && count($node->field_adds) != 0)
{
    foreach($node->field_adds['und'] as $key => $value)
    {               
        $nid = $value['nid']; 
        $mywidget = node_view(node_load($nid));
        print drupal_render($mywidget);
    }       
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:41:32.620

默认情况下，页面模板文件没有`$node`变量（您可以拥有不是节点的页面，因此它不是必需的）。

该[`menu_get_object()`](http://api.drupal.org/api/drupal/includes%21menu.inc/function/menu_get_object/7)功能是您的朋友：

```
$node = menu_get_object();
if ($node) {
  ...
} 
```

# c# - 使用日期精度运行查询时，不能提供带日期的时间

> ID：13816307
> 
> 赞同：4
> 
> 时间：2012-12-11T08:29:09.853
> 
> 标签：c#, sql, tfs

我正在研究 tfs 工作项。我正在尝试使用查询获取工作项集合，但出现以下错误。请帮帮我吗？

[System.ChangedDate] > '4/19/06 1:00 PM' 返回以下错误“在使用日期精度运行查询时，您无法提供带日期的时间。错误是由 «[System.ChangedDate] > '4/19/06 下午 1:00'»。” 然而这个字段是日期时间精度的。关于为什么会发生这种情况的任何建议或答案？

```
var myquery= " SELECT [System.Id]" +
        " FROM WorkItems " +
    " WHERE " +
    " [System.TeamProject] = '" + ivSettings.Project + "'" + 
        " AND [System.ChangedDate] = '" + ivSettings.LastSyncGen + "'" + " " +
    " ORDER BY [System.Id]"

                 , null,false);
    Query qry = new Query(myworkitemstore, myquery, mycontext, false);

    ICancelableAsyncResult car = qry.BeginQuery();
      WorkItemCollection items = qry.EndQuery(car); 
```

以上是我的代码。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-20T15:08:59.933

您确定以下行是您正在使用的：

```
 Query qry = new Query(myworkitemstore, myquery, mycontext, false); 
```

当最后一个参数设置为 false 时，您不应收到此错误。仅当您将该参数设置为 true 或根本不提供该参数时，才会出现该错误。默认值为真。

参考： [http ://teamfoundation.blogspot.com/2008/01/specifying-date-and-time-in-wiql.html](http://teamfoundation.blogspot.com/2008/01/specifying-date-and-time-in-wiql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T20:08:53.550

我在尝试查询最新更新时遇到了同样的问题，并通过执行以下操作来解决它

```
// defined elsewhere
private DateTime lastUpdated;

string consult = "select * from WorkItem where [Created Date] > ' "  + lastUpdated.ToString("MM/dd/yy") + 
                    "' AND [Work Item Type] = 'Test Case'";

IEnumerable<ITestCase> tcc = testManagementTeamProject.TestCases.Query(consult).Where(tp => tp.DateCreated > lastUpdated); 
```

我为检索测试结果做了非常相似的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:56:47.707

只是一个建议-您是否尝试过在 TFS API 中执行此查询

```
var tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://localhost:8088/tfs")); 
    tfs.EnsureAuthenticated(); 
    var workItemStore = tfs.GetService<WorkItemStore>();
    var query = string.Format(@"     Select [Id], [Work Item Type], [Title], [State], [System.ChangedDate] From WorkItems", title);
    List<WorkItem> workItems = workItemStore.Query(query) 
```

然后对 System.Changed Date 进行 LINQ 查询...

我没试过，但可以吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-27T20:18:23.390

我遇到了同样的问题，Ravianth 的解决方案对我有用。问题可能出在日期格式上。在我的情况下，将日期转换为“yyyy-MM-dd HH:mm:ss”格式是有效的。

# c# - 当 C++ 使用智能指针时，C# 委托等效

> ID：13816308
> 
> 赞同：4
> 
> 时间：2012-12-11T08:29:19.390
> 
> 标签：c#, c++, smart-pointers

I am mainly a .NET programmer working on a C++ project and am trying to determine the equivalent way to handle delegates that use the Action and Function template types. I use the delegates both as events and callbacks within the .NET code. My C++ project uses smart pointers and the same delegate design patterns as a C# program would. What is the best way to handle this situation? It is not clear to me how to pass and maintain a function pointer that also keeps track of the smart pointer and potentially the deletion of the underlying object since the event container uses a weak reference. The library needs to be multi-platform so using CLR is unfortunately not an option.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:53:17.343

您正在寻找的是绑定到现有对象的方法指针，就是这样吗？

你应该看看[boost::bind](http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html#with_member_pointers)。如果你的环境支持它，你也可以使用`std::tr1::bind`或者即使`std::bind`它支持 C++11。

说明您想要的示例是：

```
struct X
{
    bool f(int a);
};
X x;
shared_ptr<X> p(new X);
int i = 5;

bind(&X::f, ref(x), _1)(i);     // x.f(i)
bind(&X::f, &x, _1)(i);         //(&x)->f(i)
bind(&X::f, x, _1)(i);          // (internal copy of x).f(i)
bind(&X::f, p, _1)(i);          // (internal copy of p)->f(i) 
```

> 最后两个例子很有趣，因为它们产生了“自包含”的函数对象。bind(&X::f, x, _1) 存储 x 的副本。bind(&X::f, p, _1) 存储 p 的副本，由于 p 是 boost::shared_ptr，因此函数对象保留对其 X 实例的引用，即使 p 超出范围或是重置（）。

对于和之间的区别`boost::bind`，我让您在 SO 上看到[另一个问题。](https://stackoverflow.com/questions/4682919/what-are-differences-between-std-tr1-and-boost)`std::tr1::bind``std::bind`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:06:30.353

看看： http: [//www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-Possible)

它还将解释为什么 C++ 中的委托有点棘手。这个库是在我读过的游戏开发书中推荐的（所以我假设它非常快）。

# video - 为树莓派写一个流媒体

> ID：13816323
> 
> 赞同：2
> 
> 时间：2012-12-11T08:30:27.893
> 
> 标签：video, raspberry-pi

我想为 Raspberry Pi 编写一个简单的视频播放软件，它可以播放来自给定路径或 URL 的视频。

我曾想过使用 MPlayer 或使用 VLCLib（都使用 Python），但我读到 VLC 不会在 RaspberryPi 上显示视频，而且 MPlayer 的播放速度慢得令人难以忍受。

我虽然使用 MonoGame (XNA) 和 C#，但这似乎有点牵强。

在 PI 上播放高清视频有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:21:41.263

你看过Gstreamer吗？

我不能说我全心全意地推荐它，因为我目前正在与它进行类似的项目，但它似乎确实是一个非常流行/广泛支持的系统，具有极大的灵活性和模块化。

缺点 - 该文档与大多数 *nix 文档相当。

# visual-studio - 阻止 Visual Studio 在启动时连接到 Team Foundation Server

> ID：13816331
> 
> 赞同：5
> 
> 时间：2012-12-11T08:31:13.720
> 
> 标签：visual-studio, tfs, registry

Visual Studio 会在启动时自动尝试连接到 Team Foundation Server，但有时当您频繁更改 TFS 服务器时，Visual Studio 需要很长时间才能在尝试连接到上次使用的 TFS 时超时。

这怎么能被禁用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T08:31:13.720

您可以将**AutoLoadServer**注册表项设置为 0。

导航到 Team Foundation 密钥

*HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\TeamFoundation*

**添加REG_DWORD**类型的注册表项**AutoLoadServer**

 **![在此处输入图像描述](../Images/f9625a8eef1c48779419f5effcc3bbf9.png)

将该值设置为 0，以便 VS 在启动时不会自动连接到 TFS

![在此处输入图像描述](../Images/fd6bb6e4fcf87c42ee56e1a1ba0c5b9e.png)

或使用以下内容创建 *.reg 文件：

**视觉工作室 2010**

> Windows 注册表编辑器版本 5.00
> 
> [HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\TeamFoundation] "AutoLoadServer"=dword:00000000

* * *

**视觉工作室 2013**

> Windows 注册表编辑器版本 5.00
> 
> [HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0\TeamFoundation] "AutoLoadServer"=dword:00000000

* * *

**视觉工作室 2015**

> Windows 注册表编辑器版本 5.00
> 
> [HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\14.0\TeamFoundation] "AutoLoadServer"=dword:00000000**

# facebook - 我们的应用程序被 Facebook 删除

> ID：13816333
> 
> 赞同：-1
> 
> 时间：2012-12-11T08:31:28.003
> 
> 标签：facebook, administration

我们的应用程序 Marketland (appid: 186712578038225) 被无故删除。应用程序链接[http://apps.facebook.com/marketland](http://apps.facebook.com/marketland)显示“未找到您请求的页面”错误。

此外，所有管理员帐户都被锁定。有些人找回了帐户，但我们大多数人，包括我在内，仍然无法访问我们的 Facebook 帐户，因为短信确认消息永远不会出现。

我们已收到来自 Facebook 的这些电子邮件。似乎“Cullen Walsh”已经改变了 canvas_url。他的 Facebook 帐户显示他是 Facebook 员工。

### 1.

Marketland 的应用程序设置（应用程序 ID = 186712578038225）由 API 从 10.66.138.54 于 2012 年 12 月 10 日星期一 14:48:12 -0800 更改设置：旧值新值对象类型显示：
is_in_trashcan 1
对象类型显示：
类型 907 oid 453308094712004 name _Single Unit Config 单数任务
复数任务
文章 a
property_config {"quest":{"type":"reference","display_name":"Quest","formal_name":"quest","re​​ference_object_type":453307848045362,"required_group ":"primary_objects","re​​ference_assoc_type":185342298257295}}
formal_name quest
app_id 186712578038225 对象类型任务：
对象类型任务：
动作类型解锁：assoc_id 505438416134191 single_present 完成
复数现在完成
单数过去 完成复数过去完成按钮文本完成
app_preposition on graph_api_name完成 命令式完成 时态禁用2 动作类型解锁：聚合_单单元配置： sort_by {“方向”：“DESC”，“表达式”：“时间戳”} ui_template_type海报 ui_template_data {“海报” :{"caption":"","caption1":"","caption2":"","caption3":""},"number":{"number":"{}","units":" "},"map":{"header_0":"","number_0":"","units_0":"","header_1":"","number_1":"","units_1":"","header_2":"","number_2":"","units_2":"","route":"" "highlighted_points_count":"0"}} created_time 1349870338 single_unit 1

动作类型完成：
动作类型完成：

### 2.

Marketland 的应用程序设置（应用程序 ID = 186712578038225）由 Cullen Walsh 从 10.171.31.43 于 2012 年 12 月 10 日星期一 15:07:01 -0800 更改设置：旧值新值 canvas_page_url 市场

### 3

Marketland 的应用程序设置（应用程序 ID = 186712578038225）由 API 从 10.171.90.23 于 2012 年 12 月 10 日星期一 15:08:53 -0800 更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:31:29.063

您可以在此处对已停用的应用提出申诉：

[https://developers.facebook.com/appeal](https://developers.facebook.com/appeal)

更多信息请访问：

[https://www.facebook.com/help/155308851202619/](https://www.facebook.com/help/155308851202619/)

# javascript - 像以前一样重置动态表单

> ID：13816334
> 
> 赞同：1
> 
> 时间：2012-12-11T08:31:29.187
> 
> 标签：javascript, html, jquery, jquery-events, reset

我有一个这样的html编码：

```
<form>
<table class="tabelWhiteJenisPembayaran">
    <tbody>
        <tr>
            <td><input type="text" class="whiteJenisPembayaran" name="whiteJenisPembayaran[]" placeholder="Jenis Pembayaran" autocomplete="off" style="margin-bottom: 5px;"/></td>
        </tr>
    </tbody>
</table>
<button class="btn btn-primary" type="submit">Simpan</button>
<button class="btn" type="reset">Batal</button>
</form> 
```

我有一个 JavaScript 编码如下：

```
$("table.tabelWhiteJenisPembayaran tbody tr:last").live('click', function(){
    var tr = '<tr><td><input type="text" class="whiteJenisPembayaran" name="whiteJenisPembayaran[]" autocomplete="off" style="margin-bottom: 5px;" placeholder="Jenis Pembayaran"/></td></tr>';
    $("table.tabelWhiteJenisPembayaran tbody").append(tr);                  
}); 
```

如果表单被点击会显示一个新的表单，比如我在最后一个表单中点击了3次，总共有4个表单。我想知道当我单击“重置”时如何将曾经存在的表格数量从 4 个表格变成 1 个表格。如何再次重置为 1 个表单。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:43:06.170

您可以克隆初始表单元素及其子元素，并在单击重置按钮时用克隆替换表单。

这是一个小提琴[http://jsfiddle.net/qZ6nK/](http://jsfiddle.net/qZ6nK/)

```
<script type="text/javascript">
    var formClone = null;
    $(document).ready(function() {
        formClone = $('table.tabelWhiteJenisPembayaran').parents('form').clone();
        $("table.tabelWhiteJenisPembayaran tbody tr:last").live('click', function(){
            var tr = '<tr><td><input type="text" class="whiteJenisPembayaran" name="whiteJenisPembayaran[]" autocomplete="off" style="margin-bottom: 5px;" placeholder="Jenis Pembayaran"/></td></tr>';
            $("table.tabelWhiteJenisPembayaran tbody").append(tr);                  
        }); 
    });
    function onReset(e) {
        var parent = $('table.tabelWhiteJenisPembayaran').parents('form').parent();
        $('table.tabelWhiteJenisPembayaran').parents('form').remove();
        parent.append(formClone);
        formClone = $('table.tabelWhiteJenisPembayaran').parents('form').clone();
    }
</script>

<form>
    <table class="tabelWhiteJenisPembayaran">
        <tbody>
            <tr>
                <td><input type="text" class="whiteJenisPembayaran" name="whiteJenisPembayaran[]" placeholder="Jenis Pembayaran" autocomplete="off" style="margin-bottom: 5px;"/></td>
            </tr>
        </tbody>
    </table>
    <button class="btn btn-primary" type="submit">Simpan</button>
    <button class="btn" type="reset" onclick="onReset(event)">Batal</button>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:45:56.423

试试这种方式

```
$("table.tabelWhiteJenisPembayaran tbody tr:last").live('click', function(){
    var tr = '<tr><td><input type="text" class="whiteJenisPembayaran" name="whiteJenisPembayaran[]" autocomplete="off" style="margin-bottom: 5px;" placeholder="Jenis Pembayaran"/></td></tr>';
    $("table.tabelWhiteJenisPembayaran tbody").append(tr);                  
}); 

$("[type=reset]").click(function(){
     $('table.tabelWhiteJenisPembayaran tr:not(:first)').remove();
});
​ 
```

[工作演示](http://jsfiddle.net/uBu45/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:36:52.980

我不确定这是否是你想要的。我猜你想重置所有表格。

```
$('form').each(function(){
    this.reset()
}); 
```

# python - Python CSV 到 JSON 解析器在输出中添加引号

> ID：13816335
> 
> 赞同：3
> 
> 时间：2012-12-11T08:31:30.607
> 
> 标签：python, json, mongodb, csv, geonames

感谢用户 Petri，我有一个 CSV 到 JSON Python 脚本，让我可以将 Geonames CSV 转储转换为 MongoImport 友好的 JSON。

问题是 Geonames 有一个名为的字段，该字段`alternatenames`当前被引用并视为一个长字符串。因此无法在 MongoDB 中正确查询。我想将该字段更改为字符串数组，例如：`"alternatenames":["name1", "name2"]`

Python 脚本如下所示：

```
import csv, simplejson, decimal, codecs

data = open("cities.txt")
reader = csv.DictReader(data, delimiter=",", quotechar='"')

with codecs.open("cities.json", "w", encoding="utf-8") as out:
   for r in reader:
      for k, v in r.items():
         # make sure nulls are generated
         if not v:
            r[k] = None
         # parse and generate decimal arrays
         elif k == "loc":
            r[k] = [decimal.Decimal(n) for n in v.strip("[]").split(",")]
         # generate a number
         elif k == "geonameid":
            r[k] = int(v)
      out.write(simplejson.dumps(r, ensure_ascii=False, use_decimal=True)+"\n") 
```

我的 CSV 有以下字段：

```
"geonameid","name","asciiname","alternatenames","loc","feature_class","feature_code","country_code","cc2","admin1_code","admin2_code","admin3_code","admin4_code"
3,"Zamīn Sūkhteh","Zamin Sukhteh","Zamin Sukhteh,Zamīn Sūkhteh","[48.91667,32.48333]","P","PPL","IR",,"15",,,
5,"Yekāhī","Yekahi","Yekahi,Yekāhī","[48.9,32.5]","P","PPL","IR",,"15",,,
7,"Tarvīḩ ‘Adāī","Tarvih `Adai","Tarvih `Adai,Tarvīḩ ‘Adāī","[48.2,32.1]","P","PPL","IR",,"15",,, 
```

我当前的 JSON 输出如下所示：

```
{"loc": [48.91667, 32.48333], "name": "Zamīn Sūkhteh", "geonameid": 3, "feature_class": "P", "admin3_code": null, "admin2_code": null, "cc2": null, "feature_code": "PPL", "country_code": "IR", "admin1_code": "15", "alternatenames": "Zamin Sukhteh,Zamīn Sūkhteh", "asciiname": "Zamin Sukhteh", "admin4_code": null}
{"loc": [48.9, 32.5], "name": "Yekāhī", "geonameid": 5, "feature_class": "P", "admin3_code": null, "admin2_code": null, "cc2": null, "feature_code": "PPL", "country_code": "IR", "admin1_code": "15", "alternatenames": "Yekahi,Yekāhī", "asciiname": "Yekahi", "admin4_code": null}
{"loc": [48.2, 32.1], "name": "Tarvīḩ ‘Adāī", "geonameid": 7, "feature_class": "P", "admin3_code": null, "admin2_code": null, "cc2": null, "feature_code": "PPL", "country_code": "IR", "admin1_code": "15", "alternatenames": "Tarvih `Adai,Tarvīḩ ‘Adāī", "asciiname": "Tarvih `Adai", "admin4_code": null} 
```

我想更改 JSON 输出以添加一个字符串数组，如下所示（向右滚动到`alternatenames`）：

```
{"loc": [48.91667, 32.48333], "name": "Zamīn Sūkhteh", "geonameid": 3, "feature_class": "P", "admin3_code": null, "admin2_code": null, "cc2": null, "feature_code": "PPL", "country_code": "IR", "admin1_code": "15", "alternatenames": ["Zamin Sukhteh", "Zamīn Sūkhteh"], "asciiname": "Zamin Sukhteh", "admin4_code": null}
{"loc": [48.9, 32.5], "name": "Yekāhī", "geonameid": 5, "feature_class": "P", "admin3_code": null, "admin2_code": null, "cc2": null, "feature_code": "PPL", "country_code": "IR", "admin1_code": "15", "alternatenames": ["Yekahi,Yekāhī"], "asciiname": "Yekahi", "admin4_code": null}
{"loc": [48.2, 32.1], "name": "Tarvīḩ ‘Adāī", "geonameid": 7, "feature_class": "P", "admin3_code": null, "admin2_code": null, "cc2": null, "feature_code": "PPL", "country_code": "IR", "admin1_code": "15", "alternatenames": ["Tarvih `Adai", "Tarvīḩ ‘Adāī"], "asciiname": "Tarvih `Adai", "admin4_code": null} 
```

另外，我应该将我`quotechar`的 Access 2010 导出的 CSV 更改为`^`而不是`"`避免双引号吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:49:52.897

将另一个“elif”添加到现有的以处理“备用名称”：

```
 elif k == "alternatenames":
        r[k] = [name.strip() for name in v.split(",")] 
```

所以首先用逗号分割字符串，然后在开始/结束时去掉空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:44:33.067

我不认为你的 quotechar 是这里的问题。您必须手动指定您希望将该字段转换为字符串列表。

警告：未经测试的代码如下

```
elif k == "alternatenames":
    r[k] = unicode.split(v, ',') 
```

我假设 v 是基于字符的 unicode，但是如果它是 ascii，请调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:46:57.690

尝试包括这个：

```
elif k == "alternatenames":
   r[k] = [v.split(",")] 
```

# bash - 同时按字典顺序和数字排序

> ID：13816336
> 
> 赞同：6
> 
> 时间：2012-12-11T08:31:31.090
> 
> 标签：bash, sorting

我有一个文件 tmp.txt（实际上是 bash 命令的输出），其中包含以下条目：

```
 ...
ammp            0                1.03683
ammp            10               2.69954
ammp            1                1.05712
ammp            11               2.70339
ammp            12               2.70339
ammp            2                1.88586
ammp            3                2.50103
ammp            4                2.64734
ammp            5                2.67462
ammp            6                2.68097
ammp            7                2.68631
ammp            8                 2.6904
ammp            9                2.69517
applu           0               0.678798
applu           10              0.922213
applu           1               0.901234
applu           11              0.923596
applu           12              0.923596
applu           2               0.901657
applu           3               0.903176
applu           4               0.908912
applu           5               0.913879
applu           6               0.914885
applu           7               0.915516
applu           8               0.917368
applu           9               0.920753
apsi            0                1.09037
apsi            10               2.20494
apsi            1                1.16651
apsi            11               2.24381
apsi            12               2.24381
apsi            2                1.49532
apsi            3                1.79137
apsi            4                1.79581
apsi            5                1.79601
apsi            6                1.80062
apsi            7                1.91269
apsi            8                 1.9579
apsi            9                2.00872
    ... 
```

我想根据第一个字段然后第二个字段对其进行排序。问题是我想要第一个字段的字典排序和第二个字段的数字。

我尝试了以下方法：

```
cat tmp.txt | sort -k1,2 
```

按字典顺序对两个字段进行排序

```
cat tmp.txt | sort -k1 | sort -n -k2 
```

第二种弄乱了第一种。

```
cat tmp.txt | sort -s -k1.2n 
```

据说是稳定的排序，它以数字方式执行第二个字段。不起作用，并按字典顺序对第二个字段进行排序...

想法？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T08:42:47.167

尝试：

```
sort -k 1,1 -k 2,2n file 
```

这将按字母顺序对第一个字段进行排序，然后按数字对第二个字段进行排序。

`sort` [手册](http://ss64.com/bash/sort.html)页有一些示例。

# python - 在python中打印unicode字符串

> ID：13816338
> 
> 赞同：2
> 
> 时间：2012-12-11T08:31:56.160
> 
> 标签：python, utf-8

我有一个问题当我使用（我的项目金字塔上的这个文件）运行一个 .py 文件时

```
# -*- coding: utf-8 -*- 
print "Hãy đợi đấy" 
```

结果“Hãy đợi đấy”没问题。但是当我运行项目时，结果是：“ HÃ£y Ä'á»£i Ä'áº¥y ”所以我的问题是：出了什么问题。我使用 Python 2.7 窗口 7

@Ofir：我试试。这是新的错误

```
 print u"HÃ£y Ä‘á»£i Ä‘áº¥y"
  File "C:\env\lib\encodings\cp1252.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_table)
UnicodeEncodeError: 'charmap' codec can't encode characters in position 4-5: character maps to <undefined> 
```

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:35:02.773

所以你需要所有这些东西：

*   `coding: utf-8`在文件顶部 [✓]
*   `u`-前缀字符串文字 [✓]
*   实际上用 UTF-8 编码你的文件 [✘]

在您的文本编辑器中，当您保存文件时，您需要选择 utf-8。这取决于您的文本编辑器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:34:46.083

You need to mark the string as unicode with a u:

```
# -*- coding: utf-8 -*- 
print u"Hãy đợi đấy" 
```

# sql - ColdFusion - 如何在 cfscript 中执行 SQL“IN”子句？

> ID：13816342
> 
> 赞同：0
> 
> 时间：2012-12-11T08:32:23.717
> 
> 标签：sql, coldfusion

如何在 cfscript 中构造 IN 子句？这是我所拥有的：

```
var tagList = "301,302,303,304";
var q = new Query ();
q.setDatasource ("mydatasource");

var sqlStmt = "SELECT * FROM Tags WHERE tagID IN (:tagList)";

// I know the next line is not correct!
q.addParam (name="tagList", value="#tagList#", cfsqltype="??? WHAT SHOULD IT BE ???"); 
```

有没有一种简单的方法可以做到这一点，还是我需要遍历标签列表，分别添加每个标签？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T09:24:07.990

有一个`<cfqueryparam>`应该支持的列表属性：

```
q.addParam (name="tagList", value="#tagList#", cfsqltype="CF_SQL_INTEGER", list="yes"); 
```

# jquery - jQuery .animate() - 在 .each() 中增加数字

> ID：13816345
> 
> 赞同：2
> 
> 时间：2012-12-11T08:32:39.357
> 
> 标签：jquery, load, jquery-animate, each

如果有3张图片。动画将同时运行 3 次。因为我想一次在 30 和 100 的值上做一些事情。有什么解决办法。

```
img.each(function(e){
    var image = $(this);
    image.load(function(){ // load 3 images
        currentValue += eachOfImg; // eachOfImg = 100/3
        jQuery({someValue: startValue}).animate({someValue: currentValue}, {
            duration: 3000,
            step: function() {
                console.log('currentValue:',this.someValue);
                if(someValue == 30) // do something
                if(someValue == 100) // do something
                $('.text').text(Math.ceil(this.someValue) + "%");
            }
        });
    });
}); 
```

Chrome 控制台输出为：

```
(3) currentValue: 0
(8) currentValue: 1 
    currentValue: 2 
(2) currentValue: 1 
    currentValue: 2 
    currentValue: 1 
(2) currentValue: 2 
    currentValue: 1 
(2) currentValue: 2 
    currentValue: 1 
    currentValue: 2 
    currentValue: 3 
    currentValue: 1 
    currentValue: 2 
```

我希望它会：

```
 currentValue: 0
    currentValue: 1 
    currentValue: 2 
    currentValue: 3 
    currentValue: 4 
    currentValue: 5 
    currentValue: 6 
    currentValue: 7 
    currentValue: 8 
    currentValue: 9 
    ... 
```

谢谢

# string - 将数组中的现有字符串连接成新数组的新字符串

> ID：13816351
> 
> 赞同：0
> 
> 时间：2012-12-11T08:33:14.200
> 
> 标签：string, concatenation, string-concatenation, arrays

我试图让这个程序的 groupPairs 函数在初始字符串数组 [One,Two,Three,Four,Five,Six] 中获取六个字符串，并创建一个大小为原来的一半 (3) 的新字符串数组六个字符串按对 [OneTwo,ThreeFour,FiveSix] 顺序分组，然后将生成的新 String[] 返回给 main 方法。

```
import java.util.*;

public class Application
{
    static String[] groupPairs(String[] array)
    {
        String[] newArray = new String[(array.length)/2];
        int count=0;
        for(String string:newArray)
        {
            newArray[count]=array[count].append(array[count+1]);
            count=count+2;
        }
        return newArray;
    }
    public static void main(String args[]) //main method, don't worry about this
    {
        String[] list = new String[5];
        list[0]="One";
        list[1]="Two";
        list[2]="Three";
        list[3]="Four";
        list[4]="Five";
        list[5]="Six";
        String[] list2 = groupPairs(list);
    }
} 
```

尝试编译程序时，出现此错误：

```
Application.java:11: cannot find symbol
symbol  : method append(java.lang.String)
location: class java.lang.String
            newArray[count]=array[count].append(array[count+1]);
                                        ^ 
```

任何关于如何修复这条线的想法，以便我的新数组将连接原始 String[] 值的对，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:06:49.800

您不能对数组执行追加操作。试试下面的。

`String[] list = new String[6];`
`list[0] = "One";`
`list[1] = "Two";`
`list[2] = "Three";`
`list[3] = "Four";`
`list[4] = "Five";`
`list[5] = "Six";`
`String[] list2 = new String[list.length / 2];`
`for (int i = 0, j = 0; i < list.length; i++, j++)`
`{`
`list2[j] = list[i] + list[++i];`
`}`

# windows-8 - 使用 PointerWheelChanged 检测滚动完成

> ID：13816352
> 
> 赞同：2
> 
> 时间：2012-12-11T08:33:22.573
> 
> 标签：windows-8, windows-runtime, mouse, mousewheel

`PointerWheelChanged`我在 WinRT 使用事件检测鼠标滚轮滚动。我`PointerPoint.Properties.MouseWheelDelta`用来检测滚动的数量和方向：

```
PointerPoint mousePosition = e.GetCurrentPoint(_control);
var delta = mousePosition.Properties.MouseWheelDelta; 
```

现在有一些设备可以模拟鼠标滚动（触摸板或触摸鼠标等）。他们倾向于`PointerWheelChanged`每个“滚动”发布数十或数百（原文如此！）事件。旧版鼠标滚轮每点击一次鼠标滚轮就会发出一个事件，其增量为 +-120 个单位。

一旦用户滚动到某个位置，我需要进行一些繁重的处理。

有没有办法理解“新”卷轴已经完成？

仅供参考，这是使用 Microsoft TouchMouse 单指轻弹的鼠标滚轮增量（对不起数量，我只是想说明问题）。

15 15 164 164 304 304 658 658 773 773 887 887 1000 1000 1111 1111 1221 1221 1330 1330 108 108 107 107 106 106 105 105 104 104 103 103 102 102 203 203 100 100 99 99 98 98 97 97 96 96 95 95 94 94 93 93 92 92 91 91 90 90 89 89 88 88 88 88 87 87 86 86 85 85 84 84 83 83 82 82 82 82 81 81 80 80 79 79 78 78 78 78 77 77 76 76 75 75 75 75 74 74 73 73 72 72 72 72 71 71 70 70 70 70 69 69 68 68 67 67 67 67 66 66 65 65 65 65 64 64 63 63 63 63 62 62 62 62 61 61 60 60 60 60 59 59 59 59 58 58 57 57 57 57 56 56 56 56 55 55 55 55 54 54 54 54 53 53 52 52 52 52 51 51 51 51 50 50 50 50 49 49 49 49 48 48 48 48 47 47 47 47 46 46 46 46 46 46 45 45 45 45 44 44 44 44 43 43 43 43 42 42 42 42 42 42 41 41 41 41 40 40 40 40 40 40 39 39 39 39 38 38 38 38 38 38 37 37 37 37 37 37 36 36 36 36 35 35 35 35 35 35 34 34 34 34 34 34 33 33 33 33 33 33 32 32 32 32 32 32 31 31 31 31 31 3130 30 30 30 30 30 30 30 30 29 29 29 29 29 29 29 29 28 28 28 28 28 28 28 28 28 27 27 27 27 27 27 27 27 27 26 26 26 26 26 26 26 26 26 26 26 26 26 26 26 26 26 26 26 26 26 25 25 25 25 25 25 25 25 25 25 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 23 23 23 23 23 23 23 23 23 22 22 22 22 22 22 22 22 22 21 21 21 21 21 21 21 21 21 20 20 20 20 20 20 20 20 20 20 20 19 19 19 19 19 19 19 19 19 19 19 19 19 19 19 19 19 19 19 19 19 18 18 18 18 18 18 18 18 18 18 18 18 18 18 17 17 17 17 17 17 17 17 17 17 17 17 17 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 16 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 15 14 14 14 14 14 14 14 14 14 14 14 14 14 14 14 14 14 14 14 14 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 12 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 11 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 15 15 22 22 7 7 7 7 14 14 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 6 6 6 66 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 8 8 12 12 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 9 9 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 15 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 8 8 12 12 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 9 9 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 15 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 8 8 12 12 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 9 9 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 12 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 12 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1

编辑：现在我做了这个黑客，但它远非完美

```
// interval between mouse deltas
private readonly TimeSpan _wheelDeltaThrottleInterval = TimeSpan.FromMilliseconds(8);

// interval to wait until scroll is complete
private readonly TimeSpan _wheelDeltaCompleteInterval = TimeSpan.FromMilliseconds(600);

// create smart wheel handler
IObservable<PointerPoint> pointerWheelObservable = 
    System.Reactive.Linq.Observable
        .FromEventPattern<PointerEventHandler, PointerRoutedEventArgs>(
            handler => _control.PointerWheelChanged += handler,
            handler => _control.PointerWheelChanged -= handler)
        .Select(eventPattern =>
            {
                PointerRoutedEventArgs e = eventPattern.EventArgs;
                PointerPoint mousePosition = e.GetCurrentPoint(_control);
                return mousePosition;
            })
        .Where(mousePosition => Math.Abs(mousePosition.Properties.MouseWheelDelta) > MouseWheelDeltaThreshold);

// subscribe to wheel changes
pointerWheelObservable
    .Throttle(_wheelDeltaThrottleInterval)
    .ObserveOnDispatcher()
    .Subscribe(
        OnPointerWheelChanged,
        Logger.TrackException);

pointerWheelObservable
    .Throttle(_wheelDeltaCompleteInterval)
    .Subscribe(
        OnPointerWheelCompleted,
        Logger.TrackException); 
```

* * *

EDIT2`GestureRecognizer`类没有帮助

请参阅这篇关于 Windws 8 操作处理的精彩博客文章。 [http://blogs.msdn.com/b/windowsappdev/archive/2012/07/02/modernizing-input-in-windows-8.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/07/02/modernizing-input-in-windows-8.aspx)

不幸的是，经过我的实验，我看到`GestureRecognizer`无法检测到鼠标滚轮事件*洪水*已经结束。它在每次调用 .ProcessMouseWheelEvent() 后触发 ManipulationCompleted 事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:51:40.220

Use GestureRecognizer for a better low level detection of manipulations including mouse whell. All inputs (mouse, touch, pen, etc.) are included here and supported better than traditional manipulation events. (they don't support single touch rotation, mouse scroller, etc.)

[http://code.msdn.microsoft.com/windowsapps/Input-Windows-8-gestures-62c6689b#content](http://code.msdn.microsoft.com/windowsapps/Input-Windows-8-gestures-62c6689b#content)

This is much more efficient, flexible and safer than implementing everything from scratch.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:05:10.440

您可以在 WheelChangedEvent 上使用 Reactive Extension 库和[节流阀](http://rxwiki.wikidot.com/101samples#toc29)，这样您将始终获得指定节流时间段的最后通知

# postgresql - PostgreSQL。日期间隔问题

> ID：13816353
> 
> 赞同：0
> 
> 时间：2012-12-11T08:33:23.267
> 
> 标签：postgresql, sqldatatypes

我试图在几天内获得差异，将结果转换为十进制：

```
SELECT
CAST( TO_DATE('2999-01-01','yyyy-mm-dd') - TO_DATE('2909-01-01','yyyy-mm-dd') AS DECIMAL )
; 
```

现在，如果我将 1 个月添加到第二个日期：

```
SELECT
CAST( TO_DATE('2999-01-01','yyyy-mm-dd') - (TO_DATE('2909-01-01','yyyy-mm-dd') + INTERVAL '1 MONTH' * (1) ) AS DECIMAL )
; 
```

我收到一个错误： **错误：无法将类型间隔转换为数字**

好的，我可以转换为 char 以获得结果：

```
SELECT
CAST( TO_CHAR( TO_DATE('2909-02-10','yyyy-mm-dd') - (TO_DATE('2909-01-01','yyyy-mm-dd') + INTERVAL '1 MONTH' * (1) ), 'DD') AS DECIMAL )
; 
```

但在这种情况下，使用 TO_CHAR 转换修改的第一个查询停止工作：

```
SELECT
CAST( TO_CHAR(TO_DATE('2999-01-01','yyyy-mm-dd') - TO_DATE('2909-01-01','yyyy-mm-dd'), 'DD') AS DECIMAL )
; 
```

我收到**错误：多个小数点。**

所以，我的问题是，我怎样才能使用相同的 sql 语句来获得天数？对于这两个 sql 查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:44:02.047

再看看你的前两个例子。如果你删除外部 CAST ... AS DECIMAL 你得到

```
 ?column? 
----------
    32872

  ?column?  
------------
 32841 days 
```

显然，区别在于“天”。第二个是一个区间值而不是一个简单的数字。您只需要数字（因为您总是只需要天数），因此您需要提取该部分。然后你可以投射到你喜欢的任何精度：

```
SELECT extract(days FROM '32841 days'::interval)::numeric(9,2);
 date_part 
-----------
  32841.00 
```

* * *

编辑响应亚历山大的后续行动：

您的第一个示例因一个相当具体的错误而失败：

```
SELECT extract(days FROM (TO_DATE('2999-01-01','yyyy-mm-dd') - TO_DATE('2909-01-01','yyyy-mm-dd'))::interval)::numeric(9,2);

ERROR:  cannot cast type integer to interval
LINE 1: ...yyyy-mm-dd') - TO_DATE('2909-01-01','yyyy-mm-dd'))::interval... 
```

在这里，您有一个整数（这是您最初想要的）并尝试将其转换为一个区间（出于我不明白的原因）。它抱怨它不知道你想要什么单位。您想要 32872在*您*的时间间隔内 - 秒、小时、周、世纪？

第二个例子是抱怨，因为你试图从一个简单的整数中提取“天”部分，当然系统中没有 extract() 函数可以做到这一点。

我认为您可能需要退后一步，花点时间了解各种表达式返回的值。

将一个日期与另一个日期相减得出将它们分开的天数 - 作为一个整数。真的，没有其他明智的措施。

向日期添加（或减去）间隔会给您一个时间戳（没有时区），因为该间隔可能包含整天、几天和几小时、几秒等。

从日期中减去时间戳会给您一个间隔，因为结果可能包含天、小时、秒等。

如果您有一个间隔并且您只想要天数部分，那么您可以在其上使用 extract() ，您将获得整数天数。

如果要转换为数字，而不是间隔，则需要整数（或浮点）天数，因为如果没有单位，将间隔转换为标量数字毫无意义。

所以 - 要么坚持日期和日期算术（简单），要么意识到您正在使用时间戳（灵活），但要了解它是什么。

要了解正在发生的事情，您可以执行以下操作（在 psql 中）：

```
CREATE TEMP TABLE tt AS SELECT
  ('2909-01-02'::date - '2909-01-01'::date) AS a,
  ('2909-01-02'::date - '2909-01-02 00:00:00'::timestamp) AS b;
\x
SELECT * FROM tt;
\d tt 
```

这将向您显示您正在处理的值和类型。对尽可能多的列重复您认为有用的列。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:25:24.650

如果您使用日期进行区间算术，通常应该使用时间戳，如[docs](http://wiki.postgresql.org/wiki/Working_with_Dates_and_Times_in_PostgreSQL#Which_do_I_want_to_use:_DATE_or_TIMESTAMP.3F__I_don.27t_need_minutes_or_hours_in_my_value)中所述。

```
# SELECT extract(days FROM TO_TIMESTAMP('2999-01-01','yyyy-mm-dd') - TO_TIMESTAMP('2909-01-01','yyyy-mm-dd'))

 date_part 
-----------
     32872

# SELECT extract(days FROM TO_TIMESTAMP('2999-01-01','yyyy-mm-dd') - (TO_TIMESTAMP('2909-01-01','yyyy-mm-dd') + '1 month'::interval) );
 date_part 
-----------
     32841 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:53:42.930

将间隔添加到日期的结果实际上是时间戳，而不是另一个日期（间隔可能包含时间部分），因此您必须首先将添加的结果转换回日期：

```
SELECT
CAST( TO_DATE('2999-01-01','yyyy-mm-dd')
       - CAST( (TO_DATE('2909-01-01','yyyy-mm-dd') + INTERVAL '1 MONTH' * (1) ) AS DATE)
      AS DECIMAL ) 
```

# python - 通过从 Google 电子表格加载非常具体的数据来查找最短路径的最佳方法

> ID：13816361
> 
> 赞同：0
> 
> 时间：2012-12-11T08:33:42.113
> 
> 标签：python, path, wxpython, google-sheets

现在请你判断我的常见问题解答我的问题并不像“最佳最短路径算法”那么简单（至少我认为）。

我有一个谷歌电子表格。

每一行都以城镇名称开头，然后是经过的道路的 nr 条以及这些道路的名称。像下面这样的东西：

```
Ex. Spreadsheet / First sheet:
         A    |               B               |     C     |     D     |     E     |
 1  Town name | Number of roads you find here | road name | road name | road name |    
 2  Manchester| 3                             |        M1 |        M2 |        M3 |
 3  Leeds     | 1                             |        M3 |           |           |
 4  Blackpool | 2                             |        M1 |        M2 |           | 
```

现在这个电子表格有许多工作表，每个工作表都对应每个道路名称（在我的情况下是 M1、M2、M3。M1 是第二个工作表，因为第一个工作表包含上面的内容。M2 是第三个等等）

```
 Ex. Spreadsheet / Second sheet:
       A      |    B      |        C       |      D       |      E     |      F     |
1   This road | Town name | Distance in km | type of road | other road | other road |  
2      M1     | Manchester|       0        |      M2      |     M3     |            | 
3      M1     | Blackpool |      25        |      M2      |            |            | 
```

第三张类似，下一张类似结构。一个城镇可以包含在多张表中，具体取决于与之相连的道路的数量。您可以从上面的示例中看到它。

电子表格不是我制作的。就像这样。它不会变得更好。我从程序中的谷歌电子表格中提取数据没有问题。用 python 读取电子表格数据不是这里的问题。

1.  在 wxpython/python 中编写程序的最佳方法是什么，用户输入 Starting Town 和 Finishing Town。
2.  该程序将读取电子表格和相应的工作表。
3.  会以某种方式在这个工作表丛林中找到最佳路径。
4.  它还会返回从起始城镇到终点城镇的总距离，即使它可能需要经过 2-3 个工作表才能到达那里。
5.  将以可爱的形式将结果返回到用户屏幕:)

我希望你发现我的问题足够具有挑战性，值得质疑。

我求你帮忙。告诉我解决这个非常具体的问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:17:01.473

你之前尝试的结果是什么：

[wxPython 应用程序从 Google 电子表格和用户输入获取数据的速度太慢了，需要加快解决方案](https://stackoverflow.com/questions/13725230/way-too-slow-wxpython-application-getting-data-from-google-spreadsheet-and-user)

你发现什么花了这么长时间？您在那里遇到了哪些其他问题？

我对 stackoverflow 比较陌生，但我见过这些风格问题，可以解释为*“你能为我写这段代码吗？”* ，因为很快就被拒绝了。

您可能需要考虑分享上述链接中的一些挑战并解释项目中的特定问题。

**更新**

1+5: From the WX point of view, you'll want to keep the UI responsive whilst the search is going on. One way to do this is kick off the searching in a separate thread which calls wx.PostEvent once it has finished. Then in the main wx App you have an event handler which receives the event and processes it. In your case "shows the results on a lovely form".

See here for an example: [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)

# jquery - 是否可以以 jqgrid 的编辑形式创建弹出窗口

> ID：13816366
> 
> 赞同：1
> 
> 时间：2012-12-11T08:34:09.683
> 
> 标签：jquery, jqgrid

![在此处输入图像描述](../Images/1ad9ef2fc893f5b09a2e9aa512b303e6.png)

正如我们所见，在上面的编辑弹出图像中有添加和删除链接。当从列表中选择时，单击将打开列表，结果将显示在下拉列表中。添加链接可以如下：[1](https://i.stack.imgur.com/AUl1i.jpg)：[http：// quasipartikel.at/multiselect/](http://quasipartikel.at/multiselect/)

我的第一个疑问是是否可以在 jqgrid 编辑表单中进行。任何建议将不胜感激。

谢谢

# python - 当curve_fit抛出TypeError时如何避免python停止

> ID：13816370
> 
> 赞同：0
> 
> 时间：2012-12-11T08:34:24.410
> 
> 标签：python, exception, scipy, curve-fitting

我正在使用 python 对我的代码进行数据分析。我目前正在尝试调试一些东西，所以我将一些可能无效的数据放入我的 python 代码中。一条利用`curve_fit`给我的线`TypeError`

```
TypeError: array cannot be safely cast to required type
Traceback (most recent call last):
  File "makeStuffUnHR.py", line 405, in <module>
    FT = plotFT(FT,A)
  File "makeStuffUnHR.py", line 325, in plotFT
    line,pars = fitFTsurfaceTension(FTRange2,fty,a)
  File "/home/yotam/Applications/Process/dataHandler.py", line 75, in fitFTsurfaceTension
    popt, pcov = curve_fit(FTfuncSurface,x,log(y))
  File "/usr/lib/python2.7/dist-packages/scipy/optimize/minpack.py", line 426, in curve_fit
    res = leastsq(func, p0, args=args, full_output=1, **kw)
  File "/usr/lib/python2.7/dist-packages/scipy/optimize/minpack.py", line 283, in leastsq
    gtol, maxfev, epsfcn, factor, diag)
minpack.error: Result from function call is not a proper array of floats. 
```

我试图在没有运气的情况下捕获“TypeError”异常

如何让 python 继续运行代码？

**编辑：**

这是我的尝试，期待部分：

```
try:
    popt, pcov = curve_fit(FTfuncSurface,x,log(y))
except TypeError:
    popt = [0,0] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:37:25.130

使用 try/except 块来捕获`TypeError`异常。

演示它的示例代码：

```
try:
   a = (1,2,3) #Some code
except IndexError:
   pass 
```

# c# - 自定义 ASP.NET Web API 输出

> ID：13816372
> 
> 赞同：2
> 
> 时间：2012-12-11T08:34:26.397
> 
> 标签：c#, asp.net-mvc, serialization, asp.net-mvc-4, asp.net-web-api

如何自定义 ASP.NET Web API 的序列化输出？

比方说，我想要所有的值都是大写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:09:44.273

您可以访问 JSON.NET 序列化程序设置。使用 JSON.NET，您可以使用转换器覆盖转换，例如[这个 datetime one](http://cgeers.com/2011/09/25/writing-a-custom-json-net-datetime-converter/)。

您还可以通过从抽象 JsonConverter 继承来实现自己的。有关详细信息，请参见[此处](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_JsonConverter.htm)。

**对于您的示例，请创建转换器：**

```
public class UpperCaseStringConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(string);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        return reader.Value.ToString();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var outputValue = value as string;
        writer.WriteValue(outputValue == null ? null : outputValue.ToUpper());
    }
} 
```

**然后全局注册这个添加这个配置：**

[从这里](https://stackoverflow.com/questions/12856853/webapi-json-net-custom-date-handling)注册示例

```
JsonMediaTypeFormatter jsonFormatter = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
JsonSerializerSettings jSettings = new Newtonsoft.Json.JsonSerializerSettings();
jSettings.Converters.Add(new UpperCaseStringConverter());
jsonFormatter.SerializerSettings = jSettings; 
```

**要添加到模型上的单个属性，只需添加注释：**

```
[JsonConverter(typeof(UpperCaseStringConverter))] 
```

# java - 在 ubuntu 12.04 中安装 netbeans 时出错

> ID：13816373
> 
> 赞同：2
> 
> 时间：2012-12-11T08:34:28.613
> 
> 标签：java, netbeans-7, ubuntu-12.04

我试图在我的 ubuntu12.04 上安装 netbeans 'netbeans-7.2.1-ml-linux.sh'

但是当我执行这个 .sh 文件时，我得到了下面给出的异常。

```
 Configuring the installer...
 Searching for JVM on the system...
 Extracting installation data...
 Running the installer wizard...
 Can`t initialize UI
 Running in headless mode

 Exception: java.awt.HeadlessException thrown from the UncaughtExceptionHandler in thread "main" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-17T19:52:15.893

您需要安装 Java 运行时环境

```
sudo aptitude install default-jre 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T17:32:25.333

参考这个答案：

[netbeans安装错误：无法初始化在无头模式下运行的ui](https://stackoverflow.com/questions/8607298/netbeans-installation-error-cant-initialize-ui-running-in-headless-mode/8780869#8780869)

为我工作。出于某种原因，使用 OpenJDK 的安装程序无法打开 GUI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-02T08:30:45.723

问题是 openJDK 对 UI 的支持。
解决方案是安装 Oracle JDK，打开终端并编写以下命令：

*sudo apt-get remove openjdk**
*sudo add-apt-repository ppa:webupd8team/java*
*sudo apt-get update*
*sudo apt-get install oracle-java7-installer*
*sudo apt-get install oracle-java7-set-default*

之后重新安装netbeans。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:37:00.510

您缺少用于安装的 X-Server ( `java.awt.HeadlessException`)。安装脚本需要一个 UI。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T03:07:09.873

出于某种原因，sh 安装程序不适用于 openJDK 7。
安装的快速修复是更改回 JDK 6。
运行：

```
sudo update-alternatives --config java
(select java 6) 
sh netbeans-7.2.1-ml-linux.sh 
```

安装程序应该运行，然后使用更新替代品切换回 java 7 JDK。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-06T06:09:52.040

就我而言，我安装了 openjdk，`/usr/bin/java`指向已安装的 openjdk。我通过从 tar.gz 文件安装 Oracle JDK 7 解决了这个问题。将 tar 球解压缩到一个位置，比如您的 $HOME 目录。

之后我修改了`.bashrc`文件并将 PATH 变量修改为

> PATH=$HOME/jdk1.7/bin/:$PATH
> 导出路径

请记住，您的 jdk/bin 的路径应该附加到 PATH 中，因此系统会在您的路径中找到 java 可执行文件，而不是选择已安装的 openjdk。

`Note:`我选择不卸载已安装的 openjdk，因为我的大多数 Libreoffice 和其他已安装的应用程序都依赖于它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-12T17:34:40.270

首先你必须更新

```
sudo apt-get update 
```

然后默认java

```
sudo apt-get install -f default-jre
sudo apt-get install -f default-jdk 
```

并且应该完成。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-19T00:42:45.777

这就是为我解决的问题：

1.  我安装了Java JDK。在这种情况下：

    sudo aptitude install openjdk-8-jdk

2.  这是踢球者：我确保我的 Home 和 Path 变量设置正确。同样，在我的情况下：

    导出 JAVA_HOME=/usr/lib/jvm/java-8-openjdk

    导出 PATH=$PATH:/usr/lib/jvm/java-8-openjdk/bin

**我最初的问题是没有安装 JDK。然后没有正确设置环境变量。**如果它们没有正确设置，安装程序将不会启动。就那么简单。

# google-app-engine - Jinja2 在浏览器中显示图像

> ID：13816374
> 
> 赞同：2
> 
> 时间：2012-12-11T08:34:38.047
> 
> 标签：google-app-engine, django-models, jinja2

mymodel.url 是 textproperty(string) 是这样的

```
<a href ='http://www.abc.com'><img src='http://xyz.com/></a><img src="http://www.abcdefd.com" /> 
```

在 index.html 中，如果我使用`{{mymodel.url}}`，我会在浏览器中看到 html 代码。换句话说，jinja2 将`{{mymodel.url}}`其视为字符串。

```
<a href ='http://www.abc.com'><img src='http://xyz.com/></a><img src="http://www.abcdefd.com" /> 
```

我想在浏览器中查看图像。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:09:01.707

您必须向 jinja2 表明该内容是“安全的”，可以在浏览器中以 HTML 的形式显示

```
{{mymodel.url|safe }} 
```

[HTML 转义](http://jinja.pocoo.org/docs/templates/#html-escaping)

> 从模板生成 HTML 时，总是存在变量包含影响生成 HTML 的字符的风险。有两种方法：手动转义每个变量或默认自动转义所有内容。

# java - 无法显示所有西里尔文内容

> ID：13816375
> 
> 赞同：1
> 
> 时间：2012-12-11T08:34:43.113
> 
> 标签：java, jsp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:44:05.607

您使用的是什么 HTTP 服务器？渲染 JSP 时可能无法处理非 ASCII 数据。Tomcat 在几个版本之前也有类似的问题：[UTF-8 encoding fix for Tomcat and JSP](http://cagan327.blogspot.ru/2006/05/utf-8-encoding-fix-tomcat-jsp-etc.html)。

# php - PHP SQL Drop Down List -- Displays but Can't Select

> ID：13816376
> 
> 赞同：0
> 
> 时间：2012-12-11T08:34:42.340
> 
> 标签：php, html-select

I'm trying to create a drop down menu that dynamically updates a table. The drop down list shows the items in the category table, but they are not clickable--they can't be selected. What am I doing incorrectly?

```
 $sql = "SELECT pd_id, c.cat_id, cat_name, pd_name, pd_thumbnail
        FROM tbl_product p, tbl_category c
        WHERE p.cat_id = c.cat_id $sql2
        ORDER BY pd_name";
$result     = dbQuery(getPagingQuery($sql, $rowsPerPage));
$pagingLink = getPagingLink($sql, $rowsPerPage, $queryString);

$categoryList = buildCategoryOptions($catId);

?> 
<p>&nbsp;</p>
<form action="processProduct.php?action=addProduct" method="post"  name="frmListProduct" id="frmListProduct">
 <table width="100%" border="0" cellspacing="0" cellpadding="2" class="text">
  <tr>
   <td align="right">View products in : 
    <select name="cboCategory" class="box" id="cboCategory" onChange="viewProduct();">
     <option selected>All Category</option>
    <?php echo $categoryList; ?>
   </select>
 </td>
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:49:34.273

`foreach ( $query->result_array () as $val )` `{`

```
`$cat=$val['categoryid'];` 
```

`echo "<OPTION value=\"$cat\">$cat</OPTION>";` `}`

尝试在 php 中构建，如上所示。

# youtube-api - Youtube 观众留存 API

> ID：13816379
> 
> 赞同：4
> 
> 时间：2012-12-11T08:34:49.260
> 
> 标签：youtube-api

有没有办法通过 API 获取特定视频的 YouTube 观众保留数据？这似乎无法通过 API 获得（即使在 youtube 实验性 API 中）。还有其他方法吗，比如解析 UI 数据或联系 Youtube 来获取这些数据？

或者知道这些数据是否会在不久的将来通过 API 提供？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:43:16.620

这是我们从开发人员那里听到的常见功能请求，并且很有可能会被添加。不过，我没有任何具体细节可以分享关于何时发生这种情况。

您最好的选择是提交正式的[功能请求](https://code.google.com/p/gdata-issues/issues/entry?template=YouTube%20%28Enhancement%20Request%29)，我们将在那里进行跟踪。

# asp.net - 从单个表中删除相关数据

> ID：13816381
> 
> 赞同：1
> 
> 时间：2012-12-11T08:34:58.627
> 
> 标签：asp.net, sql-server-2008, c#-3.0

嗨，我有 ID 为 usertypeId、managerId、SupervisorId n 代表 ID 的表。

当perticuler用户登录时..假设经理然后它将显示与经理相关的数据..当我们要删除数据时登录用户不会被删除但是当假设superviosr被删除时,它的相关数据如reperesentative应该被删除..

这是我的代码：

```
if (Session["UserTypeId"].ToString() == "2")
{
   DataTable dt1 = new BALUserProfile().SelectForGridManager(
      new BOLUserProfile() { Id = int.Parse(Session["UserId"].ToString()), 
                      ManagerId = int.Parse(Session["UserId"].ToString()) });

   for (int i = 0; i < dt1.Rows.Count; i++)
   {
       if (dt1.Rows[i]["Id"].ToString() == Session["UserId"].ToString() &&
                 lblGUserTypeId1.ToString() == "2")
       {
           lblMessageGrid.Visible = true;
           lblMessageGrid.Text = "Data Can Not Be Delete";
       }
       else
       {
           //ObjBOL.Id = int.Parse(dt1.Rows[i]["Id"].ToString());
           //ObjBOL1.Id = int.Parse(dt1.Rows[i]["Id"].ToString());
           ObjBAL.Delete(ObjBOL);
           ObjBAL1.Delete(ObjBOL1);

       }
   }
} //this was missing 
```

是的，我知道，但谢谢...

# c++ - 使用 nullptr 有什么好处？

> ID：13816385
> 
> 赞同：170
> 
> 时间：2012-12-11T08:35:11.297
> 
> 标签：c++, c++11, null, c++-faq, nullptr

这段代码在*概念*上对三个指针做同样的事情（安全指针初始化）：

```
int* p1 = nullptr;
int* p2 = NULL;
int* p3 = 0; 
```

`nullptr`那么，分配指针与分配值`NULL`或分配指针相比有什么优势`0`？

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-12-11T08:39:27.020

在该代码中，似乎没有优势。但请考虑以下重载函数：

```
void f(char const *ptr);
void f(int v);

f(NULL);  //which function will be called? 
```

会调用哪个函数？当然，这里的本意是调用`f(char const *)`，但实际上`f(int)`会调用！这是一个大问题¹，不是吗？

因此，此类问题的解决方案是使用`nullptr`：

```
f(nullptr); //first function is called 
```

* * *

当然，这还不是唯一的优势`nullptr`。这是另一个：

```
template<typename T, T *ptr>
struct something{};                     //primary template

template<>
struct something<nullptr_t, nullptr>{};  //partial specialization for nullptr 
```

由于在模板中，类型`nullptr`推断为`nullptr_t`，所以你可以这样写：

```
template<typename T>
void f(T *ptr);   //function to handle non-nullptr argument

void f(nullptr_t); //an overload to handle nullptr argument!!! 
```

* * *

^(1\. 在 C++ 中，`NULL`定义为`#define NULL 0`，所以基本上`int`是，所以才被`f(int)`调用。)

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-01-01T16:18:58.923

C++11 引入了`nullptr`，它被称为`Null`指针常量，它***提高了类型安全性***并解决了与现有实现相关的空指针常量不同的***歧义情况***`NULL`。才能了解它的优点`nullptr`。我们首先需要了解它是`NULL`什么以及与之相关的问题是什么。

* * *

## 究竟是`NULL`什么？

Pre C++11`NULL`用于表示没有值的指针或不指向任何有效内容的指针。与流行的概念相反，**`NULL`不是 C++ 中的关键字**。它是标准库头文件中定义的标识符。简而言之，如果`NULL`不包含一些标准库头文件，您将无法使用。考虑**[示例程序](http://ideone.com/ASjTaL)**：

```
int main()
{ 
    int *ptr = NULL;
    return 0;
} 
```

**输出：**

```
prog.cpp: In function 'int main()':
prog.cpp:3:16: error: 'NULL' was not declared in this scope 
```

C++ 标准将 NULL 定义为在某些标准库头文件中定义的实现定义的宏。NULL 的起源来自 C，C++ 继承自 C。C 标准将 NULL 定义为`0`or `(void *)0`。但在 C++ 中存在细微差别。

C++ 不能按原样接受这个规范。与 C 不同，C++ 是一种强类型语言（C 不需要显式`void*`转换为任何类型，而 C++ 要求显式转换）。这使得 C 标准指定的 NULL 定义在许多 C++ 表达式中毫无用处。例如：

```
std::string * str = NULL;         //Case 1
void (A::*ptrFunc) () = &A::doSomething;
if (ptrFunc == NULL) {}           //Case 2 
```

如果将 NULL 定义为`(void *)0`，则上述表达式都不起作用。

*   **情况 1：**不会编译，因为需要从`void *`to自动转换`std::string`。
*   **情况 2：**无法编译，因为需要将 from`void *`转换为指向成员函数的指针。

因此，与 C 不同的是，C++ 标准要求将 NULL 定义为数字文字`0`或`0L`.

* * *

## 那么当我们已经有了另一个空指针常量时，还需要`NULL`什么？

尽管 C++ 标准委员会提出了适用于 C++ 的 NULL 定义，但该定义也有其自身的问题。NULL 几乎适用于所有场景，但不是全部。对于某些罕见的情况，它给出了令人惊讶和错误的结果。**[例如](http://ideone.com/EOq9f0)**：

```
#include<iostream>
void doSomething(int)
{
    std::cout<<"In Int version";
}
void doSomething(char *)
{
   std::cout<<"In char* version";
}

int main()
{
    doSomething(NULL);
    return 0;
} 
```

**输出：**

```
In Int version 
```

显然，其意图似乎是调用`char*`作为参数的版本，但正如输出显示的那样，调用了采用版本的函数`int`。这是因为 NULL 是数字文字。

此外，由于 NULL 是 0 还是 0L 是由实现定义的，因此在函数重载决策中可能会出现很多混淆。

**示例程序：**

```
#include <cstddef>

void doSomething(int);
void doSomething(char *);

int main()
{
  doSomething(static_cast <char *>(0));    // Case 1
  doSomething(0);                          // Case 2
  doSomething(NULL)                        // Case 3
} 
```

分析上面的片段：

*   **案例 1：**`doSomething(char *)`按预期 调用。
*   **情况 2：**调用`doSomething(int)`但可能`char*`需要版本，因为`0`IS 也是一个空指针。
*   **情况 3：**如果`NULL`定义为，可能会在预期的时候`0`调用，可能会导致运行时出现逻辑错误。如果定义为，则调用不明确并导致编译错误。`doSomething(int)``doSomething(char *)``NULL``0L`

因此，根据实现，相同的代码可能会产生不同的结果，这显然是不希望的。自然，C++ 标准委员会想要纠正这个问题，这就是 nullptr 的主要动机。

* * *

## 那么什么是`nullptr`，它是如何避免的问题`NULL`呢？

C++11 引入了一个新关键字`nullptr`作为空指针常量。与 NULL 不同，它的行为不是实现定义的。它不是宏，但它有自己的类型。nullptr 的类型为`std::nullptr_t`。C++11 适当地定义了 nullptr 的属性以避免 NULL 的缺点。总结一下它的属性：

**属性 1：**它有自己的类型`std::nullptr_t`，
**属性 2：**它是隐式可转换的，并且可与任何指针类型或指向成员的类型相比较，但
**属性 3：**它不可隐式转换或与整数类型比较，除了`bool`.

考虑以下示例：

```
#include<iostream>
void doSomething(int)
{
    std::cout<<"In Int version";
}
void doSomething(char *)
{
   std::cout<<"In char* version";
}

int main()
{
    char *pc = nullptr;      // Case 1
    int i = nullptr;         // Case 2
    bool flag = nullptr;     // Case 3

    doSomething(nullptr);    // Case 4
    return 0;
} 
```

在上述程序中，

*   **案例 1：** OK - 属性 2
*   **案例 2：**不好 - 属性 3
*   **案例 3：** OK - 属性 3
*   **案例 4：**没有混淆 - 调用`char *`版本，属性 2 和 3

因此，引入 nullptr 避免了旧 NULL 的所有问题。

## 你应该如何以及在哪里使用`nullptr`？

C++11 的经验法则是`nullptr`在过去使用 NULL 时简单地开始使用。

* * *

^(**标准参考：**) 

^(C++11 标准：C.3.2.4 宏 NULL)
^(C++11 标准：18.2 类型)
^(C++11 标准：4.10 指针转换)
^(C99 标准：6.3.2.3 指针)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-12-11T13:48:45.940

这里真正的动机是*完美转发*。

考虑：

```
void f(int* p);
template<typename T> void forward(T&& t) {
    f(std::forward<T>(t));
}
int main() {
    forward(0); // FAIL
} 
```

简单地说，0 是一个特殊的*值*，但值不能通过系统传播，只有类型可以。转发功能是必不可少的，0处理不了。因此，绝对有必要引入`nullptr`，其中*类型*是特殊的，并且类型确实可以传播。事实上，MSVC 团队在`nullptr`实现了右值引用之后不得不提前引入，然后自己发现了这个陷阱。

还有一些其他`nullptr`的极端案例可以让生活更轻松——但这不是核心案例，因为演员可以解决这些问题。考虑

```
void f(int);
void f(int*);
int main() { f(0); f(nullptr); } 
```

调用两个单独的重载。此外，考虑

```
void f(int*);
void f(long*);
int main() { f(0); } 
```

这是模棱两可的。但是，使用 nullptr，您可以提供

```
void f(std::nullptr_t)
int main() { f(nullptr); } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-28T15:44:06.077

**nullptr 基础知识**

`std::nullptr_t`是空指针字面量 nullptr 的类型。它是一个 prvalue/rvalue 类型`std::nullptr_t`。存在从 nullptr 到任何指针类型的空指针值的隐式转换。

文字 0 是一个 int，而不是一个指针。如果 C++ 发现自己在只能使用指针的上下文中查看 0，它会不情愿地将 0 解释为空指针，但这是一个后备位置。C++ 的主要策略是 0 是一个 int，而不是一个指针。

**优点 1 - 在指针和整数类型上重载时消除歧义**

在 C++98 中，这样做的主要含义是指针和整数类型的重载可能会导致意外。将 0 或 NULL 传递给此类重载永远不会称为指针重载：

```
 void fun(int); // two overloads of fun
    void fun(void*);
    fun(0); // calls f(int), not fun(void*)
    fun(NULL); // might not compile, but typically calls fun(int). Never calls fun(void*) 
```

这个调用的有趣之处在于源代码的表面含义（“我用 NULL 调用 fun——空指针”）和它的实际含义（“我用某种整数调用 fun——而不是 null指针”）。

nullptr 的优点是它没有整数类型。用 nullptr 调用重载函数 fun 调用 void* 重载（即指针重载），因为 nullptr 不能被视为任何积分：

```
fun(nullptr); // calls fun(void*) overload 
```

因此，使用 nullptr 而不是 0 或 NULL 可以避免重载决议意外。

**使用 auto 作为返回类型时`nullptr`over的另一个优点`NULL(0)`**

例如，假设您在代码库中遇到这种情况：

```
auto result = findRecord( /* arguments */ );
if (result == 0) {
....
} 
```

如果您碰巧不知道（或不能轻易找出） findRecord 返回的内容，则可能不清楚 result 是指针类型还是整数类型。毕竟，0（测试的结果）可以是任何一种方式。另一方面，如果您看到以下内容，

```
auto result = findRecord( /* arguments */ );
if (result == nullptr) {
...
} 
```

没有歧义：结果必须是指针类型。

**优势3**

```
#include<iostream>
#include <memory>
#include <thread>
#include <mutex>
using namespace std;
int f1(std::shared_ptr<int> spw) // call these only when
{
  //do something
  return 0;
}
double f2(std::unique_ptr<int> upw) // the appropriate
{
  //do something
  return 0.0;
}
bool f3(int* pw) // mutex is locked
{

return 0;
}

std::mutex f1m, f2m, f3m; // mutexes for f1, f2, and f3
using MuxtexGuard = std::lock_guard<std::mutex>;

void lockAndCallF1()
{
        MuxtexGuard g(f1m); // lock mutex for f1
        auto result = f1(static_cast<int>(0)); // pass 0 as null ptr to f1
        cout<< result<<endl;
}

void lockAndCallF2()
{
        MuxtexGuard g(f2m); // lock mutex for f2
        auto result = f2(static_cast<int>(NULL)); // pass NULL as null ptr to f2
        cout<< result<<endl;
}
void lockAndCallF3()
{
        MuxtexGuard g(f3m); // lock mutex for f2
        auto result = f3(nullptr);// pass nullptr as null ptr to f3 
        cout<< result<<endl;
} // unlock mutex
int main()
{
        lockAndCallF1();
        lockAndCallF2();
        lockAndCallF3();
        return 0;
} 
```

上面的程序编译执行成功，但是lockAndCallF1、lockAndCallF2和lockAndCallF3有多余的代码。如果我们可以为所有这些编写模板，那么编写这样的代码是很可惜的`lockAndCallF1, lockAndCallF2 & lockAndCallF3`。所以可以用模板泛化。我已经为冗余代码编写了模板函数`lockAndCall`而不是多个定义`lockAndCallF1, lockAndCallF2 & lockAndCallF3`。

代码重构如下：

```
#include<iostream>
#include <memory>
#include <thread>
#include <mutex>
using namespace std;
int f1(std::shared_ptr<int> spw) // call these only when
{
  //do something
  return 0;
}
double f2(std::unique_ptr<int> upw) // the appropriate
{
  //do something
  return 0.0;
}
bool f3(int* pw) // mutex is locked
{

return 0;
}

std::mutex f1m, f2m, f3m; // mutexes for f1, f2, and f3
using MuxtexGuard = std::lock_guard<std::mutex>;

template<typename FuncType, typename MuxType, typename PtrType>
auto lockAndCall(FuncType func, MuxType& mutex, PtrType ptr) -> decltype(func(ptr))
//decltype(auto) lockAndCall(FuncType func, MuxType& mutex, PtrType ptr)
{
        MuxtexGuard g(mutex);
        return func(ptr);
}
int main()
{
        auto result1 = lockAndCall(f1, f1m, 0); //compilation failed 
        //do something
        auto result2 = lockAndCall(f2, f2m, NULL); //compilation failed
        //do something
        auto result3 = lockAndCall(f3, f3m, nullptr);
        //do something
        return 0;
} 
```

**详细分析为什么编译失败为`lockAndCall(f1, f1m, 0) & lockAndCall(f3, f3m, nullptr)`not for`lockAndCall(f3, f3m, nullptr)`**

**为什么编译`lockAndCall(f1, f1m, 0) & lockAndCall(f3, f3m, nullptr)`失败？**

问题是当 0 被传递给 lockAndCall 时，模板类型推断开始计算它的类型。0 的类型是 int，所以这就是这个 lockAndCall 调用的实例化中的参数 ptr 的类型。不幸的是，这意味着在 lockAndCall 内部对 func 的调用中，传递了一个 int，这与预期的`std::shared_ptr<int>`参数不兼容。`f1`调用中传递的 0`lockAndCall`旨在表示一个空指针，但实际传递的是 int。试图将此 int 作为 a 传递给 f1`std::shared_ptr<int>`是类型错误。调用`lockAndCall`with 0 失败，因为在模板内部，一个 int 被传递给一个需要`std::shared_ptr<int>`.

通话涉及的分析`NULL`基本相同。当`NULL`被传递给`lockAndCall`时，会为参数 ptr 推导出一个整数类型，并且当 - 一个`ptr`int 或类似 int 的类型 - 被传递给时会发生类型错误`f2`，它期望得到一个`std::unique_ptr<int>`。

相比之下，呼叫涉及`nullptr`没有问题。当`nullptr`被传递给`lockAndCall`时，for 的类型`ptr`被推导出为`std::nullptr_t`。当`ptr`被传递给 时`f3`，有一个从`std::nullptr_t`to的隐式转换`int*`，因为`std::nullptr_t`隐式转换为所有指针类型。

**建议，每当您要引用空指针时，请使用 nullptr，而不是 0 或`NULL`.**

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-11T08:41:35.497

`nullptr`以您展示示例的方式没有直接优势。
但是考虑一个情况，你有两个同名的函数；1 次`int`，另一个`int*`

```
void foo(int);
void foo(int*); 
```

如果你想`foo(int*)`通过传递一个NULL来调用，那么方法是：

```
foo((int*)0); // note: foo(NULL) means foo(0) 
```

`nullptr`使它更**容易和直观**：

```
foo(nullptr); 
```

[Bjarne 网页的附加链接](http://www.stroustrup.com/C++11FAQ.html#nullptr)。
无关紧要，但在 C++11 旁注：

```
auto p = 0; // makes auto as int
auto p = nullptr; // makes auto as decltype(nullptr) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-11T08:52:33.127

正如其他人已经说过的那样，它的主要优势在于过载。虽然显式`int`与指针重载可能很少见，但请考虑标准库函数，例如`std::fill`（在 C++03 中不止一次让我感到痛苦）：

```
MyClass *arr[4];
std::fill_n(arr, 4, NULL); 
```

不编译：`Cannot convert int to MyClass*`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-11T08:54:04.270

IMO 比那些重载问题更重要：在深度嵌套的模板构造中，很难不忘记类型，并且给出明确的签名是一项相当大的努力。因此，对于您使用的所有内容，越精确地关注预期目的越好，它将减少对显式签名的需求，并允许编译器在出现问题时生成更深入的错误消息。

# java - 无法更新图像

> ID：13816386
> 
> 赞同：0
> 
> 时间：2012-12-11T08:35:12.450
> 
> 标签：java, image, caching

这是我的应用程序：首先，我们必须上传一张图片，然后当我们点击搜索 ..`JLabel`在应用程序上将显示从创建的图标`new File("gambar/HistoJPG/sample.jpeg")`。

单击重置按钮时，图像和图像`sample.jpeg`将被删除。

但是当我上传下一张图片时，新的`sample.jpg`将再次创建并显示。但是应用程序仍然显示旧的`sample.jpg`，而不是新的，即使旧的`sample.jpg`已被删除。

这是我的一些代码

```
 histoQ.setIcon(new ImageIcon("gambar/HistoJPG/sample.jpeg")); 
```

这是按钮重置操作：

```
breset.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e) {
        imgLabel.setIcon(new ImageIcon("src/image/blank.jpg"));
        File fildel = new File("gambar/HistoJPG/sample.jpeg");
        fildel.delete();
    }
} 
```

# windows - 在 Emacs 中重新排列文件名

> ID：13816388
> 
> 赞同：4
> 
> 时间：2012-12-11T08:35:16.217
> 
> 标签：windows, emacs, file-rename, dired

我有一批格式相同的文件说`bmp`，文件名是`0.bmp` `1.bmp`...... `99.bmp`，我想更改文件名，比如，`0.bmp`等等。emacs可以这样做吗？我在 Windows 下使用 emacs。`99.bmp``1.bmp``98.bmp``dired-mode`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T09:52:03.700

您可以使用`M-x wdired-change-to-wdired-mode`使 dired 缓冲区可编辑。[然后一个简单的带有计数器](http://www.gnu.org/software/emacs/manual/html_node/emacs/Keyboard-Macro-Counter.html)的键盘宏，从 dired 缓冲区的末尾开始，应该可以为您解决问题。

如果您不想使用宏，则替代方法是：

```
M-x replace-regexp
Replace regexp: ^[0-9]+
Replace regexp with \,(- 99 \#&) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:41:10.487

可能是一个快速的肮脏答案，而不是通用的：

第一：`C-x C-q`在`dired-mode`；

第二：`M-:`yank 和`RET`代码段：

```
(progn 
  (beginning-of-buffer)
  (while (re-search-forward "\\([0-9]+\\).bmp" nil t)
    (replace-match
     (format "%d.bmp" (- 99 (string-to-number (match-string 1))))
     nil
     nil))) 
```

第三：`C-c C-c`保存修改，大功告成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:56:06.640

我不确定，但您可以在缓冲区`dired-mode`中执行一个简单的脚本。`*scratch*`当您用不同的名称替换现有文件名时，我建议您首先重命名所有文件 ant 然后从这些名称开始：

```
 (progn 
  (dotimes (i 100) 
    (let ((file-name (concat (number-to-string i) ".bmp")))
      (rename-file file-name (concat "old" file-name))))
  (dotimes (i 100)
    (let ((file-name-old (concat "old" (number-to-string i) ".bmp"))
          (file-name-new (concat (number-to-string (- 99 i)) ".bmp")))
      (rename-file file-name-old file-name-new)))) 
```

如果您将其复制到`*scratch*`缓冲区，并*通过*您 push 的表达式`C-x C-e`，该代码将为您完成。

# c# - 是否有（优雅的）解决方案可以在方法中进一步约束泛型类型参数？

> ID：13816390
> 
> 赞同：2
> 
> 时间：2012-12-11T08:35:24.347
> 
> 标签：c#, generics, type-constraints

我有一个通用基类`Foo<T>`，类`Bar<U>`和`Bat<T>`派生自该基类。 `U`源自`T`。`U`Bat 和 Bar 是类似的实现，只是在几个必须以不同方式处理类型值的地方有所不同。

在`Foo`中，我有一个工厂方法`Create`，它接受一个类型的参数`T`并且应该创建一个`Bar`或`Bat`对象。它看起来大致是这样的：

```
public static IFoo<T> Create(T input) {
  if (input.TypeIdentifier == Types.Bar) {// exemplary type check
    // input is of or derives from `U`
    // return a Bar<U>
  } else 
    return new Bat(input);
}

// usage:
U myU = new ClassThatDerivesFromU();
T myT = new ClassThatDerivesFromT(CouldBe.Of(Type.U));
var myFoo1 = Create(myU); // of type IFoo<U>
var myFoo2 = Create(myT); // of type IFoo<T> 
```

由于`T`不是 a `U`，因此我无法实例化`Bar`对象。

一种可能的解决方案是：

```
public static U To<T, U>(T input) where U : T {
  return input as U;
}

// to create Bar:
new Bar(To<T, U>(input)); 
```

然而，这完全是 hack imo，并且不能与结构一起使用（`U`在这种情况下，由于继承，无论如何都不能成为结构，但我还有另一种情况，我想根据 if`T`是 a`struct`或 a来调用方法`class`）。

在 C++ 中，可以通过提供具有不同类型约束的方法的多个重载来解决（iirc）这样的场景`Create`，编译器将检查类型`T`并选择正确的方法（使用`U`或`T`作为类型约束）。

我不知道 C# 中有类似的内置解决方案，但也许我可以使用一种优雅的解决方法？（反思是一个明显的答案，但不是一个选项）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:36:43.320

是的，使用接口时允许泛型变化。您可以将 IFoo 中的泛型类型参数声明为协变或逆变（取决于用法）。如果您希望使用更派生的类型，则该类型`T`必须是逆变的，并且 IFoo 可以声明如下：

```
interface IFoo<in T> { ... } 
```

查看[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/dd799517.aspx)，了解有关 C# 中的泛型和变异的更多信息。

**更新**

一旦你有了一个`IFoo<U>`is `IFoo<T>`if的条件`U : T`（例如 IFoo 的泛型是逆变的），那么你就可以在你的 create 方法中安全地进行转换：

```
return (IFoo<T>)((object)new Bar<U>()); 
```

# cordova - 如何为维基创建兴趣点？

> ID：13816391
> 
> 赞同：0
> 
> 时间：2012-12-11T08:35:25.257
> 
> 标签：cordova, augmented-reality, wikitude

我想在我的 PhoneGap 应用程序中实现 Wikitude World Browser，但我不知道如何为其创建 POI。我在网上没有找到任何文件。

有谁知道如何为 Wikiitude 创建 POI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:47:57.723

Wikitude 中的 POI 是通过[ARML](http://openarml.org/wikitude4.html "ARML")文档创建的，但是我不知道如何将它们集成到 PhoneGap 中。

# c# - 如何在 RDLC 报告的每一页上显示标题列？

> ID：13816393
> 
> 赞同：1
> 
> 时间：2012-12-11T08:35:29.627
> 
> 标签：c#, rdlc

如何在 RDLC 报告的每一页上显示标题列？

目前它只显示在第一页而不是其他页面。我必须使用哪些设置才能在所有页面上显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:31:31.310

右键单击 tablix -> 属性 -> 在列首选项下 -> 在每页上重复标题行

如果这不起作用，您可以尝试使用[以下链接](http://blogs.msdn.com/b/robertbruckner/archive/2008/10/13/repeat-header-and-visible-fixed-header-table.aspx)

# delphi - 将 TAction 用于“仅图标”TButton

> ID：13816394
> 
> 赞同：5
> 
> 时间：2012-12-11T08:35:39.643
> 
> 标签：delphi, c++builder, taction

我有一个用于菜单项和 TButton 的 TAction。我希望菜单项显示标签，而 TButton*仅*显示图标。但是，当一个 Action 被分配时，Vcl 会自动设置 TButton 的 Caption 属性，我无法摆脱它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T09:02:15.877

在菜单项上，设置`ImageIndex`为`-1`。在按钮上，将 设置`Caption`为`''`。您必须在运行时执行此操作。

这将破坏与这些单个属性的操作的关联。该操作仍将用于`Hint`,`OnExecute`等`OnUpdate`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T09:39:36.977

您可以有两个单独的操作：一个用于菜单项，一个用于按钮。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T09:33:20.373

一个更hacky的解决方案可能是将TAG 22设置为例如在以下示例中

```
type

  TButton=Class(Vcl.StdCtrls.TButton)
         procedure SetText(var Message:TWMSETTEXT); message WM_SETTEXT;
  End;

  TForm4 = class(TForm)

    ActionList1: TActionList;
    ImageList1: TImageList;
    Action1: TAction;
    BitBtn1: TBitBtn;
    Button1: TButton;
    Button2: TButton;
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

{ TMyButton }

procedure TButton.SetText(var Message:TWMSETTEXT);
begin

  if Tag<>22 then   inherited else Message.Result := 1;
end; 
```

# sql - 需要创建存储过程

> ID：13816395
> 
> 赞同：1
> 
> 时间：2012-12-11T08:35:44.377
> 
> 标签：sql, stored-procedures, sql-server-2008-r2

```
if(filename==x) 
 exec stored procedure1 

else if (filename==y) 
 exec stored  procedure2 

else 
exec  stored  procedure3

filename is stored in a table . 
```

如何在 sql server 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:58:17.197

有没有你遇到问题的部分？这是从表中获取文件名的方式：

```
Declare @filename nvarchar(100)
Select @filename = filename_column from tablename 
```

if 语句的语法是

```
If @filename='xxx'
Begin
...
End 
```

执行存储过程是用 完成的`exec`，就像在您的伪代码中一样。

# firefox - Apache Jmeter忽略帖子正文

> ID：13816397
> 
> 赞同：1
> 
> 时间：2012-12-11T08:35:53.913
> 
> 标签：firefox, http-headers, jmeter, fiddler

我在 JMeter 中模拟 Http 请求时遇到问题。

基本任务是让 JMeter 模拟在 firefox 中发出的请求，然后将其用作性能测试的基础。但是，我在让 JMeter 包含后标题正文时遇到问题。

使用 fiddler，我记录了来自 firefox 的请求，看起来像这样。

```
POST http://*****:8001/XMLServlet?action=send HTTP/1.1
Host: *****
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://*****:8001/XMLServlet
Cookie: JSESSIONID=YpvCQGvFWshb6yyNsZvWZzHLLknNMpXRJ36vR7p0jxSp41Q3zlbj!-409403047
Content-Type: multipart/form-data; boundary=---------------------------491299511942
Content-Length: 3125
-----------------------------491299511942
Content-Disposition: form-data; name="find"; filename="2010100010427.XML"
Content-Type: text/xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE DDT PUBLIC "*****" "*****">
<Some XML file/>
-----------------------------491299511942
Content-Disposition: form-data; name="submit"

Send
-----------------------------491299511942-- 
```

我在 JMeter 中提出了一个登录请求，它工作正常，但实际帖子的行为与预期不符。

我正在使用“发送带有请求的文件”选项来发送文件，我选择了 POST 方法，并在 Post Body(raw) 中添加了

```
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Host: *****
Connection: keep-alive
Referer: http://*****:8001/XMLServlet 
```

我希望这将包含在最终请求中，但是当我在执行 fiddler 后查看 fiddler 时，结果如下：

```
POST http://*****:8001/XMLServlet?action=send HTTP/1.1
Connection: keep-alive
Cookie: JSESSIONID=LdyTQGsGzg0bSvbTKhF3grPhBYTKnY2TJ3CzLdB3Fwp8K7r2z2zN!-409403047
Content-Length: 2034
Content-Type: multipart/form-data; boundary=_bm2tmf-3Nv071ZvyhFKaWOc4RixWE_dNyLk
Host: *****:8001
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.2.1 (java 1.5)

--_bm2tmf-3Nv071ZvyhFKaWOc4RixWE_dNyLk
Content-Disposition: form-data; name="find"; filename="2010100000484.XML"
Content-Type: text/xml
Content-Transfer-Encoding: binary

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE DDT PUBLIC "*****" "http://*****/sad.dtd">
<Some XML file/>

--_bm2tmf-3Nv071ZvyhFKaWOc4RixWE_dNyLk-- 
```

为什么 JMeter 忽略 Post Body？更重要的是：我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:23:44.270

您添加到 POST 正文的是 HTTP 标头，而不是正文。无法在 HTTP 请求采样器中设置标头。要发送它们，您应该添加带有所有这些标头的[HTTP 标头管理器。](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Header_Manager)

# javascript - 在 Google Map v3 中初始化函数后添加和删除标记

> ID：13816398
> 
> 赞同：0
> 
> 时间：2012-12-11T08:36:13.263
> 
> 标签：javascript, jquery, maps

我想在地图上显示标记。这些必须移动一个新的位置。

由于我无法确定移动标记，我决定删除现有标记并创建一个新标记。

但标记不会被删除。相反，具有相同标签的新标记会不断出现在新位置。

```
 var markers = [];     

function addMarker(lat, lon, id, label, speed, course, temp) {

    var marker = new MarkerWithLabel({
        name:id,
        id:id,
        position: new google.maps.LatLng(lat, lon),     
        draggable: true,
        optimized:false,
        map: map,
        labelContent: label,
        labelAnchor: new google.maps.Point(22, 0),
        labelClass: "labels",  
        labelStyle: {opacity: 0.75}
    });

    if(temp!=""){
        temptext = "<br />Temprature "+ temp;
    }  else{
        temptext =" ";
    }

    markers[id]=marker;
    console.log(markers);
    iw[id] = new google.maps.InfoWindow({
        content: "<b>"+label+"</b><br />Speed:"+speed+" KM/h "+ "<br />heading "+ course + temptext+"<br />["+id+"]",       
    });
    google.maps.event.addListener(marker, "click", function (e) { iw[id]
        .open(map, marker); });

}

   function clearMarker(id){

    if(typeof markers[id] == 'object'){

        console.log("key exists" +id);  
        delmarker = markers[id]
        delmarker.setMap(null);
         parent.markers.splice(id, 1)  ;
         //console.log(markers);     
    }      else{
        console.log(id+ "key does not exist" );      
    }

} 
```

# php - href 超链接作为 POST

> ID：13816402
> 
> 赞同：2
> 
> 时间：2012-12-11T08:36:27.973
> 
> 标签：php, forms, post, get

我想知道哪个是映射`<a href=...></a>`执行 HTTP GET 的超链接以执行 HTTP POST 的最佳方式（我想避免在 URL 中传递所有变量）？比如`hrefs`下面的2。此外，我还想摆脱`submit`按钮并使用常规`<a href=...></a>`超链接。有什么建议么？

```
<form action="test.php?action=update" method="post" id="cart">
  <table>
    <tr>
      <td>
        <a href="test.php?action=delete&id=<?php echo $id ?>" class="r">
          remove
        </a>
      </td>
      <td>
        <a href="test.php?action=add&id=<?php echo $id ?>" class="r">add</a>
      </td>
    </tr>
    <tr>
     ...
    </tr>
  </table>
  <div> <button type="submit">Update</button> </div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:45:05.963

我建议使用[jQuery.post](http://api.jquery.com/jQuery.post/)并[单击](http://api.jquery.com/click/)。单击链接后，通过类似这样的方式提交数据

```
$('.r').on('click', function() {
        $.post('test.php', {key:'value', key2:'value2'}, function(data) {
          //error check here
        });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:18:57.323

As far as i know you can't perform any POST requests with links. You can make your GET requests with links and php as a fallback for users with javascript disabled and for those who have javascript enabled cancel default behavior for links with javascript and make with ajax your POST request with help of AJAX.

for example:

```
<a class="submit" href="hallo.html?hello=world&test=yes">Test</a> 
```

and js(i used jquery) would be:

```
$('.submit').click(function(){
    var urlPairs = this.href.split('?')[1].split('&'),
        total = urlPairs.length,
        current = [],
        data = {};

    for(;total;) {
        current = urlPairs[--total].split('=');
        data[current[0]] = current[1];
    }

    $.post('test.php', data);

    return false;
}); 
```

​</p>

you could also write your POST function other for more info check [jQuery post function doc](http://api.jquery.com/jQuery.post/)

P.S. I wounder, if you are using FORM any way why wouldn't you use submit button, is it because of CSS styling? You could style it the same way like any other element(with some tweaks in some browsers).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:39:29.323

您可以将输入标签隐藏在表单中，以将它们作为 POST 提交。

```
<td><a href="test.php?action=delete&id=<?php echo $id;?>" class="r">remove</a></td>
<td><a href="test.php?action=add&id=<?php echo $id;?>" class="r">add</a></td> 
```

使用两种形式重写上述内容，有`<input type="hidden" name="id />` 和按钮`<input type="button" name="delete" />` 等。

如果您在操作脚本中运行 print_r($_POST)。您将获得按钮列表和隐藏字段的值。现在，您可以为要运行的操作编写条件。我这里没有写完整的代码，只是传递一下思路。

编辑：见下面的例子。

```
 <form  method="post" id="cart">
        <table>
                <input type="hidden" name="id" value='some value' />
                <input type="submit" name="action" value="delete" />
                <input type="submit" name="action" value="add" />
            </tr>
            <tr>
                ...
            </tr>
        </table>
        <div><button type="submit">Update</button></div>
     </form>

    <?php print_r($_POST); ?> 
```

# android - 为 GridView 设置默认选择

> ID：13816406
> 
> 赞同：2
> 
> 时间：2012-12-11T08:36:43.567
> 
> 标签：android, android-layout

谁能指导我如何将网格视图的特定元素设置为选中？

**.setSelection(positionOfItem)**不起作用。

```
gridViewSize  =  (GridView) inflaterView.findViewById(R.id.grid_sizes);
        gridViewSize.setAdapter(new PopupSizeAdapter(context,typeArr,1));
        gridViewSize.setSelection(0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:59:23.167

它对我有用

```
mGridView.setSelection(pos);
mGridView.requestFocusFromTouch();
mGridView.setSelection(pos); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T16:48:01.860

我今天遇到了同样的问题，以下是我的解决方案：

```
GridView.getViewTreeObserver.addOnGlobalLayoutListener(getLayoutListener(mGridView))
private static ViewTreeObserver.OnGlobalLayoutListener getLayoutListener(final GridView mGridView) {
    ViewTreeObserver.OnGlobalLayoutListener listener = new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            View view = mGridView.getChildAt(0);
            if(view != null) {
                if(!view.isSelected()) {
                    view.setSelected(true);
                } else {
                    // remove the listener after the first time.
                    if (Build.VERSION.SDK_INT < 16) {
                        mGridView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                    } else {
                        mGridView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                    }
                }
            }
        }
    };

    return listener;
} 
```

而且，如果您使用的是 android API >= 11，您还可以将 View.OnLayoutChangeListener 添加到 GridView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T13:46:37.350

尝试这个：

```
grid.performItemClick(view, position, id); 
```

然后我的状态可绘制在 GridView 上正常工作。

# utf-8 - Jaspersoft Ireport 不支持 UTF-8 查询（希伯来语）

> ID：13816408
> 
> 赞同：1
> 
> 时间：2012-12-11T08:36:52.257
> 
> 标签：utf-8, jasper-reports, ireport

在 Ireport 4.8.0 中，我需要使用包含“UTF-8”字的“where”短语编写查询，如下所示：

选择帐户。`name`AS 帐户名称，帐户。`billing_address_city`AS accounts_billing_address_city FROM `accounts`accounts WHERE accounts。`name`=“מיינפורם”

当我在 Ireport 中编写它时，它什么也找不到，因为它无法识别 where 子句中的 UTF-8 单词：

![在此处输入图像描述](../Images/47faf3c526a63787b2a8676af8c7abf1.png)

当相同的查询在 MySQL 数据库中工作时：

![在此处输入图像描述](../Images/2b3dabc814f6dd0455a4311ab7541686.png)

所以问题出在无法识别 UTF-8 字的 Ireport 中，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:43:43.827

通过定义一个新的数据库连接来解决它，这次使用以下参数：

jdbc:postgresql://IPAddress/DatabaseName?useUnicode=true&characterEncoding=UTF-8

从此，报表查询开始返回结果。

# objective-c - Objc - 如何在这样的 UIView 中添加视频播放器？

> ID：13816416
> 
> 赞同：3
> 
> 时间：2012-12-11T08:37:04.863
> 
> 标签：objective-c, video, mpmovieplayercontroller, video-player

这个播放器只有 2 个按钮，播放/暂停和全屏，它看起来像一个`system player`，如此快速和简单。

我`UIWebView and HTML5`在 UIView 里面用过，但是 UIWebView 太慢了，不能全屏播放。

如果这个播放器是一个`UIObject`或一些 UIView 的东西，我该如何添加它？

谢谢~

![应用程序 Everyday.me 中的示例视频播放器](../Images/6987ffe172e2784ada27479810c43d9b.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-15T15:56:58.400

MPMoviePlayerController 已从 iOS 9 中弃用。您现在可以使用 AVPlayerViewController 将视频插入 iOS 项目。

例如：

```
#import <AVFoundation/AVFoundation.h>
#import <AVKit/AVKit.h> 
```

...

```
@property (nonatomic, retain) AVPlayerViewController *playerViewController; 
```

...

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    NSString *stringVideoName = @"video.m4v";
    NSString *stringVideoPath = [[NSBundle mainBundle] pathForResource:stringVideoName ofType:nil];
    NSAssert(stringVideoPath, @"Expected not nil video file");

    NSURL *urlVideoFile = [NSURL fileURLWithPath:stringVideoPath];
    NSAssert(urlVideoFile, @"Expected not nil video url");

    _playerViewController = [[AVPlayerViewController alloc] init];
    _playerViewController.player = [AVPlayer playerWithURL:urlVideoFile];
    _playerViewController.view.frame = self.view.bounds;
    _playerViewController.showsPlaybackControls = YES;

    [self.view addSubview:_playerViewController.view];
    self.view.autoresizesSubviews = YES;

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T09:39:38.223

您可以在`UIView`using中添加视频播放器`MPMoviePlayerController`。

这是 Apple 示例代码，它就是这样做的。它可以从互联网流式传输视频以及播放本地电影文件。

您可以通过更改 moviePlayer`controlStyle`属性来更改播放控件。

您可以从下面的链接中找到示例代码

[http://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-24T09:04:26.557

导入以下框架

```
#import <MediaPlayer/MediaPlayer.h>
#import <AVFoundation/AVFoundation.h>
#import <AVKit/AVKit.h>
#import <UIKit/UIKit.h> 
```

在 UIView 或 UIViewController 中添加以下代码 类 `videoView`为 UIView

```
 // Url of Video
    NSURL *videoURL = [NSURL URLWithString:@"urlOfVideo"];

    // Init Player
    AVPlayer *player = [AVPlayer playerWithURL:videoURL];
    AVPlayerViewController *playerViewController = [AVPlayerViewController new];

    // Add Player in AVPlayerViewController
    playerViewController.player = player;
    playerViewController.showsPlaybackControls = true;

    // Set Frame accoding to view
    playerViewController.view.frame = _videoView.bounds;

    //Used to Play On start
    [playerViewController.player play];

    // Add Video in UIView
    [_videoView addSubview:playerViewController.view]; 
```

我希望它对你有用...

# java - 为linux中的java工具指定字体

> ID：13816418
> 
> 赞同：1
> 
> 时间：2012-12-11T08:37:07.850
> 
> 标签：java, linux, sar

我正在尝试为 sar 数据可视化设置 kSar java 工具。一切都很好，除了字体设置。

kSar 用户 jfreechart 构建图形，它使用了一些奇怪的不可读字体。这是输出示例：

![在此处输入图像描述](../Images/540340e0c768c2f22fcf457af5280f71.png)

我在 ~/.fonts 中安装了新字体（顺便说一句，我没有 root 权限并且无法在系统范围内进行更改），但是我没有找到任何方法来指定我想直接在 java 中使用哪种字体。

我试图在 ~/.fonts.conf 和 fc-match 中更改字体设置给我看：

```
 $ fc-match -s
DejaVuSans.ttf: "DejaVu Sans" "Book"
n019003l.pfb: "Nimbus Sans L" "Regular"
s050000l.pfb: "Standard Symbols L" "Regular" 
```

~/.fonts.conf 内容为：

```
<!--?xml version="1.0"?>-->
<!--DOCTYPE fontconfig SYSTEM "fonts.dtd">-->
<!-- ~/.fonts.conf for per-user font configuration -->
<fontconfig>
<alias>
    <family>sans-serif</family>
    <prefer>
        <family>DejaVu Sans</family>
    </prefer>
</alias>
<alias>
    <family>monospace</family>
    <prefer>
        <family>DejaVu Sans</family>
    </prefer>
</alias>
<match>
    <test name="family"><string>Arial</string></test>
    <edit name="family" mode="prepend" binding="strong">
        <string>DejaVu Sans</string>
    </edit>
</match>
<match>
    <test name="family"><string>helvetica</string></test>
    <edit name="family" mode="prepend" binding="strong">
        <string>DejaVu Sans</string>
    </edit>
</match>
</fontconfig> 
```

和 java 读取这个文件（因为在它的错字的情况下会发生错误），但没有任何变化。

在另一个盒子上，它适用于可读标签（在同一个 sar 文件上）。有什么办法可以解决吗？

![在此处输入图像描述](../Images/240b26e29f8e1e081327bdc3d234f148.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:43:55.523

终于找到了解决办法。这是非常肮脏的黑客，不幸的是这是我发现的唯一工作方式。每次我需要启动这个 java 时，我都会生成特殊的 .fonts.conf 来禁止除我需要的字体之外的所有字体。我用这段代码来做：

```
echo '<!--?xml version="1.0"?>-->
<!--DOCTYPE fontconfig SYSTEM "fonts.dtd">-->
<!-- ~/.fonts.conf for per-user font configuration -->
<fontconfig>' > ~/.fonts.conf
# here fc-list will produce small warning about bad ~/.fonts.conf
# don't worry about it
fc-list | grep -vi EXCLUDE_FONT | while read FONT ; do 
echo "<rejectfont><pattern><patelt name=\"family\"><string>${FONT%%:*}</string></patelt></pattern></rejectfont>" >> ~/.fonts.conf ; 
done
echo "</fontconfig>" >> ~/.fonts.conf 
```

当然，我会备份现有的 ~/.fonts.conf 并在 java 完成工作后将其放回原处。

希望有一天有人告诉我真正的unix方式解决方案（：

# ef-code-first - 实体框架代码优先 + 迁移和创建新数据库

> ID：13816427
> 
> 赞同：0
> 
> 时间：2012-12-11T08:37:29.217
> 
> 标签：ef-code-first, entity-framework-5, web-deployment, entity-framework-migrations

我正在使用 VS2012、框架 4.5 和实体框架 5.0，使用代码优先和迁移。

我使用 web deploy 发布了我的网站，在其中我将连接字符串更改为新的 sql server 2008 db 并打开 Execute Code First Migrations。

这一切都有效，并且创建了数据库表，但没有调用种子方法。

任何想法为什么不调用种子方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:20:05.417

好吧，我通过反复试验发现了我的问题。看起来为了让代码首先迁移在项目属性中工作，您需要打开“包括在打包/发布 SQL 选项卡中配置的所有数据库”，然后转到这些设置并确保列出您的连接字符串并签入数据库条目表。

这对我来说不是一个明显的答案，因为看起来代码优先迁移是使用发布配置文件中的 web 部署设置处理的，因此必须在两个地方都这样做似乎不对。

# java - iText 样式将 HTML 解析为 PDF

> ID：13816429
> 
> 赞同：4
> 
> 时间：2012-12-11T08:37:32.053
> 
> 标签：java, html, pdf, itext

我对 iText 有疑问。

我已经关注了这个链接：[如何将 html 页面导出为 pdf 格式？](https://stackoverflow.com/questions/10493837/how-to-export-html-page-to-pdf-format)

我的片段：

```
 String str = "<html><head><body><div style=\"width:100%;height:100%;\"><h3 style=\"margin-left:5px;margin-top:40px\">First</h3><div style=\"margin-left:15px;margin-top:15px\"><title></title><p>sdasdasd shshshshdffgdfgd</p></div><h3 style=\"margin-left:5px;margin-top:40px\">The dream</h3><div style=\"margin-left:15px;margin-top:15px\"></div></div></body></head></html>";
    String fileNameWithPath = "/Users/cecco/Desktop/pdf2.pdf";

    com.itextpdf.text.Document document =
            new com.itextpdf.text.Document(com.itextpdf.text.PageSize.A4);
    FileOutputStream fos = new FileOutputStream(fileNameWithPath);
    com.itextpdf.text.pdf.PdfWriter pdfWriter =
            com.itextpdf.text.pdf.PdfWriter.getInstance(document, fos);

    document.open();

    document.addAuthor("Myself");
    document.addSubject("My Subject");
    document.addCreationDate();
    document.addTitle("My Title");

    com.itextpdf.text.html.simpleparser.HTMLWorker htmlWorker =
            new com.itextpdf.text.html.simpleparser.HTMLWorker(document);
    htmlWorker.parse(new StringReader(str.toString()));

    document.close();
    fos.close(); 
```

并且工作正常。

但是没有考虑到 h3 和 div 中的标记样式。

![在此处输入图像描述](../Images/a552820b98e73f688d4a34a5f5308fab.png)

但是，如果我将我的 html 复制到[http://htmledit.squarefree.com/](http://htmledit.squarefree.com/)中，一切都是正确的。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T17:45:30.417

iText 不是最好的 Html 解析器，但您可以使用[Flying-Saucer](https://code.google.com/p/flying-saucer/)。Flying-Saucer 建立在 iText 之上，但具有强大的 Xml / (X)Html 解析器。简而言之：如果你想要 html -> Pdf，飞碟是完美的。

以下是如何从您的字符串生成 pdf：

```
/*
 * Note: i filled something in the title-tag and fixed the head tag (the whole body-tag was in the head)
 */
String str = "<html><head></head><body><div style=\"width:100%;height:100%;\"><h3 style=\"margin-left:5px;margin-top:40px\">First</h3><div style=\"margin-left:15px;margin-top:15px\"><title>t</title><p>sdasdasd shshshshdffgdfgd</p></div><h3 style=\"margin-left:5px;margin-top:40px\">The dream</h3><div style=\"margin-left:15px;margin-top:15px\"></div></div></body></html>";

OutputStream os = new FileOutputStream(new File("example.pdf"));

ITextRenderer renderer = new ITextRenderer();
renderer.setDocumentFromString(str);
renderer.layout();
renderer.createPDF(os);

os.close(); 
```

**但是：** FS 只支持*有效*的 Html / Xhtml / xml，所以请确保它是。

# java - 通过java输出CSV

> ID：13816432
> 
> 赞同：0
> 
> 时间：2012-12-11T08:37:39.577
> 
> 标签：java, excel, jakarta-ee, csv

我必须将一些内容输出为 CSV 文件，这些文件有时会使用 ms-excel 等应用程序打开，但其他应用程序也会打开相同的 csv。现在，如果我使用 ms-excel 打开 csv 文件，这些都是面临的问题（尽管 excel 不是查看 CSV 的合适应用程序）-

1.  如果一个特定的单元格有一个新行，则 csv 会在此之后打破记录作为新行。
2.  如果我们添加双引号或逗号等字符，它会再次将其视为另一列。

csv的格式是 -

```
"header1", "header2", "header3"
"column1", "column2", "column3"
....
"columnN", "columnN", "columnN" 
```

我的问题是，我想`{" ' , | new line(0x09/0x0a etc)}`在列中添加诸如 etc 之类的字符，而不会破坏数据完整性。我正在使用 java 来构建 csv 内容。任何人都可以提供任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:39:53.047

我建议看看 openscv 库[http://cs.swansea.ac.uk/~csbob/teaching/java/JavaDemoNetbeans/opencsv-2.3/doc/](http://cs.swansea.ac.uk/~csbob/teaching/java/JavaDemoNetbeans/opencsv-2.3/doc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:46:56.063

您是否尝试过在要添加到单元格中的字符之前使用 Esc '\'。

# java - 如何从命令提示符打开网络共享子文件夹？

> ID：13816433
> 
> 赞同：0
> 
> 时间：2012-12-11T08:37:43.783
> 
> 标签：java, windows, macos, networking

我有一个网络共享`\\host-IP\folder\subFolder`。我想从 java 打开它，在连接到窗口时应提示用户名和密码。我想在 MAC 和 Windows 中实现这一点。有什么帮助吗？

编辑

在 windows 中：使用`explorer`命令我可以达到共享路径的根目录。如果我给子文件夹它说`the path does not exists`。但是，如果我从运行窗口（windows + R）尝试相同的操作（它会提示输入用户名和密码）。但我不知道如何从 java 中调用它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:49:47.300

看看这个线程。

[使用凭据将 I/O 文件写入共享网络驱动器](https://stackoverflow.com/questions/10599999/write-i-o-file-to-shared-network-drive-using-credentials)

如果您编写了提示用户自己输入身份验证凭据的 UI，则应该可以使用[CIFS 库](http://jcifs.samba.org/)访问共享。但是，请务必查看我关于让操作系统对您的应用程序透明地处理网络共享身份验证的评论。

编辑：使用 CIFS 你当然应该编写网络路径 samba 样式，即 smb://host-IP/folder/subFolder

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:16:50.633

这可能会帮助你

```
 Runtime rt = Runtime.getRuntime();
 Process pr = rt.exec("explorer "+"\\\\"+"<SERVER>"+"\\"+"<FOLDER>"+"\\"+"<SUB FOLDER>"); 
```

# rabbitmq - 错过太多心跳后应用程序崩溃

> ID：13816435
> 
> 赞同：4
> 
> 时间：2012-12-11T08:37:55.407
> 
> 标签：rabbitmq, pika

我有一个应用程序将负载分配给一群工人。到目前为止，所有工作人员都在同一个 VM 上运行，还不需要扩展。我的问题是，就像每 3-4 天一样，工作人员崩溃并显示以下错误消息 - 客户端和 rabbitmq 服务器在 1200 秒内没有联系（我猜）。

```
Traceback (most recent call last):
  File "/var/www/vhosts/niklas/workers/builder.py", line 170, in <module>
    BuildWorker().main()
  File "/var/www/vhosts/niklas/lib/worker.py", line 29, in main
    self.msgs.ch.start_consuming()
  File "/usr/local/lib/python2.6/dist-packages/pika/adapters/blocking_connection.py", line 722, in start_consuming
    self.connection.process_data_events()
  File "/usr/local/lib/python2.6/dist-packages/pika/adapters/blocking_connection.py", line 93, in process_data_events
    self.process_timeouts()
  File "/usr/local/lib/python2.6/dist-packages/pika/adapters/blocking_connection.py", line 99, in process_timeouts
    self._call_timeout_method(self._timeouts.pop(timeout_id))
  File "/usr/local/lib/python2.6/dist-packages/pika/adapters/blocking_connection.py", line 164, in _call_timeout_method
    timeout_value['method']()
  File "/usr/local/lib/python2.6/dist-packages/pika/heartbeat.py", line 85, in send_and_check
    return self._close_connection()
  File "/usr/local/lib/python2.6/dist-packages/pika/heartbeat.py", line 106, in _close_connection
    HeartbeatChecker._STALE_CONNECTION % duration)
  File "/usr/local/lib/python2.6/dist-packages/pika/adapters/blocking_connection.py", line 75, in close
    self.process_data_events()
  File "/usr/local/lib/python2.6/dist-packages/pika/adapters/blocking_connection.py", line 91, in process_data_events
    self._handle_timeout()
  File "/usr/local/lib/python2.6/dist-packages/pika/adapters/blocking_connection.py", line 198, in _handle_timeout
    self._on_connection_closed(None, True)
  File "/usr/local/lib/python2.6/dist-packages/pika/adapters/blocking_connection.py", line 235, in _on_connection_closed
    raise exceptions.AMQPConnectionError(*self.closing)
pika.exceptions.AMQPConnectionError: (320, 'Too Many Missed Heartbeats, No reply in 1200 seconds') 
```

我的问题是，什么可能导致这种情况？这只发生在大约三分之一的工作人员身上，其他工作人员运行良好，没有任何错误消息或警告（同样，所有工作人员和 rabbitmq-server 在同一个 VM 上）。我正在使用 Python 库 pika 中的标准方法 start_sumption() 来检索新请求。这里的代码太大了，考虑到错误消息，它似乎超出了我的代码或系统问题。

我正在使用：

*   Python 鼠兔 0.9.8
*   兔MQ 3.0.0
*   Debian 6.0
*   所有工作人员都在屏幕内启动
*   虚拟机托管在 Linode，512MB 内存

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:19:36.197

由于 pika 0.9.8 中的错误 (#236)，我们遇到了类似的问题。

[https://github.com/pika/pika/pull/236](https://github.com/pika/pika/pull/236)

这应该在 0.9.9 中修复，或者可以通过使用附加到 github 上链接问题的源代码修补您的 pika 库来解决。

（Pika 在 2 次累积错过的心跳而不是 2 次连续的心跳上关闭连接）。

# grammar - 左线性和右线性语法

> ID：13816439
> 
> 赞同：22
> 
> 时间：2012-12-11T08:38:27.290
> 
> 标签：grammar, regular-language, computation-theory, formal-languages

我需要帮助为以下语言构建左线性和右线性语法？

```
a)  (0+1)*00(0+1)*
b)  0*(1(0+1))*
c)  (((01+10)*11)*00)* 
```

对于a）我有以下内容：

```
Left-linear
S --> B00 | S11
B --> B0|B1|011

Right-linear
S --> 00B | 11S
B --> 0B|1B|0|1 
```

这个对吗？我需要 b & c 方面的帮助。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-19T05:13:32.823

## 从正则表达式构造等效的正则语法

首先，我从一些简单的规则开始，从正则表达式（RE）构造正则语法（RG）。
我正在为右线性语法编写规则（作为练习为左线性语法编写类似规则）

**注意：**大写字母用于变量，小写用于语法中的终结符。NULL 符号是`^`. 术语*“任意数字”*表示零次或多次是*星闭合。

[**基本理念**]

*   **单终端：**如果 RE 是简单的`e (e being any terminal)`，我们可以写`G`，只有一个生产规则`S --> e`（其中`S is the start symbol`），是一个等价的 RG。

*   **UNION OPERATION：**如果 RE 的形式`e + f`是`e and f are terminals`，我们可以写出 `G`，有两个生产规则`S --> e | f`，是一个等价的 RG。

*   **CONCATENATION：** 如果 RE 的形式`ef`是`e and f are terminals`，我们可以 `G`用两个产生式规则编写 ，`S --> eA, A --> f`是等价的 RG。

*   **STAR CLOSURE：**如果 RE 的形式是`e*`, where`e is a terminal`和`* Kleene star closure`operation，我们可以写出两个产生式规则`G`, `S --> eS | ^`, 是一个等价的 RG。

*   **PLUS CLOSURE：**如果 RE 的形式是 e ^+ , where `e is a terminal`and `+ Kleene plus closure`operation, 我们可以写出两个产生式规则`G`, `S --> eS | e`, 是一个等价的 RG。

*   **UNION 上的 STAR CLOSURE：** 如果 RE 的形式为 (e + f)*，其中两者`e and f are terminals`，我们可以在 中写三个产生式规则`G`，`S --> eS | fS | ^`，是等价的 RG。

*   **PLUS CLOSURE ON UNION：** 如果 RE 的形式是 (e + f) ^+，其中两者`e and f are terminals`，我们可以在 , 中写出四个产生式规则`G`，`S --> eS | fS | e | f`是等价的 RG。

*   **STAR CLOSURE ON CONCATENATION：** 如果 RE 是 (ef)* 的形式，其中两者`e and f are terminals`，我们可以在 , 中编写三个产生式规则`G`，`S --> eA | ^, A --> fS`是等价的 RG。

*   **PLUS CLOSURE ON CONCATENATION：** 如果 RE 的形式为 (ef) ^+，其中两者`e and f are terminals`，我们可以在 , 中编写三个产生式规则`G`，`S --> eA, A --> fS | f`是等价的 RG。

请确保您了解上述所有规则，以下是汇总表：

```
+-------------------------------+--------------------+------------------------+
| TYPE                          | REGULAR-EXPRESSION | RIGHT-LINEAR-GRAMMAR   |
+-------------------------------+--------------------+------------------------+
| SINGLE TERMINAL               | e                  | S --> e                |
| UNION OPERATION               | e + f              | S --> e | f            |
| CONCATENATION                 | ef                 | S --> eA, A --> f      |
| STAR CLOSURE                  | e*                 | S --> eS | ^           |
| PLUS CLOSURE                  | e+                 | S --> eS | e           |
| STAR CLOSURE ON UNION         | (e + f)*           | S --> eS | fS | ^      |
| PLUS CLOSURE ON UNION         | (e + f)+           | S --> eS | fS | e | f  |
| STAR CLOSURE ON CONCATENATION | (ef)*              | S --> eA | ^, A --> fS |
| PLUS CLOSURE ON CONCATENATION | (ef)+              | S --> eA, A --> fS | f |
+-------------------------------+--------------------+------------------------+ 
```

> **注意：**符号`e`and`f`是终结符，^ 是 NULL 符号，并且`S`是起始变量

**[回答]**

现在，我们可以来解决您的问题。

**一个）** `(0+1)*00(0+1)*`

> **语言描述：**所有字符串由 0 和 1 组成，至少包含一对`00`.

*   右线性语法：

    S --> 0S | 1S | 00A
    -> 0A | 1A | ^

    字符串可以以`0`s 和`1`s 的任何字符串开头，这就是包含规则的原因`s --> 0S | 1S`，并且因为至少有一对`00`，所以没有空符号。`S --> 00A`被包含是因为`0`，`1`可以在之后`00`。该符号`A`负责处理 . 之后的 0 和 1 `00`。

*   左线性语法：

    S --> S0 | S1 | A00
    A --> A0 | A1 | ^

**b)** `0*(1(0+1))*`

> **语言描述：**任意数量的 0，后跟任意数量的 10 和 11。
> { 因为 1(0 + 1) = 10 + 11 }

*   右线性语法：

    S --> 0S | 一个 | ^
    A --> 1B
    B --> 0A | 1A | 0 | 1

    字符串以任意数量的`0`so 规则开始`S --> 0S | ^`，然后包含用于生成`10`和`11`任意次数的规则`A --> 1B and B --> 0A | 1A | 0 | 1`。

    其他替代右线性语法可以是

    S --> 0S | 一个 | ^
    A --> 10A | 11A | 10 | 11

*   左线性语法：

    S --> A | ^
    A --> A10 | A11 | B
    B --> B0 | 0

    另一种形式可以是

    S --> S10 | S11 | 乙| ^
    B --> B0 | 0

**C）** `(((01+10)*11)*00)*`

> **语言描述：**首先是语言包含 null(^) 字符串，因为在 () 中存在的每个事物的外部都有一个 *（星号）。此外，如果语言中的字符串不是空的，它以 00 结尾。人们可以简单地认为这个正则表达式的形式为 ( ( (A)* B )* C )* ，其中 (A)* 是 (01 + 10) * 那是 01 和 10 的任意重复次数。如果字符串中有 A 的实例，那么肯定会有 B，因为 (A)*B 和 B 是 11。
> 一些示例字符串 { ^, 00, 0000, 000000, 1100, 111100, 1100111100, 011100, 101100, 01110000, 01101100, 0101011010101100, 101001110001101100 ....}

*   左线性语法：

    S --> A00 | ^
    A --> B11 | S
    B --> B01 | B10 | 一个

    `S --> A00 | ^`因为任何字符串要么为空，要么如果不为空，则以`00`. 当字符串以 结尾时`00`，变量`A`与模式匹配`((01 + 10)* + 11)*`。同样，此模式可以为 null 或必须以 . 结尾`11`。如果它为null，则再次`A`匹配它，`S`即字符串以模式结束`(00)*`。如果模式不为空，则`B`与 匹配`(01 + 10)*`。当`B`匹配所有它可以时，`A`再次开始匹配字符串。这将关闭最外面的 * in `((01 + 10)* + 11)*`。

*   右线性语法：

    S --> A | 00年代 | ^
    A --> 01A | 10A | 11S

**你问题的第二部分**：

```
For a) I have the following:
Left-linear
S --> B00 | S11
B --> B0|B1|011

Right-linear
S --> 00B | 11S
B --> 0B|1B|0|1 
```

（***答案***）
您的解决方案是错误的，原因如下，

左线性语法是错误的，因为`0010` 无法生成字符串。右线性语法是错误的，因为 `1000`无法生成字符串。尽管两者都是由问题（a）的正则表达式生成的语言。

**编辑**
为每个正则表达式添加 DFA。以便人们发现它很有帮助。

**一个）** `(0+1)*00(0+1)*`

![DFA](../Images/0aec5079a75fc83c907b7041fc7d2b44.png)

**b)** `0*(1(0+1))*`

![DFA](../Images/69b6ed54fec54752e64a5a5c559cacfc.png)

**C）** `(((01+10)*11)*00)*`

为这个正则表达式绘制 DFA 既复杂又复杂。
[为此，我想添加 DFA]

为了简化任务，我们应该认为 RE 的形式对我来说 RE`(((01+10)*11)*00)*` 看起来像`(a*b)*`

```
(((01+10)*11)* 00 )*
(          a*   b )* 
```

实际上在上面的表达式中`a`它自己的形式`(a*b)*` 是`((01+10)*11)*`

RE`(a*b)*`等于`(a + b)*b + ^`。(a *b)*的 DFA如下：

![DFA](../Images/d9ac9f35f24480a1c4dc3d0eebaa6a69.png)

DFA 为`((01+10)*11)*`：

![DFA](../Images/bcc32b9d56861ae22dd4ab32995d0eac.png)

DFA 为`(((01+10)*11)* 00 )*`：

![DFA](../Images/562e86f8bba8854536d60c8bb415debe.png)

[尝试在上述三个 DFA 的构造中找到相似之处。在你不理解第一个之前不要继续前进]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-20T12:43:46.473

将正则表达式转换为左或右线性正则语法的规则 [![备忘单](../Images/694bd79f187f76613c8e58e6218a8b35.png)](https://i.stack.imgur.com/6AEYK.png)

# java - 在 Java 中 Hankaku 到 Zenkaku，反之亦然

> ID：13816440
> 
> 赞同：3
> 
> 时间：2012-12-11T08:38:38.830
> 
> 标签：java

Java 中是否有任何实用程序可用于在 Hankaku 字符和 Zenkaku 字符之间进行转换，即日文半角假名和全角假名？或者是否有可以为此实施的算法或方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:00:23.320

[ICU4J](http://site.icu-project.org/download)图书馆有它们。

```
Transliterator tr = Transliterator.getInstance("Halfwidth-Fullwidth");
String converted = tr.transliterate("ｱｲｳｴｵ"); 
```

# hadoop - hadoop中的SFTP文件系统

> ID：13816441
> 
> 赞同：2
> 
> 时间：2012-12-11T08:38:40.267
> 
> 标签：hadoop

hadoop 版本 2.0.0 和 CDH4 是否有 SFTP 文件系统？我知道 hadoop 支持 FTP Filesystem 。sftp 有类似的东西吗？我已经看到了一些为 sme 提交的补丁，虽然无法理解它们..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-13T21:24:38.950

考虑使用 hadoop distcp。

[在这里检查。](http://pic.dhe.ibm.com/infocenter/bigins/v1r4/index.jsp?topic=%2Fcom.ibm.swg.im.infosphere.biginsights.admin.doc%2Fdoc%2Fc_sftp.html)那将是这样的：

```
hadoop distcp
  -D fs.sftp.credfile=/user/john/credstore/private/mycreds.prop
  sftp://myHost.ibm.com/home/biadmin/myFile/part1
  hdfs:///user/john/myfiles 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:59:54.943

经过一番研究，我发现`hadoop`目前没有`FileSystem`为`SFTP`. 因此，如果您希望使用 SFTP 通道读取数据，则必须编写一个`SFTP FileSystem`（这很重要，扩展和覆盖许多类和方法），其中的补丁已经开发，尽管尚未集成到 hadoop 中，否则得到一个定制`InputFormat`的从 读取的`streams`，这同样没有在`hadoop.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-13T15:34:27.917

您需要确保 core-site.xml 的属性 fs.sftp.impl 设置为 org.apache.hadoop.fs.sftp.SFTPFileSystem

发布此 hadoop 命令将起作用。下面给出了几个样本

1.  ls 命令

> hadoop 上的命令

```
hadoop fs -ls / 
```

> 相当于 SFTP

```
hadoop fs -D fs.sftp.user.{hostname}={username} -D fs.sftp.password.{hostname}.{username}={password} -ls sftp://{hostname}:22/ 
```

2.  Distcp 命令

> hadoop 上的命令

```
hadoop distcp {sourceLocation} {destinationLocation} 
```

> 相当于 SFTP

```
hadoop distcp -D fs.sftp.user.{hostname}={username} -D fs.sftp.password.{hostname}.{username}={password} sftp://{hostname}:22/{sourceLocation} {destinationLocation} 
```

*确保在尝试这些命令时替换所有占位符。*我在安装了 Hadoop 2.8.5 的 AWS EMR 5.28.1 上尝试了它们

# android - 一页包含多个片段的 ViewPager “java.lang.IllegalArgumentException：找不到 id 的视图”

> ID：13816442
> 
> 赞同：16
> 
> 时间：2012-12-11T08:38:57.223
> 
> 标签：android, android-layout, android-fragments, android-viewpager

在我的小型 Android 应用程序中，我有一个`ViewPager`3 页，每个页面包含一个片段，这一切都可以正常工作`FragmentStatePagerAdapter`（参见[前面的问题](https://stackoverflow.com/a/13597181/347565)）。

现在对于更大的屏幕，我想保留一个`ViewPager`，但我希望前两个片段在同一个第一页上。

为此，我实现了自己的 PagerAdapter，这主要是有效的，我试图解决的唯一问题是当我旋转屏幕时，我得到一个错误：

```
12-11 16:34:13.526: ERROR/AndroidRuntime(9221): FATAL EXCEPTION: main
        java.lang.RuntimeException: Unable to start activity ComponentInfo{com.matthieu/com.matthieu.TestActivity}: java.lang.IllegalArgumentException: No view found for id 0x7f030002 (com.matthieu:id/top_fragment) for fragment TestFragment{481a3a98 #0 id=0x7f030002}
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3815)
        at android.app.ActivityThread.access$2400(ActivityThread.java:125)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2037)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:4627)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:521)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.lang.IllegalArgumentException: No view found for id 0x7f030002 (com.matthieu:id/top_fragment) for fragment TestFragment{481a3a98 #0 id=0x7f030002}
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
        at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1861)
        at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:547)
        at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
        at android.app.Activity.performStart(Activity.java:3781)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2636)
        ... 12 more 
```

[我在GitHub 上](https://github.com/MatthieuLJ/fragment_layout)放了一个示例代码来模拟我正在尝试做的事情（并显示此错误消息）。

我想我遇到的一个问题是因为我在实际应用程序中拥有的片段，我不能真正拥有一个`static newInstance`构造函数，而是片段是提前创建的并且有'setRetainInstance（true）;' 放。

`viewGroup`我知道将包含片段的 id[应该是层次结构的一部分](https://stackoverflow.com/a/8158916/347565)，最终，我猜，它是......

如果有任何区别，我将使用支持库和 SherlockActionBar 来保持与旧设备的向后兼容性。

关于如何去做的任何想法？

**编辑**：我发现如果我从`FragmentManager`in 中删除 Fragments，`onSaveInstanceState`我就不会再出现任何崩溃了。所有的片段都是从头开始重新创建的，这不是我想要的，但我想我可能不得不这样做并稍后以某种方式恢复这些片段......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-26T05:14:06.987

好吧，即使我换了另一种做事方式，我也不喜欢让事情不完整……

按照马克的建议走嵌套片段的方式。评论中发布的链接转到 404，但我找到了有关嵌套片段的[示例代码。](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Nested)

我在路上学到了一些东西：

*   嵌套片段不能有`setRetainInstance(true)`，否则会得到：

    java.lang.IllegalStateException：无法保留嵌套在其他片段中的片段

*   `FrameLayout`在页面中创建一个`ViewPager`来保存片段是错误的。查看Android 代码（特别`FragmentPagerAdapter`是. 看起来你不能在那个级别做任何更复杂的事情，否则它会崩溃。`container.getId()``Fragment`

*   据我了解，如果片段包含一些需要很长时间才能加载的信息（就像我一样），则处理此问题的不同方法是：

    *   使用`onSaveInstanceState`（首选方式？），但如果 Fragment 是嵌套的，则不可能。（空）构造函数将在框架需要时被调用。
    *   使用`setRetainInstance(true)`，在这种情况下`savedInstanceBundle`总是`null`，但 Fragment（作为 Java 对象）不会被销毁，它仍然会通过 onAttach / onCreateView。
    *   寻找其他方法来保存和恢复您需要的内容...

[无论如何，我使用github](https://github.com/MatthieuLJ/fragment_layout)上的嵌套片段推送我的解决方案

# c# - 登录身份验证取决于角色 winforms

> ID：13816443
> 
> 赞同：0
> 
> 时间：2012-12-11T08:39:03.827
> 
> 标签：c#, winforms

我有这样的数据表。

```
uid m_code  pass    roleID    
1   F2      F2      2    
2   S2      S2      0 
```

我想让用户根据他们的角色登录。

我尝试使用此代码，但它根本不起作用。非常感谢任何帮助。

```
 string user = textBox1.Text;
        string pass = textBox2.Text;

        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["conString"].ConnectionString);
        SqlCommand cmd = new SqlCommand("select * from login where m_code='" + user + "' and pass='" + pass + "'", con);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        da.Fill(dt);

        if(dt.Columns[3].ToString() == "0")
        {
            this.Hide();
            StudentUI s = new StudentUI();
            s.Show();
        }
        if (dt.Columns[3].ToString() == "1")
        {
            this.Hide();
            TeacherUI t = new TeacherUI();
            t.Show();
        }
        if (dt.Columns[3].ToString() == "2")
        {
            FacultyUI f = new FacultyUI();
            f.Show();
        }
        else
        {
            MessageBox.Show("Login Failed");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:44:43.923

我同意 Blachshma 的观点，您应该使用参数来降低 Sql 注入的风险。与此同时，让我们修正一下你的逻辑：

```
if(dt.Rows.Count == 0)
{
    MessageBox.Show("Login Failed");
    return;
}

string val = Convert.ToString(dt.Rows[0][3]);

if(val == "0")
{
    this.Hide();
    StudentUI s = new StudentUI();
    s.Show();
}
else if (val == "1")
{
    this.Hide();
    TeacherUI t = new TeacherUI();
    t.Show();
}
else if (val == "2")
{
    FacultyUI f = new FacultyUI();
    f.Show();
}
else
{
    MessageBox.Show("Login Failed");
} 
```

# android - 滚动后 Jquery Mobile 页脚链接/按钮不起作用。（Google Chrome，Android 4.2.1）

> ID：13816444
> 
> 赞同：0
> 
> 时间：2012-12-11T08:39:08.333
> 
> 标签：android, jquery, google-chrome, mobile

我正在尝试使用 jquerymobile 构建一个页面，并且我有一个固定的页脚。我遇到的问题是，在我在浏览器上向下滚动后，链接不起作用。当我向上滚动时，它又开始工作了。

这是我使用的代码

```
 <div data-role="footer" class="ui-bar" data-position="fixed" data-tap-toggle="true" data-fullscreen="true" >
    <a href="#cards" data-icon="arrow-u" data-rel="dialog" data-transition="pop">Card functions</a>
</div> 
```

我正在使用带有最新 jquery-ui 的全新安装的 jquerymobile。CSS是默认的..

我确实找到了一个类似的问题，但这已经过时并且修复不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:09:30.003

在页脚中尝试导航栏，这为我解决了同样的问题：

```
<div data-role="footer">
<div data-role="navbar">
    <ul>
        <li><a href="#">One</a></li>
        <li><a href="#">Two</a></li>
        <li><a href="#">Three</a></li>
    </ul>
</div><!-- /navbar -->
<p style="text-align:center;">I'm the footer</p> 
```

来源：[jQuery 移动演示](http://view.jquerymobile.com/1.3.0/docs/widgets/navbar/)

这是一个已知问题：[jQuery mobile @ github](https://github.com/jquery/jquery-mobile/issues/3869)

# android - AndEngine：为什么那些精灵会变形？

> ID：13816450
> 
> 赞同：1
> 
> 时间：2012-12-11T08:39:37.057
> 
> 标签：android, andengine

![在此处输入图像描述](../Images/941b1d7c2a3446f75f0d0e09b03c17f3.png)

我面临2个问题。

问题如上图所示。

主要代码片段如下： 我的设备分辨率为 1024x600。

引擎：

```
 this.mCamera = new Camera(0, 0,*device'width*,*device'height*);     
final EngineOptions engineOptions = new EngineOptions(true,     ScreenOrientation.LANDSCAPE_FIXED, new FillResolutionPolicy(), this.mCamera);
    engineOptions.getTouchOptions().setNeedsMultiTouch(true); 
```

背景：

```
BitmapTextureAtlas bta = new BitmapTextureAtlas(mGame.getTextureManager(),WIDTH_SCENE_PNG,HEIGHT_SCENE_PNG, TextureOptions.BILINEAR);
ITextureRegion it = BitmapTextureAtlasTextureRegionFactory.createFromResource(bta, mGame, R.drawable.bg_main, 0, 0);
bta.load();
final Sprite sprite = new Sprite(0, 0,*device'width*,*device'height*,it, mGame.getVertexBufferObjectManager());
SpriteBackground bg = new SpriteBackground(sprite);
bg.setColor(Color.PINK);
setBackground(bg); 
```

精灵：

```
 BitmapTextureAtlas btaTools = new BitmapTextureAtlas(mGame.getTextureManager(), 30, 40);
ITextureRegion itDelete = BitmapTextureAtlasTextureRegionFactory.createFromResource(btaTools, c, R.drawable.sprite_delete,0,0);
    btaTools.load(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:48:52.343

**扭曲**可能来自`TextureOptions`. 对于`TextureAtlas`您的背景精灵，您使用`TextureOptions.BILINEAR`. 但是`TextureAtlas`，您的工具不使用任何选项。我猜他们有*透明*区域？当您使用透明精灵时，请尝试使用`TextureOptions.NEAREST_PREMULTIPLYALPHA`或`TextureOptions.BLINEAR_PREMULTIPLYALPHA`. 我只用一次`TextureOptions.NEAREST`，它对我来说很好用（即使是透明的）。尝试一些选项，也许失真会消失。

**背景的大小**：因为`TextureAtlas bta`您已经使用了这些常量`WIDTH_SCENE_PNG`，`HEIGHT_SCENE_PNG`为什么不将它们也用于精灵的大小？无论如何，我的猜测是，你的相机有不同的尺寸。对于全屏图像，请尝试：

```
final Sprite sprite = new Sprite(0, 0,mEngine.getCamera().getWidth(),mEngine.getCamera().getHeight(),it, mGame.getVertexBufferObjectManager()); 
```

*   克里斯托夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:27:34.277

我解决了我的问题。

关键是我将我的资源（png图像）从项目的drawable-hdpi文件夹移动到drawable foler，然后精灵看起来不错。

原始或资产文件夹也可以。您的回答对我也有帮助。谢谢！@克里斯托夫

# iphone - 使用按钮更改 iphone 应用程序语言，无需重新启动应用程序

> ID：13816451
> 
> 赞同：4
> 
> 时间：2012-12-11T08:39:39.957
> 
> 标签：iphone, objective-c, ios, localization, nslocalizedstring

我想更改我的应用程序的语言。目前我正在按照以下方式进行操作。我有两个按钮可以更改 NSUserDefaults 中的语言。但在这影响我的应用程序之前，我需要重新启动它。

这是我的代码。

```
- (IBAction)changeDutch:(id)sender {
    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"nl", @"en", nil] forKey:@"AppleLanguages"];

}
- (IBAction)changeEnglish:(id)sender {
    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"en", @"nl", nil] forKey:@"AppleLanguages"];
} 
```

这工作正常。但我不想每次都重新启动我的应用程序。谁能告诉我该怎么做？

亲切的问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T08:57:50.893

查看 HMLocalization：[https ://github.com/HeshamMegid/HMLocalization](https://github.com/HeshamMegid/HMLocalization)

它是默认本地化框架的替代品。它有一个演示，展示了如何更改语言而无需重新启动应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:13:37.433

有一种方法可以更改应用程序语言而无需重新启动，在本[教程帖子](http://learning-ios.blogspot.com/2011/04/advance-localization-in-ios-apps.html)中提到了我已经在应用程序中尝试过它并且它大部分工作但仍然如果您使用系统项目，如`More`选项卡中的选项卡，`Edit`按钮`MoreNavigationController`和`Cancel`按钮`UISearchBar`等等，有文本在不重新启动应用程序的情况下无法更改所选语言。如果没有这样的项目由 iOS 而不是您的应用程序控制，这对您来说是一个完美的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:52:31.943

如果您的数据在，`UITableView`那么您可以使用`[tableView reloadData];`. 您甚至可以将应用程序语言设置为`appDelegate`，在常量中定义，键，然后在`IBAction`调用时将这些键存储在`NSUserDefaults`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:52:45.123

您使用哪种方式进行本地化，我的意思是要问的是我们只维护文件夹结构或取自 Db 的原生方式。

无论如何，如果您使用的是本机部分，请查看以下链接，这可能会对您有所帮助，因为我认为我们可以在那里替换语言选项：

“http://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios”（坦率地说，我不知道）

但是，如果您使用的是 db 部分，那么在这种情况下，您只需使用一些基于枚举的技巧，并根据它来获取您的数据，这种方法很简单，因为我已经在很多应用程序中应用了。

有任何问题，只要回到我身边。:)

# c++ - 尝试在 C++ 中使用递归确定字符串的长度

> ID：13816457
> 
> 赞同：6
> 
> 时间：2012-12-11T08:40:03.190
> 
> 标签：c++, string, recursion, counting

```
int count(string s){
    if(s == "")
      return 0;
    if(s.length == 1)
      return 1;
    return 1 + count() //This is what I can't figure out. How to traverse the string.
    //I just need a hint, not a full on answer.
} 
```

我不知道如何遍历字符串。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T08:41:30.630

提示：[`substr()`](http://en.cppreference.com/w/cpp/string/basic_string/substr)在你的递归中使用。

此外，您有两个基本案例。其中之一有三个问题：

1.  它有语法错误；
2.  它依赖于能够计算字符串的长度（这是你的函数应该做的）；
3.  鉴于您有其他基本情况，因此没有必要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T08:51:32.930

我认为您的示例没有任何意义，您使用`length`它已经在计算中返回长度。如果我是你的导师，我不会接受这是一个有效的解决方案。

你可能需要使用`const char*`

```
int count(const char* s){
    if(*s == '\0')
      return 0;
    return 1 + count(s + 1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:42:44.610

如果您的目的是遍历字符串，我建议使用迭代器（请参阅 参考资料`std::string::begin`）。

```
template<typename It>
int count(It const begin, It const end)
{
  return (begin != end ? count(begin + 1, end) + 1 : 0);
}

int count(std::string const& s)
{
  return count(s.begin(), s.end());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T08:43:38.787

也许你会想使用`substr`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T09:00:07.973

我知道你想要一个 C++ 解决方案，但仍然。有时 C 比 C++ 更好。

```
整数计数（const char *s）
{
  如果（*s == 0）
    返回0；
  否则返回 1 + count(++s);
};

```

调用 count(str.c_str())。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-03T12:39:45.810

```
 #include<stdio.h>
  main(){
  char str1[100];
  gets(str1);
  int i=0;i=len(str1,i);printf(" \nlength of string is %d",i);
  }
  int len(char s1[],int i) {
  printf("\n%c",s1[i]);
  int sum=0,count =1; 
  if(s1[i] == '\0') return 0;
  else
  return (count += len(s1,++i));
  } 
```

# php - CakePHP 2.2.4：事后设置

> ID：13816463
> 
> 赞同：0
> 
> 时间：2012-12-11T08:40:27.527
> 
> 标签：php, cakephp

我遇到了 afterfind() 的问题，而我正在阅读的内容都没有解决它。这与事后发现不适用于相关模型有关，我知道很多人提出了但我还没有找到解决方案。我看到的所有帖子也是2009-2010年的。

User.php 模型

```
function afterFind($results, $primary = false) {
parent::afterFind($results, $primary);

if($primary){
    foreach($results as $key => $val){
        if (isset($val['User']['id'])){    
            $results[$key]['User']['online'] = $this->UsersOnline->find('count',
array('conditions' => array('UsersOnline.user_id =' => $val['User']['id'])));

// THIS WORKS PERFECTLY FOR USER MODEL PAGES     
        }
   }
}
else {
    foreach($results as $key => $val){
       $key['User']['online'] = $this->UsersOnline->find('count',
array('conditions' => array('UsersOnline.user_id =' => 1)));

// THIS IS THE PART THAT IS INCORRECT, AND THIS IS THE "BEST" SOLUTION
// I'VE FOUND ONLINE BUT IT IS NOT WORKING

/**
 * I've also tried these
 *
 * $results[$key]['online']
 * $results[$val]['online']
 * $results[$key][$val]['online']
 * $results['0']['User']['online']
 *
 * and about 5 other things
 */

    }
}

return $results;

} // end afterfind 
```

我在“else”语句中尝试了许多代码组合，但我得到了三个错误之一，即`Uninitialized string offset: 0`,`Cannot use string offset as an array`或`Column User.online not found`.

**编辑：**也许这会为这个问题提供更多的洞察力。

我正在尝试查看文章 VIEW.CTP。它将带有信息的文章显示在顶部`$article['User']`（试图包含`$article['User']['online']`）。帖子下方是文章评论（`foreach $article['Comment'] as $comment`）。

这是我的 ARTICLES.PHP 控制器

```
public function view($page = null, $id = null) {

    // $this->Article->recursive = 3;

    $this->Article->id = $id;

    if (!$this->Article->exists()) {

        $this->Session->setFlash('This article does not exist');
        $this->redirect(array('controller'=>'articles', 'action' => 'index'), null, true);
    }

    $this->Article->contain(array(
        'User' => array(
            'fields'=>array('User.username', 'User.signature', 'User.online'),
            'UserAvatar' => array(
                'fields'=>array('UserAvatar.file')
             )
        ),
        'Comment' => array(
            'fields'=>array('Comment.content', 'Comment.created', 'Comment.title'),
             'User' => array(
                'fields'=>array('User.username', 'User.signature', 'User.online'),
                'UserAvatar' => array(
                   'fields'=>array('UserAvatar.file')
                 )
              )
          )
     ));

    $this->set('article',  $this->Article->read(null, $id));

} // end view function 
```

使用代码原样（查看“包含”条件，我收到一条错误消息“ `Column User.online does not exist`”。但是，当我从 Comment 数组和 User 数组和 INSTEAD set 的包含中删除 User.online 时`$this->Article->recursive = 3`，我没有收到错误消息。使用 recursive = 3，如果我`print_r($article['User'])`或`print_r($comment['User'])`在文章 view.ctp 上，数组都显示正确的在线值。

$article['User'] 和 $comment['User'] with recursive = 3 的精确打印是

```
Array
(
    [id] => this
    [username] => this
    [password] => ****
    [UserAvatar] => Array
        (
            [id] => this
            [column] => value
            [column] => value
        )
    [OTHER USER RELATED MODELS] => Array
        (
            [column] => value
        )
    [online] => 1
    [type] => 1
) 
```

如果我`echo $article['User']['online']`使用 recursive = 3，我会得到正确的值（需要 3 才能显示 UserAvatar 信息）。

我不明白为什么，然后，包含，它说 User.online 找不到？我`actAs = 'Containable'`在我的 AppModel 中有，因为我在几乎所有模型上都使用了该属性。

这是我最新的 USER.PHP 模型 afterfind()

```
function afterFind($results, $primary = false) {
parent::afterFind($results, $primary);

     if($primary){
          foreach($results as $key => $val){
               if (isset($val['User']['id'])){    
                    $results[$key]['User']['online'] = $this->UsersOnline->find('count', array('conditions' => array('UsersOnline.user_id =' => $val['User']['id'])));
               }
          } // end for each
     } // end if primary
     else{
          foreach($results as $key => $val){
               if(isset($results['0']['User']['id'])){
                    $results['0']['User']['online'] = "1";
                      $results['User']['online'] = $results['0']['User']['online'];
                      $results['0']['User']['type'] = '1';
             }
               elseif(isset($results['User']['id'])){
                    $results['User']['online'] = "1";
                    $results[$key]['User']['online'] = $results['User']['online'];
                    $results['User']['type'] = '2';
               } // end elseif
                 // everything returns as type 1 so this may be irrelevant
          } // end for each
     } // end if not primary

      return $results;

} // end afterfind 
```

**可能的解决方案：**经过更多修改后，我发现以下工作（文章模型）但这并不理想，因为它从 User 和 UserAvatar 检索所有数据，而我只想获取指定字段的数据。但是，当我使用 fields 选项时，无法识别 User.online。有任何想法吗？

```
$this->Article->contain(array( 
         'User' => array(
            'UserAvatar'
        ),
          'Comment' => array(
             'User' => array(
                'UserAvatar'
              )
          )
     ));

 $this->set('article',  $this->Article->read(null, $id)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:51:05.050

尝试关注 foreach

```
foreach($results as &$val){
    $val['User']['online'] = $this->UsersOnline->find('count', array(
        'conditions' => array('UsersOnline.user_id' => 1)
    ));
} 
```

请注意，这只会返回 user_id=1 的计数

# android - 如何在 webview 中加载 html 字符串？

> ID：13816464
> 
> 赞同：67
> 
> 时间：2012-12-11T08:40:29.243
> 
> 标签：android, webview, android-webview

我有一个包含以下内容的 html 字符串：

```
 <!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">
    <html>
      <head>
      <meta http-equiv="content-type" content="text/html; charset=windows-1250">
      <meta name="spanish press" content="spain, spanish newspaper, news,economy,politics,sports">  
      <title></title>
      </head>
      <body id="body">  
<!-- The following code will render a clickable image ad in the page -->
        <script src="http://www.myscript.com/a"></script>
      </body>
    </html> 
```

我需要将该网站显示为 android 中的 webview。

我尝试了所有这些：

```
webView.loadDataWithBaseURL(null, txt, "text/html", "UTF-8", null);
webView.loadDataWithBaseURL("x-data://base", txt, "text/html", "UTF-8", null);      
webView.loadDataWithBaseURL("notreal/", txt, "text/htm", "utf-8",null); 
```

我也尝试删除 DOCTYPE 标签：

`txt=txt.replace("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">", "");`

没有一个人有工作。我刚刚实现了将字符串显示到 webview（html 代码）中，而不是必须使用该 html 代码创建的网站。

怎么了？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-12-11T08:54:09.967

在 WebView 中加载数据。调用 WebView 的 loadData() 方法

```
wv.loadData(yourData, "text/html", "UTF-8"); 
```

你可以检查这个例子

[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

[编辑 1]

您应该在 --" -- 例如 --> **name=\"spanish press\"之前添加 --\ --**

下面的字符串对我有用

```
String webData =  "<!DOCTYPE html><head> <meta http-equiv=\"Content-Type\" " +
"content=\"text/html; charset=utf-8\"> <html><head><meta http-equiv=\"content-type\" content=\"text/html; charset=windows-1250\">"+
 "<meta name=\"spanish press\" content=\"spain, spanish newspaper, news,economy,politics,sports\"><title></title></head><body id=\"body\">"+
"<script src=\"http://www.myscript.com/a\"></script>şlkasşldkasşdksaşdkaşskdşk</body></html>"; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-30T14:25:48.300

你也可以试试这个

```
 final WebView webView = new WebView(this);
            webView.loadDataWithBaseURL(null, content, "text/html", "UTF-8", null); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-05-30T14:29:02.373

从资产 html 文件中读取

```
ViewGroup webGroup;
  String content = readContent("content/ganji.html");

        final WebView webView = new WebView(this);
        webView.loadDataWithBaseURL(null, content, "text/html", "UTF-8", null);

        webGroup.addView(webView); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:53:24.387

我有同样的要求，我已经按照以下方式做到了。你也可以试试这个..

使用 loadData 方法

`web.loadData("<p style='text-align:center'><img class='aligncenter size-full wp-image-1607' title='' src="+movImage+" alt='' width='240px' height='180px' /></p><p><center><U><H2>"+movName+"("+movYear+")</H2></U></center></p><p><strong>Director : </strong>"+movDirector+"</p><p><strong>Producer : </strong>"+movProducer+"</p><p><strong>Character : </strong>"+movActedAs+"</p><p><strong>Summary : </strong>"+movAnecdotes+"</p><p><strong>Synopsis : </strong>"+movSynopsis+"</p>\n","text/html", "UTF-8");`

movDirector movProducer 一样都是我的字符串变量。

简而言之，我为我的网址保留了自定义样式。

# jquery - 到达高度后出现自动滚动

> ID：13816474
> 
> 赞同：1
> 
> 时间：2012-12-11T08:41:31.677
> 
> 标签：jquery, html

我有`div`哪个显示谁在线的列表，我想在我的数据显示时显示滚动条，我`10`的默认值`div`是没有数据。这意味着数据将在用户在线时出现。

问题是什么时候有`1000`用户在线？我的`div`遗嘱太长了。

我试过这个CSS：

```
#isi_menu_kanan{
    height: 100px;
    overflow: show;
} 
```

但这意味着我设置了`height`div 的默认值，如果没有用户在线，则 div 会出现空数据。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:45:02.780

如果我理解了您的问题，您正试图拥有一个`div`包含 1000 行但仅`100px`高的行？在这种情况下，您需要使用`overflow: scroll`.

试试这个：

```
#isi_menu_kanan{
    max-height: 100px;
    overflow: scroll;
} 
```

[**示例小提琴**](http://jsfiddle.net/eDXe2/)

注意，我也用过`max-height`. 这意味着如果`div`高度中只有 1 条线，则会收缩以适应。这里不需要 jQuery 和 javascript。

# solr - 如何搜索 * 和 等通配符？在太阳

> ID：13816479
> 
> 赞同：1
> 
> 时间：2012-12-11T08:41:56.277
> 
> 标签：solr, solrj, solr-schema

对于字段类型，目前在 schema.xml 中使用 KeywordTokenizerFactory。

字段值就像**Good?man**。假设我想用**?** 那么我需要获取包含的值**吗？**即（**好？人**）。为此，我的查询就像***\?***

但它正在响应来自 solr 的整个文档。

如何搜索*****和等通配符**？**在solr中使用通配符搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:22:44.273

You can either use [ASCIIFoldingFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ASCIIFoldingFilterFactory) to convert symbols/numbers into unicode characters or use String field to index data and search it by escaping the characters.

# model-view-controller - 程序集哈希码在两个版本之间没有变化

> ID：13816483
> 
> 赞同：0
> 
> 时间：2012-12-11T08:42:13.640
> 
> 标签：model-view-controller, assemblies, .net-assembly, hashcode

我覆盖`Application_BeginRequest`并将程序集版本添加到 javascript 文件名。这样，我确信在每次发布后，浏览器都不会缓存 javascript。这在今天工作得很好：尽管我在程序集类文件中进行了更改并且在这两个版本之间进行了几次构建，​​但我得到了相同的程序集哈希码事件。在我看来，几乎不可能在两个版本中拥有相同的汇编哈希码。我在监督什么吗？

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        string origionalPath = Request.Url.PathAndQuery;

        if (origionalPath.StartsWith("/Scripts") == true
              && Request.CurrentExecutionFilePathExtension == ".js")
        {
            string fileName = Request.Url.Segments[Request.Url.Segments.Length - 1];

            int assemblyHashcode = typeof(KVpro.MyApplication.MvcApplication).Assembly.GetHashCode();

            string fileNameRewrite = fileName.Replace(string.Format(".{0}", assemblyHashcode), string.Empty);

            string rewritePath = origionalPath.Replace(fileName, fileNameRewrite);

            Context.RewritePath(rewritePath);
        } 
```

# wpf - WPF WriteableBitmap 透明度问题

> ID：13816487
> 
> 赞同：2
> 
> 时间：2012-12-11T08:42:23.110
> 
> 标签：wpf, writeablebitmap

首先，我将解释我尝试做的事情，以防有人提出更好的方法，我需要使用 Photoshop 中的“颜色”阶梯来混合图像（你知道，混合方法：屏幕，强光，颜色 ... ）

所以，我有我的基本图像（一个 png）和在执行时生成的 WriteableBitmap（我们称之为颜色掩码）。然后我需要使用“颜色”方法混合这两个图像，并在 UI 组件中显示结果。

到目前为止，我尝试的只是在 WriteableBitmap 上绘制东西，但我正面临着 alpha 通道的意外行为。

到目前为止我的代码：

```
// variables declaration
WriteableBitmap img = new  WriteableBitmap(width, height, 96,96,PixelFormats.Bgra32,null); 
pixels = new uint[width * height];

//function for setting the color of one pixel
private void SetPixel(int x, int y, Color c)
    {
        int pixel = width * y + x;

        int red = c.R;
        int green = c.G;
        int blue = c.B;
        int alpha = c.A;

        pixels[pixel] = (uint)((blue << 24) + (green << 16) + (red << 8) + alpha);

    }

//function for paint all the pixels of the image
private void Render()
    {
        Color c = new Color();
        c.R = 255; c.G = 255; c.B = 255; c.A = 50;
        for (int y = 0; y < height; y++)
            for (int x = 0; x < width; x++)
                SetPixel(x, y, c);

        img.WritePixels(new Int32Rect(0, 0, width, height), pixels, width * 4, 0);
        image1.Source = img;  // image1 is a WPF Image in my XAML
    } 
```

每当我使用颜色 cA = 255 运行代码时，我都会得到预期的结果。整个图像设置为所需的颜色。但是如果我将 cA 设置为不同的值，我会得到一些奇怪的东西。如果我将颜色设置为 BRGA = 0,0,255,50，我会得到一个几乎是黑色的深蓝色。如果我将它设置为 BRGA = 255,255,255,50 我会得到一个黄色......

任何线索！？！？！

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:01:28.190

将颜色组件的顺序更改为

```
pixels[pixel] = (uint)((alpha << 24) + (red << 16) + (green << 8) + blue); 
```

# c# - 从 C# 中的数据表中获取单元格值

> ID：13816490
> 
> 赞同：55
> 
> 时间：2012-12-11T08:42:30.553
> 
> 标签：c#, .net, datatable

这是一个**DataTable dt**，其中包含大量数据。

我想从 DataTable中获取特定的**单元格值，比如****Cell[i,j]**。其中，i -> 行和 j -> 列。我将用两个迭代 i,j 的值`forloops`。

但我不知道如何通过索引调用单元格。

这是代码：

```
for (i = 0; i <= dt.Rows.Count - 1; i++)
{
    for (j = 0; j <= dt.Columns.Count - 1; j++)
    {
        var cell = dt.Rows[i][j];
        xlWorkSheet.Cells[i + 1, j + 1] = cell;
    }
} 
```

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-12-11T08:45:53.507

`DataRow`也有一个索引[器](http://msdn.microsoft.com/en-us/library/kwfe1t7z.aspx)：

```
Object cellValue = dt.Rows[i][j]; 
```

但我更喜欢[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)也支持[可空类型](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.110%29.aspx)的强类型扩展方法：

```
int number = dt.Rows[i].Field<int>(j); 
```

甚至更易读且不易出错的列名称：

```
double otherNumber = dt.Rows[i].Field<double>("DoubleColumn"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-11T08:45:08.450

`Rows`您可能需要从而不是作为单元格引用它：

```
var cellValue = dt.Rows[i][j]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T08:48:28.767

你可以这样迭代`DataTable`：

```
private void button1_Click(object sender, EventArgs e)
{
    for(int i = 0; i< dt.Rows.Count;i++)
        for (int j = 0; j <dt.Columns.Count ; j++)
        {
            object o = dt.Rows[i].ItemArray[j];
            //if you want to get the string
            //string s = o = dt.Rows[i].ItemArray[j].ToString();
        }
} 
```

根据`DataTable`单元格中数据的类型，您可以将对象转换为您想要的任何内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-29T08:29:14.230

要获取单元格列名称以及单元格值：

```
List<JObject> dataList = new List<JObject>();

for (int i = 0; i < dataTable.Rows.Count; i++)
{
    JObject eachRowObj = new JObject();

    for (int j = 0; j < dataTable.Columns.Count; j++)
    {
        string key = Convert.ToString(dataTable.Columns[j]);
        string value = Convert.ToString(dataTable.Rows[i].ItemArray[j]);

        eachRowObj.Add(key, value);

    }

    dataList.Add(eachRowObj);

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-05T12:34:02.680

您也可以直接在数据表变量上调用索引器：

```
var cellValue = dt[i].ColumnName 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-06-01T09:24:38.027

如果我正确理解了您的问题，您想显示填充数据表的一个特定单元格吗？这是我用来在我的 DataGrid 中显示给定单元格的内容。

```
var s  = dataGridView2.Rows[i].Cells[j].Value;
txt_Country.Text = s.ToString(); 
```

希望这可以帮助

# javascript - 正则表达式全局匹配术语直到分隔符，结果没有术语/分隔符

> ID：13816491
> 
> 赞同：0
> 
> 时间：2012-12-11T08:42:33.220
> 
> 标签：javascript, regex, match

我的字符串包含由 . 分隔的 (FUDI) 消息`;\n`。我尝试提取以某个字符串开头的所有消息。

以下正则表达式找到正确的消息，但仍包含分隔符和搜索词。

```
var input = 'a b;\n'
    + 'a b c;\n'
    + 'b;\n'
    + 'b c;\n'
    + 'b c d;\n';

function search(input, term){
    var regex = new RegExp('(^|;\n)' + term + '([^;\n]?)+', 'g');
    return input.match(regex);
}

console.log(search(input, 'a b'));
// current: ["a b", ";↵a b c"]
// wanted1: ["a b", "a b c"]
// wanted2: ["", "c"]

console.log(search(input, 'b'));
// current: [";↵b", ";↵b c", ";↵b c d"]
// wanted1: ["b", "b c", "b c d"]
// wanted2: ["", "c", "c d"] 
```

1.  如何删除分隔符（wanted1）？
2.  是否可以只返回搜索词（wanted2）之后的所有内容？

我是一个正则表达式初学者，所以非常感谢任何帮助。

**编辑：使用 /gm 解决wanted1**

```
var input = 'a b;\n'
    + 'a b c;\n'
    + 'b;\n'
    + 'b c;\n'
    + 'b c d;\n';

function search(input, term){
    var regex = new RegExp('^' + term + '([^;]*)', 'gm');
    return input.match(regex);
}

console.log(search(input, 'a b'));
// current: ["a b", "a b c"]
// wanted2: ["", "c"]

console.log(search(input, 'b'));
// current: ["b", "b c", "b c d"]
// wanted2: ["", "c", "c d"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:48:18.987

要摆脱分隔符，您应该使用`.split()`而不是`.match()`.

```
str.split(/;\n/); 
```

使用您的示例：

```
('a b;\n'
+ 'a b c;\n'
+ 'b;\n'
+ 'b c;\n'
+ 'b c d;\n').split(/;\n/)
// ["a b", "a b c", "b", "b c", "b c d", ""] 
```

然后，要找到匹配项，您必须遍历拆分结果并进行字符串匹配：

```
function search(input, term)
{
    var inputs = input.split(/;\n/),
    res = [], pos;

    for (var i = 0, item; item = inputs[i]; ++i) {
        pos = item.indexOf(term);
        if (pos != -1) {
            // term matches the input, add the remainder to the result.
            res.push(item.substring(pos + term.length));
        }
    }
    return res;
} 
```

# qt - 如何根据qml中的模型项目文本大小调整列表框宽度

> ID：13816492
> 
> 赞同：0
> 
> 时间：2012-12-11T08:42:33.110
> 
> 标签：qt, qml, qt-quick

我只是想根据模型在 qml 中的项目文本大小来调整列表框的宽度。有没有可能，有什么想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:59:26.160

您可以在项目`paintedWidth`的方法中使用文本的属性`Component.onCompleted`并相应地进行更改`parent.width`。

# java - 访问 JAR 中的资源

> ID：13816501
> 
> 赞同：1
> 
> 时间：2012-12-11T08:43:24.937
> 
> 标签：java, jar, embedded-resource

我正在创建一个使用 Maven 配置文件和 JAR 构建的 Java 应用程序。

我在这个文件夹中有一些 XML 文件：project/src/main/resources/XML/*.xml

src/main/resources 文件夹是我构建路径中的一个源文件夹，所以我在 JAR 二进制文件中构建了我的 project.jar/XML/*.xml。

我希望能够在 JAR 执行中找到并列出这些文件“/XML/*.xml”。我的结构适合这个吗？

我使用 Maven 配置文件运行没有问题，只是找不到查找和列出这些文件的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:52:36.180

实在没有什么*好*办法。如果您不介意依赖，`spring-core`那么他们有一个很好[`PathMatchingResourcePatternResolver`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html)的抽象 JAR 和目录之间的差异。

```
PathMatchingResourcePatternResolver resolver =
   new PathMatchingResourcePatternResolver(MyClass.class.getClassLoader());
Resource[] xmls = resolver.getResources("classpath*:XML/*.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:54:43.583

如果要列出 jar 文件的内容，只需运行：

```
jar tf ./path/to/your/file.jar 
```

或者

```
jar tf ./path/to/your/file.jar | grep XML 
```

现在从代码中（我相信这不是唯一的方法），你必须`Main`用 jar 中的任何类替换：

```
 List<String> myJarXmlFiles = new ArrayList<String>();
    try {
                       // replace Main here   
        CodeSource src = Main.class.getProtectionDomain().getCodeSource();
        if (src != null) {
            URL jar = src.getLocation();
            ZipInputStream zip = new ZipInputStream(jar.openStream());
            ZipEntry entry = null;
            while ((entry = zip.getNextEntry()) != null) {
                if (entry.getName().contains("XML/")
                        && entry.getName().endsWith(".xml")) {
                    myJarXmlFiles.add(entry.getName());
                }
            }
        } else {
            // failed
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:14:01.217

此代码演示了如何在应用程序的类路径中找出 jar 的路径并列出文件夹的内容。

```
// you need to get of a URL of any class in your jar
URL url = Appender.class.getProtectionDomain().getCodeSource()
           .getLocation();
File file = new File(url.getFile());
System.out.println(file.getCanonicalPath());
JarFile jar = new JarFile(file);
Enumeration<JarEntry> i = jar.entries();
while (i.hasMoreElements()) {
    JarEntry e = i.nextElement();
    if (e.getName().startsWith("META-INF/")) {
        System.out.println(e.getName());
    }
}
jar.close(); 
```

输出

```
jar:file:/C:/temp/.repository/log4j/log4j/1.2.17/log4j-1.2.17.jar!/org/apache/log4j/Appender.class
C:\temp\.repository\log4j\log4j\1.2.17\log4j-1.2.17.jar
META-INF/MANIFEST.MF
META-INF/
META-INF/LICENSE
META-INF/NOTICE
META-INF/maven/
META-INF/maven/log4j/
META-INF/maven/log4j/log4j/
META-INF/maven/log4j/log4j/pom.properties
META-INF/maven/log4j/log4j/pom.xml 
```

# php - PHP：为 Oracle 的函数 odbc_connect 创建一个 dsn

> ID：13816506
> 
> 赞同：0
> 
> 时间：2012-12-11T08:43:48.117
> 
> 标签：php, oracle, odbc

我需要通过easyphp使用php连接到的oracle数据库的信息如下：用户、密码、主机、端口、服务。对 odbc 的新事物我尝试使用函数 odbc_connect 但我不断收到错误只是因为我不知道如何制作 dsn。

虽然，我尝试使用这个：

```
$dns_db="DRIVER={DataDirect 32-BIT SequeLink 5.4};HOST=localhost; PORT=2399;ServerDataSource=maDB;" 
```

但我完全忽略`what does {DataDirect 32-BIT SequeLink 5.4} mean`了，似乎我需要知道数据库的名称，这样我才能把它放在 ServerDataSource 中。

所以这是我的问题，谁能告诉我如何制作这个 dsn 东西？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:06:39.333

这应该是显示在 ODBC 管理器中的驱动程序名称。在我的电脑中`Microsoft ODBC for Oracle`，我可以`Oracle in instantclient_11_2`选择：

![在此处输入图像描述](../Images/9ca89237d0781dde7f4028162743fe58.png)

尝试使用Oracle提供的驱动；Microsoft 缺少许多基本功能。

但我建议您创建一个系统 ODBC，这样您就可以指定一个您选择的名称，并简单地通过该名称引用它。此外，这允许使用驱动程序的 GUI 配置其他选项：

![在此处输入图像描述](../Images/d57c4454ae61b439439ce12b4f464979.png)

最后但同样重要的是，我最后的建议是完全转储 ODBC 并使用 OCI 扩展。使用 ODBC 编写 PHP 应用程序令人沮丧。

# java - 以线程安全方式格式化日期抛出 java.text.ParseException：

> ID：13816507
> 
> 赞同：1
> 
> 时间：2012-12-11T08:43:53.347
> 
> 标签：java, multithreading, parsing, date

我正在尝试将日期从一种格式转换为另一种格式

输入字符串 - 2012-11-07-121603 (yyyy-MM-dd-HH-mm-ss)

输出字符串 - 2012-11-07-12:16:03:000 (yyyy-MM-dd-HH:mm:ss:SSS)

```
ThreadSafeSimpleDateFormatUtil simpleDateFormat = new ThreadSafeSimpleDateFormatUtil(GenericConstants.DATE_FORMAT.YYYY_MM_DD_HH_MM_SS.toString());
final Date parsedDate = simpleDateFormat.parse(bulkCollectionTime);
simpleDateFormat = new ThreadSafeSimpleDateFormatUtil(GenericConstants.DATE_FORMAT.YYYY_MM_DD_HH_MM_SS_SSS.toString());
writeBean.setTimestamp(simpleDateFormat.format(parsedDate)); 
```

但它抛出以下错误：

```
java.text.ParseException: Unparseable date: "2012-11-07-121603"
    at java.text.DateFormat.parse(DateFormat.java:337)
    at com.belgacom.rosy.rebecca.utils.ThreadSafeSimpleDateFormatUtil.parse(ThreadSafeSimpleDateFormatUtil.java:39) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:48:54.337

看起来输入格式应该在小时、分钟和秒之间没有“-”：

```
2012-11-07-121603 (yyyy-MM-dd-HHmmss) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:48:03.513

```
Input String - 2012-11-07-121603 (yyyy-MM-dd-HH-mm-ss) 
```

它会匹配的错误模式`yyyy-MM-dd-HHmmss`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-08T00:49:22.523

# chef-infra - 错误：Mixlib::ShellOut::ShellCommandFailed: windows_batch

> ID：13816511
> 
> 赞同：1
> 
> 时间：2012-12-11T08:44:10.520
> 
> 标签：chef-infra

我有一个需要很长时间才能执行（2 小时）的食谱，我收到了这个错误

错误：Mixlib::ShellOut::ShellCommandFailed: windows_batch

如您所见，它位于 Windows 机器上。

我需要在某处增加超时计时器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:15:02.103

如果您查看[shell-out 代码](https://github.com/opscode/mixlib-shellout/blob/master/lib/mixlib/shellout/windows.rb)，您可以看到（查找“WAIT_TIMEOUT”），当 shell 命令接收到超时时，厨师会抛出显式 CommandTimeout 异常。因此，您必须收到其他一些错误。

# c - 为什么在 Lua 中使用索引方法而不是特殊方法

> ID：13816518
> 
> 赞同：0
> 
> 时间：2012-12-11T08:44:43.203
> 
> 标签：c, lua

```
lua_State*  m_state;
luaL_newmetatable(m_state,LUA_DATACLIENT);

lua_pushcfunction(m_state,DataClient_Index);
lua_setfield(m_state,-2,"__index");

lua_pushcfunction(m_state,DataClient_newIndex);
lua_setfield(m_state,-2,"__newindex");

lua_pushcfunction(m_state,DataClient_RequestData);
lua_setfield(m_state,-2,"RequestData");

lua_pushcfunction(m_state,DataClient_free);
lua_setfield(m_state,-2,"__gc");
lua_pop(m_state,1); 
```

我想将一些C函数导出到Lua，但是`DataClient_Index`当我在Lua中调用时调用了该函数`RequestData`，那么为什么在Lua中使用索引方法而不是特殊方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:43:24.860

Lua在执行索引操作时**默认**不查看元表。

*   对于*表*，`__index`只有在表中不存在索引时才会触发元方法。
*   对于*userdata*，`__index`总是调用，因为不可能在 userdata 中存储键值*。*

对于*userdata 对象*，习惯上将*方法*放在元表中。然而，为了使其工作，`__index`元表字段应该是元表本身，或者是一个试图在元表中查找索引的函数。

如果您选择第一个解决方案（最简单的），您可以编写如下内容：

```
lua_State*  m_state;
luaL_newmetatable(m_state,LUA_DATACLIENT);

lua_pushvalue(m_state, -1); // push the metatable
lua_setfield(m_state,-2,"__index"); // __index points to the metatable itself

// ... 
```

# ruby-on-rails - 压缩 JSON 字符串

> ID：13816528
> 
> 赞同：4
> 
> 时间：2012-12-11T08:45:19.663
> 
> 标签：ruby-on-rails, ruby, json

我通过发布请求返回了这个 JSON 字符串，并且我正在使用 ruby​​ on rails：

```
{"a":[{"id":2816,"tr":990,"lub":"mattia1.lipreri","p":"0.20","b":"0"},{"id":2817,"tr":992,"lub":"mattia1.lipreri","p":"0.20","b":"0"},{"id":2818,"tr":993,"lub":"mattia1.lipreri","p":"0.20","b":"0"},{"id":2819,"tr":994,"lub":"mattia1.lipreri","p":"0.20","b":"0"},{"id":2820,"tr":995,"lub":"mattia1.lipreri","p":"0.20","b":"0"}]} 
```

我想知道是否有办法压缩它，也许用 hpack 或 cjson，有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:53:51.027

看看 bson gem：[http](http://rubygems.org/gems/bson) ://rubygems.org/gems/bson 。它在内部用于 mongodb 驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:59:00.263

一些可以帮助你的链接..!!

[http://artsy.github.com/blog/2012/02/24/10x-rack-and-rails-output-compression-with-rack-deflater/](http://artsy.github.com/blog/2012/02/24/10x-rack-and-rails-output-compression-with-rack-deflater/)

[如何在 Rails for Android 中使用 gzip 压缩 JSON？](https://stackoverflow.com/questions/11997110/how-to-compress-json-with-gzip-in-rails-for-android)

# javascript - 带有叠加淡入/淡出触发器的多个按钮

> ID：13816534
> 
> 赞同：2
> 
> 时间：2012-12-11T08:46:03.453
> 
> 标签：javascript, jquery

我有带触发器和覆盖的块。

这是一个示例 jsFiddle：http: [//jsfiddle.net/uRstt/7/](http://jsfiddle.net/uRstt/7/)

当在特定块上触发叠加淡入淡出效果时，我希望其他块上的叠加淡出。此外，如果您单击具有活动叠加层的块上的触发器，它必须淡出。

这是我试图实现但没有成功的代码。

```
$(".trigger").click(function(){
  !$(this).parent().find(".overlay").fadeOut();
  $(this).parent().find(".overlay").stop(true,true).fadeToggle();
}); 
```

* * *

**感谢Adeneo，这是正确的代码**

```
$(".trigger").click(function(){
   $(this).siblings(".overlay").stop(true,true).fadeToggle().closest('.container').siblings().find('.overlay').fadeOut();
}); 
```

这是一个工作[jsFiddle的示例](http://jsfiddle.net/uRstt/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:49:13.040

做这个：

```
$(".trigger").click(function(){
    $(this).siblings(".overlay").stop(true,true).fadeToggle()
    .closest('.container').siblings().find('.overlay').fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:49:16.437

如果我理解正确，这样的事情应该有效：

```
$(".trigger").click(function(){
    $(this).next().stop(true,true).fadeToggle();
    $(this).parent().siblings().children('.overlay:visible').fadeOut();
}); 
```

演示：http: [//jsfiddle.net/uRstt/9/](http://jsfiddle.net/uRstt/9/)

# excel - Excel InterOp：更新数据透视表数据源会破坏计算字段

> ID：13816536
> 
> 赞同：1
> 
> 时间：2012-12-11T08:46:08.477
> 
> 标签：excel, office-interop, pivot-table

我有 Sheet1，其中包含所有数据和 Sheet2 中的数据透视表，该数据引用此数据作为数据源。当数据需要刷新时，我会擦除除标题行之外的数据，然后附加新数据。

一切都更新得很好，除了折扣百分比计算字段以公式结束

=%NAME/%NAME

我如何以编程方式重置该字段的公式并强制刷新该列，或者首先防止公式丢失。

# android - 使用 REST 处理 HTTP Get/Delete Android

> ID：13816537
> 
> 赞同：0
> 
> 时间：2012-12-11T08:46:09.977
> 
> 标签：android, http, rest, poster

我正在 Android 中实现基于 REST 的 HTTP 服务器。服务器响应 GET、DELETE 和 POST 请求。两个 android 设备使用 HTTP Post 进行通信（我正在使用一项服务，其中一个设备一直在侦听一个端口并发布到下一个设备，并且这一直在进行）。

我正在使用 Mozilla Poster 测试 GET 和 DELETE。我应该添加一个单独的套接字/端口来处理相同的问题吗？因为当我现在尝试时，有时我会收到超时错误或找不到响应。但是，我可以在 Logcat 窗口中看到服务器响应。请帮我。处理 GET 请求的代码：

```
if(method.equals("GET"))
 {
   if(checkFileExisting())
     {
       BufferedReader reader = new BufferedReader(new FileReader(new   File(getFilesDir()+File.separator+"script.json")));
       String read;
       StringBuilder builder = new StringBuilder("");
         while((read = reader.readLine()) != null)
          {
            builder.append(read);
          }
       String JSONContents = builder.toString();
       reader.close();
       JSONObject jsonObject;
  try {
        jsonObject = new JSONObject(JSONContents);
        String name = jsonObject.getString("name");
        JSONObject stateObject = jsonObject.getJSONObject("state");
        String stateValue = stateObject.getString("value"); 
          if(name.equals(target))
           {
              HttpResponse response = new BasicHttpResponse(HttpVersion.HTTP_1_1, 200, "OK");
             response.setEntity(new StringEntity("State is:" + stateValue));
             conn.sendResponseHeader(response);
             conn.sendResponseEntity(response);
            }
           else
           {                    
             HttpResponse response = new BasicHttpResponse(HttpVersion.HTTP_1_1, 404, "Not Found");
             response.setEntity(new StringEntity("The requested resource " + target + " could not be found due to mismatch!!"));
             conn.sendResponseHeader(response);
             conn.sendResponseEntity(response);
            }
        } catch (JSONException e) {
          e.printStackTrace();
       }
  }
     else
       {
           HttpResponse response = new BasicHttpResponse(HttpVersion.HTTP_1_1, 404, "Not Found");
           response.setEntity(new StringEntity("The requested resource " + target + " could not be found!!"));
           conn.sendResponseHeader(response);
           conn.sendResponseEntity(response);
       }                    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:50:44.800

链接[http://www.integratingstuff.com/2011/10/24/adding-a-webserver-to-an-android-app/](http://www.integratingstuff.com/2011/10/24/adding-a-webserver-to-an-android-app/)有一个很好的例子。我在代码中错过了 conn.close() 。

# ios - iOS 内存病狂

> ID：13816541
> 
> 赞同：0
> 
> 时间：2012-12-11T08:46:26.823
> 
> 标签：ios, memory-management, automatic-ref-counting

我最近将一个项目移植到 ARC，因为我遇到了崩溃问题并实际确定了原因，无论是泄漏还是保留周期等，现在我已经将它移植过来，我还没有进行大规模测试以查看它是否仍然崩溃因为我没有设法通过活动监视器，当它显示我的应用程序正在执行此操作时，它给了我 heeby jeebies（活动监视器分析器）

![活动监视器](../Images/0c53924b8b7944d21dd003f459c310b6.png)

而在分配工具中，它看起来像

![分配](../Images/7caed20a8abcb61db80b6acf3389a781.png)

实际内存使用量甚至不是最糟糕的，它一度飙升至大约 90 多 MB，我不确定如何进行，因为我不是 100% 确定如何处理此处提供的信息，除非假设我可能是东东，非常错误，而且我也运行了泄漏工具，我有一些，但它们很小，它们都是字节。

有人有解释吗？或者至少能够澄清我可能在看什么？`real memory usage`和 和`live bytes`和有什么不一样`overall bytes`？这些结果也得到了一次完全相同的动作，然后在结束时显示给你。

我一直在尝试减少实际内存使用量，因为 ARC 转换前我经常遇到内存警告和静默崩溃，转​​换后我没有再次遇到这些，但我没有进行任何长时间的测试，因为我什至无法想象何时尝试真正的内存使用情况是这样的。这实际上看起来比 ARC 之前要高很多……尽管在 ARC 之后实时字节看起来确实更低……疯狂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:15:57.753

让我困惑一段时间的事情是 ARC——尽管它很精彩——并不一定避免对`@autoreleasepool`.

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)

我在应用程序中运行了非常大的内存使用，直到有人建议：

```
@autoreleasepool {

    // lots of allocating of objects returned from methods then discarded

} // and the closing brace of the autoreleasepool block causes their memory to be recovered here 
```

也许这会对你有所帮助。

[Instruments ObjectAlloc: Explanation of Live Bytes & Total Bytes](https://stackoverflow.com/questions/2154219/instruments-objectalloc-explanation-of-live-bytes-overall-bytes)中对分析器中各个列的含义进行了很好的解释

# iphone - nslocalnotification 中未显示按钮？

> ID：13816544
> 
> 赞同：1
> 
> 时间：2012-12-11T08:46:37.080
> 
> 标签：iphone, objective-c, ios, uilocalnotification

我编写了以下代码来显示本地通知。但是，当我收到通知时，通知上没有显示按钮。有人可以告诉我我做错了什么吗？我在应用程序中编写了以下代码确实进入了后台事件。

```
UILocalNotification *local=[[UILocalNotification alloc]init];
    NSDate *alertTime = [[NSDate date] dateByAddingTimeInterval:10];
    local.fireDate=alertTime;
    local.timeZone=[NSTimeZone defaultTimeZone];
    local.alertBody=@"Hello this is a local notif";
    local.alertAction=@"Show";
    local.repeatInterval=0;
    local.applicationIconBadgeNumber=1;
    local.soundName=UILocalNotificationDefaultSoundName;

    UIApplication *abc=[UIApplication sharedApplication];
    [abc scheduleLocalNotification:local]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:52:29.697

您必须使用以下方法在 AppDelegate.m 文件中编写代码。

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{

    if (application.applicationState == UIApplicationStateActive) {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:notification.alertBody delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Show", nil];
        [alert show];
                [alert release];
    }
} 
```

# python - 是否可以将 GCM 与 python GAE 后端一起使用？

> ID：13816547
> 
> 赞同：9
> 
> 时间：2012-12-11T08:46:46.487
> 
> 标签：python, google-app-engine, webserver, push-notification, google-cloud-messaging

我有一个 python GAE 服务，我想将通知从服务器推送到设备。可用于 GCM的[教程](http://developer.android.com/google/gcm/demo.html)是为 Java 编写的，并在 ant+Tomcat/Jetty+JAE 上运行。我的印象是 GCM 将是一个与语言无关的 Web 服务，并且我将能够发送关于我的服务器端平台的推送通知。

1.  我是否误认为 GCM 与我的 python GAE 后端兼容？
2.  如果我可以将它与现有服务器一起使用，我可以遵循（或调整）哪些说明来开始向移动客户端发送通知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T09:03:17.250

你当然可以。GCM 有一个 JSON REST API，您可以使用它。首先，您需要在此处注册您的项目：http: [//developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)。

你基本上这样做：

1.  [从http://developer.android.com/google/gcm/gs.html#access-key](http://developer.android.com/google/gcm/gs.html#access-key)获取您的 API 密钥
2.  构建你的有效载荷，一个包含registration_ids，数据等的字典
3.  使用 url.fetch [https://developers.google.com/appengine/docs/python/urlfetch/](https://developers.google.com/appengine/docs/python/urlfetch/)将数据作为 JSON 字符串发送到 GCM API

这是另一个带有一些代码的问题。[Google Cloud Messaging HTTP Error 400: Bad Request](https://stackoverflow.com/questions/11697096/google-cloud-messaging-http-error-400-bad-request) and a blogpost（不是英语，我认为是西班牙语。但有一些示例代码）[http://pforray.wordpress.com/2012/07/05/ejemlo-gcm-en-appengine -Python/](http://pforray.wordpress.com/2012/07/05/ejemplo-gcm-en-appengine-python/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T05:42:57.987

使用 gcm-client

pip install gcm-client

# 参考：

[https://pypi.python.org/pypi/gcm-client/](https://pypi.python.org/pypi/gcm-client/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:23:41.857

在这里，您可以找到一个 Python 接口模块，用于通过 Pushwoosh 发送推送通知。

[https://github.com/dbtsai/python-pushwoosh](https://github.com/dbtsai/python-pushwoosh)

您可以使用它通过 Pushwoosh（它是免费的）发送消息或根据您的需要进行调整。

# sql-server - 为什么Entity Framework在更改SqlParameter顺序时会抛出异常？

> ID：13816548
> 
> 赞同：12
> 
> 时间：2012-12-11T08:46:52.987
> 
> 标签：sql-server, entity-framework

我首先使用实体​​框架 4.3 代码来调用存储过程，我调用存储过程的方式是这样的：

```
var parameters = new[]
{
    new SqlParameter("member", 1),
    **new SqlParameter("Code","0165210662660001"),**
    new SqlParameter("PageSize", 1),
    new SqlParameter("PageNumber",1)
};

var result  = context.Database.SqlQuery<resultClass>(
    "mySpName @member, @Code, @PageSize,@PageNumber" parameters).ToList(); 
```

它在 SqlServer 上执行，我得到结果。

但是，如果我像这样更改参数的顺序：

```
var result  = context.Database.SqlQuery<resultClass>("mySpName @Code,  @member,@PageSize,@PageNumber" parameters).ToList();

var parameters = new[]
{
    **new SqlParameter("Code","0165210662660001"),**
    new SqlParameter("Member", 1),
    new SqlParameter("PageSize", 1),
    new SqlParameter("PageNumber",1)
}; 
```

我收到这样的错误：

```
 Error converting data type nvarchar to int 
```

存储过程是这样的：

```
ALTER PROCEDURE [c].[mySpName]
    @Member INT ,
    @Code VARCHAR (50) ,
    @PageSize INT ,
    @PageNumber INT
 AS 
```

为什么我会收到这个订单？保持参数顺序重要吗？我该怎么做才能调用存储过程而不关心参数顺序？

**============ 我找到了一个解决方法，它完美地工作 ============**

```
public class blahContext<T>
{
    int i = 0;
    public  IEnumerable<T> ExecuteStoreQuery(string SPname, SqlParameter[] parameters)
    {

        using (var context = new CADAContext())
        {

            string para = string.Join(", ", (from p in parameters
                                             where !"NULL".Equals(p.Value)
                                             select string.Concat(new object[] { "@", p.ParameterName, "={", this.i++, "}" })).ToList<string>());

            object[] x = (from p in parameters
                          where !"NULL".Equals(p.Value)
                          select p.Value).ToArray<object>();

            return context.Database.SqlQuery<T>(SPname + " " + para, x).ToList();

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:25:57.603

`@Code`这不是因为您的参数对象中的参数顺序 - 这是因为在您的第二个代码片段中，当 SP 需要一个值时，您明确地将值作为第一个参数传递`Member INT`。

```
var result  = context.Database.SqlQuery<resultClass>("mySpName @Code,  @member,@PageSize,@PageNumber" parameters).ToList(); 
```

...您`"0165210662660001"`作为第一个参数传入，并且转换为 INT 失败。

参数对象中参数的顺序无关紧要，因为 EF（实际上是 ADO.NET）会将这些参数映射到`@parametername`查询字符串中的值。因此，`new SqlParameter("Code","0165210662660001")`将被映射到`@Code`查询中的位置 - 在第二个代码片段中，实际上是 SP 预期的 Member 值的位置。

但是...您也可以使用命名参数执行 SP，在这种情况下，您可以按以下任意顺序将参数传递给 SP：

```
db.Database.SqlQuery<resultClass>("mySpName PageNumber=@PageNumber,Code=@Code,PageSize=@PageSize,Member=@member", parameters).ToList(); 
```

您会看到我没有按照 [由 SP] 定义的顺序将参数传递给 SP，但是因为它们被命名了，所以我不必在意。

有关传递参数的不同方式，请参阅：This [Answer](https://stackoverflow.com/questions/4873607/how-to-use-dbcontext-database-sqlquerytelementsql-params-with-stored-proced)以获得一些很好的示例。

# c - Unix C 套接字服务器不接受连接

> ID：13816552
> 
> 赞同：3
> 
> 时间：2012-12-11T08:46:59.093
> 
> 标签：c, sockets, unix-socket

这是交易，我正在用 C 语言（使用 unix 系统调用）编写一个简单的 tcp 套接字服务器，但我无法接受连接。

据我所知，我很好地完成了服务器初始化，但是当我尝试连接到我打印出来的端口（见下面的代码）时，它拒绝了，好像什么都没有。

更重要的是，当我 netstat 甚至没有使用该端口时。我目前的设置并没有抛出任何错误，我已经完全没有想法了。

```
int main(){

    int sock_fd;
    int conn_fd;
    struct sockaddr_in serv_addr;
    struct sockaddr_in cli_addr;
    socklen_t* serlen;
    socklen_t* clilen;
    clilen  = malloc(sizeof(socklen_t));
    serlen  = malloc(sizeof(socklen_t));
    *serlen = sizeof(serv_addr);
    *clilen = sizeof(cli_addr);

    /*=============================Create Socket=============================*/

        //Create Socket
        sock_fd = socket(AF_INET, SOCK_STREAM, 0);
            if(sock_fd<0){
                fprintf(stderr,"error creating socket\n");
                exit(1);}

        //Initialize Server Address Struct
        bzero((char *) &serv_addr, *serlen);
        serv_addr.sin_family = AF_INET;
        serv_addr.sin_addr.s_addr = INADDR_ANY;
        serv_addr.sin_port = 0;

    /*=============================Bind Address==============================*/

        //Bind socket to an address
        if(bind(sock_fd,(struct sockaddr*)&serv_addr,*serlen)<0){
            fprintf(stderr,"error binding\n");
            exit(1);}

        //Get socket data
        if(getsockname(sock_fd,(struct sockaddr*)&serv_addr, serlen)<0){
            fprintf(stderr,"error with socket name");
            exit(1);}

    /*=============================Server Started============================*/

        //Listen for connections
        listen(sock_fd,32);

        //Print port
        printf("%i", serv_addr.sin_port);

        conn_fd = accept(sock_fd,(struct sockaddr*)&cli_addr,clilen);

        /**Do something exciting with my new connection**/

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:51:51.533

你真的想在零端口上监听吗？尝试使用较高的端口号，最好 > 1024。/etc/services 会提示有关空闲端口 - 但它只是一组注释，这些端口号不强制执行。

编辑：另一个提示。端口号应按*网络顺序排列*，因此分配应使用`htons()`. 您获得的“随机数”可能是简单的数字，因为您可能使用的是 little-endian 机器（如 Intel），所以它们看起来是乱码。当您打印它们时，使用`ntohs()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:10:25.810

给@askmish 的道具以激发这个灵感

```
 //Print port
    printf("%i", serv_addr.sin_port); 
```

变成

```
 //Print port
    printf("%i", htons(serv_addr.sin_port)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T09:49:11.053

在您的代码中：

*   代替：

    ```
    serv_addr.sin_port = 0; 
    ```

    试试这个：

    ```
    serv_addr.sin_port=htons(2056);//Any port no. 
    ```

*   代替：

    ```
     listen(sock_fd,32); 
    ```

    试试这个：

    ```
     if(listen(sock_fd,SOMAXCONN)<0)//Just to be sure that you are considering max. no. of requests
     {  fprintf(stderr,"error with listen");
        exit(1);} 
    ```

*   也适用于：

    ```
     conn_fd = accept(sock_fd,(struct sockaddr*)&cli_addr,clilen); 
    ```

    添加这个：

    ```
     if(conn_fd <0)
     {
       //handle the error here
     } 
    ```

如果这些都不能解决您的问题，那么客户端代码或您的服务器环境可能存在问题。

# javascript - 随图像的高度改变不透明度

> ID：13816556
> 
> 赞同：1
> 
> 时间：2012-12-11T08:47:06.510
> 
> 标签：javascript, jquery, css

在 CSS 或 javascript 或 jquery 中有没有一种方法可以改变单个图像的不透明度及其高度。就像假设我有一个 10 像素高的图像，我希望底部 1 像素不可见，因此不透明度为 0，倒数第二个像素为 0.1，并逐渐增加到最上面像素的不透明度 1。这种逐渐的不透明度应该给出一种反射的外观，这就是我想要实现的。我已经研究并尝试过，我所有的研究都没有证明有任何帮助。帮助将不胜感激。我正在标记 javascript 和 jquery，但我不确定它是否可以仅使用 css3 来实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:56:36.227

使用简单的 css 是可能的：

```
background-image: url(...), -moz-linear-gradient(top,  rbga(255,255,255,1),  rbga(255,255,255,0));
background-image: url(...), -webkit-gradient(linear, left top, left bottom, from(rgba(255,255,255,1)), to(rgba(255,255,255,0))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:06:15.167

假设您可以将图像高度从 0 到 1000 像素：然后

```
<script src='http://code.jquery.com/jquery-1.8.3.min.js'></script>
<script>
function img_height()
{
    height = $('#idd').height();

    $('#idd').css('opacity',height/1000); // change 1000 to max size of image
}

</script>

<img src='http://eoimages.gsfc.nasa.gov/images/imagerecords/0/885/modis_wonderglobe_lrg.jpg' height="821px" id="idd" style='opacity:0' onload="img_height()"> 
```

使用高度值来确认不透明度的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:53:18.030

是的，有可能，我在[另一个 StackOverflow 问题](https://stackoverflow.com/questions/6397712/white-to-transparent-gradient-with-background-image)上找到了这个：

这个网站似乎可以为您完成这项工作，它看起来很有希望。 [http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# java - Spring 没有匹配的 bean 类型，预计至少 1 个 bean

> ID：13816558
> 
> 赞同：2
> 
> 时间：2012-12-11T08:47:11.903
> 
> 标签：java, spring, spring-mvc, autowired

得到错误

```
 No matching bean of type [foo.bar.service.AccountService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

我的服务：

```
public interface AccountService {

@Service
public class AccountServiceImpl implements AccountService { 
```

**所以我应该得到实施**

我想在哪里得到它：

```
public class CustomAuthentication implements AuthenticationProvider {

@Autowired
private AccountService accountService; 
```

在我的其他班级也做同样的事情，但它在那里工作。

```
@Controller
public class AccountController {

@Autowired
private AccountService accountService; 
```

当我从我的 中删除这 2 行时`CustomAuthentication`，没有错误。

配置以防万一：

```
 <context:component-scan base-package="foo.bar" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T08:50:14.453

只有 spring 托管对象可以自动装配另一个组件/服务/存储库。

`public class CustomAuthentication implements AuthenticationProvider`需要春季管理

喜欢

```
@Controller
public class AccountController 
```

尝试使用 @Component 注释 CustomAuthenitcation

```
@Component
public class CustomAuthentication implements AuthenticationProvider 
```

并让我知道如何创建 CustomAuthentication 对象。CustomAuthentication 对象应该是通过向 Spring 请求获得的代理（ApplicationContext.getBean() 或在另一个 bean 中自动装配）。

更新：

此错误的原因是您有两个配置文件。spring-servlet.xml 和 spring-security.xml。spring-security.xml 中定义的 bean 无法在其他中找到。

所以你应该尝试类似`<import resource="spring-servlet.xml"/>`in 的东西`spring-security.xml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:23:36.853

Please try `<context:component-scan base-package="foo.bar.*" />` or `<context:component-scan base-package="foo.bar.service" />`. I believe it would work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T01:14:54.860

you have to write on AccountServiceImpl class @Service("accountService")

# apache - 如何在 Apache 中启用 mod_info？

> ID：13816559
> 
> 赞同：5
> 
> 时间：2012-12-11T08:47:16.163
> 
> 标签：apache, apache2, apache2.2, apache-modules

我已经阅读了 Apache 指南以启用 mod_info。

根据文档：

*   要配置 mod_info，请将以下内容添加到您的`httpd.conf`文件中。

    ```
    <Location /server-info>
        SetHandler server-info
    </Location> 
    ```

*   您可能希望在指令中使用 mod_access`<Location>`来限制对服务器配置信息的访问：

    ```
    <Location /server-info>
        SetHandler server-info
        Order deny,allow
        Deny from all
        Allow from yourcompany.com
    </Location> 
    ```

*   配置好后，通过访问获取服务器信息

    ```
    http://your.host.dom/server-info 
    ```

就我而言，此链接未提供任何信息。有什么我需要安装为 mod_info.c 之类的吗？有什么我需要作为 AddModule 或其他东西的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T15:15:51.063

应该有一个 mod_info.so 必须在 Apache 2 可以找到的路径上。例如，我有：

```
kdp@darwin ccl $ locate mod_info.so
/usr/lib64/apache2/modules/mod_info.so 
```

然后，我的 httpd.conf 中有这些：

```
ServerRoot "/usr/lib64/apache2"
LoadModule info_module modules/mod_info.so 
```

这是通过以下代码段提供的`/etc/apache2/modules.d/00_mod_info.conf`：

```
<IfDefine INFO>
# Allow remote server configuration reports, with the URL of
# http://servername/server-info
<Location /server-info>
    SetHandler server-info
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Location>
</IfDefine> 
```

（`IfDefine`只是因为在 Gentoo 上设置东西的方式才需要它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:16:27.477

检查是否加载了 info_module。

```
% /usr/local/sbin/httpd -t -D DUMP_MODULES | grep info_module 
```

如果未加载，请在 httpd.conf 中添加以下行。注意`path/to`一定要换成合适的路径。

```
LoadModule info_module path/to/mod_info.so 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T06:15:11.110

我得到了解决方案。

1.  当我检查 ./apachectl -l 时，没有安装 mod_info。

2.  要安装 Mod_info 或任何模块，首先通过 ./configure --enable-info make make install 编译和安装 Apache

    安装模块的更多信息：http: [//publib.boulder.ibm.com/httpserv/manual60/install.html](http://publib.boulder.ibm.com/httpserv/manual60/install.html)

3.  检查 ./apachectl -l，mod_info 会在列表中

4.  通过更新 httpd.conf 启用 server-info

5.  调用 url [http://your.host.dom/server-info](http://your.host.dom/server-info)

一件事我不确定为什么 apache mod_info 没有安装默认安装。

# fxcop - 使用 fxcop dll 传递给 ThreadStart Delegate 的方法类型

> ID：13816562
> 
> 赞同：2
> 
> 时间：2012-12-11T08:47:25.070
> 
> 标签：fxcop

我正在为 FXcop 实现自定义规则 dll。规则如下：“不应该在没有同步的情况下在多线程方法中使用静态字段”。为此，我需要获取生成线程的方法类型。即哪个方法作为参数传递给threadstart委托。**有什么方法可以让我们使用 FxCopSdk.dll 达到同样的效果** ？任何帮助，将不胜感激。

问候， Sriharsha

# java - 如何在使用 Java 读取和处理数据库记录时进行异步消息传递

> ID：13816567
> 
> 赞同：2
> 
> 时间：2012-12-11T08:47:49.687
> 
> 标签：java, eclipse, hibernate, plsql, connection-pooling

在这里，我有线程池和另一个轮询类，用于实现轮询和从数据库中读取消息。现在的问题是我必须避免读取冗余消息以进行更新并同时处理等待的其他消息，因为有大量消息在等待。

```
// the code for poll method
public void poll() throws Exception {
    // Method which defines polling of the data entry for counting its size.
    st = conn.createStatement();
    int count = 1;
    long waitInMillisec = 1 * 60 * 125; // Wait for 7.5 seconds.
    for (int i = 0; i < count; i++) {
        System.out.println("Wait for " + waitInMillisec + " millisec");
        Thread.sleep(waitInMillisec);

        java.util.Date date = new java.util.Date();
        Timestamp start = new Timestamp(date.getTime());
        rs = st.executeQuery("select * from msg_new_to_bde where ACTION=804");
        java.util.Date date1 = new java.util.Date();
        Timestamp end = new Timestamp(date1.getTime());
        System.out.print("Query count: ");
        System.out.println(end.getTime() - start.getTime());

        Collection<KpiMessage> pojoCol = new ArrayList<KpiMessage>();
        while (rs.next()) {
            KpiMessage filedClass = convertRecordsetToPojo(rs);
            pojoCol.add(filedClass);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-16T14:34:36.233

我不知道您是否可以选择消息的存储方式，但它们似乎已插入到您正在轮询的表中。您可以向该表添加一个数据库触发器，然后将一条消息推送到具有相同数据和相关 ID 的 Oracle AQ。

如果您可以不使用该表，我建议您只在相同的模式中定义 Oracle AQ 来存储消息，并使用像 corrid="804%" 这样的模式匹配通过部分相关 id 出列。AQ 消息的完整相关 id 可能是“804”+ 消息的唯一 pk。然后，您可以将同一队列重用于多个操作，并定义一个 Java 队列 804 操作工作程序类来等待该特定操作的消息（AQ 消息上的 804 相关 id 前缀）。

Oracle for AQ 的文档非常好，用于创建队列的包是 dbms_aqadm。用于入队/出队的包是 dbms_aq。在创建 aq 和使用 dbms_aq 包之前，您还需要获得一些 priv/grants。dbms_aq 应该可以很容易地从 Java 中调用。

转至 docs.oracle.com 以查找有关 dbms_aqadm 和 dbms_aq 包的详细信息。一旦你创建了 AQ（这将创建一个支持队列的 AQ 表），我建议你在 corrid 上为 AQ 表添加一个索引以提高性能。

如果您无法避免现有的表架构或不想使用 AQ 技术，您可以使用的另一个选项是在 Oracle（dbms_lock 包）中创建一个锁并在轮询类中调用它来获取锁或阻塞/等待。这样，您可以同步所有轮询类，以避免多个线程接收同一条消息。所以轮询类要做的第一件事就是尝试获取锁，如果成功，它会从表中拉出一条消息，处理它，在处理后更新它，释放锁。dbms_lock 包可以阻塞/等待锁定或立即返回，但根据操作成功/失败，您可以采取进一步的行动。但它会帮助您控制线程接收相同的消息。Oracle 的文档在这个包上也很不错。

# javascript - GWT - 如何编译代码以在 IE10 上工作

> ID：13816568
> 
> 赞同：4
> 
> 时间：2012-12-11T08:47:51.640
> 
> 标签：javascript, html, gwt, internet-explorer-10

GWT 2.5 是否支持 ie10？如果是这样，我应该指定什么代理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T09:27:22.187

GWT 2.5 没有特定于 IE10 的用户代理，即没有针对 IE10 的单独编译排列。

但是，为使用 IE9 而编译的代码也可以在 IE10 中运行。您需要在此处获取有关 IE9 的 GWT 2.5 兼容性的信息 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9](https://developers.google.com/web-toolkit/doc/latest/DevGuideIE9)

**笔记 -**

1) 在 IE9 模式下强制 IE10 - [http://msdn.microsoft.com/en-in/library/ie/hh920756(v=vs.85).aspx](http://msdn.microsoft.com/en-in/library/ie/hh920756(v=vs.85).aspx)

2) 有关[MSDN IE 10 兼容模式](http://msdn.microsoft.com/en-us/library/ie/hh673527%28v=vs.85%29.aspx)的更多信息。

3）[GWT论坛讨论](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/hcLoOL3J4u4)

4) 跟踪 GWT 指导委员会的[讨论](https://groups.google.com/forum/?fromgroups=#!forum/gwt-steering)。

# c# - 当我的 ListBox 中有图像时，为什么会出现 OutOfMemoryException？

> ID：13816569
> 
> 赞同：27
> 
> 时间：2012-12-11T08:47:56.553
> 
> 标签：c#, listbox, out-of-memory, windows-phone-8, photo-gallery

我想在我的自定义库中显示存储在 Windows Phone 8 照片文件夹中的所有图像，该库使用 a`ListBox`来显示图像。

`ListBox`代码如下：

```
 <phone:PhoneApplicationPage.Resources>
        <MyApp:PreviewPictureConverter x:Key="PreviewPictureConverter" />
    </phone:PhoneApplicationPage.Resources>

    <ListBox Name="previewImageListbox" VirtualizingStackPanel.VirtualizationMode="Recycling">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel CleanUpVirtualizedItemEvent="VirtualizingStackPanel_CleanUpVirtualizedItemEvent_1">
                </VirtualizingStackPanel>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Image Source="{Binding Converter={StaticResource PreviewPictureConverter}}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
     </ListBox> 
```

使用以下转换器：

```
public class PreviewPictureConverter : System.Windows.Data.IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        PreviewImageItem c = value as PreviewImageItem;
        if (c == null)
            return null;
        return c.ImageData;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

图像存储在自定义类中：

```
class PreviewImageItem
{
    public Picture _picture = null;
    public BitmapImage _bitmap = null;

    public PreviewImageItem(Picture pic)
    {
        _picture = pic;
    }

    public BitmapImage ImageData 
    {
        get
        {
            System.Diagnostics.Debug.WriteLine("Get picture " + _picture.ToString());
            _bitmap = new BitmapImage();
            Stream data = _picture.GetImage();
            try
            {
                _bitmap.SetSource(data); // Out-of memory exception (see text)
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine("Exception : " + ex.ToString());
            }
            finally
            {
                data.Close();
                data.Dispose();
                data = null;
            }

            return _bitmap;
        }
    }
} 
```

以下代码用于设置`ListBox`数据源：

```
private List<PreviewImageItem> _galleryImages = new List<PreviewImageItem>();

using (MediaLibrary library = new MediaLibrary())
{
    PictureCollection galleryPics = library.Pictures;
    foreach (Picture pic in galleryPics)
    {
        _galleryImages.Add(new PreviewImageItem(pic));
    }

    previewImageListbox.ItemsSource = _galleryImages;
}; 
```

最后是“清理”代码：

```
private void VirtualizingStackPanel_CleanUpVirtualizedItemEvent_1(object sender, CleanUpVirtualizedItemEventArgs e)
{
    PreviewImageItem item = e.Value as PreviewImageItem;

    if (item != null)
    {
        System.Diagnostics.Debug.WriteLine("Cleanup");
        item._bitmap = null;
    }
} 
```

所有这些都可以正常工作，但是代码会`OutOfMemoryException`在几张图像后崩溃（尤其是在快速滚动时）。该方法在滚动`VirtualizingStackPanel_CleanUpVirtualizedItemEvent_1`时被定期调用（例如，每 2 或 3 个列表框条目） 。`ListBox`

这个示例代码有什么问题？

为什么没有释放内存（足够快）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-08T23:30:26.087

哦，我最近花了一整天的时间来完成这项工作！

所以解决方案是：

使您的图像控制免费资源。所以设置

```
BitmapImage bitmapImage = image.Source as BitmapImage;
bitmapImage.UriSource = null;
image.Source = null; 
```

如前所述。

确保在列表的每个项目上虚拟化 _bitmap。您应该按需加载它（LongListSelector.Realized 方法）并且您必须销毁它！它不会自动收集，而且 GC.Collect 也不起作用。空引用也不起作用:(但方法是：制作 1x1 像素文件。将其复制到程序集中并从中制作资源流，以使用 1x1 像素空白处理图像。将自定义处理方法绑定到 LongListSelector.UnRealized 事件（例如。容器处理您的列表项）。

```
public static void DisposeImage(BitmapImage image)
{
    Uri uri= new Uri("oneXone.png", UriKind.Relative);
    StreamResourceInfo sr=Application.GetResourceStream(uri);
    try
    {
        using (Stream stream=sr.Stream)
        {
            image.DecodePixelWidth=1; //This is essential!
            image.SetSource(stream);
        }
    }
    catch { }
} 
```

在 LongListSelector 中为我工作，有 1000 张图像，每张 400 宽。

如果您错过了数据收集的第 2 步，您可以看到良好的结果，但在滚动 100-200 个项目后内存溢出。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-20T01:00:36.327

您刚刚让 Windows Phone 在屏幕上显示用户媒体库“图片”文件夹中的所有图片。这是令人难以置信的内存密集型，考虑到 WP8 应用程序的 150MB 限制，难怪您会遇到 OOM 异常。

您应该考虑添加一些内容：

1) 将列表框项目滚动到视图之外时，将 Source 和 SourceUri 属性设置为 null。请在此处查看 Stefan 文章中的“缓存图像”@ [http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx](http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx)

```
 BitmapImage bitmapImage = image.Source as BitmapImage;
  bitmapImage.UriSource = null;
  image.Source = null; 
```

2) 如果您使用的是 WP8，请确保设置[DecodePixelWidth](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.media.imaging.bitmapimage.decodepixelwidth%28v=vs.105%29.aspx)和/或 DecodePixelHeight。这样，图像将被加载到内存中，永久调整大小，并且只有调整大小的副本存储在内存中。加载到内存中的图像可能比手机本身的屏幕尺寸大得多。因此，将它们裁剪到合适的尺寸并仅存储调整后的图像至关重要。设置 BitmapImage.DecodePixelWidth=480（最大）以帮助解决这个问题。

```
var bmp = new BitmapImage();

// no matter the actual size, 
// this bitmap is decoded to 480 pixels width (aspect ratio preserved)
// and only takes up the memory needed for this size
bmp.DecodePixelWidth = 480;

bmp.UriSource = new Uri(@"Assets\Demo.png", UriKind.Relative);
ImageControl.Source = bmp; 
```

[（来自这里](http://www.silverlightshow.net/items/Windows-Phone-8-Multiple-Screen-Resolutions.aspx)的代码示例）

3) 为什么使用 Picture.GetImage() 而不是[Picture.GetThumbnail](http://msdn.microsoft.com/en-us/library/ff434150.aspx) ()？你真的需要图像占据整个屏幕吗？

4) 如果这是 WP8 专有应用程序，请考虑从 ListBox 移动到 LongListSelector。LLS 的虚拟化比 ListBox 好得多。查看您的代码示例，您只需将 XAML ListBox 元素更改为 LongListSelector 元素就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T19:41:16.897

试试这个方法：[带有自动内存清理的图像下载器](https://stackoverflow.com/questions/19136160/image-downloader-with-auto-cleaning)。此处的示例项目：[https ://simca.codeplex.com/](https://simca.codeplex.com/)

# php - PHPMailer 邮件程序错误：邮件正文为空

> ID：13816571
> 
> 赞同：7
> 
> 时间：2012-12-11T08:48:01.570
> 
> 标签：php, email, phpmailer

我正在尝试获取适用于 PHPMailer 的基本示例。

我所做的只是上传整个 PHPMailer_5.2.2 文件夹，根据你看到的代码配置下面的页面，我不断得到`Mailer Error: Message body empty`，但我可以清楚地看到 content.html 文件中有 html 并且不是空的。这是我在 PHPMailer PHPMailer_5.2.2/examples/test_smtp_gmail_basic.php 中使用的示例文件

我尝试使用 Outlook for Gmail 中有效的设置，我知道我的用户名和密码，SMTP 端口是 587 并且它设置为 TLS，我尝试在下面的代码中用 TLS 替换 SSL，我仍然得到同样的错误。

我还尝试了以下代码，建议使用：

改变了这个：

```
$mail->MsgHTML($body); 
```

对此

```
$mail->body = $body; 
```

我仍然遇到同样的错误，还有其他需要配置的吗？这是我第一次使用 PHPMailer，我可以让标准的 php 邮件正常工作，但我想尝试一下，因为我要发送电子邮件的页面有很多 html，我不想浏览所有的 html并输入字符转义，因此有人推荐使用它。

```
<?php

//error_reporting(E_ALL);
error_reporting(E_STRICT);

date_default_timezone_set('America/Toronto');

require_once('../class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();

$body             = file_get_contents('contents.html');
$body             = preg_replace('/[\]/','',$body);

$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "smtp.gmail.com"; // SMTP server
$mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing)
                                           // 1 = errors and messages
                                           // 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 587;                   // set the SMTP port for the GMAIL server
$mail->Username   = "xxx@gmail.com";  // GMAIL username
$mail->Password   = "xxx";            // GMAIL password

$mail->SetFrom('xxx@gmail.com', 'First Last');

$mail->AddReplyTo("xxx","First Last");

$mail->Subject    = "PHPMailer Test Subject via smtp (Gmail), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$address = "xxx.net";
$mail->AddAddress($address, "John Doe");

//$mail->AddAttachment("images/phpmailer.gif");      // attachment
//$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
}

?> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-09-22T22:42:40.417

我有同样的问题，我解决了只是改变：

这个：

```
$mail->body = 'Hello, this is my message.'; 
```

进入这个：

```
$mail->Body = 'Hello, this is my message.'; 
```

`body`犯了`Body`什么小错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:59:06.910

PHPMailer->MsgHTML() 试图通过修复非绝对 URL 来做一些聪明的事情，但对我来说它也只是返回空。

```
$mail->IsHTML(true);
$mail->Body=$body; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:09:53.260

首先，我必须启用 ssl 扩展，（我从本网站的另一篇文章中获得）。为此，打开 php.ini 并通过更改启用 php_openssl.dll

```
;extension=php_openssl.dll 
```

至

```
extension=php_openssl.dll 
```

现在，启用 tls 并使用端口 587。然后注释掉`preg_replace`.

最后，我能够让它显示在我的 gmail“已发送”文件中，尽管我希望在我的“收件箱”中看到它。

这个网站太棒了！谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-24T17:26:56.890

当设置`$mail->Body`等于变量时，主体为空。当我在身体上系上一根绳子时，一切正常。解决方案是`strval()`包含您的 HTML 代码的变量。

```
$message;//Your HTML message code
$mail->Body = strval($message); 
```

# jquery - 如何在jqplot中渲染json数据

> ID：13816574
> 
> 赞同：1
> 
> 时间：2012-12-11T08:48:06.997
> 
> 标签：jquery, json, jqplot

我正在尝试使用动态 JSON 呈现 jqplot 小部件，但我找不到如何做到这一点。

我看到的唯一示例包括从文件中读取 JSON，但我想使用 JSON 作为字符串，例如：

```
{"oranges":"10","apples":"20","bananas":"6"} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:59:24.323

您问题中的数据不是字符串，而是 javascript 对象文字。

如果你有*橙子、苹果*和*香蕉*，你可能想画一个条形图；您需要从对象中提取标签和值，然后绘制图表：

```
var chart_data = {"oranges":"10", "apples":"20", "bananas":"6"};
var line1 = [];
for (var prop_name in chart_data) {
    line1.push([prop_name, chart_data[prop_name]])
}
// line1 should be [["oranges", 10], ["apples", 20], ["bananas", 6]]

// code snippet from http://www.jqplot.com/tests/rotated-tick-labels.php
// please change it as you need
var plot1 = $.jqplot('chart1', [line1], {
    title: 'Fruits',
    series: [{renderer:$.jqplot.BarRenderer}],
    axesDefaults: {
        tickRenderer: $.jqplot.CanvasAxisTickRenderer 
    },
    axes: {
      xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer
      }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:34:59.193

```
$.getJSON(url,"json").success(function(data) {
var line1 = [];
var content = $.parseJSON( data);
$.each(content, function(index, item) {
        line1.push([item.date, item.value])
});

var plot1 = $.jqplot("chart1",[line1], { ..... 
```

这是一个很好的例子，如何将 json 数据转换为 jqplot 可以使用的数组......

# php - 我的 php 脚本没有使用给定的用户名/密码/主机，而是使用 root@localhost（密码：否）

> ID：13816580
> 
> 赞同：3
> 
> 时间：2012-12-11T08:48:19.460
> 
> 标签：php, mysql, connection

有问题！虽然我发现几乎相似的线程但没有帮助:(

我编写了一个 php 脚本来从我的 MySQL 数据库中获取注册用户的数量。该脚本在我的本地主机中运行良好；它使用给定的用户名、密码和主机名，分别是“root”、“root”和“localhost”，但脚本没有使用给定的用户名/密码/主机，而是使用 root@localhost（密码：否）在实时服务器中。

在 Live 服务器中，我创建了一个 MySQL 用户，设置了不同的密码，主机名当然不是 localhost。我用我新创建的 mysql 用户数据更新了脚本。但是，每当我运行脚本时，我看到脚本仍在使用“root”、“root”和“localhost”！

看一下脚本：

```
 //database connection
    $conn = mysql_connect( "mysql.examplehost.com", "myusername", "mypass" );
$db = mysql_select_db ("regdb",$conn); //Oops, actually it was written this way in the script. I misstyped it previously. now edited as it is in the script.

    //Query to fetch data
$query = mysql_query("SELECT * FROM regd ");            
while ($row = mysql_fetch_array($query)): 
$total_regd = $row['total_regd'];
endwhile;   

echo $total_regd; 
```

-- 有人说要更改默认用户名并传入位于 phpMyAdmin 目录中的 config.ini.php 文件。这会有帮助吗？？我没有尝试这个，因为我的托管服务提供商没有给我访问该目录的权限（因为我使用免费托管来测试脚本）或者我根本没有找到它:(

请帮忙....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T08:50:47.763

前言：MySQL 扩展被标记为已弃用，最好使用 mysqli 或[PDO](http://docs.php.net/pdo)

* * *

尽管您将连接资源存储在 $conn 中，但您并没有在调用 mysql_query() 时使用它，也没有检查 mysql_connect() 的返回值，即如果连接由于某种原因失败 mysql_query()“是免费的" 建立一个新的默认连接。

```
<?php
//database connection
$conn = mysql_connect( "mysql.examplehost.com", "myusername", "mypass" );
if ( !$conn ) {
    die(mysql_error()); // or a more sophisticated error handling....
}

$db = mysql_select_db ("regdb", $conn);
if ( !$db ) {
    die(mysql_error($conn)); // or a more sophisticated error handling....
}

//Query to fetch data
$query = mysql_query("SELECT * FROM regd ", $conn);
if (!$query) {
    die(mysql_error($conn)); // or a more sophisticated error handling....
}

while ( false!=($row=mysql_fetch_array($query)) ): 
    $total_regd = $row['total_regd'];
endwhile;   

echo $total_regd; 
```

* * *

编辑：看起来你只处理一行。
要么将该`echo`行移动到while循环中，要么（如果你真的只想要一条记录）最好在sql语句中这么说并摆脱循环，例如

```
// Query to fetch data
// make it "easier" for the MySQL server by limiting the result set to one record
$query = mysql_query("SELECT * FROM regd LIMIT 1", $conn);
if (!$query) {
    die(mysql_error($conn)); // or a more sophisticated error handling....
}

// fetch data and output
$row=mysql_fetch_array($query);
if ( !$row ) {
    echo 'no record found';
}
else {
    echo htmlspecialchars($row['total_regd']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:53:32.133

首先：

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Not connected : ' . mysql_error());
}

// make foo the current db
$db_selected = mysql_select_db('foo', $link);
if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
} 
```

你的 mysql_error() 是什么？:)

# javascript - Javascript 与 CSS 的集成

> ID：13816584
> 
> 赞同：-2
> 
> 时间：2012-12-11T08:48:41.773
> 
> 标签：javascript, css

我目前正在集成另一个网站提供的这个javascript代码他们给了我这个代码放在我的网站上

```
<object class="gm_ref_rates">
  <param name="size" value="small">
  <param name="metal" value="silver">
  <param name="currency" value="USD">
  <param name="currency_dropdown" value="show">
  <param name="language" value="en">

 </object> 
```

我从 javascript 开始，我不知道如何更改外观 CSS 类不适用于此对象。我应该只将文本放在水平线上任何链接帮助或解释将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:53:51.290

这是一个非常本地化的问题，但来源在这里

[http://www.goldmoney.com/js/gm_ref_rates.js](http://www.goldmoney.com/js/gm_ref_rates.js)

你需要改变

`affiliate_chart`类，但这可能只有在您成为会员后才能改变

[http://www.goldmoney.com/affiliate-charts.html](http://www.goldmoney.com/affiliate-charts.html)

没有办法改变 CSS

# ruby-on-rails - 打印文件内容，包括 ruby on rails 中的换行符？

> ID：13816589
> 
> 赞同：0
> 
> 时间：2012-12-11T08:49:16.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在使用以下代码来读取文件内容。

```
@file_content = String.new
IO.foreach "/path/to/file" 
do |line|
   # Do something with line.
   @file_content << line
end 
```

但是如果我在视图中渲染@file_content，它不会显示换行符。谁能告诉我如何捕获新行字符。

我也用过这个。

```
@file_content = File.read("Path/to/file") 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:54:49.473

HTML“换行符”与您的常规换行符不同。尝试`<br/>`在每行文本之后插入

```
IO.foreach "/path/to/file" do |line|
   @file_content << line
   @file_content << '<br />'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:12:05.583

尝试以下操作：

```
@file_content = String.new
read_file=File.open("Path/to/file").read
read_file.gsub!(/\n?/, "\n")
read_file.each_line do |line|
  print << line
end 
```

# c - Arduino WiServer 继电器控制 - 无法切换继电器

> ID：13816590
> 
> 赞同：0
> 
> 时间：2012-12-11T08:49:25.723
> 
> 标签：c, arduino

我正在根据网络呼叫的结果绘制草图以帮助设置远程开门器。我有一个运行 WiServer 的 BlackWidow Arduino，wifi 工作正常，我可以从我的 URL 获得结果。我只是返回 0 或 1 作为内容。

问题是在我的循环中，relayControlState 总是高，我似乎无法让循环使继电器关闭/打开。

当我只使用一个简单的“blinker”草图时，我可以让继电器正常工作，只有当它与我的服务器获取代码交织在一起时它才不起作用。我错过了什么？代码如下。为什么在 WiServer.getStatus 回调中没有更新 relayControlState？继电器没有足够的汁液来切换吗？

```
 #include <WiServer.h>

    #define WIRELESS_MODE_INFRA 1
    #define WIRELESS_MODE_ADHOC 2

    // Wireless configuration parameters ----------------------------------------
    unsigned char local_ip[]    = {192,168,1,10};   // IP address of WiShield 192.168.1.10
    unsigned char gateway_ip[]  = {192,168,1,1};    // router or gateway IP address
    unsigned char subnet_mask[] = {255,255,255,0};  // subnet mask for the local network
    char ssid[]                 = {"monitored"};    // max 32 bytes

    unsigned char security_type = 3;    // 0 - open; 1 - WEP; 2 - WPA; 3 - WPA2

    // WPA/WPA2 passphrase
    const prog_char security_passphrase[] PROGMEM = {"password"};   // max 64 characters

    // setup the wireless mode
    // infrastructure - connect to AP
    unsigned char wireless_mode = WIRELESS_MODE_INFRA;
    unsigned char ssid_len;
    unsigned char security_passphrase_len;

    // IP Address for macpro.local
    uint8 ip[] = {192,168,1,12};

    // End of wireless configuration parameters ----------------------------------------

    // A request that gets the aggregate status of the build system
    GETrequest getStatus(ip, 80, "macpro.local", "/open-says-me/index.html");

    const int relayPin    = 12;
    int relayControlState = HIGH;

    // Function that sets pin/light states
    // BEWARE: THIS FUNCTION IS CALLED MULTIPLE (2) TIMES PER HTTP REQ
    // Hidden call before/after call that returns payload 0, 1, 2, or null
    void setRelayControlState(char* data, int len) {

    //    Serial.print("=========================\n\nLEN:\n");
    //    Serial.print(len);

        if(len > 0) {

          Serial.print("\nDATA:");
          Serial.print(data[len - 1]);
          Serial.print("\n");
    //      Serial.print("\n\nsetRelayControlState\n\n");

          if(data[len - 1] == '0') {
            relayControlState = LOW;
            Serial.print("SET LOW");
          } 

          if(data[len-1] == '1') {
            relayControlState = HIGH;
            Serial.print("SET HIGH");
          }

        } else {
          relayControlState = LOW;

        }

    }

    void setup() {

      pinMode(relayPin, OUTPUT);
      Serial.begin(57600);

      // Initialize WiServer (we'll pass NULL for the page serving function since we don't need to serve web pages) 
      WiServer.init(NULL);

      // Enable Serial output and ask WiServer to generate log messages (optional)

      WiServer.enableVerboseMode(true);

      // Have the processData function called when data is returned by the server
      getStatus.setReturnFunc(setRelayControlState);
    }

    // Time (in millis) when the data should be retrieved 
    long updateTime = 0;
    void loop(){

      // Check if it's time to get an update
      if (millis() >= updateTime) {

        // Get another update 15s from now
        updateTime += 1000 * 5;

        getStatus.submit();

      }

      // Run WiServer
      WiServer.server_task();

      // turn on light pins based on stored vals
      Serial.print("\nrelayControlState: ");
      Serial.print(relayControlState);
      Serial.print("\n");
      digitalWrite(relayPin, relayControlState);

      delay(10);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:53:53.867

这是最终工作的代码，但它也可能只是加载到 BlackWidow 上的代码行为不一致。我开始切换引脚 - 每次我切换到尝试新引脚时，它都会工作一次，但只有一次，直到我开始重新启动 arduino。似乎它喜欢断电，而不仅仅是重置或上传新代码。仍然有点挑剔，但是一个为特定最后一个字符轮询 URL 的工作示例。如果 1 将引脚设置为高电平 5.5 秒。如果 0 什么都不做。

```
#include <WiServer.h>

// ---------------------------------------------------------------------------------
// Wireless configuration parameters
// ---------------------------------------------------------------------------------
unsigned char local_ip[]    = {192,168,1,10};   // IP address of WiShield 192.168.1.10
unsigned char gateway_ip[]  = {192,168,1,1};    // router or gateway IP address
unsigned char subnet_mask[] = {255,255,255,0};  // subnet mask for the local network
char ssid[]                 = {"monitored"};    // max 32 bytes

// 0 - open; 1 - WEP; 2 - WPA; 3 - WPA2
unsigned char security_type = 3;    

// WPA/WPA2 passphrase
const prog_char security_passphrase[] PROGMEM = {"password"};   // max 64 characters

// WEP 128-bit keys
prog_uchar wep_keys[] PROGMEM = { 
    0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d,   // Key 0
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   // Key 1
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,   // Key 2
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00    // Key 3
};

// setup the wireless mode
// infrastructure - connect to AP
// adhoc - connect to another WiFi device
#define WIRELESS_MODE_INFRA 1
#define WIRELESS_MODE_ADHOC 2
unsigned char wireless_mode = WIRELESS_MODE_INFRA;
unsigned char ssid_len;
unsigned char security_passphrase_len;

// ---------------------------------------------------------------------------------
// GET REQUEST
// ---------------------------------------------------------------------------------

// IP Address for macpro.local
uint8 ip[] = {192,168,1,12};
// The request URL
GETrequest getStatus(ip, 80, "macpro.local", "/open-says-me/index.html");

const int relayPin    = 3;
int relayControlState = LOW;

// ---------------------------------------------------------------------------------
// Callback for WiServer's getStatus
// ---------------------------------------------------------------------------------
void setRelayControlState(char* data, int len) {

    Serial.print("[setRelayControlState] last digit of data: ");
    Serial.println(data[len-1]);

    Serial.print("[setRelayControlState] len: ");
    Serial.println(len);

    if(len > 0 
        && data[len-1] == '1') {

        relayControlState = HIGH;
        Serial.print("\nSET HIGH FOR 5.5s\n");

        digitalWrite(relayPin, HIGH);
        delay(5500);
        digitalWrite(relayPin, LOW);

    }

}

void setup() {

    pinMode(relayPin, OUTPUT);
    Serial.begin(57600);

    // Initialize WiServer (we'll pass NULL for the page serving function since we don't need to serve web pages) 
    WiServer.init(NULL);

    // Enable Serial output and ask WiServer to generate log messages (optional)

    WiServer.enableVerboseMode(true);

    // Have the processData function called when data is returned by the server
    getStatus.setReturnFunc(setRelayControlState);

}

// Time (in millis) when the data should be retrieved 
long updateTime = 0;
void loop(){

    // Check if it's time to get an update
    if (millis() >= updateTime) {
        // Get another update 15s from now
        updateTime += 1000 * 15;
        getStatus.submit();
        Serial.print("end update @ ms ");
        Serial.println(millis());
    }

    WiServer.server_task();
    delay(100);
} 
```

# matlab - 在 MATLAB 中形成簇

> ID：13816591
> 
> 赞同：0
> 
> 时间：2012-12-11T08:49:30.653
> 
> 标签：matlab, image-processing

我正在研究一个切换双边滤波器。在这种情况下，它们形成了像素簇来检测图像中的边缘。他们使用了排序象限中值向量。

代码：

% 簇的形成

```
 if((((m1 < avg) && (m4 < avg))&&((m2 >= avg) && (m3 >= avg))) || (((m2 < avg) && (m3 < avg))&&((m1 >= avg) && (m4 >= avg))))
     p=i+2;
     q=j+2;
     vec=[L(p-2,q) L(p-1,q) L(p+1,q) L(p+2,q)]; % Vertical edge
     dav=double(sum(vec)/4);
     %disp('vertical edge');

 elseif((((m3 < avg) && (m4 < avg))&&((m1 >= avg) && (m2 >= avg))) || (((m1 < avg) && (m2 < avg))&&((m3 >= avg) && (m4 >= avg))))
     p=i+2;
     q=j+2;
     vec=[L(p,q-2) L(p,q-1) L(p,q+1) L(p,q+2)]; % Horizontal edge
     dav=double(sum(vec)/4);
     %disp('horizontal edge');

 elseif((((m1 < avg) && (m3 < avg))&&((m2 >= avg) && (m4 >= avg))) || (((m2 < avg) && (m4 < avg))&&((m1 >= avg) && (m3 >= avg))))
     p=i+2;
     q=j+2;
     vec=[L(p-1,q+1) L(p-1,q-1) L(p+1,q-1) L(p+1,q+1)]; % Diagonal line
     dav=double(sum(vec)/4);
     %disp('diagonal line');

 end 
```

m1,m2,m3 和 m4 是中位数.. 这样进行是否正确？

**请解释这些并建议我一本与 MATLAB 中的图像处理相关的书/指南**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:09:20.060

我在这里假设 m1、m2、m3、m4 取自您之前的一个问题，这意味着它们是 5x5 窗口的 3x3 子窗口的中位数。

也就是说，它们形成这样的矩阵：

```
m1 m2
m4 m3 
```

或在一些类似的配置中。

也就是说，**第一个“if”分支意味着**：如果 m1 和 m4 的中位数都小于平均值并且 m2 和 m3 更大（或者完全相反），则应该有一个从左到右的急剧变化那个特定的 5x5 子窗口。（请记住，中值会过滤掉任何单个峰值，这意味着即使图像有噪声，也不会检测到太多的错误边缘。）至于 vec，

```
vec=[L(p-2,q) L(p-1,q) L(p+1,q) L(p+2,q)]; % Vertical edge 
```

只存储搜索窗口的垂直中点。我认为它不会以这种形式工作，我认为在这里存储边缘索引会更有意义：

```
vec=[[i:i+4]', repmat(j+2, 5, 1)]; 
```

这将是五个边缘点的坐标，假设边缘在当前搜索窗口的中间从上到下移动。（您也可以手动检查。）

“else if”的工作原理类似。

至于图像处理的起点，我可以向您推荐 Gary Bradski 和 Adrian Kaehler 所著的《Learning OpenCV》一书，尽管那不是一本 Matlab 书。如果你没有阅读本书中的 C++ 程序和关于 OpenCV 的详细描述，你仍然会获得相当不错的关于图像处理的一般性综合知识——或者至少你会熟悉主要概念。

至于 Matlab 的细节，我建议您通读有关图像处理工具箱的整个帮助。听起来好像，我认为学习图像处理只有艰难的方法。

# sql - 在 Where 语句中使用合并

> ID：13816594
> 
> 赞同：1
> 
> 时间：2012-12-11T08:49:43.467
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在这里有一个查询，我很好奇是否有更短的方法来编写这个查询，这意味着减少查询使用`IF`参数来确定它是否应该在语句中使用参数。请看下面：

```
 @Param varchar(10) = NULL

 IF @Param IS NOT NULL
   BEGIN
     SELECT * FROM TABLE WHERE Column = @Param
   END
 ELSE
   BEGIN
     SELECT * FROM TABLE
   END 
```

这可以简化为一个简单的查询，而不是像这样吗？

```
 @Param varchar(10) = NULL

 SELECT * FROM TABLE WHERE Column = COALESCE( Any, @Param ) 
```

我看了看`Coalesce`，但没有看到我是否可以使用`Any`某种功能。我希望这是有道理的。

问题是如何实现这一点。第二个问题是哪个性能更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:51:55.890

没有`any`样式命令，但是如果您使用第`@Param`一个，然后是列本身中的值，那应该可以...

```
SELECT * FROM TABLE WHERE Column = COALESCE(@Param, Column) 
```

如果`@Param`为 Null，则忽略它并使用列表中的下一项。

你也可以`IsNull`用来做同样的事情......

```
SELECT * FROM TABLE WHERE Column = ISNULL(@Param, Column) 
```

* * *

要回答问题的第二部分，我的感觉是使用单独的语句总是更有效。精简版的代码可能更少，但不一定更容易理解或运行更快。

# android - 访问 以编程方式获取资源

> ID：13816596
> 
> 赞同：6
> 
> 时间：2012-12-11T08:49:47.903
> 
> 标签：android

是否可以在不引用资源类 R 的情况下以编程方式接收由 a 作为 int[] 保存的资源 ID？

```
<declare-styleable name="com_facebook_login_view">
    <attr name="confirm_logout" format="boolean"/>
    <attr name="fetch_user_info" format="boolean"/>
    <attr name="login_text" format="string"/>
    <attr name="logout_text" format="string"/>
</declare-styleable> 
```

问题是我无法解析已定义的“declare-styleable”属性的 ID - 总是返回 0x00：

```
int id = context.getResources().getIdentifier( "com_facebook_login_view", "declare-styleable", context.getPackageName() ); 
int[] resourceIDs = context.getResources().getIntArray( id ); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T14:05:04.887

`child-<attr>-tags`这是以编程方式为定义的`<declare-styleable>`标签提供资源 ID 的解决方案：

```
/*********************************************************************************
*   Returns the resource-IDs for all attributes specified in the
*   given <declare-styleable>-resource tag as an int array.
*
*   @param  context     The current application context.
*   @param  name        The name of the <declare-styleable>-resource-tag to pick.
*   @return             All resource-IDs of the child-attributes for the given
*                       <declare-styleable>-resource or <code>null</code> if
*                       this tag could not be found or an error occured.
*********************************************************************************/
public static final int[] getResourceDeclareStyleableIntArray( Context context, String name )
{
    try
    {
        //use reflection to access the resource class
        Field[] fields2 = Class.forName( context.getPackageName() + ".R$styleable" ).getFields();

        //browse all fields
        for ( Field f : fields2 )
        {
            //pick matching field
            if ( f.getName().equals( name ) )
            {
                //return as int array
                int[] ret = (int[])f.get( null );
                return ret;
            }
        }
    }
    catch ( Throwable t )
    {
    }

    return null;
} 
```

也许有一天这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-01T23:33:56.150

稍微更有效的解决方案：

```
public static final int[] getResourceDeclareStyleableIntArray(String name) {
        Field[] allFields = R.styleable.class.getFields();
        for (Field field : allFields) {
            if (name.equals(field.getName())) {
                try {
                    return (int[]) field.get(R.styleable.class);
                } catch (IllegalAccessException ignore) {}
            }
        }

        return null;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-15T04:32:14.940

```
public static final int[] getResourceDeclareStyleableIntArray(String name) {
    int[] result = null;
    try {
        result = (int[]) R.styleable.class.getField(name).get(R.styleable.class);
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    return result;
} 
```

# linux - 如何在 Linux 上构建 Mono 应用程序

> ID：13816600
> 
> 赞同：0
> 
> 时间：2012-12-11T08:50:07.903
> 
> 标签：linux, mono

我有 2 个 .cs 文件和一个 .dll 文件。我想在 Debian Linux 上构建一个运行它。我能找到一个关于如何做到这一点的好教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:26:55.340

1.  安装单声道
2.  在终端使用`mcs`编译源文件，就像你在 Windows 上使用 csc 所做的一样， http: [//linux.die.net/man/1/mcs](http://linux.die.net/man/1/mcs)

另一种选择是安装 MonoDevelop 并使用您的文件创建一个新项目。

# android - Android：在特定日期的警报上未调用警报接收器

> ID：13816601
> 
> 赞同：0
> 
> 时间：2012-12-11T08:50:09.987
> 
> 标签：android, alarmmanager, android-alarms

我已经使用 sqlite 数据库实现了多个警报功能。当我测试我的虚拟应用程序时，一切都很好。但是，当我集成到主项目中时，警报仅在每日警报或一次警报时才起作用。当我将它设置为特定日期（例如星期一）时，警报接收器从未调用过，而在虚拟应用程序中同样的事情工作正常。甚至，我尝试为接收器定义动作并设置`android:enabled="true"`和`android:exported="false"`. 但是，它并没有做出任何改变。最糟糕的是没有 logcat 详细信息，我不知道问题出在哪里。

**设置特定日期闹钟的方法**

```
private void setDayWiseAlarm(int checkNo)
{
    Intent AlarmIntent = new Intent("com.dzo.HanumanChalisaWithAudioAndAlarm.RECEIVEALARM");
    int repeatId = checkNo + reqCode;

    Log.v("HCAlarmTimeDetail daywise alarm id", reqCode+" "+checkNo+" "+repeatId);
    AlarmManager AlmMgr = (AlarmManager)getSystemService(Context.ALARM_SERVICE);

    Log.v("HCAlarmTimeDetail checkNo value: ", ""+checkNo);
    Calendar curCalendar = Calendar.getInstance();
    Calendar alarmCalendar = Calendar.getInstance();

    curCalendar.set(Calendar.SECOND, 0);
    curCalendar.set(Calendar.MILLISECOND, 0);           
    alarmCalendar.set(Calendar.SECOND, 0);
    alarmCalendar.set(Calendar.MILLISECOND, 0);

    RepeatAlarmTime repTime = formatTime();
    alarmCalendar.set(Calendar.DAY_OF_WEEK, checkNo);
    alarmCalendar.set(Calendar.HOUR, repTime.hour);
    alarmCalendar.set(Calendar.MINUTE, repTime.min);

    if(alarmCalendar.before(curCalendar))
    {
        alarmCalendar.add(Calendar.WEEK_OF_YEAR, 1);
        Log.v("HCAlarmTimeDetail in if loop", "alarm set for next week");
    }//if

    if(checkNo == 1)
    {
        String daysToRepeat = alarmTimeDaoToEdit.getDaysToRepeatAlarm();
        Log.v("HCAlarmTimeDetail", "1 daysToRepeat before edit "+daysToRepeat);

        if(!daysToRepeat.equals(null))
        {
            if(daysToRepeat.equals(""))
            {
                daysToRepeat = "Sunday";
                Log.v("HCAlarmTimeDetail daysToRepeat sunday if empty", daysToRepeat);
            }//if
            else if(daysToRepeat.equals("Daily") || daysToRepeat.equals("null"))
            {
                daysToRepeat = "Sunday";
                Log.v("HCAlarmTimeDetail daysToRepeat sunday else if daily or null", daysToRepeat);
            }//if
            else
            {
                daysToRepeat = daysToRepeat + " Sunday";
                Log.v("HCAlarmTimeDetail daysToRepeat sunday else not daily", daysToRepeat);
            }//else
            Log.v("AlarmTimeDetail daysToRepeat sunday check", "daysToRepeatNotNull");
        }//if
        alarmTimeDaoToEdit.setSundayRepeatId(Integer.toString(repeatId));
        alarmTimeDaoToEdit.setDaysToRepeatAlarm(daysToRepeat);
        Log.v("HCAlarmTimeDetail", "Alarm set for sunday");
        Log.v("HCAlarmTimeDetail", "1 daysToRepeat after edit "+daysToRepeat);
    }//if

    if(checkNo == 2)
    {
        String daysToRepeat = alarmTimeDaoToEdit.getDaysToRepeatAlarm();
        Log.v("HCAlarmTimeDetail", "2 daysToRepeat before edit "+daysToRepeat);

        if(!daysToRepeat.equals(null))
        {
            if(daysToRepeat.equals(""))
            {
                daysToRepeat = "Monday";
                Log.v("HCAlarmTimeDetail daysToRepeat monday if empty", daysToRepeat);
            }//if
            else if(daysToRepeat.equals("Daily") || daysToRepeat.equals("null"))
            {
                daysToRepeat = "Monday";
                Log.v("HCAlarmTimeDetail daysToRepeat monday else if daily or null", daysToRepeat);
            }//if
            else
            {
                daysToRepeat = daysToRepeat + " Monday";
                Log.v("HCAlarmTimeDetail daysToRepeat monday else not daily", daysToRepeat);
            }//else
            Log.v("AlarmTimeDetail daysToRepeat monday check", "daysToRepeatNotNull");
        }//if
        alarmTimeDaoToEdit.setMondayRepeatId(Integer.toString(repeatId));
        alarmTimeDaoToEdit.setDaysToRepeatAlarm(daysToRepeat);
        Log.v("HCAlarmTimeDetail", "Alarm set for monday");
        Log.v("HCAlarmTimeDetail", "2 daysToRepeat after edit "+daysToRepeat);
    }//if

    if(checkNo == 3)
    {
        String daysToRepeat = alarmTimeDaoToEdit.getDaysToRepeatAlarm();
        Log.v("HCAlarmTimeDetail", "3 daysToRepeat before edit "+daysToRepeat);

        if(!daysToRepeat.equals(null))
        {
            if(daysToRepeat.equals(""))
            {
                daysToRepeat = "Tuesday";
                Log.v("HCAlarmTimeDetail daysToRepeat tuesday if empty", daysToRepeat);
            }//if
            else if(daysToRepeat.equals("Daily") || daysToRepeat.equals("null"))
            {
                daysToRepeat = "Tuesday";
                Log.v("HCAlarmTimeDetail daysToRepeat tuesday else if daily or null", daysToRepeat);
            }//if
            else
            {
                daysToRepeat = daysToRepeat + " Tuesday";
                Log.v("HCAlarmTimeDetail daysToRepeat tuesday else not daily", daysToRepeat);
            }//else
            Log.v("AlarmTimeDetail daysToRepeat tuesday check", "daysToRepeatNotNull");
        }//if
        alarmTimeDaoToEdit.setTuesdayRepeatId(Integer.toString(repeatId));
        alarmTimeDaoToEdit.setDaysToRepeatAlarm(daysToRepeat);
        Log.v("HCAlarmTimeDetail", "Alarm set for tuesday");
        Log.v("HCAlarmTimeDetail", "3 daysToRepeat after edit "+daysToRepeat);
    }//if

    if(checkNo == 4)
    {
        String daysToRepeat = alarmTimeDaoToEdit.getDaysToRepeatAlarm();
        Log.v("HCAlarmTimeDetail", "2 daysToRepeat before edit "+daysToRepeat);

        if(!daysToRepeat.equals(null))
        {
            if(daysToRepeat.equals(""))
            {
                daysToRepeat = "Wednesday";
                Log.v("HCAlarmTimeDetail daysToRepeat wednesday if empty", daysToRepeat);
            }//if
            else if(daysToRepeat.equals("Daily") || daysToRepeat.equals("null"))
            {
                daysToRepeat = "Wednesday";
                Log.v("HCAlarmTimeDetail daysToRepeat wednesday else if daily or null", daysToRepeat);
            }//if
            else
            {
                daysToRepeat = daysToRepeat + " Wednesday";
                Log.v("HCAlarmTimeDetail daysToRepeat wednesday else not daily", daysToRepeat);
            }//else
            Log.v("AlarmTimeDetail daysToRepeat wednesday check", "daysToRepeatNotNull");
        }//if
        alarmTimeDaoToEdit.setWednesdayRepeatId(Integer.toString(repeatId));
        alarmTimeDaoToEdit.setDaysToRepeatAlarm(daysToRepeat);
        Log.v("HCAlarmTimeDetail", "Alarm set for wednesday");
        Log.v("HCAlarmTimeDetail", "4 daysToRepeat after edit "+daysToRepeat);
    }//if

    if(checkNo == 5)
    {
        String daysToRepeat = alarmTimeDaoToEdit.getDaysToRepeatAlarm();
        Log.v("HCAlarmTimeDetail", "5 daysToRepeat before edit "+daysToRepeat);

        if(!daysToRepeat.equals(null))
        {
            if(daysToRepeat.equals(""))
            {
                daysToRepeat = "Thursday";
                Log.v("HCAlarmTimeDetail daysToRepeat thursday if empty", daysToRepeat);
            }//if
            else if(daysToRepeat.equals("Daily") || daysToRepeat.equals("null"))
            {
                daysToRepeat = "Thursday";
                Log.v("HCAlarmTimeDetail daysToRepeat thursday else if daily or null", daysToRepeat);
            }//if
            else
            {
                daysToRepeat = daysToRepeat + " Thursday";
                Log.v("HCAlarmTimeDetail daysToRepeat thursday else not daily", daysToRepeat);
            }//else
            Log.v("AlarmTimeDetail daysToRepeat thursday check", "daysToRepeatNotNull");
        }//if
        alarmTimeDaoToEdit.setThursdayRepeatId(Integer.toString(repeatId));
        alarmTimeDaoToEdit.setDaysToRepeatAlarm(daysToRepeat);
        Log.v("HCAlarmTimeDetail", "Alarm set for thursday");
        Log.v("HCAlarmTimeDetail", "5 daysToRepeat after edit "+daysToRepeat);
    }//if

    if(checkNo == 6)
    {
        String daysToRepeat = alarmTimeDaoToEdit.getDaysToRepeatAlarm();
        Log.v("HCAlarmTimeDetail", "6 daysToRepeat before edit "+daysToRepeat);

        if(!daysToRepeat.equals(null))
        {
            if(daysToRepeat.equals(""))
            {
                daysToRepeat = "Friday";
                Log.v("HCAlarmTimeDetail daysToRepeat friday if empty", daysToRepeat);
            }//if
            else if(daysToRepeat.equals("Daily") || daysToRepeat.equals("null"))
            {
                daysToRepeat = "Friday";
                Log.v("HCAlarmTimeDetail daysToRepeat friday else if daily or null", daysToRepeat);
            }//if
            else
            {
                daysToRepeat = daysToRepeat + " Friday";
                Log.v("HCAlarmTimeDetail daysToRepeat friday else not daily", daysToRepeat);
            }//else
            Log.v("AlarmTimeDetail daysToRepeat friday check", "daysToRepeatNotNull");
        }//if
        alarmTimeDaoToEdit.setFridayRepeatId(Integer.toString(repeatId));
        alarmTimeDaoToEdit.setDaysToRepeatAlarm(daysToRepeat);
        Log.v("HCAlarmTimeDetail", "Alarm set for friday");
        Log.v("HCAlarmTimeDetail", "6 daysToRepeat after edit "+daysToRepeat);
    }//if

    if(checkNo == 7)
    {
        String daysToRepeat = alarmTimeDaoToEdit.getDaysToRepeatAlarm();
        Log.v("HCAlarmTimeDetail", "7 daysToRepeat before edit "+daysToRepeat);

        if(!daysToRepeat.equals(null))
        {
            if(daysToRepeat.equals(""))
            {
                daysToRepeat = "Saturday";
                Log.v("HCAlarmTimeDetail daysToRepeat saturday if empty", daysToRepeat);
            }//if
            else if(daysToRepeat.equals("Daily") || daysToRepeat.equals("null"))
            {
                daysToRepeat = "Saturday";
                Log.v("HCAlarmTimeDetail daysToRepeat saturday else if daily or null", daysToRepeat);
            }//if
            else
            {
                daysToRepeat = daysToRepeat + " Saturday";
                Log.v("HCAlarmTimeDetail daysToRepeat saturday else not daily", daysToRepeat);
            }//else
            Log.v("AlarmTimeDetail daysToRepeat saturday check", "daysToRepeatNotNull");
        }//if
        alarmTimeDaoToEdit.setSaturdayRepeatId(Integer.toString(repeatId));
        alarmTimeDaoToEdit.setDaysToRepeatAlarm(daysToRepeat);
        Log.v("HCAlarmTimeDetail", "Alarm set for saturday");
        Log.v("HCAlarmTimeDetail", "7 daysToRepeat after edit "+daysToRepeat);
    }//if

    if(alarmTimeDaoToEdit.getDaysToRepeatAlarm().equals("Sunday Monday Tuesday Wednesday " +
            "Thursday Friday Saturday"))
    {
        alarmTimeDaoToEdit.setDaysToRepeatAlarm("Daily");
        Log.v("HCAlarmTimeDetail in daywise alarm in if loop", "Alarm set for everyday");
        alarmEnabled = true;
        /*AlarmIntent.putExtra("ALARM_ENABLED", alarmEnabled);
        AlarmIntent.putExtra("REQUEST CODE", reqCode);
        PendingIntent Sender = PendingIntent.getBroadcast(AlarmTimeDetail.this, reqCode
                , AlarmIntent, 0);
        AlmMgr.setRepeating(AlarmManager.RTC_WAKEUP, alarmCalendar.getTimeInMillis(), 
                24 * 60 * 60 * 1000, Sender);*/
        dismissAlarm(1);
        dismissAlarm(2);
        dismissAlarm(3);
        dismissAlarm(4);
        dismissAlarm(5);
        dismissAlarm(6);
        dismissAlarm(7);
        setDailyAlarm();
    }//if
    else
    {
        alarmEnabled = true;
        AlarmIntent.putExtra("ALARM_ENABLED", alarmEnabled);
        AlarmIntent.putExtra("REQUEST CODE", repeatId);
        alarmDBHelper.updateAlarmTime(alarmTimeDaoToEdit);
        PendingIntent Sender = PendingIntent.getBroadcast(getApplicationContext(), repeatId
                , AlarmIntent, 0);
        AlmMgr.setRepeating(AlarmManager.RTC_WAKEUP, alarmCalendar.getTimeInMillis(), 
                AlarmManager.INTERVAL_DAY * 7, Sender);
        Log.v("HCAlarmTimeDetail in daywise alarm in else loop", "Alarm set daywise");
    }//else
    //Build the Strings for displaying the alarm time through Toast
    String CalendarHourStr;
    if (repTime.hour > 12) 
    {
        CalendarHourStr = Integer.toString(repTime.hour - 12);
    }//if 
    else 
    {
        CalendarHourStr = Integer.toString(repTime.hour);
    }//else

    String CalendarMinStr = Integer.toString(repTime.min);
    if (repTime.min < 10) 
    {
        CalendarMinStr = "0" + CalendarMinStr;
    }//if

    if (repTime.hour < 12) 
    {
        strAmPm = "AM";
    }//if
    else 
    {
        strAmPm = "PM";
    }//else

    String alarmTime = CalendarHourStr + ":" + CalendarMinStr + " " + strAmPm;
    //alarmEnabled = true;
    Log.v("HCAlarmTimeDetail: ", alarmTime+" on day "+checkNo);
}//setDayAlarm 
```

**报警接收器**

```
public class AlarmReceiver extends BroadcastReceiver
{
AlarmDBHelper alarmHelper;
List<AlarmTimeDAO> mAlarmList;
int mAlarmHour = 0, mAlarmMin = 0;
boolean alarmEnabled;

@Override
public void onReceive(Context context, Intent intent) 
{ 
    alarmHelper = new AlarmDBHelper(context);
    mAlarmList = alarmHelper.getAllAlarmTimeResults();
    alarmEnabled = intent.getBooleanExtra("ALARM_ENABLED", false);
    //snoozed = intent.getBooleanExtra("ALARM_SNOOZED", false);
    //Log.v("MultipleAlarmReceiver snoozed value", ""+snoozed);
    if((mAlarmList == null) || (mAlarmList.size() == 0))
    {
        Log.v("AlarmReceiver onReceiver", "no data found");
    }//if
    else
    {
        Calendar calendar = Calendar.getInstance();
        int day = calendar.get(Calendar.DAY_OF_WEEK);
        String today = null;
        if (day == 2) 
        {
            today = "Monday";
        }//if
        else if (day == 3) 
        {
            today = "Tuesday";
        }//else if
        else if (day == 4) 
        {
            today = "Wednesday";
        }//else if
        else if (day == 5) 
        {
            today = "Thursday";
        }//else if
        else if (day == 6) 
        {
            today = "Friday";
        }//else if
        else if (day == 7) 
        {
            today = "Saturday";
        }//else if
        else if (day == 1) 
        {
            today = "Sunday";
        }//else if
        Log.v("Alarmreceiver", "Today is:- " + today);

        int system_hour = Calendar.getInstance().get(Calendar.HOUR_OF_DAY);
        int system_minute = Calendar.getInstance().get(Calendar.MINUTE);
        Log.v("Current Time: ", system_hour+":"+system_minute);
        for(int i = 0; i < mAlarmList.size(); i++)
        {
            AlarmTimeDAO alarmDAO = mAlarmList.get(i);
            String delimiter = ":";
            String alarmTime = alarmDAO.getAlarmTime();
            String daysToRepeatAlarm = alarmDAO.getDaysToRepeatAlarm();
            String[] editTimeArray = alarmTime.split(delimiter);

            for(int j=0; j < editTimeArray.length; j++)
            {
                String timeData = editTimeArray[j];
                Log.v("AlarmReceiver alarm time", timeData);
            }//for

            SimpleDateFormat sdf = new SimpleDateFormat("hh:mm a");
            Date date = null;
            try 
            {
                date = sdf.parse(alarmTime);
            }//try 
            catch (ParseException e) 
            {
                e.printStackTrace();
            }//catch

            final Calendar mCalendar = Calendar.getInstance();
            mCalendar.setTime(date);

            if(alarmTime.contains("AM"))
            {
                mAlarmHour = mCalendar.get(Calendar.HOUR);
                mAlarmMin = mCalendar.get(Calendar.MINUTE);
                Log.v("AlarmReceiver if AM", "time contains AM");
            }//if
            else if(alarmTime.contains("PM"))
            {
                mAlarmHour = mCalendar.get(Calendar.HOUR)+12;
                mAlarmMin = mCalendar.get(Calendar.MINUTE);
                Log.v("AlarmReceiver else PM", "time contains PM");
            }//else

            String daoAlarmTime = mAlarmHour+":"+mAlarmMin;
            Log.v("AlarmReceiver",daoAlarmTime);
            if(daoAlarmTime.equals(system_hour+":"+system_minute) 
                    && (daysToRepeatAlarm.equals("") || daysToRepeatAlarm.equals("null")))
            {
                Log.v("HCAlarmReceiver matched", "one day alarm");
                Intent in = new Intent(Intent.ACTION_MAIN);
                in.setClass(context, SnoozeActivity.class);
                int reqCode = intent.getIntExtra("REQUEST CODE", 0);
                Log.v("HCAlarmReceiver RequestCode", ""+reqCode);
                in.putExtra("REQUEST CODE", intent.getIntExtra("REQUEST CODE", 0));
                in.putExtra("ALARM_ENABLED", alarmEnabled);
                in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                context.startActivity(in);
            }//if
            else if(daoAlarmTime.equals(system_hour+":"+system_minute) 
                    && daysToRepeatAlarm.equals("Daily"))
            {
                Log.v("HCAlarmReceiver matched", "daily alarm");
                Intent in = new Intent(Intent.ACTION_MAIN);
                in.setClass(context, SnoozeActivity.class);
                int reqCode = intent.getIntExtra("REQUEST CODE", 0);
                Log.v("HCAlarmReceiver RequestCode", ""+reqCode);
                in.putExtra("REQUEST CODE", intent.getIntExtra("REQUEST CODE", 0));
                in.putExtra("ALARM_ENABLED", alarmEnabled);
                in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(in);
            }//if
            else if(daoAlarmTime.equals(system_hour+":"+system_minute)
                    && daysToRepeatAlarm.contains(today))
            {
                Log.v("HCAlarmReceiver matched", "weekday alarm");
                Intent in = new Intent(Intent.ACTION_MAIN);
                in.setClass(context, SnoozeActivity.class);
                Log.v("HCAlarmReceiver RequestCode", ""+intent.getIntExtra("REQUEST CODE", 0));
                in.putExtra("REQUEST CODE", intent.getIntExtra("REQUEST CODE", 0));
                in.putExtra("ALARM_ENABLED", alarmEnabled);
                in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(in);
            }//else if
            else
            {
                Log.v("AlarmReceiver not matched", "no alarm matched");
            }//else
        }//for
    }//else
    if(SnoozeActivity.snoozed)
    {
        Log.v("HCAlarmReceiver matched", "snoozed alarm");
        Intent in = new Intent(Intent.ACTION_MAIN);
        in.setClass(context, SnoozeActivity.class);
        in.putExtra("ALARM_SNOOZED", SnoozeActivity.snoozed);
        in.putExtra("ALARM_ENABLED", alarmEnabled);
        Log.v("HCAlarmReceiver RequestCode", ""+intent.getIntExtra("REQUEST CODE", 0));
        in.putExtra("REQUEST CODE", intent.getIntExtra("REQUEST CODE", 0));
        in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(in);
    }//else
}//onReceive
}//AlarmReceiver 
```

**安卓清单**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.dzo.HanumanChalisaWithAudioAndAlarm"
android:versionCode="4"
android:versionName="1.3.0"
android:installLocation="auto" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/>
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.WRITE_CONTACTS"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<uses-feature android:name="android.hardware.telephony" android:required="false"/>
<supports-screens 
    android:largeScreens="true"
    android:normalScreens="true" 
    android:smallScreens="true"
    android:anyDensity="true" />

<application 
    android:icon="@drawable/icon" 
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">

    <activity 
        android:name=".SplashActivity"
        android:screenOrientation="portrait" 
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name=".StartManualActivity" 
        android:screenOrientation="portrait"/>
    <activity 
        android:name=".English" 
        android:screenOrientation="portrait"/>
    <activity 
        android:name=".About" 
        android:screenOrientation="portrait" />
    <activity 
        android:name=".HanuAlarm" 
        android:screenOrientation="portrait" />
    <activity 
        android:name=".SnoozeActivity" 
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Translucent"/>
    <activity 
        android:name=".MultipleAlarmActivity" 
        android:screenOrientation="portrait"/>
    <activity 
        android:name=".SetAlarmActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Translucent.NoTitleBar"/>
    <activity 
        android:name=".AlarmTimeDetail"
        android:screenOrientation="portrait"/>
    <receiver
        android:name=".receiver.AlarmReceiver"
        android:enabled="true"
        android:exported="false">
        <intent-filter>
            <action android:name="com.dzo.HanumanChalisaWithAudioAndAlarm.RECEIVEALARM"/>
        </intent-filter>
    </receiver>
    <receiver 
        android:name=".receiver.BootCompleteReceiver"
        android:enabled="true"
        android:exported="false">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
    <service 
        android:enabled="true"
        android:name=".ChalisaService"></service>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:28:28.170

您可能需要在重新启动时再次设置计时器...可能是您的虚拟应用程序您没有使用任务杀手测试它或重新启动...

注册重新启动事件并再次设置计时器。

# android - Classnot 在处理 android admob Banner 时发现异常

> ID：13816604
> 
> 赞同：0
> 
> 时间：2012-12-11T08:50:14.787
> 
> 标签：android, admob, classnotfoundexception

我在 LogCat 中遇到了这个非常烦人的错误

```
12-11 13:40:53.178: E/AndroidRuntime(4483): FATAL EXCEPTION: main
12-11 13:40:53.178: E/AndroidRuntime(4483): java.lang.RuntimeException: Unable to resume activity {com.vahzay.android.smstrove/com.vahzay.android.smstrove.ListMessages}: android.view.InflateException: Binary XML file line #8: Error inflating class com.google.ads.AdView
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2491)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2519)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2033)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1179)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.os.Looper.loop(Looper.java:137)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.ActivityThread.main(ActivityThread.java:4508)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at java.lang.reflect.Method.invokeNative(Native Method)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at java.lang.reflect.Method.invoke(Method.java:511)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at dalvik.system.NativeStart.main(Native Method)
12-11 13:40:53.178: E/AndroidRuntime(4483): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class com.google.ads.AdView
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:693)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:741)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.view.LayoutInflater.inflate(LayoutInflater.java:491)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.view.LayoutInflater.inflate(LayoutInflater.java:397)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.view.LayoutInflater.inflate(LayoutInflater.java:353)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:252)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.Activity.setContentView(Activity.java:1837)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at com.vahzay.android.smstrove.ListMessages.onResume(ListMessages.java:650)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1159)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.Activity.performResume(Activity.java:4553)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2481)
12-11 13:40:53.178: E/AndroidRuntime(4483):     ... 12 more
12-11 13:40:53.178: E/AndroidRuntime(4483): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView
12-11 13:40:53.178: E/AndroidRuntime(4483):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.view.LayoutInflater.createView(LayoutInflater.java:554)
12-11 13:40:53.178: E/AndroidRuntime(4483):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:682)
12-11 13:40:53.178: E/AndroidRuntime(4483):     ... 22 more 
```

我已经包含了 admob-sdk-android.jar`order and import`从

```
properties-->android-->java Build Path. 
```

在我的应用程序中添加添加需要处理其他事情吗？我的 XML 文件有以下代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000" >

<com.google.ads.AdView 
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adUnitId="xxxx"
    ads:adSize="BANNER"
    ads:testDevices="TEST_EMULATOR"
    ads:loadAdOnCreate="true"/> ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:09:49.930

我可以通过在我的 project/libs 文件夹中添加 GoogleAdMobAdsSdk.jar 来解决问题。

# python - 如何在安装程序中安装安装了 PyPi 的 Ubuntu 软件包？

> ID：13816605
> 
> 赞同：1
> 
> 时间：2012-12-11T08:50:14.973
> 
> 标签：python, setuptools

我刚刚用 setuptool 制作了一个 Python 包，但是我遇到了一个问题，如果我从 Ubuntu 存储库中预安装所有东西，它的工作，但是当我使用 PyPi 时，安装失败，因为在 PyPi 上只包含源并且它必须是编译，所以安装过程中有很多错误源。在安装包期间如何安装 Ubuntu 包？我的想法是[subprocess](http://docs.python.org/2/library/subprocess.html)，有没有更好的方法？

**已编辑**

错误信息

```
Reading http://pypi.python.org/simple/enable/
Reading http://code.enthought.com/projects/enable
Best match: enable 4.2.0
Downloading http://www.enthought.com/repo/ets/enable-4.2.0.tar.gz
Processing enable-4.2.0.tar.gz
Writing /tmp/easy_install-wuMg8s/enable-4.2.0/setup.cfg
Running enable-4.2.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-wuMg8s/enable-4.2.0/egg-dist-tmp-LbjqHY
/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:548: UserWarning: Specified path /usr/local/include/python2.7 is invalid.
  warnings.warn('Specified path %s is invalid.' % d)
/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:548: UserWarning: Specified path  is invalid.
  warnings.warn('Specified path %s is invalid.' % d)
Warning: distutils distribution has been initialized, it may be too late to add a library freetype2_srcWarning: distutils distribution has been initialized, it may be too late to add a library agg24_srcWarning: distutils distribution has been initialized, it may be too late to add a library kiva_srcWarning: distutils distribution has been initialized, it may be too late to add an extension _agg/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:548: UserWarning: Specified path /usr/X11R6/lib is invalid.
  warnings.warn('Specified path %s is invalid.' % d)
/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:548: UserWarning: Specified path /usr/X11/lib is invalid.
  warnings.warn('Specified path %s is invalid.' % d)
/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:548: UserWarning: Specified path /usr/X11R6/include is invalid.
  warnings.warn('Specified path %s is invalid.' % d)
/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:548: UserWarning: Specified path /usr/X11/include is invalid.
  warnings.warn('Specified path %s is invalid.' % d)
error: X11 libraries not found. 
```

设置脚本：

```
from setuptools import setup

setup( 
    name = 'SomeName',
    version = '0.1',
    packages = ['src'],
    author = 'Some Author',
    maintainer = 'Some',
    maintainer_email = 'some@email.com',
    description = '',
    url = 'www.some.com',
    install_requires = ['envisage >= 4.0',
                        'pyface >= 4.0',
                        'apptools >= 4.0',
                        'chaco >= 4.0',
                        'traits >= 4.0',
                        'traitsui >= 4.0',
                        'mysql-connector-python >= 1.0',
                        'pysnmp >= 4.2',
                        'pyasn1 >= 0.1.4',
                        'M2Crypto >= 0.21.1',
                        'netifaces >= 0.7'

                        ],
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:27:11.067

从 apt 存储库安装下载的二进制文件已经使用所需的系统库构建。如果没有，apt 管理器会确保所有系统库也已安装。使用 setuptools（pip 或 easy_install）安装仅获取*python*要求；而不是构建/系统要求。

在您的情况下，错误是`error: X11 libraries not found.` 这意味着 X11 的构建标头在您的系统中不可用。解决这个问题的一个简单方法是告诉 apt 只下载和安装你的包的依赖项（而不是包本身）。这将确保当您使用 pip 或 easy_install 时，Python 会找到它需要的一切。

例如，`psycopg2`是 Postgresql 的 Python 库。要构建它，您需要 postgresql 支持库（头文件和文件）。这些在 PyPi 中不可用。debian 软件包`python-psycopg2`将正确安装所有外部要求。现在，如果我想在虚拟环境中安装 psycopg2，我首先需要确保我的系统具有构建包的所有外部要求，因此我运行以下命令：

`sudo apt-get build-dep python-pyscopg2`

这只会安装依赖项（所有支持的标头），以便我以后可以手动安装它。

在您的情况下，您应该运行`apt-get build-dep python-enable`，它将获取所需的所有内容：

```
# apt-get build-dep python-enable
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  cdbs libblas3gf libdrm-intel1 libdrm-radeon1 libdrm2 libfreetype6-dev
  libgl1-mesa-dev libgl1-mesa-dri libgl1-mesa-glx libglu1-mesa
  libglu1-mesa-dev liblapack3gf libpaper-utils libpaper1 libpthread-stubs0
  libpthread-stubs0-dev libx11-dev libxau-dev libxcb1-dev libxdamage1
  libxdmcp-dev libxfixes3 libxslt1.1 libxxf86vm1 mesa-common-dev
  python-chardet python-docutils python-lxml python-numpy python-pygments
  python-pyrex python-roman python-setupdocs python-sphinx swig x11-common
  x11proto-core-dev x11proto-input-dev x11proto-kb-dev xtrans-dev
0 upgraded, 40 newly installed, 0 to remove and 0 not upgraded.
Need to get 35.5 MB of archives.
After this operation, 97.3 MB of additional disk space will be used. 
```

一旦安装了所有这些库，您的 pypi 包将正确安装。

PyPi 仅适用于 Python 包（以及这些包的特定于 Python 的依赖项）。对于任何外部要求；您需要在安装文档中指定它们或让它们在系统上可用，以便安装过程能够成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:23:12.330

Try using this modified script:

```
from setuptools import setup

setup( 
    name = 'SomeName',
    version = '0.1',
    packages=find_packages(),
    author = 'Some Author',
    maintainer = 'Some',
    maintainer_email = 'some@email.com',
    description = '',
    url = 'www.some.com',
    install_requires = ['envisage',
                        'pyface',
                        'apptools',
                        'chaco',
                        'traits',
                        'traitsui',
                        'mysql-connector-python',
                        'pysnmp4',
                        'pyasn1',
                        'm2crypto',
                        'netifaces'

                        ],
 ) 
```

# javascript - 替换字符串 Jquery

> ID：13816606
> 
> 赞同：2
> 
> 时间：2012-12-11T08:50:23.070
> 
> 标签：javascript, jquery

我正在做以下事情来替换字符串的某些部分。我想替换所有三个出现的字符串，但它不起作用。

```
 var  hdnval = document.getElementById("hdnColgval").value = response;
$("#ddcolgs").val($("#ddcolgs").val().replace(/'+hdnval+'/g, response)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:53:02.877

您正在尝试将字符串附加到`regex`会导致错误的 a 。如果您只是替换字符串，请尝试以下操作：

```
var hdnval = document.getElementById("hdnColgval").value = response;
$("#ddcolgs").val($("#ddcolgs").val().replace(hdnval, response)); 
```

如果 的值`#hdnColgval`应该是正则表达式，请使用：

```
var hdnval = document.getElementById("hdnColgval").value = response;
var regex = new Regex(hdnval, 'g');
$("#ddcolgs").val($("#ddcolgs").val().replace(regex, response)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:52:55.830

您不能以这种方式从变量创建正则表达式..尝试：

```
.replace(new RegExp(hdnval, 'g'), response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:53:43.483

要在正则表达式中使用您的变量，请使用新的 Regexp 方法：

```
var  hdnval = document.getElementById("hdnColgval").value,
         re = new RegExp(hdnval, "g");

$("#ddcolgs").val(function(i,v) {
   return v.replace(re, response);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T08:55:15.510

Your implementation is almost correct, jssut remove the quotes. You don't need them

```
var  hdnval = document.getElementById("hdnColgval").value = response;
$("#ddcolgs").val($("#ddcolgs").val().replace(/hdnval/g, response)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T08:57:18.953

```
$("#ddcolgs").val(function(i, val) {
    return val.replace(RegExp(hdnval,'g'), response);
} 
```

# javascript - JSTL c 标签未在 JavaScript 中嵌入的 JSP 代码中处理

> ID：13816608
> 
> 赞同：1
> 
> 时间：2012-12-11T08:50:24.067
> 
> 标签：javascript, jsp, jstl, jsp-tags

我们在 JSP 页面中使用 JSTL 标记。该项目在我们之前的服务器配置中运行良好。现在，服务器已迁移到较新的版本。现在，所有`c`标记都在 JSP 代码中正确处理。但是`c`JavaScript 里面的标签并没有被处理，标签是按原样发送给我们的客户端的。以下代码有什么问题？

```
<script type="text/javascript">
// String Export for JS Files
var langSectionViewState = new Array();
 <c:forEach var="message" items="${messages}">
    <c:set var="langId" value="${message['langId']}"/>
    langSectionViewState["${langId}"] = ${message['bShow']};
 </c:forEach>
</script> 
```

`c`当它们在 JSP 代码中时，相同的标记会被处理并正常工作。`c`里面的标签`<script></script>`不被处理。解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T07:28:38.653

如下使用它...

```
<script type="text/javascript">
// String Export for JS Files
var langSectionViewState = new Array();
</script>

<c:forEach var="message" items="${messages}">`enter code here`
    <c:set var="langId" value="${message['langId']}"/>
<script type="text/javascript">
    langSectionViewState["${langId}"] = ${message['bShow']};
</script>
 </c:forEach> 
```

# serial-port - 使用 Arduino 光传感器值在处理上跳转视频

> ID：13816609
> 
> 赞同：1
> 
> 时间：2012-12-11T08:50:24.030
> 
> 标签：serial-port, arduino, processing, sensors

我的项目是创建一个带有两个传感器的机器人 Arduino 花：光和压力，根据这两个传感器中的值打开和关闭，同时根据这些值通过处理播放不同的视频。

我一直很难从 Arduino 中的模拟传感器传递值来处理。这是我到目前为止所拥有的：

阿杜诺

```
#include <Servo.h> 

Servo myservo;
int pressure = 0;
int light = 1;
int pre;
int val;

void setup()
{
    Serial.begin(9600);
    myservo.attach(2);
}

void loop() {
    pre = analogRead(pressure);
    pre = map(pre, 918, 1023, 255, 0);

    val = analogRead(light);
    val = map(val, 0, 255, 0, 127);
    Serial.print(val, DEC);
    /*if (val>50) {
        Serial.print(1);
    }
    else {
        Serial.print(0);
    }*/

    myservo.write(val);
} 
```

加工

```
import processing.video.*;
import processing.serial.*; //arduino
Serial myPort;  // Create object from Serial class
int val;

Movie movie;

void setup() {
  String portName = Serial.list()[0];
  myPort = new Serial(this, portName, 9600);
  size(640, 360);
  background(0);
  movie = new Movie(this, "transit.mov");
  movie.loop();

}

void movieEvent(Movie m) {
  m.read();
}

void draw() {
  val = myPort.read();
  println(val);
  //if (movie.available() == true) {
  //  movie.read(); 
  //}
  image(movie, 0, 0, width, height);
  if (val==49) {
    movie.jump(1);
  }
} 
```

现在我只是想让视频对光传感器做出反应，但还没有成功。我从处理读数中得到的只是 48。电机对传感器的反应很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:31:56.877

你从这样一个更简单的处理草图中得到什么输出？你期望什么输出？

```
import processing.serial.*;

Serial myPort;  // The serial port

void setup() {
  // List all the available serial ports
  println(Serial.list());
  // Open the port you are using at the rate you want:
  myPort = new Serial(this, Serial.list()[0], 9600);
}

void draw() {
  while (myPort.available() > 0) {
    int inByte = myPort.read();
    println(inByte);
  }
} 
```

另外，为什么您的 Arduino 代码中的 map 函数`pre = map(pre, 918, 1023, 255, 0);`分别使用 250 和 0 作为您的下限和上限？这似乎倒退了。不应该读`pre = map(pre, 918, 1023, 0, 255);`吗？

# objective-c - 如何使用导航栏打开模式？

> ID：13816610
> 
> 赞同：0
> 
> 时间：2012-12-11T08:50:44.660
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 开发一个 iOS 应用程序。我正在打开一个模态，在这个模态中我想使用一个视图控制器，但也是一个导航控制器，它应该是 rootViewController（对吗？）。

这里是控制器还是导航控制器的根视图？

*这是我的代码：*

```
controller = DetailsController.alloc.init

appsNavController = UINavigationController.alloc.initWithRootViewController(controller)

self.presentModalViewController(appsNavController, animated:true) 
```

*我收到了这个消息，不知道它是否相关*

```
Application windows are expected to have a root view controller at the end of application launch 
```

*我在应用程序委托中有一个 rootview 控制器*

```
window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)
window.makeKeyAndVisible
window.rootViewController = tabBarController 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:57:40.187

问题是您在`window.makeKeyAndVisible` 没有 rootviewcontroller 时调用。换线

```
window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)
window.rootViewController = tabBarController
window.makeKeyAndVisible 
```

这可能会有所帮助。

并确保您已分配`tabBarController`有效`viewControllers`的 .

# java - 如何防止 cxf 日志记录？

> ID：13816612
> 
> 赞同：1
> 
> 时间：2012-12-11T08:51:00.580
> 
> 标签：java, jakarta-ee, cxf

我想禁用`org.apache.cxf.interceptor.Fault`. 所以我发现我必须创建一个`/META-INF/cxf`包含 file的文件夹`org.apache.cxf.Logger`。

但是我必须在其中放什么才能将 cxf 日志记录级别设置为 NONE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:06:08.710

您可能需要在`cxf`配置`xml`文件中注释下面的代码。

```
 <cxf:bus>
        <cxf:features>
            <cxf:logging/>
        </cxf:features>
    </cxf:bus> 
```

# mongodb - Mongodb查询带有链接ID的文档

> ID：13816615
> 
> 赞同：1
> 
> 时间：2012-12-11T08:51:06.127
> 
> 标签：mongodb, pymongo

我有一个文档，其中嵌入了来自不同集合的另一个文档的 id。

我想要的结果是返回（我正在使用 python 和 pymongo）第一个集合的所有字段，以及嵌入文档中的所有朋友。

我知道 mongo 不做连接，我知道我需要做两个查询。我也不想复制我的数据。

我的问题是如何在 python/pymongo 中将这两个查询拼凑在一起，所以我有一个结果，其中包含两个文档中的所有字段。

这是我的数据的样子：

**db.employees**

```
{_id: ObjectId("4d85c7039ab0fd70a117d733"), name: 'Joe Smith', title: 'junior',
manager: ObjectId("4d85c7039ab0fd70a117d730") } 
```

**db.managers**

```
{_id: ObjectId("ObjectId("4d85c7039ab0fd70a117d730"), name: 'Jane Doe', title: 'senior manager'} 
```

**期望的结果**

```
x = {_id: ObjectId("4d85c7039ab0fd70a117d733"), name: 'Joe Smith', title: 'junior',
    manager: 'Jane Doe' } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:20:28.100

如果它有效，它应该是这样的：

```
db.managers.find({
  '_id' => db->employees->find({ ('_id' : 1),
        ('_id': ObjectId("4d85c7039ab0fd70a117d733") }))
}) 
```

更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:30:32.733

你基本上做了一些 Mongo 不支持开箱即用的事情，实际上比单独使用这两个记录更痛苦。

基本上（在伪/JS代码中，因为我不是Python程序员）：

```
var emp = db.employees.find({ name: 'Joe Smith' });
var mang = db.managers.find({ _id: emp._id }); 
```

你有它，你有两个单独的记录。您不能像@slownage 显示的那样链接并获得合并的结果或任何结果，因为 MongoDB 从一个 qauery 实际上会返回一个字典而不是该字段的值，即使您只指定一个要返回的字段也是如此。

因此，这确实是唯一的解决方案，将两者分开，然后对其进行处理。

### 编辑

您可以在这里使用 DBRef，但这与这样做几乎相同，唯一的区别是它是一个帮助器，可以将它放入您自己的模型中，而不是自己做。

# actionscript-3 - 在 flex 中嵌入来自 swf 文件的图像

> ID：13816617
> 
> 赞同：0
> 
> 时间：2012-12-11T08:51:08.120
> 
> 标签：actionscript-3, apache-flex, flash-cs5, flex4.6

如何在 Flash 中创建矢量图像 swf 文件，以及如何使用 swf 文件在 flex 中获取图像。

请有人帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:08:51.000

如果我理解正确，您有一个在 Flash CS6（或类似）中创建的 swf 文件，您希望在 flex 项目中使用它。这个对吗？

如果是，那么您将使用 swfloader 在 flex 应用程序中加载您的 swf 文件。

例子：

```
<fx:Script>
<![CDATA[
import mx.managers.CursorManager;
[Bindable]
public var loadModHome:String = "assets/flashFiles/home_trusted.swf"; 

protected function analyticsBtn_clickHandler(event:MouseEvent):void
{   
loadModHome="assets/flashFiles/home_trusted.swf";   
}

protected function integratedBtn_clickHandler(event:MouseEvent):void
{
loadModHome="assets/flashFiles/home_integrated.swf";    
}

]]>
</fx:Script> 
```

然后在您的组件/应用程序/模块等中放置 swfloader 标记并根据需要填写。在这里，我将源绑定到一个名为“loadModHome”的变量，这使得 swfloader 动态化，因为我可以为我的变量分配一个新值并让它卸载和加载不同的 swf 文件。我通过使用两个按钮的单击事件来做到这一点，这允许我动态切换 swf 文件

```
<mx:LinkButton id="analyticsBtn"  label="Trusted Analytics" textDecoration="underline"
color="blue" click="analyticsBtn_clickHandler(event)"/>
<mx:LinkButton id="integratedBtn" label="Integrated Billing" textDecoration="underline"
color="blue" click="integratedBtn_clickHandler(event)"/>

<s:SWFLoader id="homeMainSL" x="127" y="10" width="600" height="800" 
source="{loadModHome}" click="homeMainSL_clickHandler(event)" 
useHandCursor="true" buttonMode="true"/> 
```

要查看工作示例，请查看[http://www.myfirerules.net](http://www.myfirerules.net)。该网站正在进行中。主页有 as:SWFLoader 标签来加载 Flash 创建的 swf 文件，其他页面使用 as:ModuleLoader 标签来加载 flex 创建的 swf 文件。

希望这可以帮助

吉姆

# css - joomla 中的活动课程链接

> ID：13816618
> 
> 赞同：1
> 
> 时间：2012-12-11T08:51:13.953
> 
> 标签：css, joomla

嗨，我正在尝试在这里创建一个 joomla 站点，只有一个问题我似乎无法弄清楚。我的活动链接的颜色没有改变，它有一个图像和一个颜色，图像应该是正确的，但是颜色没有改变。任何人的想法？这是CSS：

```
a {
  color: #ffffff;
  text-decoration: none;
  }

a:link, a:visited {color: #ffffff; text-decoration: none;}

a:focus, a:hover {
  color: #e2231a;
  text-decoration: none;
  }

#links li.active {
  color: #e2231a;
  text-decoration: none;
  background: url("../images/hover.png") bottom center no-repeat;
  padding-bottom: 17px;
  } 
```

我知道主动语句看起来与其他语句不同，但这是让我的图像显示的唯一方法。真的卡在这个了。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:53:23.250

习惯了这个for`a` **标签**

```
#links li.active a {
  // here style for your anchor link 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:05:54.043

如果您只想在活动时更改链接中的列表元素，请使用此选项。

```
#links li:active a {color:#000;} 
```

如果您希望所有列表都受此更改的影响，请使用

```
li:active a {color:#000;} 
```

如果您希望更改的不仅仅是 li 元素，即网站上的单个链接，该链接是活动的以遵守这些规则，请使用以下内容

```
a:active {color:#000;} 
```

希望这可以帮助你。

# google-visualization - 修复谷歌饼图每个扇区的颜色

> ID：13816621
> 
> 赞同：1
> 
> 时间：2012-12-11T08:51:20.557
> 
> 标签：google-visualization

我正在使用 Liferay 6.1 和谷歌饼图。对于扇区的每种颜色，我使用以下代码。

```
var options = {
    chartArea : {
        width : 300,
        height : 135
    },
    height : 165,
    margin : 10,
    colors : [ '#C1D558', '#22297A', '#C21536', '#996ab2' ],
    is3D : false

}; 
```

但问题是，如果数据有变化，每个扇区的颜色会随机变化。我想永久修复每个不依赖于数据或其条目的扇区的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T21:53:15.983

如果其他人正在寻找此答案，请查看[文档](https://developers.google.com/chart/interactive/docs/gallery/piechart#Configuration_Options)。

看看切片部分，你可以这样做

```
slices: [{color: 'black', {}, {}, {color: 'red'}]
slices: {0: {color: 'black'}, 3: {color: 'red'}} 
```

# linux - setuid 不生效

> ID：13816624
> 
> 赞同：0
> 
> 时间：2012-12-11T08:51:28.777
> 
> 标签：linux, setuid

假设有用户 A 和 B，属于不同的组。并且其中的机器人不是root

首先，作为用户 A。

```
1) touch a.txt; echo "hello word" > a.txt
2）chmod 600
3) touch b
4) echo "cat a.txt" > b
5) chmod 4755 b 
```

然后切换到用户 B，我的假设是用户 B 可以成功运行二进制文件并获得问候语“hello word”，但是当我实际以用户 B 身份运行二进制文件时，我得到了“权限被拒绝”。所以为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T07:27:08.523

Linux 没有实现对`S_ISUID`脚本文件位的处理；相反，使用解释器（shell）的模式位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:28:08.840

文件的概念`setuid`意味着如果你`setuid bit`打开了一个文件，任何执行该命令（文件）的人都将继承文件所有者的权限。

```
$ chmod 4755 b --verbose
mode of `b' changed to 4755 (rwsr-xr-x) 
```

我怀疑用户 A 和 B 属于不同的组，所以你也需要这样做`setgid`。这可以通过添加 2 来完成，对于 setuid 和 setgid 都添加到 6。

```
$ chmod 6755 b --verbose
mode of `b' changed to 6755 (rwsr-sr-x) 
```

# python - Python Mechanize 检查服务器是否可用

> ID：13816633
> 
> 赞同：2
> 
> 时间：2012-12-11T08:51:57.583
> 
> 标签：python, urllib2, mechanize

我正在尝试编写一个脚本，该脚本将读取包含一些 url 的文件，然后使用 mechanize 模块打开一个浏览器实例。我只是想知道如果某些 url 不存在或服务器无法访问，我该怎么做。

例如

```
import mechanize  

br = mechanize.Browser()  
b  = br.open('http://192.168.1.30/index.php') 
```

我想知道的是，如果 192.168.1.30 无法访问或 http 返回 404 错误，我将如何从 mechanize 获取信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:11:11.003

尝试这样的事情：

```
from mechanize import Browser
b = Browser()
try:
    r=b.open('http://www.google.com/foobar')
except (mechanize.HTTPError,mechanize.URLError) as e:
    if isinstance(e,mechanize.HTTPError):
        print e.code
    else:
        print e.reason.args 
```

输出：

```
404 
```

如果你尝试`'http://www.google.foo'`它会给你一个元组：

`(-2, 'Name or service not known')`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T08:54:51.043

```
from mechanize import Browser
browser = Browser()
response = browser.open('http://www.google.com')
print response.code 
```

或使用 Python 请求库。

演示它的示例代码：

```
>>>import requests
>>> r = requests.get('http://httpbin.org/get')
>>> r.status_code
200 
```

# iphone - 在 iPhone 中旋转图像时需要保持图像质量

> ID：13816634
> 
> 赞同：1
> 
> 时间：2012-12-11T08:52:05.953
> 
> 标签：iphone, objective-c, ios, image-rotation, image-editing

> **可能重复：**
> [在 iPhone sdk 中旋转时需要保留图像的原始质量](https://stackoverflow.com/questions/13814544/need-to-retain-original-quality-of-image-while-rotating-in-iphone-sdk)

在我的应用程序中，我可以将图像旋转 90 度。当我旋转多次时......它变得模糊（缺少像素清晰度）。我失去了img质量。任何人都可以建议实现这一点的方法。

在这里，我使用了一个按钮来旋转图像。用于旋转的代码是：

```
- (UIImage *)rotateImage:(UIImage *) img
{

     CGRect rect = CGRectMake(0, 0, img.size.width, img.size.height);
     UIGraphicsBeginImageContext(rect.size);

     CGContextRef context = UIGraphicsGetCurrentContext();

     if (img.imageOrientation == UIImageOrientationRight) 
     {
          CGContextRotateCTM (context, M_PI_2);
     } 

     else if (img.imageOrientation == UIImageOrientationLeft) 
     {
          CGContextRotateCTM (context, -(M_PI_2));
     }

     else if (img.imageOrientation == UIImageOrientationDown) 
     {
          // NOTHING
     } 

     else if (img.imageOrientation == UIImageOrientationUp) 
     {
         CGContextRotateCTM (context, M_PI_2);
     }

     //CGContextRotateCTM(context, M_PI_2);

     CGContextTranslateCTM(context,0, -(img.size.width));
     [img drawInRect:CGRectMake(0, 0, img.size.height,img.size.width)];

     UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
     appDelegate.savedImage=newImage;

     UIGraphicsEndImageContext();
     CGContextRelease(context);
     return newImage;
     } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:22:25.887

you can create a copy of the original image changing the orientation like this:

```
CGImageRef imageRef = [img CGImage];
UIImage *rotatedImage = [UIImage imageWithCGImage:imageRef scale:1.0 orientation:UIImageOrientationUp]; 
```

you has to put the second line in every of your conditions and change the orientation parameter to the correct value for each case, check the [doc](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithCGImage%3ascale%3aorientation%3a) for more info

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:25:41.660

在视图级别旋转将保持位图保真度（即，它不会触及它）。

IE：

```
#define DEG2RAD(d) (M_PI * d / 180.0)
...
_imageView.transform = CGAffineTransformMakeRotation(DEG2RAD(45)); 
```

不幸的是，您需要查看使用内边框对旋转图像进行抗锯齿处理。之前已经在这里回答过了。

希望这可以帮助！

# php - Session usage in realtime web notifications

> ID：13816639
> 
> 赞同：0
> 
> 时间：2012-12-11T08:52:24.050
> 
> 标签：php, session, asynchronous, push

I have to implement a web app for a typical LAMP stack. One of the requirements is to publish "Facebook style" notifications on UI.

I'd prefer not to poll the web server to grab the data so I'm taking into consideration some push technologies (Atmosphere, Tornado...).

Since I have not found an out-of-the-box working solution in PHP, I wonder how to make the notification channel secure. I mean how to prevent User A read notifications of User B? Or even better, how to share session information between a LAMP stack and another Push server?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:33:38.557

What about WebSockets?

Like this: [http://socketo.me/](http://socketo.me/)

It seems that only IE doesn't support it currently (unless using Flash) so it may or not be useful for you project, as you didn't specify any client requirement.

Hope this helps!

# php - 如何使用 Amazon S3 SDK 下载并执行存储桶中的 php 文件？

> ID：13816640
> 
> 赞同：1
> 
> 时间：2012-12-11T08:52:24.533
> 
> 标签：php, amazon-web-services, amazon

如何在使用 S3 SDK 连接 Amazon 中的存储桶时执行 PHP 文件？

我试过了`$s3->getBucket`，我得到了以下数组。但我需要这个文件的执行结果。

```
Array
(
    [content/content.php] => Array
        (
            [name] => content/content.php
            [time] => 1353105202
            [size] => 1223
            [hash] => 355c51389b51814d4b6c822a6ec28cfe
        )

) 
```

是否有任何函数/方法来执行 PHP 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:56:21.640

您不能直接在 Amazon S3 上执行 PHP 文件。

您需要做的是下载它的内容，将内容写入文件，然后运行文件本身（通过使用 include() 或 require()）。

如果文件直接输出内容，则可以将其包装在 ob_start() 和 ob_get_clean() 中以获取任何输出。

```
$source = $s3->getObject($bucket, $object);

$filename = tempnam('/tmp');
$file = fopen($filename, 'w');
fwrite($file, $source);
fclose($file);

ob_start();
require_once $filename;
$result = ob_get_clean();

echo $result; // the result of the executed PHP. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:48:00.813

您可能会使用[s3fs](http://code.google.com/p/s3fs/)之类的东西将 S3 存储桶挂载到本地文件系统中，然后像包含任何其他文件一样包含该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T02:53:09.270

根据 php 上的 allow_url_fopen 和 allow_url_include ini 设置，这可以使用自定义流包装器来实现。我们在我们的一个项目中使用了这样一个东西。无权共享代码，因为它具有知识产权。但它基于[http://docs.aws.amazon.com/aws-sdk-php/v2/guide/feature-s3-stream-wrapper.html](http://docs.aws.amazon.com/aws-sdk-php/v2/guide/feature-s3-stream-wrapper.html)

> Amazon S3 流包装器允许您使用内置 PHP 函数（如 file_get_contents、fopen、复制、重命名、取消链接、mkdir、rmdir 等）从 Amazon S3 存储和检索数据。

# php - Mysql查询Sum with Case

> ID：13816643
> 
> 赞同：0
> 
> 时间：2012-12-11T08:52:30.523
> 
> 标签：php, mysql

我有两张桌子。

一个包含 3 列的默认数据，（值为 1 或 0）在同一张表中是一个 ClientID

另一个表包含带有日期、ClientID 和名为“已更改”的额外列的已编辑数据

如果 Changed = 1，则 3 列中的值发生更改，因此需要从第二个表中读取。

这一切都很好，但我想在 php 中创建一个可以选择日期范围的报告，并且查询应该按 ClientID 分组并计算 3 列的选定日期范围中的所有 1。（每列分开）

这是诀窍：当特定行中的 Changed = 0 时，它应该检查默认值，如果 Changed = 1 它应该检查第二个表。然后将其与前几行一起计算。

我希望你明白我想要创造什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:57:01.263

您可以使用 SQL 中的 IF 函数

例如

```
SELECT SUM(IF(Changed=1, t1.col1, t2.col2)) FROM t1, t2 WHERE t1.id=t2.id 
```

这是如何在 SUM 中将列用于大小写的示例

# ios - 如何在 ffmpeg 中使用 librtmp？

> ID：13816644
> 
> 赞同：2
> 
> 时间：2012-12-11T08:52:29.167
> 
> 标签：ios, ffmpeg, rtmp

我找到了一个可以使用 ffmpeg 流式传输 rtmp 协议的库，然后我使用 --enable-librtmp 编译了 ffmpeg。但下一步会是什么？我找不到任何使用此功能的示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:04:06.057

现在您可以通过抽象 ffmpeg 接口打开 rtmp URL：

```
AVFormatContext *s = NULL;
int ret = avformat_open_input(&s, "rtmp://server[:port][/app][/playpath][ keyword=value]...", NULL, NULL); 
```

# .net - 拒绝访问 Com 端口（断开端口电缆时）

> ID：13816645
> 
> 赞同：0
> 
> 时间：2012-12-11T08:52:30.913
> 
> 标签：.net, serial-port, usb, access-denied

> **可能重复：**
> [释放未插入的虚拟串行端口](https://stackoverflow.com/questions/9835881/releasing-a-unplugged-virtual-serial-port)

这是我连接串行 com 端口的代码：

```
try{
SRR_serial_port.PortName = comboBox2.Text;
SRR_serial_port.BaudRate = 9600;
SRR_serial_port.Parity = System.IO.Ports.Parity.None;
SRR_serial_port.DataBits = 8;
SRR_serial_port.StopBits = System.IO.Ports.StopBits.One;
SRR_serial_port.Handshake = System.IO.Ports.Handshake.None;       
SRR_serial_port.WriteTimeout = 500;

SRR_serial_port.Open();
}
catch{} 
```

然后关闭端口如下：

```
SRR_serial_port.Close(); 
```

现在我在这种情况下遇到了问题：

1.  开放端口
2.  断开串行端口电缆（从计算机 USB 端口）
3.  重新连接电缆
4.  关闭端口
5.  再次打开端口

这会导致以下错误：

> 访问端口被拒绝

在调试模式下，我看到此错误发生在该行的以下行中：

```
SRR_serial_port.Open(); 
```

我的意思是，此行执行并且端口状态更改为打开，但过了一段时间（在执行下一行期间）出现错误。

但是，这种情况不会产生任何错误：

1.  开放端口
2.  关闭端口
3.  分离和重新连接电缆
4.  开放端口

# javascript - 正则表达式捕获所有内容，包括两个模式之间的新行

> ID：13816648
> 
> 赞同：2
> 
> 时间：2012-12-11T08:52:35.923
> 
> 标签：javascript, regex

我正在尝试将@media 规则从样式表中提取出来进行缓存，然后以适当的分辨率在 IE<9 中应用 JS。

例如：

```
.../*default rules*/...
#work-head { background-image: url("/images/work-art-supplies-med.png"); height: 168px; width: 213px; }        

}

@media screen and (min-width : 657px) {

.welcome h1 { border: 0; margin-bottom: 0; text-align: center; }

.welcome p { font-size: 13px; font-size: 1.3rem; }

.../*more rules*/...

}

.../*more rules*/... 
```

目前，我得到了 min-width 和它之后的所有内容（直到样式表的末尾）：

```
/657px\)(\s|\n)*\{/ 
```

并通过在媒体查询末尾找到双“}}”来获取媒体查询的终点，如下所示：

```
/}[^{]*}/ 
```

这可行，但它需要两个正则表达式和一些字符串操作来制作每个 IE 样式表，这让我觉得很脏。

我试图避免将 IE 的规则分解为单独的文件以使维护更容易，我认为我需要一个正则表达式，以便我可以在压缩 CSS 之前和之后提取（现在可以，但显然远非最佳）。

那么有人可以告诉我如何将这两种表达方式合二为一吗？

基本上：如何匹配文字或模式与另一个文字或模式之间的所有内容？

另外 - 这需要在 IE<9 中工作，所以我认为前瞻和后视不是选项（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T15:27:58.830

我忘记了这个问题:-)，但万一有人感兴趣：

```
/657px\)(\s|\n)*\{(.|\n)+?(}[^{]*})/ 
```

成功了（几乎）。它在[http://regexpal.com/](http://regexpal.com/)上完美运行，但在 IE<9 中，匹配在末尾得到“} }, , ,} }”而不是“}}”。

无论如何我都需要对它进行子串化，所以没什么大不了的，但我很想知道是否有人知道如何使它在 IE 中以与正则表达式相同的方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:19:37.697

如果您可以假设您想要的最后一行只是“}”，那么这将是：

```
 /657px\)[\n\r\w\s]*\{[\n\r\w\W]*[\n\r]\}/ 
```

我使用 phantomjs 在您的测试用例上运行以下过滤器：

```
var fs = require('fs'),
input = fs.open('/dev/stdin', 'r');
var stuff = input.read();
var somestuff = stuff.match(/657px\)[\n\r\w\s]*\{[\w\W]*[\n\r]\}/);
console.log(somestuff); 
```

# python - python多线程脚本的优化——巨大的内存消耗

> ID：13816653
> 
> 赞同：1
> 
> 时间：2012-12-11T08:52:44.463
> 
> 标签：python, multithreading, memory

我有一个包含 800 多行代码的脚本（Django Management-Command）。这应该从外部 Web 服务导入数据，操作某事。并将其写入 Postgres 数据库。

我使用多线程，因为从 web 服务获取数据不是很快。

有一个线程用于使用批量命令获取数据以获取大量 64 个数据集，并将每个数据集写入队列中。

同时在一开始有一个工作线程来操作数据并将其写入数据库。在主（句柄）类中，有一个 while 循环，它每 5 秒查看一次队列中元素的数量和正在运行的工作线程的数量。如果队列中有超过 500 个元素并且工作线程少于 5 个，它会启动一个新的工作线程。

所有工作线程从队列中获取一项，操作某事，将数据集写入数据库并将一个字符串（最多 14 个字符）附加到不同的队列（＃2）。

队列 #2 必须在导入结束时将所有导入的对象标记为新对象，分别从数据库中删除当前未导入的所有其他项目。

对于数量不超过 200.000 个数据集的数据库，一切正常。但是，如果有一个包含 1.000.000 个数据集的数据库，则在处理漏洞脚本期间内存消耗会增加到 8 GB 的 RAM。

有没有办法观察线程和/或队列的内存消耗？有没有一种方法可以在每个 while 循环之后“清理”内存？

```
# -*- coding: utf-8 -*-

import os
import threading
import Queue
import time

from optparse import OptionParser, make_option
from decimal import Decimal
from datetime import datetime

from django.core.management import call_command
from django.core.management.base import BaseCommand
from django.conf import settings

def is_someone_alive(thread_list):
    so_alive = False
    for t in thread_list:
        if t.is_alive():
            so_alive = True
    return so_alive

class insert_item(threading.Thread):
    VarLock2 = threading.Lock()

    def __init__(self, queue1, item_still_exist2, name, *args, **options):
        threading.Thread.__init__(self)
        self.options = options
        self.name = name
        self.queue1 = queue1
        self.item_still_exist2 = item_still_exist2

    def run(self):

        while not self.queue1.empty() or getItemBulkThread.isrunning:

            item = self.queue1.get()
            artikelobj, created = Artikel.objects.get_or_create(artikelnr=item['Nr'])

            """
            manipulate data
            """

            self.item_still_exist2.put(artikelobj.artikelnr)

            artikelobj.save()

            self.queue1.task_done()

class getItemBulkThread(threading.Thread):
    isrunning = True
    VarLock = threading.Lock()

    def __init__(self, queue1, name, *args, **options):
        threading.Thread.__init__(self)
        self.options = options
        if self.options['nrStart'] != '':
            self.nrab = self.options['nrStart']
        else:
            self.nrab = ''
        self.name = name
        #self.nrab = '701307'
        self.queue1 = queue1
        self.anz_artikel = 64
        self.max_artikel = 64
        self.skipped = 0
        self.max_skip = 20

    def run(self):

        count_sleep = 0
        while True:

            while self.queue1.qsize() > 5000:
                time.sleep(5)
                count_sleep += 1

            if count_sleep > 0:
                print "~ Artikel-Import %(csleep)sx für 5s pausiert, da Queue-Size > 5000" % {'csleep': count_sleep}
                count_sleep = 0

            try:
                items = getItemBulk()  # from external service

            except Exception as exc1:
                if ('"normal" abort-condition' in str(exc1)):
                    getItemBulkThread.VarLock.acquire()
                    getItemBulkThread.isrunning = False
                    getItemBulkThread.VarLock.release()
                    break
                elif self.anz_artikel > 1:
                    self.anz_artikel /= 2
                    continue
                elif self.skipped <= self.max_skip:
                    self.nrab += 1
                    self.skipped += 1
                    time.sleep(5)
                    continue
                elif self.skipped > self.max_skip:
                    raise Exception("[EXCEPTION] Fehler im Thread: too much items skipped")
                else:
                    getItemBulkThread.VarLock.acquire()
                    getItemBulkThread.isrunning = False
                    getItemBulkThread.VarLock.release()
                    raise

            last_item = len(items) - 1
            self.nrab = items[last_item]['Nr']

            for artikel in items:
                artikel['katItem'] = False
                self.queue1.put(artikel)

            if self.anz_artikel < self.max_artikel:
                self.anz_artikel *= 2
                self.skipped = 0

class Command(BaseCommand):
    """
      Django-mgm-command
    """
    help = u'Import'

    def create_parser(self, prog_name, subcommand):
        """
        Create and return the ``OptionParser`` which will be used to
        parse the arguments to this command.
        """
        return OptionParser(prog=prog_name, usage=self.usage(subcommand),
            version=self.get_version(),
            option_list=self.option_list,
            conflict_handler="resolve")

    def handle(self, *args, **options):

        startzeit = datetime.now()
        anzahl_Artikel_vorher = Artikel.objects.all().count()  # Artikel is a model

        self.options = options

        items_vorher = []

        queue1 = Queue.Queue()
        item_still_exists2 = Queue.Queue()

        running_threads = []

        thread = getItemBulkThread(queue1, name="Artikel", *args, **options)
        running_threads.append(thread)
        thread.daemon = True
        thread.start()

        anz_worker_threads = 1
        anz_max_worker_threads = 5

        insert_threads = [insert_item(queue1, item_still_exists2, name="Worker-%(anz)s" % {'anz': i + 1}, *args, **options) for i in range(anz_worker_threads)]
        for thread in insert_threads:
            running_threads.append(thread)
            thread.setDaemon(True)
            thread.start()

        add_seconds = 5
        element_grenze = 500
        lastelemente = 0
        asc_elemente = 0
        anz_abgearbeitet = 0

        while getItemBulkThread.isrunning or not queue1.empty():
            time.sleep(add_seconds)
            elemente = queue1.qsize()
            akt_zeit = datetime.now()
            diff_zeit = akt_zeit - startzeit
            diff = elemente - lastelemente
            anz_abgearbeitet = item_still_exists2.qsize()
            art_speed = (anz_abgearbeitet / timedelta_total_seconds(diff_zeit)) * 60
            ersetz_var = {'anz': elemente, 'zeit': diff_zeit, 'tstamp': akt_zeit.strftime('%Y.%m.%d-%H:%M:%S'), 'anzw': anz_worker_threads, 'diff': diff, 'anza': anz_abgearbeitet, 'art_speed': art_speed}
            print("%(zeit)s vergangen - %(tstamp)s - %(anz)s Elemente in Queue, Veränderung: %(diff)s - Anz Worker: %(anzw)s - Artikel importiert: %(anza)s - Speed: %(art_speed)02d Art/Min" % ersetz_var)

            if diff > 0:
                asc_elemente += 1
            else:
                asc_elemente = 0
            if asc_elemente > 2 and anz_worker_threads < anz_max_worker_threads and elemente > element_grenze:
                ersetz_var = {'maxw': anz_max_worker_threads, 'nr': anz_worker_threads + 1, 'element_grenze': element_grenze}
                print "~~ 2x in Folge mehr Queue-Elemente als vorher, die max. Anzahl an Workern %(maxw)s noch nicht erreicht und mehr als %(element_grenze)s Elemente in der Queue, daher Start eines neuen Workers (Nr %(nr)s)" % ersetz_var
                anz_worker_threads += 1
                thread = insert_item(queue1, item_still_exists2, name="Worker-%(anz)s" % {'anz': anz_worker_threads}, *args, **options)
                running_threads.append(thread)
                thread.setDaemon(True)
                thread.start()
                asc_elemente = 0
            lastelemente = elemente

        queue1.join()

        items_nachher = []
        while not item_still_exists2.empty():
            item = item_still_exists2.get()
            if item in items_vorher:
                items_nachher.append(item)
                items_vorher.remove(item)
            item_still_exists2.task_done()

        item_still_exists2.join()

        if len(items_vorher) > 0:
            Artikel.objects.filter(artikelnr__in=items_vorher).delete()

        anzahl_Artikel_nachher = Artikel.objects.all().count()
        anzahl_Artikel_diff = anzahl_Artikel_nachher - anzahl_Artikel_vorher

        endzeit = datetime.now()
        dauer = endzeit - startzeit 
```

我在某些位置缩写了代码:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:53:26.300

内存消耗过多的一个可能原因是您没有为输入队列设置最大大小。见[参数](http://docs.python.org/2/library/queue.html#Queue.Queue)。[_`maxsize`](http://docs.python.org/2/library/queue.html#Queue.Queue)

在相关说明中，您写道：

> 在主（句柄）类中，有一个 while 循环，它每 5 秒查看一次队列中元素的数量和正在运行的工作线程的数量。如果队列中有超过 500 个元素并且工作线程少于 5 个，它会启动一个新的工作线程。

创建新线程不一定会增加吞吐量。你应该做一些测试来确定最佳线程数，结果可能是 1。

# sql - SQL - 加入后加入聚合查询或聚合/求和？

> ID：13816665
> 
> 赞同：3
> 
> 时间：2012-12-11T08:53:18.753
> 
> 标签：sql, optimization, aggregate-functions

我很难弄清楚什么是最好的，或者是否有区别，但是我没有找到任何材料来帮助我理解这一点，所以我会问这个问题，如果不是针对我，那么针对可能的其他人最终陷入同样的​​境地。

**在 join 之前或之后聚合子查询**，在我的具体情况下，由于碎片数据和糟糕的规范化过程，子查询相当慢，

我有一个非常复杂的主查询和一个由 3 个使用联合组合的小查询构建的子查询（将删除重复记录）我只需要这个子查询中的一个值（对于每一行），所以在某些时候，我最终会对该值求和，（连同将必要的控制数据与它一起分组，以便我可以加入）

**什么会产生最大的影响？**

*   在加入前对子查询求和，然后与聚合版本加入
*   保留原始数据，然后将值与主查询的其余部分相加

请记住，每一行都会汇总数千条记录，并且数据不是本地的而是构建的，因此可能驻留在内存中（这只是从查询优化器的角度来看的猜测）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:04:39.553

通常我将分组保留在子查询中（在 Oracle 术语中称为“内联视图”）。这样查询就更加简单明了。另外我相信执行计划更有效，因为要聚合的数据集更小，生成的连接键集也更小。

虽然这不是一个确定的答案。如果您要加入内联视图的行源几乎没有匹配的行，您可能会发现提前加入会减少聚合工作。

正确的答案是：对特定数据集的查询进行基准测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:04:27.413

我认为以这样的一般方式，没有正确或错误的方式来做到这一点。像您描述的那样的查询的性能取决于许多不同的因素：

*   你实际上在做什么类型的连接（以及在后台使用什么算法）
*   要加入的数据是否足够小以适合加入它的机器的内存？
*   您使用什么查询优化，即什么 DBMS（Oracle、MsSQL、MySQL、...）
*   ...

对于您的情况，我只是建议进行基准测试。如果这看起来不是一个令人满意的答案，我很抱歉，但这是解决许多性能问题的方法......

因此，使用您的方法和一些测试数据设置一个简单的测试，然后选择更快的方法。

# crm - 如何在 opentaps 1.5.0 中使用控制器注入？

> ID：13816676
> 
> 赞同：0
> 
> 时间：2012-12-11T08:53:56.610
> 
> 标签：crm, opentaps

我是 opentaps 的新手，我一直在尝试将我创建的实体的菜单项添加到 crm/sfa 应用程序选项卡中。由于几乎没有关于如何实现这一进展的文档，因此进展缓慢。但是我确实遇到了[这篇文章](http://www.opentaps.org/docs/index.php/Customizing_opentaps_Applications#Controller_Injection)，我尝试将我的控制器和示例控制器注入到应用程序中，但到目前为止一无所获。任何人都可以澄清这实际上是有效的，并可能提供有关如何实现这一点的指针。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:09:24.223

是的，这可行，并且按照文档，您应该可以使用它。请注意，您只能注入一个控制器，不能超过这个。我们创建了一个允许多个控制器注入的补丁，如果您有兴趣，我可以将其发送给您。

# c# - 如何在父控制台应用程序和 ASP.NET Web 应用程序之间共享 app.config

> ID：13816679
> 
> 赞同：0
> 
> 时间：2012-12-11T08:54:06.510
> 
> 标签：c#, asp.net, .net, console-application

**设想**

*   我有一个 Web 应用程序项目和一个控制台项目。
*   控制台项目用于批量发送报告，并且在 app.config 中有与电子邮件相关的设置。
*   有时控制台项目中的方法是从 Web 应用程序调用的。

部署网站后，我确保复制*consoleProject.exe.config*并将其放在与*consoleProject.exe*相同的 bin 文件夹中。

**问题**

部署后，如果我对*consoleProject.exe.config*进行更改，则在从 Web 应用程序调用*consoleProject.exe中的方法时无法识别更改。*

此默认 app.config 文件是否仅在执行实际应用程序时引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:56:45.380

是的，如果您从 Web 应用程序调用控制台应用程序中的代码，它会被视为与调用 dll 相同，并且会使用您的 web.config。

同样，如果您从控制台应用程序调用 Web 应用程序 dll 中的代码，则将使用 app.exe.config 文件。

# html - 有没有一种简单的方法可以生成与所有（或大多数）浏览器兼容的 CSS 文件？

> ID：13816687
> 
> 赞同：1
> 
> 时间：2012-12-11T08:54:30.237
> 
> 标签：html, css, cross-browser, compatibility

我正在为残疾人创建一个网站的合作工作，主要将在数量有限的教育中心办公室运行，这些办公室将向服务员捐赠平板电脑和旧笔记本。我告诉你这个是因为我想让你了解可能的用户以及不同的操作系统和浏览器。我想生成与所有可能的浏览器兼容的 CSS 代码；较旧和较新的浏览器.. 我是从头开始编写的，我每次都通过访问[http://browsershots.org/来构建它，以查看是否存在任何兼容性问题，但这需要时间。](http://browsershots.org/)我也使用[http://jigsaw.w3.org/css-validator/](http://jigsaw.w3.org/css-validator/)但同样的手动工作太多..

我想知道的是：您是否碰巧知道您提供与您的 CSS 文件兼容的任何工具，例如 IE，并为您提供涵盖许多兼容性问题的 CSS 文件的扩展版本？

任何帮助是极大的赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:10:00.660

简单来说就是有`no easy way to generate one CSS for all browsers`。

有关详细信息，这在很大程度上取决于您使用 CSS 的广泛程度、CSS 的版本等以及不同浏览器以不同方式呈现相同 CSS 属性的许多地方，因此对于所有的人来说，这还不够简单情况。

但是，为了一点帮助，随着时间的推移，有不同的工具和脚本可以让您*更轻松*地实现所有浏览器的 CSS 兼容性，我建议您使用以下工具，它们在尝试维护时可能对您有用你的 CSS。

*   [15+ 种跨浏览器 CSS 编码的技术和工具](http://www.catswhocode.com/blog/15-techniques-and-tools-for-cross-browser-css-coding)

`Some CSS-preprocessor/helpers to help you in maintaining your CSS throughout:`

*   [Less：动态样式表语言。](http://lesscss.org/)

*   [Sass 让 CSS 再次变得有趣。](http://sass-lang.com/)

*   [Compass 是一个开源的 CSS 创作框架。](http://compass-style.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:48:33.383

[Netbeans IDE](http://netbeans.org/downloads/)有一个功能可以帮助您从简单的复选框和下拉列表中构建 CSS。虽然我还没有确认对 W3 的有效性，但是生成的代码看起来不错。

还有一个有用的检查使用资源是[http://www.w3schools.com/cssref/default.asp](http://www.w3schools.com/cssref/default.asp)。引用您希望使用的属性确实需要时间，但如果您要尝试布局，则始终值得确认它们的兼容性，如果使用 CSS3，则必须这样做。

W3 Schools 明确指出哪个浏览器支持声明的属性。请参阅下面的示例图像，该图像显示了[box-pack](http://www.w3schools.com/cssref/css3_pr_box-pack.asp)的兼容性。

![W3 Schools 浏览器支持](../Images/0b7963e4cc4f944a2fe5991f810df946.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:17:20.133

我不确定这样的工具是否存在。也就是说，编写跨浏览器 CSS 有一些建议：

1.  使用重置样式表（例如[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)）；

2.  使用 IE 条件注释，例如`<!--[if IE]><![endif]-->`;

3.  练习*连续编码*：打开几个浏览器（例如 IE、FF、Chrome）并检查它们提供的流量显示；

4.  使用[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)检查 IE5.5+ 渲染，具体取决于您要覆盖的 IE 版本；

5.  尽可能使用绝对位置并指定宽度和高度（尤其是在使用浮动元素时）；

6.  如果您想尝试 CSS3，请使用[PIE](http://css3pie.com/)；

7.  尝试编写*纯粹*、简单的 CSS，避免使用*奇异*的布局。

# sql - 如何实现具有多个连接条件的 SQL Server 查询

> ID：13816697
> 
> 赞同：2
> 
> 时间：2012-12-11T08:55:00.340
> 
> 标签：sql, sql-server-2008, tsql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:05:38.810

我没有时间深入研究这个问题，但我怀疑你至少想要修复：

```
 WHERE DelivaryFlight. FlightDt >  DelivaryFlight. FlightDt 
```

这是永远无法满足的条件。

你可能想要：

```
 WHERE DF. FlightDt > DF2\. FlightDt 
```

对于这些复杂的查询来说，更新能够看到将要更新的记录也很有用，所以我通常会这样做：

```
Update
     Set …
--Select *
    FROM TableAct AC 
```

然后，我没有运行更新，而是只运行突出显示并运行以 select 开头的部分以查看结果，并且在我确定我正在选择我想要选择的记录并且我将成为的值之前不要测试更新更换是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:14:14.653

试着分解你的查询，这是我今天写的一个查询，分别测试每个部分

```
SELECT
    Employee
    , Reference
    , Payroll
    , [Hours] / 60 
    [Hours]
    , [Days]
FROM
    (
    SELECT
        Employee
        , Reference
        , Payroll
        , SUM( Duration ) AS [Hours]
        , AvailableID
    FROM
        (
        SELECT
            RequirerID
            , Duration
            , RTRIM( COALESCE(MA.MemberLastName, '') 
                + ' ' + COALESCE(MA.MemberFirstName, '')  
                + ' ' + COALESCE(MA.MemberInitial, '')) Employee
            , COALESCE(MA.Detailref1, '') Reference
            , COALESCE(MA.PayrollRef, '') Payroll
            , Available.AvailableId 
        FROM
            (
            SELECT DISTINCT
                RequirerID
                , ShiftDate
                , CAST(ShiftStart - ShiftEnd - ShiftBreak AS DECIMAL(19,2)) ShiftDuration
                , Id RequirementRecordID
            FROM
                Requirements
            WHERE
                Requirements.ShiftDate BETWEEN @ParamStartDate
                AND @ParamEndDate
                AND RequirerID IN (SELECT ID FROM MemberDetails WHERE CompanyID = @ParamCompanyID)
            )
            R
            INNER JOIN
            ShiftConfirmed
            INNER JOIN
            Available
            INNER JOIN
            MemberDetails MA
            ON Available.AvailableID = MA.ID
            ON ShiftConfirmed.AvailableRecordID = Available.ID
            ON R.RequirementRecordID = ShiftConfirmed.RequirementRecordID
        WHERE
            R.ShiftDate BETWEEN @ParamStartDate
            AND @ParamEndDate
            AND COALESCE(ShiftChecked, 0) BETWEEN 0 AND 1
        )
        ShiftDay
    Group By
        Employee
        , Reference
        , Payroll
        , AvailableId
    ) Shifts
    INNER JOIN
    (
    SELECT
        COUNT( * ) AS [Days]
        , AvailableID
    FROM
        (
        SELECT DISTINCT
            R.ShiftDate
            , Available.AvailableId 
        FROM
            (
            SELECT DISTINCT
                ShiftDate
                , Id RequirementRecordID
            FROM
                Requirements
            WHERE
                Requirements.ShiftDate BETWEEN @ParamStartDate
                AND @ParamEndDate
                AND RequirerID IN (SELECT ID FROM MemberDetails WHERE CompanyID = @ParamCompanyID)
            )
            R
            INNER JOIN
            ShiftConfirmed
            INNER JOIN
            Available
            INNER JOIN
            MemberDetails MA
            ON Available.AvailableID = MA.ID
            ON ShiftConfirmed.AvailableRecordID = Available.ID
            ON R.RequirementRecordID = ShiftConfirmed.RequirementRecordID
        WHERE
            R.ShiftDate BETWEEN @ParamStartDate
            AND @ParamEndDate
            AND COALESCE(ShiftChecked, 0) BETWEEN 0 AND 1
        )
        ShiftDay
    Group By
        AvailableId
    ) D
    ON Shifts.AvailableID = D.AvailableID

WHERE [Hours] > 0
ORDER BY
    Employee 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:11:34.560

如果我有这样一个复杂的查询，我首先创建一个“简单”选择，它只生成要更新的行。

它还应该返回更新值和更新表的 pk

然后（相对）直接（内部）将它与要更新的表连接起来，并通过包括

```
WHERE tblTobeUpdated.pk = SimpleSelect.pk 
```

希望这可以帮助

# jquery - Populate table with JQuery

> ID：13816698
> 
> 赞同：3
> 
> 时间：2012-12-11T08:55:09.827
> 
> 标签：jquery, html, json, html-table

I need to populate some data into a table. The data I have is something I get in response from my ASP.NET MVC site, when I make a JSON post call there. Yet I can't seem to find a way to actually display the data I get back in response. Here is my code so far. Any help would be much appreciated:

```
$(document).ready(function () {
    var uName = '<%= Session["UserName"].ToString()%>';

    var pWord = '<%= Session["Password"].ToString()%>';

    var data = { UserName:uName,Password:pWord};

    $.ajax( {
        type: 'POST',
        url: "http://someurl.goes.here/",
        crossDomain: true,
        data: data,
        dataType: 'jsonp',
        success: function(myData) {
            $.each(myData, function (index, element) {
                $("#ClassTable").append('<tr><td> ' + element[0] + ' </td> <td> ' + element[1] + '</td></tr>'); 
                })
        }
    });            
    }); 
```

myData looks like this:

```
[Object { IsActive = True, ObjectId=1, ObjectString="someString", etc... etc... } ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:33:18.353

将用户密码以纯文本形式存储在页面上并不是一个好主意。即使您使用的是 HTTPS。如果您使用的是 HTTP，那么很容易看到密码。您甚至不应该以纯文本形式存储密码。

我认为这是你的错误：

element is { IsActive = True, ObjectId=1, ObjectString="someString", etc... etc... } 这不是您可能认为的那样。它没有键 0 或 1，因此如果您的语法正确，则每个元素都将是“未定义的”。

你需要使用 Chrome 的开发者工具来调试你的代码。在成功回调中暂停它并正确评估您正在获取的数据以及正在写入 DOM 的数据。

# javascript - 如何在钛/安卓中将 blob（图像）对象转换为 base64 字符串？

> ID：13816704
> 
> 赞同：0
> 
> 时间：2012-12-11T08:55:23.930
> 
> 标签：javascript, android, titanium, base64, appcelerator

我在这里问一个简单的问题。您可以将 blob 类型转换为 base64 字符串类型，然后将其反转为 blob 类型吗？我已经看到了很多很多答案，但没有一个工作正常。请仅在您最终进行了测试并且工作正常的情况下提供帮助。

谢谢。

我试过这个

```
var imageFile = Titanium.Filesystem.getFile('images8.png');
var oneImage = imageFile.read();
var tempFile = Titanium.Filesystem.createTempFile();
tempFile.write(oneImage);
var contents = tempFile.read();
var x = Ti.Utils.base64encode(contents); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:22:35.430

我找到了解决方案。

```
var str = Ti.Utils.base64encode(imageview1.image);
Ti.API.info(str); 
var image2=Ti.Utils.base64decode(str); 
imageview2.image=image2; 
```

干杯

# sql-server-2008 - 如何为 Dynamics AX 2012 R2 安装 Contoso 数据

> ID：13816705
> 
> 赞同：2
> 
> 时间：2012-12-11T08:55:26.770
> 
> 标签：sql-server-2008, axapta, dynamics-ax-2012

我刚刚从 partnersource 下载了包含 Contoso 数据的压缩包，但我不知道如何处理这些文件。

这些文件是：

*   微软DynamicsAx.bak
*   MicrosoftDynamicsAx_model.bak

我不知道如何处理这些文件才能在 Ax 上拥有 Contoso（演示）数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:55:26.770

编辑：自从我发表这篇文章以来，微软已经发布了一个新的数据集。为了安装此数据，您可以使用还原选项。为此：

1.  关闭服务中的 AOS
2.  打开 SQL 管理工作室
3.  连接到 SQL 数据库
4.  右键单击 MicrosoftDynamicsAx => 任务 => 还原 => 数据库
5.  选择从设备，然后找到下载的 .bak 文件。
6.  在左上角单击“选项”并选中第一个框：覆盖现有数据库（使用替换）
7.  单击确定并重复其他数据库。

有关 CONTOSO 数据集中包含的三个分区的更多信息，请查看 CONTOSO 数据下载链接旁边的 pdf！

以下过程允许您安装 Microsoft 几天后从其网站上删除的第一个数据集。如果前一个文件失败，此过程仍然可以帮助您恢复新的 .bak 文件。

1.  关闭服务中的 AOS。
2.  打开 SQL Server 管理工作室。
3.  连接到您的 Axe 数据库。

**注意：**在这里，您将看到两个与 Contoso .bak 同名的基础。您猜对了，我们将导入它们，但您不能仅通过单击“恢复数据库”来执行此操作，因为 .bak 文件来自不同的数据库。这是需要一点编码的地方。

4.  备份两个基地。
5.  单击“新建查询”并输入/执行以下代码：

    ```
     Alter Database MicrosoftDynamicsAX_model
      SET SINGLE_USER With ROLLBACK IMMEDIATE  

    RESTORE DATABASE MicrosoftDynamicsAX_model
      FROM DISK = '%Path to .Bak File%\MicrosoftDynamicsAX_model.bak'
      WITH REPLACE 
    ```

如果由于数据库正在使用而这不起作用，请在查询顶部添加以下通道：

```
Use Master 
```

对 MicrosoftDynamicsAX.bak 文件重复相同的查询

完成所有这些后，您的数据库应该是最新的，并且应该导入 Contoso 数据。

您现在可以重新启动 AOS。这可能需要很长时间，您甚至可以考虑重新启动服务器。服务器最终启动后，打开 Ax 客户端。它应该非常慢。这是由于您应该在客户端右下角看到的 26 000 条警报。将它们全部标记为已读（同样这需要一些时间），现在客户端应该运行得更快！

您现在应该在 Dynamics AX 2012 R2 安装中拥有 Contoso 数据！

# html - 在 HTML5 游戏画布中随机加载的 Google Webfonts

> ID：13816708
> 
> 赞同：0
> 
> 时间：2012-12-11T08:55:32.587
> 
> 标签：html, canvas, webfonts

我目前正在处理一个 HTML5 游戏项目，由于 Arial 的界面看起来不够精美，我一直在尝试让两个 Google Webfonts 工作，以增强我的游戏设计。

我试图在我的游戏画布的 context.fillText 调用中使用这些，但我遇到了一个奇怪的问题，我找不到任何解释。

实际上字体似乎是随机的，或者没有正确下载（或初始化？我不能确定）。这与缓存无关，我找不到行为“规则”来通过故障排除来识别这一点。有时字体第一次加载得很好，第二次加载，然后我永远无法再次显示它们，直到我清空缓存一次或两次。但这自然只是一个例子。

我在我的 html 中的画布底部放置了一小段文本（浏览器兼容性等等等等），我已将其设置为两种 webfonts 之一，它总是呈现得很好，所以我可以确认这个错误完全是关于画布的。

目前，我的代码中有关于字体处理的这些步骤：

**HTML：**

```
 <link href='http://fonts.googleapis.com/css?family=Londrina+Solid|Luckiest+Guy' rel='stylesheet' type='text/css'>
   <link rel=StyleSheet href="style.css" type="text/css"> 
```

**CSS（我的 style.css 文件的一部分）：**

```
 canvas {
...
    font-style: "Londrina Solid", "Luckiest Guy";
...
} 
```

如您所见，我尝试将一种字体或另一种字体应用于画布，这是一个 DOM 元素（正如我在另一篇 stackoverflow 帖子上读到的那样，它可以帮助工作）但这并没有改变任何事情。

**JS：**

```
 var fontsReady = false;
    var starting = false;
    // check if the game isn't already starting this variable is about timeOut)

    WebFontConfig = {
        google: {
            families : ['Luckiest Guy', 'Londrina Solid']
        },

        active: function() {
            console.log('All fonts are now loaded');
            fontsReady = true;
        }

    }

    var webFontsInit = function() {
            var wf = document.createElement('script');
            wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
            wf.type = 'text/javascript';
            wf.async = 'true';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(wf, s);
          }();

    function checkReady () {
            if (document.readyState === "complete" && fontsReady == true && starting == false) {
                console.log('States are OK');
                starting = true;
                ctx.save();
                titleScreen();
                }
            }
            else 
                setTimeout(checkReady, 500); // i think this timeout is needed, to regularly check for the game loading states (such as fontsReady)
        } 
```

我正在 Google Chrome 上测试我的游戏，并且正在使用 Google Webfonts Loader 代码段。当我在开始游戏时检查 CSS 时，一切运行顺利，我的加载屏幕（我用标准的网络字体编写，让用户知道他必须稍等片刻）正在等待加载字体和资产（我可以在我的 CSS 中看到匹配的类）并且标题屏幕在加载之前不会开始动画。

尽管如此，有时字体会显示，有时它们不会显示，我什至看不到我也在标题屏幕上显示的框架。我不明白为什么。我只有背景图，控制台中没有错误。

我的问题的另一个奇怪的部分是，每当我的标题屏幕保持空白并且我打开了一个开发工具（例如我用 F12 打开的 Chrome 工具）时，每当我关闭它时，字体和绘图就会打开我的标题屏幕神奇地出现了。我真的不知道为什么。

任何帮助将不胜感激，如果需要更多信息，请询问我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:01:53.687

好吧，那算了。我发现真正的问题是我没有为我拥有的两个画布（两层）明确设置 z-index。看起来 z-index 如果没有在 CSS 中设置，则由 Chrome 根据哪个元素首先出现来设置，这与 Firefox 或 IE 不同。这两个按html代码的顺序创建元素，这就是为什么我在IE9或FF上没有遇到任何此类问题的原因。

所以，这就是我的问题中“随机”的来源......现在一切看起来都很好。

这是我现在拥有的一些 CSS，用于使用适当的 z-indexes 设置两个相互重叠的画布“层”：

```
 canvas {
        width: 320px; // those are my canvas' dimensions, put your own!
        height: 500px;
        position: absolute;
        font-style: "Londrina Solid", "Luckiest Guy";
        left: 50%;
        margin-left: -160px; // this is my trick for centering layers in the page
        top: 0;
        outline: 0;
        border: 1px solid #000;
        display:block;
    }

    #c {
        z-index:0;
    }

    #c2 {
        z-index:1;
    } 
```

# salesforce - Connect a salesforce user to another salesforce user in another org without any user intervention

> ID：13816709
> 
> 赞同：2
> 
> 时间：2012-12-11T08:55:33.293
> 
> 标签：salesforce, oauth-2.0, saml-2.0

We would like to connect a salesforce user to another salesforce user in another org without any user intervention from a service.

We have tried SAML Bearer Flow (using Remote Access Application) to connect to salesforce to retreive Access Token for one of our product. We are referring to the follwoing article.

[http://help.salesforce.com/help/doc/en/remoteaccess_oauth_SAML_bearer_flow.htm](http://help.salesforce.com/help/doc/en/remoteaccess_oauth_SAML_bearer_flow.htm)

As referred by the SF article for this flow, it uses a previous user authorization to connect and retreive Token. In case the user (for whom Token is requested) has not already authorized the App, SF takes you to the Authorization page first and app will get the access token once app is authorized. This is working fine too. However it has this painful step of users authorizing the app before we can use this flow for the product. It would be good and simplified if this step can be done once for an org and the article does mentions that either User or Admin can authorize the app. However I am not able to find how an Admin can authorize the remote access application.

Does anyone knows and can guide how can an Admin authorize an App or is thre any other way we can achieve our requirement. Any thoughts will be really appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:46:20.247

OAuth1 和 OAuth2 在设计上需要用户干预。您为克服这一点所做的任何事情都是谨慎的，而不是最佳实践。您可以让用户轻松，但您将始终收到初始的“授权此应用程序”消息。

如果您试图让用户轻松登录到任一组织，那么您可能需要考虑使用中心辐射型 SSO 解决方案。 [请参阅此文档。](http://wiki.developerforce.com/page/Implementing_Single_Sign-On_Across_Multiple_Organizations)

如果您尝试在两个 Salesforce 实例之间传递信息，那么您可能需要考虑 Salesforce2Salesforce 或出站工作流。但是，这是在系统上下文而不是用户上下文中完成的。

如果您想维护用户上下文和安全性，您应该考虑新的 Salesforce Canvas API。Canvas 允许您调用出站服务，并将凭据传递给该服务，以便它可以返回通信。外部服务没有理由不能是 Salesforce 实例。

# javascript - Javascript/jQuery Change variable of checkbox

> ID：13816710
> 
> 赞同：0
> 
> 时间：2012-12-11T08:55:34.930
> 
> 标签：javascript, jquery, web

I have a webpage that I want to connect though an `IFRAME`. There is a checkbox on the page which I need to change the value of.

My `IFRAME` is connecting to:

```
<iframe id="intranet" src="http://webmail.ucn.dk" width="100%" height="90%"></iframe> 
```

Here's the checkbox:

```
<input id="chkBsc" name="chkBsc" type="checkbox" class="rdo" onclick="clkBsc()" value="1" disabled=""> 
```

This one as well...

```
<input id="chkBsc" name="chkBsc" type="checkbox" class="rdo" onclick="clkBsc()" value="1" enabled=""> 
```

I'm really stuck with this problem, I hope someone can guide me through to solve it. I read somewhere on the internet that Ii can change the variable with a jQuery but I couldn't find an answer.

# css - 字段集、宽度、标签、Internet Explorer 错误

> ID：13816711
> 
> 赞同：0
> 
> 时间：2012-12-11T08:55:43.153
> 
> 标签：css, forms, internet-explorer-9, size, internet-explorer-10

在这个例子中**只有 Internet Explorer 9 或 10** : [http://jsfiddle.net/QQxgg/](http://jsfiddle.net/QQxgg/) 如果我放一个主字段集的宽度，例如 655px，文本的标签比正常的大。

在 Firefox 和 Chrome 中，标签大小是自动宽度，所以**行为 OK**。是否可以在 Internet Explorer 中指定字段集的宽度和标签自动宽度？谢谢。

![即9,10](../Images/218cbc18df69efc7a3e4234ecb7349f7.png)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<style>
fieldset {
width: 655px;
}

fieldset {
    display: table;
}
fieldset p {
    display: table-row;
}
fieldset input, 
fieldset select, 
fieldset label {
    display: table-cell;
    margin: 3px;    
}
fieldset label {
    text-align: right;
}

</style>
</head>
<body>

<fieldset>          
<p><label>First Name: </label><input type="text" /></p>
<p><label>Second Name: </label><input type="text" /></p>
<p><label>Country: </label><select><option>Choose</option></select></p>
<p><label>Age: </label><select><option>Choose</option></select></p>
</fieldset> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:49:26.263

我的问题得到解决，通过强制标签为 1px 并设置 white-space:nowrap; 示例：http: [//jsfiddle.net/DpGcW/](http://jsfiddle.net/DpGcW/)

```
fieldset label {
text-align: right;
width: 1px;
white-space:nowrap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:24:28.163

你想要这样的东西吗？

![即字段集的图像](../Images/47efcb8b9a8c34fc21e262a5de08251a.png)

这是代码，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<style>
fieldset {
width: 500px;
}
fieldset {
    display: inline-block;
}
fieldset input, 
fieldset select, 
fieldset label {
    display: table-cell;
    margin: 3px;    
}
fieldset label {
    text-align: right;
}
</style>
</head>
<body>
<fieldset>          
<label>First Name: </label><input type="text" /><br>
<label>Second Name: </label><input type="text" /><br>
<label>Country: </label><select><option>Choose</option></select><br>
<label>Age: </label><select><option>Choose</option></select>
</fieldset> 
</body>
</html> 
```

# neo4j - 如何在 Neo4j 中重命名关系？

> ID：13816712
> 
> 赞同：14
> 
> 时间：2012-12-11T08:55:44.243
> 
> 标签：neo4j, rename, relationship, keyword, cypher

我只有在导入大量节点后才意识到我已经创建了名为 的关系`START`，这是一个保留关键字。因此，通过 Cypher 控制台查询数据库总是抱怨保留关键字：

> SyntaxException: 保留关键字 "start n=node(0) match n<-[:START]-r return count(r)"

想到的唯一解决方法是创建具有不同名称的新副本关系，然后删除旧的。

有没有一种简单的方法可以重命名所有这些关系，或者有什么方法可以逃避 Cypher 中的保留关键字？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-20T02:12:43.080

要进行等效的重命名，您可以创建一个新的并删除旧的，如下所示：

```
match (n1)-[old:`Start`]->(n2)
create (n1)-[new:StartDate]->(n2)
delete old 
```

nb 使用像 `Start` 周围的反引号来转义保留关键字

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T10:21:22.990

你说的对。您不能重命名已经存在的关系。您必须[遍历所有关系](http://api.neo4j.org/current/org/neo4j/tooling/GlobalGraphOperations.html#getAllRelationships%28%29)，并行创建新的（包括所有属性），然后删除旧的。

您可能还需要考虑`START`在密码查询中使用反引号引用保留字，并保持关系不变：

```
start n=node(0) match n<-[:`START`]-r return count(r) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-31T18:45:40.703

```
match (n1)-[old:`Start`]->(n2)
create (n1)-[new:StartDate {propName:old.propName, ...}]->(n2)
delete old 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-26T03:36:51.650

您可以使用[apoc](https://neo4j.com/labs/apoc/4.1/graph-updates/graph-refactoring/rename-label-type-property/)插件重命名标签和关系。您还可以使用它来选择要重命名的关系子集。例如，下面的查询将仅重命名 Jim 和 Alistair 之间的关系。

```
MATCH (:Engineer {name: "Jim"})-[rel]->(:Engineer {name: "Alistair"})
WITH collect(rel) AS rels
CALL apoc.refactor.rename.type("COLLEAGUES", "FROLLEAGUES", rels)
YIELD committedOperations
RETURN committedOperations 
```

# c++ - 寻找关于散列和 BST 函数和大 O 表示法的说明

> ID：13816713
> 
> 赞同：1
> 
> 时间：2012-12-11T08:55:45.053
> 
> 标签：c++

因此，我试图了解 BST 和散列的某些函数的数据类型和大 O 表示法。

那么首先，BST 和散列是如何存储的？BST 通常是数组，还是链表，因为它们必须指向它们的左叶和右叶？哈希呢？在基于计算的搜索方面，我很难找到有关散列的明确信息。我知道散列最好用一系列链来实现。这是为了更快的搜索还是减少创建分配数据类型的开销？

下面这个问题对我来说可能只是不好的解释，但是是什么让遍历函数与 BST、散列和 STL 容器中的搜索函数不同？BSTS 的遍历大 O(N) 是因为您实际上是在访问每个节点/数据成员，而 search() 可以通过消除一半的搜索字段来减少其时间？

并且有点相关，为什么在 STL 中，list.insert() 和 list.erase() 有一个大 O(1) 而向量和双端队列对应物是 O(N)？

最后，为什么 vector.push_back() 会是 O(N)？我认为该函数可以按照 O(1) 的方式来完成，但我遇到过文本说它是 O(N)：

```
vector<int> vic(2,3);
vector<int>::const iterator IT = vic.end();

//wanna insert 4 to the end using push_back

IT++;
(*IT) = 4; 
```

希望这有效。我有点累，但我很想解释为什么类似的事情不会有效或不合理。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:29:54.300

BST（有序二叉树）是一系列节点，其中一个父节点指向它的两个子节点，而这两个子节点又指向它们的最大两个子节点，等等。它们在 O(n) 时间内被遍历，因为遍历会访问每个节点。查找需要 O(log n) 时间。插入需要 O(1) 时间，因为在内部它们不需要一堆现有节点；只需分配一些内存并重新瞄准指针。:)

散列 (unordered_map) 使用散列算法将元素分配给存储桶。通常桶包含一个链表，因此哈希冲突只会导致同一个桶中的多个元素。正如预期的那样，遍历将再次是 O(n)。查找和插入将摊销 O(1)。摊销意味着平均为 O(1)，尽管单个插入可能会导致重新散列（重新分配存储桶以最大程度地减少冲突）。但随着时间的推移，平均复杂度为 O(1)。但是请注意，大 O 表示法并没有真正处理“常数”方面。唯一的增长顺序。散列算法中的恒定开销可能足够高，以至于对于某些数据集，O(log n) 二叉树的性能优于散列。尽管如此，散列的优点是它的操作是恒定的时间复杂度。

搜索函数利用“顺序”的概念（在二叉树的情况下）；通过 BST 的搜索与在有序数组上的基本二分搜索具有相同的特征。O(log n) 增长。哈希并不真正“搜索”。他们计算桶，然后快速通过碰撞找到目标。这就是为什么查找是恒定时间的原因。

至于插入和擦除；在基于数组的序列容器中，目标之后的所有元素都必须向右移动。C++11 中的移动语义可以提高性能，但操作仍然是 O(n)。对于链接的序列容器（list、forward_list、trees），插入和擦除只是意味着在内部摆弄一些指针。这是一个恒定时间的过程。

push_back() 将是 O(1)，直到您超过向量的现有分配容量。一旦超过容量，就会进行新的分配以生成一个足够大以容纳更多元素的容器。然后需要将所有元素移动到更大的内存区域，这是一个 O(n) 过程。我相信 Move Semantics 在这里也可以提供帮助，但它仍然是 O(n)。向量和字符串的实现方式是，当它们为不断增长的数据集分配空间时，它们分配的空间超过了它们需要的空间，以期待额外的增长。这是一种效率保障；这意味着典型的 push_back() 不会触发新的分配并将整个数据集移动到更大的容器中。但最终在足够的 push_backs 之后，就会达到极限，并且向量'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:58:19.033

遍历是指访问**每个**节点，而搜索只是找到一个特定的节点，所以你的直觉就在那里。O(N) 复杂度，因为您需要访问 N 个节点。

`std::vector::insert`用于在中间插入，它涉及将所有后续元素复制一个插槽，以便为插入的元素腾出空间，因此 O(N)。链表没有这个问题，因此 O(1)。类似的逻辑`erase`。`deque`属性类似于`vector`

[std::vector::push_back 是一个 O(1) 操作](http://www.cplusplus.com/reference/vector/vector/push_back/)，在大多数情况下，只有在超出容量并且需要重新分配 + 复制时才会偏离。

# php - preg_replace 正则表达式 if else

> ID：13816715
> 
> 赞同：0
> 
> 时间：2012-12-11T08:55:51.760
> 
> 标签：php, regex

假设我使用以下 php 函数：

```
 preg_replace($search, $replace, $str); 
```

我只能修改搜索和替换 var。是否可以进行以下替换：

```
test -> test test2 
```

和

```
test 3 -> test3 
```

我尝试了以下方法：

```
$search = '/test (?=*)/';
$replace = 'test($1)'; 
```

这适用于第二种情况。但是现在我想使用 if 来表示“如果 $1 为空，请添加 test2。但我只能修改搜索和替换 var 而无需使用添加 php。这在正则表达式中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:00:34.757

您可以将搜索和替换参数作为数组传递。所以将一个搜索查询数组传递给搜索参数，并在替换参数中传递一个相应的替换字符串数组......

所以，你可以试试：

```
$search = array('/test(\s?)$/','/test (?=*)/');
$replace = array('test test2','test($1)');
preg_replace($search, $replace, $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:02:40.683

我认为对于您的任务，您不应该使用正则表达式。对于这种情况，您可以使用 str_replace 和两个数组 - 用于搜索和更改

```
$str = str_replace(array("test", "test 3"), array("test test2", "test3"), $str); 
```

# java - 带有 HornetQ 的 JBoss 7 中 JMS 队列的“持久”属性是什么意思？

> ID：13816718
> 
> 赞同：15
> 
> 时间：2012-12-11T08:55:59.593
> 
> 标签：java, jakarta-ee, jms, jboss7.x, hornetq

在使用 HornetQ（基于standalone-full.xml 配置）在 JBoss 7 上配置 JMS 队列期间，我注意到一个属性“durable”。

![在此处输入图像描述](../Images/4513aa872e7686e47f6aafb43dc3b160.png)

我浏览了几个来源，其中许多都表示队列始终是“持久的”，这意味着消息将始终被传递，即使在发送时潜在接收者处于非活动状态的情况下也是如此。

JBoss 7 HornetQ 中的这个属性是指临时队列吗？或者这个属性是指某种非临时非持久队列吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T09:14:26.640

我觉得“持久”这个词比队列更适用于主题。持久订阅是订阅者的发布在订阅者未运行时由消息传递提供者存储的订阅。一旦订阅者激活，这些存储的消息将被传递给该订阅者。对于非持久订阅者，如果他们不活跃，他们将不会收到任何发布。

关于队列，消息被保留在队列中，直到有人收到它们或它们过期。消息可以是持久的，这意味着它们将在消息提供程序重新启动后仍然存在，并且在消息提供程序关闭时消息丢失的情况下是非持久的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-12T10:18:02.770

经过短暂的调查，我得出了一些结论。所有观察均基于 JBoss 7.1.1.Final 和 HornetQ Server 2.2.13.Final。

*   非持久队列不是临时队列。它存在，直到它被手动删除。

*   所有提交到非持久队列的消息都会在 JMS 提供程序重新启动/失败时消失（传递模式，即已提交消息的 PERSISTENT / NON_PERSISTENT 将被忽略）。

*   消息的 JMSDeliveryMode 标头元素的值未修改。特别是，如果消息以 PERSISTENT 传递模式提交到非持久队列，则该标志设置为 PERSISTENT，即使非持久队列不持久保存消息（如果 JMS 提供程序重新启动/失败，它也会丢失）。

从客户端来看，这似乎有点令人不安，因为由于“非持久”队列的问题含义，发送者可能无法知道消息的声明传递模式是否会受到尊重。

此外，在这种情况下，术语“持久队列”似乎与“持久订阅”脱节，因为它似乎不会以任何方式影响将消息传递给非活动消费者。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-11T09:07:36.557

JMS 中的持久订阅意味着如果订阅者断开连接然后再次连接到 JMS 目标（队列或主题），它将接收到目前为止已发送到目标且尚未过期的所有消息。

# c#-4.0 - c# 4.0 并与 Microsoft.Bcl.Async 异步。我没有异步修改的所有类型

> ID：13816722
> 
> 赞同：4
> 
> 时间：2012-12-11T08:56:24.430
> 
> 标签：c#-4.0, async-await

我使用的是VS2012，我的项目是4.0，但是我想使用async/await关键字，所以我安装了Microsoft.Bcl.Async。

我尝试通过以下方式实现我的异步方法：

```
public async Task<bool> myMethodAync(int paramInteger)
{
    //my code, a simple code that return a bool. Is only an example
    if(paramInteger == 2)
    {
         return true;
    }
    else return false;

} 
```

我收到一个错误，我被标记了方法的名称，错误说明如下：它没有找到修改异步所需的所有类型。项目的目标是错误的版本还是缺少某些程序集的参考？

我有三个程序集 Microsoft.Threading.Task、Microsoft.Threading.Task.Extensions 和 Microsoft.Threading.Task.Extensions.Desktop 的参考，并且在我的班级 System.Threading.task 中有使用。

我还需要做什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T09:02:24.353

来自 [http://michaelmairegger.wordpress.com/2012/09/19/cannot-find-all-types-required-by-the-async-modifier/](http://michaelmairegger.wordpress.com/2012/09/19/cannot-find-all-types-required-by-the-async-modifier/)：

*此问题的解决方案是将以下 nuGet 包引用到要在其中使用 'async' 和 'await' 关键字的所有项目中。*

**`Microsoft.CompilerServices.AsyncTargetingPack`**

所以，右键单击`References`，然后选择`Manage NuGet Packages...`，然后在线搜索。**您可以在Async Targeting Pack for Visual Studio 11**的名称下找到该包。安装它，问题应该得到解决。

# c++ - I want an array of cstrings separated by white space

> ID：13816724
> 
> 赞同：0
> 
> 时间：2012-12-11T08:56:28.970
> 
> 标签：c++

I am trying to get user input and put it into an array of cstrings separated by a space. When I print the array to the screen though I get nothing. I am sure I am doing something stupid, but I have been stuck trying different ways for a while. Any help would be appreciated. Here is the code.

```
#include <iostream>
#include <cstring>

using namespace std;

void stuff(char command[][25], int length)
{
    char ch;

    for(int i = 0; i < length; i ++)
    {
        int b = 0;
        cin.get(ch);
        while(!isspace(ch))
        {
            command[i][b++] = ch;
            cin.get(ch);
        }

        command[i][b] = '\0';
        cout << endl;
    }

}

int main()
{
    char cha[10][25];
    char ch;
    int len = 0;
    while(ch != '\n')
    {
        cin.get(ch);
        if(isspace(ch))
            {
                len++;
            }
    }
    stuff(cha,len);
    for(int i = 0; i < len; i++)
    {
        cout << cha[i] << endl;
    } 
    cout << len << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:31:16.693

a) ch is undefined when you first test it with `while (ch != '\n')`. Initialize it to zero or something.

b) You don't write any values into cha in the while loop. Perhaps something like:

```
int pos = 0;
while(ch != '\n') {
    cin.get(ch);
    if (isspace((unsigned)ch)) {
       if (pos > 0) {
           ++len;
           pos = 0;
       }
    }
    else {
       cha[len][pos] = ch;
       ++pos;
    }
} 
```

c) You are reading the stream again in `stuff(...)` but have already consumed what you wanted to get from the stream in `main()`.

d) This code suffers from a number of buffer overrun and stack corruption opportunities. perhaps use a `std::vector<std::string>` instead. If it runs out of memory it will throw an exception rather than make a mess on the stack. Perhaps something like this (untested):

```
#include <iostream>
#include <string>
#include <vector>

using namespace std;

void main()
{
    typedef std::vector<std::string> strvec;
    strvec cha;
    std::string s;
    char ch = 0;
    while(ch != '\n') {
        cin.get(ch);
        if (isspace((unsigned)ch)) {
            if (!s.empty()) {
                cha.push_back(s);
                s.clear();
            }
        }
        else {
            s.push_back(ch);
        }
    }
    // don't need to call 'stuff' to null terminate.
    for (strvec::iterator i = cha.begin(); i != cha.end(); ++i) {
        cout << *i << endl;
    }
    cout << cha.size() << endl;
} 
```

This could be a little more efficient than it is but hopefully it is easy to understand.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:15:11.813

You are reading the whole input in the while cycle in the main to read length(number of strings), but you never store it. Later on in `stuff` `cin.get` will read nothing. Maybe store the input in cha during the first cycle?

# c++ - 我可以在 C++ 抽象类中添加什么类型的成员

> ID：13816728
> 
> 赞同：0
> 
> 时间：2012-12-11T08:56:39.377
> 
> 标签：c++, function, polymorphism, pure-virtual

你好，假设我有一个抽象类，它有几个纯抽象函数，我有几个从这个类派生的类，这些类的所有数据最终变得相似，我想知道是否明智甚至可以声明抽象类中受保护的向量来收集数据，就像这样。

```
class A
{
protected:
    vector <string> str;
public:
    virtual function x();
    virtual function y(); //etc etc
    virtual ~A(){;}
};

class B : public A
{
public:
    function x();
    function y();
};

class C: public A
{
    //similar to class B
} ; 
```

我很难理解纯虚函数如何与 c++ 一起工作，我理解多态性，因为我在 java 中使用它完成了许多项目。由于c ++中的抽象类无法实例化，甚至可以声明和使用该向量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:06:55.253

纯虚成员函数声明为

```
virtual <return-type> func(<parameters>) = 0; 
```

它们只是虚函数，它们也可以像任何其他虚函数一样工作。通常，他们没有或不需要实现，但如果需要，您可以提供一个。

您可以将任何想要的成员添加到 C++ 中的抽象类中。抽象类只是具有一个或多个纯虚成员函数的常规类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:35:59.257

```
I was wondering if it would be wise or even possible to declare a vector under protected in the abstract class to collect the data. 
```

是的，提升在几个派生类型之间共享的数据成员是合理的设计选择。

```
What type of members can I add in a c++ abstract class? 
```

您可以在抽象类中添加任何类型的成员。一般来说，一个类的数据成员应该只在该类的构造函数和其他成员函数中初始化和分配。否则会破坏封装，从而使类的维护和修改更加困难。

```
I am having difficulty understanding how pure virtual functions work with c++ 
```

通过在其声明的末尾放置 = 0 将虚函数指定为纯虚函数。您不必为纯虚函数提供定义。

您不能声明抽象基类的实例；在声明其他类时，您只能将其用作基类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:05:11.377

1.  我在这里看不到任何抽象类
2.  您可以将任何类型的成员包含到抽象类中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T09:08:14.433

比什么更重要的是为什么。

抽象类不仅仅是一个“所有功能都变成纯虚拟的类”。它代表了面向对象编程中的某种意识形态。当用作接口时，它们不应该包含状态。

# c# - 更新 datagridview 组合框，抛出“操作无效，因为它导致对 SetCurrentCellAddressCore 函数的可重入调用。”

> ID：13816729
> 
> 赞同：1
> 
> 时间：2012-12-11T08:56:42.263
> 
> 标签：c#

当我尝试更新 datagridview 组合框的内容时，它会抛出 Operation is not valid，因为它会导致在 line ,node.Cells[(int)Parameters.eColumn.valueBySelectionColumn] = cboCell; 处对 SetCurrentCellAddressCore 函数进行可重入调用；

我怎么解决这个问题？？谢谢

```
 private void treeGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        try
        {
            if (e.Control.GetType() == new DataGridViewComboBoxEditingControl().GetType())
            {
                if ((cboEditor != null) && (cboEditor_EventHandler != null))
                {
                    cboEditor.SelectedIndexChanged -= cboEditor_EventHandler;
                }
                cboEditor = (DataGridViewComboBoxEditingControl)e.Control;
                cboEditor.SelectedIndexChanged += cboEditor_EventHandler;

                if (this.treeGridView1.SelectedCells.Count > 0 &&
                    this.treeGridView1.SelectedCells[0].ColumnIndex == (int)Parameters.eColumn.valueBySelectionColumn)
                {
                    TreeGridNode node = GetCurrentNode();
                    object cellValue = node.Parent.Cells[(int)Parameters.eColumn.sectionTypeColumn].Value;

                    Parameters.eSection section = (Parameters.eSection)dicSection[cellValue.ToString()];
                    this.treeGridView1.Focus();
                    switch (section)
                    {
                        case Parameters.eSection.UNIX_Script:
                            DataGridViewComboBoxCell cboCell = Parameters.ValidateChoice(Parameters.eSection.UNIX_Script,
                                node.Cells[(int)Parameters.eColumn.parameterTypeColumn].Value,
                                ref cboEditor);
                            if (cboCell != null)
                            {
                                ***node.Cells[(int)Parameters.eColumn.valueBySelectionColumn] = cboCell;***
                                node.Cells[(int)Parameters.eColumn.valueBySelectionColumn].Style.BackColor =
                                    node.Cells[(int)Parameters.eColumn.sequenceColumn].Style.BackColor;
                            }
                            break;
                    }
                }
            }
        }
    } 
```

# jquery - jQuery 添加类并删除所有其他类

> ID：13816730
> 
> 赞同：6
> 
> 时间：2012-12-11T08:56:43.320
> 
> 标签：jquery, html, css

所以我有一些导航锚。单击这些时，我想更改页面上的一些基本配色方案。我能够做到这一点的唯一方法是使用下面的代码。

它工作正常，但我不禁认为有一种更优雅的方式。有人知道是否有可能一举取消课程吗？

编辑：这本来可以更清楚。我不希望原来的课程消失。我猜只是用 jQuery 添加的类。对困惑感到抱歉。

谢谢。

编辑：[看到这个小提琴](http://jsfiddle.net/sheriffderek/EXq83/)

试图实施所有解决方案。

得到一个 "{"error": "Please use POST request"}" 虽然......

编辑：这是因为 href="?" 正如所指出的那样，与 href="#" 对比。

```
 $(".home").click(function() {
        $(".primary-color").addClass("one");
            $(".primary-color").removeClass("two"); 
            $(".primary-color").removeClass("three");   
            $(".primary-color").removeClass("four");    
            $(".primary-color").removeClass("five");           
    });

    $(".services").click(function() {
        $(".primary-color").addClass("two");
            $(".primary-color").removeClass("one");
            $(".primary-color").removeClass("three");   
            $(".primary-color").removeClass("four");    
            $(".primary-color").removeClass("five");       
    });

    $(".pricing").click(function() {
        $(".primary-color").addClass("three");
            $(".primary-color").removeClass("one");
            $(".primary-color").removeClass("two");     
            $(".primary-color").removeClass("four");    
            $(".primary-color").removeClass("five");       
    });

    $(".special-thing").click(function() {
        $(".primary-color").addClass("four");
            $(".primary-color").removeClass("one");
            $(".primary-color").removeClass("two"); 
            $(".primary-color").removeClass("three");   
            $(".primary-color").removeClass("five");   
    });

    $(".contact").click(function() {
        $(".primary-color").addClass("five");
            $(".primary-color").removeClass("one");
            $(".primary-color").removeClass("two"); 
            $(".primary-color").removeClass("three");   
            $(".primary-color").removeClass("four");     
    }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T09:25:32.847

你可以这样做

[http://jsfiddle.net/lollero/ZUJUB/](http://jsfiddle.net/lollero/ZUJUB/)

```
$(document).ready(function() {
    $(".home, .services, .pricing, .special-thing, .contact").on("click", function() {

        $(".primary-color")
            // Remove all classes
            .removeClass()
            // Put back .primary-color class + the clicked elements class with the added prefix "pm_".
            .addClass('primary-color pm_' + $(this).attr('class') );       
    });
});​ 
```

CSS：

```
.primary-color {
    width: 100px;
    height: 100px;
    border: 1px solid #e1e1e1;

}

.pm_services { background: red; }
.pm_home { background: green; }
​ 
```

HTML：

```
<div class="services">services</div>
<div class="home">home</div>

<div class="primary-color">Primary-color</div>
​ 
```

* * *

* * *

或类似的东西：

[http://jsfiddle.net/lollero/ZUJUB/1/](http://jsfiddle.net/lollero/ZUJUB/1/)

这符合 OP 的结构：http: [//jsfiddle.net/lollero/EXq83/5/](http://jsfiddle.net/lollero/EXq83/5/)

jQuery：

```
$(document).ready(function() {
    $("#buttons > div").on("click", function() {

        $(".primary-color")
            // Remove all classes
            .removeClass()
            // Put back .primary-color class + the clicked elements index with the added prefix "pm_".
            .addClass('primary-color pm_' + ( $(this).index() + 1 ) );       
    });
});​ 
```

CSS：

```
.primary-color {
    width: 100px;
    height: 100px;
    border: 1px solid #e1e1e1;

}

.pm_1 { background: red; }
.pm_2 { background: green; }
​ 
```

HTML：

```
<div id="buttons">
    <div class="services">services</div>
    <div class="home">home</div>
</div>

<div class="primary-color">Primary-color</div>
​ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T08:58:23.650

你可以使用 attr 方法，

```
$(".xxx").attr("class","newclass"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-11T08:58:41.903

只是`$(".primary-color").removeClass()`（不指定类）应该可以工作！

或者，如果您只需要剥离类（留下其他重要的类），您可以将其分组为 1 个调用，用空格分隔类：

```
$(".primary-color").removeClass("two three four five"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-11T09:00:54.353

您可以使用`removeClass()`不带参数来删除所有类，
请参阅：[http ://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

```
$(".primary-color").removeClass(); 
```

或使用空格分隔的符号来删除您指定的类：

```
$(".primary-color").removeClass('one two'); 
```

或通过以下方式设置全新的类属性`attr()`：

```
$(".primary-color").attr('class','one two'); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-11T09:13:58.650

这应该有效：

```
$(".home").click(function() {
   $(".primary-color").removeClass().addClass("one");          
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-11T08:59:29.100

您可以通过执行从元素中删除所有类

```
$("#item").removeClass(); 
```

不带参数调用 removeClass 将删除所有项目的类。

在你做之前做这件事`addClass`，你的代码会减少

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T08:59:23.480

我相信这就是你要找的。您应该简单地设置类属性，而不是加减法。当然，如果有要保留的类，您也可以设置它们，但如果这不合适，您可能应该考虑完全以另一种方式进行。

```
$(".home").click(function() {
    $(".primary-color").attr("class", "one");
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-11T09:03:38.100

可以应用很多收缩。在不知道代码细节的情况下，很难进行任何进一步的更改。

```
$(".home, .contact, .special-thing, .pricing, .services").click(function() {
  $(".primary-color")
    .addClass("one")
    .removeClass("two three four five");          
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-07T17:56:19.167

8年后...

我想我会使用数据属性 - 然后将其切换出来，而不是添加和删除类。

`<body data-theme='punk'>`或者其他的东西。

[https://codepen.io/sheriffderek/pen/34c8b5540b34c8ee9aedec604bbd5f59](https://codepen.io/sheriffderek/pen/34c8b5540b34c8ee9aedec604bbd5f59) & 你也可以使用浏览器 localStorage 来保存选择:)

```
// I'd use body... but for this
var context = document.querySelector('main');

function setTheme(name) {
  context.dataset.theme = name;
}

setTheme('default');

// https://gomakethings.com/why-is-javascript-event-delegation-better-than-attaching-events-to-each-element/
document.addEventListener('click', function(event) {

  setTheme(event.target.dataset.themeOption);

});
```

```
main[data-theme='default'] {
  background-color: lightgray;
}

main[data-theme='punk'] {
  background-color: #FF0066;
}

main[data-theme='corperate'] {
  background-color: white;
  color: purple;
}
```

```
<main data-theme='default'>

  <button data-theme-option='default'>Default</button>
  <button data-theme-option='punk'>Punk</button>
  <button data-theme-option='corperate'>Corperate</button>

  <h1>Theme changer thingy</h1>

</main>
```

# php - 在函数中访问全局 php 对象会导致错误

> ID：13816731
> 
> 赞同：0
> 
> 时间：2012-12-11T08:56:43.883
> 
> 标签：php

`$db=new DataBase();`

这是我在全球范围内创建的对象。为了在函数中访问它，我使用了 global 关键字。这是代码：

```
include "Database.php";
$db=new DataBase();

function getUser()
{
    $uname=$_SESSION['UNAME'];
    global $db,$uid;
    $result2=$db->selectUserDetails();
    $result3=$db->selectUserPermission($uid);
    $table =   constructTable($result2, $result3);
    echo $table;
} 
```

当我使用它时，它显示错误

```
"Fatal error:  Call to a member function selectUserDetails() on a non-object 
in C:\\wamp\\www\\listdetails.php on line 27" 
```

任何人都可以告诉我一个解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T09:19:52.310

这听起来像你在非静态上下文中调用静态函数..

我认为您需要取消新的 DataBase() 并静态调用该函数；

```
$result2=$db::selectUserDetails(); 
```

# sql - 如果不存在，则插入两个表的总和

> ID：13816738
> 
> 赞同：2
> 
> 时间：2012-12-11T08:57:06.053
> 
> 标签：sql, sql-server-2008, sum, full-outer-join

我有一种情况，我想对两个表之间的差异求和。问题是第二个表中可以存在一行，然后我想将它作为新行插入。

伪

```
SELECT T1.seller, T1.code, T1.amount - T2.amount 
```

查看图片以获得解释

[关联](http://postimage.org/image/aj6sn3muf/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:20:51.357

```
 DECLARE @T1 TABLE(
    seller VARCHAR(10),
    code VARCHAR(3) NULL,
    amount MONEY
)

 DECLARE @T2 TABLE(
    seller VARCHAR(10),
    code VARCHAR(3) NULL,
    amount MONEY
)

INSERT INTO @T1 VALUES
('VL',NULL,1),
('VL','317',70005.6)

INSERT INTO @T2 VALUES
('VL',NULL,0.5),
('VL','500',4450)

SELECT seller,code,SUM(amount) [amount] FROM 
(
SELECT * FROM @T1
UNION ALL
SELECT seller,code,-amount as amount FROM @T2
) T
GROUP BY seller,code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:13:13.250

您需要进行完全外部连接 - 然后总结一下。如果您只运行内部查询，您将获得每个可能的行组合（在 t1 中不包含，在 t1 和 t2 中都存在，在 t2 中不包含） - 然后将其分组并求和。

```
SELECT  Seller ,
        Code ,
        SUM(Tab1_amt - Tab2_amt) AS Amount
FROM    ( SELECT    COALESCE(tab1.Seller, tab2.Seller) AS Seller ,
                    COALESCE(tab1.code, tab2.code) AS Code ,
                    COALESCE(tab1.amount, 0) AS tab1_amt ,
                    COALESCE(tab2.amount, 0) AS tab2_amt
          FROM      tab1
                    FULL OUTER JOIN tab2 ON tab1.seller = tab2.seller
                                            AND tab1.code = tab2.code
        ) AS Tbl
GROUP BY Seller ,
        Code 
```

请参阅[SQLFiddle 演示](http://sqlfiddle.com/#!3/c3084/6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:13:48.883

我认为您需要一个`FULL JOIN`（除非您实际上希望将行插入到第一个表中）

```
SELECT  COALESCE(t1.Seller, t2.Seller) AS Seller,
        COALESCE(t1.Code, t2.Code) AS Code,
        COALESCE(t1.Amount, 0) - COALESCE(t2.Amount, 0) AS Amount
FROM    Table1 t1
        FULL JOIN Table2 t2
            ON t1.Seller = t2.Seller
            AND COALESCE(t1.Code, 0) = COALESCE(t2.Code, 0); 
```

如果确实需要将行插入表 1，则需要执行 2 次操作，首先插入，然后选择：

```
INSERT Table1 (Seller, Code, Amount)
SELECT  t2.Seller, t2.Code, 0 AS Amount
FROM    Table2 t2
WHERE   NOT EXISTS
        (   SELECT  1
            FROM    Table1 t1
            WHERE   t1.Seller = t2.Seller
            AND     COALESCE(t1.Code, 0) = COALESCE(t2.Code, 0)
        );

SELECT  t1.Seller, 
        t1.Code, 
        t1.Amount - COALESCE(t2.Amount, 0) AS Amount
FROM    Table1 t1
        LEFT JOIN Table2 t2
            ON t1.Seller = t2.Seller
            AND COALESCE(t1.Code, 0) = COALESCE(t2.Code, 0); 
```

**编辑**

如果每个表中的行不是唯一的并且您需要对它们求和，那么您将需要在子查询中进行求和，因为 JOIN 将引入交叉连接：

考虑这些数据

```
Table1
Seller  Code    Amount
VL      500     10
VL      500     20

Table2
Seller  Code    Amount
VL      500     30
VL      500     5 
```

加入此活动您将获得：

```
t1.Seller   t1.Code t1.Amount   t2.Seller   t2.Code t2.Amount
VL          500     10          VL          500     30
VL          500     10          VL          500     5
VL          500     20          VL          500     30
VL          500     20          VL          500     5 
```

差的总和是 -10 而不是 -5。

```
SELECT  COALESCE(t1.Seller, t2.Seller) AS Seller,
        COALESCE(t1.Code, t2.Code) AS Code,
        COALESCE(t1.Amount, 0) - COALESCE(t2.Amount, 0) AS Amount
FROM    (   SELECT  Seller, Code, SUM(Amount) AS Amount
            FROM    Table1 
            GROUP BY Seller, Code
        ) t1
        FULL JOIN 
        (   SELECT  Seller, Code, SUM(Amount) AS Amount
            FROM    Table2 
            GROUP BY Seller, Code
        ) t2
            ON t1.Seller = t2.Seller
            AND COALESCE(t1.Code, 0) = COALESCE(t2.Code, 0); 
```

**编辑 2**

[丹尼尔答案](https://stackoverflow.com/a/13817111/1048425)中的`UNION`方法将比 FULL JOIN 执行得更好：

```
SELECT  Seller, Code, Amount = SUM(Amount)
FROM    (   SELECT  Seller, Code, Amount
            FROM    Table1
            UNION
            SELECT  Seller, Code, -Amount
            FROM    Table2
        ) t
GROUP BY Seller, Code 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T09:16:36.077

像这样的东西？你不知道要插入什么表到“因此tableX”

```
insert into tableX (seller,code,amount) values (T1.seller, T1.code, T1.amount -T2.amount)
select count(*) from table2 having count(*) < 1 
```

请注意，您在插入以应用过滤器之后将过滤器作为选择语句放置您没有指定您需要什么类型的 sql，所以我不能说这是否有效

# html - 为 IE8 上的表格中的最后一个 td 提供宽度

> ID：13816740
> 
> 赞同：0
> 
> 时间：2012-12-11T08:57:17.863
> 
> 标签：html, css, internet-explorer-8

我的项目中所有表的最后一列都有问题，因为在最后一列中我有操作按钮，不幸的是我想内联显示表 td 具有自动宽度，允许它们根据 td 的内容动态变化。如何为最后一个 td 列提供固定宽度。就像是：

```
last td{
min-width: 50px;
max-width: 300px;
width: auto;
} 
```

为了占据最后一个 td 的整个空间并显示在一行上，我不知道`white-space: nowrap;`td 的某些行是否正在工作：| ...并记住，即 8 :)

小提琴示例：http: [//jsfiddle.net/ux4DD/133/](http://jsfiddle.net/ux4DD/133/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:11:22.807

现在尝试`display:inline-block;`

```
.icon1, .icon2, .icon3, .icon4{
display:inline-block;
vertical-align:top;
} 
```

**[演示](http://jsfiddle.net/ux4DD/137/)**

你忘记了你的课`[.]`

**这**

```
 icon2{} 
icon4{} 
```

**进入这个**

```
.icon2 {}

.icon4{} 
```

# variables - OBIEE 存储库变量和会话变量之间的区别

> ID：13816745
> 
> 赞同：2
> 
> 时间：2012-12-11T08:57:30.030
> 
> 标签：variables, repository, obiee

Oracle 商业智能企业版 (OBIEE) 中的存储库变量和会话变量有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:44:38.420

会话变量可以对每个用户有不同的值，存储库变量对每个人都有相同的值。

会话变量有两种类型：

*   系统会话变量：开箱即用的变量，如 USER
*   非系统会话变量：用户定义的变量，可以为每个用户设置不同的值，通常用于自定义用户体验，例如，您可以有一个 SALES_REGION 变量来仅显示与用户所在区域相关的数据。

存储库变量也有 2 个子类型：

*   静态存储库变量：只能使用管理工具更改的固定值，可用于替换连接池中的数据库模式和用户名等硬编码值。
*   动态存储库变量：这些保存适用于任何用户的值，例如货币汇率。

会话变量和动态存储库变量从可以包含 SQL 的初始化块中获取它们的值。

链接：[OBIEE 11g 用户手册 - 使用变量](http://docs.oracle.com/cd/E23943_01/bi.1111/e10544/analyses.htm#BIEUG2789)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:16:56.457

**存储库变量有 2 种类型 - 静态和动态**

*   **静态变量**保存不易改变的值。
*   **动态变量**包含易于变化的值。它是在初始化块的帮助下完成的。

**会话变量有 2 种类型 - 系统和非系统**

*   **系统变量**是 BI 服务器使用的保留变量。
*   **非系统变量**是在用户登录时初始化的变量。与动态存储库变量一样，需要初始化块。

主要区别是存储库初始化块被安排，而在会话的情况下，它们没有被安排。

[http://biexplorers.blogspot.in/2014/06/obiee-variables-by-sagar.html](http://biexplorers.blogspot.in/2014/06/obiee-variables-by-sagar.html)

# html - php：要在 Html 电子邮件中显示的 Textarea HTML 值？

> ID：13816746
> 
> 赞同：0
> 
> 时间：2012-12-11T08:57:32.120
> 
> 标签：html, email, textarea, php

我正在使用 PHPmailer，一切都很完美，除了里面的文本`<textarea>`显示为单行。意思是，根本没有 html 值（仅适用于 TEXTAREA）。

*   实际上**邮件本身已经是 HTML**。
*   我也可以嵌入图像..等。
*   只是`<textarea>`不工作。

我正在使用这个：

```
$mail->IsHTML(true);
$mail->Body = $_POST['textarea']; 
```

可以说`<textarea>`包含如下内容：

```
Hello,
How are you.

Best Wishes,
4lvin 
```

然后在电子邮件中，它显示如下：

```
Hello, How are you. Best Wishes, 4lvin 
```

请问有什么想法吗？:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T08:59:42.260

采用

```
$mail->IsHTML(true);
$mail->Body = nl2br($_POST['textarea']); 
```

# c# - RFID 阅读器设备 IP 在 netstat 中未处于已建立状态

> ID：13816749
> 
> 赞同：2
> 
> 时间：2012-12-11T08:57:37.723
> 
> 标签：c#, tcp, ip, netstat

我正在尝试编写一个 C# 代码，这将帮助我获得 RFID 阅读器设备 IP。

我正在使用 netstat C# 实现，它提供了所有本地和外部地址。现在的问题是，通过以太网 TCP/IP 连接后，我有时会看到`netstat`读卡器 IP 暂时看到`TIME_WAIT`状态，然后消失。从未在我的 PC 上看到它处于已建立状态，因此我的代码无法获取该 IP。

此外，我将 Marvell yukon LAN 适配器设置为 10Mps 全双工而不是自动模式。所以最大的问题是我是否需要使用适配器进行设置/配置，或者我是否需要编写另一个 C# 代码来检测我的阅读器 IP，而不管 TCP/IP 连接的状态如何。

注意：连接后，Ping 读卡器始终有效。我尝试重置 LAN 和阅读器，但它仍然没有显示在`netstat`输出中。

编辑：我使用[http://towardsnext.wordpress.com/2009/02/09/netstat-in-c/](http://towardsnext.wordpress.com/2009/02/09/netstat-in-c/)作为参考

# javascript - Facebook JS SDK 在页面加载时注销

> ID：13816751
> 
> 赞同：0
> 
> 时间：2012-12-11T08:57:43.900
> 
> 标签：javascript, jquery, facebook, authentication, facebook-javascript-sdk

我想知道如何在页面加载时执行此操作。它与“onClick”一起使用，即`<a href="#" onClick="FB.logout()">Logout</a>`<-有效

但如果我做了这样的事情：

```
 // INIT (file 1)
 $ ->
    $('body').prepend('<div id="fb-root"></div>')

    $.ajax
        url: "#{window.location.protocol}//connect.facebook.net/en_US/all.js"
        dataType: 'script'
        cache: true

    window.fbAsyncInit = ->
        FB.init(appId: 'xxxxxxxxxxxx', cookie: true)

       $('#facebook_sign_in').click (e) ->
          e.preventDefault()
          FB.login (response) ->
            window.location = '/auth/facebook/callback' if response.authResponse

    // FILE 2

    <script src="file1.js" type="text/javascript"></script> 
    $(document).ready(function(){
        FB.logout(); <- Nothing happens
    }); 
```

调试器说，FB 变量没有定义。但是，如果 onClick 像魅力一样工作，为什么它会是未定义的呢？

那么，这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:18:50.020

似乎当您使用 FB api 时，它还没有被加载。

`$.ajax()`用于加载 FB`all.js`脚本可能是原因，请向其添加回调函数，或将脚本加载到 html 的头部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-04T13:12:36.680

请试试这个。

```
 $(document).ready(function(){
            FB.logout(function(response) {
               FB.Auth.setAuthResponse(null, 'unknown');
             });
        }); 
```

这是指[Facebook JS SDK FB.logout() 不会终止用户会话](https://stackoverflow.com/questions/8817569/facebook-js-sdk-fb-logout-doesnt-terminate-user-session)

# jquery - cocoon nested_form 在 edit.html.erb 中的现有对象上方而不是下方添加字段

> ID：13816752
> 
> 赞同：2
> 
> 时间：2012-12-11T08:57:46.490
> 
> 标签：jquery, ruby-on-rails, nested-forms, cocoon-gem

我的 new.html.erb 工作正常。

但在我的 edit.html.erb 中，假设我有 3 个现有部门......

每当我单击添加部门链接（添加另一个字段）时，它都会继续在现有部门上方而不是在下方。

顺便说一句，我的协会说部门有很多部门，部门属于部门。

在我的控制器中：有我的新方法和编辑方法

```
def new
    @division = Division.new
     @division.departments.build 
  end

 def edit
    @division = Division.find(params[:id])

  end 
```

我需要 cocoon js 文件，所以我使用默认值而不是覆盖其他内容。

**茧.js**

```
(function($) {

  function replace_in_content(content, regexp_str, with_str) {
    reg_exp = new RegExp(regexp_str);
    content.replace(reg_exp, with_str);
  }

  function trigger_removal_callback(node) {
    node.parent().parent().trigger('removal-callback');
  }

  $('.add_fields').live('click', function(e) {
    e.preventDefault();
    var $this                 = $(this),
        assoc                 = $this.data('association'),
        assocs                = $this.data('associations'),
        content               = $this.data('template'),
        insertionMethod       = $this.data('association-insertion-method') || $this.data('association-insertion-position') || 'before';
        insertionNode         = $this.data('association-insertion-node'),
        insertionCallback     = $this.data('insertion-callback'),
        removalCallback       = $this.data('removal-callback'),
        regexp_braced         = new RegExp('\\[new_' + assoc + '\\]', 'g'),
        regexp_underscord     = new RegExp('_new_' + assoc + '_', 'g'),
        new_id                = new Date().getTime(),
        newcontent_braced     = '[' + new_id + ']',
        newcontent_underscord = '_' + new_id + '_',
        new_content           = content.replace(regexp_braced, '[' + new_id + ']');

    if (new_content == content) {
        regexp_braced     = new RegExp('\\[new_' + assocs + '\\]', 'g');
        regexp_underscord = new RegExp('_new_' + assocs + '_', 'g');
        new_content       = content.replace(regexp_braced, '[' + new_id + ']');
    }

    new_content = new_content.replace(regexp_underscord, newcontent_underscord);

    if (insertionNode){
      insertionNode = insertionNode == "this" ? $this : $(insertionNode);
    } else {
      insertionNode = $this.parent();
    }

    var contentNode = $(new_content);

    // allow any of the jquery dom manipulation methods (after, before, append, prepend, etc)
    // to be called on the node.  allows the insertion node to be the parent of the inserted
    // code and doesn't force it to be a sibling like after/before does. default: 'before'
    insertionNode[insertionMethod](contentNode);

    $this.parent().trigger('insertion-callback');
  });

  $('.remove_fields.dynamic').live('click', function(e) {
    var $this = $(this);
    trigger_removal_callback($this);
    e.preventDefault();
    $this.closest(".nested-fields").remove();
  });

  $('.remove_fields.existing').live('click', function(e) {
    var $this = $(this);
    trigger_removal_callback($this);
    e.preventDefault();
    $this.prev("input[type=hidden]").val("1");
    $this.closest(".nested-fields").hide();
  });

})(jQuery); 
```

在我的 _form.html.erb

```
<div class="new-div-box">
<%= simple_form_for [:admin, @division]  do |f| %>
  <%= f.input :name, :label => "Division Name"%>

<div>
<div>

  <%= f.simple_fields_for :departments do |department| %>
  <%= render 'department_fields', :f => department %>

  <% end %>
</div>
  <%=link_to_add_association "Add Department", f, :departments,class: "btn btn-inverse" %>
</div>

  <%= f.submit  :class=>"btn btn-primary submit_btn_division" %>

<% end %>

</div> 
```

我渲染的是_department_fields.html.erb

```
<div class="nested-fields">
  <%= f.input :name, :label => "Department Name"  %>
  <%= link_to_remove_association raw("<img src='../../../assets/remove.png' width='25px' height='25px'>"), f %>
</div> 
```

我想知道为什么新添加的字段高于我的 edit.html.erb 中的现有字段

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:01:50.177

我认为它会寻找一个具有关联的 div 作为包装嵌套字段的 id。

所以你的看法

```
<div id="departments">
  <%= f.simple_fields_for :departments do |department| %>
    <%= render 'department_fields', :f => department %>
  <% end %>
  <div class="links">
    <%=link_to_add_association "Add Department", f, :departments,class: "btn btn-inverse" %>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-17T19:55:23.703

@spullen 的解决方案可行，但他的推理不正确。如果你通过 coccon 的代码进行追踪，你会遇到这样的事情

```
var getInsertionNodeElem = function(insertionNode, insertionTraversal, $this){
    if (!insertionNode){
      return $this.parent();
    }
    ...
} 
```

然后我相信这`var addedContent = insertionNodeElem[insertionMethod](contentNode);`会添加到新节点中。

关键是新的部分将插入到`link_to_add_association`的父节点上方。So`link_to_add_association`的`<a>`元素和新输入字段的容器节点将是兄弟节点。

如果您希望插入的部分位于下方，则`link_to_add_association`必须将其包裹在自己的 div 中。例子：

```
 <div id="workout-fields">
    <%= f.simple_fields_for :workouts, validate: true do |workout| %>
      <%= render partial: 'shared/workout/form', locals: {f: workout, show_remove: false} %>
    <% end %>
    <div><%= link_to_add_association 'add workout', f, :workouts, partial: 'shared/workout/form'%></div> <!-- this wrapper is IMPORTANT for insertion ordering -->
  </div> 
```

# html - 链接填充 HTML 电子邮件

> ID：13816755
> 
> 赞同：5
> 
> 时间：2012-12-11T08:57:57.503
> 
> 标签：html, css, html-table, html-email

我有这个标记的表：

```
<tr id="main_nav">
    <td style="width: 100%" colspan="2">
        <a>Link1</a>
        <a>Link2</a>
        <a>Link3</a>                            
    </td>
</tr> 
```

我需要为这些链接设置填充，但我无法让它工作...... CSS：

```
#main_nav a {
    color: #fff;
    font-weight: bold;  
    padding-left: 1em;
} 
```

我尝试过：将链接包装到 p 标签、跨度标签、添加 css 显示块、显示表格、添加带有填充的样式到链接。不能将每个链接都包装在`<td>`标签中！

**编辑：**尝试使用边距而不是填充，没有运气。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-05-18T11:41:13.143

我通过将大边框设置为与背景相同的颜色成功地解决了这个问题。

```
border: 10px solid #fff; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:04:13.083

放在`<a>Link1</a>`一个 div 中，然后设置 div 填充。

如果它仍然不起作用，请尝试更改 div 的宽度，如下所示：http: [//jsfiddle.net/XWLv6/1/](http://jsfiddle.net/XWLv6/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T22:07:04.620

在电子邮件中持续“填充”某些内容的最快方法是在其中添加几个`&nbsp;`。我知道这似乎是不好的做法......

否则将它们放入自己的表中，并使用空 col 作为填充以获得一致的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T09:06:01.300

添加`display:block;`到`#main_nav a`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T17:53:49.883

您必须将 CSS 内联用于 HTML 电子邮件中的所有元素。例子：

```
<a style="color:#fff;font-weight:bold;padding-left:1em;">Link1</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-08T07:10:39.157

如果只是外观问题，这就是我所做的。

```
border-right-width: 177px;
border-left-width: 177px;
border-top-width: 10px;
border-bottom-width: 10px; 
```

# function - 调用数组中所有元素的函数

> ID：13816757
> 
> 赞同：4
> 
> 时间：2012-12-11T08:58:07.720
> 
> 标签：function, matlab, indexing

假设我有一个功能，例如：

```
function [result] = Square( x )
    result = x * x;
end 
```

我有一个像下面这样的数组，

```
x = 0:0.1:1; 
```

我想要一个`y`数组，它`x`使用我的`Square`函数存储 ' 的平方。当然，一种方法如下，

```
y = zeros(1,10);

for i = 1:10
    y(i) = Square(x(i));
end 
```

但是，我想应该有一种更优雅的方式来做到这一点。我尝试了一些见解并进行了一些搜索，但找不到任何解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T09:13:44.347

对于您给出的示例：

```
y = x.^2;   % or
y = x.*x; 
```

其中`.*`和是和`.^`的逐元素版本。这是最简单、最快的方法。`*``^`

更一般的：

```
y = arrayfun(@Square, x); 
```

这可以很优雅，但与

```
y = zeros(size(x));
for ii = 1:numel(x)
    y(ii) = Square(x(ii)); end 
```

我实际上建议远离，`arrayfun`直到分析表明它比普通循环更快。如果有的话，这种情况很少见。

在新的 Matlab 版本（R2008 及更高版本）中，JIT 如此有效地加速循环，以至于`arrayfun`在未来的版本中可能会真正消失。

顺便说一句：请注意，我使用`ii`而不是`i`作为循环变量。在 Matlab 中，`i`和`j`是虚数单位的内置名称。如果您将其用作变量名，由于需要进行必要的名称解析，您将失去一些性能。使用除`i`or以外的任何东西`j`都会阻止这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:07:20.590

你想要`arrayfun`。

```
arrayfun(@Square, x) 
```

看`help arrayfun`

（仅在 GNU Octave 中测试，我没有 MATLAB）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T09:09:42.823

您是否考虑过逐个元素的运算符`.*`？

请参阅[算术运算符](http://www.mathworks.es/es/help/matlab/ref/arithmeticoperators.html)的文档。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T09:41:46.657

我将假设您不会做像平方运算这样简单的事情，并且您尝试做的事情还没有在 MATLAB 中矢量化。

最好调用一次函数，在函数中做循环。随着元素数量的增加，您会注意到操作时间显着增加。

让我们的功能是：

```
function result = getSquare(x)
    result = x*x; % I did not use .* on purpose
end

function result = getSquareVec(x)
result = zeros(1,numel(x));
    for idx = 1:numel(x)
        result(:,idx) = x(idx)*x(idx);
    end
end 
```

让我们从脚本中调用它们：

```
y = 1:10000;
tic;
for idx = 1:numel(y)
    res = getSquare(y(idx));
end
toc

tic;
    res = getSquareVec(y);
toc 
```

我运行了几次代码，结果发现只调用一次函数至少快两倍。

```
Elapsed time is 0.020524 seconds.
Elapsed time is 0.008560 seconds.

Elapsed time is 0.019019 seconds.
Elapsed time is 0.007661 seconds.

Elapsed time is 0.022532 seconds.
Elapsed time is 0.006731 seconds.

Elapsed time is 0.023051 seconds.
Elapsed time is 0.005951 seconds. 
```

# .htaccess - 多站点力www。在所有子域 htaccess 片段

> ID：13816758
> 
> 赞同：0
> 
> 时间：2012-12-11T08:58:07.643
> 
> 标签：.htaccess, mod-rewrite, subdomain, no-www

我以前在这里得到了一些很大的帮助，有一个有点复杂的 .htaccess 文件。

它是一个多站点/域文件，用于`%{HTTP_HOST}`将非 wwww 重写/301 到 www.widgets.com 地址。

```
 RewriteCond %{HTTP_HOST} !^www\. [NC]
   RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

问题是 RegexFu 只查找 NOT www。然后添加 www。

如果有人链接到 mail.widgets.com，这可能会导致一些重复的内容问题，因为它被重定向到 www.mail.widgets.com。

总结一下：

我需要：

```
mail.widgets.com -> www.widgets.com
dogs.widgets.com -> www.widgets.com
www.mail.widgets.com -> www.widgets.com
www.dogs.widgets.com -> www.widgets.com 
```

等等

我已经尝试了各种排列，但没有运气：

```
 RewriteCond %{HTTP_HOST} !^www\.[^\.]+\.com [NC]
   RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

没有骰子。我最终会遇到循环或其他问题。

我只需要任何不是的东西：

```
www.   (anything but period)     .com - > www.    (last string before .com)         .com 
```

粗略的标准：

```
(anything but period).com -> www. (anything but period).com 
```

如果有人能帮我一把，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:35:39.600

尝试：

```
RewriteCond %{HTTP_HOST} !^www\. [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.[^.]+\.[^.]+\.[^.]+ [NC]
RewriteCond %{HTTP_HOST} ([^.]+)\.com$ [NC]
RewriteRule ^(.*)$ http://www.%1.com/$1 [R=301,L] 
```

反向引用在前一个重写条件中匹配的`%1`分组。`([^.]+)`它会忽略域名之前的任何子域（如果有的话）。

# php - ZF2：通过 'dispatch' 事件将变量分配给 ViewModel

> ID：13816759
> 
> 赞同：1
> 
> 时间：2012-12-11T08:58:11.517
> 
> 标签：php, zend-framework2

在某些情况下，我有 ZF2 应用程序，我想从路由中获取参数“编号”并使其可用于所有视图。我尝试使用事件，但我的解决方案的问题是 $number 仅在布局中可用，而不在视图中可用。这是我的代码

```
$sharedEvents = $moduleManager->getEventManager()->getSharedManager();
$sharedEvents->attach( __NAMESPACE__, 'dispatch', function ( $e ) {
    $route = $e->getRouteMatch();
    $number = $route->getParam( 'number' );
    $view = $e->getViewModel();
    $view->setVariable( 'searchQuery', $number );
}, 90 ); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:36:09.130

问题解决了它可以通过视图访问

```
$this->layout()->getVariable('searchQuery'); 
```

有关此主题的更多信息，请[点击此处](http://akrabat.com/zend-framework-2/access-view-variables-in-another-view-model/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:03:49.377

也许这可以帮助你：

```
$childView = $e->getViewModel()->getChildren();

$childView[0]->searchQuery = $number; 
```

# css - 无效的 CSS 选择器导致规则被删除：原因是什么？

> ID：13816764
> 
> 赞同：26
> 
> 时间：2012-12-11T08:58:25.617
> 
> 标签：css, css-selectors, w3c

我正在寻找更多关于邮件列表讨论等的链接，而不是猜测。

谁能帮我找出 CSS [Selectors Level 3](http://www.w3.org/TR/css3-selectors/#Conformance)规范中引用的错误处理规则背后的基本原理。

> 用户代理必须遵守处理解析错误的规则：
> 
> *   包含未声明命名空间前缀的简单选择器无效
> *   包含无效简单选择器、无效组合器或无效标记的选择器无效。
> *   包含无效选择器的一组选择器无效。
> 
> 复用选择器的规范必须定义如何处理解析错误。（在 CSS 的情况下，使用选择器的整个规则都将被删除。）

我有以下规则：

```
#menu li.last, #menu li:last-child {
  ...
} 
```

为了弥补 IE8 对 last-child 支持的不足，我使用了一个类和一个 JavaScript shim。然而，这并没有奏效，因为 IE8 符合 CSS 错误处理规范，并丢弃了整个规则，因为它无法识别一个选择器。这可以通过将两个选择器分成单独的规则来解决。

*为什么这是可取的？为什么规范不建议简单地丢弃无法识别的选择器，而是保留规则的其余部分？*

我想知道基本原理，因为目前的规则似乎违反直觉。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-12T02:32:08.503

> *为什么这是可取的？为什么规范不建议简单地丢弃无法识别的选择器，而是保留规则的其余部分？*

简短的回答是因为对于实现来说很难弄清楚究竟是什么构成了“规则的其余部分”（或“选择器列表的其余部分”），而不会弄错并无意中弄乱了布局，以及错误处理的一致性，以及与未来规范的前向兼容性。

* * *

在处理无效选择器时，我将在我的长答案前面加上我的[另一个答案的链接。](https://stackoverflow.com/questions/5302172/firefox-moz-selection-selector-bug-is-there-a-workaround/5302221#5302221)对该答案的评论直接指向[CSS2.1 规范](http://www.w3.org/TR/CSS21/syndata.html#rule-sets)中关于处理规则集中选择器中的错误的第 4.1.7 节，其中提到了选择器中的逗号作为示例。我认为它总结得很好：

> CSS 2.1 为选择器中的逗号 (,) 赋予了特殊含义。但是，由于不知道逗号在未来的 CSS 更新中是否会获得其他含义，因此如果选择器中的任何地方出现错误，则应该忽略整个语句，即使选择器的其余部分在 CSS 2.1 中看起来很合理。

虽然就选择器而言，逗号本身仍然意味着对两个或多个选择器进行分组，但事实证明，Selectors 4 引入了新的功能性伪类，它们接受选择器组（或选择器列表）作为参数，例如[`:matches()`](http://www.w3.org/TR/selectors4/#matches)（它甚至改变[`:not()`](http://www.w3.org/TR/selectors4/#negation)了它接受一个列表，使其类似于`:matches()`，而在级别 3 中它只接受一个简单的选择器）。

这意味着您不仅会找到与规则关联的以逗号分隔的选择器组，而且您还将开始在功能性伪类中找到它们（请注意，这仅在样式表中；在 CSS 之外，选择器可以出现在JavaScript 代码，由选择器库和本机[选择器 API 使用](http://www.w3.org/TR/selectors-api)）。

虽然到目前为止不是唯一的原因，但仅此一项就足以使解析器的错误处理规则过度复杂化，并有破坏选择器、规则集甚至布局的巨大风险。如果出现带有逗号的解析错误，解析器将无法确定此选择器组是对应于整个规则集还是另一个选择器组的一部分，以及如何相应地处理选择器的其余部分及其关联的规则集. 与其尝试猜测、冒险猜测错误并以某种方式违反规则（例如，通过匹配和样式化所有错误的元素），最安全的选择是放弃规则并继续前进。

例如，考虑以下规则，其选择器在第 4 级有效但在第 3 级无效，取自[我的这个问题](https://stackoverflow.com/questions/10711730/whats-the-difference-in-the-not-selector-between-jquery-and-css)：

```
#sectors > div:not(.alpha, .beta, .gamma) {
    color: #808080;
    background-color: #e9e9e9;
    opacity: 0.5;
} 
```

不理解 Selectors 4 的天真解析器可能会尝试将其拆分为三个不同的选择器，它们共享相同的声明块，而不是仅基于逗号的带有接受列表的伪类的单个选择器：

```
#sectors > div:not(.alpha
.beta
.gamma) 
```

如果它只是丢弃明显无效的第一个和最后一个选择器，留下有效的第二个选择器，那么它是否应该尝试将规则应用于任何具有 class 的元素`beta`？这显然不是作者打算做的，所以如果浏览器这样做，它会[做一些意想不到](http://jsfiddle.net/BoltClock/vJazE/3)的事情。通过丢弃带有无效选择器的规则，[布局看起来有点理智](http://jsfiddle.net/BoltClock/vJazE/1)，但这是一个过于简单的例子；如果应用错误，具有更改布局样式的规则可能会导致更大的问题。

当然，选择器解析中的其他歧义也可能出现，这可能导致以下情况：

*   不知道复杂选择器在哪里结束
*   不知道选择器列表在哪里结束
*   不知道声明块从哪里开始
*   以上的组合

同样，通过丢弃规则集而不是玩猜谜游戏，所有这些问题都最容易解决。

对于无法识别的看似格式良好的选择器，例如`:last-child`您的示例中的伪类，规范没有区分无法识别的选择器和格式错误的选择器。两者都会导致解析错误。从您链接到的同一部分：

> 无效是由解析错误引起的，例如无法识别的令牌或当前解析点不允许的令牌。

并且通过发表关于`:last-child`我的声明，我假设浏览器首先能够解析一个冒号，后跟一个任意标识作为伪类；实际上，您不能假设实现将知道`:last-child`正确解析为伪类，或者类似的东西`:lang()`或`:not()`使用功能符号，因为功能伪类直到 CSS2 才出现。

选择器定义了一组特定的已知伪类和伪元素，它们的名称很可能在每个实现中都是硬编码的。最天真的解析器拥有每个伪类和伪元素的*完整*符号，包括单/双冒号，硬编码（如果主要浏览器实际上使用`:before`,`:after`和作为[特殊情况](https://stackoverflow.com/questions/17684797/should-i-use-single-colons-or-double-colons-for-before-after-first-le)）。因此，对于一个实现来说，看起来像是伪类的东西很可能是另一个实现的 gobbledygook。`:first-letter``:first-line`

由于实现失败的方式有很多，因此规范没有区别，使错误处理更加可预测。如果选择器无法识别，无论是因为它不受支持还是格式错误，都会丢弃该规则。简单，直接，并且足够容易让您了解。

* * *

尽管如此，在 www 风格的公共邮件列表中至少有[一个讨论](http://lists.w3.org/Archives/Public/www-style/2010Nov/0203.html)建议更改规范，因为毕竟通过拆分选择器来实现错误处理可能并不难。

我还应该提到一些布局引擎的行为不同，例如 WebKit 在规则中忽略非 WebKit 前缀的选择器，应用它自己的前缀，而其他浏览器则完全忽略该规则（您可以在 Stack Overflow 上找到更多示例；这里[有一个稍微不同的](https://stackoverflow.com/questions/8317954/ignoring-webkit-specific-css-selector-in-firefox)）。在某种程度上，你可以说 WebKit 正在绕过规则，尽管它确实尝试巧妙地解析逗号分隔的选择器组，尽管有这些前缀选择器。

我认为工作组还没有令人信服的理由来改变这种行为。事实上，如果有的话，他们有一个令人信服的理由*不改变它*，那是因为网站多年来一直依赖这种行为。过去，我们有过滤旧版本 IE 的选择器技巧；今天，我们为过滤其他浏览器添加了前缀选择器。这些黑客攻击都依赖于某些浏览器丢弃它们无法识别的规则的相同行为，如果其他浏览器认为它们是正确的，则应用它们，例如通过识别前缀（或仅抛出无法识别的前缀，如 WebKit 所做的那样）。如果这条规则发生变化，网站可能会在这些浏览器的更新版本中出现问题，而这在我们这样多样化（阅读：碎片化）的 Web 中绝对不会发生。

截至[2013 年 4 月](http://lists.w3.org/Archives/Public/www-style/2013Apr/0246.html)，由于我在上面假设的原因，在电话会议中决定这种行为保持不变：

```
   - 已解决：不要对选择器采用 MQ 样式的失效
               由于网络兼容性问题。

```

媒体查询样式失效是指以逗号分隔的列表中的无效媒体查询，但*不会*破坏整个`@media`规则。

# javascript - 将javascript变量传递给jquery

> ID：13816777
> 
> 赞同：1
> 
> 时间：2012-12-11T08:59:40.910
> 
> 标签：javascript, jquery, variables, position

我面临一些我现在无法解决的问题。

我希望获得具有唯一 ID 的元素的位置

代码：

```
function e_div_show(sid,ctd)
{
 var b_fos="t"+sid;
 var pos = $(b_fos).offset();
 alert(pos.top + ' ' + pos.left);
}

HTML Code:
<?php
...
 echo ('<td ID="t'.$array['S_ID'].'">...</td>
...
 ?> 
```

这不工作..

如果我将 ID 替换为“b_fos”并注释掉 //var b_fos="t"+sid; 它工作正常.. 但是在这种情况下，TD ID 不会是唯一的，因为生成代码的 php 数组。

请问如何用javascript变量定义pos correclty？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:02:10.137

尝试改变：

```
var b_fos = "t" + sid; 
```

到

```
var b_fos = "#t" + sid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:02:10.707

试试这个你之前错过'#'的代码

```
function e_div_show(sid,ctd)
{
 var b_fos="#t"+sid;
 var pos = $(b_fos).offset();
 alert(pos.top + ' ' + pos.left);
} 
```

# c++ - std::is_base_of 的 VC2010 实现包含错误？

> ID：13816778
> 
> 赞同：1
> 
> 时间：2012-12-11T08:59:40.887
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, std

`std::is_base_of<B, D>`如果 D 派生自 B 或者两者都是相同的非联合类，则C++11 标准必须返回 true。但在 VC++ 2010 stl 实现模板中，如果 B 类型是 D 类型的唯一基类，则返回 true！这是一个错误吗？

在[http://msdn.microsoft.com/en-us/library/bb982243(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb982243(v=vs.100).aspx)页面的示例部分

```
std::is_base_of<base, base> == true 
```

但这不对应 VC++2010 STL 实现。虽然它符合 C++11 标准的要求。哪里有错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T09:47:45.670

`is_base_of<int, int>::value`评估为`false`（您的评论表明这是您的实际问题），因为仅当模板参数是类类型时`is_base_of<>::value`才能评估为。`true`C++11 标准的表 51 - 类型关系谓词（C++ 20.9.6“类型之间的关系”）定义`is_base_type<>`当且仅当（强调添加）时评估为真：

> Base 是 Derived 的基类，不考虑 cv 限定符，或者 Base 和 Derived 不是联合，并且在不考虑 cv 限定符的情况下命名相同的**类类型**

C++11 标准甚至将以下内容作为其示例之一 (C++11 20.9.6/3)：

> ```
> is_base_of<int, int>::value // false 
> ```

# java - 为什么我得到一个空白的 MAC 地址？

> ID：13816781
> 
> 赞同：1
> 
> 时间：2012-12-11T08:59:42.620
> 
> 标签：java, networking, mac-address

以下程序旨在打印我的节点的 MAC 地址。但它打印一个空白。我检查了它是否为空，但它不是空的。为什么我会得到一个空白的 MAC 地址？我犯了什么错误？

```
import java.net.InetAddress;
import java.net.NetworkInterface;

class Tester {
public static void main(String args[]) {
    try {
      InetAddress address = InetAddress.getByName("localhost");
      NetworkInterface ni = NetworkInterface.getByInetAddress(address);
      byte mac[] = ni.getHardwareAddress();
      if(mac == null) {
        System.out.println("Mac address is null");
      } else {
        System.out.println("Else block!");
        String macAdd = new String(mac);
        System.out.println(macAdd);
      }

    } catch(Exception exc) {
       exc.printStackTrace();
    }
}
} 
```

***注：*** `mac == null`为假。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:24:16.900

根据[这个讨论](https://forums.oracle.com/forums/thread.jspa?messageID=4634398)，*“嗯，对“localhost”做出反应的接口通常是环回设备，它没有 MAC 地址，所以这可能是你的原因。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:01:59.923

我从未见过`localhost`带有 MAC 地址的环回接口。我怀疑它不是很有用。

```
System.out.println(Arrays.toString(mac)); 
```

印刷

```
[] 
```

这并不奇怪，因为它只是一个虚拟软件设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:17:30.357

你应该得到 localhost`InetAddress.getLocalHost();`而不是`InetAddress.getByName("localhost");`。请参考我下面的例子来解决你的问题。

```
import java.net.InetAddress;
import java.net.NetworkInterface;

public class Tester {
    public static void main(String args[]) {
        try {
            InetAddress address = InetAddress.getLocalHost();
            NetworkInterface ni = NetworkInterface.getByInetAddress(address);
            byte mac[] = ni.getHardwareAddress();
            if (mac == null) {
                System.out.println("Mac address is null");
            } else {
                System.out.println("Else block!");
                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < mac.length; i++) {
                    sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));        
                }
                String macAdd = new String(sb);
                System.out.println(macAdd);
            }

        } catch (Exception exc) {
            exc.printStackTrace();
        }
    }
} 
```

**输出**

```
Else block!
44-87-FC-F1-D4-77 
```

**笔记 ：-**

请记住，将收到的 mac 地址转换为可读的十六进制格式很重要，因此我编写了以下代码块。如果您不这样做，那么您将收到垃圾文本为`D‡üñÔw`.

```
 StringBuilder sb = new StringBuilder();
            for (int i = 0; i < mac.length; i++) {
                sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));        
            }
            String macAdd = new String(sb); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T09:13:12.927

如果您查看[JavaDocs](http://download.java.net/jdk7/archive/b123/docs/api/java/net/InetAddress.html#getByName) for Java 7，您会注意到`getLocalhost()`这就是您可能想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T09:24:45.403

MAC 地址是一个字节数组，其中第一个字节可能为零。

要打印它，您需要将其转换为可打印的字母数字（例如十六进制）格式，例如使用[Bhavik Ambani 的答案](https://stackoverflow.com/a/13817065/49942)中所示的 String.format 。

# php - 将数据库字段显示为多个选择复选框

> ID：13816786
> 
> 赞同：-2
> 
> 时间：2012-12-11T08:59:54.727
> 
> 标签：php, mysql

我有这个代码，我试图使用它来将表列名称显示为复选框值，我的意思是这样的：

```
$section = mysql_query("SELECT * FROM forma");  
while ($row = mysql_fetch_assoc($section)){
echo "<input type='checkbox' name='data[]' value='" . $firstrow[''] . "' />";

} 
```

我以错误的方式使用它，但是我应该如何以自动方式而不是手动方式将列名打印为复选框。

如何使用 PDO 到达它？

> $q = $dbh->prepare("DESCRIBE 格式"); $q->执行(); $table_fields = $q->fetchAll(PDO::FETCH_COLUMN);

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:05:19.643

您必须像这样遍历所有列，例如：

```
$firstrow = false;
while ($row = mysql_fetch_assoc($section)){
    if (!$firstrow) {
        foreach ($row as $column => $value) {
            echo "<input type='checkbox' name='data[]' value='" . $column . "' />"; 
        }
        $firstrow = true;
    }
} 
```

我希望我正确理解了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:10:53.930

[`SHOW COLUMNS`](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)与 PDO 一起使用：

```
try {
    $dbh = new PDO('mysql:dbname=testdb;host=localhost', 'username', 'passwqord');
} catch (PDOException $e) {
    die('Connection failed: ' . $e->getMessage());
}

$result = $dbh->query('SHOW COLUMNS FROM forma');

if($result)
{
    foreach($result as $row)
    {
        echo "<input type='checkbox' name='data[]' value='" . htmlspecialchars($row['Field']) . "' />";
    }
} 
```

可以使用`DESCRIBE forma`而不是检索相同的结果`SHOW COLUMNS`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:14:46.387

前言：MySQL 扩展被标记为已弃用，最好使用 mysqli 或[PDO](http://docs.php.net/pdo)

* * *

虽然有[mysql_field_name](http://docs.php.net/manual/en/function.mysql-field-name.php)或[SHOW COLUMNS](https://dev.mysql.com/doc/refman/5.5/en/show-columns.html)之类的功能，但我建议使用[INFORMATION_SCHEMA](https://dev.mysql.com/doc/refman/5.0/en/information-schema.html)，因为它为您提供了更大的灵活性。

```
<?php
$database = 'test';
$table = 'forma';

$mysql = mysql_connect('localhost', 'localonly', 'localonly') or die(mysql_error());
mysql_select_db('test', $mysql) or die(mysql_error($mysql)); // selecting db is not not necessary in this case

$query = sprintf("
    SELECT
        COLUMN_NAME, COLUMN_TYPE
    FROM
        INFORMATION_SCHEMA.COLUMNS
    WHERE
        TABLE_SCHEMA = '%s'
        AND TABLE_NAME = '%s'
",
    mysql_real_escape_string($database),
    mysql_real_escape_string($table)
);
$result = mysql_query($query, $mysql) or die(mysql_error($mysql));

while( false!=($row=mysql_fetch_array($result)) ) {
    $name = htmlspecialchars($row['COLUMN_NAME']);
    $type = htmlspecialchars($row['COLUMN_TYPE']);
    printf("<input type=\"checkbox\" name=\"col[]\" value=\"%s\" />%s (%s)<br />\r\n", $name, $name, $type);
} 
```

使用 PDO 做同样的事情

```
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$stmt = $pdo->prepare('
    SELECT
        COLUMN_NAME, COLUMN_TYPE
    FROM
        INFORMATION_SCHEMA.COLUMNS
    WHERE
        TABLE_SCHEMA = :database
        AND TABLE_NAME = :table
');
$stmt->execute( array('database'=>'test', 'table'=>'forma') );
foreach( $stmt as $row ) {
    $name = htmlspecialchars($row['COLUMN_NAME']);
    $type = htmlspecialchars($row['COLUMN_TYPE']);
    printf("<input type=\"checkbox\" name=\"col[]\" value=\"%s\" />%s (%s)<br />\r\n", $name, $name, $type);
} 
```

# git - git push 崩溃并显示“inflate 返回 -551”

> ID：13816788
> 
> 赞同：2
> 
> 时间：2012-12-11T09:00:00.047
> 
> 标签：git, ubuntu

在将 git 存储库从 ubuntu 服务器推送到另一个 ubuntu 服务器时，我收到以下错误：

```
Pushing to gitosis@xxx:yyy
Enter passphrase for key '/home/ngrislain/.ssh/id_rsa': 
Counting objects: 88, done.
Compressing objects: 100% (50/50), done.
error: inflate returned -551), 22.15 MiB | 1.13 MiB/s   
error: pack-objects died of signal 13MiB | 1.10 MiB/s   
error: failed to push some refs to 'gitosis@xxx:yyy' 
```

我的磁盘未满，我仍然可以拉...有人明白吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:55:34.880

简短的回答：您的远程存储库已损坏。

git 存储库中的大多数对象（提交、旧文件内容等）都打包在 .pack 文件中。每当 git 需要访问这些对象时，它首先需要解压缩它们。如果打包文件损坏，git 将不再能够访问这些对象并且不高兴。

您尝试推送到远程存储库，该存储库似乎包含这样一个损坏的包文件。远端需要解压，但无法解压。因此它无法整合您的推送。

您需要修复远程存储库。由于 git 是一个分布式 VCS，一种方法是通过从您自己的存储库克隆来在服务器上创建一个新存储库。

根据您感兴趣的详细程度，您还可以查看[git-unpack-objects](http://www.kernel.org/pub/software/scm/git/docs/git-unpack-objects.html)的手册页或 zlib.c 中的 git 源代码[int git_inflate(...)](https://github.com/git/git/blob/master/zlib.c#L111)，其中包含对 inflate 的失败调用。

还有一个关于如何修复损坏的存储库的[GitFaq 。](https://git.wiki.kernel.org/index.php/GitFaq#How_to_fix_a_broken_repository.3F)

# javascript - JavaScript / Extjs - 从时间戳计算小时数

> ID：13816790
> 
> 赞同：0
> 
> 时间：2012-12-11T09:00:01.823
> 
> 标签：javascript, datetime, timezone

我的地图中每辆车都有这个时间戳格式：

```
2012-12-11T03:51:43+03:00 
```

我想根据当前时间从中提取小时数。

我不知道如何解析这个字符串然后将它与当前时间进行比较。

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:03:19.310

就像是：

```
var
  d1 = new Date('2012-12-11T03:51:43+03:00'),
  d2 = new Date;

console.log(
  (d2 - d1) / 3600000
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:07:59.557

您需要先修复除 Chrome 以外的其他浏览器的时间戳

[javascript date.parse在chrome和其他浏览器中的区别](https://stackoverflow.com/a/8266880/295783)

[演示](http://jsfiddle.net/mplungjan/jfK8G/)

```
var noOffset = function(s) {
  var day= s.slice(0,-5).split(/\D/).map(function(itm){
    return parseInt(itm, 10) || 0;
  });
  day[1]-= 1;
  day= new Date(Date.UTC.apply(Date, day));  
  var offsetString = s.slice(-5)
  var offset = parseInt(offsetString,10)/100;
  if (offsetString.slice(0,1)=="+") offset*=-1;
  day.setHours(day.getHours()+offset);
  return day.getTime();
}
alert(parseInt((new Date().getTime()-noOffset(yourTimeStamp))/3600000)) 
```

# objective-c - 当 tabBarController/navController 在同一个应用程序中时，问题推送到详细视图

> ID：13816793
> 
> 赞同：0
> 
> 时间：2012-12-11T09:00:18.333
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller, uitabbarcontroller

我在使用和`tableView`推送到详细视图 时遇到了一些困难。`self.navigationController``pushViewController`

我已经确定我的问题来自我的 appdelegate.m 文件。我的应用程序首先加载一个窗口，然后加载一个标签栏控制器。现在我正在尝试在我需要的页面上引入导航控制器。我正在尝试将两个不同的项目合并在一起。

任何帮助都会很棒！

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    PDCWelcomeViewController *welcomeVC = [[PDCWelcomeViewController alloc] initWithNibName:@"PDCWelcomeViewController" bundle:nil];
    self.slideUpNav = [[PDCSlideUpNavController alloc] initWithRootViewController:welcomeVC];
    self.slideUpNav.navigationBarHidden = isUserLoggedIn;
    self.window.rootViewController = self.slideUpNav;

    [self.window makeKeyAndVisible];

    return YES;

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] init];
    [self.viewController.view setBackgroundColor:[UIColor underPageBackgroundColor]];
    UINavigationController *navControl = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = navControl;
    [self.window makeKeyAndVisible];
    return YES;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:05:59.207

它只能加载`PDCWelcomeViewController`。在它之后有一个返回语句。因此，在该声明之下，代码毫无价值。

# java - Java Swing 中的字体显示

> ID：13816794
> 
> 赞同：0
> 
> 时间：2012-12-11T09:00:20.750
> 
> 标签：java, swing, character-encoding, localization

我有一个java应用程序，最初运行在Windows中，UI显示中文和日文没有任何问题。但是现在在 Linux (Fedora) 上，在 JPanel 中，我无法输入中文或日文。

然后，我尝试了 JTextPane.setFont(...) 的中文字体，它显示正确。我的问题是，为什么我不必在 Windows 上为中文和日文明确设置字体，而在 Linux 上必须这样做？

# c# - 从 C# 将字符串传递给 c dll

> ID：13816800
> 
> 赞同：4
> 
> 时间：2012-12-11T09:00:40.047
> 
> 标签：c#, dll, pinvoke, dllimport, intptr

我在 ac# 应用程序中使用 ac dll 时遇到了一些问题。给我一个错误的函数是在 dll 的头文件中定义的，如下所示：

```
int __stdcall DDC_CreateFilePropertyString (DDCFileHandle file, 
                                        const char *property,
                                        const char *value); 
```

我在访问 dll 的类中添加了以下代码。

```
[DllImport("nilibddc.dll", CallingConvention = CallingConvention.Cdecl, CharSet=CharSet.Ansi)]
private static extern int DDC_CreateFilePropertyString(IntPtr file,
                         [MarshalAs(UnmanagedType.LPStr)]string property,
                         [MarshalAs(UnmanagedType.LPStr)]string value); 
```

类型 DDCFileHandle 在头文件中定义如下：

```
typedef struct _DDCFile DDCFile;
typedef DDCFile*    DDCFileHandle; 
```

头文件中没有关于 _DDCFile 结构的其他信息（我没有来自我正在使用的库中的任何其他文件）。

在调用函数 DDC_CreateFilePropertyString() 之前，我调用以下函数来创建文件并获取文件句柄。

```
[DllImport("nilibddc.dll", CallingConvention = CallingConvention.Cdecl, CharSet=CharSet.Ansi]
private static extern int DDC_CreateFile(char[] filePath,
                          char[] fileType,
                          char[] name,
                          char[] description,
                          char[] title,
                          char[] author,
                          ref IntPtr file); 
```

头文件中的定义如下所示。

```
int __stdcall DDC_CreateFile (const char *filePath,
                          const char *fileType,
                          const char *name,
                          const char *description,
                          const char *title,
                          const char *author,
                          DDCFileHandle *file); 
```

现在，当我调用函数 DDC_CreateFilePropertyString 时，它总是返回一个错误，告诉我传递了一些错误的参数。我究竟做错了什么？我使用的库是 National Instruments 的 TDMS C API。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:37:04.607

您的 p/invokes 有点偏离。您需要使用`CallingConvention.Stdcall`，这是默认设置。对于`const char*`参数，您应该简单地将它们声明为`string`在 C# 端。

正确的 C# p/invoke`DDC_CreateFile`是：

```
[DllImport("nilibddc.dll", CharSet=CharSet.Ansi]
private static extern int DDC_CreateFile(
    string filePath,
    string fileType,
    string name,
    string description,
    string title,
    string author,
    ref IntPtr file
); 
```

你`DDC_CreateFilePropertyString`需要这个：

```
[DllImport("nilibddc.dll", CharSet=CharSet.Ansi)]
private static extern int DDC_CreateFilePropertyString(
    IntPtr file,
    string property,
    string value
); 
```

如果在修复代码后，调用这些函数时仍然收到错误，那么很明显，您使用的库不正确。这超出了这个问题的范围。查阅文档，和/或寻求图书馆供应商的支持。

# javascript - 使用 Google API 检索联系人姓名

> ID：13816802
> 
> 赞同：1
> 
> 时间：2012-12-11T09:00:51.843
> 
> 标签：javascript, google-api

我正在尝试通过 API 访问我的 Google 通讯录。（阿帕奇辛迪格，OAuth2）。我能够从电子邮件、电话号码、邮政地址等联系人中检索详细信息。但是，它说所有联系人的名字都是空的（但他们确实有名字）。

我这样做是这样的：

```
 if (entry.gd$email) {
          var valueNode = document.createTextNode(entry.gd$email[0].address);
          divElement.appendChild(valueNode);
          divElement.appendChild(document.createElement("br"));
        }
        if (entry.gd$phoneNumber) {
          var valueNode = document.createTextNode(entry.gd$phoneNumber[0].$t);
          divElement.appendChild(valueNode);
          divElement.appendChild(document.createElement("br"));
        }
        if (entry.gd$postalAddress) {
          var valueNode = document.createTextNode(entry.gd$postalAddress[0].$t);
          divElement.appendChild(valueNode);
        } 
```

它运行顺利，我得到了我需要的所有信息。但是，`if (entry.gd$name)`如果我的所有联系人都有姓名，则表示该姓名为空。我使用了错误的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:02:34.903

尝试这个：`entry.gd$fullName`

标题通常也会这样做，但并非总是出于某种原因。

如果这不起作用，请尝试输出 XML 结果，以便查看哪个字段包含该联系人的姓名。

[https://developers.google.com/google-apps/contacts/v3](https://developers.google.com/google-apps/contacts/v3)

# debugging - 在 STS 中调试时跳过 Grails/Groovy 内部

> ID：13816804
> 
> 赞同：3
> 
> 时间：2012-12-11T09:00:58.580
> 
> 标签：debugging, grails, groovy, sts-springsourcetoolsuite, step-into

在 STS 2.9.2.RELEASE 中调试 grails 应用程序时，我无法成功使用 F5，因为只要有函数调用，IDE 就会进入大量 grails/groovy 内部代码行，并且几乎无法使用 step-into 功能。[有没有办法像在这个问题](https://stackoverflow.com/questions/968494/avoiding-groovy-grails-internals-while-debugging-in-intellij-idea)中为 IntelliJ 所做的那样禁用这种行为？我当然可以在我期望调用的函数的第一行设置断点并使用 F6 或 F8，但这并不总是方便且效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:27:53.457

我不确定您的 STS 版本可能基于哪个 eclipse 版本，但是在带有 groovy-eclipse 插件的 Juno 中，在`Preferences->Groovy->Debugger`. 缺少这个（或附加），调试器可能有[“步骤过滤器”](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/debug/ref-usestepfilters.htm)作为打开的选项（在 Eclipse 中，这在调试时可作为工具栏按钮使用）。这应该可以让您过滤掉涉及您不想查看详细信息的类的堆栈帧。（groovy-eclipse 有一个按钮可以将所有常见的 groovy 包添加到步骤过滤器中；也许在 STS 中也是如此）。

# iphone - 如何使用 HTTP Live Streaming 的 EXT-X-MEDIA？

> ID：13816806
> 
> 赞同：5
> 
> 时间：2012-12-11T09:01:15.927
> 
> 标签：iphone, objective-c, ios, video-streaming, http-live-streaming

我目前正在从事一个项目，该项目在一年中的不同季节拍摄了多次。

不同的视频轨道是时间同步的，所以我想利用 HTTP Live Streaming 的**[EXT-X-MEDIA](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-07#section-3.3.9)**让用户在 iOS 设备上的季节之间切换。

我已经设置了一个包含视频的 M3U8 播放列表，但我似乎无法在 Quicktime 播放器中公开*控件*——无论是在 iPhone 还是 iPad 上。

这是我的播放列表：

```
#EXTM3U
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="500kbs",NAME="Winter",AUTOSELECT=YES,DEFAULT=YES
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="500kbs",NAME="Spring",AUTOSELECT=NO,DEFAULT=NO,URI="spring.m3u8"
#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="500kbs",NAME="Summer",AUTOSELECT=NO,DEFAULT=NO,URI="summer.m3u8"

#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="aac",LANGUAGE="eng",NAME="English",AUTOSELECT=YES, \
DEFAULT=YES,URI="audio.m3u8"
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=754857,VIDEO="500kbs",AUDIO="aac",CODECS="avc1.42e01e,mp4a.40.2"
./winter.m3u8 
```

这不应该工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:02:31.153

GROUP-ID 用于多语言支持。当然可以用新的含义来推敲，但我不希望得到很好的客户支持。

但是根据最新规范，您提供的播放列表不合法。

[https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-10#section-3.4.9.1](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-10#section-3.4.9.1)

> AUTOSELECT 属性值为 YES 的组的所有成员必须具有具有唯一值的 LANGUAGE [RFC5646] 属性。

# django - Django、Haystack、Solr、MongoDB 架构决策

> ID：13816807
> 
> 赞同：6
> 
> 时间：2012-12-11T09:01:18.557
> 
> 标签：django, mongodb, logging, solr, django-haystack

我正在构建一个日志查看实用程序，它将处理 TB 日志中的实时搜索。我决定将日志存储在 Solr 中并将其用作搜索引擎。我将在我的项目中使用 Django 作为框架。为了在 Django 中使用 Solr，我看到有 haystack。现在我的架构将是这样的。

```
 Store  Index         Search             Show
Log Stream ----------------> Solr --------> Haystack ------> Django 
```

我的日志是普通的linux服务器日志，如网络、操作、错误等。Syslog正在发送日志。我将允许基于所有日志行进行过滤。我将允许按列排序，例如：ip 列、日期列等。

示例日志：

```
Dec 11 13:24:03 2012 [firewall] R0 SRC=192.168.9.11 DST=192.168.11.29 LEN=83 TOS=0x00 PREC=0x00 TTL=64 ID=0 DF PROTO=UDP SPT=36904 DPT=161 LEN=63 
```

我想问一下，使用 MongoDB 作为日志中的存储、过滤和搜索是否更好，或者 Solr 会做得更好。我也想到了 Elasticsearch。在这种情况下，你的选择是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:47:07.100

为什么要重新发明轮子？有[Logstash](http://logstash.net/)，具有惊人的界面：[Kibana](http://kibana.org/)。您可以使用 rsyslog 来提供它。但是，如果您真的想要/需要重新实现日志服务器，Logstash 使用**ElasticSearch**。我会同意的。

# lucene - 如何在luncene中显示内容的评分区域？

> ID：13816812
> 
> 赞同：0
> 
> 时间：2012-12-11T09:01:40.607
> 
> 标签：lucene

当我索引一些文档时，我可以添加几个字段，例如`contents`. 但是现在，我要显示的是包含查询词**的部分内容**，而不是全部内容，就像普通的搜索引擎一样。我怎样才能存档呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:23:58.337

[org.apache.lucene.search.highlight.Highlighter](http://lucene.apache.org/core/3_6_0/api/contrib-highlighter/org/apache/lucene/search/highlight/Highlighter.html)可用于在查询结果的字段中查找和标记文本的最佳匹配部分（很像 google 如何为匹配的片段显示粗体文本）。

您需要包含来自 contrib 区域的 lucene-highligher-xxx jar 才能使用它。

这篇博文可能会帮助您开始使用它：[http ://hrycan.com/2009/10/25/lucene-highlighter-howto/](http://hrycan.com/2009/10/25/lucene-highlighter-howto/)

# hadoop - 调度具有输入参数的 HBase Hadoop MR 作业

> ID：13816815
> 
> 赞同：0
> 
> 时间：2012-12-11T09:01:54.740
> 
> 标签：hadoop, hbase, oozie

我可以使用 hadoop jar 命令运行该作业。但是当我尝试使用 oozie 安排工作时，我无法做到这一点。另外请让我知道错误是由于 hbase 表中的数据还是由于 xml 文件造成的。

工作流 xml 文件如下：

```
<workflow-app xmlns="uri:oozie:workflow:0.1" name="java-main-wf">
    <start to="java-node"/>
    <action name="java-node">

       <java>
               <job-tracker>00.00.00.116:00000</job-tracker>
            <name-node>hdfs://00.00.000.116:00000</name-node>
            <configuration>
                <property>
                    <name>mapred.job.queue.name</name>
                    <value>${queueName}</value>
                </property>
            <property>
                <name>hbase.zookeeper.property.clientPort</name>
                <value>2181</value>
                </property>
            <property>
                <name>hbase.zookeeper.quorum</name>
                <value>aaaaaa0000002d:2888:3888,bbbbbb000000d:2888:3888,bbbbbb000000d:2888:3888</value>
            </property>
            <property>
                 <name>hbase.master</name>
                  <value>aaaaaa000000d:60000</value>
             </property>

            <property>
                 <name>hbase.rootdir</name>
                 <value>hdfs://aaaa000000d:54310/hbase</value>
            </property>

            </configuration>
             <main-class>com.cf.mapreduce.nord.GetSuggestedItemsForViewsCarts</main-class>
                   </java> 

<map-reduce>
            <job-tracker>1000.0000.00.000</job-tracker>
            <name-node>hdfs://10.00.000.000:00000</name-node>

            <configuration>

    <property>
          <name>mapred.mapper.new-api</name>
          <value>true</value>
        </property>
        <property>
          <name>mapred.reducer.new-api</name>
          <value>true</value>
        </property>
                <property>
                    <name>mapred.job.queue.name</name>
                    <value>${queueName}</value>
                </property>
                <property>
                    <name>mapreduce.map.class</name>
                    <value>mahout.cf.mapreduce.nord.GetSuggestedItemsForViewsCarts$GetSuggestedItemsForViewsCartsMapper</value>
                </property>
                <property>
                    <name>mapreduce.reduce.class</name>
                    <value>mahout.cf.mapreduce.nord.GetSuggestedItemsForViewsCarts$GetSuggestedItemsForViewsCartsReducer</value>
                </property>

        <property>
            <name>hbase.mapreduce.inputtable</name>
            <value>${MAPPER_INPUT_TABLE}</value>
        </property>

        <property>
            <name>hbase.mapreduce.scan</name>
            <value>${wf:actionData('get-scanner')['scan']}</value>
        </property> 

        <property>
            <name>mapreduce.inputformat.class</name>
            <value>org.apache.hadoop.hbase.mapreduce.TableInputFormat</value>
        </property>
        <property>
        <name>mapreduce.outputformat.class</name>
        <value>org.apache.hadoop.mapreduce.lib.output.NullOutputFormat</value>
        </property>
                <property>
                    <name>mapred.map.tasks</name>
                    <value>1</value>
                </property>
             <property>
                    <name>mapred.reduce.tasks</name>
                    <value>10</value>
                </property>
<property>
<name>hbase.zookeeper.property.clientPort</name>
<value>2181</value>
</property>
<property>
<name>hbase.zookeeper.quorum</name>
<value>aaa000,aaaa0000,aaaa00000</value>
</property>
<property>
   <name>hbase.master</name>
     <value>blrkec242032d:60000</value>
   </property>

<property>
  <name>hbase.rootdir</name>
  <value>hdfs://aaaa0000:00010/hbase</value>
</property>

            </configuration>

        </map-reduce> 
```

映射器的错误日志是：

```
 Submitting Oozie action Map-Reduce job   
     <<< Invocation of Main class completed <<<        
    Failing Oozie Launcher, Main class [org.apache.oozie.action.hadoop.MapReduceMain], main() threw exception, No table was provided.
    java.io.IOException: No table was provided.     at org.apache.hadoop.hbase.mapreduce.TableInputFormatBase.getSplits(TableInputFormatBase.java:130)          at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:962)
        at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979)
        at org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:891)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:844)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
   org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:844)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:818)
    org.apache.oozie.action.hadoop.MapReduceMain.submitJob(MapReduceMain.java:91)
        at org.apache.oozie.action.hadoop.MapReduceMain.run(MapReduceMain.java:57)
        at org.apache.oozie.action.hadoop.LauncherMain.run(LauncherMain.java:37)
        at org.apache.oozie.action.hadoop.MapReduceMain.main(MapReduceMain.java:40)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
     org.apache.oozie.action.hadoop.LauncherMapper.map(LauncherMapper.java:454)
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:393)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
        at org.apache.hadoop.mapred.Child.main(Child.java:264)

    Oozie Launcher failed, finishing Hadoop job gracefully          
    Oozie Launcher ends    
    syslog logs    
    2012-12-11 10:21:18,472 WARN org.apache.hadoop.mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
    2012-12-11 10:21:18,586 ERROR org.apache.hadoop.hbase.mapreduce.TableInputFormat: java.lang.NullPointerException
        at org.apache.hadoop.hbase.util.Bytes.toBytes(Bytes.java:404)
        at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:153)        org.apache.hadoop.hbase.mapreduce.TableInputFormat.setConf(TableInputFormat.java:91)
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:70)          at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:130)
        at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:959)
        at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979)
        at org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:891)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:844)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)       at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:844)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:818)         at org.apache.oozie.action.hadoop.MapReduceMain.submitJob(MapReduceMain.java:91)
        at org.apache.oozie.action.hadoop.MapReduceMain.run(MapReduceMain.java:57)
        at org.apache.oozie.action.hadoop.LauncherMain.run(LauncherMain.java:37)
        at org.apache.oozie.action.hadoop.MapReduceMain.main(MapReduceMain.java:40)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)         at org.apache.oozie.action.hadoop.LauncherMapper.map(LauncherMapper.java:454)
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:393)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)           at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
        at org.apache.hadoop.mapred.Child.main(Child.java:264) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:21:13.833

当您调用 时`TableMapReduceUtil.initTableMapper(..)`，该实用程序方法正在配置许多作业属性，其中之一是要扫描的 HBase 表。

查看代码（[@GrepCode](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/org.apache.hbase/hbase/0.89.20100924-28/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java#TableMapReduceUtil.initTableMapperJob%28java.lang.String,org.apache.hadoop.hbase.client.Scan,java.lang.Class,java.lang.Class,java.lang.Class,org.apache.hadoop.mapreduce.Job%29)），我可以看到此方法设置了以下属性：

```
<property>
  <name>hbase.mapreduce.inputtable</name>
  <value>CUSTOMER_INFO</value>
</property>
<property>
  <name>hbase.mapreduce.scan</name>
  <value>...</value>
</property> 
```

输入表应该是您的表的名称，扫描属性是扫描信息的一些序列化（Base 64 编码版本）。在我看来，您最好的选择是手动运行作业，并通过作业跟踪器检查 job.xml 以查看设置值是什么。

请注意，您还需要设置减速器的属性（请参阅[initTableReducerJob 方法](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/org.apache.hbase/hbase/0.89.20100924-28/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java#TableMapReduceUtil.initTableReducerJob%28java.lang.String,java.lang.Class,org.apache.hadoop.mapreduce.Job,java.lang.Class,java.lang.String,java.lang.String,java.lang.String%29)中的源代码），再次检查 job.xml 中是否有手动提交的作业可能是您最好的选择。

# javascript - html按钮上dojo onlick事件的问题

> ID：13816817
> 
> 赞同：0
> 
> 时间：2012-12-11T09:02:05.427
> 
> 标签：javascript, html, dojo

我是 dojo 的新手，我遇到了奇怪的问题，我花了很多时间还没有发现，假设我有 4 个按钮：

```
<button id="btnMoveFirst" data-dojo-type="dijit.form.Button" iconclass="plusIcon">
    &lt; &lt;</button>
<button id="btnMovePrev" data-dojo-type="dijit.form.Button" iconclass="plusIcon">
    &lt;</button>
<button id="btnMoveNext" data-dojo-type="dijit.form.Button" iconclass="plusIcon">
    &gt;</button>
<button id="btnMoveLast" data-dojo-type="dijit.form.Button" iconclass="plusIcon">
    &gt; &gt;</button> 
```

并使用带有事件*onclick*的 dojo，如下所示：

```
dojo.connect(dijit.registry.byId('btnMoveFirst'), "onclick",  function(evt){
    alert('test1');
});

dojo.connect(dijit.registry.byId('btnMovePrev'), "onclick",  function(evt){
     alert('test2');
});

dojo.connect(dijit.registry.byId('btnMoveNext'), "onclick",  function(evt){
     alert('test3');
});

dojo.connect(dijit.registry.byId('btnMoveLast'), "onclick",  function(evt){
     alert('test4');
}); 
```

但是，当我单击 4 个按钮中的任何一个，甚至是表单中的任何按钮时，我都会收到 4 个警报，而不仅仅是正确的一个。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:24:56.470

*我收到 4 个警报而不是只有一个正确警报*的原因是：

*   按钮在调用时未实例化`dojo.connect`→将代码包装到[`dojo/ready`](http://dojotoolkit.org/reference-guide/1.8/dojo/ready.html)
*   连接到不存在的方法 → 连接到*onClick*而不是*onclick*

根据讨论，这里是如何在[Modern Dojo](http://dojotoolkit.org/documentation/tutorials/1.8/modern_dojo/)的问题中编写代码的方式：

```
require([
    "dojo/ready",
    "dojo/aspect",
    "dijit/registry",
    "dijit/form/Button"
], function(
    ready,
    aspect,
    registry
) {

    ready(function() {

        // dojo/Evented
        registry.byId("btnMoveFirst").on("click", function() {
            console.log("first");        
        });

        // dojo/aspect 
        // it's the same as dojo.connect in previous versions
        // nevertheless this is not recommended
        aspect.after(registry.byId("btnMoveLast"), "onClick", function() {
            console.log("last");            
        });       

    });

}); 
```

工作示例： http: [//jsfiddle.net/phusick/355MT/](http://jsfiddle.net/phusick/355MT/) ​</p>

# salesforce - 如何在 site.com 上查看项目预览

> ID：13816824
> 
> 赞同：5
> 
> 时间：2012-12-11T09:02:27.757
> 
> 标签：salesforce, apex-code

您好，我在 site.com 中查找页面预览时遇到问题。Site.com 提供一个平台来建立网站和销售人员以及与云相关的操作。

我的客户给了我关于项目的要求。项目已经存在，我们必须修改项目网站的内容。我无法找到页面。

测试用户（我的帐户）——在这张图片中，您可以看到 site.com 选项

![在此处输入图像描述](../Images/c23aa49b4c2e784d5cbf3b49de603a94.png)

客户账户——但这里 site.com 选项不存在 ![在此处输入图像描述](../Images/11b9c18545018773922e3875082392ea.png)

我是销售人员和 site.com 的新手，我做过研发，但都搞不清楚。请帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:47:08.923

Site.com 默认在 Developer Edition 中可用，并且可在购买 Enterprise 和 Unlimited 版时使用。

您可以通过导航到设置--> 管理设置--> 公司简介--> 公司信息来比较功能差异。

您将能够在您的开发人员帐户中看到默认情况下可用的 Site.com 发布者用户和 Site.com 贡献者用户功能许可证，并且这些许可证默认情况下不会在客户帐户中存在。要在您的客户帐户中启用 Site.com Publisher User 和 Site.com Contributor User 许可证，您需要向 Salesforce 提出 hep Desk 票据并为许可证支付必要的费用。

此链接将帮助您深入了解如何启用这些 Site.com 许可证。 [http://ap1.salesforce.com/help/doc/en/siteforce_admin_setup.htm](http://ap1.salesforce.com/help/doc/en/siteforce_admin_setup.htm)

如果您已经在客户帐户中设置了这些许可证，请检查您登录客户帐户的用户是否将名为 Site.com Publisher User 和/或 Site.com Contributor User 的复选框标记为选中。您可以通过导航到设置 --> 管理设置 --> 管理用户 --> 用户 --> 找到用户设置并打开相关用户。如果未选中，则将其标记为选中。

希望这可以帮助。

# c# - 如何持久化引用共享子实体的实体

> ID：13816825
> 
> 赞同：0
> 
> 时间：2012-12-11T09:02:30.060
> 
> 标签：c#, nhibernate

我有以下场景：在运行时创建了两个“父”实体。它们中的每一个都引用一个“共享”子实体。

这是一些伪代码：

```
public class Parent
{
    public Parent(Child child)
    {...}
    public Child { get; }
}

Child child = new Child();
Parent mother = new Parent(child)
Parent father = new Parent(child) 
```

我希望能够从不同的会话和事务中独立并可能在单独的线程上保存母亲和父亲实例。

如何使用 NH 处理子实体的保存？

好的，有 18 次观看，没有评论……我想我需要补充一些说明。

我的映射定义当 Parent 被持久化时 Child 应该被自动持久化。

子实体会发生什么

```
session.Save(father) 
```

在一个线程上调用并且

```
session.Save(mother) 
```

在不同的线程上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:02:41.440

从评论看来，孩子只需要作为参考，它被保存`session.Load<Child>(knownChildId)`在每个线程中使用。这将为同一个对象创建 2 个不同的代理。

如果孩子尚未保存并且设置了级联，则可能存在潜在的竞争条件，并且

*   在创建处理父母的线程之前保存共享的孩子
*   `lock(child)`前`session.Save(father);`
*   对 Child 中的业务键引入唯一约束并在线程上处理 DuplicateKeyException

# php - 站点地图是否需要包含链接的静态页面？

> ID：13816833
> 
> 赞同：2
> 
> 时间：2012-12-11T09:03:23.590
> 
> 标签：php, html, xml, seo, sitemap

我想为我的动态内容生成站点地图。我是否还需要包含已链接到整个网站的静态页面？我只想制作一个脚本来查询我的库存，然后根据它生成站点地图。

想用 PHP 来做。

提交站点地图后，我希望即使它们未在站点地图中列出，谷歌仍能找到我的静态页面！

谢谢

-D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:11:57.517

如果您的文件已链接，那么 Google 会找到它们，但是，我个人喜欢在我的站点地图中包含我的所有页面（静态和动态）。这只是确保谷歌可以看到一切。

有几个网站可以用来生成站点地图，这是我喜欢的一个：

[http://www.web-site-map.com/index.php](http://www.web-site-map.com/index.php)

然后，您可以将未从提交的文档链接到的任何页面添加到站点地图。

希望这可以帮助

**更新**

Google**确实**会为您网站中链接的任何页面编制索引，但是，站点地图使此过程更加高效和有效。归根结底，是否使用一个取决于您。由于它们很容易构建，我不明白你为什么不这样做，因为它不会损害你的 SEO，它只会帮助它，如果有的话。

需要注意的重要一点是，任何未链接的页面，Google（和任何其他爬虫）都不会找到！这是站点地图非常有用的地方。

总而言之，站点地图并非绝对必要，但强烈推荐！

# stored-procedures - SSRS：将不同的参数值传递给两个数据集的存储过程

> ID：13816840
> 
> 赞同：4
> 
> 时间：2012-12-11T09:03:52.180
> 
> 标签：stored-procedures, reporting-services, sql-server-2008-r2

我的报告中有两个表格。两者都使用两个独立的数据集，它们从同一个存储过程中获取数据。现在，我希望数据集根据不同的参数值获取不同的数据。有没有办法做到这一点？我正在使用 SQL Server 2008-R2。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:30:52.833

在报告数据屏幕 (Ctrl+Alt+D) 中，您可以将两个数据集绑定到不同的参数。

1.  添加你的参数
2.  打开数据集属性
3.  转到参数部分
4.  添加所需的参数并为其命名与您的存储过程参数相同的名称，例如@EmployeeId

如果查询被标记为类型“存储过程”（在查询部分），这将在选择时传递参数。对其他数据集重复该过程

# c - 从文本文件中读取第一个单词，找出它的长度并计算文件中有多少个该长度的单词

> ID：13816841
> 
> 赞同：0
> 
> 时间：2012-12-11T09:04:00.063
> 
> 标签：c, file-io

我只是一个初学者，我不知道如何开始这项任务。我有一些想法，虽然我试图用谷歌搜索这个问题，但它们似乎都太复杂了，我无法成功。任何帮助，将不胜感激。顺便说一句，我正在用 C 语言编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:26:25.603

以下是一组可以帮助您自己解决问题的任务。

1.  尝试在 c 中打开/关闭文件。搜索“如何在 C 中打开文件”
2.  尝试从 c 中的文件中读取。搜索“如何在 C 中读取文本文件”
3.  现在您知道如何打开和读取文件了。尝试打开文件，并逐字打印文件中的内容。提示，您需要循环，并可能标记化。
4.  尝试确定一个单词的长度（c 中的一个字符串）。搜索“计算 c 中的字符串长度”（您可以使用一个标准函数）
5.  当您阅读每个单词时（从第 3 步开始），打印出它旁边的长度。搜索“如何打印格式化输出 c”
6.  现在你有了文件中的每个单词和它的长度。您需要做的就是获取第一个单词的长度，而不是打印出所有其他长度相同的单词，只需计数即可。最后，打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:36:22.073

有很简单的方法可以做到这一点。就这个：

```
string text = File.ReadAllText(@"C:\Users\TestFolder\FromThisFileWeRead.txt");
\\you should be carefull, because if file is not exists, you will have an exeption
\\try to catch it your own way

            if (!string.IsNullOrEmpty(text))
            {
                string[] words = text.Split(new char[] {',', ' ', '\t', '\n', '\r'});
                \\separators depend on your text file

                int firstWordLength = words[0].Length;
                int countWordsTheSameLength = 0;

                foreach (string word in words)
                {
                    if(word.Length == firstWordLength)
                    {
                        countWordsTheSameLength++;
                    }
                } 
```

另一种方式与之前类似：

```
string text = File.ReadAllText(@"C:\Users\TestFolder\FromThisFileWeRead.txt");

            if (!string.IsNullOrEmpty(text))
            {
                int firstWordLength = words[0].Length;
                string[] words = text.Split(new char[] {',', ' ', '\t', '\n', '\r'});
                List<string> wordsList = new List<string>(words);
                int firstWordLength = words[0].Length;
                countWordsTheSameLength = wordsList.FindAll(word => word.Length == firstWordLength).Count;
} 
```

对于这两种情况，您都需要使用`System.IO`.

我认为这很容易理解。将来您应该尝试 FileStream、StreamRead 和 StreamWrite 类。

祝你好运！

# java - 框架上的关闭按钮不起作用

> ID：13816845
> 
> 赞同：-2
> 
> 时间：2012-12-11T09:04:09.083
> 
> 标签：java, swing, user-interface, file-io, event-dispatch-thread

我写了一个 GUI 程序，当程序运行时（写入文件），关闭按钮不起作用，所以当它运行时我无法停止它。有人知道为什么吗？我可以停止它（当它正在写入文件时）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:10:14.023

如果没有进一步的证据，我猜你是在 Event Dispatching Thread 的上下文中写出你的文件。

这是非常非常糟糕的。EDT 负责（除其他外）处理所有发生的 UI 事件，包括关闭窗口的请求。但是，如果您使用耗时的任务（如 I/O、循环`Thread#sleep`或任何其他阻塞操作）阻塞此线程，则 EDT 无法处理队列中累积的任何事件。

在这种情况下，最好的办法是使用 a`SwingWorker`将文件的写入卸载到另一个线程。查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息

# c# - 从有序列表LINQ C#中按int排序查询

> ID：13816848
> 
> 赞同：1
> 
> 时间：2012-12-11T09:04:13.247
> 
> 标签：c#, linq

所以我试图通过一个 int var 来订购一个查询，该 int var 在相同的 int var 的有序列表中；例如，查询必须按项目的列表顺序排序。每个数据上下文都来自不同的数据库，这就是我将第一个查询变成基于宠物名称顺序的有序 id 列表的原因，第二个查询的数据字段中只有宠物 id 可用，查询如下所示：

```
 using (ListDataContext syndb = new ListDataContext())
        {
            using (QueryDataContext ledb = new QueryDataContext())
            {   
                // Set the order of pets by name and make a list of the pet id's
                var stp = syndb.StoredPets.OrderBy(x => x.Name).Select(x => x.PetID).ToList();
                // Reorder the SoldPets query using the ordered list of pet id's 
                var slp = ledb.SoldPets.OrderBy(x => stp.IndexOf(x.petId)).Select(x => x);

                // do something with the query

            }
        } 
```

第二个查询给了我一个“方法 'Int32 IndexOf(Int32)' 没有支持的 SQL 转换”。错误，有没有办法做我需要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:08:16.603

LINQ to SQL (EF) 必须将您的 LINQ 查询转换为可以针对 SQL 服务器执行的 SQL。错误想说的是，.NET 方法`IndexOf`没有等效的 SQL。您最好从`SoldPets`表中获取数据，而不做这`IndexOf`部分，然后从 LINQ 到 SQL (EF) 进行任何剩余的排序。

像这样的东西应该工作：

```
List<StoredPet> storedPets;
List<SoldPet> soldPets;

using (ListDataContext listDataContext = new ListDataContext())
{
    using (QueryDataContext queryDataContext= new QueryDataContext())
    {   
        storedPets =
            listDataContext.StoredPets
                .OrderBy(sp => sp.Name)
                .Select(sp => sp.PetId)
                .ToList();

        soldPets =
            queryDataContext.SoldPets
                .ToList();
    }
}

List<SoldPets> orderedSoldPets =
    soldPets.OrderBy(sp => storedPets.IndexOf(sp.PetId)) 
```

注意：您在示例中更改的大小写`PetId`，因此您可能希望查看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:39:11.327

LinqToSql 无法将您的 linq 语句转换为 SQL，因为没有等效的`IndexOf()`方法。您必须首先使用`ToList()`方法执行 linq 语句，然后在内存中进行排序。

```
using (ListDataContext syndb = new ListDataContext())
using (QueryDataContext ledb = new QueryDataContext())
{
    var stp = syndb.StoredPets.OrderBy(x => x.Name).Select(x => x.PetID).ToList();
    // Reorder the SoldPets query using the ordered list of pet id's 
    var slp = ledb.SoldPets.ToList().OrderBy(x => stp.IndexOf(x.petId));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:41:12.610

如果列表大小可以接受，您可以使用它：

```
using (ListDataContext syndb = new ListDataContext())
{
    using (QueryDataContext ledb = new QueryDataContext())
    {
        var stp = syndb.StoredPets.OrderBy(x => x.Name).Select(x => x.PetID).ToList();
        var slp = ledb.SoldPets.ToList().OrderBy(x => stp.IndexOf(x.petId));

        // do something with the query
    }
} 
```

# python - Python 2.7 中的旧式和新式类

> ID：13816849
> 
> 赞同：26
> 
> 时间：2012-12-11T09:04:15.760
> 
> 标签：python, class, python-2.7, new-style-class

> **可能重复：**
> [Python 中的旧样式和新样式类](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python)

Python 2.7 中新式和旧式类的现状如何？

我不经常使用 Python，但我隐约记得这个问题。文档似乎根本没有提到这个问题：[The Python Tutorial: Classes](http://docs.python.org/2/tutorial/classes.html)。我还需要担心这个吗？一般来说，我应该像下面这样声明我的类吗？

```
class MyClass:
    pass 
```

或者？

```
class MyClass(object):
    pass 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-11T09:07:33.763

总是子类“对象”。这些是新的样式类。

*   你已经为 Python 3 做好了准备。

*   `.super()`如果你需要的话，像这样正常工作的事情。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-11T09:17:12.867

您应该始终使用新的样式类。新式类是在 Python 编程语言中统一内置类型和用户定义类的努力的一部分。

新样式类有几样东西可以提供，例如：

*   属性：由 get/set 方法定义的属性
*   静态方法和类方法
*   新的**getattribute**钩子，与**getattr**不同，每次属性访问都会调用它，而不仅仅是在实例中找不到属性时
*   描述符：定义通过对象访问属性的行为的协议
*   重写构造函数**new**
*   元类

[资源。](http://realmike.org/blog/2010/07/18/introduction-to-new-style-classes-in-python/)

# c++ - 是否可以在 C++ 中开发静态 for 循环？

> ID：13816850
> 
> 赞同：19
> 
> 时间：2012-12-11T09:04:25.237
> 
> 标签：c++, for-loop, template-meta-programming

这样的事情有可能存在吗？

```
template<int Channel>
void deduce_mask(Matrix const &src, int mask[])
{
    //I hope i could become a constant and the compiler would unroll the loop at compile time        
    for(int i = Channel; i != -1; --i)
    {            
        //mapper is a helper class which translate two and three dimension into one dimension index
        //constexpr makes it possible to find out the index at compile time
        mask[mapper(0, 1, i)] = src(row - 1, col)[i];
        mask[mapper(1, 1, i)] = src(row, col)[i];
        mask[mapper(2, 1, i)] = src(row + 1, col)[i];    
    }
} 
```

代替

```
template<int Channel>
class deduceMask
{
public:
    static void deduce_mask(matrix const &src, int mask[]);
};

template<int Channel>
void deduce_mask(matrix const &src, int mask[])
{                
    mask[mapper(0, 1, Channel)] = src(row - 1, col)[Channel];
    mask[mapper(1, 1, Channel)] = src(row, col)[Channel];
    mask[mapper(2, 1, Channel)] = src(row + 1, col)[Channel];    

    deduceMask<Channel - 1>::deduce_mask(src, mask);
}

template<>
class deduceMask<-1>
{
public:
    static void deduce_mask(matrix const &src, int mask[])
    {

    }
}; 
```

当我希望编译器在编译时找出结果时，第二个解决方案是我能想到的唯一解决方案。我是否有一种简单的方法可以使“i”像元编程解决方案一样成为常数值？对我来说，一个简单的 for 循环比元编程版本更容易使用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-09T23:39:41.930

C++ 中的模板元编程是纯函数式编程，而在纯函数式编程中，您不会使用 for 或 while 之类的循环，而且您根本不会拥有任何可变数据。你所拥有的只是递归。为了使递归工作更容易，您需要稍微提高抽象级别。您拥有的递归代码很好，但迭代和工作可以分开：

```
template <int First, int Last>
struct static_for
{
    template <typename Fn>
    void operator()(Fn const& fn) const
    {
        if (First < Last)
        {
            fn(First);
            static_for<First+1, Last>()(fn);
        }
    }
};

template <int N>
struct static_for<N, N>
{
    template <typename Fn>
    void operator()(Fn const& fn) const
    { }
}; 
```

现在你有了这个元函数，你可以像这样编写你的 deuce_mask 函数：

```
template<int Channel>
void deduce_mask(Matrix const &src, int mask[])
{
    static_for<0, Channel>()([&](int i)
    {            
        mask[mapper(0, 1, i)] = src(row - 1, col)[i];
        mask[mapper(1, 1, i)] = src(row, col)[i];
        mask[mapper(2, 1, i)] = src(row + 1, col)[i];    
    });
} 
```

带有 /Ob1 命令行开关的 Visual C++ 2012 将此代码编译为：

```
push        0  
call        <lambda_7588286c1d4f3efe98a2e307bd757f8e>::operator() (010C1270h)  
push        1  
call        <lambda_7588286c1d4f3efe98a2e307bd757f8e>::operator() (010C1270h)  
push        2  
call        <lambda_7588286c1d4f3efe98a2e307bd757f8e>::operator() (010C1270h)  
push        3  
call        <lambda_7588286c1d4f3efe98a2e307bd757f8e>::operator() (010C1270h)  
push        4  
call        <lambda_7588286c1d4f3efe98a2e307bd757f8e>::operator() (010C1270h)  
... 
```

如果不能使用 lambda 函数，则需要编写函子。Functor 比 lambda 函数有一个优势——你可以指定一个调用约定（如果你不介意这样做的话）。如果函子的 operator() 具有`__fastcall`调用约定，那么您将看到`mov edx, x`而不是`push x`在汇编代码中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-30T19:41:06.070

`if constexpr`我们可以改进 AOK 的解决方案。

```
template <int First, int Last, typename Lambda>
inline void static_for(Lambda const& f)
{
    if constexpr (First < Last)
      {
         f(std::integral_constant<int, First>{});
         static_for<First + 1, Last>(f);
      }
} 
```

有了这个我们可以摆脱那个`::apply`

```
static_for<0, Channel>([&](auto i) 
{            
    // code...
    mask[mapper(0, 1, i)] = src(row - 1, col)[i]; // Notice that this does not change
    std::get<i.value>(some_tuple); // But here you must get the member .value
    // more code...
}); 
```

不幸的是，您仍然必须编写`i.value`.

* * *

请注意，如果没有这将是不可能的，`if constexpr`因为 AOK 的方式需要对`static_for`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-22T13:30:31.180

乐高的响应，虽然优雅而令人敬畏，但如果您希望索引进入模板，则不会编译 - 例如`std::get<i>(some_tuple)`

如果您想在将来实现这个附加功能，下面的代码将起作用并且应该与乐高的解决方案向后兼容（除了我使用静态应用方法而不是 operator()）：

```
template <int First, int Last>
struct static_for
{
    template <typename Lambda>
    static inline constexpr void apply(Lambda const& f)
    {
        if (First < Last)
        {
            f(std::integral_constant<int, First>{});
            static_for<First + 1, Last>::apply(f);
        }
    }
};
template <int N>
struct static_for<N, N>
{
    template <typename Lambda>
    static inline constexpr void apply(Lambda const& f) {}
}; 
```

现在您可以执行以下操作：

```
static_for<0, Channel>::apply([&](auto i) // Changed from '(int i)'. In general, 'auto' will be a better choice for metaprogramming!
{            
    // code...
    mask[mapper(0, 1, i)] = src(row - 1, col)[i]; // Notice that this does not change
    std::get<i.value>(some_tuple); // But here you must get the member .value
    // more code...
}); 
```

在 VC++ 2015 中测试。我没有研究为什么会这样，但我只能假设它`std::integral_constant<T,...>`定义了一个隐式转换为`T`using 值，但编译器无法确定隐式转换产生 a `constexpr`，所以你必须检索值使用`i.value`，这是一个`constexpr`.

**在评论中解决@tom 的问题** 如果要迭代参数包，可以执行以下操作（相同的实现）：

```
template<typename... Args>
inline constexpr auto foo(const Args&... args)
{
    static_for<0,sizeof...(Args)>::apply([&](auto N)
    {
        std::cout << std::get<N.value>(std::make_tuple(args...));
    });
}

foo(1,"a",2.5); // This does exactly what you think it would do 
```

如果`std::get<N.value>(std::make_tuple(args...))`看起来很难看，您可以创建另一个`constexpr`函数来最小化代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T20:45:18.160

您应该能够在编译时使用`for...`. 我的理解是，您甚至应该能够循环遍历结构成员，如下所示：

```
#include <iostream>
#include <string>
#include <tuple>
#include <utility>

struct Agg { int a;
             std::string b;
             double c;};

template <typename... T>
void print (std::tuple<T...> const & t) {
        for... (auto const & member: t)
                std::cout << member << '\n';
}

int main () {
        auto agg = Agg{1,"bla",2.1};    
        print (agg);
} 
```

请参阅 Timur Doumler 的此[视频@47:44](https://youtu.be/AgatxxXNwBM)。请注意，甚至来自trunk（或master）的gcc（或clang）都不支持这种c ++ 20类型的编译时间循环 - 因此我没有测试。顺便说一句，有人知道我可以`for...`用标点符号搜索的搜索引擎吗？

# javascript - 基于另一个启用/禁用单选按钮

> ID：13816853
> 
> 赞同：0
> 
> 时间：2012-12-11T09:04:28.507
> 
> 标签：javascript

我有单选按钮actualdays_month，只有工作日。我的要求是，如果我按下一个 rdb，那么另一个 rdb 必须禁用。这里所有单选按钮的 id 和 name 都是相同的

```
<label><input type="radio" name="salarycalenderyears" value="ActualDays_Month" checked="checked" id="salarycalenderyears" title="">Actual Days / Month</label><br> 
```

仅工作日
仅工作日 + WH
仅工作日 + WH + PH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:27:44.393

这是你想要做的[http://jsfiddle.net/beradrian/cAdmu/](http://jsfiddle.net/beradrian/cAdmu/)吗？

```
function onChange() {
   $("[name='type']").each(function() {
       var disabled = !this.checked;
       $("[name='" + this.value + "']").each (function() {
           this.disabled = disabled;
       });
  });
}

onChange();
$("[name='type']").change(onChange); 
```

# android - 如何在 Android 应用程序中嵌入 C 程序

> ID：13816855
> 
> 赞同：2
> 
> 时间：2012-12-11T09:04:29.863
> 
> 标签：android, c, android-ndk

我正在开发一种旨在在 Linux 上编译和运行的软件。我最近被要求使用 NDK 为 Android 交叉编译它，这非常简单。

为了快速做到这一点，我们只编译了源代码，**没有编写任何 JNI 包装器**。我将生成的二进制文件复制`adb push`到模拟器（根）并从`adb shell`. 一切正常。

现在我的问题是：如何以某种方式将这些二进制文件嵌入到 android 应用程序中并运行它们（它们就像服务一样，必须在后台运行）？

我想避免更改现有代码以支持 JNI 接口，但编写一个仅`exec`其他二进制文件的小型 JNI/C 代码就可以了。

额外的问题：一旦嵌入，有没有办法知道已安装二进制文件的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:45:13.723

[http://www.ibm.com/developerworks/opensource/tutorials/os-androidndk/index.html](http://www.ibm.com/developerworks/opensource/tutorials/os-androidndk/index.html) 我在 IBM developerworks 中找到了关于`Android NDK`

# javascript - 如何在 Highchart 的饼图中进行钻取？

> ID：13816865
> 
> 赞同：2
> 
> 时间：2012-12-11T09:04:47.263
> 
> 标签：javascript, charts, highcharts

我已经钻了“柱形图”。&现在我想深入了解“饼图”

我显示饼图的代码如下，

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',

            },
            title: {
                text: ''
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b>: '+ Math.round(this.percentage) +' %';
                        }
                    }
                }
            },
            series: 
                [{
                   type:'pie',
                    data: model.mixchart

                }]
});
});

}); 
```

我怎样才能在这方面进行深入研究？

下钻之后它应该只显示饼图。那么在上面的代码中我应该怎么做呢？

至少给我一些在饼图中向下钻取的参考链接，以便我可以更喜欢那个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:24:58.883

有两种方法可以向下钻取饼图。

*   您可以修改相同的图表数据
*   您可以使用单击的对上一个图表的引用来绘制新的饼图。

[这](http://jsfiddle.net/nagoba/V4q69/1/)是我的 Jsfiddle 链接。我已经向下钻取饼图以显示柱形图。
要向下钻取饼图，您需要的是单击的切片。

要做到这一点，你需要的是，

```
plotOptions: {
         pie: {
             point: {
                 events: {
                     click: function() {
                        //logic for drill down goes here                       
                     }
                 }
             }
         }
     }, 
```

**注意**：如果您在同一个图表中向下钻取。
如果您要向下钻取到不同的图表类型，您还需要该图表类型的绘图选项。
我希望这有帮助。
干杯:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:03:06.453

```
<script type="text/javascript">

         var chart;
         $(document).ready(function() {
            chart = new Highcharts.Chart({
               chart: {
                  renderTo: 'container',
                  backgroundColor: '#e2dfd3',
                  plotBackgroundColor: null,
                  plotBorderWidth: null,
                  plotShadow: false,

               },
               //credits for highcharts
               credits: {
                       enabled: false
                  },
               title: {
                  text: 'Country/Region',
               },
               tooltip: {
                  formatter: function() {
                     return '<b>'+ this.point.name +'</b>: '+ this.y +' %';
                  }
               },
               plotOptions: {
                  pie: {
                     borderWidth: 0, // border color control
                     size: '80%',
                     allowPointSelect: true,
                     cursor: 'pointer',
                     point: {
                        events: {
                           click: function() {
                              var drilldown = this.drilldown;
                              if (drilldown) { // drill down
                                 setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color);
                              } else { // restore
                                 setChart(name, categories, data);
                              }
                           }
                        },

                     dataLabels: {
                        enabled: true,
                        color: '#000', //label colors
                        connectorColor: '#000', // connector label colors
                        formatter: function() {
                           return '<b>'+ this.point.name +'</b>: '+ this.y +' %';
                        }
                     }
                  }
               },
                series: [{
                  type: 'pie',

                  name: 'Country/Region',
                  data: [
                     {
                        name:'United States',
                        y: 45.0,
                     },{
                        name:'Germany', 
                        y: 26.8
                     },{
                        name: 'France',    
                        y: 12.8,
                        sliced: true,
                        selected: true,
                        /*drilldown: {
                            name: ['Disney'],
                            categories: ['2001', '2002', '2003','2004','2005','2006','2007','2008','2009','2010','2011'],
                            data: [32591, 29256, 28036, 27113, 26441, 27848, 29210, 29251, 28447, 28731],
                            color: colors[12] 
                         },*/

                     },{
                        name:'Japan',
                        y: 8.5
                     },{
                        name:'United Kingdom',
                        y: 8.5
                     },{
                        name:'Switzerland',
                        y: 8.5
                     },{
                        name: 'South Korea',
                        y: 6.2
                     },{
                        name:'Italy',
                        y: 6.2
                     },{
                        name:'Canada',
                        y: 0.7
                     },{
                        name:'Finland',
                        y: 0.7
                     },{
                        name:'Netherlands',
                        y: 0.7
                     },{
                        name:'Spain',
                        y: 0.7
                     },{
                        name:'Sweden',
                        y: 0.7
                     }
                  ]
               }]
               }/**/
            });
         });

      </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T06:43:55.713

拉胡尔，看看这段代码。它只是样本

```
$(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: { renderTo: 'container', type: 'bar'},
            title: { text: '' },
            xAxis: {
                categories: model.buckets,

              },
        yAxis: {          
                title: { text: '' }
        },

        plotOptions: {
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function () {
                           var range=this.category[0];
                           if (step==0) { // drill down
                                $.ajax({
                                    type: 'POST',
                                    url: root + "analytics/standard_prospects_prospectaging/?json",
                                    data: { range: range, what: 'drill' },
                                    success: function (o) {
                                        setChart("", o.buckets, o.pcounts, '#e48801');
                                        rebind(o.aging);
                                        step = step + 1;
                                    },
                                    dataType: "json"
                                });

                            } else { // restore
                                console.log(this);
                                $.ajax({
                                    type: 'POST',
                                    url: root + "analytics/standard_prospects_prospectaging/?json",
                                    data: { oppname: range },
                                    success: function (o) {
                                        window.location.href = "/prospects/index/" + o.oppid;
                                    },
                                    dataType: "json"
                                });

                            }
                        }
                    }
                },

            }
        },
    series: [{
                name: 'Prospect Aging',color:'#e48801',
                data: model.pcounts
        }]
});
    }); 
```

# android - 使用数据库的条形图

> ID：13816867
> 
> 赞同：0
> 
> 时间：2012-12-11T09:04:57.413
> 
> 标签：android, sqlite, achartengine

我是安卓新手。我正在使用 achartengine 创建条形图。我无法绘制条形图。你能告诉我我在这里做错了什么吗？我使用 sqlite 数据浏览器创建了一个数据库，并将数据库复制到我项目的 assets 文件夹中。

我编写了一个代码来绘制带有静态值的条形图，现在我修改它以从数据库中获取值。

```
package flu.solutions.travelsense;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import org.achartengine.ChartFactory;
import org.achartengine.chart.BarChart.Type;
import org.achartengine.model.CategorySeries;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.renderer.SimpleSeriesRenderer;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYMultipleSeriesRenderer.Orientation;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;  
import android.view.Menu;
public class ChartActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        XYMultipleSeriesRenderer renderer = getBarDemoRenderer();
        setChartSettings(renderer);
        Intent intent = ChartFactory.getBarChartIntent(this, getBarDemoDataset(), renderer, Type.DEFAULT);
        startActivity(intent);
    }

    public Intent createIntent() 

     {

    String[] titles = new String[] { "Top 10 Destinations", " " };
    List<double[]> values = new ArrayList<double[]>();
    values.add(new double[] { 8, 6, 4, 6, 7, 7, 9, 5, 7, 8, 8 });
    values.add(new double[] {});

    int[] colors = new int[] { Color.RED, Color.BLACK};

    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
    renderer.setOrientation(Orientation.HORIZONTAL);

    setChartSettings(renderer);

    renderer.setXLabels(1);
    renderer.setYLabels(10);

    renderer.addXTextLabel(1, "Bangalore");
    renderer.addXTextLabel(2, "Mysore");
    renderer.addXTextLabel(3, "Chennai");
    renderer.addXTextLabel(4, "Delhi");
    renderer.addXTextLabel(5, "Kolkatta");
    renderer.addXTextLabel(6, "Kashmir");
    renderer.addXTextLabel(7, "Hyderabad");
    renderer.addXTextLabel(8, "Mumbai");
    renderer.addXTextLabel(9, "Kerala");
    renderer.addXTextLabel(10, "Gujarat");

    int length = renderer.getSeriesRendererCount();
    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
      seriesRenderer.setDisplayChartValues(false);
      }

    return ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
    }

    public XYMultipleSeriesRenderer getBarDemoRenderer() {
        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
        renderer.setAxisTitleTextSize(16);
        renderer.setChartTitleTextSize(20);
        renderer.setLabelsTextSize(15);
        renderer.setLegendTextSize(15);
        renderer.setMargins(new int[] {20, 30, 15, 0});
        SimpleSeriesRenderer r = new SimpleSeriesRenderer();
        r.setColor(Color.BLUE);
        renderer.addSeriesRenderer(r);
        r = new SimpleSeriesRenderer();
        r.setColor(Color.GREEN);
        renderer.addSeriesRenderer(r);
        return renderer;
      }

     private XYMultipleSeriesDataset getBarDemoDataset() {
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        final int nr = 10;
        Random r = new Random();
        int SERIES_NR = 2;
        for (int i = 0; i < SERIES_NR; i++) {
          CategorySeries series = new CategorySeries("Demo series " + (i + 1));
          for (int k = 0; k < nr; k++) {
            series.add(100 + r.nextInt() % 100);
          }
          dataset.addSeries(series.toXYSeries());
        }
        return dataset;
      }

    private void setChartSettings(XYMultipleSeriesRenderer renderer) {
        renderer.setChartTitle("Chart demo");
        renderer.setXTitle("x values");
        renderer.setYTitle("y values");
        renderer.setXAxisMin(0);
        renderer.setXAxisMax(5);
        renderer.setYAxisMin(0);
        renderer.setYAxisMax(250);
      }
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_chart, menu);
        return true;
    }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:37:42.520

您的`createIntent()`方法甚至看起来都没有被引用。我相信正确的`OnCreate`是：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = createIntent();
    startActivity(intent);

} 
```

但是您应该知道，您最终会希望将图形加载为视图，而不是意图获得所需的实时功能。

# android - 如何开发可以连接到三星智能电视应用程序的移动应用程序？

> ID：13816869
> 
> 赞同：3
> 
> 时间：2012-12-11T09:05:01.627
> 
> 标签：android, web-applications, samsung-smart-tv

我正在尝试制作一个可以与移动应用程序通信的智能电视应用程序，最好是 android。我已经尝试了三星智能电视开发者论坛的这个教程：http: [//www.samsungdforum.com/Guide/tut00024/index.html](http://www.samsungdforum.com/Guide/tut00024/index.html) 虽然它只解释了如何在同一网络上为安卓找到智能电视。不是如何与它沟通。我已经安装了基于 Web 的 Chrome 版本，但我无法在手机上使用它，因为您必须在以下位置运行浏览器：--disable-web-security moode。

我也尝试过 Movl：[https](https://connect.movl.com) ://connect.movl.com 。但是我从他们那里得到的 api 密钥和可用的示例之一对我不起作用。可能是因为我位于新加坡（为什么，我不知道），但它适用于 Movl 的支持人员和我在瑞典的朋友。

我想知道如何将移动应用程序连接到智能电视应用程序（也是我开发的）并在它们之间发送信息。有谁知道这是怎么做到的吗？

非常感谢解答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-17T10:16:52.693

[拨号](http://en.wikipedia.org/wiki/DIscovery_And_Launch)

它是许多领先公司使用的协议，用于从 android 智能手机启动智能电视上的活动

我希望这对您有所帮助

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T12:01:56.553

是的，您需要使用 N-Screen API。具体看`webapis.nservice` 这里的教程：[N-Service](http://developer.samsung.com/samsung-web-api/technical-docs/N-Service)

# android - 黑屏和等待一个屏幕到另一个屏幕？

> ID：13816875
> 
> 赞同：0
> 
> 时间：2012-12-11T09:05:20.803
> 
> 标签：android, android-activity, screen

我在父活动中有一个列表视图，我正在将一些参数从父屏幕传递给子活动。我还有自定义主题和标题栏。我的问题是当我从父列表视图转到子视图屏幕时，它需要很长时间并且黑色屏幕来了一会儿。是什么原因，我该如何避免？

我在谷歌搜索了一下，也看到了一个原因，但它对我不起作用。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:46:52.117

根据描述，您有处理问题，而不是显示问题。您需要确定需要太长时间才能完成的例程。如果没有看到处理代码，很难推荐解决方案。

以下几点可能会有所帮助：您是在真实设备上运行应用程序还是使用模拟器？- 模拟器是出了名的慢。尝试在真实设备上运行它。

您是否在 UI 线程上访问在线资源，例如网站或 Web 服务？所有在线访问都应在专用线程上运行。

您的处理在哪里进行？不要在 ListView 的 onClick 中做多余的处理，因为它会在 UI 线程上运行。仅在新 Activity 的 onCreate 方法中放置 MINIMAL 处理，因为它也在 UI 线程上运行。放置冗长处理的最佳位置是在新 Activity 的 onResume 方法中（这仍然在 UI 线程上运行），并且理想情况下将处理传递给另一个线程。

您正在访问本地 SQLite 数据库吗？如果是这样，您的 SQL 语句和/或数据库可能没有针对性能进行优化。如果您使用的是本地数据库并且不是强大的 SQL 程序员，请让某人查看您的语句或将它们张贴在这里。

您的应用程序是否使用大量内存，例如加载到内存中的大型数组或图像？如果是这样，请减少内存需求 - 只保留您在任何时候必须拥有的内存。

如果这些都没有帮助，请发布您在 ListView 的 onClick 到您准备好接受其他用户输入之间进行的处理的详细描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:08:50.460

当您到达下一个屏幕时，请将您的处理任务放入线程中（在 OnCreate() 中）并显示等待的进度对话框。

**编辑 -**在活动中尝试这个主题，让我知道发生了什么。

```
@android:style/Theme.Translucent.NoTitleBar 
```

# networking - 找出哪个客户端使网络变慢

> ID：13816879
> 
> 赞同：0
> 
> 时间：2012-12-11T09:05:23.367
> 
> 标签：networking, wireshark, ethernet, lan, fritzbox

我们有大约 30 个客户端连接到单个电缆调制解调器/路由器 (Fritzbox 6360)。一些客户端还连接到也连接到电缆调制解调器的 TP-Link W-LAN 路由器。

有时互联网很慢，我们可以看到一个连续的上游（6 MBit/s）。不幸的是，我们无法看到哪些客户端导致了该流量。Fritz Box 提供了一种功能来捕获网络流量，然后使用 Wireshark 对其进行分析。

**电缆调制解调器可以捕获以下接口：**

1.  网络连接
2.  接口 0（“互联网”）
3.  路由接口

**网络接口**

*   tunl0
*   cni0
*   lbr0
*   万0
*   eth0
*   局域网
*   路由器0
*   安全0

并且有一个启动**DTrace**的选项（默认参数是）

```
-D -s -m -i256 -dect -dlc -c1 -c2 -c3 -c4 -c5 -nt3 -d2 -d3 
```

我们已经捕获了不同的接口并尝试使用 Wireshark 理解数据，但没有取得多大成功。**什么是查看当前哪个客户正在*上传****数据的正确方法？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:28:06.890

在 Wireshark 中，要获取 IP 地址列表以及每个 IP 地址占用的跟踪百分比，请转到 Statistics->IP Addresses.. 并在弹出的框中单击“Create Stat”，同时保留“过滤器”选项空白。您应该能够弄清楚您的哪个客户端 IP 占用了最多的带宽。

要进行直观比较，请单击“Statistics->IO Graph”，然后在 Graph 2 旁边的第二个过滤器中，键入“ip.src == xxxx”（其中 xxxx 是您怀疑占用最多的上传者的 ip 地址带宽），然后单击“图表 2”。这将为您提供数据包与时间的关系图。您还可以过滤掉其他 IP 地址，以便在同一图表中同时显示以进行比较。

编辑：我还建议留意 IPv6 地址。

# ruby-on-rails - xpath 获取表单内的文本

> ID：13816880
> 
> 赞同：1
> 
> 时间：2012-12-11T09:05:24.097
> 
> 标签：ruby-on-rails, xml, xpath, mechanize-ruby

我有这样一个页面的 HTML 结构，

```
<form align="center" method="post" name="form1">
<input type="hidden" value="J0512-0491" name="jobid">
<input type="hidden" value="1" name="BDID">

<br>
<hr>
<b>Category: </b>
Food & Beverage
<br>
<b>City: </b>
Carlyle, Saskatchewan, Canada
<br>
<b>Job Number: </b>
05012-04191
<br>
<b>Salary Range: </b>
$13.19 - 16.48
<br>
<b>Closing Date: </b>
31/03/2013
<br>
<hr>
<b></b> 
```

我需要使用 xpath 提取“City:”的文本，即“Carlyne,Saskatchewan,Canada”。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:35:32.460

使用这个 XPath：

```
//*[contains(text(),'City')]/following-sibling::text()[1] 
```

# vim - vim：多次匹配单词并替换

> ID：13816881
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:05:24.293
> 
> 标签：vim

> **可能重复：**
> [重复匹配模式并替换](https://stackoverflow.com/questions/13816063/repeat-match-pattern-and-replace)

如何将整个单词与特定模式多次匹配并在多行中替换？

例子：

```
set_path 1 -start -from [get_obj { A_1[0] B_2[1] .... Z_n[100] }] 
```

替换为

```
set_path 1 -start -from [get_obj {xyz/A_1[0] xyz/B_2[1]  .... xyz/Z_n[100] }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:38:39.200

在您的示例中，您可以使用`:s@\<\ze[A-Z]_@xyz/@g`

细节：

*   `:s`是替换命令，`@`是模式和替换分隔符
*   `\<`匹配单词的开头
*   `\ze`与将模式的其余部分作为前瞻肯定断言具有相同的效果
*   `@g`在同一行上启用多个替换。

如果您在多行上需要它，只需`s`使用 range:`:20,30s`或前缀`:%s`，或者`:`当您的行在视觉选择中突出显示时点击，命令行将以 s 开头`:'<,'>`，添加 s。

# java - DatagramSocket 从不接收

> ID：13816890
> 
> 赞同：2
> 
> 时间：2012-12-11T09:05:59.273
> 
> 标签：java, networking, udp

尽管我知道我的 UDP 数据包按预期到达（通过 Wireshark），并且关闭了 Windows 防火墙 - 我非常简单的 Java 代码从未收到任何数据包。

```
byte[] buffer = new byte[2048];
DatagramSocket socket = new DatagramSocket( 50000 );
DatagramPacket packet = new DatagramPacket( buffer, buffer.length );
socket.receive( packet ); 
```

我的机器上有 3 个网络适配器，所以我尝试非常具体地了解 IP。我尝试设置套接字以查看数据包到达的本地地址 - 没有收到任何东西。而且我还尝试将套接字连接到正在发送数据包的远程 IP - 没有收到任何东西。一直以来，Wireshark 都看到每秒有 160 个数据包到达......

我唯一的另一个想法是我没有在发送端计算 UDP 校验和（UDP 数据包是在嵌入式系统上“手动”组装的），它只是被设置为 0x0000 - 确实`DatagramSocket`丢弃没有校验和的 UDP 数据包！ ?

* * *

根据@Andreas 的建议，我编写了一个简单的测试服务器来帮助诊断问题。

```
InetAddress outAddr = InetAddress.getLocalHost();
InetAddress inAddr = InetAddress.getByName( "192.178.178.0" );

byte[] buffer = ( "Hello" ).getBytes();
DatagramSocket socket = new DatagramSocket( 50000, outAddr );
while ( true ) {
    DatagramPacket packet = new DatagramPacket( buffer, buffer.length, 
                                                inAddr, 50000 );
    socket.send( packet );

    try {
        Thread.sleep( 500 );
    } catch ( InterruptedException e ) {
        // Ignore.
    }
} 
```

Wireshark 尽职尽责地指出它正在接收它们 - 但我的客户端仍然没有，即使接收 IP 已明确设置：

```
InetAddress inAddr = InetAddress.getByName( "192.178.178.0" );
DatagramSocket socket = new DatagramSocket( 50000, inAddr );
...
socket.receive( packet ); 
```

* * *

不过，我刚刚注意到一些奇怪的事情，当我检查哪个`NetworkInterface`用于发送和接收时，Java 会报告正确的那个（“拥有”192.178.178.0 的那个）——但是 Wireshark 只能在不同的网络设备上看到我的测试服务器数据包. 关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:42:31.267

好吧，这很尴尬。我为私人和工作网络关闭了 Windows 防火墙 - 但事实证明 Windows 被认为是我真正需要成为公共网络的那个......

它现在工作正常。我考虑删除这个问题，但希望它会帮助其他一些布偶。

# mysql - 需要帮助......选择日期不在的地方

> ID：13816901
> 
> 赞同：0
> 
> 时间：2012-12-11T09:06:48.133
> 
> 标签：mysql, sql, plsql

希望有人能告诉..

```
Table A                  Table E
Id  |  Date              Id  |  Start_date  |  End_date
 1     2012-12-10         1     2012-12-09     2012-12-10
 2     2012-12-11         2     2012-12-12     2012-12-14 
```

我希望的结果..
2012-12-11

这是我认为可能适用于从表 A 中选择不在表 E ranga 日期中的日期的代码...

```
SELECT * FROM `A` 
WHERE `A`.`DATE` NOT BETWEEN (SELECT `E`.`DATE_START` FROM `E`) AND (SELECT `E`.`DATE_END`       
FROM `E`); 
```

但不幸的是，子查询返回超过 1 行。

我想知道怎么做？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:09:47.357

您想知道子查询如何返回多行吗？那是因为表中有不止一行与您的查询匹配。

如果您想要一行，则需要将查询限制更多，例如：

```
select `e`.`date_start` from `e` where `e`.`id` = 1 
```

* * *

如果您想要 A 中不包含在E 中的*任何*日期范围内的所有日期，一种方法是获取包含在某个范围内的 A 日期列表，然后从 A 中获取*不*包含在不在*那个*列表中。

就像是：

```
select date
from   a
where  date not in (
           select a.date
           from   a, e
           where a.date between e.start_date and e.end_date
       ) 
```

通过优秀的[phpMyAdmin 演示](http://demo.phpmyadmin.net/STABLE/index.php)站点将其作为：

```
create table a (id int, d date);
create table e (id int, sd date, ed date);
insert into a (id, d) values (1, '2012-12-10');
insert into a (id, d) values (2, '2012-12-11');
insert into e (id, sd, ed) values (3, '2012-12-09', '2012-12-10');
insert into e (id, sd, ed) values (4, '2012-12-12', '2012-12-14');
select d from a where d not in (
    select a.d from a, e where a.d between e.sd and e.ed
    ); 
```

结果输出：

```
2012-12-11 
```

如预期的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:10:02.970

如果表 A 中的 Id 与表 E 中的 Id 相同：

```
SELECT *
FROM A, E
WHERE A.Id = E.Id
AND A.Date NOT BETWEEN E.Start_Date AND E.End_Date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:17:48.650

要从 A 中获取不在 E 中任何日期范围内的所有记录，请获取日期范围内的记录，然后选择不在该结果中的记录：

```
select *
from A
where Id not in (
  select A.Id
  from A
  inner join E on A.Date between E.Start_date and E.End_date
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:30:53.097

您在这里寻找的是 A 中的记录集，其中 B 中不存在 A 中的日期在 B 中的开始日期和结束日期之间的记录。

因此，我建议您以这种方式构造查询。

就像是 ...

```
 Select ...
 From   table_A
 Where  not exists (
          Select null
          From   table_b
          Where  ...) 
```

根据表的连接基数及其大小，您可能会发现这比“查找不存在 John 的集合中的行”方法执行得更好，除了它更直观地匹配您的逻辑。

# javascript - 在 MVC3 的 DropdownList 中加载大量数据

> ID：13816913
> 
> 赞同：0
> 
> 时间：2012-12-11T09:07:41.120
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, html-select

我的 MVC3 项目中有 Jquery Select2 DropdownList。通常下拉列表的数据最少为 50000 条记录。通过 ViewBag 从控制器传递到视图的记录。当将数据渲染到页面时，会花费大量时间来加载所有数据。

此外，当我单击下拉列表时，会出现一些浏览器错误，例如停止脚本。我需要知道是否有更好的方法可以在不影响页面加载的情况下将我的内容加载到 DropDownList 中。我将在此处附加我当前的控制器并查看代码。

**行动**

```
ViewBag.IssueId = new SelectList(Db.Issues, "id", "Description", item.IssueId); 
```

**看法**

```
 @Html.DropDownList("IssueId", string.Empty) 
```

**jQuery Select2 代码**

```
 $('#IssueId').select2({
        placeholder: 'Select Issue',
        width: '220px',
        allowClear: false
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:09:27.553

没有下拉列表应该有 50000 条记录。

这对于[用户体验](https://ux.stackexchange.com/questions/22201/drop-down-lists-upper-limit-on-values)来说是可怕的。

你需要重新考虑你想要达到的目标。例如，如果确实能够加载，用户如何能够使用具有这么多选项的下拉菜单。也许你可以有一个过滤器，可以在下拉列表中加载不同的集合，这个过滤器本身可以是一个下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:19:10.083

You should try categorizing (if possible) your List Items into groups.

Eg.:

```
Group A:items
Group B:items 
```

And so on...

& then you can use cascading dropdownlists for selection.

# .net - 编写基于正则表达式的词法分析器 - 正则表达式与输入不匹配

> ID：13816919
> 
> 赞同：0
> 
> 时间：2012-12-11T09:08:00.397
> 
> 标签：.net, regex

我正在为 CSS 编写一个词法分析器/标记器，按照这个语法规范：[http ://www.w3.org/TR/CSS21/syndata.html#syntax](http://www.w3.org/TR/CSS21/syndata.html#syntax)

我有一个正在尝试标记的示例样式表，在此处指定：

```
const String css = @"

foo bar {
    property: value;
    property2: value2;
    /* comment1 */
}
        "; 
```

我的词法分析器在每次迭代中遍历每个正则表达式，它正确地捕获了初始空白标记，但是`Ident`正则表达式无法捕获`"foo"`文本。这是我的正则表达式：

```
public const String Ident    = "[-]?" + Nmstart + Nmchar + "*";
public const String Nmstart  = "[_a-z]|" + Nonascii + "|" + Escape;
public const String Nmchar   = @"[_a-z0-9-]|" + Nonascii + "|" + Escape;
public const String Nonascii = @"[^\0-\237]";
public const String Escape   = Unicode + @"\\[^\n\r\f0-9a-f]";
public const String Unicode  = @"\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?"; 
```

正`Ident`则表达式扩展到此（转义）：

```
[-]?[_a-z]|[^\\0-\\237]|\\\\[0-9a-f]{1,6}(\\r\\n|[ \\n\\r\\t\\f])?\\\\[^\\n\\r\\f0-9a-f][_a-z0-9-]|[^\\0-\\237]|\\\\[0-9a-f]{1,6}(\\r\\n|[ \\n\\r\\t\\f])?\\\\[^\\n\\r\\f0-9a-f]* 
```

或者这个（未转义，逐字）：

```
[-]?[_a-z]|[^\0-\237]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?\\[^\n\r\f0-9a-f][_a-z0-9-]|[^\0-\237]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?\\[^\n\r\f0-9a-f]* 
```

我的正则表达式匹配 CSS 规范中的表达式（我认为），那为什么不匹配`"foo"`呢？

### 更新：

根据 leppi 的建议，我添加了括号，结果如下：

```
public const String Ident= "[-]?(" + Nmstart + ")(" + Nmchar + ")*"; 
```

...但是它仍然不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:00:50.747

问题的解决方案是双重的：

首先，Leppi 关于我对`Nmstart`and`Nmchar`宏进行分组的建议是正确的。

其次，我需要使用`"\G"`前缀而不是`"^"`前缀，因为我使用的是`Match(String, Int32)`重载。

# javascript - 通过它的子滚动条动画跳转

> ID：13816924
> 
> 赞同：0
> 
> 时间：2012-12-11T09:08:16.617
> 
> 标签：javascript, jquery

我正在尝试找到一个好的`jquery`或简单的`js`插件，它具有垂直滚动条和动画跳跃通过它的孩子，就像它被滚动或拖动它的垂直滚动一样。缩短我在这个插件上花费的时间是一项成就。

我在谷歌搜索，但我发现没有自定义滚动条可以做到这一点。

将来谢谢。;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:12:43.813

你可以试试这个：免费的[jScrollPane](http://jscrollpane.kelvinluck.com/)或 flexcroll

# ios - UI 自动化如何执行滑动手势

> ID：13816926
> 
> 赞同：4
> 
> 时间：2012-12-11T09:08:21.157
> 
> 标签：ios, cocoa-touch, instruments, ui-automation, ui-testing

我想使用自动化脚本在 UITableView 单元格上执行滑动手势。我试着记录这个动作，但我得到了这个：

```
target.frontMostApp().mainWindow().tableViews()[1].cells()[2].buttons()[0].scrollToVisible(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:14:09.740

这些是我正在寻找的命令：`dragInsideWithOptions()`或`dragFromToForDuration;`

像这样使用它`target.frontMostApp().mainWindow().tableViews()[1].cells()[2].dragInsideWithOptions({startOffset:{x:0.0, y:0.1}, endOffset:{x:0.5, y:0.1}, duration:0.25});`

# c# - 在 MVCSiteMapProvider 中使用自定义路由数据构建自定义 URL

> ID：13816928
> 
> 赞同：1
> 
> 时间：2012-12-11T09:08:33.203
> 
> 标签：c#, asp.net-mvc, mvcsitemapprovider

我们正在为我们的网站使用 MVCSiteMapProvider。

这是场景......想象一下员工的页面，`/employee/123`. 这将包含员工详细信息以及一组需要`123`在 url 中维护的链接。

一些链接需要指向旧版 url，所以类似`/demographics/?employeeID=123`, 就是一个例子。其中大约有 30 个链接，因此必须在站点地图中维护这些链接。

任何有关如何解决此问题的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T22:36:26.947

您可以创建一个 DynamicNodeProvider 来处理这种情况。您只需要在循环时添加“相关”节点，以便它们全部组合在一起。id 存储在 RouteValues 中并为所有用户缓存，因此站点地图不会在请求之间忘记它。

```
public class EmployeeDynamicNodeProvider
    : DynamicNodeProviderBase
{
    CRUDExample db = new CRUDExample();

    public override IEnumerable<DynamicNode> GetDynamicNodeCollection(ISiteMapNode node)
    {
        var result = new List<DynamicNode>();

        var employees = db.Employee;
        foreach (var employee in employees)
        {
            var employeeKey = "Product_" + employee.Id.ToString();

            // Create the "Details" node for the employee
            var employeeNode = new DynamicNode(employeeKey, "EmployeeParentNodeKey", employee.Name, employee.Name, "Employee", "Details");

            // Set the "id" route value so the match will work.
            employeeNode.RouteValues.Add("id", employee.Id);

            // Add the node to the result
            result.Add(employeeNode);

            // Create the "Edit" node for the employee
            var employeeEditNode = new DynamicNode("EmployeeEdit_" + employee.Id.ToString(), employeeKey, "Edit", "Edit", "Employee", "Edit");

            // Set the "id" route value of the edit node
            employeeEditNode.RouteValues.Add("id", employee.Id);

            // Add the node to the result
            result.Add(employeeEditNode);

            // Create the "Delete" node for the employee
            var employeeDeleteNode = new DynamicNode("EmployeeDelete_" + employee.Id.ToString(), employeeKey, "Delete", "Delete", "Employee", "Delete");

            // Set the "id" route value of the delete node
            employeeDeleteNode.RouteValues.Add("id", employee.Id);

            // Add the node to the result
            result.Add(employeeDeleteNode);

            // Create the "Demographics" node for the employee
            var employeeDemographicsNode = new DynamicNode("EmployeeDemographics_" + employee.Id.ToString(), employeeKey, "Demographics", "Demographics", "Employee", "Demographics");

            // Set the "id" route value of the delete node
            employeeDemographicsNode.RouteValues.Add("id", employee.Id);

            // Add the node to the result
            result.Add(employeeDemographicsNode);
        }

        return result;
    }
} 
```

至于 URL，是 System.Web.Routing 将路由值转换为 URL。但是，如果您的 URL 很复杂，您还有其他几个选择：

1.  使用站点地图节点的 Url 属性而不是路由值。
2.  创建自定义 URL 解析器来处理 URL 的特殊情况。

# git - 在推送之前如何知道提交/更改列表

> ID：13816929
> 
> 赞同：4
> 
> 时间：2012-12-11T09:08:38.863
> 
> 标签：git

git status 显示我有 2 个提交

```
# On branch production
# Your branch is ahead of 'origin/production' by 2 commits.
# 
```

但 git diff 什么也没显示

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T09:11:55.860

`git diff`默认情况下，不会向您显示以前提交的任何内容。你应该使用`git log`它。要显示最后两次提交，请使用`git log -2`.

要使用 diff 相互比较提交，语法是`git diff commit1 commit2`. 例如，要向您显示两次提交之前和现在之间发生的所有更改，请键入`git diff HEAD^2 HEAD`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T09:26:39.210

更一般地说，显示 HEAD 中存在的提交，但不显示原产地/生产：

```
git log origin/production.. 
```

使用文件名信息（来自[How to have git log show filenames like svn log -v](https://stackoverflow.com/questions/1230084/how-to-have-git-log-show-filenames-like-svn-log-v)）：

```
git log --stat origin/production..
git log --name-status origin/production..
git log --name-only origin/production.. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:12:11.273

我总是使用以下内容来查看我的提交树：

```
$ gitk 
```

没有参数`git diff`只显示您的实际更改和实际提交之间的差异，这意味着您自上次`git checkout`或`git commit`.

# javascript - OO Javascript .prototype

> ID：13816930
> 
> 赞同：0
> 
> 时间：2012-12-11T09:08:47.557
> 
> 标签：javascript

```
function Engineer (name, projs, mach) {
    this.base = WorkerBee;
    this.base(name, "engineering", projs);
    this.machine = mach || "";
}
Engineer.prototype = new WorkerBee;

var jane = new Engineer("Doe, Jane", ["navigator", "javascript"], "belau"); 
```

这来自 Mozilla 示例页面。为什么新的新 WorkerBee 没有括号？如果 WorkerBee 构造函数有参数，我们是否需要在这一行中将它们传递给？

```
Engineer.prototype = new WorkerBee(BaseClassConstructorArgument1,2...) 
```

我遇到了这个问题：JS 提示：缺少 '()' 调用构造函数。

所以我现在想知道，干净的解决方案会是什么样子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:14:57.263

使用关键字调用构造函数时，括号是可选的`new`，尽管一些 linter 会警告您。但是完全可以使用`new WorkerBee`而不是`new WorkerBee()`

如果要传递参数，自然需要括号。这就是为什么有些人认为最好*总是*使用转义来保持一致性（通常是编写 lint 规则的同一个人）。

但是选择完全取决于您作为程序员。

# ios - 运行时错误、错误和问题 iphone App

> ID：13816938
> 
> 赞同：0
> 
> 时间：2012-12-11T09:09:12.033
> 
> 标签：ios, xcode, frameworks, revmob

我正在尝试在我的 iphone 应用程序中添加一个 AdManager 文件，以便它具有不同类型的广告。（revmob、adwhirl、chartboost 等）。同时我也想要 In App-Purchase 功能。我的工作是正确的，但是有一些我不明白的问题和错误是什么，我什至添加了所有必需的框架。

```
Undefined symbols for architecture i386:
"_OBJC_METACLASS_$_CDataScanner", referenced from:
 _OBJC_METACLASS_$_CJSONScanner in CJSONScanner.o

"_SKStoreProductParameterITunesItemIdentifier", referenced from:
  -[RevMobStoreController openStoreWithITunesItemId:] in RevMobAds(RevMobStoreController.o)

"_OBJC_CLASS_$_SKStoreProductViewController", referenced from:
  objc-class-ref in RevMobAds(RevMobStoreController.o)

"_OBJC_IVAR_$_CDataScanner.current", referenced from:
  -[CJSONScanner scanNotQuoteCharactersIntoString:] in CJSONScanner.o

"_OBJC_CLASS_$_CDataScanner", referenced from:
  l_OBJC_$_CATEGORY_CDataScanner_$_CDataScanner_Extensions in CDataScanner_Extensions.o

  _OBJC_CLASS_$_CJSONScanner in CJSONScanner.o
"_OBJC_IVAR_$_CDataScanner.end", referenced from:
  -[CJSONScanner scanNotQuoteCharactersIntoString:] in CJSONScanner.o 
```

ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:58:06.937

您是否添加了 StoreKit 框架？这肯定会解决前几个链接器错误。

# jquery - 使用 jQuery 替换 td 内的文本，其中 td 包含其他元素

> ID：13816944
> 
> 赞同：54
> 
> 时间：2012-12-11T09:09:34.657
> 
> 标签：jquery, html

我的表如下：

```
<table id='demoTable'>
   <tr>
       <td>8: Tap on APN and Enter <B>www</B>.
           <INPUT id=h150000000000000109743 class=hid value="test value" type=hidden>
           <INPUT id=h250000000000000109743 class=hid1 value="26,222,98,10,50000000000000109744,T,~25,221,99,10,,T,www" type="hidden">
       </td>
   </tr>
</table> 
```

我只想更改文本`8: Tap on APN and Enter <B>www</B>.`
而不影响隐藏字段

我正在尝试 jQuery 但没有找到解决方案

```
function changeText() {
    $("#demoTable td").each(function () {
        for (var i = 0; i < $(this).children.length; i++) {
            alert($(this).children(i).val());
        }
        // alert($(this).html());
        // $(this).text("hello");
        // alert($(this).html());
    });
} 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-11T09:46:36.200

在 jquery 中使用文本节点是一项特别精细的工作，并且大多数操作都会完全跳过它们。

与其费力避免错误的节点，不如直接将需要替换的内容包装在 a`<span>`中，例如：

```
<td><span class="replaceme">8: Tap on APN and Enter <B>www</B>.</span></td> 
```

然后：

```
$('.replaceme').html('Whatever <b>HTML</b> you want here.'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T09:17:23.937

删除文本节点，并用`<b>`您需要的任何内容替换标签，而无需触摸输入：

```
$('#demoTable').find('tr > td').contents().filter(function() {
    return this.nodeType===3;
}).remove().end().end()
  .find('b').replaceWith($('<span />', {text: 'Hello Kitty'})); 
```

[**小提琴**](http://jsfiddle.net/rnnS8/1/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T09:22:02.887

```
$('#demoTable td').contents().each(function() {
    if (this.nodeType === 3) {
        this.textContent
        ? this.textContent = 'The text has been '
        : this.innerText  = 'The text has been '
    } else {
        this.innerHTML = 'changed';
        return false;
    }
}) 
```

[http://jsfiddle.net/YSAjU/](http://jsfiddle.net/YSAjU/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T09:12:58.280

怎么样：

```
function changeText() {
    $("#demoTable td").each(function () {
       $(this).html().replace("8: Tap on APN and Enter <B>www</B>", "");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-03T15:43:11.043

聚会有点晚了，但是[JQuery 更改内部文本但保留 html](https://stackoverflow.com/questions/5232862/jquery-change-inner-text-but-preserve-html)至少有[一种方法没有在这里提到](https://stackoverflow.com/a/5233025/1587329)：

```
var $td = $("#demoTable td");
$td.html($td.html().replace('Tap on APN and Enter', 'new text')); 
```

如果不修复文本，您可以使用 (snother)[ [https://stackoverflow.com/a/37828788/1587329]](https://stackoverflow.com/a/37828788/1587329])：

> ```
> var $a = $('#demoTable td');
> var inner = '';
> $a.children.html().each(function() {
>     inner = inner + this.outerHTML;
> });
> $a.html('New text' + inner); 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T09:17:00.537

将要删除的内容包装在 ptag 中，然后您可以执行以下操作：

```
$(function(){
  $("td").click(function(){ console.log($("td").find("p"));
    $("td").find("p").remove();    });
}); 
```

小提琴演示：http: [//jsfiddle.net/y3p2F/](http://jsfiddle.net/y3p2F/)

# javascript - 如何在浏览器中调用原生安卓应用

> ID：13816951
> 
> 赞同：1
> 
> 时间：2012-12-11T09:09:45.397
> 
> 标签：javascript, android, html, cordova

我在 android 中有一个磁卡读卡器代码，我想通过浏览器（通过 javascript）或使用 HTML5 `getUserMedia()`API 从卡上刷卡并通过 JavaScript 获取卡信息。有什么办法可以做到这一点？请分享示例代码，如果您有...

编辑：我提到了这个链接： [Jquery Mobile Web: Is Calling Native Apps possible？](https://stackoverflow.com/questions/10791961/jquery-mobile-web-is-calling-native-apps-possible)

我不知道如何在我的脚本中使用它：**myapp://myparam**

我在清单文件中添加了这段代码，

```
<intent-filter>
                <action android:name="android.intent.action.VIEW" >
                </action>

                <category android:name="android.intent.category.DEFAULT" >
                </category>
                <category android:name="android.intent.category.BROWSABLE" >
                </category>

                <data
                    android:host="http://market.android.com/"
                    android:scheme="http" >
                </data>

            </intent-filter> 
```

如何在浏览器中启动此应用程序（即链接）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:12:02.973

> 我想通过浏览器访问这个应用程序（通过 javascript）或使用 HTML5 getUserMedia() API 从卡上刷卡并通过 JavaScript 获取卡信息。有什么办法可以做到这一点？

不在应用程序级别。您可以通过超链接启动读卡器应用程序，但无法在 JavaScript 中返回结果。正如其他人在评论中指出的那样，您将需要实现一个包含您的阅读器代码的 PhoneGap 扩展。

# jquery - jQuery动画 - 图像淡出后淡入？

> ID：13816953
> 
> 赞同：1
> 
> 时间：2012-12-11T09:09:48.540
> 
> 标签：jquery, jquery-animate

我有一个简单的云图像，我希望从浏览器的左侧到右侧，它应该在淡出时消失在屏幕右侧之外，然后淡入并重新开始动画，从左边。这是我到目前为止的代码：

```
var animate = function(targetElement, speed){

    $('#cloudsAnimated').css({left:'-200px'});
    $('#cloudsAnimated').animate(
        {
        'left': "100%",
        opacity:0
        },
        {
        duration: speed,
        easing:"linear",
        complete: function(){
            animate(this, speed);
            }
        }
    );

};
animate($('#cloudsAnimated'), 5000); 
```

此功能在图像到达屏幕右侧时淡出图像，但它完全消失并且不再出现（我已将功能的“完成”键设置为再次重新启动）。如果我保持不透明度不变，那么它会重新开始，所以它与不透明度有关。同样，我希望图像淡入并重新开始从左到右移动。

如果您知道解决方案，请告诉我！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:14:59.107

您不会重置不透明度。

尝试改变

```
$('#cloudsAnimated').css({left:'-200px'}); 
```

到

```
$('#cloudsAnimated').css({left:'-200px', opacity:1}); 
```

虽然它不会淡入淡出，但您至少应该看到它。
它也不会在您的解决方案中第一次消失，是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:17:21.127

```
$("#cloudsAnimated").css({left: '-200px').fadeIn(); 
```

您可能还想使用宽度`#cloudsAnimated`而不是硬编码 -200

您也可以`.animate`再次使用，使其淡入同一队列：

```
$("#cloudsAnimated").css({left: '-200px');
$("#cloudsAnimated").animate({'left': 0, 'opacity': 1}, 500); 
```

500 只是一个猜测......如果你想要真正的动画时间，它可能会`speed`除以 200 与窗口宽度的比率。

# bash - 使用重命名命令在第二个下划线后重命名

> ID：13816957
> 
> 赞同：1
> 
> 时间：2012-12-11T09:10:09.637
> 
> 标签：bash, renaming

我有一个名为“ABI-Data”的目录，其中包含如下文件

```
10_2012-08-22_B02_014.fsa
1_2012-08-22_A01_015.fsa
11_2012-08-22_C02_012.fsa
12_2012-08-22_D02_010.fsa
14_2012-08-22_F02_006.fsa 
```

我需要像这样的输出

```
abi_B02_014.fsa
abi_A01_015.fsa
abi_C02_012.fsa
abi_D02_010.fsa
abi_F02_006.fsa 
```

简而言之，我想用字符“abi”或任何东西将所有文件重命名为分数下的第二个。

我尝试在工作目录中使用重命名命令`ABI-Data`为

```
rename -v -n /*_*_/abi/ *.fsa 
```

但发现错误如

```
Quantifier follows nothing in regex; marked by <-- HERE in m/* <-- HERE _*_/ at (eval 1) line 1. 
```

请建议我在哪里做错了，或者建议我命令/脚本/代码将所有字符截断到第二个下划线并`abi`在每个文件名中添加后缀。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:14:25.670

我通常使用这个：**ReNamer** - [http://www.den4b.com/?x=screenshots&product=renamer](http://www.den4b.com/?x=screenshots&product=renamer)

![重命名函数列表](../Images/93b1cb21c3ef48c12fabe89079b81ef6.png)

通常它可以完成工作，那里有复杂的正则表达式解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:24:03.873

You can do a for loop with `cut` for getting the part you want :

```
for i in `ls ABI-Data/`; do j=`echo $i|cut -d "_" -f 3-` ; mv ABI-Data/$i ABI-Data/abi_$j ; done 
```

Or with `rename` :

```
rename -v  s/[^_]*_[^_]*_/abi_/ *.fsa 
```

# git - Git：使用 EGit 重命名文件会导致文件历史记录的删除

> ID：13816960
> 
> 赞同：7
> 
> 时间：2012-12-11T09:10:14.390
> 
> 标签：git, refactoring, egit

我使用 Eclipse [EGit](http://www.eclipse.org/egit/)插件来处理 git 存储库。（我什至在本地项目中使用它来跟踪工具所做的更改。）

但是我发现了使团队项目的使用不太好的问题：
重命名文件夹或文件时，我需要提交 2 项：1 项添加为新项，1 项删除。这样就没有历史谁和何时编辑这个文件，没有办法回顾进化。

这个问题很可能不是由 EGit 引起的，而是由 git 引起的。[请参阅在 Git 和 Mercurial](https://stackoverflow.com/questions/5957735/renaming-in-git-and-mercurial-accuracy-and-automaticity)中重命名的答案：准确性和自动化

在进行大量重构和重命名时如何保留文件历史记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:35:45.027

请参阅[Git 常见问题解答部分，为什么 git 不“跟踪”重命名？](https://git.wiki.kernel.org/index.php/GitFaq#Why_does_Git_not_.22track.22_renames.3F),

然而，这并没有回答在 Eclipse 中使用 EGit 时如何保留历史记录。我需要尝试

ps EGit 的链接。// 感谢 jszakmeister

[http://wiki.eclipse.org/EGit/User_Guide#Configuring_the_View](http://wiki.eclipse.org/EGit/User_Guide#Configuring_the_View)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-18T19:19:56.833

请注意，在[EGit 3.0](http://wiki.eclipse.org/EGit/New_and_Noteworthy/3.0)中，重命名检测已添加到历史视图和提交编辑器中的文件差异查看器中（[错误 335082](https://bugs.eclipse.org/bugs/show_bug.cgi?id=335082)）：

![使用 EGit 3.0 重命名检测](../Images/b765ecca959d78d49294419f5076a86b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:38:35.423

请参阅 git 帮助日志，尤其是 --follow 选项。

虽然不知道如何在 Egit 中执行此操作，但如果 Egit 没有做您想要的，为什么不使用其他工具来补充基本功能呢？

# java - 应用程序启动时加载程序 dalvik.system.PathClassLoader 中的 java.lang.ClassNotFoundException

> ID：13816961
> 
> 赞同：5
> 
> 时间：2012-12-11T09:10:20.163
> 
> 标签：java, android, android-manifest, classnotfoundexception, dalvik

我有一个由另一家公司制作的应用程序，可以对其进行一些更新，但我无法启动它。我已经在这个问题上苦苦挣扎了将近 10 个小时，并且经历了很多线程，为这个错误提出了不同的解决方案，但没有运气。

我试图以不同的方式清理、重建和更改我的清单文件，但没有成功。但我仍然认为问题可能出在清单文件中，但不确定。

```
12-11 09:47:47.687: E/AndroidRuntime(9756): FATAL EXCEPTION: main    
12-11 09:47:47.687: E/AndroidRuntime(9756): java.lang.RuntimeException: Unable to instantiate application com.visma.falck.android.assistance.FalckAssistanceApplication: java.lang.ClassNotFoundException: com.visma.falck.android.assistance.FalckAssistanceApplication in loader dalvik.system.PathClassLoader[/data/app/com.visma.falck.android.assistance-1.apk]    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.app.LoadedApk.makeApplication(LoadedApk.java:490)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3901)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.app.ActivityThread.access$2200(ActivityThread.java:135)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1098)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.os.Handler.dispatchMessage(Handler.java:99)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.os.Looper.loop(Looper.java:150)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.app.ActivityThread.main(ActivityThread.java:4385)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at java.lang.reflect.Method.invokeNative(Native Method)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at java.lang.reflect.Method.invoke(Method.java:507)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at dalvik.system.NativeStart.main(Native Method)    
12-11 09:47:47.687: E/AndroidRuntime(9756): Caused by: java.lang.ClassNotFoundException: com.visma.falck.android.assistance.FalckAssistanceApplication in loader dalvik.system.PathClassLoader[/data/app/com.visma.falck.android.assistance-1.apk]    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.app.Instrumentation.newApplication(Instrumentation.java:951)    
12-11 09:47:47.687: E/AndroidRuntime(9756):     at android.app.LoadedApk.makeApplication(LoadedApk.java:481) 
```

**编辑：** 根据 ρяσѕρєя KI 更新清单后，以相同的样式出现不同的错误：

```
12-11 10:23:08.917: E/AndroidRuntime(9949): FATAL EXCEPTION: main    
12-11 10:23:08.917: E/AndroidRuntime(9949): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.visma.falck.android.assistance/com.visma.falck.android.assistance.SplashScreen}: java.lang.ClassNotFoundException: com.visma.falck.android.assistance.SplashScreen in loader dalvik.system.PathClassLoader[/data/app/com.visma.falck.android.assistance-1.apk]    
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.app.ActivityThread.access$1500(ActivityThread.java:135)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.os.Looper.loop(Looper.java:150)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.app.ActivityThread.main(ActivityThread.java:4385)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at java.lang.reflect.Method.invokeNative(Native Method)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at java.lang.reflect.Method.invoke(Method.java:507)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at dalvik.system.NativeStart.main(Native Method)
12-11 10:23:08.917: E/AndroidRuntime(9949): Caused by: java.lang.ClassNotFoundException: com.visma.falck.android.assistance.SplashScreen in loader dalvik.system.PathClassLoader[/data/app/com.visma.falck.android.assistance-1.apk]
12-11 10:23:08.917: E/AndroidRuntime(9949):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
12-11 10:23:08.917: E/AndroidRuntime(9949):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1777) 
```

新清单：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.visma.falck.android.assistance" android:versionCode="5" android:versionName="1.4">

        <uses-sdk android:minSdkVersion="8" />

        <!-- To access connectivity information -->
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <!-- To access the phone number -->
        <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <!--   To allow debugging on all models -->
    <!--   <uses-permission android:name="android.permission.SET_DEBUG_APP"></uses-permission> -->

        <!-- For all services, e.g. https, google maps -->
        <uses-permission android:name="android.permission.INTERNET" />
        <!-- For google maps -->
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <!-- For google maps -->
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
        <uses-permission android:name="android.permission.LOCATION" />
        <uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>

        <application 
           android:icon="@drawable/application_icon" 
           android:label="@string/app_name"
          android:theme="@style/theme">

<activity android:name=".FalckAssistanceApplication" 
              android:label="@string/app_name">
                android:allowBackup="true" 
                android:debuggable="false"
    </activity>

            <activity android:name="com.visma.falck.android.assistance.SplashScreen"
                android:configChanges="orientation" android:debuggable="true">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <!-- wheel menu -->
            <activity android:name="com.visma.falck.android.assistance.menu.MenuActivity" android:debuggable="true"
                      android:label="@string/app_name">
            </activity>

            <activity android:name="Contact" android:debuggable="true"/>

        <activity android:name="Info" android:debuggable="true"/>
        <activity android:name=".information.TermsOfUse" android:debuggable="true"/>
        <activity android:name=".information.Tip" android:debuggable="true"/>
        <activity android:name=".information.TryAgain" android:debuggable="true"/>
        <activity android:name="Registration" android:debuggable="true" android:windowSoftInputMode="stateUnchanged|adjustResize" android:configChanges="orientation"/>

        <activity android:name=".userprofile.UserInformation" android:debuggable="true" android:windowSoftInputMode="stateUnchanged|adjustResize" android:configChanges="orientation"/>
        <activity android:name=".userprofile.Abonement" android:debuggable="true" android:windowSoftInputMode="stateUnchanged|adjustResize" android:configChanges="orientation"/>
        <activity android:name=".userprofile.AddVehicle" android:debuggable="true" android:windowSoftInputMode="stateUnchanged|adjustResize"/>
        <activity android:name=".userprofile.AddSubscription" android:debuggable="true"/>
        <activity android:name=".userprofile.EditVehicle" android:debuggable="true"/>
        <activity android:name=".userprofile.EditVehicleLastRegistration" android:debuggable="true"/>
        <activity android:name=".userprofile.EditVehicleMileage" android:debuggable="true"/>
        <activity android:name=".userprofile.EditVehicleRegistration" android:debuggable="true"/>
        <activity android:name=".userprofile.VehicleType" android:debuggable="true"/>

        <activity android:name=".order.WaitForCallActivity" android:debuggable="true"  android:configChanges="orientation"/>
        <activity android:name=".order.AssistanceMap" android:debuggable="true" android:configChanges="orientation"/>
        <activity android:name=".order.OngoingAssistanceMap" android:debuggable="true" android:configChanges="orientation"/>
        <activity android:name=".order.Compass" android:debuggable="true" />
        <activity android:name=".order.CompassActivity" android:debuggable="true" android:screenOrientation="portrait" android:configChanges="orientation"/>
        <activity android:name=".order.Order" android:debuggable="true">
            <intent-filter>
                <action android:name="com.visma.falck.android.assistance.return.customer"/>
            </intent-filter>
        </activity>
        <activity android:name=".order.Problem" android:debuggable="true"/>
        <activity android:name=".order.SubProblem" android:debuggable="true"/>
        <activity android:name=".order.MyVehicle" android:debuggable="true"/>
        <activity android:name=".order.Trailer" android:debuggable="true"/>
        <activity android:name=".order.WaitForCall" android:debuggable="true"/>
        <activity android:name=".order.FalckIsOnItsWay" android:debuggable="true"/>
        <activity android:name=".order.PeopleInTheCar" android:debuggable="true"/>
        <activity android:name=".order.PersonalInfo" android:debuggable="true" android:windowSoftInputMode="stateUnchanged|adjustResize"/>
        <activity android:name=".order.EnterMobileNumber" android:debuggable="true"/>
        <activity android:name=".order.SelectAddress" android:debuggable="true"/>
        <receiver android:name=".order.WaitForCall$PhoneCallEndReceiver">
          <intent-filter>
              <action android:name="com.visma.falck.android.assistance.waitforcall.endcall" />
          </intent-filter>
        </receiver>
        <service android:name=".order.PhoneCallHandlingService">
          <intent-filter>
              <action android:name="com.visma.falck.android.assistance.waitforcall.endcall"/>
          </intent-filter>
        </service>

        <!-- My Info: Subscriber -->
        <activity android:name="MyInfoSubscriber" android:debuggable="true"/>
        <!-- My Info: Welcome -->
        <activity android:name="MyInfoWelcome" android:debuggable="true"/>
        <!-- My Info: Registration -->
        <activity android:name="MyInfoRegistration" android:debuggable="true"/>

        <activity android:name="FrontPage" android:debuggable="true"/>

        <activity android:name="com.visma.falck.android.assistance.Main" android:debuggable="true"
            android:label="@string/app_name">
        </activity>

        <activity android:name="com.visma.falck.android.assistance.activity.station.StationList" android:debuggable="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.PICK" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.dir/vnd.falck.assistance.station" />
            </intent-filter>
        </activity>

        <activity android:name="com.visma.falck.android.assistance.activity.station.StationListActivity" android:label="Find falck-station" android:debuggable="true">

        </activity>

        <activity android:name="com.visma.falck.android.assistance.activity.station.StationDetail" android:debuggable="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.item/vnd.falck.assistance.station" />
            </intent-filter>
        </activity>

        <activity android:name=".activity.station.StationMap" android:debuggable="true" android:configChanges="orientation"/>

        <activity android:name="StationActivity" android:debuggable="true"></activity>

        <activity android:name="com.visma.falck.android.assistance.activity.garage.GarageList" android:debuggable="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.PICK" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.dir/vnd.falck.assistance.garage" />
            </intent-filter>
        </activity>

        <activity android:name="com.visma.falck.android.assistance.activity.garage.GarageListActivity" android:debuggable="true"/>

        <activity android:name="com.visma.falck.android.assistance.activity.garage.GarageDetail" android:debuggable="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.item/vnd.falck.assistance.garage" />
            </intent-filter>
        </activity>

        <activity android:name=".activity.garage.GarageMap" android:debuggable="true" android:configChanges="orientation"/>

        <!-- Rental car: list -->
        <activity android:name="com.visma.falck.android.assistance.activity.rentalcar.RentalCarList" android:debuggable="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.PICK" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.dir/vnd.falck.assistance.rentalcar" />
            </intent-filter>
        </activity>

         <activity android:name="com.visma.falck.android.assistance.activity.rentalcar.RentalCarStationListActivity" android:debuggable="true"/>

         <activity android:name="com.visma.falck.android.assistance.activity.rentalcar.RentalCarListActivity" android:debuggable="true"/>

        <!-- Rental car: details -->
        <activity android:name="com.visma.falck.android.assistance.activity.rentalcar.RentalCarDetail" android:debuggable="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="vnd.android.cursor.item/vnd.falck.assistance.rentalcar" />
            </intent-filter>
        </activity>

        <activity android:name=".activity.rentalcar.RentalCarMap" android:debuggable="true" android:configChanges="orientation"/>

        <activity android:name=".activity.rentalcar.MyBenefitsCarRental" android:debuggable="true"/>
        <activity android:name=".activity.garage.MyBenefitsGarage" android:debuggable="true"/>

        <activity android:name=".Test" />

        <service android:name=".service.MainDataService" android:debuggable="true"
            android:process="com.visma.falck.android.assistance.service.MainDataService">
            <intent-filter>
                <action android:name="com.visma.falck.create.user" />
                <action android:name="com.visma.falck.update.user" />
                <action android:name="com.visma.falck.reset.user" />
                <action android:name="com.visma.falck.get.user.completion" />
                <action android:name="com.visma.falck.get.customer" />
                <action android:name="com.visma.falck.get.garage.list" />
                <action android:name="com.visma.falck.get.falck.station.list" />
                <action android:name="com.visma.falck.get.rental.car.station.list" />
                <action android:name="com.visma.falck.create.assistance" />
                <action android:name="com.visma.falck.get.ongoing.assistance" />
                <action android:name="com.visma.falck.get.text" />
            </intent-filter>
            <category android:name="android.intent.category.DEFAULT" />
        </service>

       <!--  <uses-library android:name="com.google.android.maps" />  -->

    </application>

</manifest> 
```

如果有人可以帮助我，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:13:50.523

声明`FalckAssistanceApplication`为

```
 <activity android:name=".FalckAssistanceApplication" 
              android:label="@string/app_name">
    </activity> 
```

而不是添加 < Application 标签

```
 <application 
       android:icon="@drawable/application_icon" 
       android:label="@string/app_name"
       android:theme="@style/theme" 
       android:name=".FalckAssistanceApplication"  <<--remove 
                                 <<-- FalckAssistanceApplication from here
       android:allowBackup="true"  
       android:debuggable="false">
  ///..... 
```

# winapi - 从管道读取时 Win32 ReadFile 挂起

> ID：13816962
> 
> 赞同：8
> 
> 时间：2012-12-11T09:10:21.010
> 
> 标签：winapi, freeze, readfile

我正在创建一个子进程，并读取它的输出。当子进程创建输出 () 时，我的代码工作正常`cmd /c echo Hello World`，但是如果进程不创建输出 ()，ReadFile 将挂起`cmd /c echo Hello World > output.txt`。我只在进程终止后阅读。

我做错了什么可怕的事情吗？无论如何用同步模式来做到这一点，还是我必须使用异步模式？所有这些都发生在一个单独的线程中，所以我认为异步模式不会给我带来任何好处，除非它是让它工作的唯一方法。非常感谢！

```
saAttr.nLength = sizeof(SECURITY_ATTRIBUTES); 
saAttr.bInheritHandle = TRUE; 
saAttr.lpSecurityDescriptor = NULL; 

CreatePipe(&g_hChildStd_OUT_Rd, &g_hChildStd_OUT_Wr, &saAttr, 0);
SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0);

memset(&piProcInfo, 0, sizeof(PROCESS_INFORMATION));
memset(&siStartInfo, 0, sizeof(STARTUPINFO));
siStartInfo.cb = sizeof(STARTUPINFO); 
siStartInfo.hStdError = g_hChildStd_OUT_Wr;
siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;
siStartInfo.dwFlags |= STARTF_USESTDHANDLES;
CreateProcess(NULL, commandWideString, NULL, NULL, TRUE, 0, NULL, NULL, &siStartInfo, &piProcInfo);

while(1)
{
    GetExitCodeProcess(piProcInfo.hProcess, &processExitCode);
    if(processExitCode != STILL_ACTIVE)
        break;
    else
        Sleep(1);
}

*output = (char *)calloc(32, sizeof(char));
processOutputSize = 0;
while(1)
{
    bSuccess = ReadFile( g_hChildStd_OUT_Rd, processOutputTemp, 32, &dwRead, NULL);
    if(!bSuccess || !dwRead)
        break;
    memcpy(*output + processOutputSize, processOutputTemp, dwRead);
    processOutputSize += dwRead;
    if(dwRead == 32)
        *output = (char *)realloc(*output, processOutputSize + 32);
    else
    {
        memset(*output + processOutputSize, 0, 1);
        break;
    }
}
CloseHandle(piProcInfo.hProcess);
CloseHandle(piProcInfo.hThread);
CloseHandle(g_hChildStd_OUT_Rd);
CloseHandle(g_hChildStd_OUT_Wr); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-08-03T09:11:59.797

正如@Marcus 在评论中建议的那样，您应该在读取之前关闭输出管道的写入端。

`CloseHandle(g_hChildStd_OUT_Wr);`

对我来说，这是真正的答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-15T18:35:02.680

您将进程的输出重定向到管道，启动进程，等到它退出，然后读取输出。

问题是 Windows 只缓冲有限数量的数据。因此，您必须在进程仍在运行时读取管道，否则进程将被阻塞，因为它无法向管道写入更多数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-03T08:29:25.650

您可以在这样的循环中使用[PeekNamedPipe](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365779%28v=vs.85%29.aspx)：

```
for (;;)
{
    DWORD bytesAvail = 0;
    if (!PeekNamedPipe(stdoutPipeRead, NULL, 0, NULL, &bytesAvail, NULL)) {
        std::cout << "Failed to call PeekNamedPipe" << std::endl;
    }
    if (bytesAvail) {
        CHAR buf[BUFSIZE];
        DWORD n;
        BOOL success = ReadFile(stdoutPipeRead, buf, BUFSIZE, &n, NULL);
        if (!success || n == 0) {
            std::cout << "Failed to call ReadFile" << std::endl;
        }
        std::cout << std::string(buf, buf + n);
    }
} 
```

# asp.net - 如何：背景图像应保持静态，但其上的网页必须在 asp.net 中向下滚动

> ID：13816964
> 
> 赞同：3
> 
> 时间：2012-12-11T09:10:28.713
> 
> 标签：asp.net, html, css, web

我的网站需要这个。背景图像应保持静态，但其上的网页必须在 asp.net 中向下滚动

`<head runat="server"> <title></title>`

```
 <style type="text/css"> 
    body { background-image: url('~/saibaba.jpg'); 
    background-repeat: no-repeat;
     background-position: center center; 
    background-attachment: fixed; } 
    #form2 { font-weight: 700; }
     </style>
     </head> 
```

这是我的代码仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:11:14.440

`body { background-attachment: fixed; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:33:34.133

有关放置背景图像的替代方法，请查看 Chris Coyiers 全屏图像

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T15:28:59.827

试图将您的 CSS 代码与您的主页分开。将所有 CSS 代码放在可以在您的主页中调用的 .css 文件中。试试这个代码 -->>

```
background-image:url('path_of_file_be_sure');
background-attachment:fixed;
background-repeat:no-repeat;
background-position:center 
```

# javascript - 在javascript中访问特定div下的所有项目

> ID：13816973
> 
> 赞同：0
> 
> 时间：2012-12-11T09:11:08.027
> 
> 标签：javascript, prototype

嗨，我想访问 javascript 中某个特定 div 下的所有图像。我的代码是：

```
<div id="image-container" style="background-image:url(loading.gif)">
        <div class="fade-box" id="image-1"><a href="javascript:GoNext();"><img src="2bscene-logo.gif" alt="" width="330" height="108" border="0" /></a></div>
        <div class="fade-box" id="image-2" style="display: none;"><a href="javascript:GoNext();"><img src="streetgallery-logo.gif" alt="" width="330" height="108" border="0" /></a></div>
        <div class="fade-box" id="image-3" style="display: none;"><a href="javascript:GoNext();"><img src="g4m-logo.gif" alt="" width="330" height="108" border="0" /></a></div>
</div> 
```

虽然我的 js 代码是：

```
var image_slide = new Array('image-1', 'image-2', 'image-3'); 
```

我想动态地获取所有`DIV`s `id`，而不是预定义的数组。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:15:38.157

通过纯javascript，您可以尝试：

```
var arr = document.querySelectorAll('#image-container img');
for(var i=0;i<arr.length;i++){
    console.log(arr[i].getAttribute('src'))
} 
```

在支持 querySelectorAll 的浏览器上。（IE8 及更高版本，其他现代版本，而不是 IE7 及更低版本。） - 正如 TJ Crowder 的评论中所述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:15:55.560

使用 JavaScript，您可以使用 DOM 轻松完成此操作：

```
var container = document.getElementById("image-container");
var child;
var image_slide = [];
for (child = container.firstChild; child; child = child.nextSibling) {
    if (child.id && child.nodeName === "DIV") {
        image_slide.push(child.id);
    }
} 
```

[实例](http://jsbin.com/ugokaj/1)| [来源](http://jsbin.com/ugokaj/1/edit)

请注意，上面的代码必须在元素已经在 DOM 中*之后运行。*确保这一点的最好方法是将`script`标签放在页面中它们的下方（就在关闭`</body>`元素之前）。

# php - 如何通过从 php 传递值来显示数据？

> ID：13816980
> 
> 赞同：-4
> 
> 时间：2012-12-11T09:11:49.073
> 
> 标签：php, mysql

> 无效的 SQL 语句。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的“.A Biography of the Rev. Absalom Dawe.”附近使用正确的语法。

```
$CDTitle = $_REQUEST['CDTitle']; // make sure its only an id (SQL Incjection problems)
    $sql = "SELECT nmc_cd.CDTitle, nmc_cd.CDYear, nmc_cd.CDPrice, nmc_category.catDesc, nmc_publisher.pubName
FROM nmc_cd
NATURAL JOIN nmc_category
NATURAL JOIN nmc_publisher
WHERE nmc_cd.CDTitle = '$CDTitle'
ORDER BY nmc_cd.CDTitle
LIMIT 0 , 30"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:17:03.283

看起来里面`$CDTitle`有一个`'`，它在工作中扔了一个扳手。

至少你应该`$CDTitle`通过[**`mysql_real_escape_string()`**](http://php.net/manual/en/function.mysql-real-escape-string.php). 这将有助于抵御 SQL 注入攻击（以及防止这些更普通的错误）。

但是，强烈建议使用[**PDO**](http://php.net/manual/en/book.pdo.php)和准备好的语句，因为它们更可靠。

澄清一下，修复它的简单方法是将第一行替换为：

```
$CDTitle = mysql_real_escape_string($_GET['CDTitle']); 
```

尽管您应该真正考虑使用 PDO 和准备好的语句。一开始它们看起来有点吓人，但一旦你开始使用它们，你会发现它们在使用上并没有太大的不同，但更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:20:23.447

改写成这样

```
$CDTitle = $_REQUEST['CDTitle']; // make sure its only an id (SQL Incjection problems)
    $sql = "SELECT nmc_cd.CDTitle, nmc_cd.CDYear, nmc_cd.CDPrice, nmc_category.catDesc, nmc_publisher.pubName
FROM nmc_cd
NATURAL JOIN nmc_category
NATURAL JOIN nmc_publisher
WHERE nmc_cd.CDTitle = '".mysql_real_escape_string($CDTitle)."'
ORDER BY nmc_cd.CDTitle
LIMIT 0 , 30"; 
```

# java - 解析 OpenDocument 电子表格 (*.ods)

> ID：13816988
> 
> 赞同：8
> 
> 时间：2012-12-11T09:12:25.173
> 
> 标签：java, opendocument

我想知道是否有用于解析此类文档的友好 API 的工具/库。我想我正在寻找支持*OpenOffice*文档的*Apache POI的一些类比。*

 *有人知道这样的工具吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T09:15:03.290

将 Apache ODF 工具包与 SimpleODF 一起使用：

[http://incubator.apache.org/odftoolkit/simple/index.html](http://incubator.apache.org/odftoolkit/simple/index.html)*

# javascript - 使用 Get 提交方法 javascript 将 div 值以及来自文本字段的用户输入附加到 url

> ID：13816989
> 
> 赞同：0
> 
> 时间：2012-12-11T09:12:28.963
> 
> 标签：javascript, url, get, append

我正在尝试将 div 的值添加到 URL，然后使用 GET 提交表单，以便我可以从 URL 检索数据以显示在我的结果页面上。但我不知道该怎么做。

例如： 代码：

```
 <form action="Receipt.html" method="GET">
    <input type= "text" id="Name" name="txtName"/>
    <div id="total">30</div>
    <input type="submit" value="Purchase" class="submit"/>
     </form> 
```

当用户点击提交按钮时，我需要将“总计”的值与名称一起传递给 URL。我希望这是有道理的。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:23:48.787

With use of jquery we can do this. Try this one...

Html:

```
<form action="Receipt.html" method="GET">
<input type= "text" id="Name" name="txtName"/>
<div id="total">30</div>
<input type= "hidden" id="txttotal" name="txttotal"/>
<input type="submit" value="Purchase" class="submit"/>
 </form> 
```

Javascript: in document ready function

```
$('#txttotal').val() = $('#total').text(); 
```

In next page you can get `txttotal`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:31:14.100

您可以使用以下方法从表单中获取您的网址：

```
var url = $("form").attr("action");
// add value
url+= "?divValue=" + $("#total").html();
// then you use jquery/ajax get as you planed. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:31:24.147

如果您在 div 中的值是固定的或更改一次，因此您可以直接执行操作，例如

```
<form action="Receipt.html?total=30" method="GET"> 
```

此外，如果值随着形式的某些变化而变化，则使用 ajax 将是一个更好的选择。

# servicestack - 为什么 ResponseDTO 中的对象是空的？

> ID：13816991
> 
> 赞同：1
> 
> 时间：2012-12-11T09:12:41.460
> 
> 标签：servicestack

我是 ServiceStack 的新手，如果这是一个愚蠢的问题，我很抱歉。但即使我运行默认的 ServiceStack 示例（从[https://github.com/ServiceStack/ServiceStack.Examples/](https://github.com/ServiceStack/ServiceStack.Examples/)下载），我也会得到空的 DTO 响应。例如当我打电话时

```
/json/syncreply/Movies 
```

我得到这个回应：

```
{"ResponseStatus":{},"Movies":[{},{},{},{},{}]} 
```

如您所见，电影的数量是正确的（5 部电影），但为什么它们是空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:29:47.280

我找到了答案。我必须将 [DataMember] 属性添加到我的 ResponseDTO 内部对象。他们为什么将它放在服务堆栈示例和文档中？

# c++ - 如何禁用 printf 功能？

> ID：13816994
> 
> 赞同：4
> 
> 时间：2012-12-11T09:12:56.110
> 
> 标签：c++, printf

我有以下三个文件

`Test.cpp`

```
void helloworld()
{
    disable pf;
    pf.Disable();
    printf("No statement \n");
    }
int main()
{
    disable dis;
    helloworld();
    printf("Hello World");
    system("pause");
    return 0;
} 
```

`disable.cpp`

```
 #include "StdAfx.h"
    #include "disable.h"
    disable::disable(void)
    {#define printf(fmt, ...) (0)}
    disable::~disable(void)
   {}
   void disable::Disable()
   {
    #define printf(fmt, ...) (0)
    } 
```

`disable.h`

```
#pragma once
class disable
{
public:
    disable(void);
    ~disable(void);
    void Disable();
}; 
```

执行后，我得到的输出为`No Statement` `Hello World`. 但我想`two printf statements`通过调用`Disable function`和`disable constructor`..来禁用这些。请帮助我为什么它不起作用以及如何解决这个问题。请帮忙。

但如果我喜欢的话，一切都会好起来的

```
main()
{
#define printf(fmt, ...) (0)
printf("Hello World");
} 
```

但是，如果我从函数中调用它，为什么不呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T09:20:32.777

您可以通过以下方式禁用 printf 输出：

```
close(STDOUT_FILENO); 
```

或者你也可以使用：

```
fclose(stdout); 
```

这将禁用所有输出到标准输出

**例子：**

```
#include<stdio.h>
#include<stdlib.h>

int main(){
    printf ("This message will be displayed\n");
    fclose(stdout);
    printf ("This message will not be displayed\n");
    // to reopen the stdout, this is another question
    return 0;
} 
```

**笔记**

如果您在程序中使用套接字，那么您必须在这里小心，因为 stout 的关闭会导致输出重定向到套接字

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T09:15:02.083

宏不遵守范围规则、c++ 语法规则或任何东西。它只是一个文本替换引擎。

当您说`#define printf(fmt, ...) (0)`in 时`disable.cpp`，它仅在 disable.cpp 中定义。如果您将其写入`disable.h`，它将在包含 from 的所有文件中定义`disable.h`。

控制宏的唯一方法是使用宏（#if 和 #ifdef 及其同类）。所以你想要的可以通过以下方式实现。

```
#define DISABLE_PRINTF

#ifdef DISABLE_PRINTF
    #define printf(fmt, ...) (0)
#endif 
```

但这将是全局禁用，只能通过注释掉第一个`#define`并重新编译代码来撤消。没有办法对使用宏进行禁用的选择性/基于范围的控制。

编辑：建议不要重新定义自己，而是编写一个为此目的`printf`定义的包装器。`printf`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T09:27:05.827

在支持它的实现上，您可以将`stdout`缓冲区重定向到“禁用”控制台，并在您想再次“启用”它时恢复它。这是一个代码示例，它（至少）在带有 gcc 的 Linux 上工作。

**注意**这是一个特定于实现的解决方案，使用`dup()`and `dup2()`from `unistd.h`。标准不能保证在任何地方都可以工作。

```
#include <cstdio>
#include <unistd.h>

int main() {
    printf("Hello world.\n");
    fpos_t pos;
    fgetpos(stdout, &pos);  // save the position in the file stream
    int fd = dup(fileno(stdout));  // use the dup() function to create a copy of stdout

    freopen("dummy.txt", "w", stdout);  // redirect stdout
    printf("Hello nobody.\n");  // this is not printed to the "usual" stdout

    fflush(stdout);   
    dup2(fd, fileno(stdout));  // restore the stdout
    close(fd);
    clearerr(stdout);  

    fsetpos(stdout, &pos); // move to the correct position
    printf("Hello world again.\n");  // this is printed back to the "usual" stdout
} 
```

您可以将该逻辑放入`enable()`和`disable()`函数中。让我强调一下，这是一个特定于实现的解决方案。我不知道有任何符合标准的解决方案可以在重定向标准流后恢复它们。