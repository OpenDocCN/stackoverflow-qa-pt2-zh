# StackOverflow 问答 15189000-15189999

# stocks - 布林线振荡器是如何计算的？

> ID：15189002
> 
> 赞同：0
> 
> 时间：2013-03-03T18:14:31.763
> 
> 标签：stocks, trading, algorithmic-trading

计算上频带：中频带 + (D + sqrt(((close - Middle band)^2)/n))

而且我知道如何计算下布林带和中布林带。

但是有一个难以捉摸的指标，叫做布林线振荡器，我发现它把布林线组合成一个单一的震荡指标。请说明如何计算。如果可能，使用 SQL 假设字段包含相关值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:59:45.430

1.  求 9 天移动平均线 (n1 + n2 ... + n9)/9
2.  求 9 天的标准差
3.  从当前的裁决价格中减去 9 天移动平均线
4.  取答案除以标准差
5.  答案是 BOS（布林线振荡器）

# jekyll - Jekyll 中的一篇文章如何拥有多个作者？

> ID：15189008
> 
> 赞同：12
> 
> 时间：2013-03-03T18:14:53.433
> 
> 标签：jekyll

我在一个 jekyll 帖子上有以下标题，其中一个作者是“usman”，它生成了[这篇](http://www.techtraits.com/System%20Admin/2013/02/24/The-problems-of-working-in-App-engine/)文章。我想要类似“作者：usman，someone_else”这样的同事也可以为这篇文章做出贡献。这可能吗？我将如何设置它。

```
--- 
layout: post
title: The pitfalls of building services using Google App Engine -- Part I
date: 2013-02-24 08:18:17
author: usman
categories: 
- System Admin
tags:
- GAE

--- 
```

我查看了我正在使用的主题的帖子模板，它具有以下行：

```
{% assign author = site.authors[page.author] %} 
```

这显然只支持一个作者，有没有办法让页面的两个作者？即 page.author[0] 例如？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T18:31:00.547

如果你想在你的 YAML Frontmatter 中指定多个作者，那么你将需要像使用类别和标签一样使用 YAML 的列表语法，如下所示：

```
author:
- usman
- someone_else 
```

这对于将作者信息动态注入每个帖子很有用。

至于允许多人为同一篇文章投稿，我认为这与 Jekyll 或 Frontmatter 中的规定无关。这是将 Jekyll 内容托管在共享位置（例如在 GitHub 上，就像许多人一样）的问题，您和您的协作者都可以在该文件上工作。话虽如此，请注意，如果您并行处理同一个降价文件，您可能会遇到令人讨厌的合并冲突。

**更新**

这是基于 OP 对原始问题的编辑的更新。

一个简单的黑客方法是像这样设置你的作者标签：

```
author: Usman and Someone_Else 
```

但是，这并没有给您太大的灵活性。一个更好的解决方案，它需要您修改您正在使用的模板，将执行类似以下的操作：

首先，设置您的 YAML Front Matter，以便它可以支持多个作者。

```
authors:
- Usman
- Someone_else 
```

现在，您修改模板以通过 YAML Front Matter 中指定的作者。

```
<p>
{% assign authorCount = page.authors | size %}
{% if authorCount == 0 %}
    No author
{% elsif authorCount == 1 %}
    {{ page.authors | first }}
{% else %}
    {% for author in page.authors %}
        {% if forloop.first %}
            {{ author }}
        {% elsif forloop.last %}
            and {{ author }}
        {% else %}
            , {{ author }}
        {% endif %}
    {% endfor %}
{% endif %}
</p> 
```

生成的 HTML：

如果未指定作者：

```
<p>No author</p> 
```

如果指定了一位作者：

```
<p>Usman</p> 
```

如果指定了两个作者：

```
<p>Usman and Someone_Else</p> 
```

如果指定了两个以上的作者：

```
<p>Usman, Bob, and Someone_Else</p> 
```

# java - 无法定义图像的路径

> ID：15189011
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:15:15.773
> 
> 标签：java, image, path, embedded-resource

我将图像导入到 Eclipse 中，与此类在同一个包中：

```
public class mainWindow extends JFrame {
    public mainWindow() {
    Image bg = // \mainPackage\ShittyPlane.png;
    Graphics2D g2d;
    this.setSize(500,500);
    this.setResizable(false);
    this.setTitle("GameTest");
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.setVisible(true);
    g2d.drawImage(bg, 0, 0, null);
  }
} 
```

如何定义图像路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:29:07.373

如果图像是您源的一部分并且稍后被打包到 jar 中以供分发，我建议您使用[getResourceAsStream](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)获取图像流。

```
ClassLoader cl = getClass().getClassLoader();
InputStream is = cl.getResourceAsStream("mainPackage/ShittyPlane.png");
BufferedImage image = ImageIO.read(is); 
```

如果您从 IDE 运行程序，此方法也将起作用

如果您打算使用文件选择器定位图像，请使用@Pescis 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:20:15.457

从特定文件加载图像需要做的是：

```
BufferedImage img = null;
try {
    img = ImageIO.read(new File("src/mainPackage/ShittyPlane.png")); //I'm guessing this is the path to your image..
} catch (IOException e) {
} 
```

有关更多信息，您可以阅读有关使用图像的[javadoc 。](http://docs.oracle.com/javase/tutorial/2d/images/index.html)

# ms-access - Microsoft Access 查询太多字段

> ID：15189013
> 
> 赞同：3
> 
> 时间：2013-03-03T18:15:29.550
> 
> 标签：ms-access, join, ms-access-2007, ms-access-2010, union

我正在处理大约十几个 MS 访问表，这些表都链接到一个数据库文件中。

有时我希望能够得到这些表的并集以生成完整的数据集。到目前为止，我这样做的尝试导致了太多字段定义错误。

有没有办法让我使用 Microsoft 访问（我可以使用 2007 或 2010 版本）？如果没有，任何其他关于如何实现这一点的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:10:26.640

根据 Access 帮助中“Access 2010 规范”主题的“查询”部分，每个记录集（查询）限制为 255 个字段（列）。如果您要生成的“完整数据集”将有超过 255 列，那么您将无法在单个 Access 查询中执行此操作。

一种可能是创建多个查询，每个查询不超过 255 列，将它们导出到 Excel，然后将它们并排粘贴到一个非常宽的 Excel 文档中。Excel_2010 工作表最多可以有 16,384 列。手动操作可能有点乏味，但至少部分自动化该过程会有一些机会。您还必须小心，每个“部分查询”以相同的顺序返回相同数量的行，因此当您将它们粘贴在一起时，事情会“排列”。

# sql - 返回单个字段时，为什么我的 Sql 查询运行缓慢？

> ID：15189014
> 
> 赞同：2
> 
> 时间：2013-03-03T18:15:34.870
> 
> 标签：sql, vb.net, oracle

我试图理解为什么第一个查询会比第二个查询快：

```
SELECT * FROM DBADMIN.CR_TICKET WHERE QUEUE_ID=005555 AND STATUS=4 
```

和

```
SELECT TICKET_ID FROM DBADMIN.CR_TICKET WHERE QUEUE_ID=005555 AND STATUS=4 
```

第一个运行大约需要一分钟并返回所有字段。第二个我只是在几分钟后停下来，因为它花了太长时间。TICKET_ID 是有效的列名。我是数据库和 sql 的新手，并且使用 vb.net 并参考了 oracle 即时客户端 11。

```
Using connection As New OracleConnection()
        Dim command As OracleCommand = connection.CreateCommand()
        Dim reader As OracleDataReader = command.ExecuteReader()
        Dim str As String
        Dim strFieldName As String
        Dim strFieldType As String
        Dim sql As String = "SELECT * FROM DBADMIN.CR_TICKET WHERE QUEUE_ID=005555 AND STATUS=4"

        connection.ConnectionString = connectionString
        connection.Open()

        command.CommandText = sql

        While reader.Read()
            str = ""
            strFieldName = ""
            strFieldType = ""

            For e = 0 To reader.FieldCount - 1
                strFieldName = reader.GetName(e)
                strFieldType = reader.GetDataTypeName(e)
                str = str & strFieldName & " " & strFieldType & ": " & reader(e).ToString & vbCrLf

            Next

            Console.Write(str & vbCrLf & vbCrLf)
        End while 
```

**2013 年 3 月 4 日更新：**

首先感谢您的出色建议，我最终能够让 sql plus 运行并返回以下执行计划。我昨天做了很多阅读，发现我的查询速度很慢的原因之一是我正在搜索的列没有被索引。我发现主键列（存在于每个表中）默认情况下是索引的。我将我的 sql 字符串更改为：

```
SQL> SELECT * FROM DBADMIN.CR_TICKET WHERE TICKET_ID > 'CR00000000' AND STATUS=4 AND (QUEUE_ID=005555 OR QUEUE_ID=005556) ORDER BY PRIORITY, TROUBLE_START;

| Id  | Operation                    | Name        | Rows  | Bytes | Cost (%CPU)

| Time     |

--------------------------------------------------------------------------------

------------

|   0 | SELECT STATEMENT             |             |     1 |   401 |     6  (17)

| 00:00:01 |

|   1 |  SORT ORDER BY               |             |     1 |   401 |     6  (17)

| 00:00:01 |

|*  2 |   TABLE ACCESS BY INDEX ROWID| CR_TICKET   |     1 |   401 |     5   (0)

| 00:00:01 |

|*  3 |    INDEX RANGE SCAN          | CRT_TID_IDX |     1 |       |     4   (0)

 | 00:00:01 |

-------------------------------------------------------------------------------- 
```

这运行得相当快。我了解到我的原始查询正在读取数据库中的每条记录以匹配我的陈述。通过稍微不同地构造查询以包含索引列，它基本上只搜索主数据库的一部分。

```
SQL> SELECT * FROM DBADMIN.CR_TICKET WHERE QUEUE_ID=005555 AND STATUS=4 AND PRIORITY=1;

| Id  | Operation                   | Name         | Rows  | Bytes | Cost (%CPU)

| Time     |

--------------------------------------------------------------------------------

------------

|   0 | SELECT STATEMENT            |              |     1 |   401 | 14864   (1)

| 00:02:59 |

|*  1 |  TABLE ACCESS BY INDEX ROWID| CR_TICKET    |     1 |   401 | 14864   (1)

| 00:02:59 |

|*  2 |   INDEX RANGE SCAN          | CRT_STAT_IDX |   230K|       |   408   (2)

| 00:00:05 |

SQL> SELECT DBADMIN.CR_TICKET.TICKET_ID FROM DBADMIN.CR_TICKET WHERE    QUEUE_ID=005555     AND STATUS=4 AND PRIORITY=1;

| Id  | Operation                   | Name         | Rows  | Bytes | Cost (%CPU)

| Time     |

--------------------------------------------------------------------------------

------------

|   0 | SELECT STATEMENT            |              |     1 |    24 | 14845   (1)

| 00:02:59 |

|*  1 |  TABLE ACCESS BY INDEX ROWID| CR_TICKET    |     1 |    24 | 14845   (1)

| 00:02:59 |

|*  2 |   INDEX RANGE SCAN          | CRT_STAT_IDX |   230K|       |   408   (2)

| 00:00:05 |

-------------------------------------------------------------------------------- 
```

**2013 年 5 月 25 日更新**

感谢您提供帮助，我很感激。我终于有机会重新审视这个项目并尝试了您建议的查询。第一个运行良好，第二个没有返回任何结果。您提到了索引功能。这会在数据库上创建一个永久索引吗？我不想那样做。

```
select status, priority, count(*)
from dbadmin.cr_ticket
group by status, priority; 
```

![数据库查询1](../Images/ab93fcdc05ff52088b91ee735c744eec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:38:10.093

我们需要对这两个查询制定解释计划，以便为您提供真正的答案。

要获得解释计划，您可以通过 SQL*Plus 连接到数据库并键入以下内容：

```
set lines 155
set page 999
explain plan for
SELECT * 
  FROM DBADMIN.CR_TICKET 
 WHERE QUEUE_ID=005555 
   AND STATUS=4;

@?/rdbms/admin/utlxpls 
```

执行上述操作并不危险，您没有修改任何内容。你甚至没有运行实际的查询。如果您有 SQL Developer 或 Toad 之类的图形工具，您只需选择代码，您应该能够在菜单中找到“显示解释计划”。在 Toad 中，您可以按 ctrl+e。

现在我怀疑表或索引上的统计信息已经过时了。您可能有一个包含“TICKED_ID”的索引，在 Oracle 看来它看起来“不错”，但实际上并非如此。更改为“SELECT *”很可能意味着没有“覆盖”索引可供使用，Oracle 可能会选择另一个更合适的索引。

同样，这只是猜测工作。给我们两个查询的计划，我们会帮助你:)

**2013-03-05 编辑**

您可能不应该这样做`WHERE TICKET_ID > 'CR00000000'`，因为它采用某种格式。例如，如果您插入 TICKET_ID='A1' 的记录，它将不起作用。

在不了解更多信息的情况下，我会说 {queue_id, priority} 上的索引可能是一个不错的候选者。**但是**，如果您的数据看起来像我认为的那样，那么只有一小部分的状态 = 4，然后您应该受益于使用基于*函数的索引*。

它看起来像这样：

```
create index dbadmin.cr_ticket_fbx_stat_4
    on dbadmin.cr_ticket(case when status = 4 then 4 end); 
```

此索引与状态列上的普通索引之间的区别在于，这里只有 status = 4 的行实际上会被索引。因此，如果您的表有 1,000,000 行，并且只有 1,000 行的状态 = 4，则索引中将仅存在 1,000 个条目。它真的很小。要使用索引，您需要将查询编写为：

```
select *
  from dbadmin.cr_ticket
 where (case when status = 4 then 4 end) = 4; 
```

如果您可以提供以下查询的结果，我可以给您更多建议：

```
select status, priority, count(*)
  from dbadmin.cr_ticket
group by status, priority;

select avg(count(*)), median(count(*)), min(count(*)), max(count(*))
  from dbadmin.cr_ticket
 group by queue_id;

select count(*), count(distinct queue_id)
  from dbadmin.cr_ticket; 
```

# c - 如何在c中延迟（倒计时）？

> ID：15189015
> 
> 赞同：2
> 
> 时间：2013-03-03T18:15:40.217
> 
> 标签：c, windows, winapi

谁能告诉我如何在 c 中延迟或倒数？我的意思是在一秒钟后写下 1 和 2。我知道的唯一方法是

```
include<windows.h>

Sleep( 1000 /* milliseconds */ ); 
```

谁能告诉我另一种方法来做到这一点？**（我有 Windows 8）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:20:24.750

如果您仅限于标准 C89

```
#include <stdio.h>
#include <time.h>

int main(void) {
    time_t t;

    /* wait until the Standard clock ticks */
    t = time(0);
    while (time(0) == t) /* void */;

    /* print 1 */
    puts("1");

    /* wait until the Standard clock ticks again */
    t = time(0);
    while (time(0) == t) /* void */;

    /* print 2 */
    puts("2");

    return 0;
} 
```

如果您可以使用 POSIX：使用[nanosleep()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/nanosleep.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T18:28:21.093

您可以使用`thrd_sleep`C11 中提供的 ，并为其编写一个简单的包装器：

```
void sleep(time_t seconds){
    struct timespec ts, remaining;
    timespec_get(&ts, TIME_UTC);
    ts.tv_sec += seconds;
    while(thrd_sleep(&ts,&remaining) == -1){
        timespec_get(&ts, TIME_UTC);
        ts.tv_sec += remaining.tv_sec;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T18:27:32.777

设置`alarm()`一秒钟后触发的警报，然后调用`pause()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:36:22.280

的使用`select()`将是另一种也是可移植的解决方案，尽管非常非常规的方法来（只是）产生延迟。

# java - 如何使用 Spring/Hibernate/etc 创建通读缓存

> ID：15189016
> 
> 赞同：1
> 
> 时间：2013-03-03T18:15:54.103
> 
> 标签：java, caching, spring-mvc, memcached, ehcache

Spring Cache 抽象允许您轻松缓存方法的结果，但是对于集合 AFAIC，它只是缓存集合结果，当许多用户共享集合中的元素时，这并不总是有效的。

我正在寻找的是创建通读缓存的好方法。我正在寻找一些如何最好地做到这一点的建议。

在这种情况下，我正在检索来自不同用户的帖子（想象一下 FB 墙）。这些帖子具有每个用户共同的方面：标题、描述、海报照片等。但也有一些对用户来说是个人的东西：“你和你的 3 个朋友喜欢这个。”

我的服务层基本上有这样的方法

```
public List<Post> getPosts(User user, int start, int max){
   //get the ids 
   List<Long> ids = dao.getPostIds(user, start, max);

   //get the associated posts
   List<Post> posts = dao.getPosts(ids);

   //personalize result
   return convert(posts, user);
} 
```

Post 对象是 Hibernate 管理的 Post Entity 的派生对象。我一直觉得获取整个 Hibernate 托管实体及其所有惰性集合和有时不需要的初始化并不是大容量读取的理想选择，因此我将这些实体的值投影到一个简单的 Post bean。如果有人对此有任何想法，那也会很有趣。

PostIds 是随着新帖子的出现而经常更新的东西。帖子本身可以在用户之间共享，因为您会看到一些与您的朋友相同的帖子。转化对于最终用户来说是独一无二的。

所以，我希望缓存能够支持这一点。一个短暂的 id 缓存和一个 LFU 后缓存。这或多或少是二级 Hibernate 缓存的工作方式，但除非有人能说服我，否则就不行了。此外，我想在链的上层使用它，这样我们就可以缓存对象，而不仅仅是在每个请求上都必须与对象水合的值数组。

因此，LFU 缓存必须能够查看是否有任何 id-posts 在其缓存中，并在单独的 getPosts(ids) 中从数据库中检索丢失的任何项目，将它们放入缓存中，然后整个事情返回一个结果。

有没有一种不需要发明很多轮子的好方法？大多数（如果不是全部）文档似乎都集中在缓存方法的整个结果上，而没有描述如何实现这种更细粒度的通读方法。

任何建议表示赞赏。

亲切的问候，马克

# c++ - 在 Aho-Corasick 自动机中寻找循环

> ID：15189025
> 
> 赞同：0
> 
> 时间：2013-03-03T18:16:38.880
> 
> 标签：c++, algorithm

我正面临一个应该使用 Aho-Corasick 自动机解决的问题。我得到了一组单词（由“0”或“1”组成）——模式，我必须决定是否可以创建不包含任何给定模式的无限文本。我认为，解决方案是创建 Aho-Corasick 自动机并搜索没有匹配状态的循环，但我无法提出一个好的方法来做到这一点。我想过使用 DFS 搜索状态图，但我不确定它是否会起作用并且我有一个实现问题 - 让我们假设，我们处于一个状态，它有一个“1”边缘 - 但是状态指向那个边缘被标记为匹配 - 所以我们不能使用那个边缘，我们可以尝试失败链接（当前状态没有'0'边缘） - 但我们还必须记住，我们不能使用'1'

谁能纠正我并告诉我该怎么做？我已经用 C++ 编写了 Aho-Corasick 并且我确信它有效 - 我也了解整个算法。

这是基本代码：

```
class AhoCorasick
{

static const int ALPHABET_SIZE = 2;

struct State
{
  State* edge[ALPHABET_SIZE];
  State* fail;
  State* longestMatchingSuffix;
  //Vector used to remember which pattern matches in this state.
  vector< int > matching;
  short color;

  State()
  {
    for(int i = 0; i < ALPHABET_SIZE; ++i)
      edge[i] = 0;
    color = 0;
  }

  ~State()
  {
    for(int i = 0; i < ALPHABET_SIZE; ++i)
    {
      delete edge[i];
    }
  }
};

private:
  State root;
  vector< int > lenOfPattern;
  bool isFailComputed;

  //Helper function used to traverse state graph.
  State* move(State* curr, char letter)
  {
    while(curr != &root && curr->edge[letter] == 0)
    {
      curr = curr->fail;
    }
    if(curr->edge[letter] != 0)
      curr = curr->edge[letter];
    return curr;
  }

  //Function which computes fail links and longestMatchingSuffix. 
  void computeFailLink()
  {
    queue< State* > Q;
    root.fail = root.longestMatchingSuffix = 0;
    for(int i = 0; i < ALPHABET_SIZE; ++i)
    {
      if(root.edge[i] != 0)
      {
        Q.push(root.edge[i]);
        root.edge[i]->fail = &root;
      }
    }
    while(!Q.empty())
    {
      State* curr = Q.front();
      Q.pop();
      if(!curr->fail->matching.empty())
      {
        curr->longestMatchingSuffix = curr->fail;
      }
      else
      {
        curr->longestMatchingSuffix = curr->fail->longestMatchingSuffix;
      }
      for(int i = 0; i < ALPHABET_SIZE; ++i)
      {
        if(curr->edge[i] != 0)
        {
          Q.push(curr->edge[i]);
          State* state = curr->fail;
          state = move(state, i);
          curr->edge[i]->fail = state;
        }
      }
    }
    isFailComputed = true;
  }

public:
  AhoCorasick()
  {
    isFailComputed = false;
  }

  //Add pattern to automaton.
  //pattern - pointer to pattern, which will be added
  //fun - function which will be used to transform character to 0-based index.
  void addPattern(const char* const pattern, int (*fun) (const char *))
  {
    isFailComputed = false;
    int len = strlen(pattern);
    State* curr = &root;
    const char* pat = pattern;
    for(; *pat; ++pat)
    {
      char tmpPat = fun(pat);
      if(curr->edge[tmpPat] == 0)
      {
        curr = curr->edge[tmpPat] = new State;
      }
      else
      {
        curr = curr->edge[tmpPat];
      }
    }
    lenOfPattern.push_back(len);
    curr->matching.push_back(lenOfPattern.size() - 1);
  }
};

int alphabet01(const char * c)
{
  return *c - '0';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:56:13.820

我没有看你的代码，但我知道非常简单有效的实现。

首先，让我们将字典后缀链接添加到树中（您可以在 Wikipedia 中找到它们的描述）。然后，您必须查看所有树并以某种方式将匹配节点和具有 Dict 后缀链接的节点标记为坏节点。这些动作的解释很明显：您不需要所有匹配的节点，或者其中包含匹配后缀的节点。

现在你有一个没有任何匹配节点的 Aho-Corasick 树。如果你只是在结果树上运行 DFS 算法，你会得到你想要的。

# html - 返回时如何防止重新提交表单？

> ID：15189030
> 
> 赞同：2
> 
> 时间：2013-03-03T18:17:04.110
> 
> 标签：html, asp.net-mvc

我有一些常规输入网页，用户可以在其中输入有关项目的一些详细信息。然后在用户按下提交按钮后，她被重定向到一个网页，说一切都很好。问题是，如果她单击后退按钮，那么输入页面会再次显示，如果她点击 sumbit，则重新提交表单并将另一个项目写入数据库，这当然是不可取的。

我在 C# 中使用 ASP.NET MVC。处理这种情况的最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:29:40.033

您可以创建一个隐藏的表单元素，将表单标记为唯一。每次服务器写入表单时，都会创建一个新的随机唯一值。提交表单后，让服务器检查该标识符之前是否未使用过。

问题是如果您想允许用户按下并重新提交以创建第二个条目，则无法判断用户是否打算制作第二个副本。在这种情况下，您可以做一个链接，将用户带到相同的表单，但新生成的隐藏表单元素包含唯一标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:47:58.920

您可以使用 TempDate 和隐藏的表单值来存储唯一令牌，并在回发时比较它们。

像这样：

```
public ActionResult FormDemo()
{
    var guid = Guid.NewGuid().ToString();
    ViewData.Model = guid;
    TempData.Add("guid", guid);
    return View();
}

[HttpPost]
public ActionResult FormDemo(string name, string guid)
{
    if(guid != (string)TempData["guid"]) return new HttpStatusCodeResult(500);
    return RedirectToAction("FormDemoReceipt");
}

public ActionResult FormDemoReceipt()
{
    return Content("Form submitted OK!");
} 
```

我的 FormDemo 视图如下所示：

```
@using (Html.BeginForm())
{
    @Html.Hidden("guid", Model)
    @Html.TextBox("name");
    <input type="submit"/>
} 
```

# pagespeed - 为什么 google pagespeed 洞察力认为我的 CSS 没有缩小并且我的 js 没有延迟？

> ID：15189035
> 
> 赞同：0
> 
> 时间：2013-03-03T18:17:38.470
> 
> 标签：pagespeed

在我的网站上，我已经缩小了 css 并且页面末尾的 .js 文件设置为延迟。

然而，谷歌 pagespeed 仍然抱怨 .js 没有被延迟。我必须将脚本设置为异步和延迟吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:40:07.490

谷歌说你可以将你的 CSS 文件减少 326 字节。我通过一个缩小器运行你的 CSS 文件，将它减少[了 1282。例如，你的 CSS 文件中有注释。](http://www.cssminifier.com)尝试再次缩小它。

关于推迟 JavaScript，谷歌的笔记表明他们可能期待`<script defer async>`而不是仅仅`<script defer>`. [这个问题](https://stackoverflow.com/questions/5250412/how-exactly-does-script-defer-defer-work)解释了差异——它与多个脚本是否会按顺序加载有关。

# android - 在现有源代码中创建新按钮？

> ID：15189038
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:17:55.617
> 
> 标签：android, eclipse, button

[http://www.itechcode.com/2012/03/18/create-calculator-in-android-programming/](http://www.itechcode.com/2012/03/18/create-calculator-in-android-programming/)

我正在使用他的源代码，但它似乎与我用来创建新项目、修改布局、在 main.java 中引用等的“初级”编程非常不同。

我正在尝试使用他的源代码并修改/创建新操作，并可能添加一个活动。如果没有以不同的方式布局，我通常会知道如何做大部分事情。谢谢你！

```
 package com.pragmatouch.calculator;

    import java.text.DecimalFormat;
    import java.text.NumberFormat;
    import java.util.Iterator;
    import java.util.Stack;

    import android.app.Activity;
    import android.os.Bundle;
    import android.widget.AdapterView;
    import android.widget.Button;
    import android.widget.TextView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.GridView;
    import android.view.View;
    import android.view.View.OnClickListener;

    public class main extends Activity {
        GridView mKeypadGrid;
        TextView userInputText;
        TextView memoryStatText;

        Stack<String> mInputStack;
        Stack<String> mOperationStack;

        KeypadAdapter mKeypadAdapter;
        TextView mStackText;
        boolean resetInput = false;
        boolean hasFinalResult = false;

        String mDecimalSeperator;
        double memoryValue = Double.NaN;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            DecimalFormat currencyFormatter = (DecimalFormat) NumberFormat
                    .getInstance();
            char decimalSeperator = currencyFormatter.getDecimalFormatSymbols()
                    .getDecimalSeparator();
            mDecimalSeperator = Character.toString(decimalSeperator);

            setContentView(R.layout.main);

            // Create the stack
            mInputStack = new Stack<String>();
            mOperationStack = new Stack<String>();

            // Get reference to the keypad button GridView
            mKeypadGrid = (GridView) findViewById(R.id.grdButtons);

            // Get reference to the user input TextView
            userInputText = (TextView) findViewById(R.id.txtInput);
            userInputText.setText("0");

            memoryStatText = (TextView) findViewById(R.id.txtMemory);
            memoryStatText.setText("");

            mStackText = (TextView) findViewById(R.id.txtStack);

            // Create Keypad Adapter
            mKeypadAdapter = new KeypadAdapter(this);

            // Set adapter of the keypad grid
            mKeypadGrid.setAdapter(mKeypadAdapter);

            // Set button click listener of the keypad adapter
            mKeypadAdapter.setOnButtonClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Button btn = (Button) v;

                    // Get the KeypadButton value which is used to identify the
                    // keypad button from the Button's tag
                    KeypadButton keypadButton = (KeypadButton) btn.getTag();

                    // Process keypad button
                    ProcessKeypadInput(keypadButton);
                }
            });

            mKeypadGrid.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View v,
                        int position, long id) {

                }
            });

        }

        private void ProcessKeypadInput(KeypadButton keypadButton) {
            //Toast.makeText(this, keypadButton.getText(), Toast.LENGTH_SHORT).show();
            String text = keypadButton.getText().toString();
            String currentInput = userInputText.getText().toString();

            int currentInputLen = currentInput.length();
            String evalResult = null;
            double userInputValue = Double.NaN;

            switch (keypadButton) {
            case BACKSPACE: // Handle backspace
                // If has operand skip backspace
                if (resetInput)
                    return;

                int endIndex = currentInputLen - 1;

                // There is one character at input so reset input to 0
                if (endIndex < 1) {
                    userInputText.setText("0");
                }
                // Trim last character of the input text
                else {
                    userInputText.setText(currentInput.subSequence(0, endIndex));
                }
                break;
            case SIGN: // Handle -/+ sign
                // input has text and is different than initial value 0
                if (currentInputLen > 0 && currentInput != "0") {
                    // Already has (-) sign. Remove that sign
                    if (currentInput.charAt(0) == '-') {
                        userInputText.setText(currentInput.subSequence(1,
                                currentInputLen));
                    }
                    // Prepend (-) sign
                    else {
                        userInputText.setText("-" + currentInput.toString());
                    }
                }
                break;
            case CE: // Handle clear input
                userInputText.setText("0");
                break;
            case C: // Handle clear input and stack
                userInputText.setText("0");
                clearStacks();
                break;
            case DECIMAL_SEP: // Handle decimal seperator
                if (hasFinalResult || resetInput) {
                    userInputText.setText("0" + mDecimalSeperator);
                    hasFinalResult = false;
                    resetInput = false;
                } else if (currentInput.contains("."))
                    return;
                else
                    userInputText.append(mDecimalSeperator);
                break;
            case DIV:
            case PLUS:
            case MINUS:
            case MULTIPLY:
                if (resetInput) {
                    mInputStack.pop();
                    mOperationStack.pop();
                } else {
                    if (currentInput.charAt(0) == '-') {
                        mInputStack.add("(" + currentInput + ")");
                    } else {
                        mInputStack.add(currentInput);
                    }
                    mOperationStack.add(currentInput);
                }

                mInputStack.add(text);
                mOperationStack.add(text);

                dumpInputStack();
                evalResult = evaluateResult(false);
                if (evalResult != null)
                    userInputText.setText(evalResult);

                resetInput = true;
                break;
            case CALCULATE:
                if (mOperationStack.size() == 0)
                    break;

                mOperationStack.add(currentInput);
                evalResult = evaluateResult(true);
                if (evalResult != null) {
                    clearStacks();
                    userInputText.setText(evalResult);
                    resetInput = false;
                    hasFinalResult = true;
                }
                break;
            case M_ADD: // Add user input value to memory buffer
                userInputValue = tryParseUserInput();
                if (Double.isNaN(userInputValue))
                    return;
                if (Double.isNaN(memoryValue))
                    memoryValue = 0;
                memoryValue += userInputValue;
                displayMemoryStat();

                hasFinalResult = true;

                break;
            case M_REMOVE: // Subtract user input value to memory buffer
                userInputValue = tryParseUserInput();
                if (Double.isNaN(userInputValue))
                    return;
                if (Double.isNaN(memoryValue))
                    memoryValue = 0;
                memoryValue -= userInputValue;
                displayMemoryStat();
                hasFinalResult = true;
                break;
            case MC: // Reset memory buffer to 0
                memoryValue = Double.NaN;
                displayMemoryStat();
                break;
            case MR: // Read memoryBuffer value
                if (Double.isNaN(memoryValue))
                    return;
                userInputText.setText(doubleToString(memoryValue));
                displayMemoryStat();
                break;
            case MS: // Set memoryBuffer value to user input
                userInputValue = tryParseUserInput();
                if (Double.isNaN(userInputValue))
                    return;
                memoryValue = userInputValue;
                displayMemoryStat();
                hasFinalResult = true;
                break;
            case PRGM: 
            break;
            default:
                if (Character.isDigit(text.charAt(0))) {
                    if (currentInput.equals("0") || resetInput || hasFinalResult) {
                        userInputText.setText(text);
                        resetInput = false;
                        hasFinalResult = false;
                    } else {
                        userInputText.append(text);
                        resetInput = false;
                    }

                }
                break;

            }

        }

        private void clearStacks() {
            mInputStack.clear();
            mOperationStack.clear();
            mStackText.setText("");
        }

        private void dumpInputStack() {
            Iterator<String> it = mInputStack.iterator();
            StringBuilder sb = new StringBuilder();

            while (it.hasNext()) {
                CharSequence iValue = it.next();
                sb.append(iValue);

            }

            mStackText.setText(sb.toString());
        }

        private String evaluateResult(boolean requestedByUser) {
            if ((!requestedByUser && mOperationStack.size() != 4)
                    || (requestedByUser && mOperationStack.size() != 3))
                return null;

            String left = mOperationStack.get(0);
            String operator = mOperationStack.get(1);
            String right = mOperationStack.get(2);
            String tmp = null;
            if (!requestedByUser)
                tmp = mOperationStack.get(3);

            double leftVal = Double.parseDouble(left.toString());
            double rightVal = Double.parseDouble(right.toString());
            double result = Double.NaN;

            if (operator.equals(KeypadButton.DIV.getText())) {
                result = leftVal / rightVal;
            } else if (operator.equals(KeypadButton.MULTIPLY.getText())) {
                result = leftVal * rightVal;

            } else if (operator.equals(KeypadButton.PLUS.getText())) {
                result = leftVal + rightVal;
            } else if (operator.equals(KeypadButton.MINUS.getText())) {
                result = leftVal - rightVal;

            }

            String resultStr = doubleToString(result);
            if (resultStr == null)
                return null;

            mOperationStack.clear();
            if (!requestedByUser) {
                mOperationStack.add(resultStr);
                mOperationStack.add(tmp);
            }

            return resultStr;
        }

        private String doubleToString(double value) {
            if (Double.isNaN(value))
                return null;

            long longVal = (long) value;
            if (longVal == value)
                return Long.toString(longVal);
            else
                return Double.toString(value);

        }

        private double tryParseUserInput() {
            String inputStr = userInputText.getText().toString();
            double result = Double.NaN;
            try {
                result = Double.parseDouble(inputStr);

            } catch (NumberFormatException nfe) {
            }
            return result;

        }

        private void displayMemoryStat() {
            if (Double.isNaN(memoryValue)) {
                memoryStatText.setText("");
            } else {
                memoryStatText.setText("M = " + doubleToString(memoryValue));
            }
        }

    } 
```

枚举：

```
package com.pragmatouch.calculator;

public enum KeypadButton {
    MC("MC",KeypadButtonCategory.MEMORYBUFFER)
    , MR("MR",KeypadButtonCategory.MEMORYBUFFER)
    , MS("MS",KeypadButtonCategory.MEMORYBUFFER)
    , M_ADD("M+",KeypadButtonCategory.MEMORYBUFFER)
    , M_REMOVE("M-",KeypadButtonCategory.MEMORYBUFFER)
    , BACKSPACE("<-",KeypadButtonCategory.CLEAR)
    , CE("CE",KeypadButtonCategory.CLEAR)
    , C("C",KeypadButtonCategory.CLEAR)
    , ZERO("0",KeypadButtonCategory.NUMBER)
    , ONE("1",KeypadButtonCategory.NUMBER)
    , TWO("2",KeypadButtonCategory.NUMBER)
    , THREE("3",KeypadButtonCategory.NUMBER)
    , FOUR("4",KeypadButtonCategory.NUMBER)
    , FIVE("5",KeypadButtonCategory.NUMBER)
    , SIX("6",KeypadButtonCategory.NUMBER)
    , SEVEN("7",KeypadButtonCategory.NUMBER)
    , EIGHT("8",KeypadButtonCategory.NUMBER)
    , NINE("9",KeypadButtonCategory.NUMBER)
    , PLUS(" + ",KeypadButtonCategory.OPERATOR)
    , MINUS(" - ",KeypadButtonCategory.OPERATOR)
    , MULTIPLY(" * ",KeypadButtonCategory.OPERATOR)
    , DIV(" / ",KeypadButtonCategory.OPERATOR)
    , RECIPROC("1/x",KeypadButtonCategory.OTHER)
    , DECIMAL_SEP(",",KeypadButtonCategory.OTHER)
    , SIGN("±",KeypadButtonCategory.OTHER)
    , SQRT("SQRT",KeypadButtonCategory.OTHER)
    , PERCENT("%",KeypadButtonCategory.OTHER)
    , CALCULATE("=",KeypadButtonCategory.RESULT)
    , PRGM("PRGM",KeypadButtonCategory.PRGM)
    , DUMMY("",KeypadButtonCategory.DUMMY);

    CharSequence mText; // Display Text
    KeypadButtonCategory mCategory;

    KeypadButton(CharSequence text,KeypadButtonCategory category) {
        mText = text;
        mCategory = category;
    }

    public CharSequence getText() {
        return mText;
    }
} 
```

包 com.pragmatouch.calculator；

```
public enum KeypadButtonCategory {
    MEMORYBUFFER
    , NUMBER
    , OPERATOR
    , DUMMY
    , CLEAR
    , RESULT
    , OTHER
    , PRGM
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:29:33.983

我有一个很好的答案给你。我最近想在 android 中创建自己的按钮，但我想以一种简单的方式来做。按照这些步骤操作，几分钟后我将发布图片。

1）创建一个新的布局。以`LinearLayout`. 在其中嵌套一个`FramedLayout`和另一个`LinearLayout`。

2）然后添加一个`TextView`。这是熟能生巧的地方。玩转属性。了解他们的工作。当您了解您希望按钮如何显示的一般信息时，请转到下一步。

3）您要做的是将其作为按钮包含在另一个视图中。您也可以使用特定属性使其看起来像一个按钮。

给我几分钟，我会发布一些代码和图片。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/CBN_LinearLayout"
style="@android:style/Widget.Button"
android:layout_width="match_parent"
android:layout_height="50dp"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/CBV_texview1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginRight="10dp"
        android:layout_weight="1"
        android:gravity="right"
        android:text="@string/checkorder"
        android:textColor="@color/Black" />

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="1" >

        <ImageView
            android:id="@+id/CBV_imageView1"
            android:layout_width="23dp"
            android:layout_height="15dp"
            android:layout_gravity="center_vertical"
            android:contentDescription="@string/redcirclenotify"
            android:src="@drawable/rednotify"
            android:visibility="visible" />

        <TextView
            android:id="@+id/CBV_textview2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="8dp"
            android:gravity="left"
            android:text="@string/zero"
            android:visibility="visible" />

    </FrameLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/CBV_textview3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:fadingEdge="horizontal"
        android:gravity="center_horizontal"
        android:text="@string/blankstring" />

    <TextView
        android:id="@+id/CBV_textview4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center_horizontal"
        android:text="@string/blankstring" />
</LinearLayout> 
```

当您将其作为按钮添加到另一个视图时，您可以使用：

```
<include
        android:id="@+id/MI_checkorder"
        style="android:buttonStyle"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_gravity="bottom"
        android:layout_marginTop="5dp"
        android:layout_weight="1"
        layout="@layout/custombtnview"
        android:background="@style/AppTheme"
        android:clickable="true"
        android:focusable="true" /> 
```

其中重要的部分是将根的样式设置`LinearLayout`为`@android:style/Widget.Button`

一旦完成，它将看起来像一个按钮并且像一个按钮一样工作。

下面是最终产品的图片：

[![自定义安卓按钮](../Images/48a27687d133534c0de3785d8d5cd5ab.png)](https://i.stack.imgur.com/c0EzP.jpg)

你问题的另一部分。调整android中标准按钮的大小：

1) 几乎所有东西都可以通过您使用 XML 的方式来控制。这一切都可以在 ADK 中的右侧区域进行控制。这些属性可帮助您控制几乎所有方面。

例如在计算器中...

您连续有 4 个按钮，因此您想在水平线内添加 4 个按钮`LinearLayout`。然后，您可以为每个按钮赋予 1 的权重，然后将其设置`Width`为`FillParent`。这将自动调整要在屏幕宽度中显示的按钮的大小。

> 我最好自己计算还是修改现有代码？

我永远不会告诉别人重新创建轮子，但是，如果你对代码的理解不够好，无法从他们离开的地方开始，那么这对你来说可能是一场艰苦的斗争。如果您在理解提供给您的代码或如何修改它时遇到困难，您最好的选择是在另一个问题中实际发布代码并非常具体并询问例如我如何更改此特定按钮显示的内容以及单击它的结果将是。这个论坛取决于提出问题的人是否清晰简洁。如果不是，那么问题将在打开时尽快关闭。网站上的概括是严重不赞成的。

> 最后，我想做的是制作自己的科学计算器，但我不想花额外的时间做简单的操作。

回答这个问题的最佳方法是查看计算器是如何在 GUI 或图形布局中组装的。尝试更改按钮及其作用。例如，仅针对学习曲线将正数设为负数。

1) 查找`, PLUS(" + ",KeypadButtonCategory.OPERATOR)`并注意这是一个加号字符串。将其更改为“ T ”，看看它是否在应用程序中发生了变化。如果是，则进入代码。在代码中，您将找到`case CALCULATE:`for 的 = 符号，`ENUM`然后在其中找到`evalResult = evaluateResult(true);`。如果你遵循这个，你会达到：

```
if (operator.equals(KeypadButton.DIV.getText())) {
            result = leftVal / rightVal;
        } else if (operator.equals(KeypadButton.MULTIPLY.getText())) {
            result = leftVal * rightVal;

        } else if (operator.equals(KeypadButton.PLUS.getText())) {
            result = leftVal + rightVal;
        } else if (operator.equals(KeypadButton.MINUS.getText())) {
            result = leftVal - rightVal;

        } 
```

所以现在您可以更改`result = leftVal + rightVal;`为`result = leftVal - rightVal;`并且您刚刚更改了它。所以理解代码需要一些时间，但你必须做一些试验和错误才能理解它。我希望这有助于回答你的问题。

# iphone - 使用多个 UIViewController 或一个控制器管理 4 个表更好吗？

> ID：15189049
> 
> 赞同：0
> 
> 时间：2013-03-03T18:19:07.210
> 
> 标签：iphone, uiviewcontroller, uitableview

我有一个 splitview 控制器，我想在详细视图中管理多个表（使用这个[可可控件](https://github.com/KieranLafferty/KLHorizontalSelect)，每个部分一个表）。我应该使用 4 个特定的视图控制器还是只使用一个控制子视图的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:24:59.867

根据文档：

> 一个 UITableView 对象必须有一个充当数据源的对象和一个充当委托的对象；通常，这些对象要么是应用程序委托，要么是更常见的自定义 UITableViewController 对象。数据源必须采用 UITableViewDataSource 协议，委托必须采用 UITableViewDelegate 协议。数据源提供 UITableView 构建表所需的信息，并在插入、删除或重新排序表的行时管理数据模型。委托提供表格使用的单元格并执行其他任务，例如管理附件视图和选择。

我建议使用四个不同的 UIViewController， 与单个 UIViewController 中的所有内容相比，它们将**模块化**您的代码并且**易于管理。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:58:24.393

您可以在单个基本视图中使用表视图的数量，但您需要使用一些标签来处理它……比如标签值（任何整数值）或按名称。我认为您需要使用标签进行管理，这将如下所示：

*   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

if (tableView.tag == ) { 返回值; }

}

*   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

if (tableView.tag == ) { 返回值; }

}

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (tableView.tag == ) { <#statements#> } 静态 NSString *CellIdentifier = @"Cell"; UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // 配置单元格...

    返回单元格；}

但在这种情况下，您需要温和地处理整个情况。并且始终关心不要在 cellForRowAtIndexPath 中编写大型语句，另一个明智的做法是在加载时初始化该单元格需要很多时间。

# php - PHP对文件进行排序以匹配关键字然后提取关键字和父级

> ID：15189053
> 
> 赞同：0
> 
> 时间：2013-03-03T18:20:06.180
> 
> 标签：php, file, match, extract

我有以下 CSS 文件：

```
.garage {
    width: 100px;
    height: 200px; /*Extract*/
}
.showroom {
    color: #FFF;
    text-align: right;
    padding: 20px 30px; /*Extract*/
}
#dealer-lot {
    width: 500px; /*Extract*/
    background-color:#CCC; 
} 
```

我想找到关键字 ( `/*Extract*/`) 的每次出现并将子项和包含父项的内容提取到一个新文件中。例如：

```
.garage {
    height: 200px; /*Extract*/
} 
```

我不确定是否可以这样做。我目前正在使用`strpos()`查找关键字并在每个打开/关闭大括号中包含关键字 ( `/*Extract*/`)，但是如果您忘记在要从文件中提取的每一行添加关键字，这很乏味并且容易出错。这是我目前为达到预期结果需要做的一个例子：

```
.garage { /*Extract*/
    width: 100px;
    height: 200px; /*Extract*/
} /*Extract*/ 
```

有没有更可靠的方法可以从关键字中找到最近的开/关大括号？

# python - 如何解决程序中同一产品（手机）的两个略有不同的名称？

> ID：15189056
> 
> 赞同：2
> 
> 时间：2013-03-03T18:20:15.943
> 
> 标签：python, nlp, string-comparison, string-matching, string-parsing

我正在开发一个网络应用程序，我从多个网站收集有关手机的数据。问题是网站使用的手机命名略有不同。例如，网站对这两款手机的名称使用以下变体：

HTC One X+（黑色）；HTC One X+ 黑色；HTC One X Plus；HTC One X Plus，黑色

三星 Galaxy S3（卵石蓝，16GB）；三星 Galaxy S III（蓝色）；三星 Galaxy S3 I9300 16GB 卵石蓝；三星 I9300 Galaxy S III (16 GB)；三星 Galaxy S3 (I9300)，卵石蓝

由于我使用爬虫从这些网站上读取了这些数据，因此我需要我的程序将所有这些不同的字符串解析为同一个产品。

有任何想法吗？如果重要的话，我正在使用python。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:10:46.217

您可以为此使用不同的方法（并且对于大多数效率而言，将它们混合使用）：

1.  您可以忽略括号中的所有内容。
2.  定义您自动删除的单词，例如“黑色”、“蓝色”或“白色”。
3.  通过它们的 Levenshtein 距离比较名称，并使用此距离进行聚类。
4.  表面相似性（感谢 mbatchkarov）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:35:08.400

我相信[difflib 模块](http://docs.python.org/2/library/difflib.html#module-difflib)会对你有很大帮助

# python - KeyErrorr:'to_user_name

> ID：15189062
> 
> 赞同：-3
> 
> 时间：2013-03-03T18:20:24.650
> 
> 标签：python, twitter

有没有人遇到如下 ['KeyErrorr:'to_user_name''] ：

```
Traceback (most recent call last):
  File "finalised1.py", line 53, in <module>
    touser = tweet['to_user_name']
KeyError: 'to_user_name' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:22:36.690

`to_user_name`不是`tweet`字典中的键。

# java - 私有静态内部类是否推荐封装？

> ID：15189065
> 
> 赞同：10
> 
> 时间：2013-03-03T18:20:35.150
> 
> 标签：java

如果您在 Java 中有私有静态嵌套类，是否仍然建议使用 getter 和 setter 而不是直接字段访问？

一个例子。直接字段访问：

```
public class Application {
    private List<MyInnerClass> myInnerClassList;

    // ...

    public void foo() {
        MyInnerClass inner = new MyInnerClass();
        inner.bar = 50;
        myInnerClassList.add(inner);
    }

    private static class MyInnerClass {
        private int bar;
    }
} 
```

与封装：

```
public class Application {
    private List<MyInnerClass> myInnerClassList;

    // ...

    public void foo() {
        MyInnerClass inner = new MyInnerClass();
        inner.setBar(50);
        myInnerClassList.add(inner);
    }

    private static class MyInnerClass {
        private int bar;

        public int getBar() {
            return bar;
        }

        public void setBar(int bar) {
            this.bar = bar;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:27:38.960

取决于但一般我认为没关系。使用 getter 和 setter 的主要原因之一是对类的用户隐藏实现细节，以便您可以轻松更改实现而不影响用户。

在私有内部类的情况下，这不是问题，因为您既是该类的编写者又是该类的用户，外部没有人可以使用它。

如果您只是用来将一些数据保存在一起，那么没有 getter 和 setter 将使代码更短且更具可读性。

但是，如果内部类更大更复杂（通常情况并非如此），那么您应该考虑使用 getter/setter。例如，这将使您能够`bar`在代码中添加边界检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:24:10.880

建议这样做，因为在某些时候重构并将类移到外部可能是有意义的。此外，可能需要为它制作一个接口，等等。可能还有更多的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:27:22.417

根据 Java 教程：“静态嵌套类与其外部类（和其他类）的实例成员交互，就像任何其他顶级类一样。实际上，静态嵌套类在行为上是一个顶级类，它已经嵌套在另一个顶级类中以方便打包。”

所以我会说是的，您通常希望像封装顶级类一样封装其成员。

# php - file_exists 似乎无法正常工作

> ID：15189067
> 
> 赞同：5
> 
> 时间：2013-03-03T18:20:43.580
> 
> 标签：php, file-permissions, file-exists

我有一个要执行的 php 脚本，前提是该脚本的其他实例尚未运行。我有这个代码：

```
$lockfile = __DIR__.'/lock.file';

if(file_exists($lockfile) == false)
{
    echo 'no lockfile. Job will execute.';
    $handle = fopen($lockfile, 'x') or die('Cannot open file:  '.$lockfile);
    $data = 'This is the lockfile';
    fwrite($handle, $data);
    fclose($lockfile);

    createLinks();

    unlink($lockfile);
}
else
{
    echo 'Lockfile present, job will not execute. Please try again later';
} 
```

但它不能正确检查文件是否存在。如果我用浏览器调用脚本，lock.file 会正确创建（我可以用 ftp 看到它），然后删除。但是，我仍然可以同时多次运行该脚本。如果我自己用 ftp 创建一个 lock.file，它不会执行脚本。我已经搜索了几个小时了，会是什么？也许我很愚蠢，但我认为这应该可行，对吧？

编辑：杰普，羊群做到了。非常感谢！最终代码：

```
$lockfile = __DIR__.'/lock.file';
$handle = fopen($lockfile, "x");

if(flock($handle, LOCK_EX))
{
    echo 'no lockfile. Job will execute.';

    $data = 'This is the lockfile';
    fwrite($handle, $data);

    createLinks();

    fclose($lockfile);  
    unlink($lockfile);
}
else
{
    echo 'Lockfile present, job will not execute. Please try again later';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:27:55.130

从以下文档`file_exists`：

> 注意：此函数的结果被缓存。有关详细信息，请参阅 clearstatcache()。

和：

> 您还应该注意，PHP 不会缓存有关不存在文件的信息。因此，如果您对不存在的文件调用 file_exists()，它将返回 FALSE，直到您创建该文件。如果您创建该文件，即使您随后删除该文件，它也会返回 TRUE。但是 unlink() 会自动清除缓存

尝试将您的功能更改为：

```
if(file_exists($lockfile) == false)
{
    clearstatcache();
    ... 
```

看看[clearstatcache()](http://www.php.net/manual/en/function.clearstatcache.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T17:14:43.463

我今天已经花了半天时间来处理与您的问题几乎相同的问题。我的 PHP 代码也使用了文件锁，并在其中调用了 file_exists()。我在“奇怪的” file_exists() 结果中遇到了同样的问题。当我将文件的使用（以获得锁）更改为数据库的使用时，我完全感到困惑——锁对应于表中的一行。结果完全一样——我尝试在浏览器的不同选项卡中同时启动代码，但我仍然未能获得锁定。

然后我意识到这种奇怪行为的真正原因是什么。在我的情况下（看起来你的情况是一样的），主要问题在于脚本是在一个浏览器中“同时多次”启动的。但是请求不是同时处理的，而是顺序处理的。这里给出了对这种效果的一个很好的解释： [https ://stackoverflow.com/a/3623584/1758680](https://stackoverflow.com/a/3623584/1758680)

因此，随着所有请求按顺序排列 - 每个请求都在等待前一个请求结束。每个锁在下一个脚本开始并尝试获取锁之前被释放。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T18:28:43.030

尝试

```
$lockfile = 'lock.file'; 
```

或其他..

# java - Java 小程序：监控 HTTP 请求

> ID：15189072
> 
> 赞同：0
> 
> 时间：2013-03-03T18:21:14.410
> 
> 标签：java, jquery, json, applet

我正在制作一个 Java 小程序。我想连接到一个网页，然后该网页会向外部服务器发出很多获取请求。如何查看获取请求的 URL？我如何查看回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:03:14.630

Have you tried proxies like membrane ([http://www.membrane-soa.org/soap-monitor/](http://www.membrane-soa.org/soap-monitor/)) or fiddler ([http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)) while testing ?

# ios - 不正确的文件树 Google Drive API

> ID：15189073
> 
> 赞同：0
> 
> 时间：2013-03-03T18:21:24.783
> 
> 标签：ios, google-drive-api

我正在初始化`GTMOAuth2ViewControllerTouch`一个

```
[[GTMOAuth2ViewControllerTouch alloc] initWithScope:kGTLAuthScopeDrive... 
```

我正在请求文件列表：

```
GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];

[self.driveService executeQuery:query completionHandler:^(GTLServiceTicket *ticket,
                                                          GTLDriveFileList *fileList,
                                                          NSError *error) {
}]; 
```

这将返回关联的云端硬盘帐户中的所有文件。由于某种原因，对 Drive 文件夹所做的文件更改，例如将所有文件放入一个文件夹中，没有更新没有链接到 Drive 服务的设备。重新获取文件列表未显示更新的列表，现在包含文件的单个文件夹。

这是驱动器错误还是我对请求的配置不同？

# objective-c - 将不透明度滑块添加到颜色面板以获取一种颜色而不是其他颜色

> ID：15189074
> 
> 赞同：13
> 
> 时间：2013-03-03T18:21:30.383
> 
> 标签：objective-c, cocoa, nscolorpanel, nscolorwell

我想为 1 个特定的 NSColorWell 显示的 NSColorPanel 添加一个不透明度滑块。所有其他颜色孔不应显示不透明度滑块。

我知道我可以像这样为 sharedColorPanel 设置它：

```
 [[NSColorPanel sharedColorPanel] setShowsAlpha:YES]; 
```

但是，当我只希望这种行为适用于单一颜色时，我该怎么做呢？

我尝试添加一个 IBAction，但是当您单击颜色时不会调用此 IBAction。（所以在面板显示之前我无法进行任何更改）。当您在颜色面板中选择另一种颜色时调用它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T06:56:25.757

OK, here's the code that works. Set the colorwell class in IB to AlphaColorWell:**

```
@implementation AlphaColorWell

- (void)activate:(BOOL)exclusive
{
    [[NSColorPanel sharedColorPanel] setShowsAlpha:YES];
    [super activate:exclusive];
}

- (void)deactivate
{
    [super deactivate];
    [[NSColorPanel sharedColorPanel] setShowsAlpha:NO];
}

@end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-04-20T17:32:50.867

AppKit isn't showing the opacity slider in the panel because it thinks the app doesn't support alpha, which is the default. So rather than subclass, just do this:

```
func applicationDidFinishLaunching(_ aNotification: Notification) {
    ...
    NSColor.ignoresAlpha = false
    ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-26T12:57:05.297

```
class ANColorWell: NSColorWell {
override func activate(_ exclusive: Bool) {
    NSColorPanel.shared.showsAlpha = true;
    super.activate(exclusive);
}

override func deactivate() {
    NSColorPanel.shared.showsAlpha = false;
    super.deactivate();

}
} 
```

This is the swift4.0 version I tried, which I hope will be useful to you

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T19:30:15.783

就像处理大多数 AppKit 一样，答案是子类化。

```
@interface AlphaColorPanel : NSColorPanel

@end

@implementation AlphaColorPanel

- (BOOL)showsAlpha {
    return YES;
}

@end 
```

然后进入 IB 并覆盖要显示 alpha 滑块的单一颜色面板的类。

# javascript - 图像串：Magic 8 Ball Simulation

> ID：15189075
> 
> 赞同：0
> 
> 时间：2013-03-03T18:21:32.260
> 
> 标签：javascript, string, image

我需要创建 w 魔术八球模拟，用户可以在其中提出特定问题，并且对于相同的问题，它总是会返回相同的答案。就像，当用户输入 Will I be rich? 时，我希望图像从 ../Images/eightBallNo.png 中读取 no 该图像需要出现。目前，我的代码在 Chrome 控制台中没有显示错误，但它不起作用。有什么我做错了吗？

```
<!DOCTYPE html>
  <html lang="en">
    <head>

    <title>Project 4: Consistent</title>
    <!-- This part is the function to create my magic eight ball that will randomly give a result, but for certain questions,
    it will provide the same annswer always to fool their minds. -->
    <style>
        #answerImages {
            bachground-color: white;
            height: 100 px;
            width: 300 px;
            text-align: center;
            padding: 60 px;
            margin: 30 px;
            corner-radius: 10 px;
        }
    </style>
    <script>
        // empty cache to use
        var answerMap = {}
        // array of your images
        var images = ['eightBallYes.png', 'eightBallNo.png', 'eightBallMillionYears.png', 'eightBallAskLater.png', 'eightBallReally.png'];

        function eightBall() {
            var answer = document.getElementById("answerBox").value;
            answer = answer.toLowerCase();

            if (answer.search(/[r]/) > -1 ) {
                var yes = '../Images/eightBallYes.png' 
                return yes;
            }

            if (answer.search(/[m]/) > -1 ) {
                var no = '../Images/eightBallNo.png' 
                return no;
            }

            else {
            var randomIndex = Math.floor(Math.random() * images.length);
            imageToUse = images[randomIndex];
            answerMap[answer] = imageToUse;
        }
        }

        window.onload = alert('Welcome to my Project 4')

    </script>
</head>
<body>
<body style="background:#EEEE17">
    <!-- This part of the page will simulate a magic eight ball that will provide at least 4 answers.
    When certain questions are asked, it will return the same answers. This is honestly a pretty cool project to work on. -->

    <div style="text-align:center">
        <h1>Project 4: Booyah!</h1>
        <img src="../images/eightBallTemplate.png" >
        <h2>Magic 8-Ball Game</h2>
        <!-- The following code was borrowed from http://www.w3schools.com/html_forms.asp -->

        <input type="text" id="answerBox" value="Please ask a question">
        <input type="button" value="Submit for Magical Results" onclick='eightBall()'/>

        <!-- Choose Random Answer -->

        <!--Display my Answer -->
        <div id="myOutput"></div>

        <hr>

        <a href="http://pages.uoregon.edu/alans/111/CIS%20111/p4/mac.html">Old MacDonald In-Class Activity</a>
        <br>
        <a href="http://pages.uoregon.edu/alans/111/CIS%20111/p4/paramString.html">Parameter In-Class Activity</a>
        <br>
        <a href="http://pages.uoregon.edu/alans/111/CIS%20111/p4/isPrimeLight-jQuery.html">jQuery In-Class Activity</a>
        <footer>

            <p>
                &copy; Copyright  by Alan Sylvestre
            </p>
        </footer>
    </div>
</body> 
```

# ios - ios [__NSCFString MD5String]：无法识别的选择器发送到实例

> ID：15189080
> 
> 赞同：3
> 
> 时间：2013-03-03T18:22:10.647
> 
> 标签：ios, objective-c, objective-c-category

我有以下我无法成功解决的问题。您的帮助将不胜感激。

要从 NSS 字符串计算 md5，类别已定义为：

## NSString-md5.h

```
@interface NSString (MD5)
- (NSString *)MD5String;
@end 
```

## NSString-md5.m

```
#import <CommonCrypto/CommonDigest.h>
#import "NSString-md5.h"
@implementation NSString(MD5)
- (NSString *)MD5String
    {is
    const char *cstr = [self UTF8String];
    unsigned char result[16];    
    CC_MD5( cstr, strlen(cstr), result );
    return [NSString stringWithFormat:
        @"%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X",
        result[0], result[1], result[2], result[3], 
        result[4], result[5], result[6], result[7],
        result[8], result[9], result[10], result[11],
        result[12], result[13], result[14], result[15]
        ];  
    }
@end 
```

## 调用代码（摘录）

```
#import "NSString-md5.h"
...
NSLog(@"1 %@ ",message.text);
[message.text MD5String]; 
```

中止并显示错误消息：

```
2013-03-03 19:06:14.104 coffreFort[1230:11303] 1 aze 
2013-03-03 19:06:22.777 coffreFort[1230:11303] -[__NSCFString MD5String]: unrecognized selector sent to instance 0x71e62b0
2013-03-03 19:06:22.777 coffreFort[1230:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString MD5String]: unrecognized selector sent to instance 0x71e62b0' 
```

message.text 是由定义的 IBOutlet

```
@property (weak, nonatomic) IBOutlet UITextField *message; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T19:22:26.073

这是CLANG的一个问题（他们承诺会修复），其中类别经常被卸载，特别是在框架或库的上下文中。除了强制链接器包含它们之外，您还必须传入链接器标志`-all_load`（或）用你的二进制文件。`-force_load``-ObjC`

# javascript - 使用 javascript 更改帧

> ID：15189082
> 
> 赞同：1
> 
> 时间：2013-03-03T18:22:19.820
> 
> 标签：javascript, frames

我正在尝试使用包含在另一个框架中的控件来更改一个框架 html 中的元素。但是，我无法做到这一点。

我基本上有这个：

```
<a href = "#"  id = "c1" onclick = "document.getElementById('text').color =     'red'">red</a> 
```

这是为了改变这一点。

```
<p id = "text">dsdsdsdsd</p> 
```

但是，我无法弄清楚如何以正确的方式做到这一点。

编辑：

主页面如下所示：

```
<frameset cols = "15%, *" frameborder="100" border="1" framespacing="1">
<frame src ="bookMenu.html" scrolling = "no"/>
<frameset rows = "*, 10%" frameborder="100" border="1" framespacing="1">
    <frame src ="book1_intro.html" scrolling= "yes" name = "main"/>
    <frame src ="book_controls.html" scrolling= "no" name = "control"/>
</frameset> 
```

调用按钮位于框架命名控件中，目标位于名为 main 的框架中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:30:53.603

您需要先获取对父级的引用，然后是对包含段落标签的框架的引用，并使用 contentDocument 获取该框架内的文档。

看：

[如何从 javascript 访问父 iframe](https://stackoverflow.com/questions/935127/how-to-access-parent-iframe-from-javascript)

[如何使用 Javascript 访问 iframe 元素？](https://stackoverflow.com/questions/1452871/how-can-i-access-iframe-elements-with-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:05:40.813

如果你真的有s，为(s)中的元素`frame`设置一个`name`属性。然后您可以像这样从任何框架（或文档）引用：`frame``frameset``#text``frameset`

```
var text = top.window.main.document.getElementById('text'); 
```

`(i)frame`请注意，如果这是本地页面，则在使用 Chrome 时不能引用s。但是，有一个解决方法：添加`--allow-file-access-from-files`到 Chrome 图标的目标路径，并在打开框架集文件之前通过单击此修改后的图标打开 Chrome。

# c++ - 希望将最终答案四舍五入到小数点后两位 C++

> ID：15189084
> 
> 赞同：1
> 
> 时间：2013-03-03T18:22:40.857
> 
> 标签：c++, iostream

我正在尝试将我的最终答案四舍五入到小数点后两位，所以它是美元和美分。我是编码新手，无法弄清楚。我想在“您需要收取的金额是”的行中将“w”四舍五入这是我的代码：

```
#include <iostream>

using namespace std;

int main()
{
    string Choice;

    float x, w;

    cout << "Please enter the amount needed." << endl;
    cin >> x;

    w = x/(1-0.0275);   

    cout << "The amount you need to charge is $"<< w << "." << endl;

    return (0);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:28:21.217

根据此处的示例[http://www.cplusplus.com/forum/beginner/3600/](http://www.cplusplus.com/forum/beginner/3600/) 您可以使用

```
cout << setprecision(2) << fixed << w << endl; 
```

（`fixed`是可选的）

你不得不`#include <iomanip>`

正如 Synxis 所指出的，这仅适用于打印值，它不会改变持有的值`w`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T18:33:03.623

您总是可以将答案乘以`x`100，四舍五入，然后除以 100。

```
x = (int)(x*100+0.5f);  
x = ( (float)(x) ) / 100.0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:06:56.733

您可以将货币单位更改为“美分”，然后除以 100 得到美元，再除以 100 得到美分。

```
unsigned int money = 152; // USD $1.52

cout << "Money is: " << (money / 100) << "." << (money % 100) << "\n"; 
```

这可能更准确。在网上搜索“一切都知道浮点”。

# ios - UIScrollView 和问题设置 UIPageControl 的当前页面

> ID：15189088
> 
> 赞同：0
> 
> 时间：2013-03-03T18:22:53.970
> 
> 标签：ios, ios6, uiscrollview

我正在尝试设置 UIPageControl 并需要设置`currentPage`; 我有以下内容，但是一旦为 self.pageControl.currentPage 分配了值，即使它应该是正确的值，它也始终等于 0。这是我第一次使用 UIPageControl，我想我错过了一些非常基本的东西；可能总是在某处被重置为0。提前谢谢

这是我的代码

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)aScrollView
{
    self.pageControl.currentPage = (int) floor((self.scrollView.contentOffset.x + 0.25)/320.0f);
    int this_page=(int)(self.scrollView.contentOffset.x + 0.25)/320.0f;
  self.pageControl.currentPage=this_page;
  NSLog(@"here is property %d", self.pageControl.currentPage);
  NSLog(@"here is this_page %d", this_page);
  self.pageControl.currentPage=4;
  NSLog(@"here is property after manual set %d", self.pageControl.currentPage);

} 
```

和我的 NSLog 输出。

```
2013-03-03 10:19:14.204 Lt[32045:11303] here is property 0
2013-03-03 10:19:14.206 Lt[32045:11303] here is this_page 1
2013-03-03 10:28:03.993 Lt[32209:11303] here is property after manual set 0
2013-03-03 10:19:15.449 Lt[32045:11303] here is property 0
2013-03-03 10:19:15.449 Lt[32045:11303] here is this_page 2
2013-03-03 10:28:03.993 Lt[32209:11303] here is property after manual set 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:28:10.207

最有可能`self.pageControl`为零，即您从未正确连接插座。否则页面控件本身配置不正确，例如您从未设置`numberOfPages`.

顺便说一句，在 iOS 6 中将页面控件与分页滚动视图协调的最简单方法是改用 UIPageViewController。

# java - 为什么我的代码不能同时运行两个面板？当我运行它时它没有显示任何东西，但它编译

> ID：15189091
> 
> 赞同：1
> 
> 时间：2013-03-03T18:23:19.307
> 
> 标签：java, swing, user-interface, jframe, jcombobox

想知道为什么这段代码不会运行。它可以编译，但由于某种原因不显示 GUI 或任何东西，请帮忙！这是一个在 1 帧中有 2 个，最终 3 个面板的程序。如果我删除了到目前为止我所做的一切，但只保留一个组合框/一个面板的东西，它就可以正常工作并完美显示/编译。

无论如何，这里是代码！

```
 import java.awt.BorderLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;

    import javax.swing.*;

    public class FastFood implements ActionListener
    {
    JFrame frame;
    JPanel contentpane1; //this panel will include cheese burger, chicken sandwich, hot dog, pizza, and salad
    JPanel contentpane2; // this pane will include side salad, french fried, or apple slice
    JPanel contentpane3; // this panel will include coke, diet coke, sprite, ice tea, coffee, root beer, or water

    JComboBox maindish; //combo box for maindishes
    JComboBox sides; //box for sides
    JComboBox drink; //box for drinks

    JLabel fastfoodp1; // label for main dish
    JLabel fastfoodp2; //label for sides
    JLabel fastfoodp3; // label for drinks
    JLabel c1; // cost for main dish
    JLabel c2; //cost for drink
    JLabel c3; //cost for sides
    JLabel cost; //label to display the total cost

    public FastFood()
    {       
        frame = new JFrame("Order your fastfood!"); //sets up frame title
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);       
        //all of this code is for the maindish 
        contentpane1 = new JPanel(); //creats panel object
        contentpane1.setLayout(new BoxLayout(contentpane1, BoxLayout.PAGE_AXIS)); //creates layout
        contentpane1.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5)); //creates border
        //next three lines of code set up the label to prompt user for main dish
        fastfoodp1 = new JLabel("Select a main dish");
        fastfoodp1.setAlignmentX(JLabel.LEFT_ALIGNMENT);
        contentpane1.add(fastfoodp1);

        //next code sets up the combo box options and adds it to the panel
        String[] MainDishes  = {"Cheese Burger", "Chicken Sandwich", "Hot Dog", "Pizza", "Salad" };
        maindish = new JComboBox(MainDishes);
        maindish.setAlignmentX(JComboBox.LEFT_ALIGNMENT);
        maindish.setSelectedIndex(0);
        maindish.addActionListener(this);
        contentpane1.add(maindish);

        //sets up price label for selected item
        c1 = new JLabel("Cost of Main Dish");
        c1.setBorder(BorderFactory.createEmptyBorder(20, 0, 0, 0));
        contentpane1.add(c1);

        //next code is for sides

        contentpane2 = new JPanel();
        contentpane2.setLayout(new BoxLayout(contentpane1, BoxLayout.PAGE_AXIS));
        contentpane2.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

        //next codes set up label to prompt user for sides
        fastfoodp2 = new JLabel("Select a side");
        fastfoodp2.setAlignmentX(JLabel.CENTER_ALIGNMENT);
        contentpane2.add(fastfoodp2);

        //next code sets up the combo box options and adds it to the panel
        String[] SideDishes = {"Side Salad", "Frend Fries", "Apple Slice" };
        sides = new JComboBox(SideDishes);
        sides.setAlignmentX(JComboBox.CENTER_ALIGNMENT);
        sides.setSelectedIndex(0);
        sides.addActionListener(this);
        contentpane2.add(sides);

        //sets up price label for selected item

        c2 = new JLabel("Cost of Side Dish");
        c2.setBorder(BorderFactory.createEmptyBorder(20,0,0,0));
        contentpane2.add(c2);

        //next code is for Drinks

        //makes it visible
         frame.setContentPane(contentpane1);
         frame.pack();
         frame.setVisible(true);

         frame.setContentPane(contentpane2);
         frame.pack();
         frame.setVisible(true);

         frame.add(contentpane1, BorderLayout.WEST);
         frame.add(contentpane2, BorderLayout.CENTER);

         //next code is for sides       
    }

    public void actionPerformed(ActionEvent event) 
    {
        JComboBox comboBox = (JComboBox)event.getSource();
        String maindishname =(String)comboBox.getSelectedItem();
        if (maindishname == "Cheeese Burger")
        {
            c1.setText("$3.50 for Cheese Burger");
        }
        else if (maindishname == "Chicken Sandwich")
        {
            c1.setText("$2.50 for Chicken Sandwich");
        }
        else if (maindishname == "Hot Dog")
        {
            c1.setText("$2.50 for Hot Dog");
        }
        else if (maindishname == "Pizza")
        {
            c1.setText("$2.00 for Pizza");
        }
        else if (maindishname == "Salad")
        {
            c1.setText("$1.50 for Salad");
        }

        JComboBox sides = (JComboBox)event.getSource();
        String sidedishname = (String)sides.getSelectedItem();

        if(sidedishname == "Side Salad")
        {
            c2.setText("$0.50 for Side Salad");
        }
        else if (sidedishname == "French Fries")
        {
            c2.setText("$1.00 for French Fries");
        }
        else if (sidedishname == "Apple Slice")
        {
            c2.setText("$0.75 for Applie Slice");
        }
    }

       private static void runGUI() 
       {
            JFrame.setDefaultLookAndFeelDecorated(true);
            FastFood food = new FastFood();
        }
       public static void main(String[] args) 
       {            
            javax.swing.SwingUtilities.invokeLater(new Runnable() {public void run() {runGUI();} });
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:50:20.480

`BoxLayout`不允许共享目标组件。代替

```
contentpane2.setLayout(new BoxLayout(contentpane1, BoxLayout.PAGE_AXIS)); 
```

和

```
contentpane2.setLayout(new BoxLayout(contentpane2, BoxLayout.PAGE_AXIS)); 
```

注意`contentpane2`用作目标`Component`。

`JFrame#setContentPane`如果要将组件添加`BorderLayout`到`JFrame`.

您将需要`getPreferredSize`在`JPanels` `contentpane1`和`contentpane2`中进行覆盖，以便使用`pack`.

还要确保`JFrame#setVisible` *在*将所有组件添加到`JFrame`.

# tfs - 恢复的 TFS 2012 引发 TF30063：您无权访问

> ID：15189092
> 
> 赞同：0
> 
> 时间：2013-03-03T18:23:20.743
> 
> 标签：tfs

我正在尝试从新机器上的旧服务器恢复 TFS 2012 安装。在安装 TFS 期间一切正常。团队项目集合在管理控制台中正确显示，并且更改 URL 等一些功能可以正常工作。

简单地说，我无法从浏览器连接到服务器或在管理控制台中管理组成员身份。尽管我以管理员身份登录，但它每次都会提示我提供登录凭据。提供管理员凭据无济于事，因为它一直在抛出

```
TF30063: You are not authorized to access http://localhost:8080/tfs 
```

当我尝试从我的常规 Windows 开发人员机器进行远程连接时，这同样适用。

新旧服务器都是Win2008R2。他们不是域的成员。新旧 SqlServer（与 TFS 在同一台机器上的主机）都是 SQL-Server 2012。

我浏览了有关如何恢复应用程序层的说明：http: [//msdn.microsoft.com/en-us/library/vstudio/dd793167.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd793167.aspx) （恢复应用程序层服务器）

我通过 SQL Server Management Studio 恢复了所需的数据库，安装了 TFS 并按照指南中的说明启动了仅限应用程序层的向导。然后我将本地服务配置为 TFSService 的帐户。

有趣的是，如果我使用相同的指令在另一台物理机或虚拟机上恢复 TFS，本地和远程连接一切正常。这个问题似乎与这个特定的新服务器（虚拟服务器）有关。顺便说一句，我注意到这台服务器托管了一些额外的 IIS 网站，但它们都没有阻止 TFS 保留的端口 8080。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:29:35.730

阅读 Buck Hodges 的这篇[博客文章](http://blogs.msdn.com/b/visualstudioalm/archive/2012/12/21/tfs-2012-update-1-permissions-lost-on-attaching-a-collection-fix-available-in-early-january.aspx)，这是升级过程的一个已知问题。另请参阅此[博客文章](http://blogs.msdn.com/b/bharry/archive/2013/02/01/hotfixes-for-tfs-2012-update-1-tfs-2012-1.aspx)Brian Harry。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:50:22.503

不幸的是，我无法弄清楚此过程在该特定服务器上不起作用的原因。我决定使用分离/附加路径来传输 TFS 数据。

1.  在旧服务器上安装补丁，只是为了避免可能的权限丢失（[http://support.microsoft.com/kb/2803625](http://support.microsoft.com/kb/2803625)）
2.  在 TFS 管理控制台中从旧服务器中分离团队项目集合
3.  备份 SSMS 中的团队集合数据库
4.  在新服务器上安装 TFS 2012，安装后立即关闭自动启动向导（您可以稍后重新启动它）。
5.  在新服务器上应用 TFS 补丁
6.  启动 TFS 管理控制台，单击 Application Tier 并完成配置向导（为我的目的选择了基本配置）。此过程创建一个新的配置数据库。
7.  在 SSMS 中恢复新服务器上的数据库
8.  在 TFS 管理控制台中将它们附加到新服务器上

这对我很有用，尽管我无法准确解释我的第一种方法出了什么问题，这种方法已经在其他机器上被证明了很多次。我假设 TFS_Configuration 数据库和托管系统之间存在某种不兼容。

# php - php中无法识别windows权限

> ID：15189093
> 
> 赞同：1
> 
> 时间：2013-03-03T18:23:30.357
> 
> 标签：php, windows, wamp

我有以下系统配置：

*   视窗 7 操作系统
*   WAMP 与 php 5.5.24 默认配置

我在网站上有一个使用php函数`fileperms()`的文件，我需要返回0777权限才能使用该文件，但它一直返回0666，这意味着没有执行权限。

因为我使用 Windows 我为包含文件的文件夹执行了以下命令：

1.  `takeown /F . /R`
2.  `icacls . /grant Everyone:F /T`

然后我用cygwin改权限`chmod -R 777 .` ，查了`ls -l .`一下，说改成777了

**更新：**我知道在 Windows 中没有 777 权限，并且为每个人更改权限的一种方法是使用`icacls`，但是我如何在 php 中创建`fileperms()`返回 777 而不是 666 的函数，就像它目前在 Windows 下所做的那样。如果我使用 linux，该函数会返回 777，当然在执行`chmod -R 777`.

# ruby-on-rails - 通过链接传递 id 失败

> ID：15189095
> 
> 赞同：0
> 
> 时间：2013-03-03T18:23:38.603
> 
> 标签：ruby-on-rails, ruby, variables

传递 link_to 的变量 ID 时出现此错误。我无法读取下一页中的变量 (blog_details.html.erb)

错误：

```
ActiveRecord::RecordNotFound in HomeController#blog_details

Couldn't find Post without an ID 
```

我的家庭控制器：

```
class HomeController < ApplicationController

  def blog
    @posts = Post.all
  end

  def blog_details
    @post = Post.find(params[:id])   
  end

end 
```

我与变量的链接：

```
<div class="post-title">                
  <h2 class="title">
    <%= link_to (post.titulo), :controller => 'home', 
          :action => 'blog_details', :post_id => post.id %>
  </h2>
</div> 
```

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:25:56.973

它应该如下所示：

```
def blog_details
  @post = Post.find(params[:post_id])   
end 
```

或者

```
<%= link_to (post.titulo), :controller => 'home', 
      :action => 'blog_details', :id => post.id %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:27:00.100

问题是您正在寻找`params[:id]`但传入`:post_id`. 所以要么寻找`params[:post_id]`，要么传入`:id => post.id`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T18:27:04.560

你通过了 post_id 而不是 id ：

这应该工作：

```
<div class="post-title">                
  <h2 class="title">
    <%= link_to (post.titulo), :controller => 'home', 
          :action => 'blog_details', :id => post.id %>
  </h2>
</div> 
```

考虑使用命名路由或资源，这样你就可以以这样的方式结束：

`<%= link_to post.titulo, post %>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:28:05.013

home#blog_details 的路径是什么？..使用该路径，您可以执行以下操作：

```
<%= link_to (post.titulo),  blog_details_path(post) %> 
```

# php - MIME php 邮件仅显示文本/纯文本版本

> ID：15189099
> 
> 赞同：0
> 
> 时间：2013-03-03T18:24:20.963
> 
> 标签：php, email, smtp, mime, boundary

我尝试发送多部分/替代电子邮件，因此我在一封邮件中发送文本版本和 html 版本。我的问题是邮件只包含这个纯文本：

邮件在这里：

```
Multipart Message coming up

--b4d67c224c82d8fad38c0bcef1a0bf97Content-Type: text/plain; charset=iso-8859-1Content-Transfer-Encoding: 7bitYou really ought remember the birthdays--b4d67c224c82d8fad38c0bcef1a0bf97Content-Type: text/html; charset=iso-8859-1Content-Transfer-Encoding: 7bit<html>
        <head>
          <title>Birthday Reminders for August</title>
        </head>
        <body>
          <p>Here are the birthdays upcoming in August!</p>
        </body>
        </html>
        --b4d67c224c82d8fad38c0bcef1a0bf97-- 
```

代码如下所示。

```
<?

//this is a path to PHP mailer class you have dowloaded
$to      = "mail@mydomain.com";

$boundary = md5(date('U'));

$subject = "My Subject";

$headers = "From: mail@mydomain.com" . "\r\n".
           "X-Mailer: PHP/".phpversion() ."\r\n".
           "MIME-Version: 1.0" . "\r\n".
           "Content-Type: multipart/alternative; boundary=$boundary". "\r\n".
           "Content-Transfer-Encoding: 7bit". "\r\n";

$text = "You really ought remember the birthdays";     
$html = '<html>
    <head>
      <title>Birthday Reminders for August</title>
    </head>
    <body>
      <p>Here are the birthdays upcoming in August!</p>
    </body>
    </html>
    ';

$message = "Multipart Message coming up" . "\r\n\r\n".
       "--".$boundary.
       "Content-Type: text/plain; charset=iso-8859-1" .
       "Content-Transfer-Encoding: 7bit".
       $text. 
       "--".$boundary. 
       "Content-Type: text/html; charset=iso-8859-1". 
       "Content-Transfer-Encoding: 7bit". 
       $html.
       "--".$boundary."--";

mail($to, $subject, $message, $headers);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:30:40.390

您没有用“\n”终止边界和内容行

根据 mime 规范强制

# jquery - 单击链接时填充选择框

> ID：15189101
> 
> 赞同：0
> 
> 时间：2013-03-03T18:24:34.920
> 
> 标签：jquery, ajax, select, drop-down-menu, populate

我有一个 T 恤页面，用户需要在其中选择颜色和尺寸（请参见[此处的示例](https://www.ni-dieu-ni-maitre.com/_test/example.php)）

当用户单击颜色（带有链接的图像）时，我需要填充“尺寸”下拉列表。

将用于填充外观的彩色图像/链接的代码如下所示：

```
<a  onclick="document.getElementById('productColor10474717').value='120';" class="colorlink" href="https://www.ni-dieu-ni-maitre.com/tshirt_image.php?a=10474717&color=120" target="tshirt_image"> 
```

![](../Images/41e436fa909f5118070094a659a43653.png) （在此链接中，颜色代码为 120）

我已经制作了一个 php 脚本来获取必须在下拉列表中填充的结果： [https ://ni-dieu-ni-maitre.com/_test/tshirt_ajax.php?checkshop=266497&checkproducttype=210&stockcolor=2](https://ni-dieu-ni-maitre.com/_test/tshirt_ajax.php?checkshop=266497&checkproducttype=210&stockcolor=2)

"&stockcolor" 是颜色代码的变量。其他 2 个变量必须保持不变

php 页面将返回如下内容：

```
[{"optionValue":2, "optionDisplay": "2"},{"optionValue":3, "optionDisplay": "3"},{"optionValue":4, "optionDisplay": "4"},{"optionValue":5, "optionDisplay": "5"},{"optionValue":6, "optionDisplay": "6"}] 
```

我真的是 AJAX 的新手，我不知道如何在 tshirt 页面上实现 AJAX 以使用颜色代码变量从 php 页面获取结果，然后将其填充到下拉框中，我需要帮助它

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:07:41.000

使php文件打印结果如

```
<option value="optionValue">optionResult</option>
<option>.......</option>
<option>.......</option> 
```

将 id="stockcolor" 添加到每个 (a) 元素并删除超链接和 onclick javascript，例如：

```
<a id="63" class="colorlink" href="#">
    <img src="https://image.spreadshirt.com/image-server/v1/appearances/63" width="24" height="24" class="cnormal">
</a> 
```

安装 jquery（将此行添加到文档的开头）：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

然后使用ajax

```
$(document).ready(function(){
    $.ajax({
        type: "post",
        url: "Untitled-3.php?checkshop=266497&checkproducttype=210&stockcolor=" + $('#productColor10474717').val(),
        success: function(data){
            $('select#size').html(data);
    }
    });

    $('a.colorlink').click(function(){
    var stockcolor = $(this).attr('id'),
        checkshop = 266497,
        checkproducttype = 210;

    $.ajax({
        type: "post",
        url: "tshirt_ajax.php?checkshop=" + checkshop + "&checkproducttype=" + checkproducttype + "&stockcolor=" + stockcolor,
        beforeSend: function(){
            $('#productColor10474717').val(stockcolor);
        },
        success: function(data){
            $('select#size').html(data);
            $('#tshirt_image').attr('src', 'https://www.ni-dieu-ni-maitre.com/tshirt_image.php?a=10474717&color=' + stockcolor)
        }
    });

    });
}); 
```

# windows-7 - 从应用程序将文件保存在应用程序目录中

> ID：15189106
> 
> 赞同：1
> 
> 时间：2013-03-03T18:25:06.233
> 
> 标签：windows-7, file-permissions, matlab

我需要向 MATLAB 添加一个新工具箱。我通过将它添加到指定的路径来做到这一点。但是，当我尝试保存`pathdef.m`文件时，我被告知无法直接保存到默认文件位置`C:\Program Files\MATLAB\R2010a\toolbox\local`，但必须将其保存到其他位置并将其保存在我当前的工作目录中。但是，当我想使用该特定工具箱时，我真的不想将文件复制到每个工作目录。

我知道问题在于 MATLAB 没有将文件直接保存在那里的必要权限。我可以通过将它保存在其他地方然后用管理员权限替换文件来解决它，但是如果我想在将来再次这样做，我可以以任何方式直接授予 MATLAB 权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:37:10.043

我建议遵循我在[此支持文档](http://www.mathworks.com/support/solutions/en/data/1-5YQCPR/index.html?product=ML)中为我的 MathWorks 提供的建议，因为我将在这里松散地解释一下，假设我已经正确理解它：

1.  用于`pathtool`确定当前的搜索路径。
2.  在该搜索路径中的某个位置放置一个 startup.m，该路径调用您想要调用的 pathdef.m

# mysql - 带有日历的事件的 Sql 表

> ID：15189109
> 
> 赞同：0
> 
> 时间：2013-03-03T18:25:26.827
> 
> 标签：mysql, sql

我需要建立一个 Sql 表来保存`sellerid`他可用的日期（日期和时间）。

并且每次卖方添加他有空的日期（日期和时间）时，都会将其添加到表格中。

我想用这张表：

```
EVENTS

sellerid   date
123456     5/12/2013 8:10:00
121212     9/5/2013  19:40:00
123456     4/12/2013 12:00:00 
```

但我的问题在于获取此数据的选择。我想通过以下方式获取所有物品：

```
SELECT * From Events 
```

但我担心这会花费太多时间。所以我想知道这是否是实现我想要的好方法。或者这种方法会花费很多时间吗？

我正在使用 MySql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:36:15.110

这取决于数据量（行），如果它是一个简单的查询`SELECT * FROM table`，除非你有几十万，否则它不应该占用太多。

无论如何，如果您有大量数据，您应该考虑过滤日期之间的查询。也许任何 MySQL 专家都无法告诉您更多信息，但我已经处理了 10.000 行并且加载速度非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:55:02.947

我邀请您将按卖方 ID 过滤数据。如果您在此字段上创建索引，即使行数很大，您也不应该面临任何低效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:05:15.560

如果您需要完整数据（没有过滤器），我建议您选择“块”数据：

```
select * from events limit 0, 1000; -- The first thousand rows
select * from events limit 1000, 1000; -- The next thousand rows
... 
```

如果需要过滤数据，则必须确保表中有适当的索引。具体来说，您需要索引表中的两个字段。如果您尚未创建索引：

```
alter table events
    add index idx_sellerId(sellerId),
    add index idx_date(date) 
```

`sellerId`当您同时过滤和时，这应该会加快速度`date`：

```
select * from events where sellerId=123456;
select * from events where date between '2013-5-12 00:00:00' and '2013-5-12 23:59:59' 
```

我会将存储在您的字段中的`date`和部分分开，但这只是我。`time``date`

# cakephp - Cakephp 路由没有子目录名

> ID：15189111
> 
> 赞同：1
> 
> 时间：2013-03-03T18:25:41.270
> 
> 标签：cakephp

我正在开发一个 CakePHP 应用程序。当我将它上传到主机的 public_html 目录时，我为它创建了一个子目录。

所以现在的结构是这样的：domain.com/subdircake/。

我在 public_html 根目录中包含了一个 .htaccess 文件，并且我已经更改了 webroot 文件夹中的 index.php 以指向子目录。

我不知道这是由于 .htaccess 配置错误导致的 cakeapp 内部的路由问题还是 mod_rewrite 问题，但会发生这种情况。

1.  我可以访问该域，它会显示应用程序的主页。
2.  链接指向 domain.com/subdircake/action 而不是 domain.com/action。
3.  当我强制将 url 设置为 domain.com/action 时，它可以工作，这让我感到压力很大，因为我不知道为什么。

所以我认为这必须是一些重写问题，但我没有任何线索。

有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T22:39:52.727

起作用的原因`domain.com/action`是您的 .htaccess 解决方案是有效的 - 它确实将 URL 重写到正确的位置。但是，CakePHP 的路由系统不知道您对默认重写脚本所做的更改，这会导致 HTML Helper 生成的链接仍然指向它们在不编辑 .htaccess 文件时会指向的位置。

想到的第一个解决方案是更改`App.base`配置；在 中`Config/bootstrap.php`，添加这一行：

`Configure::write('App.base','/');`

看看这是否有帮助。不过，我建议在更改该设置后彻底测试该站点 - 许多 CakePHP 功能都使用它，结果可能出乎意料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:28:47.007

你使用 userdir mod 吗？

如果这样做，您必须编辑 3 cake .htaccess（位于 cake 文件夹的根目录、app/ 文件夹和 app/webroot/ 文件夹中，并在该行之后添加以下行之一`RewriteEngine On`：

```
#.htaccess :
RewriteBase /~username/

#app/.htaccess :
RewriteBase /~username/app

#app/webroot/.htaccess :
RewriteBase /~username/app/webroot 
```

用您的用户名替换用户名，但不要忘记~

如果您的蛋糕文件夹位于子目录中，它将是`/~username/subdir/...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:15:25.177

将`webroot`目录的内容放在您的`public_html`文件夹中。

然后更改`index.php`（在 webroot/public_html 中，而不是在 cake 的应用程序目录中）以下行

```
if (!defined('ROOT')) {
    define('ROOT', 'subcakedir');
}

/**
 * The actual directory name for the "app".
 *
 */
if (!defined('APP_DIR')) {
    define('APP_DIR', 'app');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T08:34:52.410

[Thiago Campezzi的回答完美，我对](https://stackoverflow.com/users/708395/thiago-campezzi)[Kornel](https://stackoverflow.com/users/754859/kornel)有完全相同的问题

在`Config/bootstrap.php`中，添加以下行：

```
Configure::write('App.base','/'); 
```

我还不能评论或投票，所以我在这里写了：）谢谢！我搜索了几个小时来寻找这个答案！

顺便说一句，这适用于 .htaccess 和没有它，因此每次将新版本的应用程序上传到 Web 服务器时都无需更改它。

# ruby - 查找日期的星期几

> ID：15189119
> 
> 赞同：0
> 
> 时间：2013-03-03T18:26:20.050
> 
> 标签：ruby, date, datetime, time

我需要找到给定年份和月份的第 28 天的工作日。对于测试数据：

```
1999-5
1998-6 
```

我预计：

```
MONDAY
TUESDAY 
```

以下是我的解决方案：

```
date = []
2.times {date << gets.chop.split("-")}
for i in 0..1 do
  time = Time.new(date[i][0], date[i][1], 28)
  puts time.strftime("%^A")   # get Weekday
end 
```

它返回

```
FRIDAY
SUNDAY 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:34:31.583

代码正在运行。1999 年 5 月 28 日是一个星期五。

来源：[http ://en.wikipedia.org/wiki/May_1999](http://en.wikipedia.org/wiki/May_1999)

# ios - 使用 iOS SDK 添加好友

> ID：15189124
> 
> 赞同：0
> 
> 时间：2013-03-03T18:26:39.040
> 
> 标签：ios, facebook, request, add, friend

我正在努力寻找一种使用 iOS Facebook SDK (v.3.2) 向 Facebook 用户发送友谊请求的方法。但似乎 SDK 没有提供执行此操作的 API。

任何人都可以告诉我为什么 Facebook 决定使用 iOS 而不是使用黑莓，因为我可以用我的黑莓手机发送友谊请求？

或者，也许我无法使用 iOS SDK 找到解决方案。谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:27:06.630

我不知道为什么 Facebook 决定采用这种策略。但人们可以合理地假设它源于好友请求是一项非常敏感的功能这一事实。以编程方式发送好友请求可能会造成一些 PR 噩梦。不确定，只是我的 2 美分。

黑莓上的什么应用程序可以让你发送好友请求？当然是官方的 Facebook 应用程序。但据我所知，这在 3rd 方应用程序中是不可能的。这不是一个孤立的 iOS 策略，而是全面的。

我能看到的唯一解决方法是让他们登录 WebView。隐藏该 web 视图，但当他们想要将某人添加为朋友时，打开该 WebView 并将其指向他们想要添加的人的 url。

# node.js - 玉鬼属性

> ID：15189125
> 
> 赞同：2
> 
> 时间：2013-03-03T18:26:44.203
> 
> 标签：node.js, pug

模板：

```
p= user 
```

输出：

```
<p>{ admin: "true", human: "Foo Bar" }</p> 
```

（在用户通常看不到但用于渲染布局的不同部分（或不渲染）的其他一些东西中，取决于各种因素）

模板：

```
p= user.human 
```

输出：

```
<p>Foo Bar</p> 
```

到目前为止，正如预期的那样。但是，模板：

```
p= user.admin 
```

输出：

```
<p></p> 
```

我不知道这怎么可能。当我输出整个对象时，该属性就在那里，但是当我尝试仅输出该属性时它就消失了。

我也尝试过使用`user['admin']`而不是`user.admin`，但这也不起作用。

第一个问题：这是怎么发生的？第二个问题：如何解决？

**更新 1：**该模式`p #{user.admin}`具有相同的效果，并`p= user.admin.toString()`导致 500 错误声明`'user.admin' is not defined`。此外，`JSON.stringify(user.admin)`还会导致空 p 标记（如`p= user.admin`and中`p #{user.admin}`）

**更新 2：** 输出 'admin' 属性：但迭代`p= JSON.stringify(user)` *不输出 '* *admin* ' 属性。在这种情况下，输出非常长，因为它包含一堆函数和其他内容，但我使用 ctrl+f 搜索输出并找不到“管理员”。`{"admin":"true","human":"Foo Bar"}``user``each value,key in user`

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:36:27.223

这可能是因为 admin 的值被解释为布尔值。一些事情要尝试：

```
p #{user.admin} 
```

或者

```
p= user.admin.toString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:56:09.087

请尝试以下

```
each value, key in user
    p #{value} [#{key}] 
```

“admin”是否被输出？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:22:57.580

好的，这是错误的：

我正在检索一个设置了“admin”属性的 Mongoose 对象，但 Schema 并没有真正指定“admin”属性。我不确定 Jade 究竟是如何拾取它的，但 Mongoose 显然对“管理”属性是什么以及如何处理它感到非常困惑。

解决方案是简单地将 'admin': 'string' 添加到我的 mongoose.Schema 对象中。

感谢戴夫和朱利安国王的帮助。我赞成你的两个答案，因为它们确实帮助我得出了这个结论（以及你的评论，但你没有得到那些我害怕的人的代表！）。*

# javascript - 除了最近的所有

> ID：15189126
> 
> 赞同：0
> 
> 时间：2013-03-03T18:26:50.790
> 
> 标签：javascript, jquery

```
<div class="container">
    <a href="#" class="trigger">Click</a>
    <div class="inner">one</div>
</div>
<div class="container">
    <a href="#" class="trigger">Click</a>
    <div class="inner">two</div>
</div>

$('.trigger').click(function () {
    $(".container :not:closest").find('.inner').slideUp('fast');
}); 
```

单击时，我希望所有`inner`div 都向上滑动，除了“最近”的，`trigger`即刚刚单击的父级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:28:20.037

像这样：

```
$(".container").not($(this).closest('.container')) 
```

或者如果`.container`'s 都是兄弟姐妹：

```
$(this).closest('.container').siblings('.container') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:30:32.717

替代：

```
var $i = $(".container .inner");

$('.trigger').click(function() {
    $i.not(this.nextElementSibling).slideUp('fast');
}); 
```

# php - Php Slim 框架嵌套路由

> ID：15189131
> 
> 赞同：2
> 
> 时间：2013-03-03T18:27:18.470
> 
> 标签：php, routes, slim

我尝试类似：

```
 $app = new Slim();

    $app->get("/home", function() use($app) {

       //some query for sub pages
       $my_sub_page = 'subpage';

       $app->get("/home/" . $my_sub_page, function() use($app) {

           //

       });

}); 
```

但结果`www.site.com/home/subpage`是 404... 可以做这样的事情吗？我想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-22T10:38:17.153

使用[http://docs.slimframework.com/#Route-Groups](http://docs.slimframework.com/#Route-Groups)

```
<?php
$app = new \Slim\Slim();

// API group
$app->group('/api', function () use ($app) {

    // Library group
    $app->group('/library', function () use ($app) {

        // Get book with ID
        $app->get('/books/:id', function ($id) {

        });

        // Update book with ID
        $app->put('/books/:id', function ($id) {

        });

        // Delete book with ID
        $app->delete('/books/:id', function ($id) {

        });

    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:54:41.867

您可能想使用[路由参数](http://docs.slimframework.com/pages/routing-parameters/)：

```
$app->get("/home/:mysubpage", function($mysubpage) use($app) {
    //do something with $mysubpage
    //it contains the value of www.site.com/home/{whatever-you-put-here}
}); 
```

这可以帮助您获得带有任意参数的动态路由。

# objective-c - 将多个简单的 OpenGL 立方体添加到一个上下文并为各个立方体设置透视图

> ID：15189134
> 
> 赞同：1
> 
> 时间：2013-03-03T18:27:29.880
> 
> 标签：objective-c, opengl, glkview

我有几个立方体形状的对象，我添加到一个上下文中，它在我的 GLKView 中。每一个立方体都是 NSObject 的一个子类，并且分别有自己的基础效果。我为每个立方体设置了投影矩阵和基础效果，如下所示：

```
self.effect = [[GLKBaseEffect alloc]init];

        self.effect.transform.projectionMatrix = GLKMatrix4MakePerspective(45.0f,0.95f, 0.0f, 10.0f);
        self.effect.transform.projectionMatrix = GLKMatrix4Translate(self.effect.transform.projectionMatrix, 0, 0.0, 2.0); 
```

现在，似乎所有人都有一个连接的投影。我想从前面看到他们所有人。但是，如果我将它们放置一点，那么我可以看到立方体的底部或顶部。

关于上面代码行的另一件事：我必须沿着 z 轴稍微移动我的模型视图矩阵以正确地构图它们。我不能将投影矩阵向后移动一点吗？我尝试了几个值，但无济于事。

容器设置如下所示：

```
- (void)setupGL {

    [EAGLContext setCurrentContext:self.context];

    self.layer.contentsScale = 2.0;

    // Create default framebuffer object.
    glGenFramebuffers(1, &defaultFrameBuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, defaultFrameBuffer);

    GLfloat coordToPixScale = 1.0;

    glGenRenderbuffers(1, &depthBuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, depthBuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, self.bounds.size.width * coordToPixScale, self.bounds.size.height * coordToPixScale);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthBuffer);

    glEnable(GL_DEPTH_TEST);

}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    @synchronized(self){

        self.opaque = NO;

        glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        [cubes makeObjectsPerformSelector:@selector(draw)];

    }

} 
```

在`- (void)glkView:drawInRect:`方法中的立方体数组中，我使添加到数组中的所有立方体都执行它们的`-draw`方法：

```
-(void)draw{

    [self.effect prepareToDraw];

    glBindTexture(GL_TEXTURE_2D, texture[2]);
    glDrawArrays(GL_TRIANGLES, 0, 24);

} 
```

有人可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:37:24.633

> 我有几个立方体形状的对象，我添加到一个单一的上下文中，

第一个概念性错误：您没有将对象添加到 OpenGL 上下文中。这不是 OpenGL 的工作方式。OpenGL 绘制点、线或三角形，仅此而已。更高级别的一切都取决于您。

你想要多个立方体，每个都有自己的视角？您一个接一个地绘制它们，每个都有自己的透视设置。

> 我不能把投影矩阵向后移动一点吗

投影矩阵是一种透镜。您不会将镜头从相机机身上拉下来，四处移动，将三脚架与相机保持在适当的位置。模型视图矩阵被称为模型**视图**是有原因的。视图部分类似于 3D 图形中的相机。

# jquery - Requirejs输出到单个文件，不包括jQuery不保留依赖？

> ID：15189143
> 
> 赞同：6
> 
> 时间：2013-03-03T18:27:58.383
> 
> 标签：jquery, optimization, requirejs, require, gruntjs

我正在使用 requirejs 优化器将我的模块压缩为一个用于生产的文件。但是，我想从文件中排除 jQuery，以便它可以与实际的应用程序逻辑分开加载，我该如何实现呢？我尝试使用 exclude 和 excludeShallow 参数进行设置，但是当我运行该页面时，出现以下错误：

> Uncaught ReferenceError: jQuery is not defined app.min.js:14 (anonymous function) app.min.js:14

我对 requirejs 的 grunt 配置如下所示：

```
requirejs: {
        minify: {
            options: {
                baseUrl: 'js',
                mainConfigFile: 'js/main.js',
                name: 'main',
                out: 'js/app.min.js',
                excludeShallow: [
                    'jquery'
                ]
            }
        }
    } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-22T14:01:11.467

方法如下： [http ://requirejs.org/docs/optimization.html#empty](http://requirejs.org/docs/optimization.html#empty)

在构建配置文件中：

```
({
    baseUrl: ".",
    name: "main",
    out: "main-built.js",
    paths: {
        jquery: "empty:"
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T17:29:32.613

尝试在 app.min.js 中像在 excludeShallow 中一样大写 jQuery。我以前在 *nix 机器上遇到过类似的问题。

（你有 app.min.js 吗？这可能有助于解决这个问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:09:41.817

我猜你正在使用一些依赖于 jQuery 的库。您是否使用[shim 选项](http://requirejs.org/docs/api.html#config-shim)来判断依赖关系？

我的意思是，您`js/main.js`必须包含如下配置：

```
shim: {
  'some-library': ['jquery']
} 
```

# .htaccess - .htaccess 拒绝所有但服务器

> ID：15189146
> 
> 赞同：3
> 
> 时间：2013-03-03T18:28:05.540
> 
> 标签：.htaccess, http

我有一个目录结构，其中我的“私有”（bin ...）文件夹与我的公共 HTML 位于同一目录中（由于与另一个站点发生冲突，我无法将它们提升到该目录之上。）我正在尝试获取 .htaccess 以拒绝对该文件夹的所有访问，除非尝试访问文件的计算机是服务器本身。

我当前的 .htaccess，在 bin 目录中：

```
Order Deny,Allow
Deny from all
Allow from anonpost.me 
Allow from  www.anonpost.me
Allow from 173.254.28.94
Allow from 127.0.0.1
Allow from aviatex14.co.uk/anonpost
Allow from www.aviatex14.co.uk/anonpost
Allow from jbblog.all12.org/anonpost
Allow from www.jbblog.all12.org/anonpost
Allow from 173.254.28.94/anonpost 
```

完全停止正在加载的 bin 文件，并在 /bin 目录上生成此错误：

```
[an error occurred while processing this directive] 
```

任何人都知道我可以在我的 .htaccess 中使用什么？

提前致谢！：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:34:18.563

更改为“订购允许，拒绝”，以便首先处理允许行，然后删除“全部拒绝”行。

有关更多信息，请参阅[htaccess "order" Deny、Allow、Deny](https://stackoverflow.com/questions/9943042/htaccess-order-deny-allow-deny)（不完全是重复的帖子，但非常相似）

您也不能在规则中指定 URL，只能指定主机名，因此 /anonpost 行会导致错误。

# mysql - 每个最终用户帐户都应该在 mysql 中获得自己的表吗？

> ID：15189147
> 
> 赞同：1
> 
> 时间：2013-03-03T18:28:08.403
> 
> 标签：mysql, user-accounts, connection

n00b mysql问题：

如果我有一个包含所有最终用户名和 ID 的表，并且我想跟踪每个用户的连接，每个最终用户是否应该获得自己的表？

例如

最终用户 A 连接到用户 B、用户 C 和用户 D；是否应该有一个单独的表，仅针对用户 A，其中包含一个列表：

```
User B  |    84746
User C  |    94837
User D  |    03265 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:32:35.837

不，使用一张桌子。这就是数据库的用途 :-) 否则，您将得到大量表（如果您有很多用户）。即使您不期望有很多用户，这也不是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:32:47.130

我强烈反对它——不要创建多个需要作为查询结果的表（例如 SELECT * from `(CONCAT(...))`）。而是创建一个将最终用户与其连接映射的表：

```
 id (primary key) | endUser  | connectedUser | connections
 ---------------------------------------------------------
 1                | User A   | User B        | 84746
 2                | User A   | User C        | 94837
 3                | User A   | User D        | 03265 
```

索引 endUser 列以便更快地访问，您应该设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T18:32:59.427

我不知道您如何管理可变数量的表格，但那样您会失去所有关系。您应该为关系添加*一张*表：

```
CREATE TABLE Relationships (
    userOwnerID,
    userFriendID
); 
```

# c# - 如何在 c# foreach 循环中使用 MongoDB 的 Query 和 QueryBuilder？

> ID：15189149
> 
> 赞同：8
> 
> 时间：2013-03-03T18:28:13.147
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在尝试查询我的收藏，但我不确定如何“追加”各种`Query.And()`

这是我创建`Item`文档的域模型：

```
public class Item
{
    public ObjectId Id { get; set; }
    public string ItemTypeTemplate { get; set; }
    public string UsernameOwner { get; set; }

    public IList<ItemAttribute> Attributes { get; set; }
} 
```

`IList<ItemAttribute>`集合根据`ItemTypeTemplate`（项目属性的预定列表的某种查找键）而变化

这是一个`Item`文档示例：

```
{
    "_id" : ObjectId("5130f9a677e23b11503fee72"),
    "ItemTypeTemplate" : "Tablet Screens", 
         //can be other types like "Batteries", etc.
         //which would change the attributes list and values
    "UsernameOwner" : "user032186511",
     "Attributes" : [{
         "AttributeName" : "Screen Size",
         "AttributeValue" : "10.1"
     }, {
         "AttributeName" : "Pixel Density",
         "AttributeValue" : "340"
     }]
} 
```

**问题**

鉴于 的“动态”性质`IList<ItemAttribute>`，我无法手动指定额外的查询条件`AttributeName`，`AttributeValue`因此我想到了使用循环来构建查询：

```
QueryBuilder<Item> qbAttributes = new QueryBuilder<Item>();

foreach (var attribute in item.Attributes)
{
    qbAttributes.And(
        Query.EQ("Attributes.AttributeName", attribute.AttributeName),
        Query.EQ("Attributes.AttributeValue", attribute.AttributeValue),
    );
}

var query = Query.And(
    Query.EQ("TemplateId", item.TemplateId),
    Query.NE("UsernameOwner", item.UsernameOwner)
);

return DBContext.GetCollection<Item>("Items").Find(query).AsQueryable(); 
```

我如何“附加”`qbAttributes`到`query`？我尝试过`qbAttributes.And(query);`，但`.Find(query)`由于参数无效而出错。

我需要这样的东西：

```
var query = Query.And(
    Query.EQ("ItemTypeTemplate", item.ItemTypeTemplate),       //Tablet Screens
    Query.NE("UsernameOwner", item.UsernameOwner)              //current user

    // this part is generated by the loop

    Query.EQ("Attributes.AttributeName", "Screen Size"),
    Query.EQ("Attributes.AttributeValue", "10.1"),

    Query.EQ("Attributes.AttributeName", "Pixel Density"),
    Query.EQ("Attributes.AttributeValue", "340")
); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T19:11:21.777

虽然未经测试（因为我没有与您类似的场景来测试），但您应该能够像这样将各种`and`条件添加到集合（实现`IEnumerable`）中，然后将其传递给实例的`And`方法：`QueryBuilder`

```
var andList = new List<IMongoQuery>();

foreach (var attribute in item.Attributes)
{
    andList.Add(Query.EQ("Attributes.AttributeName", attribute.AttributeName));
    andList.Add(Query.EQ("Attributes.AttributeValue", attribute.AttributeValue));
}

andList.Add(Query.EQ("TemplateId", item.TemplateId));
andList.Add(Query.NE("UsernameOwner", item.UsernameOwner));

var query = new QueryBuilder<Item>();
query.And(andList);
// do something with query ... 
```

上面的代码应该等效于`$and`对所有指定的条件执行。

# c# - c# linq，按索引对不同值求和

> ID：15189150
> 
> 赞同：1
> 
> 时间：2013-03-03T18:28:14.800
> 
> 标签：c#, .net, linq

我有多个具有多个值的列表，这些值可能具有或不具有相同数量的项目。我只需要按索引将不同名称的数字相加。

继承人一些代码来帮助解释......

```
 public static List<p> pList= new List<p>();
    public class p
    {
        public string name;
        public double sum;
        public List<double> ip;
    } 
```

所以，我有“p”类，作为一个列表..“p”类中的一些名称将相同而一些不同..

我只需要对具有相同名称的类“p”的索引求和“ip”中的值。

数据示例..

```
name = a, sum = 10, ip = {2,2,2,2,2}    
name = a, sum = 10, ip = {0,0,5,5}    
name = a, sum = 5, ip = {0,0,5}    
name = b, sum = 20, ip = {0,20}    
name = b, sum = 10, ip = {10} 
```

结果..

```
name = a, sum = 25, ip = {2,2,12,7,2}    
name = b, sum = 30, ip = {10,20} 
```

下面是我已经写的代码..

```
List<p> distinctmerge = pList
                         .GroupBy(t => t.name)
                         .Select(g => new p
                         {
                             name = g.Select(a => a.name).FirstOrDefault(),
                             sum = g.Sum(a => a.sum),
                             ip = new List<double>() { 1, 2, 3 }
                         }).ToList(); 
```

我无法弄清楚的部分在这里..

```
ip = new List<double>() { 1, 2, 3 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:33:03.453

您可以通过以下方式总结 ip 列表

```
 ip = Enumerable.Range(0, g.Select(a => a.ip.Length).Max()).Select(idx => g.Select(a => a.ip.ElementAtOrDefault(idx)).Sum()).ToList() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T18:52:39.917

可以使用`SelectMany`and来完成`GroupBy`：

```
 List<p> distinctmerge = pList
            .GroupBy(t => t.name)
            .Select(g => new p
            {
                name = g.Select(a => a.name).FirstOrDefault(),
                sum = g.Sum(a => a.sum),
                ip = g.SelectMany(a => a.ip.Select((e, i) => new { e, i }))
                      .GroupBy(a => a.i)
                      .OrderBy(a => a.Key)
                      .Select(a => a.Sum(e => e.e))
                      .ToList()
            }).ToList(); 
```

# c# - C# .NET MySql 只返回最后一个结果

> ID：15189158
> 
> 赞同：1
> 
> 时间：2013-03-03T18:28:30.230
> 
> 标签：c#, mysql, .net, forms

首先，这是我第一次尝试 C#。我的问题是，无论我使用数据表、列表还是 mysqldatareader；查询只返回一个结果，并且只返回表的最后一个结果。

我的表值是（列名在前）：索引城市 1 巴黎 2 伦敦

我的 C# 最后一次代码尝试是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using MySql.Data;
using MySql.Data.MySqlClient;
namespace MySQL_Sample
{

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        //MySql connections
        MySqlConnection connection;
        string host;
        string db;
        string uid;
        string pass;
        host = "localhost";
        db = "sample";
        uid = "root";
        pass = "";
        string ConnectionString = "SERVER=" + host + ";" + "DATABASE=" + db + ";" + "UID=" + uid + ";" + "PASSWORD=" + pass + ";";
        connection = new MySqlConnection(ConnectionString);
        connection.Open();
        //MySql Commands
        string sql = "SELECT * FROM table1";
        MySqlCommand cmd = new MySqlCommand(sql, connection);
        MySqlDataReader rdr = cmd.ExecuteReader();
        //MySql Call back
        while(rdr.Read())
        {
            DataTxtBox.Text = rdr[0].ToString() + " | " + rdr[1].ToString();
        }
    }

 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:31:31.893

您会一一获取所有记录，但以下行：

```
DataTxtBox.Text = rdr[0].ToString() + " | " + rdr[1].ToString(); 
```

有一个仅获取当前记录的作业。而是试试这个：

```
DataTxtBox.Text += rdr[0].ToString() + " | " + rdr[1].ToString(); 
```

重要的一点是`+=`. 这意味着行被*追加*而不是覆盖以前的值。

# ruby-on-rails - 需要在 MongoDB 中使用 Rails 和 mongoid 保存关系

> ID：15189162
> 
> 赞同：1
> 
> 时间：2013-03-03T18:28:48.100
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我需要`group_id`使用下面列出的 Rails collection_select 代码保存在我的用户文档中

模型用户：

```
class User
 include Mongoid::Document
 include Mongoid::Timestamps
 include Amistad::FriendModel

 field :name, :type => String
 field :email,              :type => String, :default => ""
 field :encrypted_password, :type => String, :default => ""

#relations
  belongs_to :school
  belongs_to :group 
```

模型组

```
 class Group
   include Mongoid::Document
   attr_accessible :name, :degree
   field :name, type: String
   field :degree, type: String
   has_many :users 
```

并生成表格：

```
<%= form_for(@user) do |f| %>
  <%= f.email_field :email %></div>
  <%= f.password_field :password %>
  <%= f.collection_select :group_id,  Group.all, :id, :name %>
  <%= f.submit "Sign up" %>
<%end%> 
```

这将保存用户文档，而不是在 collection_select 中保存 group_id 提及，任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:47:11.567

创建新用户时使用 User.new 还是 Group.user.create。后者应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:17:27.140

这不是一个更好的方法，但它有效

```
def create
@user = User.new(params[:user])
@user.school_id = current_user.school_id
@user.group_id = params[:user][:group_id]
respond_to do |format|
  if @user.save
    format.html { redirect_to @user, notice: 'Subject was successfully created.' }
    format.json { render json: @user, status: :created, location: @subject }
  else
    format.html { render  "new" }
    format.json { render json: @subject.errors, status: :unprocessable_entity }
  end
end 
```

结尾

# android - 如何提供路径文件以在谷歌地图中显示路径？

> ID：15189163
> 
> 赞同：0
> 
> 时间：2013-03-03T18:28:49.397
> 
> 标签：android, google-maps-android-api-2, gpx

我正在创建一个 Android 应用程序，以将设备的位置以固定的时间间隔存储到文件中。当设备从一个位置移动到另一个位置时，这些位置会形成一条路径。但我希望这条路径显示在谷歌地图中。

目前我正在写入一个文本文件，我也看到了 GPX 格式，我应该写一个 GPX 文件，但是如何将此文件获取到谷歌地图，是否有可用的 API？

我正在使用[https://github.com/commonsguy/cwac-locpoll/](https://github.com/commonsguy/cwac-locpoll/)在这有一个我依赖的演示项目。

文件： - [https://github.com/commonsguy/cwac-locpoll/blob/master/demo/src/com/commonsware/cwac/locpoll/demo/LocationReceiver.java](https://github.com/commonsguy/cwac-locpoll/blob/master/demo/src/com/commonsware/cwac/locpoll/demo/LocationReceiver.java) 和LocationPollerDemo.java 这是同一文件夹中的Activity 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:00:47.390

`Polyline`Maps V2 没有将任何类型的文件转换为或类似路线的内置功能。因此，将其存储在任何方便您创建`Polyline`自己的地方。

# javascript - Chrome 扩展获取所有元素并使用它们

> ID：15189166
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:29:07.870
> 
> 标签：javascript, google-chrome, google-chrome-extension, tags, src

我在这里问如何从当前的 chrome 标签中获取所有元素，并且能够像这样使用它（例如：）`document.getElementsByTagName("img");`。我已经有了要用来获取图像、全部显示或下载图像的脚本，但它仅适用于页面，而不适用于选项卡。我正在制作一个“图像采集器/采集器/选择器”，我需要用户能够从当前选项卡中获取所有图片。我已经有了代码，但正如我所说，我需要从 tabs html 代码中获取它们。我是 chrome 开发的新手，所以如果我问愚蠢的事情，请不要生气。对不起，我的英语不好。有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:34:05.417

好吧，我不确定你是否想使用 jquery，但这里有一个 jquery 示例（这将在内容脚本中使用）：

```
var images = new Array();
$(img).each(function(){
images.push($(this).attr('src'));
}) 
```

# c++ - opencv_highgui242.dll opencv 的问题

> ID：15189168
> 
> 赞同：1
> 
> 时间：2013-03-03T18:29:15.723
> 
> 标签：c++, opencv, windows-8, 64-bit

我是openCV的新手。我使用本教程对其进行配置，`http://karanjthakkar.wordpress.com/2012/11/21/usin-opencv-2-4-2-with-visual-studio-2012-on-windows-7-64-bit/`但我使用`win8`. 当我写这个基本代码时：

```
#include "stdafx.h"
#include "opencv2/highgui/highgui.hpp"

int _tmain(int argc, _TCHAR* argv[])
{
    CvCapture* capture = 0;
    IplImage* frame = 0;
    while(true)
    {
        capture = cvCaptureFromCAM(1);
        frame = cvQueryFrame( capture );
        cvNamedWindow("Sample Program", CV_WINDOW_AUTOSIZE);
        cvShowImage("Sample Program", frame);
        int c = cvWaitKey(10);
        if( (char)c == 27 ) { exit(0); }
    }
    cvReleaseImage(&frame);

    return 0;
} 
```

显示此消息的对话框：

```
 opencv_highgui242.dll is missing from your computer.
 try re installing the program to fix this problem. 
```

我能做些什么呢？

```
EDIT:
I solve that with adding library to my project path but i have new error:

the application was unable start correctly(0xc000007b). click ok to close the application. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:18:08.127

我发现了问题：问题出在`environment Variables`：我创建了新变量并将值复制到它们，但我必须编辑路径变量`(if exiting)`或使用名称路径创建新变量`(if not exist)`并复制：

`C:\OpenCV-2.4.2\opencv\build\x64\vc10\bin\;C:\OpenCV2.4.2\opencv\build\common\tbb\intel64\vc10\; to that if path exist`

```
 and copy  ;C:\OpenCV-2.4.2\opencv\build\x64\vc10\bin\;C:\OpenCV-2.4.2\opencv\build\common\tbb\intel64\vc10\; if not exist. 
```

# iphone - 如何使用固定元素在站点上启用缩放或缩放？

> ID：15189170
> 
> 赞同：1
> 
> 时间：2013-03-03T18:29:36.523
> 
> 标签：iphone, css, ipad, mobile-safari, scaling

我在我的视口元标记中将我的最大比例值设置为 1.0 以防止缩放，只是因为我有一个固定的标题，如果页面保持在顶部。当用户放大支持触摸的设备时，启用缩放会导致整个布局中断。我宁愿允许缩放。处理这个问题的最佳方法是什么？

我考虑使用 JavaScript 来检测页面何时被缩放，然后将一个类应用于主体，这将允许我用更“缩放友好”的东西覆盖固定元素。有任何想法吗？

# java - 为什么我的视图有宽度和高度 0

> ID：15189175
> 
> 赞同：1
> 
> 时间：2013-03-03T18:29:50.590
> 
> 标签：java, android

嗨，我正在使用此代码

```
View v= inflater.inflate(R.layout.mylayout, null, false);
int width=v.getWidth();
int height=v.getHeight(); 
```

但是高度和宽度返回零，为什么它不起作用，如何获得我的视图的高度和宽度。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:31:16.093

`Width and Height of the view can be measured after drawing to the screen`. 您的膨胀视图尚未在屏幕上绘制，因此如果您想获得高度和宽度，请尝试此操作。

```
View contentview = inflater.inflate(R.layout.mylayout, null, false);
contentview.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);
int width = contentview.getMeasuredWidth();
int height = contentview.getMeasuredHeight(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:35:31.797

未绘制组件时，getHeight() 和 getWidth() 返回 0。因此，您只需要绘制组件并获取绘制组件的测量值。

# css - IE CSS：透明框下的链接可点击

> ID：15189182
> 
> 赞同：4
> 
> 时间：2013-03-03T18:30:11.280
> 
> 标签：css, internet-explorer, transparency

我有一个链接，出于几个原因，我通过在其顶部显示一个透明 div 来禁用它。这在 FF 和 Chrome 上工作得很好，但在 IE 上链接仍然是可点击的。如果我向 div 添加背景颜色（透明除外），则链接不可点击，因为它应该是。

关于如何实现这一目标的任何想法？

这是一个例子：http: [//jsfiddle.net/GdEak/7/](http://jsfiddle.net/GdEak/7/)

```
<div id=container>
    <div class='disabled'></div>
    <a href="#">Some link</a>
</div> 
```

CSS：

```
#container{
  position:relative;
}
.disabled{
  width:200px;
  height:30px;
  position:absolute;
  top:0;
  left:0;
}
a{
  display:inline-block;
  width:200px;
  height:30px;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T18:33:24.733

Internet Explorer 不能很好地处理“空”元素。由于没有背景和内容，IE 将元素视为不存在，因此您仍然可以与下面堆叠的任何内容进行交互。

为了解决这个问题，您可以使用透明 png 作为背景：

```
background: url(/images/transparent.png) repeat scroll 0 0 transparent; 
```

但是关于可用性的问题 - 如果链接不可点击，链接是否应该仍然存在，或者看起来相同？如果我单击我认为是链接的链接并且它不起作用，我会担心页面没有正确加载。

### 编辑

如果出于某种原因，您反对专门为此解决方案创建图像，您还可以使用：

```
background: transparent 0 0 repeat scroll url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBR‌​AA7"); 
```

这将使用数据 uri 用透明 gif 填充背景，并且支持早在 IE8 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-14T04:16:12.487

上面的答案让我头疼，但在较新的浏览器中会引发错误。这条类似的行没有：

```
background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:37:03.823

`pointer-events: none`您可以通过简单地将样式添加到锚元素来禁用链接。然而，IE 也不完全支持这一点，更多信息请参见[此处](https://stackoverflow.com/questions/5855135/css-pointer-events-property-alternative-for-ie)。

您也可以使用 javascript 将事件处理程序添加到锚点并返回 false；使用 jQuery 这看起来像这样：

```
$('a').click(function (e) {return false}); 
```

# coffeescript - 按排序顺序遍历对象中的键值对

> ID：15189189
> 
> 赞同：3
> 
> 时间：2013-03-03T18:30:40.937
> 
> 标签：coffeescript, underscore.js

我想迭代一个对象

```
obj = c: 5, a: 10, b: 15 
```

基于键的顺序，例如

```
_.each obj, (value, key) -> console.log(key, value) 
```

得到这个输出

```
# a 10
# b 15
# c 5 
```

在 CoffeeScript + underscore 库中执行此操作的最短方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T18:44:13.573

```
for k in _.keys(obj).sort()
  console.log k, obj[k]
  # you may also bind the value to a local var for convenience:
  # v = obj[k] 
```

或单行形式：`console.log k, obj[k] for k in _.keys(obj).sort()`

# ruby-on-rails - 如何使用我在 Rails 中创建的关联？

> ID：15189191
> 
> 赞同：0
> 
> 时间：2013-03-03T18:30:47.790
> 
> 标签：ruby-on-rails

这感觉应该很明显；抱歉，如果是的话。

我在 rails 中创建了两个脚手架：`Teams`和`Players`. 得到那个工作没问题。不过，我想将它们链接起来，因为 a`Team`有很多`Players`并且`Players`属于 a `Team`。所以我进入了各自的模型并创建了关联。我四处阅读，发现我必须在其中创建一个新列`Players`来容纳外键，所以我通过迁移来做到这一点；我调用它`team_id`并更新了我创建的 5 条记录中的 4 条，以提供`1`. 基本上，[这个答案](https://stackoverflow.com/a/4823335/945370)说明了什么。

我现在不明白的是，我该如何使用该关联？那么，为了获得一个具体的例子，我将如何根据该团队的 ID列出所有`Players`in的 show.html.erb 模型？`Team`我需要以`Players`某种方式调用我的控制器吗？

* * *

架构：

```
ActiveRecord::Schema.define(:version => 20130303052538) do

  create_table "players", :force => true do |t|
    t.string   "position"
    t.integer  "number"
    t.integer  "grade"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
    t.string   "first_name"
    t.string   "middle_name"
    t.string   "last_name"
    t.integer  "team_id"
  end

  create_table "teams", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

end 
```

模型（为简洁起见，将它们集中在一起）：

```
class Player < ActiveRecord::Base
  attr_accessible :grade, :first_name, :middle_name, :last_name, :number, :position, :team_id

  # Relationships
  belongs_to :team
end

class Team < ActiveRecord::Base
  attr_accessible :name

  # Relationships
  has_many :players
end 
```

我的`Team`控制器的一部分：

```
class TeamsController < ApplicationController

  def show
    @team = Team.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @team }
    end
  end

end 
```

看法：

```
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @team.name %>
  <%= @team.id %>
</p>
<p>
  <b>Players:</b>
  # I want to list them here.

</p>

<%= link_to 'Edit', edit_team_path(@team) %> |
<%= link_to 'Back', teams_path %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:34:42.867

您可能想在这里阅读文档：http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

您可以通过以下方式访问玩家的团队：

```
player.team 
```

您可以通过以下方式访问球队的球员：

```
team.players 
```

然后在视图中遍历这些玩家

```
team.players.each do |player|

end 
```

`belongs_to`您在模型中调用的类方法`has_many`将为您生成方法。

例如，`belongs_to :team`将生成：`team`, `team=(team)`, `build_team(attributes)`,`create_team(attributes)`等...

# c++ - C ++ STL：为什么没有upper_bound 等效项可以检索小于特定键的最大元素？

> ID：15189194
> 
> 赞同：4
> 
> 时间：2013-03-03T18:30:59.183
> 
> 标签：c++, stl, binary-search-tree

通常，STL 是为速度而构建的。但是，map 和 set 数据结构上只有 upper_bound 和 lower_bound，没有操作来检索最大 key 小于输入 key 的条目`k`。为什么是这样？我知道我可以简单地执行 an`lower_bound`并执行 a`--it`来检索它，但是根据数据结构，立即搜索正确的条目而不是搜索另一个然后返回一步可能更有效。

例如，`std::map`使用红黑树，即二叉搜索树。如果返回的`upper_bound`元素是大于根的最小元素，则`--it`必须走回根，查询 O(log n) 额外成本。

如果这是 Java，我会接受设计决策。但是，STL 是为实现最高速度而构建的，那么为什么忽略此操作呢？

**澄清：我不是在谈论`std::upper_bound`哪个可以采用另一个比较器，而是`std::map`and的方法`std::set`。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T19:36:19.160

首先，要获得小于键的最大元素，您必须执行以下操作：

```
auto it = m.lower_bound(k);
--it; 
```

这意味着找到不小于的第一个元素`k`并向后移动一个元素。如果有一个函数来执行此操作，例如 ，`auto it = m.last_less_element(k);`则该函数必须以*完全相同的方式*实现，即找到不少于第一个元素`k`并向后移动一次。这是因为没有办法知道没有大于但仍小于的元素，`k`除非您找到不小于 的第一个元素`k`。因此，拥有这样的功能并没有性能提升，它只是一种语法快捷方式/便利。即使这样，与查找本身的成本相比，返回一次的成本也可以忽略不计。

其次，如果您想从开头迭代到最后一个小于键的元素，那么您可以这样做：

```
for(auto it = m.begin(); it != m.lower_bound(k); ++it) { /* ... */ }; 
```

换句话说，`lower_bound`and`upper_bound`函数的制作方式，它们是标准迭代器范围的惯用语，这非常重要。仅在这一点上，不包含一个特殊函数是合理的，因为它会在or类`last_less_element`的接口中引入一个反惯用函数，并且没有性能提升。所以，它会引起痛苦，但没有收获。`map``set`

最后一点，二叉搜索树（如红黑树）主要用于查找操作，具有按顺序遍历的边际优势。它们不是为按顺序遍历而简化的，如果这是您想要执行的主要操作，则不应使用它们。当主要操作是查找操作时，有序映射或集合很有用，*偶尔*需要按顺序遍历。在相反的情况下应考虑其他替代方案（例如，排序向量、树布局*à la* von Emde Boas 等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T18:36:46.683

因为您`std::lower_bound`只需反转谓词即可完全按照您的意愿行事。

# php - Ajax 发布表单不加载

> ID：15189196
> 
> 赞同：0
> 
> 时间：2013-03-03T18:31:07.167
> 
> 标签：php, jquery, session

这有点复杂，所以请耐心等待...

我正在构建一个网页，用户可以在其中在地图上添加不同的位置。该应用程序使用谷歌地图 api。

添加的位置通过 ajax 发送到 php 页面，它们存储在会话变量中。然后另一个功能打印出位置，以便用户可以看到他/她添加的位置列表。

当用户添加了 x 个位置时，他们命名了他们创建的地图，填写表格，然后将 fom 发送到存储位置的同一 php 页面。发送表单时，位置以及表单信息都存储在数据库中。

一切正常，但用户还可以选择在创建地图时通过单击地图上的位置标记来删除位置。这个点击事件发送一个带有位置的 lat 和 lgn 的 ajax 帖子，然后从保存位置信息的会话中删除这个特定的位置。

然后该位置也会从添加了位置的列表中消失。

这也可以正常工作，但是当我尝试保存表单（也通过 ajax）时，什么也没有发生。表单也通过 ajax 发送。

所以，总结一下：如果我在发送表单之前不删除任何位置，一切都会正常工作，但如果我删除一个位置，那么它就不起作用。

如果有人可以指导我正确了解问题所在的方向，我当然会提供示例代码。

编辑

好的，这是我添加两个位置时的响应： 由于谷歌地图的原因，响应被编码为 xml。

```
<markers><marker titel="Test" comment="Test" lat="59.3082270911156" lng="18.060922622680664"      name="" type="Parkering" score="3" /><marker titel="test2" comment="test2" lat="59.3082034749666"      lng="18.060929998755455" name="" type="Parkering" score="5" /></markers> 
```

如果我现在保存地图+表格，它将正常工作。

这是我从地图中删除标记后的响应：

```
 <markers><marker titel="Test" comment="Test" lat="59.3082270911156" lng="18.060922622680664"    name="" type="Parkering" score="3" /></markers> 
```

对我来说它看起来很好。

这是当用户单击标记时触发的功能（即删除它）

```
 function close(marker2, lati, lngi, infoWindow, map) {

    google.maps.event.addListener(marker2, "click", function() {
    marker2.setMap(null);
    infoWindow.close(map, marker2);

    $.ajax({
                type: 'GET',
                url: 'test3.php',
                data: "lati=" + lati + "&lngi=" + lngi,
                success: function(data) {

                printResult(data); 

                $('#send').unbind();

                }
        }); 

        });

    }; 
```

这是从会话中删除位置的函数：

```
 $val1 = $_GET['lati'];

 $val2 = $_GET['lngi'];

 $newarray = removeElementWithValue($_SESSION['infomarker'], "lat", "lng", $val1, $val2);

 function removeElementWithValue(&$array, $key1, $key2, $value1, $value2){
      foreach($array as $subKey => $subArray){
      if($subArray[$key1] == $value1) {
      if($subArray[$key2] == $value2) 

         unset($array[$subKey]);

      }

 }
 return $array;

 } 
```

我没有收到 js 错误，正如您在上面看到的删除功能工作正常，我得到了一个健康的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:37:41.950

听起来您已经发现了问题，因为在删除后处理保存的数据和/或 PHP 端点存在错误。

如果我要查看您的代码，以下是我将如何调试它：

1.  打开我的网络检查器的网络选项卡并检查通过 AJAX 发送的数据以确保结构正确。
2.  在 PHP 端点中，我会`var_dump($_POST)`检查输出。这将通过网络发送，您可以在 Web 检查器中看到输出。
3.  打开控制台检查任何 JS 错误。

如果你做了这三件事，你很可能会发现这个错误。祝你好运。

# ruby - 来自 Gemfile 的未初始化常量

> ID：15189198
> 
> 赞同：0
> 
> 时间：2013-03-03T18:31:11.230
> 
> 标签：ruby, require, gemfile

只是在玩 Ruby 并有这个非常基本的例子

`runner.rb`：

```
require "bundler/setup"
include Mongo

mongo_client = MongoClient.new("localhost", 27017)
#mongo_client.database_names # lists all database names
#mongo_client.database_info.each { |info| puts info.inspect }

db = mongo_client.db("james_safety")

coll = db.collection("safety")

puts "above"

10.times { |i| coll.insert("i" => i) }

puts "Hello World" 
```

`Gemfile`：

```
source :rubygems
gem 'mongo' 
```

`bundle`输出：

```
Using bson (1.8.2) 
Using mongo (1.8.2) 
Using bundler (1.2.2) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

当我尝试运行时`ruby runner.rb`，我收到此错误：

```
/Users/Tyler/Development/Ruby/JamesSaftey/runner.rb:2:in `<top (required)>': uninitialized constant Mongo (NameError)
    from -e:1:in `load'
    from -e:1:in `<main>' 
```

如果我`require 'mongo'`在`runner.rb`，它工作得很好（我在 Gemfile 之外安装了 gem）。

我也试过了`require 'rubygems'`。没有不同。

我只是错误地配置了我的 ruby​​ 文件以使用 Gemfile 吗？

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:38:04.470

即使 gem 在 gemfile 中，您也需要它，或者在您的 ruby​​ 文件中执行以下操作，以便所有捆绑的 gem 都是必需的：

```
Bundler.require(:default) 
```

[更多信息在这里](http://gembundler.com/rationale.html)

# java - 我想捕获数据包，但代码给出错误

> ID：15189202
> 
> 赞同：2
> 
> 时间：2013-03-03T18:31:20.403
> 
> 标签：java, ubuntu

当我在 ubuntu 2.04 上的 netbean 中运行此代码时，它给出了下面给出的错误

```
 import java.io.IOException;
    import jpcap.JpcapCaptor;
    import jpcap.NetworkInterface;
    import jpcap.NetworkInterfaceAddress;
    import jpcap.packet.Packet;

      public class JavaApplication1 {
      public static void main(String[] args){
      printNetworkInterfaces();
  captureFromNetworkInterface();
                                       }

  public static void printNetworkInterfaces(){
    System.out.println("Obtain the list of network interfaces");

      NetworkInterface[] devices = JpcapCaptor.getDeviceList();
         for (int i = 0; i < devices.length; i++) {
          System.out.println(i+": "+devices[i].name + "("  
               +devices[i].description+")");
       System.out.println(" datalink: "+devices[i].datalink_name + "(" +     
       devices[i].datalink_description+")");

    System.out.print(" MAC address:");
    for (byte b : devices[i].mac_address)
    System.out.print(Integer.toHexString(b&0xff) + ":");
     System.out.println();
    for (NetworkInterfaceAddress a : devices[i].addresses)
    System.out.println(" address:"+a.address + " " + a.subnet +""+ a.broadcast);
    }
    }

     public static void captureFromNetworkInterface(){
     NetworkInterface[] devices = JpcapCaptor.getDeviceList();
     int index=0;  

//Open an interface with openDevice(NetworkInterface intrface, int snaplen, boolean 

     promics, int to_ms)
    try {
        JpcapCaptor captor=JpcapCaptor.openDevice(devices[index], 65535,  
                    false, 20);
        for(int i=0;i<10;i++){

            //capture a single packet and print it out
            Packet packet = captor.getPacket();
            if(packet!=null)
            {
                System.out.println("Packet " + i + ": ");
                System.out.println("     length - " + packet.len);
                System.out.println("     captured timestamp - " + 
                                    packet.sec);
            }
        }
        captor.close();
    } catch (IOException e) {
    }

           }*/
     } 
```

错误是

没有 /usr/lib/jvm/java-6-openjdk-i386/jre/lib/netx.jar 的文件

没有 /usr/lib/jvm/java-6-openjdk-i386/jre/lib/plugin.jar 的文件

# css - 图像上的 CSS 箭头（不使用边框）

> ID：15189205
> 
> 赞同：3
> 
> 时间：2013-03-03T18:31:36.267
> 
> 标签：css, mask, css-shapes, pseudo-element

我正在尝试找出一种方法来使用将箭头附加到标头图像的底部，[就像这样](http://d.pr/i/hg6q)。我已经看到了许多关于如何使用 CSS3 创建箭头的方法，但我发现它们几乎总是使用边框属性来实现它。通常是这样的：

```
#demo {
   width: 100px;
   height: 100px;
   background-color: #ccc;
   position: relative;
   border: 4px solid #333;
 }

#demo:after {
   border-width: 9px;
   border-left-color: #ccc;
   top: 15px;
 } 
```

我试图找到一种方法来创建这种面具形状，除了主要艺术之外没有任何图像。有没有人做到这一点？如果有人有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T22:38:26.223

如果您正在寻找随图像调整大小的箭头，那么可以。

# [***演示***](http://codepen.io/thebabydino/full/opbCI)

**HTML**：

```
<div class='head'></div>
<div class='arrow'></div> 
```

**CSS**：

```
.head {
  margin: 0 auto;
  width: 0; height: 0;
  /* take into account ratio of the image but with 20% less for the height */
  padding: 12.5% 30%;
  background: url(background.jpg);
  background-size: cover;
}
.arrow {
  overflow: hidden;
  position: relative;
  margin: -4.9% auto;
  padding: 4.42%; /* 25% of head's padding * sqrt(2) */
  width: 0;
  transform: rotate(45deg);
  background: red;
}
.arrow:after {
  position: absolute;
  bottom: 50%; left: 50%;
  margin: -70.71%; /* half of the width or height */
  width: 141.42%; height: 141.42%; /* sqrt(2)*141.42% */
  transform: rotate(-45deg);
  background: url(background.jpg) 50% 100%;
  background-size: 480% 250%; /* take into account ratio of the image */
  content: '';
} 
```

# ruby-on-rails - 我不想再将 gem 安装到 ./vendor

> ID：15189206
> 
> 赞同：0
> 
> 时间：2013-03-03T18:31:49.490
> 
> 标签：ruby-on-rails, gem, bundler

我卸载了 bundler gem 并重新安装了它，清理了我所有的 gem，删除了 vendor/ 目录并运行了另一个 bundle 命令。`--path vendor`即使我第二次没有指定，我所有的宝石仍然进入供应商。是否有其他`--path`选项可以将其设置为默认值？Rails 应用程序将它们安装的 gem 放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:37:00.623

您刚刚发现了[rvm](https://rvm.io/)的原因之一。rvm 将创建存储在您的用户路径中的 gemset，然后您可以在不再需要它们时对其进行版本、更新或清理。

这一切都在应用程序路径之外完成，因此您可以跨应用程序重复使用相同的 gem 版本，或创建特定于应用程序的新 gemset。浏览他们的文档，一旦你开始使用它，你会想知道之前没有它你是如何相处的。

# iphone - 视口被 iOS 模拟器忽略

> ID：15189208
> 
> 赞同：1
> 
> 时间：2013-03-03T18:31:58.647
> 
> 标签：iphone, ios-simulator, width, viewport

在网上搜索了整个下午的解决方案后，我在这里问你。我的视口问题与 StackOverflow 上提到的其他问题的主要区别在于我只能在纵向模式下访问它（因此没有旋转或横向模式）。这是我的问题：

我创建了一个网站，其基本结构包含三列：分别为 44pt-（div-element）、232pt-（输入元素）和 44pt-width（div-element）。所以我的最大页面宽度等于 320pt，所有元素的高度到现在 <250pt。

如果我现在在 iOS 模拟器上渲染页面（通过 Mac 上的 XCode），这应该与 iPhone 的行为相同，它不会正确缩放页面。我已经尝试了以下选项：

```
[no meta-tag] 
```

显示大约 240% 的宽度

```
<meta name="viewport" content="width=device-width; initial-scale=1.0;" /> 
```

显示大约 70% 的宽度

```
<meta name="viewport" content="width=device-width;" /> 
```

专注于第一个具有“width = 44pt”的div

```
<meta name="viewport" content="width=320; initial-scale=1.0;" /> 
```

显示大约 70% 的宽度

```
<meta name="viewport" content="width=320;" /> 
```

专注于第一个具有“width = 44pt”的div

```
<meta name="viewport" content="initial-scale=1.0;" /> 
```

显示大约 70% 的宽度

```
<meta name="viewport" content="initial-scale=1.0;maximum-scale=1.0" /> 
```

显示大约 70% 的宽度

结果保持不变：网页曾经太小（缩小太多），曾经太大（放大太多）。只有通过将“初始比例”值调整到 0.75 左右，我才能得到大约所需的结果。

iPhone-Safari 的错误是什么？我应该为元视口标签使用哪些参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:19:03.160

很久以前，我终于找到了一个解决方案，并想也许有一天其他人会感兴趣：我现在使用像素（“px”），而不是在我的 css 文件中以点（“pt”）定义大小。现在可以根据需要进行渲染。

# java - Java有惰性求值吗？

> ID：15189209
> 
> 赞同：33
> 
> 时间：2013-03-03T18:31:58.590
> 
> 标签：java, lazy-evaluation

我知道 Java 在这种情况下具有智能/惰性评估：

```
public boolean isTrue() {
    boolean a = false;
    boolean b = true;
    return b || (a && b); // (a && b) is not evaluated since b is true
} 
```

但是关于：

```
public boolean isTrue() {
    boolean a = isATrue();
    boolean b = isBTrue();
    return b || a;
} 
```

`isATrue()`即使`isBTrue()`返回 true也会调用？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-03T18:34:57.960

好吧，就语言而言 - 是的，这两个函数都被调用了。

如果您将函数重写为：

```
public boolean isTrue() {
    return isBTrue() || isATrue();
} 
```

如果第一个函数为真，则不会调用第二个函数。

* * *

但这是*短路评估*，不是*懒惰评估*。惰性评估案例看起来像这样：

```
public interface LazyBoolean {
    boolean eval();
}

class CostlyComparison implements LazyBoolean {
  private int a, b;

  public CostlyComparison(int a, int b) { 
    this.a=a; 
    this.b=b; 
  }

  @Override 
  public boolean eval() {
    //lots of probably not-always-necessary computation here
    return a > b;
  }
} 

public LazyBoolean isATrue() {
  return new CostlyComparison(10,30);  //just an example
}

public boolean isTrue() {        // so now we only pay for creation of 2 objects
    LazyBoolean a = isATrue();   // but the computation is not performed; 
    LazyBoolean b = isBTrue();   // instead, it's encapsulated in a LazyBoolean
    return b.eval() || a.eval(); // and will be evaluated on demand;
                                 // this is the definition of lazy eval.
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-03T18:33:49.257

在 Java（和其他类似 C 的语言）中，这被称为[*短路评估*](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。^*

是的，在第二个例子`isATrue`中总是被调用。也就是说，除非编译器/JVM 可以确定它没有可观察到的副作用，在这种情况下它可能会选择优化，但在这种情况下您无论如何都不会注意到差异。

* * *

[*~~两者截然不同；前者本质上是一种优化技术，而后者是语言要求的，可以影响可观察的程序行为。~~

我最初建议这与惰性评估完全不同，但正如@Ingo 在下面的评论中指出的那样，这是一个可疑的断言。人们可能会将 Java 中的短路运算符视为惰性求值的一种非常有限的应用。

但是，当函数式语言要求惰性求值语义时，通常是出于完全不同的原因，即防止无限（或至少是过度）递归。] 

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-05-31T10:37:01.530

不，Java 只对用户定义的方法进行热切评估。正如您所注意到的，一些 Java 语言结构实现了非严格评估。其他包括`if`, `?:`, `while`。

我曾经了解到[1] 关于“进行惰性评估”的含义存在一些混淆。首先，惰性求值意味着按需*调用*。Java 根本没有这样的东西。然而，有一个普遍的趋势（我个人不鼓励）放宽惰性评估的定义，也包括*按名称调用的*评估。诸如`&&`在按需调用与按名称调用评估下无法区分的功能；无论如何都是一样的，这使事情变得模糊不清。

考虑到这种松动，一些进一步的反驳声称 Java 具有以下惰性评估：

```
interface Thunk<A> {
  A value();
} 
```

然后，您可以`&&`像这样编写用户定义：

```
boolean and(boolean p, Thunk<Boolean> q) {
  return p && q();
} 
```

然后提出声称这表明 Java 具有惰性求值。然而，即使在松散的意义上，这*也不是懒惰的评价。*这里的区别在于Java的类型系统没有统一类型`boolean`/`Boolean`和`Thunk<Boolean>`. 尝试将一个用作另一个将导致*type-error*。在没有静态类型系统的情况下，代码仍然会失败。正是这种缺乏统一性（静态类型与否）回答了这个问题；不，Java 没有用户定义的惰性求值。当然，它可以像上面那样模拟，但这是从图灵等价得出的一个无趣的观察。

诸如 Scala 之类的语言具有按名称调用评估，它允许用户定义的`and`函数等效于常规`&&`函数（考虑终止。参见 [1]）。

```
// note the => annotation on the second argument
def and(p: Boolean, q: => Boolean) =
  p && q 
```

这允许：

```
def z: Boolean = z
val r: Boolean = and(false, z) 
```

请注意，这个简短的程序片段通过提供一个值来*终止。*它还将类型的值*统一*`Boolean`为按名称调用。因此，如果你赞同惰性求值的松散定义（同样，我不鼓励这样做），你可能会说 Scala 具有惰性求值。我在这里提供 Scala 作为一个很好的对比。我建议查看 Haskell 以获得真正的惰性评估（按需调用）。

希望这可以帮助！

[1] [http://blog.tmorris.net/posts/a-fling-with-lazy-evaluation/](http://blog.tmorris.net/posts/a-fling-with-lazy-evaluation/)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-09-27T14:40:32.693

SE8 (JDK1.8) 引入了[Lambda 表达式](http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)，可以让惰性求值更加透明。考虑以下代码的 main 方法中的语句：

```
@FunctionalInterface
public interface Lazy<T> {
   T value();
}

class Test {
   private String veryLongMethod() {
      //Very long computation
      return "";
   }

   public static <T> T coalesce(T primary, Lazy<T> secondary) {
      return primary != null? primary : secondary.value();
   }

   public static void main(String[] argv) {
      String result = coalesce(argv[0], ()->veryLongMethod());
   }
} 
```

被调用的函数 coalesce 返回第一个给定的非空值（如在 SQL 中）。其调用中的第二个参数是 Lambda 表达式。仅当 argv[0] == null 时才会调用方法veryLongMethod()。在这种情况下，唯一的有效负载是`()->`在需要延迟评估的值之前插入。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-30T10:33:41.817

为简单起见，您可以使用 java 8 中的 Supplier 接口，如下所示：

```
Supplier<SomeVal> someValSupplier = () -> getSomeValLazily(); 
```

然后在代码中你可以拥有：

```
if (iAmLazy) 
  someVal = someValSupplier.get(); // lazy getting the value
else 
  someVal = getSomeVal(); // non lazy getting the value 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-17T16:57:35.670

除了这个问题线程中提到的内容之外，只想添加以下内容，来自 JVM 上的 Oracle 文档

> Java 虚拟机实现可以选择在使用时单独解析类或接口中的每个符号引用（“延迟”或“延迟”解析），或者在验证类时一次全部解析（“渴望”或“静态”分辨率）。这意味着在某些实现中，在初始化类或接口之后，解析过程可能会继续。

[参考](https://docs.oracle.com/javase/specs/jvms/se9/html/jvms-5.html)

并且作为具有惰性实现的类的示例是 Stream，这是来自 Oracle Documentation on Stream

> 流是懒惰的；仅在发起终端操作时才对源数据进行计算，并且仅在需要时消耗源元素。

[参考](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html)

话虽如此，如果您执行以下操作，则不会显示任何内容。除非你添加启动器。

```
Steam.of(1, 2, 3, 4, 5).filter(number -> {
   System.out.println("This is not going to be logged");
   return true;
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-03T18:39:57.920

Yes`isATrue()`将被调用，因为您在行中显式调用它`boolean a = isATrue();`

`isBTrue()`但如果返回，则不会在以下情况下调用它`true`：

```
public boolean isTrue() {
    return isBTrue() || isATrue();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-03T18:33:36.003

> 如果 isBTrue() 返回 true，是否调用 isATrue()？

是的，两者都被调用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-03T18:33:51.970

不，不是的。`isBTrue()`将被调用，无论`isATrue()`. 您可以通过编写这样的程序自己验证这一点，并在每个方法中使用 print 语句。

# java - Java：我可以在不使用类静态变量的情况下通过每次调用保留来自事件方法的信息吗？

> ID：15189211
> 
> 赞同：0
> 
> 时间：2013-03-03T18:32:06.673
> 
> 标签：java, oop, events

在任何事件方法（即在事件上调用的方法）中，除了制作一个保留旧信息的类静态变量之外，我将如何以任何其他方式保留上一次调用的信息？

例子：

```
Class X {
   static boolean ex = false;
   static int calledTimes;
   void OnClickEvent() {
    if(calledTimes<=5)
     {
    calledTimes++; 
     ex = true;
     }
    else
    ex = false;
    }
} 
```

除了这个静态标志之外，还有什么方法可以保留信息吗？就我而言，我为每次调用保留了很多信息，并且我不想要太多的类变量。

有任何想法吗 ？

**更多信息：我在遍历文本文件中的每一行时调用了一个方法。** 我需要一个不仅适用于 gui 事件的通用解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:36:04.807

如果您有一个 (Event)Listener 类实例，它侦听某些调用（例如`onClickEvent()`），那么即使*实例属性*就足够了，您不需要静态属性。

实例属性也被保留，因为侦听器调用是针对同一个对象实例进行的。

```
Class X {
private boolean ex = false;
private int calledTimes;

public void onClickEvent() {
    if(calledTimes<=5) {   
        calledTimes++; 
        ex = true;
    }
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T18:37:07.227

使用实例变量而不是类变量并使用实例来操作它们怎么样？这样实例可以以实例变量的形式保持状态。

如果你想保持这个类定义干净，你可以维护另一个对象作为实例变量来保留状态并使用访问器访问各个变量。

看一下这个示例实现：

```
public class X {

    private State state;

    // constructor to instantiate state

    void OnClickEvent() {
        if (state.getCalledTimes() <= 5) {
            state.incrementCalledTimes();
            state.setEx(true);
        } else
            state.setEx(false);
    }

} 
```

`State`以及维护对象信息的类：

```
public class State {

    private boolean ex;
    private int calledTimes;

    public void setEx(boolean ex) {
        this.ex = ex;
    }

    public int getCalledTimes() {
        return calledTimes;
    }

    public void incrementCalledTimes() {
        calledTimes++;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:37:11.973

通过将事件侦听器分离到不同的类中，您可以指定该类中的字段。例如，使用 MouseListener 接口：

```
public class Listener implements MouseListener {

// Created a class that implements the MouseListener Interface.
// Because this is my own class I can specify some instance variables.

private boolean hasBeenClicked;

public Listener()
{
    this.hasBeenClicked = false;
}

@Override
public void mouseClicked(MouseEvent arg0) {
    if(hasBeenClicked)
    {
        System.out.println("I've already been clicked!");
                    // A Click has already occurred.
    }
    else
    {
        hasBeenClicked = true;
                    // A click has not occurred, so setting the value to true.
    }

} 
```

# django - 为什么在安装 django 压缩器的情况下运行 collectstatic 会擦除我的文件？

> ID：15189213
> 
> 赞同：1
> 
> 时间：2013-03-03T18:32:21.900
> 
> 标签：django, django-staticfiles, django-compressor

我最近在我的 Django 应用程序 (1.4.1) 上安装了 Django Compressor (1.2)。在我安装 django-compressor 之前，当我运行 collectstatic 时，它会通过 boto 将我的静态文件完美地上传到 S3，而不会在本地其他任何地方复制它们。但是，当我安装 django 压缩器时，运行 collectstatic ：

A) 将我的静态文件上传到 S3，但用空文件替换所有本地版本。

B) 将我的静态文件上传到 S3，但将本地版本复制到我的根文件夹。

对于结果 A，我有

```
COMPRESS_ROOT = os.path.join(os.path.abspath(os.path.dirname(__file__)), 'proj/static',) 
```

对于结果 B，我有

```
STATIC_ROOT = ''

COMPRESS_ROOT = STATIC_ROOT 
```

我理解为什么 B 将文件复制到根目录，因为这是 STATIC_ROOT 设置的，但是如果我注释掉 COMPRESS_ROOT，collectstatic 会恢复正常（也就是不修改本地任何内容，只是上传到 S3）。我原以为 COMPRESS_ROOT 不会对 collectstatic 产生任何影响，因为 STATIC_ROOT 无论如何都保持不变。显然情况并非如此。

作为一种解决方法，我一直在执行以下操作：

*   当我想运行 python manage.py compress 时，我将 COMPRESS_ROOT 设置如下：

    COMPRESS_ROOT = os.path.join(os.path.abspath(os.path.dirname( **file** )), 'proj/static',)

*   当我想运行 python manage.py collectstatic 时，我注释掉 COMPRESS_ROOT，它将 collectstatic 返回到它的预 django-compressor 功能。

显然这是一个 hack，我想弄清楚如何让他们玩得很好。任何建议将不胜感激。

相关代码如下：#settings.py

```
STATIC_ROOT = ''
STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(os.path.abspath(os.path.dirname(__file__)),'proj/static',),
)

AWS_STORAGE_BUCKET_NAME = #bucket-name
S3_URL = 'https://%s.s3.amazonaws.com' % AWS_STORAGE_BUCKET_NAME
STATIC_DIRECTORY = '/static/'
STATIC_URL = S3_URL + STATIC_DIRECTORY

COMPRESS_ENABLED = True
COMPRESS_OFFLINE = True
COMPRESS_URL = STATIC_URL
#COMPRESS_ROOT = STATIC_ROOT
#COMPRESS_ROOT = os.path.join(os.path.abspath(os.path.dirname(__file__)), 'proj/static',)
COMPRESS_STORAGE = 'travel.proj.services.storage.CachedS3BotoStorage'
STATICFILES_STORAGE = 'travel.proj.services.storage.CachedS3BotoStorage'
AWS_LOCATION = 'static'

COMPRESS_JS_FILTERS = [
    'compressor.filters.template.TemplateFilter',
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T11:44:31.133

我认为这可能与 Django 压缩器有关，而不是与您的存储设置有关。

Django-compressor 需要一种方法来跟踪文件和更改，我认为它不能在远程存储上做到这一点。因此，对于使用 django-compressor 的远程存储，包的作者建议对默认`S3BotoStorage`类进行子类化，如此[处](http://django_compressor.readthedocs.org/en/latest/remote-storages/#using-staticfiles)所述。

有关更多信息，也许[这个问题](https://stackoverflow.com/questions/10316131/configuring-django-compressor-with-remote-storage-django-storage-amazon-s3?rq=1)可以帮助你。

# android - Android程序无法正确重启

> ID：15189214
> 
> 赞同：0
> 
> 时间：2013-03-03T18:32:30.287
> 
> 标签：android

我有这个程序

```
public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);        
       record();
       play();          
    }
} 
```

当我执行它时

1）录制我的声音

2)播放我的声音

3) 显示默认 XML 文件中的“Hello World, MyActiviy”。

当我点击主页按钮然后重新启动程序时，它会直接进入＃3显示单词而不录制和播放我的声音

只有当我去设置强制在后台停止程序时，程序才会正确运行。

我的问题如何正确终止程序以便正确执行 #1 到 #3 序列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:38:02.403

这是因为 Activity 在进入后台时不会被销毁，因此`onCreate()`当 Activity 再次获得焦点时不会调用该方法。

`onResume()`如果要在每次活动进入前台时执行，则必须将代码移入方法中。

有关更多信息，请参阅[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)图。

# android - 无法在 Eclipse 中执行 ctrl + 单击？

> ID：15189217
> 
> 赞同：1
> 
> 时间：2013-03-03T18:32:44.203
> 
> 标签：android, eclipse

我不能在 Eclipse 中使用 cmd + click，如果我按下 cmd 并将鼠标移到任何表达式上，我会得到一个弹出显示，例如图片，但我不能点击。有谁知道解决方案？感谢和问候

![在此处输入图像描述](../Images/404f7b27b52c335aadc5adb10b64f670.png)

# java - 为什么我的列表不刷新？

> ID：15189227
> 
> 赞同：0
> 
> 时间：2013-03-03T18:33:28.710
> 
> 标签：java, android, list

我有一个文件列表，当用户保存文件时，我想刷新列表以便显示新文件。这是我尝试过的。

```
private IconifiedTextListAdapter itla = new IconifiedTextListAdapter(this); 
```

...

```
private void saveAs(){
                AlertDialog.Builder alert = new AlertDialog.Builder(this);

                alert.setTitle("Save as");
                alert.setMessage("(Will be saved in the current working directory)");

                // Set an EditText view to get user input 
                final EditText input = new EditText(this);
                alert.setView(input);

                alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                  String value = input.getText().toString();
                  String tmpText = et.getText().toString();

                  try {
                    File tempfile = new File(currentDirectory, value);
                    FileWriter writer = new FileWriter(tempfile);
                      writer.write(tmpText);
                      writer.flush();
                      writer.close();
                      changed=false; 
                      itla.notifyDataSetChanged();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                e.printStackTrace();
                }
                  }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T15:23:29.733

```
private void saveAs(final Intent intent) {
    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("Save as");
    alert.setMessage("(Will be saved in the current working directory)");

    // Set an EditText view to get user input
    final EditText input = new EditText(this);
    input.setText(ending);
    alert.setView(input);

    alert.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            String value = input.getText().toString();
            String tmpText = et.getText().toString();
            if (!value.contains(".")) {
                value = value + ending;
            }

            try {
                File tempfile = new File(currentDirectory, value);
                FileWriter writer = new FileWriter(tempfile);
                writer.write(tmpText);
                writer.flush();
                writer.close();
                changed = false;
                exists = true;
                String newFile = new File(currentDirectory + "//" + value)
                        .getPath();
                currentFile = new File(newFile);
                fill(currentDirectory.listFiles());
                Log.i("saveAs", currentFile.getPath());
                return;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }); 
```

# emacs - Clojure 的 IDE - 逆时针（Eclipse）与 Emacs。与 Emacs 相比，逆时针方向缺少哪些（如果有）功能？

> ID：15189229
> 
> 赞同：4
> 
> 时间：2013-03-03T18:33:35.337
> 
> 标签：emacs, clojure, counterclockwise

我想知道与 Emacs 相比，Eclipse 的逆时针插件有哪些限制。Eclipse 不会提供哪些 Lisp（和 Clojure）魔法？

-- 更新 -- 我知道 Emacs 会有更多的特性、快捷方式、各种复杂的键绑定，但我对特定的 Lisp/Clojure 东西感兴趣。例如，如果我不能在文件中使用正则表达式搜索，那很好，但如果我不能在 Eclipse 中使用 REPL，那对我来说将是一个交易破坏者——它是核心功能。因此，为了扩展我的问题，与 Emacs 相比，REPL 在逆时针方向上是否功能齐全？我不介意，如果缺少一些非常高级的功能，那只是为了方便，但如果我不能做某事，我会直接跳到 Emacs。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T00:14:58.237

逆时针具有良好的 Clojure 开发体验所需的一切。

我觉得最有用的东西（不能没有！）

*   功能齐全的 REPL
*   Paredit模式/自动paren平衡
*   REPL 和编辑器中匹配的彩虹括号
*   REPL 和编辑器中的语法高亮显示
*   与 Eclipse / Maven 集成以进行依赖管理
*   许多键盘快捷键（参见：[https](https://code.google.com/p/counterclockwise/wiki/EditorKeyBindingsFeatures) ://code.google.com/p/counteritarian/wiki/EditorKeyBindingsFeatures ）
*   非常适合混合 Java + Clojure 的 Polyglot 项目

总的来说，我很高兴使用逆时针作为我的主要开发环境。并不是说它比 Emacs 更好，但它肯定不缺少任何破坏交易的东西。

# cakephp - CakePHP 2.x 主题不起作用

> ID：15189231
> 
> 赞同：0
> 
> 时间：2013-03-03T18:33:38.027
> 
> 标签：cakephp, cakephp-2.x

我对 CakePHP（最新版本）主题有疑问。我已经为 /app/View/Themed/Start/ 创建了新主题

它在 Start 文件夹中包含 default.ctp。

我已经编辑了 /app/Controller/AppController.php 并将这段代码放入其中：

```
 class ThemeController extends AppController {
    public $theme = 'Start';
} 
```

但它仍然使用默认布局而不是我自己的模板。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T11:56:44.793

该代码不应放置在 AppController 中（或任何地方），您只需在 AppController 中设置主题，如下所示：

```
class AppController extends Controller {
    public $theme = 'Start'; 
```

然后它将从 app/View/Themed/Start 获取您的视图文件

# jsf - 渲染/提交 jsf 表单，有条件地选择不同的输入组件类型，但提交到相同的 bean 字段

> ID：15189234
> 
> 赞同：0
> 
> 时间：2013-03-03T18:33:44.350
> 
> 标签：jsf

是否可以在 JSF 中渲染和提交具有条件选择的不同输入组件但都提交到相同 bean 字段的表单，如下所示：（在任何给定时间，只选择一种类型的输入组件）

```
 <h:form>
                <h:panelGroup rendered="..cond1..">
                    <p:inputText value="#{lobCr.text}"/>
                </h:panelGroup>
                <h:panelGroup rendered="..cond2..">
                    <p:inputTextarea value="#{lobCr.text}"/>
                </h:panelGroup>
                <h:panelGroup rendered="..cond3..">
                    <h:inputHidden value="#{lobCr.text}"/>
                </h:panelGroup>

                <p:commandButton value="Submit" actionListener="..." />
            </h:form> 
```

我已经对此进行了测试，尽管它可以按预期工作，但我只是担心会出现任何未知问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:31:09.353

很好，您的表单只会提交渲染组件的值

# c# - 创建具有动态参数数量的方法

> ID：15189243
> 
> 赞同：0
> 
> 时间：2013-03-03T18:34:23.693
> 
> 标签：c#

是否可以在 C# 中创建具有动态参数数量的方法？

例如

```
Public void sum(dynamic arguments//like JavaScript)
{
   //loop at run-time  on arguments and sum
} 
```

> 我可以使用动态对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:35:43.793

使用[`params`关键字](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.110%29.aspx)来实现可变数量的参数。

> params 关键字允许您指定一个方法参数，该参数采用可变数量的参数。您可以发送以逗号分隔的参数声明中指定类型的参数列表，或指定类型的参数数组。您也可以不发送任何参数。

例如：`public void Sum( params int[] args ){ }`

> 我可以使用动态对象吗？

是的，但可能不是你想的那样。

```
// example 1 - single parameter of type dynamic
private static void Sum( dynamic args ) { }

// will not compile; Sum() expects a single parameter whose type is not
// known until runtime
Sum( 1, 2, 3, 4, 5 );

// example 2 - variable number of dynamically typed arguments
private static void Sum( params dynamic[] args ) { }

// will compile
Sum( 1, 2, 3, 4, 5 ); 
```

所以你可以有一个方法，例如：

```
public static dynamic Sum( params dynamic[] args ) {

    dynamic sum = 0;

    foreach( var arg in args ){
        sum += arg;
    }

    return sum;
} 
```

并称之为：`Sum( 1, 2, 3, 4.5, 5 )`。DLR 足够聪明，可以从参数中推断出正确的类型，并且返回值将是`System.Double`. **然而**（至少在`Sum()`方法的情况下），放弃对类型规范的显式控制并失去类型安全似乎是个坏主意。

我假设您有理由不使用[Enumerable.Sum()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:35:03.513

是的，你可以看看这里

[http://msdn.microsoft.com/library/w5zay9db(v=vs.80).aspx](http://msdn.microsoft.com/library/w5zay9db(v=vs.80).aspx)

（`params`关键词）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:00:18.980

也许一个示例单元测试可以稍微澄清一些事情：

```
 [Test]
    public void SumDynamics()
    {
        // note that we can specify as many ints as we like
        Assert.AreEqual(8, Sum(3, 5)); // test passes
        Assert.AreEqual(4, Sum(1, 1 , 1, 1)); // test passes
        Assert.AreEqual(3, Sum(3)); // test passes
    }

    // Meaningless example but it's purpose is only to show that you can use dynamic 
    // as a parameter, and that you also can combine it with the params type.
    public static dynamic Sum(params dynamic[] ints)
    {
        return ints.Sum(i => i);
    } 
```

请注意，在使用动态时，您会告诉编译器后退，因此您将在运行时获得异常。

```
 [Test, ExpectedException(typeof(RuntimeBinderException))]
    public void AssignDynamicIntAndStoreAsString()
    {
        dynamic i = 5;
        string astring = i; // this will compile, but will throw a runtime exception
    } 
```

* * *

阅读有关[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)的更多信息。

阅读有关[参数的更多信息](http://msdn.microsoft.com/nl-nl/library/w5zay9db%28v=vs.71%29.aspx)

# python - 将类变量作为默认值分配给类方法参数

> ID：15189245
> 
> 赞同：71
> 
> 时间：2013-03-03T18:34:34.847
> 
> 标签：python, class, variable-assignment

我想在一个类中使用取自该类的默认值参数构建一个方法。一般来说，我会过滤一些数据。在我的课堂上，我有一个通常传递数据向量的方法。有时我没有向量，我采用模拟数据。每次我不传递特定向量时，我都想默认采用模拟数据。我认为这应该是一个简单的构造，在我的方法定义中我说`a=self.vector`。但由于某种原因，我有一个错误`NameError: name 'self' is not defined`。简化的结构是：

```
class baseClass(object):  # This class takes an initial data or simulation
    def __init__(self):
        self.x = 1
        self.y = 2

class extendedClass(baseClass): # This class does some filtering
    def __init__(self):
        baseClass.__init__(self)
        self.z = 5
    def doSomething(self, a=self.z):
        self.z = 3
        self.b = a

if __name__ == '__main__':
    a = extendedClass()
    print a.__dict__
    a.doSomething()
    print a.__dict__ 
```

我期望的输出应该是：

```
{'y': 2, 'x': 1, 'z': 5}
{'y': 2, 'x': 1, 'z': 3, 'b': 5} 
```

我尝试了默认分配，因为`def doSomething(self, a=z):`显然它永远不会起作用。据我了解`self.z`，在此范围内是可见的，将其作为默认值应该不是问题。不知道为什么我有这个错误以及如何做到这一点。这可能是一个简单的问题，但我已经尝试弄清楚或找到不乏解决方案的解决方案。我发现仅针对其他语言的[类似问题。](https://stackoverflow.com/questions/9286533/how-to-use-an-member-variable-as-a-default-argument-c)

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-03-03T18:37:21.653

你的理解是错误的。`self`本身就是该函数定义的参数，因此此时它不可能在范围内。它仅在函数本身的范围内。

答案只是将参数默认为`None`，然后在方法中检查它：

```
def doSomething(self, a=None):
    if a is None:
        a = self.z
    self.z = 3
    self.b = a 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-03T22:18:40.123

这是一个简单示例模块的代码反汇编。代码对象是字节码的只读容器，它使用的常量和名称，以及有关局部变量数量、所需堆栈大小等的元数据。请注意，所有代码对象都被编译为常量。这些是在编译时创建的。但是对象`class A`和`function test`是在执行时实例化的（例如，在导入模块时）。

要创建类，`BUILD_CLASS`需要使用 name `'A'`、 bases`tuple` `(object,)`和`dict`包含类命名空间属性的 a。这就像通过调用手动实例化一个类型`type(name, bases, dict)`。为了制作`dict`，从代码对象创建一个函数`A`并调用它。最后，类对象通过`STORE_NAME`.

在代码对象`A`中，`self.z`作为参数加载到堆栈中`MAKE_FUNCTION`。字节码操作`LOAD_NAME`将`self`在当前局部变量（即定义的类命名空间）、模块全局变量和内置函数中进行搜索。如果`self`没有在全局或内置范围内定义，这显然会失败；它显然没有在本地范围内定义。

但是，如果它确实成功了，该函数将被创建`(self.z,)`为它的`__defaults__`属性，然后存储到本地 name `test`。

```
>>> code = compile('''
... class A(object):
...   def test(self, a=self.z): pass
... ''', '<input>', 'exec')

>>> dis.dis(code)
  2           0 LOAD_CONST               0 ('A')
              3 LOAD_NAME                0 (object)
              6 BUILD_TUPLE              1
              9 LOAD_CONST               1 (<code object A ...>)
             12 MAKE_FUNCTION            0
             15 CALL_FUNCTION            0
             18 BUILD_CLASS         
             19 STORE_NAME               1 (A)
             22 LOAD_CONST               2 (None)
             25 RETURN_VALUE

>>> dis.dis(code.co_consts[1]) # code object A
  2           0 LOAD_NAME                0 (__name__)
              3 STORE_NAME               1 (__module__)

  3           6 LOAD_NAME                2 (self)
              9 LOAD_ATTR                3 (z)
             12 LOAD_CONST               0 (<code object test ...>)
             15 MAKE_FUNCTION            1
             18 STORE_NAME               4 (test)
             21 LOAD_LOCALS         
             22 RETURN_VALUE 
```

* * *

**@uselpa：**您的 pastebin 示例（为 2.x 重写）：

```
>>> code = compile('''
... default = 1
... class Cl(object):
...     def __init__(self, a=default):
...         print a
... Cl()
... default = 2
... Cl()
... ''', '<input>', 'exec')
>>> dis.dis(code)
  2           0 LOAD_CONST               0 (1)
              3 STORE_NAME               0 (default)

  3           6 LOAD_CONST               1 ('Cl')
              9 LOAD_NAME                1 (object)
             12 BUILD_TUPLE              1
             15 LOAD_CONST               2 (<code object Cl ...>)
             18 MAKE_FUNCTION            0
             21 CALL_FUNCTION            0
             24 BUILD_CLASS         
             25 STORE_NAME               2 (Cl)

  6          28 LOAD_NAME                2 (Cl)
             31 CALL_FUNCTION            0
             34 POP_TOP             

  7          35 LOAD_CONST               3 (2)
             38 STORE_NAME               0 (default)

  8          41 LOAD_NAME                2 (Cl)
             44 CALL_FUNCTION            0
             47 POP_TOP             
             48 LOAD_CONST               4 (None)
             51 RETURN_VALUE 
```

如您所见，类对象`Cl`（和函数对象`__init__`）仅被实例化并存储到本地名称`'Cl'`一次。该模块在运行时按顺序执行，因此随后重新绑定名称`default`将不会影响`__init__`.

您可以使用先前编译的代码和新的默认值动态实例化一个新函数：

```
>>> default = 1
>>> class Cl(object):
...     def __init__(self, a=default):
...         print a
... 

>>> from types import FunctionType
>>> default = 2
>>> Cl.__init__ = FunctionType(
...   Cl.__init__.__code__, globals(), '__init__', (default,), None)
>>> c = Cl()
2 
```

这将重用已编译的代码对象`__init__.__code__`来创建具有`__defaults__`新元组的函数：

```
>>> Cl.__init__.__defaults__
(2,) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-03T18:38:53.863

执行定义时，默认参数仅被评估一次。相反，请执行以下操作：

```
def doSomething(self, a=None):
    if a is None:
        a = self.z
    self.z = 3
    self.b = a 
```

另请参阅[http://docs.python.org/release/3.3.0/tutorial/controlflow.html#more-on-defining-functions](http://docs.python.org/release/3.3.0/tutorial/controlflow.html#more-on-defining-functions)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-17T11:34:17.703

这将插入`self.z`if `a`is `None`// `False`：`empty_value`

```
def doSomething(self, a=None):
        self.z = 3
        self.b = (a or self.z) 
```

# arrays - 如何在 php 中创建循环随机数组？

> ID：15189248
> 
> 赞同：0
> 
> 时间：2013-03-03T18:34:46.133
> 
> 标签：arrays, loops, random

我试图创建一个包含 100 个从 1 到 1000 的随机值的数组，并将每个值乘以 4

到目前为止，我有：

```
$numbers = array(rand(1, 1000),rand(1, 1000),rand(1, 1000),
    rand(1, 1000),rand(1, 1000),rand(1, 1000)

for($x=0; $x<100; $x++)
    echo $numbers[$x]*4 . "<br/>"; 
```

如何让 rand(1,1000) 在不复制粘贴的情况下重复 100 次？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:38:44.143

```
<?php
$numbers = array();

for ($i = 0; $i < 100; $i++)
    $numbers[] = rand(1, 1000);

foreach ($numbers as $number)
    echo ($number * 4) . "<br />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:39:00.553

你试过这个还是我误解了你的问题：

```
$randArray=array();
for($x=0;$x<100,$x++)
{
    $randArray[]=rand(1,1000)*4;

    //echo $randArray[$x];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:40:02.740

```
$numbers = array();
for ($x = 0; $x < 100; $x++) {
    $numbers[] = rand(1,1000) * 4 . "<br>";
} 
```

如果出于某种原因您需要在不将它们乘以 4 的情况下获得值，您当然可以*再次*循环。

没有不雅循环的另一种可能的解决方案：

```
array_map(function () { return rand(1,1000); }, range(1,1000)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:43:10.097

```
<?php
$numbers = array();
for($i = 0; $i < 100; $i ++)
{
    $numbers[] = rand(1, 1000);
    echo $numbers[$i] * 4 . "<br/>\n";
}
?> 
```

# websphere - WebSphere 无法启动由 cobertura 检测的 webapp

> ID：15189249
> 
> 赞同：0
> 
> 时间：2013-03-03T18:34:50.373
> 
> 标签：websphere, code-coverage, cobertura

我为几节课设置了仪器，把它们装进了战争和耳朵。在 WebSphere 中安装这个耳朵。现在此应用程序状态已停止。我应该放置 cobertura.jar 吗？我的错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T04:52:38.977

1.  Websphere 应用程序服务器允许部署/安装ear，因此使用cobertura 检测类构建您的应用程序ear。
2.  `target/cobertura/cobertura.ser`将maven 构建时默认生成的 cobertura.ser 文件复制到系统中的`../AppServer/profiles/AppSrv01/`位置，到 WAS 的位置。
3.  启动服务器
4.  运行一些睾丸。
5.  停止服务器。cobertura.ser 将得到更新。

运行 cobertura 报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:10:00.053

我在阅读此文档时解决了很多问题：http: [//mojo.codehaus.org/cobertura-maven-plugin/instrumentingDeploymentArtifact.html](http://mojo.codehaus.org/cobertura-maven-plugin/instrumentingDeploymentArtifact.html)

*在 /ibm/was/profiles/ profile* /中找到了我的 cobertura.ser

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T05:18:19.867

Cobertura 仪器类能够*“[识别 Java 程序的哪些部分缺少测试覆盖](http://cobertura.sourceforge.net/)”*

我认为它添加了自己的类，以便它们收集信息，并在测试覆盖阶段结束时将其写入数据存储。话虽如此，我希望webapp 的目录`cobertura.jar`中应该包含其他一些 jar 。`WEB-INF/lib`

要获得有关该问题的更多见解，请查看`SystemOut.log`服务器实例。它在`[WEBSPHERE_HOME]/profiles/[PROFILE_NAME]/logs/server1`目录中。

# r - 使用 barplot 时指定范围

> ID：15189251
> 
> 赞同：0
> 
> 时间：2013-03-03T18:34:55.820
> 
> 标签：r, plot

我想使用 R 来分析我的服务器访问日志文件。我是 R 新手，想使用 barplot 来可视化数据。barplot 有没有办法只绘制出现 x 次或更多次的值？目前，我正在按发生频率绘制对服务器的请求，但是我只对发生 100 次或更多的请求感兴趣。可以指定这个吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:49:37.390

没有可重复的例子，我不确定答案。这是一个使用包中`barchart`的示例。`lattice`我更喜欢它，因为如果方便的公式表示法。这里的想法是根据标准（此处的事件发生）对您的数据进行子集化。

```
server= paste('EVENT_',sample(LETTERS[1:6],1000,rep=T),sep='')
dat <- as.data.frame(table(server))  ## I transform it to a data.frame for more flexibility
library(lattice)
p.160 <- barchart(Freq~server,data=subset(dat,Freq > 160),main='Event > 160')
p.all <- barchart(Freq~server,data = dat, main ='all events')
library(gridExtra)
grid.arrange(p.all,p.160) 
```

![在此处输入图像描述](../Images/2ae2f47e02340b53c57e69771b7ad645.png)

# c++ - 从部分专用模板类创建对象

> ID：15189258
> 
> 赞同：2
> 
> 时间：2013-03-03T18:35:25.903
> 
> 标签：c++, templates, c++11

如何创建标记为错误的对象？它是一个部分专门的模板类。

```
template<typename C, typename size_type = unsigned short>
struct MatrixDataRect {...};

template<typename T, size_t H, size_t W>
class MatrixDataRect<std::array<T,H*W>, size_t> {...};

int main()
{
    MatrixDataRect<std::vector<double>> mat_data_vector;
    MatrixDataRect<std::array<double,10*5>> mat_data_array; // WRONG!!!!
    return 0;
} 
```

这是错误的，因为 WRONG 行使用第一个模板类。不是第二个。因为编译器不能将 10*5 分别分配给 H 和 W。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:40:05.453

```
template<typename T, size_t H, size_t W>
class MatrixDataRect<std::array<T,H*W>, size_t> {...};
MatrixDataRect<std::array<double,10*5>> mat_data_array; 
```

问题是模板参数 H 和 W 不能从调用位置推导出来。基本上，在实例化过程中，编译器会乘以`5*10`yield`50`然后尝试实例化`std::array<double,50>`，实例化的类型然后用于实例化`MatrixDataRect<std::array<double,50>>`。在这一点上，不可能弄清楚`H`和的值`W`是什么`MatrixDataRect`（是 5 和 10？，10 和 5？，25 和 2？...）

由于无法应用类型推导，编译器将回退到非专用版本并实例化主模板。

您可以使用的替代方法是：使专业化采用一个`std::array`和一个大小参数（作为主模板）。这适用于问题中的所有代码，如果您需要二维，可能不适用于其他成员。更改模板，以便显式传递大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T18:43:00.803

有两个问题：

1.  `10*5`被评估为 50，然后编译器尝试推断`H*W`无法完成的。它们可以是任何`size_t`乘以 50 的值。

2.  您专门`size_t`作为第二个模板参数，在实例化它时必须给出它，因为它无法推断。否则你只是在实例化一个`MatrixDataRect<std::array<double,10*5>, unsigned short>`.

以下将起作用：

```
template<typename C, typename size_type = unsigned short>
struct MatrixDataRect {...};

template<typename T, size_t S>
class MatrixDataRect<std::array<T,S>, size_t> {...};

int main()
{
    MatrixDataRect<std::vector<double>> mat_data_vector;
    MatrixDataRect<std::array<double,10*5>, size_t> mat_data_array;
    return 0;
} 
```

# javascript - 在移动设备上更改元素的 CSS 样式

> ID：15189259
> 
> 赞同：0
> 
> 时间：2013-03-03T18:35:29.757
> 
> 标签：javascript, html, css, mobile

Javascript新手在这里。

我有一个名为“up_arrow”的元素（向上箭头的图片）。我想要一个在桌面上显示箭头但不在移动设备上显示箭头的脚本。所以我尝试使用以下脚本：

```
<script>
if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test( navigator.userAgent )){
    document.getElementById('up_arrow').style.visibility = 'hidden';
}
</script> 
```

向上箭头图像显示在我的计算机上，但它也显示在我的 Android 手机上。有人可以向我解释我在编码中犯了什么错误吗？

提前致谢！

**编辑**：我已经包含了元素“up_arrow”的代码

```
<a href="#header-wrapper"><img id="up_arrow" class="uparrow" alt="uparrow" src="images/uparrow.png"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:55:52.757

您可以在 CSS 样式表中使用响应式设计方法。例如：

```
#up_arrow {
  visibility: hidden
}

@media screen and (min-width: 40.5em) {
  #up_arrow {
    visibility: visible 
  }
} 
```

将隐藏“小屏幕设备”上的向上箭头（按屏幕尺寸定义“移动设备”，而不是用户代理）。有关详细信息，请参阅[http://www.html5rocks.com/en/mobile/responsivedesign/](http://www.html5rocks.com/en/mobile/responsivedesign/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:59:12.770

您需要使用 style.display="none" 而不是可见性

# google-app-engine - GQLQuery 如何查询 "key IN arr" 其中 arr 很大

> ID：15189261
> 
> 赞同：0
> 
> 时间：2013-03-03T18:35:40.143
> 
> 标签：google-app-engine, gql, gqlquery

我需要一些帮助来制定我的数据和查询，以便我可以进行相当大的查询。基本上我需要发生以下情况：

型号1：

```
creator = db.ReferenceProperty(db.Key) #reference to UserModel 
```

用户模型：

```
facebookID = db.StringProperty() 
```

我目前有数百个单个用户的 Facebook 朋友 ID 的列表，我想查询创建者在我的 Facebook 朋友 ID 数组中的所有 Model1

```
SELECT * FROM Model1 WHERE creator IN fbFriendsArray 
```

我目前没有在 UserModel 中存储 FB 好友 ID/引用列表，因为它们会不断变化。IN 运算符最多有 30 个，如果我要创建许多查询，也效率不高。

有人能告诉我最好的方法吗？

编辑：我更清楚我有什么数据

# ruby-on-rails - Accept_nested_attributes_for 带有 json PUT（更新）

> ID：15189264
> 
> 赞同：2
> 
> 时间：2013-03-03T18:35:55.600
> 
> 标签：ruby-on-rails, json

我已经看到了许多使用 Accepts_nested_attributes_for 的示例，但其中只有少数用于 json POST/PUT，并且没有一个对我有帮助：/

我的应用程序将用于创建表单。

因此，一个表单有很多 form_rows，而一个 form_row 可以有很多选择（如果它是单选）。所以，我有这样的表单模型：

```
class Form < ActiveRecord::Base
    attr_accessible :name
    has_many :form_rows
    accepts_nested_attributes_for :form_rows
end 
```

我的控制器看起来像这样：

```
def update
    @form = Form.find(params[:id])
    @form.update_attributes!(params[:form])
end 
```

这是我要发送的 json

```
{
  "name": "form test 4",
  "form_rows_attributes": [
    {
      "domtype": "Input",
      "label": "Super row new"
    }
  ]
} 
```

在我的场景中，表单创建只需要一个名称，然后用户添加 form_rows。

当我这样做时，名称会正确更新，但根本不会创建 form_rows。我的控制台中没有错误，只是表单的更新。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T18:40:38.930

您的 JSON 需要多一层嵌套，因此`params[:form]`调用实际上会找到参数：

```
{ 
  "form": {
    "name": "form test 4",
    "form_rows_attributes": [
      {
        "domtype": "Input",
        "label": "Super row new"
      }
    ]
  } 
} 
```

# orbeon - 如何使用表单生成器在 HTML 表单 POST 参数中提交 XML

> ID：15189269
> 
> 赞同：0
> 
> 时间：2013-03-03T18:36:14.797
> 
> 标签：orbeon

我想将 XML 发送到服务。该服务的描述指出“应将 XML 文档发布为 uriencoded，并使用 UTF-8 字符集作为参数 'xml' 到 ~/api/xmlapi.php”，并且有一个示例脚本：

```
xmlHttp=GetXmlHttpObject(receiveXML);
var url = "api/xmlapi.php";
var params = "xml=" + document.getElementById('xml').value;
xmlHttp.open("POST", url, true);

//Send the proper header information along with the request
xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlHttp.setRequestHeader("Content-length", params.length);
xmlHttp.setRequestHeader("Connection", "close");
xmlHttp.send(params); 
```

XML 的格式也由服务指定，并且 XML 需要用用户在表单字段中输入的值“填充”。

我正在尝试使用 Form Builder 创建 HTTP 服务，并尝试了所有标准选项但没有成功（有效的 http - 200。但没有响应）。也许与“xml =”参数设置有关。

我需要自定义提交的源代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:32:54.930

首先，我不得不说，Form Builder 的设计并没有考虑到这个用例，所以如果我在这里描述的内容有时令人费解，请耐心等待。如果您只想运行此示例而不是重新创建它（我建议这样做），请先下载[最终表单的源代码，](https://gist.github.com/avernet/5105343)然后从“编辑源代码”对话框将其粘贴到新表单中，替换该表单的源代码。

1.  首先创建一个服务。在上面的 PHP 代码中，用于传递 XML 的参数是命名`xml`的，所以请求体需要是`<xml/>`. （如果是`gaga`，则请求正文需要是`<gaga/>`。）

    ![服务](../Images/f4421c89be1ba08be2afbcaecbb90505.png)

2.  创建一个动作，这里在按下按钮时触发。它采用控件`xml-sent`的值来填充`xml`参数的值，因此是`/xml` *Destination XPath Expression*。这是什么`xml-sent`？我们将在下一步中看到这一点。

    ![行动](../Images/9df3ede3333384f2ebbf53ddc2165b69.png)

3.  在您设置为始终隐藏的“内部”部分中，添加一个文本输出控件，将其命名为`xml-sent`，并将其设置为按以下表达式计算。我把这个表达式放在 3 行上，以便在此处阅读，但您需要在 Form Builder 的*Validation Property*对话框中输入一行。请注意您如何在此处创建要发送的 XML 文档，无论它是什么，然后使用`saxon:serialize()`该 XML 文档将 XML 文档转换为“文本”，这将成为`xml-sent`控件的值。对于调试，您可以使该部分可见，因此 XML 显示在表单中，允许您查看将发送到服务的内容。

    ```
    saxon:serialize(xxf:element('person', (
        xxf:element('first', string($first-name)), 
        xxf:element('first', string($last-name)))), 'xml') 
    ```

# variables - d3.js noob：如何将动态变量作为数据传递

> ID：15189287
> 
> 赞同：1
> 
> 时间：2013-03-03T18:37:24.567
> 
> 标签：variables, object, dynamic, map, d3.js

我正在尝试通过从单击的按钮传递的变量来更改数据集。

这是我到目前为止所做的一个例子：http: [//jsfiddle.net/earlybirdtechie/qmC9E/](http://jsfiddle.net/earlybirdtechie/qmC9E/)

```
d3.selectAll('button.decadeBtn')
    .on("click", function() {
        var currentDecadeName = $(this).attr('data-decade');
        console.log('currentDecadeName: '+ currentDecadeName); 
        svg.selectAll("rect.bars")
        .data(currentDecadeName, function(d) { return d.id })
        .transition()
        .duration(1499)
        .ease("bounce")
        .attr({
            height: function(d,i) {
                return d.value;
            }
        }) 
```

在上面的 jsFiddle 示例中，当您单击任何按钮时，条形应该会根据十年的数据而变化。然而，代码需要的是数据名称，而不是动态变量名称。因此，如果您转到 js 代码中的第 43 行并将变量名称 'currentDecadeName' 替换为 'seventies'，那么一旦单击任何按钮，条形就会变为 70 年代数据。我怎样才能让它与动态变量而不是静态数据变量一起工作？

当[我在 google groups 中发布这个问题时](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/c3FTQZn3Dz4)，我被告知要使用 map 对象，但是，我是个菜鸟，不清楚 d3.map 是如何工作的。

任何人都可以澄清如何在这种情况下使用 d3.map，或者指向我关于地图对象如何在 d3 中工作的教程？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:02:25.040

看看[源代码](https://github.com/mbostock/d3/blob/master/src/core/map.js)，这个`map`类似乎很简单。它基本上等同于 map/hash/dictionary/object，类似于普通的 JavaScript 对象，具有一些便利功能。我对 d3 不太熟悉，因此可能`map`旨在与库的其他部分很好地集成。

本质上，您要做的是以某种“映射”从名称（字符串）到值（数据点数组）收集数据。您实际上*不需要*使用`d3.map`- 在这种情况下，一个简单的对象就足够了。

这是一个带有简单 JavaScript 对象的示例。您只需要在范围内保持映射：

```
var sixties = [ ... ];
var seventies = [ ... ];

// Create mapping as an object
var map = {
    sixties: sixties,
    seventies: seventies
}

...

d3.selectAll('button.decadeBtn')
.on("click", function() {
    var currentDecadeName = $(this).attr('data-decade');
    svg.selectAll("rect.bars")
    // Lookup the current decade name in the mapping
    .data(map[currentDecadeName], function(d) { return d.id })
... 
```

这[是一个 JsFiddle](http://jsfiddle.net/voithos/qmC9E/2/)使用 来说明同样的事情`d3.map`，它使用该`.get()`函数来访问元素。

# mysql - 评估 WHERE AND drupal 6 mysql 查询

> ID：15189289
> 
> 赞同：0
> 
> 时间：2013-03-03T18:37:34.813
> 
> 标签：mysql, drupal, drupal-6

我正在尝试编写 mysql 查询，其中我有两个 where 子句，因此带括号的层次结构类似于（其中 x 和 y）或（其中 m 和 n）。

```
 $value = db_query("
SELECT id, b,c 
FROM {grant_status} 
WHERE b='%s' AND b_val='%s' 
OR 
WHERE c='%s' AND c_val='%s'
", $name,'val', $name,'val'); 
```

这不是评估，我想知道它是否写得正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:45:39.003

我相信你的意思

```
$value = db_query("
SELECT id, b,c 
FROM {grant_status} 
WHERE (b='%s' AND b_val='%s') 
OR 
(c='%s' AND c_val='%s')
", $name,'val', $name,'val'); 
```

# html - 如何摆脱haml ul中的子弹

> ID：15189293
> 
> 赞同：0
> 
> 时间：2013-03-03T18:37:46.833
> 
> 标签：html, css, sass, haml

所以这是我有的 ul in haml

```
.content
  .testing
    .testing-ul2
      %ul
        %li
          a
          b
          c
    .testing-ul2            
      %ul
        %li
          d
          e
          f 
```

• 美国广播公司

• 定义

我如何摆脱 sass 中的要点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:44:05.647

有效的 CSS 不是有效的 SASS，它是有效的 SCSS。

对于有效的 SASS，您需要去掉花括号和分号。

这就是你想要的：

```
.content
    .testing
        ul
            list-style: none 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:40:35.593

有效的 CSS 是有效的 SCSS：

```
ul {
    list-style: none;
} 
```

使选择器尽可能具体（`.testing ul`等）。

# php - PHPExcel：自动下载并打开 Excel 文件

> ID：15189296
> 
> 赞同：3
> 
> 时间：2013-03-03T18:37:50.103
> 
> 标签：php, phpexcel

我设法创建并保存了一个 excel 文件：

```
// Rename the file
$fileName = URL . "MODEL/case" . $caseNO . ".xlsx";

// Write the file
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, $fileType);
$objWriter->save($fileName); 
```

我现在想 PHPExcel 自动运行 Excel，打开创建的文件并将其最大化。可能吗？即使 Excel 已经在运行，它还能工作吗？

谢谢您的帮助，

多纳托

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T18:47:16.273

根据我上面的评论，您只能强制拥有一个下载选项。为此，您可以通过这种方式设置标题 -

```
header("Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
header("Content-Disposition: attachment;filename=\"filename.xlsx\"");
header("Cache-Control: max-age=0"); 
```

参考 - [PHP Excel 阅读器](https://stackoverflow.com/questions/9856518/php-excel-header)

如需更多选项，您还可以查看备忘单 - 备忘[单](http://clock.co.uk/tech-blogs/phpexcel-cheatsheet)

虽然在这里阅读的最佳方式 - [Codeplex](http://phpexcel.codeplex.com/documentation)

**编辑**

做这样的事情 -

```
$excel = new PHPExcel();
header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
header('Content-Disposition: attachment;filename="your_name.xls"');
header('Cache-Control: max-age=0');  

// Do your stuff here

$writer = PHPExcel_IOFactory::createWriter($excel, 'Excel5');  

// This line will force the file to download    
$writer->save('php://output'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T18:58:02.273

PHPExcel 无法在客户端上运行 MS Excel....但您可以将文件直接下载到浏览器，这将为客户端提供将其保存到磁盘或直接在 MS Excel 中打开它的选项（如果他们安装了 MS Excel ) 通过发送适当的 http 标头，并将文件“保存”到 php://output。

当然，如果客户端没有安装 MS Excel，那么在 MS Excel 中打开不是一个选项；虽然它仍然会提示保存。

/Tests 或 /Examples 目录中的 01simple-download-xlsx.php 文件正是这样做的

“是”，如果 MS Excel 已经在客户端上运行，它将起作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-17T04:49:08.517

在创建 Writer 之前插入以下标题

```
$filename = "filedetail". date("Y-m-d-H-i-s").".xlsx";
header('Content-Type: application/vnd.ms-excel'); 
header('Content-Disposition: attachment;filename="'.$filename.'"');
header('Cache-Control: max-age=0'); 
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save('php://output'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-23T04:47:45.183

```
header("Location: ".URL . "MODEL/case" . $caseNO . ".xlsx"); 
```

# java - Netbeans 7：为什么不包括我编辑的清单？

> ID：15189300
> 
> 赞同：8
> 
> 时间：2013-03-03T18:38:37.853
> 
> 标签：java, netbeans, ant, manifest, netbeans-7

我的目标如下`build.xml`：

```
<target name="-pre-compile">
    <property file="build.properties"/>
    <buildnumber file="build.version"/>
    <tstamp>
        <format property="timestamp" pattern="yyyy-MM-dd HH:mm:ss"/>
    </tstamp>
    <manifest file="manifest.mf">
        <attribute name="MAJOR" value="${version.major}"/>
        <attribute name="MINOR" value="${version.minor}"/>
        <attribute name="RELEASE" value="${release}"/>
        <attribute name="BUILD" value="${build.number}"/>
        <attribute name="BUILD-DATE" value="${timestamp}"/>
        <attribute name="PROTOCOL" value="${protocol}"/>
        <attribute name="APPCODE" value="${appcode}"/>
    </manifest>    
</target> 
```

它工作正常，在 Netbeans 中的 Clean and Build 之后打开`manifest.mf`会显示我添加的所有额外属性。但是，当我打开我的 jar 文件时，我看到它只包含默认内容：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.2
Created-By: 1.7.0-b147 (Oracle Corporation) 
```

当我在一个项目中有两个包之前，我的这个工作正常。一个包是我要带到其他项目的所有库的东西，所以我决定把它分成另一个项目，这样我就可以自己构建库 jar。现在我有这个问题。它发生在我自己编译库以及依赖它的其他项目时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:52:52.370

我已经通过打开`nbproject/project.properties`并添加`manifest.file=manifest.mf`到末尾来修复它。就那么简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-12T10:17:25.317

在此处查看此答案：[是否可以将自定义清单添加到在 Netbeans 6.7.1 中编译的 Java 库中？](https://stackoverflow.com/questions/1598229/is-it-possible-to-add-a-custom-manifest-to-a-java-library-compiled-in-netbeans-6)

我遇到了同样的问题，在我的 build.xml 末尾添加这个解决了这个问题：

```
<target name="-post-jar">
 <jar destfile="${dist.jar}" update="true">
    <manifest>
        <attribute name="Manifest-Version" value="1.0" />           
        <attribute name="Extension-Name" value="polpol" />
        <attribute name="Class-Manager" value="org.nlogo.extensions.polpol.Manager" />
        <attribute name="NetLogo-Extension-API-Version" value="5.0" />
    </manifest>
 </jar>
</target> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T16:11:01.033

我碰巧在这里遇到了同样的问题，幸运的是已经解决了。不幸的是，我不知道究竟是什么导致了这个问题，在将你的代码与我的代码进行比较之后，我看到的唯一区别是你的 build.xml 中清单文件的名称，以及触发任务的事件（我使用了 pre init） . 我全部大写，并在 dist 目录 -post-jar 中创建的 Version.txt 文件中补充清单版本信息。您可能只想尝试制作

清单文件="manifest.mf"

读

清单文件="MANIFEST.MF"

这是我的 build.xml 的重要部分的副本：

```
<property name="project.name" value="VOXManagement" /> 
    <property name="version.num" value="1.1" /> 
    <target name="-pre-init"> 
       <tstamp> 
          <format property="NOW" pattern="yyyy-MM-dd HH:mm:ss z" /> 
       </tstamp> 
       <manifest file="MANIFEST.MF"> 
          <attribute name="Bundle-Name" value="${project.name}" />            
          <attribute name="Bundle-Version" value="${version.num}" /> 
          <attribute name="Bundle-Date" value="${NOW}" /> 
          <!--<attribute name="Bundle-Revision" value="${svna.version}" />-->
          <attribute name="Implementation-Title" value="${project.name}" /> 
          <attribute name="Implementation-Version" value="${version.num}" /> 
       </manifest>  
       <echo file="Version.txt">V${version.num}</echo>     
    </target>
    <target name="-post-jar">
        <copy file="Version.txt" todir="dist" overwrite="true"/>    
        <delete file="dist/README.TXT"/>
    </target> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T16:28:33.390

您需要使用“更新模式”。

`<manifest file="${manifest.file}" mode="update">`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T16:36:09.653

正如 Thihara 已经问过的，您可能有一个构建 jar 的任务？您在创建 jar（或类似的东西）标签/任务中有 manifest="MANIFEST.MF" 吗？

```
<target name="jar">
        <jar   manifest="path-to/MANIFEST.MF" basedir="base dir" destfile="outJarfileName">
        </jar>
    </target> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-13T18:34:18.670

在创建罐子、战争、耳朵时，MANIFEST.MF 中的一个常见问题是

**“清单版本：1.0 Ant 版本：Apache Ant 1.9.4 创建者：1.7.0_40-b43（甲骨文公司）”**

如果您想忽略 Ant 版本号并使用 filesetmanifest="mergewithoutmain" 选项创建。

```
<jar destfile="MyJar.jar" basedir="./bin" filesetmanifest="mergewithoutmain"  manifest="./src/META-INF/MANIFEST.MF" update="true" > 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-29T21:07:32.003

在**Netbeans 7.3.X**中 为build.xml 中的**.war** 使用

```
<manifest file="${build.web.dir}/META-INF/MANIFEST.MF">...</manifest> 
```

# android - phonegap 获取资产内的文件

> ID：15189301
> 
> 赞同：0
> 
> 时间：2013-03-03T18:38:41.983
> 
> 标签：android, ajax, file, cordova, local

我正在android上尝试phonegap。我的资产文件夹中有一个 json 文件，例如 assets/data/name.json。我想在我的 javascript 函数中使用它。我以前经常这样做，如下所示： 但我认为这不是一个好的解决方案。谁有好的？！请告诉我，谢谢。
`var xhr = new XMLHttpRequest();
....
xhr.open('GET', '../data/name.json');
....`

PS：是的，它可以作为一个对象加载。但是有什么动态的方法来获取它，因为我可能有不同的 json 文件可供选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:55:51.063

您可以使用`file:///android_asset`路径访问资产目录，因此在您的情况下，它类似于`xhr.open('GET', 'file:///android_asset/data/name.json');`

# php - 如何阅读代码而不迷失在大量代码中

> ID：15189310
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:39:26.677
> 
> 标签：php, codeigniter, open-source

您好，我正在尝试阅读开源项目的代码，但我对这么多代码感到迷茫和愤怒。但作为一个悲伤的开源应该是粉丝。而我不这么认为。我正在尝试从 codeigniter 读取代码，您认为，对于谁来说这是一个非常大的项目。是否有一些为什么更容易阅读所有代码。

请帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T18:44:23.743

我不确定这是否是一个严格的编程问题，但我通常采用以下方法：

**抽象**

在深入了解它的基本逻辑之前，请尝试理解该方法的要点。首先阅读整个地方的循环和方程式，不会给你太多的洞察力。在尝试破译如何理解之前，请尝试了解一段代码的整体要点。因此，弄清楚它是做*什么*的，然后是它是*如何*做到的。

* * *

**文档**

在这种情况下，文档是您最好的朋友。您不完全理解的方法将记录在某个地方，这些描述将帮助您了解程序的整体功能。

* * *

**耐心**

您不会阅读代码并立即知道它的作用。给自己时间来理解每一步是很重要的。感到沮丧会导致你错过步骤，偷工减料并最终让自己失败。

* * *

**永远不要害怕问！**

如果您不理解某些内容，并且文档确实对您没有帮助，那么有数以千计的论坛可以提供帮助。当您提出问题时，尤其是在这样的网站上，请确保展示您的思考过程；你已经做出了努力，并明确了你的问题是什么。

* * *

**附加信息**
我发现[这个链接](http://blog.architexa.com/2010/11/dealing-with-complex-code-where-to-start/)可以提供一些很好的建议。

* * *

希望这些会有所帮助:)

# wolfram-mathematica - 在 Confluence 页面中嵌入 Mathematica

> ID：15189313
> 
> 赞同：2
> 
> 时间：2013-03-03T18:39:41.390
> 
> 标签：wolfram-mathematica, confluence

在将 Wolfram Mathematica 内容（例如 CDF 和笔记本）嵌入 Atlassian Confluence 页面方面有哪些可用选项？我想用它来做笔记，所以通过 Confluence 页面快速编辑 Mathematica 内容的能力是最佳的。

# android - ViewPager 中的 ListFragments

> ID：15189316
> 
> 赞同：3
> 
> 时间：2013-03-03T18:39:48.927
> 
> 标签：android, android-fragments, android-viewpager, android-pageradapter

我正在编写我的第一个**基于片段的**应用程序并遇到了一些我无法使用 API 或 Stackoverflow 解决的严重问题。

我正在使用*viewPager*在两个列表之间滑动。每个列表都有一个*标题*按钮来创建一个新的列表元素（类似于原生的 android 警报应用程序）。该按钮当前返回一条错误消息以进行调试。

问题是：

*   FragmentList A 返回 FragmentList B 的调试消息
*   FragmentList B 不返回调试消息

    ```
     ... // The main class
    public class DemoApp extends FragmentActivity implements ActionBar.TabListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    PageAdapter mPageAdapter = new PageAdapter(getSupportFragmentManager());
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mPageAdapter);

    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    for (int i = 0; i < mPageAdapter.getCount(); i++) {
        actionBar.addTab(actionBar.newTab().setText(mPageAdapter.getPageTitle(i)).setTabListener(this));
    }
    }
    ... 
    ```

我的自定义*PageAdapter*将创建两个列表 framgent 对象：

```
public class PageAdapter extends FragmentStatePagerAdapter {

private final int NUMBER_PAGES = 2;

public PageAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public Fragment getItem(int position) {
    if (position == 0) {
        return new FoodListFragment();
    } else if (position == 1){
        return new LocationListFragment();
    } else {
        throw new IllegalArgumentException("Invalid page position: " + position);
    }
}

@Override
public int getCount() {
    return NUMBER_PAGES;
}

...

} 
```

FoodListFragment 被剪断（除调试输出外，其他列表看起来相似）：

```
public class FoodListFragment extends ListFragment implements LoaderCallbacks<Cursor> {
/*
 * (non-Javadoc)
 * 
 * @see android.support.v4.app.Fragment#onActivityCreated(android.os.Bundle)
 */
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    // add a list header with the button to create a new list item
    View v = getActivity().getLayoutInflater().inflate(R.layout.list_header, null);
    getListView().addHeaderView(v);

...
    setListAdapter(getSomeAdapter());

    // get the list header button
    ImageButton createItem = (ImageButton) getActivity().findViewById(R.id.create_new_entry);

    createItem.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.e(LOG_TAG, "onclick FoodListFragment");
        }
    });

} 
```

主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/wrapper"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".DemoApp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:27:34.900

我发现了这个错误。在每个列表中，我都调用了相同的标题视图和相同的标题按钮。无法明确分配 onClick 方法

# php - 可能的 apache / php 漏洞利用

> ID：15189318
> 
> 赞同：0
> 
> 时间：2013-03-03T18:39:58.137
> 
> 标签：php, apache, security

我有一个关于利用 php 服务器的问题。

如果我限制对运行 Web 服务器的文件系统的所有写访问。可以运行哪些可能的漏洞来访问服务器？

当然，服务器以标准用户身份运行。

那么这可以算是一个安全的服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:53:20.103

如果存在可以让黑客获得 root 访问权限的漏洞，那么再多的权限设置都不会阻止他写入文件系统。

目前我不知道 PHP 或 Apache 中有任何根漏洞，但这并不是说它们不存在。

此外，如果 PHP 程序调用任何外部程序（通过`exec()`、`system()`等），那么这些程序也具有相同的理论风险。如果 PHP 程序`eval()`以不安全的方式使用，那么理论上攻击者可以调用系统上的*任何*程序，同样具有相同的风险级别。

不过，他的这种攻击方式比较少见；大多数针对 PHP 软件的黑客攻击往往是数据库攻击，因为这通常是程序代码中的弱点，并且通常比文件系统黑客攻击为攻击者提供更好的回报。

当然，如果整个文件系统都被写保护，那么数据库也将无法进行更新，这将防止某些类型的数据库攻击（但也可能是您正常使用数据库的问题）。但数据库攻击可能有多种形式，从简单地读取用户密码到将恶意数据插入数据库，并非所有攻击都需要写访问权限。因此，写保护只能在这里为您提供帮助。

根据您所说的“限制所有写访问”的含义，您可能还会遇到希望能够写入文件系统的软件的问题，包括写入活动日志文件的 Apache。对于 Apache 来说，无法写入此文件可能没问题，但它会严重影响您在攻击发生时弄清楚发生了什么的能力。

# refinerycms - 如果父项在炼油厂中处于活动状态，如何列出子项？

> ID：15189326
> 
> 赞同：1
> 
> 时间：2013-03-03T18:40:34.927
> 
> 标签：refinerycms

我有这个代码来列出某个页面的所有孩子：

```
 <ul class="sidenav">
    <%= render :partial => '/refinery/menu_branch', 
      :collection => refinery_menu_pages.select{|p| p.parent_id == @page.root.id},
      :locals => {
        :hide_children => false,
        :apply_css => true 
      } -%>
  </ul>

e.g.

Item1
  cItem1
  cItem2 
```

如何修改代码以显示子页面的子页面？例如：

```
Item1
 cItem1
 cItem2
   ccItem1
   ccItem2
   ccItem3
Item2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T02:21:17.870

由于这段代码是递归的，我很惊讶它还没有显示多个级别。也就是说，menu_branch partial 调用 menu_branch partial，直到它的 children 为 nil。

这是 RefineryCMS 2.0 中 _menu_branch 部分的代码：

```
<%= render :partial => '/refinery/menu_branch', :collection => children,
                 :locals => {
                   :apply_css => local_assigns[:apply_css],
                   :hide_children => !!hide_children,
                   :menu_levels => local_assigns[:menu_levels]
                 } -%> 
```

请注意，这包括 :menu_levels。您可以尝试复制和粘贴它，或者只是`local_assigns[:menu_levels]`用一个整数替换您想要显示的级别数。

# sql - 如何选择每个部门的最高工资，包括获得它的员工

> ID：15189328
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:40:35.830
> 
> 标签：sql

给定一张桌子`Employees`

```
+-------+--------+-----------+------+-----------+------+------+--------+
| EMPNO | ENAME  |    JOB    | MGR  | HIREDATE  | SAL  | COMM | DEPTNO |
+-------+--------+-----------+------+-----------+------+------+--------+
|  7369 | SMITH  | CLERK     | 7902 | 17-Dec-80 |  800 |      |     20 |
|  7499 | ALLEN  | SALESMAN  | 7698 | 20-Feb-81 | 1600 |  300 |     30 |
|  7521 | WARD   | SALESMAN  | 7698 | 22-Feb-81 | 1250 |  500 |     30 |
|  7566 | JONES  | MANAGER   | 7839 | 02-Apr-81 | 2975 |      |     20 |
|  7654 | MARTIN | SALESMAN  | 7698 | 28-Sep-81 | 1250 | 1400 |     30 |
|  7698 | BLAKE  | MANAGER   | 7839 | 01-May-81 | 2850 |      |     30 |
|  7782 | CLARK  | MANAGER   | 7839 | 09-Jun-81 | 2450 |      |     10 |
|  7788 | SCOTT  | ANALYST   | 7566 | 19-Apr-87 | 3000 |      |     20 |
|  7839 | KING   | PRESIDENT | null | 17-Nov-81 | 5000 |      |     10 |
|  7844 | TURNER | SALESMAN  | 7698 | 08-Sep-81 | 1500 |    0 |     30 |
|  7876 | ADAMS  | CLERK     | 7788 | 23-May-87 | 1100 |      |     20 |
|  7900 | JAMES  | CLERK     | 7698 | 03-Dec-81 |  950 |      |     30 |
|  7902 | FORD   | ANALYST   | 7566 | 03-Dec-81 | 3000 |      |     20 |
|  7934 | MILLER | CLERK     | 7782 | 23-Jan-82 | 1300 |      |     10 |
+-------+--------+-----------+------+-----------+------+------+--------+ 
```

还有一张桌子`Departments`

```
+--------+------------+----------+
| DEPTNO |   DNAME    |   LOC    |
+--------+------------+----------+
|     10 | ACCOUNTING | NEW YORK |
|     20 | RESEARCH   | DALLAS   |
|     30 | SALES      | CHICAGO  |
|     40 | OPERATIONS | BOSTON   |
+--------+------------+----------+ 
```

我如何找到每个部门的最高工资？

输出格式行是：

```
DEPTNO,ENAME,DNAME,SAL,LOC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:41:07.623

您可以使用将获取`max(salary)`每个部门的子查询：

```
select de.deptno,
  e.ename,
  de.dname,
  e.sal,
  de.loc
from employees e
inner join
(
  select max(e.sal) MaxSalary, d.deptno, d.loc, d.dname
  from employees e
  inner join departments d
     on e.deptno = d.deptno
  group by d.deptno, d.loc, d.dname
) de
  on e.sal = de.MaxSalary
  and e.deptno = de.deptno
order by de.deptno 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/78f2b/16)。您会注意到这会返回 2 行，`deptno=20`因为有两个员工的薪水相同。

如果您正在使用具有窗口函数的数据库，那么您将要使用`dense_rank()`，那么您将返回每个部门中具有最高薪水的所有员工：

```
select d.deptno, e.ename, d.dname, e.sal, d.loc
from 
(
  select e.ename,
    e.sal, 
    e.deptno,
    dense_rank() over (partition by deptno order by sal desc) as salRank
  from employees e
) e 
inner join departments d
  on e.deptno = d.deptno
where salRank = 1; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/78f2b/22)。

两个版本的结果是：

```
| DEPTNO | ENAME |      DNAME |  SAL |      LOC |
-------------------------------------------------
|     10 |  KING | ACCOUNTING | 5000 | NEW YORK |
|     20 | SCOTT |   RESEARCH | 3000 |   DALLAS |
|     20 |  FORD |   RESEARCH | 3000 |   DALLAS |
|     30 | BLAKE |      SALES | 2850 |  CHICAGO | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T19:14:55.023

如果您想与员工一起找到最高工资，请使用 ANSI 标准`row_number()`函数：

```
select d.deptno, e.ename, d.dname, e.sal, d.loc
from (select e.*, row_number() over (partition by deptno order by sal desc) as seqnum
      from employees e
     ) e join
     departments d
     on e.deptno = d.deptno
where seqnum = 1 
```

[SQL小提琴](http://www.sqlfiddle.com/#!6/78f2b/4)

# php - crontab 没有运行

> ID：15189329
> 
> 赞同：0
> 
> 时间：2013-03-03T18:40:38.557
> 
> 标签：php, cron, crontab

我最近在使用 crontab 时遇到了一些问题。切换服务器后，我意识到我的 cronjobs 都没有运行。查看 PHP 信息后，我意识到 php 是用 CGI 运行的，所以我意识到我必须切换`lynx -dump URL_HERE`到`php -q PATH_HERE`.

在实际的 PHP 文件中，我盯着它，想`#!/usr/bin/php -q`定义 php 在我的服务器上的位置。但是，它没有运行。我什至设置了 crontab，以便在任何运行时向我发送电子邮件。没有电子邮件。我检查了我的垃圾邮件、垃圾邮件、垃圾邮件，甚至尝试过切换电子邮件。没有。

这就是我现在所拥有的：`* * * * * php -q /home/USER/public_html/file.php`。

如果我将它复制并粘贴到命令行中，它会非常好用。如果我通过 crontab 运行它，它不会运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:45:27.160

您可以做几件事来调试它。

1）在您的 crontab 中将您的条目更改为：

```
* * * * * php -q /home/USER/public_html/file.php > /tmp/filecron 2>&1 
```

确保通过键入以下内容来编辑条目：

```
crontab -e 
```

然后运行：

```
tail -f /tmp/filecron 
```

在运行时调试输出。

2) 作为 sudo 用户或 root，跟踪 cron 日志以确保您的 cron 正确执行：

```
sudo tail -f /var/log/cron 
```

第一步将为您提供与 php 文件本身相关的信息（语法错误等），如果这是失败的原因。如果 crontab 本身配置不正确，第二步将帮助您。

您打算让这项工作每 5 分钟运行一次，对吗？这就是它将对您声明的行执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:48:06.697

您缺少环境变量。尝试像这样的简单测试

将此添加到您的 crontab

```
* * * * *  set > /tmp/vars 
```

等待 2 -3 分钟，返回并删除您刚刚创建的 crontab 条目。

下一个，

从您通常使用的 shell 命令行

```
set > myvars
diff myvars /tmp/vars 
```

这将向您展示环境的差异。修改您的 cron 作业环境。只需添加需要的内容。

# ruby-on-rails-3 - Rails 登录 Facebook

> ID：15189332
> 
> 赞同：0
> 
> 时间：2013-03-03T18:40:53.847
> 
> 标签：ruby-on-rails-3, facebook, omniauth

我使用omniauth-facebook gem。一般来说，我完全关注 railscast 第 360 集（[http://railscasts.com/episodes/360-facebook-authentication?autoplay=true](http://railscasts.com/episodes/360-facebook-authentication?autoplay=true)）所以我在教程中都喜欢。

在 facebook 上创建应用程序后，我将其设置为 URL a `http://localhost:3000/`，启用沙盒模式。

正如 Ryan 所说，在创建 omniauth.rb 之后，`http://localhost:3000/auth/facebook`应该将我重定向到我的 FB 应用程序页面。

但什么也没有发生。没有错误，只是空白页。

我真的很确定，这就像教程中一样，不知道有什么问题

**UPD：**现在它显示错误：

```
{
   "error": {
      "message": "Missing client_id parameter.",
      "type": "OAuthException",
      "code": 101
   }
} 
```

# iphone - 检查文件是否更新

> ID：15189334
> 
> 赞同：1
> 
> 时间：2013-03-03T18:41:09.950
> 
> 标签：iphone, ios, objective-c, nsfilemanager

我有 iOS 应用程序。文档目录中有一些文件。我需要检查这些文件是否被编辑或替换。正确的方法是什么？我应该对文件或上次编辑时间进行一些哈希（如何在 iOS 中获取这个时间）还是有更好的方法来实现这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T18:59:28.120

您可以使用此代码获取文件修改日期：

```
NSFileManager* fileManager = [NSFileManager defaultManager];
NSDictionary* attributes = [fileManager attributesOfItemAtPath:path error:nil];

if (attributes != nil) {
    NSDate *date = (NSDate*)[attributes objectForKey:NSFileModificationDate];
    NSLog(@"Last modification date: %@", [date description]);
} else {
    NSLog(@"Not found");
} 
```

[在这里](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/attributesOfItemAtPath%3aerror%3a)你可以找到`attributesOfItemAtPath:error:`函数的文档，在[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/doc/constant_group/File_Attribute_Keys)你可以得到文件属性列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:45:23.067

散列整个文件会起作用，但对于大多数目的来说有点过分。我会结合一些可以快速访问的东西：

*   NSFileModificationDate
*   NSFileSize
*   NSFileCreationDate
*   NSFileSystemFileNumber（inode 编号）

如果您使用的是基于 NSURL 的 API（iOS 4.0+），我会使用

*   NSURLContentModificationDateKey（修改时间）
*   NSURLFileSizeKey
*   NSURLCreationDateKey
*   NSURLFileAllocatedSizeKey
*   NSURLAttributeModificationDateKey ( `st_ctime`?)

我至少会使用修改时间和文件大小。除非内容发生变化，否则其他事情通常不会改变，但有几点需要注意：

*   如果用户从备份中恢复，NSFileSystemFileNumber（inode 编号）可能会发生变化。
*   NSURLAttributeModificationDateKey 应该在*属性*更改时更改。如果是`st_ctime`（我不完全确定它是），*几乎*可以保证捕获对文件的所有更改，但也可能会捕获许多不代表文件内容更改的更改。我不知道这些更改是否发生在外部（例如，iTunes/iCloud 备份是否将属性设置为备份过程的一部分？）。

# json - Node.js：扩展 JSON 对象

> ID：15189337
> 
> 赞同：1
> 
> 时间：2013-03-03T18:41:33.003
> 
> 标签：json, node.js, extend

我想扩展`JSON`node.js 的原生对象。在我的示例中，我能够对其进行扩展以添加一个`merge(json1, json2)`合并 2 个 JSON 的函数：

```
JSON.merge = function(target) {
    var sources = [].slice.call(arguments, 1);
    sources.forEach(function (source) {
        for (var prop in source) {
            target[prop] = source[prop];
        }
    });
    return target;
} 
```

这个脚本很大程度上来自这个问题：[Combine or merge JSON on node.js without jQuery](https://stackoverflow.com/questions/14974864/combine-or-merge-json-on-node-js-without-jquery)

为了获得更简洁的代码，我将此脚本放在库文件夹中，并在我的主脚本中使用它。这就是我所做的...

我的`lib/JSON.js`文件：

```
extends.merge = function(target){
    // The same script as above.
} 
```

在我的`app.js`文件中：

```
JSON = require('./lib/JSON') 
```

它运行良好，但现在原生 JSON 方法不起作用（如`.stringify`）。然后我稍微挖掘了一下，并尝试使用 扩展 JSON `.prototype`，如下所示（在 中`lib/JSON.js`）：

```
extends.prototype.merge = ... 
```

但是得到以下错误：

```
TypeError: Cannot set property 'merge' of undefined 
```

我真的不知道该做什么（以及我在做什么），因为解决一个问题会导致另一个问题。

请，需要帮助。

谢谢。

# php - PHP/MySQL 计数行数

> ID：15189339
> 
> 赞同：1
> 
> 时间：2013-03-03T18:41:59.000
> 
> 标签：php, mysql

我有以下 PHP 代码：

```
$sql   = new mysqli(/*connection info/db*/);
$query = $sql->$query("SELECT * from users WHERE /* rest of code */); 
```

我现在想知道是否有任何方法可以检索上述查询找到的行数......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:53:43.620

您应该考虑使用 PDO，它更安全且更面向对象：

```
$database = new PDO(/*connection info/db*/);

$statement = $database->prepare('SELECT FROM fruit WHERE fruit_id = ? AND name = ?');
$statement->bindValue( 1, 'fruit_id_value' );
$statement->bindValue( 2, 'Banana' );
$statement->execute();

$count = $statement->rowCount(); # <-- The row count you are looking for! 
```

--> 访问[http://php.net/manual/en/pdostatement.rowcount.php](http://php.net/manual/en/pdostatement.rowcount.php)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:44:30.420

在 Mysqli 我知道你可以做到

`printf("Number of rows: %d.\n", $sql->num_rows);`

这是所有代码

```
<?php
/* Open a connection */
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = $mysqli->prepare($query)) {

    /* execute query */
    $stmt->execute();

    /* store result */
    $stmt->store_result();

    printf("Number of rows: %d.\n", $stmt->num_rows);

    /* close statement */
    $stmt->close();
}

/* close connection */
$mysqli->close();
?> 
```

我从这个 php 手册[http://php.net/manual/en/mysqli-stmt.num-rows.php](http://php.net/manual/en/mysqli-stmt.num-rows.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:02:09.137

SELECT 查询有一个修饰符，可以保留您需要的计数信息：SQL_CALC_FOUND_ROWS

```
SELECT SQL_CALC_FOUND_ROWS  * from users WHERE /* rest of code */ 
```

运行该查询后，您可以运行 SELECT FOUND_ROWS(); 得到结果的行数。

如果你只需要计数，你可以做

```
SELECT count(*) from users WHERE /* rest of code */ 
```

# mysql - MySQL：BETWEEN ..如何检查范围？

> ID：15189340
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:42:06.447
> 
> 标签：mysql, range, between

我需要针对以下情况编写查询：

3 列：“box”、“in”、“out”（box 是整数，in 和 out 是日期）

我需要一些东西来测试从“输入”日期到“输出”日期（这些日期之间的时间段）是否已经给出了某个盒子 ID 号。

我想做类似的事情：

```
SELECT COUNT(*) FROM `tbl` WHERE `box` = '#' AND ***period*** BETWEEN 'date1' AND 'date2' 
```

（我知道 BETWEEN 不能以这种方式工作（[链接](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)），但这只是为了给你一个想法......）

***period*** = 我尝试在数据库中注册的新日期

所以，如果查询返回“0”，我知道我可以在这些日期分配这个框#，如果不是，我知道我不能。我从上周就被困在这里了！！X（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:46:18.637

我想你想要：

```
SELECT COUNT(*) FROM tbl WHERE box = '#' AND
    `in` =< 'date1' AND out >= 'date1'
    OR `in` =< 'date2' AND out >= 'date2' 
```

或者

```
SELECT ... AND
    period BETWEEN `in` AND out 
```

# c# - 泛数字检查的快速算法

> ID：15189341
> 
> 赞同：3
> 
> 时间：2013-03-03T18:42:06.823
> 
> 标签：c#

我正在做一个项目，我需要一个非常快速的算法来检查提供的数字是否是泛数字的。尽管逻辑看起来很合理，但我对下面描述的方法的性能并不特别满意。

我可以分别在大约 520 毫秒、600 毫秒和 1600 毫秒内检查多达 100 万个 9 位数字。我正在开发一个低延迟的应用程序，在生产中我将拥有一个大约 9 或 95 亿个 7 到 9 位数字的数据集，我需要检查这些数字。

我现在有三个候选人（嗯，真的有两个）使用以下逻辑：

**方法 1：**我将一个 input`N`拆分为一个包含其组成数字的字节数组，使用函数对其进行排序，并使用循环检查元素与计数器的一致性`Array.Sort`来遍历数组：`for`

```
 byte[] Digits = SplitDigits(N);
 int len = NumberLength(N);
 Array.Sort(Digits);
 for (int i = 0; i <= len - 1; i++)
 {
     if (i + 1 != Digits[i])
          return false;
 } 
```

**方法 2：**这种方法基于有点可疑的逻辑，但我将输入拆分`N`为组成数字的字节数组，然后进行以下测试：

```
 if (N * (N + 1) * 0.5 == DigitSum(N) && Factorial(len) == DigitProduct(N))
      return true; 
```

**方法 3：**我不喜欢这种方法，因此不是真正的候选者，但我将 int 转换为字符串，然后用于`String.Contains`确定所需的字符串是否为 pandigital。

第二种和第三种方法具有相当稳定的运行时间，尽管第一种方法反弹很多 - 它有时可以高达 620 毫秒。

所以理想情况下，我真的很想将百万 9 位标记的运行时间减少到 10 毫秒以下。有什么想法吗？

我在 2GHz 的 Pentium 6100 笔记本电脑上运行它。

PS - 第二种方法的数学逻辑合理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:43:58.467

### 方法一

预先计算 362880 个 9 位泛数字的排序列表。这将只需要几毫秒。然后对于每个请求，首先检查该数字是否可以被 9 整除：它必须是泛数字的。如果是，则使用二进制搜索来检查它是否在您的预先计算的列表中。

### 方法二

再次检查数字是否能被 9 整除。然后使用位向量来跟踪数字的存在。也可以使用模乘法来代替乘法除法。

```
static bool IsPandigital(int n)
{
    if (n != 9 * (int)((0x1c71c71dL * n) >> 32))
        return false;

    int flags = 0;
    while (n > 0) {
        int q = (int)((0x1999999aL * n) >> 32);
        flags |= 1 << (n - q * 10);
        n = q;
    }
    return flags == 0x3fe;
} 
```

方法 1 的速度为 15ms/1M。方法 2在我的机器上以**5.5ms/1M的速度出现。**这是在 i7 950 上编译为 x64 的 C#。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:45:16.877

只是一个想法：（在维基百科对泛数字的定义之后）

```
int n = 1234567890;
int Flags = 0;
int Base = 10;
while(n != 0)
{
    Flags |= 1<<(n % Base); n /= Base;
}
bool bPanDigital = Flags == ((1 << Base) - 1); 
```

# templates - dart webui 中的 TBODY 模板

> ID：15189342
> 
> 赞同：1
> 
> 时间：2013-03-03T18:42:07.527
> 
> 标签：templates, dart, dart-webui

我了解 dart webui 和`<template>`项目的限制。

IE：因此可以绕过此限制以使用表格模板：

```
<table>
  <tbody iterate="row in rows">
  <tr iterate="cell in row">
    <td> {{cell}} </td>
  </tr>
  </tbody>
</table> 
```

然而。*当表格应该有多个tbody*部分时，应该如何使用模板（例如：http: [//jsfiddle.net/umRJr/](http://jsfiddle.net/umRJr/)）

IE：

```
<table>
  <thead><tr><td>title</td></tr></thead>
  <template iterate="section in sections"> <!-- can't do this... :-( -->
    <tbody iterate="row in section">
      <tr iterate="cell in row">
         <td> {{cell}} </td>
      </tr>
    </tbody>
   </template>
</table> 
```

因为我们想要类似的东西

```
<table>
   <thead> ... some headers here </thead>
   <tbody> .. content1 .. </tbody>
   <tbody> .. content2 .. </tbody>
    ...
   <tbody> .. content N .. </tbody>
</table> 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:03:05.303

正式回答，“很快”。:) 见[https://github.com/dart-lang/html5lib/issues/46](https://github.com/dart-lang/html5lib/issues/46)

# c++ - 单例结构。有人可以告诉我如何做到这一点吗？

> ID：15189343
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:42:08.197
> 
> 标签：c++, singleton

有人给了我制作单例结构的示例代码。现在我一直在尝试添加它（POD 成员）并实际使用它（首先在 main() 中，然后在其他函数中使用 leter）。它符合我试图添加注释的行。有人可以告诉我如何做我想做的事吗？

有人给了我制作单例结构的示例代码。现在我一直在尝试添加它（POD 成员）并实际使用它（首先在 main() 中，然后在其他函数中使用 leter）。它符合我试图添加注释的行。有人可以告诉我如何做我想做的事吗？

```
//What - oh - what, does one have to do to get this sob to format the code correctly!

#include<iostream>
using namespace std;

const int MAXNAME = 31;

struct Singleton {
private:

Singleton() {}
Singleton(const Singleton&); // Disabling copy-ctor
Singleton& operator=(const Singleton&);

static Singleton* instance;

public:

int DeptNum;
char Name[MAXNAME];
int Age;
int EmplID;  // key field

static Singleton* GetInstance() {
    if (!instance)
        instance = new Singleton();

    return instance;
}

};

Singleton* Singleton::instance = NULL;
//Singleton* TmpRec = Singleton* Singleton::instance;  <-   COMMENTED BECAUSE WRONG

int main(void) {

   //Access POD members and load them with data

   //TmpRec-> DeptNum = 30;  <- COMMENTED BECAUSE WRONG

   //Print out POD members

   //cout << "Value of DeptNum is: " << TmpRec->DeptNum << endl;  <- COMMENTED BECAUSE WRONG

   return 0;
} 
```

PS：这件事在格式化代码时正在杀死我......

* * *

编辑：

问题不在于我是否应该使用单例。这与单例在实践中的好坏无关。这不是关于我之前问过的关于单例结构的任何问题（结构是这里的操作词 - 不是类）。这甚至与结构和类之间的区别无关。

我付出了很多代价来学习如何最好地学习。是的，我也学习基础知识（一直）。这个问题的目的是得到一个实际工作的小代码（编译时没有错误，并且做了几件我需要在行动中看到的简单的事情）。

因为你不喜欢我的问题而拒绝我？好吧，我无法控制，我猜这是人们的特权。

那些想添加一些实际上具有建设性的东西的人......非常感谢。

你们中那些只是表现得像……嗯哼！还是跳过你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:52:18.873

代码不正确，因为您使用的是私有数据成员实例而不是公共成员函数 GetInstance()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:00:18.850

第一部分很好，第二部分应该是：

```
Singleton* TmpRec = NULL;

int main(void) {
    TmpRec = Singleton::GetInstance();
    TmpRec->DeptNum = 30;
    cout << "Value of DeptNum is: " << TmpRec->DeptNum << endl;
    return 0;
} 
```

请注意，在 main 中调用 GetInstance，并且从不使用 ::instance。

至于完全工作的代码，这是一个使用引用而不是指针的版本：

```
#include<iostream>
using namespace std;

const int MAXNAME = 31;

struct Singleton {
private:
    Singleton() {}
    Singleton(const Singleton&);
    Singleton& operator=(const Singleton&);

    static Singleton* instance;

public:
    int DeptNum;
    char Name[MAXNAME];
    int Age;
    int EmplID;

    static Singleton& GetInstance() {
        if (!instance) {
            instance = new Singleton();
        }
        return *instance;
    }
};
Singleton* Singleton::instance = NULL;

int main(void) {
    Singleton &TmpRec = Singleton::GetInstance( );
    TmpRec.DeptNum = 30;
    cout << "Value of DeptNum is: " << TmpRec.DeptNum << endl;
    return 0;
} 
```

# c# - 将 IP 地址添加到 HttpRequestMessage

> ID：15189350
> 
> 赞同：6
> 
> 时间：2013-03-03T18:43:11.367
> 
> 标签：c#, unit-testing, asp.net-web-api

如何将 IP 地址添加到 HttpRequestMessage？

我正在为 Web.API 应用程序编写单元测试，我有一个 AuthorizeAttribute 来检查调用者的 IP 地址 -

```
 string[] AllowedIPs = new string[] { "127.0.0.1",  "::1" }
        string sourceIP = "";

        var contextBase = actionContext.Request.Properties["MS_HttpContext"] as System.Web.HttpContextBase;

        if (contextBase != null)
        {
            sourceIP = contextBase.Request.UserHostAddress;
        }

        if (!string.IsNullOrEmpty(sourceIP))
        {
            return AllowedIPs.Any(a => a == sourceIP);
        }
        return false; 
```

我构建一个测试请求如下 -

```
 var request = CreateRequest("http://myserver/api/CustomerController, "application/json", HttpMethod.Get);            
    HttpResponseMessage response = client.SendAsync(request).Result; 
```

. .

```
 private HttpRequestMessage CreateRequest(string url, string mthv, HttpMethod method)
    {
        var request = new HttpRequestMessage();
        request.RequestUri = new Uri(url);
        request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mthv));
        request.Method = method;
        return request;
    } 
```

但是 actionContext.Request.Properties["MS_HttpContext"] 为空，我无法执行测试。

**下面的解决方案**- 请参阅我自己的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T02:01:57.813

感谢 Davin 的建议。

这是解决方案 -

```
private HttpRequestMessage CreateRequest(string url, string mthv, HttpMethod method)
{
    var request = new HttpRequestMessage();

    var baseRequest = new Mock<HttpRequestBase>(MockBehavior.Strict);
    var baseContext = new Mock<HttpContextBase>(MockBehavior.Strict);

    baseRequest.Setup(br => br.UserHostAddress).Returns("127.0.0.1");
    baseContext.Setup(bc => bc.Request).Returns(baseRequest.Object);

    request.RequestUri = new Uri(url);
    request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mthv));

    request.Properties.Add("MS_HttpContext", baseContext.Object);

    request.Method = method;
    return request;
} 
```

然后按以下方式使用该方法 -

```
 var request = CreateRequest("http://myserver/api/CustomerController, "application/json", HttpMethod.Get);            
 HttpResponseMessage response = client.SendAsync(request).Result; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T22:39:51.807

您似乎正在尝试从主机获取 IP 地址`myserver`，在这种情况下，任何东西都无法解析。这使属性为`MS_HttpContext`空。

我会建议一种不同的方法。首先，模拟`System.Web.HttpContextBase`并设置返回值`Request.UserHostAddress`，然后，在您的测试设置中，直接设置属性：

```
private HttpRequestMessage CreateRequest(string url, string mthv, HttpMethod method)
    {
        var request = new HttpRequestMessage();
        request.RequestUri = new Uri(url);
        request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mthv));
        request.Method = method;
        request.Property["MS_HttpContext"] = mockedHttpContextBase //here
        return request;
    } 
```

# javascript - 如何在 kinetic.js 舞台上获取我单击的位置的鼠标位置？

> ID：15189353
> 
> 赞同：0
> 
> 时间：2013-03-03T18:43:40.990
> 
> 标签：javascript, html, kineticjs

我是 KineticJS 的新手，无法获取舞台的鼠标坐标`mousedown`。我设法显示坐标，`mouseout`但`mouseover`似乎`mousedown`只适用于已添加到舞台的**图像/形状，而不是舞台本身。**

谁能向我解释为什么会这样？请帮助我解决问题。

**[这是](http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/)我试过的例子：**

* * *

**代码：**

```
 stage.on('mouseout', function() {
        var mousePos = stage.getMousePosition();
        writeMessage(messageLayer, 'Mouseout triangle:' + mousePos.x);
    });

    stage.on('mouseout','mousemove', function() {

    });

    stage.on('mousedown', function() {
        alert('OK!');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:59:17.223

jQuery 事件侦听器函数具有传入的事件参数，其中包含您需要的所有信息。在这种情况下，您可能需要 offsetX 和 offsetY。

```
$('body').click(function (e) {
    console.log(e.offsetX, e.offsetY); 
}); 
```

# shell - 处理完成后读取标准错误

> ID：15189354
> 
> 赞同：3
> 
> 时间：2013-03-03T18:43:50.433
> 
> 标签：shell, go, stderr

`convert`我用内存中的一些数据（来自 html 表单上传/网络服务器）调用 imagemagick 的命令。这工作正常，但我想在出现错误时获得错误输出`convert`。我怎样才能做到这一点？

这是我的代码：

```
package main

import (
    "bytes"
    "io"
    "io/ioutil"
    "log"
    "os/exec"
    "path/filepath"
)

func runImagemagick(data []byte, destfilename string) error {
    data_buf := bytes.NewBuffer(data)

    cmd := exec.Command("convert", "-", destfilename)
    stdin, err := cmd.StdinPipe()
    if err != nil {
        return err
    }

    err = cmd.Start()
    if err != nil {
        return err
    }
    _, err = io.Copy(stdin, data_buf)
    if err != nil {
        return err
    }
    stdin.Close()
    err = cmd.Wait()
    if err != nil {
        return err
    }
    return nil
}

func main() {
    data, err := ioutil.ReadFile("source.gif")
    if err != nil {
        log.Fatal(err)
    }
    err = runImagemagick(data, filepath.Join("/tmp", "abc", "dest.png"))
    if err != nil {
        log.Fatal(err)
    }
} 
```

现在人为的问题是目录`/tmp/abc/`不存在。通常`convert`会给我这个结果：

```
$ convert - /tmp/abc/foo.png < source.gif 
convert: unable to open image `/tmp/abc/foo.png': No such file or directory @ error/blob.c/OpenBlob/2617.
convert: WriteBlob Failed `/tmp/abc/foo.png' @ error/png.c/MagickPNGErrorHandler/1755. 
```

但我没有在我的小程序中“看到”这个错误消息。如何获取错误消息并将其显示给我的用户？

（另一个子问题是：如果这段代码看起来不错，你能给我一个建议吗？它有什么明显的缺陷吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:04:35.203

管子`stdout`也是`stderr`。例如，

```
package main

import (
    "bytes"
    "io"
    "io/ioutil"
    "log"
    "os/exec"
    "path/filepath"
)

func runImagemagick(data []byte, destfilename string) error {
    cmd := exec.Command("convert", "-", destfilename)
    stdin, err := cmd.StdinPipe()
    if err != nil {
        return err
    }
    stdout, err := cmd.StdoutPipe()
    if err != nil {
        return err
    }
    stderr, err := cmd.StderrPipe()
    if err != nil {
        return err
    }
    err = cmd.Start()
    if err != nil {
        return err
    }
    _, err = io.Copy(stdin, bytes.NewBuffer(data))
    if err != nil {
        return err
    }
    stdin.Close()
    outData, err := ioutil.ReadAll(stdout)
    if err != nil {
        return err
    }
    if len(outData) > 0 {
        log.Print(string(outData))
    }
    errData, err := ioutil.ReadAll(stderr)
    if err != nil {
        return err
    }
    if len(errData) > 0 {
        log.Print(string(errData))
    }
    err = cmd.Wait()
    if err != nil {
        return err
    }
    return nil
}

func main() {
    data, err := ioutil.ReadFile("source.gif")
    if err != nil {
        log.Fatal(err)
    }
    err = runImagemagick(data, filepath.Join("/tmp", "abc", "dest.png"))
    if err != nil {
        log.Fatal(err)
    }
} 
```

输出：

```
2013/03/03 15:02:20 convert.im6: unable to open image `/tmp/abc/dest-0.png': No such file or directory @ error/blob.c/OpenBlob/2638.
convert.im6: WriteBlob Failed `/tmp/abc/dest-0.png' @ error/png.c/MagickPNGErrorHandler/1728.
2013/03/03 15:02:20 exit status 1
exit status 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:08:26.643

不需要使用管道，因为`bytes.Buffer`实现了`io.Writer`接口，因此可以很好地使用它来收集程序的输出：

```
func runImagemagick(data []byte, destfilename string) error {     
    cmd := exec.Command("convert", "-", destfilename)

    var stdout, stderr bytes.Buffer
    cmd.Stdout = &stdout
    cmd.Stderr = &stderr

    err := cmd.Run()
    if err != nil {
        if ee, ok := err.(*exec.ExitError); ok {
            return &imagemagickError{ee, stdout.Bytes(), stderr.Bytes()}
        } else {
            return err
        }
    }

    if stderr.Len() > 0 {
        return errors.New(fmt.Sprintf("imagemagick wrote to stderr: %s", stderr.Bytes()))
    }

    if stdout.Len() > 0 {
        log.Print(stdout.Bytes())
    }
    return nil
 } 
```

# ruby-on-rails - 关联模型 Rails 3 的 ActiveRecord 查询

> ID：15189361
> 
> 赞同：0
> 
> 时间：2013-03-03T18:44:08.700
> 
> 标签：ruby-on-rails, rails-activerecord

我在 Rails 中有三个模型，Project(date, has_many :project_savings), Usage(month, amount, has_many :project_savings) 和 MonthlyProjectSaving(amount, belongs_to :usages, :projects)。

它的设置使每个项目都有一定数量的节省，这些节省对应于使用月份的数量。我正在尝试找到所有具有相应`project.date`>=的项目节省`usage.month`，并且`usage.amount == 0`以最安全的方式进行。`usage.month`并且`project.date`都是日期类型。

下面基本上是我想要得到的，但我尝试了很多方法，但无法正确使用语法。

在我的项目显示视图中：

```
s = @project.monthly_project_savings
s.where(s.usage.month >= @project.date).where(s.amount: 0) 
```

我更喜欢一个不会​​让它对 SQL 注入开放的解决方案。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:19:41.240

我想你可能正在寻找这样的东西，但我不确定是什么`monthly_project_savings`，或者 Usage#month 和 Project#date 是什么类型。

```
s.joins(:usages).where('usages.month >= ?', @project.date).where(amount: 0) 
```

在字符串中使用`.where`占位符非常好，因为参数会自动适当地引用。您应该避免使用不受信任的参数进行直接 SQL 修改或插值。更多信息： http: [//guides.rubyonrails.org/security.html#sql-injection](http://guides.rubyonrails.org/security.html#sql-injection)

顺便说一句：在视图中进行查询不是非常 MVC；最好在控制器中进行，甚至更好的是在模型中进行。

# php - MySQL - 不区分大小写的搜索

> ID：15189364
> 
> 赞同：5
> 
> 时间：2013-03-03T18:44:16.020
> 
> 标签：php, mysql, search, letters

为用户构建我的搜索引擎以搜索三个变量 $Title、$Text 和 $Number...当用户搜索时，我如何找到所有结果，无论用户在 $query 中键入的大小写类型（小写还是大写） ?

```
$query = trim ($query);

$raw_results = mysql_query("SELECT * FROM posts
        WHERE (`Number` LIKE '%".$query."%') OR (`Title` LIKE '%".$query."%') OR (`Text` LIKE '%".$query."%') ") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T18:49:37.603

使用不区分大小写[的排序规则](http://dev.mysql.com/doc/refman/5.5/en/charset-collate.html)

```
SELECT * FROM posts
WHERE (`Number` LIKE '%".$query."%') 
OR (`Title` LIKE '%".$query."%') 
OR (`Text` LIKE '%".$query."%')
COLLATE utf8_ci  --'ci' stands for case insensitive: choose the colaltion that fits your encoding 
```

支持的排序规则列表在这里：[https ://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html](https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T18:50:26.590

您可以使用 mysql [LOWER()](http://www.sqlinfo.net/mysql/mysql_function_upper_lower.php)函数：

```
$query=strtolower($query); //Query to lower case
$raw_results = mysql_query("SELECT * FROM posts
    WHERE (LOWER(`Number`) LIKE '%".$query."%') OR (LOWER(`Title`) LIKE '%".$query."%') OR (LOWER(`Text`) LIKE '%".$query."%') ") or die(mysql_error()); 
```

但是，不推荐使用 php 中的 mysql 函数，您应该使用 mysqli 而不是 mysql。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T18:49:24.467

[`char`默认情况下，MySQL 对、`varchar`和`text`](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)（非二进制字符串）[不区分大小写。](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T18:58:08.533

我在自己的数据库中为一家公司做的一件事是使用 PHP 中的 strtoupper() 函数将所有内容都设为大写（特别是出于个人安全原因）。如果您在您希望不区分大小写的字段中使用 utf8_ci 排序规则，这也会有所帮助。

# content-management-system - 如何在虚拟主机上手动安装 umbraco？

> ID：15189365
> 
> 赞同：2
> 
> 时间：2013-03-03T18:44:16.747
> 
> 标签：content-management-system, installation, umbraco, webmatrix, shared-hosting

如何在虚拟主机上手动安装 umbraco？

我通过 arvixe 购买了 asp.net 网络托管，它提供 umbraco 安装（一次免费，并为安装扩展等任何其他升级收费）。

他们通过网络画廊提供一键式安装程序，其中指出 umbraco 4.9

但是，我对如何以及在何处开始将 umbraco 安装到网络主机感到困惑。

**我通过网络矩阵成功安装在我的本地电脑上，但是这里（网络托管）呢，只有网络画廊。我该怎么办？我错过了什么吗？请帮忙。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:59:55.487

只需使用 FTP 将您的本地安装复制到您的网络服务器，修改 web.config 以指向新数据库，您的网站应该可以启动并运行。

# android - 在市场上发布 android 应用程序

> ID：15189376
> 
> 赞同：0
> 
> 时间：2013-03-03T18:45:27.953
> 
> 标签：android, google-play

我想在 android 市场上免费发布一个应用程序。我想保持大部分功能免费，但如果用户升级（通过付费），我想用修改/增强的功能替换某些免费功能。

我想知道程序是如何进行的；我的意思是如何处理免费与付费功能。如果有人提出一些见解，我会很高兴。是否有任何单一的文件/程序可以解释这一点？

我正在浏览以下链接：

a)[出版](http://developer.android.com/distribute/googleplay/publish/preparing.html)

b)[发布概述](http://developer.android.com/tools/publishing/publishing_overview.html)

c)[准备发布](http://developer.android.com/tools/publishing/preparing.html)

d)[质量指南](http://developer.android.com/distribute/googleplay/quality/core.html)

但是，他们似乎并没有足够彻底地解释这些事情。任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:49:18.553

听起来您想查看应用内结算。[这是来自 Android 网站的指南/文档](http://developer.android.com/google/play/billing/billing_integrate.html)。

您可能还想查看[这个](http://developer.android.com/google/play/billing/billing_overview.html)，它有一个工作演示。

# imagemagick - 合成另一个图像，但带有边距/填充

> ID：15189380
> 
> 赞同：3
> 
> 时间：2013-03-03T18:45:48.367
> 
> 标签：imagemagick

我目前正在执行以下操作以将大图像叠加到另一个图像上：

```
$ convert orig.png overlay.png -gravity center -composite new.png 
```

overlay.png 很大，实际上只是一个半透明的纹理。

但在某些情况下，我希望在叠加层周围留出 1 像素大小的边距。所以：

```
+--------------+
|  +--------+  |
|  | Overlay|  |
|  +--------+  |
+--------------+ 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-07T12:23:13.570

是的，例如，您可以为`overlay.png`图像添加边框，然后使用`orig.png`图像组合结果。

要添加白色 1px 边距，您可以使用以下命令：

```
convert overlay.png -bordercolor White -border 1x1 overlay_border.png
convert orig.png overlay_border.png -gravity center -composite new.png 
```

# c# - 为什么我会收到此时区错误，是否有更好的方法在 Google 地图时区和 Windows 时区之间进行映射？

> ID：15189381
> 
> 赞同：5
> 
> 时间：2013-03-03T18:46:03.787
> 
> 标签：c#, datetime, google-maps-api-3, timezone

我有以下代码从位置转换为时区名称。

```
public TimeZoneResponse ConvertCityToTimeZoneName(string location)
{
   TimeZoneResponse response = new TimeZoneResponse();
   var plusName = location.Replace(" ", "+");
   var address = "http://maps.google.com/maps/api/geocode/json?address=" + plusName + "&sensor=false";
   var result = new System.Net.WebClient().DownloadString(address);
   var latLongResult = JsonConvert.DeserializeObject<GoogleGeoCodeResponse>(result);

   if (latLongResult.status == "OK")
   {
       var timeZoneRespontimeZoneRequest = "https://maps.googleapis.com/maps/api/timezone/json?location=" + latLongResult.results[0].geometry.location.lat + "," + latLongResult.results[0].geometry.location.lng + "&timestamp=1362209227&sensor=false";
       var timeZoneResponseString = new System.Net.WebClient().DownloadString(timeZoneRespontimeZoneRequest);
       var timeZoneResult = JsonConvert.DeserializeObject<TimeZoneResult>(timeZoneResponseString);

       if (timeZoneResult.status == "OK")
       {

           response.TimeZoneName = timeZoneResult.timeZoneName;
           response.Success = true;
           return response;
       }
   }
   return response; 
```

}

因此，当我通过“美国纽约”时，它会返回“东部标准时间”

然后我有第二个函数，它将时间从一个源时区转换为上面检索到的另一个时区。

```
var timeInDestTimeZone = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(sourceDate.Date, TimeZoneInfo.Local.Id, destination.TimeZoneName); 
```

它运行良好，直到我遇到这个例子。当我通过：**澳大利亚墨尔本**进入我返回的第一个功能：**澳大利亚东部夏令时间**

当我将澳大利亚东部夏令时间传递给我的第二个函数（作为最后一个参数）时，我得到了这个错误：

**在本地计算机上找不到时区 ID“澳大利亚东部夏令时间”**

关于我做错了什么的任何建议？当我查看来自第二个谷歌地图 API 调用的响应时，这些是我返回的所有字段（以 LA 为例）：

```
{
 "dstOffset" : 0.0,
 "rawOffset" : -28800.0,
 "status" : "OK",
 "timeZoneId" : "America/Los_Angeles",
 "timeZoneName" : "Pacific Standard Time"
} 
```

当我经过墨尔本时，我看到 TimeZoneId 字段设置为：""Australia/Hobart""。这是要查看时区计算的正确字段吗？还是我应该查看其他“偏移”字段？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T19:15:38.573

由于 .NET 实现时区的方式，没有内置的方法来进行`1:1`转换。您将不得不求助于使用 3rd 方库（或实施您自己的转换）。

* * *

这个[问题](https://stackoverflow.com/questions/7084246/get-windows-timezoneinfo-from-latitude-and-longitude)要求与您正在寻找的解决方案非常相似。

提问者通过在内部使用[Olson 时区数据库](http://en.wikipedia.org/wiki/Tz_database)（*tz 数据库/zoneinfo 数据库/IANA 时区数据库*）找到了解决方案。提问者引用了一个[页面](http://www.timdavis.com.au/data/olson-time-zone-database-to-standard-windows-time-zone-v01/)，该页面解释了有关转换的一些信息。

* * *

最后，您可以使用[Noda Time](http://code.google.com/p/noda-time/)，它实现了您正在寻找的这个功能。Jon Skeet 的[回答](https://stackoverflow.com/a/7084290/238722)让我们对图书馆在 2011 年的发展有了早期的了解。

该库的[关键概念页面](http://code.google.com/p/noda-time/wiki/KeyConcepts)包含一个解释转换功能的[日期/时区块。](http://code.google.com/p/noda-time/wiki/KeyConcepts#DateTimeZone)

* * *

**更新**

这是有关如何创建此类*查找表的*[示例](https://stackoverflow.com/a/15038661/238722)：

 *```
// Note: this version lets you work with any IDateTimeZoneSource, although as the only
// other built-in source is BclDateTimeZoneSource, that may be less useful :)
private static IDictionary<string, string> LoadTimeZoneMap(IDateTimeZoneSource source)
{
    var nodaToWindowsMap = new Dictionary<string, string>();
    foreach (var bclZone in TimeZoneInfo.GetSystemTimeZones())
    {
        var nodaId = source.MapTimeZoneId(bclZone);
        if (nodaId != null)
        {
            nodaToWindowsMap[nodaId] = bclZone.Id;
        }
    }
    return nodaToWindowsMap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:14:21.887

100%？然后使用标准时区名称来验证：

```
http://en.wikipedia.org/wiki/List_of_tz_database_time_zones 
```

如果在给定的机器上找不到时区，则没有保证的解决方法。您应该让您的代码创建一条错误消息，说明出现问题的原因。

您确实意识到给定系统的所有者/管理员可以更改这些设置，或添加新设置 - 这意味着非标准 tz 名称不在 tz 数据库中。*

# python - 如何在Django中重定向两次？

> ID：15189384
> 
> 赞同：1
> 
> 时间：2013-03-03T18:46:19.200
> 
> 标签：python, django

所以我有一个主页（/Main）和一个允许用户与我联系的页面（我们称之为/Contact）。

用户在 Contact 中成功提交表单后，我想将他们重定向到 Main 并在页面顶部显示一个小框，上面写着“表单提交成功”。我已经能够做到这一点，方法是重定向到一个类似于 /Main/Success 的 URL，它基本上是传入成功参数的主视图。

问题是，我不希望用户浏览器中的 URL 显示 /Main/Success。我希望它在 URL 地址框中看起来像 /Main，即使用户在页面顶部看到一个额外的框。这是为了防止人们简单地在地址栏中键入 /Main/Success 并转到顶部有框的页面。用户只有在成功提交表单后才能看到成功框。此外，当用户刷新带有成功框的主页时，它应该只是再次显示主页而没有成功框。

这是否意味着我应该重定向两次？从 /Contact 到 /Main/Success 再到 /Main？如果我这样做，如何让该框显示在 Main 上？任何想法如何解决这个问题？自上次以来，我一直非常困惑，我将非常感谢我能得到的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T18:59:33.813

看看[Django 消息框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)。它允许您仅定义此类消息并避免多次重定向。

您所要做的就是在您的模板中添加一些代码，这些代码将显示如下消息（如果有的话）：

```
{% if messages %}
    {% for message in messages %}
        {{ message }}
    {% endfor %}
{% endif %} 
```

然后您可以像这样在您的视图中向用户“发送”消息：

```
from django.contrib import messages
messages.success(request, 'Form submitted successfully') 
```

有关更多详细信息（例如存在哪些类型的消息以及模板中的消息具有哪些属性），请查看上述文档。

# python - Python：在类代码中显示分配给类对象的属性

> ID：15189385
> 
> 赞同：0
> 
> 时间：2013-03-03T18:46:23.467
> 
> 标签：python

我的一个类对一组对象进行大量聚合计算，然后分配一个适合特定对象的属性和值：即

```
class Team(object):
    def __init__(self, name): # updated for typo in code, added self
        self.name = name

class LeagueDetails(object):
    def __init__(self): # added for clarity, corrected another typo
        self.team_list = [Team('name'), ...]
        self.calculate_league_standings() # added for clarity

    def calculate_league_standings(self):
        # calculate standings as a team_place_dict
        for team in self.team_list:
            team.place = team_place_dict[team.name] # a new team attribute 
```

我知道，只要`calculate_league_standings`一直运行，每个团队都有`team.place`。我想要做的是扫描代码`class Team(object)`并读取所有属性，这些属性都是由类方法创建的，也是由对类对象进行操作的外部方法创建的。我有点厌倦了打字`for p in dir(team): print p`只是为了看看属性名称是什么。`attributes`我可以在 Team 中定义一堆空白`__init__`。例如

```
class Team(object):
    def __init__(self, name): # updated for typo in code, added self
        self.name = name
        self.place = None # dummy attribute, but recognizable when the code is scanned 
```

`calculate_league_standings`返回`team._place`然后添加似乎是多余的

```
@property
def place(self): return self._place 
```

我知道我可以在顶部评论属性列表`class Team`，这是显而易见的解决方案，但我觉得这里必须有一个最佳实践，这里有一些 Pythonic 和优雅的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:35:47.120

如果我对您的问题理解了一半，您想跟踪初始化后添加了实例的哪些属性。如果是这种情况，您可以使用以下内容：

```
#! /usr/bin/python3.2

def trackable (cls):
    cls._tracked = {}

    oSetter = cls.__setattr__
    def setter (self, k, v):
        try: self.initialized
        except: return oSetter (self, k, v)
        try: self.k
        except:
            if not self in self.__class__._tracked:
                self.__class__._tracked [self] = []
            self.__class__._tracked [self].append (k)
        return oSetter (self, k, v)
    cls.__setattr__ = setter

    oInit = cls.__init__
    def init (self, *args, **kwargs):
        o = oInit (self, *args, **kwargs)
        self.initialized = 42
        return o
    cls.__init__ = init

    oGetter = cls.__getattribute__
    def getter (self, k):
        if k == 'tracked': return self.__class__._tracked [self]
        return oGetter (self, k)
    cls.__getattribute__ = getter

    return cls

@trackable
class Team:
    def __init__ (self, name, region):
        self.name = name
        self.region = region

#set name and region during initialization
t = Team ('A', 'EU')

#set rank and ELO outside (hence trackable)
#in your "aggregate" functions
t.rank = 4 # a new team attribute
t.ELO = 14 # a new team attribute

#see witch attributes have been created after initialization
print (t.tracked) 
```

如果我不明白这个问题，请说明我错了哪一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:30:52.413

由于 Python 的动态特性，我不相信您的问题有一个普遍的答案。可以通过多种方式设置实例的属性，包括纯赋值`setattr()`、 和写入`__dict__`。编写一个工具来静态分析 Python 代码并通过分析所有这些方法来正确确定类的所有可能属性将非常困难。

在您的特定情况下，作为您所知道的程序员，`class Team`在许多情况下都会有一个 place 属性，因此您可以决定显式地编写它的构造函数，如下所示：

```
class Team(object):
def __init__(name ,place=None):
    self.name = name
    self.place = place 
```

我想说没有必要定义简单属性的属性，除非您希望在读取或写入时发生副作用或派生。

# ruby-on-rails - 如何在 Rails 中正确渲染部分模板？

> ID：15189387
> 
> 赞同：0
> 
> 时间：2013-03-03T18:46:29.130
> 
> 标签：ruby-on-rails, templates, filter, erb, partial

我有一个列表模型，我用它来表示一个转租（公寓）的列表，我创建了一个过滤器模型作为用户根据自己的喜好过滤列表的一种方式。在我的 Filter 类中，它有一个方法 Listings 来根据表单提交查询列表。

```
class Filter < ActiveRecord::Base
  attr_accessible :air_conditioning, :available_rooms, :bathrooms, :furnished,  :negotiable, :new, :parking, :maximum_price, :private_bathroom, :show, :term, :total_rooms, :utilities, :washer_dryer
  serialize :term

  def listings
    @listings ||=find_listings
  end

private

  def find_listings
    listings=Listing.order(:price)
    listings=listings.where("listings.price <= ?", maximum_price) if maximum_price.present?
    listings=listings.where(total_rooms: total_rooms) if total_rooms.present?
    listings=listings.where(available_rooms: available_rooms) if available_rooms.present?
    listings=listings.where(bathrooms: bathrooms) if bathrooms.present?
    listings=listings.where(term: term)
    listings=listings.where(furnished: furnished)
    listings=listings.where(negotiable: negotiable)
    listings=listings.where(utilities: utilities)
    listings=listings.where(air_conditioning: air_conditioning)
    listings=listings.where(parking: parking)
    listings=listings.where(washer_dryer: washer_dryer)
    listings=listings.where(private_bathroom: private_bathroom)
    listings
  end

end 
```

为了显示这些，我为要呈现部分模板的过滤器创建了一个 show 方法。这是我目前拥有的，但它不会呈现我在 /listings 中创建的名为 _listings.html.erb 的模板

```
<p id="notice"><%= notice %></p>

<%= @filter.listings.size %>

<%= render @filter.listings  %> 
```

这是模板

```
<div style="padding:5px">
<%= link_to 'New Listing', new_listing_path,{:style=>'', :class => "btn"} %>
<h1>Available Sublets</h1>

<table id="listingTable" class="table table-bordered table-hover">
  <tr>
    <th><%= link_to 'Filter', new_filter_path,{:style=>'', :class => "btn"} %><%= link_to 'Clear Filter', listings_path, {:style=>'', :class => "btn"} %></th>
    <th>Address</th>
    <th><u><%= "Price Per Month" %></u></th>
    <th>Description</th>
  </tr>
<% if @listings !=nil %>
    <% @listings.each do |listing| %>
      <tr onmouseover="this.style.cursor='pointer';"
      onclick="window.location.href = '<%= url_for(:controller => 'listings', :action => 'show', :id=>listing.id) %>' " >
        <td><%= image_tag listing.photo.url(:small) %></td>
        <td><%= listing.address %></td>
        <td>$<%= listing.price %></td>
        <td width="40%"><%= listing.description %></td>
      </tr>
    <% end %>
<% end %>
<% else if @listings==nil %>
    <p> Sorry, No Sublets Fit Your Criteria! </p>
<% end %>
</table> 
```

我认为我的命名约定搞砸了，但我找不到正确的方法来做到这一点。任何人都有任何建议。此外，过滤器似乎总是空着。我已经用简单的过滤器对其进行了多次测试，但它从来没有用过。如果有人在我的过滤器中看到错误，请随时指出。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:54:09.980

如果你调用 render 并传递给它一个数组或关系，它实际上会调用部分的单数版本。你打电话时

```
<%= render @filter.listings %> 
```

它最终做的等同于以下内容：

```
<%= render :partial => 'listings/listing', :collection => @filter.listings %> 
```

这相当于

```
<% @filter.listings.each do |listing| %>
  <%= render listing %>
<% end %> 
```

另外，`<% end %> <% else if ... %>周围有错误或部分错误，应该是下面这样

```
<% if @listings != nil %>
    <% @listings.each do |listing| %>
      <tr onmouseover="this.style.cursor='pointer';"
      onclick="window.location.href = '<%= url_for(:controller => 'listings', :action => 'show', :id=>listing.id) %>' " >
        <td><%= image_tag listing.photo.url(:small) %></td>
        <td><%= listing.address %></td>
        <td>$<%= listing.price %></td>
        <td width="40%"><%= listing.description %></td>
      </tr>
    <% end %>
<% else %> (since you already checked if it was nil, you it is implied at this point the value is nil
    <p> Sorry, No Sublets Fit Your Criteria! </p>
<% end %> 
```

我建议用以下方式编写它，因为它更像 Ruby-esque

```
<% if @listings.blank? %>
    <p> Sorry, No Sublets Fit Your Criteria! </p>
<% else %>
     <% @listings.each do |listing| %>
      <tr onmouseover="this.style.cursor='pointer';"
      onclick="window.location.href = '<%= url_for(:controller => 'listings', :action => 'show', :id=>listing.id) %>' " >
        <td><%= image_tag listing.photo.url(:small) %></td>
        <td><%= listing.address %></td>
        <td>$<%= listing.price %></td>
        <td width="40%"><%= listing.description %></td>
      </tr>
    <% end %>
<% end %> 
```

我最终处理这种情况的方式如下：

# 您的过滤器显示视图

```
<p id="notice"><%= notice %></p>

<%= @filter.listings.size %>
<div style="padding:5px">
<%= link_to 'New Listing', new_listing_path,{:style=>'', :class => "btn"} %>
<h1>Available Sublets</h1>

<table id="listingTable" class="table table-bordered table-hover">
  <tr>
    <th><%= link_to 'Filter', new_filter_path,{:style=>'', :class => "btn"} %><%= link_to 'Clear Filter', listings_path, {:style=>'', :class => "btn"} %></th>
    <th>Address</th>
    <th><u><%= "Price Per Month" %></u></th>
    <th>Description</th>
  </tr>
  <%= render(@filter.listings) ||  "<p> Sorry, No Sublets Fit Your Criteria! </p>".html_safe %>
</table> 
```

# 你的'listings/_listing.html.erb'

```
<tr onmouseover="this.style.cursor='pointer';"
  onclick="window.location.href = '<%= url_for(listing) %>' " >
  <td><%= image_tag listing.photo.url(:small) %></td>
  <td><%= listing.address %></td>
  <td>$<%= listing.price %></td>
  <td width="40%"><%= listing.description %></td>
</tr> 
```

# jquery - Jquery load() 在同一个 div 中打开链接

> ID：15189388
> 
> 赞同：1
> 
> 时间：2013-03-03T18:46:32.390
> 
> 标签：jquery, html, replace, load, hyperlink

我很困惑，我什至不知道如何搜索这个问题的答案（我试过谷歌和这里）。我会尽量把这个问题说清楚！基本上我已经设置了一个用户消息收件箱，该收件箱使用 load() 加载到用户页面中。我在这里基于此方法：[http ://www.hashbangcode.com/blog/using-jquery-load-content-page-without-iframe-536.html](http://www.hashbangcode.com/blog/using-jquery-load-content-page-without-iframe-536.html)

我希望它使所有收件箱功能都发生在一个 div 中，而无需重新加载页面。因此，例如，列出所有消息、查看消息、订购消息、删除消息等都可以在不重新加载页面的情况下完成。

到目前为止，我有一个很好的收件箱消息列表，这些消息从 inbox.php 加载到 member.php 上的一个 div 中。看起来很不错。但是，当我单击“包含”收件箱列表中的链接以显示消息时，它会将我带到浏览器中的新页面。我希望消息加载到同一个 div 中，替换收件箱列表。消息 uri 类似于 'inbox/message/321，其中 321 是消息 ID。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:50:12.233

```
$("#inbox-div").on("click", "a", function (e) {
    $("#inbox-div").load($(this).attr("href"));
    e.preventDefault();
}); 
```

你可以试试上面的方法。

基本上，它捕获用户单击内部链接的时间`#inbox-div`，并使用 jQuery`load`函数在其中加载该 URL。

`e.preventDefault();`用于阻止浏览器将用户重定向到 URL。

# java - 基于注解的 JMX

> ID：15189389
> 
> 赞同：0
> 
> 时间：2013-03-03T18:46:54.200
> 
> 标签：java, playframework, guice, java-bytecode-asm, bytecode-manipulation

您将如何实现类似 Spring 的基于注释的 JMX 功能。如果类被标记的`@ManagedResource`类的方法标记，`@ManagedOperation`则通过 JMX 自动公开。

我想避免使用 MBean 表示法创建接口。我正在使用 Play with Guice 框架。首先想到的是幼稚的方法：

*   遍历 Guice 管理的所有类
*   如果类标有注解，则创建符合 MBean 表示法的新接口。修改类，修改后的类应该实现新创建的接口。
*   在 MBean 服务器中注册类的实例。

第二步将使用字节码操作工具完成，例如 ASM。是否可以用 ASM 做到这一点？你将如何实现这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:58:14.283

从技术上讲，您不需要接口。MBean 完全由元数据描述。您可以实现自己的[DynamicMBean](http://docs.oracle.com/javase/6/docs/api/javax/management/DynamicMBean.html)自定义实现，它返回对您的管理“接口”的适当描述（无需实际创建所述接口）。不需要疯狂的字节码操作，只是基本的反射。

# serial-communication - CAN总线协议实现

> ID：15189390
> 
> 赞同：6
> 
> 时间：2013-03-03T18:46:57.267
> 
> 标签：serial-communication, can-bus, lpc

我想学习和实现CAN BUS协议。我已经在软件中使用 MSP430 Launchpad 实现了 UART、SPI、I2C 和单线总线协议。现在我想了解CAN Bus协议。我有 mBed LPC 1768 Cortex M3 开发板。mBed 有 Can Bus 库，但我想编写自己的库，以便详细了解它，即我为其他通信协议所做的方式。

我无法找到合适的资源开始，材料似乎散落在网上。任何人都可以指导我如何使用我提供的开发板编写和实现 CAN 总线协议。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T11:57:41.930

与 I2C 或 SPI 相比，开发 CAN 库相对容易。这是因为您的 Cortex 的 CAN 控制器将处理大多数复杂的事情。

要传输数据，您必须将 ID 和 Data 写入指定的寄存器并设置位以传输数据。

[恩智浦的这份](http://www.nxp.com/documents/application_note/AN10438.pdf)应用笔记对您非常有用。

我建议您实现以下功能：

1.  InitCAN - 这应该设置 CAN 的指定波特率。
2.  SetFilters - 大多数 CAN 控制器都带有接收过滤器，所以拥有它是件好事
3.  SendData - 确保您接受 ID_Type 和 RTR 等参数。
4.  RecieveData - 这可以是基于阻塞或中断的。

在开始之前，请阅读 CAN 基础知识以了解。Microchip 的应用笔记[AN713](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1824&appnote=en011694)和[AN754](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1824&appnote=en011947)是一个很好的来源。还有 Vector 的网站和 Wikipedia 文章。

另外，您可以随时在此处或 Electronics.StackExchange.com 上发表您的疑问 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-24T12:42:01.227

好的，所以这篇文章已经很老了，但人们可能会再看一遍：首先，Can bus 根本不是像 USART 或 IC2 这样的用户友好协议，所以你必须非常精确地确定你的 can bit 时间，有工具可以解决这个问题，但是我建议您手动计算它们。对于微控制器，我建议使用 STM32 并远离 PIC 系列。如果它只是 CAN-BUS 而没有更高级别的协议（如 SAE J1939），则步骤非常简单直接：

1）初始化罐头

2）将CAN设置为配置模式，记住只能在配置模式下设置波特率，掩码和过滤器！

3) 设置波特率寄存器。

4) 设置掩码和过滤器。如果您需要接收所有消息，只需将掩码设置为 0x00。然后过滤器将不在乎。

5) 将 CAN 设置为正常或环回模式。（环回模式主要用于调试目的。）

人们在一开始尝试实现 can 的一些值得注意的点可能会遗漏： *** 您需要至少 2 个工作 CAN 节点才能成功传输。（当然具有匹配的波特率）。因此，如果您想通过具有 1 个节点的 CAN 发送一些数据，它将不会成功。因为您的发送器节点不会收到 ACK。

*** 您很可能需要一个 CAN 收发器。不要忘记在收发器的 Tx 和 Rx 引脚之间放置一个 100 欧姆或类似值的电阻器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-11T15:09:01.717

当我学习如何使用 hcs12 龙板实现 can 协议时，我使用软件 canking 与 mcp25050 对话。这很有帮助，因为当你上车时，canking 会为你初始化一切，你所要做的就是学习如何写作和接收。如果你想学习如何初始化，步骤是：

1.  通过设置 CAN 控制寄存器 1 上的位启用 CAN 总线

2.  使能can初始化控制寄存器0

3.  通过检查控制寄存器 1 位等到 CAN 总线处于初始化模式

4.  通过再次设置 CAN 控制寄存器 1 上的位启用 CAN 总线并设置时钟源 - Ethier 总线时钟或 eclock

5.  使用总线时序寄存器设置预分频器波特率和 Tq

6.  设置采样时间和 prop_seg1、prop_seg2 和 phase_seg

7.  在标识符接受寄存器 0-3 或 0-7 上设置接受 id - 设置您的罐头接收所有内容，将它们设置为 00，因为在进行比较时，罐头总线会与进来的 id 进行一个补码比较

8.  设置标识符掩码寄存器 0-3 或 0-7，如果您不想关心任何位，请将它们全部设置为 FF

9.  将标识符接受控制寄存器设置为 32 位扩展或 11 位 - 我使用 32

10.  将控制寄存器 0 设置回正常模式

11.  通过检查控制寄存器 1 等到总线处于正常模式

在此之后您可以开始更改寄存器或读取数据为此您必须选择空罐缓冲区，写入您的id以写入或请求数据，然后在3个发送器寄存器中输入地址，掩码和值如果写入然后指定dlc（3如果写作，8-1如果阅读）。要传输 id 和数据，您必须将 can 传输标志设置为等于 can 传输缓冲区选择。** 取决于您使用的 id 移位可能会很乏味，因此如果您遇到问题，我建议您调试并查看您的发送缓冲区选择寄存器所保存的内容。我有这个错误是因为我在向 mcp25050 发送消息时没有正确移动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-15T11:53:12.570

如果你的 MCU 支持 CAN Bus，你应该从相关的数据表开始。

# c - 如何在linux中测量时间？

> ID：15189397
> 
> 赞同：2
> 
> 时间：2013-03-03T18:47:47.450
> 
> 标签：c, linux, timer

我想在给定时间参数时将数据写入文件：例如我得到 x= 7 -> 意思是在接下来的 7 秒内将一些随机数据写入文件我在这样做时遇到了一些困难，我尝试过使用：clock( ) 和 struct timeval 但它不起作用

我尝试过的事情：

```
struct timeval start, end;
gettimeofday(&start, 0);
while(  gettimeofday(&end, 0) && end.tv_sec - start.tv_sec < sec )
  {
    write....
  } 
```

但它停止了时钟..

很想得到一些帮助。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T18:52:00.483

如果[`getTimeOfDay`](http://pubs.opengroup.org/onlinepubs/009695399/functions/gettimeofday.html)成功，则返回 0，然后您的`while`条件失败。尝试：

```
while(  (gettimeofday(&end, 0) == 0) && end.tv_sec - start.tv_sec < sec )
{
    write....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:50:07.160

~~考虑操作顺序...尝试在操作数周围添加括号`&&`~~

人：[*gettimeofday()*](http://pubs.opengroup.org/onlinepubs/009695399/functions/gettimeofday.html)

```
RETURN VALUE
    The `gettimeofday()` function shall return 0 and 
    no value shall be reserved to indicate an error. 
```

在您的代码中，因为 gettimeofday() 在成功时返回 0 而循环中断。

下面的代码用`!`逻辑非运算符纠正。

```
while(  (!gettimeofday(&end, 0)) && end.tv_sec - start.tv_sec < sec )
  {
    write....
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:37:19.190

您应该考虑使用`clock_gettime`而不是`gettimeofday`声称被`POSIX.1-2008`.

```
#include <time.h>

int main()
{
    struct timespec start, end;
    int sec = 10; // Number of seconds

    clock_gettime(CLOCK_REALTIME, &start);
    while( !clock_gettime(CLOCK_REALTIME, &end)
           && end.tv_sec - start.tv_sec < sec )
    {
        // Write ...
    }
} 
```

**注意：**如果您正在使用`gcc`或`g++`编译您的程序，您需要`librt`通过附加链接到库`-lrt`：

```
gcc myprogram.c -o myprogram -lrt 
```

# node.js - 调度mqtt post

> ID：15189400
> 
> 赞同：1
> 
> 时间：2013-03-03T18:47:52.193
> 
> 标签：node.js, scheduled-tasks, mqtt

我会有一个文件（文本、excel……没关系）。该文件的每一行都有日期、时间和函数代码。我需要的是在服务器上的 node.js 中的指定时间和日期执行写入我的文件中的函数。

由于该函数实际上是 mqtt 代理上的帖子，因此我实际上正在寻找任何可以做到的方法。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:35:53.153

你可以使用 setTimeout 来做到这一点。

请参阅此问题中的示例：[Call a javascript function at a specific time of day](https://stackoverflow.com/questions/4455282/call-a-javascript-function-at-a-specific-time-of-day)

# asp.net - 关注 ref 时，我进入 AppData 文件夹下的 cs 文件？

> ID：15189404
> 
> 赞同：0
> 
> 时间：2013-03-03T18:48:24.640
> 
> 标签：asp.net, user-controls, webforms

我有一个旧的 ASP.NET Webform 网站，其中包含几个用户控件和页面。我现在已经向用户控件添加了几个关闭属性，我需要从使用控件的位置之一使用这些属性。

问题是我无法从页面内（在控件上）找到新属性。然而，旧的属性在那里，如果我尝试“转到防御”，我最终会出现在 AppData\Local\Temp 下的一个文件中。

我试图删除临时文件，但它仍然不会使用新属性更新？

为什么？

# java - 在jTable（自动保存）中编辑后如何保存单元格中的数据？

> ID：15189406
> 
> 赞同：0
> 
> 时间：2013-03-03T18:48:34.337
> 
> 标签：java, swing, jdbc, jtable

我有一个 JTable，其中填充了来自矢量的数据，我希望在编辑数据后将其自动保存在数据库中。

```
 Vector columnNames = new Vector();
            Vector data = new Vector();

            Connection conn = dbConnect.connect();
            String sql = "Select date, frequency, type, payeereceivee, amount, comments from schedule where date ='" + outputdate + "'";
            Statement statement = conn.createStatement();
            ResultSet resultSet = statement.executeQuery(sql);
            ResultSetMetaData metaData = resultSet.getMetaData();
            int columns = metaData.getColumnCount();
            for (int i = 1; i <= columns; i++) {
                columnNames.addElement(metaData.getColumnName(i));
            }
            while (resultSet.next()) {
                Vector row = new Vector(columns);
                for (int i = 1; i <= columns; i++) {
                    row.addElement(resultSet.getObject(i));
                }
                data.addElement(row);
            }
            resultSet.close();
            statement.close();   

            tbl = new JTable(data, columnNames);
            TableColumn column;
            for (int i = 0; i < tbl.getColumnCount(); i++) {
                column = tbl.getColumnModel().getColumn(i);
                column.setMaxWidth(250);
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T19:31:29.743

上面评论的意思是创建自己的`TableModel`（例如通过扩展`DefaultTableModel`）并覆盖/实现`setValueAt`以更新数据库。

请参阅下面的代码段。确保您不在 EDT（事件调度线程，如果您不知道它是什么，请查看“Swing 中的并发”）上执行 DB 更新，`SwingWorker`例如。

```
import java.awt.BorderLayout;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;

public class TestTable2 {

    protected void initUI() {
        Vector<String> columnNames = new Vector<String>();
        Vector<Vector<Object>> data = new Vector<Vector<Object>>();

        Connection conn = dbConnect.connect();
        String sql = "Select date, frequency, type, payeereceivee, amount, comments from schedule where date ='" + outputdate + "'";
        Statement statement = conn.createStatement();
        ResultSet resultSet = statement.executeQuery(sql);
        ResultSetMetaData metaData = resultSet.getMetaData();
        int columns = metaData.getColumnCount();
        for (int i = 1; i <= columns; i++) {
            columnNames.addElement(metaData.getColumnName(i));
        }
        while (resultSet.next()) {
            Vector row = new Vector(columns);
            for (int i = 1; i <= columns; i++) {
                row.addElement(resultSet.getObject(i));
            }
            data.addElement(row);
        }
        resultSet.close();
        statement.close();

        JTable tbl = new JTable(new DefaultTableModel(data, columnNames) {
            @Override
            public void setValueAt(Object aValue, int row, int column) {
                // Here update DB with a SwingWorker and the new provided value
                super.setValueAt(aValue, row, column);
            }
        });
        TableColumn column;
        for (int i = 0; i < tbl.getColumnCount(); i++) {
            column = tbl.getColumnModel().getColumn(i);
            column.setMaxWidth(250);
        }
        JFrame frame = new JFrame(TestTable2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(tbl);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable2().initUI();
            }
        });
    }

} 
```

# java - 使用反射创建新的类实例

> ID：15189407
> 
> 赞同：2
> 
> 时间：2013-03-03T18:48:38.373
> 
> 标签：java, reflection

我正在尝试在以下位置找到的反射库：[https ://code.google.com/p/reflections/](https://code.google.com/p/reflections/)

我想要实现的是扫描我的项目中的包，然后创建在该包中找到的给定类型的所有子类的实例。我使用库的方式是正确的，因为 subTypes 返回以下内容：

> [类标识符.DNSLookup、类标识符.AliasChecker、类标识符.GoogleSafeBrowsing]

尽管我的问题是如何创建在该集中找到的类的新实例。它们都有无参数的构造函数。

```
private void getDetectors(){
        Reflections reflections = new Reflections("identifiers"); //name of package to scan

        Set<Class<? extends DetectorSub>> subTypes =
                reflections.getSubTypesOf(DetectorSub.class);
        System.out.println(subTypes); // correct classes included here.
        for(Class<? extends DetectorSub> detector:subTypes){
            try {
                DetectorSub d =(DetectorSub)detector.getClass().newInstance().cast(DetectorSub.class); //returns exceptions at runtime.
            } catch (InstantiationException e) {
                e.printStackTrace();  
            } catch (IllegalAccessException e) {
                e.printStackTrace();  
            }
        }
    } 
```

上面的代码返回以下异常：

```
java.lang.IllegalAccessException: Can not call newInstance() on the Class for java.lang.Class
    at java.lang.Class.newInstance0(Class.java:339)
    at java.lang.Class.newInstance(Class.java:327)
    at core.PhishingScanner.getDetectors(PhishingScanner.java:40)
    at core.PhishingScanner.<init>(PhishingScanner.java:28)
    at core.Main.main(Main.java:13)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

最后一点，是否可以使用上述功能根据接口而不是超类来扫描类？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:53:08.817

在您的代码中：

```
for(Class<? extends DetectorSub> detector:subTypes){ 
```

这`detector`是一个实例`Class<? extends DetectorSub>`

进而：

```
DetectorSub d =(DetectorSub)detector.getClass().newInstance().cast(DetectorSub.class); 
```

您正在调用`getClass()`，`detector`也就是说，您正在`Class<? extends DetectorSub>`实例上调用 getClass() 并且您获得了代表的类对象，`Class`而不是 subType `DetectorSub`。因此，当您创建新实例时，实际上是在尝试创建 的新实例`Class`，但失败了，因为 的默认构造函数`Class`是私有的。

你应该改写：

```
DetectorSub d = detector.newInstance(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:52:09.440

你的意思是？

```
DetectorSub d = (DetectorSub) detector.getDeclaredConstructors()[0].newInstance();

// or DetectorSub d = (DetectorSub) detector.newInstance();
// since it invokes the no-args constructor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T18:52:52.180

在线的

```
DetectorSub d =(DetectorSub)detector.getClass().newInstance().cast(DetectorSub.class); 
```

无需`getClass()`再次致电。它应该只是：

```
DetectorSub d =(DetectorSub)detector.newInstance().cast(DetectorSub.class); 
```

# nstableview - Nstableview 未显示在对象库中

> ID：15189408
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:48:40.580
> 
> 标签：nstableview

我使用 xcode 4.5 创建了一个带有情节提要的单视图应用程序，并在对象库中查找 NSTable 视图，但找不到它。在我创建商店板之前，我可以在对象库中看到它，但在创建商店板之后，我只能找到 UITableView。我的目标是创建一种网格类型的界面。对此的任何指示都会有所帮助。

谢谢斯里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:50:58.097

NSTableView 用于 Mac OS X 故事板。UITableView 用于 iOS 故事板。您可能创建了错误类型的故事板。

# ruby-on-rails - MongoDB中的高效下采样

> ID：15189409
> 
> 赞同：4
> 
> 时间：2013-03-03T18:48:44.667
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我有一个数据库，用于存储大量数据并生成图表视图。我没有返回图表的所有数据，而是只返回预定义数量的样本。我目前这样做的方式是在 mongo 上使用 map/reduce 作业，但我不知道我这样做的方式是否非常有效，它需要 14 秒并将 CPU 固定在有超过 89000 个样本的图表上例子。

下采样通过计算“分辨率”来工作，即（总点数）/（所需的样本数）。然后它使用范围变量保持外部计数和索引。然后它基本上查看每个点，并根据分辨率和计数/索引变量的当前状态决定是否将其包含在结果列表中。

这工作正常，但速度很慢并且可能不可扩展。我想知道例如只返回所有点并在 ruby​​ 中进行下采样是否会更好，或者也许有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T05:46:29.433

万一有人感兴趣，这是我想出的解决方案。由于 mongodb 的一些限制，我花了一段时间才弄清楚，但它工作得很好，比我当前的 map reduce 解决方案快 10 倍。

这是聚合代码：

```
db.data.aggregate(
  {$match: {$and: [{graph_id: gid}, {"x.value": {$gt: start, $lt: stop}}]}},
  {$project: {x: 1, y: 1, series: 1, chunk: {$subtract: [{$divide: ["$x.value", step]}, {$mod: [{$divide: ["$x.value", step]}, 1]}]}}},
  {$group: {
    _id: {
      chunk: "$chunk",
      series: "$series"
    },
    series: {$first: "$series"},
    x: {$first: "$x"},
    y: {$first: "$y"},
    }
  },
  {$sort: {"x.value": 1}}
) 
```

此解决方案将数据分块。我想做一些类似 int(x.value / step) 的事情，但是 mongodb 没有整数数学运算符。所以我不得不用 ((x.value/step) - ((x.value/step) % 1)) 来伪造它，这给了你除法的整数部分。

这很有效，并且可以让你做一些事情，比如平均块，而不是仅仅选择第一个，很容易。

# c# - 在 C# 中读取文件并在不带 # 的情况下提取单词的程序

> ID：15189417
> 
> 赞同：1
> 
> 时间：2013-03-03T18:49:32.607
> 
> 标签：c#, c#-4.0

我读了一个文件，文件格式是这个
**INPUT FILE FORMAT**

```
 id          PosScore  NegScore       Word                             SynSet   

        00002098    0         0.75           unable#1                         (usually followed by `to') not having the necessary means or skill or know-how; "unable to get to town without a car"; "unable to obtain funds"
        00002312    0.23      0.43           dorsal#2 abaxial#1               facing away from the axis of an organ or organism; "the abaxial surface of a leaf is the underside or side facing away from the stem"
        00002527    0.14      0.26           ventral#2 adaxial#1              nearest to or facing toward the axis of an organ or organism; "the upper side of a leaf is known as the adaxial surface"
        00002730    0.45      0.32           acroscopic#1                     facing or on the side toward the apex
        00002843    0.91      0.87           basiscopic#1                     facing or on the side toward the base
        00002956    0.43      0.73           abducting#1 abducent#1           especially of muscles; drawing away from the midline of the body or from an adjacent part
        00003131    0.15      0.67           adductive#1 adducting#1 adducent#1  especially of muscles; bringing together or drawing toward the midline of the body or toward an adjacent part    
in this file 
```

在这个文件中，Synset 列应该被删除，第二件事如果 Word 列有多个单词，则 id、PosScore、NegScore 将根据一行中的单词重复重复，但 id、posScore、NegScore 将相同。我想要上述文件
**OUTPUT的以下输出**

```
 id         PosScore      NegScore              Word     
00002098    0             0.75              unable#1    
00002312    0.23          0.43               dorsal#2    
00002312    0.23          0.43               abaxial#1       
00002527    0.14          0.26               ventral#2    
00002527    0.14          0.26               adaxial#1     
00002730    0.45          0.32               acroscopic#1    
00002843    0.91          0.87               basiscopic#1    
00002956    0.43          0.73               abducting#1    
00002956    0.43          0.73               abducent#1    
00003131    0.15          0.67               adductive#1    
00003131    0.15          0.67               adducting#1    
00003131    0.15          0.67               adducent#1 
```

我写了下面的代码，但它给出了意想不到的结果。

```
 TextWriter tw = new StreamWriter("D:\\output.txt");    
 private void button1_Click(object sender, EventArgs e)
        {

                StreamReader reader = new StreamReader(@"C:\Users\Zia Ur Rehman\Desktop\records.txt");
                string line;
                String lines = "";
                while ((line = reader.ReadLine()) != null)
                {

                    String[] str = line.Split('\t');

                    String[] words = str[4].Split(' ');
                    for (int k = 0; k < words.Length; k++)
                    {
                        for (int i = 0; i < str.Length; i++)
                        {
                            if (i + 1 != str.Length)
                            {
                                lines = lines + str[i] + ",";
                            }
                            else
                            {
                                lines = lines + words[k] + "\r\n";

                            }
                        }
                    }
                }
            tw.Write(lines);
            tw.Close();
            reader.Close();    
        } 
```

此代码给出以下错误的结果

```
00002098,0,0.75,unable#1,unable#1
00002312,0,0,dorsal#2 abaxial#1,dorsal#2
00002312,0,0,dorsal#2 abaxial#1,abaxial#1
00002527,0,0,ventral#2 adaxial#1,ventral#2
00002527,0,0,ventral#2 adaxial#1,adaxial#1
00002730,0,0,acroscopic#1,acroscopic#1
00002843,0,0,basiscopic#1,basiscopic#1
00002956,0,0,abducting#1 abducent#1,abducting#1
00002956,0,0,abducting#1 abducent#1,abducent#1
00003131,0,0,adductive#1 adducting#1 adducent#1,adductive#1
00003131,0,0,adductive#1 adducting#1 adducent#1,adducting#1
00003131,0,0,adductive#1 adducting#1 adducent#1,adducent#1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:58:30.307

所以，这正在工作。经过长时间的努力。
**注意：**如果您没有在输入文件中使用正确的制表符。结果将是不正确的。不要忽略正确的标签。

```
 TextWriter tw = new StreamWriter("D:\\output.txt");    
  private void button1_Click(object sender, EventArgs e)
  {
        StreamReader reader = new StreamReader(@"C:\Users\Mohsin\Desktop\records.txt");
        string line;
        String lines = "";
        while ((line = reader.ReadLine()) != null)
        {

            String[] str = line.Split('\t');

            String[] words = str[3].Split(' ');
            for (int k = 0; k < words.Length; k++)
            {
                for (int i = 0; i < 4; i++)
                {
                    if (i + 1 != 4)
                    {
                        lines = lines + str[i] + "\t";
                    }
                    else
                    {
                        lines = lines + words[k] + "\r\n";

                    }
                }
            }
        }
        tw.Write(lines);
        tw.Close();
        reader.Close();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:22:35.183

我简化了您的代码并使其正常工作。它仍然缺乏验证，可以通过使用`StringBuilder`，特别是通过将每一行写入文件而不是将其附加到字符串来提高性能。它也缺乏`exception handling`.

```
using (TextWriter tw = File.CreateText(@"c:\temp\result.txt"))
using (StreamReader reader = new StreamReader(@"stackov1.txt"))
{
    string line;
    String lines = "";
    while ((line = reader.ReadLine()) != null)
    {

        String[] str = line.Split('\t');

        String[] words = str[3].Split(' ');
        for (int k = 0; k < words.Length; k++)
        {
            lines = lines + str[0] + "\t" + str[1] + "\t" + str[2] + "\t" + words[k] + "\r\n";
        }
    }
    tw.Write(lines);
} 
```

# php - 从php循环内的字符串中删除最后一个字符

> ID：15189430
> 
> 赞同：0
> 
> 时间：2013-03-03T18:50:59.983
> 
> 标签：php, string, for-loop

我正在尝试使用 PHP 检查 VIN 号码是否有效。我正在使用 for 循环，如下所示

```
 $base='**********';
foreach ($params as $key => $value) {
    $query_string .= "$key=" . urlencode($value) . "&";
    }
$url = "$base?$query_string"; 
```

在这个我得到**`&`**像下面这样的最后一个字符

```
&reportType=3& 
```

我尝试使用下面的代码删除它，但它不起作用

```
substr($query_string, 0, -1);
 mb_substr($query_string, 0, -1); 
```

帮我删除最后一个字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:52:38.390

我认为您需要将结果分配回您的变量。

```
$query_string = substr($query_string, 0, -1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:52:48.553

您可以使用[rtrim](http://php.net/manual/en/function.rtrim.php)

```
$trimmed = rtrim($query_string, "&") 
```

将从最后删除任何内容`&`。

您的代码也可以工作，但是您需要将其分配给一个变量，因为它返回一个新字符串。顺便说一句，与 rtrim 相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:06:14.683

```
$base='index.php';
$params = array("key1"=>1,"key2"=>2,"key3"=>3,"key4"=>4);
$size = count($params);
$count = 1;
foreach ($params as $key => $value) {
    $query_string .= "$key=" . urlencode($value);
    if($count < $size){
      $query_string .= "&";
    }
    $count++;
    }
$url = "$base?$query_string";
echo $url; 
```

//结果：index.php?key1=1&key2=2&key3=3&key4=4

# prolog - 更改 Prolog 的返回响应

> ID：15189435
> 
> 赞同：2
> 
> 时间：2013-03-03T18:51:46.083
> 
> 标签：prolog, prolog-toplevel, xsb

我是prolog编程的新手。

我想更改 prolog 程序返回的值，使其返回 true / false 而不是标准的 yes 或 no。

考虑一个非常简单的例子：例如 simple.P

```
node(1).

isNode(X) : node(X) 
```

在 prolog 命令行上，如果我键入 isNode(1)，它会返回 yes，例如：

```
isNode(1).

yes 
```

我的问题是：

**我如何将其从“是”更改为“真”？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:40:30.677

Prolog 试图找到您的查询的证明。如果您的查询有变量，它会打印一个使它们为真的值。

问：有没有偶数的素数？A：是的 - 2 是偶数和素数

只要您键入，它就会不断为您提供更多证明；最终它会用完，并响应错误。

问：有没有偶数的素数？A：是的 - 2 是偶数和素数 Q：还有吗？答：假的。

您想要的是让您的程序执行输出。有许多库谓词可以做到这一点。最灵活的是 format/2

```
myprogram :-
   my_old_program, !,
   format('yup, that sure is right!~n', []).
myprogram :-
   format('nope, nope, no way in heck!~n', []). 
```

# spring-mvc - 使用 Spring MVC 的 Twitter 引导

> ID：15189437
> 
> 赞同：37
> 
> 时间：2013-03-03T18:52:01.417
> 
> 标签：spring-mvc, twitter-bootstrap

我想将 Twitter Bootstrap 与现有的 Spring MVC 项目集成。搜索返回抽象结果，没有概述如何将 UI 为中心的 Bootstrap 与 Spring MVC 集成的教程或文章。

集成框架所涉及的配置步骤是什么？

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-04T00:07:15.433

Twitter Bootstrap 是一个 CSS 元素框架，还有一些弹出和 HTML 技巧。您可以简单地将 bootstap.css、jquery.js 和 bootstrap.js 放入现有的 Spring MVC JSP 页面中。两者一起使用没有什么秘密。这很简单。

你可以看看这些例子。它们可能对您有用。

*   示例 1 - priyatam 的 GitHub [Spring MVC 引导展示](https://github.com/priyatam/springmvc-twitterbootstrap-showcase)。这是一个很好的，一个完整的项目，可以运行
*   示例 2 - Duckranger 的[Spring MVC 和 Twitter Bootstap](http://duckranger.com/2012/07/spring-mvc-and-twitter-bootstrap-customizing-the-input-fields/)

请记住，Spring MVC 将向您提供所有数据（通过 JSON 或模型属性）来构建您的 HTML 文件。Bootstrap 只会个性化页面的主题，有时还会调用 Spring MVC REST 端点来获取 Ajax 数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-27T09:09:39.230

这是一个很好的简单教程，向您展示如何将引导程序集成到现有的 Spring MVC 项目中

[使用 Bootstrap 美化您的 Java Web 应用程序](https://samerabdelkafi.wordpress.com/2014/09/17/bootstrap-3/)

# iis-7 - IIS 7 Rewrite web.config serverVariables 指令在子文件夹中不起作用

> ID：15189445
> 
> 赞同：1
> 
> 时间：2013-03-03T18:52:41.370
> 
> 标签：iis-7, web-config, rewrite

我的 web.config 中有以下代码

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="IP Correction">
                    <match url="(.*)" />
                    <serverVariables>
                        <set name="REMOTE_ADDR" value="{HTTP_X-Forwarded-For}"/>
                    </serverVariables>
                    <action type="None" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

这在我网站的根目录上完美运行，但是，在任何子文件夹中都没有触发该规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:15:04.357

我想通了。问题出在这行代码中

```
<action type="None" /> 
```

您必须指定重写操作

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="IP Correction">
                    <match url="(.*)" ignoreCase="true" />
                    <serverVariables>
                        <set name="REMOTE_ADDR" value="{HTTP_X-Forwarded-For}" replace="true"/>
                    </serverVariables>
                    <action type="Rewrite" url="{R:0}" appendQueryString="true" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-10T03:32:17.123

我遇到了类似的问题并创建了一个 IHttpModule 来解决它，您可以[在此处找到](https://gist.github.com/winzig/ee57e559341a2a92d8ee7bc0daa1304a)它。URL 重写似乎有一个错误，它不会在默认文档请求上执行。该模块没有这个问题。要在您的站点上实现它，您可以将它添加到`<modules>`web.config 的部分，或者如果您希望它在服务器范围内运行，则添加到您的 applicationHost.config。

相关的代码是您连接到 HttpApplication 的 BeginRequest 事件，并运行：

```
void OnBeginRequest(object sender, EventArgs e)
{
        HttpApplication app = (HttpApplication)sender;

        string headervalue = app.Context.Request.Headers["X-Forwarded-For"];

        if (headervalue != null)
        {
                Match m = REGEX_FIRST_IP.Match(headervalue);

                if (m.Success)
                {
                        app.Context.Request.ServerVariables["REMOTE_ADDR"] = m.Groups[1].Value;
                        app.Context.Request.ServerVariables["REMOTE_HOST"] = m.Groups[1].Value;
                }
        }
} 
```

正则表达式是`^\s*(\d+\.\d+\.\d+\.\d+)`. 完整的代码在[要点](https://gist.github.com/winzig/ee57e559341a2a92d8ee7bc0daa1304a)。

如果您将此代码编译到名为 HttpModules 的类库中并将其放入 GAC 中，则可以将其添加到您的`<modules>`部分，例如：

`<add name="ClientIP" type="YourLibrary.ClientIP, YourLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=00DEADBEEF00" />`

# java - jInterface 创建 External Erlang Term

> ID：15189447
> 
> 赞同：1
> 
> 时间：2013-03-03T18:52:42.437
> 
> 标签：java, erlang, jinterface

如何格式化以下 erlang 术语：

```
{ atom, "message" } 
```

在 jInterface 到我可以在 erlang shell 中调用的外部格式

```
erlang:binary_to_term( Binary ) 
```

示例：请注意，由于元组将通过网络发送，因此我通过转换为 byte[] 来完成。

```
OtpErlangObject[] msg = new OtpErlangObject[2];
msg[0] = new OtpErlangAtom( "atom" );
msg[1] = new OtpErlangString( "message" );

OtpErlangTuple reply = new OtpErlangTuple(msg);

OtpOutputStream stream = new OtpOutputStream(reply);

stream.toByteArray()    // byte[] which I send over net 
```

Erlang 接收到的二进制文件是：

```
B = <<104,2,100,0,4,97,116,111,109,107,0,7,109,101,115,115,97,103,101>> 
```

然后在 erlang shell 中将接收到的术语转换为二进制会给出一个 badarg。

```
 binary_to_term( B ).                                                     
** exception error: bad argument
     in function  binary_to_term/1
        called as binary_to_term(<<104,2,107,0,4,97,116,111,109,107,0,7,109,
                                   101,115,115,97,103,101>>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:47:24.563

```
binary_to_term( <<131,104,2,107,0,4,97,116,111,109,107,0,7,109,101,115,115,97,103,101>> ).
{"atom","message"} 
```

该消息似乎缺少 term_to_binary 所需的 131 标记。从 Java 输出中可以明显看出，该标签不是由 jinterface 编码添加的。如果我只是将 131 添加到二进制文件的开头，它会正确解码。

现在为什么Java不添加它？

我仍然会接受答案，因为我还没有正式回答我的问题（以受支持的方式，即不使用 131 进行黑客攻击）

参考：

[http://www.erlang.org/doc/apps/erts/erl_ext_dist.html](http://www.erlang.org/doc/apps/erts/erl_ext_dist.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:33:58.770

我还没有测试过这个，但是如果你正在编码`{atom, "message"}`，你不应该发送一个元组，而不是一个接一个地发送 2 个对象吗？尝试创建一个[Tuple](http://www.erlang.org/doc/apps/jinterface/java/com/ericsson/otp/erlang/OtpErlangTuple.html)对象并添加`atom`和`message`作为元素。

# c++ - Eratosthenes 算法的筛选不适用于较大的限制

> ID：15189448
> 
> 赞同：-2
> 
> 时间：2013-03-03T18:52:42.827
> 
> 标签：c++, algorithm, primes, sieve-of-eratosthenes

我已经用 C++ 编写了一个 Eratosthenes 算法的筛子，它适用于我测试过的较小的数字。但是，当我使用大数字，即 2 000 000 作为上限时，程序开始给出错误的答案。谁能澄清为什么？

感谢您的帮助。

```
#include <iostream>
#include <time.h>
using namespace std;

int main() {
    clock_t a, b;
    a = clock();

    int n = 0, k = 2000000; // n = Sum of primes, k = Upper limit
    bool r[k - 2]; // r = All numbers below k and above 1 (if true, it has been marked as a non-prime)
    for(int i = 0; i < k - 2; i++) // Check all numbers
        if(!r[i]) { // If it hasn't been marked as a non-prime yet ...
            n += i + 2; // Add the prime to the total sum (+2 because of the shift - index 0 is 2, index 1 is 3, etc.)
            for(int j = 2 * i + 2; j < k - 2; j += i + 2) // Go through all multiples of the prime under the limit
                r[j] = true; // Mark the multiple as a non-prime
        }

    b = clock();
    cout << "Final Result: " << n << endl;
    cout << b - a << "ms runtime achieved." << endl;
    return 0;
} 
```

编辑：我刚刚进行了一些调试，发现它可以在 400 左右的限制下工作。但是，在 500 时，它关闭了 - 它应该是 21536，但是是 21499

编辑2：啊，我发现了两个错误，这些似乎已经解决了问题。

第一个是由其他回答的人发现的，并且 n 溢出 - 在被设为 long long 数据类型后，它已经开始工作。

第二个相当值得大惊小怪的错误是 r 中的布尔值必须被初始化。在检查素数以使它们全部为假之前运行循环之后，得到正确的答案。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:20:56.640

你只是得到一个整数溢出。C++ 类型`int`的范围有限（在 32 位系统上，通常从 -(2^32) / 2 到 2^32 / 2 - 1，即通常的最大值为 2147483647（可以找到您设置的具体最大值通过 #include`<limits>`标头和评估`std::numeric_limits<int>::max()`. 即使 k 小于最大值，您的代码迟早会导致表达式`n += i + 2`或`int j = 2 * i + 2`.

您将不得不选择一种更好（阅读：更合适）的类型，例如`unsigned`它不支持负数，因此可以表示两倍于`int`. 你也可以试试`unsigned long`，甚至`unsigned long long`。

另请注意，可变长度数组（VLA；就是这样`bool r[k - 2]`）不是标准 C++。您可能想[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)改用。您也没有将数组初始化为`false`（`std::vector`会自动执行此操作），这也可能是问题所在，特别是如果您说即使在 k=500 时它也不起作用。

在 C++ 中，您还应该使用`<ctime>`( `<time.h>`then `clock_t`and `and`clock() `are defined in the`std `namespace, but since you are`using namespace std` 来代替，这不会对您产生影响），但这或多或少是一个风格问题。

我在我的“代码档案”中找到了一个工作示例。虽然它不是基于您的，但您可能会发现它很有用：

```
#include <vector>
#include <iostream>

int main()
{
    typedef std::vector<bool> marked_t;
    typedef marked_t::size_type number_t; // The type used for indexing marked_t.

    const number_t max = 500;

    static const number_t iDif = 2; // Account for the numbers 1 and 2.
    marked_t marked(max - iDif);
    number_t i = iDif;

    while (i*i <= max) {
        while (marked[i - iDif] == true)
            ++i;
        for (number_t fac = iDif; i * fac < max; ++fac)
            marked[i * fac - iDif] = true;
        ++i;
    }

    for (marked_t::size_type i = 0; i < marked.size(); ++i) {
        if (!marked[i])
            std::cout << i + iDif << ',';
    }
} 
```

# c# - 从多个线程读取 SQL 数据

> ID：15189450
> 
> 赞同：1
> 
> 时间：2013-03-03T18:52:49.530
> 
> 标签：c#, .net, sql-server, multithreading

我有一个简单的任务 - 从 SQL 表中读取数据，处理它，一旦完成 - 更新数据库中的一个字段（设置处理=真），所以每条记录应该只处理一次。

你能告诉我，我可以用什么技术来做多线程？这意味着，在多个线程中从表中读取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:30:29.203

如果您想在多个线程中读取数据而不重叠，那么您可以尝试分页。您可以让每个线程读取不同的页面。例如，您可以让第一个线程读取前 20 条记录，处理其中的每条记录，然后为每条记录设置 processes=true，而第二个线程对接下来的 20 条记录执行相同的操作，依此类推。

查看此链接以获取有关在多个线程中分页的更多信息。 [http://ericniemiec.wordpress.com/2010/06/10/paging-records-in-sql-server-2008-for-processing-database-records-on-different-threads-in-c/](http://ericniemiec.wordpress.com/2010/06/10/paging-records-in-sql-server-2008-for-processing-database-records-on-different-threads-in-c/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T18:57:47.920

如果你使用 ef 并使用 DataContext 你应该知道 DataContext 不是线程安全的。像 MsSQL 这样的数据库管理系统是线程安全的。我更喜欢你读这个[问题](https://stackoverflow.com/questions/9952137/multi-threading-c-sharp-application-with-sql-server-database-calls)

# php - jQuery 中的链式选择：多个 AJAX 查找

> ID：15189453
> 
> 赞同：0
> 
> 时间：2013-03-03T18:52:58.627
> 
> 标签：php, jquery, select, chained

我在让一系列链接的选择输入工作时遇到问题。基本上，我希望能够在第一个下拉列表中选择一个航班号，然后在第二个下拉列表中填充有效目的地，在第三个下拉列表中填充有效航班号。

让一个下拉来填充下一个似乎工作正常，问题似乎是因为我需要在第一个下拉中进行更改以填充第三个，它似乎并不能可靠地工作。有时有效，有时无效，我不知道为什么。

javascript代码：

```
$(function(){
  $("select#fromICO").change(function(){
    $.getJSON("/trip_reports_chain.php",{from: $('#fromICO').val(), t: 'd'}, function(j){
      var options = '';
      for (var i = 0; i < j.length; i++) {
        options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
      }
      $("select#toICO").html(options);
    });
    $.getJSON("/trip_reports_chain.php",{to: $('#toICO').val(), t: 'f', from: $('#fromICO').val()}, function(j){
      var options = '';
      for (var i = 0; i < j.length; i++) {
        options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
      }
      $("select#flightNo").html(options);
    });
  })
  $("select#toICO").change(function(){
    $.getJSON("/trip_reports_chain.php",{to: $(this).val(), t: 'f', from: $('#fromICO').val()}, function(j){
      var options = '';
      for (var i = 0; i < j.length; i++) {
        options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
      }
      $("select#flightNo").html(options);
    })
  })
}) 
```

和 HTML/PHP：

```
<select name="origin" id="fromICO">
    <option value="">Origin</option>
<?php
$sql = "SELECT origin FROM data_flights GROUP BY origin ORDER BY origin ASC";
$mysql_result = mysql_query($sql, $mysql_link);
if ((!mysql_error()) && (mysql_num_rows($mysql_result) > 0)) {
    while ($row = mysql_fetch_array($mysql_result)) {
        echo "<option value='".$row['originICO']."'>".$row['originICO']."</option>";
        }
}
?>  
</select>
<select name="destination" id="toICO">
  <option value="">Destination</option>
</select>
<select name="flightno" id="flightNo">
  <option value="">Flight Number</option>
</select> 
```

trip_reports_chain.php 中的代码可靠地返回了正确的 JSON 结果，所以我也觉得发布它没什么意义。

所以，症状是：如果我选择起点下拉菜单，它会填充目的地而不是航班号。如果我选择一个目的地（必须是一个具有多个可能目的地的目的地，因为选择框没有“更改”事件），然后它会填充航班号。如果我然后返回并更改起点，它*有时*会同时更改目的地和航班号。它可能有一个模式，但我无法发现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:06:11.200

第一个请求完成后，发送您的第二个请求（航班号）。由于 getJSON() 返回一个[jqXHR](http://api.jquery.com/jQuery.get/#jqxhr-object)对象，您可以使用它的方法[.done()](http://api.jquery.com/deferred.done/) ，该方法在请求成功完成后立即触发。使用方法链接，您的代码可能如下所示：

```
$(function(){
  $("select#fromICO").change(function(){
    $.getJSON("/trip_reports_chain.php",{from: $('#fromICO').val(), t: 'd'}, function(j){
      var options = '';
      for (var i = 0; i < j.length; i++) {
        options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
      }
      $("select#toICO").html(options);
    })
    .done(function(){
      $.getJSON("/trip_reports_chain.php",{to: $('#toICO').val(), t: 'f', from: $('#fromICO').val()}, function(j){
        var options = '';
        for (var i = 0; i < j.length; i++) {
          options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
        }
        $("select#flightNo").html(options);
      });
    });
  })
  $("select#toICO").change(function(){
    $.getJSON("/trip_reports_chain.php",{to: $(this).val(), t: 'f', from: $('#fromICO').val()}, function(j){
      var options = '';
      for (var i = 0; i < j.length; i++) {
        options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
      }
      $("select#flightNo").html(options);
    })
  })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:23:58.353

所以，AJAX 是异步的。这意味着所有三个 getJSON 都是（几乎）同时触发的。

由于您的依赖关系（第二个 DD 依赖于第一个，依此类推），您必须正确地级联它们。当 getJSON 完成时，每个 Block（var 选项等）都会被触发。

# jquery - 是否可以使用复选框过滤不同的元素？

> ID：15189454
> 
> 赞同：0
> 
> 时间：2013-03-03T18:53:00.373
> 
> 标签：jquery, checkbox, filter

我找到了这段代码，我想改进它以使用不同的元素。现在它只适用于一个 div 类，但如果我想让它与这样的东西一起工作怎么办：

```
<div class="list">

<li class="one category1">               //get some category from this li
<a href="link">
<img src="img"/>
<p class="name">name</p></a>
<p class="age">Age: days</p>
<span class="rating category2"></span>   //get some category from this span
<span class="status category3"></span></li>   //get some category from this span

...code repeats from <li class="one category1"> to </li> many times with different values and that the content i filter 
```

我发现的代码：

```
 <ul id="filter1">
        <li>
            <input type="checkbox" name="filter1" value="dark">
            Dark</li>
        <li>
            <input type="checkbox" name="filter1" value="medium">
            Medium</li>
        <li>
            <input type="checkbox" name="filter1" value="light">
            Light</li>
    </ul>

    <ul id="filter2">
        <li>
            <input type="checkbox" name="filter2" value="sm">
            Small</li>
        <li>
            <input type="checkbox" name="filter2" value="med">
            Medium</li>
        <li>
            <input type="checkbox" name="filter2" value="lge">
            Large</li>
    </ul>

    <ul id="filter3">
        <li>
            <input type="checkbox" name="filter3" value="smooth">
            Smooth</li>
        <li>
            <input type="checkbox" name="filter3" value="riven">
            Riven</li>
        <li>
            <input type="checkbox" name="filter3" value="honed">
            Honed</li>
    </ul>

    <ul id="filter4">
        <li>
            <input type="checkbox" name="filter4" value="a">
            Up to £25</li>
        <li>
            <input type="checkbox" name="filter4" value="b">
            £25 to £45</li>
        <li>
            <input type="checkbox" name="filter4" value="c">
            £45 to £65</li>
        <li>
            <input type="checkbox" name="filter4" value="d">
            £65 to £85</li>
        <li>
            <input type="checkbox" name="filter4" value="e">
            over £85</li>
    </ul>

    <p><a class="showall" href="#" />Clear Filters</a></p>

    <div class="list dark sm smooth b">dark small smooth b</div>
    <div class="list medium lge honed d">medium large honed d</div>
    <div class="list dark med smooth d">dark medium smooth d</div>
    <div class="list light sm smooth b">light small smooth b</div>
    <div class="list light lge riven b">light large riven b</div>
    <div class="list dark sm riven c">dark small riven c</div>
    <div class="list medium med riven a">medium medium riven a</div>
    <div class="list medium lge honed e">medium large honed e</div>

    <div class="NoResults"></div>

    <script>

        $("#filter1 :checkbox,#filter2 :checkbox,#filter3 :checkbox,#filter4 :checkbox").click(function () {

            $("div.list").hide();

            var Filter1Array = [];
            var Filter2Array = [];
            var Filter3Array = [];
            var Filter4Array = [];
            var filter1_Count = 0, filter2_Count = 0, filter3_Count = 0, filter4_Count = 0;

            $("#filter1 :checkbox:checked").each(function () {
                Filter1Array[filter1_Count] = $(this).val();
                filter1_Count++
            });

            $("#filter2 :checkbox:checked").each(function () {
                Filter2Array[filter2_Count] = $(this).val();
                filter2_Count++
            });

            $("#filter3 :checkbox:checked").each(function () {
                Filter3Array[filter3_Count] = $(this).val();
                filter3_Count++
            });

            $("#filter4 :checkbox:checked").each(function () {
                Filter4Array[filter4_Count] = $(this).val();
                filter4_Count++
            });

            var filter1string
            var filter2string
            var filter3string
            var filter4string

            var filter1checked = false
            var filter2checked = false
            var filter3checked = false
            var filter4checked = false

            if (filter1_Count == 0) { filter1_Count = 1; } else { filter1checked = true; }
            if (filter2_Count == 0) { filter2_Count = 1; } else { filter2checked = true; }
            if (filter3_Count == 0) { filter3_Count = 1; } else { filter3checked = true; }
            if (filter4_Count == 0) { filter4_Count = 1; } else { filter4checked = true; }

            for (f1 = 0; f1 < filter1_Count; f1++) {

                if (Filter1Array[f1] != null) { filter1string = '.' + Filter1Array[f1] } else { filter1string = '' }

                for (f2 = 0; f2 < filter2_Count; f2++) {

                    if (Filter2Array[f2] != null) { filter2string = '.' + Filter2Array[f2] } else { filter2string = '' }

                    for (f3 = 0; f3 < filter3_Count; f3++) {

                        if (Filter3Array[f3] != null) { filter3string = '.' + Filter3Array[f3] } else { filter3string = '' }

                        for (f4 = 0; f4 < filter4_Count; f4++) {

                            if (Filter4Array[f4] != null) { filter4string = '.' + Filter4Array[f4] } else { filter4string = '' }

                            var QueryString = filter1string + filter2string + filter3string + filter4string
                            $(QueryString).fadeIn('fast');
                        }
                    }
                }
            }

            if (!filter1checked && !filter2checked && !filter3checked && !filter4checked) {
                $("div.list").fadeIn('fast');
            };

            if ($('div.list:visible').length === 0) {
                $(".NoResults").html("<p class='error'>No products match your filter selections. Please try a different combination.</p>");
            }
            else { $(".NoResults").html(""); }

        });

        $('a.showall').click(function () {
            $("div.list").fadeIn('fast');
            $("#filter1 :checkbox").removeAttr('checked');
            $("#filter2 :checkbox").removeAttr('checked');
            $("#filter3 :checkbox").removeAttr('checked');
            $("#filter4 :checkbox").removeAttr('checked');
            $(".NoResults").html("");
            return false;
        });

    </script>
</body>
</html> 
```

每一个帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:14:01.293

我相信以下内容与您所追求的一致，尽管到目前为止给出的细节非常模糊

```
var filterArray=[];

$(function(){    
    var $items=$('#items .list'), $noRes=$('.NoResults')

   var $controls = $(':checkbox').change(function(){
        if(this.checked){
            filterArray.push(this.value)
        }else{
           var idx= $.inArray(this.value, filterArray);
            filterArray.splice( idx,1);     
        }      
        filterItems();          
    });

    $('a.showall').click(function(e){
        e.preventDefault();

        $controls.prop('checked',false);
        filterArray=[];
        filterItems();
    });

    function filterItems(){
      var results=0;
      if( filterArray.length){          
              $items.hide(); 
              var $filterItems=$items.filter( '.'+filterArray.join('.')).show()
              results=$filterItems.length;
          }else{
              $items.show();
          }
          $noRes[results || !filterArray.length ? 'hide' : 'show' ]();
    }
}); 
```

演示：http: [//jsfiddle.net/xB6Xb/1](http://jsfiddle.net/xB6Xb/1)

如果没有关于如何处理用户在每个类别中选择多个价格或多个项目的规则，就很难做更多的事情。

**`no results`使用显示**编辑**修复的错误**

# php - 在 PHP 中使用正则表达式删除标签属性

> ID：15189457
> 
> 赞同：1
> 
> 时间：2013-03-03T18:53:13.223
> 
> 标签：php, regex, preg-replace

如何从`<a>`标签中删除所有属性，除了`href="/index.php..."`？并添加一个自定义类？

所以这：

```
<a href="/index.php?option=com_virtuemart&view=cart&Itemid=105&lang=en" style="float:right;">content</a> 
```

变成：

```
<a href="index.php?option=com_virtuemart&view=cart&Itemid=105&lang=en" class="custom">content</a> 
```

我无法管理 preg_replace 来工作：`

```
<?php
    $text = '<a href="index.php?option=com_virtuemart&view=cart&Itemid=105&lang=en" class="custom">content</a>';
    echo preg_replace("/<a([a-z][a-z0-9]*)(?:[^>]*(\shref=['\"][^'\"]['\"]))?>/i", '<$1$2$3>', $text);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:19:10.333

`DOMDocument`更好，但使用正则表达式

```
preg_replace("/<a [^>]*?(href=[^ >]+)[^>]*>/i", '<a $1 class="custom">', $text); 
```

假定属性中没有空格，`href`也没有`>`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:04:35.340

你可以使用`DomDocument`：

```
libxml_use_internal_errors(true);
$doc = new DOMDocument();
$doc->loadHTML('<a href="/index.php?option=com_virtuemart&view=cart&Itemid=105&lang=en" style="float:right;">content</a>');
$items = $doc->getElementsByTagName('a');
$href = $items->item(0)->getAttribute('href');
$value = $items->item(0)->nodeValue;
libxml_clear_errors();
echo '<a href="'.$href.'" class="custom">'.$value.'</a>'; 
```

# php - 查找 IP 地址并更改网站的语言

> ID：15189459
> 
> 赞同：-2
> 
> 时间：2013-03-03T18:53:29.203
> 
> 标签：php, javascript, html

我想知道如何添加一些脚本（javascript 或者可能在 PHP 中）来查找 ip 地址，如果 ip 用于瑞典，请将网站的语言更改为瑞典语，也许将位置 example.com/en 更改为 example.com /se 或类似的东西，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:56:56.727

你想做所谓的 GeoLocation

您可以使用[MaxMind](http://www.maxmind.com/en/home)的数据库执行此操作，然后在您的 PHP 应用程序中或作为 Apache 模块进行处理。

我建议您在用户访问该站点时向他们推荐语言/区域设置选项，但最终允许他们覆盖此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:55:32.533

很快，基于纯 JavaScript，您可以...

```
<html>
<head>
  <title>...</title>
  <script language="JavaScript">
    var lang = navigator.language || navigator.userLanguage;
    //alert(lang);
    if(lang == "en" || lang == "eng" || lang == "engs") {
        window.location = "en/index.html"; //English
    }
    if(lang == "sv" || lang == "swe") {
        window.location = "se/index.html"; //Swedish
    }
  </script>
</head>
<body>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:06:09.787

不确定这是否是一个好主意，但这是你的做法：

```
$(function() {
    $.getJSON('http://smart-ip.net/geoip-json?callback=?', function(data) {
        if (data.countryCode == 'SE') {
            $('body').text('Välkommen till Sverige');
        }else{
            $('body').text("You're not Swedish ?");
        }
    });
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/2tVY8/)

如果没有 jQuery，我想最简单的就是：

```
<script type="text/javascript">
    var lang = function(data) {
        if (data.countryCode == 'SE') {
            //swedish
        } else {
            //not swedish
        }
    }
</script>
<script type="text/javascript" src="http://smart-ip.net/geoip-json?callback=lang"></script>​ 
```

还是在 PHP 中？

```
<?php
    $json = json_decode( file_get_contents('http://smart-ip.net/geoip-json') );
    if ($json->countryCode == 'SE') {
         //swedish
    }else{
         //not swedish
    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T18:57:20.363

首先查看浏览器的接受语言标头，然后查看可能包含操作系统语言的浏览器标识字符串。

```
function getDefaultLanguage() {
   if (isset($_SERVER["HTTP_ACCEPT_LANGUAGE"]))
      return parseDefaultLanguage($_SERVER["HTTP_ACCEPT_LANGUAGE"]);
   else
      return parseDefaultLanguage(NULL);
   }

function parseDefaultLanguage($http_accept, $deflang = "en") {
   if(isset($http_accept) && strlen($http_accept) > 1)  {
      # Split possible languages into array
      $x = explode(",",$http_accept);
      foreach ($x as $val) {
         #check for q-value and create associative array. No q-value means 1 by rule
         if(preg_match("/(.*);q=([0-1]{0,1}\.\d{0,4})/i",$val,$matches))
            $lang[$matches[1]] = (float)$matches[2];
         else
            $lang[$val] = 1.0;
      }

      #return default language (highest q-value)
      $qval = 0.0;
      foreach ($lang as $key => $value) {
         if ($value > $qval) {
            $qval = (float)$value;
            $deflang = $key;
         }
      }
   }
   return strtolower($deflang);
} 
```

# ios - UITableViewCell 中的 UITextField - 当它出现在屏幕上时，以编程方式使其成为 firstResponder？

> ID：15189460
> 
> 赞同：3
> 
> 时间：2013-03-03T18:53:31.947
> 
> 标签：ios, objective-c, uitableview

我有一个 UITableView，每个单元格内都有一个 UITextField。一个模型对象，存储当前正在编辑的单元格的索引。如果单元格滚动到屏幕外，我的应用程序将取消第一响应者状态。（不这样做可能会导致问题）。现在，假设对应于该索引的一个单元格（可能是相同的，也可能是不同的）即将滚动回到屏幕上。我想让该单元格的 textField 成为 firstResponder。我的代表确实接到了电话

```
tableView: willDisplayCell: forRowAtIndexPath: 
```

对应于新的单元格。但是，此时调用 becomeFirstResponder: 并没有帮助，因为单元格在显示之前不会接受 firstResponder 状态。

没有使用计时器，关于如何调用 becomeFirstResponder 的任何想法：在细胞实际上能够成为第一响应者的时候？

编辑：cellForRowAtIndexPath: 总是在 willDisplayCell: 之前调用。所以那里没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:04:45.310

我还没有尝试过，但我要尝试的第一件事是在 cellForRowAtIndexPath ...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // standard stuff to build cell and setup it's state

    if ([indexPath isEqual:self.myModel.indexPathOfTextFieldBeingEdited]) {
        // you probably have a handle to the text field from the setup above
        UITextField *textField = (UITextField *)[cell viewWithTag:SOME_TAG];
        [textField performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0.0];
    }
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:55:16.543

这是我在 MonoTouch 中所做的 - 重要的是不要为 ScrollToRow() 设置动画 - 即“动画：否”，如 edzio27 的答案所示（感谢 edzio27 :)）。

```
var newCell = (UIOrderLineCell)tableView.CellAt(newIndexPath);
if (newCell == null)
{
    tableView.ScrollToRow(newIndexPath, UITableViewScrollPosition.Middle, false);
    newCell = (UIOrderLineCell)tableView.CellAt(newIndexPath);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:24:15.880

您必须在屏幕上显示单元格才能使其成为第一响应者。首先做：

```
[self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionMiddle animated:NO]; 
```

然后在它的标签/文本字段上调用第一响应者。

# python - Python：虽然循环运行一次并等待..我希望它循环但它没有

> ID：15189466
> 
> 赞同：0
> 
> 时间：2013-03-03T18:54:11.857
> 
> 标签：python, while-loop, raspberry-pi

我是 python 编码的新手，我正在使用 Raspberry Pi 作为学习手段。我正在尝试不断轮询我板上的输入并将它们打印到屏幕上，但是代码会打印一次输入状态并且似乎在等待某些东西，我似乎无法弄清楚......任何帮助都会很大赞赏。

```
# piFace_Control.py

import piface.pfio as pfio
import serial
import time
import struct

def h(val):
    return struct.pack('!H', val)

def i(val):
    return struct.pack('I', val)

serialA = serial.Serial("/dev/ttyUSB0",9600)
serialA.open()
serialA.flush()

pfio.init()

time.sleep(1)

val2 = 1
run = 1

while (run):
      try:
        val = serialA.readline()
        print(val)
        serialA.write(h(0xFE))
        serialA.write(' Got it!')

        if val2 == 0:
            val2 = 1
        else:
            val2 = 0 

        print(i(val2))
        serialA.write(i(val2))
        pfio.digital_write(0,val2)
        print "D0: "+str(pfio.digital_read(0))
        print "D1: "+str(pfio.digital_read(1))
        print "D2: "+str(pfio.digital_read(2))
        print "D3: "+str(pfio.digital_read(3))
        print "D4: "+str(pfio.digital_read(4))
        print "D5: "+str(pfio.digital_read(5))
        print "D6: "+str(pfio.digital_read(6))
        print "D7: "+str(pfio.digital_read(7))

      except (KeyboardInterrupt, SystemExit):
        print '\nKeyboard Interrupt Caught...'
        run = 0
        pass

serialA.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:04:38.243

当你击中：

```
val = serialA.readline() 
```

在第二个循环中，它永远不会从串行接收到完整的行，一直等到它接收到。

串行连接另一端的任何东西都只发送一条线。

# python - 在 Python 中使用递归调用方法

> ID：15189468
> 
> 赞同：1
> 
> 时间：2013-03-03T18:54:24.113
> 
> 标签：python

我正在学习 Python 的递归。我定义了一个链表，其中每个节点都有`item`和。我想写一个递归来设置从头到尾的级别，0、1、2 ...`next``level`

```
class LinkNode(object):
    """A node in a linked list."""

    def __init__(self, item, next=None):
        """(LinkNode, object, LinkNode) -> NoneType
        Initialize this node to store item and have next and level 0.
        """
        self.item = item
        self.left = next
        self.level = 0  # the level of the link

    def set_level(self, level):
        """(LinkNode, int) -> NoneType
        Set the level attribute of every node in the list
        for example: first node is 0, second is 1, third is 3...
        """
        if self is None:
            pass
        else:
            self.level = level
            levle = level + 1
            self.set_level(self.next, level) 
```

但是当我运行它时，出现以下错误：

```
File "C:\Program Files\Wing IDE 101
4.1\src\debug\tserver\_sandbox.py", line 29, in <module>   File "C:\Program Files\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py",
line 21, in set_level builtins.TypeError: set_level() takes exactly 2
positional arguments (3 given) 
```

递归调用有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:00:57.657

```
def set_level(self, level):
    """(LinkNode, int) -> NoneType
    Set the level attribute of every node in the list
    for example: first node is 0, second is 1, third is 3...
    """
    self.level = level
    if self.next is not None:
        self.next.set_level(level+1) 
```

* * *

当您调用`self.set_level(...)`该方法时`self_level`，将使用实例`self`（点左侧的对象）作为第一个参数来调用该方法。

所以`self.set_level(self.next, level)`调用`self`的 set_level 方法`self`作为第一个参数、`self.next`第二个参数和`level`第三个参数。

由于`LinkNode.set_level`只接受两个参数，Python 会引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:01:06.497

一些东西：

```
levle = level + 1 
```

这里有一个错字。此外，当通过类上下文调用某些东西时，`self`方法中将是调用者，所以当你说`self.set_level`你实际上是在调用时：

```
set_level(self, self.next, level) 
```

这不是你想要的。你想要的是这样的：

```
self.next.set_level(level) 
```

但是，鉴于这是一个链接列表，我实际上并没有看到您设置`level`self.next （看着您的`__init__`您似乎没有设置 a `self.next`，而是设置 a `self.left`）。我会再次查看您的代码并验证您尝试访问的变量是否正确命名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:05:35.760

简短的回答：使用`self.next.set_level(level)`而不是`self.set_level(self.next, level)`.

问题（在执行中）在语句中：

```
self.set_level(self.next, level) 
```

这意味着该`set_level`函数需要 2 个参数，但您传递了 3 个：`(self, self.next, level)`

在 Python 中定义类成员函数时，添加“self”参数（其名称只是一个约定），它将标识函数应用的对象。

`def function(self)`因此，调用了一些语句`object.function()`，其中对象将作为 self.argument 传递。

# .net - = vb.net 中的运算符

> ID：15189469
> 
> 赞同：-1
> 
> 时间：2013-03-03T18:54:36.287
> 
> 标签：.net, vb.net, graph, operator-overloading

我正在写一个图程序，有一个地方需要检查一条边的结束节点是否等于一个节点

```
Public Function isAdjacent(ByRef n As node) As Boolean
  For Each edge In edges
    If ((edge.endNode = n) Or ((Not edge.isDirected) AndAlso edge.startNode = n)) Then
      Return True
    End If
  Next
  Return False
End Function 
```

`edges`是一个[哈希集](http://msdn.microsoft.com/en-us/library/bb359438.aspx)。下面显示了一个错误`edge.endNode = n`，`edge.start = n`上面写着

> 运算符 '=' 没有为类型 'node' 和 'node' 定义。

我需要重载[Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)方法吗？如果是这样，我是否也不需要重载我不想做的 GetHashCode 方法，或者有没有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:07:23.113

如果要检查引用相等性，请改用`Is`关键字。

```
If ((edge.endNode Is n) 
```

如果不是，您需要覆盖`Equals`（我强烈建议您也覆盖`GetHashCode`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:59:42.553

我的猜测是您将不得不重载 Equals 方法。[**这篇**](http://www.infoq.com/articles/Equality-Overloading-DotNET)关于 .NET 中的相等覆盖的文章详细解释了这是如何完成的。希望这可以帮助。

# php - PHP Read txt file and check if username password exists

> ID：15189470
> 
> 赞同：-2
> 
> 时间：2013-03-03T18:54:43.003
> 
> 标签：php, authentication, session-variables, plaintext

I have a bunch of passwords and usernames stored in a txt file and i need to check for matches. I know this is not a safe method but its for leaning purposes.

This code writes the usernames and passwords to a txt file

```
 if(isset($_POST['register'])) //  
   {
    $user  = $_POST['username'];
    $password=$_POST['password'].PHP_EOL;
    $fh = fopen("file.txt","a+");
    fwrite($fh,$user." ".$password); //write to txtfile

    fclose($fh);
 } 
```

Here's the code im having trouble with.

Username and Passwords are stored like this in results

```
 username1 passwords1 username2 password2 etc. 
```

So I need to check if result[0] = userinput AND if it exists check if result[1] = passwordInput and so on.

```
 if(isset($_POST['Logg']))
   {
   //$_SESSION['username']=$user; 
   //$_SESSION['password']=$password;

    $file = file_get_contents("file.txt"); // Returns a string

    $result = explode(" ",$file);
    $boolC= false;

    for($i=0; $i< count($result); $i++)
    {
   if($result[$i] === $user)
   {
    $boolC=true;
    $i =$i+1; 
    if($boolC === true)
    {
        if($result[$i]===$password)
        {
            echo 'Password and Username Correct';
        }
    }

   }
     }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T18:59:15.847

Before you go ahead and try to correct this code, I strongly suggest you stay away from storing passwords in a plain text file. It is a huge security hole in your system.

Another architecture issue I can see is that your code would fail if the username or passwords contain a space in them. You probably should use line jumps as a delimiter instead (\n).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:19:11.730

Consider the possibility of having a space in the password so as any symbols. Perhaps you should split on a line break ("\n").

```
if( $result[$i] === $user && $result[$i+1] === $password ) 
```

The first part of the statement has to be true for the second one to be evaluated. The $i variable is never changed

```
$file = "username1 passwords1 username2 password2";
$result = explode(" ",$file);
$user = "username1";
$password = "passwords1";

for($i=0; $i< count($result); $i++){

    if($result[$i] === $user && $result[$i+1] === $password)
    {

        echo 'Password and Username Correct';
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:15:51.127

I think there is nothing wrong with the logic of the original post.

You should print all the variables to check whether they hold the correct value or not.

the "$user" and "$password" variables are global or not since they would not be known within the braces of the other if block i.e in the block where you check $_POST['logg']

# php - 图片上传脚本错误（php）

> ID：15189471
> 
> 赞同：0
> 
> 时间：2013-03-03T18:54:46.483
> 
> 标签：php

我写了一个 php 脚本来上传图片，脚本和上传文件夹都在我的 htdocs 文件夹中。这是我的脚本：

```
<head>
<title>Upload an Image</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta name="generator" content="Geany 0.21" />
<style type="text/css" title="text/css" media="all">
  .error {
      font-weight: bold;
      color:#Coo;
  }
</style>
    </head>

    <body>
<?php
     if($_SERVER['REQUEST_METHOD']=='POST') {
      if(isset($_FILES['upload'])) {
          $allowed = array('image/pjpeg','image/JPG','image/X-PNG','image/png','image/x-png');
          if(in_array($_FILES['upload']['type'],$allowed)) {
              if(move_uploaded_file($_FILES['upload']  ['tmp_name'],"../uploads/{_FILES['upload']['name']}")) {
                  echo '<p><em>The file has been uploaded!</em>  </p>';
              }
          }
          else {
              echo '<p class="error">Please uploaded a JPEG or PNG   image.</p>';
          }
      }
      if($_FILES['upload']['error'] > 0) {
          echo '<p class="error">The file could not be uploaded because: <strong></p>';
          switch ($_FILES['upload']['error']) {
              case 1:
                print 'The file exeeds the upload_max_filesize setting in php.ini';
                break;
              case 2:
                print 'The file exeeds the MAX_FILE_SIZE setting in the HTML form';
                break;
              case 3:
                print 'The file was only partially uploaded.';
                break;
              case 4:
                print 'No file was uploaded';
                break;
              case 6:
                print 'No tmp folder was available';
                break;
              case 7:
                print 'Unable to write on the disk';
                break;
              case 8:
                print 'File upload stopped';
                break;
              default:
                print 'A system error occured';
                break;
            }
            print '</strong>';

        }
            if(file_exists ($_FILES['upload']['tmp_name']) &&    is_file($_FILES['upload']['tmp_name']) ) {
                unlink ($_FILES['upload']['tmp_name']);
        }
    }
?>
<form enctype="multipart/form-data" action="upload_image.php" method="post">
  <input type="hidden" name="MAX_FILE_SIZE" value="524288" />
  <fieldset><legend>Select a JPEG/PNG image of 512KB or smaller to be uploaded:</legend>
  <p><b>File:</b><input type="file" name="upload" /></p>

  </fieldset>
  <div align="center">
  <input type="submit" name="submit" value="Submit" />
  </div>
</form>
</body>
</html> 
```

我收到如下错误：警告：move_uploaded_file(../uploads/110221110100_96.png)：无法打开流：第 27 行的 /opt/lampp/htdocs/upload_image.php 中没有此类文件或目录

警告：move_uploaded_file(): Unable to move '/tmp/phph4iy1j' to '../uploads/110221110100_96.png' in /opt/lampp/htdocs/upload_image.php on line 27.

但我已经设置了所有必需的权限.....期待帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:59:52.423

为了排除与相对路径的任何混淆，我首先使用绝对路径（即`/home/foo/project/uploads`）`move_updated_file()`。

如果仍然失败，请尝试将上传的文件移动到类似`/tmp/foo`. 如果可行，那么您的问题是基于您尝试将图像移动到的上传文件夹的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:38:47.423

你应该让你的上传目录绝对，就像詹姆斯说的那样。除了我可能会使用服务器文档根方式。

```
if(move_uploaded_file($_FILES['upload'] ['tmp_name'], $_SERVER['DOCUMENT_ROOT']."/uploads/".$_FILES['upload']['name'])) {
    echo '<p><em>The file has been uploaded!</em>  </p>';
} 
```

这假设`$_SERVER['DOCUMENT_ROOT']`解析为`/opt/lampp/htdocs`- 我会通过查看您的路径来假设。

您可以`print_r($_SERVER['DOCUMENT_ROOT'])`查看实际路径是什么。

请记住，在将文件放入公共文件夹之前，您可能需要验证 mime 类型并重命名文件。照原样，代码可能会让您面临坏事。这是另一个讨论。

# c++ - 如何将链表链接到 C++ 中的静态数组？

> ID：15189484
> 
> 赞同：1
> 
> 时间：2013-03-03T18:56:55.810
> 
> 标签：c++, pointers, linked-list

考虑：

```
 struct Package_Node
    {
        int bar_code;
        float package_weight;
        struct Package_Node *next_packaged;
    };

    struct Key_Node
    {
        int key;
        struct Package_Node *next_package;
    };

    int weightTemp = 0, barcodeTemp = 0, keyTemp = 0, N = 0, X = 0, max_value = 0, optionChosen = 0, optionChosenTwo = 0;
    float tempWeight;

    int main()
    {
        srand(time(NULL));
        do
        {
            cout << "1 - Enter Number of keys and the Max Value\n2 - Enter Number of Packages (N)\n";
            cout << "3 - Create Array of Keys\n4 - Organize Packages\n5 - Table Stats\n6 - Clean Table\n7 - Exit\n\n";
            cin >> optionChosen;

            switch(optionChosen)
            {
                case 1:
                {
                    cout << "\nEnter Number of Keys:";
                    cin >>X;
                    cout <<"\nEnter Max Value of the Barcode: ";
                    cin >>max_value;
                    break;
                }

                case 2:
                {
                    cout << "\nEnter Number of Packages: ";
                    cin >> N;
                    //keyTemp=
                    break;
                }

                case 3:
                {
                    Key_Node keyMain[X];
                    for(int i=0;i<X;i++)
                    {
                        keyMain[i].key=i;
                        //cout << keyMain[i].key; //to see key values.
                    }
                    break;
                }

                case 4:
                {
                    Package_Node totalPackages[N];
                    for(int i=0;i<N;i++)
                    {
                        barcodeTemp = rand() % max_value + 1;
                        keyTemp = barcodeTemp % X;
                        tempWeight = rand() % 500 + 1;
                        totalPackages[i].bar_code=barcodeTemp;
                        totalPackages[i].package_weight=tempWeight;

                    }
                    for(int i=0;i<N;i++)
                    {
                        cout << totalPackages[i].bar_code <<endl;
                        cout << totalPackages[i].package_weight << endl;
                    } 
```

这是我的代码。我正在尝试将总包 [i] （动态数组）的信息链接到 keyMain （Package_Node 数据类型和静态数组）。但我完全迷失在这里如何做到这一点。

另外，我对动态数组“totalPackages”的声明是否正确？还是我不应该声明它的大小，因为它会根据用户输入的包裹总数而增长？`totalPackages`应该是一个随着程序需要而增长的链表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:45:24.967

在 C++ 中，在花括号之间声明的变量`{}`是局部变量：当在花括号外运行代码时，它们“不再存在”。

您的代码如下所示：

```
 case 3:
        {
            Key_Node keyMain[X];
        }
        case 4:
        {
            Package_Node totalPackages[N];
        } 
```

不可能在另一部分声明代码访问内容的一部分。要修复，请在 main 函数的开头声明一些东西：

```
int main()
{
    Key_Node keyMain[X];
    Package_Node totalPackages[N];
    ...
} 
```

现在声明很糟糕，因为它们在用户提供值`X`和`N`. 要解决此问题，请将数组替换为`std::vector`：

```
int main()
{
    std::vector<Key_Node> keyMain;
    std::vector<Package_Node> totalPackages;
    ...
} 
```

您将需要学习使用`std::vector` [文档](http://en.cppreference.com/w/cpp/container/vector)，尤其是`push_back`和`size`)。另外，查看文档`std::list`；它也可能对您有所帮助。

# .net - .NET 命名约定

> ID：15189486
> 
> 赞同：0
> 
> 时间：2013-03-03T18:57:08.250
> 
> 标签：.net, vb.net, coding-style

我正在支持和开发一个大型应用程序。这个问题特别与命名约定有关。

以前的开发人员使用 Pascal Casing、下划线作为变量名和其他一些技术，这些天似乎不受欢迎。

我的问题是：我应该继续使用他为保持一致性而使用的约定，还是引入似乎不被认可的约定，如下所述：http: [//www.dofactory.com/reference/csharp-coding-standards.aspx](http://www.dofactory.com/reference/csharp-coding-standards.aspx)以至少一段时间内的不一致为代价。

我正在尝试重构代码，所以也许我应该在应用程序的新领域引入新的约定，并通过用现代约定替换皱眉的约定来继续重构代码？

也许我在想这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:08:04.087

如果旧代码是一致的，那就保持一致，到处都是不同的风格使它更加混乱。

如果你要改变，把它变成一个工作项目，安排它，一次做完。

你当然可以找到逐渐改变的论据。如果您可以说服自己通过小步骤完成重命名，无论如何您都需要处理代码，请继续。但老实说，有多少那些逐渐转变的代码过程在更新样式指南之前就完成了，并且在清理第一个更改之前您开始使用第三种样式。

如果您的代码已经处于不一致的样式中，那么更有说服力的理由在它变得更糟之前立即清理混乱。

# java - 使用输入字符串生成对象和函数反射

> ID：15189489
> 
> 赞同：0
> 
> 时间：2013-03-03T18:57:27.183
> 
> 标签：java, reflection

假设我有一个文件，它的名称是 file.txt 它由 java 中反射方法的脚本组成。假设其中一些是：

```
new <id> <class> <arg0> <arg1> … creates a new instance of <class> by using 
a constructor that takes the given argument types and stores the result in <id>.
call <id> <method> <arg0> <arg1> …  invokes the specified <method> that 
takes the given arguments on the instance specified by <id> and prints the answer. 
print <id>  prints detailed information about the instance specified by <id>. See 
below for Object details. 
```

文件中的脚本将在程序中作为字符串提取。我将如何将其转换为我上面指定的参数以进行反射。我对这个视而不见！一些代码帮助的一些描述将不胜感激，因为我是 java 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:17:58.657

首先，这是一个解析问题。您需要做的第一件事是将输入分解为可管理的块。由于您似乎使用空格来分隔组件，因此这应该是一件相当容易的事情。

由于每行有一个命令，因此您要做的第一件事是将它们分成几行，然后根据空格分成单独的字符串。解析是一个足够大的话题，值得提出自己的问题。

然后，您将逐行进行，在该行的第一个单词上使用 if 语句来确定应该执行什么命令，然后根据正在对它们执行的操作解析其他单词。

像这样的东西：

```
public void execute(List<String> lines){
    for(String line : lines){
        // This is a very simple way to perform the splitting. 
        // You may need to write more code based on your needs.
        String[] parts = lines.split(" ");

        if(parts[0].equalsIgnoreCase("new")){
            String id = parts[1];
            String className = parts[2];
            // Etc...
        } else if(parts[0].equalsIgnoreCase("call")){
            String id = parts[1];
            String methodName = parts[2];
            // Etc...
        }
    }
} 
```

# java - 将 lucene 或 solr 与 java derby DB 集成

> ID：15189490
> 
> 赞同：0
> 
> 时间：2013-03-03T18:57:33.737
> 
> 标签：java, swing, solr, lucene, derby

我正在开发一个带有文本字段的桌面应用程序，用户将输入文本字符然后搜索数据库以找到行进字符串

例如

如果用户输入短语“比生命更重要”

系统应在数据库中的所有列中搜索行进字符串。我正在使用带有 NetBeans IDE 的 java derby 数据库。

是否可以使用 lucene 或 solr 搜索引擎来搜索 java derby DB

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:06:12.547

您可以使用[DataImportHandler](https://wiki.apache.org/solr/DataImportHandler)将数据从 Derby 拉入 Solr 模式。然后，您使用[eDisMax](http://wiki.apache.org/solr/ExtendedDisMax)作为搜索算法来查找所有字段的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:59:03.287

看起来可以整合它们。这是 Apache it self 的简短教程。

[LuceneDerby 集成](http://wiki.apache.org/db-derby/LuceneIntegration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T03:17:53.780

根据 DERBY-590，有一个补丁可用，但尚未完全烘焙：

[https://issues.apache.org/jira/browse/DERBY-590](https://issues.apache.org/jira/browse/DERBY-590)

# java - Android：HttpPost - 尝试将用户输入的数据插入服务器上的 SQL 表中

> ID：15189494
> 
> 赞同：1
> 
> 时间：2013-03-03T18:57:57.070
> 
> 标签：java, android, sql, sql-server, http-post

我正在开发一个 android 项目，我正在尝试获取用户在 EditText 框中输入的文本并将其添加到我服务器上的 SQL 表中。我认为问题出在没有正确的 SQL 查询，但我不确定我必须添加什么（当涉及到 SQL 时我一无所知）：S

当我在手机上运行这个应用程序时，它似乎承认我输入了一些内容并将其传递给数据库（没有出现错误或异常），但实际上没有任何内容添加到数据库表中。

任何关于我哪里出错的想法将不胜感激！

JDBC 服务器代码：

```
public class DBServlet4 extends HttpServlet {
    public void doPost(HttpServletRequest request, HttpServletResponse response)
                    throws IOException, ServletException {

            response.setContentType("text/html");
            PrintWriter out = response.getWriter();
            Connection con = null;
            Statement stmt = null;
            ResultSet rs = null;

            try {
                    Class.forName("com.mysql.jdbc.Driver");
                                    con = DriverManager.getConnection(
                                    "jdbc:mysql://localhost:3306/cs2001", "l2g0",
                                    "l2g0");

                    stmt = con.createStatement();

                    stmt.executeUpdate("CREATE TABLE IF NOT EXISTS Students (id int, name varchar(45))");
                    stmt.executeUpdate("INSERT INTO Students (id, name) SELECT * FROM (SELECT '0', 'Michael') AS Temp WHERE NOT EXISTS (SELECT name FROM Students WHERE name = 'Michael') LIMIT 1");

                    //con.commit();

            } catch (SQLException e) {
                    throw new ServletException(e.getMessage());
            } catch (ClassNotFoundException e) {
                    throw new ServletException("JDBC Driver not found.", e);
            } finally {
                    try {
                            if (rs != null) {
                                    rs.close();
                                    rs = null;
                            }
                            if (stmt != null) {
                                    stmt.close();
                                    stmt = null;
                            }
                            if (con != null) {
                                    con.close();
                                    con = null;
                            }
                    } catch (SQLException e) {                        
                    }
            }
            out.close();
    }} 
```

安卓代码：

```
public class MainActivity extends Activity{ 
private static final String ipAddress = "172.31.81.28";
private static final String portNumber = "8085";

protected TextView getText;
protected EditText inputName;
protected List<Student> students;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    getText = (TextView) findViewById(R.id.select_output);
    inputName = (EditText) findViewById(R.id.name_input);
}

public void onClick(View v)
{   
    switch (v.getId())
    {
        case R.id.post_button:
        {
            //
            String responseString = "";
            try 
            {
                responseString = new HttpPostTask().execute("" + inputName.getText()).get(10, TimeUnit.SECONDS);
            } 
            catch (InterruptedException e) 
            {
                responseString = "#An Error Occured: InterruptedException";
                e.printStackTrace();
            } 
            catch (TimeoutException e) 
            {
                responseString = "#An Error Occured: TimeoutException";
                e.printStackTrace();
            }
            catch (ExecutionException e) 
            {
                responseString = "#An Error Occured: ExecutionException";
                e.printStackTrace();
            }

            if (responseString.startsWith("#"))
            {
                Toast.makeText(this,
                        responseString.substring(1), Toast.LENGTH_SHORT).show();
            }
            else
            {
                Toast.makeText(this,
                        responseString, Toast.LENGTH_SHORT).show();
            }

            break;
        }

        //code for getting data from DB
        case R.id.get_button:
        {
            String responseString = "";
            try 
            {
                responseString = new HttpGetTask().execute("").get(10, TimeUnit.SECONDS);
            } 
            catch (InterruptedException e) 
            {
                responseString = "#An Error Occured: InterruptedException";
                e.printStackTrace();
            } 
            catch (TimeoutException e) 
            {
                responseString = "#An Error Occured: TimeoutException";
                e.printStackTrace();
            }
            catch (ExecutionException e) 
            {
                responseString = "#An Error Occured: ExecutionException";
                e.printStackTrace();
            }

            if (responseString.startsWith("#"))
            {
                Toast.makeText(this,
                        responseString.substring(1), Toast.LENGTH_SHORT).show();
            }
            else
            {
                Toast.makeText(this,
                        "Connection Successful", Toast.LENGTH_SHORT).show();

                this.getText.setText(responseString);
                this.students = parseData(responseString, "\n", ":");

                int i = 0;
                for (Student student : students)
                {
                    ++i;
                    System.out.print("[" + i + "] " + student + "\n");
                }
            }

            break;
        }
        default:
        {
            /* Do Nothing */
        }
    }
}

private List<Student> parseData(String input, String caseDelimiter, String fieldDelimiter)
{
    String[] temp = input.split(caseDelimiter);

    LinkedList<Student> students = new LinkedList<Student>();
    for (int i = 0; i < temp.length; i++)
    {
        String[] tempStudent = temp[i].split(fieldDelimiter);
        students.add(new Student(Integer.parseInt(tempStudent[0]), tempStudent[1].trim()));
    }

    return students;
}

private class Student
{
    int id;
    String name;

    public Student(int id, String name)
    {
        this.id = id;
        this.name = name;
    }

    public String toString()
    {
        return "" + id + " - " + name;
    }
}

private class HttpPostTask extends AsyncTask<String, Integer, String>
{
    private static final String ipAddress = "172.31.81.28"; // *** UPDATE THIS ***
    private static final String portNumber = "8085"; // *** UPDATE THIS ***

    @Override
    protected String doInBackground(String... args)
    {
        String responseString = "An Unknown Error Occured";

        HttpParams params = new BasicHttpParams();
        params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
        HttpClient client = new DefaultHttpClient(params);

        String url = "http://" + ipAddress + ":" + portNumber + "/DB4";
        HttpPost request = new HttpPost(url);

        try
        {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("id", "123"));
            nameValuePairs.add(new BasicNameValuePair("username", args[0]));

            request.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = client.execute(request);
            HttpEntity resEntityGet = response.getEntity();
            if (resEntityGet != null) 
            {
                responseString = EntityUtils.toString(resEntityGet);
            }

        }
        catch (ClientProtocolException e) 
        {
            responseString = "#An Error Occured: ClientProtocolException";
            e.printStackTrace();
        }
        catch (IOException e) 
        {
            responseString = "#An Error Occured: IOException";
            e.printStackTrace();
        }

        return responseString;
    }
}

private class HttpGetTask extends AsyncTask<String, Integer, String>
{
    @Override
    protected String doInBackground(String... args)
    {
        String url = "http://172.31.81.28:8085/DB4";
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet(url);
        String responseString = "";
        try 
        {

            HttpResponse response = client.execute(request);
            HttpEntity resEntityGet = response.getEntity();
            if (resEntityGet != null) 
            {
                responseString = EntityUtils.toString(resEntityGet);
            }

        }
        catch (Exception e) 
        {
            responseString = "#An Error Occured: UndeclaredException";
            e.printStackTrace();
        }

        return responseString;
    }
}   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:48:03.683

没关系，问题解决了。我使用了一个单独的 AsyncTask 类。

# background - 响应式网站背景图片代码

> ID：15189495
> 
> 赞同：0
> 
> 时间：2013-03-03T18:57:58.537
> 
> 标签：background, responsive-design

我有一个循环显示图像的背景，这些图像没有固定的大小。

我的问题是我找不到一个简单的响应框架来调整专用*背景*图像的大小。网站上有很多用于普通图像的插件。

1.  我网站的背景总是必须显示图像。
2.  允许裁剪，允许图像必须重新定位在网络浏览器的中心。
3.  允许使用 jQuery 或 @Media，我不介意。

我的图像和 div 如下所示：

```
<div style="width:100%; height:100%; background:white; position:absolute; margin-left:0px; margin-top:0px;>
    <img src="image1.png">
    <img src="image2.png">
    <img src="image3.png">
</div> 
```

许多插件将宽度设置为 100%，将高度设置为自动。假设浏览器宽度为 200 像素，浏览器高度为 800 像素，这将不起作用。图像不会覆盖整个屏幕并保持其纵横比。图像下方和上方会有一个“间隙”，因此在这种情况下，高度应为 100%，宽度更改为自动。当然，如果浏览器高度为 200 像素，浏览器长度为 800 像素，则反过来；

我想要的示例：http: [//www.martinlogin.se/](http://www.martinlogin.se/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:23:10.570

您要求根据屏幕方面应用两种不同的场景。这可以通过媒体查询来完成，但您需要确定一些宽度和高度。

从基于宽度的尺寸开始：

```
#backgroundDiv {width: 100%; height: auto;} 
```

当站点比某个点窄时，切换到基于高度的大小：

```
#backgroundDiv {width: auto; height: 100%;} 
```

您需要根据预期受众最可能的屏幕尺寸/外观场景、您使用的图像等来决定转换发生的位置。

为了获得更大的灵活性，比如针对特定的纵横比而不是宽度，您需要编写脚本。

# php - Symfony教程错了？

> ID：15189496
> 
> 赞同：0
> 
> 时间：2013-03-03T18:58:00.487
> 
> 标签：php, symfony, twig

我试图在以下位置遵循 symfony 教程：

[http://symfony.com/doc/current/book/page_creation.html#step-1-create-the-route](http://symfony.com/doc/current/book/page_creation.html#step-1-create-the-route)

但在某个时候，我决定使用 php 代替 twig。

所以我试图在第 3 步使用模板，我的页面向我展示了这一行

```
extend('::base.html.php') ?> Hello escape($name) ?>! 
```

不确定这是否是教程中的错误，因为他们通常选择使用 twig 工作，或者我做错了什么。就像我的页面在尝试扩展它时无法识别 php。

这是我要渲染的页面的完整代码：

```
<!-- src/Acme/HelloBundle/Resources/views/Hello/index.html.php -->
<?php $view->extend('::base.html.php') ?>

Hello <?php echo $view->escape($name) ?>! 
```

我在这个 url http://localhost:8080/web/app_dev.php/hello/Peter 运行页面

这是我的控制器：

```
class HelloController extends Controller
{
    public function indexAction($name)
    {
        // return $this->render(
        //    'AcmeHelloBundle:Hello:index.html.twig',
        //    array('name' => $name)
        // );

        // render a PHP template instead
         return $this->render(
             'AcmeHelloBundle:Hello:index.html.php',
             array('name' => $name)
         );
    }
} 
```

和我的基地：

```
!-- app/Resources/views/base.html.php -->
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title><?php $view['slots']->output('title', 'Welcome!') ?></title>
        <?php $view['slots']->output('stylesheets') ?>
        <link rel="shortcut icon" href="<?php echo $view['assets']->getUrl('favicon.ico') ?>" />
    </head>
    <body>
        <?php $view['slots']->output('_content') ?>
        <?php $view['slots']->output('javascripts') ?>
    </body>
</html> 
```

请注意，我使用的 /web/ 不在本教程中。这可能与问题有关吗？因为我告诉基本模型在 :: ？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:13:43.573

如果您查看文档中的[“如何使用 PHP 而不是 Twig for Templates”](http://symfony.com/doc/current/cookbook/templating/PHP.html)一文，您会读到需要将 PHP 注册为模板引擎。

假设您使用 Yaml 作为配置格式：

```
# app/config/config.yml
framework:
    # ...
    templating:    { engines: ['twig', 'php'] } 
```

# java - 超出 Java Postgres 连接限制

> ID：15189499
> 
> 赞同：1
> 
> 时间：2013-03-03T18:58:03.940
> 
> 标签：java, postgresql, jdbc

我通过 Postgres JDBC 驱动程序使用 Java 1.7 和 Postgres。数据库连接将从 Web 服务中使用。在测试中，我收到以下错误：

```
FATAL: connection limit exceeded for non-superusers 
```

我通过使我的连接静态解决了这个错误，并且只创建了一次。我的问题是，静态连接安全吗？这是正确的方法吗？

我通过一个看起来像这样的 ConnectionFactory 使用连接：

```
public class ConnectionFactory
{

   String driverClassName = "org.postgresql.Driver";
   String connectionUrl = "jdbc:postgresql://localhost:5432/dbName";
   String dbUser = "user";
   String dbPwd = "password";
   private static ConnectionFactory connectionFactory = null;
   private static Connection conn = null;

   private ConnectionFactory()
   {
      try
      {
         Class.forName(driverClassName);
      }
      catch (ClassNotFoundException e)
      {
         e.printStackTrace();
      }
   }
   public Connection getConnection() throws SQLException
   {
      if (conn == null)
      {
         conn = DriverManager.getConnection(connectionUrl, dbUser, dbPwd);
      }
      return conn;
   }

   public static ConnectionFactory getInstance()
   {
      if (connectionFactory == null)
      {
         connectionFactory = new ConnectionFactory();
      }
      return connectionFactory;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:54:03.710

抱歉，原始帖子没有仔细查看您的代码。哇。我还是看不懂。无论如何，第三次的魅力。如果您的代码是单线程的 - 那么您就可以了。如果它是多线程的，请使用 Commons 连接池之类的东西来管理您的连接。看起来驱动程序是线程安全的，但不应将连接视为线程安全的。因此，一旦加载了驱动程序，您就可以安全地从多个线程调用驱动程序上的 getConnection，但不应跨线程共享连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:13:45.993

Postgres JDBC 驱动程序被[记录为线程安全](http://jdbc.postgresql.org/documentation/head/thread.html)的，如果需要，该连接可以被多个线程使用。如果一个线程尝试使用该连接，而另一个线程正在使用它，它将一直等到另一个线程完成其当前操作。

出于性能原因，无论如何都可以使用连接池。

# php - strtotime() 的错误

> ID：15189501
> 
> 赞同：0
> 
> 时间：2013-03-03T18:58:09.380
> 
> 标签：php, web-scraping, screen-scraping

Simple HTML DOM 库用于从网页中提取时间戳。`strtotime`然后用于将提取的时间戳转换为 MySQL 时间戳。

**问题：**当`strtotime()`用于有效时间戳时，`NULL`返回（参见`2:`）。但是，当第二个示例中未使用 Simple HTML DOM 时，一切正常。

发生了什么，如何解决？

**输出：**

```
1:2013-03-03, 12:06PM
2:
3:1970-01-01 00:00:00 
```

**var_dump($time)**

```
string(25) "2013-03-03, 12:06PM" 
```

**PHP**

```
include_once(path('app') . 'libraries/simple_html_dom.php');

// Convert to HTML DOM object
$html = new simple_html_dom();
$html_raw = '<p class="postinginfo">Posted: <date>2013-03-03, 12:06PM EST</date></p>';
$html->load($html_raw);

// Extract timestamp
$time = $html->find('.postinginfo', 0);
$pattern = '/Posted: (.*?) (.).T/s';
$matches = '';
preg_match($pattern, $time, $matches);
$time = $matches[1];

echo '1:' . $time . '<br>';
echo '2:' . strtotime($time) . '<br>';
echo '3:' . date("Y-m-d H:i:s", strtotime($time)); 
```

* * *

## 第二个例子

**PHP（工作，没有简单的 HTML DOM）**

```
// Extract posting timestamp
$time = 'Posted: 2013-03-03, 12:06PM EST';
$pattern = '/Posted: (.*?) (.).T/s';
$matches = '';
preg_match($pattern, $time, $matches);
$time = $matches[1];

echo '1:' . $time . '<br>';
echo '2:' . strtotime($time) . '<br>';
echo '3:' . date("Y-m-d H:i:s", strtotime($time)); 
```

**输出（正确）**

```
1:2013-03-03, 12:06PM
2:1362312360
3:2013-03-03 12:06:00 
```

**var_dump($time)**

```
string(19) "2013-03-03, 12:06PM" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:11:01.487

根据您的说法，您从 HTML 代码中提取`var_dump()`的字符串长度为**25 个**字符。`$time`

 ***您看到*的字符串, `"2013-03-03, 12:06PM"`, 只有**19 个**字符长。

那么，这 6 个额外的字符在哪里？嗯，很明显，真的：你要解析的字符串真的是`"<date>2013-03-03, 12:06PM"`. 但是，当您将其打印到 HTML 文档中时，`<date>`浏览器会将其解析为 HTML 标记。

要查看它，请使用浏览器中的“查看源代码”功能。或者，*更好的*是，在打印任何*不应*包含 HTML 代码`htmlspecialchars()`的变量时使用。**

# .net - 在新变量名 VB.Net 中使用外部变量名

> ID：15189502
> 
> 赞同：0
> 
> 时间：2013-03-03T18:58:10.027
> 
> 标签：.net, vb.net, variables

只是试图解决一个问题，从基于另一个变量名的结构中获取特定的...

```
Sub Main()

    Dim Testing As Test
    ReDim Testing.A(15), Testing.B(13), Testing.C(10)

    Dim Letter As String = Console.ReadLine() 'User Inputs A, B Or C

    Testing.Letter(3) = "XXXXX" 'Selects the array of the letter the user has input from the Letter variable

End Sub

Structure Test
    <VBFixedString(5)> <VBFixedArray(15)> Dim A() As Integer
    <VBFixedString(5)> <VBFixedArray(13)> Dim B() As Integer
    <VBFixedString(5)> <VBFixedArray(10)> Dim C() As Integer
End Structure 
```

感谢您的关注和建议的任何解决方案，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:49:56.077

我不太确定你在问什么，但也许你想要一个选择案例声明？

```
Sub Main()

    Dim Testing As Test
    ReDim Testing.A(15), Testing.B(13), Testing.C(10)

    Dim Letter As String = Console.ReadLine() 'User Inputs A, B Or C

    Select Case Letter.ToUpper
    Case "A" : Testing.A(3) = "XXXXX" 
    Case "B" : Testing.B(3) = "XXXXX" 
    Case "C" : Testing.C(3) = "XXXXX" 
    End Select

End Sub 
```

你也可以使用反射...

# java - 如何使泛型方法在 java 中锁定其类型？

> ID：15189503
> 
> 赞同：4
> 
> 时间：2013-03-03T18:58:14.170
> 
> 标签：java, generics, types, arguments, locked

我的意思是，例如在 C# 中，我可以编写一个像这样的通用方法：

```
public static void Concatenate<T> (T arg1, T arg2) 
{
    Console.WriteLine(arg1.ToString() + arg2.ToString());
} 
```

然后如果我以这些不同的方式调用该方法：

```
Concatenate("one", "two"); // will work just fine, outputs "onetwo"
Concatenate(1, 2); // will also work great, outputs 12
Concatenate("one", 2) // will give a compiler error 
```

或者，我可以像这样调用该方法：`Concatenate<string>("one", "two");`并确保只有字符串进入......

现在，如果我在 Java 中尝试完全相同的事情

```
public static <T> void concatenate(T arg1, T arg2) {
    System.out.println(arg1.toString() + arg2.toString());
} 
```

并以与 c# 示例完全相同的方式调用该方法：

```
concatenate("one", "two"); // will work just fine, outputs "onetwo"
concatenate(1, 2); // will also work great, outputs 12
concatenate("one", 2) // will work fine and outputs "one2" 
```

据我所知，我不能调用这样的方法，`concatenate<String>("One", "Two");`因为那样会给我一个错误

有什么方法可以添加我在 c# 中找到的那种类型安全性？

所以我不会冒险在任何一个地方输入任何类型并且只会收到警告......

一个更好的例子是使用可变参数

在 C# 中我会这样做：

```
public static void QuickSort<T>(params T[] args) // same as (T... args) in java
{
    // code
} 
```

并且在调用它时，我可以确定只有一种参数可以通过例如执行以下操作：

```
QuickSort<int>(5, 9, 7, 3, 2, 5, 4, 1); 
```

而在java中我可以做到这一点：

```
quickSort(5, "nine", 7, 3, "two", 5, 4, 1); 
```

并且只从 IDE 得到警告，而它会在 c# 中给出错误

所以我的问题是，有什么方法可以像在 c# 中一样“锁定”java 中的参数类型，a-la`QuickSort<int>(args)`而不是`quickSort(args)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:03:34.543

> 据我所知，我不能调用这样的方法，`concatenate<String>("One", "Two")`因为那样会给我一个错误

实际上，你可以，只是语法有点不同：

```
public class Main {

    public static <T> void concatenate(T arg1, T arg2) {
        System.out.println(arg1.toString() + arg2.toString());
    }

    public static void main(String[] args) {
        Main.<String>concatenate("one", "two"); // will work just fine, outputs "onetwo"
        Main.<Integer>concatenate(1, 2); // will also work great, outputs 12
        Main.<String>concatenate("one", 2); // will fail at compile time
    }
} 
```

如果`concatenate()`是非`static`方法，则语法为`obj.<String>concatenate(...)`.

至于你的第二个例子：

```
public class Main {

    public static <T> void quickSort(T... args) {
    }

    public static void main(String[] args) {
        quickSort(5, "nine", 7, 3, "two", 5, 4, 1);                // warning
        Main.<Integer>quickSort(5, "nine", 7, 3, "two", 5, 4, 1);  // error
    }
} 
```

在这里，`Main.<Integer>quickSort(...)`失败并出现以下错误：

> Main 类型的参数化方法 quickSort(Integer...) 不适用于参数 (Integer, String, Integer, Integer, String, Integer, Integer, Integer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T19:05:52.017

您可以明确使用泛型参数，但语法与您尝试的不同：

对于实例方法：

```
instance.<String>concatenate("a","b") 
```

对于静态方法：

```
MyClass.<String>concatenate("a","b") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T21:31:55.713

你所问的没有“类型安全”。`Concatenate("one", 2)`是完全类型安全的。从类型安全的角度来看，没有理由禁止它。泛型不是为了做出任意限制。

# ruby-on-rails - Rails 服务器无法运行 - 未初始化的常量使用 (NameError)

> ID：15189512
> 
> 赞同：0
> 
> 时间：2013-03-03T18:58:54.330
> 
> 标签：ruby-on-rails, gem, nameerror

我运行了一个捆绑安装，并且由于无法在终端内成功运行 rails s。我是 Rails 新手，并试图在这方面寻求帮助，但没有人能以 101 方式向我解释。出了什么问题 - 看起来这是一个 NameError？

```
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize': uninitialized constant Use (NameError)
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise.rb:267:in `get'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise/mapping.rb:77:in `to'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise/mapping.rb:72:in `modules'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise/mapping.rb:89:in `routes'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise/mapping.rb:156:in `default_used_route'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise/mapping.rb:66:in `initialize'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise.rb:301:in `new'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise.rb:301:in `add_mapping'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise/rails/routes.rb:208:in `block in devise_for'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/lib/devise/rails/routes.rb:207:in `devise_for'
    from /Users/cfictum/Documents/rails_projects/omrails/config/routes.rb:3:in `block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /Users/cfictum/Documents/rails_projects/omrails/config/routes.rb:1:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `call'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `execute'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/cfictum/Documents/rails_projects/omrails/config/environment.rb:5:in `<top (required)>'
    from /Users/cfictum/Documents/rails_projects/omrails/config.ru:4:in `block in <main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/cfictum/Documents/rails_projects/omrails/config.ru:1:in `new'
    from /Users/cfictum/Documents/rails_projects/omrails/config.ru:1:in `<main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T23:02:00.977

我认为您可能在 config/routes.rb 中输入了 Use 而不是 use

大小写很重要，如果它以大写字母开头，那么它是一个常数，而不是一个函数。

# android - 如何取消动画，但不结束它？

> ID：15189514
> 
> 赞同：12
> 
> 时间：2013-03-03T18:59:05.803
> 
> 标签：android, android-animation, translate-animation

`TranslateAnimation`我的课上有一个。动画自动开始。

我设置按钮，如果它被点击，动画将被取消（`animation.cancel();`）。

我还为我的班级设置了一个 AnimationListener。如果我的动画结束，我将开始一个新的活动（你去菜单）。

```
public void onAnimationEnd(Animation animation) {
    startActivity(new Intent(Class.this, Class2.class));
} 
```

我的应用程序依赖于用户必须在动画结束之前单击按钮。问题是`animation.cancel();`被承认为动画的结尾。

不计入动画结束的其他方式如何取消动画？那可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-02-10T10:13:21.403

取消动画后，您可以删除侦听器，从而防止`onAnimationEnd`被调用：

```
@Override
public void onAnimationCancel(Animator animation) {
  animation.removeAllListeners();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T19:07:10.660

animation.cancel() 正在调用动画侦听器，如[API 文档所述](https://developer.android.com/reference/android/view/animation/Animation.html#cancel())：

> 取消动画会调用动画侦听器（如果已设置）以通知动画结束。如果手动取消动画，则必须在再次启动动画之前调用 reset()。

如果你想在 cancel() 和 onAnimationEnd() 上有不同的行为，我会建议一个布尔变量，它可以在按钮单击时设置，onanimationend 检查它是否为真。

# c# - 如何在 ASP.NET MVC 4 中检测自定义 URI？

> ID：15189522
> 
> 赞同：1
> 
> 时间：2013-03-03T18:59:40.357
> 
> 标签：c#, asp.net-mvc

是否可以以在我的网址末尾检测到“.json”或“.xml”的方式设置路由？我将如何阅读，是否可以通过向我的操作方法添加参数来不读取该参数？我宁愿不为此目的使用查询字符串，这对我来说似乎很难看。

```
MyWebsite/Controller/MyAction.json

MyWebsite/Controller/MyAction.xml

MyWebsite/Controller/MyAction.otherType

--- 

public ActionResult MyAction()
{
   var myData = myClient.GetData();
   return SerializedData(myData);
}

private ActionResult SerializedData(Object result)
{
   String resultType = SomeHowGetResultTypeHere;

   if (resultType == "json")
   {
      return Json(result, JsonRequestBehavior.AllowGet);
   }
   else if (resultType == "xml")
   {
      return new XmlSerializer(result.GetType())
          .Serialize(HttpContext.Response.Output, sports);
   }
   else
   {
      return new HttpNotFoundResult();
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:08:36.597

不完全符合您的要求，但它有效...首先在您的路线配置中添加此默认路线（重要）：

```
routes.MapRoute(
    name: "ContentNegotiation",
    url: "{controller}/{action}.{contentType}",
    defaults: new { controller = "Home", action = "MyAction", contentType = UrlParameter.Optional }
); 
```

要处理 URL 中的点，您需要在 system.webServer > handlers 部分修改 Web.config，添加以下行：

```
<add name="ApiURIs-ISAPI-Integrated-4.0" path="/home/*" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

这个新的处理程序将适用于所有开头带有 /home/* 的 url，但您可以随意更改它。

比在您的控制器中：

```
public ActionResult MyAction(string contentType)
{
    return SerializedData(new { id = 1, name = "test" }, contentType);
} 
```

此方法使用 MyAction 的参数，但您可以这样调用它：

```
MyWebsite/Controller/MyAction.json 
```

不像这样

```
MyWebsite/Controller/MyAction?contentType=json 
```

你问的是什么。

# python - Torndb（错误：root：连接到本地主机上的 MySQL 时出错）

> ID：15189526
> 
> 赞同：0
> 
> 时间：2013-03-03T18:59:51.727
> 
> 标签：python, tornado, mysql-python

我正在尝试使用 tornado/torndb 开发一个 Web 应用程序，并且在我的数据库交互方面遇到了一些问题。我编写了一个包装 torndb 的“数据库”类，以便为我的 Web 应用程序提供一些常见的数据库功能。从我编写的 Database 类中调用任何方法时，与数据库的连接似乎存在问题：

“错误：根：连接到本地主机上的 MySQL 时出错”

我的构造函数打开了连接，所以我对为什么在打开连接后看到这条消息有点困惑。我希望这是我不理解的范围界定和/或 GC 问题。目标是创建一次数据库对象，从而使该单个连接在服务器的整个生命周期中持续存在，数据库被存储

以下代码片段*确实*按预期工作，这可能导致我出现范围界定或 GC 问题：

```
#!/usr/bin/python

import torndb

class Database:

def __init__(self):

    try:
        self.__dbh = torndb.Connection(
                'localhost',
                'mydb',
                user = 'myuser',
                password = 'mypass')
    except Exception as e:
        print e

def user_add(self, user, email, passwd):

    insert = "INSERT INTO users (username, email, passwd) VALUES " + \
            "(%s, %s, %s)" % (user, email, passwd)

    rowid = 0
    try:
        rowid = self.__dbh.execute(insert)
    except Exception as e:
        print e

    if rowid is 0:
        return (False, 'User exists');

    return (True, None)

if __name__ == "__main__":
print 'Testing'
raw_input('Hit enter to connect to the DB')

d = Database();

users = []

raw_input('Hit enter to create some users')
for i in range(5):
    users.append(str(i))
    d.user_add(users[i], users[i], users[i]) 
```

<- 剪辑->

**问题是当我尝试从定义数据库类的模块的主**模块以外的任何地方创建数据库对象时，例如：

```
import tornado.ioloop
import tornado.httpserver
import tornado.web

from register import Register
from logon import Logon
from db import Database

class Application(tornado.web.Application):

def __init__(self):

    resources = [
            (r"/logon", Logon),
            (r"/register", Register)
            ]

    self.db = Database()
    tornado.web.Application.__init__(self, resources)
    try:
        self.db.user_add('testuser', 'testemail', 'password')
    except Exception as e:
        print e

if __name__ == "__main__":

app = Application()

# Start the server.
server = tornado.httpserver.HTTPServer(app)
server.listen(8080)
tornado.ioloop.IOLoop.instance().start() 
```

执行时打印上述内容（由于调用 self.__dbh.execute()）：

错误：root：连接到本地主机上的 MySQL 时出错

其他一些信息：

*   我可以从控制台连接到数据库而没有任何问题。
*   我正在关注这个例子[https://github.com/facebook/tornado/blob/master/demos/blog/blog.py#L60](https://github.com/facebook/tornado/blob/master/demos/blog/blog.py#L60)
*   torndb 版本是 2.4.1，torndb 版本是最新的（使用 pip 拉取）。

问题：

*   **为什么我在定义类的模块的主**模块中创建我的数据库对象与在其他任何地方创建数据库对象有区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:40:14.097

问题是由于传递给查询的字符串参数没有被转义，通过以下更改它可以工作：

```
def user_add(self, user, email, passwd):

    insert = "INSERT INTO users (username, email, passwd) VALUES " + \
            "(\'%s\', \'%s\', \'%s\')" % (user, email, passwd)

    rowid = 0
    try:
        rowid = self.__dbh.execute(insert)
    except Exception as e:
        print e

    if rowid is 0:
        return (False, 'User exists');

    return (True, None) 
```

# php - PHP 5.4 新对象 -> 调用方法

> ID：15189529
> 
> 赞同：1
> 
> 时间：2013-03-03T18:59:56.293
> 
> 标签：php, object, methods

我认为在 php 5.4 中这是可能的

```
(new object())->method(); 
```

但是当对象和方法都存储在类变量中时我遇到了麻烦我尝试了以下方法，

```
new $this->object($this->params)->$this->method();
new ($this->object($this->params))->$this->method();
new $this->object($this->params)->{$this->method}(); 
```

除非我弄错了并且无法完成，否则我似乎无法使其正常工作。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:09:47.243

基于这个测试（[http://codepad.viper-7.com/mcPvpG](http://codepad.viper-7.com/mcPvpG)）（更新的测试），如果你将`new object()`它自己包装起来，它应该可以工作`()`，并将方法名称包装在`{}`. 因为它是`new object()`返回对象的表达式，而不仅仅是对构造函数的调用，所以`object()`该表达式需要被包装为`()`.

不过，这非常令人费解。如果您有机会重新考虑这一点，我会这样做。

```
public $object = 'ClassName';
public $method = 'method';

// Called as:
(new $this->object($this->params))->{$this->method}(); 
```

这是一个使用示例`ArrayIterator::valid()`：

```
class instantiator {
    public $object = "ArrayIterator";
    public $method = "valid";
    public $params = array(1,2,3);

    public function do_it() {
        var_dump((new $this->object($this->params))->{$this->method}());
    }
}

$i = new instantiator();
$i->do_it();
// Prints bool(true) 
```

# html - 从右到左开始表格单元格

> ID：15189530
> 
> 赞同：4
> 
> 时间：2013-03-03T18:59:57.370
> 
> 标签：html, css, forms, right-to-left

我正在写一个希伯来语网页，我需要创建一个表单，问题是我需要单元格从右到左而不是从左到右作为默认值，所以当我按下标签按钮时，它会转到左边。我尝试了表中的 float:right css 属性和 tr td 但似乎没有任何帮助，当我最终设法更改单元格顺序时，所有单元格都被压在一起。任何人都可以请帮助我指定我需要编写的正确属性。

提前感谢所有帮助者。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T21:05:11.783

Set the layout direction to right-to-left, most naturally with `<html dir=rtl>`. The [`dir` attribute](http://www.w3.org/TR/REC-html40/struct/dirlang.html#adef-dir) sets, in addition to directionality of directionally neutral text, the layout order of table columns. So you can write the table cells, containing input elements, in the logical order (first the field to be filled in first, etc.), and the browser will set the cells right to left. So tabbing from the first input field to the second one means going to the left.

Note that `dir=rtl` will also set default alignment to the right, which is normally appropriate for right-to-left languages.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:02:09.227

您可能想要应用 tabindex 属性而不是使用单元格顺序。此外，表格用于表格数据。有什么理由你用一个表格吗？

[http://www.w3schools.com/tags/att_global_tabindex.asp](http://www.w3schools.com/tags/att_global_tabindex.asp)

提示 W3schools 抨击。:-)

# ios - 在带有子视图的 UITableView 中滚动的性能真的很差

> ID：15189531
> 
> 赞同：1
> 
> 时间：2013-03-03T19:00:01.397
> 
> 标签：ios, xcode, uitableview, subview

我只是不明白这里发生了什么。

我有一个 UITableView ，其中每个单元格都包含一些子视图，并且一切正常。不幸的是，性能很糟糕，滚动太不稳定了。我读到也许你可以继承 UITableViewCell 并且这可以帮助提高性能，但我不确定如何实现或实施另一个解决问题的解决方案。我已经在下面发布了 tableView 的委托方法，任何帮助将不胜感激！

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
UIImageView* imageView;
UILabel* ttitle;
UILabel* ttitle2;
UILabel* ttitle3;
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    // Configure cell:
    // *** This section should configure the cell to a state independent of
    //  whatever row or section the cell is in, since it is only executed
    //  once when the cell is first created.

    imageView=[[UIImageView alloc]initWithFrame:CGRectMake(10.0, 11.0, 50.0, 50.0)];
    [imageView setContentMode:UIViewContentModeScaleAspectFill];
    imageView.layer.masksToBounds=YES;
    imageView.layer.cornerRadius=5.0;
    imageView.tag=1;
    [cell.contentView addSubview:imageView];

    ttitle = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 7.0, 200, 20)] autorelease];
    ttitle.textColor= [UIColor blackColor];
    ttitle.numberOfLines=1;
    ttitle.tag=69;
    ttitle.backgroundColor=[UIColor clearColor];
    ttitle.font=[UIFont fontWithName:@"Arial Bold" size:15.0];
    [cell.contentView addSubview:ttitle];

    if (indexPath.row==0) {

        CGSize size=[[[data objectAtIndex:indexPath.row] valueForKey:@"content"] sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(265.0f, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
        ttitle2 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 27.5, 200, size.height)] autorelease];
        ttitle2.textColor= [UIColor darkGrayColor];
        ttitle2.backgroundColor=[UIColor clearColor];
        ttitle2.numberOfLines=0;
        ttitle2.tag=70;
        ttitle2.textAlignment = NSTextAlignmentLeft;
        ttitle2.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle2.font=[UIFont fontWithName:@"Arial" size:14.0];
        [cell.contentView addSubview:ttitle2];

        ttitle3 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, ttitle2.frame.origin.y+ttitle2.frame.size.height-8.0, 210, 40)] autorelease];
        ttitle3.textColor= [UIColor darkGrayColor];
        ttitle3.backgroundColor=[UIColor clearColor];
        ttitle3.numberOfLines=1;
        ttitle3.tag=71;
        ttitle3.textAlignment = NSTextAlignmentLeft;
        ttitle3.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle3.font=[UIFont fontWithName:@"Arial" size:11.0];
        [cell.contentView addSubview:ttitle3];

    }
    else{

        CGSize size=[[[data objectAtIndex:indexPath.row] valueForKey:@"content"] sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(265.0f, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
        ttitle2 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, 27.0, 200, size.height)] autorelease];
        ttitle2.textColor= [UIColor darkGrayColor];
        ttitle2.backgroundColor=[UIColor clearColor];
        ttitle2.numberOfLines=0;
        ttitle2.tag=70;
        ttitle2.textAlignment = NSTextAlignmentLeft;
        ttitle2.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle2.font=[UIFont fontWithName:@"Arial" size:14.0];
        [cell.contentView addSubview:ttitle2];

        ttitle3 = [[[UILabel alloc] initWithFrame:CGRectMake(70.0, ttitle2.frame.origin.y+ttitle2.frame.size.height-9.0, 210, 40)] autorelease];
        ttitle3.textColor= [UIColor darkGrayColor];
        ttitle3.backgroundColor=[UIColor clearColor];
        ttitle3.numberOfLines=1;
        ttitle3.tag=71;
        ttitle3.textAlignment = NSTextAlignmentLeft;
        ttitle3.lineBreakMode=NSLineBreakByWordWrapping;
        ttitle3.font=[UIFont fontWithName:@"Arial" size:11.0];
        [cell.contentView addSubview:ttitle3];

    }

}
else {
    imageView = (UIImageView *) [cell viewWithTag:1];
    ttitle=( UILabel *) [cell viewWithTag:69];
    ttitle2=( UILabel *) [cell viewWithTag:70];
    ttitle3=( UILabel *) [cell viewWithTag:71];
}

//STUFFOUTSIDE

// Customize cell:
// *** This section should customize the cell depending on what row or section
//  is passed in indexPath, since this is executed every time this delegate method
//  is called.

imageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[[data objectAtIndex:indexPath.row] valueForKey:@"thumbnail"]]]];

[ttitle setText:[[data objectAtIndex:indexPath.row] valueForKey:@"name"]];
[ttitle2 setText:[[data objectAtIndex:indexPath.row] valueForKey:@"content"]];

NSString* first=[[[data objectAtIndex:indexPath.row] valueForKey:@"hashtag"] stringByAppendingString:@"     "];
NSString* second =[first stringByAppendingString:[[data objectAtIndex:indexPath.row] valueForKey:@"place"]];
NSString* third=[second stringByAppendingString:@"        "];
NSString* fourth=[third stringByAppendingString:@"¤ "];
NSString* conversion=[[[data objectAtIndex:indexPath.row] valueForKey:@"counter"] stringValue];
NSString* fifth=[fourth stringByAppendingString:conversion];
[ttitle3 setText:fifth];

return cell; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T19:18:21.493

您正在从 URL 同步获取数据以获取每个单元格的图像。这意味着对于每个单元格，您都会阻塞主线程，直到从 Internet 获取数据。

您必须在后台线程上异步加载图像，并在加载图像时更新单元格。有很多关于此的博客文章。

**更新：**
无法判断图像 URL 是否是本地的，但我假设它是远程 URL，并且图像未存储在您的应用程序中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T19:13:48.883

有很多问题会导致延迟，但在这种情况下我看到了三个可能的原因：

1.  除非绝对需要，否则单元格子视图（您的标签等）的背景颜色不应清晰。这会杀死滚动性能。

2.  如果在 imageView 中设置的图像尺寸不正确并且必须缩放，这将导致严重滞后。如果是这种情况，您要么需要保存适当大小的图像以在表格中显示，要么异步加载它们，以便表格滚动而无需等待图像加载。

3.  正如 Fabian 在下面的评论中提到的那样，由于您是从 Web 下载这些图像，因此您**肯定**希望异步加载图像。每次显示一个单元格时，它都必须等待图像下载，然后才能显示下一个单元格。这**是**您现在使用此代码时遇到的最大问题。以下问题有几个不同的选择： [iOS - Asynchronous Image Downloading](https://stackoverflow.com/q/9789009/937822)

# node.js - Heroku 搭载 SSL 与 node 和 express - 需要任何配置吗？

> ID：15189533
> 
> 赞同：0
> 
> 时间：2013-03-03T19:00:17.127
> 
> 标签：node.js, ssl, heroku

我正在为一个简单的服务器使用 express / node js。

到处都不需要安全的 https，但我确实想保护一些上传表单的帖子和回复到手机的回复。

到目前为止，我已经使用 express.js 在 http 上设置了一个标准的 nodejs 服务器。

我有一个 app.post('/upload'...)

我部署在 heroku 上，所以我更改了我正在测试的应用程序以将表单数据发布到**https://myapp.herokuapp.com/upload**

现在是通过 https 发布吗？响应会通过 https 吗？

或者我是否需要以某种方式重新配置快速服务器以专门处理该问题？

这些上传/响应是唯一安全的部分，并且对用户不可见（由电话应用程序完成） - 因此，如果上述搭载解决方案可以，则无需为整个域/子域进行完整的 http ssl 端点配置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T04:30:15.900

在 Heroku 上，SSL 在路由层终止，并[`X-Forwarded-Proto: https`](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Common_non-standard_request_headers) 在请求中添加了一个标头，以便您的应用程序可以知道请求是通过 SSL 传入的。换句话说，从您的应用程序的角度来看，请求是纯 HTTP 并且不需要做任何特殊的事情，但是`X-Forwarded-Proto: https`如果您想确保请求是安全地发出的，您可以随时检查标头。如果请求是通过 SSL 发出的，则响应也将通过 SSL，因为它们都是同一连接的一部分。

# asp.net - WCF 服务元数据发布错误

> ID：15189536
> 
> 赞同：0
> 
> 时间：2013-03-03T19:00:19.353
> 
> 标签：asp.net, wcf, iis, web-config, wcf-binding

我是 WCF 的新手，正在尝试启动并运行它。我什至不能得到一个没有任何错误的空白版本。

网络配置：

```
 <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="ServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>

        <!--wcf-->     
        <behavior name="recordsWCF">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="recordsSWCF" >
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    <!--end wcf-->      

    </behaviors> 
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />   
    <services>

      <!--wcf-->
      <service name="records.wcf" behaviorConfiguration="recordsSWCF" >
        <!--<endpoint address="" binding="webHttpBinding" contract="IService" behaviorConfiguration="recordsWCF"/>-->
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
      </service>
      <!--end wcf-->         

      <service name="Service">
        <endpoint address="" behaviorConfiguration="ServiceAspNetAjaxBehavior" binding="webHttpBinding" contract="Service" />
      </service>
    </services>
  </system.serviceModel> 
```

就我的 wcf 代码而言，目前还没有什么可做的。我只是想学习如何设置 web.config 而不会出现任何错误。这是我的 wcf 定义：

```
[ServiceContract(Namespace = "records")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class wcf
{

 public class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
    }      
    [OperationContract]
    [WebGet]
    public string GetData()
    {
        Person p = new Person();
        List<Person> test = new List<Person>();
        p.Name = "Tom";
        p.Age = 28;   
        test.Add(p);   
        p = new Person();
        p.Name = "Dan";
        p.Age = 22;
        test.Add(p);
        JavaScriptSerializer js = new JavaScriptSerializer();   
        string jsonString = js.Serialize(test);    

        return jsonString;
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:14:23.190

尽管它在 web.config 的 records.wcf 服务部分中被注释掉，但看起来您要公开（或将要公开）的端点是一个 webHttpBinding 端点，它是一个 REST 绑定。WCF 元数据交换端点仅用于 SOAP 端点（例如 basicHttpBinding 或 wsHttpBinding）。没有办法像这样从 WCF REST 服务中获取元数据。

如果您需要元数据，您有两种选择：

1.  将您的服务重构为 SOAP 服务
2.  使用 ASP.Net Web API 而不是 WCF。这是为 REST 专门构建的，并为您提供了一个自动生成的帮助页面，该页面在概念上与 WCF 中的元数据端点相同

从您的问题来看，元数据并不是真正的目标，它只是检查您的服务是否正常的一种方式。如果是这种情况，您需要

1.  从您的 recordWCF 服务行为中删除 serviceMetadata 元素
2.  删除 IMetadataExchange 端点
3.  添加服务端点

您的 web.config 应如下所示：

```
 <system.serviceModel>
    <behaviors>
      <endpointBehaviors>

        <!--wcf-->
        <behavior name="recordsWCF">
          <webHttp/>
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="recordsSWCF" >
          <!--<serviceMetadata httpGetEnabled="true" />-->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
      <!--end wcf-->

    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>

      <!--wcf-->
      <service name="records.Service" behaviorConfiguration="recordsSWCF" >
        <endpoint address="" binding="webHttpBinding" contract="records.Service" behaviorConfiguration="recordsWCF"/>
        <!--<endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />-->
      </service>
      <!--end wcf-->
    </services>
  </system.serviceModel> 
```

实现服务的类应该是这样的

```
using System.Collections.Generic;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.ServiceModel.Web;
using System.Web.Script.Serialization;

namespace records
{
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceContract]
    public class Service
    {
        public class Person
        {
            public string Name { get; set; }
            public int Age { get; set; }
        }

        [WebGet]
        public string GetData()
        {
            Person p = new Person();
            List<Person> test = new List<Person>();
            p.Name = "Tom";
            p.Age = 28;
            test.Add(p);
            p = new Person();
            p.Name = "Dan";
            p.Age = 22;
            test.Add(p);
            JavaScriptSerializer js = new JavaScriptSerializer();
            string jsonString = js.Serialize(test);

            return jsonString;
        }
    }
} 
```

.svc 的标记应该类似于

```
<%@ ServiceHost Language="C#" Debug="true" Service="records.Service" CodeBehind="Service.svc.cs" %> 
```

使用该配置，当我浏览到`http://localhost:56157/Service.svc/GetData`我得到

```
[{"Name":"Tom","Age":28},{"Name":"Dan","Age":22}] 
```

您必须在 Chrome 中执行此操作，而不是在 IE 中。如果您在 IE 中尝试它，它会尝试将 JSON 作为文件打开。

请注意，在实现服务的同一个类上定义服务合同有点不寻常。更常见的是，服务契约定义在一个接口（例如 IService）上并在一个类中实现（例如公共类 Service : IService）。

此外，除非有使用 WCF 的特殊原因（例如，您想做一个 SOAP 服务），否则我强烈推荐 ASP.Net Web API 用于 REST 服务。我通常比 ASP.Net 了解更多关于 WCF 的知识，但我*仍然*发现使用 ASP.Net Web API 执行 REST*更*容易。

# java - Java 客户端服务器文件同步 - 最简单的方法

> ID：15189537
> 
> 赞同：3
> 
> 时间：2013-03-03T19:00:22.477
> 
> 标签：java

我正在尝试向我的 java 应用程序添加云功能。我需要同步客户端和服务器中的文件。我是 java 编程的新手，我想听听在这种情况下可用的最佳选择。

我尝试了一些示例项目，例如

[http://jfilesync.sourceforge.net/](http://jfilesync.sourceforge.net/)

[http://sourceforge.net/p/lazysync](http://sourceforge.net/p/lazysync)

[https://github.com/quaa/JavaFileSync](https://github.com/quaa/JavaFileSync)

但是我在服务器部分真的很困惑。实际上会有很多用户帐户，所以我希望我需要创建不同的文件夹来存储不同用户的数据。那么实现这一目标的最佳方法是什么？创建一个ftp连接？还是http上传？

我不知道。请任何人引导我走向正确的道路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:29:22.953

这实际上在 Web 应用程序中很常见。由于我没有很多具体的工作，我会给你一些需要考虑的事情和一般性的建议。

如果您“自己动手”，您不想做的就是将上传的字节存储到数据库中。这是可能的，但要做好，尤其是在人们可能上传任意大小的文件的情况下，是非常困难的。之前已经破解了这个坚果，我想说从最高抽象开始。用户可以上传文件并返回带有文件位置的 URL。因此，用户 POST 一个文件并返回一个通常是 201/204 的响应，其中包含新文件的 URL。即使您使用的是套接字，我也会考虑使用基于 HTTP 的方法，这样您就可以将相同的服务推广到多种类型的客户端和平台。但是，您可能可以在套接字中编写一个非常有效的实现。

无论是套接字还是 HTTP 请求，服务器端的以下内容都是相同的。在服务器端，您有一个接口，例如 FileLocator，它接受一个文件 ID 和一个用户。FileSystemFileLocator 实现 FileLocator 并在文件系统上定位文件。棘手的部分是在一个目录中放置的目录或对象不超过 1,000 个左右。一种常见的技术（如果您为每个文件分配一个唯一的编号）是零填充和反转数字，因此您有 12 个数字。每三位数字块成为目录名，后三位为文件名：/123/400/000/000.pdf。要取回漂亮的文件名，您需要在数据库中跟踪位置、原始文件名和一些元数据。

然后你可以实现 S3FileLocator，它使用 S3 来存储文件。MongoFileLocator 将数据存储在 mongo 等中。您将面临的挑战是弄清楚如何确保数据库中的元数据（您可以非常快速地访问）与文件系统或 S3 中的实际情况保持同步.

读取文件时，只读取文件的小块（如 16k）并循环返回给用户，直到完成。如果您一次读取所有文件，您将非常低效地使用内存。例如，在一个项目中，我是一个傻瓜，通过将文件从 SQL Server 表读取到内存中，然后在内存中复制对象以将其写回客户端来实现这一点。该数据库包含 50 兆字节的幻灯片演示文稿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T13:15:46.887

最简单的方法是在保管箱上创建一个帐户，该帐户将为您提供一个公共文件夹。该文件夹可以公开使用，也可以任何用户无需任何帐户或登录密码即可访问。因此，该文件夹成为您的服务器站点或 ftp，您不需要服务器代码。现在公用文件夹链接成为您的服务器 URL，端口将是 80。只需在 dropbox 公用文件夹上实现客户端为每个用户创建单独的文件夹，这将帮助您为每个用户创建不同的 URL。用于自己的数据同步。

# excel - 由于多个超链接，读取超链接后未从另一张表中获取总数

> ID：15189540
> 
> 赞同：0
> 
> 时间：2013-03-03T19:00:46.807
> 
> 标签：excel, vba, hyperlink

我正在运行几个宏来计算 B 列中文本的单词、字符、段落和其他内容。但是 B 列中的一些文本是超链接。

输出表： ![输出表](../Images/2ca28733f04739327f87926e5884edd2.png)

现在，我有打开超链接并将网站数据爬回到不同工作表上的 Excel 的代码（如下）（图 02）。

![Display_Stylometric_Scores_URL 运行后](../Images/e0d9a8fe5d7efd6c9f96bcc595f954e3.png)

在数据表中，它计算文本中有多少单词、字符、段落和其他内容，然后将所有内容相加（首先按列；然后按单词、字符、段落等）并将值传输到输出床单。

![已添加总计，想要这些总计，请转到相应列中的输出表](../Images/e7c378d8382aab16c1e734c236a0aded.png)

但是，Display_Stylometric_Scores_Text 中的 For 循环读取输出表中 B 列中的超链接，它将读取并处理所有超链接，但只给了我最后一个超链接的正确传输值。

并非所有结果都正确传输： ![结果输出](../Images/40e0e37b41aad986310b30a90103bb45.png)

我正在使用一个名为 textRow 的变量来跟踪正在读取的文本的哪一行。我尝试将 textRow = textRow + 1 放入 For 循环中，希望它会读取第一个超链接并将总数传输回输出表，但是当我这样做时，它无法正确处理任何超链接。在此示例中，第一个超链接位于第 24 行，因此 textRow = 24。

我想我的问题是：我怎样才能仍然使用 For 循环逐行读取超链接（更新 textRow），并且只有在它从上一个超链接输出正确的总数后才会转到下一行或下一个超链接？

代码包括：

```
Sub Display_Stylometric_Scores_Text()
Dim Words As String
Dim Characters As String
Dim Paragraphs As String
Dim Sentences As String
Dim Sentences_per_paragraph As String
Dim Words_per_sentence As String
Dim Characters_per_word As String
Dim Ratio_of_passive_sentences As String
Dim Flesch_Reading_Ease_score As String
Dim Flesch_Kincaid_Grade_Level_score As String
Dim Coleman_Liau_Readability_Score As String
Dim Ampersands As Long
Dim Exclamations As Long

Dim ActiveDocument As Object
Dim RS As Object
Dim link As Hyperlink
Dim path As String

textRow = 24

path = Dir("C:\Users\Jeannette\Desktop\*.txt")

Set ActiveDocument = CreateObject("Word.Document")

Do While Worksheets("Sample_Output_2").Cells(textRow, 1) <> ""

    textValue = Worksheets("Sample_Output_2").Cells(textRow, 2).Value
    ActiveDocument.Content = textValue

    Set RS = ActiveDocument.Content.ReadabilityStatistics

   For Each link In Worksheets("Sample_Output_2").Cells(textRow, 2).Hyperlinks
        activeWorkbook.Worksheets.Add
        With ActiveSheet.QueryTables.Add(Connection:="URL;" & textValue, Destination:=Range("$A$1"))
            .Name = "Text From URL"
            .FieldNames = True
            .RowNumbers = False
            .FillAdjacentFormulas = False
            .PreserveFormatting = True
            .RefreshOnFileOpen = False
            .BackgroundQuery = True
            .RefreshStyle = xlInsertDeleteCells
            .SavePassword = False
            .SaveData = True
            .AdjustColumnWidth = True
            .RefreshPeriod = 0
            .WebSelectionType = xlEntirePage
            .WebFormatting = xlWebFormattingNone
            .WebPreFormattedTextToColumns = True
            .WebConsecutiveDelimitersAsOne = True
            .WebSingleBlockTextImport = False
            .WebDisableDateRecognition = False
            .WebDisableRedirections = False
            .Refresh BackgroundQuery:=False
        End With
        ActiveSheet.Activate

        Call Display_Stylometric_Scores_URL

        Worksheets("Sample_Output_2").Cells(textRow, 4).Value = ActiveSheet.Cells(finalRow, 4).Value
        Worksheets("Sample_Output_2").Cells(textRow, 5).Value = ActiveSheet.Cells(finalRow, 5).Value
        Worksheets("Sample_Output_2").Cells(textRow, 6).Value = ActiveSheet.Cells(finalRow, 6).Value
        Worksheets("Sample_Output_2").Cells(textRow, 7).Value = ActiveSheet.Cells(finalRow, 7).Value
        Worksheets("Sample_Output_2").Cells(textRow, 8).Value = ActiveSheet.Cells(finalRow, 8).Value
        Worksheets("Sample_Output_2").Cells(textRow, 9).Value = ActiveSheet.Cells(finalRow, 9).Value
        Worksheets("Sample_Output_2").Cells(textRow, 10).Value = ActiveSheet.Cells(finalRow, 10).Value
        Worksheets("Sample_Output_2").Cells(textRow, 11).Value = ActiveSheet.Cells(finalRow, 11).Value
        Worksheets("Sample_Output_2").Cells(textRow, 12).Value = ActiveSheet.Cells(finalRow, 12).Value
        Worksheets("Sample_Output_2").Cells(textRow, 13).Value = ActiveSheet.Cells(finalRow, 13).Value
        Worksheets("Sample_Output_2").Cells(textRow, 14).Value = ActiveSheet.Cells(finalRow, 14).Value
        Worksheets("Sample_Output_2").Cells(textRow, 15).Value = ActiveSheet.Cells(finalRow, 15).Value

        textRow = textRow + 1

    Next link 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:15:17.683

遵循`Do`and`For Each`循环中的逻辑：

```
Do While Worksheets("Sample_Output_2").Cells(textRow, 1) <> ""

   For Each link In Worksheets("Sample_Output_2").Cells(textRow, 2).Hyperlinks
        textRow = textRow + 1
    Next link

loop 'presumably somewhere after all this... 
```

您正在尝试执行以下操作（在伪代码和文字中）：

1.  检查单元格是否为空
2.  如果里面有链接，调用Display_Stylometric_Scores_URL上报信息
3.  移动到下一行并再次转到#1

所以形成这样的循环：

```
textRow = 24
Do While Worksheets("Sample_Output_2").Cells(textRow, 1) <> ""

   'check if there is a link, if so, do your operation on it
     For Each link In Worksheets("Sample_Output_2").Cells(textRow, 2).Hyperlinks
        call Display_Stylometric_Scores_URL to report the information
     Next link

    'now we've checked the links in that cell in that row, we can move to the next row
    textRow = textRow + 1
loop 'presumably somewhere after all this... 
```

还要确保您没有`textRow`在`loop`.

# android - android：为什么我不能引用我的布局（也许在移动它之后）？

> ID：15189543
> 
> 赞同：1
> 
> 时间：2013-03-03T19:00:54.690
> 
> 标签：android

通过一些stackoverflow trolling，我已经能够让一个android 弹出视图工作，但我试图移动布局，但它现在不起作用。我在 res/layout-keysexposed-qwerty/login_popup2.xml 中有一个弹出视图。

其布局包含以下内容：

```
android:id="@+id/login_popup2" 
```

这是我尝试在 Activity 中引用它的地方：

```
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
android.view.View popview = inflater.inflate(R.layout.login_popup2, null, false); 
```

这失败了，但有以下例外：

```
FATAL EXCEPTION: main
android.content.res.Resources$NotFoundException: Resource ID #0x7f030001
at android.content.res.Resources.getValue(Resources.java:892)
at android.content.res.Resources.loadXmlResourceParser(Resources.java:1869)
at android.content.res.Resources.getLayout(Resources.java:731)
at android.view.LayoutInflater.inflate(LayoutInflater.java:318) 
```

如何以这种方式引用布局？当我把它放进去时，我认为它正在工作，`res/layout-keysexposed/`但我移动了它，在 Eclipse 中做了一个干净的项目，甚至停止并启动了我的 Android

（编辑1）

这是来自 R.java 的类定义：

```
public static final class layout {
    public static final int activity_view=0x7f030000;
    public static final int login_popup2=0x7f030001;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:12:43.120

布局文件的 id 是它的文件名和目录，不包括 .xml 扩展名。您的 id 是布局中某些元素的 id。忽略它可能被称为 LinearLayout 或 RelativeLayout 的事实——它们都是视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:34:17.247

如果您仔细研究 R.java，您会发现布局类包含对带有 xml 文件名称的布局的引用。所以，你应该使用 R.layout ..

# ivy - 设置 Xuggler 的初学者指南__Help

> ID：15189546
> 
> 赞同：0
> 
> 时间：2013-03-03T19:01:02.020
> 
> 标签：ivy, xuggler

[我从这里](https://stackoverflow.com/questions/14010557/beginners-guide-to-setup-xuggler)找到了“设置 Xuggler 的初学者指南”一文。我试图遵循最佳选择的答案。在执行这些步骤时，我被卡住了@“从命令行运行 ivy，如下所示：”我一开始没有 Ivy，所以我前往[Ivy 的下载页面](http://ant.apache.org/ivy/download.cgi "Ivy的下载页面")，并从[Snapshot Build下载](http://builds.apache.org/view/A-F/view/Ant/job/Ivy)网站的部分。然后，我用这两个 jar 文件进行了测试，但是在运行初学者指南中所述的命令时，我收到了以下消息：“找不到常春藤配置文件：ivysettings.xml”。那么，我做错了什么，我需要遵循网站上的“从源代码构建”部分吗？如果是这样，你能否给我详细的描述如何做到这一点，我在这些事情上有点新。长话短说，我需要知道如何获得指南命令行中所述的合法“ivy.jar”文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:16:51.230

好的，所以我已经以自己的方式解决了这个问题。所以，我会把它分享在这里，以便像我这样的其他人可以从中受益。所以，我所做的是（显然）下载了 Xuggler 5.4。[然后，我按照此处](https://stackoverflow.com/questions/14010557/beginners-guide-to-setup-xuggler)列出的手动下载了它的依赖项。然后，在我的 IDE 上，我只需要导入我之前下载的 Xuggler 及其所有依赖项和 BAM，它就像一个魅力。因此，如果你们中的任何人在查找这些依赖项时遇到问题或对我的这种“非官方”方法有任何疑问，您可以通过电子邮件与我联系。我很乐意提供帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:35:24.327

我从 Xuggler 不知道，但是...错误消息说您缺少 ivysettings.xml。该消息可能来自 ivy.jar，所以你肯定有。ivysettings.xml 是一个必需的 Ivy 配置文件，它告诉您要从哪些存储库中提取 jars。Xuggler 发行版中可能有一个默认值，但可能没有。您需要查看 ivy 文档以了解更多信息。或者，改用 Maven。虽然我不是 Maven 的粉丝，但对于这种情况可能会更容易。

# php - 带数组的 SQL 查询

> ID：15189548
> 
> 赞同：0
> 
> 时间：2013-03-03T19:01:07.790
> 
> 标签：php, mysql

PHP 新手。我有一个很长的 SQL 查询，例如：

```
SELECT name, date, bio, image, articles, related FROM Person WHERE id = $id 
```

我想以类似于以下方式使用 mysqli 进行查询：

```
$results = $mysqli->query($testQuery); 
```

其中 $testQuery 是我上面写的 MySQL 查询。

我不想在查询文本中输入字段列表，而是将字段名称分配给数组或类似的东西，然后在查询文本中解压缩该数组，这样我就可以执行类似的操作

```
$testQuery = SELECT {$listOfFields} FROM Person 
```

任何人都知道我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:03:05.780

你可以使用：

```
$listOfFields = array('name', 'date', 'bio', 'image', 'articles');

$testQuery = "SELECT ".implode(",",$listOfFields)." FROM Person"; 
```

# ios - 如何更改 UIScrollView contentOffset 动画速度？

> ID：15189549
> 
> 赞同：5
> 
> 时间：2013-03-03T19:01:16.330
> 
> 标签：ios, uiscrollview, uikit, core-animation

有没有办法改变 contentOffset 动画速度，而无需创建自己的设置 contentOffset 的动画？

我无法为 contentOffset 更改创建自己的动画的原因是，这不会在动画期间定期调用 -scrollViewDidScroll:。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-18T15:09:39.680

不幸的是，没有干净简单的方法可以做到这一点。这是一个稍微残酷但有效的方法：

1）添加`CADisplayLink`为属性：

```
@property (nonatomic, strong) CADisplayLink *displayLink; 
```

2）动画内容偏移：

```
CGFloat duration = 2.0;

// Create CADisplay link and add it to the run loop
self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(_displayLinkTick)];
[self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

[UIView animateWithDuration:duration animations:^{
    self.scrollView.contentOffset = newContentOffset;       
} completion:^(BOOL finished) {
    // Cleanup the display link
    [self.displayLink removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    self.displayLink = nil;
}]; 
```

3）最后观察`presentationLayer`类似的变化：

```
- (void)_displayLinkTick {
    CALayer *presentationLayer = (CALayer *)self.scrollView.layer.presentationLayer;
    CGPoint contentOffset = presentationLayer.bounds.origin;
    [self _handleContentOffsetChangeWithOffset:contentOffset];
}

- (void)_handleContentOffsetChangeWithOffset:(CGPoint)offset {
    // handle offset change
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T21:02:45.107

要获取有关滚动状态的定期信息，您可以分步运行动画。每个步骤都会调用一次委托 (scrollViewDidScroll:)

```
- (void)scrollTo:(CGPoint)offset completion:(void (^)(BOOL))completion {

    // this presumes an outlet called scrollView.   You could generalize by passing
    // the scroll view, or even more generally, place this in a UIScrollView category
    CGPoint contentOffset = self.scrollView.contentOffset;

    // scrollViewDidScroll delegate will get called 'steps' times
    NSInteger steps = 10;
    CGPoint offsetStep = CGPointMake((offset.x-contentOffset.x)/steps, (offset.y-contentOffset.y)/steps);
    NSMutableArray *offsets = [NSMutableArray array];

    for (int i=0; i<steps; i++) {
        CGFloat stepX = offsetStep.x * (i+1);
        CGFloat stepY = offsetStep.y * (i+1);
        NSValue *nextStep = [NSValue valueWithCGPoint:CGPointMake(contentOffset.x+stepX, contentOffset.y+stepY)];
        [offsets addObject:nextStep];
    }
    [self scrollBySteps:offsets completion:completion];
}

// run several scroll animations back-to-back
- (void)scrollBySteps:(NSMutableArray *)offsets completion:(void (^)(BOOL))completion {

    if (!offsets.count) return completion(YES);

    CGPoint offset = [[offsets objectAtIndex:0] CGPointValue];
    [offsets removeObjectAtIndex:0];

    // total animation time == steps * duration.  naturally, you can fool with both
    // constants.  to keep the rate constant, set duration == steps * k, where k
    // is some constant time per step
    [UIView animateWithDuration:0.1 delay:0.0 options:UIViewAnimationOptionCurveLinear animations:^{
        self.scrollView.contentOffset = offset;
    } completion:^(BOOL finished) {
        [self scrollBySteps:offsets completion:completion];
    }];
} 
```

像这样称呼它...

```
CGPoint bottomOffset = CGPointMake(0, self.scrollView.contentSize.height - self.scrollView.bounds.size.height);    
[self scrollTo:bottomOffset completion:^(BOOL finished) {}];

// BONUS completion handler!  you can omit if you don't need it 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-19T07:48:31.327

下面的代码解决了我的问题

```
CGPoint leftOffset = CGPointMake(0, 0);
          [UIView animateWithDuration:.5
                                delay:0
                              options:UIViewAnimationOptionCurveLinear
                           animations:^{
                               [self.topBarScrollView setContentOffset:leftOffset animated:NO];
                           } completion:nil]; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-06-05T21:26:53.743

这是一个有效的简单解决方案。

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [self setContentOffset:<offset> animated:YES];
    [UIView commitAnimations]; 
```

希望这可以帮助。

布赖恩

# c# - 将数据从文本框中正确粘贴到 excel 文件中

> ID：15189551
> 
> 赞同：0
> 
> 时间：2013-03-03T19:01:28.420
> 
> 标签：c#, visual-studio-2010, excel

```
 foreach (string TempSize in sizeArr)
            {
                txtResult.Text += store + "\t" + attributeSet + "\t" + configurableAttri + "\t" + type + "\t" + (ID + "_" + TempColour + TempSize) + "\n";
            } 
```

我正在尝试生成可用于粘贴到 excel 文件中的多行。“\n”似乎没有显示在文本框的“新行”上。

我尝试手动执行“\n”又名 shift+enter 并将 3 行复制粘贴到 excel 中，Excel 在每个行之间放置一个空格，无论如何也要消除这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:03:55.017

用“\r\n”而不是“\n”修复了问题，这是 Windows 控件表示换行符的方式

# jquery - 如何在弹出窗口中进行页面回发？

> ID：15189552
> 
> 赞同：0
> 
> 时间：2013-03-03T19:01:29.133
> 
> 标签：jquery, asp.net, popup, postback

我正在使用由 ASP.NET 和 jQuery 开发的应用程序，我有一个使用 jQuery 客户端脚本实现的弹出屏幕，以调用 ID 淡入包含 ASP.NET 控件的弹出窗口。

它看起来与[Simple Model](http://www.ericmmartin.com/projects/simplemodal-demos/)和[FancyBox中的演示相似](http://fancybox.net/)

弹出窗口中的 ASP.NET DropDownList 控件需要进行页面回发以从数据库中获取数据。

```
<asp:DropDownList id="ddl" runat="server" 
 AutoPostBack="true" OnSelectedIndexChanged="doSomething()">
     <asp:ListItem Text="continued" Value="1" />
     <asp:ListItem Text="on hold" Value="2" />
     <asp:ListItem Text="finished" Value="3" />
</asp:DropDownList> 
```

我的问题是，我可以在页面回发时保留弹出窗口吗？怎么可能做到？我需要使用 iframe 还是什么？请指教...

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:35:48.807

可能最简单的方法是通过将下拉列表包装在 UpdatePanel 中来仅进行部分回发。见[http://www.c-sharpcorner.com/uploadfile/Dorababu742/drop-down-list-in-ajax-update-panel/](http://www.c-sharpcorner.com/uploadfile/Dorababu742/drop-down-list-in-ajax-update-panel/)

# java - javax.persistence.Persistence - 动态 Web 项目中的 ClassNotFoundException

> ID：15189554
> 
> 赞同：-2
> 
> 时间：2013-03-03T19:02:07.853
> 
> 标签：java, jpa

我将 JPA 项目用作动态 web 项目中的 jar。

在我的项目中的某个时刻，我收到***java.lang.ClassNotFoundException: javax.persistence.Persistence***错误。

![在此处输入图像描述](../Images/d1f5a37968c44224f4c5df0fb1ff5589.png)

```
operation = RepositoryFactory.getRepositoryFactory()
        .getUserRepository().add(feedbackverantwoordelijke); 
```

```
public boolean add(User user) {
    EntityManagerFactory emf = HibernateRepositoryFactory
            .getEntityManagerFactory();
    EntityManager em = emf.createEntityManager();
    EntityTransaction tx = em.getTransaction();
    tx.begin();

    User tempUser = null;
    try {
        // checking if the entity is already in the repository
        if (user.getId() != null) {
            tempUser = em.find(User.class, user.getId());
            //delete
            System.out.println(user.getId());
            //
        }
        // if no persist the entity
        if (tempUser == null) {
            em.persist(user);
        } else {
            // if so, get the differences and persist them
            tempUser.setPassword(user.getPassword());
            tempUser.setUserName(user.getUserName());
            tempUser = em.merge(user);
        }
    } catch (Exception e) {
        logging.error("Deze melding trad op bij het toevoegen van een user"
                + " :" + e);
    }
    tx.commit();
    em.close();
    emf.close();
    return true;
} 
```

注意：Feedbackverantwoodelijke 扩展了用户

这在我的 JPA 项目中非常有效。但是当我从动态 web 项目中的 JPA jar 调用它时，我得到了错误。

在我的动态网络项目中运行它时，我似乎缺少一个 jar('s)。通常所有 jar 都在我的 JPA 项目中，我可以在我的 JPA 项目中进行所有 CRUD 操作？？

我必须在我的动态 Web 项目中加载一些 jar 吗？如果是这样，我必须将它们放在我的 WEB-INF/lib 文件夹中吗？

我还在我的 JPA 项目和网络邮件 jar 中使用了 joda-time jar。我必须将这些 jar 也放在我的动态 webproject 中吗？

谢谢回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:38:40.117

修复。我需要将休眠 jar 和其他外部 jar 添加到我的动态 web 项目的 WEB-INF/lib 文件夹中。现在我可以坚持到数据库。

# linux - 如何在没有 Route53 的 AWS 上配置 dns 子级别？

> ID：15189557
> 
> 赞同：0
> 
> 时间：2013-03-03T19:02:14.983
> 
> 标签：linux, dns, amazon-web-services

我在 AWS 上有一个 EC2 实例 (Amazon AMI)，我在 Gandi.net 上购买了一个域名。假设我的域名是“teaorcoffee.com”。

在 Gandi 上，我设置了一个子域名“dev”来将 DNS 委托给我的 EC2 实例。以下是 Gandi 区域文件中的配置：

> 开发 10800 IN NS ec2-22-222-222-22.eu-west-1.compute.amazonaws.com。

我想在我的 EC2 实例上配置“dev.teaorcoffee.com”的子域，例如“sql.dev.teaorcoffee.com”。

我正在尝试这样做：

*   “绑定”工具
*   文件“named.conf.local”包含在文件“named.conf”中
*   和一个“dev.teaorcoffee.com”区域文件

但没有成功。

这是“named.conf.local”文件：

> 区域“dev.teaorcoffee.com”在{类型主；文件“/var/named/dev.teaorcoffee.com”；允许更新{无；}; };

这是“dev.teaorcoffee.com”区域文件：

> $TTL 60 @ IN SOA master.dev.teaorcoffee.com。support.teaorcoffee.com。（2013030300 60 60 60 38400）dev.teaorcoffee.com。IN NS 大师 master.dev.teaorcoffee.com。在 CNAME 主机中的 127.0.0.1 sql

我可以使用以下命令重新启动 dns 而不会出现任何错误：

> sudo /etc/init.d/命名重启

但是，当我尝试对“dev.teaorcoffee.com”及其子域进行 nslookup 时，出现以下错误：

> nslookup dev.teaorcoffee.com 服务器：127.0.0.1 地址：127.0.0.1#53
> 
> ***找不到 dev.teaorcoffee.com：没有答案

我可以改变什么来使它工作？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:50:42.247

一旦您为指向您的 EC2 服务器的子域创建了 A 记录，您就可以开始了。

如果您要使用 Apache，只需在 apache httpd.conf [http://httpd.apache.org/docs/2.2/vhosts/examples.html中配置虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

如果您打算像 mysql 服务器一样使用，则无需执行任何操作。

只需确保您要使用的服务端口在您的 EC2 的安全组中打开即可。

还有一个建议，将您的域区域迁移到路由 53 - 管理起来要容易得多。

高温高压

# scala - Anorm 只是锁定了 executeUpdate

> ID：15189558
> 
> 赞同：1
> 
> 时间：2013-03-03T19:02:16.417
> 
> 标签：scala, playframework, akka, playframework-2.1, anorm

我有一个非常简单的 Play 2.1 Scala 项目。如，这是迄今为止唯一的代码。我有一个正在运行的任务`Akka.system.scheduler`。我有一些代码可以从数据库中选择（目前是标准测试 H2 实例），并且我几乎完全按照[文档示例进行操作。](http://www.playframework.com/documentation/2.1.0/ScalaAnorm)

```
DB.withConnection { implicit c =>
  Logger.info("2")
  var x = SQL("insert into x (a, b, c) values ({a, b, c})").on(
    'a -> a,
    'b -> b,
    'c -> c
  )
  Logger.info("2.5")
  x.executeUpdate()
  Logger.info("3") 
```

它永远不会超过2.5。我没有发生任何其他数据库操作（进化除外）。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:34:21.647

根据您的链接，您的 SQL 语句不应该如下所示：

```
 var x = SQL("insert into x (a, b, c) values ({a}, {b}, {c})").on(
    "a" -> a,
    "b" -> b,
    "c" -> c
  ) 
```

在问题中，值没有单独的大括号：`{a, b, c}`.

# maven - maven-jaxb2-plugin 在构建后立即删除类

> ID：15189561
> 
> 赞同：0
> 
> 时间：2013-03-03T19:02:51.897
> 
> 标签：maven, maven-2, jaxb, jaxb2, maven-jaxb2-plugin

我正在尝试使用`maven-jaxb2 plugin`. 但是每次构建后几秒钟，类都会从`target/generated-resources`文件夹中删除（但它们仍在`target/classes/...`文件夹中）

这是我的 pom 中的插件定义：

```
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <version>0.8.1</version>
    <executions>
        <execution>
            <goals>
                <goal>generate</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <cleanPackageDirectories>true</cleanPackageDirectories>
        <generatePackage>gen.name.integrationimpl.imdb.types</generatePackage>
        <schemaDirectory>${basedir}/src/main/resources</schemaDirectory>
        <args>
            <param>-npa</param>
        </args>
        <removeOldOutput>true</removeOldOutput>
        <includeSchemas>
            <includeSchema>**/*.xsd</includeSchema>
        </includeSchemas>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.2.5-b10</version>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.2.6</version>
        </dependency>
        <dependency>
            <groupId>javax.activation</groupId>
            <artifactId>activation</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>javax.xml.stream</groupId>
            <artifactId>stax-api</artifactId>
            <version>1.0-2</version>
        </dependency>
    </dependencies>
</plugin>

<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>add-resource</id>
            <phase>generate-resources</phase>
            <goals>
                <goal>add-resource</goal>
            </goals>
            <configuration>
                <resources>
                    <resource>
                        <directory>src/main/resources</directory>
                        <targetPath>resources-target</targetPath>
                    </resource>
                </resources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我的xsd应该是对的。

我不知道出了什么问题。我之前做过几次，但从来没有这个问题。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T16:42:01.537

对于那些对此感兴趣的人：我通过删除

```
<removeOldOutput>true</removeOldOutput> 
```

标签。

# maven - Maven：如何从发布传递命令行参数：执行部署？

> ID：15189563
> 
> 赞同：0
> 
> 时间：2013-03-03T19:03:06.733
> 
> 标签：maven, maven-release-plugin

当我调用`release:peform`我的项目时。它调用`deploy`哪个反过来调用`gpg`. 我想使用系统属性或环境变量将 gpg 密码传递到进程中，但似乎都不起作用。

如果我调用`mvn.bat '-Darguments="-Dgpg_passphrase=test"' -Pwindows-i386-msvc-debug -DconnectionUrl=scm:hg:https://boost-maven-project.googlecode.com/hg/ release:perform`Maven 最终调用：

`cmd.exe /X /C mvn deploy --no-plugin-updates -Psonatype-oss-release -P windows-i386-msvc-debug,always-active -f pom.xml"`

如您所见，环境变量和`-Darguments`命令行参数都没有传递给`deploy`目标。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:48:16.023

您已配置为`-Denv.gpg_passphrase=test`，如果我错了，请纠正我。我了解您正在尝试传递此处不允许的环境变量。它是一个命名的系统属性`env.gpg_passphrase`。`-D`始终是系统属性。

如果您想使用环境变量，请改为通过操作系统配置进行配置。如果您想使用系统属性，请使用 -D。请不要混合使用这两种类型。

恕我直言，我有一个场景作为你提到的签署工件的场景。我通过在构建部分明确指定“ [maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/index.html) ”进行配置，如下例所示。

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-release-plugin</artifactId>
            <version>${my.maven.release.version}</version>
            <configuration>
                <arguments>${my.release.arguments}</arguments>
            </configuration>
        </plugin>
    <plugins>
</build> 
```

出于安全目的，我还在每个开发人员*settings.xml*中配置名为*my.release.arguments*的属性（不要共享秘密，例如用户/密码/私钥等）。我想通过查看签名来了解和识别谁发布了这些工件。

 *我希望这可能会有所帮助。

问候，

查理·Ch。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T07:10:50.867

事实证明这是由 Sonatype 错误引起的：[https ://issues.sonatype.org/browse/CENTRALSRV-35](https://issues.sonatype.org/browse/CENTRALSRV-35)*

# java - Java中的应用程序服务器和Web服务器有什么区别？

> ID：15189569
> 
> 赞同：0
> 
> 时间：2013-03-03T19:03:18.050
> 
> 标签：java, jakarta-ee, webserver, application-server

Java中的应用程序服务器和Web服务器有什么区别？请让我知道这一点，并从他们那里举一些例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:35:45.610

Web 服务器并非特定于 Java。它只是一个用于托管通过 HTTP/HTTPS 访问的内容的服务器。例如 Apache HTTPD 和 nginx。

Java 应用程序服务器实际上托管和执行 Java 应用程序代码。示例包括 Apache Tomcat、Jetty 等 servlet 容器和 J 等 Java EE 容器

# c# - FindControl 没有按预期工作？

> ID：15189571
> 
> 赞同：0
> 
> 时间：2013-03-03T19:03:29.710
> 
> 标签：c#, asp.net, findcontrol

我有这个结构：

```
Page
 |
 +---Ascx
      |
      +---<div  runat="server">
                    |
                    +---<asp:button> 
```

我已经知道递归不起作用`Findcontrol` *。*

但是，当我按下按钮并去调试并写道：

`this.FindControl("btn1")`它**确实**找到了`"button"`

**但**

*   `this`= ascx
*   有一个`div runat server`包裹按钮

那么它是*怎么*找到的呢？根据定义，它不应该工作。

女士号：

> **Control.FindControl** --> 该方法不会在控件内的控件层次结构中进行搜索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:10:44.910

asp.net 的**树结构与 html 页面的实际 DOM 不同。**

同一页面上的控件就像在树的同一分支上。所以可以通过搜索页面找到同一页面上的所有控件。一些自定义控件内的控件也都在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:22:31.040

我找到了[答案](https://stackoverflow.com/a/3118364/859154)。

**仅**控制继承自`TemplateControl`，实现`INamingContainer`接口的控件。

显然 `<div runat server>`不是其中之一。

即`UserControl` ：

```
public class UserControl : TemplateControl, IAttributeAccessor, INonBindingContainer, INamingContainer, IUserControlDesignerAccessor
{...} 
```

即`ContentPlaceHolder`：

```
public class ContentPlaceHolder : Control, INonBindingContainer, INamingContainer
{...} 
```

在这里我可以看到所有这些控件：

![在此处输入图像描述](../Images/2e051ba11344a621451bac86e70f6b93.png)

# iis-7 - 服务器端包括不在 IIS 7 上工作 - 经典 ASP

> ID：15189585
> 
> 赞同：0
> 
> 时间：2013-03-03T19:05:06.777
> 
> 标签：iis-7, configuration, asp-classic, server-side-includes

好的，所以我有包含 IIS 7 服务器端的 Windows 7，并且启用了 IIS 中的“打开或关闭 Windows 功能”ISAPI.DLL 模块中所需的所有其他内容。允许父路径在所有位置启用。

当我运行包含包含的文件时，我看到的是 "< ? %" ？在黑色钻石中。我可以看到实际代码，而不是 IIS 处理和提供的包含页面。

父页面抛出一​​个 ASP 异常，这意味着 ASP 本身正在工作。

包含文件是一个连接字符串，因此没有什么特别之处，它的扩展名也是 .asp。

我在各种网站上阅读了大约 50 多条建议，包括 stackoverflow 上的所有建议，但没有任何乐趣。

顺便说一句，如果我直接从浏览器调用它，包含运行得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:59:21.807

请为此网站在 IIS 中设置 enable parent path = true，这将允许访问父页面

# silverlight - 如何在 Silverlight 4 中创建扩展面板？

> ID：15189588
> 
> 赞同：0
> 
> 时间：2013-03-03T19:05:33.017
> 
> 标签：silverlight

我是Siverlight中动画等方面的新手，需要创建一个可扩展的面板，可以用作帮助工具。这个想法是屏幕的右上角会有一个小按钮，当点击时，它会将包含帮助信息的面板的宽度设置为从零到某个宽度的动画。再次单击该按钮会将帮助面板缩小到零宽度。

这听起来应该很简单，在 WPF 中确实如此，但由于 Silverlight 似乎不支持 WPF 的很多功能，所以我在这里苦苦挣扎。

我从工具包中查看了扩展器控件，但据我所知，这并没有达到我想要的效果，因为控件总是占用相同的屏幕区域。我希望可扩展面板在不使用时消失。

谁能提供一个简单的例子来说明如何做到这一点？请注意，我使用的是 SL4，而不是 SL5。

首先十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:55:07.030

发现另一个 SO 问题，其中有人发布 XAML 来做几乎相同的事情......

[Silverlight 项目 - 滑入和滑出面板 - 如何？](https://stackoverflow.com/questions/3067656/silverlight-project-slide-in-and-out-panel-how)

希望这对其他人有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:02:00.663

如果您可以访问 Expression Blend，那么这（几乎）都可以在 XAML 中完成。

[这是一个开始的好地方](http://visitmix.com/labs/rosetta/eyesofblend/)

# javascript - 滚动到顶部的链接不起作用

> ID：15189594
> 
> 赞同：0
> 
> 时间：2013-03-03T19:06:02.687
> 
> 标签：javascript, html

我不知道为什么这没有给我动画。它像预期的那样进入页面顶部，但没有动画。有人可以帮我找出原因吗？

这里 id javascript 代码

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript">
$(document).ready(function() {

    $('.scrollup').click(function(){
    $("html, body").animate({ scrollTop: target_top }, 600);
    return false;
    });

});
</script>

</head>

<body id="top"> 
```

这是我需要执行滚动的链接。

```
<td><a href="#top" class="scrollup">Back to Top</a></td> 
```

再次，它转到页面顶部，但没有动画。

编辑这里是整个 html 文件。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Home</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript">
$(document).ready(function() {

    $('.scrollup').click(function(){
    $("html, body").animate({ scrollTop: 0 }, 600);
    return false;
    });

});
</script>

</head>

<body id="top">
<div id="header">
    <div class="container">
      <div id="title">Name</div>
        <div id="tagline">Web Designer + Programmer</div>
      <div id="navbar">
            <table>
                <tbody>
                    <tr>
                        <td><a href="#services">Services</a></td><td><a href="#about">About</a></td><td><a href="#contact">Contact</a></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div id="services">
    <div class="container">
        <div id="servicescontent"></div>
    </div>
</div>

<div id="about">
    <div class="container">
        <div id="aboutcontent"></div>
    </div>
</div>

<div id="services2">
    <div class="container">
        <div id="services2content"></div>
    </div>
</div>

<div id="contact">
    <div class="container">
        <div id="contactinfo"></div>
    </div>
</div>

<div id="footer">
    <div class="container">
        <div id="copyright">Copyright 2013</div>
        <div id="footernavbar">
            <table style="font-size: 16px;">
                <tbody>
                    <tr>
                        <td><a href="#about">About</a></td><td><a href="#services">Services</a></td><td><a href="#top" class="scrollup">Back to Top</a></td>
                    </tr>
                </tbody>
            </table>
        </div></div>
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:08:59.370

不是target_top，是0

```
$("html, body").animate({ scrollTop: 0 }, "slow"); 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T19:24:39.397

@skidadon 是正确的，0 可能会解决它。但是您也有一些格式不正确的脚本标签。您需要一个单独的 Jquery 标记和一个单独的用于您正在运行的代码的标记。`event.preventDefault()`在事件处理程序的顶部使用它也可能会有所帮助。这是您的代码的简单编辑：

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
                $('.scrollup').click(function(event){
                    event.preventDefault();
                    $("html, body").animate({ scrollTop: 0 }, 600);
                });
        });
    </script>
</head>
<body id="top">

    <div style="height: 900px">
        Some content
    </div>
    <div>
        <a href="#" class="scrollup">go to top</a>
    </div>
</body>
</html> 
```

希望有帮助。

# php - 通过正则表达式读取带有嵌套循环的模板

> ID：15189596
> 
> 赞同：0
> 
> 时间：2013-03-03T19:06:09.723
> 
> 标签：php, regex

我有一个类似于 Twig 的模板结构。我用正则表达式划分这个目前成功的。

```
{% for array as item %}
    {% item.party %}
    {% item %}
{% else %}
    // If empty...
{% endfor %}

{% if !var %}
   // Full
{% else %}
   // Empty
{% endif %}

// Is var full, replace block whit var
{% block var %}
   Some Code
{% endblock %} 
```

正则表达式 `preg_match_all('/(?:{% (for|if|block) )(.*?)(?: %})(.*?)({% else %}(.*?))?(?:{% end\1 %})/is', $content, $data);`

现在我想那个也可以嵌套。唯一的问题是循环总是走错端。外循环采用内端，因为它是第一个。

```
{% for array as item %} // From here on
   {% item.title %}
   {% for item.sub as sub %}
      {% sub.title %}
   {% endfor %} // To here
{% endfor %} 
```

你知道我如何让正则表达式选择正确的结尾吗？在第一层的内容上，我还可以重新应用整个功能。但它必须是正则表达式才能使用正确的结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:57:49.863

The following seems to meet your requirements.

It uses `(?R)` to allow recursive matching of the whole expression within a block.
See [Recursive patterns](http://www.php.net/manual/pt_BR/regexp.reference.recursive.php) and [PCRE](http://www.pcre.org/pcre.txt).

```
preg_match_all(
    '/(?:{% (for|if|block) )(.*?)(?: %})(?:(?R)|(.*?)({% else %}(.*?))?)*(?:{% end\1 %})/is',
     $content, $data
); 
```

The only changes I made to your expression were additions to surround the block's inner content sub-pattern in a non-capturing group, and to add the `(R)` alternative to it:

```
start(?:(?R)|inner)end 
```

The `(?R)` attempts to match the whole regular expression, thereby matching any other blocks within the outer block.

You could also surround the `(?R)` with parentheses, i.e. `((?R))`, so these inner blocks will be available in the third capture group.

# ios - 为什么 UITableViewController 不旋转？

> ID：15189599
> 
> 赞同：0
> 
> 时间：2013-03-03T19:06:14.433
> 
> 标签：ios, uitableview

我想让我的 UITableViewController 仅是横向，但它甚至不会从纵向旋转......我在我的项目设置中将方向属性设置为横向，并且我在 StoryBoards 中更改了 UITableViewController 的方向，但仍然没有。我还应该怎么做？在设备/模拟器上运行它被锁定在纵向左侧。

[http://img15.imageshack.us/img15/9652/tavblef.png](http://img15.imageshack.us/img15/9652/tavblef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:26:38.213

所以答案很简单。我在 Storyboards 中创建了一个新项目和一个新 UITableViewController，但我是在使用默认 UIViewController 类，而不是创建 UITableViewController 的子类...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:31:21.480

尝试将其添加到您的 viewcontroller.m 文件中

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation== UIInterfaceOrientationLandscapeRight|| interfaceOrientation==     UIInterfaceOrientationLandscapeLeft);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:28:30.920

确保您必须在“项目名称”->“目标”->“信息”中设置这四个方向支持：

![在此处输入图像描述](../Images/dd01543b75299cae7a635814634b2ead.png)

# php - 将 $_GET[''] 与字符串混合？

> ID：15189602
> 
> 赞同：0
> 
> 时间：2013-03-03T19:06:48.773
> 
> 标签：php, variables, html

好的，所以我正在尝试执行以下操作：

`<?php include('pages/{$_GET["page"]}.txt'); ?>`

不工作。它被放置在 a 内的工作站点中，因此它只是将 div 留空。

如果我这样做：

`<?php include('pages/index.txt'); ?>`

有用。

我正在连接到 mydomain.com/?page=index 有人可以在这里给我一些提示吗？

我尝试搜索，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:08:37.237

编辑：正如许多人所说，以这种方式做你想做的事是不安全的。这是一个让它变得更好的简单方法：

```
<?php 
    $valid_pages = array('index', 'contact', 'faq');
    $page = $_GET["page"];

    if (!in_array($page, $valid_pages)) {
        $page = $valid_pages[0];
    }

    include("pages/{$page}.txt"); 
?> 
```

这将检查用户想要的页面是否在允许的页面内，如果不是，它将使用`$valid_pages`数组中的第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:08:31.450

尝试这个：

```
<?php include('pages/' . $_GET["page"] . '.txt'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:11:29.653

首先，不要这样做！太没有安全感了！如果您这样做，我可以访问您网站上的任何文件。太糟了。

现在，您所拥有的实际问题是您的字符串是单引号。如果将其更改为双引号，它将起作用。但你仍然不应该这样做。

```
$foo = "QQQ";

echo "asfd{$foo}asdf";
> asfdQQQasdf
echo 'asfd{$foo}asdf';
> asdf{$foo}asdf 
```

修复漏洞的一种方法是建立白名单。这是一个简单的例子：

```
$file = "foo";

switch ($file) {
    case "foo":
        include ("pages/foo.txt");
        break;
    case "bar":
        include ("pages/bar.php");
        break;
    default:
        echo "YOU CANNOT ACCESS THIS FILE!";
        break;
} 
```

另一种方法是有一个可接受的文件名数组并检查请求的文件是否在该数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T19:13:26.017

如果你必须这样做，那么

```
<?php include('pages/' . {$_GET["page"]} . '.txt'); ?> 
```

但正如其他人所提到的，这确实暴露了一个安全漏洞。至少对页面参数进行一些检查，以确保它不会将您链接到 Web 服务器之外的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T19:23:05.100

```
$_GET['page'] = "index";
$allowed_page = array("index", "about", "contact");
$page = htmlentities($_GET['page']);
if((isset($_GET['page']) && $_GET['page'] != "")  && in_array($page, $allowed_page)){
$page = $_GET['page'];
}
$final_page =  'pages/' . $_GET["page"].'.txt';
include($final_page); 
```

# python - 使用子进程在 Python 中逐行写入/读取管道

> ID：15189611
> 
> 赞同：1
> 
> 时间：2013-03-03T19:08:01.350
> 
> 标签：python, unix, subprocess, pipe

我有以下似乎可以工作的代码，用于在 python 中将管道与子进程链接在一起，同时逐行读取/写入它们（不使用`communicate()`前期）。代码只是调用一个 Unix 命令 ( `mycmd`)，读取其输出，然后将其写入另一个 Unix 命令 ( `next_cmd`) 的标准输入，并将最后一个命令的输出重定向到一个文件。

```
 # some unix command that uses a pipe: command "a"
    # writes to stdout and "b" reads it and writes to stdout
    mycmd = "a | b" 
    mycmd_proc = subprocess.Popen(mycmd, shell=True,
                                  stdin=sys.stdin,
                                  stdout=subprocess.PIPE,
                                  stderr=subprocess.PIPE)
    # nextCmd reads from stdin, and I'm passing it mycmd's output
    next_cmd = "nextCmd -stdin"
    output_file = open(output_filename, "w")
    next_proc = subprocess.Popen(next_cmd, shell=True,
                                  stdin=subprocess.PIPE,
                                  stdout=output_file)
    for line in iter(mycmd.stdout.readline, ''):
        # do something with line
        # ...
        # write it to next command
        next_proc.stdin.write(line)
    ### If I wanted to call another command here that passes next_proc output
    ### line by line to another command, would I need
    ### to call next_proc.communicate() first?
    next_proc.communicate()
    output_file.close() 
```

这似乎有效，它只`communicate()`在命令结束时调用。

我正在尝试扩展此代码以添加另一个命令，以便您可以执行以下操作：

```
mycmd1 | mycmd2 | mycmd3 > some_file 
```

含义：逐行，从 Python 读取 mycmd1 的输出，*处理*该行，将其提供给 mycmd2，读取 mycmd2 的输出并逐行*处理*并将其提供给 mycmd3，mycmd3 依次将其输出放入`some_file`. 这是可能的还是必然会以死锁/阻塞/未刷新的缓冲区结束？请注意，我不只是将三个 unix 命令作为管道调用，因为我想在其间使用 Python 进行干预，并在将每个命令的输出提供给下一个命令之前逐行对其进行后处理。

我想避免调用通信并将所有输出加载到内存中 - 相反我想逐行解析它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:16:28.093

这应该处理任意数量的命令：

```
import sys
import subprocess

def processFirst(out):
    return out

def processSecond(out):
    return out

def processThird(out):
    return out

commands = [("a|b", processFirst), ("nextCmd -stdin", processSecond), ("thirdCmd", processThird)]

previous_output = None
for cmd,process_func in commands:
    if previous_output is None:
        stdin = sys.stdin
    else:
        stdin = subprocess.PIPE
    proc = subprocess.Popen(cmd, shell=True,
                            stdin = stdin,
                            stdout = subprocess.PIPE)
    if previous_output is not None:
        proc.stdin.write(previous_output)

    out,err = proc.communicate()
    out = process_func(out)
    previous_output = out 
```

只需将要运行的任何命令以及应处理其输出的函数添加到命令列表中即可。最后一个命令的输出将`previous_output`在循环结束时结束。

为避免任何死锁/缓冲/等问题，您只需运行每个命令即可完成，使用`proc.communicate()`它将返回输出（而不是像您的示例中那样直接读取它）。然后在让它运行完成之前将其输入到下一个命令中，依此类推。

编辑：刚刚注意到您不想`communicate()`预先使用并且您想逐行做出反应。我会稍微编辑我的答案来解决这个问题

[这个答案](https://stackoverflow.com/questions/5486717/python-select-doesnt-signal-all-input-from-pipe)提供了一个示例，说明如何在不阻塞的情况下从管道中逐行读取`select.select()`.

下面是一个将它用于您的特定情况的示例：

```
import sys
import subprocess
import select
import os

class LineReader(object):
    def __init__(self, fd, process_func):
        self._fd = fd
        self._buf = ''
        self._process_func = process_func
        self.next_proc = None

    def fileno(self):
        return self._fd

    def readlines(self):
        data = os.read(self._fd, 4096)
        if not data:
            # EOF
            if self.next_proc is not None:
                self.next_proc.stdin.close()
            return None
        self._buf += data
        if '\n' not in data:
            return []
        tmp = self._buf.split('\n')
        tmp_lines, self._buf = tmp[:-1], tmp[-1]
        lines = []
        for line in tmp_lines:
            lines.append(self._process_func(line))
            if self.next_proc is not None:
                self.next_proc.stdin.write("%s\n" % lines[-1])

        return lines

def processFirst(line):
    return line

def processSecond(line):
    return line

def processThird(line):
    return line

commands = [("a|b", processFirst), ("nextCmd -stdin", processSecond), ("thirdCmd", processThird)]

readers = []
previous_reader = None
for cmd,process_func in commands:
    if previous_reader is None:
        stdin = sys.stdin
    else:
        stdin = subprocess.PIPE
    proc = subprocess.Popen(cmd, shell=True,
                            stdin = stdin,
                            stdout = subprocess.PIPE)

    if previous_reader is not None:
        previous_reader.next_proc = proc

    previous_reader = LineReader(proc.stdout.fileno(), process_func)
    readers.append(previous_reader)

while readers:
    ready,_,_  = select.select(readers, [], [], 10.0)
    for stream in ready:
        lines = stream.readlines()
        if lines is None:
            readers.remove(stream) 
```

# apache-flex - AdvancedDataGrid Flex 模拟

> ID：15189613
> 
> 赞同：2
> 
> 时间：2013-03-03T19:08:24.240
> 
> 标签：apache-flex, flex3, advanceddatagrid

您能否建议我使用任何与 Flex 的 AdvancedDataGrid 类似但更简单的 Flex 3 (MX) 组件？

我只需要数据的分层视图和轻松自定义视图的能力。最简单的树，深度为 2，没有边框和镶边，可以正常工作。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:15:34.747

您的层次结构选项是树和高级数据网格。查看 rendererproviders 以获得高级数据网格。您可以根据层次结构深度指定要使用的渲染器。如果您不想使用镶边，请关闭 ADG 标题、行颜色和边框。

```
<mx:AdvancedDataGrid 
    id="myDatagrid">
<mx:columns>
    <mx:AdvancedDataGridColumn />
</mx:columns>
<mx:rendererProviders>
    <mx:AdvancedDataGridRendererProvider 
            renderer="com.somepath.someclass"
            columnSpan="0"
            columnIndex="0"
            depth="1"/>
    <mx:AdvancedDataGridRendererProvider
            renderer="com.somepath.someotherclass"
            columnIndex="0"
            columnSpan="0"
            depth="2"/>
</mx:rendererProviders>
</mx:AdvancedDataGrid > 
```

# terminal - Ubuntu终端冻结

> ID：15189615
> 
> 赞同：0
> 
> 时间：2013-03-03T19:08:31.033
> 
> 标签：terminal, ubuntu-12.04

当我运行此命令时，它会冻结终端，因此我无法向服务器发送新命令。有没有办法发送此命令，然后在此命令继续时发送新命令。

> 洪水网络

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:13:41.273

**方法一：**可以在命令后加an `&`，让程序后台运行。

```
deluge-web & 
```

**方法2：**您也可以在这样启动后后台进程：

```
deluge
Ctrl + Z
bg 
```

向进程`Ctrl + Z`发送`SIGSTOP`信号，使进程暂停，您可以控制终端。该`bg`命令将使最后一个暂停的进程进入后台并再次开始执行它。

**方法 3：**[此](http://dev.deluge-torrent.org/wiki/UserGuide/ThinClient)页面中特定于您的命令的选项，其中显示：

> 您还可以使用 --fork 选项让 deluge-web 进程在后台运行，并且您可能希望再次使用 InitScript。

```
deluge-web --fork 
```

所以它应该自动让 deluge-web 程序在后台启动，你应该可以控制你的终端。

# c# - NullReferenceException 添加到字典 - 非常肯定没有什么是空的

> ID：15189617
> 
> 赞同：6
> 
> 时间：2013-03-03T19:08:32.723
> 
> 标签：c#, dictionary

`Sessions`a在哪里`Dictionary<Guid, WebSession>`，我有这条线`NewSession`：`new WebSession()`

```
Sessions.Add(NewSession.SessionID, NewSession); 
```

现在，您可能正在转动您的眼球并认为“要么 Sessions 为空，要么 NewSession.SessionID 为空”。然而：

```
Sessions == null
false
NewSession.SessionID == null
false
NewSession == null
false 
```

这是相当断断续续的。可能会发生 50 次。无论何时发生，我都可以`Sessions.Add(NewSession.SessionID, NewSession);`在即时窗口中进行操作，并且效果很好。

for 的构造函数`WebSession`是同步的，`Sessions`是一个没有添加糖的普通字典。

我很确定我在这一点上已经做了尽职调查。这是在我的应用程序中发生的一件足够无害的事情，并且它被捕获并干净地处理 - 但我对首先导致它的原因感到困惑。

编辑：我想知道是不是因为我的`WebSession`继承`: Dictionary<String, Object>`但它的构造函数没有调用`base()`- 虽然我可以在做之前检查对象不为空，但仍然无法解释它`Add(..)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T19:25:39.080

您需要使用线程安全的集合，例如[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)，或者实现自己的同步。

尝试`Dictionary<TKey,TValue>`从多个线程访问 a 可能会导致 heisenbugs，这很可能表现为`NullReferenceException`.

# ruby-on-rails - 如何在导轨中设置 zurb 轨道滑块的高度？

> ID：15189619
> 
> 赞同：0
> 
> 时间：2013-03-03T19:08:38.173
> 
> 标签：ruby-on-rails, slider, zurb-foundation

我正在将 zurb 基础导轨 gem 用于一个新应用程序，它运行良好，除了轨道滑块会根据图像大小改变高度。

我想将默认高度设置为 500px，但我不确定如何设置。提供的 JS 和 CSS 选项不[提供](http://foundation.zurb.com/docs/components/orbit.html)更改高度的功能，并且在使用 html 的视图中执行此操作也不起作用。

谁能告诉我如何为所有图像的滑块提供固定高度？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T00:55:32.537

我遇到过同样的问题。幻灯片的容器似乎由这个类 div 控制：orbit-slides-container

所以我将该 div 添加到我的 layout.css.scss 文件中，并带有 height 属性：

```
 .orbit-slides-container {

  height: 500px;

   } 
```

重要的是我的 application.css 包含 layout.css.scss，因为我没有在其他地方包含它。这是其中的一个片段：

```
 *= require foundation_and_overrides
 *= require layout
 */ 
```

希望对你有效。

# python - Python更新数组字典

> ID：15189626
> 
> 赞同：0
> 
> 时间：2013-03-03T19:09:15.193
> 
> 标签：python, arrays, optimization, dictionary

我有一个空的“numpy.ndarray”要更新。

```
import numpy as np
my_grid =  np.zeros((5, 5))

# stat 
parse = "max","min","avg"

# create a dictionary for each element of parse 
grid_stat = {}
for arg in parse:
    grid_stat[arg] = my_grid

 grid_stat 
{'avg': array([[ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.]]),
 'max': array([[ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.]]),
 'min': array([[ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.]])} 
```

我希望用新值更新字典中的每个网格（它将成为循环的一部分）例如：`on dy = 0, dx = 0, max= 100, min= 50, avg = 75`

```
grid_stat 
    {'avg': array([[ 75.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.]]),
     'max': array([[ 100.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.]]),
     'min': array([[ 50.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.,  0.]])} 
```

我尝试了一个简单的解决方案

`grid_stat['avg'][0,0] = 100`但对于 max 和 min 更新的值也是 100

```
grid_stat
{'avg': array([[ 100.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.]]),
 'max': array([[ 100.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.]]),
 'min': array([[ 100.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.],
       [   0.,    0.,    0.,    0.,    0.]])} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:17:42.580

正如我在对最后一个问题的评论中建议的那样，您可能想要使用

```
for arg in parse:
    grid_stat[arg] = my_grid.copy() 
```

代替

```
for arg in parse:
    grid_stat[arg] = my_grid 
```

将 的每个值设置`grid_stat`为*相同*的数组，称为`my_grid`. 它不会创建三个具有相同形状和内容的单独数组。您可以使用`id`或确认这一点`is`：

```
>>> id(my_grid)
4325774752
>>> id(grid_stat['max'])
4325774752
>>> id(grid_stat['avg'])
4325774752
>>> id(grid_stat['min'])
4325774752
>>> my_grid is grid_stat['max']
True
>>> grid_stat['max'] is grid_stat['avg']
True 
```

等等

# sql - 提高 PostgreSQL 查询性能

> ID：15189628
> 
> 赞同：6
> 
> 时间：2013-03-03T19:09:30.517
> 
> 标签：sql, performance, postgresql, database-design

在我的服务器上运行此查询时，速度很慢，我不明白为什么。谁能帮我弄清楚？
询问：

```
SELECT
    "t_dat"."t_year" AS "c0",
    "t_dat"."t_month" AS "c1",
    "t_dat"."t_week" AS "c2",
    "t_dat"."t_day" AS "c3",
    "t_purs"."p_id" AS "c4",
    sum("t_purs"."days") AS "m0",
    sum("t_purs"."timecreated") AS "m1"
FROM "t_dat", "t_purs"
WHERE "t_purs"."created" = "t_dat"."t_key"
  AND "t_dat"."t_year" = 2013
  AND "t_dat"."t_month" = 3
  AND "t_dat"."t_week" = 9
  AND "t_dat"."t_day" IN (1,2)
  AND "t_purs"."p_id" IN (
      '4','15','18','19','20','29',
      '31','35','46','56','72','78')
GROUP BY
    "t_dat"."t_year",
    "t_dat"."t_month",
    "t_dat"."t_week",
    "t_dat"."t_day",
    "t_purs"."p_id" 
```

解释分析：

```
HashAggregate（成本=12252.04..12252.04 行=1 宽度=28）（实际时间=10212.374..10212.384 行=10 循环=1）
  -> 嵌套循环（成本=0.00..12252.03 行=1 宽度=28）（实际时间=3016.006..10212.249 行=14 循环=1）
        加入过滤器：（t_dat.t_key = t_purs.created）
        -> Seq Scan on t_dat (cost=0.00..129.90 rows=1 width=20) (实际时间=0.745..2.040 rows=48 loops=1)
              过滤器： ((t_day = ANY ('{1,2}'::integer[])) AND (t_year = 2013) AND (t_month = 3) AND (t_week = 9))
        -> Seq Scan on t_purs (cost=0.00..12087.49 rows=9900 width=16) (实际时间=0.018..201.630 rows=14014 loops=48)
              过滤器：(p_id = ANY ('{4,15,18,19,20,29,31,35,46,56,72,78}'::integer[]))
总运行时间：10212.470 毫秒

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T19:36:29.363

很难说你到底错过了什么，但如果我是你，我会确保存在以下索引：

```
CREATE INDEX t_dat_id_date_idx
    ON t_dat (t_key, t_year, t_month, t_week, t_day); 
```

对于`t_purs`，创建此索引：

```
CREATE INDEX t_purs_created_p_id_idx
    ON t_purs (created, p_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:30:51.593

考虑在表中使用**单列** ：

```
t_date date 
```

而不是`(t_year, t_month, t_week, t_day)`. 数据类型`date`占用 4 个字节。这会使你的表缩小一点，使索引更小更快，并且更容易分组。

*年*、*月*、*周*和*日*可以轻松快速地从日期中提取出来[`extract()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)。您的查询可能看起来像这样并且会更快：

```
SELECT extract (year  FROM t_date) AS c0
      ,extract (month FROM t_date) AS c1
      ,extract (week  FROM t_date) AS c2
      ,extract (day   FROM t_date) AS c3
      ,p.p_id                      AS c4
      ,sum(p.days)                 AS m0
      ,sum(p.timecreated)          AS m1
FROM   t_dat  d
JOIN   t_purs p ON p.created = d.t_key
WHERE  d.t_date IN ('2013-03-01'::date, '2013-03-02'::date)
AND    p.p_id IN (4,15,18,19,20,29,31,35,46,56,72,78)
GROUP  BY d.t_date, p.p_id; 
```

对性能更重要的是索引，那么它就是：

```
CREATE INDEX t_dat_date_idx ON t_dat (t_key, t_date); 
```

或者，根据数据分布：

```
CREATE INDEX t_dat_date_idx ON t_dat (t_date, t_key); 
```

[列的顺序很重要。](https://dba.stackexchange.com/questions/27481/is-a-composite-index-also-good-for-queries-on-the-first-field/27493#27493)您甚至可以同时创建两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-06T21:02:53.310

![在此处输入图像描述](../Images/402085f5a86e8210e0a2b8d29ebc080e.png)

`t_purs`您的查询正在对和进行顺序扫描`t_dat`。创建适当的索引将帮助您加快查询速度并避免顺序扫描。

```
create index index_name on t_purs(created) where created is not null;
create index index_name on t_dat using btree(t_key, t_year, t_month, t_week, t_day) 
```

运行上述两个查询后运行*解释分析。*您会看到计划时间和执行时间将减少。

# android - Android：调用库项目的应用类

> ID：15189637
> 
> 赞同：0
> 
> 时间：2013-03-03T19:10:08.720
> 
> 标签：android

我有一个库项目，我从主 Android 项目中引用它。库项目有一个 Application 类，它在库的清单中声明，如下所示，

```
< application android:name="com.textbook.pageview.BookApp" 
```

我在主项目的清单中声明了相同的内容，并且一切正常，但是如果项目已经在其清单中指定了应用程序类，我该怎么办。在那种情况下如何调用库项目的应用程序类？如果我没有，我会得到空指针，因为应用程序类为库正常运行做了重要的设置和初始化。

谢谢。幸运的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:35:43.277

只需添加库项目：

> 右键单击您的项目 -> 属性 -> Android -> 添加库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:46:27.490

正如@Edward van Raak 所说，您必须从主项目的属性中引用库项目（两个项目必须在同一个工作区中）。

但是您还必须在主项目`manifestmerger.enabled=true`的文件`project.properties`中添加该行，以便合并两个项目的清单文件。

# java - 存储在 getPoint() 对象中的坐标

> ID：15189646
> 
> 赞同：1
> 
> 时间：2013-03-03T19:11:00.210
> 
> 标签：java

我对以下代码有疑问。我的意图是使用 getPoint 将鼠标单击的坐标存储到数组列表中，然后在用户单击的每个位置绘制一个矩形。我已经搜索了如何从 getPoint 对象中单独提取 x 和 y 坐标的高低搜索，但无济于事。我是java新手，在编译时给我带来麻烦的行是：

g2.drawRect(coordinateList(j).getHeight(),coordinateList(j.getWidth(),3,3);

我知道我可能还差得很远，但是如何从数组列表中分别提取一个点的 x 和 y 坐标，将数组的一项逐一提取，以便在新的单击点处重新绘制一个矩形以及所有以前的点击也是？

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.event.MouseListener;
import java.awt.Point;
import java.util.*;

public class ClickCloud extends JPanel
{
    private int pointxy;
    //private Rectangle2D.Double r1;
    private boolean mouseClick;
    private int count;
    //private Point[] points;
    private Point coordinates = new Point(0, 0);
    private ArrayList<Point> coordinateList = new ArrayList<Point>();

    public ClickCloud() {
        this.setPreferredSize(new Dimension(500,500));
        this.addMouseListener(new MyMouseListener());
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D)g; 
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
          RenderingHints.VALUE_ANTIALIAS_ON);

        for (int j = 0; j < count; j++) {
            g2.setStroke(new BasicStroke(1.0f));
            g2.setPaint(Color.BLUE);
            g2.drawRect(coordinateList(j).getHeight(),coordinateList(j.getWidth(),3,3);
        }
    }

    private class MyMouseListener implements MouseListener {
        public void mouseClicked(MouseEvent me) { 
            count++;
            coordinates.setLocation(me.getPoint());
            coordinateList.add(coordinates.getLocation());
            repaint();
        }
        public void mousePressed(MouseEvent me) { }
        public void mouseReleased(MouseEvent me) { }
        public void mouseEntered(MouseEvent me) { }
        public void mouseExited(MouseEvent me) { }
    }

     public static void main(String[] args) {
        JFrame f = new JFrame("ClickCloud demo");
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        f.setLayout(new FlowLayout());
        f.add(new ClickCloud());
        f.pack();
        f.setVisible(true);        
    }
} 
```

谢谢，

吨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:15:53.140

忘记所有的`getLocation`和`setLocation`。这是多余的。只需存储`me.getPoint()`在您的`coordinateList`.

然后你可以分别得到`x`和`y`坐标。`point.getX()``point.getY()`

在`paintComponent`中，有一种更简单的方法可以遍历点列表：

```
for (Point coordinate : coordinateList) { //"for each coordinate in coordinateList"
   //do something with coordinate.getX() and coordinate.getY()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:16:49.277

您没有从 ArrayList 中正确获得积分。

```
g2.drawRect(coordinateList(j).getHeight(),coordinateList(j.getWidth(),3,3); 
```

要`j`使用 ArrayList 获取索引处的项目，您只需使用以下方法`get()`：

```
Point point = coordinateList.get(j); 
```

那么问题是`point`只表示点......它们只有X和Y坐标，而不是宽度和高度。如果我试图猜测你想要做什么并假设你想在用户点击的地方绘制 3x3 矩形，你会这样调用`drawRect()`：

```
g2.drawRect(point.getX(), point.getY(), 3, 3); 
```

还：

*   您无需处理`count`变量即可知道 ArrayList 中的点数。只需使用坐标列表的 size() 方法，甚至更好，使用[增强的 for 循环](https://blogs.oracle.com/CoreJavaTechTips/entry/using_enhanced_for_loops_with)。
*   您可以使用 MouseAdapter 而不是 MouseListener 来仅覆盖您需要的事件。
*   您不需要`coordinates`成员和 get/setLocation 的东西。写吧`coordinateList.add(me.getPoint());`

# python - Python 正则表达式匹配非 ascii 名称

> ID：15189649
> 
> 赞同：4
> 
> 时间：2013-03-03T19:11:08.080
> 
> 标签：python, regex, validation, unicode, non-ascii-characters

我正在尝试使用 re 模块验证名称字段。

`\w`不匹配非 ascii 字符，例如`à`.

似乎在许多其他正则表达式引擎中，解决方案本来是`\p{L}`，但在 python 中不支持它。什么是合适的等价物？

**更新：**

这与围绕该主题的其他问题不同，因为我正在寻找`\w`不是使用默认`re.UNICODE`标志获得的 unicode 替代方案（因为该标志也`\w`匹配数字和下划线）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:21:03.317

我相信您需要使用 UNICODE 修饰符为字符类启用 unicode 支持。

```
regexRef = re.compile("\w", re.UNICODE) 
```

看看这是否有助于匹配那些非 ASCII 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:59:00.393

`[^\d\s_]`符合你想要的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T08:16:25.143

`[^\W0-9_]`对我有用，与一起使用时`re.UNICODE`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T19:29:03.773

将 Unicode 字符串传递给`re`模块并启用`re.UNICODE`标志，例如：

```
# -*- coding: utf-8 -*-
import re

print(re.findall(ur"\w+", ur"\w does match à.", flags=re.UNICODE)) 
```

# .net - 如何在 FtpWebRequest 类中使用进度条？

> ID：15189656
> 
> 赞同：0
> 
> 时间：2013-03-03T19:12:10.437
> 
> 标签：.net, vb.net, winforms, progress-bar, ftpwebrequest

我试图自己做这件事，但遇到了需要帮助的情况。我想使用进度条控件来显示 FTP 文件上传的当前进度。

目前，我正在手动更改进度条控件的值 - 但我不禁认为那里可能有更好或更简单的方法。它现在可以工作，但是进度条在显示基于正在执行的代码部分的进度时是零星的。此外，我试图将整个子程序放入一个单独的线程中，但注意到当我这样做时，进度条直到代码结束才会显示 - 然后它会短暂闪烁并再次隐藏。

这是我到目前为止所做的，任何帮助将不胜感激：

```
Public Sub uploadAuthorization()

    ProgressBar1.Show()
    Dim fileName As String = Path.GetFileName(TextBoxFilePath.Text)
    Dim ftpFolder As String = "authorizations"

    Try
        'Create FTP Request
        Me.Cursor = Cursors.WaitCursor
        Dim myRequest As FtpWebRequest = DirectCast(WebRequest.Create(ftpServer + "/" + ftpFolder + "/" + fileName), FtpWebRequest)
        ProgressBar1.Value = 20

        'Update properties
        myRequest.Credentials = New NetworkCredential(ftpUsername, ftpPassword)
        myRequest.Method = WebRequestMethods.Ftp.UploadFile
        ProgressBar1.Value = ProgressBar1.Value + 20

        'Read the file
        Dim myFile As Byte() = File.ReadAllBytes(TextBoxFilePath.Text)
        ProgressBar1.Value = ProgressBar1.Value + 20

        'Upload the file
        Dim myStream As Stream = myRequest.GetRequestStream()
        myStream.Write(myFile, 0, myFile.Length)
        ProgressBar1.Value = ProgressBar1.Value + 20

        'Cleanup
        myStream.Close()
        myStream.Dispose()
        ProgressBar1.Value = ProgressBar1.Value + 20

    Catch ex As Exception
        MsgBox(ex.Message, MsgBoxStyle.Information)
    End Try
    Me.Cursor = Cursors.Arrow
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:27:50.667

**再一次问好，**

因此，根据 Andrew Morton 的建议阅读，这就是我想出的解决方案，它就像一个魅力。唯一的问题是，WebClient 类不支持 FtpWebRequest 类提供的 UploadFileWithUniqueName 方法。我真的很喜欢这个——因为它让我有机会使用随机文件名，但我想这是一个公平的权衡，让进度条正常工作。

**所以这是解决方案：**

* * *

```
Private WithEvents myFtpUploadWebClient As New WebClient

Private Sub ButtonChooseFile_Click(sender As System.Object, e As System.EventArgs) Handles ButtonChooseFile.Click

    If OpenFileDialog1.ShowDialog() = Windows.Forms.DialogResult.OK Then
        OpenFileDialog1.Title = "Please choose the Authorization File"
        TextBoxFilePath.Text = OpenFileDialog1.FileName
        ProgressBar1.Show()
        Me.Cursor = Cursors.WaitCursor

        Dim myUri As New Uri(ftpServer & OpenFileDialog1.SafeFileName)
        myFtpUploadWebClient.Credentials = New System.Net.NetworkCredential(ftpUsername, ftpPassword)
        myFtpUploadWebClient.UploadFileAsync(myUri, OpenFileDialog1.FileName)
    End If

End Sub

Private Sub myFtpUploadWebClient_UploadFileCompleted(sender As Object, e As System.Net.UploadFileCompletedEventArgs) Handles myFtpUploadWebClient.UploadFileCompleted

    If e.Error IsNot Nothing Then
        MessageBox.Show(e.Error.Message)
    Else
        Me.Cursor = Cursors.Default
        MessageBox.Show("Authorization Form Uploaded Successfully!")
    End If
End Sub

Private Sub myFtpUploadWebClient_UploadProgressChanged(sender As Object, e As System.Net.UploadProgressChangedEventArgs) Handles myFtpUploadWebClient.UploadProgressChanged
    ProgressBar1.Value = e.ProgressPercentage
End Sub 
```

# java - 在数组中高效查找元素

> ID：15189657
> 
> 赞同：0
> 
> 时间：2013-03-03T19:12:20.407
> 
> 标签：java, android, arrays, list, dimensional

在我正在制作的游戏中，我需要不断地从列表中找到对象，然后检查它的坐标是否相邻，有数百个这样的对象，其中只有 4 个是正确的，有没有更好的方法来做到这一点？

该列表位于 getMap.getTerrain(x,y);

它是一个 2 维 int 数组，用于保存对象的 dataValue。

```
 int[] r = new int[4];
    int tX = (int)(getX()/32);
    int tY = (int)(getY()/32);
    if((tY > 1) && (tX > 1) && (tY < 39) && (tX < 39))
    {
    r[0] = getMap().getTerrain(tX-1, tY);
    r[1] = getMap().getTerrain(tX+1, tY);
    r[2] = getMap().getTerrain(tX, tY-1);
    r[3] = getMap().getTerrain(tX, tY+1);
    //}
    }
    int resource = 0;
    for(int i : r) if(i != 0) resource = i; 
    if(resource != 0)
    {
        System.out.println("R isnt 0, We are next to a "+resource);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:12:45.097

嗯......如果 getTerrain 在 40x40 二维数组中查找一个值，我认为你不会变得更快。唯一的问题可能是您有一个稀疏数组并且资源分散在整个地图中。在这种情况下，您有 1,600 个数组元素，其中大多数填充为 0。如果它是稀疏的，并且您想要 100 x 100 或 1,000 x 1,000 的大型地图，那么您应该查看一个 Point 类和一个 HashMap，其中点是关键. 获取地形然后可以为不在哈希图中的任何元素返回 0。否则，如果您要坚持使用较小的二维数组，它看起来并不可怕。

# multithreading - 如何实现一种新的比较和交换指令

> ID：15189658
> 
> 赞同：1
> 
> 时间：2013-03-03T19:12:22.363
> 
> 标签：multithreading, concurrency, synchronization, compare-and-swap

我需要实现（伪代码）一种新类型的 compare&swap(a,b) (CAS) 对象（我们称之为新类型 CAS2）。

CAS 和 CAS2 对象都支持返回对象值的读取操作。

它们都支持 compare&swap(a,b) 操作，但是在 CAS 上，此操作返回 true/false，如果它等于 a，则将对象值更改为 b，在 CAS2 上，此操作具有相同的效果，但不是返回 true /false，它应该总是在操作之前返回对象值。

例如：

如果 CAS 对象的值为 4，compare&swap(4,5) 将返回 true 并将值更改为 5，但在 CAS2 对象上，compare&swap(4,5) 将返回 4 并将值更改为 5。如果 CAS 对象值为 4，那么 compare&swap (5,6) 将返回 false 并且什么都不做，但在 CAS2 上 compare&swap (5,6) 将返回 4 并且什么也不做。CAS2 对象应该只使用一个 CAS 对象来实现，并且实现应该是无等待和可线性化的。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:33:50.207

您要求的变体实际上是主流变体。在没有互斥锁的情况下实现这样的指令需要硬件支持，例如专用指令。有关更多详细信息，请参阅有关该主题的[维基百科文章](http://en.wikipedia.org/wiki/Compare-and-swap)。

# c# - 如何在 C# 中获取折扣百分比

> ID：15189659
> 
> 赞同：0
> 
> 时间：2013-03-03T19:12:39.217
> 
> 标签：c#, percentage

假设 dis.text = 2，prc.text = 100，我正在使用这些代码。它应该是 net_prc.text = 98。但它给了我 -100。谁能告诉我为什么？，我怎样才能得到正确的折扣百分比？？

```
 private void net_prcTabChanged(object sender, EventArgs e)
    {
        int d;
        int di;
        int i;
        d = Convert.ToInt32(dis.Text);
        i = Convert.ToInt32(prc.Text);
        di = -((d / 100) * i) + i;
        net_prc.Text = di.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:16:08.890

`di = -((d / 100) * i) + i;`

此语句中的所有值都是整数。您将要计算带小数位的算术，并且需要将变量的精度提高到双精度或浮点数。而是在等式中的某个值中添加一个小数位。这将强制所有值变为双精度值。

这是一个称为[算术提升](http://www.dotnetperls.com/numeric-promotion)的过程。它是在运行时将方程中每个变量的精度增加到最精确变量的大小的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:17:11.633

尝试 (d / 100.0) 强制它使用浮点运算

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:16:13.510

正确的方法是，将数据类型更改`di`为`float`

```
di = (d * 100) / i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T19:16:20.517

C# 有一种奇怪的数学运算方式，因为你的数字被转换为整数，你只能用它们做整数数学。您最初需要将它们设置为浮点数或双精度数，以便您可以进行浮点数学运算或任何需要计算中小数位的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T20:29:17.880

甚至 dis.text = 1.5

```
private void net_prcTabChanged(object sender, EventArgs e)
    {
        double d;
        double di;
        double i;
        d = Convert.ToDouble(dis.Text);
        i = Convert.ToDouble(prc.Text); 
        di = -((d * 100.0) / i ) + i;
        net_prc.Text = di.ToString();
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-03T19:16:05.757

您`d / 100`的除法 是整数的除法，它返回一个整数，可能是`0`（零）。您的示例肯定是这种情况`d = 2`。

**加法：**如果你真的想用整数来做这个（而不是改变`decimal`或`double`像许多其他答案推荐的那样），考虑改变子表达式

```
((d / 100) * i) 
```

进入

```
((d * i) / 100) 
```

因为将除法作为最后一次操作会给您带来更好的精度。使用您的示例的数字`d=2`and `i=100`，第一个子表达式将给出`0*100`or `0`，而更改后的子表达式`200/100`将产生 which `2`。但是，您不会四舍五入到最接近的整数；相反，您将被截断（小数部分被丢弃，无论它是否接近`1`）。

# android - 如何在android中通过GPS获取坐标？

> ID：15189662
> 
> 赞同：0
> 
> 时间：2013-03-03T19:12:54.767
> 
> 标签：android, gps

我需要通过 GPS 获取坐标，并在[这里](http://www.firstdroid.com/2010/04/29/android-development-using-gps-to-get-current-location-2/)和[这里](http://www.hrupin.com/2011/04/android-gps-using-how-to-get-current-location-example)找到了一些教程，但没有一个可以帮助我。我只想获取经度和纬度并在 TextView 中显示它们，而不是通过在线地图。任何想法都可以帮助我。感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:23:19.617

您还需要修改 androidmanifest；试试[这个](http://www.vogella.com/articles/AndroidLocationAPI/article.html)教程。

# c - 使用 DFS 计数 SCC

> ID：15189666
> 
> 赞同：0
> 
> 时间：2013-03-03T19:13:30.830
> 
> 标签：c, algorithm, graph, version-control, depth-first-search

我必须在 C 中创建一个编程代码，以使用深度优先搜索计算五个最大的强连接组件的大小数量。我使用 Ubuntu 12.04 进行编程。我想出了以下代码，它在终端中显示的结果是：`Segmentation Fault (core dumped)`那是在尝试查看我放入`graph[MaxVer][MaxVer][2]`函数调用时发生的情况。

代码

* * *

```
#include "stdio.h"  
#include "stdlib.h" 
#define MaxVer 875714 

long int t=0;
long int visited[MaxVer][2]={0};
long int s=NULL;
long int leader[MaxVer];
long int time[MaxVer];
int count;

main()  
{  
    long int i,j,k;  
    long int Graph[MaxVer][MaxVer][2]={0};  
    FILE *fp;

    fp=fopen("SCC.txt","r");

    fscanf(fp,"%ld",&j);
    for(i=1;i<=875714;i++)
        while(i==j)
        {
            fscanf(fp,"%ld",&k);
            Graph[i-1][k-1][0]=1;
            fscanf(fp,"%ld",&j);
        }
    fclose(fp);

    DFS_loop(Graph,0);
    for(i=0;i<MaxVer;i++)
        for(j=0;j<MaxVer;j++)
            if(Graph[(time[i])][(time[j])][0]=1)
                Graph[i][j][1]=1;
    DFS_loop(Graph,1);
}

DFS_loop(long int graph[][][],long int i)
{
    long int node;
    for(node=MaxVer;node>0;node--)
        if(!visited[node-1][i])
        {
                s=node;
                DFS(graph,i,node);
                if(i==1&&count<5)
                    printf("%ld",t);
        }
}

DFS (long int graph[][][],long int i,long int node)
{
    long int node_2;
    visited[node-1][i]=1;
    leader[node-1]=s;

    for(node_2=1;node_2<=MaxVer;node_2++)
        if(graph[node_2-1][node-1][i]==1)
            if(!visited[node_2-1][i])
            {
                DFS(graph,i,node_2);
                if(i==1&&count<5)
                {
                    t++;
                    count++;
                }
            }
    if(i==0)
    {
        t++;
        time[t-1]=node;
    }
} 
```

* * *

结尾

谁能告诉我代码中的问题是什么？编译时的主要问题发生在调用 DFS 和 DFS_loop 期间。它说“数组类型具有不完整的元素类型”。是的，我想告诉你输入是在一个文件中给出的，有 875714 个顶点。输入的示例是 2 74657，其中 2 是尾部，74657 是有向边的头部。

另外，如果有人可以提出更好的程序，请提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:37:05.837

在 之前制作适当的函数原型`main()`，并指定第 2 和第 3 维的大小（使用`graph[MaxVer][MaxVer][]`代替`graph[][][]`）

# ruby-on-rails - Liquid Ruby 模板引擎可以处理 Rails 表单吗？

> ID：15189669
> 
> 赞同：4
> 
> 时间：2013-03-03T19:13:36.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, liquid, ruby-on-rails-4

我一直在寻找一个模板引擎，让用户可以轻松地在线创建课程和练习。

似乎[Liquid](http://liquidmarkup.org/)是 Rails 中最受欢迎的。Liquid 用户可以轻松创建 rails 表单吗？

通常我在 ERB 中创建表单：

```
<%= form_for(@lesson) do |f| %>
  <% if @lesson.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@lesson.errors.count, "error") %> prohibited this lesson from being saved:</h2>

      <ul>
      <% @lesson.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div>lots of fields</div>
<% end %> 
```

Rails 会自动插入 CSRF 保护内容。我可以对 Liquid 做同样的事情吗？我可以在 Liquid 中创建过滤器、标签和/或块来模拟 Rails 表单标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:32:56.077

您可以使用 Liquid 注册您自己的标签块，但它并不是开箱即用的。

如果您查看[文档](https://github.com/Shopify/liquid/wiki/Liquid-for-Programmers)，您会注意到您可以创建自己的标签块。

您可以注册自己的标签块

```
class LiquidForm < Liquid::Block
  def initialize(tag_name, markup, tokens)
     super
  end

  def render(context)
    form_tag("/hello_word") do 
      input_tag "hello"
    end
  end
end

Liquid::Template.register_tag('liquid_form', LiquidForm) 
```

然后用液体解析你想要的文本

```
text = " {% liquid_form %} Form content {% endliquid_form %} "
@template = Liquid::Template.parse(text) 
```

# c# - 如何在 C# 中处理/转换“”

> ID：15189673
> 
> 赞同：0
> 
> 时间：2013-03-03T19:13:44.517
> 
> 标签：c#

在 C# Convert.ToInt32() 和 Convert 类的任何方法中都可以处理空值，但所有这些方法都不能将“”作为输入处理。抛出错误“输入字符串格式不正确”有什么方法可以将“”处理/转换为其特定值？喜欢

```
Convert.ToInt32("") convert to 0
Convert.ToDecimal("") convert to 0.0 
```

不使用 if 条件

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:15:33.470

由于这个原因，C# 中的 POD 类有一个方法：

[Int32.TryParse](http://msdn.microsoft.com/en-gb/library/system.int32.tryparse.aspx)

你甚至可以编写一个扩展方法来使这对你更容易：

```
public static class Extensions {
    public static decimal MyDecimalParse(this string val) { 
        decimal ret = decimal.Zero;
        decimal.TryParse(val, out ret);
        return ret;
    }
} // eo class extension 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:18:59.320

尝试[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)

```
int i;
bool b = int.TryParse("", out i);
Console.WriteLine(b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:22:18.087

框架中没有任何内在的东西可以为您执行此操作。对于整个社区来说，将“”理解为您希望的默认为 0 或 0.0 可能没有意义。我建议您编写自己的方法来执行您特别想要的操作。

大意是：

```
public class MyConvert
{
    public static int ToInt32(string input)
    {
        return String.IsNullOrEmpty(input) ? 0 : Convert.ToInt32(input);
    }
} 
```

我意识到您不想进行 if 检查，但您必须以一种或另一种方式检查它（通过检查 .IsNullOrEmpty 或 .TryParse），因此将其抽象为您自己的转换方法至少意味着您没有每次都这样做。

# ruby - Watir 的 Ruby 线程

> ID：15189678
> 
> 赞同：6
> 
> 时间：2013-03-03T19:14:25.193
> 
> 标签：ruby, multithreading, watir

我编写了几个类来控制我想如何处理多个网站，两者都使用类似的方法（即登录、刷新）。每个类都打开自己的 WATIR 浏览器实例。

```
class Site1
    def initialize
         @ie = Watir::Browser.new
    end
    def login
         @ie.goto "www.blah.com"
    end
end 
```

没有线程的主代码示例如下

```
require 'watir'
require_relative 'site1'

agents = []
agents << Site1.new

agents.each{ |agent|
     agent.login
} 
```

这工作正常，但在当前代理完成登录之前不会移动到下一个代理。我想结合多线程来处理这个，但似乎无法让它工作。

```
require 'watir'
require_relative 'site1'

agents = []; threads = []
agents << Site1.new

agents.each{ |agent|
     threads << Thread.new(agent){ agent.login }
}

threads.each { |t| t.join } 
```

这给了我错误：未知属性或方法：`navigate`。HRESULT 错误代码：0x8001010e。应用程序调用了为不同线程编组的接口。

有谁知道如何解决这个问题，或者如何实现类似的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T00:17:51.890

对此不太确定，但这是使用线程的摇摆。

```
require 'thread'
  threads = []                # Setting an array to store threaded commands
  c_thread = Thread.new do    # Start a new thread
    login                     # Call our command in the thread
  end
  threads << c_thread 
```

# java - Java中是否有heredoc替代品（heredoc as PHP）？

> ID：15189679
> 
> 赞同：20
> 
> 时间：2013-03-03T19:14:29.853
> 
> 标签：java, php, readfile, heredoc

对于 JAVA 开发，我需要使用诸如“\r\t\n <>”之类的字符串写入文件，因为从 Java 中我想编写一个 PHP 文件。如果你不明白看这个例子：

```
BufferedWriter buffW = new BufferedWriter(fileW);
            buffW.write("<?php\n\n\tclass MyClass {\n\tpublic function test()\n}\n}\n?>"); 
```

这是一个混乱的代码，我想写一个干净的 PHP 可以做，但在 Java 上找不到替代方式作为示例：

```
 <?php
$mystring = <<<EOT
    This is some PHP text.
    It is completely free
    I can use "double quotes"
    and 'single quotes',
    plus $variables too, which will
    be properly converted to their values,
    you can even type EOT, as long as it
    is not alone on a line, like this:
EOT;
?> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T19:18:49.593

> `heredoc`Java中是否有等价物？

`heredoc`不， Java 编程语言中没有直接的替代方案。

检查这个类似的[问题](https://stackoverflow.com/questions/10806973/working-with-long-strings-heredocs-in-java-the-readable-approach)。

# ios - 在我的视图控制器中可以看到自定义类中的对象，尝试使用 CLGeocoder 创建 locationManager

> ID：15189680
> 
> 赞同：1
> 
> 时间：2013-03-03T19:14:33.173
> 
> 标签：ios

大家下午好，

我正在尝试完成有关 locationManager 和 CLGeocoder 的教程，但无法理解它们如何通过类相互交互。

为了解释，我按照教程显示了当前位置的工作。现在我试图让 CLGeocoder 返回关于该位置的信息，但我遇到了麻烦，因为 locationManager 在不同的类中。我的问题是理解自定义类以及视图控制器如何将它们联系在一起。

到目前为止，这是我的代码。

应用代理.h

```
#import <UIKit/UIKit.h>
#import "LocationGetter.h"
#import <UIKit/UIKit.h>
#import "LocationGetter.h"

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (retain, nonatomic) UIWindow *window;

@property (retain, nonatomic) ViewController *viewController;

@property (nonatomic, strong) CLLocation *lastKnownLocation;

@end 
```

appdelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:       (NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController"     bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    self.locationGetter = [[LocationGetter alloc] init];
    self.locationGetter.delegate = self;
    [self.locationGetter startUpdates]; 
```

类 locationgetter.h

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>

@protocol LocationGetterDelegate <NSObject>
@required
- (void) newPhysicalLocation:(CLLocation *)location;
@end

@interface LocationGetter : NSObject

-(void)startUpdates;

@property (nonatomic, weak) id<LocationGetterDelegate>delegate;

@end 
```

locationgetter.m

```
#import "LocationGetter.h"
#import <CoreLocation/CoreLocation.h>

@interface LocationGetter () <CLLocationManagerDelegate>

@property (nonatomic, strong) CLLocationManager *locationManager;

@end

@implementation LocationGetter
//@synthesize geoCoder;

bool didUpdate = NO;

-(void) startUpdates{
    NSLog(@"Starting Location Updates");

    if (self.locationManager == nil)
        self.locationManager = [[CLLocationManager alloc]init];
    self.locationManager.delegate = self;

    self.locationManager.desiredAccuracy = kCLLocationAccuracyKilometer;
    [self.locationManager startUpdatingLocation];

}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Your location could not be determined." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];
}

// Delegate method from the CLLocationManagerDelegate protocol.
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    if (didUpdate)
        return;

    didUpdate = YES;
    // Disable future updates to save power.
    [manager stopUpdatingLocation];

    // let our delegate know we're done
    [_delegate newPhysicalLocation:newLocation];

}

@end 
```

现在问题来了……

我需要在某个地方放入 CLGeocoder 属性，以及启动 CLGeocoder 的按钮的操作。我试着把它放在视图控制器中

```
@property (strong, nonatomic) IBOutlet CLGeocoder *geoCoder;

- (IBAction)geoCodeLocation:(id)sender; 
```

这在 viewcontroller.m

```
- (IBAction)geoCodeLocation:(id)sender {
    NSLog(@"hello %@,", sender); 
[self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler: 
 ^(NSArray *placemarks, NSError *error) {
} 
```

但是按照我的方式，找不到locationManager。我猜是因为在 AppDelegate.M 中找到了位置。这是我的问题，我不明白在视图控制器中如何才能看到位置。我来自 ac# 背景，我只会传递一个变量，或者创建一个全局变量。

有人可以解释在 IOS 中通信对象的最佳方式吗？如果我需要更好地解释自己，请告诉我。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:25:33.837

我不知道您的要求是什么，但是如果您只需要在应用程序的一个视图控制器中执行位置操作，我会省去`LocationGetter`and`LocationGetterDelegate`类，而将其`CLLocationManager`作为 ivar`ViewController`并`CLLocationManagerDelegate`在`ViewController`.

如果你这样做，你就消除了访问`CLLocationManager`应用程序委托的问题，所以你可以这样做：

```
[self.geocoder reverseGeocodeLocation: self.locationManager.location completionHandler: 
^(NSArray *placemarks, NSError *error) { //completion stuff
}]; 
```

Apple 在他们的“GeocoderDemo”演示项目中执行此操作，可[在此处](http://developer.apple.com/library/ios/#samplecode/GeocoderDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011097)获得- 事实上，他们`CLLocationManager`在每个选项卡 VC 中都有不同的实例！（3 个实例）。我知道你的方式更干净，更优雅 - 但对于一般的应用程序来说，它可能有点矫枉过正。通常越简单越好。

也就是说，如果您绝对必须`CLLocationManager`将应用程序委托包含在您的自定义类中，您可以将您的方法更改`ViewController.m`为

```
- (IBAction)geoCodeLocation:(id)sender 
{
   AppDelegate *delegate = [[UIApplication sharedApplication]delegate];
   //probably want some error handling here to deal with possibility that 
   //delegate.lastKnownLocation is nil.
   [self.geoCoder reverseGeocodeLocation: delegate.lastKnownLocation completionHandler: 
   ^(NSArray *placemarks, NSError *error) {
        //completion stuff
   }];
} 
```

（您显然需要`#import "AppDelegate.h"`在任何课程中这样做）。

小点：

- 制作`CLGeocoder`an没有意义`IBOutlet`，因为它不是 UI 元素。

- 你在你的应用程序委托中`#import`ing`UIKit`和`LocationGetter`两次。（我意识到这可能是一个错字！）。

# c# - 在 XAML 中将 ListBox 绑定到 ObservableCollection

> ID：15189681
> 
> 赞同：1
> 
> 时间：2013-03-03T19:14:36.120
> 
> 标签：c#, windows-phone-7, binding

当我设置 listBox1.ItemsSource = _collection; 时，我有一个 ListBox 和一个示例 ObservableCollection；在代码隐藏文件中，它工作正常，但是当我在 XAML 中这样做时：

```
 ItemsSource="{Binding Collection}" 
```

它不起作用。可能是什么问题？

在代码隐藏中我有

```
public ObservableCollection<FeedItem> Collection
{
    get { return _collection; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:19:36.043

很可能未设置 ListBox（或其任何父项）的 DataContext。将 DataContext 绑定到保存集合的对象，你应该很高兴。

# joomla - 登录 Joomla 时出现服务器错误

> ID：15189682
> 
> 赞同：0
> 
> 时间：2013-03-03T19:14:36.817
> 
> 标签：joomla

该站点刚刚移至新主机。一切正常，但是在尝试以管理员身份登录时，出现以下错误：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, webmaster@localhost and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

知道什么是错的吗？htcaccess 文件重命名为 htcaccess.txt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:13:12.307

如果您按照**[此处](http://docs.joomla.org/Copying_a_Joomla_website)**的所有内容进行操作，您会发现忘记的内容。

通常 configuration.php 是被遗忘的。另外我强烈推荐[Akeeba备份](https://www.akeebabackup.com/)。下次有什么要考虑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:12:05.777

我终于想通了。htaccess.txt 位于根目录中。我必须做的是重命名管理员文件夹中的 .htaccess 文件。

# html - CSS溢出在chrome中不起作用

> ID：15189687
> 
> 赞同：6
> 
> 时间：2013-03-03T19:15:23.000
> 
> 标签：html, google-chrome, css

我有一个“超级菜单”，其中包含一个应该在用户将鼠标移出菜单后隐藏的 .png。它在 IE 中按预期工作，但在 Chrome 中没有 - 它使图片的区域超出了菜单。

**根据 Sparkys 的建议，这里是** [JSFiddle](http://jsfiddle.net/T5NGD/)

这是我的开发文件夹的链接：

[http://libertyeaglearms.com/dev/](http://libertyeaglearms.com/dev/)

这是我的CSS的直接链接：

[http://libertyeaglearms.com/dev/assets/menu.css](http://libertyeaglearms.com/dev/assets/menu.css)

我认为这可能与第 6 行有关

```
.megaCreator a img{ 
  display:block;
  position:absolute;
  bottom:-50px;
  right:-50px;
  max-width:550px;
  outline:none;
  border:none;
  background:none; 
} 
```

但是，我不确定。

如果我需要直接在这里发布代码，我不确定问题出在哪里，所以通过实际工作表查看所有 css，我觉得会更好。

这是显示该问题的几个屏幕截图：

**鼠标悬停在这里：**

![在此处输入图像描述](../Images/0ae511f068a5e0f104f9472403591acd.png)

**这是鼠标：**

![在此处输入图像描述](../Images/66ed1d780e78461f5f34b53c828e3132.png)

注意：我没有在菜单中使用任何 javascript，以防出现问题！

谢谢 ：）

**这是工作代码**-> [JS FIDDLE](http://jsfiddle.net/6hWtN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:22:00.193

这些规则之一是覆盖溢出：

```
.megaMenu-fade > li.megaMenu-drop:hover > div,
.megaMenu-fade > li.megaMenu-drop:hover > ul,
.megaMenu-fade > li > ul li.megaMenu-drop:hover > ul,
.megaCreator > li.megaMenu-drop:hover > div,
.megaCreator > li.megaMenu-drop:hover > ul,
.megaCreator > li > ul li.megaMenu-drop:hover > ul 
```

看：

![在此处输入图像描述](../Images/e8ccb947bb7c45e32613cda53c57862e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:49:49.823

我使用它做了很多工作，我发现它与 css 无关，因为我将“img”标签显示更改为无（在部分图像保留在页面上之后），但它仍然保留。我的猜测是它必须是chrome图形渲染器问题，无法处理有时它会消失的事情。我的猜测是这将是 chrome 的错，而不是你的错，尽管你没有在该图像上放置一个元素（如 div），但问题仍然存在。

# google-apps-script - 更改单元格值时添加时间轴（谷歌脚本）

> ID：15189695
> 
> 赞同：0
> 
> 时间：2013-03-03T19:15:49.700
> 
> 标签：google-apps-script, google-sheets

我想要一个函数，当我的电子表格上的特定单元格值发生更改时输出时间线：

在单元格 A1 中是一个不时更改的值。当 A1 更改时，我希望将当前值添加到 B1 中。C1 显示值已更改的时间戳。

下次更改 A1 时，新值将显示在 B2 上，即 C2 上的时间戳。第三个变化是 B3/B4，第四个变化是 B4/C4，依此类推。

在我看来，这是每个常见的谷歌表单都具有的功能，但我不确定如何将其转换为自定义脚本。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:41:10.387

这是一个执行您想要的示例代码，您可以通过使用 push 或 unshift 选择将新值添加到 B 和 C 列的顶部还是底部...我更喜欢 unshift ，因为我在评论中给出了原因但这取决于你;-)

```
function timeline() {
  var sh = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet()
  if(sh.getActiveRange().getA1Notation()!='A1'){return}
  var last = lastRowinCol(sh,'B');
  var cellA = sh.getRange('A1').getValues();
  var colB = sh.getRange('B1:B'+last).getValues();
  var colC =  sh.getRange('C1:C'+last).getValues();
//  colB.unshift(cellA); // add on top
//  colC.unshift([new Date()]);
  colB.push(cellA); //add at the bottom
  colC.push([new Date()]);
  sh.getRange(1,2,colB.length,1).setValues(colB);
  sh.getRange(1,3,colC.length,1).setValues(colC);
}

function lastRowinCol(sh,col){
  var coldata = sh.getRange(col+'1:'+col).getValues();
  for(var c in coldata){if(coldata[c][0]==''){break}}
  return c
  } 
```

注意：还有其他方法可以实现这一点，但我认为这个非常“教学”......使用数组，子函数调用，批量读写......

编辑：我忘了提到您需要为该函数分配一个 onEdit 触发器以使其自动执行。

* * *

**编辑 2：**在下面 Mogsdad 非常相关的评论之后，我建议您`function lastRowinCol`用他的代码替换 for-next 循环，该代码向后迭代，以便它处理列中的空单元格。此外，他的代码有一个有趣的结构，因为循环限制和条件在同一个语句中。

```
function lastRowinCol(sh,col){
  var coldata = sh.getRange(col+'1:'+col).getValues();
  for (var c=coldata.length; (c) && coldata[c-1][0]==''; c--) {}
  return c
 } 
```

# gcc - Makefile 无故删除目标文件

> ID：15189704
> 
> 赞同：36
> 
> 时间：2013-03-03T19:16:30.620
> 
> 标签：gcc, makefile, g++

这是 Makefile 代码：

```
CC=gcc 
CXX=g++ 
OBJS=OMXComponent.o Event.o hello_jpeg.o JPEG.o OMXCore.o Locker.o Logger.o
BIN=hello_jpeg.bin

# include ../Makefile.include

CFLAGS+=-DSTANDALONE -D__STDC_CONSTANT_MACROS -D__STDC_LIMIT_MACROS -DTARGET_POSIX -D_LINUX -fPIC -DPIC -D_REENTRANT -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -U_FORTIFY_SOURCE -Wall -g -DHAVE_LIBOPENMAX=2 -DOMX -DOMX_SKIP64BIT -ftree-vectorize -pipe -DUSE_EXTERNAL_OMX -DHAVE_LIBBCM_HOST -DUSE_EXTERNAL_LIBBCM_HOST -DUSE_VCHIQ_ARM -Wno-psabi

LDFLAGS+=-L$(SDKSTAGE)/opt/vc/lib/ -lGLESv2 -lEGL -lopenmaxil -lbcm_host -lvcos -lvchiq_arm -lpthread -lrt -L../libs/ilclient -L../libs/vgfont

INCLUDES+=-I$(SDKSTAGE)/opt/vc/include/ -I$(SDKSTAGE)/opt/vc/include/interface/vcos/pthreads -I$(SDKSTAGE)/opt/vc/include/interface/vmcs_host/linux -I./ -I../libs/ilclient -I../libs/vgfont

all: $(BIN) $(LIB)

%.o: %.c
    @rm -f $@ 
    $(CC) $(CFLAGS) $(INCLUDES) -g -c $< -o $@ -Wno-deprecated-declarations

%.o: %.cpp
    @rm -f $@ 
    $(CXX) $(CFLAGS) $(INCLUDES) -g -c $< -o $@ -Wno-deprecated-declarations

%.bin: $(OBJS)
    $(CC) -o $@ -Wl,--whole-archive $(OBJS) $(LDFLAGS) -Wl,--no-whole-archive -rdynamic 
```

我不知道为什么，但突然当我调用我的 Makefile 时，它​​开始删除所有目标文件！！！它之前没有被删除，但最近在运行 Makefile 之后，这是我在控制台窗口中得到的：

```
 rm OMXCore.o JPEG.o OMXComponent.o Logger.o hello_jpeg.o Locker.o Event.o 
```

知道为什么它要删除我的目标文件吗？以及如何阻止 Make 删除它？更奇怪的是，它昨天没有删，今天就开始了，没有我做任何升级，也没有做任何改动！！！现在，当我对我的一个 src 文件进行小改动时，现在我必须等待很长时间才能再次重建所有其他目标文件，这不是必需的，而且会减慢我的速度。

我确保我在正确的目录中，我什至给了“make”一个完整的路径，以防它选择不同的 Makefile

make -f /my_full_path/Makefile

在 Makefile 运行时，我在另一个终端中执行“ls”，我注意到我正在正确地累积目标文件，如下所示：

```
-rw-rw-r-- 1 pi pi   1170 Mar  3 19:28 Makefile
-rw-r--r-- 1 pi pi 482052 Mar  3 19:30 OMXComponent.o
-rw-r--r-- 1 pi pi  19984 Mar  3 19:30 Event.o
-rw-r--r-- 1 pi pi  14688 Mar  3 19:30 hello_jpeg.o
-rw-r--r-- 1 pi pi 162260 Mar  3 19:31 JPEG.o
-rw-r--r-- 1 pi pi 215492 Mar  3 19:31 OMXCore.o
-rw-r--r-- 1 pi pi  76384 Mar  3 19:31 Locker.o
-rw-r--r-- 1 pi pi      0 Mar  3 19:31 Logger.o 
```

但是突然之间，在构建完所有内容之后，所有目标文件都被删除了！！！

而且，这是 Makefile 命令的输出：

```
pi@raspberrypi /opt/vc/src/hello_pi/hello_jpeg_v2 $ make -f /opt/vc/src/hello_pi/hello_jpeg_v2/Makefile 
g++ -g -DSTANDALONE -D__STDC_CONSTANT_MACROS -D__STDC_LIMIT_MACROS -DTARGET_POSIX -D_LINUX -fPIC -DPIC -D_REENTRANT -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -U_FORTIFY_SOURCE -Wall -g -DHAVE_LIBOPENMAX=2 -DOMX -DOMX_SKIP64BIT -ftree-vectorize -pipe -DUSE_EXTERNAL_OMX -DHAVE_LIBBCM_HOST -DUSE_EXTERNAL_LIBBCM_HOST -DUSE_VCHIQ_ARM -Wno-psabi -I/opt/vc/include/ -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmcs_host/linux -I./ -I../libs/ilclient -I../libs/vgfont -g -c OMXComponent.cpp -o OMXComponent.o -Wno-deprecated-declarations
g++ -g -DSTANDALONE -D__STDC_CONSTANT_MACROS -D__STDC_LIMIT_MACROS -DTARGET_POSIX -D_LINUX -fPIC -DPIC -D_REENTRANT -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -U_FORTIFY_SOURCE -Wall -g -DHAVE_LIBOPENMAX=2 -DOMX -DOMX_SKIP64BIT -ftree-vectorize -pipe -DUSE_EXTERNAL_OMX -DHAVE_LIBBCM_HOST -DUSE_EXTERNAL_LIBBCM_HOST -DUSE_VCHIQ_ARM -Wno-psabi -I/opt/vc/include/ -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmcs_host/linux -I./ -I../libs/ilclient -I../libs/vgfont -g -c Event.cpp -o Event.o -Wno-deprecated-declarations
g++ -g -DSTANDALONE -D__STDC_CONSTANT_MACROS -D__STDC_LIMIT_MACROS -DTARGET_POSIX -D_LINUX -fPIC -DPIC -D_REENTRANT -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -U_FORTIFY_SOURCE -Wall -g -DHAVE_LIBOPENMAX=2 -DOMX -DOMX_SKIP64BIT -ftree-vectorize -pipe -DUSE_EXTERNAL_OMX -DHAVE_LIBBCM_HOST -DUSE_EXTERNAL_LIBBCM_HOST -DUSE_VCHIQ_ARM -Wno-psabi -I/opt/vc/include/ -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmcs_host/linux -I./ -I../libs/ilclient -I../libs/vgfont -g -c hello_jpeg.cpp -o hello_jpeg.o -Wno-deprecated-declarations
g++ -g -DSTANDALONE -D__STDC_CONSTANT_MACROS -D__STDC_LIMIT_MACROS -DTARGET_POSIX -D_LINUX -fPIC -DPIC -D_REENTRANT -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -U_FORTIFY_SOURCE -Wall -g -DHAVE_LIBOPENMAX=2 -DOMX -DOMX_SKIP64BIT -ftree-vectorize -pipe -DUSE_EXTERNAL_OMX -DHAVE_LIBBCM_HOST -DUSE_EXTERNAL_LIBBCM_HOST -DUSE_VCHIQ_ARM -Wno-psabi -I/opt/vc/include/ -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmcs_host/linux -I./ -I../libs/ilclient -I../libs/vgfont -g -c JPEG.cpp -o JPEG.o -Wno-deprecated-declarations
g++ -g -DSTANDALONE -D__STDC_CONSTANT_MACROS -D__STDC_LIMIT_MACROS -DTARGET_POSIX -D_LINUX -fPIC -DPIC -D_REENTRANT -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -U_FORTIFY_SOURCE -Wall -g -DHAVE_LIBOPENMAX=2 -DOMX -DOMX_SKIP64BIT -ftree-vectorize -pipe -DUSE_EXTERNAL_OMX -DHAVE_LIBBCM_HOST -DUSE_EXTERNAL_LIBBCM_HOST -DUSE_VCHIQ_ARM -Wno-psabi -I/opt/vc/include/ -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmcs_host/linux -I./ -I../libs/ilclient -I../libs/vgfont -g -c OMXCore.cpp -o OMXCore.o -Wno-deprecated-declarations
g++ -g -DSTANDALONE -D__STDC_CONSTANT_MACROS -D__STDC_LIMIT_MACROS -DTARGET_POSIX -D_LINUX -fPIC -DPIC -D_REENTRANT -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -U_FORTIFY_SOURCE -Wall -g -DHAVE_LIBOPENMAX=2 -DOMX -DOMX_SKIP64BIT -ftree-vectorize -pipe -DUSE_EXTERNAL_OMX -DHAVE_LIBBCM_HOST -DUSE_EXTERNAL_LIBBCM_HOST -DUSE_VCHIQ_ARM -Wno-psabi -I/opt/vc/include/ -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmcs_host/linux -I./ -I../libs/ilclient -I../libs/vgfont -g -c Locker.cpp -o Locker.o -Wno-deprecated-declarations
g++ -g -DSTANDALONE -D__STDC_CONSTANT_MACROS -D__STDC_LIMIT_MACROS -DTARGET_POSIX -D_LINUX -fPIC -DPIC -D_REENTRANT -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -U_FORTIFY_SOURCE -Wall -g -DHAVE_LIBOPENMAX=2 -DOMX -DOMX_SKIP64BIT -ftree-vectorize -pipe -DUSE_EXTERNAL_OMX -DHAVE_LIBBCM_HOST -DUSE_EXTERNAL_LIBBCM_HOST -DUSE_VCHIQ_ARM -Wno-psabi -I/opt/vc/include/ -I/opt/vc/include/interface/vcos/pthreads -I/opt/vc/include/interface/vmcs_host/linux -I./ -I../libs/ilclient -I../libs/vgfont -g -c Logger.cpp -o Logger.o -Wno-deprecated-declarations
g++ -g -o hello_jpeg.bin -Wl,--whole-archive OMXComponent.o Event.o hello_jpeg.o JPEG.o OMXCore.o Locker.o Logger.o -L/opt/vc/lib/ -lGLESv2 -lEGL -lopenmaxil -lbcm_host -lvcos -lvchiq_arm -lpthread -lrt -L../libs/ilclient -L../libs/vgfont -Wl,--no-whole-archive -rdynamic
rm OMXCore.o JPEG.o OMXComponent.o Logger.o hello_jpeg.o Locker.o Event.o 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-03T21:17:47.820

这些文件被删除是因为`make`认为它们是“中间的”。当`make`形成一条规则链以产生先决条件时，它将中间链创建的所有文件视为“中间”，然后在创建目标时将其删除。请参阅GNU make 手册中的[链式规则](http://www.gnu.org/software/make/manual/html_node/Chained-Rules.html)。

在您的情况下，您可以通过两种方式防止这种情况：摆脱`%.bin`规则，这似乎是错误的，因为它说*所有* `.bin`文件都依赖于目标文件的固定列表，并将其替换为

```
$(BIN): $(OBJS)
        # as before 
```

或将目标文件标记为“次要”：

```
.SECONDARY: $(OBJS) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-09-29T16:52:45.130

只需添加：

```
.PRECIOUS: %.o 
```

这将告诉 make 中间文件也很宝贵

# three.js - 有什么好的初学者教程网站和学习three.js库的资源？

> ID：15189706
> 
> 赞同：2
> 
> 时间：2013-03-03T19:16:46.997
> 
> 标签：three.js, webgl

我本身不是编程初学者（如 C++ 或 Java），但我是 JavaScript 和 three.js 的初学者。我想为一个我想从事的项目学习three.js，但我不知道从哪里开始。我尝试深入研究 github 上的源代码，但其中很多内容有时会让人感到困惑，尤其是对于 JavaScript 新手而言。我想知道是否有任何教程、视频、书籍、网站等...涵盖了three.js 库的基础知识？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:23:28.733

尝试谷歌搜索，我相信你会发现很多:) 试试这个[http://www.aerotwist.com/tutorials/getting-started-with-three-js/](http://www.aerotwist.com/tutorials/getting-started-with-three-js/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T19:33:43.533

当您下载 Three.js 时，他们有大量的示例。为什么不使用那些？其中有近200个。

关于查看源代码，我知道您的感受，javascript 很古怪，并且没有真正完善的方法来做像继承这样简单的事情。但是，我不得不说 Three.js 写得非常非常好并且易​​于理解，如果有时间看看 javascript 大师如何写出好的 javascript，Three.js 就是它。它的布局非常好，没有太多的间接性，对象被很好地抽象，层次结构很有意义，方法就像它们听起来一样，不多也不少。

我建议首先拆分您的项目，调整最接近的示例来完成您项目的该部分将执行的操作。当您完成 3 或 4 个方面时，您就会对它有很好的感觉，并且可以通过寻找与您面临的每个问题相似的示例来构建您的项目。

然而，3D 编程并不简单。因此，您将处于双倍陡峭的学习曲线上。我在 Three.js 中发现的 3D 编程问题（与其他 3D javascript 库一样）与常规的 javascript 编程相比，很少有关于错误的反馈。所以很难知道出了什么问题。您需要习惯于调试 javascript。如果您的进度与我的一样，您最终将不得不将个别问题细化为可演示的小片段，您可以在堆栈交换方面寻求帮助。隔离问题并将其粘贴到[jsfiddle](http://jsfiddle.net). 最常见的错误来自需要配置的细微属性，例如，如果您绘制一个圆圈，您希望无论查看哪一侧都会显示它，但事实并非如此！然而，在这些情况下，关于堆栈溢出的快速问题会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T21:18:25.737

YouTube 上有一些优秀的初学者教程：[Three.js - YouTube](http://www.youtube.com/results?search_query=three.js%20%5BThree.js%20-%20YouTube%5D)

一个名叫 Nikita Severinov 的人做了一些非常好的介绍系列，但不幸的是它们只有俄语：

[WebGL Three.js - 太阳系教程系列](http://www.youtube.com/playlist?list=PL1iPwzIyAqwZQqy30SJHTHOffiRBIAyiX)

希望至少有一点帮助。

# twitter-bootstrap - 是否可以使用响应式引导程序使一个跨度与另一个跨度固定宽度距离？

> ID：15189708
> 
> 赞同：0
> 
> 时间：2013-03-03T19:16:56.610
> 
> 标签：twitter-bootstrap

我试图让一个跨度与另一个跨度保持固定宽度，同时仍使用响应式引导网格。

我在[shiftdd.com](http://www.shifteddd.com)上有网站。我试图让信息图标位于 10 英镑的文本旁边，并保持在右侧约 30 像素的固定距离。

任何帮助是极大的赞赏。

谢谢，

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:10:45.520

您是否有理由不将信息图标和 10 英镑放在同一跨度中，如下所示：http: [//jsfiddle.net/panchroma/CeZx5/](http://jsfiddle.net/panchroma/CeZx5/)？

**HTML**

```
<div class="row-fluid pagination-centered">
  <div class="span12">
     <h2 >£10 <span class="info-icon" title="A3 (297x420mm) 160GSM">i</span></h2>
  </div>
</div> 
```

**CSS**

```
.info-icon{
padding-left:50px;
} 
```

**更新**

价格以页面为中心的变体：http: [//jsfiddle.net/panchroma/CU6X5/](http://jsfiddle.net/panchroma/CU6X5/)

干杯!

# ruby - 如何访问 assoc 数组中的 assoc 数组

> ID：15189712
> 
> 赞同：0
> 
> 时间：2013-03-03T19:17:33.737
> 
> 标签：ruby, arrays, hash, multidimensional-array

我有以下代码：

```
def operation hash
  puts hash[:three][:three][:three]
end

operation :one => 'item', :two => [1,2,3], :three => [
    :one => 1,
    :two => 2,
    :three => [
        :one => 1,
        :two => 2,
        :three => [
            :test1,
            :test2
        ]
    ]
] 
```

我想访问项目 hash[:three][:three][:three] 以输出 [test1, test2]。
为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:27:00.783

A`Hash`需要被大括号包围`{}`，而不是括号`[]`，它们是为数组保留的。

与 PHP 不同，在 Ruby 中，这些是不同的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:26:49.907

尝试这个：

```
 def operation hash
  puts hash[:three][0][:three][0][:three]  #=> [:test1, :test2]
end 
```

请注意，每个`:three`键都有一个存储值的数组。

# c# - 如何在后面的代码中访问 C# Metro UI 中数据模板内的控件

> ID：15189715
> 
> 赞同：8
> 
> 时间：2013-03-03T19:17:51.180
> 
> 标签：c#, xaml, windows-8, windows-store-apps

我有一个 MediaElement，它位于 Flipview 的数据模板中，我想在后面的代码中访问名为“video”的 MediaElement，以便我可以通过按钮分配播放、暂停等属性，这是我的代码试图做：

```
 <FlipView
    x:Name="flipView"
    AutomationProperties.AutomationId="ItemsFlipView"
    AutomationProperties.Name="Item Details"
    TabIndex="1"
    Grid.RowSpan="2"
    ItemsSource="{Binding Source={StaticResource itemsViewSource}}">

    <FlipView.ItemContainerStyle>
        <Style TargetType="FlipViewItem">
            <Setter Property="Margin" Value="0,137,0,0"/>
        </Style>
    </FlipView.ItemContainerStyle>

    <FlipView.ItemTemplate>
        <DataTemplate>
            <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
                <ScrollViewer x:Name="scrollViewer" Style="{StaticResource VerticalScrollViewerStyle}" Grid.Row="1">
                    <Grid Margin="120,0,20,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="400" />
                            <ColumnDefinition Width="40" />
                            <ColumnDefinition Width="360" />
                            <ColumnDefinition Width="40" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Border BorderBrush="Black" BorderThickness="1" Width="350" HorizontalAlignment="Left" Grid.Row="0">
                            <MediaElement x:Name="Video" AutomationProperties.Name="Video" Source="/Assets/Big_Buck_Bunny.mp4" HorizontalAlignment="Center" VerticalAlignment="Stretch" Height="250" Width="350" AutoPlay="True" IsLooping="True" />
                        </Border>
                        <Border BorderBrush="Black" BorderThickness="1" Height="65" Width="350" HorizontalAlignment="Left" Grid.Row="1">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Button x:Name="playButton" Margin="0,0" Click="playButton_Click" Style="{StaticResource PlayAppBarButtonStyle}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                <Button x:Name="pauseButton" Margin="0,0" Click="pauseButton_Click" Style="{StaticResource PauseAppBarButtonStyle}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </ScrollViewer>
            </UserControl>
        </DataTemplate>
    </FlipView.ItemTemplate>
</FlipView> 
```

我如何达到预期目的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-03T21:57:27.410

尝试以下操作：

```
 private DependencyObject FindChildControl<T>(DependencyObject control, string ctrlName)
    {
        int childNumber = VisualTreeHelper.GetChildrenCount(control);
        for (int i = 0; i < childNumber; i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(control, i);
            FrameworkElement fe = child as FrameworkElement;
            // Not a framework element or is null
            if (fe == null) return null;

            if (child is T && fe.Name == ctrlName)
            {
                // Found the control so return
                return child;
            }
            else
            {
                // Not found it - search children
                DependencyObject nextLevel = FindChildControl<T>(child, ctrlName);
                if (nextLevel != null)
                    return nextLevel;
            }
        }
        return null;
    } 
```

然后从播放/暂停按钮按钮调用它：

```
 MediaElement media = FindChildControl<MediaElement>(this, "media") as MediaElement;
    media.Play(); 
```

[关于该主题的相关博客文章](http://pmichaels.net/2013/03/04/always-in-the-last-place-you-look-pragmatically-finding-controls-in-a-c-xaml-store-app/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:48:34.920

大约一年前，我写了一篇关于这个主题的博客文章。也许它会帮助你：[http ://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html](http://blog.jerrynixon.com/2012/09/how-to-access-named-control-inside-xaml.html)

要点是这样的。您必须通过可视化树进行解析以获取所有元素，然后您可以使用 LINQ 之类的东西来过滤结果并获取您的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-01T15:46:43.773

我将 Jerry 的解决方案扩展为更灵活、性能更好的解决方案，只获得所需的控件，并且在递归调用期间不创建中间列表。

您可以像这样简单地使用来获得控制权：

```
var myControl = AllChildren(parent, c => c.Name == "xxx").FirstOrDefault(); 
```

为此，您应该包括以下 AllChildren 功能：

```
 private List<Control> AllChildren(DependencyObject parent, Func<DependencyObject, bool> query,   List<Control> _List = null ) 
    {
        if (_List == null)
             _List = new List<Control>();

        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
        {
            var _Child = VisualTreeHelper.GetChild(parent, i);
            if (_Child is Control && query(_Child))
            {

                _List.Add(_Child as Control);
            }
            AllChildren(_Child, query, _List);
        }
        return _List;
    } 
```

# design-patterns - 观察者模式：避免不良的重入行为？

> ID：15189722
> 
> 赞同：5
> 
> 时间：2013-03-03T19:18:20.163
> 
> 标签：design-patterns

在实践中，观察者模式的实现如何避免由于重入导致的不良行为？

为了澄清“不良行为”，请考虑模式中的 Subject 在单线程同步实现中具有方法 MethodA() 和 MethodB()、事件 OnMethodA() 和 OnMethodB() 以及一个或多个观察者的情况：

*   Subject.MethodA() 被调用，
*   Subject 做了它对 MethodA() 所做的事情，然后为所有 Observers 调用 OnMethodA()，
*   Observer1 获取 OnMethodA() 事件，并调用 Subject.MethodB()，
*   Subject 做了它对 MethodB() 所做的事情，然后为所有 Observers 调用 OnMethodB()，

此时，我们正在为所有观察者调用 OnMethodB()，即使我们仍处于 OnMethodA() 通知的中间。这意味着列表中 Observer1 之后的任何观察者都会在“OnMethodA()”之前看到“OnMethodB()”——这是不好的行为。

*   Observer2（由对 Observer1 一无所知的开发人员编写）获取 OnMethodB() 事件，并调用 Subject.MethodA()，
*   …永远。Subject.MethodA() -> Observer.OnMethodA() -> Subject.MethodB() -> Observer.OnMethodB() -> Subject.MethodA() -> 等等……</li>

现在你要溢出堆栈了。那是不好的行为。

如果您从一开始就设计了异步的、基于队列的通知，或者在通知期间对 Subject 的调用抛出异常，您可以避免这种情况，这很容易理解。困扰我的是，我几乎从未将其视为实现该模式的最佳（或真正唯一）实践。你必须已经意识到这个问题，才能谷歌“观察者模式可重入”，并且该搜索的结果似乎只是遇到问题的人，而不是一本关于模式的书中的警告。

所以我错过了什么吗？ *在实践*中，观察者模式的实现如何避免由于重入导致的不良行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:14:05.097

至于避免重入，一个“修复”是设置一个标志`isResponding`，，`isUpdating`等等。检查它以避免重入。ps做到了`volatile`。

我*并不是*说这是一个优雅甚至是好的解决方案。但有时这是一条路要走。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:59:34.137

好吧，我之前从未听说过 Observable 模式的这个问题，所以为此 +1。另一方面，你为什么不看看 Java 是如何通过[Observer](http://docs.oracle.com/javase/6/docs/api/java/util/Observer.html)和[Observable在](http://docs.oracle.com/javase/6/docs/api/java/util/Observable.html)[java.util 包](http://docs.oracle.com/javase/6/docs/api/java/util/package-summary.html)中实现这个模式的，另一个注意是这个问题会在现实世界的应用程序中出现，因为这个模式的使用不当，看看这些来自 Martin Fowler 关于观察者模式的[陷阱。](http://martinfowler.com/eaaDev/OrganizingPresentations.html#observer-gotchas)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T19:27:18.290

这个关于无限递归的问题是观察者模式以及在 GUI 应用程序中使用模型视图控制器 (MVC) 模式需要注意的一个重要问题。在早期的工作中，我尝试使用使用标志的方法来防止这种情况，但我发现使用标志增加了复杂性，有时无法按预期工作。

我发现对我有用并且自信地使用了五年多的解决方案是通过确保当您的代码更新视图状态以响应模型更改事件时，打破控制器中的循环您没有观察通过更改视图生成的事件。如果这在您的情况下是不可能的，那么使用旗帜是您最好的选择。

一个简单的例子是一个模型，它的数据只有一个字符串，视图的文本字段和它们之间的控制器对象。如果用户修改了字符串，这会通知控制器告诉模型更新其字符串。模型更改通知控制器更新文本字段。这是你必须小心的地方。控制器需要能够区分由于用户操作或它自己更新视图内容而生成的视图中的事件。在某些情况下，您将能够简单地从视图中选择适当的事件来监听，在其他情况下，您需要让控制器跟踪它是否正在修改视图。

在此特定示例中，解决方案是让控制器在文本字段编辑完成时侦听来自文本字段的事件，而不是在文本字段中的文本被修改时。

# php - 是否应该在数据库级别处理唯一字段的验证？

> ID：15189724
> 
> 赞同：5
> 
> 时间：2013-03-03T19:18:23.377
> 
> 标签：php, mysql, sql, validation

我正在为我的 BSc 项目编写一个相当大的 Web 应用程序，并使用 MySQL 用 PHP 编写它。

创建 SQL 表时，我应该使用唯一字段吗？我问这个的原因是因为我正在将验证方法写入我的 PHP。例如，如果我想检查一个电子邮件地址是否已经存在于数据库中，我将首先创建一条 SQL 语句，查看是否返回了任何电子邮件地址，然后将初始 SQL 数据插入数据库。

如果我只插入初始 SQL 数据，则会在整个语句中引发错误，因为电子邮件地址必须是唯一的。

这是接近验证的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:24:54.037

嗯……这是两个完全不同的东西。通过在数据库中的列上设置约束（如唯一），您可以防止将错误的数据集插入到数据库中。这是确保数据一致性的基本内容。通过向您的应用程序添加验证，您可以添加另一层。在防止将错误的数据集插入数据库的同时，您主要创建方法来告诉用户他做错了什么。

你需要这两个。一般来说，唯一约束不应该是照顾数据库的唯一因素。建议还使用外键约束，如果适用，还可以使用更复杂的数据验证（自定义约束）。但是，当您使用 MySQL 时，您真正可以使用的并不是很多

尽可能多地去做，因为最终它会避免很多令人头疼的尝试去弄清楚为什么会发生一个特定的错误，直到你最终意识到你的数据库中的数据是错误的。这真的很痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:25:49.590

我不推荐这种方法，因为**只有数据库约束才能保证你的唯一性**。

如果有 2 个请求并行运行，则两者都可以接受相同的电子邮件地址，并且您有 2 个用户使用相同的电子邮件地址。

此外，您可能会在数据库上进行搜索过滤，因此在 MySQL 中您希望对电子邮件进行索引。因此，使该列独一无二并没有太大区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:35:12.157

在电子邮件地址的字段上创建**UNIQUE**约束是最好的方法，因为它具有高选择性，但请确保您还将字段设置为**NOT NULL**，

我发现使用约束会好很多，但您也可以通过查询来完成，例如：

```
SELECT COUNT(*) FROM table WHERE email = '$email' 
```

有关该主题的更多信息：[mysql 5.0 索引 - 唯一与非唯一](https://stackoverflow.com/questions/388982/mysql-5-0-indexes-unique-vs-non-unique)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T19:26:14.423

是的，数据库应该检查数据是否正确。数据库保存数据，无论它们是如何到达那里的。有时您可能会使用另一个应用程序中的数据库，并且此应用程序也需要验证数据。在应用程序（前端和后端）和数据库级别检查数据是否正确更加安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T19:26:32.230

*通常，这是确定代码应该*在哪里的情况。这是[Dijkstra 的“关注点分离”的](http://en.wikipedia.org/wiki/Separation_of_concerns)一个例子。

鉴于使字段唯一意味着您：

`Don't need to write validation code, ergo ultimately you write less code`

`The validation for values in the database, is in a logical place; bound to the database!`

这是数据建模的问题。只需问自己一个问题“这段代码在哪里有意义？”。在我看来，在数据库中使用唯一值是正确的方法。它将验证从您的 PHP 代码中抽象出来，这意味着您可以更改它而无需更改任何核心模型逻辑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T19:28:35.537

验证应该在客户端执行（例如javascript），因为它通常会提供更好的用户体验。它应该在服务器端使用，因为客户端可以被绕过。并且应该在数据库上强制执行，因为任何未对数据库强制执行的约束都不是约束……这只是一个建议。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-03T19:32:41.427

然后有一天，您决定从 MySQL 切换到其他数据库，并且您的所有“验证”不再存在（例如切换到 MongoDB 之类的数据库）。

请不要这样做 - 在应用程序级别进行。它很简单，版本控制，可测试等。

无论如何 - 在 MySQL 中创建您的唯一索引，但我不会单独依赖它。

# mysql - mysqldump，所有数据，包括用户和权限

> ID：15189726
> 
> 赞同：0
> 
> 时间：2013-03-03T19:18:49.367
> 
> 标签：mysql, windows, mysqldump

我想将我的 mysql 服务器更新到最新版本。为此，我正在尝试使用 mysqldump。我想包括所有数据库、所有用户以及这些用户的所有权限。基本上是整个备份和恢复，但要更新到 MySQL 版本（Windows 下的 MySQL，版本 5.1.41 到 5.6.x）

像这样的东西似乎转储所有数据库： mysqldump -h host -u root -pmypassword --add-drop-database --routines --all-databases > all-dbs.sql （注意我需要 isam 和 innodb 数据库）

但是当我使用 MySQL Workbench、Data Import 加载生成的脚本时，它似乎根本没有恢复用户。

谢谢！

# c# - C#使用指针划分整数数组

> ID：15189737
> 
> 赞同：1
> 
> 时间：2013-03-03T19:19:45.140
> 
> 标签：c#, arrays, pointers, integer

所以我有一个快速排序算法，我必须将我的整数数组分成两部分，然后递归调用这两个数组。

```
partition(array,lower);
partition(&array[lower + 1], array.Length - lower - 1); 
```

但是即使我尝试将不安全的代码添加到分区类，c# 也不会接受该代码，所以我想知道必须做些什么才能使其正常工作？

也许我可以在不使用指针的情况下修复它，但我想学习，所以每次遇到这样的问题时，我都不必为它更改整个代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:29:42.450

林克呢？

```
array.Take(lower);
array.Skip(lower); 
```

[你会喜欢的](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:34:17.120

轻松创建`SubArray`的方法`Array`

```
 private static void Main()
    {

        int[] array = Enumerable.Range(1, 10).ToArray();
        int lower = 5;
        int[] array1 = array.SubArray(0, lower);
        int[] array2 = array.SubArray(lower, array.Length - lower);
    }

    public static T[] SubArray<T>(this T[] source, int sourceIndex, int length)
    {
        T[] result = new T[length];
        Array.Copy(source, sourceIndex, result, 0, length);
        return result;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:26:00.547

要使用不安全的代码，您需要两件事：

1.  [`unsafe`用关键字](http://msdn.microsoft.com/en-us/library/chfa2zb8%28v=vs.71%29.aspx)标记不安全的代码（正如你所说的那样）
2.  [通过配置适当](http://msdn.microsoft.com/en-us/library/ct597kb0%28v=vs.80%29.aspx)的设置将项目编译为不安全

# linq-to-sql - 无法在 Windows Phone 应用程序中向本地数据库添加值

> ID：15189738
> 
> 赞同：0
> 
> 时间：2013-03-03T19:19:52.680
> 
> 标签：linq-to-sql, windows-phone-8, .net, local-database

我正在尝试为 Windows Phone 8 创建一个数据库应用程序。当我尝试在数据库的一个表中添加一个新表条目时，我收到这样的错误。

```
 {System.InvalidCastException: Could not convert from type 'System.Byte[]' to type 'System.String'.
   at System.Data.Linq.DBConvert.ChangeType(Object value, Type type)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DoResultSetAutoSync(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DoResultSetInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges()
   at CygnusModel.ViewModel.CygnusViewModel.AddNewSem(CygSem NewCygSem)
   at Cygnus.AddSemView.Save_sem(Object sender, EventArgs e)
   at Microsoft.Phone.Shell.ApplicationBarItemContainer.FireEventHandler(EventHandler handler, Object sender, EventArgs args)
   at Microsoft.Phone.Shell.ApplicationBarIconButtonContainer.ClickEvent()
   at Microsoft.Phone.Shell.ApplicationBar.OnCommand(UInt32 idCommand, Boolean isButton)
   at Microsoft.Phone.Shell.Interop.NativeCallbackInteropWrapper.OnCommand(UInt32 idCommand, Boolean isButton)} 
```

这是我使用的代码

```
if (CygSemName.Text.Length > 0)
        {
            CygSem NewCygSem = new CygSem
            {
                SemName = (string)CygSemName.Text,
                SemStart = (DateTime)CygSemStart.Value,
                SemEnd = (DateTime)CygSemEnd.Value
            };

            App.ViewModel.AddNewSem(NewCygSem);

            if (NavigationService.CanGoBack)
            {
                NavigationService.GoBack();
            } 
```

有人可以帮我解决这个问题吗？请记住，我是 c# 和 Windows Phone 开发的新手。

视图模型：

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;

//Includes DataModel Classes
using CygnusModel.Model;

namespace CygnusModel.ViewModel
{
    public class CygnusViewModel : INotifyPropertyChanged
    {
        private CygDataContext CygDb;

        //Class Constructor Creating the connection between Model & View
        public CygnusViewModel(string CygDataConnectionString)
        {
            CygDb = new CygDataContext(CygDataConnectionString);
        }

        //Save changing Method
        private void CygSaveChanges()
        {
            CygDb.SubmitChanges();
        }

        //Contains Change tracking INotify Events
        #region INotifies

        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        #endregion

        //All The Semesters
        private ObservableCollection<CygSem> _allSems;
        public ObservableCollection<CygSem> AllSems
        {
            get
            {
                return _allSems;
            }
            set
            {
                _allSems = value;
                NotifyPropertyChanged("AllSems");
            }
        }

        //All The Subjects
        private ObservableCollection<CygSubs> _allSubs;
        public ObservableCollection<CygSubs> AllSubs
        {
            get
            {
                return _allSubs;
            }
            set
            {
                _allSubs = value;
                NotifyPropertyChanged("AllSubs");
            }
        }

        //All The Lectures
        private ObservableCollection<CygLect> _allLects;
        public ObservableCollection<CygLect> AllLects
        {
            get
            {
                return _allLects;
            }
            set
            {
                _allLects = value;
                NotifyPropertyChanged("AllLects");
            }
        }

        //All The Exams
        private ObservableCollection<CygExam> _allExam;
        public ObservableCollection<CygExam> AllExam
        {
            get
            {
                return _allExam;
            }
            set
            {
                _allExam = value;
                NotifyPropertyChanged("AllExam");
            }
        }

        //All The Instructors
        private ObservableCollection<CygInst> _allInsts;
        public ObservableCollection<CygInst> AllInsts
        {
            get
            {
                return _allInsts;
            }
            set
            {
                _allInsts = value;
                NotifyPropertyChanged("AllInsts");
            }
        }

        //All The Holidays
        private ObservableCollection<CygHoli> _allHolis;
        public ObservableCollection<CygHoli> AllHolis
        {
            get
            {
                return _allHolis;
            }
            set
            {
                _allHolis = value;
                NotifyPropertyChanged("AllHolis");
            }
        }

        //All the lectures of today
        private ObservableCollection<CygLect> _todayLect;
        public ObservableCollection<CygLect> TodayLect
        {
            get
            {
                return _todayLect;
            }
            set
            {
                _todayLect = value;
                NotifyPropertyChanged("TodayLect");
            }
        }

        //All the Exams of today
        private ObservableCollection<CygExam> _todayExam;
        public ObservableCollection<CygExam> TodayExam
        {
            get
            {
                return _todayExam;
            }
            set
            {
                _todayExam = value;
                NotifyPropertyChanged("TodayExam");
            }
        }

        // Query database and load the all the data
        public void LoadAllAvailables()
        {

        }

        //Query DB and load all the semester
        public void LoadAllSems()
        {
            var Sems = from CygSem semes in CygDb.Semesters select semes;
            AllSems = new ObservableCollection<CygSem>(Sems);
        }

        //Query DB and load all Holidays
        public void LoadAllHolis()
        {
            var Holis = from CygHoli holid in CygDb.Holidays select holid;
            AllHolis = new ObservableCollection<CygHoli>(Holis);
        }

        //Query DB and load Subjects based on Semester
        public void LoadSemBasedSubs()
        {

        }

        //Query DB and load all the Lectures and exams per day
        public void LoadForTheDay()
        {

        }

        //Query the DB and load Lectures and Exams per Subject
        public void LoadForTheSub()
        {

        }

        //Add New Sem
        public void AddNewSem(CygSem NewCygSem)
        {
            CygDb.Semesters.InsertOnSubmit(NewCygSem);
            CygDb.SubmitChanges();
            AllSems.Add(NewCygSem);
        }

        //Add New Holiday
        public void AddNewHoli(CygHoli NewCygHoli)
        {
            CygDb.Holidays.InsertOnSubmit(NewCygHoli);
            CygDb.SubmitChanges();
        }

    }
} 
```

模型：

```
//Semester Class
    [Table]
    public class CygSem : INotifyPropertyChanging, INotifyPropertyChanged
    {
        //_version variable. Binary Datatype
        [Column(IsVersion = true)]
        private string _version;

        //Contains Change tracking INotify Events
        #region INotifies
        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(string PropertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
            }
        }

        public event PropertyChangingEventHandler PropertyChanging;

        private void NotifyPropertyChanging(string PropertyName)
        {
            if (PropertyChanging != null)
            {
                PropertyChanging(this, new PropertyChangingEventArgs(PropertyName));
            }
        }
        #endregion

        //Semester ID Variable
        private int _semID;
        [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity",
            CanBeNull = false, AutoSync = AutoSync.OnInsert)]
        public int SemID
        {
            get
            {
                return _semID;
            }
            set
            {
                NotifyPropertyChanging("SemID");
                _semID = value;
                NotifyPropertyChanged("SemID");
            }
        }

        ////Semester Name
        //private string _semName;
        //[Column]
        //public string SemName
        //{
        //    get
        //    {
        //        return _semName.ToString();
        //    }
        //    set
        //    {
        //        NotifyPropertyChanging("SemName");
        //        _semName = value.ToString();
        //        NotifyPropertyChanged("SemName");
        //    }
        //}

        //Semester Start Date
        private DateTime _semStart;
        [Column]
        public DateTime SemStart
        {
            get
            {
                return _semStart;
            }
            set
            {
                NotifyPropertyChanging("SemStart");
                _semStart = value;
                NotifyPropertyChanged("SemStart");
            }
        }

        //Semester End Date
        private DateTime _semEnd;
        [Column]
        public DateTime SemEnd
        {
            get
            {
                return _semEnd;
            }
            set
            {
                NotifyPropertyChanging("SemEnd");
                _semEnd = value;
                NotifyPropertyChanged("SemEnd");
            }
        }

        #region Subject Set
        // Define the entity set for the collection side of the relationship.
        private EntitySet<CygSubs> _subs;
        [Association(Storage = "_subs", OtherKey = "_cygSemID", ThisKey = "SemID")]
        public EntitySet<CygSubs> Subs
        {
            get
            {
                return this._subs;
            }
            set
            {
                this._subs.Assign(value);
            }
        }

        // Assign handlers for the add and remove operations, respectively.
        public CygSem()
        {
            _subs = new EntitySet<CygSubs>(
                new Action<CygSubs>(this.attach_sem),
                new Action<CygSubs>(this.dettach_sem)
                );
        }

        // Called during an add operation
        private void attach_sem(CygSubs _subj)
        {
            NotifyPropertyChanging("CygSubs");
            _subj.Semester = this;
        }

        // Called during a remove operation
        private void dettach_sem(CygSubs _subj)
        {
            NotifyPropertyChanging("CygSubs");
            _subj.Semester = null;
        }
        #endregion
    } 
```

数据上下文：

```
[Database]
public class CygDataContext : DataContext
{
    //Pass The Connection String to the base class.
    public CygDataContext(string ConnectionString)
        : base(ConnectionString)
    { }

    //Specify table Semesters
    public Table<CygSem> Semesters;

    //Specify table Subjects
    public Table<CygSubs> Subjects;

    //Specify table Lecture
    public Table<CygLect> Lectures;

    //Specify table Exams
    public Table<CygExam> Exams;

    //Specify table Instructors
    public Table<CygInst> Insts;

    //Specify table Holidays
    public Table<CygHoli> Holidays;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:07:47.957

似乎 CygSemName.Text 的类型是 byte[] 而不是 string 。检查您的数据模型以确保这一点。

# angularjs - AngularJS 中的每次模型更改后是否会触发 ng-show 中的表达式？

> ID：15189742
> 
> 赞同：3
> 
> 时间：2013-03-03T19:20:34.380
> 
> 标签：angularjs

我有这个简单的控制器标记

```
<div ng-controller="TestCtrl" ng-show="isVisible()">
    <input type="text" ng-model="smth"/><br>
    <span>{{smth}}</span>
</div> 
```

和控制器本身

```
function TestCtrl($scope, $log)
{
    $scope.smth = 'smth';

    $scope.isVisible = function(){
        $log.log('isVisible is running');

        return true;
    }
} 
```

为什么每次更改模型后（例如更改文本框中的一个字母）我可以`isVisible is running`在控制台中看到？这种情况没有问题，但我认为它会在大型应用中。我可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T19:48:10.377

Liviu T. 是对的。您无法避免`isVisible`在每次范围更改时都执行您的函数。如果 Angular 没有重新运行这个函数，那么它可能会与其余代码不同步（例如，如果它使用`$scope.smth`模型来解析返回值）。

考虑到这一点，您应该始终尝试使您的函数具有幂等性/纯（总是在给定相同输入的情况下返回相同的输出）和轻量级，因为诸如 ng-hide、ng-show、ng-class 和类似的指令将始终重新- 在每个 $digest 循环中评估分配给它们的表达式。

现在，如果您真的不希望它再次执行，您可以尝试一些用于缓存函数输出[的记忆技术。](http://addyosmani.com/blog/faster-javascript-memoization/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T19:42:58.070

这是正常的，因为这是 AngularJS 如何发挥其“魔力”的重要部分。这个答案有更多细节：[https ://stackoverflow.com/a/9693933/1418796](https://stackoverflow.com/a/9693933/1418796)

有不同的技术可以确保您不会遇到性能问题，但不是，通常您不能将这些表达式排除在评估之外。

# javascript - 如何刷新元素上的cufon？

> ID：15189745
> 
> 赞同：1
> 
> 时间：2013-03-03T19:21:02.357
> 
> 标签：javascript, fonts, cufon

我有这段代码来初始化 selectboxit 插件（将选择框转换为跨度等），它使用 Myriad 字体在选择框中显示内容。那很好。但是，当我选择某个选项时，它会从 Myriad 更改为 Verdana（默认字体）。如何刷新cufon？`Cufon.refresh();`不管用。

我的代码：

```
<script>

        $(document).ready(function(){

          $("select").selectBoxIt();

          Cufon.replace('input.btn-submit', { fontFamily: 'Myriad Pro' });

          Cufon.refresh();

        });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:55:37.117

每次下拉更改时尝试刷新 Cufont 字体。像这样：

```
 $(document).ready(function(){

          var select = $("select");

          select.selectBoxIt();

          refreshCufon();

          select.change(function() {

            refreshCufon();

          });          

          function refreshCufon() {

            Cufon.replace('input.btn-submit', { fontFamily: 'Myriad Pro' });

            Cufon.refresh();

          }

        });

</script> 
```

# ios - 在 Cocoa (ObjC) 中正确的 URL 编码

> ID：15189747
> 
> 赞同：-2
> 
> 时间：2013-03-03T19:21:20.077
> 
> 标签：ios, objective-c, xcode, nsstring, urlencode

我正在尝试对 NSString 进行 URL 编码，但似乎找不到正确的方法（我是 Obj C 的新手）。我一直在寻找，但找不到一个像样的答案。所以：

像 URL 一样对 NSString 进行编码的正确且现代的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:50:53.760

编码为 UTF-8：

```
NSString *strUTF8 = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# c++ - 使用 Pthread 捕获异常

> ID：15189750
> 
> 赞同：4
> 
> 时间：2013-03-03T19:21:36.877
> 
> 标签：c++, pthreads, openkinect

虽然这个问题不仅限于 OpenKinect 库，但它是我能想出的最好的例子来展示它。

在 OpenKinect 的 C++ Wrapper 中，每当出现问题时，它都会引发 runtime_error 异常。此示例来自 libfreenect.hpp。线程是在类的构造函数中创建的。

```
// Do not call directly, thread runs here
void operator()() {
    while(!m_stop) {
        if(freenect_process_events(m_ctx) < 0) throw std::runtime_error("Cannot process freenect events");
    }
}

static void *pthread_callback(void *user_data) {
    Freenect* freenect = static_cast<Freenect*>(user_data);
    (*freenect)();
    return NULL;
} 
```

我的问题很简单：是否有可能以某种方式捕获这些错误并处理它们？

通常，我会处理异常，或者重写代码：我不喜欢程序因为异常而崩溃，如果我知道它们可能会发生，我宁愿干净地处理它们。有一些库可以做类似的事情，我无法重写，因此我来问这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:14:13.850

您必须更清楚地定义线程的职责。我猜它通过某种管道或并发队列将一些消息提供给其他线程。在这种情况下，只需更改您的消息类以存储异常信息（std::exception_ptr）。在访问消息中的数据时，首先检查是否包含异常；如果是，则调用 std::rethrow_exception()。

std::future(); 中使用了类似的机制；要么你得到（）承诺的价值，要么在尝试这样做时引发异常，这来自另一个线程。搜索 std::async() 示例以查看它的实际效果。

# javascript - javascript中的依赖注入

> ID：15189752
> 
> 赞同：2
> 
> 时间：2013-03-03T19:21:45.697
> 
> 标签：javascript, performance, unit-testing, dependency-injection

我一直在使用 javscript 进行依赖注入，但有一些问题需要帮助

一个简单的例子是我有一个对话框模块，在页面上的多个地方使用，当用户与页面上的组件交互时，它会通过自定义消息提醒用户

```
function Dialog () {

}

Dialog.prototype.show = function () {

} 
```

这可以用在一个组件中，比如一个验证用户搜索的搜索控件，如果它为空，它会触发一个错误对话框。使用依赖注入我假设我会写：

```
function searchComponent (dialog) {
   this.dialog = dialog
}

searchComponent.prototype.validateSearch = function () {
    // validate search if invalid create error
    this.dialog.show();
}

var searchDialog = new Dialog();
var search = new searchComponent(searchDialog); 
```

然而，用户可能永远不需要搜索错误对话框，但我正在创建它的一个实例，以便我可以传递依赖关系，如果我在页面上有 100 个单独的对话框实例，我会构造这 100 次吗？这在性能上是不必要且昂贵的。

我宁愿做的是将对话框的构造延迟加载到需要的时候

```
searchComponent.prototype.validateSearch = function () {
  //validate search if invalid create error
  var dialog = new Dialog();
  dialog.show();
} 
```

现在我知道这会造成不利影响，其中之一是它对单元测试的影响，我很想了解我是否错过了某些东西或替代方法？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T19:25:49.130

JavaScript 函数是第一类对象。不是传入构造的对话框，而是传入对话框构造函数：

```
var search = new SearchComponent(Dialog); 
```

然后在你需要的时候更新它：

```
function SearchComponent(Dialog) {
  this.Dialog = Dialog;
}

SearchComponent.prototype.validateSearch = function() {
  var dialog = new this.Dialog();
  dialog.show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T20:52:13.467

受前面示例的启发，我创建了一个简单的[jsFiddle ，它利用一个名为](http://goo.gl/NburJ)[Syringe.js](http://syringejs.org)的小型库来展示如何通过预绑定`SearchComponent`构造函数来注入依赖项。

创建`SearchComponent`对象时，`validator`会自动提供依赖项（一个单独的组件，这里代替实际的对话框）。该依赖关系随后被该`validateSearch`方法使用。

`SearchComponent`这样做的好处是，当您创建每个对象实例时，您不必手头有任何依赖项。

此外，可以在创建对象`validator`后修改依赖关系`SearchComponent`，并且可以相应地更新依赖控件的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:29:42.533

要扩展@ChrisTavares 的出色解决方案，您也可以使用类似这样的方法在`Dialog`可能的内部进行依赖注入：

```
var foo = function () { return new Foo() }; // just an example
var search = new SearchComponent(function() {
    return new Dialog(foo());
}); 
```

在你的内部`SearchComponent`：

```
function SearchComponent(Dialog) {
    this.Dialog = Dialog;
}

SearchComponent.prototype.validateSearch = function () {
    var dialog = new this.Dialog();
    dialog.show();
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T18:08:29.937

我最近编写了一个名为 infect.js 的依赖注入库。看看吧，可能正是你要找的。[https://github.com/amwmedia/infect.js](https://github.com/amwmedia/infect.js)

# java - 模拟退火 N 皇后概率公式

> ID：15189760
> 
> 赞同：0
> 
> 时间：2013-03-03T19:22:31.850
> 
> 标签：java, n-queens, simulated-annealing

我在使用模拟退火算法来解决 n 个皇后问题时遇到了一些麻烦。基本上，我让它寻找更好的更多，它工作得很好，但是我运行一个公式来检查它是否应该采取“坏”的举动。据我了解，公式是 e^（板状态计算变化）/CurrentTemperature。该数字应与随机双精度或浮点数进行比较，如果随机数大于等式，则算法应采取“坏”举动。我遇到的问题是公式总是非常接近 1 或超过 1。这是我的一些代码（让我知道是否应该提供更多）：

```
temperature = n*100; //initializes starting temperature 
    currentTemp = n*100;
    int cooldown = n*2; //initializes cool down temperature 
    float examine = 0; //this is the change in board calculation
int cost = 1;
    boolean betterMove = false;
    queen = new int[n];
    int[][] board = graph; // generates a board of n size
    float ran = 0; //random float to compare to 
    double compareAgainst = 0; //formula variable 
cost = calculate(board, n); //calculates the cost 
while (cost > 0 && currentTemp > 0) 
    {

        // chooses a random queen to move that has a heuristic higher than zero
        int Q = rand.nextInt(n);
        while (queen[Q] == 0)
            Q = rand.nextInt(n);

        betterMove = false;

        for (int i = 0; i < n; i++) 
        {
            for (int j = 0; j < n; j++) 
            {
                if (board[i][j] == 1 && j == Q) 
                {
                    while (!betterMove)
                    {
                        int move = i;
                        while (move == i)

                        move = rand.nextInt(n); //pick a random move
                        tempBoard[i][j] = 0; //erase old position 
                        tempBoard[move][j] = 1; //set new position 

examine =  calculate(tempBoard, n) - calculate(board, n); //calculates the difference between the change in boards
                        ran = rand.nextFloat(); //generates random number to compare against 
                        compareAgainst = Math.pow(Math.E, (-examine / currentTemp)); //formula out of the book, basically is e^(change in board state divided by currentTemp)

                        if (calculate(tempBoard, n) < calculate(board, n))  //if this is a better move
                        {
                            for (int a = 0; a < n; a++)
                                for (int b = 0; b < n; b++)
                                    board[a][b] = tempBoard[a][b]; //set it to the board 

                            cost = calculate(board, n);
                            currentTemp -= cooldown; //cool down the temperature 

    betterMove = true;
                        }

else if(calculate(tempBoard,n) >= calculate(board,n)) //if this is a worse move
                        {

                          if(verbose == 1) //outputs whether or not this is a bad move and outputs function value and random float for simulated annealing purposes
                            {
                                System.out.println("This is a worse move");
                                System.out.println("The numbers for Simulated Annealing:");
                                System.out.println("Random number = " + ran);
                                System.out.println("Formula = " + compareAgainst);
                                System.out.println("Examine = " + examine);

                            }

                            if(ran > compareAgainst) //if the random float is greater than compare against, take the bad move

                            {

                                for (int a = 0; a < n; a++)
                                    for (int b = 0; b < n; b++)
                                        board[a][b] = tempBoard[a][b]; //take the move

                                cost = calculate(board, n);

                                currentTemp-= cooldown;

                                betterMove = true;
                            }

                            else //if not, do not take the move 
                            {

                                for (int a = 0; a < n; a++)
                                    for (int b = 0; b < n; b++)
                                        tempBoard[a][b] = board[a][b];

                                }

                            currentTemp-= cooldown;
                            betterMove = true;
                            }
                        }

                    }

                    i = n;
                    j = n;
                }
            }
        }

    } 
```

我尝试了很多方法，例如将检查变量设为负数或取棋盘状态之间差异的绝对值。此外，被调用的计算函数基本上是扫描棋盘并返回有多少皇后发生冲突，这是一个 int。让我知道是否需要更多说明。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T07:19:33.680

Maybe the formula and examples in this image from [OptaPlanner](http://www.optaplanner.org/)'s docs help too:

![enter image description here](../Images/97418e859024f0f8692c9e71854a535d.png)

# javascript - 获取 contenteditable div 中子 div 的 id

> ID：15189761
> 
> 赞同：2
> 
> 时间：2013-03-03T19:22:31.927
> 
> 标签：javascript, html, jquery, contenteditable, jquery-events

```
<div class="pad" id="test" contenteditable="true" spellcheck="false">
       <div id="a0" class="fif" > text0</div>
       <div id="a1" class="fif" >text1</div>
       <div id="a2" class="fif" >text2</div>
     </div> 
```

和上面的代码一样，有一个内容可编辑的**div**，里面有一些子 div。我需要一个 jQuery 来返回我正在**输入的子 div 的****id**。例如，如果我正在编辑**text1**它应该给我（返回）**“a1”**。

 ******如果我使用它可以按需要工作

```
var clicked;
$('#test').click(function(event){
   clicked = $(event.target);
   alert(clicked.attr('id'));
});` 
```

如此处所示

[http://jsfiddle.net/bernie1227/cK69Q/](http://jsfiddle.net/bernie1227/cK69Q/) **（即点击它返回 id="a1"）**但如果我使用它就不会以类似的方式工作

```
var clicked;
$('#test').keypress(function(event){
   clicked = $(event.target);
   alert(clicked.attr('id'));
}); 
```

如此处所示[http://jsfiddle.net/hari_OM/bLgkv/](http://jsfiddle.net/hari_OM/bLgkv/) **即在键入时返回“id=test”而不是“id=a1”**

我尝试使用`event.target.id`， `$(this).attr("id")`但他们返回**id="test"**而不是**id="a1"**，但我需要得到**"a1"**。我还尝试`onkeypress="funcname(this.id)"` 在子 div 中注入并从定义的函数中检索它，但它**不起作用**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:41:22.283

我编写了一个依赖于跟踪事件目标的解决方案，使用`event.target`：http: [//jsfiddle.net/bernie1227/cK69Q/](http://jsfiddle.net/bernie1227/cK69Q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T07:08:30.050

有没有调查过这个？DOMCharacterDataModified

```
$(document).on('DOMCharacterDataModified',  function( event ) {
    if($(event.target).parent().attr('id') === 'parentid') {
        console.log(
            'target',$(event.target),"\r"
        );  
    }
}); 
```******

# jquery - 带边框的 CSS 边框框会导致不必要的滚动条

> ID：15189764
> 
> 赞同：3
> 
> 时间：2013-03-03T19:22:40.890
> 
> 标签：jquery, css, jscrollpane

我做了这个例子[http://jsfiddle.net/drulia/34TKp/](http://jsfiddle.net/drulia/34TKp/)

基本上每当我`border`与`border-box`js scrollHeight 结合时，它就会变得比想象的大 1px。正如您在示例中看到的，父元素没有设置高度，它`overflow:auto;`只是出于视觉目的显示出于某种原因出现了滚动条。

如果您尝试评论`border-top`或`box-sizing`，您会注意到滚动条消失并`offsetHeight`变为`scrollheight`。

这真的让我发疯，到目前为止，我很高兴我找到了导致这个问题的 css 属性，但我很好奇，也许有人知道为什么事情会以这种方式发生？这发生在 FF、Chrome 和 IE10 上，我只是没有在示例中包含 FF 的前缀框大小。

**更新**

只是为了澄清-我在问为什么`box-sizing`与 with的组合`border`会导致这个问题？我是做错了什么还是有错误，或者这假设是预期的行为，我非常怀疑。

我确实知道一些简单的修复，比如更改溢出属性、删除边框等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T19:26:33.347

改变：

```
.jspPane {
    position: absolute;
    overflow: auto;
} 
```

到：

```
.jspPane {
    position: absolute;
    overflow: hidden;
} 
```

[http://jsfiddle.net/34TKp/2/](http://jsfiddle.net/34TKp/2/)

或者您可以保留 css 原样，但添加一个 height 属性到`.jspane`. 如果您不想设置高度，可以添加`display:table;`到`.jspane`

**更新**

只需阅读您的更新/编辑。我会说因为边框属性增加了高度/宽度。在你的情况下，你有 `border-top: 1px solid #e0e0e0;`for `.item`。您已将其设置为 35 像素的高度，但边框顶部在此基础上增加了 1 像素。如果您将高度从 34px 更改为 35px，那么这将解决它。在这里看到它：http: [//jsfiddle.net/34TKp/3/](http://jsfiddle.net/34TKp/3/)

# clojure - 如何从多方法中提取共享逻辑？

> ID：15189765
> 
> 赞同：3
> 
> 时间：2013-03-03T19:22:42.760
> 
> 标签：clojure

鉴于以下多种方法 -

```
(defmulti group-data :group-by)

(defmethod group-data :day
  [kv]
  (->> kv :data (group-by
                 (fn [kv]
                   (let [date (:time kv)]
                     (str
                      (month date) "-" (day date) "-" (year date)))))))

(defmethod group-data :month
  [kv]
  (->> kv :data (group-by
                 (fn [kv]
                   (let [date (:time kv)]
                     (str
                      (month date) "-" (year date)))))))

(defmethod group-data :year
  [kv]
  (->> kv :data (group-by
                 (fn [kv]
                   (let [date (:time kv)]
                     (year date)))))) 
```

在所有三种多方法中，唯一的区别是字符串函数。如何创建一个高阶函数，它只需要不同的 s 表达式来创建字符串？

还有减少重复代码的更好想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:10:39.103

有时你不需要多方法：

```
(def dmap {:day #(str (month %) "-" (day %) "-" (year %))
           :month #(str (month %) "-" (year %))
           :year #(year %)})

(defn group-data [kv]
  (->> kv :data (group-by
                 (fn [kv]
                   (let [date (:time kv)]
                     ((dmap (:group-by kv)) date)))))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T20:39:55.130

最简单的答案是定义一个包含所有共享逻辑的函数，该函数接受另一个用于填充不同“洞”的函数：

```
(defn helper [kv time-fn]
  (->> kv :data (group-by
                 (fn [kv]
                   (let [date (:time kv)]
                     (timefn data))))))

(defmulti group-data :group-by)

(defmethod group-data :day
  [kv]
  (helper kv (fn [date]
               (str (month date) "-" (day date) "-" (year date)))))

(defmethod group-data :month
  [kv]
  (helper kv
          (fn [date]
            (str (month date) "-" (year date)))))

(defmethod group-data :year
  [kv]
  (helper kv year)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T20:59:21.570

@amalloy 击败了我，但我们解决方案的结构有点不同，所以我也会添加我的。

与往常一样，当有重复的逻辑时，是时候考虑将其包装在一个函数中了。在我们的例子中，multimethod 可以返回使用的算法，而不是直接返回值`group-by`。然后，`group-data`可以写成一个常规函数，它使用多方法来确定它是*如何*分组的。

```
(defmulti group-by-algorithm :group-by)

(defn group-data
  [kv]
  (->> kv :data (group-by (group-by-algorithm kv))))

(defmethod group-by-algorithm :day
  [_]
  (fn [{date :time}] ; destructuring kv to save us a `let`
    (str
      (month date) "-" (day date) "-" (year date))))

 (defmethod group-by-algorithm :month
  [_]
  (fn [{date :time}]
     (str
       (month date) "-" (year date))))

(defmethod group-by-algorithm :year
 [_]
 (fn [{date :time}]
   (year date))) 
```

此解决方案允许算法返回任何内容，并且通常适用。但是，假设每个算法都基于日期返回一些用破折号分隔的字符串，我们可以通过引入一个函数来进一步减少样板文件，该函数采用产生值的函数并通过依次调用它们来产生破折号分隔的字符串。

```
(defmulti fns-to-group-by :group-by)

(defn group-by-algorithm
  [group-by-fns]
  (fn [{date :time}]
    (->>
      (map #(%1 date) group-by-fns) ; Call each function on the date
      (interpose "-") ; Separate by dashes
      (apply str)))) ; And mush them into a string

(defn group-data
  [kv]
  (->> kv :data (group-by (group-by-algorithm (fns-to-group-by kv)))))

(defmethod fns-to-group-by :day
  [_]
  [month day year])

 (defmethod fns-to-group-by :month
  [_]
  [month year])

(defmethod fns-to-group-by :year
 [_]
 [year]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T04:51:55.673

已经有 3 个答案并且没有提到宏 :) .. 我知道有明显的理由更喜欢高阶函数，但宏至少应该得到一个答案，所以这里是：

```
(defmacro group-by-template [date-symbol expression coll]
  `(group-by
      (fn [kv#]
        (let [~date-symbol (:time kv#)]
          ~expression)) ~coll))

(defmulti group-data :group-by)

(defmethod group-data :day
  [kv]
  (->> kv :data (group-by-template date (str (month date) "-" (day date) "-" (year date)))))

(defmethod group-data :month
  [kv]
  (->> kv :data (group-by-template date (str (month date) "-" (year date)))))

(defmethod group-data :year
  [kv]
  (->> kv :data (group-by-template date (year date)))) 
```

# android - 在活动中保持屏幕开启 - 不适用于 FLAG_KEEP_SCREEN_ON

> ID：15189767
> 
> 赞同：9
> 
> 时间：2013-03-03T19:22:56.013
> 
> 标签：android, android-activity, screen, usb-debugging

很长一段时间我以为我知道如何阻止屏幕进入睡眠模式，我只是在我的 Activity 中使用了这段代码：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

但是，我意识到这仅在我的手机处于“开发人员模式”时才有效，即启用/检查 USB 调试（设置 --> 开发人员选项 --> USB 调试）时。然后上面的代码确实停止了屏幕/设备进入睡眠状态。

如果不检查该调试，那么我的屏幕就会像没有明天一样进入睡眠状态。我在我的设备上运行 Android 4.04，并且

```
 android:minSdkVersion="12"
 android:targetSdkVersion="16" 
```

## 编辑

我已经用 Commonsware 的建议进行了测试，并将 setKeepScreenOn() 添加到代码中，所以它看起来像这样：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
View root = findViewById(android.R.id.content); 
if (root != null)
    root.setKeepScreenOn(true); 
```

我还检查了该代码是否实际执行，并且确实如此。但这并没有改变任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-26T17:08:26.117

我遇到了同样的问题，我在我的项目中使用了一个活动，而所有其他屏幕都是片段，然后我使用了`android:keepScreenOn="true"`主要活动。

请尝试使用它，如果你没有得到你想要的结果，请告诉我。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-11T07:51:35.580

在我的应用程序中真正有效的唯一解决方案是主应用程序类中的 WakeLock。不幸的是 SCREEN_BRIGHT_WAKE_LOCK 标志已被弃用！

```
public class MyApp extends Application {
    PowerManager.WakeLock screenOnWakeLock;
    @Override
    public void onCreate() {
        super.onCreate();
        PowerManager powerManager = (PowerManager) getSystemService(POWER_SERVICE);
        wakeLock =  powerManager.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK,"ScreenlockTag");
        wakeLock.acquire();
    }

    @Override
    public void onTerminate()
    {
        if (screenOnWakeLock != null && screenOnWakeLock.isHeld())
            screenOnWakeLock.release();
        super.onTerminate();
    }
} 
```

# android - 在设备上安装失败，调试（电池？？）

> ID：15189768
> 
> 赞同：2
> 
> 时间：2013-03-03T19:22:56.447
> 
> 标签：android, eclipse, failed-installation

我开始学习Android的开发。我有我的第一个代码，我想在带有 Eclipse 的 mi Samsung Galaxy S3 中尝试它，但是当我尝试在 Run Button 中尝试时，LogCat 中出现了下一个错误。

```
03-03 20:15:26.733: E/Watchdog(2301): !@Sync 389
03-03 20:15:42.308: E/MtpService(21129): In MTPAPP onReceive:android.intent.action.BATTERY_CHANGED
03-03 20:15:42.308: E/MtpService(21129): battPlugged Type : 2
03-03 20:15:42.368: E/WifiHW(2301): ##################### set firmware type 0 #####################
03-03 20:15:46.673: E/WifiHW(2301): ##################### set firmware type 0 ##################### 
```

它是什么类型的错误？我已经阅读了另一篇文章，但没有发现任何带有 battPlugged 错误的内容。

谢谢你的时间。

# java - JFreeChart ChartPanel 放大但恢复滑动

> ID：15189773
> 
> 赞同：1
> 
> 时间：2013-03-03T19:23:25.030
> 
> 标签：java, jfreechart

我正在尝试使用动态数据图表，域轴为时间，一些整数作为范围轴。

当我尝试放大时，即使数据图表仍在添加新项目，滑动也会停止。

即使使用鼠标放大，有没有办法启用滑动？

谢谢

# symfony - symfony ORM 原则查询

> ID：15189774
> 
> 赞同：0
> 
> 时间：2013-03-03T19:23:25.363
> 
> 标签：symfony, orm, doctrine

我可以通过内部连接轻松查询

```
$qb = $this->createQueryBuilder('r')
    ->innerJoin('UserBundle:User', 'u')
    ->where('r.nick = u.id')
    ->andWhere('r.odobera=:id')
    ->setParameter('id', $id)
    ->orderBy('r.time', 'DESC')
    ->setMaxResults(50);

return $qb->getQuery()->getResult(); 
```

应该是一个查询吧？但在探查器中我有

```
SELECT t0.username AS [...] FROM users t0 WHERE t0.id = ? LIMIT 1
Parameters: [1465] 
[Display runnable query]
Time: 1.79 ms [   Explain query ]
 SELECT r0_.id AS id0, [...] FROM requests r0_ INNER [...] ORDER BY r0_.time DESC LIMIT 50
Parameters: [1465] 
[Display runnable query]
Time: 0.67 ms [   Explain query ]
 SELECT t0.username AS username1, [...] FROM users t0 WHERE t0.id = ?
Parameters: ['2072'] 
[Display runnable query]
Time: 0.64 ms [   Explain query ]
 SELECT t0.username AS username1, [...] FROM users t0 WHERE t0.id = ?
Parameters: ['2386'] 
[Display runnable query]
Time: 0.50 ms [   Explain query ]
 SELECT t0.username AS username1, [...] FROM users t0 WHERE t0.id = ?
Parameters: ['79'] 
[Display runnable query]
Time: 0.50 ms [   Explain query ]
 SELECT t0.username AS username1, [...] FROM users t0 WHERE t0.id = ?
Parameters: ['2432'] 
[Display runnable query]
Time: 0.50 ms [   Explain query ]
 SELECT t0.username AS username1, [...] FROM users t0 WHERE t0.id = ?
Parameters: ['40'] 
[Display runnable query]
Time: 0.52 ms [   Explain query ]
 SELECT t0.username AS username1, [...] FROM users t0 WHERE t0.id = ?
Parameters: ['2090'] 
[Display runnable query]
Time: 0.46 ms [   Explain query ]
 SELECT t0.username AS username1, [...] FROM users t0 WHERE t0.id = ?
Parameters: ['1044'] 
[Display runnable query]
Time: 0.51 ms [   Explain query ]
 SELECT t0.username AS username1, [...] FROM users t0 WHERE t0.id = ?
Parameters: ['27'] 
[Display runnable query]
Time: 0.54 ms [   Explain query ] 
```

每条记录的每个“加入”一个查询...为什么？

PS：这篇文字只是为了让这篇文章更长，因为我不能提交“只是”这么多细节的问题..但我认为我的问题得到了很好的解释。顺便说一句：我问朋友，他有类似的问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:42:50.780

你没有指定选择什么，所以只是`requests`在哪里补水。

`select()`您可以使用查询构建器上的方法指定要水合的内容：

```
$qb = $this->createQueryBuilder('r')
     ->select(array('r', 'u'))
     ->innerJoin('UserBundle:User', 'u')
     ->where('r.nick = u.id')
     ->andWhere('r.odobera=:id')
     ->setParameter('id', $id)
     ->orderBy('r.time', 'DESC')
     ->setMaxResults(50);

return $qb->getQuery()->getResult(); 
```

# mysql - 合并两个相同的选择查询

> ID：15189779
> 
> 赞同：0
> 
> 时间：2013-03-03T19:23:54.507
> 
> 标签：mysql, select, union

我有两个相同的 sql 查询，我想合并结果。第一个是：

```
SELECT USER.USER_ID, NAME, SURNAME, EMAIL, STATUS, PHOTO 
FROM FRIENDLIST, USER, USER_PROFILE 
WHERE FRIENDLIST.USER_ID=". $userID ." 
  AND APPROVED='YES' 
  AND USER.USER_ID=FRIENDLIST.USER_ID 
  AND USER.USER_ID=USER_PROFILE.USER_ID 
```

第二个是：

```
SELECT USER.USER_ID, NAME, SURNAME, EMAIL, STATUS, PHOTO 
FROM FRIENDLIST, USER, USER_PROFILE 
WHERE FRIENDLIST.FRIEND_ID=". $userID ."
  AND APPROVED='YES' 
  AND USER.USER_ID=FRIENDLIST.USER_ID 
  AND USER.USER_ID=USER_PROFILE.USER_ID 
```

我尝试使用联合，但我得到一个空结果而不是 $userID=2 的 2 行。

```
SELECT USER.USER_ID, NAME, SURNAME, EMAIL, STATUS, PHOTO
FROM FRIENDLIST, USER, USER_PROFILE 
WHERE FRIENDLIST.USER_ID=". $userID ." 
  AND APPROVED='YES' 
  AND USER.USER_ID=FRIENDLIST.USER_ID 
  AND USER.USER_ID=USER_PROFILE.USER_ID 
UNION
SELECT USER.USER_ID, NAME, SURNAME, EMAIL, STATUS, PHOTO 
FROM FRIENDLIST, USER, USER_PROFILE
WHERE FRIENDLIST.FRIEND_ID=". $userID ." 
  AND APPROVED='YES' 
  AND USER.USER_ID=FRIENDLIST.USER_ID 
  AND USER.USER_ID=USER_PROFILE.USER_ID 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:46:37.163

我会像这样组合它们：

```
SELECT USER.USER_ID, NAME, SURNAME, EMAIL, STATUS, PHOTO 
FROM FRIENDLIST, USER, USER_PROFILE 
WHERE (FRIENDLIST.USER_ID=". $userID ." or FRIENDLIST.FRIEND_ID=". $userID .")
  AND APPROVED='YES' 
  AND USER.USER_ID=FRIENDLIST.USER_ID 
  AND USER.USER_ID=USER_PROFILE.USER_ID 
```

好吧，严格来说并非如此。我会为连接使用正确的语法并为表使用短别名：

```
SELECT u.USER_ID, NAME, SURNAME, EMAIL, STATUS, PHOTO 
FROM FRIENDLIST f join
     USER u
     on u.USER_ID = f.USER_ID  join
     USER_PROFILE up
     on u.USER_ID = up.USER_ID
WHERE (f.USER_ID=". $userID ." or f.FRIEND_ID=". $userID .") and
      APPROVED='YES' 
```

这`union`是另一种效率较低的方法来做同样的事情。如果结果集为空，那是因为没有人符合条件。

# postgresql - 将 Heroku Postgres 从 dev 更新到 basic

> ID：15189781
> 
> 赞同：1
> 
> 时间：2013-03-03T19:24:07.870
> 
> 标签：postgresql, heroku

我正在尝试在 heroku 上将我的数据库从 Dev 更新为 Basic。我遵循了[这里](https://devcenter.heroku.com/articles/upgrade-heroku-postgres-with-pgbackups)提到的所有步骤，但是在 heroku 之后`pg:promote HEROKU_POSTGRESQL_WHATEVER`我想检查我的数据库是否包含所有内容，所以我只是去网站上查看了它说的基本版本

```
![Data Size 0 B
Tables  0
PG Version ?][1] 
```

基础的

![基本计划](../Images/6a44f35a8cdea833663072792346c406.png)

虽然它应该是

![开发计划](../Images/fdbf54b150d23434385bd1c265eddfdc.png)

我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T19:58:59.860

表和数据库大小是通过异步过程计算的。这有时可能需要一点时间才能显示出来。如果您最近迁移过，那么您应该尝试连接`heroku pg:psql`然后运行：

```
VACUUM ANALYZE; 
```

这将确保 Postgres 具有适当的统计数据，然后在 Heroku 询问表大小时正确报告表。此外，您可以在连接后手动浏览数据库以确保您的数据存在：

```
\dt                    --- to display tables
SELECT * FROM foo;     --- to ensure data is there on a specific table 
```

# android - Android：来自 sdcard 的 ViewPager Gallery

> ID：15189783
> 
> 赞同：0
> 
> 时间：2013-03-03T19:24:22.683
> 
> 标签：android, gallery, sd-card

我有一些 ViewPager Gallery 的代码，但是图像是从可绘制文件夹中获取的，而我需要从 sdcard 上的文件夹中获取它们。

```
protected Integer[] mImageIds = {
        R.drawable.sample_1,
        R.drawable.sample_2,
        R.drawable.sample_3,
        R.drawable.sample_4,
        R.drawable.sample_5,
        R.drawable.sample_6,
        R.drawable.sample_7
}; 
```

这是需要更改的代码，如何将可绘制文件夹中的这些替换为 sdcard 中的图像？

**完整代码**

```
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.database.Cursor;
import android.os.Bundle;
import android.os.Handler;
import android.provider.MediaStore;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.*;

public class Main extends FragmentActivity implements AdapterView.OnItemSelectedListener, ViewPager.OnPageChangeListener {

    private ViewPager viewPager;
    private Gallery gallery;

    protected Integer[] mImageIds = {
            R.drawable.sample_1,
            R.drawable.sample_2,
            R.drawable.sample_3,
            R.drawable.sample_4,
            R.drawable.sample_5,
            R.drawable.sample_6,
            R.drawable.sample_7
    };
    private TextView textView;
    private Handler handler;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        viewPager = (ViewPager) findViewById(R.id.view_pager);
        viewPager.setAdapter(new MyAdapter(getSupportFragmentManager()));
        viewPager.setOnPageChangeListener(this);

        gallery = (Gallery) findViewById(R.id.gallery);
        gallery.setAdapter(new ImageAdapter());
        gallery.setOnItemSelectedListener(this);

        textView = (TextView) findViewById(R.id.title);

        handler = new Handler();

    }

    // gallery item selected
    public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
        updateUI(i);
    }

    // view pager item selected
    public void onPageSelected(int i) {
        updateUI(i);
    }

    private void updateUI(final int i) {
        handler.post(new Runnable() {
            public void run() {
                gallery.setSelection(i);
                viewPager.setCurrentItem(i);
                textView.setText("Photo #" + i);
            }
        });
    }

    public void onNothingSelected(AdapterView<?> adapterView) {    }

    public void onPageScrolled(int i, float v, int i1) {    }

    public void onPageScrollStateChanged(int i) {    }

    public class ImageAdapter extends BaseAdapter {

        public int getCount() {
            return mImageIds.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            ImageView imageView = new ImageView(Main.this);

            imageView.setImageResource(mImageIds[position]);
            imageView.setLayoutParams(new Gallery.LayoutParams(150, 100));
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);

            return imageView;
        }
    }

    public class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return mImageIds.length;
        }

        @Override
        public Fragment getItem(final int position) {
            return new Fragment() {
                @Override
                public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
                    ImageView imageView = new ImageView(Main.this);
                    imageView.setImageResource(mImageIds[position]);
                    return imageView;
                }
            };
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:05:22.460

不要调用`setImageResource`，而是`setImageDrawable`使用从 sdcard 加载的位图调用。例如，`Bitmap`从 sdcard 路径创建一个，然后`setImageDrawable`：

```
Bitmap bitmap = BitmapFactory.decodeFile(path_of_file);
imageView.setImageDrawable(bitmap); 
```

注意，图像解码不应该由 UI 线程完成。android 文档讨论了如何[有效地从 ui 线程加载图像](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)。`AsyncTask`可以修改讨论的内容以满足您的需求，只需更改一行或两行即可。

# ios - 以编程方式将子视图添加到情节提要中的预定义子视图不起作用

> ID：15189787
> 
> 赞同：0
> 
> 时间：2013-03-03T19:24:41.113
> 
> 标签：ios, storyboard, addsubview

我在故事板中有一个 ViewController，它由两个 UIView 和底部的一个表组成。屏幕的中心包含一个在故事板中定义的 UIView，带有一个名为 middleSectionView 的出口。我想以编程方式将 subView 添加到 middleSectionView。以编程方式添加的 subView 未出现。这是我的代码：

```
RoundedRect.m:
#import "RoundedRect.h"

@implementation RoundedRect

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSLog(@"RoundedRect: initWithFrame: entering");
        UIView* roundedView = [[UIView alloc] initWithFrame: frame];
        roundedView.layer.cornerRadius = 5.0;
        roundedView.layer.masksToBounds = YES;
        roundedView.layer.backgroundColor = [UIColor redColor].CGColor;

        UIView* shadowView = [[UIView alloc] initWithFrame: frame];
        shadowView.layer.shadowColor = [UIColor blackColor].CGColor;
        shadowView.layer.shadowRadius = 5.0;
        shadowView.layer.shadowOffset = CGSizeMake(3.0, 3.0);
        shadowView.layer.opacity = 1.0;
        // [shadowView addSubview: roundedView];
    }
    return self;
}
@end

.h:
...
@property (strong, nonatomic) IBOutlet UIView *middleSectionView;

.m:
...
#import "RoundedRect.h"
...
- (void)viewDidLoad
{
    RoundedRect *roundRect= [[RoundedRect alloc] init];
    roundRect.layer.masksToBounds = YES;
    roundRect.layer.opaque = NO;
    [self.middleSectionView addSubview:roundRect];    // This is not working
    [self.middleSectionView bringSubviewToFront:roundRect];
    // [self.view addSubview:roundRect];             // This didn't work either
    // [self.view bringSubviewToFront:roundRect];    // so is commented out
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:28:25.927

您看不到的原因`RoundedRect`是您调用了错误的初始化程序：这一行

```
RoundedRect *roundRect= [[RoundedRect alloc] init]; 
```

不会调用`initWithFrame:`初始化`RoundedRect`视图的所有工作的初始化程序。您需要将呼叫更改为

```
RoundedRect *roundRect= [[RoundedRect alloc] initWithFrame:CGRectMake(...)]; 
```

并将所需的框架坐标代替`...`上述坐标。

# javascript - node.js为每个房间定义相同的数组不同

> ID：15189797
> 
> 赞同：0
> 
> 时间：2013-03-03T19:25:27.610
> 
> 标签：javascript, arrays, node.js, socket.io, node.js-domains

正如我在标题中所说，我想为每个房间定义一个不同的数组。例如：

对于**room1**，数组将是`var colors=['red','blue'],`

对于**room2**，数组将是`var colors=['black','white']`。（同名但内容不同）

这是我的简化服务器：

```
var io = require('socket.io').listen(3000).set('log level', 2);

io.sockets.on('connection', function (socket) {
    var room = socket.handshake.query.room;  // room1 -- ws://localhost:3000/?room=room1

    socket.join(r); // add client to 'room1' room.
    // var colors = ['yellow','green'];
    io.sockets.in(r).emit('m', colors);
} 
```

我不想要这样的东西，`if(h=='room1') { var colors=['a','b'];} elseif(room=='room2') { var colors=['y','z']; }`因为会有很多房间。

我怎样才能做到这一点？我应该使用命名空间而不是房间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:28:39.577

然后有一个以房间名称为键的对象，以及相应的数组。然后使用当前房间名称自动从颜色列表中获取颜色数组：

```
var colorList = {
      'room1' : ['a','b'],
      'room2' : ['y','z']
    }
  , colors = colorList[room]
  ; 
```

# jquery - 带有关键字的jQuery悬停功能：'this'

> ID：15189800
> 
> 赞同：3
> 
> 时间：2013-03-03T19:25:43.383
> 
> 标签：jquery, hover, this

我无法理解和使用 $(this) 关键字。例如，使用来自[http://api.jquery.com/hover/的悬停类示例](http://api.jquery.com/hover/)

HTML

```
 <ul>
    <li>Milk</li>
    <li>Bread</li>
    <li class='fade'>Chips</li>
    <li class='fade'>Socks</li>
</ul>

<div class='fade'>My Div<div> 
```

查询

这将在所有`<li>`元素上添加函数。

```
$("li").hover(
    function () {
        $(this).append($("<span> ***</span>"));
    },
    function () {
        $(this).find("span:last").remove();
    }
); 
```

如果我只想在淡入淡出类上添加函数。我能够这样做

```
$("li.fade").hover(
    function () {
        $(this).append($("<span> ***</span>"));
    },
    function () {
        $(this).find("span:last").remove();
    }
); 
```

这将选择所有淡入淡出类，包括 DIV

```
 $("li").hover(
        function () {
            $('.fade').append($("<span> ***</span>"));
        },
        function () {
            $('.fade').find("span:last").remove();
        }
    ); 
```

为什么这行不通？

```
$("li").hover(
    function () {
        $(".fade", this).append($("<span> ***</span>"));
    },
    function () {
        $(".fade", this).find("span:last").remove();
    }
); 
```

我正在学习尝试学习 jQuery。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T19:33:26.500

该调用将在由 表示的元素内`$(".fade", this)`查找具有类的元素。它与.`fade``this``$(this).find(".fade")`

与引发事件的`this`元素一样，它`hover`是一个`li`元素，它不会找到任何东西，因为类在该元素上，而不是在该元素的任何子元素上。

# c - var 与 *var 上的 gdb /x 命令

> ID：15189803
> 
> 赞同：0
> 
> 时间：2013-03-03T19:25:54.323
> 
> 标签：c, gdb

我正在学习 GDB。当我运行 x /3b 命令查看 3 字节字符数组时，我会得到两个不同的输出，具体取决于我是否在数组名称前放置了 *。

```
(gdb) x /3b myThreeCharArray
0x7fffffffe3c0: 4   11  64
(gdb) x /3b *myThreeCharArray
0x400b04 <debug>:   85  72  -119 
```

这两个输出有什么区别？我的理解是 x 命令将向您显示由特定变量表示的内存中的字节。所以我想我认为 x 命令本质上是“取消引用”变量名，但显然情况并非如此。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:28:11.637

在`gdb`x 命令中，获取一个地址并尝试从该内存位置打印值。因此，在第二种情况下，您取消引用`myThreeCharArray`并生成一个`gdb`解释为地址并尝试在该“位置”打印内存的值。如果将前 3 个数字转换为十六进制，您会看到这种情况：

```
64 is 0x40
11 is 0x0B
04 is 0x04 
```

由于字节序，顺序被切换。

# c# - 填充 ASP.NET 中继器

> ID：15189805
> 
> 赞同：5
> 
> 时间：2013-03-03T19:25:56.400
> 
> 标签：c#, asp.net, radio-button

我的 aspx 中有一个中继器：

```
<asp:Repeater ID="rptDummy" runat="server" OnItemDataBound="rptDummy_OnItemDataBound"
     Visible="true">
</asp:Repeater> 
```

在 web 的 c# 端，我编写了这个函数：

```
 protected void createRadioButtons(DataSet ds){
     List<System.Web.UI.WebControls.RadioButton> buttons = new List<System.Web.UI.WebControls.RadioButton>();
     foreach (DataTable dt in ds.Tables){
            foreach (DataRow r in dt.Rows){
               System.Web.UI.WebControls.RadioButton rb = new System.Web.UI.WebControls.RadioButton();
               rb.Text = r[1] + " " + r[2] + " " + r[3] + " " + r[4];
               rb.GroupName = (string)r[5];
               buttons.Add(rb);
            }
      }
      rptDummy.DataSource = buttons;
      rptDummy.DataBind();
 } 
```

但是在尝试时，它什么也没显示。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T20:16:40.110

试试这个：

**1 - 定义`Repeater`：**

```
<asp:Repeater ID="rptDummy" runat="server" OnItemDataBound="rptDummy_OnItemDataBound" >
    <ItemTemplate>
         <asp:RadioButtonList ID="rbl" runat="server" DataTextField="Item2" DataValueField="Item2" />
    </ItemTemplate>
</asp:Repeater> 
```

**2 - 构建数据结构并绑定转发器：**

```
List<Tuple<string,string>> values = new List<Tuple<string,string>>();

foreach (DataTable dt in ds.Tables){
    foreach (DataRow r in dt.Rows){
       string text = r[1] + " " + r[2] + " " + r[3] + " " + r[4];
       string groupName = (string)r[5];
       values.Add(new Tuple<string,string>(groupName, text));
    }
}

//Group the values per RadioButton GroupName
rptDummy.DataSource = values.GroupBy(x => x.Item1);
rptDummy.DataBind(); 
```

**3 - 定义`OnItemDataBound`事件：**

```
protected void rptDummy_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        IGrouping<string, Tuple<string, string>> group = (IGrouping<string, Tuple<string, string>>)e.Item.DataItem;
        RadioButtonList list = (RadioButtonList)e.Item.FindControl("rbl");

        list.DataSource = group;
        list.DataBind();
    }
} 
```

你看，每个都是`IGrouping<string, Tuple<string, string>>`指某个 GroupName 的一组 RadioButton，它们也是来自中继器的项目。对于每个项目，我们创建一个新的 RadioButtonList 代表整个 RadioButtons 组。

**您可以通过使用与 a 不同的 DataStructure 使其变得更好，`Tuple`通常不清楚是什么`Item1`和`Item2`意味着什么。**

**更新：**

如果要查看选定的值：

```
protected void button_OnClick(object sender, EventArgs e)
{
    foreach (RepeaterItem item in rptDummy.Items)
    {
        RadioButtonList list = (RadioButtonList)item.FindControl("rbl");
        string selectedValue = list.SelectedValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:34:48.893

您应该放入`RadioButton`中继器并将其绑定到`createRadioButtons`事件中。

# java - 在java中为无理数查找大量小数位

> ID：15189810
> 
> 赞同：-1
> 
> 时间：2013-03-03T19:26:23.457
> 
> 标签：java, decimal, pi

我想在 java 中找到 22/7 到 10^6 位小数的值。是否有可能在很短的编译时间内做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:08:52.153

拿笔和纸，试着划分 22/7。它看起来像这样

```
03,142857142857
---
22:7
0
--
22
21
--- < now we calculate fractal part so we will add zeros at the end
 10 # 10 contains 7 only one time -> 1
  7
 ---
  30 # 30 contains 7 four times -> 4
  28 
  ---
   20  ->2
   14
   --- 
    60  ->8
    56
    ---
     40  ->5
     35
     ---
      50  ->7
      49
      ---
       10 # but wee already calculated this state of fractal part
          # so from now on it will repeat again and again and again... 
          # giving ...142857|142857|142857... 
```

所以`22/7 = 3,(142857)`。知道周期部分从分形部分的第一个位置开始，它包含六个数字，我们可以计算出该`10th`数字是`8`（周期部分的第四位），`20th`位置是`4`（周期部分的第二位）。很容易注意到，如果周期部分从第一个位置开始，那么第 n 位将是 (n)mod（周期中的位数），所以`10 % 6 = 4`周期部分的第四位是`8`，周期部分的`20 % 6 = 2`第二位是`4`。

因此，您可能可以实现自己的算法来缓存（假设在一些记住放置键->值对的顺序的地图中）并尝试计算分形部分，直到

*   它找到重复的部分
*   在某个点（如 5/4 = 1.250000）分形部分将结束
*   将在不找到周期部分的情况下计算`n-th`数字（可以在找到周期之前返回 22/7 的第二个数字）

* * *

附加信息。Period 不能长于您用来划分的数字，因为`minimal value of X%Y`is `0`（在这种情况下，我们将停止划分）并且`max value of X%Y`is `Y-1`，因此只能在周期性部分使用 1 和 Y-1 之间的数字，因此其最大长度将为`Y-1`

# java - 将文件写入内部存储时崩溃

> ID：15189811
> 
> 赞同：1
> 
> 时间：2013-03-03T19:26:26.900
> 
> 标签：java, android, file

我正在开发一个应用程序，当我尝试将文件保存到内部存储时遇到问题。

该文件是一个 xml，它位于我项目的 res/raw 文件夹中。当应用程序启动时，它会检查文件是否存在。如果它不存在，它将文件从 res/raw 文件夹复制到内部存储中，否则它检索文件中的一个字段以检查其版本，如果它是较新的版本，它会删除以前的文件并再次复制它.

好吧，问题是如果我有一个新版本并且我已经删除了以前的版本，当我要再次复制它时，它会抛出一个 NullPointerExceptcion 并且我找不到问题，但我使用的是相同的两种情况的代码，我不知道如何解决。

这是我正在使用的代码：

```
 private void writeFileToInternalStorage() {  
        FileOutputStream fos = null;
    try {
        InputStream fXmlFile = getResources().openRawResource(R.raw.partidos);
        File file = getBaseContext().getFileStreamPath("file.xml");
        if(file.exists()) {
            String resourcesVersion= getFileVersion(fXmlFile);
            String localVersion = getFileVersion(new FileInputStream(file));
            if (!resourcesVersion.equalsIgnoreCase(localVersion)) {
                //file.delete();
                fos = openFileOutput("file.xml", Context.MODE_PRIVATE);
                copyFile(fos, fXmlFile);
            }
        }
        else {
            fos = openFileOutput("file.xml", Context.MODE_PRIVATE);
            copyFile(fos, fXmlFile);
        }
    }
    catch(IOException e) {
        e.printStackTrace();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    finally {
        if (fos != null) {
            try {
                fos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    }  

    protected void copyFile(OutputStream fos, InputStream fXmlFile) throws IOException {  
        byte[] buffer = new byte[1024];  
        int bytesRead = 0;  
        while((bytesRead = fXmlFile.read(buffer)) > 0){  
            fos.write(buffer, 0, bytesRead);  
        }  
    }  

    protected String getFileVersion(InputStream file) {
        String version = null;
        try {
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(file);
            doc.getDocumentElement().normalize();
            version = doc.getElementsByTagName("numero").item(0).getFirstChild().getNodeValue();
        }
        catch (ParserConfigurationException e) {
            e.printStackTrace();
        }
        catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return version;
    } 
```

有什么解决办法吗？？

PS：这个语句抛出异常：

```
while((bytesRead = fXmlFile.read(buffer)) > 0) 
```

PS2：这是来自 LogCat 的代码：

```
03-03 20:47:07.140: W/System.err(2166): java.lang.NullPointerException: asset
03-03 20:47:07.148: W/System.err(2166):     at android.content.res.AssetManager.readAsset(Native Method)
03-03 20:47:07.158: W/System.err(2166):     at android.content.res.AssetManager.access$700(AssetManager.java:35)
03-03 20:47:07.168: W/System.err(2166):     at android.content.res.AssetManager$AssetInputStream.read(AssetManager.java:573)
03-03 20:47:07.168: W/System.err(2166):     at com.jfma75.myapp.MyApp.copyFile(MyApp.java:291)
03-03 20:47:07.178: W/System.err(2166):     at com.jfma75.myapp.MyApp.writeFileToInternalStorage(MyApp.java:263)
03-03 20:47:07.178: W/System.err(2166):     at com.jfma75.myapp.MyApp.onCreate(MyApp.java:62)
03-03 20:47:07.188: W/System.err(2166):     at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:999)
03-03 20:47:07.188: W/System.err(2166):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4151)
03-03 20:47:07.198: W/System.err(2166):     at android.app.ActivityThread.access$1300(ActivityThread.java:130)
03-03 20:47:07.198: W/System.err(2166):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
03-03 20:47:07.208: W/System.err(2166):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-03 20:47:07.208: W/System.err(2166):     at android.os.Looper.loop(Looper.java:137)
03-03 20:47:07.218: W/System.err(2166):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-03 20:47:07.218: W/System.err(2166):     at java.lang.reflect.Method.invokeNative(Native Method)
03-03 20:47:07.228: W/System.err(2166):     at java.lang.reflect.Method.invoke(Method.java:511)
03-03 20:47:07.237: W/System.err(2166):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-03 20:47:07.237: W/System.err(2166):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-03 20:47:07.248: W/System.err(2166):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:04:37.110

刚刚添加了我的评论作为答案，因为它似乎解决了 OP 的问题并将关闭这个问题：

> 我想我知道问题是什么。您打开资源文件并将其保存在`InputStream`然后调用`String resourcesVersion= getFileVersion(fXmlFile);`中，我猜这是您自己获取版本的私有函数。我打赌你`InputStream`在那个功能中推进或关闭它。然后，当您稍后调用时`copyFile`， `InputStream`要么被消耗，要么被关闭。尝试删除该行并放置一个常量`String resourcesVersion = "versionThatDoesn'tMatch";` 来测试`InputStream`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:02:19.233

看来，声明中

```
InputStream fXmlFile = getResources().openRawResource(R.raw.partidos); 
```

变量`fXmlFile`是`null`。您可以检查为什么会发生这种情况。

# asp.net - 如何使用网络摄像头在我的 ASP.NET 网站中录制视频。我想为此使用 DirectShow.NET 库

> ID：15189818
> 
> 赞同：1
> 
> 时间：2013-03-03T19:26:57.087
> 
> 标签：asp.net, video, webcam, directshow.net, video-recording

任何人都可以帮我解决这个问题。

我想要实现的是：

1.  在我的 ASP.NET 网站中使用我的网络摄像头录制视频。
2.  为此，我想使用 DirectShow.Net 库

如果有任何机构可以帮助我，请告诉我，我将非常感激。我有一个使用 c# 和 directshow.net 库通过桌面应用程序录制视频的工作示例，但我想在 ASP.NET 和 c# 中进行此操作。所以让我知道是否有人可以帮助我。

虽然我希望 DirectShow.NET 能做到这一点，但我愿意接受建议。

期待一个伟大的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:07:58.307

ASP.NET 应用程序无法在客户端计算机上使用 DirectX。

您的替代方案是使用 Flash、Silverlight 或 HTML5 ( [http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/) )。

# oauth - Google Plus Over the Air 通过服务器端 oauth 安装

> ID：15189821
> 
> 赞同：3
> 
> 时间：2013-03-03T19:27:15.493
> 
> 标签：oauth, google-plus, over-the-air

谷歌发布了一个名为[Over-The-Air Installs 的](https://developers.google.com/+/features/play-installs)好功能。但是文档中只有谷歌登录按钮的示例。

检查了[Google API PHP 客户端](https://code.google.com/p/google-api-php-client/)，它没有任何相关内容。尝试添加`apppackagename`和`app_package_name`授权网址 - 没有帮助。另一个问题是 Google 并未为所有客户端启用此功能。

是否可以通过在服务器端触发的 oauth 使用它？Google 是否以某种方式表明您可以使用此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T17:01:10.417

目前无法使用服务器端流程触发无线安装。建议您使用[快速入门示例应用程序](https://developers.google.com/+/quickstart)中描述和演示的客户端-服务器流程，而不是使用服务器端流程。

您可以通过在 Play 商店中链接到您的应用程序来指导用户在安装结束时安装该应用程序。从 Play 商店，用户仍然可以将您的应用程序直接安装到他们的设备上，只是不会在登录对话框中发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T16:23:06.173

即使是混合客户端-服务器流程也需要在您的页面上实现“登录按钮”... [https://developers.google.com/+/web/signin/server-side-flow](https://developers.google.com/+/web/signin/server-side-flow) [https://developers.google .com/+/web/signin/客户端到服务器流](https://developers.google.com/+/web/signin/client-to-server-flow)

不知道谷歌为什么会这样！

# c# - 可查询的 转换为 IQueryable 的扩展方法

> ID：15189828
> 
> 赞同：0
> 
> 时间：2013-03-03T19:27:55.837
> 
> 标签：c#, iqueryable, generic-collections

是否可以向 IQueryable 添加扩展方法，将其转换为另一种类型的 IQueryable？

我正在寻找这样的东西；

```
IQueryable<foo> source;
IQueryable<bar> result = source.Convert<bar>(); 
```

我有这个，显然它不起作用。哈哈

```
public static IQueryable<T1> Convert<T2>(this IQueryable<T1> source) where T1 : class
{
    // Do some stuff
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T19:30:17.330

当然它已经存在了`Select`——你只需要提供转换。例如，通过获取长度来转换`IQueryable<string>`为：`IQueryable<int>`

```
IQueryable<string> source = ...;
IQueryable<int> lengths = source.Select(x => x.Length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:52:15.910

您返回的类型 ( `IQueryable<T1>`) 与原始可查询对象中的类型 ( ) 相同，因此您的扩展方法采用 an`IQueryable<foo>`并返回 an `IQueryable<foo>`，您想要在其中返回 an `IQueryable<bar>`。此外，您将 T2 定义为泛型类型参数，而不是 T1。你可以改成这样：

```
public static IQueryable<T2> Convert<T1, T2>(IQueryable<T1> source) where T1 : class
{
...
} 
```

然后像这样调用：

```
IQueryable<Bar> result = source.Convert<Foo, Bar>(); 
```

但是.. 正如 Jon 指出的那样，这可以在 Select 中完成。如果和之间的转换`foo`不是`bar`那么微不足道，或者您想重新使用它，您可以定义该映射，而不是将 IQueryable 转换为 IQueryable。

# sql - 如何提取 SQL Server 2008 中的年份？

> ID：15189829
> 
> 赞同：0
> 
> 时间：2013-03-03T19:28:02.183
> 
> 标签：sql, sql-server-2008

```
SELECT DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE())+0,0)) 
```

输出给我当前日期的上个月的最后日期。如何从中提取年份`DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE())+0,0))`？

```
Select DATEPART(YYYY,DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE())+0,0))) 
```

上面的 Select 语句会提取年份吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:32:07.217

`DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE())+0,0))` SQL Server 有一个函数 YEAR()所以从`SELECT YEAR(DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE())+0,0)))` [http://sqlfiddle.com/#!3/1fa93/5208中提取年份](http://sqlfiddle.com/#!3/1fa93/5208)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:44:39.973

您的问题的答案是“是的，您可以使用`datepart(yyyy, ....)`。事实证明，“yyyy”是在这种情况下更常用的“年份”的同义词。

但是，大多数人只会`year(<whatever>)`用于此目的。

# c++ - 找不到文件：在 C++ 中使用数组类

> ID：15189834
> 
> 赞同：1
> 
> 时间：2013-03-03T19:28:22.963
> 
> 标签：c++, compiler-errors

这是代码： main.hpp 的第 8 行出现错误。

```
//main.hpp
#ifndef MAIN_HPP  // if main.hpp hasn't been included yet...
#define MAIN_HPP //   #define this so the compiler knows it has been included  

#include <array> // OFFENDING LINE 8
using std:array

class Quicksort {

public:
  void sort(array);

};

#endif 
```

此 c++ 文件正在使用此标头。

```
#include "main.hpp"
// this is just the start of a quicksort algorithm, base case only
void Quicksort::sort (array list) {
  if (list.size == 1 || list.size == 0) {
    return;
  } 
```

}

为什么我会收到此错误？我认为我的 C++ 和 g++ 都很好。还有其他原因可能无法正常工作吗？

我正在使用以下命令进行编译（在 Mac 上，使用最新的 X-Code）：g++ version 4.2 g++ -Wall -c quicksort.cpp

当我使用 -std=c++11 它说：无法识别的命令行选项“-std=c++11”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:29:48.170

您需要 C++11 支持才能包含`<array>`. 在 GCC 上，您需要使用`-std=c++0x`标志（或 -std=c++11 在最新版本上）。此外，`array`存在于`std`命名空间中，您*可能*的意思是传递一个引用：

```
void sort(std::array&); 
```

如果您的编译器不支持 C++11 的相关部分，您可以使用 TR1 中的版本：

```
#include <tr1/array>

...
std::tr1::array<int, 5> a = ...; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:30:57.997

您忘记包含`-std=c++11`或`-std=gnu++11`（在 4.7.0 之前`-std=c++0x`的`-std=gnu++0x`旧版本 GCC 上），后者包含扩展。如果这仍然不起作用，那么您需要更新版本的 GCC。

# jquery - 为什么升级 jQuery 会破坏 jQuery UI 功能？

> ID：15189839
> 
> 赞同：2
> 
> 时间：2013-03-03T19:28:47.037
> 
> 标签：jquery, css, hover

这是小提琴：

[http://jsfiddle.net/KpEMc/1718/](http://jsfiddle.net/KpEMc/1718/)

这个一切都很好。它是 JQuery 1.4.4 版本。但是当我将 JQuery 版本更新到最新版本时，它不起作用。为什么？

更新版本可以在[这里](http://jsfiddle.net/KpEMc/1719/)找到。

这是JS代码：

```
$(document).ready(function(){
    $("#sample").mouseover(function() {
         $(this).animate({ backgroundColor:'#f00'},300);
    }).mouseout(function() {
        $(this).animate({ backgroundColor:'#ccc'},300);
    });       
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:34:35.637

您没有选择 jQuery UI。打勾`jQuery UI 1.9.2`。

给你：[**工作 jsFiddle**](http://jsfiddle.net/MyQLs/)

你也应该试试

```
on("mouseover", function() {} ); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-03T19:31:27.097

我的建议是不要将 jQuery 用于如此微不足道的事情。

仅限 CSS！

```
#sample {
    background-color:#ccc;
    transition:background-color 0.3s ease;
    -webkit-transition:background-color 0.3s ease;
}
#sample:hover {
    background-color:#f00;
} 
```

[更新小提琴](http://jsfiddle.net/KpEMc/1720/)

# ruby-on-rails-3 - 如何将不关联的选择添加到模型？

> ID：15189840
> 
> 赞同：0
> 
> 时间：2013-03-03T19:29:02.680
> 
> 标签：ruby-on-rails-3, activerecord, simple-form

我有一个名为“Store”的模型，它有一个属性“City”，它有一个与之关联的“State”。我正在使用 simple_form 按州和/或城市创建商店过滤器。问题是，如何使 simple_form 不将“State”与“Store”相关联？

```
class State < ActiveRecord::Base
  attr_accessible :name

  has_many :cities
end

class City < ActiveRecord::Base
  attr_accessible :name

  belongs_to :state
  has_many   :stores
end

class Store < ActiveRecord::Base
   attr_accessible :latitude, :longitude, :description, :city_id

   validates :city,        :presence => true
   validates :description, :presence => true, :length => {:maximum => 500}
   validates :latitude,    :presence => true
   validates :longitude,   :presence => true

   belongs_to :city
end

<%= simple_form_for @store, :html => { :class => 'add-store-form', :style => "display:none;" } do |f| %>
  <table border="0">
    <tr>
      <td>Estado:</td>
      <td>
        <%= f.collection_select :state, State.all, :include_blank => false, :label => false, 
                              :input_html => { :id => "state_id", :name => "state_id" } %>
      </td>
    </tr>
    .
    . 
```

这种方式行不通。我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:34:21.307

这不是您问题的答案，而是通过以下方式改进您的代码：

```
validates :city, :latitude, :longitude, :description, presence: true
validates :description, length: {maximum: 500} 
```

我建议使用`Strong Parameters (Default in rails 4)`to define with attributes can be assigned from forms而不是 attr_accessible 选项

# c# - 使用 CommandLineParser 报告未知参数

> ID：15189849
> 
> 赞同：5
> 
> 时间：2013-03-03T19:29:49.863
> 
> 标签：c#, command-line, command-line-arguments, command-line-parser

有没有办法让[命令行解析器库](http://commandline.codeplex.com/)报告未知参数？

给定以下选项类：

```
public class Options
{
    [Option('i', "int-option", DefaultValue = 10, HelpText = "Set the int")]
    public int IntOption { get; set; }

    [ParserState]
    public IParserState LastParserState { get; set; }

    [HelpOption]
    public string GetUsage()
    {
        return HelpText.AutoBuild(this, 
            HelpText.DefaultParsingErrorsHandler(this, current));
    }
} 
```

以及以下程序：

```
var options = new Options();
var parser = new Parser(settings =>
{
    settings.HelpWriter = Console.Error;
    settings.IgnoreUnknownArguments = false;
});

if (parser.ParseArgumentsStrict(args, options))
{
    Console.WriteLine("Int value set: {0}", options.IntOption);
} 
```

当使用“MyProgram.exe --unknown”调用程序时，我只得到了默认的使用信息，但没有提到导致解析失败的错误。我想向用户说明出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:18:46.887

长话短说：使用当前的实现，您无法获得有关未知选项的任何信息。

长篇大论：

如果你在你的`GetUsage`方法中加入一个刹车点，你会看到它`LastParserState`不是 null 而是包含 0 个元素。

`LastParserState`基本上是从[ArgumentParser.PostParsingState](https://github.com/gsscoder/commandline/blob/master/src/libcmdline/Parsing/ArgumentParser.cs#L39)填充的，但是`LongOptionParser`（在您的情况下由于`--`双破折号而涉及）没有`PostParsingState`在其 parse 方法内向集合中添加任何内容：

来自[Github](https://github.com/gsscoder/commandline/blob/master/src/libcmdline/Parsing/LongOptionParser.cs#L38-44)的来源：

```
var parts = argumentEnumerator.Current.Substring(2).Split(new[] { '=' }, 2);
var option = map[parts[0]];

if (option == null)
{
    return _ignoreUnkwnownArguments ? PresentParserState.MoveOnNextElement : 
                                      PresentParserState.Failure;
} 
```

所以在内部，解析器不会存储任何关于出了什么问题的信息，只是记录这个事实。

# slider - JavaFX 垂直滑块

> ID：15189851
> 
> 赞同：0
> 
> 时间：2013-03-03T19:29:56.633
> 
> 标签：slider, javafx

*我正在探索`JavaFX`，我必须说我对缺乏学习材料有点失望。*我是菜鸟，`JavaFX`但我有一些经验`Swing`。如何垂直放置滑块？还有一个问题，我希望`Thumb`只能拖动到`Tick marks`，而不是在中间空间中，我怎样才能做到这一点？

![滑块](../Images/82307cfad571b5f5771a244689aea72e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:59:34.160

> 如何垂直放置滑块？

使用[setOrientation](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Slider.html#setOrientation%28javafx.geometry.Orientation%29)

```
slider.setOrientation(Orientation.VERTICAL); 
```

> 我希望拇指只能拖动到刻度线，而不是在中间空间，我怎样才能做到这一点？

在设置适当的刻度单位、计数和块增量后使用[setSnapToTicks 。](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Slider.html#setSnapToTicks%28boolean%29)

```
slider.setMajorTickUnit(0.25f);
slider.setMinorTickCount(1);
slider.setBlockIncrement(0.125f);
slider.setSnapToTicks(true); 
```

示例应用程序：

```
import static javafx.application.Application.launch;
import javafx.application.*;
import javafx.event.*;
import javafx.geometry.Orientation;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class VerticalSliderSample extends Application {
  @Override public void start(Stage stage) {
    Slider slider = new Slider(0, 1, 0.5);
    slider.setShowTickMarks(true);
    slider.setShowTickLabels(true);
    slider.setMajorTickUnit(0.25f);
    slider.setMinorTickCount(1);
    slider.setBlockIncrement(0.125f);
    slider.setSnapToTicks(true);

    slider.setOrientation(Orientation.VERTICAL);

    VBox layout = new VBox(10);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    layout.getChildren().setAll(slider);
    stage.setScene(new Scene(layout));
    stage.show();
  }

  public static void main(String[] args) { launch(args); }
} 
```

![在此处输入图像描述](../Images/d50a27e834c2f206b752153f76082626.png)

> 我正在探索 JavaFX，我必须说我对学习材料的运气有点失望。

将有关 Oracle 开发的 JavaFX 文档的电子邮件（建设性）反馈发送至：

`jfx-docs-feedback_ww@oracle.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T09:43:36.407

随着 Java 8 以及随之而来的 JavaFX 8 和相应的[SceneBuilder](http://www.oracle.com/technetwork/java/javafx/tools/index.html)的到来（在本文发布时，它仍然是带有 SceneBuilder 2.2 的 Java 7 GA），人们应该会更加熟悉使用它。对于那些不了解每个特殊属性并希望实践新 JavaFX 及其 FXML 提供给我们的控制反转原则的人来说，它是一个强大的工具。

这是我的一个项目中的一个示例，用于显示每个节点上最受欢迎的属性

[![在此处输入图像描述](../Images/9398060f019101ab4cb1380af80bed28.png)](https://i.stack.imgur.com/ZHE4p.png)

虽然我有时可以理解你，特别是当一些新功能出现时，我会感到沮丧，因为一些更高级别的示例这个 Node 可以做什么并且可能会发现它更容易，但作为一名程序员，你需要学习使用相应的 API。最好在每个 API 文档中都有一部分，例如在 PHP 社区中，您可以在其中将其维护为 wiki。

# php - 不明确的查询 [codeigniter]

> ID：15189855
> 
> 赞同：3
> 
> 时间：2013-03-03T19:30:31.197
> 
> 标签：php, sql, codeigniter, activerecord

我有多达三个任意字段（例如“位置、犯罪和 food_rating”）和两个任意表名（例如“食物和犯罪”），其中可能包含这些给定字段。

如果两个表中都有一个属性，我会收到一个“模棱两可”的错误，这是可以理解的。但是，我不能完全考虑如何生成一个查询来检查每个可能的情况，并在可能的情况下加入。

我在codeigniter中这样做，到目前为止已经写了以下内容，这会导致错误。我还应该注意，任意字段也可以为空。

```
$this->db->select($data->att_one . ',' . $data->att_two . ',' . $data->att_three)
->from($data->db_one . ',' . $data->db_two)
->get()
->result_array(); 
```

我收到的错误如下：

`Column 'location' in field list is ambiguous` （因为位置在两个表中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T19:55:54.080

问题*在于*模棱两可，不清楚您想从哪些表中选择什么以及您希望如何填充结果。

如果您希望在一个结果中同时包含“食物”和“犯罪”表中的“位置”，则必须为它们起别名：

```
$this->db
    ->select('food.location as foodlocation, crimes.location as crimeslocation')
    ->from('food, crimes')
    ->get()
    ->result_array(); 
```

根据您对这些结果所做的操作，对每个表使用新查询可能会更容易：

```
$results = array();
$select = array($data->att_one, $data->att_two, $data->att_three);
$tables = array($data->db_one, $data->db_two);

foreach ($tables as $tableName)
{
    $results[$tableName] = $this->db->select($select)
        ->get($tableName)
        ->result_array();
} 
```

这真的取决于你在做什么，但希望你能明白为什么数据库不能理解你的查询。

# javascript - 在javascript中清空普通对象的最有效方法是什么？

> ID：15189857
> 
> 赞同：10
> 
> 时间：2013-03-03T19:30:40.780
> 
> 标签：javascript, arrays, performance, dictionary

如[here](https://stackoverflow.com/questions/1232040/how-to-empty-an-array-in-javascript)所述，在javascript中清空现有数组（而不是分配新数组）的最有效方法似乎是使用：

```
array.length = 0; 
```

相同的操作是否适用于普通对象？**（又名“关联数组”或“字典”）如果不是，那么清空**现有 javascript 对象的最有效方法是什么？

我认为分配一个新的不是最好的选择，因为它会将一些额外的工作推给垃圾收集器，并会在堆上分配一些新的内存，但我可能错了。

我需要一个至少适用于 Chrome 和 Firefox 的解决方案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-03T20:01:58.230

最短的方法是创建一个新对象。无论如何，您最终都会收集所有属性。

```
var foo = {
    a: 5,
    b: 4
};
foo = {}; 
```

您还可以遍历属性并单独删除它们：

```
for (var prop in foo) {
    if (foo.hasOwnProperty(prop)) {
        delete foo[prop];
    }
} 
```

还值得指出的是，作为一个冗长的问题，JavaScript 有带*属性的**对象*，而不是关联数组。

# c++ - 在 C++ 中创建有向图时的困惑

> ID：15189866
> 
> 赞同：0
> 
> 时间：2013-03-03T19:31:12.333
> 
> 标签：c++, stl

我试图通过读取一个文本文件来创建一个有向图，其中每行有两列，第一列是尾顶点，第二列是头顶点。目前只是为了测试我的代码是否有效，我正在尝试填充图表并将其打印出来。

我在每次插入节点后打印我的图表。图形打印工作正常，直到我插入第三个节点“4”，之后第一个节点从 1 变为 0。我不知道为什么。我想知道将节点指针存储在边缘是否是个好主意。我这样做是因为我已经在“节点”向量中有节点信息，因此不想复制它。

输入测试文件：

```
1 2
4 5 
```

我的数据结构是：节点：保存节点ID和布尔变量节点脏边：保存指向尾节点和头节点图的指针：保存所有节点和边的向量

输出：

```
Pushing :1
print called
Nodes are:
1

Pushing :2
print called
Nodes are:
1
2

Pushing :4
print called
0(0) --> 2(0)     // Problem this should have been 1(0) --> 2(0)
Nodes are:
1
2
4

#include <iostream>
#include <vector>
#include <fstream>
#include <string>
#include <sstream>

using namespace std;

class node {
public:
    node() {}
    node(int _nodeId, bool dirty);
    int nodeId;
    bool dirty;
    void operator=(node rhs);
    bool operator==(node rhs);
};

class edge {
public:
    edge(node *_startNode, node *_endNode): startNode(_startNode), endNode(_endNode) {}
    node *startNode, *endNode;
};

node :: node(int _nodeId, bool _dirty) {
    nodeId = _nodeId;
    dirty = _dirty;
}

void node :: operator=(node rhs) {
    this->dirty = rhs.dirty;
    this->nodeId = rhs.nodeId;
}

bool node :: operator==(node rhs) {
    if (this->nodeId == rhs.nodeId) {
        return true;
    }
    return false;
}

class graph {
public:
    void print();
    void addEdge(node startNode, node endNode);
    void addNode(node n);
    void dfs(node s);
private:
    vector<edge> edges;
    vector<node> nodes;
};

void graph :: addNode(node n) {
    // only add this node if it does not exist in the graph
    if (find(nodes.begin(), nodes.end(), n) == nodes.end()) {
        //print();
        cout <<  "Pushing :"<<n.nodeId<<endl;
        nodes.push_back(n);
    }
    print();
    cout << endl;
}

void graph :: dfs(node s) {
    // Search node s and mark it as dirty

}
void graph :: print() {
    cout << "print called\n";
    vector<edge>::iterator itr = edges.begin();
    while (itr != edges.end()) {
        cout << itr->startNode->nodeId << "("<< itr->startNode->dirty<<") --> ";
        cout << itr->endNode->nodeId << "("<< itr->endNode->dirty<<")"<<endl;
        ++itr;
    }

    cout << "Nodes are:\n";
    for (int i=0; i< nodes.size(); ++i) {
        cout << nodes.at(i).nodeId << endl;
    }
}

void graph :: addEdge(node startNode, node endNode) {
    vector<node>::iterator itrStartNode;
    itrStartNode = find(nodes.begin(), nodes.end(), startNode);
    vector<node>::iterator itrEndNode;
    itrEndNode = find(nodes.begin(), nodes.end(), endNode);
    edge e(&(*itrStartNode), &(*itrEndNode));
    edges.push_back(e);
}

int main(int argc, char *argv[]) {
    graph g;
    // Read the file here
    ifstream file;
    file.open("test.txt", ios::in);
    string line;
    while (getline(file, line)) {
        int startNodeId, endNodeId;
        istringstream is(line);
        is >> startNodeId >> endNodeId;
        node startNode(startNodeId, false);
        node endNode(endNodeId, false);
        g.addNode(startNode);
        g.addNode(endNode);
        g.addEdge(startNode, endNode);
    }
    file.close();
    g.print();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:43:31.063

您正在创建临时变量，*例如*

```
 node startNode(startNodeId, false);
        node endNode(endNodeId, false); 
```

和

```
 edge e(&(*itrStartNode), &(*itrEndNode)); 
```

并将指向临时实例的指针存储到您的容器中，*例如*

```
 edge e(&(*itrStartNode), &(*itrEndNode));
    edges.push_back(e); 
```

一旦退出创建这些实例的本地范围（`while`循环或`addEdge`方法），存储这些实例的堆栈内存将被程序收回以在其他地方使用。但是，您的*指针*仍然指向有效的内存地址（是否被程序取回），因此，可能仍然指向看似有效的数据。这可能就是正在发生的事情，*即*为什么您会看到看似有效但不正确的顶点。

使用`new`运算符创建在循环和函数的本地范围之外持续存在的实例，并适当地清理它们（通过`delete`）。

# javascript - Twitter Bootstrap 弹出框显示在错误的位置

> ID：15189867
> 
> 赞同：0
> 
> 时间：2013-03-03T19:31:15.390
> 
> 标签：javascript, twitter-bootstrap, popover

我有一个按钮，当我点击它时，我会得到带有数据的“弹出窗口”（使用 boostrap 模式）。我使用了 twitter boostrap 工具提示，一切正常。当我决定用弹出框替换工具提示时，我遇到了一些奇怪的问题。首先，我希望在悬停链接时出现弹出框，但仅在单击链接时才会出现。其次，弹出窗口出现在主窗口上，无论我尝试什么都不会消失。我只希望他像我上一个工具提示一样出现在 boostrap 模态中。

这是我的链接：

```
<a href="#" class="blob" data-html="true" data-triger="hover" data-original-title="A Title" data-content="bla bla bla">link</a> 
```

js：

```
$('.blob').popover(); 
```

我该如何解决？怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:26:10.793

你拼错了触发器，应该是：

```
<a href="#" class="blob" data-html="true" data-trigger="hover" data-original-title="A Title" data-content="bla bla bla">link</a> 
```

更正后，它在 jsfiddle 中对我来说可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:39:41.980

不确定为什么 data-trigger 属性不起作用，但使用 JS 初始化参数传递选项使其行为符合您的预期：

```
$('.blob').popover({trigger: "hover"}); 
```

jsfiddle在这里：

[http://jsfiddle.net/dcasadevall/S8sXQ/1/](http://jsfiddle.net/dcasadevall/S8sXQ/1/)

# fabricjs - 是否可以在 Fabric.js 中为过滤器设置动画？

> ID：15189873
> 
> 赞同：7
> 
> 时间：2013-03-03T19:31:47.030
> 
> 标签：fabricjs

是否可以在 Fabric.js 中为图像过滤器设置动画？例如“像素化”过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T16:42:36.193

我以与演示相同的方式解决了它。不幸的是，过滤器不能被动画化——它们需要太多的处理时间。

这是我的代码：

```
image = ... //Image, where the filter should be applied

var filter = new fabric.Image.filters.RemoveWhite({
    threshold: 0,
    distance:  140
});
image.filters.push(filter);
image.applyFilters(canvas.renderAll.bind(canvas));

animate(image,1, 400);   //Start the Animation

function animate(image,value, stop){
    value += ((stop-value)*0.02);    //Change the threshold-value

    if (image.filters[0]) {   
        image.filters[0]['threshold'] = value;
        console.log(value);
        image.applyFilters(canvas.renderAll.bind(canvas));  //Start creating the new image

        if(value<stop-100){
            setTimeout(function(){act(image,value,stop);},1);  
        }
    }
} 
```

我知道代码不是最有效的代码，但它可以工作。而且您可以看到动画过滤器消耗了太多时间。

（我用 1920x1080px 的图片测试过，也许你可以用更小的图片）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-12T13:04:31.637

这是亮度滤镜的更新版本

```
 var brightnessValue = 0.9;
  var brightnessFilter = new fabric.Image.filters.Brightness({
    brightness: brightnessValue
  });
  fabricImage.filters.push(brightnessFilter);

  fabric.util.requestAnimFrame(function brightnessFilterAnimation() {
    brightnessValue = brightnessValue - 0.04;
    brightnessFilter.brightness = brightnessValue;
    fabricImage.applyFilters();
    if (brightnessValue > 0) {
      fabric.util.requestAnimFrame(brightnessFilterAnimation);
    }
  }); 
```

# c# - Internet Explorer 的脱机 ActiveX 控件

> ID：15189876
> 
> 赞同：1
> 
> 时间：2013-03-03T19:32:03.040
> 
> 标签：c#, .net, activex, bho

我有一个 C#/.Net 用户控件，它是特定文件类型的查看器。现在我想将它转换为 Internet Explorer 的 ActiveX 控件，当我们使用 Internet Explorer 打开该文件类型并且该文件在控件中打开时，该控件会被加载。

它是与 Adob​​e PDF Reader ActiveX 控件类似的功能。当我们在 Internet Explorer 上拖放一个 pdf 文件时，会加载 pdf 阅读器控件并在该控件中打开文件。在这种情况下我可以使用 BHO 吗？

请帮我解决一下这个。如果您有答案或任何其他解决方案，请回复。提前致谢。

# excel - VBScript 从 Excel 到 Word

> ID：15189880
> 
> 赞同：2
> 
> 时间：2013-03-03T19:32:25.430
> 
> 标签：excel, vbscript, ms-word, ctrl

我希望有人可以帮我解决这个问题。下面的 VB 脚本在 Excel 中并创建一个新的 Word 文档。该代码会将图片从 Excel 复制到 Word 中。然后它将创建一个文本框并将其放置在图片上。然后它将文本放入文本框中。此代码确实可以正常工作。

```
Set wrdApp = CreateObject("Word.Application")
wrdApp.Visible = True
Set wrdDoc = wrdApp.Documents.Add

Sheets("Sheet1").Shapes("Picture1").Copy
wrdApp.Selection.Paste

With wrdDoc.Shapes.AddTextBox(msoTextOrientationHorizontal, 200, 150, 96, 50)
    .Select
    .Name = "TextBox1"
End With

With wrdApp.Selection
    .ShapeRange.Fill.Visible = 0
    .ShapeRange.Line.Visible = 0
    .TypeText Text:="My picture text"
End With 
```

如前所述，上面的代码确实有效。问题是我需要将它放在一个循环中以再次复制图片（X 次）。当我编写代码将其放入循环中时，它会将附加图片粘贴到 TextBox 中，因为这是最后一次选择的。我不知何故需要编写诸如 Ctrl + End 键之类的代码，以便将光标带到文档末尾和文本框之外。我不能让它工作。

为此，我需要使用以下代码：

```
Selection.EndKey Unit:=wdStory 
```

所以在代码中插入它的正确位置应该是这个部分，就像我在下面的那样：

```
With wrdApp.Selection
    .ShapeRange.Fill.Visible = 0
    .ShapeRange.Line.Visible = 0
    .TypeText Text:="My picture text"
    .EndKey Unit:=wdStory
End With 
```

当我添加该行时，这给了我一个 VB 错误。现在，如果我将此代码复制到 Word 并从宏运行它，它将完美运行。但是，此代码在 Excel 中，必须在 Word 中创建所有内容。

有人可以告诉我如何获取它，以便将光标移出 TextBox 并移至文档末尾吗？我知道这个问题是因为代码在 Excel 中并试图转到 Word，必须有某种方法让它工作或使用 ASCII 的类似代码。我已经尝试了我能想到的一切，并花了几个小时寻找解决方案。

感谢有人可以提供的任何帮助，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:05:35.407

如果我正确理解您的问题，这对我有用：

```
With wrdapp.ActiveDocument
  .Range(.Range.Characters.Count, .Range.Characters.Count).Select
End With 
```

**编辑**

试试这个（添加东西，删除东西，看看有什么用）：

```
With wrdapp.ActiveDocument
  .Range(.Range.Characters.Count, .Range.Characters.Count).Select
  .GoTo wdgotobookmark, name:="\EndOfDoc"
  Selection.Move wdCharacter, .Characters.Count
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:46:04.743

虽然这可能不是理想的方式，但下面的代码将清除 Word 中的选择，将焦点移出文本框。

```
wrdApp.Activate
SendKeys "{ESC}" 
```

# cakephp - 使用 CakePHP 2.3.1 时 saveAll() 失败

> ID：15189885
> 
> 赞同：4
> 
> 时间：2013-03-03T19:32:39.337
> 
> 标签：cakephp, cakephp-2.3

我正在构建一个 CakePHP 2.3 应用程序，但我一生都无法弄清楚为什么 saveAll 一直失败。

我有以下型号：

*   `Artist`有很多`ArtistPreview`
*   `ArtistPreview`属于`Artist`

`Artist`我用这个函数保存我的模型没有问题`save()`，但是一旦我尝试使用这个`saveAll`方法，Cake 似乎验证失败——这太疯狂了，因为我什至完全从我的模型中删除了所有验证规则。

这是我的观点，没什么疯狂的：

```
<?php
    echo $this->Form->create('Artist', array('inputDefaults' => array('class' => 'input-block-level')));
    echo $this->Form->input('Artist.name', array('label' => __('Name')));
    echo $this->Form->input('Artist.artist_section_id', array('label' => __('Section'), 'empty' => true));
?>
<label>Tags</label>
<div class="checkboxes">
    <?php echo $this->Form->input('Tag', array('label' => false, 'multiple' => 'checkbox', 'class' => false));; ?>
</div>
<?php
    echo $this->Form->input('Artist.website', array('label' => __('Website')));
    echo $this->Form->input('ArtistPreview.0.url', array('label' => __('Artist Preview')));
    echo $this->Form->input('Artist.description', array('label' => __('Description')));
?>
<?php

    echo $this->Form->submit(__('Add'), array('class' => 'btn btn-primary btn-large', 'div' => false)) . ' ';
    echo $this->Form->button(__('Cancel'), array('type' => 'button', 'class' => 'btn btn-large', 'div' => false, 'onclick' => 'closeDialog()'));
    echo $this->Form->end();
?> 
```

这是我的`add`控制器方法：

```
public function add() {
    $this->layout = 'form';

    if (!$this->request->is('ajax')) {
        throw new ForbiddenException();
    }

    if ($this->request->is('post')) {
        $this->setData($this->request->data['Artist'], array(
            'user_id' => AuthComponent::user('id'),
            'date' => $this->Date->gmt()
        ));
        if ($this->Artist->saveAll($this->request->data)) {
            $this->redirectAjax('/artists/view/' . $this->Artist->id);
        }
    }

    $this->set(array(
        'title_for_layout' => 'Add Artist',
        'artistSections' => $this->Artist->ArtistSection->find('list', array('order' => 'name')),
        'tags' => $this->Artist->Tag->find('list', array('order' => 'name'))
    ));
} 
```

正如我上面提到的，saveAll 方法每次都会失败。我已经检查了正在输出的内容，并且 Cake 正在与类一起输出一堆空白`<div>`s `error-message`，但没有任何消息。表单上的每个字段都获得这些 div 之一。

现在，当我将代码更改为使用`save`函数而不是 时`saveAll`，所有内容都会正确保存，但`ArtistPreview`数据除外，这是意料之中的。甚至我的 HABTM 标签也被正确保存，并且没有任何验证失败。

我从 1.3 天开始就一直在使用 Cake，所以我对它非常熟悉，甚至完全按照我在以前的项目中所要求的做了。我倾向于这是一个错误，除非我在这里遗漏了一些东西。有任何想法吗？

* * *

**编辑**

我也尝试了该`saveAssociated`方法，以及在尝试保存时将`deep`密钥设置为。`true`这将让我保存艺术家，但不会保存相关数据（ArtistPreview）。

* * *

**编辑 2**

根据要求，这里有两张表：

```
-- -----------------------------------------------------
-- Table `artists`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `artists` ;

CREATE  TABLE IF NOT EXISTS `artists` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `user_id` INT UNSIGNED NULL ,
  `artist_section_id` INT UNSIGNED NULL ,
  `artist_status_id` INT UNSIGNED NULL ,
  `name` VARCHAR(200) NULL ,
  `website` VARCHAR(500) NULL ,
  `description` TEXT NULL ,
  `date` DATETIME NULL ,
  `comment_count` INT UNSIGNED NOT NULL DEFAULT 0 ,
  PRIMARY KEY (`id`) ,
  INDEX `FK_artists_users_idx` (`user_id` ASC) ,
  INDEX `FK_artists__artist_sections_idx` (`artist_section_id` ASC) ,
  INDEX `FK_artists__artist_statuses_idx` (`artist_status_id` ASC) ,
  CONSTRAINT `FK_artists__users`
    FOREIGN KEY (`user_id` )
    REFERENCES `users` (`id` )
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `FK_artists__artist_sections`
    FOREIGN KEY (`artist_section_id` )
    REFERENCES `artist_sections` (`id` )
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `FK_artists__artist_statuses`
    FOREIGN KEY (`artist_status_id` )
    REFERENCES `artist_statuses` (`id` )
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `artist_previews`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `artist_previews` ;

CREATE  TABLE IF NOT EXISTS `artist_previews` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `artist_id` INT UNSIGNED NULL ,
  `url` VARCHAR(500) NULL ,
  `date` DATETIME NULL ,
  PRIMARY KEY (`id`) ,
  INDEX `FK_artist_previews__artists_idx` (`artist_id` ASC) ,
  CONSTRAINT `FK_artist_previews__artists`
    FOREIGN KEY (`artist_id` )
    REFERENCES `artists` (`id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

这是我的`setData`函数，它只是合并两个数组。我没有使用隐藏字段，而是在控制器中设置了不由用户输入填充的字段：

```
public function setData(&$original, $new) {
    $original = array_merge($original, $new);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:56:03.443

所以我终于想通了，哇，这是一个菜鸟的错误。我想我昨天编码的时候一定是半睡半醒。问题出在我的模型中：

```
class Artist extends AppModel {
    public $belongsTo = array(
        'User',
        'ArtistSection',
        'ArtistStatus'
    );

    public $hasMany = array(
        'ArtistPicture',
        'Artist' // <--- problem was here, had 'Artist' instead of 'ArtistPreview'
    );

    public $hasAndBelongsToMany = array(
        'Tag'
    );

    public function __construct($id = false, $table = null, $ds = null) {
        parent::__construct($id, $table, $ds);

        $this->validate = array(
            'name' => array(
                'rule' => 'notEmpty',
                'message' => __('Artist name cannot be blank.')
            ),
            'website' => array(
                'rule' => 'url',
                'message' => __('Must be a valid URL.'),
                'allowEmpty' => true
            ),
            'artist_section_id' => array(
                'rule' => 'notEmpty',
                'message' => __('Section is required.')
            )
        );
    }
} 
```

感谢那些花时间看这个问题的人，即使我发布了错误的信息。

# python - 主线程中的 Python 套接字接受可防止退出

> ID：15189888
> 
> 赞同：2
> 
> 时间：2013-03-03T19:32:47.733
> 
> 标签：python, sockets, quit

我正在玩python中的套接字，只是为了了解它们。但是我真的对以下问题感到恼火：

```
import socket
soc = socket.socket(socket.AF_INET)
soc.bind(('localhost',8000))
soc.listen(0)
client = soc.accept() 
```

在套接字等待连接时，按 ctrl-c 不会退出应用程序。

**如何退出应用程序？**

在[这](https://stackoverflow.com/q/1148062/566639) [两个](https://stackoverflow.com/q/4090891/566639)问题中解决了类似的问题，但是该`accept`方法是从单独的线程调用的，问题是如何使 ctrl-c 杀死该线程。这里`accept`方法是从主线程调用的。

*编辑：*我在 Win7 64 位上运行 python 3.3.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T19:40:28.353

你应该使用`CTRL`+ `Break`。那应该杀了它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T15:27:32.340

`ctrl-c`除了通过任务管理器杀死它之外，我找不到使用或任何其他方式杀死应用程序的方法，所以我写了一个解决方法：

```
import socket,os
from threading import Thread

class socketListener(Thread):
    def run(self):
        soc = socket.socket(socket.AF_INET)
        soc.bind(('localhost',8000))
        soc.listen(0)
        client = soc.accept()

pid = os.getpid()
sl = socketListener()
sl.start()
input('Socket is listening, press any key to abort...')
os.kill(pid,9) 
```

这将在单独的线程中运行脚本，同时等待主线程中的击键。一旦用户按下一个键，整个应用程序就会被杀死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T15:38:04.203

在自己遇到同样的问题后，我找到了一个解决方法，它可能不是最干净的方法，但至少它对我有用：

```
import socket
from select import select

#create an INET, STREAMing socket
serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

#bind the socket to localhost
serversocket.bind(('localhost', 8000))
While 1:
    serversocket.listen(5)
    ready, _, _ = select([serversocket], [], [], 1) #Timeout set to 1 seconds
    if ready:
        (clientsocket, address) = serversocket.accept()
        #Do something with client
    else:
        #Do nothing, just loop again 
```

通过使用`select`，您将等待套接字 fd 上的更改，直到超时结束。正如我所说，这可能不是最干净的方式，但 Ctrl-c 将在超时结束时被捕获。

**可移植性警报：**在 Unix 上，`select`可以同时使用套接字和文件。在 Windows 上，`select`仅适用于套接字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T12:37:17.587

“serversocket”模块提供了标准的解决方案。我在 Windows 上测试了 Control-C，它工作正常。

这是链接，[serversocket 示例](https://docs.python.org/3/library/socketserver.html)

代码注释中甚至提到了 Control-C 处理

```
# Activate the server; this will keep running until you
# interrupt the program with Ctrl-C 
```

以下是来自上述链接的完整代码：

```
import socketserver   
class MyTCPHandler(socketserver.BaseRequestHandler):   
    def handle(self):
        # self.request is the TCP socket connected to the client
        self.data = self.request.recv(1024).strip()
        print("{} wrote:".format(self.client_address[0]))
        print(self.data)
        # just send back the same data, but upper-cased
        self.request.sendall(self.data.upper())

if __name__ == "__main__":
    HOST, PORT = "localhost", 9999
    with socketserver.TCPServer((HOST, PORT), MyTCPHandler) as server:
        # Activate the server; this will keep running until you
        # interrupt the program with Ctrl-C
        server.serve_forever() 
```

如果我们想重新发明轮子，我们会在侦听器套接字上执行 select() 或 poll()，超时 0.5 秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-25T06:25:46.017

为了节省其他人搜索此主题的时间，如果您的笔记本电脑键盘没有`break`按钮，请尝试

```
Ctrl + Fn + F6 
```

或者

```
Ctrl + F6 
```

# java - Java 双递归调用。

> ID：15189892
> 
> 赞同：2
> 
> 时间：2013-03-03T19:33:10.630
> 
> 标签：java, recursion, fractals

我有一个任务要求我们使用递归绘制一棵毕达哥拉斯树。树以正方形 ABCD 开始，点 A 和 B 由鼠标单击定义。一切似乎都有效，直到我到达递归，我可以让树的左侧或右侧部分来绘制，但不能同时绘制。我在我认为遇到问题的地方发表了评论。

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

public class PythagorasTree extends JFrame
{
    public static void main(String[] args)
    {
        new PythagorasTree();
    }

    PythagorasTree()
    {
        super("Pythagoras Tree");
        setSize(800,800);
        add("Center", new DrawingPanel());
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
}

class DrawingPanel extends JPanel
{
    Random random = new Random();

    int centerX;
    int centerY;
    int clickCount = 0;
    float pixelSize;
    float rWidth = 10.0F;
    float rHeight = 7.5F;
    float red, green, blue;

    Point a = new Point();
    Point b = new Point();
    Point c = new Point();
    Point d = new Point();
    Point e = new Point();
    Point u = new Point();

    DrawingPanel()
    {
        addMouseListener(new MouseAdapter()
        {
            public void mousePressed(MouseEvent click)
            {
                clickCount++;
                 if (clickCount == 1)
                 {
                     a.x = fx(click.getX());
                     a.y = fy(click.getY());
                     repaint();                 
                 }

                 if (clickCount == 2)
                 {
                    b.x = fx(click.getX());
                    b.y = fy(click.getY()); 
                    repaint();
                 }

            }
        });
    }

    void initgr()
    {
        Dimension d = getSize();
        int maxX = d.width - 1;
        int maxY = d.height - 1;
        pixelSize = Math.max(rWidth/maxX, rHeight/maxY);
        centerX = maxX/2; 
        centerY = maxY/2;
    }

    int iX(float x){return Math.round(centerX + x/pixelSize);}
    int iY(float y){return Math.round(centerY - y/pixelSize);}
    float fx(int x){return (x - centerX) * pixelSize;}
    float fy(int y){return (centerY - y) * pixelSize;}

    public void paintComponent(Graphics g)
    {
        initgr();
        super.paintComponent(g);
        setBackground(Color.white);
        g.setColor(Color.red);

        if (clickCount == 1)
            g.drawLine(iX(a.x), iY(a.y), iX(a.x), iY(a.y));

        if (clickCount > 1)     
            drawTree(g,a,b);        
    }

    public void drawTree(Graphics g, Point first, Point second)
    {

        float xSquared = (float) Math.pow((second.x-first.x),2);  
        float ySquared = (float) Math.pow((second.y-first.y),2);
        float length = (float) Math.sqrt(xSquared + ySquared);

        if ( length > .001)
        {
            u.x = second.x - first.x;
            u.y = second.y - first.y;   

            a.x = first.x;
            a.y = first.y;

            b.x = second.x;
            b.y = second.y;

            d.x = first.x + (u.y * -1);
            d.y = first.y + u.x;

            c.x = d.x + u.x;
            c.y = d.y + u.y;

            e.x = d.x + .5F * (u.x + (u.y*-1));
            e.y = d.y + .5F * (u.y + u.x);

            Polygon square = new Polygon();
            Polygon triangle = new Polygon();

            square.addPoint(iX(a.x), iY(a.y));
            square.addPoint(iX(b.x), iY(b.y));
            square.addPoint(iX(c.x), iY(c.y));
            square.addPoint(iX(d.x), iY(d.y));

            red = random.nextFloat();
            green = random.nextFloat();
            blue = random.nextFloat();      
            g.setColor(new Color(red, green, blue));

            g.fillPolygon(square);

            triangle.addPoint(iX(c.x), iY(c.y));
            triangle.addPoint(iX(d.x), iY(d.y));
            triangle.addPoint(iX(e.x), iY(e.y));

            red = random.nextFloat();
            green = random.nextFloat();
            blue = random.nextFloat();      
            g.setColor(new Color(red, green, blue));

            g.fillPolygon(triangle);    

            /* Problem code is here, tree will draw Left or Right depending on              which recursive call
             * is first in the code, but will never reach the 2nd call.
             */

            drawTree(g,d,e);  //Draw tree left
            drawTree(g,e,c);  //Draw tree right
        }

    }

}

class Point
{
    public float x;
    public float y;

    public Point()
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-17T04:55:36.820

这个问题该有答案了。问题在于这些成员变量声明：

```
Point c = new Point();
Point e = new Point(); 
```

这段代码在`drawTree()`：

```
drawTree(g,d,e);  //Draw tree left
drawTree(g,e,c);  //Draw tree right 
```

由于`c`and`e`是一个成员变量，而不是本地的，它们被第一次递归调用修改，`drawTree(g, d, e)`所以当我们第二次调用时`drawTree(g, e, c)`，它不再是一样的`c`，`e`我们认为我们有。以下代码的返工使这些本地化（显然没有高效的 GC 方式，但也没有错误）以及其他一些小的修改：

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

class Point
{
    public float x;
    public float y;

    public Point(float x, float y) {
        this.x = x;
        this.y = y;
    }

    public Point() {

    }
}

class DrawingPanel extends JPanel
{
    Random random = new Random();

    int clickCount = 0;
    float pixelSize;
    float rWidth = 10.0F;
    float rHeight = 7.5F;
    float red, green, blue;

    Point a = new Point();
    Point b = new Point();
    Point center = new Point();

    DrawingPanel()
    {
        addMouseListener(new MouseAdapter()
        {
            public void mousePressed(MouseEvent click)
            {
                clickCount++;

                if (clickCount == 1)
                {
                    a.x = fx(click.getX());
                    a.y = fy(click.getY());
                    repaint();
                }
                else if (clickCount == 2)
                {
                    b.x = fx(click.getX());
                    b.y = fy(click.getY());
                    repaint();
                }
            }
        });
    }

    void initgr()
    {
        Dimension d = getSize();
        int maxX = d.width - 1;
        int maxY = d.height - 1;
        pixelSize = Math.max(rWidth / maxX, rHeight / maxY);
        center.x = maxX / 2; 
        center.y = maxY / 2;
    }

    int iX(float x){ return Math.round(center.x + x / pixelSize); }
    int iY(float y){ return Math.round(center.y - y / pixelSize); }
    float fx(int x){ return (x - center.x) * pixelSize; }
    float fy(int y){ return (center.y - y) * pixelSize; }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);

        initgr();
        setBackground(Color.white);

        if (clickCount == 1)
        {
            g.setColor(Color.red);
            g.drawLine(iX(a.x), iY(a.y), iX(a.x), iY(a.y));
        }
        else if (clickCount > 1) {
            drawTree(g, a, b);
        } 
    }

    public void drawTree(Graphics g, Point first, Point second)
    {
        double xSquared = Math.pow(second.x - first.x, 2);
        double ySquared = Math.pow(second.y - first.y, 2);

        if (Math.sqrt(xSquared + ySquared) < 0.01) {
            return;
        }

        Point u = new Point(second.x - first.x, second.y - first.y);
        Point d = new Point(first.x - u.y, first.y + u.x);

        Point c = new Point(d.x + u.x, d.y + u.y);
        Point e = new Point(d.x + 0.5F * (u.x - u.y), d.y + 0.5F * (u.y + u.x));

        Polygon square = new Polygon();

        square.addPoint(iX(first.x), iY(first.y));
        square.addPoint(iX(second.x), iY(second.y));
        square.addPoint(iX(c.x), iY(c.y));
        square.addPoint(iX(d.x), iY(d.y));

        red = random.nextFloat();
        green = random.nextFloat();
        blue = random.nextFloat();
        g.setColor(new Color(red, green, blue));

        g.fillPolygon(square);

        Polygon triangle = new Polygon();

        triangle.addPoint(iX(c.x), iY(c.y));
        triangle.addPoint(iX(d.x), iY(d.y));
        triangle.addPoint(iX(e.x), iY(e.y));

        red = random.nextFloat();
        green = random.nextFloat();
        blue = random.nextFloat();
        g.setColor(new Color(red, green, blue));

        g.fillPolygon(triangle);

        drawTree(g, d, e); // Draw tree left
        drawTree(g, e, c); // Draw tree right
    }
}

public class PythagorasTree extends JFrame
{
    PythagorasTree()
    {
        super("Pythagoras Tree");
        setSize(800, 800);
        add("Center", new DrawingPanel());
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void main(String[] args)
    {
        new PythagorasTree();
    }
} 
```

**输出**

[![在此处输入图像描述](../Images/5a89e9244f46f8b762ee5bb174fdda6d.png)](https://i.stack.imgur.com/Ew0VQ.png)

# .net - 无法将 Web 服务连接到 MOSS 2010

> ID：15189893
> 
> 赞同：0
> 
> 时间：2013-03-03T19:33:23.300
> 
> 标签：.net, wcf, webservice-client, sharepoint-workflow

我有一个客户端应用程序（工作流设计器），它必须在 Sharepoint 2010 上发布工作流。
由于我的应用程序是在 .NET 4.5 中开发的，而 MOSS 2010 无法处理该版本（正如在此链接[http等许多论坛中提到的那样://demiliani.com/blog/archive/2009/11/19/6569.aspx](http://demiliani.com/blog/archive/2009/11/19/6569.aspx)或这个[http://www.learningsharepoint.com/2010/08/21/net-4-with-sharepoint-foundation-2010 /](http://www.learningsharepoint.com/2010/08/21/net-4-with-sharepoint-foundation-2010/) ) 我正在尝试使用 WCF Web 服务通过以下代码将我的工作流连接到共享点站点：

公共 SPWorkflowTemplate GetSite（字符串名称，字符串 url）{

```
 SPWorkflowTemplate suivi = null;

         SPSecurity.RunWithElevatedPrivileges(delegate()
        {

            SPSite mySite = new SPSite(url);

        SPWeb myWeb = mySite.OpenWeb("WPrs");
        suivi = myWeb.WorkflowTemplates.GetTemplateByName(name, CultureInfo.CurrentCulture);
});
        return suivi;
    } 
```

当我尝试使用我的应用程序发布工作流时，我得到了这个异常：

故障异常 1 未处理

`http://localhost:91/`找不到位于的 Web 应用程序。验证您是否正确键入了 URL。如果 URL 应该服务于现有内容，系统管理员可能需要将新的请求 URL 映射添加到预期的应用程序。

但我确信该 URL 是正确的，所以任何人都可以帮助我......？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:23:20.690

1) WCF 必须托管在 SharePoint 服务器计算机上。

2) 它必须在 .Net 3.5 上运行并以 AnyCpu 或 x64 为目标。

3) 它必须在应用程序池/WAS 服务帐户中运行，该帐户的身份对 SharePoint 站点具有权限。

# c# - 已连接的信号器

> ID：15189906
> 
> 赞同：0
> 
> 时间：2013-03-03T19:34:39.427
> 
> 标签：c#, javascript, asp.net, signalr

所以我这样做了：

```
 public string  getClientConnectionId()
{
    return Context.ConnectionId;
} 
```

我在服务器端有一个 default.aspx 页面我在页面加载时这样做了

```
string i = new ChatHub().getClientConnectionId(); 
```

但是我得到一个对象引用未设置为对象的实例错误我需要获取我的客户端连接 ID，以便我可以将它存储在我的数据库中的数据库中客户端有两个 ID，即自动生成的主键 ID 和 ChatId 谁应该是连接 ID，所以我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:41:37.430

如果您正在使用 WebForms 并且您有一个带有代码的 aspx 页面，则不能执行 new MyPage().Page_Load()，因为您**不**负责创建页面，所以它会以某种方式爆炸。对于 MVC 控制器和 SignalR 集线器和持久连接也是如此。

当您启动连接客户端时，它会通过完整的管道运行以获取连接 ID。您可以在客户端使用此连接 ID（在本例中使用 $.connection.hub.id），如果您想以某种方式将其传递回您的页面，那么您需要向传入的页面发出请求来自客户端的连接 ID。

当客户端连接时，您还可以在集线器本身中进行映射，但这需要更多关于您的应用程序的知识才能知道它是否可能。

# python - 在 python 中查看看起来像“已声明”的关键字

> ID：15189908
> 
> 赞同：-1
> 
> 时间：2013-03-03T19:35:06.633
> 
> 标签：python, char, keyword

我正在上一门在线 Python 课程，虽然我在登录提示时不知所措，但我仍然在学习它。

在线文本（用于回文程序）中给出了一个示例，其中给出了一个示例：

```
def toChars(s):
    s = s.lower()
    ans = ‘ ‘
    for c in s:
        if c in ‘abcdefghijklmnopqrstuvwxyz’:
            ans = ans + c
    return ans 
```

让我适应的是Python如何理解'c'。据我所知，“c”被视为关键字，被理解为“char”的关键字，但 Python 从哪里得到它？我在任何地方都没有找到任何解释，想知道是否有人可以让我直截了当。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:37:07.637

`c`不是关键字，而是变量名。

在 Python 中，字符串是可迭代的。当你遍历一个字符串时，它会一个一个地产生它的字符。

因此如下：

```
for c in s: 
```

只需遍历 的字符`s`并将每个字符依次分配给`c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:21:18.280

所做的就是在`for c in s:`中取一个字符`s`，将其分配给变量`c`，然后执行`for`循环体。然后，它将下一个字符分配给`s`to`c`和 s on。

例如，让`s = "LARRY123"`. 首先，`s = s.lower()`将分配`"larry123"`给`s`. 在`for`循环内，`c`首先设置为`'l'`。然后`if c in "abcdefghijklmnopqrstuvwxyz":`检查是否`c`是一个字母，如果是，则将其附加到`ans`. 在下一次迭代中，`c`等于`'a'`。然后`'r'`。等等。当`c`is或时`1`，它不会被附加到，因为它不是字母表。`2``3``ans`

最后，`ans`将`larry`。希望有帮助。

# iphone - 将文件添加到 Xcode 项目

> ID：15189913
> 
> 赞同：4
> 
> 时间：2013-03-03T19:35:39.730
> 
> 标签：iphone, xcode

试图将文件添加到项目中！

右键单击子文件夹并选择将文件添加到 projectName。我将所需的文件添加到我的项目中[Destination unChecked and selected folders 为任何添加的文件夹创建组并选择添加到目标 projectNameTest]，然后关闭 xcode 并重新打开！添加到项目中的文件没有出现。然后再次右键单击从“工作区”中选择添加文件的项目并添加到项目 [重复相同的场景] 并关闭 xcode 仍然文件正在从我的工作区中消失。

每次我需要从工作空间一次又一次地添加文件。当我关闭 Xcode。我需要为这个问题做些什么，所以当我打开 Xcode 时，文件需要出现在我的工作区中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T05:53:38.200

当我需要向我的项目添加额外的源文件时，我通常会做的是：

*1\. 将文件从源拖到我的项目中。*

![在此处输入图像描述](../Images/2fa8556bac8c38885ea65220e1b3373b.png)

*2\. 我将勾选标记添加到“将项目复制到目标组的文件夹（如果需要）”选项中。*

![在此处输入图像描述](../Images/d4b1ba3ba03bc519475a42aa3fc4ce76.png)

*3\. 现在我可以将添加的文件播种到我的项目中。*

![在此处输入图像描述](../Images/22ac36fd8e4f6829ff0c005594c58c7f.png)

希望！！这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T08:51:54.583

如果你想像我一样使用 CLI 添加文件，因为我使用远程 mac 进行开发，你可以在 github 上查看[XCodeControl](https://github.com/ikrabbe/XCodeControl)。这种方法比舔某个地方要快得多，至少如果你挂了;）

# vhdl - 如何确定逻辑单元和 MLUTS 的数量

> ID：15189914
> 
> 赞同：0
> 
> 时间：2013-03-03T19:35:43.033
> 
> 标签：vhdl, fpga, hdl

![在此处输入图像描述](../Images/6d71b98597d7fb0ead00c24ac3d736ae.png)

因此，通过查看此图，我试图弄清楚这些答案是如何产生的？有人可以向我解释吗？

A) 寄存器 R0 到 R2 总共需要 32 个逻辑单元，每个单元使用在 Shift Reg 中运行的 1 个 MLUT 实现 3 级移位寄存器。模式。

B) R3 需要 32 个逻辑单元，每个逻辑单元实现一个 RC 加法器，在 ROM 模式下使用 1 个进位和 1 个 MLUT。

C) 减法器和加法器各需要 16 个逻辑单元，在 ROM 模式下使用 1 个 MLUT

D) 比较器在 ROM 模式下需要 16 个逻辑单元和 1 个 MLUT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T21:11:04.047

我假设您正在研究 Xilinx FPGA，但我不确定为什么每个组件只能获得 1 个 MLUT，但我会尝试解释一下。

理解这一点的简单方法是理解逻辑单元包含单个查找表 (LUT)，而 MLUT 只是具有存储能力的 LUT。每个 LUT 能够为一组 6 输入输出 1 位（用于后来的 Xilinx FPGA 系列）。因此，对于每个 1 位输出，您需要一个 LUT。

> B) R3 需要 32 个逻辑单元，每个逻辑单元实现一个 RC 加法器，在 ROM 模式下使用 1 个进位和 1 个 MLUT。
> 
> C) 减法器和加法器各需要 16 个逻辑单元，在 ROM 模式下使用 1 个 MLUT

很容易属于所描述的类别。

现在，让我们看看特殊情况：

> A) 寄存器 R0 到 R2 总共需要 32 个逻辑单元，每个单元使用在 Shift Reg 中运行的 1 个 MLUT 实现 3 级移位寄存器。模式。

消耗 32 个逻辑单元，因为它利用 Xilinx MLUT 中的一种特殊操作模式，即移位寄存器。

> D) 比较器在 ROM 模式下需要 16 个逻辑单元和 1 个 MLUT。

比较器需要 16 个逻辑单元，因为每一级的结果取决于前一级，很像加法器。因此，您需要其中的 16 个才能正确比较结果。

需要注意的是，以上描述仅适用于 Xilinx FPGA，不适用于其他公司的 FPGA。其他公司的 FPGA 设计方法不同，无法直接翻译或比较。

我建议您阅读 Xilinx 的资源网站，了解 LUT 和 CLB 的构建方式。这应该能让你更好地理解。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:35:27.787

什么是 MLUT？这取决于您的 FPGA 架构。只需使用供应商提供的综合工具来获取您设备的编号。

# facebook - Facebook API：通过相册中的 id 获取照片（并更改大小）

> ID：15189916
> 
> 赞同：0
> 
> 时间：2013-03-03T19:35:43.747
> 
> 标签：facebook, facebook-graph-api, photos

我正在使用 iOS 和图形 API，我制作了一个表格单元格以在来自 Facebook 的不同专辑之间进行选择。我希望用户选择一张照片，并通过他的 ID 获取 400x400 的照片 url 就像我通过

[https://graph.facebook.com/id.facebook/picture?width=300&height=300](https://graph.facebook.com/id.facebook/picture?width=300&height=300)

这是请求：

IDFACEBOOK?fields=id,albums.fields(photos.fields(id))

结果如下：

```
{
  "id": "100004371731895",
  "albums": {
    "data": [
      {
        "id": "159236757565381",
        "created_time": "2013-02-28T13:51:13+0000",
        "photos": {
          "data": [
            {
              "id": "159236790898711",
              "created_time": "2013-02-28T13:51:16+0000"
            },
            {
              "id": "159236810898709",
              "created_time": "2013-02-28T13:51:18+0000"
            },
            {
              "id": "159236820898708",
              "created_time": "2013-02-28T13:51:19+0000"
            }
          ]
        }
      },
      {
        "id": "153859634769760",
        "created_time": "2013-02-10T19:27:31+0000",
        "photos": {
          "data": [
            {
              "id": "157894851032905",
              "created_time": "2013-02-23T16:20:18+0000"
            },
            {
              "id": "153859638103093",
              "created_time": "2013-02-10T19:27:31+0000"
            }
          ]
        }
      }
    ]
  }
} 
```

任何人都知道如何进行？提前致谢。再见 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:34:01.273

在您的字段扩展中，请求`images`参数“照片的 4 种不同存储表示”，每个包含`height`、`width`和`source`字段。

因此，字段扩展变为：

`/IDFACEBOOK?fields=id,albums.fields(photos.fields(id,images))`

对于每张照片，使用`source`最接近您需要的尺寸`height`，`width`然后调整图像大小。在 iOS 上有大量关于调整图像大小的教程，请搜索 google。

# asp.net - 通过 FOREACH 传递 LINQ 的结果并显示在标签上

> ID：15189917
> 
> 赞同：0
> 
> 时间：2013-03-03T19:35:45.200
> 
> 标签：asp.net, foreach, label

```
 ChecklistRecordEntry =
            (from CRE in db.Checklist_Record_Entries
             where CRE.Check_List_Records_Id == checklistRecordId
             select CRE).ToList();

        foreach (Checklist_Record_Entry CRE in ChecklistRecordEntry)
        {
            comment.Text = CRE.Comment;
        } 
```

在 2 条记录存储在 'ChecklistRecordEntry' 中，我想遍历它们并将其绑定到标签 'comment' 但每次循环绕过它都会重写前一个

```
<asp:Label ID="comment" runat="server" /> 
```

每次循环时我能做什么，它会在前一个标签下方添加一个新标签（将显示在屏幕上） - 而不是使用相同的标签......谢谢

* * *

感谢大家的回复..所有很好的帮助...虽然尝试在表格的单独行中显示每条记录有点问题

```
<table class="detailstable FadeOutOnEdit">
                <tr>
                    <th style="width:200px;"></th>    
                    <th style="width:200px;">Item</th>    
                    <th style="width:200px;"></th>    
                    <th style="width:200px;"></th>    
                    <th style="width:200px;"><asp:Label ID="CommentHeader" Text="Comment" /></th>    
                </tr>
                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th style="width:200px;"><asp:Label ID="Comment" runat="server"/></th>  
                </tr>
</table> 
```

在一个单元格中显示所有结果...有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:51:28.713

我会推荐一个中继器，它非常简单：

```
<asp:Repeater id="rptComments" runat="server">
    <HeaderTemplate>
        <table class="detailstable FadeOutOnEdit">
            <tr>
                <th style="width:200px;"></th>    
                <th style="width:200px;">Item</th>    
                <th style="width:200px;"></th>    
                <th style="width:200px;"></th>    
                <th style="width:200px;"><asp:Label ID="CommentHeader" Text="Comment" /></th>    
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th style="width:200px;"><%# Eval("Comment") %></th>  
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

然后将数据绑定到转发器：

```
ChecklistRecordEntry =
        (from CRE in db.Checklist_Record_Entries
         where CRE.Check_List_Records_Id == checklistRecordId
         select CRE).ToList();

rptComments.DataSource = ChecklistRecordEntry;
rptComments.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:39:14.233

我宁愿在代码隐藏中使用一些临时字符串变量，这将在 foreach 中由 += 更新，然后在 foreach 完成后分配给comment.Text 这个临时变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:40:37.647

为什么不这样做：

```
foreach (Checklist_Record_Entry CRE in ChecklistRecordEntry)
{
    comment.Text += CRE.Comment + "<br/>";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T19:43:07.557

其他答案很好，但我建议使用`String.Join`.

```
comment.Text = string.Join("<br />", 
    ChecklistRecordEntry.Select(a => a.Comment)); 
```

您也不需要为此使用`ToList()`，因为这将接受`IEnumerable`.

# ios - IBOutletCollection 是否保证顺序正确？

> ID：15189922
> 
> 赞同：31
> 
> 时间：2013-03-03T19:35:57.320
> 
> 标签：ios, ios6

关于带有 NSArray 的 IBOutletCollection，我有两个相互矛盾的来源。首先说您将事物从接口链接到插座集合的顺序很重要，并且在插座集合中始终相同。例如，如果我们首先将第一个文本字段链接到集合，则元素编号 0 将是该字段，等等。

但是另一个消息来源告诉我这是错误的，实际上 Outlet 集合是随机的，并且绝对不能保证事物的顺序。所以元素编号零可以是任何文本字段，而不仅仅是接口中的第一个连接。

“iOS 6 编程 - 探索 iOS SDK”是第一个来源，iTunes 上的斯坦福课程是第二个来源。谁是对的？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2018-05-29T09:30:39.877

只需分配控件的顺序`tag`并在加载时重新排序它们。

## 属性观察：

```
@IBOutlet var btnCollection: [UIButton]! {
    didSet {
        btnCollection.sort { $0.tag < $1.tag }
    }
} 
```

## 在 viewDidLoad 中：

```
override func viewDidLoad() {
    super.viewDidLoad()
    btnCollection = btnCollection.sorted { $0.tag < $1.tag }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-03T19:44:25.543

两种来源都是正确的：一方面，由于 Interface Builder 的实现细节，您添加项目的顺序`IBOutletCollection`将在检索时保持；另一方面，您应该避免在代码中使用该顺序，因为无法检查此顺序。

想象一下接管别人的项目。如果您在 上看到一个循环`IBOutletCollection`，请注意迭代的顺序很重要，并决定检查该顺序是什么或强制执行新顺序，您将必须删除控件并将其重新添加到您的插座集合中。这就是为什么你应该将你的`IBOutletCollection`元素视为无序的。如果需要维护特定的顺序，请将元素复制到 中`NSArray`，根据某个已知属性对它们进行排序，然后迭代复制的集合。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-26T16:26:19.780

似乎在 Xcode 7.x IBOutlet 集合中是有序的。

当然，您可以按需要的顺序将**标签属性分配给集合中的每个元素，并执行类似的操作**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.outletCollection = [self.outletCollection sortedArrayUsingDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"tag" ascending:YES]]];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-01T11:35:13.573

在 Xcode 7.2 中，IBOutlet 集合按照建立连接的方式排序。我确实在 iOS 8.2 和 9.2 上使用 Swift 对其进行了测试。

# ruby-on-rails - rails保存父类数据

> ID：15189928
> 
> 赞同：0
> 
> 时间：2013-03-03T19:36:37.257
> 
> 标签：ruby-on-rails, ruby, save, associations

我正在通过子对象更新信息，但我似乎无法获取其父对象来保存数据。情况就是这样。

```
class NewsPage < Content
   content_fields :body 
```

内容有一个列调用正文，所以我可以执行以下操作：

```
newsPage1.body 
```

我想将page2的正文复制到page1中：

```
newsPage1.body << newsPage2.body 
```

如果我打印 newsPage1.body 我会把两个主体都放在那里..但是一旦请求完成，newsPage1.body 将重置为其原始状态..我认为是因为发生这种情况时我没有访问 Content 的表.. . 那么如何将newsPage1 的内容正文保存到内容的页面列中呢？我可能是错的，这可能是由于其他原因..和这个人一样的问题，但他从来没有得到答案： [@article.save 似乎保存的是旧内容而不是更新的内容](https://stackoverflow.com/questions/13479359/article-save-seems-save-the-old-content-not-the-updated-one)

编辑以添加我之前链接的帖子中的代码：

```
 def my_method(other_id)
    self.rating << NewsPage.find(other_id).rating
    self.body << NewsPage.find(other_id).body
    return self   
  end 
```

在我的控制器中，这被称为如下定义：

```
 def copy 
    @newsPage = NewsPage.find(params[:id])
    @copiedNewsPage = @newsPage.my_method(params[other_id])

    redirect_to :action => 'main'   
  end 
```

所以收视率复制OK，但正文没有，有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:35:53.600

我在尝试理解您的问题时遇到了麻烦，并且通过您编写的几行代码，我也很难了解您在做什么，请尝试添加更多代码并更好地解释您的问题. 如果其他人无法重现您的问题，那么他将无法帮助您。

但这听起来像是质量属性问题，请尝试使用以下代码：

```
class NewsPage < Content
  attr_accessible :body
  content_fields :body 
```

让我知道它是否有效。谢谢

# xcode - 错误命名的视图控制器

> ID：15189930
> 
> 赞同：0
> 
> 时间：2013-03-03T19:36:39.957
> 
> 标签：xcode

我所有的课程都自动以“BS”为前缀。故事板中的两个视图控制器似乎仅以“S”为前缀。我不知道这是否是一个问题，但我想改变它，如果它可能是一个问题。图像中场景停靠栏和对象实用程序列表中的名称不正确。![图像中的场景停靠栏以及对象实用程序列表中的名称不正确](../Images/d1b8370c716a105829a6a5a565cbe35e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:02:17.297

只要您在代码中使用该名称，您就可以为您的 VC 选择任何名称。

要更改类的名称，请在 @implementation 行中单击您的类的名称：

```
@implementation classNameClickOnMe 
```

然后编辑 > 重构 > 重命名

保存快照以防万一。唯一不会更新类名的地方是 .m 和 .h 文件顶部的注释部分，您必须手动更改它们。

# signal-processing - Beaglebone 上的 DSP

> ID：15189932
> 
> 赞同：4
> 
> 时间：2013-03-03T19:36:46.137
> 
> 标签：signal-processing, beagleboard

我有一个运行 Ubuntu 的 Beaglebone。我们希望以 100KS/s 的速度从 3 个板载 ATD 转换器连续采样，并且每个采样窗口我们将运行一个互相关 DSP 算法。一旦我们找到一个高于阈值的相关值，我们就会将该值发送到 PC。

我关心的是 Ubuntu 中的进程调度。如果我们的进程被换出并且在此期间 ATD 样本可用，则该进程将丢失该样本。我们需要确保我们的进程将捕获每个样本并将其保存在内存中。

*话虽如此，有没有办法在 Beaglebone 上触发中断，这样如果 ATD 样本准备好，即使程序当时没有处理器，*样本也会保存在我们程序的内存中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:32:32.090

您可能能够触发 EDMA 或使用 PRUSS。最好在 beagleboard@googlegroups.com 上询问。BeagleBone 本身没有 DSP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:20:11.900

这不完全是您问题的答案，但希望它解释了该过程的工作原理。由于您没有提到您正在为 AD 转换运行什么硬件，所以也许这是可以做到的最好的：

对于面临同样问题的音频硬件，解决方案来自硬件和驱动程序的协同工作：只要硬件已填满足够的缓冲区，它就会向驱动程序发出信号（通过中断或某种类似机制）。在某些情况下，驱动程序也可能轮询硬件或类似的东西，但这是一种效率较低的解决方案，我不确定是否有人再这样做（也许在更便宜的硬件上？）。从那里，驱动程序进程可以直接调用最终用户进程，或者它可以简单地将相关的最终用户进程标记为“可运行”。无论哪种方式，都需要将控制权转移到最终用户进程。

为此，最终用户进程必须以比当时占用 CPU 的任何其他进程更高的优先级运行。为了保证您的进程始终排在队列的首位，您可以以高优先级运行它，在适当的权限下，您甚至可以以非常高的优先级运行。

最高优先级进程从可运行到运行所需的时间有时被称为操作系统的“延迟”，尽管我确信有一个更具体的技术术语。Linux 的延迟大约为 1 毫秒，但由于它不是“硬”实时操作系统，因此不能保证。如果这太长而无法处理您的数据块，您可能必须在驱动程序中缓冲一些数据。

# php - Facebook PHP SDK突然抛出Oauth错误

> ID：15189934
> 
> 赞同：0
> 
> 时间：2013-03-03T19:36:52.207
> 
> 标签：php, facebook

就在最近，我在调用 $facebook->api('/me'); 时开始收到以下错误。

2013 年 3 月 3 日 19:29:47：OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。

目前我正在使用 PHP SDK，直到一段时间一切都很好，这与最近的任何变化有关吗？

在有人问“是”之前，我的访问令牌有效，我几乎每天都登录自己的应用程序！

谢谢

马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:05:58.697

看起来像一个已经存在的错误。这里是[链接](https://developers.facebook.com/bugs/238039849657148)。尽管预计会在 php sdk v3.2.2 中修复，但随机发生仍然存在。

希望这可以帮助。

# sql - ActiveRecord find_each 结合limit和order

> ID：15189937
> 
> 赞同：71
> 
> 时间：2013-03-03T19:37:09.657
> 
> 标签：sql, ruby-on-rails, activerecord

我正在尝试使用 ActiveRecord 的`find_each`方法运行约 50,000 条记录的查询，但它似乎忽略了我的其他参数，如下所示：

```
Thing.active.order("created_at DESC").limit(50000).find_each {|t| puts t.id } 
```

我不想在 50,000 处停止并按 排序，而是在*整个*`created_at`数据集上执行的结果查询：

 *```
Thing Load (198.8ms)  SELECT "things".* FROM "things" WHERE "things"."active" = 't' AND ("things"."id" > 373343) ORDER BY "things"."id" ASC LIMIT 1000 
```

有没有办法获得类似的行为，`find_each`但有一个总最大限制并尊重我的排序标准？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-11-06T17:21:12.457

[文档](http://api.rubyonrails.org/classes/ActiveRecord/Batches.html)说 find_each 和 find_in_batches 不保留排序顺序和限制，因为：

*   PK 上的排序 ASC 用于使批量排序工作。
*   限制用于控制批量大小。

你可以像@rorra 那样编写你自己的这个函数版本。但是在改变对象时可能会遇到麻烦。例如，如果您按 created_at 排序并保存对象，它可能会在下一批中再次出现。同样，您可能会跳过对象，因为在执行查询以获取下一批时结果的顺序发生了变化。仅将该解决方案与只读对象一起使用。

现在我主要担心的是我不想一次将 30000 多个对象加载到内存中。我关心的不是查询本身的执行时间。因此，我使用了一个执行原始查询但只缓存 ID 的解决方案。然后它将 ID 数组划分为块并查询/创建每个块的对象。通过这种方式，您可以安全地改变对象，因为排序顺序保存在内存中。

这是一个类似于我所做的最小示例：

```
batch_size = 512
ids = Thing.order('created_at DESC').pluck(:id) # Replace .order(:created_at) with your own scope
ids.each_slice(batch_size) do |chunk|
    Thing.find(chunk, :order => "field(id, #{chunk.join(',')})").each do |thing|
      # Do things with thing
    end
end 
```

此解决方案的权衡是：

*   执行完整的查询以获取 ID
*   所有 ID 的数组都保存在内存中
*   使用 MySQL 特定的 FIELD() 函数

希望这可以帮助！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-03T20:11:12.893

[*find_each*](http://apidock.com/rails/ActiveRecord/Batches/find_each)在后台使用[*find_in_batches*](http://apidock.com/rails/ActiveRecord/Batches/find_in_batches)。

无法选择记录的顺序，如*find_in_batches*中所述，自动将主键（“id ASC”）设置为升序以使批处理排序工作。

但是，应用了标准，您可以做的是：

```
Thing.active.find_each(batch_size: 50000) { |t| puts t.id } 
```

关于限制，还没有实现： [https ://github.com/rails/rails/pull/5696](https://github.com/rails/rails/pull/5696)

* * *

回答您的第二个问题，您可以自己创建逻辑：

```
total_records = 50000
batch = 1000
(0..(total_records - batch)).step(batch) do |i|
  puts Thing.active.order("created_at DESC").offset(i).limit(batch).to_sql
end 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-07-23T17:58:23.420

检索第`ids`一个并处理`in_groups_of`

```
ordered_photo_ids = Photo.order(likes_count: :desc).pluck(:id)

ordered_photo_ids.in_groups_of(1000, false).each do |photo_ids|
  photos = Photo.order(likes_count: :desc).where(id: photo_ids)

  # ...
end 
```

`ORDER BY`将查询添加到内部调用也很重要。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-25T07:28:42.847

一种选择是将为您的特定模型量身定制的实现放入模型本身（说到这，`id`通常是订购记录的更好选择，`created_at`可能有重复）：

```
class Thing < ActiveRecord::Base
  def self.find_each_desc limit
    batch_size = 1000
    i = 1
    records = self.order(created_at: :desc).limit(batch_size)
    while records.any?
      records.each do |task|
        yield task, i
        i += 1
        return if i > limit
      end
      records = self.order(created_at: :desc).where('id < ?', records.last.id).limit(batch_size)
    end
  end
end 
```

或者你可以概括一下，让它适用于所有模型：

`lib/active_record_extensions.rb`：

```
ActiveRecord::Batches.module_eval do
  def find_each_desc limit
    batch_size = 1000
    i = 1
    records = self.order(id: :desc).limit(batch_size)
    while records.any?
      records.each do |task|
        yield task, i
        i += 1
        return if i > limit
      end
      records = self.order(id: :desc).where('id < ?', records.last.id).limit(batch_size)
    end
  end
end

ActiveRecord::Querying.module_eval do
  delegate :find_each_desc, :to => :all
end 
```

`config/initializers/extensions.rb`：

```
require "active_record_extensions" 
```

PS我根据[这个答案](https://stackoverflow.com/a/2329394/52499)将代码放入文件中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-06-29T08:01:46.590

Rails 6.1 增加[了](https://blog.saeloun.com/2020/04/29/rails-support-descending-order-for-find-each-find-in-batches.html)对`find_each`,`find_in_batches`和`in_batches`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-20T23:20:33.997

您可以通过标准 ruby​​ 迭代器向后迭代：

```
Thing.last.id.step(0,-1000) do |i|
  Thing.where(id: (i-1000+1)..i).order('id DESC').each do |thing|
    #...
  end
end 
```

注意：`+1`是因为 BETWEEN 将在查询中包含两个边界，但我们只需要包含一个。

当然，使用这种方法可以批量获取少于 1000 条记录，因为其中一些已被删除，但在我的情况下这没问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-10T15:25:47.370

正如@Kirk 在其中一条评论中所说，从版本[5.1.0](https://github.com/rails/rails/blob/5-1-stable/activerecord/CHANGELOG.md#rails-510-april-27-2017)`find_each`开始支持。`limit`

变更日志中的示例：

```
Post.limit(10_000).find_each do |post|
  # ...
end 
```

[文档](https://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_each)说：

> 遵守限制，如果存在，则对批量大小没有要求：它可以小于、等于或大于限制。

（虽然仍然不支持设置自定义订单）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-29T02:09:32.877

我一直在寻找相同的行为并想出了这个解决方案。这不是由 created_at 订购的，但我想我还是会发布。

```
max_records_to_retrieve = 50000
last_index = Thing.count
start_index = [(last_index - max_records_to_retrieve), 0].max
Thing.active.find_each(:start => start_index) do |u|
    # do stuff
end 
```

这种方法的缺点： - 您需要 2 个查询（第一个应该很快） - 这可以保证最多 50K 记录，但如果跳过 id，您将获得更少。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-08-31T21:11:13.397

您可以尝试**[ar-as-batches](https://github.com/telent/ar-as-batches)** Gem。

从他们的[文档](http://ww.telent.net/2012/5/4/changing_sort_order_with_activerecord_find_in_batches)中，您可以执行以下操作

```
Users.where(country_id: 44).order(:joined_at).offset(200).as_batches do |user|
  user.party_all_night!
end 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-17T13:35:50.430

使用[Kaminari](https://github.com/kaminari/kaminari)或其他东西会很容易。

## 创建批处理加载器类。

```
module BatchLoader
  extend ActiveSupport::Concern

  def batch_by_page(options = {})
    options = init_batch_options!(options)

    next_page = 1

    loop do
      next_page = yield(next_page, options[:batch_size])

      break next_page if next_page.nil?
    end
  end

  private

  def default_batch_options
    {
      batch_size: 50
    }
  end

  def init_batch_options!(options)
    options ||= {}
    default_batch_options.merge!(options)
  end
end 
```

## 创建存储库

```
class ThingRepository
  include BatchLoader

  # @param [Integer] per_page
  # @param [Proc] block
  def batch_changes(per_page=100, &block)
    relation = Thing.active.order("created_at DESC")

    batch_by_page do |next_page|
      query = relation.page(next_page).per(per_page)
      yield query if block_given?
      query.next_page
    end
  end
end 
```

## 使用存储库

```
repo = ThingRepository.new
repo.batch_changes(5000).each do |g|
  g.each do |t|
    #...
  end
end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-18T12:41:00.130

添加 find_in_batches_with_order 确实解决了我的用例，我已经有 id 但需要批处理和排序。它的灵感来自@dirk-geurs 解决方案

```
# Create file config/initializers/find_in_batches_with_order.rb with follwing code.
ActiveRecord::Batches.class_eval do
  ## Only flat order structure is supported now
  ## example: [:forename, :surname] is supported but [:forename, {surname: :asc}] is not supported
  def find_in_batches_with_order(ids: nil, order: [], batch_size: 1000)
    relation = self
    arrangement = order.dup
    index = order.find_index(:id)

    unless index
      arrangement.push(:id)
      index = arrangement.length - 1
    end

    ids ||= relation.order(*arrangement).pluck(*arrangement).map{ |tupple| tupple[index] }
    ids.each_slice(batch_size) do |chunk_ids|
      chunk_relation = relation.where(id: chunk_ids).order(*order)
      yield(chunk_relation)
    end
  end
end 
```

在这里留下要点[https://gist.github.com/the-spectator/28b1176f98cc2f66e870755bb2334545](https://gist.github.com/the-spectator/28b1176f98cc2f66e870755bb2334545)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-17T19:45:39.637

`DISTINCT ON`我在查询需要该字段的位置时遇到了同样的问题`ORDER BY`，所以这是我使用 Postgres 的方法：

```
def filtered_model_ids
  Model.joins(:father_model)
       .select('DISTINCT ON (model.field) model.id')
       .order(:field)
       .map(&:id)
end

def processor
  filtered_model_ids.each_slice(BATCH_SIZE).lazy.each do |batch|
    Model.find(batch).each do |record|
      # Code
    end
  end
end 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-09-11T08:44:36.303

在一个查询中执行并避免迭代：

`User.offset(2).order('name DESC').last(3)`

将产生这样的查询

`SELECT "users".* FROM "users" ORDER BY name ASC LIMIT $1 OFFSET $2 [["LIMIT", 3], ["OFFSET", 2]`*

# php - SaaS - 单一应用程序但单独的数据库方法 - PHP 和 MySQL

> ID：15189940
> 
> 赞同：1
> 
> 时间：2013-03-03T19:37:26.553
> 
> 标签：php, mysql, saas

我正要创建我的第一个 SaaS 应用程序。考虑过创建一个前端应用程序，但为每个客户端创建单独的数据库。

但在开始之前，做了一些研究，发现了这份白皮书：http: [//msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

注意确定我是否完全理解了那里提到的东西。但我觉得自己像一个孤立的人，即。每个客户端单独的数据库更好。因为它允许我们轻松地分别备份或恢复每个客户端的数据库。

在这里，用户还建议使用单独的数据库：[Multi Organization SaaS mySQL Setup?](https://stackoverflow.com/questions/11148158/multi-organization-saas-mysql-setup)

因此，我将保留一个主数据库来保存客户端信息，其中包括为该客户端创建的数据库名称。我遇到的问题是，我应该创建一个 db_user 并将这个 db_user 关联到所有数据库吗？

还是我必须创建单独的数据库用户并将其附加到每个数据库？也就是说，每个数据库都有不同的数据库用户。

例如：

```
DB Name     | DB User
------------------------
abc_db1 ----|     
abc_db2 ----|     
abc_db3 ----|---> dbuser   
abc_db4 ----|     
abc_db5 ----|     

DB Name     | DB User
---------------------
abc_db1 ----> dbuser_1
abc_db2 ----> dbuser_2
abc_db3 ----> dbuser_3
abc_db4 ----> dbuser_4 
```

在这两者中，哪一个是更好的选择？所有数据库的单个数据库用户或每个数据库的单独用户？

谢谢

# haskell - Haskell：使用 MapReduce 搜索子字符串？

> ID：15189941
> 
> 赞同：3
> 
> 时间：2013-03-03T19:37:32.743
> 
> 标签：haskell

我正在尝试使用现有的 MapReduce 实现（**Real World Haskell**中的那个）编写一个简单的程序。

作为使用框架的一个例子，这里有一些代码来计算文件中的单词数：

```
module Main where

import Control.Monad (forM_)
import Data.Int (Int64)
import qualified Data.ByteString.Lazy.Char8 as LB
import System.Environment (getArgs)

import LineChunks (chunkedReadWith)
import MapReduce (mapReduce, rdeepseq)

wordCount :: [LB.ByteString] -> Int
wordCount = mapReduce rdeepseq (length . LB.words)
                      rdeepseq sum

main :: IO ()
main = do
  args <- getArgs
  forM_ args $ \path -> do
    numWords <- chunkedReadWith wordCount path
    putStrLn $ "Words: " ++ show numWords 
```

我需要使用相同的 MapReduce 框架来编写一个程序来搜索一些字符串（比如“il”），并返回找到它们的行号。例如，输出可能是：

```
verILy: found on lines 34, 67, 23
ILlinois: found on lines 1, 2, 56
vILla: found on lines 4, 5, 6 
```

（“il”的大写不是必需的。）

我是 Haskell 初学者，还没有任何具体的想法。我确实注意到 Data.ByteString.Lazy.Char8 类有一个成员函数`findIndices`。可以使用这个吗？

任何正确方向的代码或提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:54:09.787

好吧，让我们打这个。

* * *

首先，我们需要一种在字符串中查找单词的方法。这可以使用正则表达式来完成，比如说[`regex-tdfa`](http://hackage.haskell.org/package/regex-tdfa)包。Haskell 正则表达式包很好，但非常通用，一开始有点难以阅读。我们将创建一个函数，它只是匹配运算符的包装器，`(=~)`主要是为了使类型具体化。

```
wordHere :: LB.ByteString -> LB.ByteString -> Bool
wordHere word string = string =~ word
-- a.k.a.            = flip (=~) 
```

* * *

现在，通过将大量并行的*本地*“映射”作业类型分配给不同的spark 来`mapReduce`分解列表，然后将 reduce 作业中的所有结果折叠为. 一般来说，reduce 步骤的*顺序*不能保证，但 RWH实际上确实给了我们这样的保证。`([a] -> c)`*`(a -> b)``([b] -> c)`*`mapReduce`**

 **RWH 的`lineChunks`函数实际上将文档 (LB.ByteString -> [LB.ByteString]) 拆分为少量行的块。我们的映射作业每个都获得这些块之一，并且需要在本地提供有关行匹配的信息。我们可以通过将块拆分为它们的组成行，对行进行*本地*编号，映射`wordHere`到它们，并收集`wordHere`返回 true 的本地行号来做到这一点。我们通常会先做它，用`wordHere`任何谓词替换`p :: (LB.ByteString -> Bool)`

```
import Control.Arrow

localLinesTrue :: (LB.ByteString -> Bool) -> [LB.ByteString] -> [Int]
localLinesTrue p ls = map fst . filter snd . map (second p) . zip [1..] 
```

现在我们可以创建本地映射器，例如`localLinesTrue (wordHere $ LB.pack "foobar") . LB.lines :: LB.ByteString -> [Int]`.

给定该类型的映射器还稍微阐明了函数其余部分的类型。我们现在有

```
>>> :t mapReduce rdeepseq (localLinesTrue (wordHere "foo")) rdeepseq
...    :: ([[Int]] -> c) -> [LB.ByteString] -> c 
```

所以我们的 reducer 必须是 type `([[Int]] -> c)`。酷，让我们试着做到这一点。如果我们有一个 s 列表的列表，`Int`我们可以重建实际的行号......

```
[[], [], [], [5], [3], [], []] 
```

等等，实际上，我们不能。我们需要在映射器中添加更多信息——每个块中出现的行数。幸运的是，由于我们小心翼翼地让我们的东西解开，这很容易添加。我们需要一个更像`([Int], Int)`第二个参数是该块的行数的返回类型。我们可以用 "fanout" 做到这一点`(&&&)`。

```
mapper regex = (localLinesTrue (wordHere regex) &&& length) . LB.lines 
```

现在我们的输出看起来像

```
[ ([], 3),  ([], 5),  ([3, 5], 10), ... ] 
```

我们可以实现一个只使用`State`monad计数的 reducer

```
reducerStep :: ([Int], Int) -> State Int [Int]
reducerStep (hits, count) = do pos <- get
                               modify (+count)
                               return (map (+pos) hits)

reducer :: [([Int], Int)] -> [Int]
reducer = concat . evalState 0 . mapM reducerStep 
```

我们有

```
mapReduce rdeepseq (mapper regex)
          rdeepseq reducer
  :: [LB.ByteString] -> [Int] 
```

这应该能让你完成 95% 的工作。**

# php - 将 $startOfLine 指针移动到下一行的开头

> ID：15189942
> 
> 赞同：0
> 
> 时间：2013-03-03T19:37:32.763
> 
> 标签：php, string

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Justifying Lines of Text</title>
<link rel="stylesheet" type="text/css" href="common.css" />
<style>
pre {font-family: Courier, monospace;}
</style>
</head>
<body>
<h1>Justifying Lines of Text</h1>

<?php

// The text to justify

$myText = <<<END_TEXT
But think not that this famous town has
only harpooneers, cannibals, and
bumpkins to show her visitors. Not at
all. Still New Bedford is a queer place.
Had it not been for us whalemen, that
tract of land would this day perhaps
have been in as howling condition as the
coast of Labrador.

END_TEXT;

$myText = str_replace( "\r\n", "\n", $myText );

$lineLength = 40; // The desired line length
$myTextJustified = "";
$numLines = substr_count( $myText, "\n" );
$startOfLine = 0;

// Move through each line in turn

for ( $i=0; $i < $numLines; $i++ ) {
  $originalLineLength = strpos( $myText, "\n", $startOfLine ) - $startOfLine;
  $justifiedLine = substr( $myText, $startOfLine, $originalLineLength );
  $justifiedLineLength = $originalLineLength;

  // Keep adding spaces between words until the desired
  // line length is reached

  while ( $i < $numLines - 1 && $justifiedLineLength < $lineLength ) {
    for ( $j=0; $j < $justifiedLineLength; $j++ ) {
      if ( $justifiedLineLength < $lineLength && $justifiedLine[$j] == " " ) {
        $justifiedLine = substr_replace( $justifiedLine, " ", $j, 0 );
        $justifiedLineLength++;
        $j++;
      }
    }
  }

  // Add the justified line to the string and move to the
  // start of the next line

  $myTextJustified .= "$justifiedLine\n";
  $startOfLine += $originalLineLength + 1; 
```

书中对上述行的解释是“$startOfLine 指针移动到下一行的开头（索引加**1**以跳过换行符）。

我的问题是：

换行符“\n”不应该包含两个字符吗？为了跳过它，我们不应该给变量 $startOfLine 添加 2 而不是 1 吗？

让我们看一个简单的例子：

```
$myText = "Hello\nworld\n"

strpos ( $myText, "\n", 0); //Returns 5, which is also the length of the first line "Hello"
0+5+1; //Returns 6\. It should be the index of the first character of the second line (w). But it's actually the index of the "n" right in front of it
strpos ( $myText, "\n", 6); //Returns 12
12-6   //Returns 6\. This should be the length of the second line. But the second line actually contains 5 characters. 
```

但是，如果我将 1 更改为 2，脚本将无法正常工作。有什么问题？

```
}

?>

<h2>Original text:</h2>
<pre><?php echo $myText ?></pre>

<h2>Justified text:</h2>
<pre><?php echo $myTextJustified ?></pre>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:54:40.570

我认为您正在寻找[wordwrap()](http://php.net/manual/en/function.wordwrap.php)来证明文本的合理性。

```
<?php
$text = "The quick brown fox jumped over the lazy dog.";
$newtext = wordwrap($text, 20, "<br />\n");

echo $newtext;
?> 
```

输出：

```
The quick brown fox<br />
jumped over the lazy<br />
dog. 
```

# c - for循环中的顺序是什么？

> ID：15189945
> 
> 赞同：-1
> 
> 时间：2013-03-03T19:37:49.210
> 
> 标签：c, math, loops, for-loop

我正在尝试解决项目 euler 的问题 5，但我一直得到的答案是错误的：

```
#include <stdio.h>

main() 
{
    int num;
    int x = 0;
    for (num = 20; x == 0; num++)
    {
        if ((num%1) == 0 && (num%2) == 0 && (num%3) == 0 && (num%4) == 0 && (num%5) == 0 && (num%6) == 0 && (num%7) == 0 && (num%8) == 0 && (num%9) == 0 && (num%10) == 0 && (num%11) == 0 && (num%12) == 0 && (num%13) == 0 && (num%14) == 0 && (num%15) == 0 && (num%16) == 0 && (num%17) == 0 && (num%18) == 0 && (num%19) == 0 && (num%20) == 0)
        x = 1;
    }
    printf("%d %d", num, x);
} 
```

我的程序不断打印出来`232792561`（我知道我正在打印 x，这只是为了排除故障）。

我得到的逐字输出是：`232792561 1`.

我做了一些研究，发现问题的正确答案是`232792560`. 我现在开始相信问题出在 for 循环中。

循环首先做什么，迭代（`num++`）还是测试（`x == 0`）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-03T19:41:37.727

for 循环可以转换为等效的 while 循环：

```
for (num = 20; x == 0; num++) {
    // do stuff
} 
```

是相同的

```
num = 20;
while (x == 0) {
    // do stuff, then
    num++;
} 
```

所以首先检查条件，然后执行循环体，然后执行增量。

（是的，正如其他人所建议的，如果您`break;`在需要时退出循环，则需要正确的结果，因为`break;`立即跳出循环，因此不会最后一次执行递增语句。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T19:40:24.130

循环体执行后（如果有的话，因为首先运行初始化代码，然后检查条件以查看是否进入了循环体），

*   首先运行更新代码
*   然后检查条件。

因此，在您设置`x`为 1 后，`num`再次递增。

而不是设置`x`为 1 来结束循环，您可以简单地`break;`退出循环而不运行更新代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:44:56.307

您的循环不必要地复杂，`while`如果您愿意，可以使用循环构造进行简化。您还可以摆脱不必要的变量`x`

```
int main() {
    int num = 20;
    while (!((num%1) == 0 && (num%2) == 0 && (num%3) == 0 && (num%4) == 0 && (num%5) == 0 && (num%6) == 0 && (num%7) == 0 && (num%8) == 0 && (num%9) == 0 && (num%10) == 0 && (num%11) == 0 && (num%12) == 0 && (num%13) == 0 && (num%14) == 0 && (num%15) == 0 && (num%16) == 0 && (num%17) == 0 && (num%18) == 0 && (num%19) == 0 && (num%20) == 0))
    {
        ++num;
    }
    printf("%d\n", num);
    return 0;
} 
```

要回答为什么你的 for 循环给出了不正确的答案：

尽管您设置`x = 1`了正确的值`num`，但您在循环的下一次迭代中检查了`for loop`ONLY 的条件（即在`num++`执行语句之后），因此您的值`num`偏移了 1。

正如许多人建议的那样，您可以使用该`break`语句终止 for 循环执行，以便`num`当控件到达循环外部时，您希望它的值是您想要的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T19:41:31.050

第 1 步：初始化 ( `num = 20`)
第 2 步：测试
第 3 步：迭代
第 4 步：测试
第 5 步：迭代
等等。

如果我是你，我会选择`while`带有条件的循环作为你的循环（我的意思是 for 循环中的长循环），它的主体是递增的。

# java - 制作一个通用的比较器类

> ID：15189949
> 
> 赞同：16
> 
> 时间：2013-03-03T19:38:20.973
> 
> 标签：java, generics, types, comparator

我正在尝试制作一个可以比较任何类型的元素的比较器。我不确定如何创建课程。我只是想让它比较相同类型的两个元素（但无论客户端给它什么类型，例如：整数、字符串、双精度等），看看哪个比另一个更大。

```
public class InsertionComparator implements Comparator<T>
{
/**
 * Compares two elements.
 * 
 * @param  f1  The first element you want to compare.
 * @param  f2  The second element you want to compare.
 * @return  -1,0,1  Whether or not one is greater than, less than,
 * or equal to one another.
 */
public int compare(<T> element1,<T> element2)
{
    if(element1 < element2)
    {
        return -1;
    }
    else
    {
        if(element1 > element2)
        {
            return 1;
        }
        else
        {
            return 0;
        }
    } 
}
} 
```

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-03T19:41:58.707

您可以做的最接近的事情是`Comparator`可以比较任何实现该`Comparable`接口的对象：

```
class NaturalComparator<T extends Comparable<T>> implements Comparator<T> {
  public int compare(T a, T b) {
    return a.compareTo(b);
  }
} 
```

这确实是您可以做的最接近的事情：只有`Comparable`对象具有您要在此处建模的“自然顺序”。但一般来说，一旦有了`Comparable`对象，就不一定*需要*`Comparator`: 例如，`Collections.sort`可以使用 a和`List`a`Comparator`或 a`List`和`Comparable`元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T19:43:39.827

1.  如果不对类型进行一些假设，就无法为所有内容编写单个比较器。您如何处理自定义类？您如何确定哪一个比另一个更大？对于野外的更多类，比较器没有意义。

2.  另一方面，如果您将自己限制为 String、Integer、Double，那么它们是 Comparable 并且您可以简单地使用 compareTo() 方法编写比较器：

    ```
    public int compare(T element1,T element2)
    {
        return element1.compareTo(element2);
    } 
    ```

但是你会简单地使用元素的自然顺序，它会破坏使用比较器的目的。在这些情况下，您通常不需要一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T19:49:47.760

我不知道这是否一定有用，但不可能实现有意义的通用比较器。

多亏了反射接口，例如，您可以按对象的类名对对象进行排序。或者甚至可能以某种方式通过他们的类层次结构。例如，父母之后的孩子。

或者您可以根据他们的 toString() 方法产生的内容对它们进行排序。或哈希码（）。毕竟，每个对象都有它们。

无论您做什么，请记住考虑任何一个元素都可能为空。

我想我们需要知道你需要这个通用比较器做什么。

# django - Django-RestFramework 2 和backbone.js 路由

> ID：15189950
> 
> 赞同：1
> 
> 时间：2013-03-03T19:38:24.793
> 
> 标签：django, backbone.js, django-rest-framework

我对使用backbone.js 和django 以及Django-restframework 时设置的路由和url 感到非常困惑。

1.  使用 REST 框架时，模板适用于何处？

例如，我为我的一个 url 定义了一个基于类的视图，我想在其中使用主干.js 来更新`div`显示的学生：

```
url(r'^home/students/$', views.StudentList.as_view()),

class StudentList(APIView):
    """
    List all students
    """
    def get(self, request, format=None):
        students = Person.objects.filter(person_type = Person.STUDENT)
        serializer = PersonSerializer(students)
        return Response(serializer.data, "core/teachers/teacher_teaching.html")

    def pre_save(self, obj):
        obj.owner = self.request.user 
```

*   Backbone 路由如何与 django 的 url 路由相匹配。我有一个文件router.js，是这样的：

    ```
    function($,jqueryui, _, Backbone, HomeView, StudentsView) {

    var AppRouter = Backbone.Router.extend({
        routes: {
            // Define some URL routes
            ':home': 'showStudents',
            'users': 'showContributors',

            // Default
            '*actions': 'defaultAction'
        }
    });

    var initialize = function(){

        var app_router = new AppRouter;

        app_router.on('route:showStudents', function(){

            // Call render on the module we loaded in via the dependency array
            var studentsView = new StudentsView();
            studentsView.render();
        }); 
    ```

然而这些路线从来没有真正达到我的观点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T21:22:03.610

> > 使用 REST 框架时，模板适用于何处？

它没有；Django 模板适用于普通的 Django HTML 页面，而不是 REST 框架 API。REST framework API 响应是以编程方式生成的文档（通常是 JSON 或 XML），因此它们不需要模板。

> > Backbone 路由如何适应 django 的 url 路由

它们是 100% 完全独立的。假设您有一个如下 URL：

```
www.example.com/foo/bar#baz 
```

Django 将处理这么多的 URL：

```
www.example.com/foo/bar 
```

而 Backbone 将处理剩余的：

```
#baz 
```

当然，这假设 Django 返回一个使用 Backbone 的网页；如果没有，the`#baz`将永远不会进来玩。

简要总结一下，当您访问上述 URL 时，您的浏览器会要求`www.example.com/`输入`/foo/bar`. 这是你`urls.py`的 Django 进来的时候；它有：

```
url(r'^foo/bar/?$', views.FooBar.as_view()), 
```

所以你的网络服务器知道将任何给它的东西发回`views.FooBar.as_view()`（无论是 REST 框架生成的 JSON 文档还是老式的 Django HTML 文档）。

一旦该文档返回到服务器，它就会呈现它，这就是像 Backbone 和它的路由器这样的客户端代码轮到它们的地方。骨干路由器（无论何时调用`Backbone.history.start()`）都会查看 URL（即`window.location`）并查找 URL 的锚点或“散列”部分（例如`#baz`）。然后它将 URL 的该部分与其路由列表进行比较（类似于您的网络服务器如何将前面的部分与 urls.py 进行比较），如果找到匹配项，它会“将您发送到一个页面”。

不过，理解这一点很关键，它根本不会真正把你送到任何地方。它真正做的就是改变 URL 的哈希部分，然后运行一些 Javascript 来操纵 DOM。因此，骨干路由器不可能将您发送到 Django URL；如果要访问服务器路由，则需要使用 AJAX 或`window.location =`.

# python - 为什么这个函数也返回“None None”？

> ID：15189954
> 
> 赞同：2
> 
> 时间：2013-03-03T19:38:35.770
> 
> 标签：python, printing, return

*我已经对此进行了搜索并遇到了列表返回功能，但我仍然不明白。*

我试图理解为什么 Print 函数到另一个函数会返回以下内容：

**生日快乐**

**生日快乐**

**无 无**

我的代码：

```
def happy():
    print("Happy Birthday")

def main(): 

    print( happy(), happy() )

main() 
```

我知道该函数返回名为：None 的特殊对象。但我只是想了解它为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T19:39:43.367

每个函数总是返回一个值。如果你没有显式地返回一个值，并且函数一直到最后，那么它会自动返回 None。您的函数`happy`没有任何`return`语句，因此在函数结束时，它会自动返回 None。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T19:41:18.543

当您调用happy() 时返回无，因此在调用每个函数后您正在打印

打印（无，无）

# php - PhalconPHP模型

> ID：15189955
> 
> 赞同：2
> 
> 时间：2013-03-03T19:38:52.313
> 
> 标签：php, dependency-injection, models, phalcon

我有两个与 Phalcon 中的模型相关的问题，我正在努力寻找答案：

1.  如何访问模型中的依赖注入器？
2.  创建一个未绑定到数据库表的模型是否合理？如果不是，那么我应该把不需要存储的逻辑放在哪里（一些函数可以与 API 一起使用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:32:37.033

您可以使用该函数`Di`从代码中的任何位置访问`getDefault()`

```
$di = \Phalcon\DI\FactoryDefault::getDefault(); 
```

您可以扩展 Phalcon 模型以公开某些功能并使用该功能扩展您的模型。例如，考虑以下提供更多功能的模型（您始终可以根据需要对其进行扩展。在下面的示例中，我将展示如何使用构建器来构建查询以及可用于获取模式的函数对于特定型号。

```
class MyModel extends \Phalcon\Mvc\Model
{
    protected static function di()
    {
        return \Phalcon\DI\FactoryDefault::getDefault();
    }

    public static function fetchSchema()
    {
        return "schema generators";
    }

    public static function fetchById($id)
    {
        $results = null;

        try {

            $builder = self::getBuilder();

            $field = 'id';

            $bind[$field] = $id;

            $builder->where("{$field} = :{$field}:");

            $query = $builder->getQuery();

            // One record is needed here so set the unique row
            $query->setUniqueRow(true);

            // Execute!
            $results[] = $query->execute($bind);

        } catch (\Exception $e) {

            $results = self::exceptionToArray($e);

        }

        return $results;
    }

    protected static function getBuilder()
    {
        $di      = self::di();
        $manager = $di['modelsManager'];
        $builder = $manager->createBuilder();
        $builder->from(get_called_class());

        return $builder;
    }

    protected static function execute($builder, $bind, $unique = false)
    {
        $query = $builder->getQuery();

        // One record is needed here so set the unique row
        $query->setUniqueRow($unique);

        // Execute!
        $results = $query->execute($bind);

        if (!$results || count($results) == 0) {
            $results = array();
        }

        return $results;
    }

    protected static function exceptionToArray($exception)
    {
        $results['error'] = array(
            'code'            => $exception->getCode(),
            'file'            => $exception->getFile(),
            'line'            => $exception->getLine(),
            'message'         => $exception->getMessage(),
            'trace'           => $exception->getTrace(),
            'trace_as_string' => $exception->getTraceAsString()
        );

        return $results;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:16:09.893

我不知道这个特定的框架，但在应用程序代码中访问依赖注入容器绝对是个坏主意。依赖注入容器应该只存在于应用程序的顶层。它应该创建模型并将其完全构建的依赖项传递给它所需的一切。

1）它将您的应用程序逻辑与框架紧密耦合，这不好，因为您的代码不可移植

2）它使您的应用程序代码可以访问所有可能的依赖项。这意味着它没有明确的 API。代码实际上有什么依赖关系？如果不查看代码并查看它从 DI 容器中获取的内容，您将无法回答这个问题。见： http: [//misko.hevery.com/code-reviewers-guide/flaw-digging-into-collaborators/](http://misko.hevery.com/code-reviewers-guide/flaw-digging-into-collaborators/)

# python - jedi-vim 全能补全，非标准库

> ID：15189956
> 
> 赞同：8
> 
> 时间：2013-03-03T19:39:00.040
> 
> 标签：python, vim, jedi-vim

我阅读了 jedi-vim 的 README。 [https://github.com/davidhalter/jedi](https://github.com/davidhalter/jedi)

有使用非标准库 (Django) 完成的omni 的屏幕截图。

我通过 pip 安装了 django 并尝试了完全相同的代码来测试 Django 的全方位完成，但它不起作用。

```
Omni completion (^O^N^P) Pattern not found. 
```

标准库的全方位完成工作完美。

我通常使用一些非标准库，所以我想对这些库使用全向补全。

我应该做一些配置来使用非标准库的全方位完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T01:27:32.207

大多数第三个库应该开箱即用，Django 对自动完成不太好，您需要在您的环境中`DJANGO_SETTINGS`设置变量，否则大多数导入将引发配置不正确的异常并且自动完成将不起作用。

你可以在你的 virtualenv 中设置这个变量，或者在你的 shell 中使用别名，或者在你的`.vimrc`：

```
function FindDjangoSettings()
  if strlen($VIRTUAL_ENV) && has('python')
    let output  = system("find $VIRTUAL_ENV \\( -wholename '*/lib/*' -or -wholename '*/install/' \\) -or \\( -name 'settings.py' -print0 \\) | tr '\n' ' '")
    let outarray= split(output, '[\/]\+')
    let module  = outarray[-2] . '.' . 'settings'
    let syspath = system("python -c 'import sys; print sys.path' | tr '\n' ' ' ")
    " let curpath = '/' . join(outarray[:-2], '/')

    execute 'python import sys, os'
    " execute 'python sys.path.append("' . curpath . '")'
    " execute 'python sys.path.append("' . syspath . '")'
    execute 'python sys.path = ' . syspath
    execute 'python os.environ.setdefault("DJANGO_SETTINGS_MODULE", "' . module . '")'
  endif
endfunction
autocmd FileType python call FindDjangoSettings() 
```

这假设您正在`virtualenv`为您的项目使用，并且如果您将 virtualenv 用于不是 django 的东西，可能会打扰您。

我还建议你看看[你完成我的插件](https://github.com/Valloric/YouCompleteMe)，它是一个很棒的完整插件，它不是 jedi 的替代品，事实上，它有 jedi 作为 python 完成的依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-17T19:02:55.523

你可以试试这个：`sys.path.append(/path/to/lib)`

我使用 SUMO/TraCI 作为非标准库。

在我`sys.path.append("/path/to/SUMO/tools/")`使用 traci 方法之前添加的 python 代码中，然后在 Vim 中完成完美工作。

# android - 为什么找不到 ImageView 类？

> ID：15189957
> 
> 赞同：4
> 
> 时间：2013-03-03T19:39:07.423
> 
> 标签：android, eclipse, class, imageview

当我进入图形布局时，在 main.xml 文件中插入 Imageview 时，我在创建第一个 android 应用程序（来自 pdf "Android.Application.Development.for.For.Dummies" 的静默切换模式）时遇到了麻烦，图像不显示本身并出现此错误：“找不到以下类：-ImageView（更改为 android.widget.ImageView，修复构建路径，编辑 XML）”

这是我的 xml 代码

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:contentDescription="@string/hello_world"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <EditText android:id="@+id/edit_message"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />

<ImageView 
    android:id="@+id/phone_icon"
    android:contentDescription="@string/description"
    android:layout_width="wrap_content"
    android:scaleType="fitXY"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:src="@drawable/phone_on" />

<Button
    android:id="@+id/toggleButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/ToggleSilentMode" />

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T16:08:08.813

这是我最近也遇到的一个问题。这对我来说是一个误导性的错误，今天早上让我困惑了大约 30 分钟。不是Android找不到类。就是导入图片源文件有问题。

现在找不到图像的原因是因为我没有将源图像正确复制到目录中。我选择将源文件从另一个文件夹目录拖到适当的位置。在此过程中，它没有正确复制文件。或者它只是将其复制为指向其他资源的链接。

结果，Android 不知道如何处理该资源并抛出那个奇怪的错误。为了解决这个问题，您需要删除旧的图像源，然后用它们的等价物的直接完整副本替换它们。然后您应该会看到此错误消失，并且应用程序按 xml 布局代码的预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T15:39:22.113

当在我的 xml 中添加一个带有图像 src 的新 ImageView 时，我遇到了同样的问题。

我尝试使用 Photoshop 打开此图像并收到“模块格式错误”。所以图像被破坏了。问题已解决，创建一个与第一个类似的新图像。

希望它有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T06:41:26.180

我曾经遇到过同样的问题。为了把它弄出来，我替换了所有现有的图像，现在它可以工作了。

# mono - 只有 1 个带下划线的加速键的菜单项

> ID：15189970
> 
> 赞同：1
> 
> 时间：2013-03-03T19:39:58.217
> 
> 标签：mono, gtk, monodevelop, gtk#

我目前正在尝试将 MenuItems 添加到菜单中，这几乎是完美的。我要添加的 MenuItem 是文件的路径，因此它们可能包含“_”，它将 MenuItem 设置为加速器，但是如何停止单声道设置此加速器？

例子：

```
_1: /media/Auslagerung/Projekte/ace/sample_project.ace 
```

开头的_1是我要设置的加速器，后面的路径应该不用下划线。我如何意识到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:13:04.313

尝试用额外的下划线转义下划线，这样它们就不会被解释为助记符。在您的示例中，在“/sample”之后插入下划线，以便菜单标签字符串为：

```
_1: /media/Auslagerung/Projekte/ace/sample__project.ace 
```

我没有使用 GTK#，但这是我在 C 语言中使用 GTK+ 2.10 的方法。希望它适用于单声道。

# ruby-on-rails - 我应该隐藏我的 facebook app_id 和 secret_key 吗？

> ID：15189972
> 
> 赞同：0
> 
> 时间：2013-03-03T19:40:14.327
> 
> 标签：ruby-on-rails, facebook-graph-api, facebook-oauth, koala

我已经用 ruby​​ on rails 创建了我的第一个 facebook 应用程序。在我的控制器中，我有类似的东西

```
 @oauth = Koala::Facebook::OAuth.new(app_id,secret_id,callback_url) (Replaced with temp values) 
```

我想知道在我的控制器中有这些值是否可以，或者我应该将它隐藏在我的应用程序的其他地方？将它们分配给变量？

这里正确的编程习惯是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:53:19.060

归根结底是要避免在版本控制系统中记录这些值。

我通常采取的方法如下：

`config/application.rb`在应用程序类定义中添加以下内容

```
# Loads app config from /config/env_vars.yml
require 'yaml'
rails_root = Rails.root || File.dirname(__FILE__) + '/../..'
config = YAML.load_file(rails_root.to_s + '/config/env_vars.yml')
if config.key?(Rails.env) && config[Rails.env].is_a?(Hash)
  config[Rails.env].each do |key, value|
    ENV[key] = value.to_s
  end
end 
```

`config/`在called中创建一个文件`env_vars.yml`，并包含以下内容

```
development:
  FB_APP_ID: APP_ID_HERE
  FB_APP_SECRET: APP_SECRET_HERE 
```

替换`APP_ID_HERE`并`APP_SECRET_HERE`使用您的 api 详细信息。根据需要向该文件添加尽可能多的其他值（即 Twitter 密钥等），并为每个环境重复（例如，如果您有不同的 FB 应用程序用于开发、登台和生产）。然后可以在您的控制器中引用这些`ENV['FB_APP_ID']`等。

如果使用这种方法，您可以将 env_vars.yml 从您的 VCS 中删除，这意味着您实际上并未将这些值提交到您的存储库，同时仍使它们可用于您的应用程序。

* * *

最后，如果您使用 Heroku，为每个应用程序分配这些值作为环境变量很容易（即`heroku config:set FB_APP_ID=234234324234`，有关更多详细信息，请参阅[https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)），无需提交这些在推送到 Heroku 之前对 repo 的值。

### 注意如果使用 Heroku，对上述方法有一些修改

如果从 git 中排除`env_vars.yml`，此文件在推送到 Heroku 时将不可用，导致您的应用程序在启动时崩溃。最简单的解决方案是修改添加到的代码`config/application.rb`如下：

```
# Loads app config from /config/env_vars.yml
unless Rails.env == 'production'
  require 'yaml'
  rails_root = Rails.root || File.dirname(__FILE__) + '/../..'
  config = YAML.load_file(rails_root.to_s + "/config/env_vars.yml")
  if config.key?(Rails.env) && config[Rails.env].is_a?(Hash)
    config[Rails.env].each do |key, value|
      ENV[key] = value.to_s
    end
  end
end 
```

通过将其包装在条件中，如果在（Heroku 的默认环境）`unless Rails.env == 'production'`上运行，它将被跳过。`production`如果为 Heroku 使用多个环境（例如`staging`, `uat`, `production`），则可以将其修改为

```
unless %w(staging uat production).include?(Rails.env) 
```

一旦提交并推送到 Heroku，它将不再寻找文件，让您可以通过Heroku toolbelt 命令逐个`env_vars.yml`应用程序设置配置变量。`heroku config:set`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T19:50:10.787

看看这篇文章：[http ://railsapps.github.com/rails-environment-variables.html](http://railsapps.github.com/rails-environment-variables.html)

我更喜欢使用 figaro gem：[https ://github.com/laserlemon/figaro](https://github.com/laserlemon/figaro)

# sencha-touch-2 - Sencha Touch 2 Navigationview 弹出和推送事件监听器

> ID：15189974
> 
> 赞同：0
> 
> 时间：2013-03-03T19:40:27.297
> 
> 标签：sencha-touch-2

我有一个带有一些项目的导航视图，如果我`pop`是项目，并且`push`修改了一个，我的控制器中的事件侦听器将不再触发。我怎样才能让他们再次工作？我不明白，因为当我推回它时，每个项目都从头开始破坏和创建。自动销毁已启用。

```
//Add a view
this.view = Ext.create('ec.view.view1')
this.getNavigation().push(this.view);

//Remove a view (or press back in the navigationview)
this.getNavigation().pop();

//Add a fresh view back
this.view = Ext.create('ec.view.view1')
this.getNavigation().push(this.view); 
```

控制器水龙头处理程序

```
refs {
    button : '#button'
},
control : {
    button : {
        tap: 'OnTap'
    }
},
OnTap: function() { console.log("Tap") } 
```

有了以上内容，所有事件、点击等都会中断视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T15:36:52.350

我遇到了同样的问题，搜索了大量论坛，浪费了很多时间，对 Sencha 的支持感到愤怒，最后将按钮处理程序代码从控制器移回视图：

```
 xtype: 'button',
 text: 'Save',
 handler: function(button, event) {
     console.log('button pressed');
 } 
```

“脏”，但它有效。

我怀疑这种行为的原因是 NavigationView.pop() 破坏了实际的 NavigationView，但不是它的从属对象。

# java - Libgdx intellij 运行时黑屏应用程序

> ID：15189976
> 
> 赞同：2
> 
> 时间：2013-03-03T19:40:33.380
> 
> 标签：java, android, intellij-idea, libgdx

我设法使用本教程[http://code.google.com/p/libgdx/wiki/IntelliJIDEALibgdx](http://code.google.com/p/libgdx/wiki/IntelliJIDEALibgdx)在 intellij idea 12 中设置 libgdx但我不确定当我运行看起来像这样的桌面应用程序时这是错误的。![在此处输入图像描述](../Images/f32fd54d49a97c5f0cca95c6f3801249.png)

我期待 libgdx 的图像会像[官方 libgdx 网站](http://libgdx.badlogicgames.com/documentation.html)上的教程一样出现。对于教程的 intelliJ 部分，我将桌面链接到 android 的资产文件夹。如下图所示，是 android 模块的资产文件夹，其中包含 libgdx 的图像。

![在此处输入图像描述](../Images/940e25ddc7b22e70b40e511a6ec2b8d9.png)

我遵循[教程](http://code.google.com/p/libgdx/wiki/IntelliJIDEALibgdx)中的备选方案 2 。

这是代码：

DesktopStarter 类 - 桌面模块：

```
public class DesktopStarter {
    public static void main(String[] args) {
        LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
        cfg.title = "Title";
        cfg.useGL20 = true;
        cfg.width = 800;
        cfg.height = 480;
        new LwjglApplication(new MyLibgdxGame(), cfg);
    }
} 
```

MyLibgdxGameAndroidStarter 类 - Android 模块：

```
public class MyLibgdxGameAndroidStarter extends AndroidApplication
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
        cfg.useAccelerometer = false;
        cfg.useCompass = false;
        cfg.useWakelock = true;
        cfg.useGL20 = true;
        initialize(new MyLibgdxGame(), cfg);
    }
} 
```

MyLibgdxGame 类 - 主模块：

```
public class MyLibgdxGame extends Game {
    @Override
    public void create() {
        //To change body of implemented methods use File | Settings | File Templates.
    }
} 
```

[在此处](http://www.mediafire.com/?zbevs7gyj0v52u8)下载项目

有谁知道出了什么问题？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T21:11:51.493

你的`MyLibgdxGame`类错过了显示图像的源代码，它应该如下所示：

```
package com.example.mylibgdxgame;

import com.badlogic.gdx.Game;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureRegion;

public class MyLibgdxGame extends Game {
  private OrthographicCamera camera;
  private SpriteBatch        batch;
  private Texture            texture;
  private Sprite             sprite;

  @Override
  public void create() {
    float w = Gdx.graphics.getWidth();
    float h = Gdx.graphics.getHeight();

    camera = new OrthographicCamera(1, h / w);
    batch = new SpriteBatch();

    texture = new Texture(Gdx.files.internal("libgdx2.png"));
    texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

    TextureRegion region = new TextureRegion(texture, 0, 0, 512, 275);

    sprite = new Sprite(region);
    sprite.setSize(0.9f, 0.9f * sprite.getHeight() / sprite.getWidth());
    sprite.setOrigin(sprite.getWidth() / 2, sprite.getHeight() / 2);
    sprite.setPosition(-sprite.getWidth() / 2, -sprite.getHeight() / 2);
  }

  @Override
  public void dispose() {
    batch.dispose();
    texture.dispose();
  }

  @Override
  public void render() {
    Gdx.gl.glClearColor(1, 1, 1, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    batch.setProjectionMatrix(camera.combined);
    batch.begin();
    sprite.draw(batch);
    batch.end();
  }

  @Override
  public void resize(int width, int height) {
  }

  @Override
  public void pause() {
  }

  @Override
  public void resume() {
  }
} 
```

[该指南](https://code.google.com/p/libgdx/wiki/ProjectSetupNew)建议使用`gdx-setup-ui.jar`它将生成带有此代码的完整示例应用程序。

结果如下：

![样本](../Images/0d18765d7079d8039b70afe247018091.png)

# android - Android：尝试在运行时更改 TextView 的宽度

> ID：15189979
> 
> 赞同：2
> 
> 时间：2013-03-03T19:40:43.350
> 
> 标签：android

我有一个 textView 我试图在运行时更改大小。但大小不会改变。

xml文件中的代码

```
 <TextView
                android:id="@+id/textScreenWidth"
                android:layout_width="100px"
                android:layout_height="wrap_content"
                android:text=""
                android:layout_gravity="center"
                android:textColor="#ff000000"
                android:textStyle="bold"
                android:textSize="12dp" 
```

OnCreat 上的代码以更改大小

```
TextView t=(TextView) findViewById(R.id.textScreenWidth); 
    t.setWidth(950); 
```

大小不变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:41:27.933

用这个：

`t.getLayoutParams().width = 950;`

# android - 布局 TextView 提示并不总是显示

> ID：15189983
> 
> 赞同：1
> 
> 时间：2013-03-03T19:41:18.620
> 
> 标签：android, xml, android-layout, hint

我有 4 个文本视图，所有数字。第一个“#”是提示，它显示在我的 4.2 和 2.2 上。接下来的三个分别是“小时、分钟、秒”，提示显示在 4.2 而不是 2.2。这是我为他们准备的 xml。

第一个 Textview 有 #，接下来的三个会说 Hour、Minute、Second。

```
<ScrollView
        android:id="@+id/mainBodyScroll"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/calculateButton"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/perDistanceLayout"
        android:fadeScrollbars="false"
        android:paddingLeft="10dp"
        android:paddingRight="10dp" >

        <LinearLayout
            android:id="@+id/mainBodyLinear"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/default_distance"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <LinearLayout
                android:id="@+id/distanceEntryLinear"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:paddingLeft="5dp" >
                <EditText
                    android:id="@+id/distanceText"
                    android:layout_width="50dp"
                    android:layout_height="wrap_content"
                    android:ems="10"
                    android:hint="@string/default_number_hint"
                    android:inputType="number"
                    >
                </EditText>
                <Spinner
                    android:id="@+id/spinnerInput"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:entries="@array/spinner2_array" />
            </LinearLayout>
            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/default_in"
                android:textAppearance="?android:attr/textAppearanceMedium" />
            <LinearLayout
                android:id="@+id/timeLayout"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:paddingLeft="5dp"
                android:paddingRight="5dp" >
                <EditText
                    android:id="@+id/hourText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".33"
                    android:ems="10"
                    android:gravity="center_vertical|center_horizontal"
                    android:hint="@string/default_hours"
                    android:inputType="number" />
                <EditText
                    android:id="@+id/minuteText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".33"
                    android:ems="10"
                    android:gravity="center_vertical|center_horizontal"
                    android:hint="@string/default_minutes"
                    android:inputType="number" />
                <EditText
                    android:id="@+id/secondText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight=".33"
                    android:ems="10"
                    android:gravity="center_vertical|center_horizontal"
                    android:hint="@string/default_seconds"
                    android:inputType="number" />
            </LinearLayout>
            <Button
                android:id="@+id/paceclearButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_marginRight="5dp"
                android:minHeight="32dip"
                android:text="@string/default_clear"
                android:textSize="12dp" />

        </LinearLayout>
    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:58:59.380

不知何故，设置`center_horizontal`值在`android:gravity`Android 2.2 中导致显示提示的问题。

`center_horizontal`从值中删除`android:gravity`以显示提示。

# python - python中的数字操作

> ID：15189989
> 
> 赞同：2
> 
> 时间：2013-03-03T19:41:53.110
> 
> 标签：python, excel

我是脚本语言的新手。我有一个具有以下编号的 excel (xls,2003) 文件

```
2      48
3      49
6      57
11     89
19     120
29     110
32     105 
```

我正在尝试执行以下操作

1.  阅读excel文件：我做了
2.  在正负意义上找到第 2 列中两个连续数字之间的差异。
3.  在第 2 列定义的第 2 列中，当差异在正或负意义上最大时，在第 1 列中找到相应的数字。

我为读取 excel 文件完成了以下脚本，但我不确定如何继续

```
import xlrd

myexcel = xlrd.open_workbook('sample.xls')
#print "WorkSheets:", myexcel.sheet_by_names()
sheet = myexcel.sheet_by_index(0)

c = sheet.col_values(1)
print c

#data = [] #make a data store 
```

我期待跟随打印

最大正差：11

最大负差：29

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:58:00.803

干得好：

```
col1 = [2, 3, 6, 11, 19, 29, 32]
col2 = [48, 49, 57, 89, 120, 110, 105]

pd, nd, pi, ni = 0, 0, -1, -1
for i in range(len(col2)-1):
    d = col2[i+1] - col2[i]
    if d > 0 and d > pd:
        pd, pi = d, i
    if d < 0 and abs(d) > nd:
        nd, ni = abs(d), i

print "Max positive difference :" + str(col1[pi+1])
print "Max negative difference :" + str(col1[ni+1]) 
```

输出：

```
>>> 
Max positive difference :11
Max negative difference :29 
```

* * *

**更新**：短版

```
col1 = [2, 3, 6, 11, 19, 29, 32]
col2 = [48, 49, 57, 89, 120, 110, 105]

m = [(x[1] - x[0]) for x in zip(col2[:1] + col2, col2 + col2[-1:])]

print "Max positive difference :" + str(col1[m.index(max(m))])
print "Max negative difference :" + str(col1[m.index(min(m))]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:08:48.613

我认为这就像你要找的东西

```
(max_pos_difference, max_pos_row_col_1_value, neg_row_col_1_value, max_neg_row_col_1_value) = get_max_row()

print "Pos val: {} Pos row: {} Neg val: {} Neg row: {}".format(max_pos_difference, max_pos_row_col_1_value, neg_row_col_1_value, max_neg_row_col_1_value)

def get_max_row():
    max_pos_difference = 0
    max_neg_difference = 0
    max_pos_row = 0
    max_neg_row = 0
    for rownum in range(sheet.nrows):
        if rownum <= sheet.nrows - 1:
            this_row_value = sheet.cell(rownum, 1).value
            next_row_value = sheet.cell(rownum+1, 1).value
            difference = next_row_value - this_row_value

        if difference > max_pos_difference and difference >= 0:
            max_pos_difference = difference
            max_pos_row = rownum

        if difference < max_neg_difference and difference < 0:
            max_neg_difference = difference
            max_neg_row = rownum

    return (max_pos_difference, sheet.cell(max_pos_row, 0).value, max_neg_difference, sheet.cell(max_neg_row, 0).value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T20:28:24.670

您可以在不过度使用局部变量、循环和条件的情况下尝试此操作：

```
#! /usr/bin/python

col1 = [2, 3, 6, 11, 19, 29, 32]
col2 = [48, 49, 57, 89, 120, 110, 105]

difs = [ (a, c - b) for a, b, c in zip (col1 [1:], col2, col2 [1:] ) ]
print (max (difs, key = lambda x: x [1] ) [0] )
print (max (difs, key = lambda x: -x [1] ) [0] ) 
```

# c - 使用无符号字符的凯撒密码函数？

> ID：15189991
> 
> 赞同：0
> 
> 时间：2013-03-03T19:42:05.087
> 
> 标签：c

我正在研究一个凯撒函数，它给定输入和偏移量，返回输出。我不确定我是否正在这样做。我在这里做错了什么？任何帮助表示赞赏。另外，如果有人可以向我解释如何使用无符号字符。

```
void encrypt(unsigned char* message_input, char off, unsigned char* message_output) {

    int m_inp;

    while(*(message_input+ m_inp)!=EOF)
    {
        *(message_output+ m_inp) = (*((unsigned char*)input + m_inp) + offset )%256;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:10:27.800

代码存在许多正确性和风格问题。

## 正确性问题

1.  循环变量`m_inp`未初始化。

2.  an`unsigned char`不可能等于`EOF`。的值为`EOF`-1。循环永远不会结束（除非你在一个*非常*奇怪的架构上）。

3.  传统的凯撒密码按字母顺序运行，而不是在整个 ASCII 字符集上运行。

## 文体问题

使用更多“风格正确”的 C 将使其他程序员更容易阅读您的代码。这些都是*主观的。*

1.  该名称`m_inp`对于短循环中的循环变量来说是一个糟糕的名称。改为使用`i`。

2.  它比 更容易阅读，即使它们在 C 中完全等价`ptr[i]`。`*(ptr + i)`

3.  将输入标记为`const unsigned char *`更明显的是它没有被修改。

4.  使用`int`而不是`char`偏移。

5.  传统上，函数输出在左边，输入在右边。然而，这并不重要。

## 修改后的代码

这是一个示例修订。它接受一个以 NUL 结尾的字符串，并将 Caesar 编码/解码版本写入输出缓冲区。这就是我编写函数的方式，不一定是你的编写方式：

```
void caesar(char *output, const char *input, int shift)
{
    int i;
    for (i = 0; input[i]; i++) {
        if (input[i] >= 'a' && input[i] <= 'z')
            output[i] = (input[i] - 'a' + shift) % 26 + 'a';
        else if (input[i] >= 'A' && input[i] <= 'Z')
            output[i] = (input[i] - 'A' + shift) % 26 + 'A';
        else
            output[i] = input[i];
    }
    output[i] = '\0';
} 
```

注意凯撒加解密其实是同一个操作，只是移位值不同而已。因此，如果您使用 3 的移位进行加密，则可以使用 -3 的移位（或等效的 23）进行解密。

另请注意，您可以替换`unsigned char`为`char`或反之亦然，并且一切都将完全相同（尽管您需要转换输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:59:14.323

你写的代码有很多错误

1）你还没有初始化 m_inp ，但你正在推迟（message_output + m_inp）

2）您正在检查 EOF 的输入字符串，这是没有意义的。

请看一下这段代码，它是凯撒密码的一个更好的实现

```
#include <stdio.h>

void caesar (char cipher[], int shift);

int main () {

char cipher[50];
int shift;

printf("Enter text to be encrypted IN CAPITAL LETTERS ONLY: ");
scanf("%s", cipher);

printf("How many shifts do you prefer? 1-10 only: ");
scanf("%d", &shift);

caesar (cipher, shift);

return 0;
}

void caesar (char cipher[], int shift) {
  int i = 0;

  while (cipher[i] != '\0') {
    if ((cipher[i] += shift) >= 65 && (cipher[i] + shift) <= 90) {
      cipher[i] += (shift);
     } else {
      cipher[i] += (shift - 25); 
       }
    i++;
   }
  printf("%s", cipher);
} 
```

# boost - boost文件系统上的错误

> ID：15189999
> 
> 赞同：0
> 
> 时间：2013-03-03T19:43:10.393
> 
> 标签：boost, filesystems

我尝试在我的 Mac 上使用 boost 文件系统。我只添加了以下标头并在尝试编译时出错

```
# include <boost/filesystem.hpp> 
```

错误是

```
Undefined symbols for architecture x86_64:
"boost::system::generic_category()", referenced from:
__static_initialization_and_destruction_0(int, int) in cclyDZox.o
"boost::system::system_category()", referenced from:
__static_initialization_and_destruction_0(int, int) in cclyDZox.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:26:49.167

您需要添加 boost_system 库：

```
-lboost_system 
```

到您的构建命令。请注意，您还需要提供 -lboost_system 库。

如果您的项目此后构建但抱怨类似

```
dyld: Library not loaded: libboost_filesystem.dylib 
```

你只需要设置环境变量

```
DYLD_LIBRARY_PATH 
```

包括你的

```
$BOOST_HOME/lib 
```

[这里](http://kuniganotas.wordpress.com/2011/05/14/how-to-solve-linker-dependencies-on-mac-os-x/)提到的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:53:40.513

我认为你应该这样做

```
g++ -I~/Documents/boost_1_53_0/include -L~/Documents/boost_1_53_0/stage/lib -std=c++11 test1ver1.cpp -lboost_filesystem -lboost_system 
```

这

*   `-I`flag 指向 Boost 标头所在的位置
*   `-L`flag 指向 Boost 库所在的位置
*   `-lboost_filesystem`和`-lboost_system`标志启用了您的二进制文件和 Boost Filesystem 和 System 共享库的链接。（那些应该总是在对象或源文件之后）

例如：

```
#include <boost/filesystem.hpp>

int main() {
   boost::filesystem::path path_household_csv("./test");
} 
```