# StackOverflow 问答 13799000-13799999

# html - 如何在 %age 中保持顶部 div 高度固定和底部 div 高度

> ID：13799002
> 
> 赞同：1
> 
> 时间：2012-12-10T10:23:12.627
> 
> 标签：html, css

我在一个页面中创建了两个 div，一个是标题，另一个是内容

```
 <div id="main"> 
    <div id="header">
    </div>
    <div id="content"> 
    </div>
   </div> 
```

而且风格是

```
<style>
#main{
height:100%;
}
#header{
height:100px
}

#content{
height:???? // to fit the content 100% on any kind of screen 
}
</style> 
```

我想根据屏幕调整内容。屏幕高度可以是 100 像素，也可能是 2000 像素。我怎么能用css做到这一点。我不希望底部有空白或滚动页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:32:49.523

如果您可以使用 CSS3，则此代码：

```
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

#main{
    height:100%;
    background-color: blue;
}

#header{
    height: 10%;
    background-color: green;
}

#content{
    height: -webkit-calc(100% - 105px);
    background-color: red;
} 
```

将在 chrome 中解决问题。您将不得不为其他浏览器测试该`calc`属性的替代方案。您将不得不使用父元素的边距和填充来获得您想要的效果，但这就是我们的想法。

如果 CSS3 不是一个选项，那么你将不得不以百分比定义你的标题，除非比我更聪明的人可以给你一个更好的选择:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:36:16.863

如果您想使用 css 进行此布局，则必须查看这些。

```
display: box; 
```

**或者**

```
height: calc(100% - 100px); 
```

但这些在旧浏览器中不受支持。display: box 在 ie9 中无法使用。

一些javascript也是如此。

```
document.getElementById('content').style.height = (document.getElementById('main').clientHeight - 100) + "px"; 
```

在 body 的 onload 事件中调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:36:42.480

添加这些行

```
 html,body{height:100%;}.

             #main{height:100%; }
             #header{height:100px; background:#ccc; }
             #content{min-height:90%; background:#666; }​ 
```

这将使您在屏幕上进行调整

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:30:19.650

添加`html, body { height: 100%; }`和使用`position:absolute`

让两个内部 div 都有`position:absolute`，它应该从浏览器的顶部开始。用于`z-index`切换 div。

**HTML**

```
<div id="main"> 
    <div id="header">c
    </div>
    <div id="content">
       <div class="hidden">This div helps to push the content 100px below</div>
        cxbvbvbvcbv
    </div>
   </div>​ 
```

**CSS**

```
html, body {  height: 100%;   }
#main{height:100%; position:relative}
#header{height:100px; background:green; position:absolute; top:0; left:0; width:100%; z-index:1000}
#content{height:100%; background:grey; position:absolute; top:0; left:0; width:100%; z-index:1; }​ 
```

**[演示更新](http://jsfiddle.net/qnZNY/9/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T10:41:59.847

在 css 中试试这个

```
html, body {  height: 100%;   }
#main{height:100%; overflow:hidden}
#header{height:100px; background:green; }
#content{height:100%; background:#F00; overflow:auto; }​ 
```

这是小提琴[链接](http://jsfiddle.net/kpatel/JKgTC/)

# c - 字符串和指针的问题

> ID：13799004
> 
> 赞同：0
> 
> 时间：2012-12-10T10:23:24.903
> 
> 标签：c

我有一个字符串，我需要将其传递给如下函数。

```
scanf("%s%d",&name,&telno);
addatend(telno,name); 
```

在哪里

```
char name[MAX]; 
```

我收到以下警告：

```
warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘char (*)[50]’ [-Wformat] 
```

我确实尝试过做一些改变，比如多了一个`char`指针并指向`name`. 但是警告仍然存在。

在函数中我有 strcpy

```
strcpy(addnode->name,name1); 
```

这是结构中的`name`从头到尾。但是这条线存在分段错误。`main``name``addnode`

我尝试检查夹板（此行没有任何问题）和 valgrind，但无法识别我的错误。因此来这里寻求帮助。提前致谢..

编码：

```
typedef struct Mystruct{
char *name;
int telno;
struct Mystruct *nextp;
}data;

void addatend(int telno1, char* name1)
{
    data *addnode, *previousnode;
    addnode = malloc (sizeof(data));

    if(addnode == NULL)
    {
        printf("Memory allocation failed...Exiting");
        exit(0);
    }

    strcpy(addnode->name,name1);        //error Part of the code. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:25:14.690

使用 读取字符串时`scanf`，数组作为指针传递给函数，因此您不需要地址操作符`&`。

* * *

关于您的第二个问题...您还需要为复制到的目标分配内存。`malloc`在 之前再次使用（使用`strlen(...) + 1`，`+1`作为字符串终止符） ，或者`strcpy`使用`strdup`which 分配和复制字符串：

```
addnode->name = strdup(name1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:52:50.870

您还可以使用零长度数组或灵活数组成员将名称存储在结构中。但是，它必须是最后一个结构成员。这是您声明它的方式。

```
typedef struct Mystruct {
    int telno;
    struct Mystruct *nextp;
    char name[];
} data; 
```

在函数中，你会做

```
data *addnode = malloc(sizeof(data) + strlen(name1) + 1);
strcpy(addnode->name, name1); 
```

# oracle - oracle - 如何使用序列作为自动增量 ID？

> ID：13799005
> 
> 赞同：2
> 
> 时间：2012-12-10T10:23:25.667
> 
> 标签：oracle

我有一个 oracle 数据库表：

```
CREATE TABLE "DogInfo" (
"Id" NUMBER NOT NULL ENABLE,
"DogName" VARCHAR2 (50 CHAR) NOT NULL ENABLE,
"DogAge" NUMBER NOT NULL ENABLE,
CONSTRAINT "DogInfo_PK" PRIMARY KEY ("Id") ENABLE
);

CREATE SEQUENCE "DOGINFO_SEQ" MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER NOCYCLE;

CREATE OR REPLACE TRIGGER  "BI_DogInfo" 
BEFORE INSERT ON "DogInfo" FOR EACH ROW
WHEN (NEW."Id" IS NULL OR NEW."Id" = 0) BEGIN
    SELECT "USERINFO_SEQ".nextval INTO :NEW."Id" FROM dual;
END;

ALTER TRIGGER  "BI_DogInfo" ENABLE; 
```

如果我用数据库工具向表中插入 20 条记录，然后使用我的 C# Web 应用程序插入记录，狗 id 将以 1 开头，而不是 21。

任何人都可以帮我修复这个错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T10:38:29.207

序列不是“自动增量 ID”。

Sequence 只是一个顺序唯一的数字生成器。它可以作为您的 Id 列值提供程序，但您需要在列中保留正确的值。

我假设您像这样添加 20 行：

```
insert into table(id, <columns>) values (1, <values>);
insert into table(id, <columns>) values (2, <values>);
and so on ... 
```

您的序列无法知道您“期望”它具有的下一个数字是什么（当然，除非您（重新）使用所需的初始值创建它）。相反，您应该始终使用序列中的值，如下所示：

```
insert into table(id, <columns>) values (sequence.nextval, <values>);
insert into table(id, <columns>) values (sequence.nextval, <values>);
and so on ... 
```

这样，您将保持序列与表 id 值同步。

**编辑 ：**

[您可以使用此答案](https://stackoverflow.com/questions/11296361/how-to-create-id-with-auto-increment-on-oracle/11296469#11296469)中所述的触发器和序列来模仿该行为。

Oracle 12c 现在还提供 IDENTITY 列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T09:14:52.610

如果你想从 20 而不是 1 开始，你需要改变你的顺序。

```
CREATE SEQUENCE "DOGINFO_SEQ" MINVALUE 20 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 20 CACHE 20 NOORDER NOCYCLE; 
```

而且您似乎没有在触发器中使用正确的序列。

```
CREATE OR REPLACE TRIGGER  "BI_DogInfo" 
BEFORE INSERT ON "DogInfo" FOR EACH ROW
WHEN (NEW."Id" IS NULL OR NEW."Id" = 0) BEGIN
SELECT "DOGINFO_SEQ".nextval INTO :NEW."Id" FROM dual;
END; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-18T06:45:50.297

我觉得你用错了`Seq name`。

而不是使用`DOGINFO_SEQ`use `USERINFO_SEQ`。

# java - .pig script vs. java embedded pig：哪个最快？

> ID：13799012
> 
> 赞同：1
> 
> 时间：2012-12-10T10:23:35.217
> 
> 标签：java, hadoop, mapreduce, apache-pig

我的项目有一个 ASCII 输入文件，我使用 pig 脚本进行 mapreducing。在此脚本中，我使用子字符串获取指定的字符间隔。我想问一下我是否使用java来获取字符间隔，然后将jar文件嵌入到另一个减少我的数据的猪脚本中，我的程序运行得更快与否？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:37:32.840

这完全取决于您如何在 map 方法中实现 char 间隔拆分。如果您知道数据，则可以优化子字符串。检查这个线程：

[charAt() 还是子字符串？哪个更快？](https://stackoverflow.com/questions/1672415/charat-or-substring-which-is-faster)

此外，一般来说，将 jars 添加到 hadoop 集群会增加文件传输和设置内部内容（类加载器、解包等）的一些开销，但在这种情况下，jar 大小应该可以忽略不计。因此，简而言之，添加您的 java 代码来执行映射器不应增加显着的开销，但如果 pig 生成的代码不是最佳的并且您的 java 代码对于您的字符串是最佳的，则可以改善映射器阶段。

# r - 将数据框拆分为例如 8 小时的片段

> ID：13799017
> 
> 赞同：0
> 
> 时间：2012-12-10T10:24:31.487
> 
> 标签：r, datetime, split

> **可能重复：**
> [使用 R：将时间序列数据拆分为时间间隔（例如一小时），然后绘制计数](https://stackoverflow.com/questions/13649019/with-r-split-time-series-data-into-time-intervals-say-an-hour-and-then-plot-t)

我有多个列和值的数据，每 10 秒都有一个时间戳。数据跨越几天，但我想将其分成例如 8 小时的片段。我一直在查看 split() 和 plyr 包，但找不到正确的方法。

谁能帮我解决这个问题？

提前致谢！

# requirejs - Requirejs 模块回调

> ID：13799023
> 
> 赞同：0
> 
> 时间：2012-12-10T10:24:44.487
> 
> 标签：requirejs

我很喜欢 Requirejs 的 ATM。我无法从我需要的文件中访问。

我让你我的代码，你会看到问题：

**索引.html**：

```
<script src="libs/jquery/requirejs.js"></script>
<script src="js/boot.js"></script>
<script src="home/init.js"></script> 
```

**引导.js**：

```
require.config({
    paths: {
        jquery: 'libs/jquery/jquery',
        home: 'home/home'   
    }
});

// my main module
define('common', [
    'jquery'
], function($){

  $('body').append('boot loaded ');

  return { }
});

// require the main module
require(['common']); 
```

在这里，没关系。

**主页.js**：

```
// simple object
var home = {
    syl: 88
} 
```

**初始化.js**：

```
// home module
define('init_home', [
    'jquery',
    'home'
], function($, home){

  $('body').append('init loaded');

  return home;
});

require(['init_home'], function(home) {
  console.log(home.syl); // Uncaught TypeError: Cannot read property 'syl' of undefined 
}); 
```

检查错误。

如何访问我的 home.js？请问语法是什么？

任何提示都值得赞赏。

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:31:29.627

据我所知，您尚未设置基本 URL。Requirejs 加载相对于基本 URL 的所有文件。

我建议你重构你的代码路径，让你的所有 JS 文件都驻留在一个公共文件夹中，例如：

```
<script src="scripts/libs/requirejs.js"></script>
<script src="scripts/boot.js"></script>
<script src="scripts/home/init.js"></script> 
```

如您所见，现在基本 URL 是“脚本”文件夹。向“requirejs.config”添加一个属性：

```
require.config({
    baseUrl: "scripts",
    .....
    .....
}); 
```

现在 requirejs 知道必须从相对于脚本文件夹的路径加载代码。

阅读此[文档](http://requirejs.org/docs/api.html#jsfiles)以获得进一步说明。

此外，您可以通过简单地定义返回一个对象：

```
define("module_name", {
    name: "value"
}); 
```

# rbac - RBAC上操作和权限的区别

> ID：13799024
> 
> 赞同：8
> 
> 时间：2012-12-10T10:24:45.013
> 
> 标签：rbac

我正在开发一个使用基于角色的访问控制（RBAC）的通用用户管理系统，如果我无法区分操作表和权限表（在阅读了这么多文章之后）。

"*一个主体可以有多个角色。一个角色可以有多个主体。一个角色可以有多个权限。一个权限可以分配给多个角色。一个操作可以分配多个权限。**一个权限可以分配给多个操作。*** "

en.wikipedia.org/wiki/Role-based_access_control

任何人都可以举一个简单的例子来区分它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:17:47.947

[RBAC 标准](http://csrc.nist.gov/groups/SNS/rbac/)不涉及操作，而仅涉及用户、角色和权限。我想您所指的操作是您正在使用的特定实现的一部分。它们可能是您的解决方案中实施资源的方式。

权限是执行/访问资源所需的。权限分配给角色，资源需要一组权限。

让我们以一个简单的收银管理系统为例。有许多用户（商店的员工）和许多角色，包括`cashier operator`. 该角色授予用户一项权限，`scan items`. 这种权限是操作所需要的`item.scan()`，也是操作所需要的`item.cancel()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T23:43:02.000

在 RBAC 中，权限是对象和操作之间的映射。

例如：

customer123 <--- 这是一个对象

读取、写入、更新、删除 <--- 这些是操作

这些是可能的权限：

customer123.read、customer123.write、customer123.update、customer123.delete

在 RBAC 中，权限随后被授予角色。所以一个角色可能是：

用户

并已被授予 customer123.read

另一个角色可能是：

管理员

已被授予权限 customer123.write、customer123.update

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:12:50.147

权限 - 对资源访问模式的批准。
资源 - 需要受限访问的系统对象或操作。

# c++ - 在openCV c ++中获取帧的 Y 和 Cb ， Cr 值

> ID：13799025
> 
> 赞同：1
> 
> 时间：2012-12-10T10:24:46.777
> 
> 标签：c++, opencv

我正在编写一个使用 openCV 的代码，这是我的问题，openCV 中的框架是 RGB 颜色空间，但我需要 YCbCr 格式，所以我用我写了这个小代码：

```
 void  PixelError::conversiontoYcbcr(cv::Mat rgbFrame){
    cv::cvtColor(rgbFrame,frameycbcr, CV_RGB2YCrCb,0);
    cv::Vec3f pixel = frameycbcr.at<cv::Vec3f>(row,col);
 } 
```

这是获取 R 和 G 以及 B 值的示例，但是由于我转换了帧，所以我也跳到了我的值，但是我在 row 和 col 中遇到了错误，我不知道矢量像素的哪个通道代表我的Y 或 Cb 或 CR 值。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:10:33.800

如果您的输入 RGB 图像每通道使用 8 位，则 cvtColor 的结果也将是 CV_8UC3 类型。因此，您必须像这样将像素作为 cv::Vec3b 获取：

```
#include <opencv2/opencv.hpp>
#include <iostream>
int main()
{
    cv::Mat rgb(4, 3, CV_8UC3, cv::Scalar(255, 127, 63));
    cv::Mat ycbcr;
    cv::cvtColor(rgb, ycbcr, CV_RGB2YCrCb, 0);
    for (int row(0); row < ycbcr.rows; ++row)
    {
        for (int col(0); col < ycbcr.cols; ++col)
        {
            cv::Vec3f pixel = ycbcr.at<cv::Vec3b>(row, col);
            std::cout << "row: " << row << "; col: " << col << "; Y: " << pixel[0] << "; Cr: " << pixel[1] << "; Cb: " << pixel[2] << std::endl;
        }
    }
} 
```

# python - PyGetText 翻译变量失败

> ID：13799028
> 
> 赞同：0
> 
> 时间：2012-12-10T10:24:58.107
> 
> 标签：python, internationalization, gettext

我试图在 rubtime 期间翻译一个变量：

```
STATE = 'Not Ready'
txt = _(STATE) 
```

其中 STATE 在其他地方设置为几个值之一。

该程序运行良好，但运行 PyGetText 失败并显示以下消息：

```
Seen unexpected token "STATE" 
```

如何让 PyGetText 忽略这一特定行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:44:45.033

愚蠢的我原来 PyGetText 实际上并没有失败。它只是像我想要的那样忽略了这一行，但仍然创建了正确的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:35:39.460

只是一个想法：您可以在翻译中添加括号而不是运行时变量，如下所示：

```
STATE = _("Not ready") # one for each option you have for this state string

txt = STATE 
```

所以你用你所有的翻译字符串生成了你的 .po 文件，然后你只返回你想要的那个？

# c#-4.0 - NullReferenceException 抛出 StackOverflowException

> ID：13799032
> 
> 赞同：1
> 
> 时间：2012-12-10T10:25:16.647
> 
> 标签：c#-4.0, exception

我有一个应用程序抛出的情况，`NullReferenceException`它关闭了我的应用程序抛出`StackOverflowException`.

第一个例外是合乎逻辑的，我理解。它不是用户处理的，我期待去`AppDomain.CurrentDomain.UnhandledException`.

但是不，在我的应用程序关闭`StackOverflowException`后立即触发a 。`NullReferenceException`

我不明白原因，`StackOverflowException`因为此时调用堆栈上的最大堆栈并不大（约 15 行）。

这种情况的特殊性是我在一个订阅 `VisibleChanged`了控件的事件处理程序的委托中。

这是重现该问题的示例。

```
 public Form1()
    {
        InitializeComponent();
        VisibleChanged += Function();
    }

    private EventHandler Function()
    {
        throw new NullReferenceException();

    } 
```

事实上，当我做样本时，我想我遇到了问题。在 Visible Changed 事件中抛出异常似乎会改变可见性，并且有一个递归调用（我奇怪地看不到）涉及stackoverflow ..但我不明白为什么我看不到它。

# qt - 如何在 Qt 中添加子菜单

> ID：13799033
> 
> 赞同：18
> 
> 时间：2012-12-10T10:25:16.467
> 
> 标签：qt, qt4, qt-creator

如何从下面的菜单中添加子菜单？我需要一个子菜单来打开，比如说，点击后

```
"A->Setup" 
```

我希望在主菜单的一侧打开一个子菜单。

```
 void MyMenu::cppSlot()
        {
            QMenu *xmenu = new QMenu;
            xmenu->addMenu("A -> Setup");
            xmenu->addMenu("B -> Setup");
            xmenu->addMenu("C -> Setup");
            xmenu->addMenu("D -> Setup");
            xmenu->addMenu("E -> Setup");
            //Change font and width
            xmenu->setFont(QFont ("Courier", 10));
            xmenu->setFixedWidth(250);
            //Colour setting
            xmenu->setAutoFillBackground(true);
            /*QPalette palette=xmenu->palette();
            palette.setColor(QPalette::Window, Qt::black);
            palette.setColor(QPalette::Window, Qt::text);
            palette.color(green)
            xmenu->setPalette(palette);*/

            // Align the menu coordinates
           // xmenu->
            xmenu->move(900,300);

            xmenu->show();

        } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-10T12:01:11.143

[QMenu::addMenu()](http://qt-project.org/doc/qt-4.8/qmenu.html#addMenu-2)返回一个指向创建的子菜单的指针。您可以使用这些指针为子菜单添加操作。

以下代码：

```
QMenu *xmenu = new QMenu();
QMenu* submenuA = xmenu->addMenu( "A" );
QMenu* submenuB = xmenu->addMenu( "B" );
QMenu* submenuC = xmenu->addMenu( "C" );
QMenu* submenuD = xmenu->addMenu( "D" );
QMenu* submenuE = xmenu->addMenu( "E" );
QAction* actionA_Setup = submenuA->addAction( "Setup" );
QAction* actionB_Setup = submenuB->addAction( "Setup" );
QAction* actionC_Setup = submenuC->addAction( "Setup" );
QAction* actionD_Setup = submenuD->addAction( "Setup" );
QAction* actionE_Setup = submenuE->addAction( "Setup" ); 
```

*（提示：这需要循环）*

将产生一个这样的菜单：

![创建的菜单截图](../Images/1812215e4e71f3cd9881abdaa1081028.png)

然后，您可以将插槽连接到`triggered()`返回操作的信号（例如`actionA_Setup`）。

# python - 在 Python 中使用 xhtml2pdf.pisa 转换阿拉伯页面

> ID：13799034
> 
> 赞同：2
> 
> 时间：2012-12-10T10:25:19.633
> 
> 标签：python, unicode, html2pdf, pisa, xhtml2pdf

我正在尝试从 pisa 实用程序转换 html2pdf。请检查下面的代码。我遇到了我无法弄清楚的错误。

```
Traceback (most recent call last):
  File "dewa.py", line 27, in <module>
    html = html.encode(enc, 'replace')
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd9 in position 203: ordinal not in range(128) 
```

请在此处检查代码。

```
from cStringIO import StringIO
from grab import Grab
from grab.tools.lxml_tools import drop_node, render_html
from grab.tools.text import remove_bom
from lxml import etree
import grab.error
import inspect
import lxml
import os
import sys
import xhtml2pdf.pisa as pisa

enc = 'utf-8'
filePath = '~/Desktop/dewa'
##############################

g = Grab()
g.go('http://www.dewa.gov.ae/arabic/aboutus/dewahistory.aspx')

html = g.response.body

html = html.replace('bgcolor="EDF389"', 'bgcolor="#EDF389"')

''' clear page '''
html = html.encode(enc, 'replace')

print html

f = file(filePath + '.html' , 'wb')
f.write(html)
f.flush()
f.close()

''' Save PDF '''
pdfresult = StringIO()
pdf = pisa.pisaDocument(StringIO(html), pdfresult, encoding = enc)
f = file(filePath + '.pdf', 'wb')
f.write(pdfresult.getvalue())
f.flush()
f.close()
pdfresult.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:32:45.740

如果您检查此行返回的对象类型：

```
html = g.response.body 
```

你会看到它*不是*一个 unicode 对象：

```
print type(html)
...
<type 'str'> 
```

所以当你来到这条线时：

```
html = html.encode(enc, 'replace') 
```

您正在尝试*重新编码*已经编码的字符串（这会导致错误）。

要解决此问题，请将您的代码更改为如下所示：

```
# decode the dowloaded data
html = g.response.body.decode(enc)

# html is now a unicode object
html = html.replace('bgcolor="EDF389"', 'bgcolor="#EDF389"')

print html

# encode as utf-8 before writing to file (no need for 'replace')
html = html.encode(enc) 
```

# php - 将 unix 时间转换为 DateTime 对象：PHP 5.2.X

> ID：13799035
> 
> 赞同：1
> 
> 时间：2012-12-10T10:25:42.317
> 
> 标签：php, date, datetime, unix-timestamp

基本上我想获得剩余时间到期。我在 php 5.3.x 中很容易做到，如下所示

```
$now = new DateTime();
$future_date =  new DateTime($enddate);
$interval = $future_date->diff($now,false); // ->diff will not work on 5.2.x
$interval->format("%d d, %h h, %i m"); 
```

我怎样才能在**PHP 中做一些事情： 5.2.x(5.2.17)**。

我尝试了什么：

```
new DateTime(date('Y-m-d H:i:s', $now->format('U') - $future_date->format('U'))); 
```

没有提供预期的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:42:13.830

因为 PHP < 5.3 不支持[`DateInterval`](http://php.net/manual/en/class.dateinterval.php)该类，`DateTime::diff()`（这是这样做的*正确*方法）不可用。您需要手动执行此操作才能使其在 5.2.x 中工作。

数学其实很简单：

```
// Get the difference between the two dates, in seconds
$diff = $future_date->format('U') - $now->format('U');

// Calculate the days component
$d = floor($diff / 86400);
$diff %= 86400;

// Calculate the hours component
$h = floor($diff / 3600);
$diff %= 3600;

// Calculate the minutes component
$m = floor($diff / 60);

// Calculate the seconds component
$s = $diff % 60;

// $d, $h, $m and $s now contain the values you want, so you can just build a
// string from them
$str = "$d d, $h h, $m m, $s s"; 
```

**然而**，对于较大的间隔，这将引入不准确，因为它没有考虑闰秒。这意味着您可能会结束几秒钟 - 但由于您的原始格式字符串不包含秒组件，我怀疑这对您正在做的事情太重要了。

另请注意，您需要从 中减去`$now`，`$future_date`而不是相反，否则结果将为负数。

[看到它工作](http://codepad.org/r7WrWsQw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:44:04.147

我尝试过的似乎有效，并且与您尝试过的相差不远：

```
echo $now = date('Y-m-d H:i:s');
echo PHP_EOL;
echo $future = date('Y-m-d H:i:s', strtotime('today + 3 days'));
echo PHP_EOL;
echo date('d', (strtotime("{$future}") - strtotime("{$now}"))); 
```

检查[http://codepad.org/JbaJ3EGH](http://codepad.org/JbaJ3EGH)

那时你就可以轻松变身`date()`了。`DateTime`还必须从减去的日期中仅获取天、小时、分钟或月，因为将“3 天间隔”格式化为日期会导致“1970-01-01 00:00:00.000”日期...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-17T01:47:41.747

知道在 DaveRandom 的非常有用的答案中，从返回的值`floor()`是浮点数（双精度值）可能很有用，所以

`$h === 1 ? true : false;`

即使`var_dump($h)`打印也会返回 false `1`。

如果您需要检查值是否为整数（例如，在创建具有单数和复数版本的时间单位的字符串时需要检查值是否为 1 或大于 1），请在分配它们时将它们转换为整数：

`$h = (int) floor($diff / 3600);`

# android - 复合小部件 - 首选方式是什么？

> ID：13799037
> 
> 赞同：0
> 
> 时间：2012-12-10T10:25:58.777
> 
> 标签：android, android-widget, android-view, eclipse-adt

我想构建可重用的小部件。它应该是标准元素的有序组合。什么是最好的方法。下面是我目前使用的代码示例，但可能会有更优雅的东西。此外，下面的示例在运行时完美运行，但 Eclipse 中的可视化编辑器抛出异常（这对我来说目前不是问题）。有没有推荐的创建复合材料的方法？我应该使用片段吗？

```
public class MyComposite extends LinearLayout {

  private ImageView m_a1;
  private ImageView m_a2;
  private ImageView m_w1;
  private ImageView m_w2;
  private ImageView m_w3;
  private ImageView m_w4;

  public CallBackSlider(final Context context) {
    this(context, null);
  }

  public CallBackSlider(final Context context, final AttributeSet attrs) {
    super(context, attrs);

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.my_composite, this, true);
    setupViewItems();
  }

  private void setupViewItems() {
    m_a1 = (ImageView) findViewById(R.id.A1Img);
    m_w1 = (ImageView) findViewById(R.id.Wave1Img);
    m_w2 = (ImageView) findViewById(R.id.Wave2Img);
    m_w3 = (ImageView) findViewById(R.id.Wave3Img);
    m_w4 = (ImageView) findViewById(R.id.Wave4Img);
    m_a2 = (ImageView) findViewById(R.id.A2Img);
    resetView();
  }

  private void resetView() {
    m_w1.setAlpha(0);
    m_w2.setAlpha(0);
    m_w3.setAlpha(0);
    m_w4.setAlpha(0);
  }
} 
```

布局xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/MyComposite"
  ...  >

  <ImageView
    android:id="@+id/A1Img"
    android:src="@drawable/a1"
    ...
   />

  <ImageView
    android:id="@+id/Wave1Img"
    ...
    android:src="@drawable/wave1" />

  <ImageView
    android:id="@+id/Wave2Img"
    ...
    android:src="@drawable/wave2" />

  <ImageView
    android:id="@+id/Wave3Img"
    ...
    android:src="@drawable/wave3" />

  <ImageView
    android:id="@+id/Wave4Img"
    ...
    android:src="@drawable/wave4" />

<ImageView
    android:id="@+id/EarImg"
    ...
    android:src="@drawable/a2" />

</LinearLayout> 
```

然后您可以在其他布局中使用它，如下所示：

```
...
<your.package.MyComposite 
    android:id="@+id/mc1"
    ...       
/>
... 
```

并使用 java 代码以及 MyComposite 类的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:33:37.757

在您的示例中，我认为您需要合并的部件。

如果您需要更改小部件的标准行为，请对其进行自定义，然后使用您的自定义小部件。

但是如果你需要一组具有标准行为的视图，合并它们就足够了。

some_activity.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical">

    // some views

    <include layout="@layout/view_part"/>

   // probably more views

</LinearLayout> 
```

view_part.xml：

```
 <merge xmlns:android="http://schemas.android.com/apk/res/android">

       <ImageView
       android:id="@+id/A1Img" 
       android:src="@drawable/a1"
       ...
       /> 

       <ImageView
       android:id="@+id/Wave1Img"
       ...
       android:src="@drawable/wave1" />

       <ImageView
       android:id="@+id/Wave2Img"
       ...
       android:src="@drawable/wave2" />

       <ImageView
       android:id="@+id/Wave3Img"
       ...
       android:src="@drawable/wave3" />

       <ImageView
       android:id="@+id/Wave4Img"
       ...
       android:src="@drawable/wave4" />

       <ImageView
       android:id="@+id/EarImg"
       ...
       android:src="@drawable/a2" />       

    </merge> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:36:52.383

最近引入了嵌套片段（在 SDK 4.1 或 4.2 以及兼容库中）。但我倾向于认为应该使用这些嵌套片段来封装更复杂的 UI 片段，而不仅仅是像你这样的简单小部件。

自定义小部件的常用方法是覆盖 onFinishInflate 方法。[你在那个博客](http://www.anotherandroidblog.com/2011/05/26/custom-composite-android-component/)上有一个教程。

下面是对应的一段代码：

```
public class TwoTextWidget extends LinearLayout {
    private TextView textOne;
    private TextView textTwo;

    public TwoTextWidget(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        ((Activity)getContext()).getLayoutInflater().inflate(R.layout.two_text_component, this);
        setupViewItems();
    }

    private void setupViewItems() {
        textOne = (TextView) findViewById(R.id.text_one);
        textTwo = (TextView) findViewById(R.id.text_two);
    }

    public void setTextOne(String text) {
        textOne.setText(text);
    }

    public void setTextTwo(String text) {
        textTwo.setText(text);
    }
} 
```

您可以允许使用自定义属性对您的小部件进行更多自定义。查看[其他博客](http://kevindion.com/2011/01/custom-xml-attributes-for-android-widgets/)。

# asp.net - 将三个表连接在一起时，Access 女士显示语法错误

> ID：13799038
> 
> 赞同：-2
> 
> 时间：2012-12-10T10:25:59.357
> 
> 标签：asp.net

```
SELECT XPO.ITEM_CODE AS [ITEM CODE], IT.DESCRIPT AS [DESCRIPTION], XPO.STK_ITEM_QTY AS [ORDERED],
       XPO.RECEIVED, IT.TAXABLE, XPO.STK_MEAS AS UM, XPO.COST, XPO.DISCOUNT_V AS [DISCOUNT VALUE],
       XPO.DISC_V_FEX AS [DISCOUNT AMOUNT], XPO.COST_FEX AS [COST AFTER DISCOUNT],
       XPO.TAX_AMOUNT AS [TAX AMOUNT], XPO.TAX_TABLE AS [TAX CODE], XPO.ASSET_ACNT AS [ACCOUNT],
       XPO.DEPT AS [LOC/SUB-LOC], XPO.JOBCODE AS [JOB CODE], XPO.RECOVERABLE_TAX_AMT AS [RECOVERABLE TAX],
       XPO.RECOVER_TAX_AMT_FEX AS [NON- RECOVERABLE TAX], XPO.ORIG_AMOUNT AS [LANDED COST],
       XPO.ORIG_AMOUNT_FEX AS [LANDED EXCLUSIVE TAX], IT.BRAND, IT.CATEGORY,
       IT.MODEL,PO.ESTDATE AS [DELIVERY DATE], PO.RECEIVED_STATUS AS [RECEIVED STATUS],
       PO.INVOICED_STATUS AS [INVOICED STATUS], PO.QUOTE_NO AS [PO #], XPO.CUSTCHAR1, XPO.CUSTCHAR2,
       XPO.CUSTCHAR3, XPO.CUSTCHAR4, XPO.CUSTDATE1, XPO.CUSTDATE2, XPO.CUSTDATE3, XPO.CUSTDATE4,
       XPO.CUSTLOG1, XPO.CUSTLOG2, XPO.CUSTLOG3, XPO.CUSTLOG4, XPO.CUSTMEMO1, XPO.CUSTMEMO2, XPO.CUSTMEMO3,
       XPO.CUSTMEMO4, XPO.AMOUNT
FROM dbo_X_PO XPO
INNER JOIN dbo_ITEMS IT ON (XPO.ITEM_CODE = IT.ITEMNO)
INNER JOIN dbo_PO PO ON (PO.ORDER_NO = XPO.ORDER_NO) WHERE PO.ORDER_NO = ''; 
```

当我在 sql server 中执行这个查询时，它工作得很好，但是当我在 MS Access 中运行它时，它调试错误 IE，查询表达式中的语法错误（缺少运算符）`dbo_X_PO XPO INNER JOIN dbo_ITEMS IT ON (XPO.ITEM_CODE = IT.ITEMNO) INNER JOIN dbo_PO PO ON (PO.ORDER_NO = XPO.ORDER_NO)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:03:45.173

SELECT A.COLUMN, B.COLUMN, C.COLUMN FROM ((TABLE1 A INNER JOIN TABLE2 B ON A.CUST_CODE = B.CUST_CODE) INNER JOIN A.ORDER_NO = C.ORDER_NO) WHERE A.ORDER_NO = '';

这是我试图解决我自己的查询的代码。我在这里加入了三个表，每个表中都使用了公共列。在 sql 中，我们不需要在关键字 bu 之后提供括号，在 MS Access 中，在关键字之后需要括号。

谢谢你的好意建议。因为你的建议我解决了这个问题

# jodatime - 根据秒数计算天、小时、分钟和秒的持续时间

> ID：13799039
> 
> 赞同：2
> 
> 时间：2012-12-10T10:26:02.500
> 
> 标签：jodatime

我不知道下面的代码有什么问题，但是输出很奇怪。

我的目的是从输入的大量秒数中获取（天、小时、分钟和秒）的数量。

```
int numSeconds = 612372;
// int numSeconds = 898298;
Seconds nSeconds = Seconds.seconds(numSeconds);
Period period = new Period(nSeconds);
PeriodFormatter dhm = new PeriodFormatterBuilder()
.appendDays()
.appendSuffix(" day", " days")
.appendSeparator(", ")
.appendHours()
.appendSuffix(" hour", " hours")
.appendSeparator(", ")
.appendMinutes()
.appendSuffix(" minute", " minutes")
.appendSeparator(", ")
.appendSeconds()
.appendSuffix(" second", " seconds")
.toFormatter();

System.out.println(dhm.print(period.normalizedStandard()));

// very weird output
// 2 hours, 6 minutes, 12 seconds 
```

它应该打印 7 天，...blah..blah...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:52:36.370

我为此找到了出路。3个东西要修改。

1.  `Period period = new Period(millisecond) // not seconds or micro seconds`
2.  `period.toStandardDuration().getStandardDays()`获取天数
3.  `period.getHours()`, `period.getMinutes()`,`period.getSeconds()`获取小时数、分钟数和秒数

我不知道这是对还是错，但结果是正确的。

# ios - MPMoviePlayerViewController 支持横向视频

> ID：13799040
> 
> 赞同：1
> 
> 时间：2012-12-10T10:26:04.473
> 
> 标签：ios, ios5, uinavigationcontroller, ios6, mpmovieplayercontroller

我有一个我正在构建的应用程序，我有点卡住了，它是一个非常基本的应用程序，它只锁定到 Portrait 并且包含一个 UINavigationController，但是，我想添加全屏视频，所以我在其中一个视图中使用 MPMoviePlayer。我的问题是，我如何让视频能够横向播放，而应用程序的其余部分保持纵向？在我的视图中似乎没有调用 Rotate 方法，我假设这与 NavigationController 有关。

# c++ - 调用dll函数后未捕获C++异常

> ID：13799042
> 
> 赞同：2
> 
> 时间：2012-12-10T10:26:06.750
> 
> 标签：c++, qt, visual-studio-2008, dll, qt-creator

我遇到了以下问题：有导出函数的 DLL。

这是代码示例：[DLL]

```
__declspec(dllexport) int openDevice(int,void**) 
```

[应用程序]

开发者.h：

```
__declspec(dllimport) int openDevice(int,void**) 
```

开发者.cpp：

```
try {
    void *p = NULL;
    int devError = openDevice(some_integer,&p);
    if(devError)
        throw (int)devError;
} catch(int i) {
    cerr << "Device opening error: " << i << endl;
}
catch(...) {
  //other handler
} 
```

异常没有传递给 catch 块，我没有理由。请帮助解决这个问题。我正在使用带有 MSVC 9.0 的 Qt Creator。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:31:12.803

请检查以下内容：

1）`devError`真的！= 0？

2）也许DLL函数中已经发生了异常......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:28:19.123

首先，删除`(int)`throw 表达式中的不安全类型转换。

然后，`cerr`在块中添加一条语句`if(devError)`以证明它实际上正在执行。

然后，编写一个测试程序来证明异常确实有效。只是一个`main()`投掷和接球。

# android - Android-Phonegap 设备宽度获得不同的值

> ID：13799043
> 
> 赞同：0
> 
> 时间：2012-12-10T10:26:06.590
> 
> 标签：android, jquery, cordova, jquery-mobile

我正在phonegap android中开发一个应用程序。

我正在尝试准备好设备上的设备宽度。我试过这段代码。

第一次应用程序开始提供（480，我使用的是 samsung i9003）宽度（警报），当我点击后退按钮并再次运行应用程序时，它显示 320。

我被困在这里..请帮忙

```
<!DOCTYPE HTML>
<html>
<head>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <meta name="viewport" content="width=device-width; user-scalable=no" />
        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Title</title>
    </head>
<body onload="onLoad()">

<div class="logo"></div>
<div class="content">
<div id="justt"></div>
</div>

        <script type="text/javascript" src="cordova-2.2.0.js"></script>
        <script src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8">

    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    function onDeviceReady() {

    var width=0;
    width=$(window).width()

    $('#justt').css('width',(width)+'px');
    alert(width);
    }

    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:49:51.667

为什么不尝试获取页面内容宽度：

```
var screenWidth = 0;
$(window).bind('resize', function () {
    screenWidth = $('[data-role="page"]').first().width());
}).trigger('resize');​​​ 
```

这将为您提供页面内容宽度，即使页面已调整大小。

在获取视口屏幕尺寸 ($(window).width()) 时，您不会总是得到完美的结果，不同的设备表现不同。

$(window).width() 和 $(window).height() 将为您提供视口尺寸，而不是屏幕尺寸。[在这里](http://tripleodeon.com/2011/12/first-understand-your-screen/)，您将找到此问题的详细概述。

# performance - 从远程服务器读取 Magento 代理错误 502 错误

> ID：13799045
> 
> 赞同：0
> 
> 时间：2012-12-10T10:26:29.110
> 
> 标签：performance, magento, proxy, e-commerce, webshop

[http://tinypic.com/view.php?pic=2mzgzso&s=6](http://tinypic.com/view.php?pic=2mzgzso&s=6)

嗨，堆栈，

我在我的 magento 网站上遇到了几个问题。当我在后端添加新产品时，出现 502 代理错误，即使我在自己的网站上，我也确实面临代理错误。非常令人沮丧。我的主人无法帮助我。

我们正在使用 ezapp 整页缓存，因为如果我们不使用缓存，整个站点都会出现代理错误。

有谁知道这个问题来自哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:23:32.547

您应该尝试从其他地方（其他互联网提供商）重现您的错误，以确保该错误在主机端。

# spring - 如何传递和检索列表 value from one controller to another controller in spring? I am new to spring.My task is to do design and code for login and some CURD operations by using spring,hibernate and jsp.I need to pass list values from loginco 问问题 问问题 2012-12-10T10:26:33.580 760 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am new to spring.My task is to do design and code for login and some CURD operations by using spring,hibernate and jsp.I need to pass list values from logincontroller to anothercontroller. public ModelAndView loginProcess(HttpServletRequest request, HttpServletResponse response){ //..... return new ModelAndView(new RedirectView("/dvd_hibernate/DvdController/dvdCURDOperation"),"userDetails",userDetails);} I redirected to DvdController as well as passing userDetails.Is it the correct way to do?if so how to retrieve the userDetails value in anothercontroller? I didnot used annotations. please make me to clear. Why can't you call dvdCURDOperation method directly within loginProcess. If you are aiming a 302 redirect so that browser url changes to /dvd_hibernate/DvdController/dvdCURDOperation you will have to save userDeatils in Session and retrieve it in dvdCURDOperation method. request.getSession.setAttribute("userDetails", userDetails); return new ModelAndView("redirect:/dvd_hibernate/DvdController/dvdCURDOperation"); springspring-mvc 4 3 回答 3 This answer is useful 2 I think what you're looking for is session variables in Spring. There's actually 4 ways of doing it, each with its pros and cons. You can find more details in the following link. It provides one of the best explanation on this topic on the net. Richard Chesterwood's "Using Sessions in Spring-MVC" 于 2012-12-10T11:42:42.920 回答 This answer is useful 1 为什么不能直接在 loginProcess 中调用 dvdCURDOperation 方法。 如果您的目标是 302 重定向，以便浏览器 url 更改为 /dvd_hibernate/DvdController/dvdCURDOperation 您必须在 Session 中保存 userDeutils 并在 dvdCURDOperation 方法中检索它。 request.getSession.setAttribute("userDetails", userDetails); return new ModelAndView("redirect:/dvd_hibernate/DvdController/dvdCURDOperation"); 于 2012-12-10T10:38:20.750 回答 This answer is useful 0 As you've no doubt discovered by now, passing a ModelMap to a RedirectView will have no effect. Others have mentioned session variables, but if you'd prefer to keep your controllers stateless, you can pass any arguments you need as URL parameters. 于 2012-12-10T14:43:36.590 回答 Related 2 css - 如何让我的表单域有背景图片？ 1 android - 如何使用复选框从列表视图中提取详细信息？ 1 vb.net - VB6 OCX 未出现在 VS2010 工具包中 7 css - 具有特定 TD 的表格的 CSS 选择器 3 angularjs - 将 $rootScope 注入控制器以使用或覆盖在 AngularJS 中 $rootScope 下定义的模型/方法是否有效？ 2 java - 在被覆盖的 JTable 中的构造函数之前调用的方法 3 java - 捆绑在 JAR 中的 Java 执行 Shell 脚本 1 extjs - 需要有关 ExtJS 选项卡面板奇怪行为的帮助 1 objective-c - 在驱动器中搜索文件和文件夹 2 c - fscanf 无法正常工作 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13799047
> 
> 赞同：1
> 
> 时间：
> 
> 标签：spring, spring-mvc

I am new to spring.My task is to do design and code for login and some CURD operations by using spring,hibernate and jsp.I need to pass list values from logincontroller to anothercontroller.

```
public ModelAndView loginProcess(HttpServletRequest request, HttpServletResponse response){  
          //..... 
          return new ModelAndView(new RedirectView("/dvd_hibernate/DvdController/dvdCURDOperation"),"userDetails",userDetails);} 
```

I redirected to DvdController as well as passing userDetails.Is it the correct way to do?if so how to retrieve the userDetails value in anothercontroller? I didnot used annotations. please make me to clear.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:42:42.920

I think what you're looking for is session variables in Spring. There's actually 4 ways of doing it, each with its pros and cons. You can find more details in the following link. It provides one of the best explanation on this topic on the net.

Richard Chesterwood's ["Using Sessions in Spring-MVC"](http://richardchesterwood.blogspot.com.au/2011/03/using-sessions-in-spring-mvc-including.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:38:20.750

为什么不能直接在 loginProcess 中调用 dvdCURDOperation 方法。

如果您的目标是 302 重定向，以便浏览器 url 更改为

`/dvd_hibernate/DvdController/dvdCURDOperation`

您必须在 Session 中保存 userDeutils 并在 dvdCURDOperation 方法中检索它。

```
request.getSession.setAttribute("userDetails", userDetails);
return new ModelAndView("redirect:/dvd_hibernate/DvdController/dvdCURDOperation"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:43:36.590

As you've no doubt discovered by now, passing a ModelMap to a RedirectView will have no effect. Others have mentioned session variables, but if you'd prefer to keep your controllers stateless, you can pass any arguments you need as URL parameters.

# ios - NSSet error when adding record to core data (to-many relationship)

> ID：13799049
> 
> 赞同：5
> 
> 时间：2012-12-10T10:26:41.627
> 
> 标签：ios, xcode, core-data, bundle, accessor

Ok so i'm still quite new to iOS and confused about a few things. Firstly, here are my entities... ![E.R.D](../Images/d59844d788a5437788918baf3942754a.png)

What i have already in there data wise is a Fruit (Apple) and a Source (Tree). They are both saved in the database.

Next i want to add an orange, but have the relationship with 'Tree'. So this is what i am using:

```
 Fruit *fruit = (Fruit *)[NSEntityDescription insertNewObjectForEntityForName:@"Fruit" inManagedObjectContext:managedObjectContext];
    fruit.fruitName = @"Orange";
  NSSet *test = [NSSet setWithObject:fruit];
    [_source addSourceFruit:test];

NSLog(@"4");

fruit.fruitSource = _source; 
```

(_source is the 'Tree', I performed a fetch request for 'Tree' on the Source entity into an array, then took objectAtIndex:0 (Tree) and assigned it to a point towards source entity.

```
 data = [managedObjectContext executeFetchRequest:request error:&error];

   Source *_source = [data objectAtIndex:0]; 
```

and the accessor methods:

```
- (void)addSourceFruitObject:(Fruit *)value;
- (void)removeSourceFruitObject:(Fruit *)value;
- (void)addSourceFruit:(NSSet *)values;
- (void)removeSourceFruit:(NSSet *)values; 
```

I have found an answer relating to bundles but i'm not entirely sure about them. I have read this '[https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFBundles/AboutBundles/AboutBundles.html](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFBundles/AboutBundles/AboutBundles.html)' and '[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html)' but i just don't seem to be grasping it brilliantly.

EDIT: The error is

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSSet intersectsSet:]: set argument is not an NSSet'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:01:58.063

I believe you're confusing Core Data by replacing the `sourceFruit` set. Core Data maintains inverse relationships. That means you only have to set `fruit.fruitSource = _source;` for it to understand how the objects are to be connected. You could use `[_source addSourceFruitObject:fruit];` **instead** but that seems less concise to me.

(Aside: it's a good idea to avoid using the `_name` style of naming for local variables. It has become something of a standard to use that form for instance variables that back properties.)

# css - InternetExplorer 和 Firefox for jqgrid 中的 CSS 不同

> ID：13799055
> 
> 赞同：2
> 
> 时间：2012-12-10T10:27:00.057
> 
> 标签：css, internet-explorer, jqgrid

我有一个[jqgrid](http://www.trirand.com/blog/)，它在 Internet Explorer 8 中的列分隔符看不到（白色，因为该单元格没有值），但同一个网格在 Firefox 中显示得很好。有没有人知道即使没有值存在也可以使网格在 IE 中显示列边框的修复程序？

Internet Explorer 8 的屏幕截图

![在此处输入图像描述](../Images/f75539002fcbd1ace9cf0991c039acc7.png)

Firefox 16.0.2 的屏幕截图

![在此处输入图像描述](../Images/0d9a3eefcfbfd19a855425f9e0c0c7a8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:16:00.913

Internet Explorer 8 不会对没有内容的表格单元格应用边框。一个选项是向单元格添加内容，但内容不必是可见的，因此`&nbsp;`字符就足够了。`&nbsp;`被称为[无中断空格](http://en.wikipedia.org/wiki/Non-breaking_space)字符，它本质上是一个始终呈现/渲染的空间，即使一起使用多次（与传统的空格字符不同）。这修复了边框并且不会向用户显示单元格中的任何内容。

# php - 在新页面加载期间未设置变量

> ID：13799057
> 
> 赞同：1
> 
> 时间：2012-12-10T10:27:02.853
> 
> 标签：php

我在网站上有一个注册表单，注册调用了一个函数，该函数接受 $_POST 值作为参数。在进行常规检查时，如果发现错误，它会使用错误消息类中的一个函数来设置错误，并增加 errorcounter 变量。此函数接受两个参数：字段和错误消息（存储在数组中）。

```
 $errmsg->setError("firstname", "You must enter your name"); 
```

setError() 设置错误：

```
 function setError($field, $errMsg){
        $this->errors[$field] = $errMsg;
    } 
```

注册功能检查错误计数器是否已增加，如果没有，则注册帐户，如果是，则重定向回注册页面。

注册页面使用 errmsg 类中的一个函数来显示任何错误：

```
 $errmsg->showError("firstname");
    // Argument being the field name. 
```

此函数应显示已设置的任何错误消息：

```
 function showError($field) {
        if (isset($this->errors[$field])) {
            return $this->errors[$field];
        } else {
            return "";
        }
    } 
```

因此，您可以查看数组是否定义了索引，它应该显示值，如果没有，则不显示任何内容。

我遇到的问题是即使出现错误也没有显示任何内容。

我试过回显 $errmsg->errors['firstname']; 如果错误计数器> 0，则在寄存器功能中，并显示正确的消息。所以我知道正在设置数组键，如果我更改 else 语句以在数组键不存在时返回一个字符串，它也可以正常工作。因此，由于某种原因，正在设置该值，然后在页面重新加载后再次丢失。

我还尝试在错误消息类中创建一个函数来返回发现错误时可以由 register 函数调用的数组：

```
 function getErrorArray(){
        return $this->errors;
    } 
```

这也无济于事。为了 100% 确定在运行 register 函数时数组键存在，我尝试了这个：

```
 if ($errors > 0) {
        if(isset($errmsg->errors['firstname'])) {
            header("Location: ".$session->referrer);
        } else {
            header("Location: http://www.google.com");
        } 
```

正如预期的那样，如果出现错误（我正在处理的错误是一个空字符串），它会重定向回来并应该显示消息，并且当字段包含重定向到 Google 的值时。

我也尝试过使用：

```
 if(array_key_exists($field,$this->errors)) 
```

代替：

```
 if(isset($errmsg->errors['firstname'])) 
```

我真的不明白为什么这不起作用，这是范围问题吗？我是否应该将其存储在 $_SESSION 中？任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:29:48.917

是的，您应该将其存储在`$_SESSION`. PHP 变量只存在于当前请求的范围内。一旦请求完成，变量就会丢失。重定向会创建一个新请求。

您还可以在同一请求期间显示错误（当用户将数据发布到您的服务器时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:33:59.317

如果要在 2 个请求之间保存数据，则必须使用`$_SESSION`或某些数据库系统。

```
function setError($field, $mess) {
   $_SESSION['errors'][$field] = $mess;
} 
```

您的代码很好，但您需要重构会话数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:34:41.297

PHP 是无状态的。因此，如果您刷新页面，变量将被重置。这就是我们将重要信息存储在 SESSION 数组中的原因。$_SESSION 将是最好的方法。

问候

# iphone - 在 iOS 中发布到 Facebook 墙

> ID：13799058
> 
> 赞同：0
> 
> 时间：2012-12-10T10:27:04.973
> 
> 标签：iphone, objective-c, ios, facebook, ipad

我正在使用[此包装器](https://github.com/phildow/SPFacebookClient)尝试将带有标题的图像发布到用户的墙上：

我已经使用以下代码将其发布到相册，但我不知道如何将其发布到用户的墙上。

```
UIImage *img = [logo getMyLogoImage];        
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"This is a caption! Do you know this logo?",@"message",img,@"picture",nil];
[[SPFacebookClient_MyApp sharedClient] requestWithParams:params completionHandler:^(BOOL success, id result, NSError *error){}]; 
```

我可以看到使用常规的 Facebook sdk，我可以调用它来发布到墙上：

```
[FBRequestConnection startWithGraphPath:@"me/Photos"
          parameters:params
          HTTPMethod:@"POST"
          completionHandler:^(FBRequestConnection *connection, id result, NSError *error){[self showAlert:@"Photo Post" result:result error:error];}]; 
```

不过，我真的很想弄清楚如何使用包装器来实现这一点，因为它使管理会话和一般设置变得更加容易和清洁。谁能解释我必须改变或添加什么才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:08:09.380

请如下更新您的代码并尝试。

```
UIImage *img = [logo getMyLogoImage];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"This is a caption! Do you know this logo?",@"message",img,@"picture",nil];    
[[SPExampleFacebookClient sharedClient] requestWithName:@"stream.publish" params:params method:@"POST" completionHandler:^(BOOL success, id result, NSError *error){
    NSLog(@"Error - %@", error);
}]; 
```

# jasper-reports - jasper 报告 Ireport 设计器元素重叠

> ID：13799059
> 
> 赞同：2
> 
> 时间：2012-12-10T10:27:10.807
> 
> 标签：jasper-reports

我正在尝试生成一个 pdf 报告，其中静态文本标签位于左侧，并且相应的数据文本字段与其右侧平行对齐。

其他项目以类似的方式排列在另一个之下。

对于文本字段，带有溢出属性的拉伸设置为 true，并且在拉伸时，它不再与其左侧的静态文本标签对齐。

如何解决这个问题呢.....

因此，与其数据相关的项目的对齐在视觉上是有意义的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:34:21.207

首先，为动态文本元素分配一些空间（垂直）。设置

> 当溢出属性为真时拉伸

. 将动态组件放在框架内。编译报表并运行报表。检查数据现在是否正确表示。我不确定它是否有效，但您可以尝试一次。

# intellij-idea - Intellij IDEA：如何更改构建目录？

> ID：13799061
> 
> 赞同：20
> 
> 时间：2012-12-10T10:27:22.960
> 
> 标签：intellij-idea

有谁碰巧知道如何在 Intellij IDEA（11 或 12）中更改构建目录名称？默认名称是`out`，我希望它是`target`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-10T10:32:44.500

你可以在这里找到设置

File [Menu] > Project Structure > Modules [List] > Path [Tab] > Use module compile output path [Option]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-26T14:03:25.203

在 Intellij IDEA 13.1.4 中，执行以下操作：

1.  文件 [菜单]
2.  项目结构 [选项]
3.  项目设置 [部分]
4.  项目 [标签]
5.  项目编译器输出 [文本字段]

# ios - 如何使用 AMDeviceInstallApplication

> ID：13799067
> 
> 赞同：3
> 
> 时间：2012-12-10T10:27:58.947
> 
> 标签：ios, installation, ipa

我找到了这个网站， [https://github.com/ghughes/fruitstrap/blob/master/fruitstrap.c](https://github.com/ghughes/fruitstrap/blob/master/fruitstrap.c)

首先，他`AMDeviceTransferApplication`用来传输文件到ios设备，

```
path = /PublicStaging/*.ipa 
```

第二，他`AMDeviceInstallApplication`用来安装ipa文件。

```
AMDeviceInstallApplication(installFd, path, options, install_callback, NULL); 
```

我的问题是如何在 C# 中创建选项。

我的代码是：

```
int value2 = MobileDevice.AMDeviceInstallApplication(installFd, MobileDevice.CFStringMakeConstantString("c:/Google_Translate_v1.3.1.2978(os3.0).ipa"), null, null, null); 
```

value2 的输出是 -402653104。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:48:01.860

您需要安装应用程序包（`.app`文件夹，例如来自 Xcode 的构建文件夹）而不是`.ipa`文件。

# java - 必需属性中的布尔表达式

> ID：13799070
> 
> 赞同：1
> 
> 时间：2012-12-10T10:28:03.483
> 
> 标签：java, jsf, primefaces, el

`required`是否可以用布尔 EL 表达式填充属性的值？我有一个表单，其中`qtyInput`仅当描述输入 ( `descInput`) 不为空时才需要数量输入 ( )。我试着这样做：

```
<h:form id="form">
        <p:dataTable var="item" value="#{someController.list}" id="table">
            <p:column>
                <f:facet name="header" >
                    <h:outputText value="Description"/>
                </f:facet>
                <p:inputText value="#item.description}" id="descInput"  />
                <p:message for="descInput" />
            </p:column>
            <p:column>
                <f:facet name="header" >
                    <h:outputText value="Quantity"/>
                </f:facet>
                <p:inputText value="#{item.quantity}" required="#{not empty item.description}" id="qtyInput"/>
                <p:message for="qtyInput" />
            </p:column>

        </p:dataTable>
        <p:commandButton id="saveButton" value="Save" action="#{someController.save()}"/>
</h:form> 
```

但它没有用。是否可以仅使用 EL 来执行此操作，还是应该实现自定义验证器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:15:18.750

是的，有可能。您的问题只是由于时间错误造成的。在您当前的尝试中，

```
<p:inputText ... value="#{item.description}" />
<p:inputText ... value="#{item.quantity}" required="#{not empty item.description}" /> 
```

`#{item.description}`仅在更新模型值阶段设置，而在`required`验证阶段评估属性，这是之前的一个阶段。因此，您正在检查当时尚不可用的值。

您需要检查组件的值而不是模型值。您可以通过将组件绑定到视图然后访问[`UIInput#getValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIOutput.html#getValue%28%29).

```
<p:inputText ... binding="#{descComponent}" value="#{item.description}" />
<p:inputText ... value="#{item.quantity}" required="#{not empty descComponent.value}" /> 
```

请注意，组件是按照它们在组件树中出现的顺序进行处理的，因此如果您反过来使用上述组件，那么它也会失败。您需要改为检查组件的提交值[`UIInput#getSubmittedValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#getSubmittedValue%28%29)。

```
<p:inputText ... value="#{item.quantity}" required="#{not empty descComponent.submittedValue}" />
<p:inputText ... binding="#{descComponent}" value="#{item.description}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:14:06.010

BalusC 编写的替代方法是使用 PrimeFaces p:ajax

```
<p:inputText ...id="itemDescription" value="#{item.description}">
    <p:ajax event="blur" partialSubmit="true" update="itemQuantity" />
</input>
<p:inputText ...id="itemQuantity" value="#{item.quantity}" required="#{not empty item.description}" /> 
```

在我看来它看起来很优雅，唯一的缺点是在 itemQuantity 中输入的任何内容，在修改 itemDescription 后都将重置为 bean 的值（如果是这种情况，则重置为无值）。另外，也许您可​​以使用 BalusC 的库 omnifaces，它提供了一些 validateAllOrNone 验证器，尽管我从未使用过。

爱德华

# iphone - 如何覆盖 UISearchBar 中的取消按钮

> ID：13799074
> 
> 赞同：3
> 
> 时间：2012-12-10T10:28:19.630
> 
> 标签：iphone, objective-c, ios, uisearchbar

我目前正在使用以下方法来阻止取消按钮项显示在搜索栏中。我有一个习惯`UIButton`，我想改用它。

问题是目前内置的取消按钮仍在显示。

```
- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller
{
    controller.searchBar.showsCancelButton = NO;
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:32:53.180

您可以使用此隐藏取消按钮

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    [searchBar setShowsCancelButton:NO animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:33:26.433

```
for (UIView *possibleButton in searchBar.subviews)
{  
    if ([possibleButton isKindOfClass:[UIButton class]])  
    {  
        UIButton *cancelButton = (UIButton*)possibleButton;  
        cancelButton.enabled = YES;  
        break;
    }    
} 
```

一个通过这个链接[UISearchBar disable auto disable of cancel button](https://stackoverflow.com/questions/4348351/uisearchbar-disable-auto-disable-of-cancel-button)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-16T04:37:37.257

`Swift` **4.2、4.0+**的[Rajneesh071](https://stackoverflow.com/users/1369972/rajneesh071)答案

```
func searchBarTextDidBeginEditing(_ searchBar: UISearchBar) {
    searchBar.setShowsCancelButton(false, animated: true)
} 
```

# shell - 找不到文件时，在 ls 上同步 shell 脚本失败

> ID：13799082
> 
> 赞同：1
> 
> 时间：2012-12-10T10:28:57.347
> 
> 标签：shell, zsh

我编写了一个 shell 脚本来将我的 dotfiles 存储库同步到我的主目录。这在 Cygwin（zsh）中运行良好，但我刚刚迁移到 Linux（Xubuntu 12.10 上的 zsh）并且失败了。

该脚本在 repo 中列出了相关的点文件，然后在创建符号链接之前，它会存档任何冲突。归档程序如下：

```
for i in $dotFiles; do
  toArchive=$toArchive $(ls -d $i)
done 
```

当其中的任何项目`$dotfiles`不存在时，这将失败；`ls`返回`No such file or directory`并且脚本终止。

会重定向`stderr`来`/dev/null`解决这个问题吗？IE：

```
for i in $dotFiles; do
  toArchive=$toArchive $(ls -d $i 2>/dev/null)
done 
```

...或者有更好的解决方案吗？

（为了完整起见，我的脚本在[这里](https://github.com/Xophmeister/dotfiles/blob/master/sync)。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:56:25.040

shell脚本最糟糕的事情是让它工作。第二个最糟糕的是维持（在六个月内无法弄清楚每条线/选项做了什么）。考虑到这一点，我建议您只添加一个存在检查：

```
for i in $dotFiles; do
  if [[ -e $i ]]; then
      toArchive=$toArchive $(ls -d $i)
  fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:38:43.073

我不明白为什么您的脚本在第一个错误时终止（`set -e`实际上？作为 Makefile 规则的一部分运行？），但是可以通过运行忽略任何命令的非零状态

```
 cmd || : 
```

（阅读：*command 或 true*）。做

```
 $(ls -d $i || :) 
```

做这个把戏？

PS：我看了你的剧本。事实上，`set -e`是有效的。您可能希望完全删除它或仅针对脚本的特定区域选择性地打开它（`set +e`撤消 的效果`set -e`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:14:32.273

Zsh 与其他 shell 不同，当文件名模式不匹配任何内容时，它不会执行命令。这意味着`echo hello *`空目录中的 an 实际上不会`hello *`在屏幕上打印。相反，zsh 将打印所述错误消息并且`echo`不会被执行。

`NOMATCH`您可以使用默认激活的那些时髦选项之一来打开和关闭它。请阅读 zsh 的信息页面，了解它是如何工作的。[zsh FAQ 中的第 2 章](http://zsh.sourceforge.net/FAQ/zshfaq02.html#l9)也对此进行了解释。

但是，如果我正确地解释了您的意图，那么您将拥有一个可能实际存在或可能不存在的文件名列表，并且您只想在备份中包含一个文件名（如果存在）。如果是这种情况，那么这里是使用数组和文件存在测试的更好版本：

```
typeset -a files_to_backup
for file in $dotFiles ; do
  if [[ -f $file ]] files_to_backup=($files_to_backup $file)
done 
```

`if`如果您想知道的话，这也使用 zsh 的简短条件语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T22:42:29.863

我已将此处发布的建议单独采纳，并将它们包装成一个完整的解决方案。我不知道是什么破坏了我的脚本中的逻辑，但如果我猜的话，我会说它可能是解析`ls`和/或使用间隔字符串而不是 zsh 数组的结果。无论如何，工作脚本如下：

```
#!/bin/zsh

# Break on first error and unset variables
set -e
set -u

# Gather dotfiles
repoDir=$(pwd)

cd $repoDir/public
publicDotfiles=(.*)
cd $repoDir/private
privateDotfiles=(.*)

# Determine clashes, to backup
typeset -a toBackup
for file in $publicDotfiles $privateDotfiles; do
  dotFile=$HOME/$file
  if [[ -e $dotFile ]] toBackup=($toBackup $dotFile)
done

if [[ "$toBackup" != "" ]]; then
  backupFile=$HOME/dotfiles.$(date +%Y%m%d).tar.gz
  tar czPf $backupFile $toBackup --remove-files
fi

# Create symlinks
for i in $publicDotfiles; do
  ln -s $repoDir/public/$i $HOME/$i
done

for i in $privateDotfiles; do
  ln -s $repoDir/private/$i $HOME/$i
done 
```

当我在做的时候，我让它变得更健壮了一点：

*   有两类点文件，公共的和私有的。私有目录用于存储`.gnupg`等。它的内容被 Git 忽略，所以它们永远不会被推出。
*   如果脚本是从它自己的目录运行的，那么项目文件夹可以在任何地方，然后脚本会计算出绝对路径。

# c++ - 两个 cpp 程序实现相同事物的时间变化

> ID：13799084
> 
> 赞同：0
> 
> 时间：2012-12-10T10:29:01.247
> 
> 标签：c++

我正在为一个简单的 codeshef 问题编写一段代码

> [http://www.codechef.com/problems/INTEST/](http://www.codechef.com/problems/INTEST/)

这个问题非常简单，只需从标准输入读取数字并打印多少输入的数字可以被数字 K 禁用。

我把我的解决方案写成

```
#include<iostream>

using namespace std;

int main()
{
  unsigned long  n,k,m;
    cin>>n>>k;
    int i;
    int count=0;
    for(i=0;i<n;i++){
        cin>>m;
        if(m%k==0)
          count++;
    }
    cout<<count<<endl;
    return 0;
} 
```

并且在线编译器说这个“超出时间限制”。

当我检查对方的解决方案时，他们也在做同样的事情，除了以字符串的形式读取数字，然后使用将这个字符串转换为数字

> num=num*10 + (buffer-'0');

别人的解决方案。 [http://www.codechef.com/viewsolution/181250](http://www.codechef.com/viewsolution/181250) 这个解决方案运行良好，没有任何警告。任何人都可以解释这个“超出时间限制”的问题。

# internet-explorer - IE8 中的 Selenium 无法识别 Gmail 登录按钮

> ID：13799089
> 
> 赞同：0
> 
> 时间：2012-12-10T10:29:50.813
> 
> 标签：internet-explorer, selenium-webdriver, testng

我正在为 WindowsXP/IE8 中的 Gmail 登录执行 Selenium/TestNG 脚本。脚本在该页面中输入了正确的用户 ID 和密码，但它没有点击 Gmail 中的“登录”选项。

我在 Windows7/IE9 中运行了相同的脚本，它工作正常。相同的脚本也适用于 Firefox。请指教。

硒版本：2.25.0

```
import org.testng.annotations.*;
import org.openqa.selenium.*;
import org.openqa.selenium.ie.*;

public class New_Booking_Inc {
    private WebDriver driver;
    private String baseUrl;

    @BeforeTest
    public void Open_IE() throws Exception {
        System.setProperty("webdriver.ie.driver", "C:\\WINDOWS\\system32");
        driver = new InternetExplorerDriver();
        baseUrl = "http://www.gmail.com";
        driver.get(baseUrl);
    }

    @Test (testName = "Login")
    public void Login() throws Exception {
        //driver.get(baseUrl);
        driver.findElement(By.id("Email")).clear();
        driver.findElement(By.id("Email")).sendKeys("extsc2");
        Thread.sleep(1000);
        driver.findElement(By.id("Passwd")).clear();
        driver.findElement(By.id("Passwd")).sendKeys("Passwords");
        Thread.sleep(1000);
        driver.findElement(By.id("signIn")).click();
        Thread.sleep(5000);
    }

    @AfterTest
    public void Close_IE() throws Exception {
        driver.quit();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:43:22.937

IE 存在一些已知问题，其中 .click() 无法正常工作。

你有没有尝试：

```
 driver.findElement(By.id("signIn")).SendKeys("\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:28:56.333

试试 driver.findElement(By.id("signIn")).sendKeys(Keys.ENTER);

或使用不同的 xpath ""

# asp.net-mvc - 如何读取控制器中的视图值

> ID：13799090
> 
> 赞同：0
> 
> 时间：2012-12-10T10:29:55.730
> 
> 标签：asp.net-mvc

我试图从我的控制器视图中获取用户名值，但我得到一个空值：

**这是我的观点：**

```
<form action="Home/Save" method=post > 
```

名称：@Html.TextBox("名称") `

这是我修改后的控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

        return View();
    }
    [HttpPost]
    public ActionResult Save()
    {
        ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

        return View();
    } 
```

我想更改此代码，以便可以在保存操作中捕获文本框值。

如果我遗漏了什么，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:52:08.807

我假设您的编辑器模板仅包含 html 布局代码。如果是这种情况，您没有获得价值的原因是因为您没有将 html 控件放入表单中。

为了让控制器获取值，您需要通过表单发布它，像这样

```
@using(Html.BeginForm("Submit")){
    EmpNo:
    @Html.EditorFor(model => model.userName)
    <br/>
    Password:
    @Html.EditorFor(model => model.pwd)
    <br/>
    <input type=submit id=sbmt value=save />   
} 
```

请注意，我的语法仅在您将 Razor 模板与 MVC 3 一起使用时才有效。此外，服务器端控件确实适用于 asp.net webform，请尽量不要在 MVC 中使用它。你应该是javascript代码来隐藏和显示面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:26:40.683

我提到了这个例子，它帮助了我：

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=705](http://www.dotnetcurry.com/ShowArticle.aspx?ID=705)

感谢您的帮助 Jack & vTortala。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:41:11.487

您是否尝试将视图控件放在 Form 中？

[http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit-and-post-scenarios.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit-and-post-scenarios.aspx)

[![在此处输入图像描述](../Images/1389cbb6eafd8d11c97f72e4188a2df3.png)](https://i.stack.imgur.com/TsfXo.png)
[（来源：[scottgu.com](http://www.scottgu.com/blogposts/mvc4/step33.png)）]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-28T03:25:50.590

第 1 步：为简单兴趣创建模型

```
namespace CalculateSimpleInterest.Models  
{  
    public class SimpleInterestModel  
    {  
        public decimal Amount { get; set; }  
        public decimal Rate { get; set; }  
        public int Year { get; set; }  
    }  
} 
```

第 2 步：创建一个在 UI 上呈现视图的操作方法

我们正在传递一个空模型以绑定到视图。

```
public ActionResult SimpleInterest()  
{  
    SimpleInterestModel model = new SimpleInterestModel();  
    return View(model);  
} 
```

第 3 步：创建强类型视图

```
@model CalculateSimpleInterest.Models.SimpleInterestModel  

@{  
    ViewBag.Title = "SimpleInterest";  
}  

<h2>Calulate Simple Interest</h2>  

@using (Ajax.BeginForm("CalculateSimpleInterestResult","CalculateSimpleInterest",  
                            new AjaxOptions { UpdateTargetId = "divInterestDeatils" }))  
    {  

    <fieldset>  
        <legend>Calulate Simple Interest</legend>  
        <div id="divInterestDeatils"></div>  

        <div class="editor-label">  
            @Html.LabelFor(model => model.Amount)  
        </div>  
        <div class="editor-field">  
            @Html.EditorFor(model => model.Amount)            
        </div>  

        <div class="editor-label">  
            @Html.LabelFor(model => model.Rate)  
        </div>  
        <div class="editor-field">  
            @Html.EditorFor(model => model.Rate)            
        </div>  

        <div class="editor-label">  
            @Html.LabelFor(model => model.Year)  
        </div>  
        <div class="editor-field">  
            @Html.EditorFor(model => model.Year)             
        </div>  
        <p>  
            <input type="submit" value="Calculate" />  
        </p>  
    </fieldset>  
}  

@section Scripts {  
    @Scripts.Render("~/bundles/jqueryval")  
} 
```

第 4 步：创建一个处理 POST 请求并处理数据的操作方法

在 action 方法中，我们传递一个模型作为参数。该模型具有 UI 输入字段数据。这里我们不需要解析，也不需要编写额外的代码。

```
[HttpPost]  
public ActionResult CalculateSimpleInterestResult(SimpleInterestModel model)  
{  
    decimal simpleInteresrt = (model.Amount*model.Year*model.Rate)/100;  
    StringBuilder sbInterest = new StringBuilder();  
    sbInterest.Append("<b>Amount :</b> " + model.Amount+"<br/>");  
    sbInterest.Append("<b>Rate :</b> " + model.Rate + "<br/>");  
    sbInterest.Append("<b>Time(year) :</b> " + model.Year + "<br/>");  
    sbInterest.Append("<b>Interest :</b> " + simpleInteresrt);  
    return Content(sbInterest.ToString());  
} 
```

# java - Eclipse 插件包卡在启动状态

> ID：13799093
> 
> 赞同：6
> 
> 时间：2012-12-10T10:30:08.957
> 
> 标签：java, eclipse-plugin, osgi

我使用 Eclipse 创建了一个新的插件项目，它`Activator`为我创建了一个默认值。在调试（作为 Eclipse 应用程序运行）时，我注意到没有调用此激活器的`start()`和方法。`stop()`

遵循[关于当你的包在 Eclipse 中不可见时该怎么做的指南，](http://wiki.eclipse.org/Where_Is_My_Bundle)我偶然发现了以下结果。

*   使用该`ss`命令，我可以看到我的捆绑包已列出。
*   我的捆绑包的状态是“[开始](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#STARTING)”

> 捆绑包正在启动中。捆绑包处于其方法处于活动`STARTING` 状态时的状态。调用`start`捆绑包时，捆绑包必须处于此状态。`BundleActivator.start(BundleContext)`如果该`BundleActivator.start`方法无异常完成，则该包已成功启动并且必须移动到该`ACTIVE`状态。

放置在`start`方法第一行的断点不会被命中。两者都没有`System.out.println`出现在控制台中。什么可能导致`start`方法没有被调用，从而导致状态被卡住`STARTING`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:02:00.093

以下内容并未解决 OSGi 控制台报告插件为 的事实`STARTING`，但这是我在 Eclipse 启动后立即启动插件的一种方法。

正如[Chris Gerken 在评论中指出的那样](https://stackoverflow.com/questions/13799093/eclipse-plugin-bundle-stuck-in-starting-state#comment18982578_13799093)，启动代码仅在您尝试使用其中一个插件扩展时运行。

使用[`org.eclipse.ui.startup`](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_startup.html)扩展，您可以注册一个想要在启动时激活的插件。可以使用清单编辑器进行设置。

1.  在“依赖项”选项卡中添加`org.eclipse.ui`为依赖项。
2.  在“扩展”选项卡中添加启动扩展 ( `org.eclipse.ui.startup`)。
3.  在“扩展元素详细信息”下方提供了一个实现`org.eclipse.ui.IStartup`.

![启动扩展](../Images/8cec23c4efdd47cf06102b76bba7a7b1.png)

任务管理器.java

```
public class TaskManager implements IStartup
{
    @Override
    public void earlyStartup()
    {
        // This will get called when Eclipse is started,
        // after the GUI has been initialized.
    }
} 
```

# c++ - 创建虚拟设备

> ID：13799094
> 
> 赞同：4
> 
> 时间：2012-12-10T10:30:13.223
> 
> 标签：c++, windows, usb, device-emulation

*   是否可以“即时”创建虚拟设备？（这家伙单击“新虚拟设备”按钮，写下设备名称，然后弹出窗口就好像他刚刚插入了一个新设备一样）。
*   我必须创建自定义设备驱动程序还是可以使用通用设备驱动程序？
*   我应该从哪里开始（文档链接）？

我的目标是模拟一个或多个虚拟游戏手柄，在游戏中可见（带有自定义名称），并映射到一个或多个物理设备，如键盘和鼠标。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:47:04.190

是的，这是可能的。Windows 驱动程序架构需要这样的支持，以允许 USB 驱动程序动态加载。您将需要一个自定义设备驱动程序。有现有的“虚拟”设备驱动程序，例如 for `NUL`，但那些不是您想要的。

然而，编写设备驱动程序并不适合胆小的人。你真的不能指望阅读一篇文章并开始黑客攻击。

# netty - 在 ZlibEncoder 之前调用 LengthFieldPrepender

> ID：13799095
> 
> 赞同：0
> 
> 时间：2012-12-10T10:30:13.193
> 
> 标签：netty

我目前正在尝试使用 netty 实现压缩。我正在使用 PortUnification 示例来测试这一点。但是 LengthFieldPrepender 总是在 ZlibEncoder 之前被调用。

```
public class PortUnificationServerHandler extends FrameDecoder
{

    private final boolean detectSsl;
    private final boolean detectGzip;
    private AppConfiguration appConfiguration;
    private final ExecutionHandler executionHandler;

public PortUnificationServerHandler(AppConfiguration pAppConfiguration, ExecutionHandler pExecutionHandler)
{
    appConfiguration = pAppConfiguration;
    this.executionHandler = pExecutionHandler;
    detectGzip = false;
    detectSsl = false;
}

@Override
protected Object decode(ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer) throws Exception
{

    String lRequest = buffer.toString(CharsetUtil.UTF_8);
    if (ConnectionServiceHelper.isValidJSON(lRequest))
    {
        ObjectMapper lObjectMapper = new ObjectMapper();
        StringReader lStringReader = new StringReader(lRequest);
        JsonNode lNode = lObjectMapper.readTree(lStringReader);
        if (lNode.get(Constants.REQUEST_TYPE).asText().trim().equalsIgnoreCase(Constants.LOGIN_REQUEST))
        {
            JsonNode lDataNode1 = lNode.get(Constants.REQUEST_DATA);
            LoginRequest lLogin = lObjectMapper.treeToValue(lDataNode1, LoginRequest.class);

            if (lLogin.getCompress() != null)
            {
                if (lLogin.getCompress().trim().equalsIgnoreCase(Constants.COMPRESS_FLAG_TRUE))
                {
                    enableJSON(ctx);
                    enableGzip(ctx);
                    ctx.getPipeline().remove(this);
                }
                else
                {
                    enableJSON(ctx);
                    ctx.getPipeline().remove(this);
                }
            }
            else
            {
                enableJSON(ctx);
                ctx.getPipeline().remove(this);

            }
            for (String lName : ctx.getPipeline().getNames())
            {
                System.out.println("Handler Name " + lName);
            }
        }
    }

    // Forward the current read buffer as is to the new handlers.
    return buffer.readBytes(buffer.readableBytes());
}

private void enableJSON(ChannelHandlerContext ctx)
{
    ChannelPipeline pipeline = ctx.getPipeline();

    boolean lHandlerExists = pipeline.getContext("bufferedwriter") != null;

    if (!lHandlerExists)
    {
        pipeline.addFirst("bufferedwriter", new MyBufferedWriteHandler()); // 80960
    }

    lHandlerExists = pipeline.getContext("framer") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("framer", new DelimiterBasedFrameDecoder(8192, Delimiters.lineDelimiter())); // 80960
    }

    lHandlerExists = pipeline.getContext("decoder") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("decoder", new StringDecoder(CharsetUtil.UTF_8));
    }

    lHandlerExists = pipeline.getContext("encoder") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("encoder", new StringEncoder(CharsetUtil.UTF_8));
    }

    lHandlerExists = pipeline.getContext("executor") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("executor", executionHandler);
    }

    lHandlerExists = pipeline.getContext("handler") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("handler", new ConnectionServiceUpStreamHandler(appConfiguration));
    }

    lHandlerExists = pipeline.getContext("unite") != null;
    if (!lHandlerExists)
    {
        pipeline.addLast("unite", new PortUnificationServerHandler(appConfiguration, executionHandler));
    }
}

private void enableGzip(ChannelHandlerContext ctx)
{
    ChannelPipeline pipeline = ctx.getPipeline();

    boolean lHandlerExists = pipeline.getContext("encoder") != null;
    if (lHandlerExists)
    {
        pipeline.remove("encoder");
    }

    lHandlerExists = pipeline.getContext("gzipdeflater") != null;
    if (!lHandlerExists)
    {
        pipeline.addBefore("executor", "gzipdeflater", new ZlibEncoder(ZlibWrapper.GZIP));
    }

    lHandlerExists = pipeline.getContext("lengthprepender") != null;
    if (!lHandlerExists)
    {
        pipeline.addAfter("gzipdeflater", "lengthprepender", new LengthFieldPrepender(4));
    }

  }
} 
```

关于我哪里出错的任何建议？我在 Ubuntu 12.4 上使用带有 jdk 1.7 的 netty 3.5.11。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:13:55.143

并没有真正弄清楚为什么会这样。设法建立一个解决方法。构建了一个扩展 ZlibEncoder 的自定义处理程序，并在调用 super.encode 后立即放入长度前缀代码。

伟大的框架虽然！

干杯。

# c# - VisualStateManager.GoToState 在 OnNavigatedTo 方法中返回 false

> ID：13799103
> 
> 赞同：2
> 
> 时间：2012-12-10T10:30:41.890
> 
> 标签：c#, windows-8, microsoft-metro

它不工作，`OnNavigatedTo`但它在`OnNavigatedTo`完成后工作。

```
protected override void OnNavigatedTo(Windows.UI.Xaml.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    //Here result is false
    bool result = VisualStateManager.GoToState(btn_reset, "Normal", false);
}

private void Button_Click(object sender, RoutedEventArgs e)
{
   //Here result is true
  bool result = VisualStateManager.GoToState(btn_reset, "Normal", false);
} 
```

知道我试图设置不同的状态有什么问题，`OnNavigatedTo`但它们都给了我相同的结果。

我想在`OnNavigatedTo`方法中或显示视图之前设置初始状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:38:41.327

我已经在 Loaded 事件中编写了这段代码并且它正在工作。

```
protected override void OnNavigatedTo(Windows.UI.Xaml.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    Loaded += ScreenLoaded;
}

private void ScreenLoaded(object sender, RoutedEventArgs e)
{
    btn_reset.IsEnabled = false;
    bool result = VisualStateManager.GoToState(btn_reset, "Normal", false);
} 
```

# ruby - Ruby比较字符串

> ID：13799105
> 
> 赞同：1
> 
> 时间：2012-12-10T10:30:43.973
> 
> 标签：ruby, string

我试图与之比较`message[0]`，`"CONNECT"`但它失败了：

```
puts message[0].dump 
->"\x00C\x00O\x00N\x00N\x00E\x00C\x00T\x00"
puts "CONNECT".dump
->"CONNECT" 
```

有人可以解释一下为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:24:52.567

您的字符串中似乎有很多 NULL 字符。最好弄清楚它们来自哪里，但是要删除它们，您可以使用它。

```
 def remove_null_chrs(str) 
     str.unpack('C*').select{|x|x != 0}.pack('C*')
 end 
```

例如

```
remove_null_chrs("\x00C\x00O\x00N\x00N\x00E\x00C\x00T\x00")
=> "CONNECT" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:49:31.113

message[0] 的编码不同

尝试这个`message[0].encode("UTF-8", :invalid=>:replace, :replace=>"?")`

如果它不起作用，您必须尝试不同的编码。我认为这个答案仅对 1.9.* 版本有效。对于旧版本，我认为您必须要求 iconv

# c# - C# datagridview 右键单击 选择编辑选项，数据应显示在文本框中

> ID：13799106
> 
> 赞同：1
> 
> 时间：2012-12-10T10:30:48.950
> 
> 标签：c#, datagridview, contextmenustrip

这是我`DataGrid`在 C# 中的代码。右键单击单元格，`ContextMenu`应显示编辑选项。但是，我无法执行右键单击操作。而且在点击编辑菜单后，我应该能够在文本框中显示数据。例如像NotesID 应该显示在textbox1 中。

```
/*this is for datagrid cell click code*/
private void dataGrid1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
     ContextMenuStrip mnu = new ContextMenuStrip();
     ToolStripMenuItem mnuedit = new ToolStripMenuItem("Edit");
     mnuedit.Click += new EventHandler(editToolStripMenuItem_Click);
     mnu.Items.AddRange(new ToolStripItem[] { mnuedit });
     dataGrid1.ContextMenuStrip = mnu;
}

private void editToolStripMenuItem_Click(object sender, EventArgs e)
{

    if (dataGrid1.SelectedRows.Count == 0)
    {
        textnotes.Text = Convert.ToString(dataGrid1.SelectedRows[0].Cells[0].Value);
        textclient.Text = Convert.ToString(dataGrid1.SelectedRows[0].Cells[1].Value);
        textdatetime.Value = Convert.ToDateTime(dataGrid1.SelectedRows[0].Cells[2].Value);
        textcombobox.Text = Convert.ToString(dataGrid1.SelectedRows[0].Cells[3].Value);
    }
}

private void EditClient_Click(object sender, EventArgs e) 
{
}

private void textBox2_TextChanged(object sender, EventArgs e)
{
}

private void SaveButton_Click(object sender, EventArgs e)
{
    Service edtservice = new Service();
                         edtservice.EditNotes(Convert.ToInt32(textNotesID.Text),textnotes.Text,textclient.Text,textdatetime.Text,textcombobox.Text);
    MessageBox.Show("Records Updated");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:41:25.560

尝试在鼠标事件上触发它

```
 private void dgvReport_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
 {

     If (e.Button = MouseButtons.Right){

         DataGridViewRow row = this.dgvReport.Rows[e.rowIndex];

     }

} 
```

# android - Android 数据库访问（简单而高效）

> ID：13799107
> 
> 赞同：0
> 
> 时间：2012-12-10T10:30:57.077
> 
> 标签：android

我目前正在使用 android API。目前我正在做一些 GUI 数据库绑定，我开始有点恼火。

我有一个简单`ListActivity`的列表项自定义布局。现在我想将底层绑定`ListView`到数据库中的一个表。每当我对数据库进行更改时，我都希望能够通知 ListView 刷新自身并更新 GUI。起初，问题看起来很简单：只需添加一个`SimpleCursorAdapter`，传递一个用于获取数据的游标，将列绑定到布局 id 和你的 down。每当您想要进行刷新时，只需调用`notifyDataSetChanged()`ListView 即可完成，对吗？不！

事实证明，这种方式将在 UI 线程中查询数据库，这显然是一件坏事，因为它会降低性能并可能导致“应用程序无响应”错误。

目前，看起来唯一的方法是使用 Loaders 和 ContentProviders。这可能是处理数据访问的最抽象和最简洁的方式，但它也添加了大量代码（尤其是在 ContentProvider 本身中，您必须为“解析”请求做很多丑陋的 if-else switch-case 处理）。

所以我的问题是：将数据库表连接到 ListView（或任何其他 UI 组件）的最新技术（并且向后兼容 API 级别 <11）方法是什么？我真的必须使用 ContentProvider 吗？

为什么这么复杂？即：扫描蓝牙设备可以用大约 20 行代码来实现，但是（从我的角度来看）更常见的事情，比如 data-ui-connection，你必须实现至少两个类，每个类 100+ loc。这太疯狂了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:46:01.980

> ...但它也添加了大量代码（尤其是在 ContentProvider 本身中，您必须为“解析”请求做很多丑陋的 if-else 切换案例处理）。

我不明白为什么会这样。`Loaders`实现in a `SimpleCursorAdapter`for a所需的代码`ContentProvider`是实例化 a `CursorLoader`in 并`onCreateLoader`交换接口`Cursor`的其他两个回调中返回的值`LoaderManager.LoaderCallbacks`。在提供程序中，您只需要`setNotificationUri`在`Cursor`.

> 我真的必须使用 ContentProvider 吗？

如果您想在`CursorLoader`修改数据库后从刷新数据中受益，是的。您始终可以自己处理问题并自己进行查询。

# git - Git：“通配符参考规范”在远程不匹配时，拉

> ID：13799108
> 
> 赞同：10
> 
> 时间：2012-12-10T10:30:58.037
> 
> 标签：git

我在 cloufforge 设置了一个新的 Git 存储库，但遇到了一些不寻常的问题。

```
When I do a git pull origin master

From https://dndigital.git.cloudforge.com/project
 * branch            master     -> FETCH_HEAD
Already up-to-date. 
```

但是，如果一位同事也这样做，他会一遍又一遍地收到相同的信息，而没有得到“已经是最新的”

```
remote: Counting objects: 85, done.
remote: Compressing objects: 100% (58/58), done.
remote: Total 76 (delta 59), reused 19 (delta 13)
Unpacking objects: 100% (76/76), done.
From https://dndigital.git.cloudforge.com/project
 * branch            master     -> FETCH_HEAD
There are no candidates for merging among the refs that you just fetched.
Generally this means that you provided a wildcard refspec which had no
matches on the remote end. 
```

请问为什么会这样？

**更新：**

我尝试了建议的答案，但看不到任何问题。但似乎问题在于我们使用不同的 git 客户端。拥有不同版本的 Git 客户端似乎会成为问题。那真的很复杂。有没有办法将 Git 的功能限制在某个 git 版本，让最早的 Git 客户端仍然可以工作？

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = https://username@dndigital.git.cloudforge.com/project.git
[branch "master"]
    remote = origin
    merge = refs/heads/master
[user]
    name = 
    email = 
[giggle]
    file-view-path = agile/includes/SiteConfig.php
[gui]
    wmstate = zoomed
    geometry = 787x379+512+242 248 420 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-15T07:57:15.673

嘿，我刚刚遇到了同样的问题，但这是由于目标文件夹空间不足引起的。如果没有其他方法，可能有助于检查。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T11:46:59.010

看看你同事的`.git/config`，好像git不知道远程分支`origin/master`需要合并到他的本地`master`分支中。

你应该有这样的配置

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = ...
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

请注意，在引擎盖下`git pull`执行 a `git fetch`，然后执行 a 。`git merge`您可以分步尝试，看看出了什么问题。

```
git checkout master
git fetch origin
git merge origin/master 
```

# c# - Windows Phone 8 (C#) -- 初始加载时长按按钮不响应

> ID：13799110
> 
> 赞同：1
> 
> 时间：2012-12-10T10:30:59.457
> 
> 标签：c#, button, click, windows-phone-8, long-press

我正在使用模拟器测试一个简单的 Windows Phone 8 应用程序。我发现在应用程序的初始加载时， Button 对象不会正确响应长按 - 如果该按钮是我单击的第一件事（假设我单击并按住），它只会触发 Click 事件就像我快速点击它一样绑定到按钮。但是，如果我点击屏幕中的其他位置，然后长按按钮，它的行为正确（即它被突出显示，但在我取消单击之前不会执行其 Click 事件）。

由于我没有 Windows 手机，我不确定这是模拟器特定的问题还是什么。但是，假设不是，我认为这是焦点问题，因为我可以单击屏幕上的其他位置，然后长按按钮并使其正常运行。

我的第一个想法是在应用程序最初加载时赋予按钮焦点。但是，我不太清楚如何做到这一点，因为当我尝试在 onNavigatedTo 事件或 Loaded 事件中使用 myButton.Focus() 时，按钮实际上并没有获得焦点（名称“Loaded”似乎是有点误导；当我在绑定到该事件的函数中放置断点时，我可以看到当前屏幕的背景尚未加载）。加载 UI 后，是否有另一个函数可以调用 myButton.Focus() ？如果没有办法最初分配按钮焦点，我就没有主意了。有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:34:56.297

因为 WP8 模拟器是一个单独的 Hyper-V 机器，所以当你第一次点击模拟器时，它会捕获鼠标。这可能会影响作为应用程序一部分的单击/点击（和相关事件）。

不要指望对此进行修复，只需注意这一点并学会在开始与模拟器交互之前单击模拟器中的某个中性位置。

# jquery - html5 音频，音频停止由站点更改

> ID：13799116
> 
> 赞同：1
> 
> 时间：2012-12-10T10:31:13.607
> 
> 标签：jquery, ajax, audio, content-management-system

我在网站 (html5) 中使用 html5 音频标签作为背景音乐，该网站使用名为 CMS Made Simple (Smarty, jQuery) 的 CMS 构建：

```
<div id="audio">

<div style="width:150px;height:15px;margin:0;padding:0;">
<div style="width:57px;float:left;">
<a href="javascript:;" id="play" onclick="document.getElementById('andytimm').play()" title="Play"><img src="images/audio_play.png" width="" height="" alt="Play"></a>
</div>
<div style="width:50px;float:left;">
<a href="javascript:;" id="pause" onclick="document.getElementById('andytimm').pause()" title="Pause"><img src="images/audio_pause.png" width="" height="" alt="Pause"></a>
</div>
<div style="width:36px;float:left;">
<a href="javascript:;" id="stop" onclick="document.getElementById('andytimm').pause(); document.getElementById('andytimm').currentTime = 0;" title="Stop"><img src="images/audio_stop.png" width="" height="" alt="Stop"></a>
</div>
<div style="clear:both;"></div>
</div>

  <audio id="andytimm">
    <source src="mysong.mp3">
    <source src="mysong.ogg">
  </audio>

<!--[if lt IE 9]>

  <object id="andytimmObj" type="audio/x-mpeg" data="mysong.mp3" autoplay="false" height="45">
    <param name="src" value="mysong.mp3">
    <param name="controller" value="false">
    <param name="autoplay" value="false">
    <param name="autostart" value="0">
  </object>

  <script>
    document.getElementById('play').onclick = function() { document.getElementById('andytimmObj').play() };
    document.getElementById('pause').onclick = function() { document.getElementById('andytimmObj').pause() };
    document.getElementById('stop').onclick = function() { document.getElementById('andytimmObj').stop() };
  </script>

<![endif]-->

</div> 
```

声音工作正常。

不好的是，当我更改站点时，音乐会停止，可能从“服务”更改为“联系人”或任何其他站点。即使更改了站点，音乐是否会继续播放？我不是程序员，因此我很难找到解决方案。

# javascript - 小胡子嵌套结构未闭合部分错误

> ID：13799122
> 
> 赞同：6
> 
> 时间：2012-12-10T10:31:46.050
> 
> 标签：javascript, mustache

我有这个非常简单的结构，它不能用 mustache 解析并总是返回：

**未闭合部分：已选择**

```
<ul id="source">
{{#recomms}}                                                                                                                                                                                                 
  <li>
    <select>
      {{#sizes}}
        <option {{#selected}}selected="selected"{{/selected}} >{{label}}</option>
      {{/sizes}}
    </select>
  </li>
{{/recomms}}
</ul> 
```

渲染javascript：

```
$("#placement").html(Mustache.render($('#source').html(), data)); 
```

如果我将 #{{selected}} 从选项标签中移出，它就会开始正常工作。

mustache 是否支持这些嵌套在 html 元素中的 #{{ 标签？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T10:53:46.997

小胡子应该像这样工作，你做对了。

它是一个简单的文本解析器，因此不关心 HTML 结构/标签/等。

您为 Mustache 使用哪个环境/解析器版本？因为这似乎在官方演示中有效。

[我在Mustache 演示站点](http://mustache.github.com/#demo)中输入了以下内容，它按预期工作：

**小胡子模板**

```
<ul id="source">
{{#recomms}}                                                                                                                                                                                                 
  <li class="">
    <select name="size" class="recommendation-size">
      {{#sizes}}
        <option value="{{val}}" {{#selected}}selected="selected"{{/selected}} >{{label}}</option>
      {{/sizes}}
    </select>
  </li>
{{/recomms}}
</ul> 
```

**示例 JSON**

```
{"recomms": [
    {"sizes": [
        { "val": "value", "label": "label", "selected": false },
        { "val": "value2", "label": "label2", "selected": true }
    ]}
]} 
```

**输出**

```
<ul id="source">
<li class="">
<select name="size" class="recommendation-size">
<option value="value" >label</option>
<option value="value2" selected="selected">label2</option>
</select>
</li>
</ul> 
```

如果您可以链接到显示您遇到的错误的[Fiddle](http://jsfiddle.net)，它将有助于弄清楚发生了什么，但这应该可以。

**编辑**

我可能已经发现了问题。您正在使用 jQuery 从现有 HTML 元素加载 HTML，这意味着浏览器已经尝试渲染 HTML 并丢弃了无效位，包括该`{{/selected}}`位。

尝试使用不同的技术将 Mustache 模板加载到您的 Javascript 代码中，例如...

*   将模板放在 Javascript 变量中，而不是页面的 HTML 源代码中
*   [使用jQuery.get()](http://api.jquery.com/jQuery.get/)从服务器加载模板
*   转义模板中的`<`and`>`并将其放在 hidden`textarea`中，然后使用 jQuery 的`.val()`方法获取模板并在渲染之前取消 and 的`<`转义`>`

正如您在评论中指出的那样，第一个选项效果很好！

# ruby-on-rails-3.2 - Rails 关联中的 :include 和 :through 选项有什么区别？

> ID：13799124
> 
> 赞同：-1
> 
> 时间：2012-12-10T10:31:51.097
> 
> 标签：ruby-on-rails-3.2, model-associations

我不明白在哪种情况下我应该使用 :include 选项而不是 :through 选项？

例如，我可以这样编写模型：

```
Class Customer < ActiveRecord::Base
  has_many :orders, :include => :line_items
end

class Order < Active Record::Base
  belongs_to :customer
  has_many :line_items
end

class LineItem < ActiveRecord::Base
  belongs_to :order
end 
```

或者我可以这样写：

```
Class Customer < ActiveRecord::Base
  has_many :orders
  has_many  :lineitems, :through => :orders
end

class Order < Active Record::Base
  belongs_to :customer
  has_many :line_items
end

class LineItem < ActiveRecord::Base
  belongs_to :order
end 
```

感谢澄清什么练习匹配哪个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:27:00.660

[好的，在彻底阅读了协会的 api 文档](http://api.rubyonrails.org/clases/ActiveRecord/Associations/ClassMethods.html)后，我设法理解了区别。特别是以下部分：**关联加入模型**和**关联的渴望加载**

事实上，它们与两个完全不同的概念有关：

**:through**选项允许您在代码中构建**快捷方式**。在我上面的（问题）示例中，我可以使用以下指令读取 LineItem 集合：

```
@customer.lineitems 
```

代替

```
@customer.orders.lineitems 
```

**需要注意**的是，这样的属性是**只读的！**.

========

**:include**选项允许您在访问不同的属性/方法时**减少在数据库中生成的查询数量。**

使用 :include 在我的关联中，以下代码会在我的数据库中生成**一个**查询：

```
@customer.orders.lineitems 
```

没有 :include ，它会在我的数据库中生成**两个**查询

* * *

## 评论

正如[这里](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)所解释的，当模型不使用这样的选项时，也可以直接在查询中使用 :include 选项

在我上面的模型定义中，假设每个订单有 10 个订单项，每个客户有 10 个订单和 10 个客户，以下代码将生成**101 个查询** ，而不使用关联模型中的 :include** 选项：1 代表 .all，每个客户 1 个订单，以及每个订单 1 个订单 *项（= 1 + (10 个客户订单 x 10 个订单订单项）*。

```
Customer.all.each do |customer|

  customer.orders.each do |order|
    puts "order number : " + order.number

    order.lineitems.each do |lineitem|
      puts "Item code : " + lineitem.code
    end
  end
end 
```

此代码将生成**12 个** 包含直接使用的查询：1 个用于 .first 和 1 个用于收集 order_id 和引用的订单，以及 1 个 .lineitems 用于 10 个订单中的每一个**：**

```
Customer.includes(:orders).each do |customer|

  customer.orders.each do |order|
    puts "order number : " + order.number

    order.lineitems.each do |lineitem|
      puts "Item code : " + lineitem.code
    end
  end
end 
```

*订单集合将与客户集合同时检索（使用 LEFT OUTER JOIN sql 查询）。*

# cordova - 在没有 Xcode 的情况下使用 Sencha Touch 和 Phonegap

> ID：13799131
> 
> 赞同：0
> 
> 时间：2012-12-10T10:32:12.867
> 
> 标签：cordova, extjs, sencha-touch

我一直在使用 Sencha Touch 2 开发应用程序。我想录制声音，所以我搜索了如何使用 HTML5 实现这一点，但我发现这是不可能的（在移动设备上）。

我决定使用Phonegap。但我发现的所有 Phonegap+sencha 触摸集成示例始终是 ios 或 android 特定的。有没有办法像我用 sencha（可能还有 phonegap）那样用 javascript 编写代码，然后部署适合 ios 或 android 的包？

如果只是为了测试目的，我可以用 ios 的网络浏览器测试它们，看看我是否能够录制音频，我是对的还是我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T00:51:50.743

您可以使用PhoneGap 来实现这一点，是的。PhoneGap/Cordova 包含用于录制音频之类的 API，您可以通过 JavaScript 访问这些 API：http: [//docs.phonegap.com/en/3.3.0/cordova_media_media.md.html#Media](http://docs.phonegap.com/en/3.3.0/cordova_media_media.md.html#Media)

构建应用程序的最简单方法（无需设置本地 XCODE 或 Eclipse/Android SDK 环境）是使用 Adob​​e 的云构建平台[http://build.phonegap.com/](http://build.phonegap.com/)

但是，您不能仅通过浏览器运行它（好吧，可能有解决方法，但不应该），因为您需要访问设备功能并需要使用这些权限（RECORD_AUDIO 等）。不过，PhoneGap Build 可以很容易地在您的设备上进行试用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:16:10.337

您尝试实现的功能取决于设备，而 sencha 只是 javascript。Phonegap 提供了将设备相关功能添加到混合应用程序的选项。所以，有必要。否则您需要找到从 javascript 调用 iOS api 的方法。

# delphi - 如何使新的（动态）选项卡成为活动页面

> ID：13799140
> 
> 赞同：2
> 
> 时间：2012-12-10T10:32:34.407
> 
> 标签：delphi, lazarus

我标记了 Lazarus 和 Delphi，因为到目前为止我所做的一切似乎都是相似的 (100%)。但我的开发平台是 Lazarus。

我正在动态创建一个标签表，如下所示：

```
procedure TForm1.cmdTabButtonClick(Sender: TObject);
var
  NewTab: TTabSheet;
begin
  NewTab := TTabSheet.Create(PageControl1);
  NewTab.PageControl:= PageControl1;
  NewTab.Caption:='hi';
//  NewTab.TabVisible:=true;
//  newtab.SetFocus;
end; 
```

过程中的最后两行被注释。没有它们，代码可以工作，但新选项卡不是最上面的选项卡。我必须单击它才能使其位于顶部。

但是如果我取消注释这两行，程序就会崩溃，说明一个不可见的对象不能有焦点。

关于如何解决这个问题的任何建议？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:41:04.580

您需要设置`ActivePage`页面控件的属性。像这样：

```
PageControl.ActivePage := NewTab; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T10:41:16.930

PageControl 具有属性`ActivePage`和`ActivePageIndex`，您可以使用它们。`ActivePage`在这种情况下是最方便的，因为你可以打电话

```
PageControl1.ActivePage := NewTab; 
```

# wcf - WCF 如何在 Metro 应用程序中增加缓冲区大小（客户端）

> ID：13799146
> 
> 赞同：1
> 
> 时间：2012-12-10T10:33:02.663
> 
> 标签：wcf, windows-8, wcf-binding

我得到这个错误：

接收对 http://localhost:4936/UserService.svc 的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

内部异常：无法从传输连接读取数据：现有连接被远程主机强行关闭

这是我的 Web.config（服务层）：

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DellenyEntities" connectionString="metadata=res://*/DellenyModel.csdl|res://*/DellenyModel.ssdl|res://*/DellenyModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.;initial catalog=Delleny;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <add name="DellenyModelContainer" connectionString="metadata=res://*/DellenyModel.csdl|res://*/DellenyModel.ssdl|res://*/DellenyModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.;initial catalog=Delleny;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicBinding"
                 maxBufferPoolSize="1500000"
                 maxReceivedMessageSize="1500000"
                 maxBufferSize="1500000">
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>

        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="Delleny.Services.UserService">
        <endpoint binding="basicHttpBinding" bindingConfiguration="BasicBinding"
                  contract="Delleny.Model.IUserService" />
      </service>
      <service name="Delleny.Services.BCService">
        <endpoint binding="basicHttpBinding" bindingConfiguration="BasicBinding"
                  contract="Delleny.Model.IBCService" />
      </service>
    </services>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:41:36.857

只需将您的绑定元素替换为如下所示的内容：

```
<binding name="BasicBinding" maxReceivedMessageSize="2000000" maxBufferSize="2000000" transferMode="Streamed">
     <readerQuotas maxDepth="2000000" maxStringContentLength="2000000" maxArrayLength="2000000" maxBytesPerRead="2000000" maxNameTableCharCount="2000000" />
</binding> 
```

# ios - JPEG 保存到 ios 照片库后 DCT 系数发生变化

> ID：13799147
> 
> 赞同：1
> 
> 时间：2012-12-10T10:33:05.640
> 
> 标签：ios, jpeg, libjpeg, dct

将 JPEG 图像保存到 iOS 照片库时有一个奇怪的变化。我不知道我是否做错了什么。我正在使用 libjpeg-turbo 访问 JPEG 图像，然后修改图像的 DCT 系数。修改后的图像（仅在 DCT 中，没有别的）保存在照片库中。但是打开保存的图像后，DCT系数与我在上一步中更改的不同。

详细地，让我解释一下我是如何为每个 DCT 添加 +1 的。我正在使用 libjpeg 库的“example.c”中的标准程序：

```
struct jpeg_decompress_struct cinfo;
struct my_error_mgr jerr;
FILE * infile;

if ((infile = fopen(filename, "rb")) == NULL) {
    fprintf(stderr, "can't open %s\n", filename);
    return 0;
}

cinfo.err = jpeg_std_error(&jerr.pub);
jerr.pub.error_exit = my_error_exit;

if (setjmp(jerr.setjmp_buffer)) {
    jpeg_destroy_decompress(&cinfo);
    fclose(infile);
    return 0;
}

jpeg_create_decompress(&cinfo);

jpeg_stdio_src(&cinfo, infile);

(void) jpeg_read_header(&cinfo, TRUE);

jvirt_barray_ptr* coeffs_array;
coeffs_array = jpeg_read_coefficients(&cinfo);

BOOL done = FALSE;
for (int ci = 0; ci < 3; ci++)
{
    JBLOCKARRAY buffer_one;
    JCOEFPTR blockptr_one;
    jpeg_component_info* compptr_one;
    compptr_one = cinfo.comp_info + ci;

    for (int by = 0; by < compptr_one->height_in_blocks; by++)
    {
        buffer_one = (cinfo.mem->access_virt_barray)((j_common_ptr)&cinfo, coeffs_array[ci], by, (JDIMENSION)1, FALSE);

        for (int bx = 0; bx < compptr_one->width_in_blocks; bx++)
        {
            blockptr_one = buffer_one[0][bx];

            for (int bi = 0; bi < 64; bi++)
            {
                blockptr_one[bi]++;
            }                  
        }   
    } 
}

write_jpeg(output, &cinfo, coeffs_array); // saving modified JPEG to the output file

jpeg_destroy_decompress(&cinfo);
fclose(infile); 
```

在此之后，我在文件中保存了一个新的 JPEG 图像，可以说“new.jpg”。现在我想将这个“new.jpg”保存到照片库中，所以我通过以下方式加载图像：

```
imageToSave = [UIImage imageWithContentsOfFile:outputFile]; 
```

我还检查了 DCT 系数是否保持变化。在我检查了修改后的 DCT 之后，我将保存它：

```
UIImageWriteToSavedPhotosAlbum(imageToSave, nil, nil, nil); 
```

图像“new.jpg”现在保存在照片库中。

到目前为止，一切都很好，DCT 系数的工作方式与 libjpeg 库一样。当我再次加载保存的图像并查看 DCT 系数时，就会发生变化。我发现 DCT 发生了变化，我不知道为什么。当您要保存 JPEG 图像时，iOS 是否使用了任何优化算法？为什么要更改 DCT。

我正在使用以下过程来读取保存的图像：

```
NSData *jpegData = UIImageJPEGRepresentation([info objectForKey:UIImagePickerControllerOriginalImage], 1);
[jpegData writeToFile:file atomically:YES]; // saved image is saved in file and I can use the procedure from above to check DCTs 
```

此外，这是原始 DCT 的示例，通过向所有添加 +1 修改的 DCT，以及在将其保存到照片库后为一个 8x8 块加载的 DCT：

```
Original DCTs:
-759 -24 -8 1 -1 0 0 1 
56 -27 -10 1 0 1 0 0 
8 0 0 0 0 -1 0 0 
0 0 0 -1 0 -1 0 -1 
0 0 0 1 0 0 0 0 
0 0 0 1 0 0 0 0 
0 0 0 0 0 0 0 0 
0 0 0 -1 0 0 0 0 

Modified DCTs by libjpeg:
-758 -23 -7 2 0 1 1 2 
57 -26 -9 2 1 2 1 1 
9 1 1 1 1 0 1 1 
1 1 1 0 1 0 1 0 
1 1 1 2 1 1 1 1 
1 1 1 2 1 1 1 1 
1 1 1 1 1 1 1 1 
1 1 1 0 1 1 1 1 

DCTs after saving JPEG to photo library:
-758 -22 -7 2 0 0 0 0 
58 -26 -8 3 0 0 0 0 
8 2 0 0 -1 1 0 0 
2 3 0 0 0 0 0 0 
2 1 -1 0 0 0 0 0 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 -1 
```

任何帮助，将不胜感激。我真的不知道为什么在将图像保存到照片库后会更改 DCT。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:41:42.140

当您使用 UIImage 及其方法时，iOS 将始终重新压缩您的 JPEG，从而改变 DCT。相反，使用 AssetsLibrary 将用户的图片存储和检索为 NSData。此行为未记录在案，但它有效。

我还建议将 .jpeg 存储在临时文件夹中，然后将其提供给 libjpeg-turbo。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-04T15:30:31.613

您应该明确地简化您的代码，以查看不需要的行为发生在哪里。您正在执行至少五个可能出错的不同步骤。

现在，也就是说，不在 iOS 上工作但知道 JPEG 编解码器，请注意用于保存*file.jpg的***质量**。我不确定您的特定库的默认值是什么，但如果不是 100%，它肯定会影响您的 DCT 系数。

 *尝试使用无损编解码器（例如 PNG 或 BMP）保存修改后的图像。*

# xml - XSLT - 重命名节点和删除空格等等

> ID：13799148
> 
> 赞同：2
> 
> 时间：2012-12-10T10:33:06.607
> 
> 标签：xml, xslt

这是一个非常复杂的问题，超出了我对 XSLT 的了解——我仍在学习，无论我读了多少 O'Reilly 的 XSLT 书，我都在我的头脑中。

我有一个多方面的问题，我已经为它生成了一个输入 XML 文件，之后我也会尝试解释这些要求。

**输入**

```
<roottag>
<body>
    <header>
        <r>
            <c>
                <d>Header Tag</d><!-- This can include spaces-->
                <e>System generated trash</e>
            </c>
        </r>
        <r>
            <c>
                <d>Sub Header Tag A</d>
                <e>System generated trash</e>
            </c>
            <c>
                <d>Sub Header Value A</d>
                <e>System generated trash</e>
            </c>
        </r>
        <r>
            <c>
                <d>Sub Header Tag B</d>
                <e>System generated trash</e>
            </c>
            <c>
                <d>Sub Header Value B</d>
                <e>System generated trash</e>
            </c>
        </r>
        <r>
            <c>
                <d>Sub Header Tag C</d>
                <e>System generated trash</e>
            </c>
            <c>
                <d>Sub Header Value C</d>
                <e>System generated trash</e>
            </c>
        </r>
    </header>
    <information>
        <r>Body of document</r>
        <r>Appears here but have an XSLT that deals with this</r>
    </informtaion>
    <footer>
        <r>
            <c>
                <d>Footer Tag</d><!-- This can include spaces-->
                <e>System generated trash</e>
            </c>
        </r>
        <r>
            <c>
                <d>Sub Footer Tag A</d>
                <e>System generated trash</e>
            </c>
            <c>
                <d>Sub Footer Value A</d>
                <e>System generated trash</e>
            </c>
        </r>
        <r>
            <c>
                <d>Sub Footer Tag B</d>
                <e>System generated trash</e>
            </c>
            <c>
                <d>Sub Footer Value B</d>
                <e>System generated trash</e>
            </c>
        </r>
        <r>
            <c>
                <d>Sub Footer Tag C</d>
                <e>System generated trash</e>
            </c>
            <c>
                <d>Sub Footer Value C</d>
                <e>System generated trash</e>
            </c>
        </r>
    </footer>
</body>
</roottag> 
```

**输出**

```
<?xml version="1.0" encoding="utf-8"?>
<roottag>
  <body>
    <header>
      <HeaderTag>
        <!-- without spaces -->
        <HeaderName>Header Tag</HeaderName>
        <!-- This needs to preserve spaces-->
      </HeaderTag>
      <SubHeaderTagA>
        <!-- without spaces -->
        <HeaderName>Sub Header Tag A</HeaderName>
        <!-- This needs to preserve spaces-->
        <HeaderValue>Sub Header Value A</HeaderValue>
      </SubHeaderTagA>
      <SubHeaderTagB>
        <HeaderName>Sub Header Tag B</HeaderName>
        <HeaderValue>Sub Header Value B</HeaderValue>
      </SubHeaderTagB>
      <SubHeaderTagC>
        <HeaderName>Sub Header Tag C</HeaderName>
        <HeaderValue>Sub Header Value C</HeaderValue>
      </SubHeaderTagC>
    </header>
    <information>
      <r>Body of document</r>
      <r>Appears here but have an XSLT that deals with this</r>
      </information>
      <footer>
        <FooterTag>
          <FooterName>Footer Tag</FooterName>
        </FooterTag>
        <SubFooterTagA>
          <FooterName>Sub Footer Tag A</FooterName>
          <FooterValue>Sub Footer Value A</FooterValue>
        </SubFooterTagA>
        <SubFooterTagB>
          <FooterName>Sub Footer Tag B</FooterName>
          <FooterValue>Sub Footer Value B</FooterValue>
        </SubFooterTagB>
        <SubFooterTagC>
          <FooterName>Sub Footer Tag C</FooterName>
          <FooterValue>Sub Footer Value C</FooterValue>
        </SubFooterTagC>
      </footer>
    </body>
</roottag> 
```

所以解释一下我看到的问题，以及我遇到的问题。

1.  *RemovingSpaces：* roottag/body/header/r/c/d 中保存的值可以并且通常包含空格，所以我需要一种方法来删除我从网站 [addLink] 上的问题中找到的这个值，但这也替换了值因此，当我稍后在该过程中使用数据时，它没有输出所需的空格。
2.  *仅用第一个值替换 R：* 我不知道如何做到这一点，我尝试和研究的所有内容似乎都使用第二个值作为值。我已经结束了。
3.  *页眉或页脚名称/值：* 同样，我的知识有限，如果这是可能的，或者每个标签都需要单独匹配？

4.  *页眉和页脚标签的移动：* 我没有将其包含在所需的输出中，但我认为我可能需要这样做 - 是否可以将页眉标签和页脚标签移到正文标签之外？所以 XML 将是：roottag-header-body-information-/body-footer/-/rt

如果您需要更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:34:01.193

从源中的元素内容派生元素名称通常不是一个好主意 - 尽管您可以删除空格，但总是有可能出现其他特殊字符，即使您确实将它们全部删除，您最终也可能会出现意外重复。`1 Tag`例如，包含和的两个元素`2 Tag`都需要被剥离为`Tag`.

但是，这样的事情应该可以完成：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:variable name="allowed">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvxyz_</xsl:variable>

  <xsl:template match="r[c/d]">
    <xsl:variable name="elemName" select="translate(c/d,translate(c/d,$allowed,''),'')" />
    <xsl:element name="{$elemName}">
      <xsl:apply-templates />
    </xsl:element>
  </xsl:template>

  <xsl:template match="c">
    <xsl:apply-templates select="@* | node()"/>
  </xsl:template>

  <xsl:template match="c[1]/d">
    <HeaderName>
      <xsl:apply-templates />
    </HeaderName>
  </xsl:template>

  <xsl:template match="c[2]/d">
    <HeaderValue>
      <xsl:apply-templates />
    </HeaderValue>
  </xsl:template>

  <xsl:template match="e" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

这使用“双重翻译”方法从字符串中去除所有不需要的字符。该`translate`函数可用于从列表中删除所有字符，方法是指定一个空字符串来将这些字符转换为。您可以使用它从字符串中删除所有 VALID 字符，留下仅包含 INVALID 字符的字符串。然后，您再次使用 translate 从原始字符串中删除所有这些 INVALID 字符。

如果您确实需要正文之外的页眉/页脚，请添加以下模板：

```
<xsl:template match="roottag">
  <xsl:copy>
    <xsl:apply-templates select="body/header" />
    <xsl:apply-templates select="body" />
    <xsl:apply-templates select="body/footer" />
  </xsl:copy>
</xsl:template>

<xsl:template match="body">
  <xsl:copy>
    <xsl:apply-templates select="information" />
  </xsl:copy>
</xsl:template> 
```

要忽略包含等号的`r`节点，请将此模板添加到匹配“ ”的下方：`c\d``r[c/d]`

```
<xsl:template match="r[contains(c/d,'=')]" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:18:10.720

那么有多个问题！这么多答案..我会尽量系统地写，希望你能理解！并随时提出问题！

**1.第一步是去掉标签之间额外的不需要的空格。为了实现这一点，在 XML 声明下面有以下两个语句作为标题：** 

```
 <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/> 
```

**2.下一步是定义身份模板！它的工作是按原样从输入输出（命令不输出的除外）**

```
 <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template> 
```

**3.在你的输出中你不想看到`<r>`元素！所以我们将有以下几行**

```
 <xsl:template match="/roottag/body/header/r
                      |/roottag/body/footer/r">
    <xsl:apply-templates select="@*|node()"/>
  </xsl:template> 
```

*这不会复制`<r>`元素，而是让子元素接管！我将在下面写..*

**4.您只想复制`<c>`每个元素中的第一个标签`<r>`..并忽略输出中的其余`<c>`节点..所以在模板覆盖下面定义..**

```
 <xsl:template match="/roottag/body/header/r/c
                      |/roottag/body/footer/r/c"/> 
```

这实际上会`<c>`从输出中删除所有元素！但下面的覆盖将`<c>`只处理第一个元素！

**5.此代码用于`<Header>`在输出中构建元素！**

```
 <xsl:template match="/roottag/body/header/r/c[1]">
    <xsl:variable name="ElementName">
      <xsl:call-template name="RemoveSpaceFromValueD">
        <xsl:with-param name="text" select="d/."/>
        <xsl:with-param name="replace" select="' '"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:element name="{$ElementName}">
      <xsl:element name="HeaderName">
        <xsl:value-of select="d/."/>
      </xsl:element>
      <xsl:if test="ancestor::r != ancestor::header/r[1]">
      <xsl:element name="HeaderValue">
        <xsl:value-of select="e/."/>
      </xsl:element>
      </xsl:if>
    </xsl:element>
  </xsl:template> 
```

通过使用此代码，您不必为不同的模板声明不同的模板`<header>, <footer> and <subHeaderTag>s`

我在这里做的是：

1.  调用一个新模板`RemoveSpaceFromValueD`，该模板将从元素中复制文本，从`d`文本中删除空格并将其分配给变量`ElementName`。
2.  使用来自变量的值`ElementName`将用于创建一个新元素！所以`Sub Header Tag C`将有`<SubHeaderTagC>`作为父母:)
3.  将值复制`<d>`到`<HeaderName>`!
4.  `<d>`从下一个复制下一个`<c>`到`<HeaderValue>`！

**6\. 也重复相同的代码`<Footer>`。**

```
 <xsl:template match="/roottag/body/footer/r/c[1]">
    <xsl:variable name="ElementName">
      <xsl:call-template name="RemoveSpaceFromValueD">
        <xsl:with-param name="text" select="d/."/>
        <xsl:with-param name="replace" select="' '"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:element name="{$ElementName}">
      <xsl:element name="FooterName">
        <xsl:value-of select="d/."/>
      </xsl:element>
      <xsl:if test="ancestor::r != ancestor::footer/r[1]">
        <xsl:element name="FooterValue">
          <xsl:value-of select="e/."/>
        </xsl:element>
      </xsl:if>
    </xsl:element>

  </xsl:template> 
```

**7.和模板`RemoveSpaceFromValueD`：**

```
 <xsl:template name="RemoveSpaceFromValueD">
    <xsl:param name="text"/>
    <xsl:param name="replace"/>
    <xsl:choose>
      <xsl:when test="contains($text,$replace)">
        <xsl:value-of select="substring-before($text,$replace)"/>
        <xsl:call-template name="RemoveSpaceFromValueD">
          <xsl:with-param name="text" select="substring-after($text,$replace)"/>
          <xsl:with-param name="replace" select="$replace"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template> 
```

**8.整个 XSLT 代码如下所示：**

测试这个！如果您有任何问题或理解困难，请告诉我。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/roottag/body/header/r
                      |/roottag/body/footer/r">
    <xsl:apply-templates select="@*|node()"/>
  </xsl:template>

  <xsl:template match="/roottag/body/header/r/c
                      |/roottag/body/footer/r/c"/>

  <xsl:template match="/roottag/body/header/r/c[1]">
    <xsl:variable name="ElementName">
      <xsl:call-template name="RemoveSpaceFromValueD">
        <xsl:with-param name="text" select="d/."/>
        <xsl:with-param name="replace" select="' '"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:element name="{$ElementName}">
      <xsl:element name="HeaderName">
        <xsl:value-of select="d/."/>
      </xsl:element>
      <xsl:if test="ancestor::r != ancestor::header/r[1]">
        <xsl:for-each select="../c[2]">
          <xsl:element name="HeaderValue">
            <xsl:value-of select="d/."/>
          </xsl:element>
        </xsl:for-each>
      </xsl:if>
    </xsl:element>

  </xsl:template>

  <xsl:template match="/roottag/body/footer/r/c[1]">
    <xsl:variable name="ElementName">
      <xsl:call-template name="RemoveSpaceFromValueD">
        <xsl:with-param name="text" select="d/."/>
        <xsl:with-param name="replace" select="' '"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:element name="{$ElementName}">
      <xsl:element name="FooterName">
        <xsl:value-of select="d/."/>
      </xsl:element>
      <xsl:for-each select="../c[2]">
        <xsl:element name="FooterValue">
          <xsl:value-of select="d/."/>
        </xsl:element>
      </xsl:for-each>
    </xsl:element>

  </xsl:template>

  <xsl:template name="RemoveSpaceFromValueD">
    <xsl:param name="text"/>
    <xsl:param name="replace"/>
    <xsl:choose>
      <xsl:when test="contains($text,$replace)">
        <xsl:value-of select="substring-before($text,$replace)"/>
        <xsl:call-template name="RemoveSpaceFromValueD">
          <xsl:with-param name="text" select="substring-after($text,$replace)"/>
          <xsl:with-param name="replace" select="$replace"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

# prestashop - Prestashop 模块多语言形式

> ID：13799150
> 
> 赞同：1
> 
> 时间：2012-12-10T10:33:12.907
> 
> 标签：prestashop

我正在为 prestashop 1.5 开发，但找不到任何关于如何开发多语言表单的示例（甚至没有 prestashop 1.4 的旧文档）。我怎样才能实现这样的目标![在此处输入图像描述](../Images/dbf524d15ccb51b41ba2f5b2a514d2df.png)

互联网上根本没有任何文档，目前对代码进行逆向工程太难了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-15T11:30:32.337

```
Try adding **'lang' => 'true'** in your renderForm() function in your controller like the following code

     array(
    'type' => 'textarea',
    'label' => $this->l('Text'),
    'name' => 'text',
    'lang' => true
    ),

In your class in $definition array add this line : 

     'text' =>  array('type' => self::TYPE_HTML, 'lang' => true,'validate' => 'isCleanHtml'),

Finally, add the field in **lang table** of your module or existing table 
```

# asp.net - 扩展 GridView 时，页脚 div 不会保持向下

> ID：13799151
> 
> 赞同：0
> 
> 时间：2012-12-10T10:33:17.260
> 
> 标签：asp.net, css, master-pages, footer

我有这个页面，其中有一个页脚，该页面还显示一个 Gridview，Gridview 的内容取决于用户选择的内容，Gridview 可能有从无到 168 行，以及介于两者之间的所有内容。

母版页是这样的：

```
<html>
 <body>
  STUFF
  <div id="footer">
    <p>This is the footer</p>
  </div>
 </body>
</html> 
```

CSS是这样的：

```
#footer {
 width: 100%;
 height: 60px;
 margin: 0 auto;
 padding: 0;
 background: #E1E1E1;
 position:absolute;
 bottom:0;
} 
```

现在，我尝试了位置：固定，但这不是我想要的，这样页脚显示在页面内容上，我希望它位于底部。如果我将它设置为相对，它将设置为母版页的内容占位符的 bettom，但您仍然可以在 Gridviews 后面看到它，如果我将其设置为绝对，它会转到底部，但它仅在Gridview 有一定的小行数，如果它必须显示很多行，页脚也会出现在 gridviews 的后面。

这真让我抓狂。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:39:06.250

试试这个： [粘页脚](http://ryanfait.com/sticky-footer/)

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
}

/*

Sticky Footer by Ryan Fait
http://ryanfait.com/

*/ 
```

# javascript - 在网站上搜索文本

> ID：13799154
> 
> 赞同：6
> 
> 时间：2012-12-10T10:33:24.900
> 
> 标签：javascript, html, web-applications

尊敬的会员，

我在一个模板的帮助下用纯 HTML 设计网站。

在那我有一个文本框[搜索] 和 Go 按钮。

我想做这样的操作，当任何人输入某些文本并按下“Go”按钮时，它应该突出显示该网站中与该文本匹配的文本。

我怎样才能做到这一点？

比你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T10:40:10.367

```
$(document).ready(function(){
        $('#searchItem').keyup(function(){
            var name = $(this).val();
            var pattern = name.toLowerCase(); 
            var targetId = ""; 
            var divs = document.getElementsByClassName("item"); 

            $(document).find('.item').hide();

            $('.item').each(function(i){
                var para = divs[i].getElementsByTagName("p"); 
                var index = para[0].innerText.toLowerCase().indexOf(pattern); 
                if (index != -1) { 
                    $(this).show();
                }
            });
        }); 
    }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T10:44:28.320

你没有发布你拥有的东西。我想这就是你所说的。

检查这个。我可以为你做到这一点，但你必须在你的想法中做到这一点

```
function highlightInElement(elementId, text){
var elementHtml = document.getElementById(elementId).innerHTML;
var tags = [];
var tagLocations= [];
var htmlTagRegEx = /<{1}\/{0,1}\w+>{1}/;

//Strip the tags from the elementHtml and keep track of them
var htmlTag;
while(htmlTag = elementHtml.match(htmlTagRegEx)){
    tagLocations[tagLocations.length] = elementHtml.search(htmlTagRegEx);
    tags[tags.length] = htmlTag;
    elementHtml = elementHtml.replace(htmlTag, '');
}

//Search for the text in the stripped html
var textLocation = elementHtml.search(text);
if(textLocation){
    //Add the highlight
    var highlightHTMLStart = '<span class="highlight">';
    var highlightHTMLEnd = '</span>';
    elementHtml = elementHtml.replace(text, highlightHTMLStart + text + highlightHTMLEnd);

    //plug back in the HTML tags
    var textEndLocation = textLocation + text.length;
    for(i=tagLocations.length-1; i>=0; i--){
        var location = tagLocations[i];
        if(location > textEndLocation){
            location += highlightHTMLStart.length + highlightHTMLEnd.length;
        } else if(location > textLocation){
            location += highlightHTMLStart.length;
        }
        elementHtml = elementHtml.substring(0,location) + tags[i] + elementHtml.substring(location);
    }
}

//Update the html of the element
document.getElementById(elementId).innerHTML = elementHtml;
}

highlightInElement("fatDoggie","The dog is really really fat"); 
```

这个小提琴是为了突出显示一组文本，而不是你应该在搜索中获取变量并将其放在`highlightInElement("Element","Var");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:40:45.463

你的意思是你有一个单页的网站？在这种情况下，整个内容已经加载到页面上，您只想搜索它。您可以使用 Javascript 和 JQuery 轻松完成。只需单击按钮，然后遍历 DOM 以查找您的字符串，然后对其执行操作（例如，滚动到那里，或突出显示它）。

如果您有多个页面，那么这将更具挑战性，因为您没有所有内容都可以在客户端使用。在这种情况下，服务器端搜索解决方案会更好。

# django - 如何使用 django-extra-views 将请求传递到内联表单集中

> ID：13799156
> 
> 赞同：2
> 
> 时间：2012-12-10T10:33:27.783
> 
> 标签：django, django-class-based-views

我有一个带有内联表单集的表单。我想做的是当用户登陆表单时，将他的用户信息（例如姓名）预填充到表单的内联之一中。为了能够将请求传递给内联。

**我怎样才能做到这一点？**

我在 Django 1.4 上使用[django-extra-views 0.6](https://github.com/AndrewIngram/django-extra-views)

在`views.py`我使用`get_extra_form_kwargs`def 来设置我的 kwargs 时，如下所示：

```
class EventMemberInline(InlineFormSet):
    model = EventMember
    extra = 1
    form_class = EventMemberForm

    def get_formset_kwargs(self):
        formset_kwargs = super(EventMemberInline, self).get_formset_kwargs()
        formset_kwargs.update({'first_name':self.request.user.first_name, 'last_name':self.request.user.last_name})
        return formset_kwargs 
```

我这样做是为了能够将我的内联字段（初始值）绑定到我通过 kwargs 传递的内容（在这种情况下只是用户名和姓氏）

在`forms.py`

```
class EventMemberForm(ModelForm):

    class Meta:
        model = EventMember

    def __init__(self, *args, **kwargs):
        self.fields['first_name'].initial = kwargs['first_name']
        self.fields['last_name'].initial = kwargs['last_name']
        super(EventMemberForm, self).__init__(*args, **kwargs) 
```

但我得到这个错误：

```
Exception Value:    

__init__() got an unexpected keyword argument 'last_name' 
```

我想要做的甚至可能吗？我可以设置内联的初始值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:13:42.773

这`django-extra-views==0.6.0`意味着`get_extra_form_kwargs`没有调用内联的问题，它应该在 0.6.1 中修复。

这应该有效：

```
class EventMemberInline(InlineFormSet):
    model = EventMember
    extra = 1
    form_class = EventMemberForm

    def get_extra_form_kwargs(self):
        kwargs = super(EventMemberInline, self).get_extra_form_kwargs()
        kwargs.update({
            'first_name': self.request.user.first_name,
            'last_name': self.request.user.last_name
        })
        return kwargs

...

class EventMemberForm(ModelForm):

    class Meta:
        model = EventMember

    def __init__(self, *args, **kwargs):
        initial_first_name = kwargs.pop('first_name')
        initial_last_name = kwargs.pop('last_name')

        super(EventMemberForm, self).__init__(*args, **kwargs)

        self.fields['first_name'].initial = initial_first_name
        self.fields['last_name'].initial = initial_last_name 
```

# cloudbees - 来自cloudbees的Mysql转储

> ID：13799157
> 
> 赞同：1
> 
> 时间：2012-12-10T10:33:32.697
> 
> 标签：cloudbees

我想从 cloudbees 下载 MySQL 快照，但似乎不可能。您如何从 cloudbees 为您的开发或调试转储？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:24:58.030

您可以使用 RUN@cloud 控制台中显示的设置直接从您的开发工作站连接到数据库。

因此，您可以使用本地 mysqldump 或类似工具来提取您需要的数据。

有关详细信息，请参阅以下页面：

*   [数据库指南](https://developer.cloudbees.com/bin/view/RUN/DatabaseGuide#HConnectingtothedatabasewithaMySQLclient)
*   [数据库导出](https://developer.cloudbees.com/bin/view/RUN/DatabaseExport)

# asp.net - SignalR OnConnected 和 OnDisconnected 未触发

> ID：13799160
> 
> 赞同：9
> 
> 时间：2012-12-10T10:33:43.780
> 
> 标签：asp.net, signalr

我的集线器中的 OnConnected 和 OnDisconnected 覆盖无法触发时遇到问题。

出于复制目的，我有一个非常简单的集线器：

```
public class OnlineHub : Hub
{
    public void TestMethod()
    {
        var a = 1;
    }

    public override System.Threading.Tasks.Task OnConnected()
    {
        return Clients.All.connected(Context.ConnectionId, DateTime.Now.ToString());
    }

    public override System.Threading.Tasks.Task OnDisconnected()
    {
        return Clients.All.disconnected(Context.ConnectionId, DateTime.Now.ToString());
    }
} 
```

还有一个aspx页面：

```
<script type="text/javascript">
    $(function () {
        $("#btn").click(function () {
            $.connection.onlineHub.server.testMethod();
        });

        $.connection.onlineHub.server.connected = function (id, date) {
            $("#results").append("connected: " + id + " : " + date + "</br>");
        };

        $.connection.onlineHub.server.disconnected = function (id, date) {
            $("#results").append(("connected: " + id + " : " + date + "</br>");
        };

        $.connection.onlineHub.connection.start();
    });

</script> 
```

我正在使用 jQuery 1.6.4 和 signalR 1.0.0-alpha2。未执行客户端连接和断开连接的方法。如果我在 OnConnected 或 OnDisconnected 中设置断点，断点不会命中。

正在建立连接，因为我的 TestMethod 调用正常，并且我从 signalR 的协商调用中得到了一个 connectionId。

我确定我错过了一些简单的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T11:30:21.960

您的客户端处理程序应该如下所示：

```
$.connection.onlineHub.client.connected = function(){...} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-01T06:05:12.373

事实证明，在脚本中，您需要为要在集线器上引发的事件定义至少一个客户端回调。在预期调用 OnConnected 和 OnDisconnected 时要小心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T12:09:36.400

弄清楚了。我在服务器对象而不是客户端上调用方法：

```
$.connection.onlineHub.server.connected = function (id, date) {
        $("#results").append("connected: " + id + " : " + date + "</br>");
    };

    $.connection.onlineHub.server.disconnected = function (id, date) {
        $("#results").append(("connected: " + id + " : " + date + "</br>");
    }; 
```

应该

```
$.connection.onlineHub.client.connected = function (id, date) {
        $("#results").append("connected: " + id + " : " + date + "</br>");
    };

    $.connection.onlineHub.client.disconnected = function (id, date) {
        $("#results").append(("connected: " + id + " : " + date + "</br>");
    }; 
```

所以看起来如果 signalR 没有为 OnDisconnected 或 OnConnected 中的任务定义任何内容，那么它们就不会被解雇。这是有道理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-30T10:09:33.470

我错过了这段代码。放回去时，开始工作

```
$.connection.hub.start().done(function () {               
    //chat.server.sendMessageToBackend($('#displayname').val(), $('#message').val());                 
}); 
```

# oracle - 触发 PL/SQL 检查多个条目

> ID：13799162
> 
> 赞同：1
> 
> 时间：2012-12-10T10:33:45.697
> 
> 标签：oracle, plsql, triggers

好的，所以我需要创建一个触发器来检查电影的评论者是否对同一部电影进行了两次评分。

我写了这个：

```
create or replace 
trigger viewer_insert
BEFORE INSERT ON viewer
FOR EACH ROW

DECLARE
-- create a variable to store the count of rows
counter  number;

BEGIN

--Any reviewer can't review the same movie twice

SELECT count(*) INTO counter
FROM viewer
WHERE "USERID"=:new."USERID";

IF counter = 1
THEN  RAISE_APPLICATION_ERROR('-20012', 'Constraint Violated!');
END IF;
END; 
```

问题是，当我测试它时，我仍然能够对同一部电影进行评分。有什么我没有做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:10:28.960

经验法则是

> 不要做任何已经在 DBMS 引擎中的程序化操作

我的意思是，在您的情况下，在（用户 ID、电影 ID）上创建一个唯一约束。

```
ALTER TABLE viewer
add CONSTRAINT user_movie_unique UNIQUE (userid, movieid); 
```

要阅读的文档：[约束和触发器](http://ss64.com/ora/syntax-constraints.html)

# javascript - 如何发送ajax请求

> ID：13799164
> 
> 赞同：2
> 
> 时间：2012-12-10T10:33:45.630
> 
> 标签：javascript, jquery, cross-domain, salesforce

我正在尝试使用以下代码从 javascript 发送 ajax 请求以从 salesforce 获取数据，但我不断收到 Error:0 消息。看来我的请求没有正确发送。我不知道我的代码有什么问题。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    var $j = jQuery.noConflict();
    $j(function(){  
        var url = 'https://myorg-developeredition.na14.force.com/services/apexrest/clsapi';
        $j.ajax({
            url: url,
            type: 'POST',
            success : function() { 
                alert('Hello'); 
            },
            error : function(jqXHR, textStatus, errorThrown) {
                alert('Error: ' + jqXHR.status);
            },                
        });
    });
</script> 
```

但是当我在浏览器中输入相同的 url 时，我得到了销售人员的响应。表明

```
<response>myresponse</response> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:36:15.260

[由于Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，您正在发送浏览器阻止的跨域请求。

要发送跨域请求，您必须使用`jsonp`.

```
var url = 'https://myorg-developeredition.na14.force.com/services/apexrest/clsapi';
$j.ajax({
    url: url,
    type: 'POST',
    dataType: 'jsonp', 
    success : function() { 
        alert('Hello'); 
    },
    error : function(jqXHR, textStatus, errorThrown) {
        alert('Error: '+jqXHR.status);
    } // <-- remove the trailing comma you had here
}); 
```

# java - 在启动时启动应用程序会使应用程序崩溃

> ID：13799176
> 
> 赞同：0
> 
> 时间：2012-12-10T10:34:25.310
> 
> 标签：java, android, boot

我尝试了一些我在网上找到的解决方案，用于在启动时启动我的活动。目前我有：

显现：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <receiver android:name="App_Receiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver> 
```

主要活动：

```
public void onReceive(Context context, Intent intent) {

    if ((intent.getAction() != null) && (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")))
    {           

        // Start the service or activity 
        Intent startActivity = new Intent();    
        startActivity.setClassName("org.package_name", "org.package_name.MainActivity");
        startActivity(startActivity);      

    }
} 
```

但是，当我启动手机时，我收到我的应用程序以意外方式停止的错误（即崩溃）。我在做什么错任何想法？（在 Android 2.2、API 8 上测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:37:47.380

**启动完成需要** `android.permission.RECEIVE_BOOT_COMPLETED permission.`

**编辑**请写包裹名称和接收者名称。

```
<receiver android:name="org.package_name.App_Receiver">

Intent startActivity = new Intent(context, MainActivity.class);    
startActivity(startActivity); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:39:45.103

就像上面发布的答案一样：它需要许可，并且：

```
startActivity.setClassName("org.package_name", "org.package_name.MainActivity"); 
```

确保您已在 Manifest 文件中声明该 Activity 公开，还请提供堆栈跟踪以准确查看问题。

清单中的活动声明示例：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/app_name">
    </activity> 
```

# mysql - 基于分组数据的特定mysql更新

> ID：13799177
> 
> 赞同：4
> 
> 时间：2012-12-10T10:34:26.937
> 
> 标签：mysql, sql, join, sql-update

这个让我难住了。

我有2张桌子：

```
METERS
id | startTime

READINGS
id | meter_id | readingTime 
```

我想要做的是将1 sql 查询中`meters.startTime`的最低匹配更新。`readings.readingTime`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T10:36:06.383

像这样：

```
UPDATE Meters m
INNER JOIN
(
   SELECT meter_id, MIN(reading_time) lowesttime
   FROM readings 
   GROUP BY meter_id
) r ON m.id = r.meter_id
SET m.starttime = r.lowesttime; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:36:45.193

```
UPDATE METERS m SET startTime = (SELECT MIN(r.readingTime)
    FROM READINGS r
    WHERE r.meter_id = m.id)
WHERE m.id = your_id 
```

# python - \b 字符的对立面是什么，即一种不可擦除的空间？

> ID：13799180
> 
> 赞同：6
> 
> 时间：2012-12-10T10:34:39.220
> 
> 标签：python, string, character, ascii, tty

据`\b`我了解，控制字符不应该删除前一个字符（这也将是`\b`+ 一个 del 字符），所以这样的事情是有效的：

```
>>> print 'pototo\b\b\ba'
potato 
```

是否有向前移动的字符，例如不可覆盖的空间？预期的用法类似于（我称这个字符为`\x`）：

```
>>> print 'pototo\r\x\x\xa'
potato 
```

显然，在打字机上，一个普通的空间就可以做到这一点。但是在终端上，空格会擦除下面的字母。

我的用例是一种预期匹配的场景，我想*回过头*来用颜色装饰字符流输出的某些部分，我想知道是否有必要在内存中保留整个当前行的缓存或不。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:30:34.603

如果您可以依赖终端 (*) 中的[ANSI 转义码序列，则可以使用 Cursor Forward (CUF) 序列“CSI](http://en.wikipedia.org/wiki/ANSI_escape_code) *n* C”，如下所示：

```
print "Pototo\b\b\ba\x1b[2Ces" 
```

并得到：

```
Potatoes 
```

CSI 是`\x1b[`, 并且用于启动 ANSI 转义码序列。`2`是向右移动的字符数，`C`是向右移动的命令。

* * *

(*) 一个很好的近似值是您可以依赖 ANSI 代码，除非您需要支持 Windows。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:25:29.510

你应该重写字符：

```
>>> print 'pototo\rpota'
potato 
```

如果您不想重新编写它们，那么您应该使用像[curses](http://docs.python.org/2/library/curses.html)这样的库来手动设置光标位置。

# disk - 文件的磁盘扇区和块分配

> ID：13799183
> 
> 赞同：3
> 
> 时间：2012-12-10T10:34:44.443
> 
> 标签：disk, sector

我对 Disk Sector 和 Block 有疑问。扇区是一个单元，通常为 512 字节或 1k、2k、4k 等。取决于硬件。文件系统块大小是一组扇区大小。

假设我正在存储一个 5KB 的文件，如果扇区为 512 字节且块为 4KB，如何将其写入磁盘？

该文件的 4KB 写入一个块，另外 1KB 文件写入另一个 4KB 块。现在第二个块的 3KB 是不可用的。

它将来会使用还是会被浪费？如果我将 10 个 5KB 的文件写入磁盘，会浪费 30KB 的大小，还是这 30KB 用于磁盘使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T03:11:04.800

这是一个公认的事实，即文件以“块”大小的倍数存储在磁盘上。

![文件大小 ~ Linux](../Images/e7e4647860f32195dd674b6deafcec58.png)

![磁盘上的文件大小 ~ Linux](../Images/e030134c9467b1e7e2887d2a24340fb3.png)

![文件大小与磁盘上的文件大小 ~ Windows](../Images/75229c79d7a6fe100c3bc842f6493dda.png)

**块**的概念[最初是磁盘上的物理扇区在](http://en.wikipedia.org/wiki/Disk_sector)文件系统中逻辑表示的一种简单方法。每个扇区都有自己的标题、数据区域和[ECC](http://en.wikipedia.org/wiki/Error-correcting_code)，这使其成为可以在逻辑上独立表示的最小磁盘块。

随着时间的推移，随着 HDD 控制器上缓存的出现，拥有多个物理扇区大小的逻辑块变得更加容易。这种方式增加了磁盘上的顺序 I/O，从而提高了吞吐量。

今天，**块**是可用的最小磁盘空间。通常，文件使用磁盘上的 1 个或多个块存储。

![存储在磁盘上的块中的文件](../Images/2ad9ec761110a00e390e8b5c450494f4.png)

对于每个文件，只要对文件进行更改并且文件“增长”，就会使用最后一个块中的剩余空间（如果有），这需要额外的磁盘空间来存储新添加的内容。

额外的空间需求（超出当前最后一个块中的可用空间可以容纳的空间）通过在磁盘上请求额外的块并在逻辑上链接新的块集以继续跟随文件的当前最后一个块来满足。**文件 A**说明了上述情况。

提前分配块的好处是减少了碎片。考虑在磁盘上没有块概念并且根据需要分配磁盘空间的替代方案，即分配的磁盘空间量正好是文件大小。

在这样的设置中，每次向文件中添加一个字符时，都需要：

*   分配额外的内存（多 1 个字符）。
*   在包含文件初始区域的区域和这个新字节之间建立一个链接。

所有这些**元数据，**即关于“链接”的附加结构也需要磁盘空间。这构成了每个此类“链接”的固定开销，因此必须将此类“链接”保持在最小数量。以“块”为单位分配磁盘大小的概念将开销限制在预定量。

> 磁盘上的保证文件数 = 原始磁盘空间 / 块大小

此外，这种随机搜索会降低吞吐量，因为重新定位磁盘磁头是磁盘 I/O 中涉及的最耗时的任务。频繁的随机搜索也可能更快地磨损磁盘（还记得跳舞的 HDD 吗？），必须尽可能避免。

* * *

这种方法的其他优点：

### 1\. 更快的读取

使用块，磁盘读取是连续的，直到块大小。更少的搜索 = 更高的读取吞吐量。

### 2\. 更快的写入

块提供了一个简单的实现，可以映射到**[页面](http://en.wikipedia.org/wiki/Page_cache#Page_cache_and_disk_writes)**，这也导致更高的写入吞吐量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T02:05:36.517

首先要注意的是，块大小几乎总是大于您的扇区大小

* * *

要确定您的**扇区**大小，请运行以下命令

```
root@ubuntu:~# fdisk -l | grep -E "Sector size"
Sector size (logical/physical): 512 bytes / 512 bytes 
```

*扇区大小几乎总是 512 字节或 4096 字节，具体取决于您购买驱动器的时间*

* * *

要确定您的**块**大小，请运行以下命令

```
root@ubuntu:~# blockdev --getbsz /dev/sda
4096 
```

*在大多数现代操作系统上，块大小通常为 4096。如果需要，您可以更改此设置*

* * *

任何未完全填充块的文件都会导致空间浪费。这是正常的，也是意料之中的。

[http://linux.die.net/man/8/blockdev](http://linux.die.net/man/8/blockdev)

[https://serverfault.com/questions/29887/how-do-i-determine-the-block-size-of-an-ext3-partition-on-linux](https://serverfault.com/questions/29887/how-do-i-determine-the-block-size-of-an-ext3-partition-on-linux)

[http://www.linuxforums.org/forum/miscellaneous/5654-linux-disk-block-size-help-please.html](http://www.linuxforums.org/forum/miscellaneous/5654-linux-disk-block-size-help-please.html)

# javascript - 用于在 jqgrid 中显示来自服务器响应的动态列名 如何使用 ajax 调用编写 loadcomplete 事件

> ID：13799186
> 
> 赞同：1
> 
> 时间：2012-12-10T10:35:10.043
> 
> 标签：javascript, jquery, jqgrid

jqgrid 中的动态列名问题得到没有列名和数据的空白网格？在 jqgrid 中获取平淡无奇的网格 nocolumn 名称和日期这是我的代码我无法找到为什么我得到空白网格我正在使用 loadcoplete 事件和 ajax 调用

在此先感谢这是我的代码

```
<script type="text/javascript">

var jq = jQuery.noConflict();
    jq(function() {
        jq("#grid").jqGrid({

    url:'<%= request.getContextPath() %>/admin/dataGrid',
    datatype: "json",
    colNames:['','','','','',
              '','','','','',
              '','','','','', 
              '','','','','',
              '','','','','',
              '','','','',''],
    colModel:[
        {name:'p1',index:'p1', width:55,align:"right",hidden: true ,formatter:'date', formatoptions: {srcformat:'ISOLong', newformat:'H:i:s'}},
        {name:'p2',index:'p2', width:55,align:"right",hidden: true  },
        {name:'p3',index:'p3', width:55,align:"right",hidden: true },
        {name:'p4',index:'p4', width:55,align:"right",hidden: true },
        {name:'p5',index:'p5', width:55,align:"right",hidden: true },
        {name:'p6',index:'p6', width:55,align:"right",hidden: true},
        {name:'p7',index:'p7', width:55,align:"right",hidden: true},        
        {name:'p8',index:'p8', width:55,align:"right",hidden: true},
        {name:'p9',index:'p9', width:55,align:"right",hidden: true},
        {name:'p10',index:'p10', width:55,align:"right",hidden: true},
        {name:'p11',index:'p11',width:55,align:"right",hidden: true},
        {name:'p12',index:'p12',width:55,align:"right", hidden: true},
        {name:'p13',index:'p13',width:55,align:"right", hidden: true},
        {name:'p14',index:'p14',width:55,align:"right",hidden: true},   
        {name:'p15',index:'p15', width:55,align:"right",hidden: true},
        {name:'p16',index:'p16', width:55,align:"right",hidden: true},
        {name:'p17',index:'p17', width:55,align:"right",hidden: true},
        {name:'p18',index:'p18', width:55,align:"right",hidden: true},
        {name:'p19',index:'p19', width:55,align:"right",hidden: true},
        {name:'p20',index:'p20', width:55,align:"right",hidden: true},      
        {name:'p21',index:'p21', width:55,align:"right",hidden: true},      
        {name:'p22',index:'p22', width:55,align:"right",hidden: true},
        {name:'p23',index:'p23',width:55,align:"right",hidden: true},
        {name:'p24',index:'p24',width:55,align:"right", hidden: true},
        {name:'p25',index:'p25',width:55,align:"right", hidden: true},
        {name:'p26',index:'p26',width:55,align:"right",hidden: true},
        {name:'p27',index:'p27',width:55,align:"right",hidden: true},
        {name:'p28',index:'p28',width:55,align:"right", hidden: true},
        {name:'p29',index:'p29',width:55,align:"right", hidden: true},
        {name:'p30',index:'p30',width:55,align:"right",hidden: true},   
    ],
    postData: { 
    },
    rowNum:10,
    rowList:[10,20,30],
    height: 230,
    autowidth: true,
    rownumbers: true,
    pager: '#pager',
    viewrecords: true,
    emptyrecords: "Empty records",
    loadonce: false,
    viewrecords: true,
    caption:"Meter Data",
    footerrow: true,
    userDataOnFooter: true,
    loadComplete: function() {
         alert("load");
        /*   $ ("#grid").jqGrid('jq',{datatype:'json'}); */
    },
    jsonReader : {
        root: "rows",
        page: "page",
        total: "totalPages",
        records: "records",
        repeatitems: false,
        cell: "cell",
        userdata    : "userdata"

    },
  json : function(jsondata){

        $.ajax({
            url : '<%= request.getContextPath() %>/admin/dataGrid',
            data : jsondata,
            dataType :"json",
            complete: function(jsondata,stat)
            {
                if(stat=="success"){
                    var thegrid = jQuery("#grid")[0];
                    thegrid.addJSONData(eval("("+jsondata.responseText+")"))
                }
            }
        })
    } 
}); 

jq("#grid").jqGrid("setLable",23,"Column23");
jq("#grid").jqGrid("showCol",23); 
        jq("#grid").jqGrid('navGrid','#pager',
                {edit:false,add:false,del:false,search:true},
                { },
                { },
                { }, 
                { 
                    sopt:['eq', 'ne', 'lt', 'gt', 'cn', 'bw', 'ew'],
                    closeOnEscape: true, 
                     }
        );
});

</script> 
```

# jquery - 带有 msDropDown 的 KnockoutJS

> ID：13799196
> 
> 赞同：1
> 
> 时间：2012-12-10T10:35:46.440
> 
> 标签：jquery, knockout.js, knockout-2.0, msdropdown

目前使用 msDropDown 3.2 使控件看起来很漂亮，但是由于正在开发的应用程序的性质，我已经研究过使用 Knockout JS 来处理 UI 数据绑定。不幸的是，每当我更改视图模型上的属性时，它都会更改选择而不是渲染控件（我知道更改渲染控件所需的代码，但不确定如何将其挂钩到 Knockout）。

有没有人集成了这两个工具，如果有，那么你是如何让它们很好地结合在一起的？

**编辑：**

**HTML：**

```
<select data-bind="value: Type">
   <option value="1">First</option>
   <option value="2">Second</option>
   <option value="3">Third</option>
   <option value="4">Fourth</option>
</select> 
```

**JavaScript：**

```
function ViewModel() {
    var self = this;
    self.Name = ko.observable();
    self.Type = ko.observable();
    self.IsVisible = ko.computed(function () {
        return this.Type() == 1;
    }, this);
}

var vm = new ViewModel();

ko.applyBindings(vm);

$(document).ready(function () {
    $("select").msDropDown();
}); 
```

从上面的代码可以看出，我正在创建一个 ViewModel 实例，然后应用绑定并启动 msDropDown。

如果我要调用以下命令：

```
vm.Type("2"); 
```

然后它将更新基础选择，但不会更新 msDropDown 控件的前端。基本上需要一种方法来挂钩 Knockout 在更改属性时可能调用的事件，以便我可以确定它是否是一个选择并调用一些特定于 msDropDown 的代码来更新 UI。

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:55:43.053

感谢您的所有回答，但是我设法找到了一个涉及创建自己的活页夹的解决方案：

```
ko.bindingHandlers.setValue = {
    init: function (a, b, c) {
        var value = ko.utils.unwrapObservable(b());

        if (typeof value == 'undefined') {
           value = $(a).find("option").first().val();
        }
        $(a).val(value).change(function(){
            var observable = b();
            observable($(this).val());
        }).msDropdown();
    },
    update: function (element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor();
        var valueUnwrapped = ko.utils.unwrapObservable(value);
        // Get the value from the observable and set the value on the msDropDown.
        $(element).msDropDown().data("dd").set("value", valueUnwrapped);
    }
};

function ViewModel() {
    var self = this;
    self.Name = ko.observable();
    self.Type = ko.observable();
    self.IsVisible = ko.computed(function () {
        return this.Type() == 1;
    }, this);
}

var vm = new ViewModel();

ko.applyBindings(vm); 
```

**然后在 HTML**

```
<select name="myselect" data-bind="setValue: Type">
    <option value="1">1</option>
    <option value="2">2</option
    <option value="3">3</option
    <option value="4">4</option
</select> 
```

这会将 msDropDown 插件应用于选择，并且每当视图模型更改时，它都会更新底层选择和 msDropDown 生成的 UI 元素。此外，当更新 UI 中的选定项目时，它会保留回视图模型。

感谢您的所有帮助，希望其他尝试将 Knockout JS 与 msDropDown 一起使用的人会发现这很有帮助。

克里斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:24:32.297

正如 MarcoK 所说，您需要订阅更改

我假设您不会使用静态下拉菜单（我可能错了）
在这种情况下，您还可以在 UI 中使用 afterAdd 绑定来调用您的 updateUI 方法 - 基本上确保在添加每个项目后，updateUI函数被调用（重新应用，`msDropDown()`以便您的项目正确显示

```
function ViewModel() {
    var self = this;
    self.Name = ko.observable();
    self.Type = ko.observable();
    self.IsVisible = ko.computed(function () {
        return this.Type() == 1;
    }, this);

    self.updateUI = function(){
        $("select").msDropDown();
    }

    self.Type.subscribe(function(newValue) {
        updateUI();
    });

    //just added this as I assume you will be using a generated options list
    self.myOptions = ko.observableArray();
} 
```

你的标记变成：

```
<select data-bind="value: Type, options: myOptions, afterAdd: updateUI">
</select> 
```

有关模板绑定的更多信息：http: [//knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:55:25.830

要创建钩子，你`subscribe`可以观察到（在你的 VM 中）：

```
self.Type.subscribe(function(newValue) {
    // Use "newValue" to read the new value, which you can use
    // to bind to msDropDown / the UI
}); 
```

# haskell - 如何在 Haskell (ghc) 中编写与平台无关的代码

> ID：13799199
> 
> 赞同：20
> 
> 时间：2012-12-10T10:35:49.627
> 
> 标签：haskell, platform-independent, platform-specific

我想在 Hackage 中使用一些特定于平台的库（例如 inotify、kqueue）。但是，关于如何使用条件编译在平台之间切换的文档似乎有点稀少。我在查找相关文档时遇到了一些麻烦...

1.  我可以使用哪些预处理器定义在平台之间切换？

2.  如何设置我的 cabal 文件以分别在 linux/osx 上包含/排除 inotify/kqueue？

我希望在这里记录它可能对其他人也有用，因此可能值得提及其他常见平台。到处寻找这些东西是愚蠢的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T14:20:54.937

1.  [如GHC 文档](http://www.haskell.org/ghc/docs/7.4-latest/html/users_guide/options-phases.html#c-pre-processor)`os_HOST_OS`中所述，结合 C 预处理器选项`-cpp`（或 using `{-# LANGUAGE CPP #-}`）查看标志

2.  添加`extensions: CPP`到您的包描述中，如[Cabal 文档](http://www.haskell.org/cabal/users-guide/developing-packages.html#conditional-compilation)中所示，并定义一个自定义标志，如下所示：

    ```
    if os(linux)
         cpp-options: -DINOTIFY
    if os(darwin)
         cpp-options: -DKQUEUE 
    ```

然后，您可以`#ifdef`在源代码中使用。

# eclipse - Eclipse+Pydev+pylab：堆栈：当前使用后的堆栈

> ID：13799202
> 
> 赞同：2
> 
> 时间：2012-12-10T10:35:58.303
> 
> 标签：eclipse, plot, stack, pydev

当我尝试绘制图形时，我收到一条错误消息：“堆栈：当前使用后的堆栈”。我使用了这样的代码：

```
import numpy as np  
from pylab import      
n = 256  
X = np.linspace(-np.pi,np.pi,n,endpoint=True)  
Y = np.sin(2*X)  

plot (X, Y+1, color='blue', alpha=1.00)  
plot (X, Y-1, color='blue', alpha=1.00)
show() 
```

有人知道如何解决这个问题吗？

最好的，马吕斯

PS.：我正在使用 Mac OS ML、Python 2.7、Pydev+Eclipse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:19:55.993

我不太确定我是否理解您提到的错误，但是在您引用的代码中，您缺少一个 " `*`" 之后`from pylab import` 是：

```
import numpy as np  
from pylab import *      
n = 256  
X = np.linspace(-np.pi,np.pi,n,endpoint=True)  
Y = np.sin(2*X)  

plot (X, Y+1, color='blue', alpha=1.00)  
plot (X, Y-1, color='blue', alpha=1.00)
show() 
```

以下代码使用 eclipse juno+pydev+pylab 生成了一个带有 2 个正弦波的图形

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T10:14:18.300

我花了一天时间处理这个问题，最后发现是你的python版本的问题。我安装了 32 位 python 2.7 并且还遇到了错误消息：“堆栈：当前正在使用后的堆栈”。

在matplotlib的github页面上（[https://github.com/matplotlib/matplotlib/downloads），matplotlib-1.2.0-py2.7-python.org-macosx10.6.dmg](https://github.com/matplotlib/matplotlib/downloads)的描述是“Binary installer for python .org 的 64 位 python 2.7 和 MacOS X 10.6 或更高版本”。

我改成匹配32位python的matplotlib-1.2.0-py2.7-python.org-macosx10.3.dmg后，问题就解决了。

# google-app-engine - App Engine 忽略我的源代码更新和我的 app.yaml 文件

> ID：13799208
> 
> 赞同：3
> 
> 时间：2012-12-10T10:36:22.667
> 
> 标签：google-app-engine, app.yaml

我的 AppEngine 应用程序在我的桌面计算机上的开发服务器上运行良好，但我无法在 Google 的服务器上获取版本以关注我的源代码更新。

这是最有说服力的例证。我的 app.yaml 文件开始为：

```
application: xxxxxxxx
version: 1
runtime: python
api_version: 1

builtins:
- datastore_admin: on

handlers:
- url: /statix
  static_dir: statix

- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.py 
```

最后一行将所有非静态 URL 路由到 main.py 文件。我们将这个版本的 main.py 称为“旧”版本。

在我对 main.py 进行了一些常规更改（从而创建了“新”版本）之后，问题就开始了。“新”版本在我的 localhost 机器上运行良好，但在我部署到 GAE 后，它的更改无法通过 Big Internet 提供。相反，GAE 服务于由“旧”main.py 计算的页面。有时退出 GAE Launcher 并重新启动会有所帮助，但现在（几个小时）没有效果。即使机器重新启动。

因此，为了进行实验，我将 app.yaml 的最后一行更改为：

```
script: main2.py 
```

我重新部署到 GAE，当我访问我的网站时，我得到一个 500 错误——正如预期的那样——因为项目中没有 main2.py 文件。

所以我将“新”的 main.py 磁盘文件重命名为 main2.py，重新部署到 GAE，然后 500 错误消失了——也如预期的那样。

但这就是奇怪的地方。这个刚刚上传的 main2.py 文件是“新”的 main.py，只是重命名了。但是，GAE 提供的页面是由“旧”main.py 计算的页面！

我已清除浏览器缓存。我什至启动了一个尘土飞扬的 Opera 副本，它从未见过该项目提供的 URL，而且它也显示“旧”main.py 创建的过时页面内容。

我已经使用 App Engine 几年了。一周前我从来没有遇到过这样的麻烦。我最近将 Launcher 更新到 1.7.3 (Mac OS X 10.6.8)。起初我以为我的 Launcher 不知何故损坏了，但 app.yaml 实验表明它是 GAE 本身的东西。我的 GAE Launcher 中有很多项目，我真的不想进行全新安装。

我敢打赌，当我听到你的想法时，我会感到尴尬，但我已经没有想法了。

**附录**：用户 dragonx 建议缓存可能是问题的根源，现在我想起来了，这确实是在我使用 Google Domains 服务为应用程序配置自定义域之后开始的。但是，根据 ，这里`curl -D`是我的应用程序主页上的标题：

```
HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Cache-Control: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Vary: Accept-Encoding
Date: Tue, 11 Dec 2012 02:29:43 GMT
Server: Google Frontend
Transfer-Encoding: chunked 
```

看起来缓存已关闭。尽管如此，我还是找不到如何返回 Google Domains 服务并关闭缓存。:-(

**附录#2：**我将我的文件作为不同的应用程序上传（即我被允许的 10 个应用程序中的另一个）。他们提供更新。但是，当我对新上传的文件进行更改时，这些更改并没有出现。因此，似乎无论出现什么问题，它都会影响我用户帐户下的所有应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:03:17.257

查看“版本”和“管理员日志”，您可能正在更新错误的版本，即不是默认的 [https://appengine.google.com](https://appengine.google.com) 也尝试不使用 cookie（cookie 有时会对更新产生奇怪的影响）

```
appcfg.py update . --no_cookies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:26:08.410

您是否设置了 HTTP 缓存标头？如果是这样，您可能会从一些中间缓存中获取结果，例如 GAE 的边缘缓存。

# android - 在 GridView 中查看

> ID：13799211
> 
> 赞同：0
> 
> 时间：2012-12-10T10:36:28.000
> 
> 标签：android, gridview, progress-bar

我有一个 FrameLayout，里面有一个`GridView`. 然后我需要在加载之后在底部的网格视图之后添加一个进度条`GridView`，但是进度条是在`GridView`. 下面是我的代码。

我正在使用`TabHost`其中包含选项卡（3）的选项卡小部件，`FrameLayout`如下`GridView`所示：

```
<

    FrameLayout android:id="@android:id/tabcontent" android:layout_width="fill_parent" android:layout_height="fill_parent"
                    android:layout_below="@+id/EmptyFonesLayout" >
                    <GridView xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/gridview" android:layout_width="fill_parent" android:layout_height="wrap_content" android:verticalSpacing="4dp" android:horizontalSpacing="4dp" android:numColumns="auto_fit" android:columnWidth="90dp" android:stretchMode="columnWidth" android:gravity="center_horizontal" 
                        android:textFilterEnabled="true" android:background="#00ffff"/>

                   <RelativeLayout
                            android:id="@+id/linlaProgressBar"
                            android:layout_width="fill_parent"
                            android:layout_height="20dp"
                            android:orientation="horizontal"
                            android:layout_gravity="bottom"
                            android:gravity="center"
                            android:background="#00FFFF"
                            android:visibility="gone"
                            android:layout_alignParentBottom="true">

                            <!-- android:layout_below="@+id/gridview" -->

                 <ProgressBar
                            style="?android:attr/progressBarStyleSmall"
                            android:layout_width="20dp"
                            android:layout_height="20dp"/>

                 <TextView 
                            android:id="@+id/emptyfonetext"
                            android:text="Loading"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:paddingLeft="10dp"
                            android:paddingRight="15dp"
                            android:textSize="16dp"/>
                </RelativeLayout>    -->
               </FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:50:27.063

你可以试试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <GridView
        android:id="@+id/gridView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/progressBar"
        android:layout_centerHorizontal="true"
        android:numColumns="3" >
    </GridView>

    <ProgressBar
        android:id="@+id/progressBar"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" />

    <TextView
        android:id="@+id/emptyfonetext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/gridView"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@+id/progressBar"
        android:text="Loading"
        android:textSize="16dp" />

</RelativeLayout> 
```

顶部是 GridView，底部是进度条，右侧是加载文本。

![结果](../Images/d55c7dcf073db659f1fa3da52517419a.png)

# shell - AWK：解析多个命令的输出

> ID：13799212
> 
> 赞同：0
> 
> 时间：2012-12-10T10:36:30.063
> 
> 标签：shell, unix, awk

下面是我用来 grep 应用程序日志中的所有错误/异常的脚本：

```
$ tail -f -n 0 /web/*/logs/*.log | awk '{ if ( $0 ~ /==>.*<==/) { print "File :" $0 } else if( $0 ~ /error/ || $0 ~ /Error/ || $0 ~ /exception/ || $0 ~ /Excpetion/ || $0 ~ /ORA-/ || $0 ~ /fatal/ || $0 ~ /Fatal/){print "Error " $0}}' 
```

输出很好，但我的要求是我需要并行解析其他系统命令的输出，例如：

```
vmstat
top 
sar 
```

等等

有没有一种方法可以通过运行单个 awk 命令获得所有命令的输出，例如：

```
awk process output of:

application logs
vmstat
top 
sar 
```

ETC

请注意，我们的盒子里只安装了 awk 和 gawk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:57:00.093

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk 
```

内容`awk.script`：

```
BEGIN {
    printf "Process output of:\n"

    command0="tail -f -n 0 /web/*/logs/*.log"
    command1="vmstat"
    command2="free"
    command3="ps -eo pcpu,pid,user,tty,args"

    printf "\n>%s:\n\n", command0
    while ( (command0 |& getline var0) > 0) {
        if (var0 ~ /==>.*<==/) {
            print "File :" var0
        }
        else if (var0 ~ /[Ee]rror|[Ee]xception|ORA|[Ff]atal/) {
            print "Error", var0
        }
    }

    printf "\n>%s:\n\n", command1
    while ( (command1 |& getline var1) > 0) {
        print var1
    }

    printf "\n>%s:\n\n", command2
    while ( (command2 |& getline var2) > 0) {
        print var2
    }

    printf "\n>%s:\n\n", command3
    while ( (command3 |& getline var3) > 0) {
        print var3
    }
} 
```

如您所见，此脚本将运行四个命令，`tail`、和。现在你有责任用 var[1-3] 做点什么。如果我能提供进一步的帮助，请告诉我。祝你好运。`vmstat``free``ps`

# javascript - jQuery 滚动路径

> ID：13799213
> 
> 赞同：1
> 
> 时间：2012-12-10T10:36:30.840
> 
> 标签：javascript, jquery, html, canvas

我正在尝试使用 jQuery Scrolpath 插件，但我遇到了一些问题，因为它的工作原理并没有任何指导方针。

演示站点是[http://joelb.me/scrollpath/](http://joelb.me/scrollpath/)

如果您查看 demo.js，您会看到以下内容...

```
$.fn.scrollPath("getPath")
    // Move to 'start' element
    .moveTo(400, 50, {name: "start"})
    // Line to 'description' element
    .lineTo(400, 800, {name: "description"}) 
```

我想知道“400,50”如何将初始 div 放在浏览器的中心？我试过玩这些变量，但我得到了真正随机的输出，以前有人用过这个插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:44:50.560

GitHub 上也有一些文档：[https ://github.com/JoelBesada/scrollpath](https://github.com/JoelBesada/scrollpath)

在那里它声明该`.moveTo()`函数实质上将屏幕中心移动到指定的坐标。

因此，我认为与其将其视为文档中的元素以浏览器视图为中心，不如将其视为浏览器的视图以文档中的元素为中心——即文档中元素的位置维持不变。

# asp.net-mvc - 应用偏移时表示的 UTC 时间必须介于 0 年和 10,000 年之间。参数名称：偏移量

> ID：13799214
> 
> 赞同：32
> 
> 时间：2012-12-10T10:36:35.663
> 
> 标签：asp.net-mvc, exception, datetimeoffset

我在 ASP.NET MVC3 控制器中有以下代码：

```
public PartialViewResult GetCalendar(int? month, int? year)
    {
        var test = new DateTime((year.HasValue ? year.Value : 1), (month.HasValue ? month.Value : 1), 1);
        return PartialView("Calendar", new DateTimeOffset(test));
    } 
```

我的视图模型是`DateTimeOffset?`

抛出异常的原因是什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-10T10:49:55.840

构造`DateTimeOffset`函数首先将任何`DateTime`不属于`Kind`“UTC”的时间转换为等效的 UTC 时间。然后它将检查 UTC 等效值是否超出and`DateTime`的范围，如果超出，将抛出与您正在经历的相似的情况。`DateTimeOffset.MinValue``DateTimeOffset.MaxValue``ArgumentOutOfRangeException`

检查您正在使用`DateTime.Kind`的变量`test`，如果它不是“UTC”，则确定转换为 UTC 是否会使`DateTime`指定的`test`值超出这些范围 - 根据 MSDN 文档，`MinValue`和`MaxValue`（在 UTC 中）是分别为“1/1/0001 12:00:00 AM +00:00”和“12/31/9999 11:59:59 PM +00:00”。

文档（[DateTimeOffset.MinValue](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.minvalue.aspx)）注意到：

“在方法执行与 MinValue 的比较之前，任何 DateTimeOffset 值都会转换为协调世界时 (UTC)。这意味着日期和时间接近最小范围但偏移量为正的 DateTimeOffset 值可能会引发异常。例如，值 1/1/0001 1:00:00 AM +02:00 超出范围，因为它在转换为 UTC 时比 MinValue 早一小时。”

还有（[DateTimeOffset.MaxValue](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.maxvalue.aspx)）：

“任何 DateTimeOffset 值在方法将其与 MaxValue 进行比较之前都会转换为协调世界时 (UTC)。这意味着日期和时间接近最大范围但偏移量为负的 DateTimeOffset 值可能会引发异常。对于例如，值 12/31/9999 11:00 PM -02:00 超出范围，因为它在转换为 UTC 时比 MaxValue 晚一小时。”

根据文档（[DateTimeOffset Constructor](http://msdn.microsoft.com/en-us/library/bb337819.aspx)），应用于非 UTC`Kind`的偏移量是“本地系统当前时区的偏移量”。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-22T15:13:33.037

我刚刚遇到了这个问题，由我的团队中位于负 UTC 区域的部分介绍...

chamila_c 发布的是发生这种情况的真正原因，但我需要快速修复。

为了“解决它”，我基本上创建了这个扩展：

```
public static class DateTimeExtensions
{
    public static DateTimeOffset ToDateTimeOffset(this DateTime dateTime)
    {
        return dateTime.ToUniversalTime() <= DateTimeOffset.MinValue.UtcDateTime
                   ? DateTimeOffset.MinValue 
                   : new DateTimeOffset(dateTime);
    }
} 
```

您可能还想检查 MaxValue。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-23T15:47:29.363

如果您处理的数据类型是 DateTime，您应该创建一个 DateTime 对象来指定 Kind。

```
DateTime maxDate = DateTime.SpecifyKind(DateTime.MaxValue, DateTimeKind.UTC); 
```

当它转换为 DateTimeOffset 数据类型时，您将不会收到该错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-02T18:25:50.023

这可能会在 Azure Function 开发期间发生，当您在 function.json 中设置计时器触发器计划使其永远不会运行时，如下所示：

```
{
  "scriptFile": "__init__.py",
  "bindings": [
    {
        "name": "mytimer",
        "type": "timerTrigger",
        "direction": "in",
        "schedule": "0 0 0 31 2 *"
    }
  ]
} 
```

...我已将其设置为在 2 月 31 日运行（即从不。）显然“从不”超出了允许的日期范围。解决方案是不那么棘手，只需在遥远的未来设定一个真实的日期：

```
{
  "scriptFile": "__init__.py",
  "bindings": [
    {
        "name": "mytimer",
        "type": "timerTrigger",
        "direction": "in",
        "schedule": "0 0 0 1 1 * "
    }
  ]
} 
```

（1月1日运行一次，明年才运行。）

再次感谢 Chamila Chulatunga 对问题根源的描述。

# xcode - 如何更改 AVAudioSession 的输入增益？代码

> ID：13799224
> 
> 赞同：2
> 
> 时间：2012-12-10T10:37:03.323
> 
> 标签：xcode, audio, audio-recording, avaudiosession

在使用 AVFoundations 框架中的 AVAudioSession 和 AVAudioRecorder 录制时，我在尝试调整输入增益时遇到了一些问题。我找到了 setInputGain 方法，它接受一个浮点数 [0.0, 1.0]，到目前为止，它看起来像这样：

在我看来DidLoad：

```
 //Initialise the AVAudioSession, and share between different functions
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];
    [audioSession setActive:YES error:nil];
    [audioSession setInputGain:1.0 error:nil]; 
```

但是，setInputGain 方法只会在当前录制的内容之上提供额外的增益，因此将其设置为 0.0 不会使其静音，但将其设置为 1.0 会使输入更响亮。我在 AudioSession 类中找到了一个名为 kAudioSessionProperty_InputGainScalar 的属性，但似乎无法将值写入其中。我需要一点帮助，拜托。

这是录音功能，后面有另一个教程：

```
 //Creating a temporary place to record
    tempRecFile = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent:@"sound.caf"]];
    recorder = [[AVAudioRecorder alloc] initWithURL:tempRecFile
                                           settings:nil
                                              error:nil];
    [recorder setDelegate:self];
    //Setting the input gain for the recording, then proceed to record
    //[audioSession setInputGain:inputGainSlider.value error:nil];
    [recorder prepareToRecord];
    [recorder record];
    [self.inputGainSlider setEnabled:NO]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-18T16:33:06.990

我测试过的所有设备都不允许设置输入增益。我还没有找到来自苹果的官方设备列表......这是我尝试过的设备：iphone 4s iphone 6s ipad pro

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:33:03.027

从官方文档中，我看到以下几行，

讨论

在调用此方法之前，您应该检查 inputGainSettable 属性中的值，以确保可以为当前输入设置输入增益级别。

那么设备是否有可能不支持更改它？

# opencv - 如何使用opencv 2.1.0版本从前景中去除阴影

> ID：13799225
> 
> 赞同：1
> 
> 时间：2012-12-10T10:37:13.370
> 
> 标签：opencv

我一直在测试两种不同的高斯混合 (MOG) 背景减法实现。一个是使用 opncv2.1.0，cvCreateGaussianBGModel + cvUpdateBGStatModel，另一个是使用 opencv 2.4.3，BackgroundSubtractorMOG2 类。

```
Now, 2.4.3 provide a parameter called bShadowDetect, to identify the shadow area by gray   color. But my experience with this implementation is, it does not provide the accuracy of   shadow detection. It varies according to the parameter fTau. The other issue with this   implementation is performance hit. For 640 X 480 resolution video, it is generating below 5   fps, By switching to release mode of project I get improvement upto 7 to 8 FPS.  

The another implementation of MOG is using 2.1.0\. I have configured GaussianBG state   Model 's paramenters and then I am calling cvUpdateBGStatModel each time I receive a new   frame.  

For performance improvement, I have converted my frames to gray frames before I send it   for state update. My best performance till now is using opencv 2.1.0 and which is around 30   FPS for 640 X 480 resolution frames. So, currently I am preferring opencv 2.1.0 version's   MOG for background subtraction. But Here I come to face the issue of shadow removal. Here,   I want to detect only moving object. that is without shadow, and draw a rectangle to   highlight.   

Any help in this context will be grateful. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:54:41.563

我在项目中实现的背景减法代码是我自己的。我没有使用这些内置函数，因为它们中的许多都非常慢。

我所做的是：-

1.  考虑一个像素，如果它的值在大约 15-20 帧左右没有变化，那么该像素对应于背景像素。我们将该像素保存在图像中。我们将这个过程迭代超过 10000 帧以覆盖完整的图像。（使用我们得到了没有前景物体的背景的近似图像）

2.  为了去除背景，我所做的是，我将每个像素的 R、G、B 值与对应于背景图像的像素进行比较。（取像​​素的 R、G、B 值之间差异的平均平方）如果该值小于阈值（您应该使用滑块设置），那么该像素对应于背景，然后我所做的是我拍摄了另一张图像并将对应的像素设为黑色，否则该像素对应到前景对象并将其 RGB 值复制到我们的新图像中。这个过程在所有像素上迭代。（通过这种方式，您可以从前景中移除背景）

3.  要检测阴影，您可以使用滑块根据需要更改阈值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T04:49:00.417

许多最近的阴影检测算法都有一种基于 OpenCV 的替代实现，可提供更高质量的阴影检测：

[http://arma.sourceforge.net/shadows/](http://arma.sourceforge.net/shadows/)

还有一篇相关的[期刊文章](http://arxiv.org/pdf/1304.1233.pdf)，描述了所有已实现的算法及其各种权衡（例如质量与速度）。

# c++ - 我如何使用 C++ 做到这一点

> ID：13799226
> 
> 赞同：0
> 
> 时间：2012-12-10T10:37:17.503
> 
> 标签：c++, string

我有以下代码：

```
int main()
{
    string  adr="bonjour000000";
    int j=adr.length();
    cout<<adr<<"\nLa longueur de ma chaine est "<<j<<".";
    cout<<"\n";

    if(adr.length()>=7){
        //if(how to test if the characters after the 7th character are =0)
        //here begin the 2nd if loop

        for(unsigned int i=0; i<adr.length(); i++)
        {
            cout<<adr[i];
        }

        adr.erase (adr.begin()+7,adr.end());
        cout<<"\n"<<adr;

        //here ends the 2nd if loop
    }

    else{
        cout<<"Error: there is less than 7 characters";
        cout<<"\n"<<adr;
    }
} 
```

我想先测试一下**adr**是否有7个或超过7个字符，然后我想检查第7个字符之后的所有字符是否都是= 0。如果是这种情况，我想把这些0都剪掉，当不，保持**原样**。在我的例子中，我期望这个输出：

```
bonjour000000
La longueur de ma chaine est 13
bonjour000000
bonjour 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:41:16.737

您可以使用它[`std::string::find_first_not_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_not_of)来检查不是“0”的第一个字符。如果在字符串范围内没有这样的字符，则所有字符都是 0。您将在 char #7 之后开始的子字符串上调用它。您可以使用起始位置以及@Luchian Grigore 显示的来调用它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T10:43:47.470

以下：

```
bool condition = (adr.length() > 7) &&
                 (adr.find_first_not_of('0', 7) == std::string::npos); 
```

# java - 在 jframe 运行时添加删除面板

> ID：13799227
> 
> 赞同：4
> 
> 时间：2012-12-10T10:37:20.657
> 
> 标签：java, swing, jframe, jpanel

我正在尝试借助以下代码在摆动窗口 JFrame Container 上添加和删除面板。如果在构造函数中添加了 JPanel 但未添加运行时，则会添加 JPanel。

```
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

class test extends JFrame implements ActionListener {
    test() {
        Container cp = this.getContentPane();
        JButton b1 = new JButton("add");
        JButton b2 = new JButton("remove");
        cp.add(b1);
        cp.add(b2);
        b1.addActionListener(this);
        b2.addActionListener(this);
    }

    public void actionPerformed(ActionEvent ae) {
        if (ae.getActionCommand().equals("add")) {
            panel1 frm = new panel1();
            cp.add(frm);
        }
        if (ae.getActionCommand().equals("remove")) {
            remove(frm);
        }
    }

    public static void main(String args[]) {
        test t1 = new test();
        t1.show(true);
    }
}

class panel1 extends JPanel {
    panel1() {
        JButton b1 = new JButton("ok");
        add(b1);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T10:42:29.783

1.  对于您的概念（在删除或添加`JPanel`到之后`JFrame`）必须调用`validate()`&`repaint()`到[`JFrame`](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

2.  更好的可能是使用[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T08:00:32.667

我正在处理类似的问题，我想在运行时更改面板中包含的面板
经过一些测试，重新测试和很多失败我的伪算法是这样的：

parentPanel ：包含我们要删除的面板
childPanel ：我们想要的面板切换
parentPanelLayout : parentPanel 的布局
editParentLayout() : 每次使用不同的 childPanel 和 NEW parentPanelLayout 构建 parentPanel

```
parentPanel.remove(childPanel); 
editParentLayout();
parentPanel.revalidate();
parentPanel.repaint(); 
```

# javascript - 将淘汰视图模型拆分为多个文件

> ID：13799231
> 
> 赞同：8
> 
> 时间：2012-12-10T10:37:37.247
> 
> 标签：javascript, knockout.js

我的视图模型开始变得非常大，所以我决定将它拆分为多个文件。我已经尝试了许多不同的方法，但没有任何效果。

我的视图模型如下所示：

```
namespace.model = function(constructorParam) {
    var self = this;

    self.param1 = ko.observable(constructorParam.param1);
    self.param2 = ko.observable(privateFunction(constructorParam));

    self.clickEvent = function() {
        // do something with params
        // call some private funcitons
        privateFunction2(self.param2);
    };

    function privateFunction(param) {
        // do some stuff
    }

    function privateFunction2(param) {
        // do some stuff
    }
}; 
```

我需要跨多个文件访问私有函数和可观察参数。我的最终模型应该是这样的：

```
// file 1 
// contains constructor and param initialization + many common private helper funcitons
namespace.model = function(constructorParam) {
    var self = this;

    self.param1 = ko.observable(constructorParam.param1);
    self.param2 = ko.observable(privateFunction(constructorParam));

    function privateFunction(param) {
        // do some stuff
    }

    function privateFunction2(param) {
        // do some stuff
    }
};

// file 2
// contains event hendlers
self.clickEvent = function () {
    // i need to acces properties from namespace.model
    self.param1

    // call some private funcitons
    privateFunction2(self.param2);
};

// view model initialization
ko.applyBindings(new namespace.model(initValues)); 
```

是否有可能通过淘汰赛实现这样的目标？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:35:12.247

最后，我在[这里](https://stackoverflow.com/questions/10289251/adding-a-computed-observable-via-the-prototype-to-a-constructor-function)找到了一种方法。这是一个完整的例子：

```
<div>
    Name: <input data-bind="value: name" type="text" /> <br /> 
    Surname: <input data-bind="value: surname" type="text" /><br />
    Fullname: <span data-bind="text: fullName"></span><br />
    <button data-bind="click: showName">Show Name</button>
</div>

<script>

    Function.prototype.computed = function () {
        this.isComputed = true;
        return this;
    };

    Object.prototype.makeComputeds = function () {
        for (var prop in this) {
            if (this[prop] && this[prop].isComputed) {
                this[prop] = ko.computed(this[prop], this, { deferEvaluation: true });
            }
        }
    };
    // file 1
    var namespace = namespace || {};

    namespace.model = function (params)
    {
        var self = this;

        self.name = ko.observable(params.name);
        self.surname = ko.observable(params.surname);

        self.makeComputeds();
    };

    // file 2
    (function () {
        function showFullName(fullName) {
            alert(fullName);
        }

        ko.utils.extend(namespace.model.prototype, {

            showName: function() {
                showFullName(this.fullName());
            },
            // computed observable
            fullName: function() {
              return this.name() + " " + this.surname();
            }.computed()

        });

    })();

    ko.applyBindings(new namespace.model({ name: "My Name", surname: "My Surname" }));

</script> 
```

**编辑**

有一个名为[Durandal](http://durandaljs.com/)的项目，它结合了 RequireJS 和 KnockoutJS。如果您对 KnockoutJS 的 SPA 架构最佳实践感兴趣，值得一看。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T12:09:34.250

我会看一下像[RequireJS](http://requirejs.org/)这样的库，它可用于将您的视图模型拆分为不同的“模块”，然后将这些模块加载到您的主视图模型中。

Knockout 网站上有一些非常简单的使用 RequireJS 和 Knockout 的[示例](http://knockoutjs.com/documentation/amd-loading.html)。

[在此处查看](http://www.johnpapa.net/spapost7/#comment-1171)John Papa 关于构建单页应用程序的一些非常有用的帖子。

# php - php 在已解析的 doc 文件上的空格处拆分字符串

> ID：13799234
> 
> 赞同：1
> 
> 时间：2012-12-10T10:37:45.490
> 
> 标签：php, string, split, space

我已将 doc 文件解析为字符串。

```
function parseWord($userDoc) 
{
$fileHandle = fopen($userDoc, "r");
$word_text = @fread($fileHandle, filesize($userDoc));
$line = "";
$tam = filesize($userDoc);
$nulos = 0;
$caracteres = 0;
for($i=1536; $i<$tam; $i++)
{
    $line .= $word_text[$i];

    if( $word_text[$i] == 0)
    {
        $nulos++;
    }
    else
    {
        $nulos=0;
        $caracteres++;
    }

    if( $nulos>1996)
    {   
        break;  
    }
}

//echo $caracteres;

$lines = explode(chr(0x0D),$line);
//$outtext = "<pre>";

$outtext = "";
foreach($lines as $thisline)
{
    $tam = strlen($thisline);
    if( !$tam )
    {
        continue;
    }

    $new_line = ""; 
    for($i=0; $i<$tam; $i++)
    {
        $onechar = $thisline[$i];
        if( $onechar > chr(240) )
        {
            continue;
        }

        if( $onechar >= chr(0x20) )
        {
            $caracteres++;
            $new_line .= $onechar;
        }

        if( $onechar == chr(0x14) )
        {
            $new_line .= "</a>";
        }

        if( $onechar == chr(0x07) )
        {
            $new_line .= "\t";
            if( isset($thisline[$i+1]) )
            {
                if( $thisline[$i+1] == chr(0x07) )
                {
                    $new_line .= "\n";
                }
            }
        }
    }
    //troca por hiperlink
    $new_line = str_replace("HYPERLINK" ,"<a href=",$new_line); 
    $new_line = str_replace("\o" ,">",$new_line); 
    $new_line .= "\n";

    //link de imagens
    $new_line = str_replace("INCLUDEPICTURE" ,"<br><img src=",$new_line); 
    $new_line = str_replace("\*" ,"><br>",$new_line); 
    $new_line = str_replace("MERGEFORMATINET" ,"",$new_line); 

    $outtext .= nl2br($new_line);
}

return $outtext;
} 

$text = parseWord($userDoc); 
```

但是现在我需要在每个空格之后拆分我的字符串，因为我想在我的数据库中发布每个单词以供搜索机使用。有人可以帮助我吗？

有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:40:43.977

如果您按空格分割，您将获得包含在每个单词中的标点符号。相反，使用带有**1**作为第二个参数的[str_word_count() 。](http://www.php.net/manual/en/function.str-word-count.php)这将返回所有单词的列表，没有任何标点符号

# c# - 从 C# 优雅地关闭 Excel 应用程序

> ID：13799246
> 
> 赞同：0
> 
> 时间：2012-12-10T10:38:27.527
> 
> 标签：c#, winforms, office-interop, excel-interop

我正在从 C# 中的应用程序生成 Excel 报告。我想打开 Excel 文件供用户查看，以后可能会对其进行修改。

但是，当用户关闭 Excel 应用程序时，该进程`EXCEL.EXE`仍然作为进程运行，并且可以在 TaskManager 中看到。

我在看论坛，似乎我们需要通过 `ReleaseComObject(object)`.

但是，我不想以编程方式关闭所有对象，而是想将此控制权交给用户。那么，当用户关闭 Excel 文件时，我是否可以关闭或释放 Excel 引用的所有对象。

任何解决这个方向问题的建议/指示都会对我有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:38:21.093

一种方法是在打开工作簿后立即释放所有句柄，就像在这个[答案](https://stackoverflow.com/a/8978880/850119)中一样。

另一种是使用[System.Diagnostics.Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)方法并打开您生成的文件。可以在[此处](http://www.dotnetperls.com/process-start)找到有关如何使用 Process.Start 打开 Word 文档的快速示例。

# json - 如何将文本框中的文本转换为json格式

> ID：13799248
> 
> 赞同：0
> 
> 时间：2012-12-10T10:38:32.527
> 
> 标签：json, web, jsonp

这是我的代码。

```
<body>
your First Name: <input id="first_name" name="first_name" type="text" />
your Last Name: <input id="last_name" name="last_name" type="text" />
<input name="myBtn" type="submit" value="Submit Data" onClick="??????">
</body> 
```

如您所见，它只有两个文本框和一个提交按钮。我想要做的是我希望用户能够输入他们的姓名，当单击按钮时，它将文本转换为 json 格式并在按钮下方显示结果以显示其工作。你能改变我的代码来做这件事吗，或者给我一个链接，帮助我自己做，干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:29:22.663

您可以使用 json.js 库（来源：https://github.com/douglascrockford/JSON-js）

```
<script src="//cdnjs.cloudflare.com/ajax/libs/json2/20121008/json2.js"></script>
<form>
<label for="first_name">your First Name: </label>
    <input id="first_name" name="first_name" type="text" />

    <label for="last_name">your Last Name: </label>
    <input id="last_name" name="last_name" type="text" />

    <input name="myBtn" id="myBtn" type="button" value="Submit Data" />
</form>​​​​​​​​​​​​​​

    <script>
$('#myBtn').click(function() {
    var form_data = {
        'first_name': $('#first_name').val(),
        'last_name': $('#last_name').val()
    };

    var json_text = JSON.stringify(form_data, null, 2);

    $('#myBtn').after('<pre>' + json_text + '</pre>');

});​
    </script> 
```

现场查看：http: [//jsfiddle.net/jcalonso/HDWjf/](http://jsfiddle.net/jcalonso/HDWjf/)

# android - 在 GCM android 中接收推送通知错误

> ID：13799254
> 
> 赞同：0
> 
> 时间：2012-12-10T10:38:57.640
> 
> 标签：android, push-notification, google-cloud-messaging

我在我的 android 应用程序中使用 GCM 服务。

1.  在 Google API 控制台注册，获得 projectID(senderID) 和 API key(Browser key)。

2.  使用以下代码创建了新应用程序。

客户端代码：
MainActivity

```
GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, senderID);
        } else {
          Log.v(TAG, "Already registered");
        } 
```

GCMIntentService 代码：

```
 public class GCMIntentService extends GCMBaseIntentService {

    private static final String TAG = "GCMIntentService";

    public GCMIntentService() {
        super(SENDER_ID);
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        displayMessage(context, getString(R.string.gcm_registered));

    }
   @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        displayMessage(context, getString(R.string.gcm_unregistered));

    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String message = getString(R.string.gcm_message);
        displayMessage(context, message);
        generateNotification(context, message);
    }

    @Override
    protected void onDeletedMessages(Context context, int total) {
        Log.i(TAG, "Received deleted messages notification");
        String message = getString(R.string.gcm_deleted, total);
       displayMessage(context, message);
       generateNotification(context, message);
    }

    @Override
    public void onError(Context context, String errorId) {
        Log.i(TAG, "Received error: " + errorId);
        displayMessage(context, getString(R.string.gcm_error, errorId));
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        // log message
        Log.i(TAG, "Received recoverable error: " + errorId);
       displayMessage(context, getString(R.string.gcm_recoverable_error,
                errorId));
        return super.onRecoverableError(context, errorId);
    }

    static void displayMessage(Context context, String message) {
        Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
        intent.putExtra(EXTRA_MESSAGE, message);
        context.sendBroadcast(intent);
    }

        static final String EXTRA_MESSAGE = "message";
        static final String DISPLAY_MESSAGE_ACTION =
            "com.google.android.gcm.demo.app.DISPLAY_MESSAGE";

    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context, MainActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    } 
```

清单文件：

```
 <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="16"  />
        <uses-permission android:name="android.permission.INTERNET"/>

        <permission android:name="com.example.samplegcm.permission.C2D_MESSAGE"            
            android:protectionLevel="signature" />
        <uses-permission android:name="com.example.samplegcm.permission.C2D_MESSAGE" /> 
        <!-- App receives GCM messages. -->
        <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- GCM requires a Google account. -->
        <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
        <uses-permission android:name="android.permission.WAKE_LOCK" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" 
                android:permission="com.google.android.c2dm.permission.SEND" >
              <intent-filter>
               <action android:name="com.google.android.c2dm.intent.RECEIVE" />
               <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
               <category android:name="com.example.samplegcm" />
              </intent-filter>
            </receiver>

           <service android:name=".GCMIntentService" /> 
        </application> 
```

3.将gcm.jar添加到libs文件夹中。执行成功，得到了registerId。

4.为服务器端创建了另一个新应用程序。

5.将gcm-server.jar文件添加到libs文件夹。

服务器端代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gcmserver);
        regID = (EditText)findViewById(R.id.editText1);
        data1 =(EditText)findViewById(R.id.editText3);
        data2 =(EditText)findViewById(R.id.editText4);
        btn1 = (Button)findViewById(R.id.button1);
        btn1.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    sendmessage2Device(v, regID.toString(), data1.getText().toString(), data2.getText().toString());

                }
            });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_gcmserver, menu);
        return true;
    }
    public void sendmessage2Device(View v,String regisID,String msg1,String msg2) {

            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(
                    "https://android.googleapis.com/gcm/send");

            try {

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
                nameValuePairs.add(new     BasicNameValuePair("registration_id",regisID));

                nameValuePairs.add(new BasicNameValuePair("data1",msg1));
                nameValuePairs.add(new BasicNameValuePair("data2", msg2));

        post.setHeader("Authorization","key=AIzaxxxxxxxxxxxxxxxxxxxxxxx134");
                post.setHeader("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");

            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = client.execute(post);
                InputStreamReader inputst = new InputStreamReader(response.getEntity().getContent());
                BufferedReader rd = new BufferedReader(inputst);

                String line = "";
                while ((line = rd.readLine()) != null) {
                    Log.e("HttpResponse", line);

                        String s = line.substring(0);
                        Log.i("GCM response",s);
                }

            } catch (IOException e) {
                e.printStackTrace();
            } 
```

这些是我使用的 GCM 的步骤和代码。问题是当我执行服务器端代码时。我没有收到来自服务器的通知，也没有像这样获得 logcat（服务器端）：

```
12-10 15:09:40.371: I/global(945): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
12-10 15:09:40.381: E/HttpResponse(945): id=0:1355132381549743%77148e76f9fd7 
```

我不知道这里有什么问题。我在客户端或服务器端做错了吗？

# c# - PagedList ViewModel 实现

> ID：13799255
> 
> 赞同：1
> 
> 时间：2012-12-10T10:38:58.860
> 
> 标签：c#, asp.net-mvc, pagedlist

我试图找出在 asp.net MVC 中使用 ViewModel 实现 pagedlist 的正确方法。

假设我有以下 PagedClientViewModel：

```
public class PagedClientViewModel
{
    public PagedList.IPagedList<ClientViewModel> Clients { get; set; }
}

public class ClientViewModel
{
    public string ClientNumber { get; set; }
    public string ClientName { get; set; }       
} 
```

我的观点将引用模型如下：

```
@model PagedClientViewModel 
```

并且操作方法看起来像这样：

```
 public ActionResult Index(int? page)
    {
        var pageNumber = page ?? 1;

        var clients = GetAllClients();

        var onePageOfClients = clients.ToPagedList(pageNumber, 25);

        PagedClientViewModel model = new PagedClientViewModel();

        var clientViewModels = new List<ClientViewModel>();

        foreach (var client in clients)
        {
            ClientViewModel clientVM = new ClientViewModel
            {
                ClientName = client.CLIENTNAME,
                ClientNumber = client.CLIENTNO,         
            };
            clientViewModels.Add(clientVM);
        }                    

        model.Clients = //how do I add the clientViewModels to the PagedList<ClientViewModel>?

        return View(model);
    } 
```

在创建视图模型时，我不想从数据库中迭代整个客户端记录列表 - 我是否通过使用包含分页列表的视图模型使事情变得过于复杂？我不想使用 ViewBag！

我的 ViewModel 应该是什么样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:02:15.980

通过使用答案的组合，它可以很好地工作：

```
 public ActionResult Index(PagedClientViewModel model)
    {
        var pageIndex = model.Page ?? 1;
        var clients = from client in GetAllClients() orderby client.CLIENTNUMBER
                      select new ClientViewModel
                          {
                              ClientName = client.CLIENTNAME,
                              ClientNumber = client.CLIENTNO

                          };        

        model.Clients = clients.ToPagedList(pageIndex, 25);

        return View(model);
    }

public class PagedClientViewModel
{
    public int? Page { get; set; }
    public PagedList.IPagedList<ClientViewModel> Clients { get; set; }
}

public class ClientViewModel
{
    public string ClientNumber { get; set; }
    public string ClientName { get; set; }       
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T14:55:19.680

您应该更改调用以检索数据以包含页面参数并在数据库中进行过滤。这样，您只需要从数据库中返回您需要的数据。

```
var clients = GetClients(page); 
```

此外，如果您不想遍历返回的客户端（您似乎不需要在这里），只需将返回的列表直接设置为您的 ViewModel。像这样的东西会起作用。确保更新 ViewModel，以便`model.Clients`正确键入。

```
var clients = GetClients(page);

model.Clients = clients; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T15:44:53.950

我会把它简化成这样：

```
public IEnumerable<ClientViewModel> Clients { get; set; } 
```

和

```
model.Clients = from client in GetAllClients().Skip(pageNumber * PageSize).Take(PageSize)
                       select new ClientViewModel
                       {
                           ClientName = client.CLIENTNAME,
                           ClientNumber = client.CLIENTNO,  
                       }; 
```

# performance - Tomcat Spring - 在本地工作空间中创建 Spring Webapplication 上下文需要 8 分钟

> ID：13799259
> 
> 赞同：1
> 
> 时间：2012-12-10T10:39:06.163
> 
> 标签：performance, spring, tomcat

我的 Tomcat 服务器遇到了一个特殊的问题。问题是我的 Web 应用程序上下文需要大约 8 分钟才能为单个启动创建。

通常对我的团队来说似乎正在发生的事情是第一次启动在大约 10 分钟内完成，随后的重新启动只需要大约 2 到 3 分钟。然而，我所有的启动都需要 8 - 9 分钟。

这是正在使用的 Tomcat 的自定义版本，因此我没有 version.sh 文件来实际确定正在使用的 tomcat 版本。我们使用的是 Spring 2.5 版本

****** *** ** *** ** *** ** *** ** *** ** *** ***来自日志的跟踪 来自日志的跟踪 DEBUG 2012-12-10 15:24:36,377 | --> 创建WebApplicationContext**

 **调试 2012-12-10 15:33:54,953 ... 日志继续

* * *

上面的日志显示了近 9 分钟来创建 Web 应用程序上下文

根据我的分析，有两种可能发生这种情况。

1.  我的系统内存真的太低了_；但是这不可能，因为我使用的是 3 GB RAM 并且有足够的内存。

2.  Tomcat 中有一些属性需要更改以启动更快的启动。

    如果有人可以给我一些关于为什么会发生这种情况的想法，那就太好了，这样我就可以开始对此进行更多调查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T04:34:55.393

增加catalina.sh中的内存

`JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1536m -Xmx1536m -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m -XX:MaxPermSize=256m -XX:+DisableExplicitGC"`**

# exception - PowerShell 运行时异常 - “无法加载文件或程序集”

> ID：13799260
> 
> 赞同：13
> 
> 时间：2012-12-10T10:39:09.510
> 
> 标签：exception, powershell, winscp, winscp-net

这似乎是 PowerShell 和 Visual Studio 中的常见问题，但案例和解决方案似乎差异很大。尽管看到了几个类似的问题，但我还没有为我的问题找到可行的解决方案。

错误信息中存在问题

> 无法加载文件或程序集 'file:///C:\users\jenstmar\Desktop\WinSCP.dll' 或其依赖项之一。不支持操作。（来自 HRESULT 的异常：0x80131515）

文件位置无效，因为 .dll 应该位于与[WinSCP](https://en.wikipedia.org/wiki/WinSCP)安装相同的文件夹中。此位置已更改以检查是否没有权利或缺乏权利，限制我使用它。

导致问题的脚本行如下所示：

```
# Load WinSCP .NET assembly
[Reflection.Assembly]::LoadFrom("C:\users\jenstmar\Desktop\WinSCP.dll") | Out-Null 
```

此错误出现在[PowerShell ISE](https://technet.microsoft.com/en-us/library/dd315244.aspx)和 PS ISE(x86) 中。我以本地管理员身份在 Windows Enterprise 64 位环境中运行 PowerShell V3.0。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T16:11:51.813

该文件可能因其来源（存储在[NTFS 流中](https://en.wikipedia.org/wiki/NTFS#Alternate_data_streams_.28ADS.29)）而被阻止加载。检查属性，看看小解锁按钮是否亮起。一旦您取消阻止它，它可能会加载...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-13T09:18:40.290

这种情况下的解决方案：删除并重新下载。我什至在第一个文件上解锁了它，没有任何帮助。很高兴这是在内部机器上。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-20T22:41:11.737

以下对我有用（来自 Stack Overflow 问题*[Add-Type load assembly from network UNC share error 0x80131515](https://stackoverflow.com/questions/19957161/add-type-load-assembly-from-network-unc-share-error-0x80131515/19957173#19957173)*）。

在文件中：

C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe.config C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
   <runtime>
      <loadFromRemoteSources enabled="true"/>
   </runtime>
</configuration> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-25T09:46:42.540

```
Import-Module : Could not load file or assembly 'file:/// *dll path*' or one of 
its dependencies. An attempt was made to load a program with an incorrect format.
At *script path*.ps1:68 char:2
+     Import-Module *module path*
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Import-Module], BadImageFormatException
    + FullyQualifiedErrorId : System.BadImageFormatException,Microsoft.PowerShell.Commands.ImportModuleCommand 
```

如果您看到上述错误，则可能是在 32 位模式（Windows PowerShell ISE(x86)）下运行 Windows PowerShell ISE 的问题。您必须运行应用程序*Windows PowerShell ISE*。

此应用程序 (Windows PowerShell ISE) 处于 64 位模式。当我执行 power shell 命令时，它对我来说工作正常。

我一直在尝试用不同类型的解决方案来解决这个问题，但它对我不起作用。如果您运行它 32 模式，请将其切换到 64 位并尝试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T16:34:44.290

我会在 ILDASM 或 dotPeek 中查看 WinSCP.dll 依赖项，然后在加载 WinSCP.dll 之前加载这些依赖项。问题是您在 PowerShell.exe（或 powershell_ise.exe）融合加载上下文中运行，并且在这两个 exe 的基本目录下找不到 WinSCP.dll 的程序集。因此，您需要在 CLR 加载程序阻塞之前加载依赖程序集，因为它找不到所需的 DLL。如果您需要帮助确定找不到哪个程序集，请查看 fuslogvw.exe 工具。

顺便说一句，从 PowerShell v2 开始，您应该使用`Add-Type -Path <path>`而不是 [SRA]::LoadFrom(...)。

# xpath - 在 Xpath 表达式中使用 count

> ID：13799263
> 
> 赞同：2
> 
> 时间：2012-12-10T10:39:22.760
> 
> 标签：xpath

如果我有这样的 XML：（只是举个例子）

```
<restaurant>
    <tables>
            <table id=1 />
            <table id=2 />
            <table id=3 />
    </tables> 
```

而且我必须计算表的数量，正确的 Xpath 表达式是：

```
restaurant/tables/count(table) 
```

或者

```
count(restaurant/tables/table) 
```

?

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:42:23.030

查看[此 Microsoft XPath count() 教程](http://msdn.microsoft.com/en-us/library/ms256103.aspx)。

```
count(/restaurant/tables/table) 
```

将计算上述路径中的表格元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:36:05.373

```
restaurant/tables/count(table) 
```

这个表达式只在 XPath 2.0 中是合法的。它产生一个数字序列，如果 XML 文档有多个`restorant`或`restorant/tables`元素，则该序列的长度可能大于一个。

```
count(restaurant/tables/table) 
```

此表达式在 XPath 1.0 和 XPath 2.0 中都有效。它产生一个数字。

因此，一般来说，这两个表达式是不同的，只有第二个在 XPath 1.0 中是合法的，而在 XPath 2.0 中，这些表达式可能会产生不同的结果，具体取决于评估它们的 XML 文档。

但是在指定的 XML 文档上，这两个表达式（在 XPath 2.0 中计算时）产生相同的结果：

```
3 
```

# java - 为什么我的断线不起作用它似乎是正确的

> ID：13799270
> 
> 赞同：1
> 
> 时间：2012-12-10T10:40:04.050
> 
> 标签：java, string, for-loop, jlabel

我使用简单的方法将其写入临时字符串，然后将其放入 JLabel 中，因为它不会生成断线。我在显示按钮时遇到问题，它不显示任何内容。

```
public String printBestillingsordre(){
        JButton button = new JButton("Varemodtaget");

        for(HentbestillingsordreRegistrer hentboregistrer: hbor){
        if(status == "Leveret"){    

        temp += "Ordre Status: " + hentboregistrer.BestillingsStatus+" \n " +
        "LeverandoerID: "+ hentboregistrer.LeverandoerID+" \n ";

        }else{
            temp += hentboregistrer.BestillingsStatus+ button + "\n" + 
                    "LeverandoerID: "+ hentboregistrer.LeverandoerID+"\n";
        }
        System.out.println(temp);

    }
        return temp;
} 
```

我叫它的地方，它看起来像这样

```
hboh.Hentbestillingsordre();
        hboh.printBestillingsordre();
        tilbagetilhovedmenu = new JButton("HovedMenu");
        add(tilbagetilhovedmenu, BorderLayout.NORTH);
        JPanel test = hboh.HentOrdreGUI();
        add(test, BorderLayout.CENTER);
        Handler handler = new Handler();
        tilbagetilhovedmenu.addActionListener(handler); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:58:16.587

首先我看不到你在哪里声明你的临时字符串，然后

我会在您的代码中更改两件事：

1）使用字符串生成器 2）使用 equalsIgnoreCase 3）检查你在`button`字符串连接中做了什么，因为它没有多大意义

```
 public String printBestillingsordre(){

        StringBuilder temp = new StringBuilder();
        JButton button = new JButton("Varemodtaget");

        for(HentbestillingsordreRegistrer hentboregistrer: hbor){
        if(status.equalsIgnoreCase("Leveret"){    
            temp.append("<html>");
            temp.append("Ordre Status: ");
            temp.append(hentboregistrer.BestillingsStatus);
            temp.append("<br>");
            temp.append("LeverandoerID: ");
            temp.append(hentboregistrer.LeverandoerID);
            temp.append("<br>");
            temp.append("</html>");

        }else{
            temp.append("<html>");
            temp.append(hentboregistrer.BestillingsStatus);
            temp.append(button);     // whatever you're trying to append from button
            temp.append("<br>");
            temp.append("LeverandoerID: ");
            temp.append(hentboregistrer.LeverandoerID);
            temp.append("<br>");
            temp.append("</html>");
        }
        System.out.println(temp.toSTring());

    }
        return temp.toSTring();
} 
```

编辑：

解决方法 1（在我的示例中使用）：您可以考虑添加`<html></html>`标签（添加到开头和结尾），并且每次需要换行符时使用`<br>`标签

解决方法 2：使用`SwingX Label`：

```
XLabel label = new JXLabel();
label.setLineWrap(true); 
```

请记住，如果您正在开发多线程应用程序，请考虑使用 StringBuffer，因为它与踏板同步。有关更多信息，请查看[此](https://stackoverflow.com/questions/3786023/multithreading-stringbuffer-and-stringbuilder)问题

# mvvm - MVVM-Light：我们应该把 Messenger 的寄存器放在哪里

> ID：13799271
> 
> 赞同：1
> 
> 时间：2012-12-10T10:40:08.397
> 
> 标签：mvvm, mvvm-light, mvvm-toolkit

关于使用mvvmlight v4的Messenger，我有一个问题：我们应该把Messenger的寄存器放在哪里？我找了一些例子，他们把它们放在构造函数的视图中。但是我遇到了一个问题，每当我们创建视图实例时，都会再次注册此消息-> 消息处理程序将被调用为相同数量的已注册消息。

如：我注册一条消息，如：

```
Messenger.Default.Register<NotificationMessage>(this, (nm) =>
    {
        if (nm.Sender == this.DataContext)
        {
           if (nm.Notification == "OnNext")
           {
               this.Hide();
               Form2 f2= new Form2();
               f2.Show();
           }
        }
    } 
```

--> 每次，第一次用户单击下一步，出现 1 个表单，但是当用户再次单击下一步时，这一次，注册了 2 条消息并出现了 2 个表单。我该如何处理这种情况？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:34:17.033

视图的构造函数似乎是放置 Messenger 寄存器的好地方。可以把unregister放到`Cleanup()`函数里面（必须实现`ICleanup`接口）

```
public class MainWindow : ICleanup
{
    public MainWindow()
    {
        InitializeComponent();

        Messenger.Default.Register(recipient, action);
    }

    public void Cleanup()
    {
        Messenger.Default.Unregister(recipient, action);
    }
} 
```

# android - 我可以分别向 Apple/Google 发送一条通知消息来通知许多设备吗？

> ID：13799272
> 
> 赞同：0
> 
> 时间：2012-12-10T10:40:08.607
> 
> 标签：android, iphone, push-notification, apple-push-notifications, google-cloud-messaging

我目前正在使用 PushSharp 库。我只是想确保 Google GCM 和 Apple APNS 是否支持将我的应用程序的推送通知请求发送到许多设备，或者我需要为每个设备手动发送推送通知请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:57:05.780

对于 GCM，您向 Google 的网络服务发送请求，并在请求中包含一组设备 ID。（如果我没记错的话，每个请求最多有 1000 个 ID）

对于 APNS，您打开与推送服务器的流连接，并在将 ID 写入流时遍历所有 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:51:13.567

对于 GCM，您只发送一条消息以及代表您希望接收消息的设备的注册 ID（设备标识符）列表。因此，这很像向许多人发送一封电子邮件，它会发送一次到服务器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T10:47:34.140

不知道GCM。但是您需要查看 iOS 的 APNS 服务文档

[https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)

# solaris - 是否可以强制 GNU libtool 使用 Solaris CC 编译器而不是 GCC？

> ID：13799276
> 
> 赞同：0
> 
> 时间：2012-12-10T10:40:12.110
> 
> 标签：solaris, libcurl, libtool

我很好奇是否可以强制 GNU libtool 使用 Solaris CC 编译器而不是 GCC？如果是这样，那该怎么做？

这是 libpcre 7.28.1 的 libtool 构建脚本，它是我昨晚在 Solaris UNIX 上运行的 SMTP、TCP/IP 等开源库。

```
Making all in lib
make[1]: Entering directory `/net/beige/export/marc/DQT/EmailLib/curl-7.28.1/lib'
make  all-am
make[2]: Entering directory `/net/beige/export/marc/DQT/EmailLib/curl-7.28.1/lib'
if /bin/bash     -DHAVE_CONFIG_H   -I../include/curl -I../include -I../include -I../lib -I../lib     -O2 -Wno-system-headers  -MT libcurl_la-file.lo -MD -MP -MF ".deps/libcurl_la-file.Tpo" -c -o libcurl_la-file.lo `test -f 'file.c' || echo './'`file.c; \
then mv -f ".deps/libcurl_la-file.Tpo" ".deps/libcurl_la-file.Plo"; else rm -f ".deps/libcurl_la-file.Tpo"; exit 1; fi
libtool: compile:  gcc -DHAVE_CONFIG_H -I../include/curl -I../include -I../include -I../lib -I../lib -O2 -Wno-system-headers -MT libcurl_la-file.lo -MD -MP -MF .deps/libcurl_la-file.Tpo -c file.c  -fPIC -DPIC -o .libs/libcurl_la-file.o
libtool: compile:  gcc -DHAVE_CONFIG_H -I../include/curl -I../include -I../include -I../lib -I../lib -O2 -Wno-system-headers -MT libcurl_la-file.lo -MD -MP -MF .deps/libcurl_la-file.Tpo -c file.c -o libcurl_la-file.o >/dev/null 2>&1
if /bin/bash ../libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H   -I../include/curl -I../include -I../include -I../lib -I../lib     -O2 -Wno-system-headers  -MT libcurl_la-timeval.lo -MD -MP -MF ".deps/libcurl_la-timeval.Tpo" -c -o libcurl_la-timeval.lo `test -f 'timeval.c' || echo './'`timeval.c; \
then mv -f ".deps/libcurl_la-timeval.Tpo" ".deps/libcurl_la-timeval.Plo"; else rm -f ".deps/libcurl_la-timeval.Tpo"; exit 1; fi
libtool: compile:  gcc -DHAVE_CONFIG_H -I../include/curl -I../include -I../include -I../lib -I../lib -O2 -Wno-system-headers -MT libcurl_la-timeval.lo -MD -MP -MF .deps/libcurl_la-timeval.Tpo -c timeval.c  -fPIC -DPIC -o .libs/libcurl_la-timeval.o
libtool: compile:  gcc -DHAVE_CONFIG_H -I../include/curl -I../include -I../include -I../lib -I../lib -O2 -Wno-system-headers -MT libcurl_la-timeval.lo -MD -MP -MF .deps/libcurl_la-timeval.Tpo -c timeval.c -o libcurl_la-timeval.o >/dev/null 2>&1 
```

--------------------------在 Solaris Unix 上 libpcre make CC=cc---------------- -----

```
$ make CC=cc
Making all in lib
make[1]: Entering directory `/net/beige/export/marc/DQT/EmailLib/curl-7.28.1/lib'
make  all-am
make[2]: Entering directory `/net/beige/export/marc/DQT/EmailLib/curl-7.28.1/lib'
if /bin/bash ../libtool --tag=CC --mode=compile cc -DHAVE_CONFIG_H   -I../include/curl -I../include -I../include -I../lib -I../lib     -O2 -Wno-system-headers -MT libcurl_la-file.lo -MD -MP -MF ".deps/libcurl_la-file.Tpo" -c -o libcurl_la-file.lo `test -f 'file.c' || echo './'`file.c; \
then mv -f ".deps/libcurl_la-file.Tpo" ".deps/libcurl_la-file.Plo"; else rm -f ".deps/libcurl_la-file.Tpo"; exit 1; fi
libtool: compile:  cc -DHAVE_CONFIG_H -I../include/curl -I../include -I../include -I../lib -I../lib -O2 -Wno-system-headers -MT libcurl_la-file.lo -MD -MP -MF .deps/libcurl_la-file.Tpo -c file.c  -fPIC -DPIC -o .libs/libcurl_la-file.o
cc: Warning: option -2 passed to ld
cc: illegal option -Wno-system-headers
make[2]: *** [libcurl_la-file.lo] Error 1
make[2]: Leaving directory `/net/beige/export/marc/DQT/EmailLib/curl-7.28.1/lib'

make[1]: *** [all] Error 2
make[1]: Leaving directory `/net/beige/export/marc/DQT/EmailLib/curl-7.28.1/lib'

make: *** [all-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:23:33.463

“./configure CC=cc”不够吗？

由于 gcc 和 cc 会完全不同，我认为在配置时间之后更改编译器可能更容易出错，但您也可以尝试：

“使抄送=抄送”

# php - 循环遍历 div 并使用 simplehtmldom 提取文本

> ID：13799278
> 
> 赞同：0
> 
> 时间：2012-12-10T10:40:15.977
> 
> 标签：php, web-scraping, simple-html-dom

我正在使用 simplehtmldom 从站点中获取 html。然后我搜索页面上的所有 div 并显示字数大于 300 的内部文本。为此，我使用 foreach 进行迭代。

```
$findDivs = $html->find('div');

foreach($findDivs as $findDiv) {
  $wordCount = explode(' ', $findDiv->outertext);
  $wordCount = count($wordCount);
  if($wordCount <= 300) {
    $findDiv->outertext = '';
   }
   else {
     echo $findDiv->outertext . '<br />';
  }
} 
```

我遇到的问题是结果重复了 6 次。我只能假设这是因为每次迭代都会循环所有 div。但是，我不确定我可以使用什么技术来确保每个 div 只评估一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:47:17.593

你想要`innertext`但你的代码状态`outertext`- 我认为这是重复的原因。

```
foreach($html->find('div') as $findDiv) {
  $wordCount = explode(' ', $findDiv->innertext);
  $wordCount = count($wordCount);
  if($wordCount > 300) {
    echo $findDiv->outertext . '<br />';
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:25:55.890

我不知道为什么，但这解决了我的问题。

我在 $html->find('div',1); 中添加了 '1' 参数

所以工作代码看起来像：

```
$findDivs = $html->find('div',1);  //add a 1 to the divs. this works as the script now only loops once.

foreach($findDivs as $findDiv) {
  $wordCount = explode(' ', $findDiv->outertext);
  $wordCount = count($wordCount);
  if($wordCount <= 300) {
    $findDiv->outertext = '';
   }
   else {
     echo $findDiv->outertext . '<br />';
  }
} 
```

# asp.net - SQL：生成非自动生成的主键值，并且数据类型为 char/nchar

> ID：13799281
> 
> 赞同：0
> 
> 时间：2012-12-10T10:40:29.620
> 
> 标签：asp.net, sql, sql-server-2008, primary-key

我想使用 asp.net 网络表单将一些数据输入到表格中。我没有让用户 UI 输入数据进入的表中所需的主键列的值。该表具有不会自动生成值的主键列 (char)。

每次用户填写表格时，我如何才能生成唯一值？

第二次输入数据时，如何检查它确实是唯一的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:18:30.897

如果您不想使用 DateTime，一个简单的方法是使用 Java 的 Random 函数生成随机数并将其存储为主键。要检查随机数是否没有重复，将该数字与已存储的所有随机数进行比较在您的表中作为主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:59:43.457

在你的 SQL 中创建一个函数来完成这个任务。正如评论所说，这不是应该做的，而是尝试使用 sql 中的 GUID() 函数生成唯一键，然后从中取出 20 个字符......

未经测试，它将如下所示：

```
CREATE FUNCTION fn_GenerateKey
()
RETURNS CHAR(20)
AS
BEGIN

DECLARE @test CHAR (36) 

-- NEWID() will generate a 36 character unique key.
SET @test = NEWID()

-- take the 20 first
SET @test = SUBSTRING(NEWID(),1,20)

--compare @test to the keys already existings to check if you can use it

--Then return @test as the new Key

END
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:10:39.393

您可以使用不同的日期时间格式来创建唯一键。日期时间将永远不会重复。

# javascript - 使用 jQuery 时声明函数是否有特殊语法？

> ID：13799288
> 
> 赞同：1
> 
> 时间：2012-12-10T10:41:05.660
> 
> 标签：javascript, jquery, function

我找不到任何关于此的参考，我看到了许多不同的方法。有人告诉我，如果你在项目中使用 jquery，你应该使用“特殊”语法来定义你的函数。

他告诉我的是这样的：

```
$.functionName = function (var1, var2){
       //your code
}; 
```

并像这样使用它：

```
$.functionName("Test", "Test"); 
```

但后来我开始寻找使用 jQuery 时定义函数的指南或最佳实践。我发现了这个：[jquery4u.com](http://www.jquery4u.com/jquery-functions/5-ways-declare-functions-jquery/#.T9HQh7Xhe2Y)

我认为上面的示例可能是具有“自定义”命名空间的函数？我不知道。

无论如何，我的问题是：当您使用 jQuery 时，是否有定义函数的指南/最佳实践？（以及有什么（缺点）优点）

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:49:26.933

在您的项目中使用 jQuery 并不意味着您应该更改您在项目中使用的 Javascript 的所有内容。jQuery 是一个库，它不是一个框架。

常规函数应该以普通方式定义：

```
function functionName(var1, var2){
  //your code
}; 
```

您可能会考虑将函数放在对象中以保持全局范围尽可能干净，但是将每个函数放在 jQuery 对象中使用`$.functionName=...`并不比将它们放在全局范围中更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:17:34.373

对于定义函数不是必须使用 jQuery。只需以旧方式定义一个函数：

```
function myCoolFunc() {
    // your code here
} 
```

现在，jQuery 只是一个对象（命名为`$`）......所以，如果你有这个：

```
var myObj = {}
myObj.myCoolFunc = function() {
    //your code here
}
myObj.myCoolFunc(); 
```

或者如果你有这个：

```
// include jQuery <script ...
$.myCoolFunc = function() {
    // your code here
}
$.myCoolFunc(); 
```

是一样的..唯一的区别是，在第一种情况下，您拥有对象`myCoolFunc`的属性`myObj`，在第二种情况下，您拥有`myCoolFunc`jQuery 对象（`$`或`jQuery`）的属性。

**是什么`$.fn`？**

`$.fn`是 jquery 对象的原型。

要拥有这个：

```
$.fn.myCoolFunc = function() {
    // your code here
} 
```

和以前的案例不一样。在这种情况下，您为 jquery 实例声明一个公共方法。要调用这个，你必须这样做：

```
$('div').myCoolFunc();
// and not $.myCoolFunc(); 
```

在这种情况下，为 DOM 中的每个 div 调用该函数。在函数内部，您拥有作为`this`DOM 元素的范围 ()。

最后，在某些情况下，在 jQuery 对象（如命名空间）中插入一个函数可能是有意义的。如果你想要一个函数来操作 DOM 中的某些元素，你应该使用`$.fn.myFunc`（作为最佳实践）。在其他情况下，将您的函数放在全局范围内（或封装在其他对象中）会更快且更符合逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:55:39.870

别着急，还是专注吧……

您编写函数的方式是正确的......因为`$`or`jQuery`是在页面加载时声明的变量......我认为他讲述了特殊语法......

特殊语法是：

```
(function($) {
    $.functionName = function (var1, var2){
    //your code
    };
})(jQuery); 
```

上面的代码用于确定这个函数是否是 jquery 插件

```
$.functionName = function (var1, var2){
   //your code
}; 
```

上面的代码是定义没有选择器的函数和

```
$.fn.functionName = function (var1, var2){
   //your code
}; 
```

用于包括选择器

希望有帮助

# java - Soap Web 服务从 tomcat 迁移到 Jboss 4.2.3

> ID：13799294
> 
> 赞同：0
> 
> 时间：2012-12-10T10:41:20.247
> 
> 标签：java, web-services, soap, jboss

我有使用 JAXB 作为编组器的 Web 服务。当我在 Tomcat 服务器上播放它时，一切正常，解析，发送响应 - 一切都很好。当我更改为 Jboss 4.2.3 时，出现以下异常：

```
java.lang.ClassCastException: org.jboss.ws.core.soap.TextImpl cannot be cast to org.w3c.dom.Comment
    at org.apache.xml.serializer.TreeWalker.startNode(TreeWalker.java:287) ~[na:2.7.0]
    at org.apache.xml.serializer.TreeWalker.traverse(TreeWalker.java:143) ~[na:2.7.0]
    at org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:389) ~[na:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.springframework.ws.server.endpoint.AbstractLoggingInterceptor.logMessageSource(AbstractLoggingInterceptor.java:149) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.endpoint.AbstractLoggingInterceptor.handleRequest(AbstractLoggingInterceptor.java:89) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.endpoint.interceptor.DelegatingSmartEndpointInterceptor.handleRequest(DelegatingSmartEndpointInterceptor.java:78) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.MessageDispatcher.dispatch(MessageDispatcher.java:224) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.MessageDispatcher.receive(MessageDispatcher.java:173) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:88) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:59) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.http.MessageDispatcherServlet.doService(MessageDispatcherServlet.java:221) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:710) [servlet-api.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803) [servlet-api.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) [tmp124843923712011984jbossweb-service.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182) [tmp124843923712011984jbossweb-service.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84) [tmp124843923712011984jbossweb-service.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157) [tmp124843923712011984jbossweb-service.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446) [tmp1688167291209800062jbossweb.jar:4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_09] 
```

**源端点**

```
@PayloadRoot(localPart = "chain", namespace = "http://jakisadres.com/caservice")
    @ResponsePayload
    public ChainResponse getChain(@RequestPayload Chain param) {

        ChainResponse response = new ChainResponse();
        response.setChainResult("cos");
        return response;
    } 
```

**DispatcherServlet**

```
<sws:annotation-driven/>

    <context:annotation-config  />

    <bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping">
        <description>An endpoint mapping strategy that looks for @Endpoint and @PayloadRoot annotations.</description>
    </bean>

    <sws:interceptors>
        <bean class="org.springframework.ws.soap.server.endpoint.interceptor.SoapEnvelopeLoggingInterceptor"/>
    </sws:interceptors>

    <bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
            <property name="contextPath" value="pl.signet.famoc.ws.jaxb.marshaller" /> 
    </bean>
<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory"/>

    <bean class="org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter"
            p:messageFactory-ref="messageFactory"/>

    <bean class="org.springframework.ws.transport.http.WsdlDefinitionHandlerAdapter"/> 
```

任何线索我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:16:31.397

好的，所以我得到了答案，问题出在`Classloader`JBOSS 上。服务器的实现包含一些在我的项目依赖项之前使用的类，这就是 JBOSS 使用默认解析器而不是`javax.xml.bind`解析 JAXB 的原因。

# mysql - 从列中获取非日期时间字符串值

> ID：13799297
> 
> 赞同：2
> 
> 时间：2012-12-10T10:41:23.273
> 
> 标签：mysql, regex, string, datetime

我最近运行了一个脚本，将数据从一个大表（大约 20 GB）复制到另一个，我搞砸了，日期时间列（称为`timestamp`）的列值被保存到另一个具有 varchar 数据类型（称为`category_name`）的列中，而`timestamp`值已设置为`NULL`或具有一系列随机日期时间值（如`0000-00-00 00:00:00`、`0003-02-01 00:00:00`、`1990-12-00 00:00:00`等）。我复制到的表也不断获取新数据。然而，新数据并未损坏。我正在尝试确定我的好数据开始的行的确切 ID。请注意，有效值`category_name`列是字母值或`NULL`. 我尝试了以下查询 -

```
SELECT * FROM table_name 
WHERE `timestamp` IS NOT NULL 
AND `timestamp` != "0000-00-00 00:00:00"
ORDER BY id; 
```

这是我发现列中保存了各种值的时候`timestamp`。

我接下来尝试了

```
SELECT * FROM table_name WHERE category_name REGEXP '[^a-zA-Z]' LIMIT 10; 
```

这是行不通的。

```
SELECT * FROM table_name WHERE category_name REGEXP '[:alpha:]' LIMIT 10; 
```

这也不起作用。

任何帮助将不胜感激，谢谢。我只是想从我的`category_name`列开始获取有效数据而不是日期时间字符串的位置获取大概的 ids/rows 范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:54:01.873

嗨，您可以将格式从时间戳更改为日期[http://www.w3schools.com/sql/sql_dates.asp](http://www.w3schools.com/sql/sql_dates.asp)

[http://forums.devshed.com/mysql-help-4/how-to-format-and-display-only-the-date-from-timestamp-1846.html](http://forums.devshed.com/mysql-help-4/how-to-format-and-display-only-the-date-from-timestamp-1846.html)

然后在此之后操作您的数据。

您可能还想探索如何在 PHP 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:08:01.000

尝试使用[STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)函数。如果不能将字符串转换为日期，则返回 NULL。并检查转换日期是否在您需要的范围内（在此示例中为去年`(CURDATE()-365)`）

```
SELECT * FROM table_name 
WHERE `timestamp` IS NOT NULL 
AND LENGTH(`timestamp`)=19
AND IFNULL(STR_TO_DATE(`timestamp`,'%Y-%m-%d %h:%i:%s'),0)>CURDATE()-365 
ORDER BY id limit 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T07:14:02.287

我终于使用数据库的备份解决了这个问题。我恢复了在我运行脚本时拍摄的数据库备份。使用它，我能够获得我的数据损坏的 ID。然后我将我的干净数据（从那个 id 开始）移动到这个恢复的表并切换表名。虽然花了一段时间，但导致一些数据丢失。

# tomcat - Tomcat JVM crash exception_access_violation，可能是imageio/CeWolf/JFreeChart引起的？

> ID：13799301
> 
> 赞同：2
> 
> 时间：2012-12-10T10:41:31.797
> 
> 标签：tomcat, jfreechart, javax.imageio, cewolf

我在几台服务器上的 Tomcat 上运行了 Web 应用程序，这会使 Tomcat 因 EXCEPTION_ACCESS_VIOLATION 而崩溃，就像每台服务器每月一次一样。故障转储似乎表明 imageio 可能存在问题，CeWolf (JFreeChart) JSP 在 Tomcat webapp 中使用了该问题。

我在用

*   当前最新的 Java 6 (6.0_37-b06)，
*   具有本机代码的 Tomcat 几乎是最新版本 7.0.32（7.0.33（最新）中的错误修复似乎都没有相关性），
*   CeWolf 几乎是最新版本 1.1.12（同样，1.1.13（最新）中的错误修复似乎都无关），
*   WinXP SP3 32bit 最新补丁
*   在 VMWare ESXi 4.1 u3 上的虚拟机中运行（已安装最新补丁）

我在这里发现了一些类似的问题，解决方案总是：更新到最新的 Java。嗯，它是最新的 Java 6。什么可能导致这个/如何解决这个问题？非常感谢您的任何意见！

还有一个额外的问题，即 Windows 服务自动重启不会启动这个问题，即使它适用于其他服务问题。不知何故，Windows 似乎认为在这种情况下关闭服务是故意的。作为一个附带问题：对此有什么想法吗？除了编写我自己的服务检查器看门狗（作为服务或计划任务）......

堆栈转储（由于帖子长度限制，不得不删除一些线程条目）：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x49434bdf, pid=1944, tid=352
#
# JRE version: 6.0_37-b06
# Java VM: Java HotSpot(TM) Client VM (20.12-b01 mixed mode windows-x86 )
# Problematic frame:
# C  [tcnative-1.dll+0x4bdf]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x00c06800):  JavaThread "Finalizer" daemon [_thread_in_native, id=352, stack(0x48b90000,0x48c00000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x00000020

Registers:
EAX=0x00000000, EBX=0x0000006f, ECX=0x4abe2a10, EDX=0x490e3000
ESP=0x48bff7e4, EBP=0x48bff7f8, ESI=0x00000000, EDI=0x4ea10068
EIP=0x49434bdf, EFLAGS=0x00010206

Top of Stack: (sp=0x48bff7e4)
0x48bff7e4:   490e3000 48bff800 00000000 00c06800
0x48bff7f4:   48bff820 48bff838 016ba033 0000006f
0x48bff804:   48bff820 4ea10068 00000000 00000000
0x48bff814:   0000006f 1970c068 1970eff8 435c4a58
0x48bff824:   00000001 1970cfe8 1970f038 00000000
0x48bff834:   00000000 48bff990 016387e8 4ea10068
0x48bff844:   00000000 1970bd10 6d7f2b66 00000000
0x48bff854:   00c06800 1970bd10 0190f460 00000000 

Instructions: (pc=0x49434bdf)
0x49434bbf:   5d 1c 85 db 76 2b 8b 47 18 8b d3 2b d6 89 55 08
0x49434bcf:   8b 57 10 03 d6 03 55 18 8d 4d 08 51 8b 4f 0c 52
0x49434bdf:   8b 50 20 51 ff d2 85 c0 75 10 03 75 08 3b f3 72
0x49434bef:   d5 5b 5f 8b c6 5e 5d c2 18 00 3d 77 11 01 00 0f 

Register to memory mapping:

EAX=0x00000000 is an unknown value
EBX=0x0000006f is an unknown value
ECX=0x4abe2a10 is an unknown value
EDX=0x490e3000 is an unknown value
ESP=0x48bff7e4 is pointing into the stack for thread: 0x00c06800
EBP=0x48bff7f8 is pointing into the stack for thread: 0x00c06800
ESI=0x00000000 is an unknown value
EDI=0x4ea10068 is an unknown value

Stack: [0x48b90000,0x48c00000],  sp=0x48bff7e4,  free space=445k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [tcnative-1.dll+0x4bdf]  Java_org_apache_tomcat_jni_Socket_sendbb+0x4f
J  org.apache.tomcat.jni.Socket.sendbb(JII)I
J  org.apache.coyote.http11.InternalAprOutputBuffer.flushBuffer()V
j  javax.imageio.stream.MemoryCacheImageOutputStream.flushBefore(J)V+47
j  javax.imageio.stream.MemoryCacheImageOutputStream.close()V+15
j  javax.imageio.stream.ImageInputStreamImpl.finalize()V+8
v  ~StubRoutines::call_stub
V  [jvm.dll+0xfb7cb]
V  [jvm.dll+0x18d3d1]
V  [jvm.dll+0xfb84d]
V  [jvm.dll+0x96301]
V  [jvm.dll+0x990c9]
C  [java.dll+0x2100]  Java_java_lang_ref_Finalizer_invokeFinalizeMethod+0x39
J  java.lang.ref.Finalizer.runFinalizer()V
V  [jvm.dll+0xfb7cb]
V  [jvm.dll+0x18d3d1]
V  [jvm.dll+0xfb971]
V  [jvm.dll+0xfb9cb]
V  [jvm.dll+0xb5e99]
V  [jvm.dll+0x119ab4]
V  [jvm.dll+0x14209c]
C  [MSVCR71.dll+0x9565]  endthreadex+0xa0
C  [kernel32.dll+0xb729]  GetModuleFileNameA+0x1ba

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
J  org.apache.tomcat.jni.Socket.sendbb(JII)I
J  org.apache.coyote.http11.InternalAprOutputBuffer.flushBuffer()V
J  org.apache.coyote.http11.InternalAprOutputBuffer.flush()V
J  org.apache.coyote.http11.AbstractHttp11Processor.action(Lorg/apache/coyote/ActionCode;Ljava/lang/Object;)V
J  org.apache.coyote.Response.action(Lorg/apache/coyote/ActionCode;Ljava/lang/Object;)V
J  org.apache.catalina.connector.OutputBuffer.doFlush(Z)V
J  org.apache.catalina.connector.OutputBuffer.flush()V
j  org.apache.catalina.connector.CoyoteOutputStream.flush()V+4
j  javax.imageio.stream.MemoryCacheImageOutputStream.flushBefore(J)V+47
j  javax.imageio.stream.MemoryCacheImageOutputStream.close()V+15
j  javax.imageio.stream.ImageInputStreamImpl.finalize()V+8
v  ~StubRoutines::call_stub
J  java.lang.ref.Finalizer.invokeFinalizeMethod(Ljava/lang/Object;)V
J  java.lang.ref.Finalizer.runFinalizer()V
J  java.lang.ref.Finalizer$FinalizerThread.run()V
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x4c15b400 JavaThread "http-apr-8080-exec-16537" daemon [_thread_blocked, id=2348, stack(0x4be40000,0x4beb0000)]
  0x4c0f4000 JavaThread "http-apr-8080-exec-16536" daemon [_thread_blocked, id=4024, stack(0x4bc80000,0x4bcf0000)]
  0x4c039c00 JavaThread "http-apr-8080-exec-16535" daemon [_thread_blocked, id=2568, stack(0x4bc10000,0x4bc80000)]
  0x4bef9c00 JavaThread "http-apr-8080-exec-16534" daemon [_thread_blocked, id=256, stack(0x4bba0000,0x4bc10000)]
  0x48fc8800 JavaThread "http-apr-8080-exec-16533" daemon [_thread_blocked, id=4068, stack(0x4bb30000,0x4bba0000)]
  0x4c15ac00 JavaThread "http-apr-8080-exec-16532" daemon [_thread_blocked, id=3092, stack(0x4bac0000,0x4bb30000)]
  0x4c224c00 JavaThread "http-apr-8080-exec-16531" daemon [_thread_blocked, id=2148, stack(0x4ba50000,0x4bac0000)]
  0x4c36a000 JavaThread "http-apr-8080-exec-16530" daemon [_thread_blocked, id=1872, stack(0x4b9e0000,0x4ba50000)]
  0x4c4b9800 JavaThread "http-apr-8080-exec-16529" daemon [_thread_blocked, id=3640, stack(0x4a540000,0x4a5b0000)]
  0x4c488c00 JavaThread "http-apr-8080-exec-16528" daemon [_thread_blocked, id=2108, stack(0x4a4d0000,0x4a540000)]
  0x4c4a5c00 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3120, stack(0x4f5c0000,0x4f630000)]
  0x4c2ff800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2988, stack(0x4f240000,0x4f2b0000)]
  0x4933d000 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=920, stack(0x4e960000,0x4e9d0000)]
  0x4c4b9400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=1396, stack(0x4e8f0000,0x4e960000)]
  0x4c282000 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3372, stack(0x4dee0000,0x4df50000)]
  0x4c263400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3624, stack(0x4f1d0000,0x4f240000)]
  0x4c2c4c00 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3204, stack(0x4e7a0000,0x4e810000)]
  0x4c0d9000 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3520, stack(0x4e810000,0x4e880000)]
  0x4c42d800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3328, stack(0x4df50000,0x4dfc0000)]
  0x4c059400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2332, stack(0x4dcb0000,0x4dd20000)]
  0x493d6800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=640, stack(0x4dc40000,0x4dcb0000)]
  0x4c4ef400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3072, stack(0x4dbd0000,0x4dc40000)]
  0x4c299400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2196, stack(0x4db60000,0x4dbd0000)]
  0x4c1ccc00 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2080, stack(0x4da80000,0x4daf0000)]
  0x4c2ca400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2816, stack(0x4f710000,0x4f780000)]
  0x4c45d800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2604, stack(0x4f6a0000,0x4f710000)]
  0x4bf5b400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2268, stack(0x4f630000,0x4f6a0000)]
  0x4c1b5800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2936, stack(0x4daf0000,0x4db60000)]
  0x4bf85800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3112, stack(0x4f550000,0x4f5c0000)]
  0x4c2f3000 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2140, stack(0x4f320000,0x4f390000)]
  0x4c2fd800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3248, stack(0x4f4e0000,0x4f550000)]
  0x4c374c00 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=3300, stack(0x4f470000,0x4f4e0000)]
  0x4c53bc00 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2072, stack(0x4f400000,0x4f470000)]
  0x4c2ac400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=1368, stack(0x4f390000,0x4f400000)]
  0x4c1e7800 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2076, stack(0x4f2b0000,0x4f320000)]
  0x4c126400 JavaThread "MySQL Statement Cancellation Timer" daemon [_thread_blocked, id=2528, stack(0x4dd20000,0x4dd90000)]
  0x492a6400 JavaThread "pool-2-thread-15" [_thread_blocked, id=3320, stack(0x4d8d0000,0x4d940000)]
  0x4c38bc00 JavaThread "pool-2-thread-14" [_thread_blocked, id=2896, stack(0x4d860000,0x4d8d0000)]
  0x4bfef400 JavaThread "pool-2-thread-13" [_thread_blocked, id=2932, stack(0x4d7f0000,0x4d860000)]
  0x48f23000 JavaThread "pool-2-thread-12" [_thread_blocked, id=2836, stack(0x4e730000,0x4e7a0000)]
  0x48f21400 JavaThread "pool-2-thread-11" [_thread_blocked, id=3908, stack(0x4e6c0000,0x4e730000)]
  0x491b2800 JavaThread "pool-2-thread-10" [_thread_blocked, id=468, stack(0x4e650000,0x4e6c0000)]
  0x491b0400 JavaThread "pool-2-thread-9" [_thread_blocked, id=3504, stack(0x4e5e0000,0x4e650000)]
  0x4bf9b800 JavaThread "pool-2-thread-8" [_thread_blocked, id=2984, stack(0x4e570000,0x4e5e0000)]
  0x4bf9ac00 JavaThread "pool-2-thread-7" [_thread_blocked, id=2064, stack(0x4e500000,0x4e570000)]
  0x4bf0cc00 JavaThread "pool-2-thread-6" [_thread_blocked, id=3100, stack(0x4e490000,0x4e500000)]
  0x49386400 JavaThread "pool-2-thread-5" [_thread_blocked, id=2892, stack(0x4e420000,0x4e490000)]
  0x48f13400 JavaThread "pool-2-thread-4" [_thread_blocked, id=1660, stack(0x4e3b0000,0x4e420000)]
  0x492a7400 JavaThread "pool-2-thread-3" [_thread_blocked, id=1916, stack(0x4e340000,0x4e3b0000)]
  0x4c3dc800 JavaThread "pool-2-thread-2" [_thread_blocked, id=956, stack(0x4e2d0000,0x4e340000)]
  0x4c3d3800 JavaThread "MultiThreadedHttpConnectionManager cleanup" daemon [_thread_blocked, id=2944, stack(0x4e260000,0x4e2d0000)]
  0x4924f000 JavaThread "pool-2-thread-1" [_thread_blocked, id=3920, stack(0x4e1f0000,0x4e260000)]
  0x4c3b4400 JavaThread "TSDRClient multithreaded operation monitoring thread" daemon [_thread_blocked, id=2696, stack(0x4e180000,0x4e1f0000)]
  0x4c054000 JavaThread "UMA Logger 'DataUploadServlet' Background Thread" daemon [_thread_blocked, id=3928, stack(0x4e110000,0x4e180000)]
  0x49307400 JavaThread "UMA Logger 'DataUploadServlet' extra file logging thread" daemon [_thread_blocked, id=3032, stack(0x4e0a0000,0x4e110000)]
  0x4c2d1400 JavaThread "UMA Logger 'WriteLog' extra file logging thread" daemon [_thread_blocked, id=3056, stack(0x4e030000,0x4e0a0000)]
  0x4c022c00 JavaThread "UMA Logger 'URM' extra file logging thread" daemon [_thread_blocked, id=4000, stack(0x4dfc0000,0x4e030000)]
  0x48e45400 JavaThread "pool-1-thread-15" [_thread_blocked, id=1800, stack(0x4d780000,0x4d7f0000)]
  0x4c000400 JavaThread "pool-1-thread-14" [_thread_blocked, id=3264, stack(0x4d710000,0x4d780000)]
  0x4937b800 JavaThread "pool-1-thread-13" [_thread_blocked, id=3444, stack(0x4d5c0000,0x4d630000)]
  0x4c0c4000 JavaThread "pool-1-thread-12" [_thread_blocked, id=2252, stack(0x4d6a0000,0x4d710000)]
  0x4c0d2c00 JavaThread "pool-1-thread-11" [_thread_blocked, id=1284, stack(0x4d630000,0x4d6a0000)]
  0x49318800 JavaThread "pool-1-thread-10" [_thread_blocked, id=2124, stack(0x4d550000,0x4d5c0000)]
  0x4c097400 JavaThread "pool-1-thread-9" [_thread_blocked, id=2728, stack(0x4d4e0000,0x4d550000)]
  0x4931ec00 JavaThread "pool-1-thread-8" [_thread_blocked, id=1788, stack(0x4d470000,0x4d4e0000)]
  0x48e48000 JavaThread "pool-1-thread-7" [_thread_blocked, id=3224, stack(0x4d400000,0x4d470000)]
  0x49186c00 JavaThread "pool-1-thread-6" [_thread_blocked, id=3384, stack(0x4d390000,0x4d400000)]
  0x4beeb400 JavaThread "pool-1-thread-5" [_thread_blocked, id=3976, stack(0x4d320000,0x4d390000)]
  0x4bfba400 JavaThread "pool-1-thread-4" [_thread_blocked, id=3168, stack(0x4d240000,0x4d2b0000)]
  0x48fc4c00 JavaThread "http-apr-8443-exec-10" daemon [_thread_blocked, id=3516, stack(0x4d1d0000,0x4d240000)]
  0x493a5800 JavaThread "http-apr-8443-exec-9" daemon [_thread_blocked, id=3192, stack(0x4d160000,0x4d1d0000)]
  0x493b5400 JavaThread "pool-1-thread-3" [_thread_blocked, id=3540, stack(0x4d0f0000,0x4d160000)]
  0x4c0c3400 JavaThread "http-apr-8443-exec-8" daemon [_thread_blocked, id=3556, stack(0x4d080000,0x4d0f0000)]
  0x49390c00 JavaThread "http-apr-8443-exec-7" daemon [_thread_blocked, id=3440, stack(0x4d010000,0x4d080000)]
  0x4c1a8800 JavaThread "http-apr-8443-exec-6" daemon [_thread_blocked, id=2760, stack(0x4cea0000,0x4cf10000)]
  0x48e66000 JavaThread "pool-1-thread-2" [_thread_blocked, id=2056, stack(0x4cdc0000,0x4ce30000)]
  0x48e49800 JavaThread "http-apr-8443-exec-5" daemon [_thread_blocked, id=2344, stack(0x4cd50000,0x4cdc0000)]
  0x48e4a400 JavaThread "http-apr-8443-exec-4" daemon [_thread_blocked, id=1860, stack(0x4cce0000,0x4cd50000)]
  0x49296400 JavaThread "MultiThreadedHttpConnectionManager cleanup" daemon [_thread_blocked, id=4008, stack(0x4cc00000,0x4cc70000)]
  0x4bf6bc00 JavaThread "http-apr-8443-exec-3" daemon [_thread_blocked, id=460, stack(0x4cb90000,0x4cc00000)]
  0x4c2f0400 JavaThread "pool-1-thread-1" [_thread_blocked, id=1520, stack(0x4cb20000,0x4cb90000)]
  0x4c2ae400 JavaThread "TSDRClient multithreaded operation monitoring thread" daemon [_thread_blocked, id=4064, stack(0x4cab0000,0x4cb20000)]
  0x4c037c00 JavaThread "UMA Logger 'DataUploadServlet' Background Thread" daemon [_thread_blocked, id=3952, stack(0x4ca40000,0x4cab0000)]
  0x48fe7800 JavaThread "UMA Logger 'URM' extra file logging thread" daemon [_thread_blocked, id=4020, stack(0x4c8f0000,0x4c960000)]
  0x49329800 JavaThread "http-apr-8443-exec-2" daemon [_thread_blocked, id=3564, stack(0x4c880000,0x4c8f0000)]
  0x49329400 JavaThread "http-apr-8443-exec-1" daemon [_thread_blocked, id=3604, stack(0x4c7a0000,0x4c810000)]
  0x49364400 JavaThread "AWT-Windows" daemon [_thread_in_native, id=2608, stack(0x4c810000,0x4c880000)]
  0x4c193400 JavaThread "Java2D Disposer" daemon [_thread_blocked, id=2712, stack(0x4c730000,0x4c7a0000)]
  0x4bf20800 JavaThread "TSDR maintenance thread" daemon [_thread_blocked, id=2596, stack(0x4c6b0000,0x4c720000)]
  0x4930cc00 JavaThread "MultiThreadedHttpConnectionManager cleanup" daemon [_thread_blocked, id=1212, stack(0x4bdd0000,0x4be40000)]
  0x492f3c00 JavaThread "ajp-apr-8009-AsyncTimeout" daemon [_thread_blocked, id=3868, stack(0x4b900000,0x4b970000)]
  0x492f2400 JavaThread "ajp-apr-8009-Acceptor-0" daemon [_thread_in_native, id=3864, stack(0x4b890000,0x4b900000)]
  0x49288800 JavaThread "ajp-apr-8009-CometPoller-7" daemon [_thread_blocked, id=3860, stack(0x4b820000,0x4b890000)]
  0x49287000 JavaThread "ajp-apr-8009-CometPoller-6" daemon [_thread_blocked, id=3856, stack(0x4b7b0000,0x4b820000)]
  0x49282800 JavaThread "ajp-apr-8009-CometPoller-5" daemon [_thread_blocked, id=3852, stack(0x4b740000,0x4b7b0000)]
  0x00c3cc00 JavaThread "ajp-apr-8009-CometPoller-4" daemon [_thread_blocked, id=3848, stack(0x4b6d0000,0x4b740000)]
  0x00c3b400 JavaThread "ajp-apr-8009-CometPoller-3" daemon [_thread_blocked, id=3844, stack(0x4b660000,0x4b6d0000)]
  0x00c3a000 JavaThread "ajp-apr-8009-CometPoller-2" daemon [_thread_blocked, id=3840, stack(0x4b5f0000,0x4b660000)]
  0x48fa4c00 JavaThread "ajp-apr-8009-CometPoller-1" daemon [_thread_blocked, id=3836, stack(0x4b580000,0x4b5f0000)]
  0x48fa3400 JavaThread "ajp-apr-8009-CometPoller-0" daemon [_thread_blocked, id=3832, stack(0x4b510000,0x4b580000)]
  0x48e52400 JavaThread "ajp-apr-8009-Poller-7" daemon [_thread_blocked, id=3828, stack(0x4b4a0000,0x4b510000)]
  0x48e51000 JavaThread "ajp-apr-8009-Poller-6" daemon [_thread_blocked, id=3824, stack(0x4b430000,0x4b4a0000)]
  0x48fd6800 JavaThread "ajp-apr-8009-Poller-5" daemon [_thread_blocked, id=3820, stack(0x4b3c0000,0x4b430000)]
  0x49031c00 JavaThread "ajp-apr-8009-Poller-4" daemon [_thread_blocked, id=3816, stack(0x4b350000,0x4b3c0000)]
  0x49030400 JavaThread "ajp-apr-8009-Poller-3" daemon [_thread_blocked, id=3812, stack(0x4b2e0000,0x4b350000)]
  0x49036c00 JavaThread "ajp-apr-8009-Poller-2" daemon [_thread_blocked, id=3808, stack(0x4b270000,0x4b2e0000)]
  0x4934c400 JavaThread "ajp-apr-8009-Poller-1" daemon [_thread_blocked, id=3804, stack(0x4b200000,0x4b270000)]
  0x4934b400 JavaThread "ajp-apr-8009-Poller-0" daemon [_thread_blocked, id=3800, stack(0x4b190000,0x4b200000)]
  0x4927b400 JavaThread "http-apr-8443-AsyncTimeout" daemon [_thread_blocked, id=3796, stack(0x4b120000,0x4b190000)]
  0x4927bc00 JavaThread "http-apr-8443-Acceptor-0" daemon [_thread_in_native, id=3792, stack(0x4b0b0000,0x4b120000)]
  0x4927a000 JavaThread "http-apr-8443-CometPoller-7" daemon [_thread_blocked, id=3788, stack(0x4b040000,0x4b0b0000)]
  0x48e76800 JavaThread "http-apr-8443-CometPoller-0" daemon [_thread_blocked, id=3760, stack(0x4ad30000,0x4ada0000)]
  0x48e75000 JavaThread "http-apr-8443-Poller-7" daemon [_thread_blocked, id=3756, stack(0x4acc0000,0x4ad30000)]
  0x491b8400 JavaThread "http-apr-8443-Poller-2" daemon [_thread_blocked, id=3736, stack(0x4a690000,0x4a700000)]
  0x491b7000 JavaThread "http-apr-8443-Poller-1" daemon [_thread_blocked, id=3732, stack(0x4a620000,0x4a690000)]
  0x4931a800 JavaThread "http-apr-8443-Poller-0" daemon [_thread_blocked, id=3728, stack(0x4a5b0000,0x4a620000)]
  0x4911f800 JavaThread "http-apr-8080-AsyncTimeout" daemon [_thread_blocked, id=3716, stack(0x4a460000,0x4a4d0000)]
  0x490f2400 JavaThread "http-apr-8080-Acceptor-0" daemon [_thread_in_native, id=3712, stack(0x4a3f0000,0x4a460000)]
  0x00c87400 JavaThread "http-apr-8080-Sendfile-0" daemon [_thread_blocked, id=3708, stack(0x4a380000,0x4a3f0000)]
  0x4925c400 JavaThread "http-apr-8080-CometPoller-7" daemon [_thread_blocked, id=3704, stack(0x4a310000,0x4a380000)]
  0x48fb4400 JavaThread "http-apr-8080-CometPoller-6" daemon [_thread_blocked, id=3700, stack(0x4a2a0000,0x4a310000)]
  0x490db400 JavaThread "http-apr-8080-CometPoller-2" daemon [_thread_blocked, id=3684, stack(0x4a0e0000,0x4a150000)]
  0x4925e400 JavaThread "http-apr-8080-CometPoller-1" daemon [_thread_blocked, id=3680, stack(0x4a070000,0x4a0e0000)]
  0x49299400 JavaThread "http-apr-8080-CometPoller-0" daemon [_thread_blocked, id=3676, stack(0x4a000000,0x4a070000)]
  0x492af400 JavaThread "http-apr-8080-Poller-7" daemon [_thread_blocked, id=3672, stack(0x49f90000,0x4a000000)]
  0x49191400 JavaThread "http-apr-8080-Poller-6" daemon [_thread_in_native, id=3668, stack(0x49f20000,0x49f90000)]
  0x49214400 JavaThread "http-apr-8080-Poller-5" daemon [_thread_in_native, id=3664, stack(0x49cb0000,0x49d20000)]
  0x49358800 JavaThread "http-apr-8080-Poller-4" daemon [_thread_blocked, id=3660, stack(0x49c40000,0x49cb0000)]
  0x49367400 JavaThread "http-apr-8080-Poller-3" daemon [_thread_in_native, id=3656, stack(0x49bd0000,0x49c40000)]
  0x49207400 JavaThread "http-apr-8080-Poller-2" daemon [_thread_blocked, id=3652, stack(0x49b60000,0x49bd0000)]
  0x493ad800 JavaThread "http-apr-8080-Poller-1" daemon [_thread_in_native, id=3648, stack(0x49af0000,0x49b60000)]
  0x49133000 JavaThread "http-apr-8080-Poller-0" daemon [_thread_blocked, id=3644, stack(0x49a80000,0x49af0000)]
  0x48e41400 JavaThread "ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon [_thread_blocked, id=3636, stack(0x49a10000,0x49a80000)]
  0x49146800 JavaThread "Timer-0" daemon [_thread_blocked, id=3496, stack(0x499a0000,0x49a10000)]
  0x49168400 JavaThread "UMA Logger 'default' Background Thread" daemon [_thread_blocked, id=3316, stack(0x49930000,0x499a0000)]
  0x49178c00 JavaThread "UMA Logger 'default' extra file logging thread" daemon [_thread_blocked, id=3312, stack(0x497b0000,0x49820000)]
  0x49071800 JavaThread "GC Daemon" daemon [_thread_blocked, id=2292, stack(0x496d0000,0x49740000)]
  0x00c29000 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=1256, stack(0x48d50000,0x48dc0000)]
  0x00c1a000 JavaThread "C1 CompilerThread0" daemon [_thread_blocked, id=1248, stack(0x48ce0000,0x48d50000)]
  0x00c18800 JavaThread "Attach Listener" daemon [_thread_blocked, id=1184, stack(0x48c70000,0x48ce0000)]
  0x00c17400 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=1236, stack(0x48c00000,0x48c70000)]
=>0x00c06800 JavaThread "Finalizer" daemon [_thread_in_native, id=352, stack(0x48b90000,0x48c00000)]
  0x00c05400 JavaThread "Reference Handler" daemon [_thread_blocked, id=344, stack(0x00d00000,0x00d70000)]
  0x00616c00 JavaThread "main" [_thread_in_native, id=2008, stack(0x006b0000,0x00720000)]

Other Threads:
  0x00c01800 VMThread [stack: 0x00c90000,0x00d00000] [id=340]
  0x00c2bc00 WatcherThread [stack: 0x48dc0000,0x48e30000] [id=1264]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 114688K, used 1727K [0x02d90000, 0x0aa00000, 0x182e0000)
  eden space 101952K,   1% used [0x02d90000, 0x02f3fdd0, 0x09120000)
  from space 12736K,   0% used [0x09120000, 0x09120000, 0x09d90000)
  to   space 12736K,   0% used [0x09d90000, 0x09d90000, 0x0aa00000)
 tenured generation   total 254504K, used 71377K [0x182e0000, 0x27b6a000, 0x42d90000)
   the space 254504K,  28% used [0x182e0000, 0x1c894608, 0x1c894800, 0x27b6a000)
 compacting perm gen  total 57856K, used 57651K [0x42d90000, 0x46610000, 0x46d90000)
   the space 57856K,  99% used [0x42d90000, 0x465dcec0, 0x465dd000, 0x46610000)
No shared spaces configured.

Code Cache  [0x00d90000, 0x01dc8000, 0x02d90000)
 total_blobs=5965 nmethods=5670 adapters=230 free_code_cache=16836096 largest_free_block=62784

Dynamic libraries:
0x00400000 - 0x00417000     D:\product.packaged\Tomcat7.0\bin\Tomcat7.exe
0x7c910000 - 0x7c9c9000     C:\WINDOWS\system32\ntdll.dll
0x7c800000 - 0x7c908000     C:\WINDOWS\system32\kernel32.dll
0x77da0000 - 0x77e4a000     C:\WINDOWS\system32\ADVAPI32.dll
0x77e50000 - 0x77ee3000     C:\WINDOWS\system32\RPCRT4.dll
0x77fc0000 - 0x77fd1000     C:\WINDOWS\system32\Secur32.dll
0x7e670000 - 0x7ee91000     C:\WINDOWS\system32\SHELL32.dll
0x77ef0000 - 0x77f39000     C:\WINDOWS\system32\GDI32.dll
0x7e360000 - 0x7e3f1000     C:\WINDOWS\system32\USER32.dll
0x77be0000 - 0x77c38000     C:\WINDOWS\system32\msvcrt.dll
0x77f40000 - 0x77fb6000     C:\WINDOWS\system32\SHLWAPI.dll
0x76330000 - 0x7634d000     C:\WINDOWS\system32\IMM32.DLL
0x773a0000 - 0x774a3000     C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.6028_x-ww_61e65202\comctl32.dll
0x5d450000 - 0x5d4ea000     C:\WINDOWS\system32\comctl32.dll
0x6d7f0000 - 0x6daa0000     D:\product.packaged\jre6\bin\client\jvm.dll
0x76af0000 - 0x76b1e000     C:\WINDOWS\system32\WINMM.dll
0x7c340000 - 0x7c396000     C:\WINDOWS\system32\MSVCR71.dll
0x6d7a0000 - 0x6d7ac000     D:\product.packaged\jre6\bin\verify.dll
0x6d320000 - 0x6d33f000     D:\product.packaged\jre6\bin\java.dll
0x6d7e0000 - 0x6d7ef000     D:\product.packaged\jre6\bin\zip.dll
0x774b0000 - 0x775ee000     C:\WINDOWS\system32\ole32.dll
0x5b0f0000 - 0x5b128000     C:\WINDOWS\system32\uxtheme.dll
0x778f0000 - 0x779e4000     C:\WINDOWS\system32\SETUPAPI.dll
0x6d550000 - 0x6d559000     D:\product.packaged\jre6\bin\management.dll
0x49430000 - 0x4954c000     D:\product.packaged\Tomcat7.0\bin\tcnative-1.dll
0x76bb0000 - 0x76bbb000     C:\WINDOWS\system32\PSAPI.DLL
0x71a10000 - 0x71a27000     C:\WINDOWS\system32\WS2_32.dll
0x71a00000 - 0x71a08000     C:\WINDOWS\system32\WS2HELP.dll
0x719b0000 - 0x719f0000     C:\WINDOWS\system32\MSWSOCK.dll
0x68000000 - 0x68036000     C:\WINDOWS\system32\rsaenh.dll
0x6d780000 - 0x6d788000     D:\product.packaged\jre6\bin\sunmscapi.dll
0x77a50000 - 0x77ae6000     C:\WINDOWS\system32\CRYPT32.dll
0x77af0000 - 0x77b02000     C:\WINDOWS\system32\MSASN1.dll
0x49740000 - 0x49783000     C:\Programme\Avira\AntiVir Desktop\avsda.dll
0x76d20000 - 0x76d39000     C:\WINDOWS\system32\IPHLPAPI.DLL
0x66710000 - 0x66769000     C:\WINDOWS\system32\hnetcfg.dll
0x719f0000 - 0x719f8000     C:\WINDOWS\System32\wshtcpip.dll
0x6d600000 - 0x6d613000     D:\product.packaged\jre6\bin\net.dll
0x76ee0000 - 0x76f07000     C:\WINDOWS\system32\DNSAPI.dll
0x76f70000 - 0x76f78000     C:\WINDOWS\System32\winrnr.dll
0x76f20000 - 0x76f4d000     C:\WINDOWS\system32\WLDAP32.dll
0x76f80000 - 0x76f86000     C:\WINDOWS\system32\rasadhlp.dll
0x6d000000 - 0x6d14c000     D:\product.packaged\jre6\bin\awt.dll
0x72f70000 - 0x72f96000     C:\WINDOWS\system32\WINSPOOL.DRV
0x6d230000 - 0x6d27f000     D:\product.packaged\jre6\bin\fontmanager.dll
0x6d620000 - 0x6d629000     D:\product.packaged\jre6\bin\nio.dll
0x6d1a0000 - 0x6d1c3000     D:\product.packaged\jre6\bin\dcpr.dll
0x6d440000 - 0x6d465000     D:\product.packaged\jre6\bin\jpeg.dll

VM Arguments:
jvm_args: -Dcatalina.home=D:\product.packaged\Tomcat7.0 -Dcatalina.base=D:\product.packaged\Tomcat7.0 -Djava.endorsed.dirs=D:\product.packaged\Tomcat7.0\endorsed -Djava.io.tmpdir=D:\product.packaged\Tomcat7.0\temp -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=D:\product.packaged\Tomcat7.0\conf\logging.properties -Xmx1024m 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
PATH=C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;d:\product.packaged\jre6\bin;d:\product.packaged\R-2.12.1\bin;d:\product.packaged\cygwin\bin;C:\WINDOWS\system32\WindowsPowerShell\v1.0
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 26 Stepping 5, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows XP Build 2600 Service Pack 3

CPU:total 4 (4 cores per cpu, 1 threads per core) family 6 model 26 stepping 5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt

Memory: 4k page, physical 3145192k(1976584k free), swap 7171332k(5981488k free)

vm_info: Java HotSpot(TM) Client VM (20.12-b01) for windows-x86 JRE (1.6.0_37-b06), built on Sep 24 2012 12:44:35 by "java_re" with MS VC++ 7.1 (VS2003)

time: Sun Dec 09 13:00:49 2012
elapsed time: 875693 seconds 
```

# android - 如何定期显示图像

> ID：13799305
> 
> 赞同：0
> 
> 时间：2012-12-10T10:41:52.783
> 
> 标签：android

我是android领域的新手。我正在努力定期在 main.xml 的中心显示两个图像。代码运行成功，但没有显示任何图像。这是代码。

```
 package com.example.radio;
   import java.io.IOException;
   import java.util.Timer;
   import java.util.TimerTask;

   import android.app.Activity;
   import android.graphics.Bitmap;
   import android.graphics.BitmapFactory;
   import android.os.Bundle;
   import android.os.Handler;
   import android.os.Message;
   import android.util.Log;
   import android.widget.ImageView;

    public class Radio extends Activity 
    {
private ImageView _imagView;
private Timer _timer;
private int _index;
private MyHandler handler;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_radio);
    handler= new MyHandler();
    _imagView=(ImageView) findViewById(R.id.speak);

    _index=0;
    _timer= new Timer();
    _timer.schedule(new TickClass(), 500, 200);
}

private class TickClass extends TimerTask
{
    @Override
    public void run() {
        // TODO Auto-generated method stub
        handler.sendEmptyMessage(_index);
        _index++;
    }
}

private class MyHandler extends Handler
{
    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);

        try {
                Bitmap bmp= BitmapFactory.decodeStream(Radio.this.getAssets().open("drum_"+_index+".png"));
                _imagView.setImageBitmap(bmp);

                Log.v("Loaing Image: ",_index+"");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.v("Exception in Handler ",e.getMessage());
        }
    }}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:47:19.983

我在这里发布了一个示例代码。你可以这样使用>>

```
public void onCreate() {

    ImageView backgroundImageView = findViewById(R.id.background);
    backgroundImageView.postDelayed(new Runnable() {
        static int i = 0;
        public void run() {
            ImageView.this.setImageResource(
                i++ % 2 == 0 ?
                    R.drawable.background_image1 :
                    R.drawable.background_image2);
            ImageView.this.postDelayed(this, 1000);
        }
    }, 1000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:58:24.483

您可以在您的应用程序中使用以下示例代码并替换可绘制对象...它可以很好地满足您的要求...

```
int cargallery[] = { R.drawable.ford_suv_black,
            R.drawable.lincoln_town_car_black };
    int carIndex = -1;
    public static final int UPDATE_IMAGE = 1000;
    ImageView carimage = null;

private Handler mHandler = new Handler() {
        public void handleMessage(Message msg) {
            if (msg.what == UPDATE_IMAGE) {
                if (carIndex >= cargallery.length - 1) {
                    carIndex = -1;
                }
                carIndex++;

                carimage.setImageResource(cargallery[carIndex]);
                reloadCarImage();
            }
        };
    };

    private void reloadCarImage() {

        Message msg = new Message();
        msg.what = UPDATE_IMAGE;
        mHandler.sendMessageDelayed(msg, 1000);
    }

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.homescreen);
        carimage = (ImageView) findViewById(R.id.carview);
        reloadCarImage();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:05:15.187

```
int []imageArray={R.drawable.imgone,R.drawable.imgtwo,R.drawable.imgthree};

final Handler handler = new Handler();
         Runnable runnable = new Runnable() {
            int i=0;
            public void run() {
                imageView.setImageResource(imageArray[i]);
                i++;
                if(i>imageArray.length-1)
                {
                i=0;    
                }
                handler.postDelayed(this, 100);  //for interval... 
            }
        };
        handler.postDelayed(runnable, 2000); //for initial delay..
    } 
```

# ruby-on-rails - js.erb 文件中基于 param_name will_paginate 的 if 语句（Ajax 调用）

> ID：13799306
> 
> 赞同：2
> 
> 时间：2012-12-10T10:41:54.380
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery, will-paginate

我正在尝试使用 will_paginate Gem 在同一页面（相同的控制器操作）上进行多个 Ajax 调用。到目前为止，我已经为每个实例变量提供了自己的 param_name，这样它们就不会使用 :page 的默认参数

示例控制器

```
@meats= Recipe.meat_recipes.paginate(:page => params[:meat_recipes], :per_page => 1)
@vegrecipes = Recipe.veg_recipes.paginate(:page => params[:veg_recipes], :per_page => 1)
@desserts = Recipe.dessert_recipes.paginate(:page => params[:dessert_recipes], :per_page => 1) 
```

然后在视图中

```
 <%= will_paginate @meats,  :param_name => 'meat_recipes'  %> (repeat this for individual instance variables) 
```

所以这部分很好。我正在做的是在像这样发出 AJAX 请求时加载部分内容

.js.erb 文件

```
$('#meatRecipes').html('<%= escape_javascript(render partial: 'meatrecipes') %>');
$.setAjaxPagination(); 
```

所以目前我的肉实例变量工作正常。那么如何根据 params 进行 if 语句呢？

例如，我已经尝试过

```
<% if @meats %>
$('#meatRecipes').html('<%= escape_javascript(render partial: 'meatrecipes') %>');
$.setAjaxPagination();
<% end %>

<% if @vegrecipes %>
$('#vegRecipes').html('<%= escape_javascript(render partial: 'vegrecipes') %>');
$.setAjaxPagination();
<% end %> 
```

也试过

```
<% if @meats[:param_name] == 'meat_recipes' %>
$('#meatRecipes').html('<%= escape_javascript(render partial: 'meatrecipes') %>');
$.setAjaxPagination();
<% end %>

<% if @vegrecipes[:param_name == 'veg_recipes' %>
$('#vegRecipes').html('<%= escape_javascript(render partial: 'vegrecipes') %>');
$.setAjaxPagination();
<% end %> 
```

但这不起作用。所以我想我的问题是我用什么作为我的论点来确保为特定的分页部分调用正确的部分。

希望我已经正确解释了这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T19:51:46.150

好的，所以我需要将此解决方案归功于@karl，但这有效..除非有人有更好的方法？

```
 <% if params[:meat_recipes] %>
 $('#meatRecipes').html('<%= escape_javascript(render partial: 'meatrecipes') %>');
 $.setAjaxPagination();
 <% end %>

 <% if  params[:veg_recipes] %>
 $('#vegRecipes').html('<%= escape_javascript(render partial: 'vegeterianrecipes') %>');
 $.setAjaxPagination();
 <% end %>

 <% if  params[:dessert_recipes] %>
 $('#dessertRecipes').html('<%= escape_javascript(render partial: 'dessertrecipes') %>');
 $.setAjaxPagination(); 
```

# sed - Grep 字符串并删除第一个字符

> ID：13799308
> 
> 赞同：0
> 
> 时间：2012-12-10T10:42:02.353
> 
> 标签：sed, awk, grep, tr

当 grep 某个字符串时，我想删除文件中的第一个字符。但是需要在编辑之前更改的行位于同一位置。

示例文件：

```
#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
#auth           sufficient      pam_wheel.so trust use_uid
auth            include         system-auth
account         sufficient      pam_succeed_if.so uid = 0 use_uid quiet 
```

编辑后的预期视图：

```
#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
auth           sufficient      pam_wheel.so trust use_uid
auth            include         system-auth
account         sufficient      pam_succeed_if.so uid = 0 use_uid quiet 
```

在这种情况下，第 4 行只需要删除“#”，但我想在搜索字符串“sufficient pam_wheel.so trust use_uid”时这样做，而不是在指向我要编辑的确切行时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:46:30.420

这是一份工作`sed`：

```
$ sed -r 's/^#(.*sufficient\s+pam_wheel\.so trust use_uid.*)/\1/' file
#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
auth           sufficient      pam_wheel.so trust use_uid
auth            include         system-auth
account         sufficient      pam_succeed_if.so uid = 0 use_uid quiet 
```

正则说明：

```
s/                            # Substitute  
^#                            # A line starting with a #
(                             # Start capture group
.*                            # Followed by anything
sufficient                    # Followed by the word sufficient
\s+                           # Followed by whitespace
pam_wheel\.so trust use_uid   # Followed by the literal string (escaped .)
.*                            # Followed by anything
)                             # Stop capture group
/                             # Replace with 
\1                            # The first capture group 
```

因此，我们有效地匹配从`#`包含字符串开始`sufficient\s+pam_wheel.so trust use_uid`并删除`#`

注意：该`-r`标志用于扩展正则表达式，它可能`-E`适用于您的版本，`sed`因此请检查`man`.

如果要将更改存储回`file`使用`-i`选项：

```
$ sed -ri 's/^#(.*sufficient\s+pam_wheel\.so trust use_uid.*)/\1/' file 
```

如果列对齐很重要，则`sufficient`在它之前和之后捕获，以便获得 2 个捕获组并替换为`\1 \2`.

```
$ sed -r 's/^#(.*)(sufficient\s+pam_wheel\.so trust use_uid.*)/\1 \2/' file
#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
auth            sufficient      pam_wheel.so trust use_uid
auth            include         system-auth
account         sufficient      pam_succeed_if.so uid = 0 use_uid quiet 
```

**编辑：**

将字符串替换`AllowUsers support admin`为`#AllowUsers support admin`：

```
$ sed -r 's/^(AllowUsers support admin.*)/#\1/' file
#AllowUsers support admin

$ sed -r 's/^(DeniedUsers root.*)/#\1/' file
#DeniedUsers root 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:34:21.177

```
perl -pi -e '$_=~s/^.//g if(/sufficient      pam_wheel.so trust use_uid/)' your_file 
```

注意：这将进行就地替换。因此在您运行命令后，您的文件将被自动修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:59:30.533

使用 awk 你可以：

```
awk -F '#' '{ if ($0 ~ /^#.*sufficient +pam_wheel.so trust use_uid/) {$1=""; print;} else print}'  infile 
```

或（如果开头只能有一个 #）：

```
awk -F '#' '{ if ($0 ~ /^#.*sufficient +pam_wheel.so trust use_uid/) print $2; else print}'  infile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T11:09:36.303

这是一种使用方法`sed`：

```
sed '/sufficient \+pam_wheel.so \+trust \+use_uid/s/^#//' file 
```

结果：

```
#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the "wheel" group.
auth           sufficient      pam_wheel.so trust use_uid
auth            include         system-auth
account         sufficient      pam_succeed_if.so uid = 0 use_uid quiet 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:55:46.103

sed 命令只能进行 RE 匹配而不是字符串比较，因此要使用 sed，您需要解析所需的字符串以转义所有容易出错的 RE 元字符（例如，当前发布的解决方案都忽略了转义 "." in `pam_wheel.so`）。

当您尝试匹配字符串时，最好只进行字符串比较，例如：

```
awk 'index($0,"sufficient pam_wheel.so trust use_uid"){sub/^#/,"")}1' file > tmp && mv tmp file 
```

# visual-studio-2008 - 在 VS 2008 中的所有引用位置放置断点

> ID：13799309
> 
> 赞同：0
> 
> 时间：2012-12-10T10:42:06.513
> 
> 标签：visual-studio-2008, add-in, breakpoints, find-all-references

VS 编辑器中的“查找所有引用”选项帮助我们找到使用特定对象的位置。但是有什么办法可以让我在所有这些位置自动放置一个断点？为在 100 个位置引用的对象放置断点是不可能的！是否有任何工具/插件可以完成这项工作？

# python - 将 PyGTK 转换为 exe

> ID：13799317
> 
> 赞同：1
> 
> 时间：2012-12-10T10:42:40.320
> 
> 标签：python, gtk, pygtk, py2exe, pyinstaller

我已经环顾了好几个小时了。对我来说唯一有意义的是[http://fnch.users.sourceforge.net/portablepygtkwindows.html](http://fnch.users.sourceforge.net/portablepygtkwindows.html)但它占用 >40MB 的空间，对我来说太大了。

其他教程要么太复杂，我无法通过它们，要么我获得的结果不起作用。

我试过 py2exe 但`import gtk`失败了。

我试过pyinstaller。包括 GTK 文件，但不包括 glade 文件。

我希望将它全部放在一个独立的.exe 中。但现在我的首要任务是让它在没有 Python 的 Windows 中正常工作。非常感谢任何帮助的努力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:20:26.953

有一些关于[py2exe 和 pygtk](http://www.py2exe.org/index.cgi/Py2exeAndPyGTK)的说明可用。您应该能够将整个程序放在一个 exe 文件中，但不能将 GTK 库包含在需要复制的文件中：

> 完成后，您需要将 etc、lib 和 share 目录从您的 GTK+ 安装（不是 pygtk 安装）复制到创建的 dist 目录 py2exe。

看起来您也可以[使用 pyinstaller 发送数据文件](http://www.pyinstaller.org/export/develop/project/doc/Manual.html#accessing-data-files)。

# android - Titanium：如何使用 Titanium studio 构建 apk

> ID：13799318
> 
> 赞同：0
> 
> 时间：2012-12-10T10:42:43.627
> 
> 标签：android, titanium-mobile

我正在尝试使用 Titanium Source 手动创建 APK。我搜索并发现 Titanium 正在使用 ANT 工具来构建 APK。所以我在终端中给出了“ant”命令，它创建了一个 APK，但它错过了一些名为 org 的文件夹和ti ..在运行时初始化Webview ..所以请指导我如何手动编译源代码**（在终端/命令提示符中使用命令，即“Ant”命令，如aapt，dex等）..**

我浏览了这个[链接](https://stackoverflow.com/questions/4217551/what-happens-to-javascript-code-after-app-is-compiled-using-titanium-mobile)，但它只是概述了它，而不是完整的流程..

提前致谢

问候，

迪帕克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:33:54.553

我认为您需要查看 Titanium 命令行界面。[https://wiki.appcelerator.org/display/guides/Titanium+Command+Line+Interface](https://wiki.appcelerator.org/display/guides/Titanium+Command+Line+Interface)

```
$ titanium create --platform=android --android=/path/to/android-sdk --id=com.mycompany.myApp --name=myApp   
$ titanium run --platform=android 
```

如果您使用 3.0 SDK，那么您可以使用 npm 安装`and`管理您的依赖项并执行相同的 Titanium 命令，或者您可以使用`Alloy`他们的新架构。

[http://developer.appcelerator.com/blog/2012/10/building-titanium-mobile-from-source-now-requires-nodejs.html](http://developer.appcelerator.com/blog/2012/10/building-titanium-mobile-from-source-now-requires-nodejs.html)

# c# - 将 Kinect 深度保存到二进制文件

> ID：13799319
> 
> 赞同：2
> 
> 时间：2012-12-10T10:42:45.153
> 
> 标签：c#, matlab, kinect, depth

抱歉，如果以前有人问过这个问题，我找不到它。但是总的来说，这个论坛很棒，编程不是我的专业领域（我来自医疗方面）。然而，kinect 提出了一些非常有趣的探索领域。简而言之，我希望将深度数据保存到二进制文件中以供以后分析（和显示）-虽然我知道 kinect studio，但我需要将数据与收集的其他数据一起记录。我已经四处寻找并适应了一种方法，但是我不知所措。

我在 SensorDepthFrameReady 方法中创建了一个调用：

```
saveDepth(depthFrame) 
```

上面将 depthData byte[] 数组传递给 saveDepth()。

```
 public static void saveDepth( byte[] bytes)
    {   
    // create file io for write
    using (System.IO.FileStream stream = new System.IO.FileStream(file,     System.IO.FileMode.Append, System.IO.FileAccess.Write))
    {            

        // write the passed byte buffer
        stream.Write(bytes, 0, bytes.Length);
        // close the file
        stream.Close();
    }

} 
```

然后将其保存到 .bin 文件中。但是，这是否是正确的格式，以便以后在 Matlab 中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:35:41.377

要**验证**您的方法，您应该定义什么是正确的，什么是错误的。

如果你在 MATLAB 中写了一个相应的方法，可以读取你用 C# 保存的文件并完成你的工作，那就是正确的，否则是错误的。

# qt4 - Qt - 如何为仅接受整数的 LineEdit 使用按键事件

> ID：13799323
> 
> 赞同：0
> 
> 时间：2012-12-10T10:43:13.537
> 
> 标签：qt4, qt4.7, qt4.8, qlineedit, qkeyevent

我是 Qt C++ 的新手。我有一个**QLineEdit**。在其中我必须只输入整数。如果我按字母或任何其他字符，我的**QLineEdit**不应该接受它。如何用 C++ 在 qt 中做到这一点？请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:48:51.533

根据文档，它已经在 Qt 中实现。你只需要做这样的事情：

```
 QValidator *validator = new QIntValidator(100, 999, this);
 QLineEdit *edit = new QLineEdit(this);

 // the edit lineedit will only accept integers between 100 and 999
 edit->setValidator(validator); 
```

你可以在这里阅读更多：[Int 验证器](http://harmattan-dev.nokia.com/docs/library/html/qt4/qintvalidator.html)

# c++ - Eigen3 矩阵乘法性能取决于处理器？

> ID：13799333
> 
> 赞同：1
> 
> 时间：2012-12-10T10:44:06.777
> 
> 标签：c++, multithreading, performance, matrix-multiplication, eigen

上个月我一直在使用计算机矩阵乘法，并使用 openMP 和 eigen3 进行了一些测试。

测试是在以下机器上进行的：

电脑1：

**Intel Core i7-3610QM CPU @ 2,30GHz / 6 GB ddr3**

电脑2：

**六核 AMD Opteron(tm) 处理器 2435 2.60 GHz（2 个处理器）/16 GB**

对于 openMP，使用了以下矩阵-矩阵乘法算法：

```
void matrix4openmp(void)
{
    int j;

#pragma omp parallel for 
for (j=0;j<N; j+=2){
  double v1[N],v2[N];
    int i,k;
  for (i=0;i<N; i++){
     v1[i]=b[i][j];
     v2[i]=b[i][j+1];
  }

  for (i=0; i<N;i+=2){
     register double s00,s01,s10,s11;
     s00=s01=s10=s11=0.0;
     for (k=0;k<N;k++){
        s00 += a[i]  [k] * v1[k];
        s01 += a[i]  [k] * v2[k];
        s10 += a[i+1][k] * v1[k];
        s11 += a[i+1][k] * v2[k];
     }
     c[i]  [j]   =s00;
     c[i]  [j+1] =s01;
     c[i+1][j]   =s10;
     c[i+1][j+1]   =s11;
  }
} 
```

结果如下：

_________________________计算机 1______________计算机 2

顺序________232,75600_______________536,21400

OpenMP____________2,75764____________7,62024

特征3_____________3,35090____________1,92970

*时间以秒为单位。

*矩阵尺寸为 2700 x 2500 和 2500 x 2700。

*顺序算法与 OMP 不同，它是 mm 乘法的最简单版本，可在此处查看：http: [//pastebin.com/Pc9AKAE8](http://pastebin.com/Pc9AKAE8)。

*为 eigen3 测试激活了 SSE2 指令。

*OpenMP 使用默认内核，这是 Windows 检测到的所有内核，包括虚拟内核。

如您所见，OpenMP 版本在第一台计算机 (i7) 上比 eigen3 版本更快。但是对于计算机 2（2x Opteron），eigen3 的性能完全胜过 OpenMP 版本以及在计算机 1 中进行的所有测试。

知道为什么我会得到这个结果以及为什么计算机 1 中的 eigen3 没有计算机 2 中那么快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:00:13.123

感谢您的回答。

顺序版本和并行版本之间的巨大差异是由于使用了不同的算法。顺序版本使用通常的朴素 O(N^3) 没有任何优化，而并行版本是优化版本 - 使用块。使用相同的算法，顺序版本时间大约是 10（计算机 1）和 50（计算机 2）——抱歉应该把这些值放在第一篇文章中。

第一台和第二台计算机中的 Eigen3 性能与 OpenMP 性能之间的差异似乎是由于启动的线程数与可用物理处理器的数量有关。我们发现，如果启动的线程数大于可用的物理处理器数，则 Eigen3 的性能会变差，而 OpenMP 并非如此

在测试中，两种情况下启动的线程数等于处理器总数（虚拟 + 物理）。

在计算机 1 中，Eigen3 性能更差，因为总处理器的数量（虚拟 + 物理 - - 由于超线程）大于物理处理器的数量。

在计算机 2 中，Eigen3 性能更好，因为处理器的总数与物理处理器的数量相同。如果我们将物理处理器数量的两倍用于线程数量，Eigen3 的性能也会下降，而 openMP 实际上会有所提高。

# api - 贝宝重定向

> ID：13799336
> 
> 赞同：0
> 
> 时间：2012-12-10T10:29:50.717
> 
> 标签：api, paypal

我正在使用贝宝。我将其重定向到

[https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr)。当我点击立即付款按钮时，它会转到另一个链接，提供 3 个选项：

1.  重定向到您的网站
2.  转到 PayPal 帐户概览
3.  从您的银行充值

当我单击第一个链接时，它会转到我的网站。

当我点击立即付款按钮并确认付款时，我不想转到此页面

这给出了这些选项。我想直接访问我的网站。这怎么可能？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:42:34.170

如果您是卖家，您实际上可以在您的贝宝帐户上设置您的网站付款偏好，以便通过您的购买按钮进行的​​任何付款都将自动重定向到您的网站（不会看到您上面所说的页面）。

*   登录您的贝宝账户（作为卖家）
*   转到个人资料 > 我的销售工具
*   找到“网站偏好”部分，点击`Update`
*   将`Auto Return:`选项设置为`ON`
*   填写`Return URL`有效的 URL（付款完成后将用于重定向客户的 URL）
*   节省

# html - 绝对div后的div调整

> ID：13799337
> 
> 赞同：1
> 
> 时间：2012-12-10T10:44:12.007
> 
> 标签：html, css

在 absolute 之后调整页脚时出现问题`<div>`。这是场景：

我有一个`<div>`包含背景图像 - 这`<div>`是绝对的 我将所有内容都放在另一个`<div>`位于图像本身上的内容我的页脚应该“浮动”在图像下方，但这不会发生。

**[现场预览](http://danne-bro.com.web122.curanetserver.dk/how.aspx)**

如您所见，页脚在图像上，无论图像的高度如何，它都应该在它的下方。

我的标记将是这样的：

```
<div id="banner"><img src="#" /> Position Absolute</div>
<div id="container">
   Content goes in here
</div>
<div id="footer">
   This footer should always be under the banner
</div> 
```

欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:52:41.340

你试过这个方法吗

```
 <div id="banner">Position Absolute</div>
          <div id="container">
                   Content goes in here
          </div>
    <div class="clear"></div>
          <div id="footer">
                   This footer should always be under the banner
          </div>

    .clear{ clear:both}
      #footer{ position:absolute; bottom:0;} 
```

注意：我已经更新了将页脚保持在底部的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:53:28.550

而是拥有一个绝对 DIV 并将其位置设置为背景。最好将其作为相对 div 并设置背景图像。您可以使用 CSS background-position 和 margin: 0 auto 使其居中浮动。这样，页脚 div 将始终位于下方。

相对 div 不考虑绝对 div 定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:54:02.507

我不确定我是否遇到了问题......但我猜你正在寻找“粘性页脚”。

问题是您的内容 div。您应该使您的内容 div 相对或浮动，然后您可以添加粘性页脚：

```
<div id="footer">Footer</div>

#footer{position:fixed;bottom:0px;width:100%;....} 
```

# ios - BlackBerry-10 中是否有相当于 iOS 导航控制器的功能

> ID：13799338
> 
> 赞同：-1
> 
> 时间：2012-12-10T10:44:12.350
> 
> 标签：ios, uinavigationcontroller, porting, blackberry-10

我正在尝试将 iOS 应用程序移植到 BlackBerry-10。BlackBerry-10 中是否有任何相当于 IOS 的 UINavigationController 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:36:06.533

是的，等价​​物是[`NavigationPane`](https://developer.blackberry.com/cascades/reference/bb__cascades__navigationpane.html)。还有一个[将您的 iOS 应用程序移植到 BlackBerry 10 的指南](http://developer.blackberry.com/native/beta/documentation/porting_ios_intro.html)

# java - Java 中的日历

> ID：13799339
> 
> 赞同：0
> 
> 时间：2012-12-10T10:44:15.263
> 
> 标签：java, calendar

我必须在日历类型中添加延迟次数，并且只希望日历类型中的新日期。

```
limitDate = orderDate + settlementDelay. 
```

在哪里

```
limitDate = java.util.Calendar

orderDate = java.util.Calendar

settlementDelay = int 
```

我试过这样的事情：

```
Calendar limitDate = order.getOrderDate().add(Calendar.DATE,settlementDelay); 
```

但它给了我

```
Type mismatch error: Cannot convert from void to Calendar. 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T10:47:44.417

您收到此错误是因为[Calendar#add()](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#add%28int,%20int%29)方法不返回任何内容（请参阅 void）并在提供的 Calendar 实例本身中添加输入日期/月/年等。

**编辑：**如果您真的需要一个新实例，请使用如下代码：

```
Calendar limitDate = Calendar.getInstance();
limitDate.setTime( orderDate.getTime() );
limitDate.add(Calendar.DATE, settlementDelay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:53:44.800

您应该考虑改用[joda-time](http://joda-time.sourceforge.net/)库。

日期操作要好得多。它确实具有您似乎想要的 plusDays 方法。

```
DateTime orderDate = ...;
DateTime limitDate = orderDate.plusDays(settlementDelay); 
```

# oracle - 名称中带有 $ 的 Oracle 表

> ID：13799345
> 
> 赞同：13
> 
> 时间：2012-12-10T10:44:30.113
> 
> 标签：oracle, ddl

在表下的 Sql Developer 中，我看到了表，但有些表的名称为 $。

例子：

```
 tb$something 
```

以表名命名的“$”符号是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T10:54:14.667

这并不意味着什么。因为您可以根据需要创建带有美元符号的表（可能不推荐，因为人们可能会混淆认为它们是 oracle 特殊表）。

如果您指的是由 Oracle 拥有的对象`SYS`，`SYSTEM`然后 Oracle 将其内存结构视图命名为例如`V$`（例如`v$session`）。但这些只是 Oracle 公司对其对象使用的命名约定。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-05T13:26:30.940

包含前缀**V$**的表是存储**易失性**信息的表。

**易失性信息**是由 Oracle 实例在使用时产生的（在使用中意味着实例已启动并正在运行）。易失性信息包括统计信息、用户的会话信息、内存分配。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-10T11:04:29.840

通常，这些是“属于”数据库的表 - 要么是因为它们由预定义用户之一（SYS，...）拥有，要么是因为 Oracle 将它们用于内务管理，例如

*   全文索引（这些被命名为 DR$... ）
*   物化视图日志（这些被命名为 RUPD$... 和 MLOG$...）

但是您不能依赖该规则，因为（正如 DazzaL 已经提到的），没有什么能阻止您创建自己的名称中带有美元符号的表。

# c# - 如何从非 Web AD 登录设置 CurrentPrincipal？

> ID：13799346
> 
> 赞同：0
> 
> 时间：2012-12-10T10:44:27.070
> 
> 标签：c#, active-directory

这似乎是非常基本的功能，但我最初的搜索没有产生任何东西......

我想使用 ActiveDirectory 从控制台应用程序登录，如果登录成功，则设置 Thread.CurrentPrincipal。我在网上找到的所有解决方案都假设您要使用 HTTP 身份验证。如何从非 HTTP 上下文中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:12:10.423

最简单的方法是进行一些 P/Invoke 调用以获取登录令牌，然后将其传递给[WindowsIdentity 构造函数](http://msdn.microsoft.com/en-us/library/85yh2h4a.aspx)（您将其传递给[WindowsPrincipal 构造函数](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsprincipal.windowsprincipal.aspx)）

[过去，这个问题](https://stackoverflow.com/questions/2563724/accessing-password-protected-network-drives-in-windows-in-c/2563809#2563809)帮助了我，它将使您达到 90% 的目标，除非您需要进行模拟，否则它将使您达到 100% 的目标:)

```
using System;
using System.Runtime.InteropServices;

/// <summary>
/// Implements P/Invoke Interop calls to the operating system.
/// </summary>
internal static class NativeMethods
{
    /// <summary>
    /// The type of logon operation to perform.
    /// </summary>
    internal enum LogonType : int
    {
        /// <summary>
        /// This logon type is intended for users who will be interactively
        /// using the computer, such as a user being logged on by a
        /// terminal server, remote shell, or similar process.
        /// This logon type has the additional expense of caching logon
        /// information for disconnected operations; therefore, it is
        /// inappropriate for some client/server applications, such as a
        /// mail server.
        /// </summary>
        Interactive = 2,

        /// <summary>
        /// This logon type is intended for high performance servers to
        /// authenticate plaintext passwords.
        /// The LogonUser function does not cache credentials for this
        /// logon type.
        /// </summary>
        Network = 3,

        /// <summary>
        /// This logon type is intended for batch servers, where processes
        /// may be executing on behalf of a user without their direct
        /// intervention.  This type is also for higher performance servers
        /// that process many plaintext authentication attempts at a time,
        /// such as mail or Web servers.
        /// The LogonUser function does not cache credentials for this
        /// logon type.
        /// </summary>
        Batch = 4,

        /// <summary>
        /// Indicates a service-type logon.  The account provided must have
        /// the service privilege enabled.
        /// </summary>
        Service = 5,

        /// <summary>
        /// This logon type is for GINA DLLs that log on users who will be
        /// interactively using the computer.
        /// This logon type can generate a unique audit record that shows
        /// when the workstation was unlocked.
        /// </summary>
        Unlock = 7,

        /// <summary>
        /// This logon type preserves the name and password in the
        /// authentication package, which allows the server to make
        /// connections to other network servers while impersonating the
        /// client.  A server can accept plaintext credentials from a
        /// client, call LogonUser, verify that the user can access the
        /// system across the network, and still communicate with other
        /// servers.
        /// NOTE: Windows NT:  This value is not supported.
        /// </summary>
        NetworkCleartext = 8,

        /// <summary>
        /// This logon type allows the caller to clone its current token
        /// and specify new credentials for outbound connections.  The new
        /// logon session has the same local identifier but uses different
        /// credentials for other network connections.
        /// NOTE: This logon type is supported only by the
        /// LOGON32_PROVIDER_WINNT50 logon provider.
        /// NOTE: Windows NT:  This value is not supported.
        /// </summary>
        NewCredentials = 9
    }

    /// <summary>
    /// Specifies the logon provider.
    /// </summary>
    internal enum LogonProvider : int
    {
        /// <summary>
        /// Use the standard logon provider for the system.
        /// The default security provider is negotiate, unless you pass
        /// NULL for the domain name and the user name is not in UPN format.
        /// In this case, the default provider is NTLM.
        /// NOTE: Windows 2000/NT:   The default security provider is NTLM.
        /// </summary>
        Default = 0,

        /// <summary>
        /// Use this provider if you'll be authenticating against a Windows
        /// NT 3.51 domain controller (uses the NT 3.51 logon provider).
        /// </summary>
        WinNT35 = 1,

        /// <summary>
        /// Use the NTLM logon provider.
        /// </summary>
        WinNT40 = 2,

        /// <summary>
        /// Use the negotiate logon provider.
        /// </summary>
        WinNT50 = 3
    }

    /// <summary>
    /// The type of logon operation to perform.
    /// </summary>
    internal enum SecurityImpersonationLevel : int
    {
        /// <summary>
        /// The server process cannot obtain identification information
        /// about the client, and it cannot impersonate the client.  It is
        /// defined with no value given, and thus, by ANSI C rules,
        /// defaults to a value of zero.
        /// </summary>
        Anonymous = 0,

        /// <summary>
        /// The server process can obtain information about the client,
        /// such as security identifiers and privileges, but it cannot
        /// impersonate the client.  This is useful for servers that export
        /// their own objects, for example, database products that export
        /// tables and views.  Using the retrieved client-security
        /// information, the server can make access-validation decisions
        /// without being able to use other services that are using the
        /// client's security context.
        /// </summary>
        Identification = 1,

        /// <summary>
        /// The server process can impersonate the client's security
        /// context on its local system.  The server cannot impersonate the
        /// client on remote systems.
        /// </summary>
        Impersonation = 2,

        /// <summary>
        /// The server process can impersonate the client's security
        /// context on remote systems.
        /// NOTE: Windows NT:  This impersonation level is not supported.
        /// </summary>
        Delegation = 3
    }

    /// <summary>
    /// Logs on the user.
    /// </summary>
    /// <param name="userName">Name of the user.</param>
    /// <param name="domain">The domain.</param>
    /// <param name="password">The password.</param>
    /// <param name="logonType">Type of the logon.</param>
    /// <param name="logonProvider">The logon provider.</param>
    /// <param name="token">The token.</param>
    /// <returns>True if the function succeeds, false if the function fails.
    /// To get extended error information, call GetLastError.</returns>
    [DllImport("advapi32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool LogonUser(
        string userName,
        string domain,
        string password,
        LogonType logonType,
        LogonProvider logonProvider,
        out IntPtr token);

    /// <summary>
    /// Duplicates the token.
    /// </summary>
    /// <param name="existingTokenHandle">The existing token
    /// handle.</param>
    /// <param name="securityImpersonationLevel">The security impersonation
    /// level.</param>
    /// <param name="duplicateTokenHandle">The duplicate token
    /// handle.</param>
    /// <returns>True if the function succeeds, false if the function fails.
    /// To get extended error information, call GetLastError.</returns>
    [DllImport("advapi32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool DuplicateToken(
        IntPtr existingTokenHandle,
        SecurityImpersonationLevel securityImpersonationLevel,
        out IntPtr duplicateTokenHandle);

    /// <summary>
    /// Closes the handle.
    /// </summary>
    /// <param name="handle">The handle.</param>
    /// <returns>True if the function succeeds, false if the function fails.
    /// To get extended error information, call GetLastError.</returns>
    [DllImport("kernel32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool CloseHandle(IntPtr handle);
} 
```

其次是

```
 IntPtr token;

    if (!NativeMethods.LogonUser(
        this.userName,
        this.domain,
        this.password,
        NativeMethods.LogonType.NewCredentials,
        NativeMethods.LogonProvider.Default,
        out token))
    {
        throw new Win32Exception();
    }

    try
    {
        IntPtr tokenDuplicate;

        if (!NativeMethods.DuplicateToken(
            token,
            NativeMethods.SecurityImpersonationLevel.Impersonation,
            out tokenDuplicate))
        {
            throw new Win32Exception();
        }

        try
        {
            using (WindowsImpersonationContext impersonationContext =
                new WindowsIdentity(tokenDuplicate).Impersonate())
            {
                // Do stuff as a impersonated context here.

                impersonationContext.Undo();
                return;
            }
        }
        finally
        {
            if (tokenDuplicate != IntPtr.Zero)
            {
                if (!NativeMethods.CloseHandle(tokenDuplicate))
                {
                    // Uncomment if you need to know this case.
                    ////throw new Win32Exception();
                }
            }
        }
    }
    finally
    {
        if (token != IntPtr.Zero)
        {
            if (!NativeMethods.CloseHandle(token))
            {
                // Uncomment if you need to know this case.
                ////throw new Win32Exception();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:57:27.817

这可能不像@ScottChamberlain 的回答那样“正确”，但我发现它对我有用。

首先，我使用表单身份验证进行身份验证，如此[处](http://support.microsoft.com/kb/326340)所述。VB中的代码；下面是一个 C# 实现：

```
var domainAndUsername = domain + "\\" + userName;
var entry = new DirectoryEntry(myADServicePath, domainAndUsername, password);
// Bind to the native AdsObject to force authentication.
var obj = entry.NativeObject;
var search = new DirectorySearcher(entry) { Filter = "(SAMAccountName=" + userName + ")" };
search.PropertiesToLoad.Add("cn");
var result = search.FindOne();
if (null == result)
{
  return null; // or whatever else indicates failed login in your context
} 
```

然后，要设置当前主体，我只使用了[GenericPrincipal](http://msdn.microsoft.com/en-us/library/system.security.principal.genericprincipal.aspx)：

```
var identity = new GenericIdentity(userName);
var principal = new GenericPrincipal(identity, myRoles); // I'll leave it to you to work out what roles there are
Thread.CurrentPrincipal = principal; 
```

# java - 你如何在java中的“\”上进行字符串拆分？

> ID：13799348
> 
> 赞同：0
> 
> 时间：2012-12-10T10:44:33.950
> 
> 标签：java, io, filereader

我在我的java项目中不断收到文件未找到错误，所以我查找了文件路径的代码并使用了它：

```
File here = new File(".");
System.out.println(here.getAbsolutePath()); 
```

一旦我用“/”切换“\”并将我的文件名附加到它，这就会起作用。

我试图通过代码来做到这一点，而不是手动将“\”更改为“/”，因为这是一项任务。它不会有相同的文件路径。

[我尝试将文件保存在每个级别（项目、Src 和包）中，但我无法让 FileReader 找到它]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:46:13.917

您必须在 Java 中转义 Windows 斜杠 - 添加两个斜杠而不是一个。

用这个：

```
String path = "c:\\foo\\bar"; 
```

而不是这个：

```
String path = "c:\foo\bar"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:49:38.157

只需为你的字符串/路径写这个

```
replace("/", "\\\\"); 
//or
replace("\\", "/"); 
```

Windows 可与双 \ 一起使用，但如果我没有完全错，这将不适用于 Linux。编写路径的常用方法是单个 /。这应该适用于每个操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:14:16.800

我不知道它是否有效，但我们在 CSharp 中尝试了此操作以避免连续写入“\”（双反斜杠）。这是避免双斜杠的方法

```
String path="~@\c:\foo\bar"; 
```

# c++ - Boost：使用 operator[] 访问 bimap

> ID：13799350
> 
> 赞同：2
> 
> 时间：2012-12-10T10:44:45.800
> 
> 标签：c++, boost, bimap

在以下代码中：

```
typedef bimap< set_of< std::string >, list_of< int > > bm_type;
bm_type bm;

bm.left["one"] = 1; // "one" -> 1
bm.left["one"] = 2; // replaced: "one" -> 2
bm.right[2] = "two"; // Compile error 
```

我怎样才能摆脱编译错误？是不是可以访问正确的视图`operator[]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:49:24.593

`list_of`没有`operator[]`。

看看[http://www.boost.org/doc/libs/1_47_0/libs/bimap/doc/html/boost_bimap/reference/list_of_reference.html](http://www.boost.org/doc/libs/1_47_0/libs/bimap/doc/html/boost_bimap/reference/list_of_reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:49:21.910

这段代码没有任何意义。[列表](http://www.cplusplus.com/reference/list/list/)没有，`operator[]`因为如果创建元素，您必须选择插入元素的位置。由于列表不是内部排序的（就像地图一样），所以 a`2`可以位于列表的开头、列表的结尾、列表的中间或其他任何地方。

（Boost`list_of`模仿标准的语义`list`。）

# jquery - jQuery 工具提示在悬停时出现在错误的位置

> ID：13799351
> 
> 赞同：0
> 
> 时间：2012-12-10T10:44:45.497
> 
> 标签：jquery, jquery-ui, tooltip

我正在使用 jQuery UI`position()`来定位自定义工具提示。我遇到的问题是工具提示总是出现在同一个地方（在表格的顶部），当我希望它在锚点悬停时出现（在表格行内）。

代码如下所示：

```
$('.sales-dashboard td a').on('hover', function() {    
    $('#tooltip')
        .insertAfter($(this))
        .toggleClass('is-hidden')
        .position({ 
            my: "left center", 
            at: "right center", 
            of: ".sales-dashboard td a" 
        });
}); 
```

表格行看起来像这样（工具提示 div 被插入到锚的结束标记之后）；

```
<tr class="even">
    <td><a href="#">123</a></td>
    <td>Code</td>
    <td>Valid</td>
    <td>Device is active</td>
</tr> 
```

如何让工具提示出现在悬停的锚点旁边？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:21:10.687

我已经通过在 position 方法中传递`this`给**of**并添加偏移量来修复工具提示的定位；

```
$('.sales-dashboard td a').on('hover', function () {

    $('#tooltip').insertAfter($(this)).toggleClass('is-hidden')
    .position({ my: "left center", at: "right center", of: $(this), offset: "20 0" });
}); 
```

# java - 单引号检测所需的正则表达式

> ID：13799357
> 
> 赞同：0
> 
> 时间：2012-12-10T10:45:00.917
> 
> 标签：java, regex, pattern-matching

我需要一个正则表达式来查找以下场景的 (Anand's & boy's) 中的单引号，

`'This has to be Anand's first task', 'A boy's friend works in France'`

考虑我有很多字段要插入到数据库中，就像我在上面的示例中显示的那样。

我对文本中有单引号的查询有错误。我需要找到它们并用 '' 两个单引号替换以解决此问题。

您能帮我为此目的编写正则表达式吗？因为我对正则表达式没有太多了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:54:55.447

您应该首先研究如何确保不会在输入中得到这些明显不正确的引号。但如果你不能，你有机会找到不带逗号（或字符串结尾）且前面不带逗号（或字符串开头）的引号：

```
String resultString = subjectString.replaceAll("(?<!^|, ?)'(?!,|$)", "''"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:54:59.780

如果这是 JDBC 场景，请尝试使用[Prepared Statements](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。这是一种比修改原始数据更好的方法，并且额外的好处是可以保护您免受 SQL 注入攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:52:25.330

1.  `String.split(",")`使用分隔符 "," ( )分割文本
2.  修剪每个结果字符串 ( `String.trim()`)
3.  删除结果字符串的第一个和最后一个字符（删除初始和最后的“'”（`String.subsequence()`）
4.  将 "'" 替换为 """ ( `String.replace()`)

# java - 在 JList 中显示值 -

> ID：13799358
> 
> 赞同：2
> 
> 时间：2012-12-10T10:45:07.647
> 
> 标签：java, swing, model, hashmap, jlist

我有一个返回 a 的方法，`HashMap`定义如下；

```
public HashMap<Integer, Animal> allAnimal(){

      return returnsAHashMap;
   } 
```

`Animal`在其类中将具有以下值：

```
public Animal{

int animalID;
String animalName;

// i have declared getters/setters
} 
```

我有一个 GUI 屏幕，它有一个`JList`，它被定义为：

```
l = new JList();
l.setModel(new AbstractListModel() {

        String[] v = new String[] {"animal id 1", "2", "3"};
        public int getSize() {
            return v.length;
        }
        public Object getElementAt(int index) {
            return v[index];
        }
    }); 
```

我想要做的是在 JList 中显示 AnimalID。我需要找到一种方法来调用该`allAnimal()`方法并在`JList`. 我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:02:28.523

你可以试试：

```
public int getSize() {
    return allAnimal().size();
}
public Object getElementAt(int index) {
    return allAnimal().keySet().toArray()[index];
} 
```

或者可以尝试：

```
 String[] v = null;
        v = allAnimals().keySet().toArray(v);
        public int getSize() {
            return v.length;
        }
        public Object getElementAt(int index) {
            return v[index];
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:03:56.050

你`AbstractListModel`是匿名的，所以首先将它提升到一个命名类，例如`MyListModel`. 然后添加一个方法来`MyListModel`接受一个`Map`或调用`allAnimal()`来获得一个。一旦您在模型中引用了`Map`，就可以将 转换`keySet`为数组，如此处所示[，](https://stackoverflow.com/a/9134371/230513)`get()`并使用 中每个`Map`条目的键`getElementAt()`。（可选）使用 对数组进行排序`Arrays.sort()`。

# objective-c - 检索 UITableViewCell 标签值以传递给模态编辑视图

> ID：13799359
> 
> 赞同：0
> 
> 时间：2012-12-10T10:45:12.193
> 
> 标签：objective-c, uitableview, core-data

我正在尝试将托管对象的现有属性值传递给模态 segue 视图进行编辑。从“编辑模式”开始，我将从 UITableViewController 子类 (BreadRackTableViewController)，通过嵌入式 UINavigationController 使用模态 segue 到 UIViewController 子类 (EditBreadRackTableViewController)。正常的 TableViewCell 选择会推送到另一个 UITableViewController 子类，但这暂时不重要。

我已将属性添加到我的编辑视图控制器标题（和@synthesized）中，以用作吸气剂：

```
@property (nonatomic, strong) id existingBreadRackDataName;
@property (nonatomic, strong) id existingBreadRackDataDetails; 
```

我要做的是用现有的核心数据实体属性填充编辑视图的字段，这些属性本来是由用户先前设置的（理论上）。如果我传递一个文字字符串值，我可以让数据显示出来，但我需要检索并传递现有数据。

这是我目前拥有的：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"editBreadRackSegue"])
    {
        EditBreadRackTableViewController *ebrtvc = (EditBreadRackTableViewController *)[segue destinationViewController];

        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        BreadRackClass *breadRackClass = [[self fetchedResultsController]objectAtIndexPath:indexPath];
        // [ebrtvc setBreadRackClass:breadRackClass];
        ebrtvc.existingBreadRackDataName = breadRackClass.breadRackDataName;
        ebrtvc.existingBreadRackDataDetails = [breadRackClass valueForKey:@"breadRackDataDetails"];
    }
} 
```

最后两行代码...

```
ebrtvc.existingBreadRackDataName = breadRackClass.breadRackDataName;
ebrtvc.existingBreadRackDataDetails = [breadRackClass valueForKey:@"breadRackDataDetails"]; 
```

...他们都返回零。但是，如果我指定一个文字字符串，该文字字符串会显示在它需要的位置。

说了这么多，我的问题是：

> 如何检索该选定行（或仅 textLabel 和 detailTextLabels）的属性键值，并将其分配给我的设置器？

**解决方案：**

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"editBreadRackSegue"])
    {
        NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
        BreadRackClass *breadRackClass = [[self fetchedResultsController]objectAtIndexPath:indexPath];
        [segue.destinationViewController setExistingBreadRackDataName:[breadRackClass valueForKey:@"breadRackDataName"]];
        [segue.destinationViewController setExistingBreadRackDataDetails:[breadRackClass valueForKey:@"breadRackDataDetails"]];
    }

    // code for other segues here...
} 
```

我最终删除了 ebrtv 变量，并稍微清理了代码。*但是，在为 breadRackClass 声明我的indexPath*时，使用的是*indexPathForCell:sender*而不是indexPathForSelectedRow。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:12:19.623

我认为 indexPathForSelectedRow 可能是个问题。

您可以将 indexPath 从 didSelectRowAtIndexPath 传递给 prepareForSegue ，例如：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"editBreadRackSegue" sender:indexPath];
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"editBreadRackSegue"])
    {
        NSIndexPath *clickedIndexPath = (NSIndexPath*)sender;
        if( [clickedIndexPath isKindOfClass:[NSIndexPath class]] ){

            BreadRackClass *breadRackClass = [[self fetchedResultsController]objectAtIndexPath:clickedIndexPath];

            EditBreadRackTableViewController *ebrtvc = (EditBreadRackTableViewController *)[segue destinationViewController];
            ebrtvc.existingBreadRackDataName = breadRackClass.breadRackDataName;
            ebrtvc.existingBreadRackDataDetails = [breadRackClass valueForKey:@"breadRackDataDetails"];
        }
    }
} 
```

请让我知道这对你有没有用。*

# php - 在 Plesk 上启用 SOAP

> ID：13799362
> 
> 赞同：4
> 
> 时间：2012-12-10T10:45:19.163
> 
> 标签：php, soap, plesk

之前有人问过这个问题，但没有一个解决方案对我有用。我主要关注这个——[在 PHP 上启用 SOAP](https://stackoverflow.com/questions/11014431/enable-soap-on-php)无济于事。我有一个 php 脚本，它给出了以下错误：

```
Error message: Fatal error: Class 'SoapClient' not found in /var/www/pathtofile/file.php on line 90 
```

我想需要在 Plesk 11.0.9 和 CentOS 5.6 (Final) 上安装soap。这是我在 php.ini 文件中的默认设置：

```
[soap]
; Enables or disables WSDL caching feature.
soap.wsdl_cache_enabled=1
; Sets the directory name where SOAP extension will put cache files.
soap.wsdl_cache_dir="/tmp"
; (time to live) Sets the number of second while cached file will be used
; instead of original one.
soap.wsdl_cache_ttl=86400 
```

和**php -i | grep 肥皂**给了我：

```
'--enable-soap=shared' 
```

如果我运行**yum install php-soap**我会得到以下信息：

```
Resolving Dependencies
--> Running transaction check
---> Package php-soap.i386 0:5.1.6-32.el5 set to be updated
--> Processing Dependency: php-common = 5.1.6-32.el5 for package: php-soap
--> Running transaction check
---> Package php-common.i386 0:5.1.6-32.el5 set to be updated
--> Processing Conflict: php53-common conflicts php-common
--> Finished Dependency Resolution
php53-common-5.3.3-13.el5_8.i386 from installed has depsolving problems
  --> php53-common conflicts with php-common
Error: php53-common conflicts with php-common 
```

如果我运行**yum install php53-soap**我得到以下信息：

```
Resolving Dependencies
--> Running transaction check
---> Package php53-soap.i386 0:5.3.3-5.el5 set to be updated
--> Processing Dependency: php53-common = 5.3.3-5.el5 for package: php53-soap
--> Finished Dependency Resolution
php53-soap-5.3.3-5.el5.i386 from base has depsolving problems
  --> Missing Dependency: php53-common = 5.3.3-5.el5 is needed by package php53-soap-5.3.3-5.el5.i386 (base)
Error: Missing Dependency: php53-common = 5.3.3-5.el5 is needed by package php53-soap-    5.3.3-5.el5.i386 (base) 
```

如果我运行**yum list available |** 我得到**的 grep 肥皂：**

```
php-soap.i386                            5.1.6-32.el5                     base
php53-soap.i386                          5.3.3-5.el5                      base 
```

如果我运行**yum list available | grep 肥皂**我得到以下信息：

```
php53-common-5.3.3-13.el5_8
php53-mysql-5.3.3-13.el5_8
php53-xml-5.3.3-13.el5_8
psa-php53-configurator-1.6.2-cos5.build110120608.16
php5-ioncube-loader-4.0.14-12042719
php53-5.3.3-13.el5_8
php53-mbstring-5.3.3-13.el5_8
php-pear-1.4.9-8.el5
psa11-php-fakepackage-11.0.9-cos5.build110120608.16
php53-pdo-5.3.3-13.el5_8
php53-imap-5.3.3-13.el5_8
php53-sqlite2-5.3.2-11070811
php53-cli-5.3.3-13.el5_8
php53-gd-5.3.3-13.el5_8
php53-devel-5.3.3-13.el5_8 
```

如果我运行**yum list | grep php**我得到：

```
php-pear.noarch                         1:1.4.9-8.el5                  installed
php5-ioncube-loader.i386                4.0.14-12042719                installed
php53.i386                              5.3.3-13.el5_8                 installed
php53-cli.i386                          5.3.3-13.el5_8                 installed
php53-common.i386                       5.3.3-13.el5_8                 installed
php53-devel.i386                        5.3.3-13.el5_8                 installed
php53-gd.i386                           5.3.3-13.el5_8                 installed
php53-imap.i386                         5.3.3-13.el5_8                 installed
php53-mbstring.i386                     5.3.3-13.el5_8                 installed
php53-mysql.i386                        5.3.3-13.el5_8                 installed
php53-pdo.i386                          5.3.3-13.el5_8                 installed
php53-sqlite2.i386                      5.3.2-11070811                 installed    
php53-xml.i386                          5.3.3-13.el5_8                 installed
psa-php53-configurator.i386             1.6.2-cos5.build110120608.16   installed
psa11-php-fakepackage.i386              11.0.9-cos5.build110120608.16  installed
graphviz-php.i386                       2.12-8.el5.centos              extras
php.i386                                5.1.6-32.el5                   base
php-bcmath.i386                         5.1.6-32.el5                   base
php-cli.i386                            5.1.6-32.el5                   base
php-common.i386                         5.1.6-32.el5                   base
php-dba.i386                            5.1.6-32.el5                   base
php-dbase.i386                          5.1.6-15.el5.centos.1          extras
php-devel.i386                          5.1.6-32.el5                   base
php-gd.i386                             5.1.6-32.el5                   base
php-imap.i386                           5.1.6-32.el5                   base
php-ldap.i386                           5.1.6-32.el5                   base
php-mbstring.i386                       5.1.6-32.el5                   base
php-mcrypt.i386                         5.1.6-15.el5.centos.1          extras
php-mhash.i386                          5.1.6-15.el5.centos.1          extras
php-mssql.i386                          5.1.6-15.el5.centos.1          extras
php-mysql.i386                          5.1.6-32.el5                   base
php-ncurses.i386                        5.1.6-32.el5                   base
php-odbc.i386                           5.1.6-32.el5                   base
php-pdo.i386                            5.1.6-32.el5                   base
php-pear-Auth-SASL.noarch               1.0.2-4.el5.centos             extras
php-pear-DB.noarch                      1.7.13-1.el5.centos            extras
php-pear-Date.noarch                    1.4.7-2.el5.centos             extras
php-pear-File.noarch                    1.2.2-1.el5.centos             extras
php-pear-HTTP-Request.noarch            1.4.2-1.el5.centos             extras
php-pear-Log.noarch                     1.9.13-1.el5.centos            extras
php-pear-MDB2.noarch                    2.4.1-2.el5.centos             extras
php-pear-MDB2-Driver-mysql.noarch       1.4.1-3.el5.centos             extras
php-pear-Mail.noarch                    1.1.14-1.el5.centos            extras
php-pear-Mail-Mime.noarch               1.4.0-1.el5.centos             extras
php-pear-Net-SMTP.noarch                1.2.10-1.el5.centos            extras
php-pear-Net-Sieve.noarch               1.1.5-2.el5.centos             extras
php-pear-Net-Socket.noarch              1.0.8-1.el5.centos             extras
php-pear-Net-URL.noarch                 1.0.15-1.el5.centos            extras
php-pecl-Fileinfo.i386                  1.0.4-3.el5.centos             extras
php-pecl-memcache.i386                  2.2.3-1.el5_2                  extras
php-pgsql.i386                          5.1.6-32.el5                   base
php-readline.i386                       5.1.6-15.el5.centos.1          extras
php-snmp.i386                           5.1.6-32.el5                   base
php-soap.i386                           5.1.6-32.el5                   base
php-tidy.i386                           5.1.6-15.el5.centos.1          extras
php-xml.i386                            5.1.6-32.el5                   base
php-xmlrpc.i386                         5.1.6-32.el5                   base
php53-bcmath.i386                       5.3.3-5.el5                    base
php53-dba.i386                          5.3.3-5.el5                    base
php53-intl.i386                         5.3.3-5.el5                    base
php53-ldap.i386                         5.3.3-5.el5                    base
php53-odbc.i386                         5.3.3-5.el5                    base
php53-pgsql.i386                        5.3.3-5.el5                    base
php53-process.i386                      5.3.3-5.el5                    base
php53-pspell.i386                       5.3.3-5.el5                    base
php53-snmp.i386                         5.3.3-5.el5                    base
php53-soap.i386                         5.3.3-5.el5                    base
php53-xmlrpc.i386                       5.3.3-5.el5                    base 
```

关于如何用肥皂解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:13:02.760

根本问题是，出于某种原因，您正在与之交谈的存储库具有 SOAP 扩展的 5.3.3- **5** .el5 版本，但您拥有 PHP 其余部分的更新版本，即 5.3.3- **13**版本。 el5_8。

这没什么意义，因为 -13.el5_8 是我在官方 CentOS 存储库中看到的所有 PHP 模块（包括 SOAP）的当前版本。

您可能想要`sudo yum clean all`并确保您的 repo 列表是最新的并使用正确的来源。如果不是因为您正在运行控制面板套件，我还推荐一个普通的旧的`sudo yum update`，但我不确定 Plesk 是否会喜欢它。

如果事实证明您实际上是在使用 Plesk 批准的存储库，您需要告诉*他们*开始行动。

# centos - YUM 从包中重新安装原始文件

> ID：13799365
> 
> 赞同：9
> 
> 时间：2012-12-10T10:45:38.373
> 
> 标签：centos, yum

我正在尝试在 CentOS 上重新安装一个软件包：`yum reinstall packagename`但是我仍然可以看到我在这个软件包的配置文件中所做的更改。

有没有办法强制重新加载包及其配置文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T01:40:04.713

检查软件包的重新安装是否还创建了文件名以“ **.rpmnew** ”结尾的配置文件。如果存在此类文件，它们将是文件的未修改版本。

如果不是这种情况，您是否可以分两步执行软件包重新安装，而不是一步？也就是先做`yum remove packagename`，再做`yum install packagename`。

如果以上都不能解决问题，解决问题的最简单方法是重命名或删除配置文件，然后重新安装 yum。

# python - 以有限的优先级启动子进程

> ID：13799371
> 
> 赞同：5
> 
> 时间：2012-12-10T10:45:56.593
> 
> 标签：python, windows, python-3.x, subprocess

我正在寻找一种如何使用`subprocess`具有低系统优先级的 Pythons 模块启动进程的方法，我已经发现：

*   [`Unix`](https://stackoverflow.com/questions/2463533/is-it-possible-to-renice-a-subprocess)使用[解决方案](https://stackoverflow.com/questions/2463533/is-it-possible-to-renice-a-subprocess)`preexec_fn`和`os.nice()`
*   [`resources`](http://docs.python.org/2/library/resource.html) 再次似乎只适用于的[模块](http://docs.python.org/2/library/resource.html)`Unix`
*   [linux的一些其他问题和答案](https://stackoverflow.com/questions/1689505/python-ulimit-and-nice-for-subprocess-call-subprocess-popen)

[手册](http://docs.python.org/2/library/subprocess.html)`priority`中没有提到。[`subprocess`](http://docs.python.org/2/library/subprocess.html)

我已经有了似乎有效的解决方案：

```
self.start_low_priority =  ('cmd', '/c', 'start', '/MIN', '/LOW', '/B', '/WAIT') 
```

*注意：* **开关`/B /WAIT`必须按此顺序才能正常工作**

并将其用作：

```
args = self.start_low_priority + ( 'foo.exe', 'bar', 'foobar')
subprocess.call( args, shell=False) 
```

但是这个解决方案似乎不是正确和干净的方式，而且[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)无法从这样启动的应用程序中构建正确的*“进程树”*（因此你没有能力*杀死进程树*）。

有没有什么*好的做法可以*为 Windows 做到这一点？Python 没有为此提供任何我错过的多平台解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:20:48.980

你可以使用[`psutil`](http://code.google.com/p/psutil/)图书馆。特别是，您可以将优先级设置设置`psutil.Process.nice`为所需的值。

另请参阅[此](https://stackoverflow.com/a/6245096/510937)答案以获取示例。

* * *

**编辑**：直接查看`psutil`'s 文档设置`Process.nice`已被弃用，您应该`Process.nice(value)`改用。

# linux - 有效的文件夹权限

> ID：13799373
> 
> 赞同：0
> 
> 时间：2012-12-10T10:45:59.160
> 
> 标签：linux, lamp, file-permissions

我正在 LAMP 上进行开发，并且已经了解到文件夹需要执行权限才能使用其中的文件。这是否意味着`chmod 100`我应该从这些地方开始？读取权限是否对文件夹执行任何操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:18:10.697

是的，需要对文件夹的读取权限才能列出文件夹的内容，换句话说，执行`ls`

# javascript - Twitter Bootstrap Modal 停止 Youtube 视频

> ID：13799377
> 
> 赞同：41
> 
> 时间：2012-12-10T10:46:20.053
> 
> 标签：javascript, jquery, twitter-bootstrap, youtube

我对 javascript 非常陌生，并尝试使用 Twitter 引导程序来快速启动和运行一个漂亮的网站。我知道这与 jquery 有关，但是当我按下关闭按钮或关闭图标时，我不确定如何停止我的视频。

有人可以解释一下如何让我的视频停止播放，因为即使我关闭窗口，我仍然可以在后台听到它。

```
<!-- Button to trigger modal -->
    <a href="#myModal" role="button" class="btn" data-toggle="modal"><img src="img/play.png"></a>

<!-- Modal -->
  <div id="myModal" class="modal hide fade" tabindex="-1" role=labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria>×</button>
      <h3 id="myModalLabel">I am the header</h3>
    </div>
    <div class="modal-body">
      <p><iframe width="100%" height="315" src="http:com/embed/662KGcqjT5Q" frameborder="0" allowfullscreen></iframe></p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2014-07-31T22:23:19.040

我知道我迟到了 2 年多，但从那时起，一些事情发生了变化，使用 B3 开箱即用的新方法是：

```
$("#myModal").on('hidden.bs.modal', function (e) {
    $("#myModal iframe").attr("src", $("#myModal iframe").attr("src"));
}); 
```

玩得开心！

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-10T11:14:51.010

有一种很好的正确方法 - 请参阅[此帖子](https://stackoverflow.com/questions/2128535/stop-a-youtube-video-with-jquery)的已批准答案中的评论。

虽然我自己第一次无法让它工作，而且很匆忙，所以我做了一个相当可怕的 hacky 代码来解决这个问题。

此代码段“刷新”嵌入 iframe 的 src，使其重新加载：

```
jQuery(".modal-backdrop, #myModal .close, #myModal .btn").live("click", function() {
        jQuery("#myModal iframe").attr("src", jQuery("#myModal iframe").attr("src"));
}); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-11-15T15:07:33.737

如果有人仍然有问题，试试这个，它对我有用：

```
$(document).ready(function(){
    $('.modal').each(function(){
            var src = $(this).find('iframe').attr('src');

        $(this).on('click', function(){

            $(this).find('iframe').attr('src', '');
            $(this).find('iframe').attr('src', src);

        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-30T17:28:23.680

这是我发现的一种简单方法，用于在模态窗口中播放视频，然后在关闭时停止播放。

当模态显示时，使用 .html 将带有视频的 iFrame 加载到模态体中，然后在隐藏时将模态体替换为空。

```
$('#myModal').on('show', function () { 
 $('div.modal-body').html('YouTube iFrame goes here');  
});
$('#myModal').on('hide', function () {
 $('div.modal-body').html('');
}); 
```

这是一个jsfiddle示例：

[http://jsfiddle.net/WrrM3/87/](http://jsfiddle.net/WrrM3/87/)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-06-26T17:21:02.140

在这里，我概括了@guillesalazar 的回答。

这将重置任何引导模式中的任何 iFrame（当模式关闭时）：

```
$(function(){
  $("body").on('hidden.bs.modal', function (e) {
    var $iframes = $(e.target).find("iframe");
    $iframes.each(function(index, iframe){
      $(iframe).attr("src", $(iframe).attr("src"));
    });
  });
}); 
```

将此添加到您的布局中，您就可以设置了。

**更新：**为具有多个 iFrame 的模式修改了代码。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-10-09T14:43:38.680

您应该先清空 iframe src，然后再重新设置。

所以我的工作答案：

```
$('#myModal').on('hidden.bs.modal', function () {
    var src = $(this).find('iframe').attr('src');
    $(this).find('iframe').attr('src', '');
    $(this).find('iframe').attr('src', src);
}); 
```

2014 年 10 月。对于 Bootstrap 3。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-07-21T16:26:31.190

这是我的解决方案，它使用引导事件调用解决了以下问题：

1.  显示模态时自动播放电影
2.  隐藏模式时停止电影

**模态中的HTML**轮播，第一个活动项是 iframe 视频

```
<button class="btn btn-primary" data-toggle="modal" data-target="#myModal">Modal</button>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div id="myCarousel" class="carousel slide carousel-fade" data-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        <div class="item active">
                            <div class="fill">
                                <iframe id="videoIframe" width="100%" height="100%" src="https://www.youtube.com/embed/UVAjm8b7YFg?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

**显示模态时Javascript**自动播放，然后重置 URL 并再次将其应用于 iframe src

```
$('#myModal').on('show.bs.modal', function() {
    $("#videoIframe")[0].src += "&autoplay=1";
});
$('#myModal').on('hidden.bs.modal', function(e) {
    var rawVideoURL = $("#videoIframe")[0].src;
    rawVideoURL = rawVideoURL.replace("&autoplay=1", "");
    $("#videoIframe")[0].src = rawVideoURL;
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-08T23:32:28.050

这个完美地做到了：

```
$("#myModal").on("hidden.bs.modal", function(t) {
   var o = $(t.target).find("iframe");
   o.each(function(t, o) {
      $(o).attr("src", $(o).attr("src"))
   });
}); 
```

但是，如果您希望在模态打开/关闭时启动它，请使用以下代码：

但请确保添加`enablejsapi=1`您的 src，例如：

```
<iframe src="https://www.youtube.com/embed/YOUR_VIDEO_CODE?rel=0&amp;controls=0&amp;showinfo=0&enablejsapi=1" frameborder="0" allowfullscreen></iframe>

function playStopVideo() {
    var youtubeFunc ='';
    var outerDiv = $("#myModal");
    var youtubeIframe = outerDiv.find("iframe")[0].contentWindow;
    outerDiv.on('hidden.bs.modal', function (e) {
        youtubeFunc = 'stopVideo';
        youtubeIframe.postMessage('{"event":"command","func":"' + youtubeFunc + '","args":""}', '*');
    });
    outerDiv.on('shown.bs.modal', function (e) {
        youtubeFunc = 'playVideo';
        youtubeIframe.postMessage('{"event":"command","func":"' + youtubeFunc + '","args":""}', '*');
    });
}

playStopVideo(); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-01-12T05:16:53.317

比所有这些答案更简单的方法就是替换整个 src。这适用于所有模式，您可以根据需要调整 iframe 类。

```
$('.modal').on('hidden.bs.modal', function(e) {
    var closestIframe = $(e.currentTarget).find('iframe');
    var rawVideoURL = $("iframe")[0].src;

    closestIframe[0].src = "";
    closestIframe[0].src = rawVideoURL;
  });
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-25T05:58:03.473

`hide.bs.modal`在事件的引导模式中重新加载任何 iframe 。

重置后修复 iframe 渲染的`setTimeout`延迟。`src`

```
$('.modal').on('hidden.bs.modal', function (event){
    let iframes = event.target.getElementsByTagName('iframe');
    for (let i = 0; i < iframes.length; i++) {
        let src_tmp = iframes[i].src;
        iframes[i].src = '';
        setTimeout(() => {
            iframes[i].src = src_tmp;
        }, 100);
    }
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-03-19T15:05:41.253

我结合使用[Ruslanas Balčiūnas](https://stackoverflow.com/a/13803287/1003940)和[Nathan McFarland](https://stackoverflow.com/a/14610053/1003940)的答案来编写适合我的代码。

```
$('#myModal').on('hide',function(){
   $('.modal-body iframe').attr('src','');
}); 
```

所以基本上这会在触发关闭模式事件时将`src`属性设置为空。`iframe`短而甜。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-05-29T08:12:28.420

我对这个适用于`Bootstrap 3`现代 YouTube`embed`格式的解决方案如下。

假设您的视频嵌入在一个标准`Bootstrap 3 Modal`中`id="#video-modal"`，这个简单的 Javascript 就可以完成这项工作。

```
$(document).ready(function(){
  $("#video-modal").on('hide.bs.modal', function(evt){
    var player = $(evt.target).find('iframe'),
        vidSrc = player.prop('src');
    player.prop('src', ''); // to force it to pause
    player.prop('src', vidSrc);
  });
}); 
```

*我已经看到了针对此问题的建议解决*方案`YouTube API`，涉及`https`使用*工作*，你会得到“*电视机到死频道*”的效果，而不是你的视频。`no-cookies`

 **我已经在我可以使用的每个浏览器上测试了上述内容，并且它工作得非常可靠。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-08-26T11:30:36.117

扩展 Guille 上面的答案，这是一个插入式功能，可与 Bootstrap 3（截至 8 月 14 日的最新版本的 youtube）一起使用，并**适用** 于一个页面中的多个视频/模态。

```
$(".modal").on('hidden.bs.modal', function(e) {
    $iframe = $(this).find( "iframe" );
    $iframe.attr("src", $iframe.attr("src"));
}); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-04-20T18:34:42.253

有一个包含许多视频的模式。@guillesalazar 更新了代码以关闭模式中的多个视频。

```
$("#myModal").on('hidden.bs.modal', function (e) {
            $("#myModal iframe").each(function () {
                $(this).attr("src", '');
            });
        }); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-05-31T15:06:15.873

7年后，我们仍然需要解决这个问题。

我们找到了修复它的最佳方法（灵感来自[RobCalvert123](https://stackoverflow.com/a/13799860/715091)答案）

```
 jQuery(".modal-backdrop, .modal.open .close,.modal.open .btn").live("click", function() {  
         // Get iframe opened 
         var iframe_open = jQuery('.modal.open');     
         // Get src from opened iframe 
         var src = iframe_open.attr('src');
         // replace src by src to stop it that's the tips
        iframe_open.attr("src", src);
}); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-07-20T11:38:31.263

## 1\. 在您的页面上嵌入 Youtube (html)

### 将 Youtube div 容器添加到您的网站：

```
<div id="ytplayer">This will be replaced with the Youtube iFrame</div> 
```

### 添加 Youtube Javascript Api (iFrame)

```
<script>
    // Ads Youtube JS API
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // This function creates an <iframe> (and YouTube player) after the API code downloads.
    var player;
    function onYouTubeIframeAPIReady() {
    player = new YT.Player('ytplayer', {
      height: '390',
      width: '640',
      videoId: 'ncif63mSZl4',
        WMode: 'transparent',
        wmode: 'opaque',
        playerVars: {
            'autoplay': 0,
            'controls': 0,
            'autohide':1,
            'rel':0,
            'showinfo': 0,
            'modestbranding': 1,
        },
      });
    }

   function stopVideo() {
    player.stopVideo();
   }

   function pauseVideo() {
    player.pauseVideo();
   }

   function playVideo(){
    player.playVideo();
   }
</script> 
```

## 使用 jQuery 进行控制（引导模式）

```
 // Open Modal and start Playing Youtube Video
  $("#myModalTrigger").click(function(){
    $("#video-modal").modal(); // opens up the Modal
    playVideo(); // Starts playing Video
  });

  // Stop Player on Modal hide
  $('#video-modal').on('hide.bs.modal', function (e) {
    stopVideo(); // stop player
  }); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-12-10T14:49:50.357

```
$('#myModal').on('hide', function () {
    $('#video_player')[0].stopVideo();
}) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-04-14T10:25:59.057

@guillesalazaar 的回答只是我修复的前半部分，所以我觉得有必要分享我的情况，以防将来对某人有所帮助。我也有一个嵌入的 youtube 视频，但我将我的视频设置为在使用`autoplay=1`. 为了解决页面加载时的自动播放问题，我将我的 youtube url 存储在一个变量中，该变量使用点击处理程序设置 iframe 源。为了解决这个问题，我只是删除了属性源链接：

我的 URL 来触发模态窗口：

```
 <div id="movieClick" class="text-center winner"> 
<a href="#" data-toggle="modal" data-keyboard="true" data-target="#movie">
    </div> 
```

我隐藏的模态窗口 div：

```
<div id="movie" class="modal fade" role="dialog" tabindex='-1'>
    <div class="modal-dialog">

<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">They Live (1988)</h4>
    </div>
     <div class="modal-body">
        <iframe id="onscreen" width="100%" height="460px" src="" frameborder="0" allowfullscreen></iframe>

      </div>
</div>

</div>
</div> 
```

我的 JS：

```
$("#movieClick").click(function(){
var theLink  = "https://www.youtube.com/embed/Wp_K8prLfso?autoplay=1&rel=0";
document.getElementById("onscreen").src = theLink;
});

// really annoying to play in the Background...this disables the link
$("#movie").on('hidden.bs.modal', function (e) {
    $("#movie iframe").attr("src", '');
}); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-02-12T11:42:38.453

```
 //stop youtube video on modal close
$('.modal').on('hidden.bs.modal', function () {
    var iframVideo = $('.modal').find('iframe');
    $(iframVideo).attr("src", $(iframVideo).attr("src"));
}); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-04-05T12:53:45.427

[我使用HTML data-* 属性](https://getbootstrap.com/docs/4.1/components/modal/#varying-modal-content)处理 2 个或更多 Youtube 视频的解决方案。当模式打开和关闭时，视频会*自动播放*并*停止。*

```
<button data-url="https://www.youtube.com/embed/C0DPdy98e4c" data-toggle="modal" data-target="#mymodal">Video 1</button>
<button data-url="https://www.youtube.com/embed/ScMzIvxBSi4" data-toggle="modal" data-target="#mymodal">Video 2</button>

<!-- Modal -->
<div id="mymodal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Close</button>
        </div>
        <div class="embed-responsive embed-responsive-16by9">
          <iframe class="embed-responsive-item" src="" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div>
</div> 
```

```
$('.modal').on('show.bs.modal', function (event) {
  $(this).find('iframe').attr("src", $(event.relatedTarget).data('url') );
});

$('.modal').on('hidden.bs.modal', function (e) {
    $(this).find('iframe').attr("src", "");
}); 
```

这是一个 Codepen 演示： [https ://codepen.io/danielblazquez/pen/oOxRJq](https://codepen.io/danielblazquez/pen/oOxRJq)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-05-01T15:53:07.957

**对于角度或动态 html，或者如果我们有多个 iframe，则使用如下**

```
$("#myModal").on('hidden.bs.modal', function (e) {
  $("#myModal iframe").each(function(){
    $(this).attr("src", $(this).attr("src"));
  });
}); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-01-11T12:31:41.527

如果您有多个带有许多视频的模态，例如，假设您在轮播上的每张幻灯片上都有一个模态，您需要更动态的东西来关闭/停止可见幻灯片中的视频，而不是弄乱所有其他模态，使用这个：

```
$(".modal").on('hidden.bs.modal', function (e) {
      $(this).find("iframe").attr("src", $(this).find("iframe").attr("src"));
  }); 
```**

# macos - cocoa :OSX : 在现有数据库中读写数据

> ID：13799384
> 
> 赞同：0
> 
> 时间：2012-12-10T10:46:41.383
> 
> 标签：macos, sqlite

我的项目中有一个 database.sqlite 文件（MAC 桌面应用程序） 表名：tbname 属性：id（主键）、名称、状态

我想从对应于“id”属性的 database.sqlite 文件中读取全部内容，并写入 database.sqlite

# python - 带有 __le__、__ge__ 的 python 错误？

> ID：13799386
> 
> 赞同：6
> 
> 时间：2012-12-10T10:46:48.627
> 
> 标签：python

是我还是 python 与以下代码混淆了？我希望`__le__`被调用`a <= ab`，而不是`__ge__`：

```
#!/usr/bin/env python2

class B(object):
    def __ge__(self, other):
        print("__ge__ unexpectedly called")

class A(object):
    def __le__(self, other):
        print("__le__ called")

class AB(A, B):
    pass

a = A()
ab = AB()

a <= ab # --> __ge__ unexpectedly called
ab <= a # --> __le__ called 
```

我在 python 2.7、3.2 和 pypy 1.9 中得到了相同的行为。

我能做些什么来`__le__`代替`__ge__`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T11:02:56.853

简短的回答是他们希望允许`AB`覆盖来自`A`. Python 不能调用`AB.__lt__(a, ab)`，因为`a`它可能`self`对`AB`方法无效，所以它调用了`AB.__gt__(ab, a)`，这是有效的。

长答案有点复杂。

根据[丰富比较运算符](http://docs.python.org/2/reference/datamodel.html#object.__lt__)的文档：

> 这些方法没有交换参数版本（当左参数不支持操作但右参数支持时使用）；相反，`__lt__()`和`__gt__()`是彼此的反映，`__le__()`并且`__ge__()`是彼此的反映，`__eq__()`并且`__ne__()`是自己的反映。

换句话说，`x <= y`will call`y.__ge__(x)`在完全相同的情况下`x+y`会 call `y.__radd__(x)`。比较：

```
>>> class X(object):
...     def __add__(self, other):
...         print('X.add')
>>> class Y(object):
...     def __radd__(self, other):
...         print('Y.radd')
>>> class XY(X, Y):
...     pass
>>> x, xy = X(), XY()
>>> x + xy
Y.radd 
```

根据[反射运算符](http://docs.python.org/2/reference/datamodel.html#object.__radd__)的文档：

> 调用这些方法来实现二进制算术运算……使用反射（交换）操作数。这些函数只有在左操作数不支持相应操作且操作数属于不同类型时才会被调用……</p>
> 
> **注意**：如果右操作数的类型是左操作数类型的子类，并且该子类为操作提供了反射方法，则该方法将在左操作数的非反射方法之前调用。此行为允许子类覆盖其祖先的操作。

因此，因为`XY`是 的子类，`X`所以`XY.__radd__`优先于`X.__add__`。同样，因为`AB`是 的子类`A`，所以`AB.__ge__`优先于`A.__le__`。

这可能应该更好地记录下来。要弄清楚，您必须忽略括号“当左参数不支持操作但右参数支持时使用”，猜测您需要查找正常的交换运算符（没有链接，甚至提到, 这里），然后忽略“仅当左操作数不支持相应操作时才调用这些函数”的措辞，并查看与上面的内容相矛盾的“注释”……还要注意文档明确说，“比较运算符之间没有隐含关系”，只有在描述交换案例之前的一段，这暗示了这种关系……</p>

最后，这种情况看起来很奇怪，因为`AB`不是覆盖`__ge__`它自己，而是从 继承它`B`，它对它一无所知`A`并且与它无关。大概`B`不打算让它的子类覆盖`A`的行为。但是，如果`B`打算将其用作 -`A`派生类的 mixin，那么它可能正是*想要*这样的覆盖。无论如何，该规则可能已经足够复杂，而无需深入探讨每种方法在 MRO 中的来源。无论是什么推理，`__ge__`来自哪里都无关紧要；如果它在子类上，它会被调用。

对于您添加的决赛，问题是“我可以做些什么来`__le__`代替`__ge__`??”......好吧，你真的不能，就像你可以`X.__add__`代替`XY.__radd__`. 当然，您始终可以实现调用(or `AB.__ge__`)的 (or )，但是以这样一种方式实现它可能更容易，即它首先与 an作为其另一个参数一起使用。或者，您可以删除继承并找到其他方法来建模您以这种方式建模的任何内容。或者您可以显式调用而不是`XY.__radd__``A.__le__``X.__add__``AB.__ge__``A``a.__le__(ab)``a<=ab`. 但是否则，如果您以利用“无隐含关系”的方式设计类来做一些奇怪的事情，那么您会被文档误导，并且必须以某种方式重新设计它们。

# python - 安装 python mptt 权限被拒绝

> ID：13799391
> 
> 赞同：0
> 
> 时间：2012-12-10T10:46:59.283
> 
> 标签：python, ubuntu, django-mptt, ubuntu-12.10

```
~/Django-1.4.2/django-mptt-0.5.5$ python ./setup.py install
running install
running build
running build_py
running install_lib
creating /usr/local/lib/python2.7/dist-packages/mptt
error: could not create '/usr/local/lib/python2.7/dist-packages/mptt': Permission denied 
```

我正在尝试为 django 安装 mptt。问题是我似乎无法在 /usr/local/.../python2.7 中创建新文件。原因是：我不是所有者。

我该如何改变呢？（这是我的电脑）。
或者，有没有更好的安装方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:50:59.033

您需要具有 root 访问权限才能安装软件包。尝试使用以下内容：

```
sudo python setup.py install 
```

# spring - jetty-maven-plugin 和 loadTimeWeaver

> ID：13799393
> 
> 赞同：11
> 
> 时间：2012-12-10T10:47:03.340
> 
> 标签：spring, maven, jetty, eclipselink, load-time-weaving

似乎无法让我的 spring webapp 与 jetty-maven 插件一起使用

我总是得到

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'loadTimeWeaver': Initialization of bean failed; nested exception is java.lang.IllegalStateException: ClassLoader [org.eclipse.jetty.webapp.WebAppClassLoader] does NOT provide an 'addTransformer(ClassFileTransformer)' method. Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring's agent: -javaagent:org.springframework.instrument.jar 
```

虽然我有：

*   将 MAVEN_OPTS 设置为 javaagent:/Users/blabla/.m2/repository/org/springframework/spring-instrument/3.1.3.RELEASE/spring-instrument-3.1.3.RELEASE.jar
*   将 JAVA_OPTIONS 设置为相同的东西
*   将 dep 添加到**spring-instrument**和**spring-aspects**
*   添加`jvmArgs`到 `-javaagent:....`jetty-maven-plugin 配置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:19:26.660

从 Maven 启动 Jetty（使用 mvn jetty:run）时，Jetty 将在与 maven 相同的 JVM 中运行，因此您需要使用 MAVEN_OPTS 传递任何选项。

（请务必在 javaagent 之前包含减号，因为我在您的代码段中没有看到它）。

导出 MAVEN_OPTS=-javaagent:org.springframework.instrument-3.0.5.RELEASE.jar

可以在 Github 上找到使用 Maven 在码头中编织加载时间的完整示例。

[https://github.com/zzantozz/testbed/tree/master/spring-aspectj-load-time-weaving-in-jetty](https://github.com/zzantozz/testbed/tree/master/spring-aspectj-load-time-weaving-in-jetty)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:54:36.420

可能你缺少几个罐子`aspectjweaver` `aspectjrt` `spring-instrument`

此外，您可能想尝试`loadTimeWeaver`在 applicationcontext.xml 文件中显式定义 bean。

```
 <property name="loadTimeWeaver">
        <bean id="instrumentationLoadTimeWeaver" class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
    </property> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:38:19.473

如果没有关于您的 pom.xml 文件的更多详细信息……这并不容易。但是 jetty 插件的一个常见问题是依赖关系。

一直对我有用的一条规则是将战争的所有依赖项与提供的范围作为 maven-jetty-plugin 的直接依赖项。

我建议您也将 spring-instrument 和 spring-aspects 作为 maven-jetty-plugin 的直接依赖项。

根据我的理解：

> 将 MAVEN_OPTS 设置为 javaagent:/Users/blabla/.m2/repository/org/springframework/spring-instrument/3.1.3.RELEASE/spring-instrument-3.1.3.RELEASE.jar

是将 jvm args 传递给 jetty JVM 的正确方法（因为 jetty 在与 maven 相同的 JVM 中运行）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T04:17:09.260

我遇到了同样的问题[，我在春天使用加载时间编织。如何在码头设置类加载器？](https://stackoverflow.com/questions/23924916/i-use-load-time-weaving-in-spring-how-can-i-set-class-loader-in-jetty). 我通过添加“-Xbootclasspath/a:[path to jar]”作为 JvmArgs 参数解决了这个问题。

现在看起来像

```
<extraJvmArgs>-Xmx4g -XX:MaxPermSize=512m -javaagent:C:\Users\auldanov\.m2\repository\org\springframework\spring-instrument\3.1.4.RELEASE\spring-instrument-3.1.4.RELEASE.jar -Xbootclasspath/a:C:\Users\auldanov\.m2\repository\org\springframework\spring-instrument\3.1.4.RELEASE\spring-instrument-3.1.4.RELEASE.jar</extraJvmArgs> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-18T09:53:38.550

我终于按照 ddewaele 的例子让它工作了。所以除了做

*   将 MAVEN_OPTS 设置为 javaagent:/Users/blabla/.m2/repository/org/springframework/spring-instrument/3.1.3.RELEASE/spring-instrument-3.1.3.RELEASE.jar

您必须检查已添加的依赖项。我错过了spring-tx。你需要有这些依赖：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aspects</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.6.10</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency>
<!-- Following dependencies are required because of spring-aspects -->
<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.0-api</artifactId>
    <version>1.0.0.Final</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-tx</artifactId>
    <version>3.0.5.RELEASE</version>
</dependency> 
```

否则你会得到那个非直觉的错误

> 指定自定义 LoadTimeWeaver 或使用 Spring 代理启动 Java 虚拟机：-javaagent:org.springframework.instrument.jar

注意：您可以使用所需的弹簧版本。我对一切都使用 3.2.5。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-18T12:35:06.420

想警告大家！这个问题非常不清楚。不要将此依赖项包含到您的项目中或包含在提供的范围内。

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-instrument</artifactId>
    <version>${thirdparty.spring.version}</version>
</dependency> 
```

否则代理类 InstrumentationSavingAgent 将加载两次（第一次在加载代理时，第二次在链接库时）并且 spring 将使用第二个 Class 实例而不注入 Instrumentation

# ios - 使用 phonegap ios 应用程序在后台启用下载

> ID：13799395
> 
> 赞同：2
> 
> 时间：2012-12-10T10:47:14.027
> 
> 标签：ios, cordova, background-process

我正在使用 phonegap 2.2.0 开发一个 ios 应用程序。该应用程序需要下载一些我正在使用 FileTransfer 进行的视频。问题是如果应用程序进入后台，即如果屏幕被锁定或按下主页键，下载将被取消。即使应用程序在后台，我也需要继续下载视频。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:02:53.983

问题是您的应用程序在短时间处于后台模式后被挂起，因此它不再执行代码。您需要将您的应用程序声明并实现为服务（Info.plist 中的 UIBackgroundModes），或延迟暂停（在 applicationDidEnterBackground 处理程序中）。如果您是纯粹的 PhoneGap 开发人员，这两种情况都很棘手。

我为 iOS 编写了一个小的 PhoneGap[插件](https://github.com/hermankan/BackgroundMode)，它检查应用程序是否调用了后台模式，如果是，则阻止它暂停（通常最多 10 分钟），直到模式被撤销。

有关更多详细信息，请参阅[本文](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。

# c# - 如何从另一个类引用函数的变量？- C＃

> ID：13799396
> 
> 赞同：-3
> 
> 时间：2012-12-10T10:47:15.037
> 
> 标签：c#

我从另一个可用于我的 Game1（主）类的类的函数中获取一个变量，这真是太棒了。具体来说，我想从 SetWindowSize.cs 中的 SaveData 函数中获取宽度和高度，并在 Game1.cs 的 ReadSettings 中使用它。

我得到错误

> “ShovelShovel.SetWindowSize”不包含“高度”的定义。“宽度”也一样。

Game1.cs（仅限函数）

```
protected void ReadSettings()
{
    try
    {
        if (File.Exists(SetWindowSize.savePath))
        {
            using (FileStream fileStream = new FileStream(SetWindowSize.savePath,
                                                          FileMode.Open))
            {
                using (BinaryReader binaryReader = new BinaryReader(fileStream))
                {
                    SetWindowSize.width = binaryReader.ReadInt32();
                    SetWindowSize.height = binaryReader.ReadInt32();
                }
            }
        }
    }
    catch
    {
    }
} 
```

设置窗口大小.cs

```
namespace ShovelShovel
{
            protected void ReadSettings()
    {
        try
        {
            if (File.Exists(savePath))
            {
                using (FileStream fileStream = new FileStream(savePath, FileMode.Open))
                {
                    using (BinaryReader binaryReader = new BinaryReader(fileStream))
                    {
                        var windowSize = WindowSizeStorage.ReadSettings();

                        WindowSize.Width = windowSize.Width;
                        WindowSize.Height = windowSize.Height;
                    }
                }
            }
        }
        catch
        {
        }
    } 
```

非常感谢任何可以帮助我的人，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:56:36.377

这可能会奏效：

```
public class WindowSize
{
    public int Width { get; set; }
    public int Height { get; set; }
}

public static class WindowSizeStorage
{
    public static string savePath = "WindowSize.dat";

    public static WindowSize ReadSettings()
    {   
        var result = new WindowSize();
        using (FileStream fileStream = new FileStream(SetWindowSize.savePath, FileMode.Open))
        {
            using (BinaryReader binaryReader = new BinaryReader(fileStream))
            {
                result.Width = binaryReader.ReadInt32();
                result.Height = binaryReader.ReadInt32();
            }
        }

        return result;
    }

    public static void WriteSettings(WindowSize toSave)
    {
        using (BinaryWriter binaryWriter = new BinaryWriter(File.Open(savePath, FileMode.Create)))
        {
            binaryWriter.Write(toSave.Width);
            binaryWriter.Write(toSave.Height);
        }
    }
} 
```

用法：

```
// Read
var windowSize = WindowSizeStorage.ReadSettings();

myForm.Width = windowSize.Width;
myForm.Height = windowSize.Height;

// Write
var windowSize = new WindowSize { Width = myForm.Width, Height = myForm.Height };

WindowSizeStorage.WriteSettings(windowSize); 
```

请注意，写这样的答案（呈现所有代码）不是常见的方式；我只是觉得。我试图展示一些面向对象的设计原则，每个类都做自己的事情。

如果您想在方法之间传输复杂对象（即不止一种原始类型），您通常会创建一个数据传输对象 (DTO)，例如`WindowSize`.

该类具有存储和检索此类对象`WindowSizeStorage`的唯一责任。`WindowSize`从您的代码中，您只需告诉存储存储或检索您希望的设置。

但正如我从您的问题和评论中得知的那样，您没有太多使用 C# 的经验，或者可能根本没有任何编程经验。尝试学习一两个教程，以便您了解如何将您的想法转化为代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:51:14.890

您不能访问该函数之外的函数变量。为了实现这些定义静态变量，将高度和宽度分配给静态变量，然后在任何你想要的地方访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:53:55.100

函数的目的不是存储和公开变量。如果变量的范围不够宽，您将无法访问它们。在您的情况下，您应该通过将它们存储在类中并将它们公开，以某种方式公开它们，例如：

```
class SetWindowSize
{
    public const string savePath = "file.dat";

    public int width {get; set; }
    public int height {get; set; }

    public static void SaveData(string width, string height)
    {            
        using (BinaryWriter binaryWriter = new BinaryWriter(File.Open(savePath, FileMode.Create)))
        {
            binaryWriter.Write(width);
            binaryWriter.Write(height);
            SetWindowSize.width = width;
            SetWindowSize.height = height;
        }
    }
}
} 
```

这远非最佳，但它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:54:03.900

您的 SetWindowSize 类不包含宽度或高度成员。您可以将它们添加为属性：

```
public class SetWindowSize
{
// other stuff
public int Height {get;set;}
public int Width {get;set;}
// other stuff
} 
```

然后您可以使用 SetWindowSize 实例访问它们：

```
SetWindowSize sws = new SetWindowSize();
sws.Height = 512;
sws.Width = 512; 
```

# wpf - 如何将在 WPF 3.0 下构建的应用程序转换为 4.5

> ID：13799406
> 
> 赞同：-1
> 
> 时间：2012-12-10T10:48:04.107
> 
> 标签：wpf

我在 WPF 3.0 中构建了一个应用程序，但我想切换到 WPF 4.5，它是如何成为可能的，是否有任何切换问题？

请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:53:50.233

只需转到`Project -> Properties`更改`target framework`为 .NET 4.5。
Visual Studio 会将项目转换为相关版本

# c# - C# 我应该在连接池中保持打开的连接吗

> ID：13799407
> 
> 赞同：6
> 
> 时间：2012-12-10T10:48:08.823
> 
> 标签：c#, database

我正在开发多线程应用程序（服务器），我曾经一次处理 2000 个客户端，并且我在每个线程中打开 MySQL 数据库的单独数据库连接。所以我启用了连接池。我搜索了许多块，在使用连接后我们应该关闭它，然后它将返回池并被其他线程使用。另一方面，我们知道建立连接是一个耗时的过程。所以我的问题是为什么我们要在连接池中关闭连接。什么是更好的保持连接打开或关闭它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T10:52:05.207

> 我们知道建立连接是一个耗时的过程

正确 - 这就是我们有连接池的原因。它们保持连接，因此您无需创建新连接。

> 为什么我们要在连接池中关闭连接

因此它们被返回到池中以供其他线程使用。

连接是昂贵的资源，因此您希望尽快打开、使用和关闭它们，以便它们返回池中并可供其他线程使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:52:37.340

当您“关闭”池中的连接时；您是说您已完成连接并且池可以再次使用它。

调用 Close 不会物理地断开连接。池有自己的逻辑来确定连接何时物理关闭。

# c# - 如何找出 ServiceHost Faulted 事件的原因

> ID：13799408
> 
> 赞同：9
> 
> 时间：2012-12-10T10:48:10.417
> 
> 标签：c#, wcf, windows-services, servicehost

我有一个继承自 ServiceBase 的*MyServiceBase*类。在 MyService 中，我有一个用于我的 WCF 服务的 ServiceHost，它只有一个具有 IsOneWay=true 属性的方法。我用这段代码来初始化它：

```
host = new ServiceHost(typeof(MyService));
host.Opened += new EventHandler(host_Opened);
host.Closed += new EventHandler(host_Closed);
host.Faulted += new EventHandler(host_Faulted);
host.UnknownMessageReceived += new EventHandler<UnknownMessageReceivedEventArgs>(host_UnknownMessageReceived);
host.Open(); 
```

有时主机引发故障事件，但 *host_Faulted* 方法中的 EventArgs 始终为空，所以我无法找出它的原因。请帮忙。对此表示感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T12:42:55.997

此链接可能对更好的 WCF 故障处理和调试方法有用：

[如何防止 WCF 服务进入故障状态？](https://stackoverflow.com/questions/315736/how-do-i-prevent-a-wcf-service-from-enter-a-faulted-state)

因此，我没有回答您的具体问题，而是推荐一种更好的方法来满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T22:18:00.393

我今天遇到了这个问题。通过启用 WCF 跟踪，它有所帮助，但没有给我原因。经过大量的调试工作，我发现真正的原因是：使用WCF服务的客户端崩溃了。由于客户端是一个封装的 Windows 服务，并且它的状态仍然是“运行中”。

所以我的建议是：尝试/捕获客户端应用程序中的所有代码块。

# database - 从数据库创建 JPA

> ID：13799409
> 
> 赞同：4
> 
> 时间：2012-12-10T10:48:11.090
> 
> 标签：database, jpa, code-generation, dao, dto

我知道这是一个重复的问题。但即使我找不到任何工具来从数据库源创建 JPA 实体文件。我用eclipse来做到这一点。我只得到了带有 getter 和 setter 的 DTO 类。任何人都可以建议一些创建DAO文件的工具。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-20T16:27:47.553

您可以使用 Telosys Tools，这是一个 Eclipse 插件，可从现有数据库中使用可定制的 Velocity 模板

请参阅：[https ://sites.google.com/site/telosystools/](https://sites.google.com/site/telosystools/)

Eclipse 市场：[http ://marketplace.eclipse.org/content/telosys-tools](http://marketplace.eclipse.org/content/telosys-tools)

对于 JPA 生成，请使用 GitHub 上提供的 JPA 模板集：[https ://github.com/telosys-tools](https://github.com/telosys-tools)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:59:33.190

您可以使用 netbeans 而不是 eclipse。创建自己的项目后，您可以在 netbeans 菜单中选择“实体类中的 JPA 控制器类”。例如[http://ensode.net/roller/dheffelfinger/entry/automated_dao_generation_from_jpa](http://ensode.net/roller/dheffelfinger/entry/automated_dao_generation_from_jpa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T20:36:01.097

[Minuteproject](http://minuteproject.wikispaces.com/)是一个生成器工具，可以从数据库生成[JPA2工件。](http://minuteproject.wikispaces.com/JPA2)

您可以指示生成器为您的 java 代码应用不遵循 DB 约定的约定，但映射将是正确的。（示例去除数据库名称前缀；以 ADMIN_ 开头的表，例如 ADMIN_ENVIRONMENT 是环境（无管理员）作为 java 类）目前有 20 多种约定可以帮助您重塑模型以减少数据库外观Java-OO 友好的。

如果你想要 DAO minuteproject 有一个生成 spring-integrated DAO的 track [BSLA](http://minuteproject.wikispaces.com/BSLA)

# java - http调用执行中的资源泄漏

> ID：13799411
> 
> 赞同：1
> 
> 时间：2012-12-10T10:48:12.400
> 
> 标签：java, android, android-strictmode, resource-leak

执行此代码时，我收到以下错误消息。

**在附加的堆栈跟踪中获取了资源，但从未释放。有关避免资源泄漏的信息，请参阅 java.io.Closeable。：**

我无法识别以下代码中的资源泄漏。如果有人指出我实际上做错了什么，我会很感激。

```
HttpPost request = new HttpPost(url);
        StringBuilder sb = new StringBuilder();
        StringEntity entity = new StringEntity(jsonString);
        entity.setContentType("application/json;charset=UTF-8");
        entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json;charset=UTF-8"));
        request.setHeader("Accept", "application/json");
        request.setEntity(entity);

        HttpResponse response = null;
        DefaultHttpClient httpclient = getHttpClientImpl();

        BufferedReader reader = null;
        InputStream in = null;
        try {
            response = httpclient.execute(request);
            in = response.getEntity().getContent();
            reader = new BufferedReader(new InputStreamReader(in));
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception se) {
            Log.e("Exception", se + "");
            throw se;
        } finally {
            if (in != null)
                in.close();

            if (reader != null)
                reader.close();

            if (client != null && client.getConnectionManager() != null) {
        client.getConnectionManager().shutdown();
    }
        }
        return sb.toString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:00:37.790

我真的没有看到该代码有任何问题，但我建议关闭池中的所有空闲连接。

```
public abstract void closeIdleConnections (long idletime, TimeUnit tunit) 
```

此外，在未完全正确配置的情况下，DefaultHttpClient 存在一些已知问题。我建议使用 AndroidHttpClient 作为 HttpClient 接口的实现。请访问以下文档以获取说明：

[http://developer.android.com/reference/android/net/http/AndroidHttpClient.html](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)

# php - PHP：如何创建具有活动记录的表？

> ID：13799412
> 
> 赞同：1
> 
> 时间：2012-12-10T10:48:17.107
> 
> 标签：php, mysql, create-table, phpactiverecord

信不信由你，我在任何地方都找不到答案，它一定很简单......

我在我的测试应用程序中安装了作曲家并导入了我的项目活动记录。

现在我正在尝试从我的脚本动态创建一个表，比如

*   用户注册
*   用户名和密码存储到用户表中
*   需要为此用户创建一个新表

使用普通的 php，我会发送`CREATE TABLE 'john_doe'...`带有 PDO 的原始查询（）

有没有办法用 Active Record 做到这一点？

* * *

谢谢，我尝试使用已经存在的表的模型来创建新表并且它有效，但不确定是否要创建一个 Connection 对象。

这个活动记录的文档真的不适合初学者，我是用 php.net 的例子，希望所有的文档都是这样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:58:42.130

[您可以使用phpactiverecord](http://www.phpactiverecord.org/)使用该方法发送原始查询[`Connection::query('CREATE TABLE 'john doe'...)`](http://www.phpactiverecord.org/docs/ActiveRecord/Connection#methodquery)。

如果您在模型中使用 activerecord，则可以使用该[`Model::query('blah');`](http://www.phpactiverecord.org/docs/ActiveRecord/Model#methodquery)方法。

# php - CakePHP 登录无限重定向

> ID：13799413
> 
> 赞同：1
> 
> 时间：2012-12-10T10:48:23.633
> 
> 标签：php, cakephp, authentication, infinite-loop

我在 SO 上查看了很多类似的问题，但没有人回答我的问题或能够帮助我解决这个问题......基本上当我在 NewsController 中注释掉 $this->auth->allow 行时（因为我只有想要经过身份验证的人访问除登录/注册之外的所有操作）它会导致登录无限循环。当我允许所有用户访问新闻控制器中的索引操作时，它工作正常。任何想法为什么这会在登录时循环？

应用控制器

```
<?php
App::uses('Controller', 'Controller');

class AppController extends Controller {
    public $components = array(
        'Session',
        'Auth' => array(
            'loginAction' => array('controller' => 'users', 'action' => 'login'),
            'loginRedirect' => array('controller' => 'news', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'users', 'action' => 'login'),
            'authorize' => array('Controller')
        )
    ); 
```

用户控制器

```
<?php
class UsersController extends AppController {

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('register');
    }

    public function login() {
        $this->layout = 'eprime_empty';
        if ($this->request->is('post')) {
            if ($this->Auth->login()) {
                $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash('Invalid username or password, try again', 'default', array('class' => 'warning'));
            }
        }
    }

    public function logout() {
        $this->redirect($this->Auth->logout());
    } 
```

新闻控制器

```
<?php
class NewsController extends AppController {

    public $helpers = array('Html', 'Form', 'Session');

    public function beforeFilter() {
        parent::beforeFilter();
    //    $this->Auth->allow('index', 'view');
    }

    public function index() {
         $this->set('news', $this->News->find('all'));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:30:51.933

如果您只希望经过身份验证的人可以访问除登录和注销之外的所有操作，则无需定义键值对

```
'authorize' => array('Controller') 
```

在应用控制器中。因为如果您指定此键，则必须指定函数 isAuthorized() 将返回 true 或 false（基于您指定的允许用户/用户组访问该操作的条件）。

```
 public function isAuthorized(){
     return true;//or false 
   } 
```

并且无需重新定义

```
public $helpers = array('Html', 'Form', 'Session');
public $components = array('Session'); 
```

正如您已经在 AppController 中定义的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T01:43:18.317

在 Elements 中使用请求操作时可能会发生另一个问题，因此您必须在其主控制器中允许请求操作，如下所示：

```
 --------[app\View\view.ctp]------------
 $this->Element('comments');

 --------[app\View\Elements\comments.ctp]----------
 $comments = $this->requestAction('comments/grab');

 --------[app\Controller\CommentsController]-----------
 function beforeFilter() {
     parent::beforeFilter();
     $this->Auth->allow('grab');
 } 
```

# iphone - 有没有适用于 Windows 的 iPhone 模拟器？

> ID：13799415
> 
> 赞同：-3
> 
> 时间：2012-12-10T10:48:39.260
> 
> 标签：iphone, ios, windows

> **可能重复：**
> [是否可以在 Windows 上的 iPhone 模拟器中运行 IPA 文件？](https://stackoverflow.com/questions/5585076/is-it-possible-to-run-an-ipa-file-in-an-iphone-simulator-on-windows)

我花了足够的时间搜索是否有任何适用于 Windows 的 iPhone 模拟器？我在 StackOverFlow 和其他博客中看到了线程数，但没有找到可接受的答案。

我需要适用于 Windows 的 iPhone 模拟器，我可以在其中安装 IPA 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:56:13.270

通常做的是在你的 Windows 中安装机器模拟器，然后在虚拟机中安装 MacOS 进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:52:38.447

答案是**否定**的。您需要有 (Mac) OS X 才能运行 iPhone 模拟器。不过，您可以尝试在 PC 上安装 OS X（通过虚拟机或“hackintosh”）。

# iphone - 如何在 plist 文件中保存 UISwitch 状态？

> ID：13799416
> 
> 赞同：0
> 
> 时间：2012-12-10T10:48:47.243
> 
> 标签：iphone, objective-c, xcode, plist, uiswitch

我正在尝试保存 UISwitch 的状态。如果 UISwitch 状态为**“ON”**并且当用户退出应用程序并再次启动它时..应用程序应该显示以前的状态以及用户是否计划将 UISwitch 的状态更改为**“OFF”** ..他应该收到一条消息，说他之前处于**“ON”**状态并更改为**“OFF”状态**

如果你们帮助我，那就太好了。谢谢

```
-(IBAction)notification:(id)sender
{
    if (sender == notifyMe)
    {
        if(notifyMe.isOn == YES)
        {
            toggle = YES;
            NSUserDefaults* defaults  = [NSUserDefaults standardUserDefaults];
            [defaults setBool:notifyMe.on forKey:@"switchValueKey"];
            [defaults synchronize];
            NSLog(@"Notification is ON");
        }
        else 
        {
            toggle = NO;
            NSLog(@"Notification is OFF");
        }
    }
    if ([cellDelegate respondsToSelector:@selector(notificationReqd:)])
    {
        [cellDelegate notificationReqd:self];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:10:46.250

更改您的按钮操作方法，例如：

```
-(IBAction)notification:(id)sender
{
    if (sender == notifyMe)
    {
         NSUserDefaults* defaults  = [NSUserDefaults standardUserDefaults];
         BOOL previousState = [defaults boolForKey:@"switchValueKey"];
        if(notifyMe.isOn == YES)
        {
            toggle = YES;

            NSLog(@"Notification is ON");
        }
        else 
        {
            toggle = NO;
            NSLog(@"Notification is OFF");
        }
        [defaults setBool:toggle forKey:@"switchValueKey"];
        [defaults synchronize];

         //You can show the message here
         NSLog(@"Previous state was %d",previousState);
    }
    if ([cellDelegate respondsToSelector:@selector(notificationReqd:)])
    {
        [cellDelegate notificationReqd:self];
    }
} 
```

当您想获取存储的数据时，您可以使用：

```
 NSUserDefaults* defaults  = [NSUserDefaults standardUserDefaults];
 BOOL previousState = [defaults boolForKey:@"switchValueKey"]; 
```

# java - mockito 的方法调用计数

> ID：13799417
> 
> 赞同：0
> 
> 时间：2012-12-10T10:48:49.110
> 
> 标签：java, mockito

我在正确预测方法调用计数（时间参数）方面存在一些问题。那么 mockito 如何计算方法调用。在调用方法的地方设置断点并在此点上停止计数会产生其他计数！

那么计数是如何依赖于参数还是与参数无关？这是一个让我感到困惑的例子（它不是第一次）：

```
verify(view).setBoxes(eq(attribute), eq(State.some), checkBoxes.capture());
assertThat(checkBoxes.getValue(), allOf(hasEntry(value1, true), hasEntry(value2, false), hasEntry(value3, false)));

//doing some stuff to provoke 2nd call
verify(view, times(2)).setBoxes(eq(attribute), eq(State.some), checkBoxes.capture());
assertThat(checkBoxes.getValue(), allOf(hasEntry(value1, true), hasEntry(value2, true), hasEntry(value3, false))); 

//doing some stuff to provoke 3rd call - with times(3) it fails
verify(view, times(2)).setBoxes(eq(attribute), eq(State.some), checkBoxes.capture());
assertThat(checkBoxes.getValue(), allOf(hasEntry(value1, true), hasEntry(value2, true), hasEntry(value3, true))); 
```

上面的测试通过了。如您所见，每次捕获的值都会发生变化。每个调试器我可以用上面检查的参数干净地证明 3 个调用。我还检查了视图对象的 id/hash：它是一个测试单例，所有调用都转到同一个实例。

但是为什么它会失败`times(3)`呢？这不是我第一次遇到不可重现的（使用调试器）方法调用计数。我希望我只是误解了方法调用计数的逻辑——是这样吗？

# java - Intellij IDEA 12\. 资源更新

> ID：13799419
> 
> 赞同：1
> 
> 时间：2012-12-10T10:49:00.993
> 
> 标签：java, intellij-idea, aspectj

我有一个 Web 应用程序，我使用 javascript、java、spring、hibernate 和 tomcat 作为容器。当我更改 js 文件时，我只需要在资源中更新它。在 IDEA 11 中，它是快速动作（只需一秒钟）。但是 IDEA 12 重新编译了方面 j 文件（它们没有改变），这浪费了我的时间。

我在 11 版本的 IDEA 中没有看到这种行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:08:05.507

请在[跟踪器](http://youtrack.jetbrains.com/)中提出问题。

作为一种解决方法，请尝试在设置 | 中关闭外部构建。编译器。

# c++ - 为什么 C++11 中没有`static_if`

> ID：13799420
> 
> 赞同：18
> 
> 时间：2012-12-10T10:49:08.780
> 
> 标签：c++, c++11

我想知道为什么像这样自然的事情`static_if`没有设法进入 C++11？有些人反对使用继承或模板专业化我们可以实现所需的结果但是：

`static_if`当人们不想用所有这些来膨胀源代码时，为什么我们没有一个简单的简单情况呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T10:54:36.580

我想委员会没有时间讨论这个特性，所以他们决定在 C++11 之后推迟它。无论如何建议在这里：[http ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3329.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3329.pdf)

# iphone - 无法初始化 CCScene COCOS2D 类型的参数

> ID：13799421
> 
> 赞同：1
> 
> 时间：2012-12-10T10:49:11.463
> 
> 标签：iphone, objective-c, cocos2d-iphone

我只是使用代码将场景从一个场景推送到另一个场景。

这是我的代码。

```
SettingScene *setting=[SettingScene node];
[[CCDirector sharedDirector]pushScene:setting]; 
```

我已经使用了与其他方法相同的方法，但在这一行中它显示错误......

```
/Users/jellyfishtechnologies/Desktop/Vivek/My Game Project/Flyer/Flyer/HomePageScene.mm:91:43: Cannot initialize a parameter of type 'CCScene *' with an lvalue of type 'SettingScene *' 
```

我不明白具体是什么问题！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:22:47.367

可能您的 SETTINGS 类不是 CCScene 的子类，或者它没有返回 CCScene 对象。请验证这一点。

# sql - 在 sql server 2005 的一个查询中插入和更新

> ID：13799423
> 
> 赞同：2
> 
> 时间：2012-12-10T10:49:20.310
> 
> 标签：sql, sql-server, sql-server-2005

> **可能重复：**
> [选择/插入版本的 Upsert：是否有高并发的设计模式？](https://stackoverflow.com/questions/3593870/select-insert-version-of-an-upsert-is-there-a-design-pattern-for-high-concurr)

我必须根据条件将数据从一个表插入到另一个表中。

```
1.If Key is found update records
2.If key is not found insert the record. 
```

我使用的是sql server 2005。所以不能使用`merge`语句。请提出实现这一目标的替代方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T10:54:19.467

```
IF EXISTS(--Query to check for the existence of your condition here)
BEGIN
  --UPDATE HERE
END ELSE
BEGIN
  --INSERT HERE
END 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T10:50:51.853

从复制`SourceTable`到`DesitinationTable`：

```
update  dst
set     col1 = src.col1
from    DestinationTable dst
join    SourceTable src
on      src.Key = dst.Key

insert  DestinationTable 
        (Key, col1)
select  Key
,       col1
from    SourceTable src
where   not exists
        (
        select  *
        from    DestinationTable dst
        where   src.Key = dst.Key
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:07:08.940

这是[我对类似问题的回答中的一个存储过程示例](https://stackoverflow.com/questions/12398852/how-to-improve-data-insert-update-performance/12400228#12400228)

```
 CREATE PROCEDURE dbo.update_table1 
    @Field1 int, --key1
    @Field2 int, --data fields
    @Field3 int, 
    @Field4 int

    AS

    SET NOCOUNT ON
    update table1 set Field2=@Field2,Field3=@Field3,Field4=@Field4 
            where Field1=@Field1;
    IF(@@Rowcount=0)
    BEGIN
         insert into table1(Field1,Field2,Field3,Field4) 
                    values (@Field1,@Field2,@Field3,@Field4);
    END
    GO 
```

# python - 从 Django 调用 subprocess.Popen

> ID：13799425
> 
> 赞同：3
> 
> 时间：2012-12-10T10:49:22.270
> 
> 标签：python, django

我在 Django 中使用以下 Python 代码从 Django 运行 Perl 脚本。

```
def run_command(cmd, input_data=None):
    assert type(cmd) == list
    stdout = ''
    stderr = ''
    p = subprocess.Popen(cmd,
                        bufsize=1000*1000,
                        stdin=subprocess.PIPE,
                        stderr=subprocess.PIPE,
                        stdout=subprocess.PIPE)
    if (input_data):
        p.stdin.write(input_data)
    p.stdin.close()
    log("closed stdin")
    stdout = p.stdout.read()
    log("read stdout")
    stderr = p.stderr.read()
    return (stdout, stderr) 
```

在将代码从 Ubuntu 移动`10:04`到`12:04`调用之后，时不时地`p.stdout.read()`开始失败。当它失败时，我在日志文件中看到的最后一件事是`closed stdin`nginx 显示一个`502 Bad Gateway`页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T01:16:29.327

您可以尝试更好地了解该问题的一件事是暂时使用 Django 的“运行服务器”而不是 Nginx。这将允许您在页面上看到回溯而不是 502。

如果您不确定如何执行此操作，可以使用以下示例：

`python manage.py runserver 1.1.1.1:8080`

您可以将 1.1.1.1 替换为“localhost”或您选择的 IP，并且 8080 可以替换为您想要的任何开放的非特权端口。您可能需要修改设置文件以设置`DEBUG=True`.

# sql - SQL中的复合PK

> ID：13799430
> 
> 赞同：0
> 
> 时间：2012-12-10T10:49:33.987
> 
> 标签：sql, sql-server, primary-key

我有以下内容：

```
create table dbo.Packs
(
  Id int identity not null
    constraint Packs_Id_PK primary key clustered (Id)
);

create table dbo.Files
(
  Id int not null  
  Data varbinary (max) filestream null
    constraint Files_Data_DF default (0x),  
  [Key] uniqueidentifier rowguidcol not null
    constraint Files_Key_U unique,      
  Mime nvarchar (200) not null,
    constraint Id_Mime_PK primary key clustered (Id, Mime)
) filestream_on [STORAGE];

alter table dbo.Files
add constraint Files_Id_FK foreign key (Id) references dbo.Packs(Id) on delete cascade on update cascade; 
```

我正在寻找表格拆分。所以：

*   文件 ID 与包 ID 相同。
*   一个包可以有一个或多个文件。每个文件都有不同的 mime。
*   文件中的 PK 将根据其 ID 和 MIME 创建。所以这是独一无二的。

基本上，pack 可以有以下几行：

包装
编号
1
2

文件如下：

文件
ID Mime
1 image/jpg PK = (1, image/jpg) (PACK ID = 1)
1 image/gif PK = (1, image/gif) (PACK ID = 1)
2 image/jpg PK = (2,图片/jpg）（包 ID = 2）

文件 ID 与其关联的包 ID 相同。

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:05:07.273

如果每个文件的“Mime”值不同，则“Mime”应声明为 UNIQUE。如果“Mime”是唯一的，那么集合 {Id, Mime} 也是唯一的。

# java - Ebean搜索ManyToMany是空的？

> ID：13799436
> 
> 赞同：2
> 
> 时间：2012-12-10T10:49:48.687
> 
> 标签：java, playframework-2.0, ebean

使用 PlayFramework，我试图列出没有与我的模型关联的 ManyToMany 项目的所有项目，我该怎么做？

这是我的结构：

```
User
    @ManyToMany
    List<Section> sections;

    public static Model.Finder<Long,User> find = new Model.Finder<Long, User>(Long.class, User.class);

Section
    Integer year;
    @ManyToMany
    List<User> users;

    public static Model.Finder<Long,Section> find = new Model.Finder<Long, Section>(Long.class, Section.class); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-14T18:45:24.613

你需要这样做：

```
String q="find * fetch sections where sections.id is null"

Ebean.createQuery(User.class,q).findList(); 
```

这将创建一个左外连接查询， find.where().IsNull("sections") 不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:10:14.747

试试这些：

```
find.where().eq("sections", null).findList(); 
```

或者

```
find.where().isNull("sections").findList(); 
```

抱歉，这是我的想法，现在无法验证。

# image-processing - 如何使用傅里叶-梅林变换进行模式匹配？

> ID：13799440
> 
> 赞同：0
> 
> 时间：2012-12-10T10:50:00.167
> 
> 标签：image-processing, opencv, pattern-matching, fft, cross-correlation

我正在尝试使用傅里叶-梅林变换来解决旋转、缩放和平移不变模式匹配问题。但是我被困在如何获取图像描述符以及如何比较它们（距离测量），获取 FMT 图像后我应该做什么？我试图计算它们之间的互相关，但这显然不是一个好主意，也不会产生任何结果。

# asp.net-mvc - 如何回滚 ef codefirst 模型中的先前更改

> ID：13799444
> 
> 赞同：0
> 
> 时间：2012-12-10T10:50:05.283
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我正在使用 EF codefirst 处理 asp.net mvc。我正在尝试立即更新记录列表。喜欢，

```
foreach(var pat in listpats)
{
context.Entry<Patient>(pat).state=EntityState.Modified;
context.savechanges();
} 
```

它对我来说工作正常。现在假设如果 listpats 包含 10 项，如果我在更新时在第 7 项出现异常。它将保存前 6 个项目。但是如果更新时没有发生错误，我想一次保存所有记录。如果发生任何错误意味着我应该回滚之前的所有更改。那么我如何使用 EF 代码优先模型来实现这一点。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:59:31.607

If you've modified the entities in some other code then their state will be modified (within the same context) without you having to explicitly change it with a foreach loop and context.Entry(pat).state=EntityState.Modified.

So taking a step back, after you've modified all your patients entities a single call to context.SaveChanges() will automagically rollback on error.

Soooo to summarise, change all the patients entities and afterwards call context.SaveChanges() which will make EF propogate all the entities that have a modified state (the state change happens when you modify the entity) to the DB, context.SaveChanges() will handle simple cases like this with regards to rollback.

P.S. Your question is making me wonder if you've changed the patients in a different context and that's why your manually changing the current context' state.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:57:51.863

您应该在 foreach 之外调用 SaveChanges()：

```
foreach(var pat in listpats)
{
    context.Entry<Patient>(pat).state=EntityState.Modified;
}

context.SaveChanges(); 
```

这样，如果发生异常，所有内容都将回滚

# android - 在画廊中滚动子视图

> ID：13799451
> 
> 赞同：0
> 
> 时间：2012-12-10T10:50:41.480
> 
> 标签：android, scroll, gallery, onfling

我需要帮助在我的画廊中启用滚动子视图（不是图像视图）。我知道覆盖 Fling() 是解决方案，但我不知道如何实现它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:13:29.900

这不是正确的做法。像 ListView 或 GridView 这样的 AdapterView 用于回收它们的子视图。所以如果你尝试手动更新子视图，你会遇到一些麻烦。

首先，我推荐你使用**viewholder 模式**。然后，为了选择一个项目，在您的数据对象上标记它并调用`notifyDataSetChanged`您的适配器。

# optimization - lto和fat-lto-objects之间的gcc有什么区别

> ID：13799452
> 
> 赞同：17
> 
> 时间：2012-12-10T10:50:49.517
> 
> 标签：optimization, gcc, lto

我试图用下一个标志编译我的源代码：
1\. `-flto`
2\. `-flto -ffat-lto-objects`
3.`-flto -fno-fat-lto-objects`

第三个提供`slim`了文档中编写的优化 LTO 代码，但我看不出第一个和第二个输出程序集文件有任何区别，为什么？

*操作系统：linux*
*编译器：GCC 4.7*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-03-29T06:38:26.197

胖目标文件和非胖目标文件的区别在于胖目标文件既包含中间语言也包含正常编译的代码。在链接时，如果您在没有 的情况下调用编译器`-flto`，胖对象将作为普通对象文件处理（并丢弃 LTO 信息），而瘦对象将调用 LTO 优化器，因为没有它就无法处理它们。

如果你同时编译和链接`-flto`，fat 和 slim 对象都应该给你相同的二进制文件，只是 slim 对象会更小更快编译，因为你会避免冗余代码生成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:07:28.457

可能它会对某人有所帮助：
[接下来](http://gcc.gnu.org/onlinedocs/gccint/LTO-Overview.html#LTO-Overview)写道：

> 当前的实现只产生“胖”对象，有效地使编译时间加倍并将文件大小增加到原始大小的 5 倍

所以我认为这是主要原因。

# javascript - 将 body / div 的背景位置居中到 Viewport 的中间

> ID：13799459
> 
> 赞同：0
> 
> 时间：2012-12-10T10:51:06.717
> 
> 标签：javascript

我的身体高度为 1000 像素，屏幕高度为 100 像素。我想显示一个`<div>`占据整个`<body>`宽度和`<body>`高度的。那`<div>`就是有一个`background-image`，我想让它显示在视口的中间。如何使用 Javascript 实现这一点。

我使用了以下概念，但它不适用于移动设备

```
 ele.style.backgroundPosition = document.body.scrollTop + 
                                 (window.innerHeight / 2) - heightOfImage; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:59:55.460

最简单的解决方案可能是在`<div />`其上设置背景图像的固定位置，并且它的 z-index 设置使其显示在页面上的所有其他元素下方。

示例：http: [//jsfiddle.net/gztRa/](http://jsfiddle.net/gztRa/)

如果你真的想走 JavaScript 路线（如果我能在这里提供帮助，我个人不会这样做），你将不得不按照以下方式做一些事情：

1.  连接到正在滚动的元素的滚动事件
2.  每次触发时，调整滚动位置，如下所示：

`var verticalPosition = document.body.scrollTop + (window.innerHeight / 2) - heightOfImage;`

`ele.style.backgroundPosition = 'center ' + verticalPosition + 'px';`

注意添加，`'px'`因为这很重要。“中心”之后还有一个空格，所以你应该得到如下所示的内容：`ele.style.backgroundPosition = 'center 50px'`.

示例（使用 Zepto 或 jQuery）：http: [//jsfiddle.net/7aqgG/7/](http://jsfiddle.net/7aqgG/7/)

# javascript - CSS 正则表达式

> ID：13799460
> 
> 赞同：0
> 
> 时间：2012-12-10T10:51:07.013
> 
> 标签：javascript, regex

我正在尝试获取正则表达式（在 Javascript 中）来获取边距、填充和边框值，从 document.styleSheets 中读取它们

我写道：

```
/:\s*?(\d+)(px)?/gi 
```

但不好。主要问题是规则应该是这样的：

```
margin: 3px;
margin: 3px 2px;
margin: 3px 2px 1px;
margin: 3px 2px 1px 0;
margin-top: 3px;
margin-right: 3px;
margin-left: 3px;
margin-bottom: 3px; 
```

填充也是如此。对于边界是相似的：

```
border: 1px solid #000;
border-width: 1px 1px 2px 0;
border-top-width: 1px;
border-left-width: 1px;
border-right-width: 1px;
border-bottom-width: 1px;
border-top: 1px solid #000;
border-left: 1px solid #000;
border-right: 1px solid #000;
border-bottom: 1px solid #000; 
```

我可以拆分规则并搜索每种类型，例如

```
if(rule.indexOf('margin') > -1) {
    ...
} else if (rule.indexOf('margin-top') > -1) {
    ...
} 
```

并使用不同的正则表达式..但我想要更通用的正则表达式来避免一长串“如果”。

有谁能够帮我？

非常感谢，大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:07:06.297

由于样式表可以用几种不同的方式格式化，你应该看看其他的替代方案，比如[JSizes jQuery 扩展插件](http://www.bramstein.com/projects/jsizes/)，它将非常有助于获取这些值。

# javascript - 检查是否为变音符号的keydown事件

> ID：13799461
> 
> 赞同：1
> 
> 时间：2012-12-10T10:51:06.973
> 
> 标签：javascript, char, dom-events, keycode

我想检查`eventListener`按下的键是否是变音符号（`ä`, `ö`, `ü`）。问题是`charCode`/`keyCode`始终为 0，如果我没记错的话，该值也用于某些控制键。

我试图将 的 解析为我可以使用`e.which`的`keyDown`东西，但直到现在似乎没有任何效果。如果我能做类似的事情就好了`'ä'.atCharCode()`。

有什么帮助吗？:) 或者检查`0`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-18T16:57:35.557

Firefox 使用这些特定字符的键码 0。对于所有其他浏览器，它是 186、192 和 222。

例如，如果您想检查是否按下了字母键 + 变音符号，我使用以下代码：

```
$('.myInputBox').keydown(function(e) {
    if ($.inArray(e.keyCode, [0, 186, 192, 222]) != -1 || (e.keyCode > 64 && e.keyCode < 91)) {  
        alert('valid key!');
    } else {
        e.preventDefault();
        alert('no valid key!');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:36:48.677

发现了问题。在 Chrome 中，一切都很好，并且变音符号得到了正确的 charCode。另一方面，在 Firefox 中，似乎没有真正支持变音符号，并且它们的 charCode 始终为 0。我测试的 FF 是 17.0.1

所以如果你想解决这个问题，你必须不允许带有`e.keyCode`/ `e.which`of 的事件`0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:59:28.510

```
<script type="text/javascript">
        function disablekeys(e) {
            var e = event || evt;
            var charCode = e.which || e.keyCode;
            if (charCode = 8) {
                //your code here
            }
        }
</script> 
```

从以下链接查找字符代码 [http://www.expandinghead.net/keycode.html](http://www.expandinghead.net/keycode.html)

# payment-gateway - 用于后台和前端电子商务解决方案的 PayPal 集成

> ID：13799463
> 
> 赞同：0
> 
> 时间：2012-12-10T10:51:14.600
> 
> 标签：payment-gateway, paypal, payment-processing

我不确定这是否最适合 SO，但我想不出更好的地方来问。

我们有后台和电子商务解决方案。我们与 SagePay 等的其他集成允许我们在网站上进行付款并通过后台系统执行退款、授权等。是否有支持此功能的 PayPal API？

查看各种 API，我可以看到 Payflow Pro 似乎符合我的需要，但这是否仍然支持通过贝宝账户付款？

此外，通过 PayPal 集成，是否有不需要用户离开网站的解决方案？如果是这样，这将如何从他们的 PayPal 帐户付款，因为他们显然需要登录才能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:36:13.847

是的，PayPal 有很多 API 可以处理所有这些。

PayFlow 确实是您所追求的，但他们最近将其更改为[Payments Pro](https://www.x.com/developers/paypal/development-and-integration-guides#wpp)（这有点令人困惑，因为“旧”Payments Pro 使用了 DoDirectPayment API。）

不过，就目前而言，当您注册 Payments Pro 时，他们会将您带入 PayFlow 平台。您可以使用[Express Checkout for PayFlow](https://www.x.com/sites/default/files/pfp_expresscheckout_pp.pdf)将 PayPal 选项添加到您的结帐中。

通过该设置，人们可以选择使用信用卡付款并直接在您的网站上输入详细信息，或者他们可以选择使用 PayPal 付款并按预期通过 PayPal 进行重定向。

如果您想为用户提供无需重定向和再次登录即可处理付款的能力，您可以使用[参考交易](http://www.paypalobjects.com/en_US/vhelp/paypalmanager_help/about_reference_transactions.htm)或[预先批准的付款](https://www.x.com/developers/paypal/documentation-tools/api/Preapproval-api-operation)。

实际上，我[为 PayPal 写了一篇文章，涵盖](https://www.x.com/devzone/articles/recurring-payments-reference-transactions-and-preapproved-payments)了您可能有兴趣查看的这些选项。

# android - 在我重新启动手机之前，Android 自定义相机应用程序图片不会出现在图库中

> ID：13799468
> 
> 赞同：7
> 
> 时间：2012-12-10T10:51:22.503
> 
> 标签：android, camera, android-sdcard

我一直在开发相机应用程序，我希望当我按下“捕获”按钮时它会拍照并将其保存到 SD 卡中，以便可以在图库中查看。

但是目前它无法保存我想要的方式。目前，当我按下捕获时，它会拍照，但只有在我完全重启手机后，图片才会显示在图库中。

这个问题已经困扰了我好几个星期了，我大部分时间都按照 android 提供的教程进行操作。

这是我处理图片的主类的代码。

```
 private PictureCallback mPicture = new PictureCallback() 
   {

    @Override
    public void onPictureTaken(byte[] data, Camera camera)
      {
        File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
        if (pictureFile == null){
           Log.d(TAG, "Error creating media file, check storage permissions: ");
            return;
        }

        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            fos.write(data);
            fos.close();
        } catch (FileNotFoundException e) {
          //  Log.d(TAG, "File not found: " + e.getMessage());
        } catch (IOException e) {
        //    Log.d(TAG, "Error accessing file: " + e.getMessage());
        }
    }
};

private static File getOutputMediaFile(int type){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "MyCameraApp");
    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");
    } else if(type == MEDIA_TYPE_VIDEO) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "VID_"+ timeStamp + ".mp4");
    } else {
        return null;
    }

    return mediaFile;
}

public void onClick(View v) {

    mCamera.takePicture(null, null, mPicture);
    Context context = getApplicationContext();
    CharSequence text = "Click Detected";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();

  } 
```

单击捕获时，我的日志猫显示以下内容

级别：E 标签：相机文本：在 CAMERA_MSG_RAW_IMAGE 的句柄消息中

我的权限是

```
uses-permission android:name="android.permission.CAMERA"
uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" 
```

任何帮助深表感谢。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T14:47:25.287

这个问题是[Image的副本，保存到sdcard，没有出现在Android的Gallery应用程序中](https://stackoverflow.com/questions/2170214/image-saved-to-sdcard-doesnt-appear-in-androids-gallery-app)（尤其是ShadowGod的答案）

要修复您的代码，请在 fos.close() 之后将以下内容添加到 onPictureTaken

```
File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
    Environment.DIRECTORY_PICTURES), "MyCameraApp");
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, 
    Uri.parse("file://"+ mediaStorageDir))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-14T12:49:49.083

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

似乎不适用于 KITKAT。它引发权限拒绝异常并使应用程序崩溃。所以为此，我做了以下工作，

```
String path = mediaStorageDir.getPath() + File.separator
                + "IMG_Some_name.jpg";
CameraActivity.this.sendBroadcast(new Intent(
                         Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri
                        .parse("file://" + path))); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-01T13:45:58.347

MediaScannerConnection 用于使用 KitKat 中的视频或图像更新图库，示例和代码如下所示：

[保存到 SD 卡的图像不会出现在 Android 的图库应用中](https://stackoverflow.com/questions/2170214/image-saved-to-sdcard-doesnt-appear-in-androids-gallery-app)

[Android MediaStore 插入视频](https://stackoverflow.com/questions/2114168/android-mediastore-insertvideo/11746999#11746999)

[http://developer.android.com/reference/android/media/MediaScannerConnection.html](http://developer.android.com/reference/android/media/MediaScannerConnection.html)

# android - 方法在android中不起作用

> ID：13799471
> 
> 赞同：-1
> 
> 时间：2012-12-10T10:51:38.480
> 
> 标签：android

我的项目有问题

这是我的登录活动

```
import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class LoginActivity extends Activity {
    private final Context context = this;
    EditText un;
    EditText pw,ds;
    TextView error;
    String i;
    String x;   

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        un=(EditText)findViewById(R.id.un);
        pw=(EditText)findViewById(R.id.pwd);
        error=(TextView)findViewById(R.id.tv_error);
    }

    public void clickHandler(View view){
        Intent i = null;    
        switch (view.getId()){
            case R.id.btnLogin:
                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
                postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));
/*            String valid = "1";*/      
                String response = null;
                try {
                    response = CustomHttpClient.executeHttpPost("http://10.0.2.2/android/cek.php", postParameters);
                    String res = response.toString();
                    res = res.trim();
                    res = res.replaceAll("\\s+","");
                    error.setText(res);

                    if (res.equals("1")){
                        i = new Intent (this, Menu.class);
                        startActivity(i);
                    } else { 
                        error.setText("Sorry!! Username or Password salah");
                    }
                } catch (Exception e) {
                    un.setText(e.toString());
                }
                break;

            case R.id.registerBtn:
                i = new Intent(this, RegisterActivity.class);
                startActivity(i);
                break;

            case R.id.btnExit:
                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                builder.setMessage("Keluar dari aplikasi ini?");
                builder.setCancelable(false);
                builder.setPositiveButton("Ya", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Intent intent = new Intent(Intent.ACTION_MAIN);
                        intent.addCategory(Intent.CATEGORY_HOME);
                        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        startActivity(intent);
                        finish();
                    }
                });
                builder.setNegativeButton("Tidak", new DialogInterface.OnClickListener() {
                    @Override
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();
                        }
                    });
                // Create and show the dialog
                builder.show();
                break;
        }
    }
    public  String uname(){
        x = un.getText().toString();
        return x;
    }
} 
```

这是我的 KirimInfo.java

```
import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Adapter;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.RadioGroup;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.TimePicker;

public class KirimInfo extends Activity {

    String time,date,type,jln,y;
    EditText usrn,ket,ds;
    Spinner nj,st1;
    TextView error;
    String[] jalan = {"A.Yani","Ambengan", "Anjasmoro","Baliwerti","Basuki Rahmat","Bintoro","Ciliwung","Darmo Raya","Darmokali","Diponegoro Raya","Dharmawangsa","Dinoyo","Embong Kemiri","Embong Malang"};
    String[] stat = {"Macet Total", "Padat", "Padat Merayap","Padat Lancar","Lancar","Sepi"};
    /** Called when the activity is first created. */
    LoginActivity l = new LoginActivity();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.kirim_info);
        ket=(EditText)findViewById(R.id.keterangan);
        usrn=(EditText)findViewById(R.id.usrnm);
        error=(TextView)findViewById(R.id.tv_error3);
        nj=(Spinner)findViewById(R.id.namjal);
        ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, jalan);
        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        nj.setAdapter(aa);
        st1=(Spinner)findViewById(R.id.statusKepadatan);
        ArrayAdapter<String> bb = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, stat);
        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        st1.setAdapter(bb);
    }

    public void clickHandler(View view){
        Intent i = null;
        switch (view.getId()){
            case R.id.btnKirimInfo:
                jln = jalan[nj.getSelectedItemPosition()];
                type = stat[st1.getSelectedItemPosition()];
                String y = l.uname();
                ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("username", y));
                postParameters.add(new BasicNameValuePair("nama_jalan", jln));
                postParameters.add(new BasicNameValuePair("keterangan", ket.getText().toString()));
                postParameters.add(new BasicNameValuePair("status", type));
/*            String valid = "1";*/      
                String response = null;
                try {
                    response = CustomHttpClient.executeHttpPost("http://10.0.2.2/android/kepadatan.php", postParameters);
                    String res = response.toString();
                    res = res.trim();
                    res = res.replaceAll("\\s+","");
                    error.setText(res);
                    if (res.equals("1")) 
                        error.setText("Data Berhasil Masuk");
                    else
                        error.setText("Gagal");
                } catch (Exception e) {
                    error.setText(e.toString());
                }
                break;
            case R.id.kembali:
                i = new Intent(this, Menu.class);
                startActivity(i);
                break;
        }
    }
} 
```

我想将用户名从 发送`LoginActivity.java`到`KirimInfo.java`。因为我使用“uname”方法来传递用户名。

但是当我运行程序时，即使我写了用户名，它也会传递空或NULL（而我已经从数据库中正确写下了用户名和密码）

我想问的是，我写的方法“uname”正确吗？你能告诉我如何编写正确的方法并启动对象，以便我可以传递用户名吗？

因为我不知道如何在android中正确地创建一个方法和启动对象

请告诉我如何....任何帮助将不胜感激

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:10:30.627

`LoginActivity l = new LoginActivity();` `String y = l.uname();`

这不是将价值从一个活动发送到另一个活动的正确程序。

在您的程序中添加以下内容。

在`LoginActivity.java`添加：..

当你调用`KirimInfo.java`Activity

添加

```
Intent intent = new Intent(LoginActivity.this,KirimInfo.class);
intent.putExtra("username",""+uname()); 
```

在 KirimInfo 活动中添加以下内容

```
Intent intent = getIntent();
Bundle bundle = intent.getExtras();
String userName = bundle.getString("username"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:05:07.923

当您进入时，`KirimInfo`您正在访问的`UI`不是推荐的方式`LoginActivity`。`uname()`

如果要在活动之间传输数据，请使用`Bundle`

例如

```
Intent intent = new Intent(LoginActivity.this, KirimInfo.class);
intent.putExtra("USER_NAME", "Safarudin");
startActivity(intent); 
```

并在其他活动中获取数据，像这样使用`OnCreate`

```
String userName=getIntent().getStringExtra("USER_NAME"); 
```

# c - 内联汇编中 Visual C 2010 中的访问冲突

> ID：13799472
> 
> 赞同：0
> 
> 时间：2012-12-10T10:51:38.933
> 
> 标签：c, visual-c++, assembly, buffer-overflow, shellcode

我有一个简单的 C 语言程序，带有编译器开关：/GS-

这只是将 EIP 更改为机器代码字符串位置的概念证明。

假设我们设置 EIP = 0x012f5000，这会将 EIP 置于以下数组的地址：

`char code[] = "\x00\x00\x8B\x00\x00";`

我不确切知道这些指令会做什么，但 x00 指令似乎是 noops。将 EIP 切换到程序中的任何其他位置似乎会导致问题，但是当我将 EIP 指向该数组的地址时，我会在 EIP 的该位置遇到一些“访问冲突”异常。

为什么我会收到此错误？这是因为某种 Windows 保护机制吗？还是 Windows 无法以这种字符串形式运行指令？你如何让程序执行这些指令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:12:11.353

如果不是我的答案不正确，我猜你使用 x86 32 位机器代码。

您的机器代码提供以下内容

```
0000          ADD BYTE PTR DS:[EAX],AL
8B00          MOV EAX,DWORD PTR DS:[EAX]
00XX          ADD BYTE PTR ???  ; depends on the next byte 
```

如您所见，如果您尝试执行此操作，它会尝试访问地址中的内存`eax`。`ret`它也不会以 a或其他东西结尾，因此它会直接运行而无需关心接下来的内容。在大多数情况下，这会崩溃。无论如何，您也可能无法执行 DATA 段中定义的代码。

如果你想执行一些 shellcode，你可以试试下面这个简单的模板。这个想法是在堆栈上创建代码并在那里执行它。给定的机器代码功能没有很好地实现，但至少是正确的，不会导致崩溃。它相当于 C 代码

```
void f( void ) { return; }; 
```

VC++在Debug模式下编译。

```
#include <stdio.h> 

int main() 
{ 
    const char code[] = "\x55\x8B\xEC\x81\xEC\xC0\x00\x00" 
    "\x00\x53\x56\x57\x8D\xBD\x40\xFF" 
    "\xFF\xFF\xB9\x30\x00\x00\x00\xB8" 
    "\xCC\xCC\xCC\xCC\xF3\xAB\x5F\x5E" 
    "\x5B\x8B\xE5\x5D\xC3"; 

    printf("Start execution\r\n"); 
    ((void (*)())code)(); 
    printf("End execution\r\n"); 
    _getch(); 
} 
```

如果上述方法不起作用，您可以尝试。

```
#include "stdafx.h"
#include <stdio.h> 
#include <Windows.h>

int main() 
{ 
    const char code[] = "\x55\x8B\xEC\x81\xEC\xC0\x00\x00" 
    "\x00\x53\x56\x57\x8D\xBD\x40\xFF" 
    "\xFF\xFF\xB9\x30\x00\x00\x00\xB8" 
    "\xCC\xCC\xCC\xCC\xF3\xAB\x5F\x5E" 
    "\x5B\x8B\xE5\x5D\xC3"; 

    void *exec = VirtualAlloc(0, sizeof(code), MEM_COMMIT, PAGE_EXECUTE_READWRITE);
    memcpy(exec, code, sizeof(code));

    printf("Start execution\r\n"); 
    ((void(*)())exec)();
    printf("End execution\r\n"); 
    //_getch(); 
} 
```

这个想法是使用带有标志的分配内存页面`PAGE_EXECUTE_READWRITE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:27:29.437

费马的回答很好，但我更喜欢这个

```
__asm { jmp [exec] } 
```

# wcf - 为什么在某些情况下会加密 WCF SoapFault 响应？

> ID：13799473
> 
> 赞同：8
> 
> 时间：2012-12-10T10:51:40.650
> 
> 标签：wcf, web-services, soapfault

我正在创建一个 WCF Web 服务，其请求/响应应该只签名。为此，在我设置的 ServiceContract 属性上

```
ProtectionLevel = ProtectionLevel.Sign 
```

这行得通。

由于要求，一些 SoapFaults 应该从服务中抛出；两种类型的 SoapFaults：

*   申请相关
*   与 WS-Addressing 相关（例如缺少 MessageID）

为此，我使用了处理 SoafFaults 的常规方法：创建一个 IErrorHandler，其中使用 MessageFault.CreateFault 创建一个 Message 实例。

几乎所有返回的 SoapFaults 都没有加密（这对我来说没问题），我的问题是为什么那些带有 action="http://www.w3.org/2005/08/addressing/fault" 或 " [http:// www.w3.org/2005/08/addressing/soap/fault](http://www.w3.org/2005/08/addressing/soap/fault) “被加密了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:37:14.487

查看[http://msdn.microsoft.com/en-us/library/aa347791.aspx](http://msdn.microsoft.com/en-us/library/aa347791.aspx)和[http://msdn.microsoft.com/en-us/library/system.servicemodel.faultcontractattribute.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.faultcontractattribute.aspx)。它指出

> 如果您选择启用安全性的绑定并且未在合同的任何位置设置 ProtectionLevel 属性，则所有应用程序数据都将被加密和签名。

我猜默认情况下内置类型使用这种行为。您可以通过查看实际抛出的异常来验证这一点。

# postgresql - 在 PostgreSQL 中的存储过程上引用参数

> ID：13799474
> 
> 赞同：1
> 
> 时间：2012-12-10T10:51:40.633
> 
> 标签：postgresql, stored-procedures, stored-functions

我正在转换一些 SQLServer 存储过程，但我遇到了一个无法解决的问题。那是 SQLServer 函数：

```
CREATE FUNCTION [dbo].[getViewNodeHierarchyAux](@pivot varchar(255), @parents varchar(max))
RETURNS @view TABLE (PARENT_OID varchar(255), CHILD_OID varchar(255))
...
insert into @view select F.* from BTREENODES_NODEHIERARCHY T cross apply [dbo].getViewNodeHierarchyAux(T.CHILD_OID,@parents) F where T.PARENT_OID=@pivot; 
```

这就是我在 PostgreSQL 中想到的转换：

```
CREATE OR REPLACE FUNCTION getviewnodehierarchyauxprueba(IN pivot character varying, IN parents character varying)
...
  RETURNS TABLE(test_parent_oid character varying, test_child_oid character varying)
return query (select F.* from BTREENODES_NODEHIERARCHY T cross join getviewnodehierarchyprueba(T.CHILD_OID,parents) F WHERE T.PARENT_OID=pivot); 
```

PgAdmin 告诉我在 'from' 子句中没有对表 't' 的有效引用。如果我这样写 `getviewnodehierarchyprueba((select CHILD_OID from BTREENODES_NODEHIERARCHY),parents)`

它返回多条记录并且不起作用。有任何想法吗？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:22:30.187

PostgreSQL 不允许使用连接关系的值作为连接中第二个关系的参数。它将在 9.3 中提供 LATERAL 子选择。这是第一个问题。第二个问题 - 子选择只能返回一行

```
(select CHILD_OID from BTREENODES_NODEHIERARCHY) 
```

可能返回不止一行

您无需等待 9.3 - 使用 CTE（通用表表达式）来处理一些递归数据。

# android - Android HTTP GET 登录方式

> ID：13799486
> 
> 赞同：1
> 
> 时间：2012-12-10T10:52:12.023
> 
> 标签：android, http, logging, get

我有两个活动。

主要活动运行应用程序并初始化 http get 请求代码并将来自 JSON 的响应解析为字符串。

getmethod 活动使用 http get 方法连接到服务器并将响应发送回我的主要活动。

如何创建登录方法，用户手动输入用户名和密码并将其传递给 get 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:14:43.090

您可以将此代码添加到您的主要活动中 - 它会为您完成所有繁重的工作。

```
/**
 * Represents an asynchronous login/registration task used to authenticate
 * the user.
 */
public class UserLoginTask extends AsyncTask<String, Void, Boolean> {

    @Override
    protected void onPostExecute(final Boolean success) {
        if (success == true) {
            //Do whatever your app does after login

        } else {
            //Let user know login has failed
        }
    }

    @Override
    protected Boolean doInBackground(String... login) {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                "YOUR_ADDRESS_HERE.COM");
        String str = null;
        String username = login[0];
        String password = login[1];

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("username", username));
        nameValuePairs.add(new BasicNameValuePair("password", password));
        try {
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        } catch (UnsupportedEncodingException e1) {
            e1.printStackTrace();
            return false;
        }

        try {
            HttpResponse response = httpclient.execute(httppost);
            str = EntityUtils.toString(response.getEntity());

        } catch (IOException e) {
            e.printStackTrace();
        }

                    //Whatever parsing you need to do on the response
                    //This is an example if the webservice just passes back a String of "true or "false"

        if (str.trim().equals("true")) {

            return true;
        } else {
            return false;

        }
    } 
```

您可以通过以下方式创建此对象：

```
 UserLoginTask mAuthTask = new UserLoginTask(); 
```

使用以下命令开始请求（也许从登录按钮中放入 OnClick 事件？）：

```
mAuthTask.execute(mUsername, mPassword); 
```

# javascript - 为什么 if([]) 被验证而 [] == false 在javascript中？

> ID：13799497
> 
> 赞同：14
> 
> 时间：2012-12-10T10:52:44.900
> 
> 标签：javascript, boolean

```
if([] == false) alert('empty array is false');
alert(+[]) // alert 0
if([]) alert('empty array is true'); 
```

他们都会发出警报

[演示](http://jsfiddle.net/roine/ZFDXY/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T11:00:30.057

这是因为`==`（平等）运算符的类型强制。

一个空数组被认为是真实的（就像一个空对象一样），因此调用了第二个警报。

但是，如果您使用`([] == false)`，则您的数组将被强制转换为它的字符串表示*，`""`这被认为是一个[虚假值](http://docs.nodejitsu.com/articles/javascript-conventions/what-are-truthy-and-falsy-values)，这使得条件为真，从而也触发了第一个警报。

如果你想避免类型强制，你必须使用`===`(identity) 运算符，这是首选的并且由著名的[Douglas Crockford](http://www.crockford.com/)推广的方式在 javascript 中进行比较。

[您可以在这个详尽的答案](https://stackoverflow.com/a/359509/1047823)中阅读更多关于该问题的信息。

* ^(（`Object.prototype.toString`被调用）)

编辑： JS 比较的乐趣：

```
NaN == false // false
NaN == true  // also false
NaN == NaN   // false

if(NaN)      // false
if(!NaN)     // true

0  == '0'     // true
'' == 0       // true
'' == '0'     // false ! 
```

`==`由于 bfavarettos 答案中提到的奇怪规则，这向您展示了比较的真正“力量” 。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-10T13:01:01.387

这里的两个当前答案都是正确的，但我想根据[语言规范](http://es5.github.com/)添加更详细的解释。明显矛盾的结果的原因是`if`陈述和相等比较的评估方式不同。

在`if(expression)`语句的情况下，*表达式*被求值，然后转换为布尔类型（[第 12.5 节](http://es5.github.com/#x12.5)）。数组是对象，当一个对象转换为布尔值时，结果总是`true`（[第 9.2 节](http://es5.github.com/#x9.2)）。

平等比较`==`遵循一组不同的规则，详见[第 11.9.3 节](http://es5.github.com/#x11.9.3)。比较可能需要多次类型转换，直到两个操作数都是相同的类型。操作数的顺序也很重要。根据该算法，我们可以看到比较`[] == false`实际上是一个四步操作：

1.  涉及布尔值，因此首先将其转换为数字（算法的第 7 步）。所以它变成：

    ```
    [] == 0 
    ```

2.  然后将数组转换为其原始值（参见[第 9.1](http://es5.github.com/#x9.1)节和[第 8.12.8 节](http://es5.github.com/#x8.12.8)），并变为空字符串（步骤 9）。所以：

    ```
    "" == 0 
    ```

3.  将字符串与数字进行比较时，首先将字符串转换为数字（第 5 步，遵循[第 9.3.1 节](http://es5.github.com/#x9.3.1)中描述的规则）：

    ```
    0 == 0 
    ```

4.  Now that we have two Numbers, the comparison evaluates to `true` according to step 1.c.iii.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T11:01:57.170

`true`将值评估为布尔值与将其与or进行比较是有区别的`false`。

使用`==`运算符时，将转换值以使类型对应。`[]`转换为空字符串的值`""`，然后将其转换为布尔值`false`，因此`[] == false`变为真。

评估`[]`为布尔值将返回`true`，因为它不是“假”值，即`0`、`false`、`null`、或。`""``NaN``undefined`

# python - 通过继承共享基础对象

> ID：13799499
> 
> 赞同：1
> 
> 时间：2012-12-10T10:52:57.403
> 
> 标签：python, inheritance, python-3.x, wrapper, composition

我有课`Base`。我想在一个类中扩展它的功能`Derived`。我本来打算写：

```
class Derived(Base):
  def __init__(self, base_arg1, base_arg2, derived_arg1, derived_arg2):
    super().__init__(base_arg1, base_arg2)
    # ...
  def derived_method1(self):
    # ... 
```

有时我已经有一个`Base`实例，我想`Derived`基于它创建一个实例，即一个`Derived`共享`Base`对象的实例（不会从头开始重新创建它）。我想我可以写一个静态方法来做到这一点：

```
b = Base(arg1, arg2) # very large object, expensive to create or copy
d = Derived.from_base(b, derived_arg1, derived_arg2) # reuses existing b object 
```

但这似乎是不可能的。要么我错过了使这项工作的方法，要么（更有可能）我错过了一个很大的原因，为什么它不能被允许工作。有人可以解释它是哪一个吗？

[当然，如果我使用组合而不是继承，这一切都很容易做到。但我希望避免所有通过的`Base`方法的委托。]`Derived``__getattr__`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:09:55.260

依靠你的`Base`班级对`base_arg1`,所做的事情`base_arg2`。

```
class Base(object):
    def __init__(self, base_arg1, base_arg2):
        self.base_arg1 = base_arg1
        self.base_arg2 = base_arg2
        ...

class Derived(Base):
    def __init__(self, base_arg1, base_arg2, derived_arg1, derived_arg2):
        super().__init__(base_arg1, base_arg2)
        ...

    @classmethod
    def from_base(cls, b, da1, da2):
        return cls(b.base_arg1, b.base_arg2, da1, da2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:26:55.800

Alexey 的答案（我的+1）的另一种方法是在 `base_arg1`参数中传递基对象并检查它是否被*误*用于传递基对象（如果它是基类的实例）。另一个 agrument 在技术上可以是可选的（比如`None`），并在代码内部决定时明确检查。

不同之处在于只有参数类型决定使用两种可能的创建方式中的哪一种。如果对象的创建不能在源代码中显式捕获（例如，某些结构包含参数元组的混合，其中一些带有初始值，其中一些带有对现有对象的引用，则这是必要的。然后你会可能需要将参数作为关键字参数传递：

```
d = Derived(b, derived_arg1=derived_arg1, derived_arg2=derived_arg2) 
```

**更新：**为了与初始类共享内部结构，可以使用两种方法。但是，您必须意识到一个事实，即如果其中一个对象试图修改共享数据，通常会发生一些有趣的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T06:11:02.740

在这里要清楚，我会用代码来回答。pepr 谈到了这个解决方案，但代码总是比英文更清晰。在这种情况下 Base 不应该是子类，但它应该是 Derived 的成员：

```
class Base(object):
    def __init__(self, base_arg1, base_arg2):
        self.base_arg1 = base_arg1
        self.base_arg2 = base_arg2

class Derived(object):
    def __init__(self, base, derived_arg1, derived_arg2):
        self.base = base
        self.derived_arg1 = derived_arg1
        self.derived_arg2 = derived_arg2

    def derived_method1(self):
        return self.base.base_arg1 * self.derived_arg1 
```

# python-2.7 - 标签的顺序在使用 pyasn1 的 BER 解码中是否重要

> ID：13799503
> 
> 赞同：1
> 
> 时间：2012-12-10T10:53:12.487
> 
> 标签：python-2.7, asn.1

**案例：-**我需要使用 pyasn1 解码 BER 编码数据，但标签的顺序可能会有所不同。因此，在解码数据时会出现错误。即使标签是可选标签，标签的顺序真的很重要吗？

**注意：-** (case1) 一个 CDR 中的 8 个不同标签按顺序排列：AF 30 81 82 83 84 85 86

```
 (case2)Another 8 Tags is in order : AF 30 81 83 84 85 86 82 
```

但是我需要用单个解码结构来解码两个顺序，这可能吗？

这里给出我的结构以供参考....

类 ChangeOfCharCondition（univ.Sequence）：

```
componentType = namedtype.NamedTypes(

namedtype.OptionalNamedType('Requested', univ.OctetString().subtype(
    implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 1)))

namedtype.OptionalNamedType('Negotiated', univ.OctetString().subtype(
    implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 2))),

namedtype.OptionalNamedType('Uplink', univ.Integer().subtype(
    implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 3))),

namedtype.OptionalNamedType('Downlink', univ.Integer().subtype(
    implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 4))),

namedtype.NamedType('changeCondition', univ.Integer().subtype(
    implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 5))),

namedtype.NamedType('changeTime', univ.OctetString().subtype(
    implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 6)))
    ) 
```

类交通量（univ.SequenceOf）：

```
tagSet = baseTagSet = tag.initTagSet(tag.Tag(tag.tagClassContext,
                                             tag.tagFormatSimple, 15))

componentType = ChangeOfCharCondition() 
```

Cdr 类（univ.Set）：

```
tagSet = baseTagSet = tag.initTagSet(tag.Tag(tag.tagClassContext,
                                             tag.tagFormatSimple, 20))
componentType = namedtype.NamedTypes(
namedtype.OptionalNamedType('TrafficVolumes', TrafficVolumes().subtype(
    implicitTag=tag.Tag(tag.tagClassContext, tag.tagFormatSimple, 15)))) 
```

**样本数据(case1)** - bytearray('\xaf200\x81\x0c\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x82\x0cx01\x12Q\x1fs\x96HHv\ xfa\xff\xff\x83\x01\x00\x84\x01\x00\x85\x01\x02\x86\t\x12\x12\x10\x12\x00P+\x050'），它工作正常

**样本数据(case2)** - bytearray('\xaf200\x81\x0c\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x83\x01\x00\x84\x01\ x00\x85\x01\x02\x86\t\x12\x12\x10\x12\x00P+\x050\x82\x0cx01\x12Q\x1fs\x96HHv\xfa\xff\xff') 在这种情况下它会引发错误，如 PyAsn1Error : TagSet(Tag(tagClass=128, tagFormat=0, tagId=2)) 不在 asn1Spec 中：无'

# django - 如何防止请求对象在Django中被缓存

> ID：13799516
> 
> 赞同：0
> 
> 时间：2012-12-10T10:54:05.350
> 
> 标签：django, caching, memcached

我在我的 django 项目中使用 memcached 进行缓存，我有这样的视图

```
def questions(request):
    # code to fetch all questions 
```

该函数除了从数据库返回一个问题列表之外什么都不做，但是对于它呈现结果的页面有一个标题，我在其中显示 request.user 名称。

如果我直接使用`@cache_page`装饰器，那么请求对象也会被缓存，并且`request.user`该页面上的也会从缓存中获取。结果，当我进入问题页面时，我看到了其他人的名字。

有没有一种方法可以防止请求对象被缓存，使用装饰器。一种方法是使用低级 api 并缓存我想要缓存的查询集，但是是否可以编写一个不会缓存与请求对象相关的任何内容的装饰器？

我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:27:10.133

考虑为您的页面修改模板，以便您可以根据用户缓存一个块

```
{% load cache %}
{% cache 500 sidebar request.user.username %}
    .. sidebar for logged in user ..
{% endcache %} 
```

其他块对所有用户都是相同的

```
{% cache 500 questions %}
    .. questions list ..
{% endcache %} 
```

看看[Django 模板片段缓存文档](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#template-fragment-caching)

# c# - SQL Server 连接超时 C#

> ID：13799517
> 
> 赞同：3
> 
> 时间：2012-12-10T10:54:07.410
> 
> 标签：c#, .net, sql-server-2008, timeout, sqlconnection

首先，我想让每个人都知道我已经搜索了我的特定问题，但似乎找不到导致我问题的原因。

我有一个在网络机器上运行的 SQL Server 2008 实例和一个我编写的连接到它的客户端。

为了连接，我有一小段代码建立与 sql server 2008 实例的连接并返回一个 DataTable，其中填充了我对服务器运行的任何查询的结果，所有这些都是非常标准的东西。无论如何，问题是，每当我打开程序并调用此方法时，在第一次调用我的方法时，无论我在连接字符串中设置的连接超时值是什么，大约需要 15 秒然后超时. 奇怪的是，尽管我对该方法进行的第二次或第三次调用将毫无问题地工作。

我已经在服务器机器上打开了 SQL Server 的端口，如本文所述：[如何为 SQL Server 打开防火墙端口](http://support.microsoft.com/kb/968872)并验证它是否已正确配置。任何人都可以在我的代码中看到特定问题吗？

```
 string _connectionString = "Server=" + @Properties.Settings.Default.sqlServer + "; Initial Catalog=" + @Properties.Settings.Default.sqlInitialCatalog +
        ";User Id=" + @Properties.Settings.Default.sqlUsername + ";Password=" + @Properties.Settings.Default.sqlPassword + "; Connection Timeout=1";

    private DataTable ExecuteSqlStatement(string command)
    {
        using (SqlConnection conn = new SqlConnection(_connectionString))
        {
            try
            {
                conn.Open();
                using (SqlDataAdapter adaptor = new SqlDataAdapter(command, conn))
                {
                    DataTable table = new DataTable();
                    adaptor.Fill(table);
                    return table;
                }
            }
            catch (SqlException e)
            {
                throw e;
            }
        }
    } 
```

我捕获的 SqlException 是：“超时已过期。在操作完成之前超时时间已过或服务器没有响应。”

这发生在 conn.Open(); 我包含的代码片段中的行。如果有人有任何想法，那就太好了！

**附录**如果我 ping 服务器，它的响应时间小于 10 毫秒。此外，在使用 SQL Server Management Studio 时，我也遇到了同样的行为（我刚刚在写完这个问题后尝试过这个，因为这个想法刚刚闪过我的脑海）。我认为这必须是网络问题而不是代码问题，因为在使用 SQL Server Management Studio 时也需要两次尝试。我意识到我可以对连接失败实施错误检查，然后重新尝试连接（无论如何我应该这样做）但这对我来说似乎不是特别“干净”，因为它没有解决根本问题。这里有没有人有这个问题的经验？

**编辑** 虽然一年多后这个问题已经被查看了超过 4000 次，但我发现虽然我 /thought/ 防火墙端口已打开，但实际上并没有。我错误地认为您需要在 Windows 中将防火墙打开到 SQL Server 使用的端口号，在我的情况下，我将其设置为允许 TCP 端口 1433 上的连接，防火墙在尝试建立初始连接时会导致问题。

我发现设置它的正确方法是设置 Windows 防火墙以允许 SQL Server 实例可执行文件通过。为此，您需要在 Windows 防火墙中添加一个程序，浏览到您的 sql 实例所在的文件夹`C:\Program Files (x86)\Microsoft SQL Server\MSSQL10_50.SQLINSTANCE\MSSQL\Binn`，然后将 sqlservr.exe 文件添加到防火墙规则中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:01:56.603

您将连接超时值设置为 1 秒。从连接字符串中删除它，然后重试。

或者问题可能出在您使用的 SQL 选择上。会不会需要很长时间。如果是这样，第 2 次和第 3 次调用将检索缓存的值，从而运行得更快。

# android - 在 Android 4.0 和更高版本的 Android 中，YouTube 视频未在 HTML5 WebView 中显示

> ID：13799520
> 
> 赞同：0
> 
> 时间：2012-12-10T10:54:15.103
> 
> 标签：android, youtube, html5-video

我必须在我的应用程序中播放 YouTube 视频。我已使用 HTML5 WebView 播放此视频。

对于 4.0 以下的操作系统版本，视频播放良好。

高于 4.0（4.1.2、4.2），视频不显示。音频正在播放，但屏幕变黑，没有视频显示。在这种情况下，如果我触摸屏幕的右下角，则会显示视频，但视频会闪烁，并且按返回按钮不会停止。

我必须播放所有版本的视频。我已经在 Galaxy S3 版本 4.1.2 和 Nexus 版本 4.2 中对其进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:34:38.307

如果您使用我的小[HTML5WebView](http://code.google.com/p/html5webview/)，我认为如果在清单文件中打开 hardwareAccelerated 应该能够播放 YouTube 视频。

# mysql - 在 Rails 中连接现有的 MySQL 数据库

> ID：13799524
> 
> 赞同：0
> 
> 时间：2012-12-10T10:54:29.607
> 
> 标签：mysql, ruby-on-rails, ruby, database, rake

我想将我的 Ruby on Rails 应用程序与单独开发的 MySQL 数据库连接起来。对于这个连接，我使用了 `development`环境：

```
adapter: mysql
username: root  
password: ******  
host: 127.0.0.1
port: 3306 
```

当我尝试在 Rails 中建立 MySQL 连接时，它显示：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql-2.9.0-x86-mingw32/lib/mysql.rb:4:in `require': Incorrect MySQL client library version! This gem was compiled for 6.0.0 but the client library is 5.5.9\. (RuntimeError)
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql-2.9.0-x86-mingw32/lib/mysql.rb:4:in `<top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
    from D:/registration/config/application.rb:7:in `<top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'

D:\registration> 
```

此外，当我尝试我的 rake 命令时，它显示：

```
rake aborted!
Incorrect MySQL client library version! This gem was compiled for 6.0.0 but the client library is 5.5.9.
D:/registration/config/application.rb:7:in `<top (required)>'
D:/registration/Rakefile:5:in `<top (required)>'
(See full trace by running task with --trace)

D:\registration> 
```

如何连接到我的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:13:00.847

根据错误，您似乎使用的 gem 版本比 MySQL 客户端更新。

它说：

*   您的 gem 已编译（创建）我的 sql 客户端版本 6.0.0。
*   您实际的 my sql 客户端版本（在您的机器中）是 5.5.9。

您能否发布您的 MySQL gem 版本以及您的 MySQL 客户端版本？

将您的 MySQL 客户端升级到版本 6.0.0 应该可以解决此问题。

# zend-framework - 如何在 wamp 中安装 Zend Framework

> ID：13799525
> 
> 赞同：1
> 
> 时间：2012-12-10T10:54:28.583
> 
> 标签：zend-framework

我是 Zend 框架的新手，我想学习这个框架。所以我已经下载了 ZendFramework-2.0.5 版本，但我不知道如何安装、运行和使用它。

我想将它安装到 WAMP 服务器、Eclipse IDE 和 windows XP 操作系统中。

请告诉我实现它的所有有用步骤。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:30:04.063

使用库的最简单方法是将其添加到您的 php.ini 包含路径中，例如：

```
include_path = ".;c:\php\includes;C:\wamp\apps\ZendFramework-2.0.5\library" 
```

我建议你把它放在 wamp 的 Apps 文件夹中，这样它就不是特定于项目的。另一种方法是将捆绑包中的 Zend 文件夹放在 Zend 项目的 library 文件夹中

为了能够使用 ZF 工具（创建项目和其他一些东西），您还需要将包含 zf.bat 命令行工具的文件夹的路径添加到环境变量中

由于我使用的是法语版本的 Windows，因此术语可能会有所不同，但翻译应该足够准确

1.  右键单击您的计算机并选择属性
2.  高级系统设置
3.  环境变量
4.  在该部分`Variables for user ...`中，单击创建并命名新变量`ZF`并设置`C:\wamp\apps\ZendFramework-2.0.5\bin`为值
5.  在该部分中`System variables`找到密钥`path`并在末尾添加相同的路径（确保在粘贴新路径之前放置一个 ;）
6.  在 admin 中启动命令行工具（右键单击图标并选择以管理员身份运行）并键入 zf，您应该从 ZF 工具中获得帮助文本

从那里您应该能够按照文档中给出的快速入门在您想要的位置创建一个新项目

您可能还想为您的项目创建一个新的[虚拟主机](http://en.wikipedia.org/wiki/Virtual_hosting)

然后您可以尝试以下[教程](http://akrabat.com/zend-framework-2-tutorial/)（最好的教程之一）

# java - 用Java打开一个大文件很慢

> ID：13799528
> 
> 赞同：13
> 
> 时间：2012-12-10T10:54:36.380
> 
> 标签：java, file-io, nio, large-files

我有一个大（12GB）文件，我需要使用 Java 从中提取小块数据（每个几千字节）。打开文件后，查找和读取数据非常快，但打开文件本身需要**很长时间**- 大约 90 秒。有没有办法加快Java中的打开文件操作？

为了澄清，我尝试了以下选项来打开和读取文件：

```
new FileInputStream(file); 
new RandomAccessFile(file, "r");
Files.newByteChannel(path, StandardOpenOption.READ); 
```

这些中的每一个都产生了相似的结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T15:47:49.857

来自评论：具体来说，问题是Java的打开文件操作触发了运行病毒扫描的OS操作，解决方法是将Java添加到受信任进程列表中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:13:45.593

您遇到的问题主要是由您使用的 JNI 引起的。

当您的代码在 FileInputSream(String) 的构造函数期间等待时。即验证传递路径的存在并调用方法`private native void open(String)`。

[然后FileInputSream#open(String)](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/0a5b87833562/src/share/native/java/io/FileInputStream.c)的 openJDK 实现如下所示：

```
 JNIEXPORT void JNICALL
    Java_java_io_FileInputStream_open(JNIEnv *env, jobject this, jstring path) {
        fileOpen(env, this, path, fis_fd, O_RDONLY);
    } 
```

这将我们移动到[io_util_md.c](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/1ad7fbef48d0/src/windows/native/java/io/io_util_md.c)和方法

`jlong winFileHandleOpen(JNIEnv *env, jstring path, int flags)`

您可以在那里分析代码。

* * *

此时，您有多种选择。

*   检查不同的JDK
*   编写 C 代码，创建 onw JNI 方法。
*   检查不同的文件系统。

# php - AJAX 请求错误

> ID：13799533
> 
> 赞同：0
> 
> 时间：2012-12-10T10:54:59.457
> 
> 标签：php, jquery, ajax

**最终编辑 - 答案**：感谢大家的帮助。最后，它归结为在更改 url 名称时出现了一些 htaccess 问题，并且出于某种奇怪的原因，即使在引用根 (./ajax) 时它也不喜欢它。我不知道为什么仍然，但它只是没有。当我硬编码整个 URL 时，它起作用了。可笑 - 感谢大家的帮助。每天都是上学日......

我一生都无法弄清楚为什么这是错误的-有人可以再看一眼-这可能真的很愚蠢，在此先感谢您的帮助：

**愚蠢地编辑**我输入了错误的 URL - 但是......现在我输入了正确的 URL，该网站只是挂起并崩溃。请问有什么想法吗？

**编辑 2**只是为了给这篇文章添加更多细节，“加载...”div 出现了，所以 ajax 肯定会启动，然后页面崩溃并变得无响应。我添加了额外的验证以确保 PHP 文件存在。确实如此。PHP 文件只是简单地回显了一个 h1 标记。这是一个完整的谜，因为我昨天在家庭服务器上做了一个类似的 ajax 请求，它工作得很好。

**编辑 3**到目前为止，感谢大家对此的投入和帮助。经过进一步测试，我从 JQuery AJAX 请求中删除了 data 属性，但它仍然完全没有响应并崩溃。这可能与服务器有关吗？我真的没办法了……

HTML：

```
<input id="pc" class="sfc" name="ProdCat[]" type="checkbox" value="">
<input id="psc" class="sfc" name="ProdSubCat[]" type="checkbox" value="">
<input id="bf" class="sfc" name="BrandFil[]" type="checkbox" value=""> 
```

查询：

```
$('input[type="checkbox"]').change(function(){

    var name = $(this).attr("name");
    var ProdCatFil = [];
    var ProdSubCatFil = [];
    var BrandFil = [];

    // Loop through the checked checkboxes in the same group
    // and add their values to an array
    $('input[type="checkbox"]:checked').each(function(){

        switch(name) {

            case 'ProdCatFil[]': 
                ProdCatFil.push($(this).val());
            break;
            case 'ProdSubCatFil[]': 
                ProdSubCatFil.push($(this).val());
            break;
            case 'BrandFil[]': 
                BrandFil.push($(this).val());
            break;
        }
    });

    $("#loading").ajaxStart(function(){
        $(this).show();
        $('.content_area').hide();
    });

    $("#loading").ajaxStop(function(){
        $(this).hide();
        $('.content_area').show();
    });

    $.ajax({
        type: "GET",
        url: '../ajax/ajax.php',
        data: 'ProdCatFil='+ProdCatFil+'&ProdSubCatFil='+ProdSubCatFil+'&BrandFil='+BrandFil,
        success: function(data) {
            $('.content_area').html(data);
        }       
    }).error(function (event, jqXHR, ajaxSettings, thrownError) {
        $('.content_area').html("<h2>Could not retrieve data</h2>");
        //alert('[event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
    });

}); 
```

PHP（只是为了证明它的工作）：

```
echo '<h1>TEST TEST TEST </h1>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:17:36.443

一切都好，但你还是错了......看看你的`data:`财产：

```
$.ajax({
    type: "GET", // The get ajax type cannot send data as post
    url: '../ajax/ajax.php',
    data: 'ProdCatFil='+ProdCatFil+'&ProdSubCatFil='+ProdSubCatFil+'&BrandFil='+BrandFil,
    success: function(data) {
        $('.content_area').html(data);
    }       
}).error(function (event, jqXHR, ajaxSettings, thrownError) {
    $('.content_area').html("<h2>Could not retrieve data</h2>");
    //alert('[event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
}); 
```

并将其更改为`type:"POST"`：

```
$.ajax({
    type: "POST",
    url: '../ajax/ajax.php',
    data: 'ProdCatFil='+ProdCatFil+'&ProdSubCatFil='+ProdSubCatFil+'&BrandFil='+BrandFil,
    success: function(data) {
        $('.content_area').html(data);
    }       
}).error(function (event, jqXHR, ajaxSettings, thrownError) {
    $('.content_area').html("<h2>Could not retrieve data</h2>");
    //alert('[event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:18:56.863

**试试这个你没有添加错误的右括号......**

//添加文档准备功能并删除复选框周围的双括号它应该是 $('input[type=checkbox]').change(function(){ 在2个地方..

```
$('input[type=checkbox]').change(function(){

    var name = $(this).attr("name");
    var ProdCatFil = [];
    var ProdSubCatFil = [];
    var BrandFil = [];

    // Loop through the checked checkboxes in the same group
    // and add their values to an array
    $('input[type=checkbox]:checked').each(function(){

        switch(name) {
           case 'ProdCatFil[]': 
                ProdCatFil.push($(this).val());
                break;
           case 'ProdSubCatFil[]': 
                ProdSubCatFil.push($(this).val());
                break;
           case 'BrandFil[]': 
                BrandFil.push($(this).val());
                break;
        }

    });

    $("#loading").ajaxStart(function(){
        $(this).show();
        $('.content_area').hide();
    });

    $("#loading").ajaxStop(function(){
        $(this).hide();
        $('.content_area').show();
    });

    $.ajax({
        type: "GET",
        url: '../ajax/ajax.php',
        data: 'ProdCatFil='+ProdCatFil+'&ProdSubCatFil='+ProdSubCatFil+'&BrandFil='+BrandFil,
        success: function(data) {
            $('.content_area').html(data);
        }       
    }).error(function (event, jqXHR, ajaxSettings, thrownError) {
        $('.content_area').html("<h2>Could not retrieve data</h2>");
        //alert('[event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
        });
    }); 
```

**或者您可以在更改时使用我的 ajax 请求**

```
var detailGet = 'ProdCatFil='+ProdCatFil+'&ProdSubCatFil='+ProdSubCatFil+'&BrandFil='+BrandFil;
        // Use POST or GET
$.get("../ajax/ajax.php", detailGet, function (response, status, xhr) {
    if(status == "success") {
        $('.content_area').html(response);
    } else if(status == "error") {
        alert('Something when wrong.');                
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:32:01.620

我认为您错误地将字符串与数据对象中的数组连接起来。

```
$.ajax({
    type: "GET",
    url: '../ajax/ajax.php',
    data: 'ProdCatFil='+ProdCatFil+'&ProdSubCatFil='+ProdSubCatFil+'&BrandFil='+BrandFil,
    success: function(data) {
        $('.content_area').html(data);
    }       
}).error(function (event, jqXHR, ajaxSettings, thrownError) {
    $('.content_area').html("<h2>Could not retrieve data</h2>");
    //alert('[event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
}); 
```

尝试使用具有键/值对的对象可能会解决您的问题

```
$.ajax({
    type: "GET",
    url: '../ajax/ajax.php',
    data: { // Here I use an object with key/value pairs. If value is an Array, jQuery serializes multiple values with same key.
        'ProdCatFil': ProdCatFil,
        'ProdSubCatFil': ProdSubCatFil,
        'BrandFil': BrandFil
    },
    success: function(data) {
        $('.content_area').html(data);
    }       
}).error(function (event, jqXHR, ajaxSettings, thrownError) {
    $('.content_area').html("<h2>Could not retrieve data</h2>");
    //alert('[event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T12:09:58.150

```
<script type="text/javascript">
    $(document).ready(function () {
        $("input[type=checkbox]").change(function () {
            var name = $(this).attr("name");
            var ProdCatFil = [];
            var ProdSubCatFil = [];
            var BrandFil = [];
            // Loop through the checked checkboxes in the same group
            // and add their values to an array
            $('input[type=checkbox]:checked').each(function () {
                switch (name) {
                    case 'ProdCatFil[]':
                        ProdCatFil.push($(this).val());
                        break;

                    case 'ProdSubCatFil[]':
                        ProdSubCatFil.push($(this).val());
                        break;

                    case 'BrandFil[]':
                        BrandFil.push($(this).val());
                        break;
                }
            });

            $("#loading").ajaxStart(function () {
                $(this).show();
                $('.content_area').hide();
            });

            $("#loading").ajaxStop(function () {
                $(this).hide();
                $('.content_area').show();
            });

            $.ajax({
                type: "GET",
                url: 'ajaxReq.php',
                data: 'ProdCatFil=' + ProdCatFil + '&ProdSubCatFil=' + ProdSubCatFil + '&BrandFil=' + BrandFil,

                success: function (data) {

                    $('.content_area').html(data);
                }
            }).error(function (event, jqXHR, ajaxSettings, thrownError) {
                $('.content_area').html("<h2>Could not retrieve data</h2>");
                //alert('[event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
            });
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T11:47:22.697

你可以试试这个：

```
$('input[type="checkbox"]').change(function(){

    var name = $(this).attr("name");
    var ProdCatFil = [];
    var ProdSubCatFil = [];
    var BrandFil = [];

    // Loop through the checked checkboxes in the same group
    // and add their values to an array
    $('input[type="checkbox"]:checked').each(function(){

        switch(name) {

           case 'ProdCatFil[]': 
                ProdCatFil.push($(this).val());
                break;

           case 'ProdSubCatFil[]': 
                ProdSubCatFil.push($(this).val());
                break;

           case 'BrandFil[]': 
                BrandFil.push($(this).val());
                break;

           default:
                // Checkboxes which are not
                // a part of this loop.
                break;

        }

    });

    $("#loading").show();
    $('.content_area').hide();

    $.ajax({
        type: "GET",
        url: '../ajax/ajax.php',
        data: 'ProdCatFil=' + encodeURIComponent(ProdCatFil.join(",")) + '&ProdSubCatFil=' + encodeURIComponent(ProdSubCatFil.join(",")) + '&BrandFil=' + encodeURIComponent(BrandFil.join(",")),
        success: function(data) {
            $('.content_area').html(data);
        },
        complete: function () {
            $("#loading").hide();
            $('.content_area').show();
        }
    }).error(function (event, jqXHR, ajaxSettings, thrownError) {
        $('.content_area').html("<h2>Could not retrieve data</h2>");
        //alert('[event:' + event + '], [jqXHR:' + jqXHR + '], [ajaxSettings:' + ajaxSettings + '], [thrownError:' + thrownError + '])');
    });

}); 
```

# sharepoint-2010 - 如何从 INSERT HYPERLINK 添加 javascript 函数

> ID：13799535
> 
> 赞同：0
> 
> 时间：2012-12-10T10:55:00.127
> 
> 标签：sharepoint-2010

我有一个门户的主页，我想在那个页面上放这个，但它不允许我放这个地址并将其视为无效地址。我尝试通过 EDIT HTML 放置以下语句，但是当页面出现时，它不可点击。如何添加这个？

```
<a href="javascript:openDialog('/SitePages/NewReq.aspx')">New Requisition</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:26:26.577

您最好只为您的 a 标签指定一个类，然后通过 JQuery 添加点击事件。

尝试这个：

在页面上

```
<a class="newReqLink">New Requisition</a> 
```

在jQuery中

```
 $('a.newReqLink').click(function(){ 
       window.openDialog('/SitePages/NewReq.aspx');  
 }); 
```

**注意：**书面，未经测试。

# asp.net - 如何应用域共享会话

> ID：13799537
> 
> 赞同：0
> 
> 时间：2012-12-10T10:55:13.570
> 
> 标签：asp.net, asp.net-membership

我有一个可以从 2 个不同域访问的应用程序。该应用程序根据使用的域显示数据。

我需要登录 domain1 的客户端也将在 domain2 访问中登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:40:07.943

它不像听起来那么容易，因为 cookie 用于验证，并且 cookie 不能从不同的域设置。

阅读有关 stackoverflow 如何使其工作的 meta 帖子：[https ://meta.stackexchange.com/questions/64260/how-does-sos-new-auto-login-feature-work](https://meta.stackexchange.com/questions/64260/how-does-sos-new-auto-login-feature-work)

您还可以阅读[全球网络自动登录](https://blog.stackoverflow.com/2010/09/global-network-auto-login/)文章。

# winapi - 检测 SetCursorPos()？

> ID：13799539
> 
> 赞同：0
> 
> 时间：2012-12-10T10:55:18.497
> 
> 标签：winapi, mouse

您可能会弄清楚我为什么要问这个问题。即使没有，也很简单。我的问题是是否可以在自己的应用程序上检测到 SetCursorPos() 的使用，而无需扫描其他正在运行的应用程序以查找对此 API 的任何调用。

例如，如果我将光标放在一个窗口中并调用 SetCursorPos()，那么这个窗口是否可以知道光标位置不是直接来自鼠标（原始输入）？

我并没有忘记这样一个事实，即您可以通过检查位置的变化来“知道”鼠标输入是否是原始的。例如，如果位置从 100(X) 和 100(Y) 变为 500(X) 和 500(Y)，而没有在这两个位置之间移动，那么可以肯定的是，鼠标位置发生了变化。

如果你们中的任何人都知道一种产生“原始鼠标输入”的方法，而没有任何应用程序能够区分函数输出和鼠标输出之间的区别——如果有这样的区别——那么d 也足够了。

当然，每当我移动鼠标时，我使用的操作系统都会检测到这一点，然后相应地移动光标。在实践中，我应该能够根据自己的意愿更改这个低级功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:41:18.077

窗口无法直接确定鼠标的移动方式。外部应用程序可能正在使用`SetCursorPos()`，但它们也可能使用较低级别的函数，例如`mouse_event()`or `SendInput()`。当通知到达目标窗口时，操作系统已经对数据进行了规范化，并且任何源信息都丢失了如果您确实需要检测使用`SetCursorPos()`或其他功能，则必须在每个正在运行的进程中直接挂钩这些功能。或者，您可以尝试通过注册“原始输入”`RegisterRawInputDevices()`并查看是否从鼠标硬件直接获得相应的通知，假设那些模拟功能也不会触发原始通知。

# c++ - C++、Winsocket DLL 发送注入

> ID：13799540
> 
> 赞同：0
> 
> 时间：2012-12-10T10:55:20.403
> 
> 标签：c++, winsock, send, code-injection

谢谢阅读。我一直在尝试从注入的 DLL 从 Winsock 发送带有“发送”的数据包，但我做不到，我看过很多关于 HOOKING“recv”和“send”的指南，但不是关于通过发送数据包使用“发送”或“WSASend”和同一个套接字，有没有办法使用“发送”和使用同一个套接字？，我应该得到套接字句柄吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:08:15.017

可能有几个原因。其中一些我可能会想到：

1.  您正在尝试发送到已经关闭的套接字。如果您正在对主应用程序活动异步调用 send() ，则应用程序可能在您尝试发送时已经关闭了套接字。尝试在用于发送数据的套接字上的 send() 或 recv() 调用的钩子函数中发送。
2.  在另一个线程中的同一个套接字上还有另一个 send() 调用。
3.  缓冲区长度参数与实际缓冲区长度不一致（如果您只是更改缓冲区参数，但保留原始调用中的长度参数不变，则可能会发生这种情况）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:49:04.430

> 我应该得到套接字句柄吗？

是的，如果你能得到套接字句柄，我看不出问题出在哪里：因为你注入的 DLL 在同一个进程中运行，它允许使用现有的句柄（如果你能发现句柄值，也许是通过挂钩其中一个套接字函数以查看挂钩的应用程序正在使用什么套接字句柄）。

您可能无法重新打开同一个套接字来获得自己的新句柄。

# jquery - 在句子中添加一个单词的链接

> ID：13799541
> 
> 赞同：2
> 
> 时间：2012-12-10T10:55:20.103
> 
> 标签：jquery, jquery-plugins

在 JQuery 中有没有办法从用户输入的句子中选择一个特定的词，他可以添加一个链接到这个词的任何他想要的。注意：句子不是硬编码的，我们不知道哪个句子用户将输入。根据句子，我们必须创建指向所选单词的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:43:37.747

结合[使用 JavaScript 和 jQuery 中的资源来获取用户选择的文本，然后用它做一些事情（有用吗？）](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)，[使用 jQuery 和下面的 Sridhar Narasimhan 回答的部分包装文本](https://stackoverflow.com/a/727473/122005)，您可以提出以下内容（未经测试）：

**HTML：**

```
<input type="text" id="enter"/>
<div id="content" ></div>
<div id="link" ></div> 
```

**Javascript**：

```
$("#enter").bind("keyup", function() {
    $("#content").html($("#enter").val());
});

$.expr[":"].containsNoCase = function(el, i, m) {
    var search = m[3];
    if (!search) return false;
    // we'll use text to find what we want...
    return eval("/" + search + "/ig").test($(el).text());
};

if (!window.Kolich) {
    Kolich = {};
}

Kolich.Selector = {};
Kolich.Selector.getSelected = function() {
    var t = '';
    if (window.getSelection) {
        t = window.getSelection();
    } else if (document.getSelection) {
        t = document.getSelection();
    } else if (document.selection) {
        t = document.selection.createRange().text;
    }
    return t;
}

$.expr[":"].containsNoCase = function(el, i, m) {
    var search = m[3];
    if (!search) return false;
    // we'll use text to find what we want...
    return eval("/" + search + "/ig").test($(el).text());
};

Kolich.Selector.mouseup = function() {
    var st = Kolich.Selector.getSelected();
    if (st != '') {
        // alert("You selected:\n" + st);
        // wrap selecetd word in a link
        $("#content:containsNoCase('" + st + "')").each(function() {
            var textwithLink = '<a href="javascript:alert(\'link-to-selected-text.htm\')">' + st + '</a>';

            $("#link").html(textwithLink);

        });
    }
}

$(document).ready(function() {
    $(document).bind("mouseup", Kolich.Selector.mouseup);
}); 
```

[**工作演示**](http://jsfiddle.net/bGfA2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:56:15.857

尝试这个。

```
 Your HTML Structure.
     <input type="text" id="enter"/>
     <input type="text" id="link"/>
     <button type="button" onclick="doAction()">Make Link</button>
     <div id="content" >Mrinmoy Ghoshal</div> 
```

这是你的功能

```
 function doAction(){

       var enterv=document.getElementById('enter').value;
       var linkv=document.getElementById('link').value;
       var str=document.getElementById('content').innerHTML;

       var strnew=str.replace(enterv,'<a href="'+linkv+'">'+enterv+'</a>');
       document.getElementById('content').innerHTML=strnew;
       alert(strnew);
       } 
```

[工作演示](http://jsfiddle.net/85tAq/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:09:00.910

```
Try the below

<input type="text" id="enter"/>
    <div id="content" ></div> 

$("#enter").bind("keyup",function(){

$("#content").html($("#enter").val().replace("Jquery","<a href=''  >Jquery</a>"));
}); 
```

在输入中输入 Jquery 并检查它。

[http://jsfiddle.net/aDRB6/11/](http://jsfiddle.net/aDRB6/11/)

谢谢

# c++ - Qt C++ - QList 类型不允许

> ID：13799545
> 
> 赞同：0
> 
> 时间：2012-12-10T10:55:36.477
> 
> 标签：c++, arrays, qt, list, types

我想将`float**`参数列表传递给某些仅与 C-syle 一起使用的方法`float**`（但我们认为我们可以有一个`QList<>`as arguments 类型）。

我试过了

```
QList< float** > list_ = new QList< float** >(); 
```

但这不起作用。我应该改用什么？什么是二维矩阵列表的 Qt 容器？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T10:56:52.503

您正在使用类似 java 的语法（或 c# 或其他）

在 C++ 中，它应该是

```
QList<float**> *list_ = new QList<float**>() ;   //Pointer to a heap allocated list, Closer to what you wanted to do i think. NEED TO CALL "delete list_" once you are done with it. 
```

或者

```
QList<float**> list_; //List on the stack, more c++ish, destroyed once it goes out of scope. 
```

# c++ - 如何用 STL 组合函子？

> ID：13799550
> 
> 赞同：4
> 
> 时间：2012-12-10T10:56:05.097
> 
> 标签：c++, stl, composition, functor

在 STL 中可以进行以下操作：

```
int count = count_if(v.begin(), v.end(), bind2nd(less<int>(), 3)); 
```

这将返回 v 中小于 3 的元素数。如何组成一个返回 0 到 3 之间元素数的函子？我知道 boost 对此有一些设施，但在纯 STL 中是否有可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T11:34:33.313

如果您的意思是使用标准库的函子组合工具，那么不会，至少在 C++98 中不会。在 C++11 中，您可以使用`std::bind`任意组合的函子：

```
using std::placeholders;
int count = std::count_if(v.begin(), v.end(), 
                          std::bind(std::logical_and<bool>(), 
                                    std::bind(std::less<int>(), _1, 3), 
                                    std::bind(std::greater<int>(), _1, 0))); 
```

但这并没有真正为这样一个简单的谓词带来麻烦。

如果允许 C++11 功能，那么最简单的方法可能是 lambda，无需（您自己）制作复杂的函子组合：

```
int count = std::count_if(v.begin(), v.end(), [](int arg) { 
                          return arg > 0 && arg < 3; }); 
```

但是对于 C++98 *Chubsdad*的答案可能是最好的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T11:10:05.000

这是你问的吗？我知道这不是纯 STL，但仍然..

```
struct InRange
{
    InRange(int x, int y) : mx(x), my(y) { }
    bool operator()(int x)
    {
        return (x >= mx) && (x <= my);
    }
    int mx, my;
};

int main() {
    std::vector<int> v;
    v.push_back(13);
    v.push_back(14);
    v.push_back(18);
    v.push_back(3);

    int count = std::count_if(v.begin(), v.end(), InRange(0, 3));
} 
```

# oauth - 为 dotnetopenauth 实现 IConsumerTokenManager

> ID：13799554
> 
> 赞同：1
> 
> 时间：2012-12-10T10:56:17.440
> 
> 标签：oauth, asp.net-mvc-4, oauth-2.0, dotnetopenauth

我正在使用 dotnetopenauth 为许多提供者实现 OAuth，到目前为止我发现它非常好。

我知道我需要实现 IConsumerTokenManager 以将令牌和机密存储在我的数据库中，这非常有意义。到目前为止一切都很好。

不过，我对两件事有点困惑：

1.  microsoft OAuthWebSecurity 类提供了为 facebook 和 linkedin 等注册客户端的方法，但没有一个构造函数重载接受 IConsumerTokenManager - 这是否意味着它们在后台使用 InMemoryTokenManager，如果是这样，这是否意味着我必须进行自定义实现无论如何为了使用我的令牌管理器？

2.  我已经为 google 实现了一个自定义 OAuth2Client (DotNetOpenAuth.AspNet.Clients.OAuth2Client)，并且接受 InMemoryTokenManager 的 OAuth2Client 基类的构造函数中没有重载 - OAuth2 所需的此类是或是否处理了令牌管理不同？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T21:22:15.020

`IConsumerTokenManager`仅适用于 OAuth 1.0，但 Facebook 和 Google 使用 OAuth 2.0，因此您的客户端不需要实现此接口。

# mysql - MySQL 检查表是否存在错误

> ID：13799559
> 
> 赞同：5
> 
> 时间：2012-12-10T10:56:28.220
> 
> 标签：mysql

我正在尝试检查一个表是否已经存在，但是我无法让它工作。

```
IF EXISTS (SELECT 1 
    FROM sysobjects 
    WHERE xtype='u' AND name='tablename') 
        SELECT 'table already exists.' 
ELSE 
BEGIN
     CREATE TABLE Week_(
             id INT(10)AUTO_INCREMENT PRIMARY KEY (id),
             ...
             ...)
             END; 
```

我的错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'IF EXISTS (SELECT 1 FROM sysobjects WHERE xtype='u' AND name' 附近使用正确的语法

有人可以帮我弄这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T10:59:38.227

在 MySQL 中，您可以使用以下语法：

```
CREATE TABLE IF NOT EXISTS 
```

[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T10:58:50.130

试试这个：

```
SELECT * 
FROM information_schema.TABLES 
WHERE TABLE_SCHEMA = 'DBName' AND TABLE_NAME = 'TableName' 
```

**或者**

```
CREATE TABLE IF NOT EXISTS 'TableName' 
```

# jquery - d3.json() 函数是否可以获取 json 对象？

> ID：13799571
> 
> 赞同：8
> 
> 时间：2012-12-10T10:57:11.533
> 
> 标签：jquery, d3.js

我是 JQuery / d3js 世界的新手。

我想从 json 格式的数据中绘制图表。我看到了一些示例，该`d3.json(json,f)`函数只能获取包含 json 格式数据的文件。我的问题：是否可以使用 json 格式的对象或字符串来调用它，例如：

```
val jsonStr = { "foo" : "bar"}
d3.json(jsonStr ,f) 
```

如果不是，我如何绘制包含动态数据的图表（json 格式）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T11:15:04.883

如果您将数据作为 Javascript 变量，则不需要该`d3.json`函数。只需在您将使用第二个参数（回调函数）的参数的地方使用变量的名称`d3.json`。

```
var data = [1,2,3];   
svg.selectAll("circle")
.data(data)
.enter()
.append("circle")
.‌​attr("cx", function(d) { return d; })
.attr("cy", function(d) { return d; }) 
```

# maven - 使 maven 在构建和运行之间进行文件复制

> ID：13799573
> 
> 赞同：18
> 
> 时间：2012-12-10T10:57:17.907
> 
> 标签：maven

**修订后的问题**（下面的旧问题）：

问题：使用 Maven 在 NetBeans 中构建和运行 Jenkins 插件项目时，*log4j 使用的*Java 类加载器找不到某些文件（如配置文件、自定义附加程序、JDBC 驱动程序）。需要将它们复制到 下的另一个位置`target`，然后才能找到它们。

我想我想要的解决方案是：**我想给 Maven 一个额外的命令行参数**，在 NetBeans 中配置。**这应该使 Maven 在构建之后和运行任何东西之前做额外的步骤**。该步骤可以是文件复制（在 pom.xml 中或由命令参数指定），也可以是运行脚本（在 pom.xml 中或由命令行参数指定）。

向 pom.xml 添加什么？一些maven插件？

* * *

**老问题**（供参考）

我有一个“my-jenkins-plugin”的maven项目。我需要与它一起使用*log4j*。我目前在这个路径上有*log4j.xml ：*

```
./src/main/resources/log4j.xml 
```

当我在 Netbeans 中进行 clean&build 时，它会被复制到这些地方：

```
./target/classes/log4j.xml
./target/generated-classes/emma/classes/log4j.xml
./target/my-jenkins-plugin/WEB-INF/classes/log4j.xml 
```

但是，log4j 无法从任何这些位置找到该文件。我需要手动将其复制到此位置：

```
./target/work/webapp/WEB-INF/classes/log4j.xml 
```

然后它按预期工作。

更多细节：Maven 2、Netbeans 7.2。它是标准的 Jenkins 插件，最初是使用 创建的项目`mvn hpi:create`，Netbeans 使用 Jetty 来运行 Jenkins。在 NetBeans 下运行时使用的类路径是`java.class.path=C:\work\maven\boot\classworlds-1.1.jar`（这是一个现有的 jar），我还没有找到向该类路径添加任何内容的方法，但是如果我将*log4j.xml*添加到该 jar 文件的根目录，它也可以找到并且可以工作（显然这不是一个令人满意的解决方案）。通过查看控制台输出，我知道 log4j 是否有效，要么是正确的日志行，要么是可怕的`log4j:WARN No appenders could be found for logger (TestLog). log4j:WARN Please initialize the log4j system properly.`错误，仅此而已。

**问题**：我怎么能有

*   在第一组位置中找到的*log4j.xml ，*
*   或在*目标*目录之外的位置找到*log4j.xml ，例如**C:\log4j\log4j.xml*
***   *或制作 maven 和/或 netbeans 将log4j.xml*复制到现在可以找到的位置*   或任何其他好方法让我在使用 NB 调试时自动清理和构建后提供我的插件*log4j.xml ？***

 *** * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T01:58:33.347

您可以使用[Maven Ant 插件](http://maven.apache.org/plugins/maven-antrun-plugin/)来运行执行复制的 Ant 脚本，或者使用[Maven 资源插件](http://maven.apache.org/plugins/maven-resources-plugin/)，这似乎针对您将内容复制到输出目录的确切用例。

另请注意，您可以按照[此处](https://stackoverflow.com/questions/9471460/setting-maven-params-in-jenkins)所述参数化您的构建（忽略该标题的 Jenkins 部分，答案与一般 Maven 用法有关）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T10:10:05.937

您可以在配置文件中使用[此插件](http://evgeny-goldin.com/wiki/Copy-maven-plugin)：

```
<pluginRepositories>
  <pluginRepository>
    <id>evgenyg</id>
    <name>Evgeny Goldin repo</name>
    <url>http://evgenyg.artifactoryonline.com/evgenyg/repo/com/github/goldin/</url>
  </pluginRepository>
</pluginRepositories>

<profiles>
  <profile>
    <id>copy</id>
    <build>
      <plugins>
        <plugin>
          <groupId>com.github.goldin</groupId>
          <artifactId>copy-maven-plugin</artifactId>
          <version>0.2.5</version>
          <executions>
            <execution>
              <id>create-archive</id>
              <phase>generate-resources</phase>
              <goals>
                <goal>copy</goal>
              </goals>
              <configuration>
                <resources>
                  <resource>
                    <targetPath>${project.build.outputDirectory}/work/webapp/WEB-INF/classes/</targetPath>
                    <directory>${project.basedir}/src/main/resources</directory>
                    <includes>
                      <include>log4j.xml</include>
                    </includes>
                  </resource>
                </resources>
              </configuration>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </build>
  </profile>
</profiles> 
```

激活：`mvn -Pcopy generate-resources`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T18:56:59.480

您可以使用**复制工件**插件。就像在哈德逊一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T13:11:10.817

`hpi:run`这就是我如何让 maven 在执行目标之前将 .class 和 .jar 文件复制到新位置。在实例化 log4j 之前，`log4j.xml`它仍然被复制到我的 Java 代码中。`static{}`为了使用这个配置文件，我`-P netbeans`在 Netbeans 中添加了 maven 命令行参数：

配置文件和插件定义`pom.xml`：

```
<profiles>
    <profile>
        <id>netbeans</id>
        <build>
            <plugins>                
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <id>copy</id>
                            <phase>compile</phase>
                            <configuration>
                                <target>
                                    <ant antfile="${basedir}/log4j/ant.xml">
                                        <target name="log4jcopy"/>
                                    </ant>
                                </target>
                            </configuration>
                            <goals>
                                <goal>run</goal> <!-- means antrun:run -->
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

为 ant 构建 XML `log4j/ant.xml`，：

```
<project default="log4jcopy">
    <target name="log4jcopy">
        <echo message="Copying class files so that log4j finds them at runtime."/>
        <copy verbose="true"
              todir="target/work/webapp/WEB-INF/lib">
            <fileset
                dir="log4j"
                includes="mysql-connector-java-5.1.6.jar" />
        </copy>
        <copy verbose="true"
              todir="target/work/webapp/WEB-INF/classes/hyde/jenkins/myplugin">
            <fileset
                dir="target/classes/hyde/jenkins/plugins/myplugin"
                includes="LogAppender*.class" />
        </copy>
    </target>
</project> 
```**

# java - 运行不存在的 jar 不会导致任何预期/错误

> ID：13799574
> 
> 赞同：1
> 
> 时间：2012-12-10T10:57:39.263
> 
> 标签：java, exception, process, jar, runtime.exec

请考虑以下从 Eclipse 运行的代码段。

即使外部 jar 文件不存在，也不会抛出异常并且`process`不为空。**为什么会这样？**

```
try {
    Process process = Runtime.getRuntime().exec("java -jar NonExisting.jar");

    if (process == null)
            System.out.println("process = null");
    else
        System.out.println(process);
     } catch (IOException e) {
         System.err.println(e);
} 
```

它打印

```
java.lang.ProcessImpl@1a4d139 
```

如果我从命令行手动运行它，则会出现错误：

```
C:\Users\workspace\Project\src>java -jar NonExisting.jar
Error: Unable to access jarfile NonExisting.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:02:23.767

[Process.waitFor()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#waitFor%28%29)为您提供生成进程的退出代码，并且可能返回非零（即错误）值。您应该检查此值，并同时收集`stdout`/ `err`（有关更多信息，请参见[此处](https://stackoverflow.com/questions/882772/capturing-stdout-when-calling-runtime-exec)）。`stderr`很可能会报错。

您当前所做的只是确认该过程已被调用。然后该进程尝试/失败加载 jar 文件，此时它存在并报告错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:01:07.777

该过程已创建并完成。您应该检查对象的返回值`Process`。如果新进程的创建有问题会抛出异常，所以这里不会出现异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T11:01:27.700

哇，这很丑:-) 你为什么不在新线程中启动 jar 的主要方法？那么你应该检查进程的退出状态：

[http://en.wikipedia.org/wiki/Exit_status](http://en.wikipedia.org/wiki/Exit_status)

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.htm](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.htm)

您基本上是在分叉该进程，因此您无法从中获取异常或任何特定于 java 的内容，您需要处理新进程，就像任何其他特定于操作系统的应用程序一样。

# php - cakephp 在屏幕上打印函数结果

> ID：13799583
> 
> 赞同：1
> 
> 时间：2012-12-10T10:58:31.300
> 
> 标签：php, cakephp

我在 cakebook 上阅读，但仍然不明白。我在向数据库添加数据时遇到问题，所以我想检查我的基本添加功能的结果：

```
public function add() {
    if ($this->request->is('post')) {
        $this->Ficha->create();
        if ($this->Ficha->save($this->request->data)) {
            $this->Session->setFlash('Your post has been saved.');
            //$last_id=$this->Ficha->getLastInsertID();
            $this->redirect(array('action' => 'preencher_ficha'),$last_id);
        } else {
            $this->Session->setFlash('Unable to add your post.');
        }
        print_r($this->Ficha->save);
    }
} 
```

添加.ctp 文件

```
<?php
echo $this->Form->create('Ficha', array('action' => 'index'));
echo $this->Form->input('cod_produto', array('label' => 'Código Produto:'));
echo $this->Form->input('nome_produto', array('label' => 'Nome Produto:'));
echo $this->Form->input('versao', array('label' => 'Versão:'));
echo $this->Form->input('data_ficha', array('label' => 'Data:'));
//echo $this->Form->input('body', array('rows' => '3'));
echo $this->Form->end('Criar Ficha');
?> 
```

为此，我想使用 $debug 或 $print_r 以便在提交表单后 cakephp 会告诉我问题出在哪里，但我没有正确使用它，或者可能在错误的“部分”中。谁能告诉我应该使用哪个 var 来打印以及在输出的 var 的 () 之间应该有什么来打印屏幕上的 add 函数的结果？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:07:53.733

你可以在这里做一些调试：

```
public function add() {
    pr($this->request->data); // to get the data from the form
    die; // if you don't want it to continue to your save function
    if ($this->request->is('post')) {
        $this->Ficha->create();
        if ($this->Ficha->save($this->request->data)) {
            $this->Session->setFlash('Your post has been saved.');
            //$last_id=$this->Ficha->getLastInsertID();
            $this->redirect(array('action' => 'preencher_ficha'),$last_id);
        } else {
            $this->Session->setFlash('Unable to add your post.');
        }
    }
} 
```

或者：

```
public function add() {
    if ($this->request->is('post')) {
        $this->Ficha->create();

        pr($this->Ficha->save($this->request->data)); // to print the result of the save
    }
} 
```

# sql - 如何在 postgresql“json”数据类型中存储日期以用于 plv8？

> ID：13799584
> 
> 赞同：3
> 
> 时间：2012-12-10T10:58:35.423
> 
> 标签：sql, json, postgresql, datetime

我想使用[Date.UTC](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC)在 postgresql 9.2“json”字段中存储日期和日期时间，但当然它失败了：

```
hp=> update formapp_record set data='{"dt": Date.UTC(120, 10, 2)}' where id=17;
ERROR:  invalid input syntax for type json
LINE 1: update formapp_record set data='{"dt": Date.UTC(120, 10, 2)}...
                                       ^
DETAIL:  Token "Date" is invalid.
CONTEXT:  JSON data, line 1: {"dt": Date... 
```

可以直接存储 UTC 时间戳，但是解码器如何知道该值应该解码为 date 或 datetime 而不是 int ？

也可以将 Date.UTC 调用存储为字符串，如下所示：

```
update formapp_record set data='{"dt": "Date.UTC(120, 10, 2)"}' where id=17; 
```

虽然这有效，但它需要 0\. 检查字符串是否以 Date.UTC 开头和 1\. 在 plv8 中使用 eval

一种解决方案是存储一些元数据，例如：

```
update formapp_record set data='{"dt": {"_type": "date", "_value": [120, 10, 2]}}' where id=17; 
```

但这不是很“标准”，甚至是“hackish”。

你对这件事怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:54:31.117

唉，[json 对 dates 一无所知](https://stackoverflow.com/q/10286204/398670)。

我会将 ISO 8601 日期存储为字符串。是的，这是一种痛苦。是的，这意味着没有很好的标准方式来区分“这是一个日期”与“这是一个字符串”。不过，IMO 比大多数其他选项更痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:57:33.057

一个可能的解决方案是使用 Postgres 的`row_to_json`函数并将您的日期存储为时间戳并根据需要将它们提取到 json 中。但是，Tobe Hede[为 Postgres 编写了一些 json 函数，](https://github.com/tobyhede/postsql)这些函数 可能会有所帮助，并且似乎比 Postgres 为 9.2 提供的 2 个本机选项更完整

请参阅帖子[如何使用新 PostgreSQL JSON 数据类型中的字段进行查询？](https://stackoverflow.com/questions/10560394/how-do-i-query-using-fields-inside-the-new-postgresql-json-datatype)为线程。

# python - 在 OpenCV Python 中打开 DivX/XVID 视频

> ID：13799586
> 
> 赞同：1
> 
> 时间：2012-12-10T10:58:39.207
> 
> 标签：python, opencv, ffmpeg, codec

我开始在一台新计算机上工作，并尝试将所有内容设置为以前在旧计算机上的状态。不幸的是，切换到 64 位 Windows 让一切变得非常困难。

使用当前设置，我只能打开使用 memcoder 转换的原始 I420 视频，但我无法打开以前在旧 PC 上使用的 DivX/XVID 视频。我尝试了 ffdshow 和 K-Lite 编解码器包。在 gspot 中打开视频显示确实安装了编解码器。

我在整个互联网上搜索了解决方案，但我找不到解决方案。我尝试将 ffmpeg dll 复制到 Python27 文件夹中。

环境为64位Windows 7 Pro

**编辑：**

我尝试使用 OpenCV 保存视频：

我将 -1 传递给 cv2.VideoWriter 函数以获取编解码器选择对话框。该对话框不显示 ffdshow 编解码器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:23:35.370

我终于解决了这个问题。

Windows7 x64 + Python 2.7 x86 + NumPy x86 + ffdshow x86 + Eclipse x64 是要走的路。一切都像魅力一样运作。不过，其他程序（如 VirtualDub）也需要 x64 ffdshow。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T06:59:35.080

问题通常是未安装 FFDshow 编解码器。从[http://www.free-codecs.com/ffdshow_download.htm](http://www.free-codecs.com/ffdshow_download.htm)下载它会解决一个问题

# knockout.js - 如何仅在验证后更新 ViewModel

> ID：13799588
> 
> 赞同：0
> 
> 时间：2012-12-10T10:58:41.380
> 
> 标签：knockout.js, knockout-2.0

我正在尝试使用用于编辑用户详细信息的对话框来构建用户网格功能。这是我的 HTML：

```
<!DOCTYPE html>
<html>
<head>
 <script src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-   2.1.0.js"></script>
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel ="stylesheet" type="text/css" />
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
 <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js">  </script>
 <meta charset=utf-8 />
 <title>JS Bin</title>
</head>
<body>
users:<hr/>
  <div data-bind="foreach:users">
  <div><span data-bind="text:firstname"></span>&nbsp;<a href="#" data- bind="click:EditUser">edit</a></div><hr>
   </div>

   <div id="dialog" style="display:none" data-bind="with:selectedUser">
      <input type="text" data-bind="value:firstname" name="firstname"/>
     <button data-bind="click:validate">save</button>
 </div>
 </body>
 </html> 
```

这是我的 JS：

```
var userVM=function(nm){
  this.firstname=ko.observable(nm); 
  this.EditUser=function(u){
     selectedUser(u);
    $("#dialog").dialog();
 }
};
var users=ko.observableArray([new userVM('Sholmo'),new userVM('Ahmed')]) ;

var selectedUser=ko.observable();
 var validate=function (){
 if($('[name="firstname"]').val()==''){

 alert('must enter name');
 //how prevent model updating?
 }
}

ko.applyBindings(); 
```

我的问题是我只想在单击“保存”按钮并通过验证**后更新用户详细信息（现在用户名在输入文本更改后立即更新）这里是 jsbin 的链接：http:** [//jsbin.com/epocov/ 1/编辑](http://jsbin.com/epocov/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:39:25.403

Knockout 挂钩到输入框上的事件，以便在焦点到达按钮之前更新视图模型。因此，你在 validate 函数中放了什么并不重要——为时已晚！但你可能已经想通了...

我建议查看 Knockout 的第三方插件之一，它可以帮助您进行验证或延迟更新：

*   淘汰赛验证 - [https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)
*   延迟更新 - [https://github.com/mbest/knockout-deferred-updates](https://github.com/mbest/knockout-deferred-updates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:29:09.723

利用[writeable 计算 observable](http://knockoutjs.com/documentation/computedObservables.html#writeable_computed_observables)，并将您的验证放在 write 函数中。

例如：

```
function MyViewModel() {
    this.firstName = ko.observable('Planet');
    this.lastName = ko.observable('Earth');

    this.fullName = ko.computed({
        read: function () {
            return this.firstName() + " " + this.lastName();
        },
        write: function (value) {
            //**Validate here**
            var lastSpacePos = value.lastIndexOf(" ");
            if (lastSpacePos > 0) { // Ignore values with no space character
                this.firstName(value.substring(0, lastSpacePos)); // Update "firstName"
                this.lastName(value.substring(lastSpacePos + 1)); // Update "lastName"
            }
        },
        owner: this
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:24:04.007

感谢所有试图提供帮助的人，看来我有自己的解决方案......这对我有好处，因为通过这种方式，在单击“保存”按钮并通过验证之前，网格中已编辑的用户详细信息无法更改：这是我的解决方案：JS：

```
 ko.bindingHandlers.updateWhenValid = {

        init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
    $(element).val(ko.utils.unwrapObservable(valueAccessor()));
        },
        update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
          var value = valueAccessor();
          var valueUnwrapped = ko.utils.unwrapObservable(value);
          $('button').click(function(){
            if($(element).val()!=''){ 
               value($(element).val()); 
               $("#dialog").dialog('close');
            }
            else{ 
             value(valueUnwrapped);
            }  
          });   
        }
    };

    var userVM=function(nm){
    var self=this;  

      this.firstname= ko.observable(nm);

      this.EditUser=function(u){

        selectedUser(u);
        $("#dialog").dialog();
      };

    }; 
    var users=ko.observableArray([new userVM('Shlomo'),new userVM('Ahmed')]) ;

    var selectedUser=ko.observable();

    ko.applyBindings(); 
```

HTML：

```
 users:<hr/>
 <div data-bind="foreach:users">
   <div><span data-bind="text:firstname"></span>&nbsp;<a href="#" data-bind="click:EditUser">edit</a></div>
  <hr>
</div>

<div id="dialog" style="display:none" data-bind="with:selectedUser">

  <input type="text" data-bind="updateWhenValid:firstname" />

<button >save</button>

</div> 
```

这样，如果验证失败，原始值（在对话框打开之前）会保留在
这里，您可以看到工作演示：

[http://jsbin.com/epocov/9/edit](http://jsbin.com/epocov/9/edit)

# c++ - 如何在 map 和 unordered_map 之间进行选择？

> ID：13799593
> 
> 赞同：96
> 
> 时间：2012-12-10T10:58:50.523
> 
> 标签：c++, dictionary, data-structures, stl, unordered-map

假设我想以字符串为键映射数据。我应该选择什么容器，`map`或者`unordered_map`？`unordered_map`占用更多内存，所以让我们假设内存不是问题，关注的是速度。

`unordered_map`通常应该给出 O(1) 的平均复杂度，最坏的情况是 O(n)。在什么情况下会达到 O(n)？a`map`什么时候比 得到更多的时间效率`unordered_map`？当 n 很小时会发生这种情况吗？

假设我会将 STL`unordered_map`与默认的 haser Vs 一起使用。地图。字符串是关键。

如果我要遍历元素而不是每次都访问单个元素，我应该更喜欢`map`吗？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-12-10T11:16:33.087

```
 | map              | unordered_map
---------------------------------------------------------
element ordering       | strict weak      | n/a 
                       |                  |
common implementation  | balanced tree    | hash table
                       | or red-black tree|  
                       |                  |
search time            | log(n)           | O(1) if there are no hash collisions
                       |                  | Up to O(n) if there are hash collisions 
                       |                  | O(n) when hash is the same for any key
                       |                  |     
Insertion time         | log(n)+rebalance | Same as search
                       |                  | 
Deletion time          | log(n)+rebalance | Same as search
                       |                  | 
needs comparators      | only operator <  | only operator ==
                       |                  |
needs hash function    | no               | yes
                       |                  |
common use case        | when good hash is| In most other cases. 
                       | not possible or  | 
                       | too slow. Or when|
                       | order is required| 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-12-10T11:07:14.263

在实践中，如果内存没有问题，`unordered_map`如果您想要单个元素访问，总是更快。

最坏的情况是理论上的，并且绑定到一个包含所有元素的哈希值。这没有实际意义。`unordered_map`只要您至少有 log N 个属于同一哈希的元素，速度就会变慢。这也没有实际意义。在某些特殊情况下，您可以使用特定的哈希算法来确保更均匀的分布。对于不共享特定模式的普通字符串，随附的通用哈希函数`unordered_map`同样出色。

如果要以排序方式遍历地图（使用迭代器），则不能使用`unordered_map`. 相反，`map`不仅允许这样做，而且还可以根据键的近似值为您提供地图中的下一个元素（请参阅`lower_bound`和`upper_bound`方法）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-10T11:09:10.937

> 我应该选择什么容器，map 还是 unordered_map？unordered_map 占用更多内存，所以让我们假设内存不是问题，关注的是速度。

配置文件然后决定。`unordered_map`通常更快，但因情况而异。

> 在什么情况下会达到 O(n)？

当散列不好并且一堆元素被分配到相同的垃圾箱时。

> 什么时候地图比 unordered_map 更省时？当 n 很小时会发生这种情况吗？

可能不是，但如果你真的在乎的话，可以分析一下。让一个小尺寸的容器成为你程序的瓶颈似乎是极不可能的。无论如何，对于这种情况，简单`vector`的线性搜索可能会更快。

* * *

决定时最重要的是排序要求和迭代器失效的缺乏。如果你需要任何一个，你几乎必须使用`map`. 否则，`unordered_map`。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-10T11:07:04.730

> 在什么情况下会达到 O(n)？

如果你有一个如此**糟糕**的哈希函数，它为所有输入搅拌产生相同的哈希值（即产生冲突）......

> 我应该选择什么容器，map 还是 unordered_map？

始终是您拥有的要求和数据种类/数量的问题。

> 什么时候地图比 unordered_map 更省时？

只是结构不同而已。您最好根据您的典型用例选择使用其中一个（考虑到您拥有什么样的数据及其数量）

> 当 n 小时它会发生吗？

在小数据量的情况下，一切都取决于特定的 STL 实现......所以有时即使是普通的向量/数组也可能比关联容器更快......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-21T13:15:54.163

std::map 在内部将元素存储在平衡的 BST 中。因此，元素将按键的排序顺序存储。

std::unordered_map 使用哈希表存储元素。因此，元素不会以任何排序顺序存储。它们将以任意顺序存储。

**内存使用情况 ：**

与 map 相比，unordered_map 的内存使用量更多，因为 unordered_map 也需要空间来存储哈希表。

**搜索元素的时间复杂度：**

在 std::map 中搜索元素的时间复杂度为 O(log n)。即使在最坏的情况下，它也会是 O(log n)，因为元素在内部存储为平衡二叉搜索树 (BST)。

而在 std::unordered_map 中，搜索的最佳情况时间复杂度是 O(1)。其中，如果哈希码函数不好，那么最坏情况的复杂度可能是 O(n)

# html - 从移动网络浏览器拨打电话

> ID：13799594
> 
> 赞同：1
> 
> 时间：2012-12-10T10:58:57.997
> 
> 标签：html, mobile

我只是在想，有没有可能从移动网页链接（来自移动 Bowser）拨打手机。

```
<p>Making call from webpage.</p>
<a href='#' id='contact'>contact: 97080 18380</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T11:06:49.697

您可以使用[tel 协议](https://en.wikipedia.org/wiki/URI_scheme)：

```
<p>Making call from webpage.</p>
<a href='tel:9708018380' id='contact'>contact: 97080 18380</a> 
```

另外，请查看[mobilexweb](http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers)以获取有关此问题的一些不错的提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:05:21.777

互联网搜索告诉我：

```
<p>Making call from webpage.</p>
<a href='tel: 97080 18380' id='contact'>contact: 97080 18380</a> 
```

[http://demosthenes.info/blog/536/Adding-Phone-Numbers-To-Web-Pages-With-HTML5-&-Microdata](http://demosthenes.info/blog/536/Adding-Phone-Numbers-To-Web-Pages-With-HTML5-&-Microdata)

# xcode4.5 - 从 searchResultsTableView 开始

> ID：13799595
> 
> 赞同：1
> 
> 时间：2012-12-10T10:59:00.630
> 
> 标签：xcode4.5, segue, uisearchdisplaycontroller

我目前有一个 searchdisplaycontroller 设置和工作。原始表视图为标题和图像设置了一个segue，以传递给详细视图。我希望这种 segue 从搜索显示控制器发生，但这没有发生？我知道这是可能的，但似乎无法让它发挥作用？我的代码是：

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        [self.detailViewController setDetailItem:[[contentsList objectAtIndex:indexPath.section]
                                                  objectAtIndex: indexPath.row]];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"detailview"]) {
           self.detailViewController=segue.destinationViewController;
    }
}

@end 
```

并在详细视图中进行设置：

```
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        self.navigationItem.title = [self.detailItem objectForKey:@"name"];
        [self.detailImage setImage:[UIImage imageNamed:self.detailItem[@"image"]]];
    }
} 
```

对于解决此问题的任何帮助，我将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T19:05:17.900

您可以通过从 tableView:didSelectRowAtIndexPath: 调用 performSegueWithIdentifier:sender: 从搜索显示控制器中进行 Segue：如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     // Get the UITableViewCell that was selected
     UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

     // Then this will call prepareForSegue:sender: with selectedCell as sender
     [self performSegueWithIdentifier:@"detailview" sender:selectedCell];  
} 
```

然后在 prepareForSegue:sender: 你设置你的 destinationViewController 属性

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"detailview"]) {

       // Set your destinationViewController properties here

    }
} 
```

# node.js - 使用 node.js、express 和 mongoDB 在 CURL 中出现服务器错误的空回复

> ID：13799599
> 
> 赞同：1
> 
> 时间：2012-12-10T10:59:09.347
> 
> 标签：node.js, mongodb, curl, webserver, express

当我尝试运行“http://localhost:3000/light”时，在 CURL 中收到错误“来自服务器的空回复”

```
var express = require('express'),
    values = require('./routes/values');

var app = express();

app.get('/light', values.findAll);

app.listen(3000);
console.log('Listening on port 3000...'); 
```

我的 values.js 是

```
var mongo = require('mongodb');

var Server = mongo.Server,
    Db = mongo.Db,
    BSON = mongo.BSONPure;

var server = new Server('localhost', 27017, {auto_reconnect: true});
db = new Db('sensordb', server);

db.open(function(err, db) {
    if(!err) {
        console.log("Connected to 'sensordb' database");
        db.collection('values', {safe:true}, function(err, collection) {
            if (err) {
                console.log("The 'values' collection doesn't exist. Creating it with sample data...");
                populateDB();
            }
        });
    }
});

exports.findAll = function(req, res) {
    db.collection('values', function(err, collection) {
        collection.find().toArray(function(err, items) {
            res.send(items);
        });
    });
};

var populateDB = function() {

    var values = [
    {
        value: "10",
        date: "121212",
        time: "1214"
    },
    {
        value:  "12",
        date: "121212",
        time: "1224"
    }];

    db.collection('values', function(err, collection) {
        collection.insert(values, {safe:true}, function(err, result) {});
    });

}; 
```

基本上在上面的代码中，我创建了一个数据库，如果数据库为空，我尝试填充它。当我在终端上运行服务器代码时，我也会得到类似的东西：

```
=  Please ensure that you set the default write concern for the database by setting    =
=   one of the options                                                                 =
=                                                                                      =
=     w: (value of > -1 or the string 'majority'), where < 1 means                     =
=        no write acknowlegement                                                       =
=     journal: true/false, wait for flush to journal before acknowlegement             =
=     fsync: true/false, wait for flush to file system before acknowlegement           =
=                                                                                      =
=  For backward compatibility safe is still supported and                              =
=   allows values of [true | false | {j:true} | {w:n, wtimeout:n} | {fsync:true}]      =
=   the default value is false which means the driver receives does not                =
=   return the information of the success/error of the insert/update/remove            =
=                                                                                      =
=   ex: new Db(new Server('localhost', 27017), {safe:false})                           =
=                                                                                      =
=   http://www.mongodb.org/display/DOCS/getLastError+Command                           =
=                                                                                      =
=  The default of no acknowlegement will change in the very near future                =
=                                                                                      =
=  This message will disappear when the default safe is set on the driver Db           =
======================================================================================== 
```

上述错误是否引起了一些问题？如果是这样，是什么？如果不是，那有什么责任？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:58:22.453

似乎您的`populateDB`函数使用全局`db`变量，而打开`db`的是一个不同的变量，作为您在打开数据库时提供的回调的参数给出。这是因为您有两个称为 db 的不同变量，每个变量在不同的范围内可见并引用不同的对象。为了使图片更清晰，我在您的`populateDB`函数中添加了一个参数，并创建了`db1`回调`db2`参数。下面的修改应该会有所帮助：

```
db.open(function(err, db1) {
...
                populateDB(db1);

...
var populateDB = function(db2) {
...
    db2.collection('values', function(err, collection) {
        collection.insert(values, {safe:true}, function(err, result) {});
    });

}; 
```

# tridion - 如何使用 Web 客户端界面取消本地化 SDL Tridion 下的项目

> ID：13799600
> 
> 赞同：5
> 
> 时间：2012-12-10T10:59:09.287
> 
> 标签：tridion

我在 SDL Tridion 下本地化页面模板时出错，我想取消本地化它，但是当我右键单击它时，“取消本地化”选项不可用。我怎样才能做到这一点？还有另一种方法来取消本地化项目吗？感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T11:25:49.667

要本地化或取消本地化项目，您必须对存储项目的文件夹或结构组具有本地化权限。另请注意，它只能在项目实际本地化的出版物中完成。

因此，如果您没有看到取消本地化的选项，我会检查您的权限，或者您在父或子出版物中。该选项应该在 BluePrinting 子菜单下的上下文（右键单击）菜单中可用，或者您可以选择该项目（单击以突出显示它）并转到功能区工具栏中的“组织”选项卡。

# ant - 使用导入标签时更改 baseDir 属性

> ID：13799601
> 
> 赞同：0
> 
> 时间：2012-12-10T10:59:09.463
> 
> 标签：ant

让我首先提供我面临的问题的背景。

我的目录结构如下。

c:\myDirectory
c:\myDirectory\Project1
c:\myDirectory\Scripts

在**c:\myDirectory\Scripts**下有一个脚本，用于下载源代码（从 svn）并创建**c:\myDirectory\Project1**目录。

我有另一个 ant 脚本 ( **c:\myDirectory\Scripts**compile-source.xml** ) 从下载到**c:\myDirectory\Project1 的 ant 脚本 build.xml 编译 Project1**

c:\myDirectory\Scripts\compile-source.xml 的片段

```
<project name="compile" default="buildAll" basedir=".">
    <property file=".\build.properties">
    </property>
    .......
    <import file="${project.home.path}/${project.name}/build.xml"/>
     <target name="buildAll">
      <antcall target="jar-pack"/>
    </target>
</project> 
```

c:\myDirectory\Project1\build.xml 的片段。

```
<project name="CommonFeatures" default="jar-pack" basedir=".">
        <description>
            A build file for the Common Features project
        </description>
        ....
    </project> 
```

请注意，项目的 basedir 设置为“。” 对于上述两个蚂蚁脚本。

当我从**c:\myDirectory\Scripts目录执行脚本****c:\myDirectory\Scripts\compile-source.xml时，** **c:\myDirectory\Project1\build.xml**中的目标**“jar-pack”**会被执行。

 ******但是，问题在于 build.xml ( **basedir="."** ) 中的 basedir 属性是当前工作目录，在本例中是其**c:\myDirectory\Scripts**。因此脚本 build.xml 出错，因为 build.xml 的 basedir 应该是**c:\myDirectory\Project1**。如果 basedir="."，build.xml 脚本会起作用。被设置为**"c:\myDirectory\Project1"**，但不幸的是 build.xml 文件来自下载的源代码，我无法编辑。

所以这是我的问题，是否可以执行以下任何操作。

1.  覆盖属性 basedir="." 的值 在 build.xml 时*在 c:\myDirectory\Scripts\compile-source.xml 中完成？*

**   是否可以通过任何其他机制更改 build.xml 中的 basedir，以便在目录 c:\myDirectory\Project1 下执行脚本 c:\myDirectory\Project1\build.xml ？

    *   还有其他方法可以解决这个问题吗？* 

 *非常感谢 Ant 专家为解决此问题提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T11:32:25.473

对于您的情况，`subant`或`ant`任务的使用可能更适合，但尽管如此......

您**可以（但您应该知道/考虑副作用！）使用常见的****[ant-contrib](http://sourceforge.net/projects/ant-contrib/files/ant-contrib/1.0b3/)任务定义**扩展 ant并使用能够**覆盖**属性的**[`var`任务。](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)**确保使用最新版本 ( )。**`> 1.0b3`**

 **```
<!-- adjust to your path and include it somewhere at the beginning of your project file -->
<taskdef resource="net/sf/antcontrib/antlib.xml" classpath="lib/ant-contrib-1.0b3.jar" />

<!-- works e.g. for basedir = /foo/bar to update it to /foo/bar/.. ~ /foo -->
<var name="basedir" value="${basedir}/.." /> 
```

更新：但必须小心，因为这**不会改变`.`（当前工作目录）**（因此`<property name="x" location="tmp" />`将`.`与`basedir`不再相关；更新：`basedir`在 ant 或 via 之外设置`<project basedir=`也设置`.`为`basedir`！）。这是一些测试目标，证明了对两者的影响：

```
<target name="tst.dummy.basedir-override">
    <!-- example output:
        tst.dummy.basedir-override:
             [echo] basedir before: basedir=D:\tst,  '.'=D:\tst\.
             [echo] updating it via 'var' to '..'
             [echo] basedir now:  basedir=D:\tst/..,  '.'=D:\tst\.
    -->
    <property name="cur" location="." /> <!-- makes the relative path absolute -->
    <echo message="basedir before: basedir=${basedir},  '.'=${cur}" />

    <echo message="updating it via 'var' to '..'" />
    <var name="basedir" value="${basedir}/.." />

    <property name="cur2" location="." /> <!-- makes the relative path absolute -->
    <echo message="basedir now:  basedir=${basedir},  '.'=${cur2}" />
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:56:51.173

您可以使用**subant**任务更新**basedir 。**检查这个[答案](https://stackoverflow.com/questions/15745829/how-to-specify-base-dir-then-we-run-ant-like-ant-f-somedir-dir-build-xml/16295389#16295389)

 **创建以下**build.xml**文件（假设它位于**Z:/any/folder**中）：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="project">
    <target name="mytarget">
        <subant target="debug">
            <property name="basedir" value="X:/any/dir/with/project"/>
            <fileset dir="Y:/any/folder/with" includes="build.xml"/>
        </subant>
    </target>
</project> 
```

你可以从**Z:/any/folder执行****ant mytarget**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:16:37.727

您可以具体引用构建文件的位置，在[此堆栈溢出线程](https://stackoverflow.com/questions/1676939/referencing-ant-script-location-from-within-ant-file)中对此进行了描述。这将允许您获取和使用构建文件所在的目录作为参考点。*************

# python - gunicorn 需要很长时间才能复制上传的文件

> ID：13799602
> 
> 赞同：2
> 
> 时间：2012-12-10T10:59:12.670
> 
> 标签：python, django, gunicorn

我尝试使用 nginx + gunicorn 部署 django 应用程序。

## 我的问题

gunicorn 花费大量时间/proc/mem 将上传的文件复制到本地文件系统中。

*   时间：35秒复制一个150Mb的文件
*   中央处理器：> 95%
*   内存：50Mb

## 配置：

*   nginx 被配置为使用[uploadprogress](http://wiki.nginx.org/HttpUploadProgressModule)模块并且进度条工作正常。
*   gunicorn 与套接字文件绑定（尝试使用 tcp 套接字不会改变任何内容）
*   django 1.4：不要在这个文件（FileField）上做任何事情，而是在本地 FS 上复制

## 我尝试了什么：

在 8050 端口单独运行 gunicorn

*   => 没有进度条（当然既然是 nginx 怎么给这个）
*   => gunciron 需要相同的时间/mem/proc
*   => 传输比使用 nginx 需要更长的时间，但完成速度更快：
    *   nginx + gunicorn：传输：4 秒，响应生成：30 秒
    *   gunicorn：传输：30 秒，响应生成：4 秒/
*   => 如果在 POST 中将文件放到一个不需要 POST 的视图中，则需要的时间会少一点，但 > 25 秒

当我要求他将文件传输到 django 应用程序时，gunicorn 似乎很弱。

## gunicorn cmd 行（无配置文件）

gunicorn_django --user=www-data --group=www-data --workers=2 --bind 192.9.201.3:8050 -t 90 --name=TheName.domain.ltd

# android - 如何在android中的tabactivity中检测对已选择选项卡的点击

> ID：13799604
> 
> 赞同：1
> 
> 时间：2012-12-10T10:59:16.327
> 
> 标签：android, tabactivity, activitygroup

在我的一个应用程序中，我在 {{tabactivity}} 和 {{activitygroup}} 的帮助下使用了一个标签栏来在每个屏幕上显示标签栏。

我想检测已经选择的选项卡上的第二次单击并实现类似于 iPhone UITabbar 的功能。在第二次单击时，它将进入初始活动。

```
public class Tabmanagement extends TabActivity{

public static Button back;
public static TextView text;
public static Button next;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.tabmanagement);

    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    Resources res = getResources();
    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.windowstitle);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

    back=(Button)findViewById(R.id.Btn_Back);
    text = (TextView) findViewById(R.id.Text_Title);
    next=(Button)findViewById(R.id.Btn_Search);  

    spec = tabHost  .newTabSpec("tab1")
    .setIndicator("Topics",res.getDrawable(R.drawable.topics))
    .setContent(new Intent(this,FirstGroup.class)
    .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    tabHost.addTab(spec);

    spec = tabHost  .newTabSpec("tab2")
    .setIndicator("Posts",res.getDrawable(R.drawable.post))
    .setContent(new Intent(this,SecondGroup.class)
    .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, ThirdGroup.class);

    spec = tabHost  .newTabSpec("tab3")
                    .setIndicator("Response",res.getDrawable(R.drawable.response))
                    .setContent(intent);

    tabHost.addTab(spec);

    intent = new Intent().setClass(this, FourthGroup.class);

    spec = tabHost  .newTabSpec("tab4")
                    .setIndicator("Settings",res.getDrawable(R.drawable.settings))
                    .setContent(intent);

    tabHost.addTab(spec);
    tabHost.setCurrentTab(0);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-01T21:04:57.633

我想这就是你要找的。基本上从 TabHost 中获取 TabWidget 并在视图上设置适当的侦听器。

[如何检测对已选择的选项卡按钮的点击](https://stackoverflow.com/questions/9372851/how-to-detecting-a-click-on-an-already-selected-tab-button?lq=1)

# php - 获取 HTML 以将内容发送到 PHP

> ID：13799612
> 
> 赞同：0
> 
> 时间：2012-12-10T10:59:35.530
> 
> 标签：php, javascript, html

好的，所以我很困惑和迷失，不知道我在做什么，基本上这是我的代码：

**HTML/JavaScript**：

```
<img src="Images/Question1.png" usemap="#mainMap" id="main"/>
 <map name="mainMap" id="mainMap">
  <area shape="rect" coords="82,192,196,242" onclick="incorrectAnswer()" />
 </map
        function incorrectAnswer() {
        document.getElementById("incorrectVid").style.display="block";
        document.getElementById("incorrectVid").play();
        document.getElementById("answer_id").value=id;
        document.forms["answer_send"].submit();
    }

<form id="answer_send" name="answer_send" action="answersend.php" method="POST">
    <input type="hidden" id="answer_id" name="answer_id" value="10"/>
    <input type="submit" value="Submit" />
</form> 
```

**PHP**：

```
$id=$_POST['answer_id'];
echo $id 
```

我不知道为什么这不起作用任何想法/帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:06:32.433

要获取通过 G​​ET/POST 提交的值，您需要将**name**属性分配给输入字段。试试下面的：

**HTML 和 JS**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <script>
            function incorrectAnswer() {
                document.forms["answer_send"].submit();
            }
        </script>
    </head>
    <body>
        <img src="none.jpg" alt="placeholder" width="200" height="200" onClick="incorrectAnswer();">
        <form id="answer_send" name="answer_send" action="form.php" method="POST">
            <input type="hidden" id="answer_id" name="answer_id" value="10"/>
        </form>
    </body>
</html> 
```

**PHP的**

```
<?php
    $id=$_POST['answer_id'];
    echo $id;
?> 
```

注意：除非您将其分配给某些东西，否则您的 AREA 元素将不起作用。您的 JavaScript 函数必须在标签内，否则您会收到错误消息。其中的 HTML/PHP 部分工作正常...由于以下三行，您遇到了这些问题...

```
document.getElementById("incorrectVid").style.display="block";
document.getElementById("incorrectVid").play();
document.getElementById("answer_id").value=id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:09:45.087

你的名字属性在哪里？

每个输入都必须有一个 name 属性才能在 php 上检索它，并且您的 html 代码必须如下所示：

```
<form id="answer_send" name="answer_send" action="answersend.php" method="POST">
<input type="hidden" id="answer_id" name="answer_id" value="10"/> </form> 
```

# php - 镜像网站时仅复制更改的文件

> ID：13799616
> 
> 赞同：3
> 
> 时间：2012-12-10T10:59:50.443
> 
> 标签：php, javascript, web-applications, curl, wget

我正在使用 wget 使用此代码镜像网站

```
$ wget \
     --recursive \
     --no-clobber \
     --page-requisites \
     --html-extension \
     --convert-links \
     --restrict-file-names=windows \
     --domains website.org \
     --no-parent \
         www.website.org/tutorials/html/ 
```

下次我运行它时，它会再次开始下载相同的文件，但是我希望下次只下载更改过的文件。除了使用 wget，我愿意使用任何其他工具或脚本（最好是 PHP、Curl）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:02:15.720

这是为 rsync 量身定做的工作。见[man rsync](http://ss64.com/bash/rsync.html)

您可以使用：

```
rsync -avz <source> <destination> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T15:05:23.163

尝试使用`--timestamping`增量下载选项。另请参阅[wget 手册](http://www.gnu.org/software/wget/manual/wget.html#Time_002dStamping)以获取更多信息。

# hibernate - Hibernate 与 DB 表约束

> ID：13799618
> 
> 赞同：0
> 
> 时间：2012-12-10T10:59:54.267
> 
> 标签：hibernate, jakarta-ee

美好时光。

比如说，有两个数据库表：**FOLDERS**和**FOLDER_TYPES**。

```
CREATE TABLE FOLDERS (  
  ID               VARCHAR2(50 BYTE)   NOT NULL, 
  NAME             VARCHAR2(4000 BYTE) NOT NULL, 
  DESCRIPTION      VARCHAR2(4000 BYTE), 
  FOLDER_TYPE_ID   VARCHAR2(50 BYTE) NOT NULL, 
  PARENT_FOLDER_ID VARCHAR2(50 BYTE) 
)

CREATE TABLE FOLDER_TYPES ( 
  ID          VARCHAR2(50 BYTE) NOT NULL, 
  NAME        VARCHAR2(50 BYTE) NOT NULL, 
  DESCRIPTION VARCHAR2(4000 CHAR)
) 
```

如您所见， FOLDER表中的 FOLDER_TYPE_ID 列上**有一个****NOT NULL****约束**。

 ****这些表的 Hibernate 实体如下：

```
@Entity
@Table(name = "folders")
public class Folder implements Serializable {
   private static final long serialVersionUID = 1856858081142422000L;

   @Id
   @GeneratedValue(generator = "uuid")
   @GenericGenerator(name = "uuid", strategy = "uuid2")
   @Column(name = "[ID]")
   private String id;

   @Column(name = "[NAME]")
   private String name;

   @Column(name = "[DESCRIPTION]")
   private String description;

   @ManyToOne
   @JoinColumn(name = "folder_type_id")
   private FolderType type;

   ... 
```

和

```
@Entity
@Table(name = "folder_types")
public class FolderType implements Serializable{
   private static final long serialVersionUID = -7992732910184226857L;

    @Id
    @GeneratedValue(generator = "uuid")
    @GenericGenerator(name = "uuid", strategy = "uuid2")
    @Column(name = "[ID]")
    private String id;

    @Column(name = "[NAME]")
    private String name;

    @Column(name = "[DESCRIPTION]")
    private String description; 
```

**问题是：**当我删除一个 Folder 对象时，在从 DB 中实际删除之前，Hibernate 尝试为引用（文件夹类型）设置一个空值，但存在约束，因此引发了异常。作为一种解决方法，我可以删除约束，但是如果需要它并且我不能更改表（**FOLDERS**）怎么办？

有没有办法说 Hibernate 不将实体更新为空引用？我尝试在文件夹实体中设置`updatable = false`为`@JoinColumn`（FolderType 类型），但没有运气......****

# knockout.js - 将动态变量传递给绑定数据

> ID：13799622
> 
> 赞同：1
> 
> 时间：2012-12-10T11:00:06.340
> 
> 标签：knockout.js

使用 knockout.js 时，我遇到了嵌套 foreach 的问题。下面是说明

```
MyViewModel(){
   filteredRecords();
   columns();
}

RecordModel(){
   A,
   B,
   C
}

ColumnModel{
   Visible,
   ColumnName
} 
```

要求是，如果 column.Visible == 1，让在 ReportModel 中显示相应的 ColumnName。在 data-bind="value:records.column.Column_Name() 中，我尝试获取正确的路径但还没有成功，请给我一些建议，非常感谢。

* * *

```
<div>
<!-- ko foreach: {data: filteredRecords(), as: 'records'}  -->
   <ul class="tableBody">
      <li class="firstLevel">
          <ul>
              <li class="col col01"># : <span data-bind="text: records.ID"></span></li>                            
                 <!-- ko foreach: {data: $parent.columns(), as: 'column'} -->
                     <!-- ko if: column.Visible() == 1 -->

                          <li class="col col0"><input class="input0" **data-bind="value: records.column.Column_Name()"** /></li>  

                  <!-- /ko -->
                 <!-- /ko -->              
           </ul>
       </li>
    </ul>
<!-- /ko --> 
</div>     enter code here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:43:26.140

```
<ul data-bind="foreach: { data: filteredRecords, as: 'record' }">
    <li><strong>#</strong> : <span data-bind="text: ID"></span>
        <ul data-bind="foreach: { data: $root.columns, as: 'column' }">
            <!-- ko if: column.Visible -->
            <li>
                <strong data-bind="text: column.ColumnName"></strong>:
                <span data-bind="text: record[column.ColumnName()]"></span>
            </li>
            <!-- /ko -->
        </ul>
    </li>
</ul>​ 
```

如果您愿意，可以将内部换成`<ul>`a `<!-- ko -->`。

[http://jsfiddle.net/MizardX/K7Lzs/](http://jsfiddle.net/MizardX/K7Lzs/)

# android - android:largeHeap="true" 不工作

> ID：13799623
> 
> 赞同：1
> 
> 时间：2012-12-10T11:00:11.520
> 
> 标签：android, resources, android-largeheap

> **可能重复：**
> [largeHeap=true 清单标签不起作用？](https://stackoverflow.com/questions/6075276/largeheap-true-manifest-tag-not-working)

我放入`android:largeHeap="true"`清单文件的应用程序标签并将 minSdk 版本设置为`android:minSdkVersion="12"`，`android:targetSdkVersion="15"` 但它不起作用，我收到错误消息`"error: no resource identifier found for attribute 'large heap' in package 'android'`

我如何让它工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T11:07:46.077

尝试将 android:largeHeap="true" 放在清单文件的应用程序标记中。还要检查您的项目属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T11:14:24.773

请检查[这个](https://stackoverflow.com/questions/6075276/largeheap-true-manifest-tag-not-working)

还通过largeHeap 属性的[文档](http://developer.android.com/guide/topics/manifest/application-element.html#largeHeap)。它明确指出*它仅适用于加载到进程中的第一个应用程序*，*如果您使用共享用户 ID 来允许多个应用程序使用一个进程，则它们都必须一致地使用此选项，否则它们将产生不可预测的结果。*

# maven - Maven 发布插件在 svn 中创建递归目录

> ID：13799624
> 
> 赞同：1
> 
> 时间：2012-12-10T11:00:14.780
> 
> 标签：maven, jenkins, maven-3, jenkins-plugins, maven-release-plugin

我正在使用 maven-release-plugin 2.3.2 并且能够`prepare and perform release`. 问题是这样的。

**SVN 回购：** `http://svnserver:8080/myrepo/test/projectA`

```
Project A         
   |
    branches/
    tags/
    trunk/ 
```

当我`mvn release:perform`第一次这样做时，它会在 tags/ 文件夹中创建这个结构

```
branches/
tags/
   |
    ProjectA_1.0.0
        | 
        branches/ <structure from the parent branches/ folder>
        tags/
        trunk/ 
```

当我`mvn release:perform`第二次做时，这是输出

```
branches/
tags/
   |
    ProjectA_1.0.0
        | 
        branches/<structure from the parent branches/ folder>
        tags/
        trunk/
    ProjectA_1.0.1
        | 
        branches/<structure from the parent branches/ folder>
        tags/ProjectA_1.0.0/branches/<structure from the parent branches/ folder>
        tags/ProjectA_1.0.0/tags/
        tags/ProjectA_1.0.0/trunk
        trunk/ 
```

依此类推...整个 1.0.1 将被复制到 1.0.2 中，直到我有一个递归的噩梦 :)

虽然如果我`<releases>`在 Nexus 中访问我的存储库，一切都很好，我会看到干净的目录，例如

```
1.0.0
1.0.1
1.0.2 
```

里面有正确的工件。

* * *

我已经直接在命令行上使用插件和 Jenkins 使用 M2 发布插件对此进行了测试。结果相同。这指向了某个地方错误配置的方向，而不是我如何或从哪里调用它。

* * *

我对插件或`scm`标签做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:05:13.587

您必须定义要发布的项目的主干并将其配置到 pom.xml 的 scm 区域中：

这意味着定义：

```
<scm>
  <connection>scm:svn:http://svnserver:8080/myrepo/test/projectA/trunk</connection>
  <developerConnection>scm:svn:http://svnserver:8080/myrepo/test/projectA/trunk</developerConnection>
</scm> 
```

如果您有一个多模块构建，则必须仅在父级而不是子级中定义它。

# html - 将网页缩放到不同屏幕尺寸的最有效方法

> ID：13799625
> 
> 赞同：-2
> 
> 时间：2012-12-10T11:00:15.220
> 
> 标签：html, css, layout

目前，我有一个站点，其中许多 div 设置为特定大小，以保持布局正确。

唯一的问题是，在某些显示器上，页脚总是不在底部，您必须滚动到它。

我注意到其他网站无论屏幕分辨率如何，页脚都会自动缩放到屏幕底部。

除了遍历我的所有 div 并为所有高度使用 % 之外，有没有办法将页脚标签设置为始终位于屏幕底部？

我的基本网站是[jj-triggs.com](http://www.jj-triggs.com)，它有一个页脚，如果在宽屏显示器或更小的分辨率上，将页脚推离底部，你必须滚动到它，

可以通过更改 div 的大小来修复，但是有很多需要更改的地方。必须有一个更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T11:10:37.950

如果不使用 % ，它将无法正确适应所有屏幕。

你可以试试[bootsrap](http://twitter.github.com/bootstrap/)我用它来适应所有的屏幕。

然后修复页脚。

之前创建一个空 div 并将其样式设置为 clear:both 或者您可以尝试 Position:fixed; 底部：0；但是，无论页面大小如何，这将始终使页脚保持在屏幕上

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:05:40.090

您是否正在寻找将页脚固定在底部的方法？如果是这样，您可以使用 CSS 做到这一点：

```
position: fixed;
bottom: 0; 
```

# php - 为什么在此代码中通过引用传递速度较慢？

> ID：13799627
> 
> 赞同：7
> 
> 时间：2012-12-10T11:00:21.893
> 
> 标签：php

我遇到了一些看起来很奇怪的性能问题。运行此代码：

```
<?php

function test_ref(&$test)
{
    for ($i = 0; $i < 100000; $i++)
    {
        $foo = "s" . rand(1, 1000);
        if (!array_key_exists($foo, $test))
        {
            $test[$foo] = array();
        }
        $test[$foo][] = rand(1, 10);
    }
}

function test()
{
    $test = array();
    for ($i = 0; $i < 100000; $i++)
    {
        $foo = "s" . rand(1, 1000);
        if (!array_key_exists($foo, $test))
        {
            $test[$foo] = array();
        }
        $test[$foo][] = rand(1, 10);
    }

    return $test;
}

$scriptstart = microtime(true);
$test = array();
test_ref($test);
$sum = 0;

foreach ($test as $key => $val)
{
    foreach ($val as $val2)
    {
        $sum += $val2;
    }
}

echo "sum " . $sum . "<br>";
$scriptelapsed = microtime(true) - $scriptstart;
echo "time taken " . $scriptelapsed . "<br>";

$scriptstart = microtime(true);
$test = test();
$sum = 0;

foreach ($test as $key => $val)
{
    foreach ($val as $val2)
    {
        $sum += $val2;
    }
}

echo "sum " . $sum . "<br>";
$scriptelapsed = microtime(true) - $scriptstart;
echo "time taken " . $scriptelapsed . "<br>";

?> 
```

我得到这些结果：

```
sum 548521
time taken 12.37544798851
sum 551236
time taken 0.29530310630798 
```

这里发生了什么？这似乎与我将子数组插入数组的事实有关，尽管我不明白为什么通过引用传递应该慢得多。

（这是在带有 Suhosin 补丁 0.9.9.1 的 PHP 版本 5.3.3-7+squeeze14 上）

（编辑：固定使用未设置的变量，仍然是相同的结果）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:13:12.793

这只是我的猜测，但我认为我们可以这样解释：

*   当不使用引用时，会创建一个局部变量（直接指向内存），循环如下：
    *   $i = 0; $foo = 499; $test[499] = 数组（）；$test[499][] = 2; 直接“提交”到内存
    *   最后，然后返回值 $test - 直接从内存指针读取
*   使用引用值时，传递的变量就像指向指针的指针（最终指向内存）
    *   在这种情况下，循环看起来像：
    *   $i = 0; $foo = 354; $test[354] = 数组（）；$test[354][] = 7; 通过指向内存指针的指针“提交”到内存

我想因此在使用引用变量时至少还需要一个步骤......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:08:54.917

您正在从另一个范围访问值 - 这总是比仅使用在函数本身中定义的值要慢。这是一篇很好的博客文章来解释它，尽管这不是它的主要主题：[PHP 内部：什么时候 foreach 复制？](http://nikic.github.com/2011/11/11/PHP-Internals-When-does-foreach-copy.html)

# sed - sed 在匹配后追加文本

> ID：13799629
> 
> 赞同：0
> 
> 时间：2012-12-10T11:00:27.900
> 
> 标签：sed, append

我正在编写一个 shell 脚本，以便能够在文件中找到匹配项后附加文本

例如，在 ~/.bash_profile 文件中的以下行

```
PATH=$PATH:$HOME/bin 
```

我们需要附加它：/usr/java/jdk1.6.0_38/bin

所以它会变成以下

```
PATH=$PATH:$HOME/bin:/usr/java/jdk1.6.0_38/bin 
```

我怎么能用 sed 做到这一点？

我首先从控制台内部尝试使用以下命令，但它给了我错误，抱怨 'sed: -e expression #1, char 13: unknown option to 's''

```
sed '/PATH/s/$/:/usr/java/jdk1.6.0_38/bin' ~/.bash_profile 
```

我上面的命令有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:06:23.567

问题是您在替换命令的替换部分中有正则表达式分隔符。`\`使用或使用不同的分隔符（在本例中为逗号）转义它们：

```
sed '/PATH/ s,$,:/usr/java/jdk1.6.0_38/bin,' ~/.bash_profile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:10:40.057

这可能对您有用（GNU sed）：

```
sed 's|PATH=$PATH:$HOME/bin|&:/usr/java/jdk1.6.0_38/bin|' ~/.bash_profile 
```

# linux - 为什么在使用 Meld 修改后 ^M 被添加到 script.r 中？

> ID：13799631
> 
> 赞同：3
> 
> 时间：2012-12-10T11:00:34.000
> 
> 标签：linux, dos, carriage-return, meld

尊敬的 Meld 和 Emacs/ESS 用户，

我做了什么：

1.  使用 Emacs/ESS 创建一个 script.r。
2.  通过从 another_script.r 中提取一些代码行来对 script.r 进行一些修改
3.  在 Emacs/ESS 中重新打开 another_script.r（或 script.r）以继续工作。

another_script.r 中所有*未*推送到 script.r 的行都以 ^M 结尾

有时情况正好相反——只有被推/拉的线以 ^M 结尾。到目前为止，我还没有完全确定哪个动作决定了 ^M 的放置位置。无论哪种方式，我最终仍然会到处都是 ^M，我想避免在使用 Meld 后得到它们！

FWIW：Dropbox 正在同步目录；在 Meld，Preferences > Encoding 选项卡中，在文本框中输入“utf8”；所有操作均在 Linux (Ubunt 12.04) 下使用 Meld v1.5.3、Emacs v23.3.1 执行

当前的解决方法是在终端中运行：`dos2unix /path/to/script.r`剥离`^M`s. 但这不应该是必要的，我希望这里有人可以告诉我如何避免这些。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:58:15.487

在我运行的终端`cat script.r | hexdump -C | head`中，在返回的输出中找到了 a `0d 0a`，这是新行的 DOS 格式（回车后`0d`紧跟换行`0a`）。我在 another_script.ri 上运行了相同的命令，但只观察到`0a`， no `0d 0a`​​，表示 Unix 格式。

为了进一步检查这是否是 ^M 行结尾的来源，script.r 已通过`dos2unix script.r`& 验证转换为 unix 格式，该格式`0d 0a`已转换为`0a`使用 hexdump -C ，如上所述。我使用 Meld 执行了合并，试图复制在我的脚本中产生 ^M 行结尾的过程。我在 Emacs/ESS 中重新打开了这两个文件，发现没有 ^M 行结尾。没有将 script.r 转换*回*dos 格式并重复上述过程以查看 ^M 行结尾是否重新出现，我相信我已经解决了我的 ^M 问题，这只是我不知道的，我的一个文件是dos格式的。我带回家的信息：在 Windows 主导的环境中，永远不要假设一个人的个人 linux 环境不包含 DOS 位。或行尾。

# heroku - 为什么更改现有应用程序的 heroku buildpack 不会运行 bin/release

> ID：13799636
> 
> 赞同：4
> 
> 时间：2012-12-10T11:00:53.487
> 
> 标签：heroku, release, slug, buildpack

我在 heroku 上有一个带有默认 buildpack (apache) 的 php 应用程序，然后决定将其更改为 php-fpm + nginx buildpack ( [https://github.com/iphoting/heroku-buildpack-php-tyler/](https://github.com/iphoting/heroku-buildpack-php-tyler/) )。

我发出了更改命令：

```
heroku config:set BUILDPACK_URL=https://github.com/iphoting/heroku-buildpack-php-tyler.git 
```

并推动：

```
git push heroku master 
```

slug 然后编译，但所有二进制文件都无法执行“找不到命令”，因为应该使用 bin/release 更新的 PATH 配置变量没有更新。

相比之下，当使用此 buildpack 从头开始​​创建应用程序时

```
heroku create -b https://github.com/iphoting/heroku-buildpack-php-tyler.git 
```

一切都按预期运行（并且 PATH 存在并更新）。

我的假设是 bin/release 在更改配置变量 BUILDPACK_URL 后未运行，因此未设置 PATH 变量。

为了使应用程序正常工作，我必须手动添加 PATH 配置变量。有没有其他人遇到过这个？这是预期的行为吗？据我了解， bin/release 应该始终在 slug 编译后运行？

编辑：将 git url 更正为正确的“.git”之一

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:17:53.957

您的假设是正确的， 的`addons`和`config_vars`属性`bin/release`仅取自应用程序首次部署时的构建包。有关更多详细信息，请参阅[https://devcenter.heroku.com/articles/buildpack-api#binrelease](https://devcenter.heroku.com/articles/buildpack-api#binrelease)。

Heroku 正在迁移到一个新系统，用于构建包以添加配置变量，这些配置变量*将*在应用程序的第一次部署之后起作用：[https ://devcenter.heroku.com/articles/labs-dot-profile-d](https://devcenter.heroku.com/articles/labs-dot-profile-d)

如果 buildpack 将 a 复制`.profile.d/buildpack_name.sh`到应用程序中，则该文件将在应用程序启动期间获取。这可用于设置诸如`PATH`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:07:57.407

您的应用程序存储库中可能有一个 Procfile。如果您有现有的 Procfile，则 bin/release 不会覆盖其内容。只需将适当的行 (5-9) 从[https://github.com/iphoting/heroku-buildpack-php-tyler/blob/master/bin/release](https://github.com/iphoting/heroku-buildpack-php-tyler/blob/master/bin/release)复制到您的 Procfile 中。

# python - Python DELETE 字符（Unicode 7F）似乎没有做任何事情。它不应该删除后续字符，还是我做错了？

> ID：13799637
> 
> 赞同：1
> 
> 时间：2012-12-10T11:00:56.247
> 
> 标签：python, unicode, unicode-string, python-unicode, unicode-escapes

我进入我的 Python shell 并对其进行了测试，结果如下：

```
>>> print u"hi\u007F there"
hi there 
```

根据我对这个字符的理解，它应该没有在那个字符串中显示空格。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:05:07.823

字符（ASCII 7F）的操作`DELETE`取决于终端；因为它是在下一个字符*之前*打印的，所以它通常什么都不做。从历史上看，[7F unicode 代码点的含义一直不清楚](http://en.wikipedia.org/wiki/Delete_character)。

`BACKSPACE`代码 08 对前*一个*字符进行操作。由于终端已经打印，因此可以正常工作：

```
>>> print u"hi \u0008there"
hithere 
```

也许你可以用它来代替？

# javascript - 在 Canvas/jQuery 中使用变量作为值

> ID：13799641
> 
> 赞同：0
> 
> 时间：2012-12-10T11:01:10.647
> 
> 标签：javascript, jquery, html, css, canvas

我的网站上有以下内容...

```
 // Move to 'start' element
    .moveTo(400, 50, {name: "one"})
    // Line to 'description' element
    .lineTo(1600, 50, {name: "two"})
    // Arc down and line to 'syntax'
    .lineTo(3200, 50, {name: "three"})
    // Continue line to 'scrollbar'
    .lineTo(3200, 50, {name: "four"}) 
```

我希望每个函数中的第一个值成为一个变量，然后相应地倍增。我试过以下没有运气，但我想知道这是否可能？

```
 var width = $(window).width();

    // Move to 'start' element
    .moveTo(width, 50, {name: "one"})
    // Line to 'description' element
    .lineTo(width * 2, 50, {name: "two"})
    // Arc down and line to 'syntax'
    .lineTo(width * 3, 50, {name: "three"})
    // Continue line to 'scrollbar'
    .lineTo(width * 4, 50, {name: "four"}) 
```

# python - 控制 Django 模板中的 for 循环

> ID：13799643
> 
> 赞同：1
> 
> 时间：2012-12-10T11:01:20.150
> 
> 标签：python, django

我不太了解 Django 或 Python，但我知道在模板中使用简单的 for 循环会出现问题。

我想做以下事情并想知道我的选择是 - 在模板中是否有一种简单的方法可以做到这一点？

```
{% for image in my_images %}  //only loop through 1-10 
```

然后：

```
{% for image in my_images %}  //only loop through 10-20 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:02:32.517

如果是一个列表[，](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#slice)`my_images`您正在寻找[过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#slice)：[`slice`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#slice)

> ```
> {{ some_list|slice:":2" }} 
> ```
> 
> 如果 some_list 是`['a', 'b', 'c']`，则输出将为`['a', 'b']`。

当然，在优化说明上，通常最好在视图级别执行此操作，不要获取比您需要的更多的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:45:04.223

如果您需要所有数据但想分块显示，您可以像这样拆分列表

```
def Chunks(l, n):
    return [l[i:i+n] for i in range(0, len(l), n)] 
```

其中 n = 任何数字，在您的情况下为 10

然后，您需要做的就是遍历模板中的分块列表。

# javascript - 使用行编辑器进行编辑时，如何在 extjs 4.1.1 中禁用行的特定单元格？

> ID：13799645
> 
> 赞同：0
> 
> 时间：2012-12-10T11:01:35.313
> 
> 标签：javascript, extjs, extjs4.1

在 extjs 4.1.1 中编辑时如何禁用行的特定单元格？我正在使用网格编辑器。我有一个网格，它有 2 列，名称和年龄。单击编辑时，我必须禁用名称字段，用户只能编辑年龄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:15:17.210

如果您只能使用行编辑器进行编辑，则不要在列上指定编辑器配置。如果您也可以添加，那么您可以尝试以下操作（我自己从未做过，但应该可以）：

```
grid.on('beforeedit', function(editor, e, eOpts) {
     // if editing.. 
     this.down('column[dataIndex=name]').setEditor(null);
     // else
     this.down('column[dataIndex=name]').setEditor(/* editor config */);
}, grid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T14:18:13.180

你可以用这个

```
grid.on('beforeedit', function(editor, e, eOpts) {
         // if editing.. 
         if(e.field == "name"){
               e.cancel = true;  
          }
    }); 
```

将 e.cancel 设置为**true** 将禁用该字段的编辑。

# c# - 如何组织 Windows Phone 代码库以同时针对 7.x 和 8 平台

> ID：13799646
> 
> 赞同：6
> 
> 时间：2012-12-10T11:01:38.777
> 
> 标签：c#, visual-studio, windows-phone-7, windows-phone-8, codebase

我接手了一个以前针对 WP 7.1 平台的**Windows Phone项目，随着最近宣布的新平台，它也应该针对 WP 8。**

我的**VS 2010 解决方案**包含多个项目（数据访问、模型、测试和 WP7 客户端应用程序），我正在徘徊如何包含对 WP8 的支持。

我必须注意，由于使用了 Toolkit 控件和其他专门针对 WP7.1 的第三方库，代码库与 WP8 不兼容。

Visual Studio 版本还有另一个问题 - WP7.1 可以与 VS 2010 一起使用，但 WP8 需要 VS 2012。**我应该将整个代码库移动到 VS 2012 吗？**

关于如何以最有意义的方式组织代码库以避免重复和可能的痛苦维护有什么好的建议吗？

我正在考虑**一种解决方案 - 多个项目**与**多个解决方案 - 可重用项目**方法。代码重复（如两个单独的文件夹/解决方案）应该是最不可能的方法（后备）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:12:46.260

最好的办法是将所有项目升级到 VS2012，以便能够支持两个 WP 版本（尽管它是 VS2012 解决方案，但您仍然可以在 VS2010 中打开 WP7 项目，因为它是落后的兼容的）。

关于组织代码库的最佳方式，在我看来，您应该创建一个支持 WP7 和 WP8 的便携式库，并在那里获取所有通用代码库（可能主要是业务逻辑，如果您使用这样的模式特别好作为 MVVM）。不要忘记控件问题，您可能应该为 WP8 设置一些不同的控件，因为屏幕尺寸不一样，您可以获得更多可用信息并使用不同的控件。如果您仍想使用相同的 XAML 代码，请在其中一个项目中只保留一个文件，并在要重复使用的另一个项目中添加相同的文件“作为链接”。

最后，您可以并且可能应该通过使用#if 指令来使用一些条件代码编译。

希望这些信息对您有所帮助，如果需要任何代码示例，请直接说出来，我会尝试收集一些东西。

# android - 布局中的 ViewFliper

> ID：13799649
> 
> 赞同：0
> 
> 时间：2012-12-10T11:01:54.780
> 
> 标签：android, viewflipper

我在 android 中做一个应用程序，但是我在 viewFliper 做的布局文件中有一个问题这里是代码

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/Quesiontext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="44dp"
        android:text="@string/Question"
        android:textSize="18sp" />

    <RadioGroup
        android:id="@+id/radioGroupOptions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Quesiontext"
        android:layout_marginTop="30dp" >

        <RadioButton
            android:id="@+id/optionOne"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="false"
            android:text="@string/option1" />

        <RadioButton
            android:id="@+id/optionTwo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/option2" />

        <RadioButton
            android:id="@+id/optionthree"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/option3" />

        <RadioButton
            android:id="@+id/optionFour"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/option4" />
    </RadioGroup>

    <TextView
        android:id="@+id/corrertView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/radioGroupOptions"
        android:layout_marginRight="48dp"
        android:text="@string/correct" />

    <Button
        android:id="@+id/btnNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/corrertView"
        android:layout_below="@+id/corrertView"
        android:layout_marginTop="42dp"
        android:text="@string/Next"
        android:textSize="16sp" />

    <Button
        android:id="@+id/Btnpervious"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/btnNext"
        android:layout_alignBottom="@+id/btnNext"
        android:layout_alignParentLeft="true"
        android:text="@string/Pervious"
        android:textSize="16sp" />

<RelativeLayout 
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ViewFlipper
            android:id="@+id/ViewFlipper01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

         <TextView
        android:id="@+id/Quesiontext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="44dp"
        android:text="@string/Question"
        android:textSize="18sp" />

    <RadioGroup
        android:id="@+id/radioGroupOptions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/Quesiontext"
        android:layout_marginTop="30dp" >

        <RadioButton
            android:id="@+id/optionOne"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="false"
            android:text="@string/option1" />

        <RadioButton
            android:id="@+id/optionTwo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/option2" />

        <RadioButton
            android:id="@+id/optionthree"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/option3" />

        <RadioButton
            android:id="@+id/optionFour"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/option4" />
    </RadioGroup>

    <TextView
        android:id="@+id/corrertView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/radioGroupOptions"
        android:layout_marginRight="48dp"
        android:text="@string/correct" />

            </ViewFlipper>
</RelativeLayout>
</RelativeLayout> 
```

我不明白我是如何将另一个按钮放入 ViewFliper 的……它的混乱和产生错误……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:10:13.193

你还没有关闭你的 ViewFlipper`</ViewFlipper>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:14:49.043

这可能是你正在寻找的，

```
android:id="@+id/layout" 
```

您在创建 id 时错过了“+”符号。

# time - Jenkins—使用“远程访问 API”获取“构建时间趋势”值

> ID：13799652
> 
> 赞同：17
> 
> 时间：2012-12-10T11:01:58.247
> 
> 标签：time, build, jenkins, remote-access, trend

有没有一种方法可以获取应用程序的所有**Jenkins-“构建时间趋势”**信息*（构建号 + 状态 [成功/失败等] + 持续时间）*；使用 Jenkins 远程访问 API？

否则，如果您可以发布有关如何使用远程访问 API 从 Jenkins 获取信息的任何文档的链接，我将不胜感激。大多数来源都包含运行作业的方式，但我找不到任何来源，这显示了如何从 jenkins 获取信息。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T19:58:22.857

您可以使用类似以下 URL 的内容：

```
http://jenkins:8080/job/MY-APPLICATION/api/json?tree=builds[number,id,timestamp,result,duration] 
```

root api 元素中还有一些文档：

```
http://jenkins:8080/job/MY-APPLICATION/api 
```

我承认没有完全理解这个`tree`参数。我找不到检索整个`builds`子树的简单示例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-07T23:43:23.530

> 我承认没有完全理解树参数。我找不到检索整个构建子树的简单示例。

您可以使用`[*]`诸如访问元素的整个子树`http://jenkins:8080/job/MY-APPLICATION/api/json?tree=builds[*]`

干杯，

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-29T14:51:52.340

要检索所有构建，请使用

```
http://jenkins:8080/job/MY-APPLICATION/api/json?tree=allBuilds[number,id,timestamp,result,duration] 
```

请注意，B 在 allBuilds 中大写

# c# - 弹出登录页面重新加载

> ID：13799654
> 
> 赞同：0
> 
> 时间：2012-12-10T11:02:03.673
> 
> 标签：c#, jquery, asp.net, fancybox

我使用fancybox弹出登录页面

```
jQuery(function () {
    jQuery(".spop").fancybox({
        'transitionIn': 'elastic',
        'transitionOut': 'elastic',
        'speedIn': 400,
        'speedOut': 200,
        'width': 320,
        'height': 315,
        'padding': 0,
        'margin': 0,
        'titleShow': false,
        'scrolling': 'no',
        'type': 'iframe',
        'overlayShow': true,
        'onClosed': function () {
            parent.location.reload(true);
        }
    }); 
```

* * *

如您所见，我使用事件'onClosed'：function () { parent.location.reload(true);

但我需要做这个活动但在某些条件下

如果用户单击关闭我需要 fancebox 不要重新加载您可以在此链接 [http://www.aqar4me.com/rent.aspx中找到此问题](http://www.aqar4me.com/rent.aspx)

* * *

![在此处输入图像描述](../Images/1d55fd1bac102c3bf6a6301de5d324eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:08:13.420

您使用以下代码

```
parent.$.fancybox.close(); 
```

而不是使用`parent.location.reload(true);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:05:02.870

您可以使用此功能而不是您当前的，

```
function reloadParentPage() {
var selfUrl = unescape(parent.window.location.pathname);
parent.location.reload(true);

parent.window.location.replace(selfUrl);

parent.window.location.href = selfUrl; 
```

}

它会帮助你。

# php - PHP MVC：如何通过文本而不是通过 URL 的 id 值显示内容

> ID：13799655
> 
> 赞同：0
> 
> 时间：2012-12-10T11:02:08.497
> 
> 标签：php, model-view-controller

我习惯于创建小型 php mvc 结构等，并依赖于传递我需要显示的项目的 id：

```
 www.asite.co.uk/controller/method/IDnumber 
```

但是我看到很多网站都使用 URL 中的页面标题。

```
 www.asite.co.uk/controller/this-is-a-title
    www.asite.co.uk/controller/i-am-another-section/this-is-a-title 
```

我的问题是它很容易通过 ID 方法获取内容，但是你会使用它来使用 text 方法来检索你需要的数据/内容。

最初我会考虑删除“-”分隔符，然后在“标题”字段中搜索结果，但不确定是否会有更好/更简单的方法。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:12:07.970

我想告诉你，url 中的文本只是页面的名称。因为我也在 MVC 中工作，所以我知道它只是一个页面名称，请求的数据在 post 方法中或存储在会话中，这些会话被转发到页面，在使用后它们被销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:17:44.327

如果您只想以不同的方式显示标题，请通过 htaccess 进行：http: [//www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:07:46.133

我在表格内容中使用了一个名为“slug”的列，并通过该列查找内容。当然，此列必须是唯一的。

# python - 在 matplotlib 内循环

> ID：13799669
> 
> 赞同：0
> 
> 时间：2012-12-10T11:03:09.573
> 
> 标签：python, loops, matplotlib

我正在尝试在一组轴上绘制多个图表。

我有一个二维数据数组，想将其分解为 111 个一维数组并绘制它们。到目前为止，这是我的代码示例：

```
from numpy import *
import matplotlib.pyplot as plt

x = linspace(1, 130, 130) # create a 1D array of 130 integers to set as the x axis
y = Te25117.data # set 2D array of data as y
plt.plot(x, y[1], x, y[2], x, y[3]) 
```

这段代码工作正常，但我看不到一种编写循环的方法，该循环将在情节本身内循环。如果我每次都明确地写一个数字 1 到 111，我只能使代码工作，这并不理想！（我需要循环的数字范围是 1 到 111。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:20:36.173

让我猜猜……长期使用 matlab 用户？如果您不创建新的，Matplotlib 会自动将线图添加到当前图。所以你的代码可以很简单：

```
from numpy import *
import matplotlib.pyplot as plt

x = linspace(1, 130, 130) # create a 1D array of 130 integers to set as the x axis
y = Te25117.data # set 2D array of data as y
L = len(y) # I assume you can infere the size of the data in this way...
#L = 111 # this is if you don't know any better
for i in range(L)
    plt.plot(x, y[i], color='mycolor',linewidth=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:20:44.863

```
import numpy as np
import matplotlib.pyplot as plt
x = np.array([1,2])
y = np.array([[1,2],[3,4]])

In [5]: x
Out[5]: array([1, 2])

In [6]: y
Out[6]: 
array([[1, 2],
       [3, 4]])

In [7]: for y_i in y:
  ....:     plt.plot(x, y_i) 
```

将这些绘制在一个图中。

# c++ - c++ cin only boolean(0,1)

> ID：13799670
> 
> 赞同：2
> 
> 时间：2012-12-10T11:03:10.383
> 
> 标签：c++, boolean

当程序要求布尔变量时，我希望实现将用户限制为仅 0 或 1。我试图这样做，但它不起作用。它仍然一直要求我输入。

```
bool ele;
do{ 
    cout << "Elektro:\t"; 
    cin >> ele; 
    if (cin && ele == 0 && ele == 1) break;
    cin.clear();
    cout << "Neveljaven vnos!" << endl;
}while(true); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T11:41:41.330

好消息是，`operator>>`默认`bool`情况下只允许`'0'`或`'1'`作为有效输入。这意味着您不需要在读取后显式检查值 - 如果流状态正常，那么您的`bool`:

```
bool ele;
if (!(cin >> ele)) {
    // error;
} 
```

当你输入类似的东西时你得到一个无限循环的原因`"cvdsavd"`是你只清除错误标志，但不要摆脱坏字符。因此，您的循环不断尝试，但永远无法获得有效输入。你需要摆脱垃圾：

```
bool ele;
while (!(std::cin >> ele)) {
    std::cout << "Neveljaven vnos!\n";
    std::cin.clear();
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
} 
```

[参考资料`ignore()`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)。您还需要包含`<limits>`模板`numeric_limits`。

LP :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:05:21.300

正如克里斯指出的那样，你想做`if (cin && (ele == 0 || ele == 1)) break;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:06:34.467

你不能这样做：

```
if (cin && ele == 0 && ele == 1) break; 
```

因为它总是错误的，因为 ele 不能在同一时间 1 或 0 ...它只能是这些数字之一。

```
if(ele == 0 || ele == 1) break; 
```

# qt - 带有 InputText 的 QML Gridview

> ID：13799676
> 
> 赞同：1
> 
> 时间：2012-12-10T11:03:28.893
> 
> 标签：qt, model-view-controller, gridview, qml

我需要每行都有一个带有 InputText 的 Listview。用例是一个购物车，其中每行的数量都可以更改。

使用下面的代码，Listview 在旁边呈现一个标签和一个文本框。

问题是，所有文本框都将具有相同的 id，因此，所有文本框值都根据最后一个文本框值更改而更改。例如：如果我为第一项输入 10，为第二项输入 12，则即使第一项的数量也会更改为 12。

onEnter*仅*用于演示。它可能是*onFocusChanged*前进：

```
 ListView {
    id:list
    model: fruitModel
    x:10
    y:10
    width: parent.width-20
    height: parent.height-20
    clip:true
    anchors.fill: parent
    delegate: Row {
        width: parent.width
        height:30
        Item
        {
        property variant myData: model
        property alias value: text.text
        Text {
            id:text
            width: parent.width
            height: 30
            text:name
        }
        InputText {
            id: inp_box
            text:qty
            width:100
            height:22
            anchors.verticalCenterOffset: 15
            anchors.horizontalCenterOffset:250
            focus: true
            onEnter: {
            editQty(inp_box.text);
            }
        }
        }
    }
    focus: true
    snapMode: ListView.SnapOneItem
    ScrollBar {
        flickable: list
        vertical: true
        hideScrollBarsWhenStopped:false
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:05:25.150

您应该扩展您的`editQty`函数以将已编辑条目的索引`fruitModel`作为附加参数。当前条目的索引在列表视图的委托中可用`index`. 你这样做的方式，`editQty`没有机会知道要更改哪个条目。

# java - 在客户端重用 Web Service 类

> ID：13799677
> 
> 赞同：0
> 
> 时间：2012-12-10T11:03:31.570
> 
> 标签：java, web-services, wsimport

基本思路：我有两台服务器。每个都有 Web 服务和数据收集 servlet。服务器 A 中的 Servlet 从服务器 B 中的 Web 服务收集数据，反之亦然。

现在我执行“wsimport”，并在 sevlet 中使用生成的类。我不喜欢它。类名相同，每次修改ws方法名或参数，都要重复wsimport等。

基本上，我有WS源代码/地址。我想从 servlet 调用远程 WS 方法。我可以这样做吗？

# javascript - 内容滑块问题

> ID：13799683
> 
> 赞同：0
> 
> 时间：2012-12-10T11:04:04.910
> 
> 标签：javascript, jquery, html, css

我是 html 和 css 的新手。我正在尝试按照以下方式自定义滑块：

[http://slidesjs.com/#overview](http://slidesjs.com/#overview)

我正在使用 - 从下载链接演示。

到目前为止，我唯一做的就是在 img、css 和 js 下添加一个名为滑块的文件夹，并在该文件夹下添加了文件。

所以 index.html 的唯一区别是：

```
<link rel="stylesheet" href="css/slider/global.css"> 
```

之前是：

```
<link rel="stylesheet" href="css/global.css">   
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"/>
<script src="js/slides.min.jquery.js"/> 
```

除了图像框架底部的分页外，一切正常。如果我将 css 的路径从“css/slider/global.css”恢复为“css/global.css”，它工作正常。我试图找到调用 *.css 文件的位置，但我无法找到问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:23:25.230

css 文件中的第 132 行引用了“分页”图像路径。如果位置已更改，则您需要更新该 css 文件。

前任。

```
 background-image:url(../img/pagination.png); 
```

根据您上面所说的，它现在可能应该是：

```
 background-image:url(../../img/slider/pagination.png); 
```

# java - java - 如何在文件路径中使用空格从java调用ghostscript

> ID：13799686
> 
> 赞同：1
> 
> 时间：2012-12-10T11:04:11.807
> 
> 标签：java, escaping, whitespace, ghostscript

最近，我发现自己必须在 linux 和 windows 环境中从 java 启动 ghostscript 命令，输入/输出文件名中有空格。该命令的示例如下：

```
gs -q -dNOPAUSE -dBATCH -sDEVICE=pnggray -r300 -sOutputFile=/home/nic/tomcat/6.0.33 with spaces/temp/Thread-11/img-%03d.png /home/nic/tomcat/6.0.33 with spaces/temp/tmpfile.tmp 
```

*鉴于 ghostscript 在路径中，gs 在 Windows 上被 gswin32 取代。*

我很快意识到我必须以某种方式转义文件名，所以我做的第一件事就是将它们括在双引号之间。这适用于 Windows，但不适用于 linux：在 linux 上，我尝试使用双引号括起来并用反斜杠转义空格，但没有成功。

为了启动我正在使用的命令`Runtime.getRuntime().exec(command);`，传递一个字符串。我发现以下问题[让 ghostscript 接收名称中带有空格的文件（例如“我的文档”中的某些内容）](https://stackoverflow.com/questions/1804646/getting-ghostscript-to-take-in-files-with-spaces-in-their-name-like-something-i)，但是：

*   我也想为 linux 扩展它；
*   我发现双引号对我有用，与那里指出的方式不同。

我想彻底理解这件事：你能帮我做这件事吗？

以下是我的尝试总结，每个 SO。

## 视窗

用双引号将文件名括起来对我有用：

```
gswin32 -q -dNOPAUSE -dBATCH -sDEVICE=pnggray -r300 -sOutputFile="C:\Program Files\tomcat 6.0.33 with spaces\temp\Thread-11\img-%03d.png" "C:\Program Files\tomcat 6.0.33 with spaces\temp\tmpfile.tmp" 
```

## Linux

试图用双引号将文件名括起来

```
gs -q -dNOPAUSE -dBATCH -sDEVICE=pnggray -r300 -sOutputFile="/home/nic/tomcat/6.0.33 with spaces/temp/Thread-11/img-%03d.png" "/home/nic/tomcat/6.0.33 with spaces/temp/tmpfile.tmp" 
```

试图用反斜杠转义空白

```
gs -q -dNOPAUSE -dBATCH -sDEVICE=pnggray -r300 -sOutputFile=/home/nic/tomcat/6.0.33\ with\ spaces/temp/Thread-11/img-%03d.png /home/nic/tomcat/6.0.33\ with\ spaces/temp/tmpfile.tmp 
```

两个一起试过

```
gs -q -dNOPAUSE -dBATCH -sDEVICE=pnggray -r300 -sOutputFile="/home/nic/tomcat/6.0.33\ with\ spaces/temp/Thread-11/img-%03d.png" "/home/nic/tomcat/6.0.33\ with\ spaces/temp/tmpfile.tmp" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:07:49.917

为什么不使用带有多个参数的[Runtime.exec(String[] args)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)？此变体旨在避免您不得不逃避此类论点。由于参数是单独提供的，因此不需要基于空间的插值，因此不会造成混淆。

# dynamics-crm-2011 - CRM 2011 支持的 JScript 与不支持的 JScript

> ID：13799687
> 
> 赞同：1
> 
> 时间：2012-12-10T11:04:21.987
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, jscript, dynamics-crm-online

我什么时候可以将 JScript 称为受支持？
如果我只使用 Xrm 和 OrganizationalData 是否*支持*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:10:58.347

我建议阅读以下内容：

*   [Microsoft Dynamics CRM 2011 和 Microsoft Dynamics CRM Online 支持的扩展](http://msdn.microsoft.com/en-us/library/gg328350.aspx)

尤其：

> 表单脚本
> 
> 支持通过自定义工具与表单中可用事件关联的 Microsoft JScript 函数。使用 Xrm.Page.data 对象中可用的文档化对象和方法执行时，支持与表单中的数据交互。使用 Xrm.Page.ui 对象中可用的文档化对象和方法执行时，支持与表单外观和行为的交互。但是，与 HTML 文档对象模型 (DOM) 的任何直接交互都可能无法升级。表单的结构和表单中使用的 HTML 元素可能会在未来的版本中发生变化。

# eclipse - Groovy 代码未突出显示

> ID：13799688
> 
> 赞同：0
> 
> 时间：2012-12-10T11:04:23.897
> 
> 标签：eclipse, ubuntu, groovy, eclipse-plugin, highlighting

我直接从 Eclipse 下载页面下载了 Eclipse - [Java EE Developers 的 Eclipse IDE](http://www.eclipse.org/downloads/?osType=linux)并解压

但是，当我打开 .groovy 文件时，它没有突出显示。我试图从[这个页面下载并运行](http://groovy.codehaus.org/Eclipse+Plugin)[Groovy 插件](http://dist.springsource.org/release/GRECLIPSE/e3.7/)

在安装过程中，eclipse 告诉我，groovy 已经安装了：

```
 Cannot complete the install because of a conflicting dependency.
 Software being installed: Groovy-Eclipse M2E integration 2.7.1.xx-20120921-2000-e37RELEASE (org.codehaus.groovy.m2eclipse.feature.group 2.7.1.xx-20120921-2000-e37RELEASE)
 Software currently installed: Eclipse IDE for Java EE Developers 1.5.1.20121004-1506 (epp.package.jee 1.5.1.20121004-1506)
 Only one of the following can be installed at once: 
 Object Teams Development Tooling Core 3.8.1.v_OTDT_r210_201206090452 (org.eclipse.jdt.core 3.8.1.v_OTDT_r210_201206090452)
 Java Development Tools Core 3.8.1.v20120531-0637 (org.eclipse.jdt.core 3.8.1.v20120531-0637)
Object Teams Development Tooling Core 3.8.2.v_OTDT_r211_201209011847 (org.eclipse.jdt.core 3.8.2.v_OTDT_r211_201209011847)
Java Development Tools Core 3.8.2.v20120814-155456 (org.eclipse.jdt.core 3.8.2.v20120814-155456)
Java Development Tools Core 3.7.3.xx-20120921-2000-e37RELEASE (org.eclipse.jdt.core 3.7.3.xx-20120921-2000-e37RELEASE)
Cannot satisfy dependency:
From: Eclipse IDE for Java EE Developers 1.5.1.20121004-1506 (epp.package.jee 1.5.1.20121004-1506)
To: org.eclipse.epp.package.jee.feature.feature.group [1.5.1.20121004-1506]
Cannot satisfy dependency:
From: Groovy-Eclipse Feature 2.7.1.xx-20120921-2000-e37RELEASE (org.codehaus.groovy.eclipse.feature.feature.group 2.7.1.xx-20120921-2000-e37RELEASE)
To: org.codehaus.groovy.jdt.patch.feature.group [2.7.1.xx-20120921-2000-e37RELEASE]
Cannot satisfy dependency:
From: Groovy-Eclipse Feature 2.7.1.xx-20120921-2000-e37RELEASE (org.codehaus.groovy.eclipse.feature.feature.group 2.7.1.xx-20120921-2000-e37RELEASE)
To: org.eclipse.jdt.debug.ui 0.0.0
Cannot satisfy dependency:
From: Groovy-Eclipse M2E integration 2.7.1.xx-20120921-2000-e37RELEASE (org.codehaus.groovy.m2eclipse.feature.group 2.7.1.xx-20120921-2000-e37RELEASE)
To: org.codehaus.groovy.eclipse.feature.feature.group 0.0.0
Cannot satisfy dependency:
From: Java EE IDE Feature 1.5.1.20121004-1506 (org.eclipse.epp.package.jee.feature.feature.group 1.5.1.20121004-1506)
To: org.eclipse.jdt.feature.group 0.0.0
Cannot satisfy dependency:
From: JDI Debug UI 3.6.100.v20120530-1425 (org.eclipse.jdt.debug.ui 3.6.100.v20120530-1425)
To: bundle org.eclipse.jdt.core [3.8.0,4.0.0)
Cannot satisfy dependency:
From Patch: org.codehaus.groovy.jdt.patch.feature.group 2.7.1.xx-20120921-2000-e37RELEASE Eclipse Java Development Tools 3.8.0.v20120525-1249-8-8nFqlFNOfwKDRGz-pXLdGxEM83 (org.eclipse.jdt.feature.group 3.8.0.v20120525-1249-8-8nFqlFNOfwKDRGz-pXLdGxEM83)
To: org.eclipse.jdt.core [3.7.3.xx-20120921-2000-e37RELEASE]
Cannot satisfy dependency:
From Patch: org.codehaus.groovy.jdt.patch.feature.group 2.7.1.xx-20120921-2000-e37RELEASE Eclipse Java Development Tools 3.8.1.v20120814-104540-8-8nFqpFNOfwKDRVz-tXOcL5d_83 (org.eclipse.jdt.feature.group 3.8.1.v20120814-104540-8-8nFqpFNOfwKDRVz-tXOcL5d_83)
To: org.eclipse.jdt.core [3.7.3.xx-20120921-2000-e37RELEASE] 
```

但是代码仍然没有突出显示......你能告诉我接下来应该尝试哪些步骤来突出显示代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T03:54:59.840

[最可能的原因是您正在 Java 编辑器中编辑 groovy 文件。](http://groovy.codehaus.org/Eclipse+Plugin+FAQ#EclipsePluginFAQ-Q.Whyisgroovy-awaresyntaxhighlightingnotworking?)

# java - 将字节 [] 更改为输入流？

> ID：13799695
> 
> 赞同：0
> 
> 时间：2012-12-10T11:04:45.067
> 
> 标签：java, android, bytearray, inputstream, libraries

我正在尝试制作的 android 应用程序中使用两个库。安卓新手。该应用程序用于连接到串行设备并通过终端控制其控制台。

一个库用于设置串行连接、设置波特率等，还可以通过串行写入读取/数据。另一个用于创建终端会话。我的问题在于将这两者结合在一起以获得连接到串行设备的终端。

在终端库中，我需要提供一个`InputStream`和`OutputStream`向终端提供输入和输出。所以我必须调用`setTermIn(java.io.InputStream)`并将`setTermOut(java.io.OutputStream)`输入和输出流连接到模拟器。

然而，在串行库中，有两种发送和接收方法，它们处理字节数组。 `sendData(byte[] data)`用于发送数据和用于接收数据的 dataListener。我必须实现这一点并`onDataReceived(int id, byte[] data)`使用 id 作为设备名称来编写方法。

我没有通过串行发送字节数组的函数的源代码，那么如何将字节数组变成流以发送到我的终端？

**编辑：**

我认为这应该覆盖它，这就是我想要的？

```
Private USB2SerialAdapter mSelectedAdapter;

...

public void sendData(byte[] data)
{
//this should echo what I send to the terminal in the correct format
ByteArrayOutputStream bos = new ByteArrayOutputStream(data.length);     

bos.write(data, 0, data.length);

setTermOut(bos);

//send data over serial using original sendData() method
mSelectedAdapter.sendData(data);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:11:39.933

这两个片段应该为您提供足够的信息来找到问题的解决方案。

**阅读：**

```
byte[] source = ...;
ByteArrayInputStream bis = new ByteArrayInputStream(source);
// read bytes from bis ... 
```

**写作**

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
// write bytes to bos ...
byte[] sink = bos.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:07:14.657

这应该这样做：[ByteArrayInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ByteArrayInputStream.html "字节数组输入流")，[ByteArrayOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html "字节数组输出流")

只需查看这些情况下的文档即可。

# wpf - wpf 字典绑定，其中 key=variable

> ID：13799705
> 
> 赞同：5
> 
> 时间：2012-12-10T11:05:24.780
> 
> 标签：wpf, binding, dictionary

我有一本测试词典

```
MyDict = new Dictionary<string, Uri>
{
    {"First", new Uri("alma.jpg", UriKind.Relative)},
    {"Second", new Uri("korte.jpg", UriKind.Relative)}
}; 
```

和一个简单的 XAML

```
<TextBlock Text="{Binding MyDict[First]}"
           FontSize="13" Width="200" Height="30" /> 
```

这完美地显示了第一个关键元素值

我想要的是我有一个字符串变量： DictKey Lets DictKey="First"

如何重写 XAML 以使用此变量

```
<TextBlock Text="{Binding MyDict[???DictKey????]}"
           FontSize="13" Width="200" Height="30" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T11:49:46.430

我假设你有一些财产`DictKey`持有项目的关键。您可以使用`MultiBinding`并设置第一个绑定到您的字典属性和第二个绑定到带有项目键的属性：

```
<TextBlock FontSize="13" Width="200" Height="30">
    <TextBlock.Text>
        <MultiBinding>
            <MultiBinding.Converter>
                <local:DictionaryItemConverter/>
            </MultiBinding.Converter>

            <Binding Path="MyDict"/>
            <Binding Path="DictKey"/>
        </MultiBinding>
    </TextBlock.Text>
</TextBlock> 
```

转换器使用这两个值从字典中读取项目：

```
public class DictionaryItemConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (values != null && values.Length >= 2)
        {
            var myDict = values[0] as IDictionary;
            var myKey = values[1] as string;
            if (myDict != null && myKey != null)
            {
                //the automatic conversion from Uri to string doesn't work
                //return myDict[myKey];
                return myDict[myKey].ToString();
            }
        }
        return Binding.DoNothing;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

# java - 无法使用带有 Java 的 Webdriver 获取 xpathcount

> ID：13799706
> 
> 赞同：1
> 
> 时间：2012-12-10T11:05:24.850
> 
> 标签：java, xpath, webdriver, selenium-webdriver

无法使用 Webdriver 获取 xpathcount。通过使用下面的代码，我得到计数​​为 0。

```
int xpathcount= driver.findElements(By.xpath(("//table[@id='ctl00_MasterPlaceHolder_GrdHistory']/tbody/tr"))).size(); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T13:22:48.183

试试下面的代码，括号有问题...

```
int xpathcount = driver.findElements(By.xpath("//table[@id='ctl00_MasterPlaceHolder_GrdHistory']/tbody/tr")).size(); 
```

# hibernate - Hibernate：HQL 不加载数据，但条件加载

> ID：13799715
> 
> 赞同：1
> 
> 时间：2012-12-10T11:06:20.530
> 
> 标签：hibernate, hql, criteria, hibernate-criteria

*我在一笔交易*中有以下说明

 *```
(0)Transaction begins
(1)Insert A into myTable
(2)Load all data from myTable using HQL       #-> A is not loaded
(3)Load all data from myTable using Criteria  #-> A is loaded
(4)Transaction ends 
```

但是如果我交换`(2)`and `(3)`，这两种情况都很好并且`A`已加载。

什么会导致这个问题？

* * *

**详细信息：** *这是我拥有的代码*

```
@Transcational
myFunction(){
    //I have A inserted into myTable and the rest...

    SQLQuery crit = (SQLQuery) getSession().createSQLQuery("select * from myTable ");
    ArrayList<PatternHeader> ls = (ArrayList<PatternHeader>)crit.list(); //There is no trace of A

    Criteria cr = getSession().createCriteria(MyTable.class);
    ArrayList<PatternHeader> crls = (ArrayList<PatternHeader>)cr.list(); // A is loaded as well
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:31:37.363

对条件 API 的调用涉及刷新，而 HQL 语句的执行则不涉及。可能您的 FlushMode 设置为 AUTO，据我所知，这允许 Hibernate 做它认为最好的事情。如果您想在任何查询之前与数据库同步会话，请将 FlushMode 设置为 ALWAYS。*

# c# - 在 C# windows 和 .aspx 页面之间发送和接收值

> ID：13799720
> 
> 赞同：0
> 
> 时间：2012-12-10T11:06:36.343
> 
> 标签：c#, asp.net, .net

为了在 C# Windows 窗体中注册产品，我想将许可证密钥从 C# Windows 窗体传递到 .aspx 注册页面。再次在.aspx 注册页面中成功注册后，我想将成功/失败标志从.aspx 页面发送回C# windows 窗体？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:15:55.977

为什么不尝试使用 Web 服务或 WCF 服务来验证来自 Windows 窗体应用程序的许可证密钥与数据库？

# java - Android 应用程序，没有错误消息，但已意外停止

> ID：13799729
> 
> 赞同：0
> 
> 时间：2012-12-10T05:18:42.553
> 
> 标签：java, oop, android

有谁知道我的问题是什么。我没有任何编译错误消息，但是当我运行应用程序时，它会崩溃并意外停止。

这是我的代码。先感谢您。

```
ListView l ;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_final_project);

        String  arr[]={"Red","Green","Blue","Yellow","Cyan"};
          l=(ListView) findViewById(R.id.listView1);
      ArrayAdapter<String> adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, arr);
      l.setAdapter(adapter);

        Button buttonOne = (Button) findViewById(R.id.button1);
    buttonOne.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v){

                setContentView(R.layout.layout_save);
            //  setContentView(R.layout.activity_final_project);    
            //startActivity(new Intent("com.example.finalproject.layout_save"));
            }
        });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:18:53.673

为您的 ListView 提供适当的 id：

```
<ListView android:id="@android:id/list" 
    ...
</ListView> 
```

# javascript - document.write 在 Youtube videobar 的 javascript 中表现异常

> ID：13799733
> 
> 赞同：1
> 
> 时间：2012-12-10T11:07:04.627
> 
> 标签：javascript, asynchronous, youtube-javascript-api

Youtube 的 Videobar 是一个过时的小部件。Google 仍在提供 js，但文档和链接已从他们的网站上删除。您可以在以下位置查看运行示例：sicmaui.com（右侧，youtube 选项卡）

它目前正在使用 html 上的脚本标签加载

```
<script src="http://www.google.com/uds/api?file=uds.js&v=1.0&source=uds-vbw" type="text/javascript"></script>
GSearch.setOnLoadCallback(somefunction); //works 
```

但是当我尝试使用以下代码加载它时它不起作用

```
var $script = $('<script></script>').attr('src', src).bind('load', function(){
GSearch.setOnLoadCallback(somefunction); //GSearch is undefined
});
$('head')[0].appendChild($script[0]); 
```

现在 js 的加载非常好。但是变量是未定义的。我深入研究了谷歌的 js，发现后来它使用以下代码加载了另一个 js 文件：

```
google.loader.writeLoadTag("script", google.loader.ServiceBase + "/api/search/1.0/8c68537a8c14de310f268bd7f81c9c67/default+en.I.js", false); 
```

拨打电话（其中 'n' 等于文档）

```
n.write('<script src="' + b + '" type="text/javascript"><\/script>') 
```

现在理想情况下，这个 js 应该用这个脚本覆盖整个页面内容。但由于某种原因，它没有这样做，这让我发疯了！

不管怎样，我的主要目标是异步加载这个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:20:18.340

您应该尝试使用[jQuery 的`getScript`](http://api.jquery.com/jQuery.getScript/); 它处理所有你不想参与的混乱：添加`async`属性，定义`readystatechange`事件`load`处理程序，避免内存泄漏，......</p>

## 编辑：

至于你的根本问题：如果你异步加载它，我认为你不能让这个脚本工作。`document.write`本质上是同步的。请参阅此相关问题：[警告：从异步加载的外部脚本调用 document.write() 被忽略。这是如何解决的？](https://stackoverflow.com/questions/7811985/warning-a-call-to-document-write-from-an-asynchronously-loaded-external-scrip)

# android - 更改软键盘布局

> ID：13799737
> 
> 赞同：1
> 
> 时间：2012-12-10T11:07:10.820
> 
> 标签：android, android-layout, android-softkeyboard

我想知道如何更改 EditText 和“完成”按钮的布局！谢谢！

PS。此软键盘已更改为包含我需要的来自 android sdk 提供的示例的键。

![布局](../Images/ec9a7b3f28ef86a7096ea23146eedbc0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:11:03.927

您可以尝试创建自己的布局并将其显示在 Edittext 上。

# ios - iPhone 5 上的 AVSystemController_SystemVolumeDidChangeNotification

> ID：13799740
> 
> 赞同：3
> 
> 时间：2012-12-10T11:07:18.693
> 
> 标签：ios, iphone-5, avcapturesession

似乎`AVSystemController_SystemVolumeDidChangeNotification`每次启动 AVCaptureSession 时都会触发 iPhone 5 上的事件。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(volumeChanged:) name:@"AVSystemController_SystemVolumeDidChangeNotification" object:nil]; 
```

有谁知道如何解决这个问题？我正在使用这个 Observer 用音量按钮拍照（我知道它是一个私有 API，但它与默认相机应用程序的功能相同，Apple 通常视而不见......），但*仅在 iPhone 5 上*拍照每次相机启动时拍摄。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-16T13:02:11.810

用这个：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(volumeChanged:)
                                             name:@"AVSystemController_SystemVolumeDidChangeNotification"
                                           object:nil]; 
```

接着：

```
- (void)volumeChanged:(NSNotification*)notification
{
    if([[notification.userInfo objectForKey:@"AVSystemController_AudioVolumeChangeReasonNotificationParameter"] isEqualToString:@"ExplicitVolumeChange"])
    {
        float volume = [[[notification userInfo]
                         objectForKey:@"AVSystemController_AudioVolumeNotificationParameter"]
                        floatValue];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T11:33:44.383

抱歉，我无法让它正常工作。我确信 Apple 在 iPhone 5 上采用这种方式是有充分理由的，但它确实令人讨厌。

我发现它的唯一方法是不使用它，而是使用音频会话属性侦听器方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //...
    AudioSessionInitialize(nil, nil, nil, nil);
    AudioSessionSetActive(YES);

    AudioSessionAddPropertyListener(kAudioSessionProperty_CurrentHardwareOutputVolume, volumeListenerCallbackIPhone, (__bridge void *)(self));
    //...
} 
```

然后在回调中：

```
- (void)volumeChanged:(NSNotification *)notification
{
    NSLog(@"volumeChanged");
    // ...
} 
```

...然后根据上下文进一步过滤事件。

-肯

# iphone - 如何使用 FBConncet 在 Facebook 上上传视频？

> ID：13799742
> 
> 赞同：0
> 
> 时间：2012-12-10T11:07:25.663
> 
> 标签：iphone, xcode, url, video, fbconnect

在我的应用程序中，我正在尝试使用 FbConnect 在 facebook 墙上上传视频，我的代码看起来不错，但我不知道为什么我的视频没有上传，因为如果我使用相同的代码方法上传图像，它会成功将图像上传到 facebook.here是我用来上传图片的代码

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"2" ofType:@"png"];
NSURL *url = [NSURL URLWithString:path];
NSData *data = [NSData dataWithContentsOfFile:filePath];
UIImage *img  = [[UIImage alloc] initWithData:data];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                             img, @"Picture",
                             nil];
[_facebook requestWithGraphPath:@"me/photos"
                    andParams:params
                    andHttpMethod:@"POST"
                    andDelegate:self];
[img release]; 
```

对于视频，我正在尝试此代码

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"myVideo" ofType:@"mp4"];
 NSURL *url = [NSURL URLWithString:filePath];
 NSData *videoData = [NSData dataWithContentsOfURL:url];
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               videoData, @"video.mp4",
                               @"video/quicktime", @"contentType",
                               @"Video Test Title", @"title",
                               @"Video Test Description", @"description",
                               nil];
[_facebook requestWithGraphPath:@"me/videos"
                     andParams:params
                 andHttpMethod:@"POST"
                   andDelegate:self]; 
```

上面的代码没有给我任何错误，但它在标签中重新调整了一些文本消息（操作无法完成）。这不是在图像上传的情况下。所以有人可以指导我如何修复它。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T11:11:23.380

试试这些行：

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"myVideo" ofType:@"mp4"];
      NSData *videoData = [NSData dataWithContentsOfFile:filePath];
     NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   videoData, @"video.mp4",
                                   @"video/quicktime", @"contentType",
                                   @"Video Test Title", @"title",
                                   @"Video Test Description", @"description",
                                   nil];
    [_facebook requestWithGraphPath:@"me/videos"
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self]; 
```

希望这对你有帮助。它对我来说很好。现在添加这些行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:15:51.467

```
 http://stackoverflow.com/questions/10509984/how-to-upload-mp4-video-on-facebook-using-graph-api-in-objective-c

http://%5B1%5D:%20https://github.com/reallylongaddress/iPhone-Facebook-Graph-API

http://stackoverflow.com/questions/12861615/upload-video-to-facebook-using-facebook-new-sdk-on-ios-6-0 
```

# matlab - 如何使用 Matlab 存储所有模拟结果？

> ID：13799744
> 
> 赞同：0
> 
> 时间：2012-12-10T11:07:29.447
> 
> 标签：matlab, simulation

我正在运行一个模拟算法，例如 500 次运行，（注意：结果是矩阵），我的问题是：如何存储所有结果“500 矩阵”？我想要第一个矩阵，然后是第一个等之后的第二个矩阵。我将有一个更大的矩阵 500 垂直矩阵，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:25:06.797

假设你有你的结果矩阵`Mcurrent`

如果你想保存它，你可以说`save Mcurrent`

但是，假设您有一个结果矩阵`Mcurrent`，并且您想将新结果附加`Mnew`到它上面，您可以这样做

```
Mcurrent = [Mcurrent Mnew] 
```

或者

```
Mcurrent = [Mcurrent; Mnew] 
```

取决于 的大小`Mnew`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:40:20.020

如果结果很大，您可能希望将它们保存在自己的文件中并稍后进行后期处理。对于像 CFD 这样的东西，这将是常态（将每个保存为自己的并编写一个脚本来处理每个文件的结果）。

# ruby-on-rails - spree-paypal-express 因“网关错误：缺少翻译：en.the_totals_of_the_cart_item_amounts_do_not_match_order_amounts”而失败

> ID：13799752
> 
> 赞同：13
> 
> 时间：2012-12-10T11:07:47.747
> 
> 标签：ruby-on-rails, spree, spree-paypal-express

我正在使用 spree 1-2-stable，并且我正在使用 spree-paypap-express 1-2-stable 分支（也与 master 一起尝试过，但又失败了）。当我尝试结帐订单并选择 PayPal express 作为付款方式时，它失败并显示错误：**"Gateway Error: translation missing: en.the_totals_of_the_cart_item_amounts_do_not_match_order_amounts"**。由于某种原因，订单总额与购物车商品数量不匹配。我整个周末都在这上面度过，但仍然不知道为什么会这样。

仅当我包含价格 > 0 的运费时才会出现此问题（如果我将运费设置为 ​​0，它会起作用）。一旦我将运费更改为 >0 或某个 % 的值，它就会中断。我尝试了“包括增值税的装运”真假-同样的事情。

有任何想法吗？这是ppx中的错误还是我错过了什么？

* * *

**更新：2012 年 12 月 12 日**

以下是我用来重现问题的值：我正在使用增值税（价格中包含 - 25%），我要购买的商品的价格是 265 欧元（货币无关紧要），商品数量为 1，运费为 15 欧元（运费中包含增值税）这是固定订单税。

我收到订单总额与项目总和不匹配的错误。经过一些调试后，我发现在发送到 PayPal 之前确实是不同的。

为什么我的总数计算错误？我正在使用狂欢的 1-2-stable 分支。我的宝石文件：

```
gem 'spree', :git => 'git://github.com/spree/spree.git', :branch => '1-2-stable'
#gem 'spree_usa_epay'
#gem 'spree_skrill'
gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => '1-2-stable'
gem 'spree_paypal_express', :github => 'spree/spree_paypal_express', :branch => '1-2-stable'

```

* * *

我真正的问题是如何在付款步骤之前（交付步骤之后）重新计算运费和税金，以及如何覆盖计算器以便它们正确计算？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T01:04:46.133

经过大量调试后，我发现 spree_paypal_express gem 的一些错误。

1.  如果税款为负数（增值税已包含在价格中，非欧盟订单可退还），则 PayPal 会因税款无效而拒绝订单
2.  原来 spree_paypal_express 中的运输方式是硬编码的。它总是选择插入数据库中的第一个而不是客户选择的那个（如果您有多个运输选项，则会出现此错误）

这些问题加在一起导致结帐问题。

对于第一个问题，我`opts[:tax] = 0`在税收为负时设置，对于第二个实现的逻辑，它获取选定的运输方式（具有相应的价格）而不是硬编码的方式。

# javascript - Javascript 数组或对象

> ID：13799753
> 
> 赞同：1
> 
> 时间：2012-12-10T11:07:48.370
> 
> 标签：javascript, arrays, object

我希望使用不同的 API 调用从各种来源获取内容，并将它们全部整理到具有相同格式的对象或数组中。我被javascript数组和对象困住了，我发现的例子似乎都没有做我想做的事。这是我要存储的格式。这是我想要实现的示例的伪编码

```
var content = new Object();
getTweets();
getSoundCloud();
display();

function getTweets() {

    //first result
    content.type = "tweet
    content.text = "the text of the tweet"
    content.image = "the image from the tweet"

    return content;
}

function getSoundCloud() {
    //second result
    content.type = "soundcloud
    content.text = "the name of the song"
    content.image = "the image of the song"

    return content;
}

function display() {
    //for each content
    {
        $("#container").append(content.text);
    }

} 
```

第一个结果由一个函数调用生成，第二个结果由另一个函数调用生成。

我希望这些函数将所有内容一起添加到同一个格式对象中。填充对象后，我希望在不同的函数中对其进行迭代并显示在屏幕上。

我如何制作这个对象？我已经尝试过了，但数据总是相同的，即用相同的值覆盖。在php中，这可能是一个关联数组或类似的东西

我想为我拥有的每条内容都有一个对象，并且可以循环遍历它

```
content[0].type = "tweet"
content[1].type = "coundcloud" 
```

任何带有示例的建议都会很棒。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:13:06.477

当你有*很多东西*时，你应该立即思考

> 我需要将这些东西存储在一个数组中。

当您的“事物”很*复杂*并且具有各种属性/状态时，您应该立即思考：

> 我需要创建一个对象来存储它们。

...所以这里最好的是一组对象。每个函数都会创建对象并将它们添加到`content`，我们将切换到一个数组：

```
var content = []; // Array
getTweets();
getSoundCloud();
display();

function getTweets() {
    var tweet = {}; // This is an object

    tweet.type = "tweet";
    tweet.text = "The text of the tweet";
    tweet.image = "The image of the tweet";

    content.push(tweet); // add the object to the array.
}

function getSoundCloud() {
    var soundcloudThing = {};

    soundcloudThing.type = "soundcloud"
    soundcloudThing.text = "the name of the song"
    soundcloudThing.image = "the image of the song"

    content.push(soundcloudThing);
} 
```

现在，当涉及到*显示*这个内容时，就像一个数组一样；这里要做的显而易见的事情是*迭代*它；

```
function display() {
    for (var i=0;i<content.length;i++)
    {
        $("#container").append(content[i].text);

        // You can also use content[i].image and content[i].type in here
    }
} 
```

请注意，`[]`and`{}`是用于创建数组和对象的[文字符号。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Literals)它的使用优于`new Array()`和`new Object()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:18:08.850

其实就是这样想出来的

```
var content = {
    text: this.text.linkify().linkuser().linktag(),
    image: this.profile_image_url,
    type: 'tweet'
};

arrayContent.push(content); 
```

我现在可以遍历它，每个内容并显示它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:15:40.703

`content`应该是一个对象数组，每个函数将其对象添加到内容数组中：

```
var content = []; // empty array
getTweets();
getSoundCloud();
display();

function getTweets() {
    content.push ({  //first result
      type: "tweet",
      text: "the text of the tweet",
      image: "the image from the tweet"
    });
}

function getSoundCloud() {
    content.push ({  //second result
      type: "soundcloud",
      text: "the name of the song",
      image: "the image of the song"
    });
}

function display() {
    content.forEach (v) {
       // code to format the object v appropriately
       var vtext = v.type + ' : ' + v.text;
        $("#container").append(vtext);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T11:14:33.683

我在这里做了一个例子：http: [//jsfiddle.net/pdXsA/2/](http://jsfiddle.net/pdXsA/2/)

```
var content = [];
content.push(getTweets());
content.push(getSoundCloud());
display();

function getTweets() {
    return{
        type : "tweet",
        text : "the text of the tweet",
        image : "the image from the tweet"                    
    };
}

function getSoundCloud() {
    return{
        type : "soundcloud",
        text : "the name of the song",
        image : "the image of the song"                    
    };
}

function display() {
    content.forEach(function(item){
        $("#container").append(item.text +"<br/>");
    });
}​ 
```

# php - PHP 警告：include_once() 未能打开 '' 以包含 (include_path='.;C:\xampp\php\PEAR')

> ID：13799755
> 
> 赞同：7
> 
> 时间：2012-12-10T11:07:52.030
> 
> 标签：php

我知道这个错误很常见，我试过搜索谷歌，我做了这些技巧无济于事。所以我的设置是，我有 3 个目录：

**CLASSES** ->constants
**PAGES**
**INITCONTROLS**

**编辑：** 我有新错误：

***警告：require_once(initcontrols/config.php) [function.require-once]：打开流失败：没有这样的文件或目录***

下面是我的代码片段：

```
require_once("initcontrols/config.php");

<div>
<?php 
$file = "initcontrols/header_myworks.php"; 
include_once($file); 
echo $plHeader;?>   
</div> 
```

这里还缺少什么？感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T11:38:08.453

如果当前文件位于**initcontrols**所在的同一目录中，这应该可以工作：

```
<?php
$ds = DIRECTORY_SEPARATOR;
$base_dir = realpath(dirname(__FILE__)  . $ds . '..') . $ds;
require_once("{$base_dir}initcontrols{$ds}config.php");
?>
<div>
<?php 
$file = "{$base_dir}initcontrols{$ds}header_myworks.php"; 
include_once($file); 
echo $plHeader;?>   
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:11:29.557

包含路径是针对服务器配置（[PHP.ini](http://www.cyberciti.biz/faq/how-do-i-set-php-include-path-in-php-ini-file/)）设置的，但您指定的包含路径是相对于该路径的，因此在您的情况下，包含路径是（Windows 中的实际路径）：

```
C:\xampp\php\PEAR\initcontrols\header_myworks.php 
```

提供您在主题中粘贴的路径是正确的。确保您的文件位于那里。

有关更多信息，您可以以编程方式[获取](http://php.net/manual/en/function.get-include-path.php)和[设置](http://php.net/manual/en/function.set-include-path.php)包含路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-22T22:26:58.407

这是因为您使用相对路径。

解决此问题的简单方法是使用`__DIR__`魔法常数，例如：

```
require_once(__DIR__."/initcontrols/config.php"); 
```

来自 PHP 文档：

> 文件的目录。如果在包含中使用，则返回包含文件的目录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T01:04:47.803

放入 config.php 这个

```
$config['rewrite_short_tags'] = FALSE; 
```

# c# - Visual Studio 项目模板 $safeitemname$ 未按预期工作

> ID：13799757
> 
> 赞同：11
> 
> 时间：2012-12-10T11:07:54.627
> 
> 标签：c#, visual-studio, parameters, visual-studio-templates

我正在创建一个 Visual Studio 项目模板来创建一些依赖于“容器”文件的文件。

最后一个文件`<ProjectItem SubType="Code" TargetFileName="$fileinputname$\I$fileinputname$ View.cs" ReplaceParameters="true">Container View.cs</ProjectItem>`创建了一个需要特定模型类型的视图界面。**但是该`$safeitemname$`**参数没有按我的预期工作。

输出**容器 View.cs**文件：

```
public interface IIMy_Triplet_View : IView<IMy_Triplet_View_Model>
{
} 
```

**预期的：**

```
public interface IMy_Triplet_View : IView<My_Triplet_Model>
{
} 
```

**这是 Container View.cs 模板的来源：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using WebFormsMvp;

namespace $rootnamespace$
{
    public interface $safeitemname$_View : IView<$safeitemname$_Model>
    {
    }
} 
```

**和 .vstemplate 文件**

```
 <VSTemplate Version="3.0.0" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005" Type="Item">
      <TemplateData>
        <DefaultName>Model-View-Presenter</DefaultName>
        <Name>Model-View-Presenter</Name>
        <Description>Creates a model-view-presenter triplet</Description>
        <ProjectType>CSharp</ProjectType>
        <SortOrder>10</SortOrder>
        <Icon>__TemplateIcon.png</Icon>
        <PreviewImage>__PreviewImage.png</PreviewImage>
      </TemplateData>
      <TemplateContent>
        <References>
          <Reference>
            <Assembly>WebFormsMvp</Assembly>
          </Reference>
        </References>
        <ProjectItem SubType="Code" TargetFileName="$fileinputname$" ReplaceParameters="false">Container</ProjectItem>
        <ProjectItem SubType="Code" TargetFileName="$fileinputname$\$fileinputname$ Model.cs" ReplaceParameters="true">Container Model.cs</ProjectItem>
        <ProjectItem SubType="Code" TargetFileName="$fileinputname$\$fileinputname$ Presenter.cs" ReplaceParameters="true">Container Presenter.cs</ProjectItem>
        <ProjectItem SubType="Code" TargetFileName="$fileinputname$\I$fileinputname$ View.cs" ReplaceParameters="true">Container View.cs</ProjectItem>
      </TemplateContent>
    </VSTemplate> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-27T15:43:26.753

在这里找到解决方案：http: [//social.msdn.microsoft.com/Forums/en-US/vsx/thread/8516524a-22d3-4ed2-b2da-aaafe855fb92/](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/8516524a-22d3-4ed2-b2da-aaafe855fb92/)

添加一个 CustomParameter（TemplateContent 下的最后一项）：

```
<VSTemplate Version="3.0.0" ... Type="Item">
 <TemplateData>
  ...
 </TemplateData>
 <TemplateContent>
  ...
  <CustomParameters>
   <CustomParameter Name="$basename$" Value="$fileinputname$"/>
  </CustomParameters>
 </TemplateContent>
</VSTemplate> 
```

并在文件中使用 $basename$ 而不是 $fileinputname$。

# sql-server - MS SQL 2012 上的 FREETEXTTABLE 返回奇怪的排名

> ID：13799764
> 
> 赞同：1
> 
> 时间：2012-12-10T11:08:19.007
> 
> 标签：sql-server, tsql, full-text-search

我试图在一张表中找到几个单词，但在不同的字段中。为什么一个对应词的记录的排名高于两个对应的记录？这个例子：

记录 1

**作品名：**埃迪墨菲

**描述：**美国单口相声演员、演员、作家、歌手、导演和音乐家。

记录 2

**书名：**汤姆克鲁斯

**简介：**美国电影演员和制片人。他曾获得三项金球奖。

```
SELECT * FROM FREETEXTTABLE(SubjectContent, (Title, Description), 'tom actor') 
```

尽管记录 2 包含两个单词（'tom' 和 'actor'）并且记录 1 仅包含一个单词（'actor'），但返回排名为 61 的记录 1 和排名为 47 的记录 2。因此，用户在正确记录之前收到大量不正确的记录。

虽然如果我设置搜索参数“汤姆巡航演员”，请求会返回高排名。

我的全文索引：

```
CREATE FULLTEXT INDEX ON SubjectContent(Title, [Description]) 
KEY INDEX PK_SubjectContent
ON FullTextSearch; 
```

我尝试更改全文目录的“重音敏感”属性和其他属性未成功。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:59:01.260

查看这两个字符串，我发现第二个字符串从全文的角度来看是一个更大的文档。这是因为你在那里有句子分隔符。因此，如果您将这些字符串传递给 dm_fts_parser，您将看到第一个字符串的最大出现次数为 11，第二个字符串为 21。全文在 16、32、128、256 等存储桶中规范化此文档长度，因此您的第一个文档位于第一个桶中，第二个位于第二个桶中。因此第一个具有更高的排名（与文档的长度成反比）。所有这些的参考都在这里[http://msdn.microsoft.com/en-us/library/cc879245.aspx](http://msdn.microsoft.com/en-us/library/cc879245.aspx) 谢谢Venkat

# javascript - javascript 字符串的 javascript 正则表达式

> ID：13799773
> 
> 赞同：1
> 
> 时间：2012-12-10T11:09:11.563
> 
> 标签：javascript, regex

我需要用正则表达式匹配一个 javascript 字符串，这是一个用单引号括起来的字符串，并且只能包含一个反斜杠单引号。

我将匹配的示例字符串如下所示：

```
'abcdefg'
'abc\'defg'
'abc\'de\'fg' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:29:10.947

这是匹配所有有效 JavaScript 文字字符串（由单引号包围`'`）并拒绝所有无效字符串的正则表达式。请注意，假定为**严格模式。**

```
/'(?:[^'\\\n\r\u2028\u2029]|\\(?:['"\\bfnrtv]|[^\n\r\u2028\u2029'"\\bfnrtvxu0-9]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})|\\(?:\n|\r\n|\r(?!\n)|[\u2028\u2029]))*'/ 
```

或更短的版本：

```
/'(?:[^'\\\n\r\u2028\u2029]|\\(?:[^\n\rxu0-9]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|\n|\r\n?))*'/ 
```

上面的正则表达式基于`StringLiteral`2011 年 6 月发布的 ECMAScript 语言规范 5.1 版中指定的（忽略双引号版本）的定义。

用双引号括起来的 JavaScript 文字字符串的正则表达式`"`几乎相同：

```
/"(?:[^"\\\n\r\u2028\u2029]|\\(?:[^\n\rxu0-9]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|\n|\r\n?))*"/ 
```

* * *

让我们剖析一下这个怪物（更长的版本，因为它是从语法直接翻译而来的）：

*   A `StringLiteral`（忽略双引号版本）以 开头和结尾`'`，如在正则表达式中所示。在引号之间是一个可选的`SingleStringCharacter`. 这解释了`*`- 0 个或更多字符。

*   `SingleStringCharacter`定义为：

    ```
    单字符串字符 ::
           SourceCharacter 但不是 ' 或 \ 或 LineTerminator 之一
           \ 转义序列
           行继续

    ```

    `[^'\\\n\r\u2028\u2029]`对应第一条规则

    `\\(?:['"\\bfnrtv]|[^\n\r\u2028\u2029'"\\bfnrtvxu0-9]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})`对应第二条规则

    `\\(?:\n|\r\n|\r(?!\n)|[\u2028\u2029])`对应第三条规则

*   让我们看看第一条规则：`SourceCharacter but not one of ' or \ or LineTerminator`. 第一条规则处理“正常”字符。

    `SourceCharacter`是任何 Unicode 单位。

    `LineTerminator`是换行符`<LF>`(`\u000A`或`\n`)、回车符`<CR>`(`\u000D`或`\r`)、行分隔符`<LS>`( `\u2028`) 或段落分隔符`<PS>`( `\u2029`)。

    所以我们将只使用一个否定字符类来表示这个规则：`[^'\\\n\r\u2028\u2029]`.

*   对于处理转义序列的第二条规则，您可以看到`\`before `EscapeSequence`，因为它出现在正则表达式中。至于`EscapeSequence`，这是它的语法（严格模式）：

    ```
    转义序列::
            字符转义序列
            0 [前瞻∉ DecimalDigit]
            十六进制转义序列
            Unicode转义序列

    ```

    `['"\\bfnrtv]|[^\n\r\u2028\u2029'"\\bfnrtvxu0-9]`是 的正则表达式`CharacterEscapeSequence`。它实际上可以简化为`[^\n\r\u2028\u2029xu0-9]`

    第一部分是`SingleEscapeCharacter`, 包括`'`, `"`, `\`, 和用于控制字符`b`, `f`, `n`, `r`, `t`, `v`.

    第二部分是`NonEscapeCharacter`，也就是`SourceCharacter but not one of EscapeCharacter or LineTerminator`。`EscapeCharacter`定义为`SingleEscapeCharacter`,`DecimalDigit`或 `x`（对于十六进制转义序列）或`u`（对于 unicode 转义序列）。

    `0(?![0-9])`是第二条规则的正则表达式`EscapeSequence`。这是为了指定空字符`\0`。

    `x[0-9a-fA-F]{2}`是正则表达式`HexEscapeSequence`

    `u[0-9a-fA-F]{4}`是正则表达式`UnicodeEscapeSequence`

*   第三条规则处理跨越多行的字符串。我们来看看`LineContinuation`和其他相关的语法：

    ```
    LineContinuation ::
            \ LineTerminatorSequence

    LineTerminatorSequence :: 
            <LF> 
            <CR> [lookahead ∉ <LF> ]
            <LS>
            <PS>
            <CR> <LF> 
    ```

    `\\(?:\n|\r\n|\r(?!\n)|[\u2028\u2029])`对应上面的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:33:42.833

没那么难……

此外，您需要检测一些其他可能的字符序列，例如`\n`,`\r`或`\\`，在 javascript 中没有转义的换行是无效的，您必须使用该`\n`序列。

```
/^'([^\\'\n\r]|\\'|\\n|\\r|\\\\)*'$/ 
```

执行中：

```
var sample = ["'abcdefg'", // Valid
              "'abc\\'defg'", // Valid
              "'abc\\'de\\'fg'", // Valid
              "'abc\\'\\r\\nde\\'fg'", // Valid
              "'abc\\'\r\nde\\'fg'", // Invalid
              "'abc'def'" // Invalid
             ];
for(var i = 0; i < sample.length; i++)
    console.log(sample[i].match( /^'([^\\'\n\r]|\\'|\\n|\\r|\\\\)*'$/ )); 
```

1.  `^`告诉匹配器下一个条件必须匹配字符串的开头
2.  `'`将匹配`'`分隔符
3.  `(`打开一个群组
4.  `[^\\'\n\r]`匹配任何不同于`\`and的东西`'`，并且不会匹配特殊的`\n`and`\r`字符
5.  `|``|`如果上述条件不匹配，将测试右侧
6.  `\\'`将匹配`\'`
7.  `\\n`将匹配`\n`文字字符串
8.  `|\\r`或将匹配`\r`文字字符串
9.  `|\\\\`或将匹配`\\`文字字符串
10.  `)*`关闭组并允许它重复多次并允许它不存在（例如空字符串）
11.  `'`将匹配最终`'`分隔符
12.  `$`告诉匹配器这必须是字符串的 and

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:26:49.460

试试这个：

```
/'(?:[^'\\]|\\'|\\(?!'))*'/ 
```

在您的控制台中测试它：

```
/'(?:[^'\\]|\\'|\\(?!'))*'/.exec("'abc\\\'de\\\'fg'") 
```

它会匹配

*   任意数量的字符：
    *   `NOT ' or \`（除了）
    *   `\'`（或者）
    *   `\`（后面没有`'`）

如果您希望它匹配整个字符串，请使用字符串`^`开头和字符串`$`结尾标记：

```
/^'(?:[^'\\]|\\'|\\(?!'))*'$/ 
```

...这将匹配`'string'`，`'string\'s are awesome'`但不匹配`'string's are awesome'`或`'string's`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-10T11:27:26.547

尝试这个

~~/^'([az]*(?:\')?[az])+'$/~~

~~[在此处](http://regexr.com?333av)查看示例~~

```
str = 'abc\'de\'fg';

match = str.match(/^([a-z\\']+)$/g); 
```

在 Firebug 控制台中测试。使用或不使用转义字符。

# jquery - jQuery使另外两个li的高度与最高的高度相同

> ID：13799776
> 
> 赞同：1
> 
> 时间：2012-12-10T11:09:23.440
> 
> 标签：jquery, jquery-selectors

我有这个小提琴[链接](http://jsfiddle.net/kpatel/7sHe7/)。在此您可以看到我的标记就像 ul 中的一堆 li。在此，我将 3 个 lis 作为一行，将下一个 3 个 lis 作为另一行，依此类推。现在我使用 jQuery 来获取一个 li 的高度，该高度比其他 2 个 lis 高，并使 2 个 lis 与最高 li 的高度相同。在这里，我的 jQuery 对第一行运行良好，但不适用于其他行。那么有人可以告诉我如何为其他行设置相同的高度吗？任何帮助和建议都将不胜感激。我的 jQuery 代码是这样的

```
<script type="text/javascript">
  jQuery(document).ready(function(){
    jQuery(function() {
      var items = $("ul.products li");
      var rows = items.length / 3;
      if (rows <= 0)
        rows = 1;
      for(var r=0;r<rows;r++) {
        normalizeRowHeight(r, items);

      }
    });

    function normalizeRowHeight(row, itemSet) {
      var maxRowHeight = 0;
      itemSet.slice(0,3).each(function(i) {
        if ($(this).height() > maxRowHeight )
          maxRowHeight = $(this).height();
        });  
      itemSet.slice(0,3).each(function(i) {
        $(this).css('height', maxRowHeight + "px");
      });
    }
  });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:09:02.237

您需要更新`.slice()`每行中的数字，因此，`.slice(0, 3)`变为`.slice(3, 6)`，然后`.slice(6, 9)`等等。像下面这样的东西可以解决问题：

```
(function($) {
  function normalizeHeight(items) {
    var maxHeight = 0, itemHeight;

    items.each(function() {
      itemHeight = $(this).height();
      if (itemHeight > maxHeight) {
        maxHeight = itemHeight;
      }
    }).height(maxHeight + 'px');
  }

  $(document).ready(function(){
    var itemsPerRow = 3,
        items = $('ul.products li'),
        rows = items.length / itemsPerRow, 
        r, min, max;

    if (rows < 1) rows = 1;

    for(r = 0; r < rows; r++) {
      min = itemsPerRow * r,
      max = min + itemsPerRow;
      normalizeHeight(items.slice(min, max));
    }
  });
}(jQuery)); 
```

我[在 jsbin 上放了一个演示](http://jsbin.com/igibem/7/edit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:16:39.250

您的逻辑中有一个漏洞来选择您正在操作的切片。你总是在前 3 个项目上工作。

试试这个：

```
function normalizeRowHeight(row, itemSet) {
  var maxRowHeight = 0;
  itemSet.slice(row * 3,(row + 1)*3).each(function(i) {
    if ($(this).height() > maxRowHeight )
      maxRowHeight = $(this).height();
    });  
  itemSet.slice(row * 3,(row + 1)*3).each(function(i) {
    $(this).css('height', maxRowHeight + "px");
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:29:50.200

你可以这样做

```
$(document).ready(function()
        {
            var i=0,j=0;
            $('li').each(function(){
                j=$(this).height();
                if (i<j)
                    i=j;
            });
            $('li').each(function(){
                $(this).height(i);//set Max height of li to other li
                alert($(this).height());
            });
        }); 
```

[见工作演示](http://jsfiddle.net/Dineshkani/pLmLv/)

# silverlight-4.0 - 如果响应时间更长，页面崩溃

> ID：13799778
> 
> 赞同：0
> 
> 时间：2012-12-10T11:09:31.577
> 
> 标签：silverlight-4.0

我将 Silverlight 与 wcf 一起用于我的应用程序。当页面请求时，它会转到服务以获取输出。但是，如果响应（数据库操作）需要一些时间来提供输出，那么我的 silverlight 页面就会崩溃。任何人都可以帮助我有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:18:30.867

听起来您需要将 WCF 服务的超时设置设置为更高，以应对潜在的延迟。超时设置通常在定义的绑定中设置

```
<system.serviceModel>
   <bindings> 
```

配置文件的部分。

您需要确保客户端配置中的“receiveTimeout”和服务配置中的“sendTimeout”设置为足够高的适当值以满足您的特定服务的时间要求。

客户端的示例“basicHttpBinding”，“receiveTimeout”为 1 分 30 秒，可能如下所示（需要注意的重要项目是“receiveTimeout”）：

```
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBindingConfig" receiveTimeout="00:1:30">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

# c# - DataTable.Compute 不工作

> ID：13799782
> 
> 赞同：1
> 
> 时间：2012-12-10T11:09:43.470
> 
> 标签：c#, datatable, dataset

正在使用`DataTable.Compute()`方法，但得到

> “ 聚合参数中的语法错误：需要一个带有可能的 'Child' 限定符的单列参数。”

我的代码：

```
 int x = Convert.ToInt32(DataSet1.Tables[0].
       Compute("SUM(Convert([qty],'System.Int32'))","[code] = 'ABC'")); 
```

这里的代码是数据表的列，正在读取数量的总和。但我认为错误可能是因为 qty 是类型`string`并且无法转换为 int 类型，但不确定。

期待答案并提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:20:52.263

最好通过这样做来尝试 linq

```
int quantitysum= dt.Rows.Where(dr=>((string)dr["code"]) == "ABC") 
                             .Select(dr=>(int)dr["qty"]).Sum(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:31:04.080

Vinod 不要将您的数量与`System.Int32`. 写吧

```
Object Result = DataSet1.Table[0].Compute("SUM(qty)","code = 'ABC'"); 
```

然后你可以`Object`在转换为`integer`.

# bash - 在 Bash 中的命令中扩展单引号内的变量

> ID：13799789
> 
> 赞同：546
> 
> 时间：2012-12-10T11:10:13.903
> 
> 标签：bash, shell, variables, quotes

我想从一个*bash 脚本*运行一个命令，该脚本在单引号和一个变量中包含单引号和一些其他命令。

例如`repo forall -c '....$variable'`

在这种格式中，`$`被转义并且变量不被扩展。

我尝试了以下变体，但被拒绝了：

```
repo forall -c '...."$variable" '

repo forall -c " '....$variable' "

" repo forall -c '....$variable' "

repo forall -c "'" ....$variable "'" 
```

如果我用值代替变量，则命令执行得很好。

请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：842
> 
> 时间：2012-12-10T14:00:30.803

在单引号内，所有内容都按字面意思保留，无一例外。

这意味着您必须关闭引号，插入一些内容，然后再次重新输入。

```
'before'"$variable"'after'
'before'"'"'after'
'before'\''after' 
```

单词连接只是通过并置完成。如您所见，上述每一行对 shell 来说都是一个单词。引号（单引号或双引号，视情况而定）不会隔离单词。它们仅用于禁用对各种特殊字符的解释，如空格、`$`...`;`有关引用的好教程，请参阅 Mark Reed 的答案。也相关：[哪些字符需要在 bash 中转义？](https://stackoverflow.com/questions/15783701/which-characters-need-to-be-escaped-in-bash-how-do-we-know-it/20053121)

## 不要连接由 shell 解释的字符串

您绝对应该避免通过连接变量来构建 shell 命令。这是一个类似于连接 SQL 片段（SQL 注入！）的坏主意。

通常可以在命令中包含占位符，并将命令与变量一起提供，以便被调用者可以从调用参数列表中接收它们。

例如，以下是非常不安全的。不要这样做

```
script="echo \"Argument 1 is: $myvar\""
/bin/sh -c "$script" 
```

如果 的内容`$myvar`不受信任，这是一个漏洞利用：

```
myvar='foo"; echo "you were hacked' 
```

代替上面的调用，使用位置参数。下面的调用更好——它是不可利用的：

```
script='echo "arg 1 is: $1"'
/bin/sh -c "$script" -- "$myvar" 
```

请注意在对 的赋值中使用了单个刻度`script`，这意味着它是按字面意思进行的，没有变量扩展或任何其他形式的解释。

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2012-12-11T12:02:20.847

该`repo`命令不在乎它得到什么样的引号。如果需要参数扩展，请使用双引号。如果这意味着你最终不得不反斜杠很多东西，对大部分内容使用单引号，然后将它们分开并在需要扩展的部分使用双引号。

```
repo forall -c 'literal stuff goes here; '"stuff with $parameters here"' more literal stuff' 
```

解释如下，如果你有兴趣。

当您从 shell 运行命令时，该命令作为参数接收的是一个以 null 结尾的字符串数组。这些字符串可能绝对包含*任何*非空字符。

但是当 shell 从命令行构建字符串数组时，它会专门解释一些字符；这旨在使命令更容易（实际上，可能）键入。例如，空格通常表示数组中字符串之间的边界；出于这个原因，个别论点有时被称为"词"。但是一个论点可能仍然有空格。你只需要某种方式来告诉 shell 这就是你想要的。

您可以在任何字符（包括空格或另一个反斜杠）前面使用反斜杠来告诉 shell 按字面意思处理该字符。但是，虽然您可以执行以下操作：

```
reply=\”That\'ll\ be\ \$4.96,\ please,\"\ said\ the\ cashier 
```

......它可能会让人厌烦。所以shell提供了一个替代方案：引号。这些有两个主要品种。

双引号称为“分组引号”。它们防止通配符和别名被扩展，但主要是为了在单词中包含空格。参数和命令扩展等其他事情（由 a 表示的那种事情`$`）仍然会发生。当然，如果您想在双引号内使用文字双引号，则必须将其反斜杠：

```
reply="\"That'll be \$4.96, please,\" said the cashier" 
```

单引号更严厉。它们之间的所有内容都完全按照字面意思理解，包括反斜杠。绝对没有办法在单引号内获得文字单引号。

幸运的是，shell 中的引号*不是单词分隔符*；他们自己不会终止一个词。您可以在同一个单词中进出引号，包括不同类型的引号之间，以获得所需的结果：

```
reply='"That'\''ll be $4.96, please," said the cashier' 
```

所以这更容易 - 更少的反斜杠，虽然关闭单引号，反斜杠文字单引号，打开单引号序列需要一些时间来适应。

现代 shell 添加了另一种 POSIX 标准未指定的引用样式，其中前导单引号以美元符号为前缀。如此引用的字符串遵循与 C 编程语言的 ANSI 标准版本中的字符串文字类似的约定，因此有时称为“ANSI 字符串”和`$'`...`'`对“ANSI 引号”。在这样的字符串中，上述关于反斜杠的建议不再适用。相反，它们再次变得特别 - 您不仅可以通过在其前面添加反斜杠来包含文字单引号或反斜杠，而且 shell 还扩展了 ANSI C 字符转义（如`\n`换行符、`\t`制表符和`\xHH`带有十六进制代码`HH`）。但是，否则，它们表现为单引号字符串：不会发生参数或命令替换：

```
reply=$'"That\'ll be $4.96, please," said the cashier' 
```

需要注意的重要一点是，在所有这些示例中，存储在`reply`变量中的单个字符串*完全相同。*同样，在 shell 完成对命令行的解析之后，正在运行的命令无法准确地告诉每个参数字符串是如何实际输入的——或者即使*它*是输入的，而不是以某种方式以编程方式创建的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T14:42:54.830

**编辑：（**根据有问题的评论：）

从那以后我一直在研究这个。我很幸运，我有回购协议。我仍然不清楚您是否需要强制将命令括在单引号之间。我查看了 repo 语法，我认为您不需要。你可以在你的命令周围使用双引号，然后使用你需要的任何单引号和双引号，只要你转义双引号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-17T18:08:58.140

以下是对我有用的 -

```
QUOTE="'"
hive -e "alter table TBL_NAME set location $QUOTE$TBL_HDFS_DIR_PATH$QUOTE" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-21T02:48:50.150

**只需使用 printf**

代替

```
repo forall -c '....$variable' 
```

使用 printf 将变量标记替换为扩展变量。

**例如：**

```
template='.... %s'

repo forall -c $(printf "${template}" "${variable}") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-24T01:52:14.377

变量可以包含单引号。

```
myvar=\'....$variable\'

repo forall -c $myvar 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2018-01-23T11:18:10.560

这对你有用吗？

```
eval repo forall -c '....$variable' 
```

# php - 如何在php中隐藏机器人的内容

> ID：13799791
> 
> 赞同：-1
> 
> 时间：2012-12-10T11:10:17.770
> 
> 标签：php, hide, bots

我正在使用 jquery 并使用 php 文件将动态内容显示到不同的 URL。php 文件采用当前 url（参考）并查询数据库中的相应内容：

```
$url =  $_SERVER['HTTP_REFERER']; 
```

这是jQuery：

```
<div id="dyncontent"></div>
<script type="text/javascript">
     $(function() {
         $.get('http://mydomain.com/content.php', function(data) {
             $('#dyncontent').html(data);
         });
     });
</script> 
```

我知道机器人可以伪造 url 引用，但我不确定它是否可以获取我的 php 文件的内容。

有人有这方面的经验吗？如何有效地向机器人隐藏那段内容？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:26:32.940

这是处理恶意机器人的好方法：[用一个黑洞保护您的网站以防止恶意机器人](http://perishablepress.com/blackhole-bad-bots/)

基本前提是（引自网站）：

> ...在您的页面某处包含指向 robots.txt-forbidden 目录的隐藏链接。忽略或不遵守您的机器人规则的机器人将爬取链接并落入陷阱，然后执行 WHOIS 查找并将事件记录在黑洞数据文件中。一旦添加到黑名单数据文件中，恶意机器人将立即被拒绝访问您的站点....

如果机器人不遵守您的 robots.txt 文件，您可能不希望它出现在您的网站上。

# c++ - C++ 对象.getClass().getMethods()

> ID：13799792
> 
> 赞同：1
> 
> 时间：2012-12-10T11:10:21.147
> 
> 标签：c++, object, methods

> **可能重复：**
> [如何向 C++ 应用程序添加反射？](https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application)

有没有办法在 C++ 中获取对象或类的类名、类成员和类方法？

在 Java 中，我可以使用：

```
Object.getClass().getMethods()
Object.getClass().getName()
Object.getClass().getDeclaredMethods();
Object.getClass().getDeclaredFields();
Object.getClass().getMembers(); 
```

我知道 QT 中有 metaObject-Class。但我不想使用这个框架。boost-libary 或 STL 中还有其他内容吗？

[http://doc.qt.digia.com/qt/metaobjects.html#meta-object-system](http://doc.qt.digia.com/qt/metaobjects.html#meta-object-system)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:23:14.307

没有办法在 C++11 中获得一般反射。您可以做的最接近的事情是通过运算符获取对象的类型作为`std::type_info`使用**运行时类型信息**`typeid`。

这个 type_info 可以继承自，使您能够手动将一些额外的类型信息烘焙到您的类型中，并且您可以根据需要对其进行自定义。*这在 Bjarne Stroustrup 的书籍“C++ 编程语言”*和*“C++ 的设计与演变”*中有更详尽的解释，但我无法快速找到它的网络参考。

如您的问题所述，为了全面反思，您将不得不等待并希望这将在标准的未来版本中可用。C++ 标准委员会第 7 分组 (SG7) 目前正在处理这个问题：

[http://isocpp.org/std/the-committee](http://isocpp.org/std/the-committee)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:17:21.683

现在 C++（甚至 C++11）没有这样的特性（[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)），但是这个特性将在 C++14 中讨论：参见[这里](http://root.cern.ch/drupal/content/c14)和[这里](http://isocpp.org/std/the-committee)（SG7 组）

# java - Using inheritance and dialog box in java

> ID：13799793
> 
> 赞同：1
> 
> 时间：2012-12-10T11:10:28.023
> 
> 标签：java, inheritance, netbeans, joptionpane

I have three classes in java that i created:

CollegeCourse

```
package CollegeCourse;
import javax.swing.JOptionPane;
public class CollegeCourse {

protected String Dept;
protected int CourseNum;
protected int Cred;
protected int fee;
protected int Charge = 120;
protected int labfee;

public void inputDepartment(){
    Dept = JOptionPane.showInputDialog(null, "Enter Department");
}

public void inputCourseNumber(){
    String CourseNumString = new String(" ");
    CourseNumString = JOptionPane.showInputDialog(null, "Enter Course Number");
    CourseNum = Integer.parseInt(CourseNumString);
}

public void inputCredits(){
    String CredString = new String(" ");
    CredString = JOptionPane.showInputDialog(null, "Enter Credits");
    Cred = Integer.parseInt(CredString);
}

 public void displayNonLabCourse(){
    fee = Cred * Charge;
    JOptionPane.showMessageDialog(null, Dept + CourseNum + 
            "\nNon-lab Course" + "\n" + Cred +" Credits" + "\nTotal fee is $" + fee);
 } 
```

}

LabCourse

```
package CollegeCourse;
import javax.swing.JOptionPane;
public class LabCourse extends CollegeCourse {

 public void displayLabCourse(){
    labfee = fee + 50;
    JOptionPane.showMessageDialog(null, Dept + CourseNum + 
            "\nLab Course" + "\n" + Cred +" Credits" + "\nTotal fee is $" + fee);
 }
 } 
```

UseCourse

```
package CollegeCourse;
public class UseCourse{
public static void main(String[] args) {
    CollegeCourse college = new CollegeCourse();
    college.inputDepartment();
    college.inputCourseNumber();
    college.inputCredits();
    college.displayNonLabCourse();
    }
} 
```

How can i make the UseCourse class display the LabCourse display method when the user enters a certain department like "BIO"???

Create a class named CollegeCourse that includes data fields that hold the department (for example, ENG), the course number (for example, 101), the credits (for example 3), and fee for the course (for example, $360). All of the fields are required as arguments to the constructor, except for the fee, which is calculated at $120 per credit hour. Include a display() method that displays course data. Create a subclass named LabCourse that adds $50 to the course fee. Override the parent class display() method to indicate that the course is a lab course to display all the data. Write an application named UseCourse that prompts the user for information. If the user enters a class in any of the following departments, create a LabCourse: BIO, CHM, CIS, or PHY. If the user enters any other departments, create a CollegeCourse that does not include the lab fee. Then display the course data. Save the files as CollegeCourse.java, LabCourse.java, and UseCourse.java.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:23:20.073

This is quite different to your original implementation. But I believe it does what you want it to. There's probably a better way of implementing it, but I'm only implementing based on the information you've given me. Hope you understand it all...

UseCourse:

```
import javax.swing.JOptionPane;

public class UseCourse
{   
    public UseCourse()
    {
        CollegeCourse college;
        // Collect all the necessary data first to determine whether it is a lab course or not.
        String dept = JOptionPane.showInputDialog(null, "Enter Department");

        String courseNumString = JOptionPane.showInputDialog(null, "Enter Course Number");
        int courseNum = Integer.parseInt(courseNumString);

        String credString = JOptionPane.showInputDialog(null, "Enter Credits");
        int cred = Integer.parseInt(credString);

        // Now that we have the info we can ask the question.
        if (dept.equals("BIO") | dept.equals("CHM") | dept.equals("CIS") | dept.equals("PHY"))
        {college = new LabCourse(dept, courseNum, cred);}

        else {college = new LabCourse(dept, courseNum, cred);}
        college.display();
    }

    public static void main(String[] args) 
    {new UseCourse();}
} 
```

CollegeCourse:

```
import javax.swing.JOptionPane;
public class CollegeCourse {

protected String dept;
protected int courseNum;
protected int cred;
protected int fee;
protected int Charge = 120;
protected int labfee;

public CollegeCourse(String dept, int courseNum, int cred)
{
    this.dept = dept;
    this.courseNum = courseNum;
    this.cred = cred;
    fee = cred * Charge;
}

public void display(){

    JOptionPane.showMessageDialog(null, dept + courseNum + 
            "\nNon-lab Course" + "\n" + cred +" Credits" + "\nTotal fee is $" + fee);
 }
} 
```

LabCourse:

```
import javax.swing.JOptionPane;
public class LabCourse extends CollegeCourse 
{
    public LabCourse(String dept, int courseNum, int cred)
    {super(dept, courseNum, cred);}

    public void display()
    {
        fee += 50;
        JOptionPane.showMessageDialog(null, dept + courseNum + 
                "\nLab Course" + "\n" + cred +" Credits" + "\nTotal fee is $" + fee);
    }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:22:54.120

If you want to do this using inheritance then you should have same method name something like "displayCourse" in both CollegeCourse and LabCourse classes. Then based on the inputs by the user:

```
CollegeCourse c = null;
if (userSelectedCollegeCourse) {
c = new CollegeCourse(param1, ...);
}else{
c = new LabCourse(param1, ...);
}

c.displayCourse(); 
```

# qt - Qt、QML 和 Windows 8

> ID：13799802
> 
> 赞同：10
> 
> 时间：2012-12-10T11:10:57.757
> 
> 标签：qt, windows-8, qml

我一直对Qt框架引入的QML很好奇。但从来没有机会与它合作。但是现在随着 Windows 8 的到来，基于老派小部件的界面将会过时（只是我的看法！:)）。现在我想问那些对 QML 有一定经验的人：用 QML 编写 Metro 风格（或者现在如何称呼）应用程序容易吗？QML photoshop 插件可用于实际项目吗？

对于那些对 Photoshop 插件一无所知的人，请尝试在 youtube 中搜索：Introducing Qt Quick for Stunning UI Creation - Nokia Developer Day, Barcelona 2011（不确定，我是否可以在此处发布链接：P）

另外，我可以看看用 QML 编写的任何好的 Windows 应用程序吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T10:37:11.427

`is there any good Windows applications I can look, written in QML?`

浏览[GitHub 上流行的 Qml 存储库](https://github.com/trending/qml)以获得一个好主意。人们也在 QML 中实施[材料设计](https://github.com/papyros/qml-material)理念。如果我错了，请纠正我，但很多[Sailfish 的](https://sailfishos.org/design/ux-framework/)UI 也是在 QML 中完成的。事实上，操作系统的 SDK 是基于 Qt/QML 的。

我个人很喜欢[GCompris](http://gcompris.net/index-en.html)。他们从 GTK 迁移到 QML，并且已经能够在包括 Windows/Android/OSX 等在内的多个平台上运行他们的代码。

`is it easy to write Metro-style applications with QML?`

我个人会说 qml 非常有能力以一种非常直观和简单的方式开发流畅的“地铁式”UI。

您可以通过[此处](https://stackoverflow.com/questions/4347469/resources-to-learn-qml)提供的链接开始使用 QML。

您可以从[Qt Wiki](http://wiki.qt.io/Qt-5-on-Windows-8-and-Metro-UI)开始，[了解如何创建 Metro 风格应用程序](http://blog.qt.io/blog/2012/01/25/how-to-create-qt-applications-with-metro-style-2/)并阅读有关[在 Windows 8 上部署的信息](http://blog.qt.io/blog/2011/11/24/deploying-on-windows-8-tablets-with-qt-commercial-2/)。

`Is the QML photoshop plugin useable for real project?`

我没有使用过 Photoshop，但是[GIMP](http://qt.gitorious.org/qt-labs/gimp-qmlexporter)的那个（是的！GIMP 也存在，开源开发人员做了一些很好的工作！！！）。虽然它生成文件的方法可能不是很直观，但它仍然是处理单个文件（屏幕）的非常好的工具，当您的 UI 根本不会改变时。

它为像素提供硬编码值（例如： width : 45 ），而不是以依赖的方式编写它（例如 parent.width * .75 ），因此如果 UI 中有修改，您最终可能会修改很多。

就个人而言，我会说 qml 非常适合学习和玩乐。

并感谢海德的链接。

* * *

编辑：

还要通过这些：

1.  [用 qml 编写的显示 Metro 效果的视频](http://www.youtube.com/watch?v=cTEMkDZxpaw)

2.  [显示 qml 的 IVI 功能的视频](http://www.youtube.com/watch?v=EXDK5orGuFU)。只是为了让您了解 qml 在动画等方面的能力。

# iframe - 如何在 iframe 中的 Flowplayer 5.2 中启用全屏？

> ID：13799804
> 
> 赞同：0
> 
> 时间：2012-12-10T11:11:00.947
> 
> 标签：iframe, fullscreen, flowplayer

我正在使用 flowplayer 5.2 构建一个可嵌入的播放器，并注意到它在`iframe`. 那些其他大玩家`allowFullScreen`在他们的 iframe 代码中有，但 flowplayer 脚本看不到它，或者我不知道如何让它看到它。
这里有人想通了吗？
谢谢，
托马斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T11:21:15.930

知道了。flowplayer 设置`window == window.top`为全屏的默认设置，因此为了使其正常工作，您需要手动设置`flowplayer.conf.fullscreen = true;`

# jquery - 几次使用后 jQuery Rotate 滞后

> ID：13799813
> 
> 赞同：0
> 
> 时间：2012-12-10T11:11:37.687
> 
> 标签：jquery, html, css, rotation

我在我的网站上创建了一个类似指南针的功能，但它指向菜单项。我正在使用 jQuery 旋转插件。

但是，当我第一次加载该站点时，指南针可以完美运行，但经过几圈后，它开始跳过而不是流畅的动画。

每次转换完成后，我都会清除元素的队列，因为这似乎使它有点平滑，但它仍然会跳过。有谁知道这可能是什么原因？一旦我刷新页面，它就会再次正常工作。

编辑：对不起，代码当然会有所帮助。[http://sitetest.kdmdesign.net](http://sitetest.kdmdesign.net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:42:08.047

任何 jQuery 动画都会发生这种情况，其中动画触发器可以在短时间内连续触发大量次——使用 stop() 是一个很好的安全网，但通常还不够。

我会“限制”该事件以阻止它经常无法控制地触发。[Ben Alman 写了一篇关于节流的出色解释，](http://benalman.com/projects/jquery-throttle-debounce-plugin/)作为他同样出色的节流和去抖动[jQuery 插件的序言。](https://github.com/cowboy/jquery-throttle-debounce)

### 哦——*还有*……

您的代码特别慢的一个原因是，每次用户将鼠标悬停在内部页面包装器上时，事件处理程序都会重新附加（并且永远不会分离）。我在这里调整了：

[http://jsbin.com/welcome/59800/edit](http://jsbin.com/welcome/59800/edit)

# java - JProgressBar 垂直对齐文本和 Windows 样式

> ID：13799815
> 
> 赞同：0
> 
> 时间：2012-12-10T11:11:46.670
> 
> 标签：java, swing, jprogressbar

我有几个问题我找不到答案。

我创建了一个`JProgressBar`并设置了一个自定义字体：

```
JProgressbar progressBar = new JProgressBar();
progressBar.setFont(new Font(null, Font.ITALIC, 9)); 
```

在每个操作系统上，这会导致文本显示在进度条的顶部，而不是垂直居中。有没有办法指定 a 的 String`JProgressBar`应该垂直对齐？我在网上查了一下，没有找到任何东西。

另外，我注意到对于 a `JProgressBar`，如果您将外观设置为系统默认值而您**没有** `setStringPainted(true)`，那么在 Windows 系统上，它`progressBar`看起来就像系统默认值，这很好。**但是**，如果您`setStringPainted(true`)，`progressBar`则从 Windows 动画绿色变为基本的蓝色。有谁知道如何纠正这个？

# eclipse - 删除本地 git 仓库会影响远程仓库吗？

> ID：13799817
> 
> 赞同：2
> 
> 时间：2012-12-10T11:12:04.043
> 
> 标签：eclipse, git, egit, git-clone

我对我的电脑做了一个 git clone。之后我意识到我将项目克隆到了错误的目录。我现在要做的是从我的计算机中删除项目文件夹，然后 git clone 到另一个目录。

如果我只是删除文件夹，它会影响远程存储库吗？

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T11:19:42.120

您可以将目录移动到您真正想要的位置。移动或删除它不会影响远程存储库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T11:18:07.900

您可以在本地删除该文件夹，然后将其再次克隆到您要使用的目录。不会影响远程存储库。您也可以只移动文件夹，因为 .git 结构中没有绝对路径。

# jakarta-ee - Netbeans 7.1.2 - 无法添加 glassfish 服务器 3.1.2

> ID：13799825
> 
> 赞同：4
> 
> 时间：2012-12-10T11:12:36.160
> 
> 标签：jakarta-ee, glassfish-3, netbeans-7

[我从http://glassfish.java.net/downloads/3.1.2.2-final.html](http://glassfish.java.net/downloads/3.1.2.2-final.html)下载了 glassfish 服务器并单独安装。

现在我正在尝试在 Netbeans 中添加它。但它不起作用。我做了以下步骤

1.  以管理员身份打开 Netbeans
2.  打开工具 -> 服务器
3.  点击“添加服务器”按钮
4.  选择 GlassFish Server 3+
5.  指定名称为“GlassFish”
6.  选择安装文件夹位置 - C:\glassfish3

现在它显示错误“不是有效的 Glassfish 服务器安装”。

我是 Netbeans 和 Glassfish 的新手，现在不知道如何继续。我的 glassfish 服务器在 localhost:8181 成功运行

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T16:27:23.860

我遇到了同样的问题，并且能够按照此处找到的视频中所做的操作来解决它：http: [//happilyblogging.wordpress.com/2012/10/04/not-a-valid-glassfish-server-installation-网豆/](http://happilyblogging.wordpress.com/2012/10/04/not-a-valid-glassfish-server-installation-netbeans/)

本质上，您必须停止 gf3 服务器并将位于 \glassfish3\glassfish\lib\install\applications__admingui\WEB-INF\lib 中的 console-core-XXXjar 重命名为 console-core-3.1.2.jar

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T09:13:48.310

有一种更简单的解决方法。只需在 glassfish 安装中更改 jar 的名称 (c:\glassfish3\glassfish\lib\install\applications__admingui\WEB-INF\lib\console-core-3.1.2.jar) 那么我们的服务器 3.1.2.x 将是netbeans 将其识别为 3.1.2 版；-) 工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T11:41:30.923

1.  我卸载了当前安装的 Netbeans 和 Glassfish。
2.  打开[http://netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)，点击“全部”栏下的“下载”按钮（240MB）。下载exe文件并安装
3.  这安装了 Netbeans 和 Glassfish 作为一个包
4.  现在创建一个 Web 应用程序项目会自动在列表中显示 Glassfish 3.1.2。

问题解决了。

请注意，单独安装仍然不起作用。我仍然无法注册单独的 glassfish3 安装。我认为捆绑安装有一些修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:41:44.077

对于 Windows 7，我搜索了 GlassFish 路径（它与 NetBeans 一起安装）。我发现它在

C:\Program Files\glassfish-3.1.2.2\glassfish\lib\install\applications__admingui\WEB-INF\lib

上面帖子中的重命名没有帮助。

所以我从路径中删除了文件夹，直到我到达这个缩短的路径 C:\Program Files\glassfish-3.1.2.2\glassfish 下一个按钮变为活动状态，我可以安装 GlassFish。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-06T05:49:11.503

原因 `Not a valid Glassfish server Installation`可能是您可能没有提供正确的服务器（Glassfish/Tomcat）安装文件夹。将服务器添加到您的项目如下

转到服务选项卡，选择服务器，然后右键单击它。选择添加服务器。选择您的服务器（Glassfish）并为其命名，然后单击下一步。

在服务器位置中给出正确的安装位置`(in my pc,` `c:\Program Files\glassfish-3.1`）单击下一步。给你喜欢的域名。不要使用默认端口。留下目标名称、用户名、密码，然后单击完成。它将显示域创建成功。

参考：[在 netbeans 中创建服务器](http://netbeans.dzone.com/nb-class-glassfish-resources)

# android - StateList 为父视图工作，但不适用于子视图

> ID：13799840
> 
> 赞同：0
> 
> 时间：2012-12-10T11:13:45.130
> 
> 标签：android, user-interface

我在 android UI 中使用 StateList 来为视图的不同状态显示不同的可绘制对象。

这是代码。问题是当我`android:background="@drawable/state_list"`使用第一个 LinearLayout 时，它可以突出显示“按下”事件的状态。

但是，如果我将相同的 StateList 附加到 2nd LinearLayout，它就不起作用。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingBottom="5dp"
    android:background="@drawable/highlight_states">     // this WORKS!

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="horizontal"
        android:background="@drawable/highlight_states">    // this DOES NOT WORK.

        <ImageButton
            android:id="@+id/profile_call_button"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_gravity="center"
            android:background="@color/transparent"
            android:scaleType="fitCenter"
            android:src="@drawable/icon_phone_green" />
   </LinearLayout>
</LinearLayout> 
```

这是我正在使用的 StateList 的代码。`highlight_states.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/selected_textbox" /> <!-- pressed -->
    <item android:state_focused="true" android:drawable="@drawable/highlight_pressed" /> <!-- focused -->    
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T07:16:02.670

在子 LinearLayout 上设置

```
android:duplicateParentState="true" 
```

# php - 单元测试 Symfony2

> ID：13799841
> 
> 赞同：1
> 
> 时间：2012-12-10T11:13:49.627
> 
> 标签：php, symfony, phpunit, mockery

我正在尝试使用 Mockery 来对我的 sf2 函数进行单元测试。我正在为我的第一次尝试而苦苦挣扎。

首先尝试测试一个使用安全上下文的类：

```
public function setSecurityContext(SecurityContext $securityContext)
{
    $this->securityContext = $securityContext;
    try {
        $this->isLoggedIn = $securityContext->isGranted('IS_AUTHENTICATED_FULLY');
        $this->user = $securityContext->getToken()->getUser();
    } catch (\Exception $e) {
        $this->isLoggedIn = false;
        $this->user = $securityContext->getToken()->getUser();
    }
} 
```

我创建了一个这样的**testsetSecurityContext**函数：

```
public function testsetSecurityContext()
{
    /* @var $securityContext SecurityContext */
    $securityContext = m::mock('Symfony\Component\Security\Core\SecurityContext');

    $securityContext->shouldReceive('isGranted')
    ->with('IS_AUTHENTICATED_FULLY')
    ->once()
    ->andReturn(true);

    $factory = m::mock('Knp\Menu\FactoryInterface');

    $menu = new MenuBuilder($factory);

    $menu->setSecurityContext($securityContext);
} 
```

运行单元测试时，我收到错误：

> 测试集安全上下文
> 
> > Mockery\Exception：方法 isGranted 被标记为 final，并且无法生成定义了此类方法的模拟对象。您应该将此对象的实例传递给 Mockery 以创建部分模拟。

所以我相应地改变了我的测试功能：

```
public function testsetSecurityContext()
{
    /* @var $securityContext SecurityContext */
    $securityContext = m::mock(new \Symfony\Component\Security\Core\SecurityContext());
    /* ... skipped ... */
} 
```

现在我收到该错误：

> 测试集安全上下文
> 
> > ErrorException：可捕获的致命错误：传递给 Symfony\Component\Security\Core\SecurityContext::__construct() 的参数 1 必须实现接口**Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface**，没有给出，在 ..MenuBuilderTest.php 中调用第 91 行并在 ..Symfony\Component\Security\Core\SecurityContext.php 第 41 行中定义

所以我再次修改我的代码：

```
public function testsetSecurityContext()
{

    $auth = m::mock('Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface');

    /* @var $securityContext SecurityContext */
    $securityContext = m::mock(new \Symfony\Component\Security\Core\SecurityContext($auth));

    /* ... skipped ... */

} 
```

我得到另一个错误：

> 测试集安全上下文
> 
> > ErrorException：可捕获的致命错误：传递给 Symfony\Component\Security\Core\SecurityContext::__construct() 的参数 2 必须实现接口**Symfony\Component\Security\Core\Authorization\AccessDecisionManagerInterface**，没有给出，在 ...\MenuBuilderTest 中调用。 php 在第 94 行并在 ...\Symfony\Component\Security\Core\SecurityContext.php 第 41 行中定义

我最终得到：

```
public function testsetSecurityContext()
{

    $am = m::mock('Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface');
    $adm = m::mock('Symfony\Component\Security\Core\Authorization\AccessDecisionManagerInterface');

    /* @var $securityContext SecurityContext */
    $securityContext = m::mock(new \Symfony\Component\Security\Core\SecurityContext($am, $adm));

    $securityContext->shouldReceive('isGranted')
    ->with('IS_AUTHENTICATED_FULLY')
    ->once()
    ->andReturn(true);

    $factory = m::mock('Knp\Menu\FactoryInterface');

    $menu = new MenuBuilder($factory);

    $menu->setSecurityContext($securityContext);
} 
```

这仍然不行，因为我得到了那个错误：

> 测试集安全上下文
> 
> > ErrorException：可捕获的致命错误：参数 1 传递给 Atos\Worldline\Fm\Integration\Ucs\EventFlowAnalyser\Menu\MenuBuilder::setSecurityContext() 必须是**Symfony\Component\Security\Core\SecurityContext**的实例，给定的**Mockery_50c5c1e0e68d2**实例，在第 106 行的 ..\MenuBuilderTest.php 中调用并在 ..\MenuBuilder.php 第 140 行中定义

在我结束 100 行测试以测试 8 行功能之前，我真的很感激一些帮助......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T14:29:35.103

与其模拟实例，不如选择它实现的接口。它几乎总是工作得更好，而且 Symfony2 中的几乎所有东西都有明确定义的接口。

如果 MenuBuilder 是一个自定义类，它也应该使用接口而不是实际的实现。

Symfony\Component\Security\Core\SecurityContextInterface

```
public function testsetSecurityContext()
{
    /* @var $securityContext SecurityContext */
    $securityContext = m::mock('Symfony\Component\Security\Core\SecurityContextInterface');

    $securityContext->shouldReceive('isGranted')
    ->with('IS_AUTHENTICATED_FULLY')
    ->once()
    ->andReturn(true);

    $factory = m::mock('Knp\Menu\FactoryInterface');

    $menu = new MenuBuilder($factory);

    $menu->setSecurityContext($securityContext);
} 
```

# php - 保护通过 PHP 上传到服务器的文件

> ID：13799843
> 
> 赞同：2
> 
> 时间：2012-12-10T11:13:59.830
> 
> 标签：php, file-upload

我正在构建一个有助于上传文件的应用程序。应用程序将有一个案例，其中文件分配给案例，用户分配给案例。只有登录的用户才能访问整个应用程序。

现在我的想法是为每个案例创建一个文件夹结构。文件显然只能通过脚本提供，因此不能公开下载。这些文件可能具有各种内容，主要是因为它是基于取证的应用程序。

我唯一的问题是我想知道是否可以阻止对这些上传文件的本地访问。例如，阻止某人访问托管它的服务器并修改文件或仅访问文件。我可以加密文件并将密钥存储在数据库中吗？我知道如果数据库被控制了，那么加密就没用了？

有没有更好的方法来实现这个功能？有人对如何实现这一点有任何反馈吗？

我有一个使用 Zend Framework 2 构建的基础应用程序，但我正在撰写一篇研究论文，我在这里做出的决定将极大地影响我的研究。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:17:42.620

正如您所说，可以加密文件，但最好首先防止访问服务器。一旦他们入侵了您的 Web 服务器，是什么让您认为他们无法入侵您的数据库？

此外，如果他们获得对网络服务器的访问权限，他们就可以访问为加密文件提供服务的脚本。由于该脚本已经具有解密文件的功能，因此获得访问权限将是小菜一碟。

长话短说：保护网络服务器本身。

# python - PyCharm 没有正确执行 `django-manage.py`

> ID：13799844
> 
> 赞同：3
> 
> 时间：2012-12-10T11:14:02.023
> 
> 标签：python, django, pycharm

控制台说：

![pycharm控制台](../Images/03d1f0a43d15f8730fa3d41c5aa786e3.png)

但是，如果我在中执行命令`cmd`，就可以了，比如

![命令](../Images/2034e9b473f3c5e7411ab7603b7e7c0e.png)

我猜配置有一些问题，但我不知道在哪里。我的文件结构是这样的：

![文件](../Images/58d019b543818cb9bdb851ddb7dbb2b1.png)

配置如下：

![运行配置](../Images/4229029c49a458a5c7efcbf687e85b38.png)

还有这个：

![django 配置](../Images/a8c8c78e4466c5e08160cac71d543949.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:27:08.040

`PYTHONPATH`在较旧的 PyCharm 版本中生成存在一个已知问题。PyCharm 2.6.3 及更高版本应该可以正常工作。

# forms - 如何更改 silex 表单工厂名称属性

> ID：13799845
> 
> 赞同：0
> 
> 时间：2012-12-10T11:14:01.803
> 
> 标签：forms, symfony, input, silex

如何更改使用表单工厂创建的表单中输入的默认名称属性？

这是我正在使用的简单形式的示例：

```
$form = $app['form.factory']->createBuilder('form')
   ->add('image','file)
   ->add('longitude', 'hidden')
   ->add('latitude', 'hidden')
   ->getForm(); 
```

我曾尝试将属性放入数组而没有成功更改名称，尽管使用这种方法我可以更改标签或类等：

```
->add('latitude', 'text', array('attr'=>array("name"=>'newname'))) 
```

能够更改输入的名称似乎是一个非常简单的请求，因此您会认为有一种明显的方法可以做到这一点。使用上面的代码，它仍然会显示名称为`name=form[latitude]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:57:11.640

使用 createNamedBuilder 而不是 createBuilder 来覆盖字段名称。该名称将是 add 函数中的第一个参数。

```
$personal_form = $app['form.factory']->createNamedBuilder(null, 'form')
        ->add('name', 'text', array(
            'label' => 'Nombre',
            'data' => 'Nombre'
        ))
        ->add('surname', 'text', array(
            'label' => 'Apellidos',
            'data' => 'Apellidos'
        ))
        ->add('email', 'email', array(
            'label' => 'E-mail',
            'data' => 'E-mail'
        ))
        ->getForm(); 
```

# asp.net - asp.net 4 在远程 sqlserver 上存储会话状态

> ID：13799849
> 
> 赞同：1
> 
> 时间：2012-12-10T11:14:24.353
> 
> 标签：asp.net

我试图找到一个完整的教程，它将向我展示如何配置我的 asp.net 4.0 应用程序以在远程 sqlserver 2005 db 上存储会话

谁能帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:22:37.987

您需要采取的步骤。

1.  使用 SQL 服务器设置远程服务器
2.  在远程服务器上运行创建会话数据库的 asp.net 脚本
3.  您允许在 sql 上来自其他计算机的远程服务器连接，并且您还添加了允许该连接的防火墙规则。
4.  最后，您在 web.config 上设置远程服务器上的连接。

Web 配置必须包含以下连接：

```
<connectionStrings>
    <add name="SqlState" connectionString="Data Source=111.111.111.111;DataBase=SessionState;User ID=sa;Password=***" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

和

```
<sessionState mode="SQLServer" sqlConnectionString="SqlState" allowCustomSqlDatabase="true" cookieless="false" timeout="20" /> 
```

**如何**在远程计算机上设置会话状态：http:
[//msdn.microsoft.com/en-us/library/ms229862 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms229862(VS.80).aspx)

[http://blogs.msdn.com/b/akshayns/archive/2008/10/04/how-to-configure-sql-server-to-store-a-session-state.aspx](http://blogs.msdn.com/b/akshayns/archive/2008/10/04/how-to-configure-sql-server-to-store-a-session-state.aspx)

[http://support.microsoft.com/kb/317604](http://support.microsoft.com/kb/317604)

# zodb - Grok 和 ZODB 的业务应用程序

> ID：13799854
> 
> 赞同：0
> 
> 时间：2012-12-10T11:14:33.603
> 
> 标签：zodb, grok

*免责声明：我是 Grok 的新手。*

我一直在考虑使用 Grok 和 ZODB 编写业务应用程序（如会计/销售/工资单）。
如您所知，业务应用程序

1.  做了很多 INSERT。
2.  通常对大量数据执行大量 SELECT。
3.  对数据运行临时查询（又名报告）。

现在我想知道 ZODB 是否可以满足这些要求。我敢肯定（1）是小菜一碟，但我对（2）和（3）一无所知。

你们这些对 ZODB（和 Grok）有经验的人对此有何看法？我真的很感激任何提示/想法。

TIA,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:27:50.387

在这篇文章（[http://www.coactivate.org/projects/topp-engineering/blog/2009/03/20/to-zodb-or-not-to-zodb](http://www.coactivate.org/projects/topp-engineering/blog/2009/03/20/to-zodb-or-not-to-zodb)）中，作者提出了两个特征（缺点？）佐德布：

*   没有临时查询。
*   迁移既不方便又昂贵。

ZODB 非常有趣，但恕我直言，主要缺点是数据依赖于原始代码。

Grok 是一个很好的框架，但也许你可以看看 Pyramid (www.pylonsproject.org)，它还支持遍历和 ZODB，具有更多社区的优势。

# android - 带有 html 表格的 TextView

> ID：13799856
> 
> 赞同：12
> 
> 时间：2012-12-10T11:14:45.587
> 
> 标签：android

我有个问题。我想放入“TextView”html 格式的文本。我在下面添加类似内容。

```
<string name="text"><![CDATA[<table><tr><th bgcolor= #FF0000>some text</th></tr> <tr><td bgcolor= #FF0000> some text</td></tr>]]></string> 
```

并将其放入 TextView 为：

```
mInfoText.setText(Html.fromHtml(getString(R.string.text))); 
```

但运行应用程序后，TextView 中显示的文本未格式化。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T11:16:15.110

Android TextView 不支持 Table 标签，这就是您无法以格式化方式看到它的原因。为此，您必须使用 WebView。

要知道支持的标签是什么，请检查这个[Html List 标签在 android textview 中不起作用。我能做些什么？](https://stackoverflow.com/q/3150400/603744)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-12T06:55:54.723

尝试使用 WebView

```
String html = "<table><tr><th>text1</th></tr><tr><td>text2</td></tr></table>";
webView.loadDataWithBaseURL(null, html, "text/html", "utf-8", null); 
```

# css - 如何阻止页面上的内容移动？

> ID：13799859
> 
> 赞同：0
> 
> 时间：2012-12-10T11:14:49.933
> 
> 标签：css

我创建了一个动画导航栏。

代码是：

```
#nav ul li a:hover{
    color: #000033;
    background-color:#bcbceb;
    width: 200px;
    border-radius: 0 1em 1em 0;       
    transition-property: width, color, background-color;
    transition-duration: 0.5s, 0.5s, 0.5s;
    transition-timing-function: linear, ease-in, ease in; 
    -moz-transition-property: width, color, background-color;
    -moz-transition-duration:  0.5s, 0.5s, 0.5s;
    -moz-transition-timing-function: linear, ease-in, ease in; 
    -webkit-transition-property: width, color, background-color;
    -webkit-transition-duration:  0.5s, 0.5s, 0.5s;
    -webkit-transition-timing-function: linear, ease-in, ease in; 
} 
```

这是在页面的左侧。当每个导航链接向右移动时，它会将我在右侧的任何内容向右移动，而不是处于固定位置。我试过位置：固定；但它似乎不起作用。

这是HTML

```
<ul>
    <li><h3><a href="index.html">Home</a></h3></li>
    <li><h3><a href="construction.html">Construction</a></h3></li>
    <li><h3><a href="it.html">I T Dept</a></h3></li>
    <li><h3><a href="web.html">Websites</a></h3></li>
    <li><h3><a href="cf.html">Company Forms</a></h3></li>
    <li><h3><a href="smf.html">Site Management Forms</a></h3></li>
    <li><h3><a href="phonebook.html">Phone Book</a></h3></li>
</ul>​ 
```

[`jsFiddle`](http://jsfiddle.net/4BRMC/)

```
#content 
{
    position: absolute;
    border: 1px solid #000033;
    padding:50px;
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:11:20.067

尝试将 position:relative 添加到您的 div 属性，然后添加位置，例如。上：10px 或左 10px，取决于你想要它在哪里，你也可以使用“底部”属性来定位它..

# continuous-integration - 解析 $() 变量

> ID：13799865
> 
> 赞同：1
> 
> 时间：2012-12-10T11:15:07.783
> 
> 标签：continuous-integration, workflow-foundation, tfsbuild

我正在使用 .proj 文件和 Powershell 脚本将持续集成项目从 TFS 2008 迁移到带有 Workflow Foundation 的 TFS 2012，我对 WF 对以 $() 开头的变量的解释有疑问，例如 $(solutionDir ), $(buildDir), ... 在 TFS 配置和 TFS 2008 脚本中非常常用。

每次，我尝试使用像它们这样的变量作为变量或参数来避免硬编码路径并使用 WriteBuildMessage 活动打印结果，我得到了一个带有未解析变量的字符串，而不是想要的路径。

我尝试调用 ExpendEnvironnementVariable 活动，toString 方法，分配给不同的变量，但没有。

如何在工作流模板或代码活动中获取这些变量的完整路径结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:35:38.483

您需要将 WF 环境变量传递给您的活动

```
BuildDirectory="[BuildDirectory]" 
```

然后在您的工作流代码中将它们作为 InArgument 读取

```
public InArgument<String> BuildDirectory { get; set; } 
```

# typo3 - TYPO3 - 在特定 uid 下写出页面的子页面

> ID：13799879
> 
> 赞同：0
> 
> 时间：2012-12-10T11:16:04.600
> 
> 标签：typo3, typoscript

所以我有一些看起来像这样的东西：

* * *

```
## Menu [Begin]

lib.menuindoor = HMENU
lib.menuindoor.entryLevel = 0
lib.menuindoor.wrap =        <li class="menu-item">|</li>     
lib.menuindoor.1 = TMENU
lib.menuindoor.1.NO {   
  allWrap = |
}

lib.menuindoor = HMENU
lib.menuindoor.entryLevel = 1
lib.menuindoor.wrap = <ul>|</ul>
lib.menuindoor.1 = TMENU
lib.menuindoor.1.NO {
  allWrap = <li>|</li>
}
## Menu [End] 
```

我现在想做的事情是只写出某个页面的子页面，

说我有

```
Indoor(with id=63)
      subpage
      subpage
      subpage

Outdor (with id=67)
       subpage
       subpage
       subpage 
```

所以在这里我只想写出 id=63 的子页面的页面。

我尝试使用它，但它没有用：

```
lib.menuindoor.special = directory
lib.menuindoor.special.value = 63 
```

任何提示如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:26:44.420

使用`.special = directory`是实现您想要实现的目标的正确方法。无论如何，在使用任何`special`菜单时，您都不应该定义 a `entryLevel`，因为它可能优先于您的设置（检查[特殊菜单属性](http://wiki.typo3.org/TSref/HMENU)）

# python - python fileinput模块中的“input（）已经激活”是什么意思？

> ID：13799880
> 
> 赞同：3
> 
> 时间：2012-12-10T11:16:09.270
> 
> 标签：python, file, input

我正在尝试读取 text.txt 文件中的第二行：

```
import fileinput

x = 0
for line in fileinput.input([os.path.expandvars("$MYPATH/text.txt")]):
        if x < 3:
            x += 1
            if x == 2:
                mydate = line
fileinput.close()
print "mydate : ", mydate 
```

但我收到一个错误：

```
Traceback (most recent call last):
  File "/tmp/tmpT8RvF_.py", line 4, in <module>
    for line in fileinput.input([os.path.expandvars("$MYPATH/text.txt")]):
  File "/usr/lib64/python2.6/fileinput.py", line 102, in input
    raise RuntimeError, "input() already active"
RuntimeError: input() already active 
```

上面有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T11:29:22.883

要从`fileinput.input()`可迭代中获取第二行，只需调用`.next()`两次：

```
finput = fileinput.input([os.path.expandvars("$MYPATH/text.txt")])
finput.next()  # skip first line
mydate = finput.next()  # store second line. 
```

您还可以使用该[`itertools.islice()`函数](http://docs.python.org/2/library/itertools.html#itertools.islice)仅选择第二行：

```
import itertools

finput = fileinput.input([os.path.expandvars("$MYPATH/text.txt")])
mydate = itertools.islice(finput.next(), 1, 2).next()  # store second line. 
```

这两种方法都确保从输入中读取的行不超过两行。

该`.input()`函数返回一个全局单例对象，其他函数对其进行操作。*您一次*只能运行*一个* `fileinput.input()`实例。确保在打开新对象之前调用过。*`fileinput.close()``input()`*

 *您应该使用`fileinput.FileInput()`该类来创建多个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:46:36.173

蟒蛇的方式是：

```
with open('text.txt', 'r') as file:
    file.next() #as Martjin stated in his response, skips 1st line
    mydate = file.next() 
```

在此示例中，仅从文件中读取 2 行，并自动关闭。

对于您的确切问题：我的 python 是 Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 并且它不会为您的示例引发该错误。该错误会出现因为您没有消耗所有重新打开输入之前的行。*

# php - 插入中的 SQL 语法

> ID：13799881
> 
> 赞同：0
> 
> 时间：2012-12-10T11:16:11.217
> 
> 标签：php, mysql, sql

我写了这段代码：

```
mysql_query("INSERT INTO test (user_id, word_id, right) VALUES ('6', '23', '5' )") or die(mysql_error()); 
```

但是有错误信息提示：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'right) VALUES ('6', '23', '5' )' 附近使用正确的语法

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:17:01.240

`right`是一个[**保留字**](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，像这样转义它：

```
INSERT INTO test (user_id, word_id, `right`) VALUES ('6', '23', '5' ) 
```

**请注意：**¹

> 不鼓励使用此扩展（mysql_query）。相反， 应该使用[MySQLi](http://php.net/manual/en/book.mysqli.php) 或[PDO_MySQL扩展。](http://php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://php.net/manual/en/mysqlinfo.api.choosing.php) 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> ```
> mysqli_query()
> PDO::query() 
> ```

* * *

^(1：^(引用自[**PHP 手册：mysql_query**](http://php.net/manual/en/function.mysql-query.php)))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:17:18.937

`right`是保留关键字[`9.3\. Reserved Words`](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)当我们使用保留关键字时，我们需要对其进行转义尝试

```
mysql_query("INSERT INTO test (user_id, word_id, `right`) VALUES ('6', '23', '5' )") or die(mysql_error()); 
```

![在此处输入图像描述](../Images/6a64d91c65930c15f0d66afec6682ef1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:18:23.743

试试这个 :::`RIGHT`是已知关键字，试试反引号

```
INSERT INTO test (`user_id`, `word_id`, `right`) VALUES ('6', '23', '5' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T11:38:12.677

```
INSERT INTO `test` (`user_id`, `word_id`, `right`) VALUES ('6', '23', '5' ) 
```

# facebook-javascript-sdk - 如何正确地将 Facebook JavaScript SDK 注入 AngularJS 控制器？

> ID：13799887
> 
> 赞同：17
> 
> 时间：2012-12-10T11:16:31.417
> 
> 标签：facebook-javascript-sdk, angularjs

我是 AnuglarJS 的新手，并且已经用它构建了一个小型网络应用程序，我想将 Facebook JavaScript SDK 与它一起使用，但使用最佳实践（依赖注入到控制器，以维护应用程序结构和可测试性）。

我发现了这个[https://groups.google.com/forum/#!msg/angular/bAVx58yJyLE/Kz56Rw-cQREJ](https://groups.google.com/forum/#!msg/angular/bAVx58yJyLE/Kz56Rw-cQREJ) 但对于这个框架的新手来说非常混乱（模块、服务和工厂没有很好地解释恕我直言）。

那么，在 AngularJS 应用程序中使用 Facebook SDK 的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T16:26:39.963

我实际上不得不这样做......我没有代码，无论如何它可能是专有的......但它本质上是这样的：

```
// create a simple factory:    
app.factory('facebook', ['$window', function($window) {

    //get FB from the global (window) variable.
    var FB = $window.FB;

    // gripe if it's not there.
    if(!FB) throw new Error('Facebook not loaded');

    //make sure FB is initialized.
    FB.init({
       appId : 'YOUR_APP_ID'
    });

    return {
        // a me function
        me: function(callback) {
            FB.api('/me', callback);
        }

        //TODO: Add any other functions you need here, login() for example.
    }
}]);

// then you can use it like so:
app.controller('SomeCtrl', function($scope, facebook) {

    //something to call on a click.
    $scope.testMe = function() {

       //call our service function.
       facebook.me(function(data) {
          $scope.facebookUser = data;

          //probably need to $apply() this when it returns.
          // since it's async.
          $scope.$apply();
       });
    };
}); 
```

如果其中有任何错误，请告诉我，我会查找我拥有的工作代码，看看我错过了什么。但这应该是关于它的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-21T04:43:01.120

**2015 年编辑！**

这是一个古老的答案。我建议你看看 github 上流行的 angular-modules 是如何做到的，或者干脆使用它们：

*   [https://github.com/Ciul/angular-facebook](https://github.com/Ciul/angular-facebook)
*   [https://github.com/pc035860/angular-easyfb](https://github.com/pc035860/angular-easyfb)
*   [https://github.com/GoDisco/ngFacebook](https://github.com/GoDisco/ngFacebook)

**旧答案**

由于应用程序启动时的调用问题，我使用以下方法，仅在加载 SDK 后加载应用程序：

```
window.fbAsyncInit = function () {
FB.init({
    appId: window.fbConfig.appID,
    channelUrl: '//' + window.location.hostname + window.location.pathname + 'channel.php',
    status: window.fbConfig.oInitOptions.bStatus || true,
    cookie: window.fbConfig.oInitOptions.bCookie || true,
    xfbml: window.fbConfig.oInitOptions.bXfbml || true
});

// Get Login Status once at init
window.FB.getLoginStatus(function (oResponse) {
    if (oResponse && oResponse.status) {
        window.fbConfig.sAuthStatus = oResponse.status;
    }

    // Bootstrap app here only after the sdk has been loaded
    angular.bootstrap(document.body, ['fbAngularApp']);
});
};

// Load the SDK Asynchronously
(function (d) {
var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
if (d.getElementById(id)) {
    return;
}
js = d.createElement('script');
js.id = id;
js.async = true;
js.src = '//connect.facebook.net/' + window.fbConfig.lng + '/all.js';
ref.parentNode.insertBefore(js, ref);
}(document)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-18T17:11:34.767

我已经编写了这个 angularjs-facebook 服务。首先，您在您的应用程序模块配置方法中对其进行初始化，以初始化您的 facebook 应用程序 ID 和其他设置。

然后您就可以享受从控制器调用 Facebook 服务并像往常一样异步调用 Facebook 方法了。

[https://github.com/ciul/angularjs-facebook](https://github.com/ciul/angularjs-facebook)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T13:57:24.583

唯一可行的方法是以旧方式在索引页面中包含 sdk。

因为我已经从@blesh 实现了相同的解决方案，或者从@elviejo 实现了扩展版本，如果我们有一个在调用控制器时调用的函数，它们都有一个问题，`FB`未初始化的机会非常高，这将使从`undefined`:)调用函数时调用失败

希望这将有助于其他人避免头痛。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-07T13:32:14.650

我被这个问题难住了一段时间，我用 $watch 解决了这个问题

```
//setup watch for FB API to be ready
//note that since you use $window, you need to inject it into your controller
//angular.module('myApp').controller('appController', function ($scope, $window, ...) {
$scope.FBListener = $scope.$watch(function () {
  return $window.FB;
}, function (newVal, oldVal) {
  // FB API loaded, make calls
  console.log("FB is ready");
  //functions that do FB API calls
  $scope.getFBEvents();
  $scope.getFBPosts();
}); 
```

加载 FB 后，您可以通过调用清除 $watch （这可能是最好的性能）`$scope.FBListener();`

# html - 在 html 中添加星号

> ID：13799888
> 
> 赞同：1
> 
> 时间：2012-12-10T11:16:33.477
> 
> 标签：html, web

我想在我的 html 页面中添加星号。"#x2605;" 我知道这是用于纯星符号的。但颜色为黑色。我需要红色的星。我怎样才能做到这一点。帮我..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T11:18:54.173

html:

```
<span class="red-star">★&lt;/span> 
```

CSS：

```
.red-star {
    color: red;
} 
```

字体标签在 html5 中已贬值。见[http://www.w3.org/TR/html4/present/graphics.html#h-15.2.2](http://www.w3.org/TR/html4/present/graphics.html#h-15.2.2)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-05T11:57:42.300

HTML：

```
<span>Date of Birth <sup class="star">*</sup> </span> 
```

CSS：

```
.star{
color:red;
} 
```

sup 标签定义了在法线上方半个字符出现的上标文本。所以星号会出现在正常文本标签上方一点点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T11:19:08.640

那颗星只是一个和其他人一样的角色。唯一的区别是您对这个字符使用 unicode 表示法。以类似的方式，您可以`&65;`为大写字母写作`A`。

无论如何，您可以像使用任何其他文本一样设置它的样式，例如使用 CSS：

在 HTML 中：

```
<span class="star">&#x2605;</span> 
```

在 CSS 中：

```
.star {
   color: red; /* Make it red */
   font-size: 200%; /* Make it twice as large */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-20T09:27:24.883

在 CSS 中：

```
.star{
color:red;
} 
```

在 HTML 中：

```
<span class="star">*</span 
```

注意：对于★：在浏览器中不是★，而是显示â。如果我们提供 Unicode，那么我们会在单词或短语旁边加上星号，但实际上我们通常会将其保留在单词或短语的上方，以便将字段提及为必填项。

# c# - 通过反射从动态中检索属性信息

> ID：13799891
> 
> 赞同：1
> 
> 时间：2012-12-10T11:16:48.507
> 
> 标签：c#, wpf, .net-4.0

**补充：**我想做的事。我有一些东西，例如 DataReader，我想从中创建 IEnumerable 的对象，其成员与 DataReader 中一样。因此，在设计和编译时，我不知道动态对象中有多少属性（取决于 DataReader 中包含多少列）及其名称。而且我需要创建具有正确名称和值的属性的动态匿名对象，以便将来通过反射获得这些属性......

我想到了 DynamicObject，这就是我所做的：

我有 DynamicObject 类：

```
using System.Collections.Generic;
using System.Dynamic;
using System.Linq;

namespace makarov.ReportManager.InternalLogic
{
public class DataReaderParcer : DynamicObject
{
    private readonly Dictionary<string, object> m_properties;

    public DataReaderParcer()
    {
        m_properties = new Dictionary<string, object>();
    }

    public bool SetMember(string name, object value)
    {
        if (m_properties.ContainsKey(name))
            m_properties.Remove(name);
        m_properties.Add(name, value);
        return true;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        return SetMember(binder.Name, value);
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = null;
        if (m_properties.ContainsKey(binder.Name))
            result = m_properties[binder.Name];
        return m_properties.ContainsKey(binder.Name);
    }

    public override IEnumerable<string> GetDynamicMemberNames()
    {
        return from p in m_properties select p.Key;
    }
} 
```

}

这是用法：

```
 dynamic dd = new DataReaderParcer();
        dd.MyMember= 3;
        dd.YourMember= "hello"; 
```

如何在另一种方法中使用反射检索此对象的 PropertyInfo[]？像这样的东西`dd.GetType().GetProperties()`不能正常工作，因为 DataReaderParcer 没有任何属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:27:31.070

您是从 DynamicObject 派生的，因此您可以调用 GetDynamicMemberNames 来获取您的成员的枚举。

[http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.getdynamicmembernames.aspx](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.getdynamicmembernames.aspx)

```
dynamic dd = new DataReaderParcer();
IEnumerable<string> members = dd.GetDynamicMemberNames(); 
```

# python - SQLite Python 中的变量替换

> ID：13799901
> 
> 赞同：3
> 
> 时间：2012-12-10T11:17:38.030
> 
> 标签：python, sqlite

我有以下 Python 代码，当我执行它时它给了我错误，错误说

> sqlite3.OperationalError：靠近“％”：语法错误

```
statement = "INSERT INTO %s (%s) VALUES " % (table,columns) + "(%s,%s,%s);"
cur.execute(statement, (index,fullpath,filename)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:29:46.233

SQL 参数由数据库处理，而不是 Python，因此语法不一定与 Python 相同。

在 SQLite（和大多数其他数据库）中，参数用 标记`?`：

```
statement = "INSERT INTO %s (%s) VALUES (?,?,?);" % (table,columns)
cur.execute(statement, (index,fullpath,filename)) 
```

# javascript - 如何从javascript中的超链接图像div中提取href =中的值以及标题和描述值？

> ID：13799902
> 
> 赞同：0
> 
> 时间：2012-12-10T11:17:38.203
> 
> 标签：javascript

我得到一个 HTML 字符串作为 (var code); 我想提取所有 sid=(example:12345) 内的值 href 和 title（例如：明星专辑）和剧集编号（例如：第 4 集），但我想知道如何在 JavaScript 中做到这一点并拥有所有 sid、title和数组中的剧集编号值，以便我可以构建超链接？

注意：$code 的初始值是 div 块，如下例所示：

```
<td width=120 valign="top">                     <div style="height:135px;
    border:1px solid #BBBBBB; background:#BBBBBB; margin-left:2px;
    text-align:center; ">
                    <a href="/now/episodes.php?name=path&id=4000&sid=12345&page=0"><img
    border="0" src="http://www.somesite.com/1234.jpg" width="150"
    height="83"></a><br>
                        <font face="Tahoma" size="2"><b>Star Album</b><br/>
                            episode 4
                        </font>             </div>

        </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:49:36.757

希望这会有所帮助： [演示](http://jsbin.com/enolak/1/)

```
var code = '<td width=120 valign="top"><div style="height:135px;border:1px solid #BBBBBB; background:#BBBBBB; margin-left:2px;text-align:center;"><a href="/now/episodes.php?name=path&id=4000&sid=12345&page=0"><img border="0" src="http://www.somesite.com/1234.jpg" width="150" height="83"></a><br><font face="Tahoma" size="2"><b>Star Album</b><br/>episode 4</font></div></td>';
function getDetails(html){
    var div = $('<div></div>')
    div.html(html);
    var count=0;
    var arr = [];
    div.find('a').each(function(){
        var href = $(this).attr('href');
        href = href.substring(href.indexOf('sid=')+4, href.indexOf('&page='));

        var title = $(this).parent().find('b').eq(count++).text();
        arr.push({"sid" : href , "title": title});
    });
    return arr;
}

console.log(getDetails(code)); 
```

# objective-c - iOS 5 屏幕尺寸不使用 default-568@2x.png

> ID：13799903
> 
> 赞同：2
> 
> 时间：2012-12-10T11:17:40.100
> 
> 标签：objective-c, ios, cocoa

我使用的是 iOS 6，并将部署目标设置为 5.0。但是Appstore不允许使用低于6的iOS版本的default-568@2x.png。有没有什么办法可以在不使用默认图像的情况下处理4英寸屏幕的屏幕尺寸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:24:41.057

为了能够在 iPhone 5 上以 4 英寸大小开始，您必须添加 Default-568@2x.png 初始屏幕并使用 iOS 6 SDK 进行编译。

当然，当您使用 iOS 6 SDK 作为基础 SDK 构建应用程序时，您仍然可以使用 5.0+ 的部署目标（部署目标和基础 SDK 是两个不同的东西，使用 iOS 6 SDK，您可以针对 iOS 4.3+ )

如果您添加 iPhone 5 启动屏幕并且您使用 iOS 5 SDK 作为基础 SDK，您的应用程序将被拒绝。

一个简短的提示：尝试使用最新的 Xcode 版本创建一个新项目，您会发现一个基本的 Default-568@2x.png 黑色启动画面，这将允许您从 iPhone 5 的屏幕尺寸开始而无需艺术品。

# mysql - 使用 INSERT ... SELECT 将数据类型从 unix 时间戳更改为 mysql 日期时间

> ID：13799905
> 
> 赞同：0
> 
> 时间：2012-12-10T11:17:39.390
> 
> 标签：mysql

我必须修复一个将日期和时间存储为 unix 时间戳的表。我想将当前格式转换为 mysql datetime 类型，同时暂时保留原始列。（在运行系统上工作，有点像心脏直视手术）。

我已经制作了当前表的副本，并希望使用 FROM_UNIXTIMESTAMP 将原始表中的值插入到匹配的行中。我的陈述可能在正确的轨道上，但我无法让它发挥作用。

```
INSERT INTO signup (add_time) SELECT FROM_UNIXTIME(addtime) FROM signup_backup WHERE signup.UID = signup_backup.UID; 
```

这是我目前的方法，但我得到未知列，我知道为什么，但我不知道如何修复语句的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:22:01.637

为什么使用 INSERT？我想你应该使用更新：

```
UPDATE signup LEFT JOIN signup_backup ON signup.UID= signup_backup.UID
SET signup.add_time = FROM_UNIXTIME(signup_backup.addtime) 
```

# android - 使用自定义 ArrayAdapter 时如何在布局中添加文本字段？

> ID：13799906
> 
> 赞同：1
> 
> 时间：2012-12-10T11:17:40.630
> 
> 标签：android, android-layout, android-arrayadapter

我正在创建一个聊天应用程序。我必须为发送短信创建一个字段。但是当我插入 textField 时，它是这样的，

![屏幕截图](../Images/726040c5766ff8a1dc58cfcefebbde3d.png)

这是我的布局文件

> ```
> <?xml version="1.0" encoding="utf-8"?>
>    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     android:id="@+id/RelativeLayout1"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:orientation="vertical"
>     android:padding="5dp" >
> <ImageView
>     android:id="@+id/logo"
>     android:layout_width="50px"
>     android:layout_height="50px"
>     android:layout_alignParentLeft="true"
>     android:layout_alignParentTop="true"
>     android:src="@drawable/windowsmobile_logo" />
> <TextView
>     android:id="@+id/label"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignBottom="@+id/logo"
>     android:layout_toRightOf="@+id/logo"
>     android:text="@+id/label"
>     android:textSize="30px" />
> </RelativeLayout> 
> ```

这是我的自定义适配器

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.list_mobile, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
    textView.setText(values[position]);

    // Change icon based on name
    String s = values[position];

    System.out.println(s);

    if (s.equals("WindowsMobile")) {
        imageView.setImageResource(R.drawable.windowsmobile_logo);
    } else if (s.equals("iOS")) {
        imageView.setImageResource(R.drawable.ios_logo);
    } else if (s.equals("Blackberry")) {
        imageView.setImageResource(R.drawable.blackberry_logo);
    } else {
        imageView.setImageResource(R.drawable.android_logo);
    }

    return rowView;
} 
```

我在 [这个网站上有这个例子](http://www.mkyong.com/android/android-listview-example/)

希望你能理解我的问题！任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:53:37.167

得到解决方案..知道我有多傻..只需在相对布局中创建一个 Listview 并将适配器链接到它！例子

```
mainListView = (ListView) findViewById( R.id.mainListView );
listAdapter = new ArrayAdapter<String>(this, R.layout.simplerow, planetList);
listAdapter.add( "Ceres" );
listAdapter.add( "Pluto" );
listAdapter.add( "Haumea" );
listAdapter.add( "Makemake" );
listAdapter.add( "Eris" );
 mainListView.setAdapter( listAdapter ); 
```

简单而精湛.. 在那个相对布局中插入 TextField 和 Button.. 解决了 :) @blackbelt 谢谢

# encryption - 公钥和私钥混淆

> ID：13799909
> 
> 赞同：-3
> 
> 时间：2012-12-10T11:17:45.013
> 
> 标签：encryption, private-key, pki, public-key

在加密和解密中，相同的密钥用于将计划文本转换为密码和将密码转换为计划文本。那么为什么在公钥加密方法中，发送方使用接收方公钥加密，接收方使用他自己的私钥解密呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:52:58.883

您最初指的是对称加密（共享密钥），它允许 2 个实体基于只有两个实体知道的单个共享密钥进行安全通信。此密钥可以通过多种方式交换，但由于显而易见的原因不能公开。

非对称加密（公钥/私钥）允许 2 个实体安全通信，如下所示：

如果一方想要接受安全（加密）信息，他们需要一个对世界不可见的密钥（私人），但他们还必须能够向任何想要发送加密信息（公共）的人提供密钥.

所以我可以将我的公钥提供给全世界，并且知道数据是安全的，因为只有我拥有私钥，因此我是唯一可以解密它的人。

请参阅这篇 Microsoft 文章中的非对称加密：http: [//support.microsoft.com/kb/246071](http://support.microsoft.com/kb/246071)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:50:27.510

因为反过来也不安全，也不可行。只有收件人有他的私钥，所以没有其他人可以使用它。

# java - 在 JSF 1.2 中自定义验证错误消息时出错

> ID：13799912
> 
> 赞同：0
> 
> 时间：2012-12-10T11:18:06.037
> 
> 标签：java, jsf, jsf-1.2

我已经按照类似的 SO 问题以及[Mkyong](http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/)等其他网站中回答的步骤进行操作，但均未成功。我在下面描述了到目前为止我为自定义所做的工作`javax.faces.component.UIInput.REQUIRED`：

1.  `MyMessages.properties`在包中创建`formularis.utils.missatges.custom`并自定义错误：

    ```
    javax.faces.component.UIInput.REQUIRED = This value is required. 
    ```

2.  复制`MyMessages.properties`并翻译成我的语言：

    ```
    MyMessages.properties
    MyMessages_ca_ES.properties
    MyMessages_es_ES.properties
    MyMessages_en_US.properties 
    ```

3.  在中声明属性文件`faces-config`：

    ```
    <application>
        <locale-config>
            <default-locale>ca_ES</default-locale>
            <supported-locale>ca_ES</supported-locale>
            <supported-locale>es_ES</supported-locale>
            <supported-locale>en_US</supported-locale>
        </locale-config>
        <message-bundle>formularis.utils.missatges.custom.MyMessages</message-bundle>
    </application> 
    ```

我是否缺少任何配置或声明？我不明白为什么我的应用程序不显示我的自定义错误消息。先感谢您。

# ruby-on-rails - 在 Rails 中传递 json 时出错（JSON::ParserError）“757：rails 中出现意外标记

> ID：13799916
> 
> 赞同：0
> 
> 时间：2012-12-10T11:18:10.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试从另一个 url 发出请求，该请求使用 json 响应回调我的 railsapp，并且在此过程中出现以下错误

```
 757: unexpected token at 'https://voguepay.com/?v_transaction_id=demo-1355137288&type=json'
  json (1.7.5) lib/json/common.rb:155:in `parse' 
```

我的控制器动作如下

```
 def get_response
    @transaction_id = params[:transaction_id]
    response = JSON.parse("https://voguepay.com/?v_transaction_id=#{@transaction_id}&type=json").body
  end 
```

知道我做错了什么

我直接在我的控制台窗口中尝试了 url，我得到了同样的错误，url 是 [https://voguepay.com/?v_transaction_id=demo-1345109950&type=json](https://voguepay.com/?v_transaction_id=demo-1345109950&type=json)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:36:34.920

我决定使用[typhoeus gem](http://rubygems.org/gems/typhoeus)和[yajl-ruby](http://rubygems.org/gems/yajl-ruby) gem。这一切对我来说都很好，并决定在下面分享我的解决方案。

```
 def notify
    @transaction_id = params[:transaction_id]
    hydra = Typhoeus::Hydra.new
    request = Typhoeus::Request.new("https://voguepay.com/?v_transaction_id=#{@transaction_id}&type=json")
    request.on_complete do |response|
      transaction = Yajl::Parser.parse(response.body)
    end
    hydra.queue(request)
    hydra.run
  end 
```

# android - getDrawingCache() 返回 null

> ID：13799917
> 
> 赞同：7
> 
> 时间：2012-12-10T11:18:13.617
> 
> 标签：android, bitmap

我正在开发一个简单的绘画应用程序，并尝试实现在用户请求时提供更多绘制空间的功能，我认为这可以通过简单地启用我的 CustomView 类的滚动来完成（它包含在 LinearLayout 然后在滚动视图类）。如果我没有通过运行 Chunk 1 调整 CustomView 类的大小，Chunk 2 可以正常工作（它只是保存了一屏绘图。此时，没有滚动。）真可惜！Chunk 1 运行时 Chunk 2 失败（view.getDrawingCache() 返回 null）（此时启用滚动）。我想保存整个视图，包括由于滚动而遗漏的部分。

块 1：

```
CustomView view = (CustomView) findViewById(R.id.customViewId);
height = 2 * height;
view.setLayoutParams(new LinearLayout.LayoutParams(width, height)); 
```

块 2：

```
CustomView view = (CustomView) findViewById(R.id.customViewId);
view.setDrawingCacheEnabled(true);
Bitmap bitmap = Bitmap.createBitmap(view.getDrawingCache());
view.setDrawingCacheEnabled(false); 
```

这两个代码块是两种不同方法中独立的小部分。

## 编辑：已解决

经过数十亿的谷歌查询，问题现在得到了解决；）
我提到了这个线程，[https:](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/VQM5WmxPilM) //groups.google.com/forum/?fromgroups=#!topic/android-developers/VQM5WmxPilM 。
我不明白的是 getDrawingCache() 方法对 View 类的大小（宽度和高度）有限制。如果 View 类太大，getDrawingCache() 只返回 null。
因此，解决方案不是使用该方法，而是如下所示。

```
CustomView view = (CustomView) findViewById(R.id.customViewId);
Bitmap bitmap = Bitmap.createBitmap(view.getMeasuredWidth(), 
  view.getMeasuredHeight(), Bitmap.Config.ARGB_8888); 
Canvas bitmapHolder = new Canvas(bitmap); 
view.draw(bitmapHolder);
// bitmap now contains the data we need! Do whatever with it! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:52:02.430

您需要调用`buildDrawingCache()`, 才能使用位图。

该`setDrawingCache(true)`事物只是设置标志并等待下一个绘图通道以创建缓存位图。

`destroyDrawingCache()`当您不再需要它时，也不要忘记打电话。

# c++ - 查找操作的时间复杂度

> ID：13799921
> 
> 赞同：3
> 
> 时间：2012-12-10T11:18:28.237
> 
> 标签：c++, stl

> **可能重复：**
> [C++ string::find complex](https://stackoverflow.com/questions/8869605/c-stringfind-complexity)

STL中字符串库自带的查找操作的时间复杂度是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:36:02.660

该标准第 21.4.7.2 节并未就复杂性提供任何保证。

但是，您可以合理地假设[`std::basic_string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)要搜索的字符串的长度需要线性时间，因为即使是简单的算法（检查每个子字符串是否相等）也具有这种复杂性，并且构造函数不太可能`std::string`构建一个花哨的索引结构来启用任何东西比那更快。

根据实现的不同，所搜索模式的复杂性可能在线性和常数之间合理变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:40:20.870

正如评论中指出的那样，标准没有具体说明。

但是，由于`std::string`它是一个通用容器，并且它不能对它所包含的字符串的性质做出任何假设，因此您可以合理地假设 `O(n)`在您搜索单个`char`.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-10T11:33:28.550

最多执行与 [first,last) 范围内的元素数量一样多的比较。

[http://cplusplus.com/reference/algorithm/find/](http://cplusplus.com/reference/algorithm/find/)

# titanium-mobile - 您可以将 Carbon 框架与 Alloy 框架一起使用吗？

> ID：13799928
> 
> 赞同：0
> 
> 时间：2012-12-10T11:18:36.200
> 
> 标签：titanium-mobile, macos-carbon, appcelerator-mobile, titanium-alloy

是否可以在 Appcelerator Titanium中使用[**Carbon 框架**](http://carbon.appersonlabs.com/)和[**Alloy 框架？**](http://projects.appcelerator.com/alloy/docs/Alloy-bootstrap/index.html#)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:50:35.697

是的...... Carbon似乎只是一个UI框架，而Alloy在UI和MVC中

# javascript - 为文本字段提供 id

> ID：13799930
> 
> 赞同：0
> 
> 时间：2012-12-10T11:18:38.313
> 
> 标签：javascript, html

我有一个表单，其中一个下拉菜单生成 2 个字段。现在的问题是我已经生成了一个字段并尝试获取两个字段，在第一个字段中显示价格，在第二个标签中显示 product_id。我的脚本只是显示价格而不是 ID。由于缺乏知识，我被困住了。我只是需要某人的帮助。

JavaScript：

```
function setOptions(chosen) {
    var selbox = document.myform.opttwo;
    selbox.options.length = 0;
    if (chosen == " ") {
        selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');   }
        selbox.options[selbox.options.length] = new Option('100 Directory Submission', '$9.99', '1');
        selbox.options[selbox.options.length] = new Option('200 Directory Submission', '$19.99', '2');
        selbox.options[selbox.options.length] = new Option('300 Directory Submission','$29.99', '3');
    }
    document.myform.amount.value="";
    document.myform.hidden.value="";
}​ 
```

HTML：

```
<select name="opttwo" size="1" onchange="this.form.amount.value=this.value;">
    <option value=" " selected="selected">Select any option of the above first</option>
</select>
Amount Payable:<input type="text" readonly="readonly" name="amount" />
Product id:<input type="text" name="hidden" readonly="readonly" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:41:12.517

~~首先，您的代码存在一些明显的问题，例如闭合和未闭合的大括号。~~

这方面的一个例子是：

```
if (chosen == " ") {
        selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');   } 
```

~~编辑：情况不再如此。~~

 ~~其次，不幸的是，您尝试创建的 Options 对象没有您尝试获得的“id”属性。

所以你的代码

```
selbox.options[selbox.options.length] = new Option('100 Directory Submission', '$9.99', '1'); 
```

没有得到 '1' 作为它的 id。

构造函数是

```
new Option([text], [value], [defaultSelected], [selected]) 
```

但是，您可以通过在 onchange 处理程序中执行此操作来获取元素的索引：

```
this.form.hidden.value=this.selectedIndex; 
```

第三，如果您想继续在 onchange 标记中使用脚本（通常不鼓励这样做），您还必须设置隐藏输入的值。

像这样：

```
onchange="this.form.amount.value=this.value; this.form.hidden.value=this.value;" 
```

注意：上面这行会给你错误的值，只是说，但你明白了它的要点。

我做了一个小提琴供你玩弄，看看它是如何完成的。

[就这个](http://jsfiddle.net/wQMAK/4/)

我相信一些 API 文档总是有序的：

更新：为了在每个选项上动态设置 id，您必须像这样遍历选择列表中的元素：

```
for (var i=0; i<selbox.length; i++){
     selbox.options[i].setAttribute('id', 'hello'+i); 
} 
```

然后在你设置的行中`onchange()`添加这个

```
this.form.hidden.value=this[selectedIndex].id; 
```

现在，当您选择一个选项时，您的输入应该显示为“hello0”、“hello1”、“hello2”、“hello3”。

另外，我为你更新了小提琴。

[Mozilla 选项 API](https://developer.mozilla.org/en-US/docs/DOM/Option)~~

# apache - 如何只允许访问单个文件？

> ID：13799932
> 
> 赞同：7
> 
> 时间：2012-12-10T11:18:39.810
> 
> 标签：apache

我有一台正在提供`.js`文件的 apache 机器。该文件应该是唯一需要查看的文件。

我已经在我的 apache 中这样配置：

```
<Location /var/www/test/test.js>
    Order allow,deny
    Allow from all
</Location> 
```

站点地址`test.in`指向目录`test.js`中的文件`/var/www/test`。那工作正常。但我希望当用户尝试点击`test.in/someurl`（不可用）或其他一些 url 而不是`test.in`需要给出`401`错误消息时。

我怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T14:57:58.760

您误用`<Location>`了 - 参数应该是 URI 而不是目录路径......您应该使用它`<Directory>`来获得预期的行为。

我会做这样的事情（你应该微调它，它只显示了原理）：

```
# first deny access to everything
<Location />
 Order Deny,Allow
 Deny from All
</Location>

# then allow access to specific URL
<Location /test/test.js>
 Order Allow,Deny
 Allow from All
</Location> 
```

查看[Order](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#order)指令和以下一项或多项：[Location](http://httpd.apache.org/docs/2.2/mod/core.html#location)、[LocationMatch](http://httpd.apache.org/docs/2.2/mod/core.html#locationmatch)、[Directory](http://httpd.apache.org/docs/2.2/mod/core.html#directory)、[DirectoryMatch](http://httpd.apache.org/docs/2.2/mod/core.html#directorymatch)、[Files](http://httpd.apache.org/docs/2.2/mod/core.html#files)、[FilesMatch](http://httpd.apache.org/docs/2.2/mod/core.html#filesmatch)等。

# java - for循环中的java rpc

> ID：13799934
> 
> 赞同：-1
> 
> 时间：2012-12-10T11:18:50.310
> 
> 标签：java, loops, rpc

我在 for 循环中有一个 rpc 调用来接收元素列表。我遇到的问题是在 for 循环完成之前调用了该方法的 return 语句。那么有可能强制返回语句等待循环完成吗？

```
public List<SOMETHING> getList() {
     List<SOMETHING> list = ...;
     for (A FEW REPETITIONS) {
          RPC-CALL() {
            public void onSuccess(List<SOMETHING> result) {
                 list.addAll(result);
            }
          }
     }

     return list;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:33:50.003

我认为您需要使用 [CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)，您可以将计数器初始化为您正在进行的 rpc 调用数。减少获取 rpc 调用回复的次数，并使用 countDownLatch.await() 等待回复

# jakarta-ee - 如何获取系统的客户端IP和服务器IP？

> ID：13799938
> 
> 赞同：0
> 
> 时间：2012-12-10T11:19:02.127
> 
> 标签：jakarta-ee

我是学习 JEE6 的新手。我需要知道使用 JEE6 获取客户端和服务器 IP 地址。有没有其他方法可以获得这些 ip 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:24:58.287

您可以使用请求对象获取客户端 IP。

```
request.getRemoteAddr(); 
```

服务器 IP 将是您的应用程序将被部署的机器的 IP。

# c - C：分配给 char... 需要演员表吗？

> ID：13799942
> 
> 赞同：0
> 
> 时间：2012-12-10T11:19:30.480
> 
> 标签：c, casting, command-line-arguments

使用

```
int main(int argc, char *argv[])

{
    double number1, number2;
    char operator;

    number1 =atof (argv[0]);
    operator =argv[1];        // line 29
    number2 =atof (argv[2]); 
```

编译器抱怨说

> 29 警告：赋值从没有强制转换的指针生成整数 [默认启用]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:21:37.397

argv[1] 是指向 char 的指针，您不能将其分配给 char。将运算符转换为 char * 或尝试 operator = *(argv[1]);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:21:05.143

```
operator =argv[1];        // line 29 
```

在这里，`argv[1]`是类型`char*`。但是`operator`是类型`char`。这就是出错的原因。

如果您只想获取从命令行传递的单个字符的运算符，则：

```
operator=argv[1][0]; 
```

会做。

请注意，最好`strto*`用于转换，因为`ato*`函数不会检测到错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T11:21:11.023

变量`operator`是 type`char`而是`argv[1]`type `char *`。

一个是单个字符，另一个是指向字符的指针（即字符串）。

PS。即使它仅在使用纯 C 时有效，也应避免使用 C++ 关键字（如`operator`），因为这会使移植到 C++ 变得更加困难。

# python - Python 填满磁盘

> ID：13799947
> 
> 赞同：4
> 
> 时间：2012-12-10T11:19:49.427
> 
> 标签：python, hard-drive

我需要设置一些测试条件来模拟已填满的磁盘。我创建了以下内容来简单地将垃圾写入磁盘：

```
#!/usr/bin/python

import os
import sys
import mmap

def freespace(p):
    """
    Returns the number of free bytes on the drive that ``p`` is on
    """
    s = os.statvfs(p)
    return s.f_bsize * s.f_bavail 

if __name__ == '__main__':

    drive_path = sys.argv[1]
    output_path = sys.argv[2]

    output_file = open(output_path, 'w')

    while freespace(drive_path) > 0:
        output_file.write("!")
        print freespace(drive_path)
        output_file.flush()

    output_file.close() 
```

据我所知，通过查看来自空闲空间的返回值，write 方法在文件关闭之前不会将文件写入，从而使 while 条件无效。

有没有办法可以将数据直接写入文件？或者另一种解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:47:17.420

这是未经测试的，但我想这些方面的东西将是轻松填充磁盘的最快方法

```
import sys
import errno

write_str = "!"*1024*1024*5  # 5MB

output_path = sys.argv[1]

with open(output_path, "w") as f:
    while True:
        try:
            f.write(write_str)
            f.flush()
        except IOError as err:
            if err.errno == errno.ENOSPC:
                write_str_len = len(write_str)
                if write_str_len > 1:
                    write_str = write_str[:write_str_len/2]
                else:
                    break
            else:
                raise 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:28:43.763

您可以在写入时尝试/捕获磁盘已满异常。

# sql - 选择子查询中出现次数最多的属性

> ID：13799951
> 
> 赞同：2
> 
> 时间：2012-12-10T11:20:27.373
> 
> 标签：sql, sql-server, sql-server-2008

我有一个这样的 SQL 查询：

```
SELECT DISTINCT NewsID, UserID, PoliticianID
FROM Votes
WHERE UserID = 1010 
```

结果如下所示：

```
NewsID | UserID | PoliticianID
40       1010     3
40       1010     10
38       1010     27
39       1010     27
40       1010     35 
```

有没有办法`27`使用 SQL 从我上面的示例中获取数字？
我想得到`PoliticianID`用户投票最多的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:27:08.290

试试这个：

```
SELECT *
FROM Votes
WHERE PoliticianID IN
(
    SELECT PoliticianID
    FROM votes 
    GROUP BY PoliticianID
    HAVING  COUNT(NewsID) = (SELECT MAX(NCount)
                             FROM
                             (
                               SELECT COUNT(*) NCount
                               FROM Votes
                               GROUP BY PoliticianID, UserId
                             ) t)
) 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/db1e2/6)

**或者：**使用 CTE：

```
;WITH TheMostOccurredIds
AS
(
  SELECT PoliticianID
  FROM votes 
  GROUP BY PoliticianID
  HAVING  COUNT(NewsID) = (SELECT MAX(NCount)
                           FROM
                           (
                             SELECT COUNT(*) NCount
                             FROM Votes
                             GROUP BY PoliticianID, userID
                           ) t)
  )
SELECT *
FROM Votes
WHERE PoliticianID IN (SELECT PoliticianID FROM TheMostOccurredIds) ; 
```

## [带有 CTE 的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/db1e2/13)

* * *

## 更新

**请注意：**上面的解决方案将为您提供所有出现次数最多的 Id，如果没有重复的最大值，这将正常工作。但是，如果您想获得 TOP 一个，如果有很多 id 具有相同的最大数量，就像您在评论中发布的示例一样，您可以使用这样的排名功能[**`ROW_NUMBER() OVER(...)`**](http://msdn.microsoft.com/en-us/library/ms186734.aspx)：

```
;WITH VotesCountCTE
AS
(
  SELECT [UserID], [PoliticianID], COUNT(*) votesCount
  FROM votes
  GROUP BY [UserID], [PoliticianID]
),TopVotes
AS
(
  SELECT *,
  ROW_NUMBER() OVER(ORDER BY votescount) rownum
  FROM VotesCountCTE
 )
SELECT *
FROM TopVotes
WHERE rownum = 1; 
```

## [更新的 SQL Fiddle](http://www.sqlfiddle.com/#!3/465ef/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:35:58.847

你可以试试这个

我创建了一个新的 TEMP 表，其中包含您的查询并根据需要为您提供结果。

```
SELECT TOP 1 PoliticianID, COUNT(PoliticianID) AS CNT
FROM 
    (SELECT DISTINCT NewsID, UserID, PoliticianID
     FROM Votes
     WHERE UserID = 1010) AS tempT
GROUP BY PoliticianID
ORDER BY CNT DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:29:51.713

我想这应该工作......

```
SELECT TOP 1 NewsID, UserID, PoliticianID, COUNT(PoliticianID)
FROM Votes
WHERE UserID = 1010
GROUP BY NewsID, UserID, PoliticianID
ORDER BY COUNT(PoliticianID) DESC 
```

# ajax - PrimeFaces commandButton ajax 不起作用

> ID：13799952
> 
> 赞同：0
> 
> 时间：2012-12-10T11:20:34.370
> 
> 标签：ajax, primefaces

我有简单的 JSF 页面和简单的支持 bean。我在页面上有 p:commandButton 和 p:datatable。使用 commandButton 我需要使用 ajax 更新 dataTable，但它不会发生。可能是什么原因？

这是页面：

```
<ui:define name="content">
        <h2>#{menu['management.roles.perms']}</h2>

        <h:form id="form">
            <p:fieldset style="border: 0px" toggleable="false" collapsed="false">
                <p:tabView>
                    <p:tab title="#{messages['roles']}">
                         <p:dataTable id="dataTable" value="#{rolesBean.roles}" var="role"
                                      editable="true" rows="10" rowKey="#{role.id}">

                             <p:ajax event="rowEdit" listener="#{rolesBean.onEdit}"/>
                             <f:facet name="footer">
                                 <p:commandButton value="#{misc['add.role']}"
                                                  actionListener="#{rolesBean.addRole}" update="dataTable"/>
                             </f:facet>
                             <p:column headerText="#{misc['name.database']}">
                                 <p:cellEditor>
                                     <f:facet name="output">
                                         <h:outputText value="#{role.name}"/>
                                     </f:facet>
                                     <f:facet name="input">
                                         <h:inputText value="#{role.name}"/>
                                     </f:facet>
                                 </p:cellEditor>
                             </p:column>

                             <p:column headerText="#{misc['date']}">
                                 <f:facet name="output">
                                     <h:outputText value="#{role.creationDate}">
                                         <f:convertDateTime pattern="dd.MM.yyyy" />
                                     </h:outputText>
                                 </f:facet>
                             </p:column>

                             <p:column headerText="#{misc['description']}">
                                 <p:cellEditor>
                                     <f:facet name="output">
                                         <h:outputText value="#{role.description}"/>
                                     </f:facet>
                                     <f:facet name="input">
                                         <h:inputText value="#{role.description}"/>
                                     </f:facet>
                                 </p:cellEditor>
                             </p:column>

                             <p:column headerText="#{messages['edit']}">
                                 <p:rowEditor />
                             </p:column>
                         </p:dataTable>
                    </p:tab>

                    <p:tab title="#{messages['perms']}">

                    </p:tab>

                    <p:tab title="#{clients['history']}">
                    </p:tab>
                </p:tabView>
            </p:fieldset>
        </h:form>
    </ui:define> 
```

这是 backingBean 的代码：

```
@ViewScoped
@ManagedBean(name = "rolesBean")
public class RolesViewBean extends BasicViewBean<Role> {

    private static final long serialVersionUID = 27377603187254821L;
    @Inject
    RoleDao dao;
    private List<Role> roles;

    @Override
    protected BasicDao<Role> getDAO() {
        return dao;
    }

    public void onEdit(RowEditEvent event){
        this.entity = (Role) event.getObject();
        dao.update(this.entity);
    }

    public void addRole(){
        roles.add(new Role());
    }

    public List<Role> getRoles() {
        roles = dao.getRoleList();
        return roles;
    }

    public void setRoles(List<Role> roles) {
        this.roles = roles;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:59:06.657

乍一看，问题在于您的 addRole 方法修改了“角色”列表，而 getRoles（由 dataTable 调用）将其重置为保存在数据库中的任何内容。因此，您的数据表会更新，只是它会使用相同的值进行更新。

考虑一下 ;）

# zend-framework2 - Zend 框架 2：导航 (\Zend\Navigation\Navigation)

> ID：13799955
> 
> 赞同：1
> 
> 时间：2012-12-10T11:20:38.207
> 
> 标签：zend-framework2

我想在 Skeleton Application (ZF2) 中建立一个菜单。我做了一个单独的模块`Navigation`。在 Navigation Controller 写了一段代码：

```
namespace Navigation\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Navigation\Navigation;

class NavigationController extends AbstractActionController
{
public function indexAction()
{   

    $container = new \Zend\Navigation\Navigation(array(
     array(
        'label' => 'Album',
        'controller' => 'album',
        'action' => 'index',
        'route' => 'album',
         )
));

    $navigation = new \Zend\View\Helper\Navigation\Menu();

    $navigation->renderMenu($container);

    return new ViewModel(array('navigation'=>$navigation));
}} 
```

并得到错误： `Zend\Navigation\Page\Mvc::getHref cannot execute as no Zend\Mvc\Router\RouteStackInterface instance is composed` 在文件：\vendor\zendframework\zendframework\library\Zend\Navigation\Page\Mvc.php:186

怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-28T16:09:00.517

[点击链接](https://github.com/hayk-manasyan/ZF2-NAVIGATION)

从数据库下载 ZF2 动态导航。有添加、编辑、删除菜单项的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:15:15.513

似乎您的导航模块中*未定义*路线“专辑” 。需要在 Navigation 模块的 module.config.php 中设置路由。我认为，路由需要包含一个附加参数 :module ，它指向应用程序模块。

# wordpress - 按自定义字段在 wp 中订购作者

> ID：13799963
> 
> 赞同：0
> 
> 时间：2012-12-10T11:21:09.623
> 
> 标签：wordpress, wordpress-theming

在 WordPress 上工作。我需要为作者添加一个新字段，例如专家及其订单（或可能是权重字段），这很容易做到。

我需要查询作者，所有作者都将被列出......最好使用这个 [http://codex.wordpress.org/Template_Tags/wp_list_authors](http://codex.wordpress.org/Template_Tags/wp_list_authors)

但是，我需要按 Order 字段（或 weight 字段）对作者进行排序。

任何想法，如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:44:39.297

在您的查询中，使用这些参数：

```
 'meta_key' => 'Order',
 'orderby'   => 'meta_value' 
```

查询应按您的字段值排序。您还可以将 orderby 从 ASC 更改为 DESC，如下所示：

```
'order' => 'ASC' 
```

实际上，检查是否`meta_key`会起作用。但我确实知道这一点，`orderby`并且`order`已在 WordPress 3.1 中添加到该`wp_list_author`功能中。如果它不起作用，则执行相同操作（使用指示的参数），但使用自定义`wp_query`.

# php - PHP通过嵌套数组搜索以按名称删除元素

> ID：13799966
> 
> 赞同：2
> 
> 时间：2012-12-10T11:21:11.090
> 
> 标签：php, multidimensional-array

我以前从未真正使用过 PHP 数组，因为我过去只使用过数据库，所以我稍微拓宽了视野。基本上我有一个简单的嵌套数组，其中每个元素都有一个“名称”和一些其他值。我正在尝试搜索作为对象一部分的数组。我在这里查看了许多以前的问题，但无法使其正常工作，尽管在其他情况下没有涉及对象。我一直在尝试使用 'needle/haystack' 类型的示例，但还没有让它工作。

因此，在我的 People 课程中，我们还有其他内容：

```
public $peopleArray;  // this is the array and will be protected once working

// and this is the example search function im trying to modify
public function findPerson($needle, $haystack)
{
    foreach($haystack as $key=>$value)
    {
        if(is_array($value) && array_search($needle, $value) !== false)
        {
            return $key;
        }
    }
    return 'false';
} 
```

然后打电话给我目前有：

```
$searchResult = $People->findPerson('Bob',$people->peopleArray,'name'); 
```

我不确定我是否只是对 $needle 和 $value 感到困惑 - 我需要在搜索函数中传递名称值，所以我在函数参数中确实有 $value ，但这仍然没有返回任何内容。此外，我不是 100% 是否需要修改 '$key=>$value'，因为 $key 未定义。

提前感谢您的帮助。

加法 - 数组的 print_r：

```
Array ( [0] => Person Object ( [id:protected] => 1 [name] => Bob [gender] => m ) 
[1] => Person Object ( [id:protected] => 2 [name] => Denise [gender] => f ) 
[2] => Person Object ( [id:protected] => 3 [name] => Madge [gender] => f ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:30:59.033

好的，如果您必须发布一个示例数组，这会容易得多，但我会试一试这个问题。

对我来说，您似乎正在循环一个二维数组（嵌套数组）。

我会像这样循环遍历多维数组：

```
for($array as $key => $2ndArray){
    for($2ndArray as $2ndKey => $value){
        if($value == $needle){
           return true;
        }
    }
} 
```

希望这可以帮助

# bash - 怎么抢号？

> ID：13799969
> 
> 赞同：1
> 
> 时间：2012-12-10T11:21:29.953
> 
> 标签：bash, shell, unix, networking

编写一个小脚本来在我的服务器上执行管家任务。

我只想抓住 ethX 中的 X，

```
echo `grep -m1 -oE "eth[0-9]*" /etc/network/interfaces | grep -oE [0-9]*` 
```

这可行，但我想知道是否有人知道可以执行此操作的一次性命令，即可以使用单词的常规表达式，例如 room456 并且只吐出数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:27:15.373

使用[正向向后查找](http://www.regular-expressions.info/lookaround.html)以匹配任何以 开头的数字字符串`eth`：

```
$ cat file
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500

$ grep -Po '(?<=eth)[0-9]+' file
0
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:45:52.413

使用`sed`：

```
sed 's/^eth\([0-9]\+\):.*$/\1/g' /etc/network/interfaces 
```

# package - 如何将 RPM 声明为另一个 RPM 的子集？

> ID：13799970
> 
> 赞同：1
> 
> 时间：2012-12-10T11:21:33.587
> 
> 标签：package, rpm

我有一个 RPM X.rpm。用户只需要这个 RPM 的一个位，因此我准备了一个新的 RPM X-subpart.rpm。

有没有办法在规范文件中指定 X-subpart 是 X 的子集，因此如果 X 已经安装则不需要安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:56:58.680

可以让“大”提供与“小”相同的符号或其名称。然后，您可以依靠此符号并同时获得它们。

您甚至可以依赖文件路径，这是两个 RPM 都满足的条件。

见[这里](http://www.rpm.org/max-rpm/s1-rpm-depend-manual-dependencies.html)。

# jsp - 错误消息“...无法解决...”的原因

> ID：13799973
> 
> 赞同：1
> 
> 时间：2012-12-10T11:21:53.710
> 
> 标签：jsp, session, tomcat

我开始学习jsp应用程序，有时我收到错误消息“无法解决...”。例如，这是我的最后一份报告：

```
An error occurred at line: 118 in the jsp file: /functions.jsp
session cannot be resolved
115:             
116:     Boolean isLogged()
117:         {
118:             Boolean loginSuccess = (Boolean)session.getAttribute("myApp.loginSuccess");
119:             if (loginSuccess == null) 
120:             {
121:                 return false; 
```

这些行引用了一个函数，用于检查登录过程是否成功。所以我有两个问题：

1.  在这种情况下我该如何解决问题？
2.  这些消息的原因是什么，有时会无缘无故地消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:30:59.313

您需要转换`getAttribute()`方法的返回值。

```
Boolean loginSuccess = (Boolean)session.getAttribute("myApp.loginSuccess"); 
```

您不能将`implicit`对象变量直接用于方法体（声明）。您应该避免在 JSP （声明、Scriptlet 和表达式）中使用[Java 代码。](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)或者，您可以使用使用[Servlet/Filter](https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp)。

`HttpSession`要解决此问题，请在声明块中声明一个引用变量。

```
<%!
  HttpSession sess;

  Boolean isLogged(){
     Boolean loginSuccess = (Boolean)sess.getAttribute("myApp.loginSuccess");
     if (loginSuccess == null) 
        ...
  }
%> 
```

并在调用方法之前将`session`对象的引用分配给变量。`sess``isLogged`

例如

```
<%
 sess=session;
 if(isLogged()){
   //code
 }
%> 
```

# php - 设置 sybase PHP 库以返回与 sqlserv 相同的默认日期格式

> ID：13799974
> 
> 赞同：2
> 
> 时间：2012-12-10T11:21:54.053
> 
> 标签：php, sql-server-2008, sybase, date-formatting

我用 PHP 编写了一个连接到 SQL 服务器的应用程序。如果此应用程序在 Windows 上运行，它使用**srvsql**库，在 linux 情况下，它使用**sybase**库。我的麻烦是 sql server 的日期字段输出不一样，使用 srvsql 我得到类似' **2012-12-10 12:14:26.067** '的东西。使用 sybase，我得到“ **2012 年 12 月 10 日下午 12:14:26:067** ”！

如何在不更改每个查询的情况下设置 sybase 连接以获得相同的输出格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-03T17:35:00.997

几个小时以来，我一直在寻找一个好的解决方案。虽然我很想处理这个 php 方面，但在我目前的情况下它不是一个选项，因为第 3 方库正在处理数据。我刚刚偶然发现的解决方案是在查询方面。

粗略的想法是在返回结果之前将日期转换为字符串，这样库（在我的情况下为 mssql 和 sqlsrv）就没有机会对结果产生影响。

```
CONVERT(nvarchar(30), myDate, 121) AS date 
```

121 是 yyyy-mm-dd hh:mi:ss.mmm(24h)

其他选项可以在 Microsoft 的[文档](http://msdn.microsoft.com/en-us/library/ms187928.aspx)中找到。

### 编辑

前几天发现了这个。还没有尝试过它，但是 mssql 库有一个设置来告诉它如何处理日期：`mssql.datetimeconvert = On`. php.ini 中可能有一种方法可以使两个库以相同的格式呈现日期。我对转换解决方案的了解太远了，现在无法切换，但如果有人第一次阅读这篇文章，那么值得进行一些实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:20:22.833

与其担心从不同数据库返回的日期格式，不如考虑在 PHP 端处理它。

PHP 可以识别(`2012-12-10 12:14:26.067`和)这两种格式。`Dec 10 2012 12:14:26:067PM`当传递到[DateTime 对象](http://php.net/class.datetime)时，它们按预期工作。从 PHP 交互式提示：

```
php > $dt = new DateTime('Dec 10 2012 12:14:26:067PM');
php > echo $dt->format('r u'), "\n";
Mon, 10 Dec 2012 12:14:26 -0800 067000
php >
php > $dt = new DateTime('2012-12-10 12:14:26.067');
php > echo $dt->format('r u'), "\n";
Mon, 10 Dec 2012 12:14:26 -0800 067000 
```

如果您需要[复习](http://php.net/date)，`r`是 RFC 2822 日期的格式代码，而`u`是微秒的格式代码，仅适用于 DateTimes。

通过切换到 DateTimes，您可以轻松地在输入格式之间进行切换，并且基本上不必担心它。DateTime 使用[`strtotime`解析规则](http://php.net/datetime.formats)。您会想了解它们的局限性，但通常不会遇到它们。

# android - Android，在单击的项目上刷新列表视图

> ID：13799975
> 
> 赞同：1
> 
> 时间：2012-12-10T11:21:56.413
> 
> 标签：android, android-listview

我知道他们对于刷新 listView 有很多问题，但他们都没有解决我的问题（据我所知）。

**在我的列表视图中单击它时，我试图更改我的项目视图。**

要更改`boolean isClicked`我的 POJO 视图：

```
 networksListView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> _adapter, View view, int pos, long id) {
            myApp.networksGlobal.networks.get(pos);
            myApp.networksGlobal.networks.get(pos).isClicked = !myApp.networksGlobal.networks.get(pos).isClicked;
            adapter.notifyDataSetChanged();
        }
    }); 
```

当我单击项目`isClicked`从 true 切换为 false 时，在我的`getView`listAdapted 上，我正在切换视图类型：

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {

    Network network = (Network) getItem(position);
    NetworkItemView networkItemView;
    if (convertView == null) {
        networkItemView = NetworkItemView_.build(context);
    } else {
        networkItemView = (NetworkItemView) convertView;
    }
    networkItemView.bind(network);
    if (network.isClicked) {
        networkItemView.networkItemButtonLayout.setVisibility(View.VISIBLE);
    } else {
        networkItemView.networkItemButtonLayout.setVisibility(View.GONE);
    }
    return networkItemView;

} 
```

在第一次单击时，一切正常，显示 Toast 并且布局`networkItemButtonLayout`设置为可见。

但是，如果我在同一个项目上单击第二次：**什么都没有发生**。没有显示 Toast，并且布局可见性没有变化。

如果我评论`adapter.notifyDataSetChanged()`，每次点击都会显示 Toast。所以我想问题是为什么调用`adapter.notifyDataSetChanged()`. 所以尝试了几种解决方法 (`adapter.notifyDataSetChanged()`和`networksSearchListView.invalidateViews()`) 但没有任何效果，而且我找不到在我的项目上单击几次的方法。

我是否以正确的方式使用“notifyDataSetChanged”？

# vb.net - 使用 ReportViewer 在 VB.NET 中动态创建报表

> ID：13799978
> 
> 赞同：3
> 
> 时间：2012-12-10T11:22:09.547
> 
> 标签：vb.net

我想知道如何使用报表查看器在 VB.NET 中以编程方式创建报表，例如创建数据报表？

我尝试了我在互联网上找到的所有内容，但大部分都是使用报告向导。我想要类似于在 VB 6.0 中创建报表的东西。

这是我到目前为止所尝试的..

```
Imports System.Data.SqlClient
Imports Microsoft.Reporting.WinForms
Imports System.Xml
Imports System.Xml.Serialization
Imports System.IO

Public Class frmTestReport

    Public dsMyDataSet As New DataSet()

    Private Sub frmTestReport_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.cmbReport.Items.Add("TESTREPORT")
        Me.ReportViewer1.RefreshReport()
    End Sub

    Private Sub btnViewReport_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnViewReport.Click

        Me.ReportViewer1.Reset()

        Me.ReportViewer1.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Local

        If Me.cmbReport.Text.Trim() = "TESTREPORT" Then

            'load .rdlc file and add a datasource
            Me.ReportViewer1.LocalReport.ReportPath = "C:\Reports\MyTestReport.rdlc"
            ' ReportViewer1.LocalReport.DataSources.Add(ds)

        End If

        'refresh viewer with above settings
        Me.ReportViewer1.RefreshReport()

    End Sub

End Class 
```

编辑：我想用动态数据集填充我的 report.rdlc，以便我可以在其上附加我想要的 sql 查询，但没有运气，..当前我的报告返回到空白报告。

# php - 在 PHP 中使用 XSD 生成 XML

> ID：13799979
> 
> 赞同：0
> 
> 时间：2012-12-10T11:22:10.343
> 
> 标签：php, xml, xsd

我有一个 XML 文件，我想根据 XSD 文件中定义的模式在其中插入新数据，有没有办法在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T17:48:34.903

你能再解释一下吗。您是否尝试向 XML 添加新节点？如果是这样，您可以使用 SimpleXMLElement::addChild。如果这不是您的意思，请提供更多详细信息。

# ruby-on-rails - Websense 和防火墙后面的 Windows 7 中的 Ruby on Rails 问题

> ID：13799983
> 
> 赞同：3
> 
> 时间：2012-12-10T11:22:25.647
> 
> 标签：ruby-on-rails, windows, proxy, firewall

关于 Windows 7 中的 Ruby on rails。安装 railsinstaller 后，我面临很多问题，不确定原因是什么？

PS：我在寻找类似问题的答案时在其他地方的堆栈溢出上发布了这个问题，一位绅士建议我将我的问题放在单独的线程上。就这样。

Windows 7 落后于代理和 websense。我以管理员身份运行所有应用程序。我想知道我是否因为我面临的问题离开了任何网站/博客。虽然这是我在用尽阅读和搜索选项来解决它之后，关于堆栈溢出中的 ROR 的第一个问题。

我什至无法做到

```
$ gem install rubygems-update 
```

虽然我的路径是正确的并且显示

```
c:\>gem sources 
```

展示

```
http://rubygems.org. 
```

作为唯一来源。

即使是简单的数据库创建，我仍然会收到以下错误。这是在示例 Rails 项目的根目录中给出的，即 SampleROR。请提供任何帮助。

```
$ rake db:create
The i18n gem is not available. Please add it to your Gemfile and run bundle install
rake aborted!
cannot load such file -- i18n
c:/RailsInstaller/DevKit/home/anil-ku/SampleROR/config/application.rb:3:in `require'
c:/RailsInstaller/DevKit/home/anil-ku/SampleROR/config/application.rb:3:in `<top (required)>'
c:/RailsInstaller/DevKit/home/anil-ku/SampleROR/Rakefile:5:in `<top (required)>'
(See full trace by running task with --trace) 
```

请注意，我无法做到

```
C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem update --system
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format 
```

使用最新版本的rails，使用railsinstaller一键安装windows。在此之后我进行了捆绑安装，运行成功，但问题并没有消失。

```
anil-ku@hostname ~/SampleROR
$ bundle install
Using rake (10.0.2)
**Using i18n (0.6.1)**
Using multi_json (1.4.0)
Using activesupport (3.2.1)
Using builder (3.0.4)
Using activemodel (3.2.1)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.1)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.12)
Using mail (2.4.4)
Using actionmailer (3.2.1)
Using arel (3.0.2)
Using tzinfo (0.3.35)
Using activerecord (3.2.1)
Using activeresource (3.2.1)
Using bundler (1.0.22)
Using coffee-script-source (1.4.0)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Using json (1.7.5)
Using rdoc (3.12)
Using thor (0.14.6)
Using railties (3.2.1)
Using coffee-rails (3.2.2)
Using jquery-rails (2.1.4)
Using rails (3.2.1)
Using sass (3.2.3)
Using sass-rails (3.2.5)
Using sqlite3 (1.3.6)
Using uglifier (1.3.0)
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem
is installed.

anil-ku@DS-7071BC8FD6C4 ~/SampleROR
**$ bundle show i18n**
c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/i18n-0.6.1 
```

当我列出

```
$gem list -local
actionmailer (3.2.1)
actionpack (3.2.1)
activemodel (3.2.9, 3.2.1)
activerecord (3.2.1)
activerecord-sqlserver-adapter (3.2.1)
activeresource (3.2.1)
activesupport (3.2.9, 3.2.1)
archive-tar-minitar (0.5.2)
arel (3.0.2)
bigdecimal (1.1.0)
builder (3.0.4, 3.0.0)
bundler (1.0.22)
cgi_multipart_eof_fix (2.5.0)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.4.0, 1.2.0)
columnize (0.3.6)
daemons (1.1.9)
debugger-linecache (1.1.2)
debugger-ruby_core_source (1.1.5)
deprecated (3.0.1, 2.0.1)
erubis (2.7.0)
execjs (1.4.0, 1.3.0)
fastthread (1.0.7)
gem_plugin (0.2.3)
hike (1.2.1)
hoe (3.3.1)
**i18n (0.6.1, 0.6.0)**
io-console (0.3)
journey (1.0.4, 1.0.2)
jquery-rails (2.1.4)
json (1.7.5, 1.5.4)
mail (2.4.4, 2.4.1)
mime-types (1.19, 1.17.2)
minitest (4.3.3, 2.5.1)
multi_json (1.4.0, 1.3.7, 1.1.0)
mysql2 (0.3.11)
permutation (0.1.8)
pg (0.13.1 x86-mingw32)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2, 1.1)
rack-ssl (1.3.2)
rack-test (0.6.2, 0.6.1)
rails (3.2.1)
railties (3.2.1)
rake (10.0.2, 0.9.2.2)
rake-compiler (0.8.1)
rb-readline (0.4.2)
rbx-require-relative (0.0.9)
rdoc (3.12, 3.9.4)
ruby_core_source (0.1.5)
rubyzip (0.9.6.1)
sass (3.2.3)
sass-rails (3.2.5)
sdoc (0.3.20)
sprockets (2.1.3, 2.1.2)
sqlite3 (1.3.6 x86-mingw32, 1.3.5 x86-mingw32)
sqlite3-ruby (1.3.3)
thor (0.14.6)
tilt (1.3.3)
tiny_tds (0.5.1 x86-mingw32)
treetop (1.4.12, 1.4.10)
tzinfo (0.3.35, 0.3.31)
uglifier (1.3.0) 
```

它显示已安装 i18n。不确定是什么问题。

```
$ rails --version
Rails 3.2.1 
```

此外，下载 gem 包并使用**ruby​​ setup.rb**运行它也不起作用

```
C:\RailsInstaller\rubygems>ruby setup.rb
C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems.rb:480:in `find_files': undefined method `map' for Gem::Specification:Class (NoMethodError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems.rb:1085:in `load_plugins'
        from C:/RailsInstaller/rubygems/lib/rubygems/gem_runner.rb:84:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from setup.rb:25:in `<main>'

C:\RailsInstaller\rubygems> 
```

我的宝石版本是

```
C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem -v
1.8.16 
```

我尝试从站点手动下载 gem（来自[http://rubygems.org/gems/](http://rubygems.org/gems/)）并安装了其中的一些。所以能够为大多数其他宝石安装一些时间，它会给出如下错误

```
C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem install mongrel
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format

C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem install mongrel_services
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format

C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem install mongrel_service
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format

C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem install mongrel_service-0.4.0.gem
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format

C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem install mongrel-1.1.5.gem
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format

C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem install mongrel2-0.34.0.gem
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format

C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem install win32-api-1.4.8.gem
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
Successfully installed win32-api-1.4.8
1 gem installed
Installing ri documentation for win32-api-1.4.8...
Installing RDoc documentation for win32-api-1.4.8...

C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem install windows-api-0.4.2.gem
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format 
```

最后我的gem环境细节是

```
C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.16
  - RUBY VERSION: 1.9.3 (2012-02-16 patchlevel 125) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/RailsInstaller/Ruby1.9.3/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1
     - C:/Users/anil-ku/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/

C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems> 
```

我注意到 C:/Users/anil-ku/.gem/ruby/1.9.1 下没有像 ruby​​ 文件夹一样的东西，上面唯一的东西是一个名为 specs 的文件夹，看起来无关紧要。

路径环境也是windows是

```
C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems>echo %PATH%
C:\RailsInstaller\Ruby1.9.3\bin;C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\bin;C:\RailsInstaller\DevKit\bin;C:\RailsInstaller\Git\c
md;C:\RailsInstaller\Ruby1.9.3\bin;C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\bin;C:\RailsInstaller\DevKit\bin;C:\RailsInstaller\Gi
t\cmd;C:\RailsInstaller\Git\cmd;C:\RailsInstaller\Ruby1.9.3\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\Syste
m32\WindowsPowerShell\v1.0\;;C:\Program Files\cvsnt;C:\Program Files\TortoiseSVN\bin;d:\RailsInstaller\Git\cmd;d:\RailsInstaller\Ruby1.9
.3\bin 
```

有关如何继续进行上述简单数据库连接和/或如何完全安装 gem 的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:51:49.217

您需要为 ruby​​gems 设置代理设置。例如像这样设置环境变量：

SET HTTP_PROXY= [http://wolfbyte:secret@pigsy:8080](http://wolfbyte:secret@pigsy:8080)

来自[https://stackoverflow.com/a/4431/192221](https://stackoverflow.com/a/4431/192221)

# model-view-controller - Sencha Touch 使用 mvc 动态使用商店？

> ID：13799988
> 
> 赞同：0
> 
> 时间：2012-12-10T11:22:45.630
> 
> 标签：model-view-controller, sencha-touch, datastore

所以这是问题所在，我使用 MVC，并且我在 app.js 上声明了几个商店。

但是现在我需要进行登录验证，并且只有在我从服务器获得响应后才加载商店，但是如果在应用加载时将声明​​留在 app.js 中，它会自动加载所有商店。

这是我的应用程序需要做的事情：

`LoginView`进行验证，如果验证成功，它将视图更改为`ListView`，此视图有一个从商店加载数据的列表，并且此视图可以使用其他列表创建其他视图。

我试图要求商店中的商店`ListView`，但它会引发错误`cannot call method getCount of null`。

我该怎么做才能让它发挥作用。谢谢您的帮助。

这是一些代码：

```
Ext.define("App.view.Listview", {
extend: 'Ext.Container',
xtype: 'listview',

requires: ['App.view.Listviewdetails',
    'App.view.Filtros.FiltroJanelaPrincipal.Janelafiltrotiempoview',
    'App.view.Menuview',
    'App.view.Resultadopesquisaview',
    'App.view.Pesquisaview',
    'App.view.Maisinfousuarioview',
    'Ext.Label',
    'Ext.field.Search',
    'App.store.Tiempos',
    'App.store.Empresas',
    'App.store.Produtos',
    'App.store.Usuarios',
    'App.store.FiltrosEvento',
    'App.store.Historicos',
    'App.store.Pesquisas'
],

config: {
    id: 'listView',
    layout: 'card',
    items: {
        layout: 'vbox',
        id: 'listaEventos',
        items: [
            {
                xtype: 'list',
                id: 'listaTiempos',
                flex: 6,
                emptyText: 'Empty',
                store: 'Tiempos',
                itemTpl: '{dataTermino} {descricaoPrevia}'
            }
        ]
    } 
```

和其中一家商店：

```
Ext.define("App.store.Tiempos",{
extend: 'Ext.data.Store',

config: {
    model: 'App.model.Tiempo',
    autoLoad: true,
    proxy: 'searchProxy'
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:06:59.453

您可以在各自的视图类中的 require 中添加商店。在 app.js 中添加不是强制性的。因此，登录后，当视图将被实例化时，商店将自动加载。

# sharepoint - Install-SPUserSolution：沙盒代码执行请求失败

> ID：13799997
> 
> 赞同：3
> 
> 时间：2012-12-10T11:23:19.280
> 
> 标签：sharepoint, powershell, sharepoint-2010

执行**Install-SPUserSolution** powershell 命令时显示以下错误：

> Install-SPUserSolution：沙盒代码执行请求失败。在 line:1 char:23 + Install-SPUserSolution <<<< -Identity some_package.wsp -Site `http://localhost/sites/test` + CategoryInfo : InvalidData: (Microsoft.Share...allUserSolution: SPCmdletInstallUserSolution) [Install-SPUserSolution], SPUserCodeExecu...F ailedException + FullyQualifiedErrorId：Microsoft.SharePoint.PowerShell.SPCmdletInstallUserSolution

当我尝试从 SharePoint 界面激活用户解决方案时，一切正常。因此，这不仅适用于 PowerShell。我尝试在不同的帐户（管理员帐户）下运行用户代码服务，但这没有帮助。目前此服务在网络服务帐户下运行。

此外，当我运行 Add-SPUserSolution 或 Uninstall-SPUserSolution 时，它们工作得很好。我能够在至少两台服务器上重现此问题。请指教。

**[UPD]**我包含来自 SharePoint 日志的完整堆栈跟踪

> 沙盒代码执行请求失败。- 内部异常：System.InvalidOperationException 服务器堆栈跟踪：位于 Microsoft.SharePoint.Utilities.Verify.IsTrueTag（UInt32 标记，ULSCat 类别，类型类型，字符串格式，Object[] args）处UInt32 标记、ULSCat 类别、布尔表达式、类型类型、字符串格式、Object[] args) 在 Microsoft.SharePoint.UserCode.SPUserCodeExecutionHost.Execute(Type userCodeWrapperType, Guid siteCollectionId, SPUserToken userToken, String affinity, SPUserCodeExecutionContext executionContext) 在 System.Runtime .Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs) 在 System.Runtime.Remoting.Messaging.StackBuilderSink。

# hazelcast - 实例关闭时收到 java.lang.NoClassDefFoundError

> ID：13799998
> 
> 赞同：1
> 
> 时间：2012-12-10T11:23:22.850
> 
> 标签：hazelcast

在我们的实例关闭期间，我们收到类未找到异常。有没有人遇到过这个错误？有什么解决办法？

异常跟踪如下。

```
<Warning> <HTTP> <pl-1> <traffic-1> <[STANDBY] ExecuteThread: '2' for queue: 'weblogic
.kernel.Default (self-tuning)'> <weblogic> <> <> <1327067796337> <BEA-101162> <User defined listener com.ericsson.
lifecycle.web.LifecycleListener failed: java.lang.NoClassDefFoundError: com/hazelcast/impl/ClientService$Worker$1.
java.lang.NoClassDefFoundError: com/hazelcast/impl/ClientService$Worker$1
        at com.hazelcast.impl.ClientService$Worker.stop(ClientService.java:187)
        at com.hazelcast.impl.ClientService.shutdown(ClientService.java:155)
        at com.hazelcast.impl.Node.shutdown(Node.java:372)
        at com.hazelcast.impl.Node.shutdown(Node.java:349)
        at com.hazelcast.impl.FactoryImpl.shutdown(FactoryImpl.java:320)
        at com.hazelcast.impl.LifecycleServiceImpl.shutdown(LifecycleServiceImpl.java:105)
        at com.hazelcast.impl.FactoryImpl.shutdown(FactoryImpl.java:519)
        at com.hazelcast.impl.FactoryImpl$HazelcastInstanceProxy.shutdown(FactoryImpl.java:191)
        at com.ericsson.jee.ngin.ss7.correlation.model.CorrelationLifecycle.stop(CorrelationLifecycle.java:45) 
```

Hazelcast 版本 - 2.0.3

这是一个错误吗？在以后的版本中是否有任何修复程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:00:10.080

2.0 及更新版本中没有 com.hazelcast.impl.ClientService。

您的类路径中可能同时具有 1.9 和 2.0 版本，这会导致问题。