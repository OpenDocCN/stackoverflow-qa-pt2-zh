# StackOverflow 问答 14269000-14269999

# android - Android 视频播放但没有出现 VideoView

> ID：14269001
> 
> 赞同：4
> 
> 时间：2013-01-10T23:13:24.437
> 
> 标签：android, maps, android-videoview

当用户更改位置时，我正在尝试在 Google 地图上播放视频。最初在 activity_main.xml 中，videoview 设置为不可见。当视频即将播放时，我将视频视图设置为可见并设置 ZOrderOnTop(true)。

当视频由 onLocationChanged 触发时，视频视图不会出现。但我可以听到视频中的音频，所以我知道它正在播放。

但是，如果我首先在 onCreate 中播放视频，则播放成功，并出现在屏幕上。并且 onLocationChanged 视频也会播放并出现在屏幕上。

如果我在 onCreate 中不播放视频，为什么不会出现 videovideo 视图？

**activity_main.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:gravity="center" >

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView android:id="@+id/top_message"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:minWidth="110sp" android:textColor="#66CCFF"
        android:textStyle="bold" android:textSize="20sp" android:text="Default Text" />

    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_below="@id/top_message"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" /> 

</RelativeLayout>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <VideoView 
        android:visibility="invisible"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:id="@+id/myVideo"
        android:gravity="center"
        android:layout_centerInParent="true" />

    </RelativeLayout>

</FrameLayout> 
```

**MainActivity.java**

```
public class MainActivity extends FragmentActivity implements LocationListener {

private GoogleMap googleMap;
private TextView distanceTextView;
private VideoView videoView;
private LocationManager locationManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);        

    // setup overlay for text
    distanceTextView = (TextView)findViewById(R.id.top_message);
    distanceTextView.setText("Text set onCreate");

    // setup overlay for video
    videoView = (VideoView) findViewById(R.id.myVideo);

    // setup google map data
    googleMap = ((SupportMapFragment)(getSupportFragmentManager().findFragmentById(R.id.map))).getMap();
    googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    googleMap.getUiSettings().setCompassEnabled(true);
    googleMap.getUiSettings().setZoomControlsEnabled(true);
    googleMap.setMyLocationEnabled(true);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 1, this);
    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    // set current location and move map to that location
    if (location != null) {
        LatLng myPosition = new LatLng(location.getLatitude(),location.getLongitude());
        googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(myPosition, 15));
    }

    // if below is uncommented then secondvideo will also appear 
    //playVideo(new String("android.resource://" + getPackageName() + "/" + R.raw.firstvideo));

}

public void onLocationChanged(Location location) {
    locationManager.removeUpdates(this);
    distanceTextView.setText("Location has changed");
    playVideo(new String("android.resource://" + getPackageName() + "/" + R.raw.secondvideo));          
}

private void playVideo(String videoFile) {
    videoView.setVisibility(View.VISIBLE);
    videoView.setZOrderOnTop(true);

    MediaController mediaController = new MediaController(this);
    mediaController.setAnchorView(videoView);
    videoView.setMediaController(mediaController);
    videoView.setVideoPath(videoFile);
    videoView.start();
    videoView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            videoView.setVisibility(View.INVISIBLE);
            videoView.setZOrderOnTop(false);
            videoView.stopPlayback();
            return false;
        }
    });
}

@Override
public void onProviderDisabled(String arg0) {
    // TODO Auto-generated method stub
}

@Override
public void onProviderEnabled(String arg0) {
    // TODO Auto-generated method stub
}

@Override
public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:14:24.520

`setZOrderOnTop()`不能用于动态改变 z 水平。从[文档](http://developer.android.com/reference/android/view/SurfaceView.html#setZOrderOnTop%28boolean%29)中，

> 请注意，这必须在表面视图的包含窗口附加到窗口管理器之前设置。

附加视图后，调用`setZOrderOnTop()`没有任何效果。一种解决方案是始终拥有`VideoView`顶部并控制它是否`.setVisibility()`像您已经在做的那样被看到。您可以使用一次通话`setZOrderOnTop()`，`onCreate()`这可能是您在播放视频时可以正常工作的原因`onCreate`。

# html - 按钮的水平列，左对齐

> ID：14269002
> 
> 赞同：0
> 
> 时间：2013-01-10T23:13:38.310
> 
> 标签：html, css, asp.net-mvc-4

![按钮的水平列](../Images/8e8dcfda779622b17f19a69d8cfb56af.png)

我正在尝试创建一列按钮，但我希​​望它们左对齐。

我尝试了很多东西，但对 css/html5 还是个新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:46:15.983

使用无序列表：

```
<ul>
    <li><img src="/images/yourimage.png />Some Text</li>
    <li><img src="/images/yourimage.png />Some Text</li>
    <li><img src="/images/yourimage.png />Some Text</li>
</ul> 
```

# php - PHP，如何“安全” JSON 编码一个数组？

> ID：14269004
> 
> 赞同：3
> 
> 时间：2013-01-10T23:13:48.700
> 
> 标签：php, json, utf-8

我曾经认为这是100％：

```
file_put_contents ('cacheHere', json_encode($array)); 
```

但这只是 99%。它只能编码 utf8 编码的数据，所以：

```
file_put_contents ('cacheHere', json_encode(utf8_encode($array))); 
```

它仍然不行，因为 $array 是数组，而不是字符串。我知道我可以对一个字段进行 utf8 编码，但我需要一个通用的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T23:17:40.920

使用`array_walk_recursive`, 并在回调中检查当前条目是否为带有 . 的字符串`is_string`。如果是，那么`utf8_encode`它，否则保持原样。

```
json_encode (array_walk_recursive ($array, function (&$a) {
    if (is_string ($a)) {
        $a = utf8_encode ($a);
    }
})); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T11:02:49.457

一般的解决方案是让您的数据采用 UTF-8 格式。如果`utf8_encode`对您有用，那么您的数据实际上是用 ISO-8859-1 编码的。

如果数据来自数据库并且您使用的是 MySQL，您可以这样做以使数据库结果以 UTF-8 而不是 ISO-8859-1 格式提供给您：

```
$mysqli->set_charset('utf8'); 
```

在进行任何查询之前。

这只是一个示例，它实际上取决于您从哪里获取数据。一直看到[UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)。

# ios - 'Flock' iOS 应用程序如何检测照片的拍摄时间？

> ID：14269007
> 
> 赞同：6
> 
> 时间：2013-01-10T23:14:05.097
> 
> 标签：ios, notifications, flock

[Flock](http://theflockapp.com)是[Bump](https://bu.mp/)开发的一款相当新的 iOS 应用，它有一个有趣的功能。它以某种方式知道照片何时被另一个应用程序拍摄，通知用户（以通知中心的方式），并要求用户将它们分享到相册中。当然还有其他有趣的功能，但我对我正在开发的另一个应用程序的这个功能特别感兴趣。

我看不出 API 如何直接促进这一点。我仔细查看了通知 API 文档，应用程序当然可以注册以在未来的日期/时间向用户显示通知，从而在那时被用户打开......但我找不到任何系统通知拍摄照片时。通知 API 还允许服务器生成通知，但我不知道 Flock 的服务器端如何知道用户何时在不同的应用程序中拍照。

几天前我安装了该应用程序，我似乎只有在拍照时才收到通知。它似乎不仅仅是一个日常提醒。

Flock（以及可能的其他应用程序）如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T06:02:29.107

经过几天观察应用程序的行为（以及大量的谷歌搜索和关于文件锁定的神秘讨论），我强烈怀疑它是如何工作的：Flock 只是注册了[显着更改位置服务](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)，它唤醒了应用程序并在用户更改位置时提供一个小的处理窗口。文档说：

> 在唤醒时，您的应用程序将进入后台并给予少量时间来处理位置数据

我怀疑 Flock 正在检查图像库，如果添加了照片，则会触发本地通知。这与我的经验相吻合，即 Flock 在我离开家约 10 分钟后给我一个本地通知......如果任何 Bump/Flock 开发人员正在阅读这篇文章，这对我来说是整理照片的最糟糕时间并在相册中分享它们（也许我应该更频繁地使用公共交通工具）。

还有一些其他有趣的 SO 答案[here](https://stackoverflow.com/questions/4656214/iphone-backgrounding-to-poll-for-events/4808049#4808049)，[here](https://stackoverflow.com/questions/7291825/how-to-run-a-30sec-process-in-the-background-every-hour-iphone-app)和[here](https://stackoverflow.com/questions/10664527/schedule-an-ios-app-task-to-run-while-in-the-background) ...但在大多数情况下，他们讨论本地通知（只能安排在特定时间，并且总是会在那个时候提醒用户，所以不是真的后台任务）或为已被用户关闭的应用程序提供的 600 秒后台处理窗口（这当然是后台任务，但显然不适合每天运行一次后台任务等）。

Bump 开发人员还提供了一些关于应用程序底层架构的[线索](http://devblog.bu.mp/flock-for-android-a-technical-breakdown)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-01T22:27:26.337

我没有亲自使用过这个框架，但是在为客户做研究时我确实偶然发现了这个文档。

[Apple 照片框架参考](https://developer.apple.com/library/ios/documentation/Photos/Reference/Photos_Framework/)

在功能和概念下有一个**“更改观察”**条目，其中指出：

> 使用共享的 PHPhotoLibrary 对象为您获取的照片实体注册更改处理程序。每当另一个应用程序或设备更改资产的内容或元数据或集合中的资产列表时，照片都会告诉您的应用程序。PHChange 对象在每次更改之前和之后提供有关对象状态的信息，其语义使更新集合视图或类似界面变得容易。

看来您可以使用 PHPhotoLibrary 单例来[registerChangeObserver:](https://developer.apple.com/library/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/index.html#//apple_ref/occ/instm/PHPhotoLibrary/registerChangeObserver:)在您的类（采用[PHPhotoLibraryChangeObserver 协议）上从](https://developer.apple.com/library/ios/documentation/Photos/Reference/PHPhotoLibraryChangeObserver_Protocol/index.html#//apple_ref/doc/uid/TP40014405)[photoLibraryDidChange: 方法](https://developer.apple.com/library/ios/documentation/Photos/Reference/PHPhotoLibraryChangeObserver_Protocol/index.html#//apple_ref/occ/intfm/PHPhotoLibraryChangeObserver/photoLibraryDidChange:)接收[PHChange](https://developer.apple.com/library/ios/documentation/Photos/Reference/PHChange_Class/index.html#//apple_ref/occ/cl/PHChange)对象

# java - 哪个布局用于家庭替换应用程序/视图网格？

> ID：14269008
> 
> 赞同：0
> 
> 时间：2013-01-10T23:14:18.340
> 
> 标签：java, android

我正在尝试创建一个家庭替换应用程序，我想知道我的选择，我可以使用 TableLayout 或嵌套的 LinearLayouts 但图标的大小以及图标的行数和列数可以改变，所以我正在寻找更容易管理的东西，也许只是一种布局，并以某种方式自动容纳项目。

在 HTML div 中，您可以使用 float:left，如果您在容器上附加项目，它们可以像这样容纳：

![在此处输入图像描述](../Images/74e4a65b9b1343117d5c768322aafcac.png)

有没有办法在 Java 中做类似的事情？如果不是，推荐的创建网格布局的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:04:17.607

我最终使用了一组`<LinearViews>`并直接在它们上附加按钮，如果 rowsXcols 的数量可以变化，我认为这是最简单的方法。

```
 for(int c = 0; c < appCols; c++) { // Go through cols
        LinearLayout col = new LinearLayout(context);
        col.setOrientation(LinearLayout.VERTICAL);
        for(int r = 0; r < appRows; r++) { // Go through rows
            Button button = new Button(context);button.setText(allApps.get(n).activityInfo.loadLabel(pm).toString());
            button.setWidth(iconWidth);
            button.setHeight(iconHeight);
            // add app icon
            col.addView(button);
            n++;
        }
        // Add column
        layout.addView(col);
    } 
```

# architecture - l2缓存连接到ARM中的cpu

> ID：14269011
> 
> 赞同：0
> 
> 时间：2013-01-10T23:14:28.453
> 
> 标签：architecture, computer-architecture

我对 L2 缓存及其与 ARM 内核的连接有疑问。它是如何连接的？是通过缓存控制器还是直接与缓存控制器连接也连接到同一总线？如果很明显，我对此很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:42:23.477

至少一种架构说它是“通过”缓存控制器 - [http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0246h/index.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0246h/index.html)

# xml - 选择多个值，但前提是它们不为空

> ID：14269015
> 
> 赞同：1
> 
> 时间：2013-01-10T23:14:35.853
> 
> 标签：xml, xpath

鉴于这个简单的 XML 文档，

```
<root>
    <mode value="foo" icon="billing.png" />
    <mode value="bar" />
</root> 
```

我如何选择@value 和@icon，但前提是@icon 存在？我知道我能做到

```
/root/mode/@value | /root/mode/@icon 
```

但这仍然选择了 foo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:18:01.310

利用：

```
/root/mode[@value and @icon]/@value | /root/mode[@value and @icon]/@icon 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:17:18.693

尝试以下操作：

```
/root/mode/[string(@icon)] 
```

# reporting-services - SSRS 错误 - tablix 'Tablix1' 有一个带有内部成员的详细信息成员。详细成员只能包含静态内部成员

> ID：14269016
> 
> 赞同：2
> 
> 时间：2013-01-10T23:14:50.373
> 
> 标签：reporting-services, report, builder, ssrs-grouping

我对 SSRS 报告有疑问。它可能与分组有关，但不确定它是否能解决我的问题。

有给客户的信，他可能会通过 2-3 节课。所以每个客户可以有 1、2 或 3 类。现在，当我以正常方式执行此操作时，如果学生 1 通过两节课，它会显示 2 次学生数据。我需要在一封信中为学生查看所有课程。

这是信：

> XXX,
> 
> Rajagopal，布莱尔铂金公司，印度。
> 
> 这是您的赞赏证明。
> 
> 这是你通过的课程
> 
> Class1 植物学课程 - 132
> 
> Class2 动物学课程 - 536

相反，它显示为：

> XXX,
> 
> Rajagopal，布莱尔铂金公司，印度。
> 
> 这是您的赞赏证明。
> 
> 这是你通过的课程
> 
> Class1 植物学课程 - 132
> 
> XXX,
> 
> Rajagopal，布莱尔铂金公司，印度。
> 
> 这是您的赞赏证明。
> 
> 这是你通过的课程
> 
> Class2 动物学课程 - 536

请帮助我，以便我可以在一封信中查看所有课程。

答：我为第 1 类第 2 类做了一个子报告，并将其添加到主报告中，它有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:26:29.750

根据人员创建一个组，并在组标题中的类行上方放置行。将其设置为每组有一个新页面。

然后详细信息页面只有类部分。

您可以在组页脚中放置任何字母符号。

# php - 保留换行符txt php

> ID：14269017
> 
> 赞同：3
> 
> 时间：2013-01-10T23:14:56.133
> 
> 标签：php, echo

如何`.txt`从我的服务器读取文件并保留它的换行符？请注意，换行符不是这样`/n`或其他的，它们更像是

这个。你知道，只是一个纯文本的新行。

我想`.txt`从我的服务器回显文件，这是在 PHP 或其他东西中，同时保留换行符。

提前谢谢！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T23:18:26.680

为了输出？只需使用`nl2br`

```
$file = file_get_contents( 'file.txt' );
echo nl2br( $file ); 
```

也适用于`fopen`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T23:21:39.327

无需您执行任何操作即可保留*换行符*。您可以通过从命令行运行代码来轻松验证这一点，例如使用

```
php -r "readfile('text.txt');" 
```

但是，在 HTML 中，空白默认是[折叠的。](http://www-sul.stanford.edu/tools/tutorials/html2.0/whitespace.html)如果要保留它，请使用 CSS[`white-space`](http://www.w3.org/TR/CSS21/text.html#white-space-prop)属性，如下所示：

```
<div style="white-space: pre"><?php readfile('text.txt'); ?></div> 
```

# python - 时间序列中每秒、每小时、每天的请求数

> ID：14269021
> 
> 赞同：2
> 
> 时间：2013-01-10T23:15:13.040
> 
> 标签：python, r, time, ggplot2

我对 R 比较陌生，这是我第一次尝试使用它来实际分析一些数据。问题如下：我有一个 CSV 文件，其中包含为给定系统提供的请求数量的日志，格式如下：

```
# Unix timestamp, number of requests
1354810257,241624
1354810258,244759
1354810259,245307
1354810260,248961 
```

目前该文件包含与一周相关的信息。现在我需要获得一个图表，显示系统每秒、每小时和每天能够维持多少请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:43:55.353

我使用 Python 和 matplotlib 解决了它。代码与此类似：

```
import csv
from pylab import *
from itertools import groupby

def by_hour(value):
    return value[0] // 3600

def plot_data_for(data, map_, reduce_):
    keys = []
    values = []
    for k,v in groupby(data, key=map_):
        keys.append(k)
        values.append(reduce_(v))
    return (keys, values)

times = []
requests = []
reader = csv.reader(open("results.csv"))

for row in reader:
    times.append(int(row[0]))
    requests.append(int(row[1]))

increments = map(lambda x: x[1] - x[0], zip(requests, requests[1:] + [requests[-1]]))
plot(*plot_data_for(zip(times, increments), by_hour, lambda values: sum(map(lambda x: x[1], values)))) 
```

# javascript - 使用 xhrGET 从服务器获取对象数组

> ID：14269025
> 
> 赞同：1
> 
> 时间：2013-01-10T23:15:22.953
> 
> 标签：javascript, json, dojo

我目前有一个对象数组，我希望使用 xhrget 将其调用到我的 HTML 页面中。这是来自我的服务器的所述对象数组的片段：

```
[ 
    { "Name":"John" , "id":"1" }, 
    { "Name":"Anna" , "id":"2" }, 
    { "Name":"Peter" , "id": "3" }
    { "Name":"Peter" , "id": "4" }
] 
```

因此，我使用 xhrget 调用此对象数组

```
require(["dojo/request", "dojo/dom", "dojo/dom-construct", "dojo/json", "dojo/on", "dojo/domReady!", "dojo/_base/xhr"], 

function (dom,json,request,domconst,on,xhr){

    dojo.ready(function(){

        var targetNode = dojo.byId("licenseContainer");  

        var xhrArgs = {
            url: "http://141.41.11.71:3000/page.json",
            handleAs: 'json',
            timeout : 2000,

            load: function(data){

            targetNode.innerHTML = data;
        },
        error: function(error){
            targetNode.innerHTML = "An unexpected error occurred: " + error;
        }
    }

    var deferred = dojo.xhrGet(xhrArgs);
    });
}); 
```

我本质上希望将指定的对象放入由 ID 指定的节点/div 中。但是我不断收到错误消息：TypeError: 'undefined' is not a function。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:42:01.360

您可以使用值为 john 的方式访问 mane 属性`data[0].Name`

```
 var xhrArgs = {
        url: "http://141.41.11.71:3000/page.json",
        handleAs: 'json',
        timeout : 2000,

        load: function(data){

        targetNode.innerHTML = data[0].Name;
    },
    error: function(error){
        targetNode.innerHTML = "An unexpected error occurred: " + error;
    }
} 
```

编辑

要显示所有名称，您必须遍历数组。

```
 load: function(data){
            var html = '';
            for (var i = 0; i < data.length; i++)
                html += data[i].Name+'<br>';
            targetNode.innerHTML = html;
    }, 
```

# php - WooCommerce 购物车添加额外 标签

> ID：14269033
> 
> 赞同：0
> 
> 时间：2013-01-10T23:16:07.110
> 
> 标签：php, html, css, wordpress, woocommerce

我正在使用 WooCommerce 建立一个演示商店。一切似乎都很好，除了购物车页面在使用简码“[woocommerce_cart]”时在表单中添加了几个空段落标签。

检查时，从短代码生成的代码在 HTML 中如下所示：

```
<form method="post" action="http://organicthemes.com/demo/photographer/shopping-cart/">
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<table class="shop_table cart" cellspacing="0">
</form> 
```

你可以在这里查看页面， http: [//organicthemes.com/demo/photographer/shopping-cart/](http://organicthemes.com/demo/photographer/shopping-cart/)

我只能假设 WordPress autop 搞砸了。我找不到任何主题或插件导致此问题的原因。任何帮助，将不胜感激。

目前，我已经使用 CSS 尽可能准确地定位段落标签，但这是一个草率的修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:43:08.517

我没有在您链接到的示例页面中看到空段落标签，但我当然可以保证在我自己当前的 Woocommerce 项目中看到大量空段落标签。我肯定注意到问题出现在购物车表单（form-shipping.php 和 form-b​​illing.php）中，但我知道我也看到问题出现在商店的其他部分/方面（recent_products 短代码，用于一）。似乎 wp_autop() 正在应用于模板文件本身的空白。

这也是一种不受欢迎的修复，但从模板文件中删除空格似乎会删除空段落标签。不过，您不必最小化整个文件。到目前为止，我可以说，似乎问题是由空段落标签的父元素的结束标签之前的空格触发的。但不是空行......它似乎是催化剂的制表符或普通空格。

### TL;博士::

尝试删除空段落的父元素的结束标记之前存在的任何制表符或普通空格。

# qt - 在 Win7 上使用 Qt 4.8.4 构建的 UI 在 Win98 上看起来像

> ID：14269041
> 
> 赞同：0
> 
> 时间：2013-01-10T23:16:38.047
> 
> 标签：qt, mingw32

使用 mingw 4.7.2 手动构建的 Qt 4.8.4。我的问题。我认为它与清单文件有关，但我不确定，也不知道如何解决这个问题。我从官方网站获得的 Qt 资源。

如果需要，配置选项

`configure -debug-and-release -no-exceptions -nomake demos -nomake examples`

PS：对不起我的英语，这不是我的母语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:49:03.817

看起来 Qt 忘记构建 Windows 样式了。运行`configure --help`并寻找可用的选项，靠近结尾的地方有样式。也许在 mingw 上没有自动检测到适当的 windows 样式。

# android - 适用于 Android 的 Google Maps API v2：无法像已弃用的叠加层那样绘制

> ID：14269042
> 
> 赞同：2
> 
> 时间：2013-01-10T23:16:40.343
> 
> 标签：android, overlay, google-maps-android-api-2

我正在开发一个 Android 应用程序，并且我已经从 Google Maps for Android API v1 迁移到 v2。

在已弃用的版本 1 中，我创建了一个叠加层，用于在我的地图上绘制一些彩色形状（分隔区域）和信息文本，但现在我一直在查看 API v2 并且不能这样做。

我试图使用 Polygon 属性，但它没有填充任何颜色，可能是因为我的形状由于它们的图案而不能逆时针绘制，例如带有“U”图案的形状。另外，我也不知道如何在地图上放置文本（没有标记，只有文本）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:21:45.727

> 仍然不知道如何在地图中放置文字

创建一个`Bitmap`包含您的文本，并使用[一个`GroundOverlay`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/GroundOverlay)，或者可能是[一个`TileOverlay`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/TileOverlay)。

# jquery - 更改文本上跨度

> ID：14269051
> 
> 赞同：0
> 
> 时间：2013-01-10T23:17:20.860
> 
> 标签：jquery, jquery-selectors

我有这个 html

```
 <div class="flol pore">
                <a href="#"><span class="valdespl">Sector de Empleo</span> <i class="poab ico_arrowdesp bgindex"></i></a>
                <div class="poab despcnt dino">
                    <ul class="scroll">
                        <li><a data-value="1" href="#">Titulo de la Categoria Sector</a></li>
                        <li><a data-value="2" href="#">Titulo de la Categoria Sector</a></li>
                        <li><a data-value="3" href="#">Titulo de la Categoria Sector</a></li>
                    </ul>
                    <input type="hidden" name="sector" value="" class="inpval">
                </div>
            </div> 
```

当我想点击一个链接 ul 时，更改 span valdespl 的文本。

我尝试了几种方法，但我无法改变它

```
$('.scroll').delegate( 'a', 'click', function(e){
    e.preventDefault();
    $(this).parents('ul').prevAll('.despcnt').prev().find('span').text('hola');
}); 
```

任何想法？。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:20:57.783

尝试这个：

```
$('.scroll').on('click', 'a', function(e) { 
    var link = $(this);
    e.preventDefault();
    link.closest('.flol').find('.valdespl').text('hola');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:09:36.530

如果你正在做一个独特的函数，尝试使用 ID，因为对 id 和类的基准测试显示了很大的不同

简单尝试使用这个

```
$("ul.scroll li  a").on('click',function(e){
      $(".flol a").children(".valdespl").text("hello");
 }); 
```

工作[演示](http://jsfiddle.net/XCGqN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T23:39:15.887

如果你只是想改变那个跨度，那么这样的事情会起作用..

这是一个 jsFiddle ..[点击这里查看小提琴](http://jsfiddle.net/bKQVX/2/)

```
$(document).ready(function(){
  $('.scroll li a').click(function(e){
    $('.valdespl').text($(this).text());
    return false;
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T23:20:39.577

像这样的东西还是我错过了什么？

```
 $("ul.scroll").on('click',function(e){
       e.preventDefault();
       $("span.valdespl").html("Your text");
    }); 
```

# ruby-on-rails - 致命：不是 git 存储库...错误消息

> ID：14269058
> 
> 赞同：7
> 
> 时间：2013-01-10T23:17:43.230
> 
> 标签：ruby-on-rails, git, heroku, push

当我在 heroku 上 git push 时，我 `fatal: Not a git repository (or any of the parent directories): .git`多次收到此错误。在我的应用程序中一切正常，推送正常完成。我只是想知道为什么会这样。当调度程序任务运行时，我还在 heroku 的日志中看到相同的消息 4-5 次。任何想法？谢谢！

```
git push staging master

Counting objects: 41, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (21/21), done.
Writing objects: 100% (21/21), 1.74 KiB, done.
Total 21 (delta 20), reused 0 (delta 0)
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
      Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      Fetching gem metadata from https://rubygems.org/..........
      Fetching gem metadata from https://rubygems.org/..
      Using rake (10.0.3)
      Using i18n (0.6.1)
      Using multi_json (1.5.0)
      Using builder (3.0.4)
      Using erubis (2.7.0)
      Using journey (1.0.4)
      Using rack-cache (1.2)
      Using rack-test (0.6.2)
      Using jquery-rails (2.0.2)
      Using backbone-on-rails (0.9.2.1)
      Using bcrypt-ruby (3.0.1)
      Using sass (3.2.1)
      Using cancan (1.6.7)
      Using carrierwave (0.6.2) from git://github.com/jnicklas/carrierwave.git (at master)
      Using chosen-rails (0.9.8)
      Using coffee-rails (3.2.2)
      Using commonjs (0.2.6)
      Using orm_adapter (0.3.0)
          .......

      Using warden (1.2.1)
      Using devise (2.1.2)
      Using nokogiri (1.5.4)
      Using ruby-hmac (0.4.0)
      Using fog (1.3.1)
      Using gmaps4rails (1.5.5)
      Using jquery-datatables-rails (1.10.0)
      Using jquery-fileupload-rails (0.3.4)
      Using jquery-ui-rails (2.0.2)
      Using less (2.2.2)
      Using less-rails (2.2.6)
      Using bundler (1.3.0.pre.5)
      Using rails (3.2.11)
      Using newrelic_rpm (3.5.3.25)
      Using paper_trail (2.6.3)
      Using pg (0.13.2)
      Using sass-rails (3.2.5)
      Using simple_form (2.0.2)
      Using squeel (1.0.11)
      Using strong_parameters (0.1.5)
      Using therubyracer (0.10.2)
      Using twitter-bootstrap-rails (2.1.9)
      Using uglifier (1.2.5)
      Using validate_email (0.1.5)
      Using validate_url (0.2.0)
      Your bundle is complete! It was installed into ./vendor/bundle
      Cleaning up the bundler cache.
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
      Running: rake assets:precompile
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      fatal: Not a git repository (or any of the parent directories): .git
      Asset precompilation completed (274.30s)
-----> Rails plugin injection
      Injecting rails_log_stdout
      Injecting rails3_serve_static_assets
-----> Discovering process types
      Procfile declares types      -> (none)
      Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size: 31.8MB
-----> Launching... done, v22
      http://***************-staging.herokuapp.com deployed to Heroku 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:08:40.850

这真的很晚了，但你应该试试这个：

```
heroku labs:enable user-env-compile 
```

在控制台中运行它，然后更新您的存储库。然后推送到github……然后推送到heroku。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T02:18:15.693

你需要`git init`在你的项目中初始化一个 git 存储库。您可以在以下链接中看到 heroku 配置[git remote doesn't seem to be working at all](https://stackoverflow.com/questions/3755529/git-remote-doesnt-seem-to-be-working-at-all)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T06:58:41.270

在本地编译资产然后推送到 heroku 对我有用。

这个：[https ://stackoverflow.com/a/22975650/7693](https://stackoverflow.com/a/22975650/7693)

# ios6 - 在 iOS 模拟器中杀死应用程序时的问题

> ID：14269060
> 
> 赞同：0
> 
> 时间：2013-01-10T23:17:57.263
> 
> 标签：ios6, xcode4.5

当我在 iPad 模拟器 (iOS 6) 上模拟我的应用程序并模拟终止应用程序时，它会将我带到 main.m 文件中的调试会话。它以绿色突出显示此方法并显示 Thread 1: signal SIGKILL

int main(int argc, char *argv[]) {

```
 @autoreleasepool {
      return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
 } 
```

}

当我再次运行应用程序时（模拟终止应用程序并再次重新打开它，它会将我带回到我杀死应用程序时所在的 viewController，但它已完全冻结。无法滚动，使用导航工具栏或编辑任何文本等。如果我然后转到主屏幕并再次返回应用程序，我只剩下一个空白的黑屏。我需要在 main.m 文件中编辑什么吗？我没碰过该文件中的任何内容。或者这可能就是模拟器的工作方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:22:28.433

不需要对 main.m 进行更改，但是您必须为应用程序终止做准备，并在它再次激活时重新设置它。请参阅委托方法的[此文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786)。特别是。那些在“监控应用程序状态更改”中描述的内容。

# r - 将二进制字符串转换为R中的数据矩阵

> ID：14269062
> 
> 赞同：1
> 
> 时间：2013-01-10T23:18:18.377
> 
> 标签：r

我如何将 M 转换为 12 x m 的数字矩阵（例如，每个单元格一位）：

```
library(R.utils)
m<-5    
k<-12   
W<-sample(1:(2**m),k)
M<-matrix(intToBin(V),k,1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:30:45.717

`intToBin`将返回二进制表示的字符串。

您可以拆分此字符串，转换为整数，然后合并行。

```
 M<-do.call(rbind, lapply(strsplit(intToBin(W),''), as.integer)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:31:35.267

`intToBin`正在返回字符，因此`strsplit`在放入矩阵之前将其分解为单个数字（位）。

```
m <- 5
k <- 12
W <- sample(1:(2**m), k)
M <- matrix(as.numeric(unlist(strsplit(intToBin(W), ""))), nrow= k, byrow = TRUE)
> M
      [,1] [,2] [,3] [,4] [,5] [,6]
 [1,]    1    0    0    0    0    0
 [2,]    0    1    1    0    0    0
 [3,]    0    0    0    1    1    0
 [4,]    0    1    0    0    1    1
 [5,]    0    1    0    1    1    0
 [6,]    0    1    1    1    0    0
 [7,]    0    0    0    0    0    0
 [8,]    0    1    1    1    1    0
 [9,]    1    1    0    1    0    1
[10,]    1    0    0    1    1    1
[11,]    0    0    1    1    1    1
[12,]    0    0    1    1    0    1 
```

# ruby - Ruby 中的 to_json，键周围没有引号

> ID：14269065
> 
> 赞同：2
> 
> 时间：2013-01-10T23:18:55.350
> 
> 标签：ruby

以下两行产生相同的输出：

```
1.9.3p327 :015 > {:key=>1234}.to_json
=> "{\"key\":1234}" 
1.9.3p327 :016 > {"key"=>1234}.to_json
=> "{\"key\":1234}" 
```

这是以下json：

```
{
  "key" : 1234
} 
```

我怎样才能让它生产`"{key:1234}"`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:30:14.243

您想要实现的输出不是 JSON。这是非法的。很明显，JSON 库将生成 JSON 输出，而不是 JSON 以外的东西。

如果你想输出不是 JSON 的东西，你需要使用一个不是 JSON 的库。在这种特殊情况下，看起来输出格式是您自己编造的，因此您可能必须自己编写库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-17T22:31:25.983

另一张海报关于它不是有效的 JSON 是正确的。我只是想使用冒号而不是哈希火箭将控制台中的 ruby​​ 对象复制到我的代码中

在这种情况下，您可以使用：[https ://github.com/awesome-print/awesome_print](https://github.com/awesome-print/awesome_print)

```
ap({key: 1234}, ruby19_syntax: true, index: false) 
```

# java - 用 dat 文件填充 arrayList

> ID：14269067
> 
> 赞同：0
> 
> 时间：2013-01-10T23:19:01.913
> 
> 标签：java, arrays, arraylist

这是代码：

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;
import java.util.ArrayList;
import java.util.Collections;
import static java.lang.System.*;

public class MadLib
{
private ArrayList<String> verbs = new ArrayList<String>();
private ArrayList<String> nouns = new ArrayList<String>();
private ArrayList<String> adjectives = new ArrayList<String>();

public MadLib()
{
    loadNouns();
    loadVerbs();
    loadAdjectives();
    out.println(nouns);
}

public MadLib(String fileName)
{
    //load stuff
    loadNouns();
    loadVerbs();
    loadAdjectives();

    try{
        Scanner file = new Scanner(new File(fileName));
    }
    catch(Exception e)
    {
        out.println("Houston we have a problem!");
    }
}

public void loadNouns()
{
    nouns = new ArrayList<String>();
    try{
        //nouns = new ArrayList<String>();
        String nou = "";
        Scanner chopper = new Scanner(new File ("nouns.dat"));

        //chopper.nextLine();
        while(chopper.hasNext()){
            nou = chopper.next();
            out.println(nou);
            nouns.add(nou);
            //chopper.nextLine();
        }
        //chopper.close();
        out.println(nouns.size());
    }
    catch(Exception e)
    {
        out.println("Will");
    }       
}

public void loadVerbs()
{
    verbs = new ArrayList<String>();
    try{
        Scanner chopper = new Scanner(new File("verbs.dat"));
        while(chopper.hasNext()){
            verbs.add(chopper.next());
            chopper.nextLine();
        }
        chopper.close();
    }
    catch(Exception e)
    {
        out.println("run");
    }
}

public void loadAdjectives()
{
    adjectives = new ArrayList<String>();
    try{
        Scanner chopper = new Scanner(new File("adjectives.dat"));
        while(chopper.hasNext()){
            adjectives.add(chopper.next());
            chopper.nextLine();
        }
        chopper.close();
    }
    catch(Exception e)
    {
    }
}

public String getRandomVerb()
{

    String verb = "";
    int num = 0;
    num = (int)(Math.random()*(verbs.size()-1));
    verb = verbs.get(num);
    return verb;
}

public String getRandomNoun()
{

    String noun = "";
    int num = 0;
    if(nouns == null){
        loadNouns();
    }
    double rand = (Math.random());
    num = (int)(rand * (nouns.size()-1));
    out.println(num);
    noun = nouns.get((int) num);
    out.print(noun);
    return noun;
}

public String getRandomAdjective()
{

    String adj = "";
    int num = 0;
    num = (int)(Math.random()*(adjectives.size()-1));
    adj = adjectives.get(num);
    return adj;
}       

public String toString()
{
    String output = "The " + getRandomNoun() + getRandomVerb() + " after the " + getRandomAdjective() + getRandomAdjective() + getRandomNoun() + " while the " + getRandomNoun() + getRandomVerb() + " the " + getRandomNoun();
   return output;
}
} 
```

这是其中一个 .dat 文件（除了它们包含的特定单词之外，其他两个完全相同）：

```
dog
pig
chicken
building
car
person
place
thing
truck
city
state
school
student
bird
turkey
lion
tiger
alligator
elephant 
```

我的问题是我无法让我的任何人`arrayLists`读入他们适当的 .dat 文件和我的 POV，我的代码似乎应该这样做

**更新**

除了没有“Will”之外的当前输出（我删除了该行）：

```
run
[ ] 
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 0, Size: 0 
at java.util.ArrayList.rangeCheck(Unknown Source) 
at java.util.ArrayList.get(Unknown Source)
at MadLib.getRandomNoun(MadLib.java:130)
at MadLib.toString(MadLib.java:147) 
at java.lang.String.valueOf(Unknown Source) 
at java.io.PrintStream.println(Unknown Source)
at Lab16d.main(Lab16d.java:18) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:04:24.313

```
import java.io.File;
import java.io.IOException;
import java.util.Random;
import java.util.Scanner;
import java.util.ArrayList;
import java.util.Collections;

import static java.lang.System.*;

public class MadLib {
    private ArrayList<String> verbs = new ArrayList<String>();
    private ArrayList<String> nouns = new ArrayList<String>();
    private ArrayList<String> adjectives = new ArrayList<String>();

    public static void main(String args[]) {
        MadLib a = new MadLib();
        System.out.println(a.toString());
    }

    public MadLib() {
        loadAllWords();
        System.out.println(nouns);
    }

    public MadLib(String fileName) {
        loadAllWords();

        try {
            Scanner file = new Scanner(new File(fileName));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void loadAllWords() {
        loadNouns();
        loadVerbs();
        loadAdjectives();
    }

    public void loadNouns() {
        nouns = loadFile("nouns.dat");
    }

    public void loadVerbs() {
        verbs = loadFile("verbs.dat");
    }

    public void loadAdjectives() {
        adjectives = loadFile("adjectives.dat");
    }

    public ArrayList<String> loadFile(String filename) {
        ArrayList<String> words = new ArrayList<String>();
        try {
            Scanner chopper = new Scanner(new File(filename));
            while (chopper.hasNext()) {
                words.add(chopper.next());
                // just calling nextLine will cause an exception at the end of the file unless you have an blank line there on purpose, so this makes sure it does
                if (chopper.hasNext()) {
                    chopper.nextLine();
                }
            }
            chopper.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return words;
    }

    public String getRandomWord(ArrayList<String> words) {
        Random rand = new Random();
        int num = rand.nextInt(words.size());
        String word = nouns.get(num);
        System.out.println(word);
        return word;
    }

    public String getRandomVerb() {
        if (verbs == null) {
            loadNouns();
        }
        return getRandomWord(verbs);
    }

    public String getRandomNoun() {
        if (nouns == null) {
            loadNouns();
        }
        return getRandomWord(nouns);
    }

    public String getRandomAdjective() {
        if (adjectives == null) {
            loadNouns();
        }
        return getRandomWord(adjectives);
    }

    public String toString() {
        return "The " + getRandomNoun() + " " + getRandomVerb() + " after the " + getRandomAdjective()  + " " +  getRandomAdjective()  + " " +  getRandomNoun() + " while the " + getRandomNoun()  + " " +  getRandomVerb() + " the " + getRandomNoun();
    }
} 
```

# jquery - 在菜单项单击时刷新 jqgrid，从不同的 URL 获取数据

> ID：14269074
> 
> 赞同：1
> 
> 时间：2013-01-10T23:20:00.510
> 
> 标签：jquery, jqgrid

这是我之前在[此处](https://stackoverflow.com/questions/13765715/trouble-to-displaying-json-data-on-jqgrid-and-formatting)发布的问题的后续。多亏了奥列格的回答，我的网格现在可以正确显示了。但是，现在我需要在引导菜单项单击时使用不同的 URL 刷新 jqgrid 中的数据。以下是我的代码：

```
$("#menuitem").click(function(e){
$("#grid").jqGrid('setGridParam', {url: '/getdata?id=1234&name=val.text'});
    $('#grid').trigger("reloadGrid");
}); 
```

我们从 ajax 请求中获取数据后，会动态添加菜单选项。触发重新加载时，网格似乎正在重新加载。但是，它似乎从旧 URL('/getdata') 获取数据，而不是具有不同参数集的新 URL。我也尝试了[这里](https://stackoverflow.com/questions/1297044/reload-a-loaded-jqgrid-with-a-different-table-data)提到的解决方案，但在我的情况下它不起作用，因为我已经动态添加了菜单项。

任何帮助是极大的赞赏。

编辑：我查看了关于萤火虫的页面请求。当我单击菜单项时，我没有看到请求。我还添加了

```
 $("#list").jqGrid('GridUnload'); 
```

到[这个](https://stackoverflow.com/questions/2475379/update-data-in-jqgrid?rq=1)问题的答案中提到的点击处理程序函数。它为我清除了网格，但没有重新加载。所以我在那里添加了 jqgrid 的代码，然后它工作了，jqgrid 显示了新数据。所以我的更改代码如下所示：

```
$("#menuitem").click(function(e){
    $("#list").jqGrid('GridUnload'); 
    $("#grid").jqGrid({
       url: '/getdata?id=1234&name=val.text'',
       datatype: "json",
       colNames: ['data'],
       colModel: [
            {name: 'data', align: 'center'}
       ],
       jsonReader: {
             root: "logs",
            cell: "",
           id: function () {
             return function () {
               return $.jgrid.randId();
             }
           },
       page: function() { return 1; },
       total: function() { return 1; },
       records: function(obj) { return obj.logs.length; }
    },
   loadonce: true,
   viewrecords: true,
   autowidth: true,
   ignoreCase: true,
   height: "auto",
   rowNum: 999,
   autoencode: true,
   beforeProcessing: function (data) {
       var items = data.data.data.split("\n"), i, l, item;
       data.logs = [];
       for (i = 0, l = items.length; i < l; i++) {
           item = $.trim(items[i]);
           if (item.length > 0) {
               data.logs.push([item]);
           }
   }
}
}).jqGrid('filterToolbar', {stringResult: true, searchOnEnter: false, defaultSearch: "cn"}); 
```

});

有一个更好的方法吗。它的工作看起来太笨重和沉重。有没有办法让重载网格工作？我想这是内部发生的事情，但是当您使用插件时，代码似乎太多了。

谢谢，

阿莎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:17:45.267

首先，您需要修复代码中的语法错误（如果错误不仅存在于问题的文本中）：

```
url: '/getdata?id=1234&name=val.text'', 
```

必须更换为

```
url: '/getdata?id=1234&name=val.text', 
```

您存在的主要问题`loadonce: true`是，如果您不想或不能在服务器端实现数据分页和过滤并且您希望 jqGrid 为您执行此操作，那么您使用的主要问题是非常实用的。您应该了解jqGrid`datatype`在`"json"`使用`"local"`. `loadonce: true`仅由于这些更改，所有下一次刷新网格内容的请求（分页、过滤、排序......）都将在*本地实现，而不向服务器发出任何请求*。如果您需要重新加载网格，则需要在重新加载网格之前将 的值重置`datatype`为`"json"`。`GridUnload`在以下情况下不需要使用 of ：

```
$("#grid").jqGrid('setGridParam', {
    url: '/getdata?id=1234&name=val.text',
    datatype: "json"
}).trigger("reloadGrid"); 
```

顺便说一句，只有在需要*更改*`url`参数时才需要设置参数。如果您只想使用与之前相同的 URL 重新加载内容，则只需重置.*`datatype: "json"`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:07:48.400

试试这个

改变

```
loadonce: true, 
```

到

```
loadonce: false, 
```

我认为 loadonce 是问题*

# c# - JSON.NET DeserializeObject 从数组按顺序到列表

> ID：14269077
> 
> 赞同：0
> 
> 时间：2013-01-10T23:20:21.463
> 
> 标签：c#, json, json.net

我正在尝试按顺序将 Json 对象反序列化为动态列表，所以我有：

杰森：

```
 string json = "{'elements':[
                     {'EntityA':[
                               {'name ':'Jhon'}
                               ],
                      'EntityB':[
                               {'title' : 'car'}
                               ],
                      'EntityB':[
                               {'title':'aaa'}
                               ],
                      'EntityA':[
                               {'name' : 'Alice'}
                               ]]}"; 
```

.NET 类基类：

```
public interface EntitysInterface{}

public class EntityA: EntitysInterface
{
   public string name { get; set; }
}

public class EntityB: EntitysInterface
{
   public string title { get; set; }
}

public class Entitys
{
    public List<EntitysInterface> elements { get; set; } //EntityA, EntityB,...

    public Entitys() 
    {
    }
} 
```

我的反序列化对象困难：

```
Entitys listFinaly = JsonConvert.DeserializeObject<Entitys>(json); 
```

**异常“类型是接口或抽象类，无法实例化。:(”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:33:16.633

JSON.NET 反序列化器告诉您它无法确定`EntitysInterface`您想要选择哪个对象。它需要你给它一个提示。

`ContractResolver`有助于给出提示。

[这篇文章回答了一个类似的问题。](https://stackoverflow.com/questions/7987302/deserialize-classes-which-inherit-from-superclass-with-json-net)

编辑：

JSON.Net 文档中有一个[很好](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Serialization_IContractResolver.htm)的示例。

# asp.net-mvc - 重命名 ASP MVC 项目文件夹

> ID：14269078
> 
> 赞同：1
> 
> 时间：2013-01-10T23:20:25.600
> 
> 标签：asp.net-mvc, visual-studio-2010

我最近需要将一个 Intranet 网站的名称从西班牙更改为莫奈。转换完成并且网站能够运行（至少看起来如此），直到我删除了主项目文件夹以重命名它。现在，当我尝试调试时出现以下错误：

```
The request for 'Home' has found the following matching controllers:
Monet.Controllers.HomeController
SPAIN.Controllers.HomeController 
```

我已完成对旧站点名称 (SPAIN) 的整个解决方案的搜索，但找不到任何东西。有人对我想看的地方有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:29:46.943

您很可能在 /bin 目录中仍然有旧的编译程序集；最有可能命名`Spain.dll`由于您更改了项目名称，因此生成的程序集也会更改。如果您没有删除旧的，它仍然存在，并且应用程序仍然会加载它。

# mysql - 用于从磁盘读取文件的 MySQL UDF：MySQL 在每第二个 UDF 调用时都会崩溃

> ID：14269080
> 
> 赞同：1
> 
> 时间：2013-01-10T23:20:47.953
> 
> 标签：mysql, c, stored-procedures, user-defined-functions

我正在尝试创建一个 MySQL UDF getFile()，它应该从磁盘上的某个目录返回文本文件的内容。问题是调用一次或两次，但在第二次或第三次调用 UDF 时 MySQL 服务器崩溃。

我无法通过直接从 mysql 控制台调用 getFile() 来重现该错误，在这里它似乎工作正常 - 它似乎仅在我从存储过程调用 UDF 时发生。当我只调用小（2.5 k）“会话”文件而忽略较大的“mailConfirmation”（45 k）和“mailProtocol”（88 k）文件时，错误也会消失，所以它似乎与文件有关尺寸。

MySQL 版本：5.1.49-3

操作系统：Debian 6 挤压

任何建议或想法将不胜感激 - 在此先感谢！

这是 UDF：

```
/*
 * Skeleton libary for MySQL.
 * A set of MySQL user defined functions (UDF) to [DESCRIPTION]
 *
 * Copyright (C) [YYYY YOUR NAME <YOU@EXAMPLE.COM>]
 *
 * This library is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2.1 of the License, or (at
 * your option) any later version.
 *
 * This library is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser
 * General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this library; if not, write to the Free Software Foundation, Inc.,
 * 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
 */

#include "mysqludf.h"

/* For Windows, define PACKAGE_STRING in the VS project */
#ifndef __WIN__
#include "config.h"
#endif

/* These must be right or mysqld will not find the symbol! */
#ifdef  __cplusplus
extern "C" {
#endif
    DLLEXP my_bool getFile_init(UDF_INIT *initid, UDF_ARGS *args, char *message);
    DLLEXP void getFile_deinit(UDF_INIT *initid);
    DLLEXP char *getFile(UDF_INIT *initid, UDF_ARGS *args, char *result, unsigned long *length, char *is_null, char *error);
#ifdef  __cplusplus
}
#endif

/*
 * Output the library version.
 * dbrw_info()
 */

my_bool getFile_init(UDF_INIT *initid, UDF_ARGS *args, char *message)
{
    if(!(args->arg_count == 3))
    {
        strcpy(message, "Three arguments expected! (table, uuid, column)");
        //strcpy(message, "Error");
        return 1;
    }

    char *input_file_name;
    asprintf(&input_file_name, "%s%s%s%s%s%s", "/var/lib/mysqlFiles/", args->args[0], "/", args->args[1], "_", args->args[2]);

    if (FILE * file = fopen(input_file_name, "r"))
    {
        fclose(file);
    }
    else
    {
        strcpy(message, "File not found!");
        //strcpy(message, "Error");
        return 1;
    }

    return 0;
}

void getFile_deinit(UDF_INIT *initid)
{
}

char* getFile(UDF_INIT *initid, UDF_ARGS *args, char* result, unsigned long* length,    char *is_null, char *error)
{
    char *input_file_name;
    asprintf(&input_file_name, "%s%s%s%s%s%s", "/var/lib/mysqlFiles/", args->args[0], "/", args->args[1], "_", args->args[2]);

    char *file_contents;
    long input_file_size;
    FILE *input_file = fopen(input_file_name, "rb");
    fseek(input_file, 0, SEEK_END);
    input_file_size = ftell(input_file);
    rewind(input_file);
    file_contents = (char*) malloc(input_file_size * (sizeof(char)));
    fread(file_contents, sizeof(char), input_file_size, input_file);
    fclose(input_file);

    result=file_contents;

    *length = strlen(result);       
    return result;
} 
```

正在从存储过程调用 UDF：

```
CREATE PROCEDURE getOrder
(
    IN authKey_in CHAR(255),
    IN orderNumber  CHAR(255)
)

BEGIN
    DECLARE customerId INTEGER(11);
    DECLARE orderUUID CHAR(32);

    SET customerId=getCustomerId(authKey_in);

    IF customerId=-1 THEN
        SELECT 'authKey_expired' AS error;
    ELSEIF customerId=-2 THEN
        SELECT 'authKey_invalid' AS error;
    ELSE

        SELECT order_uuid
        FROM `order`
        WHERE 
            order_orderNumber=orderNumber AND
            order_customer_id=customerId
        INTO orderUUID;

        SELECT
            order_customer_id,
            order_hasBeenCollected,
            order_id,
            order_orderNumber,
            order_orderValue,
            order_paymentMethod,
            order_sofortConfirmation,
            order_synced,
            order_timestamp,
            order_timestamp_lastChange,
            order_uuid,
            getFile("order", orderUUID, "session") AS order_session,
            getFile("order", orderUUID, "mailProtocol") AS order_confirmationMail_protocol,
            getFile("order", orderUUID, "mailConfirmation") AS order_confirmationMail_text,
            DATE_FORMAT(
                        order_timestamp,
                        "%d.%m.%Y"
                       ) AS order_timestamp_readable
        FROM `order`
        WHERE
            order_orderNumber=orderNumber AND
            order_customer_id=customerId;

    END IF;
END| 
```

这是 MySQL 从 /var/log/syslog 的输出：

```
Jan 11 00:01:21 devserver mysqld: 130111  0:01:21 - mysqld got signal 11 ;
Jan 11 00:01:21 devserver mysqld: This could be because you hit a bug. It is also possible that this binary
Jan 11 00:01:21 devserver mysqld: or one of the libraries it was linked against is corrupt, improperly built,
Jan 11 00:01:21 devserver mysqld: or misconfigured. This error can also be caused by malfunctioning hardware.
Jan 11 00:01:21 devserver mysqld: We will try our best to scrape up some info that will hopefully help diagnose
Jan 11 00:01:21 devserver mysqld: the problem, but since we have already crashed, something is definitely wrong
Jan 11 00:01:21 devserver mysqld: and this may fail.
Jan 11 00:01:21 devserver mysqld: 
Jan 11 00:01:21 devserver mysqld: key_buffer_size=4294967296
Jan 11 00:01:21 devserver mysqld: read_buffer_size=131072
Jan 11 00:01:21 devserver mysqld: max_used_connections=2
Jan 11 00:01:21 devserver mysqld: max_threads=50
Jan 11 00:01:21 devserver mysqld: threads_connected=2
Jan 11 00:01:21 devserver mysqld: It is possible that mysqld could use up to 
Jan 11 00:01:21 devserver mysqld: key_buffer_size + (read_buffer_size + sort_buffer_size)*max_threads = 4303618 K
Jan 11 00:01:21 devserver mysqld: bytes of memory
Jan 11 00:01:21 devserver mysqld: Hope that's ok; if not, decrease some variables in the equation.
Jan 11 00:01:21 devserver mysqld: 
Jan 11 00:01:21 devserver mysqld: thd: 0x7f8291eae3f0
Jan 11 00:01:21 devserver mysqld: Attempting backtrace. You can use the following information to find out
Jan 11 00:01:21 devserver mysqld: where mysqld died. If you see no messages after this, something went
Jan 11 00:01:21 devserver mysqld: terribly wrong...
Jan 11 00:01:21 devserver mysqld: stack_bottom = 0x7f81867e0e88 thread_stack 0x30000
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(my_print_stacktrace+0x29) [0x7f82910e8829]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(handle_segfault+0x404) [0x7f8290df2b14]
Jan 11 00:01:21 devserver mysqld: /lib/libpthread.so.0(+0xeff0) [0x7f8290654ff0]
Jan 11 00:01:21 devserver mysqld: /lib/libc.so.6(fseek+0x1) [0x7f828f12b891]
Jan 11 00:01:21 devserver mysqld: /usr/lib/mysql/plugin/dbrw.so(getFile+0x7e) [0x7f81867e2c1e]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(Item_func_udf_str::val_str(String*)+0x80) [0x7f8290d64900]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(Item::send(Protocol*, String*)+0x3e) [0x7f8290d30eae]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(select_send::send_data(List<Item>&)+0x107) [0x7f8290de05f7]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(+0x3d1b7a) [0x7f8290e53b7a]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(+0x3dda00) [0x7f8290e5fa00]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(JOIN::exec()+0xba5) [0x7f8290e748f5]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(mysql_select(THD*, Item***, TABLE_LIST*, unsigned int, List<Item>&, Item*, unsigned int, st_order*, st_order*, Item*, st_order*, unsigned long long, select_result*, st_select_lex_unit*, st_select_lex*)+0x142) [0x7f8290e70622]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(handle_select(THD*, st_lex*, select_result*, unsigned long)+0x174) [0x7f8290e75f24]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(+0x37edfa) [0x7f8290e00dfa]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(mysql_execute_command(THD*)+0x516) [0x7f8290e04df6]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(sp_instr_stmt::exec_core(THD*, unsigned int*)+0x1c) [0x7f8290f6047c]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(sp_lex_keeper::reset_lex_and_exec_core(THD*, unsigned int*, bool, sp_instr*)+0x1c5) [0x7f8290f65c65]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(sp_instr_stmt::execute(THD*, unsigned int*)+0x124) [0x7f8290f65f74]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(sp_head::execute(THD*)+0x5d3) [0x7f8290f62fa3]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(sp_head::execute_procedure(THD*, List<Item>*)+0x51c) [0x7f8290f6472c]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(mysql_execute_command(THD*)+0x2736) [0x7f8290e07016]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(mysql_parse(THD*, char const*, unsigned int, char const**)+0x3fb) [0x7f8290e0a30b]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(dispatch_command(enum_server_command, THD*, char*, unsigned int)+0xb34) [0x7f8290e0ae54]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(do_command(THD*)+0xea) [0x7f8290e0bd3a]
Jan 11 00:01:21 devserver mysqld: /usr/sbin/mysqld(handle_one_connection+0x235) [0x7f8290dfda25]
Jan 11 00:01:21 devserver mysqld: /lib/libpthread.so.0(+0x68ca) [0x7f829064c8ca]
Jan 11 00:01:21 devserver mysqld: /lib/libc.so.6(clone+0x6d) [0x7f828f19492d]
Jan 11 00:01:21 devserver mysqld: Trying to get some variables.
Jan 11 00:01:21 devserver mysqld: Some pointers may be invalid and cause the dump to abort...
Jan 11 00:01:21 devserver mysqld: thd->query at 0x7f8291eea5c8 = SELECT
Jan 11 00:01:21 devserver mysqld:             order_customer_id,
Jan 11 00:01:21 devserver mysqld:             order_hasBeenCollected,
Jan 11 00:01:21 devserver mysqld:             order_id,
Jan 11 00:01:21 devserver mysqld:             order_orderNumber,
Jan 11 00:01:21 devserver mysqld:             order_orderValue,
Jan 11 00:01:21 devserver mysqld:             order_paymentMethod,
Jan 11 00:01:21 devserver mysqld:             order_sofortConfirmation,
Jan 11 00:01:21 devserver mysqld:             order_synced,
Jan 11 00:01:21 devserver mysqld:             order_timestamp,
Jan 11 00:01:21 devserver mysqld:             order_timestamp_lastChange,
Jan 11 00:01:21 devserver mysqld:             order_uuid,
Jan 11 00:01:21 devserver mysqld:             getFile("order",  NAME_CONST('orderUUID',_latin1'8A507ECC5B4F11E2B385F526BF61D66D' COLLATE 'latin1_swedish_ci'), "session") AS order_session,
Jan 11 00:01:21 devserver mysqld:             getFile("order",  NAME_CONST('orderUUID',_latin1'8A507ECC5B4F11E2B385F526BF61D66D' COLLATE 'latin1_swedish_ci'), "mailProtocol") AS order_confirmationMail_protocol,
Jan 11 00:01:21 devserver mysqld:             getFile("order",  NAME_CONST('orderUUID',_latin1'8A507ECC5B4F11E2B385F526BF61D66D' COLLATE 'latin1_swedish_ci'), "mailConfirmation") AS order_confirmationMail_text,
Jan 11 00:01:21 devserver mysqld:             DATE_FORMAT(
Jan 11 00:01:21 devserver mysqld:                         order_timestamp,
Jan 11 00:01:21 devserver mysqld:                         "%d.%m.%Y"
Jan 11 00:01:21 devserver mysqld:                        ) AS order_timestamp_readable
Jan 11 00:01:21 devserver mysqld:         FROM `o
Jan 11 00:01:21 devserver mysqld: thd->thread_id=17
Jan 11 00:01:21 devserver mysqld: thd->killed=NOT_KILLED
Jan 11 00:01:21 devserver mysqld: The manual page at http://dev.mysql.com/doc/mysql/en/crashing.html contains
Jan 11 00:01:21 devserver mysqld: information that should help you find out what is causing the crash.
Jan 11 00:01:21 devserver mysqld_safe: Number of processes running now: 0
Jan 11 00:01:21 devserver mysqld_safe: mysqld restarted
Jan 11 00:01:22 devserver mysqld: 130111  0:01:22 [Note] Plugin 'FEDERATED' is disabled.
Jan 11 00:01:22 devserver mysqld: InnoDB: Log scan progressed past the checkpoint lsn 38 555424888
Jan 11 00:01:22 devserver mysqld: 130111  0:01:22  InnoDB: Database was not shut down normally!
Jan 11 00:01:22 devserver mysqld: InnoDB: Starting crash recovery.
Jan 11 00:01:22 devserver mysqld: InnoDB: Reading tablespace information from the .ibd files...
Jan 11 00:01:25 devserver mysqld: InnoDB: Restoring possible half-written data pages from the doublewrite
Jan 11 00:01:25 devserver mysqld: InnoDB: buffer...
Jan 11 00:01:25 devserver mysqld: InnoDB: Doing recovery: scanned up to log sequence number 38 555424898
Jan 11 00:01:26 devserver mysqld: 130111  0:01:26  InnoDB: Started; log sequence number 38 555424898
Jan 11 00:01:26 devserver mysqld: 130111  0:01:26 [ERROR] Can't open shared library 'lib_mysqludf_preg.so' (errno: 0 /usr/lib/mysql/plugin/lib_mysqludf_preg.so: cannot open shared object file: No such file or directory)
Jan 11 00:01:26 devserver last message repeated 5 times
Jan 11 00:01:26 devserver mysqld: 130111  0:01:26 [Warning] Neither --relay-log nor --relay-log-index were used; so replication may break when this MySQL server acts as a slave and has his hostname changed!! Please use '--relay-log=mysqld-relay-bin' to avoid this problem.
Jan 11 00:01:26 devserver mysqld: 130111  0:01:26 [Note] Event Scheduler: Loaded 0 events
Jan 11 00:01:26 devserver mysqld: 130111  0:01:26 [Note] /usr/sbin/mysqld: ready for connections.
Jan 11 00:01:26 devserver mysqld: Version: '5.1.49-3'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  (Debian)
Jan 11 00:01:27 devserver mysqld: 130111  0:01:27 [ERROR] /usr/sbin/mysqld: Table './mysql/proc' is marked as crashed and should be repaired
Jan 11 00:01:27 devserver mysqld: 130111  0:01:27 [Warning] Checking table:   './mysql/proc' 
```

这些是正在读取的文件：

```
[root@devserver order]# ls -l
total 140
-rw-rw-rw- 1 mysql staff 45366 Jan 10 18:59 8A507ECC5B4F11E2B385F526BF61D66D_mailConfirmation
-rw-rw-rw- 1 mysql staff 88389 Jan 10 18:59 8A507ECC5B4F11E2B385F526BF61D66D_mailProtocol
-rw-rw-rw- 1 mysql staff  2518 Jan 10 18:59 8A507ECC5B4F11E2B385F526BF61D66D_session 
```

最后是创建 UDF 的语句：

```
USE mysql;

DROP FUNCTION IF EXISTS getFile;
CREATE FUNCTION getFile RETURNS STRING SONAME 'dbrw.so'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:57:35.120

经过数小时的测试和搜索，我终于发现问题似乎不是 UDF 本身，而是它从存储过程中调用 - 仅在从 SPROC 调用它时才会发生错误，而不是从 mysql 控制台调用它。

我偶然发现了这个 mysql 错误报告：

[http://bugs.mysql.com/bug.php?id=25207](http://bugs.mysql.com/bug.php?id=25207)

```
[20 Dec 2006 10:16] Zigmund Bulinsh
Description:
I have a function defined thgrough UDF DLL.
it is named as RaiseError (RaiseError_init alwais returns 1 and error message always equals to first parameter).

How to repeat:
select RaiseError('Some error'); raises MySQL error: 'Some error'

Now I define procedure which call this function (more comfortable way to use it)

CREATE PROCEDURE `Error`(p_text char(255))
begin
  declare x int;
  set x = RaiseError(p_text);
end

After calling this procedure from anywhere - MySQL crashes...

But this version works fine:

CREATE PROCEDURE `Error`(p_text VARchar(255))
begin
  declare x int;
  set x = RaiseError(p_text);
end 
```

这个错误报告给了我重要的线索。我尝试使用 UDF 参数的数据类型，我注意到当我使用字符串而不是变量时不会发生错误。

这会导致服务器崩溃：

```
DECLARE orderUUID CHAR(32);
...
getFile("order", orderUUID, "session") AS order_session,
getFile("order", orderUUID, "mailProtocol") AS order_confirmationMail_protocol,
getFile("order", orderUUID, "mailConfirmation") AS order_confirmationMail_text, 
```

虽然这很有效：

```
getFile("order", '8A507ECC5B4F11E2B385F526BF61D66D', "session") AS order_session,
getFile("order", '8A507ECC5B4F11E2B385F526BF61D66D', "mailProtocol") AS order_confirmationMail_protocol,
getFile("order", '8A507ECC5B4F11E2B385F526BF61D66D', "mailConfirmation") AS order_confirmationMail_text, 
```

所以我将数据类型从 CHAR(32) 更改为 VARCHAR(255) 并且服务器不再崩溃：

```
DECLARE orderUUID VARCHAR(255);
...
getFile("order", orderUUID, "session") AS order_session,
getFile("order", orderUUID, "mailProtocol") AS order_confirmationMail_protocol,
getFile("order", orderUUID, "mailConfirmation") AS order_confirmationMail_text, 
```

它既不适用于 CHAR(255) 也不适用于 VARCHAR(32)，它仅适用于 VARCHAR(255)。我还没有尝试过其他字符串长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:49:27.693

我怀疑“*length = strlen(result)”这一行。strlen() 将在 '\0' 处停止，因此显然有问题。

我不是 UDF 专家，但可能是 MySQL 期望“字符串”（REATE FUNCTION getFile RETURNS STRING）不是以空结尾的东西吗？

另外，作为旁注： char() 并不总是一个字节。ftell() 以字节为单位返回大小，因此乘以 sizeof(char) 实际上是错误的——如果将其传递给 malloc，则应该*除以*sizeof(char)。这在大多数架构中并不重要，因为*通常*一个 char 是一个字节。

最后—— rewind() 和 fseek() 可以安全混合吗？rewind 完全等同于 fseek(f, 0, SEEK_SET)，还是与 C 的运行时缓冲 IO 有关？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:09:23.253

嗯。我看到了`malloc`，但没有看到对应的`free`。

取消分配它分配的任何内存不是 UDF 的责任吗？这不是服务器调用 UDF x_deinit 函数的目的吗？

通常，我们希望`malloc`在 _init 函数中看到任何执行，并且`free`在 _deinit 函数中执行相应的操作。

但是，我不是 MySQL UDF 的 SME。我只是想知道该内存在哪里被释放。

# ruby-on-rails-3 - 从所有表中获取所有数据（Postgresql）

> ID：14269084
> 
> 赞同：0
> 
> 时间：2013-01-10T23:21:01.353
> 
> 标签：ruby-on-rails-3, postgresql, activerecord, rails-postgresql

```
data = Program.joins(:program_schedules, :channel).
        where(
         "program_schedules.start" => options[:time_range], 
           "programs.ptype" => "movie",
            "channels.country" => options[:country]).
      where("programs.official_rating >= ?", options[:min_rating]).
      group("programs.id").
      order("programs.popularity DESC") 
```

此查询仅检索“程序”表（我认为是因为“分组依据”子句）。如何从所有表（程序、programs_schedules、通道）中检索所有数据？

> 类程序 < ActiveRecord::Base
> 
> 属于_to :channel
> has_many :program_schedules

**Ruby on Rails 3.2**

**PostgreSQL 9.2**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:33:18.163

您是否正在寻找该方法提供[的关联的急切加载](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Eager+loading+of+associations)`includes`？

> 急切加载是一种查找某个类的对象和许多命名关联的方法。这是防止可怕的 1+N 问题的最简单方法之一，在该问题中，获取 100 个帖子，每个帖子都需要显示其作者会触发 101 个数据库查询。通过使用急切加载，101 个查询可以减少到 2 个。

* * *

**更新：**您可以通过附加到查询中
来获取 SQL 作为字符串。也可以提供帮助。`.to_sql``.explain`

如果您想将数据作为哈希而不是模型实例获取，您可以序列化查询结果并使用以下方法包含关联`.serializable_hash`：

```
data.serializable_hash(include: [:program_schedules, :channel]) 
```

您可以按照此处所述的相同方式定义要包含使用`:except`或选项的字段（其作用类似）： [http ://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json)`:only``.as_json`

# hadoop - Hadoop中Reducer的错误输入值

> ID：14269085
> 
> 赞同：2
> 
> 时间：2013-01-10T23:21:08.760
> 
> 标签：hadoop, mapreduce

我已经定义了一个自定义可写（称为*EquivalenceClsAggValue*），它在 Hadoop 中有一个 ArrayList 类型的字段（称为*aggValues*）。使用我的测试数据，Mapper 在 2 中为每个输出条目的*aggValues的大小。但是，当我在 Reducer 中检查**aggValues*的大小时，它给了我不同的大小！也就是说，大小累加（第一个元素有 2，第二个有大小 4，第三个有大小 6，依此类推）。可能是什么问题？

这就是我在 Mapper 中的输出方式：

```
EquivalenceClsAggValue outputValue = new EquivalenceClsAggValue();
                .....

output.collect(new IntWritable(outputValue.aggValues.size()),outputValue); 
```

在减速机中：

```
public void reduce(IntWritable key, Iterator<EquivalenceClsAggValue> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
     while(values.hasNext()){
            EquivalenceClsAggValue e = values.next();
            output.collect(new Text(key.toString()), new IntWritable(e.aggValues.size()));
..... 
```

输出是：

2 2

2 4

2 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:01:36.337

在您的`readFields`方法中，您需要清除数组列表的任何先前内容 - Hadoop 在调用之间重用相同的对象。

对不起，我在[你之前的帖子](https://stackoverflow.com/questions/14249128/implementation-of-custom-writable-in-hadoop)中错过了这个：

```
@Override
public void readFields(DataInput arg0) throws IOException {
  // add this statement to clear out previous contents
  aggValues.clear();

  int size = arg0.readInt();

  for (int i=0;i<size;i++){
    SortedMapWritable tmp = new SortedMapWritable();
    tmp.readFields(arg0);
    aggValues.add(tmp);
  }       
} 
```

# mdx - 缺少边界日期的 MDX 日期范围查询

> ID：14269086
> 
> 赞同：7
> 
> 时间：2013-01-10T23:21:27.397
> 
> 标签：mdx, data-warehouse, olap, pentaho, mondrian

我需要一个按日期过滤的蒙德里安 MDX 查询，其中一个或两个边界日期可能不存在。只要 2013-01-01 和 2013-01-08 维度都存在，我就使用下面的查询。如果两个日期之一不存在，则它不返回任何结果，即使两者之间的维度确实存在。即使在缺少边界日期维度的情况下，我如何让这个查询工作？

```
SELECT
NON EMPTY {Hierarchize({[Measures].[Number of Something]})} ON COLUMNS,
NON EMPTY {[Date].[2013-01-01]:[Date].[2013-01-08]} ON ROWS
FROM [Users] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T01:17:32.973

MDX 是在假设您引用的每个成员都存在的情况下构建的；最好通过预先计算这些值的单独表来确保所有可能的日期维度成员*确实存在。*

您可能会变得棘手并将该表实现为存储过程，但日期维度在总体方案中不会占用大量空间，因此您几乎不会这样做。

我不知道有什么其他方法可以解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:23:04.597

尝试消除 NON EMPTY

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T14:34:38.320

即使我还没有理解实现这个逻辑的原因，你可以通过添加来隐藏它。如果您在 Mondrian 中添加自定义成员，请尝试一下。

```
 /* Exclude Missing Member */
Create Set CurrentCube.[MissingMemberSet] As
iif(IsError(StrToMember("[Dimension].[Hierarchy].&[MEMBER]")),
{}, {[Dimension].[Hierarchy].&[MEMBER]});

Create Member CurrentCube.Measures.[Calculation on Missing Member]
AS
IIF ([MissingMemberSet].Count > 0,
([Dimension].[Hierarchy].&[MEMBER],Measures.[X Measure]),
0
)
,
FORMAT_STRING = "Currency",
LANGUAGE = 1033,
NON_EMPTY_BEHAVIOR = { [X Measure] },
VISIBLE = 1 ,  DISPLAY_FOLDER = 'Display Folder'  ; 
```

您也可以使用 IIF(IsError 或 IIF(Exists MDX 函数来实现。

# excel - 遍历工作簿和重命名选项卡

> ID：14269089
> 
> 赞同：-1
> 
> 时间：2013-01-10T23:21:38.733
> 
> 标签：excel, vba

> **可能重复：**
> [Excel VBA：批量重命名工作表](https://stackoverflow.com/questions/8679615/excel-vba-batch-renaming-sheets)

谢谢您的帮助。我可能没有适当地迭代。也许我应该为活动工作表分配一个整数？

```
Sub TabNames()

Dim ws As Worksheet

For Each ws In ActiveWorkbook.Worksheets
ActiveSheet.Name = "herp"
Next ws
ActiveSheet.Name = "derp"
Next ws
ActiveSheet.Name = "herp derp"
Next ws
ActiveSheet.Name = "derp herp"
Next ws
ActiveSheet.Name = "herp herp"
Next ws
ActiveSheet.Name = "derp derp"

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:51:43.870

```
Sub TabNames()

Dim arrNames, x as integer

arrNames = Array("herp", "herp derp", "derp herp", "herp herp", "derp derp")

For x = 1 to ActiveWorkbook.Worksheets.Count
    ActiveWorkbook.Worksheets(x).Name = arrNames(x-1)
Next x

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:33:21.777

`ActiveSheet`在您的过程中是同一张表，因此您只是一遍又一遍地更改当前/可见工作表的名称。

使用这样的行：

```
ws.Name = "herp" 
```

ETC...

# java - 直接在 PagerAdapter 中获取上下文？

> ID：14269094
> 
> 赞同：0
> 
> 时间：2013-01-10T23:21:47.623
> 
> 标签：java, android

我需要`PackageManager pm = context.getPackageManager();`在 PagerAdapter 内部使用，但我不知道如何获取上下文。

```
public class MyPagerAdapter extends PagerAdapter {
     ...
     } 
```

PagerAdapter 中的上下文如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T23:38:34.517

@DeeV 的答案意味着您必须自己为 PageAdapter 提供上下文，无论是通过构造函数还是通过 setter。然后将其作为字段存储在 PageAdapter 中，并在需要时检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T11:58:13.980

私有 ViewGroup _container；

```
public override Java.Lang.Object InstantiateItem(ViewGroup container, int position)
{
   _container = container;
}

private Context GetContext()
{
   return (Activity)_container.Context;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-06T08:52:56.687

不建议提供 Context，这可能会导致内存泄漏，如果需要上下文来访问资源，可以通过构造函数提供资源。

```
MyPagerAdapter(val resources: Resources){

}
....

val adapter = MyPagerAdapter(context.resources) 
```

# php - 如何在 xslt 转换中禁用 html uri 转义？

> ID：14269096
> 
> 赞同：1
> 
> 时间：2013-01-10T23:21:50.353
> 
> 标签：php, html, xml, xslt, uri

要求是将数据xml文件转换为html模板，然后使用该模板生成实际页面，嵌入到电子邮件中。

那么让我们看下面的例子：

XML 数据文件 (test.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="test.xslt"?>
<url><![CDATA[http://www.example.net/testurl/{{value1}}?{{value2}}&{{value3}}]]></url> 
```

XSLT 文件 (test.xslt)：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" version="1.0"/>
  <xsl:template match="/">
    <html>
    <head>
    </head>
    <body>
        <a>
            <xsl:attribute name="href">
              <xsl:value-of select="/url" />
            </xsl:attribute>
            Click
        </a>
    </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

服务器脚本 (test.php)

```
<?php
   $xslDoc = new DOMDocument();
   $xslDoc->load("test.xslt");

   $xmlDoc = new DOMDocument();
   $xmlDoc->load("test.xml");

   $proc = new XSLTProcessor();
   $proc->importStylesheet($xslDoc);
   echo $proc->transformToXML($xmlDoc);
?> 
```

当上面的 .php 文件执行时，结果是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head>
<body><a href="http://www.example.net/testurl/%7B%7Bvalue1%7D%7D?%7B%7Bvalue2%7D%7D&amp;%7B%7Bvalue3%7D%7D">
            Click
        </a></body>
</html> 
```

请注意，该`href`属性已编码，这与我们现有的填充占位符（即`{{value1}}`等）的代码不兼容。

如何避免编码以便我们现有的代码可以工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:51:13.573

这不是输出转义的问题，而是 url 编码的问题。这样做是因为 libxml2 认识到这是一个`href`并在 url 上执行所需的百分比编码。

简而言之，这不受 xslt 模板的控制。您将需要通过后处理对其进行修复。

这应该涵盖这种`<a href="">`情况，但可能还有 libxml2 百分比编码的其他属性。

```
$xformed = $proc->transformToDoc($xslDoc);
$xp = new DOMXPath($xformed);
$urls = $xp->query('descendant::a/@href');
foreach ($urls as $url) {
    $url->value = urldecode($url->value);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:24:16.253

XSLT 2.0 中有一个开关（在 xsl:output 中）来禁用 URL 属性值的 %HH 编码，但不幸的是，您使用的是 XSLT 1.0，它没有等效项。

一种方法可能是首先转换为 XML 的管道，然后执行您的“填充占位符的现有代码（即 {{value1}} 等）。”，然后转换为 HTML。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-10T23:31:19.933

```
disable-output-escaping="yes" 
```

在这种情况下应该可以帮助你。

具体来说，[像这样](http://www.w3schools.com/xsl/el_value-of.asp)使用。

总结评论：

```
<xsl:element name="a">
    <xsl:attribute name="href">
        <xsl:value-of select="/url" disable-output-escaping="yes"/>
    </xsl:attribute>
</xsl:element> 
```

# php - 单击按钮填充列表框

> ID：14269106
> 
> 赞同：2
> 
> 时间：2013-01-10T23:22:43.487
> 
> 标签：php, html, ajax

我正在尝试填充网页上的列表框，我希望列表框开始为空白。单击按钮后，应填充列表框。我下面的代码会自动填充列表框，但我宁愿让按钮来做。

```
<?php 
$dbc = mysql_connect('','','') 
     or die('Error connecting to MySQL server.'); 

mysql_select_db('MyDB'); 

$result = mysql_query("select * from tblRestaurants order by RestName ASC"); 
?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 

<head> 

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 

<title>SEARCH</title> 

 </head> 

<body> 
<form method="post" action="1004mcout.php">

<p><center>SEARCH</CENTER></P> 
<select name="RestName"> 
<?php 
 while ($nt= mysql_fetch_assoc($result))  
{ 
     echo '<option value="' . $nt['RestID'] . '">' . $nt['RestName'] . '</option>'; 
}  
?> 
</select>

<p> SPACE</p> 

<p>Click "SUBMIT" to display the calculation results</p> 

<input type="submit" name="Submit" value="Submit" /> 

<br /> 

</form> 

</body> 

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:47:50.240

```
<?php 
$dbc = mysql_connect('','','') 
     or die('Error connecting to MySQL server.'); 

mysql_select_db('MyDB'); 

$result = mysql_query("select * from tblRestaurants order by RestName ASC"); 
?>

<html>
<head>
<script>
function displayResult()
{
   var x =document.getElementById("RestName");
   var option;

   <?php 
 while ($nt= mysql_fetch_assoc($result))  
 {
       echo 'option=document.createElement("option");' .
            'option.value=' . $nt['RestID'] . ';' . 
            'option.text=' . $nt['RestName'] . ';' .
            'x.add(option,null);';
 }  
  ?>
}
</script>
</head>

<body>

  <select name="RestName"> 
  </select>

  <button type="button" onclick="displayResult()">Insert options</button>

  </body>
</html> 
```

[在此处阅读有关添加选项以从 java 脚本中选择元素的更多信息](http://www.w3schools.com/jsref/met_select_add.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:49:45.677

这个简单的方法怎么样，这就是你的意思吗？

它不安全，任何人都可以发布 show=yes 但我认为您只是希望用户能够简单地单击并查看结果

```
<select name="RestName"> 
<?php 

// if show=yes
if ($_POST['show'] == "yes"){

$dbc = mysql_connect('','','') 
 or die('Error connecting to MySQL server.'); 

mysql_select_db('MyDB'); 

$result = mysql_query("select * from tblRestaurants order by RestName ASC"); 

 while ($nt= mysql_fetch_assoc($result))  
{ 
     echo '<option value="' . $nt['RestID'] . '">' . $nt['RestName'] . '</option>'; 
}
}
?> 
</select>

<form method="post" action="#">
<input type="hidden" name="show" value="yes" />
<input type="submit" name="Submit" value="Submit" /> 
</form> 
```

您也可以简单地使用隐藏的**div**来隐藏列表框并给按钮一个 onclick 动作来显示 div，在这里了解如何：[https ://stackoverflow.com/a/10859950/1549838](https://stackoverflow.com/a/10859950/1549838)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T00:21:28.343

我会：将数据作为一些准备好的但不可见的html列表（可能有点n00b）预加载到页面中，或者将数据保存为javascript数组并且函数会将其加载到页面中（更好），或者进行ajax调用到同一页面（为简单起见）（最好是在页面启动后让您选择打开更新数据）。

Ajax 路由必须使用 jQuery（更改`this_page.php`为调用的任何页面）：

```
<?php

while ($nt= mysql_fetch_assoc($result))
    $arrData[] = $nt;

//If you want to test without DB, uncomment this, and comment previous
/*$arrData = array(
        array('RestID' => "1", 'RestName' => "Mike"),
        array('RestID' => "2", 'RestName' => "Sebastian"),
        array('RestID' => "3", 'RestName' => "Shitter")
        );*/

if(isset($_GET["ajax"]))
{
    echo json_encode($arrData);
    die();
}
?>
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
function displayItems()
{
    $.getJSON("this_page.php?ajax=true", function(data) {
        $.each(data, function(index, objRecord) {
            var option=document.createElement("option");
            option.value=objRecord.RestID;
            option.text=objRecord.RestName;
            $("#RestName").append('<option value="' + objRecord.RestID + '">' + objRecord.RestName + '</option>');
        });
    });

}
    </script>
    <title>SEARCH</title>
</head>
<body>
    <form method="post" action="1004mcout.php">
        <p><center>SEARCH</CENTER></P>
        <select id="RestName"></select>
        <p> SPACE</p> 
        <p>Click "SUBMIT" to display the calculation results</p> 
        <button type="button" onclick="javascript:displayItems();">Insert options</button>
        <br /> 
    </form> 
</body> 
</html> 
```

本质上，它的作用是收集数据，检查 url 中是否有对 ajax 数据的请求，如果没有，它会打印页面的其余部分（使用空选择）。如果 url 中有一个 ajax 标志，那么 php 会将数据编码为 json，打印并停止。当用户收到带有空选择的页面时，它会单击将触发该`displayItems()`功能的按钮。在该函数内部，它使用在 url 中设置的 ajax 标志对同一页面进行基于 jQuery 的 ajax 调用，并将结果（即 json）评估为有效的 javascript 数组。然后将该数组创建到选项中并加载到 RestName SELECT 元素中。

最后的饼干？无论如何，您都可以将数据作为选项打印到选择中，就像前面描述的答案一样。然后，在 displayItems() 函数中，在从 jQuery/ajax 调用加载它之前清除选择。这样，用户将从一开始就看到数据，并且只会使用数据库中的最新数据对其进行更新。干净，一页。

# c++ - C++ wchar_t * 等于对其他 wchar_t * 不区分大小写

> ID：14269111
> 
> 赞同：0
> 
> 时间：2013-01-10T23:23:20.243
> 
> 标签：c++, pointers, equals, case-insensitive, wchar-t

我试图检查一个 wchar_t * 是否等于另一个 wchar_t * 不区分大小写。有人可以让我以正确的方式吗？

我试过了：

```
wchar_t *vectored[80] = { ... };
int i = 0;
int j = 1;
_Towlower(vectored[i], NULL) == _Towlower(vectored[j], NULL); 
```

_Tolower() wchar_t 指针没有重载。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T23:34:07.847

你确定你没有使用**_towlower**（小写**t**）？如果是这样，**_towlower**将转换单个字符，而不是完整的字符串。要比较完整的字符串，请使用[**_wcsicmp**](http://msdn.microsoft.com/en-us/library/k59z8dwe%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:29:20.677

[如果wcscasecmp](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wcscasecmp.html)函数在您的实现中可用，则可以使用它。

# java - Java强制转换具有特定类型的泛型类而没有警告

> ID：14269113
> 
> 赞同：0
> 
> 时间：2013-01-10T23:23:44.017
> 
> 标签：java, android, generics, casting

我有一个类 ListFragment

```
 public class ListFragment<T> extends DialogFragment { 
```

当我尝试将对象转换为特定类型`ListFragment`时`String`

```
ListFragment<String> lfst = (ListFragment<String>)getFragmentManager().findFragmentByTag("somePicker"); 
```

它给了我一个警告**类型安全：Unchecked cast from Fragment to ListFragment**

要删除我必须添加的警告`@SuppressWarnings("unchecked")`

我需要的原因`ListFragment<String>`是我将调用一个依赖于`String`.

那么有没有办法在不使用抑制警告的情况下实现这一点。请注意，此代码是为在 Android 上使用而编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:30:26.583

一句话，没有。该`findFragmentByTag`方法不知道它将返回 a`ListFragment`并且超类 ,`Fragment`本身没有类型参数。

您能做的最好的事情就是像您所做的那样抑制警告。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T23:35:45.243

这只是一个警告。运行它，测试它，如果一切顺利。别管它。您可以抑制应用程序中的每一个警告。祝你好运

# mfc - MFC 模态对话框关闭错误

> ID：14269115
> 
> 赞同：0
> 
> 时间：2013-01-10T23:23:49.133
> 
> 标签：mfc, modal-dialog

我有一个奇怪的错误，在调试器中花了几个小时没有找到解决方案。（但它帮助我修复了另一个错误，即您永远不应该从 WM_KICKIDLE 任务中调用 EndDialog）。

我的问题是我有一个主窗口和一个无模式对话框窗口，它会引发一个模式子对话框窗口。当子对话框窗口关闭时。无模式对话窗口将自己变成一个模式窗口。我的代码确实离开了模态循环。如果我关闭现在的模态窗口，它的行为就像一个不可见的模态窗口处于活动状态，这意味着不再可能进行交互。

当我只在主窗口顶部运行模式对话框时，它关闭得很好。

顺便说一句：主窗口不是一个可用的视图 CWinApp::m_pMainWnd 而是一个新创建的 FrameWindow。我隐藏 p_MainWnd 并将其用作不可见的仅消息窗口。从一些评论和我的调试会话中，我发现 pMainWnd 有一些特殊的含义，但我可以弄清楚它与模式窗口到底有什么关系（例如，有一个未记录的“CWinApp::DoEnableModeless”）。

编辑：我将 WM_CLOSE 发布到对话框，然后使用 OnClose() 处理程序中的 EndDialog(0) 退出模态状态。我也尝试直接使用 EndDialog(0) 。这两种方法没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:10:28.190

也许这是有道理的，但我有一个问题：

你为什么使用隐藏窗口？它是作为仅消息窗口创建的（将 HWND_MESSAGE 作为父句柄传递，将 Message 作为类传递）还是仅将其称为消息？

好的，关于 MFC 和对话框的更多信息。

MFC 不使用 Windows 模式对话框。它总是创建无模式对话框；依次调用 Create 或 DoModal ::CreateDlgIndirect windows API。

无模式的 dialof 依赖于主窗口消息派发，而 modal 调用类似于 MFC 窗口消息 pupmp 的 RunModalLoop（不是消息循环）。它在执行的主线程中运行而不会冻结，因为它允许空闲处理（调用 OnIdle）。

你如何关闭无模式对话框？正如马克指出的那样，您应该使用 DestroyWindow。

至于 m_pMainWnd，MFC 框架广泛使用它来确定控制主窗口行为的可能事物。通过更改它，您可能已经创建了您所体验的行为。

您是否将值设置为您视为主窗口的新创建的框架？

它是一个什么样的 MFC 应用程序？SDI还是MDI？是否可以创建测试应用程序来复制此行为并将其发布到某个地方以供下载？

顺便说一句，您不必担心 DoEnableModeless，因为它除了调用经常使用的钩子（COleFrameHook 类型）之外什么都不做，除非您尝试使用 OLE 或 ActiveX 实现某些功能，或者您正在尝试结婚MFC 和 .NET Windows 窗体。总之，如果您的（或第三方代码使用此挂钩，我建议检查 COleFrameHook 类中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:06:34.600

当 MFC 创建模态对话框时，它通过禁用其上方的窗口使其成为模态对话框。当对话框通过调用 EndDialog 正常结束时，会出现重新启用这些窗口的代码。如果有任何东西阻止该代码运行，其他窗口将被锁定。

无模式对话框是另一种野兽，EndDialog 文档中专门有一条注释警告您改用 DestroyWindow。

# sql - 当事件范围超过一个月时，按月汇总事件成本（在 rails 3 中）

> ID：14269124
> 
> 赞同：6
> 
> 时间：2013-01-10T23:24:22.280
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql, date

我有这个`Event`模型

```
class Event < ActiveRecord::Base
  attr_accessible :starts_at, :ends_at, :price
end 
```

An`Event`可以是单个即时事件：

```
Event.create(:starts_at => Date.today, :ends_at=>nil, :price => 10.0) 
```

它也可以跨越数天或数月：

```
Event.create(:starts_at => Date.today, :ends_at => (Date.today + 2.months), :price => 20.0) 
```

我想按月分解事件的成本，因此即时事件的成本自然会落入它所属的月份，而跨越多个月的事件的成本应该在这些月份之间按比例分配。

显然这很难使用 SQL 来处理，但也许有人对此有一些建议？

计算这种聚合的最有效方法是什么？

**更新：**

这是 sqlfiddle 上数据的明确定义的结构：[http ://sqlfiddle.com/#!12/a532e/6](http://sqlfiddle.com/#!12/a532e/6)

我想从这个数据集中得到类似的东西：

```
( (Date('2013-01-01'), 31.6), (Date('2013-02-01'), 8.4) ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:46:31.610

```
SELECT event_id
      ,date_trunc('month', day)::date AS month
      ,sum(daily) AS price_this_month
FROM  (
   SELECT event_id
         ,generate_series(starts_at
                         ,COALESCE(ends_at, starts_at)
                         ,interval '1 day') AS day
         ,price / COALESCE((ends_at - starts_at) + 1, 1) AS daily
   FROM   events
   ) a
GROUP  BY 1,2
ORDER  BY 1,2; 
```

[-> sqlfiddle](http://sqlfiddle.com/#!12/a532e/7)

我为 PostgreSQL 提供了一个更新的 sqlfiddle。您的原件似乎是用于 MySQL 的。

### 诀窍是：

*   用于[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)每天为每个事件创建一行。
*   用于[`COALESCE`](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL)处理`NULL`似乎被允许的值`ends_at`。
*   `daily`通过将价格除以之间的天数来计算成本，`starts_at`并`ends_at` `+ 1`通过一个来修复。在 的情况下默认为 1 `ends_at IS NULL`。
*   按事件和月份重新汇总。

瞧。

您甚至可以获得每月*的准确*费率，具体取决于每月有多少天。2 月（28 天）比 1 月（31 天）便宜。

# ios - Phonegap/Cordova 2.3.0 iOS 白名单被忽略

> ID：14269126
> 
> 赞同：0
> 
> 时间：2013-01-10T23:24:37.057
> 
> 标签：ios, cordova

我最近将 phonegap iOS 应用程序升级到 2.3.0。此版本按预期将我的 Cordova.plist 文件转换为 config.xml 文件，但由于升级，我的应用程序无法再从外部 URL（图像等）加载资源。我的 config.xml 中有以下声明：

```
<access origin="*"/> 
```

升级后有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:01:24.810

白名单现在指定如下：

```
<access origin="*" /> 
```

需要注意的重要一点是，如果您使用情节提要，则必须覆盖`initWithCoder`to call`[super init]`才能使 Cordova 加载设置`config.xml`。

加载在`[CDVViewController loadSettings]`. 尝试在那里设置断点，如果它没有被调用，那么就有问题了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:33:46.560

我刚遇到这个，我正在故事板中运行。

将此添加到您的 MainViewController 或您的控制器：CDVViewController

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self = [self init];
    }
    return self;
} 
```

# c++ - 在 Qt 中跟踪事件

> ID：14269128
> 
> 赞同：1
> 
> 时间：2013-01-10T23:24:39.870
> 
> 标签：c++, qt

我需要获取在 Qt Widget (Qt C++) 中触发的所有事件的列表，例如一个可以捕获所有事件或某些将被调用的函数的实用程序，以及每次触发事件时要传递给函数的事件详细信息。

有人可以告诉我如何做到这一点，或者是否有任何免费实用程序可用于此目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:38:59.997

[QObject::installEventFilter](https://doc.qt.io/qt-5/qobject.html#installEventFilter)是你想要的。您可以看到*进入*对象的所有事件。

如果您需要查看所有事件的所有事件，您可以在 QApplication 上安装事件过滤器，请参阅[QCoreApplication::notify](https://doc.qt.io/qt-5/qcoreapplication.html#notify)的文档：

> 在 QCoreApplication::instance() 上安装事件过滤器。这样的事件过滤器能够处理所有小部件的所有事件，因此它与重新实现 notify() 一样强大；此外，可以有多个应用程序全局事件过滤器。全局事件过滤器甚至可以看到禁用小部件的鼠标事件。请注意，应用程序事件过滤器仅对存在于主线程中的对象调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:40:39.097

如果您创建一个派生自`QWidget`（让我们称之为`RecordingWidget`）的类，您可以重新实现它的`event()`功能，以您想要的任何方式记录（可能在 的静态成员中保留日志`RecordingWidget`），然后继续将事件传递给`QWidget`的默认`event`函数：

```
bool RecordingWidget::event(QEvent *event)
{
    // Record stuff
    ...

    // Send the event through QWidget's default event implementation
    return QWidget::event(event);
} 
```

# r - 更改条形图中特定条形的颜色 - 取决于两个因素

> ID：14269129
> 
> 赞同：0
> 
> 时间：2013-01-10T23:24:42.480
> 
> 标签：r, plot, bar-chart

我想做与此类似的事情，但要复杂一些。

[更改条形图中特定条形的颜色](https://stackoverflow.com/questions/13112974/change-colours-of-particular-bars-in-a-bar-chart)

这是我的数据：

```
x <- c(3,-1.4,0.8,-0.3,-1.2,-2.5,1.5,-1.4)
breaks <- c(-Inf, -1, 1, Inf)
cols <- c("blue", "grey", "red")[findInterval(x, vec=breaks)]
barplot(x, col = cols, horiz=T) 
```

所以这就是它的结果：

[图表 http://www.diabolotricks.net/Rplot-test.jpg](http://www.diabolotricks.net/Rplot-test.jpg)

然后我想要做的是使用该更改的 p 值将统计上不显着的条形着色为灰色。

```
pval<- c(0.01,0.03,0.04,0.89,0.45,0.01,0.03,0.02) 
```

所以第四条也是灰色的。

我尝试使用 ifelse 的各种组合无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:43:38.747

只需替换`cols`. 这很容易完成，`[<-`或者您可以使用`replace`它是同一事物的包装器

假设您使用 alpha = 0.05

```
myalpha <- 0.05
cols[pval > myalpha] <- 'grey' # could also be cols <- replace(cols, pvals > 0.05, 'grey')
barplot(x, col = cols, horiz=T) 
```

![在此处输入图像描述](../Images/e9e1c3b76f1827bc4fab17881845bf56.png)

# iphone - Youtube 嵌入视频只有在 iPhone 未静音时才会有音频

> ID：14269131
> 
> 赞同：2
> 
> 时间：2013-01-10T23:24:56.417
> 
> 标签：iphone, audio, video, youtube

我正在开发一个包含 Youtube 嵌入式视频的移动网站，我正在通过`<iframe>`标签执行此操作：

```
<iframe src="http://www.youtube.com/embed/videoID" frameborder="0" width="560" height="315"></iframe> 
```

视频嵌入正常，并按预期播放，但是当 iPhone 将静音开关切换到静音时，没有音频输出（使用耳机音频正常）。每当我取消 iPhone 静音时，扬声器都能正常工作，而 Youtube 视频也能完美运行......

有没有办法可以覆盖 iPhone 静音开关，以便即使 iPhone 静音，扬声器也能播放视频？

许多应用程序，包括本机 Youtube 应用程序，即使在 iPhone 静音时也能与扬声器正常工作，因为这些都是用户启动的音频事件......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:52:26.720

不，Apple 允许其用户拥有此选项以尊重他们的隐私。有时每个人都需要让手机保持静音。如果 iPhone 不允许这样做，它就不会成为一部手机。

# javascript - Javascript全局变量重新定义？

> ID：14269136
> 
> 赞同：2
> 
> 时间：2013-01-10T23:25:07.603
> 
> 标签：javascript, variables, scope, global-variables

我对 Javascript 中的变量范围有疑问。我在不同时间加载的网页上有一系列脚本。例如，我需要一个名为 MyVar 的全局对象，以便所有人都可以访问。我想避免重新定义它，但我想它必须在某个时候由第一个脚本定义。我的问题是使用`var MyVar = MyVar || {}`解决方案？

谢谢

```
 /**
 * Script 1
 */

var MyVar = MyVar || {};
MyVar.config = {
    x : 2,
    y : 3
};

/**
* Script 2
*/

//is this correct?
var MyVar = MyVar || {};
//to which MyVar am I assigning the apple property?
MyVar.apple = 'red'; 
```

**更新**

到目前为止，伙计们的答案很好，谢谢。

最后一部分，当我`var MyVar = MyVar || {};`第二次重复时，第二个 var 语句在做什么？它是否在全局范围内创建了一个新的 var，`MyVar`它被分配了现有的值`MyVar`？

其他发帖人假设我在`<script>`标签中同步加载了这些脚本是正确的，但是由于分工，我创建了脚本然后不控制它们何时以及如何加载，因此需要一种万无一失的方法来创建/利用我的`MyVar`对象。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:42:09.183

您的代码是正确的，并且可能会按预期工作，但请记住`MyVar`创建的范围。假设您的文件已发布，它们将`MyVar`在`window`范围内创建（假设浏览器上下文）。如果其中一个被包装在匿名函数中，就像[Module Pattern](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)的常见做法一样，`MyVar`只会在该函数的范围内创建：

```
(function() {
    var MyVar = MyVar || {};
    // If MyVar doesn't already exist in the global context,
    // the current MyVar reference will only be scoped to this function.
})(); 
```

一个更好的使用模式是：

```
var MyVar = window.MyVar || (window.MyVar = {}); 
```

这将确保始终从全局范围创建和引用它。您甚至可以传入上下文以使将来的重构更容易：

```
(function(context) {
    var MyVar = context.MyVar || (context.MyVar = {}));
})(window); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T00:12:50.170

> 我在不同时间加载的网页上有一系列脚本

它们中的任何一个是异步加载的吗？如果只是一系列`<script>`标签，它们将同步加载，按顺序加载。

> 我将苹果属性分配给哪个 MyVar？

如果`MyVar`每次都在全局作用域上声明，则只有一个`MyVar`. 该`apple`属性将在现有变量上创建（如果存在），或者在创建的空对象中创建（`var MyVar = MyVar || {};`如果不存在）。

底线：在第一个之后`var MyVar = MyVar || {};`，以下声明将被忽略，新属性将附加到现有变量中。请注意不要覆盖现有属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T23:38:37.140

这很容易测试：

```
var MyVar = MyVar || {};
MyVar.config = {
    x : 2,
    y : 3
};

console.log(MyVar);

var MyVar = MyVar || {};
MyVar.apple = 'red';

console.log(MyVar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T00:34:09.367

我就是这样做的：

```
window.myVar||(window.myVar={}); 
```

这样，如果变量已经存在，您就不会重新声明它。

# unit-testing - 如何在 Jasmine 中测试 Angular 控制器的本地变量

> ID：14269139
> 
> 赞同：16
> 
> 时间：2013-01-10T23:25:28.180
> 
> 标签：unit-testing, angularjs, jasmine

我有一个带有局部变量的控制器

```
function IndexCtrl($scope) {
  var pagesById = [];
  loadPages();

  // snip

  function loadPages() {
    // pagesById gets populated
  }

  // snip
} 
```

我想测试 pagesById 是否正确填充，但我不确定如何从我的 it() 中获取它。我不需要这个变量在 $scope 中，它只是一组中间信息，所以如果我可以避免将它添加到 $scope 中，那将是理想的。

```
it('scope.pages should populated based on pages data.', function() {
    $httpBackend.flush();
    expect(pagesById).toEqualData(mock_page_results);
}); 
```

给我

```
ReferenceError: pagesById is not defined 
```

除了将其附加到 $scope 之外，我还有其他选择吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T23:36:13.177

在您的 jasmine 规范中，首先创建控制器：

```
var ctrl;

beforeEach(inject(function($rootScope, $controller) {
  scope = $rootScope.$new();
  ctrl = $controller('myController', {
     $scope: scope
  });
})); 
```

然后您可以通过执行访问其属性`ctrl.pagesById`。当然，`var pagesById`您需要`this.pagesById`在控制器中使用，而不是这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-12T09:41:03.883

这是我在 Angular 方法中测试局部变量的方法：

```
//------- Function for getting value of local variables

function getLocalVariable(sLocalVarName, obj, method, args){
    method = method.toString();
    let changedMethod = method.substring(0, method.lastIndexOf("}")) + ";" + "return " + sLocalVarName + "}";
    eval(' changedMethod = ' + changedMethod);

    return changedMethod.call(obj, args)
}

//----------- service

class assignStuffService {

    getAvaliableStuff(shift) {
        const params = {
            agency_id: 0 ,
            start_time: shift.data.shift.start_time,
            end_time : shift.data.shift.end_time
        };
    }
}

//----------- part of spec

it('should set values to "params" object props', () => {

            let shift = {
                data:{
                    shift:{
                        start_time:'',
                        end_time:''
                    }
                }
            };

            let params = getLocalVariable('params',
                                            assignStuffService,
                                            assignStuffService.getAvaliableStuff,
                                            shift);

            expect(params).toEqual({
                agency_id: 0 ,
                start_time: shift.data.shift.start_time,
                end_time : shift.data.shift.end_time
            });

        }); 
```

# java - 如何实现均衡器

> ID：14269144
> 
> 赞同：11
> 
> 时间：2013-01-10T23:26:13.573
> 
> 标签：java, signal-processing, fft, equalizer

我知道有很多关于均衡器的问题，但我没有得到我想要的东西。我想要做的是一个均衡器，用于以如下方式修改音频样本：

```
equalizer.eqAudio(audiosamples, band, gain) 
```

我不确定这是否是我想要的确切接口，因为在实现它们方面我对 DSP 知之甚少（我使用了过滤器、限制器、压缩器，但没有制作它们）。

所以谷歌搜索我读到我必须对样本进行 FFT，所以我得到每个频率范围的数据而不是幅度，按照我想要的方式处理它，然后进行 FFT 的倒数，所以我再次得到音频样本的结果. 我寻找了这个 FFT 的实现并找到了 JTransform for Java。这个库有一个 FFT 相关算法的实现，称为离散余弦变换 (DCT)。

我的问题是：

*   好吧，我走对了吗？
*   由于 FFT 为我提供了有关频率的数据，因此我应该向 FFT 算法传递大量样本。这个块必须有多大？
*   有没有解释均衡器的 DSP 编程的好书？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T01:28:58.713

FFT 不是我音频均衡的首选。我会默认使用 IIR 或 FIR 滤波器构建 EQ。FFT 在特殊情况下可能有用。

一个普遍推荐的参考是[Audio EQ Biquad Filter Coefficients Cookbook Formulas](http://shepazu.github.io/Audio-EQ-Cookbook/audio-eq-cookbook.html)。

用于编程双二阶滤波器的 Java 教程。[http://arachnoid.com/BiQuadDesigner/index.html](http://arachnoid.com/BiQuadDesigner/index.html)

> 有没有解释均衡器的 DSP 编程的好书？

[了解数字信号处理](https://rads.stackoverflow.com/amzn/click/com/0131089897)是对 DSP 的一个很好的介绍。有关于 FIR 和 IIR 滤波器的章节。

Julius O. Smith III[的音频应用数字滤波器简介。](https://ccrma.stanford.edu/%7Ejos/fp/)

Martin Holters 和 Udo Zolzer 撰写的[使用高阶递归滤波器的图形均衡器设计是一篇简短的论文，详细介绍了一种 EQ 滤波器设计方法。](http://www.dafx.ca/proceedings/papers/p_037.pdf)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-11T18:33:11.060

获得均衡器的方法有很多种，正如 Shannon 所解释的，IIR/FIR 滤波器方法就是其中之一。但是，如果您的目标是快速启动并运行均衡器，那么采用 FFT 方式可能对您来说更容易，因为存在大量参考实现。

至于您的 FFT 大小问题，这取决于您希望均衡器具有什么频率分辨率。如果您选择 16 的大小，您将在频域中获得 9 个（8 个复数 + 1 个实数）通道，从 0 到 fs/2 等距。第一个以 0Hz 为中心，第 9 个以 fs/2 Hz 为中心。请注意，一些实现返回 16 个通道，其中高部分是低部分的镜像和复杂共轭版本。

至于均衡器功能的实现，请将每个通道与所需增益相乘。如果光谱有镜像部分，那么也要镜像增益。如果不这样做，接下来的 IFFT 的结果将不是实值信号。乘法后，应用 IFFT。

关于 FFT 和基于滤波器的均衡器之间的区别，请记住，FFT 只是一种快速计算一组 FIR 滤波器的方法，其中正弦作为脉冲、临界采样（使用滤波器长度进行下采样）和均匀间隔的中心频率。

问候

# android - 无法将相机清晰地转换为位图

> ID：14269148
> 
> 赞同：0
> 
> 时间：2013-01-10T23:26:23.210
> 
> 标签：android, camera

当我在 camera.setPreviewCallback 上运行以下代码时，我得到一个静态图像。如何让 ImageView (iv) 正确显示？我需要在这里发布更多代码吗？请温柔一点，因为这是我在 stackoverflow 上的第一篇文章——而且，是的，我搜索了又搜索，但没有找到任何东西，所以如果你找到了已经提出问题的东西，在此先感谢。

```
YuvImage yuvImage = new YuvImage(data, ImageFormat.NV21, 300, 300, null);
ByteArrayOutputStream out = new ByteArrayOutputStream();
yuvImage.compressToJpeg(new Rect(0,0,300,300), 0, out);
byte[] imageBytes = out.toByteArray();
bitmap = BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.length);
iv.setImageBitmap(bitmap); 
```

哦，是的，ViewPort 是 300x300。

我什至试过这段代码：

```
int[] imageBytes = convertYUV420_NV21toRGB8888(data, 300, 300);
bitmap = Bitmap.createBitmap(300, 300, Bitmap.Config.ARGB_8888);
bitmap.setPixels(imageBytes, 0, 300, 0, 0, 300, 300); 
```

它使用stackoverflow上的功能之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:09:48.557

我找到了解决方案。宽度和高度不正确。尽管我将所有内容的大小设置为 300x300，但分辨率问题导致这不是所需的尺寸，所以这段代码终于奏效了：

```
Camera.Parameters parameters = camera.getParameters();

YuvImage im = new YuvImage(data, ImageFormat.NV21, parameters.getPreviewSize().width, parameters.getPreviewSize().height, null);
ByteArrayOutputStream out = new ByteArrayOutputStream();
im.compressToJpeg(new Rect(0,0,parameters.getPreviewSize().width, parameters.getPreviewSize().height), 100, out);
byte[] imageBytes = out.toByteArray();
bitmap = BitmapFactory.decodeByteArray(imageBytes, 0, out.size());
iv.setImageBitmap(bitmap); 
```

# asp.net - 在 web.config 中将子文件夹重写为子域

> ID：14269149
> 
> 赞同：9
> 
> 时间：2013-01-10T23:26:25.073
> 
> 标签：asp.net, iis-7, web-config, subdomain, url-rewrite-module

我正在尝试为以下场景编写重写规则。

用户尝试加载此图片：

```
domain.com/images/folder/picture.jpg 
```

相反，我需要它来加载：

```
cdn.domain.com/images/folder/picture.jpg. 
```

这是我所拥有的不起作用的：

```
<rule name="CDN rewrite for Images">
    <match url="(.*)" />
    <conditions>
        <add input="{HTTP_HOST}" pattern="domain.com" />
        <add input="{REQUEST_URI}" pattern="^/images/folder/(.*)$" />
    </conditions>
    <action type="Rewrite" url="cdn.domain.com/images/folder/{C:1}" />
</rule> 
```

**更新：** 添加附加信息。大多数图片都是从 Joomla 提供的，因此虽然域的根目录类似于 domain.com，但大多数图片都是使用 src="/images/folder/picture.jpg" 输入的，不太清楚这对重写有何影响，但是下面cheesemacfly的答案中没有一个选项有效......

**更新 2：** 虽然 cheesemacfly 在我的特殊情况下无法帮助我，但我授予他赏金并将他的答案标记为已接受，因为他在聊天中竭尽全力帮助我。希望他的回答能帮助那些在 IIS 上重写的人。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T20:03:11.843

**编辑：**

为了能够将 URL 重写（而不仅仅是重定向）到外部网站，您需要安装[应用程序请求路由模块](http://www.iis.net/downloads/microsoft/application-request-routing)并启用代理模式。

为此：

1.  [下载并安装模块](http://www.microsoft.com/web/gallery/install.aspx?appid=ARRv2_5)
2.  打开 IIS 管理控制台 ( `inetmgr`)
3.  选择您的服务器节点
4.  双击`Application Request Routing Cache`： ![ARR](../Images/88dace7ef2cde6261f15f405f81ebb50.png)
5.  单击窗格（屏幕右侧`Server Proxy Settings`）`Actions`
6.  选中该框`Enable proxy`并单击`Apply` ![代理人](../Images/593fec9abec6bd9b0bc1a1e324ffceb9.png)

第二步是关于设置你的规则。

如果您希望重写基于路径，请使用以下代码：

```
<rewrite>
  <rules>
    <rule name="Rewrite to cdn domain">
      <match url="^images/folder/(.+)$" />
      <action type="Rewrite" url="http://cdn.domain.com/images/folder/{R:1}" />
    </rule>
   </rules>
</rewrite> 
```

或者，如果您在第二个网站上保留相同的文件夹架构，您可以简化如下：

```
<rewrite>
  <rules>
    <rule name="Rewrite to cdn domain">
      <match url="^images/folder/(.+)$" />
      <action type="Rewrite" url="http://cdn.domain.com/{R:0}" />
    </rule>
   </rules>
</rewrite> 
```

如果您只想捕获以特定扩展名结尾的文件（比如说图像）：

```
<rewrite>
  <rules>
    <rule name="Forward to cdn domain">
      <match url="^images/folder/.+\.(?:jpg|bmp|gif)$" />
      <action type="Rewrite" url="http://cdn.domain.com/{R:0}" />
    </rule>
  </rules>
</rewrite> 
```

*请参考：[http](http://www.iis.net/learn/extensions/url-rewrite-module/iis-url-rewriting-and-aspnet-routing) ://www.iis.net/learn/extensions/url-rewrite-module/iis-url-rewriting-and-aspnet-routing （“**您应该使用哪个选项？** ”部分）*

**小费：**

测试模式的最佳方法是使用 IIS 测试模式工具。

在您网站的根目录 -> URL 重写 -> 创建空白规则 -> 单击测试模式： ![模式测试](../Images/dcbe70837320fd1873cca401b867ac42.png)

如果您没有得到预期的结果，您可以使用[Failed Request Tracing 工具调试您的重写](http://www.iis.net/learn/extensions/url-rewrite-module/using-failed-request-tracing-to-trace-rewrite-rules)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:15:22.057

注意：将规则更改为重定向而不是重写可以解决问题。理想情况下，您希望它是一个重定向，但我花了很多时间试图让重写工作，到目前为止还没有解决方案。

```
<rule name="Rewrite to images.cdn.com" enabled="true" stopProcessing="true">
<match url="images/(.+)$" ignoreCase="true" />
<action type="Redirect" url="http://images.cdn.com/{R:1}" />
</rule> 
```

# javascript - 块引用格式

> ID：14269151
> 
> 赞同：0
> 
> 时间：2013-01-10T23:26:54.900
> 
> 标签：javascript

我喜欢 stackexchange 引用的方式，我试图将它添加到我的网站，但没有让它跨多行工作，只有一行。我需要改变什么来做多行？

这是我目前正在使用的：

```
val = val.replace(/^>(.+?)($|\n)/ig, "<blockquote>$1</blockquote>"); 
```

**编辑**
我决定换一种风格。

```
val = val.replace(/""([\s\S]*.+?)""/igm, "<blockquote>$1</blockquote>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:39:56.680

不要替换，而是尝试匹配每一行，然后将匹配的行组合成一个字符串。

像这样的东西：

```
var val = '>abc\n>def\n>ghi',
    regex = /(?:^>)(.+)(?:$|\n)/img,
    match = '', quote = [];

while((match = regex.exec(val)) !== null){
  quote.push(match[1]);
}

val = '<blockquote>'+quote.join('<br/>')+'</blockquote>'; 
```

演示：http: [//jsfiddle.net/k7DVu/](http://jsfiddle.net/k7DVu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:34:49.153

我放弃了在正则表达式中这样做。

```
var a = '>abc\n>def\n>ghi'.split( /\n/ ); // [">abc", ">def", ">ghi"]

var previousInBlock = false;
var currentInBlock = false;
var nextInBlock = false;

for( var i = 0; i < a.length; i++ ) {

    previousInBlock = currentInBlock;
    currentInBlock = a[i].indexOf( ">" ) === 0;
    nextInBlock = ( i + 1 ) < a.length ? a[i+1].indexOf( ">" ) === 0 : false;

    if ( currentInBlock ) {
        a[i] = a[i].slice( 1 );

        if( !previousInBlock ) { 
            a[i] = "<blockquote>" + a[i]; 
        }

        if ( !nextInBlock ) { 
            a[i] = a[i] + "</blockquote>"; 
        }
    }
}

a.join( "\n" ); 
```

上面的代码可以处理多组块引用。

# php - 如何使用 Curl 将数据发布到脚本并保存返回的文件

> ID：14269157
> 
> 赞同：1
> 
> 时间：2013-01-10T23:27:39.063
> 
> 标签：php, curl, ssh

您好我正在尝试从命令行使用 curl 提交表单并保存表单强制您在使用浏览器时正常下载的文件。表格在这个页面上：

[http://dove.cccbr.org.uk/downloads.php](http://dove.cccbr.org.uk/downloads.php)

它是我要下载的 dove.txt 文件。正如您在浏览器中看到的，您选中版权声明复选框，然后单击 dove.txt 按钮，文件开始下载。

以下是我尝试使用 curl 的方法：

```
curl -d "copyright=agree&download=dove.txt" -o dove.txt http://dove.cccbr.org.uk/downloads.php 
```

这会保存一个文件，但其中只有一条错误消息

DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> tml> itle>406 Not Acceptable head> 1>Not Acceptable

> 在此服务器上找不到请求资源 /downloads.php 的适当表示。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。
> 
> 身体>

我敢肯定这对于知道如何的人来说非常简单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:32:38.973

此特定站点阻止`curl`用户代理字符串。您可以使用该选项欺骗另一个用户代理`-A`，例如：

```
curl -A 'Mozilla/5.0' … 
```

# jquery - 表单隐藏的输入值随着 .show() 消失

> ID：14269161
> 
> 赞同：0
> 
> 时间：2013-01-10T23:27:54.697
> 
> 标签：jquery, show, hidden-field

我在表单中有以下输入：

```
<input type="hidden" id="myId" name="form-type" class="myClass" value="myValue"> 
```

加载页面时，表单被隐藏。当我点击显示按钮时，

```
 $("#showButton").click( function() {
        $("#form").show();
    }); 
```

值消失。

```
<input type="hidden" id="myId" name="form-type" class="myClass" value=""> 
```

当我单击提交按钮时，它应该被传递给 php。单击该按钮，我在 $(".myClass").serialize() 中传递 myValue。让我强调它工作正常。我的应用程序中有 5 种其他形式的工作方式相同且没有问题。哦，是的。即使我刷新页面，该值仍然缺失。我必须将上面共享的行剪切并粘贴到另一行，然后刷新页面，然后才能再次看到该值。有没有人见过这个。我最近一直在工作，所以我可能会发疯；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:36:18.730

查看您添加的上述代码，您的点击功能缺少很多引号和右括号。这在您的实时代码中是否相同？

```
<input type="hidden" id="myId" name="form-type" class="myClass" value="myValue">

$("#showButton").click( function() {
    $("#form").show();
});

<input type="hidden" id="myId" name="form-type" class="myClass" value=""> 
```

上面是添加的引号和右括号。

# jquery - 淘汰赛 - 无法弄清楚为什么没有更新依赖项

> ID：14269162
> 
> 赞同：0
> 
> 时间：2013-01-10T23:28:01.187
> 
> 标签：jquery, ajax, knockout.js

请原谅我无法上传任何东西来摆弄。

简而言之，我有一个 json 数组，我想从中读取和循环，当我开始 ko 时，我已经包含了旁边的数组。这很有效，当我尝试使用 ajax 加载一些 json 时，它就失败了。

我有这个**对象**：

```
 hutber.portfolio.ko = {
    init: function(){
        ko.applyBindings(new hutber.portfolio.ko.portfolioViewModel());
    },
    items: [],
    portfolioViewModel: function(){
        var self = this;

        var data = [
            {   "title":"poo"
            }
        ];

        self.items = ko.observableArray(data);

        var jamie = $.getJSON('/js/pages/portfolio.json').done(function(info){
            self.items = info;
        });
    }
};
hutber.portfolio.init(); 
```

**投资组合.json**

```
[
{   "title":"willies"
}
] 
```

**标记**

```
 <ul data-bind="foreach: items">
            <li data-bind="text: title">
                 <h4>Volkswagen.co.uk</h4>
            </li>
        </ul> 
```

在我看来，这应该可以完美运行。一旦我的 ajax 请求完成，我就会更新`self.items`值。`self.items = info;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:06:18.167

您的回调正在*替换*可观察数组并且未正确设置它。您需要调用传入对象的可观察对象来设置它。

```
 var jamie = $.getJSON('/js/pages/portfolio.json').done(function(info){
        self.items(info); // set the items to the info array
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:07:17.697

问题是您正在重新分配集合的值`self.items`而不是更新集合。

你想做的是：

```
var jamie = $.getJSON('/js/pages/portfolio.json').done(function(info){
    info.forEach(function (x) { self.items.push(x); });
}); 
```

我假设它`info`是一个数组，如果不直接推送它的话。

# linux - URL 地址中的递增数

> ID：14269163
> 
> 赞同：0
> 
> 时间：2013-01-10T23:28:05.417
> 
> 标签：linux, shell

我需要帮助解决我的问题。例如`http://www.blabla.bla/forum-detail/?ft=72260&fid=34&&pgr=1`，我有 url 地址，我想按顺序递增最后一个数字 1 到 786 并保存在文件中。我的结果应该是这样的。

```
http://www.blabla.bla/forum-detail/?ft=72260&fid=34&&pgr=1
http://www.blabla.bla/forum-detail/?ft=72260&fid=34&&pgr=2
http://www.blabla.bla/forum-detail/?ft=72260&fid=34&&pgr=3
.
.
.
http://www.blabla.bla/forum-detail/?ft=72260&fid=34&&pgr=786 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:03:03.340

试试这个命令：

```
$ seq 786 | sed 's@^@http://www.blabla.bla/forum-detail/?ft=72260\&fid=34\&\&pgr=@' 
```

或者：

```
$ echo http://www.site.org/{1..10} | tr ' ' '\n' 
```

或者：

```
$ printf 'http://www.site.org/%d\n' {1..10} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:07:06.887

```
yes 'http://www.blabla.bla/forum-detail/?ft=72260&fid=34&&pgr=' |
 nl -ba | sed 786q | grep . | awk '{print $2$1}' 
```

（grep 只是为了好玩......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:49:00.713

```
url="http://www.blabla.bla/forum-detail/?ft=72260&fid=34&&pgr=1"
for i in {1..786}; do
    echo "${url%1}$i"
done 
```

# python - 为什么python中的计算机之间的强制转换规则不同？

> ID：14269164
> 
> 赞同：17
> 
> 时间：2013-01-10T23:28:08.380
> 
> 标签：python, macos, numpy

我在我的 Mac 上运行 python 2.7，我正在与使用 Ubuntu 的其他人一起进行一个小组编码项目。每隔一段时间，由于转换规则错误，他们编写的代码将无法在我的计算机上运行：

```
 273     # Apply column averages to image
--> 274     img[:middle] *= (bg[0]/np.tile(topCol, (middle,1)))
    275     img[middle:] *= bg[1]/np.tile(botCol, (middle,1))
    276 

TypeError: Cannot cast ufunc multiply output from dtype('float64') to dtype('int16') with casting rule 'same_kind' 
```

我认为您不需要详细信息，因为这发生在具有不同数字类型的几个不同地方。

它适用于他们所有的计算机没问题。我写的所有东西都对他们有用，但他们写的东西经常对我不起作用。

我们的机器不同意有什么原因吗？有什么方法可以改变我的结果吗？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T01:26:24.027

[该线程](http://mail.scipy.org/pipermail/numpy-discussion/2012-September/063915.html)表明您`numpy`的版本比您同事使用的版本更新（请使用 进行检查`numpy.version.version`）。在 1.7.0 开发分支中，似乎他们已将隐式转换规则更改为更严格的`same_kind`规则，该规则禁止（除其他外）浮点和整数格式之间的转换。

要解决此问题，我建议使用如下代码：

```
img[:middle] *= (bg[0]/np.tile(topCol, (middle,1))).astype(img.dtype) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T20:20:22.670

nneonneo 有一个正确的解决方案，我想我会添加一些其他解决方法。

一个问题是该`img`变量之前手动定义为`int`. 然后与`float`违反严格类型转换的乘法

```
img = np.int16( cp.deepcopy(imgArray) )
...
img[:middle] *= bg[0]/np.tile(topCol, (middle,1))
>>TypeError: Cannot cast ufunc multiply output from dtype('float64') to dtype('int16') with casting rule 'same_kind' 
```

一种解决方法：

我可以更改初始变量类型定义以匹配以后需要的内容：

```
img = np.float64( cp.deepcopy(imgArray) )
...
img[:middle] *= bg[0]/np.tile(topCol, (middle,1)) 
```

或者我可以保留原始类型转换，并更改运算符：

```
img = np.int16( cp.deepcopy(imgArray) )
...
img[:middle] = img[:middle]*bg[0]/np.tile(topCol, (middle,1)) 
```

出于某种原因，Numpy 允许以这种方式进行操作，而它不会`*=`

感谢所有的帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-03T13:43:04.043

引用 numpy 的开发人员（[http://docs.scipy.org/doc/numpy-dev/release.html](http://docs.scipy.org/doc/numpy-dev/release.html)）：

> 就地操作的默认转换已更改为“same_kind”。例如，如果 n 是一个整数数组，而 f 是一个浮点数数组，那么 n += f 将导致 TypeError，而在以前的 Numpy 版本中，浮点数会被默默地转换为整数。在示例代码不是实际错误的不太可能的情况下，可以通过将其重写为 np.add(n, f, out=n, cast='unsafe') 以向后兼容的方式对其进行更新。自 Numpy 1.7 以来，旧的“不安全”默认值已被弃用。

因此，如果你想保持原地乘法，代码变成：

`np.multiply(img[:middle], (bg[0]/np.tile(topCol, (middle,1))), out=img[:middle], casting='unsafe')`

# java - 在每个请求上分配新会话 ID 的好习惯？

> ID：14269165
> 
> 赞同：4
> 
> 时间：2013-01-10T23:28:11.607
> 
> 标签：java, session-cookies, sessionid

客户要求对我们的 Java Web 应用程序进行一些安全增强，包括以下内容：

> 根据我们的安全团队良好的安全实践规定，应在每次请求时更改会话 ID，以防止会话劫持。

我了解在身份验证时分配新会话 ID 的重要性（我们已经这样做了），但是这个请求似乎有点极端。

如果基于每个请求重新分配，听起来它不再是会话 ID，而是可能与会话 ID 一起使用的一次性请求 ID。

所以，我的问题是：这种策略真的是一种常见的安全做法吗？如果是这样，有人可以指点我就该主题，实施技巧等进行很好的讨论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:34:22.000

这没有什么坏处，但它可能真的很复杂，实际上您只需要在安全级别更改时重新生成会话 ID。另请参阅[Session Hijacking - regenerate session ID on Security StackExchange](https://security.stackexchange.com/questions/1246/session-hijacking-regenerate-session-id)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:36:22.363

为每个请求生成一个新的会话 ID 没有任何意义，它违背了会话的概念。但是，在所有会导致状态更改（例如，表单提交）的请求中包含一个请求 ID 是一个非常明智的想法。

每个/请求 ID 的目的是防止 CSRF（跨站点请求伪造）。见：[https](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF) ://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF )

# jquery - jQuery动画持续时间不起作用

> ID：14269166
> 
> 赞同：1
> 
> 时间：2013-01-10T23:28:27.493
> 
> 标签：jquery, jquery-animate, duration

通过在这里解决所有类似的问题，我对我的 jQuery 动画持续时间失败的代码有疑问。我的目的是使用 ajax 从 DB 中提取长内容并填充 div，然后将 div 扩展到适当的高度。非常欢迎您指出我的理论中任何不足之处。但是当回到持续时间失败时，它根本不起作用，我找不到原因。

```
$('.button_expand_news').click(function() {
    $(this).text('LOADING...');
    var pod = $(this).prev();
    var id = $(this).attr('id');
    $.ajax({
        url: 'func.blogs.php?p=loadNews&id=' + id,
        dataType: 'json',
        success: function(response) {
            var content = response['full_content'];
            pod.html('');
            pod.html(content);
            pod.animate({
                height: '100%'
            }, 500, function() {
                $(this).next().text('COLLAPSE');
            });
        }
    });
} 
```

演示页面可以参考[我的项目站点](http://tiams.0zed.com/news.php)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:34:18.507

这是一个猜测：

您是否将“pod” div 设置为 height : 0 和 overflow:hidden 在您的 css 中？

如果是，下一个猜测

代替

```
 height: '100%' 
```

和

```
 height:pod.parent().innerHeight() 
```

# c++ - c++ - 按地址调用函数失败

> ID：14269173
> 
> 赞同：1
> 
> 时间：2013-01-10T23:29:22.030
> 
> 标签：c++, memory-address

我正在阅读 CodeProject 上的各种内容，发现这篇文章： http: [//www.codeproject.com/Articles/29527/Reverse-Engineering-and-Function-Calling-by-Addres](http://www.codeproject.com/Articles/29527/Reverse-Engineering-and-Function-Calling-by-Addres)

所以我所做的是创建了一个注入器和一个 DLL，并获取了示例可执行文件。当您按 F11 时，它基本上会输出：http: [//i.stack.imgur.com/YIygV.jpg](http://i.stack.imgur.com/YIygV.jpg)

所以我遵循了整个教程，但问题是 DLL 中使用的地址总是在变化。这个要具体：

```
pFunctionAddress pMySecretFunction = (pFunctionAddress)(0x004113C0); 
```

在他的教程中，函数的地址是 0x004113C0。在我的情况下，它是另一回事，我拿走我拥有的那个并使用它。它工作得很好，但是当我关闭可执行文件并打开它时，它就不再工作了，而且 OllyDbg 显示该地址是一个全新的地址。

因此，我进行了一些研究，并开始使用 OllyDbg 添加断点。我发现地址总是：

```
main + 4C 
```

我猜“main”是这些可执行文件的主要模块。如何始终找到该函数的地址？因为它一直在变化，我现在一无所知。在本文中，我读到它并没有说明重新打开可执行文件时会发生什么，我花了 5 个小时试图找到解决方案。

提前致谢！

编辑：

非常感谢大家。特别感谢mfc，我**终于**弄明白了！我最终做的是每当我点击 DLL_PROCESS_ATTACH 时，我将一个全局 HMODULE 设置为可执行文件的地址，如下所示：

```
HMODULE g_hExeModule;
g_hExeModule = GetModuleHandle(L"TutExample.exe"); 
```

经过几次测试后，函数地址似乎总是可执行文件的地址 + 0x11014，所以在调用中我只是这样做：

```
pFunctionAddress pMySecretFunction = (pFunctionAddress)((DWORD)g_hExeModule + 0x11014); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:48:40.950

> 所以如果我找到一种方法来获取“main”的地址，我可以添加一个 4C 偏移量，并且该功能将永远存在，我想

同样，函数**确实有一个地址：**

```
void *(funcPtr)() = (void (*)())((char *)&main +  0x4C);

// If you were right, and you also substituted the appropriate
// function signature above, then this should work:

funcPtr(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T03:10:34.800

您尝试调用的函数位于 exe 文件中，因此引用偏移量应与加载 exe 的内存地址相关。目标函数的偏移量应该是一个常数，只有在每次编译源代码后才会改变。

要了解有关您的 exe 的更多信息，请将这两行添加到您的 exe 中：

```
printf(_T("Exe loaded at: %08X"), GetModuleHandle(_T("TutExample.exe")));
printf(_T("Target function at: %08X"), mySecretFunction); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:57:40.857

我无法编辑我的帖子，也无法添加任何评论，所以我必须将其发布为新答案。

你的结果：

```
Exe loaded at: 00000000 (wrong, probably: 00BE0000 and offset is: 00001005)
Target function at: 00BE1005
Exe loaded at: 00000000 (wrong, probably: 01230000 and offset is: 00001005)
Target function at: 01231005
Exe loaded at: 00000000 (wrong, probably: 012A0000 and offset is: 00001005)
Target function at: 012A1005 
```

请检查您编译的 exe 的名称，是“TutExample.exe”吗？如果不是，请将其更改为调用 GetModuleHandle 中的确切名称。

“00000000”的值表示GetModuleHandle 失败，因为在当前内存空间中找不到名称“TutExample.exe”。

目标函数的地址似乎没问题。只需将此地址减去加载的 exe 的地址，您将获得 exe 内存布局内的偏移量。

无论操作系统如何加载 exe，您都可以在注入的 dll 中执行相同的数学运算，以始终正确跟踪目标函数地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T01:10:57.423

较新的操作系统具有称为 ASLR（地址空间布局随机化）的功能。犯罪分子使用您正在使用的一些技巧。因此，为了让坏人的生活更加艰难，每次运行程序时，EXE 和 DLL 都会被分配一个不同的地址。

如果您编译了 DLL，则可以选择为您的 DLL 禁用 ASLR。

# php - 正则表达式（php）中的后向否定性

> ID：14269175
> 
> 赞同：0
> 
> 时间：2013-01-10T23:29:24.933
> 
> 标签：php, regex, regex-negation

在处理用户输入以使用这段代码使超链接变得栩栩如生时，我正在使用带有 PHP 的 preg_replace 的正则表达式：

```
preg_replace(
   '!(((f|ht)tp://)[-a-zA-Zа-яА-Я()0-9@:%_+.~#?&;//=]+)!i',
   '<a class="external" href="$1">$1</a>',
   $text
); 
```

但是，我需要做的是忽略包含在 中的所有链接`{{ }}`，例如，此输入应由正则表达式处理：

`http://www.example.com/`

应忽略此输入：

`{{http://www.example.com/}}`

如何更改我的正则表达式模式以按预期工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:48:36.003

`(?<!...)`用否定的后向 ( ) 和否定的前瞻 ( )包围您的正则表达式`(?!...)`：

```
'/(?<!\{\{)(((f|ht)tp:\/\/)[-a-zа-я()0-9@:%_+.~#?&;\/=]+)(?!\}\})/i' 
```

或者，只需逐字浏览文本，并尝试使用 URL 解析库查看一个单词是否是有效的 URL（URL 中不能有空格）；并仅在这种情况下更换。

# php - updateAction 如何修改 Cart Controller 中的库存

> ID：14269177
> 
> 赞同：0
> 
> 时间：2013-01-10T23:29:39.247
> 
> 标签：php, magento, cart

我已经在我正在处理的 magento 安装中修改了购物车，这样当您想更改服装价格的大小（从小到大）时，您可以使用下拉框而不是必须删除该项目并使用新尺寸重新添加它，我这样做的方法是从购物车中删除旧尺寸并添加新尺寸（从某种意义上说，如果功能不存在，人们将如何做）

我还编辑了购物车，因此如果您要将产品的尺寸从小更改为大，并且您已经有一个尺寸为大的产品，如果有足够的库存，它将合并 2 的数量（所以如果您想要将 5 Small 更改为 5 Large 并且您已经有 3 个 large，更新后购物车将有 8 large），我如何做到这一点是通过检查您更改的尺寸是否已经在购物车中，如果是，请检查查看是否有足够的库存，如果有，则删除您更改大小的项目并编辑`$cartData`处理现有项目数量更改的变量，以便更改数量，这两项工作

然而，我发现的问题是，如果你有这样的推车

```
product   | size   | qty
---------------------------------------
product 1 | Large  | 1
product 1 | Medium | 1
product 1 | Small  | 1 
```

你要把大的改成小的，把小的改成大的，如果你没有足够的库存，你会得到一个错误，即使你不增加它

我已经弄清楚这是因为我在购物车中不存在尺寸时更改尺寸的方法，即使我从购物车中取出物品，数量仍然从库存中消失，换句话说，如果你有库存中只有 1 件的物品，您将其删除并再次添加了数量为 1 的相同物品，magento 会认为您尝试拥有数量为 2 的物品。

现在显然，我交换产品尺寸问题的解决方案是强制 magento 更新库存，每次我在 updateAction 中从购物车中删除一个项目，但是即使查看 CartController.php 文件中的原始 updateAction 我似乎无法找到当商品在购物车中时 magento 更新它正在使用的库存水平的功能，但是我知道它必须更新一些临时库存水平，因为我注意到即使你有说 5 个项目，5 也不会丢失数据库中的股票

我的问题是 updateAction 如何修改购物车控制器中的库存，一旦我发现它是如何做的，我可以开始强制它在我的 updateAction 中间而不是结束时工作

注意：我知道只交换 2 种尺寸的相同产品（有效地交换他们在购物车中的位置）似乎很愚蠢，但是我必须假设用户是白痴，他们会做一些像这样愚蠢的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:15:57.673

`updateAction`不修改产品库存。`Mage_CatalogInventory_Model_Observer::subtractQuoteInventory`通过事件触发的方法减少产品库存`sales_model_service_quote_submit_before`（见`app/code/core/Mage/CatalogInventory/etc/config.xml`文件）

# events - 适用于 Fedora 但不适用于 Windows，wx.Phyton

> ID：14269179
> 
> 赞同：0
> 
> 时间：2013-01-10T23:29:42.473
> 
> 标签：events, button, wxpython

嗯，我是 wx 的菜鸟，我 5 天前开始学习它。我正在尝试使用诸如位图按钮之类的卡片制作像记忆一样的游戏，但事件不想绑定在我的卡片上。我在网上搜索了一些人寻求帮助，但他们不知道为什么。我将程序发送给一位在 Linux Fedora 中工作的人，他说它可以工作……问题出在 MyDialog 类中，功能卡。我制作了一个类似于这个的测试程序，并将事件绑定在 for 命令中，它可以正常工作。抱歉，如果这个网站上的某个地方存在答案，我找不到它......

```
import random
import wx
global n
global ControlVar
ControlVar = False

class MyDialog(wx.Dialog):
    def __init__(self, parent, id, title):
        wx.Dialog.__init__(self, parent, id, title, size=(200, 150))
        wx.StaticBox(self, -1, 'Card pairs', (5, 5), size=(180, 70))
        wx.StaticText(self, -1, 'Number:    ', (15, 40))

        self.spin = wx.SpinCtrl(self, -1, '1', (65, 40), (60, -1), min=3, max=5)
        self.spin.SetValue(4)
        wx.Button(self, 2, 'Ok', (70, 85), (60, -1))
        self.Bind(wx.EVT_BUTTON, self.OnClose, id=2)
        self.Centre()
        self.ShowModal()
        self.Destroy()

    def OnClose(self, event):
        pair = self.spin.GetValue()
        self.Close()
        return(pair)

class MyMenu(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, wx.DefaultPosition, wx.Size(1000, 700))
        self.SetMinSize(wx.Size(400, 300))
        self.panel = wx.Panel(self, wx.ID_ANY)
        self.SetIcon(wx.Icon('computer.png', wx.BITMAP_TYPE_ANY))

        bmp = wx.Image('wood.png', wx.BITMAP_TYPE_ANY).ConvertToBitmap()
        bitmap = wx.StaticBitmap(self, -1, bmp, (0, 0))

        menubar = wx.MenuBar()
        file = wx.Menu()
        edit = wx.Menu()

        file.Append(101, '&New Game', 'Start a New Game')
        file.AppendSeparator()
        file.Append(105,'&Quit\tEsc', 'Quit the Application')          

        menubar.Append(file, '&File')
        self.SetMenuBar(menubar)
        self.statusbar = self.CreateStatusBar()
        self.Centre()

        self.Bind(wx.EVT_MENU, self.OnNew, id=101)
        self.Bind(wx.EVT_MENU, self.OnQuit, id=105)
        self.panel.Bind(wx.EVT_KEY_DOWN, self.OnKey)

    def OnNew(self, event):
        if ControlVar:
            for i in range(n*2):
                self.dugmad[i].Destroy()
        md = MyDialog(None, -1, 'New Game')
        n = md.OnClose(None)
        self.statusbar.SetStatusText('You Selected {} Pairs.'.format(n))
        self.Cards()

    def OnButton(self, event):
        print('ANYTHING PLEASE!')

## problem ahead!
    def Cards(self):
        image = wx.Image('cveteki.jpg', wx.BITMAP_TYPE_ANY).ConvertToBitmap()
        self.dugmad = []
        for i in range(2*n):
            dugme = wx.BitmapButton(self, i, image)
            self.dugmad.append(dugme)
            self.Bind(wx.EVT_BUTTON, self.OnButton, id=i)

        if n == 3:
            self.Draw(2, 3)
        if n == 4:
            self.Draw(2, 4)
        if n == 5:
            self.Draw(2, 5)

    def Draw(self,a, b):            
        gs = wx.GridSizer(a,b,40,40)
        for i in range(n*2):
            gs.Add(self.dugmad[i],0, wx.EXPAND)

        vbox = wx.BoxSizer(wx.VERTICAL)
        vbox.Add(gs, 1, wx.EXPAND | wx.ALL, 40)
        self.SetSizer(vbox)
        self.Layout()
        self.Refresh()
        global ControlVar
        ControlVar=True

    def OnKey(self, event):
        keycode = event.GetKeyCode()
        if keycode == wx.WXK_ESCAPE:
             box = wx.MessageDialog(None, 'Are you sure you want to quit?', 'Quit', wx.YES_NO | wx.ICON_QUESTION)
             if box.ShowModal() == wx.ID_YES:
                self.Close()

    def OnQuit(self, event):
        box = wx.MessageDialog(None, 'Are you sure you want to quit?', 'Quit', wx.YES_NO | wx.ICON_QUESTION)
        if box.ShowModal() == wx.ID_YES:
            self.Destroy()

class MyApp(wx.App):
    def OnInit(self):
        frame = MyMenu(None, -1, 'Memory')
        frame.Show(True)
        return (True)

def main():
    app = MyApp(False)
    app.MainLoop()
main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:56:43.087

我试图运行您的代码，但我没有准备好具有这些名称的图像，而且我无法理解您的所有全局变量，并且我收到关于 n 未定义的错误。因此，我为您做了一个简单的测试，希望对您有所帮助：

```
import wx
app = wx.App()

def onButton(evt):
    print "button pressed!", evt.GetEventObject().GetLabel()

frm = wx.Frame(None)

for i in range(10):
    but = wx.Button(frm, pos=(10, i*20), label="button %s" % i)
    but.Bind(wx.EVT_BUTTON, onButton)

frm.Show()
app.MainLoop() 
```

如果你真的想要，but.Bind(...) 也可以是 frm.Bind(...)。请注意，我不喜欢 id 的：我不在乎什么 id 的 wxPython 分配了按钮。

我不确定您的代码有什么问题，因为我无法运行它并且不想用它调试其他错误。

再次，我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:39:04.437

但是为什么你在创建 MyDialog 之后就销毁它？检查：在 self.ShowModal() 之后立即调用 self.Destroy() 方法。

# android - android背景图像减慢应用程序

> ID：14269186
> 
> 赞同：9
> 
> 时间：2013-01-10T23:30:25.997
> 
> 标签：android, background, android-viewpager

我正在使用 viewpager 在我的应用程序中的片段之间滑动。我在 XML 中定义背景，所以

```
android:background="@drawable/bg_final" 
```

如果我使用简单的背景颜色，我的应用程序会非常流畅。如果我将它与这个背景图像一起使用，fps 会降低，我的应用程序变得只能通过。它并不慢，只是不那么流畅，但是在较弱的设备上它可能会滞后。应用背景图像是一种不好的方法吗？整个图像为 480x800 png，大小为 14.7kB。可能是什么问题？

（片段的背景是透明的，viewpager 位于 main.xml 中，其背景与此图像一起）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-28T03:59:39.083

有很多答案都指向预缩放位图。这非常重要，如果可以的话，你应该这样做，但是在尝试了几种不同的方法之后，我体验到的最大性能提升是创建一个视图并覆盖 onDraw 方法。

该类可以像这样简单：

```
public class DTImageView extends View {

     public Bitmap imageBitmap;

     public DTImageView(Context context) { 
         super(context); 
     } 

     @Override
     protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        if(imageBitmap != null)
          canvas.drawBitmap(imageBitmap, 0, 0, null); 
     }
} 
```

使用预缩放位图调用代码：

```
 DTImageView bgImageView = new DTImageView(context);
 bgImageView.imageBitmap = Bitmap.createScaledBitmap(bitmap,width,height,true); 
```

此时，您可以将此视图添加到它所属的视图层次结构中。在我的例子中，我的视图层次结构有一个 bgImage、一个所有其他功能发生的中间地带，以及 fgImage。

使用 android sdk 工具 Hierarchy Viewer 来分析应用程序并查看每个视图的绘制速度。我的应用程序花了 30-40 毫秒绘制 bgImage 和 fgImage。预缩放和覆盖 onDraw 将 30-40 毫秒减少到大约 1.5 毫秒。

这是我之前和之后的一个视图的 Draw 性能的屏幕截图：

**前：** ![使用 setImageBitmap 而不是覆盖 onDraw。](../Images/60979ec428d685f6d4f0b592ffe48999.png)

**后：** ![使用上面简单地覆盖 OnDraw 的 DTImageView](../Images/ab1530ce01c4158bcc4d45e79b4cbee9.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-23T05:28:28.777

我有点晚了，但这只是让我感到难过，在运行 GPU 调试器时，我注意到系统放大了我的图像！我有一个 1920x1080 的图像，它显示为 3780x6720 的纹理！

理想情况下，您应该在相应的文件夹（ 、 等）中拥有每个密度的`res/drawable-mdpi`纹理`res/drawable-hdpi`。

但是，如果您认为您的一种纹理很好，请将其放入`res/drawable-nodpi`，**而不是** `res/drawable`。如果你把它放入`res/drawable-nodpi`，系统将不会根据 dpi 对其进行缩放。

就我而言，它将简单的 UI 从 Pixel XL 上的 10fps 更改为 60fps 的全帧速率。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-21T13:29:00.137

我有一个背景图像，尺寸不大，但尺寸奇怪 - 因此拉伸和性能不佳。我创建了一个带有参数 Context、一个 View 和一个与设备屏幕尺寸匹配的可绘制 ID(int) 的方法。在例如 Fragments onCreateView 中使用它来设置背景。

```
public void setBackground(Context context, View view, int drawableId){
    Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), drawableId);
    int width = Resources.getSystem().getDisplayMetrics().widthPixels;
    int height = Resources.getSystem().getDisplayMetrics().heightPixels;
    bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);
    BitmapDrawable bitmapDrawable = new BitmapDrawable(context.getResources(), bitmap);
    view.setBackground(bitmapDrawable);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T02:16:19.953

其原因可能是图像正在被拉伸，而 Android 在拉伸背景图像方面存在性能问题。

相反，您应该使用背景颜色替换背景图像，或者[查看此答案](https://stackoverflow.com/a/2706944/832776)以使图像重复而不是拉伸。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-06T16:57:06.023

我有同样的问题，我用这个方法解决了它：

将您的图像添加到位于该`res`目录下的 mipmap 文件夹中。它将根据图像的密度添加图像。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-13T05:47:12.570

创建只添加一个大小为 1080x1920 的背景图像并将其放在 drawable-nodpi 文件夹中，这样就解决了这个问题

# php - shell_exec() 调用 php 文件返回不正确的输出字符编码

> ID：14269187
> 
> 赞同：2
> 
> 时间：2013-01-10T23:30:28.130
> 
> 标签：php, shell, encoding, shell-exec

好的，这是我的场景。

我有`file.php`包含以下内容：

```
<?php
$output = shell_exec("php output.php");
echo $output;   
?> 
```

其中`output.php`包含以下内容：

```
<?php
echo "This is my output!";
?> 
```

当我`file.php`从 Web 浏览器运行时，我得到以下输出：

```
‹ ÉÈ,V¢ÜJ…üÒ’‚ÒEÿÿp³*š 
```

但是，当我`php output.php`直接从 shell 运行相同的程序时，我得到了正确的输出：

```
This is my output! 
```

现在我很清楚这是某种编码问题，但我一生都无法弄清楚如何解决它。我尝试使用`putenv('LANG=en_US.UTF-8');`. 我还尝试使用`header('Content-Type: text/html; charset=UTF-8');`，甚至尝试确定使用`mb_detect_encoding($out, 'UTF-8', true);`. 没有结果。

`exec()`产生相同的格式错误的输出。

如果有人能对此有所了解，我将非常感激，并可能提供一些关于 shell_exec 和文件输出之间发生的事情导致输出格式错误的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:46:17.003

问题是由于启用了输出压缩，PHP 输出被压缩了两次。

`zlib.output_compression`解决方案是通过文件中的条目`.htaccess`或在 .php 文件顶部包含以下内容来禁用：

```
ini_set('zlib.output_compression', 'Off'); 
```

# android - 以编程方式检索唯一的开发人员密钥？

> ID：14269188
> 
> 赞同：0
> 
> 时间：2013-01-10T23:30:30.087
> 
> 标签：android

我想知道是否可以以编程方式检索用于签署应用程序的唯一开发人员密钥/凭据？基本上，我希望在运行时检索唯一的开发人员信息，以验证他们作为应用程序作者的身份。

此外，如果应用程序在用户手机上运行同时检索所述信息，这是否需要任何权限？

非常感谢您的帮助

**编辑：** 我认为这可能对我有帮助 [http://developer.android.com/reference/javax/security/cert/Certificate.html](http://developer.android.com/reference/javax/security/cert/Certificate.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:29:37.200

经过一番研究，我发现[这](http://thomascannon.net/misc/android_apk_certificate/)是为了获得证书。如果我然后使用[getPublicKey()](http://developer.android.com/reference/java/security/cert/Certificate.html#getPublicKey%28%29)返回公钥，这将足够，因为我将知道我尝试使用[verify (PublicKey key)](http://developer.android.com/reference/java/security/cert/Certificate.html#verify%28java.security.PublicKey%29)验证的开发人员的公钥。

# php - 我对 JSON 很陌生，我正在尝试从 google + JSon 获取用户数据 代码是

> ID：14269192
> 
> 赞同：0
> 
> 时间：2013-01-10T23:30:49.430
> 
> 标签：php, json

我对 JSON 很陌生，我正在尝试从 google + JSOn 获取用户数据 代码是 [https://www.googleapis.com/plus/v1/people?query=saurabh+sharma&key=AIzaSyADJjj8IeKuGb-woleHKTVouSlvAJUpTrs](https://www.googleapis.com/plus/v1/people?query=saurabh+sharma&key=AIzaSyADJjj8IeKuGb-woleHKTVouSlvAJUpTrs)

请帮我在 php 中检索用户配置文件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:55:10.053

数组和对象之间确实有点混合土豆泥（=混淆）。JSON 完全是对象，除了数组“items”，它是一个...对象的数组。

尝试这个：

```
<?php
$strUrl = "https://www.googleapis.com/plus/v1/people?query=saurabh+sharma&key=AIzaSyADJjj8IeKuGb-woleHKTVouSlvAJUpTrs";
$strContents = file_get_contents($strUrl);
$objPeopleFeed = json_decode($strContents);

//It's an array of objects, so:
echo "<h1>{$objPeopleFeed->title}</h1>";
foreach($objPeopleFeed->items as $objUser)
{
    echo "
<p>
    <img src='{$objUser->image->url}' />
    <a href='{$objUser->url}'>{$objUser->displayName}</a>
    <i>{$objUser->objectType}</i>
</p>";
}
?> 
```

它的作用：它从 Web 获取内容（即 JSON），将其作为 JSON 解释为有效的 PHP 结构。从结构中，我们将标题打印为 H1 标题。从项目（一个数组）中，我们遍历每个项目，打印图像 src from `$objUser->image->url`，打印用户链接 $objUser->url 及其名称`$objUser->displayName`，以及可选的`$objUser->objectType`在 Google 上注册的对象类型。

因为一切都是对象，所以你使用对象来变量语法' `->xyz`'而不是数组索引' `["xyz"]`'，我猜你被困在那里了。这`$objPeopleFeed->items`是一个非关联数组，因此您可以使用数字循环遍历项目（`$objPeopleFeed->items[0]`第一项，1 表示第二项，等等......）。作为您的最终 cookie，您可以将`count($objPeopleFeed->items)`其用作结果计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:32:59.323

`var_dump(json_decode(file_get_contents('https://www.googleapis.com/plus/v1/people?query=saurabh+sharma&key=AIzaSyADJjj8IeKuGb-woleHKTVouSlvAJUpTrs')));`

# zend-framework2 - ZF2 目录/命名空间模型对象位置

> ID：14269201
> 
> 赞同：1
> 
> 时间：2013-01-10T23:31:49.800
> 
> 标签：zend-framework2

在[zf2 数据库和模型教程](http://framework.zend.com/manual/2.0/en/user-guide/database-and-models.html)中，这样的路径指向包含我的模型类的目录：

```
module/Album/src/Album/Model 
```

我在以下位置创建了另外两个类：

```
module/Album/src/Album/Model/AlbumRelatedClass.php
module/Album/src/Album/Model/AlbumRelatedTable.php 
```

我想把这些课程放在

```
module/Album/src/AlbumRelated/Model/ 
```

为了这个测试的目的，我在那里创建了模型类的副本，不幸的是，我的 Album 模块配置告诉我它无法在 AlbumRelated 位置找到类。我尝试将 AlbumRelated 位置中的命名空间更改为 AlbumRelated\Model 并直接引用类位置 (\Album\Model\AlbumRelated())，但没有成功。

有谁知道我该怎么做？如果我不应该这样做，有人可以解释为什么吗？我也很想知道为什么文件夹结构是专辑/模型/专辑（这似乎是多余的，我对教程中的解释不清楚）。

任何帮助都会很棒，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:14:09.450

简短的回答是它找不到类，因为您可能没有设置自动加载器配置来了解新的“AlbumRelated”命名空间。看看里面发生了什么`\Album\Module::getAutoloaderConfig()`。您可能希望将键/值对添加到`namespaces`like `'AlbumRelated' => __DIR__ . '/src/AlbumRelated'`。这将告诉自动加载器在哪里寻找 AlbumRelated 命名空间下的类。

也就是说，

> 如果我不应该这样做，有人可以解释为什么吗？

你可能不应该那样做。您有一个名为`\Album`. 然后你`\Album\Model`在它下面有命名空间。任何与专辑相关的模型都应该存在于那里。想象一下，您的系统中有一个用于唱片标签的实体，因此您可以将专辑与发布它的标签相关联。ZF2 的期望是您将创建一个名为的类，该类`\Album\Model\RecordLabel`位于`module/Album/src/Album/Model/RecordLabel.php`. 只要我们假设 RecordLabels 主要与专辑相关，这一切都非常合理。

当然，如果您有很多围绕管理它们的工作流程，您也可以将 RecordLabel 粘贴到它自己的模块中。

> 我也很想知道为什么文件夹结构是专辑/模型/专辑

我假设你的意思是专辑/src/专辑。这种冗余是为了保持一个干净整洁[的 PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)设置。所以，第一个 Album 是标识模块，第二个是 Album 命名空间的顶层。这提供了最大的灵活性，但不是硬性规定。[请参阅 Rob Allen 最近关于zf2 中的替代模块布局](http://akrabat.com/zend-framework-2/thoughts-on-module-directory-structure/)的博客文章以进行探索。

# emacs - 想要在 Emacs 的 Normal State of Evil Mode 中使用空格键后跟一个键而不是 C 键

> ID：14269202
> 
> 赞同：2
> 
> 时间：2013-01-10T23:32:03.777
> 
> 标签：emacs, elisp, evil-mode

我希望能够按空格键，*然后按*另一个键，而不是按 Ctrl，而不是按正常状态邪恶模式中的键。

例如，这是我开始在我的`.emacs`文件中定义的内容：

```
(define-key evil-normal-state-map " ww" 'evil-window-next)
(define-key evil-normal-state-map " wr" 'evil-window-rotate-downwards)
(define-key evil-normal-state-map " wR" 'evil-window-rotate-upwards)
(define-key evil-normal-state-map " wo" 'delete-other-windows)
(define-key evil-normal-state-map " wn" 'evil-window-new)
(define-key evil-normal-state-map " wl" 'evil-window-right)
(define-key evil-normal-state-map " wh" 'evil-window-left)
(define-key evil-normal-state-map " wj" 'evil-window-down)
(define-key evil-normal-state-map " wk" 'evil-window-up) 
```

据我目前所知，似乎我只能将按键序列定义为给定的功能，而不是像 Ctrl 这样不能单独使用的东西。有没有一种通用的方法可以使空格键后跟另一个键等同`C-"that key"`于正常状态邪恶模式中的任何键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:43:34.823

我对 Evil 了解得不够多，无法给你一个具体的答案，但你可以试试

```
(define-key function-key-map " " 'event-apply-control-modifier)
(define-key evil-normal-state-map " " nil) 
```

只有当SPC`function-key-map`在所有其他地图中“未绑定”时，绑定才会生效，因此将其绑定到 nil in`evil-normal-state-map`可能是不够的。否则，您可以使用`key-translation-map`而不是`function-key-map`，因此重写将优先于正常的 SPC 绑定，但是您需要弄清楚在激活/离开 Evil 的正常状态时如何启用/禁用此绑定。

# c - C 谜题——指针

> ID：14269203
> 
> 赞同：0
> 
> 时间：2013-01-10T23:32:04.183
> 
> 标签：c, pointers

基本上我在这里想要实现的是拥有一个全局变量，其中包含指向结构的指针数组，该结构的大小在编译时是未知的——在我下面的示例中是`my_struct **tab`. 在最终版本中，我想调用一个 JNI 方法来初始化我的指针数组，并且我想保留它们以供其他方法使用。

不幸的是，我不是 C 程序员，我真的很努力解决这个问题。下面我展示了我尝试做的事情；显然，它不起作用。任何建设性的反馈都会非常有帮助。

（对不起，包含它应该是 C 代码的误解）

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    int tag;
} my_struct;

my_struct **tab;

void * get_pointer_to_struct() {

    my_struct * s;
    /* allocate memory */
    if ((s = (my_struct *) malloc(sizeof (my_struct))) == NULL) {
        return NULL;
    }
    return s;
}

void free_structures(int j) {
    for (int a; a < j; a++) {
        my_struct *s;
        s = (my_struct *) tab[a];

        /* free memory */
        free(s);
        tab[a] = NULL;
    }
}

void init_pointers_array(int j) {
    my_struct * temp_arr[j];
    for (int i = 0; i < j; i++) {
        temp_arr[i] = (my_struct *) get_pointer_to_struct();
        temp_arr[i]->tag = i;
    }
    tab = temp_arr;
}

int main() {
    //initialization
    init_pointers_array(10);
    //usage
    for (int a = 0; a < 10; a++) {
        if (tab[a]) {
            my_struct * str_tmp = tab[a];
            printf("Integer that you have entered is %d\n", str_tmp->tag);
        }
    }
    //free mem
    free_structures(10);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:52:16.047

这段代码太难读了，我很惊讶有人愿意阅读它。遵循这些准则，您的所有问题都将得到解决：

*   使用 std::vector （或类似的数组类）而不是原始数组
*   如果不需要，不要使用动态分配，但如果确实使用**new**而不是 malloc
*   每当您使用动态分配时，请在拥有该对象并遵循 RAII 原则的类中执行此操作
*   不要使用全局变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:39:31.673

```
my_struct * temp_arr[j]; 
```

然后

```
tab = temp_arr; 
```

是**错的。**（不仅`*`限定符的位置很糟糕，而且还有多余的强制转换严重降低了代码的可读性，而且）`temp_array`是一个**本地自动数组，**所以它会在函数返回时被释放。之后对其地址进行任何操作都会导致未定义的行为。您可能想`malloc()`为结构占用一些内存（强制转换只是为了使代码在 C++ 中可用。在 C 中，强烈建议不要进行冗余类型转换）：

```
my_struct **tab;

tab = (my_struct **)malloc(sizeof(tab[0]) * number_of_structs);

int i;
for (i = 0; i < number_of_structs; i++) {
    tab[i] = (my_struct *)malloc(sizeof(tab[0][0]));
} 
```

并释放它：

```
int i;
for (i = 0; i < number_of_structs; i++) {
    free(tab[i]);
}

free(tab); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T23:41:39.067

几点：

*   `get_pointer_to_struct`可以简单地返回`malloc`. 并更改它的签名以避免额外的转换为`my_struct*`.
*   `temp_array``init_pointers_array`在堆栈上创建，因此退出时不再存在。`malloc`它也是。这是你最大的问题。
*   这是一般情况。你做了很多多余的工作，这会让你的代码变得很糟糕。尽量避免多余的强制转换和不需要的变量。

# jquery - 将元素数组转换为 json 对象

> ID：14269205
> 
> 赞同：0
> 
> 时间：2013-01-10T23:32:32.683
> 
> 标签：jquery, json

我有一个具有重复 pk 值的 pks 数组，我想将其转换为 JSON 对象，其中

```
obj.id = pk
obj.count = count of pk in array 
```

我尝试使用`JSON.stringify`库，但`obj.id` 没有给我任何 pk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:53:22.477

我认为这就是你要找的：

```
var x = [1,1,1,2,2,2,3,4,3];
var unique = {};
for(var i = 0; i < x.length; i++)
{
  if (!unique.hasOwnProperty(x[i])) {
     unique[x[i]] = 1;
  }
  else
  {
    unique[x[i]]++;
  }
} 
```

生产`{1: 3, 2: 3, 3: 2, 4: 1}`

然后，您可以这样做以将其转换为您想要的对象结构

```
var objArray = [];

for (var key in unique) {
  objArray.push({id: key, count: unique[key]});
} 
```

生产`[{id: 1, count: 3},{id: 2, count: 3},{id: 3, count: 2},{id: 4, count: 1}]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:37:10.400

使用[json2](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)库

并调用：

var myJsonString = JSON.stringify(yourArray);

# c - 从命令提示符执行程序

> ID：14269207
> 
> 赞同：-4
> 
> 时间：2013-01-10T23:32:39.210
> 
> 标签：c, eclipse, debugging, command, prompt

我无法通过从程序的位置执行我的程序来执行我的可执行文件。我正在使用 eclipse，当我将可执行文件的位置从 eclipse 中的调试粘贴到命令提示符上时，我的程序运行良好。但是，当我尝试从调试位置执行我的程序时，我的程序被更改了，请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:39:25.900

在它开始执行之后，您的程序是否使用相对路径来输入可能不同的文件？

您是计算机上的管理员和/或以管理员身份运行 eclipse 吗？您可以尝试以管理员身份运行命令提示符以确认这不是权限问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:40:13.040

你不能在调试中工作。因为程序是在普通目录下工作的。只需在普通目录中工作即可。

你的问题似乎不是一个真正的问题。

# javascript - 说明 div 覆盖未显示在 li 图像上

> ID：14269210
> 
> 赞同：1
> 
> 时间：2013-01-10T23:33:01.090
> 
> 标签：javascript, jquery, css, slider, slideshow

我正在使用滑块[http://marktyrrell.com/labs/blueberry/](http://marktyrrell.com/labs/blueberry/)并尝试添加覆盖图像并随每个 div 变化的描述框。我添加了一个 div 类，但它没有显示出来。不确定我是否还需要更改 javascript？

css

```
.blueberry { 
    margin: 0 auto; 
    max-width:1280px; 
    position:relative; 
    z-index:1;  
    margin-top:-25px; 

}

.blueberry .slides {
    display: block;
    position: relative;
    overflow: hidden;
    margin:0;
    padding:0;
    list-style:none;

}
.blueberry .slides li {
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden;

}
.blueberry .slides li img {
    display: block;
    width: 100%;
    max-width: none;

}
.blueberry .slides li.active { display: block; position: relative; }
.blueberry .crop li img { width: auto; }

.slides .description {
    z-index:100;
    position:absolute;
    left: 0px;
    background:#000;
    color:#1d1d1d;
} 
```

HTML

```
<div class="blueberry shadow">
  <ul class="slides"> 
  <li><img src="images/slide1.jpg" />
  <div class="description">
  <p>Kick off 2013 by starting a fundraising campaign to help people get access to clean water. It&rsquo;s fun, it&rsquo;s easy and it&rsquo;s the best way we can think to start the new year.</p></div></li> 
```

js

```
<script>
$(window).load(function() {
$('.blueberry').blueberry();
});
</script> 
```

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:59:38.457

您需要定义 css`top`属性，看看它工作正常：

![在此处输入图像描述](../Images/80ec3de9e4b66d1713fb2ee9a5ce5710.png)

注意：使用`div`or `p`inside`ul li`是违反网络标准的。我建议使用`span`, `em`, `s`,之类的标签`i`。

# powershell - 模块中的 PowerShell .ps1 文件 cmdlet

> ID：14269212
> 
> 赞同：3
> 
> 时间：2013-01-10T23:33:10.297
> 
> 标签：powershell, powershell-module

现在我有一组`.ps1`相互关联的 PowerShell 脚本 cmdlet（它们可以接受参数），但每个都相当复杂。我想将它们组织成一个模块，最好将它们保存在单独的文件中。

最好的方法是什么？我可以将它们保存在单独的 .ps1 文件中，并使用模块清单来说明它们是模块的一部分吗？我是否需要将文件点源到`.psm1`文件中以保持文件分离？还是将它们分成单独的文件是不明智的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:56:40.937

最终，您将需要至少一个 .PSM1 文件，其中包含要从模块中导出的变量和函数定义，或者 .PS1 文件中的这些定义中的点源。默认情况下，在导出所有函数时不会导出变量。如果要修改该行为，`Export-ModuleMember -Variable MyExportedVariable -Function *-*`请在 PSM1 文件的末尾使用。

如果您的 PS1 文件中的大部分代码是内部实现细节，则保留在 PS1 文件中应该没问题。请记住，PSM1 将导出模块的“公共”界面。

# c++ - std::unique_ptr::reset 和构造函数异常

> ID：14269219
> 
> 赞同：9
> 
> 时间：2013-01-10T23:33:58.200
> 
> 标签：c++, memory-management, exception-handling, constructor

如果`unique_ptr`像这样初始化：

```
std::unique_ptr<Foo> i;
i.reset( new Foo() ); 
```

但是从 抛出异常`Foo::Foo()`，问题是：分配的内存会发生什么？unique_ptr 如何避免泄露？这是在操作员内部处理的事情`new`吗？

当作用域退出时，析构函数肯定会被调用。由于在返回`reset`之前不会调用调用`new Foo()`，因此似乎必须通过`new`在异常离开构造函数时释放分配的内存来处理此问题。

是这样吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T23:36:48.200

如果在 的构造函数中抛出异常`Foo`，则`reset`唯一指针的函数一开始就不会被执行。因此，唯一指针保留其原始值。

如果`new`对象构造引发异常，则表达式不会泄漏内存。

# printing - 使用 TideSDK 进行静默打印

> ID：14269221
> 
> 赞同：8
> 
> 时间：2013-01-10T23:34:06.913
> 
> 标签：printing, tidesdk

**更新：**我决定在我的项目中使用 appjs，而不是 TideSDK。使用 AppJS，您可以轻松制作节点模块，您可以在其中添加 C++ 模块，以便轻松使用静默打印。我建议任何对该主题感兴趣的人检查一下。祝大家好运！

我正在使用 TideSDK 开发一个应用程序 - 这是一个非常棒的框架，如果您还没有尝试过，请留出一些时间！

无论如何，我正在尝试使用 Javascript 进行打印，但每次都会出现打印设置对话框，就像使用其他浏览器一样。我正在尝试消除该框并传递我希望它打印的打印机。

我知道 FireFox 中有用于静默打印的设置，这是我以前使用的，但 TideSDK 没有任何类似的选项（我已经找到）。

经过大量研究，我认为唯一可行的选项包括 python 脚本、C++ 模块或编辑 TideSDK 源代码并重新编译。对我来说，这三个听起来都比较宽松。修改 TideSDK 源并从中删除对话框`webkit_ui_delegate.cpp`在以后更新此程序时很可能会导致一些问题 - 除了无法轻松传递打印机名称之外。python 脚本将需要第三方模块并且必须处理页面的内容，我怀疑我是否能够编写一些可以在这方面做得很好的东西。最后，我认为 C++ 解决方案是最可行的，因为它可以访问 win32api，但同样，它必须将 HTML 处理为打印语言，这是我不熟悉的。我想我正在寻找更多为我处理渲染的 webkit 解决方案。

**在 TideSDK 上实现静默打印应该怎么做？请包括代码示例。**

> 我主要在寻找**Windows**解决方案，我已经弄清楚了其他平台。

感谢您的宝贵时间，感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:36:07.297

**注意**：这是对先前问题的重写。

Windows/GDI+ 打印的工作方式是它使用 a`PrintDialog`来获取打印机标识符（并且还让用户知道他们正在打印到哪台打印机）。因此，为了进行静默打印，您需要在不显示对话框的情况下获取打印机标识符。

所以***删除***这段代码：

```
// Open a printing dialog to fetch the HDC of the desired printer.
PRINTDLG dialog;
ZeroMemory(&dialog, sizeof(PRINTDLG));
dialog.lStructSize = sizeof(PRINTDLG);
dialog.Flags = PD_PRINTSETUP | PD_RETURNDC;
BOOL dialogResult = ::PrintDlg(&dialog);

if (!dialogResult) // Error or cancel.
{
    DWORD reason = CommDlgExtendedError();
    if (!reason) // User cancelled.
        return S_OK;

    logger->Error("Could not print page, dialog error code: %i",
        reason);
    return E_FAIL;
}

HDC hdc = dialog.hDC; 
```

然后将最后一行 ( `HDC hdc = ...`) 替换为获取打印机 HDC 的其他方式。您可以使用[`GetDefaultPrinter()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144876%28v=vs.85%29.aspx)获取默认打印机的名称，然后使用[`CreateDC()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183490%28v=vs.85%29.aspx).

[`EnumPrinters()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162692%28v=vs.85%29.aspx)或者，您可以选择打印机或使用该功能创建自定义打印对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:18:49.317

很遗憾看到这个问题没有得到任何高质量的答案，这是我想自己实现的。

我认为花时间让这个功能与 TideSDK 一起工作是相当冒险的。因此，我将偏离问题的核心能力，并建议您尝试使用 TideSDK 以外的框架来完成此任务。我认为这是解决这个问题的最**现实**的解决方案，这将是我采用的解决方案。

一旦找到我将坚持的框架，我将更新此答案。

# wcf - 如何从 ACS 托管的登录页面处理 SWT 令牌

> ID：14269223
> 
> 赞同：1
> 
> 时间：2013-01-10T23:34:07.150
> 
> 标签：wcf, token, acs

我已经设置了一个带有中继方的 ACS 域来验证 WCF 服务。在我的客户端（网站）上，我想链接到 ACS 为我的中继方提供的托管登录页面。我将返回 URL 配置为响应同一页面，但每当它返回页面时，当前都会引发此错误：

```
 A potentially dangerous Request.Form value was detected from the
 client (wresult="<t:RequestSecurityTo...") 
```

如何检索此 SWT 令牌并解析它以发送到 WCF 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:56:43.043

ASP.NET 请求验证功能在这里开始发挥作用（因为尖括号）。关闭页面的请求验证，或者在 .NET 4.5 上时，您可以将 web.config 中的请求验证模式设置为 4.5。

或者使用这个： http: [//leastprivilege.com/2010/07/24/wif-asp-net-4-0-and-request-validation/](http://leastprivilege.com/2010/07/24/wif-asp-net-4-0-and-request-validation/)

我还建议使用 SAML 而不是 SWT。因为这是 WCF 默认理解的。

# php - 正则表达式删除本地锚标签

> ID：14269231
> 
> 赞同：-1
> 
> 时间：2013-01-10T23:34:47.283
> 
> 标签：php, html, regex

我需要一些帮助在 PHP 中编写正则表达式模式。我需要获取一个包含 HTML 的字符串，找到所有包含 LOCAL href 的锚标签并删除标签，同时将文本保留在标签内。

例子：

```
<a href="/link1.html">Link 1</a> 
<a href="../link2.html">Link 2</a>
<a href="http://www.localdomain.com/link3.html">Link 3</a> 
```

应该变成：

```
Link 1
Link 2
Link 3 
```

编辑：我正在寻找这样的东西：

```
function remove_internal_links($content) {
  $pattern = '/<a href="([^"])/';
  $content = preg_replace($pattern, '\\1', $content);
} 
```

我需要帮助的地方（显然）是 $pattern。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:40:04.623

您可以通过以下方式提取所需的部分：

```
>[^<]* 
```

或者用“”替换你不想要的东西：

全部替换

```
<[^>]*> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:03:17.303

您可以使用一些第三方库来解析 html，例如[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/');

// Find all links 
foreach($html->find('a') as $element) 
       if($element->href ...); 
```

# node.js - Node.js：如何将流读入缓冲区？

> ID：14269233
> 
> 赞同：79
> 
> 时间：2013-01-10T23:34:48.317
> 
> 标签：node.js

我写了一个非常简单的函数，它从给定的 URL 下载图像，调整大小并上传到 S3（使用 'gm' 和 'knox'），我不知道我是否正在正确地将流读取到缓冲区. （一切正常，但它是正确的方法吗？）

另外，我想了解有关事件循环的一些信息，我怎么知道函数的一次调用不会泄漏任何内容或将“buf”变量更改为另一个已经运行的调用（或者这种情况是不可能的，因为回调是匿名的功能？）

```
var http = require('http');
var https = require('https');
var s3 = require('./s3');
var gm = require('gm');

module.exports.processImageUrl = function(imageUrl, filename, callback) {
var client = http;
if (imageUrl.substr(0, 5) == 'https') { client = https; }

client.get(imageUrl, function(res) {
    if (res.statusCode != 200) {
        return callback(new Error('HTTP Response code ' + res.statusCode));
    }

    gm(res)
        .geometry(1024, 768, '>')
        .stream('jpg', function(err, stdout, stderr) {
            if (!err) {
                var buf = new Buffer(0);
                stdout.on('data', function(d) {
                    buf = Buffer.concat([buf, d]);
                });

                stdout.on('end', function() {
                    var headers = {
                        'Content-Length': buf.length
                        , 'Content-Type': 'Image/jpeg'
                        , 'x-amz-acl': 'public-read'
                    };

                    s3.putBuffer(buf, '/img/d/' + filename + '.jpg', headers, function(err, res) {
                        if(err) {
                            return callback(err);
                        } else {
                            return callback(null, res.client._httpMessage.url);
                        }
                    });
                });
            } else {
                callback(err);
            }
        });
    }).on('error', function(err) {
        callback(err);
    });
}; 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-01-11T00:05:01.017

总的来说，我没有看到任何会破坏您的代码的内容。

两个建议：

组合`Buffer`对象的方式不是最理想的，因为它必须在每个“数据”事件上复制所有预先存在的数据。最好将块放在一个数组中，然后`concat`将它们全部放在最后。

```
var bufs = [];
stdout.on('data', function(d){ bufs.push(d); });
stdout.on('end', function(){
  var buf = Buffer.concat(bufs);
}) 
```

为了提高性能，我会调查您使用的 S3 库是否支持流。理想情况下，您根本不需要创建一个大缓冲区，而只需将`stdout`流直接传递给 S3 库。

至于你问题的第二部分，那是不可能的。当一个函数被调用时，它被分配了自己的私有上下文，并且其中定义的所有内容都只能从该函数中定义的其他项访问。

### 更新

将文件转储到文件系统可能意味着每个请求的内存使用量更少，但文件 IO 可能非常慢，因此可能不值得。我想说，在您可以分析和压力测试此功能之前，您不应该优化太多。如果垃圾收集器正在完成它的工作，那么您可能会过度优化。

尽管如此，还是有更好的方法，所以不要使用文件。由于您想要的只是长度，您可以计算它而无需将所有缓冲区附加在一起，因此您根本不需要分配新的缓冲区。

```
var pause_stream = require('pause-stream');

// Your other code.

var bufs = [];
stdout.on('data', function(d){ bufs.push(d); });
stdout.on('end', function(){
  var contentLength = bufs.reduce(function(sum, buf){
    return sum + buf.length;
  }, 0);

  // Create a stream that will emit your chunks when resumed.
  var stream = pause_stream();
  stream.pause();
  while (bufs.length) stream.write(bufs.shift());
  stream.end();

  var headers = {
      'Content-Length': contentLength,
      // ...
  };

  s3.putStream(stream, ....); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2021-05-27T20:38:48.280

## Javascript 片段

```
function stream2buffer(stream) {

    return new Promise((resolve, reject) => {

        const _buf = [];

        stream.on("data", (chunk) => _buf.push(chunk));
        stream.on("end", () => resolve(Buffer.concat(_buf)));
        stream.on("error", (err) => reject(err));

    });
} 
```

* * *

## 打字稿片段

```
async function stream2buffer(stream: Stream): Promise<Buffer> {

    return new Promise < Buffer > ((resolve, reject) => {

        const _buf = Array < any > ();

        stream.on("data", chunk => _buf.push(chunk));
        stream.on("end", () => resolve(Buffer.concat(_buf)));
        stream.on("error", err => reject(`error converting stream - ${err}`));

    });
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-02-05T12:31:21.247

如果您从 http(s) URI 中提取，您可以使用[node-fetch](https://www.npmjs.com/package/node-fetch)轻松完成此操作。

从自述文件：

```
fetch('https://assets-cdn.github.com/images/modules/logos_page/Octocat.png')
    .then(res => res.buffer())
    .then(buffer => console.log) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-01-19T14:28:44.373

您可以将可读流转换为缓冲区，并以这样的异步方式将其集成到您的代码中。

```
async streamToBuffer (stream) {
    return new Promise((resolve, reject) => {
      const data = [];

      stream.on('data', (chunk) => {
        data.push(chunk);
      });

      stream.on('end', () => {
        resolve(Buffer.concat(data))
      })

      stream.on('error', (err) => {
        reject(err)
      })

    })
  } 
```

用法很简单：

```
 // usage
  const myStream // your stream
  const buffer = await streamToBuffer(myStream) // this is a buffer 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-06-03T19:53:47.700

我建议使用 loganfsmyths 方法，使用数组来保存数据。

```
var bufs = [];
stdout.on('data', function(d){ bufs.push(d); });
stdout.on('end', function(){
  var buf = Buffer.concat(bufs);
} 
```

在我当前的工作示例中，我正在使用 GRIDfs 和 npm 的 Jimp。

```
 var bucket = new GridFSBucket(getDBReference(), { bucketName: 'images' } );
    var dwnldStream = bucket.openDownloadStream(info[0]._id);// original size
  dwnldStream.on('data', function(chunk) {
       data.push(chunk);
    });
  dwnldStream.on('end', function() {
    var buff =Buffer.concat(data);
    console.log("buffer: ", buff);
       jimp.read(buff)
.then(image => {
         console.log("read the image!");
         IMAGE_SIZES.forEach( (size)=>{
         resize(image,size);
         });
}); 
```

我做了一些其他的研究

使用字符串方法但不起作用，可能是因为我正在从图像文件中读取，但数组方法确实有效。

```
const DISCLAIMER = "DONT DO THIS";
var data = "";
stdout.on('data', function(d){ 
           bufs+=d; 
         });
stdout.on('end', function(){
          var buf = Buffer.from(bufs);
          //// do work with the buffer here

          }); 
```

当我执行字符串方法时，我从 npm jimp 收到此错误

```
buffer:  <Buffer 00 00 00 00 00>
{ Error: Could not find MIME for Buffer <null> 
```

基本上我认为从二进制到字符串的类型强制没有那么好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T00:03:22.173

我建议在最后只将缓冲区数组和结果缓冲区连接一次。它很容易手动完成，或者可以使用[节点缓冲区](https://github.com/substack/node-buffers)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-29T09:16:29.383

我只想发布我的解决方案。以前的答案对我的研究很有帮助。我使用 length-stream 来获取流的大小，但这里的问题是回调是在流的末尾附近触发的，所以我也使用 stream-cache 来缓存流并在我知道后将其通过管道传递给 res 对象内容长度。万一出现错误，

```
var StreamCache = require('stream-cache');
var lengthStream = require('length-stream');

var _streamFile = function(res , stream , cb){
    var cache = new StreamCache();

    var lstream = lengthStream(function(length) {
        res.header("Content-Length", length);
        cache.pipe(res);
    });

    stream.on('error', function(err){
        return cb(err);
    });

    stream.on('end', function(){
        return cb(null , true);
    });

    return stream.pipe(lstream).pipe(cache);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-22T08:54:47.483

在 ts 中，[].push(bufferPart) 不兼容；

所以：

```
getBufferFromStream(stream: Part | null): Promise<Buffer> {
    if (!stream) {
        throw 'FILE_STREAM_EMPTY';
    }
    return new Promise(
        (r, j) => {
            let buffer = Buffer.from([]);
            stream.on('data', buf => {
               buffer = Buffer.concat([buffer, buf]);
            });
            stream.on('end', () => r(buffer));
            stream.on('error', j);
        }
    );
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-25T17:35:57.300

您可以在 res.headers中检查*“内容长度”标头。*它会给你你将收到的内容的长度（它将发送多少字节的数据）

# c# - 果园 - 移动页面标题

> ID：14269236
> 
> 赞同：2
> 
> 时间：2013-01-10T23:34:58.920
> 
> 标签：c#, asp.net-mvc, orchardcms

我对 Orchard*非常*陌生，并且仍在尝试围绕所有不同的术语进行思考，因此此处使用的任何断章取义的术语都不是故意的。我正在尝试做类似于[在 SO 上](https://stackoverflow.com/questions/11149157/orchard-getting-the-contents-title-from-the-theme-layout)发布的内容，但没有可接受的答案。

在常规站点（非博客）中，图形组为我的客户提供的布局有一个标题部分，然后在其下方有两列。所以，像这样：

```
============================================================
|  Page Title                                              |
============================================================
| Left Content                           | Right Content   |
|                                        |                 |
============================================================ 
```

标题区域的 HTML 是：

```
<div class="page_header">
  <div class="padding">
    <h2 id="page_title">This is the page's title</h2>
  </div>
</div> 
```

在该块下方是更多的 div，用于将页面的其余部分分成两列。我遇到的问题是试图让用户通过 Orchard 输入的页面标题显示在上述部分中。我尝试将其设为一个名为 PageTitle 的区域，但最接近它显示任何内容的是我为该占位符添加了一个空的 HTML 小部件，然后在标签中添加了 @Model.PageTitle，即：

```
<div class="page_header">
  <div class="padding">
    <h2 id="page_title">@Model.PageTitle</h2>
  </div>
</div> 
```

格式正确，但标题显示为“ISHAPEPROXYD0FC462A536A4DA88FD49545639B4698”，我猜这是某种类型的默认 ToString() 实现。如果我以区域格式包装@Model.PageTitle，即@Zone(Model.PageTitle)，则不会再出现任何内容。我尝试过的其他属性是：@Model.Title 和@Model.TitlePart.Title。

我也尝试过使用placement.info 文件，但它似乎希望PageTitle 区域中的内容显示与我需要的内容不符的任何内容。我通过输入以下内容确认了这一点：

```
<Place Parts_Title="Content:after" /> 
```

该行（使用之前或之后）使标题显示出来，只是不在正确的位置。当我使用下面的内容时，什么都没有显示（使用之前、之后、无值、1 等）：

```
<Place Parts_Title="PageTitle:before" /> 
```

所以，总而言之，我如何让内容的标题显示在不会显示其他用户启动内容的特定区域？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:06:06.140

我相信您正在寻找的是将标题放置到顶级布局区域中。其语法是（假设您的布局中有一个 PageTitle 区域，但这可以是您的布局视图中的任何区域）。我认为这是 Orchard 1.5 中添加的一个功能：

```
<Place Parts_Title="/PageTitle:1"/> 
```

请注意区域名称前的正斜杠。否则，放置默认设置是在本地内容区域内排列部件。

# mysql - 最后一行的mySQL（存储过程）游标无限循环

> ID：14269239
> 
> 赞同：0
> 
> 时间：2013-01-10T23:35:26.733
> 
> 标签：mysql, sql, stored-procedures

我有以下代码： 问题是在最后一行的 creative_y 循环没有结束并无限插入相同的值（增加 guid）。我尝试了几种更改继续处理程序的方法，但似乎并非如此。

```
DELIMITER $$
DROP PROCEDURE IF EXISTS creature_copy
$$
CREATE PROCEDURE creature_copy ()
BEGIN

    DECLARE done INT DEFAULT 0;
    DECLARE new_guid INT(10);

    -- Creature definition
    DECLARE y_guid INT(10);
    DECLARE y_id mediumint(8);
    DECLARE y_map int(5);
    DECLARE y_modelid mediumint(8);
    DECLARE y_position_x float(10);
    DECLARE y_position_y float(10);
    DECLARE y_position_z float(10);
    DECLARE y_orientation float(10);
    DECLARE y_spawntimesecs INT(10);
    DECLARE y_curhealth INT(10);
    DECLARE y_curmana INT(10);
    DECLARE y_MovementType tinyint(3);

    -- waypoints definition
    DECLARE w_id INT(10);
    DECLARE w_point mediumint(8);
    DECLARE w_position_x float(10);
    DECLARE w_position_y float(10);
    DECLARE w_position_z float(10);
    DECLARE w_orientation float(10);

    -- Generate creatures map
    DECLARE creature_sel CURSOR FOR
      SELECT guid,id, map, modelid, position_x, position_y, position_z, orientation, spawntimesecs, curhealth, curmana, MovementType
        FROM creature_y;

    -- Generate waypoints map
    DECLARE waypoint_sel CURSOR FOR
                SELECT id, point, position_x, position_y, position_z, orientation
                    FROM creature_movement 
                        WHERE creature_movement.id = y_guid;

DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

OPEN creature_sel;
-- Cleanup tables before re-running
TRUNCATE creature_t;
TRUNCATE waypoint_data;

-- Set starting guid before loop
SET new_guid = 504115;

creature_loop:LOOP

        if done = 1 THEN 
            -- set done = 0;
            CLOSE creature_sel;
            LEAVE creature_loop;
        end if;

        SET new_guid = new_guid + 1;

    FETCH creature_sel INTO y_guid, y_id, y_map, y_modelid, y_position_x, y_position_y, y_position_z, y_orientation, y_spawntimesecs, y_curhealth, y_curmana, y_MovementType;
    INSERT INTO creature_t(guid, id, map, modelid, position_x, position_y, position_z, orientation, spawntimesecs, curhealth, curmana, MovementType) VALUES(new_guid, y_id, y_map, y_modelid, y_position_x, y_position_y, y_position_z, y_orientation, y_spawntimesecs, y_curhealth, y_curmana, y_MovementType);

        OPEN waypoint_sel;
        waypoint_loop:LOOP
                FETCH waypoint_sel INTO w_id, w_point, w_position_x, w_position_y, w_position_z, w_orientation;

                IF done = 1 THEN 
                     SET done = 0;
                    LEAVE waypoint_loop ;
                END IF;

                INSERT INTO waypoint_data(id, point, position_x, position_y, position_z, orientation) VALUES (new_guid, w_point, w_position_x, w_position_y, w_position_z, w_orientation);
        END LOOP waypoint_loop;
        CLOSE waypoint_sel;

END LOOP creature_loop;
CLOSE creature_sel;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:38:20.160

我找到了解决方案。要使用 2 个不同的 continue 处理程序（查看光标是否在末尾），您需要将代码拆分为块

```
BLOCK1: BEGIN

    DECLARE done INT DEFAULT 0;
    -- First cursor
    DECLARE sel CURSOR FOR
      SELECT column
        FROM table;

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    OPEN sel;

    sel_loop:LOOP
        if done = 1 THEN 
            set done = 0;
            CLOSE sel;
            LEAVE sel_loop;
        end if;

        FETCH sel INTO variable1;
        -- Do something in loop
        -- Start second code-block      
        BLOCK2: BEGIN
        DECLARE done2 INT DEFAULT 0;

        -- define second cursor
        DECLARE sel2 CURSOR FOR
            SELECT column
            FROM table
                WHERE column = condition;
            -- define second handler
        DECLARE CONTINUE HANDLER FOR NOT FOUND SET done2 = 1;
            -- now you can make second cursor loop and it will finish properly.
        OPEN sel2;
        sel2_loop:LOOP
                FETCH sel2 INTO variable2;

                IF done2 = 1 THEN 
                     SET done2 = 0;
                    LEAVE sel2_loop ;
                END IF;

        -- do something in second loop
        END LOOP waypoint_loop;
        CLOSE waypoint_sel;

-- End your code blocks and close first loop / cursor
END BLOCK2;

END LOOP sel_loop;
CLOSE sel;
END BLOCK1 
```

# html - 捕捉视频 HTML5 播放/停止事件

> ID：14269241
> 
> 赞同：6
> 
> 时间：2013-01-10T23:35:40.753
> 
> 标签：html, jquery, html5-video, dom-events, addeventlistener

如何收听 HTML5 视频的播放/停止/暂停事件？我尝试使用以下代码：

```
$("video").on('play',function(){
    //my code here
}); 
```

但它不起作用。

或者，我也可以拦截停止和启动视频的点击（实际上我更喜欢），但即使这段代码也不起作用：

```
$('video').on('click', function(event) {
    //my code here
}); 
```

我认为是因为视频元素上方经常放置一个带有相关事件启动和停止的 div，但我不知道如何通过 jQuery 或 Javascript 进行选择：

PS 此代码应该适用于动态组成/不是由我生成的页面，因此我无法引用指示其 ID 或特定类的元素。

**更新**

我没有意识到我正在测试的页面在 iframe 中有一个视频。语法最适合我的需要：

```
doc.querySelector("video").addEventListener('play', function(e) {
    //my code here
}, true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T23:40:10.710

看这里：

[https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events)

所以... ：

```
$("video")[0].onplay = function () {
    // Do play stuff here
}; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T01:20:40.880

您的第一次尝试应该有效。但是你需要确保 jQuery 确实在寻找视频元素。您说页面是动态生成的，因此您的代码可能在添加视频元素*之前正在运行。*如果您的脚本在文档中高于视频元素（例如，在 中`<head>`），也会出现这种情况。

尝试将以下代码放在您拥有的代码之前并检查输出：

```
console.log($("video")); 
```

如果输出是一个空数组，那么您找不到任何视频元素。尝试将您的脚本放在页面的最后或`DOMContentLoaded`事件内部。或者，如果另一个脚本正在生成视频元素，请确保您的脚本在该脚本之后运行。

关于您的问题的其他一些说明：

没有`stop`事件。这是[媒体事件列表](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#event-definitions)。

我不认为这个`click`事件是你想要的。无论用户点击视频的哪个位置，它都会触发：播放按钮、音量控制等。

放置在 a 中的视频不`div`应该对这些事件产生任何影响。我不确定你为什么会在 a 上有`start`和`end`事件`div`，所以也许我没有关注。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T23:44:00.057

试试这个！

```
//Direct
<video id="videoThis" src="blahhh.mp4" onended="yourFunction()"></videoThis>

 -or-

//JavaScript (HTML5)
document.querySelector("#videoThis").addEventListener("ended",yourFunction,false);

 -or-

//jQuery
$("#videoThis").bind("ended",yourFunction); 
```

# amazon-s3 - 如何使用 IAM 角色生成经过身份验证的 S3 url？

> ID：14269246
> 
> 赞同：3
> 
> 时间：2013-01-10T23:36:08.613
> 
> 标签：amazon-s3, amazon-iam

当我拥有硬编码的访问密钥和密钥时，我能够生成经过身份验证的 url，供用户查看 S3 上的私有文件。这是通过以下代码完成的：

```
import hmac
import sha
import urllib
import time

filename = "".join([s3_url_prefix, filename])
expiry = str(int(time.time()) + 3600)
h = hmac.new(
    current_app.config.get("S3_SECRET_KEY", None),
    "".join(["GET\n\n\n", expiry, "\n", filename]),
    sha
)
signature = urllib.quote_plus(base64.encodestring(h.digest()).strip())
return "".join([
    "https://s3.amazonaws.com",
    filename,
    "?AWSAccessKeyId=",
    current_app.config.get("S3_ACCESS_KEY", None),
    "&Expires=",
    expiry,
    "&Signature=",
    signature
]) 
```

这给了我一些[https://s3.amazonaws.com/bucket_name/path_to_file?AWSAccessKeyId=xxxxx&Expires=5555555555&Signature=eBFeN32eBb2MwxKk4nhGR1UPhk%3D](https://s3.amazonaws.com/bucket_name/path_to_file?AWSAccessKeyId=xxxxx&Expires=5555555555&Signature=eBFeN32eBb2MwxKk4nhGR1UPhk%3D)的效果。不幸的是，出于安全原因，我无法将密钥存储在配置文件中。出于这个原因，我切换到 IAM 角色。现在，我使用以下方法获取密钥：

```
_iam = boto.connect_iam()

S3_ACCESS_KEY = _iam.access_key
S3_SECRET_KEY = _iam.secret_key 
```

但是，这给了我错误“您提供的 AWS 访问密钥 ID 在我们的记录中不存在。”。根据我的研究，我了解到这是因为我的 IAM 密钥不是实际密钥，而是与令牌一起使用。因此，我的问题是双重的：

1.  如何以编程方式获取令牌？似乎没有我可以使用的简单 iam 属性。

2.  如何在签名中发送令牌？我相信我的签名最终应该看起来像 "".join(["GET\n\n\n", expiry, "\n", token, filename])，但我不知道要使用什么格式.

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:56:37.443

[https://github.com/boto/boto/commit/99e14f3df039997f54a5377cb6aecc83f22c2670（2012](https://github.com/boto/boto/commit/99e14f3df039997f54a5377cb6aecc83f22c2670)`generate_url`年 6 月）中的方法发生了变化，这使得使用会话凭据签署 URL 成为可能。这意味着您需要使用 boto 2.6.0 或更高版本。如果你是，你应该能够做到这一点：

```
import boto
s3 = boto.connect_s3()
url = s3.generate_url(expires_in=3600, method='GET', bucket='<bucket_name>', key='<key_name>') 
```

你用的是什么版本？

# c++ - 容器的访问比较器 (C++/STL)

> ID：14269250
> 
> 赞同：2
> 
> 时间：2013-01-10T23:36:22.520
> 
> 标签：c++, stl, priority-queue

我有一个最小优先级队列向量，每个队列都使用自定义比较器类的不同实例创建。队列应该是有大小限制的，如果队列满了，只能插入优先级高于队列顶部的元素，并踢出顶部的元素。因此，在插入完整队列之前，我想使用队列自己的比较器将新元素与队列顶部进行比较，以避免插入/删除成本。是否可以在不重新创建比较器的情况下做到这一点？

编辑：@Kerrek 的 hack 真的很酷，但比较器必须由带有参数的构造函数创建，我应该提到这一点。所以我选择了@Spundun 的答案，我还使用了对底层容器的访问来加快打印速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T23:46:49.300

看起来比较器对象没有被 暴露`std::priority_queue`，甚至它的类型也没有。作为一个肮脏的黑客，并假设比较器是无状态且默认可构造的，您可以尝试这样的事情：

```
template <typename> struct kidnap_comparator;

template <typename T, typename Cnt, typename Cmp>
struct kidnap_comparator<std::priority_queue<T, Cnt, Cmp>>
{
    typedef Cmp type;
};

// ...

template <typename PQ>
void insert_maybe(PQ & pq, typename PQ::const_reference x)
{
    typename kidnap_comparator<PQ>::type cmp;

    // use "cmp" to compare pq.top() and x
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:48:44.793

比较器是一个受保护的成员（名为 comp，+1 Nate）。因此，如果您从 stl 类派生自己的优先级队列类，并实现您描述为函数的功能（例如 insert_only_if_important() ），那么您可以从该函数中访问比较器。

# visual-studio-2010 - 执行 powershell.exe 挂起 msbuild

> ID：14269254
> 
> 赞同：19
> 
> 时间：2013-01-10T23:36:26.070
> 
> 标签：visual-studio-2010, powershell, msbuild, freeze

我目前正在考虑用更优雅的东西 - Octopus 重新构建我们被黑客攻击的部署系统。在这样做时，我试图让 VS 在运行发布版本时打包一个项目。好吧，我已经编写并运行了这个精美的 powershell 脚本，但是当我尝试从 msbuild 脚本执行时，Visual Studio 就挂了！

起初我怀疑东西在 shell 中的逃逸方式，但我荒谬地简化了它，它仍然冻结。

这是相关的 MsBuild 代码：

```
 <PropertyGroup>
      <PowerShellExe Condition=" '$(PowerShellExe)'=='' ">
        %WINDIR%\System32\WindowsPowerShell\v1.0\powershell.exe
      </PowerShellExe>
    </PropertyGroup>

    <Target Name="AfterBuild" Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
      <Exec Command="$(PowerShellExe) -NonInteractive -executionpolicy Unrestricted -command get-childitem" />
    </Target> 
```

它应该做的就是提供一个目录列表。从 cmd.exe 调用它可以正常工作：

```
C:\Users\smithj>%WINDIR%\System32\WindowsPowerShell\v1.0\powershell.exe -noninteractive -executionpolicy unrestricted -command dir 
```

试试这个：

```
msbuild Solution.sln /p:Configuration=Release 
```

得到我这个：

```
AfterBuild:
  "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\\tf.exe" che
  ckout Package.nuspec
  Package.nuspec

        %WINDIR%\System32\WindowsPowerShell\v1.0\powershell.exe
       -NonInteractive -executionpolicy Unrestricted -command dir

  Windows PowerShell
  Copyright (C) 2009 Microsoft Corporation. All rights reserved. 
```

在那之后，它就永远挂起。欢迎任何建议。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-11T11:58:30.303

不确定你会喜欢这个答案。玩了一会儿，似乎是关于属性组的扩张。您在 PowerShellExe 的值中添加了一个新行。这工作正常：

```
<PropertyGroup>
    <PowerShellExe Condition=" '$(PowerShellExe)'=='' ">$(WINDIR)\System32\WindowsPowerShell\v1.0\powershell.exe</PowerShellExe>
  </PropertyGroup>

  <Target Name="AfterBuild">
    <Exec Command="$(PowerShellExe) -NonInteractive -executionpolicy bypass -command &quot;&amp;{get-childitem}&quot;" />
  </Target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:01:37.287

尝试：

```
<Exec Command='$(PowerShellExe) -NonInteractive -executionpolicy Unrestricted -command "& {Get-ChildItem}"' /> 
```

# c++ - 如何在 msvc 中强制返回值优化

> ID：14269258
> 
> 赞同：1
> 
> 时间：2013-01-10T23:37:03.033
> 
> 标签：c++, visual-c++, pragma, rvo, nrvo

我在一个类中有一个函数，我希望编译器在......一直使用 NRVO......即使在调试模式下也是如此。对此有语用吗？

这是我的课程在“发布”模式下效果很好：

```
template <int _cbStack> class CBuffer {
public:
    CBuffer(int cb) : m_p(0) { 
        m_p = (cb > _cbStack) ? (char*)malloc(cb) : m_pBuf;
    }
    template <typename T> operator T () const { 
        return static_cast<T>(m_p); 
    }
    ~CBuffer() { 
        if (m_p && m_p != m_pBuf) 
            free(m_p); 
    }
private: 
    char *m_p, m_pBuf[_cbStack];
}; 
```

除非需要超过 _cbStack 字节，否则该类用于在堆栈上创建缓冲区。然后当它销毁时，如果它分配了任何内存，它就会释放内存。当与需要字符串缓冲区的 c 函数交互时，它很方便，并且您不确定最大大小。

无论如何，我试图编写一个可以返回 CBuffer 的函数，就像在这个测试中一样：

```
#include "stdafx.h"
#include <malloc.h>
#include <string.h>

template <int _cbStack> CBuffer<_cbStack> foo() 
{ 
    // return a Buf populated with something...
    unsigned long cch = 500;
    CBuffer<_cbStack> Buf(cch + 1);
    memset(Buf, 'a', cch);  
    ((char*)Buf)[cch] = 0;
    return Buf;
}

int _tmain(int argc, _TCHAR* argv[])
{
    auto Buf = foo<256>();
    return 0;
} 
```

我指望 NRVO 让 foo() 快速。在发布模式下，它工作得很好。在调试模式下，它显然会失败，因为我的类中没有复制构造函数。我不想要复制构造函数，因为喜欢复制所有内容 50 次的开发人员将使用 CBuffer。（咆哮：这些家伙正在使用动态数组类创建一个包含 20 个字符的缓冲区以传递给 WideCharToMultiByte()，因为他们似乎忘记了您可以只在堆栈上分配一个字符数组。我不知道是否他们甚至知道堆栈是什么......）

我真的不想编写复制构造函数，以便代码在调试模式下工作！它变得庞大而复杂：

```
template <int _cbStack> 
class CBuffer {
public:
    CBuffer(int cb) : m_p(0) { Allocate(cb); }
    CBuffer(CBuffer<_cbStack> &r) { 
        int cb = (r.m_p == r.m_pBuf) ? _cbStack : ((int*)r.m_p)[-1];
        Allocate(cb);
        memcpy(m_p, r.m_p, cb);
    }
    CBuffer(CBuffer<_cbStack> &&r) { 
        if (r.m_p == r.m_pBuf) {
            m_p = m_pBuf;
            memcpy(m_p, r.m_p, _cbStack);
        } else {
            m_p = r.m_p;
            r.m_p = NULL;
        }
    }
    template <typename T> operator T () const {
        return static_cast<T>(m_p); 
    }
    ~CBuffer() {
        if (m_p && m_p != m_pBuf) 
            free((int*)m_p - 1); 
    }
protected: 
    void Allocate(int cb) {
        if (cb > _cbStack) {
            m_p = (char*)malloc(cb + sizeof(int));
            *(int*)m_p = cb;
            m_p += sizeof(int);
        } else {
            m_p = m_pBuf; 
        }
    }
    char *m_p, m_pBuf[_cbStack];
}; 
```

此编译指示不起作用：

```
 #pragma optimize("gf", on) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:38:21.500

使您的代码既符合标准又可以工作并不难。

首先，用可选的额外填充包裹 T 的数组。现在你知道布局了。

对于所有权，使用唯一的 ptr 而不是原始的。如果它是 vapid，则 operator T* 返回它，否则为缓冲区。现在，您的默认移动 ctor 可以正常工作，如果移动失败，NRVO 也可以正常工作。

如果你想支持非 POD 类型，一些工作将让你同时支持 ctors 和 dtors 并移动数组元素和逐位填充。

结果将是一个行为不会令人惊讶的类，并且在某人第一次尝试复制或移动它时不会产生错误 - 不是第一次，这很容易。编写的代码会在不同的时间以不同的方式爆炸！

遵守三法则。

这是一个明确的示例（现在我已经关闭了手机）：

```
template <size_t T, size_t bufSize=sizeof(T)>
struct CBuffer {
  typedef T value_type;
  CBuffer();

  explicit CBuffer(size_t count=1, size_t extra=0) {
    reset(count, extra);
  }
  void resize(size_t count, size_t extra=0) {
    size_t amount = sizeof(value_type)*count + extra;
    if (amount > bufSize) {
      m_heapBuffer.reset( new char[amount] );
    } else {
      m_heapBuffer.reset();
    }
  }
  explicit operator value_type const* () const { 
    return get();
  }
  explicit operator value_type* () { 
    return get();
  }
  T* get() {
    return reinterpret_cast<value_type*>(getPtr())
  }
  T const* get() const {
    return reinterpret_cast<value_type const*>(getPtr())
  }
private: 
  std::unique_ptr< char[] > m_heapBuffer;
  char m_Buffer[bufSize];
  char const* getPtr() const {
    if (m_heapBuffer)
      return m_heapBuffer.get();
    return &m_Buffer[0];
  }
  char* getPtr() {
    if (m_heapBuffer)
      return m_heapBuffer.get();
    return &m_Buffer[0];
  }
}; 
```

以上`CBuffer`支持移动构造和移动分配，但不支持复制构造或复制分配。这意味着您可以从函数返回这些的本地实例。RVO 可能会发生，但如果没有，上面的代码仍然是安全和合法的（假设`T`是 POD）。

在自己投入生产之前，我会`T`在上面添加一些 must be POD 断言，或者处理 non-POD `T`。

作为使用示例：

```
#include <iostream>
size_t fill_buff(size_t len, char* buff) {
  char const* src = "This is a string";
  size_t needed = strlen(src)+1;
  if (len < needed)
    return needed;
  strcpy( buff, src );
  return needed;
}
void test1() {
  size_t amt = fill_buff(0,0);
  CBuffer<char, 100> strBuf(amt);
  fill_buff( amt, strBuf.get() );
  std::cout << strBuf.get() << "\n";
} 
```

而且，对于（希望如此）NRVO 的案例：

```
template<size_t n>
CBuffer<char, n> test2() {
  CBuffer<char, n> strBuf;
  size_t amt = fill_buff(0,0);
  strBuf.resize(amt);
  fill_buff( amt, strBuf.get() );
  return strBuf;
} 
```

如果 NRVO 发生（应该如此），则不需要移动 - 如果 NRVO 没有发生，则发生的隐式移动在逻辑上等同于不移动。

关键是不依赖于 NRVO 具有明确定义的行为。但是，几乎可以肯定 NRVO 会发生，并且当它发生时，它会在逻辑上等同于执行 move-constructor 选项。

我不必编写这样的移动构造函数，因为`unique_ptr`它是可移动构造的，s 中的数组也是如此`struct`。另请注意，复制构造被阻止，因为`unique_ptr`无法复制构造：这符合您的需求。

在调试中，很可能你最终会做一个移动构造。但这应该没有什么坏处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:59:05.927

我认为没有公开可用的细粒度编译器选项只触发 NRVO。

但是，您仍然可以通过更改项目设置、命令行和`#pragma`.

[http://msdn.microsoft.com/en-us/library/chh3fb0k(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/chh3fb0k(v=vs.110).aspx)

尝试将 /O1 或 /O2 提供给您想要的文件。

而且，Visual C++ 中的调试模式只不过是一种没有优化和生成调试信息（PDB，程序数据库文件）的配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T00:09:45.820

如果您使用的是 Visual C++ 2010 或更高版本，则可以使用移动语义来获得等效的结果。请参阅[如何：编写移动构造函数](http://msdn.microsoft.com/en-us/library/dd293665.aspx)。

# powershell - 在powershell的列中处理带有换行符的CSV

> ID：14269267
> 
> 赞同：3
> 
> 时间：2013-01-10T23:38:00.680
> 
> 标签：powershell, csv

目前，我有一个系统可以创建一个分隔文件，如下所示，我在其中偶尔模拟了列中的额外换行符。

> > 第 1 列、第 2 列、第 3 列、第 4 列
> > 
> > 文本1,文本2[LF],文本3[LF],文本4[CR][LF]
> > 
> > 文本1,文本2[LF][LF],文本3,文本4[CR][LF]
> > 
> > 文本1,文本2,文本3[LF][LF],文本4[CR][LF]
> > 
> > 文本1,文本2,文本3[LF],文本4[LF][LF][CR][LF]

通过使用 Notepad++ 并使用以下 REGEX 忽略有效的回车/换行组合，我已经能够删除引起我关注的换行：

`(?<![\r])[\n]`

但是，我无法使用 powershell 找到解决方案，因为我认为当我为 csv 文件获取内容时，文本字段中的换行符将被忽略，并且该值作为单独的对象存储在分配给获取内容的变量中行动。我的问题是，如果 cmdlet 在加载数据时忽略换行符，如何使用 replace 将正则表达式应用于 csv 文件？

我还尝试了以下方法来加载我的 csv 的内容，这也不起作用，因为它只会产生一个长字符串，这类似于使用 -join(get-content)。

`[STRING]$test = [io.file]::ReadAllLines('C:\CONV\DataOutput.csv')
$test.replace("(?<![\r])[\n]","")
$test | out-file .\DataOutput_2.csv`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:03:23.353

# firefox - 为 Mozilla Firefox 构建 javascript profiler 的好方法

> ID：14269268
> 
> 赞同：1
> 
> 时间：2013-01-10T23:38:08.080
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在为 Mozilla Firefox 开发一个 javascript 分析器，它可以让我获得有关页面上脚本执行的所有可用信息（DOM 对象调用、事件、对 Math.random() 等函数的调用、文档和导航器对象调用，以及代码自己的带有参数的执行树等）。

目前，我认为实现这种分析器的最佳方法是修改 Firefoxe 自己的源代码。

一种解决方法是找到相应方法调用的所有实现并在那里添加分析器日志调用。但是这种方法有两个问题：

1.  方法和对象非常分散，目前我对源代码还不是很熟悉。跟踪所有功能并确保分析器按预期工作将花费大量时间

2.  当以这种方式创建时，当 Firefox 源代码随着时间的推移而发展时，探查器将难以维护。

所以我想知道，如果 Firefox 源代码中有一个类/一小组关键类，可以对其进行修改以允许我收集我想要的信息？还是有更好的方法来做我需要做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:05:26.803

Firefox 的最新 Aurora 版本在其开发人员工具中内置了一个基本分析器，或者您可以从 Mozilla 附加组件站点下载更高级的界面，该界面适用于 Firefox 16 或更高版本。

# polygon - WinRT XAML C#中的多边形区域

> ID：14269270
> 
> 赞同：2
> 
> 时间：2013-01-10T23:38:09.903
> 
> 标签：polygon, winrt-xaml, area

我需要确定在 XAML/C# 中的 Windows 应用商店应用程序 (WinRT) 的画布上绘制的多边形对象的区域。看起来他们从 WinRT 库中剥离了 Geometry.GetArea()，所以很遗憾我不能使用它。由于这个多边形是不规则形状的，有一个动态的点列表，我不能使用任何静态公式。我可以在 WinRT 中使用任何库或第 3 方扩展来完成此任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:31:59.390

我能够弄清楚这一点。此方法将采用 Polygon 对象并给出区域。

```
double GetPolygonArea(Polygon poly)
    {
        List<Point> points = new List<Point>();
        foreach (Point p in poly.Points)
        {
            points.Add(p);
        }
        points.Add(poly.Points[0]);
        double xTotal = 0;
        for (int x = 0; x < points.Count - 1; x++)
        {
            xTotal += ((points[x].X) * (points[x + 1].Y));
        }
        double yTotal = 0;
        for (int y = 0; y < points.Count - 1; y++)
        {
            yTotal += ((points[y].Y) * (points[y + 1].X));
        }
        return Math.Abs((xTotal - yTotal) / 2);
    } 
```

# ruby-on-rails - Dreamhost vps中的Rmagick和carrierwave安装

> ID：14269279
> 
> 赞同：0
> 
> 时间：2013-01-10T23:39:01.707
> 
> 标签：ruby-on-rails, ruby, gem, carrierwave, rmagick

我试图不在我的机器上安装carrierwave，而是在dreamhost上托管的vps上安装。

这里是 Gemfile

```
gem "rmagick"
gem 'carrierwave' 
```

这里是捆绑时的错误：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/wywvps/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for gcc... yes
checking for Magick-config... yes

Warning: Found more than one ImageMagick installation. This could cause problems at runtime.
         /usr/bin/Magick-config reports version 6.6.0 Q16 is installed in /usr
         /usr/bin/X11/Magick-config reports version 6.6.0 Q16 is installed in /usr
Using 6.6.0 Q16 from /usr.

checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... no

Can't install RMagick 2.13.1\. Can't find MagickWand.h.
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/home/wywvps/.rvm/rubies/ruby-1.9.3-p327/bin/ruby

Gem files will remain installed in /home/wywvps/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1 for inspection.
Results logged to /home/wywvps/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
An error occurred while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T14:31:51.850

尝试安装

```
sudo apt-get install libmagickwand-dev imagemagick 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:14:25.490

它说您在 wand 文件夹中没有“MagickWand.h”文件。请检查您的 ImageMagick 的安装文件夹中是否有此文件。

彼得

# html - 图像不进入分隔线？

> ID：14269283
> 
> 赞同：0
> 
> 时间：2013-01-10T23:39:22.553
> 
> 标签：html

我在一个网站上工作，我试图在我制作的导航分隔器中放置一个导航栏，但是当我将图像放入时，它不会进入分隔器，即使它位于标签之间。这是它的样子： ![在此处输入图像描述](../Images/6dac527976b26294c0b88fba1995cb1c.png)

这是我的代码：

CSS：

```
body{background-color:#030303}
#wrapper {width:800px;
margin:0 auto;
}
#header {background-color:yellow;
text-align:center; 
height:50px;
}
#footer{clear:both; 
background-color:yellow ;
text-allign:center;
}
#logo {float:left;
width: 139px;
background-color: black;
text-align: left;
height:70px;}

#navigation {width: 800px;
background-color:#EDEDED;
height:50px;
}
#sidebar {float:left;padding:20px; background-color:green;text-align:right;width:100px;height:460px;}
#content {float:right;width: 620px;
padding:20px; background-color:gray;
text-align:left; height:500px;
border-color:#0017FF;
} 
```

HTML：

```
<! DOCTYPE html>
<html>
<head> <title>Website</title>
<link href="css.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="wrapper">
<div  id="header">
This is my header.
</div>
<div id="logo">
<br/>
<img src="images/SubZer0-logo-and-name.png" width="140" height="50" align="left"></div>
<div  id="navigation">
<img src="images/subzero-banner-new.png" width="750" height="45" align="top">
</div>

<div  id="content">
This is my content box.
</div>
<div  id="sidebar">
This is my sidebar.
</div>
<div  id="footer">
This is my footer.
</div>

</body>
</html> 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:35:44.293

没关系，我修好了……结果图像对于容器来说太大了……我不明白为什么，因为容器是 800x50，图像是 750x45，但它现在可以工作，这很重要。

# html - 输入类型文本在 IE8 中不会消失

> ID：14269286
> 
> 赞同：0
> 
> 时间：2013-01-10T23:39:40.973
> 
> 标签：html, css, internet-explorer

我正在开发一个网站，在登录屏幕上，有 2 个`<input type=text>`字段用于输入电子邮件和密码，问题是，在 IE8 中，文本字段会出现 2 秒钟然后消失，我仍然可以输入空格，但是你只是看不到这些领域

在 Chrome, Firefox, IE9 中都可以正常工作，在 IE9 中使用兼容模式 IE8 可以正常工作，只有在安装了 IE8 的计算机上才会出现这种情况，您可以在链接上查看

[http://kastulo.herobo.com](http://kastulo.herobo.com)

```
<body>
<!--[if lte IE 7]><script src="js/ie6/warning.js"></script>      <script>window.onload=function(){e("js/ie6/")}</script><![endif]-->

<div id="login_form">

<?php
    //Forma de ENTRADA DE USUARIOS
    echo form_open('login/validate_form');?>
        <input type="email", name="email" id="email_entrada" value="<?php set_value('email');?>">
        <input type="password" name="password" id="pass_entrada">
        <input type="image" width="150" height="50" src="<?php echo base_url();?>css/images/boton_entrar.png" name="submit" id="btn_entrar" class="center">
        <?php
        echo validation_errors('<p class="error center" id="login_errors">');
    echo form_close(); //FIN de forma de ENTRADA DE USUARIOS

?>
</div>

</body> 
```

编辑：它实际上是 type="password" 和 type="email"

我的字段css是：

```
#email_entrada{
position: relative;
top:195px;
}

#pass_entrada{
position: relative;
top:246px;
}

#login_form input[type="password"], input[type="email"]{
font-family: Arial;
font-size: 16px;
display: block;
padding:5px;
margin: 0 auto;
width: 230px;
color: white;
box-shadow: 0 1px 1.5px -2.5px #FFFFFF;
-moz-box-shadow: 0 1px 1.5px -2.5px #FFFFFF;
-webkit-box-shadow: 0 1px 1.5px -2.5px #FFFFFF;
background-color: #3A3A3A;
border: 1px solid black;
border-radius: 5px;
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
behavior: url('ie-css3.htc');
} 
```

任何想法为什么会发生这种情况？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:00:10.510

您遇到的问题似乎表明`ie-css3.htc`您正在加载的行为（在 CSS 中）存在问题，这只影响 Internet Explorer 8 及更低版本。尝试阅读[IE-CSS3 的已知问题](http://fetchak.com/ie-css3/)。

如果您的网站可以在旧版本的 Internet Explorer 上使用较少的外观，还可以考虑完全删除 IE-CSS3。在我看来，如果您无法解决它们可能引起的怪癖，那么使用像这样的“黑客”是个坏主意。

# html - 将图像拖放到画布可放置区域

> ID：14269291
> 
> 赞同：3
> 
> 时间：2013-01-10T23:40:03.437
> 
> 标签：html, canvas, kineticjs

我想知道是否有人可以在概念上引导我完成这个？我想使用 kineticjs 将图像从桌面拖放到浏览器画布中。但是，我只想使部分画布“可放置”。

例如，如果我有一个宽度：600、高度：400 的画布，并且其中有一个 80x80 的正方形，我如何才能使 80x80 的正方形可放置？这样只有当我将图像拖到该正方形上时，我才能将图像从桌面拖放到其中？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T03:12:11.040

您真的应该首先尝试搜索有关如何将内容从桌面拖放到浏览器和画布中的教程。

[http://robertnyman.com/2011/03/10/using-html5-canvas-drag-and-drop-and-file-api-to-offer-the-cure/](http://robertnyman.com/2011/03/10/using-html5-canvas-drag-and-drop-and-file-api-to-offer-the-cure/)

本质上，结合 FileAPI 和 KineticJS 来实现你想要的效果。

# r - R中工作区中的对象

> ID：14269299
> 
> 赞同：1
> 
> 时间：2013-01-10T23:40:33.090
> 
> 标签：r, object, stata

我正在尝试将`stata`数据（`data.dta`）保存为`R`数据，然后使用该函数加载数据，然后使用和函数`paste`分配名称。`get``paste`

```
library(foreign)
getwd()
"C:/Users/Vista/Documents/project"
year<-2010
income2010x.dta<-read.dta("data.dta")
save(income2010x.dta,file="income2010x.rda")
load( paste0( "income" , year , "x.rda" ) )
z <- get( paste0( "income" , year , "x.dta" ) )  # works
z <- get( paste0( "income" , year , "x.rda" ) ) # doesn't work 
z
Error in get(income2010x.rda) : object 'income2010x.rda' not found
ls()
income2010x.dta
... 
```

我发现`income2010x.dta`在这些步骤之后存储为对象，但`income2010x.rda`不是。所以，`z <- get( paste0( "income" , year , "x.rda" ) )`没用。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:57:56.660

`income2010x.dta<-read.dta("data.dta")`

在工作区中创建一个 data.frame 调用 ed `income2010x.dta`。

`save`允许您保存许多对象，`load`当您保存它们时，它们的名称将与您保存它们时的名称相同。

您可以使用`saveRDS`来保存单个对象并将`readRDS`其读取为另一个名称

```
saveRDS(income2010x.dta,file="income2010x.rda")
income2010x.rda <- readRDS('income2010x.rda') 
```

话虽这么说，我不明白为什么需要两个副本，或者为什么要使用`get`创建相同对象的第三个副本`z`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:26:50.137

当你这样做时：

```
load( paste0( "income" , year , "x.rda" ) ) 
```

....您得到（在“获取”或“访问”或“恢复”的通俗意义上）一个对象（或多个对象）命名为它（它们）被保存时所具有的任何名称。在这种情况下，您将有一个名为“income2010x.dta”的对象，但没有名为“income2010x.rda”的对象，所以这个“get”在 R 函数的受限含义中：

```
z <- get( paste0( "income" , year , "x.rda" ) ) 
```

....正如您所观察到的......“不起作用”。

# jquery - 具有半静态背景的 jQuery HTML 内容滑块

> ID：14269303
> 
> 赞同：-4
> 
> 时间：2013-01-10T23:40:57.507
> 
> 标签：jquery, jquery-ui, jquery-plugins, slider, jquery-ui-slider

我正在寻找一个模仿此功能的 jQuery HTML 内容滑块插件： [http ://www.4templates.com/website-templates/277677692-WT00915/demo/#red](http://www.4templates.com/website-templates/277677692-WT00915/demo/#red)

我喜欢前景中的 div 是如何滑动的，也喜欢背景是如何沿着滑动内容的方向轻微移动的。我试图搜索这个插件，但找不到它！任何帮助将不胜感激，谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:46:01.583

这与其说是一个滑块插件，不如说是一个定制的网站模板，这正是它所宣传的“网站模板”。

我建议查看[本教程](http://www.queness.com/post/356/create-a-vertical-horizontal-and-diagonal-sliding-content-website-with-jquery)，该教程将您链接的基本版本放在一起。

[水平演示](http://www.queness.com/resources/html/scroll/horizontal.html)

# android - 跨活动传输数据

> ID：14269304
> 
> 赞同：-1
> 
> 时间：2013-01-10T23:41:02.730
> 
> 标签：android

我有一个 GCM 类，它从 Google GCM 服务器获取一条包含 2 个单独字符串的消息。我需要在我的应用程序的另一个活动中使用这两个字符串。问题是我事先不知道这些 gcm 消息会有多少。我需要存储这些值并在另一个 Activity 中使用它们，以便在布局中将它们呈现给用户。我发现这个困难的原因首先，我不知道这些消息会有多少，所以我无法提前绘制布局，其次是因为我还没有找到存储这两个字符串的有效方法在一起，以便我以后能够操纵它们。

这两个字符串的每一组都属于一个用户，并且应该以某种方式存储，以便它们可以与其他字符串组分开检索。

我试图通过使用 SharePrefrences 或意图来做到这一点，但我找不到合适的解决方案。

我知道我的问题可能看起来很愚蠢，我并不是在寻求解决方案，但我被困住了，如果有人能给我一些关于解决这个问题的建议或指导，或者在哪里看，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:49:27.940

您应该能够将它们存储在`ArrayList`or中`HashMap`并通过`Intent`. 您不需要知道有多少，只需使用循环将存在的数量添加到列表中。展示它们时，您可以使用 a`ListView`来展示它们，这样您就不必担心每次都知道有多少，但您可以得到计数，以便知道是否需要。除此之外，如果没有看到您尝试过的内容，很难说/不工作/或您已经知道的内容，所以我添加了一些可能有助于理解这些对象的链接

[数组列表](http://developer.android.com/reference/java/util/ArrayList.html)

[哈希映射](http://developer.android.com/reference/java/util/HashMap.html)

如果您关心数据的顺序，请考虑[LinkedHashMap 。](http://developer.android.com/reference/java/util/LinkedHashMap.html)

# php - foreach() 循环导致 php/mysqli 中的错误

> ID：14269313
> 
> 赞同：-1
> 
> 时间：2013-01-10T23:41:50.767
> 
> 标签：php

我似乎无法弄清楚，但我的 php/mysqli 中出现错误，说明：

> 警告：在第 28 行的 /.../ 中为 foreach() 提供的参数无效

我的问题是如何修复上述警告，以便我可以循环插入以便能够将所有插入提供到数据库中：

```
<?php

ini_set('display_errors',1); 
 error_reporting(E_ALL);

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

$studentid = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : ''; 
$sessionid = (isset($_POST['Idcurrent'])) ? $_POST['Idcurrent'] : '';   

$insertsql = "
INSERT INTO Student_Session
(SessionId, StudentId)
VALUES
(?, ?)
";
if (!$insert = $mysqli->prepare($insertsql)) {
// Handle errors with prepare operation here
}                                       

foreach($studentid as $id)
{    

$insert->bind_param("ii", $sessionid, $id);

$insert->execute();

if ($insert->errno) {
// Handle query error here
}

}

$insert->close();

$query = "SELECT ss.SessionId, SessionName, StudentId
FROM  
Student_Session ss
INNER JOIN Session s ON
ss.SessionId = s.SessionId
WHERE ss.SessionId = ? AND StudentId = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("ii", $sessionid, $studentid);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbSessionId, $dbSessionName, $dbStudentId);
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows();
//fetch the results
$stmt->fetch();

if ($numrows == 1){

echo json_encode(array('errorflag'=>false,'msg'=>"Students have been successfully added into the Assessment"));

}else{

echo json_encode(array('errorflag'=>true,'msg'=>"An error has occured, Students have not been added into the Assessment"));

}

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:48:07.087

您的条件 where `$studentid`is set 可以将值设置为空字符串。在这种情况下，您可能应该有一些条件，甚至不尝试准备 as 语句并插入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:49:25.370

当您在以下位置设置学生 ID 的值时：

```
$studentid = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : ''; 
```

那不是一个数组，只是分配一个值。

您可以做的是将它设置在一个数组中，然后在初始化后将值输入该数组。前任：

```
$studentid = array();
$studentid[] = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : ''; 
```

# c# - 在一个类成员中表示多个值

> ID：14269323
> 
> 赞同：1
> 
> 时间：2013-01-10T23:42:55.897
> 
> 标签：c#, .net, oop, design-patterns

我一直在研究一些电网模拟软件（[ElecNetKit](https://github.com/capnfabs/ElecNetKit)）。在电网中，有时使用单相模型很方便，有时使用三相模型。

因此，我希望能够将其中一个电气网络元素表示为：

```
class Bus
{
    public Complex Voltage {set; get;} //single phase property
} 
```

但同时以一种方式，以便用户可以调用`Bus.Voltage.Phases[x]`，并期望 a`Complex`为任何有效的整数`x`。

该`Bus.Voltage`属性应`Bus.Voltage.Phases[1]`在被视为 时映射到`Complex`。

我这里有两个问题：

1.  **这是否违反任何 OOP 原则？**我有一种感觉，可能是。
2.  **有没有一种方便的方法可以在 C# 中表示它？**

在表示方面，我尝试过：

*   一个 class `Phased<T> : T`，但这与打字系统不兼容，并且
*   一个`Phased<T>`具有通用转换器类型的类`T`，但仍需要调用转换器。

我知道我可以简单地使用类似的东西：

```
public Dictionary<int,Complex> VoltagePhases {private set; get;}
public Complex Voltage {
    set {VoltagePhases[1] = value;} 
    get {return VoltagePhases[1];}
} 
```

但是，一旦您开始对多个属性、跨多个类执行此操作，就会有很多重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:03:25.653

你能做这样的事情吗？这将类似于您在底部的解决方案，但由于通用类，您不会为每个属性重复代码。

```
class Program
{
    static void Main(string[] args)
    {
        Collection<Complex> complex = new Collection<Complex>();
        //TODO: Populate the collection with data

        Complex first = complex.First;
        Complex another = complex.Items[2];
    }
}

public class Complex
{
    // implementation
}

public class Collection<T> where T : class
{
    public List<T> Items { get; set; }

    public T First
    {
        get
        {
            return (Items.Count > 0) ? Items[1] : null;
        }
        set
        {
            if(Items.Count > 0) 
                Items[1] = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:14:23.773

我会提出这样的建议：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Diagnostics;
using System.Numerics;

namespace Test
{
    class PhaseList
    {
        private Dictionary<int, Complex> mPhases = new Dictionary<int, Complex>();

        public Complex this[int pIndex]
        {
            get
            {
                Complex lRet;
                mPhases.TryGetValue(pIndex, out lRet);
                return lRet;
            }
            set
            {
                mPhases.Remove(pIndex);
                mPhases.Add(pIndex, value);
            }
        }
    }

    class PhasedType
    {
        private PhaseList mPhases = new PhaseList();
        public PhaseList Phases { get { return mPhases; } }
        public static implicit operator Complex(PhasedType pSelf)
        {
            return pSelf.Phases[1];
        }

        public static implicit operator PhasedType(Complex pValue)
        {
            PhasedType lRet = new PhasedType();
            lRet.Phases[1] = pValue;
            return lRet;
        }
    }

    class Bus
    {
        public PhasedType Voltage { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Bus lBus = new Bus();

            lBus.Voltage = new Complex(1.0, 1.0);
            Complex c = lBus.Voltage;
            lBus.Voltage.Phases[1] = c;
            c = lBus.Voltage.Phases[1];
        }
    }
} 
```

# json - 是否可以从 Foursquare 实时 API 获得多个用户签到

> ID：14269324
> 
> 赞同：0
> 
> 时间：2013-01-10T23:42:56.263
> 
> 标签：json, api, foursquare, checkin

我的总体目标是在我正在构建的私人网络应用程序上显示一组朋友的签到（最近一次）。

这可能吗？如果是这样，有人可以引导我朝着正确的方向前进。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:57:27.693

**只要他们 oAuth 你的应用程序**，你应该能够做到这一点。除非他们出于明显的安全原因明确允许您这样做，否则您不能这样做。如果你想解决这个问题，你可以网络抓取，但这完全是另一个问题。

看看他们的实时 API：[https ://developer.foursquare.com/overview/realtime](https://developer.foursquare.com/overview/realtime)

创建一个应用程序，然后使用他们的用户推送 API - 每次他们中的一个签入时，它应该将这样的内容推送到您的服务器：

```
 {
          "id": "4e6fe1404b90c00032eeac34",
          "createdAt": 1315955008,
          "type": "checkin",
          "timeZone": "America/New_York",
          "user": {
              "id": "1",
              "firstName": "Jimmy",
              "lastName": "Foursquare",
              "photo": "https://foursquare.com/img/blank_boy.png",
              "gender": "male",
              "homeCity": "New York, NY",
              "relationship": "self"
          },
          "venue": {
              "id": "4ab7e57cf964a5205f7b20e3",
              "name": "foursquare HQ",
              "contact": {
                  "twitter": "foursquare"
              },
              "location": {
                  "address": "East Village",
                  "lat": 40.72809214560253,
                  "lng": -73.99112284183502,
                  "city": "New York",
                  "state": "NY",
                  "postalCode": "10003",
                  "country": "USA"
              },
              "categories": [
                  {
                      "id": "4bf58dd8d48988d125941735",
                      "name": "Tech Startup",
                      "pluralName": "Tech Startups",
                      "shortName": "Tech Startup",
                      "icon": "https://foursquare.com/img/categories/building/default.png",
                      "parents": [
                          "Professional & Other Places",
                          "Offices"
                      ],
                      "primary": true
                  }
              ],
              "verified": true,
              "stats": {
                  "checkinsCount": 7313,
                  "usersCount": 565,
                  "tipCount": 128
              },
              "url": "http://foursquare.com"
          }
      } 
```

祝你好运！

# java - 迭代访问所有二叉树节点？

> ID：14269327
> 
> 赞同：0
> 
> 时间：2013-01-10T23:43:30.253
> 
> 标签：java, data-structures, binary-tree

我有一个二叉树，每个节点上都有一个单词。

在另一个类中，我需要一个一个地访问节点，然后操作单词。从另一个类逐个访问节点的最佳方法是什么？

在我的 BinaryTree 类中，每个节点都有一个左子、右子和一个值（字符串）。我有三种方法，printinorder、insert 和 findnode。查找节点接受一个字符串并查看该字符串是否存储在任何节点值中。

```
public void printInOrder(Node node) {
    if (node != null) {
        printInOrder(node.left);
        System.out.println(node.value);
        printInOrder(node.right);
    } 
```

我有另一个班级，需要一个接一个地到达节点，但我不确定从另一个班级做这件事的最佳方法是什么。我能够从类内遍历树，但不能从不同的类遍历树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:31:43.413

遍历二叉树中所有节点的一种方法是执行以下操作，它从最左边的节点开始并反复迁移到当前节点的中**[序后继](http://facultyfp.salisbury.edu/despickler/personal/Resources/AdvancedDataStructures/Handouts/succ_pred_rules.pdf)**节点：

1.  首先尽可能向左走，不要从树上掉下来。这是您的第一个节点。

2.  要从一个节点到应访问的下一个节点，请执行以下操作：

    1.  如果节点有右孩子，则下降到右孩子，然后尽可能继续下降到左孩子。您在下一个要访问的节点结束。
    2.  否则，重复地从节点向上走到它的父节点，直到你从左孩子沿着一条边走到它的父节点。最终到达的地方是新节点。

这最终在所有节点上只花费 O(n) 时间，因此这是一种在节点之间迁移的非常快速的方法。

为了使其工作，您需要让每个节点存储一个父指针，或者必须维护从起始节点向下到当前节点的节点路径堆栈。然而，对于合理平衡的树，这比在树中填充整个节点列表并返回它更节省空间。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:51:10.920

假设您有一个树类，首先编写一个首先遍历树的方法（广度/深度搜索）。在遍历中的每个节点上，假设您的节点是某种类型的对象，其中一个变量中包含一个单词，请访问该节点并更改存储的单词。基本上在您的二叉树类中编写函数让您执行此操作，并在您的其他类中调用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:20:09.457

对于搜索：

您可以将树排序为二叉搜索树。或者在构建树时，构建二叉搜索树。这将是最好的搜索方式。`O(logn)`.

搜索应该在您的`findNode(String value)`方法中实现

或者您在执行搜索时遇到问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T00:30:35.310

阅读 templatetypedef 的答案，这是一种更有效的方法。我介绍的方法的优点是它不需要对现有的 Node 类进行任何更改，并且使用您已经用于 PrintInOrder 的相同模式。它仅依赖于 Node 类的公共属性，因此应该可以从单独的类中使用。

```
public List<Node> nodes GetAllNodes(Node root) {
    List<Node> nodes = new ArrayList<Node>();
    if (root != null) {
        nodes.addAll(GetAllNodes(root.left));
        nodes.add(root);
        nodes.addAll(GetAllNodes(root.right));
    }
    return nodes;
} 
```

我没有编译或测试这个，所以可能有错误。

# android - AsyncTask 与 ProgressDialog，对话框闪烁

> ID：14269330
> 
> 赞同：0
> 
> 时间：2013-01-10T23:43:49.277
> 
> 标签：android, android-asynctask, android-progressbar

我有一个名为 QueueTask 的 AsyncTask，我的一个活动调用它。它应该在显示进度对话框时执行一些操作。在 AsyncTask 完成后，一个意图被创建并且一个新的布局和活动成为焦点。

问题是对话框快速闪烁，然后调用了意图。在执行操作时，对话框应该保持不变，但它不会。为什么不粘？

注意：doInBackground 应该需要大约 300 秒来执行。

来自活动的调用：

```
QueueTask task = new QueueTask(date, roomNum, time, fieldInputUser, fieldInputCardNum);
task.execute();
Intent intent = new Intent(this, DatePickerActivity.class);
this.startActivity(intent); 
```

Activity 类中定义的 AsyncTask：

```
public class QueueTask extends AsyncTask<Void, Void, Void> {

    private ProgressDialog progressDialog;
    private Library lib;
    private String date;
    private int room;
    private int time;
    private String user;
    private String id;

    public QueueTask(String date, int room, int time, String user, String id) {
        this.date = date;
        this.room = room;
        this.time = time;
        this.user = user;
        this.id = id;
    }

    @Override
    protected void onPreExecute() {
        lib = new Library();
        progressDialog = ProgressDialog.show(ManageRoomActivity.this, "Queuing", "Queuing process");
    }

    @Override
    protected Void doInBackground(Void... params) {
        int timer = 300;
        while(timer > 0) {
            if(lib.roomAvailable(date, room, time)) {
                lib.bookRoom(user, date, room, id, time);
                return null;
            }
            android.os.SystemClock.sleep(1000);
            timer --;
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
    }

} 
```

}

通过放置固定：

```
Intent intent = new Intent(ManageRoomActivity.this, DatePickerActivity.class);
        ManageRoomActivity.this.startActivity(intent); 
```

进入 onPostExecute()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:55:10.083

`startActivity()`在你的方法内部调用`onPostExecute()`。

# opengl - 使用 OpenGL 将立方体置换到原点

> ID：14269332
> 
> 赞同：0
> 
> 时间：2013-01-10T23:43:58.247
> 
> 标签：opengl, graphics, points, glm-math

我在 64x64x64 立方体内绘制了一堆点，但不知道如何移动原点，以便围绕立方体的中心进行旋转。我的顶点数据存储在一维数组中，从 {(0,0,0), (0,0,1), ..., (63, 63, 63)} 开始。

这是我当前设置每帧矩阵的代码：

```
// Set ProjectionMatrix
projectionMatrix = glm::perspective(90.0f, (GLfloat)width / (GLfloat) height,0.1f, 1000.f);
glUniformMatrix4fv(location_projectionMatrix, 1, GL_FALSE, glm::value_ptr(projectionMatrix));

// Set ModelViewMatrix
glm::mat4 identity = glm::mat4(1.0);
glm::mat4 viewTranslate = glm::translate(identity, glm::vec3(0.0f, 0.0f, -translate_z));
glm::mat4 viewRotateX   = glm::rotate(viewTranslate, rotate_x, glm::vec3(1.0f, 0.0f, 0.0f));
glm::mat4 viewRotateY   = glm::rotate(viewRotateX, rotate_y, glm::vec3(0.0f, 1.0f, 0.0f));
modelViewMatrix = viewRotateY;
glUniformMatrix4fv(location_modelViewMatrix, 1, GL_FALSE, glm::value_ptr(modelViewMatrix)); 
```

我试图将立方体平移 -32 到 x 和 y 方向，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:15:02.747

矩阵运算是不可交换的。这意味着先平移后旋转与先旋转后平移不同。通常顺序是：缩放->旋转->平移。所以试试这个：

```
glm::mat4 viewRotateX   = glm::rotate(identity, rotate_x, glm::vec3(1.0f, 0.0f, 0.0f));
glm::mat4 viewRotateY   = glm::rotate(viewRotateX, rotate_y, glm::vec3(0.0f, 1.0f, 0.0f));
glm::mat4 viewTranslate = glm::translate(viewRotateY   , glm::vec3(0.0f, 0.0f, -translate_z)); 
```

# iphone - 从另一个应用程序管理一个 iphone 应用程序

> ID：14269335
> 
> 赞同：0
> 
> 时间：2013-01-10T23:44:00.620
> 
> 标签：iphone, ios, xcode, ios-simulator, xcode4.5

我们有一个架构，其中有一个库，用于自动化应用程序 A，它与应用程序紧密耦合。（在 A 中直接链接）。我们必须围绕库编写一个包装器，以便在 A 中进行自定义。

现在我们要将库与应用程序 A 的代码和端口包装器从 A 中分离出来。

为此，我们考虑创建一个工作区并在那里管理多个项目。

现在，我被卡住的部分是，我必须编写一个链接这个库和应用程序 A 的应用程序 B。我们为 A 编写的所有包装器代码都应该驻留在这个应用程序 B 中。任何代码都不应该驻留在 A 的存储库中. B 可以是任何东西，它有助于自动化 A 而不会影响 A 的存储库。A将没有图书馆/ B的参考。

我们有什么办法可以做到吗？

我们可以通过将 B 作为 A 的插件来做到这一点吗？如果是这样，有没有办法支持这一点？我对此很陌生，因此非常感谢任何形式的指导。

PS：我不想从其他人那里启动应用程序。相反，我想要一个正在运行的应用程序，以及一种通过外部源而不是应用程序本身来操作它的方法。

如果缺少任何信息，请告诉我。

谢谢， RKS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:44:36.600

您可以在应用程序 A 中注册自定义 URL 方案。
在应用程序 B 中只需调用 [[UIApplication sharedApplication] openUrl:myURL]。
最后通过 application:handleOpenURL 调用应用程序 A：

也可以看看：

*   [与其他应用程序通信](http://handleopenurl.com/)
*   [URL 方案索引](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:40:11.507

终于想出了一个办法来做到这一点。这是怎么回事：

工作区： * 通用库 * 应用程序代码 * 库覆盖应用程序特定代码，所有扩展/添加都驻留在其中。

方案：为工作区创建了一个方案，具有以下设置： * 将通用库添加为依赖构建的应用程序特定库 * 将两个库都添加为依赖的应用程序代码。

它的作品奇迹！:)

# javascript - 添加键盘快捷键（向上、向下、回车）以搜索输入建议 div

> ID：14269336
> 
> 赞同：0
> 
> 时间：2013-01-10T23:44:18.093
> 
> 标签：javascript, jquery

我有一个搜索建议`div`，当您`keyUp`输入时会出现。这很好用，但现在我正在尝试使用键盘快捷键。

我想要一种行为，例如当您单击`down`键盘箭头按钮时，a`span`被选中，如果它被选中，则另一个`span`被选中，类似地，如果您单击`up`箭头，则向上`span`选中，当您单击时，`enter`链接将打开。

我被卡住了，因为我无法删除 a:hover 并且无法向其中添加类。即使在我基本上不知道该怎么做之后。但我真的很努力，也很努力。。

这是一个[jsfiddle 链接](http://jsfiddle.net/DCvUJ/2/)（在字段中输入任何内容）。也许有人会帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:01:10.020

发出请求并返回数据时，应执行此代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        total = 3;
        $(".result-item").mouseenter(
            function(){
                hovered = $(this).attr("id");
                total = 3;

                $(".result-item").each(function(){
                    $(this).children("a").css({
                        'background-color':'#e4e4e4',
                        'color':'#000000'
                    });

                    $(this).find(".searchheading").css({
                            'color':'#191919'
                        });

                    $(this).find(".searchcaption").css({
                        'color':'#555555'
                    });
                });

                $(this).children("a").css({
                    'background-color':'#b7b7b7',
                    'color':'#ffffff'
                });

                $(this).find(".searchheading").css({
                    'color':'#ffffff'
                });

                $(this).find(".searchcaption").css({
                    'color':'#f1f1f1'
                });
            }
        );

    });
</script> 
```

在发出请求的页面上的这段代码：

```
$("#suggestions").hide();

                $("#search").bind('keyup', function(event){
                    if (event.which == 40 || event.which == 38 || event.which == 13) return false;
                    else
                    {
                        hovered = undefined;
                        lookup($(this).val());
                    }
                });

                $("#search").bind('keydown', 'down', function(evt){
                    if ($("#suggestions").is(":visible"))
                    {
                        if (typeof hovered == 'undefined')
                        {
                            $("#result-item-0").trigger("mouseenter");
                            return;
                        }

                        count = parseInt($("#"+hovered).attr("count"));
                        next = (count + 1);

                        if (next == total)
                            next = 0;

                        $("#result-item-"+next).trigger("mouseenter");
                    }
                });

                $("#search").bind('keydown', 'up', function(evt){
                    if ($("#suggestions").is(":visible"))
                    {
                        if (typeof hovered == 'undefined')
                        {
                            $("#result-item-"+(total-1)).trigger("mouseenter");
                            return;
                        }

                        count = parseInt($("#"+hovered).attr("count"));
                        prev = (count - 1);

                        if (prev == -1)
                            prev = (total-1);

                        $("#result-item-"+prev).trigger("mouseenter");
                    }
                });

                $("#search").bind('keydown', 'return', function(evt){
                    if ($("#suggestions").is(":visible"))
                    {
                        if (typeof hovered == 'undefined')
                        {
                            str = $("#search").val();
                            window.location.href = urlencode(str); // urlencode is a custom function
                            return false;
                        }

                        count = parseInt($("#"+hovered).attr("count"));
                        current = count;
                        $("#result-item-"+current).trigger("mouseenter");

                        $("#suggestions").fadeOut();
                        window.location.href = $("#"+hovered).children("a").attr("href");
                    }
                });

            }) 
```

;

我还删除`onkeyup=""`了元素上的属性，这种方法更好。

# php - 如何在 Amazon S3 中获取列表对象的上一页

> ID：14269337
> 
> 赞同：12
> 
> 时间：2013-01-10T23:44:26.127
> 
> 标签：php, amazon-s3

我已成功创建了用于在 Amazon S3 存储桶中列出对象的下一个按钮。每次用户单击 NEXT 按钮时，只会返回两个键。代码如下

```
 $response = $s3->list_objects('bucket_name', array(
                'prefix' => 'small/',
                'max-keys' => 2,
                'marker' => 'small/blah.jpg'
            )); 
```

上面的代码将在标记之后返回 2 个键。但我无法创建上一个按钮。有什么东西可以在标记之前返回前两个键吗？或者你能建议任何更好的解决方案。我正在使用 PHP SDK。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-04T14:02:18.490

AWS S3 API 没有任何参数指定在标记之前返回项目。在最新版本的 API 中，它`marker`被重命名为`start-after`参数，强调您只能获得参数值旁边的项目。

要实现上一个按钮，您应该将特定请求的标记顺序列表存储在数据库或缓存中。例如，可能有 3 列：

```
request_hash | marker_key | previous_marker_key 
```

处理当前请求，您可以将行添加到表中并获取行。这是一些伪代码：

```
$requestHash = sha1(serialize([$bucketName, $prefix, $delimiter]));
$markerForPreviousPage = $dbProvider
     ->fetchPreviousMarker($requestHash, $_GET['current_marker']);
$markerForNextPage = $keysFromS3[count($keysFromS3) - 1];
// here you will add values respectively to the columns request_hash, marker_key, previous_marker_key
$dbProvider
     ->addNewMarker($requestHash, $markerForNextPage, $_GET['current_marker']); 
```

# javascript - 如何在 js 中使用 arraybuffer 和类型化数组？

> ID：14269342
> 
> 赞同：-2
> 
> 时间：2013-01-10T23:45:21.973
> 
> 标签：javascript, arraybuffer

我有很多 0 到 255 之间的数字，我想将它们存储在一个数组中。Uint8array 是最好的，但我不知道如何使用它，也找不到任何有用的教程。一旦它们存储在数组中，如何修改/删除它们，或者添加一些新元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:54:01.547

[https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/Uint8Array](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/Uint8Array)

令人惊讶的是，“ [Uint8array javascript](https://www.google.com/search?hl=en&tbo=d&site=&source=hp&q=Uint8array%20javascript&oq=Uint8array%20javascript&gs_l=hp.3..0j0i8l2j0i8i10i30l3.1043.3447.0.3702.12.12.0.0.0.0.137.1035.9j3.12.0.les;..0.0...1c.1j2.K1Ckmv5xm2I) ”对此有很多有趣的结果。

# java - hazelcast storeall 没有被调用

> ID：14269343
> 
> 赞同：0
> 
> 时间：2013-01-10T23:45:33.317
> 
> 标签：java, hazelcast

我正在使用 hazelcast (v2.1.3) - 在地图的存储加载中，“存储”不断被调用而不是“存储所有”（即使写入延迟秒标志大于 0）：

```
<map-store enabled="true">
<class-name>test.test.abcMap</class-name>
<write-delay-seconds>5</write-delay-seconds> 
</map-store> 
```

任何有助于解决此问题的有用建议都将受到欢迎。我在另一个项目上进行了异步写入，但现在似乎无法让它们工作。谢谢

**编辑** 在 write-delay-seconds 中指定的延迟之后，将调用存储实现（而不是全部存储）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:24:56.033

您确定有多个条目需要存储吗？

如果地图中只有一个条目被添加或更新，`MapStore.store(key, value)`即使您启用了后写，也会被调用。 `MapStore.storeAll(map)`只有在需要存储多个条目时才会调用。

`com.hazelcast.impl.CMap.runStoreUpdate()`以下是来自（成员`store`类型为）的相关代码`MapStore`：

```
if (updates.size() == 1) {
    Map.Entry entry = updates.entrySet().iterator().next();
    store.store(entry.getKey(), entry.getValue());
} else if (updates.size() > 1) {
    store.storeAll(updates);
} 
```

这同样适用于`MapStore.delete()`和`MapStore.deleteAll()`。

您可以在 Github的[Hazelcast 源](https://github.com/hazelcast/hazelcast/blob/v2.1.3/hazelcast/src/main/java/com/hazelcast/impl/CMap.java#L968)代码中查看此代码

# r - 在 lapply 内赋值

> ID：14269349
> 
> 赞同：12
> 
> 时间：2013-01-10T23:46:27.327
> 
> 标签：r, merge, lapply

这是一个玩具示例，我总是为此编写一个循环。我很难找出一个班轮。我确定我见过它，但它没有坚持。

```
smallFrame <- data.frame(colA = c('A', 'B', 'C' ,'D'), colB = c(1,1,1,1))
someList <- list(A=20, B=30, C=40, D=50)
for(letter in names(someList)){
  smallFrame[smallFrame$colA==letter, 'newColumn'] <- someList[[letter]]
} 
```

如何在一行中执行循环？这不会做。

```
lapply(names(someList), function(x) {smallFrame[smallFrame$colA==x, 'newColumn'] <- someList[[x]]}) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T23:49:45.413

丑陋，但有效：

```
lapply(names(someList), function(x) {smallFrame[smallFrame$colA==x, 'newColumn'] <<- someList[[x]]}) 
```

注意`<<-`. 它不起作用的原因`<-`是 someList 的副本在函数中被修改。

在这里取“丑陋”意味着你永远不应该使用这种语法，原因有两个。首先，有副作用的函数容易出错。`lapply`其次，忽略的返回值。这些中的任何一个都表明显式循环是最好的。

不那么难看，几乎是从@thelatemail 偷来的：

```
smallFrame$newColumn <- unlist(someList[match(smallFrame$colA, names(someList))]) 
```

例子：

```
smallFrame <- data.frame(colA = c('A', 'B', 'C' ,'D', 'A'), colB = c(1,1,1,1,1))
> smallFrame

> smallFrame
  colA colB
1    A    1
2    B    1
3    C    1
4    D    1
5    A    1

smallFrame$newColumn <- unlist(someList[match(smallFrame$colA, names(someList))])

> smallFrame
  colA colB newColumn
1    A    1        20
2    B    1        30
3    C    1        40
4    D    1        50
5    A    1        20 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T00:01:50.177

这是一个简单的合并，如果你`smallList`适当地重塑你的

```
# reshape2 for melt.
library(reshape2)
# slightly expanded version with duplicate colA == A
smallFrame <- data.frame(colA = c('A', 'A', 'B', 'C' ,'D'), colB = c(1,2,1,1,1))
someList <- list(A=20, B=30, C=40, D=50)
merge(smallFrame, melt(someList), by.x = 'colA', by.y = 'L1')

  colA colB value
1    A    1    20
2    A    2    20
3    B    1    30
4    C    1    40
5    D    1    50 
```

或者，如果您真的热衷于在 smallFrame 内高效地分配，请使用`data.table`

```
library(data.table)
smallDT <- data.table(smallFrame, key = 'colA')
someDT <- data.table(melt(someList), key = 'L1')

# left join smallDT and someDT, assigning the `value` column by reference
# within smallDT as the column `newColumn`
smallDT[someDT, newColumn := value]

smallDT
   colA colB newColumn
1:    A    1        20
2:    A    2        20
3:    B    1        30
4:    C    1        40
5:    D    1        50 
```

# android - 如何在后堆栈中只保留第一个添加的片段（片段重叠）？

> ID：14269350
> 
> 赞同：9
> 
> 时间：2013-01-10T23:46:28.973
> 
> 标签：android

我想要实现的场景：

1.  使用两个框架容器加载活动（用于项目列表和详细信息）。
2.  在应用启动时，在 listFrame 中添加 listFragment，在 detailsFrame 容器中添加一些初始 infoFragment。
3.  浏览列表项而不将每个详细事务添加到后台堆栈（只想在堆栈中保留 infoFragment）。
4.  一旦用户点击返回按钮（导航返回），他就会退回到初始 infoFragment 启动时添加的内容。
5.  如果顺序后退导航失效，则应用程序退出。

我的代码：

```
 protected override void OnCreate(Bundle savedInstanceState)
        {
...
            var listFrag = new ListFragment();
            var infoFrag = new InfoFragment();
            var trans = FragmentManager.BeginTransaction();
            trans.Add(Resource.Id.listFrame, listFrag);
            trans.Add(Resource.Id.detailsFrame, infoFrag);
            trans.Commit();
...
        }

        public void OnItemSelected(int id)
        {
            var detailsFrag = DetailFragment.NewInstance(id);
            var trans = FragmentManager.BeginTransaction();
            trans.Replace(Resource.Id.detailsFrame, detailsFrag);
            if (FragmentManager.BackStackEntryCount == 0)
                {
                    trans.AddToBackStack(null);
                }
            trans.Commit();
        } 
```

我的问题：

按下后退按钮后，infoFrag 与之前的 detailFrag 重叠！为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-23T17:19:27.950

你可以这样做：

```
if (getSupportFragmentManager().getBackStackEntryCount() > 0) {
   getSupportFragmentManager().popBackStack(getSupportFragmentManager().getBackStackEntryAt(0).getId(), getSupportFragmentManager().POP_BACK_STACK_INCLUSIVE);
} else {
   super.onBackPressed();} 
```

在你的活动中，让你保留第一个片段。

**在您的第一个片段中，您不应该有 addToBackStack。**但是，在其他方面，是的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-27T11:05:31.863

Budius的解释非常好。我阅读了他的建议并实现了类似的导航，我想与他人分享。

而不是像这样替换片段：

```
Transaction.remove(detail1).add(detail2)
Transaction.remove(detail2).add(detail3)
Transaction.remove(detail3).add(detail4) 
```

我在活动布局文件中添加了片段容器布局。它可以是`LinearLayout`，`RelativeLayot`或者`FrameLayout`等等。所以在创建活动中我有这个：

```
transaction.replace(R.id.HomeInputFragment, mainHomeFragment).commit(); 
```

`mainHomeFragment`是按下后退按钮时我想要返回的片段，例如`infoFrag`. 然后，在每次下一笔交易之前，我都会：

```
fragmentManager.popBackStackImmediate();
transaction.replace(R.id.HomeInputFragment, frag2).addToBackStack(null).commit(); 
```

或者

```
fragmentManager.popBackStackImmediate();
transaction.replace(R.id.HomeInputFragment, frag3).addToBackStack(null).commit(); 
```

这样您就不必跟踪当前显示的片段。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T17:12:00.017

问题是您`backing`来自的交易有两个步骤：

*   消除`infoFrag`
*   添加`detailsFrag`（即添加的第一个详细信息容器）

（我们知道，因为文档`This is essentially the same as calling remove(Fragment) for all currently added fragments that were added with the same containerViewId and then add(int, Fragment, String) with the same arguments given here.`）

因此，每当系统恢复时，一个事务正在恢复这两个步骤，并且它没有`detailFrag`说明添加到其中的最后一个步骤，因此它不会对它做任何事情。

对于您的情况，我可以考虑两种可能的解决方法：

1.  将您的活动引用到最后使用的 detailsFrag 并使用 BackStackChange 侦听器来每当值从 1 更改为 0（您必须跟踪以前的值）时，您还可以删除剩余的片段

2.  在每个点击监听器上，您都必须 popBackStackImmediately() （删除前一个事务）和`addToBackStack()`所有事务。在这个解决方法中，您还可以使用一些 setCustomAnimation 魔法来确保它在屏幕上看起来不错（例如，使用从 0 到 0 持续时间 1 的 alpha 动画来避免之前的片段再次出现和消失。

附言。我同意片段管理器/事务应该更聪明地处理它在 .replace() 操作上处理回栈的方式，但这就是它的方式。

**编辑：**

正在发生的事情是这样的（我在细节中添加了数字以使其更清楚）。请记住`.replace() = .remove().add()`

```
Transaction.remove(info).add(detail1).addToBackStack(null) // 1st time
Transaction.remove(detail1).add(detail2) // 2nd time
Transaction.remove(detail2).add(detail3) // 3rd time
Transaction.remove(detail3).add(detail4) // 4th time 
```

所以现在我们在布局上有了 detail4：

```
< Press back button >
     System pops the back stack and find the following back entry to be reversed
         remove(info).add(detail1);
     so the system makes that transaction backward.
     tries to remove detail1 (is not there, so it ignores)
     re-add(info) // OVERLAP !!! 
```

所以问题是系统没有意识到有一个 detail4 并且事务是 .replace() 它应该替换那里的任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T11:15:27.233

我猜但是：

您已添加事务以将 infoFrag 替换为第一个 detailsFrag 到后台堆栈。

但随后您将第一个 detailsFrag 替换为第二个 detailsFrag。

此时，当您单击返回时，片段管理器无法用 infoFrag 干净地替换第一个 detailsFrag，因为第一个 detailsFrag 已被删除和替换。

我不知道是否预期重叠行为。

我建议调试 Android 核心代码，看看它在做什么。

我不确定`Activity::onBackPressed()`在将所有事务添加到后台堆栈后，您是否可以在不说覆盖和自己执行弹出的情况下实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T23:55:36.493

您可以覆盖 onBackPressed 并将事务提交到初始片段。

# android - Android：当我滚动列表并且无序时列表视图出现问题

> ID：14269352
> 
> 赞同：1
> 
> 时间：2013-01-10T23:46:36.370
> 
> 标签：android, listview, view, adapter, helper

*我有一个 ListView 适配器，它动态获取相对布局以显示加载到适配器中的图像和文本。问题是，当我完全滚动时，Listview 的顺序不正确。我尝试使用 ViewHolder 但这并没有解决问题。我想知道是否有其他方法可以做到这一点。或整数 Listview 加载而不执行一旦适配器已经加载列表的代码。主要问题是其他 RelativeLayout 布局的图像出现在错误的列表中。*

**现在我现在遇到的问题是，当您滚动列表时缓慢显示正常，但是如果列表中的滚动速度很快，元素就会被移走。好像没有处理足够快的位置参数。public View getView(int position, View convertView, ViewGroup parent)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:21:34.067

检查你`ListAdapter`的`getView()`; 确保 if`convertView`为 null 您正在创建它。在这两种情况下，您都希望`convertView`使用新数据进行更新，否则您将遇到这些问题（因为 Android 会回收这些视图但不会更新它们）。

# iphone - 将 caf 导出到 iTunes

> ID：14269357
> 
> 赞同：1
> 
> 时间：2013-01-10T23:46:55.033
> 
> 标签：iphone, xcode, m4a

我有一个创建 caf 文件的程序，我希望能够导出它。我的程序允许您使用 UIActivityViewController 导出，但如果您将其传递给 m4a 或 wav 文件，它只会让您通过电子邮件发送文件。我想将声音添加到用户的 iPod 音乐中。我错过了一些简单的事情吗？我知道苹果有其他的钩子，但想做和语音备忘录一样的工作。

谢谢

卢克

# c# - 带有 LinkLabel 的 NullReferenceException

> ID：14269358
> 
> 赞同：-3
> 
> 时间：2013-01-10T23:47:12.937
> 
> 标签：c#, winforms, nullreferenceexception, linklabel

这是一个伪问题。我可以强制链接在 EventHandler 中打开所需的页面，但我想知道在这种情况下我做错了什么，并以正确的方式做：

在 InitializeComponent() 中，在`partial class Form1`：

```
public void InitializeComponent()
{
    this.linkLabel1 = new System.Windows.Forms.LinkLabel();

    //...

    // 
    // linkLabel1
    // 
    this.linkLabel1.AutoSize = true;
    this.linkLabel1.LinkArea = new System.Windows.Forms.LinkArea(0, 1);
    this.linkLabel1.LinkColor = System.Drawing.Color.Red;
    this.linkLabel1.Location = new System.Drawing.Point(259, 100);
    this.linkLabel1.Name = "linkLabel1";
    this.linkLabel1.Size = new System.Drawing.Size(13, 17);
    this.linkLabel1.TabIndex = 5;
    this.linkLabel1.TabStop = true;
    this.linkLabel1.Text = "?";

    /**/
    this.linkLabel1.Links.Add(1, 1, "www.google.com"); //This is the only code I have added manually.
    /**/

    this.linkLabel1.UseCompatibleTextRendering = true;
    this.linkLabel1.LinkClicked += new System.Windows.Forms.LinkLabelLinkClickedEventHandler(this.LinkClicked);

}

//...

private System.Windows.Forms.LinkLabel linkLabel1; 
```

EventHandler，LinkClicked，在`public partial class Form1 : Form`：

```
private void LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    System.Diagnostics.Process.Start(e.Link.LinkData.ToString());
} 
```

当您单击 linkLabel1 时，当您调用`System.Diag...`.

我没有接受过太多关于错误处理或词汇的培训，所以这对我来说可能是希腊语。该按钮不是静态的...我应该创建一个...链接的新实例吗？

程序不是已经创建了一个实例吗？如果不是，为什么`.Size`, `.Name`, `.Text`, etc 工作......但不是`.Links.Add`？不知道我在说什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T23:50:41.313

问题大概出在`e.Link.LinkData.ToString()`

检查`LinkData`不为空...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:55:29.270

我相信您的问题是您在自动生成的设计器文件中添加了链接。您无法预测 Visual Studio 何时会修改/重新创建它，以及它将有哪些变化。就我而言，您使用的相同语句被替换为：

```
this.linkLabel1.LinkArea = new System.Windows.Forms.LinkArea(1, 1); 
```

解决方法很简单。地方：

```
this.linkLabel1.Links.Add(1, 1, "www.google.com"); 
```

如果`Load`是您的表格。还要确保从设计器区域中删除由 Visual Studio 重构的所有不需要的代码部分。

# macos - 为什么 com.canon.cr2-raw-image 根据 UTTypeConformsTo 不符合 public.camera-raw-image？

> ID：14269359
> 
> 赞同：2
> 
> 时间：2013-01-10T23:47:18.630
> 
> 标签：macos, cocoa, uti

我试图通过获取文件的 UTI 来查看某个图像是否是 RAW 图像文件，然后使用`UTTypeConformsTo()`来查看图像的 UTI 是否符合“public.camera-raw-image”，但是当我尝试这样做时，`UTTypeConformsTo()`返回错误的。这是有问题的代码：

```
- (NSNumber*)bw_conformsToUTI:(NSString*)otherString
{
    Boolean conformsBoolean = UTTypeConformsTo((CFStringRef)self, (CFStringRef)otherString);
    NSNumber* conforms = [NSNumber numberWithBool:conformsBoolean];
    return conforms;
} 
```

（该方法是作为 NSString 上的一个类别编写的，并且这些行是这样分开的，因为我在调试器中确保从 Boolean 转换为 BOOL 并丢失位不会发生任何有趣的事情；conformsBoolean 绝对以全 0 位返回）

如果 self 是“com.canon.cr2-raw-image”而 otherString 是“public.camera-raw-image”，我希望这会返回 YES，但结果却是 NO。我追踪了“com.canon.cr2-raw-image”UTI 的定义位置，并在 /System/Library/CoreServices/CoreTypes.bundle/Contents/Library/RawCameraTypes.bundle/Info.plist 中找到了它确实如此指定 com.canon.cr2-raw-image 直接符合 public.camera-raw-image。我确实注意到这是声明为导入的 UTI 而不是导出的 UTI，但是由于我的应用程序确实识别了该声明（证明我首先通过 获得了该字符串`UTTypeCreatePreferredIdentifierForTag()`），我认为这不会有所作为.

我在这里做的或误解的事情有什么明显的错误吗？

# mysql - Delphi：MySql 与 Indy10

> ID：14269360
> 
> 赞同：1
> 
> 时间：2013-01-10T23:47:32.113
> 
> 标签：mysql, delphi, indy10

我正在寻找一个线程安全且可与 indy10 TcpServer 一起使用的组件。谁能给我指个方向。我搜索并在stackoverflow中找到了一个主题，一个人建议[使用mysql.pas](http://www.audio-data.de/delphi/mysql/mysql.zip)

与多线程应用程序一起使用是否安全？

对不起我这么笨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:00:30.107

根据[我认为该特定软件的主页，](http://www.audio-data.de/mysql.html)它只是 libmysql.dll 的一个接口，只要每个线程根据这个看起来[相当的](http://en.wikipedia.org/wiki/Monty_Widenius)[源使用自己的连接，就可以在多线程上下文中安全地使用它](http://lists.mysql.com/mysql/8680)[权威的](http://en.wikipedia.org/wiki/Monty_Widenius)

# javascript - jQuery - 遍历图像并隐藏所有未点击的图像

> ID：14269362
> 
> 赞同：0
> 
> 时间：2013-01-10T23:47:41.370
> 
> 标签：javascript, jquery, loops

这是我的图像的 HTML：

```
<img id="polaroid1" class="polaroid" onclick="fadeImages(this)" src="images/polaroid1.png">
<img id="polaroid2" class="polaroid" onclick="fadeImages(this)" src="images/polaroid2.png">
<img id="polaroid3" class="polaroid" onclick="fadeImages(this)" src="images/polaroid3.png"> 
```

在用户单击这些图像中的任何一个后，它会调用 fadeImages() 函数。这是我的 JavaScript 和 jQuery：

```
function fadeImages(e) {
    var clickedImage = $(e).attr('id');

    $('img').each(function() {
        if($(this).attr('id') != clickedImage) {
            $('img').animate({opacity: 0}, 500);
        }
    });
 } 
```

基本上，我希望所有图像，但点击的图像淡出，但我不知道如何将点击的图像 ID 传递给“每个（）”函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:51:24.030

在每个图像上绑定一个单击事件，该事件会淡化它的所有兄弟元素。

```
$('img.polaroid').on('click', function(event) {
  $(this).siblings('.polaroid').animate({opacity: 0}, 500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:49:58.627

```
function fadeImages(e) {
    $('.polaroid').not(e).animate({opacity: 0}, 500);    
} 
```

一个更好的方法是删除`onclick`你的图像并使用 jQuery 的力量......

像这样...

```
$(function(){
    var $imgs = $('.polaroid');
    $imgs.click(function(){
         $imgs.not(this).animate({opacity: 0}, 500);
    });
}) 
```

# wordpress - 如何修复这个 wordpress 侧边栏？

> ID：14269370
> 
> 赞同：0
> 
> 时间：2013-01-10T23:48:29.877
> 
> 标签：wordpress

感谢您的任何帮助。我正在尝试修复此页面上的侧边栏 [http://outfoxedmedia.com/skincare/winners-circle/](http://outfoxedmedia.com/skincare/winners-circle/)

我相信问题可能出在侧边栏循环不正确。侧边栏中使用了 3 个文本小部件，只有图像，它们没有正确排列或堆叠在一起。这里有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:56:36.960

是的，您的侧边栏循环输出的 html 似乎已关闭。更准确地说，它输出：

```
<ul class="sidebar_list">
  <li class="widget widget_text">           
    <div class="textwidget">
      <a href="#"><img src="http://outfoxedmedia.com/skincare/wp-content/uploads/2013/01/sidebar1.png" border="0" alt="" width="252" height="252" /></a>
    </div>
  </div> //<-- Sup
  </li> 
```

每个列表项都有一个额外的结束 div 标签。

# ios - objective-c collectionview 不加载数据

> ID：14269377
> 
> 赞同：3
> 
> 时间：2013-01-10T23:49:10.813
> 
> 标签：ios, objective-c, reloaddata, collectionview

不知何故，我的 collectionView 不加载我的数据。我从 facebook 获取数据并在填充数组后调用 reloadData，但没有任何反应......

不显示单元格，因为调用 ViewDidLoad 时数组为 0。

如何重新加载它对 collectionView 生效？我的代码有什么问题？

**集合视图控制器.h**

```
#import <UIKit/UIKit.h>
#import <FacebookSDK/FacebookSDK.h>

@interface CollectionViewController : UICollectionViewController <UICollectionViewDataSource, UICollectionViewDelegateFlowLayout>

@property (nonatomic, weak) IBOutlet UICollectionView *collectionView;
@property (nonatomic, strong) NSMutableArray *searches;
- (IBAction)getFotos:(id)sender; 
@end 
```

**集合视图控制器.m**

```
#import "CollectionViewController.h"
#import "CollectionViewCell.h"
#import "BHPhoto.h"

@interface CollectionViewController () 

@end

@implementation CollectionViewController

@synthesize collectionView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSMutableArray *searches = [[NSMutableArray alloc] init];
    self.searches = searches;

    [self getFotos:nil];
    NSLog(@"searches amount: %u", [self.searches count]);

    [self.collectionView registerClass:[CollectionViewCell class] forCellWithReuseIdentifier:@"collcell"];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - UICollectionView Datasource
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    int ret = [self.searches count];   // <-- here the searches return 0 instead of the filled searches size, what I though will happen if reloadData is called
    NSLog(@"numberOfItemsinSection - I: %d", ret); 
    return ret;
}

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
    int ret = 1;
    NSLog(@"numberOfSection - S: %d", ret);
    return ret;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"collcell" forIndexPath:indexPath];
    cell.backgroundColor = [UIColor whiteColor];
    return cell; 
}

#pragma mark - UICollectionViewDelegate
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    // @todo select
}

- (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath {
    // @todo de-select
}

#pragma mark - UICollectionViewDelegateFlowLayout
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"SETTING SIZE FOR ITEM AT INDEX %d", indexPath.row);
    return CGSizeMake(80, 80);
}

#pragma mark -
#pragma mark get Facebook fotos around me
- (IBAction)getFotos:(id)sender {
    NSLog(@"getFotos in collview");
    [FBRequestConnection
     startWithGraphPath:@"search?type=place&center=43.119340,22.694992&distance=1000&fields=picture"
     completionHandler:^(FBRequestConnection *connection,
                         id result,
                         NSError *error) {
         if (!error) {
              [self readjson:result];
         }
     }];
}

#pragma mark read json for search location
- (IBAction)readjson:(NSDictionary *)jsondata {

    NSLog(@"keys: %@", [jsondata allKeys]);
    for (id item in [jsondata objectForKey:@"data"]) {        

        // add Photos to array
        NSURL *photoURL = item[@"picture"][@"data"][@"url"]; 
        BHPhoto *photo = [BHPhoto photoWithImageURL:photoURL];
        [self.searches addObject:photo];

    }
    NSLog(@"searches content: %@", self.searches);
    [self.collectionView reloadData]; // <-- reload data is called but does not have an effect...

}

@end 
```

调试输出：

```
2013-01-11 00:23:46.308 foobar[3099:19a03] getFotos in collview
2013-01-11 00:23:46.309 foobar[3099:19a03] searches amount: 0
2013-01-11 00:23:46.312 foobar[3099:19a03] numberOfSection - S: 1
2013-01-11 00:23:46.312 foobar[3099:19a03] numberOfItemsinSection - I: 0
2013-01-11 00:23:46.591 foobar[3099:19a03] keys: (
    data,
    paging
)
2013-01-11 00:23:46.592 foobar[3099:19a03] searches content: (
    "<BHPhoto: 0x9351460>",
    "<BHPhoto: 0x938ad20>",
    "<BHPhoto: 0x938ade0>",
    "<BHPhoto: 0x938ae90>",
    "<BHPhoto: 0x938af40>",
    "<BHPhoto: 0x938b000>"
) 
```

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:31:55.720

您忘记将您的类设置为其自己的委托/数据源。在你的控制器类 init 中，像这样添加这些行，这样它就知道你的协议实现是为自己的：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.collectionview.delegate = self;
        self.collectionview.datasource = self;
    }
    return self;
} 
```

这也花了我一段时间，但我注意到您的调试输出只调用 numberOfItemsInSection: 一次（在 viewDidLoad 上）。当您调用 [self.collectionview reloadData] 时，它将再次调用该方法，因此您应该会看到另一条具有正确计数的调试消息。

# jquery - 如何从 JQuery 选择器中单击或激活超链接？

> ID：14269381
> 
> 赞同：4
> 
> 时间：2013-01-10T23:49:32.837
> 
> 标签：jquery, hyperlink

我有两张表，一张是主表，一张是数据库的子表。主表第 6 列的每一行都有一个链接，用于刷新包含该行数据的明细表。当前行突出显示。我在明细表上有一个按钮，它在主表的每个 TR 中搜索第一个 TD 中包含行号的特定值，如果该值等于当前行号 + 1，则执行以下代码：

```
$("tr").each(function() {
    var nextRownum = $(this).find("td[headers='COL01']").text();
    if (parseInt(nextRownum) == parseInt(currentRownum) + 1) { 
        $(this).find("td[headers='COL06']").find('a').click();
    }
}); 
```

$(this) 是 TR。我知道这有点工作，因为我在页面加载时执行了以下代码......

```
$("td[headers='COL06']").find('a').each(function(){
    $(this).click(function(){HighLight(this);});
}); 
```

...当我单击按钮时，下一行会突出显示，但页面不会刷新；即，我的第 6 列中的超链接没有被激活。

有什么建议么？谢谢; 马修·莫伊森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:13:07.863

`.click`默认情况下，锚点上没有。你可以这样做

```
window.location.href=$(this).find("td[headers='COL06'] a").attr('href');
// NB you won't ever need to .find().find()           ^ 
```

或者你可以给选定的锚点一个点击事件，这样你就可以触发它们

```
<a href="http://www.google.com/" target="_blank" class="icanhasclick">Woo</a>

$('a.icanhasclick').on('click', function(){
    window.location.href=this.href;
});

$(this).find("td[headers='COL06'] a").click(); 
```

# algorithm - 如何将递增的序列号流压缩为一个？

> ID：14269391
> 
> 赞同：2
> 
> 时间：2013-01-10T23:50:54.997
> 
> 标签：algorithm, sequence, sequences

我正在收听一个服务器，该服务器使用序列号向我发送某些消息。我的客户解析出序列号以跟踪我们是否得到重复或是否错过了序列号，尽管它通常由一个需要单个递增序列号的包装器对象调用。不幸的是，这个特定的服务器发送不同的序列号流，仅在每个子流中递增。换句话说，一个更简单的服务器会发送给我：

1,2,3,4,5,7

我会报告回来`1,2,3,4,5,6,7`，包装工具会通知丢失了一条消息。不幸的是，这个更复杂的服务器向我发送了类似的信息：

A1,A2,A3,B1,B2,A4,C1,A5,A7

（除了字母实际上也是数字代码，方便）。以上除了A6没有差距，但由于我需要向包装对象报告一个数字，我无法报告：

1,2,3,1,2,4,1,5,7

因为这将被错误地解释。因此，我想在我的客户中将我收到的内容浓缩为一个增量的数字流。这个例子

A1,A2,A3,B1,B2,A4,C1,A5,A7

应该真的翻译成这样的东西：

1、2、3、4（因为 B1 确实是第 4 个唯一消息）、5、6、7、8、10（因为 9 可能是 A6、B3、C2 或其他字母 1）

那么这将被视为错过了一条消息（A6）。另一个示例序列：

A1,A2,B1,A7,C1,A8

可以报​​告为：

1,2,3,8,9,10

因为前三个在逻辑上是一个有效的序列，没有任何遗漏。然后我们得到 A7，这意味着我们错过了 4 条消息（A3、A4、A5 和 A6），所以我报告了 8 条消息，以便包装器知道。然后 C1 进来，这很好，所以我给它 #9，然后 A8 现在是下一个预期的 A，所以我给它 10。

不过，我很难找到一种方法来创建这种行为。有哪些方法可以解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:58:35.600

对于每个流，确保该流具有正确的序列。然后，将您看到的所有有效序列号的计数作为聚合数发出。伪代码：

```
function initialize()
    for stream in streams do
        stream = 0
    aggregateSeqno = 0

function process(streamId, seqno)
   if seqno = streams[streamId] then
      streams[streamId] = seqno + 1
      aggregateSeqno = aggregateSeqno + 1
      return aggregateSeqno
   else then
      try to fix streams[streamId] by replying to the server

function main()
   initialize()
   while(server not finished) do
      (streamId, seqno) = receive()
      process(streamId, seqno) 
```

# java - Java ArrayList 的描述性统计

> ID：14269392
> 
> 赞同：5
> 
> 时间：2013-01-10T23:50:57.283
> 
> 标签：java, google-app-engine, arraylist

我有`Profile`对象的 ArrayList。`Profile`具有`age`, `gender`,`country`等属性

java中是否有任何库可以轻松提供描述性统计数据，如女性资料数量、男性资料数量、美国女性资料数量和其他复杂报告。

使用的环境是 Google App Engine。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T00:00:54.963

您可以在 apache commons 数学中使用描述性统计数据，例如

```
// Get a DescriptiveStatistics instance
DescriptiveStatistics stats = new DescriptiveStatistics();

// Add the data from the array
for( int i = 0; i < inputArray.length; i++) {
        stats.addValue(inputArray[i]);
}

// Compute some statistics
double mean = stats.getMean();
double std = stats.getStandardDeviation(); 
```

您需要将性别/国家信息添加到 commons math 提供的 descriptiveStatistics 中。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:04:37.327

您可以使用像[javascriptstats.com这样的简单库](http://javascriptstats.com)

它专门用于数值统计，具有以下功能：

*   意思是
*   中位数
*   模式
*   范围
*   方差
*   标准差

干杯!

# perl - perl 中可选参数的默认值为 true

> ID：14269398
> 
> 赞同：3
> 
> 时间：2013-01-10T23:51:33.030
> 
> 标签：perl

我正在定义一个带有可选参数的方法。通常我会使用这样的东西：

```
sub foo {
    ($self, $optarg) = @_;
    $optarg ||= 1;
} 
```

我希望将可选参数视为布尔值，默认值为`true`. 这显然不适用于上述情况，因为`$optarg`如果未传入参数，则会评估为 false。

有没有办法区分没有传递的参数和评估为假的值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T00:03:13.993

如果您有 Perl 版本 5.10 或更高版本，则可以替换`$optarg ||= 1`为，仅当它是`$optarg //= 1`时才会修改。`$optarg``undef`

或者，如果您想允许`undef`作为显式 false 值传递，您可以说`$optarg = 1 if @_ < 2`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T23:55:31.157

```
my ( $self, $optarg ) = ( @_, 1 ); 
```

如果它是“未传入”，那么它将不在列表中，您将获得`1`. 否则，假设用户知道该方法是如何工作的，他们不应该传入任何可以被视为假的第二个参数，除非他们意味着将其视为假值。（当然，我并不是说知识渊博的用户永远不会为布尔值传递错误的值。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T00:57:56.703

这可以很好地扩展到多个可选参数：

```
my $self = shift;
my $optarg = @_ ? shift : 1; 
```

这样做也是如此，但它可以更好地处理多个必需的参数。不幸的是，它违反了最小冗余原则。

```
my ($self, $optarg) = @_;
$optarg = 1 if @_ < 2; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T14:47:16.563

你已经得到了一些很好的回应，所以我只想添加一个更多可能的选项。[Method::Signatures](https://metacpan.org/module/Method%3a%3aSignatures)为带有签名的方法提供了一个很好的语法，包括默认值，以您期望的方式处理。

```
#!/usr/bin/env perl

package MyClass;

use Moo;
use Method::Signatures;

method foo ( $optarg = 1 ) {
  print "$optarg\n";
}

package main;

my $obj = MyClass->new;
$obj->foo;
$obj->foo(0); 
```

请注意，我使用[Moo](https://metacpan.org/module/Moo)，但 M::S 不需要它。另请注意，Moo 启用`strict`并且此脚本是`strict`安全的，即使它可能看起来不安全。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T23:54:12.087

```
my $optarg;
$optarg = 1 if not defined $optarg; 
```

但请注意下面@jordanm 的评论

# mongodb - MongoDB $或流星中的查询？

> ID：14269400
> 
> 赞同：10
> 
> 时间：2013-01-10T23:51:46.380
> 
> 标签：mongodb, meteor

mongodb $or 运算符在meteorjs 上下文之外按预期工作：

```
db.users.find({$or: [{email: 'some@mail.com'},{city: 'atlanta'}]}); 
```

我会收到电子邮件 some@mail.com 或亚特兰大市的任何文档的结果。

Meteor 语法中的相同查询不会产生相同的结果：

```
Users = new Meteor.Collection("users");
Users.find({$or: [{email: 'some@mail.com'},{city: 'atlanta'}]}); 
```

我已经阅读了流星文档 - [http://docs.meteor.com/#find](http://docs.meteor.com/#find) - 因为它没有说明任何内容，我假设它应该与 mongodb 1.6+ 实例一样运行？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-11T00:21:14.183

`find`返回一个游标对象。您需要使用 a[`fetch`](http://docs.meteor.com/#fetch)来获取值数组。尝试：

```
console.log(Users.find({$or: [{email: 'some@mail.com'},{city: 'atlanta'}]}).fetch()); 
```

# datetime - 在 Apache Thrift 中，日期对象应该如何表示

> ID：14269405
> 
> 赞同：7
> 
> 时间：2013-01-10T23:52:14.893
> 
> 标签：datetime, thrift, cross-language

在 Thrift IDL 中没有 Date 类型。表示日期对象的最佳跨语言机制是什么。我认为有 2 位理想的候选人，但我很想听听其他想法。

1.  字符串 - 在每种语言中，您都可以使用 strftime 之类的东西将日期转换回来。
2.  i32 - 自纪元以来的时间可以转换回来。

我敢肯定，除了转换之外，还有其他事情要考虑。希望外面的人有一些好的反馈。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T01:42:43.080

**tldr;** 除非有其他理由，否则请使用适当编码的字符串。

这取决于需要什么。以下是一些差异 - 请记住，*现代计算机速度很快*，转换可能只是整个应用程序时间的一小部分，因此“更多处理”通常甚至无法应用测量！

字符串（使用[**ISO 8601**](http://en.wikipedia.org/wiki/ISO_8601)或更严格的[XML dateTime](http://www.w3.org/TR/xmlschema-2/#dateTime)）：

*   “更多空间”/“更多处理”（*见上文*）/固定大小或可变大小
*   标准化文化中性格式
*   人类可读且*易于识别*
*   支持时区
*   更多范围（-9999 到 9999）
*   更多/任意精度（最高 1us）
*   按字典顺序排列（在同一时区和兼容格式内）

纪元（UNIX 变体）：

*   “更少空间”/“更少处理”/固定大小
*   标准化的文化中性格式
*   *人类不可读*（勤奋的编码人员应该能够识别“大约现在”）
*   *没有*时区（甚至无法区分“本地”和 UTC）
*   *较小的*范围（1970 到 2034，带符号的 32 位数字）
*   *更少*/固定精度（1 秒）
*   数字排序

（[儒略日](http://en.wikipedia.org/wiki/Julian_day)是另一种与纪元时间有许多相似之处的编码。）

结论：

除非空间/性能*是*一个经过验证的问题——这需要性能分析和功能要求——我会选择前者。今天的计算机比几年前的计算机快得多*，而且*比几十年前的计算机快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T21:37:07.937

只是为了后代，您可能对 temporenc ( [http://temporenc.org](http://temporenc.org) ) 感兴趣，这是一种用于日期和时间的综合二进制编码格式。

# javascript - DRY：使所有功能“返回这个”

> ID：14269410
> 
> 赞同：2
> 
> 时间：2013-01-10T23:52:38.790
> 
> 标签：javascript, prototype

我正在尝试一些代码来创建我自己的 DOM 方法，但没有扩展实际的 DOM，类似于 jQuery 的工作方式。到目前为止，这是我的原型：

```
function Lib( selector ) {
  this.el = this._query( selector );
}

Lib.prototype = {
  _query: document.querySelectorAll.bind( document ),
  _each: function( fn ) {
    return [].forEach.call( this.el, fn );
  },
  hide: function() {
    this._each(function( el ) {
      el.style.display = 'none';
    });
    return this;
  },
  show: function() {
    this._each(function( el ) {
      el.style.display = 'block';
    });
    return this;
  },
  toggle: function() {
    this._each(function( el ) {
      var hidden = el.style.display == 'none';
      el.style.display = hidden ? 'block' : 'none';
    });
    return this;
  }
};

function $( selector ) {
  return new Lib( selector );
}

$('div').toggle(); 
```

如您所见，我必须不断返回`this`才能链接方法。我的大脑现在已经死了，我想不出一种自动化的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:08:59.273

...我认为自动化没有真正的优势。

考虑到每个方法只定义一个在_each 中运行的函数，我会攻击它，因为它可能会回答你的实际问题。使用函数`_each`并将生成的函数添加到原型中的函数生成器可以解决这两个问题。

[*虽然我不确定实施。*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T23:54:51.847

不要“自动化”返回语句。它是一个控制逻辑，很像 if-else（仅在功能级别上）。

如果你想真正“自动化”它，那么你基本上是在要求一个 JavaScript 代码生成器，这与 CoffeeScript 等不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T23:56:16.133

您必须从每个方法调用中返回“this”以实现可链接性。

或者，您可以通过应用或调用并在“this”上下文中执行回调函数来完成类似的操作。

# php - 是否有任何 PHP 库支持从 DOCX 转换为 DOC 文件格式？任何 MSO-X 都比原始格式更好

> ID：14269419
> 
> 赞同：1
> 
> 时间：2013-01-10T23:53:28.467
> 
> 标签：php, powerpoint, converter, docx, xlsx

我正在开发一个用户将上传文档的系统。它仅支持 MS Office 文件 2003 及更早版本，因此如果用户上传任何 x 文件（docx、xlsx、pptx），它目前会出错。

我在 [另一个 SO question中找到](https://stackoverflow.com/questions/13167992/convert-doc-file-into-docx-with-php)[了 PHPWord](http://phpword.codeplex.com/)，但这与我需要的完全相反，而且仍然处于早期测试阶段。

最坏的情况，是否有任何好的库可以将这些相同的 MSO-X 格式转换为 PDF？

# php - 打印前重新排列数据

> ID：14269420
> 
> 赞同：2
> 
> 时间：2013-01-10T23:53:31.013
> 
> 标签：php, mysql, arrays, html-table

我目前有从数据库中提取数据的代码，然后对其中的一部分进行一些数学运算，然后将其打印到表中。但是，我想将打印的数字从大到小排列。我熟悉查询中的排序，但是查询不知道最终结果是什么。重新排列这些数据的最有效方法是什么。

```
<?php
    $hourAmount = $mlYeild * (3600 / $cycleTime);
    $oreVolumePriceQuery = "SELECT od.oreID, od.inGameID, od.size, ir.officialCorpRate FROM oreData od JOIN itemRates ir ON od.inGameID = ir.typeID order by od.oreID asc";
    $oreVolumePriceResult = mysql_query($oreVolumePriceQuery);
$hourYeild = $mlYeild * (3600 / $cycleTime);
?>
<TABLE>
    <TR>
        <TD><h1>Ore</h1></TD>
        <TD><h1>Hourly Yeild</h1></TD>
        <TD><h1>Hourly Sale</h1></TD>
    </TR>
    <?php
        $ores = array();
        While($row = mysql_fetch_assoc($oreVolumePriceResult)){
            $inGameID = $row['inGameID'];
            $volume = $row['size'];
            $rate = $row['officialCorpRate'];
            $name = $row['name'];
            $hourlyYeild = $hourAmount/$volume;
            $hourlyIncome = $hourlyYeild * $rate;

            echo "<TR>";
            echo "<TD>".$name."</TD>";
            echo "<TD>".$hourlyYeild."</TD>";
            echo "<TD>".$hourlyIncome."</TD>";
            echo "</TR>";
        }
    ?>
</TABLE> 
```

简而言之，从进来的数据来看，我希望它通过`$hourlyIncome desc`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:10:07.203

1.  首先将您的计算存储回`$row`（看起来好像`$hourAmount`丢失了——我认为这是`$rate`，希望我做对了）：

    `$inGameID = $row['inGameID'];
    $volume = $row['size'];
    $rate = $row['officialCorpRate'];
    $name = $row['name'];
    $hourlyYield = $row['hourlyYield'] = $rate /$volume;
    $hourlyIncome = $row['hourlyIncome '] = $hourlyYield * $rate;`

2.  将 附加`$row`到`$rows`数组：`$rows[] = $row;`

3.  当您拥有所有 时`$rows`，使用自定义比较函数对`$rows`数组进行排序。

    用户自定义比较：

    ```
    function cmp($a, $b)  
    {  
        if ($a['hourlyIncome'] == $b['hourlyIncome']) {  
            return 0;  
        }  
        return ($a['hourlyIncome'] < $b['hourlyIncome']) ? 1 : -1;  
    } 
    ```

4.  排序`$rows`方式`usort($rows, $comp);`

5.  做一个标准循环`$rows`显示。

注意：在我看来，所有这些计算都可以在 SQL 端完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:11:06.340

好吧，我不知道这是否是最有效的方法，但您可以将计算出的数据存储在数组中，然后对其进行排序。

# windows-phone-7 - Windows Phone 8 原生项目中 Hat 运算符的使用

> ID：14269422
> 
> 赞同：1
> 
> 时间：2013-01-10T23:53:40.447
> 
> 标签：windows-phone-7, windows-8, windows-runtime, windows-phone-8, c++-cx

我来自 C# 背景，学习 C++，特别是在 Windows Phone 8 平台上。

许多代码示例（随 SDK 一起安装）显示了 Hat 运算符的用法 ^（此处参考：[戴帽子的类型](http://blogs.msdn.com/b/vcblog/archive/2012/09/17/cxxcxpart02typesthatwearhats.aspx)）。

例如：

```
void PhoneDX::Initialize(CoreApplicationView^ applicationView)
{
    // ... function body
} 
```

我想知道：

*   为什么大多数指针都以这种方式定义，特别是在 Windows Phone 8 上？

*   该语法是强制性的吗？假设我正在使用来自另一个平台的 C++ 本机库（不使用此语法）。它应该没有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T01:22:28.770

hat 是一种编译器支持的智能指针类型，旨在使 Windows 运行时类型更易于从 C++ 代码中使用。正如[“戴帽子的类型”](http://blogs.msdn.com/b/vcblog/archive/2012/09/17/cxxcxpart02typesthatwearhats.aspx)和该系列的其他文章中所讨论的那样，C++/CX 语言扩展是可选的：任何可以使用 C++/CX 编写的代码都可以在不使用语言扩展的情况下用 C++ 编写，尽管更大代码复杂性和冗长。

这里的关键是帽子旨在促进使用 Windows 运行时类型的代码。通常，您应该将 C++/CX 和 Windows 运行时类型的使用限制在组件的边界：您的大部分代码应该是标准的、可移植的、普通的 C++ 代码。应使用 C++/CX (1) 包装 C++ 代码，使其可通过 Windows 运行时使用，以及 (2) 使用组件中的其他 Windows 运行时组件。

所以，是的，语法是可选的，但是在编写必须与 Windows 运行时类型一起使用的代码时，您应该强烈考虑使用它。您应该能够使用任何普通的 C++ 代码而无需修改，但需要注意的是 Windows Store 应用程序和 Windows Phone 应用程序以低权限运行并且某些功能不可用（例如，没有控制台，因此控制台 I/O 不可用） t 工作，并且运行时提供专门的进程生命周期管理工具，因此调用`exit`是一个坏主意）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T01:29:34.777

您可能很难掌握它，因为它有点像从 (1) C# 引用到 (4) C++/CX 帽子的复合飞跃，中间停在 (2) C++ 指针然后 (3) 引用计数对象。

智能`^`指针是一种语言扩展，不是标准 C++ 的一部分，用于处理 Windows 运行时类型（引用计数）

所以回答你的观点：

*   如果您在 Windows Phone 8 中经常看到它们，那是因为 ^ 用于 Windows 运行时类型，在该平台示例中会大量使用（因为示例试图演示该平台的 api 和功能）。
*   您需要对该库使用约定，这可能需要您使用它定义的类型（如果它有自己的智能指针）或标准/常规指针（即 *）或标准库智能指针（即 shared_ptr）。

Some concepts that should help you understanding this would be the [lifetime of C++ objects](http://msdn.microsoft.com/en-us/library/hh438473.aspx), [deterministic destruction](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Determinism) (vs. waiting for a garbage collector to kick in), [reference counting](http://en.wikipedia.org/wiki/Reference_counting), [stack/static vs. heap/dynamic allocation of objects](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap#79936).

# ravendb - RavenDb：通过相关实体中的属性进行查询

> ID：14269425
> 
> 赞同：0
> 
> 时间：2013-01-10T23:53:51.630
> 
> 标签：ravendb

要么是我有心理障碍，要么不是那么简单。

我有 2 节课，类似这样：

```
public class House
{
    public string Id { get; set; }
    public string City { get; set; }
    public string HouseNumber { get; set; }
}

public class Person
{
    public string Id { get; set; }
    public string HouseId { get; set; }
    public string Name { get; set; }
} 
```

现在我想要一个居住在给定城市中的所有人的列表，采用扁平模型（{City, HouseNumber, PersonName}）。

我不知道如何映射它。如果我在 Person 类中有一个 City 会很容易，但我没有，而且它在那里没有意义，imo。

帮助 ？

编辑：

我想出了这个索引，它实际上适用于内存列表，但 Raven 什么也不返回:(

```
 public class PeopleLocations : AbstractMultiMapIndexCreationTask<PeopleLocations.EntryLocation>
    {
        public class PeopleLocation
        {
            public string PersonId { get; set; }
            public string HouseId { get; set; }
            public string City { get; set; }
        }

        public PeopleLocations()
        {
            this.AddMap<House>(venues => venues.Select(x => new
            {
                x.City,
                HouseId = x.Id,
                PersonId = (string)null
            }));

            this.AddMap<Person>(people => people.Select(x => new
            {
                City = (string)null,
                HouseId = x.HouseId,
                PersonId = x.Id
            }));

            this.Reduce = results => results.GroupBy(x => x.HouseId)
                .Select(x => new
                {
                    HouseId = x.Key,
                    People = x.Select(e => e.PersonId),
                    City = x.FirstOrDefault(y => y.City != null).City,
                })
            .SelectMany(x =>
                x.People.Select(person => new PeopleLocation
                {
                    PersonId = person,
                    HouseId = x.HouseId,
                    City = x.City,
                })
            )
            .Select(x => new { PersonId = x.PersonId, x.City, x.HouseId });
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:16:46.593

您可以使用[MultiMap 索引](http://ravendb.net/kb/11/querying-unlike-documents-using-a-multi-map-index)来做到这一点- 但 RavenDB 2.0 中有一个很棒的新功能，称为[索引相关文档](http://ayende.com/blog/160513/ravendb-feature-of-the-year-indexing-related-documents)，它更容易。

```
Map = people => from person in people
                let house = LoadDocument<House>(person.HouseId)
                select new
                {
                    house.City,
                    house.HouseNumber,
                    PersonName = person.Name,
                } 
```

# css - CSS：如何在背景图像上创建线条或点？

> ID：14269427
> 
> 赞同：3
> 
> 时间：2013-01-10T23:53:56.777
> 
> 标签：css, image, background

我不知道效果的名称，但这里有一个例子： [http ://www.uiueux.com/wp/flowfolio/](http://www.uiueux.com/wp/flowfolio/)

如果你仔细看，你会看到一个干净的背景图像 - 因为它看起来像第二个背景 - 带有点。这些点不是图像的一部分。

*   这个效果叫什么名字？

*   如何用点创建这样的背景？

*   这也可以用对角线而不是点来完成吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T23:58:20.563

它只是一个很小的、半透明的背景图像，平铺在背景图像上：

> [http://www.uiueux.com/wp/flowfolio/wp-content/themes/flowfolio/img/bg_mask.png](http://www.uiueux.com/wp/flowfolio/wp-content/themes/flowfolio/img/bg_mask.png)

您只需创建一个元素并将其拉伸到您的背景上：

```
#dots {
    position: absolute;

    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    background-image: url('dots.png');
    z-index: 1;
} 
```

确保`z-index`元素的 高于`z-index`背景的 ，但低于`z-index`内容的 。这样，它就不会掩盖您的文字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T23:59:15.650

该站点使用具有透明背景的 div。所以它是页面上的一个背景，另一个背景在它上面重复。

```
<div class="back_mask"></div>

.back_mask {
    z-index: -990;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: url(img/bg_mask.png);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T00:06:48.123

其他人打败了我，但它只是一个位于另一个图像之上的图像。

这是我的图像解决方案

HTML

```
<div class="dots">
  <img src="http://placekitten.com/300/300" />
</div> 
```

CSS

```
.dots {
  position: relative;
  display: inline-block;
}
.dots:after {
  content: "";
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url(http://www.uiueux.com/wp/flowfolio/wp-content/themes/flowfolio/img/bg_mask.png);
} 
```

要使用对角线，只需将图像更改为可以平铺的对角线

# java - 在片段的浏览器中，如何请求将数据从一个片段拉到另一个片段

> ID：14269430
> 
> 赞同：0
> 
> 时间：2013-01-10T23:54:08.850
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我在主机活动“H”中有片段“A、B、C”。

我想单击 C 中的一个按钮，它将从 textviews 或 A 和 B 中的某些内容中提取用户输入的数据。这样当它完成时，我已经收集了放置在片段 A、B 和 C 中的所有数据。

我想这需要某种接口，但我对如何做到这一点有点困惑。

我看到这个例子展示了如何将数据从片段传递到主机，以及从主机到片段，但我不确定如何从一个片段请求信息到另一个片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:01:08.870

在 A 和 B 中创建对主机活动的回调（请参阅[http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)）。

所以当输入数据时，它会被传递给'H'。

然后，当在片段 C 中按下按钮时，它可以从主机活动中提取该数据。

所以基本上，不要在片段之间直接通信，而是从主机活动中推送和拉取变量。（将回调用于“推送”）。

另外，请参阅此链接：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

# r - R中的PCA：prcomp和置信椭圆

> ID：14269435
> 
> 赞同：5
> 
> 时间：2013-01-10T23:54:48.570
> 
> 标签：r, pca

我最近在 R 中使用 prcomp() 函数运行 PCA，现在我需要（客观地）确定我的两个不同组中的哪些样本是异常值，应该从进一步的分析中删除。

我之前看到过 PCA 图，其中置信/方差椭圆（不确定术语）放在样本周围，而将那些被认为是异常值的部分放在外面（例如，让我们说距离集群质心超过 3 个标准偏差）。我将如何在 R 中实现这样的目标？

注意：我看了一点[“汽车”包](http://svitsrv25.epfl.ch/R-doc/library/car/html/Ellipses.html)，但仍然不清楚 data.ellipse 将如何用于 PC1 与 PC2 投影图，例如。感谢任何帮助/相关资源！

谢谢！

编辑：我正在使用的 R 对象和我想用于异常值标记的图之一：

```
countsTable <- read.table('sample.txt', header=T)
transpose.counts.table <- t(countsTable)
input.for.pca <- transpose.counts.table[, colSums(abs(transpose.counts.table)) != 0]
my.prc <- prcomp(input.for.pca, center=T, scale=T)

pdf("PCA_Results_PC1_PC2_prcomp_counts.pdf")
plot(my.prc$x[,1], my.prc$x[,2], type='p', cex=0.0, pch=20, main="PCA: Samples' projection on PC1 and PC2 (raw counts)", xlab="PC1", ylab="PC2")
text(my.prc$x[,1], my.prc$x[,2], labels=rownames(my.prc$x), cex=1.2)
dev.off() 
```

更新了 input.for.pca 对象，其中包含一个分类“类型”列：

```
> dput(input.for.pca)
structure(list(A1BG = c(190L, 125L, 95L, 115L, 483L, 94L, 87L, 
211L, 153L, 135L, 116L, 110L, 75L, 159L, 148L, 159L, 177L, 103L, 
103L, 88L, 112L, 87L, 272L, 100L, 313L, 169L, 130L, 164L, 114L, 
154L, 168L, 197L, 125L, 95L, 118L, 154L, 197L, 203L, 184L, 86L, 
142L, 111L, 140L, 63L), A1BG.AS1 = c(77L, 94L, 53L, 52L, 56L, 
67L, 55L, 112L, 95L, 51L, 28L, 50L, 35L, 87L, 44L, 93L, 44L, 
16L, 21L, 24L, 42L, 43L, 159L, 59L, 125L, 108L, 50L, 68L, 55L, 
81L, 81L, 39L, 64L, 67L, 66L, 57L, 114L, 82L, 51L, 21L, 126L, 
24L, 53L, 3L), A1CF = c(1L, 3L, 3L, 2L, 0L, 0L, 1L, 5L, 15L, 
0L, 1L, 1L, 2L, 1L, 0L, 0L, 3L, 0L, 2L, 1L, 0L, 1L, 2L, 0L, 0L, 
1L, 0L, 3L, 2L, 0L, 0L, 6L, 1L, 0L, 0L, 0L, 5L, 1L, 4L, 0L, 2L, 
2L, 2L, 0L), A2LD1 = c(94L, 51L, 52L, 57L, 64L, 40L, 48L, 61L, 
83L, 53L, 49L, 31L, 40L, 66L, 50L, 43L, 54L, 14L, 73L, 58L, 50L, 
36L, 132L, 88L, 96L, 73L, 47L, 73L, 100L, 49L, 40L, 54L, 34L, 
34L, 45L, 56L, 77L, 66L, 90L, 62L, 67L, 47L, 80L, 9L), A2M = c(4407L, 
4755L, 1739L, 2049L, 3219L, 2598L, 2531L, 3894L, 2067L, 2703L, 
3776L, 774L, 3129L, 2924L, 1997L, 5803L, 3147L, 5472L, 9608L, 
3315L, 6164L, 1250L, 5911L, 4688L, 2775L, 4561L, 7165L, 3605L, 
8228L, 4835L, 7124L, 4689L, 5306L, 3643L, 3190L, 3290L, 4932L, 
1990L, 9610L, 7476L, 4533L, 4035L, 3275L, 1326L), A2ML1 = c(195L, 
207L, 63L, 291L, 24L, 126L, 168L, 251L, 39L, 145L, 213L, 126L, 
179L, 169L, 141L, 272L, 185L, 115L, 588L, 156L, 111L, 45L, 301L, 
182L, 155L, 146L, 91L, 160L, 155L, 73L, 44L, 103L, 182L, 71L, 
164L, 405L, 245L, 165L, 162L, 317L, 188L, 153L, 228L, 11L), A4GALT = c(191L, 
86L, 64L, 200L, 39L, 118L, 106L, 64L, 11L, 40L, 144L, 53L, 134L, 
101L, 138L, 138L, 214L, 138L, 406L, 145L, 497L, 72L, 473L, 86L, 
41L, 213L, 172L, 77L, 657L, 73L, 123L, 126L, 106L, 44L, 125L, 
106L, 56L, 114L, 756L, 328L, 151L, 210L, 213L, 42L), A4GNT = c(3L, 
3L, 0L, 5L, 7L, 1L, 0L, 2L, 4L, 3L, 0L, 0L, 0L, 2L, 2L, 2L, 3L, 
0L, 1L, 0L, 1L, 2L, 2L, 5L, 4L, 4L, 1L, 1L, 2L, 1L, 1L, 0L, 2L, 
2L, 3L, 3L, 5L, 2L, 3L, 2L, 0L, 0L, 1L, 0L), AA06 = c(0L, 0L, 
0L, 2L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 1L, 0L, 
0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 1L, 
0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L), AAA1 = c(1L, 5L, 5L, 
4L, 0L, 1L, 5L, 0L, 0L, 1L, 0L, 2L, 1L, 12L, 1L, 5L, 6L, 0L, 
3L, 2L, 0L, 0L, 14L, 2L, 3L, 0L, 3L, 4L, 0L, 7L, 3L, 4L, 0L, 
1L, 4L, 1L, 8L, 8L, 1L, 2L, 4L, 2L, 1L, 1L), AAAS = c(829L, 1042L, 
844L, 805L, 1700L, 953L, 809L, 1052L, 1266L, 781L, 618L, 929L, 
699L, 992L, 1001L, 1423L, 845L, 1054L, 808L, 711L, 938L, 756L, 
1384L, 944L, 1689L, 1052L, 703L, 890L, 1293L, 727L, 804L, 1227L, 
668L, 794L, 835L, 877L, 1514L, 1287L, 1435L, 941L, 1115L, 868L, 
923L, 288L), AACS = c(2350L, 1953L, 1884L, 1702L, 421L, 1530L, 
1435L, 3619L, 815L, 1320L, 859L, 1708L, 1096L, 2124L, 1029L, 
1930L, 1241L, 724L, 867L, 893L, 1797L, 447L, 4854L, 1670L, 2675L, 
2471L, 1874L, 1620L, 2515L, 3156L, 2079L, 1345L, 1684L, 1615L, 
1650L, 1386L, 3470L, 1958L, 2278L, 1076L, 3459L, 1115L, 1369L, 
121L), AACSP1 = c(19L, 6L, 11L, 13L, 1L, 11L, 13L, 27L, 5L, 12L, 
4L, 7L, 4L, 6L, 5L, 18L, 17L, 0L, 7L, 6L, 4L, 1L, 19L, 16L, 30L, 
11L, 12L, 20L, 11L, 10L, 11L, 3L, 4L, 10L, 16L, 4L, 8L, 7L, 10L, 
5L, 18L, 6L, 5L, 0L), AADAC = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 1L, 0L, 0L, 1L, 0L, 0L, 0L, 2L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 
0L, 2L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 1L, 
0L, 1L, 0L, 0L), AADACL2 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L), AADACL3 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 2L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L), AADACL4 = c(0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 1L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 3L, 0L, 
0L, 0L, 1L, 0L), AADAT = c(387L, 416L, 297L, 392L, 682L, 422L, 
287L, 704L, 50L, 373L, 306L, 234L, 225L, 340L, 220L, 443L, 387L, 
324L, 304L, 261L, 259L, 181L, 801L, 428L, 925L, 498L, 270L, 524L, 
654L, 472L, 334L, 395L, 414L, 440L, 318L, 306L, 645L, 418L, 350L, 
277L, 468L, 302L, 298L, 48L), AAGAB = c(1235L, 1231L, 1026L, 
981L, 477L, 877L, 808L, 2217L, 764L, 914L, 670L, 974L, 538L, 
1362L, 492L, 1078L, 764L, 297L, 582L, 615L, 923L, 307L, 3055L, 
1195L, 1673L, 1673L, 1070L, 1052L, 1761L, 2198L, 1221L, 813L, 
1050L, 997L, 865L, 930L, 2065L, 1190L, 1243L, 578L, 1931L, 664L, 
874L, 75L), AAK1 = c(6457L, 6538L, 4706L, 4917L, 1252L, 4055L, 
4063L, 11627L, 9127L, 3604L, 2439L, 4221L, 3968L, 5065L, 2450L, 
5690L, 3065L, 1082L, 2756L, 2886L, 3763L, 1360L, 15237L, 4771L, 
7881L, 8349L, 5177L, 4888L, 6532L, 7856L, 5373L, 3487L, 4885L, 
4461L, 3893L, 4152L, 9055L, 4656L, 4501L, 2598L, 8079L, 3187L, 
3655L, 337L), AAMP = c(2282L, 2585L, 2113L, 2197L, 2226L, 1776L, 
2097L, 3614L, 2494L, 2215L, 1707L, 2109L, 1740L, 2620L, 1703L, 
2357L, 1965L, 1697L, 1724L, 1623L, 2299L, 1109L, 5555L, 2550L, 
4239L, 3149L, 2127L, 2487L, 3966L, 2817L, 2043L, 1967L, 2092L, 
2031L, 2123L, 2661L, 4203L, 2884L, 3224L, 1678L, 3876L, 1963L, 
2362L, 473L), AANAT = c(33L, 51L, 14L, 26L, 23L, 12L, 36L, 14L, 
27L, 24L, 30L, 17L, 11L, 45L, 31L, 28L, 23L, 67L, 77L, 26L, 44L, 
17L, 86L, 70L, 16L, 39L, 10L, 27L, 20L, 22L, 23L, 20L, 10L, 12L, 
18L, 28L, 41L, 40L, 85L, 40L, 48L, 30L, 46L, 8L), AARS = c(6383L, 
9377L, 6772L, 8134L, 5605L, 4734L, 5902L, 13757L, 6832L, 6566L, 
4009L, 5377L, 7209L, 7749L, 4105L, 6969L, 5120L, 5484L, 5486L, 
4935L, 6604L, 3151L, 24172L, 7615L, 12786L, 12676L, 7009L, 8208L, 
11328L, 11550L, 7054L, 4789L, 6547L, 6686L, 6109L, 6456L, 14576L, 
8317L, 8057L, 4626L, 13162L, 5801L, 6090L, 1498L), AARS2 = c(1032L, 
858L, 687L, 735L, 527L, 655L, 641L, 1480L, 1713L, 753L, 561L, 
541L, 459L, 819L, 462L, 867L, 605L, 404L, 571L, 497L, 637L, 343L, 
1761L, 1082L, 1379L, 815L, 841L, 844L, 1150L, 1121L, 973L, 665L, 
696L, 672L, 824L, 511L, 1313L, 861L, 998L, 626L, 1258L, 555L, 
623L, 115L), AARSD1 = c(918L, 1218L, 793L, 877L, 573L, 867L, 
916L, 2030L, 1198L, 1015L, 715L, 909L, 437L, 1245L, 566L, 1083L, 
985L, 325L, 584L, 621L, 871L, 353L, 2033L, 887L, 1412L, 1205L, 
1143L, 1037L, 1592L, 1413L, 1183L, 1216L, 1121L, 888L, 1021L, 
846L, 2189L, 1182L, 1412L, 656L, 1708L, 797L, 988L, 80L), type = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("control", 
"diseased"), class = "factor")), .Names = c("A1BG", "A1BG.AS1", 
"A1CF", "A2LD1", "A2M", "A2ML1", "A4GALT", "A4GNT", "AA06", "AAA1", 
"AAAS", "AACS", "AACSP1", "AADAC", "AADACL2", "AADACL3", "AADACL4", 
"AADAT", "AAGAB", "AAK1", "AAMP", "AANAT", "AARS", "AARS2", "AARSD1", 
"type"), row.names = c("C_2", "C_4", "C_6", "C_8", "C_9", "C_10", 
"C_14", "C_15", "C_18", "C_21", "C_29", "P_3", "P_6", "P_13", 
"P_15", "P_18", "P_19", "P_21", "P_22", "P_29", "P_31", "C_3", 
"C_5", "C_11", "C_12", "C_13", "C_16", "C_17", "C_19", "C_20", 
"C_22", "C_23", "C_24", "C_25", "C_26", "P_14", "P_16", "P_20", 
"P_23", "P_26", "P_27", "P_28", "P_30", "P_33"), class = "data.frame") 
```

感谢 DWin 的输入，我查看了 FactoMineR 包，它能够绘制出我所询问的置信椭圆类型。这是使用的代码：

```
res.pca <- PCA(input.for.pca, scale.unit=T, ncp=5, quali.sup = 26, graph = F)
concat = cbind.data.frame(input.for.pca[,26], res.pca$ind$coord)
ellipse.coord = coord.ellipse(concat, level.conf = 0.99999, bary=T)
plot.PCA(res.pca, ellipse = ellipse.coord, axes=c(1, 2), choix="ind", habillage=26) 
```

您可能会注意到 coord.ellipse 函数的 level.conf 选项。通过将此选项从默认的 0.95 更改，我能够增加椭圆的大小。

我发现[此链接](http://factominer.free.fr/classical-methods/principal-components-analysis.html)有助于了解如何使用 FactoMineR。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T01:52:38.623

在没有数据可以使用的情况下，我可以建议查看 FactoMineR 包，该包提供带有可选椭圆的某种 PCA 图：plot.PCA“绘制主成分分析 (PCA) 图：。将“椭圆”参数设置为一个非 NULL 值应该是：“在个人周围画椭圆，并使用”的结果`coord.ellipse`。

使用我处理您的数据可以获得与您的通话`FactoMiner::PCA`结果相同的图。`prcomp`

```
require(FactoMineR)
PCAres <-PCA(input.for.pca)  # draws two plots as a side-effect 
```

我无法在绘图例程中使用其内置参数获取数据省略号。在其帮助页面上检查该例程的示例，我相信这是因为它需要一个因子类别标识符来标记组中的成员资格，以便组件值可以是围绕组质心绘制的标签和椭圆。

# python - 在 python 中编写 if else 的更优雅的方式

> ID：14269446
> 
> 赞同：0
> 
> 时间：2013-01-10T23:56:01.707
> 
> 标签：python, coding-style

例如，如果我有代码：

```
class Example ():

    def a(self):
        return 'Buy'

    def b(self):
        if (self.a() == 'Buy'):
            return 'BUY SET'
        elif (self.a() == 'Sell'):
            return 'SELL SET''

o = Example()
value = o.b()   
print value 
```

有没有更优雅/pythonic的方式我可以编写函数 b(self) ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T23:59:34.013

首先，去掉不必要的括号；它们只会使您的代码结构更难遵循：

```
def b(self):
    if self.a() == 'Buy':
        return 'BUY SET'
    elif self.a() == 'Sell':
        return 'SELL SET'' 
```

然后删除`'`导致它引发的流浪`SyntaxError`：

```
def b(self):
    if self.a() == 'Buy':
        return 'BUY SET'
    elif self.a() == 'Sell':
        return 'SELL SET' 
```

接下来，不要调用`self.a()`两次。虽然在这里它是无害的，但在实际代码中，它很有可能会产生副作用——或者至少需要足够长的时间以至于你在浪费时间：

```
def b(self):
    order = self.a()
    if order == 'Buy':
        return 'BUY SET'
    elif order == 'Sell':
        return 'SELL SET' 
```

接下来，如果`a`返回除`'Buy'`or之外的任何内容`'Sell'`，您将返回`None`。这真的是你想要的吗？你如何解决这个问题取决于你真正想要什么。例如，您可能想要：

```
def b(self):
    order = self.a()
    if order == 'Buy':
        return 'BUY SET'
    elif order == 'Sell':
        return 'SELL SET'
    else:
        raise ValueError("Unexpected order type '{}'".format(order)) 
```

或许：

```
def b(self):
    order = self.a()
    if order == 'Buy':
        return 'BUY SET'
    else: # We know there's nothing else it could be
        return 'SELL SET' 
```

如果您有两种以上的可能性，则可能值得将事物放入 a`dict`而不是使用`if`/`elif`链或编写动态代码。例子：

```
def b(self):
    return {'Buy': 'BUY SET', 'Sell': 'SELL SET', 'Trade': 'TRADE SET',
            'Barter': 'BARTER SET', 'Steal': 'STEAL SET'}[self.a()]

def b(self):
    return '{} SET'.format(order.upper()) 
```

请注意，这些对上一个问题做出了不同的选择。该`dict`版本将引发`KeyError`未知值；该`format`版本只会将任何内容视为有效。

此外，如果您使用 a `dict`，您可能希望将其移到`b`函数之外——例如，将其设为类属性（这也鼓励您给它起一个好听的名称）。

但是，对于只有两个选择，我认为您所拥有的要清楚得多。

最后，给函数起一个无意义的单字母名称并不是很pythonic；最好做这样的事情：

```
def get_formatted_order(self):
    order = self.calculate_order()
    if order == 'Buy':
        return 'BUY SET'
    elif order == 'Sell':
        return 'SELL SET'' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T23:57:36.273

您可以使用字典：

```
def b(self):
    return {'Buy': "BUY SET", 'Sell': "SELL SET"}.get(self.a()) 
```

或者写得更清楚：

```
def b(self):
    d = {"Buy": "BUY SET",
        "Sell": "SELL SET"}
    return d.get(self.a()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T00:11:02.117

尽管 abarnet 的答案绝对是最有说服力的，但对于给定的代码，这也可以：

```
def b(self):
    return self.a().upper() + " SET" 
```

但这做出了很多不是很普遍的假设。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T00:00:02.023

为什么不直接缓存呢？

```
def b(self):
    a = self.a()

    if a == 'Buy':
        return 'BUY SET'
    elif a == 'Sell':
        return 'SELL SET'' 
```

我也会给你的变量起清晰的名字。`a`并且`b`根本不是描述性的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T18:32:16.257

[在abarnert](https://stackoverflow.com/users/908494/abarnert)在[这里](https://stackoverflow.com/a/14269483/438069)提出所有很酷的建议之后，您可以尝试另一种缩短代码的技巧。

```
def get_formatted_order(self):
    order = self.calculate_order()        
    return 'BUY SET' if order == 'Buy' else 'SELL SET' 
```

这是三元运算符的pythonic形式。如果订单评估为“购买”，函数将返回“购买设置”。在相反的情况下，它将返回“SELL SET”

# fullcalendar - jQuery FullCalendar：如何在单击下一个和上一个按钮时加载事件

> ID：14269451
> 
> 赞同：0
> 
> 时间：2013-01-10T23:56:42.170
> 
> 标签：fullcalendar

我有一个页面显示未来 30 天的事件。当用户单击月视图中的下一个或当用户继续单击周/日视图中的下一个按钮超过 30 天时，如何刷新日历？

如果我在周视图中第五次单击下一步按钮，我在日历上看不到任何事件，因为我只有 4 周的事件。

我想通过 ajax 从服务器中提取数据并刷新日历。

这是我当前的代码：

在页面加载时，我这样称呼：

```
GetFutureMeetingsForTimeSpan(1, 30);

function GetFutureMeetingsForTimeSpan(startDaysFromNow, endDaysFromNow) {            
            var obMtgs;
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function () {
                if (xmlHttp.readyState == 4) {
                    if (xmlHttp.status == '200') {
                        try {                            
                            var arrMtgs = new Array();
                            var meetingObjectArray = JSON.parse(xmlHttp.responseText);
                            var startTime = '', endTime = '';
                            var yr1 = 0, mo1 = 0, day1 = 0, hr1 = 0, min1 = 0;
                            var yr2 = 0, mo2 = 0, day2 = 0, hr2 = 0, min2 = 0;
                            for (var i = 0; i < meetingObjectArray.length; i++) {                                
                                obMtgs = new Object();
                                obMtgs.id = meetingObjectArray[i].ID;        
                                obMtgs.title = meetingObjectArray[i].ExchangeResource.Subject;

                                obMtgs.start = new Date(yr1, mo1, day1, hr1, min1, 0);                                
                                obMtgs.end = new Date(yr2, mo2, day2, hr2, min2, 0);

                                arrMtgs.push(obMtgs);
                            }

                            //populate the calendar with events array                            
                            $('#calendar').fullCalendar({
                                defaultView: 'agendaWeek',
                                theme: true,
                                header: {
                                    left: 'prev,next today',
                                    center: 'title',
                                    right: 'month,agendaWeek,agendaDay'
                                },
                                disableDragging: true,
                                disableResizing: true,
                                editable: true,
                                events: arrMtgs,                                
                                eventRender: function (event,element){ 
                                    //code removed
                                },
                                eventClick: function (calEvent, jsEvent, view) {
                                    //code removed
                                },
                                viewDisplay: function (view) {
                                    //code removed
                                }
                            });
                        }
                        catch (e) {
                            alert('decode failed! msg=' + e.message);
                        }
                    }
                    else {
                        alert('Failed to get meetings! status=' + xmlHttp.status);
                    }
                }
            }

            //load events from server via webservice using ajax
            var url = server_part + "/Meeting/Schedule/Future/TimeSpan/";
            url += "?startDaysFromNow=" + startDaysFromNow;
            url += "&endDaysFromNow=" + endDaysFromNow;
            url += "&APIKey=asjdasjdhhksajhd";

            xmlHttp.open("GET", url, false);
            xmlHttp.setRequestHeader("Accept", "application/json");
            xmlHttp.send();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:44:28.607

发生是因为您正在使用 preset 初始化 cal `events:arrMtgs`。相反，让 FC 请求它需要的事件，例如在示例文档中：[events fun](http://arshaw.com/fullcalendar/docs/event_data/events_function/)或[json feed](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)。此外，您可以使用 jQuery 执行更简单的 ajax 请求`$.ajax`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:10:10.010

在我看来，您在这里从错误的角度处理问题。与其让您的`GetFutureMeetingsForTimeSpan`函数在每次调用它时重新初始化您的 FC 实例，不如*只初始化一次*FC ，然后让 FC 调用该`GetFutureMeetingsForTimeSpan`函数（或它的某个变体）。

所以我建议你在 FC 实例第一次可见时创建它，并在必要时使用 events 函数加载事件：

```
 $('#calendar').fullCalendar({
            defaultView: 'agendaWeek',
            theme: true,
            header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
            },
            disableDragging: true,
            disableResizing: true,
            editable: true,
            events: function(start, end, callback) {
                    // populate arrMtgs as you're used to
                    // using the start and end parameters,
                    // or see MaxD's answer for alternatives
                    callback(arrMtgs);
            },
            eventRender: function (event,element){ 
                    //code removed
            },
            eventClick: function (calEvent, jsEvent, view) {
                    //code removed
            },
            viewDisplay: function (view) {
                    //code removed
            }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T09:13:26.193

我和你有同样的问题，日历的性能很差。直到我意识到以下内容：fullcalendar 从其返回事件的 ajax URL，默认情况下将 start 和 end 参数与 ajax 请求相关联。这些开始和结束代表每个日历页面上显示的事件的第一个日期和最后一个日期（可以通过“下一个”和“上一个”的箭头进行更改）。因此，在您返回所有事件的事件代码中，您可以通过此开始和结束来限制它们。您的控制器上的代码可以是：

```
 Event.where(:start_at => DateTime.strptime(params[:start],'%s')..DateTime.strptime(params[:end],'%s')) 
```

# php - 检查结果是否为整数/varchar/等。在 SQL 执行期间？

> ID：14269452
> 
> 赞同：0
> 
> 时间：2013-01-10T23:56:42.780
> 
> 标签：php, mysql, sql, sql-server, comparison

我在不同的服务器上使用`MySQL`和`MSSQL`，所以我需要学习如何以两种方式做到这一点。我有一个类型为`varchar`. 通常它会用`integers`and填充`floats`，但不时会用“See Notes”或类似的文字填充。我有一个查询生成器，因此用户可以将结果与数字进行比较。我可以将用户的输入从`integers`to转换为`floats`SQL 句柄，这在测试时很好`integers`，`floats,`但只要它达到`varchar`.

更复杂的是，用户输入在查询构建器中，所以我不能只运行 2 个单独的查询来分解事情。所以我首先需要知道的是 SQL 是如何处理查询的。在 PHP 中，如果你有一个 if 语句，并且第一个条件失败，它将永远不会继续第二个条件。例如：`if($_POST && $_POST['result'])`代码不会尝试读取`$_POST`因为`$_POST`不存在的结果。

如果它的工作方式相同，那么我需要一些方法来测试结果是否为整数。如果是，那么它可以继续运行脚本。但我也不知道我该怎么做。像这样的东西：

```
SELECT *
FROM my_table
WHERE ISNUMERIC(result) = 1 AND result > 4.5 
```

因此，如果 result 包含 a `varchar`，它将在到达之前终止，`result > 4.5`这样我就不会破坏我的陈述并得到错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:31:24.340

如果您使用的是 SQL Server，则上面的查询可以正常工作。不过，您可以尝试以下替代方法：

```
SELECT *
FROM my_table 
WHERE result > 
  CASE WHEN ISNUMERIC(result) = 1
  THEN '5'
  ELSE result
  END 
```

这是两者的[SQL Fiddle](http://sqlfiddle.com/#!3/a7427/12)。

如果您使用的是 MySQL，那么这似乎可行：

```
SELECT *
FROM my_table 
WHERE result > 5 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!2/a7427/3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:17:13.423

我会再看一下桌子的设计。通常，如果您大部分时间都需要存储数字，则将其存储在数字字段中。如果您需要存储文本，请将其存储在文本字段中。如果您需要同时存储两者，请考虑使用 2 个字段并使它们可以为空（然后用户只需要输入 1 个字段）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:08:34.437

我发现拥有一个函数非常有用，该函数在给定文本输入的情况下将返回一个`INT`，如果无法解析该值，则返回 NULL 。然后你可以简单地查询

```
WHERE dbo.ParseInteger(result) >= 3 
```

就我而言，我只对整数感兴趣，但我相信你可以扩展它以适应浮点数。这可能比您需要的更复杂；例如，如果你不关心指数，你可以扔掉 70%。我对 MySQL 太生疏了，无法提供翻译。最后，请注意，我假设的是英文风格的数字，您可能有不同的组和小数分隔符。

```
CREATE FUNCTION dbo.ParseInteger(@Input VARCHAR(100)) RETURNS BIGINT WITH SCHEMABINDING
AS BEGIN
    SET @Input = dbo.Trim(@Input)  -- If you're not worried about linebreaks or other odd chars, LTRIM(RTRIM(@Input)) will be fine
    IF ISNUMERIC(@Input) = 0 RETURN NULL
    IF @Input IN ('.', '+', '-', ',') RETURN NULL
    SET @Input = REPLACE(@Input, ',', '')  -- Strip commas

    DECLARE @DecimalPos INT = CHARINDEX('.', @Input)
    DECLARE @ExpPos     INT = CHARINDEX('E', @Input)
    DECLARE @IntValue   BIGINT
    IF @DecimalPos = 0 AND @ExpPos = 0
        BEGIN
        -- There's no decimal and no exponent, so we can easily cast this bog-standard integer
        SET @IntValue = CAST(@Input AS BIGINT)
        END
    ELSE IF @DecimalPos > 0 AND @ExpPos = 0
        BEGIN
        -- There's a decimal point but no exponent; we can cast the integer part, and then nudge it if necessary to round off the tenths place
        SET @IntValue = CAST(SUBSTRING(@Input, 1, @DecimalPos - 1) AS BIGINT)
        IF SUBSTRING(@Input, @DecimalPos + 1, 1) BETWEEN '5' AND '9'
            IF @IntValue < 0
                SET @IntValue -= 1
            ELSE
                SET @IntValue += 1
        END
    ELSE
        BEGIN
        -- There's an exponent, and probably a decimal; this will be relatively complicated
        IF @DecimalPos = 0
            BEGIN
            -- There's no decimal; insert one, just so we have consistency downstream
            SET @Input      = LEFT(@Input, @ExpPos - 1) + '.0E' + RIGHT(@Input, LEN(@Input) - @ExpPos)
            SET @DecimalPos = @ExpPos
            SET @ExpPos    += 2
            END

        DECLARE @Magnitude INT = CASE WHEN LEFT(@Input, 1) = '-' THEN @DecimalPos - 2 ELSE @DecimalPos - 1 END  -- For normalized scientific notation, this will always be one, but we can't expect that
        DECLARE @Exponent  INT = CAST(RIGHT(@Input, LEN(@Input) - @ExpPos) AS INT)
        IF @Exponent > 18 RETURN NULL  -- BIGINT can handle values up to 2^63, or 9.2E18

        SET @Input = REPLACE(SUBSTRING(@Input, 1, @ExpPos - 1), '.', '')

        DECLARE @MagAdjustment INT = @Magnitude + @Exponent - CASE WHEN LEFT(@Input, 1) = '-' THEN LEN(@Input) - 1 ELSE LEN(@Input) END

        IF @MagAdjustment > 0
            BEGIN
            SET @Input += REPLICATE('0', @MagAdjustment)
            END
        ELSE IF @MagAdjustment < 0
            BEGIN
            WHILE -@MagAdjustment > @Magnitude AND LEN(@Input) > 1
                BEGIN
                SET @MagAdjustment += 1
                SET @Input          = SUBSTRING(@Input, 1, LEN(@Input) - 1)
                END

                IF -@MagAdjustment > @Magnitude SET @Input = '0'
            ELSE IF -@MagAdjustment = @Magnitude SET @Input = CASE WHEN LEFT(@Input, 1) BETWEEN '5' AND '9' THEN '1' WHEN LEFT(@Input, 2) BETWEEN '-5' AND '-9' THEN '-1' ELSE '0' END
            ELSE                                 SET @Input = SUBSTRING(@Input, 1, CASE WHEN LEFT(@Input, 1) = '-' THEN 1 ELSE 0 END + LEN(@Input) + @MagAdjustment)
            END

        SET @IntValue = CAST(@Input AS BIGINT)
        END

    RETURN @IntValue
END 
```

# iphone - 截断 NSString 以适应大小？

> ID：14269453
> 
> 赞同：6
> 
> 时间：2013-01-10T23:56:49.923
> 
> 标签：iphone, ios, objective-c, nsstring

> **可能重复：**
> [在 Objective C 中测量字符串的像素宽度](https://stackoverflow.com/questions/1435544/measuring-the-pixel-width-of-a-string-in-objective-c)

我使用 [string drawInRect:] 方法，并希望将字符串截断为适合该大小的最大长度。这并不像找出每行有多少个字符那么简单，因为每个字母的宽度都不同。我想找到字符串不再可见的原因是我可以在字符串的末尾添加省略号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:07:15.910

查看[NSString Additions Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSString_AppKitAdditions/Reference/Reference.html)`drawInRect:withAttributes:`中的文档。在“常量”下，您将找到一个自动执行所需操作的选项：

> `NSStringDrawingTruncatesLastVisibleLine` 如果文本不适合指定的边界，则截断省略号字符并将其添加到最后一个可见行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:08:40.323

如果@Mundi 给出的解决方案不够，或者您需要知道文本适合多少，您可以使用。

```
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size 
```

在一个循环中减小文本的大小，直到它适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:06:05.480

你想在哪里使用这个字符串？如果它在 UILabel 中，则可以使用 NSLineBreakMode = NSLineBreakByTruncatingTail。

# javascript - Javascript 中对象或基元的类型转换是否更快？

> ID：14269454
> 
> 赞同：7
> 
> 时间：2013-01-10T23:56:51.050
> 
> 标签：javascript

鉴于这两个例子：

```
var myNumber = 10; //primitive 
```

和

```
var myNumber = new Number(10); //object 
```

**发生类型转换时哪个执行得更快？**

```
var myString = myNumber.toString(); //convert to string 
```

我假设对象类型转换更快，因为原语被转换为对象以响应表达式，然后再次返回原语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:08:46.340

类型转换的原始数字是最快的。

[http://jsperf.com/num-type-conversion](http://jsperf.com/num-type-conversion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T01:08:37.423

我将总结优秀的评论来回答。感谢 theSystem、RocketHazmat、pst、bfavaretto 和 Pointy！

> 哪个性能更快？我假设...</p>

你只能测试，测试，测试。[jsPerf](http://jsperf.com/)是一个不错的选择。[测试表明](http://jsperf.com/object-versus-primitive-number-conversion-to-string)，与空字符串连接的原始值是迄今为止最快的方法 - 函数调用成本很高。如果变量没有被缓存而是每次都实例化（[由 Geuis 测试](http://jsperf.com/num-type-conversion)），则尤其如此。

> 对象类型转换更快，因为原语被转换为对象以响应表达式，然后再次返回原语

这只是 EcmaScript 规范描述的行为（[第 8.7.1](http://es5.github.com/#x8.7.1)节，[第 9.8 节](http://es5.github.com/#x9.8)），而不是当前引擎所做的。它们不会产生任何对象开销，而是仅使用内部原始值。不要相信规范中的步骤数！

但是，不[调用](http://es5.github.com/#x11.2.3)`Number.prototype.toString`函数（第[15.7.4.2 节](http://es5.github.com/#x15.7.4.2)）——即使它是本机的——而是`ToString`通过`addition`运算符直接调用（[第 11.6.1 节第 7 节](http://es5.github.com/#x11.6.1)）会更快。

一般来说，不要试图[过早地优化](http://en.wikipedia.org/wiki/Premature_optimization)，但只有当你真的遇到性能问题时（你几乎不会从这段代码中）。因此，为了简单起见，使用原始值，`.toString()`或者`+""`取决于您发现更容易阅读的内容。

# c++ - c++中最难发现的错误

> ID：14269459
> 
> 赞同：29
> 
> 时间：2013-01-10T23:57:29.860
> 
> 标签：c++, runtime-error

我很清楚，可能不会有“C++ 中最难发现的错误”，但我仍然对其他人能想到/可能已经遇到的东西感兴趣。

这个问题的想法是在与朋友的讨论中产生的。我们同意，通过故意在您提交的源代码中包含错误来破坏 cpp 项目必须相当简单......但我们能想到的最好的事情是使用未初始化的变量（导致运行时的随机分段错误） . 我敢肯定有更好的方法...？！

错误代码的通缉特征：

*   乍一看必须像有效代码
*   不能停止编译代码（太明显了）
*   如果可能，错误应该看起来可能只是一个错误（应该找到它）
*   错误必须严重到足以阻止软件发布（例如随机段错误、代码逻辑故障等）

尽管如此，虽然它必须引人注目，但在提交代码后它不应该是显而易见的......好吧，你明白了。

别担心，我们的考虑纯粹是理论上的（我们不打算破坏任何项目）。我们只是认为这是一个很好的思想实验，可以与他人分享:-)

简而言之：

> 破坏在差异提交（如 git）中可能被忽视但最终会阻止软件发布的源代码的最微妙方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T23:59:44.473

经典的：

```
#define if while
#define else 
```

埋在一些标题中。

* * *

干扰@WhozCraig 的评论，还：

```
#define true (!!(__LINE__ % 10)) 
```

每十行一次`true`不会如此`true`，但编译后的程序的行为将保持一致......当源代码发生变化时会发生莫名其妙的变化。

沿着这条线：

```
#define for if(__LINE__ % 10) for

#define NULL (!(__LINE__ % 10)) 
```

* * *

或者怎么样：

```
#define virtual 
```

这将导致严重的问题——但只有在使用动态分派时，这可能会使其检测变得更加成问题。

* * *

以类似的方式：

```
#define dynamic_cast static_cast 
```

* * *

```
// Fail early, fail often
#define throw std::abort(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-11T00:04:44.057

不太明显：

```
if (foo =! foobar) 
```

我们可以添加一个技巧来摆脱编译器警告：

```
 if ( (i =! 3) && (j==1)) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-11T01:05:08.603

我曾经被耽搁了一个月的大部分时间，因为在发布版本中，对我们的`CArray`（由 Microsoft 作为 MFC 的一部分）进行排序会随机出现段错误，但调试版本很好。我们用 a 替换它，`std::vector`问题就解决了。直到几个月后，有人告诉我`CArray` *不使用元素赋值运算符*，而是*使用 memcpy* ( [source](https://stackoverflow.com/q/2928369/845092) )。这显然会使用非平凡的赋值运算符破坏任何包含的对象，但它是一个标准容器，因此每个人都认为它是安全的。因此，如果在几个关键位置替换`std::vector`为...`CArray`

作为说明，微软表示现在不要使用 MFC 容器，而是使用 STL 容器。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-11T00:00:34.010

我想说，到目前为止，对我来说最令人沮丧的事情是使用`=`而不是`==`. 例如：

```
while(foo = bar) {} 
```

代替

```
while(foo == bar) {} 
```

从本质上讲，任何导致代码运行不正常而不是崩溃的事情都会让我把头撞到墙上。

荣誉奖：

*   使用错误的数学运算符`-` `+` `/` `*`
*   类似于`=`vs `==`，误认为`&`for`&&`或`|`for `||`。
*   过早的优化`vector<bool>`（如果你都喜欢“什么？”，请[阅读此处）](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=98)
*   有两个或多个具有相同名称的类并使用错误的类。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-11T00:48:44.497

[也许这个问题](https://stackoverflow.com/questions/14264458/strlen-the-length-of-the-string-is-sometimes-increased-by-1)是无耻的偷窃，但我认为它非常适合这一类。

如果您有任何长度相同的硬编码字节字符串（例如，您可能在网络中使用的东西），您可以借此机会伪装它：

```
const unsigned char someBytes[] = "text\0abc123"; 
```

可以，用一个小开关，变成：

```
const unsigned char someBytes[] = "text\0123abc"; 
```

不同之处在于第一个有 12 个字符，而第二个只有 10 个字符，因为中间是八进制文字。如果出现这种情况，这无疑会加重追查。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-11T00:33:49.210

还没有成为它的受害者，但是隐式转换可能会导致一些不好的事情。看这个：

```
class Foo {
public:
    Foo(int a, OtherClass* b = NULL);
}; 
```

现在（没有显式关键字）每个通过值/常量引用期望 Foo 的方法也将接受一个 int ！！！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-11T01:05:45.860

```
struct
{ int foo
char bar
}

while (foobar != 10);
{
     //do something here
 } 
```

1）忘记放一个；在结构之后或放一个；在 WHILE 循环之后

```
randn() //user created function
rand()  //library function 
```

2) 命名与预定义函数具有相似名称的函数

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-11T01:19:48.350

并不是真正的错误，但是当我发现发布版本比调试版本慢时，我会在随机源文件的某个地方执行此操作。:)

```
#ifdef NDEBUG
namespace {
    struct foo {
        foo() { sleep(rand() % 4); }
    } bar;
}
#endif 
```

# jquery - iphone图像隐藏的媒体查询

> ID：14269462
> 
> 赞同：1
> 
> 时间：2013-01-10T23:57:38.737
> 
> 标签：jquery, css, twitter-bootstrap, media-queries, css-transitions

我正在使用媒体查询来隐藏桌面图像并将其替换为 iphone 的另一个图像，以在 iphone 设备中重现更好的清晰度

但是当我不显示时，它不会使图像隐藏

[http://jsfiddle.net/Ww6PN/](http://jsfiddle.net/Ww6PN/)

在下面提供我的代码

```
@media (max-width: 767px) {
          body {
          /*
            padding-right: 20px;
            padding-left: 20px;
            */
            padding-top: 0px;
          }
          .da-dots{
            width: 308px;
          }
          .navbar-fixed-top,
          .navbar-fixed-bottom,
          .navbar-static-top {
            margin-right: -20px;
            margin-left: -20px;
          }
          .container-fluid {
            padding: 0;
          }
          .dl-horizontal dt {
            float: none;
            width: auto;
            clear: none;
            text-align: left;
          }
          .dl-horizontal dd {
            margin-left: 0;
          }
          .container {
            width: auto;

          }
          .marketing{
            margin-top: 0px;
            margin-bottom: 0px;
            font-size: 12px;
          }
          .footer{
            font-size: 12px;

          }
          #iphoneSolutionContent{

            margin-left: 0px;
          }
          .desktopSliderImage{
            display: none;
            border: 1px solid red;
          }

        <div class="container">

                        <div id="da-slider" class="da-slider" style="">
                          <div class="da-slide" style="">
                            <h2>
                              <img class="desktopSliderImage" src="http://www.defie.co/docs/examples/frontpage_rotate1A.jpg" alt="desktopImage" />
                              <img class="iphoneSliderImage" src="http://www.defie.co/designerImages/banner1_iphone.jpg" alt="iphoneImage" />
                            </h2>
                            <div class="da-img">
                              <img class="desktopSliderImage" src="http://www.defie.co/docs/examples/frontpage_rotate2A.jpg" alt="desktopImage" />
                              <img class="iphoneSliderImage" src="http://www.defie.co/designerImages/banner2_iphone.jpg" alt="iphoneImage" />
                            </div>
                          </div>
                          <div class="da-slide" style="">
                            <h2><img src="http://www.defie.co/docs/examples/frontpage_rotate2A.jpg" alt="image01" /></h2>
                            <div class="da-img"><img src="http://www.defie.co/docs/examples/frontpage_rotate2B.jpg" alt="image01" /></div>
                          </div>
                          <div class="da-slide" style="">
                            <h2><img src="http://www.defie.co/docs/examples/frontpage_rotate3A.jpg" alt="image01" /></h2>
                            <div class="da-img"><img src="http://www.defie.co/docs/examples/frontpage_rotate3B.jpg" alt="image01" /></div>
                          </div>
                          <nav class="da-arrows" style="width: 100%">
                            <span class="da-arrows-prev"></span>
                            <span class="da-arrows-next"></span>
                          </nav>
                        </div>
                          </div>

      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:38:53.230

这可能是你想要的：http:
[//jsfiddle.net/panchroma/6vFfy/](http://jsfiddle.net/panchroma/6vFfy/)

如果您查看第一张幻灯片，如果您的窗口高于 767 像素，则会显示桌面图像（带有红色边框）。对于较窄的屏幕，它会显示 iPhone 图像（带有蓝色边框）

CSS

```
/* for window widths > 767px
show desktop image and hide iphone image */

img.desktopSliderImage{
border:solid red 1px;
}
img.iphoneSliderImage{
border:solid blue 1px;
display:none !important;
}

/* for window widths 767px and less
hide desktop image and show iphone image */

@media (max-width: 767px) {
img.desktopSliderImage{
border:solid red 1px;
display:none !important;
}

img.iphoneSliderImage{
border:solid blue 1px;
display:inherit !important;
}

} 
```

# java - LingPipe 字典大小

> ID：14269464
> 
> 赞同：0
> 
> 时间：2013-01-10T23:58:12.233
> 
> 标签：java, nlp

我创建了一个基于 LingPipe DictionaryChunker 示例的测试程序。我正在从文件中将字典值读入 MapDictionary。当文件超过 100,000 个条目时，解析器开始返回垃圾：

10k 行（tail -10000 nameList.txt > shortNameList.txt）

TEXT=现在是所有好人来援助他们的国家的时候了佐伊罗杰斯现在是所有好人来帮助他们的国家的时候了

大块头。所有匹配=false 区分大小写=false 短语=|Zoe Rogers| 开始=69 结束=79 类型= PLAYER 分数=1.0

100k 行 (tail -100000 nameList.txt > shortNameList.txt)

TEXT=现在是所有好人来援助他们的国家的时候了佐伊罗杰斯现在是所有好人来帮助他们的国家的时候了

大块头。所有匹配=假区分大小写=假短语=|现在是所有好人的时候了| start=0 end=32 type= PLAYER score=1.0 词组=|援国| start=33 end=68 type= PLAYER score=1.0 短语=|Zoe Rogers 现在是时候了| 开始=69 结束=103 类型= PLAYER 分数=1.0 词组=|好人来相助| 开始=104 结束=134 类型= 玩家分数=1.0

创建 MapDictionary 是否有更好的选择？

我已经调整了 VM 上的内存限制，但这似乎没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:38:53.110

事实证明，允许 MapDictionary 中的任何值为 null 会破坏分块器。删除任何具有空白值的行后，分块器工作正常。

# iphone - iOS 6 - Facebook 的“喜欢”按钮

> ID：14269466
> 
> 赞同：4
> 
> 时间：2013-01-10T23:58:12.980
> 
> 标签：iphone, ios, facebook, ios6, facebook-like

我刚刚在我的应用程序中实现了 Facebook SDK 3.1.1，目的是能够分享图片，以及在应用程序内“喜欢”我们的产品页面。我似乎找不到关于如何编写按钮以自动“喜欢”特定 Facebook 页面的简单解释或教程。这只能在 UIWebView 中完成吗？谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T02:48:58.747

请参阅下面的链接，这可能会对您的工作有所帮助：

[RayWenderlich：如何在您的 iPhone 应用程序中发布到用户的墙、上传照片以及添加“赞”按钮](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:20:18.140

很不幸的是，不行。从 iOS 应用程序中喜欢 Facebook 页面的唯一方法是加载`UIWebView`导航到该页面的页面，然后用户可以喜欢它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T22:56:52.183

通过 Vishal 的回答，我来到了这个链接，它可以构造一个 iFrame 'Like' 按钮，该按钮可以添加到 UIWebView 中。

[像盒子一样构造](http://developers.facebook.com/docs/reference/plugins/like-box/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T10:20:56.360

现在您可以使用以下代码使用 FBlike 按钮，但它需要下载最新的 sdk，它是 beta 版本:(

这是代码：

```
[FBSettings enableBetaFeature:FBBetaFeaturesLikeButton];
[FBSettings enablePlatformCompatibility:NO];
FBLikeControl *like = [[FBLikeControl alloc] init];
like.objectID = @"http://shareitexampleapp.parseapp.com/photo1/";
like.likeControlHorizontalAlignment=FBLikeControlHorizontalAlignmentRight;
like.likeControlStyle=FBLikeControlStyleBoxCount;
[self.view addSubview like]; 
```

# knockout.js - 使用 kendo UI tabstrip 的 dataContentUrl 时的 Knockout Js 数据绑定

> ID：14269475
> 
> 赞同：2
> 
> 时间：2013-01-10T23:58:52.720
> 
> 标签：knockout.js, kendo-ui

我正在尝试使用 Kendo UI 选项卡创建一组将插入到 html 页面上的部分 html 文档。每个部分 html 文档将包含将出现在每个选项卡中的控件。在这些部分 html 文档中，我尝试使用 Knockout JS 将控件绑定到视图模型对象。

当我加载页面时，控件似乎没有绑定到视图模型。当我将部分 html 文档中的标签复制到主页时，绑定工作。

是否可以使用 kendo ui 标签条的动态加载功能加载这些控件？

这是我正在使用的一些示例代码：

主页：

```
 <!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <script src="../Scripts/jquery-1.8.3.min.js"></script>
    <script src="../Scripts/knockout-2.2.0.js"></script>
    <script src="../Scripts/KendoUI/kendo.all.min.js"></script>
    <script src="../Scripts/ViewModels/EndorsementViewModel.js" defer="defer"></script>

    <link href="../Stylesheets/KendoUI/kendo.common.min.css" rel="stylesheet" />
    <link href="../Stylesheets/KendoUI/kendo.metro.min.css" rel="stylesheet" />
</head>
<body>

        <div>
            <div id="tabStrip">

            </div>
        </div>

</body>
</html>
<script>
    $(document).ready(function () {
        InitialKendoControls();

    });

    function InitialKendoControls() {
        InitialKendoTabStrip();
    }

    function InitialKendoTabStrip() {

        var tabstrip = $("#tabStrip").kendoTabStrip(
            {
                dataTextField: "text",
                dataContentField: "content",
                dataUrlField: "url",
                dataContentUrlField: "contentUrl",
                dataSource:
                [

                    {
                        text: "TestTab",
                        contentUrl: "../TestEndorsement/TestTab.html"
                    }
                ]
            }
            ).data("kendoTabStrip");

    }
</script> 
```

部分 HTML：

```
<div>
    <span>Enter something</span><input data-bind="value: testValue" /><br />
    <button data-bind="click: testClick">Click Me</button>
</div> 
```

查看型号：

```
function EndorsementViewModel()
{
    this.testValue = ko.observable("Test Value");

    this.testClick = function () { alert(this.testValue()); };
}
ko.applyBindings(new EndorsementViewModel()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:45:45.487

使用此**[contentLoad](http://docs.kendoui.com/api/web/tabstrip#contentload)**事件来执行应用绑定的逻辑（当前您使用文档读取事件）。如果该 Html 部分仍未加载，则绑定肯定无法正常工作。

# c++ - Windows API，__declspec(thread) vs CreateThread？

> ID：14269479
> 
> 赞同：2
> 
> 时间：2013-01-10T23:59:12.530
> 
> 标签：c++, c, multithreading, winapi

我一直在尝试通过 Windows API 了解线程。`__declspec( thread )`我从[msdn](http://msdn.microsoft.com/en-us/library/9w1sdazb%28v=vs.80%29.aspx)遇到过，但我不明白那和`CreateThread()`.

听起来您只在对象上创建线程？这是否意味着如果我编写了一个方法并`while(1);`通过该对象在我的主类中运行该方法，它会在一个单独的线程中执行此操作？我想我的问题是`__declspec ( thread )`用于什么，我应该使用它`CreateThread`吗？

对不起，如果我的问题令人困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T00:03:25.197

它们之间的区别是巨大的：

*   `__declspec( thread )`是一个*存储修饰符*，指定声明的变量具有本地存储。这意味着每个线程都拥有自己的这个值的副本。是全局变量的线程版本。

    *C++11*通过名称引入了*线程存储修饰符*`thread_local`。它是一个*存储修饰符*，例如`static`.

*   `CreateThread()`是一个函数，它将创建一个新线程并开始运行您指定的某些函数。

    *C++11*还引入了一个完整的线程 API，您可以使用它来编写可在（几乎）任何平台上运行的线程感知代码。您可以搜索`std::thread`并`std::async`...

所以基本上它们是两个完全不同的东西，用于完全不同的目的。如果要使用*Windows API*创建新线程，请使用`CreateThread`. 如果您希望变量使用*Windows API*`thread_local`进行存储，请使用. 如果您可以使用*C++11*，则应该忘记*Windows API*的微妙之处，而改用*标准 API*。*`__declspec( thread )`*

# delphi - Firemonkey StringGrid 选项卡和箭头键不起作用

> ID：14269485
> 
> 赞同：1
> 
> 时间：2013-01-10T23:59:38.600
> 
> 标签：delphi, firemonkey, stringgrid

我想用 FM StringGrid 做一些工作，一切正常，但我遇到的问题是箭头键 + tab 键，它们不能按预期工作，例如，如果我按下 tab 键，整个网格就会失去焦点，或者如果我按其中一个箭头键（上、下、左、右）它什么也不做，在 VCL StringGid goTab 选项必须设置为 true 才能使用 tab 键，这在 FM 中不是这种情况，有人遇到同样的问题吗？或者对如何解决它有任何想法？

# java - 为 `mvn exec:java` 设置 Java 属性

> ID：14269492
> 
> 赞同：4
> 
> 时间：2013-01-11T00:00:02.720
> 
> 标签：java, maven

Maven 的`exec:java`目标运行在与 Maven 本身相同的 JVM 中。

我希望能够将一些属性传递给`java`二进制文件（特别是，`-ea -Djava.util.logging.config.file=logging.properties`），但如何做到这一点并不明显。

注意：我想将属性传递给 JVM，而不是传递给应用程序的参数。理想情况下，我希望能够在 中指定这些`pom.xml`，但我意识到由于 Maven 的启动，这可能不太可能。作为一种解决方法，`exec:exec`设置所有类路径等的目标就像我调用的`exec:java`那样会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:35:57.267

从[使用页面](http://mojo.codehaus.org/exec-maven-plugin/usage.html)：

```
 <configuration>
      <mainClass>com.example.Main</mainClass>
      <arguments>
        <argument>argument1</argument>
        ...
      </arguments>
      <systemProperties>
        <systemProperty>
          <key>java.util.logging.config.file</key>
          <value>logging.properties</value>
        </systemProperty>
        ...
      </systemProperties>
    </configuration> 
```

必须在环境变量 MAVEN_OPTS 中设置额外的 JVM 选项

```
MAVEN_OPTS=-ea 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T19:05:10.527

使用命令行：

```
call mvn exec:java -Dexec.classpathScope="test" -Dexec.mainClass="com.mycompany.MyFirstTest" -DPROPERTY_FILE="MyPropertyFile" 
```

运行你的程序。

有一个管理器类，负责读取属性。

```
String loggingValue = MyPropertyManager.LOGGING.getPropertyValue(); 
```

然后，编写 MyPropertyManager 类以从属性文件加载属性。

```
public enum MyPropertyManager {
    LOGGING, OTHERPROPERTY, OTHER;

    public String getPropertyValue() {
        String propertyFile = System.getProperty("PROPERTY_FILE");
        // ... load property file
        Properties loadedProperties = .....
        return properties.get(LOGGING.toString());
    }
} 
```

改进代码，使属性文件只加载一次。

# ios - 在 iOS 5 上，UIWebView 报告滚动视图的内容大小错误

> ID：14269494
> 
> 赞同：3
> 
> 时间：2013-01-11T00:00:12.157
> 
> 标签：ios, ios5

我已经尝试了一堆“解决方案”，但现在我正试图弄清楚 UIWebView 的滚动视图的内容大小。它目前总是返回 1024，这是设备的宽度。这没有意义，因为我正在查询高度并且视图是纵向的。

以下代码将高度报告为 1024.00000

```
-(void)webViewDidFinishLoad:(UIWebView *)webView {

  float sourcesWebViewHeight = [[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.scrollHeight"] floatValue];

  NSLog(@"%f", sourcesWebViewHeight);

} 
```

但我只有几行文字。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T01:30:19.077

我将分解最终为我解决这个问题的原因。

我不得不将我的内容包装在其中。

```
<html><head><meta name=\"viewport\" content=\"initial-scale=1, user-scalable=no, width=device-width\" /></head><body>%@</body></html> 
```

执行以下视图确实加载。

```
-(void)webViewDidFinishLoad:(UIWebView *)webView {

  [self layoutSubviews];

  webView.scrollView.scrollEnabled = NO;    // Property available in iOS 5.0 and later
  CGRect frame = webView.frame;

  frame.size.height = 1;        // Set the height to a small one.

  webView.frame = frame;       // Set webView's Frame, forcing the Layout of its embedded scrollView with current Frame's constraints (Width set above).

  frame.size.height = webView.scrollView.contentSize.height;  // Get the corresponding height from the webView's embedded scrollView.

  webView.frame = frame;

} 
```

和

```
-(void) layoutSubviews {
  [super layoutSubviews];
  [body stringByEvaluatingJavaScriptFromString:
   [NSString stringWithFormat:
    @"document.querySelector('meta[name=viewport]').setAttribute('content', 'width=%d;', false); ",
    (int)body.frame.size.width]];
} 
```

最后，我的 webview 做了所有正确的事情来适应内容。

# java - 在java中查找天数差异

> ID：14269495
> 
> 赞同：1
> 
> 时间：2013-01-11T00:00:12.560
> 
> 标签：java, date

在咨询了几个论坛后，我最终使用下面的代码来找到天差。但是，我发现逻辑有问题（可能是我的过目不忘？）。我看到 11 到 14 天和 11 到 15 天之间的差异是相同的。这怎么可能？

```
Date createdDate = new Date((2013 + 1900), (1 + 1), 11);
Date expirationDate = new Date((2013 + 1900), (1 + 1), 11);
for (int i = 11; i < 20; i++) {
    expirationDate.setDate(i);

    System.out.println("11 to " + i + " = "
            + (int) (expirationDate.getTime() - createdDate.getTime())
            / (1000 * 60 * 60 * 24));
} 
```

输出是：

```
11 to 11 = 0
11 to 12 = 1
11 to 13 = 2
11 to 14 = 3
11 to 15 = 3
11 to 16 = 4
11 to 17 = 5
11 to 18 = 6
11 to 19 = 7 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T00:11:56.050

使用[Joda Time](http://joda-time.sourceforge.net/)的[`Days#daysBetween()`](http://joda-time.sourceforge.net/apidocs/org/joda/time/Days.html#daysBetween%28org.joda.time.ReadableInstant,%20org.joda.time.ReadableInstant%29). 没有更好的办法。

```
DateMidnight createdDate = new DateMidnight(2013, 2, 11);

for (int i = 11; i < 20; i++) {

    DateMidnight expirationDate = new DateMidnight(2013, 2, i);
    int dayDifference = Days.daysBetween(createdDate, expirationDate);

    System.out.println("11 to " + i + " = " + dayDifference);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T17:03:23.260

`1000 * 60 * 60 * 24`找到日差的方法是错误的。您可以使用[JodaTime](http://joda-time.sourceforge.net/)，但有一个纯 Java 解决方案。

让我们有两个初始化变量

```
Calendar firstDay = ...;
Calendar secondDay = ...; 
```

和

```
firstDay.before(lastDay) 
```

是`true`。

跑

```
int firstDayNo = firstDay.get(Calendar.DAY_OF_YEAR);
int secondDayNo = secondDay.get(Calendar.DAY_OF_YEAR);
int dayDifference, yearMultiplier;

dayDifference = -firstDayNo;
yearMultiplier = secondDay.get(Calendar.YEAR) - firstDay.get(Calendar.YEAR);
while (yearMultiplier > 0) {
    dayDifference += firstDay.getActualMaximum(Calendar.DAY_OF_YEAR);
    firstDay.add(Calendar.YEAR, 1);
    yearMultiplier--;
}
dayDifference += secondDayNo;

return dayDifference; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T00:04:24.463

[Date(year,day, month)](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Date.html#Date%28int,%20int,%20int%29)构造函数已弃用。我会简单地使用日历方法来获得两天之间的差异：

```
Calendar cal1=Calendar.getInstance();
Calendar cal2=Calendar.getInstance();
cal1.setTime(createdDate);
cal2.setTime(expirationDate);
System.out.println(cal2.get(Calendar.DAY_OF_MONTH )-cal1.get(Calendar.DAY_OF_MONTH ) ); 
```

**编辑：**

```
Calendar cal1 = Calendar.getInstance();
cal1.set(2013, 2, 11);
Calendar cal2 = Calendar.getInstance();
cal2.set(2013, 2, 11);
for (int i = 11; i < 20; i++) {
 cal2.set(Calendar.DATE, i);
    System.out.println("11 to " + i + " = " + (cal2.get(Calendar.DAY_OF_MONTH) -cal1.get(Calendar.DAY_OF_MONTH)));
} 
```

输出：

```
11 to 11 = 0
11 to 12 = 1
11 to 13 = 2
11 to 14 = 3
11 to 15 = 4
11 to 16 = 5
11 to 17 = 6
11 to 18 = 7
11 to 19 = 8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T01:48:16.533

至少在当前版本中，您的代码会打印正确的结果

```
11 to 11 = 0
11 to 12 = 1
11 to 13 = 2
11 to 14 = 3
11 to 15 = 4
11 to 16 = 5
11 to 17 = 6
11 to 18 = 7
11 to 19 = 8 
```

然而`new Date((2013 + 1900), (1 + 1), 11);`是不正确的，事实上它是`5813-03-01`。应该`new Date((2013 - 1900), (1 - 1), 11);`看到 Date(int year, int month, int day) API

```
Parameters:
year - the year minus 1900.
month - the month between 0-11.
date - the day of the month between 1-31. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T00:20:19.793

使用浮动，我看到了问题。使用时间戳似乎不是查找两个日期之间天数差异的好方法。

11 到 11 = 0.0
11 到 12 = 1.0
11 到 13 = 2.0
11 到 14 = 3.0
11 到 15 = 3.9583333
11 到 16 = 4.9583335
11 到 17 = 5.9583335
11 到 18 = 6.9583335
11 到 3581

展望未来，我找到了确定日期差异的最确凿方法

```
Calendar cre_calendar = new GregorianCalendar((2013), (1), 11);
        Calendar exp_calendar = new GregorianCalendar((2013), (1), 19);
        Calendar maxDays = new GregorianCalendar(((2013)), (12), 31);

        if (exp_calendar.get(Calendar.DAY_OF_YEAR) < cre_calendar
                .get(Calendar.DAY_OF_YEAR)) {
            System.out
                    .println((exp_calendar.get(Calendar.DAY_OF_YEAR) + maxDays
                            .get(Calendar.DAY_OF_YEAR))
                            - cre_calendar.get(Calendar.DAY_OF_YEAR));
        } else {
            System.out.println((exp_calendar.get(Calendar.DAY_OF_YEAR))
                    - cre_calendar.get(Calendar.DAY_OF_YEAR));
        } 
```

# ios - iOS - 在异常处理程序中发送 webrequest 失败

> ID：14269500
> 
> 赞同：3
> 
> 时间：2013-01-11T00:00:49.657
> 
> 标签：ios, objective-c, exception-handling, try-catch, http-request

我的应用程序中引发了异常，我正在尝试在这里处理它。目的是调用我们的服务器，但没有成功。我已经在 try/catch 语句中隔离了服务器调用，以查看是否引发了另一个异常，但正如您从我的日志中看到的那样，没有引发其他异常。是否可以从异常处理程序发送 Web 请求，或者进程是否因某种原因被中断？

```
void uncaughtExceptionHandler(NSException *exception) {
    [Flurry logError:@"Uncaught" message:@"Crash!" exception:exception];
    NSLog(@"Exception: %@", exception);
    NSArray *stack = [exception callStackReturnAddresses];
    NSLog(@"Stack trace: %@", stack);
    NSString *stackTrace = [stack description];
    @try {
        NSString *domain = @"blabla.mydomain.com";
        NSURL *url2 = [NSURL URLWithString: [NSString stringWithFormat: @"http://%@/error/SendExceptionDetailsToStaff", domain]];
        ASIFormDataRequest *request2 = [ASIFormDataRequest requestWithURL:url2];
        [request2 setPostValue: stackTrace forKey:@"stackTrace"];
        [request2 setPostValue: [[UIDevice currentDevice] model] forKey:@"device"];
        [request2 setPostValue: [[UIDevice currentDevice] systemVersion] forKey:@"osVersion"];
        [request2 startAsynchronous];     
    }
    @catch (NSException * e) {
        NSLog(@" Request Exception: %@", e);
    }
    NSLog(@"yooooo"); 
}

log:
2013-01-10 15:16:20.761 myApp[4653:c07] Stack trace: (0x28fa012 0x1b6ce7e 0x2982fb1 0x8c601 0xc1f753 0xc1fa7b 0xc2d590 0xc355bd 0xc35eab 0xc35fc9 0xc36055 0xd3b3ab 0xb8c92d 0x1b806b0 0x7409fc0 0x73fe33c 0x73fe150 0x737c0bc 0x737d227 0x737d8e2 0x28c2afe 0x28c2a3d 0x28a07c2 0x289ff44 0x289fe1b 0x2b327e3 0x2b32668 0xb3c65c 0x216d 0x20a5)
2013-01-10 15:16:20.761 myApp[4653:c07] yooooo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:11:14.123

最终解决了我自己的问题。问题是异步 Web 请求在完成之前会被中断。使其同步并保持在同一个线程上可以解决问题。

```
[request2 startSynchronous]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:11:19.357

尝试设置异常断点（此处的说明：http: [//developer.apple.com/library/ios/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html](http://developer.apple.com/library/ios/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html)） - 您应该得到更具描述性的调试消息。

# java - 如何使用 Mockito 模拟外部方法调用

> ID：14269502
> 
> 赞同：0
> 
> 时间：2013-01-11T00:01:04.523
> 
> 标签：java, junit, testng, mockito, powermock

paymentBusinessService 类在 BusinessService 类依赖注入中可用。应用程序 sc = Applicaition.applicationValidation(this.deal); 假设是
Application sc = BusinessService.applicationValidation(this.deal);

```
package com.core.business.service.dp.fulfillment;
import com.core.business.service.dp.payment.PaymentBusinessService;

public class BusinessServiceImpl implements BusinessService { // Actual Impl Class

private PaymentBusinessService paymentBusinessService = PluginSystem.INSTANCE.getPluginInjector().getInstance(PaymentBusinessService.class);  

@Transactional( rollbackOn = Throwable.class)
public Application  applicationValidation (final Deal deal) throws BasePersistenceException {
    Application application = (Application) ApplicationDTOFactory.eINSTANCE.createApplication();
    //External Call we want to Mock
    String report = paymentBusinessService.checkForCreditCardReport(deal.getId());  
    if (report != null) {          
        application.settingSomething(true);
    }
    return application;
} 
```

}

```
@Test(enabled = true)// Test Class
public void testReCalculatePrepaids() throws Exception {
PaymentBusinessService paymentBusinessService = mock(PaymentBusinessService.class);
//Mocking External Call
when(paymentBusinessService.checkForCreditCardReport(this.deal.getId())).thenReturn(new String("Decline by only Me"));
String report = paymentBusinessService.checkForCreditCardReport(this.deal.getId());
//Calling Impl Class whose one external call is mocked
Application sc = BusinessService.applicationValidation(this.deal); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:40:12.860

感谢 Aurand 给了我将模拟对象注入应用程序类的想法。使用 @InjectMock 可以正常工作。

```
@MOCK
PaymentBusinessService paymentBusinessService;

@InjectMock
Application application = PluginSystem.INSTANCE.getPluginInjector().getInstance(Application.class);  
@Test(enabled = true)// Test Class
public void testReCalculatePrepaids() throws Exception {
//Mocking External Call
when(paymentBusinessService.checkForCreditCardReport(this.deal.getId())).thenReturn(new       String("Decline by only Me"));
String report = paymentBusinessService.checkForCreditCardReport(this.deal.getId());
//Calling Impl Class whose one external call is mocked
Application sc = BusinessService.applicationValidation(this.deal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:32:58.670

尚不清楚您的 Application 类如何引用 PaymentBusinessService。我猜你的应用程序类有一个对 PaymentBusinessService 的静态引用。在这种情况下，您必须确保引用指向您正在创建的模拟。

**更新**

鉴于您的 PaymentBusinessService 是一个未在构造函数中初始化的私有字段，您需要将模拟对象反射性地注入到您的 Application 类中。

# mysql - MySQL 复制：基于行？

> ID：14269504
> 
> 赞同：0
> 
> 时间：2013-01-11T00:01:10.880
> 
> 标签：mysql, database-replication

假设我有两个数据中心，其中托管了 MySQL 数据库的两个实例。为了有高可用性，我可以在这两个实例之间实现主从复制，这样两个数据库总是有最新的信息。但是主-主复制有它自己的一系列问题，我试图避免它。就我而言，我知道数据的以下特征 -

如果用户表有两条记录，键为 U1 和 U2，则 U1 将仅在一个且唯一的实例中更新。因此，对给定记录的写入仅在一个实例中完成。我需要做的就是将此记录复制到其他实例，以便以后我想将另一个实例设为主实例，它具有最新的记录。此外，有可能在某个时间点，实例 1 是 U1 的主设备，而在另一个时间，实例 2 是 U1 的主设备。

我认为这是真正的主主复制下的一步，其中 U1 的写入可以发生在两个数据库实例中的任何一个中。

鉴于此，有没有更好的方法来实现这种场景的复制。我想避免主-主复制，因为将来我们可能有超过 2 个数据中心，并且实现多主复制不是直截了当的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:09:26.480

您正在有效地描述分片[数据库](http://en.wikipedia.org/wiki/Shard_(database_architecture))，这是可能的但不推荐，因为它涉及对您的应用程序的大量更改。[Stack Overflow 的另一篇文章](https://stackoverflow.com/questions/5541421/mysql-sharding-approaches)中概述了这些缺点。

据说 MySQL Cluster CGE 软件可以进行[透明分片](http://www.mysql.com/products/cluster/scalability.html)，但它会产生额外的许可费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:04:54.230

听起来你想要一个主从设置，然后有能力在某个时候将一个从属提升为主控，并使其他服务器成为新主控的从属。

这是可能的并记录在案，请参阅：[http ://dev.mysql.com/doc/refman/5.0/en/replication-solutions-switch.html](http://dev.mysql.com/doc/refman/5.0/en/replication-solutions-switch.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:26:06.093

如果您的意思是 MySQL 异步主-主复制不能很好地扩展到超过 2 个节点，那么这是正确的 - 但您的问题的其余大部分都非常混乱。

虽然可能有一些看起来像表但在 2 个数据库服务器之间有效分区的东西，这样两者都具有 100% 的读取访问权限，但每个节点只能写入数据库中的特定行，但这是完全可能的，但在实践中这将很难管理。它肯定比 master-master asynch 复杂得多 - 并不简单。

多主同步复制与异步复制有一组非常不同的优点和缺点。恕我直言，它在复杂性方面与 MMA 相当——如果您认为它复杂得多，那么您至少无法理解其中一项技术。

也许您所需要的只是联合表和视图。或仅本地和共享数据库的混合。

在你开始提出正确的问题之前，你还有一段路要走；与将数据资产的未来押在此处的答案上相比，您可能会更好地为一些优质的咨询服务付费。

# android - 在谷歌的IAB中，我可以在调用launchpurchaseflow方法之前得到产品标题和价格吗？

> ID：14269507
> 
> 赞同：6
> 
> 时间：2013-01-11T00:01:47.663
> 
> 标签：android, in-app-purchase, in-app-billing

我有一个程序，它设置一个警告对话框，询问“你想为“价格”购买“标题”吗？

我知道 Google IAB 库有一个 getSku() 调用，但这仅在购买该项目的结果后可用。有没有办法在购买之前获得这两个变量？谢谢。

*我可能已经看到了一个查询一组 sku 的项目，其中列出了所有项目，但我可能错了*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T14:44:17.760

在 IABHelper 中使用此方法：

```
 List<String> moreSkus = new ArrayList<String>();
  moreSkus.add("sku1");
  moreSkus.add("sku2");              

  mHelper.queryInventoryAsync(true, moreSkus, mGotInventoryListener); 
```

我测试它工作正常，您可以将 inapp 或子类型 sku 添加到列表中，并返回 invenroty 中的所有详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:27:39.117

找到了解决方案。首先，您将需要 sku/产品 ID。

```
public void getProductDetails(String sku) throws RemoteException, JSONException {
    logDebug("getProductDetails - " + sku);

    ArrayList<String>  skuList = new ArrayList<>();
    // Add the specific sku
    skuList.add(sku);

    if (sku != null) {
         Bundle querySkus = new Bundle();
         querySkus.putStringArrayList(GET_SKU_DETAILS_ITEM_LIST, skuList);
         Bundle skuDetails = mService.getSkuDetails(3, mContext.getPackageName(),  ITEM_TYPE_INAPP, querySkus);
         ArrayList<String> responseList = skuDetails.getStringArrayList(RESPONSE_GET_SKU_DETAILS_LIST);

         for (String thisResponse : responseList) {
             SkuDetails d = new SkuDetails(thisResponse);
             logDebug("Looking at sku details: " + d);
             purchaseTitle = d.getTitle(); // these are set as variables so you can call them
             purchasePrice = d.getPrice(); // whenever you want
         }
    }
} 
```

# opencv - 从圆角矩形检测角点

> ID：14269509
> 
> 赞同：9
> 
> 时间：2013-01-11T00:02:03.450
> 
> 标签：opencv

当我使用opencv检测带圆角的矩形时，我需要解决一个问题。基本上我使用的是相同的代码示例 squares.c：

```
cvFindContours( gray, storage, &contours, sizeof(CvContour), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE );
while( contours )
{
    double area=fabs(cvContourArea(contours, CV_WHOLE_SEQ));
    if(area < minimum_area || area > maximum_area) {
        contours = contours->h_next;
        continue;
    }               
    result = cvApproxPoly( contours, sizeof(CvContour), storage,
        CV_POLY_APPROX_DP, cvContourPerimeter(contours)*0.05, 0 );
    if( result->total == 4 &&
        fabs(cvContourArea(result,CV_WHOLE_SEQ)) > 1000 &&
        cvCheckContourConvexity(result) )
        { 
```

使用此代码，我通常可以检测到图像，但我需要调整图像的透视，为此我需要检测图像的角，如何做到这一点并且图像具有圆角？问题的发生是因为我不需要在点之间检测到点，例如，我创建了下图，其中黑线代表现有代码检测到的点，而蓝点是我需要的点？

![在此处输入图像描述](../Images/b68f3dbd3383ee861b5e73c9d618ecda.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T20:40:12.200

在 OpenCV 术语中，首先使用`FindContours`with`RETR_EXTERNAL`和找到黑色矩形`CHAIN_APPROX_SIMPLE`。`minAreaRect`现在您通过使用找到的点找到这个圆角矩形的最小边界框`FindContours`。要获取此边界框的角，请使用`BoxPoints`返回 (center, (width, height), rotation angle)的函数`minAreaRect`。现在你有了你所追求的红线的四个角。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-08T08:14:57.600

我遇到了这个问题，其他答案都没有帮助。在我的情况下，我必须透视正确的数据矩阵，这些数据矩阵在右上角有一个缺失的角，在哈里斯检测上看起来是圆形的。

为了解决这个问题，以任何你喜欢的方式检测形状，然后得到轮廓的凸包。拥有它后，您将必须提取 4 条最长的线（不存在 opencv 函数，您必须制作自己的提取函数）然后您只需获取 4 条线的交点（也是您自己的函数）并将其转换回透视校正矩阵。

如果您的介质可能弯曲或您的检测可能有缺陷，您可能还需要从轮廓中删除相对于相邻点具有高角度的点，这可能会在最终点中产生偏差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:20:01.427

尝试通过 cvResize 命令将图像缩放到更小的尺寸并将该代码应用于它。从理论上讲，减小图像大小应该会锐化图像角并以损失精度为代价来减少您的问题。

# c++ - setiosflags 参数是否与独立参数相同？

> ID：14269512
> 
> 赞同：2
> 
> 时间：2013-01-11T00:02:43.480
> 
> 标签：c++

我注意到 iomanip 允许您使用 和 等可能性来格式化`left`输出`setioflags(ios::left)`。同样，还有`fixed`和`setiosflags(ios::fixed)`。这只是同一事物的两个名称，还是两个命令之间有任何区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:09:03.347

是的，setiosflags 只是 ios_base::setf 的操纵器版本。我敢打赌，在大多数（如果不是全部）实现中，它只是在流上调用 ios_base::setf。

非参数化操纵器，如 std::left 和 std::fixed 正在做同样的事情，但正在使用它们各自的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:14:19.047

有函数[`std::left`](http://en.cppreference.com/w/cpp/io/manip/left)，可以用作

```
cout << setw(80) << left << 4.13 << endl; 
```

还有 flag [`left`](http://en.cppreference.com/w/cpp/io/ios_base/fmtflags)，可以用于[`setiosflags(ios::left)`](http://en.cppreference.com/w/cpp/io/manip/setiosflags)or[`setf`](http://en.cppreference.com/w/cpp/io/ios_base/setf)

这些只是完成相同格式的不同方法。

# php - 如何使用数据库而不是本地存储 jqgrid 保存网格的状态

> ID：14269524
> 
> 赞同：0
> 
> 时间：2013-01-11T00:03:33.780
> 
> 标签：php, jqgrid, grid

我有一个使用 jqGrid PHP API 和选择列附加组件（显示/隐藏列）创建的网格。我需要添加保存网格状态的功能（在进行任何过滤、更改列顺序或隐藏任何列之后）。

我看过几篇使用 cookie 或 localStore 来保存网格状态的帖子。但是，我希望能够将其保存在数据库中，以便以后在用户下次登录系统时恢复它。

这是我用于网格的 PHP 代码：

```
 require_once JQGRID_PATH."php/jqGrid.php";
    require_once JQGRID_PATH."php/jqGridPdo.php";

    // Connection to the server
    $conn = new PDO(DB_DSN,DB_USER,DB_PASS);

    // Create the jqGrid instance
    $grid = new jqGridRender($conn);

    // Write the SQL Query
    $grid->SelectCommand = 'SELECT timestamp, user_name, action_type FROM audit_log';

    // set the ouput format to json
    $grid->dataType = 'json';

    // Let the grid create the model
    $grid->setColModel();

    // Set the url from where we obtain the data
    $grid->setUrl('audit_log');

    // Set grid caption using the option caption
    $grid->setGridOptions(array(
        "caption"=>"Audit Log Report",
        "height"=>470,
        "width" => 1100,
        "rowNum"=>25,
        "shrinkToFit"=>false,
        "sortname"=>"timestamp",
        "sortorder"=>"desc",
        "rowList"=>array(25,50,100)
    )); 

    $grid->navigator = true;
    $grid->setNavOptions(
        'navigator', array(
            "excel"=>true,
            "add"=>false,
            "edit"=>false,
            "view"=>false,
            "del"=>false,
            "pdf"=>true
        )
    );

    $grid->renderGrid('#grid','#pager', true, null, null, true, true, true); 
```

此外，我看到的使用 localStore 保存网格状态的帖子都是使用 jQuery 而不是 jqGrid PHP Suite 构建的。关于如何使用 jqGrid PHP API 完成此任务的任何想法？

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:07:12.540

如果您的网格选项是一个数组，为什么不直接将该数组序列化并将其保存到与该用户关联的记录中的数据库中呢？

如果你想变得非常花哨，你可以使用方法扩展 jqGridRender 类，例如`persist()`和`load()`将选项持久化到数据库并将它们加载回。

因此，假设您有某种用户对象，也许您会这样做：

```
$grid = new persistingJQGrid($conn); // instantiate your special extended class
$grid->setUser($user);
$grid->load();
... 
```

或坚持时：

```
$grid->persist() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:04:46.393

在[答案](https://stackoverflow.com/a/8436273/315935)中，我展示了如何保存一些代表网格状态的信息，`localStorage`以及如何使用这些信息创建网格。在答案中，您可以找到`saveObjectInLocalStorage`用于`window.localStorage.setItem`将表示状态的对象保存在本地存储中的方法。在您需要将信息保存在数据库中时，您只需替换`window.localStorage.setItem`将`$.ajax`信息发送到服务器的位置。以同样的方式，您可以在网格初始化期间替换`getObjectFromLocalStorage`used*一次*，以使用先前保存的从数据库读取的数据来直接初始化数据。因此该方法可以很容易地修改到任何保持电网状态的地方。

# python - Sublime Text 检测覆盖模式

> ID：14269525
> 
> 赞同：26
> 
> 时间：2013-01-11T00:03:46.120
> 
> 标签：python, sublimetext2

我正在尝试编写一个插件来支持[Sublime](http://www.sublimetext.com/)中的类似 vim 的替换模式。要做到这一点，我需要做几件事：

1.  启用/禁用覆盖模式。（不是`toggle_overwrite`）。
2.  检测是否启用了覆盖模式。

第 2 项更重要，因为我总是可以在必要时检测和切换。

如何检测是否启用了覆盖模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T13:18:10.717

即使问题被标记为“sublimetext2”，我会注意到 Sublime Text 3 确实提供了执行您想要的功能：

```
view.set_overwrite_status(True) # Or False
view.overwrite_status() 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-01-21T08:54:18.727

这种键盘访问需要 ncurses 或 Xwindow 访问应用程序。您应该从 ncurses 添加键盘功能。

# zend-framework2 - 在 Zend Framework 2 中如何显示当前年份？

> ID：14269526
> 
> 赞同：1
> 
> 时间：2013-01-11T00:04:12.933
> 
> 标签：zend-framework2

我正在尝试使用 Zend Framework 2 显示当前年份，我发现的文档并未涵盖如何输出自定义日期格式。

文档可以在这里找到：[https ://packages.zendframework.com/docs/latest/manual/en/modules/zend.i18n.view.helper.date.format.html?highlight=dateformat](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.i18n.view.helper.date.format.html?highlight=dateformat)

如果有人可以为我提供 Zend Framework 2 语法来输出自定义日期/时间格式，我们将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:02:25.773

看看这个[问题](https://stackoverflow.com/questions/12401221/where-do-i-find-date-class-in-zend-framework-2-0)。

在此处复制粘贴答案： Zend_Date 已被删除以支持 PHP 5.3 DateTime API [http://es.php.net/manual/en/book.datetime.php](http://es.php.net/manual/en/book.datetime.php)

在 ZF2 中查看 DateFormat Helper的[源代码](https://github.com/zendframework/zf2/blob/master/library/Zend/I18n/View/Helper/DateFormat.php)似乎是不可能的。基本上只需使用 php 类就足够了。

Zend Framework 1 或 2 并没有封装所有内容。当 php 的某些部分按原样完美时，它不会被替换。

编辑：这对提问者有用：

```
$datetime = new DateTime(null, new DateTimeZone('America/Chicago')); 
echo $datetime->format('Y'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T09:46:08.927

Zend Framework 2 不再提供任何特定的日期对象。相反，它适用于原生 php [DateTime](http://php.net/datetime)。您使用`DateTime`对象，它们可以在帮助程序中使用以转换输出。

您提到的视图助手也是专门针对 i18n 的。每个国家/地区的时间戳格式都不同，所以这就是助手的用途。然而，在美国、英国和中国，2013 年是 2013 年。没有必要为此使用 i18n。

因此，当前年份可以直接使用 with`DateTime`并使用`date()` [格式参数](http://nl1.php.net/manual/en/function.date.php)格式化：

```
$date = new DateTime;

$date->format('o'); // ISO-8601 year, four digits
$date->format('Y'); // Four digits
$date->format('y'); // Two digits 
```

您可能想要使用`Y`或`y`。

# coffeescript - Coffeescript 无与伦比的突出错误

> ID：14269529
> 
> 赞同：60
> 
> 时间：2013-01-11T00:04:24.653
> 
> 标签：coffeescript

`SyntaxError: Unmatched OUTDENT on line 9`当我尝试编译以下咖啡脚本代码时出现错误。我不确定我做错了什么。缩进似乎是正确的，我拥有我想要的一切。

```
row_possibilities = (grid) ->
  for rows in [0..8] by 1
    for columns in [0..8] by 1
      if(Array.isArray(grid[rows][columns])
        for possible_val in grid[rows][columns] by 1
          grid = unique_row_possibility(grid, rows, columns, possible_val)
          if(Array.isArray(grid[rows][columns]) == false)
            break
  return grid 
```

代码应该做的是运行三个 for 循环并在某个条件发生时中断最里面的 for 循环。

在所有 for 循环运行之后。我想返回变量网格。我已经仔细检查了间距，并在 repl.it 上进行了尝试，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-01-11T00:22:43.833

有点难看，但您似乎在第 4 行缺少一个右括号：

```
if(Array.isArray(grid[rows][columns]) 
```

一般来说，对于这个特定的错误，问题几乎总是在于缩进或不平衡的括号或括号/大括号。

# javascript - 有没有办法创建一个加载屏幕，但在它消失之前限制时间？

> ID：14269531
> 
> 赞同：0
> 
> 时间：2013-01-11T00:04:35.667
> 
> 标签：javascript, jquery, loading

我正在尝试创建一个 HTML 加载屏幕，隐藏大量图像，直到它们至少部分加载。

以下代码行当前有效，但由于图像的大小，我需要一种方法来限制浏览器尝试预加载所花费的时间。

```
$(window).load(function(){
    $("#loadingScreen").fadeOut("slow");
    $('#content').fadeIn("slow");
}); 
```

在尝试这样做时，我添加了以下内容：

```
$("#loadingScreen").delay(3000).fadeOut("slow");
$('#content').delay(3000).fadeIn("slow"); 
```

我的理由是浏览器会首先尝试加载所有图像，3 秒后，即使图像没有完全加载，加载屏幕也会消失。这样，当第一次访问该站点时，他或她将在加载屏幕上花费最多 3 秒，而在随后的访问中，他或她将花费更少的时间，因为图像将被缓存到他们的计算机上。

单独地，两组代码都可以工作，但是当我尝试将它们一起使用时，只有第二组代码运行。我究竟做错了什么？谢谢！

标记：

```
<body>
    <div id="loadingScreen">
        <img src="img/loadingIcon.gif">
    </div>

    <div id="content" style="display: none">
        <img src="img/image1.jpg">
        <img src="img/image2.jpg">
        <img src="img/image3.jpg">
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:29:54.883

你有没有尝试过：

```
$("#loadingScreen").delay(3000).fadeOut("slow", function(){
    $('#content').fadeIn("slow");
}); 
```

# attributes - XSD 对属性的限制

> ID：14269541
> 
> 赞同：25
> 
> 时间：2013-01-11T00:05:18.540
> 
> 标签：attributes, xsd, restriction

我想我已经对此进行了很多搜索，但仍然没有成功。

将不胜感激任何帮助。

我正在尝试限制内容为空的元素的属性。“颜色”应该有一个限制，只能容纳 3 位数字或 minLength=3 和 maxLength=3。它不应该有任何内容。

```
<?xml version="1.0" encoding="utf-8"?>
  <items xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation="">
  <product id="" name="">
    <article id="1001">
      <umbrella color="100"/>
      <umbrella color="101"/>
    </article>
    <article id="1002">
      <umbrella color="110"/>
    </article>
  </product>
</items> 
```

编辑：我知道如何对 simpleType 进行 XSD 限制。但我不知道如何将它与一个具有 ComplexType 的实体结合起来。

如果您能提供更详细（或完整）的解决方案，我会很高兴。

顺便说一句，“颜色”不限于 xs:integer。它实际上是一个 xs:string。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-11T00:27:04.750

您可以定义类似于以下内容的属性。此示例使用模式来限制值，但如果更合适，您也可以使用 min 和 max。

```
<xs:attribute name="color">
    <xs:simpleType>
        <xs:restriction base="xs:integer">
            <xs:pattern value="[0-9][0-9][0-9]"/>
        </xs:restriction>
    </xs:simpleType>
</xs:attribute> 
```

然后在您的元素定义中，您只需使用 a`ref`来引用定义的属性：

```
<xs:attribute ref="color"/> 
```

更新（回应OP的评论）：

以下是整个架构的样子：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:attribute name="color">
        <xs:simpleType>
            <xs:restriction base="xs:integer">
                <xs:pattern value="[0-9][0-9][0-9]"/>
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>

    <xs:attribute name="id">
        <xs:simpleType>
            <xs:restriction base="xs:integer">
                <xs:pattern value="[0-9][0-9][0-9][0-9]"/>
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>

    <xs:attribute name="name" type="xs:string"/>

    <xs:complexType name="article_type">
        <xs:attribute ref="color" use="required"/>
    </xs:complexType>

    <xs:element name="article">
        <xs:complexType>
            <xs:choice maxOccurs="unbounded" minOccurs="0">
                <xs:element name="umbrella" type="article_type"/>
            </xs:choice>
            <xs:attribute ref="id" use="required"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="product">
        <xs:complexType>
            <xs:choice maxOccurs="unbounded" minOccurs="0">
                <xs:element ref="article"/>
            </xs:choice>
            <xs:attribute ref="id" use="required"/>
            <xs:attribute ref="name"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="items">
        <xs:complexType>
            <xs:choice maxOccurs="unbounded" minOccurs="0">
                <xs:element ref="product"/>
            </xs:choice>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T04:02:58.403

以下应该工作

```
 <element name="umbrella" nillable="true" type="umbrellaType"> 
```

```
<complexType name="umbrellaType">
   <attribute name="color">
     <simpleType>
       <restriction base="int">
        <minExclusive value="99"></minExclusive>
        <maxInclusive value="999"></maxInclusive>
       </restriction>
     </simpleType>
   </attribute>
</complexType> 
```

# c# - 顺序循环来自数据库的非顺序查询结果

> ID：14269548
> 
> 赞同：-3
> 
> 时间：2013-01-11T00:06:13.223
> 
> 标签：c#, .net

我需要创建一个带有问题和答案的向导。所以我有一个带有答案的表格，当我加载向导时，我希望将第一个答案作为标签，并靠近一个带有可能答案和下一个按钮的下拉菜单。当我单击下一个按钮时，选择的答案和问题 ID 保存在数据库中，第二个问题是加载并像这样继续，直到所有问题都完成。

最近我只在冷融合中工作，在那里我可以循环查询并且它很简单，但在 C# 中我不知道该怎么做。

```
for (int i = 0; i < length; i++)
{ 
using (SqlConnection sqlConn = new SqlConnection(connstring))
        {
            sqlConn.Open();
            using (SqlCommand sqlCmd = new SqlCommand())
            {
                sqlCmd.CommandType =   CommandType.StoredProcedure;
                sqlCmd.CommandText = "dbo.GetFurnizori";                                           

                sqlCmd.Parameters.AddWithValue("@p_id",i);
                sqlCmd.Connection = sqlConn;
                DataTable dat = new DataTable();
                SqlDataAdapter sqlDA = new SqlDataAdapter();
                sqlDA.SelectCommand = sqlCmd;
                dat.Fill(dataSet1, "questions");
                label1.DataBindings.Add("Text", dataSet1, "question");
            }                
          } 
```

问题是我不能用 i 递增 1 因为 id 并不总是 1,2,3,4 也许它们是 5,9 ,11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:54:23.830

如果您正在查询 SQL Server，`ROW_NUMBER() OVER()`请在存储过程中向您的查询添加一个（您必须阅读它：http: [//msdn.microsoft.com/en-us/library/ms186734.aspx](http://msdn.microsoft.com/en-us/library/ms186734.aspx)）。这将为您返回的每一行提供一个序列号（1、2、3 等）。这可能会有所帮助，因为您不必依赖`id`. 您可以将`i`（并继续`i++`）传递到 proc 并让 proc 在查询中找到行 who `ROW_NUMBER()`，而不是 who `id`is `i`。

# visual-studio-2010 - 使用 Visual Studio 2010、MFC 和 FFmpeg 构建

> ID：14269554
> 
> 赞同：1
> 
> 时间：2013-01-11T00:06:56.297
> 
> 标签：visual-studio-2010, mfc, ffmpeg

我正在使用 FFmpeg 和 SDL 在 Visual Studio 2010 中构建 Windows MFC 应用程序。但是，在从头开始创建 MFC 项目并包含 FFmpeg 开发库（avcodec.lib、avdevice.lib、avformat.lib 等）后，我无法构建项目。我正在使用来自[Zeranoe FFmpeg](http://ffmpeg.zeranoe.com/builds/)的开发版本。我在项目属性中配置了以下内容：

1.  设置 VC++ 目录 -> 包含目录（添加了 FFmpeg “包含”目录）
2.  设置 VC++ 目录 -> 库目录（到 FFmpeg“lib”目录）
3.  设置链接器 -> 输入 -> 附加依赖项（包括 avcodec.lib 等）

对于它的价值，当我从 VC++ 目录 -> 包含目录中省略 FFmpeg 的“include\libavutil”包含时，构建成功。

以下是我收到的一些第一个构建错误（我不会全部发布，因为它很长）。任何帮助，将不胜感激。

`ClCompile:` `stdafx.cpp`

`c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\atltime.h(371): error C3861: '_mktime64': identifier not found`

`c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\atltime.h(386): error C3861: '_localtime64_s': identifier not found`

`c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\atltime.h(409): error C3861: '_gmtime64_s': identifier not found`

`c:\program files\microsoft sdks\windows\v7.0a\include\intsafe.h(144): warning C4005: 'INT8_MIN' : macro redefinition`

`c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\afxtaskspane.h(279): error C2146: syntax error : missing ';' before identifier 'm_nLastAnimTime'`

`c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\afxribboncategory.h(282): error C2146: syntax error : missing ';' before identifier 'm_ActiveTime'`

`c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\afxdockingmanager.h(353): error C2146: syntax error : missing ';' before identifier 'm_clkLastTime'`

`Build FAILED.`

我参考了这两篇文章，它们都有帮助：

*   [Visual Studio 和 libavcodec](http://www.neowin.net/forum/blog/460/entry-3634-using-libavcodec-in-visual-studio-part-1/)
*   [Visual Studio 和 SDL](http://lazyfoo.net/SDL_tutorials/lesson01/windows/msvsnet2010e/index.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T04:50:47.583

我想你做的是这个。当您完成前 2 个步骤时

> 1.  设置 VC++ 目录 -> 包含目录（添加了 FFmpeg “包含”目录）
> 2.  设置 VC++ 目录 -> 库目录（到 FFmpeg“lib”目录）

您已将它们包含在 MFC 和 ATL 路径之前的列表顶部。请使用向上/向下按钮将它们移动到列表底部。这应该可以解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:29:55.397

查看[在 Visual Studio 中使用 FFmpeg](https://stackoverflow.com/questions/11701635/use-ffmpeg-in-visual-studio) - 它有一个指向针对 Zeranoe 二进制文件构建的小型 Visual Studio 2010 项目的[链接。](http://www.alax.info/trac/public/browser/trunk/Utilities/FFmpeg/FFmpegApp)

请注意，您需要一个`inttypes.h`文件才能成功构建。

您的日志显示问题，`stdafx.cpp`这意味着您的搜索路径设置错误，或者`stdafx.h`. 将 FFmpeg 目录放在搜索列表的顶部可能会奏效，但它同样可能会破坏 MFC 部分的构建。我宁愿将它们放在列表的底部，但是代码本身应该具有正确的显式`#include`s 顺序。

# jquery - 从引导弹出窗口调用 jquery 函数

> ID：14269560
> 
> 赞同：2
> 
> 时间：2013-01-11T00:07:15.560
> 
> 标签：jquery, forms, twitter-bootstrap

这是我的第一篇文章，我希望它包含足够的信息来解释我的问题。

正如标题所示，我正在努力从弹出框内的表单中调用 jquery 函数。

我按照这篇文章创建了弹出框：
[http ://www.thoughtdelimited.org/thoughts/post.cfm/simple-technique-for-creating-multiple-twitter-bootstrap-popovers](http://www.thoughtdelimited.org/thoughts/post.cfm/simple-technique-for-creating-multiple-twitter-bootstrap-popovers)

这将创建以下代码：

```
 $(".pop").each(function() {
              var $pElem= $(this);
              $pElem.popover(
                      {
                          html:true,
                          title: getPopTitle($pElem.attr("id")),
                          content: getPopContent($pElem.attr("id"))
                      }
              );
          });

          function getPopTitle(target) {
              return $("#" + target + "_content > div.popTitle").html();
          }

          function getPopContent(target) {
              return $("#" + target + "_content > div.popContent").html();
          } 
```

显示弹出框的链接：

```
<a href="" style="" id="contact" class="pop"><i class="icon-pencil"></i> Test</a> 
```

最后是呈现弹出框的 div：

```
<div id="contact_content">
     <div id="popTitle" class="popTitle">
          title sample
     </div>
     <div id="popContent" class="popContent">
          {% crispy quick_add %}
     </div>
</div> 
```

我试图手动创建表单以在 div 中进行测试，但它没有任何区别。

在提交表单时，我想调用一个 jquery 函数来启动一个 ajax 调用。
这看起来像这样：

```
 $('.ajax_forms').on('submit',function(e){

              var form_id = $(this).attr('id');
              alert(form_id);
              var errors = 0;
              $('#'+form_id+' input[type=text]').each(function(){
                  if (!$(this).val()){
                      errors++;
                  }
              });
              if (errors > 0) {
                  ajax_alert('error','All fields are mandatory.');
                  return false;
              }
              e.preventDefault();

              $.ajax({
                  type: 'POST',
                  url: '/forms/'+form_id+'/',
                  data: $('#'+form_id).serialize(),
                  success: function(data)
                  {
                      ajax_alert('success','The data is saved.');
                  }
              });
              return false;
          }); 
```

调试时，我在提交调用中添加了一个警报，但没有显示任何警报。
令我困惑的是，如果我只是在同一页面中的任何位置（使用相同的crispy-forms 标签）显示表单，我可以毫无问题地提交数据。

我认为它与被初始化为“显示：无”的弹出框 div 相关联，但玩弄并使其可见并无济于事。

为了解决这个问题，我使用 jquery 显示/隐藏 div，但我更喜欢使用 popover。我希望这已经足够完整了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:34:01.030

在摆弄之后，我了解到表单已添加到 DOM，但我认为使用 on() 是处理此问题的方法。无论如何，我让它工作的方式是使用这个：

```
$('body').on('click','button.ajax_button',function(e){
   // your stuff here
}); 
```

'.ajax_button' 是我添加到表单创建按钮的类。

要检索表单的 id，我使用这个：

```
var form_id = $(this).closest('form').attr("id"); 
```

希望有帮助。

# iphone - iphone网络服务应用程序

> ID：14269564
> 
> 赞同：4
> 
> 时间：2013-01-11T00:07:49.493
> 
> 标签：iphone, ios, web-services

嗨，我正在编写与 web 服务通信的 iphone 应用程序，所以我有两个文本字段，程序需要读取第一个文本字段的值并发布 web 服务，然后在 web 服务的响应之后它需要编写第二个文本字段。但是在第二个文本字段中它没有写任何东西。它在控制台上打印 null 。为什么会变成？谢谢。

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self) {
            nodeContent = [[NSMutableString alloc]init];
        }
        return self;
    }

- (IBAction)login:(id)sender {

    NSLog(@"PASSWORD text: %@",password.text);

    if ([password.text length]==0) {

        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"WebService" message:@"Supply Data in text field" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"ok",nil];
        [alert show];
        [alert release];
    }
    else {

        NSString *soapFormat = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                                "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                                "<soap:Body>\n"
                                "<CelsiusToFahrenheit xmlns=\"http://tempuri.org/\">\n"
                                "<Celsius>%@</Celsius>\n"
                                "</CelsiusToFahrenheit>\n"
                                "</soap:Body>\n"
                                "</soap:Envelope>\n",password.text];

        NSLog(@"The request format is %@",soapFormat);

        NSURL *locationOfWebService = [NSURL URLWithString:@"http://www.w3schools.com/webservices/tempconvert.asmx"];

        NSLog(@"web url = %@",locationOfWebService);

        NSMutableURLRequest *theRequest = [[NSMutableURLRequest alloc]initWithURL:locationOfWebService];

        NSString *msgLength = [NSString stringWithFormat:@"%d",[soapFormat length]];

        [theRequest addValue:@"text/xml" forHTTPHeaderField:@"Content-Type"];
        [theRequest addValue:@"http://tempuri.org/CelsiusToFahrenheit" forHTTPHeaderField:@"SOAPAction"];
        [theRequest addValue:msgLength forHTTPHeaderField:@"Content-Length"];
        [theRequest setHTTPMethod:@"POST"];
        //the below encoding is used to send data over the net
        [theRequest setHTTPBody:[soapFormat dataUsingEncoding:NSUTF8StringEncoding]];

        NSURLConnection *connect = [[NSURLConnection alloc]initWithRequest:theRequest delegate:self];

        if (connect) {
            webData = [[NSMutableData alloc]init];
            startActivityIndicator;
        }
        else {
            NSLog(@"No Connection established");
        }

      //  [self performSegueWithIdentifier:@"logindevam" sender:self];

    }

}
- (IBAction)sendkeyboard:(id)sender {
    [sender resignFirstResponder];
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webData setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webData appendData:data];
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"ERROR with theConenction");
    [connection release];
    [webData release];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"DONE. Received Bytes: %d", [webData length]);
    NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    NSLog(@"%@",theXML);

    xmlParser = [[NSXMLParser alloc]initWithData:webData];
    [xmlParser setDelegate: self];
    //[xmlParser setShouldResolveExternalEntities: YES];
    [xmlParser parse];
    //  
    [connection release];
    //[webData release];
    //[resultTable reloadData];
    stopActivityIndicator;
}

//xml delegates

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [nodeContent appendString:[string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"CelsiusToFahrenheitResult"]) {
        NSLog(@"nodeContent: %@",nodeContent);   // it becomes null
        finaldata = nodeContent;
        NSLog(@"finaldata: %@",finaldata);          // it becomes null
        NSLog(@"username.text: %@",username.text);  // it becomes null
        username.text = finaldata; 

    }
    username.text = finaldata;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:43:24.810

代码：：

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

   NSLog(@"DONE. Received Bytes: %d", [webData length]);
   NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
NSLog(@"%@",theXML);

   theXML = [theXML stringByReplacingOccurrencesOfString:@"&lt;" withString:@"<"];
   theXML = [theXML stringByReplacingOccurrencesOfString:@"&gt;" withString:@">"];
   theXML = [theXML stringByReplacingOccurrencesOfString:@"&amp;" withString:@"&"];

   NSString *str, *result;
   result = [[[NSString alloc] initWithFormat:@""] autorelease];

   NSArray *array=[theXML componentsSeparatedByString:@"<CelsiusToFahrenheitResult>"];
   for(int i=1;i<[array count];i++)
   {
      str=[array objectAtIndex:i];

      NSRange ranfrom=[str rangeOfString:@"</CelsiusToFahrenheitResult>"];
      result =[str substringToIndex:ranfrom.location];
   }

   NSLog(@"\n -> %@", result);

   t2.text = result; // Your Second textfield

   [connection release];
} 
```

它肯定会奏效。谢谢。

# amazon-web-services - 使用 javadoc 作为欢迎文件部署 java Web 应用程序

> ID：14269567
> 
> 赞同：0
> 
> 时间：2013-01-11T00:08:08.093
> 
> 标签：amazon-web-services, tomcat7, amazon-elastic-beanstalk

我已经创建了 java web 应用程序。当我使用 tomcat7 将我的应用程序部署到服务器时，我想将我的 javadoc 部署为欢迎文件，所以当我转到应用程序的根目录时，我想查看参考。但是 tomcate 却给出了很多 404 错误。这是我的项目结构；

![在此处输入图像描述](../Images/a4e2f93ca0e4ba3ea0ad808940553759.png)

我的 web.xml 是；

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <description>Multiple packages, separated by semicolon(;), can be specified in param-value</description>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>org.elhan.usermanager</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/api/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>javadoc/index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:01:57.983

没关系。我通过将 javadoc 内容移动到“Web Pages”目录解决了这个问题。在 web.xml 文件中，我更改`javadoc/index.html`并`index.html`部署了它。有用。

# c# - 从二进制文件中快速读取结构数组

> ID：14269568
> 
> 赞同：4
> 
> 时间：2013-01-11T00:08:17.013
> 
> 标签：c#, binaryreader

是否可以一次调用从二进制文件中读取结构数组？

例如，我有一个包含数千个顶点的文件：

`struct Vector3 { float x, y, z; }`

我需要 C++ 代码的 C# 端口：

```
Vector3 *verts = new Vector3[num_verts];
fread ( verts, sizeof(Vector3), num_verts, f ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:40:34.140

这是（几种）方法之一：

```
void Main()
{
    var pts = 
        (from x in Enumerable.Range(0, 10)
        from y in Enumerable.Range(0, 10)
        from z in Enumerable.Range(0, 10)
        select new Vector3(){X = x, Y = y, Z = z}).ToArray();

    // write it out...
    var bigAssByteArray = new byte[Marshal.SizeOf(typeof(Vector3)) * pts.Length];
    var pinnedHandle = GCHandle.Alloc(pts, GCHandleType.Pinned);    
    Marshal.Copy(pinnedHandle.AddrOfPinnedObject(), bigAssByteArray, 0, bigAssByteArray.Length);
    pinnedHandle.Free();
    File.WriteAllBytes(@"c:\temp\vectors.out", bigAssByteArray);

    // ok, read it back...
    var readBytes = File.ReadAllBytes(@"c:\temp\vectors.out");
    var numVectors = readBytes.Length / Marshal.SizeOf(typeof(Vector3));
    var readVectors = new Vector3[numVectors];
    pinnedHandle = GCHandle.Alloc(readVectors, GCHandleType.Pinned);
    Marshal.Copy(readBytes, 0, pinnedHandle.AddrOfPinnedObject(), readBytes.Length);
    pinnedHandle.Free();

    var allEqual = 
        pts.Zip(readVectors, 
            (v1,v2) => (v1.X == v2.X) && (v1.Y == v2.Y) && (v1.Z == v2.Z))
        .All(p => p);
    Console.WriteLine("pts == readVectors? {0}", allEqual);
}

struct Vector3
{
    public float X;
    public float Y;
    public float Z;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T00:57:18.743

是的，这是可能的，但是您必须向结构添加属性，以便您准确指定它在内存中的映射方式，以便结构中没有填充。

通常，自己转换数据更容易。绝大多数的处理时间将是从文件中读取数据，因此转换数据的开销很小。例子：

```
byte[] bytes = File.ReadAllBytes(fileName);
Vector3[] data = new Vector3[bytes.Length / 12];
for (var i = 0; i < data.Length; i++) {
  Vector3 item;
  item.x = BitConverter.ToSingle(bytes, i * 12);
  item.y = BitConverter.ToSingle(bytes, i * 12 + 4);
  item.z = BitConverter.ToSingle(bytes, i * 12 + 8);
  data[i] = item;
} 
```

# python - boost mpi python：未定义符号：_ZN5boost3mpi5timer14time_is_globalEv

> ID：14269575
> 
> 赞同：1
> 
> 时间：2013-01-11T00:08:57.883
> 
> 标签：python, boost, mpi

我继承了一个使用 boost mpi for python 的大型 python 系统。所以我从源代码构建了 boost 1.52，包括 mpi 和 python 组件。

我已经从[http://mathema.tician.de/software/boostmpi](http://mathema.tician.de/software/boostmpi)为 python 1.38.0.1 构建了 boost mpi 。我意识到有更新的库（mpi4py），但我继承的软件使用了 boost mpi。

当我尝试使用它时，我得到...

```
$ python
Python 2.7.3 (default, Jan  4 2013, 14:54:17) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2
Type "help", "copyright", "credits" or "license" for more information.

>>> import boostmpi
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/projects/nrel/cid/lada.2013/pkgi/lib/python2.7/site-packages/boostmpi-1.38.0.1-py2.7-linux-x86_64.egg/boostmpi/__init__.py", line 7, in <module>
    from boostmpi._internal import *
ImportError: /projects/nrel/cid/lada.2013/pkgi/lib/python2.7/site-packages/boostmpi-1.38.0.1-py2.7-linux-x86_64.egg/boostmpi/_internal.so: undefined symbol: _ZN5boost3mpi5timer14time_is_globalEv

>>> from boostmpi._internal import *
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/projects/nrel/cid/lada.2013/pkgi/lib/python2.7/site-packages/boostmpi-1.38.0.1-py2.7-linux-x86_64.egg/boostmpi/__init__.py", line 7, in <module>
    from boostmpi._internal import *
ImportError: /projects/nrel/cid/lada.2013/pkgi/lib/python2.7/site-packages/boostmpi-1.38.0.1-py2.7-linux-x86_64.egg/boostmpi/_internal.so: undefined symbol: _ZN5boost3mpi5timer14time_is_globalEv 
```

我怎样才能解决这个问题？

使用 ldd 进行测试：

```
$ ldd /projects/nrel/cid/lada.2013/pkgi/lib/python2.7/site-packages/boostmpi-1.38.0.1-py2.7-linux-x86_64.egg/boostmpi/_internal.so  libboost_python.so.1.52.0 => /projects/nrel/cid/lada.2013/pkgi/lib/libboost_python.so.1.52.0 (0x00002b0e45542000)
    libmpi_cxx.so.0 => /apps/x86_64/mpi/openmpi/intel-11.1-f064-c064/openmpi-1.4.2_oobpr/lib/libmpi_cxx.so.0 (0x00002b0e45795000)
    libmpi.so.0 => /apps/x86_64/mpi/openmpi/intel-11.1-f064-c064/openmpi-1.4.2_oobpr/lib/libmpi.so.0 (0x00002b0e459bb000)
    libopen-rte.so.0 => /apps/x86_64/mpi/openmpi/intel-11.1-f064-c064/openmpi-1.4.2_oobpr/lib/libopen-rte.so.0 (0x00002b0e45e94000)
    libopen-pal.so.0 => /apps/x86_64/mpi/openmpi/intel-11.1-f064-c064/openmpi-1.4.2_oobpr/lib/libopen-pal.so.0 (0x00002b0e46162000)
    librdmacm.so.1 => /usr/lib64/librdmacm.so.1 (0x00002b0e463ef000)
    libibverbs.so.1 => /usr/lib64/libibverbs.so.1 (0x00002b0e465f5000)
    libpsm_infinipath.so.1 => /usr/lib64/libpsm_infinipath.so.1 (0x00002b0e46802000)
    libnuma.so.1 => /usr/lib64/libnuma.so.1 (0x00002b0e46a4c000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00002b0e46c6a000)
    libnsl.so.1 => /lib64/libnsl.so.1 (0x00002b0e46e6e000)
    libutil.so.1 => /lib64/libutil.so.1 (0x00002b0e47086000)
    libmpi_f77.so.0 => /apps/x86_64/mpi/openmpi/intel-11.1-f064-c064/openmpi-1.4.2_oobpr/lib/libmpi_f77.so.0 (0x00002b0e4728a000)
    libimf.so => /projects/global/x86_64/compilers/intel/intel-11.1-cproc-064/lib/intel64/libimf.so (0x00002b0e474cb000)
    libm.so.6 => /lib64/libm.so.6 (0x00002b0e4785d000)
    libsvml.so => /projects/global/x86_64/compilers/intel/intel-11.1-cproc-064/lib/intel64/libsvml.so (0x00002b0e47ae1000)
    libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x00002b0e47cf7000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00002b0e47ff7000)
    libintlc.so.5 => /projects/global/x86_64/compilers/intel/intel-11.1-cproc-064/lib/intel64/libintlc.so.5 (0x00002b0e48206000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00002b0e48343000)
    libc.so.6 => /lib64/libc.so.6 (0x00002b0e4855e000)
    librt.so.1 => /lib64/librt.so.1 (0x00002b0e488b7000)
    libinfinipath.so.4 => /usr/lib64/libinfinipath.so.4 (0x00002b0e48ac0000)
    /lib64/ld-linux-x86-64.so.2 (0x00002b0e45021000) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:24:07.343

您错误地构建了您的库。您的 boostmpi/_internal.so 要么未链接到某些 boost-mpi 库，要么期望与您拥有的版本不同。您可以使用

```
ldd /projects/nrel/cid/lada.2013/pkgi/lib/python2.7/site-packages/boostmpi-1.38.0.1-py2.7-linux-x86_64.egg/boostmpi/_internal.so 
```

检查正在加载的库（如果有的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:57:13.570

这是你的问题

```
boostmpi-1.38.0.1-py2.7-linux-x86_64.egg/boostmpi/_internal.so  libboost_python.so.1.52.0 => /projects/nrel/cid/lada.2013/pkgi/lib/libboost_python.so.1.52.0 
```

boostmpi-1.38.0

libboost_python.1.52.0

你必须修复你的路径它拾取两个不同版本的提升，

# visual-studio-2010 - 在“无身份验证”模式下将 msvsmon 作为服务运行

> ID：14269578
> 
> 赞同：3
> 
> 时间：2013-01-11T00:09:04.830
> 
> 标签：visual-studio-2010, debugging, visual-studio-debugging

我正在尝试调试在用户登录虚拟机之前启动的用 C++ 编写的进程。VM 是测试域的成员。我的开发机器没有加入域，所以我只能在*无身份验证*模式下使用 Msvsmon。

在交互式运行 Msvsmon 时，我经常成功使用无身份验证模式。现在我将它作为服务运行，当我尝试从 VS2010 连接时，我收到一条消息：

> 无法连接到“192.168.56.128”。Microsoft Visual Studio 远程调试监视器要么不在远程计算机上运行，​​要么在 Windows 身份验证模式下运行。

在这种情况下如何调试远程进程？除了将 Msvsmon 作为服务运行之外，我对其他建议持开放态度。

# .net - 简单客户端/服务器架构 (Windows) 所需技术的高级概述

> ID：14269582
> 
> 赞同：0
> 
> 时间：2013-01-11T00:09:32.257
> 
> 标签：.net, wcf, architecture, client-server

我正在考虑开始为我工作的公司编写应用程序。我本身并不是真正的开发人员，但这是我决定在业余时间从事的一个项目，以在 .net 中积累我的知识

希望我所做的事情非常简单（我在开玩笑，从来都不是！）从高级别的概述中，我想说 500 台客户端机器（独立的 LAN）永久运行一个程序，该程序向基于中央互联网的中央互联网报告服务器。从管理员端的网络界面，我想做以下事情：

*   查看所述 PC 的在线状态（因此 PC 会告诉服务器它是活着的，说每分钟一次
*   可能具有对 PC 的命令行访问权限或远程运行程序的能力
*   可能将文件发送到 PC 的能力
*   未来添加附加功能的范围
*   请求客户端刷新其信息（例如，如果我想查看当前登录的用户）

从客户端的角度来看，我希望能够做到 - 每次所述信息更改时报告计算机名称/IP地址等基本信息 - 接受来自中央管理服务器的命令以请求数据等

我真正在寻找的是可以使用的技术的概述，我只想指出正确的方向。我最初的搜索表明 WCF 将是上述情况的一个不错的选择 - 如果有人知道从哪里开始、教程等的任何资源，将不胜感激。我假设我正在做的事情将需要在 Windows 机器上提供服务，因此任何关于如何使用最好的技术来工作的任何见解也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:23:44.780

如果你想从小处着手，编写一个通过 HTTP 连接到远程服务器并下载一个小页面的小程序。

```
client -> http://remoteserver/alive.aspx 
```

客户端程序 - 收集所需信息（IP 等），并进行 HTTP 调用

服务器程序 - 在您的 alive.aspx 中，编写写入 PC 处于活动状态的数据库的代码。然后创建一个报告页面，可以显示给定时间的活动 PC。

然后开始添加功能 - 例如客户端和服务器之间的身份验证、活动报告中的过滤器（如日期范围）、正常运行时间报告、PC 停机警报

然后添加执行命令的功能。一个环形交叉路口但非常简单的方法是

1.  客户端程序——alive.aspx 的响应可能包含命令。执行命令，然后回调 commandResult.aspx
2.  服务器程序 - 提供一个页面让管理员在 PC 上运行命令。管理员输入命令。管理员必须等待命令结果，直到来自客户端 PC 的下一个活动调用之后。管理员可以在两者之间执行其他任务。

然后添加适当的执行命令功能——客户端程序打开到服务器的套接字连接，并等待来自服务器的命令。服务器程序通过套接字发送命令。

# c# - WCF 使用 X509 私钥发送消息

> ID：14269583
> 
> 赞同：0
> 
> 时间：2013-01-11T00:09:31.927
> 
> 标签：c#, wcf, wcf-security, soapui, x509

所以，这是我的百万美元问题。我想使用第三方托管的服务，因此在设置中我们交换了 X509 证书。我给他们发了我们的，我们得到了他们的。我在证书存储中添加了他们的自签名证书。现在，我尝试使用soapUI连接到服务，我需要使用我的私钥创建一个JKS文件来连接，并使用WSSE标头作为用户名、密码、随机数和TTL，它工作得很好。

但是，我想编写一个 WCF c# 客户端来与服务通信，并且将我的证书添加到配置中的客户端凭据或通过代码不起作用。有人可以让我知道如何使用私钥使用 WCF 发送消息吗？

我已经尝试了这两种方法，但不确定我哪里出错了......

```
proxy.ClientCredentials.ClientCertificate.Certificate = new X509Certificate2(@"C:\soapUI\soapUI\Agency1\certificates\myprivatekey.pfx", "Pwd");
proxy.ClientCredentials.ServiceCertificate.DefaultCertificate = new X509Certificate2(@"C:\soapUI\soapUI\Agency1\certificates\myprivatekey.pfx", "Pwd"); 
```

我还在肥皂信封中添加了正确的 wsu 和 wsse 标题。当我将肥皂信封从 WCF 客户端带到 SOAPUI 时，它可以工作，但不能来自 WCF 本身。所以我很确定它是如何使用私钥的不同之处。因此，任何思路都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:01:04.040

在本文中，我们将从了解传输和消息安全开始。然后，我们将看到如何使用 WsHTTP 绑定实现传输和消息安全的简单代码示例。我们还将借助一个简单的代码了解“BasicHttpBinding”和“WsHttpBinding”之间的区别。WCF 安全性本身就是一个巨大的话题，但我相信通过这篇文章，您将快速了解如何了解 WCF 安全性。

[http://www.codeproject.com/Articles/36732/WCF-FAQ-Part-3-10-security-related-FAQ](http://www.codeproject.com/Articles/36732/WCF-FAQ-Part-3-10-security-related-FAQ)

# jquery - 链接到选择了 jQuery 链接的页面？

> ID：14269585
> 
> 赞同：0
> 
> 时间：2013-01-11T00:09:39.353
> 
> 标签：jquery

到目前为止我所拥有的：

```
$("#navigation li a[id]").click(function() {
  $("#" + this.id.substr(1)).show(600)
     .siblings('.toggleDiv').slideUp(600);
});

          <!-- Begin Naviagtion -->
     <div id="navigation">

             <ul>
                <li><a id="babout">Canada</a></li>
                <li><a id="bcontact">USA</a></li>
                <li><a id="bsearch">Mexico</a></li>
         </ul>   

         </div>
         <!-- End Naviagtion -->

<br /><br />

<!-- Begin Search -->
        <div class="toggleDiv" id="search" style="">
               Mexico Staff
        </div>
     <!-- End Search -->

 <!-- Begin About -->
        <div class="toggleDiv" id="about" style="">
                Canada Staff
        </div>
     <!-- End About -->

         <!-- Begin Contact -->
        <div class="toggleDiv" id="contact" style="">
                USA Staff
        </div>
     <!-- End Contact --> 
```

[http://jsfiddle.net/q6ncx/12/](http://jsfiddle.net/q6ncx/12/)

我需要能够将人们链接到此页面，并且已经选择了三个选项之一。

IE。mysite.com/staff.php#Canada - “加拿大”链接已经被选中。

jQuery可以做到这一点吗？我知道这在 php 中很容易实现，但如果可能的话，我宁愿坚持使用 js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:26:18.213

从 url 获取哈希并触发点击相应链接：

```
var hash=location.hash;

if( hash && hash.substr(1).length){
   /* use "filter" to match hash to link text*/
   $('#navigation li a').filter(function(){
         return $.trim( $(this).text())==hash.substr(1) ;
    }).click(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:36:30.737

使用[内部链接](http://easysourcecode.com/html/internal-links-html-jump-links-on-same-page)。您的 url 将是 mysite.com/staff.php#Canada 而您的 ancor 将是

```
<a  href="#Canada" id="babout">Canada</a> 
```

如果你想用 JS 触发事件：

```
if(window.location.hash === "Canada" ||
window.location.hash === "somethingElse") {
    //do something
} 
```

# php - 如何编写 if 语句来检查是否输入了值

> ID：14269591
> 
> 赞同：-1
> 
> 时间：2013-01-11T00:10:21.983
> 
> 标签：php, if-statement

我将如何编写一个 if 语句来检查选项菜单的值是否为空，如果是则不显示它。

```
<option value="">GUYS AND GIRLS</option> 
```

如果 value 中没有任何内容，则不会在选择菜单中显示此选项，但如果。

```
<option value="http://test.com">GUYS AND GIRLS</option> 
```

它有一些东西会显示在下拉列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:46:16.250

将您的选项放在一个数组中并运行一个 foreach 循环来寻找一个空值：

```
//put the dropdown option in an array
$options = array('<option value="">GUYS AND GIRLS</option>',
                '<option value="http://test.com">GUYS AND GIRLS</option>');

//run a for each
foreach($options as $currentOption){
    //look for empty value
    if(!strstr('value=""', $currentOption)){
        echo $currentOption;
    }
} 
```

**编辑，基于评论**

试试这个，如果你可以实现的话。

```
<?php
    if(meta('guys') != ""){
        echo '<option value="' . meta('guys') . '">GUYS</option>';
    }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:14:01.370

我看到了两种可能的解决方案。第一个是如果已经在某处分离了值，然后检查它然后使用php替换空值。如果您只能在 if 语句中访问该语句，则使用子字符串来提取值，然后进行比较。

# c++ - 为什么有人更喜欢向量而不是数组？

> ID：14269592
> 
> 赞同：2
> 
> 时间：2013-01-11T00:10:22.737
> 
> 标签：c++, arrays, vector

> **可能重复：**
> [现实世界中的 C++ STL 向量与数组](https://stackoverflow.com/questions/6462985/c-stl-vector-vs-array-in-the-real-world)

*一开始我的 C++ 知识和 C 的高级知识略低于平均水平*
很多时候，我想问一些与代码相关的内容并包含或参考一些代码，`array`然后每个人都会立即锁定这方面并建议我应该改用a `vector`，即使它不必做任何与我的问题相关的事情。

问题是这是我学习如何使用 C++ 的方式，显然是我从学习纯 C 中继承的东西，我已经习惯了，虽然我对使用向量也很有信心，但我只是更`arrays`喜欢`vectors`.

我的问题是为什么有人应该使用 a`vector`而不是 a `array`，他这样做能赚到什么，即使他非常习惯于数组？
另外，如果`arrays`不是首选，`vectors`为什么不是每个人都简单地对所有事物都使用向量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:12:11.830

向量具有可以在运行时提供的维度，例如用户提供的值或从文件内容派生的东西。

相比之下，数组的大小必须*硬编码*到您的程序中。它是固定的。^†

> 为什么不是每个人都简单地使用向量来处理所有事情？

当您不需要时，在数组上使用向量会产生运行时性能成本。就我个人而言，我从未编写过作为瓶颈的代码，因此很少使用原始数组。不过，这种情况*确实*存在。

* * *

^†例外情况是当您使用;*动态*创建内存块（某种意义上的“数组”）时。`new[]`这是 . 封装的确切语言功能`std::vector`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:12:29.280

原因之一是每个容器的性能行为，[如下所述](http://www.cplusplus.com/reference/stl/)：

> 许多容器有几个共同的成员函数，并且共享功能。决定使用哪种类型的容器来满足特定需求通常不仅取决于容器提供的功能，还取决于其某些成员的效率（复杂性）。对于序列容器来说尤其如此，它在插入/删除元素和访问它们之间提供了不同的复杂性权衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:12:38.607

矢量图

*   自己分配和释放内存
*   展开时自动调整大小
*   可以在 STL 容器可以使用的地方使用，其中包括许多算法和方法
*   还有许多其他有用的方法

数组

*   整体占用更少的内存
*   用于 C 代码，因此用于反向兼容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T00:14:49.327

主要原因是a的大小`std::vector`可以在运行时确定并且可以调整大小。该向量还支持迭代器，这意味着它适用于许多 stl 算法，例如`std::for_each`or `std::anyof`。向量也可用于以安全的方式分配内存，并且与 C 函数兼容。

如果您使用的是 Windows API，`std::vector`则对于许多函数中使用的 get-size-get-data 范例非常有用。这是您通常调用相同函数两次的地方，第一次是获取数据大小，第二次是实际读取数据。例如：

```
DWORD size = 0;
DWORD type = 0;
if ( RegQueryValueEx( HKEY_LOCAL_MACHINE, 
    L"SOFTWARE\\Microsoft\\.NETFramework\\InstallRoot", 
    nullptr, 
    &type, 
    nullptr, 
    &size ) == ERROR_SUCCESS )
{
    std::vector<BYTE> data( size );
    if ( RegQueryValueEx( HKEY_LOCAL_MACHINE, 
        L"SOFTWARE\\Microsoft\\.NETFramework\\InstallRoot", 
        nullptr, 
        &type, 
        &data[0], 
        &size ) == ERROR_SUCCESS )
    {
      //We have read the data
    }
} 
```

数组的大小是在编译时决定的，不能调整大小。数组仍然在 C 中使用。

# php - 将每个单词放在一个链接中 PHP

> ID：14269595
> 
> 赞同：0
> 
> 时间：2013-01-11T00:11:03.803
> 
> 标签：php, string

假设我在一个字符串中有这个文本块：

```
hello guys good man 
```

我想将此字符串（使用 PHP）转换为如下内容：

```
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=hello">hello</a> <a href="http://www.dumbsearch.com/now/searchcompleted.php?q=guys">guys</a> <a href="http://www.dumbsearch.com/now/searchcompleted.php?q=good">good</a> <a href="http://www.dumbsearch.com/now/searchcompleted.php?q=man">man</a> 
```

提前谢谢！:)

这会涉及一些正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:15:00.403

尝试这样的事情：

```
<?
$str = "hello guys good man";
$arr = explode(' ', $str);
foreach($arr as $value){
    echo '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q='.$value.'">'.$value.'</a>';
}
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T00:17:25.937

你可以使用explode然后使用foreach。

```
<?php
$a="hello guys good man";
$a=explode(' ',$a);

foreach($a as $linkit)
{
echo '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q='.$linkit.'">'.$linkit.'</a><br>';
}
?> 
```

希望它可以帮助 Abnab

# c# - CSV 格式问题

> ID：14269599
> 
> 赞同：0
> 
> 时间：2013-01-11T00:11:24.427
> 
> 标签：c#, csv, streamwriter

格式化从 C# 代码创建的 CSV 时出现问题。在记事本文件中，输出垂直向下滚动一行（在下面的结构中看到的值在一行中输出。还有一行数字直接出现在结构值的下方，但数字应该在旁边的新行中结构）。当我在 excel 中打开时，这是一个类似的故事，只有结构的输出是它应该在的位置，但是数字行出现在结构值的正下方，但如果有意义，则在右侧一行，并且数字应该直接出现在它们旁边相应的结构值。我正在使用的代码如下。

这是我正在使用的字典的结构。

```
public enum Genders
{
    Male,
    Female,
    Other,
    UnknownorDeclined,
}

public enum Ages
{
    Upto15Years,
    Between16to17Years,
    Between18to24Years,
    Between25to34Years,
    Between35to44Years,
    Between45to54Years,
    Between55to64Years,
    Between65to74Years,
    Between75to84Years,
    EightyFiveandOver,
    UnavailableorDeclined,
} 
```

使用 streamwriter 和 stringbuilder 进行输出的 csv 文件。

```
public void CSVProfileCreate<T>(Dictionary<T, string> columns, Dictionary<T, int> data)
{
        StreamWriter write = new StreamWriter("c:/temp/testoutputprofile.csv");
        StringBuilder output = new StringBuilder();
        foreach (var pair in columns)
        {
            //output.Append(pair.Key);
            //output.Append(",");
            output.Append(pair.Value);
            output.Append(",");
            output.Append(Environment.NewLine);
        }

        foreach (var d in data)
        {
            //output.Append(pair.Key);
            output.Append(",");
            output.Append(d.Value);
            output.Append(Environment.NewLine);
        }

        write.Write(output);
        write.Dispose();
} 
```

最后是将字典输入 csv 创建器的方法。

```
 public void RunReport()
    {
        CSVProfileCreate(genderKeys, genderValues);
        CSVProfileCreate(ageKeys, ageValues);
    } 
```

有任何想法吗？

**更新**

我通过这样做来修复它：

```
 public void CSVProfileCreate<T>(Dictionary<T, string> columns, Dictionary<T, int> data)
    {
        StreamWriter write = new StreamWriter("c:/temp/testoutputprofile.csv");
        StringBuilder output = new StringBuilder();

        IEnumerable<string> col = columns.Values.AsEnumerable();
        IEnumerable<int> dat = data.Values.AsEnumerable();

        for (int i = 0; i < col.Count(); i++)
        {
            output.Append(col.ElementAt(i));
            output.Append(",");
            output.Append(dat.ElementAt(i));
            output.Append(",");
            output.Append(Environment.NewLine);
        }

        write.Write(output);
        write.Dispose();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:16:00.933

您在输出的每个单个值之后编写 Environment.NewLine。

而不是有两个循环，你应该只有一个输出的循环

*   一双”
*   一个值
*   环境.新线

对于每次迭代。

假设`columns`并且`data`有相同的键，那可能看起来像

```
foreach (T key in columns.Keys)
{
    pair = columns[key];
    d = data[key];
    output.Append(pair.Value);
    output.Append(",");
    output.Append(d.Value);
    output.Append(Environment.NewLine);
} 
```

注意两个并发症：

*   如果`pair.Value`or`d.Value`包含逗号，则需要用双引号将该单元格的输出括起来。
*   如果 If `pair.Value`or`d.Value`包含逗号并且还包含双引号，则必须将双引号加倍以将其转义。

例子：

> 小史密斯

必须输出

> “小史密斯”

和

> “史密斯”史密斯，JR

必须输出

> """Smitty""小史密斯"

**更新**

根据您对密钥的评论...

> 出于枚举的目的，字典中的每个项目都被视为表示值及其键的 KeyValuePair 结构。返回项目的顺序未定义。

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

如果您不能使用密钥将正确的数据对与正确的数据相关联，您如何*建立*这种关联？

如果您正在迭代字典并且它们恰好按照您希望的顺序排列，那么这确实是*未定义*的行为，可能会随着下一个 .NET 服务包而改变。

你需要一些可靠的东西来将这对与正确的数据联系起来。

**关于 var 关键字**

*var*不是一种类型，而是一种使您不必写出整个类型的快捷方式。如果您愿意，可以使用*var*，但实际类型分别是`KeyValuePair<T, string>`和`KeyValuePair<T, int>`。*如果您在 Visual Studio 中编写var*并将鼠标悬停在该关键字上，您可以看到这一点。

**关于处置资源**

你的线路

```
write.Dispose(); 
```

是有风险的。如果您的任何代码在到达该行之前抛出异常，它将永远不会运行并且*写入*将不会被释放。最好像这样*使用 using*关键字：

```
using (StreamWriter write = new StreamWriter("c:/temp/testoutputprofile.csv"))
{
    // Your code here
} 
```

当使用范围*结束*时（在关联的 } 之后），无论是否抛出异常，都会自动调用 write.Dispose()。这与，但短于，

```
try
{
    StreamWriter write = new StreamWriter("c:/temp/testoutputprofile.csv");
    // Your code here
}
finally
{
    write.Dispose();
} 
```

# c++ - 包括不工作的警卫？（已在 y.obj 中定义了 500 个 LNK2005 x 类型的错误）

> ID：14269604
> 
> 赞同：1
> 
> 时间：2013-01-11T00:11:56.007
> 
> 标签：c++, linker, lnk2005

我有一个大项目（400 个文件），所有标题都包含警卫和所有内容，但是我收到 500 LNK2005 错误。

可能是我在某些标头中定义了函数体吗？因为我在 DirectX 实用程序标头中看到了相同的内容（DirectXCollision 的某些功能完全在标头中）。

或者可能是因为他们使用的是 .inl 文件而不是 .cpp？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:16:24.663

> 可能是我在某些标头中定义了函数体吗？

是的，可能是这样。在多个翻译单元中定义函数会导致重复符号定义错误。

您可以通过声明这些函数来绕过重复错误`inline`。*[7.1.2]/2*内容如下：

> 带有 inline 说明符的函数声明（8.3.5、9.3、11.3）声明了一个*内联函数*。inline 说明符向实现表明，在调用点对函数体进行内联替换优于通常的函数调用机制。在调用点执行此内联替换不需要实现；然而，即使省略了这个内联替换，7.1.2 中定义的内联函数的其他规则仍应得到遵守。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T00:16:48.313

包含守卫只会使您免于将相同的标头多次包含到同一个编译单元（一个 cpp 文件）中。如果您将标头包含在第二个 cpp 文件中，然后将它们链接在一起，它们都会包含标头带来的任何内容。这就是为什么在标头中包含函数实现通常是个坏主意。

您可以通过声明内联函数来解决此问题，然后编译器将复制/粘贴它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T17:35:59.333

您是否在头文件中定义全局变量？这可能是错误的原因。包括警卫也无济于事。

全局变量应仅在一个翻译单元中定义，并应在所有其他翻译单元中外部。

例如。在 xh 中，你有

```
int myVar; 
```

现在你在 a.cpp 和 b.cpp 中都 #include xh，那么即使你在 xh 中包含保护，你也会得到一个链接器错误

因为现在 myVar 将在 a.obj 和 b.obj 中定义，链接器将找到 2 个 myVar。

# jquery - 使侧边栏比浏览器长，但不比一起滚动的内容长

> ID：14269607
> 
> 赞同：0
> 
> 时间：2013-01-11T00:12:26.193
> 
> 标签：jquery, wordpress

我到处寻找，但找不到正确的解决方案

侧边栏很长，但是当我走到最后时仍然有空白，因为它不是内容的长度。所以，我在想也许使用 jquery 来“修复”它，但问题是，它仍然是一个长侧边栏。所以有没有办法让我在滚动时让侧边栏逐渐滚动，使其到达底部边栏在我到达页脚的同时？

我想到了一些可能类似于“（0，sidebarTop - scrollTop）”的东西，其中'sidebartop'是位置（'top'随着滚动而增加，因此它会将侧边栏向下推）但它不能正常工作..它实际上是向上推

我有点睡眠不足，目前我可能还没有想清楚，但我需要在星期六为客户解决这个问题。

你看到侧边栏有多长了吗？（缩短你的浏览器）——我想要它，这样侧边栏会随着内容逐渐向下移动，就像这样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:14:39.537

你需要一点额外的数学：http: [//jsfiddle.net/VEsdu/317/](http://jsfiddle.net/VEsdu/317/)

```
scrolled = Math.min(1, (scrollTop - sidebarTop)/(ch - wh));
topPosition += scrolled * (ch - sh); 
```

在第一行，我们得到视口中内容的哪一部分 - 0 表示视口顶部的内容顶部，1 表示视口底部的内容底部。在第二行，将边距添加到侧边栏，与内容/侧边栏高度之间的差异成比例。

我不确定这是否适用于高于侧边栏/内容的视口或调整窗口大小后，您应该检查这些情况。

# ipython - iptest3 与 IPython

> ID：14269617
> 
> 赞同：0
> 
> 时间：2013-01-11T00:13:58.143
> 
> 标签：ipython

我是 Python 编程的新手，并试图为自己建立一个功能基础，从中我可以运行看起来非常令人兴奋的 IPython Notebook 之类的东西。

到目前为止，我在OS X 10.6 (Snow Leopard)`Python 2.7`和. 到目前为止，我尝试过的几乎所有东西都按预期工作。我专注于学习，但也希望有使用的选择。我阅读了几份文档，我需要开始使用 Python 包管理器访问 PyPI 包，而这正是我应该用于 3k 的文件。所以我根据我找到的文档安装了它，它似乎工作正常。`3.3``python.org``ActiveTcl 8.5.13``3.3``2.7``distribute`

我也`pip`按指示安装了，还有其他一些。

在这一点上，我有：

```
$ pip freeze
distribute==0.6.34
ipython==0.13.1
nose==1.2.1 (installed after IPython)
pexpect==2.4 (installed after IPython)
pyflakes3k==0.4.3
readline==6.2.4.1 (installed after IPython) 
```

在这一点上，我在[ipython.org 指导下这样做](http://ipython.org/ipython-doc/rel-0.13.1/install/install.html)

当我这样做时`$ easy_install pexpect`，我得到了一堆错误：

```
$ easy_install pexpect
Searching for pexpect
Reading http://pypi.python.org/simple/pexpect/
Reading http://pexpect.sourceforge.net/
Reading http://sourceforge.net/project/showfiles.php?group_id=59762
Best match: pexpect 2.4
Downloading http://pypi.python.org/packages/source/p/pexpect/pexpect-2.4.tar.gz#md5=fe82d69be19ec96d3a6650af947d5665
Processing pexpect-2.4.tar.gz
Writing /var/folders/td/td0Sh8EfGFuMCnKex1v+q++++TI/-Tmp-/easy_install-s4dtyy/pexpect-2.4/setup.cfg
Running pexpect-2.4/setup.py -q bdist_egg --dist-dir /var/folders/td/td0Sh8EfGFuMCnKex1v+q++++TI/-Tmp-/easy_install-s4dtyy/pexpect-2.4/egg-dist-tmp-5h5cg4
File "build/bdist.macosx-10.6-intel/egg/fdpexpect.py", line 36
raise ExceptionPexpect, 'The fd argument is not a valid file descriptor.'
                      ^
SyntaxError: invalid syntax

File "build/bdist.macosx-10.6-intel/egg/FSM.py", line 77
return `self.value`
       ^
SyntaxError: invalid syntax

File "build/bdist.macosx-10.6-intel/egg/pexpect.py", line 82
except ImportError, e:
                  ^
SyntaxError: invalid syntax

zip_safe flag not set; analyzing archive contents...
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pexpect-2.4-py3.3.egg/fdpexpect.py", line 36
raise ExceptionPexpect, 'The fd argument is not a valid file descriptor.'
                      ^
SyntaxError: invalid syntax

File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pexpect-2.4-py3.3.egg/FSM.py", line 77
return `self.value`
       ^
SyntaxError: invalid syntax

File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pexpect-2.4-py3.3.egg/pexpect.py", line 82
except ImportError, e:
                  ^
SyntaxError: invalid syntax

Adding pexpect 2.4 to easy-install.pth file

Installed /Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pexpect-2.4-py3.3.egg
Processing dependencies for pexpect
Finished processing dependencies for pexpect 
```

这对我来说看起来很糟糕（尽管我还没有专业知识来真正解释它），所以我不确定我是否有完整的`pexpect`.

安装后`nose`（`pexpect`按照上面的 URL 之前），我尝试从命令行运行，但都找不到命令，但是在我`iptest`再次（之后）之后，我注意到这个安装添加了（以及其他一些scripts) 到我的路径，现在我的 bash shell*可以*找到 iptest3，但是当我运行它时，我得到了一些更难看的输出：`iptest3``easy_install ipython``nose``iptest3``ipcluster3`

 *```
$ iptest3
Traceback (most recent call last):
File "/Library/Frameworks/Python.framework/Versions/3.3/bin/iptest3", line 9, in <module>
load_entry_point('ipython==0.13.1', 'console_scripts', 'iptest3')()
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/distribute-0.6.34-py3.3.egg/pkg_resources.py", line 343, in load_entry_point
return get_distribution(dist).load_entry_point(group, name)
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/distribute-0.6.34-py3.3.egg/pkg_resources.py", line 2308, in load_entry_point
return ep.load()
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/distribute-0.6.34-py3.3.egg/pkg_resources.py", line 2014, in load
entry = __import__(self.module_name, globals(),globals(), ['__name__'])
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/__init__.py", line 43, in <module>
from .config.loader import Config
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/config/__init__.py", line 16, in <module>
from .application import *
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/config/application.py", line 31, in <module>
from IPython.config.configurable import SingletonConfigurable
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/config/configurable.py", line 26, in <module>
from .loader import Config
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/config/loader.py", line 27, in <module>
from IPython.utils.path import filefind, get_ipython_dir
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/utils/path.py", line 25, in <module>
from IPython.utils.process import system
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/utils/process.py", line 27, in <module>
from ._process_posix import _find_cmd, system, getoutput, arg_split
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/utils/_process_posix.py", line 22, in <module>
from IPython.external import pexpect
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/IPython/external/pexpect/__init__.py", line 2, in <module>
import pexpect
File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pexpect-2.4-py3.3.egg/pexpect.py", line 82
except ImportError, e:
                  ^
SyntaxError: invalid syntax 
```

在完成所有这些之后，我注意到 my`/Library/Frameworks/Python.framework/Versions/Current`一直指向`2.7`，我猜这可能与我的问题有关，并将符号链接更改为指向`3.3`，但`iptest3`仍然失败并出现上述错误。

关于如何解决此问题的任何其他想法？很明显，这对于做我想做的`iptest`任何其他事情（比如）非常重要。`IPython Notebook`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:06:40.120

pexpect 有一个与 py3 兼容的分支，称为[pexpect-u](http://pypi.python.org/pypi/pexpect-u)（u 代表 unicode，两者的主要区别）。您需要它来在 Python 3 上运行基于 pexpect 的 IPython 部分。应该是一个简单的

```
pip install pexpect-u 
```

旁注：pexpect-u 由 IPython 开发人员 Thomas Kluyver 编写，他完成了大部分繁重的工作，为 IPython 带来了 py3 兼容性。*

# java - 如何通过 https URL 针对 XSD 验证 XML 文件？

> ID：14269618
> 
> 赞同：1
> 
> 时间：2013-01-11T00:13:58.253
> 
> 标签：java, xml, validation, https, xsd

我想使用位于安全 https 站点的架构来验证 XML 文件。如何告诉验证器排除自签名证书或使用 https URL？我有一个名为 test.xml 的文件和一个位于`https://localhost:1234/module/testschema.xsd`. 我正在使用与[此处](https://stackoverflow.com/questions/15732/whats-the-best-way-to-validate-an-xml-file-against-an-xsd-file)相同的代码。如果我使用常规 URL ( `http://localhost/module/testschema.xsd`)，效果很好。如果我用 https URL 替换，则会收到此错误：

schema_reference.4：未能读取架构文档' [https://localhost:1234/module/testschema.xsd](https://localhost:1234/module/testschema.xsd) '，因为 1) 找不到该文档；2) 文件无法读取；3) 文档的根元素不是`<xsd:schema>`.

复制代码：

```
public boolean validateFile(String xml, String strSchemaLocation)
{
Source xmlFile = null;
try {
    URL schemaFile = new URL(strSchemaLocation);
    xmlFile = new StreamSource(new File(xml));
    SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = schemaFactory.newSchema(schemaFile);
    Validator validator = schema.newValidator();
    validator.validate(xmlFile);
    System.out.println(xmlFile.getSystemId() + " is valid");
} catch (SAXException e) {
    System.out.println(xmlFile.getSystemId() + " is NOT valid");
    System.out.println("Reason: " + e.getLocalizedMessage());
    return false;
} catch (IOException ioe) {
    System.out.println("IOException");
    return false;
}

return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:30:17.350

这与模式验证几乎没有关系。您的问题是您需要建立 HTTPS 连接并信任自签名证书。请参阅[如何在特定连接上使用不同的证书？](https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection)或谷歌周围。

我不认为您将能够使用`SchemaFactory.newSchema`采用 File 的工厂方法，因此只需使用采用 StreamSource 的工厂方法：

```
URL schemaFile = new URL(strSchemaLocation);
HttpsURLConnection schemaConn = (HttpsURLConnection)schemaFile.openConnection();
// Magic from the other answer to accept self-signed cert
InputStream is = schemaConn.getInputStream();
SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
Schema schema = schemaFactory.newSchema(new StreamSource(is)); 
```

（我省略了 try..catch 以关闭输入流和连接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T01:58:31.833

不是验证问题，java.net.URL支持https，应该有bo区别。只需确保您可以`https://localhost:1234/module/testschema.xsd`使用浏览器打开即可。

# mysql - 使用连接优化查询

> ID：14269620
> 
> 赞同：3
> 
> 时间：2013-01-11T00:14:07.410
> 
> 标签：mysql, sql, join, refactoring

如何使用联接完成查询。我是数据库的新手。这个查询工作正常..但我想让它更健壮

```
 $query = "SELECT student_id 
FROM students
WHERE student_id
IN (
    SELECT student_id
    FROM class_students
    WHERE class_id
        IN (
            SELECT class_id
            FROM class_course
            WHERE teacher_id =". $_SESSION['teacher_id']."))"; 
```

有没有其他方法可以做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:18:59.757

使用`IN`可以转换为正确的连接：

```
SELECT s.student_id 
FROM students s
JOIN class_students cs ON cs.student_id = s.student_id
JOIN class_course c ON c.class_id = cs.class_id
WHERE teacher_id = ? 
```

请注意，我已删除（不相关的）应用程序语言细节（perl？），只留下回答问题的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:18:22.047

```
$query = "select students.student_id
from class_course left outer join class_students on 
        class_course.class_id = class_students.class_id
    left outer join students on 
        class_students.student_id = students.student_id
where class_course.teacher_id = ". $_SESSION['teacher_id'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T00:19:46.307

```
 $query = "SELECT s.student_id 
FROM students s
    INNER JOIN class_students cs
        ON s.student_id = cs.student_id
    INNER JOIN class_course cc
        ON cs.class_id = cc.class_id
            AND cc.teacher_id =". $_SESSION['teacher_id'].")) 
```

# javascript - 在 node.js 中调用和指定自定义命令？这可能吗

> ID：14269622
> 
> 赞同：1
> 
> 时间：2013-01-11T00:14:13.477
> 
> 标签：javascript, function, command

所以，我今天在这里想知道是否可以从 node.js 控制台调用可以在代码中的函数中指定的命令......

例如（只是一个愚蠢的 hello world 示例），但假设我可以运行控制台，我可以在控制台中输入一个字符串，它会运行它....或者只是定义一个自定义命令并让它调用到一个函数...

我的目标是能够为 Turntable 构建一个界面，所以我可以通过定义 kickuser 用户名原因的函数来让机器人踢用户，只需从控制台调用它......

任何帮助都会非常惊人......

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:24:24.100

您可以通过多种方式做到这一点。

`localhost`最常见的是创建一个只有运行您想要踢用户的命令才能访问的 URL ，然后您可以使用`curl`或创建一个节点脚本来触发该 URL 并传递所需的参数。

另一种更高级的方法是侦听`socket`来自本地的连接，并公开您要执行的工作方法。然后您可以创建另一个脚本，该脚本在运行时将连接套接字并为您的服务器发送命令。

一些可能对您有帮助的项目：

*   [节点控制台.io](https://github.com/TellagoDevLabs/node-console.io)
*   [节点检查器](https://github.com/dannycoates/node-inspector)

# iphone - 比较两个自定义单元格中 UILables 的值

> ID：14269626
> 
> 赞同：2
> 
> 时间：2013-01-11T00:14:30.013
> 
> 标签：iphone, uitableview, uilabel, hidden

我有一个表格视图，每行使用一个自定义单元格。每个单元格/行我有 3 个标签。3 的第一个标签包含一个数字（天）。这在每一行都是一样的。问题是一些标签在下一行包含相同的值，我想要实现的是，如果下一行的值与当前行的值相同。下一行的标签变为隐藏。

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:05:45.227

您可以处理两种情况。

第一个。
您可能希望当您`tableView`出现时它只包含标签内具有不同值的单元格。在这种情况下，就像rmaddy所说的，你必须适当过滤tableView数据源，以避免重复值，然后显示tableView。

第二个。
您想显示具有重复值的“初始”tableView，然后将其更新为仅显示标签内具有不同值的单元格（可能通过动画）。在这种情况下，您可以过滤源数据，然后调用`[tableView reloadData]`，或者您可以检测哪些单元格必须消失（即检索它们`NSIndexPath`），然后通过更新 tableView

```
[tableView beginUpdates]
// Here use deleteRowsAtIndexPaths:withRowAnimation:

[tableView endUpdates] 
```

# python - 给定 Python 中的列表列表，返回最大长度的唯一值子列表

> ID：14269627
> 
> 赞同：1
> 
> 时间：2013-01-11T00:14:43.477
> 
> 标签：python, list, nested

我在 Python 中有以下列表：

```
l = [[2], [3], [2, 2], [5], [2], [3], [7], [2, 2, 2], [3, 3], [2], [5], [11], [2, 2], [3], [13], [2], [7], [3], [5], [2, 2, 2, 2], [17], [2], [3, 3], [19], [2, 2], [5]] 
```

我想编写一个函数来返回最大长度的唯一值子列表。在这种情况下，函数将返回：

```
l = [[5], [7], [3, 3], [11], [13], [2, 2, 2, 2], [17], [19]] 
```

我仍然是 python 的初学者，但是我对如何编写这样的函数知之甚少。我得到的最远的是弄清楚我可以通过使用嵌套循环来迭代子列表。但是从我对 Python 的了解来看，似乎必须有一些比使用循环更简单的方法来返回我正在寻找的列表。

**更新：**

这是我对代码所做的事情：解决项目 euler #5，非蛮力方式！

我确信这段代码可以重构，但无论如何。

谢谢你们的帮助，伙计们。`itemgetter`正是我所需要的。

```
#!/usr/bin/python
# coding = UTF-8

import argparse, sys, math
from itertools import groupby
from collections import defaultdict
from operator import itemgetter

parser = argparse.ArgumentParser()
parser.add_argument('filename', nargs='?')
args = parser.parse_args()
if args:
   intinput = int(sys.argv[1])
elif not sys.stdin.isatty():
    intinput = int(sys.stdin.read())
else:
    parser.print_help()

def prime_factorize(n):
    factors = []
    number = math.fabs(n)

    while number > 1:
        factor = get_next_prime_factor(number)
        factors.append(factor)
        number /= factor

    if n < -1: 
        factors[0] = -factors[0]

    return factors

def get_next_prime_factor(n):
    if n % 2 == 0:
        return 2

    for x in range(3, int(math.ceil(math.sqrt(n)) + 1), 2):
        if n % x == 0:
            return x

    return int(n)

def mkfactors(n):
  tpf = []
  for i in range(n+1):
    tpf.extend(prime_factorize(i))
  return tpf

l = [list(g) for k,g in groupby(mkfactors(intinput))]

m = [max(g) for _,g in groupby(sorted(l,key=itemgetter(0)),key=itemgetter(0))]

prod = 1

for list in m:
  for element in list:
    prod *= element

print prod 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:23:20.577

如果你知道每个子列表都有相同的元素，你可以这样做：

```
l = [[2], [3], [2, 2], [5], [2], [3], [7], [2, 2, 2], [3, 3], [2], [5], [11], [2, 2], [3], [13], [2], [7], [3], [5], [2, 2, 2, 2], [17], [2], [3, 3], [19], [2, 2], [5]]

from collections import defaultdict

my_dict = defaultdict(list)

for ele in l:
    if len(my_dict[ele[0]]) < len(ele):
        my_dict[ele[0]] = ele 
```

结果：

```
>>> my_dict.values()
[[2, 2, 2, 2], [3, 3], [5], [7], [11], [13], [17], [19]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T00:23:37.267

这里最简单的做法是使用使问题变得简单的数据结构，然后您总是可以在事后转换回来。

例如，`dict`将键（质数）映射到长度（指数）很容易。所以：

```
>>> l = [[2], [3], [2, 2], [5], [2], [3], [7], [2, 2, 2], [3, 3], [2], [5], [11], [2, 2], [3], [13], [2], [7], [3], [5], [2, 2, 2, 2], [17], [2], [3, 3], [19], [2, 2], [5]]
>>> d = {}
>>> for sublist in l:
...     value, count = sublist[0], len(sublist)
...     if count > d.get(value, 0):
...         d[value] = count
>>> d
{2: 4, 3: 2, 5: 1, 7: 1, 11: 1, 13: 1, 17: 1, 19: 1} 
```

如何将它转回 a `list`of `list`s 应该很明显，所以我将把它留给你。

请注意，这会丢失订单，但您可以使用`OrderedDict`. 它也失去了`list`身份——例如，`[2, 2, 2, 2]`你最后得到的 将*等于*，但*与*原来的 不同`[2, 2, 2, 2]`。但这也很容易解决——只需`sublist`直接存储而不是使用`count`. 无论如何，我认为这些都与您的问题无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T00:27:16.677

```
l = [[2], [3], [2, 2], [5], [2], [3], [7], [2, 2, 2], [3, 3], [2], [5], [11], [2, 2], [3], [13], [2], [7], [3], [5], [2, 2, 2, 2], [17], [2], [3, 3], [19], [2, 2], [5]]
l = [max(i for i in l if j in i) for j in (2, 3, 5, 7, 11, 13, 17, 19)]
print(l)
# [[2, 2, 2, 2], [3, 3], [5], [7], [11], [13], [17], [19]] 
```

我想这只是一个带有嵌套 for 循环的列表理解，但它工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T00:36:49.267

使用`collections.Counter`和`sets`：

```
In [47]: s=set([x[0] for x in lis])

In [48]: c=[Counter(x) for x in lis]

In [49]: [max(c,key=lambda y:y[x]) for x in s]
Out[49]: 
[Counter({2: 4}),
 Counter({3: 2}),
 Counter({5: 1}),
 Counter({7: 1}),
 Counter({11: 1}),
 Counter({13: 1}),
 Counter({17: 1}),
 Counter({19: 1})] 
```

其他方式：

```
In [64]: from collections import defaultdict

In [65]: d=defaultdict(list)

In [66]: for x in lis:
    d[x[0]].append(len(x))
   ....:     

In [67]: [[x]*max(y) for x,y in d.items()]
Out[67]: [[2, 2, 2, 2], [3, 3], [5], [7], [11], [13], [17], [19]] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T01:02:28.913

```
from itertools import groupby
from operator import itemgetter

[max(g) for _,g in groupby(sorted(l),key=itemgetter(0))] 
```

*出去：*

```
[[2, 2, 2, 2], [3, 3], [5], [7], [11], [13], [17], [19]] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T04:26:35.093

一个直接的解决方案是将排序列表转换为以键作为列表的第一个元素的字典，最终将根据键删除重复项。

```
>>> {e[0]: e for e in sorted(l)}.values()
[[2, 2, 2, 2], [3, 3], [5], [7], [11], [13], [17], [19]] 
```

对于 Python 版本 < 2.7，其中 dict 理解不可用

```
>>> dict((e[0], e) for e in sorted(l)).values()
[[2, 2, 2, 2], [3, 3], [5], [7], [11], [13], [17], [19]] 
```

# sql-server - 在链接的 SQL Server 上查询名称为句点的数据库

> ID：14269628
> 
> 赞同：1
> 
> 时间：2013-01-11T00:14:45.943
> 
> 标签：sql-server, tsql, sql-server-2005

我需要在链接服务器上查询数据库，不幸的是数据库名称包含一个句点。

这失败了；

```
select top 10 * 
FROM [LINKED_SERVER].[DATABASE_NAME.1].dbo.[TABLE_NAME] 
```

出现此错误：

> *OLE DB 错误跟踪 [非接口错误：OLE DB 提供程序无法处理对象，因为该对象没有 columnsProviderName='SQLOLEDB', Query="DATABASE_NAME.1"."dbo"."TABLE_NAME"']。
> 消息 7357，级别 16，状态 2，第 2 行
> 无法处理对象 '"DATABASE_NAME.1"."dbo"."TABLE_NAME"'。OLE DB 提供程序“SQLOLEDB”指示该对象没有列。*

连接到数据库名称中没有句点的同一个链接服务器有效；

```
select top 10 * 
FROM [LINKED_SERVER].[DATABASE_NAME].dbo.[TABLE_NAME] 
```

由于我无法控制对现有数据库名称的许多引用，我希望找到一种避免永久重命名数据库的解决方案。

我希望能够创建同义词或其他别名，或者找到其他方法来使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:32:24.573

当用括号 [] 转义时，通过链接服务器访问的数据库名称中的句点是完全可以接受的 - 你得到的错误一定是别的东西。

我可以在我的测试台上确认这一点：

![http://www.heavencore.co.uk/filehub/uploaded/LinkedServerWithPeriod.jpg](../Images/9ff224287797d6e29654d3ccd66467aa.png)

**一个想法，您为链接服务器使用旧`SQLOLEDB`提供程序，您是否尝试过使用`SQLNCLI10`？**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-23T16:00:27.267

避免标识符中的句点，

例如在 SSMS

```
sp_help [sales.order] 
```

即使有括号也不行

# android - 在加载 ListView 时更新划掉的项目

> ID：14269629
> 
> 赞同：1
> 
> 时间：2013-01-11T00:14:48.267
> 
> 标签：android, android-listview

我对 Android 编程相当陌生，并尝试在从内部存储加载信息时在列表视图中设置项目。

我有两个正在使用的全局数组：第一个是一个字符串数组，其中包含列表中项目的名称，第二个是一个布尔数组，用于跟踪哪些项目被划掉。我在列表视图中使用 TextView。

```
main_activity.xml:

<ListView
        android:id="@+id/listViewMyList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
</ListView>

rowlayout.xml:
<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="3dp"
    android:layout_marginBottom="3dp"
    android:text="@+id/label" /> 
```

我创建了一个 onClickListener() ，它成功更新了每个列表项的状态：

```
public class MainActivity extends Activity
{
// Initialize the list (global list values)
String[] values = new String[0]; // array of items for the list
boolean[] checkedVals = new boolean[0]; // keep track of which items are crossed-off
String localFileName = "myListData.csv";

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // read the data from file if present
    readListFromFile();        

    // find the ListView
    ListView lst = (ListView) findViewById(R.id.listViewMyList);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.rowlayout, R.id.label, values);
    lst.setAdapter(adapter);

    // define what happens on click
    lst.setOnItemClickListener(new OnItemClickListener()
    {
          public void onItemClick(AdapterView<?> parent, View view,int position, long id)
          {
              // read crossed status and set text flags for strikethrough                 
              if (checkedVals[position])
              {                   
                  TextView text1 = (TextView)view.findViewById(R.id.label);
                  text1.setPaintFlags(text1.getPaintFlags() & ~Paint.STRIKE_THRU_TEXT_FLAG);
                  text1.setTextColor(0xff000000);
                  checkedVals[position] = false;
              }
              else
              {
                  TextView text1 = (TextView)view.findViewById(R.id.label);
                  text1.setPaintFlags(text1.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
                  text1.setTextColor(0xff888888);
                  checkedVals[position] = true;
              }
              // save the data in a file
              saveListToFile();
          }
    });

} 
```

因此，此代码适用于划掉和取消划掉项目。我不知道如何在加载列表时在不单击或任何活动的情况下划掉某些项目（由 checkedVals 布尔数组确定）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:20:50.577

您需要通过扩展 ArrayAdapter 和覆盖来创建自定义适配器`getView()`。

该`getView()`方法加载每一行的布局，这是您应该检查该行是否在您的`checkedVals`数组中并使用适当的标志进行绘制的地方。由 Android 首席程序员 Romain Guy 撰写的[Google Talk](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)提供了大量有关如何执行此操作的最佳实践的信息。

# android - 解析 JSON，数组中的数组（Android）

> ID：14269632
> 
> 赞同：3
> 
> 时间：2013-01-11T00:15:02.883
> 
> 标签：android, json, parsing

我正在尝试从[http://www.worldweatheronline.com](http://www.worldweatheronline.com) JSON 提要解析天气信息。这是它的格式：

```
{ "data" : { "current_condition" : [ { "cloudcover" : "75",
        "humidity" : "100",
        "observation_time" : "10:01 PM",
        "precipMM" : "0.0",
        "pressure" : "1015",
        "temp_C" : "3",
        "temp_F" : "37",
        "visibility" : "4",
        "weatherCode" : "143",
        "weatherDesc" : [ { "value" : "Mist" } ],
        "weatherIconUrl" : [ { "value" : "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0006_mist.png" } ],
        "winddir16Point" : "N",
        "winddirDegree" : "360",
        "windspeedKmph" : "11",
        "windspeedMiles" : "7"
      } ], 
```

所以有`current_condition JSONArray`，我设法从中获取值。但是，我如何从内部数组中读取值`weatherDesc`或`weatherIconUrl`？

这是我用于阅读`precipMM`、、、`pressure`等的代码`temp_C`：

```
String precipMM = null;
    try {
        JSONObject data = json.getJSONObject("data");

        JSONArray current_condition = data.getJSONArray("current_condition");

        for(int i = 0; i < current_condition.length(); i++) {
            precipMM = current_condition.getJSONObject(i).getString("precipMM");
        }
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:20:52.323

这很简单

```
current_condition.getJSONArray() 
```

与 json 解析一样，我建议查看这个库 [http://jackson.codehaus.org/](http://jackson.codehaus.org/)

**编辑**在您发表评论后

您发布的代码可以改进很多。您正在遍历每个值的数组。你可以对数组做同样的事情。只需调用 .getJsonArray()，而不是 .getJsonObject()。但是，这意味着您的代码会为其他每个值引发错误。我会再次推荐杰克逊图书馆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T00:18:38.250

`weatherDesc`并`weatherIconUrl`作为数组提供，因此您可以按项目访问，即在 for 循环中。

只需使用与您相同的命令`current_condition`

# iphone - UITableView 和 Cell 在错误的位置显示内容

> ID：14269646
> 
> 赞同：1
> 
> 时间：2013-01-11T00:16:53.223
> 
> 标签：iphone, xcode, uitableview, reuseidentifier

![第一张有主页按钮问题的图片](../Images/695276326271f333988d18bd59262b47.png) ![第二张图片带栏](../Images/768db72630113066ef4af7a1e78bb540.png)

我的 tableview 有两个问题，即 tablefooterview 中的“Go Home”按钮在尚未到达 tableview 末尾时显示（在屏幕中间）。正如您在第一张图片中看到的，主页按钮出现在屏幕中间，这是我不想要的。它必须保持在表格的底部。

我的第二个问题是分段控件，它通常位于视图的顶部，在我的一个单元格中再次出现，它不属于它。我已确保已禁用单元重用标识符。

单元格中只填充了文本，所以我不明白为什么显示分段控件。

**编辑：添加代码**

填充单元格的代码：（只是其中的一部分，但它只是另一个单元格中的其他文本，没有任何变化）

```
if(indexPath.section == 2){
    [[cell textLabel] setTextAlignment:UITextAlignmentLeft];
    [[cell textLabel] setText:_actor.actorBeschrijving];

    if([[cell textLabel] text] == nil)
    {
        [[cell textLabel] setText:@"Druk om een beschrijving toe te voegen"];
        [[cell textLabel] setTextColor:[UIColor grayColor]];

    }
}

if(indexPath.section == 3 && control.selectedSegmentIndex == 1){
    if([has count] == 0){

        [[cell textLabel] setTextAlignment:UITextAlignmentLeft];
        [[cell textLabel] setText: @"Voeg een nieuw object toe"];
    }
    else{

        if(indexPath.row < [has count]){

            AnObject *object = (AnObject*)[has objectAtIndex:indexPath.row];
            [[cell textLabel] setTextAlignment:UITextAlignmentLeft];
            [[cell textLabel] setText:object.objectNaam];

        }

        if(indexPath.row == [has count]){
            [[cell textLabel] setTextAlignment:UITextAlignmentLeft];
            [[cell textLabel] setText:@"Voeg een nieuw object toe"];    
        }
    }

}
if(indexPath.section == 3 && control.selectedSegmentIndex == 3){

    if([isResponsible count] == 0){

        [[cell textLabel] setTextAlignment:UITextAlignmentLeft];
        [[cell textLabel] setText: @"Voeg een nieuwe goal toe"];
    }
    else{

        if(indexPath.row < [isResponsible count]) {

            Goal *goal = (Goal*)[isResponsible objectAtIndex:indexPath.row];
            [[cell textLabel] setText:goal.goalNaam];

        }

        if(indexPath.row == [isResponsible count]){
            [[cell textLabel] setTextAlignment:UITextAlignmentLeft];
            [[cell textLabel] setText: @"Voeg een nieuwe goal toe"];

        }
    }

} 
```

页脚代码：

```
 @property (nonatomic, retain) IBOutlet UIView *myFooterView;

-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section

{
    if(section == tableView.numberOfSections - 1)
    return 50.0f;

}

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {

if(myFooterView == nil) {
    //allocate the view if it doesn't exist yet
    myFooterView  = [[UIView alloc] init];

    //create the button
    UIButton *footButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    [footButton setFrame:CGRectMake(110, 10, 100, 30)];

    //set title, font size and font color
    [footButton setTitle:@"Go Home" forState:UIControlStateNormal];
    [footButton.titleLabel setFont:[UIFont boldSystemFontOfSize:18]];

    //set action of the button
    [footButton addTarget:self action:@selector(clickPressed:)
         forControlEvents:UIControlEventTouchUpInside];

    //add the button to the view
    [myFooterView addSubview:footButton];
}

//return the view for the footer
return myFooterView; 
```

}

额外评论：我在不同的视图（不同的表格视图）中使用相同的页脚，只有一个部分，这里的按钮显示正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:18:31.153

嘿，您可以动态地为分段控件和按钮编写代码，而不是放置静态代码。

例如。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
     static NSString *CellIdentifier = @"MyIdentifier";
     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
     cell.selectionStyle = UITableViewCellSelectionStyleNone;

     if (indexPath.section == 0)
     {
        if (indexPath.row == 0)
        {
             //Dynamic Code for Segmented Control
             [cell.contentView addSubview:segementedControl];
        }
     }

     -----------

     if (indexPath.section == 4) // For Eg. 5 is the last section. You can use your own
     {
        if (indexPath.row == 0)
        {
             //Dynamic Code for Button
             [cell.contentView addSubview:button];
        }
     }
 } 
```

希望它会工作。谢谢。

# ios - XCode 中的调试：异常断点

> ID：14269647
> 
> 赞同：6
> 
> 时间：2013-01-11T00:17:03.350
> 
> 标签：ios, objective-c, xcode, nsmanagedobjectcontext

我现在正在调试一个随机的 SIGTRAP 崩溃，它只是在后台发生。这可能与某个`NSManagedObjectContext`地方有关。

除此之外，我正在尝试使用异常断点对其进行调试，以至少找出它的来源。唯一的问题是崩溃/断点发生在 0 objc_exception_throw 中，这对我没有帮助。

我得到的数据如下所示：

```
libobjc.A.dylib`objc_exception_throw:
0x32a3a960:  push   {r4, r5, r6, r7, lr} // breakpoint stops here
0x32a3a962:  add    r7, sp, #12
0x32a3a964:  mov    r4, r0
0x32a3a966:  movs   r0, #16
0x32a3a968:  blx    0x32a46854                ; symbol stub for: -[NSObject isEqual:] 
```

所以我的问题是，我怎样才能创建一个异常断点来更早地启动自己？我试图让断点出现在崩溃之前的实际 Objective-C 代码的最后一点。

我曾尝试编辑要共享的断点，在抛出时中断，然后在捕获时中断，并更改了 Objective-C、C++ 和“all”之间的异常类型，但没有成功。

如何让异常断点提前抛出？

除非有办法破译我发布的代码。如果可能的话，请给我一个简短的解释，说明它的含义，以及你是如何破译它的，这样我也可以学会这样做:)

感谢大家！

**如果我让程序运行...**

它继续崩溃，看起来像这样：

```
libsystem_kernel.dylib`mach_msg_trap:
0x30830ea0:  mov    r12, sp
0x30830ea4:  push   {r4, r5, r6, r8}
0x30830ea8:  ldm    r12, {r4, r5, r6}
0x30830eac:  mvn    r12, #30
0x30830eb0:  svc    #128
0x30830eb4:  pop    {r4, r5, r6, r8} // SIGTRAP throws here
0x30830eb8:  bx     lr 
```

**将命令“bt”作为调试器命令运行时的堆栈跟踪**

```
* thread #13: tid = 0x2337, 0x32a3a960 libobjc.A.dylib`objc_exception_throw, stop reason = breakpoint 1.1
    frame #0: 0x32a3a960 libobjc.A.dylib`objc_exception_throw
    frame #1: 0x340f9fee CoreData`-[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 298
    frame #2: 0x341522d2 CoreData`-[NSManagedObjectContext save:] + 730
    frame #3: 0x32054b02 UIKit`__84-[UIManagedDocument writeContents:toURL:forSaveOperation:originalContentsURL:error:]_block_invoke_0 + 30
    frame #4: 0x34155bc0 CoreData`developerSubmittedBlockToNSManagedObjectContextPerform + 88
    frame #5: 0x36e3d4b6 libdispatch.dylib`_dispatch_client_callout + 22
    frame #6: 0x36e419f6 libdispatch.dylib`_dispatch_barrier_sync_f_invoke + 30
    frame #7: 0x34155d42 CoreData`-[NSManagedObjectContext performBlockAndWait:] + 174
    frame #8: 0x32054862 UIKit`-[UIManagedDocument writeContents:toURL:forSaveOperation:originalContentsURL:error:] + 986
    frame #9: 0x3205418a UIKit`-[UIManagedDocument writeContents:andAttributes:safelyToURL:forSaveOperation:error:] + 698
    frame #10: 0x32017ce4 UIKit`__block_global_4 + 68
    frame #11: 0x32017c80 UIKit`__block_global_3 + 156
    frame #12: 0x339c767c Foundation`-[NSFileCoordinator _invokeAccessor:thenCompletionHandler:] + 144
    frame #13: 0x339c791e Foundation`__73-[NSFileCoordinator coordinateWritingItemAtURL:options:error:byAccessor:]_block_invoke_0 + 90
    frame #14: 0x339c894e Foundation`-[NSFileCoordinator(NSPrivate) _invokeAccessor:orDont:thenRelinquishAccessClaimForID:] + 202
    frame #15: 0x339c926c Foundation`-[NSFileCoordinator(NSPrivate) _coordinateWritingItemAtURL:options:error:byAccessor:] + 548
    frame #16: 0x339c78be Foundation`-[NSFileCoordinator coordinateWritingItemAtURL:options:error:byAccessor:] + 90
    frame #17: 0x32017254 UIKit`-[UIDocument _coordinateWritingItemAtURL:error:byAccessor:] + 720
    frame #18: 0x320179a0 UIKit`__59-[UIDocument saveToURL:forSaveOperation:completionHandler:]_block_invoke_0 + 284
    frame #19: 0x36e3e11e libdispatch.dylib`_dispatch_call_block_and_release + 10
    frame #20: 0x36e41ece libdispatch.dylib`_dispatch_queue_drain$VARIANT$mp + 142
    frame #21: 0x36e41dc0 libdispatch.dylib`_dispatch_queue_invoke$VARIANT$mp + 40
    frame #22: 0x36e4291c libdispatch.dylib`_dispatch_root_queue_drain + 184
    frame #23: 0x36e42ac0 libdispatch.dylib`_dispatch_worker_thread2 + 84
    frame #24: 0x33ba7a10 libsystem_c.dylib`_pthread_wqthread + 360
    frame #25: 0x33ba78a4 libsystem_c.dylib`start_wqthread + 8 
```

**查看 Matt Wilding 在他的答案评论中发布的链接！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:31:23.083

您无法控制断点触发的位置。但是，一旦您遇到断点，就可以使用该`bt`命令打印当前堆栈跟踪。

* * *

编辑：使用回溯...

看起来 UIDocument 的`-saveToURL:forSaveOperation:completionHandler:`方法是罪魁祸首。我以前从未使用过该课程，所以我无法提供太多帮助。如果您在代码中的任何位置调用该方法（例如从块中调用该方法？），您也可以在此处放置一个断点，以防万一失败。

# javascript - 如何动态调用方法？

> ID：14269652
> 
> 赞同：0
> 
> 时间：2013-01-11T00:17:23.407
> 
> 标签：javascript

如何调用存储在对象文字中的方法？

如何动态选择这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:18:47.760

您可以像平常一样使用该变量。只需将其传递给`hasOwnProperty`，然后像使用`key`变量进行属性查找一样使用它。

```
if (Mo[key].hasOwnProperty(property)) {
    Mo[key][property]();
} 
```

但是由于您假设该属性将是一个函数，因此`typeof`测试可能更安全。

```
if (typeof Mo[key][property] === "function") {
    Mo[key][property]();
} 
```

# barcode - ZXING Barcode Decode error "Attempted to read or write protected memory"

> ID：14269657
> 
> 赞同：0
> 
> 时间：2013-01-11T00:17:33.530
> 
> 标签：barcode, zxing, windows-store-apps

我正在尝试使用 ZXING 演示“WindowsRTDemo”，但无法正常工作。演示是[从这个站点](http://zxingnet.codeplex.com/SourceControl/changeset/view/84413)下载的。

这是我正在运行的代码：

```
 protected override async void OnNavigatedTo(NavigationEventArgs e)
  {
     try
     {
        var cameras = await DeviceInformation.FindAllAsync(DeviceClass.VideoCapture);
        if (cameras.Count < 1)
        {
           ScanResult.Text = "No camera found";
           return;
        }
        var settings = new MediaCaptureInitializationSettings { VideoDeviceId = cameras[0].Id }; // 0 => front, 1 => back

        await _mediaCapture.InitializeAsync(settings);
        VideoCapture.Source = _mediaCapture;
        await _mediaCapture.StartPreviewAsync();

        while (_result == null)
        {
           var photoStorageFile = await KnownFolders.PicturesLibrary.CreateFileAsync("scan.jpg", CreationCollisionOption.GenerateUniqueName);
           await _mediaCapture.CapturePhotoToStorageFileAsync(ImageEncodingProperties.CreateJpeg(), photoStorageFile);

           var writeableBmp = new WriteableBitmap(3000, 2000);
           writeableBmp.SetSource(await photoStorageFile.OpenReadAsync());

           var barcodeReader = new BarcodeReader
           {
              TryHarder = true,
              AutoRotate = true
           };
           _result = barcodeReader.Decode(writeableBmp);

           if (_result != null)
           {
              CaptureImage.Source = writeableBmp;
           }

           await photoStorageFile.DeleteAsync(StorageDeleteOption.PermanentDelete);
        }

        await _mediaCapture.StopPreviewAsync();
        VideoCapture.Visibility = Visibility.Collapsed;
        CaptureImage.Visibility = Visibility.Visible;
        ScanResult.Text = _result.Text;
     }
     catch (Exception ex)
     {
        ScanResult.Text = ex.Message;
     }
  } 
```

此代码仅在两个地方从下载的演示中修改。

1) 我将 VideoDeviceId 从 [1] 更改为 [0] 因为我只有一个前置摄像头。

2) 另一个变化是创建新的 WriteableBitmap。下载的演示将大小设置为 (640, 360)。当我尝试使用它时，我得到了一个关于索引超出数组边界的异常。我认为这是因为我的网络摄像头具有更高的分辨率，所以我增加了尺寸以匹配（并且我已经尝试超过）我的网络摄像头的分辨率。现在，当我运行它时，在调用barcodeReader.Decode(writeableBmp) 时出现以下异常：

```
System.AccessViolationException was unhandled
  HResult=-2147467261
  Message=Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
  Source=mscorlib
  StackTrace:
       at System.Runtime.InteropServices.Marshal.CopyToManaged(IntPtr source, Object destination, Int32 startIndex, Int32 length)
       at System.Runtime.InteropServices.WindowsRuntime.WindowsRuntimeBufferExtensions.CopyTo(IBuffer source, UInt32 sourceIndex, Byte[] destination, Int32 destinationIndex, Int32 count)
       at System.Runtime.InteropServices.WindowsRuntime.WindowsRuntimeBufferExtensions.ToArray(IBuffer source, UInt32 sourceIndex, Int32 count)
       at ZXing.BitmapLuminanceSource..ctor(WriteableBitmap writeableBitmap) in c:\Users\michael.jahn\Documents\SVN\ZXing.Net.Build\Source\lib\BitmapLuminanceSource.Silverlight.cs:line 50
       at ZXing.BarcodeReader.<.cctor>b__4(WriteableBitmap bitmap) in c:\Users\michael.jahn\Documents\SVN\ZXing.Net.Build\Source\lib\BarcodeReader.cs:line 60
       at ZXing.BarcodeReaderGeneric`1.Decode(T barcodeBitmap) in c:\Users\michael.jahn\Documents\SVN\ZXing.Net.Build\Source\lib\BarcodeReaderGeneric.cs:line 376
       at WindowsRT.MainPage.<OnNavigatedTo>d__2.MoveNext() in c:\Users\Joseph Martinez\Documents\Visual Studio 2012\Projects\WindowsRTBarcodeDemo\MainPage.xaml.cs:line 53
       at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()
       at System.Threading.Tasks.SynchronizationContextAwaitTaskContinuation.<.cctor>b__3(Object state)
       at System.Threading.WinRTSynchronizationContext.Invoker.InvokeCore()
       at System.Threading.WinRTSynchronizationContext.Invoker.InvokeInContext(Object thisObj)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.WinRTSynchronizationContext.Invoker.Invoke()
  InnerException: 
```

同样，这不是我的代码，除了那两个小改动。

问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:40:17.620

您确定 (3000, 2000) 是您网络摄像头的准确分辨率吗？我想如果实际的相机分辨率小于此，则可能会发生上述错误。

在创建之前尝试确定图像的确切大小`WriteableBitmap`：

```
await _mediaCapture.CapturePhotoToStorageFileAsync(ImageEncodingProperties.CreateJpeg(), photoStorageFile);

var stream = await photoStorageFile.OpenReadAsync()
var bmp = new BitmapImage();
bmp.SetSource(stream);
var writeableBmp = new WriteableBitmap(bmp.PixelWidth, bmp.PixelHeight);
stream.Seek(0);
writeableBmp.SetSource(stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:47:57.213

我修改了 WindowsRT 演示。它现在应该适合你。您可以从存储库中获取当前版本： [https](https://zxingnet.svn.codeplex.com/svn/trunk) ://zxingnet.svn.codeplex.com/svn/trunk 我使用了 Damir 的解决方案并添加了一些其他小的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T16:46:59.430

您可以直接从视频设备属性中设置正确的 WriteableBitmap 大小。你应该等待 Source setter。

```
var properties = _mediaCapture.VideoDeviceController.GetMediaStreamProperties(MediaStreamType.VideoPreview);
var videoEncodingProperties = properties as VideoEncodingProperties;
writeableBmp = new WriteableBitmap((int)videoEncodingProperties.Width, (int)videoEncodingProperties.Height);
await writeableBmp.SetSourceAsync(await photoStorageFile.OpenReadAsync()); 
```

# youtube-api - YouTube 分析报告查询突然失败（以前工作过）

> ID：14269659
> 
> 赞同：1
> 
> 时间：2013-01-11T00:17:40.663
> 
> 标签：youtube-api

以下 YouTube 分析查询对我来说突然失败（过去几周一直有效）：

https://www.googleapis.com/youtube/analytics/v1/reports?ids=channel==[我的频道 id]&start-date=2010-10-27&end-date=2010-10-30&metrics=views&dimensions=day, InsightTrafficSourceType&sort=day&prettyPrint=false

错误：

{"error":{"errors":[{"domain":"global","re​​ason":"badRequest","message":"无效查询。查询不符合预期。"}],"code ":400,"message":"无效查询。查询不符合预期。"}}

如果我只使用“day”维度，则似乎与“insightTrafficSourceType”维度相关，因为查询成功。如果我使用“insightPlaybackLocationType”维度，这也会失败。

API 有什么变化吗？我想在我的报告中使用这两个维度。

任何帮助，将不胜感激。

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:00:42.150

Stack Overflow 不是报告错误的好地方；我已经在[https://code.google.com/p/gdata-issues/issues/detail?id=3963](https://code.google.com/p/gdata-issues/issues/detail?id=3963)打开了针对此问题的公共问题跟踪器错误报告，我建议“加星标”以保留更新了问题的状态。

另请参阅[http://apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html](http://apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html)了解有关自己创建错误报告/功能请求的信息。

# c# - 生成字典 从类型字符串 BUT - 对于 UITestControls

> ID：14269664
> 
> 赞同：1
> 
> 时间：2013-01-11T00:18:28.157
> 
> 标签：c#, wpf

MSDN 文档显示了以下示例，可以完全按照我的意愿进行操作。但是，但是，但是......为了获得各种 UITestControls（例如“WpfWindow”、“WpfButton”等），一个字符串中的分隔项是什么？

=================================== MSDN代码============== ======================

```
private static string instanceSpec = "System.EventArgs;System.Random;" +
    "System.Exception;System.Object;System.Version";

public static void Main()
{
    string[] instances = instanceSpec.Split(';');
    Array instlist = Array.CreateInstance(typeof(object), instances.Length);
    object item;
    for (int i = 0; i < instances.Length; i++)
    {
        // create the object from the specification string
        Console.WriteLine("Creating instance of: {0}", instances[i]);
        item = Activator.CreateInstance(Type.GetType(instances[i]));
        instlist.SetValue(item, i);
    }
    Console.WriteLine("\nObjects and their default values:\n");
    foreach (object o in instlist)
    {
        Console.WriteLine("Type:     {0}\nValue:    {1}\nHashCode: {2}\n",
            o.GetType().FullName, o.ToString(), o.GetHashCode());
    } 
```

# javascript - 使用 YUI 事件侦听器在 Jquery 中移动 DOM 元素？

> ID：14269665
> 
> 赞同：1
> 
> 时间：2013-01-11T00:18:32.547
> 
> 标签：javascript, jquery, dom, yui

我有一个 DOM 元素，其中的元素上有 YUI 事件侦听器。我试图让 DOM 元素进入页面的不同部分，但是一旦这样做，我似乎会丢失在 YUI 中设置的事件。有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T11:38:17.367

我面临着完全相同的问题。我在同一个应用程序中同时拥有 YUI 和 jQuery，因为它是以前使用 YUI 构建的以前存在的应用程序，我正在尝试使用 jQuery 来实现更容易使用 jQuery 实现的功能。

正如我所经历的，你不应该仅仅通过移动元素就丢失 YUI 事件：

```
jQuery("#element1").before(jQuery("#element2")); 
```

另一方面，如果您尝试克隆和交换元素，[即使使用带有参数的克隆函数来克隆事件，也会](http://api.jquery.com/clone/)出现问题：

```
var copy_to = $(to).clone(true);
var copy_from = $(this).clone(true);
$(to).replaceWith(copy_from);
$(this).replaceWith(copy_to); 
```

据此，我会说不可能 CLONE 保留使用 YUI 绑定的事件的元素，但可以移动它们。

**编辑：** 这就是我移动和交换两个绑定了 YUI 事件的 DOM 元素的方式：

```
 function makeElementAsDragAndDrop(elem) {
     $(elem).draggable({
         //snap : '#droppable',
         snapMode : 'outer',
         revert : "invalid",
         helper: function(event) { // This is a fix as helper: "original" doesn't work well
            return $(this).clone().width($(this).width());
          },
         zIndex : 100,
         handle: ".title"
     });
     $(elem).droppable({
         //activeClass : "ui-state-hover",
         //hoverClass : "ui-state-active",
         drop : function(event, ui) {
            var sourcePlaceholder = $( "<div/>", 
               {
                  id: "sourcePlaceholder"
               }).insertBefore(ui.draggable);

            var targetPlaceholder = $( "<div/>", 
               {
                  id: "targetPlaceholder"
               }).insertBefore(this);

            $(ui.draggable).insertBefore(targetPlaceholder);
            $(this).insertBefore(sourcePlaceholder);

            sourcePlaceholder.remove();
            targetPlaceholder.remove();
         },
         tolerance : "pointer"
     });
  } 
```

如您所见，上面的代码是我使用 jQuery 编写的 DIV 拖放实现的一部分。

希望能帮助到你。

PS：如果有人知道如何克隆元素保留使用 YUI 绑定的事件，请告诉我们！

# jquery - Fancybox autoScale（自动调整大小）问题

> ID：14269670
> 
> 赞同：1
> 
> 时间：2013-01-11T00:19:05.103
> 
> 标签：jquery, jquery-plugins, fancybox

我有这个代码

```
<a href="/popup/size-charts.aspx" class="popup">Size Charts</a> 
```

还有这个

```
$('.popup').fancybox(); 
```

但是第一次点击时弹出窗口总是太小

![在此处输入图像描述](../Images/4fd4bed23a50cfbcf9ec6c0c3fff3cd4.png)

第二次点击（和第三次等等）总是完美的

![在此处输入图像描述](../Images/11810dd8526e3f8be68c7375252d3c7e.png)

我尝试过明确设置`autoScale: true`，并在显示弹出窗口后调用`$.fancybox.resize()`，两者都不做。

我有很多这种弹出窗口，并希望避免手动设置尺寸。
有谁知道从第一次打开时就获得正确尺寸的任何解决方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T00:53:23.993

我发现从弹出页面中删除所有 CSS 修复了自动大小问题，尽管这会使弹出页面更丑陋。

# html - Nokogiri 从 html 中提取节点

> ID：14269673
> 
> 赞同：2
> 
> 时间：2013-01-11T00:19:07.937
> 
> 标签：html, ruby, nokogiri

我需要从 html 中提取节点（不是内部文本，因此我可以保留格式以供进一步手动调查）。我写了下面的代码。但是由于 traverse 的工作原理，我在新的 html 文件中得到了重复项。

这是真正要解析的html。[http://www.sec.gov/Archives/edgar/data/1750/000104746912007300/a2210166z10-k.htm](http://www.sec.gov/Archives/edgar/data/1750/000104746912007300/a2210166z10-k.htm)

基本上我需要将Item10和“注册人的执行官”之间的部分提取到下一个项目。第 10 项在所有文件中，但“注册人的执行官”并非在所有文件中。我需要获取节点而不仅仅是文本，因为我想保留表格，所以在下一步中，我可以解析这些部分中的表格（如果有的话）。

示例 html：

```
html = "
<BODY>
<P>Dont need this </P>  
<P>Start</P>
<P>Text To Extract 1 </P>
<P><Font><B>Text to Extract 2 </B></Font></P>
<DIV><TABLE>
<TR>
<TD>Text to Extract 3</TD>
<TD>Text to Extract 4</TD>
</TR>
</TABLE></DIV>
<P>End</P>
</BODY>
" 
```

我想得到：

```
html = "
<BODY>
<P>Start</P>
<P>Text To Extract 1 </P>
<P><Font><B>Text to Extract 2 </B></Font></P>
<DIV><TABLE>
<TR>
<TD>Text to Extract 3</TD>
<TD>Text to Extract 4</TD>
</TR>
</TABLE></DIV>
<P>End</P>
</BODY>
" 
```

当 start_keyword 出现时开始提取。当 end_keyword 出现时结束提取。

我需要从一个 html 中提取多个部分。关键字可以出现在具有不同名称的节点中。

```
doc.at_css('body').traverse do |node|
    inMySection  = false

    if node.text.match(/#{start_keyword}/)
        inMySection = true
    elsif node.text.match(/#{end_keyword}/)
        inMySection = false
    end
    if inMySection
        #Extract the nodes
    end
end 
```

在参考了这些帖子后，我还尝试使用 xpath 来实现这一点，但没有成功：

[XPath 轴，获取所有后续节点，直到](https://stackoverflow.com/questions/4767430/xpath-axis-get-all-following-nodes-until)

[XPath 查找所有后续兄弟姐妹，直到特定类型的下一个兄弟姐妹](https://stackoverflow.com/questions/8492304/xpath-to-find-all-following-siblings-up-until-the-next-sibling-of-a-particular-t)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:16:03.467

这不是 Nokogiri 的问题，而是你的算法的问题。您已将标志`inMySection`放入循环中，这意味着在每个步骤中您再次将`false`其设置为，如果之前设置为 true，您将失败。

根据您的示例 HTML 输入和输出，以下代码段有效：

```
nodes = Nokogiri::HTML(html)
inMySection  = false
nodes.at_xpath('//body').traverse do |node|
  if node.text.match(/Start/)
    inMySection = true
  elsif node.text.match(/End/)
    inMySection = false
  end
  node.remove unless inMySection
end
print nodes 
```

# iphone - UIImageView 旋转影响位置？

> ID：14269675
> 
> 赞同：2
> 
> 时间：2013-01-11T00:19:30.517
> 
> 标签：iphone, objective-c, uiimageview, accelerometer, uiaccelerometer

我有一个 UIImageView 设置为使用以下代码在屏幕上上下移动加速度计的值：

```
ship.center = CGPointMake(ship.center.x, ship.center.y+shipPosition.y); 
```

在 accelerometerDidAccelerate 方法中设置的 CGPoint 在哪里`shipPosition`使用：

```
shipPosition.y = acceleration.x*60; 
```

显然这很好用，非常简单。当我尝试做同样简单的事情时遇到了麻烦，根据图像的加速度改变图像的旋转。我这样做使用：

```
ship.transform = CGAffineTransformMakeRotation(shipPosition.y); 
```

出于某种原因，这会导致一件非常奇怪的事情发生，因为每次调用 main 方法时，图像都会恢复到原来的位置。我可以看到图像移动到它应该在的位置的帧，但随后立即弹回。

这个问题只发生在我有旋转线时，注释掉它工作正常。我不知道这里发生了什么，我为不同的应用程序做过很多次，我从来没有遇到过这样的问题。事实上，我从我创建的另一个应用程序中复制了我的代码，它可以正常工作。

**编辑：**

*真正*让我困惑的是，当我使用以下方法将旋转角度从加速度更改为船舶位置时：

```
ship.transform = CGAffineTransformMakeRotation(ship.center.y/10); 
```

当我这样做时，船实际上根据加速度计旋转但没有移动，这很疯狂，因为改变`ship.center.y`意味着船的位置在改变，但事实并非如此！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:55:11.393

您应该在设置他的中心坐标或框架之前将 视图的*变换*设置回，然后再应用新的变换。`CGAffineTransformIdentity`

如果视图被转换，则该`frame`属性返回转换后的坐标，而不是*真实*的（实际上转换后的也是真实的）坐标。

从[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW5)中引用：

> 警告：如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

* * *

**更新/实际答案：**
实际问题是

```
shipPosition.y = acceleration.x*60; 
```

由于您将 y 位置设置为`accelerometerDidAccelerate`. 不会记住它的旧值
。`acceleration`所以如果你移动你的设备，它会达到一个峰值，当你放慢速度时，它会再次减速。

您的船在最高加速度下将是 +/-60，但当您停止移动设备时将为 0，并且`shipPosition.y`将为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:24:49.817

CGAffineTransformMakeRotation 需要以弧度为单位的角度，而不是度数。

1 弧度 = M_PI / 180.0 度

# c++ - 带有 C++ 编译器包的 Eclipse

> ID：14269682
> 
> 赞同：0
> 
> 时间：2013-01-11T00:20:12.460
> 
> 标签：c++, eclipse, compiler-construction

我即将教授 C++ 入门课程，并希望使用 Eclipse 进行开发/学习。为了让学生将 Eclipse C++ 设置为在 Windows 上工作，安装编译器然后安装 Eclipse 并对其进行配置并不是很直观。我的问题是，有没有办法将它们捆绑在一起，然后为学生提供这些文件以在他们的计算机上提取并开始开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:38:52.967

如果将[MinGW](https://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/)安装到默认安装位置`C:\MinGW`，则[Eclipse CDT](http://www.eclipse.org/cdt/)将自动检测 MinGW 工具链并正确配置自身。

如果您遇到问题，请确保 PATH 变量指向`C:\MinGW\bin`，这可以通过向您的学生提供脚本来自动完成，但可能不需要，因为 MinGW 安装程序应该自动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:41:01.870

您的所有学生是否都在同一台计算机上工作，例如实验室计算机？或者在他们自己的电脑上，可能有不同的操作系统和 64/32 位？

如果它们都在同一个平台上工作，您可以创建一个包含适用的 java/eclipse/和 c 编译器的目录以及一个带有脚本的快速教程来设置它们的环境变量。

如果他们在自己的计算机上工作，这将变得非常复杂。他们将需要每个 java/eclipse/c 编译器的不同版本，并且可能会遇到不同的问题。

我是一名学生，我们倾向于使用旧电脑。我第一次尝试运行 eclipse cdt 是在一台装有 vista 的计算机上。

话虽如此，您可以创建一个 zip 目录，其中包含可以下载和安装的几个不同选项。这是我不得不为我的高级设计团队做的一个头痛的事情。我们 7 个人遇到了 6 个不同的问题。

# node.js - 当用户登录时，如何仅更改页面的标题栏？

> ID：14269683
> 
> 赞同：1
> 
> 时间：2013-01-11T00:20:15.307
> 
> 标签：node.js, login

我为我的网站设置了一个登录系统，服务器授权正确的登录详细信息，然后发送一个散列 cookie 来维护登录会话。

问题是当用户登录时，我想发送完全相同的页面，只是在自定义标题栏中包含他们的登录详细信息（我在这里找到的大多数帖子都讨论了在登录时发送一个全新的页面，我知道如何去做）。

我想我对此有点困惑，因为我正在读取整个 html 文件，因此无法在现场进行编辑，并且我不想进行 websocket 调用，因为应该加载它们的信息从页面加载的那一刻开始。

我确定我只是在这里遗漏了一些非常简单的东西，但是我无法通过搜索找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:31:08.233

听起来您想发送相似的页面而不是完全相同的页面。如果是这种情况，那么我建议您使用视图模板在服务器上生成 HTML，而不是使用静态 HTML 文件。我使用[Kiwi](https://npmjs.org/package/kiwi)，我有一个 layout.kiwi 文件，它为我的许多页面呈现主要布局。布局模板在标题部分呈现链接：

```
 {{each headerItems}}
      {{if $value.link}}
        <a href="${$value.link}">${$value.title}</a>
      {{else}}
        <span>${$value.title}</span>
      {{/if}}
    {{/each}} 
```

在服务器上，我构建了一个数组 {link: '', title: ''} 对象并将其传递给呈现模板的函数。我根据用户是否登录或用户是否有权访问其他管理页面来构建不同的数组。

# android - android.util.AndroidException: INSTRUMENTATION_FAILED:

> ID：14269687
> 
> 赞同：27
> 
> 时间：2013-01-11T00:20:31.833
> 
> 标签：android, instrumentation

我有一个简单的 android 应用程序，我正在使用我的手机对其进行测试。因此，有两种方法可以做到这一点：

1.  使用日食
2.  使用命令行

问题：

当我使用 Eclipse 运行单元测试用例时，它会在运行时在我的手机上安装应用程序并运行 junit test，然后如果我在 CLI 上使用命令： adb -d shell am instrument -w com.abc.xyz.test/android.test .InstrumentationTestRunner，它运行良好。

但是，如果我直接在 CLI 中运行上述命令而没有先在 Eclipse 中运行单元测试用例，则会出现错误：

```
android.util.AndroidException：INSTRUMENTATION_FAILED：com.abc.xyz.test/android.test.InstrumentationTestRunner
        在 com.android.commands.am.Am.runInstrument(Am.java:586)
        在 com.android.commands.am.Am.run(Am.java:117)
        在 com.android.commands.am.Am.main(Am.java:80)
        在 com.android.internal.os.RuntimeInit.finishInit（本机方法）
        在 com.android.internal.os.RuntimeInit.main(RuntimeInit.java:263)
        在 dalvik.system.NativeStart.main（本机方法）
INSTRUMENTATION_STATUS: id=ActivityManagerService
INSTRUMENTATION_STATUS：错误=无法找到检测目标包：com.abc.xyz
INSTRUMENTATION_STATUS_CODE：-1

```

AndroidMANifest.xml 包含：

```
 android:name="android.test.InstrumentationTestRunner"
    android:targetPackage="com.abc.xyz" 

    inside instrumentation tag 
```

谁能帮帮我

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-07-06T23:32:07.440

我想你会在一月份解决它，但我使用命令行工具，发现了类似的问题（错误消息不同）并像我在以下步骤中解释的那样解决了它。我完成了从创建一个带有空测试的虚拟项目到成功测试运行的整个过程。我希望它对某人有用：

**第一步**，创建项目：

```
android create project 
  --name MyExample 
  --target "Google Inc.:Google APIs:17" 
  --path MyExample 
  --package com.example 
  --activity MyExampleActivity 
```

**第二步**，创建测试项目：

```
android create test-project 
  --path MyExampleTest 
  --name MyExampleTest 
  --main ../MyExample 
```

**第三步**，访问你的项目目录，构建它并检查过程是否成功结束：

```
cd MyExample && ant debug 
```

**第四步**，安装到模拟器：

```
adb -s emulator-5554 install -r bin/MyExample-debug.apk 
```

**第五步**，访问你的测试项目目录并尝试运行测试：

```
cd ../MyExampleTest && 
adb shell am instrument -w com.example.tests/android.test.InstrumentationTestRunner 
```

这会产生：

```
INSTRUMENTATION_STATUS: id=ActivityManagerService
INSTRUMENTATION_STATUS: Error=Unable to find instrumentation info for: ComponentInfo{com.example.tests/android.test.InstrumentationTestRunner}
INSTRUMENTATION_STATUS_CODE: -1
android.util.AndroidException: INSTRUMENTATION_FAILED: com.example.tests/android.test.InstrumentationTestRunner
        at com.android.commands.am.Am.runInstrument(Am.java:676)
        at com.android.commands.am.Am.run(Am.java:119)
        at com.android.commands.am.Am.main(Am.java:82)
        at com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)
        at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:235)
        at dalvik.system.NativeStart.main(Native Method) 
```

**第六步**，列出你的检测类并确保你当前的项目缺失：

```
adb shell pm list instrumentation 
```

在我的机器中产生：

```
instrumentation:com.android.emulator.connectivity.test/android.test.InstrumentationTestRunner (target=com.android.emulator.connectivity.test)
instrumentation:com.android.emulator.gps.test/android.test.InstrumentationTestRunner (target=com.android.emulator.gps.test)
instrumentation:com.android.example.spinner.tests/android.test.InstrumentationTestRunner (target=com.android.example.spinner)
instrumentation:com.android.smoketest.tests/com.android.smoketest.SmokeTestRunner (target=com.android.smoketest)
instrumentation:com.android.smoketest.tests/android.test.InstrumentationTestRunner (target=com.android.smoketest)
instrumentation:com.example.android.apis/.app.LocalSampleInstrumentation (target=com.example.android.apis) 
```

如您所见，仪器`com.example.tests`不存在，因此我们必须创建它。

**第七步**，构建你的测试项目并检查它是否成功：

```
ant debug 
```

**第八步**，安装到模拟器：

```
adb -s emulator-5554 install -r bin/MyExampleTest-debug.apk 
```

**第九步**，列出您的仪器类并查找您的项目之一：

```
adb shell pm list instrumentation 
```

这会产生：

```
instrumentation:com.android.emulator.connectivity.test/android.test.InstrumentationTestRunner (target=com.android.emulator.connectivity.test)
instrumentation:com.android.emulator.gps.test/android.test.InstrumentationTestRunner (target=com.android.emulator.gps.test)
instrumentation:com.android.example.spinner.tests/android.test.InstrumentationTestRunner (target=com.android.example.spinner)
instrumentation:com.android.smoketest.tests/com.android.smoketest.SmokeTestRunner (target=com.android.smoketest)
instrumentation:com.android.smoketest.tests/android.test.InstrumentationTestRunner (target=com.android.smoketest)
instrumentation:com.example.tests/android.test.InstrumentationTestRunner (target=com.example)
instrumentation:com.example.android.apis/.app.LocalSampleInstrumentation (target=com.example.android.apis) 
```

看倒数第二个`instrumentation:com.example.tests`，这是我们想要的。

**第十步**，运行你的测试：

```
adb shell am instrument -w com.example.tests/android.test.InstrumentationTestRunner 
```

这会产生：

```
Test results for InstrumentationTestRunner=
Time: 0.0

OK (0 tests) 
```

就这些。现在实现你的测试，像往常一样编译和安装。此外，您可以像这样删除它们：

```
adb shell pm uninstall com.example.tests 
```

但是您将需要再次创建检测类以避免相同的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-23T19:50:09.847

更精确的解释/方法如下：

确保你这样做

```
adb install -r bin/<>-debug.apk 
```

来自测试*和*应用程序目录。

之后`ant test`应该从测试目录工作。（我的猜测是测试包中缺少对应用程序的依赖 - 这导致了失败）。

除了上面的小技巧，我遵循的其余程序来自[http://developer.android.com/](http://developer.android.com/)上的 android 测试介绍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-15T15:54:54.743

确保您卸载以前的应用程序并重新安装或仅在卸载以前的应用程序后才开始测试

# image - Jank Busting 大型流体图像

> ID：14269688
> 
> 赞同：5
> 
> 时间：2013-01-11T00:20:36.323
> 
> 标签：image, performance, web-applications, responsive-design, paint

我有一个包含许多大型流体图像的页面。[http://altarjewelry.com/gallery](http://altarjewelry.com/gallery)

我想在滚动时获得流畅的 60fps webapp 感觉。Chrome DevTools 告诉我我的绘制时间是最大的问题（您可以在滚动时自行检查）。我假设这是由于我的许多大型流体图像。

我已经阅读了关于 HTML5Rocks 的每篇关于性能的文章。我发现了许多关于 JS 性能的好技巧，但没有帮助优化大图像绘制时间，而不是使用固定大小的小图像，这对我来说不是一个选择，因为我正在构建一个响应式站点。

我已经根据客户提供响应式图像。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-01T01:40:17.910

Not really sure about how your gallery looks because it never loaded from the URL in your post, and I don't know if that's a javascript issue or what--but I'll take a stab at helping you come up with a solution. Image optimization is image optimization, regardless of whether or not you're building a responsive site.

# Approach and Design Considerations

Do you really need one large, high resolution image for each item, at the same DPI/PPI and compression, that should be responsive?

Or, should you serve appropriately sized images at differing DPI/PPI and compression, to different displays, all of which are still used in a responsive application?

## Popular Convention

You're showing a gallery, and typically, you want smaller representations of the actual image--thumbnails or placeholders, generally of lower resolution, which link to the actual image at a higher resolution. This is an accepted design approach, and if you're going to vary from it, be sure it's with good reason.

### The Lowest Common Denominator

If you're building a responsive site, some users will obviously be on mobile devices which may have resolutions as small as 320 pixels wide. Consider things like that, and this: even if someone shows up on a desktop, are you going to have huge, full width images loading? They will take forever to load, and visitors will never see your gallery. How is your gallery to look on a wide screen desktop? If your intention is to have one image full width across the entire page, and load the same image regardless of the device accessing your site, you may be using responsive design, but you'll find that's far away from best or even good practice.

### The Flip-Side, Large/Wide Screens

Why not have four gallery images going across a desktop? Or more? And if that's the case, they're likely to have a maximum size in any case. I honestly don't know because I've tried to load your site a few times and get nothing. But consider that if there's a maximum size practically for your gallery images in an initial display, say 6 images at 200 pixels each across a 1200 pixel max layout width (Or, are you using a % based framework and using 100% of the display width? Even responsive sites often limit the max width of the content area, and these things all would help determining a more appropriate answer) solutions begin to emerge.

Since no image needs to be larger than 200 pixels in that case, and on a phone where your columns might be displaying only one image that you want full width, you can work with a maximum initial width of 480px wide images.

### Higher Quality, Smaller Files

We'll assume you want them high quality. That's fine. You still need to reduce files size, and you do that with compression. Now, you may feel compressing a photo to 50% or even more makes it blurry, and it certainly will at low ppi (pixels per inch) settings.

### The Secret To Better Compression

What you need to do is change default image editor settings from traditional defaults like 72 or 90 ppi, and crank them up to 300, 400, 500, or more--and THEN apply compression. If that image is 480px wide, and you've only got 72ppi, compression will quickly erode quality. However, having several hundred extra pixels per inch will allow more information to be stored. Then, you can apply much higher compression rates, and shrink file sizes down quite a bit more.

**The Oversized Image Approach**

Another trick is to do the same thing, and slightly oversize the image. If 480px is the max size for your thumbnails/small pics, make them actually 540-600 px wide, with 400-500ppi and compress them at really high settings. The browser will resize to the max width of 480 px...but then you have a performance hit there. Everything is a trade off. You can blur backgrounds in images as well, allowing the foreground/main focus of the photo to be of higher quality while the background requires less information, yielding smaller file sizes.

**Not Suitable For Batch Processing**

This should be done individually for each image, batch editing does not generally get the most out of this technique, because the color information is so different in each photo. One photo might be best quality and smallest size for your purposes at 300ppi and 50% quality, another at 500ppi and 35% quality. You'll want to do this not just for your gallery thumbnails, but multiple images. No point in serving up a 1400px wide full size desktop to someone who's browsing your site with 480px wide/resolution display after all. Use media queries to serve up the appropriate ballpark sized image, and have a small, medium and large variant. Done right, you don't even need to be serving larger images to those browsing with phones...the gallery images they are viewing are good enough.

The compression setting is not so heavily determinate of the final image quality as the number of pixels you have to compress goes up. More pixels to work with, the better quality at higher compression settings.

## Design Considerations and Smart Image Loading

### Break It Up Into Smaller Content Chunks

Also, consider the process/design of your gallery. Do you have 20 items? 100? 400? Are you trying to show them all on one page? Break it up into small numbers...12-20 per page. Smaller and fewer images will load faster, and can remain responsive, with links for those who want a larger or higher quality image. No need to show a huge, high quality image to someone browsing with their phone.

**Pre-fetching and Loading**

Server side scripting, and even some javascript solutions can help with this. You might do things like limiting each gallery page to four rows of four images, and then after page load, have a javascript that pre-fetches the first four images that will display on page 2\. If your visitor goes to page two after scrolling through page one, the first four images are loaded in cache, and display quickly while the others load normally, giving the experience of a faster page load.

If the visitor goes to another page in the site, you didn't waste bandwidth on 12 images and only cost you the bandwidth of four. Smart design might be to use those first four images on page two of the gallery elsewhere on the site...so that first gallery page visit actually sped up page load elsewhere and does not in fact give up bandwidth for loading 4 unnecessary images. Think the process through, and solutions will suggest themselves.

### Resources

Anyway, here are relevant articles/posts/links you may find helpful in understanding all of this:

**Are Compressive Images A Good Solution For High Resolution Displays?**

[http://www.vanseodesign.com/web-design/compressive-image-tests/](http://www.vanseodesign.com/web-design/compressive-image-tests/)

**Reducing image sizes (ResponsiveDesign.is)**

[https://responsivedesign.is/articles/reducing-image-sizes](https://responsivedesign.is/articles/reducing-image-sizes)

**Search benfrain dot com for this post:**

How to serve high-resolution website images for retina displays

**And a tool you might find useful...**

adaptive-images dot com

# html - XSL 使用备用命名空间在 XML 中转换 HTML

> ID：14269693
> 
> 赞同：1
> 
> 时间：2013-01-11T00:20:56.003
> 
> 标签：html, xml, xslt

使用浏览器，我想使用 XSL 样式表转换可能包含一些 HTML 的 XML。在[这篇文章中](https://stackoverflow.com/questions/1398571/html-inside-xml-should-i-use-cdata-or-encode-the-html)，用户[Mads Hansen](https://stackoverflow.com/users/14419/mads-hansen)写道：

> 如果您的 HTML 格式正确，则只需嵌入 HTML 标记，而无需在 CDTATA 中转义或换行。如果可能的话，将内容保存在 XML 中会有所帮助。它为您转换和操作文档提供了更大的灵活性。您可以为 HTML 设置一个名称空间，以便您可以消除 HTML 标记与包装它的其他 XML 的歧义。

我喜欢提出的解决方案，但无法使其发挥作用。我使用 h 作为 html 的命名空间：

临时文件

```
<?xml version='1.0' encoding='UTF-8' ?>
<?xml-stylesheet type='text/xsl' href='temp.xsl'?>
<root xmlns:h="http://www.w3.org/1999/xhtml">
  <MYTAG title="thisnthat">
    text before ol
    <h:ol>
      <h:li>item</h:li>
      <h:li>item</h:li>
    </h:ol>
    text after ol
  </MYTAG>
</root> 
```

临时文件

```
<xsl:stylesheet version="1.0"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:h="http://www.w3.org/1999/xhtml">
  <xsl:output method="html" version="1.0" encoding="UTF-8" indent="yes"/>
  <xsl:template match="/root">
    <html lang="en-US">
      <head>
        <meta charset="UTF-8" />
        <title></title>
      </head>
      <body>
        <xsl:apply-templates />
      </body>
    </html>
  </xsl:template>
  <xsl:template match="MYTAG">
    <h3>
      <xsl:value-of select="@title" />
    </h3>
    <xsl:apply-templates />
  </xsl:template>
</xsl:stylesheet> 
```

输出（来自 Firefox 18）是：

```
thisnthat
text before ol item item text after ol 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T01:00:40.123

由于您正在生成最终的 HTML 并且处于控制之中，因此我不确定您为什么要在此处使用命名空间。只有当您的自定义标签和标准 HTML 之间存在冲突时，您才需要这样做——即，如果您有一个`<a...>`与 HTML 具有不同语义的自定义标签。我让你的变换工作

a) 删除所有 HTML 命名空间

b) 添加恒等变换

**测试.xml**

```
<?xml version='1.0' encoding='UTF-8' ?>
<?xml-stylesheet type='text/xsl' href='test.xsl'?>
<root>
    <MYTAG title="thisnthat">
        text before ol
        <ol>
            <li>item</li>
            <li>item</li>
        </ol>
        text after ol
    </MYTAG>
</root> 
```

**测试.xsl**

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" encoding="UTF-8" indent="yes"/>
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/root">
        <html lang="en-US">
            <head>
                <meta charset="UTF-8" />
                <title></title>
            </head>
            <body>
                <xsl:apply-templates />
            </body>
        </html>
    </xsl:template>
    <xsl:template match="MYTAG">
        <h3>
            <xsl:value-of select="@title" />
        </h3>
        <xsl:apply-templates />
    </xsl:template>
</xsl:stylesheet> 
```

# html - 根据条件分配类结果在剃刀中

> ID：14269699
> 
> 赞同：0
> 
> 时间：2013-01-11T00:21:37.130
> 
> 标签：html, razor

我目前有这个代码

```
@if(true) { <text> <td class="add"></td> </text> } else { <text> <td class="remove"></td> </text> } 
```

我想切换到这样的东西

```
<td> @if(true) { <text> @class="add" </text> } else { <text> @class="remove" </text> }</td> 
```

我不确定这是否正确，或者它的正确语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:15:59.343

```
@functions {
    object getAttributes(bool val)
    {
        if (val)
        {
            return new {@class="add"};
        }
        return new { @class="remove"};
    }
}

<td>
@Html.TextBoxFor(model => model.FirstName,@getAttributes(style))   
@getAttributes(style)
<td> 
```

# macos - OSX：如何从 CGWindowListCopyWindowInfo 中过滤掉菜单栏

> ID：14269702
> 
> 赞同：2
> 
> 时间：2013-01-11T00:22:08.437
> 
> 标签：macos, core-graphics

我正在使用 CGWindowListCopyWindowInfo 来获取桌面上的窗口列表。我想只使用[Window List keys](https://developer.apple.com/library/mac/#documentation/Carbon/reference/CGWindow_Reference/Constants/Constants.html#//apple_ref/doc/constant_group/%29)的值过滤掉可见的窗口。我遇到问题的一个窗口是 OSX 菜单栏。我想到的一种解决方案是查看窗口边界的 X 和 Y。没有可见的窗口似乎两者都等于 0，但我不确定这种方法有多可靠。

另一种方法是将PID号与OSX Window Server的PID号进行比较，但我不知道如何得到它。谁能指出我正确的 API 或知道过滤菜单栏的可靠方法？

编辑：我有与下面的 kondy 相同的代码，并添加了以下内容，因为 listOptions 本身还不够好：

```
 CGRect windowBounds;
CGRectMakeWithDictionaryRepresentation((CFDictionaryRef) [windowInfo objectForKey:(id)kCGWindowBounds], &windowBounds);

if (!(windowBounds.origin.x == 0 && windowBounds.origin.y == 0))
{
    // Work with windows that aren't the Menubar
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T15:16:53.633

我找到了过滤掉“Window Server”的答案：

```
CGWindowListOption listOptions = kCGWindowListOptionOnScreenOnly | kCGWindowListExcludeDesktopElements;
CFArrayRef windowList = CGWindowListCopyWindowInfo(listOptions, kCGNullWindowID); 
```

使用这些 ORed 选项，我在“活动管理器”中得到与 mac 的“窗口进程”相同的结果

我希望它会帮助你！

# symfony - Symfony 2 成功后重定向

> ID：14269703
> 
> 赞同：0
> 
> 时间：2013-01-11T00:22:09.980
> 
> 标签：symfony

根据 symfony 2 文档，默认情况下，如果用户尝试访问安全页面，他们将被提示到登录页面，成功登录后，他们将被重定向到他们打算访问的原始页面。（[参考](http://symfony.com/doc/current/cookbook/security/form_login.html#redirecting-after-success)）。

但是在我的应用程序中，无论他们是否尝试访问 mysite.com/blog/post/2/edit，用户总是被重定向到 /。

这是我的security.yml：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ]

    providers:
        main:
            entity: {class: Done\PunctisBundle\Entity\User, property: username}

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        main:
            remember_me:
                key: %secret%
                lifetime: 3600
                path: /
                domain: ~
            pattern: ^/
            anonymous: ~
            form_login:
                login_path: /login
                check_path: /login_check
            logout:
                path:   /logout
                target: /

    access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/signup, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/verification, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/popup/, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/ajax/track, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/ajax/socialbox, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/$, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/, roles: ROLE_USER }

    encoders:
        Done\PunctisBundle\Entity\User:
            algorithm:   md5
            iterations: 1
            encode_as_base64: false 
```

和登录表单：

```
<?php $view -> extend('DonePunctisBundle:TemplateBases:default.html.php'); ?>

<?php $view['slots']->start('body')
?>
    <h1 class="worldH1">
                Effettua il <span>login</span> su Punctis<br>e inizia a guadagnare!
         </h1>
         <div id="loginContent" class="container pageContent">
             <?php 
             if(isset($error)){
                 ?>
                <div class="alert alert-error">
                    <?=$error->getMessage() ?>
                </div>
                 <?php
             } else{?>
             <div class="alert">
                <strong>SEI NUOVO?</strong> Se non hai ancora un account, <a href="#">registrati</a> in meno di un minuto!
            </div>
            <?php } ?>
            <div id="loginForm">
                <div class="row">
                    <div class="span3">
                        <h2>Logina via Social</h2>
                         <p>
                            <a href="#" id="signupFacebookStart" class="socialButton">  <?=$this -> get('translator') -> trans('login.via.facebook', array(), 'front'); ?></a>
                        </p>

                        <p>
                            <a href="#" id="signupTwitterStart" class="socialButton tw">  <?=$this -> get('translator') -> trans('login.via.twitter', array(), 'front'); ?></a>
                        </p>
                    </div>
                    <div class="span4">

                        <div id="loginFormCanvas">
                            <h2>Logina via Mail</h2>
                        <form action="<?php echo $view['router']->generate('done_punctis_user_login_check') ?>" method="post">

                                             <label class="control-label required" for="login_email">Mail:</label>

                                                <input type="text" value="<?php echo (isset($last_username)? $last_username: null); ?>"  id="login_email" name="_username" class="input-large">

                                            <label class="control-label required"  for="login_email">Password:</label>

                                                <input type="password"  name="_password" value=""  id="login_email"  class="input-large">

        <label for="remember_me" class="checkbox"><input type="checkbox" id="remember_me" name="_remember_me" checked /> Remember me</label>
                                                <input type="hidden" name="_target_path" value="/" />
                                                <button class="btn btn-primary" type="submit">Login</button> <a id="loginForgetPass" href="#">Password Dimenticata?</a>

                                        </form>

                    </div>
                    <div class="clear"></div>
                    </div>

                </div>

            </div>

         </div>

<?php $view['slots']->stop() ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:37:46.470

默认情况下，**属性路径**的表单登录策略是，当用户尝试在未经身份验证的情况下访问安全页面时，将路径存储到会话中，然后再重定向到登录页面。所以成功登录后，用户被重定向到这个路径。但是有两种方法可以禁用此机制。

如果将**always_use_default_target_path**选项设置为*TRUE*，则​​不会存储路径，并且用户在成功登录后将始终重定向到配置的**default_target_path**（默认*/*）。

如果您在请求中添加**_target_path**参数，用户将在成功登录后被重定向到该参数包含的路径。

因此，在您的示例中，用户在登录后总是被重定向到路径**/**，因为您的登录表单中有一个**_target_path**隐藏字段，其值为**/**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:36:13.823

在**security.yml**`form_login`的防火墙部分，您必须指定要使用*referer*：

 ***```
security:
    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ]

    providers:
        main:
            entity: {class: Done\PunctisBundle\Entity\User, property: username}

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        main:
            remember_me:
                key: %secret%
                lifetime: 3600
                path: /
                domain: ~
            pattern: ^/
            anonymous: ~
            form_login:
                login_path: /login
                check_path: /login_check
                use_referer: true
            logout:
                path:   /logout
                target: /

    access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/signup, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/verification, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/popup/, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/ajax/track, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/ajax/socialbox, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/$, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/, roles: ROLE_USER }

    encoders:
        Done\PunctisBundle\Entity\User:
            algorithm:   md5
            iterations: 1
            encode_as_base64: false 
```***

# javascript - 自定义数组对象

> ID：14269704
> 
> 赞同：10
> 
> 时间：2013-01-11T00:22:19.767
> 
> 标签：javascript, prototype

我是原型设计和实例化的新手，因此有一个问题：

*   如何创建一个函数来构造一个新数组，该数组还添加了一些带有原型但不修改默认数组函数的属性？

例如 ：

```
function Cool_Object() {
    this = new Array() // Construct new array.
    //This is only for the example. I know you can't do that.
}
Cool_Object.prototype.my_method = function() {
    // Some method added
}; 
```

所以，如果你打电话：

```
var myObject = new Cool_Object(); 
```

myObject 将是一个数组，并有一个名为“ `my_method`”的方法（它实际上调用了一个函数）。

但是默认的 Array 对象是完整的。

提前致谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T00:24:25.223

你有点倒退了。只需`Array.prototype`用作您的自定义对象的原型。

```
function Cool_Object() {

    this.my_method = function () {
        return 42;
    }
}

Cool_Object.prototype = Array.prototype;

var foo = new Cool_Object();
foo.my_method(); // 42
foo.push(13);
foo[0]; // 13 
```

通过引入中间类型，您可以在不修改 的情况下同时获得和`Array.prototype`的原型：`my_method``Cool_Object``Array.prototype`

```
function Even_Cooler() {}
Even_Cooler.prototype = Array.prototype;

function Cool_Object() {}
Cool_Object.prototype = new Even_Cooler();

Cool_Object.prototype.my_method = function () {
    return 42;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T00:26:55.353

您不能只分配给`this`，它不起作用并抛出`ReferenceError`. 只需`Cool_Object`扩展`Array`。

一种方法：

```
var Cool_Object = Object.create(Array.prototype);
Cool_Object.my_method = function() {
    // Some method added
}; 
```

然后创建更多对象

```
var obj = Object.create(Cool_Object); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T00:30:16.503

使用数组作为函数的原型，让你的新类型“继承”自 Array，然后在原型中引入新方法：

```
function CustomArray() {}

CustomArray.prototype = [];

// introduce a new method to your custom array type
CustomArray.prototype.total = function() {
    return this.reduce(function(ret, el) {
        return ret+el;
    }, 0);
};

// introduce another new method to your custom array type
CustomArray.prototype.arithmetiMean = function() {
    return this.total()/this.length;
}; 
```

或者，您可以在新实例中引入这些方法：

```
function CustomArray() {
    // introduce a new method to your custom array object
    this.total = function() {
        return this.reduce(function(ret, el) {
            return ret+el;
        }, 0);
    };

    // introduce another new method to your custom array object    
    this.arithmetiMean = function() {
        return this.total()/this.length;
    };
}

CustomArray.prototype = [];

var arr = new CustomArray();

arr.push(1); // push is an array-standard method
arr.push(2);
arr.push(3);
arr.push(4);
arr.push(5);
arr.push(6);
arr.push(7);
arr.push(8);
arr.push(9);
arr.push(10);

console.log(arr.arithmetiMean()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-12T18:32:42.577

```
function PseudoArray() {

};
PseudoArray.prototype = Object.defineProperties(Object.create(Array.prototype), {
	constructor: {value:PseudoArray}
})
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-10T13:04:41.627

添加这个以供参考，因为现在大多数浏览器都支持 Object.create，所以创建自己的数组对象的好方法是这样的：

```
function MyCustomArray(){

}

MyCustomArray.prototype = $.extend(Object.create(Array.prototype), {
    /* example of creating own method */
    evenonly : function(){
        return this.filter(function(value){return (value % 2 == 0);});
    },

    /* example for overwriting existing method */
    push : function(value){
        console.log('Quit pushing me around!');

        return Array.prototype.push.call(this, value);
    }
});

var myca = new MyCustomArray();
myca instanceof MyCustomArray /*true*/
myca instanceof Array /*true*/
myca instanceof Object /*true*/
myca.push(1); /*Quit pushing me around!*/
myca.push(2); /*Quit pushing me around!*/
myca.push(3); /*Quit pushing me around!*/
myca.push(4); /*Quit pushing me around!*/
myca.push(5); /*Quit pushing me around!*/
myca.push(6); /*Quit pushing me around!*/

myca.length; /*6*/
myca.evenonly() /*[2, 4, 6]*/ 
```

使用 jQuery 的 $.extend，因为它可以方便地保持代码结构化，但不需要它，您可以这样做：

MyCustomArray.prototype = Object.create(Array.prototype);

MyCustomArray.prototype.push = function(){...}

我更喜欢在原型上定义方法，而不是将它们放在构造函数中。它更干净，并且可以避免您的自定义数组对象被不必要的功能弄得一团糟。

# mysql - 在 Amazon EC2 实例上登录 phpMyAdmin 时遇到问题

> ID：14269706
> 
> 赞同：0
> 
> 时间：2013-01-11T00:22:25.710
> 
> 标签：mysql, amazon-ec2, phpmyadmin

好吧，我很难过......我已经重新安装了这个实例 3 次，但我似乎无法弄清楚。我几乎按照本教程[http://calebogden.com/wordpress-on-linux-in-the-amazon-cloud-with-mac/](http://calebogden.com/wordpress-on-linux-in-the-amazon-cloud-with-mac/)逐字逐句进行操作，但有一个例外，我从 phpMyAdmin 安装了 phpmyadmin v3.5.5网站。

此外，我没有通过终端安装它，而是使用 Coda 进行安装，通过 SFTP 拖放到 /var/www/html 文件夹中。

EC2 实例是一个 Amazon Linux AMI 2012.09 64 位。

问题：

我去了 /phpMyAdmin/setup/index.php 创建了一个带有 cookie 身份验证类型的“新服务器”

我只更改了“此服务器的详细名称”和“配置身份验证的密码”。

现在当我去 /phpMyAdmin/setup/index.php 登录时，输入：

UN: Root PW: mypassword（我使用的是我安装 mySQL 时创建的那个）

/usr/bin/mysqladmin -u root 密码'SUPERSECUREPASSWORD'</p>

我不断收到此错误：1045 无法登录到 MySQL 服务器

我知道我正在输入密码，就像我在终端中输入密码一样。对于这么简单的问题，我很抱歉这么长的帖子，我只是想尽可能详细，以防我做错了什么。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:38:42.780

找到了一个有效的简单教程。

[https://gist.github.com/1105007](https://gist.github.com/1105007)

# android - 相机和画廊 onActivityResult 的问题

> ID：14269712
> 
> 赞同：0
> 
> 时间：2013-01-11T00:23:39.183
> 
> 标签：android, bitmap, camera, imageview, uri

当我单击图像按钮时出现问题，会打开一个对话框，询问我是要从图库中选择还是拍照。当我从图库中选择所有正确的图像时，我将其发送到服务器。但是当我选择相机时，我可以拍照但图片没有出现，然后我看不到我发送到服务器的内容（如果有的话）。这是代码：

```
public class MainActivity extends Activity {

private final String PHP_URL = "http://wapps.no-ip.org/testservice/service.php";
private EditText fldLocation, fldDescription;
ImageView targetImage, btnLocation;
Button btnSend;
JSONParser jParser;
HttpResponse response;
Intent intent;
Bitmap theImage;
String selectedImagePath;
Uri imageUri;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);
    // ===============================================
    // tag elements from layout
    // ===============================================
    fldLocation = (EditText) findViewById(R.id.fldLocation);
    fldDescription = (EditText) findViewById(R.id.fldDescription);
    btnSend = (Button) findViewById(R.id.btnSend);
    targetImage = (ImageView) findViewById(R.id.targetimage);
    btnLocation = (ImageView) findViewById(R.id.btnLocation);

    registerForContextMenu(btnSend);
    targetImage.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            openAddPhoto();

        }
    });
    btnSend.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            MakePost();

        }
    });
}

public void MakePost() {

    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(PHP_URL);

    //targetImage.buildDrawingCache();
    //theImage = targetImage.getDrawingCache();

    //theImage = BitmapFactory.decodeFile(selectedImagePath);

    ByteArrayOutputStream stream = new ByteArrayOutputStream();

    theImage.compress(Bitmap.CompressFormat.JPEG, 100, stream);

    byte[] byteArray = stream.toByteArray();

    String str = Base64.encodeBytes(byteArray);

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("addimg", "true"));
        nameValuePairs.add(new BasicNameValuePair("img", str));
        //nameValuePairs.add(new BasicNameValuePair("img",f.getAbsolutePath()));
        nameValuePairs.add(new BasicNameValuePair("location", fldLocation
                .getText().toString()));
        nameValuePairs.add(new BasicNameValuePair("desc", fldDescription
                .getText().toString()));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        httpclient.execute(httppost);// HttpResponse response =

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
}

public void openAddPhoto() {

    AlertDialog.Builder dialog = new AlertDialog.Builder(this);
    dialog.setTitle("Choose path");
    String[] items = { "Camera", "Gallery" };
    dialog.setItems(items, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int id) {

            if (id == 1) {
                // call gallery

                Intent pickPhoto = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                startActivityForResult(pickPhoto, 1);

            } else {
                // Call camera Intent

                Intent takePicture = new Intent(
                        MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(takePicture, 0);
            }

        }
    });

    dialog.setNeutralButton("cancel",
            new android.content.DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {

                    dialog.dismiss();
                }
            });
    dialog.show();
}

@Override
protected void onActivityResult(int requestCode, int resultCode,
        Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case 0:
        if (resultCode == RESULT_OK) {

            imageUri = data.getData();
            fldDescription.setText(imageUri.toString());
            try {
                theImage = Media.getBitmap(this.getContentResolver(), imageUri);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

        break;
    case 1:
        if (resultCode == RESULT_OK) {

            imageUri = data.getData();
            fldDescription.setText(imageUri.toString()); 
            try {
                theImage = MediaStore.Images.Media.getBitmap(this.getContentResolver(), imageUri);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            targetImage.setImageURI(imageUri);
        }

        break;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:12:12.703

您想启动意图并告诉它在哪里写入文件，然后当意图返回时，您知道文件的保存位置：

```
 File out = new File(path, somefilename);
    android.net.Uri uri = android.net.Uri.fromFile(out);

    Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);                
    takePicture.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, uri);           
    startActivityForResult(takePicture, 0); 
```

# javascript - Jquery Mobile AJAX 发布数据未保存到 localStorage

> ID：14269715
> 
> 赞同：0
> 
> 时间：2013-01-11T00:24:04.460
> 
> 标签：javascript, jquery, jquery-mobile, local-storage

我有一个 jquery 移动网络应用程序，其中包含使用单页架构的各种页面（每个 html 文件一页——我有多个 HTML 文件）。“page1”是最初加载的页面。我还有 4 个用于导航的其他选项卡 [page2、page3、page4 和 page5]，它们都是从 page1 的菜单中预取的。

在几乎每个页面上，我都使用 AJAX 发布调用与我的应用程序进行交互。为了效率/可用性，我将内容保存到 localStorage。

page1 上的代码如下所示：

```
$(document).on('pageshow','#page1', function(){ 

    var postTo = '../api/ajaxreturn.php';
    $.post(postTo, function (data){
        if (localStorage.getItem('ajaxreturn') == JSON.stringify(data)) return;
        else {
          localStorage.setItem('ajaxreturn',JSON.stringify(data));
          //alert(localStorage.getItem('ajaxreturn'))

        }
    }, "json");//end post
     //alert('hi')        

}); // end page1 
```

其他页面的编码类似。

我遇到的问题是在原始 webapp 文档加载时，信息没有保存到 localStorage。当我签入调试器时，我看到预取页面的所有 localStorage 数据都已保存。为了获得 page1 的 localStorage，我必须单击任何 page2/3/4/5，然后返回 page1。这会再次调用“pageshow”函数并且它可以工作。

更奇怪的是，当我取消注释警报（'hi'）时，如果我将警报保持几秒钟，数据确实会显示在 webapp 原始负载的 localStorage 中。

也许它与时间问题有关？比赛条件？但我知道 ajax 调用正在工作，因为如果我取消注释“alert(localStorage.getItem('ajaxreturn'))”我会看到实际内容..所以不确定它是什么。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:48:02.267

修复！！！

所以这个问题与我发布的代码无关。它与我在 HTML 中的头文件的顺序有关。

提示：严格遵循 JQUERY 移动指南！！

我错过了您应该将 custom.js 文件放在 jquery.js 和 jquery.mobile.js 之间的提示！！！

我以前的代码看起来像这样：

```
<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<script src="js/jquery.swipeButton-1.2.1.js"></script>
<script src="js/ga.js"></script>
<script src="js/custom.js"></script> 
```

当我将其更改为正确的方式时：

```
<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/custom.js"></script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<script src="js/jquery.swipeButton-1.2.1.js"></script>
<script src="js/ga.js"></script> 
```

注意 custom.js 的位置（所有自定义脚本都是为项目编写的）。

它解决了我的问题。所以一定要确保你的标题设置正确——这将为你节省数小时的头痛。希望这可以帮助你！

# asp.net-mvc-4 - ASP.NET MVC4 + SQL Server + LINQ + 24小时后删除一条记录

> ID：14269717
> 
> 赞同：1
> 
> 时间：2013-01-11T00:24:10.650
> 
> 标签：asp.net-mvc-4, sql-server-2012, record

情况：对于一个学校项目，我必须建立一个住宿网站，用户可以在其中注册并预订特定住宿仅 24 小时（之后其他用户可以预订该住宿并且他们可以选择该住宿） 24小时住宿）。我将如何触发事件以从数据库中删除记录？同样要进行预订，您需要单击链接/按钮向我的控制器发送 POST。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:28:54.853

我会选择永远不删除预订记录，而是给它一个过期字段。如果用户尝试使用预留，请检查过期字段是否已过期。

如果您必须删除预订记录，我建议您使用单独的流程。您可以实现一个定期唤醒并搜索过期保留以删除的 Windows 服务，或者从任务计划程序运行执行相同操作的控制台程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:38:12.853

**简而言之：**将记录***标记***为而不是删除它始终是一种**很好的推荐方法。**这主要是为了保存交易历史。*`IsActive = false`*

 *如果您必须删除记录，那么您可以安排一些 Windows 服务来完成这项工作，而不是单独的操作。*

# html - 在 HTML5 中，网络工作者定义是否必须在单独的 *.js 文件中

> ID：14269718
> 
> 赞同：2
> 
> 时间：2013-01-11T00:24:13.367
> 
> 标签：html, web-worker

有没有办法在主 html 文件的主体中定义一个网络工作者？像这样的东西？

```
<!DOCTYPE html>
<html>
<body>
<script>
var worker = new Worker();// NO URL IS PROVIDED
worker.onmessage = function(event) {
    alert("Reply: " + event.data);
}
worker.postMessage("Hello from index.html!");
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:34:08.820

**简而言之：** **是*的*应该是。`Web Workers`在一个独立的线程中运行。因此，他们执行的代码需要包含在单独的文件中。但在我们这样做之前，首先要做的是在您的主页中创建一个新的 Worker 对象。构造函数采用工作脚本的名称：

```
var worker = new Worker('task.js'); 
```

如果指定的文件存在，浏览器将产生一个新的工作线程，它是异步下载的。在文件完全下载并执行之前，worker 不会开始。如果您的工作人员的路径返回 404，则工作人员将静默失败。

创建worker后，通过调用`postMessage()`方法启动它：

```
worker.postMessage(); // Start the worker. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:28:40.830

Web Worker 是完全独立的程序。他们不应该那样跑。所以简短的回答是**肯定的，它们必须在单独的文件**中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T09:47:33.010

是的，如果使用 Blob 技术，您可以从 HTML 文件中的绝对 URL、字符串或其他标记加载 Web Worker

[Web Worker 加载绝对 URL](https://stackoverflow.com/questions/11211068/web-worker-loading-of-absolute-url)

# python - django-rest-framework: api 版本控制

> ID：14269719
> 
> 赞同：44
> 
> 时间：2013-01-11T00:24:19.200
> 
> 标签：python, django, rest, api, django-rest-framework

所以在谷歌上搜索似乎普遍的共识是在 REST URI 中嵌入版本号是一种不好的做法和一个坏主意。

即使在 SO 上，也有强烈的支持者支持这一点。
例如[API 版本控制的最佳实践？](https://stackoverflow.com/questions/389169/best-practices-for-api-versioning)

我的问题是关于如何完成建议的解决方案，即在 django-rest-framework 中使用接受标头/内容协商来完成此任务。

它看起来像框架中的内容协商，
[http](http://django-rest-framework.org/api-guide/content-negotiation/) ://django-rest-framework.org/api-guide/content-negotiation/ 已经配置为根据接受的 MIME 类型自动返回预期值。如果我开始对自定义类型使用 Accept 标头，我将失去框架的这种好处。

在框架中是否有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-02-17T21:42:45.153

**更新：**

现在正确支持[版本控制。](http://www.django-rest-framework.org/api-guide/versioning/)

* * *

您的链接中有一些答案：

> 我们发现将版本放在 URL 中是实用且有用的。它可以让您一目了然地知道您正在使用什么。正如公认的答案所暗示的那样，我们将 /foo 别名为 /foo/（最新版本）以便于使用、更短/更清晰的 URL 等。永远保持向后兼容性通常成本高昂和/或非常困难。我们更愿意提前通知弃用、此处建议的重定向、文档和其他机制。

所以我们采用了这种方法，并允许客户端在请求标头中指定版本（X-Version），我们是这样做的：

API 应用程序内部的结构：

```
.
├── __init__.py
├── middlewares.py
├── urls.py
├── v1
│   ├── __init__.py
│   ├── account
│   │   ├── __init__.py
│   │   ├── serializers.py
│   │   └── views.py
│   └── urls.py
└── v2
    ├── __init__.py
    ├── account
    │   ├── __init__.py
    │   ├── serializers.py
    │   └── views.py
    └── urls.py 
```

项目 urls.py：

```
url(r'^api/', include('project.api.urls', namespace='api')), 
```

api 应用级 urls.py:

```
from django.conf.urls import *

urlpatterns = patterns('',
    url(r'', include('project.api.v2.urls', namespace='default')),
    url(r'^v1/', include('project.api.v1.urls', namespace='v1')),
) 
```

版本级 urls.py

```
from django.conf.urls import *
from .account import views as account_views
from rest_framework.routers import DefaultRouter

router = DefaultRouter()
router.register('account', account_views.AccountView)
router.register('myaccount', account_views.MyAccountView)
urlpatterns = router.urls 
```

通过更改 path_info 创建一个中间件以切换到正确的代码，请注意项目级 url 中定义的命名空间（'api'）不灵活，需要在中间件中知道：

```
from django.core.urlresolvers import resolve
from django.core.urlresolvers import reverse

class VersionSwitch(object):

    def process_request(self, request):
        r = resolve(request.path_info)
        version = request.META.get('HTTP_X_VERSION', False)
        if r.namespace.startswith('api:') and version:
            old_version = r.namespace.split(':')[-1]
            request.path_info = reverse('{}:{}'.format(r.namespace.replace(old_version, version), r.url_name), args=r.args, kwargs=r.kwargs) 
```

示例网址：

```
curl -H "X-Version: v1" http://your.domain:8000/api/myaccount/ 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-17T13:17:22.653

One way of doing this is to have the versioning specified as part of the media type.

This is what GitHub [currently do for their API](http://developer.github.com/v3/media/).

You can also include media type parameters in your accept headers, eg `Accept: application/json; version=beta`, which will successfully match against `JSONRenderer`. You can then code your view to behave differently depending on the accepted media type, see [here](http://www.django-rest-framework.org/api-guide/renderers/#varying-behaviour-by-media-type).

There's lots of different patterns for versioning in APIs, and I wouldn't say there's any great consensus around the right approach yet, but that'd be one reasonable possibility.

* * *

**Update Jan 2015**: Better versioning support will be incoming in the 3.1.0 release. See [this pull request]

**Update March 2015**: Docs for the versioning API [are now available](http://www.django-rest-framework.org/api-guide/versioning/).

([https://github.com/tomchristie/django-rest-framework/pull/2285](https://github.com/tomchristie/django-rest-framework/pull/2285)) for more details.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-13T14:50:54.070

@James Lin 给出了很好的答案。在对答案@Mar0ux 的评论中询问如何处理损坏的`HyperlinkedRelatedField`字段。

我通过更改`HyperlinkedRelatedField`为`SerializerMethodField`并调用来解决这个问题`reverse`，非常不明显，将额外的参数传递`current_app`给它。

例如，我有一个应用程序“fruits_app”，命名空间版本为“v1”、“v2”。我有水果模型的序列化器。所以要序列化 ​​url 我创建了一个字段

```
url = serializers.SerializerMethodField() 
```

以及对应的方法：

```
def get_url(self, instance):
    reverse.reverse('fruits_app:fruit-detail',
        args=[instance.pk],
        request=request,
        current_app=request.version) 
```

使用嵌套命名空间，您需要将这些命名空间添加到 current_app。例如，如果您有一个应用程序“fruits_app”，其命名空间版本为“v1”、“v2”和实例命名空间“bananas”，则序列化 Fruit url 的方法如下所示：

```
def get_url(self, instance):
    reverse.reverse('fruits_app:fruit-detail',
        args=[instance.pk],
        request=request,
        current_app='bananas:{}'.format(request.version)) 
```

# android - 是否可以膨胀更多布局？

> ID：14269724
> 
> 赞同：0
> 
> 时间：2013-01-11T00:24:36.890
> 
> 标签：android, user-interface

我想根据下一个条件膨胀布局：

```
if (...) {
    view = inflater.inflate(R.layout.customer_menu_item, null);
}
else {
    view = inflater.inflate(R.layout.customer_menu_index, null);
    view = inflater.inflate(R.layout.customer_menu_item, null);
} 
```

布局`customer_menu_index`用于将索引字母插入菜单列表。第二个布局插入基本菜单项。

如何`getView(int position, View convertView, ViewGroup parentView)`在`BaseAdapter`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:03:51.077

我不知道这是否能解决你的目的，但你不能实现一个包含两种布局的 xml 文件。然后你可以操纵他们的可见性，比如，

view = inflater.inflate("the_layout_from_your_xml", null);

如果 （...）{

```
 view.finViewByID(R.id.customer_menu_index).setVisibility(false); 
```

} 别的{

```
 view.finViewByID(R.id.customer_menu_index).setVisibility(true); 
```

}

那对你有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:30:16.737

> 如何`getView(int position, View convertView, ViewGroup parentView)`在`BaseAdapter`.

`inflate()`除了设备的内存之外，您可以调用多少次没有限制。但是，您的 else 块会立即覆盖的第一个值，`view`因此请考虑使用不同的变量。

如果您计划使用多行布局，则必须覆盖`getItemViewType()`and`getViewTypeCount()`方法，否则您将在滚动 ListView、Spinner 等时看到不稳定的行为。

# vb.net - 在 VB6 中编写 .exe 以创建运行时错误“6”：溢出

> ID：14269725
> 
> 赞同：3
> 
> 时间：2013-01-11T00:24:58.593
> 
> 标签：vb.net, vb6

我需要创建一个引发 VB 运行时溢出错误的 .exe。有没有人有任何可以做到这一点的VB6代码？我正在尝试测试某个场景以进行错误处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T01:07:59.260

怎么样：

```
Dim I As Integer

I = 32767 + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:35:42.677

基于 Eric J. 的链接（见上面对问题的评论）：

```
Private Sub Form_Load()
  Dim upsize As Integer
  Dim ns As Integer
  Dim funcTable As Variant

  upsize = 34000
  upsize = 34000
  ReDim Preserve funcTable(0 To upsize + ns)

End Sub 
```

# sql - 比较指定列时找到相同行集的函数

> ID：14269726
> 
> 赞同：2
> 
> 时间：2013-01-11T00:25:05.847
> 
> 标签：sql, tsql

我想编写一个 T-SQL 函数，它可以测试表中是否存在重复的行集，其中比较了一些列而忽略了一些列。

例如，考虑以下数据集：

```
BomID   PartNumber  ItemNumber  Quantity    UnitID
4164    10004001    10001419        1         33
4169    10004001    103599          1         33
4171    10004001    103601          1         33
4163    10004001    10001329       10         33
4166    10004001    101823          8         33
10794   10012161    10001419        1         33
10799   10012161    103599          1         33
10801   10012161    103601          1         33
10793   10012161    10001329       10         33
10796   10012161    101823          8         33 
```

我想编写一个函数`Bom.f_GetPartsThatHaveAnIdenticalBom(partNumber)`，当通过**10004001**可以有效地检测到**10012161**具有通过比较 tuple 确定的重复记录`(ItemNumber, Quantity, UnitID)`。忽略关键字段**BomID**。因此，该函数将返回具有相同 BOM 的零件编号（如果有）的不同列表。

我已经使用各种技术手动完成了这个操作。但是由于我似乎越来越频繁地需要这个例程，所以我希望有一个基于集合、高效并且可以与 LINQ to Entities 查询中的其他表组合的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T02:35:53.890

以下查询使用 a`full outer join`来比较这两个集合。任何不匹配的记录都会在一侧或另一侧产生 NULL 值。子句中的比较`having`过滤掉了这些。

```
SELECT b1.PartNumber, b2.PartNumber AS TargetPartNumber
FROM bom b full outer join
     bom b2
     ON b1.ItemNumber = b2.ItemNumber AND
        b1.Quantity = b2.Quantity and
        b1.UnitID = b2.UnitID and
        b1.PartNumber <> b2.PartNumber
WHERE b1.PartNumber = @PartNumber
GROUP BY b1.PartNumber, b2.PartNumber
having count(*) = count(b1.PartNumber) and
       count(*) = count(b2.PartNumber) 
```

您可以通过在 (itemnumber, quantity, unitid, partnumber) 上设置索引来提高效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:56:53.680

这是基于鲍勃答案的修改版本的完整解决方案：

```
DECLARE @PartNumber AS udt_PartNumber; SET @PartNumber = N'10012163';

SELECT DISTINCT bom2.TargetPartNumber
FROM
    (
    SELECT PartNumber, COUNT(*) AS ItemCount
    FROM Part.BillsOfMaterials
    WHERE PartNumber = @PartNumber
    GROUP BY PartNumber
    ) AS bom1
JOIN
    (
    SELECT b1.PartNumber, b2.PartNumber AS TargetPartNumber, COUNT(*) AS ItemCount
    FROM Part.BillsOfMaterials b1
    RIGHT JOIN Part.BillsOfMaterials b2 ON b1.ItemNumber = b2.ItemNumber
                AND b1.Quantity = b2.Quantity
                AND b1.UnitID = b2.UnitID
                AND b1.PartNumber <> b2.PartNumber
    WHERE b1.PartNumber = @PartNumber
    GROUP BY b1.PartNumber, b2.PartNumber
    ) AS bom2 ON bom1.PartNumber = bom2.PartNumber
                AND bom1.ItemCount = bom2.ItemCount
WHERE bom1.ItemCount = (SELECT COUNT(*) FROM Part.BillsOfMaterials WHERE PartNumber = bom2.TargetPartNumber)
ORDER BY bom2.TargetPartNumber 
```

唯一的区别是最后的 WHERE 子句确保如果目标包含源零件编号的 BOM 中不存在的额外行，则不会找到匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T02:21:07.160

这是一个可能对您有用的 SQL 语句。

```
DECLARE @PartNumber int = 10004001

SELECT DISTINCT bom2.TargetPartNumber
FROM
    (
    SELECT PartNumber, COUNT(*) AS ItemCount
    FROM bom
    WHERE PartNumber = @PartNumber
    GROUP BY PartNumber
    ) AS bom1
JOIN
    (
    SELECT b1.PartNumber, b2.PartNumber AS TargetPartNumber, COUNT(*) AS ItemCount
    FROM bom b1
    JOIN bom b2 ON b1.ItemNumber = b2.ItemNumber
                AND b1.Quantity = b2.Quantity
                AND b1.UnitID = b2.UnitID
                AND b1.PartNumber <> b2.PartNumber
    WHERE b1.PartNumber = @PartNumber
    GROUP BY b1.PartNumber, b2.PartNumber
    ) AS bom2 ON bom1.PartNumber = bom2.PartNumber
                AND bom1.ItemCount = bom2.ItemCount
WHERE bom1.ItemCount = (SELECT COUNT(*) FROM bom WHERE PartNumber = bom2.TargetPartNumber)
ORDER BY bom2.TargetPartNumber 
```

您可以将其放入存储过程或函数中。`@PartNumber`表示您将传递给函数的值。

# symfony - Symfony 2 - 找不到 Forward()

> ID：14269731
> 
> 赞同：0
> 
> 时间：2013-01-11T00:25:34.647
> 
> 标签：symfony

我正在尝试将我的用户转发到位于另一个捆绑包中的自定义 404 页面。我已经修改了我的页面`ExceptionController`并尝试`forward()`将页面转到我的另一个错误控制器，该控制器被路由到我的自定义 404 页面。

我收到错误： `Fatal error: Call to undefined method Symfony\Bundle\TwigBundle\Controller\ExceptionController::forward() in /home/notroot/www/store/vendor/symfony/symfony/src/Symfony/Bundle/TwigBundle/Controller/ExceptionController.php on line 50`

我正在修改文件`store\vendor\symfony\symfony\src\Symfony\Bundle\TwigBundle\Controller\ExceptionController.php`。

我在 ExceptionController.php 中添加了以下几行：

```
if ($code == '404') {
    $response = $this->forward('ItemBundle:Error:pageNotFound');
    return $response;
} 
```

异常控制器.php：

```
public function showAction(FlattenException $exception, DebugLoggerInterface $logger = null, $format = 'html')
{
    $this->container->get('request')->setRequestFormat($format);

    $currentContent = $this->getAndCleanOutputBuffering();

    $templating = $this->container->get('templating');
    $code = $exception->getStatusCode();

    if ($code == '404') {
        $response = $this->forward('ItemBundle:Error:pageNotFound');
        return $response;
    }

    return $templating->renderResponse(
        $this->findTemplate($templating, $format, $code, $this->container->get('kernel')->isDebug()),
        array(
            'status_code'    => $code,
            'status_text'    => isset(Response::$statusTexts[$code]) ? Response::$statusTexts[$code] : '',
            'exception'      => $exception,
            'logger'         => $logger,
            'currentContent' => $currentContent,
        )
    );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T00:53:07.440

`Symfony/Bundle/TwigBundle/Controller/ExceptionController`不扩展通常在用户包中使用的框架控制器。此外，直接编辑存储在`vendor`目录中的任何内容也不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:16:57.977

我用`forward()`它指向的快捷方式替换了函数，如[文档](http://symfony.com/doc/2.0/book/controller.html#forwarding)中所述。

```
if ($code == '404') {
    $httpKernel = $this->container->get('http_kernel');
    $response = $httpKernel->forward(
        'ItemBundle:Error:pageNotFound'
    );
    return $response;
} 
```

# haskell - 涵盖提升数据类型的所有情况

> ID：14269732
> 
> 赞同：5
> 
> 时间：2013-01-11T00:25:42.020
> 
> 标签：haskell, data-kinds

所以我最近想出了这个巧妙的想法，希望在严格和懒惰的`State`转换器模块之间共享代码：

```
{-# LANGUAGE FlexibleInstances, DataKinds, KindSignatures #-}
module State where

data Strictness = Strict | Lazy
newtype State (t :: Strictness) s a = State (s -> (s, a))

returnState :: a -> State t s a
returnState x = State $ \s -> (s, x)

instance Monad (State Lazy s) where
  return = returnState
  State ma >>= amb = State $ \s -> case ma s of
    ~(s', x) -> runState (amb x) s'

instance Monad (State Strict s) where
  return = returnState
  State ma >>= amb = State $ \s -> case ma s of
    (s', x) -> runState (amb x) s'

get :: State t s s
get = State $ \s -> (s, s)

put :: s -> State t s ()
put s = State $ \_ -> (s, ()) 
```

您可以看到，`get`它们`put`都可以在严格类型和惰性类型上工作，没有任何重复——没有类型类实例，没有任何东西。但是，即使我涵盖了这两种可能的情况`Strictness`，但我通常没有 Monad 实例`State t s a`：

```
-- from http://blog.melding-monads.com/2009/12/30/fun-with-the-lazy-state-monad/
pro :: State t [Bool] ()
pro = do
  pro
  s <- get
  put (True : s)

-- No instance for (Monad (State t [Bool])) arising from a do statement 
```

以下工作正常，尽管需要`FlexibleContexts`：

```
pro :: (Monad (State t [Bool])) => State t [Bool] ()
-- otherwise as before 
```

然后我可以`t`在`Lazy`or处实例化`Strict`并运行结果并得到我期望的结果。但是为什么我必须给出这个背景呢？这是一个概念上的限制，还是一个实际的限制？有什么原因我错过了为什么`Monad (State t s a)`实际上不成立，还是没有办法说服 GHC 呢？

（旁白：使用上下文`Monad (State t s)` *不起作用*：

> `Could not deduce (Monad (State t [Bool])) arising from a do statement` `from the context (Monad (State t s))`

这让我更加困惑。前者肯定可以从后者推导出来吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T04:34:29.013

这是一个限制，但有充分的理由：如果它不能那样工作，那么预期的语义会是什么？

```
runState :: State t s a -> s -> (s,a)
runState (State f) s = f s

example :: s -> a
example = snd $ runState ((State undefined) >> return 1) () 
```

好吧，它可能是

```
example = snd $ runState ((State undefined) >>= \_ -> return 1) ()
        = snd $ runState (State $ \s -> case undefined s of (s',_) -> (s',1)) ()
        = snd $ case undefined () of (s',_) -> (s',1)
        = snd $ case undefined of (s',_) -> (s',1)
        = snd undefined
        = undefined 
```

或者它可能是

```
example = snd $ runState ((State undefined) >>= \_ -> return 1) ()
        = snd $ runState (State $ \s -> case undefined s of ~(s',_) -> (s',1)) ()
        = snd $ case undefined () of ~(s',_) -> (s',1)
        = snd $ (undefined,1)
        = 1 
```

这些不一样。一种选择是将函数定义为一个额外的类，例如

```
class IsStrictness t where
   bindState :: State t s a -> (a -> State t s b) -> State t s b 
```

然后定义

```
instance IsStrictness t => Monad (State t s) where
   return = returnState
   (>>=) = bindState 
```

而不是定义`bindState`为的一部分`IsStrictness`，您可以使用单例

```
data SingStrictness (t :: Strictness) where
   SingStrict :: SingStrictness Strict
   SingLazy   :: SingStrictness Lazy

class IsStrictness t where
   singStrictness :: SingStrictness t

bindState :: IsStrictness t => State t s a -> (a -> State t s b) -> State t s b
bindState ma' amb' = go singStrictness ma' amb' where
  go :: SingStrictness t -> State t s a -> (a -> State t s b) -> State t s b
  go SingStrict ma amb = ...
  go SingLazy ma amb = ... 
```

可以使用 GHC 7.6 中的单例基础设施而不是自定义类和单例类型进一步增强它。你最终会得到

```
instance SingI t => Monad (State t s) 
```

这真的没那么可怕。习惯`SingI _`在你的约束集中有很多。这就是它至少可以工作一段时间的方式，而且并不难看。

至于为什么`State t [Bool]`不能从`State t s`：问题是`State t s`在您的顶级上下文中，这意味着`s`在最外层进行量化。您正在定义一个函数，它说“对于任何 t 和 s，例如 Monad (State ts) 我会给你......”。但是，这并不是说“对于任何 t 这样的 Monad (State t [Bool]) 我会给你......”。可悲的是，这些普遍量化的约束在 Haskell 中并不容易。

# jquery-ui - jQuery 只能按一个位置垂直排序

> ID：14269733
> 
> 赞同：1
> 
> 时间：2013-01-11T00:25:43.290
> 
> 标签：jquery-ui, jquery-ui-sortable

我试图限制 jQuery 可排序列表，以便用户一次只能拖动一个位置，例如，您只能在列表中向上或向下移动一个位置，而不能跳过多个 li。这可能吗？通过具有以下功能，我可以很容易地实现垂直拖动：

```
$( "#sortable" ).sortable({
        containment: 'parent',
        axis: 'y'
}); 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:58:43.620

这个想法是在 mousedown 事件中重新安装 sortable.items：

```
$(function() {
$( "#sortable1" ).sortable({
  items: "li:not(.ui-state-disabled)",
  start: function (event, ui) {$( "#sortable1" ).sortable({items: ">*"})},
  stop: function (event, ui) {$( "#sortable1" ).sortable({items: ">*"})}
});

$( "#sortable2" ).sortable({
  cancel: ".ui-state-disabled"
});

$( "#sortable1 li, #sortable2 li" ).disableSelection();     
});

$('#sortable1 li').one('mousedown', function(e) {
$('#sortable1 li').removeClass("ui-state-disabled");
var downID = $(this).attr("id");
var priorItem = null;
var currentItem = null;
var nextItem = null;
var currentID = null;
var skipIteration = false;
$("#sortable1 li" ).each(function( index ) {
$(this).addClass("ui-state-disabled");
if (!skipIteration)
{
    if (!(currentItem == null))
    {
      nextItem = this;
      skipIteration = true;
    }

    if (!skipIteration)
    {
      currentID = $(this).attr("id");
      if (downID == currentID)
      {
        currentItem = this;
        //alert(currentID);
      }
      else
      {
          priorItem = this;
      }
    }
}

});  

if (priorItem !== null)
{
   $(priorItem).removeClass("ui-state-disabled");
}
if (currentItem !== null)
{
   $(currentItem).removeClass("ui-state-disabled");
}
if (nextItem !== null)
{
   $(nextItem).removeClass("ui-state-disabled");
}

$( "#sortable1" ).sortable({items: "li:not(.ui-state-disabled)"})

}); 
```

[http://jsfiddle.net/qnT6x/2/](http://jsfiddle.net/qnT6x/2/)

另请参阅：http: [//jqueryui.com/sortable/#items](http://jqueryui.com/sortable/#items)

# django - 过滤评估的查询集

> ID：14269734
> 
> 赞同：3
> 
> 时间：2013-01-11T00:25:44.577
> 
> 标签：django, django-models

我正在评估一个 QuerySet，然后是另一个，但第二个是第一个的子集。我试图以一种有效的方式做到这一点，尽可能少地调用数据库。（以前有人问过这个问题，但老实说，我并没有完全理解答案，我不确定它们是否完全适用于我的想法。）

使用 Django 文档的[示例 Weblog 模型](https://docs.djangoproject.com/en/1.4/topics/db/queries/#queryset-model-example)，在视图中，这是尝试优化之前的代码：

```
myblog = Blog.objects.get(pk=1)

d={} #going to pass this to my template

# not using count()
d['num_of_entries'] = len(myblog.entry_set.all()) 

# not using exists()
d['is_jolly'] = bool(Entry.objects.filter(blog=myblog, headline__startswith='Jolly'))

# ... other code but no further use of database in this view 
```

第二个 QuerySet 是第一个的子集。我是否应该尝试使用纯 Python 来获取子集（因此只评估一个 QuerySet - 少一个数据库调用）？

或者，也许只需执行以下操作？

```
# other code as above

d['num_of_entries'] = myblog.entry_set.count()

d['is_jolly'] = Entry.objects.filter(blog=myblog, headline__startswith='Jolly').exists()

# ... other code but no further use of database in this view 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T18:05:14.357

“尽可能少的数据库查询”不是正确的标准。您还想考虑这些数据库查询完成的*工作量，以及从数据库**传输*到 Django 服务器的数据量。

让我们考虑两种实现您所追求的方法。方法一：

```
entries = myblog.entry_set.all()
num_of_entries = len(entries)
is_jolly = any(e.headline.startswith('Jolly') for e in entries) 
```

方法二：

```
num_of_entries = myblog.entry_set.count()
is_jolly = Entry.objects.filter(blog=myblog, headline__startswith='Jolly').exists() 
```

在方法 1 中，有一个数据库查询，但该查询将类似于`SELECT * FROM ENTRY WHERE ...`. 它可能会获取*大量条目*，并将*它们的所有内容*通过网络传输到您的 Django 服务器，然后将几乎所有这些内容扔掉（它实际查看的唯一字段是`headline`字段）。

在方法 2 中，有两个数据库查询，但第一个是`SELECT COUNT(*) FROM ENTRY WHERE ...`仅获取一个整数的 a，第二个是`SELECT EXISTS(...)`仅获取一个布尔值的 a。由于这些查询不必获取所有匹配的条目，因此数据库有更多的可能性来优化查询。

因此，在这种情况下，方法 2 看起来要好得多，即使它发出更多查询。

# ruby - 从正则表达式中提取的字符串似乎匹配但不匹配

> ID：14269741
> 
> 赞同：0
> 
> 时间：2013-01-11T00:26:27.280
> 
> 标签：ruby, regex, selenium, testunit

这对我来说没有任何意义。我试图断言这两个日期是相同的。它们看起来一样，但不知何故它们是不同的。

```
#assert correct time and date
assert_equal(/[0-9]{1,2}, [0-9]{4} at [0-9]{1,2}:[0-9]{2} [A-Z]{2}/.match($driver.find_element(:class, "flash-information").text), /[0-9]{1,2}, [0-9]{4} at [0-9]{1,2}:[0-9]{2} [A-Z]{2}/.match($driver.find_element(:class, "news_date").text)) 
```

这是我得到的失败。

```
F
===============================================================================
Failure: <#<MatchData "10, 2013 at 4:13 PM">> expected but was
<#<MatchData "10, 2013 at 4:13 PM">>. 

   39:     #assert correct time and date
=> 40:     assert_equal(/[0-9]{1,2}, [0-9]{4} at [0-9]{1,2}:[0-9]{2} [A-Z]{2}/.match($driver.find_element(:class, "flash-information").text), /[0-9]{1,2}, [0-9]{4} at [0-9]{1,2}:[0-9]{2} [A-Z]{2}/.match($driver.find_element(:class, "news_date").text)) 
```

我在测试单元中运行它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:46:22.663

您不是在匹配字符串，而是在匹配`MatchData`对象。

```
a = "foobar".match /f/   # #<MatchData "f">
b = "foobar".match /f/   # #<MatchData "f">
c = "barfoo".match /f/   # #<MatchData "f">

a == b   # true
a == c   # false 
```

如果要比较匹配的*字符串*，则必须从`MatchData`对象中提取它们：

```
a[0]           # "f"
a[0] == b[0]   # true
a[0] == c[0]   # true 
```

# graphviz - orderGraphviz - 固定子图

> ID：14269750
> 
> 赞同：1
> 
> 时间：2013-01-11T00:27:07.830
> 
> 标签：graphviz, dot

我喜欢像这样创建一个 3 柱形图：

![在此处输入图像描述](../Images/830938cd89e802c00241b06e7bc90b56.png)

代码：

```
digraph g {
rankdir="LR";
node[shape = circle, fontsize=14];
fontsize=18;
labeljust="l";

{ rank=same;
}

edge[style=invis, fontsize=12];
subgraph clusterA {
    a->b;
    label="A";
}
subgraph clusterC {
  e->f->g;
    label="C";
}

subgraph clusterB {
 c->d;
label="B";
}

} 
```

我想创建一个子图 A、C、B 排序的图。如何在没有剩余 A--C--B 顺序的情况下向该图添加关系（例如 c->f; 和 b->g;）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:36:21.463

您可以尝试添加不应该影响布局的边缘**`constraint=false`**。在最后一个集群之后，插入如下内容：

```
edge[constraint=false, style=solid];
c->f;
b->g; 
```

如果集群重新排序，您可以添加**不可见的边缘**（确保`constraint=true`）以强制布局：

```
c -> e [constraint=true, style=invis];
e -> a [constraint=true, style=invis]; 
```

# java - Android空指针异常

> ID：14269752
> 
> 赞同：0
> 
> 时间：2013-01-11T00:27:13.340
> 
> 标签：java, android, xml

当我尝试将我的意图加载到一个处理我的数据库中数据的列表视图的类时，我得到了一个“NullPointerException”。我是列表视图的新手，所以希望有人能告诉我哪里出错了！

我在想空指针是因为在光标所在的第一行位置没有找到数据，但我*认为*查看 logcat，它是我的 XML 布局“条目”的问题吗？

这是我的 ListView 类：

```
package com.example.sqliteexample;

import android.app.Activity;
import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.widget.ListView;

public class SQLView extends Activity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    HotOrNot H = new HotOrNot(this, null, null);

    setContentView(R.layout.layout);
     ListView listContent = (ListView)findViewById(R.id.contentList);

     HotOrNot Content = new HotOrNot(this, null, null);

    Cursor cursor = Content.getData();

    startManagingCursor(cursor);

    @SuppressWarnings("static-access")
    String [] from = new String [] {H.KEY_NAME, H.KEY_HOTNESS};
    int [] to = new int [] {R.id.txtName, R.id.txtAge};

    @SuppressWarnings("deprecation")
    SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.entries, cursor, from, to);

    listContent.setAdapter(cursorAdapter); 
```

我的 DB 处理程序类中的“getData”方法：

```
public Cursor getData() {

        String [] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_HOTNESS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

        return c; 
```

HotOrNot 数据库处理程序类：

```
package com.example.sqliteexample;

import android.app.ListActivity;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.widget.ListView;

public class HotOrNot {

public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "persons_name";
public static final String KEY_HOTNESS = "persons_hotness";

private static String DATABASE_NAME = "HotOrNotdb";
private static String DATABASE_TABLE = "peopleTable";
private static int DATABASE_VERSION = 30;

private static DBHelper ourHelper;
private static Context ourContext;
private static SQLiteDatabase ourDatabase;

ListView listview;

public void DB_NAME(String DBName)
{
    DATABASE_NAME = DBName;

}

public String returnDB_NAME()
{
    return DATABASE_NAME;
}

public void DB_tableNAME(String DBtName)
{
    DATABASE_TABLE = DBtName;

}

public String returnDB_tNAME()
{
    return DATABASE_TABLE;
}

public void DB_NAME(int DBVersion)
{
    DATABASE_VERSION = DBVersion;

}

public int returnDB_VERSION()
{
    return DATABASE_VERSION;
}

// class constructor for context. when the object is constructed in the main programme
// the context of that class i.e 'this' is sent to this constructor to set the object context.
// null values set on SQLiteDatabase and DBhelper as there is nothing to pass from the called
// objects.
public HotOrNot (Context c, SQLiteDatabase newSQL, DBHelper BD)
{
    ourContext = c;
    ourDatabase = newSQL;
    ourHelper = BD;

}

private static class DBHelper extends SQLiteOpenHelper
{
    public DBHelper(Context context) {
        super(context, KEY_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_HOTNESS + " TEXT NOT NULL);"

                );

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }
}

    public HotOrNot open() throws SQLException
    {

        ourHelper = new DBHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;

    }

    public void close()
    {
        ourHelper.close();

    }

    public long createEntry(String name, String hotness) {

        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, name);
        cv.put(KEY_HOTNESS, hotness);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);

    }

    public Cursor getData() {

        String [] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_HOTNESS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        //String result = "";

        //int iRow = c.getColumnIndex(KEY_ROWID);
        //int iName = c.getColumnIndex(KEY_NAME);
        //int ihotness = c.getColumnIndex(KEY_HOTNESS);

        //for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
        //{
            //result = result + c.getString(iRow) + "" + c.getString(iName) + "" + c.getString(ihotness);

        //}

        //c.close();

        return c;
    }

    public String getName(long l) {

        String [] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_HOTNESS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
        if(c != null)
        {
            // move to the selected row
        c.moveToFirst();
        String name = c.getString(1);
        return name;
        }
        return null;

    }

    public String getHotness(long l) {

        String [] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_HOTNESS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
        if(c != null)
        {
            // move to the selected row
        c.moveToFirst();
        String hotness = c.getString(2);
        return hotness;

    }
        return null;

    }

    public void updateEntry(long newl, String nameEdit, String hotnessEdit) {
    ContentValues cvUpdate = new ContentValues();

    cvUpdate.put(KEY_NAME, nameEdit);
    cvUpdate.put(KEY_HOTNESS, hotnessEdit);

    ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_ROWID + "=" + newl, null);

    }

    public void delID(long l) {
        ourDatabase.delete(DATABASE_TABLE, KEY_ROWID + "=" + l, null);

    } 
```

}

我的列表视图的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/txtName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Name:" />

<TextView
    android:id="@+id/txtAge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Age:" />

</LinearLayout> 
```

列表视图 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/contentList"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

日志猫：

```
01-11 00:23:26.655: D/AndroidRuntime(272): Shutting down VM
01-11 00:23:26.655: W/dalvikvm(272): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-11 00:23:26.675: E/AndroidRuntime(272): FATAL EXCEPTION: main
01-11 00:23:26.675: E/AndroidRuntime(272): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sqliteexample/com.example.sqliteexample.SQLView}: java.lang.NullPointerException
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.os.Looper.loop(Looper.java:123)
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-11 00:23:26.675: E/AndroidRuntime(272):  at java.lang.reflect.Method.invokeNative(Native Method)
01-11 00:23:26.675: E/AndroidRuntime(272):  at java.lang.reflect.Method.invoke(Method.java:521)
01-11 00:23:26.675: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-11 00:23:26.675: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-11 00:23:26.675: E/AndroidRuntime(272):  at dalvik.system.NativeStart.main(Native Method)
01-11 00:23:26.675: E/AndroidRuntime(272): Caused by: java.lang.NullPointerException
01-11 00:23:26.675: E/AndroidRuntime(272):  at com.example.sqliteexample.HotOrNot.getData(HotOrNot.java:143)
01-11 00:23:26.675: E/AndroidRuntime(272):  at com.example.sqliteexample.SQLView.onCreate(SQLView.java:24)
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-11 00:23:26.675: E/AndroidRuntime(272):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:33:11.377

你只是忘了打电话`open()`。

```
HotOrNot Content = new HotOrNot(this, null, null);
Content.open();
Cursor cursor = Content.getData(); 
```

（但请阅读 Java 命名约定，哪些状态变量应以小写字母开头。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:34:27.913

```
public HotOrNot (Context c, SQLiteDatabase newSQL, DBHelper BD)
{
    ourContext = c;
    ourDatabase = newSQL;
    ourHelper = BD;

} 
```

在这里，您将 onCreate 中的 null 传递给`SQLiteDatabase`

```
HotOrNot H = new HotOrNot(this, null, null); 
```

# c# - 检测 .NET 上的 Adob e Acrobat Reader 是否正在运行

> ID：14269754
> 
> 赞同：2
> 
> 时间：2013-01-11T00:27:24.830
> 
> 标签：c#, .net

我正在使用 PDFSharp 创建 PDF。在他们的示例中，他们保存一个 PDF，然后他们开始一个过程来选择您的查看器来打开它。它看起来像这样：

```
document.Save(fileName);
Process.Start(fileName); 
```

所以在我的测试中，我意识到如果 Acrobat Reader 已经打开，我会收到一个 i/o 异常，因为该进程已经在运行。所以我尝试关注这篇文章： [Detecting a Process is already running in windows using C# .net](https://stackoverflow.com/questions/187915/detecting-a-process-is-already-running-in-windows-using-c-sharp-net)

关于检测过程。所以我把上面的代码改成这样：

```
 document.Save(fileName);
        if (System.Diagnostics.Process.GetProcessesByName("AcroRd32.exe").Length == 0)
        {
            Process.Start(fileName);    
        } 
```

所以我有两个问题。
1）这不起作用。长度始终为 0，所以我想知道是返回错误的进程还是找不到进程。当我查看任务管理器时，AcroRd32.exe 是正在运行的进程的名称。

2）有没有更好的方法来做到这一点？似乎我正在将此过程硬编码到代码中，并且我不确定是否有更好的方法来捕获其他版本的 Acrobat（例如是否有 64 位版本）或其他 PDF 查看器。

对不起，如果这是菜鸟问题。这个 .NET 对我来说很新。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:32:58.043

[这](http://www.eggheadcafe.com/community/csharp/2/10096442/how-to-know-acrobat-reader-running-instance-.aspx)是一个非常好的来源，并且涵盖了您所要求的所有内容。

这是从上面的链接中获取的一些示例代码：

```
Process[] collectionOfProcess = Process.GetProcessesByName("AcroRd32");
            if (collectionOfProcess.Length >= 1)
            {
                Process acrProcess = collectionOfProcess[0];

                MessageBox.Show(acrProcess.MainWindowTitle);// file name of the which is opened.

                MessageBox.Show("Acrobet reader running");
            } 
```

此外，我曾见过程序无法检测或“工作”权限高于其权限的进程的情况。确保 adobe reader 没有在管理员权限下运行，如果是，请确保您的程序也是如此。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:32:18.510

如果您传递刚刚创建的 PDF 文件的文件路径而不是尝试启动 Acrobat Reader，Windows 将使用与文件扩展名`Process.Start`关联的默认应用程序打开 PDF 。`.pdf`您甚至不需要知道他们安装了哪些阅读器。如果没有安装阅读器，Windows 将提示用户选择一个应用程序来打开它。这是直接启动 Acrobat Reader 的更好选择，因为它将使用用户首选的阅读器打开 PDF 文件。

如果这是您已经在做的事情（我怀疑它来自问题），那么您很可能会收到 IO 异常，因为生成的 PDF 文件仍然在 PDFSharp 或您的代码中打开（即某些东西已锁定），这意味着Acrobat Reader 无法打开它。启动已在运行的进程不应导致该错误。

# c++ - 如何在 Visual Studio 2010 中添加 Poco 库？

> ID：14269755
> 
> 赞同：11
> 
> 时间：2013-01-11T00:27:27.177
> 
> 标签：c++, visual-studio-2010, poco-libraries

自从我用 C++ 编程以来已经有一段时间了，现在我正在努力使用这个 Poco 库，我试图添加它来执行一些 HTTP 请求。

首先，我在哪里添加 poco 文件，也许是在我的项目中的某个地方？

其次，我已经阅读了一些关于命令提示符和运行将编译文件的脚本的内容，但我必须给它一个参数，即我的 Visual Studio 版本，选项从 70 到 110。我如何找出我应该使用哪个利用？

如果有人可以为我提供分步指南，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-08T07:51:01.527

您指的是[POCO C++ 库和工具](http://pocoproject.org)吗？如果是这样，

1.  [在此处](http://pocoproject.org/download/index.html)下载 POCO C++ 库
2.  提取（例如：提取到 C:\poco-1.4.6）
3.  找到合适的解决方案文件并构建。

    *   build_vs71.cmd ==> Visual Studio .NET 2003

    *   build_vs80.cmd ==> Visual Studio 2005

    *   build_vs90.cmd ==> Visual Studio 2008

    *   build_vs100.cmd ==> Visual Studio 2010

    *   build_vs110.cmd ==> Visual Studio 2012
        [有关Visual Studio 版本的更多信息](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Version_history)
        例如，如果您想在Visual Studio 2005 项目中使用poco lib，则需要使用build_vs80.cmd 进行构建。构建成功后，您可以看到{POCO 文件夹}\lib 中的所有 poco 静态库。（例如：C:\poco-1.4.6\lib）

4.  在 Visual Studio 中创建新项目并将标题路径添加到**Project->Properties->C/C++-> Additional Include Directories**（例如：如果要使用 POCO Foundation，请添加“C:\poco-1.4.6\Foundation\include ")
5.  将 POCO 库路径添加到**Project->Properties-> Linker-> General-> Additional Library Directories。**（例如：C:\poco-1.4.6\lib）
6.  将 POCO lib 文件名添加到**Project->Properties->Linker->Input-> Additional Dependencies** (eg: PocoNetd.lib )
7.  现在您可以开始在项目中使用 POCO 库了。

您可能还想查看位于**{POCO Folder}\Net\samples 的 POCO HTTP 示例项目。**（例如：C:\poco-1.4.6\Net\samples）

# c# - 何时调用 SaveChanges

> ID：14269765
> 
> 赞同：6
> 
> 时间：2013-01-11T00:28:42.743
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5

假设我有这样的东西被称为 `Controller`：

```
using (var context = new SqlContext())
{
    context.Items.Add(new Item("item1"));
} 
```

我应该打电话`context.SaveChanges();`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T00:51:11.063

实体框架使用 DbContext 实现了一个工作单元模式，这意味着您定义了一组您想要对数据库执行的操作，然后调用保存更改以一次将它们全部传播到数据库。所有操作都将在单个事务中执行（对于单个 saveChanges 调用），这意味着要么全部要么不立即传播到数据库。

在调用 savechanges 之前，更改将应用​​于您的本地跟踪图，但不会应用于数据库本身，直到调用 savechanges。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:45:31.573

**是的。**

在调用之前，您所做的每一个更改都不会被保存`context.SaveChanges();`。

请注意，如果您将拥有来自其他 DbContext 的对象（这绝对不是您给出的情况），您应该需要使用以下代码行来显式更改实体状态：

```
Item item = new Item("item1")
db.Entry(item).State = EntityState.Modified;
db.SaveChanges(); 
```

# c++ - 使用QT，如何在一定间隔后调用一次函数，即使可能会发生更多调用？

> ID：14269766
> 
> 赞同：7
> 
> 时间：2013-01-11T00:28:52.867
> 
> 标签：c++, qt, qtimer

尽管我认为它并不复杂，但我很难说出这个问题。

我想做一些类似的事情，`QTimer::singleshot()`但我希望它仍然只调用 SLOT 一次，即使`QTimer::singleshot()`在它触发之前被多次调用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-22T02:34:24.710

如果您只想在计时器上调用一次插槽，则可以查看类似

`QTimer::singleShot(500, this, SLOT(MySlot()));`

那么你保证它只会发生一次。

澄清一下，通过调用 this 的静态版本而不是从现有计时器调用它，它只会发生一次。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T01:00:24.883

这应该有效。 

```
class MyObject
{

// ...
    QTimer* mTimer;
}

MyObject::MyObject()
{
    mTimer = new QTimer(this);
    mTimer->setSingleShot(true);
    connect(mTimer, SIGNAL(timeout()), SLOT(doStuff()));
}

MyObject::startOrResetTimer()
{
   mTimer->start(1000);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-08T06:12:38.923

您可以轻松地将`singleShot()`静态成员函数与**lambda**一起使用：

```
QTimer::singleShot(2000, [=](){
    qDebug()<<"do something after 2000 msec...";
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-11T00:55:13.430

Quick-and-dirty：在你的类中使用布尔值并在插槽中将其设置为 true；忽略后续调用，直到布尔值被重置。

# php - 如果使用过滤器指定测试，phpunit 只会抛出致命错误

> ID：14269770
> 
> 赞同：0
> 
> 时间：2013-01-11T00:29:07.987
> 
> 标签：php, phpunit

`phpunit .`

导致测试失败

`phpunit MyFileTest.php`

导致测试失败

`phpunit --filter testSomething MyFileTest.php`

导致一个致命错误，该错误本应使用先前的运行测试方法捕获。

phpunit：3.7.7

php: 5.3.10

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:09:55.467

没有看到代码，甚至没有看到错误消息，真的很难帮助你。

您可能在以前的测试中加载了一些依赖项，而在运行单个测试时不存在这些依赖项。

# .net - .NET 中的 CastableFrom 接口？

> ID：14269771
> 
> 赞同：0
> 
> 时间：2013-01-11T00:29:11.190
> 
> 标签：.net, vb.net, string, generics, casting

我有一个从字符串表创建字典的例程。根据具体的应用，这些字符串可能表示整数（“123”）、浮点数（“12.3”）或字符串（“foo bar”），但任何有效类型在显式写入时都可以直接从字符串转换。例如，这很好用（VB.NET）：

```
Class IntStrDict
    Sub Add()
        Dim k As String = "123"
        Dim v As String = "foo bar"
        Dim d As New Dictionary(Integer, String)
        d.Add(k, v)
    End Sub
End Class 
```

但我真的很想让这段代码通用，所以我重写为：

```
Class PairDict(Of TKey, TValue)
    Sub Add(k As TKey, v As TValue)
        Dim k As String = "123"
        Dim v As String = "foo bar"
        Dim d As New Dictionary(TKey, TValue)
        d.Add(k, v)
    End Sub
End Class 
```

但这不起作用，因为 .NET 不知道可以将 String 直接转换为 TKey 或 TValue。有没有像 CastableFrom 这样的接口，我可以在其中声明这样的类？

```
Class PairDict(Of TKey As CastableFrom(Of String), TValue As CastableFrom(Of String)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:29:11.190

从[这个问题](https://stackoverflow.com/questions/7534718/objtype-is-not-defined-actually-it-is-so-why-is-this-happening)中想出来：CTypeDynamic（仅限.NET 4.0+）。这不起作用：

```
Class PairDict(Of TKey, TValue)
    Sub Add(k As TKey, v As TValue)
        Dim k As String = "123"
        Dim v As String = "foo bar"
        Dim d As New Dictionary(TKey, TValue)
        d.Add(CType(k, TKey), CType(v, TValue))
    End Sub
End Class 
```

...但这确实：

```
Class PairDict(Of TKey, TValue)
    Sub Add(k As TKey, v As TValue)
        Dim k As String = "123"
        Dim v As String = "foo bar"
        Dim d As New Dictionary(TKey, TValue)
        d.Add(CTypeDynamic(Of TKey)(k), CTypeDynamic(Of TValue)(v))
    End Sub
End Class 
```

这是一个有用的示例，说明有人可能会使用此功能做什么：

```
Public Class DictionaryGenerator(Of TKey, TValue)
    Public Function Generate(path As String, Optional excludeheader As Boolean = True) As Dictionary(Of TKey, TValue)
        Dim d As New Dictionary(Of TKey, TValue)

        Dim r As New Microsoft.VisualBasic.FileIO.TextFieldParser(path)
        r.TextFieldType = FileIO.FieldType.Delimited
        r.SetDelimiters(",")
        r.TrimWhiteSpace = True
        Dim csvline As String()
        If excludeheader Then r.ReadLine()
        While Not r.EndOfData
            csvline = r.ReadFields()
            d.Add(CTypeDynamic(Of TKey)(csvline(0)), CTypeDynamic(Of TValue)(csvline(1)))
        End While
        r.Close()

        Return d
    End Function
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:24:07.460

接口类型旨在对已经存在的实例进行操作。因此，类似的接口`IConvertableTo(Of Out TDest)`表达了一个有意义的概念：如果一个对象具有`Foo`实现的类型，那么一个对象`IConvertable(Of Out Bar)`将具有可以执行转换的东西。相比之下，`IConvertableFrom(In TSrc)`它就不太好用了，因为直到有一个实现它的对象才能使用该接口；如果生成这样一个对象的唯一方法是通过接口，那就是先有鸡还是先有蛋的问题。

有几个解决方案。可以有一个 type `IConverter(In TSrc, Out TDest)`，并且有需要能够执行转换的方法接受该类型的实例。或者，如果一个类型允许创建“空白”然后“填充”实例，则可以使用`{New,ILoadableFrom(In TSrc)}`. 这将允许类似：

```
Shared Function Convert(Of TSource, TDest As {New, ILoadableFrom(TSource)})(Src as TSource)
    Dim Result = New TDest()
    Result.LoadFrom(TSource)
    Return Result
End Function 
```

这种方法的最大缺点是它要求目标类型包含一个默认构造函数。另一个可能值得考虑的变体是要求作为合同问题，实现接口的每个类型都`ICastableFrom(of T)`必须包含一个静态方法`Function CastFrom(T param) As [itsOwnType]`。然后可以编写一个带有签名的静态方法，`Function ICastableCast(Of TSrc, TDest)(src as TSrc) as TDest`该方法将使用反射来查找静态方法`TDest.CastFrom(param as TSrc) As TDest`并调用它。如果反射只对每个 (TSrc,TDest) 对使用一次，那么这种方法可能会相当快。

# html - html 5 布局全屏

> ID：14269773
> 
> 赞同：-2
> 
> 时间：2013-01-11T00:29:16.120
> 
> 标签：html

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" style="height:100%">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    </head>

    <body style="height:100%; width:100%; margin:0px; padding:0px">
    <table cellpadding="0" cellspacing="0" border="0" width="100%" height="100%">
    <tr>
    <td height="100%"><div style="background-color:yellow; height:100%; margin-top:20px; margin-bottom:20px">part 1</div></td>
    </tr>
    <tr>
    <td valign="bottom">
    <div style="background-color:red; height:20px">part 2</div>
    </td>
    </tr>
    </table>
    </body>
    </html> 
```

我要那个

*   “第 1 部分”（黄色背景）距顶部 20 像素
*   “第 1 部分”和“第 2 部分（红色背景）”之间的 20 像素
*   “第 2 部分”（红色背景）始终位于底部，高度为 20 像素
*   “第 1 部分”（黄色背景）占据了该区域的其余部分

我怎样才能做到这一点？我用上面的代码试过了，但它不起作用。非常需要帮助... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:45:10.710

棘手！这应该有效：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" style="height:100%">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body style="height:100%; width:100%; margin:0; padding: 0">

    <div style="background-color:yellow; height: 100%">
        <div style="width: 100%; height: 20px; background-color: #fff"></div>
        part 1
    </div>

    <div style="background-color:red; position: absolute; left: 0px; bottom: 0px; width: 100%">
        <div style="width: 100%; height: 20px; background-color: #fff"></div>
        part 2
    </div>

</body>
</html> 
```

# c# - 代码运行时退出互操作控制的 Excel

> ID：14269777
> 
> 赞同：4
> 
> 时间：2013-01-11T00:29:41.987
> 
> 标签：c#, excel, com-interop, interrupt, terminate

我在 C# 中为 Excel 编写了一个包装器，以便允许在批处理过程中运行 Excel 工作簿（在 JobScheduler 下）。我的问题是这个...

如果代码运行时间过长或需要通过作业调度程序终止，则包装器需要处理此终止事件。为此，我添加了

```
SetConsoleCtrlHandler(new HandlerRoutine(ConsoleCtrlCheck), true); 
```

进入代码。在 ConsoleCtrlCheck 方法中，我调用了一个通用退出例程（在正常或终止情况下使用）。此路由根据 MS 建议执行以下操作。

关闭并释放 Workbooks
关闭并释放 Excel
垃圾收集

然后以调用的 Excel 方法的返回码（入口点）退出。这很好用。

但是，如果 VBA 代码仍在运行，则 Interop 对象将不会响应工作簿关闭或应用程序退出调用。这可能是因为一切进展缓慢或已发出模式对话框。为了解决这个问题，我在这个常见例程的开头添加了以下内容......

*   创建新线程以运行 KillExcel 方法
*   KillExcel 方法休眠指定时间（因此正常退出代码有机会工作）然后终止进程
*   如果正常代码有效，它会在线程上调用 Abort

```
private static void Cleanup()
{
    // Give this X seconds then terminate
    mKillThread = new Thread(KillExcel);
    mKillThread.IsBackground = false;
    mKillThread.Start();
    ...
    // close the workbooks and excel application
    // Marshal.FinalReleaseComObject etc

    GC.Collect();
    GC.WaitForPendingFinalizers();

    // Not sure if necessary but makes sure Process gone
    try
    {
        Process p = Process.GetProcessById(mExcelPid);
        p.WaitForExit();
    }
    catch(ArgumentException)
    {}

    mKillThread.Abort();
}

private static void KillExcel()
{
    Thread.Sleep(Settings.Default.KillWaitMilliSeconds);

    if (mLog.IsInfoEnabled)
        mLog.Info(string.Format("Waited {0} seconds, killing Excel process [{1}]",Settings.Default.KillWaitMilliSeconds/1000, mExcelPid));

    try
    {
        Process p = Process.GetProcessById(mExcelPid);

        if (!p.HasExited)
            p.Kill();
    }
    catch(ArgumentException)
    {
    }
} 
```

我的问题是，有没有更好的方法来解决这个问题，或者为了确保在工作终止事件中删除 excel 进程而必须这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:56:27.100

您所做的几乎是完全确保 Excel 退出的标准方法。鉴于涉及 COM 互操作，并且 excel 有留下孤立实例的讨厌习惯，您遵循的方法几乎是万无一失的。

但是，如果您可以访问 vba 代码并且可以控制它，那么您可以做一件基本的事情来确保 VBA 代码确实允许其他代码运行。

```
DoEvents 
```

根据我的经验，在运行繁重的计算之前和之后放置一行代码通常可以让 excel 正确处理常规事件。虽然通常建议将这用于 UI 相关操作，但它也可以让工作表/应用程序事件正常工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:06:49.657

是否有机会用 EPPLUS 之类的第三方库替换 VBA 逻辑？那将是更快的数量级......

# ruby - 你能在实现它的类中重新定义一个mixin的方法吗

> ID：14269779
> 
> 赞同：0
> 
> 时间：2013-01-11T00:29:56.340
> 
> 标签：ruby, interface, mixins

我是 Ruby 新手，正在阅读[这篇文章](http://blog.bradcunningham.net/2012/04/ruby-for-c-developerthe-basics.html)，将 mixin 与 C# 接口进行比较。我不清楚的是，mixin 中的方法是否可以在实现它的类中重新定义。

例如，如果我把`include myMixin`- 它有一个方法`toJSON`- 在一个 class中`MyClass`，我可以重新定义`toJSON`in `MyClass`，还是我会坚持 in 中定义的行为`myMixin`？

对于任何有兴趣的人，该博客文章是一个很好的信息来源吗？将 Ruby mixin 与 C# 接口进行比较是否合理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:44:25.347

类中定义的方法将始终覆盖通过 Ruby 中的模块混合到该类中的方法

例如：

```
module Bang
   def bar
      "lol"
   end
end

class Foo
   include Bang
   def bar
      42
   end
end

Foo.new.bar
 => 42 
```

无论何时包含模块，`bar`都会首先调用类上定义的方法。这是因为 ruby​​ 查找方法的方式——它在搜索包含在类中的任何模块之前搜索类本身。

[http://anders.janmyr.com/2009/06/ruby-method-lookup.html](http://anders.janmyr.com/2009/06/ruby-method-lookup.html)

[http://blog.rubybestpractices.com/posts/gregory/031-issue-2-method-lookup.html](http://blog.rubybestpractices.com/posts/gregory/031-issue-2-method-lookup.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:34:03.457

不，您没有被卡住，您可以使用更多 mixin 模块覆盖该方法，或者在包含 mixin 后重新定义该方法。

您可以在新方法中决定让 mixin 通过调用来处理它`super`，就像继承一样。

由于您来自 C# 背景，因此您应该意识到 Ruby 的一些方法永远不会“卡住”。您可以随时重新定义方法，甚至在 Object 或 Class 等核心语言类上。这是危险的，但有可能。您可以以编程方式更改语言、创建新类或执行其他元编程巫术。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T01:01:15.137

`include`使模块成为您将其混入的类的超类。显然，您可以在子类中覆盖超类的方法，这就是子类化的工作方式，不仅在 Ruby 中，而且在几乎任何其他基于类的 OO 语言中也是如此。

# css - 宽度：100% 不能在自定义主题中的特色图像上纵向工作

> ID：14269781
> 
> 赞同：0
> 
> 时间：2013-01-11T00:05:09.813
> 
> 标签：css, wordpress, wordpress-theming

我正在尝试创建一个全屏、适合移动设备的主题，该主题可以尽可能大地显示帖子的特色图片，而无需裁剪。这意味着在横向显示它们`height:100%; width:auto;`，但在纵向显示它们`width:100%; height:auto`。（与许多 iOS 应用程序一样。）

麻烦的是，我真的很想在 WordPress 中使用它。当我将主题开发为静态 HTML 测试站点时，一切正常。但由于某种原因，当我将网站转换为主题时，它开始忽略纵向中的宽度：100%。

我知道不是媒体查询本身被破坏/被忽略，因为在同一个纵向媒体查询中的导航菜单工作正常。

最初，我认为 WordPress 的内联图像尺寸已经覆盖了我的响应式尺寸（这是有道理的，级联方式），但情况似乎并非如此，因为图像在横向视口中的 height:100% 显示效果很好。在纵向中，它似乎在听 height:auto 命令。

*它实际上只是`width: 100%;`被忽略的命令。*

我还添加了`max-width: 100%`一个很好的措施，并在各个地方使用 !important 进行了尝试。没有效果。

这是代码，因此您可以看到它不是一个愚蠢的缺少分号。

```
#content img {
width:100%;
max-width:100% !important;
height:auto;
} 
```

我还验证了我的 CSS，那里似乎没有任何问题。

这是HTML

```
<div  id="content">                 
               <div title="Click to flip" class="sponsor">

                    <div class="sponsorFlip">
                        <?php 
                            if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
                              the_post_thumbnail();
                            } 
                        ?>

                    </div>

                    <div class="sponsorData" style="display:none">
                    <?php 
                        if( class_exists( 'kdMultipleFeaturedImages' ) ) {
                        kd_mfi_the_featured_image( 'featured-image-2', 'post' );
                        }
                    ?>      
                    </div>

                </div>
            </div><!-- End div #content --> 
```

&这里有一些截图。

![在此处输入图像描述](../Images/478a1554ffae928fc4397abadb077b23.png)

![在此处输入图像描述](../Images/e6d42a4fcfb3af65b5ce4ad768ef09d1.png)

拜托，哦拜托，有人把我从肖像问题中解救出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:02:21.200

### 试试这个，可能...

在这部分给出这个`<head />`。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:37:51.027

所以我现在基本上已经解决了这个问题，因为我已经让它按照我想要的方式工作了——但是我真的不明白为什么它现在可以工作。

我已经删除了纵向媒体查询，所以默认设置是纵向的，然后有条件地将横向的东西留在那里。将纵向和横向媒体查询放在同一个文档中是否有问题？我似乎在网上找不到任何关于它的信息，而且我确信我只是在将网站转换为 wordpress 模板时遇到了这个问题。

# jquery - jQuery如何循环函数

> ID：14269790
> 
> 赞同：1
> 
> 时间：2013-01-11T00:31:12.420
> 
> 标签：jquery, loops, callback

我想每隔几秒淡出第一个 div，这段代码工作一次：

```
$('.comment:first').delay(4000).fadeOut(); 
```

并尝试使其持续运行，我一直在尝试执行回调函数或循环，但没有发现任何乐趣。我不熟悉这些类型的功能。到目前为止，这是我的尝试：

```
$('.comment:first').delay(4000).fadeOut( function(){
                $(this).delay(4000).fadeOut();
}); 
```

**编辑：** div.comment:first 淡出后，第二个 div.comment 现在将排在第一位，所以我想然后淡出该 div 并继续运行该功能。我不希望第一个 div.comment 淡出。抱歉造成混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T01:01:20.057

这将在您需要的最后一个元素上停止
（否则删除`if`并使用`.eq(++C % N)`！:)

## *[jsBin 演示](http://jsbin.com/acejuy/3/edit)*

```
$('.comment:gt(0)').hide();   // hide all but first one
var N = $('.comment').length; // count comments
var C = 0;             // just a useful counter

function loop(){
     if(++C < N){       // this will prevent the loop to run infinitely
         $('.comment').delay(1000).fadeTo(400,0).eq(C).fadeTo(400,1,loop);
     }
}

loop(); 
```

循环解释：

```
$('.comment')           // all comments...
    .delay(1000)        // wait for some time and...
    .fadeTo(400,0)      // fadeTo 0
    .eq(C)              // just, the one which index equals to preIncremented C
    .fadeTo(400,1,loop) // fade him to 1 and callback the LOOP !
; 
```

**编辑**
在OP给我留下评论后：

**[jsBin 演示](http://jsbin.com/acejuy/6/edit)**

```
var N = $('.comment').length;
var C = -1;

function loop(){
     if(++C < N)
     $('.comment').eq(C).delay(1000).slideUp(400, loop);
}

loop(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:33:05.680

您是否尝试过使用`setInterval`：

```
setInterval(function(){
    $('.comment:first').fadeOut();
}, 4000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:33:04.557

只需使用间隔

```
window.setInterval(function(){ $('.comment:first').fadeOut(); }, 4000); 
```

要使其切换淡入淡出：

```
setInterval(function(){ 
 if( $('.comment:first:hidden').length > 0 ){
   $('.comment:first').fadeIn();
 }else{
   $('.comment:first').fadeOut();
 }
}, 4000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T00:38:10.280

这是一个从第二个动画的完整回调中重复调用的函数，该函数需要在元素淡出后显示元素。

```
var $commentFirst=$('.comment:first')

function fadeDiv(){
   $commentFirst.delay(4000).fadeOut( function(){
          /* fade it back in, call function again when done*/
          $commentFirst.delay(4000).fadeIn(fadeDiv);
   });

}
/* on page load*/
$(function(){
    fadeDiv();
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T00:40:57.517

可以这样调用 fadeOut 函数（[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)）：

```
.fadeOut( [duration ] [, complete ] ) 
```

我已经有一段时间没有使用它了，但我会说你应该 1) 将持续时间写为第一个参数 2) 用作回调一个使 div 淡入的函数

然后在fadeIn的回调中指向启动fadeOut的原始函数，这样你就会有一个循环FadeOut > FadeIn > FadeOut > ...

# java - Java JNI 调用比预期慢（至少 2 毫秒/调用）

> ID：14269798
> 
> 赞同：7
> 
> 时间：2013-01-11T00:32:18.030
> 
> 标签：java, c, performance, java-native-interface

我从其他几份报告中读到，人们通常在一个简单的基本 JNI 调用中得到大约*4-80 ns ：*

从[是什么让 JNI 调用变慢？](https://stackoverflow.com/questions/7699020/what-makes-jni-calls-slow)

> 对于琐碎的本机方法，去年我发现在我的 Windows 桌面上平均调用 40 ns，在我的 Mac 桌面上平均调用 11 ns ..

从[使用 JNI 可能提高性能？](https://stackoverflow.com/questions/5727552/possible-increase-of-performace-using-jni)

> 然而，JNI 调用通常需要大约 30 ns ..

当我在我的 JNI 代码中调用简单方法时（简单我的意思是返回类型 int 的时间参数不超过一个参数），我得到的往返调用时间（使用 System.nanoTIme 测量）在 50,000-80,000 ns 之间。

如果我做一个虚拟机“热身”并在计时之前运行几百次调用，我仍然会得到大约*2000-4000 ns（低于 800-1000）*。（如上所述，我听说其他人报告 < 100 ns .. 并且在频繁通话时确实会高出 10-20 倍。）

这是正常速度吗？什么可能导致我的本机代码被调用这么慢？

更新：

```
JNIEXPORT jint JNICALL Java_com_snap2d_gl_RenderControl_correctGammaNative
  (JNIEnv *env, jobject obj, jint pixel) {
    return X2D_correctGamma(pixel, 1.0f);
} 
```

其中 X2D_correctGamma(int,float) 是一种校正像素伽马值的方法（自发布以来我已经实现了本机代码）。

Java基准测试：

```
 for(int i = 0; i < 100; i++) {
        long t1 = System.nanoTime();
        correctGammaNative(0xFFF);
        long t2 = System.nanoTime();
        System.out.println(t2 - t1);
    } 
```

那是“热身”代码。大多数 println 在初始调用后读取 800-1000ns。

不幸的是，我可能不得不放弃它，因为它应该用于渲染，每秒调用数千次会将帧速率降低到 1 FPS。

系统信息：

行为类似：JDK1.6.0_32（64 位）、JDK1.7.0_04（64 位）和 JRE1.7.0_10（32 位）

Windows 7 64 位

16GB 内存

i7-3770 四核 CPU @ 3.4-3.9ghz

GNU GCC MinGW 编译器（32 位和 64 位）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T01:33:15.607

> 这是正常速度吗？

不。如果你**真的**在每次 JNI 调用中获得 50,000-80,000 ns，那么就会发生一些奇怪的事情。

> 什么可能导致我的本机代码被调用这么慢？

不知道。它几乎可以是任何东西。但是，如果您向我们展示本机代码和 Java 代码，我们将能够更好地进行解释。

我的钱将用于这根本不是 JNI 调用的问题。相反，我希望它是您进行基准测试的方式的产物。您可以做（或不做）很多事情，这些事情会导致 Java 基准测试产生虚假结果。我们需要查看您的基准测试代码。

* * *

好的，您的更新表明您之前报告的时间（50,000-80,000 或 2000-4000）不正确或不相关。考虑到以下情况，800-1000ns 的时间听起来是合理的。

我认为您的基准测试存在三个缺陷。

*   您正在尝试测量几纳秒级的时间间隔。但是您的测量没有考虑到调用`System.nanoTime()`需要很长时间。您需要做的是测量在每对调用之间进行几千或几百万次 JNI 调用所需的时间`System.nanoTime()`，然后计算并打印平均值。

*   您的代码不会将进行 JNI 调用所花费的时间与执行调用主体所花费的时间分开。（或者也许它确实......你还没有向我们展示那个代码。）。我怀疑伽玛校正将花费比 JNI 调用开销更长的时间。

*   你的热身不够。令人怀疑的是，您运行代码的时间是否足以让 JIT 编译启动。此外，您的基准代码仅限于单个方法调用这一事实意味着即使 JIT 编译器确实运行了，您也有可能“ d 从不调用该方法的 JIT 编译版本。将基准代码放入一个方法中并重复调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T09:29:30.120

热身时间太短了。在约 10.000 次调用后会触发一个方法。另外将循环体移动到一个方法，因为“就地”无限循环抖动和单一方法抖动之间存在差异。

# javascript - 使用两个输入框自动建议

> ID：14269801
> 
> 赞同：6
> 
> 时间：2013-01-11T00:32:43.770
> 
> 标签：javascript, html, forms, autosuggest

我有与这个问题完全相同的问题：
[autoSuggest php ajax with two input box not working with the given sample code](https://stackoverflow.com/questions/7735769/auto-suggest-php-ajax-with-two-input-boxes-not-working-with-the-given-sample-cod)

但是在尝试这些建议时，我仍然遇到同样的问题。
我有两个输入框，我想要一个来自数据库的自动建议。
但是，自动建议仅出现在其中一个框下方，无论输入哪个字段。
这就是我在顶部链接的问题中的建议之后得到的结果。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
<script>
function suggest(inputString){
    if(inputString.length == 0) {
        $('#suggestions').fadeOut();
    } else {
    $('#customer').addClass('load');
        $.post("/templates/autosuggest/autosuggest.php", {queryString: ""+inputString+""}, function(data){
            if(data.length >0) {
                $('#suggestions').fadeIn();
                $('#suggestionsList').html(data);
                $('#customer').removeClass('load');
            }
        });
        }
    }

function fill(thisValue) {      
    $('#customer').val(thisValue);
    setTimeout("$('#suggestions').fadeOut();", 10);
}
</script>

<script>
function suggest(inputString){
if(inputString.length == 0) {
    $('#suggestionssearch').fadeOut();
} else {
$('#customersearch').addClass('load');
    $.post("/templates/autosuggest/autosuggest.php", {queryString: ""+inputString+""}, function(data){
        if(data.length >0) {
            $('#suggestionssearch').fadeIn();
            $('#suggestionsListsearch').html(data);
            $('#customersearch').removeClass('load');
        }
    });
    }
}

function fill(thisValue) {      
$('#customersearch').val(thisValue);
setTimeout("$('#suggestionssearch').fadeOut();", 10);
}
</script> 
```

我的输入：

```
<input type="text" name="Customer" value="" id="customer" onkeyup="suggest(this.value);" onblur="fill();" class="" style="height:14px; margin-top:2px;" placeholder="Search Customers" autocomplete="off">
<input type="submit">
<div id="suggestcontainer" style="margin-left:2px;">
  <div class="suggestionsBox" id="suggestions" style="display: none;"> 
    <div class="suggestionList" id="suggestionsList"> &nbsp; </div>
  </div>
</div>

<input type="text" name="Customer" value="" id="customersearch" onkeyup="suggest(this.value);" onblur="fill();" class="" style="width:90px; height:14px; margin-top:2px;" placeholder="Customer" autocomplete="off" required="required"/>
<input type="submit" style="float:right;">
<div id="suggestcontainersearch">
  <div class="suggestionsBoxsearch" id="suggestionssearch" style="display: none;"> 
    <div class="suggestionListsearch" id="suggestionsListsearch"> &nbsp; </div>
  </div>
</div> 
```

我已经用我的脚本尝试了这个作为测试：

```
<script>
 function suggest(inputString){
    if(inputString.length == 0) {
        $('#suggestions').fadeOut();
                    $('#suggestionssearch').fadeOut();
    } else {
    $('#customer').addClass('load');
            $('#customersearch').addClass('load');
        $.post("/templates/autosuggest/autosuggest.php", {queryString: ""+inputString+""}, function(data){
            if(data.length >0) {
                $('#suggestions').fadeIn();
                $('#suggestionsList').html(data);
                $('#customer').removeClass('load');
                $('#suggestionssearch').fadeIn();
                $('#suggestionsListsearch').html(data);
                $('#customersearch').removeClass('load');
            }
        });
        }
    }

function fill(thisValue) {      
    $('#customer').val(thisValue);
    setTimeout("$('#suggestions').fadeOut();", 10);

    $('#customersearch').val(thisValue);
    setTimeout("$('#suggestionssearch').fadeOut();", 10);
}
</script> 
```

这在某种意义上是有效的，如果我输入一个，那么两者都会出现，显然不是我需要的，但表明它看到了它们。似乎它不喜欢有两个脚本。

任何帮助都会很棒。提前祝大家好运。

另外，如果有人知道我如何可以使用键盘向上和向下按钮滚动浏览自动建议的结果，那将是锦上添花！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:38:06.223

我建议使用具有自动完成小部件的[jQuery UI 。](http://jqueryui.com/autocomplete/)

```
$( "#birds" ).autocomplete({
    source: "search.php",
    minLength: 2,
    select: function( event, ui ) {
        log( ui.item ?
            "Selected: " + ui.item.value + " aka " + ui.item.id :
            "Nothing selected, input was " + this.value );
    }
}); 
```

**回复评论**

要自定义自动完成建议的顺序，您可以更改 SQL 查询以使用[order by case](https://stackoverflow.com/questions/3609166/mysql-order-by-like)。下面的查询将返回`$search`在某个点仅包含它的其他结果之前开始的所有结果。

```
SELECT Customer 
FROM Customers 
WHERE Customer LIKE '%$search%' 
ORDER BY CASE 
    WHEN Customer LIKE '$search%' THEN 1 
    ELSE 2 
END 
```

# css - 链接不会在列表项中保持内联

> ID：14269829
> 
> 赞同：0
> 
> 时间：2013-01-11T00:35:06.960
> 
> 标签：css

我有这个列表，没有使用`<ul>`：

```
<li>some text before <a href="url1">item 1</a> some text after</li>
<li>some text before <a href="url2">item 2</a> some text after</li>
<li>some text before <a href="url3">item 3</a> some text after</li>
<li>some text before <a href="url4">item 4</a> some text after</li>
<li>some text before <a href="url5">item 5</a> some text after</li> 
```

使用此 CSS，我尝试将链接保持在原位，但 onClick 它会继续向下移动一行。

```
#myDiv li a { 
    text-decoration: none;  
    color: #0080BC; 
    outline: none; 
    cursor: pointer; 
    margin: 0; 
    padding: 0; 
    display: inline-block;
} 
```

谁能帮助我以正确的方式完成这项工作？我必须清除 CSS，但我似乎无法完成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:47:08.657

### *我有这个列表，没有使用* `<ul>`

一组没有的列表项`<ul>`在 HTML 中是无效的。由于您有一个带有 的 CSS `#myDiv`，因此您可以用这种方式将整个内容包含在内`<ul id="#myDiv">`，因为 CSS 很好：

```
<ul id="#myDiv">
    <li>some text before <a href="url1">item 1</a> some text after</li>
    <li>some text before <a href="url2">item 2</a> some text after</li>
    <li>some text before <a href="url3">item 3</a> some text after</li>
    <li>some text before <a href="url4">item 4</a> some text after</li>
    <li>some text before <a href="url5">item 5</a> some text after</li>
</ul> 
```

### 小提琴：http: [//jsfiddle.net/nwpem/](http://jsfiddle.net/nwpem/)

列表项很好。但是如果你觉得列表项是内联的，那么你需要添加这个CSS：

```
#myDiv li {display: inline-block;} 
```

# ios - iOS 编程将 Storyboard 转换为 NIB

> ID：14269832
> 
> 赞同：1
> 
> 时间：2013-01-11T00:35:41.670
> 
> 标签：ios, xcode, xib, uistoryboard, nib

我正在制作一个布局非常复杂的 iOS 应用程序 (iPad)。我可以尝试使用自动布局来适应方向切换，但这太复杂了。我想要两个单独的笔尖，每个方向一个。

那么问题来了：如何将使用 Storyboards 的应用程序转换为使用 Nibs/Xibs？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:39:40.190

除非你真的认为你必须这样做，否则不要这样做。我需要很长时间。话虽如此，我已经很愚蠢地尝试了几次，你真的必须编辑很多代码，从 segues 到加载视图控制器及其`NIB`名称，然后复制你所有的设计每个各自的观点进入它各自的`NIB`.

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:46:07.950

更好的解决方案可能是在情节提要中也有一个横向视图的副本，然后当旋转发生到横向等时在视图控制器之间切换。您可以注册旋转事件。

# wcf - WCF 安全配置和 IIS 设置

> ID：14269835
> 
> 赞同：1
> 
> 时间：2013-01-11T00:35:48.020
> 
> 标签：wcf, iis, iis-7

我是 WCF 和 IIS 的新手。

假设我使用 wsHttpBinding 和 Message Security 以及 Windows 身份验证设置了 WCF 服务。这是否意味着我不需要在我的 IIS 服务器上使用 https？IE。消息是否安全？

如果我可以提供任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T07:41:52.123

是的，消息是安全的，因为在消息安全的情况下，它将由 WCF 加密和签名。但请确保您考虑了按摩安全的所有缺点。最重要的是： 1\. 互操作性差。2\. 与运输安全相比性能更差。

有关更多详细信息，请参阅本文[消息和传输安全](http://wcfsecurityguide.codeplex.com/wikipage?title=Ch%2007%20-%20Message%20and%20Transport%20Security%20in%20WCF) 您还将找到最好使用消息安全的方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:52:50.703

从了解传输和消息安全开始。然后，我们将看到如何使用 WsHTTP 绑定实现传输和消息安全的简单代码示例。我们还将借助一个简单的代码了解“BasicHttpBinding”和“WsHttpBinding”之间的区别。WCF 安全性本身就是一个巨大的话题，但我相信通过这篇文章，您将快速了解如何了解 WCF 安全性

[http://www.codeproject.com/Articles/36732/WCF-FAQ-Part-3-10-security-related-FAQ](http://www.codeproject.com/Articles/36732/WCF-FAQ-Part-3-10-security-related-FAQ)

# javascript - 具有多个文本输入的 DRY javascript

> ID：14269842
> 
> 赞同：0
> 
> 时间：2013-01-11T00:36:39.133
> 
> 标签：javascript, jquery, css

我有大约 20 个表单文本输入。对于它们中的每一个，我想确保它们存在并对它们应用相同的逻辑，如下所示：

```
var title = $('#title')
if (title == '') {
     title.css({
       'background-color': 'rgba(230, 89, 78, 0.07)',
    }); 
};

<input type="text" id="title" /> 
```

我将如何“批量”应用这个，而不是为我拥有的每个文本输入重写这个？理想情况下，我希望有一个变量列表，其中包含我需要执行此操作的所有字段：`['title', 'company', 'copyright', ...]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:41:22.550

您可以给他们一个通用类（如`validate`），然后使用`.each()`：

```
$('.validate').each(function() {
    var $this = $(this);

    if (!$this.val()) {
        $this.removeClass('valid');
        $this.addClass('invalid');
    } else {
        $this.removeClass('invalid');
        $this.addClass('valid');
    }
}); 
```

从那里，使用 CSS 应用样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:40:29.527

$("#title").css() 将枚举每个元素，但是，id 在每个页面上都是唯一的。我建议添加一个类 'title' 并改为通过 $(".title").css() 查询。

```
<input id="title1" class="title" />
<input id="title2" class="title" />
<input id="title3" class="title" />

<script type="javascript">
  $(".title")each(function(){
      if(!$(this).val()){
        $(this).css({
          'background-color': 'rgba(230, 89, 78, 0.07)',
        }); 
      }
  });
</script> 
```

# php - 使用 Javascript 和 PHP 将表单数据提交到两个位置？

> ID：14269845
> 
> 赞同：1
> 
> 时间：2013-01-11T00:37:15.410
> 
> 标签：php, javascript, forms, email

我有一个包含多个文本区域和一个 PayPal“立即购买”提交按钮的订单。我希望 PayPal 按钮能够像往常一样工作，将订单提交给 PayPal，但我也希望使用相同的按钮来收集表单中的数据并通过电子邮件发送出去。不过，为了做到这一点，按钮需要有两个操作：向 PayPal 发送数据，以及将数据发送回我的 php 页面。

这似乎是一个常见问题，目前还没有明确的解决方案，仅使用 PHP。因为我只需要表单中的数据，我想我可以用 Javascript 来获取它。我想我可以在 paypal 按钮上放置一个 onClick 事件，它会调用一个 JavaScript 函数，其中包含发送电子邮件所需的 PHP。

这可能吗？我是不是想太多了？

**编辑** 好的，所以我不想深入研究 PayPal API，因为我一开始就对 PayPal 不满意。我正在考虑另一种解决方案，该解决方案尚未奏效，但可能具有潜力。

标准的 PayPal 按钮代码使用输入 type="image" 作为按钮。我在该输入标签周围放置了一个链接元素，并链接到一个 javascript 函数。例如：

```
<a href="javascript: submitForm()"> <input type="image src= ...> </a> 
```

我有一个这样的表格：

```
<form name="userInfo" action="sameFile.php" method="post"> 
```

其中“sameFile.php”只是这一行所在的当前 php 文件的名称。

然后在同一个代码文件的其他地方我有：

```
<script type="text/javascript"> function submitForm(){ document.forms["userInfo"].submit();}</script> 
```

其中 userInfo 是包含我所有用户输入框的表单。请注意，“userInfo”不是包含 PayPal 按钮的表单，所以这可能是问题所在......

无论如何，这一切似乎都有效，尽管我不知道 PayPal 订单是否通过。我只是被重定向回同一个 php 页面。

接下来我想使用 PHP 来提取应该在 POST 数组中的数据。我输入了一些报告 POST 值的测试回显，但是添加此代码后页面根本不会加载。我究竟做错了什么？有没有我应该放置解析表单数据的 PHP 的特定位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:54:30.797

您要发送订单完成邮件吗？

如果是这样，请编写代码以在贝宝的成功页面中发送邮件（在您的服务器中返回页面） - 这是实际的做法。

# php - 此代码中的 preg_match

> ID：14269852
> 
> 赞同：0
> 
> 时间：2013-01-11T00:38:15.737
> 
> 标签：php, preg-match

嗨，如果有人可以帮助我处理我的 preg_match 我想要这段代码的标题

```
 <dt class="gallery-icon">
    <a href="?attachment_id=31" title="title">
        <img width="150" height="150" src="librosdefirmas-bodas-1-150x150.jpg" class="attachment-thumbnail" alt="Caption">
    </a>
</dt> 
```

我有这个：

```
preg_match_all('/<dt class="gallery-icon">\s*<a href="(.*)" title="(.*)".*>/is', $page_columns[0], $titles); 
```

但是没有用，谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:48:35.277

不要使用正则表达式解析 HTML。[阅读](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php/3577662#3577662)。

```
$html = '
 <dt class="gallery-icon">
    <a href="?attachment_id=31" title="title">
        <img width="150" height="150" src="librosdefirmas-bodas-1-150x150.jpg" class="attachment-thumbnail" alt="Caption">
    </a>
</dt>
';
$dom_document = new DOMDocument();
$dom_document->loadHTML($html);
$dom_xpath = new DOMXpath($dom_document);
$elements = $dom_xpath->query("//dt/a");
print_r( $elements->item(0)->getAttribute('title') ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:46:49.407

".*" 是一个贪心匹配，即如果有后一个可以匹配，它会在第一个引号之外徘徊。使用 [^"]* 而不是 .* 来匹配除引号之外的所有字符。

# magento - 附加属性不起作用

> ID：14269854
> 
> 赞同：4
> 
> 时间：2013-01-11T00:38:22.427
> 
> 标签：magento

我正在尝试通过 API 添加以下 2 个附加属性。我没有收到任何错误，但是没有上传。如果有人能给我一个建议，那就太好了。

```
catalogProductAdditionalAttributesEntity AdAtrributeEntity = new catalogProductAdditionalAttributesEntity();

associativeEntity[] AdditionalAttributes = new associativeEntity[2];
associativeEntity AdditionalAttributeOne = new associativeEntity();
associativeEntity AdditionalAttributeTwo = new associativeEntity();

AdditionalAttributeOne.key = "color";
AdditionalAttributeOne.value = "green";
AdditionalAttributeTwo.key = "size";
AdditionalAttributeTwo.value = "xl";

AdditionalAttributes[0] = AdditionalAttributeOne;
AdditionalAttributes[1] = AdditionalAttributeTwo;

AdAtrributeEntity.single_data = AdditionalAttributes;
ProductEntity.additional_attributes = AdAtrributeEntity;

MyService.catalogProductUpdate(Mylogin, SKU, ProductEntity, null, null) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T15:00:31.677

我知道这是旧的，但我找到了解决方案。'single_data' 和 'multi_data' 需要在其中有一个包含属性数组的数组。

```
product_data = {
          'name' => self.get_attribute_value('name'),
          'description' => self.get_attribute_value('description'),
          'short_description' => self.get_attribute_value('short_description'),
          'weight' => self.get_attribute_value('weight'),
          'status' => self.get_attribute_value('status'),
          'categories' => compose_categories,
          'url_key' => self.get_attribute_value('url_key'),
          'price' => self.get_attribute_value('price'),
          'additional_attributes' => { 'single_data' => { items: compose_attribute_values }}
} 
```

在示例中，我将附加数组命名为“item”，但是，您可以随意调用它。我使用了“item”，因为 API 返回了许多类似的值。附加属性在 PHP 中如下所示：

```
...
'additional_attributes' = array(
    'single_data' => array(
        'item' => array(
            [0] => array(
                'key' => 'some_attribute_code',
                'value' => 'some_attribute_value'
            )
            [1] => array(
                'key' => 'some_other_attribute_code',
                'value' => 'some_other_attribute_value'
            )
        )
    )
)
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-01T15:14:09.967

这项工作添加`additional_attributes`：

```
'additional_attributes' => array(
    'single_data' => array(
        array(
            'key' =>'manufacturer',
            'value' => '10'
        )
    )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T18:44:17.753

**Java 示例**（[Apache XML-RPC](http://mvnrepository.com/artifact/org.apache.xmlrpc)客户端 + [Gson](https://github.com/google/gson)）：

我有`manufacturer`带有选项的属性：`Adidas`（ID：318）

产品实体：

```
...
@SerializedName("additional_attributes")
private Map<String,Map<String,String>> additionalAttributes;
...
// getters + setters
... 
```

代码：

```
...
Map<String,String> attribute = new HashMap<>();
attribute.put("manufacturer", "318");

Map<String,Map<String,String>> additionalAttributes = new HashMap<>();
additionalAttributes.put("single_data", attribute);

product.setAdditionalAttributes(additionalAttributes);
... 
```

然后做[product.update](http://devdocs.magento.com/guides/m1x/api/soap/catalog/catalogProduct/catalog_product.update.html) api 请求

ps：当然有点奇怪，但是你可以用一些门面来包裹它

# css - Twitter Bootstrap 延迟 CSS 效果

> ID：14269855
> 
> 赞同：0
> 
> 时间：2013-01-11T00:38:42.563
> 
> 标签：css, twitter-bootstrap

我使用 custom.css 文件扩展了 Bootstrap 提供的 CSS 模板。但是，我注意到在加载站点时，有片刻您可以看到引导程序提供的旧 CSS，然后站点使用新 CSS 进行自我调整。

我发现让 div 的字体/位置不断变化会分散用户的注意力。Web 开发人员如何使用 Bootstrap 解决这个问题？我了解您不要直接修改 Bootstrap CSS 文件，因为这会在更新到达时产生问题。

以供参考 ：

```
 <link href="{{ STATIC_URL }}css/bootstrap.css" rel="stylesheet">
 <link href="{{ STATIC_URL }}css/bootstrap-responsive.css" rel="stylesheet">
 <link href="{{ STATIC_URL }}css/custom.css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:22:22.560

将所有 3 个 CSS 文件合并为 1 个将是一种解决方案。有各种各样的方法可以做到这一点。低技术的方法是创建一个新的**combine.css**文件，然后将您的 3 个 CSS 文件复制并粘贴到这个新文件中。最好按照它们当前出现的顺序执行此操作。然后在文件的头部，将三个 CSS 文件链接替换为

```
<link href="{{ STATIC_URL }}css/combined.css" rel="stylesheet"> 
```

您也可以稍微加快页面加载速度，因为您现在只加载一个文件。

如果您想更进一步，请尝试缩小您的组合 CSS。同样有各种各样的选择，一种可能性是[http://www.cssminifier.com](http://www.cssminifier.com)

祝你好运

# azure - 从传统的用户名/密码身份验证迁移到 WIF

> ID：14269856
> 
> 赞同：1
> 
> 时间：2013-01-11T00:38:44.273
> 
> 标签：azure, migration, wif

我们有一些应用程序使用表单身份验证通过传统的用户名/密码或电子邮件/密码方法进行身份验证。我们希望将这些帐户慢慢迁移到 Windows Identity Foundation (WIF)。

将表单身份验证与 WIF 混合使用（就我所见）并不容易。基本上它归结为创建一个 STS 来提供来自内置数据库的声明。

如果我们选择构建另一个 STS 来托管帐户，有没有办法“合并”来自不同身份验证提供商的帐户？（即有人已经登录并想要合并来自不同身份验证提供程序的附加帐户。）

我们的想法是让客户合并帐户，然后慢慢删除旧的帐户数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:01:29.743

混合表格和 WIF 并不难：

[http://leastprivilege.com/2012/02/02/mixing-forms-and-token-authentication-in-a-single-asp-net-application/](http://leastprivilege.com/2012/02/02/mixing-forms-and-token-authentication-in-a-single-asp-net-application/)

[http://leastprivilege.com/2012/02/02/mixing-forms-and-token-authentication-in-a-single-asp-net-application-the-details/](http://leastprivilege.com/2012/02/02/mixing-forms-and-token-authentication-in-a-single-asp-net-application-the-details/)

# javascript - 带有自定义列的 SimpleCart 附加信息

> ID：14269859
> 
> 赞同：6
> 
> 时间：2013-01-11T00:39:16.593
> 
> 标签：javascript, shopping-cart, simplecart

我正在使用[SimpleCart Javascript 库](http://simplecartjs.org/)。

我想为`id`每个产品添加一个，当用户进行结账时，这些`id`也会被发送。

代替这些列，例如：

```
Name   Price
book   5$ 
```

我也想有一`Product Id`列包括：

```
Id   Name   Price
3    book   5$ 
```

我尝试将 插入`id`到选项中，但我没有这样做。

有人可以给我看一个详细的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T07:48:43.350

可以这样设置：

在“cartColumns”下设置的simplecart中添加

```
{ attr: "id" , label: "ID" } 
```

像这样：

```
cartColumns: [
        { attr: "image", label: "Item", view: "image"},
        //Name of the item
        { attr: "name" , label: "Name" },
        { attr: "id" , label: "ID" },
                    //etc……… 
```

然后你可以使用：

```
<span class="item_id">ID:1</span> 
```

或像这样：

```
simpleCart.add({ name: "Shirt" , price: 4, id: 1 }); 
```

它应该显示在您的列中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T03:00:25.580

根据文档示例[`item.get`](http://simplecartjs.org/documentation/simplecart-item-get)，[`item.set`](http://simplecartjs.org/documentation/simplecart-item-set)您应该能够设置自己的列。

```
var myItem = simpleCart.add({ productId: "A12", name: "Awesome T-Shirt" , 
                              price: 10 , size: "Small" });

myItem.get( "productId" ); // A12
myItem.set( "productId" , "C54" );
myItem.get( "productId" ); // C54 
```

此外，[每个项目都有一个内置 ID：](http://simplecartjs.org/documentation/simplecart-item-id) `simpleCart.Item.id()`

```
var myItem = simpleCart.add({ name: "Shirt" , price: 4 });
myItem.id(); // "SCS-1" 
```

[您还可以为自己的 ID 创建自定义视图。](http://simplecartjs.org/documentation/cart_columns)

> 创建自己的视图
> 
> 您可以通过将视图设置为函数而不是字符串来为购物车创建自定义视图。该函数应采用两个参数，即该行的项目和您指定的列详细信息。
> 
> ```
> { view: function( item , column ){
>         // return some html
>   } ,
>   label: "My Custom Column" 
> } 
> ```

# javascript - 捕获鼠标拖动事件JS时发生的奇怪事情

> ID：14269860
> 
> 赞同：0
> 
> 时间：2013-01-11T00:39:32.413
> 
> 标签：javascript, jquery, dom, javascript-events, event-handling

为了捕获鼠标拖动事件，我尝试在鼠标按下处理程序中放置鼠标向上处理程序，因此鼠标按下后必须可以检测到鼠标向上，我计划最终将 onmousemove 移动到函数中，但我无法得到这么多工作。

正在发生的事情是它会记录越来越多的数字（至少看起来如此），而不是我试图让它记录的四个。

```
 var clickx;         
    var clicky;         
    var releasex;
    var releasey;
    $('#tdw-layout-editable').bind("mousedown", function(e){
      clickx=e.clientX;
      clicky=e.clientY;
      console.log(clickx + " " + clicky);
      $('#tdw-layout-editable').bind("mouseup", function(f){
         releasex = e.clientX;
         releasey = e.clientY;
         console.log(releasex + " " + releasey);
     });
    }); 
```

真的很奇怪：\谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T01:00:28.943

改为这样做：

```
$(function(){
    var clickx;         
    var clicky;         
    var releasex;
    var releasey;
    $('#tdw-layout-editable').bind("mousedown", function(e){
        clickx=e.clientX;
        clicky=e.clientY;
        console.log(clickx + " " + clicky);
    }).bind("mouseup", function(f){
        releasex = f.clientX;
        releasey = f.clientY;
        console.log(releasex + " " + releasey);
    });  
 }); 
```

# jquery - 根据继承它的元素选择一个元素

> ID：14269863
> 
> 赞同：1
> 
> 时间：2013-01-11T00:39:50.240
> 
> 标签：jquery, jquery-selectors

jQuery中是否有任何选择器字符串可以让我通过仅选择其后具有特定元素的元素来过滤集合？

例如，如果我有一个如下所示的集合：

```
[div, div, span, div, div, div, span, div, span, div] 
```

而且我只想选择跨度之前的 div，如果可能的话，我怎么能在单个选择器字符串中执行此操作？有没有这样的东西：

```
$("div:preceding(span)") 
```

这不是什么大不了的事，但我只是好奇。目前，我只是遍历集合并检查每个元素以查看它是否是 div 并且紧随其后的元素（使用 .next() 选择）是一个跨度，如果是，我只需将其添加到在我开始循环之前创建了一个空集。这是解决这个问题的最好方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:42:14.457

尝试[`.prev()`](http://api.jquery.com/prev/)

```
$('span').prev('div'); 
```

匹配所有`div`其下一个直接兄弟元素是 a 的元素`span`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T01:48:55.643

好了，您的自定义选择器`:preceding`
可以完全按照您的需要使用（例如：）：`$('div:preceding(span)').css({color: 'red'});`

## [jsBin 演示](http://jsbin.com/emamaz/2/edit)

```
$.expr[":"].preceding = function(e, i, m) {
   return $(e).next(m[3]).length;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T00:55:08.597

我认为您必须对广泛的集合使用选择器（而不是查看它之后的内容），然后使用它`.filter()`来删除后面没有所需元素的项目。

我不知道有一个选择器会实现类似`$("div:preceding(span)")`.

`preceding`可以像在 jQuery 选择器支持中那样实现自己的自定义动词，但是这样做可能比`.filter()`像这样使用更麻烦：

```
$("div").filter(function() {
    return($(this).next("span").length != 0);
}); 
```

# html - HTML5 Messaging API 和使用 Web Worker 时的消息顺序

> ID：14269864
> 
> 赞同：2
> 
> 时间：2013-01-11T00:39:54.553
> 
> 标签：html, web-worker

在一个简单的 HTML5 web worker 项目中，我定义了一个使用 HTML5 消息 API 交换消息的 web worker。由于我们已经定义了两个 .onmessage 处理程序（回调函数），一个在主脚本中，另一个在 worker.js: index.html 中，因此我在这里感到困惑：

```
<!DOCTYPE html>
<html>
<body>
<script>
var worker = new Worker("worker.js");
worker.onmessage = function(event) {
    alert("Reply from index.html:"+event.data);
}
worker.postMessage("message 3,");
</script>
</body>
</html> 
```

工人.js：

```
this.onmessage = function(event) {
    postMessage("message 0,"+event.data);
} 
postMessage("message 1,"); 
```

我不明白的一件事是显示消息的顺序！它首先显示这个： ![在此处输入图像描述](../Images/bb843d6de3e28bec719b59b3e014a413.png) 然后显示这个 ![在此处输入图像描述](../Images/c31eeb55f52c48df3d6ec698b5fef147.png)

但为什么？我很困惑如何以及何时调用这些处理程序？首先是worker.postMessage("message 3,"); 触发 worker.postMessage("message 3,"); 在 worker.js 和 postMessage("message 0,"+event.data); in return 触发主脚本中的 worker.onmessage = function(event) ！然后在最后 postMessage("message 1,"); 从worker.js 触发主脚本（index.html）的onmessage。我们可以说我们对一个worker的任何postMessage调用都会触发其他webworker的onmessage函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:55:34.423

您可能会将 Web Worker 实现与您可能将对象作为函数传递的 js 方法混淆。HTML5 中的 WEB Worker 正在将线程引入 JAVASCRIPT。

原因似乎在 '.onmessage' 的附加事件中，并且您`worker.js` 从发布的表达式 'postMessage("message 0,"+event.data);' 开始 . 由于`message 0`这个原因，它排在第一位。

像下面这样的一个很好的介绍性教程应该可以解决您的顾虑 -[网络工作者的基础知识](http://www.html5rocks.com/en/tutorials/workers/basics/)。

# sql - 从行到列显示 SQL 数据

> ID：14269865
> 
> 赞同：1
> 
> 时间：2013-01-11T00:40:00.400
> 
> 标签：sql, pivot, oracle-sqldeveloper

我的 SQL 语句如下：

```
SELECT Count(DISTINCT A.LM_PERSON_ID) AS HEAD_COUNT 
,A.LM_STATUS
,To_Char(A.LM_STATUS_CHANGE_DT,'YYYY') AS YEAR
,B.LM_COURSE_NAME AS COURSE_NAME

FROM LM_ENRLOLMENT A
,LM_COURSE_TBL B

WHERE A.LM_STATUS='COMP'
AND A.LM_COURSE_ID=B.LM_CI_ID                  

GROUP BY A.LM_STATUS_CHANGE_DT,LM_STATUS,B.LM_COURSE_NAME 
```

我想显示的示例输出是：

```
COURSE_NAME      2010      2011     2012
   A              4         5        1
   B              2         1        1
   C              6         0        3
   D              1         1        2 
```

但我面临的主要问题`LM_STATUS_CHANGE_DT`是动态数据。有没有人可以告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T01:26:04.417

您没有指定您使用的 RDBMS，但您应该能够在所有版本中使用以下内容：

```
SELECT 
  B.LM_COURSE_NAME AS COURSE_NAME,
  count(DISTINCT case when To_Char(A.LM_STATUS_CHANGE_DT,'YYYY') = '2010' then A.LM_PERSON_ID end) as Year2010,
  count(DISTINCT case when To_Char(A.LM_STATUS_CHANGE_DT,'YYYY') = '2011' then A.LM_PERSON_ID end) as Year2011,
  count(DISTINCT case when To_Char(A.LM_STATUS_CHANGE_DT,'YYYY') = '2012' then A.LM_PERSON_ID end) as Year2012
FROM LM_ENRLOLMENT A
INNER JOIN LM_COURSE_TBL B
  ON A.LM_COURSE_ID=B.LM_CI_ID
WHERE A.LM_STATUS='COMP'
GROUP BY B.LM_COURSE_NAME 
```

如果您使用的是具有该`PIVOT`功能的 RDBMS (SQL Server 2005+/Oracle 11g+)，那么您的代码将类似于以下内容：

```
SELECT *
FROM
(
  SELECT DISTINCT B.LM_COURSE_NAME,
    To_Char(A.LM_STATUS_CHANGE_DT,'YYYY') As Year,
    A.LM_PERSON_ID
  FROM LM_ENRLOLMENT A
  INNER JOIN LM_COURSE_TBL B
    ON A.LM_COURSE_ID=B.LM_CI_ID
  WHERE A.LM_STATUS='COMP'
) src
PIVOT
(
  count(LM_PERSON_ID)
  for Year in ('2010', '2011', '2012')
) piv 
```

# html - 最小宽度和最大宽度问题。如何让内部内容随宽度增长

> ID：14269878
> 
> 赞同：0
> 
> 时间：2013-01-11T00:42:08.933
> 
> 标签：html, css

我有一个三栏网站，将显示所有三栏或仅显示一栏。如果它只显示一列，我下面的示例就是它将显示的列。此`intro`包装器是在此包装器左侧和右侧的列不存在的情况下需要增长的中心列。具体来说，介绍包装器中的第一个 div。第二个 div 中有一个静态图像，不应更改。

我使用了最小/最大宽度，但内容从未达到最大值，而是保持在最小值。

.intro 是包装器。这个包装器的最小宽度应该是 801 像素，并且可以增长到最大 1200 像素。第一个内部 div ( `.intro-left`) 应该最小为 531px，最大可以增长到 979px。

有人可以看看并告诉我哪里出错了吗？

这是我的代码。

```
.intro{
  float:left;
  min-height:200px;
  width:801px;
  padding:10px 0;
}

.intro .intro-right{
  display:inline;
  float:left;
  height:200px;
  width:250px;
  background:#ccc;
}

.intro .intro-right img{
  height:190px;
  width:240px;
  margin:5px 0 0 5px;
  border:1px solid #777;
}

.intro .intro-left{
  display:inline;
  float:left;
  width:531px;
  min-height:200px;
  margin-right:20px;
} 
```

```
<div class="intro">
  <div class="intro-left">
    <h2><a href="#">Test</a></h2>
    <p>test</p>
  </div>

  <div class="intro-right">
    <a href="#"><img alt="" src="1.jpg"></a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:09:33.767

display:table 解决了你的问题，。这是 CSS，我在测试时进行了一些更改，您可能希望删除这些更改。例如，使左侧 div 可调整大小，以便您可以看到它在运行中。

```
div.intro {border:2px dotted red;
                min-height: 200px;
                max-width:1200px;
                min-width:801px;
                padding: 10px 0;
                margin:0 auto;
                display:table;

            }
            .intro-right, .intro-left{display:inline-block;vertical-align:top;}

            .intro-right {
                height: 200px;
                width: 250px;
                background: #ccc;
                outline: 2px solid green;
            }

            .intro-right img {
                height: 190px;
                width: 240px;
                margin: 5px 0 0 5px;
                border: 1px solid #777;
            }

            .intro-left {
                width: 531px;
                height: 200px;
                margin-right: 20px;
                outline: 2px solid blue;
                resize:both;
                overflow:auto;
            } 
```

# python - 在 wxPython 中查找文本大小的正确方法

> ID：14269880
> 
> 赞同：5
> 
> 时间：2013-01-11T00:42:26.453
> 
> 标签：python, wxpython, size, wxtextctrl

我有一个正在 wxPython 中开发的应用程序。应用程序的一部分在网格中创建了大量的 TextCtrl，以便为任意大的人员列表输入一周中的每一天的四个字母代码。

我设法让它工作，但我不得不做一些笨拙的事情。具体来说，我还没有找到一个很好的方法来确定一段文本有多大（以像素为单位），所以我必须猜测 TextCtrls 的大小以适合最大的（4 个字母）代码。我担心的是，如果要更改文本的大小，或者将应用程序移植到 MSW 以外的其他地方，我的布局可能会中断。

我找到的解决方案是创建一个 StaticText 对象，用 4 个大字母填充它，获取它的大小，然后 .Destroy() 它。这行得通，但它确实看起来像一个笨拙的解决方案。有没有人有更直接的方法来计算任意文本字符串在 TextCtrl 中的大小？我查看了文档并且找不到任何东西，而且我还没有看到任何与我正在尝试做的事情完全相同的例子。

一个小代码示例（显示测试方法）如下：

```
 # This creates and then immediately destroys a static text control
    # in order to learn how big four characters are in the current font.
    testst = wx.StaticText(self, id = wx.ID_ANY, label = "XXXX")
    self.fourlettertextsize = testst.GetClientSize() + (4,4)
    testst.Destroy() 
```

（+ (4,4) 部分是在控件中添加更多空间以容纳光标，并在 TextCtrl 的客户区域中添加一个小边框；这是另一件我宁愿不直接做的事情。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T00:55:29.507

创建一个 wx.Font 实例，包含面、大小等；创建一个wx.DC；然后调用 dc.GetTextExtent("a text string") 以获取显示该字符串所需的宽度和高度。相应地在网格中设置行高和列宽。

就像是：

```
font = wx.Font(...)
dc = wx.DC()
dc.SetFont(font)
w,h = dc.GetTextExtent("test string") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-07T22:17:28.000

不要从[Paul McNett 的回答](https://stackoverflow.com/a/14269981/902825)中拿走，但对于那些不太熟悉 wxPython 的人来说，这里有一个简单的完整示例：

```
import wx

app = wx.PySimpleApp()

font = wx.Font(pointSize = 10, family = wx.DEFAULT,
               style = wx.NORMAL, weight = wx.NORMAL,
               faceName = 'Consolas')

dc = wx.ScreenDC()
dc.SetFont(font)

text = 'text to test'

# (width, height) in pixels
print '%r: %s' % (text, dc.GetTextExtent(text)) 
```

输出：`'text to test': (84, 15)`

# javascript - Filepicker.io - 选择导出目的地后上传/存储文件

> ID：14269881
> 
> 赞同：0
> 
> 时间：2013-01-11T00:42:27.300
> 
> 标签：javascript, filepicker.io

在我的网络应用程序中，我正在生成一些大图像文件，并希望用户能够使用 filepicker.io 导出它们我的问题是我似乎必须在调用`filepicker.store`之前调用上传生成的文件`filepicker.exportFile`，但我想要在用户选择目的地后上传文件。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:42:28.190

虽然不是最优雅的机制，但您可以使用文件选择器 url 是读/写的事实来使用 exportFile 调用存储“临时”图像。然后，您可以获取返回的 FPFile 对象，并在选择目标后执行 filepicker.write() 调用来存储文件。

# javascript - 在 Firefox 上带有手风琴内容和导航“活动”位置的 Scrolldeck

> ID：14269882
> 
> 赞同：0
> 
> 时间：2013-01-11T00:42:38.100
> 
> 标签：javascript, jquery, accordion, scrollto, parallax

我目前正在使用 scrolldeck.js 开发视差网站。而且我发现了一些我无法解决的问题，所以如果有人不介意在这里提供一些帮助会很棒:)

问题：

1 - 导航菜单不会在“活动”状态下停止。它总是落后 1 步，这意味着活动状态已添加到先前的导航中。而这只发生在Firefox中。

2 - 我在一些切片/页面/部分添加了手风琴内容，高度不会根据里面的内容自动调整。有没有办法可以将高度大小作为变量来自动调整？我发现该区域包含手风琴内容的每个切片/页面/部分之间也存在未知空间。

请点击[此处](http://kurosagi.x10.mx/)查看我目前正在工作的网站。

感谢您的关注 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:40:15.993

第一个问题是由`body{margin:0}`您的 normalize.css 文件中的声明引起的

第二个问题的原因是在您的文件“main.js”中，您在隐藏手风琴之前初始化了滚动面板。

这意味着 scrolldeck 计算包含元素的高度以包含手风琴的隐藏内容。只需将这两个东西交换一下，一切都会好起来的。

```
$(document).ready(function(){ 
  //Scrolldeck code
  //Accordion code
  //Rest of your code
}); 
```

# perl - 当我模块化我的代码时，“不是数组引用”错误开始发生

> ID：14269883
> 
> 赞同：2
> 
> 时间：2013-01-11T00:42:51.703
> 
> 标签：perl, perl-module

我正在模块化我的代码，但是当我移出`sub`它的原始模块时，我收到以下错误：

```
Couldn't load application from file "foo.pl": Not an ARRAY reference at D.pm line 10. 
```

这是原始文件。照原样，一切正常：

`FormerC.pm`：

```
package FormerC;

use strict;

my %my_hash = ( key => 'value' );
my @my_array = qw( some strings inside array );

sub problematic_sub {
  my ($hash_ref, $array_ref) = @_;

  my @an_array = @$array_ref;

  return \@an_array;
};

sub uses_problematic_sub {
  problematic_sub(\%my_hash, \@my_array);
};

uses_problematic_sub();

1 
```

这是两个新模块。有了这些，我得到了错误：

`D.pm`：

```
package D;

use strict;

sub new { bless {}, shift };

sub problematic_sub {
  my ($hash_ref, $array_ref) = @_;

  my @an_array = @$array_ref;

  return \@an_array;
};

1 
```

`C.pm`：

```
package C;

use strict;

use D;
my $d = D->new;

my %my_hash = ( key => 'value' );
my @my_array = qw( some strings inside array );

sub uses_problematic_sub {
  $d->problematic_sub(\%my_hash, \@my_array);
};

uses_problematic_sub();

1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:53:59.937

你曾经以替补`problematic_sub`身份打电话

```
problematic_sub(\%my_hash, \@my_array); 
```

但你现在调用 is 作为一种方法：

```
$d->problematic_sub(\%my_hash, \@my_array); 
```

由于您没有将代码编码`problematic_sub`为方法，因此这是不正确的。您还需要将`problematic_sub`'s 参数更改为以下内容：

```
my ($self, $hash_ref, $array_ref) = @_; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T00:51:18.240

[`Exporter`](https://metacpan.org/module/Exporter)使用模块将子例程名称导出到调用代码的命名空间可能会更好。你这里写的是一个面向对象的模块，但是对象只是子程序的集合，不需要面向对象的支持。

问题是这样的方法调用

```
$d->problematic_sub(\%my_hash, \@my_array) 
```

隐式将对象作为第一个参数传递，因此相当于

```
D::problematic_sub($d, \%my_hash, \@my_array) 
```

您需要做的就是在子例程中考虑到这一点

```
sub problematic_sub {

  my ($self, $hash_ref, $array_ref) = @_;

  my @an_array = @$array_ref;

  return \@an_array;
} 
```

你的代码应该可以工作。

另请注意，子例程声明（如`while`or`for`循环）*不是*语句，因此不需要也不应该在其后加上分号。

# java - CXF 中的自定义 JSON 日期处理

> ID：14269884
> 
> 赞同：0
> 
> 时间：2013-01-11T00:43:00.410
> 
> 标签：java, json, cxf, jax-rs, jettison

我正在使用 apache CXF 创建一个使用 multipart/form-data 的 JAX-RS 服务，其中一个部分是`application/json`我在 Java bean 中处理的部分。我遇到的问题是标准的jettison反序列化器无法识别传入的日期格式，而我只是得到`null`.

服务是：

```
@POST
@Path("/blah/")
@Consumes("multipart/form-data")
public String doBlah(MultipartBody body)
{
        JSON json = atts.get(0).getObject(JSON.class);
} 
```

JSON 对象是：

```
class JSON {
    Date date;
} 
```

传入的日期类似于：`November 25, 2012 13:35:24`我知道如何使用它进行转换`SimpleDateFormat`，所以我可以将 JSON 更改为有一个字符串，然后我可以获取该值，然后可以手动进行转换......但是你如何在 CXF 中注册一个类在抛弃中进行转换？

beans.xml 中是否有配置或我可以添加自定义处理程序和/或覆盖默认`Date`处理的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:50:00.893

您可以在 Spring 中注册自定义日期处理程序，如下所示：

```
<jaxrs:server …&gt;
    <jaxrs:providers>
        <bean class='….DateHandler' />
    </jaxrs:providers>
</jaxrs:server> 
```

日期处理程序类本身可以非常简单：

```
public class DateHandler implements ParameterHandler<Date> {
    @Override
    public Date fromString(String s) {
        Date ret = // do your magic
        return ret;
    }
} 
```

# command-line - 用于登录主机的 PuTTY 脚本

> ID：14269885
> 
> 赞同：10
> 
> 时间：2013-01-11T00:43:22.697
> 
> 标签：command-line, scripting, putty

我正在使用 PuTTY 远程登录我学校的主机。登录后，我们需要执行以下步骤：

1.  输入用户名
2.  输入密码
3.  命令“添加 oracle”
4.  命令“sqlplus”
5.  输入用户名
6.  输入密码

在本学期的课程中，我将经常登录这个主机，我希望创建一个脚本来消除上述步骤的冗余。忽略在脚本中包含密码的明显安全疏忽，我将如何实现这一点？我的脚本编写经验为零，因此非常感谢您的反馈。谢谢！

编辑：我使用了 Putty 的命令行选项，并且能够使用以下方法绕过步骤 1-2：

```
putty -load "host" -l username -pw password 
```

我还创建了一个看起来像这样的 shell 文件：

```
#!/bin/bash

add oracle10g
sqlplus username password 
```

当我尝试使用 -m 选项将此选项添加到命令行时，看起来 PuTTY 登录到主机然后立即退出。有没有办法在运行 shell 文件后让我的会话保持打开状态，或者我是否错误地使用了 -m 选项？这是我一直关注的 PuTTY 指南的链接：http: [//the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter3.html](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter3.html)。

这是我试图从命令行运行的总命令：

```
putty -load "host" -l username -pw password -m c:\test.sh 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T04:17:10.267

在朋友的帮助下解决了这个问题。PuTTY 选项将`-m`在执行 shell 文件后立即结束您的会话。我所做的是`putty.bat`在我的 Windows 机器上创建了一个用这些内容调用的批处理脚本：

```
@echo off
putty -load "host" -l username -pw password 
```

这让我远程登录到 Linux 主机。在主机端，我创建了一个`sql`带有以下内容的 shell 文件：

```
#!/bin/tcsh

add oracle10g
sqlplus username password 
```

我主机的 Linux 版本使用`tcsh`. 其他 Linux 版本可能会使用`bash`，因此只需将 tcsh 替换为 bash 就可以了。

总而言之，自动化这些步骤现在只需两个简单的步骤：

1.  双击`putty.bat`。这会打开 PuTTY 并将我登录到主机。
2.  运行命令`tcsh sql`。这会将 oracle 工具添加到我的主机，并将我登录到 sql 数据库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-13T02:54:02.000

我不确定为什么以前的答案没有建议原始发布者设置一个 shell 配置文件（bashrc、.tcshrc 等），每次他们在服务器端登录时都会自动执行他们的命令。

将我带到此页面寻求帮助的任务有点不同——我想要同一主机的多个 PuTTY 快捷方式来执行不同的启动命令。

我想出了两个解决方案，它们都有效：

（背景）我有一个包含各种 PuTTY 快捷方式的文件夹，每个快捷方式选项卡中的“目标”属性看起来像：

```
"C:\Program Files (x86)\PuTTY\putty.exe" -load host01 
```

每个负载对应于我保存的 PuTTY 配置文件（在“会话”选项卡中使用不同的主机）。（大多数情况下，它们只在配色方案上有所不同——我喜欢让每组相关任务在终端窗口中共享一个配色方案，而关键任务，比如在生产系统上以 root 身份登录，只在颜色明显的窗口中执行。）

该文件夹的 Windows 属性设置为非常干净和精简——它用作一个小控制台，为我经常使用的每个远程 PuTTY 和 RDP 连接提供快捷图标。

**（解决方案1）** 正如其他答案中提到的 -m 开关用于在 Windows 端配置脚本以运行， -t 开关用于保持连接，但我发现如果我想获得它是顺序敏感的它在不退出的情况下运行

经过大量试验和错误后，我终于开始工作的是：

（快捷方式目标字段）：

```
"C:\Program Files (x86)\PuTTY\putty.exe" -t -load "SSH Proxy" -m "C:\Users\[me]\Documents\hello-world-bash.txt" 
```

正在执行的文件看起来像

```
echo "Hello, World!"
echo ""
export PUTTYVAR=PROXY
/usr/local/bin/bash 
```

（不需要分号）

这会运行脚本命令（在我的例子中，只是在终端上打印“Hello, world”）并设置一个我的远程会话可以与之交互的变量。

调试注意事项：当您运行 PuTTY 时，它会加载 -m 脚本，如果您编辑脚本，则需要重新启动 PuTTY 而不是重新启动会话。

**（解决方案2）** 这种方法感觉更干净，因为大脑在远程Unix端而不是本地Windows端：

从 Putty 主会话（不是现有会话中的“编辑设置”）加载保存的配置并在 SSH 选项卡中将远程命令设置为：

```
export PUTTYVAR=GREEN; bash -l 
```

然后，在我的 .bashrc 中，我有一个部分根据该变量执行不同的操作：

```
case ${PUTTYVAR} in
  "")
    echo "" 
    ;;
  "PROXY")
    # this is the session config with all the SSH tunnels defined in it
    echo "";
    echo "Special window just for holding tunnels open." ;
    echo "";
    PROMPT_COMMAND='echo -ne "\033]0;Proxy Session @master01\$\007"'
    alias temppass="ssh keyholder.example.com makeonetimepassword"
    alias | grep temppass
    ;;
  "GREEN")
    echo "";
    echo "It's not easy being green"
    ;;
  "GRAY")
    echo ""
    echo "The gray ghost"
    ;;
  *)
    echo "";
    echo "Unknown PUTTYVAR setting ${PUTTYVAR}"
    ;;
esac 
```

**（解决方案3，未尝试）**

也应该可以让 bash 跳过我的 .bashrc 并执行不同的启动脚本，方法是将其放在 PuTTY SSH 命令字段中：

```
bash --rcfile .bashrc_variant -l 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-04T15:12:44.103

当您使用`-m`选项 putty 不分配 tty 时，它会运行命令并退出。如果你想运行一个交互式脚本（比如一个 sql 客户端），你需要告诉它分配一个 tty `-t`，见`3.8.3.12 -t and -T: control pseudo-terminal allocation`. 您将避免在服务器上保留脚本，以及在连接后必须调用它。

这是我用来从批处理文件连接到 mysql 的内容：

`#mysql.bat start putty -t -load "sessionname" -l username -pw password -m c:\mysql.sh`

`#mysql.sh mysql -h localhost -u username --password="foo" mydb`

[https://superuser.com/questions/587629/putty-run-a-remote-command-after-login-keep-the-shell-running](https://superuser.com/questions/587629/putty-run-a-remote-command-after-login-keep-the-shell-running)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T14:13:28.870

mputty 可以做到这一点，但它似乎并不总是有效。（如果等待时间太慢）

mputty 使用 putty 并且它扩展了 putty。有一个运行脚本的选项。如果它不起作用，请确保键入前的等待时间是一个高值或增加该值。查看腻子会话，然后是会话名称、鼠标右键、属性/脚本页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-22T18:33:26.653

登录后输入命令可以通过 putty 底部的 SSH 部分完成，您应该有一个选项 Remote command (data to send to server) 用 ; 分隔两个命令

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T01:00:29.390

我想为这些要求提出一个通用的解决方案，也许它对你有用：[AutoIt](http://www.autoitscript.com/site/autoit/)。使用该程序，您可以在像 Putty 这样的任何窗口顶部编写脚本并执行您想要执行的所有命令（例如在文本框或按钮中按下按钮或鼠标单击）。

通过这种方式，您可以模拟您一直使用 Putty 执行的所有步骤。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-27T06:05:34.280

对我来说，它是这样工作的：

```
putty -ssh root@1.1.1.1 22 -pw password 
```

putty，协议，用户名@ip地址端口和密码。在不到一秒钟的时间内连接。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-02-11T14:28:03.493

如果您`-i privatekeyfilelocation`使用的是私钥而不是基于密码，则可以使用 。

# logging - 在 FreeBSD 中监控进程创建

> ID：14269891
> 
> 赞同：0
> 
> 时间：2013-01-11T00:44:38.107
> 
> 标签：logging, process, freebsd, process-accounting

我正在寻找监视在 FreeBSD 系统上执行的所有命令。我已经看过 lastcomm 了，它在 BSD 中使用了进程记帐工具。不幸的是，它只存储每个执行命令的前十个字符。理想情况下，我希望整个命令包括 CLI 参数。

另外，由于我不想进入的原因，我正在这里使用 FreeBSD 4.x 系统，所以我认为我无法访问“auditd”或此类设施。

/proc 拥有我需要的所有信息，但我无法找到一种监控 procfs 以创建和删除新节点的好方法。

编辑：感谢您的输入。不幸的是，dtrace 不是一个选项，因为我提到这些是 FreeBSD 4.x 系统。接下来 - 我确实查看了 /proc 中的修改时间。只是kqueue并没有具体说明修改了什么文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T17:32:04.673

探索[dtrace](https://wiki.freebsd.org/DTrace)工具。我认为，它具有您需要的功能，尽管您应该知道，记录您希望记录的所有内容可能会大大降低您的系统速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:11:23.627

`/proc`如果创建了新进程，检查是否更改了修改时间？

* * *

或者，运行一个循环执行以下操作。您需要一个列表或数组来存储 PID。

*   调用`kvm_getprocs`（使用 的`op`参数`KERN_PROC_PROC`）以获取有关*所有*正在运行的进程的信息。
*   跳过您已经知道的所有 PID。
*   将所有新 PID 添加到 PID 列表或数组中。使用新流程所需的任何信息。
*   从您的列表中清除所有已结束的进程。

# desire2learn - Desire2Learn SSO 到学习对象页面

> ID：14269892
> 
> 赞同：0
> 
> 时间：2013-01-11T00:44:55.517
> 
> 标签：desire2learn

如果我提供 orgid 作为查询参数，我可以使用 SSO 到 D2L 转到主页或课程主页。如何使用 SSO 转到其他领域，例如课程内容、LO 或用户进度、成绩簿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:53:48.357

这取决于您使用的 LMS 的年份；LMS 托管的某些页面支持直接访问页面所需的深层链接，而有些则不支持。D2L 正在努力将越来越多的页面移至支持深度链接的新框架，因此每个版本*都应该*有更多符合此行为的页面。如果您有特别希望看到支持此行为的页面，您可以通过您的客户经理提供此反馈：D2L 优先考虑客户需求的工作，因此现在让他们可能会有所帮助。

# eclipse - 如何强制 sublclipse 提交？

> ID：14269893
> 
> 赞同：1
> 
> 时间：2013-01-11T00:44:57.687
> 
> 标签：eclipse, svn, commit, subclipse

即使它认为某些文件“已过时”，我如何强制 sublclipse 将代码提交到存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:28:12.837

如果工作副本已过时，服务器将拒绝提交。客户端不能覆盖它。只需运行更新选项，以便您的工作副本对于更改的项目是最新的。

# python - 将 yield 与多个 ndb.get_multi_async 一起使用

> ID：14269894
> 
> 赞同：8
> 
> 时间：2013-01-11T00:45:01.213
> 
> 标签：python, google-app-engine, asynchronous, app-engine-ndb

我正在尝试提高来自 appengine 数据存储区的当前查询的效率。目前，我正在使用同步方法：

```
class Hospital(ndb.Model):
      name = ndb.StringProperty()
      buildings= ndb.KeyProperty(kind=Building,repeated=True)
class Building(ndb.Model):
      name = ndb.StringProperty()
      rooms= ndb.KeyProperty(kind=Room,repeated=True)
class Room(ndb.Model):
      name = ndb.StringProperty()
      beds = ndb.KeyProperty(kind=Bed,repeated=True)
class Bed(ndb.Model):
      name = ndb.StringProperty()
      ..... 
```

目前我愚蠢地经历：

```
currhosp = ndb.Key(urlsafe=valid_hosp_key).get()
nbuilds = ndb.get_multi(currhosp.buildings)
for b in nbuilds:
   rms = ndb.get_multi(b.rooms)
   for r in rms:
      bds = ndb.get_multi(r.beds)
      for b in bds:
          do something with b object 
```

我想使用 get_multi_async 将其转换为更快的查询

我的困难在于如何做到这一点？有任何想法吗？

最好的乔恩

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T06:13:36.917

using the given structures above, it is possible, and was confirmed that you can solve this with a set of tasklets. It is a **SIGNIFICANT** speed up over the iterative method.

```
@ndb.tasklet
def get_bed_info(bed_key):
    bed_info = {}
    bed = yield bed_key.get_async()
    format and store bed information into bed_info
    raise ndb.Return(bed_info)

@nbd.tasklet
def get_room_info(room_key):
    room_info = {}
    room = yield room_key.get_async()
    beds = yield map(get_bed_info,room.beds)
    store room info in room_info
    room_info["beds"] = beds
    raise ndb.Return(room_info)

@ndb.tasklet
def get_building_info(build_key):
    build_info = {}
    building = yield build_key.get_async()
    rooms = yield map(get_room_info,building.rooms)
    store building info in build_info
    build_info["rooms"] = rooms
    raise ndb.Return(build_info)

@ndb.toplevel
def get_hospital_buildings(hospital_object):
    buildings = yield map(get_building_info,hospital_object.buildings)
    raise ndb.Return(buildings) 
```

Now comes the main call from the hospital function where you have the hospital object (hosp).

```
hosp_info = {}
buildings = get_hospital_buildings(hospital_obj)
store hospital info in hosp_info
hosp_info["buildings"] = buildings
return hosp_info 
```

There you go! It is incredibly efficient and lets the schedule complete all the information in the fastest possible manner within the GAE backbone.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T16:01:32.417

你可以用 query.map() 做一些事情。请参阅[https://developers.google.com/appengine/docs/python/ndb/async#tasklets](https://developers.google.com/appengine/docs/python/ndb/async#tasklets)和[https://developers.google.com/appengine/docs/python/ndb/queryclass#Query_map](https://developers.google.com/appengine/docs/python/ndb/queryclass#Query_map)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T12:01:44.017

不可能。您的第二个查询 (ndb.get_multi(b.rooms)) 取决于您的第一个查询的结果。所以拉它异步dosnt工作，因为此时第一个查询的（第一个）结果无论如何都必须可用。NDB 在后台执行类似的操作（在您处理第一个结果时，它已经缓冲了 ndb.get_multi(currhosp.buildings) 的下一项）。但是，您可以使用非规范化，即保留一个大表，每个 Building-Room-Bed 对有一个条目，然后从该表中提取结果。如果您对该表的读取次数多于写入次数，这将大大提高您的速度（读取 1 个 DB，而不是 3 个）。

# eclipse - 在 Eclipse 中运行 Scala 文件

> ID：14269898
> 
> 赞同：2
> 
> 时间：2013-01-11T00:45:23.883
> 
> 标签：eclipse, scala, ide

我正在尝试使用 Eclipse Indigo 运行 scala 文件。我已经为 Eclipse 安装了 Scala IDE，并且在 Scala 透视图中，但是没有出现作为 Scala 应用程序运行的选项。我当前尝试运行的文件是我导入 Eclipse 的现有项目的一部分。Scala IDE 插件似乎正在工作，因为我可以创建 Scala 对象并将它们作为 Scala 应用程序运行，并且 Scala 编译器正在检测错误。

如何获得将文件作为 Scala 应用程序运行的选项，用于 Eclipse Indigo 的 Scala IDE 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:59:31.037

您尝试运行的文件必须像这样定义：

```
object MyFile extends App { /* your code to run here */ } 
```

或者：

```
object MyFile {
  def main(args: Array[String]) { /* your code to run here */ }
} 
```

如果其中任何一个为真，您应该能够通过右键单击或顶部的工具栏按下播放按钮。

# list - Get List of All Emacs Buffers

> ID：14269903
> 
> 赞同：3
> 
> 时间：2013-01-11T00:45:56.690
> 
> 标签：list, emacs, buffer

How do I get a list of all buffers in Emacs? I then want to iterate this list using `dolist` or `mapcar`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:52:02.883

Use `(buffer-list &optional frame)`:

Return a list of all existing live buffers. If the optional arg FRAME is a frame, we return the buffer list in the proper order for that frame: the buffers show in FRAME come first, followed by the rest of the buffers.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T00:52:37.847

`(list-buffers)` and work from there?

# .net - 为什么 Windows 8 上的 LongDatePattern 不同

> ID：14269909
> 
> 赞同：0
> 
> 时间：2013-01-11T00:46:19.950
> 
> 标签：.net, windows-8

我最近刚刚将我的机器升级到 Win8，我的一些单元测试失败了。我将其追溯到：

```
Win7: CultureInfo("en-US").DateTimeFormat.LongDatePattern = "dddd, MMMM dd, yyyy"
Win8: CultureInfo("en-US").DateTimeFormat.LongDatePattern = "dddd, MMMM d, yyyy" 
```

我在哪个版本的 .Net 框架下尝试这个并不重要。

是否有其他一些影响这一点的全局 Win8 设置？我找不到任何关于这个被改变的东西——一切都表明它应该是第一个模式。

最简单的代码片段是在 PowerShell 中尝试：

```
> [system.globalization.cultureinfo]::currentculture.datetimeformat.longdatepattern
dddd, MMMM d, yyyy 
```

FullDateTimePattern 也有类似的变化：`dddd, MMMM d, yyyy h:mm:ss tt`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:42:56.747

这种变化的原因（这是你的问题）是为了不包括前导零。这对打印和存储有积极影响。

无论如何，只有书呆子更喜欢前导零；）

# java - 读取将文件另存为空

> ID：14269911
> 
> 赞同：0
> 
> 时间：2013-01-11T00:46:23.847
> 
> 标签：java, null, load, save, loading

我正在尝试制作一个备份程序，允许您选择要备份文件的位置。我可以保存文件位置，但读取它是问题所在。

保存方法

```
 public static void write(String importdest) throws IOException {
    // Create some data to write.

    String dest = importdest;

    // Set up the FileWriter with our file name.
    FileWriter saveFile = new FileWriter("Q'sSavesConfig.cfg");

    // Write the data to the file.
    saveFile.write(dest);

    // All done, close the FileWriter.
    saveFile.close();
  } 
```

可变加载方法

```
public static String read() throws IOException {
    String dest;

    BufferedReader saveFile = new BufferedReader(new FileReader("Q'sSavesConfig.cfg"));

 // Throw away the blank line at the top.
    saveFile.readLine(); 
    // Get the integer value from the String.
    dest = saveFile.readLine();
    // Not needed, but read blank line at the bottom.
    saveFile.readLine(); 

    saveFile.close();

    // Print out the values.
    System.out.println(dest + "\n");
    System.out.println();

    return dest;
  } 
```

我的主要问题是

> System.out.println(dest + "\n")

打印出“null”，但它应该加载“Q'sSavesBackup.cfg”中保存的信息

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:51:52.907

问题是您正在跳过唯一有数据的行：

```
// Throw away the blank line at the top.
saveFile.readLine(); 
```

因此，您将在下一次阅读时达到`EOF`和`String` `dest`将相等：`null`

```
dest = saveFile.readLine(); 
```

通过*不*跳过第一行，您将读回`String`源文件。

# apache-pig - 逃离猪的美元符号？

> ID：14269913
> 
> 赞同：4
> 
> 时间：2013-01-11T00:46:28.453
> 
> 标签：apache-pig

这在 0.9.2 中不是问题，但在 0.10 中，当我尝试访问其中包含美元符号的映射中的键时，我会遇到未定义变量的错误。具体来说：

```
blah = FOREACH meh GENERATE source, json_post_id#'$id' AS post_id; 
```

返回

```
Undefined parameter : id 
```

这很好并且有道理，但是当我将其修改为：

```
blah = FOREACH meh GENERATE source, json_post_id#'\$id' AS post_id; 
```

我得到：

```
Unexpected character '$' 
```

想法？

[编辑] 忘了提：也尝试了 2 个反斜杠和 3 个反斜杠。没有骰子。[/编辑]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:14:48.687

1.  [根据对您的 Mail Archive Posting 的回复](http://www.mail-archive.com/user@pig.apache.org/msg06997.html)，看起来行为“在使用 Grunt shell 并将其作为脚本运行时会有所不同”。

    > **输入文件**
    > 
    > ```
    > cheolsoo@localhost:~/workspace/pig-svn $cat 1.txt $id,a 
    > ```
    > 
    > **咕噜壳**
    > 
    > `$`没有反斜杠的作品：
    > 
    > ```
    > grunt> A = LOAD '1.txt' USING PigStorage(',') AS (k:chararray,
    > v:chararray); grunt> B = FOREACH A GENERATE TOMAP(k, v) AS M; grunt> C
    > = FOREACH B GENERATE M#'$id'; grunt> DUMP C; (a) 
    > ```
    > 
    > **脚本**
    > 
    > `$`带有单个反斜杠的工作原理：
    > 
    > ```
    > cheolsoo@localhost:~/workspace/pig-svn $cat test.pig A = LOAD '1.txt' 
    > USING PigStorage(',') AS (k:chararray, v:chararray); B = FOREACH A
    > GENERATE TOMAP(k, v) AS M; C = FOREACH B GENERATE M#'\$id'; DUMP C;
    > 
    > cheolsoo@localhost:~/workspace/pig-svn $./bin/pig -x local test.pig
    > (a) 
    > ```

2.  此外，[对于拆分字符串（STRSPLIT）的 Pig 问题](https://stackoverflow.com/questions/5670249/pig-problem-with-split-stringstrsplit)，您是否尝试过以下任一方法。

    *   正确转义字符`u0024`。使用单引号或双引号测试单引号，看看是否有区别。[这个答案表明单引号会有所不同](https://stackoverflow.com/a/7854861/1085891)，但值得一提。

    *   或者，虽然相关，但[将循环分成一个块](https://stackoverflow.com/a/6832401/1085891)。

        ```
        blah = FOREACH meh {
            GENERATE source, json_post_id#'$id' AS post_id; 
        } 
        ```

3.  看起来你正在连接一个`id`. 确保您不打算使用`CONCAT()`. [http://pig.apache.org/docs/r0.10.0/func.html#concat](http://pig.apache.org/docs/r0.10.0/func.html#concat)

4.  [根据`Class PigStorage`文档（Pig 0.10.0 API）](http://pig.apache.org/docs/r0.10.0/api/org/apache/pig/builtin/PigStorage.html)：

    > 使用字符分隔符将输入行解析为字段的加载函数。默认分隔符是制表符。您可以将任何字符指定为文字 ("a")、已知的转义字符 ("\t") 或 dec 或十六进制值 ("\u001"、"\x0A")。

# c# - 有没有常用的 IQueryable 实现？

> ID：14269914
> 
> 赞同：5
> 
> 时间：2013-01-11T00:46:31.197
> 
> 标签：c#, c#-4.0

我正在编写一个类的单元测试。该类的一些方法将`IQueryable`对象作为参数，我想模拟传递给这些方法的对象。是否有任何内置到 C# 中的集合来实现`IQueryable`？如果没有，我该如何模拟这些对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T00:49:05.217

只需使用`IEnumerable<T>.AsQueryable()`. `IEnumerable<T>`使用你喜欢的任何实现者。

# c# - 随机存取存储器中的索引数据库

> ID：14269918
> 
> 赞同：1
> 
> 时间：2013-01-11T00:46:54.353
> 
> 标签：c#, java, .net, sql, database

我目前正在为工作搜索系统编写一个小型测试 Web 应用程序。我有一张桌子**空缺**（主要要讲的桌子）。我需要对与用户查询匹配的空缺**（在输入控件下方的建议列表中）进行快速 AJAX 更新。**不同的 DBMS 提供了强大的编程扩展，例如Microsoft SQL Server 中的**自由文本搜索**……但我认为扫描物理文件需要大量时间。我的想法是基于将整个表**Vacancy**转移到 RAM 中，所以在我看来，这是有道理的，因为在这种情况下，数据检索需要更少的时间。因此，如果客户在文本框中键入“pro”之类的内容 - 建议列表会显示建议：

```
        -产品经理
        - 专业设计师
        -程序员
        -程序员 C#
        -程序员Java
        -物业管理员
        -供应专家

```

当用户键入另一个字母“g”时，文本框的值将扩大为**“prog”** 并且列表会刷新：

```
        -程序员
        -程序员 C#
        -程序员Java

```

为了实现这一点，我计划在节点中创建一个保存值的树索引，其中**空缺前缀**将扮演**索引键**的角色，节点值是**空缺**名称。索引仅使用数据表中的数据构建和填充**一次。**看看我在下面的意思：

```
 “专业” -> {
           “产品经理”，
           “专业设计师”，
           “程序员”，
           "程序员 C#",
           “程序员Java”
           “物业管理员”，
           “供应专家”
           }
```

因此索引构建器必须分析字符串列表并找到空位名称**的最少前缀**。然后，当构建器在先前找到的前缀之后找到带有字母的字符串时，它会创建一个子树节点**（“prog”）**（该节点中的数据值计数随着不断过滤而减少）并将自身添加到父节点**（“专业”）**

```
“前卫” -> {
           “程序员”，
           "程序员 C#",
           “程序员Java”}
           }
```

你能告诉我自然适合解决这个问题的树索引类型吗？在寻找时间之前，它们中最好的是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T02:21:05.327

这个问题在几年前就解决了，你正在重新创建[Lucene](http://lucene.apache.org/)：

值得一提的是，您想要的树类型是帕特里夏树或基数树。就将所有数据存储在 RAM 中而言，这是一个坏主意，因为还有其他应用程序使用 RAM，而不仅仅是您的索引。目前，我正在删除某人的自定义数据库，他们认为以这种方式实施是一个好主意，并用真正的数据库解决方案替换它。

# .htaccess - .htaccess 重写而不影响相对图像/css/js URL？

> ID：14269919
> 
> 赞同：2
> 
> 时间：2013-01-11T00:46:59.727
> 
> 标签：.htaccess, mod-rewrite, rewrite, relative-url

我需要一些关于我的 htaccess 文件的简单帮助，提前谢谢你。

我有一些网站网址，例如：

*   www.site.com/index.php?page_path=solutions-overview.html
*   www.site.com/index.php?page_path=solutions-a.html

我想使用 RewriteEngine 将上述链接分别更改为以下内容：

*   www.site.com/solutions/overview
*   www.site.com/solutions/a

下面是我正在使用的 .htaccess 代码：

```
RewriteEngine On
RewriteRule ^solutions/overview index.php?page_path=solutions-overview.html
RewriteRule ^solutions/a index.php?page_path=solutions-a.html 
```

这可行，但是我的所有图像、CSS 文件和 JS 文件都不再加载，因为页面试图获取错误的 URL。例如，“/images/blah.jpg”被加载为“/solutions/images/blah.jpg”。

如何修改 htaccess 代码以防止相对 URL 发生变化？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-03T08:52:55.167

将此行添加`<BASE href="http://www.yoursitename.com/">`到标签内的页面中`<head>`，如下所示：

```
<head>
    <title>Your site title</title>
    <BASE href="http://www.yoursitename.com/">
    ....
</head> 
```

# forms - Zend框架2中的表单字段和标签位置

> ID：14269920
> 
> 赞同：1
> 
> 时间：2013-01-11T00:47:03.020
> 
> 标签：forms, label, zend-framework2

我有一个使用 Zend\Form\Annotation 创建的 Zend 表单。我正在使用以下代码生成 HTML：

```
echo $this->form()->openTag($form);
echo $this->formCollection($form);
echo $this->form()->closeTag(); 
```

问题是标签放置在输入文本字段之前，如下所示：
标签：输入文本框

我想这样做：
标签：
输入文本框

如何格式化我的标签以获得我想要的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:03:51.720

我要做的是使用单个元素打印而不是使用 formCollection 方法，如下所示：

```
<dl class="zend_form">
    <?php echo $this->formElementErrors($form->get('identity')) ?>

    <dt><?php echo $this->formLabel($form->get('identity')) ?></dt>
    <dd><?php echo $this->formInput($form->get('identity')) ?></dd>

    <dt><?php echo $this->formLabel($form->get('credential')) ?></dt>
    <dd><?php echo $this->formInput($form->get('credential')) ?></dd>

    <?php if ($this->redirect): ?>
        <input type="hidden" name="redirect" value="<?php echo $this->redirect ?>" />
    <?php endif ?>

    <dd><?php echo $this->formButton($form->get('submit')) ?></dd>
</dl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:55:13.830

你可以使用css：

```
label {
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T00:57:58.037

just give the elements an id in your annotation like @Annotation\Attributes({"id" : "id"})

# css - 水平对齐两行div

> ID：14269922
> 
> 赞同：1
> 
> 时间：2013-01-11T00:47:08.993
> 
> 标签：css, html, alignment

我有几排按钮，我希望一个左对齐，另一个右对齐——但在单独的一行上。

如果我使用表格，我会这样做：

```
<table>
<tr>
<td>Content Left Aligned</td>
</tr>
<tr>
<td align="right">Content Right Aligned</td>
</tr>
</table> 
```

但我在这里尝试使用 CSS 和 div。这就是我所拥有的：（[JSFiddle](http://jsfiddle.net/gTYA4/)）

```
 <div style='text-align:left;'>

        <div class="btn1 rounded-corners">  
            Green
        </div>

        <div class="btn1 rounded-corners">
            Blue
        </div>

        <div class="btn1 rounded-corners">
            Purple
        </div>
    </div>      
    <div style="clear:all;">&nbsp;</div>

    <div style='text-align:right;'>
        <div class="btn2 rounded-corners">
            Six 
        </div>                  

        <div class="btn2 rounded-corners">
            Seven
        </div>                  

        <div class="btn2 rounded-corners">
            Eight
        </div>          
    </div>      
    <div style="clear:all;">&nbsp;</div> 
```

我对这个 CSS 做错了什么？（有关正在发生的事情的工作示例，请参阅[JSFiddle](http://jsfiddle.net/gTYA4/) - 那里有一些我不想在这里混乱的样式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:51:11.737

替换`float:left`为`display:inline-block`

[更新小提琴](http://jsfiddle.net/gTYA4/2/)

`float`用于非常特定的目的。将`<div>`s 放在同一行不是;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T01:37:46.037

我同意 Pablo 并会使用 CSS 样式表而不是 JS Fiddle

您所要做的就是从您的样式中删除 FLOAT 属性并使用 SPAN 代替 DIV 无需其他更改！

![在此处输入图像描述](../Images/7bb6c8e6bf62b6c3b6cb800ddd5492ae.png)

将下面的代码复制并粘贴到新文档中，然后查看。

```
.btn1
{
  font-size:1.2em;
  padding:5px 20px;
  margin:0px 5px;
  border: 1px solid #0E5727;
  color:red;
  cursor:pointer;
}

.btn2
{
  font-size:.8em; 
  padding:5px 20px; 
  margin:0px 5px;
  border: 1px solid #0E5727; 
  color:blue; 
  cursor:pointer;
}

.rounded-corners
{
  -moz-border-radius: 20px; /* Firefox */
  -webkit-border-radius: 20px; /* Safari, Chrome */
  border-radius: 20px; /* universal */
}

<div style="text-align:left;">
  <span class="btn1 rounded-corners">Green</span>
  <span class="btn1 rounded-corners">Blue</span>
  <span class="btn1 rounded-corners">Purple</span>
</div>
<div style="width: 100%;">&nbsp;</div>
<div style="text-align:right;">
  <span class="btn2 rounded-corners">Six</span>
  <span class="btn2 rounded-corners">Seven</span>                  
  <span class="btn2 rounded-corners">Eight</span>          
</div>
<div style="width: 100%;">&nbsp;</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:51:15.610

您应该使用浮动属性。
会是这样的：

```
<div style="float:left;width:400px">

</div>
<div style="margin-left:400px">

</div> 
```

无论如何，您应该使用 css 文件 appart。
试试看，告诉我它是否成功。

# android - 如何知道我的 SensorManager 是否有已注册的 Sensor

> ID：14269925
> 
> 赞同：7
> 
> 时间：2013-01-11T00:48:11.347
> 
> 标签：android, listener, registration, sensors, sensormanager

我正在为我的 Android 应用程序使用传感器。我用一行代码注册传感器：

```
mySensorManager.registerListener(this, orientationSensor, SensorManager.SENSOR_DELAY_NORMAL); 
```

我引入了一行代码来取消注册监听器，因此它不会一直运行：

```
mySensorManager.unregisterListener(this); 
```

到目前为止它有效，但我需要在应用程序恢复时再次注册。我需要知道我的 sensorManager 是否有注册的侦听器，以便我可以再次注册或跳过它。可以做这样的事情吗？：

```
if (mySensorManager.getRegisteredListenerList == null){ registerListener() } else { .. } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T01:37:47.177

据我所知，没有本地方法可以检查您是否已经注册了侦听器。我不会太担心这个检查，因为这个检查已经由 Android 完成，所以如果你已经注册了监听器，Android 不会添加相同的监听器两次：

```
@SuppressWarnings("deprecation")
private boolean registerLegacyListener(int legacyType, int type,
        SensorListener listener, int sensors, int rate)
    {
        if (listener == null) {
            return false;
        }
        boolean result = false;
        // Are we activating this legacy sensor?
        if ((sensors & legacyType) != 0) {
            // if so, find a suitable Sensor
            Sensor sensor = getDefaultSensor(type);
            if (sensor != null) {
                // If we don't already have one, create a LegacyListener
                // to wrap this listener and process the events as
                // they are expected by legacy apps.
                LegacyListener legacyListener = null;
                synchronized (mLegacyListenersMap) {
                    legacyListener = mLegacyListenersMap.get(listener);
                    if (legacyListener == null) {
                        // we didn't find a LegacyListener for this client,
                        // create one, and put it in our list.
                        legacyListener = new LegacyListener(listener);
                        mLegacyListenersMap.put(listener, legacyListener);
                    }
                }
                // register this legacy sensor with this legacy listener
                legacyListener.registerSensor(legacyType);
                // and finally, register the legacy listener with the new apis
                result = registerListener(legacyListener, sensor, rate);
            }
        }
        return result;
    } 
```

因此，您可以根据需要多次调用 registerListener，它只会被添加一次:)

这同样适用于注销逻辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-25T10:24:04.213

@addition to Pavel： `SensorEventListeners`可以多次注册。见[这里](https://stackoverflow.com/questions/12326429/get-multiple-sensor-data-at-the-same-time-in-android)和[Android 开发者的 Java 编程](https://books.google.de/books/about/Java_Programming_for_Android_Developers.html?id=2X6tAAAAQBAJ&redir_esc=y)。我确实注册了 9 个具有侦听器延迟`SENSOR_DELAY_GAME`和 run()的传感器`THREAD_PRIORITY_BACKGROUND`。它工作正常。要取消注册，我做了以下操作 `private class readoutRunnable implements Runnable`：

```
@Override
    public void run() {
        try { 
              //process events from locally stored SensorEvent[]
              // array is filled from onSensorChanged()
        } catch (Exception e) {
            // catch e
        } finally {
            sensorManager.unregisterListener(listener);                
        }
    } 
```

这会引发很多事件，`onsensorchanged()`这就是为什么你应该接受谷歌的[建议](http://developer.android.com/guide/topics/sensors/sensors_overview.html)，不要更加严重地阻止该方法：

> 传感器数据可以高速变化，这意味着系统可能会经常调用 onSensorChanged(SensorEvent) 方法。作为最佳实践，您应该尽可能少地在 onSensorChanged(SensorEvent) 方法中执行操作，以免阻止它。如果您的应用程序需要您对传感器数据进行任何数据过滤或缩减，您应该在 onSensorChanged(SensorEvent) 方法之外执行该工作。

# ios - 从一个视图移动到另一个 iOS

> ID：14269926
> 
> 赞同：1
> 
> 时间：2013-01-11T00:48:32.683
> 
> 标签：ios, objective-c, ipad

我对 iOS 开发比较陌生。我要从一个 viewController 移动到另一个我在按钮单击时使用模态 segue 转换。这是一个游戏，所以我想让用户单击图像来移动应用程序菜单。

我有一个显示多个图像的主页，单击一个我希望能够移动到另一个视图。目前使用模态 segue 执行此操作会导致我的 touchesEnded 事件出现奇怪的问题，例如，如果我导航到页面 3 次，则 touchesEnded 事件会被触发 3 次。

有没有更好的方法让我做到这一点，或者我只是缺少基本的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:58:23.697

是的，我认为您必须将导航控制器设为您的根视图控制器，然后相应地推送视图

```
UINavigationController * nav = [[UINavigationController alloc] initWithRootViewController:YOUR_BASE_CONTROLLER]
self.rootViewController = nav; 
```

这是在您的应用程序委托中。

然后在您的操作方法中

```
[self.navigationController pushViewController:secondViewController animated:YES] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:59:23.683

我假设您正在使用情节提要使用 segues 链接 VC。

模态转场非常适合简单的过渡，但当它们仅通过 SB 链接时，它们似乎确实限制了您可以完成的工作。我发现为 VC segue 创建包含以下内容的 IBAction 不仅可以让您更有效地控制 segue，还可以让您更清楚地了解转换期间实际发生的情况。

```
-(IBAction)goToVc:(id)sender{
    //Other code to take place during the segue here

    //This will identify the Storyboard in use
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard"   bundle:nil];

    //This will identify the View Controller to switch to
    SecondViewController *vc2 = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewControllerID" ];

    [self presentViewController:vc2 animated:YES completion:NULL];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T00:51:16.887

每次执行模态转场时，都会丢失`UINavigationController`之前使用的转场。您需要做的是将 a 嵌入`UINavigationController`到您正在执行模态搜索的视图中。

查看[我前几天回答](https://stackoverflow.com/questions/14222810/push-view-controllers-from-modal-view-in-storyboard/14222884#14222884)的问题，以帮助您更清楚地想象我在说什么。

# c# - 具有字符串赋值和获取值的表达式树

> ID：14269929
> 
> 赞同：4
> 
> 时间：2013-01-11T00:48:47.957
> 
> 标签：c#, linq, expression-trees

我已经构建了自己的 SQL 查询构建器来分解表达式，但是，我在尝试获取与 lambda 表达式相同的函数中定义的字符串的值时遇到了问题。

这是我在控制台应用程序中尝试做的事情：

```
private static void MyBuilderTest()
{
    var sqlBuilder = new SqlBuilder();

    // Doesn't work -- NEED GUIDANCE HERE
    var testValue = "Test";  // Defined in the same function as the lambda below

    sqlBuilder.Select<FooObject>(o => o.FooValue == testValue);

    // Works
    var someObject = new SomeObject { SomeValue = "classTest };

    sqlBuilder.Select<FooObject>(o => o.FooValue == someObject.SomeValue);
} 
```

在我的构建器中，它是 ExpressionVisitor 的子类，并且我覆盖了 VisitMember。我发现在基本控制台级别定义的字符串将返回为：

```
Node.Expression.NodeType == ExpressionType.Constant 
```

Node.Expression 传回以下属性：

```
CanReduce = false
DebugView = ".Constant<ConsoleApplication1.Program+<>c__DisplayClass1>(ConsoleApplication1.Program+<>c__DisplayClass1)"
NodeType = Constant
Type = System.Type {System.RunetimeType}
Value = {ConsoleApplication1.Program} 
```

Node.Expression.Value 包含：

```
testValue = "Test" (Type: string) 
```

**我如何获得这个值？** 我尝试了几件事，例如：

```
var memberType = node.Expression.Type.DeclaringType; 
```

这会传回一个 ConsoleApplication1.Program 类型。

但是，当我这样做时：

```
 memberType.GetProperty("testValue");   // Declaring Type from Expression 
```

它传回null。

如果我将 lambda“字符串”放在一个类中，上述方法可以正常工作，但如果它们是在控制台函数中定义的字符串，则上述方法不起作用。

如果它是在 lambda 的函数级别定义的，谁能告诉我如何获取字符串值？

**已编辑：添加了 VisitMember**

```
protected override Expression VisitMember(MemberExpression node)
{
    if (node.NodeType == ExpressionType.Constant)
    {
        // Node.Expression is a ConstantExpression type.
        // node.Expression contains properties above
        // And Has Value of:  {ConsoleApplication1.Program}
        // Expanding Value in Watch window shows:  testValue = "Test"

        // How do I get this value, if the ConsoleApplication1.Program type doesn't
        // even know about it?  Looks like maybe a dynamic property?
    }
 } 
```

**已编辑**

向控制台应用程序示例添加了代码，以显示哪些有效，哪些无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T01:16:47.413

您示例中的 lambda 已“关闭”`testValue`变量，这意味着编译器已将其捕获为自动生成的名为`ConsoleApplication1.Program+<>c__DisplayClass1>`. [您可以通过将二进制表达式的右侧转换为MemberExpression](http://msdn.microsoft.com/en-au/library/system.linq.expressions.memberexpression.aspx)来使用正常反射来获取该字段的当前值。

```
var testValue = "hello";
var expr = (Expression<Func<string, bool>>) (x => x == testValue);
var rhs = (MemberExpression) ((BinaryExpression) expr.Body).Right;
var obj = ((ConstantExpression) rhs.Expression).Value;
var field = (FieldInfo) rhs.Member;
var value = field.GetValue(obj);
Debug.Assert(Equals(value, "hello"));
testValue = "changed";
value = field.GetValue(obj);
Debug.Assert(Equals(value, "changed")); 
```

或者，您可以将变量更改为常量。

```
const string testValue = "hello";
var expr = (Expression<Func<string, bool>>) (x => x == testValue);
var value = ((ConstantExpression) ((BinaryExpression) expr.Body).Right).Value;
Debug.Assert(Equals(value, "hello")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T01:20:58.923

与其自己做这件事，不如看看[`PartialEvaluator`Matt Warren](http://blogs.msdn.com/b/mattwar/archive/2007/08/01/linq-building-an-iqueryable-provider-part-iii.aspx)的文章。它将所有对常量的引用替换为常量本身。

# prolog - Prolog中关于交换和传递等价实现的建议

> ID：14269931
> 
> 赞同：1
> 
> 时间：2013-01-11T00:49:06.837
> 
> 标签：prolog, transitive-closure

我想用可交换和传递的属性来模拟 Prolog 中的等价性，这就是我所做的：equal/2 将作为事实提供。

```
symmetricEqual(A,B):- equal(A,B). 
symmetricEqual(A,B):- equal(B,A).

transitiveEqualPath(A,B,_) :- symmetricEqual(A,B).

transitiveEqualPath(B,C,IntermediateNodes) :- 
    symmetricEqual(A,B), 
    \+ member(C,IntermediateNodes), 
    transitiveEqualPath(A,C,[B|IntermediateNodes]), B\==C.

transitiveEqual(A,B) :- transitiveEqualPath(A,B,[]). 
```

但是我在使用上述解决方案时遇到了性能问题，试图计算transitiveEqual/2（大约花了20分钟），我从equal/2计算得非常快，大约有2KsymmetricEqual/2事实，所以它一定是规则的原因对于transitiveEqual/2，任何人都可以提出任何改进建议吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:22:06.697

感谢[这里](http://web.engr.oregonstate.edu/~burnett/CS581/prolog-coolPrograms-flora.ppt)的方法：

```
symmetricEquals(X,Y) :- equal(X,Y). 
symmetricEquals(X,Y) :- equal(Y,X). 

transitiveEqual(A, B) :-
    % look for an equality path from A to B
    path(A, B, _Path). 

path(A, B, Path) :-
    % build a path from A to B
    path(A, B, [A], Path).

path(A, B, _Acc, [B]) :-
    symmetricEquals(A, B).

path(A, B, Visited, [C|Path]) :-
    symmetricEquals(A, C),
    C \== B,
    \+ memberchk(C, Visited), 
    path(C, B, [C|Visited], Path). 
```

请注意，`path/3,4`将回溯以枚举任何地面或变量`A`到之间的所有可能路径`B`。`equal/2`如果您的事实暗示的图表很大，包含许多不连贯的组件，和/或您正在寻找所有组合，这可能会非常昂贵。

# php - PHP Prepared Statements 登录表单

> ID：14269932
> 
> 赞同：1
> 
> 时间：2013-01-11T00:49:15.830
> 
> 标签：php, mysql

我一直在使用准备好的语句在 PHP 中编写登录脚本，但是我无法让它工作，谁能指出为什么这不起作用？

每当我登录时，我得到的只是“声明失败！”。

```
//Start session
session_start();

//Include database connection details
require_once('config.php');

    //Sanitize the POST values
$login = clean($_POST['login']);
$password = clean($_POST['password']);

$query = $dbconn -> prepare("SELECT * FROM members WHERE login=? AND passwd=?");
$query -> bind_param("ss", $login, $password);

if($query->execute() == true) {
    $query -> bind_result($result);
    $query -> fetch();
    if($result){
            $member = mysqli_fetch_assoc($result);
            session_regenerate_id();
            $_SESSION['SESS_MEMBER_ID'] = $member['member_id'];
            $_SESSION['SESS_FIRST_NAME'] = $member['firstname'];
            $_SESSION['SESS_LAST_NAME'] = $member['lastname'];
            $_SESSION['SESS_IS_ADMIN'] = $member['admin'];
            session_write_close();
            echo $_SESSION['SESS_MEMBER_ID'];
            echo $_SESSION['SESS_FIRST_NAME'];
            echo "Test!";
            exit();
    }else{
            echo "Statement failed";
    }
}
/* Close statement */
$query -> close(); 
```

在 config.php 中有以下内容：

```
$dbconn = new mysqli('localhost', 'root', 'password', 'bookingsystem'); 
```

用户的数据库结构如下所示：

```
`members` (`member_id`, `firstname`, `lastname`, `login`, `passwd`, `admin`) VALUES
(1, 'Steve', 'Stone', 'Admin', '5f4dcc3b5aa765d61d8327deb882cf99', 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:59:57.800

从手册开始[`bind_result`](http://php.net/manual/en/mysqli-stmt.bind-result.php)：

> 请注意，必须在 mysqli_stmt_execute() 之后和调用 mysqli_stmt_fetch() 之前绑定所有列。

您正在绑定一个变量，但您正在选择 6 列。您需要将所有 6 列绑定到一个变量，然后在条件内，您不必获取另一行，因为您已经这样做了，并且您的获取结果将在您的变量中可用。

您还应该检查`fetch`、 not`$result`或任何其他变量的返回值。

# windows - 循环 autoit 脚本直到文档结束

> ID：14269933
> 
> 赞同：0
> 
> 时间：2013-01-11T00:49:24.123
> 
> 标签：windows, autoit

我有一个 autoit 脚本，它基本上复制第一行文本，然后将其再次粘贴到同一行中。我想一遍又一遍地这样做，直到文档结束。有什么建议么？

```
Run("notepad.exe filename.txt")
WinWaitActive("Untitled - Notepad")
Send("+{END}")
Send("^C")
Sleep (1000)
Send("{END}")
Sleep (1000)
Send(" ")
Send("^V")
Send("{HOME}")
Send("{DOWN}") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:57:19.073

您可以使用以下代码：

```
$filename = "filename.txt"

Run("notepad.exe " & $filename)
WinWaitActive($filename & " - Notepad")

$lines= StringRegExp(FileRead($filename), @CR, 3)
$count = UBound($lines)

For $i = 0 To $count
    Send("+{END}")
    Send("^C")
    Sleep (1000)
    Send("{END}")
    Sleep (1000)
    Send(" ")
    Send("^V")
    Send("{HOME}")
    Send("{DOWN}")
Next 
```

您必须等待标题中包含文件名的窗口。如果文件名内部有空格，则需要在 notepad.exe 后面的参数两边加上引号。

不知何故，您需要获取行号的计数。我只是用 AutoIt 阅读了整个文件并搜索“回车”。结果数组具有行号的大小。然后在 For-...-To-...-Loop 中使用该数字。

您可以将睡眠时间减少到 100 毫秒。而且使用 FileReadLine 和可能的 FileWriteLine 来完成您的任务会容易得多，因为 FileReadLine 可以一直使用到文件末尾。它将@error 设置为-1。有关更多信息，请参阅[文档](http://www.autoitscript.com/autoit3/docs/functions/FileReadLine.htm)。

# java - 为目标“destinationName”实例化类型为“className”的应用程序范围实例时出错

> ID：14269938
> 
> 赞同：1
> 
> 时间：2013-01-11T00:50:15.340
> 
> 标签：java, apache-flex

我收到了 StackOverflow 错误，所以我想在 stackoverflow 中询问。

```
Send failed
Channel.Connect.Failed error NetConnection.Call.Failed: HTTP: Status 500: url: 'http://localhost:8080/context/messagebroker/amf' 
```

当你输入 messagebroker servlet url 时，这会出现：

```
HTTP 500 - 

javax.servlet.ServletException: java.lang.RuntimeException: Error instantiating application scoped instance of type ''className' for destination destinationName.
    flex.messaging.MessageBrokerServlet.init(MessageBrokerServlet.java:188)
    org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    java.lang.Thread.run(Thread.java:619)

flex.messaging.config.ConfigurationException: Error instantiating application scoped instance of type 'classNamefor destination 'destinationName'.
    flex.messaging.factories.JavaFactory.createFactoryInstance(JavaFactory.java:143)
    flex.messaging.FactoryDestination.createFactoryInstance(FactoryDestination.java:256)
    flex.messaging.FactoryDestination.getFactoryInstance(FactoryDestination.java:239)
    flex.messaging.FactoryDestination.getFactoryInstance(FactoryDestination.java:227)
    flex.messaging.services.remoting.adapters.JavaAdapter.validateInstanceSettings(JavaAdapter.java:556)
    flex.messaging.services.remoting.adapters.JavaAdapter.start(JavaAdapter.java:355)
    flex.messaging.Destination.start(Destination.java:281)
    flex.messaging.services.AbstractService.startDestinations(AbstractService.java:735)
    flex.messaging.services.AbstractService.start(AbstractService.java:176)
    flex.messaging.MessageBroker.startServices(MessageBroker.java:2217)
    flex.messaging.MessageBroker.start(MessageBroker.java:352)
    flex.messaging.AsyncMessageBroker.start(AsyncMessageBroker.java:608)
    flex.messaging.MessageBrokerServlet.init(MessageBrokerServlet.java:153)
    org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    java.lang.Thread.run(Thread.java:619)

java.lang.StackOverflowError
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12)
    className.<init>(className.java:12) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:55:50.747

但是当我输入这个问题时，我发现它是什么......我在应用程序范围类上声明的全局对象上有一个循环引用。这是一个无意的复制粘贴......所以当`messagebroker/amf`它启动时，它卡在循环引用上，一遍又一遍地实例化同一个对象。如果其他人遇到此错误，我将离开该帖子，因为谷歌并没有太大帮助。

# html - 两行表格，一行仅用于标题 - HTML

> ID：14269941
> 
> 赞同：0
> 
> 时间：2013-01-11T00:51:08.917
> 
> 标签：html, html-table, rows

我正在尝试在 html 中创建一个包含两行多列的表格。我希望第一行只有一个空格，而不是每列两个空格。这将是整个表格的标题空间。

示例：（规格是标题）

```
[Specifications]
[Power         ][200 Lumens                       ]
[Lamp          ][4 Ultrabright LEDs, Maxbright LED]
[Burn Time     ][150 Hours                        ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T00:56:37.867

### 利用`colspan="2"`

```
<table border="1">
    <tr>
    <th colspan="2">Specifictaions</th>
    </tr>
    <tr>
        <td>Power</td>
        <td>200 Lumens</td>
    </tr>
    <tr>
        <td>Lamp</td>
        <td>4 Ultrabright LEDs, Maxbright LED</td>
    </tr>
    <tr>
        <td>Burn Time</td>
        <td>150 Hours</td>
    </tr>
</table> 
```

### 小提琴：http: [//jsfiddle.net/tCvBn/](http://jsfiddle.net/tCvBn/)

### 截屏

![](../Images/8384531743e0e1b0cbb0c18d75f83a67.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T00:55:12.410

我相信这就是你要找的！这是一个[演示](http://jsfiddle.net/NuQ2D/1/)

```
<table width="100" border="1">
    <tr>
        <th colspan="2">Foo</th>
  </tr>
  <tr>
    <td>Foo</td>
    <td>Bar</td>
  </tr>
  <tr>
    <td>Foo</td>
    <td>Bar</td>
  </tr>
  <tr>
    <td>Foo</td>
    <td>Bar</td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T02:33:00.727

如果表格只有一个部分（*即*：所有表格内容都是规范），我可能会使用一个`caption`元素来标记它：

```
<table>
  <caption>Specifications</caption>
  <tr>
    <th scope="row">Power</th>
    <td>200 Lumens</td>
  </tr>
  <tr>
    <th scope="row">Lamp</th>
    <td>4 Ultrabright LEDs, Maxbright LED</td>
  </tr>
  <tr>
    <th scope="row">Burn Time</th>
    <td>150 Hours</td>
  </tr>
</table> 
```

如果有多个部分，我会使用跨越（`<th scope="col" colspan="2">...`表头：

```
<table>
  <tr>
    <th scope="col" colspan="2">Specifications</th>
  </tr>
  <tr>
    <th scope="row">Power</th>
    <td>200 Lumens</td>
  </tr>
  <tr>
    <th scope="row">Lamp</th>
    <td>4 Ultrabright LEDs, Maxbright LED</td>
  </tr>
  <tr>
    <th scope="row">Burn Time</th>
    <td>150 Hours</td>
  </tr>
  <tr>
    <th scope="col" colspan="2">Some Other Section</th>
  </tr>
  <tr>
    <th scope="row">Foo</th>
    <td>Bar</td>
  </tr>
  <tr>
    <th scope="row">Baz</th>
    <td>Qux</td>
  </tr>
</table> 
```

[小提琴](http://jsfiddle.net/zggcp/)

# sql - ColdFusion cfscript 查询 LIKE 语句中的通配符“%”？

> ID：14269948
> 
> 赞同：4
> 
> 时间：2013-01-11T00:51:28.940
> 
> 标签：sql, sql-server, sql-server-2008, coldfusion

是否可以在 ColdFusion cfscript 查询中的 SQL LIKE 语句中使用通配符？

一个不起作用的例子：

```
local.q = new Query(); 
local.q.setDatasource(variables.dsn);
local.q.addParam(name='lastname', value='%' & arguments.lastname,     cfsqltype="cf_sql_varchar");
local.qString = 'SELECT name FROM users WHERE lastname LIKE :lastname';
local.q.setSQL(local.qString);
local.result = local.q.execute().getResult(); 
```

我也尝试了这些，但没有奏效：

```
local.qString = 'SELECT name FROM users WHERE lastname LIKE %:lastname';
local.qString = "SELECT name FROM users WHERE lastname LIKE '%:lastname'"; 
```

**更新：**

我正在使用 MS SQL Server 2008。

该查询在 SQL Server Mgmt Studio 中运行良好...我认为这与如何在 cfscript 标记中格式化查询有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-29T14:39:23.897

对的，这是可能的。您将其设置在参数中，这是正确的。我不知道为什么它不适合你。

我做了以下，它的工作。

```
var qryArgsCol = {};            
qryArgsCol.datasource = variables.datasource;
qryArgsCol.SQL = "                      
                SELECT ID
                FROM Users
                WHERE LastName LIKE :searchStringParam
                ";
var qryGetID = new query(argumentCollection=qryArgsCol);
qryGetID.addParam(name="searchStringParam", value="%" & searchString, cfsqltype="cf_sql_varchar");
qryGetIDResult = qryGetID.execute().getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T18:50:44.423

像这样使用。

```
 local.q = new Query(); 
        local.q.setDatasource(variables.dsn);

        local.q.addParam(name="lastname", cfsqltype="cf_sql_varchar",value='%ARGUMENTS.lastname' );
        local.qString = 'SELECT name FROM users WHERE lastname LIKE :lastname';
        local.q.setSQL(local.qString);
        local.result = local.q.execute().getResult(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:47:28.740

Just remember that you ultimately need to see what CF gives the DB server. In this instance, you can try this mockup to get close and find the same error in SSMS by messing with the quotes/value in the param declaration:

```
 declare @param1 varchar(max) = '%Eisenlohr';

 SELECT name FROM users WHERE lastname LIKE @param1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:30:37.320

亚当·卡梅隆（Adam Cameron）在这里做出了回应，显然是被一个过分热心的模组删除了。

我没有重复他所说的，而是复制并粘贴（重点添加到关键部分）：

* * *

只是为了澄清**您在第一个示例中尝试的语法*确实*有效**。这是正确的方法。澄清/解释：

您拥有的`<cfquery>`示例版本将类似于：

```
<cfqueryparam value="%foo"> 
```

所以在函数版本中，参数将是`?`or`:paramName`并且参数的值将继续是`"%foo"`.

这`%`是参数值的一部分，而不是 SQL 字符串。

因此，鉴于对您“不起作用”，**如果您发布错误或任何导致您认为它不起作用的错误**（您的期望是什么，以及实际结果是什么），这将有所帮助。然后我们可以处理您的问题的实际原因，我认为这不是您认为的那样。

查询是否可以正常工作`<cfquery>`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T17:30:14.873

我建议使用`CFQuery`标签而不是尝试在`CFScript`. 除非你真的知道你在做什么。我这样说是因为`CFQuery`标签有一些内置功能，不仅可以让您更轻松地构建查询，还可以保护您免受不可预见的攻击（SQL 注入类型）。例如，当使用`CFQuery`它时，它会自动为您转义单引号，这样插入之类的东西`'well isn't that a mess'`就不会对您造成影响。您还可以使用`CFQueryParam`标签进一步对抗 SQL 注入攻击。虽然您可能能够使用其中的`CFQueryParam`功能，`CFScript`但它并不那么简单（至少对我来说不是）。

[请参阅 Ben Nadel 的这篇博客文章，讨论其中的一些内容。](http://www.bennadel.com/blog/1680-Learning-ColdFusion-9-Using-CFQuery-In-CFScript-Can-Enable-SQL-Injection-Attacks.htm)

因此，在`CFQuery`标签中，您的查询看起来像这样：

```
<cfquery name="myQuery" datasource="#variables.dsn#">
    SELECT name
    FROM users
    WHERE lastname LIKE <cfqueryparam cfsqltype="cf_sql_varchar" value="%:#arguments.lastname#" maxlength="256" />
</cfquery> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-17T23:01:48.220

我刚刚遇到了与原始海报“不起作用”相同的问题，并且我没有从查询查询中得到任何结果。我的问题是通配符搜索区分大小写。

```
 local.q = new Query();  
 local.q.setDatasource(variables.dsn);
 local.q.addParam(name='lastname', value='%' & LCase(arguments.lastname), cfsqltype="cf_sql_varchar"); 
 local.qString = 'SELECT name FROM users WHERE LOWER(lastname) LIKE :lastname'; 
 local.q.setSQL(local.qString); 
 local.result = local.q.execute().getResult(); 
```

所以我所做的是确保传入的参数是小写的，并确保 SQL 中的比较字段也是小写的并且它工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-12T02:24:42.740

根据使用的 dbms，在运行 sql 语句时可能会解释单引号和双引号。你用的是什么dbms？您的语句现在不选择变量中的值，而是选择姓氏为“lastname”的任何用户。它应该是这样的：

```
 lastname like '%#lastname#' 
```

# ruby-on-rails - 如何使用已经存在的 Heroku 应用程序

> ID：14269954
> 
> 赞同：3
> 
> 时间：2013-01-11T00:51:55.257
> 
> 标签：ruby-on-rails

请帮助我，当我想将 Rails 应用程序上传到 heroku 时，我会执行此序列并在 heroku 上创建一个新项目

```
git init
git add .
git commit -m "init" 
heroku create
git push heroku master 
```

然后每次我需要部署一个项目时，我都会得到一个新的 URL，比如[http://-somethingdiferent-.herokuapp.com](http://-somethingdiferent-.herokuapp.com)

我不知道以后如何在不创建其他新heroku项目的情况下使用该项目我正在考虑使用诸如git拉动之类的东西，但我不知道heroku的拉动如何，也许-git pull heroku master？但在那种情况下，我怎样才能拉同一个项目？

如果您知道顺序或任何教程，我会喜欢吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T01:04:33.927

尝试先创建一个应用程序

```
# run this command from the app folder to create a new app
$ heroku open --app the-app-name

# Add it to the remote
$ heroku git:remote -a the-app-name

# push app to heroku
$ git push heroku master 
```

`the-app-name`应替换为应用程序名称。

可以[在这里](https://github.com/jonibatista/ballin-brain/wiki/Heroku)找到更多有用的东西。

# php - htaccess 通过 index.php 路由而不允许 www

> ID：14269955
> 
> 赞同：0
> 
> 时间：2013-01-11T00:51:57.473
> 
> 标签：php, .htaccess, url-routing

我通过 GoDaddy 有一个共享主机帐户，我在上面的网站使用 .htaccess 通过 index.php 路由所有请求。这本身就可以正常工作。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php [L,QSA] 
```

然后我想将其限制为使用非 www url，所以我在它之前添加了以下内容：

```
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301] 
```

所以总的来说是：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php [L,QSA] 
```

但是，这两者一起不起作用。该 URL 尝试重定向到 /missing.html 以获取应路由的 URL。分开这两个都很好。有没有办法让这两件事一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T01:42:15.307

你应该删除第一个`L`标签如果你想让它们一起工作。因为`L`意味着**如果规则匹配，则不会处理进一步的规则**

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [R=301]   //remove L from this line

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php [L,QSA] 
```

# video - ffmpeg 完成转码后是否重写标头？

> ID：14269958
> 
> 赞同：2
> 
> 时间：2013-01-11T00:52:09.870
> 
> 标签：video, ffmpeg, transcoding

我们的客户端发送一个从服务器下载电影文件的请求。当服务器接收到请求时，它将启动一个 ffmpeg 进程来对电影进行转码。ffmpeg 的输出暂时保存到硬盘。我们不想让客户端在转码完成后等待下载文件，所以我们发送输出数据作为其生成。

问题是ffmpeg在完成转码后似乎重写了输出文件头，所以下载的文件（在客户端）没有正确的文件头，播放器无法播放。

我的问题是有什么方法可以让 ffmpeg 不重写标题？这应该是什么解决方案？

编辑：命令是在 mp4 容器中转码为 H264/AAC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:26:01.210

Yes`ffmpeg`返回文件的开头并更新结构以指示仅在文件完成时可用的有效大小。

为了能够“直播”流式传输，您应该考虑使用另一种方法（例如使用 RTSP 协议）传递有效负载视频/音频。不完整的 MP4 文件在完全完成之前无法很好地播放。

# jquery - 我希望能够在窗口小于 900 像素时删除 div 元素。我怎么做？

> ID：14269964
> 
> 赞同：0
> 
> 时间：2013-01-11T00:53:29.647
> 
> 标签：jquery, html

这是我到目前为止的代码：http: [//pastebin.com/X8WpUMy5](http://pastebin.com/X8WpUMy5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:57:35.890

您可以简单地使用 CSS 媒体查询：

```
@media all and (max-width: 900px) {
#sidebar {display:none;}
} 
```

# ios - IO 的报告查看器工具？

> ID：14269965
> 
> 赞同：1
> 
> 时间：2013-01-11T00:53:50.727
> 
> 标签：ios, ipad, printing, report, viewer

我正在尝试打印包含来自 IO 应用程序的数据的表格，我已经成功测试了 phonegap 打印机插件（https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/PrintPlugin/READEME.md）但是当我尝试打印几页时遇到了一些问题。有人知道 IO 是否有像 Crystal 或 iReport 这样的报表查看器？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T12:34:14.073

您看过 Report Runner Web Portal 吗？它可以在任何设备上运行 Crystal Reports，并且在移动设备上看起来很棒。看到它@http [://reportrunner.com](http://reportrunner.com)

# c# - 在 C# 中使用 Neo4jClient 在 Neo4j 中创建节点之间的关系

> ID：14269967
> 
> 赞同：5
> 
> 时间：2013-01-11T00:53:55.750
> 
> 标签：c#, asp.net, neo4j, neo4jclient

我正在使用 .Net Neo4jClient ( [http://hg.readify.net/neo4jclient/wiki/Home](http://hg.readify.net/neo4jclient/wiki/Home) ) 使用 Neo4j。在我的代码中，节点是机场，关系是航班。

如果我想同时创建节点和关系，可以使用以下代码：

**课程**

```
public class Airport
{
    public string iata { get; set; }
    public string name { get; set; }
}

public class flys_toRelationship : Relationship, IRelationshipAllowingSourceNode<Airport>, IRelationshipAllowingTargetNode<Airport>
{
    public static readonly string TypeKey = "flys_to";

    // Assign Flight Properties
    public string flightNumber { get; set; }

    public flys_toRelationship(NodeReference targetNode)
        : base(targetNode)
    { }

    public override string RelationshipTypeKey
    {
        get { return TypeKey; }
    }
} 
```

**主要的**

```
// Create a New Graph Object
var client = new GraphClient(new Uri("http://localhost:7474/db/data"));
client.Connect();

// Create New Nodes
var lax = client.Create(new Airport() { iata = "lax", name = "Los Angeles International Airport" });
var jfk = client.Create(new Airport() { iata = "jfk", name = "John F. Kennedy International Airport" });
var sfo = client.Create(new Airport() { iata = "sfo", name = "San Francisco International Airport" });

// Create New Relationships
client.CreateRelationship(lax, new flys_toRelationship(jfk) { flightNumber = "1" });
client.CreateRelationship(lax, new flys_toRelationship(sfo) { flightNumber = "2" });
client.CreateRelationship(sfo, new flys_toRelationship(jfk) { flightNumber = "3" }); 
```

然而，问题是当我想向已经存在的节点添加关系时。假设我有一个仅包含两个节点（机场）的图表，例如 SNA 和 EWR，我想添加从 SNA 到 EWR 的关系（航班）。我尝试以下操作，但失败了：

```
// Create a New Graph Object
var client = new GraphClient(new Uri("http://localhost:7474/db/data"));
client.Connect();

Node<Airport> departure = client.QueryIndex<Airport>("node_auto_index", IndexFor.Node, "iata:sna").First();
Node<Airport> arrival = client.QueryIndex<Airport>("node_auto_index", IndexFor.Node, "iata:ewr").First();
//Response.Write(departure.Data.iata); <-- this works fine, btw: it prints "sna"

// Create New Relationships
client.CreateRelationship(departure, new flys_toRelationship(arrival) { flightNumber = "4" }); 
```

我收到的两个错误如下：

1) 参数 1：无法从 'Neo4jClient.Node' 转换为 'Neo4jClient.NodeReference'

2) 无法从用法中推断方法“Neo4jClient.GraphClient.CreateRelationship(Neo4jClient.NodeReference, TRelationship)”的类型参数。尝试明确指定类型参数。

错误所指的方法在以下类中：[http ://hg.readify.net/neo4jclient/src/2c5446c17a65d6e5accd420a2dff0089799cbe16/Neo4jClient/GraphClient.cs?at=default](http://hg.readify.net/neo4jclient/src/2c5446c17a65d6e5accd420a2dff0089799cbe16/Neo4jClient/GraphClient.cs?at=default)

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T09:53:59.333

在您的`CreateRelationship`通话中，您将需要使用节点引用，而不是节点，因此：

```
client.CreateRelationship(departure.Reference, new flys_toRelationship(arrival.Reference) { flightNumber = "4" }); 
```

您的初始创建代码有效而无效的原因是因为`Create`返回了一个`NodeReference<Airport>`（`var`为您隐藏了它），而是`QueryIndex`返回了一个`Node<Airport>`实例。

Neo4jClient`NodeReference`的大部分操作主要使用 's。

您遇到的第二个错误与不使用该`.Reference`属性有关，因为它无法确定类型，当您使用该`.Reference`属性时，该错误也会消失。

# objective-c - loadNibNamed - 无法在包中加载 NIB：NSBundle

> ID：14269970
> 
> 赞同：2
> 
> 时间：2013-01-11T00:54:03.113
> 
> 标签：objective-c, drop-down-menu, uitableview, xcode4.3

我正在尝试使用 XIB 文件创建 TableViewCell，但在执行时出现此错误：

> 2013-01-10 17:54:50.297 MainApp [6778:b603] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“DropDownCell”
> ***第一次抛出调用堆栈：

这就是我想要做的。
我有一个项目，第一个菜单。在这个项目/工作区中，我有我的第一个菜单的类。在这个项目中，我有另一个工作区，其中包含我的第二个菜单的类。我的意思是，这个工作区是为我的第一个菜单中选择的选项的 SubViewController 和类。在这个工作区中，我正在尝试使用来自苹果的演示创建一个 DropDownMenu，但我的应用程序崩溃了。此演示使用 XIB 文件在表格中创建单元格。
这是 DropDownCell 类：
**DropDownCell.h**

```
#import <UIKit/UIKit.h>

@interface DropDownCell : UITableViewCell{
  IBOutlet UILabel *textLabel;
  IBOutlet UIImageView *arrow_up;
  IBOutlet UIImageView *arrow_down;

  BOOL isOpen;
}

-(void)setOpen;
-(void)setClosed;

@property (nonatomic)BOOL isOpen;
@property (nonatomic,retain) IBOutlet UILabel *textLabel;
@property (nonatomic,retain) IBOutlet UIImageView *arrow_up;
@property (nonatomic,retain) IBOutlet UIImageView *arrow_down;

@end 
```

**DropDownCell.m** #import "DropDownCell.h"

```
@implementation DropDownCell

@synthesize textLabel, arrow_up, arrow_down, isOpen;

-(void)setOpen{
   [arrow_down setHidden:YES];
   [arrow_up setHidden:NO];
   [self setIsOpen:YES];
}

-(void)setClosed{
   [arrow_down setHidden:NO];
   [arrow_up setHidden:YES];
   [self setIsOpen:NO];
}

-(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{
   self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
   if(self){

   }
   return self;
}

-(void)setSelected:(BOOL)selected animated:(BOOL)animated{
   [super setSelected:selected animated:animated];
}

-(void)dealloc{
   [super dealloc];
}

@end 
```

**DropDownCell.xib**有一个带有 UILabel 的 UITableViewCell 。
我有另一个 UITableViewController，它使用 DropDownCell XIB。这是方法：

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

  static NSString *CellIdentifier = @"MenuCell";
  static NSString *DropDownCellIdentifier = @"DropDownCell";

  if([indexPath row] == 0){
      DropDownCell *cell = (DropDownCell*)[tableView dequeueReusableCellWithIdentifier:DropDownCellIdentifier];

      if(cell == nil){
          NSArray *topLevelObjects = [[NSBundle mainBundle]loadNibNamed:@"DropDownCell" owner:self options:nil];

          for(id currentObject in topLevelObjects){
            if([currentObject isKindOfClass:[DropDownCell class]]){
                cell = (DropDownCell*)currentObject;
                break;
            }
          }
      }

      [[cell textLabel] setText:@"Option 1"];

      return cell;

} 
```

但是加载NIB文件时我的应用程序崩溃了......可能是什么原因？我使用的是 Xcode 4.3，我没有使用故事板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T14:40:08.133

@ user1600801，可能有以下原因之一：-

1）在该自定义单元格的文件检查器中禁用/取消选中“使用自动布局”。

2）您的目标没有为该自定义单元设置。

> > 要设置它，请选择您的自定义单元格 .Xib 文件，
> > 
> > 选择 "文件检查器",
> > 
> > 在“目标会员”下检查您的项目名称是否被选中？如果没有，则检查/启用它。

3) 检查您的自定义单元类名称和单元标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T00:02:27.210

尝试删除 nib 文件的引用并清理项目。然后将 nib 文件添加回项目并构建。这解决了我的项目中发生的相同异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T01:01:06.197

您是否为该笔尖启用了自动布局，并且正在编译

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T01:19:36.343

问题是您甚至没有加载捆绑包。看到这个问题：

[NSInternalInconsistencyException'，原因：'无法在包中加载 NIB：'NSBundle](https://stackoverflow.com/questions/12722461/nsinternalinconsistencyexception-reason-could-not-load-nib-in-bundle-nsbun)

似乎您可以通过从项目中删除文件并再次放在那里来解决它。

# php - 链接字符串的每个单词而不链接

> ID：14269971
> 
> 赞同：1
> 
> 时间：2013-01-11T00:54:07.253
> 
> 标签：php, string

我正在使用 PHP 脚本来链接字符串的每个单词：

```
<?
$str = "hello<br> guys good man";
$arr = explode(' ', $str);
foreach($arr as $value){
    echo '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q='.$value.'">'.$value.'</a>';
}
?> 
```

如何在`$str`不链接`<br>`s 的情况下链接字符串的每个单词？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T22:03:43.137

你可以使用`preg_replace`

```
// More complext string
$str = "hello<br> guys good man <a href=\"http://google.com\">Google</a> <br /> hurry";

// Url Template
$template = '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=%1$s">%1$s</a>';

// Replace Words
echo preg_replace("/(?!(?:[^<]+>|[^>]+<\/a>))\b([a-z]+)\b/is", sprintf($template, "\\1"), $str); 
```

输出

```
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=hello">hello</a>
<br>
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=guys">guys</a>
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=good">good</a>
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=man">man</a>
<a href="http://google.com">Google</a>
<br />
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=hurry">hurry</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T00:57:45.397

在您的爆炸之前/中使用 strip_tags() 函数：

```
$arr = explode (' ', strip_tags($str)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T01:06:13.100

未经测试，但从 JvO 的代码开始并将链接放回原始字符串：

```
$str = "hello<br> guys good man";
$arr = explode (' ', strip_tags($str));
foreach($arr as $value) {
    $link = '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q='.$value.'">'.$value.'</a>';
    $str = str_replace($value, $link, $str);
}
echo $str; 
```

请注意，您可以通过从 $arr 中删除重复项来节省时间。

编辑：事实上，您*必须*从 $arr 中删除重复项，否则事情会变得很难看：

```
$arr = array_unique(explode (' ', strip_tags($str))); 
```

...以及对原始代码的另一次编辑以获取错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T02:14:06.547

为什么不像现在一样分解字符串并简单地去除 URL 中的标签。

```
$str = "hello<br> guys good man";
$arr = explode(' ', $str);
foreach($arr as $value){
    echo '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q='.strip_tags($value).'">'.$value.'</a>';
} 
```

这将输出以下 HTML，这是我相信您想要的。

```
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=hello">hello<br></a>
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=guys">guys</a>
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=good">good</a>
<a href="http://www.dumbsearch.com/now/searchcompleted.php?q=man">man</a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T01:03:43.673

不确定您在 Jvo 回答的评论中所说的内容，但您也可以始终在 foreach 中使用 striptags，并且只剥离链接部分。

```
foreach($arr as $value){
    echo '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q='.strip_tags($value).'">'.$value.'</a>';
} 
```

所以这里是完整的代码：

```
<?
$str = "hello<br> guys good man";
$arr = explode(' ', $str);
foreach($arr as $value){
    echo '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q='.strip_tags($value).'">'.$value.'</a>';
}
?> 
```

您确实应该考虑`explode(' ', $str)`将要做什么。

任何时候任何 HTML 标记都有它的属性，就像`<span style="color: red;">`你会遇到麻烦一样。您应该`strip_tags` *首先*在整个字符串上，*然后*对其进行处理。如果您以后需要添加内容，请将 HTML 版本保留为单独的字符串。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T00:59:01.857

在形成链接之前，首先处理字符串：

```
$proc_val = preg_replace('/<br>/', '', $value);
echo '<a href="http://foo.php?q='.$proc_val.'">'.$value.'</a>'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-20T13:06:54.070

如果字符串很长，并且可以包含任意数量的标签，包括`<p>`和`<h1>`以及`<br>`更正确的标签`<br/>`，您可以考虑解析该批次，并使用`str_replace`：

```
$string = 'Foo<br/>Hello Bar!';
$DOM = new DOMDocument;
//make sure all breaks are preceded by a space, if not words might be concatenated by accident
$DOM->loadHTML(str_replace('<br', ' <br', $string));
//get all nodes
$nodes = $DOM->getElementsByTagName('*');
//get the text, split it and replace, but keep track of replaced words
$replaced = array();
for ($i = 0, $j = $nodes->length; $i<$j;$i++)
{
    $words = explode(' ',$nodes->item($i)->nodeValue);
    while($word = array_shift($words))
    {
        if (!array_key_exists($word, $replaced))
        {//avoid replacing twice (and thus creating a link within a link)
             $replaced[$word] = true;
             $string = str_replace($word, '<a href="http://www.dumbsearch.com/now/searchcompleted.php?q='.urlencode($word).'">'.$word.'</a>', $string);
        }
    }
} 
```

此代码经过测试并且可以正常工作。

# oracle - 在 Windows 8 上使用 MSDAORA 让 BIDS 2008 R2 连接到 Oracle

> ID：14269974
> 
> 赞同：0
> 
> 时间：2013-01-11T00:54:32.650
> 
> 标签：oracle, windows-8, ssis, bids, odac

我有一台新的开发机器，我需要支持旧的 SSIS 包。新机器是 Windows 8 64 位，带有 SSD 主驱动器 (C:) 和用于数据的常规 HDD (D:)。在它上面，我安装了 BIDS 2008 R2（以及使它与 TFS2010 一起工作的所有技巧），以及 VS2010、ODAC 32 位和 64 位（我认为？？）、Oracle 客户端（SQLDeveloper）。

我可以获得以下内容以很好地连接到 Oracle 数据库：

*   VS2010 与 MSDAORA
*   VS2010 带 ODAC
*   VS2010 与 ADO.NET
*   使用带有 Oracle OLE DB 提供程序的 .udl 文件测试连接（MS 提供程序未在此处显示为选项）
*   SQLDeveloper（Oracle 的客户端工具）

我似乎无法使用任何方法（MSDAORA、ADO.NET、ODAC）让 BIDS 2008 R2 连接到 Oracle。

这个问题似乎与我的机器无关，否则我可以在其他机器上打开、查看、验证、连接和运行这些包而没有问题。

我尝试了以下方法：

*   确保任何/所有 TNSNAMES 文件正确且相同（从其他机器获取工作副本，别忘了，这在 VS2010 中工作正常）
*   创建 ORACLE_HOME 和 TNS_ADMIN 环境变量并将它们指向 D:\app\username\product\11.2.0 中的各个目录
*   手动检查注册表以确保除了 HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE 中的条目之外没有其他对 ORACLE 的引用
*   未安装/重新安装的 SQL Server 2008 R2 组件
*   在我尝试过的每次搜索中，每个线程中提供的每个“解决方案”
*   向异教神灵投掷鸡骨头并献祭

每次尝试修复后，尝试在数据流中预览 SQL 命令时仍然出现以下错误：

*OLE DB 记录可用。来源：“Microsoft OLE DB Provider for Oracle”Hresult：0x80004005 描述：“尝试检索错误 ORA-01019 的文本时出错”*

是的，我知道我需要放弃 MSDAORA 以支持 ODAC，如果 ODAC 在 BIDS 2008 R2 中工作，我当然会这样做。但是，我在那里无法连接到 Oracle（尽管如上所述，它在各种其他工具中连接良好）

我在 D:\app\username\product\11.2.0 中有两个“client_n”目录*。*如前所述，我尝试将环境变量指向内部的各种路径。ORACLE_HOME 的正确路径似乎应该只是 D:\app\username\product\11.2.0，对吗？

有没有人在安装了 VS2010 的 WINDOWS 8 上让 BIDS 2008 R2 连接到 Oracle？在我看来，这是一个简单的 Oracle 连接问题，我只是对 Oracle 了解不足，无法进行故障排除。

还有其他想法可以尝试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:29:06.307

BIDS 是 x32（即使在 x64 机器上），因此您需要安装 Oracle Client x32 版本，完全安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T15:40:43.993

我们能够让它工作，尽管我相信我们安装了太多软件。（我无法仅使用 ODAC 驱动程序对其进行测试。）

1.  安装 Oracle 客户端 32 和 64 位驱动程序。
2.  安装 Oracle ODAC 32 和 64 位驱动程序。
3.  在 BIDS 中使用本机 Oracle 连接，而不是 Microsoft 驱动程序。

# android - Android OnInfoWindowClickListener() 从未调用过

> ID：14269975
> 
> 赞同：7
> 
> 时间：2013-01-11T00:54:42.897
> 
> 标签：android, google-maps, callback, google-maps-markers, eventtrigger

我正在使用新的 Google Maps API V2 创建一个应用程序，我必须拦截对 InfoWindow 的点击，当点击标记时显示。

阅读[文档](https://developers.google.com/maps/documentation/android/marker#info_window_click_events)时，我假设我这样做是为了听 InfoWindows 的点击：

```
 mGoogleMap.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {

        @Override
        public void onInfoWindowClick(Marker marker) {

            Log.d("", marker.getTitle());   
        }
    }); 
```

但不幸的是，该方法从未被调用。

如果我尝试收听标记点击并使用 setOnMarkerClickListener 而不是 OnInfoWindowClickListener ，这可以正常工作。

希望能得到一些帮助，在此先感谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T12:19:51.517

当您实际单击标记标题弹出窗口而不是标记时，将调用 OnInfoWindowClickListener。

以上只是工作正常。

# javascript - 如何在 XML 文件的另一个标签中选择一个标签中的内容？

> ID：14269984
> 
> 赞同：0
> 
> 时间：2013-01-11T00:56:10.647
> 
> 标签：javascript, jquery, xml, json

**page**是一个对象：

```
page= new function(img_data_url, src, pos_x, pos_y)
{
    this.ImgDataURL= img_data_url;
    this.src= src; 
    this.pos_x= pos_x;
    this.pos_y= pos_y;
} 
```

我创建了一种`XML`格式来记录它的细节。在一个编辑的页面中，有几个“邮票”，我有几个“页面”。

```
 <Page pid= "0">
<ImgDataURL>asjdfklsadsadfasdf</ImgDataURL>
<Stamp> 
    <src src="../pic/XXX">
    <pos_x>123</pos_x>
    <pos_y>123</pos_y>
    </src>

    <src src="../pic/XXO">
    <pos_x>456</pos_x>
    <pos_y>123</pos_y>
    </src>      
</Stamp>    
</Page>
<Page pid= "1">
<ImgDataURL>asjdfklsadsadfasdf</ImgDataURL>
<Stamp> 
    <src src="../pic/XXX">
    <pos_x>123</pos_x>
    <pos_y>123</pos_y>
    </src>

    <src src="../pic/XXO">
    <pos_x>456</pos_x>
    <pos_y>123</pos_y>
    </src>      
</Stamp>    
</Page>
<Page pid= "2">
<ImgDataURL>asdfsdfasd</ImgDataURL>
<Stamp> 
    <src src="../pic/XXX">
    <pos_x>123</pos_x>
    <pos_y>123</pos_y>
    </src>

    <src src="../pic/XXO">
    <pos_x>456</pos_x>
    <pos_y>123</pos_y>
    </src>      
</Stamp>    
</Page> 
```

我想检索文件中的信息：`ImgDataURL`, `src of Stamp`, `pos_x of Stamp`, ，将它们分配回对象。 但是在第一步中，我不知道如何使用jQuery通过属性选择**页面**：“pid”。 第二，如何才能获取Stamp标签内的所有内容：，等等...... 最后：毕竟我的目的是将信息存储在文件中并将它们恢复到内存中。我希望操作可以尽可能简单。`pos_y of Stamp``XML`

 **`(Or should I have better alternative approaches instead of giving it an id?)`

`src``position`

`Any well-designed alternative XML structure is acceptable.`** 

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:31:03.703

您将 json 对象保存在 .json 文件中（如果您在服务器上使用 php，则可以使用 json_encode）

```
pages = {
 '0' : {

      'ImgDataURL' : 'whatever'
      ,Stamp       : {
            src : 'whatefcz'
            ,pos_x : 'cdscsdc'
              }

     },

    '1' : {

     'ImgDataURL' : 'whatever'
      ,Stamp       : {
            src : 'whatefcz'
            ,pos_x : 'cdscsdc'
              }

    },

    ...

  } 
```

你可以直接在你的javascript中访问它

```
pages['0'].Stamp.src 
```

您可以通过在脚本之前将其包含在脚本标记中或在 jquery 加载后使用 getJSON 调用服务器来加载它**

# perl - Perl / Unix 从网站下载 pdf

> ID：14269988
> 
> 赞同：-2
> 
> 时间：2013-01-11T00:56:40.723
> 
> 标签：perl, unix, pdf, web, download

发布#2 :) 别担心，我不打算把它们都算在内...

有没有一种简单的方法可以使用 perl 或 shell 脚本从网站下载 pdf 文件？如果我有这样的网址： [http](http://www.cs.middlebury.edu/~briggs/Courses/CS201-F12/js/js.pdf) ://www.cs.middlebury.edu/~briggs/Courses/CS201-F12/js/js.pdf 实际上，我将有一个每天运行的 cron 作业来下载来自网站的pdf文件有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:58:20.873

看`wget`或`curl`。例子：`wget <URL> -O <output file>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T01:05:45.227

这`LWP`组模块有一个精简版本[`LWP::Simple`](https://metacpan.org/module/LWP%3a%3aSimple)，可以非常简单地完成这类事情。

```
use strict;
use warnings;

use LWP::Simple 'getstore';

my $resp = getstore('http://www.cs.middlebury.edu/~briggs/Courses/CS201-F12/js/js.pdf', 'js.pdf');
print  $resp, "\n"; 
```

的值`$resp`是 HTTP 状态代码，通常应该是 200 才能成功操作。

# handlebars.js - 使用空格访问数组键

> ID：14269989
> 
> 赞同：10
> 
> 时间：2013-01-11T00:56:45.550
> 
> 标签：handlebars.js

如何访问带有空格的数组键？

标准方式，

```
{{MyArray.name}} 
```

带空格键，

```
{{MyArray.first name}}  or {{MyArray['first name']}} 
```

不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-12T22:17:10.087

括号与点一起使用，不带引号：

{{MyArray.[名字]}}

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-26T15:32:44.300

这是语法：

```
{{[First Name]}} 
```

# objective-c - 如何使用 Scripting Bridge 告诉数据库“我的数据库”？

> ID：14269990
> 
> 赞同：0
> 
> 时间：2013-01-11T00:56:58.003
> 
> 标签：objective-c, cocoa, applescript, scripting-bridge, database-events

按照 Rob Napier 的[Scripting Bridge 教程，我能够为](http://robnapier.net/blog/scripting-bridge-265)[Database Events 应用程序](https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptX/Concepts/as_related_apps.html#//apple_ref/doc/uid/TP40001570-SW1)设置生成的标头，`/System/Library/CoreServices/Database Events.app`. 我现在正在尝试使用 Scripting Bridge 来执行`tell database "My Database"`.

我试图通过 Scripting Bridge 运行的相应 AppleScript 是：

```
tell application "Database Events"
    tell database "My Database"
        -- ...
    end tell
end tell 
```

但是如何在 Scripting Bridge 中执行此操作？

生成的标头包含：

```
// An application's top level scripting object.
@interface DatabaseEventsApplication : SBApplication
+ (DatabaseEventsApplication *) application;

- (SBElementArray *) documents;
- (SBElementArray *) windows;

@property (readonly) BOOL frontmost;  // Is this the frontmost (active) application?
@property (copy, readonly) NSString *name;  // The name of the application.
@property (copy, readonly) NSString *version;  // The version of the application.

- (DatabaseEventsDocument *) open:(NSURL *)x;  // Open an object.
- (void) print:(NSURL *)x printDialog:(BOOL)printDialog withProperties:(DatabaseEventsPrintSettings *)withProperties;  // Print an object.
- (void) quitSaving:(DatabaseEventsSavo)saving;  // Quit an application.

@end

//...

@interface DatabaseEventsDocument : DatabaseEventsItem

@property (readonly) BOOL modified;  // Has the document been modified since the last save?
@property (copy) NSString *name;  // The document's name.
@property (copy) NSString *path;  // The document's path.

@end

//...

@interface DatabaseEventsDatabase : DatabaseEventsItem

- (SBElementArray *) records;

@property (copy, readonly) NSURL *location;  // the folder that contains the database
@property (copy, readonly) NSString *name;  // the name of the database

@end

//...

@interface DatabaseEventsApplication (DatabaseEventsSuite)

- (SBElementArray *) databases;

@property NSInteger quitDelay;  // the time in seconds the application will idle before quitting; if set to zero, idle time will not cause the application to quit

@end 
```

我需要使用该`open:`方法吗？通过搜索`databases`？还有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:51:49.677

我发现使用工作的[`objectWithName:`方法](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/SBElementArray_Class/SBElementArray/SBElementArray.html#//apple_ref/doc/uid/TP40005076-CH3-SW1)`SBElementArray`：

```
DatabaseEventsApplication *dbevApp = [SBApplication applicationWithBundleIdentifier:@"com.apple.databaseevents"];
DatabaseEventsDatabase *db = [[dbevApp databases] objectWithName:@"My Database"]; 
```

**更新：**这是我发布到 GitHub 的一个小项目： [https ://github.com/dtrebbien/Songs-Database-Viewer](https://github.com/dtrebbien/Songs-Database-Viewer)

# wcf - 与网络上的另一个成员共享在 IIS 上运行的站点

> ID：14269992
> 
> 赞同：0
> 
> 时间：2013-01-11T00:57:17.013
> 
> 标签：wcf, iis, networking, iis-7.5

我有一组 wcf 服务，在我的桌面机器上本地运行，网址为[http://localhost.mysite.com](http://localhost.mysite.com)，端点示例为[http://localhost.mysite.com/myservice.svc](http://localhost.mysite.com/myservice.svc)

我的 PC 与其他 PC 在网络上。

我知道这是可能的，但我无法解决网络上另一台 PC 的用户可以导航到上述端点的方法。他们可以通过转到我的网上邻居来查看我的网络上的 PC，但不知道要调用什么 url 来访问端点？我需要在最后配置什么吗？我预计我的同事可能需要在 url 中插入我的电脑名称或 IP 地址。我的 IIS 中还有其他站点正在运行。

# javascript - 否则 JavaScript 中的 if 语句无法显示验证消息

> ID：14269995
> 
> 赞同：2
> 
> 时间：2013-01-11T00:57:32.930
> 
> 标签：javascript, html

根据验证中的 if/else 语句，我无法显示字符串。

如果您查看下面的代码，如果满足`if`语句，则显示消息很好，但是当我确定满足`if`语句并故意使`else if`语句失败时，它不显示消息，而是显示空白. 为什么在下面的 javascript 验证中不显示何时`else if`满足语句的消息：

```
function editvalidation() {
     var isDataValid = true;
     var currentAssesO = document.getElementById("currentAssessment");
     var noStudentsO = document.getElementById("addtextarea");
     var studentAssesMsgO = document.getElementById("studentAlert");

     studentAssesMsgO.innerHTML = "";

     if (currentAssesO.value == ""){
         $('#targetdiv').hide();
         studentAssesMsgO.innerHTML = "Please Select an Assessment to edit from the Assessment Drop Down Menu";
         isDataValid = false; 
     }else if (noStudentsO.value == ""){
         $('#targetdiv').hide();
         studentAssesMsgO.innerHTML = "You have not Selected any Students you wish to Add into Assessment";
         isDataValid = false; 
     }
     else{
         studentAssesMsgO.innerHTML = ""; 
     }

     return isDataValid;
} 
```

**更新：**

HTML：

选择框（选项附加到此框中）：

```
<select multiple="multiple" name="addtextarea" id="studentadd" size="10">
</select> 
```

下拉式菜单：

```
<select name="session" id="sessionsDrop">
<option value="">Please Select</option>
<option value='20'>EWYGC - 10-01-2013 - 09:00</option>
<option value='22'>WDFRK - 11-01-2013 - 10:05</option>
<option value='23'>XJJVS - 12-01-2013 - 10:00</option>
</select> </p> 
```

警报信息：

```
<div id='studentAlert'></div> 
```

验证要求：

*   如果下拉菜单为空，则在警报消息 div 中显示需要从下拉菜单中选择评估的消息。

*   如果下拉菜单不为空，则检查选择框是否包含任何选项，如果选择框不包含任何选项，则替换 div 警报消息，说明没有选择学生添加到评估中

*   如果下拉菜单不为空且选择框不为空（或者换句话说包含一个选项），则 div 警报消息只是一个空字符串`""`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T01:05:16.227

### 用这种方式改写你的 JavaScript：

```
function editvalidation() {
    var isDataValid = true;
    var currentAssesO = document.getElementById("currentAssessment");
    var noStudentsO = document.getElementById("addtextarea");
    var studentAssesMsgO = document.getElementById("studentAlert");
    var errorMsg = "";

    studentAssesMsgO.innerHTML = "";
    if (currentAssesO.value == "" || noStudentsO.value == "") {
        $('#targetdiv').hide();
        isDataValid = false; 

        if (currentAssesO.value == "") {
            errorMsg += "Please Select an Assessment to edit from the Assessment Drop Down Menu";
        }

        if (noStudentsO.value == "") {
            errorMsg += "You have not Selected any Students you wish to Add into Assessment";
        }

        studentAssesMsgO.innerHTML = errorMsg; // Plus whatever styling for messages.
    }

    return isDataValid;
} 
```

* * *

### 更新的答案

请通过将其放在该`<head>`部分中来包含 jQuery。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

更新您的脚本：

```
function editvalidation()
{
    if ($("#sessionsDrop").val()=="")
        $("#studentAlert").html("Assessment needs to be filled.");
    if ($("#sessionsDrop").val()!="" && $("#studentadd").children().length==0)
        $("#studentAlert").html("No students have been selected to add to assessment.");
    if ($("#sessionsDrop").val()!="" && $("#studentadd").children().length!=0)
        return true;
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T01:04:36.120

这是魔术：

```
else {
    studentAssesMsgO.innerHTML = ""; 
    alert(noStudentsO.value); // tell me why I'm in this block
} 
```

# javascript - 如何在javascript中做IN

> ID：14269999
> 
> 赞同：1
> 
> 时间：2013-01-11T00:57:47.233
> 
> 标签：javascript

> **可能重复：**
> [javascript函数inArray](https://stackoverflow.com/questions/890782/javascript-function-inarray)

在 Python 中，我可以通过以下方式进行多重等价测试：

```
if x in [1, 2, 3, 4, 5]:
    do something 
```

我将如何在 javascript 中执行此操作？目前我正在做：

```
if (x == 1 || x == 2 || x == 3 || x == 4 || x == 5) {
    do something
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T00:58:38.090

在 JavaScript 中有[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)方法：

```
if ([1,2,3,4,5].indexOf(x) > -1) {
    // do something
} 
```

需要注意的是，有些老的浏览器不支持这种方式，所以推荐使用[shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility)。

顺便说一句，[`in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)运算符存在于 JavaScript 中，主要用于检查对象中的属性是否存在，例如：

```
"id" in { id: 123 } === true;
"id" in { ib: 123 } === false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T01:00:59.360

如果您只想指定`x`一次变量，则可以使用开关：

```
switch (x) {
  case 1:
  case 2:
  case 3:
  case 4:
  case 5:
    // do something
} 
```

如果值与示例中的值非常相似，则只需检查最终值：

```
if (x >= 1 && x <= 5) {
  // do something
} 
```