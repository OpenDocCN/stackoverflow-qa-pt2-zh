# StackOverflow 问答 12802000-12802999

# xml - 使用 perl 或 awk 从 xml 数据中删除 xml 声明

> ID：12802003
> 
> 赞同：2
> 
> 时间：2012-10-09T14:12:06.787
> 
> 标签：xml, perl, awk, xml-serialization, xml-declaration

我们的应用程序在接收端对 XML 数据进行回溯分析。我们的应用程序没有可用的 Java 或 .NET，但在 Unix 中运行，所以它有 awk 和 Perl。

文件中的 XML 消息包含：

```
<?xml version="1.0" encoding="ISO-8859-1" ?> 
```

我在 Perl 和 awk 中尝试了一些选项来删除它们，但无法让它们工作：

```
perl -p -i -e "s/<?xml version="1.0" encoding="ISO-8859-1" ?>//g"  inputFile
perl -p -i -e "s/<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>//g"  inputFile
perl -p -i -e "s/<\?xml version="1.0" encoding="ISO-8859-1" \?>//g"  inputFile 
```

使用 PERL 或 AWK 来执行此操作的任何其他选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:17:56.767

如果您的文件是 XML，则不必匹配整个字符串。`<?xml version`足够的。

尝试：

```
sed -i '/<\?xml version/d' file 
```

**测试**

```
kent$  echo '<?xml version="1.0" encoding="ISO-8859-1" ?> 
foo
bar
xyz
hello
there'|sed '/<\?xml version/d' 
foo
bar
xyz
hello
there 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:08:14.407

这对我有用而不会覆盖数据文件：

```
perl -p -e 's/<\?xml version="1.0" encoding="ISO-8859-1" \?>//g' 
```

`-i`只有当我确定基本的正则表达式正常工作而不会造成损坏时，我才会覆盖文件 ( )。

# haskell - AMQP 丢失了队列的尾部？

> ID：12802004
> 
> 赞同：0
> 
> 时间：2012-10-09T14:12:14.890
> 
> 标签：haskell, rabbitmq, amqp

我制作了一些教程脚本来解决 RabbitMQ/Haskell 绑定，并且发生了奇怪的消息丢失。与突发长度无关，接收方丢弃少量排队消息。我发现消费者“感知”到数据爆发的结束并放弃是非常令人难以置信的，但在我看来就是这样。下一次爆发愉快地开始，没有拉入“未收到”的东西。

代码和示例结果：[https](https://gist.github.com/3859009) ://gist.github.com/3859009 。

那里没什么好看的，只有一个消费者和一个生产者。我试图刷新标准输出，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:33:23.257

跟踪插件日志显示它实际上是一个发送问题。

检查 /var/log/rabbitmq/rabbit@hostname.log 产生了一些关于断开连接的警告：

```
=WARNING REPORT==== 10-Oct-2012::10:21:45 ===
closing AMQP connection <0.21203.0> (127.0.0.1:58180 -> 127.0.0.1:5672):
connection_closed_abruptly 
```

我检查了我的代码，确实，`closeConnection conn`doFlood 例程中没有。添加它解决了这个问题。

# iphone - OpenGL ES - glReadPixels 与 TextureCached

> ID：12802006
> 
> 赞同：0
> 
> 时间：2012-10-09T14:12:20.890
> 
> 标签：iphone, opengl-es, render-to-texture, glreadpixels, cctexturecache

我需要从 OpenGL ES 2.0 的帧缓冲区中读取像素数据。我知道这可以通过 glReadPixels 轻松完成，但是从 iOS 5 开始，我们可以使用 TextureCached 对象来加快阅读速度。

我已经实现了 Brad Larson 提出的解决方案（我将永远感谢他，我认为他在社区分享这么多知识方面做得很好......）[在 iPhone OpenGL ES 2.0 中替代 glReadPixels 的速度更快](https://stackoverflow.com/questions/9550297/faster-alternative-to-glreadpixels-in-iphone-opengl-es-2-0?answertab=active#tab-top)

一切似乎都正常，我得到了正确的数据，如果我将它与 glReadPixels 进行比较，数据是相同的。当我测量这两种可能解决方案的性能（检索数据时消耗的时间）时，我的问题就出现了。

这是我的结果：

（帧缓冲区和纹理大小**320x480**像素）

GPUImageProcessingDemo[1252:707] glReadPixels 2750 us

GPUImageProcessingDemo[1252:707] 纹理读取 1276 us

GPUImageProcessingDemo[1252:707] glReadPixels 2443 us

GPUImageProcessingDemo[1252:707] 纹理读取 1263 us

GPUImageProcessingDemo[1252:707] glReadPixels 2494 us

GPUImageProcessingDemo[1252:707] 纹理读取 1375 us

这似乎很有趣，因为它几乎是使用 glReadPixels 所需时间的一半。问题是当我将纹理大小更改为更大一点时，我会得到以下结果：

（帧缓冲区和纹理大小**480x620**像素）

GPUImageProcessingDemo[1077:707] glReadPixels 2407 us

GPUImageProcessingDemo[1077:707] 纹理读取 2842 us

GPUImageProcessingDemo[1077:707] glReadPixels 2392 us

GPUImageProcessingDemo[1077:707] 纹理读取 3040 us

GPUImageProcessingDemo[1077:707] glReadPixels 2224 us

这有意义吗？还是我应该期望总是得到更好的结果？

# java - 为什么我得到错误：java.io.IOException：无效的标头字段

> ID：12802015
> 
> 赞同：1
> 
> 时间：2012-10-09T14:12:42.600
> 
> 标签：java, web-services, resteasy

听说这是我的学生 pojo 课...

```
 public class Student {

 private int id;

 private String name;

 private String address;

 private String gender;

 private String emailId;

 private String contactNo;
//setter getter 
```

我将在下面开发一个学生列表类：

```
public class StudentList {

@XmlElement
private List<Student> slist ;

public StudentList(List<Student> slist){
    this.slist= slist;
}//setter getter 
```

我的学生服务课程如下：

```
 public class StudentService extends Application {
@GET
@Path("student/read") 
@Produces("application/json")      
@GZIP  public StudentList readstudent(@Context HttpServletRequest request){

    StudentList slistDetail = new StudentList();

    List<Student> s = new ArrayList<Student>();

    for(int i=0; i<50; i++)
    {
        Student st = new Student();
        st.setId(i);
        st.setName("name "+ i);
        st.setAddress("address "+ i);
        st.setContactNo("12345"+i);
        st.setEmailId("email"+i+"@gmail.com");
        st.setGender("m");

        s.add(st);
    }
    slistDetail.setSlist(s);
    return slistDetail;
} 
```

Web.xml`

```
<context-param>
  <param-name>javax.ws.rs.core.Application</param-name>
  <param-value>com.service.StudentService</param-value> 
```

```
 <listener>
  <listener-class>
     org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
  </listener-class> 
```

```
<servlet>
  <servlet-name>Resteasy</servlet-name>
  <servlet-class>
     org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
  </servlet-class> 
```

***我会发现以下错误：***

```
java.io.IOException: invalid header field
at java.util.jar.Attributes.read(Unknown Source)
at java.util.jar.Manifest.read(Unknown Source)
at java.util.jar.Manifest.<init>(Unknown Source)..... 
```

所以，请告诉我为什么会发生这种类型的错误......提前谢谢

# python - 如何在python中打印/返回一个类？

> ID：12802016
> 
> 赞同：3
> 
> 时间：2012-10-09T14:12:41.947
> 
> 标签：python, class, object, python-2.7

> **可能重复：**
> [Python：如何使用 print() 打印一个类或类对象？](https://stackoverflow.com/questions/1535327/python-how-to-print-a-class-or-objects-of-class-using-print)

我目前有这个代码：

```
class Track(object):
    def __init__(self,artist,title,album=None):
        self.artist = artist
        self.title = title
        self.album = album

    def __str__(self):
        return self.title + self.artist + self.album 
```

现在，当我将类似的东西`Track('Kanye West','Roses','Late Registration')`放入终端时，我得到了`<__main__.Track object at 0x10f3e0c50>`如何让它返回或打印那个地方的值？

我是编程新手，尤其是“面向对象编程”的新手，所以我的问题是什么是类？如何在类中定义函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T14:13:59.953

你应该定义`__repr__`方法：

```
class Track(object):

    ...

    def __repr__(self):
        return ('Track(artist=%s album=%s title=%s)' 
                % (repr(self.artist), repr(self.title), repr(self.album))) 
```

现在您可以在终端中看到对象的表示：

```
>>> Track('Kanye West','Roses','Late Registration')
Track(artist='Kanye West' album='Roses' title='Late Registration') 
```

**请注意**`__str__`，和`__repr__`方法之间存在差异：

*   `__str__`需要将对象转换为字符串。来电：`str(obj)`
*   `__repr__`- 因其人类可读的可视化。来电：`repr(obj)`

当您放入终端`obj`时，python会`repr`自动调用函数。但是如果你使用`print obj`表达式，python会调用`str`函数：

```
>>> obj
...repr of obj here...
>>> print obj
...str of obj here... 
```

有关更多信息，请参阅[文档](http://docs.python.org/reference/datamodel.html#object.__repr__)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T14:20:47.660

你的代码很好，但你忘记了一些东西。

假设你有这个类：

```
class Bob():
    def __init__(self, hobby):
        self.hobby = hobby 
```

在控制台中，您将创建一个具有如下爱好的 Bob 类：

```
a = Bob("skiing") 
```

然后要获得鲍勃的爱好，您可以这样做：

```
print a.hobby 
```

现在 - 回到你的问题，你做到了`Track('Kanye West','Roses','Late Registration')`

您创建了一个对象，但没有将该对象分配给变量。所以你的结果是对象本身......你可以简单地打印对象，它将调用该`__str__`方法。所以...

```
print Track('Kanye West','Roses','Late Registration') 
```

会工作，但如果你想做得更好一点。（例如）

```
a = Track('Kanye West','Roses','Late Registration')
print a.title
print a.artist
print a.album 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:21:26.907

如果您只是为了调试目的而需要它来检查对象的内部值，您可以这样做

```
Track('Kanye West','Roses','Late Registration').__dict__ 
```

它将向您显示内部数据表示为 python dict

# c# - 等待子进程退出 splwow64 导致问题

> ID：12802017
> 
> 赞同：0
> 
> 时间：2012-10-09T14:12:45.300
> 
> 标签：c#, process, wait

我正在编写一个启动外部应用程序然后等待它和所有子进程退出的应用程序。

```
 private int RunCmdAndGetExitCode(string command, string args, ProcessWindowStyle windowStyle, WaitEnum wait)
    {
        Process scriptProc = new Process();
        scriptProc.StartInfo.FileName = command;
        scriptProc.StartInfo.Arguments = args;
        scriptProc.StartInfo.WindowStyle = windowStyle;

        if (scriptProc.Start())
        {
            if (wait == WaitEnum.MainProcess)
            {
                scriptProc.WaitForExit();
                return scriptProc.ExitCode;
            }
            else if(wait == WaitEnum.None)
            {
                return 0;
            }
            else if (wait == WaitEnum.ChildProcesses)
            {
                ProcessMonitorThread _procmon = new ProcessMonitorThread(this, scriptProc);

                while (ThreadCount != 0)
                {
                    Thread.Sleep(500);
                }
                return 0;
            }
        }

        return -1;
    } 
```

`ProcessMonitorThread`是一个继承自的类`BackgroundWorker`

```
public class ProcessMonitorThread : BackgroundWorker
{
    private IChildCounter _Counter;
    private Process _processToMonitor;

    public ProcessMonitorThread(IChildCounter counter, Process processToMonitor)
    {
        _Counter = counter;
        _Counter.ThreadCount++;
        _processToMonitor = processToMonitor;

        this.DoWork += new DoWorkEventHandler(ProcessMonitorThread_DoWork);
        this.RunWorkerCompleted += new RunWorkerCompletedEventHandler(ProcessMonitorThread_RunWorkerCompleted);
        this.RunWorkerAsync();
    }

    void ProcessMonitorThread_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        _Counter.ThreadCount--;
    }

    void ProcessMonitorThread_DoWork(object sender, DoWorkEventArgs e)
    {
        int processid = _processToMonitor.Id;

        _processToMonitor.WaitForExit();

        foreach (int _childid in GetChildProcessIDs(processid))
        {
            Process ps = Process.GetProcessById(_childid);

            new ProcessMonitorThread(_Counter, ps);
        }
    }
    List<Int32> GetChildProcessIDs(int ProcessID)
    {
        List<Int32> _ChildProcesses = new List<Int32>();

        // Use the ObjectQuery to get the list of configured printers
        System.Management.ObjectQuery oquery =
            new System.Management.ObjectQuery("SELECT * FROM Win32_Process WHERE ParentProcessId =" + ProcessID);

        System.Management.ManagementObjectSearcher mosearcher =
            new System.Management.ManagementObjectSearcher(oquery);

        System.Management.ManagementObjectCollection _AllChildProcesses = mosearcher.Get();
        foreach (ManagementObject _cprocess in _AllChildProcesses)
        {
            Int32 _processid;
            _processid = Convert.ToInt32(_cprocess["ProcessId"]);
            _ChildProcesses.Add(_processid);
        }

        return _ChildProcesses;
    }
} 
```

当我启动一个可以打印的应用程序时，它会启动 splwow64 并且该进程成为子进程之一。问题是当我关闭应用程序时，我启动了 splwow64 并没有关闭它，而是等待某种超时。只有当 splwow64 终止时，我的应用程序才会报告我启动的应用程序及其所有子进程都已终止。哪个是对的。但是我真的不想等待 splwow64。

有什么方法可以识别系统进程或在我的进程终止后可以继续运行的进程？

我知道我可以忽略名称为 splwow64 的进程，但这对我来说似乎有点解决方法。

# wpf - WPF ElementHost 在启用双缓冲的情况下无法绘制

> ID：12802018
> 
> 赞同：2
> 
> 时间：2012-10-09T14:12:46.127
> 
> 标签：wpf, winforms, double-buffering

嗨，我遇到了与此问题类似的[问题](https://stackoverflow.com/questions/470846/winforms-wpf-interop-wpf-content-fails-to-paint)。

对我来说不同的是，我在 WinForms-MainForm 中使用“CreateParams-Method”来强制双缓冲。代码如下（例如[DataGridView 绘制错误](https://stackoverflow.com/questions/5859826/createparams-solved-flickering-but-datagridview-draws-wrong)之后）：

```
protected override CreateParams CreateParams
{
    get
    {
        // Activate double buffering at the form level.  All child controls will be double buffered as well.
        CreateParams cp = base.CreateParams;
        cp.ExStyle |= 0x02000000;   // WS_EX_COMPOSITED
        return cp;
    }
} 
```

我现在的问题是，只要激活了这个 CreateParams，我的 WPF-ElementHost 在 WinForms-Usercontrol 中的内容只有在有 mouseover 事件时才会被绘制。

简短描述：用户控件“打开”但它是透明的。在我用鼠标移过它之后，例如 ComboBoxes 被绘制出来。

一旦我注释掉 CreateParams，一切正常（使用 WPF-ElementHost）。是否可以为 WPFElementHost 停用/使用不同的 CreateParams？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-17T14:22:49.383

更改 WPF 控件上的[渲染模式](https://stackoverflow.com/a/4951250/1102585)对我有用：

```
private void Control_Loaded(object sender, RoutedEventArgs e)
{
    HwndSource hwndSource = PresentationSource.FromVisual(this) as HwndSource;
    HwndTarget hwndTarget = hwndSource.CompositionTarget;
    hwndTarget.RenderMode = RenderMode.SoftwareOnly;
} 
```

# python - python中的线性方程组

> ID：12802020
> 
> 赞同：0
> 
> 时间：2012-10-09T14:12:50.010
> 
> 标签：python, numpy, linear-algebra

我想解决一组 10 个变量的线性方程。

我创建了这样的第一个数组：

> A=np.random.random_integers(15, size=(10,10))

我希望等于之后的值是 0

> （Ax + dy + .... + N = 0）

所以我做了这样的事情：

> b=np.zeros（形状=（10））

但是当我应用线性代数函数时

> 打印 linalg.solve(A, b)

结果，我得到了一个包含 10 个零的数组。

> [ 0\. 0\. 0\. 0\. -0\. -0。-0。-0。0\. 0.]

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:58:26.407

我不明白第二行代码的含义。

虽然，有了这个：

```
A=np.random.random_integers(15, size=(10,10))
b=np.zeros(shape=(10)) 
```

你正在解决系统：

```
A * x = b 
```

这意味着您拥有：

```
A[1,1] * x_1 + A[1,2] * x_2 + ... + A[1,10] * x_10 = 0
A[2,1] * x_1 + A[2,2] * x_2 + ... + A[2,10] * x_10 = 0
... 
```

所以 x = 零向量总是一个完美的解决方案 = 你正在寻找这样的 x ，即 A x = 0，所以 x 为零。尝试

```
b = np.random.random_integers(15, size=(10,1)) 
```

由 linalg.solve(A,b) 产生的 x 将指定 A 中列的线性组合，以求和随机 b 向量。

在[https://stackoverflow.com/questions/12910513/how-to-verify-the-results-of-a-linear-equation-system](https://stackoverflow.com/questions/12910513/how-to-verify-the-results-of-a-linear-equation-system)您尝试了 numpy.svd （这是奇异值分解，我认为您没有want) 和 numpy.lstsq 试图找到最小化最小二乘距离的不精确解决方案（例如，对于超定矩阵）。

我可能不明白您在寻找什么 - 请澄清指定您到底在寻找什么的行。

# facebook - 获取当前用户新闻源以及帖子作者图片

> ID：12802026
> 
> 赞同：0
> 
> 时间：2012-10-09T14:13:41.557
> 
> 标签：facebook, facebook-graph-api

我正在尝试在单个查询中获取当前用户的所有新闻源帖子以及每个帖子作者图片网址，但我无法成功。

我可以通过在 Graph Api 中调用“/me/home”来获取当前用户的newfeed，并且可以通过调用“{user_id}/picture”来获取特定的用户图片。如何在一个查询中获取我的新闻源的每张作者照片？

提前致谢！巴勃罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:11:09.717

您可以使用字段扩展来解决此问题。一个复杂的因素是您必须手动请求您现在需要的所有字段。试试这个查询：

```
me/home?fields=from.name,from.picture,message,picture 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:16:29.343

这实际上很容易。`/me/home`像以前一样使用查询。但是不用打电话给`/user_id/picture`你，你可以在 HTML 中这样做：

```
<img src="https://graph.facebook.com/{user_id}/picture?type=square" /> 
```

例如：[https ://graph.facebook.com/4/picture?type=square](https://graph.facebook.com/4/picture?type=square)

# upload - 审查板：审查后错误上传差异与 basedir 配置错误

> ID：12802031
> 
> 赞同：2
> 
> 时间：2012-10-09T14:13:57.217
> 
> 标签：upload, diff, review-board

我在 Ubuntu 中工作，我想使用 post-review 为带有手动生成的 .diff 文件的审查板创建一个新的审查请求，但失败了。

我今天大部分时间都在进行后期审查，但发现自己陷入了这个 postbasedir 问题。我请我的三位同事坐在我的座位上解决这个问题，但他们也发现自己没有有效的解决方案。

这是问题所在：

我在 .reviewboardrc 文件中设置了 repoistory 和 reviewboard_url ，我确定这两个设置都可以，因为请求已在审阅板中成功创建，并且存储库指向目标文件所在的目录。

这是 .reviewboardrc 的内容：

============================== .reviewboardrc =================== =============

```
REVIEWBOARD_URL = "http://10.22.200.166:8088"
REPOSITORY = "http://svn.d.xiaonei.com/wap/renren/renren-wap-talk/trunk" 
```

==================================================== ===========================

我按如下方式运行 post-review 但上传 Doxyfile.diff 文件失败，这是它的内容：

=============================== Doxyfile.diff ================= ================

```
Index: Doxyfile
===================================================================
--- Doxyfile    (revision 107236)
+++ Doxyfile    (working copy)
@@ -1,3 +1,5 @@
+#POST_REVIEW_TEST
+POST_REVIEW_TEST =
 # Doxyfile 1.7.6
 # This file describes the settings to be used by the documentation system
 # doxygen (www.doxygen.org) for a project. 
```

==================================================== ============================

以及启用调试信息的输出错误消息

====================== 错误消息========================== ======================

```
houchenxi@houchenxi-PC:~/renren-wap-talk$ post-review -dp --diff-filename=Doxyfile.diff 
>>> RBTools 0.4.2
>>> Python 2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1]
>>> Running on Linux-3.0.0-22-generic-x86_64-with-Ubuntu-11.10-oneiric
>>> Home = /home/houchenxi
>>> Current Directory = /home/houchenxi/renren-wap-talk
>>> Checking the repository type. Errors shown below are mostly harmless.
DEBUG:root:Checking for a CVS repository...
DEBUG:root:Checking for a ClearCase repository...
DEBUG:root:Checking for a Git repository...
DEBUG:root:Running: git rev-parse --git-dir
DEBUG:root:Command exited with rc 128: ['git', 'rev-parse', '--git-dir']
fatal: Not a git repository (or any parent up to mount parent )
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
---
DEBUG:root:Checking for a Mercurial repository...
DEBUG:root:Running: hg showconfig
DEBUG:root:Running: hg root
DEBUG:root:Command exited with rc 255: ['hg', 'root']
abort: no repository found in '/home/houchenxi/renren-wap-talk' (.hg not found)!
---
DEBUG:root:Checking for a Perforce repository...
DEBUG:root:Checking for a Plastic repository...
DEBUG:root:Checking for a Subversion repository...
DEBUG:root:Running: svn info http://svn.d.xiaonei.com/wap/renren/renren-wap-talk/trunk
DEBUG:root:Running: diff --version
DEBUG:root:repository info: Path: http://svn.d.xiaonei.com/wap, Base path: /renren/renren-wap-talk/trunk, Supports changesets: False
>>> Finished checking the repository type.
>>> HTTP GETting api/
>>> HTTP GETting http://ourhost:8088/api/info/
>>> Using the new web API
>>> HTTP GETting http://ourhost:8088/api/repositories/
>>> Attempting to create review request on http://svn.d.xiaonei.com/wap/renren/renren-wap-talk/trunk for None
>>> HTTP POSTing to http://ourhost:8088/api/review-requests/: {'repository': 'http://svn.d.xiaonei.com/wap/renren/renren-wap-talk/trunk'}
>>> Review request created
>>> Uploading diff, size: 335
>>> HTTP POSTing to http://ourhost:8088/api/review-requests/130/diffs/: {'basedir': '/renren/renren-wap-talk/trunk'}
>>> Got API Error 207 (HTTP code 400): The file was not found in the repository
>>> Error data: {u'stat': u'fail', u'file': u'/renren/renren-wap-talk/trunk/Doxyfile', u'err': {u'msg': u'The file was not found in the repository', u'code': 207}, u'revision': u'107236'}

Error uploading diff

Your review request still exists, but the diff is not attached. 
```

==================================================== =========================

在上面的err msg中我们发现basedir参数{'basedir': '/renren/renren-wap-talk/trunk'}不正确，应该是“http”的完整路径，即“http:// /svn.d.xiaonei.com/wap/renren/renren-wap-talk/trunk" ，但是无论我们如何尝试修改 .reviewboardrc 或添加命令行参数，我们都无法将此值更正为预期的正确值，我们通过运行“post-review --help”在帮助信息中进行了搜索，但没有可用的“--basedir”选项。

我所要做的就是通过修改 .reviewboardrc 或更改 post-review 参数将 basedir 值更正为正确的完整路径。

有没有人有解决这个问题的类似经验，非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:12:51.617

我相信你的问题可能是 SVN 存储库的路径之间的相关性：
`http://svn.d.xiaonei.com/wap/renren/renren-wap-talk/trunk`
和你的 diff 文件中的相对路径（它在文件夹层次结构中生成的级别）：
`Index: Doxyfile`

除非 Doxyfile 文件直接位于主干中，否则您应该尝试在这样的级别重新创建差异，以便差异将包含主干和 Doxyfile 之间缺少的相对路径：
`Index: /missing/path/to/Doxyfile`
..或在 Reviewboard 中更新您的 SVN URL以便 URL 自身包含缺少的路径。

[您将在此帖子的答案](https://stackoverflow.com/a/13214468/1790539)中找到此相关性的详细解释：[review board diff not uploading](https://stackoverflow.com/q/11345357/1790539)

！

# sharepoint - Sharepoint 2013 社区网站：从讨论区获取价值

> ID：12802034
> 
> 赞同：2
> 
> 时间：2012-10-09T14:13:59.560
> 
> 标签：sharepoint, sharepoint-2013, sharepoint-discussion-board

我必须以编程方式从讨论列表中获取值。当我尝试这段代码时，它给出了回复的值。

```
SPList oSpListPost = oSPWeb.Lists["Discussions List"];
SPListItemCollection oSpListItemClnPost = oSpListPost.Items;

foreach (SPListItem post in oSpListItemClnPost)
{
       SPField field = post.Fields.GetField("Body");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:28:00.167

“父”讨论是带有附加元数据的文件夹，而不是列表项。您可能希望获取列表中的关联文件夹，而不是单个列表项。

# yeoman - 约曼的输出在哪里？

> ID：12802036
> 
> 赞同：0
> 
> 时间：2012-10-09T14:14:02.060
> 
> 标签：yeoman

我更改了一个咖啡脚本文件。yeoman 的 watch 任务尝试编译失败。在哪里可以找到错误信息？Yeoman 仅输出如下 -

```
Running "coffee:dist" (coffee) task
>> Unable to compile your coffee
<WARN> Task "coffee:dist" failed. Use --force to continue. </WARN> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:00:05.627

升级到最新版本，它将：

```
>> Error: In app/scripts/test.coffee, Parse error on line 2: Unexpected 'INDENT'
<WARN> CoffeeScript failed to compile. Use --force to continue. </WARN> 
```

# google-chrome-extension - 如何下载我自己的扩展的项目文件？

> ID：12802041
> 
> 赞同：2
> 
> 时间：2012-10-09T14:14:20.357
> 
> 标签：google-chrome-extension, chrome-web-store

我想对 Google Chrome 扩展进行一些更新。这是**我自己的**扩展，不是外国的。我可以访问开发人员页面，但无法找到如何下载我最后上传的 .zip 文件，即我的最后一个版本。

我要求这样做是因为我的计算机上还没有这些文件。那么，如何下载我上次上传的 .zip 文件呢？

## 解决方案

1.  获取扩展 ID。有点像`bfbmjmiodbnnpllbbbfblcplfjjepjdn`。
2.  `~~~~`将此链接上的扩展 ID 替换为： [https ://clients2.google.com/service/update2/crx?response=redirect&x=id%3D~~~~%26uc](https://clients2.google.com/service/update2/crx?response=redirect&x=id%3D~~~~%26uc)
3.  将替换 ID 的链接粘贴到另一个浏览器（***不是 Chrome***）中，它会提示一个`save dialog`. 保存`.crx`文件。
4.  `.crx`将文件重命名为`.zip`file 并提取存档。

**注意：**当我尝试打开它时，`.zip`它似乎坏了并且出现了错误，但是当我直接提取它时一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:17:22.950

只需将扩展名更改为`.zip`并使用您最喜欢的 zip 应用程序打开它，因为这实际上是一个包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-11T06:30:56.423

如果你使用windows操作系统。

1.  从 chrome 添加您的扩展。
2.  `C:\Users\%userprofile%\AppData\Local\Google\Chrome\User Data\Default\Extensions\bfbmjmiodbnnpllbbbfblcplfjjepjdn`在 Windows 文件资源管理器中粘贴并输入此路径

你可以得到你的扩展文件。

# markdown - 根据带有 Markdown/Pandoc 的项目符号使用特定的类

> ID：12802043
> 
> 赞同：4
> 
> 时间：2012-10-09T14:14:24.723
> 
> 标签：markdown, pandoc

我使用 Markdown 编写培训文档，并使用 Pandoc 将它们转换为 HTML。

我想要一个使用经典`*`角色的类子弹，并使用子弹`+`和`-`.

目前我在输出 HTML 中没有差异。如何根据项目符号添加一个类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T20:29:04.453

要从 Pandoc 中获取 HTML`class`属性，您必须在输入文件中明确设置这些属性。这仅支持[代码块](http://johnmacfarlane.net/pandoc/README.html#delimited-code-blocks)，并且不会自动工作。

要获取列表的类，您需要修改 Pandoc 以输出它们。

在[`src/Text/Pandoc/Writers/HTML.hs`](https://github.com/jgm/pandoc/blob/b808655b2b48cdcbb7591695dd64db455252970e/src/Text/Pandoc/Writers/HTML.hs)中，代码块的属性在 中生成、从或中`attrsToHtml`调用。您必须扩展以生成属性并调用它。`blockToHtml``inlineToHtml``unordList``attrsToHtml`

（没有[haskell](/questions/tagged/haskell "显示标记为“haskell”的问题")标签表明这可能不是您正在寻找的解决方案......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-13T18:00:26.640

如果您的意思是列表项目符号，您可以将列表包装在一个带有类的 div 中，并使用相应的 CSS 选择器：

```
<div class="styledlist">
+   foo
+   bar
+   baz
</div> 
```

会给你这样的HTML：

```
<div class="styledlist">
<ul>
<li>foo</li>
<li>bar</li>
<li>baz</li>
</ul>
</div> 
```

你可以使用这样的 CSS 选择器：

```
span.styledlist ul { ... } 
```

不是最漂亮的 Markdown 或 HTML，但它可以工作。

# desire2learn - Valence PUT等级获得404

> ID：12802047
> 
> 赞同：0
> 
> 时间：2012-10-09T14:14:44.813
> 
> 标签：desire2learn

虽然效价给我带来了问题，但提交成绩。

尝试根据[https://docs.valence.desire2learn.com/res/grade.html#put--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-grades-%为请求建模28D2LID-gradeObjectId%29-values-%28D2LID-userId%29](https://docs.valence.desire2learn.com/res/grade.html#put--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-grades-%28D2LID-gradeObjectId%29-values-%28D2LID-userId%29)

```
Oct 9, 2012 8:20:02 AM com.sun.jersey.api.client.filter.LoggingFilter log
INFO: 3 * Client out-bound request
3 > PUT http{s}://elearning.test.masked.edu:443/d2l/api/le/1.0/47908/grades/217237/values/37185   (Yes the x_a, x_b, and x_t parameters are set and correct)

{"GradeObjectType":4,"Text":"1052012"} 
```

响应始终是 404。

```
Oct 9, 2012 8:20:02 AM com.sun.jersey.api.client.filter.LoggingFilter log
INFO: 3 * Client in-bound response
3 < 404 
```

为了排除权限问题并确保值正确，我通过 D2L 的用户界面登录并使用进行价调用的用户设置等级。有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:15:53.330

问题是该日期已超过课程结束日期。D2L 允许在课程结束日期之后通过网页查看和提交成绩，但目前不能通过 Valence API。这是 9.4.1 至 10.1.0 版本的一个已知问题，D2L 报告该问题在其内部缺陷跟踪系统中进行修复。***评论已根据 D2L 建议进行编辑。谢谢您的帮助。***

# facebook - 如何将我的 Wordpress 博客与新的 Facebook for Wordpress 插件集成？

> ID：12802055
> 
> 赞同：1
> 
> 时间：2012-10-09T14:15:11.950
> 
> 标签：facebook

我遇到的问题与提交操作类型以供 Facebook 审查和批准有关。当我为“发布”操作按提交时，我收到以下错误消息：

> “内置操作类型要求您提供说明，以在功能测试环境中作为您的开放图测试用户使用您的应用程序的开放图集成。未能提供有效的测试环境将导致您的操作类型被拒绝“<<

有什么建议吗？

# bash - BASH：打印日期的下一个星期一

> ID：12802060
> 
> 赞同：3
> 
> 时间：2012-10-09T14:15:24.020
> 
> 标签：bash

如何计算下周星期一的日期？例如，如果我在这一天有一个变量：

```
DAYCHECK=2012-10-24 
```

下周一的计算不起作用：

```
date -d $DAYCHECK -dnext-monday +%Y%m%d 
```

**更新：**

我已经解决了这个方法：

```
numdaycheck=`date -d $DAYCHECK +%u`
sum=$((8-$numdaycheck))
date=`date -d "$DAYCHECK $sum days" +%Y%m%d` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:56:13.853

如果 GNU `date`（或任何其他`date`）接受“$DAYCHECK 之后的星期一”的某些变体，我还没有看到它。我认为你必须做数学。

```
$ day_of_week=$( date +%u --date $DAYCHECK)   # 1 = Monday, ... 7 = Sunday
$ date --date "$DAYCHECK +$((8-day_of_week)) days" 
```

如果`DAYCHECK`已经是星期一，您将获得下一个星期一。如果您愿意`DAYCHECK`，则需要单独处理：

```
$ if (( day_of_week == 1 )); then
> date --date "$DAYCHECK"
> else
> date --date "$DAYCHECK +$((8-day_of_week)) days"
> fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:03:28.337

（不需要回显命令。）

```
kent$  w=$(date -d2012-10-24 +%u) // here get the weekday index

kent$  echo $w
3

kent$  s=$(((7-$w+2)*3600*24+$(date -d2012-10-24 +%s))) //here get the "next monday" seconds

kent$  echo $s
1351548000

kent$   echo $(date +%Y-%m-%d -d "1970-01-01 UTC $s seconds") //finally we get the date of "next monday"
2012-10-29 
```

所以“ `2012-10-29`”是最终的答案。

这种方式不像chepner的那么简单。我作为另一个答案发布，因为我通常用它进行日期计算。例如，将 5 小时 30 分钟添加到给定日期。只需更改`(7-$w+2)*3600*24`部分即可。

希望有一天它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:24:52.377

```
next_monday() {
  local yi=${1:0:4} mi=${1:5:2} di=${1:8:2}
  mi=${mi#0}
  di=${di#0}
  local yo=$yi mo=$mi do
  do=$(cal -m $mi $yi|awk 'c==1{print$1;exit}NR>2&&/'"$di"'/{c++}')
  if [ "X$do" = X ];then
    ((mo=mi+1))
    if ((mo>12)); then
      ((mo=1,yo=yi+1))
    fi
    do=$(cal -m $mo $yo|awk 'NR>2&&!/^  /{print$1;exit}')
  fi
  printf "%04d-%02d-%02d\n" $yo $mo $do
} 
```

# mysql - 克隆一个条目很少的数据库

> ID：12802062
> 
> 赞同：1
> 
> 时间：2012-10-09T14:15:26.083
> 
> 标签：mysql, tableau-api

有没有办法克隆一个包含数百万条目的数据库，但条目很少`1000`。

我正在创建一个不需要访问大量数据的分析。为此，我正在尝试设置一个与原始数据库具有相同属性但条目很少的小型数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:20:16.110

```
create table small like large;    
insert into table small select * from large limit 1000; 
```

您必须为数据库中的每个表执行此操作，但您应该能够使用命令行中的查询相当轻松地编写脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:02:56.727

一种简单的方法是创建 Tableau 数据提取，并指定原始数据源中要保留在提取中的行的百分比。您还可以应用其他过滤器。

然后，您可以通过提取在一小部分数据子集上快速本地工作来开发您的可视化。然后在您准备好查看输入所有数据后可视化效果如何时切换回原始数据源。

数据提取与数据连接相关联。菜单项的确切位置取决于 Tableau 的版本，但请在“数据”菜单下查看，或右键单击数据连接以查找与提取相关的命令。

# windows - Windows 8 语音转文本和文本转语音 API

> ID：12802065
> 
> 赞同：7
> 
> 时间：2012-10-09T14:15:36.657
> 
> 标签：windows, windows-8, text-to-speech, voice-recognition, speech-to-text

我想这个问题几乎说明了一切？

我不想访问微软翻译和夏威夷项目等云服务？

我可以访问任何直接的 API 吗？

（对于地铁应用程序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T10:07:57.993

Windows 8.1 有一些新的 API：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.media.speechsynthesis.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.speechsynthesis.aspx)

文本转语音示例： [http ://code.msdn.microsoft.com/windowsapps/Speech-synthesis-sample-6e07b218](http://code.msdn.microsoft.com/windowsapps/Speech-synthesis-sample-6e07b218)

//在 Channel9 上构建视频：http: [//channel9.msdn.com/Events/Build/2013/2-171](http://channel9.msdn.com/Events/Build/2013/2-171)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T22:38:42.653

我能够让[Microsoft 语音平台](http://msdn.microsoft.com/en-us/library/hh361572%28v=office.14%29.aspx)在我的 Windows 7 笔记本电脑上运行（语音识别和文本到语音）。您只需要安装 SDK 和运行时。您还可以下载其他语音和语言包。我认为它也应该适用于 Windows 8。[这](http://msdn.microsoft.com/en-us/library/microsoft.speech.recognition.speechrecognitionengine.setinputtodefaultaudiodevice%28v=office.14%29.aspx)是一个很好的示例，说明如何设置它以识别一些基本短语，例如“查找西雅图附近的餐馆”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:51:35.857

.Net 中没有适用于 Windows 8 应用程序的 Text to Speech 或 Speech to text 库。System.Speech 等不可用。您将需要推出自己的或找到兼容的第 3 方库。

我在我的应用程序中使用 Bing Translator 服务，但该服务已被删除，他们将文本翻译服务引入 Azure，但没有带来语音，并且他们禁用了旧网站以获取用于 bing 翻译的 API 密钥。之前没有听说过夏威夷计划，必须去看看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:48:32.650

您现在可以访问 Windows 8 的 Bing 服务，该服务刚刚发布，处于 Beta1 阶段

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T16:20:01.637

[微软的语音 API](http://msdn.microsoft.com/en-us/library/ee125663%28v=vs.85%29.aspx)似乎在 Windows 7 中可用。它是从 Windows 8 中取出的吗？

# rest - 使用 javax.ws.rs jar 代替 Jersey 或 Apache CXF

> ID：12802067
> 
> 赞同：2
> 
> 时间：2012-10-09T14:15:42.650
> 
> 标签：rest, jersey

在 java Rest 实现中，我们是否必须使用 Jersey 或 Apache CXF 或任何其他实现？我的意思是在依赖方面，我只使用了 javax.ws.rs 并且它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:42:39.610

[Jersey](http://jersey.java.net)是用于构建 RESTful Web 服务的开源 JAX-RS (JSR 311) 参考实现。

我经常使用 Jersey，并且，在极少数配置情况下，您不会注意到它——只需使用 JAX-RS。Apache CXF 是为 SOAP 构建并适应 ReST 的，它比 Jersey、IMO 复杂得多。

Jersey Maven 依赖项如下：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.14</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-servlet</artifactId>
    <version>1.14</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:34:23.040

Prasad，javax.ws.rs 只包含 API。它不会单独工作-您需要在其背后进行一些实现。如果您说它目前正在为您工作，可能是因为您正在将它部署到一些已经内置了该 API 实现的服务器（例如 GlassFish、WebLogic 或任何其他符合 JavaEE 6 的服务器 - 因为 JAX-RS是 EE6 的一部分，所有符合 EE6 的应用程序。服务器将具有该 API 的一些实现 - GF 和 WLS 使用 Jersey，JBoss 使用 RESTEasy，其他一些服务器可能使用其他东西）。

# java - 套接字在网络中不起作用

> ID：12802068
> 
> 赞同：2
> 
> 时间：2012-10-09T14:15:43.850
> 
> 标签：java, sockets, exception, connectexception

我正在开发一个通过网络发送文件的应用程序。

我使用 2 个类来发送和接收我选择的文件。

当我在本地主机上工作时，我遇到的问题是进程正常，但是当我将 IP 地址更改为网络 IP 时，它不起作用。

这是我正在使用的两个类。

类服务器：

```
 package Test;

    import java.io.BufferedInputStream;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;
    import java.io.OutputStream;
    import java.net.ServerSocket;
    import java.net.Socket;

    public class Server{
 public static void main (String [] args ) throws IOException {
// create socket
ServerSocket servsock = new ServerSocket(41111);
while (true) {
  System.out.println("Waiting...");

  Socket sock = servsock.accept();
  System.out.println("Accepted connection : " + sock);

  // sendfile
  File myFile = new File ("C:\\Users\\Marrah.Zakaria\\Desktop\\test\\test.txt");
  byte [] mybytearray  = new byte [(int)myFile.length()];
  FileInputStream fis = new FileInputStream(myFile);
  BufferedInputStream bis = new BufferedInputStream(fis);
  bis.read(mybytearray,0,mybytearray.length);
  OutputStream os = sock.getOutputStream();
  System.out.println("Sending...");
  os.write(mybytearray,0,mybytearray.length);
  os.flush();
  sock.close();
  }
}
} 
```

班级客户：

```
 package Test;

 import java.io.BufferedOutputStream;
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.net.Socket;

 public class Client{
 public static void main (String [] args ) throws IOException {
 int filesize=6022386; // filesize temporary hardcoded

 long start = System.currentTimeMillis();
 int bytesRead;
 int current = 0;

Socket sock = new Socket("192.168.1.100",41111);
System.out.println("Connecting...");

 // receive file
 byte [] mybytearray  = new byte [filesize];
 InputStream is = sock.getInputStream();
 FileOutputStream fos = new FileOutputStream("C:\\Test\\test-copy.txt");
 BufferedOutputStream bos = new BufferedOutputStream(fos);
 bytesRead = is.read(mybytearray,0,mybytearray.length);
 current = bytesRead;

do {
   bytesRead =
      is.read(mybytearray, current, (mybytearray.length-current));
   if(bytesRead >= 0) current += bytesRead;
} while(bytesRead > -1);

bos.write(mybytearray, 0 , current);
bos.flush();
long end = System.currentTimeMillis();
System.out.println(end-start);
bos.close();
sock.close();
sock.getPort();
}
} 
```

运行异常后出现：

```
Exception in thread "main" java.net.ConnectException: Connection timed out: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at            java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:208) 
```

请你告诉我我该怎么做才能摆脱它。

* * *

我停用了接收器防火墙，发生了不同的异常：

```
 Exception in thread "main" java.net.ConnectException: Connection refused: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at java.net.Socket.connect(Socket.java:528)
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:208) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:22:12.383

如果你启动服务器，你`telnet`能做到这个组合吗？

```
telnet 192.168.1.100 41111 
```

如果您有路由问题，它会立即告诉您（`telnet`将拒绝连接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:27:41.647

还尝试从您运行客户端的机器上 ping 192.168.1.100（即，如果您在 Windows 框中，则从命令提示符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:21:10.977

您是否检查过网络上是否有防火墙阻止了自定义端口 (41111)（同时检查 Windows 防火墙）？

这是超时时要检查的第一件事。

# c# - 将 Autofac 与 SignalR 一起使用时的范围错误

> ID：12802073
> 
> 赞同：6
> 
> 时间：2012-10-09T14:16:04.037
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, autofac, signalr

我正在尝试`HttpContextBase`在我的 SignalR 集线器中注入一个：

```
public class EventHub : Hub, IDisconnect
{
    private readonly HttpContextBase _httpContextBase;

    public EventHub(HttpContextBase httpContextBase)
    {
        _httpContextBase = httpContextBase;
    }

    [...]
} 
```

注册码如下所示：

```
private static void InitAutofac()
{
    var builder = new ContainerBuilder();

    var assembly = typeof (MvcApplication).Assembly;

    builder.RegisterControllers(assembly).PropertiesAutowired();
    builder.RegisterModule(new AutofacWebTypesModule());
    builder.RegisterFilterProvider();

    builder.RegisterAssemblyTypes(assembly)
        .Where(InterfaceBasedInjectedClasses())
        .AsImplementedInterfaces()
        .InstancePerLifetimeScope();

    builder.RegisterAssemblyTypes(assembly)
        .Where(InterfaceLessInjectedClasses())
        .InstancePerLifetimeScope();

    builder.RegisterType<SurvivalContainer>().InstancePerLifetimeScope();

    builder.RegisterType<EventHub>().InstancePerLifetimeScope();

    var container = builder.Build();

    DependencyResolver.SetResolver(new AutofacDependencyResolver(container));

    GlobalHost.DependencyResolver = new SignalR.Autofac.AutofacDependencyResolver(container);

    RouteTable.Routes.MapHubs();
} 
```

我得到的错误是：

> [DependencyResolutionException：从请求实例的范围中看不到带有与“httpRequest”匹配的标记的范围。这通常表明注册为 per-HTTP 请求的组件正在被 SingleInstance() 组件（或类似场景）请求。在 Web 集成下，始终从 DependencyResolver.Current 或 ILifetimeScopeProvider.RequestLifetime 请求依赖项，而不是从容器本身.]

堆栈跟踪：

```
Autofac.Core.Lifetime.MatchingScopeLifetime.FindScope(ISharingLifetimeScope mostNestedVisibleScope) +160
Autofac.Core.Resolving.InstanceLookup..ctor(IComponentRegistration registration, IResolveOperation context, ISharingLifetimeScope mostNestedVisibleScope, IEnumerable`1 parameters) +57
Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) +102
Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters) +64
Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +164
Autofac.Core.Container.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +14
Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance) +70
Autofac.ResolutionExtensions.TryResolve(IComponentContext context, Type serviceType, Object& instance) +70
SignalR.Autofac.AutofacDependencyResolver.GetService(Type serviceType) in D:\etc\Dev\SignalR.Autofac\AutofacDependencyResolver.cs:30
SignalR.Hubs.DefaultHubActivator.Create(HubDescriptor descriptor) +60
SignalR.Hubs.DefaultHubManager.ResolveHub(String hubName) +27
SignalR.Hubs.HubDispatcher.CreateHub(IRequest request, HubDescriptor descriptor, String connectionId, TrackingDictionary state, Boolean throwIfFailedToCreate) +445
SignalR.Hubs.HubDispatcher.OnReceivedAsync(IRequest request, String connectionId, String data) +246
SignalR.<>c__DisplayClass6.<ProcessRequestAsync>b__4(String data) +29
SignalR.Transports.ForeverTransport.ProcessSendRequest() +63
SignalR.Transports.ForeverTransport.ProcessRequestCore(ITransportConnection connection) +70
SignalR.Transports.ForeverTransport.ProcessRequest(ITransportConnection connection) +5
SignalR.PersistentConnection.ProcessRequestAsync(HostContext context) +560
SignalR.Hubs.HubDispatcher.ProcessRequestAsync(HostContext context) +120
SignalR.Hosting.AspNet.AspNetHandler.ProcessRequestAsync(HttpContextBase context) +422       SignalR.Hosting.AspNet.HttpTaskAsyncHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +68
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

我刚刚开始使用 autofac 和 SignalR，我发现自己有点卡住了。SO上的相关主题都没有帮助。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T23:34:13.070

问题是这一行：

```
builder.RegisterModule(new AutofacWebTypesModule()); 
```

异常消息表明，在解析期间，正在尝试从标记为 的生命周期范围内解析某些内容`httpRequest`。当你注册一些东西时，你会在 Autofac 中得到这样的注册`InstancePerHttpRequest()`：

```
// These two are roughly equivalent:
builder.RegisterType<SomeType>().InstancePerHttpRequest();
builder.RegisterType<SomeType>().InstancePerMatchingLifetimeScope("AutofacWebRequest"); 
```

如果您查看它的来源，`AutofacWebTypesModule`它将 Web 抽象（例如`HttpContextBase`，您正在寻找的东西）注册为`InstancePerHttpRequest`.

此外，如果您查看其`Autofac.Integration.Mvc.AutofacDependencyResolver`工作方式，每当您在请求期间解析类型时，它都会创建一个新的、嵌套的、命名的生命周期范围，并带有`httpRequest`. 这可以让你拥有那种魔力`InstancePerHttpRequest`。

假设`SignalR.Autofac`您使用的库是[这里](https://github.com/thinktecture/SignalR.Autofac)的库，这也是[NuGet 上](http://nuget.org/packages/SignalR.AutoFac)的库），查看[`SignalR.Autofac.AutofacDependencyResolver`](https://github.com/thinktecture/SignalR.Autofac/blob/master/AutofacDependencyResolver.cs)，**没有为服务解析创建这样的嵌套/命名生命周期范围**。

因此，当 Autofac 尝试解决`HttpContextBase`依赖关系时，它找不到该`httpRequest`标记范围（因为它不存在）并发出您看到的错误。

**对此没有简单的答案**。嵌套`httpRequest`范围实际上很重要，因为它基本上不能存在于真实的 Web 请求*之外*。它使它“安全” -`HttpContextBase`如果没有网络上下文（例如，在应用程序启动时），您将无法获得。

如果您需要注入一个`HttpContextBase`并且您确定您`EventHub`只会为一个网络请求而存在，仅此而已（我不是 SignalR 人，所以请耐心等待），这意味着您需要：

*   向 SignalR.Autofac 项目请求修复此问题。
*   实现您自己的自定义 SignalR.Autofac.AutofacDependencyResolver，它以 MVC 解析器的方式处理事情。

如果没有实际完成这项工作并亲自进行测试，我无法真正提供有关如何完成这项工作的具体指导。*这个练习留给读者。*

# perl - XPDF pdftotext 和页码处理

> ID：12802076
> 
> 赞同：0
> 
> 时间：2012-10-09T14:16:17.337
> 
> 标签：perl, cgi, xpdf

使用 perl 来利用 pdftotext 从 pdf 中提取文本。效果很好。我的问题是我正在阅读的 pdf 是多页的，我正在寻找每页顶部特定行的数据。以下代码将两个页面的全部内容转储到一个文件中。因为常量数据（在页面顶部）之后的数据长度会发生变化，所以我无法准确地从第 2 页中提取数据。我将如何先使用 pdftotext 或其他一些实用程序/模块逐步浏览每个页面，然后调用 pdftotext每个页面单独？

```
#!/usr/bin/perl
print "Content-type: text/html\n\n";

print "\n<style>
div.line {width:100%;white-space:nowrap;}
div.line div {width:80px;float:left;}
</style>";

my $i=0;
open FILE, "pdftotext -layout my_multi_page_pdf.pdf - |";

while (<FILE>) {

    $i++;
    my ($line) = $_;
    print "\n<div class=\"line\"><div>$i</div>$line</div>";
}
close FILE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:32:16.390

```
use strict;
use warnings;

my $i       = 0;
my $pageNum = 1;

open my $fh, "pdftotext -layout multipage.pdf - |" or die $!;
print "---------- Begin Page $pageNum ----------\n";

while ( my $line = <$fh> ) {
    if ( $line =~ /\xC/ ) {
        print "\n---------- End Page $pageNum ----------\n";
        $pageNum++;
        print "---------- Begin Page $pageNum ----------\n";
    }

    $i++;
    print "\n<div class=\"line\"><div>$i</div>$line</div>";
}

close $fh; 
```

# openerp - 如何在模块中访问 - OpenERP web/http.py 方法

> ID：12802085
> 
> 赞同：1
> 
> 时间：2012-10-09T14:16:42.643
> 
> 标签：openerp

在 openerp 6.1 windows 中，当人们从 HR 模块登录和注销时，我尝试捕获公共 IP 地址。因此，在 hr_attendance 模块中，我添加了 ip_address 字段。客户端公共 IP 地址在 web\common\http.py environ['REMOTE_ADDR'] 中可用

```
from osv import fields, osv
from web.common.http import Root

class hr_attendance(osv.osv):

  def _get_ipaddress(self, cr, uid, context=None):
    ip = None
    try:
       # environ['REMOTE_ADDR'] how to get 
    except Exception, e:
      pass
    return ip

_inherit = "hr.attendance"
_columns = {
       'ip_address' : fields.char('IP Address', readonly=True, size=64)
        }

_defaults = {
        'ip_address': _get_ipaddress,
    } 
```

hr_attendance()

如何在默认方法中获取客户端 IP 地址或 environ['REMOTE_ADDR"]？我需要在 hr_attendance 模块中覆盖哪个类和方法？

我的疑问是需要在 http.py 中调用哪个方法以及在 HR 模块中传递 get environ['REMOTE_ADDR'] 的参数是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:39:31.740

看起来如果不更改 Web 层可能很难做到，因为模块代码对 Web 服务器层一无所知。经过几分钟的挖掘，我能找到的最好的地方是一个可以将 IP 地址从 HTTP 请求复制到 OpenERP 上下文字典的地方。我认为如果您将此行添加到[`WebRequest.init()`方法](http://bazaar.launchpad.net/~openerp/openerp-web/6.1/view/2479/addons/web/common/http.py#L92)中，它可能会满足您的需求。

```
self.context['remote_addr'] = self.httprequest.remote_addr 
```

我认为该上下文将传递给您可以阅读的模块代码。

# validation - 动态添加自定义验证器

> ID：12802094
> 
> 赞同：2
> 
> 时间：2012-10-09T14:17:10.713
> 
> 标签：validation, jsf, facelets

这是我想要实现的伪代码：

```
<h:inputText id="inputId">
    for -> validatorId : validatorIdArray 
     {
          <f:validator for="inputId" validatorId="#{validatorId}"/>
     }
</h:inputText> 
```

我想动态地将自定义验证器添加到我的输入组件中。我将验证器名称存储在数组或列表中，但到目前为止，我还没有弄清楚如何生成验证器标签。

最好我想要一个完整的 Facelets 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:29:40.993

我尝试先使用`<c:foreach>`，但名称空间错误。现在我纠正了它，它按预期工作：

```
<h:inputText id="inputId">
    <c:forEach items="#{validatorIdArray}" var="validatorId">
        <f:validator for="inputId" validatorId="#{validatorId}"/>
    </c:forEach>
</h:inputText> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T14:33:13.140

如果您使用的是 JSF2，请尝试 f:validateBean

# c# - 将字符串（使用 UTC）转换为 DateTime

> ID：12802099
> 
> 赞同：2
> 
> 时间：2012-10-09T14:17:32.023
> 
> 标签：c#, asp.net-mvc-3, jquery

> **可能重复：**
> [DateTime.ParseExact 格式字符串](https://stackoverflow.com/questions/12675421/datetime-parseexact-format-string)

如何将字符串转换为 DateTime 对象？

例子：

> 2012 年 10 月 7 日星期日 00:00:00 GMT+0500（巴基斯坦标准时间）

我已经尝试过，DateTime.Parse、Convert.TODateTime 等。没有工作。我收到一个错误，指出它不是有效的 DateTime 字符串。

这是我从 jquery 向 MVC 控制器的操作方法发送日期时间的方式：

```
$.ajax({
        url: '@Url.Action("actionMethodName", "controllerName")',
        type: "GET",
        cache: false,
        data: {
               startDate: start.toLocaleString(),
               endDate: end.toLocaleString()
         },
         success: function (data) {
         }
}); 
```

我需要能够在控制器操作方法中获取日期时间：

```
public JsonResult actionMethodName(string startDate, string endDate)
{
        if (!string.IsNullOrEmpty(startDate) && !string.IsNullOrEmpty(endDate))
        {
            var start = DateTime.Parse(startDate); //Get exception here
            var end = DateTime.Parse(endDate);     //Get exception here 
        }

        //Rest of the code
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:36:38.683

我建议您[`.toJSON()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toJSON)在 javascript`Date`实例上使用该方法，以便将它们序列化为[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式：

```
$.ajax({
    url: '@Url.Action("actionMethodName", "controllerName")',
    type: "GET",
    cache: false,
    data: {
        startDate: start.toJSON(),
        endDate: end.toJSON()
    },
    success: function (data) {
    }
}); 
```

现在您不需要在控制器中解析任何内容，您将直接使用日期：

```
public ActionResult ActionMethodName(DateTime startDate, DateTime endDate)
{
    //Rest of the code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:33:51.947

试试`DateTime.ParseExact`方法。在这个例子中，我解析了`(Pakistan Standard Time)`字符串的一部分。

```
var parsedDate = DateTime.ParseExact("Sun Oct 07 2012 00:00:00 GMT+0500", 
    "ddd MMM dd yyyy hh:mm:ss 'GMT'zzz",
    CultureInfo.InvariantCulture); 
```

查看[这些 MSDN 文档](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)以获取更多示例。

# jquery - jquery中实时点击事件的优缺点是什么

> ID：12802108
> 
> 赞同：0
> 
> 时间：2012-10-09T14:18:21.697
> 
> 标签：jquery

> **可能重复：**
> [向页面添加复杂元素时的事件委托与直接绑定](https://stackoverflow.com/questions/8827430/event-delegation-vs-direct-binding-when-adding-complex-elements-to-a-page)

jquery live click事件的优缺点是什么。
最好在 jquery 中使用点击而不是实时点击。
实时点击用于附加后端进程，用于在浏览器中附加更多内存空间。

# javascript - 使用 Safari 在本地下载 blob

> ID：12802109
> 
> 赞同：39
> 
> 时间：2012-10-09T14:18:24.987
> 
> 标签：javascript, html, safari

我正在尝试找到一种跨浏览器的方式在 HTML5 中本地存储数据。我在 Blob 中生成了一大块数据（[请参阅 MDN](https://developer.mozilla.org/en-US/docs/DOM/Blob)）。现在我想将此 Blob 移动到实际的文件系统并保存在本地。我找到了以下方法来实现这一点；

*   使用`<a download>`属性。这目前仅适用于 Chrome。
*   微软`saveAs`在 IE 10 中引入了一个功能来实现这一点。
*   在浏览器中打开 Blob URL 并以这种方式保存。

不过，这些似乎都不适用于 Safari。虽然（1）适用于 Chrome，（2）适用于 IE 和（3）适用于 Firefox，但没有人适用于 Safari 6。下载属性尚未实现，当尝试使用 URL 打开 blob 时，Safari 会抱怨开头的 URL`blob:`是无效的网址。

有一个很好的脚本，它封装了 (1) 和 (3)，称为[FileSaver.js](https://github.com/eligrey/FileSaver.js/)，但在使用最新的 Safari 版本时不起作用。

有没有办法以跨浏览器的方式在本地保存 Blob？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T16:34:32.827

FileSaver.js**最近**更新了，它适用于 IE10、Safari5+ 等。

请参阅：[https ://github.com/eligrey/FileSaver.js/#supported-browsers](https://github.com/eligrey/FileSaver.js/#supported-browsers)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-08T06:50:43.110

文件名很烂，但这在 Safari 8 中对我有用：

```
 window.open('data:attachment/csv;charset=utf-8,' + encodeURI(csvString)); 
```

更新：不再在 Safari 9.x 中工作

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T06:36:08.990

我想出的唯一解决方案是制作一个 data: url 。对我来说，这看起来像：

```
window.open("data:image/svg+xml," + encodeURIComponent(currentSVGString)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-16T09:53:34.687

这里的 data 是在 js 中进行 http rest 调用时来自响应的数组缓冲区数据。这在 safari 中有效，但是文件名可能存在一些问题，因为它是无标题的。

```
var binary = '';
var bytes = new Uint8Array(data);
var len = bytes.byteLength;
for (var i = 0; i < len; i++) {
    binary += String.fromCharCode(bytes[i]);
}

var base64 = 'data:' + contentType + ';base64,' + window.btoa(binary);
var uri = encodeURI(base64);
var anchor = document.createElement('a');
document.body.appendChild(anchor);
anchor.href = uri;
anchor.download = fileName;
anchor.click();
document.body.removeChild(anchor); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-12T16:01:12.867

Have you read this article? [http://updates.html5rocks.com/2012/06/Don-t-Build-Blobs-Construct-Them](http://updates.html5rocks.com/2012/06/Don-t-Build-Blobs-Construct-Them)

Relating to [http://caniuse.com/#search=blob](http://caniuse.com/#search=blob), blobs are possible to use in safari.

You should consturct a servlet which delivers the blob via standard http:// url, so you can avoid using blob: url. Just make a request to that url and build your blob.

Afterwards you can save it in your filesystem or local storage.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-12T16:04:50.723

从 ~safari 10.1 开始支持下载属性，所以目前这是要走的路。

# python - 网站管理员工具 api：如何获取特定日期的热门关键字

> ID：12802111
> 
> 赞同：1
> 
> 时间：2012-10-09T14:18:26.593
> 
> 标签：python, google-search-console

我正在向网站管理员工具发出请求，以获取特定日期的热门关键字。例如 2012-10-01 - 2012-09-01 在我的网站上。有没有办法提出这样的要求？（我正在使用这个库[http://code.google.com/p/webmaster-tools-downloads/](http://code.google.com/p/webmaster-tools-downloads/)来收集数据）

# php - Zend 框架 2 与教义 2 $form->getData() 在控制器中不返回使用 $form->setData() 设置的所有字段

> ID：12802112
> 
> 赞同：1
> 
> 时间：2012-10-09T14:18:34.287
> 
> 标签：php, zend-framework2

我已经使用`$form->setData()`. 验证后，我没有使用`$form->getData()`.

我在控制器中使用以下行，但不知何故`$form->getData()`没有返回所有字段，有人知道为什么吗？

```
 if ($request->isPost()) 
 {  
   $company = new Company();   
   $form->setInputFilter($company->getInputFilter());                        
   $form->setData($request->getPost()); 
   print_r($request->getPost());      // getPost shows all fields fine  
   if ($form->isvalid()) 
   {                   
      print_r($form->getData()); // is returning only select and text type fields which are in input filter. why?
   }
} 
```

我的表格看起来像这样。

```
class Companyform extends Form
{
    public function __construct()
    {        
        parent::__construct('company');

        $this->setAttribute ('method', 'post');
        $this->setAttribute ('class', 'form-horizontal');

        $this->add(array(
           'name' => 'id',
            'attributes' => array(
                'type' => 'hidden'
            ),
        ));

        $this->add ( array (
            'name' => 'title',
            'type' => 'Zend\Form\Element\Select',        
            'attributes' => array(
                'id' => 'title',
                'options' => array(                    
                    'mr' => 'Mr',
                    'miss' => 'Miss',
                    'mrs' => 'Mrs',
                    'dr' => 'Dr'
                ),
                'value' => 'mr'
            ),
            'options' => array(
                'label' => 'Title'
            )
        ));

        $this->add(array(
            'name' => 'fname',            
            'attributes' => array(
                'id' => 'fname',
                'type' => 'text',
                'placeholder' => "First Name",
            ),
            'options' => array(
                'label' => 'First Name'
            )

        ));

        $this->add(array(
            'name' => 'surname',            
            'attributes' => array(
                'id' => 'surname',
                'type' => 'text',
                'placeholder' => "Surname Name",
            ),
            'options' => array(
                'label' => 'Surname Name'
            )

        ));  

        $this->add(array(
           'name' => 'companyName',
            'attributes' => array(
                'id' => 'companyName',
                'type' => 'text',
                'placeholder' => "Company Name",
            ),
            'options' => array(
                'label' => 'Company Name'
            )

        ));

        $this->add(array(
           'name' => 'address1',
            'attributes' => array(
                'id' => 'address1',
                'type' => 'text',
                'placeholder' => "Address Line 1",
            ),
            'options' => array(
                'label' => 'Address'
            )
        ));

        $this->add(array(
           'name' => 'address2',
            'attributes' => array(
                'id' => 'address2',
                'type' => 'text',
                'placeholder' => "Address Line 2",
            ),
            'options' => array(
                'label' => 'Address'
            )
        ));

        $this->add(array(
           'name' => 'address3',
            'attributes' => array(
                'id' => 'address3',
                'type' => 'text',
                'placeholder' => "Address Line 3",
            ),
            'options' => array(
                'label' => 'Address'
            )
        ));
$this->add(array(
            'name' => 'btnsubmit',
            'attributes' => array(
                'id' => 'btnsubmit',
                'type' => 'submit',
                'value' => 'Add',   
                'class' => 'btn btn-primary'
            ),
        ));

    }

} 
```

这是我在实体公司中使用的输入过滤器

```
public function setInputFilter(InputFilterInterface $inputFilter)
{
    throw new \Exception("Not used");
}

public function getInputFilter()
{
    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();

        $factory = new InputFactory();

        $inputFilter->add($factory->createInput(array(
            'name' => 'companyName',
            'required' => true,
            'filters' => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim'),
            ),
            'validators' => array(
                array(
                    'name' => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'min' => 2,
                        'max' => 255,
                    ),
                ),
            ),
        )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:07:38.600

每个表单元素都必须经过验证！即使验证器是空的

```
$inputFilter->add($factory->createInput(array(
    'name' => 'title'
))); 
```

只有经过验证的数据才能从表单中传递。

# web-crawler - scrapy如何用于提取网站的链接图？

> ID：12802114
> 
> 赞同：7
> 
> 时间：2012-10-09T14:18:36.520
> 
> 标签：web-crawler, scrapy

给定一个起始 URL `start`（以及关于允许域等的一些规则），我想生成一个有向图（V，E），其中的节点`V`是可从 到达的页面，并且只要页面上有超链接指向，就会有`start`一个弧到页面。`(u,v)``E``u``v`

有没有一种简单的方法来获得这样的图表`scrapy`？如果它可以更容易/更好地实现目标，我也会很高兴使用另一个开源工具。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T12:59:51.713

我不知道任何工具或贡献可以精确地产生你想要的东西。你必须为此建立一个scrapy spider。我可以在这里解释必要的步骤：

*   创建一个scrapy项目并生成一个默认的spider

    ```
    $ scrapy startproject sitegraph
    $ cd sitegraph
    $ scrapy genspider graphspider mydomain.com 
    ```

*   这将创建一个包含 items.py 文件的目录。在此文件中添加以下行

    ```
    from scrapy.item import Item, Field

    class SitegraphItem(Item):
         url=Field()
         linkedurls=Field() 
    ```

*   在 spiders 目录中，您会发现 graphspider.py 将其替换为（当然 mydomain.com 需要替换）：

    ```
    from scrapy.selector import HtmlXPathSelector
    from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
    from scrapy.contrib.spiders import CrawlSpider, Rule
    from scrapy.utils.url import urljoin_rfc
    from sitegraph.items import SitegraphItem

    class GraphspiderSpider(CrawlSpider):
        name = 'graphspider'
        allowed_domains = ['mydomain.com']
        start_urls = ['http://mydomain/index.html']

        rules = (
            Rule(SgmlLinkExtractor(allow=r'/'), callback='parse_item', follow=True),
        )

        def parse_item(self, response):
            hxs = HtmlXPathSelector(response)
            i = SitegraphItem()
            i['url'] = response.url
            i['http_status'] = response.status
            llinks=[]
            for anchor in hxs.select('//a[@href]'):
                href=anchor.select('@href').extract()[0]
                if not href.lower().startswith("javascript"):
            llinks.append(urljoin_rfc(response.url,href))
            i['linkedurls'] = llinks
            return i 
    ```

*   然后编辑 settings.py 文件并添加（相应地更改文件名）：

    ```
    FEED_FORMAT="jsonlines"
    FEED_URI="file:///tmp/sitegraph.json" 
    ```

*   现在你可以运行：

    ```
    $ scrapy crawl graphspider 
    ```

*   这将生成一个可用于构建图形的 json 文件。

您可以使用 networkx 之类的包来分析它 ot pygraphviz 来绘制它（不推荐用于大型站点）

```
import json
import pygraphviz as pg

def loadgraph(fname):
        G=pg.AGraph(directed=True)
        for line in open(fname):
            j=json.loads(line)
            url=j["url"]
            G.add_node(url)
            for linked_url in j["linkedurls"]:
                G.add_edge(url,linked_url)
        return G

if __name__=='__main__':
        G=loadgraph("/tmp/sitegraph.json")
        G.layout(prog='dot')
        G.draw("sitegraph.png") 
```

# magento - 如何在 Magento 中设置“排序依据”下拉框的样式

> ID：12802115
> 
> 赞同：0
> 
> 时间：2012-10-09T14:18:38.483
> 
> 标签：magento, css

我正在尝试使用 css 在 magento 产品网格页面上设置“排序依据”下拉框的样式。

我认为自己非常擅长使用 css 定位和样式化元素，但是对于我的生活，我无法找到或设置这个下拉框的样式。

我已经使用`input.input-text:focus,select:focus,textarea:focus { background-color:#FFCCFF; }`styles.css 中的第182 行来设计背景。但在鼠标悬停时找不到悬停元素（蓝色）..？

我尝试过设置“选择选项”以及 :focus 和 :hover 的各种组合

我也看过一些 javascript 但在那里看不到任何东西..？

任何帮助将不胜感激实时网址是[http://www.magento.ledgemonkey.com/index.php/shoes.html?dir=asc&order=price](http://www.magento.ledgemonkey.com/index.php/shoes.html?dir=asc&order=price)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:41:00.110

我没有看到这样的表单元素的 :hover 规则集......所以只需添加另一个规则。

```
input.input-text:hover,select:hover,textarea:hover { background-color:#FFCCFF; } 
```

我知道要过多地修改*强大的 magento 样式表是很犹豫的。*但它是你的。发疯。

# esb - esb mule 通过 http 将参数传递给方法

> ID：12802117
> 
> 赞同：1
> 
> 时间：2012-10-09T14:18:44.043
> 
> 标签：esb, mule

我有一个测试方法：

```
@Test
    public void testHello_with_muleXmlConfig() throws Exception {

        MuleClient client = new MuleClient("mule-config-test.xml");
        client.getMuleContext().start();

        MuleMessage result = client.send("http://127.0.0.1:8080/hello", "some data", null);
        assertNotNull(result);

        assertNull(result.getExceptionPayload());
        assertFalse(result.getPayload() instanceof NullPayload);

        assertEquals("hello", result.getPayloadAsString());
    } 
```

这里 (client.send("http://127.0.0.1:8080/hello", "some data", null))，我传递的是参数/data = 'some data'。

我有一堂课：

```
public class HelloWorld {
    public String sayHello() {
        return "hello";
    }
} 
```

在 mule-config.xml 中作为 spring bean 公开：

```
<spring:bean id="helloWorld" class="org.mule.application.hello.HelloWorld"/>

<flow name="HelloWorld">
        <inbound-endpoint address="http://127.0.0.1:8080/hello"/>
        <invoke method="sayHello" object-ref="helloWorld"/>
    </flow> 
```

我应该怎么做才能将参数 'hello' 传递给 'sayHello()' 方法。如果只是将其更改为 'sayHello(String text)' - 它将不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T17:40:58.863

您需要将其添加到调用元素：

```
methodArguments="#[message.getPayload()]" methodArgumentTypes="java.lang.String" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:53:31.587

不确定如何/是否`invoke`有效：我建议您`component`改用。

如果您将方法更改为接受 a `String`，例如：

```
public String sayHello(final String text)
{
    return "hello:" + text;
} 
```

那么您还需要使用`object-to-string-transformer`将入站输入流反序列化为字符串：

```
<flow name="HelloWorld">
    <inbound-endpoint address="http://127.0.0.1:8080/hello" />
    <object-to-string-transformer />
    <component>
        <spring-object bean="helloWorld" />
    </component>
</flow> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-17T17:03:21.983

尝试这个 ：

*   将此添加到您的流程中：

```
<invoke object-ref="helloWorld" method="sayHello" methodArguments="#[message.inboundProperties.'http.query.params'.name]" doc:name="Invoke" />
```

*   这是调用的方法：

    public String sayHello(String name) { return String.format("Hello %s!", name); }

# asp.net-mvc - 带有异常处理应用程序块的 MVC 错误页面

> ID：12802118
> 
> 赞同：0
> 
> 时间：2012-10-09T14:18:43.350
> 
> 标签：asp.net-mvc, exception-handling

在 MVC 应用程序中，我们如何显示标准 MVC 错误页面以及使用 Microsoft 异常处理应用程序块处理异常？

我已经更新了我的 web.config 文件

这会在出现异常时重定向到故障视图。但是异常处理应用程序块（下面的代码）不再处理异常。ExceptionPolicy.HandleException(ex, "AllExceptions", out errorToThrow);

如何显示错误视图以及处理异常？我不想使用 ELMAH。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:35:19.100

更改您的 web.config 文件以显示自定义错误，这样您就可以显示错误页面。

然后为处理异常添加这个函数给你 global.asax：

```
protected void Application_Error(object sender, EventArgs e)
{
    Exception ex = Server.GetLastError();

    //handle the exception
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:19:04.740

使用 Log4net 和 HttpHandler 进行日志记录和错误处理。请参阅以下示例代码。`ExceptionHandler`并用相同的属性装饰控制器。（ `[ExceptionHandler] public class BillsController : Controller { }`）

```
public class ExceptionHandler : HandleErrorAttribute
{
    private static readonly ILog log = LogManager.GetLogger(typeof(ExceptionHandler));

    public override void OnException(System.Web.Mvc.ExceptionContext filterContext)
    {
        log.Debug("******** ExceptionHandler.OnException() *****************");

        base.OnException(filterContext);
        Exception ex = filterContext.Exception;
        if (filterContext.Exception is BusinessException)
        {
            log.Debug("<<<<Inside On BusinessException....>>>>" + DateTime.Now);
            //log.Debug("*** Error Getting From **** " + LOGIN_DETAILS.LoginUserName +
            //          "(UserId = " + LOGIN_DETAILS.LoginUserID + ")" + "Time =" + DateTime.Now);

            BusinessException _BusinessException =
                (BusinessException)filterContext.Exception;

            StringBuilder errormsg = new StringBuilder();
            foreach(MessageInfo msg in _BusinessException.ErrorMessageList)
            {
                errormsg.AppendLine(msg.LocalizedMessage);
            }

            log.Error("<<<<--------BusinessException-------->>>> : Exception Details -----"+ errormsg.ToString());
            //filterContext.ExceptionHandled = true;

            filterContext.ExceptionHandled = true;
            RequestContext rc = new RequestContext(filterContext.HttpContext, filterContext.RouteData);
            string url = RouteTable.Routes.GetVirtualPath(rc, new RouteValueDictionary(new { Controller = "Account", action = "Logout", message = filterContext.Exception.Message })).VirtualPath;
            filterContext.HttpContext.Response.Redirect(url, true);
        }
        else
        {
             log.Error("Exception Details ---- " +
               "MESSAGE: " + ex.Message +
               "\nSOURCE: " + ex.Source +
               "\\Controller: " + filterContext.Controller.ToString() +
               "\nTARGETSITE: " + ex.TargetSite +
               "\nSTACKTRACE: " + ex.StackTrace,
               ex);

            filterContext.ExceptionHandled = true;
            RequestContext rc = new RequestContext(filterContext.HttpContext, filterContext.RouteData);
            string url = RouteTable.Routes.GetVirtualPath(rc, new RouteValueDictionary(new { Controller = "Exception", action = "Default" })).VirtualPath;
            //string url = RouteTable.Routes.GetVirtualPath(rc, new RouteValueDictionary(new { Controller = "exception", action = "Default", message = filterContext.Exception.Message })).VirtualPath;
            filterContext.HttpContext.Response.Redirect(url, true);
        }

    }
} 
```

# c# - WPF处理拖放以及左键单击

> ID：12802122
> 
> 赞同：4
> 
> 时间：2012-10-09T14:19:02.370
> 
> 标签：c#, wpf

我在**`DragDrop.DoDragDrop`**使用左键单击事件时遇到了一些麻烦。

我的控件有几个链接可以拖动或左键单击访问。

我目前订阅了预览鼠标移动事件，如果按下鼠标左键，我将在该事件中启动拖放事件。

在另一个回调中，我处理鼠标左键向下和向上事件以检查点击。有没有办法检查 DragDrop 是否真的发生了拖放事件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T14:24:16.483

请参阅[wpf 中的此链接拖放，端到端解释](https://web.archive.org/web/20100606054305/http://blogs.msdn.com/b/jaimer/archive/2007/07/12/drag-drop-in-wpf-explained-end-to-end.aspx)并向下滚动到“检测拖放”部分

此处插入的代码包含博客丢失...

来自 [ [http://msdn2.microsoft.com/en-us/library/aa289508(vs.71).aspx]](http://msdn2.microsoft.com/en-us/library/aa289508(vs.71).aspx]) 以下是典型拖放操作中的事件序列：

> 通过调用源代码管理的 DoDragDrop 方法来启动拖动。
> 
> DoDragDrop 方法有两个参数：data，指定要传递的数据 allowedEffects，指定允许哪些操作（复制和/或移动）
> 
> 将自动创建一个新的 DataObject 对象。这反过来会引发 GiveFeedback 事件。在大多数情况下，您无需担心 GiveFeedback 事件，但如果您想在拖动过程中显示自定义鼠标指针，您可以在此处添加代码。
> 
> 任何将 AllowDrop 属性设置为 True 的控件都是潜在的放置目标。AllowDrop 属性可以在设计时在“属性”窗口中设置，也可以在 Form_Load 事件中以编程方式设置。
> 
> 当鼠标经过每个控件时，会引发该控件的 DragEnter 事件。GetDataPresent 方法用于确保数据格式适合目标控件，而 Effect 属性用于显示适当的鼠标指针。
> 
> 如果用户在有效的放置目标上释放鼠标按钮，则会引发 DragDrop 事件。DragDrop 事件处理程序中的代码从 DataObject 对象中提取数据并将其显示在目标控件中。

**检测拖放**

在调用 DoDragDrop 之前，我们必须检测源上的鼠标拖动操作...鼠标拖动通常是 MouseLeftButtonDown + MouseMove（在 MouseLeftButton 上升之前）。

所以，我们的拖放源控件需要订阅这两个事件：

```
void Window1_Loaded(object sender, RoutedEventArgs e)
{
    this.DragSource.PreviewMouseLeftButtonDown += new MouseButtonEventHandler(DragSource_PreviewMouseLeftButtonDown);
    this.DragSource.PreviewMouseMove += new MouseEventHandler(DragSource_PreviewMouseMove);
} 
```

为了防止在用户意外拖动的情况下启动错误的拖放操作，您可以使用

> SystemParameters.MinimumHorizo​​ntalDragDistance 和 SystemParameters.MinimumVerticalDragDistance

一种方法是在 MouseLeftButtonDown 上，记录起始位置并 onMouseMove 检查鼠标是否移动得足够远。

```
void DragSource_PreviewMouseMove(object sender, MouseEventArgs e)
{
    if (e.LeftButton == MouseButtonState.Pressed && !IsDragging)
    {
        Point position = e.GetPosition(null);

        if (Math.Abs(position.X - _startPoint.X) > SystemParameters.MinimumHorizontalDragDistance ||
                Math.Abs(position.Y - _startPoint.Y) > SystemParameters.MinimumVerticalDragDistance)
        {
            StartDrag(e); 

        }
    }   
}

void DragSource_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    _startPoint = e.GetPosition(null);
} 
```

它是一个阻力..现在呢？

数据！您需要在拖动时找出鼠标下方的内容。我将省略采取简单的方法并假设触发 MouseMove 的人就是我想要拖动的东西.. 所以看看 MouseEventArgs.OriginalSource.. [或者你可以使用 VisualTreeHelper 做一些 2D HitTesting .. 在这篇文章的第 3 部分将尝试引导您完成对列表框的命中测试——这是我遇到的另一种常见情况——。

一旦有了要拖动的对象，您就需要将要发送的内容打包到描述您正在传递的数据的 DataObject 中。DataObject 是将通用数据（以可扩展格式标识）推送到拖放中的包装器。只要源和目标都理解格式，您将被设置。因此，DataObject 有几个有趣的方法：

> SetData ( Type format, object data ) /// 格式是您传递当天的“格式”（例如 Formats.Text、Formats.Image 等），您可以传递任何自定义类型。
> 
> GetDataPresent ( Type format ) /// 是放置目标用来查询和提取数据的.. 如果是它可以处理的类型，它将调用 GetData () 并处理它..

这里没有太多有趣的东西..在示例中，我只是将我的数据硬编码为字符串类型...这使得粘贴到外部容器中变得更容易（例如 Word，您可以使用它来测试这部分写入-向上）。我必须强调拖放应该与数据有关......在拖放操作期间提供视觉反馈......

在我们调用 DoDragDrop () 之前，我们围绕我们想要提供的反馈和 d&d 的“范围”做出一些“选择”。

> 我们是否希望在进行拖动操作时显示自定义光标？如果我们想要一个游标，它应该是什么？
> 
> 我们想拖多远？在应用程序内还是跨 Windows 应用程序？

最简单的场景：没有自定义光标，我们希望它可以跨应用拖动：

如果你不想要一个花哨的光标，你就完成了！！您可以直接调用 DoDragDrop ...

```
private void StartDrag(MouseEventArgs e)
{
    IsDragging = true;
    DataObject data = new DataObject(System.Windows.DataFormats.Text.ToString(), "abcd");
    DragDropEffects de = DragDrop.DoDragDrop(this.DragSource, data, DragDropEffects.Move);
    IsDragging = false;
} 
```

注意：此代码允许您跨进程拖放，它使用默认的操作系统反馈（例如 + 表示复制）..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:34:18.043

有 Drag Over/Enter/Leave Attached 事件，您可以在拖动的 UIElement 上订阅这些（或一个）事件的方法，并查看是否发生拖动。

# event-handling - 带有动态数据崩溃的jQuery on（）单击事件处理程序

> ID：12802127
> 
> 赞同：1
> 
> 时间：2012-10-09T14:19:12.320
> 
> 标签：event-handling, jquery

这是我想要实现的简化示例：http: [//jsfiddle.net/easLc/](http://jsfiddle.net/easLc/)

HTML

```
<div class="bar">
  <div class="apple"> apple</div>
  <div class="banana"> banana</div>
  <div class="citrus"> citrus </div>
</div> 
```

jQuery

```
function showAlert(event) {
    inventory = event.data.inventory;
    alert(inventory);        
}

fruits = ["apple", "banana", "citrus"];
inventory = [13, 45, 99];

for (i in fruits) {        
    $(".bar ."+fruits[i]).on("click", {inventory:inventory[i]},showAlert);
} 
```

我传递给处理程序的库存数据是动态的，而不是像示例那样是静态的。我从异步调用中获取库存数据。每次更新库存数据后，我想将此数据传递给处理程序，而不是让处理程序再次获取该信息。

我注意到一些点击，处理程序（我认为）正在使我的浏览器崩溃。我是否无意中创建了太多处理程序？如何查看创建了哪些处理程序？或者在点击事件期间会发生什么？我尝试将一些 console.log 添加到处理程序，但在控制台中看不到它们。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:47:23.910

您可以通过在绑定元素后向元素添加某种数据来防止多次绑定（一种干净的方式是一个类，但标准可能首选元数据）：

```
$(".bar ." + fruits[i]).not(".bound").on('click', {...}).addClass('bound'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:09:24.297

尝试

```
$(".bar ."+fruits[i]).off('click',showAlert).on("click", {inventory:inventory[i]},showAlert); 
```

这将删除之前绑定的事件并重新绑定它......但很难确定它是否是问题的真正根源。您可以在 showAlert 中添加一个 console.log('text') 以查看它是否被多次调用。

# java - 我无法在我的代码中启动播放器

> ID：12802134
> 
> 赞同：0
> 
> 时间：2012-10-09T14:19:38.887
> 
> 标签：java, jmf

我正在尝试启动我的代码并启动播放器。但我不能那样做。

```
import javax.media.*;
import java.io.*;

public class MP3Player {

    public static void main(String[] args) throws Exception {
       File file = new File("c://player/trigger.mpg");
       MediaLocator mrl = new MediaLocator(file.toURL());
       Player player = Manager.createPlayer(mrl);
       player.start();
    }

} 
```

**[由 Philipp 编辑]** 根据原作者的评论，Netbeans 打印以下错误消息：

```
Unable to handle format: MPEG, 160x120, FrameRate=30.0, Length=28800 Failed to realize:
com.sun.media.PlaybackEngine@131f71a Error: Unable to realize
com.sun.media.PlaybackEngine@131f71a BUILD SUCCESSFUL (total time: 1 second) 
```

**[/菲利普编辑]**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:25:21.623

我根本不知道 JMF 播放器，但我认为问题是代码在发出命令后立即退出，终止任何其他线程......

我会尝试插入一个 Thread.sleep(1000); 在 player.start() 之后；：

```
public class MP3Player {
    public static void main(String[] args) throws Exception 
    {    
        File file = new File("c:/player/trigger.mpg");    
        MediaLocator mrl = new MediaLocator(file.toURL());    
        Player player = Manager.createPlayer(mrl);    
        player.start(); 
        Thread.sleep(1000);
    } 
} 
```

如果现在听到 MP3 的第一秒，这就是问题所在。

**编辑**另外，有人指出了斜线的问题，路径也应该是正确的，但是斜线并没有丢失，但是斜线太多了……

**EDIT2**好的，我将 mpg 误读为 mp3，并且由于发布者发布了他得到的错误：JMF 不支持视频的格式，您需要一个编解码器。

这可能会有所帮助：[Tek-tips：使用 JMF 播放 MPEG-4 电影？](http://www.tek-tips.com/viewthread.cfm?qid=978659)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:00:28.883

`Unable to handle format: MPEG, 160x120, FrameRate=30.0` 它无法播放它找到的**视频流**。从代码的描述和名称来看，该文件预计仅包含压缩格式 MP3（MPEG-1 音频层 III）的**音频流**。*.mpg 扩展名可能包含许多不同的 mpeg 格式*

# hbase - Hbase drop table的困惑

> ID：12802138
> 
> 赞同：0
> 
> 时间：2012-10-09T14:20:10.667
> 
> 标签：hbase

在Hbase命令行中，当我想创建一个表例如table1，但无法成功时，输出是：“该表已经存在”。然后我删除它，但仍然无法成功，说：“表存在”。所以我很困惑，当我发出 list 命令时，我找不到 table1，但是当我列出 hadoop hdfs 目录时，我可以找到它。所以请您帮忙找出原因。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:01:52.233

为了在 Hbase 中删除表，您需要先禁用它。在您的 hbase shell 中尝试此操作。

```
hbase(main):001:0>help 'drop' 
```

你会知道原因。

```
Drop the named table. Table must first be disabled. If table has
more than one region, run a major compaction on .META.:

hbase> major_compact ".META." 
```

我认为在你的情况下，表并没有完全删除它仍然存在于.meta中。. 如果我错了，请纠正我。

# uitableview - ios6、UITableViewCell 背景

> ID：12802141
> 
> 赞同：4
> 
> 时间：2012-10-09T14:20:22.963
> 
> 标签：uitableview, ios6

我遇到了 ios6 和 UITableViewCell 的问题。没有设置背景色，这是它曾经在 ios5 中工作的

```
-(UITableViewCell *)tableView:(UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = nil;

NSString *contentForThisRow = [[self myArray] objectAtIndex:[indexPath row]];

cell = [tableView dequeueReusableCellWithIdentifier:@"noticeCell"];

if(cell == nil){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"noticeCell"];
}

cell.textLabel.text = contentForThisRow;

id path = [NSString stringWithFormat:@"myip%@.jpeg", IDimage];
NSURL *url = [NSURL URLWithString:path];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img = [[UIImage alloc] initWithData:data];

cell.imageView.image = img;

 cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:15.0];

UIColor *cellBackground = [UIColor colorWithRed:235.0/255.0 green:245.0/255.0 blue:255.0/255.0 alpha:0.25];

cell.accessoryType =  UITableViewCellAccessoryDetailDisclosureButton;
cell.selectionStyle = UITableViewCellSelectionStyleNone;

[cell setBackgroundColor:cellBackground];

return cell;

} 
```

但现在我无法再次设置它！

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T19:03:00.697

采用

```
cell.contentView.backgroundColor= [UIColor blueColor]; 
```

您可以为单元格文本标签背景使用清晰的颜色。

它应该工作。:)

# azure - HTTP 请求超时 Windows Azure 部署

> ID：12802142
> 
> 赞同：3
> 
> 时间：2012-10-09T14:20:33.567
> 
> 标签：azure

我有一个使用 WCF 服务的 MVC 4 网站。当我使用 VS 2012 发布向导部署到 Windows Azure 时，我收到此错误：

上午 10:13:19 - 对“https://management.core.windows.net/42d4257b-5f38-400d-aac5-2e7acee9597d/services/hostedservices/myapp?embed-detail=true”的 HTTP 请求已超过分配的00:01:00 超时。分配给此操作的时间可能是较长超时的一部分。

清理项目并发布几次后，错误就消失了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:49:32.933

每当您从 VS 机器开始发布过程时，首先会建立 SSL 隧道，一旦创建隧道，程序包就会首先从您的机器传输到 Windows Azure 门户。上传完成后，您将看到结果通知被发布回发布结果窗口，这就是它的发生方式。

在您的情况下，构建 SSL 隧道 doe 安全包传输的时间比正常情况要长，这可能是因为您的计算机和 Windows Azure 管理门户之间的网络延迟。出于安全原因，创建隧道较小窗口的时间，如果未创建连接，重试周期将再次启动该过程，即使失败，您也会收到失败消息。这可能是由于任一侧或两侧的流量过多造成的。所以这主要是一个与网络相关的问题，而不是特定于 Windows Azure，因为经过一段时间的连续尝试，您可以上传您的包。

在这种失败/情况下，您可以运行网络捕获实用程序，即[netmon](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=4865)、[wireshark](http://www.wireshark.org/)，并查看失败和成功期间所用的时间，以了解各种传输的不同之处。这将帮助您了解潜在的延迟问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T13:13:04.123

尝试更新您的角色诊断，如下所示

[![更新诊断设置](../Images/254de0163607554731dbed1e2369cadd.png)](https://i.stack.imgur.com/IqkDt.png)

然后更新您的存储凭据，因为它可能已过期。

[![单击配置](../Images/5d7529ecdb37370860e1b50e6bdd2798.png)](https://i.stack.imgur.com/Js3fi.png)

# java - 如何读取 1GB 文件的最后一行 - java

> ID：12802145
> 
> 赞同：1
> 
> 时间：2012-10-09T14:20:37.500
> 
> 标签：java, jakarta-ee, networking

> **可能重复：**
> [Java：快速读取文本文件的最后一行？](https://stackoverflow.com/questions/686231/java-quickly-read-the-last-line-of-a-text-file)

我们的大型机系统正在发送一个包含标题、详细记录和预告片的文件。我只想将这些详细信息记录保存到我的数据库中

1.  该文件是一个有效文件 - 即具有有效标题、详细记录和预告片的文件。
2.  详细记录计数等于拖车记录中的计数。

我的目标是先读取最后一行而不读取整个 1GB 文件。

```
AAGSDBGBBM337 2012-03-16165620000001 - Header format
Detailed Record 1
Detailed Record 2
Detailed Record 3
ZZGSDBGBBM337 2012-03-161656200000010000003 - Trailer format 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:23:24.300

你看过[Apache Commons IO](http://commons.apache.org/io/) [Tailer](http://commons.apache.org/io/api-release/org/apache/commons/io/input/Tailer.html)类吗？

编辑：查看[source](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/Tailer.html)，它似乎只识别附加到文件的新行，而不是让您读取现有文件的最后一行（例如）。所以就目前而言，它是不合适的。但是，在执行初始操作时将其修改为向后看是微不足道的`seek()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:24:08.283

您可以使用的[skip](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#skip%28long%29)方法`FileInputStream`跳过文件的前 n 个字节。您也可以将`RandomAccessFile`用于相同目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:48:06.960

请在 Werner Vesterås 的第一条评论中找到解决了我的问题的链接

其他所有建议都有意义，感谢您的发帖。

# jquery - 条件中的 jQuery height() 以某种方式发生冲突

> ID：12802154
> 
> 赞同：1
> 
> 时间：2012-10-09T14:21:01.577
> 
> 标签：jquery, height, alert

我的条件有问题，检查某个元素是否高于 29。这是我的代码：

```
jQuery('.somepath a span.lines').each(function() {
    var spanHeight = jQuery(this).height();
    alert(spanHeight);
    if(spanHeight > 29) {
        alert('test');  
    }
}); 
```

警报：22、22、22、22、44、测试（这样可以正常工作）

当我删除第一个 alert() 它不再工作了，所以 alert('test'); 不再执行：

```
jQuery('.somepath a span.lines').each(function() {
    var spanHeight = jQuery(this).height();
    if(spanHeight > 29) {
        alert('test');  
    }
}); 
```

我不明白这里出了什么问题。我尝试了很多东西，但我无法让它发挥作用。

有没有人看到或知道这个问题？parseInt() 也不是解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:32:40.490

跨度 `display: inline-block;`它会起作用 -

[**演示**](http://jsfiddle.net/XKgTk/)

```
<span class="lines" style="height: 30px; display: inline-block;">asdf sd fsda</span>​

$('span.lines').each(function() {
    var spanHeight = $(this).height();
    if(spanHeight > 29) {
        alert('test');  
    }
});​ 
```

# php - 如果找不到确切的搜索词，让 SQL 找到最近的结果？

> ID：12802155
> 
> 赞同：0
> 
> 时间：2012-10-09T14:21:06.243
> 
> 标签：php, sql, forms

我正在创建一个搜索肉类包装数据库的多形式搜索框。搜索仅在用户特定时才有效，我希望他们能够搜索数据库而无需选择特定选项。其中三个表单框是供用户搜索宽度、高度和深度所有数值的，但它们仅在用户准确了解尺寸的情况下才会返回结果。如果无法找到与用户输入的值完全匹配的值，我希望搜索能够返回最接近的值。

如：

如果用户在宽度框中输入“252”，则当前将返回“未找到搜索”但数据库中有“251”。因此，如果用户输入“252”，SQL 查询会自动查找最接近的尺寸，然后理论上显示“251”。

这是HTML和PHP：

```
<body>

    <form action="form3.php" method="post"> 
      <label for ="description">Description:</label>
      <input type="text" name="descrip" /><br />

      <label for ="trayheight">Trayheight:</label>
      <input type="text" name="height" /> <br /> 

      <label for ="traywidth">Traywidth:</label>
      <input type="text" name="width" /> <br />

      <label for ="traydepth">Traydepth:</label>
      <input type="text" name="depth" /> <br />

      <label for="trayrange">Trayrange: </label>
                <select name="trayrange">
                    <option value=""></option>

                    <option value="BBQ">BBQ</option>

                    <option value="Dessert">Dessert</option>

                    <option value="Display">Display</option>

                    <option value="Meat">Meat</option>   

                    <option value="Microwave">Microwave</option>

                    <option value="Party">Party</option>

                    <option value="Salad/Wet Pasta">Salad/Wet Pasta</option>

                    <option value="Snacks">Snacks</option>

                    <option value="Standard">Standard</option>

                </select>

        <label for ="traytype">Traytype: </label> 
            <select name="traytype">
                    <option value=""></option>

                <option value="Open">Open</option>

            <option value="Cavitised">Cavitised</option>

                    <option value="Lid">Lid</option>

                    <option value="Tray">Tray</option>

                    <option value="Coallition">Coallition</option>

                    <option value="Bowl">Bowl</option>

                    <option value="Hinge pack">Open</option>

                    <option value="Pot">Pot</option>

                    <option value="Base & Lid">Base and Lid</option>

                    <option value="Rectangular">Rectangular</option>

                    <option value="Specalist">Specialist</option>
            </select><br />

        <label for="trayshape">Trayshape: </label>
            <select name="trayshape">
                    <option value=""></option>

            <option value="Rectangular">Rectangular</option>

                <option value="Oval">Oval</option>

                <option value="Square">Square</option>

                    <option value="Insert">Insert</option>

                    <option value="Round">Round</option>

                    <option value="Open">Open</option>
            </select><br />

        <input type="submit" value="Submit" /> 
    </form> 

    </body> 
```

和 PHP：

```
 <body>

 <?php
    $con = mysql_connect ("localhost", "root", "");
           mysql_select_db ("delyn_db", $con);

    if (!$con)
        { 
         die ("Could not connect: " . mysql_error());
        }

            $descrip = mysql_real_escape_string($_POST['descrip']); 
            $height  = mysql_real_escape_string($_POST['height']);
            $width   = mysql_real_escape_string($_POST['width']);
            $depth   = mysql_real_escape_string($_POST['depth']);

            $varRange = mysql_real_escape_string($_POST['trayrange']);
            $varType  = mysql_real_escape_string($_POST['traytype']);
            $varShape = mysql_real_escape_string($_POST['trayshape']);
            $varImage = mysql_real_escape_string($_POST['imagename']);

            $sql = "SELECT * FROM delyn WHERE 
                        description LIKE '%".$descrip."%' 
                    AND trayheight LIKE '%".$height."%' 
                    AND traywidth LIKE '%".$width."%' 
                    AND traydepth LIKE '%".$depth."%' 
                    AND trayrange LIKE '%".$varRange."%' 
                    AND traytype LIKE '%".$varType."%' 
                    AND trayshape LIKE '%".$varShape."%' ";

            $r_query = mysql_query($sql);

                    while ($row = mysql_fetch_array($r_query))
                { 
                echo '<br /> Tool Code:   '. $row['toolcode'];
                echo '<br /> Description: '. $row['description']; 
                echo '<br /> Tray range:  '. $row['trayrange']; 
                echo '<br /> Tray type:   '. $row['traytype'];
                echo '<br /> Tray size:   '. $row['traysize']; 
                echo '<br /> Tray shape:  '. $row['trayshape'];  
                    echo '<br /> <img src="   '. $row['imagename'] . '"
                                    width="200" length="100">' . '<br />' . '<br />';  
                    }

                if (mysql_num_rows($r_query) <= 0){
                    echo 'No results match your search, please try
                                                  again';
                                  }
        ?>
                </body> 
```

如果有人可以提供帮助，那就太好了，在此先感谢:)

编辑：

```
 <body>
        $scope = 20;
                $width_min = $width - $scope;
                $width_max = $width + $scope;
                $depth_min = $depth - $scope;
                $depth_max = $depth + $scope;
                $height_min = $height - $scope;
                $height_max = $height + $scope;

            $sql = "SELECT * FROM delyn WHERE 
                        description LIKE '%".$descrip."%' 
                    AND traywidth LIKE '%".$width."%'   
                    AND traydepth LIKE '%".$depth."%' 
                    AND trayheight LIKE '%".$height."%'
                    AND trayrange LIKE '%".$varRange."%' 
                    AND traytype LIKE '%".$varType."%' 
                    AND trayshape LIKE '%".$varShape."%'";

                if ($row = 0) {
            $sql = "SELECT * FROM delyn WHERE 
                        description LIKE '%".$descrip."%' 
                    AND (traywidth BETWEEN ".$width_min." AND ".$width_max.")  
                    AND (traydepth BETWEEN ".$depth_min." AND ".$depth_max.")  
                    AND (trayheight BETWEEN ".$height_min." AND ".$height_max.")  
                    AND trayrange LIKE '%".$varRange."%' 
                    AND traytype LIKE '%".$varType."%' 
                    AND trayshape LIKE '%".$varShape."%'";
                }
    <body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:44:31.870

您可以根据表格中的托盘宽度与用户输入的宽度之间的绝对计算对条目列表进行排序，而不是使用固定的“上”和“下”边距。像这样的东西：

```
select d.*, abs(d.traywidth - USER_SEARCH_INPUTTED_WIDTH) as WIDTH_ABS from delyn d order by WIDTH_ABS limit 20; 
```

这将为您提供基于“USER_SEARCH_INPUTTED_WIDTH”的附近托盘宽度列表，例如 252 作为与用户所追求的相对“距离”以及数据库实际具有的条目。

注意：您允许搜索/搜索的所有列都需要签名，否则您最终会得到时髦的结果（由于 abs）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:24:37.513

您可以使用 SQL BETWEEN 运算符。

# javascript - 如何在javascript函数中传递参数

> ID：12802159
> 
> 赞同：1
> 
> 时间：2012-10-09T14:21:14.160
> 
> 标签：javascript, function, parameter-passing

我想将一个参数传递给一个名为`ForPaste()`.

我的功能如下：

```
 var regex = /^[A-Za-z0-9ĀĒĪŌŪāēīōū\.\-\~\`\'' ]*$/;
    var SalaryRegex = /^[A-Za-z0-9\,\.\/\$ ]*$/;
        $.fn.ForPaste = function () {
            return this.each(function () {
                $(this).bind('input propertychange', function () {
                    var value = $(this).val();
                    if (!regex.test(value)) {
                        $(this).val("");
                    }
                });
            });
        }; 
```

这个函数在一个普通的 JS 文件中。它在单个页面上调用。我想根据传递的参数测试正则表达式。那么我能知道`ForPaste()`使用参数调用函数的方法吗？例如，我在函数中`$("#Text1").Forpaste('FromForm1');`得到了这个。`FromForm1``ForPaste()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:26:30.703

你为你的函数定义一个*形式参数*。

```
 // formal parameter--v
$.fn.ForPaste = function (the_value) {

    alert( the_value ); // displays the argument passed

    // rest of your code
}; 
```

传递给的任何值都`ForPaste()`将被`the_value`. *（当然，您可以将名称更改为任何有效的标识符。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:27:10.060

不确定您要做什么，因为答案似乎很明显。这会吗？

```
$.fn.ForPaste = function (theName) {
    if (theName.test(//)){
        return this.each(function () {
            ....
        });
    }
    return false
}; 
```

您可以通过查看`arguments`哪个不是数组但似乎是一个来访问参数。从函数中，您可以执行`var theName=arguments[0]`获取第一个参数的值

# c# - 自定义命令中的 DependencyProperty

> ID：12802162
> 
> 赞同：1
> 
> 时间：2012-10-09T14:21:19.340
> 
> 标签：c#, wpf

我尝试编写一个包装命令类。我想这样使用它

```
<Button Content="Test">
  <Button.Command>
    <local:FileOpenCommand Command="{Binding OpenFile}"/>
  </Button.Command>
</Button> 
```

到目前为止我尝试了什么：

```
public class FileOpenCommand : FrameworkElement, ICommand
{
    public static readonly DependencyProperty CommandProperty =
      DependencyProperty.RegisterAttached("Command",
        typeof(ICommand),
        typeof(FileOpenCommand),
        new FrameworkPropertyMetadata(CommandChanged)
        {
            DefaultValue = new RelayCommand(
               (ob) => MessageBox.Show(ob.ToString()))
        });

    public ICommand Command
    {
        get { return (ICommand)this.GetValue(CommandProperty); }
        set { this.SetValue(CommandProperty, value); }
    }

    public static void CommandChanged(
         DependencyObject d, DependencyPropertyChangedEventArgs e) { /* ... */ }

    public bool CanExecute(object parameter) { /*...*/ }

    public event System.EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        var dlg = new OpenFileDialog();
        if (dlg.ShowDialog())
        {
            Command.Execute(dlg.FileName);
        }
    }
} 
```

这始终显示`DefaultValue`命令中的 MessageBox。绑定`OpenFile`不起作用。我没有收到 BindingExpression 错误，但`Openfile`从未调用过该属性。

编辑：MainWindow 代码

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    public ICommand OpenFile
    {
        get { return new RelayCommand(
                 (obj) => MessageBox.Show("I want to see this!")); }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:20:47.703

你`FileOpenCommand`不是视觉或逻辑树的一部分，因此你没有继承`DataContext`，因此你`Binding`不能工作。尝试使用`ElementName`或设置明确的`Source`. 记住`RelativeSource`遍历树也不会工作。添加`PresentationTraceSources.TraveLevel=High`以自己检查实际问题。

但要清楚，你为什么要尝试这个呢？有什么问题

```
<Button Content="Test" Command="{Binding OpenFile}">
</Button> 
```

# java - JavaFX中的字体测量点

> ID：12802164
> 
> 赞同：1
> 
> 时间：2012-10-09T14:21:21.030
> 
> 标签：java, javafx-2, javafx

我遇到了一个问题。

当我使用 CSS 设置任何节点的字体大小时，无论我选择什么度量单位（我尝试了 pt 和 px），字体大小仍然以像素为单位设置。我还尝试使用“setFont”方法为“Text”设置字体，该方法接受“Font”类型的参数。

JavaFX2 文档中说：

> 字体的大小被描述为以点为单位，实际测量值约为 1/72 英寸。

但是字体大小仍然以像素为单位。

在一个实验中，我在场景中添加了“WebView”并在其中加载了一个页面，在该页面上我显示了两个 div 标签。在第一个 div 中，字体大小以 pt 为单位，而在第二个 div 中，字体大小以 px 为单位。正如我所建议的，字体大小不同，最后一个 div 中的字体大小与我一开始提到的节点中的字体大小相同。

为什么会这样？如何在pt中设置字体大小？此时为了解决这个问题，我使用以下公式将 pt 转换为 px：px=pt/0.75（我的屏幕的 dpi 为 96）。

![在此处输入图像描述](../Images/68d4187e408f8ddf4518202e12aa2680.png)

例子：

```
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.text.FontPosture;
import javafx.scene.text.FontSmoothingType;
import javafx.scene.text.FontWeight;
import javafx.scene.text.Text;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

import java.net.URL;

public class TestFont extends Application {

    @Override
    public void start(Stage stage) throws Exception {

        final Group root = new Group();
        Scene s = new Scene(root, 500, 500);

        Text t = new Text(100, 250, "1) - abcdeABCDE12");
        t.setFontSmoothingType(FontSmoothingType.LCD);
        t.setStyle("-fx-font-size: 36pt; -fx-font-family: Calibri;");
        Text t2 = new Text(100, 300, "2) - abcdeABCDE12");
        t2.setFont(javafx.scene.text.Font.font("Calibri", FontWeight.NORMAL, FontPosture.REGULAR, 36));
        t2.setFontSmoothingType(FontSmoothingType.GRAY);
        Text t3 = new Text(100, 350, "3) - abcdeABCDE12");
        t3.setStyle("-fx-font-size: 36px; -fx-font-family: Calibri;");;
        t3.setFontSmoothingType(FontSmoothingType.GRAY);

        WebView wv = new WebView();
        wv.setLayoutX(100);
        wv.setLayoutY(360);
        URL urlWebViewCell = this.getClass().getResource("/testFont.html");
        wv.getEngine().load(urlWebViewCell.toExternalForm());

        root.getChildren().addAll(wv, t, t2, t3);

        stage.setScene(s);
        stage.show();

    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

测试字体.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>

</head>
<body>
<div style="font-size: 36pt; font-family: Calibri;">4) - abcdeABCDE12</div>
<div style="font-size: 36px; font-family: Calibri;">5) - abcdeABCDE12</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:08:24.040

I think by applying the style the method Font.font(String, double) "only" searches for a font (btw the Font Constructor uses the same size parameter) and is always using the double value as a size value in pixels. So there is no way to choose what measurement you want to have.

So your current why is the best. But you can use:

```
 Toolkit.getDefaultToolkit().getScreenResolution(); 
```

to become independent of the resolution.

# windows-8 - 各种 Windows 8 Metro 应用程序开发方法

> ID：12802166
> 
> 赞同：0
> 
> 时间：2012-10-09T14:21:34.130
> 
> 标签：windows-8, microsoft-metro

我开始开发 Windows 8 Metro 应用程序。似乎有 3 种不同的方法可用于创建一种：

*   C#/XAML
*   C++/XAML
*   JS/HTML5

这些方法是否具有相同的功能和功能？
我的意思是，如果一个人在这三个中的一个中开发一个应用程序，是否可以在其他两个中的任何一个中重新创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:44:59.877

好吧，可以在任何这些平台上构建一个简单的应用程序。他们不会有太大区别。C++ 代码通常更快，如果速度是你的问题的话！有一些像 DatePicker 这样的工具，所有这些工具都只在 JS/HTML 中可用，但在 XAML 中不可用（虽然有替代品）。所以是的！它们每个可用的 API 都有一些差异。

他们是网站上已经存在的一个问题，解释了 C# 和 C++ 之间的区别。我个人更喜欢 C#/XAML，因为它简单舒适。

你可以参考这里：

[在 Windows8 中编写 C#/XAML 与 C++/XAML WinRT 应用程序的优缺点是什么？](https://stackoverflow.com/questions/10031929/what-are-the-pros-and-cons-of-writing-c-xaml-vs-c-xaml-winrt-applications-in)

快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:43:39.593

您可以使用 C# 语言编写基本引擎，使用 HTML5 编写主视图。

如果您了解 Web 开发技术，则可以使用 HTML5、级联样式表、第 3 级 (CSS3) 和 JavaScript 开发 Windows 应用商店应用程序。

如果您已开发 .NET、Windows Presentation Foundation 或 Microsoft Silverlight 应用程序，则可以使用 XAML 开发 Windows 应用商店应用程序，并使用 C++、C# 或 Visual Basic 中的代码隐藏。

如果您了解 DirectX，则可以使用本机 C++ 和 HLSL 开发 DirectX Windows 应用商店应用程序，以充分利用图形硬件。

# asp.net-mvc - 验证前的 ASP.NET MVC 3 更新字段

> ID：12802171
> 
> 赞同：0
> 
> 时间：2012-10-09T14:21:44.783
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我现在遇到的问题是 ASP.NET MVC 验证请求对象，在这种情况下是*用户*

```
public ActionResult Edit(User user) 
```

我想要做的是，如果用户的密码留空，不要更新密码，只需使用旧密码，但如果已设置，请更新它。

问题是框​​架抱怨用户没有密码，即使我更新*用户*对象，它也会抱怨

```
public ActionResult Edit(User user)
{
    user.Password = "Something";

    // more code...
} 
```

显然它对请求对象进行验证，有没有办法在这种情况下跳过验证，或者至少延迟它直到我完成修改用户对象？

这是完整的方法代码

```
[HttpPost]
public ActionResult Edit(User user)
{    
    if (string.IsNullOrEmpty(user.Password))
    {
        var oldUser = db.Users.Single(u => u.Id == user.Id);
        user.Password = oldUser.Password;
    }

    try
    {
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    catch
    {
        return View(user);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:47:42.353

即使您将密码设置为某个值，模型状态仍然无效。之后，尝试使用`ModelState.Clear();`或相应地修改 ModelState 清除模型状态，即仅清除密码属性的错误状态`ModelState.Remove("Password");`

```
[HttpPost]
public ActionResult Edit(User user)
{    
    if (string.IsNullOrEmpty(user.Password))
    {
        var oldUser = db.Users.Single(u => u.Id == user.Id);
        user.Password = oldUser.Password;
        ModelState.Clear(); // or change the state accordingly (ModelState.Remove("Password");)
    }
.......
} 
```

从您的帖子看来，您知道`[Required]`密码字段上的属性。我建议您强制执行 javascript 验证并让用户知道他们无法将密码更新为空白。或者，如果您在不包含密码的表单中更新用户信息，请创建一个没有密码字段的新视图模型或临时模型，并且该模型特定于该表单。发布到这个模型并绑定到这个模型。然后使用临时用户模型中的数据更新实际用户模型。这将是更好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:47:55.483

这里的问题与服务器无关，它是客户端。我假设您在`Required`属性上有一个属性，`Password`因此当 MVC 为模型生成视图时，它会自动生成客户端验证 AKA [Unobtrusive validation](http://weblogs.asp.net/mikaelsoderstrom/archive/2010/10/06/unobtrusive-validation-in-asp-net-mvc-3.aspx)。

您可以编写自己的自定义属性来处理您的特定场景，但是，这意味着您还需要编写自己的客户端验证。这里的简单修复是删除`Required`属性并在服务器端处理验证。

> 我想要做的是，如果用户的密码留空，不要更新密码，只需使用旧密码，但如果已设置，请更新它。

如果是这种情况，那么您的逻辑实际上是错误的。您不应该在 上具有该`Required`属性，`Password`因为您的规则规定它*可以*为空。

# ssas - 重建时未删除 TFS 2010 分析多维数据集的“文件”维度

> ID：12802176
> 
> 赞同：0
> 
> 时间：2012-10-09T14:22:04.150
> 
> 标签：ssas

我对分析多维数据集有疑问 - 它一直在增长。我已经设法将其定位到一个单一的维度，即**版本控制文件**维度（id = 文件），该维度不断增长。问题的症状是（几乎）每次重建时，旧文件（.fact.map 和 .fact.map.hdr 文件）不会被删除。随着时间的推移，这种累积，我达到了数据库达到 146 GB 的不合理大小的地步，其中文件尺寸占了 145 GB！

我的猜测是发生了一些错误，几乎每次重建都会导致操作在进入清理阶段之前停止。

我知道如何通过删除并手动重新创建分析多维数据集来修复这些症状，但我需要了解为什么会发生这种情况以及如何一劳永逸地修复它。

有人知道如何解释/解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:15:15.803

您安装了哪个版本的 SQL Server？我相信这可能已在 2008 R2 的最新 CU 中得到修复。

[http://support.microsoft.com/kb/979778](http://support.microsoft.com/kb/979778)

# scala - Lift - 从 Ajax 表单返回错误并更新父 Div 类

> ID：12802181
> 
> 赞同：2
> 
> 时间：2012-10-09T14:22:28.777
> 
> 标签：scala, lift

我有一个 ajax 表单，它当前正在使用该`S.error()`方法返回错误。这很好，但我还想向元素父 div 标记之一添加一个新的 css 类。我试图用 JE.Call() 方法来做到这一点，但无济于事。有没有人能指出我正确的方向，这将不胜感激。

**片段代码**

```
class Register {

  private var user = User.createRecord
  private var pw2 = ""
  private var dob = ""
  private var errors = new Array[String](7)

  val whence = S.referer openOr "/"
  Thread.sleep(400)

  def registerUser(): JsCmd = {

     errors(0) = User.validateUsername(user.username.is)
     errors(1) = User.validateEmail(user.email.is)
     errors(2) = User.validatePhone(user.phone.is)
     errors(3) = User.validateCity(user.city.is)
     errors(4) = User.validateDOB(dob)
     errors(5) = User.validatePassword(user.uPw.is)
     errors(6) = User.validateSecondPW(user.uPw.is, pw2) 

    if(errors.count(_ != "") == 0) {
      user.uPw.set(User.hashPassword(user.uPw.is, user.id.is.toString))
      user.dob.set(User.stringToDate(dob))
      user.save
      println("User id " + user.id.is.toString + " added to database")
      S.redirectTo(whence)
    }else{
      if(errors(0) != "") 
         S.error("username-error", errors(0))
         JE.Call("addError(username-error)")

         ......

    }
  }

  def form = {
      "id=username" #> SHtml.text("", user.username.set(_), "placeholder" -> "Username") &
      "id=email" #> SHtml.email("", user.email.set(_), "placeholder" -> "Email") &
      "id=phone" #> SHtml.text("", user.phone.set(_), "placeholder" -> "Tel") &   
      "id=city" #> SHtml.text("", user.city.set(_), "placeholder" -> "City") &
      "id=dob" #> SHtml.text("", dob = _, "placeholder" -> "DOB") &
      "id=password" #> SHtml.password("", user.uPw.set(_), "placeholder" -> "Password") &
      "id=passwordCheck" #> SHtml.password("", pw2 = _, "placeholder" -> "Confirm Password") &
      "type=submit" #> SHtml.ajaxSubmit("Register", () => registerUser, "class" -> "btn")
  }

} 
```

**HTML 模板**

```
 <h2>Register</h1>
      <form class="lift:form.ajax?class=form-horizontal">
        <div class="lift:Register.form">

        <div id="id1" class="control-group">
          <label class="control-label" for="username">Username:</label>
          <div class="controls">
            <input id="username">
            <span id="username-error" class="help-inline"></span>                
          </div>
        </div>

        <div class="controls">
          <button type="submit" ></button>
        </div>
      </div>
   </form> 
```

**Javascript 函数**

```
 <script>
    function addError(id) {
      $("#"+id).closest(".control-group").addClass("error");
    }
    addError("email-error")
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:16:06.193

尝试更改呼叫功能。

```
 JE.Call("addError","username-error").cmd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:32:47.923

我建议在 Lift 中放弃 JavaScript 抽象，并在任何地方使用普通的 Run Object。所以在你的情况下，我会使用：

```
Run("addError(username-error)") 
```

# hash - 时间戳的散列

> ID：12802182
> 
> 赞同：1
> 
> 时间：2012-10-09T14:22:34.213
> 
> 标签：hash, timestamp

我需要一个散列函数（也许我不应该称其为“散列”函数）：

1.仅用于哈希时间戳；

2.有**一个反向功能**，我可以通过该功能恢复时间戳；

3.不产生重复的哈希值；

4.不管是不是散列函数，都几乎和散列函数一样快；

PS：关于时间戳的数据类型——C语言中4字节“long”类型的图像。

那可能吗？

（我需要将时间戳**保密**。---事实上，我需要将哈希值作为会话 ID，并将原始时间戳作为数据库中的索引。每当用户使用会话 ID 请求某些内容时，我都可以获得时间戳作为获取请求信息的索引。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:42:05.167

如果您可以跳过 #2 MurmurHash 可能是一个不错的选择：

[https://sites.google.com/site/murmurhash/](https://sites.google.com/site/murmurhash/)

(2) 如果您必须加密/解密，则大多数语言（例如 AES）都有各种算法的标准实现。这将比散列慢得多。

如果您实际上并不需要它来保护数据（这引出了一个问题：为什么要为任何转换而烦恼？）并且只想制作一些易于反转的非时间戳字符串（由您 - 以及任何人否则）然后检查这个问题：

[Rot13 表示数字](https://stackoverflow.com/questions/809137/rot13-for-numbers)

# ios6 - 通过 MPMoviePlayer 播放的 Youtube 视频在 iOS 6 中不起作用

> ID：12802184
> 
> 赞同：3
> 
> 时间：2012-10-09T14:22:35.113
> 
> 标签：ios6, mpmovieplayercontroller

好的，所以我以前使用 MPMOviePlayerController 播放 Youtube 视频，但现在似乎没有在 iOS 6 中播放。

我如何解决它？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:23:40.743

在 iOS 6 上工作时，我发现通过 MPMoviePlayerController 播放 Youtube 视频有困难，所以我发现[这](http://www.cocoacontrols.com/controls/lbyoutubeview)非常有用。

这只有 MPMoviePlayerController ......这也适用于版本 < iOS 6。

希望它有效！

# c - pow() 未定义

> ID：12802185
> 
> 赞同：3
> 
> 时间：2012-10-09T14:22:47.170
> 
> 标签：c

```
#include <stdio.h>
#include <math.h>

void main()
{
    int i, diff, sum = 0, num1 = 6, num2 = 2;

    for(i = 0; i <= 4; i++)
    {
        diff = num1 - num2;
        sum += pow(diff, i);
    }

    printf("%d", sum);
} 
```

每当我尝试执行此程序时，都会弹出一条错误消息说：

> 在函数中`main`：
> 未定义的引用`pow`。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T14:23:48.043

这是链接器故障。您需要链接数学库，`-lm`在编译器命令的末尾指定。从[man pow](http://linux.die.net/man/3/pow)：

> 与 -lm 链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T14:24:25.437

数学库不是 libc 的一部分。您需要链接它：

```
gcc file.c -lm -o file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:26:11.207

该函数`pow()`在数学库中定义。默认情况下，您的编译器不会将您的程序与该库链接，因此链接器无法解析对`pow()`.

要解决此问题，您需要`-lm`在编译/链接行的末尾添加将数学库链接到您的程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:58:16.803

我刚刚在我的 Turbo C 上运行了相同的程序，我得到了 341 的输出。检查你的头文件是否在你的 Turbo C 文件夹的 /include 文件夹中。确保检查它是否包含 Math.h 文件。

# jsf - JSF EL 2.2。参数绑定

> ID：12802189
> 
> 赞同：1
> 
> 时间：2012-10-09T14:23:13.137
> 
> 标签：jsf, el, setter

从 EL 版本 2.2 开始，允许使用以下值表达式：

```
<h:outputText value="#{entry.getRow(column)}" /> 
```

其中列将是另一个变量。最终，在 outputText 上看起来效果很好的东西，我想在 inputText 上重用：

```
<h:inputText value="#{entry.setRow(column)}" /> 
```

“setRow”定义如下：

```
public void setRow(String columnName, String content) {
    // ...
} 
```

我的问题是：这行得通吗？或者更确切地说，我知道这是行不通的，因为我收到关于请求的“setRow”方法不存在的错误。那么，我在这里尝试做的事情一般都有效吗？如果可以，怎么做？

感谢您的任何反馈和最好的问候帕斯卡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:28:40.073

这确实不是“设置”操作的有效表达式。值表达式必须是一个完整的 bean 属性表达式，但你有一个 bean 方法表达式。

您可以使用 a 来实现特定的功能要求`Map`。

```
private Map<String, String> columns = new HashMap<String, String>();

public Map<String, String> getColumns() {
    return columns;
} 
```

和

```
<h:inputText value="#{bean.columns[column]}" /> 
```

在表单提交时，EL 将使用`Map#put()`方法来设置值（因此，地图不需要设置器），然后通过遍历地图条目在操作方法中可用。

# javascript - 关闭 .aspx 作为带有按钮的花式框弹出窗口

> ID：12802192
> 
> 赞同：1
> 
> 时间：2012-10-09T14:23:32.490
> 
> 标签：javascript, jquery, asp.net, fancybox

我有一个 javascript 函数，它制作一个弹出窗口并在弹出窗口中加载一个 .aspx 页面。这是我的代码：

```
function moveEvent(doTheMove) {
        var selectedNotesList = getSelectedNoteIDs();
        if (doTheMove) {
            $.fancybox({
                'autoScale': false,
                'type': 'iframe',
                'height': 225,
                'width': 800,
                'href': 'Utilities/MoveFileTemplate.aspx?eventID=' + selectedNotesList +
                '&oldEventCaseFile=' + $('#hidCaseFile').val(),
                onComplete: function () {
                    $('#fancybox-overlay').unbind();
                },
                onClosed: function () {
                    $("#viewNotesGrid").flexReload();
                }
            });
        }
        else
            showMessage("No expenses are selected.");
    } 
```

在我的 .aspx 页面中，我有 3 个单选按钮、一个 DropDownList 和 2 个按钮。我要做的是在用户单击“取消”按钮时关闭弹出窗口，而不必按右上角的“X”按钮。（当取消按钮被按下时，它必须模仿“X”按钮，以便“onClosed：”可以触发并重新加载我的flexigrid）有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:00:34.890

你可以试试

```
var theBox;
...
function moveEvent(doTheMove) {
...
   theBox = $.fancybox({
      'autoScale': false,
      'type': 'iframe',
      'height': 225,
      'width': 800,
      'href': 'Utilities/MoveFileTemplate.aspx?eventID=' + selectedNotesList +
            '&oldEventCaseFile=' + $('#hidCaseFile').val(),
      onComplete: function () {
         $('#fancybox-overlay').unbind();
      },
      onClosed: function () {
         $("#viewNotesGrid").flexReload();
      }
   });
...
} //close the moveEvent function 
```

然后在你的取消按钮调用的onclick上

```
window.parent.theBox.close(); 
```

编辑（OP）：实际上是： parent.$.fancybox.close();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:34:01.470

客户端

*   窗口.close(); 作为 javascript 代码

编辑：服务器端

*   Page.RegisterStartupScript("anykey","window.close();");

# umbraco - 如何让 Servicestack 身份验证在 Umbraco 安装中工作

> ID：12802194
> 
> 赞同：2
> 
> 时间：2012-10-09T14:23:33.083
> 
> 标签：umbraco, servicestack

我无法让 SS 身份验证与 Umbraco 安装一起工作。每当我使用 Authenticate 属性访问 DTO 或服务时，我都会被重定向到 umbraco 登录。重现：我创建了一个新项目，并从 Nuget 安装了 Umbraco（尝试了 4.7.1、4.8.1 和 4.9.0，结果相同）和来自 Nuget 的 SS。我将 SS 设置为在 web.config 中的 /api 路径下运行：

```
 <location path="api">
    <system.web>
      <httpHandlers>
        <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
      </httpHandlers>
    </system.web>
    <!-- Required for IIS 7.0 -->
    <system.webServer>
      <modules runAllManagedModulesForAllRequests="true" />
      <validation validateIntegratedModeConfiguration="false" />
      <handlers>
        <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
      </handlers>
    </system.webServer>
  </location> 
```

并将 /api 添加到保留路径以避免 Umbraco 处理此问题：

```
<add key="umbracoReservedPaths" value="~/umbraco,~/install/,~/api" /> 
```

在 AppHost.cs 中，我更改了 EndpointHostConfig 并启用了身份验证：

```
 SetConfig(new EndpointHostConfig
   {
       DebugMode = true, //Show StackTraces when developing
       ServiceStackHandlerFactoryPath = "api"
   });

//Enable Authentication
ConfigureAuth(container); 
```

我已经更改了 ConfigureAuth 中的连接字符串以使用 Umbraco 数据库：

```
 var connectionString = ConfigurationManager.AppSettings["umbracoDbDSN"]; 
```

最后我在 HelloWorldService 上设置了属性：

```
[Authenticate]
public class HelloService : ServiceBase<Hello>
{
    protected override object Run(Hello request)
    {
        return new HelloResponse { Result = "Hello, " + request.Name };
    }
} 
```

然后我通过 REST Uri 访问 HelloWorldService：

```
http://localhost:56835/api/hello 
```

我马上被重定向到：

```
http://localhost:56835/apilogin?redirect=http%3a%2f%2flocalhost%3a56835%2fapi%2fhello 
```

并呈现默认的 Umbraco 404 页面，这意味着 SS 突然让 Umbraco 处理身份验证。如果我删除 Authenticate 属性，SS 会完美地处理请求。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:47:58.197

FormsAuthentication 似乎很烦人，当它发现 401 时，它会将其更改为 302 login.aspx。我的解决方案是使用此链接中的想法：http: [//haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)

简而言之，它将 401->302 从 FormsAuthentication 更改回 401。我在检测代码中对其进行了一些更改：

```
 if (response.StatusCode == 401 && request.RawUrl.ToLower().StartsWith("/api")) 
```

并在 web.config 中的 FormsAuthentication 模块之后删除了注册并手动添加

# html - IE8 布局损坏 - IE7 模式正确

> ID：12802195
> 
> 赞同：3
> 
> 时间：2012-10-09T14:23:35.813
> 
> 标签：html, css, css-float

用 IE 的“开发工具”搜索 3-4 小时后，我不明白为什么。

此代码：[https](https://tinker.io/b2c10) : //tinker.io/b2c10 在 IE7 模式、Chrome、Firefox 中正确生成布局。在 IE8 标准模式下，当您缩小视口时，结果如下：

![IE8中的布局损坏](../Images/a68fcf1f3c2a48d16e89ba5d24e7deab.png)

以下是所有其他浏览器（包括 IE7）中的布局方式：

![正确的布局](../Images/dc331f0811588295c4c3c0fce28e8614.png)

不用说，我尝试了所有包括：

*   减小 img 的最大宽度
*   使用 display:inline-block 删除 Who's Who 部分
*   从中间列中完全删除图像...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:21:38.287

Sharepoint 转换我的源 html 的方式似乎存在问题，使其无效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:06:26.783

以一种不太干净的方式，您可以通过在具有该内容的 div 上设置 min-width 开始。这也将有助于防止它在缩小时重叠。另外我认为您可能想要切换到 div 宽度的跨度。我觉得我在向很多人宣传脚手架，但它确实有助于保持良好的扩展性。

```
.ms-WPBody {padding:0;overflow:visible;min-width:190px;} 
```

[http://jsfiddle.net/R8LEE/](http://jsfiddle.net/R8LEE/)

[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T18:15:57.110

p 默认情况下是块，div 使用 float: 对，填充而不是边距....不确定这是如何工作的，你需要改进你的 css 有点花花公子。我建议你回顾一下。

# jquery - 如何通过 jquery 迭代 DOM

> ID：12802196
> 
> 赞同：0
> 
> 时间：2012-10-09T14:23:36.483
> 
> 标签：jquery

**编辑**：对不起，我改写了我的问题

JQuery 新手，需要一些帮助

我想迭代所有 li 元素并删除其中一个 li 中的内部 span 元素。

我不知道跨度在哪里，因为 li 是动态构建的，我不能指望 id 选择器

```
 <ol id="selectable" class="ui-selectable">
        <li id="1_1_1" class="ui-widget-content ui-selectee">1.1.1</li>
        <li id="1_1_2" class="ui-widget-content ui-selectee">1.1.2</li>
        <li id="1_1_3" class="ui-widget-content ui-selectee ui-selected">1.1.3<span class="ui-icon ui-icon-check"
            style="float: right; margin: 2px 7px 0 0;"></span></li>
        <li id="1_1_4" class="ui-widget-content ui-selectee">1.1.4</li>
        <li id="1_1_5" class="ui-widget-content ui-selectee">1.1.5</li>
    </ol> 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:25:26.793

jQuery 通常在内部进行迭代：

```
$("#selectable li").toggleClass(...) 
```

您也可以使用`.each`to 进行迭代，因为某些方法*不会*迭代，例如`.html`and `.text`（不幸的是，我不知道该列表，尽管它会很有帮助）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:25:38.683

**编辑：**要删除跨度，只需执行以下操作：

```
$('#selectable li span').remove(); 
```

请注意，它将删除所有`span`' ，`li`但从您的示例中，只有一个。

试试[toggleClass](http://api.jquery.com/toggleClass/)、[addClass](http://api.jquery.com/addClass/)和[removeClass](http://api.jquery.com/removeClass/)

```
$('#selectable li').addClass('foo');
$('#selectable li').removeClass('foo');
$('#selectable li').toggleClass('foo'); 
```

这些只是更改`li`与选择器匹配的 all 的类的几种方法。

# mysql - 选择具有 MAX 值的行

> ID：12802199
> 
> 赞同：1
> 
> 时间：2012-10-09T14:24:06.000
> 
> 标签：mysql, select, join, max

好吧，我有三个不同的表（检查下面）。我想让我可以看到，这是为每个类别保存的最新图像（req_image_1 等），它不是父级（cat_parent = 0）

一张表，其中包含有关请求的一般信息

```
+----+--------------------------+------------+
| id | req_name                 | req_parent |
+----+--------------------------+------------+
|  3 | Send pack                |         19 |
|  4 | Go Visit                 |         18 |
|  5 | Stop by                  |         19 |
|  6 | Deliver cookies          |         34 |
+----+--------------------------+------------+ 
```

第二个表，其中包含有关请求的元信息

```
+----------+------------+------------+----------------------------+
| umeta_id | request_id | meta_key   | meta_value                 |
+----------+------------+------------+----------------------------+
|       1  |          3 | req_city   | London                     |
|       2  |          3 | req_street | 11 Baker street            |
|       3  |          3 | req_img_1  | a1c8f69edb37bf6c6.jpg      |
|       4  |          4 | req_city   | Manchester                 |
|       5  |          4 | req_street | 71 Main street             |
|       6  |          4 | req_img_2  | a71f4160d7f7f7555.jpg      |
|       7  |          5 | req_city   | Sheffield                  |
|       8  |          5 | req_street | 240 Duke street            |
|       9  |          6 | req_city   | Manchester                 |
|       10 |          6 | req_street | 13 Chapel street           |
|       11 |          6 | req_img_1  | 854b9faaa53d8fe02.jpg      |
+----------+------------+------------+----------------------------+ 
```

第三个表，其中包含有关类别的信息

```
+----+------------------------+------------+
| ID | cat_name               | cat_parent |
+----+------------------------+------------+
|  1 | Category_01            |          0 |
|  6 | Category_02            |          0 |
| 18 | Category_01_01         |          1 |
| 19 | Category_01_02         |          1 |
| 34 | Category_02_01         |          6 |
+----+------------------------+------------+ 
```

到目前为止，我设法通过以下查询获取每个类别的所有图像：

```
SELECT cat.cat_parent AS category, req.ID, meta.meta_value AS image
FROM d_requests req
LEFT JOIN d_requests_meta meta ON ( req.ID = meta.request_id ) 
LEFT JOIN d_categories cat ON ( req.req_parent = cat.ID ) 
WHERE meta.meta_key LIKE 'req_img_%' 
```

我得到了这个结果：

```
+------------+----+-----------------------+
| category   | ID | image                 |
+------------+----+-----------------------+
|          1 |  3 | a1c8f69edb37bf6c6.jpg |
|          1 |  4 | a71f4160d7f7f7555.jpg |
|          6 |  6 | 854b9faaa53d8fe02.jpg |
+------------+----+-----------------------+ 
```

但我想进行增强，所以我只会得到结果，每个类别只有一个图像，例如类别 1，有图像 a71f4160d7f7f7555.jpg，类别 6 有图像 854b9faaa53d8fe02.jpg

我敢打赌，我错过了一些基本知识，使用子查询和选择 MAX 进行简单增强会很有魅力。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:29:57.590

[SQL小提琴](http://sqlfiddle.com/#!2/bfe9a/13)

```
select 
    category, 
    (select request_id 
     from d_requests_meta 
     where umeta_id = s.ID 
    ) as ID,
    (select meta_value 
     from d_requests_meta 
     where umeta_id = s.ID 
    ) AS image
from (
    SELECT cat.cat_parent AS category, max(meta.umeta_id) ID
    FROM d_requests req
    LEFT JOIN d_requests_meta meta ON ( req.ID = meta.request_id ) 
    LEFT JOIN d_categories cat ON ( req.req_parent = cat.ID ) 
    WHERE meta.meta_key LIKE 'req_img_%'
    group by cat.cat_parent
) s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:53:24.703

```
SELECT category, ID, image
FROM (  SELECT cat.cat_parent AS category, req.ID, meta.meta_value AS image
        FROM d_requests AS req
        LEFT JOIN d_requests_meta AS meta
        ON req.ID = meta.request_id
        LEFT JOIN d_categories AS cat
        ON req.req_parent = cat.ID
        WHERE meta.meta_key LIKE 'req_img_%'
        ORDER BY req.ID DESC) AS h
GROUP BY category 
```

我使用非官方的 MySQL 假设编辑了 Clodoaldo 的答案，该假设`GROUP BY`将基于`ORDER BY`子查询返回第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:47:12.893

试试这个[http://sqlfiddle.com/#!2/bfe9a/19](http://sqlfiddle.com/#!2/bfe9a/19)

```
 SELECT Category, ID, Image FROM (
    SELECT Category, ID, Image, 
    @id:=CASE WHEN @category <> category THEN 1 ELSE @id+1 END AS ImgRank,
    @category:=category AS categoryTemp   FROM  
    (SELECT @id:= 0) AS i,
    (SELECT @category:= 0) AS c,    
    (
        SELECT cat.cat_parent AS category, req.ID, meta.meta_value AS image
        FROM d_requests req
        LEFT JOIN d_requests_meta meta ON ( req.ID = meta.request_id ) 
        LEFT JOIN d_categories cat ON ( req.req_parent = cat.ID ) 
        WHERE meta.meta_key LIKE 'req_img_%'
        ORDER BY cat.cat_parent, req.id desc
    ) Vw
  ) vw2 WHERE IMGRANK = 1 
```

# javascript - Google Maps API：带航点的总距离

> ID：12802202
> 
> 赞同：3
> 
> 时间：2012-10-09T14:24:12.833
> 
> 标签：javascript, google-maps

我正在尝试计算其中包含单个航点的路线的总距离，但不知何故，我的代码只返回到第一个航点的距离而不是总距离。

这是我的代码：

```
function calcRoute(homebase,from,to,via){
var start = from;
var end = to;
var wypt = [ ];
wypt.push({
            location:via,
            stopover:true});

var request = {
    origin:start,
    destination:end,
    waypoints:wypt,     
    optimizeWaypoints: true,
    travelMode: google.maps.DirectionsTravelMode.DRIVING,
    unitSystem: google.maps.DirectionsUnitSystem.METRIC
};

directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);

    var distance = response.routes[0].legs[0].distance.text; 
    var time_taken = response.routes[0].legs[0].duration.text; 

    var calc_distance = response.routes[0].legs[0].distance.value; 
  }
});
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T15:54:13.603

您仅获得legs[0] 距离的原因是因为这是您的代码正在计算的内容。您需要总结所有腿的距离：

[http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_totalDist.html](http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_totalDist.html)

**代码片段：**

```
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var chicago = new google.maps.LatLng(41.850033, -87.6500523);
  var myOptions = {
    zoom: 6,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: chicago
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  directionsDisplay.setMap(map);
  calcRoute();
}
google.maps.event.addDomListener(window, 'load', initialize);

function calcRoute() {

  var request = {
    // from: Blackpool to: Preston to: Blackburn
    origin: "Blackpool,UK",
    destination: "Blackburn,UK",
    waypoints: [{
      location: "Preston,UK",
      stopover: true
    }],
    optimizeWaypoints: true,
    travelMode: google.maps.DirectionsTravelMode.WALKING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
      var route = response.routes[0];
      var summaryPanel = document.getElementById("directions_panel");
      summaryPanel.innerHTML = "";
      // For each route, display summary information.
      for (var i = 0; i < route.legs.length; i++) {
        var routeSegment = i + 1;
        summaryPanel.innerHTML += "<b>Route Segment: " + routeSegment + "</b><br />";
        summaryPanel.innerHTML += route.legs[i].start_address + " to ";
        summaryPanel.innerHTML += route.legs[i].end_address + "<br />";
        summaryPanel.innerHTML += route.legs[i].distance.text + "<br /><br />";
      }
      computeTotalDistance(response);
    } else {
      alert("directions response " + status);
    }
  });
}

function computeTotalDistance(result) {
  var totalDist = 0;
  var totalTime = 0;
  var myroute = result.routes[0];
  for (i = 0; i < myroute.legs.length; i++) {
    totalDist += myroute.legs[i].distance.value;
    totalTime += myroute.legs[i].duration.value;
  }
  totalDist = totalDist / 1000.
  document.getElementById("total").innerHTML = "total distance is: " + totalDist + " km<br>total time is: " + (totalTime / 60).toFixed(2) + " minutes";
}
```

```
html {
  height: 100%
}
body {
  height: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas" style="float:left;width:70%;height:100%;"></div>
<div id="control_panel" style="float:right;width:30%;text-align:left;padding-top:20px">
  <div id="directions_panel" style="margin:20px;background-color:#FFEE77;"></div>
  <div id="total"></div>
</div>
```

# php - 遍历数组提取与每个数组不同的值

> ID：12802206
> 
> 赞同：0
> 
> 时间：2012-10-09T14:24:25.693
> 
> 标签：php, arrays, extract

在遍历这些数组时遇到了一些麻烦，我在每个数组 fstransid、前缀、nr 和日期中都有 4 个相同的属性，其余的“名称”、“fsa_code”、“fsa_name”、“debits_acc”和“credits_acc”我想要在以下 5 个数组中提取这些 1->5

解决这个问题的最佳方法是什么？

```
array(18) {
  [0]=>
  array(9) {
    ["fstransid"]=>
    string(4) "4019"
    ["prefix"]=>
    string(3) "PSF"
    ["nr"]=>
    string(3) "854"
    ["date"]=>
    string(10) "2012-06-05"
    ["name"]=>
    string(33) "MY NAME"
    ["fsa_code"]=>
    string(4) "1681"
    ["fsa_name"]=>
    string(17) "asdfasdfasdf"
    ["debits_acc"]=>
    string(6) "546.94"
    ["credits_acc"]=>
    string(4) "0.00"
  }
  [1]=>
  array(9) {
    ["fstransid"]=>
    string(4) "4019"
    ["prefix"]=>
    string(3) "PSF"
    ["nr"]=>
    string(3) "854"
    ["date"]=>
    string(10) "2012-06-05"
    ["name"]=>
    string(33) "MY NAME"
    ["fsa_code"]=>
    string(4) "2621"
    ["fsa_name"]=>
    string(8) "asafafasdfsas"
    ["debits_acc"]=>
    string(4) "0.00"
    ["credits_acc"]=>
    string(5) "60.75"
  }
  [2]=>
  array(9) {
    ["fstransid"]=>
    string(4) "4019"
    ["prefix"]=>
    string(3) "PSF"
    ["nr"]=>
    string(3) "854"
    ["date"]=>
    string(10) "2012-06-05"
    ["name"]=>
    string(33) "MY NAME"
    ["fsa_code"]=>
    string(4) "3540"
    ["fsa_name"]=>
    string(5) "sfdsdfsfssssssssssss"
    ["debits_acc"]=>
    string(4) "0.00"
    ["credits_acc"]=>
    string(5) "60.71"
  }
  [3]=>
  array(9) {
    ["fstransid"]=>
    string(4) "4019"
    ["prefix"]=>
    string(3) "PSF"
    ["nr"]=>
    string(3) "854"
    ["date"]=>
    string(10) "2012-06-05"
    ["name"]=>
    string(33) "MY NAME"
    ["fsa_code"]=>
    string(4) "6060"
    ["fsa_name"]=>
    string(27) "kostnader"
    ["debits_acc"]=>
    string(4) "9.00"
    ["credits_acc"]=>
    string(4) "0.00"
  }
  [4]=>
  array(9) {
    ["fstransid"]=>
    string(4) "4019"
    ["prefix"]=>
    string(3) "PSF"
    ["nr"]=>
    string(3) "854"
    ["date"]=>
    string(10) "2012-06-05"
    ["name"]=>
    string(33) "MY NAME"
    ["fsa_code"]=>
    string(4) "6064"
    ["fsa_name"]=>
    string(12) "asdfasdfasdsdssdssds"
    ["debits_acc"]=>
    string(5) "11.06"
    ["credits_acc"]=>
    string(4) "0.00"
  }
  [5]=>
  array(9) {
    ["fstransid"]=>
    string(4) "4019"
    ["prefix"]=>
    string(3) "PSF"
    ["nr"]=>
    string(3) "854"
    ["date"]=>
    string(10) "2012-06-05"
    ["name"]=>
    string(33) "MY NAME"
    ["fsa_code"]=>
    string(4) "3002"
    ["fsa_name"]=>
    string(35) "assssdsdsdsd"
    ["debits_acc"]=>
    string(4) "0.00"
    ["credits_acc"]=>
    string(6) "445.54"
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:38:25.523

试试这个

```
//$array is your array

//Array with the identical values
$identical_arr = array_slice($array[0], 0, 4);

//Array of repeated values in arrays
foreach ($array as $inner_array) {
  $differ_arr[] = array_slice($inner_array, 4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:38:02.940

您可以使用 foreach，例如：

```
foreach($multi_array 作为 $single_array){

     foreach($single_array as $key => $value){
          echo $key.":".$value;
     }

}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:40:06.433

```
$result = array();
foreach ($arrays as $array) {
   if (!isset($prev_array)) {
      $prev_array = $array;
   }
   else {
      $result = array_intersect_assoc($prev_array, $array);
   }
} 
```

如果您将所有数组放入`$array`，这将遍历它们并根据键/值找到交集（即它将找到键和值相同的数组之间的*所有元素）。*

# sharepoint - 共享点设计器中的 DataView WebPart

> ID：12802207
> 
> 赞同：0
> 
> 时间：2012-10-09T14:24:27.410
> 
> 标签：sharepoint, xslt, sharepoint-2010, sharepoint-designer

我想使用 DataView WebPart 显示列表项，到目前为止我很成功。但我想在每行两列中显示项目，而不是每行一列。我怎样才能做到这一点。

```
<tr>
            <xsl:if test="position() mod 2 = 1">
                <xsl:attribute name="class">ms-alternating</xsl:attribute>
            </xsl:if>
            <xsl:if test="$dvt_1_automode = '1'" ddwrt:cf_ignore="1">
                <td class="ms-vb" width="1%" nowrap="nowrap">
                    <span ddwrt:amkeyfield="ID" ddwrt:amkeyvalue="ddwrt:EscapeDelims(string(@ID))" ddwrt:ammode="view"></span>
                </td>
            </xsl:if>
            <xsl:variable name="ImageURL">
  <xsl:value-of select="@ImageURL" /> 
  </xsl:variable>

            <td class="ms-vb">

                <img alt="" src="{$ImageURL}"  />
                </td>
        </tr> 
```

我想在两列中显示列表中的项目，并且表应该根据项目的数量动态增加。有人可以指导我如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:10:47.387

[实际上，您可以使用Item Lister Web Part](http://www.spwp.net/web-parts/item-lister-web-part.aspx)更轻松地实现这一点。试着检查一下。

# xml - Groovy - 删除无效的 xml 字符

> ID：12802208
> 
> 赞同：1
> 
> 时间：2012-10-09T14:24:30.203
> 
> 标签：xml, groovy

我遇到的最大问题是当用户将内容直接从 WORD 复制到字段中时，导致我生成的 xml 无效。我已经找到了许多不同的方法来解决这个问题，但是从我的 xml 中删除这些无效字符（无论它们是否来自 WORD）的最常规方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:33:27.107

我用一个静态方法编写了一个 Java 类（现在是 7 年前，正在查看时间戳）来尝试清理从 Word 发布的文本。

如果您有兴趣，它就在这里：

```
/**
 * <p>Title: Word Cleaner</p>
 * <p>Description: Strips out all of the rubbish that Word tends to generate (open, close quotes, etc)</p>
 *
 * Based on John Walker's "Demoroniser" Perl script : http://www.fourmilab.ch/webtools/demoroniser/
 */
public class WordCleaner
{
  private WordCleaner() {}

  public static String runWordCleaner( String input )
  {
    StringBuffer sb = new StringBuffer() ;

    int len = input == null ? 0 : input.length() ;
    for( int i = 0 ; i < len ; i++ )
    {
      int c ;
      switch( c = (int)input.charAt( i ) )
      {
        case 0x82 : sb.append( "," ) ; break ;
        case 0x83 : sb.append( "f" ) ; break ;
        case 0x84 : sb.append( ",," ) ; break ;
        case 0x85 : sb.append( "..." ) ; break ;
        case 0x88 : sb.append( "^" ) ; break ;
        case 0x89 : sb.append( "ppt" ) ; break ;
        case 0x8B : sb.append( "<" ) ; break ;
        case 0x8C : sb.append( "Oe" ) ; break ;
        case 0x91 : sb.append( "'" ) ; break ;
        case 0x92 : sb.append( "'" ) ; break ;
        case 0x93 : sb.append( "\"" ) ; break ;
        case 0x94 : sb.append( "\"" ) ; break ;
        case 0x95 : sb.append( "*" ) ; break ;
        case 0x96 : sb.append( "-" ) ; break ;
        case 0x97 : sb.append( "--" ) ; break ;
        case 0x98 : sb.append( "~" ) ; break ;
        case 0x99 : sb.append( "TM" ) ; break ;
        case 0x9B : sb.append( ">" ) ; break ;
        case 0x9C : sb.append( "oe" ) ; break ;
        case 0xA9 : sb.append( "(c)" ) ; break ;
        case 0xAE : sb.append( "(r)" ) ; break ;
        case 0xBC : sb.append( "1/4" ) ; break ;
        case 0xBD : sb.append( "1/2" ) ; break ;
        case 0xBE : sb.append( "3/4" ) ; break ;
        case 8208 : sb.append( "-" ) ; break ;
        case 8209 : sb.append( "-" ) ; break ;
        case 8211 : sb.append( "--" ) ; break ;
        case 8212 : sb.append( "--" ) ; break ;
        case 8213 : sb.append( "--" ) ; break ;
        case 8214 : sb.append( "||" ) ; break ;
        case 8215 : sb.append( "_" ) ; break ;
        case 8216 : sb.append( "'" ) ; break ;
        case 8217 : sb.append( "'" ) ; break ;
        case 8218 : sb.append( "," ) ; break ;
        case 8219 : sb.append( "'" ) ; break ;
        case 8220 : sb.append( "\"" ) ; break ;
        case 8221 : sb.append( "\"" ) ; break ;
        case 8222 : sb.append( ",," ) ; break ;
        case 8223 : sb.append( "\"" ) ; break ;
        case 8226 : sb.append( "*" ) ; break ;
        case 8227 : sb.append( ">" ) ; break ;
        case 8228 : sb.append( "*" ) ; break ;
        case 8229 : sb.append( ".." ) ; break ;
        case 8230 : sb.append( "..." ) ; break ;
        case 8231 : sb.append( "-" ) ; break ;
        case 61514 : sb.append( ":-)" ) ; break ;
        case 61515 : sb.append( ":-|" ) ; break ;
        case 61516 : sb.append( ":-(" ) ; break ;
        default : sb.append( (char)c ) ;
      }
    }
    return sb.toString() ;
  }
} 
```

# c# - 检查给定字符串是否为内置数据类型名称，它们是系统命名空间中预定义类型的别名

> ID：12802209
> 
> 赞同：0
> 
> 时间：2012-10-09T14:24:34.260
> 
> 标签：c#, asp.net, .net, ado.net

如何查找给定字符串是否为内置类型，它们是系统命名空间中预定义类型的别名。
例如：1

```
Input = "System.Int32" (this is string)
OutPut : True(indicating it's Built-In Name) 
```

例如：2

```
Input = "xxx"
Output = False(indicating it's not Built-In Type name) 
```

对此的任何建议都将受到高度赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:26:30.323

假设您要检查类型名称是否属于 sql 类型。框架中没有可用的属性或方法。

但是，如果没有明确设置，您可以执行从to`SqlParameter` [推断转换的操作。](http://www.koders.com/csharp/fid8042FEB31BBB16B0DF17807B715D72930F82C722.aspx)`Type``SqlDbType`

以下方法直接派生自 SqlParameter 的`InferSqlType`：

```
public static bool IsConvertibleToSqlDbType(String type)
{
    switch(type) {
        case "System.Int64":
        case "System.Data.SqlTypes.SqlInt64":
            return true;
        case "System.Boolean":
        case "System.Data.SqlTypes.SqlBoolean":
            return true;
        case "System.String":
        case "System.Data.SqlTypes.SqlString":
            return true;
        case "System.DateTime":
        case "System.Data.SqlTypes.SqlDateTime":
            return true;
        case "System.Decimal":
        case "System.Data.SqlTypes.SqlDecimal":
            return true;
        case "System.Double":
        case "System.Data.SqlTypes.SqlDouble":
            return true;
        case "System.Byte[]":
        case "System.Data.SqlTypes.SqlBinary":
            return true;
        case "System.Byte":
        case "System.Data.SqlTypes.SqlByte":
            return true;
        case "System.Int32":
        case "System.Data.SqlTypes.SqlInt32":
            return true;
        case "System.Single":
        case "System.Data.SqlTypes.Single":
            return true;
        case "System.Int16":
        case "System.Data.SqlTypes.SqlInt16":
            return true;
        case "System.Guid":
        case "System.Data.SqlTypes.SqlGuid":
            return true;
        case "System.Money":
        case "System.SmallMoney":
        case "System.Data.SqlTypes.SqlMoney":
            return true;
        case "System.Object":
            return true;
        default:
            return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:29:08.573

我认为您正在寻找 Assembly.GetType(string)

如果方法返回 null，则程序集不知道类型。

[http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettype.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettype.aspx)

然后，您只需要知道要检查哪个程序集。

~~在您的情况下，看起来 System 程序集就足够了。~~

Jeppe 提出了一个很好的观点，请参阅下面的评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:29:43.020

```
public bool IsBuiltInType(string typeName)
{
  return Type.GetType(typeName, false) != null; 
} 
```

我想这就是你要找的。

[http://msdn.microsoft.com/en-us/library/system.type.gettype.aspx](http://msdn.microsoft.com/en-us/library/system.type.gettype.aspx)

```
 IsBuiltInType("System.Int32"); 
```

上面返回 true，因为它找到了 System.Int32 类型 - 如果它没有找到指定的类型，您也可以抛出错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T14:30:07.533

`Type.GetType("System.Int32", false) != null`会让你知道类型是否存在。但是，它还会检查当前应用程序域中加载的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:50:15.217

这个怎么样：

```
static class TypeHelper
{
  public static readonly IList<string> BuiltInTypeNames;

  static TypeHelper()
  {
    Type[] allBuiltInTypes = { typeof(string), typeof(int), typeof(decimal), }; // add whatever types you consider "built-in".
    BuiltInTypeNames = allBuiltInTypes.Select(t => t.FullName).ToList().AsReadOnly();
  }
} 
```

然后使用输入字符串`input`，您可以说`TypeHelper.BuiltInTypeNames.Contains(input)`获取所需的布尔值（真/假值）。

# ios - 通过 Facebook iOS SDK 3.1.1 将照片上传到 Facebook 时出错

> ID：12802216
> 
> 赞同：4
> 
> 时间：2012-10-09T14:25:06.217
> 
> 标签：ios, facebook, sdk, upload, photo

**我正在开发一个应用程序，它允许用户通过消息将他们的照片上传到 Facebook。但它运行不顺利，有时它运行完美，并且多次返回此错误。**

```
2012-10-09 21:12:41.320 TimeLapse[1724:707] Error: HTTP status code: 200
2012-10-09 21:12:41.329 TimeLapse[1724:707] Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0xf352290 {com.facebook.sdk:ErrorInnerErrorKey=Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo=0xf351840 {NSErrorFailingURLStringKey=https://graph.facebook.com/me/photos?sdk=ios&access_token=.....&migration_bundle=fbsdk%3A20121003&message=Ghh&format=json, NSErrorFailingURLKey=https://graph.facebook.com/me/photos?sdk=ios&access_token=....&migration_bundle=fbsdk%3A20121003&message=Ghh&format=json, NSLocalizedDescription=The request timed out., NSUnderlyingError=0xf3518b0 "The request timed out."}, com.facebook.sdk:HTTPStatusCode=200} 
```

**这是我的代码**

```
-(void)startPostPhotoToFacebook:(UIImage *)image withMessage:(NSString *)message {
    NSArray *arrPermission = [NSArray arrayWithObjects:@"publish_stream", nil];

    if (FBSession.activeSession.state == FBSessionStateOpen) {
        NSLog(@"Session is opened already");
        [self postPhotoToFacebook:image withMessage:message];
    }
    else {
        NSLog(@"Need to open session");

        [FBSession openActiveSessionWithPublishPermissions:arrPermission defaultAudience:FBSessionDefaultAudienceEveryone allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
            if (!error) {
                [self sessionStateChangedForPostPhotoToFacebook:session state:state error:error withImage:image andMessage:message];
            }
            else {
                NSLog(@"Open active session failed");
            }
        }];
    }
}

-(void)sessionStateChangedForPostPhotoToFacebook:(FBSession *)session state:(FBSessionState)state error:(NSError *)error withImage:(UIImage *)image andMessage:(NSString *)message {
    switch (state) {
        case FBSessionStateOpen: {
            [self startPostPhotoToFacebook:image withMessage:message];
        }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
        default:
            break;
    }

    if (error) {
        NSLog(@"error");
    }
}

-(void)postPhotoToFacebook:(UIImage *)image withMessage:(NSString *)message {
    if (message == nil) {
        message = @"";
    }
    NSMutableDictionary *params = [NSMutableDictionary dictionary];
    [params setObject:message forKey:@"message"];

    [params setObject:image forKey:@"source"];

    FBRequest *request = [FBRequest requestWithGraphPath:@"me/photos" parameters:params HTTPMethod:@"POST"];

    FBRequestConnection *fbConnection = [[FBRequestConnection alloc] initWithTimeout:10];
    [fbConnection addRequest:request completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        if (!error) {
            NSLog(@"Result: %@", result);
            [myMainViewController finishPostPhotoToFacebook];
            [fbConnection release];
        }
        else {
            NSLog(@"%@", error.description);
            [myMainViewController errorPostPhotoToFacebook];
            [fbConnection release];
        }
    }];

    [fbConnection start];
} 
```

有人知道怎么修这个东西吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:12:33.580

您正在从 Facebook 看到超时。见说明

```
NSLocalizedDescription=The request timed out., 
```

您的超时设置很短。Facebook SDK 默认超时 180。由于您正在处理图像上传，10 秒可能并不总是足够的。将其设置为更高，例如 30 秒。

# java - 如何显示堆栈溢出站点中的更新消息

> ID：12802220
> 
> 赞同：4
> 
> 时间：2012-10-09T14:25:15.860
> 
> 标签：java, javascript, ajax

我想知道这个堆栈溢出站点中的更新消息是如何实现的。

更准确地说，例如，当我尝试回复问题并且正在输入回复时，我会在页面顶部看到一条消息，说明已添加新答案。这个功能是如何实现的。

AFAIK，可能的方式可以是 HTML5 websocket 或 serversocket 技术。有没有其他方法可以实现这种推送通知系统，尤其是使用 java、spring 和 jquery 环境？

不知道如何标记这个问题。如果我错了，请更正标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:26:27.207

SO 使用[反向 ajax/comet](http://www.ibm.com/developerworks/web/library/wa-reverseajax1/index.html)技术来显示这些消息。我记得读过一些关于此功能的[元](https://meta.stackoverflow.com/)讨论，目前无法准确找到它的链接。找到后会第一时间更新。

基于编程语言的框架名称可能会发生变化（websockets（或）socket.io 等），但最终它们都来自彗星框架。

**更新：**

这是关于这个主题的[SO 元讨论。](https://meta.stackexchange.com/questions/123609/1-question-with-new-activity?lq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:29:40.227

我已经成功使用了 Direct Web Remoting 框架。( [DWR](http://directwebremoting.org/dwr/index.html) )。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T14:33:22.973

有几种方法可以实现：

*   **轮询**：使用 JQuery，您会定期发出一个请求（例如每 5 秒一次），该请求会从服务器检索更新。
*   **流**式传输：您发出请求，服务器没有为响应设置 Content-Length 并且“从不”关闭套接字。这样，您可以随时将数据从服务器发送到客户端。但这意味着对于每个客户端，您的服务器都会保留一个连接。
*   **长轮询**：混合前两种方式。连接由服务器保持，但超时。如果没有可用的新数据，服务器会关闭连接，客户端会在片刻后重新打开一个新数据。

这些是推送技术：[http ://en.wikipedia.org/wiki/Push_technology](http://en.wikipedia.org/wiki/Push_technology)

当然，有很多方法可以实现这一目标。

# c# - 提高 LINQ 枚举器中条件查询的性能

> ID：12802221
> 
> 赞同：2
> 
> 时间：2012-10-09T14:25:20.060
> 
> 标签：c#, performance, linq, linq-to-sql

我有一些看起来像这样的代码，使用 .NET 3.5（客户要求）：

```
void Process (ActionState state)
{
    var orderItemQuery = from OrderItem item in order.OrderItems
                           orderby item.OrderLineNumber ascending
                           select item;

    foreach (OrderItem item in orderItemQuery)
    {
        ActionData actionData;
        switch (state)
        {
            case ActionState.Prepare:
                actionData = (
                    from ActionData ad in db.ActionDataTable
                      where ad.ObjectId == item.ProductId
                      select ad
                ).First();

            case ActionState.QualityCheck:
                actionData = (
                    from ActionData ad in db.ActionDataTable
                      where ad.ObjectId == item.OrderItemId
                      select ad
                ).First();

            default:
                throw new InvalidOperationException();
        }

        // ...
    }
} 
```

本质上，第一个查询的结果是迭代的，并且使用特定的外键从数据库中获取`ActionData`记录，基于当前的`ActionState`. 实际上，这里和那里有更多的嵌套和一些检查，但本质上是相同的。

这最初对测试数据库很有效，但是一个客户只是给我发了一份他们的实时数据的副本，而且速度非常慢。运行整个批次大约需要 15 分钟，包括其他一些处理。通过性能测试器运行代码后，我发现整个过程中最慢的部分是`.First()`对每个案例的调用。

如果这是纯 SQL，我会根据 的值在循环外编译一个存储过程`state`，然后使用它。既然我做不到，那还有什么办法呢？我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:01:39.373

您的问题是您的代码对 db 执行了 100500 个请求。你需要在一个请求中得到你想要的。为此，您需要编写正确的 linq 查询。像这样的东西：

```
if(state!=ActionState.Prepare&&state!=ActionState.QualityCheck)
    throw new InvalidOperationException();
var orderSelector = state == ActionState.Prepare
                             ?o=>o.ProductId
                             :?o=>o.OrderItemId
var orderWithActionQuery  = order.OrderItems.Orderby(o => o.OrderLineNumber).GroupJoin(
        db.ActionDataTable,
        orderSelector,
        ad => ad.ObjectId,
        (x, y) => new { item = x, actionDatas = y })
        .Select(c => new {item = c.item, actionData = c.actionDatas.FirstOrDefault()});    
foreach(var orderWithActionData in orderWithActionQuery)
{
     //orderWithActionData.item is orderItem
     //orderWithActionData.actionData is ation data of this item
} 
```

在此代码中，对数据库的请求将按照 foreach 发送。这将是单个请求，性能会很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:46:24.817

问题是您为循环中的每个项目调用数据库。
您应该将查询一起烘焙到一个查询中。
这样，查询应该作为数据库上的一个大型查询来执行，并且应该从 SQL 服务器中获取结果。

您可以通过使用 SQL Profiler 轻松发现问题并查看大量`select x,y,z,... from ActionData`查询。

此选项将 OrderItem 和 ActionData 都选择为包含这两个值的临时匿名类型。

```
void Process (ActionState state)
{
    var orderItemQuery = from OrderItem item in order.OrderItems
                           orderby item.OrderLineNumber ascending
                           select item;
    var orderItemWithActionDataQuery = 
                from item in orderItemQuery
                select new{Item = item,
                           ActionData = (
                    from ActionData ad in db.ActionDataTable
                      where ad.ObjectId == item.ProductId
                      select ad
                ).First()};

        switch (state)
        {
            case ActionState.Prepare:
                // done
                break;

            case ActionState.QualityCheck:
                orderItemWithActionDataQuery = 
                from item in orderItemQuery
                select new{Item = item,
                           ActionData = (
                    from ActionData ad in db.ActionDataTable
                      where ad.ObjectId == item.OrderItemId
                      select ad
                ).First()};

            default:
                throw new InvalidOperationException();
        }

    foreach (var combinedItem in orderItemWithActionDataQuery)
    {
        OrderItem item = combinedItem.Item;
        ActionData actionData = combinedItem.ActionData;

        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:50:00.023

您可能想要分析您的查询。我怀疑您遇到了 n+1 问题，因为每次调用 .First 时都会点击您的数据库。由于您在循环中执行此操作，因此您的数据库可能会看到过多的命中。评估循环外的状态，并在没有循环的情况下根据状态设置单独的查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:51:58.150

您可能会发现这非常有效：

不要将您的 Select 放入 For 循环中，而是生成一个 OrderItemIds 数组并使用 Array.Contains();

```
void Process (ActionState state)
{
    var orderItemQuery = from OrderItem item in order.OrderItems
                           orderby item.OrderLineNumber ascending
                           select item;

    IEnumerable<ActionData> actionDatas = null;

    if (state ==  ActionState.Prepare)
    {
        var productIds = orderItemQuery.Select(o => o.ProductId).ToArray();
        actionDatas = db.ActionDataTable.Where(a => productIds.Contains(a.ObjectId));
    }
    else if(state == ActionState.QualityCheck)
    {
        var orderItemIds = orderItemQuery.Select(o => o.OrderItemId).ToArray();
        actionDatas = db.ActionDataTable.Where(a => orderItemIds.Contains(a.ObjectId));
    }
    else
    {
        throw new InvalidOperationException();
    }

        // Do stuff against the complete list of actionDatas without requerying.
    }
} 
```

# mysql - 选择提供完全相同部分的 sid 对的查询：

> ID：12802225
> 
> 赞同：3
> 
> 时间：2012-10-09T14:25:27.327
> 
> 标签：mysql, sql

我在 MySQL 中有以下关系：

```
Suppliers(**sid**; sname; city),
Parts(**pid**; pname; color),
Catalog(**sid**; **pid**; cost), 
```

键在 *.

我想找到：

1.  供应商对 (s1; s2) 使得 s1 和 s2 提供完全相同的零件。
2.  提供至少两个其他人不提供的零件的供应商。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:37:55.770

非常感谢您的回复。我自己写了以下查询，但我不确定它是否正确。请告诉我。谢谢。

1)

选择 T1.sid，T2.sid

从 T1、T2

哪里（选择 T1.sid，C2.pid

```
 FROM( SELECT c1.pid

       FROM Catalog C1

       GROUP BY c1.sid) AS T1, Catalog C2

  WHERE T1.sid=c2.sid) 
```

=

```
(SELECT   T2.sid, C4.pid

   FROM( SELECT c3.pid

       FROM Catalog C3

       GROUP BY c3.sid) AS T2, Catalog C4

  WHERE T2.sid=c4.sid) 
```

2)

选择 T1.S

从 T1

WHERE NOT EXISTS(( SELECT c1.sid AS S, c1.pid AS p1, C2.pid AS p2

```
 FROM catalog AS C1, Catalog as C2

            WHERE c1.sid=c2.sid AND

            C1.pid<>c2.pid) AS T1

        EXCEPT

        ( SELECT c3.sid AS S1, c3.pid AS p3, C4.pid AS p4

           FROM catalog AS C3, Catalog as C4

           WHERE c3.sid=c4.sid AND

            c3.pid<>c4.pid) AS T2) 
```

不存在（（选择 c3.sid 作为 S1，c3.pid 作为 p3，C4.pid 作为 p4

```
 FROM catalog AS C3, Catalog as C4

           WHERE c3.sid=c4.sid AND

            c3.pid<>c4.pid) AS T2)

        EXCEPT

        (SELECT c1.sid AS S, c1.pid AS p1, C2.pid AS p2

           FROM catalog AS C1, Catalog as C2

            WHERE c1.sid=c2.sid AND

            C1.pid<>c2.pid) AS T1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:43:24.767

1\. 供应商对 (s1; s2) 使得 s1 和 s2 供应完全相同的零件：

```
select c1.sid,c2.sid
from catalog c1 join catalog c2 on c1.pid = c2.pid and c1.sid < c2.sid 
          and not exists 
          (
             select 1 
             from catalog c3 join catalog c4 
             on c3.sid = c1.id and c4.id = c2.sid 
                               and c3.pid <> c4.pid
          ) 
```

2.供应商至少提供两个其他人不提供的零件。

```
select c1.sid
from catalog c1 join catalog c2 on c1.sid = c2.sid and c1.pid < c2.pid 
          and not exists 
          (
             select 1 
             from catalog  
             where sid <> c1.sid and (pid = c1.pid or pid = c2.pid)
          ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:44:43.440

```
SELECT supplier_1, supplier_2
FROM (  SELECT c.sid AS supplier_1, c2.sid AS supplier 2, COUNT(*) AS total, COUNT(c2.sid) AS connected
        FROM Catalog AS c
        LEFT JOIN Catalog AS c2
        ON c.sid != c2.sid AND c.pid = c2.pid
        GROUP BY c.sid, c2.sid) AS h
GROUP BY LEAST(supplier_1, supplier_2), GREATEST(supplier_1, supplier_2) 
```

我想像这样的事情会成功。基本上只是`LEFT JOIN`根据不等于同一个供应商和相等的部分id做一个，然后看看连接的数量是否等于没有成功连接的行数。

# c# - EntityFramework：IQueryable 或 IEnumerable 是否首先获得所有结果？

> ID：12802226
> 
> 赞同：1
> 
> 时间：2012-10-09T14:25:28.467
> 
> 标签：c#, entity-framework, linq-to-sql, entity-framework-4, linq-to-entities

我了解到 IQueryable 或 IEnumerable 数据类型首先不会返回结果，仅在需要时才返回它们。但是，当我在手表检查器中打开该对象时，我看到所有对象都在那里。

**我的代码有什么问题，或者它只是因为我在手表上调用它而显示？**

[当我在监视对话框中查看**挂起**对象时，我看到了所有列表项，但它不应该首先加载。我的接近有什么问题，还是只是因为我在手表上调用了它而显示出来。]

```
 public IQueryable<PurchasePendingView> PurchasePendings() {
            var pendings = db.PurchasePendingViews
                             .Where(m => m.AccountStatusID != StructAccountStatus.Succeed); // when I view it in the watch dialougebox I saw all the list items but it shouldn't load at the first place. Is there anything wrong in my approaching or is it just showing because I had call it on the watch. 
            if (ApplicationEnvironment.DEBUGGING) {
                return pendings;
            } else if (IsMobileAccount()) {
                var showroom = db.ShowRooms.FirstOrDefault(m=> m.MemberID == employee.MemberID);
                if (showroom != null) {
                    return pendings.Where(m => m.ShowRoomID == showroom.ShowRoomID);
                } else {
                    return pendings.Where(m => m.CountryDivisionID == employee.CountryDivisionID);
                }
            } else { 
                //normal salary employee can see every detail
                return pendings;
            }
        } 
```

**注意：目前我的延迟加载已关闭。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:26:54.990

在您第一次遍历结果时评估集合。

由于您正在遍历手表检查器中的结果，因此将对它们进行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:04:58.233

这比解释更容易演示：

```
public class MeanException : Exception
{
    public MeanException() : base() { }
    public MeanException(string message) : base(message) { }
}
public static IEnumerable<T> Break<T>(this IEnumerable<T> source)
    where T : new()
{
    if (source != null)
    {
        throw new MeanException("Sequence was evaluated");
    }
    if (source == null)
    {
        throw new MeanException("Sequence was evaluated");
    }

    //unreachable

    //this will make this an iterator block so that it will have differed execution,
    //just like most other LINQ extension methods
    yield return new T();
}

public static IEnumerable<int> getQuery()
{
    var list = new List<int> { 1, 2, 3, 4, 5 };

    var query = list.Select(n => n + 1)
        .Break()
        .Where(n => n % 2 == 0);

    return query;
} 
```

那么，我们这里有什么。我们有一个自定义异常，因此我们可以独立捕获它。我们有一个扩展方法，`IEnumerable<T>`它总是会在评估序列后立即抛出异常，但它使用延迟执行，就像`Select`and一样`Where`。最后，我们有一个获取查询的方法。我们可以在调用之前和之后看到一个 LINQ 方法`Break`，并且我们可以看到 a`List`被用作底层数据源。（在您的示例中，它可能是内存中的某个集合，或者是一个将查询数据库然后在迭代时迭代结果的对象。）

现在让我们使用这个查询，看看会发生什么：

```
try
{
    Console.WriteLine("Before fetching query");
    IEnumerable<int> query = getQuery();
    Console.WriteLine("After fetching query");
    foreach (var number in query)
    {
        Console.WriteLine("Inside foreach loop");
    }
    Console.WriteLine("After foreach loop");
}
catch (MeanException ex)
{
    Console.WriteLine("Exception thrown: \n{0}", ex.ToString());
} 
```

如果您运行此代码，您将看到查询之前的打印（显然）查询之后的打印（意味着我们只是从方法返回查询并且从未抛出平均异常），然后是异常的消息抛出（意味着我们从未进入或超过 foreach 循环的末尾。

这显然是一个人为的例子来展示一个概念，但这是你在实践中经常看到的东西。例如，如果您在创建数据上下文后失去与数据库的连接，则在迭代查询之前您实际上不会得到异常，或者如果您的数据持有者对象已过期并且不再与数据库匹配' 将在同一点获得异常。在一个不太明显的示例中，如果您长时间保留查询，您将在获取查询结果时得到数据，而不是在构建时得到数据。这是另一个演示：

```
var list = new List<int> { 1, 2, 3, 4, 5 };

var query = list.Where(num => num < 5);
Console.WriteLine(query.Count());

list.RemoveAll(num => num < 4);
Console.WriteLine(query.Count() 
```

这里我们有一个数据列表，并计算小于 5 的项目数（它是 4）。然后我们修改列表（完全不改变`query`）。我们重新查询`query`并最终计数为 1。

# c++ - 使用 libjpeg 解码期间的无损 JPEG 旋转

> ID：12802231
> 
> 赞同：1
> 
> 时间：2012-10-09T14:25:50.103
> 
> 标签：c++, rotation, orientation, jpeg, libjpeg

我有一个[简单的 C++ 应用程序](https://github.com/psobot/smartcrop)，它可以使用 libjpeg 解码 JPEG - 但是，它处理的一些图像是横向出现的！这些输入图像具有由相机烘焙到 EXIF 数据中的方向，但似乎在解压缩期间，libjpeg 没有像许多 JPEG 查看器那样考虑方向标志。

有没有办法让 libjpeg 在解压缩过程中尊重 JPEG 的方向，还是我必须解析这个方向标签并手动旋转图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:29:50.767

libjpeg 中的 transupp.h 头文件定义了无损旋转的 API。还包括 jpegtran.c，作为示例的可执行文件的源代码。

# emacs - Emacs：使用特定 shell 运行 ansi-term 的键盘快捷键

> ID：12802236
> 
> 赞同：3
> 
> 时间：2012-10-09T14:26:04.430
> 
> 标签：emacs

我想在 Emacs 中关联一个键盘绑定（例如`C-c a`），它会自动启动一个 ansi-term 窗口和我在`.emacs`文件中预先指定的 shell（不提示任何内容）

作为参考，StackOverflow 中有两个线程可以解决类似的问题：

*   [来自 Emacs 的远程 ssh 连接](https://stackoverflow.com/questions/10495432/remote-ssh-connection-from-within-emacs/10536794#10536794)
*   [Emacs：使用 Mx ansi-term 运行的默认二进制文件](https://stackoverflow.com/questions/12679743/emacs-default-binary-to-run-with-m-x-ansi-term)

但对我来说，如何结合这些线程中的想法来回答我的问题并不明显。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T14:35:19.710

`(global-set-key (kbd "C-c a") '(lambda () (interactive) (ansi-term "/bin/zsh")))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:13:39.243

我建议你使用[multi-term](http://emacs-fu.blogspot.fr/2010/06/console-apps-in-emacs-with-multi-term.html)。顾名思义，它可以让您使用 ansi-term 处理多个术语。

这是一个小配置：

```
(require 'multi-term)
(eval-after-load "multi-term"
                 '(setq multi-term-program "/bin/bash"
                   term-unbind-key-list '("C-x"
                                          "C-h"
                                          "M-x"
                                          "C-z")
                   term-term-name "xterm-256color"))
(global-set-key (kbd "C-c a") 'multi-term-next) 
```

我的多术语的整个配置都 [在这里](https://github.com/daimrod/Emacs-config/blob/master/config-multi-term.el) （`compilation-shell-minor-mode`非常好）。

# c - (const char *str) 、 (char const *str) 和 (char *const str) 有什么区别？

> ID：12802237
> 
> 赞同：4
> 
> 时间：2012-10-09T14:26:05.170
> 
> 标签：c, pointers, constants

> **可能重复：**
> [char * const 和 const char * 有什么区别？](https://stackoverflow.com/questions/890535/what-is-the-difference-between-char-const-and-const-char)
> [const char * const 与 const char *?](https://stackoverflow.com/questions/4949254/const-char-const-versus-const-char)

当我们在 c 中定义一个函数时，我们可以使用 (const char *str) 、 (char const *str) 或 (char *const str) 作为变量。它们之间有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T14:30:07.637

前两个是等价的，`const char *str`都`char const *str`声明`str`为指向 char 常量的指针（这意味着不应修改 char 本身），第三个`char *const str`声明 str 为**常量指针**（意味着一旦分配它就应该' t 被改变）到 a `char`（它本身可以自由修改）。

一篇关于如何阅读类型声明的有趣文章在[这里](http://c-faq.com/decl/spiral.anderson.html)，如果你想检查它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T14:29:18.540

`char const * str`并且`const char * str`是相同的，因为 const 适用于其左侧的术语，或者，如果左侧没有类型，则适用于右侧的术语。这就是为什么你在`const char const *`. 两者都是常量字符上的指针。您可以更改指针的值，但不能更改取消引用的值：

```
const char * my_const_str;
my_const_str = "Hello world!"; // ok
my_const_str[0] = "h"; // error: my_const_str[0] is const! 
```

`char * const`另一方面是一个常量指针。您不能更改指针，但可以更改指针取消引用的值。

```
char * const my_const_ptr = malloc(10*sizeof(char));
my_const_str[0] = "h"; // ok
my_const_str = "hello world"; // error, you would change the value of my_const_str! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T14:38:48.740

将 C 声明读作：

从变量开始。向右看，向左看，然后再向右看（就像在英国过马路一样）。当您看到`*`您说“指向”时，当您看到`[]`您说“数组”时，当您看到`()`您说“函数”时，等等。在您的示例中，右侧没有任何内容；

`const char *str` “str 是一个指向 char 的指针，它是常量”

`char const *str` “str 是一个指向常量字符的指针”（同上）

`char *const str` “str 是一个指向 char 的常量指针”

```
char ch = 'x';
const char cch = 'y';

const char *str = &cch;
char const *str = &cch;
char * const str = &ch; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T14:28:28.683

```
const char * str1: declare str as pointer to const char
char const * str2: declare str as pointer to const char
char * const str3: declare str as const pointer to char 
```

所以在前两种情况下，指针是可变的，但指针引用的数据不是。

在最后一种情况下，指针是不可变的，但里面的数据是可变的。

那么，让我们看一些操作：

```
str1[0];      // legal;
str1[0] += 3; // illegal;
str1 = NULL;  // legal;

str3[0];      // legal;
str3[0] += 3; // legal;
str3 = NULL;  // illegal; 
```

# magento - magento - 在自定义模块中包含核心功能

> ID：12802243
> 
> 赞同：1
> 
> 时间：2012-10-09T14:26:20.820
> 
> 标签：magento

我最近为 magento 制作了我的前几个简单模块。基本上只是尝试制作一个打印'hi'的模块。然后一个包含网站设计，最后一个将它自己的块插入内容区域以打印一些东西。

现在，我真正想要的这个模块是能够列出产品（使用与正常产品列表相同的布局），但基于 ID。就像来自 cookie 或作为示例，产品 ID 的静态数组。

我将如何尽可能地重用产品列表代码并为其保留主题？此外，如果我想在布局中更改一些小细节 - 我如何动态/以编程方式进行小的模板调整？

这甚至是正确的方法吗？创建一个新模块并以某种方式在其中包含现有功能？还是我应该尝试重新创建产品列表并模仿设计？

我知道很多问题，但是除了最简单的模块之外，很难找到相关信息。TIA。

# c++ - OpenCV 子矩阵问题（短类型）

> ID：12802246
> 
> 赞同：2
> 
> 时间：2012-10-09T14:26:26.420
> 
> 标签：c++, opencv, matrix, short, submatrix

在创建一个取自更大矩阵的新（子）矩阵时，我遇到了一个问题，我希望有人能帮我一把。

我已将问题缩小到以下小代码片段：

```
cv::Mat* rightBestX;
rightBestX = new cv::Mat(4, 4, CV_16UC1); // short matrix

// fill rightBestX matrix with values

const cv::Rect r2(0, 0, 2, 2);
cv::Mat x = rightBestX->operator()(r2);
cv::Mat_<short> leftBestXRegion = x; // x is not equal to cv::Mat_<short>, according template<typename _Tp> inline Mat_<_Tp>& Mat_<_Tp>::operator = (const Mat& m)
//cv::Mat_<short> leftBestXRegion = results.leftBestX->operator()(r2); 
```

以上似乎适用于浮点类型矩阵，但当我使用 short 时则不行。

这个想法是不复制数据，而是使用 rightBestX 的数据引用。它已成功复制到 x。但是，在执行最后一行代码时，它就丢失了（与 x 不同）。x 的引用计数也为 2，而 leftBestXRegion 的引用计数为 1...

同样，这适用于花车。有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:23:35.660

尝试使用`ushort`而不是`short`. 另外，检查你是否正确地填充了你的矩阵（我只是说因为我运行它并且它对我来说很好，即使使用`short`）

# excel - 使用VBA将计算结果输出到Excel中的多个单元格

> ID：12802255
> 
> 赞同：6
> 
> 时间：2012-10-09T14:26:51.187
> 
> 标签：excel, user-defined-functions, vba

我使用 VBA 在 excel 中编写一个函数，该函数将搜索列表以查找某些名称，当某些要查找的名称出现时计数，然后将这些计数器值输出到各个单元格。

当我有一个多单元函数时，如何将值分配给函数本身？我在同一列中选择了彼此相邻的 4 个单元格并按 CTRL-SHFT-ENTER 以获得多单元格函数我只是不知道如何将结果分配给该函数，以便它显示在选定的单元格中。到目前为止我所做的如下所示：

```
Function ROM(ByVal lookup_value As Range, _
ByVal lookup_column As Range, _
ByVal return_value_column As Long) As String 

Application.ScreenUpdating = False

Dim i As Long
Dim resultCount As Long
Dim resultsArray() As String
Dim arraySize As Long
Dim myrange As Range
Dim results As String
Dim TSS As Long
Dim OSS As Long
Dim AWS As Long
Dim JLI As Long
Dim answers(1 To 3, 1 To 1) As Variant

' The following code works out how many matches there are for the lookup and creates an
' array of the same size to hold these results

Set myrange = lookup_column
arraySize = Application.WorksheetFunction.CountIf(myrange, lookup_value.Value)
ReDim resultsArray(arraySize - 1)

' A counter for the results

resultCount = 0
TSS = 0
OSS = 0
AWS = 0
JLI = 0

' The equipment ID column is looped through and for every match the corresponding Equipment Type is
' saved into the resultsArray for analysis

For i = 1 To lookup_column.Rows.count
    If Len(lookup_column(i, 1).Text) <> 0 Then
        If lookup_column(i, 1).Text = lookup_value.Value Then

                ' If statement to ensure that the function doesnt cycle to a number larger than the
                ' size of resultsArray

                If (resultCount < (arraySize)) Then
                    resultsArray(resultCount) = (lookup_column(i).Offset(0, return_value_column).Text)
                    results = (lookup_column(i).Offset(0, return_value_column).Text)
                    resultCount = resultCount + 1
                        ' The following code compares the string to preset values and increments
                        ' the counters if any are found in the string

                        If (InStr(results, "TPWS TSS") > 0) Then
                            TSS = TSS + 1

                        ElseIf (InStr(results, "TPWS OSS")) Then
                            OSS = OSS + 1

                        ElseIf (InStr(results, "JUNCTION INDICATOR (1 Route)") > 0) Then
                            JLI = JLI + 1

                        ElseIf (InStr(results, "AWS")) Then
                            AWS = AWS + 1

                        End If

                 End If
        End If
    End If
Next

 answers(1, 1) = TSS
 answers(1, 2) = OSS
 answers(1, 3) = AWS
 answers(1, 4) = 0

  ROM = answers    

Application.ScreenUpdating = True

End Function 
```

当我尝试运行该功能时，它一直说答案的类型不匹配。为多单元格公式选择的单元格是 F18、G18、H18 和 I18。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:18:18.813

从 VBA 返回数组函数

1.  您的函数必须是 Variant 类型
2.  您的输出数组必须与所选范围相匹配 - 在您的情况下，它必须是一维的，而您正在标注二维数组

试试这个

```
Function MyArray() As Variant
Dim Tmp(3) As Variant

    Tmp(0) = 1
    Tmp(1) = "XYZ"
    Tmp(2) = 3
    Tmp(3) = 4

    MyArray = Tmp

End Function 
```

现在选择 F18..I18，输入 =MyArray() 并按 Ctrl+Shift+Enter

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T16:46:16.057

这可能因您使用的 Excel 版本而异。我正在使用 Office2003 套件，上面介绍的解决方案不适用于此版本的 Excel。

我发现您需要一个二维数组输出到 Excel，其中包含第二个维度中的值。

我将借用上面 MikeD 的示例并对其进行修改以在 Excel2003 中工作。

```
Function MyArray() As Variant
Dim Tmp() As Variant

redim Tmp(3,0) as Variant

Tmp(0,0) = 1
Tmp(1,0) = "XYZ"
Tmp(2,0) = 3
Tmp(3,0) = 4

MyArray = Tmp

End Function 
```

请注意，您可以重新划分数组以使用动态输出，但在将函数插入 Excel 时，您必须选择足够大的范围以包含所有输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:22:47.897

首先，您得到类型不匹配，因为您试图将结果分配给字符串。如果您分配给 Variant，您将避免该问题。

其次，您的`answers`数组的尺寸应为：

`Dim answers(3) As Variant`

如果我正确理解了问题，以下代码应该对您有用。

```
Function ROM(ByVal lookup_value As Range, _
ByVal lookup_column As Range, _
ByVal return_value_column As Long) As Variant

Application.ScreenUpdating = False

Dim i As Long
Dim resultCount As Long
Dim resultsArray() As String
Dim arraySize As Long
Dim myrange As Range
Dim results As String
Dim TSS As Long
Dim OSS As Long
Dim AWS As Long
Dim JLI As Long
Dim answers(3) As Variant

' The following code works out how many matches there are for the lookup and creates an
' array of the same size to hold these results

Set myrange = lookup_column
arraySize = Application.WorksheetFunction.CountIf(myrange, lookup_value.Value)
ReDim resultsArray(arraySize - 1)

' A counter for the results

resultCount = 0
TSS = 0
OSS = 0
AWS = 0
JLI = 0

' The equipment ID column is looped through and for every match the corresponding Equipment Type is
' saved into the resultsArray for analysis

For i = 1 To lookup_column.Rows.Count
    If Len(lookup_column(i, 1).Text) <> 0 Then
        If lookup_column(i, 1).Text = lookup_value.Value Then

                ' If statement to ensure that the function doesnt cycle to a number larger than the
                ' size of resultsArray

                If (resultCount < (arraySize)) Then
                    resultsArray(resultCount) = (lookup_column(i).Offset(0, return_value_column).Text)
                    results = (lookup_column(i).Offset(0, return_value_column).Text)
                    resultCount = resultCount + 1
                        ' The following code compares the string to preset values and increments
                        ' the counters if any are found in the string

                        If (InStr(results, "TPWS TSS") > 0) Then
                            TSS = TSS + 1

                        ElseIf (InStr(results, "TPWS OSS")) Then
                            OSS = OSS + 1

                        ElseIf (InStr(results, "JUNCTION INDICATOR (1 Route)") > 0) Then
                            JLI = JLI + 1

                        ElseIf (InStr(results, "AWS")) Then
                            AWS = AWS + 1

                        End If

                 End If
        End If
    End If
Next

 answers(0) = TSS
 answers(1) = OSS
 answers(2) = AWS
 answers(3) = 0

  ROM = answers

Application.ScreenUpdating = True

End Function 
```

# spring - AbstractApplicationContext 中方法 start() 的用法

> ID：12802256
> 
> 赞同：1
> 
> 时间：2012-10-09T14:26:53.547
> 
> 标签：spring

我是弹簧用户。我开始阅读spring的源代码。

当我阅读 AbstractApplicationContext 时，我发现有一个方法 start()，我发现初始化 ApplicationContext 时没有调用该方法。

我的问题：1）该方法的用途是什么？根据这个词的（开始）含义，我认为应该在 ApplicationContext 可以工作之前调用它。但事实并非如此。

2）如何监听 applicationContext 开始工作的事件？看了代码，发现方法会发布ContextStartedEvent。但是如果我只是初始化上下文，上下文仍然可以工作并且不发布事件。我无法监听事件来跟踪应用程序上下文的开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:57:24.673

该`start`方法是[Lifecycle](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/Lifecycle.html)接口的一部分，在应用程序启动过程中被调用。

如果您想在上下文启动时收到通知，您应该声明一个实现 Lifecycle 接口的 bean。

```
public class org.example.MyLifecycle implements Lifecycle {
    private boolean started = false;
    public boolean isRunning() {
        return started;
    }
    public void start() {
        System.err.println("MyLifecycle starting");
        started = true;
    }
    public void stop() {
        System.err.println("MyLifecycle stopping");
        started = false;
    }
} 
```

然后

```
<bean class="org.example.MyLifecycle"/> 
```

默认情况下，这一切都由[DefaultLifecycleProcessor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/support/DefaultLifecycleProcessor.html)处理，除非上下文中有一个`lifecycleProcessor`实现[LifecycleProcessor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/LifecycleProcessor.html)接口的 bean

# android - Android：Http GET 请求连接失败

> ID：12802260
> 
> 赞同：4
> 
> 时间：2012-10-09T14:27:18.260
> 
> 标签：android, image, http, get

我是 Android 编程的新手，真的可以在我正在编写的程序中使用一些帮助来建立 Http 连接并显示图像。

我正在使用 Wei-Meng Lee 的“Beginning Android Application Development”一书。代码编译并且没有错误标记但是每次我运行程序时都会出现“错误连接”消息并且没有显示图像。

我查看了 GET 请求的各种代码示例，但找不到适用于我的代码的任何内容。

任何人都可以提供的任何帮助将不胜感激，因为到目前为止我正在努力寻找任何解决方案。

关于使用权限的最后一行代码包含在清单中。

```
ImageView image;

private InputStream OpenHttpConnection(String urlString)
throws IOException {
    InputStream in = null;
    int response = -1;

    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();

    if(!(conn instanceof HttpURLConnection))
        throw new IOException("Not an HTTP Connection");

    try {
        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();
        response = httpConn.getResponseCode();
        if (response == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream();
        }
    }
    catch (Exception ex) {
        throw new IOException("Error connecting");
    }
    return in;

}

private Bitmap DownloadImage(String URL) {
    Bitmap bitmap = null;
    InputStream in = null;
    try {
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in);
        in.close();
    }
    catch (IOException e1) {
        Toast.makeText(this, e1.getLocalizedMessage(), Toast.LENGTH_LONG).show();
        e1.printStackTrace();
    }
    return bitmap;
}                                                                                                                                                                       

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_network);

    Bitmap bitmap = DownloadImage("http://www.mayoff.com/5-01cablecarDCP01934.jpg");
    image = (ImageView) findViewById(R.id.image);
    image.setImageBitmap(bitmap);

}

<uses-permission
    android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:40:04.167

也许问题是由于 api 版本而导致的。您必须使用 AsyncTask 类来访问 Web 功能。

这可能与在 apis 11 及更高版本中不允许在主线程中访问网络有关，您可能必须使用 ASYNC 任务。

使用 ASYNC 任务的示例；

```
class InternetFileCheack extends AsyncTask<Object, Void, Boolean> {

  private Button btn;
  private String fileURL;
  Context c;

  public InternetFileCheack (Button imv, String url, Context ctx) {
   this.btn = imv;
   this.fileURL = url;
   this.c = ctx;
  }

  @Override
  protected Boolean doInBackground(Object... params) {
   Boolean sonuc = null;
   try {
    URL u = new URL(fileURL);
    HttpURLConnection huc = (HttpURLConnection) u.openConnection();
    huc.setRequestMethod("HEAD");
    huc.connect();
    int code = huc.getResponseCode();

    if (code == HttpURLConnection.HTTP_OK) {
     sonuc = true;
    } else {
     sonuc = false;
    }
   } catch (Exception e) {
    sonuc = false;
   }
   return sonuc;
  }

  @Override
  protected void onPostExecute(Boolean result) {
   btn.setEnabled(result);

   if (result) {
    Toast.makeText(c, "", Toast.LENGTH_LONG).show();
    btn.setVisibility(View.VISIBLE);
   } else {
    btn.setVisibility(View.GONE);
   }
  }
 } 
```

# joomla - Joomla 管理面板显示错误“JERROR_ALERTNOTEMPLATE 您无权查看此资源。”

> ID：12802261
> 
> 赞同：0
> 
> 时间：2012-10-09T14:27:21.537
> 
> 标签：joomla

一年前我一直在使用 Joomla。几天前，我对文件进行了一些更改，然后管理面板开始显示错误：

```
"JERROR_ALERTNOTEMPLATE You are not authorised to view this resource." 
```

我无法弄清楚解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:23:42.920

首先，让我先说，您不应该**编辑**核心 Joomla 文件，原因如下：

1.  它们可能会在 Joomla 更新期间被覆盖。
2.  它可能会导致错误，例如您当前遇到的错误。
3.  它可能会破坏其他功能。
4.  它可能会导致安全问题。

我建议你做的是，下载 Joomla 的新副本，但只解压缩“管理员”、“包含”和“库”文件夹。然后，将这些文件夹上传到 FTP，以便它们覆盖当前文件夹。

# ruby-on-rails - Ruby，从文本中获取第一张图片

> ID：12802268
> 
> 赞同：3
> 
> 时间：2012-10-09T14:27:50.037
> 
> 标签：ruby-on-rails, ruby, parsing

在 Ruby 类中，我想解析并获取保存在数据库中的某些文本中第一次出现的图像。特别是，我想收集所有`src`属性。

Nokogiri 会帮助我吗？我该怎么做？

* * *

编辑1：

我写：

```
// database stuff...
doc = Nokogiri::HTML(my_html)

doc.search('img') do |img_tag|
  puts img_tag
end 
```

但我无法收集图像标签。

* * *

编辑2：

我找到了解决方案：

```
doc.search('img').each do |img_tag|
  puts img_tag.attributes['src']
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T14:30:42.807

试试这个：

```
require 'nokogiri'

str = "some text <img src='/some/path' /> some another text"
doc = Nokogiri::HTML(str)
if img = doc.xpath('//img').first
    p img.attr('src')
end 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=ruby-fetch-first-image-from-a-text.rb&run=true)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:45:09.763

`doc.xpath('//img').first.attr('src').text`

# java - 与命令提示符相比，Eclipse 中的程序执行速度非常慢

> ID：12802270
> 
> 赞同：4
> 
> 时间：2012-10-09T14:27:53.507
> 
> 标签：java, eclipse

我创建了一个 Java 程序，它从本地系统读取加密文件并进行一些处理。实际上我有 20 个文件要读取，所以我使用线程机制来加速程序执行。

当我在 Eclipse 中运行程序时，完成执行需要 30 多分钟，而如果我制作一个可运行的 jar 并使用命令提示符执行程序，则只需不到一分钟。

为什么在 Eclipse 中运行程序比在命令提示符下运行程序花费更多时间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T14:44:07.533

与常规的命令行`System.out`相比，Eclipse 的控制台视图捕获速度非常慢。`stdout`每当程序中发生大量打印时，可以预期程序在 Eclipse 中的运行速度会明显变慢。

但是无论如何，除非您正在编写一个旨在通过 Unix 管道与其他程序集成的程序，否则您应该尽量减少打印，因为即使在命令行下也会降低性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:41:10.077

有一些典型的错误：

*   也许您正在调试模式下执行程序。

    尝试使用 Run（在绿色圆圈内播放符号）而不是 Debug（绿色错误）

*   也许您正在使用不同的 JVM 执行程序

    看一看`Project Properties->Java compiler`，`Window->Preferences->Java->Compiler`和`Window->Preferences->Java->Installed JREs`

*   Eclipse JDT 与 Java 控制台的输出和输入交互在性能上与标准控制台不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:40:55.367

我刚刚为您做了一个实验，并没有看到如此显着的差异。我创建了计算`sin()` `100000000`时间的类。该程序在 Eclipse 下运行约 15 秒，通过命令提示符运行约 14 秒。

因此，我可以在脑海中看到以下是系统运行缓慢的原因：

1.  确保您没有在调试下运行。使用运行选项，而不是调试。
2.  确保您在 Eclipse 下没有一些覆盖/监控开发人员工具。例如 YourKit、Emma 等。
3.  确保您的程序不会对控制台产生大量打印。
4.  在eclipse下运行时检查是否有足够的堆内存

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T18:46:34.170

将 jdk 6 更改为 jdk 7 对我来说非常有效。Window->Preferences->Java->Installed JREs

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:34:02.310

确保您在 Eclipse 中使用 Run 操作，而不是 Debug，因为后者确实具有可衡量的差异，尤其是在您使用条件断点的情况下。

但是，我记得使用 Debug 产生的显着差异较小。

# appstore-approval - Cydia 和 AppStore

> ID：12802271
> 
> 赞同：-1
> 
> 时间：2012-10-09T14:27:53.813
> 
> 标签：appstore-approval, cydia

1.  当我尝试将应用程序提交到 AppStore 时，Apple 是否有办法找出 Cydia 商店中已经存在的应用程序？

2.  例如，如果我更改已经出现在 Cydia 中的应用程序的名称和图标并尝试将其提交到 AppStore？苹果能查到吗？

3.  Apple 是否有可能收集有关越狱手机及其应用程序的统计数据并将这些数据保存在其数据库中（通过在某些后台进程中发送）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:06:24.930

首先，我假设 Cydia 上的现有应用程序是**您的应用程序**。我当然不会容忍窃取其他开发者的知识产权，仅仅因为他们发布了 Cydia 商店应用程序。

要回答您的问题：

1.  是的当然。他们可以自己使用 Cydia 并搜索您的应用名称。他们当然也可以只使用桌面浏览器并搜索您的应用程序的名称，以查看是否存在任何明显的版权侵权行为。虽然我认为 Apple 没有义务这样做，但我的应用程序被拒绝（**在发布之前**），因为 Apple 认为我的客户侵犯了其他一些第三方的知识产权。这种搜索也可以在 Cydia 商店存储库中找到列表。所以，*这是可能的*。

2.  我非常怀疑苹果会发现这一点。简单地重命名应用程序似乎可以避免任何问题。

3.  我不确定我是否理解这个问题。您是否在询问 iOS 是否会检查运行它的设备是否已越狱，如果是，是否将该状态报告给 Apple？我不知道，但数以百万计的用户使用越狱手机，而且我还没有看到苹果试图禁用他们的功能。

我有客户先在 Cydia 商店发布应用程序，然后尝试在 iTunes 应用程序商店发布它们。尽管这些都没有得到 Apple 的批准，但它们被拒绝使用私有 API 或违反 Apple 的人机界面指南，而不是因为它们已经存在于 Cydia 上。

我想如果一个应用程序在 Cydia 上发布，因为它使用了私有 API，然后 iOS在公共 API**中**添加了该功能，那么您可以尝试将其提交给 Apple。

我不为 Apple 工作，所以这些只是我基于个人经验的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T05:06:11.903

这取决于您放置的回购协议。如果你把它放在个人回购我相信你会侥幸逃脱。这取决于你的应用程序做什么，只要它不修改、利用、更改或使用私有 API 或做任何非法行为/侵犯版权，它对苹果来说并不重要，它应该直接通过苹果的应用商店。他们监控，上次我听到手动检查代码。

# jquery - 在调整大小时隐藏表 td

> ID：12802272
> 
> 赞同：0
> 
> 时间：2012-10-09T14:27:58.873
> 
> 标签：jquery, html-table

`table td`当我调整窗口大小或屏幕尺寸很小时，我想隐藏一些。我试过 CSS`media queries`

```
th:nth-last-child(-n+7) {display:none}
td:nth-last-child(-n+7) {display:none}
th:last-child {display:none}
td:last-child {display:none} 
```

它可以工作，但 CSS 不能计算 td，所以如果一个表只有三个`td`，那么上面的代码隐藏所有三个`td`。请帮助我使用 jQuery 实现这一点：`td` 在调整大小或屏幕尺寸很小时隐藏，

1.  如果屏幕宽度为 768px，则仅显示六个`td`并从右侧隐藏其他

2.  如果屏幕宽度为 480 像素，则仅显示四个`td`并从右侧隐藏其他

3.  如果屏幕宽度为 320 像素，则仅显示三个`td`并从右侧隐藏其他

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:39:56.027

改为使用`:last-child`和`max-width`媒体查询。

`td:nth-child(n+7)`只会影响从连续第七个单元格开始的单元格，`td:nth-child(n+5)`只会影响从连续第五个单元格开始的单元格，依此类推。

```
@media (max-width:768px) {
    td:nth-child(n+7),th:nth-child(n+7) {display:none}
}
@media (max-width:480px) {
    td:nth-child(n+5),th:nth-child(n+5) {display:none}
}
@media (max-width:320px) {
    td:nth-child(n+4),th:nth-child(n+4) {display:none}
} 
```

[http://jsfiddle.net/mblase75/GsxPK/](http://jsfiddle.net/mblase75/GsxPK/)

# elasticsearch - 使用 Tire 删除/删除 ElasticSearch 中的索引文档（通过 ActsAsParanoid 软删除）

> ID：12802273
> 
> 赞同：6
> 
> 时间：2012-10-09T14:28:04.160
> 
> 标签：elasticsearch, tire

我有一个 ElasticSearch 服务器，它使用出色的 Tire gem 运行索引和搜索文档。一切都很好，除了我不确定如何从搜索索引中手动删除文档。

我已经倾注了 RDoc 并搜索了几个小时，但这是我能找到的解决方案的唯一提示[https://github.com/karmi/tire/issues/309](https://github.com/karmi/tire/issues/309)。除了围绕 curl 构建自定义包装器并手动发出请求之外，还有更简单的方法吗？

另一个问题是我使用了一个名为 ActsAsParanoid 的软删除 gem，因此 Tire::Model::Callbacks 不会在软删除时删除对象。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-05T11:37:28.410

如果您只有 ID（例如 12345）：

```
User.tire.index.remove 'user', '12345' 
```

或更一般地说：

```
klass.tire.index.remove klass.document_type, record_id 
```

（我认为这相当于`remove @user`在幕后做什么）

[参考](https://github.com/karmi/tire/issues/43)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T14:55:34.140

事实证明，您可以像这样从索引中手动删除软删除的对象：

```
@user = User.find(id) #or whatever your indexed object is
User.tire.index.remove @user #this will remove them from the index 
```

而已！

# android - 如何避免在 Android 的 EditText 中执行 onTextChanged

> ID：12802277
> 
> 赞同：26
> 
> 时间：2012-10-09T14:28:21.013
> 
> 标签：android, android-edittext

我怎样才能避免这样的代码行：

```
((EditText) findViewById(R.id.MyEditText)).setText("Hello"); 
```

将在这里引发一个事件：

```
((EditText) findViewById(R.id.MyEditText)).addTextChangedListener(new TextWatcher() {
@Override
public void onTextChanged(CharSequence s, int start,
    int before, int count) {
// HERE
}

@Override
public void beforeTextChanged(CharSequence s, int start,
    int count, int after) {
}

@Override
public void afterTextChanged(Editable s) {
}
}); 
```

我想知道是否有任何方法可以抑制 onTextChanged 的​​执行，正如我在选择 AutoCompleteTextView 的下拉结果的情况下注意到的那样（没有执行 onTextChanged！）。

我不是在寻找诸如“如果你好什么都不做”之类的解决方法......

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-17T13:38:30.233

[AutoCompleteTextView](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/AutoCompleteTextView.java#696)的源显示他们设置了一个布尔值来表示文本正在被块完成替换

```
 mBlockCompletion = true;
         replaceText(convertSelectionToString(selectedItem));
         mBlockCompletion = false; 
```

这是实现您想要做的任何事情的好方法。TextWatcher然后检查[setText](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/AutoCompleteTextView.java#535)是否通过完成来完成并从方法中返回

```
 void doBeforeTextChanged() {
     if (mBlockCompletion) return; 
```

添加和删​​除 TextWatcher 对应用程序来说会更耗时

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-10-12T20:49:30.313

您可以检查当前哪个 View 具有焦点，以区分用户和程序触发的事件。

```
EditText myEditText = (EditText) findViewById(R.id.myEditText);

myEditText.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

        if(myEditText.hasFocus()) {
            // is only executed if the EditText was directly changed by the user
        }
    }

    //...
}); 
```

[在此处](https://stackoverflow.com/a/33151589/1788806)查看该答案的更详细版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-26T07:21:00.193

或者，您可以简单地使用`mEditText.hasFocus()`来区分人为更改或程序更改的文本，这对我来说很好：

```
@Override
public void onTextChanged(CharSequence charSequence, int i, int i2, int i3) {
    if (mEditText.hasFocus()) {
        // Do whatever
    }
} 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-16T04:26:45.157

我认为没有一种简单的方法可以禁用侦听器，但您可以通过以下任一方式解决它：

*   `TextWatcher`在设置文本之前删除，然后在之后添加。
*   或者`boolean`在设置文本之前设置一个标志，告诉`TextWatcher`忽略它。

例如

```
boolean ignoreNextTextChange = true;
((EditText) findViewById(R.id.MyEditText)).setText("Hello"); 
```

在你的`TextWatcher`：

```
new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        /*
        If the flag is set to ignore the next text change,
        reset the flag, and return without doing anything.
        */
        if (ignoreNextTextChange){
            ignoreNextTextChange = false;
            return;
        }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
}); 
```

这有点hacky，但它应该可以工作:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-03T15:04:42.433

实现此目的的另一种方法是使用`setOnKeyListener`.

这只会在用户按下键时触发，而不是在用户或以编程方式更改 EditText 时触发。

```
myEditText.setOnKeyListener(new EditText.OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        switch(event.getAction()) {
            case KeyEvent.ACTION_DOWN:
                // beforeTextChanged
                break;      
            case KeyEvent.ACTION_UP:
                // afterTextChanged
                break;
        }
        return false;
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T04:40:40.243

我只能看到两种方式

*   你在监听器中检查
*   您根据某些条件添加/删除侦听器

由于第一种方法对您来说是一种不需要的解决方法，我担心您已经使用第二种方法解决了。

# timeout - 我可以在底层图像下载请求上为 HtmlUnit.getWidth() 设置超时吗

> ID：12802280
> 
> 赞同：1
> 
> 时间：2012-10-09T14:28:28.170
> 
> 标签：timeout, htmlunit

问题是：如何在调用 HtmlImage.getHeight 或 getWidth() 之前设置超时？

语境：

我正在使用 HtmlUnit 2.10 来获取元素的实际图像大小，并且能够强制进行文件下载。据说触发图像下载的调用是 HtmlImage.getHeight() 或 getWidth()。但是，似乎在某些情况下（可能是网站速度慢或其他情况......）此调用需要 15 分钟才能返回，虽然它似乎恢复正常，但我也不想中断线程。在这 15 分钟的整个过程中，下面的线程转储看起来像这样。

问题测试网址： [http ://www.bbc.co.uk/zhongwen/simp/chinese_news/2012/10/121006_feature_china_highway_jams.shtml](http://www.bbc.co.uk/zhongwen/simp/chinese_news/2012/10/121006_feature_china_highway_jams.shtml)

```
"R-pool-5-thread-19" daemon prio=10 tid=0x525d4400 nid=0x4400 runnable [0x513c7000]
java.lang.Thread.State: RUNNABLE
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:150)
at java.net.SocketInputStream.read(SocketInputStream.java:121)
at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:166)
at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:90)
at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:281)
at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:92)
at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:62)
at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:254)
at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:289)
at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:252)
at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:191)
at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:300)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:127)
at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:712)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:517)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:172)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1460)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1379)
at com.gargoylesoftware.htmlunit.html.HtmlImage.downloadImageIfNeeded(HtmlImage.java:374)
at com.gargoylesoftware.htmlunit.html.HtmlImage.readImageIfNeeded(HtmlImage.java:381)
at com.gargoylesoftware.htmlunit.html.HtmlImage.getHeight(HtmlImage.java:311) 
```

# html - HTML表格的限制宽度

> ID：12802290
> 
> 赞同：18
> 
> 时间：2012-10-09T14:28:59.947
> 
> 标签：html, html-table

我正在尝试编写一个表格，以便它不会扩展到页面的整个宽度。以下是我到目前为止的内容，但即使第一列似乎尊重“宽度”参数，最后一列也会扩展到页面的末尾。

我发现的所有结果都使用 CSS，但我不知道该怎么做。我不知道它是否相关，但我正在写一个 Joomla！文章。

```
<table class="zebra" width="300">
  <thead>
    <tr>
      <th style="text-align: left;" width="100">title 1</th>
      <th style="text-align: center;" width="100">title 2</th>
      <th style="text-align: center;" width="100">title 3</th></tr>
  </thead>
  <tbody>
    <tr class="odd">
      <td style="text-align: left;" width="100">content 1</td>
      <td style="text-align: center;" width="100">content 2</td>
     <td style="text-align: center;" width="100">content 3</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-09T14:29:56.017

```
<table class="zebra" style="max-width:300px;"> 
```

# asp.net - DataForm 和 DataGrid 问题

> ID：12802293
> 
> 赞同：1
> 
> 时间：2012-10-09T14:29:07.683
> 
> 标签：asp.net, silverlight, dataform

Silverlight 系统，其中一个 asp 用户药房有一个用于他们的库存的链接表。我正在尝试在列表（数据网格）中显示此库存，并为他们提供一种通过数据网格编辑和添加项目到列表的方法。目前我正在努力绑定这个数据表单......提供了 Xaml，有什么帮助吗？

```
<Grid x:Name="LayoutRoot">
    <Button Content="Save Changes" Height="52" Width="103" Name="SaveChangesButton" VerticalAlignment="Top" Click="SaveChanges" ContentTemplate="{Binding}" Margin="169,309,367,0" />
    <Button Content="Discard Changes" Height="52" Width="103" Name="DiscardChangesButton" VerticalAlignment="Top" Click="DiscardChanges" ContentTemplate="{Binding}" Margin="288,309,250,0" />
    <riaControls:DomainDataSource AutoLoad="True" d:DesignData="{d:DesignInstance my:User_Pharmacy, CreateList=true}" Height="0" LoadedData="user_PharmacyDomainDataSource_LoadedData_1" Name="user_PharmacyDomainDataSource" QueryName="GetUser_PharmacyMedInvASPQuery" Width="0">
        <riaControls:DomainDataSource.DomainContext>
            <my1:MediNetDomainContext />
        </riaControls:DomainDataSource.DomainContext>
    </riaControls:DomainDataSource>
    <sdk:DataGrid AutoGenerateColumns="False" Height="406" HorizontalAlignment="Left" ItemsSource="{Binding ElementName=user_PharmacyDomainDataSource, Path=Data}" Margin="12,37,0,0" Name="medicineInventoryDataGrid" VerticalAlignment="Top" Width="107" >
        <sdk:DataGrid.Columns>
            <sdk:DataGridTextColumn x:Name="medName" Binding="{Binding Path=MedicineName}" Header="Medicine Name" Width="SizeToHeader" Visibility="Visible" />
        </sdk:DataGrid.Columns>
    </sdk:DataGrid>
    <TextBlock Height="23" HorizontalAlignment="Left" Margin="336,420,0,0" Name="textBlock1" Text="TextBlock" VerticalAlignment="Top" />
    <riaControls:DomainDataSource AutoLoad="True" d:DesignData="{d:DesignInstance my:User_Pharmacy, CreateList=true}" Height="0" LoadedData="user_PharmacyDomainDataSource1_LoadedData" Name="user_PharmacyDomainDataSource1" QueryName="GetUser_PharmacyASPQuery" Width="0">
        <riaControls:DomainDataSource.DomainContext>
            <my1:MediNetDomainContext />
        </riaControls:DomainDataSource.DomainContext>
    </riaControls:DomainDataSource>
    <toolkit:DataForm HorizontalAlignment="Left" Margin="151,37,0,0" Name="dataForm1" VerticalAlignment="Top" Width="258" Height="223" ItemsSource="{Binding ElementName=user_PharmacyDomainDataSource, Path=Data.}" CommandButtonsVisibility="All">
        <toolkit:DataForm.ReadOnlyTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <sdk:Label Content="Medicine Name:" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="3" Name="medicineNameTextBox" Text="{Binding Path=MedicineName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="True"/>
                    <sdk:Label Content="Price:" Grid.Column="0" Grid.Row="2" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="2" Height="23" HorizontalAlignment="Left" Margin="3" Name="priceTextBox" Text="{Binding Path=Price, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="True"/>
                    <sdk:Label Content="Quantity:" Grid.Column="0" Grid.Row="3" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="3" Height="23" HorizontalAlignment="Left" Margin="3" Name="quantityTextBox" Text="{Binding Path=Quantity, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="True" />
                </Grid>
            </DataTemplate>
        </toolkit:DataForm.ReadOnlyTemplate>
        <toolkit:DataForm.NewItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <sdk:Label Content="Medicine Name:" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="3" Name="medicineNameTextBox" Text="{Binding Path=MedicineName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="False"/>
                    <sdk:Label Content="Price:" Grid.Column="0" Grid.Row="2" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="2" Height="23" HorizontalAlignment="Left" Margin="3" Name="priceTextBox" Text="{Binding Path=Price, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="False"/>
                    <sdk:Label Content="Quantity:" Grid.Column="0" Grid.Row="3" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="3" Height="23" HorizontalAlignment="Left" Margin="3" Name="quantityTextBox" Text="{Binding Path=Quantity, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="False" />
                </Grid>
            </DataTemplate>
        </toolkit:DataForm.NewItemTemplate>
        <toolkit:DataForm.EditTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <sdk:Label Content="Medicine Name:" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="3" Name="medicineNameTextBox" Text="{Binding Path=MedicineName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="False"/>
                    <sdk:Label Content="Price:" Grid.Column="0" Grid.Row="2" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="2" Height="23" HorizontalAlignment="Left" Margin="3" Name="priceTextBox" Text="{Binding Path=Price, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="False"/>
                    <sdk:Label Content="Quantity:" Grid.Column="0" Grid.Row="3" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Grid.Row="3" Height="23" HorizontalAlignment="Left" Margin="3" Name="quantityTextBox" Text="{Binding Path=Quantity, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true, TargetNullValue=''}" VerticalAlignment="Center" Width="120" IsReadOnly="False" />
                </Grid>
            </DataTemplate>
        </toolkit:DataForm.EditTemplate>
    </toolkit:DataForm>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:53:38.613

使用两组文本块创建我自己的自定义版本，一组用于编辑/添加，仅在那时可见，另一组用于查看。如果有人有兴趣，我可以分享代码。

# python - 如何正确遍历交叉路口

> ID：12802294
> 
> 赞同：1
> 
> 时间：2012-10-09T14:29:06.530
> 
> 标签：python, loops, set-intersection

我试图遍历一系列交叉点，其中每次迭代都是一组新行的交叉点。我的代码如下所示：

```
 for liness in range(len(NNCatelogue)):
        for iii in [iii for iii, y in enumerate(NNCatelogue[iii]) if y in set(NNCatelogue[liness]).intersection(catid)]:
            print iii, y 
```

NNCatelogue 本质上是一个 1268 X 12 矩阵，每一次新的线迭代调用一个新行。如果我只是输入我想要的行号（即：0、1、2...），那么我会得到预期的输出（前面没有 for 循环）。上面编写的代码给出以下输出：

```
 10 C-18-1064
    4 C-18-1122
    4 C-18-1122
    5 C-18-1122
    5 C-18-1122
    7 C-18-1122
    8 C-18-1122
    9 C-18-1122
    10 C-18-1122
    11 C-18-1122
    6 C-18-1122
    ... 
```

预期的输出应该是：

```
 0 C-18-1
  1 C-18-259
  2 C-18-303
  3 C-18-304
  4 C-18-309
  5 C-18-324
  6 C-18-335
  7 C-18-351
  8 C-18-372
  9 C-18-373
  10 C-18-518
  11 C-18-8 
```

知道我哪里可能出错了吗？任何帮助是极大的赞赏！

更新：

我尝试了其中一个答案的变体，虽然它更接近我的预期，但并不完全存在。这是我尝试过的：

```
 counter = 0
    for row in NNCatelogue:
        for value in row:
            if value in set(NNCatelogue[counter]).intersection(catid):
                print counter, value
                counter += 1 
```

结果输出为：

```
 0 C-18-1
    1 C-18-324
    2 C-18-351
    3 C-18-4
    4 C-18-5
    5 C-18-6
    6 C-18-7
    7 C-18-8
    8 C-18-9
    9 C-18-10
    10 C-18-11
    11 C-18-12
    12 C-18-13
    ... 
```

所以一些交叉点是正确的，虽然这不是我想要的输出......这里有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:32:54.983

你用`iii`得太频繁了。如果你执行这段代码，我什至无法想象到底发生了什么。只需给您的变量提供有用的口语名称，您的问题可能就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:34:46.120

据我了解你需要什么：

```
counter = 0
for row in NNCatelogue:
    for value in row:
        if value in catid:
            print counter, value
            counter += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:33:34.607

看起来交集提供了非数字排序......你得到正确的集合（只是错误的排列）吗？

# objective-c - 关于 CLLocationManager startMonitoringForRegion 的 iOS 应用生命周期

> ID：12802297
> 
> 赞同：3
> 
> 时间：2012-10-09T14:29:11.490
> 
> 标签：objective-c, geolocation, cllocationmanager, lifecycle

据称，在 iOS 中，即使应用程序未启动，也可以使用`CLLocationManager`'方法注册代表以响应设备移动到特定地理区域的情况。`startMonitoringForRegion:`从[CLLocationManager 类参考](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)：

> 在 iOS 中，您向位置管理器注册的区域在应用程序启动之间保持不变。如果在您的 iOS 应用程序未运行时发生区域交叉，系统会在后台自动将其唤醒（或重新启动），以便处理该事件。重新启动时，您之前配置的所有区域都可以在您创建的任何位置管理器对象的受监视区域属性中使用。

我假设如果重新启动该应用程序，iOS 实际上并没有将它带到前台。我找不到任何好的示例来说明`startMonitoringForRegion`适合整个应用程序的位置，所以我的问题是：

1.  是否必须从特定的地方注册代表`startMonitoringForRegion`？我猜如果我们在启动应用程序时没有将它带到前台，它就不能在视图控制器中被插入。有人可以举一个例子吗？
2.  如果我们决定在进入该区域后*确实*要将应用程序置于前台，我们将如何做到这一点？
3.  何时`startMonitoringForRegion`向操作系统注册，何时取消注册？用户是否必须至少启动一次应用程序（即使它已经被杀死）才能进行初始注册？如果用户关闭设备电源怎么办？我们的处理程序会在设备下次开机时注册，还是用户必须至少再次启动应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:35:35.283

> 是否必须从某个特定的地方注册 startMonitoringForRegion 的代表？我猜如果我们在启动应用程序时没有将它带到前台，它就不能在视图控制器中被插入。

错误的。如果视图控制器对象是分配初始化的，它仍然**存在**，即使它的内容没有呈现。

> 如果我们决定在进入该区域后确实要将应用程序置于前台，我们将如何做到这一点？

无法使用公共 API（我不确定后台的应用程序是否可以使用`- [UIApplication openURL:]`自己的 URL 方案将自己带入后台，但我对此表示怀疑）；但是您可以使用 SpringBoardServices 框架来启动您的应用程序：

```
SBSLaunchApplicationWithIdentifier(CFSTR("com.mycompany.theBestiPhoneAppEver"), false); 
```

> startMonitoringForRegion 何时向操作系统注册，何时取消注册？用户是否必须至少启动一次应用程序（即使它已经被杀死）才能进行初始注册？

如果用户从不运行您的应用程序，则其中的代码将永远不会运行，因此它不会被注册。

> 如果用户关闭设备电源怎么办？我们的处理程序会在设备下次开机时注册，还是用户必须至少再次启动应用程序？

这是一个很好的问题。我不知道它是什么，我也没有在文档中找到答案（可能你也没有找到），所以我会说你最好自己尝试一下以确定。

# sql-server - 如何正确查看 MS Access（存储在 SQL Server 中）中的非标准字符

> ID：12802303
> 
> 赞同：0
> 
> 时间：2012-10-09T14:29:31.517
> 
> 标签：sql-server, sql-server-2008, ms-access, ms-access-2010

我目前在 SQL Server 中将字符串字段存储为`varchar(x)`. 数据库存储来自全球各地的记录，但非标准字符，例如“来自亚洲的字形或来自俄罗斯的西里尔字母/阿兹布卡”显示为“?????????????” 问号。

如何防止这种情况发生以及更改 SQL Server 以处理此类输入的后果是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:31:34.813

对于 Unicode 支持，您必须使用：

```
nvarchar(x) 
```

**nchar 和 nvarchar (Transact-SQL)**

`nchar [ ( n ) ]`- n 个字符的固定长度 Unicode 字符数据。n 必须是 1 到 4,000 之间的值。

`nvarchar [ ( n | max ) ]`- 可变长度的 Unicode 字符数据。n 可以是 1 到 4,000 之间的值。

另外，您可以参考：

[varchar 和 nvarchar 有什么区别？](https://stackoverflow.com/questions/144283/what-is-the-difference-between-varchar-and-nvarchar)

[varchar 与 nvarchar 性能](https://stackoverflow.com/questions/144283/what-is-the-difference-between-varchar-and-nvarchar)

# image-processing - 灰度图像的图像分析技术

> ID：12802304
> 
> 赞同：0
> 
> 时间：2012-10-09T14:29:32.863
> 
> 标签：image-processing, neural-network, pattern-recognition

我承担了一个项目，以自动分析从显微镜拍摄的特定类型微裂缝的图像。问题是使用的相机处于“自动”设置，因此从一张照片到另一张照片的微裂缝（看起来像针刺）是各种阴影。

背景也处于不同的饱和度水平，并且有一些物品（在照片中看起来非常明亮）看起来像骨折，但我需要打折一些不同的东西。

谁能推荐一种我可以研究的技术来帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:56:26.810

如果微裂缝是尖锐的边缘过渡，那么简单技术的组合可以让您找到与这些裂缝相对应的强边缘点的连接区域。如果裂缝也显得很暗，那么您应该能够将它们与明亮的裂缝状特征区分开来。

简要地：

1.  生成边缘图
2.  （如有必要）去除与明亮特征对应的边缘像素。
3.  选择将裂缝与背景分开的边缘强度
4.  清理边缘图图像
5.  在边缘图图像中查找连接区域

如果您想在背景中找到具有强边缘的细特征，那么可以生成一个边缘图（或边缘图像），其中每个像素代表局部边缘强度。被其他中等灰度像素包围的中等灰度像素将具有相对较低的边缘强度，而由浅灰色像素包围的黑色像素将具有相对较高的边缘强度。各种寻边技术包括 Sobel、Prewitt、Canny、Laplacian 和 Laplacian of Gaussian (LoG)；我不会在这里描述它们，因为如果你不熟悉它们，维基百科上有它们的条目。

一旦有了边缘图，就可以使用二进制阈值将边缘图转换为黑白像素。如果您有证据表明裂缝的边缘强度为 20，那么您将使用值 20 作为图像上的二值化阈值。然后，二值化将为您提供黑白边缘图，其中白色像素表示强边缘，黑色像素表示背景。

获得二值化边缘图后，您可能需要执行形态学“关闭”操作，以确保可能彼此靠近的白色像素成为同一连接区域的一部分。

在二值化边缘图上执行关闭后，您可以搜索连接的组件（可能称为“轮廓”或“斑点”）。对于大多数应用程序，最好识别 4 连接区域，其中一个像素被认为连接到顶部、左侧、底部和右侧的像素，但不连接到左上角和其他角的相邻像素。如果特征通常是单像素线或蜿蜒的裂缝，并且没有太多噪音，那么您可能能够识别 8 连接区域。

确定连接区域后，您可以根据面积、最长轴的长度和/或其他参数进行过滤。

如果黑暗和明亮的特征都可以有强边缘，并且如果你想消除明亮的特征，那么有几种方法可以消除它们。在原始图像中，您可以通过将阈值亮度以上的所有值设置为该亮度来剪辑图像。如果要保留的特征比图像的灰度中值暗，则可以忽略所有比灰度中值亮的像素。如果背景强度变化很大，您可能会计算某个局部区域的中值。

一旦我们看到你的图片，我相信你会得到更多的建议。如果您尝试解决的问题与我研究的问题相似，即在高度纹理化的表面中发现裂缝，那么我可以更具体地尝试算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:12:45.337

这在图像识别中是很正常的情况——不同的光照条件、不同的物体方向、不同的比例、不同的图像分辨率。已经开发出从这些图像中提取有用特征的方法。我不是该领域的专家，但我怀疑任何关于该主题的一般书籍都至少包含对图像归一化和特征提取方法的简要回顾。

# php - PHP Xpath 抓取可能的命名空间问题

> ID：12802305
> 
> 赞同：0
> 
> 时间：2012-10-09T14:29:35.860
> 
> 标签：php, javascript, xpath, namespaces

更新：源代码与开发者工具显示的有很大不同。

查看来源：view-source:http://www.machinerytrader.com/list/list.aspx?ETID=1&catid=1002

是需要由浏览器呈现为 html 的 javascript 吗？如果是这样，我怎样才能让 php 执行该过程以便我有 Html 来解析？奇怪的是，您可以使用 Xpath Checker 返回我正在寻找的项目（见下文），但您无法访问完整的 html！

(Xpath: //table[contains(@id, 'ctl00_ContentPlaceHolder1') and (contains(@id,"tblContent") or contains(@id,"tblListingHeader"))])

结束更新

我需要定期从这个网站上抓取一些信息来工作。我正在尝试编写一些 PHP 代码来抓取这些数据。我想我在这里有一些命名空间问题，阅读了一些关于 SO 的其他帖子。我以前从未遇到过命名空间问题，并使用了另一篇 SO 帖子中显示的方法（无济于事:()。

看来 xpath 查询由于任何原因都没有发生。如果您对如何处理此问题有任何猜测或解决方案，我愿意提供建议。

这也是我的代码的输出：

```
object(DOMXPath)#2 (0) {
}
Debug 1
array(0) {
}
array(0) {
} 
```

我遗漏了代码的底部，其中我 var_dump testarray 并创建和 var_dump otherarray。他们的输出包括在上面。显然，如果 DOMXPath 元素的长度也为 0，则这两个数组将为空。

```
$string = 'http://www.machinerytrader.com/list/list.aspx?ETID=1&catid=1002';

$machine_trader = file_get_contents($string);
$xml = new DOMDocument();
$xml->loadHTML($machine_trader);

$xpath = new DOMXPath($xml);

$rootNamespace = $xml->lookupNamespaceUri($xml->namespaceURI); 
$xpath->registerNamespace('x', $rootNamespace); 

$tableRows = $xpath->query("//x:table[contains(@id, 'ctl00_ContentPlaceHolder1') and (contains(@id,'tblContent') or contains(@id,'tblListingHeader'))]");

var_dump($xpath);

$testarray = array();
$otherarray = array();

foreach ( $tableRows as $row )
{

        echo "Debug 1"."\n";

        $testarray[] = $row->nodeValue;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:34:47.577

这不是 XPath 问题，因为实际内容是从您尚未到达的表单帖子中找到的。这里的 JS 源代码只是为信息请求验证适当的“用户”，然后通过表单提交发送请求。

在每个请求中，盐/加密“密钥”是随机的并发生变化，防止简单的刮擦。

您可以将该 JavaScript 重写为 PHP，然后发出两个请求，在此过程中与身份验证过程作斗争。

或者，您可以将抓取切换到 NodeJS 并使用[PhantomJS](http://phantomjs.org/)之类的东西，因为它可以评估 javascript，但可以让您以编程方式访问，而不是对它进行逆向工程。鉴于此任务的复杂性，使用正确的工具会简单得多。

# typescript - 将类作为参数传递会导致“不可更新”错误

> ID：12802317
> 
> 赞同：82
> 
> 时间：2012-10-09T14:30:11.763
> 
> 标签：typescript

我正在尝试将一个类作为参数传递给某个函数，该函数将实例化这个类并返回它。这是我的代码：

```
module A.Views {
  export class View { ... }
}

module A.App {
  export class MyApp {
    ...
    registerView(viewKlass:A.Views.View):void
    {
        var test = new viewKlass;
    } 
  }
} 
```

当我试图编译这个时，我得到：

```
(...): Value of type 'Views.View' is not newable. 
```

我究竟做错了什么？

如果一个新的类型值是一个对象构造函数，我如何在运行时传递构造函数？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-10-13T08:45:30.373

我们需要说 typeof(MyClass) 来区分函数签名中的对象和类。

无论如何，您实际上可以通过使用构造函数类型签名来解决您的问题。考虑到这个类：

```
class MyClass {
    constructor (private name: string) {
    }
} 
```

要将该类作为类型传递，然后您可以在函数中实例化，您实际上必须复制类构造函数签名，如下所示：

```
function sample(MyClass: new (name: string) => MyClass) {
    var obj = new MyClass("hello");
} 
```

**编辑：** 在 codeplex 上有一个简单的解决方案：

您必须为您的类创建一个接口，如下所示：

```
interface IMyClass {
    new (name: string): MyClass;
} 
```

然后，在您的函数签名中使用它：

```
function sample(MyClass: IMyClass) {
    var obj = new MyClass("hello");
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-08-31T14:06:36.000

补充其他答案；我有一个实用程序类型，以确保通用参数/字段是类/新的：

```
/* new T() */
export type Newable<T> = { new (...args: any[]): T; }; 
```

然后，您可以确保获得一个类构造函数：

```
class MyApp<TViewBase>
{
  register<TView extends TViewBase>(view: Newable<TView>) { 
  }
} 
```

该`Newable<T>`方法适用于`typeof T`--where`T`是泛型类型 -- 不适用的地方。

例如： `register<T extends TViewBase>(view: typeof T)`导致以下错误：

> > [ts] 'T' 仅指一种类型，但在这里用作值。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-06-28T16:18:59.487

试试这个：

```
export class MyApp {
    registerView(viewKlass: typeof A.Views.View): void {
        var test = new viewKlass();
    } 
} 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-04-25T14:24:38.883

在 TypeScript 中传递类有 2 种方法。如果你：

*   **知道您正在通过的类的超类**（Corey Alix 已经推荐）：

    ```
    class MyClass extends MySuperClass{ }

    makeMyClass(classRef: typeof MySuperclass) {
        return new classRef();
    }

    makeMyClass(MyClass); 
    ```

*   **知道类的构造函数的签名**：

    ```
    class MyClass {
        constructor(arg: string) {}
    }

    makeMyClass(classRef: { new(arg: string) }) {
        return new classRef('hello');
    }

    makeMyClass(MyClass); 
    ```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-10-09T16:00:28.203

如果你使用 Angular，他们已经[实现](https://github.com/angular/angular/blob/cfed0c0cf1238e5ad931598ce04c32f8c9a75143/packages/core/src/interface/type.ts#L35) `Type`了，它类似于[Meirion Hughes 的回答](https://stackoverflow.com/a/45983481/2519073)：

```
import {Type} from '@angular/core';

export class MyApp {
  ...
  registerView(viewKlass: Type<A.Views.View>):void
  {
      var test = new viewKlass();
  } 
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-02T18:06:18.227

我知道这是一个老问题，但这里有：

```
...
registerView(viewKlass: { new(): A.Views.View }):void
{
    var test = new viewKlass();
} 
```

[在这里](https://stackoverflow.com/a/38311757/2365824)找到了答案。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-10-04T15:36:12.577

根据您的情况，以下三种解决方案可能还不够：

1.  `myClass: new (name: string) => MyClass`
2.  `interface IMyClass { new (name: string): MyClass; }; myClass: IMyClass`
3.  `myClass: typeof MyClass`

在某些情况下，您想调用一些**静态**方法，例如`myClass.someMethod()`. `1`并且`2`不允许您这样做（并且请不要在您的应用程序中使用任何），因为他们不知道该方法。

或者在某些情况下，您希望将其`MyClass`作为**抽象**类并使用`let instance = new myClass`. 那样的话，`3`就会失败。

在这些情况下，我所做的是创建一个特殊的类型来`MyClass`解决我上面强调的问题，它看起来像这样：

`type MyClassContructor<T extends MyClass> = typeof MyClass & Constructor<T>;`

顺便提一句。不要忘记将返回类型添加到您的方法中，以便获得正确的智能感知。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-09T15:09:25.670

感谢您的要点 - 稍作改动即可使一切正常。在下面的示例中，我们在具体测试视图中“新建”`TestView`以传递，而不是尝试在方法中新建它。

```
module V.Views {
   export class View {
      public someVar: any;
      // the presence of constructor doesn't affect the error triggering
   }
}

module V.App {
    export class Application {
        public registerView(url: string, viewKlass: V.Views.View): void
        {
            var test = viewKlass;
        }
    }
}

var app = new V.App.Application;

class TestView extends V.Views.View {
}

class TestView2 extends V.Views.View {
}

app.registerView('', new TestView())
app.registerView('content/view/:slug/', new TestView2()) 
```

# apache - activemq 没有启动

> ID：12802321
> 
> 赞同：2
> 
> 时间：2012-10-09T14:30:25.057
> 
> 标签：apache, ubuntu, activemq, ubuntu-12.04

我尝试按照 activemq 站点上的指示下载和运行 activemq： [http ://activemq.apache.org/getting-started.html#GettingStarted-StartingActiveMQ](http://activemq.apache.org/getting-started.html#GettingStarted-StartingActiveMQ)

我已经从这里下载了 tar.gz 文件：http: [//www.apache.org/dyn/closer.cgi?path=%2Factivemq%2Fapache-activemq%2F5.6.0%2Fapache-activemq-5.6.0-bin。压缩包](http://www.apache.org/dyn/closer.cgi?path=%2Factivemq%2Fapache-activemq%2F5.6.0%2Fapache-activemq-5.6.0-bin.tar.gz)

我已经提取它并尝试从提取的目录中运行 bin\activemq。

但是由于某种原因，activemq 没有启动，我不断收到以下错误：

yosi@yosi:~/Downloads/apache-activemq-5.6.0$ ./bin/activemq start INFO: Loading '/etc/default/activemq' INFO: Using java '/usr/lib/jvm/jdk1.7.0_07/ bin/java' INFO: 开始 - 检查 logging.properties 和 log4j.properties 中指定的日志文件以获取详细信息 ./bin/activemq: 396: ./bin/activemq: /usr/lib/jvm/jdk1.7.0_07/bin/ java -Xms1G -Xmx1G -Djava.util.logging.config.file=logging.properties -Dcom.sun.management.jmxremote -Djava.io.tmpdir="/home/yosi/Downloads/apache-activemq-5.6.0/ tmp" -Dactivemq.classpath="/home/yosi/Downloads/apache-activemq-5.6.0/conf;" -Dactivemq.home="/home/yosi/Downloads/apache-activemq-5.6.0" -Dactivemq.base="/home/yosi/Downloads/apache-activemq-5.6.0" -Dactivemq.conf=" **echo "INFO: pidfile created : '/home/yosi/Downloads/apache-activemq-5.6.0/data/activemq-yosi.pid' (pid '$APID')";exit $RET: 未找到**

有谁知道这里发生了什么？是activemq脚本有问题吗？

约西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:23:57.957

你确定它没有在后台运行吗？

```
ps -ef | grep activemq

tail -f ../data/activemq.log 
```

# sql-server - 使用 select into where not exists 查询时出现 SQL 错误

> ID：12802324
> 
> 赞同：2
> 
> 时间：2012-10-09T14:30:33.393
> 
> 标签：sql-server, select, insert, where

我正在尝试将一个表插入另一个表，

```
insert into list2([PHONE])
select [column 0] + [column 1] as PHONE
from [list1]
where not exists (select * from list2
where list2.phone = [list1].phone) 
```

但我收到一个错误：

`Msg 207, Level 16, State 3, Line 1 Invalid column name 'phone'.`

在 上`list2`，有 2 列，`phone`并且`area code`。`phone`有完整的电话号码和`area code`区号。

在 上`list1`，还有 2 列，`column 0`分别是区号和`column 1`电话号码的前 6 位。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:41:35.583

您不允许`SELECT`从`WHERE`子句引用您在列表中构造的列别名：

```
insert into list2([PHONE])
select [column 0] + [column 1] as PHONE
from [list1]
where not exists (select * from list2
where list2.phone = [list1].[column 0] + [list1].[column 1]) 
```

或者，您可以将`phone`列的构造放入`FROM`子句中的子查询中：

```
insert into list2([PHONE])
select PHONE
from (select [column 0] + [column 1] as PHONE from [list1]) l1
where not exists (select * from list2
where list2.phone = l1.phone) 
```

# c++ - 在 Qt 上使用 QUdpSocket 进行单播

> ID：12802328
> 
> 赞同：0
> 
> 时间：2012-10-09T14:30:39.963
> 
> 标签：c++, qt, udp, broadcast

我正在尝试将数据发送到 Qt 上具有特定 IP 地址的计算机。如果我使用`Broadcast`一切都很好。但是当我想将数据发送到特定地址时它不起作用。这是我在发射器中的内容：

```
udpSocket = new QUdpSocket(this);
QHostAddress myAddress = QHostAddress("192.160.0.1");
udpSocket->writeDatagram((char*)myChar, len, myAddress, 45454); 
```

在接收器我有：

```
udpSocket->bind(45454, QUdpSocket::ShareAddress); 
```

难道我做错了什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T03:01:18.087

在仔细检查了所有内容后，我发现我错过了输入接收方的 IP 地址。上述设置中的所有内容都是正确的并且正在运行。

# javascript - 第二次单击以关闭切换 div

> ID：12802330
> 
> 赞同：0
> 
> 时间：2012-10-09T14:30:44.243
> 
> 标签：javascript, jquery

我正在使用以下 jQuery 来隐藏和显示内容（切换），作为我网站中的树形导航菜单。我发现这段代码非常有用，因为通过单击，它一次只显示一个 div。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript">
function show_region(chosen_region) {
     $('.city_div').each(function(index) {
          if ($(this).attr("id") == chosen_region) {
               $(this).slideDown(200);
          }
          else {
               $(this).slideUp(600);
          }  
     });
}
</script>

<style type="text/css">
   .city_div {display: none;}
</style>

<a href="javascript:show_region('box01');">North</a><br>
<div class="city_div" id="box01">Div #01</div>

<a href="javascript:show_region('box02');">Centre</a><br>
<div class="city_div" id="box02">Div #02</div>

<a href="javascript:show_region('box03');">South</a><br>
<div class="city_div" id="box03">Div #03</div> 
```

问题是我只能通过打开另一个 div 来关闭一个 div。

如何通过第二次单击来关闭 div？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:39:29.380

您可以使用`slideToggle`，从更改`slideDown`为`slideToggle`：

```
function show_region(chosen_region) {
     $('.city_div').each(function(index) {
          if ($(this).attr("id") == chosen_region) {
               $(this).slideToggle(200); // instead of slideDown
          }
          else {
               $(this).slideUp(600);
          }  
     });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:37:53.233

首先，不要使用内联事件处理程序。

```
<script type="text/javascript">
$(document).ready(function() {
    var boxes = $('.city_div');

    $('.city-toggle').click(function(e) {
        var box = $(this).next();
        var isHidden = box.is(':hidden');

        boxes.slideUp(600);

        if(isHidden) {
            box.slideDown(200);
        }

        e.preventDefault();
    });
});
</script>

<style type="text/css">
   .city_div {display: none;}
</style>

<a href="something-meaningful-like-north.html" class="city-toggle">North</a>
<div class="city_div" id="box01">Div #01</div>

<a href="ditto.html" class="city-toggle">Centre</a>
<div class="city_div" id="box02">Div #02</div>

<a href="same.html" class="city-toggle">South</a>
<div class="city_div" id="box03">Div #03</div> 
```

此外，如果您的链接没有任何意义，请使用`#`as`href`并确保默认情况下这些框可见。`boxes.hide();`（在开始时使用正确的隐藏它们。）

此外，`<br>`这不是你应该在那里使用的。`<div>`s 已经是块级元素。如果你想要更多的填充，给他们一个上边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:37:52.390

您应该使用旧选择的区域名称保留一个变量

```
<script type="text/javascript">
    var old_chosen_region="";
    function show_region(chosen_region) {
        $('.city_div').each(function(index) {
            if (($(this).attr("id") == chosen_region)&&(chosen_region!=old_chosen_region)) {
                $(this).slideDown(200);
                old_chosen_region=chosen_region;
            } else {
                $(this).slideUp(600);
            }
        }
        old_chosen_region='';
    });
</script> 
```

这使您可以“记住”您最后选择的区域，如果*选择*的区域等于最后一个区域，则关闭它。

您应该 `old_chosen_region=''`在最后设置让选项卡重新打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:38:16.427

试试这个：

```
$(document).ready(function(){
    $('.city_div').click(function(){
        $(this).hide(); //or whatever code you want to hide it
    });
}); 
```

这样，当您单击 div 时，它将隐藏它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:40:51.777

由于您使用的是 jQuery，您可以尝试使用[jQuery.toggle](http://api.jquery.com/toggle/)函数。

```
function show_region(chosen_region) {
     $('#' + chosen_region).toggle('slide');
     return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T14:41:55.523

首先，你为什么要使用这么旧的 jQuery 版本？

其次，您的 JavaScript 可以简化。jQuery 适用于集合；你不需要`.each`, 或循环。

这是一个工作示例：http: [//jsfiddle.net/gibble/25P9z/](http://jsfiddle.net/gibble/25P9z/)

简化的 HTML：

```
<a href="#" data-contentDiv="box01">North</a><br>
<div class="city_div" id="box01">Div #01</div>

<a href="#" data-contentDiv="box02">Centre</a><br>
<div class="city_div" id="box02">Div #02</div>

<a href="#" data-contentDiv="box03">South</a><br>
<div class="city_div" id="box03">Div #03</div>​ 
```

新的 JavaScript：

```
function show_region(e) {
    var $target = $(e.target);
    var chosen_region = $target.attr('data-contentDiv');

    var openDiv = $('#' + chosen_region);

    openDiv.slideDown(200);
    $('.city_div').not(openDiv).slideUp(600);
} 
```

最后，附加事件，不要在 HTML 中内联它们。

```
$('a[data-contentDiv]').click(show_region);​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T14:44:53.293

跟踪您最后单击的 div：

```
var globalLastClickedButtonId;
$("div.city_div").click(function() {
    if (globalLastClickedButtonId == $(this).attr("id")) {
        $(this).hide();
    } else {
        var box = $(this).next().next();
        var clickedId = $(this).attr("id");
        $("div.city_div").each(function() {
           if ($(this).attr("id") == clickedId)
              box.slideDown(200);
           else
              box.slideUp(600);
        }
    }
    globalLastClickedButtonId = $(this).attr("id");
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-09T14:47:25.460

因为您正在使用动画，所以最好跟踪当前显示的 div。如果您不这样做，那么如果您快速连续单击链接，您将开始看到多个 div 显示。

你可以使用这个：

```
$(function() {
    $("a").click(function(e) {
        e.preventDefault();
        var selectedDiv = $("#" + $(this).attr("href"));
        var hide = selectedDiv.data("shown");

        $(".city_div").slideUp(600);
        $(".city_div").data("shown", false);

        if (hide) {
            selectedDiv.data("shown", false);
        }
        else {
            selectedDiv.data("shown", true);
            selectedDiv.slideDown(200);
        }
    });
});​ 
```

[这是一个工作示例](http://jsfiddle.net/kJ4qP/3/)

# java - Java 泛型集合

> ID：12802338
> 
> 赞同：2
> 
> 时间：2012-10-09T14:31:22.990
> 
> 标签：java, generics

我开始使用 Deitel Harvey 书学习 Java 通用集合 - 但我在理解下面的三行代码时遇到困难 - 通过初始化数组（颜色）的相关值并将它们添加到 LinkList，它们是否都执行相同的操作变量（列表 1）。第二种方法和第三种方法如何工作 - 我有点难以理解如何将数组视为一个列表。我知道数组不是动态数据结构，它们具有固定大小的长度，在数组上添加/删除元素不能与一般列表相比，在运行时间上完成。

```
String[] colors = { "black", "white", "blue", "cyan" };
List< String > list1 = new LinkedList< String >();

// method 1 of initalizing and adding elments to the list
for (String color : colors)
    list1.add(color);

// method 2 of initializing and adding elements to the list
List< String > list1 = new LinkedList< String > (Arrays.asList(colors));

// method 3 of initializing and adding elements to the list
List< String > list1 = Arrays.asList(colors); 
```

请帮助我理解我上面的疑问，不要评判我，因为我还是新手。谢谢你，思南

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:36:12.563

实际上，回答这个问题不需要泛型知识。

由于您正确地标识符数组是静态的，因为您不能向它们添加元素或删除它们。

但是，[列表通常允许这些操作。](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)

`List`返回的确实*有*/方法（否则它将不是有效的）。*但是*，实际上*调用*这些方法会抛出一个确切的问题**，因为**您实际上无法将元素添加到数组（这只是一个视图/包装器）。[`Arrays.asList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29) *[`add`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28E%29)[`remove`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#remove%28java.lang.Object%29)`List`**`UnsupportedOperationException`**`List`*****

 ******不从*结构上修改列表的操作（即不改变列表中元素的数量）是完全可能的：[`set(int, E)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#set%28int,%20E%29)在`List`返回的`Arrays.asList()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:35:06.177

`Arrays.asList`返回由指定数组支持的固定大小的列表。

它实际上是 Array 和 Collection 框架之间的桥梁。但返回的列表写入数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T14:35:44.290

只有您的第一个方法对`LinkedList`您最初分配到的`list1`. 另外两个为其分配一个新的、不相关的列表。第三个选项分配的不是，而是由您的 String 数组支持`LinkedList`的接口的特殊实现。`List`在第三种情况下，您将无法从列表中添加/删除元素，但您可以对其进行迭代并更新现有插槽。基本上，它只是通过`List`接口完成普通数组的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T14:35:58.403

[`Arrays.asList`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)从一个数组创建一个列表。数组通常不能被视为 Java 中的列表。它们只能被包装在一个列表中。

所以在这种情况下，方法 2 用于有一个特定的列表实现`LinkedList`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T14:37:51.617

对于方法 2，只需在此处检查 Api： [http](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/LinkedList.html#LinkedList(java.util.Collection) ://docs.oracle.com/javase/1.5.0/docs/api/java/util/LinkedList.html#LinkedList(java.util.Collection ) 当然，列表实现集合接口，这样这个构造函数就可以在这里工作。

对于方法 3，只需在此处查看 Api：[http](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList(T) ://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList(T ...)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T14:50:15.723

每次您对实现感兴趣时，您都可以研究某些方法。例如，通过在方法或类上按*Ctrl+鼠标左键。*

```
// method 2 of initializing and adding elements to the list
List<String> list1 = new LinkedList<String> (Arrays.asList(colors)); 
```

此代码导致：

```
List<String> list1 = new LinkedList<String> (new ArrayList<String>(colors)); 
```

在构造函数中`ArrayList`：

```
ArrayList(E[] array) {
            if (array==null)
                throw new NullPointerException();
        a = array;
    } 
```

实际数组被复制到封装的私有数组字段（**链接被复制**）。

然后在构造函数中`LinkedList`：

```
public LinkedList(Collection<? extends E> c) {
    this();
    addAll(c);
    } 
```

传递集合的每个元素都添加到`LinkedList`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T15:01:46.377

如果您看到下面的链接 [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/LinkedList.html#LinkedList%28java.util.Collection%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/LinkedList.html#LinkedList%28java.util.Collection%29)

您将看到链表类的构造函数，它接受集合对象作为参数。

在您的帖子中，第 2 行和第 3 行正在传递集合类的对象（即 Arrays.asList 最终给出了一个 List，它是集合的子类）。

所以第二行和第三行都是相当有效的实现。此外，您可以在所有 3 行中观察到另一种良好的编码实践。那是

> 将代码编写到拦截器而不是类

. （指

> 链表

实例与

> 列表

界面）

总是尝试使用拦截器来引用你的类，这是一个很好的做法*****

# android - Android：通过 Hierarchy 查看器从代码（ChimpChat 或 monkeyrunner）获取 UI 元素树

> ID：12802342
> 
> 赞同：0
> 
> 时间：2012-10-09T14:31:36.573
> 
> 标签：android, monkeyrunner, gui-testing

我想在不访问代码的情况下从（活动的）活动中获取所有活动的 UI 元素。就像[Hierarchy Viewer Tool](http://developer.android.com/tools/help/hierarchy-viewer.html)一样，只是来自代码。目前我在java中使用monkeyrunner工具后面的.jar文件，但是使用python API不会有问题，如果需要我可以切换。:-) 所以我连接到模拟器并像这样启动 init HierarchyViewer：

```
m_chimpchat = ChimpChat.getInstance(options);
m_device = m_chimpchat.waitForConnection(5000, ".*");
HierarchyViewer hv = m_device.getHierarchyViewer(); 
```

（Python等价物是）

```
device = MonkeyRunner.waitForConnection()
hv = device.getHierarchyViewer() 
```

但就是这样。我不知道如何从这里获取 UI 元素。这一定是可能的，因为 Hierarchy Viewer Tool 可以做到这一点。

如果可能的话，我想知道它是什么类型的 UI 组件，一个 id，它的位置（x，y）和它的 txt（例如 Button txt，TextView，...）来实现测试。

谢谢，索伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T16:14:16.127

[AndroidViewClient](https://github.com/dtmilano/AndroidViewClient)是一个扩展，`monkeyrunner`它简化了一些事情，也纠正了一些`monkeyrunner`单独会给你错误的事情，比如一些视图的位置取决于几个条件（即状态栏存在）。

这是**AndroidViewClient**源代码分发中存在的示例之一，并且完全按照您的要求执行：

```
#! /usr/bin/env monkeyrunner
'''
Copyright (C) 2012  Diego Torres Milano
Created on Feb 3, 2012

@author: diego
'''

import re
import sys
import os

# This must be imported before MonkeyRunner and MonkeyDevice,
# otherwise the import fails.
# PyDev sets PYTHONPATH, use it
try:
    for p in os.environ['PYTHONPATH'].split(':'):
        if not p in sys.path:
            sys.path.append(p)
except:
    pass

try:
    sys.path.append(os.path.join(os.environ['ANDROID_VIEW_CLIENT_HOME'], 'src'))
except:
    pass

from com.dtmilano.android.viewclient import ViewClient

device, serialno = ViewClient.connectToDeviceOrExit()
ViewClient(device=device, serialno=serialno).traverse(transform=ViewClient.TRAVERSE_CIT) 
```

该`ViewClient.traverse()`方法遍历树并调用指定为每个视图的变换参数的方法。在这种情况下，使用提供的方法之一打印 View 类、id 和文本 (CIT)（如果有）。

其他一些信息可以在[http://dtmilano.blogspot.com/2012/02/monkeyrunner-interacting-with-views.html](http://dtmilano.blogspot.com/2012/02/monkeyrunner-interacting-with-views.html)找到。

# objective-c - Landscape中的UIButtons不显示它们的标题

> ID：12802343
> 
> 赞同：0
> 
> 时间：2012-10-09T14:31:39.977
> 
> 标签：objective-c

我有一件奇怪的事情，我想解决这个问题。我有一个处于横向模式的视图。由于横向模式，我有一个按钮需要更改他的框架：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
           action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 40.0, 160.0);
[view addSubview:button]; 
```

普通的：

> button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);

景观：

> button.frame = CGRectMake(80.0, 210.0, 40.0, 160.0);

一切都很好，除了按钮的标题：“显示视图”

而不是说显示视图它说：

```
w

e

i

V

w

o

h

S 
```

从按钮到顶部阅读：P 这是我的按钮标题，因为它是横向的，但标题仍然是纵向的。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:51:51.267

首先，您似乎没有正确设置按钮的矩形。请记住，第三个参数是宽度：

```
CG_INLINE CGRect
CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height)
{
  CGRect rect;
  rect.origin.x = x; rect.origin.y = y;
  rect.size.width = width; rect.size.height = height;
  return rect;
} 
```

在`button.frame = CGRectMake(80.0, 210.0, 40.0, 160.0);`您将按钮的宽度设置为 40。

更重要的是，您应该使用字符串和 struts，甚至更好的自动布局。当您让计算机进行数学运算时，生活会轻松得多。只需要一个按钮，springs 和 struts 就足够了，但是如果你想创建一个更灵活的界面，并且你可以针对 iOS 6，那么你应该使用 autolayout。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self
           action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
[button setTranslatesAutoresizingMaskIntoConstraints:NO];

[[self view] addSubview:button];

NSLayoutConstraint *widthConstraint = [NSLayoutConstraint constraintWithItem:button
                                                                     attribute:NSLayoutAttributeWidth
                                                                     relatedBy:NSLayoutRelationGreaterThanOrEqual
                                                                        toItem:nil
                                                                     attribute:NSLayoutAttributeWidth
                                                                    multiplier:1
                                                                      constant:200];

[button addConstraint:widthConstraint];

NSLayoutConstraint *bottomContraint = [NSLayoutConstraint constraintWithItem:button
                                                                     attribute:NSLayoutAttributeBottom
                                                                     relatedBy:NSLayoutRelationEqual
                                                                        toItem:[self view]
                                                                     attribute:NSLayoutAttributeBottom
                                                                    multiplier:1.0
                                                                      constant:-20];
NSLayoutConstraint *centerContraint = [NSLayoutConstraint constraintWithItem:button
                                                                     attribute:NSLayoutAttributeCenterX
                                                                     relatedBy:NSLayoutRelationEqual
                                                                        toItem:[self view]
                                                                     attribute:NSLayoutAttributeCenterX
                                                                    multiplier:1.0
                                                                      constant:0];
NSArray *constraints = [[NSArray alloc] initWithObjects:bottomContraint, centerContraint, nil];
[[self view] addConstraints:constraints]; 
```

如果你想使用弹簧和支柱，你必须设置自动调整掩码：

```
[button setAutoresizingMask:(UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin)]; 
```

这两件事在 Interface Builder 中要容易得多。

# sql-server - 在所有关系/字段中全局搜索 ObjectGuid

> ID：12802347
> 
> 赞同：0
> 
> 时间：2012-10-09T14:31:46.530
> 
> 标签：sql-server, ssms

我必须使用未记录的 sqlserver 数据库（10.0.4064）并且需要派生引用/外键。

Management Studio 中的“显示依赖关系”没有太大帮助，它仅显示对视图和函数的依赖关系，但不显示使用 pkey 的表。我怀疑数据库作者根本没有使用参照完整性（可能是出于性能原因）。

无论如何，为了通过外键发现表引用，我需要在所有关系和字段中全局搜索 ObjectGuid。我怀疑这对 SQL 是否可行，但也许一些聪明的头脑对我有一个解决方法:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:13:05.333

这篇文章应该可以解决问题：

[SQL Server 依赖项](https://stackoverflow.com/questions/299128/sql-server-dependencies)

该线程中的第二个答案将是您想要的。

# php - jquery中等效的php函数array_keys

> ID：12802353
> 
> 赞同：5
> 
> 时间：2012-10-09T14:32:04.017
> 
> 标签：php, jquery, logic, business-logic

> **可能重复：**
> [如何使用 jQuery 获取数组键？](https://stackoverflow.com/questions/1254227/how-to-fetch-array-keys-with-jquery)

jquery 中等效的php 内置函数`array_keys(),`jquery 中是否有与 php 类似的内置函数`array_keys(),`。

请建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:53:12.970

您必须定义自己的函数才能获得相同的功能。尝试这个：

```
function arrayKeys(input) {
    var output = new Array();
    var counter = 0;
    for (i in input) {
        output[counter++] = i;
    } 
    return output; 
}

arrayKeys({"one":1, "two":2, "three":3}); // returns ["one","two","three"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T14:49:24.017

为此，您不需要 jQuery 或任何其他库——它是 Javascript 的标准部分。

```
for(var key in myObject) {
    alert(key);
} 
```

这应该足以让您遍历对象。但是如果你想真正将键放入它们自己的数组中（即把它变成一个真正的 php 函数的克隆），那么扩展上面的内容是相当简单的：

```
function array_keys(myObject) {
    output = [];
    for(var key in myObject) {
        output.push(key);
    }
    return output;
} 
```

`for(..in..)`请注意，对于具有您不想包含的属性或方法的对象（例如核心系统属性）使用该技术有一些注意事项，但对于您自己或从 JSON 字符串创建的简单对象，这是理想的.

（有关警告的更多信息，请参阅[http://yuiblog.com/blog/2006/09/26/for-in-intrigue/](http://yuiblog.com/blog/2006/09/26/for-in-intrigue/)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T14:38:18.110

不，在 jQuery 中没有任何具体的内容。有一种 javascript 方法，但尚未得到广泛支持，[`Object.keys()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)因此人们不会将它用于通用项目。我能想到的最好的事情是

```
var keys = $.map(your_object, function(value, key) {
  return key;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:00:44.023

在 JavaScript 中，没有像关联数组这样的东西。对象（对象文字）处理类似的情况。

```
var keys = [], i = 0;    
for( keys[ i++ ] in yourObject ); 
```

现在`keys`包含所有`yourObject`属性名称（键）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T14:36:28.470

看看[PHPJS](http://phpjs.org)，这是一个旨在以最少的依赖项在 vanilla JavaScript 中重现许多 PHP 函数的项目。在你的情况下，你想要[`array_keys`](http://phpjs.org/functions/array_keys/).

# objective-c - 如何获取所有 mime 类型 Google Drive Api IOS

> ID：12802355
> 
> 赞同：2
> 
> 时间：2012-10-09T14:32:07.400
> 
> 标签：objective-c, ios, mime-types, google-drive-api

我正在尝试为 IOS 集成 Google Drive Api。我在[这里测试他们的示例程序](https://developers.google.com/drive/examples/objectivec)

又名 DrEdit，当他们上传或下载他们使用 mimetype 的文件时，例如当他们上传文件时

`[GTLUploadParameters uploadParametersWithData:fileContent MIMEType:@"text/plain"];`

当 api 下载它使用的相同文件时

`GTLQueryDrive *query = [GTLQueryDrive queryForFilesList]; query.q = @"mimeType = 'text/plain'";`

文件的 JSON 值

```
{
  "kind": "drive#file",
  "id": string,
  "etag": etag,
  "selfLink": string,
  "title": "file_name",
  "mimeType": "mime/type",
  "description": "Stuff about the file"
  ...
  "downloadUrl": string,
  ...
} 
```

现在我想知道如何下载用户文件夹中具有不同文件扩展名的所有文件，例如 pdf、doc 等...

如何显示/列出用户 google drive 帐户中的所有文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T07:28:27.043

两件事情：

1）空查询似乎返回所有文件：

```
query.q = @""; 
```

2）确保您请求访问身份验证中的所有文件（initWithScope：**kGTLAuthScopeDrive**）。DrEdit 示例默认只访问应用程序创建的文件。

```
GTMOAuth2ViewControllerTouch *authViewController = 
  [[GTMOAuth2ViewControllerTouch alloc] initWithScope:kGTLAuthScopeDrive    // Auth to all files and docs
                                             clientID:kClientId
                                         clientSecret:kClientSecret
                                     keychainItemName:kKeychainItemName
                                             delegate:self
                                     finishedSelector:finishedSelector]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:47:14.943

[哑剧类型](https://developers.google.com/drive/manage-downloads)

我发现了谷歌驱动器支持的这种 mime 类型。您可以在下载或上传时使用它们。

# jquery - 如何获取列表中的下一项

> ID：12802357
> 
> 赞同：1
> 
> 时间：2012-10-09T14:32:11.433
> 
> 标签：jquery

尝试创建一个可点击的事件，以便在单击 #next 时，在这种情况下 2000-2001 等将发送到带有下划线的 body 标签上的类，例如。正文类="_2000-2001"。

当前日期已选择班级，每次单击#next 时，所选班级都会移动到该标签。

我需要弄清楚的是如何在每次点击时获取列表中的下一个 li a 标签，而不是 ul#dates li a.selected。

我应该使用 .next() 函数吗？

```
<ul id="dates">                 
    <li><a href="#1970-1974" class="selected">1970-1974</a></li>        
    <li><a href="#1974-1980">1974-1980</a></li>         
    <li><a href="#1980-1992">1980-1992</a></li>         
    <li><a href="#1992-2000">1992-2000</a></li>         
    <li><a href="#2000-2001">2000-2001</a></li>     
    <li><a href="#2001-2004">2001-2004</a></li>         
    <li><a href="#2004-2006">2004-2006</a></li>         
    <li><a href="#2006-2007">2006-2007</a></li>         
    <li><a href="#2007-2008">2007-2008</a></li>         
    <li><a href="#2009-2011">2009-2011</a></li>     
    <li><a href="#Present">Present</a></li>
</ul>

<a href="#" id="next">+</a>
<a href="#" id="prev">-</a> 
```

查询：

```
$('a#next').click(function() {
    var htmlStr = $('ul#dates li a.selected').html();
    console.log(htmlStr);
    $('body').attr('class', function() {
        return '_' + htmlStr;
    });
});

$('a#prev').click(function() {
    var htmlStr = $('ul#dates li a.selected').html();
    $('body').attr('class', function() {
        return '_' + htmlStr;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:46:08.527

你可以使用类似的东西：

```
var $cur = '';
var $next = '';
var $prev = '';
var htmlStr = '';

$("#next").on('click', function () {
   $cur = $("#dates li a.selected");
   $next = $cur.parent().next().find('a');
   if ($next.length > 0) {
      $cur.removeClass('selected');
      $next.addClass('selected');
      $('body').attr('class', '_' + $next.text());
   }
});

$("#prev").on('click', function () {
   $cur = $("#dates li a.selected");
   $prev = $cur.parent().prev().find('a');
   if ($prev.length > 0) {
      $cur.removeClass('selected');
      $prev.addClass('selected');
      $('body').attr('class', '_' + $prev.text());
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:46:19.123

改变

```
$('ul#dates li a.selected').html(); 
```

至

```
$('ul#dates li a.selected').parent().next().children().html(); 
```

工作[小提琴](http://jsfiddle.net/Q2PZA/)。

编辑：使用“ul#dates li a.selected”选择器，我们选择了 li 元素内的锚标记。因此，您必须使用 parent() 调用向上移动一步，然后 next() 会将您带到下一个 li 元素。因为你想要我们称之为 $.children().html(); 的子元素的 html。如果 li 中有多个元素，则必须执行 $.children().first().html(); 之类的操作。

# c# - 如何在同一解决方案中使用 2 个不同的 log4net 程序集 - 每个程序集针对不同版本的 .Net Framework？

> ID：12802360
> 
> 赞同：3
> 
> 时间：2012-10-09T14:32:13.487
> 
> 标签：c#, .net, log4net

我的问题与一个密切相关

[Log4Net：2 个库需要 2 个不同的版本](https://stackoverflow.com/questions/10089230/log4net-2-libraries-need-2-different-version-of-it)

但略有不同。

虽然我们的 Main EXE 是用 .Net Framework 4.0 编译的，但一些引用的程序集是为 Framework v2.0 编译的，我们还必须在这些程序集中添加日志记录。虽然我们选择了 log4net v1.2.11（我相信是最新的），但我们在解决方案中使用 2 个不同的组件时遇到了障碍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:15:05.763

首先，您不能将所有 dll 放在同一个文件夹中（正如您已经找到的那样）。

[这里](http://msdn.microsoft.com/en-us/library/yx7xezcf.aspx)解释了运行时如何尝试加载程序集。

使用这些知识，您可以：

*   [重定向程序集版本](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)（如果它们兼容，我认为它们是兼容的） - 例如从旧的 log4net dll 到新的 dll

*   [指定](http://msdn.microsoft.com/en-us/library/4191fzwb.aspx)加载程序集时应使用的程序集位置（例如，将其放在 \Libs 文件夹中，并引用该位置）

*   [手动加载程序集](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)——理论上，这可以工作，因为它将程序集加载到域中。

一个示例，取自[此处](http://msdn.microsoft.com/en-us/library/15hyw9x3.aspx)（“具有相同名称的多个组件”）：

```
<dependentAssembly>
  <assemblyIdentity name="Server" publicKeyToken="c0305c36380ba429" /> 
     <codeBase version="1.0.0.0" href="v1/Server.dll"/>
     <codeBase version="2.0.0.0" href="v2/Server.dll"/>
</dependentAssembly> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:18:59.247

您可以使用此部分

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="2.0" />
  </startup>
</configuration> 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/bbx34a2h.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/bbx34a2h.aspx)

链接： http: [//msdn.microsoft.com/en-us/library/w4atty68 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/w4atty68(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:39:42.270

我认为只使用面向 .net 2.0 的版本是安全的。

# android - 如果应用程序被强制停止，BroadCastReceiver 工作

> ID：12802363
> 
> 赞同：0
> 
> 时间：2012-10-09T14:32:19.163
> 
> 标签：android, android-intent, broadcastreceiver

我在应用程序**App#1**中为操作字符串**S注册了 BroadCastReceiver** **BCR** 从应用程序**App#2**我使用正确的操作字符串 ( **S** )进行广播意图

 ******如果应用程序**App#2**已经打开..`onReceive()`从**BCR**接收到意图的含义被调用

```
@Override
public void onReceive(Context context, Intent intent) {
     System.err.println("### ### MyBroadcastReceiver ### onReceive()"); 
```

如果**App#2**被强制关闭（来自 Setting-Applications）或从未打开（新重新启动的设备），具有相同操作字符串 ( **S** ) 的相同广播不会到达我的 broadCastReceiver **BCR**

广播意图的代码（注意没有标志..不知道它是否需要..&那个字符串是**S**）

```
String action = "customActionString.something"; 
Intent intent = new Intent(action);
context.sendBroadcast(intent); 
```

我错过了什么？这是标签问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:35:40.493

> 如果 App#2 被强制关闭（来自设置应用程序）或从未打开过（重新启动的设备）具有相同操作字符串 (S) 的相同广播不会到达我的 broadCastReceiver BCR

正确的。

> 我错过了什么？

一个活动，也许。

引用[Dianne Hackborn 的话](http://code.google.com/p/android/issues/detail?id=18225)：

> 从 [Android] 3.1 开始，当安装应用程序时，它们处于“停止”状态，因此在用户明确启动它们之前它们将无法运行。按下强制停止将使它们返回此状态。

[这在Android 3.1 发行说明](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)中描述得有些差劲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:16:42.073

因此添加： FLAG_INCLUDE_STOPPED_PACKAGES 将使意图从处于“停止”状态的应用程序到达广播接收器

＆你（@CommonsWare）是对的，我在使用活动方面做得更好，因为意图是打开一个活动，但现在我使用这个代码，它在所有情况下都能正常工作（应用程序在后台打开 - 它会将它带到前面（之前打开的任何活动），应用程序处于关闭状态 - 它将打开它（从主活动），没有安装应用程序 - Toast 警告）

```
try {
      Intent intent = context.getPackageManager().getLaunchIntentForPackage(
"otherAppPackage");
      m_ContainerActivity.startActivity(intent);
} catch (Exception e) {
      Log.e("SomeTag", "otherAppPackage app not found");
      Toast.makeText(m_ContainerActivity, "<app name> is not installed on device", Toast.LENGTH_LONG).show();
} 
```******

# iphone - 将滚动视图中的图像保存到相册

> ID：12802373
> 
> 赞同：0
> 
> 时间：2012-10-09T14:32:54.487
> 
> 标签：iphone, ios6

使用时如何将图像从滚动视图保存到 photalbum

```
 NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image]; 
```

在滚动视图中显示图像视图。

```
UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
   imageScrollView.pagingEnabled = YES;
NSInteger numberOfViews = 61;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;
NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
switch (buttonIndex) {
    case 0:
        UIImageWriteToSavedPhotosAlbum(_imageScrollView._image, self, nil, nil);

        break;

    default:
        break;
}
} 
```

在声明中收到红色消息

```
 UIImageWriteToSavedPhotosAlbum(_imageScrollView._image, self, nil, nil); 
```

那`property _image not found on object of type uiscrollview.`

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:45:53.647

您可以使用单独的指针挂在图像上，或者如果滚动视图是指向它的唯一指针，您可以使用标记找到它：

```
// right after
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
// give it a tag
imageView.tag = 128;   // any int that is unique relative to other tags in the scroll view 
```

// 用标签找到它...

```
case 0:
    UIImageView *imageView = (UIImageView *)[imageScrollView viewWithTag:128];
    UIImageWriteToSavedPhotosAlbum(imageView.image, self, nil, nil);

    // notice, there's also no property called _image on an imageView 
```

# symfony - Symfony2 登录表单重定向到主页而不是重定向到引用 URL

> ID：12802376
> 
> 赞同：0
> 
> 时间：2012-10-09T14:33:07.030
> 
> 标签：symfony, login

我用基于表单的登录设置了一个 Symfony2 项目。

这是我的`security.yml`配置的样子：

```
firewalls:
    login:
        pattern:  ^/login$
        security: false

    secured_area:
        pattern:    ^/
        anonymous: ~
        form_login:
            login_path:  /login
            check_path:  /login_check
            default_target_path: /home
        logout:
            path:   /logout
            target: /

access_control:
    - { path: ^/admin, roles: ROLE_ADMIN }             
    - { path: ^/login, access: "isAnonymous()" }
    - { path: ^/login_check, access: "isAnonymous()" }
    - { path: ^/register, access: "isAnonymous()" } 
```

通常，登录和注销都很好，但是登录时，我被重定向到`/`而不是请求的 URL（引用者）。无论`use_referer`设置为`true`还是都会发生这种情况`false`。

当设置`always_use_default_target_path`为 时`true`，我会被重定向到默认路径 ( `/home`) 而不是`/`，这确实有意义。

谁能给我一个提示，说明为什么我被重定向到`/`而不是引用 URL？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:03:52.403

好吧，这是我的错......我不知何故忘记了前段时间我在登录操作的表单模板（`login.html.twig`）中添加了以下行：

`<input type="hidden" name="_target_path" value="/" />`

发表评论后，突然一切都恢复正常了...... ;-)

# file - 在 CMake 中，如何找到包含文件的目录？

> ID：12802377
> 
> 赞同：56
> 
> 时间：2012-10-09T14:33:09.157
> 
> 标签：file, cmake

假设我的项目`CMakeLists.txt`包括`foo.cmake`：

```
include(foo) 
```

在`foo.cmake`，我想知道的路径`foo.cmake`。
我怎样才能做到这一点？

请注意，它`CMAKE_CURRENT_LIST_DIR`给出了 include 的目录`CMakeLists.txt`，而不是include 的目录，`foo.cmake`因此不是我想要的。

当然，`foo.cmake`可能会被多个项目包含（即，被多个`CMakeLists.txt`文件）。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-12T07:53:41.257

人们报告了关于 CMAKE_CURRENT_LIST_DIR 行为方式的看似矛盾的事实。现在我知道了混乱的原因：

首先，在我的 Linux 环境中：

```
$ cd /path/to/home  
$ mkdir cmake-test  
$ cd cmake-test  
$ mkdir source  
$ mkdir source/subdirectory  
$ mkdir build 
```

我创建了这两个文件：

```
$ cat source/CMakeLists.txt  
include(subdirectory/foo.cmake)  

$ cat source/subdirectory/foo.cmake  
message("CMAKE_CURRENT_LIST_DIR is ${CMAKE_CURRENT_LIST_DIR}") 
```

按照 Fraser 和 Robert Dailey 的报道，CMake 的工作原理：

```
$ cd build  
$ cmake ../source  
CMAKE_CURRENT_LIST_DIR is /path/to/home/cmake-test/source/subdirectory  
[...] 
```

但是，我向 foo.cmake 添加了一个函数，我从 CMakeLists.txt 调用它：

```
$ cat ../source/subdirectory/foo.cmake  
message("CMAKE_CURRENT_LIST_DIR is ${CMAKE_CURRENT_LIST_DIR}")  
function(bar)  
    message("CMAKE_CURRENT_LIST_DIR in bar() is ${CMAKE_CURRENT_LIST_DIR}")  
endfunction()  

$ cat ../source/CMakeLists.txt  
include(subdirectory/foo.cmake)  
bar() 
```

然后：

```
$ cmake ../source  
CMAKE_CURRENT_LIST_DIR is /path/to/home/cmake-test/source/subdirectory  
CMAKE_CURRENT_LIST_DIR in bar() is /path/to/home/cmake-test/source  
[...] 
```

因此，在包含 foo.cmake 和调用 bar() 时， foo.cmake 中的 CMAKE_CURRENT_LIST_DIR 的值是不一样的。这是根据 CMAKE_CURRENT_LIST_DIR 的规范。

这是从 bar() 中访问 foo.cmake 目录的一种可能解决方案：

```
$ cat ../source/subdirectory/foo.cmake  
set(DIR_OF_FOO_CMAKE ${CMAKE_CURRENT_LIST_DIR})  
function(bar)  
    message("DIR_OF_FOO_CMAKE in bar() is ${DIR_OF_FOO_CMAKE}")  
endfunction() 
```

之后我得到了我正在寻找的行为：

```
$ cmake ../source  
DIR_OF_FOO_CMAKE in bar() is /path/to/home/cmake-test/source/subdirectory  
[...] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T19:40:17.090

见[`CMAKE_CURRENT_LIST_DIR`](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#variable%3aCMAKE_CURRENT_LIST_DIR)：

> 当前正在处理的列表文件的完整目录。
> 
> 当 CMake 处理项目中的列表文件时，此变量将始终设置为当前正在处理的列表文件 (CMAKE_CURRENT_LIST_FILE) 所在的目录。该值具有动态范围。当 CMake 开始处理源文件中的命令时，它会将此变量设置为该文件所在的目录。当 CMake 完成处理来自文件的命令时，它会恢复以前的值。因此，宏或函数内的变量值是调用调用堆栈最底部条目的文件的目录，而不是包含宏或函数定义的文件的目录。

## 例子

我有以下结构：

```
C:\Work\cmake-test\CMakeLists.txt
C:\Work\cmake-test\subfolder\test.cmake 
```

在我的`CMakeLists.txt`：

```
include( subfolder/test.cmake ) 
```

在我的`test.cmake`：

```
message( "Current dir: ${CMAKE_CURRENT_LIST_DIR}" ) 
```

我从运行 CMake 时得到的结果`C:\Work\cmake-test`是：

> 当前目录：C:/Work/cmake-test/subfolder

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-05-16T14:32:22.450

在 CMake 3.17 中，您[有一个](https://cmake.org/cmake/help/v3.17/release/3.17.html?highlight=cmake_current_function_list_dir#variables)可用的新变量，称为`CMAKE_CURRENT_FUNCTION_LIST_DIR`，可以在函数内部使用。它在函数定义之外是未定义的。

```
function(foo)
  configure_file(
    "${CMAKE_CURRENT_FUNCTION_LIST_DIR}/some.template.in"
    some.output
  )
endfunction() 
```

在 CMake 3.17 之前，`CMAKE_CURRENT_FUNCTION_LIST_DIR`功能必须通过以下解决方法来近似`CMAKE_CURRENT_LIST_DIR`，取自 CMake 文档：

```
set(_THIS_MODULE_BASE_DIR "${CMAKE_CURRENT_LIST_DIR}")

function(foo)
  configure_file(
    "${_THIS_MODULE_BASE_DIR}/some.template.in"
    some.output
  )
endfunction() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T14:47:06.007

该`include()`命令首先在 CMake 目录中搜索模块`${CMAKE_MODULE_PATH}`，然后在 CMake`Modules`目录中搜索。

`if(EXISTS ${CMAKE_MODULE_PATH}/foo.cmake)`因此，您可以使用和检查文件是否存在`if(EXISTS ${CMAKE_ROOT}/Modules/foo.cmake)`。

# javascript - 将 HTML 表格导出到 Excel

> ID：12802381
> 
> 赞同：1
> 
> 时间：2012-10-09T14:33:16.293
> 
> 标签：javascript, jsp

我正在使用此代码将数据从我的网页导出到 Excel。

```
 function write_to_excel() {
    str="";
    var mytable = document.getElementsByTagName("table")[0]; 
    var row_Count = mytable.rows.length; 
    var col_Count = mytable.getElementsByTagName("tr")[0].getElementsByTagName("td").length; 

    var ExcelApp = new ActiveXObject("Excel.Application"); 
    var ExcelSheet = new ActiveXObject("Excel.Sheet"); 
    ExcelSheet.Application.Visible = true; 

    for(var i=0; i < row_Count ; i++) 
    { 
      for(var j=0; j < col_Count; j++) 
      { 
        str= mytable.getElementsByTagName("tr")[i].getElementsByTagName("td")[j].innerHTML; 
        ExcelSheet.ActiveSheet.Cells(i+1,j+1).Value = str; 
      } 
    } 

  } 
```

需要改进此代码以处理表的嵌套。我在表数据中有另一个表。

访问表行 (TR) 的第 i 个元素还包括嵌套行。

有人可以回答我如何在excel中导出嵌套表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:04:44.570

```
<!DOCTYPE html>
<html>
<head>
  <title>tableToExcel Demo</title>
  <script src="tableToExcel.js"></script>
</head>
<body>

<h1>tableToExcel Demo</h1>
<p>Exporting the W3C Example Table</p>

<input type="button" onclick="tableToExcel('testTable', 'W3C Example Table')" value="Export to Excel">

<table id="testTable" summary="Code page support in different versions of MS Windows." rules="groups" frame="hsides" border="2"><caption>CODE-PAGE SUPPORT IN MICROSOFT WINDOWS</caption><colgroup align="center"></colgroup><colgroup align="left"></colgroup><colgroup span="2" align="center"></colgroup><colgroup span="3" align="center"></colgroup><thead valign="top"><tr><th>Code-Page<br>ID</th><th>Name</th><th>ACP</th><th>OEMCP</th><th>Windows<br>NT 3.1</th><th>Windows<br>NT 3.51</th><th>Windows<br>95</th></tr></thead><tbody><tr><td>1200</td><td style="background-color: #00f; color: #fff">Unicode (BMP of ISO/IEC-10646)</td><td></td><td></td><td>X</td><td>X</td><td>*</td></tr><tr><td>1250</td><td style="font-weight: bold">Windows 3.1 Eastern European</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1251</td><td>Windows 3.1 Cyrillic</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1252</td><td>Windows 3.1 US (ANSI)</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1253</td><td>Windows 3.1 Greek</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1254</td><td>Windows 3.1 Turkish</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1255</td><td>Hebrew</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1256</td><td>Arabic</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1257</td><td>Baltic</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1361</td><td>Korean (Johab)</td><td>X</td><td></td><td></td><td>**</td><td>X</td></tr></tbody><tbody><tr><td>437</td><td>MS-DOS United States</td><td></td><td>X</td><td>X</td><td>X</td><td>X</td></tr><tr><td>708</td><td>Arabic (ASMO 708)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>709</td><td>Arabic (ASMO 449+, BCON V4)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>710</td><td>Arabic (Transparent Arabic)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>720</td><td>Arabic (Transparent ASMO)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr></tbody></table>

</body>
</html>

and add jquery program
var tableToExcel = (function() {
  var uri = 'data:application/vnd.ms-excel;base64,'
    , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
    , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
    , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
  return function(table, name) {
    if (!table.nodeType) table = document.getElementById(table)
    var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
    window.location.href = uri + base64(format(template, ctx))
  }
})() 
```

# typescript - 在 TypeScript 中扩展数组

> ID：12802383
> 
> 赞同：77
> 
> 时间：2012-10-09T14:33:22.567
> 
> 标签：typescript

如何将方法添加到基本类型，比如数组？在全局模块中，这将被识别

```
interface Array {
   remove(o): Array;
} 
```

但是把实际的实现放在哪里呢？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-10-09T15:11:43.360

您可以使用原型来扩展 Array：

```
interface Array<T> {
    remove(o: T): Array<T>;
}

Array.prototype.remove = function (o) {
    // code to remove "o"
    return this;
} 
```

如果您在一个模块中，您需要明确指出您指的是全局`Array<T>`，而不是在您的模块中创建本地`Array<T>`接口：

```
declare global {
    interface Array<T> {
        remove(o: T): Array<T>;
    }
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2017-01-01T04:47:57.030

`declare global`似乎是 TypeScript 2.1 的门票。注意它`Array.prototype`是 type `any[]`，所以如果你想让你的函数实现检查一致性，最好自己添加一个泛型类型参数。

```
declare global {
  interface Array<T> {
    remove(elem: T): Array<T>;
  }
}

if (!Array.prototype.remove) {
  Array.prototype.remove = function<T>(this: T[], elem: T): T[] {
    return this.filter(e => e !== elem);
  }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-03-28T11:48:18.920

添加到 Rikki Gibson 的回答中，

```
export{}
declare global {
    interface Array<T> {
        remove(elem: T): Array<T>;
    }
}

if (!Array.prototype.remove) {
  Array.prototype.remove = function<T>(elem: T): T[] {
      return this.filter(e => e !== elem);
  }
} 
```

如果没有 export{} TS 错误“全局范围的增强只能直接嵌套在外部模块或环境模块声明中。”

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-19T15:03:05.957

从 TypeScript 1.6 开始，您可以“本地”扩展任意表达式，例如内置类型。

[TypeScript 的新功能](https://github.com/Microsoft/TypeScript/wiki/What's-new-in-TypeScript#extending-expressions)：

> TypeScript 1.6 增加了对扩展计算构造函数的任意表达式的类的支持。这意味着现在可以在类声明中扩展内置类型。
> 
> 类的扩展子句以前需要指定类型引用。它现在接受一个表达式，可选地后跟一个类型参数列表。表达式的类型必须是具有至少一个构造签名的构造函数类型，该构造签名的类型参数数量与 extends 子句中指定的类型参数的数量相同。匹配构造签名的返回类型是类实例类型继承的基类型。实际上，这允许在扩展子句中指定真正的类和“类类”表达式。

```
// Extend built-in types

class MyArray extends Array<number> { }
class MyError extends Error { }

// Extend computed base class

class ThingA {
    getGreeting() { return "Hello from A"; }
}

class ThingB {
    getGreeting() { return "Hello from B"; }
}

interface Greeter {
    getGreeting(): string;
}

interface GreeterConstructor {
    new (): Greeter;
}

function getGreeterBase(): GreeterConstructor {
    return Math.random() >= 0.5 ? ThingA : ThingB;
}

class Test extends getGreeterBase() {
    sayHello() {
        console.log(this.getGreeting());
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-07-29T13:28:12.273

### 扩展`Array`

这是一个扩展`Array`和添加`remove`方法的示例。这是一个 JavaScript 示例

```
/** @template T */
class List extends Array {
  /**
   * Remove an item from the list and return the removed item
   * @param {T} item
   * @return {T}
   */
  remove(item) {
    const index = this.indexOf(item);
    if (index === -1) {
      throw new Error(`${item} not in list`);
    }
    this.splice(index, 1);
    return item;
  }
}

const arr = new List(1, 2, 3);
console.log(arr.remove(3)); // 3
console.log(arr); // [1, 2] 
```

这是一个 TypeScript 示例。

我添加了一个构造函数并将它的参数推送到数组中。（无法做到`super(...items)`！

```
class List<T> extends Array {
  constructor(...items: T[]) {
    super();
    this.push(...items);
  }

  public remove(item: T): T {
    const index = this.indexOf(item);
    if (index === -1) {
      throw new Error(`${item} not in list`);
    }
    this.splice(index, 1);
    return item;
  }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-27T15:14:21.143

```
class MyArray<T> extends Array<T> {
    remove: (elem: T) => Array<T> = function(elem: T) {
        return this.filter(e => e !== elem);
    }
}
let myArr = new MyArray<string>();
myArr.remove("some"); 
```

这适用于我的打字稿 v2.2.1！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-03-30T19:24:50.077

我只需要做同样的事情并创建一个包含映射的通用函数。

```
getDistinctValuesFromArray<T,R>(array: T[], mapping: (values: T) => R): R[] {
    return Array.from([...new Set(array.map(mapping))]);
} 
```

你可以这样称呼它： `getDistinctValuesFromArray<ArrayType, ElementType>(yourArray, a => a.elem)` 为了具体化，我喜欢添加特定类型，如 ArrayType 和 ElementType。那些你需要用你的类型确定替换的。

# redirect - 如何在 NgInX 中将带有查询字符串的 url 重定向到没有查询字符串的 url？

> ID：12802392
> 
> 赞同：3
> 
> 时间：2012-10-09T14:33:52.770
> 
> 标签：redirect, nginx, rewrite

我需要将包含查询字符串的 url 重定向/重写到相同的 url，但没有查询字符串。例如[http://domain.com/a-post-title/?fbid=xyz](http://domain.com/a-post-title/?fbid=xyz)到[http://domain.com/a-post-title/](http://domain.com/a-post-title/) 对不起我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:19:22.960

很简单，只需`?`在重写的末尾加上一个，来自[http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#rewrite)：

```
If a replacement string includes the new request arguments, the previous request 
arguments are appended after them. If this is undesired, putting a question mark at the 
end of a replacement string avoids having them appended 
```

# objective-c - ARC中的保留周期

> ID：12802396
> 
> 赞同：9
> 
> 时间：2012-10-09T14:34:02.677
> 
> 标签：objective-c, xcode, automatic-ref-counting, retain-cycle

我从未从事过非基于 ARC 的项目。我刚刚在基于 ARC 的项目中遇到了一个僵尸。我发现这是因为保留周期。我只是想知道什么是保留周期。可以

你能给我一个保留周期的例子吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-09T14:38:52.640

保留循环是对象`A`保留对象的情况`B`，并且对象同时`B`保留对象^*。这是一个例子：`A`

```
@class Child;
@interface Parent : NSObject {
    Child *child; // Instance variables are implicitly __strong
}
@end
@interface Child : NSObject {
    Parent *parent;
}
@end 
```

`__weak`您可以通过使用“反向链接”的变量或属性来修复 ARC 中的保留周期`weak`，即指向对象层次结构中直接或间接父级的链接：

```
@class Child;
@interface Parent : NSObject {
    Child *child;
}
@end
@interface Child : NSObject {
    __weak Parent *parent;
}
@end 
```

* * *

^*这是最原始的保留循环形式；可能有一长串物体在一个圆圈中相互保留。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-09T14:37:40.673

这是一个保留循环：当两个对象保持对彼此的引用并被保留时，它会创建一个保留循环，因为两个对象都试图相互保留，因此无法释放。

```
@class classB;

@interface classA

@property (nonatomic, strong) classB *b;

@end

@class classA;

@interface classB

@property (nonatomic, strong) classA *a;

@end 
```

为避免使用 ARC 保留循环，只需使用引用声明其中一个`weak`，如下所示：

```
@property (nonatomic, weak) classA *a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T01:33:59.757

这很快，但这是 iOS 中保留周期的交互式演示：[https ://github.com/nickm01/RetainCycleLoggerExample](https://github.com/nickm01/RetainCycleLoggerExample)

# c# - 扩展 TreeNode 以显示表 c#

> ID：12802399
> 
> 赞同：0
> 
> 时间：2012-10-09T14:34:09.307
> 
> 标签：c#, .net, treeview

我现在有几个表格，可以在其中填写一些信息并提交一些东西。

但是，我不只是让每个表一直可见，而是尝试创建一种菜单，当您单击菜单项时，例如创建案例，用于创建案例的表在菜单点“创建案例”和下面的一个（如果有的话）。

我目前正在尝试使用 Treeview，但如果可能的话，我真的不知道如何将表“添加”到树节点？

我是不是走错了路，还是有一些方法可以向 TreeNodes 添加控件？

# python-2.7 - 在 Python 中从/向 USB HID 设备进行简单的读/写？

> ID：12802401
> 
> 赞同：2
> 
> 时间：2012-10-09T14:34:22.657
> 
> 标签：python-2.7, usb, windows-7-x64, hid, pywinusb

我有一个相当简单的 USB HID 设备，我一直试图弄清楚如何使用 Python 读写。我已经能够使用 PyWinUSB 读取它，但是当我尝试写入它时问题就出现了。试图写它会使事情爆炸。

例如：

```
device = hid.HidDeviceFilter(vendor_id = 0x0003, product_id = 0x1001).get_devices()[0] 
```

这工作正常。然后读取原始数据，这就是我现在所关心的（一旦我能弄清楚如何写入被诅咒的东西，我就会使用它）：

```
def readData(data):
    print(data)
    return None 
```

这很好用（事实上，当我看到它工作时非常令人兴奋）。所以我会像这样分配数据处理程序：

```
device.set_raw_data_handler(readData) 
```

每次我按下一个按钮，都很好。数据如您所愿。太棒了！

当我想写入设备时，问题就来了。按照示例 simple_send 文件作为模板（这可能不是最佳选择），我将执行以下操作：

```
report = device.find_output_reports()[0] 
```

这将返回一个带有包含 4 个条目的字典的报表对象。那是对的吗？您是否使用 output_reports 对象写入设备？尝试通过将报告值设置为 ANYTHING 来做到这一点：

```
report[<key>] = "pneumonoultramicroscopicvolcanoconiosis"
report.send() 
```

这将继续返回一些我无法解释的令人讨厌的错误：

```
 Traceback (most recent call last):
  File "<pyshell#21>", line 1, in <module>
    report.send()
  File "C:\Python27\lib\site-packages\pywinusb-0.3.1-py2.7.egg\pywinusb\hid\core.py", line 1446, in send
    self.__prepare_raw_data()
  File "C:\Python27\lib\site-packages\pywinusb-0.3.1-py2.7.egg\pywinusb\hid\core.py", line 1401, in __prepare_raw_data
    byref(self.__raw_data), self.__raw_report_size) )
  File "C:\Python27\lib\site-packages\pywinusb-0.3.1-py2.7.egg\pywinusb\hid\winapi.py", line 382, in __init__
    raise helpers.HIDError("hidP error: %s" % self.error_message_dict[error_code])
HIDError: hidP error: data index not found 
```

我正在使用 Windows 7。我已经设法（最终）找到了 HID DLL 导出函数的参考，我不必（或者，就此而言，甚至真的想要）使用 PyWinUSB 库。我只是想完成这项工作，看起来并没有那么难，但确实如此。

有人可以告诉我我在这里做错了什么吗？

谢谢。

此外，我尝试跟踪错误调用，并在程序刚刚关闭之前完成了它，这有点令人沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:29:14.240

我让它和这个一起工作

```
 buffer= [0xFF]*33 # 33 = report size + 1 byte (report id)
    buffer[0]=0x0 # report id
    buffer[1]=0xFE
    buffer[2]=0x00
    buffer[3]=0xFF
    out_report.set_raw_data(buffer)
    out_report.send()
    dev.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T14:45:42.383

对我来说只有这个：

```
 report.send([0x70, ..., 0x73 ]) 
```

函数调用序列`set_raw_data([0x70, ..., 0x73)`和后续`send()`对我不起作用。

# regex - 仅在指定的 html 标记之外匹配指定的文本

> ID：12802402
> 
> 赞同：0
> 
> 时间：2012-10-09T14:34:25.157
> 
> 标签：regex

我有一个任务，我应该捕获指定的文本，这些文本不能在标题（任何大小）和锚 html 标签之间，`(<h*></h*> and <a></a>)`也不能在标签内作为属性。

例如我有文字：

```
<h1>TfL</h1>
<a href="tfl.gov.uk">Tfl</a>
TfL is official organization for keeping London moving. 
```

是否可以使用正则表达式仅在这些标签之外匹配“TfL”？

非常感谢。

彼得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:20:42.660

试试这个正则表达式

```
(?<=<(h\d|a[^>].*?)>)(TfL)(?=</(h\d|a)>) 
```

它将从`<h*></h*>`和获取所有 TfL 文本`<a></a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:47:27.543

我最终使用 HtmlAgilityPack.HtmlDocument.SelectNodes() 选择节点，然后检查选择中的节点是否被排除标记并且有或没有这样的父节点（递归地）。

```
Public Const cAlphabet As String = "AÁÄBCČDĎEÉĚFGHIÍJKLĹĽMNŇOÓÔPQRŔŘSŠTŤUÚŮVWXYÝZŽ0123456789" ' Accepted chars '

Dim nodes As HtmlNodeCollection = nothing
Dim doc As HtmlDocument = New HtmlDocument()

' div encapsulation is used for text which is not between any tags. '
' iHtmlText is variable which holds html document in text form '
doc.LoadHtml(String.Format("<div>{0}</div>", If(iHtmlText, String.Empty))) 

' "FIND_THIS_TEXT" can be any text which you want to find '
' Node selecting is case insensitive due to translate feature of xpath '
nodes = doc.DocumentNode.SelectNodes(
        String.Format("//*[contains(translate(text(), '{0}', '{1}'), '{2}')]",
                      cAlphabet, cAlphabet.ToLower, "FIND_THIS_TEXT".ToLower))

For Each node As HtmlNode In nodes
   If (IsNotOrNestedInSpecifiedNode(node, "a", "h1", "h2", "h3", "h4", "h5", "h6")) Then
       ' do something with the node here '
   End If
Next 
```

上面代码中使用的 IsNotOrNestedInSpecifiedNode 函数：

```
Private Function IsNotOrNestedInSpecifiedNode(ByVal iNode As HtmlNode, ByVal ParamArray iExcludedHtmlTags() As String) As Boolean
        Dim ret As Boolean = False

        If (iNode.Name.IsIn(iExcludedHtmlTags)) Then
            ret = False
        ElseIf (iNode.ParentNode IsNot Nothing) Then
            ret = IsNotOrNestedInSpecifiedNode(iNode.ParentNode, iExcludedHtmlTags)
        Else
            ret = True
        End If

        Return ret
    End Function 
```

# javascript - IE8 之前的内容不显示

> ID：12802404
> 
> 赞同：1
> 
> 时间：2012-10-09T14:34:44.240
> 
> 标签：javascript, css, internet-explorer-8, pseudo-element

这是违规页面的链接：[http ://www.wrightspecialty.com/brokers-agents-questionnaire.html?view=foxcontact](http://www.wrightspecialty.com/brokers-agents-questionnaire.html?view=foxcontact)

我使用的表单生成器有一个限制。无法插入文本，除非它是文本框、输入等的标签。IE9、Firefox、Safari 和 Chrome 都可以正确显示。IE7 不支持，IE8 有限制。

所以我尝试使用 :before 伪选择器插入副本。对于 IE8 及以下版本，我使用的是 Google 的 javascript。这适用于 IE7 而不是 IE8

```
 <!--[if lt IE 9]>
        <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script> 
    <![endif]--> 
```

我的目标是css中的每个元素：

```
 .foxcontainer_brokers div:nth-child(11):before, .foxcontainer_brokers div:nth-child(14):before, .foxcontainer_brokers div:nth-child(17):before, .foxcontainer_brokers div:nth-child(20):before, .foxcontainer_brokers div:nth-child(23):before, .foxcontainer_brokers div:nth-child(23):before, .foxcontainer_brokers div:nth-child(26):before, .foxcontainer_brokers div:nth-child(29):before {
        float: left;
        margin-left: 0;
        margin-bottom: 15px;
        padding-left: 3px;
        width: 100%;
        font-weight: bold;
        clear: both;
        font-size: 12px;
    }

    .foxcontainer_brokers div:nth-child(11):before {
        content: "Schools 8211 - Elementary and Secondary Schools";
    }

    etc... 
```

有人有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:37:33.280

问题不`:before`在于 IE8 支持的伪元素。它与您的`:nth-child()`伪类...以及`::before`带有双冒号的伪元素有关，IE8 都不支持这两者。

如果 IE9 脚本由于某种原因不能工作，也许您应该尝试类似 Selectivizr + 您选择的选择器库（例如 jQuery）。如果您尝试支持 IE8，您还应该避免使用双冒号作为伪元素，因为它不理解该语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:37:56.450

IE8 不支持 css3 选择器（nth-child）

# grails - 这个 Grails 错误是什么意思：“无法读取只写属性：emptyStringsToNull”？

> ID：12802405
> 
> 赞同：0
> 
> 时间：2012-10-09T14:34:44.610
> 
> 标签：grails

在 grails 程序中，我得到以下异常：

```
Stacktrace follows:
groovy.lang.GroovyRuntimeException: Cannot read write-only property: emptyStringsToNull
    at geoway.catalogue.controller.CswController$_closure1.doCall(CswController.groovy:19)
    at geoway.catalogue.controller.CswController$_closure1.doCall(CswController.groovy)
    at java.lang.Thread.run(Thread.java:679) 
```

在代码的这一点上，我可以找到以下行：

```
redirect(action:list,params:params) 
```

整个项目不包含字符串“emptyStringsToNull”。我如何找到问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:20:08.110

没有任何代码片段很难说，但尝试将动作名称放在引号中：

```
redirect(action: "list", params: params) 
```

# ruby - Ruby 字符串比较

> ID：12802406
> 
> 赞同：2
> 
> 时间：2012-10-09T14:34:45.127
> 
> 标签：ruby, string

当我尝试`rps_game_winner`在 CodeAcademy Labs 中使用该方法（见下文）时，它适用于以下输入：

```
> rps_game_winner([ ["Dave", "P"], ["Armando", "S"] ])
valid value: p
valid value: s
=> ["Armando", "S"]

> rps_game_winner([ ["Allen", "P"], ["Richard", "P"] ])[0]
valid value: p
valid value: p
=> "Allen" 
```

当我将它提交给自动评分器作业时，它总是以`NoSuchStrategyError`.

```
Failure/Error: rps_game_winner([ ["Dave", "P"], ["Armando", "S"] ])[0].should eq("Armando"), "Incorrect Winner returned"
     NoSuchStrategyError:
       NoSuchStrategyError 
```

有人可以帮忙吗？谢谢。

```
def rps_game_winner(game)
  raise WrongNumberOfPlayersError unless game.length == 2
  a1=[(game[0][1]).downcase]
  a2=[(game[1][1]).downcase]
  a3=a1.to_s
  a4=a2.to_s
  valid=["r","p","s"]

  if(valid.include?(a3))
    puts "valid value: "+a3
  else
    raise NoSuchStrategyError
  end

  if(valid.include?(a4))
    puts "valid value: "+a4
  else
    raise NoSuchStrategyError
  end

  if(win(a1, a2))
    return game[0]
  else
    if a1.eql?(a2)
      return game[0]
    else
      return game[1]
    end
  end

  return game[0] if a1.eql?(a2)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:07:56.940

首先，我没有你作业的背景。但是根据 NoSuchStrategyError，它当然命中了*valid.include?(x)*。

原因可能是（我假设）Ruby 的不同版本（1.8 codeacademy Labs vs 1.9 autograder）。因为 Array#to_s 在 1.8(join) 和 1.9(inspect) 上的行为不同。

```
a1=[(game[0][1]).downcase]
a2=[(game[1][1]).downcase]
a3=a1.to_s
a4=a2.to_s
valid=["r","p","s"] 
```

在 1.8 中：a3 将类似于“s”。

在 1.9 中：a3 将类似于 "[\"s\"]"。

请检查此链接： [Ruby 1.9 Array.to_s 表现不同？](https://stackoverflow.com/questions/3960392/ruby-1-9-array-to-s-behaves-differently)

要解决这个问题：

```
 a1=game[0][1].downcase
  a2=game[1][1].downcase 
```

删除 a3 和 a4，只比较 a1 和 a2 在 1.8 和 1.9 上都可以。

除此之外，您还可以通过以下方式删除一些冗余（与您的问题无关）：

```
 [a1, a2].each do |x|
    if valid.include?(x)
      puts "valid value: #{x}"
    else
      raise NoSuchStrategyError
    end
  end 
```

# sql - 使用 VBA 从 Access 中删除数据

> ID：12802408
> 
> 赞同：2
> 
> 时间：2012-10-09T14:34:52.357
> 
> 标签：sql, ms-access, vba, ms-access-2000

我正在尝试从 VBA 中的当前 Access 数据库中删除每条记录，其中`OTP = txtOTP.value`和`VARIABLE = {NomAdminContrats,TelAdminContrats,TelecAdminContrats, [...]}`

这是我的代码：

```
Dim query As Recordset 
Set query = CurrentDb.Execute("DELETE * FROM tb_SOMMAIRE WHERE OTP = '" & txtOTP.value & "' AND (VARIABLE = 'NomAdminContrats' or VARIABLE = 'TitreAdminContrats' or VARIABLE = 'UnitAdminContrats' or VARIABLE = 'AdrAdminContrats' or  VARIABLE = 'VilleAdminContrats' or VARIABLE = 'TelAdminContrats' or VARIABLE = 'TelecAdminContrats' or VARIABLE = 'CourrielAdminContrats')") 
```

尝试使用 OpenRecordset 或使用 Execute 时出现*预期函数*时出现错误 3219 Invalid Operation 。我已经尝试了很多东西，但我还没有设法让这个查询工作。我在记录集中也有完整的表，使用 myRecordset.Delete 会更容易/更快吗？如果是这样，我该怎么做？

**编辑**

现在尝试使用 CurrentDb.Execute 而不是 CurrentDb.OpenRecordset。该错误现在是*Function expected*而不是*Invalid Operation*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:58:01.223

你已经解决了问题。恭喜。看看你的条款的不同方法是否`WHERE`更容易使用。

该`WHERE`子句检查是否`VARIABLE`匹配值列表。您可以简单地询问数据库引擎是否存在值列表​​，而不是使用多个`OR`条件`VARIABLE`与列表的每个成员进行比较。`VARIABLE``IN`

```
AND
    (
        [VARIABLE] IN
            (
                'NomAdminContrats',
                'TitreAdminContrats',
                'UnitAdminContrats',
                'AdrAdminContrats',
                'VilleAdminContrats',
                'TelAdminContrats',
                'TelecAdminContrats',
                'CourrielAdminContrats'
            )
    ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-19T14:04:52.393

您不应该对`recordset.execute`函数使用括号，除非您想发送`execute`函数*options*以及您的查询。

```
currentDB.Execute ("SQL EXECUTABLE QUERY", Options) 
```

*options*是可以包含在函数中的可选常量，例如**dbDenyWrite**或**dbFailOnError**。当您在执行函数中不包含*选项*时，Microsoft 使用默认的**dbInconsistent**，并且您不应使用括号。

```
Set query = CurrentDb.Execute "DELETE * FROM tb_SOMMAIRE..." 
```

使用变量时代码工作的原因`sql`是因为在使用变量时没有使用括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:47:23.867

终于设法让它工作了。由于某种原因，不得不为查询声明另一个 var。

```
Dim sql as String
sql = "DELETE * FROM tb_SOMMAIRE WHERE OTP = '" & txtOTP.value & "' AND (VARIABLE = 'NomAdminContrats' or VARIABLE = 'TitreAdminContrats' or VARIABLE = 'UnitAdminContrats' or VARIABLE = 'AdrAdminContrats' or  VARIABLE = 'VilleAdminContrats' or VARIABLE = 'TelAdminContrats' or VARIABLE = 'TelecAdminContrats' or VARIABLE = 'CourrielAdminContrats')"
CurrentDb.Execute sql 
```

# jquery - 带有图像作为父 LI 的 jQuery 下拉菜单

> ID：12802411
> 
> 赞同：0
> 
> 时间：2012-10-09T14:35:09.363
> 
> 标签：jquery, css, drop-down-menu

所以我想在我的网站上的导航菜单中使用我的父 [li] 元素中的图像，并且想知道你们认为最好的方法是什么？我不要求写出任何东西，只是一个想法。我希望子列表项具有白色背景并且宽度约为 80 像素。我想把图像放在锚标签之前的列表项中，但图像是可拖动的，而且在我看来它看起来很便宜。

我知道我可能会因为这个问题而被激怒，但即使它只是一个句子的建议，它也会有所帮助，因为网上似乎没有太多关于使用图像的下拉菜单的信息。

如果没有足够的细节，请提前抱歉:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:04:27.183

在为父`<li>`元素（也称为第一个子元素）设置样式时，您可以像这样专门定位它们：

```
ul > li {
  background : url('../img/bg.jpg');
} 
```

最好的事情是这不会针对第`<li>`一个下面的元素`<li>`。

# c++ - 在 CMDIFrameWndEx::OnCreate 期间在 CMFCMenuBar 上设置 CreateFromMenu 文本

> ID：12802414
> 
> 赞同：0
> 
> 时间：2012-10-09T14:35:26.007
> 
> 标签：c++, mfc

在创建窗口期间，我在菜单中设置文本时遇到问题：

```
OnCreate(LPCREATESTRUCT lpCreateStruct)
{
...
CMFCMenuBar    m_wndMenuBar;    
CMenu menu;    
menu.LoadMenu(IDR_MENU_ENGGB);
m_wndMenuBar.Create(this);
m_wndMenuBar.CreateFromMenu(menu.GetSafeHmenu(),TRUE,TRUE);
...
} 
```

我的问题是以前的状态是从注册表中获取的，我还没有找到在创建窗口期间将语言更改为正确语言的方法。

我发现如果我将应用程序的条目转储到 HKEY_CURRENT_USER\Software\"MyApplication" 中，我会设法为我的应用程序获取默认语言。

有什么方法可以让我在创建窗口期间选择使用哪些文本？

非常感谢所有建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:59:42.340

通过覆盖从注册表中加载状态的 LoadState 来解决它

```
HKEY_CURRENT_USER\Software\"MyApplication"\Workspace\MFCToolBar-"id"

BOOL CVodiaMenuBar::LoadState( LPCTSTR lpszProfileName, int nIndex, UINT uiID)
{
    //CMFCMenuBar::LoadState(lpszProfileName, nIndex, uiID);
    return TRUE;
} 
```

通过不调用父级，我的更改保留在 OnCreate 之后。

# inheritance - 继承的 CFC 未填充

> ID：12802418
> 
> 赞同：1
> 
> 时间：2012-10-09T14:35:39.813
> 
> 标签：inheritance, coldfusion, cfc

我有两个 CFC，它们是具有 DAO 功能的 Bean。我已经在子 cfc 扩展父的地方设置了继承。

两个对象具有相同的结构；函数：init、read 等和 Properties：ID 等。

当我创建子对象时，我传递了一个 ID，它读取数据，获取父对象的外键 parentID，然后使用适当的参数调用 Super.init()。

我出乎意料的结果是：child 和 parentID 的 ID 相同，并且是返回对象时的 parentID 值。childs variables.ID 在 super 调用后被覆盖。我假设两者都可以访问变量范围，因此当父级设置 variables.ID 时，它会覆盖子 variables.ID。如果不以不同的方式命名 ID，是否可以避免这种情况？

父对象的读取函数似乎没有执行。例如，如果我重命名父母读取函数“read2”，该函数就会执行。我还怀疑这些函数位于共享范围内，因此正在执行子读取函数。

有什么方法可以保持相同的 cfc 结构并使此功能按预期工作？

提前致谢。

```
<cfcomponent accessors="true" extends="Custom" output="false">
<cfproperty name="ID" type="numeric" />
<cfproperty name="listID" type="numeric" />
<cfproperty name="customfieldID" type="numeric" />
<cfscript>
    variables.dsn = '';
</cfscript>

<cffunction name="init" access="public" output="false" returntype="ListCustom">
    <cfargument name="dsn" type="string" required="true" />
    <cfargument name="ID" type="numeric" required="true" />
    <cfargument name="listID" type="numeric" required="false" default="0" />
    <cfargument name="customFieldID" type="numeric" required="false" default="0" />
    <cfscript>
        variables.dsn = arguments.dsn;
        variables.ID = arguments.ID;
        variables.listID = arguments.listID;
        variables.customFieldID = arguments.customFieldID;
        if (variables.ID){
            read();
            if (variables.customFieldID){
                Super.init(dsn=variables.dsn,ID=variables.customfieldID);
            }
        }
    </cfscript>
    <cfreturn this />
</cffunction>

<cffunction name="read" access="private" output="false" returntype="void">
    <cfquery name="local.q" datasource="#variables.dsn#">
        SELECT customfieldID, listID
        FROM listCustomFields
        WHERE ID = <cfqueryparam value="#variables.ID#" cfsqltype="cf_sql_integer">
    </cfquery>
    <cfif local.q.recordcount>
        <cfset variables.listID = local.q.listID />
        <cfset variables.customFieldID = local.q.customFieldID />
    </cfif>
</cffunction> 
```

```
<cfcomponent accessors="true" output="false">

<cfproperty name="ID" type="numeric" />
<cfproperty name="fieldName" type="string" />

<cfscript>
    variables.dsn = '';
</cfscript>

<cffunction name="init" access="public" output="false" returntype="Custom">
    <cfargument name="dsn" type="string" required="true" />
    <cfargument name="ID" type="numeric" required="true" />
    <cfargument name="fieldName" type="string" required="false" default="" />
    <cfscript>
        variables.dsn = arguments.dsn;
        variables.ID = arguments.ID;
        variables.fieldName = arguments.fieldName;
        if (variables.ID){
            read();
        }
    </cfscript>
    <cfreturn this />
</cffunction>

<cffunction name="read" access="private" output="false" returntype="void">
    <cfquery name="local.q" datasource="#variables.dsn#">
        SELECT fieldName
        FROM CustomField
        WHERE ID = <cfqueryparam value="#variables.ID#" cfsqltype="cf_sql_integer">
    </cfquery>
    <cfif local.q.recordcount>
        <cfset variables.fieldName = local.q.fieldName />
    </cfif>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:05:46.110

由于您正在扩展对象，因此父级和子级的变量范围是共享的，因此`variables.id`在父级中的变量范围在子级中是相同`variables.id`的，并且子级和父级都可以访问或覆盖存储在那里的内容。

同样使用扩展父函数`read`将永远不会被调用，除非子函数读取显式调用它`super.read()`。

此外，除非您已将应用程序和组件设置为使用 ORM，否则这些`cfproperty`标签仅适用于 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:17:56.757

首先，garygilbert 和 KRC 都帮助我指出了正确的方向。谢谢你。

我收集了以下信息：孩子和父母都将共享相同的变量范围，因此在为 super 中的 variables.ID 分配值时，子 variables.ID 值被覆盖。

同样，由于 OO 函数覆盖，子函数 read 优先于父 read 函数。

我调整后的解决方案：在调用 Super 函数之前设置一个临时 ID，即子 ID。因为如果我将 ID 传递给 init 函数，读取函数会自动调用，我想避免在父对象中执行此操作，因为它仍会调用子读取。我调用 Super.init(dsn) 进行初始化，然后调用 Super.setID(ID)，最后调用 Super.read()。超级调用后，我恢复了最初的孩子ID。

```
 <cfscript>
        variables.dsn = arguments.dsn;
        variables.ID = arguments.ID;
        variables.listID = arguments.listID;
        variables.customFieldID = arguments.customFieldID;
        if (variables.ID){
            read();
            if (variables.customFieldID){
                variables.tempID = variables.ID;
                Super.init(dsn=variables.dsn);
                Super.setID(variables.customfieldID);
                Super.read();
                variables.ID = variables.tempID;
            }
        }
    </cfscript> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:43:37.513

我认为发生这种情况的原因是因为 CF 如何`cfproperty`在整个对象的 VARIABLES 范围内而不是在 CFC 的专有范围内限定值（如普遍接受的 VARIABLES.instance 结构实践）。

VARIABLES 范围在您的对象之间共享，包括它是继承的父对象，因此通过在父对象和子对象中命名 ID 值，您实际上只是声明了两次，而不是声明了两个单独的变量。然后，当您将 ID 传递给 your`super.init()`时，它会将您的 ID 值覆盖到您的子 ID 到您传递给父 bean 的 ID 值，从而导致您的结果。如果您想以不同的方式看到这一点，请尝试在您的孩子中创建一个测试函数，该函数与您的父母中的变量名称共享。在您的 中为该变量分配一个值`super.init()`，然后观察您的子函数从您的对象中消失。

所以回答，我不认为你可以不做一些你不想做的事情来解决这个问题。您需要为父 ID 使用不同的名称，或者不使用内置访问器功能并手动编写所有 getter 函数，将它们设置在 CFC 专有的范围内。

# html - SEO：在搜索 google 时使用结构化数据显示类别

> ID：12802419
> 
> 赞同：0
> 
> 时间：2012-10-09T14:35:39.260
> 
> 标签：html, seo, breadcrumbs, microdata

我正在尝试使用结构化数据来确保网站在谷歌搜索结果中包含一个类别。您可以在此示例中看到我的意思：

[http://tinyurl.com/95lryvn](http://tinyurl.com/95lryvn)

在示例中，它显示“人体工程学椅子”作为类别。

我一直在尝试通过使用以下方法来复制它：

**面包屑**

```
<div itemprop="breadcrumb">
  <a href="/">Home</a> &gt;
  <a href="/sets/AlaraReborn/index.html" itemprop="isPartOf">Alara Reborn</a> &gt;
  <a href="ArdentPlea.html">Ardent Plea</a>
</div> 
```

schema.org [isPartOf](http://schema.org/WebPage) itemProp（在上面的代码示例中也可见），但我仍然无法让类别出现。

任何人都可以发布一个简短的样本，在通过[谷歌结构化数据测试器](http://www.google.com/webmasters/tools/richsnippets)进行测试时显示一个类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:06:38.850

您为什么不使用**RDFa**，毕竟，您给出的示例“ **overstock.com** ”，他们正在使用 RDFa 这是该页面的摘录...

```
<ul itemprop="breadcrumb" class="horizontal-list bcrumbs">
  <li typeof="v:Breadcrumb" class="bcrumb-1">
    <a property="v:title" rel="v:url" title="Online Shopping" href="http://www.overstock.com/">Online Shopping</a>
  </li>
  <li typeof="v:Breadcrumb" class="bcrumb-2">
    <span class="bcrumb-arrow"></span>
    <a property="v:title" rel="v:url" title="Office Supplies" href="http://www.overstock.com/Office-Supplies/22/store.html">
    Office Supplies</a>
  </li>

    <li typeof="v:Breadcrumb" class="bcrumb-3">
    <span class="bcrumb-arrow"></span>
    <a property="v:title" rel="v:url" title="Office Furniture" href="http://www.overstock.com/Office-Supplies/Office-Furniture/310/dept.html">
      Office Furniture</a>
    </li>

    <li typeof="v:Breadcrumb" class="bcrumb-4">
     <span class="bcrumb-arrow"></span>
      <a property="v:title" rel="v:url" title="Office Chairs &amp; Accessories" href="http://www.overstock.com/Office-Supplies/Office-Chairs-Accessories/3637/cat.html">
      Office Chairs &amp; Accessories</a>
    </li>

    <li typeof="v:Breadcrumb" class="bcrumb-5">
      <span class="bcrumb-arrow"></span>
      <a property="v:title" rel="v:url" title="Ergonomic Chairs" href="http://www.overstock.com/Office-Supplies/Ergonomic-Chairs/22529/subcat.html">
      Ergonomic Chairs</a>
      <i class="last-child"></i>
    </li> 
```

`

我可以在这里解释一切，但我坚信我无法匹配谷歌给出的解释。

因此，如果您还没有阅读这些解释（下面的链接），我强烈建议您阅读它们。我希望这些能解决你的问题。

*   [丰富的片段](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170)

*   [RDFa](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146898)

# facebook - 如何在群组中使用 facebook api

> ID：12802423
> 
> 赞同：0
> 
> 时间：2012-10-09T14:35:49.023
> 
> 标签：facebook, api, facebook-graph-api, tornado

我创建了一个应用程序来使用 Python 测试 facebook api，然后，在应用程序中，我创建了它的**Group**，但是，**这个 Group 不知道我是谁**的问题；它显示我是管理员，但是当我尝试使用 Tornado 发布某些内容时，我得到了错误

```
GraphAPIError: (#210) User not visible 
```

这是因为它似乎删除了 cookie，因为当我使用该组的个人资料时，我看不到 GraphAPI，因为它不知道谁是经过身份验证的！

这是代码：

```
class MainHandler(BaseHandler, tornado.auth.FacebookGraphMixin):
    @tornado.web.authenticated
    @tornado.web.asynchronous
    def get(self):
        self.facebook_request("/me/home", self.print_callback,access_token=self.current_user["access_token"])
        a = self.current_user["access_token"]
        self.graph = GraphAPI(a)
    def print_callback(self, data):
        self.graph.post_wall(self, "heloooooooo") 
```

抱歉，因为我不太了解用户令牌和组令牌背后的逻辑？在这里我有一个用户令牌？因为我是管理员，所以我不能发帖！

编辑：这是我从应用程序中拍摄的一些快照：

[图 1](http://s9.postimage.org/jignmk86n/uri.png) [图 2](http://s9.postimage.org/v6643d7xr/permissions.png)

更新：我试过这个：

```
def print_callback(self, me):
    self.graph.post_wall(self, "helooooo", profile_id="267914489995838") 
```

并得到错误：

```
self.graph.post_wall(self, "helooooo", profile_id="267914489995838")
TypeError: post_wall() got multiple values for keyword argument 'profile_id' 
```

我使用了[Tornado-Facebook-API中的内容](https://github.com/pauloalem/tornado-facebook-sdk/blob/master/facebook/graphapi.py#L74)

```
def post_wall(self, message, profile_id='me', body=None, **kwargs):
    #XXX move to separate User class?
    body = body or {}
    body['message'] = message
    self._make_request("{0}/feed".format(profile_id), method='POST',
            body=body, **kwargs) 
```

update2：这是完整的代码

```
class BaseHandler(tornado.web.RequestHandler):
def get_current_user(self):
    user_json = self.get_secure_cookie("user")
    if not user_json: return None
    return tornado.escape.json_decode(user_json)

class MainHandler(BaseHandler, tornado.auth.FacebookGraphMixin):
@tornado.web.authenticated
@tornado.web.asynchronous
def get(self):
    self.facebook_request("/me/accounts", self._on_accounts, 
     access_token=self.current_user["access_token"])
    self.a = self.current_user["access_token"]
    self.graph = GraphAPI(self.a)

def _on_accounts(self, account):
    if account is None:
        # Session may have expired
        print "on accounts failed"
        return

    for acc in account["data"]:
        if acc["id"] == "267914489995838":
            print acc["access_token"]
            self.facebook_request("/PAGE_ID/feed", 
               post_args={"message": "Test"}, 
               access_token=acc["access_token"],     
               callback=self.async_callback(self._on_page_post))

def _on_page_post(self, post):
    if not post:
        # Post failed
        return

class AuthLoginHandler(BaseHandler, tornado.auth.FacebookGraphMixin):
@tornado.web.asynchronous
def get(self):
    my_url = (self.request.protocol + "://" + self.request.host +
              "/auth/login?next=" +
              tornado.escape.url_escape(self.get_argument("next", "/")))
    if self.get_argument("code", False):
        self.get_authenticated_user(
            redirect_uri=my_url,
            client_id=self.settings["facebook_api_key"],
            client_secret=self.settings["facebook_secret"],
            code=self.get_argument("code"),
            callback=self._on_auth)
        return
    self.authorize_redirect(redirect_uri=my_url,
                            client_id=self.settings["facebook_api_key"],
                            extra_params={"scope": "read_stream, publish_stream"})

def _on_auth(self, user):
    if not user:
        raise tornado.web.HTTPError(500, "Facebook auth failed")
    self.set_secure_cookie("user", tornado.escape.json_encode(user))
    self.redirect(self.get_argument("next", "/"))

class AuthLogoutHandler(BaseHandler, tornado.auth.FacebookGraphMixin):
def get(self):
    self.clear_cookie("user")
    self.redirect(self.get_argument("next", "/"))

class PostModule(tornado.web.UIModule):
def render(self, post):
    return self.render_string("modules/post.html", post=post) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:14:53.427

一些澄清：

*   #200 错误是权限错误。在这种情况下，您无权在某处发帖。
*   令牌有两种主要类型：用户令牌和页面令牌
*   您可以将组添加到应用程序的角色[http://developers.facebook.com/blog/post/531/](http://developers.facebook.com/blog/post/531/)
*   据我所知，没有办法*将*应用程序添加到组中

所以我认为根据你想要做两件事的 Facebook id

*   发布到应用程序的时间线
*   通过应用程序发布到群组

*发布到应用程序的时间线*

这需要应用程序页面访问令牌，您可以`/me/accounts`使用 `manage_pages`和`publish_stream`权限获得该令牌

```
self.facebook_request("/me/accounts", self._on_accounts, 
         access_token=self.current_user["access_token"])

def _on_accounts(self, account):
        if account is None:
            # Session may have expired
            print "on accounts failed"
            return

        for acc in account["data"]:
            if acc["id"] == "PAGE_ID":
                print acc["access_token"]
                self.facebook_request("/PAGE_ID/feed", 
                   post_args={"message": "Test"}, 
                   access_token=acc["access_token"],     
                   callback=self.async_callback(self._on_page_post))

def _on_page_post(self, post):
        if not post:
            # Post failed
            return 
```

有关更多信息，请参阅[http://developers.facebook.com/docs/reference/api/application/](http://developers.facebook.com/docs/reference/api/application/)

一个完整的例子可以在[https://gist.github.com/3867203](https://gist.github.com/3867203)看到（它不处理重复发布）

# ios - 核心数据谓词不匹配布尔属性

> ID：12802424
> 
> 赞同：0
> 
> 时间：2012-10-09T14:35:50.803
> 
> 标签：ios, core-data, nspredicate, nsfetchedresultscontroller

我有一个`NSManagedObject`带有布尔属性的子类。它是非可选的，`NO`作为默认值。在模型接口中，它被声明为`@property (nonatomic, retain) NSNumber * deleted;`，在实现中，`@dynamic deleted;`。

如果我检查底层 SQLite 文件，它会正确保留。但是，我发现使用查询此属性的谓词进行的提取无法正常工作。我已经尝试过`deleted == YES`,`deleted == %@`和`@YES`,`[NSNumber numberWithBool:YES]`确实如此`deleted == 1`。我什至尝试过使用一个等号来摆脱纯粹的巫毒妄想症。没有任何效果。

这导致我的代码中使用`NSFetchedResultsController`. 完整的谓词当前是`(list = %@) OR (deleted = YES)`. 我更改`deleted`为`@YES`，更改 的值`list`，并且控制器发出了一个意想不到的`NSFetchedResultsChangeDelete`，尽管对象在逻辑上仍与谓词匹配。

毫无疑问，它与谓词*不*匹配（至少在内存中），因为我已经测试过：

```
BOOL matchesBefore = [self.fetchedResultsController.fetchRequest.predicate evaluateWithObject:thing];
// do stuff, setting thing.deleted = @YES, thing.list = @"something else"
BOOL matchesAfter = [self.fetchedResultsController.fetchRequest.predicate evaluateWithObject:thing];
NSAssert(matchesBefore && matchesAfter, @"Should still match"); 
```

有趣的是，在调试器中，属性显示为`deleted = 0;`，但打印实际`NSNumber`产量`(NSNumber *) $5 = 0x07455ec0 1`。同样，在底层数据库中，该值正确存储为“1”。

所以我很困惑。有任何想法吗？这是 iOS，在模拟器和设备上都在 5.x 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T16:18:01.293

听起来像是与保留名称的冲突，一些深层的无证（？）使用关键字**deleted**。`NSManagedObject`（在 a或.的上下文中不会感到奇怪`NSFetchedResultsController`。）尝试将字段名称更改为其他名称。

# android - 使用 NDK 在 pthread 中调用 java 函数

> ID：12802426
> 
> 赞同：2
> 
> 时间：2012-10-09T14:35:54.207
> 
> 标签：android, android-ndk, java-native-interface, pthreads

我想在 pthread 中调用 java 方法。

C++ 方法是这样开始的：

```
char* FileLoader::getStringFromFile(char* a_filename)
{
   JNIEnv *env;
   g_jvm->AttachCurrentThread (&env, NULL);
   jclass cls = env->FindClass(JAVA_FILE_LOADER_CLASS);
   ... 
```

g_jvm 指向 JavaVM 对象。它是在应用程序启动时在 JNI_OnLoad() 方法中设置的。

当调用“FindClass”时，它会抛出“noClassDefFoundError”，但如果我在主线程中调用此方法，它会按预期工作。

我忘记了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:09:49.410

好的，我通过 technomage 的建议解决了这个问题：

在我的 JNI_OnLoad() 方法中：

```
jint JNI_OnLoad(JavaVM* vm, void * reserved)
{
    JNITools::g_jvm = vm;

    JNIEnv *env;
    g_jvm->AttachCurrentThread (&env, NULL);jclass tmpClass = env->FindClass("com/Framework/IO/CFileLoader");
    g_fileLoaderClass = (jclass)env->NewGlobalRef(tmpClass);
    ... 
```

我的第一次测试失败了，因为我忘记调用 NewGlobalRef()。

该[文档](http://android-developers.blogspot.fr/2011/11/jni-local-reference-changes-in-ics.html)帮助我理解了为什么需要它。

# c# - 在 c# Unity 中获取实时视频流

> ID：12802430
> 
> 赞同：3
> 
> 时间：2012-10-09T14:36:02.047
> 
> 标签：c#, unity3d, ip-camera

我正在使用 Unity3D c# 并想阅读视频提要以显示在纹理上。

这里的问题是我想从实时源中获取视频，例如 IP 摄像机。猜测像[这样](http://www.stickam.com/)或[这样](http://bambuser.com/broadcasts)的类似网站会使用类似的技术。还针对这样的应用程序进行[测试](http://itunes.apple.com/us/app/ip-cam/id333208495?mt=8.)

真的不知道从哪里开始，尝试 TCPListener 和 Socket 但不能真正使用 url，只是 ip 和端口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T09:25:08.063

简单的解决方案是从提供此类功能的图像服务器应用程序中获取单个帧。可以在[Unity3d 文档](http://docs.unity3d.com/Documentation/ScriptReference/WWW.LoadImageIntoTexture.html)中找到这种技术的一个示例。 用于测试该设置的简单图像服务器可以是任何 IP-cam 应用程序。有关详细信息，请参阅[本文](http://www.stareat.it/sp.aspx?g=30b7f8238c52453b8bb4978b63577d33)。

# rtsp - 如何使用 Live555 暂停和播放流

> ID：12802432
> 
> 赞同：3
> 
> 时间：2012-10-09T14:36:04.610
> 
> 标签：rtsp, live555

我正在使用正在流式传输到另一个程序的 Live555 访问视频服务器。我想向视频服务器发送 rtsp PAUSE 和 PLAY 命令以停止流式传输到任何其他程序。这可能吗？我的代码似乎没有做任何事情。我可以连接到服务器，服务器会验证我是否收到了完整的 PAUSE 命令：

视频服务器.h

```
//must make this store session so we can access the session in the static
//callbacks 
class MyRTSPClient: public RTSPClient{
protected:
  MyRTSPClient(UsageEnvironment& env, char const* rtspURL,
    int verbosityLevel, char const* applicationName, portNumBits tunnelOverHTTPPortNum):
  RTSPClient(env, rtspURL, verbosityLevel, applicationName, tunnelOverHTTPPortNum)
    {

    }

public:

  MediaSession* session_;

  bool sessionStarted_;

  static MyRTSPClient* createNew(UsageEnvironment& env, char const* rtspURL,
                                     int verbosityLevel = 0,
                                     char const* applicationName = NULL,
                                     portNumBits tunnelOverHTTPPortNum = 0) 
    {
      return new MyRTSPClient(env, rtspURL, verbosityLevel, applicationName,     tunnelOverHTTPPortNum);
      }

};

class VideoServer
{

public:

  VideoServer();

private:
  TaskScheduler* scheduler_;
  UsageEnvironment* env_;
  MyRTSPClient* rtspClient_;
  char eventLoopWatchVariable;

  //Asynchronously start the connection
  void StartConnection();

  static void callbackDESCRIBE(RTSPClient* rtspClient, int resultCode, char* resultString);

  static void callbackPAUSEPLAY(RTSPClient* rtspClient, int resultCode, char* resultString);
}; 
```

视频服务器.cpp

```
VideoServer::VideoServer()
{
  eventLoopWatchVariable = 0;
  scheduler_ = BasicTaskScheduler::createNew();
  env_ = BasicUsageEnvironment::createNew(*scheduler_);

  //create rtsp client with default params and our url and environment
  rtspClient_ = MyRTSPClient::createNew(*env_, 
      MINI_HARV_AXIS_RTSP_URL, 4, "jtalon5");

  //call description to initialize the session

  if (rtspClient_ == NULL) {
    std::cout << "Failed to create a RTSP client for URL \"" << 
    MINI_HARV_AXIS_RTSP_URL << std::endl;
    return;
  }
  std::cout << "made the client!" << std::endl;
  // Next, send a RTSP "DESCRIBE" command, to get a SDP description for the stream.
  // Note that this command - like all RTSP commands - is sent asynchronously; we do    not block, waiting for a response.
  // Instead, the following function call returns immediately, and we handle the RTSP response later, from within the event loop:
  rtspClient_->sendDescribeCommand(callbackDESCRIBE); 

  //start doEventLoop in separate thread so it is not blocking
  boost::thread thr1(&MiniHarvAxisInterface::StartConnection, this);

}

void VideoServer::StartConnection()
{
  env_->taskScheduler().doEventLoop(&eventLoopWatchVariable);
}

void MiniHarvAxisInterface::callbackDESCRIBE(RTSPClient* rtspClient, int resultCode, char* resultString) 
{
  std::cout << "describe" << resultString << std::endl;
  UsageEnvironment& env = rtspClient->envir();

  char* const sdpDescription = resultString;
  ((MyRTSPClient*)rtspClient)->session_ = MediaSession::createNew(env, sdpDescription);
  ((MyRTSPClient*)rtspClient)->sessionStarted_ = true;

  if(((MyRTSPClient*)rtspClient)->session_ == NULL)
    std::cout << "did not create session" << std::endl;
  else
    std::cout << "created session" << std::endl;

  rtspClient->sendPauseCommand(*((MyRTSPClient*)rtspClient)->session_, &callbackPAUSEPLAY);
}

void MiniHarvAxisInterface::callbackPAUSEPLAY(RTSPClient* rtspClient, int resultCode, char* resultString)
{
  //do nothing
} 
```

似乎我只能暂停和播放我在此过程中创建的流。使用Live555是这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-12T02:06:11.687

是的，这在 Live555 中是可能的。

默认情况下，除非您重新定义 pauseStream 函数，否则 Live555 什么都不做（请参阅下面 Live555 源代码中的 pauseStream 函数中的注释）：

```
// default implementation: do nothing 
```

您必须创建自己的会话类，并且必须重新定义 pauseStream 函数，如下例所示：

**您的媒体会话 .h 文件应类似于：**

```
#include <MediaSubsession.hh>
class YOURMediaSubsession: public MediaSubsession {

... //You can leave this empty if you like

private:

...

  virtual void pauseStream(unsigned /*clientSessionId*/,void* /*streamToken*/);
}; 
```

**您的媒体会话 .cpp 文件应类似于：**

```
#include <YOURMediaSubsession.hh>
void YOURMediaSubsession::pauseStream(unsigned /*clientSessionId*/,
                    void* /*streamToken*/) {
  // default implementation: do nothing
} 
```

您可以在此函数中添加您喜欢的任何内容，无论是停止/终止所有流，还是让编码器保持编码和同一帧，以产生流暂停预设时间的错觉是都由你定。

请注意，我可以在您的代码中看到您使用的是默认 MediaSession 类，如下面的代码所示：

```
((MyRTSPClient*)rtspClient)->session_ = MediaSession::createNew(env, sdpDescription); 
```

您将需要基于 MediaSession 类构建自己的 YOURMediaSubsession 类，以重新定义 pauseStream 函数，如上所示，然后您执行暂停，而不是 live555。它应该看起来更像：

```
((MyRTSPClient*)rtspClient)->session_ = YOURMediaSubsession::createNew(env, sdpDescription); 
```

# caching - openrasta 中的服务器端缓存

> ID：12802437
> 
> 赞同：5
> 
> 时间：2012-10-09T14:36:19.510
> 
> 标签：caching, openrasta

我有一个站点正在为来自多个客户端（浏览器、其他应用程序、unix shell 脚本、python 脚本等）的相同资源的 JSON 表示进行相当困难的轮询。

我想添加一些缓存，以便一些资源在服务器中缓存一段可配置的时间，以避免处理请求和将资源序列化为 JSON 的 CPU 命中。我当然可以自己将它们缓存在处理程序中，但随后会对每个请求进行序列化处理，并且还必须修改处理程序的负载。

我查看了 openrasta-caching 模块，但认为这仅用于控制浏览器缓存？
那么，在编解码器生成资源之后，如何让 openrasta 缓存资源的呈现表示有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:18:42.993

openrasta-caching 确实初步支持服务器端缓存，通过 API，您可以使用 ServerCaching 属性映射到 asp.net 服务器端缓存。也就是说，它并不完整，openrasta-caching 也不完整。这是一个 0.2，需要几天的工作才能使其成为一个好的 v1，它完全支持我想要支持的所有场景，而 asp.net 缓存基础设施目前不支持（主要是使 OpenRasta 中的缓存工作就像一个 http 中介，而不是像 asp.net 领域那样以对象和 .net 为中心的中介，包括在您希望允许客户端强制服务器重做查询的时候，客户端对服务器缓存的控制）。由于我目前没有致力于缓存的客户项目，因此很难证明对该插件的任何进一步工作是合理的，所以我现在没有为它编码任何东西。不过，我确实有 4 天的空闲时间，所以如果您希望将 openrasta-caching 提升到 0.3，并且满足 4 天工作的任何要求，请私信我。

您可以使用 IOperationInterceptor 实现更简单的东西并使用它插入 asp.net 管道，或者更加网络友好并使用 squid 实现进程外缓存并依靠 openrasta-caching 生成正确的 http 缓存指令。

也就是说，对于您的问题，如果成本是 json，您甚至可能不需要服务器缓存。如果您将最后修改或 Etag 映射到处理程序返回的内容，它将在适当的`304`地方正确生成 a，并一起绕过 json 渲染，前提是您的客户端执行条件请求（并且应该这样做）。

还有一个提议的 API，允许您通过对 last modified/etag 进行第一次查询以返回 304 而不检索任何数据来进一步优化您的 API。

# cakephp - Cakephp 2 中的 Set::nest 是如何工作的？

> ID：12802442
> 
> 赞同：2
> 
> 时间：2012-10-09T14:36:39.657
> 
> 标签：cakephp, nested, resultset

由于缺乏适当的文档，我很难理解“Set::nest”CakePhp 函数。

如果有人能用我的例子概括地解释如何正确使用它，我将不胜感激。

假设我有这棵树：

```
array(
    (0) => array(
        'Category' => array('name' => 'Cat 1'),
        'Course' => array(
            'name' => 'Course 1'
        ),
        'Day' => array('date' => '2012-01-01')
    ),
    (1) => array(
        'Category' => array('name' => 'Cat 1'),
        'Course' => array(
            'name' => 'Course 1'
        ),
        'Day' => array('date' => '2012-01-02')
    ),
    (2) => array(
        'Category' => array('name' => 'Cat 1'),
        'Course' => array(
            'name' => 'Course 3'
        ),
        'Day' => array('date' => '2012-01-06')
    ),
    (3) => array(
        'Category' => array('name' => 'Cat 2'),
        'Course' => array(
            'name' => 'Course 2'
        ),
        'Day' => array('date' => '2012-01-02')
    ),
) 
```

转化为：

```
array(
    'Cat 1' => array(
        'Course' => array(
            'name' => 'Course 1'
        ),
        'Day' => array(
            array('date' => '2012-01-01'),
            array('date' => '2012-01-02')
        ),
        'Course' => array(
            'name' => 'Course 3'
        ),
        'Day' => array(
            array('date' => '2012-01-06')
        ),
    ),
    'Cat 2' => array(
        'Courses' => array(
            'name' => 'Course 2'
        ),
        'Day' => array(
            array('date' => '2012-01-03')
        )
    ),
) 
```

如您所见，这是一种双重嵌套，因为“​​类别”可以有多个“课程”行，而“课程”可以有多个“天”。

我可以遍历它并手动完成。

所以第一个问题是：我可以用 Set::nest 来转换它吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:37:30.290

你所要求的是不可能的。您的数组无效。您需要更改格式以将每个类别作为嵌套数组`'cat' => array(array('course 1' => ...), array('course 2' => ...))`

```
print_r(array(
    'Cat 1' => array(
        'Course' => array(
            'name' => 'Course 1'
        ),
        'Day' => array(
            array('date' => '2012-01-01'),
            array('date' => '2012-01-02')
        ),
        'Course' => array(
            'name' => 'Course 3'
        ),
        'Day' => array(
            array('date' => '2012-01-06')
        ),
    ),
    'Cat 2' => array(
        'Courses' => array(
            'name' => 'Course 2'
        ),
        'Day' => array(
            array('date' => '2012-01-03')
        )
    ),
)); 
```

输出：

```
Array
(
    [Cat 1] => Array
        (
            [Course] => Array
                (
                    [name] => Course 3
                )

            [Day] => Array
                (
                    [0] => Array
                        (
                            [date] => 2012-01-06
                        )

                )

        )

    [Cat 2] => Array
        (
            [Courses] => Array
                (
                    [name] => Course 2
                )

            [Day] => Array
                (
                    [0] => Array
                        (
                            [date] => 2012-01-03
                        )

                )

        )

) 
```

# android - startService 方法被调用但没有任何反应

> ID：12802443
> 
> 赞同：1
> 
> 时间：2012-10-09T14:36:40.970
> 
> 标签：android, android-service

我正在尝试从广播中启动服务，但由于某种原因，我的服务永远不会被调用。这是我的接收器：

```
private void initReceiver() {
    receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals("telecom.IT.DigiCARE.REC")) {
                Log.d("MainActivity", "Intent received from server!");

                byte[] data = intent.getByteArrayExtra("Data");
                String params = intent.getStringExtra("Params");

                Intent i = new Intent(MainActivity.this, DecodeService.class);
                i.putExtra("Data", data);
                i.putExtra("Params", params);

                startService(i);
            }
        }
    };

    registerReceiver(receiver, new IntentFilter("telecom.IT.DigiCARE.REC"));
} 
```

这是我的服务：

```
public class DecodeService extends Service {

@Override
public void onStart(Intent intent, int startId) {
    String params = intent.getStringExtra("Params");
    byte[] data = intent.getByteArrayExtra("Data");

    decodeMessage(params, data);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    String params = intent.getStringExtra("Params");
    byte[] data = intent.getByteArrayExtra("Data");

    decodeMessage(params, data);
    return START_STICKY;
}
} 
```

我期待错误出现在清单中的某个地方，但我没有看到它。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.telecomIT.digicare"
android:versionCode="1"
android:versionName="1.0" >

<services
        android:name=".DecodeService"
        android:enabled="true" /> 
```

这不是因为广播不起作用，因为 startService 被调用，但是没有任何反应..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:55:00.580

我想我找到了问题..我有 service* *s* * 而不是 service。奇怪的是没有产生 lint 错误或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T13:50:43.050

Your declaration must be declared after declaration of the where specify the service package. Try it:

```
 <meta-data <!-- First -->
                android:name="com.google.android.gms.version"
                android:value="@integer/google_play_services_version" />
        <services <!-- Second -->
                android:name=".DecodeService"
                android:enabled="true" /> 
```

# objective-c - 在 ViewController 上子类化 UIScrollView performSegue

> ID：12802444
> 
> 赞同：0
> 
> 时间：2012-10-09T14:36:52.937
> 
> 标签：objective-c, ios, uiscrollview, storyboard, segue

我有一个实现 touchesEnded 方法的自定义 UIScrollView 类。我的项目有一个故事板，我试图在视图控制器上调用 performSeguewithIdentifier，但是当我调用该方法时`changePhoto`，它给了我下面的错误。我已验证我的 segue 标记正确，没有拼写错误。看起来当我创建 PhotoViewController 的新实例时，它不会创建任何情节提要和/或 segues。我该怎么做才能让 segue 从我的 UIScrollView 正常工作？

自定义UIScrollView.m

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *touch = [touches anyObject];

    if ([[touch view] isKindOfClass:[UIImageView class]]) {
        UIView *imageView = [touch view];
        NSInteger tag = imageView.tag;
        NSLog(@"Tag: %d", tag);
        PhotoViewController *vc = [[PhotoViewController alloc]init];
        [vc changePhoto:1];
    }
} 
```

PhotoViewController.m

```
-(void)changePhoto:(int)spaceId {
    [self performSegueWithIdentifier: @"photoSegue" sender: self];
} 
```

错误：

> 2012-10-09 10:28:38.765 Spaces[82945:11303] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“接收者（）没有标识符为“photoSegue”的segue”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:13:23.640

尝试用这个初始化你的视图控制器

```
PhotoViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"myIdentifier"] 
```

请务必在界面构建器中设置相应视图控制器的标识符。

# clojure - 第一个 clojure 编译器？

> ID：12802447
> 
> 赞同：6
> 
> 时间：2012-10-09T14:37:01.163
> 
> 标签：clojure

Clojure 主要是用 Clojure 编写的，但必须有一个用其他东西（可能是 Java）编写的 clojure 编译器的“第一个”版本。

该编译器的代码在任何地方都可用吗？

我的兴趣纯粹是学术性的，而不是生产性的，我想看看 Rich Hickey 处理鸡/蛋问题的方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T17:38:19.883

clojure 编译器是用 java 编写的，而不是 clojure。因此，当前版本将满足您的好奇心。当然，说宏是编译器的一部分是一个合理的观点，并且这些确实是用clojure编写的，但是它们与您提到的鸡/蛋问题无关，这可以通过在Java中使用编译器来解决。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T18:03:01.330

当您使用与正在编译的语言相同的语言编写编译器时，编译器引导是一个常见问题。

但是，对于 Clojure，编译器[是用 Java 编写的](http://dev.clojure.org/display/design/Compiler+in+Clojure)，因此不需要复杂的游戏。

为了有趣的历史参考，Haskell 编译器（用 Haskell 编写）GHC 最初是通过[Lazy ML](http://en.wikipedia.org/wiki/Lazy_ML)编译的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T15:43:26.213

不确定这是否与您的兴趣有关，但 Rich 最初研究的是一种名为 DotLisp 的语言，为此他开始研究 JScheme，并将其用作原始代码的基础并最终完全替换。

DotLisp 在这里：[http ://dotlisp.sourceforge.net/dotlisp.htm](http://dotlisp.sourceforge.net/dotlisp.htm)

JScheme 在这里：http: [//jscheme.sourceforge.net/jscheme/main.html](http://jscheme.sourceforge.net/jscheme/main.html)

（琐事：JScheme 的作者之一是 Brandeis 教授 Tim Hickey，与 Rich 没有任何关系。）

# php - Twitter/Facebook/其他 API 结果的文件缓存 vs mySQL 存储

> ID：12802452
> 
> 赞同：1
> 
> 时间：2012-10-09T14:37:16.287
> 
> 标签：php, mysql, facebook, caching, twitter

我有几个带有 Twitter 和 Facebook 订阅源的网站，还有一个引用了健身俱乐部时间表（相当大、复杂的数据树）。我开始涉足缓存以改善页面加载时间，并且由于这些站点托管在我们自己的 VPS 上，因此我还对降低带宽使用感兴趣。

现在我让 Twitter 和 Facebook 将它们序列化/反序列化为一个简单的数据文件，每 10 分钟重写一次。将这些数据写入 mySQL 数据库会更好吗？如果是这样，实现此目的的好方法是什么？

此外，在 Twitter 提要结果中，它只包含我需要的内容，所以它又好又小（3 条最近的推文）。但是对于 Facebook，结果更大，我使用 PHP 对其进行排序以进行显示-我应该存储该结果还是原始提要？有关系吗？

对于另一个更大的 JSON 对象，文件与 mysql 的推荐是否相同？

我很欣赏任何见解，如果它有所作为，我很乐意展示 JSON 计划对象的示例。

PS APC 不是一个可行的选择，因为它似乎破坏了我昨天安装的所有 WordPress。但是，我们在 FastCGI 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:48:15.547

如果它只是一个缓存，我会去寻找一个文件，但我认为这并不重要。当然，除非您有数千或数百万个这些缓存文件，否则 mysql 应该是要走的路。如果您正在使用缓存做其他事情（例如存储多个版本或在文本中搜索），那么我会选择 MySQL。

至于速度，只缓存你正在使用的东西。所以存储处理后的结果而不是原始结果。为什么每次都处理？尝试以尽可能接近实际输出的格式缓存它。

由于您使用 VPS，我认为您不会有大量访问者，因此 APC（虽然非常好）并不是真正需要的。如果您确实想要内存缓存，可以尝试查看 xcache：http: [//xcache.lighttpd.net/](http://xcache.lighttpd.net/)

# android - 如何在 OpenStreetMap 中使用自定义图块？

> ID：12802454
> 
> 赞同：2
> 
> 时间：2012-10-09T14:37:24.907
> 
> 标签：android, openstreetmap, offline-caching

我正在尝试为我的 Android 应用程序创建离线地图。我希望我使用的 MapView 能够将我的图块作为叠加层。为此，我开始研究使用[Mapsforge](http://code.google.com/p/mapsforge/)并试图弄清楚如何使用我自己的地图。看来您需要 OpenStreetMap 数据，我不知道如何为我已经拥有的图块创建它。[OpenStreetMap 的 wiki在这里](http://wiki.openstreetmap.org/wiki/Creating_your_own_tiles)谈论它，但我无法破译它。

需要明确的是，这就是我目前所拥有的：原始地图图像。该地图图像的平铺。我想用于绑定框的坐标。

我只是不确定如何从那个开始，到 Mapsforge 可以使用的地图......感谢您的帮助！

编辑：我也有这个自定义地图的 .kmz 文件，但我认为只能在 Google 地球中打开，不能在 Android 设备上打开。

# symfony - 使用 Doctrine2 扩展 Symfony2 中的实体

> ID：12802458
> 
> 赞同：13
> 
> 时间：2012-10-09T14:37:32.267
> 
> 标签：symfony, doctrine-orm, entities, extending

我很难找到一种方法来使用 Doctrine2 作为 ORM 在 Symfony2 中的包之间适当地扩展实体。

目前，我发现了三种使用 Doctrine2 作为 ORM 在 Symfony2 中扩展实体的方法。`Mapped Superclass`,`Single Table Inheritance`和`Class Table Inheritance`. 这些都不适用于我想做的事情。

我有两个 Bundle：UserBundle 和 BlogBu​​ndle。我希望能够在没有 BlogBu​​ndle 的项目中使用 UserBundle，但 BlogBu​​ndle 将始终用于具有 User Bundle 的项目中。如果 BlogBu​​ndle 依赖于 UserBundle 是可以的，但反之则不然。

**我有两个实体：** BlogBu​​ndle\Entity\Post 和 UserBundle\Entity\User

**关系：** 用户和博客帖子之间需要存在一对多的关系。这是通过映射到 UserBundle\Entity\User.id 的 BlogBu​​ndle\Entity\Post 对象（表）上的 Author_ID 属性（列）实现的

**问题：** 我可以直接从 BlogBu​​ndle 中调用 UserBundle\Entity\User 实体，并使用单向映射来实现我正在寻找的东西。这不允许我从用户对象中访问用户的所有帖子。我可以通过自定义查询访问数据，但这不像用户通过用户对象访问帖子那样干净。

我想做的是从 BlogBu​​ndle 中扩展 UserBundle\Entity\User 对象，并将方法和属性添加到该对象，以建立在 BlogBu​​ndle 中使用的一对多映射。这些都不是持久的，它只是定义了关系，并允许我通过向博客包中的用户对象添加所需的功能来逻辑地访问用户在实现 BlogBu​​ndle 和 UserBundle 的应用程序中创建的所有帖子（从而避免依赖从 UserBundle 到 BlogBu​​ndle）。

当我创建一个 BlogBu​​ndle\Entity\User 对象并扩展 UserBundle\Entity\User 时，我必须声明 @ORM\Table(name="usertablename")。如果我不这样做，任何访问 BlogBu​​ndle\Entity\User 对象的尝试都将无法访问数据库。由于扩展对象中的任何添加都不会持续存在，因此这可以在捆绑包中正常工作。问题是当我调用“php app/console 学说：schema:update --force”时，由于两个实体尝试映射到并创建同一个表，因此存在冲突。我曾尝试使用最近实现的 ResolveTargetEntityListener 功能，但这与 Mapped Superclas、STI 和 CTI 一起强制依赖来自 UserBundle 的 BlogBu​​ndle。

下面是我的对象，以帮助说明我的设置。为了清楚起见，它们已被缩写。我意识到一些语义不正确，但它旨在传达想法和配置。

用户捆绑\实体\用户

```
@ORM\Table(name="app_user")
@ORM\Entity
class User implements UserInterface
{
    ...
} 
```

BlogBu​​ndle\Entity\Post

```
@ORM\Table(name="app_post")
@ORM\Entity
class Post
{
    ...

    @ORM\Column(name="author_id", type="integer")
    protected $author_id;

    @ORM\ManyToOne(targetEntity="\App\BlogBundle\Entity\User", inversedBy="posts")
    @ORM\JoinColumn(name="author_id", referencedColumnName="id")
    protected $author;
} 
```

BlogBu​​ndle\实体\用户

```
use App\UserBundle\Entity\User as BaseUser
@ORM\Entity
@ORM\table(name="app_user")
class User extends BaseUser
{
    ....

    @ORM\OneToMany(targetEntity="App\BlogBundle\Entity\Post", mappedBy="author")
    protected $posts;

    public function __construct()
    {
        parent::_construct();

        $this->posts = new \Doctrine\Common\Collections\ArrayCollection();
    }

    .... 
    /* Getters & Setters, nothing that defines @ORM\Column, nothing persisted */
} 
```

这可行，但问题是我将项目中的两个实体映射到同一个表。扩展对象不会从它的父对象中获取@ORM\Table(name="app_user")，因此它必须在BlogBu​​ndle\Entity\User 中定义。如果没有来自控制器的对该对象的任何引用，则不会访问数据库。由于扩展对象没有持久化任何内容，除非我尝试从控制台更新数据库模式。

我可以使用单向关系，但这限制了我从控制器内访问数据的方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T09:09:55.987

您可以在此链接中查看有关继承的信息：http: [//docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html#single-table-inheritance](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html#single-table-inheritance)

您必须在 UserBundle\Entity\User 中声明：

```
/**
 * @Entity
 * @InheritanceType("SINGLE_TABLE")
 * @DiscriminatorColumn(name="discr", type="string")
 * @DiscriminatorMap({"baseuser" = "UserBundle\Entity\User", "blogUser" = "BlogBundle\Entity\User"})
 */
class User implements UserInterface
{
    ...
} 
```

和 BlogBu​​ndle\Entity\User

```
use App\UserBundle\Entity\User as BaseUser;
/**
 * @ORM\Entity
 */
class User extends BaseUser
{
    ....
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T16:50:33.240

我想你会发现这个 Bundle 很有趣：

[https://github.com/mmoreram/SimpleDoctrineMapping](https://github.com/mmoreram/SimpleDoctrineMapping)

它允许您通过参数定义哪些文件正在映射您的实体，从而允许覆盖您的通用包的每个实体。

例如：

```
parameters:

    #
    # Mapping information
    #
    test_bundle.entity.user.class: "TestBundle\Entity\User"
    test_bundle.entity.user.mapping_file_path: "@TestBundle/Mapping/Class.orm.yml"
    test_bundle.entity.user.entity_manager: default
    test_bundle.entity.user.enable: true 
```

我看到的唯一相反是您必须以相同的方式定义所有下一个实体，因为您禁用了 auto_mapping ...

# graphics - 如何使用随机 RGB 值填充 Direct3D 纹理。用于 HLSL 像素着色器

> ID：12802461
> 
> 赞同：1
> 
> 时间：2012-10-09T14:37:42.787
> 
> 标签：graphics, shader, textures, direct3d, hlsl

我正在尝试为每个像素将 3 个新的随机浮点数放入我的像素着色器中。根据我在[这里](http://www.gamedev.net/topic/389617-how-to-generate-a-random-int-in-hlsl-pixel-shader/)、[这里](https://gamedev.stackexchange.com/questions/32681/random-number-hlsl)和 [这里](https://stackoverflow.com/questions/5149544/can-i-generate-a-random-number-inside-a-pixel-shader)所读到的内容，我相信我需要生成一个包含随机 RGB 值的大纹理，然后在每次绘制调用期间随机生成几个纹理坐标偏移值以产生伪随机效果. 是通过 LockRect 和 UnlockRect API 做到这一点的唯一方法吗？我希望不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:51:24.817

我发现这样做的唯一方法是锁定和解锁矩形方法。但这比我最初想的要容易得多。这是我填充纹理的方法。'为抖动着色器创建随机纹理 rando = New Random() randomText = New Texture(device, 1000, 1000, 1, Usage.Dynamic, Format.A16B16G16R16, Pool.Default) '89599 '89510 Dim data(1000 * 1000 * 8 + 1000 * 63 + 936) 作为字节 rando.NextBytes(data)

```
 Dim dataBox As DataRectangle =
randomText.GetSurfaceLevel(0).LockRectangle(LockFlags.None)
    dataBox.Data.Seek(0, IO.SeekOrigin.Begin)
    dataBox.Data.Write(data, 0, data.Length)
    dataBox.Data.Close() 
```

正如您从代码中看到的那样，我必须添加许多额外的字节才能用随机值完全填充纹理。我使用了 1000 x 1000 64 位纹理，所以您会认为我需要 1000*1000*8 字节的数据，但我需要额外的 63936 字节来填充纹理，我不知道为什么。但这似乎可以满足我的需求。

# jquery - rails 3中的多个图像选择

> ID：12802464
> 
> 赞同：0
> 
> 时间：2012-10-09T14:37:51.040
> 
> 标签：jquery, ruby, ruby-on-rails-3

在我的一个应用程序中，我实现了多个图像选择选项，其中用户单击浏览按钮并选择图像。如果他希望在添加更多图像链接上添加更多图像点击，则将表单部分附加到 div 并再次重复相同的过程。

当用户单击浏览按钮并通过按住“CTRL”选择多个图像并根据选择的图像数量添加相同数量的字段时，有没有办法。（就像在 facebook 中一样）。

# c++ - 尝试在 Mac 上编译 GLFW 时出现 GLFW 上的链接器错误

> ID：12802467
> 
> 赞同：0
> 
> 时间：2012-10-09T14:37:53.643
> 
> 标签：c++, xcode, cocoa, linker, glfw

我正在尝试在带有 xcode 的 Mac 上使用 glfw 2.7.5，但出现以下错误：

```
Undefined symbols for architecture i386:
  "_glfwGetKey", referenced from:
      Game::run() in Game.o
      RedScene::update(float, bool) in main.o
  "_glfwGetWindowParam", referenced from:
      Game::run() in Game.o
  "_glfwInit", referenced from:
      Window::Window() in Window.o
  "_glfwOpenWindow", referenced from:
      createWindow(int, int, int, int, int, int, int, int) in Window.o
  "_glfwOpenWindowHint", referenced from:
      Window::Window() in Window.o
  "_glfwPollEvents", referenced from:
      Game::run() in Game.o
  "_glfwSetKeyCallback", referenced from:
      createWindow(int, int, int, int, int, int, int, int) in Window.o
  "_glfwSetMouseButtonCallback", referenced from:
      createWindow(int, int, int, int, int, int, int, int) in Window.o
  "_glfwSetMousePosCallback", referenced from:
      createWindow(int, int, int, int, int, int, int, int) in Window.o
  "_glfwSetMouseWheelCallback", referenced from:
      createWindow(int, int, int, int, int, int, int, int) in Window.o
  "_glfwSetWindowTitle", referenced from:
      Window::setCaption(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) in Window.o
  "_glfwSwapBuffers", referenced from:
      RedScene::update(float, bool) in main.o
  "_glfwSwapInterval", referenced from:
      createWindow(int, int, int, int, int, int, int, int) in Window.o
  "_glfwTerminate", referenced from:
      Window::~Window() in Window.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经阅读了[使用 GLFW 和 XCode 的问题：将无法编译](https://stackoverflow.com/questions/9250961/problems-using-glfw-and-xcode-wont-compile)以及互联网上的其他几个链接，但我找不到解决方案。

我已经设置了 Cocoa 框架、OpenGL 框架和 libglfw.a（我使用“sudo make cocoa-install”编译），在我设置 -lgflw 的链接器标志中，我正在为 32 位英特尔构建。起初我是为 64 位构建的，但我认为 GLFW 在 Mac 上还不支持它（我遇到了操纵杆文件错误），当我编译为 32 位时错误发生了变化，它找不到我的功能正在使用。知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:02:34.813

很可能您已经为 64 位构建了 libglfw.a，因此当您尝试在 32 位应用程序中使用它时会出现链接错误。您可以为 32 位重建 libglfw.a（或作为“胖”32 位和 64 位库），或者您可以将您的应用程序构建为 64 位。

请注意，在最近的 Mac OS X 和 Xcode 版本中，gcc 默认构建 64 位代码，因此您需要`-m32`在命令行中指定才能获取 32 位代码。在实践中如何执行此操作取决于 libglfw.a 的生成文件 -`ARCH`您可以在命令行上指定一个或其他符号来强制执行 32 位构建。

# excel - 使用当前的 AutoFilter 加载数据验证

> ID：12802472
> 
> 赞同：0
> 
> 时间：2012-10-09T14:38:05.960
> 
> 标签：excel, excel-2010, validation, autofilter, vba

我有一种情况，我正在使用两个数据验证单元格，这些单元格加载了数据表中一列（每一列）的数据。

### 桌子

市场; 监督；店铺; ……

### 数据验证

*   **cellDV1** - 表中的唯一值**[市场]**
*   **cellDV2** -**表中的唯一值[suprv]**

**当用户查看工作表时，cellDV1 和 cellDV2**都预**加载**了它们各自的唯一值。

 **当用户从**cellDV1**中选择一个值时，它会使用所选值自动筛选**表。**然后，我想重新加载**cellDV2**，并在**Table**中看到精炼的结果。

我遇到的问题是它正在从表中的该列/字段加载所有唯一值，而不是自动过滤结果。

### 用法：

```
LoadDataValidation Range("Table[suprv]"), Range("cellRange") 
```

### 加载数据验证：

```
Dim str As String
str = DistinctValues(srcrng)
Dim val As Validation
Set val = Range(destrng.Address).Validation
val.Delete
val.Add xlValidateList, xlValidAlertStop, xlBetween, str 
```

任何想法，如何只选择过滤结果而不是表中的整个数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:31:48.330

我没有经常使用表格，但是您可以将该`SpecialCells(xlCellTypeVisible)`属性应用于范围吗

所以`Range("Table[suprv]").SpecialCells(xlCellTypeVisible)`作为您在 LoadDataValidation 中的第一个参数**

# php - 如何将刚刚插入的行从 MySql 获取到 php 变量？

> ID：12802479
> 
> 赞同：1
> 
> 时间：2012-10-09T14:38:27.943
> 
> 标签：php, mysql, zend-framework

我正在使用 Zend Framework 和 MySql 来创建我的 web 应用程序。我的 SQL 代码目前如下：

```
public static function newTestResult($testId, $accountId, $score, $deviation, $averageTime)
    {
        try
        {
            $db = self::conn();
            $statement = "INSERT INTO test_results(test_id, test_person_id, score, standard_deviation, average_answer_time, created_at)
                                        VALUES(" . $testId . ", " . $accountId . ", " . $score . ", " . $deviation . ", " . $averageTime . ", NOW())";
            $db->query($statement);
            $db->closeConnection();
        }
        catch(Zend_Db_Exception $e)
        {
            error_log($e->getMessage());
        }
    } 
```

现在我要问的是：如何将刚刚插入的行放入 PHP 中的变量中？我想了解 MySql 为该行自动创建的 id 值。

这是我的表格代码：

```
CREATE TABLE test_results(
id int UNSIGNED AUTO_INCREMENT PRIMARY KEY, 
test_id int UNSIGNED NOT NULL,
test_person_id int UNSIGNED NOT NULL,
score float UNSIGNED NOT NULL,
standard_deviation float UNSIGNED NOT NULL,
average_answer_time float UNSIGNED NOT NULL, 
removed boolean NOT NULL DEFAULT 0,
created_at datetime) CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:46:53.893

看一下 MySQL 函数“LAST_INSERT_ID()”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:49:07.940

有关可用方法的更多详细信息，另请参阅此论坛。 [http://forums.phpfreaks.com/topic/188084-get-last-mysql-id-using-zend-frameworks/](http://forums.phpfreaks.com/topic/188084-get-last-mysql-id-using-zend-frameworks/)

在“普通”PHP 中，我通常使用 mysql_ 函数。mysql_insert_id() 函数返回插入的最后一行的键。我不提倡使用 Zend 方式，只是给出上下文：

> mysql_query("INSERT INTO ...查询");
> 
> $id = mysql_insert_id();

然后在编写与该插入行相关的其他查询时引用该 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:42:42.947

试试这个：

```
$query="SELECT id FROM test_results WHERE test_id=$testId";
$id=$db->query($query); 
```

我认为这就是您要查找的内容，否则您可以将 WHERE 条件更改为您需要的任何内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T14:43:56.363

这应该为您提供最后一个查询的最后一个插入 id。

```
$db->lastInsertId() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T14:47:46.380

来自 MySQL 手册：“如果将记录插入到包含 AUTO_INCREMENT 列的表中，则可以通过调用 mysql_insert_id() 函数来获取存储在该列中的值。” 这是指 C 函数。

在 PHP 手册中，建议您改用 PDO 函数。[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php) `PDO::lastInsertId`

显然，“Zend_Db_Table 上的 insert() 方法将返回最后一个插入 id 的值。” [http://osdir.com/ml/php.zend.framework.db/2007-04/msg00055.html](http://osdir.com/ml/php.zend.framework.db/2007-04/msg00055.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-24T06:22:02.717

要从任何表中获取最后两条记录，您可以使用以下查询

```
SELECT * FROM aa WHERE ID IN(
    (SELECT  COUNT(*) FROM aa),
    (SELECT  COUNT(*) FROM aa)-1
) 
```

# sql - 根据参数值隐藏文本框

> ID：12802480
> 
> 赞同：1
> 
> 时间：2012-10-09T14:38:32.123
> 
> 标签：sql, reporting-services

希望有人可以提供帮助，因为我对 SSRS 很陌生，我试图隐藏一个包含表达式的文本框。当从下拉参数中选择多个值时，我想隐藏该框，但是当只选择一个选项时，我只想显示一个选项。

我目前有一个文本框，其中包含以下表达式

=First（字段！名称。值，“ABC”）

以上当前显示了字段中正确的第一个值，但是当我说选择了更多值时，我想隐藏它，我不确定是否需要将上面的表达式包装在某些东西中或在可见性下的文本框属性

我一直在尝试在文本框属性/可见性选项下添加以下表达式，但运气不佳

=Iif(Parameters!Supplier.IsMultiValue > 1, True, False)

我正在使用 SSRS 2012，尽管我确信我正在尝试做的事情在所有其他版本中都很容易完成。

希望有人可以帮忙，P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:51:53.690

由于多值参数是一个数组，因此您需要使用如下公式：

```
=Iif(Parameters!Supplier.Value.Length > 1, True, False) 
```

或按照 OP 的建议

```
=Iif(Parameters!Supplier.Count > 1, True, False) 
```

# javascript - JavaScript onclick 重定向

> ID：12802482
> 
> 赞同：6
> 
> 时间：2012-10-09T14:38:40.640
> 
> 标签：javascript, onclick

我在这里有这个文本字段和按钮

```
<input name="txtSearch" type="text" id="txtSearch" class="field" />            
<input type="submit" name="btnSearch" value="" id="btnSearch" class="btn" onclick="javascript:SubmitFrm()" /> 
```

当用户点击提交按钮时，这个函数应该运行

```
<script type="text/javascript">
    function SubmitFrm(){
        var Searchtxt = document.getElementById("txtSearch").value();
        window.location = "http://www.example.com/search/?Query=" + Searchtxt;
    }
</script> 
```

但是什么也没有发生，我期望发生的是当用户单击提交按钮时，从搜索文本框中获取值并将用户重定向到 url + 搜索文本框的值......

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-09T14:44:37.423

您的代码中有几个问题：

*   您正在处理`click`提交按钮的事件，其默认行为是将请求发布到服务器并重新加载页面。您必须通过从处理程序返回来禁止此行为`false`：

    ```
    onclick="SubmitFrm(); return false;" 
    ```

*   `value`不能被调用，因为它是一个属性，而不是一个方法：

    ```
    var Searchtxt = document.getElementById("txtSearch").value; 
    ```

*   您在查询字符串中发送的搜索查询必须经过[编码](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)：

    ```
    window.location = "http://www.mysite.com/search/?Query="
        + encodeURIComponent(Searchtxt); 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T14:40:04.777

将 onclick 从

```
onclick="javascript:SubmitFrm()" 
```

到

```
onclick="SubmitFrm()" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T14:40:27.883

做就是了

```
onclick="SubmitFrm" 
```

只有`javascript:`链接 URL 需要前缀。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T15:14:46.237

这样做解决了我的问题

```
<script type="text/javascript">
    function SubmitFrm(){
        var Searchtxt = document.getElementById("txtSearch").value;
        window.location = "http://www.mysite.com/search/?Query=" + Searchtxt;
    }
</script> 
```

我`.value();`改为`.value;`取出`()`

我没有更改文本字段或提交按钮中的任何内容

```
<input name="txtSearch" type="text" id="txtSearch" class="field" />            
<input type="submit" name="btnSearch" value="" id="btnSearch" class="btn" onclick="javascript:SubmitFrm()" /> 
```

奇迹般有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:44:00.450

从您的代码中删除“javascript：”，它应该可以工作。

你碰巧使用 FireFox 吗？我从其他人那里了解到 FireFox 不再接受 'javascript:' 字符串。然而，就我的一生而言，我找不到原始来源（尽管我相信它在 FF 更新说明中的某个地方）。

# php - 使用 php 配置设置会话过期？

> ID：12802488
> 
> 赞同：0
> 
> 时间：2012-10-09T14:38:52.067
> 
> 标签：php, session

**更新**

所以我遇到了另一个我认为几乎相同的问题。我正在使用 silex，我希望会话存储 5 天。我给出了以下值：

```
session.cookie_lifetime: 432000
session.gc_maxlifetime: 432000
session.gc_probability: 100
session.gc_divisor: 100 
```

因此，据我了解，由于概率和除数是相同的数字，gc 应该在每次页面加载时发生，并且会话文件（使用 php 本机文件处理程序进行会话）应该保持 432000（60 * 60 * 24 * 5）秒没有任何对他们的活动。即使有这些值，这个问题也是如此，我的会话似乎在 1-2 小时没有活动的情况下到期。

我什至尝试将 gc_maxlifetime 设置为 5，这似乎工作正常，所以这让我觉得在 gc_maxlifetime 之前触发了其他东西。

我还缺少其他值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:47:24.580

服务器决定何时清除陈旧的会话。

这会在某些时候发生，具体取决于随机数和您给它的机会（在 php.ini 中）。

寻找 session.gc_divisor。

因此，在您的情况下，您的带有 PHPSESSID 的 cookie 仍然存在，并且您的浏览器按应有的方式将其发送到服务器，但服务器找不到相应的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:51:34.117

您还需要在 php.ini 中更改更多变量。检查此[链接](http://prajapatinilesh.wordpress.com/2009/01/14/manually-set-php-session-timeout-php-session/)

# python - django admin - 强制用户创建新记录而不是利用现有记录

> ID：12802491
> 
> 赞同：2
> 
> 时间：2012-10-09T14:38:58.103
> 
> 标签：python, django, django-admin, django-admin-tools

这是一个django模型：

```
class Question(models.Model):
    text = models.TextField(verbose_name=u'Вопрос')
    is_free_text = models.BooleanField(verbose_name=u'Ответ в виде текста?')
    options = models.ManyToManyField('QuestionOption', related_name='option',null=True, blank=True) 
```

和它使用的选项模型：

```
class QuestionOption(models.Model):
    text = models.TextField(verbose_name=u'Вариант ответа')
    score = models.IntegerField() 
```

Django 管理员，当您尝试添加新问题时，将显示一个表单，您可以在其中输入问题文本，勾选 is_free_text 复选框和一个包含现有选项的列表框和一个加号图标，让您添加新选项。

有没有办法禁用此行为并强制用户始终添加新选项，而不是能够同时选择现有选项？理想情况下，我不希望他们看到现有的选项，因为这有时会令人困惑。就像一行文本和一个用于得分的文本框和一个加号图标来添加选项文本及其得分的新记录？

我正在尝试尽可能多地利用现有的 django 管理员，我认为我看到这完全按照我在这里想要表达的方式完成，但不记得在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:50:18.110

据我了解您的问题，您应该使用[`InlineModelAdmin`](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin)：

```
class QuestionOptionInline(admin.StackedInline):
    model = QuestionOption

    extra = 1 # show only one QuestionOption form

    def queryset(self, request):
         # hack: don't show existed QuestionOption
         return QuestionOption.objects.none()

class QuestionAdmin(admin.ModelAdmin):
    fields = ['text', 'is_free_text']
    inlines = [QuestionOptionInline] 
```

# ios5 - iOS5 iPhone 应用无法在 iOS6 iPad 上运行

> ID：12802494
> 
> 赞同：11
> 
> 时间：2012-10-09T14:39:05.187
> 
> 标签：ios5, ios6

好吧，伙计们，

这是一个奇怪的问题。

我有一个 iOS 5.1 iPhone 应用程序；基于导航。

它在 iOS 5.1 iPhone 和 iPad 以及 iOS 5.1 iPhone 和 iPad 模拟器上运行良好。

在 iOS 6 iPhone 模拟器上运行良好。

在 iOS 6 iPad 和 iOS 6 iPad 模拟器上，除非您更改缩放级别，否则它不会工作。

用户界面出现，但按钮不可点击。更改缩放使一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:07:57.830

我在一段生产代码中遇到了同样的问题，使用 Jeffrey 发布的博客中给出的相同解决方法设法解决了这个问题

[http://programmingthomas.wordpress.com/2012/10/08/keep-calm-v1-1-ios-6-ipad-bug/](http://programmingthomas.wordpress.com/2012/10/08/keep-calm-v1-1-ios-6-ipad-bug/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:04:54.167

您必须为 ipad [self.view setBounds: CGRectMake(0f, 0.0f, 768.0f, 1024.0)]; 设置边界大小

# java - 简单的绘画

> ID：12802497
> 
> 赞同：0
> 
> 时间：2012-10-09T14:39:21.250
> 
> 标签：java, awt

我手头有一个看似非常简单的任务。我有一个网格（现在是 500x500），我想在填充时对其进行可视化，并且我想用 Java 编写一个类，这让我很容易做到这一点。我在想一些事情：

```
public class Screen {
  ...

  public void plot(x,y) {
    // change the color of pixel x,y to black
  }

  public void clear() {
    // fill the screen with white
  }
} 
```

我一直在环顾四周，很快在 awt 中找到了 Canvas，但是从我目前能够弄清楚的情况来看，这个小部件只允许我通过覆盖它的绘制方法来绘制它。在我的情况下，这远非最佳，因为这将需要我在每次我只想绘制一个像素时绘制整个网格。

有没有办法让画布只画一个像素而不是整个画布？或者其他方式来完成我在这里寻找的东西？

我宁愿避免使用任何外部库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:01:15.587

您将需要覆盖paint 方法以显示整个网格。

但是，您可以做的是创建一个翻转一个像素的[BufferedImage](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)，然后使用[Graphics.drawImage()](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)将整个图像绘制到 paint 方法中的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:15:33.767

不幸的是`paint()`，每次调用 paint() 时，您都必须覆盖并渲染整个网格。这就是图形组件的工作方式 - Windows 系统/操作系统可能随时请求重新绘制组件（例如，当重新显示/调整大小/移动窗口时）

# git - 不能“git push”。“Heroku Git 错误”已有 4 天了

> ID：12802498
> 
> 赞同：6
> 
> 时间：2012-10-09T14:39:22.107
> 
> 标签：git, heroku

如标题中所述，我无法推送到我的某个应用程序。
“git push”到其他应用程序工作正常，因此设置凭据/密钥是可以的。

错误信息：

```
$ git push app-remote

 !  Heroku Git error, please try again shortly.
 !  See http://status.heroku.com for current Heroku platform status.
 !  If the problem persists, please contact http://support.heroku.com.

fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我对 Heroku 的支持感到失望，因为我的票在 4 天后没有答案:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T20:34:08.910

`$ git push heroku master`

```
Warning: Permanently added the RSA host key for IP address '50.19.85.156' to the list of known hosts.
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

heroku 键：为我添加修复此问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T15:56:05.197

我得到了类似的回应：

```
$ git push heroku master
exec request failed on channel 0
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

**访问应用程序 URL**后推送成功。我想错误必须与过去一小时内未使用的 Heorku 空闲应用程序有关（我的是免费/开发帐户）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-02T13:56:57.147

我也莫名其妙地遇到了这个问题。只需重新启动测功机并`heroku restart`为我修复它。我猜是@akegalj 提到的原因

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T20:33:13.287

存储库已损坏。

Heroku 支持花了一个多星期的时间来修复它。

# java - Solr - 使用 Httpclient 实例化 HttpSolrServer

> ID：12802499
> 
> 赞同：2
> 
> 时间：2012-10-09T14:39:22.983
> 
> 标签：java, solr, httpclient

我需要连接到代理（？）后面的 solr 服务器。在我尝试之后（没什么特别的）：

```
SolrServer server = new HttpSolrServer("https://urltosolr/solr");
try {
    SolrPingResponse pingResponse = server.ping();
} catch (SolrServerException e) {
    ....
} 
```

堆栈跟踪：

```
 org.apache.solr.client.solrj.SolrServerException: IOException occured when talking to server at: https://urltosolr/solr
 ...
 Caused by: javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated 
```

之后我尝试了 HttpSolrServer 的另一个构造函数，但我不知道如何将用户名和密码正确设置到 HttpClient 中。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T17:51:35.497

我没有看到您在代码中尝试通过代理连接的位置，您只在创建`HttpSolrServer`. [您可以在创建](http://lucene.apache.org/solr/api-3_6_0/org/apache/solr/client/solrj/impl/HttpSolrServer.html#HttpSolrServer%28java.lang.String,%20org.apache.http.client.HttpClient%29)`HttpClient`实例时提供自己的实例。您的实例可以包含有关代理的信息。所需代码应如下所示，您可以在[http-components 示例](http://hc.apache.org/httpcomponents-client-ga/examples.html)中找到：`HttpSolrServer``HttpClient`

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpHost proxy = new HttpHost(proxyHost, proxyPort, "http");
httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);
httpclient.getCredentialsProvider().setCredentials(
                    AuthScope.ANY,
                    new UsernamePasswordCredentials(username, password));
SolrServer solrServer = new HttpSolrServer(solrUrl, httpclient); 
```

更多地查看您的问题，我认为您不需要使用代理进行连接。您的错误与https有关。看看[这个](https://stackoverflow.com/questions/2308774/httpget-with-https-sslpeerunverifiedexception)其他问题和答案，看看你需要做什么。您需要查看的 httpclient 版本是 4.x。

# css - 相对于文本 INPUT 的位置 DIV

> ID：12802501
> 
> 赞同：4
> 
> 时间：2012-10-09T14:39:34.367
> 
> 标签：css, dom

有什么方法可以将 DIV 相对于文本 INPUT 发布？

```
<input type="text" id="inp" style="padding-left: 20px" data-kb="GE" />
<div>GE</div> 
```

我想将 DIV 放在输入字段的顶部，在文本之前。

我知道我可以将它们放在同一个 div 中并相对于它进行定位，但我想知道，有没有办法在没有额外的 DIV 的情况下做到这一点。

**编辑：**

我忘了提到我的输入字段的父节点中可能有多个节点，因此相对于父节点定位我的 div("GE") 不是一种方法，因为我无法确定输入在其父节点内的位置。我正在寻找一种方法来相对于另一个节点定位一个节点，当该特定元素是单个标签并且不能有任何子节点时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:24:34.433

对于我所研究的内容，我的问题没有直接的解决方案。因为输入是单个标签，它不能有任何子节点，因此，它不能相对于输入标签呈现。

我想唯一的解决方案是使用复杂的 javascript 或 jQuery (.postion())。如果解决这个问题是绝对必要的，你将不得不找到输入的位置并将 div 相对于它放置，但话又说回来，这不是一个好的解决方案，因为如果输入字段被移动，div 将保持在同一个地方，除非你听到那个特定的 DOM 突变（我什至不知道它是否可能）。

这就是我到目前为止所学到的，我希望是错的，所以如果有人证明我错了，我会很高兴:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:53:53.320

您可以通过对您的 应用否定`margin-top:`来完成此操作`div`：

```
div { 
  margin-top: -16px;    
}​ 
```

[看看这个 JSFiddle。](http://jsfiddle.net/X45ba/)

# jpa - 需要可用的 JPA-Utilities

> ID：12802502
> 
> 赞同：0
> 
> 时间：2012-10-09T14:39:38.137
> 
> 标签：jpa, toplink-essentials

因为我的新项目必须使用仅支持 jpa 1 的 toplink-essentials，所以我正在寻找一些好的 jpa-utilities。到目前为止，我只使用过 jpa 2（EclipseLink 和 Hibernate），它在 99% 的时间内不需要任何实用程序来编写动态查询。

现在我坚持使用 jpa 1，想知道是否有一些实用程序/库可以支持我更动态地编写查询。

强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:43:19.570

TopLink Essentials does support Expression queries which are similar to JPA 2 Criteria. You may be able to use them.

You should also be able to upgrade your server to EclipseLink.

# javascript - 更改列表中的文本

> ID：12802503
> 
> 赞同：1
> 
> 时间：2012-10-09T14:39:38.583
> 
> 标签：javascript, jquery, list, html-lists, pinnacle-cart

我在全新的[14 天 Pinnacle 购物车免费试用](http://a470.carttrial.com)中有两个类别（威尔士语然后英语）：

> “Llyfrau [书籍]”
> 
> “Anrhegion [礼物]”

我需要一个函数来删除不需要的语言。我已经将它用于产品描述，但不适用于类别。

在威尔士我得到

> “安赫吉翁”
> 
> “安赫吉翁”

和英文：

> “礼物”
> 
> “礼物”

这是不完全存在的代码！我认为这就是我所说的不太正确的功能 - `.panel-catalog-categories .content ul li a span`???

编辑 - 这是我从全新安装中添加的所有代码：

```
{if $current_language.language_id == "1"}

  {literal}

  <script type="text/javascript">

   (function($,h,c){var a=$([]),e=$.resize=$.extend($.resize,{}),i,k="setTimeout",j="resize",d=j+"-special-event",b="delay",f="throttleWindow";e[b]=250;e[f]=true;$.event.special[j]={setup:function(){if(!e[f]&&this[k]){return false}var l=$(this);a=a.add(l);$.data(this,d,{w:l.width(),h:l.height()});if(a.length===1){g()}},teardown:function(){if(!e[f]&&this[k]){return false}var l=$(this);a=a.not(l);l.removeData(d);if(!a.length){clearTimeout(i)}},add:function(l){if(!e[f]&&this[k]){return false}var n;function m(s,o,p){var q=$(this),r=$.data(this,d);r.w=o!==c?o:q.width();r.h=p!==c?p:q.height();n.apply(this,arguments)}if($.isFunction(l)){n=l;return m}else{n=l.handler;l.handler=m}}};function g(){i=h[k](function(){a.each(function(){var n=$(this),m=n.width(),l=n.height(),o=$.data(this,d);if(m!==o.w||l!==o.h){n.trigger(j,[o.w=m,o.h=l])}});g()},e[b])}})(jQuery,this);

   jQuery(document).ready(function()

   {

     //call remove brackets if english
      // Product page- Common
      // Description .page-product .product-description

     displayEnglish(".product-description .product-page-block-content");

      // .catalog-product-title"); ???
      // .panel-catalog-categories .title  ????
      displayEnglish(".panel-catalog-categories .content ul li a span");

      //function to select english

      function displayEnglish(text_selector) {
        if($(text_selector).length> 0) {
          var english_text = $(text_selector).text().match(/\[([^/]]+)\]/g);
          jQuery(text_selector).text(english_text[0].slice(1, -1));
      }
    }

   });

  </script>

  {/literal}

  {else}

  {literal}

  <script type="text/javascript">

   (function($,h,c){var a=$([]),e=$.resize=$.extend($.resize,{}),i,k="setTimeout",j="resize",d=j+"-special-event",b="delay",f="throttleWindow";e[b]=250;e[f]=true;$.event.special[j]={setup:function(){if(!e[f]&&this[k]){return false}var l=$(this);a=a.add(l);$.data(this,d,{w:l.width(),h:l.height()});if(a.length===1){g()}},teardown:function(){if(!e[f]&&this[k]){return false}var l=$(this);a=a.not(l);l.removeData(d);if(!a.length){clearTimeout(i)}},add:function(l){if(!e[f]&&this[k]){return false}var n;function m(s,o,p){var q=$(this),r=$.data(this,d);r.w=o!==c?o:q.width();r.h=p!==c?p:q.height();n.apply(this,arguments)}if($.isFunction(l)){n=l;return m}else{n=l.handler;l.handler=m}}};function g(){i=h[k](function(){a.each(function(){var n=$(this),m=n.width(),l=n.height(),o=$.data(this,d);if(m!==o.w||l!==o.h){n.trigger(j,[o.w=m,o.h=l])}});g()},e[b])}})(jQuery,this);

    jQuery(document).ready(function()

    {

      //call remove brackets if english

      displayWelsh(".product-description .product-page-block-content");

      displayWelsh(".panel-catalog-categories .content ul li a span");
      //function to select welsh

      function displayWelsh(text_selector) {
        if($(text_selector).length> 0) {
          var welsh_text = $(text_selector).text().replace(/\[([^/]]+)\]/g, "");

          jQuery(text_selector).text(welsh_text);
      }
    }

   });

  </script>

  {/literal}

{/if} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:05:59.023

您在`displayEnglish`函数中的正则表达式看起来错误 - 您有：

```
\[([^}]+)\] 
```

它匹配一个开头`[`，然后找到最长的可能不匹配的字符`}`，然后是一个结尾`]`。

大概`}`否定字符集中的 是一个错字，你的意思是`]`.

* * *

以非常快速的 Firebug 会话为例

```
// existing
> "Anrhegion [Gifts] Llyfrau [Books]".match(/\[([^}]+)\]/g);
["[Gifts] Llyfrau [Books]"]

// fixed
> "Anrhegion [Gifts] Llyfrau [Books]".match(/\[([^\]]+)\]/g);
["[Gifts]", "[Books]"] 
```

# c# - ASPX 在本地工作，但不在服务器上

> ID：12802509
> 
> 赞同：0
> 
> 时间：2012-10-09T14:39:55.297
> 
> 标签：c#, asp.net, visual-studio-2010

我已经在服务器上上传了一个 Web 项目。

虽然它在我进行开发的本地电脑上运行顺利，但它根本没有在服务器上运行。据我所知，空数据集存在问题（从 SQL 数据库中获取数据）。同样，在本地运行 aspx 时，一切正常。我在错误日志中看到的另一个问题是它指向我的本地驱动器“D:...”它不应该指向服务器地址吗？

错误。

```
There is no row at position 0.

Exception Details: System.IndexOutOfRangeException: There is no row at position 0.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[IndexOutOfRangeException: There is no row at position 0.]
   System.Data.RBTree`1.GetNodeByIndex(Int32 userIndex) +2474798
   System.Data.DataRowCollection.get_Item(Int32 index) +21
   WEB.Default.Page_Load(Object sender, EventArgs e) in D:\dev\Visual Studio\Temp\WEB\Default.aspx.cs:59
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
   System.Web.UI.Control.LoadRecursive() +71
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

任何想法？我使用 VS2010 的发布工具，它成功上传到服务器。但它不起作用。

我不明白的另一件事是，如果我在页面加载中有 try/catch，为什么网页会发送此错误。如果有错误，它会设置一个带有友好消息的标签。

谢谢。

**编辑**

这是页面加载代码。

```
protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            if (!IsPostBack)
            {
                Session["FlagOpen"] = false;
                var windowsIdentity = WindowsIdentity.GetCurrent();
                if (windowsIdentity != null)
                {
                    var userName = windowsIdentity.Name;
                    userName = Regex.Replace(userName, ".*\\\\(.*)", "$1", RegexOptions.None);
                    var ds = _objUser.GetRanking(userName);
                    var ranking = ds.Tables[0].Rows[0][1].ToString();
                    _objPersona.Ranking = ranking;
                    _objPersona.UserName = userName;
                    _objPersona.RealName = ds.Tables[0].Rows[0][0].ToString();
                    Session["User"] = _objPersona;
                    LblUserName.Text = ds.Tables[0].Rows[0][0].ToString();
                    ds = _objUser.GetFAQ(userName);
                    var cant = ds.Tables[0].Rows.Count;                        
                }
                else
                {
                    BtnAbrirBandeja.Enabled = false;
                    LblUserName.Text = "Not allowed.";
                }
            }
        }
        catch (Exception)
        {
            LblWarnings.Text = "Error. Please contact sysadmin.";
            throw;
        }

    } 
```

**编辑 2。**

页面继续在本地工作。但不在服务器上。它抛出指向本地文件夹的原始错误（当它已经从服务器上载并运行时）。DataSet 为空是 Web 无法与 SQL 服务器通信的结果。因此错误。基本上，它在调试时运行正常，但不是在服务器上。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:17:50.193

`null`在尝试从数据集中访问之前，您需要测试您`element`的数据集，因此会出现错误消息：

```
if (ds!=null)
 { 
  //continue and access the dataset
 }
else
 {
  //you didn't get any data or ds is simply null (result set is null)
 } 
```

您也误用了`var`关键字，您不需要将其`var`用于字符串和数据集等简单类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:09:48.070

无论出于何种原因，您的数据无法访问或不存在：

```
[IndexOutOfRangeException: There is no row at position 0.]

var ranking = ds.Tables[0].Rows[0][1].ToString(); 
```

`ds.Tables.length`在执行该行之前，您需要检查（或计数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:33:45.423

可能是在您的本地机器上运行时，它从您的本地服务器获取数据，现在它从您的服务器数据库引擎获取数据..那里的表可能是空的，或者那里可能不存在表..检查您的数据集获取方法是否有任何错误..您的尝试捕获可能隐藏了该错误..

你的另一部分问题：

它会抛出该异常，因为您的 catch 块有一个“throw”语句，该语句将通过 catch 块捕获的相同错误以及所有内部异常详细信息。

注意：如果你写 catch(Exception ex) {throw ex;}

内部异常详细信息将丢失...

# regex - 特定的 .htaccess 重定向

> ID：12802511
> 
> 赞同：2
> 
> 时间：2012-10-09T14:39:58.407
> 
> 标签：regex, apache, .htaccess, redirect

我使用移动重定向代码：

```
HTACCESS MOBILE SITE REDIRECTION CODE

RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} (mobile|android|blackberry|brew|cldc|docomo|htc|j2me|micromax|lg|midp|mot|motorola|netfront|nokia|obigo|openweb|opera.mini|palm|psp|samsung|sanyo|sch|sonyericsson|symbian|symbos|teleca|up.browser|vodafone|wap|webos|windows.ce) [NC]
RewriteRule ^(.*)$ url1 [R=302,L] 
```

使用此代码，我的整个网站将移动访问者重定向到 url1。因此，我想保持该重定向不变，但要对来自我的网站的一个或多个特定 url 进行不同的重定向，例如`http://www.mysite.com/sample.htm`将访问者重定向到 url2，而网站的其余部分将访问者重定向到 url1。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:54:20.417

使用以下代码：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} (mobile|android|blackberry|brew|cldc|docomo|htc|j2me|micromax|lg|midp|mot|motorola|netfront|nokia|obigo|openweb|opera.mini|palm|psp|samsung|sanyo|sch|sonyericsson|symbian|symbos|teleca|up.browser|vodafone|wap|webos|windows.ce) [NC]
RewriteRule ^ - [E=IS_MOBILE:1]

RewriteCond %{ENV:IS_MOBILE} 1
RewriteRule ^sample\.htm/?$ url2 [R=302,L,NC]

RewriteCond %{ENV:IS_MOBILE} 1
RewriteRule (?!^url2/?$)^.*$ url1 [R=302,L,NC] 
```

# static - c# .net 内存中持久性

> ID：12802514
> 
> 赞同：1
> 
> 时间：2012-10-09T14:40:03.930
> 
> 标签：static, non-volatile, httpapplicationstate

我想为服务器发回的*每个*请求提供一个“用户消息”。如果没有用户消息，则消息返回空白。*如果有，则在他们的请求*完成后，每个用户屏幕上都会激活一个图标。

[编辑] “用户消息”是管理员为我正在部署的应用程序设置的内容。管理员可以在字段中输入文本并单击按钮以将此消息发送给系统的所有其他用户。每当其他用户执行任何类型的操作时，当前用户消息都会附加到 JSON 响应并由前端处理。

为了优化这一点，我希望将消息存储*在内存中*（而不是数据库中）。

我曾尝试使用静态。我曾尝试使用 HttpApplicationState。在这两种情况下，用户消息的值都会在一段时间后“消失”。经过一番研究，似乎静态和 HttpApplicationState 都受到*IIS*的影响，并且它决定回收应用程序池。（或一些这样的）

*静态*变量的这种波动是神秘的：它应该是*静态*的——只要*IIS*本身存在，这个变量就应该存在。它不应该依赖于某种“重置”或其他什么。HttpApplicationState 是我不完全理解的其他一些情况。

我想要一种将值存储在我可以依赖的非易失性变量中的方法。如果我今天设置此值，它应该在明天或下周出现，只要*IIS*没有停止并重新启动。

有什么帮助吗？

* * *

这是我根据以下接受的答案为解决问题所做的工作：

1.  用户消息是有时事。因此，当某个管理员设置消息时，将响应存储在该时间点的数据库中并将其存储在 Application["UserMessage"] 对象中。
2.  当用户往返时，用户消息的内存文本被添加到 json 返回值中。
3.  管理员可以随时清除该消息，这将清除内存中的消息和数据库字段。
4.  当 IIS 认为足够了并回收应用程序时，Application_Start() 方法（以及其他任务）还将从设置用户消息时存储的数据库值中重新播种用户消息（按照步骤 1）。

现在应用程序按预期工作。对于进入系统的每个用户请求，无需支付额外的费用进入数据库 - 用户消息始终来自内存。除此之外，很少为用户消息更新或加载数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:46:37.153

应用程序缓存是它的好地方。你的问题是，你认为你不能依赖它。请参阅我答案的后面部分，您将在其中找到如何确保该值始终存在，即使在 iis 重新启动或 iis 回收您的应用程序之后也是如此。

您可以将值存储在应用程序缓存中。可以按如下方式完成

```
Application.Add(name,object) 
```

稍后您可以使用此代码在每个请求中检索它

```
Application[name] 
```

它像会话一样工作，但唯一的区别是它是应用程序范围的，所有用户的所有请求都会得到它。当您第一次分配设置值时，将其存储在 db 以及应用程序缓存中，以便您以后可以从 db 进行查询并将其存储在应用程序缓存中，如果值不存在，然后从应用程序缓存中检索它。

`Application_Start()`您应该在每次应用程序启动或重新启动时触发的事件从数据库中恢复应用程序缓存。这样您可以确保它始终在应用程序缓存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:42:50.007

> 我想要一种将值存储在我可以依赖的非易失性变量中的方法。如果我今天设置此值，它应该在明天或下周出现，只要 IIS 没有停止并重新启动。

在这种情况下，您不能将此值存储在内存中。内存是 IIS 分配给您的，用于托管应用程序的 AppDomain。IIS 可以随时回收您的应用程序并清除内存。虽然 IIS 继续存在，但您的应用程序却没有。所以你不能依赖它。在这种情况下，唯一可靠的解决方案是将这些信息保存在一些非易失性存储中，例如文件、数据库……选择完全取决于您，但它应该不在您的 AppDomain 进程中。

# asp.net - 如何使用javascript将一个文本框值复制到asp.NET gridview中的另一个文本框？

> ID：12802518
> 
> 赞同：1
> 
> 时间：2012-10-09T14:40:09.860
> 
> 标签：asp.net, gridview

我无法复制或自动绑定到第二个文本框。我需要处理哪个事件，`onkeyup`或者`onblur`？

这是我的代码：

```
<script type="text/javascript">    
    function OneTextToother()   
    { 
    var first=document.getElementById(txtQuantity).value;    
    document.getElementById(txtQuantity1).value=first; 
    }     
</script>

<asp:GridView ID="gvOrder" runat="server" OnRowDataBound="gvOrder_RowDataBound">       
<Columns>              
<asp:TemplateField>                   
<ItemTemplate>                    
<asp:TextBox ID="txtQuantity" runat="server" onkeyup="javascript:OneTextToother();" >
</asp:TextBox>                    
</ItemTemplate>                                
</asp:TemplateField>     
<asp:TemplateField>                  
<ItemTemplate>                
 <asp:TextBox ID="txtQuantity1" runat="server" ></asp:TextBox>               
</ItemTemplate>                              
</asp:TemplateField>          
</Columns>        
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:44:31.683

您可以使用`Client Id property`

```
<%# ((GridViewRow)Container).FindControl("txtQuantity1").ClientID %> 
```

所以

```
var first = document.getElementById('<%# ((GridViewRow)Container).FindControl("txtQuantity").ClientID %>');

document.getElementById('<%# ((GridViewRow)Container).FindControl("txtQuantity1").ClientID %>').value=first; 
```

# php - 引导 PHP 标头

> ID：12802519
> 
> 赞同：1
> 
> 时间：2012-10-09T14:40:16.140
> 
> 标签：php

我想在我的网站中使用 PHP 包含，这样制作新页面会很容易，但我遇到了一个问题。我也想在这个 header.php 中包含我的导航，但我的问题是，我在活动页面上有一个活动类，所以我想知道如何使用 PHP 来做到这一点。这就是我现在在 header.php 中拥有的内容，但我无法弄清楚。

```
<?php
function pageName( $name="" ){

print "
<html lang="en">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="en-gb" />
    <meta name="keywords" content="Minecraft Hosting, Minecraft, Hosting, VoxelHost, VoxelHost, Cheap, Reliable, Great Support, Great, Support, Europe, Best Minecraft Host, Best, Minecraft, Host" />
    <meta name="description" content="Voxel Host delivers Cheap and Reliable Hosting Solutions for your daily needs." />
    <link rel="shortcut icon" type="image/png" href="https://www.voxelhost.com/img/icon.png" />
    <title>Voxel Host - Cheap And Reliable Hosting Solutions</title>
    <link rel="stylesheet" type="text/css" href="https://www.voxelhost.com/css/bootstrap.css" media="all" />
    <link rel="stylesheet" type="text/css" href="https://www.voxelhost.com/css/voxelhost.css" media="all" />
    <link rel="stylesheet" type="text/css" href="https://www.voxelhost.com/css/nivo-slider.css" media="all" />
    <link rel="stylesheet" type="text/css" href="https://www.voxelhost.com/css/default.css" media="all" />
    <link rel="stylesheet" type="text/css" href="https://www.voxelhost.com/css/font-awesome.css" />
    <script type="text/javascript" src="https://www.voxelhost.com/js/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.voxelhost.com/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://www.voxelhost.com/js/jquery.slider.nivo.js"></script>
    <!--Start of Zopim Live Chat Script-->
    <script type="text/javascript">
        window.$zopim||(function(d,s){var z=$zopim=function(c){z._.push(c)},$=z.s=
        d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set.
        _.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute('charset','utf-8');
        $.src='//cdn.zopim.com/?bIkq1WcfGahuJo4awX9QoDtEdvXXAClp';z.t=+new Date;$.
        type='text/javascript';e.parentNode.insertBefore($,e)})(document,'script');
    </script>
    <!--End of Zopim Live Chat Script-->
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-35044907-1']);
        _gaq.push(['_setDomainName', 'voxelhost.com']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
</head>
<body>
    <div class="alertbar inactive"></div>
    <div class="infobar">We are starting the 20th of October! See you soon!</div>
    <div class="succesbar inactive"></div>
    <div id="topbar">
        <ul>
            <li><a href="https://www.voxelhost.com/billing/supporttickets.php">Support Ticket</a></li>
            <li><a href="mailto:info@voxelhost.com">Email</a></li>
            <li><a href="skype:martijnriemers?chat">Skype</a></li>
        </ul>
    </div>
    <div id="logo">
        <div class="align">
            <div class="left" style="width: 500px;">
                <a href="#"><img src="https://www.voxelhost.com/img/logo.png" /></a>
            </div>
            <div class="clear"></div>
        </div>
    </div>
    <div id="wrapper">
        <div class="container">
            <div class="navbar" id="navbarhomepage">
                <div class="navbar-inner">
                    <div class="container">
                        <ul class="nav">
                            <li class="active"><a href="https://www.voxelhost.com/"><i class="icon-home"></i> &nbsp;Home</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle"><i class="icon-star"></i> &nbsp;Services</a>
                                <ul class="dropdown-menu">
                                    <li><a href="https://www.voxelhost.com/minecraft/standard">Standard Minecraft Servers</a></li>
                                    <li><a href="https://www.voxelhost.com/minecraft/premium">Premium Minecraft Servers</a></li>
                                    <li><a href="https://www.voxelhost.com/minecraft_reseller">Minecraft Reseller</a></li>
                                    <li><a href="https://www.voxelhost.com/comingsoon">VPS Hosting</a></li>
                                    <li><a href="https://www.voxelhost.com/comingsoon">Dedicated Servers</a></li>
                                    <li><a href="https://www.voxelhost.com/comingsoon">Web Hosting</a></li>
                                </ul>
                            </li>
                            <li><a href="https://www.voxelhost.com/status"><i class="icon-ok-sign"></i> &nbsp;Server Status</a></li>
                            <li><a href="https://www.voxelhost.com/billing/cart"><i class="icon-shopping-cart"></i> &nbsp;Order Now</a></li>
                            <li><a href="https://www.voxelhost.com/billing/"><i class="icon-user"></i> &nbsp;Client Area</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle"><i class="icon-dashboard"></i> &nbsp;Control Panels</a>
                                <ul class="dropdown-menu">
                                    <li><a href="https://mcpanel.voxelhost.com/">Minecraft Servers</a></li>
                                    <li><a href="https://mintpanel.voxelhost.com/">Game Servers</a></li>
                                    <li><a href="https://cpanel.voxelhost.com/">Webhosting</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div id="content">" ;

}
?> 
```

这就是我在 index.php 等中的内容。

```
<?php
include( "header.php" );
pageName( "Home" );
?> 
```

非常感谢您阅读本文，也许可以帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:42:10.887

您的报价引起了问题。

要转储大字符串，请尝试使用 HEREDOC：

```
print <<<EOT
<html lang="en">
   ..........
EOT; 
```

# firefox - 如何验证我的 Firefox 扩展的首选项？

> ID：12802530
> 
> 赞同：2
> 
> 时间：2012-10-09T14:40:51.973
> 
> 标签：firefox, firefox-addon, xul

在 Firefox 扩展中验证首选项值的普遍接受的方法是什么，特别是在 XUL 中使用[prefwindow](https://developer.mozilla.org/en-US/docs/XUL/prefwindow#a-onbeforeaccept)机制时？

我在我的一个扩展中引入了一些新的首选项，我想在关闭首选项窗口之前验证这些首选项。如果有错误，应允许用户更正问题，然后继续。我看到该`prefwindow`元素有两个潜在有用的功能可以在这方面提供帮助：

*   [在接受之前](https://developer.mozilla.org/en-US/docs/XUL/prefwindow#a-onbeforeaccept)
*   [对话接受](https://developer.mozilla.org/en-US/docs/XUL/prefwindow#a-ondialogaccept)

前者似乎有一个相关的错误（[错误 474527](https://bugzilla.mozilla.org/show_bug.cgi?id=474527)），阻止从该函数`prefwindow`返回时保持打开状态。`false`这很糟糕，因为它没有给用户立即纠正错误的机会。

后者似乎存在偏好在退出之前被保存的问题，这使得偏好在内部处于不良状态。

此外，该`prefwindow`机制还支持`browser.preferences.instantApply`在更新关联控件时立即写入首选项值的选项。这使得验证更加棘手。是否有一种干净的方法来验证 Firefox 扩展中的自定义首选项，允许用户纠正任何潜在的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:58:40.493

通常，您希望在更改首选项时对其进行验证。这就是[`onchange`属性](https://developer.mozilla.org/en-US/docs/XUL/preference#a-onchange)（和相应的`change`事件）有利于：

```
<preference name="preference.name" onchange="validate(this);"/> 
```

在首选项值更改后触发该事件。有两个缺点：

*   如果`instantApply`新的偏好值已经被保存，来不及验证和拒绝。
*   对于文本字段，每次输入新字符时都会保存首选项。如果您在用户仍在键入时报告验证失败，这将变得很难看。

您可以通过拦截实际输入字段的更改事件来解决第一个问题。例如，对于文本字段，您可以：

```
<input preference="preference.name"
    oninput="if (!validate(this)) event.stopPropagation();"
    onchange="if (!validate(this)) { event.stopPropagation(); this.focus(); }"/> 
```

因此，未正确验证的更改不会冒泡到`<prefpane>`元素并且不会被保存。要监听的事件是：对于文本字段，对于按钮和复选框，`input`对于元素。`change``command``select``<colorpicker>`

第二个问题很棘手。您仍然希望在输入发生时验证输入，但是立即显示消息将是糟糕的 UI。我认为最好的解决方案是最初假设每个输入字段仍在“进行中”。`blur`当您第一次看到该字段上的事件时，您只会设置一个值已完成的标志。那时您可以在必要时显示验证消息（理想情况下，您的首选项页面中会显示红色文本，而不是模式提示）。

所以要指出最终解决方案的样子（未经测试的代码，但我过去使用过类似的东西）：

```
<description id="error" hidden="true">Invalid preference value</description>

<input preference="preference.name"
    _errorText="error"
    onblur="validate(event);"
    oninput="validate(event);"
    onchange="validate(event);/>

<script>
  function validate(event)
  {
    // Perform actual validation
    var field = event.target;
    var valid = isValid(field);

    // If this is the blur event then the element is no longer "in progress"
    if (event.type == "blur")
    {
      field._inputDone = true;
      if (!valid)
        field.focus();
    }

    // Prevent preferences changing to invalid value
    if (!valid)
      event.stopPropagation();

    // Show or hide error text
    var errorText = document.getElementById(field.getAttribute("_errorText"));
    errorText.hidden = valid || !field._inputDone;
  }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:29:26.427

如果您想在字段更改后立即验证值以便处理这种`instantApply`情况，您可以挂钩各个字段的更改事件（例如[`oninput`](https://developer.mozilla.org/en-US/docs/XUL/Attribute/oninput)a `textbox`）。如果值无效，则显示错误消息并强制将焦点返回到该字段。您可以自动将其设置回有效值，也可以阻止用户关闭对话框，直到它被修复。

# javascript - 将特殊字符写入表字段时丢失融合表身份验证

> ID：12802535
> 
> 赞同：1
> 
> 时间：2012-10-09T14:40:59.563
> 
> 标签：javascript, google-apps-script, google-fusion-tables

我对谷歌应用脚​​本和融合表非常陌生。我正在为我的公司开发一个 CRM 应用程序，我正在使用谷歌网站、谷歌应用程序脚本和融合表来做到这一点。我还使用 O'Reilly 的“Google Script - Enterprise Application Essentials”一书中的一个示例来构建我的应用程序。我正在使用 Fusion 表作为我的项目的数据库，并运行函数 doOAuth() 以授予每个人对 fusion 表执行操作的权限。（请参阅下面的代码，其中包含我从书中获得的 doOAuth 代码）。该应用程序适用于我对融合表所做的每个命令。我可以读取表格的内容，也可以对其进行搜索，但是在写入新数据或更新表格上的现有数据时，我遇到了一个烦人的问题。我的应用程序上有一些文本框，我在其中插入了一些数据，并且这些数据被写入表中，到目前为止没有问题，当我向这些文本框添加常用文本时，我在更新数据或将数据插入融合表时没有问题。但是，当我向这些文本框中添加任何特殊字符时，例如：á、ã、à、ä、é、õ、í 等，我会收到一条消息，告诉我需要进行授权才能执行该过程。但是我已经授权了。好像授权丢失了。即使我再次运行 doOAuth() 函数，也不会授予权限。insertFusionObj() 和 writeFusionObj() 函数（在下面的代码中列出）在它们的参数是特殊字符时似乎有问题。我不知道这是功能问题还是融合表插入和更新问题。如果有人可以帮助我解决这个问题，我将不胜感激，

我期待着一些帮助。最好的问候拉斐尔·塞蒂·诺盖拉

代码：

```
 /**
     * ---FusionService---
     *
     *  Copyright (c) 2011 James Ferreira
     *
     *  Licensed under the Apache License, Version 2.0 (the "License");
     *  you may not use this file except in compliance with the License.
     *  You may obtain a copy of the License at
     *
     *      http://www.apache.org/licenses/LICENSE-2.0
     *
     *  Unless required by applicable law or agreed to in writing, software
     *  distributed under the License is distributed on an "AS IS" BASIS,
     *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *  See the License for the specific language governing permissions and
     *  limitations under the License.
     */

    /**
     * FusionService 
     * @author James Ferreira
     * @documentation http://goo.gl/pBSvF
     *
     * @requires Script Insert ID: ?????
     *           ObjService http://goo.gl/JdEHW
     *
     * @requires The Fusion Table ID MUST be set in a Script property. 
     *           This will allow you to change it at anytime using
     *           ScriptProperties.setProperty('FUSION_ID', '<your ID>'); 
     *
     *
     * Search for records in a Fusion Table 
     *
     * @params {string}  target   Quoted column name(s) ('First Name', 'Last Name') OR (*) for all 
     * @params {string}  where    valid statement see http://goo.gl/SkHI1
     *                            'Last Name' CONTAINS IGNORING CASE 'Ferr' 
     *                             AND 'First Name' CONTAINS IGNORING CASE 'J'" 
     *
     * @returns {array}           [[headers],[match row],[match row]...]
     *                            If no match returns []
     */
    function searchFusion(target, where){
      var values = [];
      if (target == '*'){
        var headers = getFusionHeaders();
        for(var i in headers){
          values.push("'"+headers[i]+"'"); 
        }   
      }else{
        values.push(target); 
      }
      var arrayResult = fusionRequest("get", "SELECT "+values.toString()+",ROWID FROM "+
                                      FUSION_ID+" WHERE "+ where).split(/\n/);
      for (var i in arrayResult){
        arrayResult[i] = arrayResult[i].split(/,/); 
      }
      arrayResult.splice(arrayResult.length-1, 1);
      return arrayResult;
    }

    /**
     * Updates a record in the Fusion table
     * Note: fusionObj must contain rowid of Fusion table record
     *
     * @params  {object}  fusionObj  object with properties from cameled column names
     * @returns {string}             OK if successful
     */
    function writeFusionObj(fusionObj){
      var values = [];
      var headers = getFusionHeaders();   
      for(var i in headers){
        if (fusionObj[camelString(headers[i])] != undefined)
        values.push("'"+headers[i] +"'='"+fusionObj[camelString(headers[i])]+"'"); 
      }  
     return fusionRequest("post", "UPDATE "+FUSION_ID+" SET "+values.toString()+
                          " WHERE ROWID = '"+fusionObj.rowid+"'") 
    }

    /**
     * Add a new record to a Fusion table
     *
     * @params  {object}  fusionObj  object with properties from cameled column names
     * @returns {integer}            rowid useful for unique ID of record
     */
    function insertFusionObj(fusionObj){
      var values = [];
      var columns =[];
      var headers = getFusionHeaders(); 

      for(var i in headers){
        columns.push("'"+headers[i] +"'");
        values.push("'"+fusionObj[camelString(headers[i])]+"'"); 
      }  
      return parseInt(fusionRequest("post", "INSERT INTO "+FUSION_ID+
                        " ("+columns.toString()+") VALUES ("+values.toString()+")").substring(5));
    }

    /**
     * Get the Fusion row ID for a given column header and unique value
     *
     * @returns {integer}    Fusion ROWID for record
     */
    function getFusionROWID(header, key){
     return parseInt(fusionRequest("get", "SELECT ROWID FROM "+FUSION_ID+
                                   " WHERE '"+header+"'='"+key+"'").substring(5));
    }

    /**
     * get the column header names from Fusion Table
     *
     * @returns {array}    [header, header, ...]
     */
    function getFusionHeaders(){
      var headers = [];
      var result = fusionRequest("get", "DESCRIBE "+FUSION_ID).split(/\n/);
        for (var i in result){
        result[i] = result[i].split(/,/); 
        headers.push(result[i][1]);  
      }  
      headers.splice(0, 1);
      headers.splice(headers.length-1, 1);
      return headers;  
    }

    /**
     * Deletes a record in the Fusion Table
     *
     * @params  {string}  rowid  the ID of a Fusion table row
     */
    function deleteFusionRow(rowid){  
       fusionRequest("post", "DELETE FROM "+FUSION_ID+" WHERE ROWID = '"+rowid+"'");  
    }

    /**
     * The get or post request to the Fusion API 
     *
     * @params  {string}  reqMethod  get or post
     * @params  {string}  sql        String  A sgl type request see http://goo.gl/aVP3B
     * @returns {integer}            Fusion rowid useful for unique ID of record
     */
    function fusionRequest(method, sql) {

      var url = "https://www.google.com/fusiontables/api/query";

      if (USE_OAUTH){
        var fetchArgs = googleOAuth_();   
      }else{
        var fetchArgs = new Object();
        fetchArgs.headers = {"Authorization": "GoogleLogin auth=" + getAuthToken_()};
      } 
      fetchArgs.method = method; 

      if( method == 'get' ) {
        url += '?sql='+sql;
        fetchArgs.payload = null;
      } else{
        fetchArgs.payload = 'sql='+sql;
      } 
      return UrlFetchApp.fetch(url, fetchArgs).getContentText(); 
    }

    /**
     * @private for OAuth
     */
    function googleOAuth_() {
      var oAuthConfig = UrlFetchApp.addOAuthService('fusion');
      oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/"+
                 "OAuthGetRequestToken?scope=https://www.google.com/fusiontables/api/query");
      oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
      oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
      oAuthConfig.setConsumerKey('anonymous');
      oAuthConfig.setConsumerSecret('anonymous');
      return {oAuthServiceName:'fusion', oAuthUseToken:"always"};
    }

    /**
     * @private for client Auth
     * @returns String(auth token for a user)
     */ 
    function getAuthToken_() {

      var response = UrlFetchApp.fetch("https://www.google.com/accounts/ClientLogin", {
          method: "post",
          payload: "accountType=GOOGLE" +
                   "&Email=" + ScriptProperties.getProperty('CUSTOMER_KEY') + 
                   "&Passwd=" + encodeURIComponent(ScriptProperties.getProperty('CUSTOMER_SECRET'))+ 
                   "&service=fusiontables" +
                   "&Source=testing"
      });
      var responseStr = response.getContentText();
      responseStr = responseStr.slice(responseStr.search("Auth=") + 5, responseStr.length);
      responseStr = responseStr.replace(/\n/g, "");
      return responseStr;
    }

    /**
     * Used to authenticate to Fusion Tables
     * Run it twice!
     */
    function doOAuth(){
      var method = 'get';
      var sql = "SHOW TABLES";  
      Logger.log(fusionRequest(method,sql));
    }

    var USE_OAUTH = true; 
    var FUSION_ID = ScriptProperties.getProperty('FUSION_ID'); 
```

# c++ - c++ operator<<的多重定义

> ID：12802536
> 
> 赞同：41
> 
> 时间：2012-10-09T14:41:01.107
> 
> 标签：c++, overriding, iostream, operator-keyword

我试图覆盖`<<`一个类的运算符。目的基本上是`toString()`为我的类实现类似的行为，以便将其发送到`cout`将产生有用的输出。使用一个虚拟示例，我有下面的代码。当我尝试编译时，我得到了一个愚蠢的错误：

```
$ g++ main.cpp Rectangle.cpp
/tmp/ccWs2n6V.o: In function `operator<<(std::basic_ostream<char, std::char_traits<char> >&, CRectangle const&)':
Rectangle.cpp:(.text+0x0): multiple definition of `operator<<(std::basic_ostream<char, std::char_traits<char> >&, CRectangle const&)'
/tmp/ccLU2LLE.o:main.cpp:(.text+0x0): first defined here 
```

我无法弄清楚为什么会这样。我的代码如下：

矩形.h：

```
#include <iostream>
using namespace std;

class CRectangle {
    private:
        int x, y;
        friend ostream& operator<<(ostream& out, const CRectangle& r);
    public:
        void set_values (int,int);
        int area ();
};

ostream& operator<<(ostream& out, const CRectangle& r){
    return out << "Rectangle: " << r.x << ", " << r.y;
} 
```

矩形.cpp：

```
#include "Rectangle.h"

using namespace std;

int CRectangle::area (){
    return x*y;
}

void CRectangle::set_values (int a, int b) {
    x = a;
    y = b;
} 
```

主.cpp：

```
#include <iostream>
#include "Rectangle.h"

using namespace std;

int main () {
    CRectangle rect;
    rect.set_values (3,4);
    cout << "area: " << rect.area();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-09T14:43:05.413

你打破了**单一定义规则**。快速修复是：

```
inline ostream& operator<<(ostream& out, const CRectangle& r){
    return out << "Rectangle: " << r.x << ", " << r.y;
} 
```

其他是：

*   在头文件中声明运算符并将实现移动到`Rectangle.cpp`文件中。
*   在类定义中定义运算符。

.

```
class CRectangle {
    private:
        int x, y;
    public:
        void set_values (int,int);
        int area ();
        friend ostream& operator<<(ostream& out, const CRectangle& r){
          return out << "Rectangle: " << r.x << ", " << r.y;
        }
}; 
```

奖金：

*   使用包括警卫
*   `using namespace std;`从标题中删除。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-09T14:45:07.360

您将函数的*定义*`.h`放在文件中，这意味着它将出现在每个翻译单元中，违反了一个定义规则（=>您`operator<<`在每个对象模块中定义，因此链接器不知道哪个是“正确的一”）。

您可以：

*   在 .h 文件中只写你的操作符的*声明*（即它的原型）并将它的定义移动到`rectangle.cpp`
*   make `operator<<` `inline`-`inline`只要所有定义相同，就可以多次定义函数。

（此外，您应该在包含中使用标头保护。）

# c# - Linq-to-SQL 事务中断链接服务器查询

> ID：12802539
> 
> 赞同：0
> 
> 时间：2012-10-09T14:41:11.263
> 
> 标签：c#, linq, linq-to-sql, transactions, linked-server

我有一个使用 Linq-to-SQL 检索和更新数据的简单应用程序。

在我的`DataContext`我有一个称为`GET_DATA`使用链接服务器从非 SQL Server 数据源读取数据的过程。我使用读取的数据来更新 SQL Server 上的一些表。

在 SQL Server 上更新数据的过程是这样完成（总结）的：

```
var db = new MyDBDataContext()
db.ExecuteCommand("Update table1 set field={0} where field={1}", value1, value2); 
```

它工作得很好。

现在，问题来了：一个新的需求来更新 2 个表而不是一个，所以我决定添加一些事务控制：

```
using (var db = new MyDBDataContext())
using (var tran = new TransactionScope())
{
    try
    {
        db.ExecuteCommand("Update table1 set field={0} where field={1}", value1, value2);
        db.ExecuteCommand("Update table3 set field={0} where field={1}", value1, value2);

        tran.Complete();
    }
    catch (Exception e)
    {
        tran.Dispose();
    }
} 
```

它再次正常工作，但在我更新数据后（无论过程失败还是成功），如果我尝试运行搜索过程，我会收到以下错误：

> 无法执行操作，因为链接服务器 \"LINKED_SERVER_NAME\" 的 OLE DB 提供程序 \"OraOLEDB.Oracle\" 无法开始分布式事务。"}

让它再次工作的唯一方法是右键单击 ASP.Net 开发服务器并关闭它。似乎它保持打开状态，但我检查了`dm_tran_session_transactions`DMV 并没有看到任何打开的事务（如果我调试方法可以看到它，但是一旦方法完成，没有打开任何事务）

仅供参考：`dbcontext`对象与选择更新的对象不同，我也尝试添加`db.SubmitChanges()`，但它也不起作用。

任何建议都会有帮助谢谢

编辑：搜索过程内部没有事务控制，它由一个简单的 LINQ 语句调用：

```
var result = (from r in context.GET_DATA(parameter)
                          select new Object{
                             .....
                           }
              );
return result.ToList(); 
```

# magento - Magento 向产品添加一组属性/属性

> ID：12802541
> 
> 赞同：0
> 
> 时间：2012-10-09T14:41:24.453
> 
> 标签：magento, magento-1.7

我需要添加类似于Magento 上已有的*Review系统的内容。*我的意思是，我想添加一些文本，审查能力等。它应该在后端有一个管理端，以便能够拒绝/接受/编辑这些文本。我仍然没有弄清楚所有的事情，所以我想在我走上错误/封闭的道路之前问一下。

我应该通过将核心文件复制到本地并随意修改来重用现有代码吗？

或者我应该添加自己的表格并使用产品 ID 链接到 EAV 模型？

在这个[SO 问题](https://stackoverflow.com/questions/9599262/magento-add-new-attribute-to-all-products)上，接受的答案发布了有关如何向所有产品添加新自定义属性的代码。我可以使用它，但我仍然需要添加评论部分。

我搜索了类似的功能，但找不到任何东西。

# firefox - 可以让插件知道用户名/进程所有者吗

> ID：12802543
> 
> 赞同：0
> 
> 时间：2012-10-09T14:41:39.353
> 
> 标签：firefox, firefox-addon-sdk

好的，所以我猜这个问题的答案是*否定*的（在这里感知隐私问题），但无论如何让我们检查一下。

是否可以读取*计算机用户*的用户名（想想 SSO）？这可能是从 Firefox 进程的所有者那里读取的。

我在 SDK 文档中并没有真正看到任何关于它的信息，搜索用户名只会给我一堆密码管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:39:00.940

api-utils/environment 提供对用户的 shell 环境变量的访问：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/api-utils/environment.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/api-utils/environment.html)

下面是一些基本用法：

[https://builder.addons.mozilla.org/package/156370/latest/](https://builder.addons.mozilla.org/package/156370/latest/)

根据您需要的信息，您可以使用 Firefox 本身的权限运行系统命令，以从 Windows 注册表等获取信息。您应该知道，当您的插件被 Mozilla Addons 站点审核时，不允许恶意使用此类代码。

# mysql - sphinx search max_matches 无法使用 sphinx.yml 文件

> ID：12802544
> 
> 赞同：0
> 
> 时间：2012-10-09T14:41:39.400
> 
> 标签：mysql, ruby, ruby-on-rails-3, thinking-sphinx

我在我的 rails 项目中使用 sphinx 搜索。我有`sphinx.yml`文件，即。

```
 defaults: &defaults

   enable_wildcard: 1

   min_prefix_len: 2

   enable_star: 1

   max_matches: 25000

   development:

     <<: *defaults

   test:

     <<: *defaults

   production:

     <<: *defaults

     pid_file: "RAILS_ROOT/log/searchd.pid"

     searchd_file_path: "RAILS_ROOT/config/db/sphinx"

     indexer_binary_name: "/usr/local/bin/indexer"

     searchd_binary_name: "/usr/local/bin/searchd"

     port: 9314 
```

在我的控制器的操作中，我有以下代码。

```
 Application.search(query,:with => options,:order => "updated_at DESC",:max_matches=> 25_000,
                                                                   :match_mode => :extended).page(params[:page]).per(11) 
```

我收到这样的错误。

```
 searchd error (status: 1): per-query max_matches=25000 out of bounds (per-server max_matches=1000) 
```

有什么好的建议吗？？请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:44:43.080

您需要在 sphinx.conf 中增加 max_matches 并重新启动 searchd 进程。max_matches 是一个搜索设置，与索引过程无关。

# php - 用于 PHP 的 Solr：getDigestedResponse 不起作用

> ID：12802545
> 
> 赞同：1
> 
> 时间：2012-10-09T14:41:44.153
> 
> 标签：php, solr, simplexml

我已经设法使用我在此处找到的插件在我的 Windows 7 64 位机器上安装了 Solr for PHP：

downloads.php.net/pierre/

它被链接到这个网站：

wiki.apache.org/solr/SolPHP

（链接不可点击，因为我是新用户）

我已经启动并运行了一切，搜索和索引工作正常，但只有当我使用[getRawResponse()](http://docs.php.net/manual/en/solrresponse.getrawresponse.php)方法并通过 SimpleXml 解析它时（http://de.php.net/manual/en/book.simplexml.php ）。应该返回 PHP 对象的[getDigestedResponse()](http://docs.php.net/manual/en/solrresponse.getdigestedresponse.php)`string(1) " "`方法只返回. 方法 getResponse() (http://docs.php.net/manual/en/solrresponse.getresponse.php) 只是超时。

这不是什么大问题，但是原始响应中的一些 XML 似乎无效并使用 simpleXML 解析，缺少某些属性，使用正则表达式获取所需数据也将是很麻烦。

有没有人让这个工作呢？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:01:59.970

取决于您如何解析响应。尝试下面的代码并删除 PHP/PECL solr 库并转到 CURL（*例如：hostNameHere:8983/solr/select/?q=solr&start=0&rows=10&indent=on 并将结果 XML 发送到下面的函数*）。

如果您可以通过 URL 访问资源（solr），则无需使用辅助库来执行 CURL 可以执行的操作：

```
function makeSimpleXML($xml) {
    $dom = new DOMDocument;
    $dom->loadXML($xml);
    if (!$dom) {
        // ErrorUtility::throwFatal("could not parse xml. please check the format", "XMLParisng Error");
    }
    return simplexml_import_dom($dom);
} 
```

# teamcity - 设置构建失败的电子邮件通知 - Team City

> ID：12802548
> 
> 赞同：5
> 
> 时间：2012-10-09T14:41:53.887
> 
> 标签：teamcity

我已将 Team City 配置为通过 EC2 发送电子邮件并且工作正常，但我现在如何设置电子邮件帐户以发送服务器上所有构建作业的失败通知？我敢打赌，答案是盯着我的脸，但我就是看不到。TC 7.x 顺便说一句。

============== 编辑 ==============

我知道如何在个人基础上执行此操作，但我想将电子邮件通知全局设置为组地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T15:03:56.543

我通过创建一个新用户帐户、将电子邮件地址设置为组别名地址并根据需要设置帐户通知来获得我想要的行为。

# javascript - 使用 jQuery 使用 if 语句检查 cookie

> ID：12802551
> 
> 赞同：-1
> 
> 时间：2012-10-09T14:41:56.273
> 
> 标签：javascript, jquery

我想以某种方式在用户第一次访问时使用 jQuery 设置一个 cookie，并显示一个将在页面就绪时加载的灯箱。

设置 cookie 后，如果他们再次访问，我想检查是否有 cookie，如果有，*请不要*显示灯箱。

我正在使用 cookie 插件来帮助解决这个问题。任何人都可以看到我的代码有问题吗？

```
$(document).ready(function(){
    var cookie = $.cookie("popup", 1);
    if(cookie == "") { 
        $.fn.colorbox({width:"500px", height:"400px", inline:true, href:"#sell"});
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:51:56.433

听起来您需要在创建 cookie 之前检查它是否存在。如果您在查找 cookie 之前创建了它，它就会一直存在！

所以，你会想要做类似的事情：

```
$(document).ready(function(){
    if (!$.cookie("popup")) { 
        $.fn.colorbox({width:"500px", height:"400px", inline:true, href:"#sell"});
    }
    $.cookie("popup", 1, , {expires: 365});
}); 
```

我添加了一个 expires 选项，因为正如 webdeveloper 在他的回答中指出的那样，该[插件](https://github.com/carhartl/jquery-cookie/blob/master/README.md)默认创建会话 cookie，这可能不是您想要的，因为它们通常在浏览器关闭时被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:48:40.680

```
$.cookie("popup", 1); 
```

创建会话 cookie。这段代码不返回任何东西，只是`undefined`

读取 cookie：

```
$.cookie('popup'); // => "1" 
```

然后：

```
>>> undefined == ""

false 
```

文档：[jquery-cookie](https://github.com/carhartl/jquery-cookie)

# search - 获取 lucene 索引中的下一个日期

> ID：12802556
> 
> 赞同：0
> 
> 时间：2012-10-09T14:42:11.763
> 
> 标签：search, lucene, lucene.net

我将事件列表存储在 lucene.net 索引中，该索引具有开始日期字段。我想添加一个按钮供用户单击以查看与他们正在查看的事件相关的下一个事件（基于开始日期字段）。

我目前正在使用`ConstantScoreRangeQuery`搜索来搜索两个日期之间的事件，但不确定如何在索引中获取下一个日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:32:13.973

这是一个简单的方法来做到这一点`TermEnum`

```
 RAMDirectory ramDir = new RAMDirectory();

        IndexWriter iw = new IndexWriter(ramDir, new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_CURRENT));

        Document d = new Document();
        Field date = new Field("date", "", Field.Store.YES, Field.Index.ANALYZED);
        d.Add(date);

        DateTime first = DateTime.Now.Subtract(TimeSpan.FromDays(5));
        DateTime second = DateTime.Now.Subtract(TimeSpan.FromDays(4));
        DateTime third = DateTime.Now.Subtract(TimeSpan.FromDays(3));
        DateTime fourth = DateTime.Now.Subtract(TimeSpan.FromDays(2));
        DateTime fifth = DateTime.Now.Subtract(TimeSpan.FromDays(1));

        date.SetValue(DateTools.DateToString(first, DateTools.Resolution.MINUTE));
        iw.AddDocument(d);
        date.SetValue(DateTools.DateToString(second, DateTools.Resolution.MINUTE));
        iw.AddDocument(d);
        date.SetValue(DateTools.DateToString(third, DateTools.Resolution.MINUTE));
        iw.AddDocument(d);
        date.SetValue(DateTools.DateToString(fourth, DateTools.Resolution.MINUTE));
        iw.AddDocument(d);
        date.SetValue(DateTools.DateToString(fifth, DateTools.Resolution.MINUTE));
        iw.AddDocument(d);

        iw.Commit();

        IndexReader ir = iw.GetReader();

        var termEnum = ir.Terms(new Term("date", DateTools.DateToString(second, DateTools.Resolution.MINUTE)));

        if (termEnum.Next())
        {
            Console.WriteLine(DateTools.StringToDate(termEnum.Term().Text()));
            Console.WriteLine(DateTools.StringToDate(termEnum.Term().Text()).Day == third.Day);
        }

        Console.Read(); 
```

# c++ - 使用 nvcc (CUDA) 编译 Eigen 库

> ID：12802560
> 
> 赞同：5
> 
> 时间：2012-10-09T14:42:24.697
> 
> 标签：c++, cuda, eigen

我尝试使用 nvcc（CUDA 5.0 RC）编译以下程序（main.cu）：

```
#include <Eigen/Core>
#include <iostream>

int main( int argc, char** argv )
{
    std::cout << "Pure CUDA" << std::endl;
} 
```

不幸的是，我收到一堆警告和错误，我只能使用 nvcc 而不是 Microsoft 编译来解释。

这个假设正确吗？有没有办法用 nvcc 编译 Eigen？（我实际上不想将 Eigen 矩阵转移到 GPU，只是访问他们的成员）？

如果用 nvcc 编译 Eigen 不起作用，是否有关于分离主机和设备代码的巧妙方法的很好的指南/教程？

我正在使用 CUDA 5.0 RC、Visual Studio 2008、Eigen 3.0.5。为了编译我使用的 .cu 文件，CUDA 中包含的规则文件，以及 CMake 生成的自定义构建步骤。使用 CUDA 规则文件，我将构建定位在计算能力 3.0。

谢谢你的建议。

PS：如果我使用主机编译器编译相同的代码，它会完美运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:34:51.110

NVCC 会调用普通的主机编译器，但在它完成一些预处理之前不会调用，因此 NVCC 很可能正在努力正确解析 Eigen 代码（尤其是如果它使用 C++11 功能，但这不太可能，因为你说 VS2008 有效）。

我通常建议将设备代码和包装器分离到`.cu`文件中，并将应用程序的其余部分留在普通`.c`/`.cpp`文件中，由主机编译器直接处理。有关使用 VS2008 进行此设置的一些提示，请参阅[此答案。](https://stackoverflow.com/a/2047892/214473)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T00:26:23.810

看起来 Eigen 的核心贡献者之一正在[移植它以与 CUDA 兼容](https://bitbucket.org/ggael/eigen-nvcc)。这个想法是从内核代码中调用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-28T10:55:46.793

从 Eigen 3.3 开始，nvcc (7.5) 成功地将 Eigen 代码正确地传递给 cl (MSVC 2013)（几乎？）。例如，以下代码*仅*产生11 个警告：

```
#include <Eigen/Core>
#include <iostream>

int main()
{
    std::cout << "Hello Eigen\t";
    std::cout << EIGEN_WORLD_VERSION << "." << EIGEN_MAJOR_VERSION << "." << EIGEN_MINOR_VERSION << "\n";
    std::cout << "Hello nvcc\t";
    std::cout << __CUDACC_VER_MAJOR__ << "." << __CUDACC_VER_MINOR__ << "." << __CUDACC_VER_BUILD__ << "\n";
    return 0;
} 
```

按预期输出（特征 3.3rc1）：

> 你好本征 3.2.94
> 你好 nvcc 7.5.17

但是有一长串警告（如果您真的想查看它们，请参阅帖子[历史记录）。](https://stackoverflow.com/posts/39745481/revisions)

### 更新：

不幸的是，使用 CUDA 8.0 和 VS2015（同时具有 Eigen 3.2.9 和 Eigen 3.3rc1）再次导致编译错误：

> "operator=" 已在当前作用域中声明 eigen\src\Core\Block.h 111
> "operator=" 已在当前作用域中声明 eigen\src\Core\Ref.h 89

很近...

### 更新 2：

这已在提交[59db051](https://bitbucket.org/eigen/eigen/commits/59db0512e12d98e8e223483f785931a076984288)中修复，可通过使用开发分支或等待 v3.3（或 3.3rc2）实际发布来获得。

# java - Java 性能与代码风格：从同一行代码进行多个方法调用

> ID：12802562
> 
> 赞同：6
> 
> 时间：2012-10-09T14:42:29.143
> 
> 标签：java, performance, coding-style

我很好奇在同一行代码中打包多个和/或嵌套的方法调用是否对性能更好，这就是为什么一些开发人员这样做的原因，其代价是降低了代码的可读性。

例如

```
//like
Set<String> jobParamKeySet = jobParams.keySet();
Iterator<String> jobParamItrtr = jobParamKeySet.iterator(); 
```

也可以写成

```
//dislike    
Iterator<String> jobParamItrtr = jobParams.keySet().iterator(); 
```

就个人而言，我讨厌后者，因为它在同一行中进行多次评估并且我很难阅读代码。这就是为什么我尽量**避免**每行代码有多个评估。我也不知道`jobParams.keySet()`返回 a`Set`并且这让我很烦恼。
另一个例子是：

```
//dislike
Bar.processParameter(Foo.getParameter()); 
```

对比

```
//like
Parameter param = Foo.getParameter();
Bar.processParameter(param); 
```

前者让我讨厌和头晕，因为我喜欢在每一行代码中使用简单而干净的评估，当我看到其他人的代码这样写时我只是讨厌它。

**但是在同一行中打包多个方法调用有什么（性能）好处吗？**

编辑：由于@stemm 的提醒，单行也更难调试

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:45:09.873

微优化是杀手锏。如果您显示的代码引用是实例范围（或）方法范围，我将采用第二种方法。

一旦方法执行完成，方法范围变量将有资格进行 GC，因此即使您声明另一个变量，也没关系，因为范围是有限的，您获得的优势将是可读的主表代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T15:22:16.260

我倾向于不同意此列表中的大多数其他人。实际上，我发现第一种方式更清晰，更易于阅读。

在您的示例中：

```
//like
Set<String> jobParamKeySet = jobParams.keySet();
Iterator<String> jobParamItrtr = jobParamKeySet.iterator();
Could be also written as

//dislike    
Iterator<String> jobParamItrtr = jobParams.keySet().iterator(); 
```

第一种方法（您喜欢的方法）有很多不相关的信息。例如，迭代器接口的全部意义在于为您提供一个标准接口，您可以使用它来循环任何支持的实现。因此，它是一个键集这一事实与代码本身无关。您正在寻找的只是遍历已实现对象的迭代器。

其次，第二个实现实际上为您提供了更多信息。它告诉您代码将忽略 jobParams 的实现，并且只会循环遍历键。在第一个代码中，您必须首先追溯 jobParamKeySet 是什么（作为一个变量）以找出您正在迭代的内容。此外，您不知道在范围内的其他地方是否/在哪里使用了 jobParamKeySet。

最后，作为最后的评论，第二种方式更容易在必要时切换实现；在第一种情况下，您可能需要重新编码两行（第一个变量赋值，如果它从一个集合更改为其他内容），而第二种情况您只需要更改一行。

话虽这么说，但凡事都有限度。在一行中链接 10 个调用可能很难阅读和调试。然而，3 或 4 个级别通常是明确的。有时，特别是如果多次需要中间变量，显式声明它更有意义。

在您的第二个示例中：

```
//dislike
Bar.processParameter(Foo.getParameter());
vs

//like
Parameter param = Foo.getParameter();
Bar.processParameter(param); 
```

我发现实际上更难以准确理解`Bar.processParameter(param)`. 我需要更长`param`的时间来匹配变量实例化才能看到它是`Foo.getParameter()`. 而在第一种情况下，信息非常清晰并且呈现得非常好 - 您正在处理`Foo.getParameter()`参数。就个人而言，我发现第一种方法也不太容易出错 -`Foo2.getParamter()`当它在同一个调用中而不是单独的行中时，你不太可能意外使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T14:44:58.627

少了一个变量赋值，但即使是编译器也可以在某些情况下对其进行优化。我不会为了性能而这样做，这是一种[早期的优化](http://c2.com/cgi/wiki?PrematureOptimization)。编写更易于维护的代码。

就我而言，我发现：

```
Iterator<String> jobParamItrtr = jobParams.keySet().iterator(); 
```

比以下更容易阅读：

```
Set<String> jobParamKeySet = jobParams.keySet();
Iterator<String> jobParamItrtr = jobParamKeySet.iterator(); 
```

但我想这是个人品味的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T14:48:18.627

代码永远不会由同一用户开发。我会选择第二种方式。也更容易理解和维护。

当两个不同的团队在不同的位置处理代码时，这也是有益的。

很多时候，如果他使用第一个选项，我们需要一个小时或更长时间来了解其他开发人员做了什么。我个人多次遇到这种情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T15:13:48.093

> 但是在同一行中打包多个方法调用有什么（性能）好处吗？

我严重怀疑差异是可衡量的，但即使有我也会考虑

> 我很难阅读代码。

更重要的是，它不能被夸大。

即使它的速度只有一半，我仍然会编写最简单、最干净和最容易理解的代码，只有当你分析了应用程序并确定你有问题时，我才会考虑优化它。

顺便说一句：我更喜欢更密集的链接代码，但我建议您使用您喜欢的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-09T15:14:23.080

省略额外的局部变量可能具有可忽略的性能优势（尽管 JIT 可能能够优化这一点）。

就我个人而言，我不介意调用链接，因为它非常清楚做了什么并且中间对象不太可能为空（比如你的第一个“不喜欢”示例）。当它变得复杂时（表达式中有多个 .），我更喜欢显式的局部变量，因为它调试起来非常简单。

所以我根据具体情况决定我喜欢什么:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T19:25:26.920

我看不出哪里比人们似乎不太介意的地方`a().b().c().d`更难阅读。`a.b.c.d`（虽然我会把它拆开。）如果你不喜欢这一切都在一条线上，你可以说

```
a()
 .b()
 .c()
 .d 
```

（我也不喜欢那样。）我更喜欢使用几个额外的变量来分解它。它使调试更容易。

如果性能是您关心的问题（应该如此），首先要了解的是不要为小事出汗。如果添加额外的局部变量需要付出任何代价，那么在它开始变得重要之前，其余的代码就必须是无脂肪的。

# html - 父元素不随样式链接缩放

> ID：12802564
> 
> 赞同：0
> 
> 时间：2012-10-09T14:42:33.650
> 
> 标签：html, css, styling

[示例@JsFiddle](http://jsfiddle.net/qysnr/)

为什么包裹蓝色盒子的灰色盒子*不*随它们缩放？我已经为元素尝试了许多不同的属性组合，但我无法让它正常工作。

效果其实还不错，但不是我想要的。解释为什么会发生这种情况会有所帮助。提前致谢！:)

PS：我在 Mozilla Firefox 15.0.1

* * *

![在此处输入图像描述](../Images/76cdff30cebc9c3c6830cf9848c756f8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:44:34.843

您的`a`元素的 display 属性设置为`inline`。这实质上意味着它们被视为文本，因此应用于它们的任何“块”类型属性都不会像你期望的那样工作，就像你说的那样，一个 div。

了解 display 属性是 CSS 的重要组成部分，但对于这个示例，您希望链接是内联的，但也是一个块，因此您可以使用：

```
a { display: inline-block; } 
```

现在外部 div 将考虑`inline-block`元素的大小，而之前它不会将链接视为文本。

# c - 将#defined 字符串复制到结构体数组中

> ID：12802568
> 
> 赞同：1
> 
> 时间：2012-10-09T14:42:43.633
> 
> 标签：c, string

我有一个结构：

```
//GUID structure
typedef struct {
    var8 octet[16];
} GPTGUID_t; 
```

和一个很长的#define 为：

```
#define PTYPE_MRP_UPPER     0x4db80b5ce3c9e316ULL
#define PTYPE_MRP_LOWER     0xae1502f02df97d81ULL 
```

我希望在八位字节 0 到 7 中复制 UPPER 部分，在 8 到 15 中复制 LOWER 部分。不幸的是，包括 memcpy 在内的所有尝试都失败并给出了段错误。

我尝试了一些方法：

```
 strcpy(guid.octet[0], PTYPE_MRP_UPPER);
        strcpy(guid.octet[8], PTYPE_MRP_LOWER); 
```

并且，

```
memcpy(guid.octet[0], PTYPE_MRP_UPPER, sizeof(PTYPE_MRP_UPPER));
memcpy(guid.octet[8], PTYPE_MRP_LOWER, sizeof(PTYPE_MRP_LOWER)); 
```

两者都失败了。

顺便说一句：

```
typedef unsigned char       var8;
typedef unsigned short      var16;
typedef unsigned int        var32; 
```

但是，我能够将单个八位组提取为：

```
 memcpy( guid.octet, pHdr->partTypeGUID, sizeof(GPTGUID_t));//copy the partitionTypeGUID
    p1 = getvar64(guid.octet[0]);
    p2 = getvar64(guid.octet[8]); 
```

在哪里，`#define getvar64(x) (*(var64*)(&x))`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:47:34.663

该值`0x4db80b5ce3c9e316ULL`不是字符串，因此`strcpy`将其视为指针，并且具有这样的值，它指向*错误*。

`strcpy`在找到零字节（字符）之前，您也不能在复制时使用它`'\0'`。改为使用`memcpy`。

您也不会传递*指向*函数的指针，`memcpy`而是传递值。您应该打开更多警告，因为编译器*不会*喜欢它，但显然不足以使其成为错误。

尝试这样调用`memcpy`：

```
unsigned long long val;

val = PTYPE_MRP_UPPER;
memcpy(&guid.octet[0], &val, sizeof(val));
val = PTYPE_MRP_LOWER;
memcpy(&guid.octet[8], &val, sizeof(val)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:53:15.737

这些不是内存部分，这些是数字：为什么不使用掩码？

```
int i;
unsigned long long mask = 0xff00000000000000;
for (i = 0; i < 8; i++)
{
  guid.octet[i] = (PTYPE_MRP_UPPER & mask) >> ((7 - i) * 8);
  guid.octet[i+8] = (PTYPE_MRP_LOWER & mask) >> ((7 - i) * 8);
  mask >>= 8;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:49:31.650

您可以使用联合：

```
//GUID structure
typedef struct {
    union {
        var8 octet[16];
        uint64_t qword[2];
    };
} GPTGUID_t;

// This copies the bytes in native-endian order; do an endian swap if you need
// non-native order
guid.qword[0] = PTYPE_MRP_UPPER;
guid.qword[1] = PTYPE_MRP_LOWER; 
```

请注意，这是一个匿名联合，它是 C11 语言标准的一个特性，但它也在许多 C89/C99 编译器中作为语言扩展实现；如果您的编译器不支持这一点，那么您必须改用命名联合。

或者，如果您不能或不想修改 的定义`GPTGUID_t`，您应该一次只复制一个字节：

```
// This stores the bytes in big-endian order
guid.octet[0] = (var8)(PTYPE_MRP_UPPER >> 56);
guid.octet[1] = (var8)(PTYPE_MRP_UPPER >> 48);
guid.octet[2] = (var8)(PTYPE_MRP_UPPER >> 40);
guid.octet[3] = (var8)(PTYPE_MRP_UPPER >> 32);
guid.octet[4] = (var8)(PTYPE_MRP_UPPER >> 24);
guid.octet[5] = (var8)(PTYPE_MRP_UPPER >> 16);
guid.octet[6] = (var8)(PTYPE_MRP_UPPER >> 8);
guid.octet[7] = (var8)(PTYPE_MRP_UPPER);
guid.octet[8] = (var8)(PTYPE_MRP_LOWER >> 56);
guid.octet[9] = (var8)(PTYPE_MRP_LOWER >> 48);
guid.octet[10] = (var8)(PTYPE_MRP_LOWER >> 40);
guid.octet[11] = (var8)(PTYPE_MRP_LOWER >> 32);
guid.octet[12] = (var8)(PTYPE_MRP_LOWER >> 24);
guid.octet[13] = (var8)(PTYPE_MRP_LOWER >> 16);
guid.octet[14] = (var8)(PTYPE_MRP_LOWER >> 8);
guid.octet[15] = (var8)(PTYPE_MRP_LOWER); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-09T14:47:43.987

0x4db80b5ce3c9e316ULL 和 0xae1502f02df97d81ULL 究竟是什么？似乎您在特定地址随机复制数据。

顺便说一句，如果你真的在处理字符串，

```
#define PTYPE_MRP_UPPER     "0x4db80b5ce3c9e316ULL"
#define PTYPE_MRP_LOWER     "0xae1502f02df97d81ULL" 
```

应该做的伎俩。（即使我不知道你真正想用这些值做什么）

# c# - 测试网站与调试模式不同

> ID：12802569
> 
> 赞同：1
> 
> 时间：2012-10-09T14:42:44.970
> 
> 标签：c#, asp.net, debugging, testing

我目前正在开发一个 asp.net C# 项目。它使用 MVC 4、实体框架和 LINQ。我是这一切的新手。

我的客户希望我在他们的网站上实现新的 CSS 样式。我已经成功地做到了这一点，它在调试模式下看起来是正确的（在我的本地机器上运行 localhost:59600/）。但是当我到达测试网站（不是我的机器 dev.websitename.com 的本地）时，没有应用 CSS 样式表。我也没有 FTP 或服务器访问权限。是我的代码或配置中的某些东西导致了这个问题吗？

```
<link rel="stylesheet" type="text/css" media="all" href="<%= Url.Styles("leaguetime.css") %>" />
<link rel="stylesheet" type="text/css" media="all" href="<%= Url.Styles("widget-css.css") %>" />
<link rel="stylesheet" type="text/css" media="all" href="<%= Url.Styles("dropdownmenu.css") %>" /> 
```

我已检查以确保 CSS 文件位于 Styles 文件夹中。

我很感激任何和所有的答案，并记住我是一个新手，所以任何简单的答案都不会太简单。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:49:47.277

如果您正在使用 URL 帮助程序.. 不妨使服务器路径相对于您网站的根目录：

```
<link rel="stylesheet" type="text/css" media="all" href="<%= Url.Content("~/xxx/leaguetime.css") %>" /> 
```

请参阅：[http ://amadiere.com/blog/2010/03/4-top-tips-for-portable-asp-net-mvc-apps/](http://amadiere.com/blog/2010/03/4-top-tips-for-portable-asp-net-mvc-apps/)

# ruby-on-rails - Ruby On Rails ActiveRecord 3 方式加入

> ID：12802573
> 
> 赞同：0
> 
> 时间：2012-10-09T14:42:52.150
> 
> 标签：ruby-on-rails, ruby, activerecord

我有 3 个模型：

```
class ProductLine < ActiveRecord::Base
  has_many :specifications
  has_many :specification_categories, :through => :specifications,
end

class Specification < ActiveRecord::Base
  belongs_to :product_line
  belongs_to :specification_category
end

class SpecificationCategory < ActiveRecord::Base
  has_many :specifications
  has_many :product_lines, :through => :specifications
end 
```

基本上，我们在产品线页面上将规格显示为数据的子集，我们想做类似的事情（仅作为示例，是的，我知道 N+1）：

控制器：

```
@product_line = ProductLine.find(params[:id])
@specification_categories = @product_line.specification_categories) 
```

看法：

```
@specification_categories.each do |specification_category|
 ...
 specification_category.specifications.each do |specification|
  ...
 end
end 
```

这里的问题是让 Rails 过滤 ProductLine 的规范。我已经尝试构建查询来执行此操作，但是在调用最终关联时它总是会生成一个单独的 NEW 查询。即使我们现在没有使用上面的代码（这里不是一个好主意，因为我们可能会遇到 N+1 问题），我想知道是否可以使用关联过滤进行 3 路连接. 有没有人遇到过这种情况？您能否提供一个示例，说明我将如何在此处完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:48:57.903

1.  通过将您的行更改为：@specification_categories = @product_line.specification_categories).include(:specifications) 来防止 N+1

或者

1.  使用 .joins(:association) 构建您自己的查询，并自己进行分组。

# javascript - nodejs脏检查键是否存在

> ID：12802574
> 
> 赞同：1
> 
> 时间：2012-10-09T14:42:55.677
> 
> 标签：javascript, node.js, node-dirty

我是 Node.js 的新手。我正在使用 Dirty 将数据保存到 .db 文件中，但我不知道通过 db.set() 插入的密钥是否已经存在。

换句话说：我想检查密钥是否存在，如果存在，就做点什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:00:22.740

只需使用以下提供的基本文档：[https ://github.com/felixge/node-dirty](https://github.com/felixge/node-dirty)

我想说处理这个问题的最好方法是：

```
if(!!db.get(key)){
   //your value already exists
} 
```

这个系统似乎是为幼稚的方法设计的，这当然是幼稚的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:52:18.860

您可以通过使用并检查返回值是否已定义来检查键是否存在[`dirty.get(key)`](https://github.com/felixge/node-dirty#dirtygetkey)（如果它是“假”值，例如假、零、空字符串等）：

```
var myKey='...', myVal=dirty.get(myKey);
if (typeof(myVal) !== 'undefined') {
  // Do something...
} 
```

**[下面的原始答案]**

[`fs.exists(...)`](http://nodejs.org/docs/latest/api/fs.html#fs_fs_exists_path_callback)您可以使用node.js中的函数检查文件是否存在：

```
fs.exists(myDatabaseFilename, function(exists) {
  if (exists) { /* Do something... */ }
}); 
```

# azure - Azure 自动缩放 - 我有哪些选项？

> ID：12802585
> 
> 赞同：2
> 
> 时间：2012-10-09T14:43:39.767
> 
> 标签：azure, azure-web-roles

我在 Azure 上有一个正在运行的服务，我希望它能够自动缩放。

我试过芥末（来自 MS 的天蓝色自动缩放）——它对我不起作用。

所以我正在寻找其他第三方服务。

我发现只有 2 个 - opstera（对新客户关闭）和 paraleap 似乎没有客户。

缩放天蓝色的任何其他选项？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:17:20.893

我不确定您从哪里获得信息，但 AzureWatch @ [http://www.paraleap.com](http://www.paraleap.com)拥有大量客户，并且每天都在增加新用户。

AzureWatch 也处于将其配置工具从桌面工具迁移到在线工具的最后阶段。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:05:02.430

您可以尝试[AzureCheck](http://azurecheck.cloudapp.net)。它提供监控数据和手动以及自动缩放选项。您可以使用免费帐户试用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T16:39:55.723

在 Azure 中实现自动缩放有三个选项。

1.基于工具（WASABi、MetricsHub） 2.自定义脚本 3.Windows Azure Autoscale

Azure 自动缩放和脚本都可以使用，仅用于基本级别的自动缩放。WASABi 和 MetricsHub 可用于高级自动缩放。WASABi 是一个应用程序块，它是 Entlib-5.0 的一部分。在 MSDN 博客上有一篇很棒的文章。

[http://blogs.msdn.com/b/agile/archive/2013/07/02/windows-azure-autoscaling-now-built-in.aspx](http://blogs.msdn.com/b/agile/archive/2013/07/02/windows-azure-autoscaling-now-built-in.aspx)

我希望这能帮到您。

问候，-戈帕尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T09:59:11.287

[Azure Self-Scaling Portal](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-Self-Scaling-8516b857)对您来说可能是一个好的开始 - 它有一个扩展策略示例（ScaleManager.cs 文件）和大量有用的包装代码来调用管理 API (ManagenebtService.cs)。许可证非常宽松。使用这些东西的一部分，您可以制定自己的解决方案。

# php - 使用 PHP 在类中声明变量

> ID：12802586
> 
> 赞同：0
> 
> 时间：2012-10-09T14:43:46.350
> 
> 标签：php, class, simplexml, private, class-variables

对 PHP 中的类相当陌生，所以请多多包涵。

```
class processRoutes
    {   
        //Next line works
        private $doc = "works as as string";
        //Next line does not work, "Parse error: syntax error, unexpected T_NEW"
        private $doc = new SimpleXMLElement('routingConfig.xml', null, true);
        private function getTablenames()
        {
            //do stuff  
        }
    } 
```

我试图最终在我的类中使用 SimpleXMLElement 对象，以及几个私有函数。解决此问题的正确方法是什么，为什么我当前的方法不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:46:27.563

您需要在构造函数中执行此操作，因为在脚本解析的此阶段无法评估。'简单' 值，如字符串、布尔值和数值都可以。

```
class processRoutes
{   
  //Next line works
  private $doc = "works as as string";

  private $doc;

  public function __construct()
  {
     $this->doc = new SimpleXMLElement('routingConfig.xml', null, true);
  }

  // ....
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:53:01.893

您正在尝试使用对象实例初始化属性，但您只能使用可以在“编译时”确定的常量来初始化变量。

来自[PHP 手册 - 属性](http://php.net/manual/en/language.oop5.properties.php)

> 这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

任何依赖于“运行时”知识的初始化都需要执行

*   在运行的构造函数中（请参阅@Dan-Lee 关于如何实现的答案）`$this->doc`，
*   例如，从您的构造函数调用的“初始化程序”函数（您可能会这样做以使“初始化”步骤与可能从您的构造函数完成的其他“实际工作”不同），或
*   由您班级的消费者手动操作。消费者可以操作
    *   直接在属性或您的对象上（例如`myProcessRoutes->doc = 'some other string'`），
    *   通过对您的对象的函数调用，例如 `myProcessRoutes.initialise_doc('some other string')`，或
    *   通过对象上的设置器 - 我会让你研究这些，因为我没有在 PHP 中使用过这些！;-)

（尽管如果这些在实例化/构造函数之后发生的方法真的是*初始化*，这是有争议的/哲学的）。

类构造函数/析构函数的要点是提供一个“钩子”，通过它可以根据需要初始化/处置对象实例。

您可能只需要根据您的示例创建一些特定的新实例，在这种情况下，您不需要接受来自使用者的构造函数的任何输入。

或者，您可能需要接受一些值才能正确设置您的类。当您调用时，这正是上面示例代码中发生的情况

```
private $doc = new SimpleXMLElement('routingConfig.xml', null, true); 
```

`'routingConfig.xml'`（也就是说，您将`null`和`true`in 的值传递给 的新实例`SimpleXMLElement`，以便该实例的构造函数可以使用您传递给它的值来初始化该实例，以供使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:48:10.530

任何时候你想引用一个类的变量，使用关键字 $this

```
public function getTablenames()
{
    $my_new_variable = $this->doc; // Transfers the $doc variable
} 
```

# c# - 从代码隐藏中删除一个 asp.net 控件

> ID：12802588
> 
> 赞同：8
> 
> 时间：2012-10-09T14:43:50.607
> 
> 标签：c#, asp.net, .net

验证某个条件后，我需要从我的页面中删除一个控件（文本框）。是否可以从代码隐藏或我需要使用 JavaScript。

**注意**我需要删除控件，而不是隐藏...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T14:49:04.267

在父级上使用[`Controls.Remove`](http://msdn.microsoft.com/en-us/library/system.web.ui.controlcollection.remove.aspx)或。[`Controls.RemoveAt`](http://msdn.microsoft.com/en-us/library/system.web.ui.controlcollection.removeat.aspx)`ControlCollection`

例如，如果要从页面顶部删除所有 TextBox：

```
var allTextBoxes = Page.Controls.OfType<TextBox>().ToList();
foreach(TextBox txt in allTextBoxes)
    Page.Controls.Remove(txt); 
```

[（请注意，您需要添加`using System.Linq`for `Enumerable.OfType`）]

或者，如果您想删除具有给定 ID 的 TextBox：

```
TextBox textBox1 = (TextBox)Page.FindControl("TextBox1"); // note that this doesn't work when you use MasterPages
if(textBox1 != null)
    Page.Controls.Remove(textBox1); 
```

如果您只想隐藏它（并将其从客户端完全删除），您也可以使其不可见：

```
textBox1.Visible = false; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T14:46:54.007

虽然您可以将其从控件集合中删除，但为什么不将其隐藏呢？

```
yourTextBox.Visible = false; 
```

这将阻止它包含在发送到浏览器的生成的 html 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:46:54.523

设置时`.Visible=false`，它永远不会在页面中呈现。如果从 Controls 集合中删除控件，请不要在`DataBind`、`Init`、或阶段执行此操作`Load`，因为它会引发异常。`PreRender``Unload`

动态添加或删除控件可能会导致问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:45:46.397

是的，您可以将其从页面的控件集合中删除：

```
this.Controls.Remove(control); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:47:32.480

您可以尝试使用此代码 - 基于`Remove method`

```
this.Controls.Remove(YourControl); 
```

链接： http: [//msdn.microsoft.com/en-US/library/system.web.ui.controlcollection.remove (v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/system.web.ui.controlcollection.remove(v=vs.80).aspx)

# php - 如何获得 MySql 将无限返回的结果数量？

> ID：12802594
> 
> 赞同：0
> 
> 时间：2012-10-09T14:44:04.990
> 
> 标签：php, mysql, limit

我有一个包含大量数据的表，所以我检索它并一次显示一页（我的请求很长，所以我无法在整个表上运行它）。

但我想对结果进行分页，所以我需要知道我的表格中的元素总数是多少。

如果我`COUNT(*)`在同一个请求中执行 a ，我会得到所选元素的数量（在我的例子中是 10）。

如果我`COUNT(*)`在第二个请求中对我的表执行 a，则结果可能是错误的，因为我的主查询中的 where、join 和 having 子句。

什么是最干净的方法：

*   检索数据
*   了解我的表中针对此特定请求的最大元素数

* * *

一种解决方案似乎是使用[Mysql 函数 FOUND_ROWS](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_found-rows)：

我试过这个，因为 mysql_query 一次执行一个查询：（采取[here](https://stackoverflow.com/a/3453823/311744)）

```
$query = 'SELECT SQL_CALC_FOUND_ROWS * FROM Users';
$result = mysql_query($query);
// fetching the results ...

$query = 'SELECT FOUND_ROWS()';
$ result = mysql_query($query);

// debug
while ($row = mysql_fetch_row($result)) {
    print_r($row);
} 
```

我得到了一个结果为 0 的数组：

```
Array ( [0] => 0 ) 
```

而我的查询确实返回结果。

我的方法有什么问题？你有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:49:53.040

如果是 则设置`mysql.trace_mode`为。`Off``On`

`ini_set('mysql.trace_mode','Off');`如果您无法编辑 my.cnf，也可能会根据您的主机配置工作

如果这不能使您在上面发布的代码起作用，那么您将需要在没有 LIMIT 的情况下再次运行查询并以这种方式计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:57:31.543

上面的代码工作正常。我没有正确打开连接。

输出是：

```
Array ( [0] => 10976 ) 
```

我仍然对另一种方法感兴趣，尤其是不依赖于 mysql 的方法。

# python - 回调函数中的 AttributeError

> ID：12802595
> 
> 赞同：5
> 
> 时间：2012-10-09T14:44:24.370
> 
> 标签：python, gtk, pygtk, attributeerror

真的很抱歉用 AttributeError 打扰您，但我无法弄清楚我的代码有什么问题，尽管我解决了许多关于 AttributeErrors 的已解决问题。

这是我的代码：

```
class Base:

    def __init__(self):
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.set_position(gtk.WIN_POS_CENTER)
        self.window.set_size_request(500,500*9/16)
        self.window.set_title("pattern_executer")

        self.button1 = gtk.Button(" E x i t ")
        self.button1.connect("clicked",self.close)

        self.button2 = gtk.Button("Plot")
        self.button2.connect("clicked",self.plot)

        self.button3 = gtk.Button("Search")
        self.button3.connect("clicked",self.search)

        self.entry1 = gtk.Entry()
        self.entry1.connect("changed",self.dir_ch)
        self.entry1.set_text("dir1")

        self.entry2 = gtk.Entry()
        self.entry2.connect("changed",self.dir_ch)
        self.entry2.set_text("name")

        self.entry3 = gtk.Entry()
        self.entry3.connect("changed",self.dir_ch)
        self.entry3.set_text("dir2")

        #self.label1 = gtk.Label("FUNCTIONS")

        fixed1 = gtk.Fixed()
        fixed1.put(self.button1,10,250)
        fixed1.put(self.button2,10,60)
        fixed1.put(self.button3,10,30)
        fixed1.put(self.entry1,90,30)
        fixed1.put(self.entry2,90,60)
        fixed1.put(self.entry3,90,90)

        self.window.add(fixed1)
        self.window.show_all()
        self.window.connect("destroy",self.close)

    def run(self,widget):

        print "Run ... "

    def search(self,widget):
        box = (settings[1] - settings[3]/2,settings[2] - settings[4]/2,settings[1] + settings[3]/2,settings[2] + settings[4]/2)
        cut1 = im.crop(box)
        cut1.show()

    def cut(self):
        box = (settings[1] - settings[3]/2,settings[2] - settings[4]/2,settings[1] + settings[3]/2,settings[2] + settings[4]/2)
        cut1 = im.crop(box)
        return cut1

    def gpv(self): #get pixel value
        data = self.cut()
        data = list(data.getdata())
        data = np.array(data)
        data = data.reshape(settings[4],settings[3])   
        data = np.flipud(data)
        return data

    def plot(self,widget):        
        xlist = np.linspace(0,1.0,settings[3])
        ylist = np.linspace(0,1.0,settings[4])
        X,Y = np.meshgrid(xlist, ylist)

        fig = plt.figure()        
        fig = plt.contour(X, Y, self.gpv(),settings[0],colors = "k")
        fig = plt.contourf(X, Y, self.gpv(),settings[0])

        plt.show(fig)

    def dir_ch(self,widget):
        directories[0] = self.entry1.get_text()
        directories[1] = self.entry2.get_text()
        directories[2] = self.entry3.get_text()

    def close(self,widget,data=None):
        print "Closed"
        gtk.main_quit()

    def main(self):
        gtk.main()

if __name__ == "__main__":
    base = Base()
    base.main() 
```

如果我执行它，我会收到以下错误消息：

```
Traceback (most recent call last):
  File "E:\cutter\cutter.py", line 113, in dir_ch
    directories[1] = self.entry2.get_text()
AttributeError: Base instance has no attribute 'entry2'
Traceback (most recent call last):
  File "E:\cutter\cutter.py", line 114, in dir_ch
    directories[2] = self.entry3.get_text()
AttributeError: Base instance has no attribute 'entry3' 
```

在我看来，有趣的问题是“entry1”与“entry2”和“entry3”绝对相似，但不会产生任何问题。你知道为什么会出现这些错误吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:51:40.537

原因在于以下几行：

```
self.entry1.connect("changed",self.dir_ch)
self.entry1.set_text("dir1") 
```

发生*在* `entry2`或`entry3`定义之前，但*在* `entry1`定义之后。这会导致`self.dir_ch`回调函数被调用。然后，该功能依赖于`entry1`、`entry2`和`entry3`所有现有的。

一种解决方法是使用以下行定义所有三个字段：

```
 self.entry1 = gtk.Entry()
    self.entry2 = gtk.Entry()
    self.entry3 = gtk.Entry() 
```

在连接或更改其中任何一个之前。

# google-chrome - 谷歌地图 v3 中 chrome 上的 lng 和 lat 线

> ID：12802605
> 
> 赞同：1
> 
> 时间：2012-10-09T14:44:39.757
> 
> 标签：google-chrome, google-maps-api-3

当在 chrome 中查看时，我的谷歌地图 v3 地图上出现的纬度网格线出现了不需要的纵向。无论我是否关闭地图样式，它们都会出现。有什么想法可能导致这种情况吗？与容器样式有关吗？

谢谢

![在 chrome 中映射 V3 行](../Images/52f0aaf7ba479a5cd778cca517165163.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T07:38:35.270

事实证明，这是因为浏览器的缩放未设置为 100% (cmd +/-) ...如果缩放设置为 100% 以外的其他值，则地图 api 将在 chrome 上显示这些行（在我的机器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T23:05:17.077

我遇到了完全相同的问题，所以我试图深入研究这个问题。我使用本地 apache 网络服务器来检查我的网页，所以我曾经输入

`http://localhost/path/to/the/page/with/the/map`

通过尝试以 localhost 作为域来查看我的页面，问题就解决了。所以我试图通过用我的 IP 地址替换 localhost 来访问我的页面，瞧！问题消失了。

要尝试自己的问题和解决方案，您可以简单地复制并粘贴第一个官方谷歌地图指南的示例，并尝试通过 localhost 和您的 IP 地址对其进行寻址来查看它

[官方谷歌地图示例](https://developers.google.com/maps/documentation/javascript/examples/map-simple?hl=it)

希望能帮助到你

# regex - 在 Jmeter 中使用正则表达式提取器提取 JSON 响应

> ID：12802607
> 
> 赞同：0
> 
> 时间：2012-10-09T14:44:45.600
> 
> 标签：regex, json, jmeter

我想从为登录 Web 服务收到的 JSON 响应中提取键值，并将该键值传递给所有其他后续服务。

注意：此键值是动态的。

JSON 响应如下所示：

```
{
 "key":"jwtjWgwnqIVapQeDh47rkFaKV6E",
 "username":"Tester",
 "password":"xyz",
 "servername":"123.45.6.789",
 "mailpath":"mail/tmail5.nsf",
 "pin":"xxxx",
 "defaultAttachments":"OFF",
 "sendMailsFor":"W-1",
 "serverTime":"10/09/2012 20:02:57"
} 
```

请帮助我编写正则表达式以提取相同的值并将该键值传递给所有其他下一个 Web 服务。

请让我知道我应该在“参考名称：”、“正则表达式：”、“模板：”、“匹配号：”字段中写什么以及如何在下一个 Web 服务中声明“参考名称”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:42:55.657

如果`key`外观在响应中是唯一的，您可以简单地使用添加到返回 json 响应的 HTTP 请求中的正则[表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)，正则表达式如下：

```
`**HTTP Request**
    **Regular Expression Extractor**
    Reference Name: authKey
    Regular Expression: "key":"(.+?)"
    Template: $1$
    Match No.: 1` 
```

``${authKey}`并在测试中的所有进一步请求/采样器中引用提取的值。`

 `您也可以针对相同的情况[对此进行调查。](https://stackoverflow.com/questions/9416300/how-to-extract-json-response-data-in-jmeter-using-regular-expression-extractor)
并且请不要懒惰，以后先看看周围：看起来您的问题的答案已经存在于此。`

# css - 无法使我的下拉菜单项变白

> ID：12802608
> 
> 赞同：0
> 
> 时间：2012-10-09T14:44:49.187
> 
> 标签：css

我无法将下拉项目的颜色变为白色，有人知道我该如何解决这个问题吗？

我的正常链接需要是黑色的，非活动的需要是黑色的，活动的需要是白色的，下拉项需要是白色的。除了最上方的下拉项目外，我已经用该代码获得了所有信息。

这是我的CSS：

```
.menuitems{
        line-height: 240%;
        text-transform: uppercase;
    }
    .menuitems ul {
        font-family: Arial, Verdana;
        font-size: 14px;
        margin: 0;
        padding: 0;
    }
    .menuitems ul li {
        display: block;
        position: relative;
        float: left;
    }
    .menuitems li ul {
        display: none;
    }
    .menuitems ul li a {
        height: 40px;
        display: block;
        text-decoration: none;
        color: black;
        border-left: 1px #D0D0D0 solid;
        padding: 0px 30px 0px 30px;
    }

    .menuitems li > ul li a
     {
       color:white;
     }
    .menuitems ul ul li{
        text-transform: none;
        border-bottom: 1px #ff5c38 solid;
        line-height: 380%;
    }
    .menuitems ul li:hover{
        background: url('images/menu-background1.png') repeat-x 0 0; 
    }

    .menuitems ul li a:hover {
        height:40px; 
        color: white;
        padding-left: 30px !important;
        padding-right: 30px !important;
    }
    .menuitems li:hover ul {
        display: block;
        position: absolute;
    }
    .menuitems li:hover li {
        float: none;
        font-size: 13px;
        background:  #fa3423;
    }
    .menuitems li:hover a { }
    .menuitems li:hover li a:hover {

    }
    /* What to do on active */
    .menuitems ul li.current_page_item { 
        background: url('images/menu-background1.png') repeat-x 0 0; 
    }
    .menuitems ul li.current_page_item a{ 
        color: white;
    }
    .menuitems li.current_page_parent a {
        color: white;
    }
    .menuitems li.current_page_parent {
        color: white;
        background: url('images/menu-background1.png') repeat-x 0 0; 
    }
    .menuitems li:hover ul:hover a:hover{
        color: white !important;
    }
    .menuitems ul li ul{
        color: white;
    } 
```

我什么都试过了.. :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:58:35.000

卡斯特拉，我猜你说的是文字？如果您希望文本始终为白色，则需要更改`color: black;`为`.menuitems ul li a``color: white;`

这是一个显示它[的JSFiddle 。](http://jsfiddle.net/CJWW6/)

# google-maps - 如何在不刷新页面的情况下显示/隐藏 XML 文件中的标记

> ID：12802617
> 
> 赞同：0
> 
> 时间：2012-10-09T14:45:11.793
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我在[这里](https://stackoverflow.com/questions/12799380/how-to-add-multiple-separated-with-a-plus-symbol-waypoints-to-a-map-and-dynami)描述了一张地图。

仅在选中复选框时才会加载来自XML文件的标记。当您取消选中它时，它们仍会显示，直到页面刷新。更改复选框值时如何显示/隐藏它们？简单的

```
onclick="initialize();" 
```

不起作用，而且无论如何都会非常低效。

我无法避免拥有两个 xml 文件，并且不能使用一个带有类别的文件来代替它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:05:19.963

这是一个根据类别显示/隐藏标记的示例（再次翻译自 Mike Williams 的 v2 教程）：

[http://www.geocodezip.com/v3_MW_example_categories.html](http://www.geocodezip.com/v3_MW_example_categories.html)

编写代码为每个 XML 文件添加一个类别。

# javascript - 在 jQuery 的 .load 函数中将文本参数传递给 url 变量

> ID：12802618
> 
> 赞同：0
> 
> 时间：2012-10-09T14:45:16.690
> 
> 标签：javascript, jquery, text, parameters, load

我正在尝试通过参数（带有空格）将文本传递给加载函数，但它似乎不起作用。

目前我正在这样做：

```
var text ="hello world this is an example";
$("#selector").load("http://"+ document.domain + "/myfunction/"+text); 
```

有什么办法吗？

如果我直接通过 URL 调用该函数，而不是使用 jQuery，它运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:49:53.727

您应该使用 encodeURI 对“文本”进行编码：

```
var text = encodeURI('hello world this is an example'); 
```

这将确保您的空格被替换为与 url 兼容的字符，当您直接访问 url 时，您的浏览器会在内部执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:14:08.567

直接通过 URL 调用函数可能在您的浏览器中运行良好。但这不是未来的证据。您必须使用`encodeURI`函数对您的网址进行编码。附加用户给定数据后。

```
var text ="hello world this is an example",
url = encodeURI("http://"+ document.domain + "/myfunction/"+ text);
$("#selector").load(url); 
```

在服务器端，您可以执行类似的操作来取回用户输入的数据。

```
$data = urldecode($_SERVER['REQUEST_URI']);
// This will return
// /myfunction/hello world this is an example 
```

# jquery - 在 ASP.Net 中验证 LinkBut ton 的 webform onClick 事件

> ID：12802620
> 
> 赞同：1
> 
> 时间：2012-10-09T14:45:27.473
> 
> 标签：jquery, asp.net, validation, form-submit, asplinkbutton

在 Asp.net 中，我使用[这个](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)JQuery 验证插件。
它非常适合`<asp:Button>`控制。但是如果我使用`<asp:LinkButton>`它不会验证表单并允许它调用方法后面的代码。

为什么会这样？我怎样才能验证表单`onClick`事件`<asp:LinkButton>`？

编辑：问题`<asp:button>`是我们无法在其上添加图像。检查[这个](https://stackoverflow.com/questions/2510401/can-i-add-an-image-to-an-asp-net-button)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:17:31.957

简单的解决方案是添加一个 click 函数，如果表单无效则返回 false：

```
$("#<%= tb.ClientID %>").click(function() {
       return $('form').valid();
}) 
```

更多： [ASP.NET LinkBut​​ton / ImageButton 和 JQuery 验证？](https://stackoverflow.com/questions/649762/asp-net-linkbutton-imagebutton-and-jquery-validate) 希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:09:18.713

您可以使用`OnClientClick`以调用您的客户端方法

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.linkbutton.onclientclick.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.linkbutton.onclientclick.aspx)

注意：OnClick 用于服务器端，OnClientClick 用于客户端

# html - TinyMCE 自定义格式会破坏设置样式的能力？

> ID：12802623
> 
> 赞同：1
> 
> 时间：2012-10-09T14:45:35.890
> 
> 标签：html, tinymce

我有一个文本区域，我想添加一个简单的所见即所得编辑器。我选择了 TinyMCE，但不需要所有可用选项，因此我使用了他们页面 (http://www.tinymce.com/tryit/custom_formats.php) 中的示例，该示例仅具有我正在寻找的基本简单格式选项为了。

我遇到的问题是，编辑器下方的代码会显示，但单击样式（即粗体、下划线等）不会更新窗口。它似乎更新了底层的 HTML 样式（虽然弹出嵌入式 HTML 编辑器窗口在这里似乎也不起作用），但我没有看到样式更改。但是，如果我注释掉“格式：”块，它*确实*有效。这是在 Chrome、Firefox 和 IE 上进行的测试。

我下载了 tinymce 包，并在这样的文件夹中放置了一些东西：

```
sample\
sample\tiny_mce
sample\tiny_mce\langs
sample\tiny_mce\plugins
sample\tiny_mce\themes
sample\tiny_mce\utils
sample\tiny_mce\license.txt
sample\tiny_mce\tiny_mce.js
sample\tiny_mce\tiny_mce_popup.js
sample\tiny_mce\tiny_mce_src.js
sample\index.html (see code below) 
```

我将下载的存档 \jscripts* 文件夹的内容移至路径的根目录。我的 HTML 是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<title>TinyMCE Test</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>

<!-- OF COURSE YOU NEED TO ADAPT NEXT LINE TO YOUR tiny_mce.js PATH -->
<script type="text/javascript" src="tiny_mce/tiny_mce.js"></script>

<script type="text/javascript">
tinyMCE.init({       
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "table,inlinepopups",

        // Theme options
        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,|,table,removeformat,code",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_buttons4 : "",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Example content CSS (should be your site CSS)
        //content_css : "/js/tinymce/examples/css/content.css",

        // Style formats
        style_formats : [
                {title : 'Bold text', inline : 'b'},
                {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
                {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
                {title : 'Example 1', inline : 'span', classes : 'example1'},
                {title : 'Example 2', inline : 'span', classes : 'example2'},
                {title : 'Table styles'},
                {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
        ],

        formats : {
                alignleft : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'left'},
                aligncenter : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'center'},
                alignright : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'right'},
                alignfull : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'full'},
                bold : {inline : 'span', 'classes' : 'bold'},
                italic : {inline : 'span', 'classes' : 'italic'},
                underline : {inline : 'span', 'classes' : 'underline', exact : true},
                strikethrough : {inline : 'del'},
                customformat : {inline : 'span', styles : {color : '#00ff00', fontSize : '20px'}, attributes : {title : 'My custom format'}}
        }
});
</script>
</head>
<body>
<!-- OF COURSE YOU NEED TO ADAPT ACTION TO WHAT PAGE YOU WANT TO LOAD WHEN HITTING "SAVE" -->
<form method="post" action="show.php">
        <p>     
                <textarea name="content" cols="50" rows="15">This is some content that will be editable with TinyMCE.</textarea>
                <input type="submit" value="Save" />
        </p>
</form>

</body>
</html> 
```

任何想法我做错了什么？他们网站上的示例似乎运行良好，所以我假设我的端存在某种配置问题。真的，我只是在寻找一个 textarea 编辑器，它会给我一些基本的 HTML 格式化选项，我什至不需要任何真正花哨的东西。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:54:28.857

TinyMCE 对于粗体、斜体、下划线的默认行为是使用与格式相关的 html 实体。示例：`<strong></strong>`、`<em></em>`和带有下划线的内联样式的跨度。

似乎 Formats 代码块通过将您的选择包装在具有由“类”属性定义的类名的跨度中来覆盖此操作。

为了让您的样式使用如上所示的格式块呈现，您需要添加一个样式表，其中包含 .bold、.italic、.underline 等的定义。

如果我没记错的话，TinyMCE 使用 iframe 将其 UI 呈现在 textarea 的顶部，因此简单地链接样式表将适用于您的前端，为了使其显示在编辑框中，您需要通过 tinyMCE.init 链接到样式表（） 目的。

使用您的文件夹结构，添加样式表**\sample\tiny_mce\style.css**，在其中定义您的样式，然后在代码格式块下方添加： content_css: "\sample\tiny_mce\style.css"。这会将样式表加载到 tinyMCE 编辑界面中，然后您应该会看到已应用的样式定义。

它应该看起来像：

```
 ...

    // Style formats
    style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
    ],

    content_css : "tiny_mce/style.css"

    ... 
```

# php - PHP 嵌套循环。如何根据第一个循环的 id 在第二个循环上打印项目？

> ID：12802624
> 
> 赞同：0
> 
> 时间：2012-10-09T14:45:37.750
> 
> 标签：php, nested-loops

我需要从数据库中打印酒单。我首先需要打印一个类别，然后是里面的所有项目。这就是顺序。而且我有多个类别。所以最后结果将是categorie1, many items,categorie2 many items...

这是我从现在开始编写的代码：我认为我的问题是根据 alcool_categorie 的 id 打印项目！

```
$q_vine = "SELECT * FROM alcool_categorie ";
$r_vine = mysql_query($q_vine,$connection);
$n_vine = mysql_num_rows($r_vine);
$q_bouteille = "SELECT * FROM alcool_item where ALCNID = '$alid'";
$r_bouteille = mysql_query($q_bouteille,$connection);
$n_bouteille = mysql_num_rows($r_bouteille);
for($i = 0; $i < $n_vine; $i++){
    echo mysql_result($r_vine,$i,'named').'<br/><br/>';
    for($z = 0; $k < $n_bouteille; $k++){
        echo mysql_result($r_bouteille,$k,'name').'<br/>';
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:59:10.340

在查询中和第一个循环中正确给出类别`id`字段名称后尝试此操作。`while`

```
$q_vine = "SELECT id, named FROM alcool_categorie ";
$r_vine = mysql_query($q_vine,$connection);
$n_vine = mysql_num_rows($r_vine);
while ($row = mysql_fetch_assoc($r_vine)) {
  $categories[$row['id']] = $row;
}

$q_bouteille = "SELECT name, ALCNID FROM alcool_item ";
$r_bouteille = mysql_query($q_bouteille,$connection);
$n_bouteille = mysql_num_rows($r_bouteille);
while ($row = mysql_fetch_assoc($r_bouteille)) {
  $items[$row['ALCNID']] = $row;
}

foreach ($categories as $category_id=>$category) {
  echo "<ul><li>{$category['named']}<ul>";
  foreach ($items[$category_id] as $item) {
    echo "<li>{$item['name']}</li>";
  }
  echo "</ul></li></ul>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:06:50.787

我认为最好在查询中使用“JOIN”，然后按照您希望的方式对行进行排序，那么您只需要一个循环。在运行循环时，您将类别名称与先前的类别名称进行比较，如果它发生变化，则显示类别名称。

例子

```
$sql    = "SELECT categoryName, bottleName FROM category INNER JOIN bottle ON category.categoryId = bottle.categoryId ORDER BY category.categoryId";
$result = mysql_query($sql,$connection);

$categoryName = ''; //just to make sure the first time the Category is named

while ($row = mysql_fetch_assoc($result)) {
    if($categoryName != row['categoryName']){
        $categoryName = row['categoryName'];
        echo '<h1>'.$categoryName.'</h1>';
    }
    echo row['bottleName'].'<br/>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:00:51.277

您将需要研究 PHP 的[foreach](http://nl.php.net/manual/en/control-structures.foreach.php "PHP.net：foreach")构造。Foreach 循环遍历整个结果数组，对于数组中的每个元素，它会提取其值以及可选的键。这将不需要使用 mysql_num_rows。

[您可以使用mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php "PHP.net：mysql_fetch_assoc")从 mysql_query 中获取行的值，而不是调用 mysql_result 。该行的要获取所有值，您甚至可以将其合并到一个循环中。如果您执行后者，您可以创建自己的键/值对数组并在 foreach 构造中使用它。

还要注意mysql的使用已经过时了，你现在会想用mysqli，它和mysql很相似。

# jakarta-ee - 我的 tomcat 中有两个 Web 应用程序。两个应用程序都在与同一个数据库通信

> ID：12802630
> 
> 赞同：0
> 
> 时间：2012-10-09T14:46:00.683
> 
> 标签：jakarta-ee, tomcat, tomcat6

我的 tomcat 中有两个 Web 应用程序。两个应用程序都在与同一个数据库通信。数据库连接属性在 web.xml 中配置

1.  app1/WEB-INF/web.xml
2.  app2/WEB-INF/web.xml

每次换两个地方。如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:55:37.480

您需要在 TOMCAT 中配置 JNDI 数据源

[http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html)

这将帮助您在测试/开发和生产环境中进行更好的部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:53:48.207

考虑这个构建时解决方案：在您的 web-xml 文件中放置模板而不是实际值。例如`%DB_HOST%`，而不是`my.db.server.com`.
在构建时，将位于所有相关文件中的模板替换为实际值（例如，位于某些全局配置文件中）。

如果您有基于 ANT 的构建解决方案，则可以使用[替换任务](https://ant.apache.org/manual/Tasks/replace.html) 来实现此目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:53:29.960

哪个服务器 ru 使用？尝试将具有数据库配置的文件放在服务器的配置文件夹中并使用 jndi-lookup 获取它。

# sql - 列别名被截断

> ID：12802647
> 
> 赞同：2
> 
> 时间：2012-10-09T14:47:01.537
> 
> 标签：sql, oracle, sqlplus

使用 SQL*Plus 我正在尝试使用 select union 语句来组合同一个表中两列的结果，如下所示：

```
select substr(startdate,4,3) milestone 
  from projects 
union 
select substr(enddate,4,3) milestone 
  from projects 
```

使用列的别名`milestone`，但由于某种原因，结果显示为列 name `mil`。由于某种原因它被截断了，我认为这`substr`部分是问题所在，因为它从`stardate`and`enddate`列中获取了 3 个字符。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:00:28.400

这是因为您使用的是 sql-plus。如果我在我的数据库 GUI（PL/SQL 开发人员）中运行相同的查询，它工作正常，但在 sqlplus 中它只是截断列标题以适合数据。

我不是 sqlplus 的专家，但这解决了这个问题：

```
SQL> column milestone format a20;
SQL> select substr(sysdate,4,3) milestone from dual; 
```

结果是：

```
MILESTONE
--------------------
OCT 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T14:59:58.923

您很可能需要设置列宽。

```
COLUMN MILESTONE FORMAT A20
SET VERIFY ON
SET HEADING ON
SET PAGES 25
SET LINES 60

select substr(startdate,4,3) milestone 
  from projects 
union 
select substr(enddate,4,3) milestone 
  from projects 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:59:43.710

这有帮助吗？

```
SQL> set linesize 100
SQL> column milestone format a25
SQL> select substr(startdate,4,3) "milestone"
  from projects 
union 
select substr(enddate,4,3) "milestone" 
  from projects; 
```

# java - 无法在 Java RMI 中连接两个远程主机

> ID：12802648
> 
> 赞同：0
> 
> 时间：2012-10-09T14:47:01.757
> 
> 标签：java, rmi

我的服务器代码如下所示：

```
Registry r = java.rmi.registry.LocateRegistry.createRegistry(1399);
r.rebind("Chat", new IRC()); 
```

我客户的代码是

```
IRCInterface remoteObject = (IRCInterface) Naming.lookup("rmi://localhost:1399/Chat");
String history = remoteObject.read(); 
```

在本地主机上它可以正常工作，但我无法连接两台远程计算机（主机）。我已经关闭了所有的防火墙。

怎么了？

控制台输出：

```
Error: java.rmi.ConnectException: Connection refused to host: 150.254.79.20; nested exception is: 
java.net.ConnectException: Connection timed out: connect 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:48:46.457

```
Naming.lookup("rmi://localhost:1399/Chat"); 
```

`localhost`在上面的查找中应该替换为远程主机 IP（或）机器名。否则仅在本地机器上进行查找。

# javascript - ASP.NET：在调试时无法访问更改的 DOM

> ID：12802656
> 
> 赞同：0
> 
> 时间：2012-10-09T14:47:23.393
> 
> 标签：javascript, asp.net, debugging

我得到了一些 JS 代码，将对象的可见性从 display: none 更改为 display: block (jQuery show + hide)。当我现在尝试通过以下方式提取 C# 中的可见性时

```
webControl.Style["display"] 
```

我得到“无”而不是“阻止”。如果我在等待断点的浏览器中检查它，则控件可见并且萤火虫显示正确的“块”值。

.NET 断点是通过按下导致回发的按钮触发的。

这里发生了什么？是时间问题吗？每次重新加载时我都会做一个 jQuery 节目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:52:26.940

我不相信样式属性会发回服务器...

# php - 如何在 MYSQL UPDATE 中使用表别名

> ID：12802662
> 
> 赞同：6
> 
> 时间：2012-10-09T14:47:32.317
> 
> 标签：php, mysql

我必须使用 PHP 的 mysql_query() 函数更新 mysql 表。因此，我只需要在一个语句中发送以下 UPDATE 查询：

```
SET @i = 0;

UPDATE mytable SET id=(@i:=@i+1); 
```

我已经阅读了一些示例，这些示例可以通过使用表别名的 SELECT 语句来完成，例如：

```
SELECT @rn:=@rn+1 AS rank, t1.* FROM (SELECT * FROM mytable) t1, (SELECT @rn:=0) t2 
```

有什么方法可以将这些表别名与我需要使用的 UPDATE 语句一起使用？

编辑：

根据 Topher Hunt 的回答，我想我可以使用以下方法创建 mytable 的副本：

CREATE TABLE mytable_copy SELECT @rn:=@rn+1 AS id, t1.* FROM (SELECT * FROM mytable) t1, (SELECT @rn:=0) t2

然后 DROP mytable 并将 mytable_copy 重命名为 mytable。

此语句是否会创建 mytable 的精确副本，具有与 mytable 中的字段类型和长度相同的字段类型和长度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:55:32.337

如果您在表之间使用 JOIN，则 SELECT 和 UPDATE 语句之间的语法非常相似。例子：

```
SELECT * 
FROM table1 a
    JOIN table2 b ON a.something = b.something ## (conditions for linking tables)
    JOIN table3 c ON b.something = c.something
WHERE a.something = 'value' 
```

连接 3 个表的 SELECT 语句可以转换为 UPDATE 语句，只需删除 SELECT 行，将单词 FROM 更改为 UPDATE，并添加“SET”子句来说明您要更改的内容。像这样：

```
UPDATE table1 a
    JOIN table2 b ON a.something = b.something ## (conditions for linking tables)
    JOIN table3 c ON b.something = c.something
SET a.variable = 'value2', 
    b.something = 'value3',
    c.somethingelse = 'value4'
WHERE a.something = 'value'; 
```

如果需要，您可以同时更改多个字段；只需用逗号分隔每个 SET 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:56:32.623

为什么不直接删除此列并使用 auto_increment 添加一个新列作为主键？这将自动分配您需要的值。

```
ALTER TABLE mytable DROP COLUMN id;

ALTER TABLE mytable ADD ( id int AUTO_INCREMENT PRIMARY KEY );

-or- as you requested...

UPDATE mytable
  JOIN (SELECT @xxx := 0) AS v1 
   SET id = (@xxx := @xxx + 1)
; 
```

# objective-c - 单例被释放

> ID：12802670
> 
> 赞同：1
> 
> 时间：2012-10-09T14:47:48.790
> 
> 标签：objective-c, ios, ios5, cocos2d-iphone, ios6

我创建了一个简单的单例类来保存我的项目的静态数据。我第一次访问这个单例是在我的 Cocos2d 场景中的 onEnter 方法。但是，当我稍后尝试以另一种方法（相同场景）再次访问它时，这个单例已经被释放。我很困惑，如何防止我的单身人士被释放？

这是我的单身人士的界面部分：

```
#import <Foundation/Foundation.h>

@interface OrchestraData : NSObject
+(OrchestraData *)sharedOrchestraData;
@property (retain, readonly) NSArray *animalNames;
@end 
```

执行：

```
#import "OrchestraData.h"

@implementation OrchestraData
@synthesize animalNames = animalNames_;

+(OrchestraData*)sharedOrchestraData
{
    static dispatch_once_t pred;
    static OrchestraData *_sharedOrchestraData = nil;

    dispatch_once(&pred, ^{ _sharedOrchestraData = [[OrchestraData alloc] init]; });
    return _sharedOrchestraData;
}

-(id)init {
    if (self = [super init]) {
        animalNames_ = [NSArray arrayWithObjects:@"giraffe", @"giraffe", @"giraffe", @"giraffe", nil];
    }
    return self;
}
@end 
```

我以这种方式使用我的单身人士：

```
[[OrchestraData sharedOrchestraData] animalNames]; 
```

更新：我在启用 NSZombies 的情况下重新审视了它，看起来好像我的 NSArrays 被释放了，而不是单例本身。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:47:30.673

您必须以这种方式实现您的单例：

1）在你的单例类的 .h 文件中：

```
+ (SingletonClass *)instance; 
```

2) 在 .m 文件中：

```
+ (SingletonClass *)instance {

    static SingletonClass* instance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        instance = [[self alloc] init];
        //your init code here
    });
    return instance;
} 
```

如果你想调用你的单例，只需调用`[SingletonClass instance]`.

如果您对什么是“dispatch_once_t”感兴趣，请阅读 Grand Central Dispatch：http: [//developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T19:12:34.490

重新更新：

您的`NSArray`取消分配是因为您使用的是 autorelease 初始化程序`arrayWithObjects`并将其直接分配给 ivar `animalNames_`。因此不保留。

要解决此问题，请将数组分配给属性：

```
self.animalNames = [NSArray arrayWithObjects:@"giraffe", @"giraffe", @"giraffe", @"giraffe", nil]; 
```

顺便说一句，在 ARC 下，这不会成为问题，因为 ivar 将是一个强大的（保留）参考。我不会厌倦鼓励任何人切换到 ARC。它已经存在一年多了，再使用 MRC 代码绝对没有意义！看到开发人员仍然不使用更简单、更快、更直接的选项，我真的很痛苦。*（咆哮）* :)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-09T15:39:06.920

您可以在任何需要的地方设置一个指针。

```
-(void)someMethod {

MySingleton *singleton = [MySingleton sharedSingleton];
singleton.data = YES; //dumb example to show you did something...

}

-(void)someOtherMethod {

MySingleton *singleton = [MySingleton sharedSingleton]; //You have to create a new pointer...
singleton.data = NO; //another dumber example to show you did something...

} 
```

注意：这假设您以与我相同的方式创建了一个单例...您的代码可能不同，因此导致我的答案不适用...

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-09T16:03:03.527

您需要在单例类中覆盖以下方法，因为在您的程序中，如果有人已经初始化，`[[SingletonClass alloc] init]`那么单例将有另一个实例并释放它会导致错误。

```
+ (id)allocWithZone:(NSZone *)zone{
    return [[self SingletonClass] retain];  
}

- (id)copyWithZone:(NSZone *)zone{
    return self;
}

- (id)retain{
    return self;
} 
```

# php - 用 PHP 回显混洗数组的元素

> ID：12802671
> 
> 赞同：0
> 
> 时间：2012-10-09T14:47:54.863
> 
> 标签：php, arrays, shuffle

我在 PHP 中有一个元素数组，称为...

```
$completeArray 
```

...并且我正在尝试在我的会话中存储该数组的随机版本，称为...

```
$_SESSION['videoArray'] 
```

...所以我正在尝试这样的事情...

```
$_SESSION['videoArray'] = shuffle($completeArray); 
```

...但是当我尝试像这样回显这个随机数组的第一个元素时...

```
$videoid = $_SESSION['videoArray'];
echo $videoid[0]; 
```

...它返回的只是元素的“关键”。如何随机化数组并能够回显新数组的实际元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:50:13.347

[shuffle](http://php.net/manual/en/function.shuffle.php)引用一个数组并在成功时返回 TRUE 或在失败时返回 FALSE。

你应该做：

```
shuffle($completeArray);
$_SESSION['videoArray'] = $completeArray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:51:21.927

你可以尝试这样的事情：

```
 $_SESSION['videoArray'] = $completeArray;

shuffle($_SESSION['videoArray']); 
```

# ruby-on-rails - check_box_tag ：调用并检查状态错误

> ID：12802674
> 
> 赞同：0
> 
> 时间：2012-10-09T14:48:02.183
> 
> 标签：ruby-on-rails

我试图在 check_box_tag 上使用 :called 方法，并且还要记住来自数据库的布尔值的状态。

如果我在没有选中参数的情况下设置 check_box_tag，它会显示并使用调用的方法将检查保存到数据库中，但我不能在同一个 check_box_tag 上同时使用选中和调用

这是代码

**编辑** 我根据 Hugo Logmans 的建议从 form for 更改为 form_tag ：

```
<%= form_tag(courses_pensum_path(course_pensum.id), method: :put, remote: true, id: "edit_courses_pensum_#{course_pensum.id}") do %>
              <%= hidden_field_tag(:pensum_id, value=current_pensum.id) %>
              <%= hidden_field_tag(:course_id, value=course.id) %>
              <div class="form-inline">
                <%= check_box_tag name="type[]", value="other_area", checked: (course_pensum.other_area ? true : false),
                    :called, :onclick => "$('#edit_courses_pensum_#{course_pensum.id}').submit()" %>
                <%= label_tag 'OA', nil, class: "checkbox" %>
              </div>
            <% end %> 
```

因为它显示了 check_box_tag 的参数错误，我想这是一个愚蠢的问题，但我还没有看到它..

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:23:59.070

因为我认为这是一个朋友在这里帮助我弄清楚的语法错误......

这就是我最终的形式

```
<%= form_tag(courses_pensum_path(course_pensum.id), method: :put, remote: true, id: "edit_courses_pensum_#{course_pensum.id}") do %>
              <%= hidden_field_tag(:pensum_id, value=current_pensum.id) %>
              <%= hidden_field_tag(:course_id, value=course.id) %>
              <div class="form-inline">
                <%= check_box_tag "type[]", "other_area", course_pensum.other_area, 
                    :onclick => "$('#edit_courses_pensum_#{course_pensum.id}').submit()",
                    disabled: (current_user.role?('student') ? true : false ) %>
                <%= label_tag 'OA', nil, class: "checkbox" %>
<% end %> 
```

谢谢你们！

# java - 构造实现List接口的对象时的InstantiationException

> ID：12802676
> 
> 赞同：1
> 
> 时间：2012-10-09T14:48:09.610
> 
> 标签：java, reflection, collections

我有一个克隆不同对象的旧代码。`list`被声明为**java.util.List**

```
CloneUtils.cloneList(list); 
```

里面的`cloneList`样子是这样的：

```
public static List cloneList(final List list) throws CloneNotSupportedException {
    List list2;
    try {
        list2 = list.getClass().newInstance();
    } catch (Exception e) {
        Log.debug(e);
        list2 = new ArrayList();
    } 
```

调用`cloneList`引发异常：

```
jvm 1    | DEBUG[2012-10-09 16:57:58,611]: java.util.Arrays$ArrayList
jvm 1    | java.lang.InstantiationException: java.util.Arrays$ArrayList
jvm 1    |      at java.lang.Class.newInstance0(Class.java:340)
jvm 1    |      at java.lang.Class.newInstance(Class.java:308)
jvm 1    |      at com.acme.common.util.CloneUtils.cloneList(CloneUtils.java:
88)
jvm 1    |      at com.acme.common.data.PropertyDescriptor.clone(PropertyDesc
riptor.java:165)
jvm 1    |      at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
jvm 1    |      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMet
hodAccessorImpl.java:25)
jvm 1    |      at java.lang.reflect.Method.invoke(Method.java:597) 
```

是否可以创建一个与`cloneList`使用反射传递给方法的对象具有相同类型的新对象？

**编辑1**

`list`传递给该`cloneList`方法的参数来自：

```
String[] fields = field.split(",");
list = Arrays.asList(fields); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:14:28.977

该操作`Arrays.asList(String[]);`返回**Arrays.ArrayList**，而不是 java.util.ArrayList。

请参阅 asList 实现，

```
 public static <T> List<T> asList(final T... a)
   {
     return new Arrays.ArrayList(a);
   } 
```

Arrays.ArrayList 是 ArraysClass 中的静态内部类

```
 private static final class ArrayList<E> extends AbstractList<E> 
     implements Serializable, RandomAccess
  {
  ..
  .. 
```

但我不明白的是这种操作的意图（以不同的方式克隆列表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:10:11.427

只要原始对象的类有一个无参数构造函数，那么这将起作用。（ArrayList 确实有一个无参数的构造函数，并且可以正常工作）

```
static Object makeSameType(Object original) throws NoSuchMethodException, SecurityException, InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        Class<?> originalClass = original.getClass();
        Constructor<?> con = originalClass.getConstructor();
        return con.newInstance();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:54:02.753

从[来源](http://www.docjar.com/html/api/java/util/Arrays.java.html)-`Arrays$ArrayList`似乎该类没有空构造函数，因此您不能用空实例化它`newInstance()`

请注意，您从中获得异常的类 is`java.util.Arrays$ArrayList`和 NOT [`java.util.ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

反射的问题是 - 你不确切知道如何实例化*所有*对象 - 所以构建“所有情况下的实例化”几乎是不可能的，除非你有一些关于必须实现构造函数的指导规则。

在大多数情况下可能的另一种选择是使用[抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)而不是反射来创建新对象，但我怀疑您是否可以在这里使用它而无需进行更多修改。

# java - Spring使用java-config（不是XML）用构造函数参数实例化对象

> ID：12802683
> 
> 赞同：1
> 
> 时间：2012-10-09T14:48:29.797
> 
> 标签：java, spring, spring-mvc

如何让 Spring 实例化一个没有无参数构造函数的 bean？我正在使用 java-config（不是 xml-config）。它似乎使用 XML 工作 - 但我不应该能够以某种方式对注释做同样的事情吗？

直接来自教程，以下示例是 xml-config 中的等效示例：

```
<bean id="exampleBean" class="examples.ExampleBean">
    <constructor-arg index="0" value="7500000"/>
    <constructor-arg index="1" value="42"/>
</bean> 
```

它还提到了@ConstructorProperties 注释的使用，我尝试使用它 - 但我无法让它工作。我不断收到 BeanInstantiationException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:12:43.490

也来自下面的链接 [http://docs.oracle.com/javase/6/docs/api/java/beans/ConstructorProperties.html](http://docs.oracle.com/javase/6/docs/api/java/beans/ConstructorProperties.html)

我的理解是，@ConstructorProperties 注释不能用作您的 xml-config 的替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:19:16.087

你可以像在另一篇[SO 文章](https://stackoverflow.com/questions/2153657/spring-dependency-injection-in-construcor-with-annotations)`@Autowired`中那样使用with吗？`@Qualifier`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:53:29.170

您可以使用@Autowired 或@Inject

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:21:21.087

```
@Configuration
public class MyConfiguration {

    @Bean
    public ExampleBean exampleBean() {
        return new ExampleBean(7500000, 42);
    }
} 
```

或者：

```
@Configuration
@PropertySource(value = { "my.properties" })
public class MyConfiguration {

    @Value("{prop.value1}")
    private int value1;
    @Value("{prop.value2}")
    private int value2;

    @Bean
    public ExampleBean exampleBean() {
        return new ExampleBean(value1, value2);
    }
} 
```

# three.js - 有谁知道如何摆脱 THREE.js 中的闪烁粒子

> ID：12802688
> 
> 赞同：1
> 
> 时间：2012-10-09T14:48:41.443
> 
> 标签：three.js, flicker, particles

我尝试了以下材质设置： alphaTest：0.5 透明：true，纹理大小仅为 2 的幂（64 或 256）为纹理分配零值（发布 51 之前）纹理：{类型：“t”，值：0，纹理：this._texture }, r50 使用较大的颗粒尺寸

[http://www.cimmerian-space.com/f3d/html/Particle_flicker.html](http://www.cimmerian-space.com/f3d/html/Particle_flicker.html)

它似乎与粒子排序/深度缓冲有关。有趣的是，当您尝试隔离问题时，它就会消失，它只是导致此问题的粒子相互作用。

如果删除第 232 行 Trade_fleet = initTradeFleet(10,100,pos03,THREE.ImageUtils.loadTexture("http://www.cimmerian-space.com/images/particles/Asteroid3_64.png"),100,75,100 );

闪烁完全停止。该函数所做的只是声明一个新的火花......其他所有内容都被注释掉了。

我能想到的只是粒子排序中存在浮点不准确性。最好在粒子系统上有一个“SortingNeedsUpate”字段，或者排序仅在相机移动时更新。

似乎只发生在 Chrome 而不是 Mozilla

# mysql - MySQl 在内部连接中返回空结果

> ID：12802689
> 
> 赞同：0
> 
> 时间：2012-10-09T14:48:43.380
> 
> 标签：mysql

我正在编写一个简单的内部连接查询，但返回的是空结果集。我不确定这个问题。没有得到预期的结果。表结构是，

分配……

```
 email               FacID
   aaa@aaa.com            1
   bbb@aaa.com            1 
```

学习者.....

```
 email            active
  aaa@aaa.com            0
  bbb@aaa.com            1 
```

我期待 aaa@aaa.com 作为结果，但得到空的结果集。请帮忙。

我的疑问是，

```
select assigned.email from assigned 
INNER JOIN learner ON assigned.email=learner.email
where  assigned.FacID=1 AND learner.active='0' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:01:27.110

尝试从 learner.active = **'0'中删除单引号**

# php - 用于电子邮件验证的正则表达式：错误在哪里？

> ID：12802691
> 
> 赞同：0
> 
> 时间：2012-10-09T14:48:48.370
> 
> 标签：php, regex, email, email-validation

这听起来很奇怪，但我已经使用这个功能很长一段时间了，而且“突然间，从一天到另一天”它不再以正确的方式过滤某些地址。但是，我不明白为什么......

```
function validate_email($email)
{
/*
(Name) Letters, Numbers, Dots, Hyphens and Underscores
(@ sign)
(Domain) (with possible subdomain(s) ).
Contains only letters, numbers, dots and hyphens (up to 255 characters)
(. sign)
(Extension) Letters only (up to 10 (can be increased in the future) characters)
*/

$regex = '/([a-z0-9_.-]+)'. # name

'@'. # at

'([a-z0-9.-]+){2,255}'. # domain & possibly subdomains

'.'. # period

'([a-z]+){2,10}/i'; # domain extension 

if($email == '') { 
    return false;
}
else {
$eregi = preg_replace($regex, '', $email);
}

return empty($eregi) ? true : false;
} 
```

例如，“some@gmail”将显示为正确等，因此似乎 tld 发生了某事 - 有人能告诉我为什么吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:51:36.753

`.`表示任何字符。如果您实际上是指“点”，则应该转义它：`\.`

您的正则表达式还有其他一些问题：

*   正则表达式中不允许使用大写字母：`[a-zA-Z0-9]`
*   正则表达式中不允许使用 unicode 字符（例如带有 é、ç、... 等的电子邮件地址）
*   某些特殊字符，例如`+`实际上允许在电子邮件地址中使用的字符
*   ...

我会保持电子邮件验证**非常**简单。就像检查是否有 @ 礼物并且几乎保持它。因为如果你真的想验证一封电子邮件，正则表达式会变得很[可怕](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)。

检查[这个](https://stackoverflow.com/a/201378/540352)SO answer 以获得更详细的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:51:13.337

您用“句号”评论的内容：

```
'.'. # period 
```

实际上是任何字符的占位符。应该是`\.`。

然而，你把事情复杂化了。应该存在这样的验证来拒绝空字段或明显错误的内容（例如，将姓名放在电子邮件字段中）。所以根据我的经验，最好的检查就是看看它是否包含一个`@`并且不要太担心结构是否正确。实际上，您*可以编写一个正则表达式，它将忠实地验证任何有效的电子邮件地址并拒绝任何无效的电子邮件地址。*这是一个横跨文本屏幕的怪物。不要那样做。吻。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:52:38.383

我认为错误在这一行：

```
'.'. # period 
```

你的意思是一个字面上的时期。但是句点在正则表达式中具有特殊含义（它们的意思是“任何字符”）。

您需要使用反斜杠对其进行转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:53:50.160

[FILTER_VALIDATE_EMAIL](http://php.net/manual/en/filter.filters.validate.php)怎么样

# email - PHP 邮件中无法正确显示法语字符

> ID：12802692
> 
> 赞同：0
> 
> 时间：2012-10-09T14:48:49.870
> 
> 标签：email, utf-8, character-encoding, php

我有一个基本的 PHP 邮件表单，但无论我做什么，如果语言是用法语口音编写的，我似乎无法在发送后正确显示字符。

我使用的例句是：

> Bonjour, ceci est un message de test envoyé avec PHP pour 分析器 si oui ou non la mise en forme est Correcte ou fausse。Les personnages ne devraient être rendus de manière appropriée comme prévu dans le lexique français。

但结果如下：

> Bonjour, ceci est un message de test envoyé avec PHP pour 分析器 si oui ou non la mise en forme est Correcte ou fausse。Les personnages ne devraient Ãªtre rendus de maniÃ¨re appropriéée comme prévu dans le lexique français。

如您所见，带有重音符号的字符一旦在电子邮件中收到，就会被搞砸。

我正在处理我的消息变量：

```
$fieldenquiry = utf8_encode($_POST['fieldenquiry']); 
```

我是这样发送的：

```
$cc = "example@example.com";
$subject = "Website Enquiry";

$message = '<html><body>';
$message .= "<p><strong>Enquiry</strong><br />" . nl2br($fieldenquiry) . "</p>";
$message .= "</body></html>";

$headers = "From: " . $fieldemail . "\r\n";
$headers .= "Cc: " . $cc . "\r\n";
$headers .= "Reply-To: ". $fieldemail . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=UTF-8\r\n";

mail($to, $subject, $message, $headers); 
```

无论如何，我都不是 PHP 开发人员。该表格在发送等方面起作用，但我无法弄清楚为什么字符会混乱。我正在对 POST 变量进行编码，并且正在发送带有 UTF-8 字符集的 HTML 格式。

帮助和指导表示赞赏。

迈克尔。

**编辑：**

我想通了。请看下面我的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:28:12.237

我想知道是否有人需要类似的帮助：

我改变了这一行：

```
$fieldenquiry = utf8_encode($_POST['fieldenquiry']); 
```

对此：

```
$fieldenquiry = utf8_encode(htmlentities($_POST['fieldenquiry'], ENT_QUOTES, "UTF-8")); 
```

我使用 htmlentities() 函数和参数中指定的 UTF-8。

这完全解决了这个问题。希望它可以帮助某人。

# asp-classic - 如何连接href值

> ID：12802693
> 
> 赞同：1
> 
> 时间：2012-10-09T14:48:52.270
> 
> 标签：asp-classic

我有**asp 经典页面**，我需要在页面上显示具有某些值的链接。

这是链接，我需要将 strEmpcode 附加到地址。

strEmpcode = session("empcode")

```
 <td><li>
    <a href="http://192.1.1.1:85/reports.aspx?empcode= & strEmpcode"> Report</a>
 <td><li> 
```

所以点击它应该以这种形式传递地址：

```
http://192.1.1.1:85/reports.aspx?empcode=123 
```

**我需要在设计时（内联页面）而不是在运行时显示它。**

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T14:59:46.657

```
<a href='http://192.1.1.1:85/reports.aspx?empcode=<%=strEmpcode %>'> Report</a> 
```

只是将 strEmpcode 连接到 URL。现在从您的问题中不清楚该 var 在哪里获得值...

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-09T14:54:05.970

您可以直接在服务器端代码中连接

编辑：您仍然可以在 ASP 服务器端代码中构建连接字符串。

```
<%
   var mylink = "..." + "..."
 %>

<a href="<%=mylink %>" /> 
```

# bash - HP-UX - 如何在不解压缩的情况下从 tar 存档中读取文本文件？

> ID：12802695
> 
> 赞同：17
> 
> 时间：2012-10-09T14:49:01.913
> 
> 标签：bash, text, tar, cat, hp-ux

我有一个`tar`包含几个文本文件的存档。我想编写一个脚本来显示（stdout）文件的内容而不将其提取到当前目录。

其实我想做同样的事情：

```
tar tf myArchive.tar folder/someFile.txt
cat folder/someFile.txt
rm -R folder 
```

但没有`rm`...

我尝试过这种方式，但没有奏效：

```
tar tf myArchive.tar folder/someFile.txt | cat 
```

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-09T14:51:20.280

用于从存档文件`x`中提取。`f`然后还添加选项`-O`以将提取的文件定向到标准输出。

```
tar xf myArchive.tar folder/someFile.txt -O 
```

# html - Opera Mini 的单选按钮问题

> ID：12802696
> 
> 赞同：1
> 
> 时间：2012-10-09T14:49:02.567
> 
> 标签：html, css, cross-browser, radio-button, opera-mini

所以我有两个这样的单选按钮：

```
<input type="radio" name="hello" id="a" value="a">
<label for="a">First</label>
<input type="radio" name="hello" id="b" value="b">
<label for="b">Second</label> 
```

预期的功能是当我单击单选按钮标签上的任意位置时，该单选就会被选中。（我不必完全单击单选按钮的圆圈）

现在，我已经为单选按钮完成了自己的样式，所以我像这样隐藏单选圆圈：

```
input[type="radio"] {
display:none;
} 
```

现在，它似乎在所有浏览器上都运行良好，但在 Opera mini 中打开链接并且您无法切换选定的按钮，因为用于在单击*标签时*选择按钮的方法的标签不起作用。你必须点击圆圈本身，因为我已经隐藏了圆圈，单选按钮将不起作用。

如需演示，请从任何其他浏览器和 opera mini访问[此链接。](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_label)

知道什么可以使它在 Opera mini 上运行。`display:none`如果浏览器是 Opera mini ，有没有办法在 css 中指定不使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:44:36.190

我最终将单选按钮更改为`<input type="button"...>`。

`onClick`我为每个按钮调用 javascript 函数，并且在 css 中，每个状态都有两个不同的规则，它们是从 javascript 切换的。事实证明，这种 hack 比其他 hack 更有效、更可靠。它还确保不仅 Opera mini，该功能还可以在任何其他处理单选按钮标签标签的浏览器（如 Opera mini）上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T07:16:26.067

Opera mini 中有一个不错的 BUG，带有标签和 css

在我的CSS中

```
 label {
 cursor: pointer;
 } 
```

这会导致 Opera mini 刷新页面，每次您单击标签时都会向服务器发出 GET 请求，当您在 POST 页面上时，这会破坏流程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:39:51.710

您可以将此 javascript 添加到您的页面。

它适用于用户代理的字符串，但通常不是一个好主意。

它检查用户代理是否是 Opera Mini，然后将单选按钮设置`style.display`为`block`或`none`

```
if (window.addEventListener){           
    window.addEventListener('load', setRadioButtons, false);
} else {
    window.attachEvent('onload', setRadioButtons);
} 

function setRadioButtons() {
    for (i=0; i<document.getElementsByTagName('input').length; i++) {
        if (document.getElementsByTagName('input')[i].type == 'radio' && navigator.userAgent.indexOf("Opera Mini") != -1)
            document.getElementsByTagName('input')[i].style.display = "block";
        else
            document.getElementsByTagName('input')[i].style.display = "none";   
    }
} 
```

# spring - 春天MVC | java.lang.ClassNotFoundException：org.springframework.web.context.ContextLoaderListener

> ID：12802702
> 
> 赞同：2
> 
> 时间：2012-10-09T14:49:28.640
> 
> 标签：spring, spring-mvc

你好！尽管我在论坛上发现了非常相似的问题，但没有一个符合我的要求。

我正在使用 Tomcat 7 来部署我的 spring 应用程序。但是，我面临：

> > 'java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener' 错误，java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java :1714) 在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559) 在 org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532) 在 org.apache.catalina.core。 DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514) at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4727) at org .apache.catalina。core.StandardContext.startInternal(StandardContext.java:5285) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) 在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618) 在 org.apache.catalina.startup.HostConfig.deployDirectory (HostConfig.java:1100) 在 org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1618) 在 java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) 在 java。 util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) 在 java.util.concurrent.FutureTask.run(FutureTask.java:166) 在 java.util。concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)
> 
> 2012 年 10 月 9 日晚上 7:37:32 org.apache.catalina.core.StandardContext listenerStart 严重：由于先前的错误而跳过安装应用程序侦听器 2012 年 10 月 9 日晚上 8:00:48 org.apache.catalina.core .ApplicationContext 日志

我已经验证 org.springframework.web-3.1.2.RELEASE.jar 存在于 WEB-INF\ \lib\ 文件夹中，并且所需的文件存在于其中。请注意，我没有使用任何构建工具来部署这个网络应用程序，如 maven。

我试图清理并重新安装应用程序，重新启动 Tomcat，但没有任何运气。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:39:52.100

值得验证您是否在类路径中有项目结构和所需的 jar。如果需要设置，您可以使用[此帮助。](http://www.deepakgaikwad.net/index.php/2009/03/31/spring-mvc-tutorial-concepts-and-code-examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:13:29.640

在`WEB-INF\ \lib\`哪里？在工件中，还是在项目中？如果它在项目中，则并不意味着它在类路径中，如果您使用的是 eclipse 并且没有通过 eclipse - tomcat 设置编辑输出类路径，那么您应该确保 .jar 文件位于： `..\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\YourApp\WEB-INF\lib`

这是 eclipse 制作工件并从那里部署它的默认位置。因此，请确保您在 Eclipse 构建路径配置中包含了 jar 文件。第一次添加新 jar 或与类路径相关的内容时，请执行以下操作：右键单击 tomcat（在 eclipse 中）然后从菜单中发布，通过这种方式 eclipse 更新整个工件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T14:00:08.233

如果您确定所有 jar 文件在您的 lib 目录中都可用，请尝试清理 tomcat 工作目录。从 Eclipse（服务器视图）中，右键单击 Tomcat 服务器，然后单击菜单“清理 Tomcat 工作目录”。

# multithreading - 使用实时捕获的数据包信息更新 JList（使用 jNetPcap）导致列表空白

> ID：12802707
> 
> 赞同：1
> 
> 时间：2012-10-09T14:49:49.867
> 
> 标签：multithreading, jlist, jnetpcap

我正在编写应用程序，该应用程序在特定线程中同时从 2 个 NI 卡中捕获数据包。

我正在使用 jnetPcap 并且我在 jpackethanler 的方法 nextPacket 中获取捕获的数据包我需要在 JList 中显示来自当前数据包的信息但是当我简单地使用 defaultListModel 并且我编写 model1.addElement(packetinfo) 然后 JList 随机进入空白。

我的代码：

```
new Thread(){

    @Override
    public void run(){

    StringBuilder errbuf = new StringBuilder(); // For any error msgs

    int snaplen = 64 * 1024;           // Capture all packets, no trucation  
    int flags = Pcap.MODE_PROMISCUOUS; // capture all packets  
    int timeout = 10 * 1000;           // 10 seconds in millis

    Pcap pcap1 =  
        Pcap.openLive(Variables.getDevice1().getName(), snaplen, flags, timeout, errbuf);  

    if (pcap1 == null) {  
        System.err.printf("Error while opening device for capture: "  
            + errbuf.toString());  
        return;  
    }

    PcapPacketHandler<String> jpacketHandler1 = new PcapPacketHandler<String>() {  

        int count = 1;

        @Override
        public void nextPacket(PcapPacket packet, String user) {  

            // ALL PACKETS FROM DEVICE 1 HERE
            int packetSize = packet.size();
            int packetCount = count++;

            String desc = String.format("No.: %15d | HDRSize : %-4d", packetCount,packetSize);

            device1Model.addElement(desc); // this adds desc to JLIST

        }
    };  

    pcap1.loop(Pcap.LOOP_INFINITE, jpacketHandler1, "");
    pcap1.close();

    }
}.start(); 
```

做什么改变更顺畅，同时不会有数据包丢失。因为我需要为应用程序的正确功能捕获每个数据包。

谢谢你。

# jquery - jQuery在这种情况下如何防止表单提交

> ID：12802708
> 
> 赞同：0
> 
> 时间：2012-10-09T14:49:49.733
> 
> 标签：jquery, jquery-validation-engine

我有这张图片上传表格，我在“更改”上检查文件类型和文件大小。

如果文件超过一定大小或不是图像，它会提醒用户。我遇到的问题是，在这种情况下如何防止提交表单。如果我要单击文件提交的上传按钮。实际上它不应该直到文件是一定的大小和类型。

你能帮我设置一下吗？我试过了，但我就是不知道在哪里做什么。

```
<form enctype="multipart/form-data" method="">
        <input type="file" name="file" class="file"><br>
        <input type="submit" value="Upload File to Server">
    </form> 
```

脚本（这是使用 jquery 表单插件完成的）

```
<script>
$(document).ready(function() {

$(':file').change(function(){
            var file = this.files[0];
            name = file.name;
            size = file.size;
            type = file.type;

            if(file.name.length < 1) {

            }
            else if(file.size > 1000000) {
                alert("File is to big");
            }
            else if(file.type != 'image/png' && file.type != 'image/jpg' && !file.type != 'image/gif' && file.type != 'image/jpeg' ) {
                alert("File doesnt match png, jpg or gif");
            }
            else { 

            $(':submit').click(function(){
                var bar = $('.bar');
                var percent = $('.percent');
                var status = $('#status');

                $('form').ajaxForm({
                    url:"upload_file.php",
                    type:"post",
                    dataType:"json",
                    target:"#status",

                    beforeSend: function() {
                        status.empty();
                        var percentVal = '0%';
                        bar.width(percentVal)
                        percent.html(percentVal);
                    },
                    uploadProgress: function(event, position, total, percentComplete) {
                        var percentVal = percentComplete + '%';
                        bar.width(percentVal)
                        percent.html(percentVal);
                    },
                    complete: function(xhr) {
                        status.html(xhr.responseText);
                        $("#status").html("HIIII Gais");

                    }
                });

                });
}
});             
    });       
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:03:20.713

您可以在两个函数之外设置一个变量，如果它有效，则将其设置为 true。如果有效，则发送请求，否则阻止默认值。

```
$(document).ready(function() {

    var isValid = false;

    $(':file').change(function() {

        isValid = false;

        var file = this.files[0];
        name = file.name;
        size = file.size;
        type = file.type;

        if (file.name.length < 1) {

        } else if (file.size > 1000000) {
            alert("File is to big");
        } else if (file.type != 'image/png' && file.type != 'image/jpg' && !file.type != 'image/gif' && file.type != 'image/jpeg') {
            alert("File doesnt match png, jpg or gif");
        } else {
            isValid = true;

        }
    });

    $(':submit').click(function(e) {
        if (!isValid) {
            e.preventDefault();
        }
        else {
            var bar = $('.bar');
            var percent = $('.percent');
            var status = $('#status');

            $('form').ajaxForm({
                url: "upload_file.php",
                type: "post",
                dataType: "json",
                target: "#status",

                beforeSend: function() {
                    status.empty();
                    var percentVal = '0%';
                    bar.width(percentVal)
                    percent.html(percentVal);
                },
                uploadProgress: function(event, position, total, percentComplete) {
                    var percentVal = percentComplete + '%';
                    bar.width(percentVal)
                    percent.html(percentVal);
                },
                complete: function(xhr) {
                    status.html(xhr.responseText);
                    $("#status").html("HIIII Gais");

                }
            });
        }

    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:58:48.323

您不能从使用 javascript 的文件输入元素中获得更多的文件名。您需要在服务器端进行文件大小、mime 类型等检查。

# objective-c - 防止 AlertView 被解雇

> ID：12802709
> 
> 赞同：3
> 
> 时间：2012-10-09T14:49:52.830
> 
> 标签：objective-c, ios, uialertview

任何人都可以帮助我防止在其按钮单击事件上解除警报视图吗？

我有一个 textview 作为我的 alertView 的子视图，如果 textview 的值为 nil，我不想关闭它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-29T07:11:51.227

由于这是一个非常古老的问题，但我得到了一个解决方案，并且如果在不久的将来有任何其他开发人员需要，我会发布。

在 .h 文件中实现协议方法

为了响应 UIAlertView 中的按钮点击，我们将使用 –alertView:clickedButtonAtIndex: 协议方法作为

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

}
//Now below code will check if uitextfield value.
- (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView
{
    NSString *inputText = [[alertView textFieldAtIndex:0] text];
    if( [inputText length] > 0)
    {
       //text field value is greater than zero ,then Done button will appear as blue,or else it will be blurred
        return YES;
    }
    else
    {
        return NO;
    }
} 
```

* * *

或者，有一种更快的方法：

```
return [inputText length] ? YES : NO; 
```

The 和 the 做同样的事情`if statement`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T14:58:16.420

这可能违反了不关闭 UIAlertView 的 HIG 指南。

**解决方法：**我不知道您的应用程序中发生了什么，但要实现这一点，您可以做的是关闭 AlertView，然后检查是否设置了 textView 的文本。如果设置为 nil，则再次调出 alertview！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:07:02.423

我不确定你能不能。

```
- (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView 
```

是回调上唯一可用的选项。而且至少还有一个活动按钮。

如果您确实需要该特定行为，请尝试重新实现您自己的 UIAlertView

# data-distribution-service - OpenSplice DDS 开源实现支持——数据库事务处理？

> ID：12802712
> 
> 赞同：0
> 
> 时间：2012-10-09T14:49:53.283
> 
> 标签：data-distribution-service

我想将 OpenSplice DDS 用于“消息传递”和“数据库事务处理”功能。

您能否帮助了解 OpenSplice DDS 开源实现是否支持 - “数据库事务处理”？

任何人都可以分享 OpenSplice DDS 的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:28:56.997

OpenSplice DDS 社区版（“开源”版本）不具备与 DBMS 的任何开箱即用的集成。它的商业版本确实提供了一个名为 DBMSConnect 的可选服务，它可能会满足您的需求。您没有详细描述您要达到的目标，因此很难评估。

据我所知，DBMSConnect 上没有可用的在线文档供您检查它是否能满足您的需求。但是，RTI 的 DDS 实施具有类似的功能，也仅在商业上可用，称为实时连接。完整的文档可通过[Real-Time Connect 用户手册](http://community.rti.com/rti-doc/500/RTI_Real-Time_Connect_5.0.0/docs/RTI_RTC_UsersManual.pdf)在线获得。[在他们的社区门户文档](http://community.rti.com/content/page/documentation)页面上有更多关于 Real-Time Connect 的链接。这可能有助于您评估它是否满足您的需求。

# php - Xcode 不读取 php

> ID：12802721
> 
> 赞同：-2
> 
> 时间：2012-10-09T14:50:21.900
> 
> 标签：php, xcode

嗨，我想知道您是否有一个 webview 显示其中包含 php 的 url，如果您必须对其进行配置以读取 php，因为它不读取它，它只显示 php 代码。以下是当我尝试显示 Web 视图时它发回给我的内容。

```
<?php

$firstName = $_POST["firstName"]; 
$lastName = $_POST["lastName"];
$dormName = $_POST["dormRoom"];
$roomNumber = $_POST["roomNumber"];
$pizzaType = $_POST["PizzaType"];

$fp = fopen($firstName . "_" . $lastName . ".txt", "a"); // the 'a' will append to the end of the file.

fwrite($fp, "First Name: $firstName");
fwrite($fp, "Last Name: $lastName");
fwrite($fp, "Dorm Name: $dormName");
fwrite($fp, "Room Number: $roomNumber");
fwrite($fp, "Pizza Type: $pizzaType");
fclose($fp);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:21:04.710

iOS 设备上没有运行 PHP 服务器。您将无法在应用程序中运行 PHP 代码。你必须用 Objective-C 来编写它，这是 iOS 应用程序的编程语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:24:22.350

PHP 由 PHP 服务器解释。UIWebView 基本上是一个浏览器，这意味着它是客户端的。UIWebView 只能呈现 HTML 并执行像 javascript 这样的客户端代码。

由于 PHP 是在服务器端执行的，因此您需要将 php 代码托管在远程 php 服务器上，然后将 http 请求定向到该服务器以执行代码并将结果返回给浏览器或直接返回 http 请求。

# javascript - 如何检查两个日期是否不在同一日历日

> ID：12802722
> 
> 赞同：34
> 
> 时间：2012-10-09T14:50:21.817
> 
> 标签：javascript, date

如何检查两个日期是否不在同一天。我想出了这个解决方案，但也许有更好的方法来做到这一点：

```
 var actualDate = new Date();
 var isNotToday = dateToCheck.getDay() !== actualDate.getDay() || dateToCheck < actualDate - 24 * 60 * 60 * 1000; 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2014-06-05T07:18:49.073

另一种选择是使用`.toDateString()`函数将两个日期解析为字符串。该函数将输出格式设置为：“Wed Jul 28 1993”。然后您可以比较两个日期字符串。

```
actualDate.toDateString() === dateToCheck.toDateString()
// returns true if actualDate is same day as dateToCheck 
```

这是一个Plunker：

[http://plnkr.co/edit/J5Dyn78TdDUzX82T0ypA](http://plnkr.co/edit/J5Dyn78TdDUzX82T0ypA)

更多来自 MDN：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toDateString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toDateString)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-09T14:53:22.067

如何检查同一天，同一月和同一年：

```
var isSameDay = (dateToCheck.getDate() == actualDate.getDate() 
        && dateToCheck.getMonth() == actualDate.getMonth()
        && dateToCheck.getFullYear() == actualDate.getFullYear()) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-09T14:52:33.320

检查日、月和年是最安全的：

```
var isNotToday = dateToCheck.getDate() != actualDate.getDate()
      || dateToCheck.getMonth() != actualDate.getMonth()
      || dateToCheck.getFullYear() != actualDate.getFullYear(); 
```

这将确保您在涉及 DST 和闰年时不会感到奇怪，否则可能会干扰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-09T16:29:14.240

```
function getStartOfDay(aDate){
    //returns the very beginning of the same day
    return new Date(aDate.getTime() - aDate.getTime() % 86400000);
}

var aDate1 = getStartOfDay(new Date());
var aDate2 = getStartOfDay(new Date(1981, 7, 3));

var result = aDate1.getTime() === aDate2.getTime(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:54:28.603

不要创建带有时间的日期对象，以便它们都在午夜生成。然后只需检查纪元时间。

```
new Date('11/12/2012').getTime() === new Date('11/11/2012').getTime()
> false
new Date('11/12/2012').getTime() === new Date('11/12/2012').getTime()
> true
new Date('November 12, 2012').getTime() === new Date('11/12/2012').getTime()
> true
new Date('12 November, 2012').getTime() === new Date('11/12/2012').getTime()
> true 
```

日期只需要`Date`对象可解析（我在 chrome 23.0.1271.17（官方版本 159779）测试版上），如果你不通过时间，它们会在午夜生成。

如果您有时间，只需将其放在地板上并在午夜进行测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-13T04:37:59.747

```
function isEqual(startDate, endDate) {
    return endDate.valueOf() == startDate.valueOf();
}

var now =new Date();
var startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
var endDate = new Date(2017, 0, 13)

var result = isEqual(startDate , endDate);
console.log(result);
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-13T04:52:36.767

对以下实例使用`startOf`方法`Date`：

```
dateA.startOf('day').getTime() === dateB.startOf('day').getTime() 
```

这是方法：

```
Date.prototype.startOf = function(unit) {
    var clone = new Date(this.getTime()), day;
    /* */if (unit === 'second') clone.setMilliseconds(0);
    else if (unit === 'minute') clone.setSeconds(0,0);
    else if (unit === 'hour'  ) clone.setMinutes(0,0,0);
    else {
        clone.setHours(0,0,0,0);
        if (unit === 'week') {
            day = clone.getDay();
            clone = day ? new Date(clone - 1000 * 60 * 60 * 24 * day) : clone;
        }
        else if (unit === 'month') clone.setDate(1);
        else if (unit === 'year' ) clone.setMonth(0,1);
    }
    return clone;
}; 
```

# c++ - 在 Windows 中编译 R 源时“comm：文件 1 未按排序顺序”

> ID：12802723
> 
> 赞同：0
> 
> 时间：2012-10-09T14:50:26.543
> 
> 标签：c++, windows, r

在 Windows 7 中编译 R 源代码 2.15.1 时，出现以下错误。

> comm：文件 1 未排序
> 
> make[3]: *** [R.dll] 错误 1
> 
> make[2]: *** [../../bin/i386/R.dll] 错误 2
> 
> 制作[1]：*** [rbuild]
> 
> 错误 2 make: *** [全部] 错误 2

基本上我在使用“全部推荐”编译源代码之前安装了 Rtools 2.15.1。我必须安装任何其他软件吗？我尝试了其他操作系统，例如 windows 7、windows 2008、XP，结果是一致的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:12:03.467

令我惊讶的是，R 源代码 2.15.1 对于 Windows 构建并不完整。当我下载[补丁版本](http://cran.r-project.org/bin/windows/base/rpatched.html)时，我能够毫无问题地编译所有内容。

# .net - NHibernate LinqProvider / IQueryable：在 Where 子句中是否支持 FirstOrDefault()？

> ID：12802725
> 
> 赞同：0
> 
> 时间：2012-10-09T14:50:29.700
> 
> 标签：.net, linq, nhibernate, orm, fluent-nhibernate

给定两个类似的类

```
public class Blog
{
    public virtual int BlogId { get; set; }
    public virtual IList<Comment> Comments { get; set; }
}

public class Comment
{
    public virtual int CommentId { get; set; }
    public virtual Blog Blog { get; set; }
    public string Title { get; set; }
} 
```

我很难使用以下语句：

```
session.Query<Blog>.Where(b => b.Comments.FirstOrDefault().Title.Contains("my title"))); 
```

抛出的错误是：

> Antlr.Runtime.NoViableAltException

使用 .Any() 作品：

```
session.Query<Blog>.Where(b => b.Comments.Any(c => c.Title.Contains("my title"))); 
```

然而，这不是我想要的。实际上，这不是关于博客和评论，而是关于版本化实体。在它们的父实体的映射中，我按它们的版本号对它们的集合进行排序。我需要能够访问第一个条目才能获得最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:16:11.383

为什么不在 db 中预过滤并使用 linq to objects 最终过滤呢？

```
var results = session.Query<Blog>()
    .Where(b => b.Comments.Any(c => c.Title.Contains("my title")))
    .AsEnumerable()
    .Where(b => b.Comments[0].Title.Contains("my title")))
    .ToList(); 
```

或者如果列表位置在评论中（这不漂亮）

```
Map(x => x.Position, "listindexcolumn").ReadOnly();

var results = session.Query<Blog>()
    .Where(b => b.Comments.Any(c => c.Position == 0 && c.Title.Contains("my title")))
    .ToList(); 
```

或使用仅查询属性

```
Map(x => this.Position, "listindexcolumn").ReadOnly().Access.None();

var results = session.CreateCriteria<Blog>()
    .CreateCriteria("Comments")
        .Add(Restriction.Eq("Position", 0) && Restriction.Like("Title", "my title"))
    .ToList<Blog>(); 
```

# redis - 如何列出所有 Redis 数据库？

> ID：12802726
> 
> 赞同：237
> 
> 时间：2012-10-09T14:50:34.547
> 
> 标签：redis

我运行了这个命令来访问我的`redis`服务器。

```
telnet 127.0.0.1 6379 
```

显示我所有数据库的命令是什么？

* * *

## 回答 #1

> 赞同：432
> 
> 时间：2012-10-09T17:35:52.443

没有命令可以执行此操作（例如，您将使用 MySQL 执行此操作）。Redis 数据库的数量是固定的，并在配置文件中设置。默认情况下，您有 16 个数据库。每个数据库都由一个数字（不是名称）标识。

您可以使用以下命令来了解数据库的数量：

```
CONFIG GET databases
1) "databases"
2) "16" 
```

您可以使用以下命令列出为其定义了一些键的数据库：

```
INFO keyspace
# Keyspace
db0:keys=10,expires=0
db1:keys=1,expires=0
db3:keys=1,expires=0 
```

请注意，您应该使用“redis-cli”客户端来运行这些命令，而不是 telnet。如果要使用 telnet，则需要运行这些使用 Redis 协议格式化的命令。

例如：

```
*2
$4
INFO
$8
keyspace

$79
# Keyspace
db0:keys=10,expires=0
db1:keys=1,expires=0
db3:keys=1,expires=0 
```

你可以在这里找到 Redis 协议的描述： [http ://redis.io/topics/protocol](http://redis.io/topics/protocol)

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-11-15T14:06:47.990

或者您可以只运行以下命令，您将看到 Redis 实例的所有数据库而无需*启动* `redis-cli`：

```
$ redis-cli INFO | grep ^db
db0:keys=1500,expires=2
db1:keys=200000,expires=1
db2:keys=350003,expires=1 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2019-11-30T12:00:13.590

您可以使用`redis-cli INFO keyspace`

```
localhost:8000> INFO keyspace
# Keyspace
db0:keys=7,expires=0,avg_ttl=0
db1:keys=1,expires=0,avg_ttl=0
db2:keys=1,expires=0,avg_ttl=0
db11:keys=1,expires=0,avg_ttl=0 
```

# iphone - 如何从 iOS 移动应用程序访问 ABAP Web Dynpro 组件

> ID：12802730
> 
> 赞同：2
> 
> 时间：2012-10-09T14:50:44.563
> 
> 标签：iphone, ipad, ios5, abap, webdynpro

大部分业务逻辑是使用服务器端的 ABAP Web Dynpro 组件编写的，当前使用 iViews for a SAP Portal 访问这些组件。

有没有办法从 iOS 移动应用程序（iPhone/iPad）访问这些 Web Dynpro 组件以利用现有的业务逻辑服务器端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:13:36.873

Web Dynpros 不是为在移动环境中使用而设计的。Web Dynpro 在传输和本地处理方面占用的空间相对较大——对于移动环境来说并不理想。此外，UI 针对鼠标和键盘的使用（例如小按钮）进行了优化，而不是触摸界面。

如果您已经将用户界面与业务逻辑分离（正如您应该这样做的那样），那么在业务逻辑之上添加另一个 UI 层应该相对简单。请注意，您可能必须重新考虑 UI 组合，因为当您将固定 PC 或笔记本电脑换成移动设备时，人们使用数据和功能的方式会发生巨大变化。

# c# - 双属性不会被序列化为 XML

> ID：12802734
> 
> 赞同：1
> 
> 时间：2012-10-09T14:50:54.850
> 
> 标签：c#, .net, xml, xml-serialization, double

我们将一个对象序列化为 xml：

```
 public class Test: INotifyPropertyChanged
   {
       public virtual string Name {get; set;}
       public virtual double TestScore {get; set;}
   } 
```

使用以下方法：

```
public static XElement ToXElement<T>(this object obj)
{
    using (var memoryStream = new MemoryStream())
    {
        using (TextWriter streamWriter = new StreamWriter(memoryStream))
        {
            var xmlSerializer = new XmlSerializer(typeof(T));
            xmlSerializer.Serialize(streamWriter, obj);
            return XElement.Parse(Encoding.UTF8.GetString(memoryStream.ToArray()));
        }
    }
} 
```

在以下上下文中（代码在 x64 上下文中运行，从 C++ 库中调用 .net 库）：

```
XDocument rootElement = ...

Test test = new Test();
test.Name = "xxx";
test.TestScore= 1.0d;
rootElement.Add(test.ToXElement()); 
```

所有类型的属性（string、bool、long、int、ushort 等）都被序列化，除了 double 属性。一旦它们手动转换为其他东西（不是双重），它们就会被序列化。

XML 看起来像这样：

```
<Root>
  <Test>
    <Name>xxx</Name>
  </Test>
</Root> 
```

双重属性没有序列化有什么原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T07:51:01.670

要定义序列化的精确程度，您应该手动进行。

```
[XmlIgnore]
public double Price { get;set; }

[XmlElement("Price")]
public string PriceString {
    get {return Price.ToString();}
    set {Price = double.Parse(value);}
} 
```

来自[http://bytes.com/topic/c-sharp/answers/768555-serializable-double-precision](http://bytes.com/topic/c-sharp/answers/768555-serializable-double-precision)

# android - touch html 5画布麻烦

> ID：12802735
> 
> 赞同：3
> 
> 时间：2012-10-09T14:50:56.077
> 
> 标签：android, webview, html5-canvas, titanium-mobile

我有一个在 webview（钛移动）中使用的画布元素，我遇到了简单事件处理程序的问题。当我触摸画布开始画线时，线会在大约 1 秒后跳到画布的中心点，然后可以正常工作。如果我按住触摸大约 1 秒。然后画出来效果很好...？我很困惑，谁能帮我解决这个问题。这是我正在使用的代码，我在网上找到了这个资源并对其进行了修改。

```
// Keep everything in anonymous function, called on window load.
if(window.addEventListener) {
window.addEventListener('load', function () {
var canvas, context, canvaso, contexto;

// The active tool instance.
var tool;

var tool_default = 'bluepen';

function init () {
// Find the canvas element.
canvaso = document.getElementById('markup');
if (!canvaso) {
  alert('Error: I cannot find the canvas element!');
  return;
}

if (!canvaso.getContext) {
  alert('Error: no canvas.getContext!');
  return;
}

// Get the 2D canvas context.
contexto = canvaso.getContext('2d');
if (!contexto) {
  alert('Error: failed to getContext!');
  return;
}

// Add the temporary canvas.
var container = canvaso.parentNode;
canvas = document.createElement('canvas');
if (!canvas) {
  alert('Error: I cannot create a new canvas element!');
  return;
}

canvas.id     = 'markupTemp';
canvas.width  = canvaso.width;
canvas.height = canvaso.height;
canvas.display = 'none';
container.appendChild(canvas);

context = canvas.getContext('2d');

// Get the tool select input.
var tool_select = document.getElementById('dtool');
if (!tool_select) {
  alert('Error: failed to get the dtool element!');
  return;
}
tool_select.addEventListener('change', ev_tool_change, false);

// Activate the default tool.
if (tools[tool_default]) {
  tool = new tools[tool_default]();
  tool_select.value = tool_default;
}

// Attach the mousedown, mousemove and mouseup event listeners.
  canvas.addEventListener('mousedown', ev_canvas, false);
  canvas.addEventListener('mousemove', ev_canvas, false);
  canvas.addEventListener('mouseup',   ev_canvas, false);
canvas.addEventListener( 'touchstart', ev_canvas, false);
canvas.addEventListener( 'touchmove', ev_canvas, false);
canvas.addEventListener( 'touchend', ev_canvas, false);
  }

function settool(t){

tool = this;

};

  // The general-purpose event handler. This function just determines the mouse 
  // position relative to the canvas element.
  function ev_canvas (ev) {
  ev.preventDefault();

  ev._x = ev.layerX;
  ev._y = ev.layerY;

// Call the event handler of the tool.
 var func = tool[ev.type];
 if (func) {
  func(ev);
 }
 }

  // The event handler for any changes made to the tool selector.
  function ev_tool_change (ev) {
 if (tools[this.value]) {
  tool = new tools[this.value]();
 }
 }

 // This function draws the #imageTemp canvas on top of #markup, after which 
 // #imageTemp is cleared. This function is called each time when the user 
 // completes a drawing operation.
 function img_update () {
    contexto.drawImage(canvas, 0, 0);
    context.clearRect(0, 0, canvas.width, canvas.height);
 }

 // This object holds the implementation of each drawing tool.
 var tools = {};

  // The drawing pencil.
 tools.bluepen = function () {
 var tool = this;
this.started = false;

// This is called when you start holding down the mouse button.
// This starts the pencil drawing.
this.mousedown = function (ev) {
    ev.preventDefault();
    context.beginPath();
    context.moveTo(ev._x, ev._y);
    tool.started = true;
};

// This function is called every time you move the mouse. Obviously, it only 
// draws if the tool.started state is set to true (when you are holding down 
// the mouse button).
this.mousemove = function (ev) {
  if (tool.started) {
      ev.preventDefault();
    context.lineTo(ev._x, ev._y);
        context.lineJoin = "round";
    context.lineWidth = 1;
    context.strokeStyle = '#2e3092';
    context.stroke();
     }
};

// This is called when you release the mouse button.
this.mouseup = function (ev) {
  if (tool.started) {
      ev.preventDefault();
    tool.mousemove(ev);
    tool.started = false;
    img_update();
  }
};

};

 // The red Pen.
tools.redpen = function () {
var tool = this;
this.started = false;

// This is called when you start holding down the mouse button.
// This starts the pencil drawing.
this.mousedown = function (ev) {
    context.beginPath();
    context.moveTo(ev._x, ev._y);
    tool.started = true;
};

// This function is called every time you move the mouse. Obviously, it only 
// draws if the tool.started state is set to true (when you are holding down 
// the mouse button).
this.mousemove = function (ev) {
  if (tool.started) {
    context.lineTo(ev._x, ev._y);
       context.lineJoin = "round";
    context.lineWidth = 1;
    context.strokeStyle = '#ed1c24';
    context.stroke();
  }
};

// This is called when you release the mouse button.
this.mouseup = function (ev) {
  if (tool.started) {
    tool.mousemove(ev);
    tool.started = false;
    img_update();
  }
};
};

// The Highlighter
tools.highlighter = function () {
var tool = this;
this.started = false;

// This is called when you start holding down the mouse button.
// This starts the pencil drawing.
this.mousedown = function (ev) {
    context.beginPath();
    context.moveTo(ev._x, ev._y);
    tool.started = true;
};

// This function is called every time you move the mouse. Obviously, it only 
// draws if the tool.started state is set to true (when you are holding down 
// the mouse button).
this.mousemove = function (ev) {
  if (tool.started) {
    context.lineTo(ev._x, ev._y);
    context.lineJoin = "round";
    context.lineWidth = 20;
    context.strokeStyle = '#f9e100';
    context.stroke();

  }
};

// This is called when you release the mouse button.
this.mouseup = function (ev) {
  if (tool.started) {
    tool.mousemove(ev);
    tool.started = false;
    img_update();
  }
};
};

// The Eraser
tools.eraser = function () {
var tool = this;
this.started = false;

// This is called when you start holding down the mouse button.
// This starts the pencil drawing.
this.mousedown = function (ev) {
    context.beginPath();
    context.moveTo(ev._x, ev._y);
    tool.started = true;
};

// This function is called every time you move the mouse. Obviously, it only 
// draws if the tool.started state is set to true (when you are holding down 
// the mouse button).
this.mousemove = function (ev) {
  if (tool.started) {
    context.lineTo(ev._x, ev._y);
    context.lineJoin = "round";
    context.lineWidth = 40;
    context.strokeStyle = '#fff';

    context.stroke();

  }
  };

  // This is called when you release the mouse button.
  this.mouseup = function (ev) {
  if (tool.started) {
    tool.mousemove(ev);
    tool.started = false;
    img_update();
  }
 };
 }; 

init();

}, false); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:18:32.983

我在 Acer ICS 平板电脑上的普通 Android 浏览器上遇到了这个确切的问题（事实上，我就是这样找到你的问题的）。我无法在 iPad 上的 Safari 和 Gingerbread 手机的股票浏览器上复制该问题。我不知道这是浏览器错误还是什么，但我设法找到了一个可能对您有所帮助的解决方法。

```
var tool;
var touchflag = false;  //Add this property
...
...
function ev_canvas (ev) {
    ev.preventDefault();

    //Two new lines here
    if (ev.type == 'touchstart') this.touchflag = true;
    if (ev.type == 'touchend') this.touchflag = false;

    ev._x = ev.layerX;
    ev._y = ev.layerY;
    ...
 }

 ...
 ...
 this.mousemove = function (ev) {
     // if (tool.started) { //Change this
     if (tool.started && !touchflag) { // to this
        ev.preventDefault();
        context.lineTo(ev._x, ev._y);
     ...
     }
 }; 
```

它很笨拙，笨拙且不雅，但它对我有用。希望它可以帮助你。

# javascript - 取消选择具有多个和 optgroup 的选择菜单中的选定选项

> ID：12802739
> 
> 赞同：36
> 
> 时间：2012-10-09T14:51:11.113
> 
> 标签：javascript

我希望能够通过单击链接来取消选择具有多个选择启用和选项组的选择菜单中的所有预选选项。

以下是菜单示例：

```
<select name="ddBusinessCategory" id="ddBusinessCategory" class="f1" style="width:280px;height:200px" multiple="multiple">
<option value="">Select One</option>
<optgroup label="Abrasives" style="background:#F5F5F5;border-bottom:1px #EEE solid">
<option value="4" selected="selected">Abrasives</option>
</optgroup>
<optgroup label="Abstracters" style="background:#F5F5F5;border-bottom:1px #EEE solid">
<option value="5">Abstracters</option>
</optgroup>
<optgroup label="Abuse Information &amp; Treatment Centers" style="background:#F5F5F5;border-bottom:1px #EEE solid">
<option value="6" selected="selected">Abuse Information &amp; Treatment Centers</option>
</optgroup>
<optgroup label="Accountants" style="background:#F5F5F5;border-bottom:1px #EEE solid">
<option value="7">Accountants</option>
<option value="2672">Certified Public Accountants - </option>
<option value="2673">Public Accountants - </option>
</optgroup>
<optgroup label="Accounting Services" style="background:#F5F5F5;border-bottom:1px #EEE solid">
<option value="8">Accounting Services</option>
</optgroup>
<optgroup label="Acoustical Materials - Wholesale &amp; Manufacturers" style="background:#F5F5F5;border-bottom:1px #EEE solid">
<option value="9">Acoustical Materials - Wholesale &amp; Manufacturers</option>
</optgroup>
</select> 
```

您将看到两个被选中。我希望能够取消选择这些预选的。

不想用jquery，只想用javascript

非常感谢你的协助。

新杰克

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-09T15:02:01.270

以下函数应遍历所有选项并取消选择它们。

**HTML**

```
<a href="#" onclick="clearSelected();">clear</a> 
```

**JAVASCRIPT**

```
 function clearSelected(){
    var elements = document.getElementById("ddBusinessCategory").options;

    for(var i = 0; i < elements.length; i++){
      elements[i].selected = false;
    }
  } 
```

**编辑**：

我不赞成将事件处理程序直接放在元素上。如果您可以选择，请为元素提供某种类型的 id/name 并在您的 JavaScript 代码中绑定事件处理程序。

**[例子](http://jsfiddle.net/3ZWPA/1/)**

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-07-03T20:57:51.923

使用起来会不会更简单？：

```
document.getElementById("ddBusinessCategory").value = ""; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-02-11T00:39:02.797

你不需要任何循环。selectedIndex 属性“[设置或返回集合中选定元素的索引`<option>`（从 0 开始）](http://www.w3schools.com/jsref/coll_select_options.asp) ”。
索引从 0 开始，因此如果将其设置为 -1，则不会选择任何索引。（设置为 0 将使第一个选项处于选中状态。）

```
function clearSelected(w){
  document.getElementById(w).selectedIndex = -1;
}
<a href="#" onclick="clearSelected('ddBusinessCategory');">clear</a> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-02-05T08:21:43.057

您可以使用 javascript 属性“selectedOptions”简化 Chase 中的代码

**HTML**

```
<a href="#" onclick="clearSelected();">clear</a> 
```

**JAVASCRIPT**

```
function clearSelected(){
    var elements = document.getElementById("ddBusinessCategory").selectedOptions;

    for(var i = 0; i < elements.length; i++){
      elements[i].selected = false;
    }
  } 
```

在这种情况下，您使用已选择的选项而不是所有选项进行循环。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-02T13:18:32.800

如果您使用的是 jquery，您可以这样做（我知道提出这个问题的人期待 js 的回答，但这可能对某人有所帮助）

```
$('#someid').find($('option')).attr('selected',false) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-09T15:19:09.247

如果你不关心< IE8：

```
var checkedElements = document.querySelectorAll("#ddBusinessCategory :checked");

​for(var i = 0, length = checkedElements.length; i < length; i++) {
    checkedElements[i].selected = false;
}​ 
```

如果你不关心<IE9

```
Array.prototype.forEach.call(document.querySelectorAll("#ddBusinessCategory :checked"), function(el) { el.selected = false }); 
```

如果您想支持 IE7、IE6、FF3 及更早版本或觉得它更易于阅读，请使用 Chase 的答案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-21T00:23:53.267

如果您只想遍历选定的选项，我建议使用 while 循环。

```
var elements = document.getElementById("ddBusinessCategory").selectedOptions;
while (elements.length > 0)
{
    elements[0].selected = false;
} 
```

当有多个选择时，Michel Sahli 的答案将不起作用，因为当您通过 for 循环进行时，值会`elements.length`发生变化。

也就是说， .selectedOptions 属性有点麻烦（请参阅[Is selectedOptions broken or...?](https://stackoverflow.com/questions/10711767/is-selectedoptions-broken-or)）所以可能不值得您仅通过循环选择选项获得任何微小的节省。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-25T18:47:50.657

一旦你从对象中的 DOM 中选择选项元素，但是你这样做，（我会假装它们都有一个类名）只需删除该属性：

**答案：**

```
options = document.getElementsByClassName('optionsClassName');

for (let i = 0; i < options.length; i++) {
  options[i].removeAttribute('selected');
} 
```

**The Reason:** HTML reads to see if a selected attribute exists. You can just have "selected" as an attribute without any value, and it will assume that option is selected. So, it works if you remove the attribute. Selecting will insert a new "selected" attribute. No worry.

# php - 我不断收到 MySQL 语法错误

> ID：12802741
> 
> 赞同：-3
> 
> 时间：2012-10-09T14:51:12.643
> 
> 标签：php, mysql, sql, syntax

*   服务器：通过 UNIX 套接字的 localhost
*   服务器版本：5.5.23-55
*   协议版本：10
*   MySQL 字符集：UTF-8 Unicode (utf8)
*   cpsrvd 11.32.4.13
*   MySQL客户端版本：5.5.23

嗨，我不断收到 MySql 错误。这是错误：

```
Error

SQL query:

# LedAds 2.x SQL Def file
# http://www.ledscripts.com/
# Do NOT try to dump this straight in
# If you must do dump this in yourself, then replace all of the
# {prefix} with whatever prefix you decided on when configuring everything
# Host: localhost
# Generation Time: Feb 11, 2002 at 08:32 PM
# Server version: 3.23.42
# Database : `pla`
# --------------------------------------------------------
#
# Table structure for table `pla_ads`
#
 CREATETABLE {prefix}_ads(

aid int( 10)unsigned NOTNULLAUTO_INCREMENT ,
 TYPE enum('image','rich')NOTNULL default'image',
did int( 10)unsigned NOTNULL default'0',
active enum('yes','no')NOTNULL default'yes',
datetime datetime NOTNULL default'0000-00-00 00:00:00',
 PRIMARYKEY ( aid ) 
) TYPE=MYISAM ;

MySQL said: 
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '{prefix}_ads (
   aid int(10) unsigned NOT NULL auto_increment,
   type enum('im' at line 18 
```

这是我的代码：

```
#

CREATE TABLE {prefix}_ads (
  aid int(10) unsigned NOT NULL auto_increment,
  type enum('image','rich') NOT NULL default 'image',
  did int(10) unsigned NOT NULL default '0',
  active enum('yes','no') NOT NULL default 'yes',
  datetime datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY  (aid)
) TYPE=MyISAM;
# --------------------------------------------------------

#
# Table structure for table `pla_images`
#

CREATE TABLE {prefix}_images (
  did int(10) unsigned NOT NULL auto_increment,
  image_url varchar(255) NOT NULL default '',
  url varchar(255) NOT NULL default '',
  alt_text varchar(150) NOT NULL default '',
  target varchar(20) NOT NULL default '',
  width int(11) NOT NULL default '0',
  height int(11) NOT NULL default '0',
  PRIMARY KEY  (did)
) TYPE=MyISAM;
# --------------------------------------------------------

#
# Table structure for table `pla_impressions`
#

CREATE TABLE {prefix}_impressions (
  aid int(10) unsigned NOT NULL default '0',
  impdate date NOT NULL default '0000-00-00',
  displays bigint(20) unsigned NOT NULL default '0',
  clicks int(11) NOT NULL default '0',
  PRIMARY KEY  (aid,impdate)
) TYPE=MyISAM;
# --------------------------------------------------------

#
# Table structure for table `pla_richtext`
#

CREATE TABLE {prefix}_richtext (
  did int(10) unsigned NOT NULL auto_increment,
  data mediumtext NOT NULL,
  PRIMARY KEY  (did)
) TYPE=MyISAM; 
```

我确实将 TYPE 更改为 ENGINE 但仍然看到错误...

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:53:14.323

此 SQL 脚本应由将 更改`{prefix}`为有效前缀名称的 PHP 脚本运行

简而言之：`{prefix}`无效，它应该是你的前缀，没有`{}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:54:22.150

> # 不要试图直接倾倒这个
> 
> # 如果你必须自己转储这个，那么替换所有的
> 
> # {prefix} 使用您在配置所有内容时决定的任何前缀

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:54:16.213

您的 {prefix} 未定义，因此 MySQL 不知道它的值是什么 -> 会产生错误。

出于测试目的，将“{prefix}”的所有条目替换为“my_prefix”，您应该一切顺利。

# geometry - 两个剖面的交点

> ID：12802749
> 
> 赞同：0
> 
> 时间：2012-10-09T14:51:30.723
> 
> 标签：geometry, computational-geometry, csg

我正在尝试找到一种算法来使用两个（或更多）剖面切割 3D 对象。仅应在两个剖面都被切割的地方切割对象。因此，考虑以下由两个剖面相交的 abcd 矩形：s0 和 s1；s1 向右切，s0 向顶部切。我想要的是得到最终的 ajikcd 形状。

```
.        |s1
. a______j_________b  ^
. |      |         |  |
. |- - - i - - - - |k- - s0
. |      |         |  
. d----------------c
.        |-> 
```

这是一个非常简单的例子，但我希望它能清楚地说明我想要完成的工作。此外，这应该在 3D 中完成。

有谁知道这样做的任何库，或这样做的算法？这似乎是一个重要的问题，一定有人在我之前解决了！:)

我必须补充一点，我知道如何做基础知识（平面与面/平面/边缘的相交）。我看不到是否有一种聪明的方法来解决所有可能的情况（在这个情况下，必须添加两个面，但在其他一些情况下可能只创建一个面，等等），或者你是否应该处理它们分别地。

我应该补充的另一件事是我不关心渲染部分，我知道如何使用带有剪裁平面的 OpenGL 来做到这一点。我想要的是能够计算对象的新拓扑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:58:55.767

我认为这可以通过将对象切片，移除不需要的部分，然后通过合并面将剩余的部分重新粘合在一起来相当容易地解决。

假设您将对象建模为完全链接的图

*   一个顶点列表，每个顶点都有一个边列表
*   边列表，每条边都引用两个顶点和两个面
*   面列表，每个面都有一个边列表

只要您小心维护和操作此图，它就会包含快速剪切和合并对象所需的所有信息。

您可以使用[此答案](https://stackoverflow.com/questions/4646738/detecting-arbitrary-shapes/5105357#5105357)中描述的算法来计算剪切产生的新面。

所以：您对算法的输入是切割平面列表和对象列表 - 最初只有一个。对于每个切割平面，将列表对象中的每个对象一分为二，然后将它们放回列表中。添加的两个面（每个新对象上一个）应保持对生成它们的切割平面的引用。对于被平面切成两半的面，请记住生成的两个新面应继承此参考（如果存在）。新对象应该记录它们位于平面的哪一侧（只是一个布尔值，意思是“保留”或“丢弃”）——这些记录也应该随着对象的进一步细分而保留。

完成所有切割后，您将获得一个对象列表，每个对象都有一个记录列表，详细说明它们位于切割平面的哪一侧。找到所有这些记录都“丢弃”的对象并将它们扔掉。

我们现在必须把这些物体粘在一起。

首先简单地合并对象图 - 只需将所有顶点、边和面列表组合到一个对象中。我们现在检查由同一切割平面创建的两个面：

*   如果两个面相同（即：它们共享同一组顶点），则可以删除两个面和所有关联的边。
*   如果一个面的顶点集大于另一个面，则删除较小的面和所有共享边。

您现在应该有一个合并的对象，但有一些无关的顶点。简单地遍历顶点并删除那些只有两条关联边的顶点。

这是切割如何工作的示例：

```
 :
a---1-:---b
|     :   |
2   X :   3
|     :   |
|     :   |
c---4-:---d
      :
      :s 
```

我们从一个对象开始（？表示未显示的某些边缘或面）：

```
verts:
  a:1,2,?
  b:1,3,?
  c:2,4,?
  d:3,4,?
edges:
  1:a,b X,?
  2:a,c X,?
  3:b,d X,?
  4:c,d X,?
faces:
  X:1,2,3,4
  ?:... 
```

当我们用平面 s 切割时，我们最终得到两个对象：

```
a--1--e-7-b
|     |   |
2  X  5 Y 3
|     6   |
|     |   |
c--4--f-8-d

verts:            verts:         
  a:1,2,?           e:1,5,6,7    
  e:1,5,6,7         b:3,7,?        
  c:2,4,?           d:3,8,?        
  f:4,5,6,8         f:4,5,6,8    
edges:            edges:         
  1:a,e X,?         3:b,d Y,?    
  2:a,c X,?         6:e,f Y,W    
  4:c,f X,?         7:e,b Y,?    
  5:e,f X,V         8:f,d Y,?    
faces:            faces:         
  X:1,2,3,4         Y:3,6,7,8    
  V:5,...           W:6,...      
  ?:...             ?:... 
```

我们添加了顶点 e 和 f、边 5 和 6，以及面 V 和 W。请注意，边 5 和 6 是不同的对象，它们共享相同的顶点，但在不同的面之间。

当我们将这两个对象重新合并在一起时，我们首先简单地合并两个对象图：

```
verts:
  a:1,2,?
  b:3,7,?        
  c:2,4,?
  d:3,8,?
  e:1,5,6,7        
  f:4,5,6,8  
edges:
  1:a,e X,?         
  2:a,c X,?         
  3:b,d Y,?    
  4:c,f X,?         
  5:e,f X,V         
  6:e,f Y,W    
  7:e,b Y,?
  8:f,d Y,?    
faces:
  X:1,2,3,4
  Y:3,6,7,8    
  V:5,...           
  W:6,...      
  ?:... 
```

我们可以看到面 V 和 W 是由相同的切割平面产生的并且具有相同的顶点集，因此可以将它们与关联的边一起删除。与一对重合边相关联的两个未移除的面被合并。

```
a--1--e-7-b
|         |
2  X      3
|         |
|         |
c--4--f-8-d

verts:
  a:1,2,?
  b:3,7,?        
  c:2,4,?
  d:3,8,?
  e:1,7        
  f:4,8  
edges:
  1:a,e X,?         
  2:a,c X,?         
  3:b,d X,?    
  4:c,f X,?    
  7:e,b X,?
  8:f,d X,?    
faces:
  X:1,2,3,4,7,8
  ?:... 
```

然后我们可以删除只有两条关联边的顶点，并合并这些边：

```
verts:
  a:1,2,?
  b:1,3,?        
  c:2,4,?
  d:3,8,?
edges:
  1:a,e X,?         
  2:a,c X,?         
  3:b,d Y,?    
  4:c,d X,?
faces:
  X:1,2,3,4
  Y:3,6,7,8  
  ?:... 
```

合并这些对象怎么样？

```
a--1--e
|     5   
2  X  g-3-b
|     6   |
|     9 Y 7
c--4--f-8-d

verts:            verts:         
  a:1,2,?           g:3,5,6,?    
  e:1,5,?           b:3,7,?        
  c:2,4,?           d:7,8,?        
  f:4,6,8,9,?       f:4,6,8,9,?
edges:            edges:         
  1:a,e X,?         3:b,g Y,?    
  2:a,c X,?         9:f,g Y,W    
  4:c,f X,?         7:b,d Y,?    
  5:e,g X,V,?       8:f,d Y,?    
  6:f,g X,V
faces:            faces:         
  X:1,2,4,5,6       Y:3,7,8,9
  V:5,6,...         W:9,...      
  ?:...             ?:... 
```

我们合并：

```
verts:
  a:1,2,?    
  b:3,7,?               
  e:1,5,?           
  c:2,4,?           
  d:7,8,?        
  f:4,6,8,9,?         
  g:3,5,6,9,?    
edges:
  1:a,e X,?         
  2:a,c X,?         
  3:b,g Y,?    
  4:c,f X,?         
  5:e,g X,V,?         
  6:f,g X,V
  7:b,d Y,?    
  8:f,d Y,?    
  9:f,g Y,W    
faces:
  X:1,2,4,5,6
  Y:3,6,7,8    
  V:5,6,...
  W:9,...
  ?:... 
```

并检查面 V 和 W，因为它们是由同一剖切面创建的。这次他们的顶点集是不同的。去掉小脸。在这两个面上，找到具有相同顶点的边并将它们删除：

```
a--1--e
|     5   
2  X  g-3-b
|         |
|         7
c--4--f-8-d

verts:
  a:1,2,?    
  b:3,7,?               
  e:1,5,?           
  c:2,4,?           
  d:7,8,?        
  f:4,8         
  g:3,5,?    
edges:
  1:a,e X,?         
  2:a,c X,?         
  3:b,g X,?    
  4:c,f X,?         
  5:e,g X,V,?
  7:b,d X,?    
  8:f,d X,?
faces:
  X:1,2,3,4,5,7,8
  V:5,...
  ?:... 
```

我们现在可以删除只有两条入射边的无用顶点：

```
a--1--e
|     5   
2  X  g-3-b
|         |
|         7
c----4----d

verts:
  a:1,2,?    
  b:3,7,?               
  e:1,5,?           
  c:2,4,?           
  d:4,7,?   
  g:3,5,?    
edges:
  1:a,e X,?         
  2:a,c X,?         
  3:b,g Y,?    
  4:c,d X,?         
  5:e,g X,?
  7:b,d X,?
faces:
  X:1,2,3,4,5,7
  V:5,...
  ?:... 
```

呸！希望这可以帮助...

# java - 使用 OAuth 搜索 Twitter

> ID：12802756
> 
> 赞同：0
> 
> 时间：2012-10-09T14:51:47.040
> 
> 标签：java, twitter, oauth, access-token

好的，所以我每次运行我的程序时都会获得 Twitter 的访问令牌......（目前很乏味，但我会找到如何使其成为持久存储）......我该如何使用这个访问令牌所以当我搜索时，我不会得到

> “超出速率限制。客户每小时发出的请求不得超过 150 个。” 错误？

当我搜索以下内容时会发生这种情况：“https://api.twitter.com/1/users/show.json?screen_name=[screenName]”，其编码为：

```
BufferedReader ff = new BufferedReader( new InputStreamReader(ffUser.openConnection().getInputStream())); 
```

在我下面的代码中：

```
public class UDC  {
private static String term1;
private static String term2;
public static String PIN;

private static final String twitterSearch = "http://search.twitter.com/search.json?q=%23";
private static String rppPage = "&rpp=500&page=1";

private static final String ffGet = "https://api.twitter.com/1/users/show.json?screen_name=";
private static final String CONSUMER_KEY = "K7el7Fqu7UtcJv3A3ssOQ";
private static final String CONSUMER_SECRET = "w7ZX27ys58mafLYeivuA2POVe0gjhTIIUH26f2IM";

private static String entities = "&include_entities=true";

static Object[][] tableData = new Object[500][6];
static SearchResultC s = new SearchResultC();
static StringBuffer buff = new StringBuffer();
static StringBuffer buff1 = new StringBuffer();

public static void main (String args[]) throws Exception{
    verifyURL v = new verifyURL();
    Twitter twitter = new TwitterFactory().getInstance();
      twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
      RequestToken requestToken = twitter.getOAuthRequestToken();
      AccessToken accessToken = null; // = loadAccessToken(Integer.parseInt(args[0]));
            //Twitter twitter = factory.getInstance);
            //twitter.setOAuthConsumerKey(COMSUMER_KEY, COMSUMER_SECRET);
            //twitter.setOAuthAccessToken(accessToken);

      v.valURLText.setText(requestToken.getAuthorizationURL());
      v.vFrame.setVisible(true);
      int p = 0;

      do {
          //nothing
      } while (v.vFrame.isVisible());
                try {
                  if (PIN.length() > 0) {
                      accessToken = twitter.getOAuthAccessToken(requestToken, PIN);
                  } else {
                      accessToken = twitter.getOAuthAccessToken();
                  }
              } catch (TwitterException te) {
                  if(401 == te.getStatusCode()) {
                      showErrorPane("Unable to get access code", "Error");
                      p = 1;
                  } else {
                      te.printStackTrace();
                  }
              }

      //storeAccessToken(twitter.verifyCredentials().getId(), accessToken);

    if (p == 0) {
        initComponents();
        UDTFrame.setVisible(true);
    } else {
        System.exit(0);
    }
}

@SuppressWarnings({ "static-access"})
private static void searchButtonMouseClicked(String t1, String t2) throws IOException {

    if(t1.equals("") || t2.equals("") || t1.equals(t2))
        {
        showErrorPane("Invalid Search Terms", "Search Error");
    }

    else 
    {
        s.getInitComponents();
        clicked(t1, 0);
        clicked(t2, 3);
        s.SRTFrame.setVisible(true);
        s.sTerm1Field.setText(t1);
        s.sTerm2Field.setText(t2);
    }
}

@SuppressWarnings("static-access")
public static void clicked(String term, int t){
    UDTFrame.setVisible(false);
    float follower;
    float friends;
    float ffRatio;
    float DUA;
    int statuses;
    int day;
    int year;
    String month;

    try {
        URL searchURL1 = new URL (twitterSearch + term + rppPage);
        //String searchURL = new String (twitterSearch + term + rppPage);
        BufferedReader br = new BufferedReader( new InputStreamReader(searchURL1.openConnection().getInputStream()));

        //OAuthRequest request = new OAuthRequest(Verb.POST, searchURL);

        int c;
        while ((c=br.read()) != -1) {
            buff.append((char)c);
        }
        br.close();

        /*******************************************************************************************/
        /*******************************************************************************************/
        /******************************** follower/friend ratio ************************************/
        /*******************************************************************************************/
        /*******************************************************************************************/
        JSONObject js = new JSONObject(buff.toString());
        JSONArray tweets = js.getJSONArray("results");
        JSONObject tweet = new JSONObject();
        for(int i=0; i < tweets.length(); i++) {
            tweet = tweets.getJSONObject(i);
            //System.out.println(tweet);
            //user[i] = tweet.getString("from_user_name");
            //System.out.println(tweet.getString("from_user_name"));
            //System.out.println(user[i]);
            String userName = tweet.getString("from_user");

            //URL ffUser = new URL(ffGet + user[i] + entities);
            URL ffUser = new URL(ffGet + userName + entities);
            String ffUser1 = new String(ffGet + userName + entities);

            BufferedReader ff = new BufferedReader( new InputStreamReader(ffUser.openConnection().getInputStream()));
            OAuthRequest request = new OAuthRequest(Verb.POST, ffUser1);

            int d, e = 0;
            while((d = ff.read()) != -1) {
                buff1.append((char)d);
                e++;
            }
            ff.close();

            JSONObject js1 = new JSONObject(buff1.toString());
            //System.out.println(js1);
            //JSONArray userData = new JSONArray(buff1.toString());
            //JSONObject userData1;
            //for(int j = 0; j < js1.length(); i++){
                //userData1 = userData.getJSONObject(j);
                follower =  js1.getInt("followers_count");
                friends = js1.getInt("friends_count");
                ffRatio = friends/follower;

                String createdDate = js1.getString("created_at");
                statuses = js1.getInt("statuses_count");

                String nameData = js1.getString("name");
                String gen = gender(nameData);

        //}

    } catch (MalformedURLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }
} 
```

我对这个 OAuth 和访问令牌完全陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:45:36.910

和

```
OAuthRequest request = new OAuthRequest(Verb.POST, ffUser1); 
```

您正在使用 Scribe 库执行未经身份验证的请求（您从未实例化`OAuthService`必须用于[签署](https://github.com/fernandezpablo85/scribe-java/blob/master/src/test/java/org/scribe/examples/TwitterExample.java)此请求的对象）。因此，当您经常这样做时，Twitter 会拒绝这些请求。

所以你的问题确实来自混合 Twitter4J 和 Scribe。

# visual-studio-2008 - WiX - 禁止安装和关闭按钮

> ID：12802757
> 
> 赞同：0
> 
> 时间：2012-10-09T14:51:48.343
> 
> 标签：visual-studio-2008, wix, wix3.6, bootstrapper, burn

我有一个 wix 安装，目前使用标准引导程序将多个 MSI 捆绑在一起。

以自动更新应用程序为目标，我想要的是让对话框抑制安装和关闭按钮，以便安装自动开始而无需用户干预。

我目前正在使用以下引导程序定义来抑制选项按钮和许可证，但是我可以使用标准引导程序之一做我想做的事吗？我是否正在考虑创建自己的 GUI？

```
<BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.HyperlinkLicense">
  <bal:WixStandardBootstrapperApplication SuppressOptionsUI="yes" LicenseUrl="" LogoFile="logo.png" />
</BootstrapperApplicationRef> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:08:12.387

WixStandardBootstrapperApplication 不支持：如果它以“完整 UI”启动，它将要求用户启动安装。您可以使用 /passive 开关运行引导程序以获得所需的行为。

# php - mysql 字段中分隔的外部 ID

> ID：12802765
> 
> 赞同：1
> 
> 时间：2012-10-09T14:52:04.593
> 
> 标签：php, mysql, split, explode

前言：*是的，我意识到这是糟糕的设计，但我无法改变这一点。*

**问题**

我有一个客户表，其中有一个“产品”字段。以下是示例客户产品字段中的示例：

```
36;40;362 
```

这些数字中的每一个都引用了 products 表中的一条记录。我正在尝试做一个

`(SELECT group_concat(productName) from products where productID=???)`

但是分隔符有问题。我知道如何删除分号，并尝试过“where INSTR”或 IN 但没有运气。

将整个字段返回给 PHP 然后在那里分解/解析的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:22:26.000

您可以[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)在 MySQL 中使用函数。

您只需要用逗号替换分号并在查询中使用它：

```
SELECT group_concat(productName)
FROM products
WHERE FIND_IN_SET(productID, ???) > 0 
```

请记住，`???`应该用逗号分隔！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:27:29.723

就像你说的，这不是这样做的方法。但既然这是一个不完美的世界：

假设数据库结构如下：

```
+-PRODUCTS---------+    +-CUSTOMERS---------+------------+
| ID | productName |    | ID | customerName | productIDs |
+----+-------------+    +----+--------------+------------+
|  1 | Foo         |    |  1 | Alice        | 1;2        |
+----+-------------+    +----+--------------+------------+
|  2 | Bar         |    |  2 | Bob          | 2;3        |
+----+-------------+    +----+--------------+------------+
|  3 | Baz         |    |  3 | Charlie      |            |
+----+-------------+    +----+--------------+------------+ 
```

然后是这样的查询：

```
 SELECT customers.*, 
          GROUP_CONCAT(products.id) AS ids, 
          GROUP_CONCAT(productName) AS names
     FROM customers
LEFT JOIN products
       ON FIND_IN_SET(products.id, REPLACE(productIDs, ";", ","))
 GROUP BY customers.id 
```

将返回：

```
+-RESULT------------+------------+-----+---------+
| ID | customerName | productIDs | ids | names   |
+----+--------------+------------+-----+---------+
|  1 | Alice        | 1;2        | 1,2 | Foo,Bar |
+----+--------------+------------+-----+---------+
|  2 | Bob          | 2;3        | 1,2 | Bar,Baz |
+----+--------------+------------+-----+---------+
|  3 | Charlie      |            | 1,2 | NULL    |
+----+--------------+------------+-----+---------+ 
```

`FIND_IN_SET( search_value, comma_separated_list )`在给定的逗号分隔字符串中搜索值。因此，您需要用逗号替换分号，这显然是`REPLACE()`这样做的。这个函数的返回值是它找到第一个匹配的位置，例如：

```
SELECT FIND_IN_SET(3, '1,3,5')   = 2
SELECT FIND_IN_SET(5, '1,3,5')   = 3
SELECT FIND_IN_SET(7, '1,3,5')   = NULL 
```

# c# - asp.net中的浏览器后退按钮问题

> ID：12802767
> 
> 赞同：1
> 
> 时间：2012-10-09T14:52:05.473
> 
> 标签：c#, javascript, asp.net, asp.net-ajax

我有注册表，假设有 5 个字段，并且都是必需的，即强制性的。我的问题是，当用户登录并填写该注册表单的 2 个字段并单击浏览器后退按钮时，我想将用户限制为相同的表单并显示不完整字段的 requiredField Validator 消息。那么如何在浏览器后退按钮上触发验证并将用户限制在同一表单上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:53:29.337

当用户单击“后退”按钮时，您不能影响浏览器的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:19:01.877

您不能禁用后退按钮（请参阅其他答案及其评论）。

您*可以*做的是在每个页面上检查用户是否已登录。如果没有，请将他重定向到您的登录页面。这样用户就无法在不登录的情况下访问该站点，我猜这就是您的客户真正想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:54:10.147

正确的解决方案是在用户登录后立即检查他是否已完成数据库上的注册条目，如果没有，则重定向他以填写该数据。

从您的评论中，提醒他们一个解决方案是捕获`onbeforeunload`并检查他们是否填写了所有内容，显示您的信息。

简单的例子，你只需要在这里放置你的条件。

```
window.onbeforeunload = function() {
    return 'You have unsaved changes!';
} 
```

# java - 根据基本的 oop 约定，菜单代码应该在 main 方法中还是在类中？

> ID：12802768
> 
> 赞同：2
> 
> 时间：2012-10-09T14:52:06.810
> 
> 标签：java, oop

我是一名学生，我是 Java 新手，我正在做的这个作业是我必须做的第一个作业，它必须严格遵循 oop 约定。所以这可能是一个新手问题。在对菜单进行编码时，将菜单代码放在 main 方法中是否合适，还是应该放在类中并与其他所有内容一起实例化？

编辑：菜单菜单是一个简单的命令行菜单，用数字输入，没有 gui。还没有那么远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:54:17.133

如果您想严格遵守 OOP 约定，您可以拥有自己的课程，例如

```
abstract class MenuItem {
  int index;

  protected MenuItem(int index) {
    this.index = index;
  }

  abstract void action();
}

class ExitMenuItem {
  ExitMenuItem() {
    super(3); // the index value of the menu item
  }

  void action() {
    System.exit(0);
  }
} 
```

这样您就可以为每个具有其行为的菜单项指定一个子类。

然后你可以有一个菜单容器，比如：

```
class Menu {
  ArrayList<MenuItem> items;

  void executeAction(String input) {
    ..
  }
} 
```

那应该了解根据标准输入输入选择了哪个声音并执行它。当然，您可以通过为每个菜单项等设置默认文本来丰富所有内容。然后在您的主要方法中，您只需实例化菜单并负责将标准输入输入转发给它。

请注意，这在一个简单的菜单中通常是多余的，但如果您想了解 OOP，那么这是一个不错的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:58:22.100

对于面向对象的方法，您应该在特定类中创建菜单。Main 方法是过程/命令式编程语言的遗产。Main 方法应该只运行主线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:06:53.877

这取决于。这通常是人们可以提供的最糟糕的答案，但不幸的是，它非常适合。

您尚未提供完整的要求，因此很难猜测您的意图。这个菜单是特定于一个班级的吗？可以多次运行吗？它应该能够并行运行吗？

或者更确切地说，这个菜单是否只是实际程序的入口点？例如：按 1 登录，按 2 在屏幕上显示某些内容，按 3 为 ....

我给你这些问题的原因是因为它们会影响你的代码结构。在第一种情况下，如果它们是专门与类相关的菜单，并且可以从代码中的多个位置的多个位置运行，那么属于类结构本身（非静态）是有意义的。

但是，如果菜单纯粹是应用程序的入口点，则将它们放在代码的 main() 部分中，或者为清晰起见编写另一个名为 menu() 的静态方法是有意义的。但实际上，menu() 方法只会被 main 调用。

接下来要问自己的是您计划如何验证菜单选择的响应。您需要复杂/涉及的代码吗？将验证例程作为主要方法的一部分还是拥有自己的方法更有意义？让成员变量在方法类之间进行通信以进行验证等是否更有意义？

请记住，可以在不实例化类的情况下调用静态方法。话虽如此，静态 main() 方法或静态 menu() 方法仍保留在类本身中，并且是 OOP 设计的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T15:01:08.877

问问自己这个 - 如果将打印菜单的代码放在主要方法中，我该如何处理多次打印？

如果将代码放入与主类相同的类中的方法中，并且我需要在另一个主类中的其他地方打印菜单，我该如何处理？

最终，您将拥有一个处理处理菜单显示的代码的类，而主类将只调用该类的方法。:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-09T15:06:06.217

可能对此有不同的口味，一个好的答案也可能取决于您的应用程序在做什么。

首先，对于一个小型应用程序，我不介意在主类中有菜单。

但是为了获得良好的结构，最好有一个类负责打印基于行的菜单，然后当然还负责读取用户输入并调用用户要求的操作。我认为一个好主意是调用这样一个类`Controller`或`Dispatcher`. 这个类将是一个单例。此外，我认为拥有一个方法`displayMenu`和`dispatch`. 两者都将从构造函数中连续调用。

那么如何`dispatch`调用适当的操作将取决于您的应用程序的其余部分。

有些人不喜欢这种风格，因为你的主程序可能只有声明。

# android - Android：从 ListView Selected Item 获取数据库项目

> ID：12802777
> 
> 赞同：0
> 
> 时间：2012-10-09T14:52:28.227
> 
> 标签：android, sqlite, android-listview

我正在处理一个 android 项目，我试图从包含数据库项条目的 listView 中选择的任何项中获取有关数据库项的信息。我是 android 和 SQLite 的新手，所以我不确定几件事。对于列表视图，我可以做些什么来使项目可点击，然后使用它从数据库中获取有关项目的信息。

在不相关的事情中，我如何检查数据库中的名称列表以防止用户输入重复项？

这是包含列表视图的 ContactsMenu 类的代码。

```
package com.emailandcontactmanager;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class ContactsMenu extends Activity {

    ListView listView;
    public static final String fields[] = { DatabaseSetup.colName};
    Cursor cursor;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.managecontacts);
        listView = (ListView) findViewById(R.id.lstContacts); 
        DatabaseSetup.init(this); 

        Button btnAddItem = (Button) findViewById(R.id.btnAddContact);
        btnAddItem.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent addItem = new Intent(v.getContext(), AddContact.class);
            startActivity(addItem);
        }
        });

    }
        @Override
        protected void onPause() {
            listView.setAdapter(null);
            cursor.close();
            DatabaseSetup.deactivate();
            super.onPause();
        }

        @Override
        protected void onResume() {
            super.onResume();
            DatabaseSetup.init(this);
            cursor = DatabaseSetup.getContactNames();
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.row, cursor, fields, new int[] {R.id.item_text});
            listView.setAdapter(adapter); 
        }

////////////////MENU////////////////////////////////////////////////////////////////////////////////
    DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() { 
        public void onClick(DialogInterface dialog, int which) { 
            switch (which){ 
            case DialogInterface.BUTTON_POSITIVE: 
                finish();
                break; 

            case DialogInterface.BUTTON_NEGATIVE: 
                //Nothing happens on No button click, and the menu closes
                break; 
            } 
        } 
    }; 

    @Override
    public boolean onCreateOptionsMenu(Menu mainmenu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.mainmenu, mainmenu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        final CharSequence[] items = {"Contacts list", "Add Contact"};

        switch (item.getItemId()) {
            case R.id.help:     AlertDialog.Builder builder = new AlertDialog.Builder(this);
                                builder.setTitle("Select a function to revice information about it.");
                                builder.setItems(items, new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int selected) {
                                        switch(selected){
                                        case 0:
                                            Toast.makeText(getApplicationContext(),
                                                    "Allows you to view the selected item and make editations to it or delete it.",
                                                    Toast.LENGTH_LONG).show();
                                            break;
                                        case 1:
                                            Toast.makeText(getApplicationContext(),
                                                    "Allows you to add a new contact by bringing up a screen where the nececary information can be entered.",
                                                    Toast.LENGTH_LONG).show();
                                        }
                                    }
                                });
                                builder.show();
                                break;

                                case R.id.back:     AlertDialog.Builder builderBack = new AlertDialog.Builder(this); 
                                                    builderBack.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener) 
                                                    .setNegativeButton("No", dialogClickListener).show(); 
                                break;
        }
        return true;

    }
} 
```

这是 DatabaseSetup 类的代码。

```
package com.emailandcontactmanager;

import android.content.ContentValues; 
import android.content.Context; 
import android.database.Cursor; 
import android.database.sqlite.SQLiteDatabase; 
import android.database.sqlite.SQLiteOpenHelper; 

/* 
 * usage:  
 * DatabaseSetup.init(egActivityOrContext); 
 * DatabaseSetup.createEntry() or DatabaseSetup.getContactNames() or DatabaseSetup.getDb() 
 * DatabaseSetup.deactivate() then job done 
 */ 

class DatabaseSetup extends SQLiteOpenHelper { 
static DatabaseSetup instance = null; 
static SQLiteDatabase db = null; 

public static void init(Context context) { 
    if (null == instance) { 
        instance = new DatabaseSetup(context); 
        } 
    } 

public static SQLiteDatabase getDb() { 
    if (null == db) { 
        db = instance.getWritableDatabase(); 
        } 
    return db; 
    } 

public static void deactivate() { 
    if (null != db && db.isOpen()) { 
        db.close(); 
        } 
    db = null; 
    instance = null; 
    } 

public static long createEntry(String name, String mail, String phone1, 
        String phone2, String address, String notes) { 
    ContentValues cv = new ContentValues(); 
    cv.put(colName, name); 
    cv.put(colMail, mail); 
    cv.put(colPhone1, phone1); 
    cv.put(colPhone2, phone2); 
    cv.put(colAddress, address); 
    cv.put(colNotes, notes); 
    return getDb().insert(contactsTable, null, cv); 

    } 

public static Cursor getContactNames() { 
    // TODO Auto-generated method stub 
    String[] columns = new String[] {"_id", colName }; 
    return getDb().query(contactsTable, columns, null, null, null, null, 
            null); 
    } 

DatabaseSetup(Context context) { 
    super(context, dbName, null, dbVersion); 
    } 

@Override 
public void onCreate(SQLiteDatabase db) { 
    // TODO Auto-generated method stub 
    db.execSQL("CREATE TABLE IF NOT EXISTS " + contactsTable 
            + " (_id integer primary key autoincrement, " + colName 
            + " TEXT NOT NULL, " + colMail + " TEXT NOT NULL, " + colPhone1 
            + " TEXT NOT NULL, " + colPhone2 + " TEXT NOT NULL, " 
            + colAddress + " TEXT NOT NULL, " + colNotes 
            + " TEXT NOT NULL)"); 

    db.execSQL("CREATE TABLE IF NOT EXISTS " + templatesTable 
            + " (_id integer primary key autoincrement, " + colSubject 
            + " TEXT NOT NULL, " + colBody + " TEXT NOT NULL)"); 

    db.execSQL("CREATE TABLE IF NOT EXISTS " + tagsTable 
            + " (_id integer primary key autoincrement, " + colTagName 
            + " TEXT NOT NULL, " + colContact + " TEXT NOT NULL)"); 

    } 

@Override 
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
    db.execSQL("DROP TABLE IF EXISTS " + contactsTable); 
    db.execSQL("DROP TABLE IF EXISTS " + templatesTable); 
    db.execSQL("DROP TABLE IF EXISTS " + tagsTable); 
    onCreate(db); 
    } 

static final String dbName = "DB"; 
static final int dbVersion = 1; 
static final String contactsTable = "Contacts"; 
static final String colName = "Name"; 
static final String colMail = "Email"; 
static final String colPhone1 = "Phone1"; 
static final String colPhone2 = "Phone2"; 
static final String colAddress = "Address"; 
static final String colNotes = "Notes"; 

static final String templatesTable = "Templates"; 
static final String colSubject = "Subject"; 
static final String colBody = "Body"; 

static final String tagsTable = "Tags"; 
static final String colTagName = "Name"; 
static final String colContact = "Contact"; 

} 
```

最后一个问题是我的 AddContact 类

```
package com.emailandcontactmanager;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class AddContact extends Activity
{
    EditText contactName, contactMail, contactPhone1, contactPhone2, contactAddress, contactNotes; 

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newcontact);

        contactName = (EditText) findViewById(R.id.txtName);
        contactMail = (EditText) findViewById(R.id.txtMail);
        contactPhone1 = (EditText) findViewById(R.id.txtPhone1);
        contactPhone2 = (EditText) findViewById(R.id.txtPhone2);
        contactAddress = (EditText) findViewById(R.id.txtAddress);
        contactNotes = (EditText) findViewById(R.id.txtNotes);
       // saveContact = (Button) findViewById(R.id.btnSaveContact);

        DatabaseSetup.init(this);

        Button btnSaveContact = (Button) findViewById(R.id.btnSaveContact);
        btnSaveContact.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                boolean working = true;

                try{
                    String name = contactName.getText().toString();
                    String mail = contactMail.getText().toString();
                    String phone1 = contactPhone1.getText().toString();
                    String phone2 = contactPhone2.getText().toString();
                    String address = contactAddress.getText().toString();
                    String notes = contactNotes.getText().toString();

                    if(name != null & mail != null) {
                    DatabaseSetup entry = new DatabaseSetup(AddContact.this);
                    DatabaseSetup.getDb();
                    DatabaseSetup.createEntry(name, mail, phone1, phone2, address, notes);
                    entry.close();
                    }
                    else{
                        Toast.makeText(getApplicationContext(),
                                "Must enter name and email for contact",
                                Toast.LENGTH_LONG).show();

                    }

                    }
                    catch(Exception e)
                    {
                        working = false;
                        String error = e.toString();
                        Dialog d = new Dialog(AddContact.this);
                        d.setTitle("Error");
                        TextView tv = new TextView(AddContact.this);
                        tv.setText(error);
                    }
                    finally
                    {
                        if(working)
                        {
                            Dialog d = new Dialog(AddContact.this);
                            d.setTitle("Success");
                            TextView tv = new TextView(AddContact.this);
                            tv.setText("The database changes have succeeded.");
                            d.setContentView(tv);
                            d.show();

                        }
                    }       
            }   
        });
    }
////////////////MENU///////////////////////////////////////////////MENU/////////////////////////////
DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() { 
public void onClick(DialogInterface dialog, int which) { 
switch (which){ 
case DialogInterface.BUTTON_POSITIVE: 
    finish();
    break; 

case DialogInterface.BUTTON_NEGATIVE: 
    //Nothing happens on No button click, and the menu closes
    break; 
            } 
        } 
    }; 

@Override
public boolean onCreateOptionsMenu(Menu mainmenu) {
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.mainmenu, mainmenu);
return true;
    }

@Override
public boolean onOptionsItemSelected(MenuItem item) {
final CharSequence[] items = {"Name Field", "Email Field", "Phone1&2 Fields", "Address Field", "Notes Field", "Add Button"};

switch (item.getItemId()) {
case R.id.help:     AlertDialog.Builder builder = new AlertDialog.Builder(this);
                    builder.setTitle("Select a function to revice information about it.");
                    builder.setItems(items, new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int selected) {
                            switch(selected){
                            case 0:
                                Toast.makeText(getApplicationContext(),
                                        "Enter the desired name of a contact. This is a required field",
                                        Toast.LENGTH_LONG).show();
                                break;
                            case 1:
                                Toast.makeText(getApplicationContext(),
                                        "Enter the email address of the contact. This is a required field.",
                                        Toast.LENGTH_LONG).show();
                                break;
                            case 2:
                                Toast.makeText(getApplicationContext(),
                                        "Enter the phone number(s) of the contact. Both fields are optional",
                                        Toast.LENGTH_LONG).show();
                                break;
                            case 3:
                                Toast.makeText(getApplicationContext(),
                                        "Enter the address of the contact. This field is optional",
                                        Toast.LENGTH_LONG).show();
                                break;
                            case 4:
                                Toast.makeText(getApplicationContext(),
                                        "Enter notes about the contact. This field is optional",
                                        Toast.LENGTH_LONG).show();
                                break;
                            case 5:
                                Toast.makeText(getApplicationContext(),
                                        "This button will save the contact to the database. When you are done saving contacts, click back to return to the contacts menu.",
                                        Toast.LENGTH_LONG).show();
                            }
                        }
                    });
                    builder.show();
                    break;

                    case R.id.back:     AlertDialog.Builder builderBack = new AlertDialog.Builder(this); 
                                        builderBack.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener) 
                                        .setNegativeButton("No", dialogClickListener).show(); 
                    break;
    }
return true;

        }
    } 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:06:54.313

使用`onItemClick`或`onItemLongClick`（用于使用长按）并使用位置指向数据库中的数据

[http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html) 这是一个详细的示例。希望对您有所帮助。

# mysql - MySQL 上 addtime() 和 convert() 函数的区别

> ID：12802784
> 
> 赞同：0
> 
> 时间：2012-10-09T14:52:46.370
> 
> 标签：mysql, date, datetime, time

我一直在搞乱 MySQL ，试图在日历上工作，我在调查 datetime 类型时遇到了这个疑问。

```
addtime ('2012-01-01 01:00:00','00:00:00');
convert ('2012-01-01 01:00:00', datetime); 
```

根据我的理解，上面的句子应该将字符串转换为数据类型日期时间，我的陈述是真的吗？或者它们之间有区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:03:34.890

有关函数，请参阅 MySQL 文档：[ADDTIME](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_addtime)和[CONVERT()](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_convert)。

**添加时间**

> ADDTIME() 将 expr2 添加到 expr1 并返回结果。expr1 是时间或日期时间表达式，而 expr2 是时间表达式。
> 
> mysql> SELECT ADDTIME('2007-12-31 23:59:59.999999', '1 1:1:1.000002'); -> '2008-01-02 01:01:01.000001' mysql> SELECT ADDTIME('01:00:00.999999', '02:00:00.999998'); -> '03:00:01.999997'

**转变**

> CONVERT(expr,type), CONVERT(expr USING transcoding_name)
> 
> CONVERT() 和 CAST() 函数采用任何类型的表达式并产生指定类型的结果值。
> 
> 结果的类型可以是以下值之一：
> 
> 二进制[(N)]
> 
> 字符[(N)]
> 
> 日期
> 
> 约会时间
> 
> 十进制[(M[,D])]
> 
> 签名 [整数]
> 
> 时间
> 
> 无符号[整数]

您使用`addtime`MySQL 的方式应该会出错。由于`ADDTIME`需要 2 个参数，而您只传递了一个。

希望能帮助到你...

# ember.js - Ember.js：如何从 Ember.Map 查看数据

> ID：12802787
> 
> 赞同：5
> 
> 时间：2012-10-09T14:52:56.750
> 
> 标签：ember.js, handlebars.js, nested-loops

我想查看按部门分组的一些联系信息（姓名、电子邮件...），但我无法使用 Handlebars 实现。

*   X部

    *   联系 x1 信息
    *   联系 x2 信息
    *   ...
*   Y部

    *   联系 y1 信息
    *   联系y2信息
    *   ...

我不知道我提前有多少部门。因此，在我的控制器中，我尝试在 Ember.Map 中加载信息，其中部门是其键，带有联系人信息的数组是每个部门的值。它是这样的：

```
map = Ember.Map.create();
// Load data from server into map
// m = {'Department X': [{name:'x1','email':'emailx1',...},{...}], 'Department Y':[....], ...}

{{#each department in map}}
    {{department}}
    {{#each contact in map.keys}}
        {{contact.name}} | {{contact.email}}
    {{#each}}
{{#each}} 
```

抛出一个错误，提示“EmberCollectionView 的内容必须实现 Ember.Array。您传递了 [object Object]”。是否可以使用嵌套数据来完成任务？欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:10:29.217

像这样创建一个部门类怎么样：

```
App.Department = Ember.Object.extend({
  name: null
  contacts: null // will be an array of App.Contact
}) 
```

和这样的联系人类：

```
App.Contact = Ember.Object.extend({
  name: null,
  email: null,
}) 
```

加载数据时，您可以简单地构建一个部门数组

```
App.departments = [];

// parse the arriving json and populate the departments array
App.departments.pushObject(
   App.Department.create(
        {name: dptLoadedName, contacts: [App.Contact.create({...})]}
   )
) 
```

因此，在您的模板中，您可以执行以下操作：

```
{{#each department in App.departments}}
   {{department.name}}
   {{#each contact in department.contacts}}
     {{contact.name}} | {{contact.email}}
   {{#each}}
{{#each}} 
```

# xcode - 在 Iphone 中显示 NSMUtableArray 项目？

> ID：12802790
> 
> 赞同：0
> 
> 时间：2012-10-09T14:53:01.207
> 
> 标签：xcode, nsmutablearray

我是 Objective-C 的新手，我有一个特定的概念，但不知道从哪里开始以及如何开始。我需要专家的建议。我的概念是：我必须从服务 url 并将其存储在 NSMutableArray 中。然后我必须在行和列中显示特定的数组数据。就像在 gridview 中添加一样，当用户选择特定项目时，该值应显示在文本字段中，为用户提供仅选择的选项一次一个值。假设我从 url 收到的数据是 id（假设 16 个值（可能会有所不同）来自 xml 响应中的特定标签），那么当我必须将其绑定到 gridview 并提供选择一个值的选项时在文本字段中显示..我不知道从哪里开始以及如何开始？

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:31:26.120

通过自定义 UITableView 解决了它，并使其相应地加载行和列中的数组数据..

# windows - 使用 schtasks 创建具有最大权限的计划任务

> ID：12802792
> 
> 赞同：2
> 
> 时间：2012-10-09T14:53:04.240
> 
> 标签：windows, batch-file, scheduled-tasks, windows-task-scheduler

我一直在浏览`schtasks`命令的文档，但在计划任务管理窗口 GUI 中没有找到与“以最大权限执行”复选框（此处粗略翻译，抱歉）的等效项（并且`/RU SYSTEM`没有实现）。

你知道是否有这样的选择`schtasks`吗？如果是这样，哪些 Windows 版本可以从中受益？

非常感谢你的帮助！

罗尔夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:57:17.697

你不会找到这样的东西，因为没有像最大权限这样的东西。您必须指定具有足够权限来执行任务的用户凭据。

否则将导致计划任务执行失败。

这是使用指定级别的权限执行任务的答案。

[https://superuser.com/questions/243605/how-do-i-specify-run-with-highest-privileges-in-schtasks](https://superuser.com/questions/243605/how-do-i-specify-run-with-highest-privileges-in-schtasks)

# java - 如何在java中提取受密码保护的.rar文件？

> ID：12802793
> 
> 赞同：4
> 
> 时间：2012-10-09T14:53:05.790
> 
> 标签：java, rar

> **可能重复：**
> [带有java的RAR档案](https://stackoverflow.com/questions/561107/rar-archives-with-java)

在我正在处理的 java 项目中，我需要提取一个受密码保护的 .rar 文件。我知道密码。有人知道这样做的免费 API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:04:09.087

您可以下载使用[WinZipAES](http://code.google.com/p/winzipaes/downloads/detail?name=winzipaes_src_20120819.zip)。

它有诸如`de.idyl.winzipaes.AesZipFileEncrypter`和之类的类`de.idyl.winzipaes.AesZipFileDecrypter`，这可能对您有用。

这个小实用程序在`java.util.zip`内部使用包。

# hibernate - 如何使用休眠 4.1 和 Envers 4.1 配置 JBoss 7.1.1？

> ID：12802800
> 
> 赞同：1
> 
> 时间：2012-10-09T14:53:17.530
> 
> 标签：hibernate, jboss, hibernate-envers

我的项目有问题。我们正在使用 JBoss7.1.1，我们想在 4.1 版本中使用 envers。4.1 版中的 Envers 需要 4.1 版中的 Hibernate。不幸的是，jboss 7.1.1 包含较旧的 hibernate 和 Envers 模块。

我有两个选择：

更改 JBoss 中的模块（放在那里新的环境和休眠）。问题是每个运行这个应用程序的 jboss 都必须为那个项目“调整”（有点痛苦）。

或者：

在 war 中排除 JBoss 模块并使用来自 WEB-INF/lib 的库。我排除了使用以下模块的模块：

```
<jboss-deployment-structure>
    <ear-subdeployments-isolated>true</ear-subdeployments-isolated>
    <deployment>
        <!-- Exclusions allow you to prevent the server from automatically adding some dependencies     -->
        <exclusions>
            <module name="org.hibernate"/>
            <module name="org.hibernate.envers"/>
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

我已经将 Maven 中的依赖项从提供更改为编译，它应该可以工作，对吧？

但现在我得到了这个例外：

```
Caused by: java.lang.IllegalArgumentException: interface org.hibernate.annotations.Columns is not visible from class loader
    at java.lang.reflect.Proxy.getProxyClass(Proxy.java:353) [classes.jar:1.6.0_35]
    at org.hibernate.annotations.common.annotationfactory.AnnotationFactory.create(AnnotationFactory.java:46)
    at org.hibernate.cfg.annotations.reflection.JPAOverridenAnnotationReader.buildColumns(JPAOverridenAnnotationReader.java:1383) 
```

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:50:51.593

我强烈建议不要为您的应用程序使用不同版本的 Hibernate。

我建议你下载 hibernate 4.1.3 和其他相关的，用正确的 jar 替换 jar 和更新 module.xml。我们将 7.1.1 与 Hibernate 4.1.3 Core 和 Envers 一起使用。

替换 Envers module.xml

```
 <module xmlns="urn:jboss:module:1.1" name="org.hibernate.envers">
    <resources>
      <resource-root path="hibernate-envers-4.1.3.Final.jar"/>
      <!-- Insert resources here -->
    </resources>

  <dependencies>
    <module name="org.hibernate"/>
    <module name="org.jboss.logging"/>
    <module name="org.dom4j"/>
    <module name="javax.api"/>
    <module name="javax.persistence.api"/>
    <module name="javax.transaction.api"/>
    <module name="org.hibernate.commons-annotations"/>
    <module name="org.javassist"/>
   </dependencies>
 </module>

Change also org/hibernate/main/ (we use hibernate core 4.1.3.Final)
Change org/hibernate/validator/main ( we use hibernate validator-4.2.0.Final)
Change org/hibernate/commons-annotations (we use 4.0.1 Final) 
```

应该是这样..如果出现任何依赖问题，请告诉我..

-麦迪

# xml - 如何在 XSLT 模板中设置单元格的背景颜色

> ID：12802807
> 
> 赞同：0
> 
> 时间：2012-10-09T14:53:38.043
> 
> 标签：xml, xslt, ms-word

我正在编写一个 XSLT 模板，并想知道如何设置此 XSLT 创建的 word 文档中单元格的背景颜色。

下面是模板的一部分，您可以在其中使用 w:color="auto" 设置线条的颜色（而不是背景）。我在谷歌或堆栈溢出上找不到任何东西。

真正有用的是列出所有这些标签的参考站点，如果有人有链接，我将不胜感激

提前致谢

```
<w:tc>
    <w:tcPr>
        <w:tcW w:w="2600" w:type="dxa"/>
        <w:tcBorders>
            <w:top w:val="single" w:sz="12" wx:bdrwidth="30" w:space="0" w:color="auto"/>
            <w:left w:val="single" w:sz="2" wx:bdrwidth="5" w:space="0" w:color="auto"/>
            <w:bottom w:val="single" w:sz="12" wx:bdrwidth="30" w:space="0" w:color="auto"/>
            <w:right w:val="single" w:sz="12" wx:bdrwidth="30" w:space="0" w:color="auto"/>
        </w:tcBorders>
        <w:vAlign w:val="center"/>
    </w:tcPr>
    <w:p>
    <w:pPr>
        <w:jc w:val="center"/>
        <w:rPr>
            <w:sz w:val="14"/>
            <w:sz-cs w:val="14"/>
        </w:rPr>
    </w:pPr>
    <w:r>
        <w:rPr>
            <w:sz w:val="14"/>
            <w:sz-cs w:val="14"/>
        </w:rPr>
        <w:t>Comments</w:t>
    </w:r>
</w:p>
</w:tc> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:12:48.123

我会推荐你​​使用可以从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=5124)下载的 OpenXML SDK 开发工具。只需从编辑器（Microsoft Office 编辑器。Word 或 Excel）创建模板。应用样式，然后在 OpenXML SDK 中打开您的文件，您可以在其中看到办公室如何应用样式。问候

# html - 浮动选择器

> ID：12802811
> 
> 赞同：0
> 
> 时间：2012-10-09T14:53:50.493
> 
> 标签：html, css

我试图在同一行中水平对齐一些选择器。试过`float:left`但没用！还是我在做一些愚蠢的事情？请帮我解决一下这个。 [http://jsfiddle.net/6YKhT/](http://jsfiddle.net/6YKhT/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:56:37.027

```
.filter-section select {
        float:left;
} 
```

这已经足够了。无需内联显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:55:55.330

你想做这样的事情我认为：

```
.styled-selects{
    display:inline-block;
    float:left;
} 
```

您应该浮动选择框，而不是围绕它们的 div。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T14:56:50.403

..试试这个：

.styled-selects{ 显示：内联块；向左飘浮; }

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:00:40.527

```
.filter-section div{
        float:left;
} 
```

您将浮动瞄准了错误的 div 容器。filter-section 的子容器应该有 'float: left'。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T15:06:19.240

它已经被提到过几次 - 但无论是 Sem 还是这将是创建单行选择选项的最简单方法：

```
.styled-selects {
    float:left; 
} 
```

或者

```
​.filter-section select {
    float:left;
} 
```

只需要注意每个 CSS 定义都应用于正确的元素。嵌套 Div 标签有时会在系统中引发麻烦；）

# c++ - C/C++ 中的线程，任何标准？

> ID：12802812
> 
> 赞同：0
> 
> 时间：2012-10-09T14:53:51.073
> 
> 标签：c++, c, multithreading

> **可能重复：**
> [C/C++ 中的基本多线程——提示、建议、教程、一些方向？](https://stackoverflow.com/questions/3402916/basic-multi-threading-in-c-c-hints-advice-tutorial-some-direction)

我想开始使用线程并了解 C/C++ 中的线程。

有没有标准库？还有哪些是最常用的，或者您会向线程初学者推荐哪些？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T14:56:27.230

在大多数平台上，您需要操作系统内核支持才能以高性能方式执行线程（例如，可以一次使用多个 CPU 内核）。（我会注意到在用户空间中可以进行协作线程，但现在这是不典型的。`makecontext`例如参见 Linux）

**内核调用：**

在 Linux 和 Mac 上，*pthreads* api 是`clone`系统调用的瘦包装器。

在 Windows、Windows API`CreateThread`和朋友上。

**标准库（包装内核调用）：**

在 C11 上，[`<threads.h>`](http://en.cppreference.com/w/c/thread)

在 C++11 上，[`std::thread`](http://en.cppreference.com/w/cpp/thread/thread)和朋友们。

**第 3 方库（包含上述内容）：**

apr（阿帕奇运行时）

提升::线程

Qt

好多其它的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:57:46.893

由于 C++11 有[std::thread](http://en.cppreference.com/w/cpp/thread/thread)

在此之前，所有解决方案都是特定于平台的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:01:52.567

我发现 Boost 线程库很好，它适用于 Boost 支持的任何平台，而且数量不少。

[Boost.Threads 库](http://www.drdobbs.com/cpp/the-boostthreads-library/184401518?cid=dobbs-callout-mostpop)

[使用 Boost 进行线程化 - 第一部分：创建线程](http://antonym.org/2009/05/threading-with-boost---part-i-creating-threads.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T15:02:49.310

根据我自己的经验，我的两分钱：

1) 作为第一步，pthreads（C 的 POSIX）和我使用的链接是 Hunter McMillen [computing.llnl.gov/tutorials/pthreads](http://computing.llnl.gov/tutorials/pthreads)。它简明扼要，值得一读。

2）在那之后，在 C++ 中我去了 boost 接口（寻找）。我建议阅读 C++ Concurrency in Action ( [http://www.manning.com/williams/](http://www.manning.com/williams/) ) 一书。这样做的好处是本书

1.  在我看来，有效地向您介绍了线程
2.  您可以使用易于安装和编译的 boost
3.  正如作者所说，您也会习惯新标准 C+11（因为正如作者所说，boost 实现与新标准非常相似）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:56:45.227

C++ 在其最新版本 (C++11) 中具有 std::thread。否则，Qt 经常用于很多东西，或者如果您不需要 Qt 中的所有其他东西或不喜欢许可问题，则使用 boost::thread。

C 没有标准线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T15:15:26.587

我建议使用 OpenMP；这是非常容易使用。

[http://en.wikipedia.org/wiki/OpenMP](http://en.wikipedia.org/wiki/OpenMP)

[http://openmp.org/wp/openmp-specifications/](http://openmp.org/wp/openmp-specifications/)

示例：在线程之间分配数组中元素的计算：

```
float array[i];
#pragma omp parallel for // This is the important bit
for (int i = 0; i < N; ++i)
{
    array[i] = Compute(i); 
} 
```

它是如何工作的：产生了许多线程（您可以设置数量，它应该默认为您拥有的核心数量），并且每个线程执行循环的一部分。

即：如果 N = 100，并且您有 2 个线程，则线程 1 执行 i = 0 到 49 的 for 循环，线程 2 执行 i = 50 到 99 的循环。

你应该小心多线程。例如，如果数组中后面的元素依赖于前面的元素，那么最终的数组将毫无用处，因为可能会先计算这些后面的元素。

您需要向 gcc 提供 -fopenmp，否则 #pragma 将被视为注释并被忽略（即：主线程将执行所有操作）。

# javascript - 为什么 Backbone.Modelbinder 只绑定视图列表的最后一个实例

> ID：12802821
> 
> 赞同：0
> 
> 时间：2012-10-09T14:54:16.790
> 
> 标签：javascript, backbone.js, model-binding

在项目列表中，每个项目都有自己的模型绑定器对象来绑定模型的值。

我遇到的问题可以重现：http: [//jsfiddle.net/goodafternoon/NmgkY/#base](http://jsfiddle.net/goodafternoon/NmgkY/#base)

只有出现在列表中的最后一个元素被绑定，因此只有那个元素响应模型事件监听器

```
this.on("change", function() {
    console.log('event');
}); 
```

我正在使用 Ironcooks 著名的 Modelbinder 模块：[https ://github.com/theironcook/Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:18:47.583

修复。

如果你有类似的问题，这里是更新的小提琴：http: [//jsfiddle.net/goodafternoon/XwT2k/1/](http://jsfiddle.net/goodafternoon/XwT2k/1/)

问题是我在类中创建了 ModelBinder 对象的新实例，而不是在模型实例化时创建它，所以只有一个 ModelBinder，这就是为什么我只在一个元素上获得绑定的原因。

# php - 如果变量等于某个字符串，则htaccess重写如果条件

> ID：12802823
> 
> 赞同：2
> 
> 时间：2012-10-09T14:54:21.363
> 
> 标签：php, .htaccess, mod-rewrite

我在 .htaccess 文件中使用 mod rewrite 将 URL 更改为更好的 URL，它会将其转换为：

```
http://domain.com?a=test&v=page&id=3 
```

到

```
http://domain.com/test/page/3 
```

使用这个条件

```
RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)?$ index.php?a=$1&v=$2&id=$3 [L] 
```

如果 $1 == cart 和 $2 == home，我想做一些不同的事情

这是使用 php`if`条件的想法的一些伪代码

```
if($1 == 'cart' && $2 == 'home'){
   here I want to do a different rewrite rule
}else{
   RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)?$ index.php?a=$1&v=$2&id=$3 [L]
} 
```

关于我如何去做的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:55:45.477

2个重写规则，首先是预定义的：

```
RewriteRule ^cart/home/([^/\.]+)?$            page2.php?id=$1 [L]
RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)?$  index.php?a=$1&v=$2&id=$3 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:55:58.233

试试这个：

```
RewriteRule ^cart/home/([^/.]+)?$ other_page.php?id=$1 [L] 
```

然后继续你已有的规则。

# php - 来自未知对象的静态方法调用

> ID：12802830
> 
> 赞同：0
> 
> 时间：2012-10-09T14:54:41.667
> 
> 标签：php

我想从我的一个对象中调用一个静态方法。如果我知道对象的名称，这没问题，但在这种情况下，我不知道。
我有一个包含多个对象名称的数组，我想从其中一个数组元素中调用该方法。所以，它看起来像这样：

```
function call_method($key)  {
    $tmp = array('key1' => 'objectname1','key2' => 'objectname2','key3' => 'objectname3');
    if(array_key_exists($key, $tmp))    {
        $tmp::static_method();
    }
} 
```

但是，这个解决方案不起作用。有人知道如何让这个工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:57:07.637

`$tmp`是一个数组，因此它没有与之关联的静态方法。您需要查找该值并使用它：

```
// this will work for newer versions of PHP
$klass = $tmp[$key];
$klass::static_method();

// in some older versions, you may need to use call_user_func:
call_user_func(array($klass, 'static_method') /*, your args here */); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:57:46.797

现在，您正在尝试调用该数组上的静态函数。你应该做 ：

```
 if(array_key_exists($key, $tmp))    {
    $tmp[$key]::static_method();
} 
```

以为您在数组中指定了名称“对象”，我假设它们是类名。不能使用实例调用静态函数。

# sql - 如果 Column 为 ISNULL，则将别名设置为 No Project

> ID：12802833
> 
> 赞同：2
> 
> 时间：2012-10-09T14:54:55.387
> 
> 标签：sql

我正在尝试编写一个存储过程来选择 ProjectID，然后在 Obout 网格中按 ProjectID 自动分组。如果 ProjectID 为 ISNULL，则应将其分组在“No Project”下，即列名。我的sql技能生疏了，不胜感激。谢谢。

```
 SELECT Media.ProjectID ((ProjectID+ISNULL("NO PROJECT")AS "No Project"))
FROM Media 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:56:52.857

你的意思是这样的？

```
SELECT ProjectID, 
    CASE WHEN ProjectID IS NULL THEN 'No Project' ELSE NULL END AS "No Project"
FROM Media 
```

* * *

在不确切知道您要做什么的情况下，我可能想提出类似的建议 - 这将获得项目 ID 和组名（不确定您是否需要演员表）：

```
SELECT ProjectID, 
    CASE WHEN ProjectID IS NULL THEN 'No Project' 
         ELSE CAST(ProjectID AS VARCHAR(20)) END AS "Group"
FROM Media 
```

或者，使用 COALESCE 运算符（不确定您的确切方言）：

```
SELECT ProjectID, COALESCE(CAST(ProjectID AS VARCHAR(20)), 'No Project') AS "Group"
FROM Media 
```

# asp.net - 对齐 .aspx 按钮

> ID：12802834
> 
> 赞同：1
> 
> 时间：2012-10-09T14:54:55.420
> 
> 标签：asp.net, css

我有一个更新面板，其中包含一个标签、一个 dropDownList 和两个按钮：

```
 <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <div id="dropDownList" style="position:relative;" runat="server">
            <label>
                    Select New File: </label>
                    <div id="ddl" runat="server">
                <asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsMyCaseFiles" DataTextField="Display"
                    DataValueField="FileID" OnPreRender="ddl_PreRender" Width="524px" OnSelectedIndexChanged="ddlCaseFiles_SelectedIndexChanged" />
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="ddlCaseFiles"
                    ToolTip="Casefile Required" InitialValue="-1" Text="*" Display="Dynamic" />
                <ajaxToolkit:ListSearchExtender ID="ddlExtCaseFiles" runat="server" PromptCssClass="ListSearchExtenderPrompt"
                    TargetControlID="ddlCaseFiles" BehaviorID="ddlExtCaseFiles" Enabled="True" />
                    </div>
                <br />
                <asp:Button ID="btnMoveCaseFile" runat="server" Text="" 
                   style="float:left;" onclick="btnMoveCaseFile_Click"/>
                <asp:Button ID="btnCancel" runat="server" Text="Cancel" 
                   style="float:right" onclick="btnCancel_Click"/>
                   <br />
            </div>
                   <asp:Label runat="server" ID="lblStatus"></asp:Label>
        </ContentTemplate> 
```

我试图让我的按钮像这样排列：（DropDownList开头的按钮和结尾的按钮） ![在此处输入图像描述](../Images/54085281428f088c9f24974dac1c6137.png)

我试过浮动绝对等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:28:31.143

我想到了。好像你必须在数字后添加 px ......

```
 <asp:Button ID="btnMoveCaseFile" runat="server" Text="" 
                   style="position:absolute; float:left; margin-left:104px;" onclick="btnMoveCaseFile_Click"/>
                <asp:Button ID="btnCancel" runat="server" Text="Cancel" 
                   style="position:relative; float:right; margin-right:63px;" 
```

因为我有 margin-right:63; 而不是 margin-right:63px;

# c# - 使用 NetworkCredentials 的表单身份验证失败

> ID：12802838
> 
> 赞同：0
> 
> 时间：2012-10-09T14:55:20.060
> 
> 标签：c#, forms-authentication

这是我用来验证自己并采取行动的方法：

```
var uri = new Uri(@"http://localhost:5898/forums/AddPost/1");
var request = WebRequest.Create(uri);
request.Credentials = new CredentialCache { { new Uri(@"http://localhost:5898/Account/Login"), "Basic", new NetworkCredential("asdf", "ghijkl") } };
request.Method = "POST";

const string strPost = "Content=TestAplikacji&AddedValue=0";
StreamWriter myWriter = null;

request.ContentLength = strPost.Length;
request.ContentType = "application/x-www-form-urlencoded";

string response;
try
{
    myWriter = new StreamWriter(request.GetRequestStream());
    myWriter.Write(strPost);
}
catch
{

}
finally
{
    if (myWriter != null) myWriter.Close();
}

var objResponse = (HttpWebResponse)request.GetResponse();
using (var sr = new StreamReader(objResponse.GetResponseStream()))
{
    response = sr.ReadToEnd();
    sr.Close();
} 
```

当代码执行时，在`response`我得到登录名和密码的验证错误。但是我提供的登录名和密码 ( `"asdf", "ghijkl"`) 满足了这些要求，这意味着`http://localhost:5898/Account/Login`没有收到我提供的凭据。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:00:57.797

我相信，如果您想使用网络凭据，您应该使用 Windows 身份验证/基本身份验证。

对于表单身份验证，您需要像浏览器所做的那样将`username`and发布到页面并从响应中读取身份验证 cookie。`password`您应该使用此 cookie 与经过身份验证的页面进行进一步通信

# iphone - 不使用 UISplitViewController 手动创建拆分视图布局

> ID：12802842
> 
> 赞同：1
> 
> 时间：2012-10-09T14:55:34.257
> 
> 标签：iphone, ios, ipad, ios5

我正在深入研究 iOS 开发，并且正在尝试创建一个使用拆分视图布局的 iPad 应用程序，而不使用 UISplitViewController。我发现[这个问题](https://stackoverflow.com/questions/7666448/custom-uisplitviewcontroller)已经发布，但它太模糊了，无法帮助我了解我目前的 iOS 体验水平。

简而言之，我有一个名为 MySplitViewController 的 UIViewController 类，它包含两个子视图控制器，一个用于主视图，一个用于详细视图。我试图以这样一种方式实现这一点，即当我将 MySplitViewController 的一个实例推送到导航堆栈上时，我在左侧得到一个表视图（主视图），在左侧得到一个详细视图。但是，当我运行我的代码时，整个拆分视图都充满了表格视图。如何手动创建拆分视图布局？这是我的三个视图控制器类，它们非常简单......

**MySplitViewController.m**

```
#import "MySplitViewController.h"
#import "MasterViewController.h"
#import "DetailViewController.h"

@interface MYSplitViewController (){}

@property (nonatomic, strong) MasterViewController *masterViewController;
@property (nonatomic, strong) DetailViewController *detailViewController;

@end

@implementation MySplitViewController

- (id)initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if (self) {
      self.masterViewController = [[MasterViewController alloc] initWithNibName:nil bundle:nil];
      self.detailViewController = [[DetailViewController alloc] initWithNibName:nil bundle:nil];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.frame = CGRectMake(0, 0, 768, 1004);
    [self.view addSubview:self.masterViewController.view];
    [self.masterViewController viewDidLoad];
    [self.view addSubview:self.detailViewController.view];
    [self.detailViewController viewDidLoad];
}

@end 
```

**主视图控制器.m**

```
#import "MasterViewController.h"

@interface MasterViewController ()

@end

@implementation MasterViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    UITableView *table = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 100, 1004) style:UITableViewStylePlain];
    table.dataSource = self;
    table.delegate = self;
    [self.view addSubview:table];
}

@end 
```

**细节视图控制器.m**

```
#import "DetailViewController.h"

@interface DetailViewController ()

@end

@implementation DetailViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    UIView *uiview = [[UIView alloc] initWithFrame:CGRectMake(100, 0, 668, 1004)];
    [self.view addSubview:uiview];
}

@end 
```

我不明白什么？

非常感谢您的智慧！

PS 值得注意的是为什么我没有使用 UISplitViewController。我的应用程序当前设计为根视图不是拆分视图。我的应用程序的根视图将导致拆分视图被推送到导航堆栈。问题在于 UISplitViewController 被设计为应用程序的根视图，Apple 的文档特别指出，如果您使用 UISplitViewController，它需要成为根视图。因此，我正在实现自己的拆分视图并手动管理视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:01:35.670

您可能想尝试 MGSplitViewController，它也基于 UIViewController.. 并允许推送.. [MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:03:47.183

也许考虑以不同的方式显示您的根视图可以帮助您。例如像这样：使用 a`UISplitViewController`作为根视图，并在其上使用当前的根视图呈现模态视图。因此，您使用当前的根视图和`UISplitViewController`.

# delphi - RemObjects Hydra 插件无法直接处理 WM_DEVICECHANGE Windows 消息

> ID：12802847
> 
> 赞同：2
> 
> 时间：2012-10-09T14:55:54.907
> 
> 标签：delphi, plugins, interface, message, hydra

我创建一个 Hydra 主机应用程序和一个 Hydra 插件。我在插件中放置了一个处理 Windows 消息的过程；但在这种情况下，我们无法处理此 Windows 消息。为了解决这个问题，我们可以在 Host App 中处理它，然后我们必须通过传递一个接口来与插件对话。在这种情况下，我想在 Hydra Plugin 中找到一种直接处理 windows 消息的方法。请帮我解决这个问题。

**此问题的更新 1：** 这是一个简单的测试代码：

**插件方面：**

```
unit VisualPlugin;

interface

uses
  { vcl: } Windows, Messages, SysUtils, Variants, Classes, Graphics,
  Controls, Forms, Dialogs, StdCtrls,
  { Hydra: } uHYVisualPlugin, uHYIntf;

type
  TVisualPlugin1 = class(THYVisualPlugin)
  private

    procedure WMDEVICECHANGE(var Msg: TMessage); message WM_DEVICECHANGE;

  end;

implementation

uses
  { Hydra: } uHYPluginFactories;
{$R *.dfm}

procedure Create_VisualPlugin1(out anInstance: IInterface);
begin
  anInstance := TVisualPlugin1.Create(NIL);
end;

resourcestring
  sDescription = '';

const
  sRequiredPrivilege = '';
  sUserData = '';

  { TVisualPlugin1 }

procedure TVisualPlugin1.WMDEVICECHANGE(var Msg: TMessage);
begin
  // ===================================
  // This Line Of Code Can't Be Run!!!!!!
  ShowMessage('USB Changed');

  // ===================================
end;

initialization

THYPluginFactory.Create(HInstance, 'VisualPlugin1', Create_VisualPlugin1,
  TVisualPlugin1, 1, 0, sRequiredPrivilege, sDescription, sUserData);

end. 
```

**插件端的 PluginController：**

```
unit hcPluginController;

interface

uses
  {vcl:} SysUtils, Classes, 
  {Hydra:} uHYModuleController, uHYIntf, uHYCrossPlatformInterfaces;

type
  TPluginController = class(THYModuleController)
  private
  public
  end;

var
  PluginController : TPluginController;

implementation

uses
  {Hydra:} uHYRes;

{$R *.dfm}

procedure HYGetCrossPlatformModule(out result: IHYCrossPlatformModule); stdcall;
begin
  result := PluginController as IHYCrossPlatformModule;
end;

function HYGetModuleController : THYModuleController;
begin
  result := PluginController;
end;

exports
  HYGetCrossPlatformModule,
  HYGetModuleController name name_HYGetModuleController;

resourcestring
  sDescription = '';

const
  sRequiredPrivilege = '';

initialization
  PluginController := TPluginController.Create('Plugin.Library', 1, 0, sRequiredPrivilege, sDescription);

finalization
  FreeAndNil(PluginController);

end. 
```

**主机应用端：**

```
unit fMain;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, uHYModuleManager, uHYIntf, ExtCtrls, StdCtrls;

type
  TMainForm = class(TForm)
    HYModuleManager1: THYModuleManager;
    Panel1: TPanel;
    btnLoadPlugin: TButton;
    procedure btnLoadPluginClick(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainForm: TMainForm;

implementation

{$R *.dfm}

var
  AppDir: string;
  fPlugin: IHYVisualPlugin;

const
  PluginDll = 'Plugin.dll';
  PluginName = 'VisualPlugin1';

procedure TMainForm.btnLoadPluginClick(Sender: TObject);
begin
  if HYModuleManager1.FindModule(AppDir + PluginDll) = nil then
    HYModuleManager1.LoadModule(AppDir + PluginDll);

  HYModuleManager1.CreateVisualPlugin(PluginName, fPlugin, Panel1);
end;

procedure TMainForm.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  HYModuleManager1.ReleaseInstance(fPlugin);
  HYModuleManager1.UnloadModules;
end;

procedure TMainForm.FormCreate(Sender: TObject);
begin
  AppDir := ExtractFilePath(Application.ExeName);
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T10:39:15.703

不确定问题的真正原因，但您可以使用 RegisterDeviceNotification 函数来实现相同的结果：

```
type
  DEV_BROADCAST_DEVINTERFACE = record
    dbcc_size: DWORD;
    dbcc_devicetype: DWORD;
    dbcc_reserved: DWORD;
    dbcc_classguid: TGUID;
    dbcc_name: short;
  end;

const
  DEVICE_NOTIFY_ALL_INTERFACE_CLASSES = $4;
  DBT_DEVTYP_DEVICEINTERFACE = $5;

function RegisterNotification(Handle: THandle): HDEVNOTIFY;
var
  Filter: DEV_BROADCAST_DEVINTERFACE;
begin
  ZeroMemory(@Filter, SizeOf(DEV_BROADCAST_DEVINTERFACE));
  Filter.dbcc_size := SizeOf(DEV_BROADCAST_DEVINTERFACE);
  Filter.dbcc_devicetype :=  DBT_DEVTYP_DEVICEINTERFACE;
  Filter.dbcc_reserved := 0;
  Filter.dbcc_name := 0;

  Result := RegisterDeviceNotification(Handle, @Filter, DEVICE_NOTIFY_WINDOW_HANDLE or DEVICE_NOTIFY_ALL_INTERFACE_CLASSES);
end; 
```

现在在插件里面你需要这样的东西：

```
 TVisualPlugin = class(THYVisualPlugin)
  protected
    NofitifyHandle: HDEVNOTIFY;
    procedure WMDEVICECHANGE(var Msg: TMessage); message WM_DEVICECHANGE;
    procedure CreateWnd; override;
    procedure DestroyWindowHandle; override;
  end;

procedure TVisualPlugin.CreateWnd;
begin
  inherited;
  if HandleAllocated then
    NofitifyHandle := RegisterNotification(Self.Handle);
end;

procedure TVisualPlugin.DestroyWindowHandle;
begin
  if Assigned(NofitifyHandle) then begin
    UnregisterDeviceNotification(NofitifyHandle);
    NofitifyHandle := nil;
  end;
  inherited;
end;

procedure TVisualPlugin.WMDEVICECHANGE(var Msg: TMessage);
begin
  ShowMessage('USB Changed');
end; 
```

# ruby-on-rails - 数组到 mongoid 标准

> ID：12802849
> 
> 赞同：0
> 
> 时间：2012-10-09T14:55:55.400
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, mongoid

此查询返回一个`Array`on users 变量：

```
users = @users.flat_map {|b| b.followees_by_type('aged') } 
```

我需要将此过滤器应用于`users`：

```
olds = users.any_of({ :image_filename.ne => nil }, { :yt_video_id.ne => nil}).all_of(:active.ne => false) 
```

但我不能申请，因为是一个数组。

**是否可以更改此数组的 mongoid 标准？还有其他解决方案吗？**

注意重要！我无法修改输出类类型`b.followees_by_type('aged')`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:56:36.087

根据我的评论，您应该使用`@users`which is a`Mongoid::Criteria`而不是`users`which is just an `Array`。

# java - 编写 jmx 服务器时出现 serviceUnaviableException

> ID：12802851
> 
> 赞同：0
> 
> 时间：2012-10-09T14:56:05.237
> 
> 标签：java, jmx

我在编写 jmx 服务器时遇到问题。

我无法绑定到 url [rmi:localhost:9999/server]，在以下行中出现异常：

```
JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://localhost:9999/server");
JMXConnectorServer cs = JMXConnectorServerFactory.newJMXConnectorServer(url,null,mbs);
// i get the exception in the next line
cs.start(); 
```

顺便说一句，我在 vm 变量中正确定义了端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:04:48.640

我认为您的程序中需要以下代码。

> LocateRegistry.createRegistry(9999);
> 
> HashMap env = new HashMap();
> 
> SslRMIClientSocketFactory csf = new SslRMIClientSocketFactory();
> 
> SslRMIServerSocketFactory ssf = new SslRMIServerSocketFactory(); env.put(RMIConnectorServer.RMI_CLIENT_SOCKET_FACTORY_ATTRIBUTE, csf); env.put（RMIConnectorServer.RMI_SERVER_SOCKET_FACTORY_ATTRIBUTE，ssf）；JMXConnectorServer cs = JMXConnectorServerFactory.newJMXConnectorServer(url,env,mbs);

# android - Twitter 集成适用于大多数设备在某些设备上抛出 twitter.getAccountSettings() 异常

> ID：12802852
> 
> 赞同：-1
> 
> 时间：2012-10-09T14:56:07.427
> 
> 标签：android, twitter, twitter-oauth, twitter4j

我已经集成`twitter API`到我的 android 应用程序中，是的，它适用于大多数设备。

但是在`login`成功完成之后的某些设备上，在发推文之前，我再次使用`isAuthenticated()`进一步调用`twitter.getAccountSettings();`抛出异常进行检查。

引发异常的日志如下所示。

```
 10-09 20:08:09.030: W/System.err(22614): -1:
        10-09 20:08:09.030: W/System.err(22614): Relevant discussions can be on the Internet at:
        10-09 20:08:09.040: W/System.err(22614):    http://www.google.co.jp/search?q=0ae6f91b or
        10-09 20:08:09.040: W/System.err(22614):    http://www.google.co.jp/search?q=029022e3
        10-09 20:08:09.040: W/System.err(22614): TwitterException{exceptionCode=[0ae6f91b-029022e3], statusCode=-1, retryAfter=0, rateLimitStatus=null, version=2.1.11}
        10-09 20:08:09.040: W/System.err(22614):    at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:199)
        10-09 20:08:09.040: W/System.err(22614):    at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:75)
        10-09 20:08:09.040: W/System.err(22614):    at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:103)
        10-09 20:08:09.040: W/System.err(22614):    at twitter4j.Twitter.getAccountSettings(Twitter.java:1440)
        10-09 20:08:09.040: W/System.err(22614):    at com.ocatalog.socialmedia.twitter.TwitterUtils.isAuthenticated(TwitterUtils.java:24)
        10-09 20:08:09.040: W/System.err(22614):    at com.ocatalog.SettingsActivity$CheckCredentailTask.doInBackground(SettingsActivity.java:320)
        10-09 20:08:09.040: W/System.err(22614):    at com.ocatalog.SettingsActivity$CheckCredentailTask.doInBackground(SettingsActivity.java:1)
        10-09 20:08:09.040: W/System.err(22614):    at android.os.AsyncTask$2.call(AsyncTask.java:252)
        10-09 20:08:09.040: W/System.err(22614):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        10-09 20:08:09.040: W/System.err(22614):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        10-09 20:08:09.040: W/System.err(22614):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
        10-09 20:08:09.040: W/System.err(22614):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
        10-09 20:08:09.040: W/System.err(22614):    at java.lang.Thread.run(Thread.java:1020) 
```

任何帮助都会被证明是一个福音，因为我无法理解某些设备上的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:42:10.453

我意识到这仅仅是因为我超过了 twitter 提供的帖子的限制。

由于错误消息没有解释任何内容，这真的很令人困惑，如果有人遇到相同类型的问题，请等待 24 小时让您的应用程序重新开始工作。

而且我不明白为什么它只在某些设备上失败，而不是全部失败，如果有任何人得到这个答案，请告诉我。

# java - jxls - 创建带有动态图像的 Excel 文件

> ID：12802854
> 
> 赞同：3
> 
> 时间：2012-10-09T14:56:13.743
> 
> 标签：java, image, jxls

我想创建一个带有动态徽标和动态图像列表的 Excel 文件。在 Excel 文件中创建文本部分非常适用于 jxls。但是我无法使用 jxls 在每一行中插入一个图像。

请问，有人给我建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:01:11.510

我发现的唯一解决方案是使用 JXLS 创建 XLS 文件，并在创建工作簿后插入带有本机 POI 函数的图像，例如：

```
Workbook resultWorkbook = transformer.transformXLS(is, beans);

        Iterator rowIter = resultWorkbook.getSheetAt(0).rowIterator();
        while (rowIter.hasNext()){
            HSSFRow row = (HSSFRow) rowIter.next();
            Iterator cellIter = row.cellIterator();
            while (cellIter.hasNext()){
                HSSFCell cell = (HSSFCell) cellIter.next();
                final String IMG_PREFIX = "#IMG#";
                if(cell.toString().startsWith(IMG_PREFIX)){
                    String cellValue = cell.toString();
                    cell.setCellValue("");
                    String imagePath = cellValue.replaceFirst(IMG_PREFIX, "");
                    File imageFile = new File(imagePath);
                    if(imageFile.exists()){
                        FileInputStream isi = new FileInputStream(imageFile);
                        ImageTools imageTools = new ImageTools();
                        byte[] imgBytes = imageTools.resizeImage(isi, 100);
                        int pictureIdx = resultWorkbook.addPicture(imgBytes, Workbook.PICTURE_TYPE_JPEG);
                        CreationHelper helper = resultWorkbook.getCreationHelper();

                        Drawing drawing = resultWorkbook.getSheetAt(0).createDrawingPatriarch();
                        ClientAnchor anchor = helper.createClientAnchor();
                        anchor.setCol1(cell.getColumnIndex());
                        anchor.setRow1(cell.getRowIndex());
                        Picture pict = drawing.createPicture(anchor, pictureIdx);
                        pict.resize();
                        isi.close();
                    }
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T08:57:17.830

我已经解决了这个问题。以下是提示： `jx:each(items="persons" var="person" lastCell="G2" direction="DOWN")`

```
jx:image(lastCell="F2" src="person.portrait") 
```

希望对你有效。

# video-streaming - 如何阻止 IDM 抓取视频/音频

> ID：12802862
> 
> 赞同：10
> 
> 时间：2012-10-09T14:56:38.823
> 
> 标签：video-streaming, audio-streaming, packet-capture

每次视频/音频流启动时，[Internet 下载管理器 (IDM)](http://www.internetdownloadmanager.com/)都会感觉页面上有多媒体内容，并允许您下载该多媒体内容。

我认为不可能阻止 IDM 抓取视频/音频，但是有没有办法欺骗 IDM 以获取错误的视频，或者让 IDM 很难猜测哪个是真正的视频/音频播放？

编辑：实际上我的问题是从服务器端的角度来看，而不是运行 IDM 的客户端。所以我想这里的误解是我的错。这里有很多好的答案，但不是我要找的答案

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-23T12:32:49.937

您需要打开“选项->常规”IDM 对话框，然后按“在浏览器中自定义 IDM 下载面板”附近的“编辑”。

![](../Images/35860f2c2e636ba9a2f90674701091c6.png)

然后启用“不要自动从网络播放器开始下载”选项（图像上的箭头 1）并按“确定”（图像上的箭头 2）。

![](../Images/285833aef1eb8fdd50b203a10fe6de70.png)

* * *

来源： http: [//www.internetdownloadmanager.com/register/new_faq/video14.html](http://www.internetdownloadmanager.com/register/new_faq/video14.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T21:20:58.943

您可以使用两种方式阻止 IDM 开始下载，

1.  第一种方法是指定 IDM 应该自动抓取的文件类型，因此您可以排除某些文件类型，例如“MP3”或“MP4”。要进行该配置，您必须单击 IDM 主 GUI 中的“下载”菜单，然后选择“选项”，将出现一个新的小窗口，从中选择“文件类型”选项卡。现在在第一个文本输入框中，您可以添加或删除您想要的文件类型

2.  第二种方法是指定 IDM 不应自动从它们下载的某些站点。您可以在以前的方式中找到文本框下方的输入文本框，您可以将其用于该目的。例如，您可以添加如下内容：dropbox.com 以防止从 Dropbox 网站自动下载

笔记：

*   在第一种方式中，当目标文件类型未列在自动抓取类型列表中时，您可以强制 IDM 从特定链接下载。为此，您应该首先单击“选项”窗口中“常规”选项卡中的“键...”按钮，然后在出现的窗口中勾选第二个选项，这将允许您指定在单击所需链接时可以保留的某个键，以强制 IDM 开始下载

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-07T16:12:09.107

You need to open `Options->General` IDM dialog and press `Edit` near `Customize IDM download panels in browsers`.

Then enable `Don't start downloading from web-players automatically` option (arrow 1 on the image) and press `OK`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-18T20:04:29.723

您可以通过转到选项>常规来停止从浏览器自动捕获并取消选中您当前使用的浏览器，这将阻止任何下载自动开始

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-05T09:15:33.297

如果您想暂时禁用 IDM 进行单次下载，您可以`Alt` 在单击下载链接时按住按钮以防止 IDM 进行下载。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-07-06T15:53:28.343

您可以`Alt`在下载文件时按 键。

# eclipse - 在eclipse中同时使用groovy插件和jboss工具

> ID：12802867
> 
> 赞同：0
> 
> 时间：2012-10-09T14:56:51.360
> 
> 标签：eclipse, groovy, jboss, eclipse-plugin

我有一个使用 groovy 和 java 代码的项目。该项目被部署为 jboss 中的一个 war 文件并且它工作正常（至少它部署并且我通过我的浏览器获得了一些输出）。我现在想调试代码，我认为 eclipse 应该可以解决问题。但是，似乎我不能在 Eclipse 中同时使用 groovy 插件和 jboss 插件。是这样吗？有解决方法吗？

系统：

*   Ubuntu Precise Pangolin
*   日蚀朱诺
*   Indigo 的 Jboss 工具（Juno 不稳定）
*   朱诺的 Groovy-eclipse

我安装了 groovy-eclipse，当我尝试安装 Jboss 工具（从标记的位置）时，我得到：

> 正在安装的软件：JBoss Central Community 1.0.1.v20120715-0355-H112-Final (org.jboss.tools.community.central.feature.feature.group 1.0.1.v20120715-0355-H112-Final) 当前安装的软件： VMware vFabric tc Server Integration for Eclipse 3.1.0.201210040536-RELEASE (com.vmware.vfabric.ide.eclipse.tcserver.feature.group 3.1.0.201210040536-RELEASE) 一次只能安装以下其中一项：Mylyn Commons UI 3.6。 1.v20110720-0100 (org.eclipse.mylyn.commons.ui 3.6.1.v20110720-0100) Mylyn Commons UI 3.8.2.v20120916-1200 (org.eclipse.mylyn.commons.ui 3.8.2.v20120916-1200 ) Mylyn Commons UI 3.8.0.v20120612-0600 (org.eclipse.mylyn.commons.ui 3.8.0.v20120612-0600) Mylyn Commons UI 3.4.0.v20100608-0100-e3x (org.eclipse.mylyn.commons. ui 3.4.0.v20100608-0100-e3x)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:19:50.573

我自己找到了解决方案。我正在安装一个由 groovy 和 grails 工具和

*   Grails IDE
*   SpringSource
*   VMware vFabric

导致与 jboss 工具的冲突。因为我只需要 groovy 编译器，所以我可以取消勾选这些。我想我也可以选择不同的包。

# c# - C#：如何向本地网络中的特定 IP 地址发送/接收字符串

> ID：12802870
> 
> 赞同：-2
> 
> 时间：2012-10-09T14:56:57.143
> 
> 标签：c#, string, network-programming, ip

我想做一个像即时通讯工具一样工作的程序，我已经完成了，但我不知道如何向特定的 IP 地址发送/接收字符串。

我给自己包括了一个方法，这些东西属于：

```
//is called every second and when you commit a message
public void Update(ref eStatus prgmStatus, ref eProfile userProfile)
{
    UpdateUI(ref prgmStatus);
    [ Some other Update Methods ]
    [ Catch the string and add it to userProfile.CurrentChatHistory]
}

public void EnterText(object sender, EventArgs e)
{
    _usrProfile.CurrentChatHistory.Add(chatBox.Text);
    [ send chatBox.Text to IP 192.168.0.10 (e.g.) ]
} 
```

我想在不运行任何额外服务器软件的情况下使用客户端到客户端系统。

我可以使用哪些系统命名空间和方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:02:38.073

System.Net 命名空间是您需要查看的地方。

如果您正在进行点对点聊天，您可能需要将消息发送到多个 IP 地址，而没有中央服务器，那么最好使用 UDP。

从您的评论中看到您没有中央服务器，我建议您至少在最初使用 UDP 来快速启动。[UdpClient 类](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient%28v=VS.100%29.aspx)是您的朋友，它允许您将数据包发送到任何指定的网络地址。

您基本上可以创建一个新的 UdpClient 实例，将要绑定的已知端口号传递到构造函数中。

然后，使用 Receive 方法读取该端口上的数据包。

然后，您还可以在同一实例上使用 Send 方法将数据包发送到网络地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:05:05.793

我不久前发布了另一个问题。如果您想使用 .Net4.5 的 async/await 功能，这里有一个简单的 echoserver 可以帮助您入门：

```
void Main()
{
    CancellationTokenSource cts = new CancellationTokenSource();
    TcpListener listener = new TcpListener(IPAddress.Any,6666);
    try
    {
        listener.Start();
        AcceptClientsAsync(listener, cts.Token);
        Thread.Sleep(60000); //block here to hold open the server
    }
    finally
    {
        cts.Cancel();
        listener.Stop();
    }

    cts.Cancel();
}

async Task AcceptClientsAsync(TcpListener listener, CancellationToken ct)
{
    while(!ct.IsCancellationRequested)
    {
        TcpClient client = await listener.AcceptTcpClientAsync();
        EchoAsync(client, ct);
    }

}
async Task EchoAsync(TcpClient client, CancellationToken ct)
{
    var buf = new byte[4096];
    var stream = client.GetStream();
    while(!ct.IsCancellationRequested)
    {
        var amountRead = await stream.ReadAsync(buf, 0, buf.Length, ct);
        if(amountRead == 0) break; //end of stream.
        await stream.WriteAsync(buf, 0, amountRead, ct);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:06:44.787

[您必须使用System.Net.Socket](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)类创建客户端/服务器体系结构。

服务器可以是第三台计算机或其中一台。如果您选择第二个选项，第一个开始聊天的人必须在特定端口上运行侦听套接字，第二个必须使用 IP 地址和端口连接到它。

# java - 在 Java 接口中处理 equals 和 hashCode 的微妙之处

> ID：12802872
> 
> 赞同：2
> 
> 时间：2012-10-09T14:57:03.350
> 
> 标签：java, equals, hashcode

我正在为这些接口实现一个值对象：

```
interface FooConsumer
{
    public void setFoo(FooKey key, Foo foo);
    public Foo getFoo(FooKey key);
}

// intent is for this to be a value object with equivalence based on 
// name and serial number
interface FooKey
{
    public String getName();
    public int getSerialNumber();
} 
```

从我读过的内容来看（例如在接口中[强制执行“equals”和接口中的](https://stackoverflow.com/questions/3012081/enforce-equals-in-an-interface)toString [()、equals() 和 hashCode()](https://stackoverflow.com/questions/1718112/tostring-equals-and-hashcode-in-an-interface)）看起来建议是提供一个抽象基类，例如

```
abstract class AbstractFooKey
{
    final private String name;
    final private int serialNumber
    public AbstractFooKey(String name, int serialNumber)
    {
       if (name == null)
          throw new NullPointerException("name must not be null");
       this.name = name;
       this.serialNumber = serialNumber;
    }
    @Override public boolean equals(Object other)
    {
       if (other == this)
          return true;
       if (!(other instanceof FooKey))
          return false;
       return getName().equals(other.getName() 
          && getSerialNumber() == other.getSerialNumber()
          && hashCode() == other.hashCode();       // ***
    }
    @Override public int hashCode()
    {
       return getName().hashCode() + getSerialNumber()*37;
    }
} 
```

我的问题是关于我在这里添加的最后一点，以及如何处理用`AbstractFooKey.equals(x)`一个值调用的情况，`x`它是一个实现`FooKey`但没有子类的类的实例`AbstractFooKey`。我不知道如何处理这个；一方面，我觉得相等的语义应该只取决于 name 和 serialNumber 是否相等，但看起来 hashCodes 也必须相等才能满足 Object.equals() 的合同。

我可以做：

1.  真的很松懈，只是忘记了标记的线`***`
2.  松懈并保留我所拥有的
3.  如果对象不是`false`_`equals()``other``AbstractFooKey`
4.  真的很严格并摆脱接口 FooKey 并将其替换为最终类吗？
5.  别的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:13:08.797

将所需的语义记录为合同的一部分。

理想情况下，您实际上会有一个最终的实现，这否定了*为此特定目的*需要接口。您可能有其他原因需要该类型的接口。

的合同要求`Object`实际上来自`hashCode`：`If two objects are equal according to the equals(Object) method, then calling the hashCode method on each of the two objects must produce the same integer result.`

您不需要包含`hashCode`在`equals`计算中，而是需要包含计算中涉及的所有`equals`属性`hashCode`。在这种情况下，我会简单地比较`serialNumber`and`name`两者中的`equals`and `hashCode`。

保持简单，除非你有真正的理由让它复杂化。

从一个最终的、不可变的类开始。

如果您需要一个接口，请创建一个与之匹配的接口，并记录语义和默认实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:06:52.367

对于 equals 和 hashmap，有严格的约定：

1.  **Reflexive** - 它只是意味着对象必须等于它自己，它在任何给定的实例中都是如此；除非您故意重写 equals 方法以使其行为不同。

2.  **对称**- 这意味着如果一个类的对象等于另一个类对象，则另一个类对象必须等于该类对象。换句话说，一个对象不能单方面决定它是否等于另一个对象；两个对象，以及它们所属的类，必须双边决定它们是否相等。他们都必须同意。

3.  **传递**性——表示如果第一个对象等于第二个对象，第二个对象等于第三个对象；那么第一个对象等于第三个对象。换句话说，如果两个对象同意它们是平等的，并且遵循对称原则，那么它们中的一个不能决定与另一个不同类的对象具有相似的契约。对于这三类的各种排列，这三者必须一致并遵循对称原则。

4.  **一致**- 这意味着如果两个对象相等，则只要它们不被修改，它们就必须保持相等。同样，如果它们不相等，只要它们未被修改，它们就必须保持不相等。修改可以发生在其中任何一个或两者中。

5.  **null 比较**- 这意味着任何可实例化的类对象都不等于 null，因此如果将 null 作为参数传递给 equals 方法，则该方法必须返回 false。如果将 null 作为参数传递给它，您必须确保您的 equals 方法的实现返回 false。

hashCode() 的合约：

1.  **同一执行期间的一致性**- 首先，它声明 hashCode 方法返回的哈希码在应用程序的同一执行期间必须始终保持相同，只要不修改对象以影响 equals 方法。

2.  **Hash Code & Equals 关系**- 合约的第二个要求是由 equals 方法指定的要求的 hashCode 对应项。它只是强调相同的关系——相等的对象必须产生相同的哈希码。然而，第三点阐述了不相等的对象不需要产生不同的哈希码。

（来自：[Technofundo：等于和哈希码](http://www.technofundo.com/tech/java/equalhash.html)）

但是，在 equals 中使用**instanceof**并不是正确的做法。Joshua Bloch 在 Effective Java 中详细介绍了这一点，您对 equals 实现有效性的担忧是有效的。最有可能的是，当与基类的后代一起使用时，使用 instanceof 引起的问题将违反合同中的传递性部分——除非将 equals 函数设为 final。

（比我在这里做的要详细一点：[Stackoverflow：任何理由在生成 .equals() 时更喜欢 getClass() 而不是 instanceof？](https://stackoverflow.com/questions/596462/any-reason-to-prefer-getclass-over-instanceof-when-generating-equals)）

另请阅读：

*   [Java API 等同于合约](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)
*   [Java API hashCode 合约](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:08:06.603

如果 FooKey 的相等性使得两个具有相同名称和序列号的 FooKey 被认为是相等的，那么您可以删除 equals() 子句中比较哈希码的行。

或者你可以把它留在里面，假设 FooKey 接口的所有实现者都正确实现了 equals 和 gethashcode 并不重要，但我建议删除它，否则代码的读者可能会觉得它在那里，因为它会有所作为，而实际上却没有。

您也可以去掉 gethashcode 方法中的 '*37'，它不太可能有助于更好的哈希码分布。

关于你的问题 3，我会说不，不要那样做，除非 FooKey 的平等合同不受你控制（在这种情况下，试图强制执行接口的平等合同无论如何都是有问题的）

# jquery - slideDown/slideUp 导航在 IE9 中显示奇怪

> ID：12802874
> 
> 赞同：1
> 
> 时间：2012-10-09T14:57:08.497
> 
> 标签：jquery, internet-explorer, internet-explorer-9, slidedown, slideup

[http://cougar.thepixelshopdev.ca/](http://cougar.thepixelshopdev.ca/)
我有一个简单的子导航，它使用 jquery 在“解决方案”悬停时向上/向下滑动：

```
$(document).ready(function() {

    $("li.page-item-6").mouseover(function(){
        $('#dropdown-contain').clearQueue().slideDown();
        $("#dropdown-contain").mouseover(function(){
            $('#dropdown-contain').stop().css('display', 'block');
        });
    });

    $("#dropdown-contain").mouseout(function(){
        $('#dropdown-contain').clearQueue().slideUp();
    });

}); 
```

它在所有其他浏览器中都可以正常工作，包括 IE8 和 7。在 IE9 中，第一次悬停时，它开始在页面下方向下滑动几百像素，而不是应该的位置，当它完成滑动时会弹回它应该在的位置. 当您第二次和之后每次将鼠标悬停在它上面时，它都会继续向上/向下滑动几百个像素，进一步向下滑动页面。

这是IE9中的错误吗？非常感谢任何意见或建议！

# google-bigquery - Big Queries 的最大行大小是多少？

> ID：12802882
> 
> 赞同：3
> 
> 时间：2012-10-09T14:57:42.143
> 
> 标签：google-bigquery

尝试将数据加载到大查询表中时，我收到一条错误消息，告诉我一行大于允许的最大大小。我在文档的任何地方都找不到这个限制。极限是多少？有没有解决方法？

该文件是压缩的json，大小为360M。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-06-14T16:40:56.567

2018 年更新：最大行大小为 100 MB。[https://cloud.google.com/bigquery/quotas](https://cloud.google.com/bigquery/quotas)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T21:41:25.987

2013 年更新：最大行大小为 1MB，JSON 为 20MB。

请参阅：[https ://developers.google.com/bigquery/preparing-data-for-bigquery#dataformats](https://developers.google.com/bigquery/preparing-data-for-bigquery#dataformats)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T17:08:16.637

The maximum row size is 64k. See: [https://developers.google.com/bigquery/docs/import#import](https://developers.google.com/bigquery/docs/import#import)

The limitation for json will likely increase soon.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T10:48:25.433

2017 年更新：10MB 用于 CSV 和 JSON。[https://cloud.google.com/bigquery/quotas#import](https://cloud.google.com/bigquery/quotas#import)

如果流式传输，则 1MB 除外，[https://cloud.google.com/bigquery/quotas#streaminginserts](https://cloud.google.com/bigquery/quotas#streaminginserts)

# python - MySQLdb executemany不添加数据

> ID：12802883
> 
> 赞同：4
> 
> 时间：2012-10-09T14:57:42.637
> 
> 标签：python, mysql, mysql-python

我正在尝试使用 MySQLdb executemany 命令将数据添加到表（test_copy），如下所示：

```
db = mdb.connect(host="127.0.0.1",port=3306,user='XXXX',db="test")
cursor = db.cursor()
COM = "insert into test_copy (Short_Model) VALUES (%s)"
VALS = ['213','3232','fd','sadad']
cursor.executemany(COM,VALS)
cursor.close 
```

注意：表名 = test_copy，列名 = Short_Model

问题是命令运行没有任何错误，但是当我检查表时没有添加数据。

抱歉，如果这是一个简单的问题，但在过去的几个小时里它让我发疯了。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:11:12.503

谢谢@Jon Clements 和@Abhishek Mishra - 你让我恢复了理智。以下是感兴趣的人的最终解决方案：

```
db = mdb.connect(host="127.0.0.1",port=3306,user='xxxx',db="test")
cursor = db.cursor()
COM = "insert into test_copy (Short_Model) VALUES (%s)"
VALS = ['213','3232','fd','sadad']
cursor.executemany(COM,VALS)
db.commit() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T15:02:13.703

`cursor.close`应该是`cursor.close()`，但您通常只想`cursor.commit()`确保您的更改反映在您的数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:05:26.110

需要`commit()`调用来完成数据库中的事情。文档没有说明是否`executemany`自动提交更改。还打开自动提交，`cursor.autocommit(True)`可能会有所帮助。

# directx - 在 DirectX 调试模式下启用/禁用场景内的纹理抗锯齿

> ID：12802886
> 
> 赞同：0
> 
> 时间：2012-10-09T14:57:52.713
> 
> 标签：directx, antialiasing

我想显示两个原语：

*   第一个显示带有抗锯齿的纹理
*   第二个显示没有抗锯齿的纹理

这是我在每个原始渲染之前设置纹理的代码：

```
device.SetTexture(0, texture);
if(antialiasing)
{
    device.SetSamplerState(0, SamplerState.MinFilter, TextureFilter.Linear);
    device.SetSamplerState(0, SamplerState.MagFilter, TextureFilter.Linear);
}
else
{
    device.SetSamplerState(0, SamplerState.MinFilter, TextureFilter.None);
    device.SetSamplerState(0, SamplerState.MagFilter, TextureFilter.None);
} 
```

它可以工作，但如果我使用 DirectX 调试模式，我会遇到 *D3DERR_UNSUPPORTEDTEXTUREFILTER: Unsupported texture filter* 的异常

我正在使用*SlimDX*，但我认为这段代码无论如何都会在 C++ API 中崩溃。

# c# - 从 C# 中的 IP 获取本地网络上的机器 MAC 地址

> ID：12802888
> 
> 赞同：13
> 
> 时间：2012-10-09T14:58:00.453
> 
> 标签：c#, network-programming, ip, port, mac-address

我正在尝试编写一个函数，该函数将单个`IP address`作为参数并在我的本地网络上查询该机器的`MAC address`.

我已经看到了许多获得本地机器自己的示例`MAC address`，但是没有一个（我发现）似乎查询本地网络机器。

我知道这样的任务是可以实现的，因为这个[LAN 唤醒扫描](http://www.nirsoft.net/utils/wake_on_lan.html)软件扫描本地 IP 范围并返回机器上所有机器的 MAC 地址/主机名。

谁能告诉我从哪里开始尝试编写一个函数来在 C# 中实现这一点？任何帮助，将不胜感激。谢谢

编辑：

根据下面 Marco Mp 的评论，使用了 ARP 表。 [ARP类](http://pietschsoft.com/post/2009/11/08/Resolve_IP_Address_And_Host_Name_From_MAC_Address_using_CSharp_and_Windows_ARP_Utility.aspx)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-08T09:40:34.283

```
public string GetMacAddress(string ipAddress)
{
    string macAddress = string.Empty;
    System.Diagnostics.Process pProcess = new System.Diagnostics.Process();
    pProcess.StartInfo.FileName = "arp";
    pProcess.StartInfo.Arguments = "-a " + ipAddress;
    pProcess.StartInfo.UseShellExecute = false;
    pProcess.StartInfo.RedirectStandardOutput = true;
      pProcess.StartInfo.CreateNoWindow = true;
    pProcess.Start();
    string strOutput = pProcess.StandardOutput.ReadToEnd();
    string[] substrings = strOutput.Split('-');
    if (substrings.Length >= 8)
    {
       macAddress = substrings[3].Substring(Math.Max(0, substrings[3].Length - 2)) 
                + "-" + substrings[4] + "-" + substrings[5] + "-" + substrings[6] 
                + "-" + substrings[7] + "-" 
                + substrings[8].Substring(0, 2);
        return macAddress;
    }

    else
    {
        return "not found";
    }
} 
```

**非常晚的编辑：** 在开源项目 iSpy ( [https://github.com/ispysoftware/iSpy](https://github.com/ispysoftware/iSpy) ) 他们使用这个代码，这更好一点

```
 public static void RefreshARP()
        {
            _arpList = new Dictionary<string, string>();
            _arpList.Clear();
            try
            {
                var arpStream = ExecuteCommandLine("arp", "-a");
                // Consume first three lines
                for (int i = 0; i < 3; i++)
                {
                    arpStream.ReadLine();
                }
                // Read entries
                while (!arpStream.EndOfStream)
                {
                    var line = arpStream.ReadLine();
                    if (line != null)
                    {
                        line = line.Trim();
                        while (line.Contains("  "))
                        {
                            line = line.Replace("  ", " ");
                        }
                        var parts = line.Trim().Split(' ');

                        if (parts.Length == 3)
                        {
                            string ip = parts[0];
                            string mac = parts[1];
                            if (!_arpList.ContainsKey(ip))
                                _arpList.Add(ip, mac);
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                Logger.LogExceptionToFile(ex, "ARP Table");
            }
            if (_arpList.Count > 0)
            {
                foreach (var nd in List)
                {
                    string mac;
                    ARPList.TryGetValue(nd.IPAddress.ToString(), out mac);
                    nd.MAC = mac;    
                }
            }
        } 
```

[https://github.com/ispysoftware/iSpy/blob/master/Server/NetworkDeviceList.cs](https://github.com/ispysoftware/iSpy/blob/master/Server/NetworkDeviceList.cs)

**更新 2 更晚了，但我认为最好，因为它使用正则表达式可以更好地检查精确匹配。**

```
public string getMacByIp(string ip)
{
    var macIpPairs = GetAllMacAddressesAndIppairs();
    int index = macIpPairs.FindIndex(x => x.IpAddress == ip);
    if (index >= 0)
    {
        return macIpPairs[index].MacAddress.ToUpper();
    }
    else
    {
        return null;
    }
}

public List<MacIpPair> GetAllMacAddressesAndIppairs()
{
    List<MacIpPair> mip = new List<MacIpPair>();
    System.Diagnostics.Process pProcess = new System.Diagnostics.Process();
    pProcess.StartInfo.FileName = "arp";
    pProcess.StartInfo.Arguments = "-a ";
    pProcess.StartInfo.UseShellExecute = false;
    pProcess.StartInfo.RedirectStandardOutput = true;
    pProcess.StartInfo.CreateNoWindow = true;
    pProcess.Start();
    string cmdOutput = pProcess.StandardOutput.ReadToEnd();
    string pattern = @"(?<ip>([0-9]{1,3}\.?){4})\s*(?<mac>([a-f0-9]{2}-?){6})";

    foreach (Match m in Regex.Matches(cmdOutput, pattern, RegexOptions.IgnoreCase))
    {
        mip.Add(new MacIpPair()
        {
            MacAddress = m.Groups["mac"].Value,
            IpAddress = m.Groups["ip"].Value
        });
    }

    return mip;
}
public struct MacIpPair
{
    public string MacAddress;
    public string IpAddress;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-07-20T13:11:31.687

```
using System.Net;
using System.Runtime.InteropServices;

[DllImport("iphlpapi.dll", ExactSpelling = true)]
public static extern int SendARP(int DestIP, int SrcIP, [Out] byte[] pMacAddr, ref int PhyAddrLen);

try
{
    IPAddress hostIPAddress = IPAddress.Parse("XXX.XXX.XXX.XX");
    byte[] ab = new byte[6];
    int len = ab.Length, 
        r = SendARP((int)hostIPAddress.Address, 0, ab, ref len);
    Console.WriteLine(BitConverter.ToString(ab, 0, 6));
}
catch (Exception ex) { } 
```

或使用 PC 名称

```
try
      {
           Tempaddr = System.Net.Dns.GetHostEntry("DESKTOP-xxxxxx");
      }
      catch (Exception ex) { }
      byte[] ab = new byte[6];
      int len = ab.Length, r = SendARP((int)Tempaddr.AddressList[1].Address, 0, ab, ref len);
        Console.WriteLine(BitConverter.ToString(ab, 0, 6)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-24T14:50:31.530

只是公认方法的性能更好的版本。

```
 public string GetMacByIp( string ip )
    {
        var pairs = this.GetMacIpPairs();

        foreach( var pair in pairs )
        {
            if( pair.IpAddress == ip )
                return pair.MacAddress;
        }

        throw new Exception( $"Can't retrieve mac address from ip: {ip}" );
    }

    public IEnumerable<MacIpPair> GetMacIpPairs()
    {
        System.Diagnostics.Process pProcess = new System.Diagnostics.Process();
        pProcess.StartInfo.FileName = "arp";
        pProcess.StartInfo.Arguments = "-a ";
        pProcess.StartInfo.UseShellExecute = false;
        pProcess.StartInfo.RedirectStandardOutput = true;
        pProcess.StartInfo.CreateNoWindow = true;
        pProcess.Start();

        string cmdOutput = pProcess.StandardOutput.ReadToEnd();
        string pattern = @"(?<ip>([0-9]{1,3}\.?){4})\s*(?<mac>([a-f0-9]{2}-?){6})";

        foreach( Match m in Regex.Matches( cmdOutput, pattern, RegexOptions.IgnoreCase ) )
        {
            yield return new MacIpPair()
            {
                MacAddress = m.Groups[ "mac" ].Value,
                IpAddress = m.Groups[ "ip" ].Value
            };
        }
    }

    public struct MacIpPair
    {
        public string MacAddress;
        public string IpAddress;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T10:27:55.563

根据上述 Marco Mp 的评论，使用了 ARP 表。[ARP类](http://pietschsoft.com/post/2009/11/08/Resolve_IP_Address_And_Host_Name_From_MAC_Address_using_CSharp_and_Windows_ARP_Utility.aspx)

# java - 你怎么能静默重新安装java？

> ID：12802890
> 
> 赞同：0
> 
> 时间：2012-10-09T14:58:05.380
> 
> 标签：java

如果之前的安装尝试损坏了 JRE，我需要重新安装相同版本的 JRE。此处的损坏意味着缺少某些二进制文件或与以前版本的二进制文件不匹配。

有人可以告诉是否有任何方法可以静默重新安装jre？

我知道我们可以交互地重新安装 jre，在重新安装之前它会向用户显示对话框以供他批准。如果他选择继续，它会成功。但是通过命令行如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:03:11.210

使用 Windows 中最新的 UAC（用户访问控制），不可能安装任何具有升级用户权限（在 Program Files 中写入内容）文件夹的东西。因此，安装时完全静音是不可能的。

如果静默是指用户仅与 UAC 交互而没有其他交互，那么您应该通过执行 setup.exe /? 查看安装文件的命令行选项。在窗户上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:48:55.217

经过大量搜索，我发现 jre 不支持静默修复或重新安装操作。如果我们想继续使用它，我们需要使用提取到位置 C:\Users\\AppData\LocalLow\Sun\Java\jre1.6.0_20_x64 的 jre_x.x_x.msi。我不确定它是否会一直有效。但如果你幸运的话，它可能会奏效。

# knockout.js - Knockout.js 选择列表在 ios 上行为异常

> ID：12802896
> 
> 赞同：5
> 
> 时间：2012-10-09T14:58:31.527
> 
> 标签：knockout.js, ios6, cordova, safari

我有一些选择框在 ios 中行为不正常。我正在运行 cordova 1.8.1 并在我的页面上运行了一个 knockout.js 应用程序。当我在项目选择器中选择一个项目时，它会被选中，但列表中的所有其他项目也会被选中。现在，据我所知，当我提交表单时选择并报告了正确的项目，但它对用户来说真的很糟糕，并且可能会非常混乱。我正在做任何花哨的事情，这是代码：

```
<select class="dropdownList1" style='width:35%;left:28%;position:absolute;' data-bind="value:ContactUsForm.Month,options:ContactUsForm.Months,optionsCaption: 'Month'"></select> 
```

但这是我选择 7 个月时的结果：

![在此处输入图像描述](../Images/a5a004a5e8c6c2598bef0ed62249b884.png)

这不是一个多选框。在我看来，这里的错误出现在 iOS 中，但我怀疑当我选择一个值时，Knockout 也在进行一些重新渲染。在普通浏览器中，框会自动关闭，因此您永远不会看到“中间”状态，但在 ios 中，框会保持打开状态，直到您单击“完成”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T21:09:24.443

此问题是在 Knockout 更新下拉列表中的项目时引起的。但即使`ContactUsForm.Months`从未更改，Knockout 仍会在值更改时更新项目，例如当您选择项目时。有关此问题的更多详细信息，请参阅[RP Niemeyer](https://stackoverflow.com/users/594420/rp-niemeyer)的文章[Knockout.js Performance Gotcha #3 - All Bindings Fire Together](http://www.knockmeout.net/2012/06/knockoutjs-performance-gotcha-3-all-bindings.html)。

我认为他在那里提出的解决方案对你有用。而不是使用`options`绑定，你应该使用他的`isolatedOptions`绑定。（而且`value`绑定应该总是在`options`or之后`isolatedOptions`。）

```
<select data-bind="
    isolatedOptions:ContactUsForm.Months, optionsCaption:'Month', 
    value:ContactUsForm.Month"></select> 
```

# eclipse - Pydev 使用错误的 IPython 版本？

> ID：12802900
> 
> 赞同：0
> 
> 时间：2012-10-09T14:58:42.673
> 
> 标签：eclipse, pydev, ipython

我安装了 Pydev 2.7、Python 3.2 和 IPython 0.13。但是，当我在 Eclipse 中运行交互式控制台时，它说

```
PyDev console: using IPython 0.11 
```

我无法想象 IPython 0.11 应该来自哪里。我该如何检查？

运行控制台后， `import IPython; IPython.__version__`也给了我正确的 0.13 版本。

现在是控制台中的 IPython 0.13 还是有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:03:17.843

我觉得你很好。我试过了

```
IPython.__version__ 
```

并在 PyDev 控制台中获得 0.13：

```
import sys; print('%s %s' % (sys.executable or sys.platform, sys.version))
C:\Python27\python.exe 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)]
PyDev console: using IPython 0.11
import IPython
IPython.__version__
Out[1]: '0.13.1' 
```

# jquery - 谷歌分析跟踪 jquery 打开

> ID：12802902
> 
> 赞同：0
> 
> 时间：2012-10-09T14:58:56.160
> 
> 标签：jquery, google-analytics

我们正在重新启动我们的公司网站，并希望摆脱笨重且浪费的内部分析，并更好地使用我们的谷歌分析。

我们有一个列出招聘广告的页面，单击职位名称会打开标题下方的职位描述。目前我们使用 php 来跟踪这些打开，然后将每次点击输入到我们的数据库中。

我们如何用谷歌分析做同样的事情？

我们当前的代码是相当标准的：

```
$('document').ready(function(){
  $('#linkbox').hide();
  $('span.linka').toggle(function() {
    var id = $(this).attr('id');
    $('#linkbox' + id).show(500);
    $.post('clickrecorder.php', {"productID": encodeURIComponent(id)} );
  }, function() {
    var id = $(this).attr('id');
    $('#linkbox' + id).hide(500);
  });
}); 
```

Clickrecorder.php 从字面上将数据库中的数字加一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:40:22.850

您可以通过以下方式将广告浏览作为 Google Analytics 事件进行跟踪：

```
_gaq.push(['_trackEvent', 'job ad', 'view', id]); 
```

有关事件的更多详细信息，请参阅[事件跟踪指南](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)。

# java - Android 模拟器无法启动

> ID：12802908
> 
> 赞同：7
> 
> 时间：2012-10-09T14:59:18.853
> 
> 标签：java, android, android-emulator, emulation, avd

我已经为 Eclipse 安装了所有必要的部件和 ADT 插件。当我创建一个 Android 虚拟设备并启动它时，什么也没有出现。我得到绿色状态栏出现的框，并显示“正在启动 AVD 模拟器”。然而，之后什么也没有出现。控制台中也没有日志....有人有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T15:09:00.043

如果您使用“emulator”命令启动模拟器，您将有更多机会调试问题：

```
emulator @avd-name 
```

“avd-name”是您创建时的仿真器映像名称。

如果您碰巧没有“emulator”命令，请尝试将“android-sdk-linux_x86/tools/”（其中 android-sdk-linux_x86 是您的 android SDK 安装目录）添加到您的 PATH 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T15:24:48.403

我遇到了同样的问题，并意识到这是因为当您设置皮肤时，它默认设置为 WVGA800，但无论出于何种原因，它只有在设置为 HVGA 时才有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-28T19:50:16.197

对于 Ubuntu（我使用 Xubuntu）：

我的 Android 虚拟设备没有启动，因为我为 ubuntu 使用了 NVIDIA 驱动程序。将驱动程序更改为 Nouveau 后，它在 15 秒内启动。

转到“设置管理器”-> 软件和更新-> 附加驱动程序选择：“使用 X.org x 服务器--Nouveau 显示驱动程序（开源）”

NVIDIA F# U [http://www.youtube.com/watch?v=55XVnJ_0qhg](http://www.youtube.com/watch?v=55XVnJ_0qhg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-27T12:19:01.837

我发现问题是显卡。模拟器可能无法识别您的显卡，然后再尝试使用另一张显卡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-21T18:38:11.010

I had a similar issue. Windows 7. ADT Bundle 64-bit. I was logging in to my PC with Active Directory credentials(corporate). Emulator was not starting at all, after I tried many different things. I switched to a local administrator login, and everything worked.

This is not necessarily the solution. I would rather want to know how to make it work on my AD account.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-18T10:10:44.523

这也与模拟器的屏幕尺寸有关。

我创建了一个带有 768x1280 显示器的全新 AVD。这开始很好。然后我将配置文件中的`lcd.height`, `lcd.width`, `skin.name`,的值替换`skin.path`为 1080x1920。之后，模拟器不再启动。

我在 1360x768 像素的 Xvnc 会话中启动模拟器，但它在 3000x2000 像素的 Xvnc 会话中也不起作用。

# javascript - 写入和读取 window.localStorage

> ID：12802909
> 
> 赞同：2
> 
> 时间：2012-10-09T14:59:21.240
> 
> 标签：javascript, local-storage

我之前在多个窗口中使用过 localStorage 没有任何问题，但由于某种原因，在这个新应用程序中它根本不起作用。

我有两个页面，PageA 和 PageB。PageA 在 localStorage 中设置一些数据，如下所示：

```
var someData = {
    item1: 'foo',
    item2: 'bar'
};
window.localStorage.setItem('someKey', JSON.stringify(someData)); 
```

如果我立即尝试通过 读取数据`JSON.parse(window.localStorage.getItem('someKey'));`，它工作正常。

然后 PageA 调用 a`window.open(PageBURL)`打开 PageB。在 PageB 中，当我尝试从 localStorage 读取值时，我得到的只是`null`：

```
JSON.parse(window.localStorage.getItem('someKey')); // gives me null 
```

两个页面具有相同的`document.domain`值。我必须有一些愚蠢的东西，有没有人有任何想法要仔细检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:30:34.433

原来`localStorage`在完整的主机域下运行，而不是 javascript `document.domain`。

PageA 在下`"foo.common.net"`运行。`document.domain``"common.net"`

PageB 在下`"bar.common.net"`运行。`document.domain``"common.net"`

如果我将 PageA 切换为在 下运行`"bar.common.net"`，我可以毫无问题地读取数据。

# vb.net - 在 epicor 中找到引用表的适配器

> ID：12802910
> 
> 赞同：0
> 
> 时间：2012-10-09T14:59:25.770
> 
> 标签：vb.net, dataset, adapter, epicorerp

在 Epicor 9.05 中，我需要从 Quote Entry Script 访问 Part Mtl 表。我查看了 PartAdapter，但它的数据集中似乎没有 PartMtl 表。哪个适配器的数据集中有 partmtl？更一般地说，我如何找到哪些适配器将包含哪些表？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:15:01.773

呜呜我找到了。在 Epicor 9.05 中，在 BAQ 设计器中创建一个虚拟 BAQ。转到 Phrase Builder 工具，应该有一个按钮，上面写着“业务对象...”。如果单击它，它将打开一个弹出窗口，其中包含 Epicor 中所有业务对象的树。您可以展开每个节点以查看作为该业务对象的一部分存在的底层 Epicor 表。

享受吧，你们几个 Epicor 定制开发人员！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T10:48:00.197

如果我可以这样称呼它，您可以使用该工具从“编译器”添加必要的程序集。

工具>向导>装配参考管理器

# javascript - Rails 3 JavaScript 资源管道管理

> ID：12802911
> 
> 赞同：0
> 
> 时间：2012-10-09T14:59:27.637
> 
> 标签：javascript, ruby-on-rails, gem, asset-pipeline, rails-engines

我想知道使用 Ruby gem 将 JavaScript 库包含到 Rails 项目与自己包含 JavaScript 文件之间有什么区别。

我知道您可以使用 bundler 锁定 js 库的一个版本，或者使用一个命令通过 bundler 更新所有 js 库，而不是手动将 js 文件复制并粘贴到您的项目中。Rails::Engine 类增加了多少开销，这是从 Rails 应用程序中可用的 gem 获取资产文件的唯一方法吗？是否有任何其他显着差异表明哪种方式是包含这些库的“最佳”方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:32:54.970

对于只提供资产的 gem，这个`Rails::Engine`类是矫枉过正的（即使是无害的，因为它不会有很多运行代码）。有了 Railtie 就绰绰有余了。在任何情况下，差异都可以忽略不计。

使用外部 gem，您可以将资产保存在项目中。

例如，angular-rails gem 提供了一些离线代码来生成东西，它不会影响你的应用程序。

另一方面，您必须等待 gem 维护者在需要时使用新版本的库对其进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:31:38.007

来自olaf_from_norweden在 reddit 上的[精彩](http://www.reddit.com/user/olaf_from_norweden)[帖子以及答案：](http://www.reddit.com/r/ruby/comments/11bcck/would_love_to_get_the_reddit_communitys_input_on/c6lq0hn)

> 让我们来看看 Twitter Bootstrap gem 的 Sass 端口实际上做了什么：
> 
> [https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/lib/bootstrap-sass.rb](https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/lib/bootstrap-sass.rb)
> 
> 在 Rails 初始化（启动服务器时）评估 bootstrap gem 时，它使用 require 根据环境加载自身的各个部分。
> 
> 如果 Compass Sass 框架 gem 被加载，它会告诉 Compass 要使用的 Rails 资产文件夹路径。
> 
> 如果您使用带有资产管道的 Rails 版本，它会加载一个空的 Rails::Engine。
> 
> 引擎只是您可以安装到其他 Rails 应用程序上的 Rails 应用程序。当 Rails 在初始化期间遇到引擎时，它会查找引擎指定的路径以加载相关文件。
> 
> 在这种情况下，gemspec 在初始化期间告诉 Rails 其包含的供应商目录中的 .scss/.png/.js 文件。
> 
> 在开发模式下，Rails 将在每次请求时重新编译这些资产以及主应用程序中的其他资产。
> 
> In production, the bootstrap gem isn't even loaded because it goes in the :assets group of your Gemfile.
> 
> Hope that makes sense. Not the best or most salient explanation. And even if the gem was loaded in production, Rails doesn't go hunting for assets directories unless it's compiling assets. So it doesn't even matter.

# visual-studio-2010 - Visual Studio 2010 - 带有命名空间的类图

> ID：12802914
> 
> 赞同：1
> 
> 时间：2012-10-09T14:59:35.623
> 
> 标签：visual-studio-2010, namespaces, class-diagram

如何在项目的特定文件夹（命名空间）中创建类，并查看按命名空间分组的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:40:07.263

1) 使用 Add new Item 选项在适当的文件夹中创建一个类。

2）将类放入类图中。

[http://social.msdn.microsoft.com/Forums/en-US/vsclassdesigner/thread/bebfa1a4-1930-4a56-b0fc-e15a238650ac/](http://social.msdn.microsoft.com/Forums/en-US/vsclassdesigner/thread/bebfa1a4-1930-4a56-b0fc-e15a238650ac/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:43:16.650

使用 Visual Studio Ultimate 时，您可以从菜单中选择“架构”并生成命名空间图。

图表呈现后，您可以展开命名空间和其他元素以显示它们包含的类。

请注意，特定文件夹！= 命名空间。给定文件夹中的新文件默认为命名空间，但根据经验，在团队工作或使用其他人的代码时尽量不要依赖它。;-)

# magento - 生成与 Magento Go API 匹配的 password_hash

> ID：12802918
> 
> 赞同：1
> 
> 时间：2012-10-09T14:59:41.667
> 
> 标签：magento, md5, salt

我正在尝试通过 Magento Go SOAP API 对用户进行身份验证，并且在生成匹配哈希时遇到问题。根据文档，password_hash 包含密码：salt，但是当我 md5 时，它与 password_hash 不匹配。

例子：

1) 我通过管理控制面板将密码更改为“testtest”

2）运行以下代码：

```
$client     = new SoapClient('http://XXXX.gostorego.com/api/v2_soap/?wsdl');
$session    = $client->login($api_user, $api_pass);

$params     = array('filter'=>array(array('key'=>'email','value'=>'user@domain.com')));

$data       = $client->customerCustomerList($session, $params);     

echo '<pre>CUSTOMER: '.print_r($data, true).'</pre>';

if (count($data)) {
    $hash   = explode(':',$data[0]->password_hash);
    $salt   = $hash[1];
    echo '<pre>HASH PARTS:'.print_r($hash, true).'</pre>';
    echo '<br>' .md5($salt.$password);
} 
```

3) password_hash 是 f35604820826428dd7633b91cd6078f4075c9bfa1a37db7bc70f563475ad8495:qK

4) MD5 为 0b04a656c770ba2f10b5918f94529cd8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:13:37.210

我从来没有用 Magento Go 做过这个（我不确定它是否支持/可能）但是哈希字符串

```
 f35604820826428dd7633b91cd6078f4075c9bfa1a37db7bc70f563475ad8495:qK 
```

太长而不能成为字符串的 MD5 散列。那是一个 64 字节的散列（加上`:`，加上 salt `qK`）。我的猜测是它是 SHA256，但这是基于字符长度的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T19:28:01.193

在后端，同时支持 Md5 和 SHA，新的支持倾向于 SHA（在企业中）。

如果您的密码是：12341234

数据库哈希实际上类似于： cdb757ce51af9749d2fabea4cf71dc72a1ec7b8721e5f8de83020f574ca3c5f1:TR

*   而且确实是SHA256。

但是，对于 WSDL 文件，远程连接应该是基于 SSL 的“https:”，并且您应该以普通/纯文本输入 SOAP API 密钥。IE：

*   $username = "我的用户名"; //IE。你的Api用户名
*   $password = "我的用户密码"; //IE。12341234

如果你想为你自己的内部目的复制它们的散列，你需要查看它们的方法：class Mage_Core_Model_Encryption

```
 public function hash($data)
{
    return md5($data);
}

/**
 * Validate hash against hashing method (with or without salt)
 *
 * @param string $password
 * @param string $hash
 * @return bool
 * @throws Exception
 */
public function validateHash($password, $hash)
{
    $hashArr = explode(':', $hash);
    switch (count($hashArr)) {
        case 1:
            return $this->hash($password) === $hash;
        case 2:
            return $this->hash($hashArr[1] . $password) === $hashArr[0];
    }
    Mage::throwException('Invalid hash.');
} 
```

企业：

```
public function hash($data, $version = self::HASH_VERSION_LATEST)
    {
        if (self::HASH_VERSION_MD5 === $version) {
            return md5($data);
        }
        return hash('sha256', $data);
    }

    /**
     * Validate hash by specified version
     *
     * @param string $password
     * @param string $hash
     * @param int $version
     * @return bool
     */
    public function validateHashByVersion($password, $hash, $version = self::HASH_VERSION_LATEST)
    {
        // look for salt
        $hashArr = explode(':', $hash, 2);
        if (1 === count($hashArr)) {
            return $this->hash($password, $version) === $hash;
        }
        list($hash, $salt) = $hashArr;
        return $this->hash($salt . $password, $version) === $hash;
    } 
```

# javascript - 嵌套 jQuery each() + json

> ID：12802920
> 
> 赞同：0
> 
> 时间：2012-10-09T14:59:43.243
> 
> 标签：javascript, jquery, json

现在我有一个 json 文件，我用它来填充站点内的数据。

LVL 1 - 主要收藏页面 ->

LVL 2 - 收藏详情页面 ->

LVL 3 - 收藏详情页面滑块

所以我有 3 个 $.each() 相互嵌套的语句来实现这一点。一切正常。我只是想知道是否有更有益的方法来做到这一点？

示例代码：

```
$j.getJSON('collections.json', function(data, status){
    // lvl 1
    $.each(data.collections, function(i, collection){

     // do your thing

       // lvl 2
        $.each(collection.details, function(v, detail){

          // slider time - lvl 3

          $.each(detail.slider, function(s, slide){

            // inception achieved

          });

        });   

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:04:33.110

不是真的.. 这是非常正常的树迭代。如果您只使用普通`for`循环而不是`$.each`：

```
for (var i = 0; i < data.collections.length; i++) {
   var collection = data.collections[i];
   //do your thing
   for (var v = 0; v < collection.details.length; v++) {
      //...
   }
} 
```

# struts2-jquery - Struts2-jquery TreeTag JSON 选择要执行的动作

> ID：12802922
> 
> 赞同：0
> 
> 时间：2012-10-09T14:59:47.510
> 
> 标签：struts2-jquery

我有一个这样的 TreeTag：

```
<s:url var="treeDataUrl" action="treeData" />
<sjt:tree href="%{treeDataUrl}" jstreetheme="myTheme" checkbox="true" onClickTopics="treeClicked" /> 
```

加载时，会调用 treeData 操作并正确显示所有内容。

我添加了这个提交按钮：

```
<sj:submit formIds="treeForm" targets="" button="true" /> 
```

而且我想在提交时调用不同的操作，而不是再次调用 treeData。

我怎样才能做到这一点？

这是控制此代码的 struts.xml 部分：

```
<action name="treeData" class="com.myProject.presentation.action.TreeData">
    <result name="success" type="json">
        <param name="root">nodes</param>
    </result>
</action> 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:13:33.267

我只需要用好东西包围我的树`form`：

```
<s:form id="treeForm" action="treeData" method="post">
    <s:url var="treeDataUrl" action="treeData" />
    <sjt:tree href="%{treeDataUrl}" jstreetheme="myTheme" checkbox="true" onClickTopics="treeClicked" />
    <sj:submit formIds="treeForm" targets="" button="true" />
</s:form> 
```

# java - 正则表达式忽略空格 unicode (%20)

> ID：12802929
> 
> 赞同：1
> 
> 时间：2012-10-09T15:00:24.957
> 
> 标签：java, regex

我试图忽略句子中的 unicode 字符（空格），任何帮助将不胜感激。

例子 -

```
utmctr=google%20search%20keyword 
```

所需的输出 -

```
google search keyword 
```

我试图用它`\p{Z}`来做到这一点，但无济于事。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:10:12.690

所以你想做2个替换：删除前导标识符`utmctr=`并替换`%20`，所以你需要2个步骤：

1.  搜索：`"utmctr="`; 代替：`""`
2.  搜索：`%20`; 代替：`" "`

根据您使用的语言（例如 Perl），您不需要双引号。

编辑：因为您使用的是 Java：

```
String input = "utmctr=google%20search%20keyword"; 
String output = input.replaceAll("utmctr=", "").replaceAll("%20", " "); 
```

`replaceAll()`使用正则表达式，但在你的情况下，你真的不需要为正则表达式使用特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:09:02.657

您只想删除字符串中的 %20 并将其替换为空格，对吗？然后使用`(%20)`作为正则表达式应该在使用全局替换选项 ( `g`) 时执行此操作，并将其替换为空格。

# javascript - jQuery：单击 div 后打开文件上传窗口

> ID：12802937
> 
> 赞同：2
> 
> 时间：2012-10-09T15:00:42.503
> 
> 标签：javascript, jquery, css, file-upload

我使用（Css 2.1 和 Jquery）来设置文件输入的样式

它工作得很好，到现在一切都很好

这是我正在谈论的示例

[输入文件演示](http://www.shbkat.com/careers.html)

如果您使用的是 Firefox 一切正常

但是当使用 Chrome 时 **无法从第一次选择文件** `My Problem`

在此演示中选择文件它在**Cv旁边**

这是我的 JQuery 代码

```
(function($){
              $.fn.SafyForm = function(){
                   $(".safy_input_file").live("click", function(){
                                     var obj = $(this) ;
                                     obj.prev("input[type=file]").click() ;
                                     obj.prev("input[type=file]").change(function(){
                                         var txt = $(this).val();
                                         obj.children("span").text(txt) ;
                                     });
                   }) ;
                   return this.each(function(){
                         if($(this).is("input[type=file]"))
                                {
                                  $(this).hide().after('<div class="safy_input_file"><span> [ .docx & .doc & .pdf & .rar ] </span><label>اختار ملف</label></div>')
                                }
                   }) ;
              }
        })(jQuery);

        $(document).ready(function(){
              $('input[type=file]').SafyForm() ;
        }) ; 
```

**更新后的代码**

```
(function($){
              $.fn.SafyForm = function(){
                   $(".safy_input_file").live("click",function(){
                                     var obj = $(this) ;
                                     obj.prev("input[type=file]").click() ;

                   }) ;

                   $("input[type=file]").change(function(){
                            var txt = $(this).val();
                            var safyobj = $(this).next('.safy_input_file') ;
                            safyobj.children("span").text(txt) ;
                   });

                   return this.each(function(){
                         if($(this).is("input[type=file]"))
                                {
                                  $(this).hide().after('<div class="safy_input_file"><span> [ .docx & .doc & .pdf & .rar ] </span><label>اختار ملف</label></div>')
                                }
                   }) ;
              }
        })(jQuery);

        $(document).ready(function(){
              $('input[type=file]').SafyForm() ;
        }) ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:25:08.050

你说得对，在 chrome 中两次运行上传。我在小提琴中测试了你的插件：

> [http://jsfiddle.net/EPxkh/61/](http://jsfiddle.net/EPxkh/61/)

并且是正确的（1次运行）。问题必须在您的其他网页元素或脚本中。

也尝试改变：

> 输入[类型=文件]

到

> ：文件

# c++ - 地图算法 >

> ID：12802939
> 
> 赞同：1
> 
> 时间：2012-10-09T15:00:48.227
> 
> 标签：c++, algorithm, big-o

我无法为我遇到的地图矢量问题想出一个有效的算法。

假设我有一个 map<int , vector <int> > 我想知道一个整数在地图的所有向量中出现了多少次，如果它出现在预定义的数量上，则从其余向量中删除它的值（希望这是有道理的），这是一个简单的例子：

* * *

**关键值**

1 - <2,3,4,4,5>

2 - <2,3,3,4,5>

3- <2,3,3,4,6>

在这种情况下，如果它出现超过 3 次，我想从所有向量中删除 4。生成的地图如下所示：

1 - <2,3,4,4,5>

2 - <2,3,3,4,5>

3- <2,3,3,DEL,6>

* * *

我正在为这个问题寻找一种有效的算法，只是想知道是否有人有任何想法。（我在 C++ 工作，但我知道 java 或伪代码很酷）。

谢谢你的帮助

旁注仅在此示例中，向量在现实生活中并未排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:12:08.937

由于未对向量进行排序，因此唯一的方法是遍历所有向量的所有项目，跟踪找到的项目数量，并酌情清理向量。我认为使用外部有状态谓词和 remove-erase 习语来做到这一点很简单。

但是，鉴于您的精确需求和容器使用，可能会有替代方法。例如，如果`vector`实际上不需要可索引，则可以使用 a`multiset`来保持项目排序并提供简单的计数和删除。

# java-me - 从 J2ME 的菜单中删除 Lwuit 命令

> ID：12802944
> 
> 赞同：0
> 
> 时间：2012-10-09T15:01:09.637
> 
> 标签：java-me, menu, command, lwuit, series-40

我正在为 S40 Mobiles 开发 J2ME Lwiit 应用程序，当我在（Qwerty S40 Mobiles）中向 Exit 等表单添加命令时，中间会出现另一个选择命令。左侧菜单出现的问题是包含 2 个命令（退出并选择）。如何从菜单中删除选择命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:50:12.207

所以你需要使用的是`MenuBar`.

这个短语是从 API 复制的

此类表示 Form MenuBar。此类负责显示表单命令并处理设备软键、返回键、清除键等...此类可以在 LookAndFeel 中被覆盖和替换

所以我认为如果你可以`MenuBar`从你的 中获得`Form`，你也可以删除它`Command`。

[菜单栏 API](http://lwuit.java.net/nonav/iodocs/com/sun/lwuit/MenuBar.html)

# desire2learn - desire2learn Valence API 中的考勤数据

> ID：12802947
> 
> 赞同：1
> 
> 时间：2012-10-09T15:01:25.237
> 
> 标签：desire2learn

有没有办法通过 Valence API 访问考勤数据？我经历过它，没有看到任何提及它。我错过了什么，还是不存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:57:32.133

目前，Valence API 不公开对出勤功能（出勤方案、登记、会话或出勤数据）的访问。如果 D2L 客户想要注册请求以添加对出勤功能的支持，那么他们可以使用[D2L 产品创意交流](https://community.brightspace.com/sharedresources/glossary/library/product_ideas_exchange_pie)来打开注册（并投票支持）该创意。

# iphone - iPhone应用程序不断崩溃？

> ID：12802949
> 
> 赞同：0
> 
> 时间：2012-10-09T15:01:25.673
> 
> 标签：iphone, objective-c, xcode

我有点难过，由于某种原因，以下代码导致我的应用程序在真正的 iPhone 上崩溃，尽管它在模拟器中运行良好，它所做的一切都是抓取一些 json 并将其放在列表视图中，有人知道吗为什么它总是崩溃？任何帮助是极大的赞赏！

--------SecondViewController.m------

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self fetchPrices];        
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)fetchPrices
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"http://url.php"]];

        NSError* error;

        prices = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return prices.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"PriceCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *price = [prices objectAtIndex:indexPath.row];
    NSString *text = [price objectForKey:@"name"];
    NSString *name = [price objectForKey:@"price"];

    cell.textLabel.text = text;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"Price: %@", name];

    return cell;
}
@end 
```

-----SecondViewController.h----

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UITableViewController {
NSArray *prices;
}

- (void)fetchPrices;

@end 
```

---- 崩溃日志 ---- [http://pastebin.com/cnf6L7Jf](http://pastebin.com/cnf6L7Jf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:37:15.760

问题是 NSArray *prices 在您获取价格和处理该值之间是随机值。其次，您没有保留它。所以价格也可能是垃圾价值。

更清洁的方法是

```
@property(nonatomic, retain)NSArray *prices;
/**/
@synthetise prices;

// then 
SELF.prices = [[NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error]; 
```

这样当您初始化表控制器时“价格”为零，并且在您需要时始终可用。

不要忘记在你的 dealloc 方法中释放它

# tortoisesvn - Tortoise SVN 使用以前的版本作为最新版本

> ID：12802954
> 
> 赞同：2
> 
> 时间：2012-10-09T15:01:39.217
> 
> 标签：tortoisesvn, submit, version

我想使用以前的版本作为使用 Tortoise SVN 的最新版本。我有一个 4 年前提交的应用程序版本，我想将其用作当前版本。我检查了它，但由于存在冲突，我无法提交它。是否有提交副本强制它使用正在提交的副本？

感谢您的帮助，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:11:47.307

这是一个非常简单的任务

1.  更新你的本地 svn 副本
2.  将冲突解决为“Accept-Mine”
3.  提交您的代码。

就 Tortoise SVN 而言

1.  更新代码（根文件夹）
2.  选择选项“使用我的解决冲突”
3.  提交代码。

# asp.net-mvc - 在其他位置寻找 MVC 视图

> ID：12802957
> 
> 赞同：0
> 
> 时间：2012-10-09T15:01:53.300
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在 Asp.net MVC3 上有三个 Web 项目：

Portal.Web -> 通用控制器和模型

Portal.WebsiteCustom -> 自定义网站 1

Portal.WebsiteCustom2 -> 自定义网站 2

两个自定义站点都使用 Portal.Web 的控制器和模型。

现在我想在这个项目上添加通用视图并将 MVC 设置为在 Portal.Web 项目上查看通用视图。

这可能吗？

我怎么能归档这个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:12:43.577

> 这可能吗？

是的。

> 我怎么能归档这个？

您必须将这些视图作为资源嵌入到程序集中，然后在您的客户端 MVC 项目中引用该程序集。接下来，您将必须编写一个自定义虚拟路径提供程序，该提供程序能够将这些视图作为嵌入式资源检索，而不是在默认进程的当前项目文件夹中查找它们。

您可以使用[`Razor Generator package`](http://razorgenerator.codeplex.com/)它允许您这样做，[`simplify the process`](http://razorgenerator.codeplex.com/documentation)因为它已经为您提供了您不需要手动编写的自定义虚拟提供程序。这是一篇[过时的文章](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)，您也可以查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:17:33.717

您可以编写自己的视图引擎来实现`IViewEngine`，它有一个方法可以查找在哪里搜索视图。您还可以扩展`VirtualPathProviderViewEngine`并覆盖位置以添加自定义文件位置以查找视图。

这种事情的示例代码位于[此 Stack Overflow 答案](https://stackoverflow.com/a/9063559/16587)中。

# wordpress - ` ` 不要给我所有的类别

> ID：12802959
> 
> 赞同：2
> 
> 时间：2012-10-09T15:01:57.860
> 
> 标签：wordpress, wordpress-theming, wp-list-categories

`<?php echo get_the_category_list(); ?>`不要给我所有的类别。

我`<?php echo get_the_category_list(); ?>`在我的`footer.php`文件中使用来显示我的类别，但在主页中只显示两个类别，并且在内部单个帖子中显示帖子的相关类别，而在页面中什么也不显示。即使我`<?php wp_reset_query(); ?>`每次使用后`WP_Query`

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:24:11.820

您可以使用

```
<ul>
<?php wp_list_categories('exclude=22&title_li='); ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T05:21:55.297

```
$categories = get_categories($args);
$html       = '<ul>';
foreach($categories as $cat){
$html .= '<li><a href="'.get_permalink($cat->term_id);.'"';
$html .= '<h2>'.$cat->cat_name.'</h2>'; 
$html .= '</a></li>';
}
$html .= '';
return $html;` 
```

在你的功能中

# c++ - Visual Studio 2008 发布地狱

> ID：12802960
> 
> 赞同：0
> 
> 时间：2012-10-09T15:02:00.187
> 
> 标签：c++, debugging, visual-studio-2008, release, fatal-error

> **可能重复：**
> [visual studio 2008 解决方案发布版本运行时致命错误](https://stackoverflow.com/questions/12800777/visual-studio-2008-solution-release-version-runtime-fatal-error)

我有一个 Visual Studio 2008 解决方案，它在调试模式下工作正常，但在发布模式下失败。我发现我有一个 std::vector 类型的变量 devicleList，其中“设备”是一个结构。我尝试了 deviceList.clear() 并进入了 clear() 函数，但该函数似乎对 deviceList.begin() 和 deviceList.end() 一无所知。观看窗口仅显示“？？？” 对于这些指针的任何字段。最后我得到了致命的错误。据我所知，std::vector 默认构造函数默认初始化这种类型的对象。那么，问题可能出在哪里？谢谢。

# php - PHP 从数组中获取最高值（来自 SQL 选择）

> ID：12802963
> 
> 赞同：4
> 
> 时间：2012-10-09T15:02:02.820
> 
> 标签：php, arrays, while-loop

我有 2 个表：**dt_times**和**dt_reports**

**dt_times**包含时间列表，**dt_reports**包含对相关时间的投票（正/负）。

我的代码执行以下操作：

*   选择今天之前的所有时间
*   对于这些时间中的每一个 - 计算保证金`((positive-negative)/positive)*100`
*   结果存储在数组中

在所有迭代之后，这里是 id => margin 的 var_dump

```
array(8) {

    [111]=> int(100)
    [110]=> int(-100)
    [108]=> int(-100)
    [100]=> int(100)
    [97]=> int(100)
    [92]=> int(100)
    [59]=> float(-71.4285714286)
    [58]=> float(-50)

 } 
```

我需要选择最高边距，其中 id 也是最高的。因为您可以看到 111、100、97 和 92 - 都具有相同的 100 值。

到目前为止，我的代码是这样的：

```
while ($row = mysql_fetch_array($result)) {

    //Get values for quality
    //calculate margin
    $arr[$row['id']] = $margin;
    $arr2[$margin] = $row['id'];

}

$timeId = $arr2[max($arr)]; 
```

但是，在所有循环之后，$timeId 是 92，这是数组中值为 100 的最后一个 id

我认为 array_keys 可能是答案，但为了我生命中的热爱，我无法弄清楚它们 =(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:09:25.577

使用 krsort 按键对结果数组进行排序 - [http://us.php.net/manual/en/function.krsort.php](http://us.php.net/manual/en/function.krsort.php)。它将返回具有最高值的最高键作为第一个元素。

```
 <?php
   $a = array(10 => 10, 20=>10, 20=>20);
   krsort($a);
   var_dump($a);

  ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:28:57.290

[从检索数组http://us.php.net/manual/en/function.max.php](http://us.php.net/manual/en/function.max.php)的最大值开始，然后遍历数组并找到与最大值匹配的边距的键。

```
$arr = array();
while ($row = mysql_fetch_array($result)) {
    //Get values for quality
    //calculate margin
    $arr[$row['id']] = $margin;
}

$max = max($arr);
$highestId = 0;
foreach($arr as $id => $margin){
  if($margin == $max && $id > $highestId){
    $highestId = $id;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:33:13.270

您可以通过创建一个合适的数组与[**usort()**](http://www.php.net/manual/en/function.usort.php)自定义比较函数一起使用来做到这一点，代码如下：

```
function cmp($a, $b) {
    if ($a['id'] == $b['id']) {
        if ($a['margin'] == $b['margin']) {
           return 0;
        }
        return ($a['margin'] > $b['margin']) ? -1 : 1;
    }
    return ($a['id'] > $b['id']) ? -1 : 1;
}

while ($row = mysql_fetch_array($result)) {
    //calculate $margin
    //...
    $arr[] = array('margin'=>$margin ,'id'=>$row['id']);
}

usort($arr, 'cmp');

echo 'The highest id with the highest margin is';
echo ' ID: ' . $arr[0]['id'] . ' MARGIN: ' . $arr[0]['margin'];

//Print full sorted classification
foreach($arr as $val) {
   echo 'ID:' . $val['id'] . ' MARG: ' . $val['margin'] . '<br>';
} 
```

此解决方案将按`$arr`id 排序，边距从高到低，因此第一项`$arr[0]`是最高的 id 和边距，您可以循环数组的其余部分以打印完整的排序表，而不仅仅是最高的项目。

# c# - 如何将样式信息添加到单行 xml 文件

> ID：12802966
> 
> 赞同：0
> 
> 时间：2012-10-09T15:02:17.450
> 
> 标签：c#, xml

对于我们的游泳数据库，我们编写了一个很好的导入器，它已经工作了几年。但是，时间的来源（每次会议的 xml 文件）已经改变，现在导入器不再工作了。

问题是新的 xml 文件在 1 行上包含所有数据，而不是普通的树状结构。当我在浏览器中打开 xml 文件时，它显示“此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

现在在任何人说这可以忽略之前，它不能在我们的程序中。所以我正在寻找一种通过 C# 将此样式信息添加到 xml 文件的方法。任何人有任何想法如何做或在哪里看？

顺便说一句，那些以前看过此消息并希望将样式信息添加到单个文件的人，请查看[http://citrixblogger.org/2010/08/13/one-line-xml-files/](http://citrixblogger.org/2010/08/13/one-line-xml-files/) （这对几个文件，但每周手工做大约 100 个，包括之后保存文件等，对我来说不是一个真正的选择）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:20:59.490

所需要的只是：

```
xmlDoc.Save(fileName); 
```

谢谢JuStDaN。

# html - 如何在 iframe 边界之外显示 HTML 元素

> ID：12802967
> 
> 赞同：2
> 
> 时间：2012-10-09T15:02:18.670
> 
> 标签：html, css, iframe, xhtml

> **可能重复：**
> [有没有办法让 IFRAME 中的内容溢出到父框架上？](https://stackoverflow.com/questions/176572/is-there-a-way-to-have-content-from-an-iframe-overflow-onto-the-parent-frame)

我正在寻找以下情况的可能解决方法：

在加载到 iframe 元素中的页面中有一个具有“**位置：绝对”样式的元素。**根据 iframe 细节和该论坛上的几篇帖子（[Is there a way to have content from an IFRAME overflow on the parent frame?](https://stackoverflow.com/questions/176572/is-there-a-way-to-have-content-from-an-iframe-overflow-onto-the-parent-frame)），没有办法在 iframe 边界之外显示“位置：绝对”元素。

但是，似乎有一个例外：本机[选择/选项](http://www.w3schools.com/tags/tag_select.asp)元素显示在 iframe 边框之外：

主页.htm:

```
<iframe src="WindowPage.htm" style="height: 50px; width: 50px"></iframe> 
```

窗口页面.htm:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <select>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
    </select>
</body>
</html> 
```

是否有任何可能的样式/设置（可能是 HTML5/CSS3 等）来实现 iframe 内的“位置：绝对”元素的这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:00:33.783

简短的回答：不。

您实际上几乎无法控制 iFrame 的内容，无论是风格还是其他方式。源页面的 CSS 声明的任何内容都将胜过您尝试的任何内容。

另外，正如评论中提到的链接中提到的那样，iFrame 存在安全隐患，这使得这种必要性。

# javascript - 是否有任何关于 toggle() 的声明，如果它打开这样做，那么关闭？

> ID：12802968
> 
> 赞同：1
> 
> 时间：2012-10-09T15:02:20.677
> 
> 标签：javascript, jquery

我正在做一些 jquery 的东西`toggle()`，我正在做不同的操作，具体取决于当前`div`是关闭还是显示，我知道我可以轻松检查是否是 div`hasClass()`或`is(':visible')`我想要做什么，但我在想也许有某种方式我可以减少代码量还是让它更有效率？比如用两个函数声明toggle()，这是在显示时使用的，这是在关闭时使用的，这可能吗？

希望你明白我的意思？

像这样，或者检查一个[jsfiddle](http://jsfiddle.net/QqFhe/1/)

```
$('#click_me').on('click', function() {
    $('#contain').toogle('blind', 300, function (){
        alert('open');
    }, function (){
        alert('close');          
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:30:16.370

```
var container = $('.container');
$('.button').click(function() {
  container.toggle(function() {
    alert(container.is(':visible') ? 'open': 'close');
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:35:01.133

只需创建一个小的 jQuery 插件：

```
(function($){
    $.fn.myToggle = function(duration, cbShow, cbHide){
        this.each(function(){
            $(this).toggle(duration, $(this).is(":visible") ? cbHide : cbShow);
        });
    };
})(jQuery); 
```

完全按照您在问题中的建议使用；我只是省略了缓动方法...

[**演示（JSFiddle）**](http://jsfiddle.net/Aletheios/QqFhe/3/)

# android - 单击时更改 Android 平滑滚动行为

> ID：12802969
> 
> 赞同：0
> 
> 时间：2012-10-09T15:02:22.240
> 
> 标签：android, android-listview, onitemclicklistener, smooth-scrolling

我有一个`ListView`和一个`Timer`我通过调用来控制这个列表的滚动移动`smoothScrollToPositionFromTop(position, offset, duration)`。有`ListView`一个监听器`OnItemClickListener`。

如果在平滑滚动发生时单击项目，则滚动停止但`onItemClick`不会触发事件。为此，您需要再次单击该项目。

我想知道如何覆盖这种行为。我的意思是，**如果我在平滑滚动发生时单击一个项目**，除了停止滚动之外，**我还想`onItemClick`在单击的项目**上触发。

我真的不知道是否有一种简单的方法可以做到这一点。我尝试使用列表中的 a`GestureDetector`并`OnTouchListener`收听`onSingleTapConfirmed`以便在那里打电话`performClick`，但我不知道如何从`MotionEvent`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:42:52.947

我终于找到了使用以下方法的解决方案`GestureDetector`：

```
final GestureDetector gestureDetector = new GestureDetector(MyActivity.this, 
  new GestureDetector.SimpleOnGestureListener(){
    public boolean onSingleTapConfirmed(MotionEvent e) {
        int position = listView.pointToPosition((int)e.getX(), (int)e.getY());
        if(position != ListView.INVALID_POSITION){
            listView.playSoundEffect(SoundEffectConstants.CLICK);
            //onItemClick code goes here
            //or call listView.performItemClick
            return true;
        }
        return false;
    };
});

listView.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        return gestureDetector.onTouchEvent(event);
    }
});

listView.setSelector(android.R.color.transparent); 
```

`onItemClick`就我而言，我在里面添加了我正在做的事情`onSingleTapConfirmed`并`OnItemClickListener`从列表中删除了。这就是为什么我还添加了`playSoundEffect`模拟点击的功能。

在最后一行中，我禁用了`ListView`点击突出显示，因为只有在没有发生平滑滚动时才会突出显示行。通过禁用它，我每次点击都会得到相同的行为。

# c++ - 修复子目录中 C++ 文件中所有包含的路径

> ID：12802970
> 
> 赞同：-1
> 
> 时间：2012-10-09T15:02:26.097
> 
> 标签：c++

我有一些我正在尝试在 VS 中工作的 unix 源代码。我猜，所有#includes 都是针对某些用户定义的标头路径进行编码的。例如，`#include <myheader>`但 myheader 存在于项目文件夹中，如`..\headers\myheader.hpp`.

是否有任何实用程序可以递归地扫描所有 C++ 文件并使用在这些子目录中找到的标头修复#include？

例如，它将转换

```
#include <myheader> 
```

至

```
#include "..\headers\myheader.hpp" 
```

?

（否则我必须扁平化层次结构，因为它有点乱）

（无需担心潜在的重复标头...）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:05:56.900

我建议您将`headers`目录添加到项目选项中某处的包含路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:16:18.850

关于标题的目录路径，我同意其他海报。

如果您需要在文件中递归地替换某个模式，那么您应该学习如何使用`find`它`sed`（如果您使用的是 Unixoid OS）。

您的解决方案看起来像

```
find . -name \*.cpp -exec sed -i -e 's/old/new/g' {} \; 
```

我打赌你会需要在你生命中的某个时刻使用它 8^)

# vagrant - Vagrant up 错误，需要第二个 vagrant up

> ID：12802972
> 
> 赞同：2
> 
> 时间：2012-10-09T15:02:28.760
> 
> 标签：vagrant

**问题：** `vagrant up`第一次失败并出现以下错误，然后`vagrant up`再次成功启动 vagrant box。我在 Windows 7 上运行 vagrant，基本框是 Ubuntu 12.04 从[这里开始](http://www.vagrantbox.es/)

导致错误的原因是什么，如何解决？

**输出（带有 VAGRANT_LOG=DEBUG）**

```
C:/vagrant/vagrant/bin//../embedded/bin/vagrant:19:in `load'
C:/vagrant/vagrant/bin//../embedded/bin/vagrant:19:in `<main>'
 INFO interface: error: There was an error executing the following command with VBoxManage:

["modifyvm", "1a08aaf5-f8b5-4e1e-a773-a91fdec7a6b6", "--name", "test_1349794733"]

For more information on the failure, enable detailed logging with VAGRANT_LOG.
There was an error executing the following command with VBoxManage:

["modifyvm", "1a08aaf5-f8b5-4e1e-a773-a91fdec7a6b6", "--name", "test_1349794733"]

For more information on the failure, enable detailed logging with VAGRANT_LOG. 
```

*为什么要求我启用详细日志记录？不是`VAGRANT_LOG=DEBUG`最高等级吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:14:43.187

我认为无论您是否启用它，都会显示有关如何启用详细日志记录的信息。我不会太担心它。

您可以尝试自己运行该命令，看看是否可以获得更多信息。应该是这样的

```
VBoxManage modifyvm 1a08aaf5-f8b5-4e1e-a773-a91fdec7a6b6 --name test_1349794733 
```

# backbone.js - 使骨干关系无法在图形（节点/树）模型中工作

> ID：12802978
> 
> 赞同：2
> 
> 时间：2012-10-09T15:02:38.960
> 
> 标签：backbone.js, marionette, backbone-relational

我正在使用主干从一些平面数据中构建分层数据模型，并在尝试使用关系模型时遇到问题。以下代码的输出如下所示：

```
"D"
    "B"
        "C"
        "F"
    "G"
        "A" 
```

其中每个字母对应于相关模型中的一个 id。当我将关联添加到 TreeNode 模型中以形成关系时，树停止迭代，我只得到第一组结果 (D > B > C) 而不是 (D > B > F) 或 (D > G > A ) 如我所愿。这是我添加关系时的输出：

```
{"label":"Fred","language":"en","id":"D","datatype":"number"}
    {"label":"is friends with","language":"en","id":"B","datatype":"text"}
        {"label":"Violet","language":"en","id":"C","datatype":"text"} 
```

我是骨干关系的新手，不确定我是否正确执行此操作。这是示例代码（我尽可能将其配对，并用 HERE IS THE PROBLEM 指出问题区域）

提前致谢！！！

```
<!DOCTYPE html>
<html>
<head>
    <title>Relational Graph</title>
    <meta charset="utf-8" />
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.1/underscore-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
    <script src="js/backbone.marionette.js"></script>
    <script src="js/backbone.relational.js"></script>
</head>
<body>

<div id="model"></div>

<script>

$(document).ready(function(){

    MainApp = new Backbone.Marionette.Application();
    MainApp.addRegions({treeRegion: "#model"});
    MainApp.addInitializer(function(options){
        var trunk = things.search({id: "D"}).first();
        var tree = new TreeNodeCollection(graphify(options.relationships, trunk));
        var treeView = new TreeRoot({collection: tree});
        this.treeRegion.show(treeView);
    });

    TreeNode = Backbone.RelationalModel.extend({
        initialize: function(){
            var nodes = this.get("nodes");
            if (nodes){
                this.nodes = new TreeNodeCollection(nodes);
                this.unset("nodes");
            }
        },
        render: function(){
            var that = this;
            TemplateManager.get(this.template, function(template){
                var html = $(template).tmpl();
                that.$el.html(html);
            });
            return this;
        }
        // !!! HERE IS THE PROBLEM - when I add this line, it stops looping through the tree :(
        //, relations: [{type: Backbone.HasOne, key: 'id', relatedModel: "Thing"}]
    });

    TreeNodeCollection = Backbone.Collection.extend({model: TreeNode});

    TreeView = Backbone.Marionette.CompositeView.extend({
        template: "#node-template",
        tagName: "ul",
        initialize: function(){
            this.collection = this.model.nodes;
        },
        appendHtml: function(collectionView, itemView){
            collectionView.$("li:first").append(itemView.el);
        }
    });

    TreeRoot = Backbone.Marionette.CollectionView.extend({itemView: TreeView});

    Thing = Backbone.RelationalModel.extend();
    Things = Backbone.Collection.extend({
        model: Thing,
        search: function(opts){
            return new Things(this.where(opts));
        }
    });

    Relationship = Backbone.RelationalModel.extend({
        relations: [
            {type: Backbone.HasOne, key: 's', relatedModel: Thing},
            {type: Backbone.HasOne, key: 'p', relatedModel: Thing},
            {type: Backbone.HasOne, key: 'o', relatedModel: Thing}
        ]
    });

    Relationships = Backbone.Collection.extend({
        model: Relationship,
        search: function(opts){
            return new Relationships(this.where(opts));
        }
    });

    things = new Things([
        new Thing({label: 'Sam', language: 'en', id: 'A', datatype: 'text'}),
        new Thing({label: 'Fred', language: 'en', id: 'D', datatype: 'number'}),
        new Thing({label: 'Jake', language: 'en', id: 'E', datatype: 'text'}),
        new Thing({label: 'Sally', language: 'en', id: 'F', datatype: 'number'}),
        new Thing({label: 'is friends with', language: 'en', id: 'B', datatype: 'text'}),
        new Thing({label: 'is working with', language: 'en', id: 'G', datatype: 'text'}),
        new Thing({label: 'Violet', language: 'en', id: 'C', datatype: 'text'})
    ]);

    relationships = new Relationships([
        new Relationship({s: "A", p: "B", o: "C"}),
        new Relationship({s: "A", p: "B", o: "D"}),
        new Relationship({s: "A", p: "B", o: "E"}),
        new Relationship({s: "A", p: "B", o: "F"}),
        new Relationship({s: "D", p: "B", o: "C"}),
        new Relationship({s: "D", p: "B", o: "F"}),
        new Relationship({s: "A", p: "G", o: "F"}),
        new Relationship({s: "D", p: "G", o: "A"})
    ]);

    MainApp.start({things: things, relationships: relationships});

    function arrUnique(field, arr){
        var all = [];
        arr.each(function(item){
            all.push(item.get(field).get('id'));
        });
        return _.uniq(all);
    }

    function graphify(arr, obj){
        var graphNew = [];
        var uniqueSubjects = arrUnique("s", arr.search({s: obj}));
        for (var i=0; i<uniqueSubjects.length; i++){

            var subject = uniqueSubjects[i];
            var newSubject = {id: subject};
            var subNodes = [];
            var uniquePredicates = arrUnique("p", arr.search({s: obj}));

            for (var j=0; j<uniquePredicates.length; j++){
                var predicate = uniquePredicates[j];
                var newPredicate = {id: predicate};
                var relatedObjects = [];
                arr.each(function(o){
                    if (o.get("s").get("id") == subject && o.get("p").get("id") == predicate){
                        relatedObjects.push({id: o.get("o").get("id")});
                    }
                });

                newPredicate.nodes = relatedObjects;
                subNodes.push(newPredicate);
            }

            newSubject.nodes = subNodes;
            graphNew.push(newSubject);
        }
        return graphNew;
    }

});

</script>

<script type="text/template" id="node-template">
    <li><label><%= JSON.stringify(id) %></label></li>
</script>

</body>
</html> 
```

# wpf - 如何根据项目的类设置 ListViewItem 的样式

> ID：12802979
> 
> 赞同：0
> 
> 时间：2012-10-09T15:02:38.307
> 
> 标签：wpf

我记得前段时间，在 MSDN 上看到一个示例，说明如何根据该项目中对象的类类型更改 LitViewItem 的样式。

谁能指出我这个例子的方向或类似的例子？我正在转换文件管理器，我很想使用这种方法。

谢谢，汤姆 P。

编辑：好的，我认为我没有正确描述我的问题。让我试试代码：

```
public class IOItem
{
}

public class FileItem : IOItem
{
}

public class DirectoryItem : IOItem
{
}

public class NetworkItem : IOItem
{
} 
```

现在，鉴于上述类，我可以创建一个基于最终对象的类类型更改的样式吗？例如：

```
<Style TargetType="{x:Type FileItem}">
    <Setter Property="Background" Value="Red" />
</Style>
<Style TargetType="{x:Type DirectoryItem}">
    <Setter Property="Background" Value="Green" />
</Style> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:09:47.360

您需要创建一个`StyleSelector`并将其分配给该`ItemContainerStyleSelector`属性。在选择器中，只需根据项目的类型选择一种样式。

```
class MyStyleSelector : StyleSelector
{
    public override Style SelectStyle(object item, DependencyObject container)
    {
        if (item is FileItem)
            return Application.Current.Resources["FileItemStyle"];
        if (item is DirectoryItem)
            return Application.Current.Resources["DirectoryItemStyle"];
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:30:09.497

我认为您可以使用模板选择器。

[数据模板选择器类](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

另一种选择是接口，接口中的一个属性将反映调用。
然后您可以在 XAML 中使用模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:41:41.270

您始终可以将类类型的样式放在您正在使用的 List 控件的资源集合中，它们将覆盖您设置的任何全局样式。

```
<ListView ItemsSource="{Binding Elements}">
        <ListView.Resources>

          <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TextBlock}">
                            <Rectangle Fill="Green" Width="100" Height="100"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

           <Style TargetType="{x:Type Button}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Rectangle Fill="Red" Width="100" Height="100"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

        </ListView.Resources>
    </ListView> 
```

如果您希望多个列表控件包含这些特定的类样式，则为列表控件创建一种样式并在其资源中包含特定于类型的样式。

```
 <Window.Resources>

        <Style x:Key="myListStyle" TargetType="{x:Type ListView}">
            <Style.Resources>
                <Style TargetType="{x:Type Button}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Rectangle Fill="Red" Width="100" Height="100"/>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Style.Resources>
        </Style>

    </Window.Resources>
    <ListView ItemsSource="{Binding Elements}" Style="{StaticResource myListStyle}" /> 
```

# java - 在虚拟盒子上的java中打开串口返回错误

> ID：12802980
> 
> 赞同：0
> 
> 时间：2012-10-09T15:02:41.247
> 
> 标签：java, serial-port, rxtx

我在虚拟机上使用 Ubuntu 12.04 并尝试先与 javax.comm 和 rxtx 进行串行通信。在这两种方法中 getPortIdentifiers().toString() 只返回“gnu.io.CommPortEnumerator@20d10a”并且没有可用端口的实际列表。

有任何想法吗？

# iphone - 如何在两个 UIButton 选择器之间交换

> ID：12802984
> 
> 赞同：0
> 
> 时间：2012-10-09T15:03:08.077
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

我的视图中有 2 个按钮，一个事件必须在`selector`每个按钮之间交换

换句话说（不是代码）：

button1 选择器 = button2 选择器；

button2 选择器 = button1 选择器；

**编辑**：

事件就是这样，但负责在 2 个按钮操作之间交换的代码是我需要的

我需要的是：

1-如何删除选择器并将其存储以将其用于另一个按钮

2-如何使用保存的选择器作为按钮选择器

**附言**

在我的代码中 button1 和 button2 在进入包含我的两个按钮的视图之前，根据用户选择从 9 个选择器中随机选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:06:20.673

我通常会在某处创建一个 BOOL 并检查它是否为真，然后将代码定向到需要去的地方。

```
-(IBAction)button1:(id)sender {

    if (boolIsTrue) {
        // do this
    }
}

-(IBAction)button2:(id)sender {

    if (!boolIsTrue) {
        // do this
    }
} 
```

类似的东西会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:39:57.813

考虑为两个按钮使用*相同的选择器。*
它使您的代码更加优雅和易于维护：没有动态选择器（更少的调试）并且所有情况都在同一个代码块中。毕竟，您有一个“发送者”（即 UIButton 本身）。
您可以通过标签区分两个按钮（如果您通过代码创建按钮，则可以#defined），或者通过与保留按钮进行比较（您的选择）

```
-(IBAction)selectorForBothButtons:(id)sender 
{

if ((UIButton*)sender.tag == FIRST_BUTTON_TAG ) {
    if (!shouldSwapActions) {
        do_something; 
    } else {
        do_something_else ; 
    } 
} else { //second button 
    other_actions..  
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T15:37:03.533

这假设您只有一个与每个按钮的目标关联的操作（假定为`self`）。

```
NSString *oldAction1String = [[button1 actionsForTarget:self forControlEvent:UIControlEventTouchUpInside] objectAtIndex:0];
NSString *oldAction2String = [[button2 actionsForTarget:self forControlEvent:UIControlEventTouchUpInside] objectAtIndex:0];

SEL oldAction1 = NSSelectorFromString(oldAction1String);
SEL oldAction2 = NSSelectorFromString(oldAction2String);

[button1 removeTarget:self action:oldAction1 forControlEvents:UIControlEventTouchUpInside];
[button1 addTarget:self action:oldAction2 forControlEvents:UIControlEventTouchUpInside];

[button2 removeTarget:self action:oldAction2 forControlEvents:UIControlEventTouchUpInside];
[button2 addTarget:self action:oldAction1 forControlEvents:UIControlEventTouchUpInside]; 
```

有很多方法可以绕过这么多重复的代码，但我觉得这种方式更具可读性。最后，此解决方案真正根据运行时情况交换操作，而不是依赖于在编译时分配特定操作，这应该可以满足您的更新要求。希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:09:20.210

you can also have a same selector for both button1 and button2 ,then you compare sender object and your button1,button2

```
 -(void)sameSelectorForButton1andButton2:(id)sender
     {        
if ((UIButton*)sender == button1) 
     {     //do something          }
else if((UIButton*)sender == button2) 
     {      //do something   }   
   } 
```

# spring - 将 OSuser 与 spring 和 hibernate 集成

> ID：12802986
> 
> 赞同：1
> 
> 时间：2012-10-09T15:03:14.593
> 
> 标签：spring, hibernate

为了`OSuser`在 Spring 中使用 Hibernate，我必须做哪些配置。我知道`OSuser`提供休眠提供程序，但我如何在 spring 中配置它。如果有人知道，请详细解释。

# php - 如何从 PHP 日期时间获取 unix 时间戳？

> ID：12802987
> 
> 赞同：17
> 
> 时间：2012-10-09T15:03:16.823
> 
> 标签：php, unix-timestamp

我正在尝试使用 PHP 获取 unix 时间戳，但它似乎不起作用。这是我试图转换为 unix 时间戳的格式：

PHP

```
$datetime = '2012-07-25 14:35:08';

$unix_time = date('Ymdhis', strtotime($datetime ));
echo $unix_time; 
```

我的结果如下所示：

```
20120725023508 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-09T15:04:12.133

[strtotime](http://php.net/manual/en/function.strtotime.php)成功返回 a `timestamp`，否则返回 FALSE。

```
 echo strtotime('2012-07-25 14:35:08' ); 
```

输出

```
1343219708 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:04:14.223

这是将其转换为 unix timestamp: `strtotime($datetime)`，但您正在将其再次转换回日期`date()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-23T07:34:32.880

要使用面向对象的解决方案扩展此处的答案，必须命名 DateTime 类。DateTime 类自 PHP 5.2 起可用，可按如下方式使用。

```
$date = DateTime::createFromFormat('Y-m-d H:i:s', '2012-07-25 14:35:08');
echo $date->getTimestamp(); // output: 1343219708 
```

甚至作为单线

```
echo $date = (new DateTime('2012-07-25 14:35:08'))->getTimestamp();
// output: 1343219708 
```

# c# - 从分页的 Gridview 中获取数据

> ID：12802992
> 
> 赞同：0
> 
> 时间：2012-10-09T15:03:33.313
> 
> 标签：c#, asp.net, gridview

有没有办法从之前用 SqlDataSource 填充的 gridview 获取所有数据？我尝试查看我的 gridview 的 Rows 属性，但我只看到 50 条记录，因为我的 gridview 是分页的；我之前将属性 AllowPaging 设置为 false 但不起作用

我正在使用 c# 和 asp.net

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:10:19.740

您可以使用[`SqlDataSource.Select`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.select%28v=vs.100%29.aspx)它从底层数据库中检索数据。

```
DataView view = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
DataTable table = view.ToTable(); 
```

当启用分页并且行数多于 时，您无法访问 GridView 中的所有行`GridView.PageSize`，因为 GridView 仅存储当前页面（在 ViewState 中）。所以不，除了从数据库中选择数据之外别无他法。另一个（可扩展性较差）选项是用于 `Session`存储数据源。

# php - IE9 错误 - 缺少表单标签

> ID：12802994
> 
> 赞同：0
> 
> 时间：2012-10-09T15:03:44.637
> 
> 标签：php, html, internet-explorer-9

我有一篇包含表单的 joomla 文章是使用 rsform 组件创建的

[http://www.kjetilhaugmo.no/videos/36-video-6](http://www.kjetilhaugmo.no/videos/36-video-6)

使用密码：'test'查看内容

一切都可以在所有浏览器中正常工作，但在 IE 中却没有：)

奇怪的是该表单适用于 IE8 和 IE7，但不适用于 IE9

我找了很多问题，发现标签表单没有出现在 IE9 上生成的代码中

我已经检查了负责创建表单的代码，一切都很完美

```
$formLayout = '<form method="post" '.$CSSId.$CSSClass.$CSSName.$CSSAdditionalAttributes.' enctype="multipart/form-data" action="'.RSFormProHelper::htmlEscape($u).'">'.$formLayout.'</form>'; 
```

我没有解决方案

请有任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:37:15.540

在 www 上快速搜索：[http ://www.rsjoomla.com/support/documentation/view-article/642-my-form-wont-submit-in-internet-explorer-9.html](http://www.rsjoomla.com/support/documentation/view-article/642-my-form-wont-submit-in-internet-explorer-9.html)

我查看了您的代码，您确实在 « p » 标签内有表单。你可以从那里开始。

# mercurial - 进行 HG 更新时出现错误“存储库不是本地的”

> ID：12802997
> 
> 赞同：3
> 
> 时间：2012-10-09T15:03:46.433
> 
> 标签：mercurial, tortoisehg

我正在尝试在我们团队已经使用了一段时间的 repo 上更新 Mercurial 的最新拉取更改。

```
C:\code\printlogix\templates-dev>hg update --clean
0 files updated, 0 files merged, 0 files removed, 0 files unresolved
getting changed bfiles
abort: repository 'https://printlogix.kilnhg.com/Code/Repositories/Templates/templates-dev' is not local

C:\code\printlogix\templates-dev> 
```

不确定这个“存储库 xxxx 不是本地”消息是什么意思，我以前从未见过。

作为参考，我在 Windows 7 x64 上使用 TortoiseHg 2.5.1（带有 Mercurial 2.3.2）。我们还使用 KilnBfiles 扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:50:37.840

远射，但我遇到了这个问题（hg v 2.4.2）并查看了调试输出并发现了以下内容。

```
calling hook preupdate.eol: <function preupdate at 0x000000000263A048>
lock: reading lock data from c9a8f1b931da
lock: reading d:\kev\htmapp\.hglocks@c9a8f1b931da <---- RELEVANT CLUE
using https://code.google.com/p/htmapp/
sending capabilities command
code.google.com certificate successfully verified
Traceback (most recent call last):
  File "mercurial\dispatch.pyo", line 88, in _runcatch
  File "mercurial\dispatch.pyo", line 741, in _dispatch` 
```

我使用的是 hglocks 扩展，在查看网站上的文档后发现它与 2.3 之后的任何新版本都不兼容。禁用扩展并解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:44:46.267

在 Windows 上，您需要设置 TortoiseHG/Mercurial 以使用 TortoisePlink 来支持 SSH。详情在这里：

[https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Mercurial](https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Mercurial)

短版：在 mercurial.ini 文件的 [UI] 部分添加如下所示的行。

```
ssh = "C:\Program Files\TortoiseHg\TortoisePlink.exe" -ssh -2 -batch -C 
```

然后注销并重新登录。不知道为什么这是必要的，但在我这样做之前我无法获得 mercurial.ini 更改。

例如，我的 mercurial.ini 文件如下所示：

```
# Generated by TortoiseHg settings dialog
[extensions]
mq = 
rebase = 
transplant = 
hgsubversion = C:\Users\rsyring\dev\3rdparty\hgsubversion\hgsubversion
eol = 

[ui]
username = Randy Syring <me@nospam.com>
ssh = "C:\Program Files\TortoiseHg\TortoisePlink.exe" -ssh -2 -batch -C 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T22:51:59.360

从命令行中删除 -R

由此

```
hg pull -R URL -rREVISION 
```

对此

```
hg pull -rREVISION URL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T15:17:41.103

在这种情况下，Mercurial 消息并不是真正具有描述性的。它有助于`hg --debug -vvv --traceback`用于您的转换命令以获取更多详细信息。